# StackOverflow 问答 10600000-10600999

# cassandra - Cassandra Hector：如何将 null 作为列值插入？

> ID：10600001
> 
> 赞同：4
> 
> 时间：2012-05-15T11:44:36.637
> 
> 标签：cassandra, hector

Cassandra 的一个常见用例是将数据存储在动态创建的列族的列名中。在这种情况下，不需要行值本身，通常的做法是在那里存储空值。但是，在处理 Hector 时，似乎无法插入空值，因为 Hector HColumnImpl 在列的构造函数中进行了显式的空检查：

```
 public HColumnImpl(N name, V value, long clock, Serializer<N> nameSerializer,
       Serializer<V> valueSerializer) {
        this(nameSerializer, valueSerializer);
        notNull(name, "name is null");
        notNull(value, "value is null");

        this.column = new Column(nameSerializer.toByteBuffer(name));
        this.column.setValue(valueSerializer.toByteBuffer(value));
        this.column.setTimestamp(clock);
      } 
```

有什么方法可以通过 Hector 插入空值？如果不是，那么在您不关心列值并且只需要它们的名称的情况下，最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T04:37:18.393

尝试使用空字节[]，即`new byte[0];`

# php - 如何从屏幕截图中隐藏 CSS 模态覆盖

> ID：10600006
> 
> 赞同：1
> 
> 时间：2012-05-15T11:44:47.383
> 
> 标签：php, css

在我正在处理的网站上，有一个模态覆盖窗口会在用户第一次访问/如果未设置 cookie 时弹出。（我知道它们很烦人，但这是必要的）

现在，当 StumbleUpon.com 和 Google（搜索结果的站点预览）等网站拍摄页面图像时，它会在图像中显示模态窗口。我不确定我是否可以隐藏这个？我唯一的想法实际上是检查引荐来源网址并将其隐藏在引荐来源网址列表中，但这很难我必须尝试找出所有截取屏幕截图的网站

除了检查和保留列入黑名单的推荐人名单之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:18:57.183

我能想到的最好的事情是检查用户代理字符串服务器端。

在这里，您对最常见的 UAStrings 有一个很好的概述。

[http://www.useragentstring.com/pages/useragentstring.php](http://www.useragentstring.com/pages/useragentstring.php)

检查Referer是不会成功的，因为无法从referrer上判断是爬虫还是普通用户。

但是请注意，UAS 可能会被欺骗。如果这很重要，您可能需要考虑使用 DNS 查找...

# mysql - 避免插入失败以避免虚假的自动增量

> ID：10600010
> 
> 赞同：4
> 
> 时间：2012-05-15T11:44:55.027
> 
> 标签：mysql, sql, innodb, auto-increment

我的问题与[为什么在插入失败时 MySQL 自动增量增加相同？](https://stackoverflow.com/q/2787910/)，但与其增加我的`id`字段，我宁愿只重写给`INSERT`我带来麻烦的查询。假设我有一个包含两个字段的数据库，`id`并且`username`，其中`id`是主键并且`username`是唯一键。我本质上是在寻找可以做到的语法`INSERT...IF NOT EXISTS`。现在，我愿意

```
INSERT INTO `table`(`username`) 
    VALUES ('foo') 
    ON DUPLICATE KEY UPDATE `id`=`id` 
```

我只有一个线程写入数据库，所以我不需要任何并发保护。建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:21:19.553

你应该使用这个：

```
INSERT INTO tableX (username) 
  SELECT 'foo' AS username
  FROM dual
  WHERE NOT EXISTS
        ( SELECT *
          FROM tableX 
          WHERE username = 'foo'
        ) ; 
```

如果要包含更多列的值：

```
INSERT INTO tableX (username, dateColumn) 
  SELECT 'foo'                       --- the aliases are not needed             
       , NOW()                       --- actually
  FROM dual
  WHERE NOT EXISTS
        ( SELECT *
          FROM tableX 
          WHERE username = 'foo'
        ) ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T12:21:56.853

我认为您不能阻止计数器增加，原因在您所链接的问题的答案中给出。

你有三个选择：

1.  与跳过的标识符一起生活；您真的希望用完 64 位吗？

2.  在尝试之前检查现有记录是否存在`INSERT`：

    ```
    DELIMITER ;;

    IF NOT EXISTS (SELECT * FROM `table` WHERE username = 'foo') THEN
      INSERT INTO `table` (username) VALUES ('foo');
    END IF;;

    DELIMITER ; 
    ```

    或者，更好的是，使用`FROM dual WHERE NOT EXISTS ...`@ypercube 建议的形式。

3.  每次插入后重置计数器。如果`INSERT`在存储过程中执行操作，您可以使用重复键错误处理程序来执行此操作：

    ```
    DELIMITER ;;

    CREATE PROCEDURE TEST(IN uname CHAR(16) CHARSET latin1) BEGIN
      DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' BEGIN
        -- WARNING: THIS IS NOT SAFE FOR CONCURRENT CONNECTIONS
        SET @qry = CONCAT(
          'ALTER TABLE `table` AUTO_INCREMENT = ',
          (SELECT MAX(id) FROM `table`)
        );
        PREPARE stmt FROM @qry;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        SET @qry = NULL;
      END;
      INSERT INTO `table` (username) VALUES (uname);
    END;;
    DELIMITER ; 
    ```

    牢记@ypercube 在他的评论中提出的关于此策略的（有效）担忧，您可以改用：

    ```
    SELECT AUTO_INCREMENT - 1
    FROM   INFORMATION_SCHEMA.TABLES
    WHERE  table_schema = 'db_name' AND table_name = 'table'; 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-25T21:15:12.457

您可以在插入失败后简单地重置自动增量字段

ALTER TABLE 表名 AUTO_INCREMENT =1;

这不会将自动增量重置为 1，但会将其重置为当前最大值加一

另请注意，您连接到数据库的用户应该对目标表具有更改权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T13:26:34.553

您还可以在插入该用户之前检查该用户之前是否已插入，这将需要对您的数据库进行额外调用，但是，如果该用户已经存在，您可以返回您找到的信息并避免虚假插入。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-15T11:48:42.813

使用`INSERT IGNORE INTO table`. 检查下面的帖子

[http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html](http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html)

你可以这样做：

```
INSERT INTO `table`(`username`) 
VALUES ('foo')      
ON DUPLICATE KEY UPDATE `username`= 'foo' 
```

或者

```
INSERT IGNORE INTO `table`
SET `username` = 'foo' 
```

# java - 使用球衣上传文件上的 Http 415

> ID：10600013
> 
> 赞同：6
> 
> 时间：2012-05-15T11:45:03.687
> 
> 标签：java, jsp, file-upload, jersey

我的 RESTful 文件上传代码：

```
@Path("/upload") 
@POST 
@Consumes("multipart/form-data") 
public String post(
    @FormDataParam("part") String s, 
    @FormDataParam("part") FormDataContentDisposition d) { 
    return s + ":" + d.getFileName(); 
} 
```

当我尝试使用 curl curl -X POST --form part=@file.txt url 上传文件时

我收到 HTTP 415-不支持的媒体类型错误。怎么了 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T16:36:39.143

这可能由于几个原因而发生。我设法缩小了其中一些范围。

1.  您的 Content-Type 标头与 @Consumes 标头提供的标头不匹配。使用代理验证这一点。

2.  您设法偶然发现了Jersey 1.4 中修复的与 FormDataParam 注释相关[的错误。](http://jersey.576304.n2.nabble.com/Jersey-Multipart-Missing-Dependencies-td5453046.html)

3.  您将 jersey-bundle 和 jersey-server 等都包含在同一个二进制文件中，它们相互竞争。

4.  您正在使用 @FormParam 而不是 @FormDataParam。

5.  由于与 jersey-multipart 和其他 jersey jar 冲突，内省 API 无法识别您的 @FormDataParam。如果一个 jar 的版本为 1.x，请确保其他 jar 的版本相同。在调试 jersey API 代码时，我注意到如果 jar 版本不统一，这些方法注释会变成空白（在 jersey 的代码上）。REST 服务上的所有方法参数都被 POST 请求的主体内容替换，无论它们应该包含哪个 FormDataParam。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T17:55:36.977

在尝试了很多示例后，最终在[http://iambigd.blogspot.com/2011/06/java-upload-file-using-jersey.html上找到了真正有效的示例](http://iambigd.blogspot.com/2011/06/java-upload-file-using-jersey.html)

```
@POST
@Path("/simpleupload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void simpleUpload(
    //@Context UriInfo ui,
    @Context HttpServletRequest request
){
    String fileRepository = "D:\\";
    if (ServletFileUpload.isMultipartContent(request)) {
    FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    List<FileItem> items = null;
    try {
        items = upload.parseRequest(request);
    } catch (FileUploadException e) {
        e.printStackTrace();
    }
    if (items != null) {
        Iterator<FileItem> iter = items.iterator();
        while (iter.hasNext()) {
            FileItem item = iter.next();
            if (!item.isFormField() && item.getSize() > 0) {
            System.out.println("File is found.");
            String fileName = processFileName(item.getName());
            try {
                String savePath = fileRepository + fileName;
                System.out.println("savePath:" + savePath);
                item.write(new File(savePath));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }else{
            System.out.println("getFieldName:" + item.getFieldName());
            System.out.println(item.getString());
        }
     }
   }
}
} 
```

（需要 servlet-api.jar、（apache）commons-oi.jar 和（apache）commons-fileupload.jar）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T13:40:38.167

请确保您在类路径中有**mimepull.jar**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-11T08:46:04.097

您可能需要按照 Jersey 文档第[8.3.1.2章注册中的说明注册](https://jersey.java.net/documentation/latest/user-guide.html#multipart)**MultipartFeature**。

创建一个类似这样的类：

```
/**
 * 
 */
package com.verico.multipart.app;

import javax.ws.rs.ApplicationPath;

import org.glassfish.jersey.media.multipart.MultiPartFeature;
import org.glassfish.jersey.server.ResourceConfig;

@ApplicationPath("/")
public class MultiPartApp extends ResourceConfig {

public MultiPartApp() {
    super(MultiPartFeature.class);
    }
} 
```

并将以下 init-param 添加到 web.xml 中的 Jersey servlet：

```
 <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.verico.multipart.app.MultiPartApp</param-value>
    </init-param> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T18:12:13.597

您是否尝试过输入流？

*喜欢*：

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA) 
public Response post(
        @Context HttpServletRequest request,
        @Context HttpHeaders headers, 
        @FormDataParam("file") InputStream fileStream, 
```

对我来说很好。

# java - Jndi弹簧问题

> ID：10600030
> 
> 赞同：0
> 
> 时间：2012-05-15T11:46:21.113
> 
> 标签：java, spring, datasource, jndi, jdbctemplate

我正在寻找使用 Spring 和 JNDI，但在这里找不到问题：

我的 Server.xml：

```
 <Resource name="jdbc/MimsDS"
      auth="Container"
      type="javax.sql.DataSource"
      driverClassName="oracle.jdbc.driver.OracleDriver"
      username="xxx" password="xxx"
      url="jdbc:oracle:thin:@192.168.1.3:1526:mimsdb10"
      maxActive="20" maxIdle="10" maxWait="-1"
      validationQuery="select sysdate from dual"
    /> 
```

我的应用程序上下文：

```
<bean id="dataSource" class="org.springframework.jndi.JndiTemplate">
    <property name="jndiName" value="java:comp/env/jdbc/MimsDS" />
    <property name="resourceRef" value="true" /> 
  </bean>

<bean id="simpleJdbcTemplate" class="org.springframework.jdbc.core.simple.SimpleJdbcTemplate">
    <property name="dataSource" ref="dataSource"/> 
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>  
</bean> 
```

我收到了这个错误：

> org.springframework.beans.factory.BeanCreationException：在文件 [/usr/local/apache-tomcat-7.0/webapps/op-calendar/WEB-INF/classes/be/mims/opcalendar 中定义的名称为“calendarDaoImpl”的 bean 创建错误/services/CalendarDaoImpl.class]：init 方法调用失败；嵌套异常是 java.lang.IllegalArgumentException: 'dataSource' or 'jdbcTemplate' is required

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:50:07.877

你应该使用`JndiObjectFactoryBean`，而不是`JndiTemplate`。

# android - Android“全屏”菜单设计？

> ID：10600038
> 
> 赞同：1
> 
> 时间：2012-05-15T11:46:43.557
> 
> 标签：android, layout, user-interface, user-experience

很抱歉这个标题不太有用，

我目前正在寻找一个菜单，如下图所示，它不是我最初假设的列表视图，因为它只是菜单中的 5 个静态按钮，

无论如何，对于我的问题，这个菜单（非常让人想起 ICS Holo）是否按照与 ActionBar 或 ActionBarCompat 相同的方式内置到 ICS 库中

抱歉，如果我说得含糊不清，我很少有 UI/设计问题，所以不知道从哪里开始！

[http://i.imgur.com/xqr0E.png](http://i.imgur.com/xqr0E.png)

# sockets - 如何使用 Chilkat 套接字阅读整个消息？

> ID：10600040
> 
> 赞同：0
> 
> 时间：2012-05-15T11:46:49.160
> 
> 标签：sockets, stream, chilkat

我需要获取整个消息（响应），但`socket.ReceiveBytes();`只返回消息的一部分。我试图循环它，但是当没有接收到字节时它在超时时失败。

```
List<byte> lb = new List<byte>();
byte[] receivedMsg = socket.ReceiveBytes();   
while (receivedMsg.Length > 0)
{         
     lb.AddRange(receivedMsg);
     receivedMsg = socket.ReceiveBytes();
} 
```

那么，我如何检查是否有要读取的字节？我如何阅读整个消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:52:29.570

由于它是 Chilkat 实现，您可能应该联系开发人员。但我发现这可能会有所帮助：[http ://www.cknotes.com/?p=302](http://www.cknotes.com/?p=302)

最终，您需要知道从套接字读取多少内容才能构成一条完整的消息。例如，如果上层协议是一个端口映射器，那么您就知道您期待 RFC 指定格式的消息 (http://tools.ietf.org/html/rfc1833。)

如果您在套接字连接上滚动您自己的协议，请使用 Chilkat 博客文章中关于将总消息的大小放在前 4 个字节中的方法。

# java - JSONObject 不会解析来自 HTTP Post 响应的所有数据

> ID：10600042
> 
> 赞同：0
> 
> 时间：2012-05-15T11:47:18.367
> 
> 标签：java, android, json

我面临一个让我发疯的问题，我在这个网站和谷歌中搜索，但找不到任何结果。

我正在使用使用 JSON 解析器的 android sdk 构建一个应用程序。

我编写了处理 http 帖子的代码，我得到了正确的响应，但是当我尝试使用以下方法将其解析为 JSONObject 时：

strJson -> 来自服务器的响应。

JSONobject json = 新 JSONObject(strJson)

它没有解析所有数据并且一些对象是空白的（空指针）

我使用许多工具（包括 jsonlint.com）检查了 json 响应及其有效

问题是什么？

顺便说一句，这是 json 响应：

```
{
"tag": "login",
"success": 1,
"error": 0,
"userprofile": {
    "0": "123",
    "1": "0",
    "2": "mock@g.com",
    "3": "e807f1fcf82d132f9bb018ca6738a19f",
    "4": "misha",
    "5": "user",
    "6": "2000-05-22",
    "7": "264",
    "8": "Ben Gurion, Engineer",
    "9": "female",
    "10": "female",
    "11": "unemployed",
    "12": "Sillicon Vally, USA",
    "13": "english",
    "14": "hi i am new to heyou",
    "15": "1",
    "16": "2012-04-15 11:11:29",
    "user_id": "123",
    "facebook_id": "0",
    "email": "mock@g.com",
    "password": "e807f1fcf82d132f9bb018ca6738a19f",
    "firstname": "misha",
    "lastname": "user",
    "dob": "2000-05-22",
    "points": "264",
    "study": "Ben Gurion, Engineer",
    "gender": "female",
    "intrested": "female",
    "profession": "unemployed",
    "location": "Sillicon Vally, USA",
    "knows": "english",
    "status": "hi i am new to heyou",
    "activated": "1",
    "created": "2012-04-15 11:11:29"
},
"userpictures": {
    "0": {
        "0": "1",
        "1": "123",
        "2": "profile",
        "3": "http://profile.ak.fbcdn.net/hprofile-ak-ash2/372237_100000725612104_1712537362_n.jpg",
        "4": "2012-04-23 01:51:15",
        "node_id": "1",
        "user_id": "123",
        "type": "profile",
        "path": "http://profile.ak.fbcdn.net/hprofile-ak-ash2/372237_100000725612104_1712537362_n.jpg",
        "updated": "2012-04-23 01:51:15"
    },
    "tag": "getpictures",
    "success": 0,
    "error": 0,
    "user_id": "123",
    "numberofpictures": 1
},
"userfriends": {
    "0": {
        "user_id": "456",
        "name": "aksjdkasjdkasjdk ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/369825_1446671611_369000795_n.jpg",
        "online": "1",
        "longitude": "32.5568774",
        "lawtitude": "34.8789575",
        "address": "Israel ,Beersheva ,even susan",
        "client": "android"
    },
    "1": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "2": {
        "user_id": "4fa01f9e1d9243.41584266",
        "name": "matan ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-ash2/372237_100000725612104_1712537362_n.jpg",
        "online": "",
        "longitude": "",
        "lawtitude": "",
        "address": "",
        "client": ""
    },
    "3": {
        "user_id": "456",
        "name": "aksjdkasjdkasjdk ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/369825_1446671611_369000795_n.jpg",
        "online": "1",
        "longitude": "32.5568774",
        "lawtitude": "34.8789575",
        "address": "Israel ,Beersheva ,even susan",
        "client": "android"
    },
    "4": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "5": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "6": {
        "user_id": "456",
        "name": "aksjdkasjdkasjdk ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/369825_1446671611_369000795_n.jpg",
        "online": "1",
        "longitude": "32.5568774",
        "lawtitude": "34.8789575",
        "address": "Israel ,Beersheva ,even susan",
        "client": "android"
    },
    "7": {
        "user_id": "456",
        "name": "aksjdkasjdkasjdk ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/369825_1446671611_369000795_n.jpg",
        "online": "1",
        "longitude": "32.5568774",
        "lawtitude": "34.8789575",
        "address": "Israel ,Beersheva ,even susan",
        "client": "android"
    },
    "8": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "9": {
        "user_id": "456",
        "name": "aksjdkasjdkasjdk ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/369825_1446671611_369000795_n.jpg",
        "online": "1",
        "longitude": "32.5568774",
        "lawtitude": "34.8789575",
        "address": "Israel ,Beersheva ,even susan",
        "client": "android"
    },
    "10": {
        "user_id": "123",
        "name": "misha ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-ash2/372237_100000725612104_1712537362_n.jpg",
        "online": "0",
        "longitude": "23",
        "lawtitude": "54",
        "address": " ,asdkasjd ,asdasd",
        "client": "android"
    },
    "11": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "12": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "13": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "14": {
        "user_id": "456",
        "name": "aksjdkasjdkasjdk ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/369825_1446671611_369000795_n.jpg",
        "online": "1",
        "longitude": "32.5568774",
        "lawtitude": "34.8789575",
        "address": "Israel ,Beersheva ,even susan",
        "client": "android"
    },
    "15": {
        "user_id": "123",
        "name": "misha ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-ash2/372237_100000725612104_1712537362_n.jpg",
        "online": "0",
        "longitude": "23",
        "lawtitude": "54",
        "address": " ,asdkasjd ,asdasd",
        "client": "android"
    },
    "16": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "17": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "18": {
        "user_id": "789",
        "name": "naty ",
        "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/368727_1016960715_915310545_n.jpg",
        "online": "0",
        "longitude": "32.58964587",
        "lawtitude": "38.54578998",
        "address": "IRAQ ,Bagdad ,bag 9288",
        "client": "android"
    },
    "tag": "getfriendlist",
    "success": 1,
    "user_id": "123",
    "numberoffriends": 19
},
"usergoods": {
    "0": {
        "0": "123",
        "1": "Burger",
        "2": "Eat some burger",
        "3": "Gifts",
        "4": "25",
        "5": "25",
        "6": "http://www.pythagorapps.com/heyou/gifts/123.png",
        "7": null,
        "8": "2012-05-07 01:25:53",
        "product_id": "123",
        "product_name": "Burger",
        "product_desc": "Eat some burger",
        "category": "Gifts",
        "product_price": "25",
        "product_points": "25",
        "path": "http://www.pythagorapps.com/heyou/gifts/123.png",
        "locale": null,
        "created": "2012-05-07 01:25:53"
    },
    "1": {
        "0": "456",
        "1": "Beer",
        "2": "Drink ice cold beer",
        "3": "Gifts",
        "4": "30",
        "5": "30",
        "6": "http://www.pythagorapps.com/heyou/gifts/456.png",
        "7": null,
        "8": "2012-05-07 01:25:53",
        "product_id": "456",
        "product_name": "Beer",
        "product_desc": "Drink ice cold beer",
        "category": "Gifts",
        "product_price": "30",
        "product_points": "30",
        "path": "http://www.pythagorapps.com/heyou/gifts/456.png",
        "locale": null,
        "created": "2012-05-07 01:25:53"
    },
    "2": {
        "0": "789",
        "1": "Coctail",
        "2": "Drink a refreshing coctail",
        "3": "Gifts",
        "4": "50",
        "5": "50",
        "6": "http://www.pythagorapps.com/heyou/gifts/789.png",
        "7": null,
        "8": "2012-05-10 04:56:18",
        "product_id": "789",
        "product_name": "Coctail",
        "product_desc": "Drink a refreshing coctail",
        "category": "Gifts",
        "product_price": "50",
        "product_points": "50",
        "path": "http://www.pythagorapps.com/heyou/gifts/789.png",
        "locale": null,
        "created": "2012-05-10 04:56:18"
    },
    "tag": "getgoods",
    "success": 1,
    "error": 0,
    "numofgoods": 3
},
"useravatar": {
    "tag": "getlatest",
    "success": 0,
    "error": 10,
    "err_msg": "cannot connect to mySQL database"
},
"shopcategories": {
    "0": {
        "0": "1",
        "1": "Shirts",
        "2": "Buy some cool new shirts",
        "3": "null",
        "4": "2012-05-07 01:09:02",
        "index": "1",
        "name": "Shirts",
        "desc": "Buy some cool new shirts",
        "path": "null",
        "created": "2012-05-07 01:09:02"
    },
    "1": {
        "0": "2",
        "1": "Gifts",
        "2": "buy some cool gifts",
        "3": "null",
        "4": "2012-05-07 01:09:58",
        "index": "2",
        "name": "Gifts",
        "desc": "buy some cool gifts",
        "path": "null",
        "created": "2012-05-07 01:09:58"
    },
    "tag": "getcat",
    "success": 1,
    "error": 0,
    "numofcat": 2
},
"shopproducts": {
    "0": {
        "0": "123",
        "1": "Burger",
        "2": "Eat some burger",
        "3": "Gifts",
        "4": "25",
        "5": "25",
        "6": "http://www.pythagorapps.com/heyou/gifts/123.png",
        "7": null,
        "8": "2012-05-07 01:25:53",
        "product_id": "123",
        "product_name": "Burger",
        "product_desc": "Eat some burger",
        "category": "Gifts",
        "product_price": "25",
        "product_points": "25",
        "path": "http://www.pythagorapps.com/heyou/gifts/123.png",
        "locale": null,
        "created": "2012-05-07 01:25:53"
    },
    "1": {
        "0": "456",
        "1": "Beer",
        "2": "Drink ice cold beer",
        "3": "Gifts",
        "4": "30",
        "5": "30",
        "6": "http://www.pythagorapps.com/heyou/gifts/456.png",
        "7": null,
        "8": "2012-05-07 01:25:53",
        "product_id": "456",
        "product_name": "Beer",
        "product_desc": "Drink ice cold beer",
        "category": "Gifts",
        "product_price": "30",
        "product_points": "30",
        "path": "http://www.pythagorapps.com/heyou/gifts/456.png",
        "locale": null,
        "created": "2012-05-07 01:25:53"
    },
    "2": {
        "0": "789",
        "1": "Coctail",
        "2": "Drink a refreshing coctail",
        "3": "Gifts",
        "4": "50",
        "5": "50",
        "6": "http://www.pythagorapps.com/heyou/gifts/789.png",
        "7": null,
        "8": "2012-05-10 04:56:18",
        "product_id": "789",
        "product_name": "Coctail",
        "product_desc": "Drink a refreshing coctail",
        "category": "Gifts",
        "product_price": "50",
        "product_points": "50",
        "path": "http://www.pythagorapps.com/heyou/gifts/789.png",
        "locale": null,
        "created": "2012-05-10 04:56:18"
    },
    "tag": "getall",
    "success": 1,
    "error": 0,
    "numofproducts": 3,
    "user_id": "123"
}
} 
```

顺便说一句 2：

iOS 应用程序似乎可以正确解析它。

提前致谢。

编辑：

我得到响应的代码是：

```
 public JSONObject getJSONFromURL(String URL,List<NameValuePair> params){

    //try to make http request:

    try{
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(URL+listToString(params));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
    }
    catch(UnsupportedEncodingException e){
        e.printStackTrace();
    }
    catch(ClientProtocolException e){
        e.printStackTrace();
    }
    catch(IOException e){
        e.printStackTrace();
    }

    //try to read the respond:

    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while((line = reader.readLine())!=null){
            sb.append(line+"\n");
        }
        is.close();
        strJson = sb.toString();
        Log.e("JSON",strJson);
    }
    catch(Exception e){
        Log.e("Buffer Error","Error converting result " + e.toString());
    }

    //try to parse the string to JSON object:
    try{
        json = new JSONObject(strJson);
    }
    catch(JSONException e){
        Log.e("JSON Parser","Error parsing data " + e.toString());
    }

    return json;

} 
```

json 返回的 json 对象缺少一些对象，如用户配置文件、成功等...

但 strJson 是有效的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:21:52.380

> > 字符串值 = (String) jsonserch2.opt(key);

当对象具有空值时尝试此操作，它会自动拒绝它而不是**jsonserch2.getString(key)** ;

# javascript - 内部异常评估

> ID：10600049
> 
> 赞同：2
> 
> 时间：2012-05-15T11:47:40.317
> 
> 标签：javascript, phantomjs

我正在尝试与一个编码相当糟糕且速度非常慢的网站进行交互。我将举例说明我遇到的问题：

在这个网页上有 2 个选择框，第一个用于选择国家，onchange 向网络服务器发出 AJAX 请求，然后返回城市列表。此列表用于填充第二个选择框。现在的问题是我可以使用 phanomtjs 页面对象中的评估函数来遍历第一个选择框并选择正确的选项。但在那之后，我必须等待 n 秒才能填充第二个框。目前，我已经通过设置计时器等待 25 秒，然后从第二个框中选择城市来“解决”这个问题。然而，这是一个非常糟糕的解决方案。首先，25 秒在所有情况下都不够长，所以有时它会超时而失败。第二个问题是，在大多数情况下，25 秒太长了。

所以我必须找到一种方法来等待第二个盒子被填充。起初我虽然可以在评估函数中使用 setInterval 来测试是否填充了选择框。这行得通，但有一个问题，因为 setInterval 是异步的，使用这种方法我失去了找出是否可以做出正确选择的能力。为了说明我的意思，下面的代码是当我不必等待时它是如何工作的：

```
var retval = page.evaluate(function () {
    return selectOption('select_id',
                        info['country']);
}); 
```

该 selectOption 是一个迭代 select 元素直到找到正确的选项元素的函数，如果失败则返回 false，然后由评估函数返回此返回值，以便我可以检查它是否有效。

另一种选择是在网页上下文中使用 setInterval 进行等待，如果失败则引发异常。我试过这样做，但我似乎无法捕捉到网站范围之外的异常。PhantomJS 在终端中转储异常，但我无法拦截。

有没有办法解决？还是我应该只使用固定等待时间选项？

编辑：我尝试使用 page.onError，但它似乎没有被使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T08:25:09.910

我还需要找出在评估函数中是否引发了异常。我设法通过添加另一个层来做到这一点，该层只是用 try-catch 包装了函数：

```
// Wrap a function (func) inside a try-catch block and return
// the exception if any. Otherwise return null. The ctx is a
// a bucket for all the variables to be passed to func.
var tryCatchWrapper = function(func, ctx) {        
    try {
        funct(ctx);
    }
    catch(e) {
        return e;
    }

    return null;
} 
```

然后评估`somefunction`我这样使用它：

```
var error = page.evaluate(tryCatchWrapper, somefunction);
if (error) {
    handle error...
} 
```

如果我想将参数传递给 func ，那么我使用上下文对象。有关如何将变量参数传递给函数的不同方法，请查看问题：[“JavaScript variable number of arguments to function”](https://stackoverflow.com/questions/2141520/javascript-variable-number-of-arguments-to-function)。

# javascript - 在输入文本元素中按下“输入”时停止页面刷新

> ID：10600050
> 
> 赞同：5
> 
> 时间：2012-05-15T11:47:45.180
> 
> 标签：javascript

当在输入文本元素中按下回车按钮时，有没有办法阻止网页完全刷新？

我正在寻找创建一个搜索字段，我可以在按下输入时获取文本以过滤对象并仅显示包含来自搜索字段的文本的对象。

我尝试了以下方法来尝试捕捉回车按钮，但它不起作用。

```
function setupSearchField() {
    document.getElementById("searchField").onKeyDown = function(event) {
        var holder;
        if (window.event) {
            holder = window.event.keyCode;
        } else {
            holder = event.which;
        }
        keyPressed(holder);
    }
}

function keyPressed(key) {
    if (key == 13) {
        event.cancelBubble = true;
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:51:09.783

如果输入元素在表单中，并且该表单实际上并未提交到服务器，则删除该表单。

您的代码不起作用的原因是因为`onkeydown`事件应该是小写的，并且您实际上并没有在其中返回某些内容（尝试`return keyPressed(holder);`- 或者只是将`keyPressed`函数的代码移动到`setupSearchField`，因为将它作为一个单独的函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:15:35.357

当只有一个文本输入时会发生这种情况，无论您的按钮（如果有）是否有 type="submit" 。它记录在这里。 [http://www.w3.org/MarkUp/html-spec/html-spec_8.html#SEC8.2](http://www.w3.org/MarkUp/html-spec/html-spec_8.html#SEC8.2) 因此，正如其他人之前建议的那样，您必须简单地停止这种默认行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:59:14.257

您的搜索字段是否在元素内？然后点击“输入”会触发表单元素的提交事件。

在这种情况下，您可以通过在表单元素上定义 onsubmit 来处理您的过滤。

```
<form id="searchForm">
    <input type="text" name="search" />
</form>
<script>
    document.getElementById('searchForm').onsubmit = function() {
        var searchValue = this.search.value;
        // process
        return false;
    }
</script> 
```

可能是这样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T15:18:30.330

只需将以下 javascript 代码添加到您的 Visualforce 页面：

```
<script type='text/javascript'>
function stopRKey(evt) 
{
   var evt=(evt) ? evt : ((event) ? event : null);
   var node=(evt.target)?evt.target:((evt.srcElement)?evt.srcElement:null);
   if ((evt.keyCode == 13) && (node.type=="text")) {return false;}
}

document.onkeypress = stopRKey;
</script> 
```

# .net - 具有数据库中的引用和设置的 MEF 插件管理器

> ID：10600052
> 
> 赞同：1
> 
> 时间：2012-05-15T11:47:50.520
> 
> 标签：.net, plugins, interface, mef

您好我有一个使用注册模块的数据库应用程序。

模块是通过 MEF 注册的，我需要为这些模块提供设置（它们的设置也存储在数据库中）。

每个插件将实现不同的接口（通过不同的接口做不同的事情）。

截至目前，我目前为每种接口类型都有一个单独的插件容器 - 虽然下面的工作正常，但每种插件类型都有很多复制。

**模块和模块设置表位于具有以下字段类型的 sql 数据库中**

```
[Table_PluginModules]
PluginId => Guid, PK
Enabled => boolean

[Table_PluginModule_settings]
PluginId => Guid, PK(col1), FK(Table_PluginModules.PluginID)
SettingName => varchar, PK(col2)
SettingValue => varchar 
```

**模块接口如下**

```
interface ICar
{
    string Name;
    Guid PluginID;
    void Handbrake();
}

interface IBike
{
    string Name;
    Guid PluginID;
    void Peddle();
} 
```

**然后我有 ICar 和 IBike 接口的插件管理器**

```
class CarPluginsManager()
{
  [ImportMany] 
  public ICar[] Plugins 

  void LoadPluginsCar()
  {
    var cat = new DirectoryCatalog(path, "*.dll"); 
    var container = new CompositionContainer(cat); 
    container.ComposeParts(this); 
    foreach (ICar plugin in Plugins) 
    { 
        // load settings from database for this plugin
        List<ModuleSetting> settings = ModelContext.PluginSettings( x => x.PluginId == plugin.Plugin).ToList(); 
        foreach(ModuleSetting setting in settings)
        {
            // do something with the setting value that was retreived for this plugin
            string settingName = setting.SettingName;
            string settingValue = setting.SettingValue;
        }
                // check if previously registered modules are not in the above list and disable if necesasry in the database
    } 
  }

  ICar GetCarPlugin(Guid id)
  {
    foreach (var plugin in Plugins) 
    { 
        if(plugin.PluginID == id)
                {
                          // check module is enabled in the modules database table, if so
            return plugin;
                          // if module is disabled, return null...
                }
    } 
    return null;
  }

}

class BikePluginsManager()
{
  [ImportMany] 
  public IBike[] Plugins 

  void LoadPluginsCar()
  {
    var cat = new DirectoryCatalog(path, "*.dll"); 
    var container = new CompositionContainer(cat); 
    container.ComposeParts(this); 
    foreach (ICar plugin in Plugins) 
    { 
        // load settings from database for this plugin
        List<ModuleSetting> settings = ModelContext.PluginSettings( x => x.PluginId == plugin.Plugin).ToList(); 
        foreach(ModuleSetting setting in settings)
        {
            // do something with the setting value that was retreived for this plugin
            string settingName = setting.SettingName;
            string settingValue = setting.SettingValue;
        }
                // check if previously registered modules are not in the above list and disable if necesasry in the database
    }  
  }

  IBike GetBikePlugin(Guid id)
  {
    foreach (var plugin in Plugins) 
    { 
        if(plugin.PluginID == id)

                          // check module is enabled in the modules database table, if so
            return plugin;
                          // if module is disabled, return null...
    } 
    return null;
  }
} 
```

业务逻辑代码的其他方面将引用不同的模块来做不同的事情。

加载模块时，我检查是否缺少任何以前注册的模块（以防 DLL 从插件目录中删除）并禁用插件表中的插件。

这些模块需要在数据库中“注册”，因此我们可以将这些模块作为外键引用（用户可以选择不同的输出模块），我目前正在通过一个名为 plugins 的表（在本文顶部定义）和一个下面的示例操作表：

```
[Table_Some_Action]
ActionID => int, PK
ModuleID => Guid, FK(Table_Modules) 
```

所以，我想让这个通用/通用，但是我仍然需要能够按接口类型引用接口。我正在考虑的是按照以下方式做一些事情：

```
interface IPlugin
{
    string Name;
    Guid PluginID;
}

IPlugInterfaceCar : IPlugin
{
void ApplyHandbrake();
}

IPlugInterfaceBike : IPlugin
{
void Peddle();
}

class CarPluginBinary : IPlugInterfaceCar
{
    void ApplyHandbrake() {}
}

class BikePluginBinary : IPlugInterfaceBike
{
    void ApplyHandbrake() {}
} 
```

问题是当组成部件的插件管理器类需要一个接口时，我如何处理不同的类型（或者事实上，我们不会提前知道这些接口，因为它们是在运行时加载的）。

非常感谢有关此设计策略的任何方向，包括对数据库模块的引用。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:22:05.860

我编写了以下模块并将插件模块链接为属性。不幸的是，它是一个字符串，因为我认为它不可能有 GUID 文字，但是它可以完成工作。

我认为它比以前的代码更灵活，无需求助于单一的基本接口类型，我现在可以通过 FK 链接到数据库中的模块，每当代码将实例化模块时，都会检查 ID 和接口以确保它们都是有效的。

如果您发现任何其他问题或改进，请发表评论。

**插件管理器**

```
public interface IPluginManagerService
{
    void RegisterModules();
    IExternalAccountsPlugin GetExternalAccountsPlugin(Guid id);
    IRecoveryActionPlugin GetExternalRecoveryActionsPlugin(Guid id);
}

namespace MyNamespace.Services
{
    public class PluginManagerService : ServiceBase, IPluginManagerService
    {
        public PluginManagerService(ILogger logger, IUnitOfWork unitOfWork)
            : base(logger)
        {
            m_UnitOfWork = unitOfWork;
            RegisterModules();
        }

        protected IUnitOfWork m_UnitOfWork;
        object Lock = new object();

        // do not make public so we can perform further checks via strongly typed accessor functions
        // get a list of modules that implement contracts of type T
        protected IEnumerable< Lazy<T, IPluginMetadata> > GetInterfaces<T>()
        {
           return m_Container.GetExports<T, IPluginMetadata>();
        }

        // do not make public so we can perform further checks via strongly typed accessor functions
        // returns the plugin with the provided ID
        protected T GetPlugin<T>(Guid id)
        {
            return m_Container.GetExports<T, IPluginMetadata>().Where(x => x.Metadata.PluginID == id.ToString().ToUpper()).Select(x => x.Value).FirstOrDefault();
        }

        public IExternalAccountsPlugin GetExternalAccountsPlugin(Guid id)
        {
            return GetPluginModule<IExternalAccountsPlugin>(id);
        }

        public IRecoveryActionPlugin GetExternalRecoveryActionsPlugin(Guid id)
        {
            return GetPluginModule<IRecoveryActionPlugin>(id);
        }

        /* return a list of all available externalAccounts plugins */
        public IEnumerable<Guid> ListExternalAccountsPluginIDs()
        {
            List<Guid> guids = new List<Guid>();

            foreach (string id in GetInterfaces<IExternalAccountsPlugin>().Select(x => x.Metadata.PluginID).ToList())
            {
               guids.Add(Guid.Parse(id));
            }
            return guids;
        }

        protected T GetPluginModule<T>(Guid id)
        {
            ExternalPlugin pluginInDb = m_UnitOfWork.ExternalPlugins.GetByID(id);
            if (pluginInDb != null)
            {
                if (pluginInDb.Enabled == true)
                {
                    T binaryPlugin = GetPlugin<T>(id);
                    if (binaryPlugin == null)
                        throw new KeyNotFoundException();
                    else
                        return binaryPlugin;
                }
            }
            return default(T);
        }

        CompositionContainer m_Container;

        public void RegisterModules()
        {
            lock (Lock)
            {
                var pluginContainer = new AggregateCatalog();
                var directoryPath = Path.GetDirectoryName(Assembly.GetCallingAssembly().Location) + "\\Plugins\\";
                var directoryCatalog = new DirectoryCatalog(directoryPath, "*.dll");
                //pluginContainer.Dispose();
                // directoryCatalog.Refresh();

                LogMessage("Searching for modules in " + directoryCatalog + "...");

                pluginContainer.Catalogs.Add(directoryCatalog);
                m_Container = new CompositionContainer(pluginContainer);

               // m_Container.ComposeParts(this); // not required, this will load dependencies dynamically onto our object
                LinkModulesWithDatabase();
            }
        }

        string FormatModuleMessage(string name, Guid id, Version version )
        {
            return name + ". ID: " + id + ". Version: " + version.ToString();
        }

        protected delegate string ModuleNameHelper<T>(T t);
        protected delegate Version ModuleVersionHelper<T>(T t);

        protected void SetVersionOfExternalPlugin(ref ExternalPlugin plugin, int major, int minor, int build, int revision)
        {
            plugin.MajorVersion = major;
            plugin.MinorVersion = minor;
            plugin.Build = build;
            plugin.RevsionVersion = revision;
        }

        protected void LoadNewAndExisting<T>(IEnumerable<Lazy<T,IPluginMetadata>> foundModules, ref int added, ref int disabled, ref int upgraded, ref int existing, ModuleNameHelper<T> moduleNameHelper, ModuleVersionHelper<T> moduleVersionHelper)
        {
            List<Guid> foundModuleIDs = new List<Guid>();

            foreach (Lazy<T,IPluginMetadata> moduleInAssembly in foundModules)
            {
                Guid moduleInAssemblyId = Guid.Parse(moduleInAssembly.Metadata.PluginID);
                Version moduleInAssemblyVersion = moduleVersionHelper(moduleInAssembly.Value);
                string moduleInAssemblyName = moduleNameHelper(moduleInAssembly.Value);

                ExternalPlugin moduleInDb = m_UnitOfWork.ExternalPlugins.GetByID(moduleInAssemblyId); // see if we can find the registered module in the database

                if (moduleInDb != null)
                {
                    Version moduleInDbVersion = new Version(moduleInDb.MajorVersion, moduleInDb.MinorVersion,  moduleInDb.Build, moduleInDb.RevsionVersion);

                    if (moduleInAssemblyVersion > moduleInDbVersion)
                    {
                        LogMessage("Found updated module (previous version " + moduleInDbVersion + "). Upgrading " + FormatModuleMessage(moduleInAssemblyName, moduleInAssemblyId, moduleInAssemblyVersion));
                        moduleInDb.Enabled = true;
                        SetVersionOfExternalPlugin(ref moduleInDb, moduleInAssemblyVersion.Major, moduleInAssemblyVersion.Minor, moduleInAssemblyVersion.Build, moduleInAssemblyVersion.Revision);
                        upgraded++;
                    }
                    else if (moduleInAssemblyVersion < moduleInDbVersion)
                    {
                        LogMessage("Found old module (expected version " + moduleInDbVersion +"). Disabling " + FormatModuleMessage(moduleInAssemblyName, moduleInAssemblyId, moduleInAssemblyVersion));
                        moduleInDb.Enabled = false;
                        disabled++;
                    }
                    else
                    {
                        LogMessage("Loaded existing module " + FormatModuleMessage(moduleInAssemblyName, moduleInAssemblyId, moduleInAssemblyVersion));
                        moduleInDb.Enabled = true;
                        existing++;
                    }
                    moduleInDb.UpdatedDateUTC = DateTime.Now;
                    m_UnitOfWork.ExternalPlugins.Update(moduleInDb);
                }
                else  // could not find any module with the provided ID
                {
                    ExternalPlugin newModule = new ExternalPlugin();
                    SetVersionOfExternalPlugin(ref newModule, moduleInAssemblyVersion.Major, moduleInAssemblyVersion.Minor, moduleInAssemblyVersion.Build, moduleInAssemblyVersion.Revision);
                    newModule.Enabled = true;
                    newModule.ExternalPluginID = moduleInAssemblyId;
                    newModule.UpdatedDateUTC = DateTime.UtcNow;
                    m_UnitOfWork.ExternalPlugins.Insert(newModule);
                    LogMessage("Loaded new module " + FormatModuleMessage(moduleInAssemblyName, moduleInAssemblyId, moduleInAssemblyVersion));
                    added++;
                }
                foundModuleIDs.Add(moduleInAssemblyId);
            }

            IEnumerable<Guid> missingModules = m_UnitOfWork.ExternalPlugins.Context.Select(x => x.ExternalPluginID).Except(foundModuleIDs).ToList();
            foreach(Guid missingID in missingModules)
            {
                ExternalPlugin pluginToDisable = m_UnitOfWork.ExternalPlugins.GetByID(missingID);
                LogMessage("Cannot find previously registered module in plugin directory. Disabling: " + FormatModuleMessage("Unknown", pluginToDisable.ExternalPluginID, new Version(pluginToDisable.MajorVersion, pluginToDisable.MinorVersion, pluginToDisable.RevsionVersion, pluginToDisable.Build)));
                pluginToDisable.Enabled = false;
                pluginToDisable.UpdatedDateUTC = DateTime.UtcNow;
                m_UnitOfWork.ExternalPlugins.Update(pluginToDisable);
                disabled++;
            }

            m_UnitOfWork.Save();
        }

        protected void LinkModulesWithDatabase()
        {
            int added = 0;
            int existing = 0;
            int upgraded = 0;
            int disabled = 0;

            LogMessage("Loading ExternalAccountsModule plugins (IExternalAccountsModule).");
            ModuleNameHelper<IExternalAccountsPlugin> accountsModuleNameHelper = delegate (IExternalAccountsPlugin t) { return t.Name; }; 
            ModuleVersionHelper<IExternalAccountsPlugin> accountsModuleVersionHelper = delegate (IExternalAccountsPlugin t) { return t.ModuleVersion; };
            IEnumerable<Lazy<IExternalAccountsPlugin, IPluginMetadata>> accountsPlugins = GetInterfaces<IExternalAccountsPlugin>();
            LoadNewAndExisting<IExternalAccountsPlugin>(accountsPlugins, ref added, ref disabled, ref upgraded, ref existing, accountsModuleNameHelper, accountsModuleVersionHelper);

            LogMessage("Finished loading modules, total " + (added + existing + upgraded) + " modules enabled. New: " + added + " . Existing: " + existing + ". Upgraded: " + upgraded + ". Disabled: " + disabled + ".");
        }
    }
} 
```

**导出属性**

```
public interface IPluginMetadata
{
    string PluginID { get; }
}

[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class PluginExportAttribute : ExportAttribute, IPluginMetadata
{
    public PluginExportAttribute(Type t, string guid)
        : base(t)
    {
        PluginID = guid.ToUpper();
    }

    public string PluginID { get; set; }
} 
```

**将模块标记为插件，将此编译好的DLL放在插件目录中**

```
[PluginExport(typeof(IExternalAccountsPlugin),"BE112EA1-1AA1-4B92-934A-9EA8B90D622C")]
public class MyModule: IExternalAccountsPlugin
{
}

IPluginManagerService externalAccountsModuleService = instance.Resolve<IPluginManagerService>();
IExternalAccountsPlugin accountsPlugin = externalAccountsModuleService.GetExternalAccountsPlugin(Guid.Parse("BE112EA1-1AA1-4B92-934A-9EA8B90D622C"));
IEnumerable<Guid> pluginIDs = externalAccountsModuleService.ListExternalAccountsPluginIDs(); 
```

# java - java中的旋转齿轮

> ID：10600053
> 
> 赞同：1
> 
> 时间：2012-05-15T11:47:50.610
> 
> 标签：java, animation

首先我的英语很垃圾，所以请理解。

我被要求在 java 中做一些模拟/动画。我在船上有几个齿轮，其中一个齿轮一直在其轴上旋转。当我将任何其他齿轮靠近旋转的齿轮时，它必须开始旋转，并且牙齿不能相互重叠。

我认为这个链接描述得很好 [http://www.csharphelper.com/howto_animate_gear.gif](http://www.csharphelper.com/howto_animate_gear.gif)

我不知道如何使这些齿轮相互作用，如果有人可以显示一些代码示例，我会非常高兴

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:52:30.330

如果您知道如何旋转 kog，则可以作弊，然后硬编码时间，以便它们在正确的时间旋转：P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T11:56:12.553

这是一个经典的 LCM（[最小公倍数](http://en.wikipedia.org/wiki/Least_common_multiple)）问题：尝试根据齿轮的尺寸（半径或直径或周长）制定解决方案。

# sed - 使用 sed 删除一行中的重复单词

> ID：10600056
> 
> 赞同：7
> 
> 时间：2012-05-15T11:48:00.670
> 
> 标签：sed

纯学术，但让我很沮丧。

我想更正这段文字：

```
there there are are multiple lexical errors in this line line 
```

使用 sed。我已经做到了这一点：

```
sed 's/\([a-z][a-z]*[ ,\n][ ,\n]*\)\1/\1/g' < file.text 
```

它纠正了除了最后加倍的单词之外的所有内容！

```
there are multiple lexical errors in this line line 
```

sed 大师能否解释一下为什么上面没有处理最后的单词？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T11:58:12.773

这是因为在最后一种情况下 ( `line`)，您的正则表达式内存 1 将包含`line`（行后跟一个空格），并且您正在搜索它的重复。`line`由于最后一个匹配失败后没有空间。

要解决此问题，请在结束词后添加一个空格`line`。

或者，您可以将正则表达式更改为：

```
sed -e 's/\b\([a-z]\+\)[ ,\n]\1/\1/g' 
```

[**看见**](http://ideone.com/vOYdc)

# hibernate - 如何使用 YML 加载多对一实体

> ID：10600058
> 
> 赞同：1
> 
> 时间：2012-05-15T11:48:03.687
> 
> 标签：hibernate, playframework, yaml

我有以下 yml 和实体。
每次我通过 Fixtures.loadModels() 加载 yml 时，每个实体都会被持久化，但 VSCode 上的 vsCat_id 外键始终为空，并且关系不会持久化。

我在这里想念什么？

```
yml: 

VSCode(VS960):
   vsCode: VS960
   description: blabla

VSCategory(dvs1):
   name: Category 1
   vsCodes:
      - VSA960
      - VSA961

public class VSCode extends GenericModel {
    @Id
    public String            vsCode;
    public String            description;

    @ManyToOne
    public VSCategory vsCat;

    public VSCode(String code, String description) {
        this.vsCode = code;
        this.description = description;
    }
}

@Entity
public class VSCategory extends Model {

    public String name;

    @OneToMany(mappedBy="vsCat")
    public Set<VSCode> vsCodes;

    public VSCategory(String name){
        this.name = name;
        this.vsCodes = new HashSet();
    }
} 
```

# r - 如何在R中进行交叉连接？

> ID：10600060
> 
> 赞同：37
> 
> 时间：2012-05-15T01:32:10.153
> 
> 标签：r, cross-join

如何在 R 中实现交叉连接？我知道“合并”可以做内连接，外连接。但我不知道如何在 R 中实现交叉连接。

谢谢

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-04T21:44:09.247

如果速度是一个问题，我建议查看优秀的`data.table`包。在最后的示例中，它比`merge`.

您没有提供示例数据。如果您只想获取两个（或多个单独）列的所有组合，您可以使用`CJ`（交叉连接）：

```
library(data.table)
CJ(x=1:2,y=letters[1:3])
#   x y
#1: 1 a
#2: 1 b
#3: 1 c
#4: 2 a
#5: 2 b
#6: 2 c 
```

如果您想在两个表上进行交叉连接，我还没有找到使用 CJ() 的方法。但你仍然可以使用`data.table`：

```
x2<-data.table(id1=letters[1:3],vals1=1:3)
y2<-data.table(id2=letters[4:7],vals2=4:7)

res<-setkey(x2[,c(k=1,.SD)],k)[y2[,c(k=1,.SD)],allow.cartesian=TRUE][,k:=NULL]
res
#    id1 vals1 id2 vals2
# 1:   a     1   d     4
# 2:   b     2   d     4
# 3:   c     3   d     4
# 4:   a     1   e     5
# 5:   b     2   e     5
# 6:   c     3   e     5
# 7:   a     1   f     6
# 8:   b     2   f     6
# 9:   c     3   f     6
#10:   a     1   g     7
#11:   b     2   g     7
#12:   c     3   g     7 
```

线路说明`res`：

*   基本上，您将一个虚拟列（在本例中为 k）添加到一个表并将其设置为键 ( `setkey(tablename,keycolumns)`)，将虚拟列添加到另一个表，然后将它们连接起来。
*   data.table 结构在连接中使用列位置而不是名称，因此您必须将虚拟列放在开头。该`c(k=1,.SD)`部分是我发现在开头添加列的一种方式（默认是将它们添加到末尾）。
*   标准 data.table 连接的格式为`X[Y]`. 在这种情况下，X 是`setkey(x2[,c(k=1,.SD)],k)`，而 Y 是`y2[,c(k=1,.SD)]`。
*   `allow.cartesian=TRUE`告诉`data.table`忽略重复的键值，并执行笛卡尔连接（以前的版本不需要这个）
*   最后`[,k:=NULL]`的只是从结果中删除虚拟键。

你也可以把它变成一个函数，这样使用起来更干净：

```
# Version 1; easier to write:
CJ.table.1 <- function(X,Y)
  setkey(X[,c(k=1,.SD)],k)[Y[,c(k=1,.SD)],allow.cartesian=TRUE][,k:=NULL]

CJ.table.1(x2,y2)
#    id1 vals1 id2 vals2
# 1:   a     1   d     4
# 2:   b     2   d     4
# 3:   c     3   d     4
# 4:   a     1   e     5
# 5:   b     2   e     5
# 6:   c     3   e     5
# 7:   a     1   f     6
# 8:   b     2   f     6
# 9:   c     3   f     6
#10:   a     1   g     7
#11:   b     2   g     7
#12:   c     3   g     7

# Version 2; faster but messier:
CJ.table.2 <- function(X,Y) {
  eval(parse(text=paste0("setkey(X[,c(k=1,.SD)],k)[Y[,c(k=1,.SD)],list(",paste0(unique(c(names(X),names(Y))),collapse=","),")][,k:=NULL]")))
} 
```

以下是一些速度基准：

```
# Create a bigger (but still very small) example:
n<-1e3
x3<-data.table(id1=1L:n,vals1=sample(letters,n,replace=T))
y3<-data.table(id2=1L:n,vals2=sample(LETTERS,n,replace=T))

library(microbenchmark)
microbenchmark(merge=merge.data.frame(x3,y3,all=TRUE),
               CJ.table.1=CJ.table.1(x3,y3),
               CJ.table.2=CJ.table.2(x3,y3),
               times=3, unit="s")
#Unit: seconds
#       expr        min         lq     median         uq        max neval
#      merge 4.03710225 4.23233688 4.42757152 5.57854711 6.72952271     3
# CJ.table.1 0.06227603 0.06264222 0.06300842 0.06701880 0.07102917     3
# CJ.table.2 0.04740142 0.04812997 0.04885853 0.05433146 0.05980440     3 
```

请注意，这些`data.table`方法比`merge`@danas.zuokas 建议的方法快得多。此示例中的两个具有 1,000 行的表会生成一个具有 100 万行的交叉连接表。因此，即使您的原始表格很小，结果也会很快变大，速度变得很重要。

最后，最新版本`data.table`要求您添加`allow.cartesian=TRUE`（如在 CJ.table.1 中）或指定应返回的列的名称（CJ.table.2）。第二种方法（CJ.table.2）似乎更快，但如果要自动指定所有列名，则需要一些更复杂的代码。它可能不适用于重复的列名。（请随意推荐一个更简单的 CJ.table.2 版本）

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-15T07:30:54.717

只是`all=TRUE`吗？

```
x<-data.frame(id1=c("a","b","c"),vals1=1:3)
y<-data.frame(id2=c("d","e","f"),vals2=4:6)
merge(x,y,all=TRUE) 
```

从文档`merge`：

> 如果 by 或两者 by.x 和 by.y 的长度为 0（长度为零的向量或 NULL），则结果 r 是 x 和 y 的笛卡尔积，即 dim(r) = c(nrow(x )*nrow(y), ncol(x) + ncol(y))。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-12-07T14:48:28.367

几年前就有人问过这个问题，但您可以使用它`tidyr::crossing()`来进行交叉连接。绝对是最简单的解决方案。

```
library(tidyr)

league <- c("MLB", "NHL", "NFL", "NBA")
season <- c("2018", "2017")

tidyr::crossing(league, season)
#> # A tibble: 8 x 2
#>   league season
#>   <chr>  <chr> 
#> 1 MLB    2017  
#> 2 MLB    2018  
#> 3 NBA    2017  
#> 4 NBA    2018  
#> 5 NFL    2017  
#> 6 NFL    2018  
#> 7 NHL    2017  
#> 8 NHL    2018 
```

由[reprex 包](http://reprex.tidyverse.org)（v0.2.0）于 2018 年 12 月 8 日创建。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-08-08T12:23:40.710

如果你想通过 data.table 来做，这是一种方法：

```
cjdt <- function(a,b){
  cj = CJ(1:nrow(a),1:nrow(b))
  cbind(a[cj[[1]],],b[cj[[2]],])
}

A = data.table(ida = 1:10)
B = data.table(idb = 1:10)
cjdt(A,B) 
```

如上所述，如果您正在执行许多小连接，并且您不需要`data.table`对象和生成它的开销，则可以通过编写`c++`代码块来显着提高速度：使用`Rcpp`等：

```
// [[Rcpp::export]]
NumericMatrix crossJoin(NumericVector a, NumericVector b){
  int szA = a.size(), 
      szB = b.size();
  int i,j,r;
  NumericMatrix ret(szA*szB,2);
  for(i = 0, r = 0; i < szA; i++){
    for(j = 0; j < szB; j++, r++){
      ret(r,0) = a(i);
      ret(r,1) = b(j);
    }
  }
  return ret;
} 
```

* * *

## 为了比较，首先对于一个大连接：

C++

```
n = 1
a = runif(10000)
b = runif(10000)
system.time({for(i in 1:n){
  crossJoin(a,b)
}}) 
```

用户系统已用 1.033 0.424 **1.462**

* * *

数据表

```
system.time({for(i in 1:n){
  CJ(a,b)
}}) 
```

用户系统经过 0.602 0.569 **2.452**

* * *

## 现在有很多小连接：

C++

```
n = 1e5
a = runif(10)
b = runif(10)
system.time({for(i in 1:n){
  crossJoin(a,b)
}}) 
```

用户系统经过 0.660 0.077 **0.739**

* * *

数据表

```
system.time({for(i in 1:n){
  CJ(a,b)
}}) 
```

用户系统已用 26.164 0.056 **26.271**

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-08-10T08:16:06.800

使用`sqldf`：

```
x <- data.frame(id1 = c("a", "b", "c"), vals1 = 1:3)
y <- data.frame(id2 = c("d", "e", "f"), vals2 = 4:6) 

library(sqldf)
sqldf("SELECT * FROM x
      CROSS JOIN y") 
```

输出：

```
 id1 vals1 id2 vals2
1   a     1   d     4
2   a     1   e     5
3   a     1   f     6
4   b     2   d     4
5   b     2   e     5
6   b     2   f     6
7   c     3   d     4
8   c     3   e     5
9   c     3   f     6 
```

仅作记录，对于基本包，我们可以使用以下 `by=NULL`代替`all=TRUE`：

```
merge(x, y, by= NULL) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-10-23T12:23:44.740

通过使用合并函数及其可选参数：

内连接：merge(df1, df2) 将适用于这些示例，因为 R 会通过常用变量名称自动连接帧，但您很可能希望指定 merge(df1, df2, by = "CustomerId") 以确保您只匹配您想要的字段。如果匹配的变量在不同的数据框中具有不同的名称，您也可以使用 by.x 和 by.y 参数。

```
Outer join: merge(x = df1, y = df2, by = "CustomerId", all = TRUE)

Left outer: merge(x = df1, y = df2, by = "CustomerId", all.x = TRUE)

Right outer: merge(x = df1, y = df2, by = "CustomerId", all.y = TRUE)

Cross join: merge(x = df1, y = df2, by = NULL) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-15T03:42:30.367

~~我不知道使用`data.frame`'s 的内置方法，但它并不难制作。~~

*@danas 展示了一种简单的内置方法，但我会在此处留下我的答案，以防它对其他目的有用。*

```
cross.join <- function(a, b) {
    idx <- expand.grid(seq(length=nrow(a)), seq(length=nrow(b)))
    cbind(a[idx[,1],], b[idx[,2],])
} 
```

并表明它适用于一些内置数据集：

```
> tmp <- cross.join(mtcars, iris)
> dim(mtcars)
[1] 32 11
> dim(iris)
[1] 150   5
> dim(tmp)
[1] 4800   16
> str(tmp)
'data.frame':   4800 obs. of  16 variables:
 $ mpg         : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl         : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp        : num  160 160 108 258 360 ...
 $ hp          : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat        : num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt          : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec        : num  16.5 17 18.6 19.4 17 ...
 $ vs          : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am          : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear        : num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb        : num  4 4 1 1 2 1 4 2 2 4 ...
 $ Sepal.Length: num  5.1 5.1 5.1 5.1 5.1 5.1 5.1 5.1 5.1 5.1 ...
 $ Sepal.Width : num  3.5 3.5 3.5 3.5 3.5 3.5 3.5 3.5 3.5 3.5 ...
 $ Petal.Length: num  1.4 1.4 1.4 1.4 1.4 1.4 1.4 1.4 1.4 1.4 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ... 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-10-06T15:27:00.997

我很想知道是否存在交叉连接两个 data.table的*便捷方法。*我经常这样做，最终滚动了自己的功能，其他人可能会觉得有帮助

```
library(data.table)

cartesian_join <- function(i, j){
  # Cartesian join of two data.tables
  # If i has M rows and j has N rows, the result will have M*N rows
  # Example: cartesian_join(as.data.table(iris), as.data.table(mtcars))

  # Check inputs
  if(!is.data.table(i)) stop("'i' must be a data.table")
  if(!is.data.table(j)) stop("'j' must be a data.table")
  if(nrow(i) == 0) stop("'i' has 0 rows. Not sure how to handle cartesian join")
  if(nrow(j) == 0) stop("'j' has 0 rows. Not sure how to handle cartesian join")

  # Do the join (use a join column name that's unlikely to clash with a pre-existing column name)
  i[, MrJoinyJoin := 1L]
  j[, MrJoinyJoin := 1L]
  result <- j[i, on = "MrJoinyJoin", allow.cartesian = TRUE]
  result[, MrJoinyJoin := NULL]
  i[, MrJoinyJoin := NULL]
  j[, MrJoinyJoin := NULL]

  return(result[])
}

foo <- data.frame(Foo = c(1,2,3))
foo
  Foo
1   1
2   2
3   3

bar <- data.frame(Bar = c("a", "b", "c"))
bar
  Bar
1   a
2   b
3   c

cartesian_join(as.data.table(foo), as.data.table(bar))
   Bar Foo
1:   a   1
2:   b   1
3:   c   1
4:   a   2
5:   b   2
6:   c   2
7:   a   3
8:   b   3
9:   c   3 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-11-18T13:14:44.787

对于*data.table*使用

```
dt1[, as.list(dt2), by = names(dt1)] 
```

请注意，这只适用于没有重复行的情况。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-23T17:03:01.233

dplyr 解决方案：

`left_join`您可以在 dplyr 连接（即,`inner_join`等）中执行交叉连接。

例如，根据`left_join`帮助：“要执行交叉连接，生成 x 和 y 的所有组合，请使用`by = character()`”

所以你可以使用类似的东西：

```
df3 <- left_join(df1, df2, by = character()) 
```

# html - 如何打开一个弹出窗口并锁定 HTML 中的剩余屏幕？

> ID：10600069
> 
> 赞同：0
> 
> 时间：2012-05-15T11:48:36.193
> 
> 标签：html

我正在尝试在我的屏幕中打开一个弹出窗口，我可以在其中锁定剩余屏幕，以便用户只能从我的弹出窗口中选择某些内容或可以取消弹出窗口。基本上我需要将一些值从 jsp 表单传递到我的弹出窗口，我已经完成了，但我还需要锁定我目前无法做到的剩余屏幕。谢谢。

这就是我调用 jQuery 的方式

```
 <a href="#" class="modalInput"  rel="#prompt">Download</a> 
```

这是我的脚本

```
<script> 
$(document).ready(function() {
var triggers = $(".modalInput").overlay({
    mask: {
        color: '#555555',
        loadSpeed: 200,
        opacity: 0.9
},
closeOnClick: false
});

var buttons = $("#yesno button").click(function(e) {
    var yes = buttons.index(this) === 0;
    triggers.eq(0).html("You clicked " + (yes ? "yes" : "no"));
});

$("#prompt form").submit(function(e) {
        triggers.eq(1).overlay().close();
        var input = $("input", this).val();
        triggers.eq(1).html(input);
        return e.preventDefault();
    });
});
</script> 
```

这是我的表格

```
<font  face=arial  bgcolor=""><b><center>
<form id="myForm" name="myForm" method="post" action="SentMail" onsubmit="return validateForm(this)">   
<div class="modal" id="prompt" > 
<div id="">
                    <table width="100%" border="0" cellspacing="0" cellpadding="5" align="center">
                      <tr>
                        <td align="right" valign="middle">&nbsp;</td>
                        <td align="right" valign="middle"><span style="color:#F00">*</span> Mandotary Field</td>
                      </tr>
                      <tr>
                        <td width="28%" align="right" valign="middle"><strong>Name:</strong><span style="color:#F00">*</span></td>
                        <td width="72%" align="left" valign="middle"><label for="textfield"></label>
                          <div class="out-border">
                          <input name="name" type="text" class="comm-text" id="name" style="width:250px" placeholder="Name"/></div></td>
                      </tr>
                      <tr>
                        <td align="right" valign="middle"><strong>Email:</strong><span style="color:#F00">*</span></td>
                        <td align="left" valign="middle"><label for="textfield2"></label>
                          <div class="out-border">
                          <input name="Email" type="text" class="comm-text" id="Email" style="width:250px" placeholder="Email"/></div></td>
                      </tr>
                      <tr>
                        <td align="right" valign="middle"><strong>Contact No.:</strong></td>
                        <td align="left" valign="middle"><label for="textfield2"></label>
                          <div class="out-border">
                          <input name="contact" type="text" class="comm-text" onkeypress="return isNumberKey(event)" maxlength="10" id="contact" style="width:250px" placeholder="Contact Number"/></div></td>
                      </tr>

                      <tr>
                        <td align="left" valign="middle">&nbsp;</td>
                        <td align="left" valign="middle"><input type="submit" name="signIn" value="Submit" class="button green"> </input>
                      <input type="button" name="signIn" value="Close" class="close"> </input></td>
                      </tr>

                    </table>
                  </div></div>
    </form>
</center></b></font> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:51:31.923

您可能想查看[jQuery UI](http://www.jqueryui.com) - 特别是[Dialog](http://jqueryui.com/demos/dialog/)和[modal](http://jqueryui.com/demos/dialog/#option-modal)选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:52:51.203

我猜你正在使用“window.open”。使用 window.showModalDialog

# python - Python Beautifulsoup img 标签解析

> ID：10600079
> 
> 赞同：5
> 
> 时间：2012-05-15T11:48:59.007
> 
> 标签：python, beautifulsoup, image

我正在使用 beautifulsoup 来解析“www.youtube.com”中存在的所有 img 标签

代码是

```
import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen('http://www.youtube.com/')
soup = BeautifulSoup(page)
tags=soup.findAll('img') 
```

但我没有得到所有的 img 标签。得到的 img 标签也是无效的。

我解析后得到的img标签与页面源img标签不同。缺少某些属性。

我需要在 youtube.com 中获取所有视频 img 标签

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:03:34.830

当我在这里尝试时似乎有效

```
import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen('http://www.youtube.com/')
soup = BeautifulSoup(page)
tags=soup.findAll('img')
print "\n".join(set(tag['src'] for tag in tags)) 
```

产生这个对我来说看起来不错

```
http://i1.ytimg.com/vi/D9Zg67r9q9g/market_thumb.jpg?v=723c8e
http://s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif
//s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif
/gen_204?a=fvhr&v=mha7pAOfqt4&nocache=1337083207.97
http://i3.ytimg.com/vi/fNs8mf2OdkU/market_thumb.jpg?v=4f85544b
http://i4.ytimg.com/vi/CkQFjyZCq4M/market_thumb.jpg?v=4f95762c
http://i3.ytimg.com/vi/fzD5gAecqdM/market_thumb.jpg?v=b0cabf
http://i3.ytimg.com/vi/2M3pb2_R2Ng/market_thumb.jpg?v=4f0d95fa
//i2.ytimg.com/vi/mha7pAOfqt4/hqdefault.jpg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-07T20:25:50.097

我有类似的问题。我找不到所有图像。所以这是一段代码，它将为您提供图像标签的任何属性值。

```
from BeautifulSoup import BeautifulSoup as BSHTML
import urllib2
page = urllib2.urlopen('http://www.youtube.com/')
soup = BSHTML(page)
images = soup.findAll('img')
for image in images:
    #print image source
    print image['src']
    #print alternate text
    print image['alt'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:00:52.970

明确使用`soup.findAll(name='img')`对我有用，我似乎没有从页面中遗漏任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T06:10:44.020

```
def grabimagetags():
import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen('http://www.youtube.com/')
soup = BeautifulSoup(page)
tags = soup.findAll('img')
list.extend(set(tag['src'] for tag in tags))

return list 
```

抓取图像标签（）

我只会进行此更改，以便您可以传递 img 标签列表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T19:40:04.620

在我的情况下，一些图像不包含`src`.

所以我这样做是为了避免`keyError`异常：

```
art_imgs = set(img['src'] for img in article.find_all('img') if img.has_attr('src')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-19T01:21:31.867

尝试这个。

```
from simplified_scrapy import SimplifiedDoc, req
url = 'https://www.youtube.com'
html = req.get(url)
doc = SimplifiedDoc(html)
imgs = doc.listImg(url = url)
print([img.url for img in imgs])

imgs = doc.selects('img')
for img in imgs:
  print (img)
  print (doc.absoluteUrl(url,img.src)) 
```

# javascript - wamp 上的 getJSON

> ID：10600082
> 
> 赞同：0
> 
> 时间：2012-05-15T11:49:31.090
> 
> 标签：javascript, jquery, wamp

我的 wamp www 目录中有一个 json 文件

```
[
  { "c" : 2344},
  { "c" : 5433}
] 
```

在我的 html 页面中，也在 wamp 目录中，我有一个 getJSON 调用

```
$.getJSON("http://localhost/test.json", function(data) {
    alert(data);
} 
```

这`getJSON`不会做任何事情，没有错误，什么都没有。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:58:20.453

这对我很有用：

.json 文件：

```
[
  {"c":2244} ,
  {"c":3344}
] 
```

javascript:

```
$.getJSON ('test.json', function (data) {
   console.log (data); // prints [object, object] with object.c = 2244 and object.c = 3344
}); 
```

test.json 位于 javascript 文件目录的同一文件夹中。

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:55:44.773

构建一个提供 JSON 输出的 php 文件。

为了实现它，构建一个 php 数组，将此数组传递给`json_encode`，并回显输出。

`getJSON`然后用函数查询php文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:55:54.523

```
[
  { "c" : 2344},
  { "c" : 5433}
] 
```

这不是一个有效的 json，你应该像这样改变它，

```
{
 "list" : [
     { "c" : 2344},
     { "c" : 5433} 
  ]
}

$.getJSON("http://localhost/test.json", function(data) {
    console.log(data.list.length); // 2
    console.log(data.list[0].c); // 2344
    console.log(data.list[1].c); // 5433

    for(var d in data.list) {
        alert(data.list[d].c); // alert("2344"), alert("5433")
    } 
```

​ }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:05:23.990

这对我有用：

```
<!Doctype html>
<html>
<head>
<title>getJSON Test</title>
<script type="text/javascript" src = "http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

$.getJSON("http://localhost/test.json", function(data) {
    $.each(data, function(key, value){
        alert(key+" : "+value);
    });
});

});

</script>
</head>
<body>
I'm Good.
</body>
</html> 
```

# objective-c - UIViewController 检查显示模式视图？

> ID：10600086
> 
> 赞同：2
> 
> 时间：2012-05-15T11:49:34.433
> 
> 标签：objective-c, uiviewcontroller

我需要检查视图控制器是否显示模态视图。并且当显示模态视图时，如何拦截视图控制器自己视图的“隐藏事件”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:50:47.923

~~不确定您在说什么“查看事件”，但是~~您可以检查`modalViewController`属性（在 iOS 5 中已弃用）或在 iOS 5`presentedViewController`中是“新黑色”的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:01:11.073

不知道你问什么，但是：

要知道您当前是否是模态视图，请查看此链接：

[是否可以确定 ViewController 是否显示为 Modal？](https://stackoverflow.com/questions/2798653/iphone-is-is-possible-to-determine-wheteher-viewcontroller-is-presented-as-moda)

并处理“隐藏事件”使用：

```
- (void) viewWillDisappear:(BOOL)animated 
```

# objective-c - UIWebView - 显示当前页面/总页面的框架

> ID：10600087
> 
> 赞同：1
> 
> 时间：2012-05-15T11:49:37.317
> 
> 标签：objective-c, cocoa-touch, ios5

我正在使用 UIWebView 加载 PDF 文件。现在它在左上角显示一个框架，显示当前页面和页面数量。有没有办法改变这个框架的位置？

# visual-c++ - CUDA 性能测试

> ID：10600088
> 
> 赞同：1
> 
> 时间：2012-05-15T11:49:42.450
> 
> 标签：visual-c++, cuda, parallel-processing

我正在为性能测试编写一个简单的 CUDA 程序。
这与向量计算无关，仅用于简单的（并行）字符串转换。

```
#include <stdio.h>
#include <string.h>
#include <cuda_runtime.h>

#define UCHAR           unsigned char
#define UINT32          unsigned long int

#define CTX_SIZE        sizeof(aes_context)
#define DOCU_SIZE       4096
#define TOTAL           100000
#define BBLOCK_SIZE     500

UCHAR           pH_TXT[DOCU_SIZE * TOTAL];
UCHAR           pH_ENC[DOCU_SIZE * TOTAL];
UCHAR*          pD_TXT;
UCHAR*          pD_ENC;

__global__
void    TEST_Encode( UCHAR *a_input, UCHAR *a_output )
{
    UCHAR       *input;
    UCHAR       *output;

    input   = &(a_input[threadIdx.x * DOCU_SIZE]);
    output  = &(a_output[threadIdx.x * DOCU_SIZE]);

    for ( int i = 0 ; i < 30 ; i++ ) {
        if ( (input[i] >= 'a') && (input[i] <= 'z') ) {
            output[i] = input[i] - 'a' + 'A';
        }
        else {
            output[i] = input[i];
        }
    }
}

int main(int argc, char** argv)
{
    struct  cudaDeviceProp  xCUDEV;

    cudaGetDeviceProperties(&xCUDEV, 0);

    // Prepare Source
    memset(pH_TXT, 0x00, DOCU_SIZE * TOTAL);

    for ( int i = 0 ; i < TOTAL ; i++ ) {
        strcpy((char*)pH_TXT + (i * DOCU_SIZE), "hello world, i need an apple.");
    }

    // Allocate vectors in device memory
    cudaMalloc((void**)&pD_TXT, DOCU_SIZE * TOTAL);
    cudaMalloc((void**)&pD_ENC, DOCU_SIZE * TOTAL);

    // Copy vectors from host memory to device memory
    cudaMemcpy(pD_TXT, pH_TXT, DOCU_SIZE * TOTAL, cudaMemcpyHostToDevice);

    // Invoke kernel
    int threadsPerBlock = BLOCK_SIZE;
    int blocksPerGrid = (TOTAL + threadsPerBlock - 1) / threadsPerBlock;

    printf("Total Task is %d\n", TOTAL);
    printf("block size is %d\n", threadsPerBlock);
    printf("repeat cnt is %d\n", blocksPerGrid);

    TEST_Encode<<<blocksPerGrid, threadsPerBlock>>>(pD_TXT, pD_ENC);

    cudaMemcpy(pH_ENC, pD_ENC, DOCU_SIZE * TOTAL, cudaMemcpyDeviceToHost);

    // Free device memory
    if (pD_TXT)         cudaFree(pD_TXT);
    if (pD_ENC)         cudaFree(pD_ENC);

    cudaDeviceReset();
} 
```

当我将 BLOCK_SIZE 值从 2 更改为 1000 时，我得到了以下持续时间（来自 NVIDIA Visual Profiler）

```
TOTAL       BLOCKS      BLOCK_SIZE  Duration(ms)
100000      50000       2           28.22
100000      10000       10          22.223
100000      2000        50          12.3
100000      1000        100         9.624
100000      500         200         10.755
100000      250         400         29.824
100000      200         500         39.67
100000      100         1000        81.268 
```

我的 GPU 是 GeForce GT520，max threadsPerBlock 值为 1024，所以我预测当 BLOCK 为 1000 时我会获得最佳性能，但上表显示了不同的结果。

我不明白为什么持续时间不是线性的，我该如何解决这个问题。（或者我怎样才能找到优化的块值（最小持续时间）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:28:50.353

似乎 2、10、50 个线程并没有利用 gpu 的功能，因为它的设计是启动更多线程。

您的卡具有计算能力 2.1。

*   每个多处理器的最大驻留线程数 = 1536
*   每个块的最大线程数 = 1024
*   每个多处理器的最大驻留块数 = 8
*   经纱尺寸 = 32

**有两个问题：**

**1.**

您尝试为每个线程占用如此多的寄存器内存，如果您的块大小增加，它肯定会被外包以减慢本地内存空间。

**2.**

使用 32 的倍数执行测试，因为这是卡的扭曲大小，并且许多内存操作针对线程大小进行了优化，线程大小是扭曲大小的倍数。

因此，如果每个块仅使用大约 1024 个（在您的情况下为 1000 个）线程，则 33% 的 gpu 是空闲的，因为每个 SM 只能分配 1 个块。

如果您使用以下 100% 入住率，会发生什么情况？

*   128 = 12 个块 -> 因为每个 sm 只能驻留 8 个块，所以块执行是序列化的
*   192 = 每平方米 8 个居民街区
*   256 = 每平方米 6 个常驻街区
*   512 = 每平方米 3 个常驻街区

# php - PHP中用户友好的布尔打印

> ID：10600089
> 
> 赞同：0
> 
> 时间：2012-05-15T11:49:43.383
> 
> 标签：php

在下面的代码中，“resAvailability”可能等于 1 或 0。是否可以以 1 产生“是”而 0 产生“否”的方式更新此代码？

```
 <?php foreach ($result as $row):?>
    <tr>
    <td><?php echo $row['resAvailability']; ?></td>
    <?php endforeach;?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T11:51:31.187

```
echo $row['resAvailability'] ? 'Yes' : 'No'; 
```

这称为[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T11:55:04.943

这是我会这样做的方式：

```
echo ($row['resAvailability'] == 1) ? "Yes": "No"; 
```

请注意， 1 也将验证为真，而 0 也将验证为假，因此实际上您不需要`== 1`在我的示例中使用它，因为它会以以下方式运行：

$row['resAvailability'] 是否为真，返回是，否则返回否。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T11:51:09.610

你的意思是这样吗？很基础的东西

```
if($row['resAvailability'] == 1)
{
    echo "Yes";
}
else
{
    echo "No";
} 
```

**编辑**
埃米尔，他的代码实际上是一样的，虽然因为你问了这样一个基本问题，我认为你很新，在我看来这对初学者来说更容易；）虽然我肯定会采用埃米尔的方式（更少的代码和所有这些）。

# asp.net-mvc-2 - 将 asp.net MVC 2 Web 应用程序部署到 IIS 7.5 出现问题

> ID：10600091
> 
> 赞同：1
> 
> 时间：2012-05-15T11:49:50.577
> 
> 标签：asp.net-mvc-2, deployment, iis-7.5

我已经开发了 asp.net mvc web 应用程序。而我的机器配置了 IIS 7.5。我想将带有源代码的 Web 应用程序部署到 IIS，以便我可以附加该进程并在运行时调试它。我选择这种方式是因为功能很少，例如文件复制和文件创建在简单发布后无法执行。

我试过了，在 IIS 7.5 管理器中创建 Web 应用程序。安装 ASP.NET 实用程序。当我浏览时，我被要求启用目录浏览。我启用了。在 IE 中，我发现了绝对不想要的文件结构。我希望在部署后直接在 globle.asax 中配置我的登录页面。

我还需要检查什么。还是我缺少任何步骤？我正在使用 Visul web developer 2010 express edition 来开发应用程序。请指导我。

# php - 通过 SOAP 获取 php 使用的工作 .NET Web 服务

> ID：10600099
> 
> 赞同：0
> 
> 时间：2012-05-15T11:50:41.453
> 
> 标签：php, .net, web-services

我有一个标准 SOAP 的 .net Web 服务，并且我已经添加了 POST/GET 功能。在 .net 中，我可以毫无问题地使用 Web 服务，并且在使用测试 POST 页面时，我也可以成功使用 Web 服务。我收到了 php 开发人员的请求，要求使用我认为完全没有问题的 Web 服务，但是他无法获得成功的结果。我从来没有使用过 PHP，所以我没有一个测试项目，我什至可以将它用于 php 方面。我相信这是他使用过的第一个 Web 服务，所以他自己并没有太多经验。

所以我的问题是：

1) 作为一名 .net 开发人员，我什至不知道如何开始研究这个问题。我不知道这是我的网络服务有问题还是他的 php 代码有问题。因为 .net 和 POST 工作我倾向于相信这是他的代码中的东西，但是我无法测试，因为我不知道 php。

2）是否有一些标签或我需要做的事情才能让 php 正确使用我的服务？

3) 有什么工具可以用来检查与 php 的兼容性吗？

4) 有 PHP 知识的人可以看一下他的代码，看看有没有明显的问题？

已解决：请参阅答案中的工作代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:38:13.163

```
$function = "soapcall"; 
$array =array("Param1" => "parameter1", "Param2" => "parameter2", "Param3" => "parameter3"); 

$client = new SOAPClient( 
'http://url.asmx?WSDL', 
array( 
    'location' => 'url.asmx?WSDL', 
    'trace' => 1, 
    'style' => SOAP_RPC, 
    'use' => SOAP_ENCODED, 
) 
);

$result = $client->__soapCall('soapcall', array("parameters"=>$array));

foreach( $result as $r) 
{   print $r."<br>";    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:08:02.917

与 WCF 和其他 Web 服务缺乏互操作性 - 这不仅仅是 PHP 的问题，Java 库也经常无法与 WCF Web 服务一起使用。在许多其他 SO 问题中有更多信息 - 请参阅侧边栏。

您可以尝试的一件事是[SOAPUI](http://www.soapui.org/)（或[来自 sourceforge](http://sourceforge.net/projects/soapui/files/)）以“交互方式”调用您的 Web 服务，这应该可以帮助他找出 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:02:47.890

我们在 Php 中使用[NuSoap](http://sourceforge.net/projects/nusoap/)进行 Web 服务调用，它运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-23T07:46:57.247

.NET 服务需要有 http 端点（适配器）。 [https://bugs.php.net/bug.php?id=50698](https://bugs.php.net/bug.php?id=50698)

有时您还需要 NTLM 授权[使用 NTLM 授权调用 web 服务](https://stackoverflow.com/questions/19541462/call-webservice-with-ntlm-authorization)

# c# - 如何在 MVC 中使用 Nlog 将消息记录到 txt 文件？

> ID：10600101
> 
> 赞同：4
> 
> 时间：2012-05-15T11:50:48.520
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, logging, nlog

我在我的 MVC 项目中使用 Nlog

我想要实现的是在我的控制器中执行操作方法时记录一条消息。并且日志消息应该出现在 txt 文件中。但我似乎无法让它工作

我已将 Nlog 安装到我的参考资料中。

我有以下配置的 Nlog.Config：

```
<?xml version="1.0" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <targets>
        <target name="file"
                xsi:type="File"
                layout="${longdate} ${logger} ${message}"
                fileName="${basedir}/logs/logfile.txt"
                keepFileOpen="false"
                encoding="iso-8859-2" />
    </targets>
    <rules>
        <logger name="*"
                minlevel="Debug"
                writeTo="file" />
    </rules>
</nlog> 
```

然后在我的控制器的 POST 操作方法中，我有以下代码：

```
[HttpPost]
public ActionResult Edit(int id, CreateNKIphase1ViewModel model)
{
    Logger logger = LogManager.GetCurrentClassLogger();
    logger.Info("Test message");

     //code....
} 
```

我在哪里可以找到 txt 文件？

为什么这不起作用：S

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:17:20.303

如果您的应用程序使用应用程序池标识在 IIS 中运行，则需要向该标识授予文件夹权限。

*   创建“日志”文件夹。
*   在 IIS 管理器中，找到您的应用程序正在使用的应用程序池标识。
*   在“日志”文件夹属性对话框中，向应用程序池标识授予写入权限。

当您输入应用程序池标识的名称时，您需要包含`IIS APPPOOL`. 例如，如果应用程序池标识为`ASP.NET v4.0`，则输入名称为`IIS APPPOOL\ASP.NET v4.0`。此外，请确保该位置是本地计算机，而不是网络域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:01:43.597

为什么不将`fileName`属性设置为已知的路径和名称，而不是使用`${basedir}`格式？

```
fileName="C:\Temp\logfile.txt" 
```

这样你就会知道文件应该在哪里。一旦您完成了该部分的日志记录，您就可以开始添加更高级的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T10:56:49.197

如果您在调试模式下运行应用程序，您可以通过以下路径找到它：

```
"%PARTITION%:\\...PATH TO YOUR APP...\bin\Debug\\... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:12:57.203

它工作得很好，但是用于 asp.net 应用程序的 ${basedir} 与典型的桌面应用程序不同。我相信这个文件可以从临时文件夹中获得，离你的应用程序集不远。

您可以定义自己的变量或定义对“日志”文件夹的直接访问。确保应用程序可以将日志写入此文件夹。使用[这个](https://stackoverflow.com/questions/10600101/how-can-i-logg-a-messages-to-a-txt-file-with-nlog-in-mvc/10600469#10600469)答案，它完美地描述了你应该做什么

# iphone - 方法objective-c的重复声明

> ID：10600105
> 
> 赞同：1
> 
> 时间：2012-05-15T11:51:05.010
> 
> 标签：iphone, objective-c, xcode, function, overloading

这个问题可能是[Objective C的重复 - “Duplicate declaration of method”编译错误](https://stackoverflow.com/questions/7374277/objective-c-duplicate-declaration-of-method-compilation-error)

但我仍然对为什么目标 C 不支持函数重载/方法重载感到困惑

谁能告诉我发生此错误的正确原因？

![在此处输入图像描述](../Images/7875419a77698203f15f7570b63f3870.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:53:21.933

Objective-C 不支持方法重载，所以你必须使用不同的方法名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T11:53:56.783

仅仅是因为 Objective-C 不支持重载。此外，强烈建议尽可能在函数名称中包含参数的类型。尝试`getTextFromTextView:`，`getTextFromTextField:`而不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:15:36.280

我想告诉你，请查看*“如何[定义方法？](http://cocoadevcentral.com/d/learn_objectivec/) ”*，您也可以在上面的链接中找到有关多种输入法的信息。这[是](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html)用于Objective C中方法的命名约定？

如上所述，我们可以知道您的方法具有相同的名称（签名）`getText:`

*在您的情况下，您定义了目标 C 编译器不支持的重复方法。*

希望这篇对你有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-15T11:53:39.467

阅读此线程，了解为什么目标 c 不支持方法重载

[为什么 Objective-C 不支持方法重载？](https://stackoverflow.com/questions/4444783/why-objective-c-doesnt-support-method-overloading)

这是苹果讨论表 [https://discussions.apple.com/thread/512569?start=0&tstart=0](https://discussions.apple.com/thread/512569?start=0&tstart=0)

# c++ - CreateThread 函数的多个参数

> ID：10600111
> 
> 赞同：7
> 
> 时间：2012-05-15T11:51:23.307
> 
> 标签：c++, createthread

当我使用CreateThread API方法时，当我要传递多个LPVOID lpParameter传递的参数时，我需要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T11:52:44.973

您可以创建一个包含所有相关数据的结构，并将指向该结构实例的指针（填充适当的参数）传递给`CreateThread()`

在您的线程创建函数中，您需要将`LPVOID`back 转换为指向您的结构的指针才能使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T11:52:53.980

将这些参数放入一个结构中，在堆上分配，并在`LPVOID`参数中传递结构的地址。然后，您的线程函数可以将`LPVOID`转换为指向结构的指针并读出参数。

把它放在堆上是很重要的，因为如果你把它放在调用线程的堆栈上，`CreateThread`那么当你的线程过程试图访问它时它可能是无效的。

# actionscript-3 - 从数组拼接后出现错误 #1010

> ID：10600112
> 
> 赞同：0
> 
> 时间：2012-05-15T11:51:29.593
> 
> 标签：actionscript-3, flash, actionscript

我这里有个问题。每五秒 spawnEnemies 被触发一次。它创建一个movieclip，设置它的位置并将它添加到舞台和一个数组中。在函数 checkBullet 中，我检查子弹是否击中了一个敌人。如果是这样，则将子弹和敌人从舞台上移除，并将敌人从阵列中拼接起来。但是一旦我击中敌人就会抛出一个错误：

TypeError：错误＃1010：术语未定义且没有属性。

如果我注释掉 arrayEnemies.splice(i,1) 行，它可以正常工作，但不会从数组中删除。这本身不是问题，但我自然不喜欢在我的数组中保留不必要的数据。对此有什么帮助吗？

```
function checkBullet(event:Event) {
    if(stage.contains(mcBullet)) {
        for(var i:int = 0; i < arrayEnemies.length; i++) {
            if(arrayEnemies[i].hitTestPoint(mcBullet.x, mcBullet.y, true)) {
                stage.removeChild(mcBullet);
                this.removeChild(arrayEnemies[i]);
                arrayEnemies.splice(i,1);
                bulletOnStage = false;
            }
        }
        if(mcBullet.x > 800) {
            stage.removeChild(mcBullet);
            bulletOnStage = false;
        }
    }
}

function spawnEnemies(event:TimerEvent) {
    var enemie:MovieClip = new box_mc();
    enemie.name = "mcBox" + event.currentTarget.currentCount;
    enemie.x = 850;
    enemie.y = Math.floor(Math.random()*(1+155)+255);
    addChild(enemie);
    arrayEnemies.push(enemie);
}

function moveEnemies(event:Event) {
    for(var i:int = 0; i < arrayEnemies.length; i++) {
        arrayEnemies[i].x -= 5;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:22:55.230

这将是由处理您正在交互的数组引起的，您应该对要删除的内容持有一个引用，然后在循环后执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:12:07.367

您的问题是，如果子弹击中两个敌人，您会尝试将其从舞台上移开两次。这将引发 ArgumentError。

如果您需要针对所有敌人进行测试（假设多个敌人可以被同一颗子弹击中），当您从敌人数组中移除一个元素时，您还需要减少 i。

```
function checkBullet(event:Event) {
    if(stage.contains(mcBullet)) {
        if(mcBullet.x > 800) {
            stage.removeChild(mcBullet);
            bulletOnStage = false;
        }
        for(var i:int = 0; i < arrayEnemies.length; i++) {
            if(arrayEnemies[i].hitTestPoint(mcBullet.x, mcBullet.y, true)) {
                if(stage.contains(mcBullet)){
                    stage.removeChild(mcBullet);
                }
                this.removeChild(arrayEnemies[i]);
                arrayEnemies.splice(i,1);
                bulletOnStage = false;
                i--;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:02:11.160

有点老的问题，但我想我也会为可能最终出现在这里的任何人提供我的答案。
就像 Neil 说的那样，编辑您正在迭代的数组（在本例中为 arrayEnemies）可能会导致并发更新问题。

我首选的解决方案是使用单独的 toRemove 数组并在更新后将其删除，例如：

```
var enemies:Array();
//Lets assume at some point this is populated with Enemy objects

function update():void
{
    var toRemove:Array = new Array();
    //May want to keep and clear an array instead to avoid creating a new one each update

    foreach(var enemy:Enemy in enemies)
    {
        enemy.update();
        if(enemy.markedForRemoval())
            toRemove.push(enemy);
    }

    foreach(var enemy:Enemy in toRemove)
        enemies.splice(enemies.indexOf(enemy), 1);
} 
```

# opencv - CVImage 和 IplImage 有什么区别？

> ID：10600115
> 
> 赞同：1
> 
> 时间：2012-05-15T11:51:32.540
> 
> 标签：opencv, artoolkit

`CvImage`和有什么区别`IplImage`？
我正在尝试将 OpenCV 与 ARToolKit 集成，但这里出现错误：

```
 CvImage *image; 
```

错误是：

> *token 之前应为 '=',',',';','ask' 或 '__atrribute__'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:04:16.977

CvImage 是 IplImage 的一个已弃用的包装器，不要使用它。最好使用 cv::Mat，如果你需要与旧代码交互，IplImage。

如果你真的需要使用它：我假设你错过了 legacy.hpp 包含。请参阅当前 OpenCV 中的“遗留”模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:02:35.090

错误的。

cv_bridge 使用 CvImage 来提供一个 Cv::Mat 并且其额外信息在 sensor_msgs Image 中可用。

看看里面的代码

```
http://mirror.umd.edu/roswiki/doc/electric/api/cv_bridge/html/c++/cv__bridge_8h_source.html 
```

和教程：

```
http://www.ros.org/wiki/cv_bridge/Tutorials/UsingCvBridgeToConvertBetweenROSImagesAndOpenCVImages 
```

# css - CSS：如何制作输入文本边框以覆盖其周围的文本？

> ID：10600119
> 
> 赞同：0
> 
> 时间：2012-05-15T11:51:50.577
> 
> 标签：css, text, static

我想在一个简单的文本输入表单旁边混合一个静态值。所以它看起来像，例如：[static]What do you think about[/static] [user info]...[/userinfo]。我想出了这个：

```
 <p style="display:inline;">What Is It Like To Be</p>

        <div>
            <input name="post_title" type="text" id="topic"  class="input" size="50" maxlength="100" tabindex="1" placeholder="<?php echo $_GET["pr"];?>" style="padding-left:45px; " style="display:inline;"/>
        </div> 
```

所以，我确实得到了与输入表单内联的静态“前缀”，但我想让静态文本看起来“像”它是表单的一部分。就像一个静态的“占位符”标签。

多谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:08:29.583

你可以尝试这样的事情：

**HTML**

```
<label class="input-stretch">prefix_<input type="text" /></label>​ 
```

**CSS**

```
.input-stretch {
 border: 1px solid #222;
 padding: 0.1em;    
}
.input-stretch input {
 border: none;
 outline: none !important;    
}
​ 
```

基本上删除输入边框和轮廓，然后将一个添加到标签或您想要包装它的任何其他元素。

`outline: none !important;`可能还需要应用于活动/焦点状态，iirc chrome 给它一些漂亮的蓝色轮廓？

[演示](http://jsfiddle.net/rlemon/ypZu8/1/)

# oracle - 带条件插入的 Oracle Merge 语句

> ID：10600120
> 
> 赞同：3
> 
> 时间：2012-05-15T11:51:57.267
> 
> 标签：oracle

我使用以下语句插入或更新我们的客户已签署的当前文档版本：

```
 MERGE INTO schema.table ccv
          USING (select :customer_id as customer_id, :doc_type as doc_type, :version as Version FROM DUAL) n
          ON (ccv.customer_id = n.customer_id and ccv.doc_type = n.doc_type)
        WHEN MATCHED 
        THEN UPDATE 
            set ccv.version = n.version
            DELETE WHERE ccv.version is null            
        WHEN NOT MATCHED 
        THEN INSERT 
            ( customer_id, doc_type, version)
        VALUES
            (:customer_id,:doc_type,:version) 
```

基本上，当我使用 DELETE WHERE 语句删除时，我想避免在相同条件下插入。

问题是，存在三种不同的文档类型 (doc_type)，但可能只有一两个被模拟签名。

如果客户签署了一份文件，那么我想存储它的版本，如果没有，那么我不想在数据库中记录该文件。

因此，当新的 :version 为 null 时，我会删除现有行。这很好用。问题是，当没有存储该客户的文档时，oracle 实际上会插入一条 version = NULL 的记录。

当 :version 为空时，如何避免插入记录？

将合并拆分为单独的删除、更新和插入语句是唯一的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:32:32.417

如果您使用的是 10g，您也可以使用插入条件：

[http://www.oracle-developer.net/display.php?id=310](http://www.oracle-developer.net/display.php?id=310)

Rgds。

# android - 安卓直播

> ID：10600122
> 
> 赞同：1
> 
> 时间：2012-05-15T11:52:01.560
> 
> 标签：android, video-streaming

我需要播放直播视频。我正在尝试使用 MediaPlayer 和 SurfaceView 播放视频。URL 从带有 .mov 的 http 重定向到带有 .3gp 扩展名的 rtsp。Vide 在 OS v2.3.x 中可以高效播放，但在 2.1 以后的任何其他 OS 版本中都无法播放。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:56:12.733

```
public class StreamingAudioActivity extends Activity {
    /** Called when the activity is first created. */
    private Button streamButton;
    private ImageButton playButton;
    private TextView textStreamed;
    private boolean isPlaying;
    private StreamingMediaPlayer audioStreamer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
//  }
//
//  private void initControls() {
        textStreamed = (TextView) findViewById(R.id.text_kb_streamed);
        streamButton = (Button) findViewById(R.id.button_stream);
        streamButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Log.v("click","streaming on");
                startStreamingAudio();
            }
        });

        playButton = (ImageButton) findViewById(R.id.button_play);
        playButton.setEnabled(false);
        playButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                if (audioStreamer.getMediaPlayer().isPlaying()) {
                    audioStreamer.getMediaPlayer().pause();
                    playButton.setImageResource(R.drawable.button_play);
                } else {
                    audioStreamer.getMediaPlayer().start();
                    audioStreamer.startPlayProgressUpdater();
                    playButton.setImageResource(R.drawable.button_pause);
                }
                isPlaying = !isPlaying;
            }
        });
    }

    private void startStreamingAudio() {
        try {
            final ProgressBar progressBar = (ProgressBar) findViewById(R.id.progress_bar);
            if (audioStreamer != null) {
                audioStreamer.interrupt();
            }
            audioStreamer = new StreamingMediaPlayer(this, textStreamed,
                    playButton, streamButton, progressBar);
            Log.v("aaa", "sdaa");

            // audioStreamer.startStreaming("http://www.pocketjourney.com/downloads/pj/tutorials/audio.mp3",1717,
            // 214);
            audioStreamer.startStreaming(
                    "http://vprbbc.streamguys.net:80/vprbbc24.mp3",
                    1717, 216);

//          http://rkmania.me/playlistAction.php?action=addTrack&trck=115976
            streamButton.setEnabled(false);
        } catch (IOException e) {
            Log.e(getClass().getName(), "Error starting to stream audio.", e);
        }

    }

public class StreamingMediaPlayer {

    private static final int INTIAL_KB_BUFFER =  96*10/8;//assume 96kbps*10secs/8bits per byte

    private TextView textStreamed;

    private ImageButton playButton;

    private ProgressBar progressBar;

    //  Track for display by progressBar
    private long mediaLengthInKb, mediaLengthInSeconds;
    private int totalKbRead = 0;

    // Create Handler to call View updates on the main UI thread.
    private final Handler handler = new Handler();

    private MediaPlayer     mediaPlayer;

    private File downloadingMediaFile; 

    private boolean isInterrupted;

    private Context context;

    private int counter = 0;

    public StreamingMediaPlayer(Context  context,TextView textStreamed, ImageButton playButton, Button  streamButton,ProgressBar    progressBar) 
    {
        this.context = context;
        this.textStreamed = textStreamed;
        this.playButton = playButton;
        this.progressBar = progressBar;
    }

    /**  
     * Progressivly download the media to a temporary location and update the MediaPlayer as new content becomes available.
     */  
    public void startStreaming(final String mediaUrl, long  mediaLengthInKb, long   mediaLengthInSeconds) throws IOException {

        this.mediaLengthInKb = mediaLengthInKb;
        this.mediaLengthInSeconds = mediaLengthInSeconds;

        Runnable r = new Runnable() {   
            public void run() {   
                try {   
                    downloadAudioIncrement(mediaUrl);
                } catch (IOException e) {
                    Log.e(getClass().getName(), "Unable to initialize the MediaPlayer for fileUrl=" + mediaUrl, e);
                    return;
                }   
            }   
        };   
        new Thread(r).start();
    }

    /**  
     * Download the url stream to a temporary location and then call the setDataSource  
     * for that local file
     */  
    public void downloadAudioIncrement(String mediaUrl) throws IOException {

        URLConnection cn = new URL(mediaUrl).openConnection();   
        cn.connect();   
        InputStream stream = cn.getInputStream();
        if (stream == null) {
            Log.e(getClass().getName(), "Unable to create InputStream for mediaUrl:" + mediaUrl);
        }

        downloadingMediaFile = new File(context.getCacheDir(),"downloadingMedia.dat");

        // Just in case a prior deletion failed because our code crashed or something, we also delete any previously 
        // downloaded file to ensure we start fresh.  If you use this code, always delete 
        // no longer used downloads else you'll quickly fill up your hard disk memory.  Of course, you can also 
        // store any previously downloaded file in a separate data cache for instant replay if you wanted as well.
        if (downloadingMediaFile.exists()) {
            downloadingMediaFile.delete();
        }

        FileOutputStream out = new FileOutputStream(downloadingMediaFile);   
        byte buf[] = new byte[16384];
        int totalBytesRead = 0, incrementalBytesRead = 0;
        do {
            int numread = stream.read(buf);   
            if (numread <= 0)   
                break;   
            out.write(buf, 0, numread);
            totalBytesRead += numread;
            incrementalBytesRead += numread;
            totalKbRead = totalBytesRead/1000;

            testMediaBuffer();
            fireDataLoadUpdate();
        } while (validateNotInterrupted());   
            stream.close();
        if (validateNotInterrupted()) {
            fireDataFullyLoaded();
        }
    }  

    private boolean validateNotInterrupted() {
        if (isInterrupted) {
            if (mediaPlayer != null) {
                mediaPlayer.pause();
                //mediaPlayer.release();
            }
            return false;
        } else {
            return true;
        }
    }

    /**
     * Test whether we need to transfer buffered data to the MediaPlayer.
     * Interacting with MediaPlayer on non-main UI thread can causes crashes to so perform this using a Handler.
     */  
    private void  testMediaBuffer() {
        Runnable updater = new Runnable() {
            public void run() {
                if (mediaPlayer == null) {
                    //  Only create the MediaPlayer once we have the minimum buffered data
                    if ( totalKbRead >= INTIAL_KB_BUFFER) {
                        try {
                            startMediaPlayer();
                        } catch (Exception e) {
                            Log.e(getClass().getName(), "Error copying buffered conent.", e);               
                        }
                    }
                } else if ( mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() <= 1000 ){ 
                    //  NOTE:  The media player has stopped at the end so transfer any existing buffered data
                    //  We test for < 1second of data because the media player can stop when there is still
                    //  a few milliseconds of data left to play
                    transferBufferToMediaPlayer();
                }
            }
        };
        handler.post(updater);
    }

    private void startMediaPlayer() {
        try {   
            File bufferedFile = new File(context.getCacheDir(),"playingMedia" + (counter++) + ".dat");

            // We double buffer the data to avoid potential read/write errors that could happen if the 
            // download thread attempted to write at the same time the MediaPlayer was trying to read.
            // For example, we can't guarantee that the MediaPlayer won't open a file for playing and leave it locked while 
            // the media is playing.  This would permanently deadlock the file download.  To avoid such a deadloack, 
            // we move the currently loaded data to a temporary buffer file that we start playing while the remaining 
            // data downloads.  
            moveFile(downloadingMediaFile,bufferedFile);

            Log.e(getClass().getName(),"Buffered File path: " + bufferedFile.getAbsolutePath());
            Log.e(getClass().getName(),"Buffered File length: " + bufferedFile.length()+"");

            mediaPlayer = createMediaPlayer(bufferedFile);

            // We have pre-loaded enough content and started the MediaPlayer so update the buttons & progress meters.
            mediaPlayer.start();
            startPlayProgressUpdater();         
            playButton.setEnabled(true);
        } catch (IOException e) {
            Log.e(getClass().getName(), "Error initializing the MediaPlayer.", e);
            return;
        }   
    }

    private MediaPlayer createMediaPlayer(File mediaFile)
    throws IOException {
        MediaPlayer mPlayer = new MediaPlayer();
        mPlayer.setOnErrorListener(
                new MediaPlayer.OnErrorListener() {
                    public boolean onError(MediaPlayer mp, int what, int extra) {
                        Log.e(getClass().getName(), "Error in MediaPlayer: (" + what +") with extra (" +extra +")" );
                        return false;
                    }
                });

        //  It appears that for security/permission reasons, it is better to pass a FileDescriptor rather than a direct path to the File.
        //  Also I have seen errors such as "PVMFErrNotSupported" and "Prepare failed.: status=0x1" if a file path String is passed to
        //  setDataSource().  So unless otherwise noted, we use a FileDescriptor here.
        FileInputStream fis = new FileInputStream(mediaFile);
        mPlayer.setDataSource(fis.getFD());
        mPlayer.prepare();
        return mPlayer;
    }

    /**
     * Transfer buffered data to the MediaPlayer.
     * NOTE: Interacting with a MediaPlayer on a non-main UI thread can cause thread-lock and crashes so 
     * this method should always be called using a Handler.
     */  
    private void transferBufferToMediaPlayer() {
        try {
            // First determine if we need to restart the player after transferring data...e.g. perhaps the user pressed pause
            boolean wasPlaying = mediaPlayer.isPlaying();
            int curPosition = mediaPlayer.getCurrentPosition();

            // Copy the currently downloaded content to a new buffered File.  Store the old File for deleting later. 
            File oldBufferedFile = new File(context.getCacheDir(),"playingMedia" + counter + ".dat");
            File bufferedFile = new File(context.getCacheDir(),"playingMedia" + (counter++) + ".dat");

            //  This may be the last buffered File so ask that it be delete on exit.  If it's already deleted, then this won't mean anything.  If you want to 
            // keep and track fully downloaded files for later use, write caching code and please send me a copy.
            bufferedFile.deleteOnExit();   
            moveFile(downloadingMediaFile,bufferedFile);

            // Pause the current player now as we are about to create and start a new one.  So far (Android v1.5),
            // this always happens so quickly that the user never realized we've stopped the player and started a new one
            mediaPlayer.pause();

            // Create a new MediaPlayer rather than try to re-prepare the prior one.
            mediaPlayer = createMediaPlayer(bufferedFile);
            mediaPlayer.seekTo(curPosition);

            //  Restart if at end of prior buffered content or mediaPlayer was previously playing.  
            //  NOTE:  We test for < 1second of data because the media player can stop when there is still
            //  a few milliseconds of data left to play
            boolean atEndOfFile = mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() <= 1000;
            if (wasPlaying || atEndOfFile){
                mediaPlayer.start();
            }

            // Lastly delete the previously playing buffered File as it's no longer needed.
            oldBufferedFile.delete();

        }catch (Exception e) {
            Log.e(getClass().getName(), "Error updating to newly loaded content.", e);                  
        }
    }

    private void fireDataLoadUpdate() {
        Runnable updater = new Runnable() {
            public void run() {
                textStreamed.setText((totalKbRead + " Kb read"));
                float loadProgress = ((float)totalKbRead/(float)mediaLengthInKb);
                progressBar.setSecondaryProgress((int)(loadProgress*100));
            }
        };
        handler.post(updater);
    }

    private void fireDataFullyLoaded() {
        Runnable updater = new Runnable() { 
            public void run() {
                transferBufferToMediaPlayer();

                // Delete the downloaded File as it's now been transferred to the currently playing buffer file.
                downloadingMediaFile.delete();
                textStreamed.setText(("Audio full loaded: " + totalKbRead + " Kb read"));
            }
        };
        handler.post(updater);
    }

    public MediaPlayer getMediaPlayer() {
        return mediaPlayer;
    }

    public void startPlayProgressUpdater() {
        float progress = (((float)mediaPlayer.getCurrentPosition()/1000)/mediaLengthInSeconds);
        progressBar.setProgress((int)(progress*100));

        if (mediaPlayer.isPlaying()) {
            Runnable notification = new Runnable() {
                public void run() {
                    startPlayProgressUpdater();
                }
            };
            handler.postDelayed(notification,1000);
        }
    }    

    public void interrupt() {
        playButton.setEnabled(false);
        isInterrupted = true;
        validateNotInterrupted();
    }

    /**
     *  Move the file in oldLocation to newLocation.
     */
    public void moveFile(File   oldLocation, File   newLocation)
    throws IOException {

        if ( oldLocation.exists( )) {
            BufferedInputStream  reader = new BufferedInputStream( new FileInputStream(oldLocation) );
            BufferedOutputStream  writer = new BufferedOutputStream( new FileOutputStream(newLocation, false));
            try {
                byte[]  buff = new byte[8192];
                int numChars;
                while ( (numChars = reader.read(  buff, 0, buff.length ) ) != -1) {
                    writer.write( buff, 0, numChars );
                }
            } catch( IOException ex ) {
                throw new IOException("IOException when transferring " + oldLocation.getPath() + " to " + newLocation.getPath());
            } finally {
                try {
                    if ( reader != null ){                      
                        writer.close();
                        reader.close();
                    }
                } catch( IOException ex ){
                    Log.e(getClass().getName(),"Error closing files when transferring " + oldLocation.getPath() + " to " + newLocation.getPath() ); 
                }
            }
        } else {
            throw new IOException("Old location does not exist when transferring " + oldLocation.getPath() + " to " + newLocation.getPath() );
        }
    }
} 
```

# wpf - WPF DataGrid 在不提交的情况下获取脏单元格数据

> ID：10600124
> 
> 赞同：0
> 
> 时间：2012-05-15T11:52:05.353
> 
> 标签：wpf

我对 WPF 的 DataGrid 有疑问。我想在编辑时获取当前单元格的文本。问题是如果不先提交单元格，您将无法获得值。我想在提交之前先验证文本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:12:32.847

你有不同的方法来做到这一点。

最干净的方法是`IDataErrorInfo`在您的模型中实现并`ValidatesOnDataError=true`在您的绑定中设置。（如果你不知道`IDataErrorInfo`，我真的鼓励你花一些时间来学习它，因为它是一个非常有用的工具并且非常易于使用）

另一种替代解决方案，它需要更少的代码，但可能不太干净：

您可以将事件处理程序添加到`CellEditEnding`（或覆盖`DataGrid.OnCellEditEnding`）并在提交之前验证输入的数据。如果验证失败，您只需取消 CellEditEnding 事件。

如果您覆盖，这是代码`OnCellEditEnding`（这几乎与添加事件处理程序完全相同）

我为你举了一个简单的例子，在这里我只是尝试解析输入的文本。您可以访问具有`EditingElement`a 属性的用户输入的文本`DataGridCellEditEndingEventArgs`

这是代码：

```
protected override void OnCellEditEnding(DataGridCellEditEndingEventArgs e)
        {
            try
            {
                // Try to parse the text
                double test = Double.Parse((e.EditingElement as TextBox).Text);
            }
            catch (FormatException)
            {
                // Mark the current editing element as invalid and cancel the event
                TextBox text = e.EditingElement as TextBox;
                BindingExpression bindingExpression =
                    BindingOperations.GetBindingExpression(text, TextBox.TextProperty);
                BindingExpressionBase bindingExpressionBase =
                    BindingOperations.GetBindingExpressionBase(text, TextBox.TextProperty);
                ValidationError validationError =
                    new ValidationError(new ExceptionValidationRule(), bindingExpression);
                Validation.MarkInvalid(bindingExpressionBase, validationError);
                e.Cancel = true;
            }
            base.OnCellEditEnding(e);
        } 
```

希望这足够清楚:)

# android - Android：防止音乐音量被改变

> ID：10600127
> 
> 赞同：0
> 
> 时间：2012-05-15T11:52:22.400
> 
> 标签：android, volume

我正在使用 Androids MediaPlayer 播放服务中的一些音乐。播放音乐时，可以通过音量摇键改变音乐音量。但是我不希望用户可以在播放过程中更改音乐音量。

如何才能做到这一点？

在获取 keydown 事件并返回 true 时是可能的，但这仅在应用程序处于顶部时才有效。由于我从服务中播放音乐，因此在屏幕关闭或后台应用程序时也会播放，因此仍然可以更改音量。

我的另一个想法是打电话

```
setVolumeControlStream( AudioManager.STREAM_RING ); 
```

在开始播放音乐后，但我不能从服务中调用它，而只能从活动中调用......

或者是否可以在另一个流（响铃或闹钟）上播放音乐，但让音量摇杆仍然改变音乐流？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:57:04.240

'当你的应用程序在后台时，你不能拦截密钥，而是监听 KeyPress 本身。您可以注册一个 ContentObserver'

[是否有音量变化的广播动作？](https://stackoverflow.com/questions/6896746/android-is-there-a-broadcast-action-for-volume-changes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:55:32.113

由于我还没有找到另一种方法，因此如果音量已更改，我会以每秒约 5 次的速度检查计时器。如果有，我把它改回来。

这是一个非常丑陋的解决方案，但它确实有效，如果没有其他方法可以做到这一点，我必须像这样离开它。

唯一真正可怕的是，当您按下音量摇杆时会出现音量对话框。有没有办法禁用音量对话框？

或者您知道更好的解决方案吗？

# c# - 在列表中分组和计数

> ID：10600129
> 
> 赞同：19
> 
> 时间：2012-05-15T11:52:35.570
> 
> 标签：c#

我有一个充满整数的列表，如下所示：

```
[0] 1
[1] 4
[2] 4
[3] 8
[4] 9
[5] 1
[6] 1 
```

所以基本上是随机数，但相同的数字可以在该列表中出现多次。

我想要的是按数字对它们进行分组，但我也可以知道该数字在列表中出现了多少次。所以我有一个类似的东西：

```
[0] 
  [number] 1
  [total] 3  // Occured 3 times in the list
[1]
  [number] 4
  [total] 2
[2]
  [number] 8
  [total] 1
[3]
  [number] 9
  [total] 1 
```

有没有一种快速/简单的方法来实现这一点？或者我是否有写出各种循环和检查来手动构建这样的东西？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-15T11:54:47.817

使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534304.aspx)和`Count`：

```
var numberGroups = numbers.GroupBy(i => i);
foreach(var grp in numberGroups)
{
    var number = grp.Key;
    var total  = grp.Count();
} 
```

这是另一个使用匿名类型来存储一些信息的示例。它还创建了一个数组，因为它似乎是所需的结果：

```
var numberGroups = numbers.GroupBy(i => i)
                   .Select(grp => new{
                       number  = grp.Key,
                       total   = grp.Count(),
                       average = grp.Average(),
                       minimum = grp.Min(),
                       maximum = grp.Max()
                   })
                   .ToArray();

foreach (var numInfo in numberGroups)
{
    var number = numInfo.number;
    // ...
    var maximum = numInfo.maximum;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T12:00:45.887

用这个

```
var result = numbers.GroupBy(n => n)
                    .Select(c => new { Key = c.Key, total = c.Count() }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:04:40.497

*这是各种循环和检查*的示例：

```
var items = new Dictionary<int,int>();
foreach(var number in numbers)
{
   if(items.ContainsKey(number))
      items[number]++;
   else
      items.Add(number, 1);
} 
```

反正仅供参考。我更喜欢 LINQ 方法，但它并没有你想象的那么糟糕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T12:43:09.480

我的解决方案：

```
var result = from i in n 
group i by i into g
select new {g.Key, Count= g.Count()}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T12:01:09.017

使用上面的 Tims 方法和 Select 而不是 foreach 你可以这样做：

```
var itemsByGroupWithCount = numbers.GroupBy(i => i)
                 .Select(item => new { 
                        Number = item.Key, 
                        Total = item.Count()}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-30T13:33:01.773

仅使用`GroupBy`您可以这样做的方法：

```
var itemsResult = numbers.GroupBy(i => i,
                                  i => i,
                                  (keys, numbersGrouped) =>
                                      new{
                                          number = numbersGrouped.FirstOrDefault(),
                                          total = numbersGrouped.Count()
                                      }
                                  ); 
```

`GroupBy + Select`与其他实现相比，它在不到一半的时间内执行优于其他人提出的方法。

您可以查看以下性能比较：

[https://dotnetfiddle.net/0M2aKD](https://dotnetfiddle.net/0M2aKD)

如果您想检查它是如何工作的，这是所用函数的[文档](https://docs.microsoft.com/dotnet/api/system.linq.enumerable.groupby?view=netframework-4.8#System_Linq_Enumerable_GroupBy__4_System_Collections_Generic_IEnumerable___0__System_Func___0___1__System_Func___0___2__System_Func___1_System_Collections_Generic_IEnumerable___2____3__)

# objective-c - 如何在iphone中的浮点值中仅显示小数点后两位

> ID：10600145
> 
> 赞同：1
> 
> 时间：2012-05-15T11:54:07.657
> 
> 标签：objective-c, xcode

我有一个浮点数，我希望它应该只显示小数点后两位数字，就像它是 1.566666 一样，它只显示 1.56

我正在使用这种方式在我的代码中浮动

```
 float ProfitForCerenia=costtoclient/markup;

float totalProfit=costtoclient-ProfitForCerenia; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T11:55:35.237

我假设您想要一个带有您的号码的 NSString：

```
[NSString stringWithFormat:@"%.02f", floatVal]; 
```

# testing - 是否有用于 Pharo/Squeak 的分支级测试覆盖率跟踪工具？

> ID：10600150
> 
> 赞同：5
> 
> 时间：2012-05-15T11:54:30.900
> 
> 标签：testing, code-coverage, smalltalk, squeak, pharo

我正在寻找可以在分支/语句级别上可视化代码覆盖率的东西。

我的理解是，Pharo 和 Squeak 中的测试运行器提供的测试覆盖率工具只告诉我哪些方法没有被调用。

我也看过Hapao。首先，我发现[链接的图像](http://objectprofile.com/pier/Products/Hapao/Download)相当旧，但即使将最新版本加载到新图像中，我仍然觉得它为我提供了很多信息，这些信息对回答我的问题没有立即帮助。

在 C 世界中，我习惯了 gcov 和[lcov](http://ltp.sourceforge.net/coverage/lcov.php)之类的东西，在那里我可以立即看到哪些分支没有被覆盖。

在 Pharo 或 Squeak 宇宙中是否有类似的东西可用？阅读[Pharo 邮件列表](http://forum.world.st/Proposal-coverage-tests-td4407271.html)上的最新帖子给我的印象是：“还没有”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:41:47.963

Stefan Reichhart 在他的[硕士论文](http://scg.unibe.ch/archive/masters/Reic07b.pdf)中实施并描述了各种很酷的工具来提高测试质量。工具[Christo](http://www.squeaksource.com/Coverage.html)（在附录 B 中描述）在浏览器中提供了子方法级别的测试覆盖和可视化覆盖。不幸的是，该代码不太可能在最近的 Squeak/Pharo 图像中工作，因为它建立在多年来丢失的库（NewCompiler 和 ByteSurgeon）之上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:59:21.170

我知道 VisualWorks 扩展中有分支级别的代码覆盖（在 Cincom 公共商店中找到）

*   SUnitToo(verage) [http://www.cincomsmalltalk.com/publicRepository/SUnitToo(verage).html](http://www.cincomsmalltalk.com/publicRepository/SUnitToo(verage).html)
*   SUnitToo(lsoverage) 类似地址（我是菜鸟，不能发布超过 2 个链接）
*   也见这个博客[http://www.cincomsmalltalk.com/userblogs/mls/blogView?entry=3346628542](http://www.cincomsmalltalk.com/userblogs/mls/blogView?entry=3346628542)

我不知道许可证，也不知道它是否易于携带...

# delphi - 使用热敏打印机打印 base64 编码的打印命令时出错

> ID：10600156
> 
> 赞同：0
> 
> 时间：2012-05-15T11:55:13.553
> 
> 标签：delphi, delphi-4

我有一个接收打印命令并对其进行解码的应用程序。我将打印命令保存在文本文件中。然后在**字节数组**中读取它。解码后的字符串还包含显示为垃圾字符的图像部分。当我尝试使用**WritePrinter**函数将字节数组发送到打印机时，它返回 False。我试图检查返回的错误代码是**1784**，但找不到有关此错误代码的任何信息以及它可能发生的原因。

请在下面的代码片段中找到：

```
AssignFile (decodedfile, st_path + '\Sample.txt');
reset(decodedfile);
SetLength(buffer, FileSize(decodedfile));
For i := 1 to FileSize(decodedfile) do
    Read(decodedfile, buffer[i - 1]);
CloseFile(decodedfile);
DocInfo.pDocName := pChar('Direct to Printer');
DocInfo.pOutput := Nil;
DocInfo.pDatatype := pChar('RAW');
PrinterName := cmbPrinters.Text;;
if not WinSpool.OpenPrinter(pChar(PrinterName), hPrinter, nil) then begin
   raise exception.create('Printer not found');
end;
If StartDocPrinter(hPrinter, 1, @DocInfo) = 0 then
    Abort;
try
    If not StartPagePrinter(hPrinter) then
        Abort;
    try
        If not WritePrinter(hPrinter, @buffer, Length(buffer), BytesWritten) then begin
            dError := GetLastError;
            ShowMessage(InttoStr(dError));
            Abort;
        end;
    finally
        EndPagePrinter(hPrinter);
    end;
finally
    EndDocPrinter(hPrinter);
end;
WinSpool.ClosePrinter(hPrinter); 
```

如果有人遇到过类似的问题，请告诉我是否遗漏了什么。

笔记：

1.  我已经验证在解码输入打印命令时没有错误。
2.  我使用德尔福 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:34:20.943

它看起来像`buffer`一个动态数组。如果您将变量的声明包含在其余代码中，那将会非常有帮助。但是，我有理由相信它的类型是

```
buffer: array of Byte; 
```

但是你传递`@buffer`给`WritePrinter`. 那是指向数组第一个字节的指针的地址。

您只需将指针传递给第一个字节。像这样：

```
WritePrinter(..., Pointer(buffer), ...); 
```

* * *

顺便说一句，您加载文件的方式有点过时。`TMemoryStream`创建一个并调用它可能会更简单`LoadFromFile`。

```
stream := TMemoryStream.Create;
try
  stream.LoadFromFile(filename);
  ....
  if not WritePrinter(..., stream.Memory, stream.Size, ...) then
    ....
finally
  stream.Free;
end; 
```

# dynamics-crm - 为什么我的 CRM 工作流程会触发无限循环保护？

> ID：10600161
> 
> 赞同：8
> 
> 时间：2012-05-15T11:55:23.603
> 
> 标签：dynamics-crm, dynamics-crm-2011, infinite-loop

# 更新

我应该从一开始就添加 - 这是在 Microsoft Dynamics CRM **2011中**

* * *

我很了解 CRM，但我无法解释我当前部署的行为。

请阅读我的场景大纲，以帮助我了解我的哪些假设/理解是错误的（以及导致此错误的原因）。这与我的预期不一致。

# 基本场景

*   要求要求每 X 分钟调用一次 Web 服务（它将*待处理*项目添加到数据库索引）
*   我选择使用工作流/自定义实体触发器模型（即我有一个自定义实体，它注册了一个 CREATE 插件。该插件执行我的逻辑。伴随的工作流在**“完成”时间 + [超时期限]**到期时启动。到期时，它会创建一个新的触发记录并且工作流结束）。
*   插件逻辑工作得很好。工作流概念在一定程度上可以正常工作，但一段时间后工作流会因失败而停止：

    > 此工作流作业已取消，因为启动它的工作流包含无限循环。更正工作流逻辑并重试。有关工作流逻辑的信息，请参阅帮助。

简而言之 - 标准无限循环检测。我理解这个概念及其存在的原因。

# 具体部署

首先，我认为在这种情况下忽略插件代码的内容对我们来说是相当安全的。它工作正常，它是原子的，几乎不涉及 CRM（需要明确的是，它是一个事件前插件，它运行远程 Web 服务，等待响应，然后在通过之前在我的触发器记录上设置“完成时间”日期/时间属性目标实体回到管道中）。只要创建了触发器记录，此代码就会运行并执行应有的操作。

打折插件的内容后，在实体的预创建步骤中注册插件时可能存在我不喜欢的问题......

这样就剩下工作流程本身了。这是一个简单的。它是这样运行的：

1.  在创建新的触发器实体时...
2.  它的超时时间为 Trigger.new_completedon + 15 分钟
3.  在超时时，它会创建一个新的触发器记录（没有“完成”值 - 这是由插件设置的记住）
4.  仅此而已-没有明确的“结束工作流程”（尽管我现在刚刚添加了一个并将其设置为测试...）

有了这个设置，我手动创建了一个新的触发器记录，这个过程很好地付诸行动。前滚 1 小时 58 分钟（基于我运行的最后一个周期 - 记住我的插件代码可能需要一分钟才能完成运行），在 7 个成功执行周期（即创建和完成新的工作流作业）之后，第 8 个失败并出现上述错误。

# 我已经知道的（纠正我错的地方）

[默认情况下，递归深度设置为 8](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iexecutioncontext.depth.aspx)。如果工作流/插件调用自身 8 次，则检测到无限循环。

[递归深度每隔一小时](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iexecutioncontext.depth.aspx)（[或 10 分钟 - 请参阅链接博客中的“警告”](http://gonzaloruizcrm.blogspot.co.uk/2011/05/quite-often-we-have-business-process.html)？）

[递归深度设置只能通过 PowerShell](http://blog.dorrekens.com/index.php/list/137-mscrm-infinite-loop-for-plugins)或 SDK 代码在本地部署中使用*部署*[Web 服务](http://msdn.microsoft.com/en-us/library/gg328063.aspx) 进行设置（[通过 Set-CrmSetting Cmdlet](http://msdn.microsoft.com/en-us/library/gg328563.aspx)）

 *# 我不想听的（请）

**“更改递归深度设置”**

我无法更改部署递归深度设置，因为这不是在线场景中的选项 - 最终我也将部署到 CRM Online。

"**增加工作流的超时时间**"

这也不是一个选项 - 重新索引需要每 15 分钟发生一次，最好更快。

# 更新

@Boone 在下面建议递归深度超时在 60 分钟**不活动**后重置，而不是每 60 分钟重置一次。第一个误解就在于此。

在与@alex 讨论时，我建议在通过工作流创建实体和最终生成的工作流之间可能存在一些 CorrelationId 的持久性......嗯。CorrelationId 在插件和工作流以及从该线程假脱机的任何记录中都是相同的。我现在正在寻找将 CorrelationId（或者可能是记录的创建）与实体和工作流分离的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:10:32.660

我怀疑这可以像这样解决。

我建议采用不同的方法：在 CRM 旁边部署一个简单的应用程序并让它*调用*Web 服务，而 Web 服务又可以使用 XRM 端点来更改记录。

**更新**

或者，您可以在插件中的 crm 服务初始化时尝试这样的操作（从我的一个插件中挖掘出来），而不会影响您的工作流程：

```
CrmService service = new CrmService();
//initialize service here, then...

CorrelationToken newtoken = new CorrelationToken();
newtoken.CorrelationId = context.CorrelationId;
newtoken.CorrelationUpdatedTime = context.CorrelationUpdatedTime;

// WILD GUESS: Enforce unlimited depth ?
corToken.Depth = 0; // THIS WAS: context.Depth;

//updating correlation token
service.CorrelationTokenValue = corToken; 
```

我承认我不太记得这件事（代码可以追溯到大约 2 年前），但它可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T12:48:57.610

要进行一小时的“重置”，您必须一小时内没有活动。它不会从原来的 1 小时内重置。因此，由于您每 15 分钟进行一次活动，因此它永远没有机会重置。我不知道任何地方都这么说……但根据我的经验。

在 CRM 4 中，可以创建 CRM 服务（Google[在子管道中创建 CRM 服务](http://social.microsoft.com/Forums/en/crmdevelopment/thread/03f7503b-cbbd-4339-bd14-c051b9afd006)）并重置关联 ID（使用 CorrelationToken.NewToken()）。我在 2011 SDK 中没有看到这么简单的东西。不知道这个技巧是否适用于在线环境。2011在线是否向后兼容CRM 4插件？

您可以尝试的一件事是使用 IExecutionContext.CorrelationId 来清除异步操作（系统作业）表。但根据元数据，我认为可能有用的属性（CorrelationId、CorrelationUpdatedTime、Depth）对更新无效。 *也许*你可以删除行？即使这样也可能无济于事。*

# java - MongoDB 的 Java ORM 开销是多少

> ID：10600162
> 
> 赞同：10
> 
> 时间：2012-05-15T11:55:24.660
> 
> 标签：java, mongodb, orm, morphia, spring-data

为 MongoDB 使用 Java ORM 的开销是多少，或者我们在基本驱动程序级别进行读取或写入更好？

我们将为我们的一项要求添加 Mongo DB。

java -morphia
-spring-data
- [others](http://www.mongodb.org/display/DOCS/Java+Language+Center)有几个 java ORM 映射工具

Morphia 最后一个版本是一年多前发布的，
但 Spring 数据正在积极维护。如果我现在要开始，应该使用哪一个，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T12:02:53.703

使用 ORM 会降低性能，但会加快开发速度。这里有一个权衡。

对于 ORM 工具，Morphia 是最稳定的工具。[在这里](http://www.scalabiliti.com/blog/mongodb_and_morphia_performance)，您可以找到 Morphia 和 Basic Mongo Driver 的性能比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T12:09:08.680

Morphia 似乎是最合适的，因为它具有最多的功能并拥有活跃的社区。请参阅此链接进行比较：[MongoDB 的 Morphia、Mongo4j 和 Spring 数据如何比较？](https://stackoverflow.com/questions/5837135/how-do-morphia-mongo4j-and-spring-data-for-mongodb-compare)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T08:04:38.993

总的来说，这里有很多事情要提到。提出基准非常困难，因为如果不测试 MongoDB 设置，您就无法真正测试性能。因此，几乎可以调整和调整环境以提供所需的结果。

除此之外，您还必须区分读写性能。尤其是写入受`WriteConcern`使用的影响很大。因此，`WriteConcern.NONE`使用`WriteConcern.SAFE`.

是的，在任何 ODM 实现中肯定存在开销，因为 Object <->`DBObject`映射必须通常通过反射检查对象获取和设置值。因此，恕我直言，一个关键点是能够插入您可能希望为性能关键对象提供的自定义手动编码转换器。对于 Spring Data 来说，简单地注册一个自定义`EntityInstantiator`而`new Person(…)`不是让默认的反射魔法可以极大地提高性能。

Spring Data 团队有一个[构建](https://build.springsource.org/browse/SPRINGDATA-MONGODBPERF)设置，一个 OTS MongoDB 实例的构建加权性能，用于针对不同的 s 进行写入，并通过普通驱动程序、存储库抽象进行`WriteConcern`读取。`MongoTemplate`这些数字需要谨慎对待，因为它们有时显示存储库读取数据的速度比模板要快，模板*必须*通过某种方式受到基础设施的影响，因为它几乎是模板之上的一层，但实际上并非如此添加任何缓存。

# android - 使用 VideoView 从内部存储 android 播放视频文件

> ID：10600167
> 
> 赞同：10
> 
> 时间：2012-05-15T11:55:47.427
> 
> 标签：android, media-player, android-videoview

我正在尝试播放存储在 Android 内部存储器中的视频。但是，无论我做什么，它都会返回 -1 错误或 -38 错误。两者似乎都是相当普遍的错误，因此不太容易理解。

我想知道是否可以使用 VideoView 而不是 MediaPlayer 实例来播放本地存储中的视频文件。

我的应用程序中涉及的步骤包括，

1.  从远程 url 下载文件
2.  将文件存储在内部存储中（注意我使用约定来确保它具有全局读取权限。即

    ```
    openFileOutput(file_name, Context.MODE_WORLD_READABLE); 
    ```

3.  稍后从该位置读回媒体文件，并在 videoView 中播放。

    ```
    String filePath = "file://" + getFilesDir()+File.separator+file_name;
    Uri videoUri = Uri.parse(filePath);
    Log.d("Video Player", filePath);
    videoPlayer.setVideoURI(videoUri); 
    ```

我还浏览了 StackOverflow 中的其他链接，这些链接指出我需要实现一个 CustomContentProvider 才能读取这些文件。有没有一种直接的方法可以访问文件 uri 并将其设置为 videoView，而不必求助于创建自定义内容提供程序并使用 mediaPlayer 而不是 videoView。

使用的其他 StackOverflow 参考

1.  [Android - 从应用程序的私人文件夹加载视频](https://stackoverflow.com/questions/9067468/android-load-video-from-private-folder-of-app)
2.  [videoview 可以播放存储在内部存储中的视频吗？](https://stackoverflow.com/questions/3038474/can-a-videoview-play-a-video-stored-on-internal-storage)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-17T23:13:20.433

## 将其复制到外部存储（临时）

我遇到了和你一样的问题，只是在播放之前将文件临时复制到外部存储，然后再删除临时文件。

这是我用来执行此操作的一些示例代码：

```
try {
  // Copy file to temporary file in order to view it.
  temporaryFile = generateTemporaryFile(file.getName());
  FileUtils.copyFile(file, temporaryFile);
  previewVideo(temporaryFile, videoView);

} catch (IOException e) {
  e.printStackTrace();
}

# Helpers

protected File generateTemporaryFile(String filename) throws IOException {
  String tempFileName = "20130318_010530_";

  File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);

  File tempFile = File.createTempFile(
      tempFileName,       /* prefix     "20130318_010530" */
      filename,           /* filename   "video.3gp" */
      storageDir          /* directory  "/data/sdcard/..." */
  );

  return tempFile;
}

protected void previewVideo(File file, VideoView videoView) {
  videoView.setVideoPath(file.getAbsolutePath());

  MediaController mediaController = new MediaController(this);

  videoView.setMediaController(mediaController);

  mediaController.setMediaPlayer(videoView);

  videoView.setVisibility(View.VISIBLE);

  videoView.start();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T12:30:07.173

请试试这个。我已经在此链接上解释了从原始文件夹播放视频的过程：[视频播放器不工作！](https://stackoverflow.com/questions/6438492/video-player-not-workig/6440031#6440031). 在那，如果你修改

```
Uri uri = Uri.parse("android.resource://" + getPackageName() + "/"+R.raw.VideoName); 
```

和

```
Uri uri = Uri.parse(Environment.getExternalStorageDirectory()+"<path to your video>"); 
```

例如：

```
Uri uri = Uri.parse(Environment.getExternalStorageDirectory()+"/dcim/camera/2012-05-15_17-50-39_319.3gp"); 
```

我想会解决你的问题。请记住在清单上授予必要的权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-25T17:21:52.740

这里的游戏有点晚了，但是如果您将[FileProvider](https://developer.android.com/reference/android/support/v4/content/FileProvider.html)添加到您的应用程序，您就可以创建 VideoView 可以使用的 URI。

这实际上非常简单，一旦完成，您就可以访问您的文件，例如：

```
Uri video = FileProvider.getUriForFile(context, context.getPackageName(), new File(myAbsoluteVideoPath));

myVideoView.setVideoURI(video); 
```

这可用于播放您在应用中生成并保存在设备上的视频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-10T07:55:01.580

更改`targetSdkVersion`为 27。

安卓

```
compileSdkVersion 30 
buildToolsVersion "30.0.3"

defaultConfig 
{
    applicationId "com.naved.playonmp3"
    minSdkVersion 18
    targetSdkVersion 27
    versionCode 1
    versionName "1.0"
    testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
} 
```

# android - 如何将颜色从十六进制转换为 RGB

> ID：10600169
> 
> 赞同：5
> 
> 时间：2012-05-15T11:55:56.377
> 
> 标签：android, colors

我在 String.xml 文件中有这样的颜色，我 `<color name="ItemColor1">#ffff992b</color>` 如何将其转换为四个变量

```
float Red;
float Green;
float Blue;
float Alfa; 
```

在 Java 代码中？任何人都可以提供帮助

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-21T20:23:21.847

您还可以使用 Color 类的 [red, green, blue] 函数：

```
 int color = getResources().getColor(R.color.youcolor);
    int r = Color.red(color);
    int g = Color.green(color);
    int b = Color.blue(color); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-15T12:10:13.937

**编辑：** 这已被接受为答案，但也请查看[@johann 的答案](https://stackoverflow.com/a/23793064/1341412)，它会让您和那些阅读您的代码的人不那么困惑。

如果您想了解颜色的基本表示，可以从[这里](https://developer.android.com/reference/android/graphics/Color)开始。

**原答案：**

[`getColor()`](http://developer.android.com/reference/android/content/res/Resources.html#getColor(int))为您提供 ARGB 的颜色`int`。

```
int color = getResources().getColor(R.color.ItemColor1);
float red   = (color >> 16) & 0xFF;
float green = (color >> 8)  & 0xFF;
float blue  = (color)       & 0xFF;
float alpha = (color >> 24) & 0xFF; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T11:58:07.783

请看一下

[如何从java中的十六进制颜色代码获取RGB值](https://stackoverflow.com/questions/7427141/how-to-get-rgb-value-from-hexadecimal-color-code-in-java)

```
int color = Integer.parseInt(myColorString, 16);
int r = (color >> 16) & 0xFF;
int g = (color >> 8) & 0xFF;
int b = (color >> 0) & 0xFF; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-06T10:13:39.837

使用 ContextCompat 更新，因为**getColor 已弃用。**

```
int color = ContextCompat.getColor(mContext, R.color.colorAccent);
float red = (color >> 16) & 0xFF;
float green = (color >> 8) & 0xFF;
float blue = (color) & 0xFF;
float alpha = (color >> 24) & 0xFF; 
```

希望它会有用。

# android - Androidplot图例重叠

> ID：10600178
> 
> 赞同：0
> 
> 时间：2012-05-15T11:56:34.037
> 
> 标签：android, graph, charts, plot, androidplot

我该怎么做才能修复 androidplot 中重叠的图例？

我可以操纵图例的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:39:58.730

您可以使用它来放大图例：

```
myPlot.getLegendWidget().setSize(new SizeMetrics(15, SizeLayoutType.ABSOLUTE, 200, SizeLayoutType.ABSOLUTE)); 
```

15 是高度，200 是宽度。
更改图例位置：

```
myPlot.position(
        myPlot.getLegendWidget(),
            0,
            XLayoutStyle.ABSOLUTE_FROM_RIGHT,
            0,
            YLayoutStyle.ABSOLUTE_FROM_BOTTOM,
            AnchorPosition.RIGHT_BOTTOM); 
```

如果需要，请重新定位域标签：

```
myPlot.position(myPlot.getDomainLabelWidget(),                     
            0,                                    
            XLayoutStyle.ABSOLUTE_FROM_LEFT,       
            15,                                     
            YLayoutStyle.ABSOLUTE_FROM_BOTTOM,     
            AnchorPosition.LEFT_BOTTOM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T09:07:53.380

上述答案中使用的某些方法对我不起作用。我想情况在 4 年内发生了变化。以下代码对我有用。

```
 dynamicPlot.getLegendWidget().setSize(new Size(25, SizeLayoutType.ABSOLUTE, 400, SizeLayoutType.ABSOLUTE));

    dynamicPlot.getLegendWidget().position(0,
            XLayoutStyle.ABSOLUTE_FROM_RIGHT,
            0,
            YLayoutStyle.ABSOLUTE_FROM_BOTTOM,
            AnchorPosition.RIGHT_BOTTOM);

    dynamicPlot.getDomainLabelWidget().position(0,
            XLayoutStyle.ABSOLUTE_FROM_LEFT,
            30,
            YLayoutStyle.ABSOLUTE_FROM_BOTTOM,
            AnchorPosition.LEFT_BOTTOM);` 
```

根据您的需要更改 layoutStyle 和偏移量。

# java - Android/Java - 放大我绘制的画布

> ID：10600182
> 
> 赞同：1
> 
> 时间：2012-05-15T11:57:08.490
> 
> 标签：java, android, camera, zooming, maze

我创建了一个 2D 迷宫，它由 2 组布尔数组组成，指的是我的迷宫的垂直和水平墙。这个迷宫目前是 12 x 12，但我只想显示 5 x 5。

有没有办法将迷宫缩放到用户所在位置的 5 x 5 圆周，然后在每次移动时简单地显示下一个块，因此只显示 5 x 5。

理想情况下，我想坚持把整个东西画出来，然后简单地进行某种鸟瞰视图缩放（这将提高可用性并通常加快应用程序的速度）。

*编辑* 下面是我目前用来绘制迷宫的代码。但是，当我移动用户圈时，下面的代码似乎没有绘制正确的 v 和 hLines。

```
public void onDraw(Canvas canvas) 
{
    canvas.drawRect(0, 0, width, height, background);
    mazeSizeX = 5 + maze.getCurrentX();
    mazeSizeY = 5 + maze.getCurrentY();
    for(int i = maze.getCurrentX(); i < mazeSizeX; i++) 
    {
        for(int j = maze.getCurrentY(); j < mazeSizeY; j++){
            float x = j * totalCellWidth;
            float y = i * totalCellHeight;
            if(j < mazeSizeX -1 && vLines[i][j]) {
                //we'll draw a vertical line
                canvas.drawLine(x + cellWidth,   //start X
                                y,               //start Y
                                x + cellWidth,   //stop X
                                y + cellHeight,  //stop Y
                                line);
            }
            if(i < mazeSizeY -1 && hLines[i][j]) {
            //we'll draw a horizontal line
                canvas.drawLine(x,               //startX 
                                y + cellHeight,  //startY 
                                x + cellWidth,   //stopX 
                                y + cellHeight,  //stopY 
                                line);
            }
        }
    }
} 
```

注意 - mazeSizeX 和 Y 最初设置为 5。任何关于我哪里出错的进一步指导将不胜感激。

编辑 2：请参阅下图以指示用户可能已采取的 3 个不同步骤来帮助进一步解释我遇到的问题。第一个图像是起点，并且已经按原样绘制，但是当我开始移动用户圆圈时，线条周围的绘制不正确。

![3 个不同的用户位置显示 drawLine 问题](../Images/1331c75e0eba1cc9f2a3b37c7787dd7b.png)

最后，请看下面我用来绘制位智墙的当前布尔数组：

```
boolean[][] vLines = new boolean[][]{
                        {true ,false,false,false,true ,false,false},
                        {true ,false,false,true ,false,true ,true },
                        {false,true ,false,false,true ,false,false},
                        {false,true ,true ,false,false,false,true },
                        {true ,false,false,false,true ,true ,false},
                        {false,true ,false,false,true ,false,false},
                        {false,true ,true ,true ,true ,true ,false},
                        {false,false,false,true ,false,false,false}
                     };
boolean[][] hLines = new boolean[][]{
                        {false,false,true ,true ,false,false,true ,false},
                        {false,false,true ,true ,false,true ,false,false},
                        {true ,true ,false,true ,true ,false,true ,true },
                        {false,false,true ,false,true ,true ,false,false},
                        {false,true ,true ,true ,true ,false,true ,true },
                        {true ,false,false,true ,false,false,true ,false},
                        {false,true ,false,false,false,true ,false,true }
                    }; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:26:30.017

我会使用两个变量，`scroll_x`你`scroll_y`在绘制时使用，在移动时修改，这样你的迷宫总是被绘制为 5 x 5，你使用这两个变量来确定你应该绘制地图的哪些部分的偏移量。

此外，如果您愿意，您可以实现`zoom_x`和变量来更改缩放。`zoom_y`

由于您使用的是 onDraw 方法，因此排除了我能想到的“绘制一次并移动地图”的任何可能性。

根据您对问题的描述，这是我目前能给出的最佳答案。

**编辑：**

现在您已经提供了更多信息，下面是为您重新设计的 onDraw：

在下面的函数中，如果迷宫大于 5 x 5 ，我使用`maze.scrollX`和作为滚动偏移。我还添加了属性来定义你想要绘制的大小。如果您位于地图的左上角，则这两个都应设置为零。我自己没有测试过这段代码，所以请告诉我它是如何工作的。`maze.scrollY``drawSize`

请注意，此代码没有错误检查，如果`maze.scrollX`太大，则会导致错误。

```
public void onDraw(Canvas canvas) 
{
    canvas.drawRect(0, 0, width, height, background);
    int drawSizeX = 5;
    int drawSizeY = 5;
    for(int i = 0; i < drawSizeX - 1; i++) 
    {
        for(int j = 0; j < drawSizeY - 1; j++){
            float x = j * totalCellWidth;
            float y = i * totalCellHeight;
            if(vLines[i + maze.scrollX][j + maze.scrollY]) {
                //we'll draw a vertical line
                canvas.drawLine(x + cellWidth,   //start X
                                y,               //start Y
                                x + cellWidth,   //stop X
                                y + cellHeight,  //stop Y
                                line);
            }
            if(hLines[i + maze.scrollX][j + maze.scrollY]) {
            //we'll draw a horizontal line
                canvas.drawLine(x,               //startX 
                                y + cellHeight,  //startY 
                                x + cellWidth,   //stopX 
                                y + cellHeight,  //stopY 
                                line);
            }
        }
    }
} 
```

# asp.net - 网络服务数据集，自定义字段输出

> ID：10600183
> 
> 赞同：0
> 
> 时间：2012-05-15T11:57:30.823
> 
> 标签：asp.net

我有我的网络服务来检索数据，我的问题是我正在使用网格视图来输出数据，并且我从表中获取所有字段我只想要几个，我该怎么做？

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class _Default : System.Web.UI.Page
{

public static DataSet ds;

protected void Page_Load(object sender, EventArgs e)
{
    localhost.Service1 myws = new localhost.Service1();
    ds = myws.GetDataSet();
    GridView1.DataSource = ds;
    GridView1.DataBind();
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:04:50.403

您可以使用每个结果行的 Datagrid 设计器和 dataitem 属性来编辑 Datagrid 以仅显示您想要显示的列...。

单击箭头然后选择编辑列为每个要显示的列添加绑定列，列名必须与数据库中字段的名称相同。

确保将数据网格设置为 AutoGenerate columns = false。

您发出的 html 代码应如下所示：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
        <Columns>
            <asp:BoundField DataField="DatabaseColumn1" /> Where DatabaseColumn1 is the name of the field you wish to display.
            <asp:BoundField DataField="DatabaseColumn2" />
        </Columns>

    </asp:GridView> 
```

# asp.net - 如何使用 c# 在我们的 asp.net 网页类中调用 java 脚本函数？

> ID：10600184
> 
> 赞同：0
> 
> 时间：2012-05-15T11:57:32.910
> 
> 标签：asp.net, c#-4.0

我在我的网站中使用了 jQuery。我的标题中有一个导航栏。当用户单击我的菜单栏中给出的任何链接时。它调用我的 javascript 函数..并出现一个带有表单的对话框。例如，我有一个表格说“添加国家”。当用户单击“添加国家/地区”链接时

一个表单出现在一个对话框中。然后用户将能够以给定的形式添加国家。

现在我的页面中有一个gridview..我在哪里管理我的数据。我的国家/地区表有 3 个列。国家代码、国家名称、描述。我已将国​​家表绑定为该gridview 的sql 数据源。我还在该网格视图中添加了一个 asp 按钮作为模板项。我想要做的是..当用户在我的网格视图中单击特定行的编辑按钮时..我会得到该行的 countryID。我想再次调用那个国家的表格......用户可以在哪里编辑。如何在 c# 代码中调用我的 java 脚本函数，以便能够再次调用该表单？我是一个相对较新的程序员。Anmy 的详细指导将不胜感激。

假设我有：

```
protected void EditSeriesButton(object sender, EventArgs e)
{    
    Button btn = (Button)sender;
    GridViewRow row = (GridViewRow)btn.NamingContainer;
    int countryID =Convert.ToInt32(CountryGridView.DataKeys[row.RowIndex].Value);

    //Here i have got the id of that row. Now i want to call the function of my
    //javascript so that i can call my country form.
    //Just please guide me how to call javascript function here to open my 
    // dialog box.
    //i will do rest of the things.
} 
```

请尽快帮助我！！

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:11:51.257

您可以使用 gridview 的 rowdatabound 事件向该按钮添加 onclick 属性以调用 javascript 函数：

```
protected void CountryGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        int countryID = Convert.ToInt32(CountryGridView.DataKeys[e.Row.RowIndex].Value);
        Button btnButton = (Button)e.Row.FindControl("btnName");
        btnButton.OnClientClick = "return Dosomething('"+countryID+"');";
    }
} 
```

# delphi - 为什么GetType成功时FindType获取不到RTTI？

> ID：10600186
> 
> 赞同：3
> 
> 时间：2012-05-15T11:57:37.830
> 
> 标签：delphi, delphi-xe2, rtti

我正在尝试使用`TRttiContext.FindType(QualifiedTypeName)`. 这是我所拥有的：

```
program MissingRTTI;
{$APPTYPE CONSOLE}
uses System.SysUtils, RTTI, Classes;
type
  TMyClass = class(TObject) end;
var
  rCtx:   TRttiContext;
  rType:  TRttiInstanceType;
begin
  rCtx := TRttiContext.Create();
  rType := rCtx.GetType(TypeInfo(TMyClass)) as TRttiInstanceType;
  if (rType <> nil) then begin
    WriteLn('Type found using TypeInfo');
  end;
  rType := rCtx.FindType(TMyClass.QualifiedClassName) as TRttiInstanceType;
  if (rType <> nil) then begin
    WriteLn('Type found using qualified class name.');
  end;
  ReadLn;
  rCtx.Free();
end. 
```

不幸的是，`rCtx.GetType`似乎只能找到所需的类型。（我还尝试使用 GetTypes 列出所有类型。所需的类型不会出现在结果数组中。）有人知道如何强制编译器为这种类型发出 RTTI 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:41:07.900

您对该[`FindType`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiContext.FindType)方法的调用不会返回 Rtti 信息，因为此函数 `works only for public types`。因此，如果您检查该[`rType.IsPublicType`](http://docwiki.embarcadero.com/VCL/2010/en/Rtti.TRttiType.IsPublicType)属性，则返回的值为 false 。

公共类型必须在单元的接口部分中声明（才能被识别为公共）。因此，如果您将`TMyClass`类定义移动到单元的接口部分，您将能够`FindType`毫无问题地使用。

# makefile - 生成文件：语法？=

> ID：10600190
> 
> 赞同：6
> 
> 时间：2012-05-15T11:58:08.467
> 
> 标签：makefile

我有一个来自 Intel 的 makefile，其中有一些“？=”。喜欢

```
COMPILER ?= $(GCC_PATH)g++ 
```

但

```
EXECUTABLE = run 
```

?= 和 = 之间有什么区别，我什么时候必须使用第一个而不是第二个？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T12:03:29.827

Quoth[精美的文档](http://www.gnu.org/software/make/manual/make.html#Setting)：

> 如果您希望仅在尚未设置变量时才将其设置为值，则可以使用速记运算符“？=”而不是“=”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:08:32.350

`?=`用于条件赋值，即如果它尚未定义，则只赋值，否则离开它。在您的示例中，如果您给出`make COMPILER=arm-none-gcc`then`arm-none-gcc`被用作编译器而不是默认的 g++，如果您只是键入，`make`则 g++ 被用作编译器的选项。如果`=`使用，那么 COMPILER 将在遇到分配的时间和地点被分配值。有关 make 文件的更多信息，您可以参考 [为初学者理解 makefile](http://story-of-a-programmer.blogspot.com/2015/04/makefile-tutorial.html)

# vim - NERDTree 和 vim-windows

> ID：10600191
> 
> 赞同：1
> 
> 时间：2012-05-15T11:58:08.893
> 
> 标签：vim, nerdtree

我喜欢在左边有两个或三个带有代码的垂直窗口和一个 NERDTree，等等。我想从这些窗口中的任何一个立即跳转到 NERDTree 窗口，当我选择编辑文件时，我希望该文件显示在我所在的窗口中。

NERDTree 插件的当前状态是否可以实现这些事情？在我看来， :NERDTreeToggle 应该根据帮助执行我要求的第一件事，但无论我如何打开文件，它总是显示在我的 NERDTree 旁边的窗口中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:13:15.483

尝试`:NERDTreeFocus`从任何打开的窗口跳转到 NERDTree 窗口。这是最近添加的，似乎：

[https://github.com/scrooloose/nerdtree/pull/132](https://github.com/scrooloose/nerdtree/pull/132)

# javascript - Opera 和 Internet Explorer 的调试解决方案

> ID：10600196
> 
> 赞同：2
> 
> 时间：2012-05-15T11:58:24.847
> 
> 标签：javascript, jquery, ajax, browser, opera

寻找在 Opera/IE 浏览器下调试我的 jquery 脚本的解决方案或方法。似乎它没有发送 ajax`$.post()`请求或将其发送到不正确的地址或类似的东西。Firefox 没有问题。也许有人知道插件或其他黑客来检查浏览器在 buckground 发送的实际数据（请求标头、答案）？Opera 和 Internet Explorer 上的 Firefox Javascript 控制台在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:14:37.853

Opera 有一个名为 Dragonfly 的开发者工具。只需右键单击页面上的任意位置并选择“检查元素”。这里有控制台、检查器模式、NET 等。你需要的一切。

IE 也有一个开发者工具。您可以通过按 F12 来访问它。

根据您的需要，这些工具应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:12:08.963

我使用 fiddler2，它非常出色，并且可以与所有浏览器一起使用，因为它是一个独立的应用程序。

[Fiddler2 Web 调试代理](http://www.fiddler2.com/fiddler2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:26:05.817

正如 OptimusCrime 所说，IE 中有一个开发人员工具。

值得一提的是，如果该工具被禁用并且`console`您的代码中有任何对 IE 的引用，IE（7 和 8）将引发错误。

# java - 开始监控服务器上 Java 应用程序的运行状况

> ID：10600197
> 
> 赞同：0
> 
> 时间：2012-05-15T11:58:37.313
> 
> 标签：java, jvm, health-monitoring, server-monitoring

我对这个话题完全一无所知，以前从未做过。
从程序员的角度来看，如何开始监控服务器（JBoss/Tomcat）上应用程序的运行状况？
我已经阅读了有关使用一些第三方工具的信息，但我仍然不清楚这一点。我必须编写 JMX Beans 吗？这样任何第三方工具都可以插入应用服务器并获取统计信息。
我是否必须分析我的应用程序或类似的东西？

请提供教程/博客链接，这可以帮助我更多地理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:00:00.240

[http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html](http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html)参见上面 PeterMmm 的链接。

# deployment - play 2.0 中 prod 和 dev 的不同路线

> ID：10600198
> 
> 赞同：0
> 
> 时间：2012-05-15T11:58:37.703
> 
> 标签：deployment, routes, playframework-2.0

我的 Play 2.0 应用程序在开发和生产过程中运行在不同的目录下：

在我们使用开发期间`/`，在生产中它运行为`/crm/`.

**是否可以定义某种“根目录”来玩？**

[本文](https://stackoverflow.com/questions/6699955/playframework-route-file-separate-production-routes-from-dev-routes/6703337#6703337)建议使用`isDev()`这种方法，而[这种](https://stackoverflow.com/questions/4358286/how-to-use-war-context-in-configuration-file-of-play-framework)方法使用配置变量，但似乎路由文件不再允许包含代码：`%{ }`在路由文件中添加 -style 标记会导致编译错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:09:16.283

在 2.0 或 2.0.1 中你不能这样做。

如果您使用主干版本，您可以定义一个属性：

```
application.context="/AwesomePlayApplication" 
```

可以在生产中以通常的方式设置此属性。但这只有在未来的版本中才有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:58:27.257

由于似乎没有其他解决方案，我决定使用一个 shell 脚本来修改部署时的路由文件并为每个路由添加必要的前缀。

# php - PHP：从结果集中填充数组

> ID：10600200
> 
> 赞同：-2
> 
> 时间：2012-05-15T11:58:43.847
> 
> 标签：php, mysql, arrays, resultset

下面显示的代码用于手动填充数组。

```
 <?php
        include_once 'include/DatabaseConnector.php';   
        $data = array(
            array(0,array("111",' EE112',' AA','FT445'),"2004-03-01 10:00","2004-03-01 14:00"),
            array(1,array("111",' BC124',' RYA','FE675'),"2004-03-01 16:00","2004-03-01 18:00"),
            array(2,array("11",' BE225',' FA','AE667'),"2004-03-01 09:00","2004-03-01 10:00"),
            array(3,array("11",' TC828',' BA','FF745'),"2004-03-01 06:00","2004-03-01 08:00")
        );
?> 
```

现在我想从数据库中填充这个数组：

```
$query1="SELECT * FROM MyData;";
$result1=DatabaseConnector::ExecuteQueryArray($query1);

 <?php foreach ($result1 as $row):?>
                            <tr>
                            <td><?php echo $row['resReg']; ?></td>
                            <td><?php echo $row['resTitle']; ?></td>
                            <td><?php echo $row['resAvailability'] ? 'Yes' : 'No';?></td>
                            </tr>
                            <?php endforeach;?> 
```

如何将 result1 的列分配给数组的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:19:53.857

假设你想做这样的事情，我是对的吗：

```
<?php

$query1  = "SELECT name,color1,color2 FROM MyPets;";
$result1 = DatabaseConnector::ExecuteQueryArray($query1);
$petArray = array();

foreach($result1 as $pet):
  $petArray[] = array('name' => $pet['name'],
                      'colors' => array(
                           $pet['color1'],
                           $pet['color2'])
                     );
?> 
```

# jakarta-ee - Glassfish 3.1 @Resource(..) DataSource 在运行时为空

> ID：10600204
> 
> 赞同：2
> 
> 时间：2012-05-15T11:58:51.850
> 
> 标签：jakarta-ee, glassfish-3

我已经在管理控制面板中使用 JNDI 名称设置了 jdbc 资源：jdbc/shop，我用“Ping 连接”检查它并且它成功了

这是bean代码摘录：

```
import javax.annotation.Resource;
import javax.enterprise.context.RequestScoped;
import javax.inject.Named;
import javax.sql.DataSource;

@Named
@RequestScoped
public class IndexBean {

    // from glassfish config:
    // <jdbc-connection-pool datasource-classname="org.postgresql.ds.PGSimpleDataSource" res-type="javax.sql.DataSource" name="ShopPool"
    // <jdbc-resource pool-name="ShopPool" jndi-name="jdbc/shop"

    @Resource(name="jdbc/shop")
    private DataSource db;

    public IndexBean() throws SQLException {
        if(db == null) {
            System.err.println("db is null ?");
        }
    } 
```

所以你猜到了，我经常得到“db is null？” 日志中的条目。有什么建议可以调试/修复这个问题吗？据我了解，JNDI 名称也是 100% 正确的，因为更改它会导致 jndi 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:08:30.983

您的资源在 bean 的构造函数中不可用，因为注入发生*在*构造之后。

使用带有注释的初始化方法`@PostConstruct`来访问您的资源：

```
import javax.annotation.PostConstruct;
..
@PostConstruct
public void init() {
   if(db == null) {
      System.err.println("db is null ?");
   }
} 
```

# jquery - 表单提交 Symfony2 中的 HTTP 状态码

> ID：10600205
> 
> 赞同：0
> 
> 时间：2012-05-15T11:58:52.807
> 
> 标签：jquery, forms, http, symfony

我正在使用 Symfony2 和 twig 开发一个应用程序。我想从模板向控制器提交一个值，该值是使用模板中的 Jquery 函数设置的。我为此使用了一个表单和一个隐藏类型字段。这是我的控制器代码：

```
public function testuaanotatuAction(Request $request)
    { 
             $Interpretatzea = new Interpretatzea();
             $Interpretatzea->setMarkagarriaInterpretatua($Markagarria);
             $form = $this->createFormBuilder($Interpretatzea)
                               ->add('MarkInterpretazioak', 'hidden')
                               ->getForm();

             $Erantzuna = $this->getRequest(); 

             if ($Erantzuna->getMethod() == 'POST') 
             {
               $form->bindRequest($Erantzuna);

             if ($form->isValid()) 
             {
                   return $this->redirect($this->generateUrl('AnotatzaileaAnotatzaileaBundle_FAQ'),
                                   array('proba' => $form->get('MarkInterpretazioak')));
                 }
             }

             //Anotatzeko galderaren interfazeari deitu eta azpimarratu beharreko markagarriaren MarkIdent-a pasatu
             return $this->render('AnotatzaileaAnotatzaileaBundle:Page:AnotatuInterpretazio.html.twig',
                                   array('form' => $form->createView()));

}

public function FAQAction($proba)
{
  return $this->render('AnotatzaileaAnotatzaileaBundle:Page:FAQ.html.twig',array('proba' => $proba));
} 
```

这是模板 AnotatuInterpretazio.html.twig 的一部分，我在其中使用下一个 JQuery 函数将值分配给隐藏字段：

```
 <form action="{{ path('AnotatzaileaAnotatzaileaBundle_testuaanotatu') }}" method="post" {{ form_enctype(form) }} class="erreg">
        {{ form_widget(form) }}

        <input type="submit" value="Egina" />
    </form>

 <!--   <a href="{{ path('AnotatzaileaAnotatzaileaBundle_testuaanotatu') }}"><button id="Egina_Botoia">Egina</button></a><br /> -->

    <script type='text/javascript'>
      $("MatchedTag").click(function () 
                             {
                   $(this).toggleClass("highlight");
                               var Erantzuna = this.id;
                               $('#hiddenval').val('this.id');//Assigning the value   
                         });
          </script> 
```

浏览器显示下一个错误：

```
The HTTP status code "Array" is not valid.
500 Internal Server Error - InvalidArgumentException 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:56:04.193

错误在这里：

```
return $this->redirect(
    $this->generateUrl('AnotatzaileaAnotatzaileaBundle_FAQ'),
    array('proba' => $form->get('MarkInterpretazioak'))
); 
```

我重新格式化它更明显。您将数组作为`render()`（HTTP 状态代码）的第二个参数传递，而不是将其传递给`generateUrl()`.

# odata - OData 自由文本关键字搜索多/所有列

> ID：10600206
> 
> 赞同：1
> 
> 时间：2012-05-15T11:58:57.123
> 
> 标签：odata

有没有办法通过 OData 服务中的多个或所有列执行关键字搜索？

例如，我可以使用以下 URL 查询找到所有带有关键字“James”的标题：

[http://odata.netflix.com/Catalog/Titles](http://odata.netflix.com/Catalog/Titles) ?$filter=substringof('James', Name)

有没有办法创建一些自由文本搜索，它将按所有列或几列搜索，而无需显式添加每个条件，例如：

[http://odata.netflix.com/Catalog/Titles](http://odata.netflix.com/Catalog/Titles) ?$filter=substringof('James', Name) or substringof('James', Synopsis) or substringof('James', WebsiteUrl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:26:32.013

当前，OData 不支持全文搜索或跨多个（未指定）列进行搜索，如上所述。客户端的唯一方法是像在第二个示例中那样显式添加列。

如果您控制服务器，则可以使用服务操作实现类似的操作，并使用底层存储的全文搜索功能（如果有的话）。

# jquery - 如何在 jqGrid 树网格 jqGrid 中的邻接模式和嵌套模式之间切换

> ID：10600208
> 
> 赞同：0
> 
> 时间：2012-05-15T11:59:01.040
> 
> 标签：jquery, jqgrid

有什么方法可以在 jqGrid 树网格的邻接模式和嵌套模式之间切换，即在正常情况下我应该使用邻接模式，但如果用户应用过滤器，我必须显示所有行，这只是可能在嵌套模式下，所以我希望我可以根据某些条件在这两者之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:44:34.430

jqGrid为相邻模式下的 TreeGrid 和嵌套模式下的 TreeGrid创建*不同的附加隐藏列。*因此，要切换到另一种模式，您必须使用[GridUnload](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#add_on_grid_methods)重新创建网格（例如，请参见[答案](https://stackoverflow.com/a/4232168/315935)中[的演示](http://www.ok-soft-gmbh.com/jqGrid/RecreateGrid.htm)）。

我不明白的是为什么你只能在嵌套模式下显示 TreeGrid 的所有行。一般没有这样的限制。这可能只是您的实施问题。

# php - 我们如何将pdf转换为相同分辨率的图像？

> ID：10600209
> 
> 赞同：1
> 
> 时间：2012-05-15T11:59:05.343
> 
> 标签：php, ffmpeg, imagemagick

我有两个不同格式的 pdf，我需要将它们转换成视频，它们都使用不同的脚本，我想要任何通用的脚本。任何建议将不胜感激。

使用以下脚本转换一个 pdf

```
exec("convert -density 150 -quality 100 -resize 800x $pdf_path $temp_images ");
exec("ffmpeg -loop 1 -f image2 -r 0.5 -b 1800 -i $temp_images_wildcard -c:v libx264 -preset slow -tune stillimage -r 5 -t 22 -y $frame_target 2>&1",$output); 
```

使用此脚本的另一个转换

```
exec("convert -geometry 1600x1600 -density 200x200 -quality 100 $pdf_path $temp_images ");
exec("ffmpeg -loop 1 -f image2 -r 0.5 -b 1800 -i $temp_images_wildcard -c:v libx264 -preset slow -tune stillimage -r 5 -t 22 -y $frame_target 2>&1",$output); 
```

谢谢普里特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:38:40.800

这将起作用：

```
exec("convert -geometry 1600x1600 -density 300x300 -quality 100 -resize 1500x $pdf_path $temp_images 2>&1",$output);
exec("ffmpeg -loop 1 -f image2 -r 0.5 -b 1800 -i $temp_images_wildcard -c:v libx264 -preset slow -tune stillimage -r 5 -t 22 -y $frame_target 2>&1",$output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:07:28.357

我会试试这个：

```
exec("convert -density 200 $pdf_path -resize 800x -quality 100 $temp_images "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:49:59.873

这是答案：

```
exec("convert -geometry 1600x1600 -density 300x300 -quality 100 -resize 1500x $pdf_path $temp_images 2>&1",$output);
exec("ffmpeg -loop 1 -f image2 -r 0.5 -b 1800 -i $temp_images_wildcard -c:v libx264 -preset slow -tune stillimage -r 5 -t 22 -y $frame_target 2>&1",$output); 
```

谢谢

# c# - 使用 XMLSerializer 向类成员添加属性

> ID：10600210
> 
> 赞同：0
> 
> 时间：2012-05-15T11:59:05.813
> 
> 标签：c#, xml, wcf, xmlserializer, xml-attribute

我正在尝试编写一个使用 XmlSerialzer 输出 xml 的 WCF 服务。我需要一个特定的 xml 输出，这就是我不使用 DataContract Serialzer 的原因。具体来说，我正在编写一个具有已定义架构等的目录服务 web(csw)。

我一直在尝试先编写类，然后测试输出的是什么 XML。这相当乏味，我可能会切换到 xsd 实用程序。我想知道的是我可以将 xml 属性添加到其他类成员，还是只将那些修饰的 xmlattributes 添加到根元素，即类名？与使用 XDocument 手动编写 CML 相比，似乎存在灵活性问题。每次我需要嵌套元素（不是集合）时，似乎我需要创建一个新类？是对的吗？

我需要的输出xml是：

```
<ows:ContactInfo> 
<ows:OnlineResource 
   xlink:href="mailto:­­enquiry@gis.nottscc.gov.uk­­"/> 
</ows:ContactInfo> 
```

这是我的课：

```
 public class ContactInfo
       {
            [XmlElement] 
            public string OnlineResource = "";        

            [XmlElementAttribute(ElementName = "OnlineResource",Namespace = "http://www.w3.org /1999/xlink")]
            public string href = "mailto:enquiry@gis.nottscc.gov.uk";

         } 
```

输出xml如下：

```
<ows:ContactInfo xlink:href="mailto:enquiry@gis.nottscc.gov.uk">
<ows:OnlineResource>mailto:enquiry@gis.nottscc.gov.uk</ows:OnlineResource>
</ows:ContactInfo> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:33:35.937

您将需要更改您的对象模型以实现这一点......尝试这样的事情......

```
 [XmlType("ContactInfo")]
 public class ContactInfo
 {
    [XmlElement("OnlineResource")]
    public OnlineResource Resource { get; set; }
 }

 [XmlType("OnlineResource")]
 public class OnlineResource
 {
     [XmlAttribute("href")]
     public string href = "mailto:enquiry@gis.nottscc.gov.uk";
 } 
```

输出是...

```
<ContactInfo>
  <OnlineResource href="mailto:enquiry@gis.nottscc.gov.uk" />
</ContactInfo> 
```

自然，您需要调整以获取名称空间等，但这正朝着正确的方向前进……希望对您有所帮助:)

是的..当您嵌套元素时，您将需要一个新类...这有意义吗？原始值如何产生嵌套的值集？

# javascript - 如何在网络技术上制作表单翻转（喜欢卡片翻转效果）

> ID：10600211
> 
> 赞同：4
> 
> 时间：2012-05-15T11:59:08.877
> 
> 标签：javascript, jquery, asp.net, css, ajax

[http://www.dailyliquordeals.net/](http://www.dailyliquordeals.net/)

如何制作这样的卡片翻转效果。

![在此处输入图像描述](../Images/9a5ecedb298ed9deaa68895c7f122da9.png)

注册完成后，它会翻转到另一边，具有翻转过渡效果。

![在此处输入图像描述](../Images/c1cd44e57875d8f3906cf5c84964de2b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T12:01:41.200

一种选择是使用**翻转！**jQuery插件：

*   [http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

它似乎非常好用且易于使用。它与几乎所有浏览器兼容：Firefox、Chrome/Chromium、Opera、Safari 甚至 IE (6,7,8)。

* * *

另一种选择是**Flippy** JQuery 插件：

*   [http://blog.guilhemmarty.com/flippy/](http://blog.guilhemmarty.com/flippy/)

它也很好而且相当灵活。但是它用于`canvas`制作效果，并且与 IE 6-8 不兼容。您应该使用额外的`excanvas.js`脚本使其在 IE 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:03:46.533

本站使用 jQuery Mobile 过渡效果。

你可以在这里看到它们，包括翻转：

[http://jquerymobile.com/test/docs/pages/page-transitions.html](http://jquerymobile.com/test/docs/pages/page-transitions.html)

[http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-transitions.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-transitions.html)

jQuery Flip 很好，但实际上只翻转背景而不是上面的所有内容。

您还可以查看 jQTouch： [http ://www.jqtouch.com/](http://www.jqtouch.com/)

# ruby-on-rails - Ruby On Rails - 服务器启动时使用无限循环

> ID：10600213
> 
> 赞同：0
> 
> 时间：2012-05-15T11:59:17.310
> 
> 标签：ruby-on-rails, function, loops, feedzirra

我正在使用 feedzirra 从网站检索 rss 提要。首先，我使用一个循环来检查 rss 提要是否已更新。我已经通过终端成功地做到了这一点。但是如果我想在启动服务器的时候自动开启这个功能。我该如何做到这一点？

```
FeedEntry.update_feed_loop("URL") 
```

这就是我正在调用的函数，它在 feed_entry.rb 中表示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:31:57.150

您可以使用 Clockwork gem 以特定的时间间隔运行...或 Clockwork + DelayedJob... 或 rake + cron... 有几种组合。

您应该将循环视为需要以特定时间间隔运行和退出的后台任务，而不是一直不断地访问 RSS 服务器。如果您要创建一个“无限循环”，这将占用您的 Rails 进程，因此除了该一项任务之外它无法执行任何其他操作。

# iphone - 如何从 UIButton 调用的另一个函数访问动态 UIView

> ID：10600214
> 
> 赞同：0
> 
> 时间：2012-05-15T11:59:24.883
> 
> 标签：iphone, objective-c, ios, xcode

我有这段代码，我想要它做的是在屏幕上创建几个 UIView，上面有一个按钮，当你点击位于 UIView 顶部的按钮时，UIView 它self 将执行动画并翻转到另一侧，当您单击 UIView 另一侧的按钮时，它会再次翻转。

所以我动态地创建了我的 UIView，但是我有一个问题，按钮正在执行操作，但是视图不会执行动画，因为我不知道如何访问特定的 UIView。

我该怎么做？

```
-(void)viewDidLoad
{
    arrImages = [NSMutableArray arrayWithObjects:[UIImage imageNamed:@"image001.jpg"],[UIImage imageNamed:@"image002.jpg"],[UIImage imageNamed:@"image003.jpg"],[UIImage imageNamed:@"image004.png"],[UIImage imageNamed:@"image005.JPG"],[UIImage imageNamed:@"image006.jpg"],[UIImage imageNamed:@"image007.jpeg"],[UIImage imageNamed:@"image008.jpg"],[UIImage imageNamed:@"image009.jpg"],[UIImage imageNamed:@"image010.png"],[UIImage imageNamed:@"image001.jpg"],[UIImage imageNamed:@"image002.jpg"],[UIImage imageNamed:@"image003.jpg"],[UIImage imageNamed:@"image004.png"],[UIImage imageNamed:@"image005.JPG"],[UIImage imageNamed:@"image006.jpg"],[UIImage imageNamed:@"image007.jpeg"],[UIImage imageNamed:@"image008.jpg"],[UIImage imageNamed:@"image009.jpg"],[UIImage imageNamed:@"image010.png"], nil];

    x = 0;
    btnFrameX = 18;
    btnFrameY = 20;

    for (int i = 0; i < [arrImages count]; i++)
    {
        if (btnFrameX <= 237)
        {
            //  Create views of cards

            UIView * first = [[UIView alloc]initWithFrame:CGRectMake(btnFrameX, btnFrameY, 65, 65)];
            UIView * secod = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 65, 65)];
            UIView * third = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 65, 65)];

            first.tag = [[NSString stringWithFormat:@"1%i",i]intValue];
            secod.tag = [[NSString stringWithFormat:@"2%i",i]intValue];
            third.tag = [[NSString stringWithFormat:@"3%i",i]intValue];

            NSLog(@"1%i",i);
            NSLog(@"2%i",i);
            NSLog(@"3%i",i);

            UILabel * cardLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 65, 65)];
            cardLabel.text = [NSString stringWithFormat:@"%i",i+1];

            UIButton * cardBtn = [UIButton buttonWithType:UIButtonTypeCustom];
            [cardBtn setFrame:CGRectMake(0, 0, 65, 65)];
            [cardBtn setTitle:[NSString stringWithFormat:@"%i",i] forState:UIControlStateNormal];
            [cardBtn setImage:[arrImages objectAtIndex:i] forState:UIControlStateNormal];

            [cardBtn addTarget:self action:@selector(flipView:) forControlEvents:UIControlEventTouchUpInside];

            [secod addSubview:cardLabel];
            [third addSubview:cardBtn];
            [first addSubview:secod];
            [first addSubview:third];
            [self.view addSubview:first];

            btnFrameX = btnFrameX + 73;
        }
        if (btnFrameX > 237)
        {
            btnFrameX = 18;
            btnFrameY = btnFrameY + 73;
        }
    }

-(IBAction) flipView:(id)sender
{
    [UIView beginAnimations:nil context:nil];
    // Should hide the one that you clicked on and show the other one.
    [self showOtherView];
    // flipping the mainview (first), he's the one that the other 2 UIViews (second and third) attached on.
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:first cache:YES];
    [UIView setAnimationDuration:1.0f];
    [UIView setAnimationDelegate:self];
    [UIView commitAnimations];
}

-(void) showOtherView
{    
    if (x == 0)
    {
        x = 1;
        second.hidden = NO;
        third.hidden = YES;
    }
    else
    {
        x = 0;
        second.hidden = YES;
        third.hidden = NO;
    }
} 
```

我希望我能很好地解释自己，如果没有，请问我，我会回答。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:12:01.237

您的按钮是您想要访问的 UIView 的子视图，不是吗？

如果是这样，这很简单：为您的按钮设置一个选择器和目标，

```
[cardBtn addTarget:self action:@selector(flipView:) forControlEvents:UIControlEventTouchUpInside]; 
```

声明你的功能，

```
-(void)flipView:(UIButton*)sender; 
```

单击的按钮将在 sender 参数中。所以 ：

```
-(void)flipView:(UIButton*)sender {
    UIView * reachedView = [sender superview];
    /* make what you want with the reached view ! */
} 
```

编辑 ：

在您的描述中，您需要两个按钮：每侧一个。第一面是视图A，第二面是视图B。viewA & viewB 属于 mainView。

```
UIButton btA = ...
UIButton btB = ...
[btA addTarget:self action:@selector(flipView:) forControlEvents:UIControlEventTouchUpInside];
[btB addTarget:self action:@selector(flipView:) forControlEvents:UIControlEventTouchUpInside];
[viewA addSubview:btA];
[viewB addSubview:btB];
[mainView addSubview:viewA];
[mainView addSubview:viewB]; 
```

现在在翻转视图中：

```
-(void)flipView:(UIButton*)sender {
    UIView * mainView = [[sender superview] superview]; // the first for viewA or B, the second for mainView...
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:mainView cache:YES];
    [mainView exchangeSubviewAtIndex:0 withSubviewAtIndex:1];
    [UIView commitAnimations];
} 
```

它与您的问题相对应吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:30:35.097

声明一个属性 UIView。

```
UIView *flippedVew;
//set property. 
```

在视图上单击按钮时，**设置属性**和按钮操作（执行动画的位置）在该视图上执行动画。同样，当单击另一个视图上的按钮时，将属性设置为该视图。

# c++ - 编译器不知道我的包含文件

> ID：10600217
> 
> 赞同：1
> 
> 时间：2012-05-15T11:59:49.643
> 
> 标签：c++, compilation, include, g++

我正在使用 g++ 和 jamroot 文件 (jamroot.jam) 编译我的项目。我不知道为什么它不知道我的文件，即使它包含正确的目录。

这是输出：

```
"g++"  -ftemplate-depth-128 -O0 -fno-inline -Wall -g -fPIC  -DLINUX  \
  -I"/home/oumaya/docs/UT_Cpp_Test/main/inc" \
  -I"/home/oumaya/docs/UT_Cpp_Test/main/inc/include/cppunit" \
  -I"/home/oumaya/docs/UT_Cpp_Test/main/inc/include/cppunit/ui/qt" \
  -I"/usr/share/boost" -c -o "bin/build/gcc-4.6/debug/src/main.o" "src/main.cpp"

In file included from src/main.cpp:6:0:
/home/oumaya/docs/UT_Cpp_Test/main/inc/UT_Instrument_Test.hpp:7:45: fatal error:
  cppunit/extensions/HelperMacros.h :  No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:01:46.187

您缺少一个：

```
-I/home/oumaya/docs/UT_Cpp_Test/main/inc/include/ 
```

原因是您包含这样的内容：

```
#include "cppunit/extensions/HelperMacros.h" 
```

完整路径是

```
/home/oumaya/docs/UT_Cpp_Test/main/inc/include/cppunit/extensions/HelperMacros.h 
```

因此你应该告诉编译的相对路径`cppunit/extensions/HelperMacros.h`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:02:53.420

您正在`[...]inc/include/cppunit`为输入文件指定路径，但将标头称为这`cunit/extensions/HelperMacros.h` 意味着编译器期望路径相对于. 您只需要指定包含目录（或将标头路径更改为）`[...]inc/include/cppunit``[...]inc/include/cppunit/cunit/extensions/HelperMacros.h``[...]inc/include``extensions/HelperMacros.h`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T12:04:31.690

比较：

你的命令 -

```
-I"/home/oumaya/docs/UT_Cpp_Test/main/inc/include/cppunit" 
```

错误信息：

```
fatal error: cppunit/extensions/HelperMacros.h : No such file or directory 
```

即，“包含根目录”应位于，而不是“cppunit”子目录（指令`/home/oumaya/docs/UT_Cpp_Test/main/inc/include`中显然已说明）。`#include`

或者，您的`#include`陈述是错误的，不应该`cppunit/`在`extensions/HelperMacros.h`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T12:02:18.870

它根本找不到文件。您正在尝试包含`cppunit/extensions/HelperMacros.h`，因此请检查`-I`构建输出中的所有包含路径，看看它们是否连接到该文件的有效路径。他们不会因为您缺少目录。

下一步是完成 cppunit 安装并找到您的文件：

```
find <cppunit root> -name HelperMacros.h 
```

当你找到一个以你的包含结尾的，去掉那个位，并在你的编译命令`cppunit/extensions/HelperMacros.h`中使用路径的第一部分作为额外的包含路径。`-I`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-18T02:40:37.443

运行 Ubuntu 时，我发现你可以简单地安装正确的东西

对于 cppunit/extensions/HelperMacros.h 或 cppunit/BriefTestProgressListener.h：

```
sudo apt-get install libcppunit-dev 
```

# android - 如何在低于 3.0 的 android 版本中使用 setX() 和 setY() 方法

> ID：10600218
> 
> 赞同：2
> 
> 时间：2012-05-15T11:59:58.033
> 
> 标签：android, android-layout

我想在 2.1 版本中使用 android setX() 和 setY() 方法，但这不适用此方法仅适用于大于 3.0 的 android 版本请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T08:51:25.077

@Kirtika 是的，这些方法仅适用于 > 3.0 版本，但如果你想实现这个需要，所以你需要设置布局参数，我已经实现了这个东西。如果发现应用程序版本> 3.0，则在您的应用程序中检查版本，然后访问现有方法，否则设置参数

# javascript - 我们如何通过 jquery 访问 google 字体

> ID：10600221
> 
> 赞同：1
> 
> 时间：2012-05-15T12:00:05.737
> 
> 标签：javascript, jquery

> **可能重复：**
> [从 google font api 获取所有可用字体](https://stackoverflow.com/questions/5065542/get-all-available-fonts-from-google-font-api)

我们如何通过 jquery 或 javascript 检索 Google Web Fonts 服务提供的 Web 字体的动态列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:06:12.143

您可以在此处尝试使用`Fontselect jQuery Plugin`：

[https://github.com/tommoor/fontselect-jquery-plugin](https://github.com/tommoor/fontselect-jquery-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:09:42.283

转到：[https ://www.googleapis.com/webfonts/v1/webfonts](https://www.googleapis.com/webfonts/v1/webfonts)

简单的。

# jquery - 如何通过jquery异步加载一些js脚本？

> ID：10600222
> 
> 赞同：1
> 
> 时间：2012-05-15T12:00:11.323
> 
> 标签：jquery

有一个javascript文件[http://v2.jiathis.com/code_mini/jia.js](http://v2.jiathis.com/code_mini/jia.js)，为了速度好，我想异步加载，jquery怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:01:39.373

.getScript() 可以为您提供帮助[Getscript](http://api.jquery.com/jQuery.getScript/)：使用 GET HTTP 请求从服务器加载 JavaScript 文件，然后执行它。

该脚本在全局上下文中执行，因此它可以引用其他变量并使用 jQuery 函数。包含的脚本可能会对当前页面产生一些影响

```
$.getScript("yourJavascriptUrl", function(data, textStatus, jqxhr) {
   console.log(data); //data returned
   console.log(textStatus); //success
   console.log(jqxhr.status); //200
   console.log('Load was performed.');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:02:36.950

采用 ：

```
$.ajax({
  url: http://v2.jiathis.com/code_mini/jia.js,
  dataType: "script",
  success: success
}); 
```

或者

获取脚本（）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:05:19.727

你试过吗

```
$.ajax({
  type: "GET",
  url: "http://v2.jiathis.com/code_mini/jia.js",
  dataType: "script"
}); 
```

> 如果指定了 html，则检索数据中的任何嵌入 JavaScript 都会在 HTML 作为字符串返回之前执行。同样，脚本将执行从服务器拉回的 JavaScript，然后什么也不返回。

# php - array_chunk 的对面

> ID：10600227
> 
> 赞同：9
> 
> 时间：2012-05-15T12:00:40.497
> 
> 标签：php, arrays

`array_chunk`使用块大小将数组拆分为多个数组以进行切割。

如果我有一组值数组，而我只想要一个大值数组怎么办？

我可以使用`array_merge`，但这需要我枚举所有子数组，其中可能有一个可变编号。

目前，我的解决方案是：

```
foreach($input as $tmp) {foreach($tmp as $val) {
    ...
}} 
```

但这有点混乱，只有因为我想使用这些值才有效。如果我想将数组存储在某个地方怎么办？

编辑：输入来自一组`<select multiple>`框，用于从多个类别中选择项目。每个项目都有一个全局唯一的（项目之间）ID，所以我只想将输入组合成一个数组并运行它。

输入可能如下所示：

```
[[4,39,110],[9,54,854,3312,66950],[3]] 
```

预期输出：

```
[4,39,110,9,54,854,3312,66950,3] 
```

或者：

```
[3,4,9,29,54,110,854,3312,66950] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-26T10:23:50.103

虽然 PHP 没有内置方法来展平数组，但您可以使用`array_reduce`and来实现相同的目的`array_merge`。像这样：

```
$newArray = array_reduce($array, function ($carry, $item) {
    return array_merge($carry, $item);
}, []); 
```

这应该作为 的逆运算`array_chunk`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-12T13:19:39.927

代码：

```
$array = [[4,39,110], [9,54,854,3312,66950], [3]];
$array = call_user_func_array('array_merge', $array);

print_r($array); 
```

结果：

```
Array
(
    [0] => 4
    [1] => 39
    [2] => 110
    [3] => 9
    [4] => 54
    [5] => 854
    [6] => 3312
    [7] => 66950
    [8] => 3
) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T12:18:35.400

从以下 PHP 文档中提取`array_values`：

```
/** 
 * Flattens an array, or returns FALSE on fail. 
 */ 
function array_flatten($array) { 
  if (!is_array($array)) { 
    return FALSE; 
  } 
  $result = array(); 
  foreach ($array as $key => $value) { 
    if (is_array($value)) { 
      $result = array_merge($result, array_flatten($value)); 
    } 
    else { 
      $result[$key] = $value; 
    } 
  } 
  return $result; 
} 
```

PHP 没有本地方法来展平数组.. 所以你去。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T12:26:30.610

对不起，如果我错了，但如果我们在多个选择组中采用相同的名称，那么它将产生一个预期的数组。

```
<?php
echo '<pre>';
print_r($_POST['cat']);
?>
<form method="post">
<select name="cat[]" multiple="multiple">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select>

<select name="cat[]" multiple="multiple">
<option value="22">2</option>
<option value="33">3</option>
</select>

<select name="cat[]" multiple="multiple">
<option value="111">111</option>
<option value="222">222</option>
<option value="333">333</option>
<option value="444">444</option>
</select>
<input name="" type="submit" />
</form> 
```

输出：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 22
    [5] => 33
    [6] => 222
) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-14T16:11:57.917

在这种情况下，将数组转换为参数列表的“...”运算符非常方便（[https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-列表](https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list)）。

的倒数`array_chunk()`可能是这样的：

```
array_merge(...$chunks); 
```

例子：

```
print_r(array_merge(...[[0,1,2],[3,4,5]])); 
```

输出：

```
Array
(
   [0] => 0
   [1] => 1
   [2] => 2
   [3] => 3
   [4] => 4
   [5] => 5
) 
```

# python - 输出网站源代码的python套接字客户端，为什么不起作用？

> ID：10600235
> 
> 赞同：2
> 
> 时间：2012-05-15T12:01:12.443
> 
> 标签：python, sockets, networking, client

以下代码不输出任何内容（为什么？）。

```
#!/usr/bin/python           
import socket             

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)                 

s.connect(("www.python.org" , 80))
print s.recv(4096)
s.close() 
```

为了输出 python 网站的源代码，我必须进行哪些更改，就像您`view source`在浏览器中看到的那样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T12:03:16.137

[HTTP](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)是[请求/响应协议](https://en.wikipedia.org/wiki/Request-response)。您没有发送任何请求，因此您没有得到任何响应。

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)                 

s.connect(("www.python.org" , 80))
s.sendall("GET /\r\n") # you're missing this line
print s.recv(4096)
s.close() 
```

当然，这将执行最原始的 HTTP/1.0 请求，而无需处理 HTTP 错误、HTTP 重定向等。我**不**建议将它用于实际使用，而只是作为练习来熟悉套接字编程和 HTTP。

对于 HTTP，Python 提供了一些内置模块：[httplib](https://docs.python.org/library/httplib.html)（低级）、[urllib](https://docs.python.org/library/urllib.html)和[urllib2](https://docs.python.org/library/urllib2.html)（高级）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T12:21:25.293

除非您在请求中使用完整的 URL，否则您将获得重定向 (302)。

试试这个：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)                 
s.connect(("www.python.org" , 80))
s.sendall("GET http://www.python.org HTTP/1.0\n\n")
print s.recv(4096)
s.close() 
```

当然，如果您只想要 URL 的内容，这要简单得多。:)

```
print urllib2.urlopen('http://www.python.org').read() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-25T18:46:48.920

我得到了html

```
 def steal_html():
        url='https://some_website.org'
        with open('index.html', 'w') as FILE:
            html = requests.get(url).text
            FILE.write(html) 
```

# java - 使用日历更新时间

> ID：10600247
> 
> 赞同：2
> 
> 时间：2012-05-15T12:02:12.353
> 
> 标签：java, android, time

我有一个简单的应用程序来显示系统时间。

每次我运行它时，只在同一时间显示和记录。与应用程序首次启动的时间相同。

我无法弄清楚为什么它第一次同时显示并且不更新。

代码很简单：

```
import java.util.Calendar;
import java.util.Date;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int y,m,d;

        Date date= new Date();
        Calendar c = Calendar.getInstance();

        c.setTime(date);

        y = c.get(Calendar.YEAR);
        m = c.get(Calendar.MONTH);
        d = c.get(Calendar.DAY_OF_MONTH);

        Log.d("AAAAA",y + ":" +m+ ":" +d);

        TextView textTime = (TextView) findViewById(R.id.textView1);
        textTime.setText(y + ":" +m+ ":" +d);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:07:40.023

```
 //date instance is created with current system time
    Date date= new Date();
    Calendar c = Calendar.getInstance();
    //you have set that date time into calendar instance
    c.setTime(date); 
```

因此，现在如果您不更改日历实例的数据（日期），只要它还活着，它将保持设置的相同值

# android - android列出所有具有图像的文件夹

> ID：10600248
> 
> 赞同：0
> 
> 时间：2012-05-15T12:02:14.570
> 
> 标签：android, image, file-browser

作为我的应用程序的一部分，我需要有只列出特定文件夹的文件浏览器。例如，仅在路径中列出图像文件在其任何级别的任何子文件夹中的那些文件夹。

我可以使用递归来做到这一点。但是会影响性能。特别是在顶层查找文件夹需要许多递归调用。有没有更好的方法来做到这一点

请在下面查看我的代码

```
public List<GeneralFileItem> getGridItemsList(String root) {
    List<GeneralFileItem> gridItemsList = new ArrayList<GeneralFileItem>();
    File file;
    file = new File(root);
    File list[] = file.listFiles();
    if (list.length == 0) {
        return null;
    }
    for (int i = 0; i < list.length; i++) {
        GeneralFileItem item = new GeneralFileItem();
        File temp_file = new File(file.getAbsolutePath(), list[i].getName());
        if (hasPhoto(temp_file)) {
            item.setPath(file.getAbsolutePath() + "/" + list[i].getName());
            item.setName(list[i].getName());
            if (temp_file.listFiles() != null) {
                item.setType(GeneralFileItem.DIRECTORY_TYPE);
            } else {
                item.setType(GeneralFileItem.FILE_TYPE);
            }
            gridItemsList.add(item);
            //Log.i(TAG,"added"+list[i].getName());
        }
    }
    return gridItemsList;

}

private boolean hasPhoto(File temp_file) {
    //Log.i(TAG,temp_file.getName());

    if (temp_file.listFiles() == null) {
        if (temp_file.getName().toUpperCase().endsWith(("JPG"))) {
            //Log.i(TAG,temp_file.getName()+ "is a photo");
            return true;
        } else
            return false;

    }
    else{
        File list[] = temp_file.listFiles();

        for (int i = 0; i < list.length; i++) {
            if(hasPhoto(list[i]))
                return true;
        }

    }

    return false;
} 
```

我想知道除了递归搜索之外是否还有其他方法。Android中的文件是如何维护的。我知道支持各种文件系统，并且它因硬件制造商而异。我想知道是否有一种方法，例如是否有 FileTable 可以从中获取所有 .jpg 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:00:04.843

使用[FilenameFilter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilenameFilter.html)搜索特定类型的文件。

目前您只检查当前目录。但是，如果您希望递归搜索，则必须检查找到的每个文件是否是目录

你的算法会是这样的

```
File file;
file = new File(root);
File list[] = file.listFiles();
if (list.length == 0) {
    return null;
}
for (int i = 0; i < list.length; i++) {
     if(list[i].isDirectory()){
        //Then go inside it to search for specific file 
        File subList[] = list[i].listFiles();
        //search for jpg..
        }else if("is this jpg"){
         //Add to list
        }
     } 
```

为了简化这一点，您可以根据您的要求将它们分成方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T16:39:18.043

这是我想出的东西！它就像一个魅力！

首先你必须创建一个文件，这个是 SD 卡的根目录

```
File = rootPrimary = new File(Environment.getExternalStorageDirectory()); 
```

比您必须将所有文件列出到 File []

```
File[] fileArray = rootDirectory.listFiles(); 
```

然后您创建一个 ArrayList 并将其设置为等于我创建的方法并将 File[] 传入。

```
ArrayList<File> alFolders = new ArrayList<File>();
        alFolder = putImgFldr(fileArray); 
```

此方法将添加所有包含扩展名为 .jpg 和 .png 的图像的目录。

```
private ArrayList<File> putImgFldr(File[] fileArray) {
        // TODO Auto-generated method stub
        ArrayList<File> a = new ArrayList<File>();

        for (int i = 0; i < fileArray.length; i++) {
            if (fileArray[i].isDirectory()) {
                //if file is folder pass that file trough this method
                a.addAll(putImgFldr(fileArray[i].listFiles()));
            } else if (fileArray[i].getAbsolutePath().endsWith(".jpg") || fileArray[i].getAbsolutePath().endsWith(".png")) {
                // if file is img ad it's parent, folder to ArrayList 
                a.add(fileArray[i].getParentFile());
                // this finishes the file searching 
                // because the image has allready bean found
                i = fileArray.length + 1;
            }
        }
        return a;
    } 
```

现在如果需要，您可以将另一个文件 [] 添加到 alFolders

```
alFolders.addAll(putImgFldr(secFileArray)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-04T00:37:25.873

另一个使用 Java 8 列出文件和目录的示例`filter`。例如，这里我只使用 jpeg 图像

```
public static void main(String[] args) {

System.out.println("Files!!");
        try {
            Files.walk(Paths.get("."))
                    .filter(Files::isRegularFile)
                    .filter(c ->
                            c.getFileName().toString().substring(c.getFileName().toString().length()-4).contains(".jpg")
                            ||
                            c.getFileName().toString().substring(c.getFileName().toString().length()-5).contains(".jpeg")
                    )
                    .forEach(System.out::println);

        } catch (IOException e) {
        System.out.println("No jpeg or jpg files");
        }

        System.out.println("\nDirectories!!\n");
        try {
            Files.walk(Paths.get("."))
                    .filter(Files::isDirectory)
                    .forEach(System.out::println);

        } catch (IOException e) {
            System.out.println("No Jpeg files");
        }
} 
```

# c - 是否有必要调用 pthread_join()

> ID：10600250
> 
> 赞同：21
> 
> 时间：2012-05-15T12:02:19.977
> 
> 标签：c, multithreading, pthreads

我从 main() 创建了 100 多个线程，所以我只想知道`pthread_join()`在退出 main() 之前是否需要调用。另外，我不需要这些线程生成的数据，基本上，所有线程都在做一些独立于 main() 和其他线程的工作。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-15T12:11:06.650

`pthread_join`做两件事：

1.  等待线程完成。
2.  清理与线程关联的所有资源。

如果您在没有加入的情况下退出进程，那么 (2) 将由操作系统为您完成（尽管它不会执行线程取消清理，只是从轨道中删除线程），并且 (1) 不会。所以你是否需要打电话`pthread_join`取决于你是否需要（1）发生。

如果您不需要线程运行，那么正如其他人所说，您也可以将其分离。无法加入分离的线程（因此您不能等待其完成），但如果它完成，它的资源会自动释放。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-09T09:40:45.767

是的，如果线程是可附加的，那么 pthread_join 是必须的，否则它会创建一个僵尸线程。

同意上面的答案，只是分享 pthread_join 手册页中的注释。

笔记

```
 After a successful call to pthread_join(), the caller is guaranteed that the target thread has terminated.

   Joining with a thread that has previously been joined results in undefined behavior.

   Failure to join with a thread that is joinable (i.e., one that is not detached), produces a "zombie thread".  Avoid doing this, since each zombie thread consumes some  system  resources,  and  when
   enough zombie threads have accumulated, it will no longer be possible to create new threads (or processes). 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T12:05:55.640

当你退出时，你不需要加入，因为所有其他线程和资源都会被自动清理。这假设您实际上希望在`main`退出时杀死所有线程。

如果您不需要加入线程，您可以`pthread_attr_setdetachstate`在创建线程之前使用属性将其创建为“分离”线程。分离的线程无法连接，但它们也不*需要*连接。

所以，

1.  如果您希望所有线程在程序完成之前完成，那么从主线程加入即可完成这项工作。

2.  作为替代方案，您可以将线程创建为分离的，并`main`在所有线程退出后返回，使用信号量或互斥+条件变量进行协调。

3.  如果您不需要完成所有线程，只需从 main 返回。所有其他线程将被销毁。您还可以将线程创建为分离线程，这可以减少资源消耗。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-08T17:01:31.597

默认情况下，pthreads 库中的线程被创建为可连接的。

但是，线程可能会分离，从而使它们不再可连接。因为线程在加入之前消耗系统资源，就像进程在其父调用 wait() 之前消耗资源一样，您不打算加入的线程必须分离，这是一种良好的编程习惯。

当然，一旦主程序退出，所有线程资源都会被释放。

如果我们不这样做（分离），那么当线程终止时，它会产生相当于僵尸进程的线程。除了浪费系统资源外，如果积累了足够多的线程僵尸，我们将无法创建额外的线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T12:07:43.363

默认情况下，线程运行附加，这意味着它需要的资源一直在使用，直到线程加入。

根据您的描述，没有人，但线程本身需要线程的资源，因此您可能会在启动线程之前创建分离的线程或分离线程。

在创建调用后分离线程`pthread_detach()`。

无论如何，如果您想确保在程序结束之前所有线程都消失了，您应该在离开主线程（程序）之前运行附加的线程并加入它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T12:05:00.073

如果你想确保你的线程已经真正完成，你想调用`pthread_join`.

如果你不这样做，那么终止你的程序将突然终止所有未完成的线程。

也就是说，您`main`可以等待足够长的时间直到它退出。但是，你怎么能确定它是足够的呢？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-15T12:03:57.180

如果您的主要结束您的应用程序结束并且您的线程死亡......所以您确实需要使用线程连接（或使用 fork 代替）。

# ftp - 在 Salesforce 中生成 CSV 文件并将其传输到另一台服务器

> ID：10600251
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:02:20.690
> 
> 标签：ftp, salesforce

我在 Salesforce 中生成了一个 XML 文件，现在我的问题是我想将此文件传输到另一台服务器。我可以使用 FTP 连接到另一台服务器，或者有什么方法可以将文件传输到另一台服务器。

这是一项紧迫的任务。

任何解决方案都会被广泛接受。

帕尼拉吉 N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T01:50:50.930

您无法 FTP 输出，您将文件存储在 Salesforce 的什么位置？另一端的服务器是什么？

您可以将文件作为站点上的公共页面提供，调用自定义 Web 服务来传输它，实施 Web 服务来提供文件，使用数据加载器定期从 Salesforce 中提取，然后批量上传到另一台服务器，列表还在继续，但我们需要更多关于您正在处理的信息的信息！

# mysql - Mysql 数据库恢复

> ID：10600252
> 
> 赞同：0
> 
> 时间：2012-05-15T12:02:24.850
> 
> 标签：mysql, recovery, data-recovery

是否有可能恢复在 mysql 5 和 linux 环境中意外删除的数据。我的朋友不小心在他的linux机器上从mysql中删除了一个数据库，还有机会恢复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:06:17.920

如果您的服务器由 ISP 维护，请询问支持人员是否可以进行回滚。大多数 ISP / 服务器托管服务会自动备份您的服务器（文件），因此您的数据可能不会完全丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:34:26.907

mysql 数据库是否启用了二进制日志记录？如果该数据库有二进制日志，您可以尝试从那里恢复已删除的数据。如果没有二进制日志、没有 mysqldumps 或备份，那么我认为你的朋友不走运。

# java - 奇怪的 java.sql.SQLException：找不到列“fk_Content”

> ID：10600259
> 
> 赞同：0
> 
> 时间：2012-05-15T12:03:00.753
> 
> 标签：java, mysql, hibernate

我在 MySQL 数据库中有两个表：

**1- 活动：**

*   **pkid**：主键。
*   **fk_Content**：内容表上的外键。
*   **tk_DistributionGroup**：类型表distribution_group的外键。

**2-内容：**

*   **pkid**：主键。
*   **tk_contentSubtype**：类型表distribution_list上的外键。

我有名为 CampaignData 的 java bean（不是休眠实体）

```
public class CampaignData {

    private long contentId;
    private long contentSubTypeId;
    private Long distributionGroupId;

} 
```

这是我进行查询的方式：

```
CampaignData campaignData = (CampaignData) session
                .createSQLQuery(
                        "select camp.fk_Content as contentId,camp.tk_DistributionGroup as distributionGroupId,cont.tk_contentSubtype as contentSubTypeId "
                                + "from campaign camp,content cont"
                                + " where camp.pkid=:campaignId and camp.fk_Content=cont.pkid")
                .setLong("campaignId", campaignId)
                .setResultTransformer(
                        Transformers.aliasToBean(CampaignData.class))
                .uniqueResult(); 
```

产生休眠查询：

```
select
        camp.fk_Content as contentId,
        camp.tk_DistributionGroup as distributionGroupId,
        cont.tk_contentSubtype as contentSubTypeId 
    from
        campaign camp,
        content cont 
    where
        camp.pkid=? 
        and camp.fk_Content=cont.pkid 
```

当我在数据库中尝试生成的 SQL 查询时，它工作正常并且成功检索数据，但是在运行应用程序时出现异常：

```
Exception in thread "main" org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2297)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)
    at org.hibernate.loader.Loader.list(Loader.java:2167)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1832)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:179)
    at org.hibernate.impl.AbstractQueryImpl.uniqueResult(AbstractQueryImpl.java:859)
    at com.xeno.xecamp.desktopManagement.Main.getCampaignSMSs(Main.java:43)
    at com.xeno.xecamp.desktopManagement.Main.main(Main.java:18)
Caused by: java.sql.SQLException: Column 'fk_Content' not found.
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
    at com.mysql.jdbc.ResultSetImpl.findColumn(ResultSetImpl.java:1144)
    at com.mysql.jdbc.ResultSetImpl.getBigDecimal(ResultSetImpl.java:1414)
    at org.hibernate.type.BigIntegerType.get(BigIntegerType.java:57)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:184)
    at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:210)
    at org.hibernate.loader.custom.CustomLoader$ScalarResultColumnProcessor.extract(CustomLoader.java:501)
    at org.hibernate.loader.custom.CustomLoader$ResultRowProcessor.buildResultRow(CustomLoader.java:447)
    at org.hibernate.loader.custom.CustomLoader.getResultColumnOrRow(CustomLoader.java:344)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:647)
    at org.hibernate.loader.Loader.doQuery(Loader.java:745)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.doList(Loader.java:2294)
    ... 9 more 
```

请告知我为什么会遇到异常。

**更新：**这是一个第 3 方应用程序，它连接到另一个应用程序的数据库。

其他应用价值`hibernate.hbm2ddl.auto=create-drop`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:41:07.513

为了正确地从数据库中获取您请求的内容，hibernate 使用的实体类应该 100% 匹配数据库表。

您有列`fk_Content`，但私有字段是`contentId`. 仅仅使用`as`不会得到你想要的结果。如果您想使用不同的名称（就像您所做的那样），您需要为 hibernate 提供正确的列名，使用`@Column(name = "")`. 此外，不建议使用基本数据类型。您的 CampaignData 类如下所示：

```
@Entity
@Table(name = "campaign")
public class CampaignData {

    private Long contentId;
    private Long contentSubTypeId;
    private Long distributionGroupId;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = "pkid", unique = true, nullable = false)
    public Long getContentId() {
        return this.contentId;
    }

    public void setContentId(Long contentId){
        this.contentId = contentId;
    }

    @Column(name = "fk_Content")
    public Long getContentSubTypeId() {
        return this.contentSubTypeId;
    }

    public void setContentSubTypeId(Long contentSubTypeId){
        this.contentSubTypeId= contentSubTypeId;
    }

    @Column(name = "tk_DistributionGroup")
    public Long getDistributionGroupId() {
        return this.distributionGroupId;
    }

    public void setDistributionGroupId(Long distributionGroupId){
        this.distributionGroupId= distributionGroupId;
    }
} 
```

这应该这样做。另外，尝试学习使用[Hibernate 的 Criteria](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)。这比硬编码的 SQL 语句要好得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T12:55:54.983

为了让它工作，我需要使用 addScalar，如下所示：

```
.createSQLQuery(
                        "select camp.fk_Content as contentId,camp.tk_DistributionGroup as distributionGroupId,cont.tk_contentSubtype as contentSubTypeId "
                                + "from campaign camp,content cont"
                                + " where camp.pkid=:campaignId and camp.fk_Content=cont.pkid")
                .addScalar("contentId")
                .addScalar("distributionGroupId")
                .addScalar("contentSubTypeId") 
```

# css - 如何将 .rotate() 混合应用到Bootstrap 的 Icon Glyph 元素？

> ID：10600262
> 
> 赞同：8
> 
> 时间：2012-05-15T12:03:16.107
> 
> 标签：css, rotation, twitter-bootstrap

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T12:51:31.740

作为@Lipis 评论的结果，这是我在答案中解释的评论。

纯 CSS 解决方案：

```
<i class="icon-search" id="rotate"></i>

#rotate {  
  -webkit-transform:rotate(120deg);
  -moz-transform:rotate(120deg);
  -o-transform:rotate(120deg);
  /* filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1.5); */
  -ms-transform:rotate(120deg);        
} 
```

或者使用 Bootstrap 的 mixins 和 LessCSS：

```
#rotate {  
  .rotate(120deg); 
} 
```

请记住，较旧的浏览器不支持此 css。

有关演示，请参见[jsfiddle](http://jsfiddle.net/EBXPn)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T17:48:51.020

您不能对伪元素（例如 :before）进行转换，这通常是图标字体的实现方式。使用 Bootstrap 的字形，有 background-image:url("../img/glyphicons-halflings.png"); （就像在那个 jsfiddle 演示中一样）。另请参阅：[将 WebKit 转换应用于伪元素](https://stackoverflow.com/questions/7873261/applying-webkit-transitions-to-pseudo-elements)和此：[http ://css-tricks.com/transitions-and-animations-on-css-generated-content/](http://css-tricks.com/transitions-and-animations-on-css-generated-content/)

# php - 用于文件上传的 phpunit 测试用例

> ID：10600264
> 
> 赞同：0
> 
> 时间：2012-05-15T12:03:30.243
> 
> 标签：php, phpunit, yii

有谁能够帮助我。如何编写文件上传phpunit测试用例？我这样做是为了插入、唯一数据插入、删除等功能。以下是我的代码，但无法正常工作

```
class FileuploadTest extends PHPUnit_Framework_TestCase
{

    public $testFile = array(
       'name'=>'2012-04-20 21.13.42.jpg',
       'tmp_name'=>'C:\wamp\tmp\php8D20.tmp',
       'type'=>'image/jpeg',
       'size'=>1472190,
       'error'=>0
    );

public function testFileupload()
    {   

        $testUpload = new Fileupload;
        $testUpload->image = new CUploadedFile($this->testFile['name'],$this->testFile['tmp_name'],$this->testFile['type'],$this->testFile['size'],$this->testFile['error']);
        $this->assertFalse($testUpload->validate());

        $errors= $testUpload->errors;
        $this->assertEmpty($errors);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:53:17.813

根据您的评论，这就是测试，`$testUpload->validate()`返回 true，如果它是 false，您正在尝试`assert`，显然测试将失败。

如果`$this->assertFalse($testUpload->validate());`失败，则表示`$testUpload`已正确初始化，因此验证返回 true。

要继续测试中的下一个断言，您需要使用

```
$this->assertTrue($testUpload->validate()); 
```

您需要阅读有关单元测试的更多信息。网络上有很多文章，简单的搜索就会返回。

# java - 如何在 Java 中对广义类型进行计算？

> ID：10600268
> 
> 赞同：2
> 
> 时间：2012-05-15T12:03:58.467
> 
> 标签：java, generics

我正在使用广义类型的多项式系数实现多项式类。我有这个代码：

```
public class Polynomial<T> {

private HashMap<Integer, T > polynomial;

public Polynomial(T coefficient, Integer index) {
    polynomial = new HashMap<Integer, T>();
    if (coefficient!=0) 
        polynomial.put(index, coefficient);
}

public void sum(Polynomial<T> w) {
    for (Map.Entry<Integer, T> e : w.polynomial.entrySet()) {
        T tmp = polynomial.get(e.getKey());
        if(tmp==null)
            polynomial.put(e.getKey(), e.getValue());
        else {
            polynomial.remove(e.getKey());
            if (tmp+e.getValue()!=0)
                polynomial.put(e.getKey(), tmp+e.getValue());
        }
    }
}

...

} 
```

由于显而易见的原因，它无法编译。运算符：==、!=、+、- 和 * 没有为通用类型 T 定义。据我所知，我在 Java 中无法覆盖运算符。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:13:30.033

由于 Java 中的泛型与 C++ 中的泛型工作方式不同，因此您不能使用运算符。您需要确保您的类型`T`实现了一些接口并使用接口的方法进行计算。假设您使用`Number`标准库中的接口，它允许您调用`doubleValue()`您的对象并基于该接口进行计算，您可以使用诸如 的定义`private HashMap<Integer, T extends Number >`，在这种情况下您将能够`Number`从 T 访问 的方法。

您还可以使用诸如 等方法的自定义接口创建自己的类`add()`。`mul()`由于这些是方法调用，因此您不能在此处使用本机类型，因此损失了很多性能，并且没有理由编写此类代码正如 Java 中的示例而不是 C++ 中的示例。一些库，例如`Trove`，实际上使用代码生成代替 Java 泛型来为一组参数化类获得类似 C++ 的预处理器样式的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:12:31.303

当你声明你的类时，你可以更具体地说明你接受什么类型。这意味着您可以指定类型参数必须是[Number](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Number.html)：

```
public class Polynomial<T extends Number> 
```

然后，您可以使用 Number 类（ 、 等）中的`intValue()`方法`doubleValue()`将其转换为基元，并对其进行算术运算。我知道，这并不理想，但如果您使用`doubleValue()`并且您的数字不是太大，应该可以正常工作。

# maven-plugin - 无法执行声纳：装饰失败

> ID：10600270
> 
> 赞同：3
> 
> 时间：2012-05-15T12:04:04.037
> 
> 标签：maven-plugin, sonarqube

我在自己的电脑（Windows XP）上安装了声纳服务器，并在 Tomcat 上部署了带有 MySQL 数据库的声纳。我成功地分析了一个旧项目。但是对于我当前的项目，我在尝试执行时遇到了这个异常`mvn sonar:sonar`：

编辑：

```
[INFO] [14:39:37.254] Sensor CoberturaSensor done: 218 ms
[INFO] [14:39:37.254] Sensor Maven dependencies...
[INFO] [14:39:41.426] Sensor Maven dependencies done: 4172 ms
[INFO] [14:39:41.848] Execute decorators...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:53.354s
[INFO] Finished at: Tue May 15 14:39:43 CEST 2012
[INFO] Final Memory: 21M/138M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (d
efault-cli) on project XXX: Can not execute Sonar: Fail to decorate 'com.myPackage
.myClass': 793 -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal o
rg.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project XXX: Can
not execute Sonar
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Can not execute Sonar

        at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:118)

        at org.codehaus.mojo.sonar.Bootstraper.start(Bootstraper.java:65)
        at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:90)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:209)
        ... 19 more
Caused by: org.sonar.api.utils.SonarException: Fail to decorate 'com.myPackage.myClass
'
        at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(Decorators
Executor.java:84)
        at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(Decorators
Executor.java:70)
        at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(Decorators
Executor.java:63)
        at org.sonar.batch.phases.DecoratorsExecutor.decorateResource(Decorators
Executor.java:63)
        at org.sonar.batch.phases.DecoratorsExecutor.execute(DecoratorsExecutor.
java:55)
        at org.sonar.batch.phases.Phases.execute(Phases.java:94)
        at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:14
3)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:115)
        at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:105)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.jav
a:109)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrapper.Batch.startBatch(Batch.java:72)
        at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:59)
        at org.sonar.maven3.SonarMojo.execute(SonarMojo.java:143)
        at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:113)

        ... 23 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: 793
        at org.sonar.plugins.core.timemachine.tracking.HashedSequenceComparator.
equals(HashedSequenceComparator.java:34)
        at org.sonar.plugins.core.timemachine.ViolationTrackingBlocksRecognizer.
computeLengthOfMaximalBlock(ViolationTrackingBlocksRecognizer.java:48)
        at org.sonar.plugins.core.timemachine.ViolationTrackingDecorator.mapViol
ations(ViolationTrackingDecorator.java:130)
        at org.sonar.plugins.core.timemachine.ViolationTrackingDecorator.decorat
e(ViolationTrackingDecorator.java:70)
        at org.sonar.batch.phases.DecoratorsExecutor.executeDecorator(Decorators
Executor.java:79)
        ... 39 more 
```

我不明白问题出在哪里。请问有人有答案吗？它可以来自我的 POM 配置吗？

PS：命令行`mvn clean install`和`mvn site`工作正常...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:50:44.650

您正面临 Sonar 3.0 的错误 (=> [http://jira.codehaus.org/browse/SONAR-3442](http://jira.codehaus.org/browse/SONAR-3442) )。我们发布了修复此问题的Sonar 3.0.1（请参阅[http://www.sonarsource.org/downloads/ ）。](http://www.sonarsource.org/downloads/)

# sql - 用于组合行的 MS Access 查询

> ID：10600272
> 
> 赞同：2
> 
> 时间：2012-05-15T12:04:08.890
> 
> 标签：sql, ms-access

我有一个查询，它以以下格式返回数据：

```
xxx yyy     count
-------------------------------
a   cat1    23
a   cat2    34
a   cat3    12
b   cat1    34
b   cat2    1
b   cat3    2
c   cat1    34
c   cat2    123
c   cat3    34
d   cat1    34
d   cat2    12
d   cat3    34 
```

我需要以这样一种方式修改我的查询，即我需要将 yyy 列的两个值分类为单个值并组合它们的计数

```
xxx yyy         count
-------------------------------
a   cat1        23
a   cat2 & cat3 36
b   cat1        34
b   cat2 & cat3 3
c   cat1        34
c   cat2 & cat3 157
d   cat1        34
d   cat2 & cat3 36 
```

如果您有任何想法，请提出建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T14:07:57.810

假设您总是希望 cat1 爆发并且只有 2 只其他猫...

```
SELECT xxx, yyy, COUNT(*) AS count
FROM table
WHERE yyy = 'cat1'
GROUP BY xxx, yyy
UNION
SELECT xxx, 'cat2 & cat3' AS yyy, COUNT(*) AS count
FROM table
WHERE yyy <> 'cat1'
GROUP BY xxx 
```

如果你有额外的猫，你只想要 2 和 3，更改`WHERE yyy <> 'cat1'`为`WHERE yyy IN ('cat2','cat3')`

# wcf - 使用 .net 4 进行 WCF 压缩

> ID：10600278
> 
> 赞同：1
> 
> 时间：2012-05-15T12:04:37.573
> 
> 标签：wcf, iis-7, .net-4.0, compression

我已经阅读了这篇[WCF 压缩](http://code.msdn.microsoft.com/WCF-Compression-Example-9ffab49c)文章，我知道对于 .net 4.0，WCF 压缩是开箱即用的。

我找不到任何关于如何使用它的明确解释，我是否需要定义任何设置或更改绑定？还是自动压缩？

我在 IIS7 中使用 basicHttpBinding。“启用动态压缩”选项设置为 true，但我不明白客户端如何知道压缩请求和解压缩响应？

任何解释，包括设置绑定以减小消息大小，都将不胜感激。在具有 4MB 带宽的远程服务器上工作时，我遇到了非常糟糕的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:56:13.800

> 但我不明白客户端如何知道压缩请求和解压缩响应？

这都是 HTTP 规范的一部分。由于 WCF 使用 HTTP 和 IIS，它可以利用 Web 服务器和客户端 HTTP 堆栈的内置压缩。

查看第 14.3 节： [http ://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

基本上，您的客户端需要发送一个标头，说明它支持压缩。示例： `Accept-Encoding: gzip, deflate`。您可以按照 WCF 客户端部分的文章中的说明进行设置。然后，您的客户端将向服务器发送正确的标头。

现在在服务器端，IIS 将看到该标头，并将压缩响应...*如果配置为这样做*。您链接的文章告诉您如何设置 IIS 以压缩 WCF 服务。然后，服务器将向客户端发送回一个标头，告诉它内容已压缩：`Content-Encoding: gzip`。然后客户端将解压缩响应并继续其愉快的方式。

差不多就是这样；只需正确获取客户端标头并将服务器配置为发送回压缩响应即可。这篇文章告诉你如何做到这一点。希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-16T23:39:23.693

请注意，压缩已添加到 WCF 4.5。它在这里介绍：http: [//msdn.microsoft.com/en-us/library/aa751889 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa751889%28v=vs.110%29.aspx)

您必须使用自定义绑定来启用它：

```
<customBinding>
  <binding name="BinaryCompressionBinding">
    <binaryMessageEncoding compressionFormat="GZip"/> 
    <httpTransport /> 
  </binding> 
</customBinding> 
```

它仅适用于二进制编码。此外，您必须了解您的情况。如果您托管在 IIS 中，则压缩可能已经打开。见这里：http: [//blogs.msdn.com/b/dmetzgar/archive/2011/04/29/automatic-decompression-in-wcf.aspx](http://blogs.msdn.com/b/dmetzgar/archive/2011/04/29/automatic-decompression-in-wcf.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T07:44:53.257

使用 http 编码时，启用响应压缩（仅）的一个好方法是使用**[IIS7 和更高版本内置的动态压缩](https://stackoverflow.com/a/6855003/709537)**。

> 但我不明白客户端如何知道压缩请求和解压缩响应？

下面是对 HTTP 开箱即用的描述，它可以与 WCF HTTP(S) 编码一起使用。除此之外，WCF 4.5 还提供了[gzip 和 deflate](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.compressionformat.aspx) [对其二进制编码的压缩](http://msdn.microsoft.com/en-us/library/aa751889.aspx)。

**压缩响应**是 HTTP 标准的一部分。在其请求中，客户端通过以下标头向服务器发送其支持的压缩方法（gzip、deflate、...）的信号：

```
Accept-Encoding: gzip, deflate 
```

服务器自行决定，无限智慧和神秘的方式，可以自由地忽略该标头并发送未压缩的响应，或者它可以选择客户端提供的任何一种算法，例如回答以下标头并压缩响应体。

```
Content-Encoding: gzip 
```

更复杂的是，服务器可能还会设置以下标头：

```
Transfer-Encoding: chunked 
```

这允许服务器省略其他强制性的`Content-Length`标头，作为一般的 HTTP 标头，必须在 HTTP 正文之前。（设置`chunked`编码[会影响正文的编码方式](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.6.1)。）所以现在它可以即时压缩响应正文，即在压缩时吐出字节，而不必等待整个正文的压缩完成，只是为了能够确定压缩结果的内容长度。这可以在服务器端节省大量内存。（然而，客户端现在对压缩响应的总大小一无所知，直到它完成接收整个响应，使其解压效率略低）

* * *

但是请注意，正如我刚刚描述的那样，使用[`Accept-Encoding`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3)and来*透明地压缩*响应实际上是[一个愚蠢的想法](https://stackoverflow.com/a/11664307/709537)，根据 http 共同作者 Roy Fielding 的说法，应该使用的是请求中的以下标头：[`Content-Encoding`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11)

 *```
TE: gzip, deflate 
```

如果服务器选择执行压缩，则会将以下标头添加到其响应中：

```
Transfer-Encoding: gzip, chunked 
```

和以前一样，`chunked`如果服务器想要省略`Content-Length`.

否则，[`TE`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.39)/[`Transfer-Encoding`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41)组合在语法上与`Accept-Encoding`/组合相同，但含义不同，从[这个冗长的讨论](https://issues.apache.org/bugzilla/show_bug.cgi?id=39727#c31)`Content-Encoding`中可以看出。

问题的要点：TE/Transfer-Encoding 使压缩成为*传输细节*，而 Accept-Encoding/Content-Encoding 将压缩版本表示为实际数据（ HTTP 术语中的*实体*），对于请求的缓存有许多不幸的后果, 代理等。

但是，TE/Transfer-Encoding的船很久以前就开船了，我们卡在AE/CE组合上，大多数客户端和服务器都支持这个组合，实际上更接近于TE/TE

* * *

当涉及到HTTP 中的**压缩请求**时，它们在实践中很少使用，并且客户端没有标准的方法来确定服务器是否支持它。要么你告诉客户端带外（例如硬编码）服务器理解压缩请求（并[适当地配置服务器](https://serverfault.com/a/56707/124382)）。或者您让您的客户端主动尝试压缩一次，如果它产生一个`400 Bad Request`（至少这是 IIS 7.5 会返回的结果），您就会退回到非压缩请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T08:33:03.757*

# iphone - 如何通过 UIPickerView 使用更复杂的数据源

> ID：10600284
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:04:45.340
> 
> 标签：iphone, ios, uipickerview

如何在 UIPickerView 中使用复杂的数据源？我有一个对象数组，想使用 MyObject.Name 作为 UIPickerView 中元素的标题，但是在选择它时取回整个对象。

它是一个 NSMutableArray 对象。

`

```
@interface Account : NSObject
{
    NSString *ID;
    NSString *Name;
    NSString *AccountTypeName;
    NSString *Type;
} 
```

数组看起来像这样：

```
`2012-05-15 16:30:05.847 App[2320:f803] (
    "<Account: 0x6888d70>",
    "<Account: 0x6eb09a0>",
    "<Account: 0x6d7f170>",
    "<Account: 0x6d79ca0>"
)` 
```

我在使用时收到“发送到实例 0x6888d70 的无法识别的选择器”错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:08:44.487

您需要将所有对象存储在数组和函数中：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

您按名称（以 NSPredicate 为例）找到所选项目

或者 ：

```
[ARRAYNAME objectAtIndex:row] 
```

# asp.net - 在运行时计算与从 SQL Server 表中查找

> ID：10600288
> 
> 赞同：0
> 
> 时间：2012-05-15T12:05:15.190
> 
> 标签：asp.net, asp.net-mvc-3, performance, tsql, database-design

我有一个 MVC 应用程序需要运行几个tilion 计算。其中，我只对大约 800 万个结果感兴趣。我必须做这项工作，因为我需要看到一个整体的高分和低分。我将保存这些数据，并将其存储在一个包含 16 个浮点数的表中。我在这个表上也有一些索引用于查找。到目前为止，我只处理了 5% 的数据。

当用户将数据输入我的网站时，我必须根据他们的数据进行计算。我必须确定最好和最差的结果。这只是大约 400 万次计算。现在，在我的本地 PC 上计算大约需要一秒钟或更短的时间。或者它是一个简单的查询，它将始终从我存储的数据中返回 2 条记录。最好的和最坏的。现在，获取结果的查询与计算结果的速度相同或更快，但我还没有全部 800 万条记录。我担心数据库会变慢。

我在想我会使用数据库查找，如果性能成为问题，请切换到运行时计算。

问题：我是否应该省去麻烦并进行运行时计算？我不确定哪个选项更具可扩展性。我不希望这个网站有庞大的用户群。该网站需要活泼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:12:08.230

您的问题有点含糊，无法提供明确的答案，但我的猜测是使用 db 计算总数将比您在网站上编写代码更有效率。Sql Server 将尝试优化查询以使用尽可能多的服务器资源以提高效率。除非您专门为此编写代码，否则您的代码不会这样做。

在制定优化策略之前，我会先加载数据并进行测试。在加载远程接近您将要处理的数据之前，您不知道系统的真正瓶颈在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:38:24.067

如果我理解执行计算的问题更具可扩展性，那么它是否在单个数据集上。当您将数据添加到表中时，即使使用索引查找也会变慢。此外，索引会增加表大小并增加插入记录所需的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:32:56.220

如果我对您的理解正确，这是一个关于缓存的问题-您应该即时计算还是在缓存中查找结果？

在大多数 Web 架构中，您的 SQL 数据库是一个出色的缓存，直到它变成一个糟糕的缓存。众所周知，扩展 (SQL) 数据库非常棘手 - 引入集群、分片等本身就成为一种产品。

我的 - 非常笼统的 - 建议是使用关系数据库来管理事务数据，并使用缓存技术进行缓存。如今，一台体面的服务器上的 RAM 应该可以容纳 800 万条记录——而且您可以添加 Web 服务器，而且比扩展您的数据库要便宜得多。

# c# - 检查弱引用目标引用计数

> ID：10600289
> 
> 赞同：3
> 
> 时间：2012-05-15T12:05:18.823
> 
> 标签：c#, .net, weak-references

我知道如果一个对象没有引用，并且 GC 清除了它，该对象的 WeakReference.Target 属性将返回 null，

但是假设对象没有强引用，而 GC 还没有清除它，是否有办法通过它的 WeakReference 检查它是否有任何强引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:08:06.887

否 - 这取决于对象是否具有 GC 根。GC 在运行之前不会确定这一点。

查看这篇 MSDN 杂志文章（[第 1 部分](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)和[第 2 部分](http://msdn.microsoft.com/en-us/magazine/bb985011.aspx)），了解有关 .Net 中 GC 的更多信息。

** 更新 ** 感谢@Adriano 提供第 2 部分链接。

# java - 刷新 JSF 页面时不记住所选行的顺序

> ID：10600292
> 
> 赞同：2
> 
> 时间：2012-05-15T12:05:30.043
> 
> 标签：java, jsf, jsf-2

我在 jsf 页面中有一个非常奇怪的错误，我找不到。这是 JSF 页面的代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <ui:debug />

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                                <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[item.aSessionID]}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="№" value="№" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>    

                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>   
                            </h:commandLink>
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                        <h:commandButton value="Delete" action="#{SessionsController.deleteSelectedIDs}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <script type="text/javascript">
                            $("tr").not(':first').hover(
                            function () {
                                $(this).css("background","#707070");
                            }, 
                            function () {
                                $(this).css("background","");
                            }
                        );              

                            function highlight(param) {  
                                var row = jQuery(param).parent().parent().children();
                                row.toggleClass('highlited');
                            }        
                        </script>

                    </h:form>                  

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

这是托管 bean：

```
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/*
 * include SQL Packages
 */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.*;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.bean.ViewScoped;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean; 
import javax.faces.event.ActionEvent;

import org.glassfish.osgicdi.OSGiService;

@Named("SessionsController")
@ViewScoped
public class Sessions implements Serializable {

    /*
     * Call the Oracle JDBC Connection driver
     */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    // Data.
    private List<ActiveSessionObj> dataList;
    // Rows
    private int totalRows;
    // Paging.
    private static int firstRow;
    private int rowsPerPage;
    private int totalPages;
    private int pageRange;
    private Integer[] pages;
    private int currentPage;
    // Sorting.
    private String sortField;
    private boolean sortAscending;

    /*
     * Constructor
     */
    public Sessions() {
        /*
         * Set default properties
         */
        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).
        pageRange = 10; // Default page range (max amount of page links to be displayed at once).
        sortField = "ASESSIONID"; // Default sort field.
        sortAscending = true; // Default sort direction.
    }

    public class ActiveSessionObj {

        private String aSessionID;
        private String userID;
        private Date activityStart;
        private Date activityEnd;
        private String activity;
        //private boolean selected;

        public ActiveSessionObj(String aSessionID, String userID, Date activityStart, Date activityEnd, String activity) {
            this.aSessionID = aSessionID;
            this.userID = userID;
            this.activityStart = activityStart;
            this.activityEnd = activityEnd;
            this.activity = activity;
        }

        public int getFirstRow() {
            return firstRow;
        }

        public String getaSessionID() {
            return aSessionID;
        }

        public void setaSessionID(String aSessionID) {
            this.aSessionID = aSessionID;
        }

        public String getactivity() {
            return activity;
        }

        public void setactivity(String activity) {
            this.activity = activity;
        }

        public Date getactivityEnd() {
            return activityEnd;
        }

        public void setactivityEnd(Date activityEnd) {
            this.activityEnd = activityEnd;
        }

        public Date getactivityStart() {
            return activityStart;
        }

        public void setactivityStart(Date activityStart) {
            this.activityStart = activityStart;
        }

        public String getuserID() {
            return userID;
        }

        public void setuserID(String userID) {
            this.userID = userID;
        }

        private ActiveSessionObj() {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }

    // Paging actions -----------------------------------------------------------------------------
    public void pageFirst() {
        page(0);
    }

    public void pageNext() {
        page(firstRow + rowsPerPage);
    }

    public void pagePrevious() {
        page(firstRow - rowsPerPage);
    }

    public void pageLast() {
        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));
    }

    public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    }

    private void page(int firstRow) {
        this.firstRow = firstRow;
        loadDataList(); // Load requested page.
    }

    // Sorting actions ----------------------------------------------------------------------------
    public void sort(ActionEvent event) {
        String sortFieldAttribute = (String) event.getComponent().getAttributes().get("sortField");

        // If the same field is sorted, then reverse order, else sort the new field ascending.
        if (sortField.equals(sortFieldAttribute)) {
            sortAscending = !sortAscending;
        } else {
            sortField = sortFieldAttribute;
            sortAscending = true;
        }

        pageFirst(); // Go to first page and load requested page.
    }

    // Loaders ------------------------------------------------------------------------------------
    private void loadDataList() {

        // Load list and totalCount.
        try {
            dataList = list(firstRow, rowsPerPage, sortField, sortAscending);
            totalRows = countDBRowNum(); //count the tablerows
        } catch (Exception e) {
            throw new RuntimeException(e);
        }

        // Set currentPage, totalPages and pages.
        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;
        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);
        int pagesLength = Math.min(pageRange, totalPages);
        pages = new Integer[pagesLength];

        // firstPage must be greater than 0 and lesser than totalPages-pageLength.
        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);

        // Create pages (page numbers for page links).
        for (int i = 0; i < pagesLength; i++) {
            pages[i] = ++firstPage;
        }
    }

    // Getters ------------------------------------------------------------------------------------
    public List<ActiveSessionObj> getdataList() {
        if (dataList == null) {
            loadDataList(); // Preload page for the 1st view.
        }
        return dataList;
    }

    public int getTotalRows() {
        return totalRows;
    }

    public int getFirstRow() {
        return firstRow;
    }

    public int getRowsPerPage() {
        return rowsPerPage;
    }

    public Integer[] getPages() {
        return pages;
    }

    public int getCurrentPage() {
        return currentPage;
    }

    public int getTotalPages() {
        return totalPages;
    }

    // Setters ------------------------------------------------------------------------------------
    public void setRowsPerPage(int rowsPerPage) {
        this.rowsPerPage = rowsPerPage;
    }

    // Actions ------------------------------------------------------------------------------------
    /**
     * Returns list of ActiveSessionObj items starting at the given first index
     * with the given row count, sorted by the given sort field and sort order.
     *
     * @param firstRow First index of rows to be returned.
     * @param rowCount Amount of rows to be returned.
     * @param sortField Field to sort the data on.
     * @param sortAscending Whether to sort data ascending or not.
     * @return list of ActiveSessionObj items starting at the given first index
     * with the given row count, sorted by the given sort field and sort order.
     */
    public List<ActiveSessionObj> list(int firstRow, int rowCount, String sortField, boolean sortAscending) throws SQLException {

        String SqlStatementSmall = null;
        String SQLStatementLarge = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        int countrow = firstRow + rowCount;
        String sortDirection = sortAscending ? "ASC" : "DESC";

        /*
         * For small tables
         */
        SqlStatementSmall = "SELECT c.*"
                + " FROM (SELECT b.*, rownum rn"
                + " FROM (SELECT a.*"
                + " FROM activeSessionsLog a"
                + " ORDER BY %s %s) b"
                + " WHERE rownum <= ?) c"
                + " WHERE rn > ?";

        /*
         * For huge datatables optimized for perfomance
         */
        SQLStatementLarge = "select * from"
                + " (select asl.*, row_number() over (order by userid asc) r "
                + " from activesessionslog asl)"
                + " where r > 980750 and r <= 980800;";

        String sql = String.format(SqlStatementSmall, sortField, sortDirection);

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        List<ActiveSessionObj> dataList = new ArrayList<ActiveSessionObj>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;

            ps = conn.prepareStatement(sql);
            ps.setInt(1, countrow);
            ps.setInt(2, firstRow);

            resultSet = ps.executeQuery();
            /*
             * take the result from the SQL query and insert it into Array List
             * collection
             */
            dataList = ActiveSessionsArrayList(resultSet);

            conn.commit();
            committed = true;

        } finally {
            ps.close();
            conn.close();
        }

        return dataList;
    }

    public int countDBRowNum() throws Exception {

        String SqlStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        SqlStatement = "SELECT count(*) FROM ACTIVESESSIONSLOG";

        PreparedStatement ps = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                SqlStatement = "SELECT count(*) FROM ACTIVESESSIONSLOG";

                ps = conn.prepareStatement(SqlStatement);
                resultSet = ps.executeQuery();

                if (resultSet.next()) {
                    count = resultSet.getInt(1);
                }

                conn.commit();
                committed = true;
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            ps.close();
            conn.close();
        }
        //Returns total amount of rows in table.
        return count;
    }

    /**
     * Map the current row of the given ResultSet to ActiveSessionObj.
     *
     * @param resultSet The ResultSet of which the current row is to be mapped
     * to ActiveSessionObj.
     * @return The mapped ActiveSessionObj from the current row of the given
     * ResultSet.
     */
    private ArrayList<ActiveSessionObj> ActiveSessionsArrayList(ResultSet rs) throws SQLException {
        ArrayList<ActiveSessionObj> list = new ArrayList<>();

        try {
            while (rs.next()) {
                list.add(new ActiveSessionObj(
                        rs.getString("ASESSIONID"),
                        rs.getString("USERID"),
                        timestampToDate(rs.getTimestamp("ACTIVITYSTART")),
                        timestampToDate(rs.getTimestamp("ACTIVITYEND")),
                        rs.getString("ACTIVITY")));
            }
        } catch (Exception x) {
            x.printStackTrace();
        }

        return list;   
    }

    //get the selected rows
    private HashMap<String, Boolean> selectedIds = new HashMap<>();

    // get the list from the JSF page
    public Map<String, Boolean> getSelectedIds() {
        return selectedIds;
    }

    //delete all selected checkboxes
    public void deleteSelectedIDs() throws SQLException {
        boolean success = false;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        PreparedStatement ps = null;
        ResultSet resultSet = null;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {

                String sqlDeleteQuery = "DELETE FROM ACTIVESESSIONSLOG WHERE ASESSIONID = ?";

                Set<String> keySet = selectedIds.keySet();
                String[] keys = new String[]{};
                keys = selectedIds.keySet().toArray(keys);
                ps = conn.prepareStatement(sqlDeleteQuery);

                for (int i = 0; i < keys.length; i++) {
                    ps.setString(1, keys[i]);
                    ps.executeUpdate();
                    ps.clearParameters();
                    selectedIds.put(keys[i], false); //get(keys[i]) = false;
                }

                conn.commit();
                committed = true;

                //selectedIds.clear();
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            ps.close();
            conn.close();
        }

        /*
         * // Get selected items. boolean success = false; try { String
         * sqlDeleteQuery = "";
         *
         * Set<String> keySet = selectedIds.keySet(); Iterator keyIterator =
         * keySet.iterator(); while(keyIterator.hasNext()) { keyIterator.next();
         * }
         *
         * }
         * catch(Exception x) { success = false; } // Do your thing with the
         * MyData items in List selectedDataList.
         */
        //return success; // Navigation case.

        //reload the table
        loadDataList();
    }

    private static Date timestampToDate(java.sql.Timestamp ts) {
        Date d = null;
        try {
            d = new Date(ts.getTime());
        } catch (Exception e) {
            e.printStackTrace();
        }

        return d;
    }
} 
```

我打开了页面，然后选择了一些行，我得到了这个： ![在此处输入图像描述](../Images/7e1dc991749154b0152865ff08ecdcb0.png)

但是当我按 F5 时，我被重定向到第 1 页

![在此处输入图像描述](../Images/9455c14e34bc90d313c53a647d33f138.png)

这很奇怪，因为所选行已更改。我使用哈希来记住选择了哪些行。似乎哈希图中的位置已更改。我将`static`值更改为`firstrow`托管bean。然后我遇到第二个问题：打开的页面在客户端之间共享 - 当第二个浏览器打开该页面时，将打开分页的同一页面。

我测试了其他解决方案 - 我将 bean 的范围更改为 SessionScope。我删除了静态变量。但是选择行的问题并没有解决。我仍然遇到所选行位置的老问题。

也许问题出在哈希图上。

private HashMap selectedIds = new HashMap<>();

我怀疑这个哈希图是正确的。必须将行的索引`h:datatable`记住到 hashmap 中。我该如何解决这个问题？

最好的祝福彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:31:20.013

您的问题出现是因为您没有在会话中存储当前的分页位置 - 您是否注意到它在刷新时显示第一页？看起来您可能正在存储相对（在页面中）而不是绝对索引到选定元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:22:07.970

如果不是传递`index`on ui，而是传递`aSessionID`，那么问题就可以解决。

将选定的 sessionID 存储在列表或地图中。

```
/**
 * Stores checked accounts for the Selected User
 * */
private List<Account> selectedAccounts = new ArrayList<Account>(); 
```

在 SessionsController.dataList 类型对象中添加一个标志，该标志将告诉该项目是否被选中。

```
public boolean isSelectedAccount()
{
    return selectedAccount;
} 
```

现在，当在服务器端获取数据时，迭代地图/列表，对于检查的对象，将标志设置为 true。

```
for(Account account : customerAccounts){
    if(selectedAccounts.contains(account)){
    account.setSelectedAccount(true);
        }} 
```

在 UI 上，使用此标志来决定是否将项目显示为选中状态。

```
<h:selectBooleanCheckbox id="accounts" value="#{row.selectedAccount}"> 
```

Also, whenever any object is selected or deselected, add or remove it from the list/map of selected session id's respectively.

```
selectedAccount.add(sessionId); 
```

# php - 在控制器中显示消息的最佳方式

> ID：10600293
> 
> 赞同：-2
> 
> 时间：2012-05-15T12:05:33.430
> 
> 标签：php

哪种方式最好在 Controller 中显示消息？是必须显示计数文章。

```
$c = count($articles);

if($c == 0) {
  return "On site are 0 articles";
} elseif ($c == 1){
  return "On site is 1 article";
} else {
  return "On site are" . $c . "articles";
} 
```

或者：

```
if($c == 1) {
  $text1 = 'is';
  $text2 = 'article'
} else {
  $text1 = 'are';
  $text2 = 'articles'
}

return "On site" . $text1 . $c . $text2; 
```

也许其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:07:50.220

```
if($c > 0))
{
    return "There are $c article(s) on this site.";
}
else
{
    return "There are no articles on this site.";
} 
```

类似的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:10:21.147

您可以使用外部复数类。

一个简短的谷歌研究返回了这个： http: [//kuwamoto.org/2007/12/17/improved-pluralizing-in-php-actionscript-and-ror/](http://kuwamoto.org/2007/12/17/improved-pluralizing-in-php-actionscript-and-ror/)

像这样使用它：

```
echo 'On site ' . $c==1 ? 'is ' : 'are ' . isInflect.pluralize_if($c, 'article') . '.'; 
```

很确定还有其他库也将动词复数/单数化（is/are）。

# php - mediawiki 中的自定义工具栏

> ID：10600295
> 
> 赞同：1
> 
> 时间：2012-05-15T12:05:36.897
> 
> 标签：php, mediawiki

在我的项目中，我需要自定义 mediawiki 编辑器的工具栏部分。我阅读了文章：[mediawiki.org 上的](http://www.mediawiki.org/wiki/Extension%3aWikiEditor/Toolbar_customization)[*扩展：WikiEditor/工具栏自定义*](http://www.mediawiki.org/wiki/Extension%3aWikiEditor/Toolbar_customization)。

在他们指定的基本步骤中，例如：“因此，要自定义工具栏，请在您的 User:YourUserName/common.js 中放入如下代码：..”

我没有得到关于这个的想法......

所以请帮助我自定义工具栏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:42:16.590

用户可以通过编辑 wiki 页面在 MediaWiki 中定义自定义 javascript 代码`User:<username>/common.js`（您需要启用[$wgAllowUserJs](http://www.mediawiki.org/wiki/Manual%3a%24wgAllowUserJs)才能使其工作）。对于您管理的网站，您不想这样做；而是将脚本放在 wiki 页面`MediaWiki:Common.js`中，这会影响每个用户和访问者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:29:28.350

你需要做两个步骤：

1.  编辑文件`mediawiki\includes\EditPage.php`。首先复制它是个好主意。编辑的功能是`getEditToolbar`。编辑`$toolarray`. 您可以通过 Google 找到大量示例代码，[这里是各种常见编辑按钮的示例](http://meta.wikimedia.org/wiki/Help_talk%3aEdit_toolbar#Wikipedia.27s_Toolbar%3a_21_Items.21)。

2.  将图像添加到`mediawiki\skins\common\images`. 这些是按钮的图像。[您可以在此处找到示例图像](http://commons.wikimedia.org/wiki/Mediawiki_edit_toolbar)。

请记住 - 如果您升级您的软件，您将需要手动合并`EditPage.php`文件。

# java - 获取错误 org.jasypt.exceptions.EncryptionInitializationException：未为基于密码的加密器设置密码

> ID：10600297
> 
> 赞同：2
> 
> 时间：2012-05-15T12:05:43.550
> 
> 标签：java, jasypt

我正在使用 jasypt-1.9.0 进行加密。

Jdbc.properties

```
jdbc.driverClassName=oracle.jdbc.driver.OracleDriver
jdbc.url=jdbc:oracle:thin:@localhost:1521:ORCL
jdbc.username=testuser
jdbc.password=ENC(lKmVnTVL3zSJXrZpwFmhd6crSHLzYihH)
hibernate.dialect=org.hibernate.dialect.OracleDialect
jpa.databasePlatform=toplink.hibernate.EssentialsHSQLPlatformWithNative
jpa.database=ORCL 
```

```
C:\jasypt-1.9.0\bin>加密输入=testuser 密码=testuser

-  - 环境 -  -  -  -  -  -  -  - -
运行时：Sun Microsystems Inc. Java HotSpot(TM) Client VM 1.5.0_17-b04
----论据--------
输入：测试用户
密码：testuser
-  - 输出 -  -  -  -  -  -  -  -  -  -  - 

lKmVnTVL3zSJXrZpwFmhd6crSHLzYihH

```

我从你的一个网站得到了参考。我正在使用多个上下文文件。我已经配置

```
<bean
class="org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfi
gurer">
<constructor-arg>
<bean class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
<property name="config">
<bean
class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
<property name="algorithm" value="PBEWithMD5AndDES" />
<property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />
</bean>
</property>
</bean>
</constructor-arg>
<property name="locations">
<list>
<value>classpath:/META-INF/props/db/jdbc.properties</
value>
</list>
</property>
</bean>

<bean id="dataSource"
class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
<property name="driverClassName"
value="${jdbc.driverClassName}" ></property>

<property name="url"
value="${jdbc.url}" ></property>
<property name="username"
value="${jdbc.username}" ></property>
<property name="password"
value="${jdbc.password}"></property>
<property name="initialSize" value="10"> </property>
<property name="maxActive"
value="30"> </property>
<property name="maxIdle"
value="10"> </property>
<property name="maxWait"
value="5000"> </
property>
<property name="removeAbandoned"
value="true"> </
property>
<property name="logAbandoned"
value="true"> </
property>

</bean> 
```

当我登录我的应用程序时，我收到错误::

> org.jasypt.exceptions.EncryptionInitializationException：未为基于密码的加密器设置密码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:19:39.657

看来您的“APP_ENCRYPTION_PASSWORD”属性未正确设置为环境变量。请参阅[此](http://docs.oracle.com/javase/tutorial/essential/environment/env.html)链接以检查它是否已正确设置为环境变量。要检查其余配置是否存在问题，请更改`<property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />`为`<property name="password" value="YOUR_PLAIN_TEXT_PASSWORD_HERE" />`YOUR_PLAIN_TEXT_PASSWORD_HERE 并将其替换为纯文本密码，以测试其余配置是否正常工作。

要在 Windows XP 中将 APP_ENCRYPTION_PASSWORD 设置为环境变量，请参阅此[链接](http://support.microsoft.com/kb/310519)。

或者，您可以在运行程序时将密码作为 vm 参数传入。如果它是一个独立的程序，你会像`java ClassWithMain -DAPP_ENCRYPTION_PASSWORD=your_password`. 如果它是一个 Web 应用程序，您必须在启动服务器时传递相同的参数。请参阅关于如何为 tomcat 执行此操作的 SO 上的[这个问题。](https://stackoverflow.com/questions/6225682/passing-jvm-arguments-to-tomcat-when-running-as-a-service)然后在你的 spring 配置中，替换`<property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />`为`<property name="passwordSysPropertyName" value="APP_ENCRYPTION_PASSWORD" />`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-21T14:48:52.450

一旦你设置了环境变量。请重新启动你的eclipse。你可能不会遇到这个问题。如果问题仍然存在，请尝试通过以下代码查找您的环境变量..

```
Map<String, String> env = System.getenv();
            for (String envName : env.keySet()) {
                System.out.format("%s=%s%n", envName,
                                  en`enter code here`v.get(envName));
            } 
```

# sql - 给定文本文件路径，如何获取 TextFile 内容并将其存储到 DataTable

> ID：10600304
> 
> 赞同：-2
> 
> 时间：2012-05-15T12:06:17.250
> 
> 标签：sql, sql-server, sql-server-2008

给定一个 FilePath 如何从文件中检索内容并将所有内容存储到 blob 数据类型的列中。

例：输入：**“F:\Data\sample.txt”**
输出逻辑：**获取“F:\Data\sample.txt”的内容并存入表格列**

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:23:12.480

这就是我所拥有的。

```
create table #ORStable (doclen bigint, doc varbinary(max))

insert into #ORStable
select len(bulkcolumn), *
from
openrowset(bulk 'C:\Users\xxxx\Desktop\Notes\master.txt', SINGLE_BLOB)  --filepath here
as r

select *
from #ORStable 
```

所有我能找到的......你最接近你的答案 [来源](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/a91e4a05-25b2-449a-9d51-08e54fef702c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:23:54.950

嗨最后我得到了答案，这对我有用

```
CREATE TABLE #tempfile (line varchar(8000))
EXEC ('bulk INSERT #tempfile FROM ''D:\New Text Document.txt'' ')
SELECT * FROM #tempfile
DROP TABLE #tempfile 
```

# c++ - 使用指针函数有什么好处？

> ID：10600309
> 
> 赞同：3
> 
> 时间：2012-05-15T12:06:37.897
> 
> 标签：c++, visual-c++, function-pointers

使用指向函数的指针而不是函数本身的真正好处是什么？它是否使执行更快？或者当它被传递给另一个函数时它是否提供了便利？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:08:14.203

它使您能够在运行时“选择”业务逻辑的一个组件——与硬编码函数名称形成对比，这限制了您在编译时选择要使用的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T12:11:22.897

在某些情况下，您必须使用指向函数的指针，没有其他方法。例如，要实现[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)函数，指定比较函数（[排序例程](http://www.manpagez.com/man/3/qsort/)中的最后一个参数）。

编辑：如评论中所述，这是关于 C 的。函数指针来自 C。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T12:08:27.440

函数指针是您将函数存储在变量中并将它们传递给其他函数的方式。“常规功能”没有“优势”，它们是完全不同的东西，试图比较它们是没有意义的。这就像问“哪个更好，变量还是 if 语句？”

函数指针提供了一种原本不可用的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:11:47.497

事实上，传递一个函数的指针比调用函数本身要慢一点。但差异是如此之小，以至于几乎不会产生任何影响。

正如 Jon 所说，在某些情况下，当您可以将函数从程序的一部分传递到另一部分时，它会带来更大的灵活性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T07:42:04.350

函数指针用于许多不确定要调用哪个函数的情况。让我们举个例子。你想对数组进行排序。为此，您要编写一个通用的排序函数。现在这个排序函数需要比较数组元素。但是由于数组可以包含任何元素（int、浮点数、字符串、用户定义的类型等），所以这个排序函数如何比较元素。因此，在这种情况下，您可以将排序确定函数作为参数传递给此排序函数，并据此对数组进行排序。此外，它在其他方面也很有用。假设您要对字符串数组（一串数字）进行排序。您可能希望按数字或字母顺序对其进行排序。

在这种情况下，当您想对数字进行排序时，您可以传递比较函数，该函数根据转换为 int 的字符串的值进行比较。等等...

# android - android tesseract ocr 强制关闭

> ID：10600310
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:06:41.363
> 
> 标签：android, ocr, tesseract

我正在开发一个使用 tesseract android 库函数的应用程序。我成功编译了 tesseract 库并导入到我的工作区。然后我将库引用添加到我的应用程序中。但是我编写的这个方法会导致强制关闭：

```
 public static String BitmapOku (Bitmap image){
            Bitmap image2=image.copy(Bitmap.Config.ARGB_8888, true);
    TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.init("/mnt/sdcard/tessdata/eng.traineddata", "eng"); 
    baseApi.setImage(image2);
    String recognizedText = baseApi.getUTF8Text(); 
    baseApi.end();
return recognizedText; 
```

我的问题是---> 对于 tesseract android ocr 应用程序我必须考虑哪些问题，我是否必须在我的应用程序中使用 leptonica 工具进行图像处理功能 - 例如旋转 - （因为我使用 Opencv 2.4.0）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T16:05:42.843

有时，即使将语言文件插入到 sdcard 中，也有可能无法正确检测到它。因此，为了有效地在 sdcard 中建立文件，以下代码可能很有用。

字符串目录= Environment.getExternalStorageDirectory().getPath().toString();

```
 String[] paths = new String[] { dirc,dirc + "/tessdata/" };

            for (String path :paths ) {
            File dir = new File(path);
            if (!dir.exists()) {
                if (!dir.mkdirs()) {
                   System.out.println("Creation of directory  on sdcard failed");

                } else {
                     System.out.println("Creation of directory  on sdcard successful");
                }
            }

        }

        // lang.traineddata file with the app (in assets folder)
                // You can get them at:
                // http://code.google.com/p/tesseract-ocr/downloads/list
                // This area needs work and optimization
                if (!(new File(dirc + "/tessdata/" + "eng.traineddata")).exists()) {
                    try {

                        AssetManager assetManager = getAssets();
                        InputStream in = assetManager.open("tessdata/eng.traineddata");
                        //GZIPInputStream gin = new GZIPInputStream(in);
                        OutputStream out = new FileOutputStream(dirc + "/tessdata/eng.traineddata");

                        // Transfer bytes from in to out
                        byte[] buf = new byte[1024];
                        int len;
                        //while ((lenf = gin.read(buff)) > 0) {
                        while ((len = in.read(buf)) > 0) {
                            out.write(buf, 0, len);
                        }
                        in.close();
                        //gin.close();
                        out.close();

                      System.out.println("copied eng.traineddata");;
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                } 
```

在这里，语言文件 eng.traineddata 被添加到项目的 assets 文件夹中。在 assets 文件夹中，创建一个 tessdata 文件夹并将 eng.traineddata 放入文件夹中。

希望这可以解决您的问题。

# java - 所有 JUnit 测试运行时的 Eclipse 通知

> ID：10600317
> 
> 赞同：3
> 
> 时间：2012-05-15T12:07:24.467
> 
> 标签：java, eclipse, junit

最近运行我的测试需要相当长的时间（大约 1-2 分钟），而且在等待它们完成时，我通常会被一些事情分散注意力。

当所有测试完成时，有什么方法可以让 Eclipse 给我一个通知（例如，播放声音或其他东西）？我查看了 JUnit 运行器的运行配置中所有可能的设置，但没有找到我可以使用的任何设置。

创建一个名为`xxx.XLastTest`完成这项工作的测试可能是一种解决方法，但我发现这有点难看（如果测试同时运行，它将不起作用，我什至不想在我们的 CI 中看到它）。

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:30:51.750

没有内置任何类型的通知选项，但是自己编写一个插件来完成它会很容易。请参阅[TestRunListener](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/junit/TestRunListener.html)的文档。

[这里有一个类似的例子](https://bitbucket.org/brettdaniel/junitmusicbox/src)，虽然因为没有提供更新站点，所以很难将它安装到 Eclipse 实例中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:35:05.100

您可以运行测试套件并最终收到通知。在 CI 服务器上，不要运行该测试套件，而是“独立”运行所有其他测试。

```
@RunWith( Suite.class )
@SuiteClasses( { Test1.class, Test2.class } )
public class AllTests {
    @AfterClass
    public static void notifySleepyDeveloper() {
        JOptionPane.showConfirmDialog(null, "Tests are finished", "Test Suite", JOptionPane.PLAIN_MESSAGE);
    }
} 
```

# jquery - 如何在不不断通知用户的情况下使用 setInterval 不断检查新消息？

> ID：10600327
> 
> 赞同：0
> 
> 时间：2012-05-15T12:07:55.077
> 
> 标签：jquery, ajax, setinterval

我有一个 jQuery AJAX 函数，我可以在其中检查新消息，如果有的话，我会向用户显示他们有新消息的通知。我的功能是`getNewMessage();`现在在页面刷新时完美运行，因为一切都发生一次。但是，当我把它放进去时`setInterval("getNewMessage()", 20000)`，我会收到一个无限循环的通知。这是可以理解的，但我如何阻止它每次都通知用户但同时继续检查新消息？

这是我的 getMessage 函数，对不起这个大函数：

```
function getNewMessage()
{
    /** Retrieve new messages **/
    $.post('',  { newMessage : true}, function(data)
    {      
        data = $.parseJSON(data);

        /** If new messages exist then display  notification and popup **/
        if(data)
        {

            var newMessageDialog = $('#newMessageDialog');

            /** Create popup dialog options **/
            newMessageDialog.dialog(
            {
                autoOpen: false,
                modal: true,
                minWidth: '100',
                width: '800',
                hide: 'fold',
                show: 'drop',
                title: "New Messages",   
                close: function()
                {
                    hideAllNotifications();
                } 
            });

            /** Initialise variables **/
            var html = '';
            var length = 0;
            var total = 0;

            /** For each message we create the html for the message and insert into dialog **/
            $.each(data, function(name, messages)
            {
                length = messages.length;
                total += length;
                /** For grammatical reasons. If length > 1 then "message" is plural**/
                grammar = (length > 1) ? "messages" : "message";

                /** Reverse the messages so the latest message appears at top and earliest message at bottom **/
                messages.reverse();

                var msgs = '';
                for(var i in messages)
                {
                    msgs += '<p>' + messages[i]['date'] + ': ' + messages[i]['message'] + '</p>';
                }

                html += '<a href="uid[' + messages[i]['uid'] + ']" class="popUpLink">' + name + ': ' + length + ' new ' + grammar + '</a>';
                html += '<div class="popUpDialog" id="viewNewMessageDialog" title="New messages from ' + name + '"><div class="flexi_box"><h3 class="hubHeader">' + name + '</h3>' + msgs + '</div></div>';
                html += '</br>';
            });

            /** Insert Content **/
            $('.flexi_box h3', newMessageDialog).after(html);

            /** Bind dialog to popuplinks **/
            popUpDialogs();

            /** Bind click event
             *  If clicked then we assume message has been read so we delete from messages table **/
            $('a.popUpLink', newMessageDialog).on('click', function()
            {
                /** Get userid from href **/
                var uid = $(this).attr('href');
                var start = uid.indexOf('[');
                var end = uid.indexOf(']');
                uid = uid.slice(start + 1, end);
                removeReadMessages(uid);
            });

            var grammar2 = (total > 1) ? 'messages': 'message'
            var notifier = showNotification('info', '<h3>You have ' + total + ' new ' + grammar2 + '. Click here to view new ' + grammar2 + '</h3>');

            /** Open dialog on click **/
            $('.info').on('click', function()
            {               
                /** Trigger Dialog **/
                $('#newMessageDialog').dialog('open').css('maxHeight', $(window).height()-90);
            });

            return true;
        }
    });//end post   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:09:44.850

而不是调用`setInterval`，您应该调用`setTimeout`来运行该函数*一次*。
然后，在您的 AJAX 回调中，如果您没有收到消息，请`setTimeout`再次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:09:58.773

检测您是否收到了与上一条不同的新消息。仅当有新消息时，才显示对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:10:27.170

创建一个全局变量 - 一个数组 - 每当您显示通知时，将其存储`messages[i]['uid']`在其中。然后，当您再次检查时，排除阵列中已有的任何内容。

# matlab - 根据 Simulink 模型参数选择 MATLAB 向量元素

> ID：10600328
> 
> 赞同：0
> 
> 时间：2012-05-15T12:07:59.923
> 
> 标签：matlab, simulation, simulink

我正在尝试参数化我的一个 Simulink 模型，以便在模型中获得增益，其值等于由模型参数索引的 MATLAB 工作区向量的元素。也就是说，我想定义一个模型参数`WheelIndex`，并在模型内部获得一个 value `AxelLoads(WheelIndex)`。

当我完全按照上面描述的那样做时，我得到“向量索引必须是实数和正整数”错误。当我将模型参数更改为`AxelLoad`（直接在增益组件中使用）并将其值分配为`AxelLoads(1)`（对于第一个轮子）时，我得到：

> “概览/Wheel1”中的错误。无法评估参数“18000.0、15000.0、17000.0、21000.0”设置：“18000.0、15000.0、17000.0、21000.0”。

我还尝试将向量作为常量块导入模型中，并使用由参数参数化的选择器块`WheelIndex`将正确的元素引导到乘法块（从而制作丑陋的增益块），但随后 Simulink 抱怨说我' m 试图使用模型参数来定义“不可调整的值”。

我只是想以某种方式定义要在每个模型实例中使用的 MATLAB 工作区中的参数，这样我就可以通过添加每个车轮上的负载来计算总重量。Simulink 似乎阻止了我一直在尝试的所有解决方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:07:27.833

您可以使用[查找表](http://www.mathworks.com/help/toolbox/simulink/ug/bqiqpa3-1.html)来获取 AxelLoads 与 WheelIndex 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:41:25.880

最简单的方法是如果我刚过来？:P

也许[这个可调参数的解释](http://www.mathworks.se/help/toolbox/rtw/ug/f1023655.html)有点帮助？

# java - 使用 Java 3D 在不同窗口中反映同一对象的操作

> ID：10600329
> 
> 赞同：0
> 
> 时间：2012-05-15T12:08:01.177
> 
> 标签：java, java-3d

我正在用 Java 3D 开发一个系统，它由一个主窗口组成，其中我有一个可以操作（旋转、翻译）的对象，我还有 3 个其他较小的窗口，它们显示来自同一对象的不同视图，但不能t 直接操作对象。

接下来我要做的是将我在主窗口中所做的操作实时反映到其他窗口。

有谁知道我如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:15:14.737

您应该在固定位置定义其他窗口的摄像机，并使用相同的世界矩阵渲染对象，但使用不同的摄像机视图和投影。可能您已经有了渲染对象的代码，您只需要为此使用不同的相机。

我相信，没有任何代码，这是最精确的答案。

# ios - iOS：与父视图控制器通信

> ID：10600330
> 
> 赞同：2
> 
> 时间：2012-05-15T12:08:02.087
> 
> 标签：ios, uinavigationcontroller, uitableview

父视图控制器是一个单词表。子视图在屏幕上切换，让您玩这个词。用户可以“标记”单词（保存到用户默认值中）。父表现在应该如何发现该单词已被标记，以便我们可以显示一个漂亮的标志图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:16:53.980

要将数据从子视图控制器传递回父视图控制器，您需要使用*协议和委托*

*有关在视图控制器*之间来回传递信息的详细说明，请参阅[此SO 接受的答案的](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)**传递数据**部分

 *您可以`boolean`在子*视图控制器*中有一个。

当用户“标记”它时，您可以将该布尔值设置为 true。

如上所示，无论是否已标记，您都可以将值发送回父*视图控制器。*

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:53:28.833

使用委托是最好的选择。让父母成为您孩子的代表。无论您想使用哪种数据类型传递，在您的子 VC 中，如果您只允许在如果您允许多项选择，则为时间或按钮按下功能。调用您的委托方法以接收从孩子发送的这些单词，然后您可以对它做任何您想做的事情。

希望这可以帮助。*

# android - 在 Android 中维护用户会话

> ID：10600343
> 
> 赞同：4
> 
> 时间：2012-05-15T12:08:59.303
> 
> 标签：android, social-networking

我正在尝试为 Android 制作社交网络应用程序。我的问题是用户登录时如何维护用户会话？

请帮我找到上述问题的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T12:15:55.337

尝试

```
public class Session {
private static String sessionId;
private static String userRole;

public static void setSessionId(String sessionId) {
    Session.sessionId = sessionId;
}

public static String getSessionId() {
    return sessionId;
}

} 
```

使用此类并将其导入其他所有活动。您可以定义自己的函数来维护您的特定会话数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T10:51:49.963

使用 SharedPreferences 创建会话。

```
public class Session {

    private SharedPreferences prefs;

    public Session(Context cntx) {
        // TODO Auto-generated constructor stub
        prefs = PreferenceManager.getDefaultSharedPreferences(cntx);
    }

    public void setusename(String usename) {
        prefs.edit().putString("usename", usename).commit();

    }

    public String getusename() {
        String usename = prefs.getString("usename","");
        return usename;
    }
} 
```

现在，当你想像这样使用这个类时，在制作这个类之后，让这个类成为对象

```
private Session session;//global variable 
session = new Session(cntx); //in oncreate 
//and now we set sharedpreference then use this like

session.setusename("USERNAME");
now when ever u want to get username then same work for session object and call this

session.getusename(); 
```

祝你好运:) 密码相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:20:24.767

[http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

请看上面的链接。它的细节相当好。

使用单例来维护用户会话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T16:55:05.573

我`DefaultHttpClient`使用`HttpRequestInterceptor`和`HttpResponseInterceptor`。与此类似的东西：

```
public class HTTPClients {

    private static DefaultHttpClient _defaultClient;
    private static String session_id;
    private static HTTPClients _me;
    private HTTPClients() {

    }
    public static DefaultHttpClient getDefaultHttpClient(){
        if ( _defaultClient == null ) {
            _defaultClient = new DefaultHttpClient();
            _me = new HTTPClients();
            _defaultClient.addResponseInterceptor(_me.new SessionKeeper());
            _defaultClient.addRequestInterceptor(_me.new SessionAdder());
        }
        return _defaultClient;
    }

    private class SessionAdder implements HttpRequestInterceptor {

        @Override
        public void process(HttpRequest request, HttpContext context)
                throws HttpException, IOException {
            Log.d("SessionKeeper", "Adding session with the following string: " + session_id);
            if ( session_id != null ) {
                request.setHeader("Cookie", session_id);
            }
        }

    }

    private class SessionKeeper implements HttpResponseInterceptor {

        @Override
        public void process(HttpResponse response, HttpContext context)
                throws HttpException, IOException {
            Header[] headers = response.getHeaders("Set-Cookie");
            if ( headers != null && headers.length == 1 ){
                Log.d("SessionKeeper", "Keeping session with the following string: " + headers[0].getValue());
                session_id = headers[0].getValue();
            }
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-25T13:17:25.783

当我尝试发送该会话 id 时，我在我的 android 客户端遇到了类似的问题，服务器端正在创建一个新会话......但是你在 android 客户端检查你没有创建 DefaulthttpClient 两次......只创建一次 httpclient 说主要活动并传递其他活动中的对象......不要创建第二个 HttpClient

# macos - 将文件从服务器复制到本地硬盘

> ID：10600345
> 
> 赞同：3
> 
> 时间：2012-05-15T12:09:10.990
> 
> 标签：macos, unix, ssh, scp

我正在尝试使用 mac OSX 终端（打开 ssh 客户端）将数据库转储 sql 文件从我的服务器复制到我的硬盘。我知道命令应该是这样的：

```
scp [[user]@host]:mydump.sql mydump_local.sql 
```

但是我发现它`copy`在同一台服务器上而不是我的硬盘上执行了该文件（即使用`ls *`，我发现了两个文件 mydump.sql 和 mydump_local.sql）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T12:13:30.587

首先，不要 ssh 进入远程服务器。然后，我发现这是一个非常好的 scp 语法资源：[Secure Copy (scp) 的示例语法](http://www.hypexr.org/linux_scp_help.php)

您正在寻找的是：将文件“foobar.txt”从远程主机复制到本地主机

```
$ scp your_username@remotehost.edu:foobar.txt /some/local/directory 
```

如果您仍然遇到问题，请发布您正在使用的确切命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:14:40.257

当您希望将其放置在当前目录中时，尝试使用 ./mydump_local 作为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:24:27.647

如果您首先通过 ssh 连接到远程主机，您将获得一个远程 shell。如果您在该远程 shell 中处理您的文件，则在远程服务器上创建一个 scp。

不要对远程主机进行 ssh，只需使用 scp。

# java - Eclipse RCP 表动态更新

> ID：10600346
> 
> 赞同：0
> 
> 时间：2012-05-15T12:09:31.077
> 
> 标签：java, eclipse, rcp

我想在将动态更新的视图部分中创建一个表（行数、列数、列名）。该模型是字符串数组的集合。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:33:53.553

最简单的方法是使用 TableViewer 实例，指定其内容提供者，然后，您可以在每次对其内容进行更改时调用其 refresh() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T12:20:10.530

@itun。动态显示列的最简单方法是创建所有列并将不必要列的宽度设置为零。还有另一种创建动态列的方法（我正在使用）如下。

1.  为列创建扩展点（列名、方向、数据提供者）
2.  使用步骤 1 创建扩展名。
3.  在视图中创建列的实现。

    ```
     String[] id = preferences.getString(PREFS_COLUMNS).split(";");
        for (int i = 0; i < id.length; i++) {
            String name = "";
            int style = SWT.LEFT;
            Image image = null;
            ILabelProvider provider = registry.createLabelProvider(id[i]);
            if (provider != null) {
                name = registry.getName(id[i]);
                style = registry.getOrientation(id[i]);
                if (provider instanceof ITableLabelProvider) {
                    name = ((ITableLabelProvider) provider).getColumnText(null, i);
                    image = ((ITableLabelProvider) provider).getColumnImage(null, i);
                }
            } else {
                LogFactory.getLog(getClass()).warn("Missing column [" + id[i] + "]");
            }
            if (index < table.getColumnCount()) {
                tableColumn = table.getColumn(index);
                if (tableColumn.getData("labelProvider") != null)
                    ((ILabelProvider) tableColumn.getData("labelProvider")).dispose();
            } else {
                tableColumn = new TableColumn(table, style);
                tableColumn.addControlListener(columnControlListener);
                tableColumn.addSelectionListener(columnSelectionListener);
                tableColumn.addDisposeListener(new DisposeListener() {
                    public void widgetDisposed(DisposeEvent e) {
                        if (e.widget.getData("labelProvider") != null)
                            ((ILabelProvider) e.widget.getData("labelProvider")).dispose();
                    }
                });
            }
            tableColumn.setText(name);
            tableColumn.setAlignment(style);
            tableColumn.setImage(image);
            tableColumn.setMoveable(true);
            tableColumn.setData("labelProvider", provider);
            tableColumn.setData("columnId", id[i]);
            index++;
        } 
    ```

# vim - 在vim中将部分移动到新文件

> ID：10600348
> 
> 赞同：9
> 
> 时间：2012-05-15T12:09:33.827
> 
> 标签：vim

我有一个应该移到`section`. 通常我会通过视觉选择块，删除它，从，打开，然后粘贴来做到这一点。`file1``file2``:wq``file1``file2`

有没有一种简单的方法可以在不关闭的情况下将文本块从移动`file`到`file2`移动`vim`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-26T09:30:20.353

或者：

1.  将选择写入新文件`:'<,'>w file2`

2.  然后重新选择并删除`gvd`

第一步包含在*vimtutor* `Lesson 5.3: SELECTING TEXT TO WRITE`中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T12:12:20.480

您可以使用拆分打开新文件，`:sp newfile`然后从第一个文件中正常删除该块。`ctrl` `w`然后，使用和更改为另一个拆分`w`。然后使用`p`将删除的内容放入另一个文件中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T12:14:07.060

您可以在新缓冲区中打开文件。

只需通过打开文件`:e file2`并粘贴文本。要在缓冲区之间快速移动，请使用`:e #`或`:b #`

查看`:help buffers`更多信息

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-15T13:29:49.983

由于没有人提到这一点：您可以改用标签。

1.  选择你的块。

2.  删除它`d`

3.  在新选项卡中创建一个新缓冲区`:tabnew newfile.name`

4.  粘贴并使用 和`p`保存`:w`

5.  您可以返回`gT`或关闭当前选项卡`:q`

我个人较新的使用缓冲区——只有标签。阅读更多关于他们的信息`:help tabpage`

# android - 支持屏幕不工作？

> ID：10600349
> 
> 赞同：0
> 
> 时间：2012-05-15T12:09:34.310
> 
> 标签：android

我只想将我的应用程序限制为 10.1 平板电脑。下面是它的清单配置。

```
<supports-screens
    android:largeScreens="false"
    android:normalScreens="false"
    android:requiresSmallestWidthDp="720"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

我能够使用 Emulator 4.0.3(HVGA) 运行该应用程序。谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:29:04.150

我不确定，但我认为此限制适用于在 Google 市场和真实设备上显示应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T21:41:18.850

此限制仅适用于 Google Play 过滤器。`android:minSDKVersion`您可以按属性尝试，如下所示：

```
<uses-sdk
    android:minSdkVersion="13"
    android:targetSdkVersion="17" >
</uses-sdk> 
```

这可以帮助你。

# winjs - 如何从 Windows 8 WInJS 应用程序中启动 IE10 中的 URL？

> ID：10600359
> 
> 赞同：5
> 
> 时间：2012-05-15T12:10:13.643
> 
> 标签：winjs

这可能是一个愚蠢的问题，但我无法找到答案。我想在我的 Windows 8 javascript 应用程序中使用 IE10 启动一个特定的 URL，即我的应用程序将被暂停并且 IE10 将启动。我如何用 javascript 做到这一点？

谢谢 Themos

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T14:51:17.010

```
var url = new Windows.Foundation.Uri("http://www.google.com")
Windows.System.Launcher.launchUriAsync(url); 
```

# soapui - soapUI：在预定时间无人值守运行测试用例

> ID：10600362
> 
> 赞同：0
> 
> 时间：2012-05-15T12:10:23.030
> 
> 标签：soapui

是否可以在soapUI pro 中在预定时间无人值守地运行测试用例。比如晚上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T06:27:09.103

soapUI 带有一个命令行运行器（`testrunner.bat`或`testrunner.sh`）。它需要一些参数来控制要运行的测试等。

请参阅此处的文档：http: [//soapui.org/Test-Automation/functional-tests.html](http://soapui.org/Test-Automation/functional-tests.html)

[在 Windows 上，您可以使用Task Scheduler](http://windows.microsoft.com/en-us/windows7/Schedule-a-task)自动执行，在 Unix 上，例如使用[cron job scheduler](http://en.wikipedia.org/wiki/Cron)。

# mercurial - mercurial ssl 访问允许拉取，但需要对推送进行身份验证

> ID：10600364
> 
> 赞同：1
> 
> 时间：2012-05-15T12:10:28.073
> 
> 标签：mercurial, apache2, hgweb

我已经通过 SSL 设置了一个 mercurial 服务器。在 apache 配置文件中，我使用 mysql 数据库设置了身份验证。

我希望每个人都能够在没有凭据的情况下从存储库中提取，但将推送权限限制为经过身份验证的用户。现在完成的方式要么是每个人都通过拉取和推送的身份验证，要么没有人是。

我的apache配置是这样的：

```
<Location /hg/repo>
   AuthType Basic
   AuthName "Repository Access"
   AuthBasicAuthoritative Off
   AuthUserFile /dev/null
   AuthMySQL                    On
   AuthMySQL_Authoritative      On
   AuthMySQL_Host               localhost
   AuthMySQL_DB                 repo
   AuthMySQL_User               repo
   AuthMySQL_Password_Table     users_auth_external
   AuthMySQL_Group_Table        users_auth_external
   AuthMySQL_Username_Field     username
   AuthMySQL_Password_Field     passwd
   AuthMySQL_Group_Field        groups
   AuthMySQL_Encryption_Types   SHA1Sum
   Require group                pink-image
   <LimitExcept GET>
       Require valid-user
   </LimitExcept>
</Location> 
```

hg 还需要对 ssl pull 进行身份验证，无论 LimitExcept 开关。

有没有办法限制身份验证仅用于推送到存储库？

简单的 http 访问是不够的，因为如果某人是开发人员，她会通过 https 签出代码。

SSH 访问是不可能的，因为一些开发者有防火墙禁止的 ssh 端口。

解决方案之一是 hg 是否会记住 https 凭据。

感谢您阅读问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:19:25.190

身份验证应包含在异常规则中。

```
<Location /hg/repo>
   <LimitExcept GET>
        AuthType Basic
        AuthName "Repository Access"
        AuthBasicAuthoritative Off
        AuthUserFile /dev/null
        AuthMySQL                    On
        AuthMySQL_Authoritative      On
        AuthMySQL_Host               localhost
        AuthMySQL_DB                 repo
        AuthMySQL_User               repo
        AuthMySQL_Password_Table     users_auth_external
        AuthMySQL_Group_Table        users_auth_external
        AuthMySQL_Username_Field     username
        AuthMySQL_Password_Field     passwd
        AuthMySQL_Group_Field        groups
        AuthMySQL_Encryption_Types   SHA1Sum
        Require group                pink-image      
  </LimitExcept>
</Location> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:33:59.043

```
One of the solutions would be if hg would remember the https credentials. 
```

它可以记住推送和拉取的凭据。如果您不介意将详细信息添加到配置文件之一（用户的配置或存储库克隆的） ，请查看以下`auth`部分`hg help config``hgrc`

这意味着将密码放在您可能不喜欢的配置文件中，以便您可以使用[Mercurial Keyring Extension](http://mercurial.selenic.com/wiki/KeyringExtension)来更安全地存储密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:43:10.390

事实证明，自动凭据是不够的。可以通过 Web 界面访问存储库。但是，相同的配置文件会在浏览器中弹出一个身份验证对话框，这会使 Web 界面无法使用。

# php - 在 kohana 中定义一个全局函数

> ID：10600367
> 
> 赞同：0
> 
> 时间：2012-05-15T12:10:34.783
> 
> 标签：php, kohana

我是 kohana 的新手，也是 php 的新手。

我有一个简单的 URI 编码函数，它模仿 JS %100 的函数，与 PHP 不同。

我想在某些类中使用这个函数，但我不想在每一个类中都定义它。

那么，如何定义一个在所有地方都可以使用的全局函数呢？

（我不想为 3 行代码函数创建一个类）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T14:28:19.680

重载核心[URL](http://kohanaframework.org/3.2/guide/api/URL)帮助程序类。将您的函数添加为静态方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:29:44.793

超越您避免良好的面向对象原则的愿望。创建一个新类并创建一个静态公共函数。不要创建糟糕的旧全局函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:02:55.423

```
<?php
function yourFunction( ) {
    return 'your result';
} 
```

那个怎么样？只需将其写入始终包含在内的文件中即可。不要仅仅为了认为你在做 OO 而去创建一个静态类，这是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T22:31:59.733

您可以将全局函数放入 bootstrap ( `APPPATH/bootstrap.php`)，但我建议通过在以下位置创建一个新文件来扩展核心 URL 帮助程序类（假设您使用的是 Kohana 3.x）`APPPATH/classes/url.php`：

```
class URL extends Kohana_URL {

    public static function encode($uri)
    {
        // ...
    }

} 
```

几乎总是值得 3 行代码。Kohana 旨在让您覆盖其核心类。您的代码将更易于维护。

# java - CXF：解组错误：意外元素，{} 是什么意思？

> ID：10600369
> 
> 赞同：7
> 
> 时间：2012-05-15T12:10:44.887
> 
> 标签：java, web-services, jax-ws, cxf

连接到我的 Web 服务时出现错误：

> javax.xml.ws.soap.SOAPFaultException：解组错误：意外元素（uri：“”，本地：“OrderID”）。预期元素是 <{}Login>、<{}CrewId>、<{}OrderID >、<{}OrderNumber >

`org.apache.cxf.transport.servlet.CXFServlet`使用和`jaxws:endpoint`注释公开服务。客户端是使用 CXF 生成的。首先，令我惊讶的是，我在两端都使用了相同的技术并且解决方案不起作用，其次，错误消息中出现了这个神秘的 {}。

那么，有什么问题以及如何理解这个 {}？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T17:57:44.830

> 你注意到 OrderID 和 '>' 之间的空格了吗？预期是 <{}OrderID > 并且您发送 >“OrderID”。检查元素名称中是否没有空格。

虽然 Stepan Vihor 的上述回答帮助您获得了所需的内容，但让我回答您关于“{}”含义的问题：

这意味着 JAX-B Unmarshaller 期望您的 OrderID 元素没有命名空间，即该元素的命名空间 uri 需要等于“”。

[有关XML 命名空间](http://www.w3schools.com/xml/xml_namespaces.asp)的简要介绍，请参见此处

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-15T13:03:55.410

你注意到`OrderID`和'>'之间的空格了吗？预期是`<{}OrderID >`和你发送`"OrderID"`。检查元素名称中是否没有空格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-15T20:14:25.483

@icyitscold，我想根据我的经验添加的评论是，您可以将 elementFormDefault 更改为“合格”，如 `elementFormDefault="qualified"` element `xs:schema`. 默认情况下，命名空间将被限定。

这是 WSDL-first 方法，如果您使用 code-first 方法，您可以考虑将更改添加为

`@javax.xml.bind.annotation.XmlSchema( attributeFormDefault = javax.xml.bind.annotation.XmlNsForm.UNQUALIFIED, elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-25T03:09:38.150

我得到了同样的错误，

> javax.xml.ws.soap.SOAPFaultException：解组错误：意外元素（uri：“”，本地：“国家”）。预期元素为 <{}seconds>、<{}month>、<{}hour>、<{}year>、<{}minutes>、<{}day>

然后我在 Web 服务端发现响应类型添加了一个新属性“国家”。

要忽略新添加的属性，请在“jaxws:client”设置中添加以下属性。

```
<jaxws:client id="abc"
              serviceClass="someClass"
              address="url">
    <jaxws:properties>
        <entry key="schema-validation-enabled" value="false"/>
        <entry key="set-jaxb-validation-event-handler" value="false"/>
    </jaxws:properties>
</jaxws:client> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-09-21T11:05:30.007

有时您必须指定 wsdl 中使用的名称（区分大小写）：<{Log}>、<{} CrewId>、<{} OrderID>、<{} OrderNumber>

```
@XmlElement(name = "CrewId")
protected String crewId;
@XmlElement(name = "OrderID ")
protected String orderID;
@XmlElement(name = "Login")
protected String login;
@XmlElement(name = "OrderNumber")
protected String orderNumber; 
```

# objective-c - 如何在目标 c 中的 Splash 图像上方显示“正在加载...” gif 图像？

> ID：10600371
> 
> 赞同：3
> 
> 时间：2012-05-15T12:10:55.547
> 
> 标签：objective-c, ios, splash-screen

我想在应用程序加载数据时在启动屏幕上显示 GIF 图像。

我的初始图像显示至少大约 3 或 4 秒，这就是为什么我想在初始图像上显示加载文本（如 gif 图像），以便用户认为应用程序正在加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:34:39.587

只需在您的初始图像中添加一个标签，然后`NSTimer`定期更改它的文本，如下所示

```
splash = [[UIImageView alloc] initWithFrame:self.window.frame];
splash.image = [UIImage imageNamed:@"splash"];
[self.window addSubview:splash]; 
```

这是我用来显示初始屏幕的代码，然后

```
NSTimer *loading = [[NSTimer alloc]init];
[loading performSelector:@selector(YOUR_SELECTOR) withObject:YOUR_LABEL afterDelay:0.3f]; 
```

where`YOUR_SELECTOR`是设置标签文本的方法，是设置文本`YOUR_LABEL`的标签

**编辑** 抱歉`NSTimer`实际上我使用了带有文本加载的活动指示器...在`application:didFinishLaunchingWithOptions:`方法中

它的代码是

```
splash = [[UIImageView alloc] initWithFrame:self.window.frame];
splash.image = [UIImage imageNamed:@"splash"];    
[self.window addSubview:splash];
hud = [[MBProgressHUD alloc]initWithView:splash];
[splash addSubview:hud];
hud.labelText = @"Loading...";
[hud show:YES];
[self performSelector:@selector(Load_FirstView) withObject:nil afterDelay:3];
[self.window makeKeyAndVisible]; 
```

方法`Load_FirstView`如下

```
-(void)Load_FirstView
{
    [splash removeFromSuperview];
    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
    self.navigationController.navigationBar.tintColor = [UIColor blackColor];
    masterViewController.managedObjectContext = self.managedObjectContext;
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:28:25.627

如果您使用 Default.png 作为初始图像，则无法对其进行动画处理。一种方法是更快地启动应用程序，然后在加载数据期间显示动画视图。所以基本上你唯一的解决方案是远离 Default.png 并使用自定义视图来代替可以动画的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:30:13.240

从使用 Default.png 开始，然后加载一个`UIView`包含与（整个屏幕）`UIImageView`相同框架的单个文件。`UIView`将 Default.png 设置为`UIImage`ImageView 并根据需要添加任何控件（例如`UIActivityIndicatorView`）。

# python - 使用 django 和 REST-api 获取 salesforce.com access_token

> ID：10600372
> 
> 赞同：1
> 
> 时间：2012-05-15T12:10:58.853
> 
> 标签：python, django, salesforce

我尝试使用以下代码向 Salesforce 授权我的帐户：

```
data = {
    'client_id': settings.CONSUMER_KEY,
    'client_secret': settings.CONSUMER_SECRET,
    'redirect_uri': 'https://DOMAIN.com/salesforce/auth/',
    'grant_type': 'authorization_code',
}
data = urllib.urlencode(data)
result = urllib2.urlopen('https://SALESFORCEDOMAIN.com/services/oauth2/token', data).read() 
```

但仍然收到错误的请求错误。我应该改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:17:10.397

你试过httplib2吗？

```
from httplib2 import Http
from urllib import urlencode
head = Http()
data = dict(name="Whatever", stuff="Hey you")
response, content = head.request("http://domain.com/etc", "METHOD", urlencode(data)) 
```

# php - 编码 php 输出以生成没有 html 的新行

> ID：10600373
> 
> 赞同：-2
> 
> 时间：2012-05-15T12:11:03.333
> 
> 标签：php, html

我想在 html 页面上生成这样的输出：

```
111
222
333
44
555 
```

根本不使用html。我尝试使用 \n\r 但这不起作用。我正在寻找一些字符 ascii 或 utf，它们会在我用 php 回显它时删除一行并产生该输出。

我认为在头部向浏览器发送文本或其他内容而不是 html 的可能解决方案：

> ```
> <meta http-equiv="Content-Type" content="text; charset=UTF-8"> 
> ```

我不确定还有什么其他解决方案..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:14:26.523

如果要输出文本文件，请像这样更改 HTTP 标头中的内容类型

```
header("Content-type: text/plain");

echo "some\nplain\ntext"; 
```

-*你不能把它和 HTML 混在一起，要么全有，要么全无*:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T12:13:22.953

将输出包装起来`<pre></pre>`，然后每当您想换行时，请使用`PHP_EOL`：

```
echo $string . PHP_EOL; 
```

# c# - 设计私有方法的良好实践

> ID：10600377
> 
> 赞同：1
> 
> 时间：2012-05-15T12:11:23.873
> 
> 标签：c#, oop

查看来自开源和闭源项目的一些 c# 代码，我看到私有的，有时是公共的方法被设计为接收参数，而不是直接访问实例变量来提取他们需要的参数

```
 class A
  {
    private B b;

    public void Methode1()
    {            
        Methode2(b.SomeProperty);
    }                

    private void Methode2(string param)
    {         
    }
  } 
```

这被认为是一种好的做法，还是只是一种编程方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:13:52.457

是的，这很正常。考虑也搬到`Methode2`课堂上`B`（[告诉，不要问](http://c2.com/cgi/wiki?TellDontAsk)原则）：

```
 class A
  {
    private B b;

    public void Methode1()
    {            
        b.Methode2();
    }
  } 
```

有什么不好 - 将整个对象作为方法的参数传递，当您只需要它的属性值时（不要传递给方法，而不是执行所需的）：

```
 class A
  {
    private B b;

    public void Methode1()
    {            
        Methode2(b);
    }                

    private void Methode2(B b)
    {
        // use b.SomeProperty         
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:14:07.280

*在这个*主题上没有“好的做法” 。

这是一种“重载”方法（找不到确切的术语来定义它），保持其中一些私有。那是。

在这个具体的例子中，它也*可能*`Methode2(string param)`是从类的其他部分调用的，具有不同的 from`b.SomeProperty`参数。

所以为了避免重复代码，开发者引入了一种新`Methode2(..)`方法。

# objective-c - 解析使用哪个条件的 JSON

> ID：10600378
> 
> 赞同：0
> 
> 时间：2012-05-15T12:11:30.277
> 
> 标签：objective-c, json, parsing

我想知道如何解析 JSON 直到没有其他内容？

这是我的代码，但我需要其他东西来满足我的条件......

```
 for (int i = 0; i != 7; i++)
        {
            Boxes *boxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:context];
            boxes.name =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"] ;
            boxes.sexe =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"sexe"] ;
            boxes.topic =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"topic"] ;
            boxes.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:37:13.307

只需获取 boxDetail 对象的计数。

```
int count = [[json objectForKey:@"boxesDetail"] count];
 for (int i = 0; i < count; i++)
        {
            Boxes *boxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:context];
            boxes.name =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"] ;
            boxes.sexe =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"sexe"] ;
            boxes.topic =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"topic"] ;
            boxes.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
        } 
```

# php - 如何使用后端数据填充 Zend_Layout 变量？

> ID：10600381
> 
> 赞同：5
> 
> 时间：2012-05-15T12:11:48.180
> 
> 标签：php, zend-framework, zend-layout

在尝试遵守已建立的最佳实践（例如避免单例、注册表、静态属性和基本控制器）时，如何使用仅由布局使用且在所有操作中通用的数据填充我的布局（以及布局使用的部分）？

典型的场景是建立在可变数据上的菜单，比如数据库。牢记关注点分离，视图/布局不应该直接与后端对话，而是被告知要包含什么。

如果不使用 Zend_Layout 中的单例“功能”，则根本不可能使用前端控制器插件。插件只知道请求和响应对象，不能访问控制器、视图或布局。

Zend 的动作助手有 init/preDispatch/postDispatch 方法。可以将操作助手添加到 HelperBroker（例如使用引导程序），这些将在正常的应用程序流程中执行。

使用 init 方法将数据注入视图是不可能的，因为它是在控制器/视图准备好之前触发的。preDispatch/postDispatch 是可能的，但并不完美，因为这些方法*总是*在执行控制器操作时触发。

这意味着 Zend_Controller_Action::_forward() 的所有使用也将在所有动作助手中执行 preDispatch/postDispatch。除了速度之外，这对代码没有任何大的影响，我真的不想多次设置视图（或视图助手）变量。可以使用某种 $firstRun 变量来解决这个问题，但我真的不想在我自己的代码中跟踪这个问题。

另一种方法是在引导程序中执行此操作，但在我看来它确实不属于那里。

那么，我怎样才能用数据库中的数据填充我的布局/视图助手，只做一次并且仍然保持良好的关注点分离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:07:30.030

我遵循了这种`ActionHelper`方法，在方法上设置了视图变量`preDispatch`。在我看来，这是最合乎逻辑的地方。此外，我的项目没有使用`Zend_Controller_Action::_forward()`，所以我对多次触发助手没有任何速度问题。

希望有帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:00:02.833

您可以按照此[答案](https://stackoverflow.com/questions/6059490/zend-action-helper-versus-plugin#answer-6068304)中的说明使用 Action Helpers （也可以查看问题，它与您的问题非常相似）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:21:07.697

我也会使用动作助手。只需填充视图变量并使用普通的 PHP/partials/render/viewHelper 显示它们（取决于复杂性）。

您可以使用 preDispatch 解决多次运行的问题

```
if (!($this->view->myVar)) { // or array_key_exist or isset - depending on your use case
    $this->view->myVar = $someModel->getSomeData();
} 
```

这很好海事组织。

# php - 在php中将微秒添加到时间

> ID：10600382
> 
> 赞同：0
> 
> 时间：2012-05-15T12:11:50.190
> 
> 标签：php, time

这是我用来以微秒获取当前时间的代码，

```
 $time=date("Y-m-d\TH:i:s") . substr((string)microtime(), 1, 8); 
```

我需要通过添加一些以微秒为单位的值来更改 $time 中的值。是否可以将微秒添加到时间？实际上我需要创建一个模拟器，这里我需要检查一秒钟的时间间隔内发生了多少次执行，并找出执行需要多少微秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:21:00.437

您可以像这样为旧版本构建后备功能。（仅适用于当前时间）

```
function udate($format, $utimestamp = null){
                if(is_null($utimestamp)){
                    $utimestamp = microtime(true);
                    $timestamp = floor($utimestamp);
                    $milliseconds = round(($utimestamp - $timestamp) * 1000000);
                    return date(str_replace("u",$milliseconds,$format), $timestamp);
                }else
                    return date($format, $utimestamp);
            }

echo udate('Y-m-d H:i:s.u'); 
```

# jquery-mobile - jquery-mobile：可在列表视图中折叠

> ID：10600384
> 
> 赞同：1
> 
> 时间：2012-05-15T12:11:59.853
> 
> 标签：jquery-mobile

我想在 jquery mobile 的列表视图中使用一些可折叠元素。我可以很好地设置可折叠在相应的内部添加

*   部分，但是当可折叠未折叠时，可折叠信息不在可折叠气泡内，我该如何解决这个问题以拥有包含标题和描述的气泡？

    谢谢

    ```
    <div id="dispositivo" data-role="page" data-theme="c" data-cache="refresh">
    <div data-role="content" role="main">
            <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
                <li data-role='list-divider'>Titulo</li>
                <form id="form_disp" name="form_disp" method="post" action="test.php"> 
                    <li data-role='fieldcontain'>
                        <a id="estado" name="estado" href="#" data-theme="b" data-role="button" data-inline="true">Boton</a>                
                    <div data-role="content" data-inset="true">
                        <div data-role="collapsible" data-inset="true">
                            <h3>Info1</h3>
                            <p>Ahora estamos viendo el info 1</p>
                        </div>
                        <div data-role="collapsible">
                            <h3>Info 2</h3>
                            <p>Ahora estamos viendo el info 2</p>
                        </div>
                    </div>
                <button data-theme="b" id="b_conf_disp" data-role="button" data-inline="true" type="submit">Boton 2</button>
            </form>
            </ul>
        </div>      
    </div> 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:25:28.177

我想你错过了`</li>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T15:41:46.083

对于类似的事情，您可以尝试使用我编写的插件，该插件允许在列表视图中内联打开某些列表视图项目。

[Github 仓库](https://github.com/ALSpringer/inlinelistview)

# objective-c - UIButtons 上的 FadeIn FadeOut 动画

> ID：10600392
> 
> 赞同：2
> 
> 时间：2012-05-15T12:12:39.230
> 
> 标签：objective-c, ios, ios4

我有两个 UIButton 让我们说：

UIButton *product UIButton *nextProduct

我正在针对产品在每个按钮上设置图像。

**我想以这样的方式为按钮设置动画，即一个按钮淡入，而第二个按钮淡出。**

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:26:12.680

我会改用新的块 API。我不知道第一个答案是否会让用户在动画期间与控件进行交互。我有一个类似的案例并使用了下面的代码。关键是**选项：UIViewAnimationOptionAllowUserInteraction**

```
[UIView animateWithDuration:0.5f 
                      delay:0.0f
                    options:UIViewAnimationOptionAllowUserInteraction 
                 animations:^(void) {
    [product setAlpha:0.0f];
    [nextProduct setAlpha:1.0f];

} completion:^(BOOL finished) {
    //Maybe set the new alpha here when the first animation is done?
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:16:30.110

将您想要动画的更改包裹在`UIView beginAnimations`和之间`UIView commitAnimations`。

```
[UIView beginAnimations:nil context:nil];

product.alpha = 0;
nextProduct.alpha = 1;

[UIView commitAnimations]; 
```

查看 UIView 文档以了解如何自定义时间和外观。

# php - 使用时区使用 NOW() 删除行

> ID：10600393
> 
> 赞同：2
> 
> 时间：2012-05-15T12:12:39.493
> 
> 标签：php, mysql

我正在尝试运行 mysql 查询来删除行，但面临时区问题。我的服务器在美国，我的用户在亚洲。在表格中输入的时间戳是亚洲的。我可以删除亚洲时间的行吗？这是我的查询；

```
mysql_query("DELETE FROM SMS_IN WHERE NOW() > sent_dt"); 
```

`NOW()`正在使用美国时间而不是亚洲时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T19:57:10.420

您可以使用[CONVERT_TZ](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_convert-tz)将时间从用户时区转换为服务器时区：

```
SELECT CONVERT_TZ(NOW(), 'user time zone', 'server time zone'); 
```

例如：

```
mysql_query("DELETE FROM SMS_IN WHERE CONVERT_TZ(NOW(), 'Asia/Hong_Kong', 'America/Montreal') > sent_dt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:16:18.147

您可以更改 global `time_zone`，或者您可以使用`DATE_ADD`or `DATE_SUB`on`NOW()`来调整您可能知道的分离小时数（我希望为了我们所有人的缘故保持不变 [DST 除外]）。

# javascript - javascript内部html不断更新

> ID：10600396
> 
> 赞同：1
> 
> 时间：2012-05-15T12:12:53.177
> 
> 标签：javascript, youtube-api

这与 youtube api 和获取当前时间有关。

```
 var currenttime = ytplayer.getCurrentTime();
    document.getElementById(&#39;currenttime&#39;).innerHTML = currenttime;

    <p id="currenttime"></p> 
```

我如何让它不断更新当前时间，以便您可以在视频播放时看到屏幕上的时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:15:01.413

您可以使用一个计时器，每隔一秒获取一次时间。

```
var timer = setInterval(function(){
          document.getElementById("currenttime").innerHTML = currenttime;
},1000); 
```

注意：
仔细看看（关于 setInterval 和 setTimeout 的区别）： [setTimeout 还是 setInterval？](https://stackoverflow.com/questions/729921/settimeout-or-setinterval)

# vb.net - system.io.streamwriter 写线

> ID：10600397
> 
> 赞同：0
> 
> 时间：2012-05-15T12:13:01.177
> 
> 标签：vb.net, streamwriter

我正在将每一行写入一个文本文件：

> 将 objWriter 调暗为新 System.IO.StreamWriter(filename)
> 
> ```
>  For Each x In tofile
>              objWriter.WriteLine(x)
>          Next 
> ```
> 
> objWriter.Close()

完美的工作唯一的问题是，当它完成时，它会在我不想要的文本文件的末尾写一个空行。无论如何，thair 会绕过这个吗？

或者如果不删除最后一行，只要它是空白的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:20:34.683

当然有：

```
System.IO.File.WriteAllText(filename, string.Join(Environment.NewLine, tofile)) 
```

这将与您当前的代码具有相同的效果，而不必自己弄乱流。

也可以：

```
System.IO.File.WriteAllLines(filename, tofile) 
```

假设`tofile`是纯字符串数组。

如果由于某种原因您确实需要直接使用 Stream，请不要`WriteLine`在最后一次迭代中使用：

```
For i=1 To tofile.Length
    x = tofile(i)
    If i<tofile.Length Then
        objWriter.WriteLine(x)
    Else  
        objWriter.Write(x)
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:19:30.017

WriteLine 在每次写入后附加 Environment.NewLine。
因此，您实际上并没有在输出中添加一行。
你可以证明它试图用 StreamReader.Readline() 读回你的文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:21:30.473

WriteLine 方法与 Write 方法基本相同，只是在其参数末尾添加了一个换行符。这导致了这里的问题，因为它也会在最后一行的末尾添加一个换行符，即使它后面没有任何内容。

如果`tofile`可以转换为数组，则可以将`For Each`循环替换为

```
objWriter.Write(String.Join(Environment.NewLine, tofile.toArray())) 
```

当然，在替换`toArray`相关演员之后。

但是，至少在我看来，文本文件格式不应该敏感到被空行弄乱。

# .net-3.5 - 用逗号分隔 Tridion 多值字段的最快方法

> ID：10600404
> 
> 赞同：12
> 
> 时间：2012-05-15T12:13:20.970
> 
> 标签：.net-3.5, tridion, tridion2009

将多值 Tridion 文本字段拆分为逗号分隔字符串的最快方法是什么？就我而言，我使用的是 C#，但我想也欢迎任何其他示例。这似乎是丑陋而漫长的道路：

```
var multiTextField = fields["multiTextField"] as TextField;
string multiCommaField = String.Empty;

for (int i = 0; i < multiTextField.Values.Count; i++)
{
    multiCommaField += multiTextField.Values[i].ToString() + ",";
} 
```

编辑：我正在使用 .NET 3.5 和 Tridion 2009 SP1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T12:34:35.267

您尚未在问题中指定您的 Tridion 或 .Net 版本，但您可以使用几种不同的技术从文本字段中获取逗号分隔值。

如果您使用的是.Net 4，我相信您可以这样做：

```
string.Join(",", multiTextField.Values); 
```

只要`multiTextField.Values`实现 IList。

如果您使用的是 .Net 3.5 或更早版本，我相信该`string.Join()`函数需要一个数组而不是`IList`.

这里有一个很好的讨论关于[列表上的字符串连接 (.Net 4)](https://stackoverflow.com/questions/3610431/string-join-on-a-listint-or-other-type)
或这里[尝试字符串。加入 IList (.Net 4)](https://stackoverflow.com/questions/10112392/trying-to-string-join-an-ilist)
或[从 IList (.Net 3.5) 创建逗号分隔列表](https://stackoverflow.com/questions/799446/creating-a-comma-separated-list-from-iliststring-or-ienumerablestring)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T12:29:23.850

您可以使用 LINQ：

```
var multiTextField = fields["multiTextField"] as TextField;
string delimeter = ",";     
Console.WriteLine(multiTextField.Values.Aggregate((i, j) => i + delimeter + j)) 
```

或者以更短（更丑）的方式：

```
((TextField) fields["multiTextField"]).Values.Aggregate((i, j) => i + "," + j)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T14:02:04.143

评估表达式。多值文本字段已经是一个逗号分隔的字符串“under the water”，因此您可以像这样在 Dreamweaver 层中抓取它：

```
@@(Component.multiValueField)@@ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:28:22.367

你试过`multiTextField.Values.ToArray().Join(",")`吗？

# php - 文件没有从临时文件夹移动到上传文件夹

> ID：10600405
> 
> 赞同：0
> 
> 时间：2012-05-15T12:13:21.767
> 
> 标签：php, mysql

请帮助我，这是我的代码：

```
if(isset($_POST['send'])) {
    $filename =strtolower(basename($_FILES['resume']['name']));
    $ext = $_FILES["resume"]["type"];
    $size= $_FILES["resume"]["size"];

    if (!empty($filename) && (($ext == "application/msword") ||
       ($ext  == "application/pdf") && ($size < 500000))) {
        $name = $_POST['name']; 
        $email_address = $_POST['email'];
        $nwname=str_replace(" ","",$name);
        $newfilename= substr(md5(rand() * time()),0,7);
        $newfilename2 =$nwname."_".$newfilename;
        if($ext == 'application/msword') {
            $newname ='upload/'.$newfilename2.".doc";
        } else if($ext == 'application/pdf'){
            $newname ='upload/'.$newfilename2.".pdf";
        }
        $temp= $_FILES['resume']['tmp_name'];
        echo $temp;

        $move = @move_uploaded_file($temp,$newname)
                    or die('Updoaling error.');
        echo $move; 

        $query = mysql_query("UPDATE saxet SET filelocation='$newname'
            WHERE name='$name' AND email='$email_address'");
    }
} 
```

我的名为“ `$filename`”的文件没有移动到临时文件夹。可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:46:06.800

我认为您应该检查在上传文件夹上写入文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:48:10.160

我建议在将上传的文件移动到那里之前使用[is_writable()](http://php.net/is_writable)函数来确定目标是否可写。

此外，`@`是一个[错误控制运算符](http://www.php.net/manual/en/language.operators.errorcontrol.php)。它抑制来自`move_uploaded_file()`. 每当您使用`@`并获得意外功能时，最好删除`@`并查看是否出现任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T10:49:26.600

为存储上传文件的文件夹授予适当的权限。

```
sudo chmod -R 755 /var/www/html/folder 
```

还要检查和更改所有权

```
shudo chown root:www /var/www/html/folder 
```

改变你的路径。

# c# - 浏览器忽略 asp.net 缓存设置

> ID：10600407
> 
> 赞同：0
> 
> 时间：2012-05-15T12:13:23.270
> 
> 标签：c#, caching, browser

我有一个 asp.net 应用程序，它要求用户输入私人信息，并且他们会通过会话超时自动注销应用程序。但是，这并不妨碍他们单击后退按钮。我需要禁用它。

我已经尝试了这里的每一种方法：http: [//www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout](http://www.codeproject.com/Tips/135121/Browser-back-button-issue-after-logout)

第一个代码块运行了大约一天。现在突然间我的浏览器 IE8 和 FF 7.0.1 完全忽略了它。事实上，我已经尝试了所有可能的缓存抑制代码组合，我可以在网上找到，而且无论如何我总是可以点击返回。

我已经删除了两个浏览器上的缓存，在每种组合中都尝试过并重新尝试过。重新启动。关闭VS2008并重新打开。将代码页级别放在母版页中，在我的基本页中。没有什么。如果有人有任何建议，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:21:04.330

> 但是，这并不妨碍他们单击后退按钮。我需要禁用它。

您不能禁用后退按钮。这是不可能的。您要做的是制作应用程序，以便在有人使用它时处理它。浏览器不必遵循缓存过期等规则，因此您的代码必须能够处理过期会话。没有其他方法可以解决它。您可以让服务器上的会话过期，这样它就不允许该人向其发布数据，但您不能在无法使用后退按钮的情况下使用它。

# java - 使用 javamail 读取同一邮件的消息和附件名称

> ID：10600408
> 
> 赞同：5
> 
> 时间：2012-05-15T12:13:23.377
> 
> 标签：java, jakarta-mail, multipart

我需要使用 java 来查看邮件。从这些邮件中，我想知道附件的名称（如果有的话）并且我想知道消息。

是否不仅可以打印附件的名称，还可以打印邮件的内容？目前我正在使用以下代码，它只获取附件的名称或（如果它们没有）消息内容。

```
 Message[] message = folder.getMessages();
 //Display message.
 for (int i = 0; i < message.length; i++) {

     System.out.println("------------ Message " + (i + 1) + " ------------");

     System.out.println("SentDate : " + message[i].getSentDate());
     System.out.println("From : " + message[i].getFrom()[0]);
     System.out.println("Subject : " + message[i].getSubject());

     Multipart multipart = (Multipart) message[i].getContent();

     for (int x = 0; x < multipart.getCount(); x++) {
         BodyPart bodyPart = multipart.getBodyPart(x);

         String disposition = bodyPart.getDisposition();

         if (disposition != null && (disposition.equals(BodyPart.ATTACHMENT))) {

             DataHandler handler = bodyPart.getDataHandler();
             System.out.println("Attachment : " + handler.getName());

         } else {
             System.out.println("Content: " + bodyPart.getContent());
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:22:53.053

是的，有可能。试试这个例子

```
Multipart mp = (Multipart)message.getContent();

for (int i=0, n=multipart.getCount(); i<n; i++) {
  Part part = multipart.getBodyPart(i));

  String disposition = part.getDisposition();

  if ((disposition != null) && 
      ((disposition.equals(Part.ATTACHMENT) || 
       (disposition.equals(Part.INLINE))) {
    saveFile(part.getFileName(), part.getInputStream());
  }
} 
```

# jquery - jquery mobile HTML5应用在线&离线问题

> ID：10600415
> 
> 赞同：0
> 
> 时间：2012-05-15T12:13:48.963
> 
> 标签：jquery, html, jquery-mobile

我正在使用 jquery mobile + HTML5 开发一个 Iphone 应用程序。我可以检查应用程序的离线和在线状态。我有一个谷歌地图来显示用户的位置。现在的问题是，只要应用程序在线，我就可以显示谷歌地图。当应用程序离线时，我会隐藏谷歌地图并显示离线消息。现在，当手机连接互联网时，我可以获得在线状态，但无法重新加载谷歌地图 js 和对象。它给了我一个错误。

那么如何在设备连接互联网时刷新 DOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:53:26.427

在 JQM（ajax 页面转换）中，当我转到页面时，“Pagebeforeshow”和“pageshow”事件会被触发。所以我添加了连接检查

```
if (navigator.onLine) {
    isOnline = true;
    return true;
} else {

    isOnline = false;
    localStorage.setItem('offlineCount', '1');
    return true;
} 
```

所以问题得到解决。但它仍然是关于如何在 ajax 请求后使用 Jquery 刷新 DOM。

# objective-c - 数据库类 iPhone 中的异常使用

> ID：10600435
> 
> 赞同：0
> 
> 时间：2012-05-15T12:15:26.680
> 
> 标签：objective-c, exception, error-handling, sqlite

好的，所以我一直在研究数据库类，并被告知要使用异常。但是，我阅读了 Apple 开发人员指南，以尽可能避免异常并改用 NSError。（[https://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocExceptionHandling.html](https://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocExceptionHandling.html)）

所以它让我思考：我是否使用了正确的方法？在这种情况下我应该使用 NSErrors 吗？

```
+(long)insertTrack:(Track *)track Database:(Database *)db {
@try {
sqlite3_exec(db.dataBase, "BEGIN", 0, 0, 0); //Start transaction

const char *sqlTrack = "INSERT INTO ...";
if(sqlite3_prepare_v2(db.dataBase, sqlTrack, -1, &addTrackStatement, NULL) != SQLITE_OK) {
     @throw [NSException exeption....]       
}

//Bind variables
sqlite3_bind_text(...);

if(SQLITE_DONE != sqlite3_step(addTrackStatement)) {
    @throw [NSException exeption....]
}
else {
    long insertedTrack = sqlite3_last_insert_rowid(db.dataBase);
    sqlite3_exec(db.dataBase, "COMMIT", 0, 0, 0); //End transaction

    return insertedTrack;
}
}
@catch(NSException *exception) {
    //Log the exception and ROLLBACK!
}
@finally {
    sqlite3_clear_bindings(addTrackStatement);
    sqlite3_reset(addTrackStatement);
    sqlite3_finalize(addTrackStatement); 
}
} 
```

所以我的问题又来了：我是否应该使用返回值来表明准备或执行 sql 语句时出现了问题？我应该像现在一样使用 NSError 还是使用 Exception ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:47:32.853

iOS 上的异常实现非常糟糕且效率低下。但是由于错误（可能）很少见，而且 SQL 操作无论如何也不是很快，所以您使用的（就性能而言）可能并不重要，只要您不使用“找不到条目”的异常”和“没有更多数据”的情况。

在有大量操作顺序的情况下，异常可能很方便，因为您不必单独处理错误处理并在每个操作之后进行清理。但是，在上述情况下（在每次操作后您仍然必须测试错误），好处并不是那么大。

在这种情况下可以使用“穷人的例外”方案：

```
errorCode = NoError;

do {
    rcode = operation1();
    if (rcode) { 
        errorCode = ErrorA;
        break;
    }        
    rcode = operation2();
    if (rcode) { 
        errorCode = ErrorB;
        break;
    }        
    rcode = operation3();
    if (rcode) { 
        errorCode = ErrorC;
        break;
    }
    <More stuff>
} until(FALSE);

if (errorCode == NoError) {
    <do normal path stuff>
}
else {
    <do error path stuff>
} 
```

这在我所知道的所有平台上都相当有效，并且很容易翻译成大多数其他编程语言，即使是那些没有例外的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:45:06.850

我建议在这种情况下使用**NSError ，因为如果您知道原因，您可以从错误中****恢复**，因此您可以发布错误代码并从中恢复。当您不知道如何从它们中恢复并**希望它们用于您的 release时，将使用****NSExceptions**。在此处阅读[有关错误与异常](https://stackoverflow.com/a/5010188/1169310)的更多信息。您可以在此处获取[sqlite 错误代码和消息列表](http://www.sqlite.org/c3ref/errcode.html)。基于它们，您可以在代码中处理它们。

# android - IntelliJ IDEA - 从 Eclipse 添加库

> ID：10600438
> 
> 赞同：1
> 
> 时间：2012-05-15T12:15:33.703
> 
> 标签：android, intellij-idea, android-actionbar

创建了一个新的 Android 项目。添加了库 (https://github.com/johannilsson/android-actionbar) 以获取说明[http://www.jetbrains.com/idea/webhelp/sharing-android-source-code-and-resources-using-library-项目.html](http://www.jetbrains.com/idea/webhelp/sharing-android-source-code-and-resources-using-library-projects.html)。在类 Actionbar 的代码中起作用。

但问题 - 布局没有找到 com.markupartist.android.widget.ActionBar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:16:44.020

您需要将其添加为单独的模块而不是库，并在`Android Facet`此模块的设置中启用“**是库项目**”选项。然后将此模块作为依赖项添加到您的主应用程序。

# iis - 没有管理员权限的 IIS

> ID：10600443
> 
> 赞同：1
> 
> 时间：2012-05-15T12:16:05.420
> 
> 标签：iis

我有一个没有管理员权限的登录名，我需要能够连接到同一服务器上可用的默认网站，如果我使用管理员权限登录到服务器，那么我可以看到所有网站托管。但是，如果我使用未以管理员权限运行的用户登录，则所有网站均不可见。谁能建议我需要给非管理员用户哪些权限才能让他访问网站。我正在使用 IIS 6.1。

感谢您的任何建议。

# c# - ASP.NET 页面中的 RichTextEdit

> ID：10600445
> 
> 赞同：1
> 
> 时间：2012-05-15T12:16:10.693
> 
> 标签：c#, asp.net, visual-studio-2010

我有“学生”和“课程”的数据库。如果学生完成一门课程，他将获得“成就”。可以一次打印所有学生的成就。在这里我没有问题。

问题是当我想做一个可定制的成就论文（字体、颜色、位置、图像）时。在 Windows 窗体中，有`RichTextEdit`，因此很容易自定义。

但是如何在 ASP.NET 中做到这一点？像 tinyMCE 这样的编辑器可以与 ASP.NET 集成吗？我可以将信息发送到 tinyMCE（或其他编辑器）以将一些子字符串（例如 {student-name} {course-name}）更改为数据库中的指定文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:42:19.600

听起来[AJAX Control Toolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Default.aspx)富文本解决方案对您很有用：[`HTMLEditorExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx). 它易于使用，并且与 Visual Studio 的集成相当顺利。

您所要做的就是将扩展器附加到`TextBox`控件。有关详细信息，请参阅我上面链接到的文档页面，但基本上您只需要一个`TextBox`然后是扩展器标记。确保在扩展器标记中，将“TargetControlID”属性设置为要用作“富文本框”的 TextBox 的 ID。

```
<asp:TextBox runat="server" ID="myTextBox"></asp:TextBox>
<ajaxToolkit:HtmlEditorExtender ID="HtmlEditorExtender1" 
    TargetControlID="myTextBox" DisplaySourceTab="true" 
    runat="server"/>
    <Toolbar> 
        <ajaxToolkit:Undo />
        <ajaxToolkit:Redo />
        <ajaxToolkit:Bold />
        <ajaxToolkit:Italic />
        <ajaxToolkit:Underline />
        ...
        <!--And many more properties, see the linked documentation for more-->
        ...
    </Toolbar>
</ajaxToolkit:HtmlEditorExtender> 
```

请注意，`TextBox`控件的 ID 是“myTextBox”，而 TargetControlID`HTMLEditorExtender`也是“myTextBox”。

*注意：就性能而言，AJAX 控件工具包通常被认为有点“笨重”或“笨拙”（我通常推荐 jQuery 解决方案），但它真的很容易使用（尤其是对于初学者），并且对于小项目工作正常。*

# sql - 在 SSIS 包上插入语句花费的时间太长

> ID：10600447
> 
> 赞同：0
> 
> 时间：2012-05-15T12:16:11.920
> 
> 标签：sql, sql-server, performance, triggers, insert

我是新来的。我有以下代码，其中内部和 SSID 包执行时间太长。

该声明旨在找到最好的律师（考虑到一些生产力和能力因素）并将其 ID 写入临时表......但它需要太长时间。

有什么建议么？？？我什至尝试过...禁用触发器

```
ALTER TABLE TB_TEMPLawyer DISABLE TRIGGER ALL
ALTER TABLE TB_LAWYERS     DISABLE TRIGGER ALL
ALTER TABLE  TB_PCRelation  DISABLE TRIGGER ALL
ALTER TABLE  TB_CASES       DISABLE TRIGGER ALL
ALTER TABLE  TB_TEMPaccount  DISABLE TRIGGER ALL

INSERT INTO TB_TEMPLawyer
                      (LawyerAutoIDTEMP)
SELECT     TOP (1) TB_LAWYERS.LawyerAutoID
FROM         TB_PCRelation INNER JOIN
                      TB_CASES ON TB_PCRelation.PostalCode = TB_CASES.CustomerPostalCode INNER JOIN
                      TB_LAWYERS ON TB_PCRelation.PCLawyerID = TB_LAWYERS.LawyerID INNER JOIN
                      TB_TEMPaccount ON TB_CASES.Account = TB_TEMPaccount.TempAccount
WHERE     (TB_CASES.LASYstatus = '2') AND (TB_CASES.LawyerID = 'NONE') AND (TB_LAWYERS.Activity = 'ACTIVE') AND 
                      (TB_LAWYERS.Relation_Type = 'EXTERNAL') AND (TB_CASES.TotalMLUSBBexposure BETWEEN TB_LAWYERS.MINAmount AND 
                      TB_LAWYERS.MAXamount) AND (TB_LAWYERS.CaseLimitMONTHLY >= TB_LAWYERS.CaseLimitMONTHLYactual) AND 
                      (TB_LAWYERS.CaseLimitDAILY >= TB_LAWYERS.CaseLimitDAILYactual) AND (TB_LAWYERS.Productivity <> '0')
ORDER BY TB_LAWYERS.Productivity DESC

ALTER TABLE TB_TEMPLawyer ENABLE TRIGGER ALL 
ALTER TABLE TB_LAWYERS     ENABLE TRIGGER ALL
ALTER TABLE  TB_PCRelation  ENABLE TRIGGER ALL
ALTER TABLE  TB_CASES       ENABLE TRIGGER ALL
ALTER TABLE  TB_TEMPaccount  ENABLE TRIGGER ALL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:41:58.983

首先，触发器与性能无关。您只插入一行。

在这种插入中可能会遇到两个问题：

1.  目标表可能由于某种原因被锁定。我怀疑这是问题所在。
2.  查询需要很长时间。

在 SSMS 中运行查询。

从命名约定来看，我会怀疑这个加入：

```
FROM TB_PCRelation INNER JOIN 
     TB_CASES
     ON TB_PCRelation.PostalCode = TB_CASES.CustomerPostalCode 
```

对案件没有明显的限制。您很可能在一个邮政编码中有很多律师和很多案件。

然而，这只是猜测。

# clojure - 动态导入依赖？

> ID：10600448
> 
> 赞同：3
> 
> 时间：2012-05-15T12:16:15.840
> 
> 标签：clojure, leiningen, swank-clojure

是否可以将新内容添加到类路径（例如编辑 project.clj 和 running `lein deps`），然后将其导入现有的 Clojure 会话？

也就是说，无需断开连接然后再次连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:33:52.310

您可以使用[pomegranate](https://github.com/cemerick/pomegranate)下载新库并在运行时将它们添加到您的类路径中。它不会直接从您的 project.clj 中读取，但会使用兼容的语法（使用 Leiningen 2 用于其自身依赖解析的 Aether 库）。

用法看起来像这样（引用自述文件的例子）：

```
=> (add-dependencies
      :coordinates '[[incanter "1.2.3"]]
      :repositories (merge cemerick.pomegranate.aether/maven-central
                           {"clojars" "http://clojars.org/repo"})) 
```

也就是说，您*必须*在初始类路径中包含 pomegranate 本身才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:30:16.910

我假设*clojure 会话*您的意思是 REPL 由`lein repl`.

对您的问题的简短回答是“不”——您不能这样做。

JVM 支持[Classloaders](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)来提供这种动态加载功能，而 clojure 利用这些来支持动态类定义`deftype` `gen-class`等。

当您考虑必须展开并重新构建已在使用的类加载器时，将新的 3rd 方类（可能是新的库 jar）添加到类路径中会非常复杂。

有关clojure 的类加载的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/7471316/how-does-clojure-class-reloading-work)

# javascript - 评论如何执行？

> ID：10600449
> 
> 赞同：0
> 
> 时间：2012-05-15T12:16:15.900
> 
> 标签：javascript, comments

在我的代码中，我为弹出窗口编写了此代码，但注释行

`// mywindow.document.write('<html><head><title>my div</title>');`

自动执行。为什么？如果我删除了这一行，我的页面不会显示任何错误。如果它作为注释出现，则显示重复标题标签的错误。

```
 function Popup(data) {
            var mywindow = window.open('', 'mydiv', 'height=400,width=600');
           // mywindow.document.write('<html><head><title>my div</title>');
            /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
            mywindow.document.write('</head><body >');
            mywindow.document.write(data);
            mywindow.document.write('</body></html>');
            mywindow.document.close();
            mywindow.print();
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:20:14.900

如果您在服务器上执行它然后对其进行注释，则服务器可能已经缓存了您的旧 js 文件...尝试将参数（任何）传递给标记中的 js 文件：`<script src="myfile.js?version=1.0"/>`

# joomla - 带有模块助手的 Ajax 调用

> ID：10600450
> 
> 赞同：1
> 
> 时间：2012-05-15T12:16:17.230
> 
> 标签：joomla, joomla1.5, joomla-extensions, joomla2.5

是否可以在不使用组件助手的情况下处理 Joomla 中的 ajax 调用？

例如; 我想创建一个进行 ajax 调用的模块。我知道如何使用组件助手 (index.php?option=com_myhelper....&format=raw) 来处理调用，但我想从模块中制作它而不是组件助手。

有什么方法可以调用 Joomla 模块，就像从外部脚本 (http://mydomain.com/index.php?option=com_myhelper....&format=raw) 调用 Joomla 组件一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:32:38.587

是否需要从 domainA 调用 AJAX 函数到 domainB？如果是这样，您必须使用代理。

我所做的，也许可以帮助：

组件的JS：

```
J.ajax({
    type: 'GET',
    url: '/index.php',
    data: {
        option: 'com_mycomponent',
        task: 'getTaskFromTheController',
        param: 'paramValue1'
    },
    success: function(data) {
        J('#suggestions').fadeIn();
        J('#suggestions').html(data);
        J('#suggestions .close-image').click(function() {
            J('#suggestions').fadeOut();                    
        });     
    } 
```

[有关jQuery POST/GET](http://api.jquery.com/jQuery.post/)的更多信息

在组件的controller.php中添加getTaskFromTheController函数

```
public function getTaskFromTheController()
{
    global $mainframe;
    $model =& $this->getModel();
    // If GET 
    // $param= JRequest::getVar('param');

    // If POST 
    // $param = JRequest::getVar('param', '', 'post', 'string');
    //Or
    // $param = JRequest::getVar('param', '', 'post', 'string', JREQUEST_ALLOWHTML);

    echo $model->getUserTaskAjax($param);
    $mainframe->close();
} 
```

有趣的链接： http: [//forum.joomla.org/viewtopic.php?p=2424982](http://forum.joomla.org/viewtopic.php?p=2424982) [http://docs.joomla.org/Adding_AJAX_to_your_component](http://docs.joomla.org/Adding_AJAX_to_your_component) [如何在 Joomla 模块中使用 jQuery ajax](https://stackoverflow.com/questions/2379961/how-to-use-jquery-ajax-in-joomla-module)

# php - 当字段名称事先不知道时，php数组如何将数据动态插入mysql表？

> ID：10600453
> 
> 赞同：3
> 
> 时间：2012-05-15T12:16:19.447
> 
> 标签：php, mysql, dynamic, insert

我在一个数组中收到一些数据，这些数据将存储在一个 mysql 表中。表字段名称`key`与数组中的键/值对中的相同，但是我事先不知道哪些键/值对会到达

```
// First execution
$array1 = array('a'=> 'str1', 'b'=> 'str2', 'c'=> 'str3', 'd'=> 'str4');

// second execution
$array2 = array('a'=> 'str6', 'c'=> 'str7', 'e'=> 'str5');

// third execution
$array3 = array('b'=> 'str8', 'd'=> 'str9', 'e'=> 'str10'); 
```

所以上面指出了数据可以到达的方式。下面是db表结构的例子

```
column 1 name = id (auto increment)
column 2 name = 'a'
column 3 name = 'b'
column 4 name = 'c'
column 5 name = 'd'
column 6 name = 'e'
column 7 name = 'f' 
```

请注意，可能存在一些意外数据，但如果该意外值的 db 字段（列）不存在，则应跳过数据。我基本上只需要在存在列的位置插入数据，并且该列的任何不存在的值都应该为空。我希望这对某人有意义。

如何在 php 中构造 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:36:53.990

您可以从数组键构造列名列表，并从数组值构造值列表。就像是：

```
$keys = array_keys($arr);
$vals = array();
foreach ($keys as $k)
{
    $vals[] = "'".mysql_real_escape_string($arr[$k])."'";
}
$qry = "INSERT into tab1 (".implode(',', $keys).") VALUES (".implode(',', $vals).")"; 
```

不过，您仍然需要找到一种方法来删除不在表中的键。我认为 GordonM 使用 DESCRIBE TABLES 的想法可能是要走的路，然后过滤 $keys（一旦你得到列名列表，使用 array_intersect()）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:37:57.177

您可以使用 Zend 框架的一部分 Zend_Db_Table。[http://framework.zend.com/manual/en/zend.db.table.html](http://framework.zend.com/manual/en/zend.db.table.html) 请注意，您可以将其用作库，不需要使用框架。Zend_Db_Table 有一个检索表元数据的方法，因此很容易过滤数组。它还提供缓存元数据的功能。

一个简单的例子：

```
$db = new Zend_Db_Adapter_Pdo_Mysql(array(
    'host'     => 'localhost',
    'username' => 'test',
    'password' => 'test',
    'dbname'   => 'test'
));
Zend_Db_Table::setDefaultAdapter($db);
$table = new Zend_Db_Table('table_name');    
$info = $table->info();

// assuming array1 contains keys => values    
$arr = array_intersect_key($array1,array_flip($info['cols']));    
$table->insert($arr); 
```

# tsql - 在有子句中使用 sum

> ID：10600456
> 
> 赞同：1
> 
> 时间：2012-05-15T12:16:28.300
> 
> 标签：tsql, sum

我有一个简单的查询

```
select id,
(select sum(totalin) from xorderextra where xorderextra.id = xoi.id) as totalin,
from xorderinfo xoi
group by xoi.id
having (select sum(totalin) from xorderextra where xorderextra.id = xoi.id) > 1000 
```

现在我想知道有没有更好的方法来替换有语句中的 sum 过滤器。这是设置事物的正确方法吗，这是否会损害查询，即。是否必须将数字相加两次？

**新案例 **

```
select xoi.id,
       sum(xex.totalin) as totalin,
       sum(xooc.totalout) as totalout,
from xorderinfo xoi
inner join xorderextra xex on xex.id = xoi.id
inner join xorderout xoo on xoo.rid = xoi.id
inner join xorderoutcalc xooc on xooc.obracunid = xoo.obracunid
group by xoi.id
having sum(xex.totalin) > 1000 
```

这返回错误的结果，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:19:51.317

您可以加入并显着提高性能！

```
select id,
       sum(xex.totalin) as totalin,
from xorderinfo xoi
inner join xorderextra xex on xorderextra.id = xoi.id
group by xoi.id
having sum(xex.xorderextra) > 1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:20:07.920

您可以使用 cte 和重写它[`SUM OVER`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)：

```
WITH cte AS(
    SELECT id
    ,      SUM(xoi.totalin) OVER (PARTITION BY xoi.id) As TotalIn
    FROM xorderinfo xoi
)
SELECT cte.* FROM cte
WHERE TotalIn > 1000 
```

# php - 自定义类的比较重载方法

> ID：10600460
> 
> 赞同：1
> 
> 时间：2012-05-15T12:16:38.570
> 
> 标签：php, object, comparison, overloading

我想重载个人类的比较方法。

例如，如果我这样写： $object1 < $object2 Php 将使用这个函数：

```
function compare($a, $b){
    if($a->attribute == $b->attribute){return 0;}
    else{return $a->attribute > $b->attribute ? 1 : -1;}
} 
```

有没有办法做到这一点 ？

我已经看过[这个](http://webreflection.blogspot.fr/2008/06/from-future-php-javascript-like-number.html)和[这个](http://pecl.php.net/package/operator)，但我不能使用这些解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:25:18.863

您在上面指出的 PECL 解决方案是您唯一的选择。PHP 不提供其他语言中可用的运算符重载。

# facebook - 有人可以解释一下facebook如何存储事件的开始和结束时间吗？

> ID：10600464
> 
> 赞同：1
> 
> 时间：2012-05-15T12:16:59.660
> 
> 标签：facebook, facebook-graph-api, timezone

我从 Facebook 将事件的开始和结束时间存储为 PST 的各种来源获得。但一定有什么我错过了。以我创建的这个 facebook[活动为例。](https://www.facebook.com/events/465872263429982/)我住在意大利，实际上当我插入事件时间时，它显示 UTC + 2。我插入`2012-05-18 10.30 PM`事件开始时间。我希望这将保存为太平洋时间下午 1.30，因为 PST 应该是 GMT -7（因为夏令时）。但如果我这样做

```
$start = date("Y-m-d H:i:s", $facebook_event['start_time'] ); 
```

`$start``2012-05-19 05:30:00`在我插入的时间后 7 小时出来！这怎么可能？我错过了什么？

编辑 - 这就是我检索事件 start_time 的方式

```
 $fql = "SELECT 
                    eid,
                    name,
                    description,
                    start_time,
                    end_time,
                    venue,
                    location,
                    update_time
                FROM
                    event
                WHERE 
                    eid IN (SELECT eid FROM event_member WHERE uid = $id)" ;
        $events = $facebook->api( array(
            'method' => 'fql.query',
            'query' => $fql,
        ) ); 
```

我不使用`/$id/events/`api 调用，因为当我收到朋友的事件时，我总是返回一个空集

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:52:01.670

让我解释一下 Facebook 时区规则，

Facebook 始终假定您发送的 start_time 或 end_time 位于太平洋时区。因此，我们有责任将它们发送到太平洋时区。

在上述情况下，您在 EST 中插入了 2012-05-18 10.30 PM，但 Facebook 假设您是在太平洋时间发送的。因此它转换为 UTC 为 2012-05-19 05:30:00。您将通过 API 接收。

只需 fb_stored_time = epoch(UTC(assumed_Pacific_time))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:20:45.357

把它放在你的脚本中日期函数之前。

```
date_default_timezone_set('America/Los_Angeles'); 
```

# javascript - 视图字段中全局自定义文本中的 javascript onclick 事件

> ID：10600465
> 
> 赞同：0
> 
> 时间：2012-05-15T12:17:03.987
> 
> 标签：javascript, drupal-6, views

我无法在全局自定义文本字段中应用 onclick 事件。

这是我在自定义字段中添加的内容：

```
<a id="message_popup2" class="ViewUserProfile2" onclick="viewprofile2([uid])" >Changed & send password  </a> <br/> 
```

这就是结果的观点：

```
<a id="message_popup2" class="ViewUserProfile2" Click="viewprofile2(2)" >Changed & send password  </a> <br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:06:52.460

制作视图的显示tpl并使用字符串替换，通过onclick替换click

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:22:57.873

在您看来，uid 可能用作字符串，而不是作为变量插入

对于 MVC3，它类似于 @uid

**编辑后更新：**

结果显示 "Click=" .. 必须是 "onclick="

# ruby - ruby 中有一些类似 php_info 的方法吗？

> ID：10600468
> 
> 赞同：0
> 
> 时间：2012-05-15T12:17:15.993
> 
> 标签：ruby, sinatra, phpinfo

是否有一些方法可以在 Ruby Web 应用程序中显示 Session、ENV、POST 和 GET 数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:45:41.063

完全不像 php_info ，但你可以得到：

1）在控制台运行命令：**rake about**

2) `http://localhost:3001/rails/info/properties`=> 仅在本地主机上

3）嵌入式erb可能会有所帮助......

```
<%= params.inspect %>

<%= session.inspect %> 
```

# qt - 如何在 Qt 中以一种垂直布局滚动多个列表

> ID：10600471
> 
> 赞同：0
> 
> 时间：2012-05-15T12:17:42.007
> 
> 标签：qt, qt4

在我的父小部件中，我有三个列表，我已将其放入垂直布局中，并且我使用动态滚动器来滚动它，但是当我尝试在列表视图上滚动时它不会滚动，我必须从侧面滚动它。有没有办法从屏幕的任何部分滚动页面，也意味着 om 列表视图。

# meteor - 与使用 find() 游标的 #each 相比，使用模板如何使用带有一个“记录”的 {{attribute}}？

> ID：10600477
> 
> 赞同：5
> 
> 时间：2012-05-15T12:18:14.883
> 
> 标签：meteor

我知道使用模板可以显示多个文档及其属性，例如：

```
// html
<template name="hello">
{{#each greetings}}
   {{message}}
{{/each}}
</template>

// js
Template.hello.greetings = function() {
   return Greetings.find();
} 
```

其中显示找到的每个问候语文档的 Greeting.message。

我的问题是如何将此模板仅用于一个文档？（包括没有可用的文件）

从javascript方面我会使用类似的东西`return Greetings.findOne({'id' : Session.get("greeting_id")});`

但是在使用模板时：

```
<template name="hello">
   {{message}}
</template> 
```

引发错误：未捕获的类型错误：无法读取未定义的属性“消息”

# 更新

现在我在 JS 端使用它，使用下面@tom-wijsman 建议的模板：

```
Template.hello.greeting = function() {
   var greeting = Greetings.findOne({'id' : Session.get("greeting_id")})
   if (greeting)
       return greeting;
   return {message: ""};
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T13:53:18.073

Handlebars.js 也有一个[#with 助手](http://handlebarsjs.com/block_helpers.html)。

```
<template name="hello">
    {{#with greeting}}
        {{message}}
    {{/with greeting}}
</template> 
```

```
Template.hello.greeting = function() {
    return Greetings.findOne({'id' : Session.get("greeting_id")});
} 
```

# ruby - embeds_many，得到孙子

> ID：10600481
> 
> 赞同：0
> 
> 时间：2012-05-15T12:18:22.607
> 
> 标签：ruby, mongodb, mongoid, ruby-on-rails-3.2

楷模：

```
class User
  include Mongoid::Document

  embeds_many :user_topics
end

class UserTopic
  include Mongoid::Document

  embedded_in :user
  embeds_many :user_topic_examples
end 
```

和

```
class UserTopicExample
  include Mongoid::Document

  embedded_in :user_topic
end 
```

如何获取属于特定用户的所有 user_topic_examples：

**user.user_topic_examples**

或者

**user.user_topics.user_topic_examples**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:56:42.983

这很简单：已更新

```
def user_topic_examples
  user_topics.inject([]) {|result, ut| result + ut.user_topics_examples }
end 
```

# testing - 如何设置允许多个“SuiteSetUp”的 FitNesse 套件层次结构？

> ID：10600483
> 
> 赞同：3
> 
> 时间：2012-05-15T12:18:27.293
> 
> 标签：testing, fitnesse

我的套件目前具有以下结构：

*   外套房
    *   套件设置
    *   内部套房1
        *   套件设置
        *   测试1
        *   测试2
        *   测试3
        *   套件拆解
    *   内部套房2
        *   套件设置
        *   测试1
        *   测试2
        *   测试3
        *   套件拆解

我想让 OuterSuite.SuiteSetUp 加载一个包含一些基本测试数据的数据库。然后，InnerSuite1.SuiteSetUp 和 InnerSuite2.SuiteSetUp 中的每一个都将针对各自的测试组稍微修改测试数据。（并将其恢复为相应 SuiteTearDown 中的起始值。）

但正如我发现的那样，“只能有一个！” 套件设置。您将如何获得所需的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T09:57:59.010

你可以用这个技巧拥有那种结构。

InnerSuite#.SuiteSetUp 的内容

```
 !include -c <OuterSuite.SuiteSetUp
 # Your original code of the suite setup 
```

使用此流程，OuterSuite 的 SuiteSetUp 将首先运行，然后将运行其余内容。

这个结构也可以在 SuiteTearDown 中使用，但是颠倒顺序可能很聪明。例如，这可以在删除具有连接到将在外部拆除中删除的行的外键的行时使用。

InnerSuite#.SuiteTearDown 的内容

```
 # Your original code of the suite teardown
 !include -c <OuterSuite.SuiteTearDown 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:45:11.247

我们通过利用 Hudson 为特定目的运行特定套件解决了类似的问题。

它有点像这样：

1.  我们有一个 BootStrap 页面，我们运行它来准备数据库。这作为单独的 Hudson 作业运行。该作业准备数据库，然后对其进行备份。
2.  然后，当我们运行我们的套件时，我们会在每个套件之前还原数据库。
3.  数据库恢复后，运行一个套件。我们单独运行主要套件来强制数据库清理，因为我们现在不支持数据库回滚。

这种方法并不完美，但它可以让我们更好地管理数据库。

# config - .NET 中的多个 Couchbase 存储桶配置

> ID：10600486
> 
> 赞同：6
> 
> 时间：2012-05-15T12:18:41.943
> 
> 标签：config, couchbase, bucket

我在 Couchbase 中有 2 个存储桶，一个是 Couchbase 类型，另一个是 Memcachced 类型：运行测试时出现错误：元素服务器在本节中可能只出现一次。下面是我的配置：

```
 <couchbase>
    <servers bucket="RepositoryCache" bucketPassword="">
      <add uri="http://127.0.0.1:8091/pools/default"/>
    </servers>

    <servers bucket="default" bucketPassword="">
      <add uri="http://127.0.0.1:8091/pools/default"/>
    </servers>
  </couchbase>

 How to configure multiple buckets and resolve the issue? I hv read the manual and I could not find much help. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-02T11:43:02.703

从[文档](http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library#Couchbase.NETClientLibrary-UsingMultipleBucketswiththeCouchbaseClient)看来，您可以这样做：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="couchbase">
      <section name="bucket-a" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>
      <section name="bucket-b" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>
    </sectionGroup>
  </configSections>

  <couchbase>
    <bucket-a>
      <servers bucket="default">
        <add uri="http://127.0.0.1:8091/pools" />
      </servers>
    </bucket-a>
    <bucket-b>
      <servers bucket="beernique" bucketPassword="b33rs">
        <add uri="http://127.0.0.1:8091/pools" />
      </servers>
    </bucket-b>
  </couchbase>

  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T01:29:44.190

如果您仍想使用 App|Web.config，您也可以只创建第二个配置部分，如下所示：

```
<section name="otherconfig" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>

<otherconfig>
    <servers bucket="default" bucketPassword="">
      <add uri="http://127.0.0.1:8091/pools"/>
    </servers>
  </otherconfig>

var client = new CouchbaseClient((CouchbaseClientSection)ConfigurationManager.GetSection("otherconfig")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:47:10.827

我找到了解决上述问题的方法。

我们可以使用 CouchbaseClient 构造函数重载并传入存储桶名称和密码。例如： var client = new CouchbaseClient("default","");

不需要将所有存储桶配置放在 app 或 web.cong 文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:17:12.890

我之前[在 .NET app.config 中的 Couchbase multiple buckets 中](https://stackoverflow.com/q/10554175/1243272)问过这个问题，但没有人回答。

我快速浏览了 couchbase .net 库的 ClientConfigurationSection，在配置的“couchbase”部分中，您只能定义一个服务器。

因此，您可以定义一个存储桶“默认”来存储另一个存储桶的连接参数。或硬编码连接设置。或者创建自己的 xml 文件，该文件将包含连接参数，并且看起来像上面发布的配置。

# java - hibernate映射创建表

> ID：10600489
> 
> 赞同：0
> 
> 时间：2012-05-15T12:18:47.303
> 
> 标签：java, mysql, hibernate

我写了一个映射如下：

```
<hibernate-mapping auto-import="true" default-lazy="false">
    <class name="com.saman.entity.hibernate.EmployeeEntity"
           table="Employee" optimistic-lock="version">

        <id name="id" type="java.lang.Integer" >
            <column name="Id" />
            <generator class="identity"/>
        </id>
        <timestamp name="version" source="db"/>
        <property  name="firstName">
            <column name="FirstName" sql-type="nvarchar(300)"/>
        </property>
        <property name="lastName">
            <column name="LastName" sql-type="nvarchar(300)"/>
        </property>
        <property name="employeeType">
            <column name="EmployeeType" sql-type="nvarchar(300)"/>
        </property>
        <!--
        <set name="shifts" table="Shifts" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="Id" not-null="true"/>
            </key>
            <one-to-many class="com.saman.entity.hibernate.ShiftEntity"/>
        </set>
        -->
        <properties name="u1" unique="true">
            <property name="firstName"/>
            <property name="lastName"/>
            <property name="employeeType"/>
        </properties>

    </class>
</hibernate-mapping> 
```

当我运行我的应用程序时，会发生如下错误：

2012-05-15 17:12:38,651 -- WARN -- 不成功的模式语句：创建表 Employee（Id 整数不为 null auto_increment，版本日期时间不为 null，FirstName nvarchar(300)，LastName nvarchar(300)，EmployeeType nvarchar(300 ), 主键 (Id), 唯一 (firstName, lastName, employeeType)) com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Specified key was too long; 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 java 的最大密钥长度是 1000 字节.lang.reflect.Constructor.newInstance(Constructor.java:513) 在 com.mysql.jdbc.Util.handleNewInstance(Util.java:411) 在 com.mysql.jdbc.Util。

它有什么问题？

我使用 mysql，我在 MAMP 上运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:56:44.430

MyISAM 引擎存在已知问题。您可以尝试此[链接](http://confluence.atlassian.com/pages/viewpage.action?pageId=192872609)将引擎更改为 InnoDB：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:01:42.330

> 指定的密钥太长；最大密钥长度为 1000 字节

此错误意味着您的唯一索引（名字、姓氏、雇员类型）超过 1000 个字节，这是最大值。来自 mysql 文档

```
"UTF-8 encoding of the Unicode character set using one to three bytes per character" 
```

因此您可以看到您有三个长度为 300 的字段，因此您可能有一个大小为 300* 3 * 3 = 2700 > 1000 的索引

# google-app-engine - Google App Engine 中的错误“无法更改启动配置文件的权限”

> ID：10600490
> 
> 赞同：-2
> 
> 时间：2012-05-15T12:18:50.577
> 
> 标签：google-app-engine

在数据库连接中的 Eclipse 数据源资源管理器中，为其中的 Goolge Cloud Sql 创建一个新连接 我的数据库名称是留言簿和实例名称是 codeguestbook:appshilendra 然后在错误窗口中看到

**无法更改启动配置文件的权限**

在我的 jsp 页面中，我的驱动程序是**“jdbc:google:rdbms://codeguestbook:appshilendra/guestbook”**，用于运行项目时的谷歌云 sql 连接驱动程序

然后我在错误窗口中出现错误**无法更改启动配置文件的权限**

Servlet 代码是 @Override public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {

```
 PrintWriter out = resp.getWriter();
  Connection c = null;
    try {
      DriverManager.registerDriver(new AppEngineDriver());
      c = DriverManager.getConnection("jdbc:google:rdbms://codeguestbook:appshilendra/guestbook");
      String fname = req.getParameter("fname");
      String content = req.getParameter("content");
      if (fname == "" || content == "") {
        out.println("<html><head></head><body>You are missing either a message or a name! Try again! Redirecting in 3 seconds...</body></html>");
      } else {
      String statement ="INSERT INTO entries (guestName, content) VALUES( ? , ? )";
      PreparedStatement stmt = c.prepareStatement(statement);
      stmt.setString(1, fname);
      stmt.setString(2, content);
      int success = 2;
      success = stmt.executeUpdate();
      if(success == 1) {
        out.println("<html><head></head><body>Success! Redirecting in 3 seconds...</body></html>");
      } else if (success == 0) {
        out.println("<html><head></head><body>Failure! Please try again! Redirecting in 3 seconds...</body></html>");
      }
     }
    } catch (SQLException e) {
        e.printStackTrace();
      } finally {
          if (c != null) 
            try {
              c.close();
            } catch (SQLException ignore) {
              }
      } resp.setHeader("Refresh","3; url=/guestbook.jsp");
  } 
```

以及我在其中使用的jsp代码

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
  <%@ page import="java.util.List" %>
  <%@ page import="java.sql.*" %>
  <%@ page import="com.google.appengine.api.rdbms.AppEngineDriver" %>
   <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org   /TR/html4/loose.dtd">
   <html>
   <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <title>Database Connection</title>
  </head>
 <body>
   <%
   Connection c = null;
   c = DriverManager.getConnection("jdbc:google:rdbms://codeguestbook:appshilendra     /guestbook");
    ResultSet rs = c.createStatement().executeQuery("SELECT guestName, content, entryID   FROM entries"); %>
  <table style="border: 1px solid black">
  <tbody>
   <tr>
   <th width="35%" style="background-color: #CCFFCC; margin: 5px">Name</th>
   <th style="background-color: #CCFFCC; margin: 5px">Message</th>
     <th style="background-color: #CCFFCC; margin: 5px">ID</th>
   </tr> <%
  while (rs.next()){
  String guestName = rs.getString("guestName");
   String content = rs.getString("content");
  int id = rs.getInt("entryID"); %>
  <tr>
  <td><%= guestName %></td>
  <td><%= content %></td>
   <td><%= id %></td>
  </tr>

 <% }
 c.close(); %>

 </tbody>
 </table>
 <br />

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:50:36.957

是否有此错误的堆栈跟踪？您可以在 Eclipse 中打开“错误日志”视图并可能看到一个（如果此错误来自异常，则完整的堆栈跟踪对于帮助调试问题非常重要）。

谢谢

# ajax - 如何编写一个 perl cgi 脚本，它在同一个浏览器中不断刷新当前时间，而不是打印时间列表

> ID：10600495
> 
> 赞同：0
> 
> 时间：2012-05-15T12:19:04.550
> 
> 标签：ajax, perl, xmlhttprequest, cgi

> **可能重复：**
> [注册：Perl CGI 脚本自动更新新数据](https://stackoverflow.com/questions/10597184/reg-perl-cgi-script-autoupdate-with-new-data)

perl CGI 脚本不断更新时间，而不是创建时间列表

```
#!C:/perl/bin/perl.exe
use warnings;
use strict;
use CGI;

local $| = 1;

my $cgi = new CGI;
my $string = localtime();
print $cgi->header();
print $cgi->start_html("Welcome");
print $cgi->h1("$string");
print $cgi->end_html();

print $cgi->header();
print $cgi->start_html("Welcome");
print $cgi->h1("$string");
print $cgi->end_html(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:03:55.090

切换到 PSGI。

```
my $app = sub {
    my $env = shift;
    return sub {
        my $respond = shift;
        my $writer = $respond->([200, ['Content-Type', 'multipart/x-mixed-replace; boundary=time']]);
        while (1) {
            $writer->write(
                "--time\n" .
                "Content-Type: text/plain\n\n" .
                localtime . "\n"
            );
            sleep 1;
        }

        # will never arrive here, but
        # install a signal handler and call this for cleanup
        $writer->close;
    };
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:23:05.303

您的问题揭示了对[事物如何运作](http://www.w3.org/CGI/)的根本误解。

事件的顺序是：

1.  Web 服务器被配置为在请求特定 URL 时运行特定程序。
2.  浏览器发出请求资源的 HTTP 请求。
3.  服务器运行程序，捕获其标准输出流，并将其发送回浏览器。
4.  浏览器显示内容。

请求/响应周期完成后，事务结束。服务器不知道它发送的内容到底去了哪里，无论是显示在窗口中还是转换为 ASCII 艺术。它发送内容并完成它（TCP keep-alives 等不会改变这个模型）。

因此，“*在同一浏览器中不断刷新当前时间而不是打印时间列表的 CGI 脚本*”语句毫无意义：服务器无法收回它已经发送的输出。

使用 JavaScript 和 XHR，[您可以使用 CGI 脚本的输出更新页面上某个元素的内容](http://api.jquery.com/jQuery.getJSON/)。

然而，现在另一个您似乎没有注意到的基本问题出现了：您所说的***当前时间***是什么意思？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:22:57.490

也许您想在输出中提供[META Refresh](http://en.wikipedia.org/wiki/Meta_refresh)标头，以便页面每秒自动刷新。但实际上我建议为此使用 Javascript。

# javascript - 在 node.js 上的 socket.io 上发送消息 client->server->client

> ID：10600496
> 
> 赞同：13
> 
> 时间：2012-05-15T12:19:13.813
> 
> 标签：javascript, jquery, sockets, node.js

我正在使用 NodeJS+Socket.IO 进行简单的网页游戏。有用。为什么？

这是我的`server.js`

```
var app = require('express').createServer();
var io = require('socket.io').listen(app);

io.sockets.on('connection', function (socket) {
socket.on('set nickname' , function (nickname) {
socket.nickname = nickname;
console.log(nickname + ' just connected!');

});

socket.on('msg' , function (msg) {
socket.msg = msg;
io.sockets.emit('response', msg);
});

socket.on('updatePlayer' , function (updatePlayer) {
console.log("Someone just moved on the map!");
});

});

app.listen(8080); 
```

我知道它有效的原因是，当我加载页面并且此脚本执行时：

```
// SERVER STUFF
socket.on('connect', function () {
    console.log('We are connected!');
    name = $(".name").val();
    this.emit('set nickname', name, function (success) {});
    msg = name + "|" + currX + "|" + currY + "|" + currentMap;
    this.emit('msg', msg, function (success) {});

    socket.on('response', function (data) {
        var theMsg = data.split("|");
        sayDialog("New player! " + theMsg[0] + " connected on map " + theMsg[3] + " on coordinates (" + theMsg[1] + "," + theMsg[2] + ")");
    });
}); 
```

我进入我的对话框（“CSS div”）类似于`New player! weka connected on map 4 on coordinates (10,5)`

好的，很酷，所以它有效！但是，当我“移动”时，我尝试使用它向服务器发送消息

```
 socket.on('updatePlayer', function () {
    console.log("Testing...");
  }); 
```

我什至没有看到`console`说测试。我不知道为什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-15T12:43:47.717

**客户端。**玩家移动并执行 movePlayer 函数：

```
function movePlayer () {
    socket.emit ('player move', {map: 4, coords: '0.0'});
}

socket.on ('updatePlayer', function (msg) {
    console.log ('A player moves on map ' + msg.map + ' on coords ' + msg.coords);
}); 
```

**服务器端。**当有人移动时，除了原始玩家之外，每个套接字都会发出一个“updatePlayer”。在每个客户端，updatePlayer 都会被拦截。

```
socket.on ('player move', function (msg) {
    io.sockets.emit ('updatePlayer', msg);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:41:55.830

**服务器端**

```
socket.on('updatePlayer', function(updatePlayer){
  console.log("Someone just moved on the map!")
  updatePlayer() // will trigger the client side function
}); 
```

**客户端**

```
socket.emit('updatePlayer', function(){
  console.log('testing');
}) 
```

# c++ - CB_SETHORIZONTALEXTENT 在下拉组合框的底部给出一个空行

> ID：10600497
> 
> 赞同：0
> 
> 时间：2012-05-15T12:19:15.157
> 
> 标签：c++, winapi

这是此问题的屏幕截图。我用了

`SendMessage(find, CB_SETHORIZONTALEXTENT, (WPARAM)200, 0);`

为下拉组合框创建水平滚动。但它在底部给出了一个空行。请问如何解决这个问题。

![在此处输入图像描述](../Images/8e3dee603b88bf6c7fec60a56e5457f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T09:00:12.690

我知道这个问题被问到已经有 2 年了，但是如果其他人遇到这个问题（就像我一样），我就是这样解决的：

末尾的空格是由于对属性的计算错误造成的，该`DropDownHeight`属性的默认值取决于`ItemHeight`（取决于`Font`）和`MaxDropDownItems`.

因此，如果您手动添加了水平滚动条（就像我一样，通过添加 WS_HSCROLL 样式），您需要重新计算`DropDownHeight`如下：

```
DropDownHeight = SystemInformation.HorizontalScrollBarHeight
                 + 2 + ItemHeight * MaxDropDownItems; 
```

边界在哪里`2`。

**编辑**

考虑系统的边界以获得更广泛的适用性......

```
DropDownHeight = ItemHeight * MaxDropDownItems 
                 + SystemInformation.HorizontalScrollBarHeight 
                 + 2 * SystemInformation.BorderSize.Height; 
```

# regex - Perl 中的正则表达式任务

> ID：10600503
> 
> 赞同：1
> 
> 时间：2012-05-15T12:19:49.900
> 
> 标签：regex, perl

我有一个关于正则表达式问题的简单问题。

给定以下示例字符串：

```
Apr 2 13:42:32 sandbox izxp[12000]: Received disconnect from 10.11.106.14: 10: disconnected by user 
```

我需要将此字符串分成 4 个不同的字符串。如您所见：日期（`Apr 2`）、时间（`13:42:32`）、服务器名称（`sandbox`）和其他数据（`izxp[12000]: Received disconnect from 10.11.106.14: 10: disconnected by user`）。

之后这些将是变量值。

我会很高兴有人可以帮助我！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:27:12.820

`split`使用此任务要容易一些。

```
my ($date1, $date2, $time, $host, $data) = split(' ', $str, 5);
my $date = "$date1 $date2"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:08:26.840

对于这类事情，我总是使用我所谓的“扫描模式”。日期的格式很简单：

```
/((?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d+) 
```

当时的表达并不难

```
/(\d\d:\d\d:\d\d)/ 
```

一旦你把它排除在外，我认为像这样指定服务器就很容易了：

```
/(\w+)/ 
```

下一部分就是其他所有内容，因此该模式可以连接在一起：

```
/((?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d+)\s+(\d\d:\d\d:\d\d)\s+(\w+)\s+(.*)/ 
```

您可以通过以下表达式将该数据存储在 Perl 中：

```
my ( $date, $time, $host, $desc ) 
    = $str =~ m/((?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d+)
                \s+(\d\d:\d\d:\d\d)\s+(\w+)\s+(.*)
               /x
    ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:54:13.000

请注意，拆分或准备好的正则表达式之间的性能比较（在下面的输出中：re1 来自 Axeman 并且 re2 简化为`/(\S+ \S+) (\S+) (\S+) (.*)/`）确认拆分是获胜的，但差异很小，您甚至不会在解析不到一百万行时注意到它。Axeman 正则表达式可以进一步改进，以帮助您证明输入的有效性，这是非常重要的事情。

1000 万次迭代比较：

```
 Rate  re1  re2  spl
re1 250000/s   -- -28% -57%
re2 344828/s  38%   -- -41%
spl 584795/s 134%  70%   -- 
```

以下是古代 Core Duo 上 1 亿次调用的概要：

```
re1: 40 wallclock secs (39.84usr+0.00sys=39.84CPU) @ 251004.02/s (n=10000000)
re2: 29 wallclock secs (29.04usr+0.01sys=29.05CPU) @ 344234.08/s (n=10000000)
spl: 18 wallclock secs (16.77usr+0.00sys=16.77CPU) @ 596302.92/s (n=10000000) 
```

从这么多的记录来看，它看起来很重要。但是，如果您要在某处检查其余数据字符串的有效性，则最好在解析阶段检查一次。

# java - 将条件作为参数传递给迭代器

> ID：10600504
> 
> 赞同：0
> 
> 时间：2012-05-15T12:19:50.837
> 
> 标签：java, eclipse, parameter-passing

我几乎完成了我的项目，尽管有一件事我无法克服。

让我先引用它：

> Board 类还必须提供一个返回迭代器的方法，该迭代器将返回板上满足给定条件的所有元素（不包括机器人携带的物品）。条件示例包括能量至少为 1000 Ws 的所有元素（迭代器将不会返回墙壁或惊喜盒子，因为它们没有已知能量）、棋盘某个子范围内的所有元素、棋盘上的所有项目， ETC。

所以，我有一个带有元素的板。（机器人、某些物品、墙壁……）

在课堂上我们已经看到了如何实现 Iterable，并在需要时重写方法 iterator()，但是现在我需要将条件作为参数传递给这个迭代器？

我最好的方法是在课堂上使用这种方法：

```
 public Iterator<Element> getAllElementsByCondition(boolean condition) {
    HashSet<Element> result = new HashSet<Element>();
    for (Element element : elements)
        if (Board.this.hasElement(element) && condition)
            result.add(element);
    return result.iterator();
} 
```

但是，如您所见，我不知道如何将条件作为参数传递给方法。

我也不知道这是否是我创建迭代器的方式。

编辑：
我不允许使用任何外部库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:25:53.450

考虑使用 Guava 的集合扩充。在这种情况下，特别是[`Collections2.filter()`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Collections2.html#filter%28java.util.Collection,%20com.google.common.base.Predicate%29)or [`Collections2.transform()`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Collections2.html#transform%28java.util.Collection,%20com.google.common.base.Function%29)。如果你这样做，你可以提供一个`Predicate`描述你关心的条件，并且只是`filter()`用来遍历集合并返回匹配元素的集合。这是一个非常本地化的示例：

```
public Iterator<Element> getAllElementsByCondition(Predicate<Element> condition) {
  return Collections2.filter(elements, condition).iterator(); 
} 
```

但并不是说如果你接受[Guava](http://code.google.com/p/guava-libraries/)的做事方式，你可能会更彻底地改变结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:26:29.000

假设您不允许使用像 Guava 这样的外部库，您可以：

1.  创建一个`Filter<T>`接口，它有一个方法，让我们调用它`boolean match(T obj)`。
2.  将 a 传递`Filter<Element>`给您的迭代器，该迭代器实现了`match`测试条件的方法，例如`return "The name I'm looking for".equals(element.getName());`.
3.  `filter.match(element)`如果then在你的循环中测试`result.add(element)`。

**编辑**
您的新方法将是：

```
public Iterator<Element> getAllElementsByCondition(Filter<Element> filter) { 
```

你会这样称呼它：

```
Iterator<Element> it = getAllElementsByCondition(new Filter<Element> () {
    public boolean match(element candidate) {
        return /* Enter your condition here */;
    }
}); 
```

条件可以是例如：

```
candidate.getEnergy() > 1000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:26:05.333

我认为你应该澄清任务。我想你的方法应该有效，尽管它应该缩小到类似`getAllElementsWithEnergyGreaterThan(int minEnergy)`. 在你的循环中，你将你的能量与 minEnergy 进行比较。

# php - Phpstorm：xdebug 和未知文件调用

> ID：10600514
> 
> 赞同：1
> 
> 时间：2012-05-15T12:20:21.970
> 
> 标签：php, xdebug, phpstorm

我有 Phpstorm 3.0.2 并且我一直在尝试配置调试器一段时间。当我使用书签并设置“调试此站点”时，我让它工作，但是当我使用 IDE 的“调试”按钮时，我被这个错误难住了：

```
Warning: require_once(PHPUnit/Runner/Version.php): failed to open stream: No such file or directory 
```

命令行运行是：

```
C:\xampp\php\php.exe -dxdebug.remote_enable=1 -dxdebug.remote_host=127.0.0.1 -dxdebug.remote_port=9000 -dxdebug.remote_mode=req "C:\Documents and Settings\<User>\Local Settings\Temp\ide-phpunit.php" --no-configuration <project-folder> 
```

我不知道为什么要调用 ide-phpunit.php，它应该做什么（除了 ide 和 phpunit！）等等。此设置已由我的“前任”修改，因此他们在环境设置中可能存在一些怪癖。

为什么它会尝试运行 phpunit-things，我该如何禁用它？如果我不能，我该如何让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:33:57.803

因为您正在创建**错误**的运行/调试配置类型条目。

您创建“PHPUnit”之一，而您需要“PHP Web 应用程序”或“PHP 远程调试”。

1.  **运行 | 编辑配置...**
2.  在此处手动创建正确的

# jquery - Datepicker 最大值未被验证

> ID：10600515
> 
> 赞同：2
> 
> 时间：2012-05-15T12:20:24.450
> 
> 标签：jquery, html

我有一个日期选择器，maxdate 设置为今天。这是我定义它的方式：

```
$('selector').datepicker({
yearRange: "c-100:+0",
maxDate: '+0d',
changeMonth : true,
changeYear : true,
showAnim:"fold"
}); 
```

当用户从**datepicker ui中选择时，** **maxDate**属性可以正常工作。它将所有未来日期显示为禁用；但是，datepicker 也允许用户通过键盘输入日期，这也是问题开始的地方。

 **DatePicker 甚至在用户按下**回车（提交表单）时验证手动输入的文本的值，但在****模糊**然后提交表单时不验证它；即，当用户离开输入框而不按**enter**时。这允许日期大于最大日期，并且可以在不显示错误的情况下提交。

我可以将文本输入设为只读，但在这种情况下，用户无法通过键盘输入日期。

由于我是 jquery 的新手，我是否缺少一些可以在模糊上验证的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:33:00.040

听起来您想要验证 Date Picker 字段是否为过去的日期，并且当用户离开该字段时不会发生验证。我对日期选择器不够熟悉，不能说有一种验证方法可以在用户将来离开字段时专门调用，但你可以很容易地为用户离开时编写自己的验证例程将焦点移出日期选择器字段。

测试：

```
$("selector").blur(function(e) {
    var today = new Date();
    if ( $(this).datepicker("getDate") > today ) {
        alert("Incorrect");
        // Here you could force their field to be equal to 
        // today if you would like or handle it otherwise
    }
}); 
```

您还可以在提交时验证该字段。

**然而**，即使有所有这些可爱的保护措施，你*也不能用*这些来代替服务器端的验证。如果用户绕过 Javascript 保护并提交带有未来日期的表单，您应该验证并提供适当的错误消息。希望对您有所帮助。

**更新**：[这](https://stackoverflow.com/a/1097985/469643)是一个关于模糊和焦点的非常有趣的讨论，以防你想锁定离开字段的行为与未来的价值。它可能适用于也可能不适用于您想要做/使用的事情。

另一个想法是，在您的错误消息中，您可能希望尽可能描述应输入的日期类型（YYYY-mm-dd），以便来自不同角度（mm/dd/yy 或其他）的用户知道原因他们的意见被拒绝了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:42:42.703

It looks like this is a bug in jquery datepicker. You will have to write your own validation for textbox as mentioned by veeTrain. Or take a look at this if you want something readymade. [http://keith-wood.name/uiDatepickerValidation.html](http://keith-wood.name/uiDatepickerValidation.html)**

# asp.net - 无法加载类型“CwizBankApp.HomeLogin”

> ID：10600517
> 
> 赞同：0
> 
> 时间：2012-05-15T12:20:25.337
> 
> 标签：asp.net

我不知道这里可能缺少什么，但我不断收到此错误，

```
Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not load type 'CwizBankApp.HomeLogin'.

Source Error: 

Line 1:  <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="HomeLogin.aspx.cs" Inherits="CwizBankApp.HomeLogin" %>
Line 2:  
Line 3:  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

Source File: /HomeLogin.aspx    Line: 1 

Here is the code behind file

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;  

namespace CwizBankApp
{
    public partial class HomeLogin : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //Membership.DeleteUser("ppp002");

            if (Request.QueryString["session"] =="new_session")
            {
                Session.Abandon();
                FormsAuthentication.SignOut();
                Response.Redirect("/HomeLogin.aspx");

            }
            //Useful when using role based access because if an authenticated user is sent here that means he is trying to view a page he is not allowed to
            if (Request.IsAuthenticated && !string.IsNullOrEmpty(Request.QueryString["ReturnUrl"]))
            {
                Response.Redirect("/UnauthorizedAccess.aspx");

            }

        }

        protected void cmdLogin_Click(object sender, EventArgs e)
        {
            if (Membership.ValidateUser(txtUsername.Text, txtPassword.Text))
            {
                HttpCookie authCookie = FormsAuthentication.GetAuthCookie(txtUsername.Text, false);
                FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
                FormsAuthenticationTicket newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration, ticket.IsPersistent, "");
                authCookie.Value = FormsAuthentication.Encrypt(newTicket);
                Response.Cookies.Add(authCookie);
                GetUserName(); 
                string redirUrl = FormsAuthentication.GetRedirectUrl(txtUsername.Text, false);
                Response.Redirect(redirUrl);

            }

        }
        public void GetUserName()
        {
            DataClasses1DataContext dt = new DataClasses1DataContext();
            var name =( from nm in dt.Users_AdditionalInfos
                        where nm.UserCode== txtUsername.Text.Trim() 
                        select nm).Single();
           Global.UserName=name.FirstName +" "+ name.LastName; 
        }

        protected void cmdCreateUser_Click(object sender, EventArgs e)
        {

            Response.Redirect("/CreateAccount.aspx");
        }
    }
} 
```

我还检查了我项目的 bin 文件夹下的 dll 不存在，任何人都可以帮我解决这个问题。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:48:06.543

首先检查命名空间是 CwizBankApp，类名是 HomeLogin。

现在重建 - 构建是成功还是失败？如果失败，将不会创建 dll，因此您会收到错误消息，请检查所有错误消息并修复问题，然后重新构建。

# python - OpenERP：创建新记录，one2many many2one关系

> ID：10600518
> 
> 赞同：0
> 
> 时间：2012-05-15T12:20:26.313
> 
> 标签：python, xml, one-to-many, many-to-one, openerp

我在 A 类和其他字段名称（整数）中创建了 on2many 字段：

```
'Inventaire' : fields.one2many('class.b','id_classb'),

'nombre' : fields.integer('Nombre'), 
```

在 b 类中：

```
'id_classb' : fields.many2one('class.a', 'ID_classA'),

'ql' : fields.integer('QL'), 
```

我想在 a 类中创建一个函数，根据 nombre 字段的值为对象 b 创建记录。例如，如果 nombre =3 我应该创建 3 个 b 类对象

这是我的功能：

```
 def save_b(self, cr, uid, ids, field_name, arg, context):
  a= self.browse(cr, uid, id)
  nbr=a.nombre
  num=22
  for i in range(nbr):
       num+=1
       self.create(cr, uid, [(0, 0,{'ql':num})]) 
```

我收到这些错误： TypeError:range()integer expected ,got NoneType ValueError: dictionary update sequence element #0 has length 3; 2 是必需的

有人可以帮助我改善我的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:43:12.970

您有以下错误：

1.  您的创建调用值应该是一个以字段名称作为键的字典，而不是一个带有元组的列表。您使用的符号用于编写/更新 one2many 字段。

2.  您不是在创建“b 类”记录，而是创建“a 类”记录（使用 self 而不是 self.pool.get 调用）

所以你应该写

```
def save_b(self, cr, uid, ids, field_name, arg, context):
    b_obj = self.pool.get('class.b') # Fixes (#2)
    for record in self.browse(cr, uid, ids, context=context):
        num = 22
        for i in range(record.nombre):
            num += 1
            new_id = b_obj.create(cr, uid, {
                'ql': num,
                'id_classb': record.id
            }, context=context) # Fixes (#1) 
```

或者作为替代方案：

```
def save_b(self, cr, uid, ids, field_name, arg, context):
    for record in self.browse(cr, uid, ids, context=context):
        sub_lines = []
        num = 22
        for i in range(record.nombre):
            num += 1
            sub_lines.append( (0,0,{'q1': num}) )
            # Notice how we don't pass id_classb value here,
            # it is implicit when we write one2many field
        record.write({'Inventaire': sub_lines}, context=context) 
```

备注：在 b 类中，您与 a 类的链接在名为“id_classb”的列中？openerp-etiquette 希望您将它们命名为“classa_id”或类似名称。

此外，不赞成使用大写字母创建列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:38:02.797

您可以覆盖 a 类的“创建”方法并在此创建方法中编写代码为 b 类创建记录。

IE

```
def create(self, cr, uid, values, context=None):
    new_id = super(class_a, self).create(cr, uid, values, context)
    class_b_obj = self.pool.get('class.b')
    for i in values['nobr']:
        #  vals_b = {}
        # here create value list for class B 
         vals_b['ql'] = i
         vals_b['id_class_b'] = new_id 

        class_b_obj.create(cr,uid, vals_b , context=context)
    return new_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T17:44:14.127

您可以使用 one2many 关系创建一条记录，例如：

```
invoice_line_1 = {
   'name': 'line description 1',
   'price_unit': 100,
   'quantity': 1,
}

invoice_line_2 = {
   'name': 'line description 2',
   'price_unit': 200,
   'quantity': 1,
}

invoice = {
   'type': 'out_invoice',
   'comment': 'Invoice for example',
   'state': 'draft',
   'partner_id': 1,
   'account_id': 19,
   'invoice_line': [
       (0, 0, invoice_line_1),
       (0, 0, invoice_line_2)
   ]
}

invoice_id = self.pool.get('account.invoice').create(
        cr, uid, invoice, context=context)

return invoice_id 
```

# matlab - 循环加载和保存 .mat 文件

> ID：10600519
> 
> 赞同：0
> 
> 时间：2012-05-15T12:20:28.363
> 
> 标签：matlab, file-io, mat-file

我有一个包含 .mat 文件的文件夹，我想编写一个循环来加载这些文件并对数据执行一些操作：

1）选择我的数据文件文件夹

2）执行以下一组操作（伪代码）：

```
for i = 1:99
    load 'Data0i.mat' ('Datai.mat', if i > 9);
    data = data * 10;
    save data as 'Data0i.mat' to another folder;
end; 
```

什么是 MATLAB 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:32:39.723

```
inputFolder = 'infolder';
outputFolder = 'outfolder';

for i = 1:99
    %# Load data
    inputFilename = sprintf('%s/%02d.mat', inputFolder, i);
    load(inputFilename)

    %# Process data
    data = data * 10;

    %# Savedata
    outputFilename = sprintf('%s/%02d.mat', outputFolder, i);
    save(outputFilename, 'data')
end 
```

# c - fwrite 和 fprintf 在 c 中不起作用

> ID：10600522
> 
> 赞同：0
> 
> 时间：2012-05-15T12:20:45.593
> 
> 标签：c, linux, unix, file-io, network-programming

我编写了一个程序，通过套接字从网络接收一条数据并将其写入文件。我为此目的使用了以下代码：

```
FILE *log;
log = fopen("time.log", "a"); 
fprintf(log,"HI all");
while(1)
{  
    sin_size = sizeof(struct sockaddr_in);
    connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size);
    printf("\n I got a connection from (%s , %d)", inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port));
    fflush(stdout);           
    while(1)
    {       
        fflush(stdout);
        fgets(send_data,1000,stdin);
        send(connected, send_data,strlen(send_data), 0);
        bytes_recieved = recv(connected,recv_data,1024,0);
        recv_data[bytes_recieved] = '\0';
        char newln[2]="\n";
        int len=strlen(recv_data), len1=strlen(newln);
        fwrite(recv_data, len, 1, log);
        fwrite(newln, len1, 1, log);
        fflush(stdout);
    }
}   
fclose(log); 
```

如果文件不存在，fopen 会成功创建文件，但之后什么也没有发生。没有数据写入文件。既不是“HI all”，也不是接收到的数据。是的，正在接收数据，我通过打印接收到的数据来检查它。请帮帮我。提前致谢。运行平台为linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:34:05.990

首先，您应该检查 的返回值`fopen()`以确保`log`不是`NULL`。之后，您应该使用`fflush(log)`before `fflush(stdout)`。

另一件要提的事情是，你永远不会退出第二个`while(1)`循环，所以你也应该解决这个问题。

```
if (bytes_received == 0) {
    /* client closed the connection */
    close(connected);
    break;
}
recv_data[bytes_recieved] = '\0';
char newln[2]="\n"; 
```

# jquery - 有没有像这样的 jquery 菜单插件？

> ID：10600524
> 
> 赞同：0
> 
> 时间：2012-05-15T12:21:00.893
> 
> 标签：jquery, css, menu

[http://www.beltal.com/](http://www.beltal.com/)

![在此处输入图像描述](../Images/c8c833f7b0bfc45a16e442526f91f09a.png)

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:24:16.930

我认为您找不到与您展示的完全一样的东西，您应该检查[一下](http://www.designchemical.com/lab/jquery-vertical-mega-menu-plugin/examples/) ，您可以根据自己的需要进行定制。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:26:48.253

你不需要插件。您可以轻松编写自己的。

将要显示的 div 的 id 作为`data-`属性值放在每个菜单项上。然后在每个菜单项悬停时显示适当的 div。

# asp.net - Ajax UpdatePanel 不适用于 Ext.Net ViewPort。请建议可以为这个问题做些什么？

> ID：10600527
> 
> 赞同：0
> 
> 时间：2012-05-15T12:21:11.373
> 
> 标签：asp.net, extjs, ext.net

当我使用和测试 ext.net 视口 Web 控件时，更新面板不起作用。有趣的是，更新面板与其他提供的 Ext.net 网络控件一起工作得很好。请让我知道如何解决这个问题？示例代码

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <ext:Viewport ID="Viewport2" runat="server" Layout="border">
            <Items>
                <ext:Panel ID="Panel2" runat="server" Collapsible="True" Height="100" Region="North"
                    Split="True" Title="North">
                    <Content>
         <asp:Button ID="Button1" runat="server" Text="Button" />
        </Content>
                </ext:Panel>
                <ext:Panel ID="Panel3" runat="server" Collapsible="true" Layout="Fit" Region="East"

                <ext:Panel ID="Panel10" runat="server" Collapsible="true" Height="100" Region="South"
                    Split="true" Title="South">
                    <Items>
                    </Items>
                </ext:Panel>

                <ext:Panel ID="Panel14" runat="server" Layout="Fit" Region="Center" Title="Center">
                    <Items>
                        <ext:TabPanel ID="TabPanel2" runat="server" ActiveTabIndex="0" Border="false" Title="Center">
                            <Items>
                                <ext:Panel ID="Panel15" runat="server" Closable="true" Title="Tab 1">
                                    <Content>
                <asp:MultiView ID="mvMiddle1" runat="server">
                                <asp:View ID="vMiddleGrid_JK1" runat="server">
                    //Do something
                    </asp:View>
                                    <asp:View ID="vMiddleGrid_JK2" runat="server">
                    //Do something
                    </asp:View>
                </Content>
                                </ext:Panel>
                                <ext:Panel ID="Panel16" runat="server" Title="Tab 2">
                                   <Content>
                <asp:MultiView ID="mvMiddle2" runat="server">
                                <asp:View ID="vMiddleGrid2_new" runat="server">
                    //Do something
                    </asp:View>
                                    <asp:View ID="vMiddleGrid2_old" runat="server">
                    //Do something
                    </asp:View>
                </Content>
                                </ext:Panel>
                            </Items>
                        </ext:TabPanel>
                    </Items>
                </ext:Panel>
            </Items>
        </ext:Viewport>
     </ContentTemplate>
   </asp:UpdatePanel> 
```

我正在使用 ScriptManager 和 ResourceManager。如果我删除视口控件并使用 div 解决问题，那么一切运行良好。在示例代码中，当我单击 asp 按钮并基于 bll 时，mvMiddle1 将设置为 ActiveViewIndex 0 或 1。这就是它的行为方式，而不是每次都重新加载或回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:46:58.793

此问题的解决方案是删除`<asp:UpdatePanel>`. 不是必需的`UpdatePanel`，绝对不应该用于包装整个页面。

# jmeter - JMeter——模拟新老访客

> ID：10600528
> 
> 赞同：0
> 
> 时间：2012-05-15T12:21:16.927
> 
> 标签：jmeter, load-testing

我需要模拟以下内容：

*   500 个并发用户访问 10 个页面
*   40% 的用户是网站的新用户，60% 是老访问者（浏览器缓存中已经有一些页面）
*   10 个页面中有 3 个是老用户在缓存中的“常见”页面。其他 7 页分布如下：20% 在缓存中，80% 是新的。

在 JMeter 中对此进行建模的最佳方法是什么（甚至可能）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:58:47.480

几个注释可能首先有用（抱歉，如果已经知道）：

*   使用[HTTP 缓存管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cache_Manager)，选中“处理 GET 请求时使用缓存控制/过期标头”。
    如果缓存管理器检测到匹配，它将向请求添加 If-Last-Modified 和 If-None-Match 条件标头。如果为真，这将加快响应速度，因为响应会小得多。
*   遵循 HTTP 请求选项，以模拟浏览器行为：
    *   从 HTML 文件中检索所有嵌入式资源
    *   使用并发池
    *   尺寸
*   可能是[吞吐量控制器](http://jmeter.apache.org/usermanual/component_reference.html#Throughput_Controller)——根据上面的场景应用百分比——但只有当你有超过 1 次迭代时它才能正常工作。

您的解决方案可能如下所示（线程组级别的 HTTP 缓存管理器）：

```
 **Thread Group**
    Number of Threads = N
    Loop Count = 1
        **HTTP Cache Manager**
        **Throughput Controller** // CACHING
        Percent Executions
        Throughput = 60
        Per User unchecked
            **Simpler Controller**  // COMMON PAGES
                HTTP Request 01
                HTTP Request 02
                HTTP Request 03
            **Loop Controller**     // REST OF PAGES
            Loops = 7 [10 - 3 pages]
                **Throughput Controller**
                Percent Executions
                Throughput = 20
                    **Random Controller**
                        HTTP Request 04
                        . . .
                        HTTP Request 10
        **Random Order Controller**  // TESTING
            [requests to pages to test]
            HTTP Request 01
            . . .
            HTTP Request 10 
```

“缓存”请求将具有以下详细信息（例如在查看结果树侦听器中）：

*   加载时间=延迟；
*   以字节为单位的正文大小 = 0;
*   响应代码：304
*   响应消息：未修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:58:27.433

这里最简单的事情就是计算出您希望访问您正在测试的服务器的流量级别，然后使用 jmeter 对其进行建模。如果浏览器缓存了一个值，那么实际上它不会进行调用，因此请求永远不会发生，因此您不需要模拟这一点，您只是不发出请求。

要对服务器的流量进行建模，您应该考虑每秒/分钟的请求数。您还可以针对不同类型的页面或请求细分此吞吐量级别。例如，主页的吞吐量可能高于部分页面。获得每种类型的数据后，您可以将测试设置为在此级别运行。

# php - php array_search() 不返回键

> ID：10600529
> 
> 赞同：0
> 
> 时间：2012-05-15T12:21:18.100
> 
> 标签：php, arrays

我有以下数组（$arrayres）（示例数据）

```
Array
(
[0] => Array
        (
            [description] => somedata
            [amount] => 52,6
            [b_id] => Array
                (
                    [0] => 138950106
                    [1] => 138950106
                )

        )

    [1] => Array
        (
            [description] => somedata 
            [amount] => 4,9
            [b_id] => Array
                (
                    [0] => 138911857
                    [1] => 138911857
                )

        )
) 
```

然后我有一个查询，它也在其结果中返回 b_id。我需要找出数组中包含哪些 b_id 以及它们在数组中的各自位置。所以我执行 array_rearch

```
while ($dbres = $res->fetchRow(MDB2_FETCHMODE_ASSOC))
{

    $key = array_search($dbres['b_id'], $arrayres);
    if ($key)
    {
        $keys[] = $key;
    }

} 
```

但似乎没有匹配。print_r($keys) 始终为空，尽管有些结果包含有问题的 b_id。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:24:02.310

当您这样做时，`array_search($dbres['b_id'], $arrayres);`您正在该嵌套数组的“第一层”上搜索键，当然，它们只是`0`或`1`作为键

你可以做这样的事情

```
for($i=0;$i<count($arrayres);$i++) {
    array_search($dbres['b_id'], $arrayres[$i]['b_id']);
    if ($key)
    {
     $keys[] = $key; /* just follow your logic */
    }
} 
```

并且必须插入到while循环中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:26:53.163

您正在搜索的数组不包含您正在搜索的 b_id。它包含一个包含该出价的数组。

因此，如果可以，您需要遍历您拥有的数据数组，或者提供 array_search 整个数组。一种方法是：

```
function has_bid($arrayres, $bid) {
    foreach ($arrayres as $k => $v) {
            // This is assuming $bid is an array with 2 integers.
            if ($v['bid'] == $bid) {
                return $k;
            }
            // And this is assuming $bid is one of the integers.
            /*
               Here, array_search will search for the integer in an array that contains
               the values you are searching for in the first level,
               not inside an array that is inside another one.
               You can think of it as array_search searching the first level of it.
            */
            if (array_search($bid, $v) !== false) {
                return $k;
            }
    }
    return false;
} 
```

你会像这样使用这个函数：

```
$key = has_bid($arrayres, $dbres['bid']);
if ($key !== false) {
     // do something...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T12:24:35.287

试试这个...

```
if($key !== false){
     $keys[] = $key;
} 
```

# regex - 正则表达式，匹配句子中的单词

> ID：10600534
> 
> 赞同：0
> 
> 时间：2012-05-15T12:21:29.000
> 
> 标签：regex

我有以下正则表达式：

```
.*?\b(случајот)\b. 
```

而且我没有得到我需要的东西。我想得到单词出现的句子，但是当我试图在文本的末尾得到一个句子时，我得到了整个文本。所以我需要任何建议如何用匹配的单词在两个句号之间获取句子。

我正在使用 python 和 RegexBuddy 进行测试。例子：

```
**случајот** кај веќе сериозен политички и безбедносен инцидент јас на веќе гледам како на политички и безбедносен настан. 
```

它只是突出显示这个词。

```
cell= db_conn.use_client().hql_query(db_conn.use_namespace(),"SELECT * FROM SE_doc_text WHERE ROW=                  \"da687a08e348c6791cbcc07c9a3057ef6473910b797839adabb0193e\" SCAN_AND_FILTER_ROWS LIMIT 1").cells 
#print cell[0].value
print "=============================="
text_nparsed = re.split( r"([^\.]*\bдаме\b[^\.]*)\.",  cell[0].value.replace("\\'","'")) 
return text_nparsed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:26:46.830

我想你想要`([^\.]*\bслучајот\b[^\.]*)\.`

选择没有“。”的任何内容 其中包括孤立的单词，后跟一个“.”。

# iphone - iPhone：从数组中获取字符到 unichar 时应用程序崩溃

> ID：10600539
> 
> 赞同：1
> 
> 时间：2012-05-15T12:21:33.183
> 
> 标签：iphone, objective-c, ios5

我有一个包含两个空白字符的数组，如下所示：

```
shuffleArray = [[NSMutableArray alloc] initWithObjects:@"H",@"E",@"",@"",@"O", nil]; 
```

现在我想将数组的值分配给 unichar 以进行进一步编码，如下所示：

```
for(int i=0; i<[shuffleArray count]; i++)
{
       NSString *temp = [shuffleArray objectAtIndex:i];
        NSLog(@"string:%@",temp);
        unichar c = [temp characterAtIndex:0];
} 
```

它可以很好地打印 "H" 和 "E" ，但是当它找到空白字符时，即 @"" 。

它在这一点上崩溃

```
unichar c = [temp characterAtIndex:0]; 
```

我怎么解决这个问题。

任何帮助都将是可观的。

提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:27:54.413

来自 characterAtIndex：参考：

> **讨论**
> 
> 如果索引超出接收器的末尾，则引发 NSRangeException。

所以你需要在尝试访问它的字符之前检查字符串是否不为空

```
NSString *temp = [shuffleArray objectAtIndex:i];
NSLog(@"string:%@",temp);
unichar c = someInitialValue; // to indicate later that the string was empty may be equal 0 ?
if ([temp length] > 0) [temp characterAtIndex:0]; 
```

您的循环条件在上次迭代时也是错误的（当 i 等于 [shuffleArray count] 时）您将得到相同的 NSRangeException 异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:25:47.237

试试这个它有效

```
 for( NSString *temp in shuffleArray )
  {
    NSLog(@"string:%@",temp);
    if (temp.length) {
      unichar c = [temp characterAtIndex:0];
    }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:30:14.727

我在这段代码中看到 2 个错误：

```
NSMutableArray *shuffleArray = [[NSMutableArray alloc] initWithObjects:@"H",@"E",@"",@"",@"O", nil];

for(int i=0; i < [shuffleArray count]; i++) // < and not <=
{
    NSString *temp = [shuffleArray objectAtIndex:i];
    NSLog(@"string:%@",temp);
    if ([temp length] > 0)
    {
        unichar c = [temp characterAtIndex:0]; // Check if you can acces to the element before
        NSLog(@"%c", c);
    }
} 
```

# db2 - DB2 9.5。从第一列中选 择不同的值，但看到其他 2 列值

> ID：10600541
> 
> 赞同：0
> 
> 时间：2012-05-15T12:21:53.110
> 
> 标签：db2

我有一个包含 80,000 多行（标签提要）的表，其中我有 12 个不同的标签（TagID），所以我只想返回 12 行。

我想根据 (MAX) 日期列找到每个 tagid 的最新值。所以我真的想在 tagid 上有一个 DISTINCT 并确保我有最新日期的记录并显示 tagid、日期和位置列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:38:51.303

```
SELECT date, tagid, location
FROM table a
WHERE date = (
    SELECT MAX(date)
    FROM table b
    WHERE a.key1 = b.key1
      AND a.key2 = b.key2
      -- etc
) 
```

会给你你想要的。我猜这`WHERE a.tagid = b.tagid`可能是您想要的 WHERE 子句，但如果有其他列使该行唯一，您可能还需要包括这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:26:24.357

这是一种无需连接子查询中的所有键列即可产生所需结果的方法：

```
WITH x AS ( 
     SELECT datecol, 
         tagid, 
         location, 
         ROW_NUMBER() OVER ( PARTITION BY tagid ORDER BY datecol DESC ) AS rnum
     FROM sometable
)
SELECT datecol, tagid, location FROM x WHERE rnum = 1
; 
```

# jpa-2.0 - JPA2.0 Criteria API：getRestriction() 不能正常工作？

> ID：10600546
> 
> 赞同：0
> 
> 时间：2012-05-15T12:22:17.300
> 
> 标签：jpa-2.0, eclipselink, criteria-api

我在使用 Criteria API 时遇到了一个奇怪的问题。我想动态地将谓词添加到查询中。

我使用 eclipselink-2.4.0.v20120411-r11144 作为 JPA 2.0 实现。

如您所见，我尝试了各种方法，但都没有奏效。

我怎么做？感谢您的回复！

```
@Repository("mockRepository")
public class MockRepository implements Serializable {

    private static final long serialVersionUID = 1L;

    @PersistenceContext
    private EntityManager em;

    @PostConstruct
    public void myRequest() {
        CriteriaBuilder builder = em.getCriteriaBuilder();
        CriteriaQuery<MyEntity> query = builder.createQuery(MyEntity.class);        
        Root<MyEntity> root = query.from(MyEntity.class);

        query.where(builder.like(root.get("myAttr").as(String.class), "%foo%")); // SELECT ID, MYATTR, MYSECONDATTR FROM MYENTITY WHERE MYATTR LIKE ? -> Orignal query

        //query = addRestriction_1(builder, query, root); // SELECT ID, MYATTR, MYSECONDATTR FROM MYENTITY WHERE ((MYATTR LIKE ? = ?) AND (MYSECONDATTR = ?)) -> query fails

        //query = addRestriction_2(builder, query, root); // SELECT ID, MYATTR, MYSECONDATTR FROM MYENTITY WHERE ((MYATTR LIKE ? = ?) AND (MYSECONDATTR = ?)) -> query fails

        //query = addRestriction_3(builder, query, root); // SELECT ID, MYATTR, MYSECONDATTR FROM MYENTITY WHERE MYATTR LIKE ? -> where is my second predicate ??

        em.createQuery(query).getResultList(); 
    }

    private CriteriaQuery<MyEntity> addRestriction_1(CriteriaBuilder builder, CriteriaQuery<MyEntity> query, Root<MyEntity> root) {
        query.where(
                query.getRestriction(),
                builder.equal(root.get("mySecondAttr").as(String.class), "bar")
        );
        return query;
    }

    private CriteriaQuery<MyEntity> addRestriction_2(CriteriaBuilder builder, CriteriaQuery<MyEntity> query, Root<MyEntity> root) {     
        Predicate p = query.getRestriction();
        Predicate p1 = builder.equal(root.get("mySecondAttr").as(String.class), "bar");
        Predicate p2 = builder.and(p, p1);
        query.where(p2);
        return query;
    }

    private CriteriaQuery<MyEntity> addRestriction_3(CriteriaBuilder builder, CriteriaQuery<MyEntity> query, Root<MyEntity> root) {
        query.getRestriction().getExpressions().add(
                 builder.equal(root.get("mySecondAttr").as(String.class), "bar")
        );
        return query;
    }
}

@Entity
public class MyEntity implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    private Long id;

    private String myAttr;
    private String mySecondAttr;

    public String getMyAttr() {
        return myAttr;
    }

    public void setMyAttr(String myAttr) {
        this.myAttr = myAttr;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getMySecondAttr() {
        return mySecondAttr;
    }

    public void setMySecondAttr(String mySecondAttr) {
        this.mySecondAttr = mySecondAttr;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:38:00.243

这似乎是 getRestriction() 中的一个错误，如果它是一个表达式，它将返回一个无效的谓词。如果它是一个谓词，它虽然有效，所以我的猜测是如果你将你的第一个查询更改为，

```
query.where(builder.and(builder.like(root.get("myAttr").as(String.class), "%foo%"), builder.like(root.get("myAttr").as(String.class), "%foo%")); 
```

那么它将起作用。

请记录错误并为它投票。

# ant - 用 Ant 运行 selenium

> ID：10600547
> 
> 赞同：2
> 
> 时间：2012-05-15T12:22:18.180
> 
> 标签：ant, selenium

我在 Google 和 stackoverflow 上查看过，但找不到。

我知道可以使用 Ant 脚本启动 selenium 独立服务器。

我现在尝试做半天。

脚本应该做的唯一事情是：

*   启动 selenium 独立服务器
*   在 Firefox 中转到 1 个 Web URL
*   关闭

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:32:36.710

我使用以下解决方案通过 Ant 启动 selenium 独立服务器：

```
<target name="selenium">
    <exec executable="cmd">
        <arg value="/c"/>
        <arg value="java -jar ${selenium.standalone} -htmlSuite ${selenium.browser} ${selenium.url} ${selenium.testsuite} ${selenium.result}"/>
    </exec>
</target> 
```

# knockout.js - 淘汰赛奇怪/（也许我太笨了无法理解）下拉行为

> ID：10600548
> 
> 赞同：0
> 
> 时间：2012-05-15T12:22:20.987
> 
> 标签：knockout.js

这是我目前正在处理的代码

```
<html>
<head>
@using MvcJqGrid;
@using System.IO;
@using System.Web.Mvc;
@{
    Layout = "";   
    }

<link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery-ui.css" />
<link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery.ui.base.css" />
<link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery.ui.theme.css" />
<link rel="Stylesheet" type="text/css" href="Content/ui.jqgrid.css" />

<script type="text/javascript" src="Scripts/modernizr.custom.05850.js"></script>
<script type="text/javascript" src="Scripts/jquery-1.7.2.js" > </script>
<script type="text/javascript" src="Scripts/jquery-ui-1.8.19.js"> </script>
<script  type="text/javascript"  src="Scripts/grid.locale-en.js" ></script>
<script   type="text/javascript" src="Scripts/jquery.jqGrid.min.js"></script>
<script type="text/javascript" src="Scripts/json2.min.js"></script>
<script type="text/javascript" src="Scripts/knockout-2.1.0.js"></script>

</head>
<body>
<!-- This is a *view* - HTML markup that defines the appearance of your UI -->

<p>View Name: <input data-bind="value: sharepointView().Name" /></p>
<p>No Of Results: <input data-bind="value: sharepointView().noOfResultsPerPage"/></p>
<p id='filterEnable' >Filter Expression:Test</p>
<p id='addFilterExpression' >add Filter</p>
<div id='filterExpression'>   
<ul id='filterElements'>
</ul>
</div>

<script type="text/javascript">
    function AppViewModel() {
       //model binding dude
       this.sharepointView=ko.observable(@Html.Raw(PseudoSharepointView.getAView()));

       this.myOptions=(@Html.Raw(PseudoSharepointView.getAllVariables()));
    }

    // Activates knockout.js
    ko.applyBindings(new AppViewModel());
</script>
<script type="text/javascript">

    $('#filterEnable').click(function () {
        $('#addFilterExpression').slideToggle('slow', function () {
            // Animation complete.
        });
    });

    $('#addFilterExpression').click(function () {

  $('#filterElements').append('<li>').append('<p>').html(" 
 <select data-bind='options: $root.myOptions'></select>
          ");
    });
</script>
</body>
</html> 
```

现在“选择”的东西似乎让我头疼

当它按原样放入体内时工作正常

但是当我尝试使用 jquery 函数插入相同的内容时，我只得到一个空的下拉列表....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:37:24.397

您的 javascript 只是作为呈现的页面运行。尝试将您的 javascript 放入`document.ready`处理程序并重新排序您的函数调用：

```
<script type="text/javascript"> 
$(function () {
    var viewModel = null;
    function AppViewModel() { 
       //model binding dude 
       this.sharepointView=ko.observable(@Html.Raw(PseudoSharepointView.getAView())); 

       this.myOptions=(@Html.Raw(PseudoSharepointView.getAllVariables())); 
    } 

    $('#filterEnable').click(function () { 
        $('#addFilterExpression').slideToggle('slow', function () { 
            // Animation complete. 
        }); 
    }); 

    $('#addFilterExpression').click(function () { 

       $('#filterElements').append('<li>').append('<p>').html("<select data-bind='options: $root.myOptions'></select>"); 
       ko.applyBindings(viewModel, document.getElementById("filterElements"));
    }); 

    // Activates knockout.js 
    viewModel = new AppViewModel(); 
    ko.applyBindings(viewModel);
});

</script> 
```

**更新**：您还需要调用`ko.applyBindings`任何新创建的指定`data-bind`属性的 DOM 元素。见上面的`$('#addFilterExpression').click`函数

# asp.net - 如何在数据表的列中查找重复项并使用星号 asp.net vb 制作它们

> ID：10600550
> 
> 赞同：1
> 
> 时间：2012-05-15T12:22:21.420
> 
> 标签：asp.net, vb.net, datatable

我有一个内存`DataTable`，我需要标记重复项.....例如..

从 ![在此处输入图像描述](../Images/b8d0ecf4fc2a5d5adf3088588fb3574b.png) 到 ![在此处输入图像描述](../Images/d00ccc713b47df68e0571000d44a3989.png)

我可能会做类似..

```
 For each dtrow in dt.rows
    If dtrow("Country") Is one of Duplicates then
            dtrow("Country") += "*"
    end if
    Next 
```

抱歉问了这么多问题......我的头被烧毁了..什么都没出来..这个项目需要很快完成..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:30:01.680

你可以使用`LINQ-to-DataTable`：

```
Dim dups = From row In dt.AsEnumerable()
           Let country = row.Field(Of String)("Country")
           Group row By country Into DupCountries = Group
           Where DupCountries.Count() > 1
           Select DupCountries
For Each dupCountryRows In dups
    For Each row In dupCountryRows
        row("Country") = row.Field(Of String)("Country") & "*"
    Next
Next 
```

或者使用 C# 语法：

```
var dups = from row in dt.AsEnumerable()
           let id = row.Field<string>("Country")
           group row by country
           into DupCountries where DupCountries.Count() > 1
           select DupCountries; 
```

# xcode - 如何检查是否在正在进行的 XCode 项目上启用了 Git

> ID：10600553
> 
> 赞同：0
> 
> 时间：2012-05-15T12:22:39.910
> 
> 标签：xcode, git

什么是检查 git 是否在我不久前开始的当前正在进行的 XCode 项目中启用或未启用的快速方法，因此不记得我是否选中了 git 复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T00:52:31.210

你有几个选择。可能最相关的是转到“组织者”并单击“存储库”。如果您创建了一个存储库，它将在那里（并且您将能够看到它的结构）。

如果您对“终端”应用程序感到满意，您可以切换到项目的文件夹/目录并执行“ls -lF .git”。如果报告了某些内容，则存在 GIT 存储库。

最后，在 Xcode 中，您可以单击项目本身，查看“实用程序”窗格，选择“文件检查器”，打开“源代码控制”窗格并查看它的内容。

# c# - DateTime?.ToString(格式)

> ID：10600554
> 
> 赞同：5
> 
> 时间：2012-05-15T12:22:47.270
> 
> 标签：c#, .net, datetime, nullable, datetime-format

> **可能重复：**
> [如何使用 ToString() 格式化可为空的 DateTime？](https://stackoverflow.com/questions/1833054/how-can-i-format-a-nullable-datetime-with-tostring)

解析日期时间有问题吗？为特定格式。喜欢：

```
 DateTime t1 = ...;
 string st1 = t1.ToString(format); //<-- works

 DateTime? t1 = ...;
 string st1 = t1.ToString(format); //Dont work. 
```

DateTime 没有重载方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T12:24:19.797

```
if (t1.HasValue)
    string st1 = t1.Value.ToString(format); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T12:25:37.000

使用合并运算符

```
DateTime? t1 = ...;

string st1 = t1 ?? t1.Value.ToString(format); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:24:46.977

你可以这样尝试，nullabale 类型有一个叫做 hasValue 的属性 [Nullable 有 Value](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)

```
if (t1.HasValue)
   t1.Value.ToString(yourFormat) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:26:25.537

您应该首先检查 DateTime 是否为空

```
 string strDate = (st1 != null ? st1.Value.ToString(format) : "n/a"); 
```

# sencha-touch - 向字段集字段添加披露

> ID：10600561
> 
> 赞同：2
> 
> 时间：2012-05-15T12:23:04.123
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个这样的字段集：

```
Ext.define('admin.view.BuzzEditForm', {
    extend: 'Ext.form.Panel',
    requires: ['Ext.form.FieldSet','Ext.Img'],
    id: 'editorPanel',
    xtype: 'buzzEditForm',
    config: {
        /* modal: true,
         hideOnMaskTap: false,
         centered: true,
         width: 500,
         scrollable: false,*/
        items: [{
            xtype: 'fieldset',
            items: [
                {
                    xtype: 'textfield',
                    name: 'keyword',
                    label: 'Mots clés'
                },
                {
                    xtype: 'textfield',
                    name: 'title',
                    label: 'Titre'
                },
                {
                    id: 'editorPanelvisual',
                    xtype: 'field',
                    label: 'Visuel actuel',
                    component: {
                        xtype: 'image',
                        src: '',
                        height: 200
                    }
                },
                {
                    xtype: 'textfield',
                    name: 'visual',
                    label: 'Visuel'
                }
            ]
        }]
    }
}); 
```

我想在我的 editorPanelvisual 字段中添加一个按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:31:25.800

这需要您更深入地了解`Ext.data.Field`：

`component`是输入字段的特殊配置，默认情况下，它设置为`{xtype: "input", type: "text"}`，这是此解决方法的关键。使用配置缩放你的`textfield`vs`button`宽度`flex`

试试这个：

```
{
    id: 'editorPanelvisual',
    xtype: 'field',
    component: {
      xtype: 'container', 
      layout: 'hbox', 
      items: [
      {
        xtype: 'textfield', 
        flex: 3,
      }, 
      {
        xtype: 'button', 
        flex: 1, 
        text: 'test'
      }
      ]},
}, 
```

# java - 如何使用正则表达式替换编码字符串中的 : 字符？

> ID：10600562
> 
> 赞同：-3
> 
> 时间：2012-05-15T12:23:06.623
> 
> 标签：java, regex

我有一个带有语法的编码字符串

```
"encodedProp:encodedValue OPERATOR encodedProp1:encodedValue1" 
```

（OPERATOR 可能是`AND`, `OR`, `NOT`, 并且有 N 对`prop:value`）。

, `"encodedProp"`, `"encodedValue"`, `"encodedProp1"`...`"encodedValue1"`是编码字符串。

我想使用正则表达式来替换`":"`by `" = "`。此外，左侧的部分`":"`应替换为`"\"" + left_part + "\""`，右侧的部分应替换为`"'" + right_part + "'"`。

对于上面的例子，替换后的字符串应该是：

```
"\"encodedProp\" = 'encodedValue' OPERATOR \"encodedProp1\" = 'encodedValue1'" 
```

我必须用什么表达来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:28:47.740

好的，因为问题没有明确定义，所以我在这里冒险，但让我们试一试。

```
String resultString = subjectString.replaceAll(
    "(?x)(       # Match and capture in backreference number 1:\n" +
    " [^\\s:]+   #  one or more characters except spaces or colons\n" +
    ")           # End of capturing group 1\n" +
    ":           # Match a colon\n" +
    "(           # Match and capture in backreference number 2:\n" +
    " [^\\s:]+   #  one or more characters except spaces or colons\n" +
    ")           # End of capturing group 2", 
    "\"$1\" = '$2'"); 
```

这完全忽略了这`OPERATOR`部分 - 它只是查找包含一个冒号的字符序列，并将它们包裹在单引号/双引号中，一路替换冒号。

# visual-c++ - directshow RedenStream 捕获失败

> ID：10600563
> 
> 赞同：0
> 
> 时间：2012-05-15T12:23:06.873
> 
> 标签：visual-c++, directshow, video-capture, mp4

我正在制作一个 Directshow 应用程序来捕获 MP4 视频。我使用下图来做到这一点。

```
Input Stream --> MJPEG Decompressor --> x264vfw H.264/MPEG-4 AVC Codec --> GDCL Mpeg-4 Multiplexor --> File Writer 
```

在我的directshow应用程序中，我创建了所需的过滤器并将它们连接到图形上，最后我使用pin作为捕获进行文件写入操作和redder流。我的那部分代码如下。

```
GUID guid;
guid = MEDIASUBTYPE_x264;

hr = gcap.pBuilder->SetOutputFileName(&guid, gcap.wszCaptureFile,
                                      &g_mp4mux, &gcap.pSink);

hr = gcap.pBuilder->RenderStream(&PIN_CATEGORY_CAPTURE,
                                     &MEDIATYPE_Interleaved,
                                     gcap.pVCap, pVcompFilter, NULL);
if(hr != NOERROR)
{
    hr = gcap.pBuilder->RenderStream(&PIN_CATEGORY_CAPTURE,
                                        &MEDIATYPE_Video,
                                        gcap.pVCap, pVcompFilter, NULL);
    if(hr != NOERROR)
    {
        ErrMsg(TEXT("Cannot render video capture stream"));
        TearDownGraph();
        return FALSE;
    }
} 
```

在上面的代码

`g_mp4mux`是 `GDCL MPEG-4 Muliplexrer` 文件管理器

`PVcompFilter`是`x264vfw H.264/MPEG-4 AVC codec`过滤器

当我运行上面的代码时，我得到 HR = `E_INVALIDARG`。

不知道上面的代码有什么问题。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:53:23.620

`RenderStream`在内部执行许多步骤，并且如果在序列期间发生任何错误，错误将被转发回去而不提供详细信息。因此，`E_INVALIADRG`您所拥有的只是，您不知道这是您的电话或内部的错误论点。

对于初学者，请检查您的参数（您可能`NULL`在第 3 和第 4 个参数中传递 s），然后如果没有帮助，请将 RenderStream 替换为直接图形构建调用，例如 IGraphBuilder::Connect 以了解有关该错误的更多信息。

还要提及您的交叉发布：[在 msdn.microsoft.com](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/48e6290b-9dfc-4095-9f66-fc01de2d0d22#dcafe27e-d6d2-4e76-82ae-92068c9e9e39)

# php - Wamp Server 没有执行 php 代码

> ID：10600564
> 
> 赞同：5
> 
> 时间：2012-05-15T12:23:10.783
> 
> 标签：php, wamp, execution

当我访问根目录时，我的 php 代码没有执行

```
http://localhost:8080/sample.html 
```

我要运行的代码是：

```
<?php phpinfo(); ?> 
```

我还尝试了以下方法：

*   多次重新启动所有服务，包括将 Wamp Server 联机
*   将 httpd.conf 中的监听端口更改为 8080 并将 Skype 配置为接受 80 和 443 端口

可能是某些 Firefox 扩展阻止了 php 执行吗？

我得到的只是和我写的完全一样的 php 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:30:09.247

您正在尝试在“.html”文件中执行 PHP。您必须在 apache 配置中编辑 PHP 处理程序以使其处理您想要的任何文件扩展名。在您的 Apache 配置文件中查找“AddType application/x-httpd-php .php”（类似于“wamp/apache/conf/httpd.conf”），然后在“.php”之后添加“.html”。该行现在应该如下所示：

```
AddType application/x-httpd-php .php .html 
```

PHP 现在应该执行它在带有“.php”和“.html”扩展名的文件中找到的任何代码。

编辑：或者正如上面有人建议的那样，只需将您的文件重命名为“sample.php”，它就会被处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T12:26:46.923

任何扩展都不会干扰 php 的执行，因为它是在服务器端执行的，而不是在客户端执行的。

未执行 php 代码，因为您的文件扩展名为 html，并且 WAMP 服务器不处理`.html`文件。

将扩展名更改为示例。**php**然后它会工作

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-01T15:37:14.557

它可能会帮助某人。更改标签

```
<? 
```

至

```
<?php 
```

在我的 WAMP 服务器上为我做了这个伎俩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T12:26:39.080

如果您从字面上看到字符串

```
<?php phpinfo(); ?> 
```

打开 httpd.conf 文件并取消注释该行

```
LoadModule php5_module "C:/PROGRA~1/BITNAM~1/php/php5apache2_2.dll" 
```

此外，请确保文件名完全以 .php 结尾。如果Windows在您将文件保存到最后时添加了.txt或其他废话，apache将不知道让php处理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-28T08:01:49.323

重新启动所有服务并确保 WAMP 服务器图标为绿色，如果不是，则重新启动 wamp 服务器或重新安装它。然后检查 localhost。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-26T14:34:51.267

我通过谷歌来到这里是为了同样的症状。

就我而言，它只是隐藏文件扩展名的 Windows 资源管理器。

对于像我这样的 Windows 普通用户来说，这是一个很好的陷阱。

因此，我实际上没有将文件命名为 index.php，而是使用了 index.php.txt。

我使用以下过程修复了扩展显示：http: [//kb.winzip.com/kb/entry/26/](http://kb.winzip.com/kb/entry/26/)

线索是：我的 php 文件上没有 IDE 图标。

我不知道我的回答是否真的有帮助，在最初的问题 5 年后......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-28T19:24:58.180

是的，我也遇到了同样的问题。我通常通过更改文件扩展名来解决它，我们以“.php”扩展名保存文件，但计算机可能存储在“.php.txt”扩展名中。因此，通过单击文件管理器顶部工具栏上的“查看”来更改它，然后将选择标记为“文件新扩展名”复选框，这样做会显示存储文件的不同扩展名并相应地更改扩展名。

希望，它可能会解决您的问题。

# c# - 是否可以保存和恢复完整的 aspx 页面？

> ID：10600566
> 
> 赞同：1
> 
> 时间：2012-05-15T12:23:18.220
> 
> 标签：c#, asp.net, .net, iframe

我们的客户有这样的要求：

*   当用户单击表单上的搜索图标时，搜索页面应显示在模式对话框 (iframe) 中
*   用户可以搜索、浏览他的搜索结果并选择一条记录
*   现在模态对话框隐藏并且用户查看记录
*   当用户再次点击搜索图标时，模态对话框再次出现

现在我的问题部分：

*   当用户离开当前页面并在几分钟后返回页面并再次按下搜索图标以继续搜索时，他应该会看到与之前离开的页面相同的页面。

我更喜欢只保存整个页面并在用户想要再次查看搜索页面时恢复它。但我不知道这是否可能..

我真的不想保存所有搜索过滤器，并在用户转到搜索页面时再次进行搜索，因为有> 100个搜索过滤器，搜索也可能需要一段时间。

客户的硬性要求是他应该能够继续他的搜索，并且不应该每次他再次进入搜索页面时都重新开始。

感谢您对此提出的所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:31:40.937

听起来您可以使用带有 VaryByParam 属性集的 .NET 的 @OutputCache 页面声明（如果搜索参数至少通过查询字符串传递。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:54:54.517

我会想出某种自定义缓存机制来将搜索结果存储在服务器上。当用户提交搜索时，结果会存储在缓存中，并且会向页面返回一个键。然后当用户单击按钮重新查看结果时，使用密钥从服务器检索结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:22:43.693

为什么不将搜索结果保存到会话或视图状态变量？

如果我处于您的位置（并且无法将搜索结果保存到会话变量中），我会：

1.  使模态对话框成为自己的页面。
2.  [在服务器上下载页面](http://www.csharp-examples.net/download-files/)（服务器连接到模态对话框页面并下载内容）。
3.  将下载的页面存储在某处（可能是会话，但也可能是数据库或文件系统）。
4.  将[iFrame](http://www.w3schools.com/tags/tag_iframe.asp)添加到模态对话框（确保添加名称字段，否则它将在 FF 中不起作用）。
5.  将模态对话框中 iFrame 的来源设置为保存的搜索结果。

应该注意的是，如果搜索结果使用服务器端、浏览器相关控件（根据服务器上指示的浏览器类型返回不同 HTML 的控件），此解决方案将出现问题。

如果需要，如果将 div 的内部 html 设置为已保存页面上 body 标记的内部 html，则可以将 iFrame 替换为 div。

我相信 ASP 中还有一个内置功能可以获取页面的渲染文本，但我不记得它叫什么了。

# android - 如何在 Android 应用程序中显示搜索对话框？

> ID：10600568
> 
> 赞同：0
> 
> 时间：2012-05-15T12:23:47.430
> 
> 标签：android, search

我正在开发一个 Android 应用程序。我想在我的活动中实现搜索功能。我希望，当用户按下按钮时，应该会出现一个搜索对话框，并且在单击后应该会出现该搜索结果。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:57:39.700

Android 文档有一些关于实现搜索功能的非常好的和广泛的教程。你应该看看：

[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

这将引导您在活动中实现搜索（您不能跳过建议/内容提供者部分）

总结一下您需要采取的步骤，您将在 manifest.xml 中将您的活动声明为可搜索，说明哪个活动将显示搜索结果并实现搜索时调用的方法。Android 可以为您处理搜索栏/输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:31:24.240

使用 AutoCompleteTextView 进行搜索。

```
public class AutoCompleteText extends Activity {

    String[] androidBooks = 
    {
        "Hello, Android - Ed Burnette",
        "Professional Android 2 App Dev - Reto Meier",
        "Unlocking Android - Frank Ableson",
        "Android App Development - Blake Meike",
        "Pro Android 2 - Dave MacLean",
        "Beginning Android 2 - Mark Murphy",
        "Android Programming Tutorials - Mark Murphy",
        "Android Wireless App Development - Lauren Darcey",
        "Pro Android Games - Vladimir Silva",
    };
    private String[] item = { "Aaaaa", "Bbbbb", "Ccccccc", "Dddddd", "Eeeeee", "Fccccc", "Gccc", "Haaa" };
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line,item);
        AutoCompleteTextView acTextView = (AutoCompleteTextView)findViewById(R.id.AndroidBooks);
        acTextView.setThreshold(3);
        acTextView.setAdapter(adapter);

    }
} 
```

# maven - Maven Central 的 Nexus 索引不是最新的（新安装）

> ID：10600576
> 
> 赞同：2
> 
> 时间：2012-05-15T12:24:14.950
> 
> 标签：maven, clojure, nexus, maven-central

我有一个全新的 Sonatype Nexus 安装，我打算用它来代理 Maven Central 和其他存储库。一切似乎都运行良好，直到我想从 com.theoryinpractise 获得最新版本的 clojure-maven-plugin。在 Eclipse 中，当我知道存在更高版本时，我只能看到最高版本 1.3.8 的版本。

我尝试搜索 search.maven.org 并确认版本 1.3.9 和 1.3.10 确实在中央存储库中可用。

我已经使用 Web 界面登录到 Sonatype Nexus，并为中央存储库尝试了“浏览索引”，它只列出了最高 1.3.8 的版本。但是，对同一存储库使用“浏览远程”选项卡会显示最高 1.3.10 的版本。

我已经尝试了我能想到的所有方法来更新索引（“下载远程索引”设置为 true，并且我选择了过期缓存、修复索引、更新索引）。我的 Nexus 安装只有 4 天，所以我不确定为什么至少 3 个月的 1.3.9 版本不会反映在最初下载的索引中。

如果您有任何关于下一步尝试的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:01:02.793

我向 Sonatype 报告了这个问题。这似乎是 Maven Central 的一个已知问题：

> “我在这里看到了同样的事情，似乎有一些最近的工件从中央索引中丢失的模式。我已经更新了我为此提交的问题：
> 
> [https://issues.sonatype.org/browse/MVNCENTRAL-201](https://issues.sonatype.org/browse/MVNCENTRAL-201)
> 
> 请注意，Maven 构建不使用搜索索引，因此您仍然可以从构建中访问此工件。此外，一旦通过 Nexus 下载，它就会出现在搜索索引中。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:23:26.307

您需要启用[远程索引的下载](http://www.sonatype.com/books/nexus-book/reference/confignx-sect-manage-repo.html)。默认情况下，此功能未启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T23:48:20.503

正如 Mark 提到的，对于所有发布索引的代理存储库，您应该将下载远程索引的标志设置为 true。

此外，您应该创建一个计划任务，该任务将定期下载所有存储库的索引，以确保您的索引是最新的并包含自上次下载以来可用的所有工件。

# jquery - 克隆 jQuery 时增加数组

> ID：10600580
> 
> 赞同：0
> 
> 时间：2012-05-15T12:24:21.127
> 
> 标签：jquery, clone

我有以下代码：http: [//jsfiddle.net/stomp/a8vjg/](http://jsfiddle.net/stomp/a8vjg/)

一切正常，除了我需要选择字段的名称为 extras[0]，然后为下一个添加的字段命名为 extras[1]，依此类推..

有人可以帮忙吗？

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:37:53.813

首先，您应该只用“extras”命名您的选择元素......

```
<select name="extras"> 
```

然后使用它

```
elemenets = $('[name=extras]') 
```

它将是一个数组，您可以通过 extras[0] ， extras[1] ，.....等访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:37:44.843

你的意思是：

```
case "add":
                var newTag = tag.clone();
                var i = $("#multi").find("select").length;
                console.log(i);
                 newTag.find("select").attr("name", 'extras['+i+']');              
            tag.after(newTag.find("input").val("").end());
            break; 
```

参见：[jsFiddle](http://jsfiddle.net/a8vjg/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:36:30.760

克隆时你需要这样的东西：

```
case "add":
            var cnt=jqEl.parent().siblings().size();
            var cloned=tag.clone();
               $(cloned).find("input").val("")
                   .end()
                   .find('select').attr('name','extra['+cnt+']');

            tag.after(cloned);
            break; 
```

检查工作[分叉](http://jsfiddle.net/V3vTc/3/)（如果删除和添加可能会重复）

没有重复的[小提琴](http://jsfiddle.net/V3vTc/4/) （如果删除节点，则无法确保序列号）

所以完美的解决方案可能是在 [Save] 按钮上添加 id 这是[解决方案](http://jsfiddle.net/V3vTc/5/)

```
function save(e) {
        multiTags.find("select").each(function(i){
            $(this).attr('name','extras['+i+']');
        });

        var tags = multiTags.find("input.tag").map(function() {
            return $(this).val();
        }).get().join(',');
        alert(tags);
        return false;
    } 
```

# programming-languages - 含义：O__b_variable_function__b__

> ID：10600586
> 
> 赞同：0
> 
> 时间：2012-05-15T12:24:36.593
> 
> 标签：programming-languages, el, oracle-adf

我正在使用 Oracle ADF，并使用 JSF 页面。在一些教程之后，我看到了这样的“废话”陈述：`O__b_variable_function__b__`

逻辑应该是：`#{variable.function == true ? 'a' : 'b'}` 但我不理解带有下划线的奇怪标记。

有谁知道“下划线标记”来自哪种语言？会帮助我调试:)

Example（大约在页面的一半 - 示例 3 - Stamped SparkCharts）：[http ://docs.oracle.com/cd/E29049_01/apirefs.1112/e17490/tagdoc/dvt_pivotTable.html](http://docs.oracle.com/cd/E29049_01/apirefs.1112/e17490/tagdoc/dvt_pivotTable.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:43:11.957

如果您更仔细地查看代码，您询问的项目是方面的**名称**- 不是属性，因此我们不会使用表达式语言来设置它。正如 Marcin 指出的那样，这只是一个名称混乱 - 有什么问题？

```
facetname="O___b_cellData_dataIsTotal__b__" 
```

# java - 了解 Spring 存储库文档

> ID：10600588
> 
> 赞同：0
> 
> 时间：2012-05-15T12:24:39.797
> 
> 标签：java, spring-data

我正在按照此处的指南在我的网站上设置存储库：http: [//static.springsource.org/spring-data/data-jpa/docs/1.0.0.M1/reference/html/#repositories.introduction](http://static.springsource.org/spring-data/data-jpa/docs/1.0.0.M1/reference/html/#repositories.introduction)

我有点困惑，为什么在第 1.4.1 节中他们突然扩展了`JpaRepository`……这是一个 JPA 类还是他们写的东西？我试图在我的应用程序中做同样的事情，但它没有工作，它不知道 JpaRepository 是什么，尽管已加载。

```
public interface UserRepository extends JpaRepository<User, Long>, UserRepositoryCustom {
  // Declare query methods here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:46:03.043

有一个接口层次结构，您可以扩展其中之一以使您的接口被发现为 Spring Data 存储库。我没想到需要记录这一点，因为在打开类型并遵循类型层次结构时非常明显。不过，我会改进文档。以下是您的选择：

*   `Repository`- 简单的标记接口，允许基础设施获取存储库接口
*   `CrudRepository extends Repository`- 添加 CRUD 方法
*   `PagingAndSortingRepository extends CrudRepository`添加分页和排序功能
*   `$PersistenceTechnology$Repository extends PagingAndSortingRepository`- 向接口添加特定于技术的方法和方法覆盖。JPA 重新声明`findAll()`返回 a`List`而不是`Iterable`等。

# mysql - mysql查询中的小错误

> ID：10600591
> 
> 赞同：0
> 
> 时间：2012-05-15T12:24:53.477
> 
> 标签：mysql

有人可以在这个微小的错误中帮助我吗？我写了这个，（这是行不通的），

```
SELECT sum(case when SD.order_id>0 then 1 else 0 end) as SD.customer_id  
FROM tbl_order_lead_send_detail SD 
```

但是，这个查询工作正常。

```
SELECT sum(case when order_id>0 then 1 else 0 end) as customer_id  
FROM tbl_order_lead_send_detail 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:26:47.333

你的问题是这样的：

```
as SD.customer_id 
```

你可以考虑写：

```
as `SD.customer_id` 
```

**编辑**

因为你不能`.`在列名中。如果您将它们作为字符串使用，则可以使用。`.`用于表中的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:29:10.797

请试试：

```
SELECT sum(case when SD.order_id>0 then 1 else 0 end) as customer_id FROM tbl_order_lead_send_detail, SD 
```

# c# - 以编程方式从 HTML 元素中删除特定的类名

> ID：10600592
> 
> 赞同：4
> 
> 时间：2012-05-15T12:24:53.637
> 
> 标签：c#, asp.net, .net

在 C# ASP.NET 中，我将一个类添加到`<input>`使用中：

```
myInput.Attributes.Add("class","myClass"); 
```

在某些时候，我想删除添加的类（不是所有类）。是否有类似的内容：

```
myInput.Attributes.Remove("class","myClass"); 
```

`.Remove()`似乎只接受一个键（没有对值）。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T12:28:14.427

没有内置任何东西来管理属性中的多个值。

您将不得不解析列表，删除类名并更新属性。

类似（未经测试）：

```
var classes = myInput.Attributes["class"].Split(' ');

var updated = classes.Where(x => x != "classtoremove").ToArray();

myInput.Attributes["class"] = string.Join(" ", updated); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:00:53.437

我受到 Odeds 帖子的启发，并创建了这两种扩展方法供您详细说明；

```
public static void AddCssClass(this WebControl control, params string[] args)
{
    List<string> classes = control.CssClass.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList<string>();
    List<string> classesToAdd = args.Where(x => !classes.Contains(x)).ToList<string>();
    classes.AddRange(classesToAdd);
    control.CssClass = String.Join(" ", classes);
}
public static void RemoveCssClass(this WebControl control, params string[] args)
{
    List<string> classes = control.CssClass.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList<string>();
    classes = classes.Where(x => !args.Contains(x)).ToList<string>();
    control.CssClass = String.Join(" ", classes);
} 
```

这些方法仅用于从[WebControls](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.aspx)中添加或删除 CSS 类（从[Button](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.aspx) s、[Label](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.aspx) s、[Panel](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.aspx) s 等都继承），如`myButton.AddCssClass("class1", "class2");`或`myButton.RemoveCssClass("class2");`。

这可能有点开销，但管理[CssClass](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)属性也可能有点麻烦，因为您被迫自己处理空格。

例如，你有多少次没看过这个？

```
string myCssClass = "class1";
myButton.CssClass += " " + myCssClass; 
```

请随时改进方法！:)

# facebook - Facebook graph api DfsException：我选择 lvols 失败

> ID：10600595
> 
> 赞同：2
> 
> 时间：2012-05-15T12:25:00.360
> 
> 标签：facebook, api

我在未更改的代码中从 php Facebook api 调用中得到了这个异常，这在前几天是可以的：

**DfsException：我无法选择 lvols :(**

任何人都可以帮助或解释它的含义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:05:52.073

这是星期二，当 FB 推送他们的大部分新代码时，应该很快就会解决。有[一张开票](http://developers.facebook.com/bugs/448760731816423?browse=search_4fb1e1adcdcb31d85533405)。

# java - JSF 2.0 - 使用 AJAX 动态加载时未调用 Primefaces ActionListensers

> ID：10600597
> 
> 赞同：2
> 
> 时间：2012-05-15T12:25:06.993
> 
> 标签：java, jsf-2, primefaces

我正在使用 JSF 2.0 和 Primefaces 3.2 开发应用程序，我遇到了以下问题：如果使用 ajax 请求动态加载内容，则不会调用 ActionListeners。

主要布局：

```
<div id="content">
    <h:form name="content_form" id="content_form">
        <ui:insert name="content" />
    </h:form>
</div> 
```

索引页面（内容根据菜单操作动态加载）：

```
<ui:composition template="layout.xhtml">
    <ui:define name="content">
        <ui:include src="#{ajaxViewBean.viewName}" /> 
    </ui:define>
</ui:composition> 
```

菜单操作生成如下：

```
 FacesContext context = FacesContext.getCurrentInstance();
        MethodExpression methodExpression = context
                .getApplication()
                .getExpressionFactory()
                .createMethodExpression(
                        context.getELContext(),
                        "#{ajaxViewBean.setViewName('" + navItem.getUrl()
                                + "')}", null,
                        new Class[] { ActionEvent.class });
        displayMenuItem.setUpdate(":content_form");
        displayMenuItem
                .addActionListener(new MethodExpressionActionListener(
                        methodExpression)); 
```

单击菜单项后，它会调用 AjaxViewBean“请求范围”来设置当前视图页面并更新主布局中的“content_form”

包含的页面（其中动作侦听器不起作用）

*   第一次尝试 - 文件上传 (uploadFile.xhtml)

    ```
    <h:body>
    <h:form enctype="multipart/form-data">

        <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"  
                      mode="advanced"  
                      update="messages"   
                      multiple="true"  
                      sizeLimit="100000"   
                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>  

        <p:growl id="messages" showDetail="true"/>  
    </h:form> 
    ```

    fileUploadController 永远不会被调用。如果我直接请求uploadfile.xhtml，或者在第一次加载时包含它，我可以上传文件，所以我确信上传是工作文件，并且web.xml 中的所有内容都配置正确。

*   第二次尝试 - 包含页面中的菜单操作侦听器

    ```
    <h:body>
    <h:form>
        <p:menu type="tiered" style="width:180px">
            <p:submenu label="Ajax Menuitems" icon="ui-icon-refresh">
                <p:menuitem value="Save"
                    actionListener="#{ajaxViewBean.setViewName()}" update="messages"
                    icon="ui-icon-disk" />
                <p:menuitem value="Update" actionListener="#{buttonBean.update}"
                    update="messages" icon="ui-icon-arrowrefresh-1-w" />
            </p:submenu>
        </p:menu>
    </h:form> 
    ```

    动作中的事件监听器也永远不会触发，尽管它是在主页中触发的，并且是从上面提到的代码动态生成的

Maven依赖：

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.4</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.4</version>
</dependency>
<dependency>
    <groupId>javax.servlet.jsp.jstl</groupId>
    <artifactId>jstl-api</artifactId>
    <version>1.2</version>
</dependency>
<dependency>
    <groupId>com.sun.facelets</groupId>
    <artifactId>jsf-facelets</artifactId>
    <version>1.1.14</version>
</dependency>
<dependency>
    <groupId>javax.el</groupId>
    <artifactId>el-api</artifactId>
    <version>2.2</version>
</dependency>
<dependency>
    <groupId>org.glassfish.web</groupId>
    <artifactId>el-impl</artifactId>
    <version>2.2</version>
</dependency>
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>3.2</version>
</dependency>
<dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId>commons-fileupload</artifactId>
    <version>1.2.2</version>
</dependency>
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.3</version>
</dependency> 
```

如果我遗漏了什么，有人可以请教，或者我该如何解决？

其实这是我在 Stackoverflow 的第一篇文章，所以希望我说清楚了，格式不要乱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:37:29.397

固定！，我正在发布答案（可能对某人有用）步骤如下：

*   确保没有违反此 URL：[commandButton/commandLink/ajax action/listener 方法未调用或输入值未更新](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)
*   根据此 URL 使用部分状态保存方法为 false：http: [//balusc.blogspot.com/2011/09/communication-in-jsf-20.html](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

    ```
    <context-param>
      <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
      <param-value>false</param-value>
    </context-param> 
    ```

需要强调的一点：

*   然而，全局禁用部分状态保存的缺点是视图状态大小会增大。所以如果你使用服务器端状态保存方法，那么服务器的内存使用会增加，或者如果你使用客户端状态保存方法，那么网络带宽使用会增加。基本上，您将获得与 JSF 1.x 中相同的视图状态信息。如果可能，您还可以通过 web.xml 中的以下上下文参数禁用按视图保存部分状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:18:28.483

如我所见，您正在嵌套表单。这在 HTML/XHTML 中是不允许的。

您有封闭`content_form`和包含页面，每个页面也有一个表单。

尝试删除`content_form`：

```
<div id="content">
    <ui:insert name="content" />
</div> 
```

并更改`displayMenuItem`以将更新设置为`content`div：

```
displayMenuItem.setUpdate(":content"); 
```

我希望它有所帮助。

# javascript - Facebook 发送按钮：没有弹出按钮

> ID：10600598
> 
> 赞同：0
> 
> 时间：2012-05-15T12:25:10.187
> 
> 标签：javascript, facebook, ruby-on-rails-3

我正在尝试在我当前的项目中使用[发送按钮。](https://developers.facebook.com/docs/reference/plugins/send/)我按照页面上的说明进行操作，现在我有了页面上的按钮。它显示得很好，我可以点击它，但是没有弹出窗口，什么都看不到。所以经过几次搜索，我想“嘿，可能是一种风格”。我设置了一个带有新布局的新控制器，除了 js SDK 和按钮代码之外什么都不加载。相同的行为。所以，我在这里，我看不出我做错了什么。此外，js 控制台或“网络”选项卡上没有错误。

[感兴趣的文件在这里](https://gist.github.com/2701361)

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:18:35.900

好的，它有效，我不知道为什么。可能是缓存问题或其他问题，尽管这很奇怪，因为问题发生在多个浏览器上。

# math - FOR循环内的回声中的数学

> ID：10600605
> 
> 赞同：0
> 
> 时间：2012-05-15T12:25:30.843
> 
> 标签：math, for-loop, batch-file, echo

我在批处理文件中有一个 FOR 循环，其中我在 echo 语句中打印计数器值：下面的示例代码：

```
SET cycles= (%%n+1) ****here n is a variable of value 1

for /l %%n in (1,1,%iterations%) do (
echo This is Iteration no: (%%n+%cycles%)
) 
```

这不起作用，因为它不计算，而是说

**`For was not expected this time.`**

*我也试过 (%%n+%%cycles) 但它不起作用。*

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:15:56.703

这完全失败了，因为您在 echo 语句中使用了括号！

您必须转义它们，因为右括号关闭了 FOR 循环。
同样的问题，当你`cycle`用百分比扩展变量时，最好使用延迟扩展，因为内容将不再被解析。

```
setlocal EnableDelayedExpansion
SET cycles= (%%n+1) ****here n is a variable of value 1
set iterations=5

for /l %%n in (1,1,%iterations%) do (
    echo This is Iteration no: (%%n+!cycles!^)
) 
```

**编辑**：*计算*版本

```
setlocal EnableDelayedExpansion
SET cycles= (%%n+1)
set iterations=5

set "cyclesEscape=!cycles:)=^)!"
for /l %%n in (1,1,%iterations%) do (
    set /a result=%cyclesEscape%
    echo This is Iteration no: %%n Formula !cycles!=!result!
) 
```

# asp.net-mvc - 在集线器、SignalR 之外获取 connectionId

> ID：10600608
> 
> 赞同：7
> 
> 时间：2012-05-15T12:25:37.873
> 
> 标签：asp.net-mvc, signalr

如何在 Hub 之外获取客户端 connectionId/clientId？.. 我已经设法做到以下几点：

```
var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>(); 
```

但是在那个上下文对象中，没有 a 之类的东西`clientId`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:59:32.330

您可以在集线器上实现 IConnected/IDisconnect 并手动跟踪客户端，例如在数据库中，然后在需要时拉回列表。下面的示例来自[SignalR Wiki](https://github.com/SignalR/SignalR/wiki/Hubs)

```
public class Status : Hub, IDisconnect, IConnected
{
    public Task Disconnect()
    {
        return Clients.leave(Context.ConnectionId, DateTime.Now.ToString());
    }

    public Task Connect()
    {
        return Clients.joined(Context.ConnectionId, DateTime.Now.ToString());
    }

    public Task Reconnect(IEnumerable<string> groups)
    {
        return Clients.rejoined(Context.ConnectionId, DateTime.Now.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T16:58:52.083

为什么全局上下文中会有连接 ID？它指的是哪个连接？当您获得全局上下文时，您正在访问从服务器到客户端的单向通道，并且可以通过它发送消息。由于您没有调用集线器，因此您无权访问集线器的连接 ID。如果需要使用它们，可以将它们存储在应用程序的某个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T16:16:38.450

我将@davidfowl 评论更改为答案 - 您将其从客户端发送到您的 mvc 操作。它可以通过 $.connection.hub.id 在客户端上使用

```
 $.connection.hub.start().done(function () { console.log($.connection.hub.id); }); 
```

然后用它做任何你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-29T07:32:06.863

这是解决方案。你可以在里面调用一个方法，`hub`然后你可以`connection ID`从那里返回。

**在控制器中**

```
var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
MyHub _connectedHub= new MyHub();
var connectedUserID = _connectedHub.GetConnectionID(); 
```

**在集线器**

```
public string GetConnectionID()
{
     return "Your Connection ID as String"  //This can be stored in a list or retrieved in any other method
} 
```

您将在`connectedUserID`变量集线器之外获得所需的 ID。希望这可以帮助。

# java - 如何解决android中的内存不足错误？

> ID：10600609
> 
> 赞同：0
> 
> 时间：2012-05-15T12:25:45.517
> 
> 标签：java, android, out-of-memory

我试图将字节数组转换为十六进制字符串。但我最终出现内存不足错误异常。我对此一无所知。

```
 private String byteArrayToHexString(byte[] array) {
        StringBuffer hexString = new StringBuffer();
        for (byte b : array) {
          int intVal = b & 0xff;
          if (intVal < 0x10)
            hexString.append("0");
          hexString.append(Integer.toHexString(intVal));
        }
        return hexString.toString(); 
```

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:55:32.490

发送前不转换 - 发送时转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:59:19.727

这是一个例子。您基本上想先连接到网络服务器，然后直接在输出流中将图像转换为十六进制字符串，以便字节直接发送到服务器，您不必先将整个图像转换为巨大的字符串然后将其推送到服务器。

```
byte[] array; // This is your byte array containing the image
URL url = new URL("http://yourwebserver.com/image-upload-or-whatever");
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
try {
    urlConnection.setDoOutput(true);
    urlConnection.setChunkedStreamingMode(0);

    OutputStream out = new BufferedOutputStream(urlConnection.getOutputStream());
    // Now you have an output stream that is connected to the webserver that you can
    //  write the content into
    for (byte b : array) {
        // Get the ASCII character for the first and second digits of the byte
        int firstDigit = ((b >> 4) & 0xF) + '0';
        int nextDigit = (b & 0xF) + '0';
        out.write(firstDigit);
        out.write(nextDigit);
    }
    out.flush(); // ensure all data in the stream is sent
    InputStream in = new BufferedInputStream(urlConnection.getInputStream());
    readStream(in); // Read any response
} finally {
    urlConnection.disconnect();
} 
```

我没有尝试过这段代码，但希望你明白这一点。

# javascript - DataTables 服务器端脚本的客户端脚本

> ID：10600611
> 
> 赞同：0
> 
> 时间：2012-05-15T12:25:52.460
> 
> 标签：javascript, python, datatables

我正在为 DataTables 编写服务器端处理代码。我有一个 UI 页面，我在其中收集所有用户输入，例如开始/结束日期、令牌 ID、批处理 ID 等。现在我必须将这些值传递给后端脚本并运行查询并将输出呈现到 UI 页面中的数据表。

所以我有 JS 代码来获取和验证用户输入，但我不知道如何调用/设置数据表的参数来状态服务器端脚本。下面是我的脚本：

```
function runreport(datastring)
{
       var oTable = $('#example').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "runsearch.py",
                "bDestroy" : true,
                "fnServerData": function ( sSource, aoData, fnCallback ) {
                        $.ajax( {
                                        "dataType": 'json',
                                        "type": "POST",
                                        "url": sSource,
                                        "data": aoData,
                                        "success": function(json) {
                                                $("div#report_result").show();
                                                $('html, body').animate({scrollTop:$(document).height()}, 'slow');
                                                fnCallback(json);
                                        }
                                } );
                 }
        } );
} 
```

验证所有输入参数后，我调用“runreport”方法。我像查询字符串一样构造数据字符串： token_id=xxxx&email_id=asdsad@jj.com&start_date=1212121212&end_date=98989898 但这些值没有通过？我收到以下错误：

```
k is undefined
[Break On This Error]  

...Sorting=="undefined"&&typeof e.saved_aaSorting=="undefined")e.aaSorting[a][1]=k....

jquery....min.js (line 150) 
```

我们应该怎么做才能让后端脚本生成 DataTables 结果？

我没有得到想要的结果输出？这是为服务器端进程调用 DataTables 功能的正确方法吗？

下面是我转储静态结果集的 Python 代码：

```
#!/usr/local/bin/python

import cgi
import MySQLdb
import json

print "Content-Type: application/json"
print

displaylength =5
result = {'iDisplayLength':str(displaylength), 'sPaginationType':'full_numbers', 'bProcessing':1, 'bDestroy': 1, 'bRetrieve':1, 'aaData':[{'First Field':'First Field Value', 'Second Field':'Second Field Value', 'Third Field':'Third Field Value', 'Fourth Field':'Fourth Field Value', 'Fifth Field':'Fifth Field Value', 'Sixth Field':'Sixth Field Value', 'Seventh Field':'Seventh Field Value', 'Eight Field':'Eight Field Value', 'Nineth Field':'Nineth Field Value'}, {'First Field':'First Field Value', 'Second Field':'Second Field Value', 'Third Field':'Third Field Value', 'Fourth Field':'Fourth Field Value', 'Fifth Field':'Fifth Field Value', 'Sixth Field':'Sixth Field Value', 'Seventh Field':'Seventh Field Value', 'Eight Field':'Eight Field Value', 'Nineth Field':'Nineth Field Value'}], 'aoColumns':[{'sTitle':'First Field', 'mDataProp': 'First Field'},{ 'sTitle':'Second Field', 'mDataProp': 'Second Field'}, {'sTitle':'Third Field', 'mDataProp': 'Third Field' }, { 'sTitle':'Fourth Field', 'mDataProp': 'Fourth Field' }, { 'sTitle':'Fifth Field' , 'mDataProp': 'Fifth Field' }, { 'sTitle':'Sixth Field', 'mDataProp': 'Sixth Field' }, { 'sTitle':'Seventh Field', 'mDataProp': 'Seventh Field' }, { 'sTitle':'Eight Field', 'mDataProp': 'Eight Field' }, { 'sTitle':'Nineth Field', 'mDataProp': 'Nineth Field' }]}

json_string = json.dumps(result)
print json_string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T15:19:28.610

这是我的一些数据表和服务器端/客户端的 C# 代码

如果需要，您可以使用它来将其翻译成 python，我从 Alans PHP 示例中翻译了它

客户端：

```
/* Instantiate the Datatables on the ASP.NET GridView */
var dt = $('#gvJobs').dataTable({
    "sDom": 'C<"clear">Rlfrtip', /* ColReOrder, ColVis */
    "bFilter": true, /* Use custom filters, i have to revise this as I am doing the drop down filter manually now */
    "bSort": true,
    "bAutoWidth": false,
    "bProcessing": true, /* Needed, Read Datatables documentation */
    "bServerSide": true, /* Needed, Read Datatables documentation */
    "aaSorting": [[0, "desc"]], /* Initial Default Sorting on the First Column */
    "sPaginationType": "full_numbers",
    "fnServerData": function (sSource, aoData, fnCallback) {
        /* Adding Custom Drop Down Filter property to aoData which will be used server side */
        aoData.push({ name: "ddlStatus", value: $("#ddlStatus option:selected").text() });

        /*  Here I do the PageMethods call (ASP.NETs Ajax Replacement) PageMethods.getData
        "getData" is a Server Side C# Method which looks like this:

        [WebMethod]
        public static string getData(List<oaData> aoData)
        {
        //Method Code
        }

        With page methods you pass in all your parameters matching the server side method,
        And right at the end, add your two callback functions for onsuccess and onerror
        */
        PageMethods.getData(aoData, function (obj) {
            /* On Success, datatables fnCallback with JSON object */
            fnCallback(JSON.parse(obj));
        }, function (XMLHttpRequest, textStatus, errorThrown) {
            /* On Error, show error alert */
            alert(XMLHttpRequest.status + ': ' + XMLHttpRequest.responseText);
        });
    },
    "aoColumns": [
    /*  This (JobNo) my first column which is Custom with 3 Images and a HyperLink to another page,
    The last 5 Columns is hidden from the User because those fields are only used to 
    Render the correct images in this first column, Only used as Eval fields basically

    Note that mDataProp is the GridView column's "DataField" and not the "HeaderText"
    */
        { "mDataProp": "JobNo",
          "fnRender": function (oObj) {
             return "<img src='" + (oObj.aData.HasAttachments ? "css/paperclip-icon.png" : "css/empty-icon.png") + "' height='16px' />"
                    + "<a href='#' onclick=\"gotoJobDetail('" + oObj.aData.JobId + "');\">" + oObj.aData.JobNo + "</a>"
                    + "<img src='" + (oObj.aData.Visited ? "css/yes.png" : "css/no.png") + "' height='16px' />"
                    + "<img src='" + (oObj.aData.Completed ? "css/completed.png" : "css/notcompleted.png") + "' height='16px' />";
            },
            "bUseRendered": true /* This renders the Column in HTML first, else you'd see the actual HTML text in the column */
        },
        {    "mDataProp": "JobStatusName" },
        {    "mDataProp": "StatusDateTime" },
        /* Only used as Eval Field for one of the images in the JobNo Column */
        {    "mDataProp": "HasAttachments",
            "bSearchable": false,
            "bVisible": false
        },
        /* Only used as Eval Field for one of the images in the JobNo Column */
        {"mDataProp": "Visited",
        "bSearchable": false,
        "bVisible": false
        },
        /* Only used as Eval Field for one of the images in the JobNo Column */
        {"mDataProp": "Completed",
        "bSearchable": false,
        "bVisible": false
        },
        /* Just Hidden, not used at the moment neither by the user nor the application */
        {"mDataProp": "JobStatusId",
        "bSearchable": false,
        "bVisible": false
        },
        /* Only used as Eval Field for one of the images in the JobNo Column */
        {"mDataProp": "JobId",
        "bSearchable": false,
        "bVisible": false
        }
    ]
}); 
```

服务器端对象

```
//INCOMING OBJECT FROM CLIENTSIDE
public class oaData
{
    public string name { get; set; }
    public string value { get; set; }
}

//RETURNING OBJECT TO CLIENTSIDE
public class oaData<T>
{
    public int sEcho { get; set; }
    public int iTotalRecords { get; set; }
    public int iTotalDisplayRecords { get; set; }
    public T aaData { get; set; }
    public string sColumns { get; set; }
}
//THIS IS 'T' IN oaData<T>
public class JobOverviewDynamic
{
    public int JobNo { get; set; }
    public string JobStatusName { get; set; }
    public string StatusDateTime { get; set; }
    public bool HasAttachments { get; set; }
    public bool Visited { get; set; }
    public bool Completed { get; set; }
    public int JobStatusId { get; set; }
    public int JobId { get; set; }
} 
```

填充对象，然后使用 Newtonsoft 库对其进行 JSON 字符串化并返回 HERE 是我的服务器端方法

```
[WebMethod]
public static string getData(List<oaData> aoData)
{
    /* The Columns array
     * If the array from Parameters is not empty, then use that
     */
    string[] aColumns = { "JobNo", "JobStatusName", "StatusDateTime", "HasAttachments", "Visited", "Completed", "JobStatusId", "JobId" };
    var newCols = aoData.Where(n => n.name == "sColumns").Select(n => n.value).FirstOrDefault().Split(',');
    aColumns = (newCols.Length == 1 && newCols[0] == "") ? aColumns : newCols;

    /* Paging */
    var iDisplayStart = aoData.Where(n => n.name == "iDisplayStart").Select(n => n.value).FirstOrDefault();
    var iDisplayLength = aoData.Where(n => n.name == "iDisplayLength").Select(n => n.value).FirstOrDefault();

    /* Ordering */
    var sOrder = "";
    var iSortCol_0 = aoData.Where(n => n.name == "iSortCol_0").Select(n => n.value).FirstOrDefault();
    if (iSortCol_0 != null && aColumns.Length > 0)
    {
        sOrder = "ORDER BY  ";
        var iSortingCols = aoData.Where(n => n.name == "iSortingCols").Select(n => int.Parse(n.value)).FirstOrDefault();
        for (int i = 0; i < iSortingCols; i++)
        {
            var iSortCol = aoData.Where(n => n.name == "iSortCol_" + i).Select(n => int.Parse(n.value)).FirstOrDefault();
            var bSortable = aoData.Where(n => n.name == "bSortable_" + iSortCol).Select(n => bool.Parse(n.value)).FirstOrDefault();

            if (bSortable)
            {
                var sSortDir = aoData.Where(n => n.name == "sSortDir_" + i).Select(n => n.value).FirstOrDefault();
                sOrder += aColumns[iSortCol] + " " + sSortDir + ", ";
            }
        }
        sOrder = sOrder.Trim();
        sOrder = sOrder.Substring(sOrder.Length - 1) == "," ? sOrder.Substring(0, sOrder.Length - 1) : sOrder;
        sOrder = (sOrder == "ORDER BY") ? "" : sOrder;
    }

    /* Filtering
     */
    var sWhere = "";
    var sSearch = aoData.Where(n => n.name == "sSearch").Select(n => n.value).FirstOrDefault();
    var status = aoData.Where(n => n.name == "ddlStatus").Select(n => n.value).FirstOrDefault();
    if (sSearch != "" && aColumns.Length > 0)
    {
        sWhere = "WHERE (";
        for (int i = 0; i < aColumns.Count(); i++)
        {
            sWhere += aColumns[i] + " LIKE '%" + sSearch + "%'" + (i < aColumns.Count() - 1 ? " OR " : " ");
        }
        sWhere = sWhere.Trim() + ")";
    }

    /* Individual column filtering */
    for (int i = 0; i < aColumns.Count(); i++)
    {
        var bSearchableCol = aoData.Where(n => n.name == "bSearchable_" + i).Select(n => bool.Parse(n.value)).FirstOrDefault();
        var sSearchCol = aoData.Where(n => n.name == "sSearch_" + i).Select(n => n.value).FirstOrDefault();

        if (bSearchableCol && sSearchCol != "")
        {
            sWhere = (sWhere == "") ? "WHERE " : sWhere + " AND ";
            sWhere += aColumns[i] + " LIKE '%" + sSearchCol + "%' ";
        }

        /* Added this second if statement for my custom drop down filter on a specific column
         * The fnFilter setting with a column number does not work, and this way, ColReorder will still work
         */
        if (status != "" && aColumns[i] == "JobStatusName")
        {
            sWhere = (sWhere == "") ? "WHERE " : sWhere + " AND ";
            sWhere += aColumns[i] + " = '" + status + "' ";
        }
    }

    /* SQL queries
     * Get data to display
     */
    List<LTS.JobOverviewDynamicResult> data;
    using (var m = new Methods())
    {
        //Im not giving my SQL query
        data = m.getJobOverviewDynamicData(sWhere, sOrder, iDisplayStart, iDisplayLength);
    }

    int iFilteredTotal = 0;
    int iTotal = 0;
    if (data.Count() > 0)
    {
        /* Filtered dataset and Total dataset length */
        iFilteredTotal = (int)data.FirstOrDefault().ITotalFiltered;
        iTotal = (int)data.FirstOrDefault().ITotal;
    }

    /* Output */
    var sEcho = aoData.Where(n => n.name == "sEcho").Select(n => int.Parse(n.value)).FirstOrDefault();
    var output = new oaData<List<JobOverviewDynamic>>()
    {
        sEcho = sEcho,
        iTotalRecords = iTotal,
        iTotalDisplayRecords = iFilteredTotal,
        aaData = data.Select(n => new JobOverviewDynamic()
        {
            JobNo = (int)n.JobNo,
            JobStatusName = n.JobStatusName,
            StatusDateTime = ((DateTime)n.StatusDateTime).ToString("yyyy-MM-dd hh:mm"),
            HasAttachments = (bool)n.HasAttachments,
            Visited = (bool)n.Visited,
            Completed = (bool)n.Completed,
            JobStatusId = (int)n.JobStatusId,
            JobId = (int)n.JobId
        }).ToList(),
        sColumns = string.Join(",", aColumns)
    };

    return JsonConvert.SerializeObject(output);
} 
```

我希望这有点道理，如果不是 - 问，我会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:52:44.413

aoData.push 是您正在寻找的。将此用于您的 fnServerData 回调，将 aoData.push 中的名称和值替换为您要传递的值。名称将是键，值将是值，作为 $_REQUEST 变量传递：

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
        aoData.push({ "name": "var1name", "value": $('#var1').val() },
                    { "var2name": "company_name", "value": $('#var2').val() });

        $.ajax({
            "dataType": 'json',
            "type": "POST",
            "url": sSource,
            "data": aoData,
            "success": fnCallback
         });
} 
```

要测试它是否正常工作，请让获取 ajax 请求的页面简单地向您发送 $_REQUEST。您应该将这些变量视为其中的一部分。

回调的一个常见伴侣是添加一个按钮来刷新表格。只需将以下内容绑定到刷新按钮上的单击处理程序即可完成：

```
oTable.fnDraw(false); 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:30:56.047

有多种方法可以做到这一点。DataTables 支持[AJAX 源](http://datatables.net/release-datatables/examples/data_sources/ajax.html)，因此您可以编写一个脚本来输出一个 json 数组并将其传递给 DataTables 插件。您也可以只从 PHP 渲染表格。

我会查看其中的一些[示例](http://datatables.net/examples/)，以了解可以将数据传递给 DataTables 的其他方式。

# iphone - iOS 图像方向有奇怪的行为

> ID：10600613
> 
> 赞同：97
> 
> 时间：2012-05-15T12:26:02.523
> 
> 标签：iphone, objective-c, ios

在过去的几周里，我一直在使用 Objective-c 中的图像并注意到很多奇怪的行为。首先，像许多其他人一样，我一直遇到这个问题，即用相机拍摄的图像（或用别人的相机拍摄并用彩信发送给我）旋转 90 度。我不确定为什么会发生这种情况（因此[我的问题](https://stackoverflow.com/questions/10307521/ios-png-image-rotated-90-degrees "我的问题")），但我能够想出一个便宜的解决方法。

这次我的问题是**为什么会这样**？苹果为什么要旋转图像？当我用相机正面朝上拍照时，除非我执行上面提到的代码，否则当我保存照片时，它会旋转保存。现在，直到几天前，我的解决方法还可以。

我的应用程序修改图像的单个像素，特别是 PNG 的 alpha 通道（因此对于我的场景，任何 JPEG 转换都会被抛出窗口）。几天前，我注意到即使由于我的解决方法代码在我的应用程序中正确显示了图像，但当我的算法修改图像的各个像素时，它认为图像已旋转。所以不是修改图像顶部的像素，而是修改图像侧面的像素（因为它认为应该旋转）！我不知道如何在内存中旋转图像 - 理想情况下，我宁愿一起擦掉那个`imageOrientation`标志。

这里还有一些让我感到困惑的事情......当我拍照时，`imageOrientation`设置为 3。我的解决方法代码足够聪明，可以实现这一点并翻转它，这样用户就不会注意到。此外，我将图像保存到库中的代码实现了这一点，翻转它，*然后*保存它，以便它正确地出现在相机胶卷中。

该代码如下所示：

```
NSData* pngdata = UIImagePNGRepresentation (self.workingImage); //PNG wrap 
UIImage* img = [self rotateImageAppropriately:[UIImage imageWithData:pngdata]];   
UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil); 
```

当我将这个新保存的图像加载到我的应用程序中时，它`imageOrientation`是 0 - 正是我想要看到的，我的旋转解决方法甚至不需要运行（注意：从互联网加载图像而不是使用相机拍摄的图像时,`imageOrientation`始终为 0，导致完美行为）。出于某种原因，我的保存代码似乎抹去了这个`imageOrientation`标志。我希望在用户拍照并将其添加到应用程序后立即窃取该代码并使用它来擦除我的 imageOrientation，但它似乎不起作用。做`UIImageWriteToSavedPhotosAlbum`一些特别的事情`imageOrientation`吗？

`imageOrientation`解决此问题的最佳方法是在用户完成拍摄后立即吹走。我认为苹果公司的轮换行为是有原因的，对吧？一些人认为这是苹果的缺陷。

（......如果你还没有迷路......注2：当我拍摄水平照片时，一切似乎都完美无缺，就像从互联网上拍摄的照片一样）

编辑：

以下是一些图像和场景的实际样子。根据目前的评论，看起来这种奇怪的行为不仅仅是 iPhone 的行为，我认为这很好。

这是我用手机拍摄的照片（注意正确的方向），它与我拍摄照片时在手机上的显示完全相同：

![在 iPhone 上拍摄的实际照片](../Images/3d43e38088684340ac43646ae0702b18.png)

这是我通过电子邮件将图像发送给自己后在 Gmail 中的样子（看起来 Gmail 处理得当）：

![Gmail 中显示的照片](../Images/6e30e2d472a1ce7ccff5150f8a7fd77a.png)

这是图像在 Windows 中的缩略图（看起来处理不正确）：

![Windows 缩略图](../Images/ed423ecbbe2624bafd95250225a09b94.png)

以下是使用 Windows 照片查看器打开时的实际图像（仍未正确处理）：

![Windows 照片查看器版本](../Images/824c022c1f11c6dfda057f7edefe02e0.png)

在对这个问题发表了所有评论之后，这就是我的想法...... iPhone 拍摄了一张图像，并说“要正确显示它，它需要旋转 90 度”。此信息将在 EXIF 数据中。（为什么它需要旋转 90 度，而不是默认为垂直，我不知道）。从这里开始，Gmail 足够智能，可以读取和分析 EXIF 数据，并正确显示它。然而，Windows 不够聪明，无法读取 EXIF 数据，因此无法**正确**显示图像。我的假设正确吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-15T13:59:07.617

当我从相机获取图像时，我遇到了同样的问题，我输入了以下代码来修复它。[从这里添加了方法 scaleAndRotateImage](https://discussions.apple.com/thread/1537011?start=0&tstart=0)

```
- (void) imagePickerController:(UIImagePickerController *)thePicker didFinishPickingMediaWithInfo:(NSDictionary *)imageInfo {
            // Images from the camera are always in landscape, so rotate
                    UIImage *image = [self scaleAndRotateImage: [imageInfo objectForKey:UIImagePickerControllerOriginalImage]];
    //then save the image to photo gallery or wherever  
        }

- (UIImage *)scaleAndRotateImage:(UIImage *) image {
    int kMaxResolution = 320;

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = bounds.size.width / ratio;
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-05-15T12:58:19.093

我对其进行了研发并发现，每个图像文件都有元数据属性。如果元数据指定图像的方向，除 Mac 之外的其他操作系统通常会忽略该方向。大多数拍摄的图像都将其元数据属性设置为直角。所以 Mac 以 90 度旋转的方式显示它。您可以在 Windows 操作系统中以正确的方式看到相同的图像。

有关更多详细信息，请阅读此答案[http://graphicssoft.about.com/od/digitalphotography/f/sideways-pictures.htm](http://graphicssoft.about.com/od/digitalphotography/f/sideways-pictures.htm)

[尝试在http://www.exifviewer.org/](http://www.exifviewer.org/) 或[http://regex.info/exif.cgi](http://regex.info/exif.cgi)或[http://www.addictivetips.com/internet-tips/view-complete-exif](http://www.addictivetips.com/internet-tips/view-complete-exif-metadata-information-of-any-jpeg-image-online/)阅读您的图片的 exif [-任何 jpeg 图像在线元数据信息/](http://www.addictivetips.com/internet-tips/view-complete-exif-metadata-information-of-any-jpeg-image-online/)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-01-20T01:06:34.993

> 这次我的问题是为什么会这样？苹果为什么要旋转图像？

答案很简单。苹果没有旋转图像。这就是混乱所在。

CCD 相机不旋转，所以它总是在横向模式下拍照。

Apple 做了一件非常聪明的事情——而不是花费所有时间来旋转图像——将兆字节的数据四处移动——只需用照片的拍摄方式标记它。

OpenGL 很容易进行翻译——所以数据永远不会被打乱——只是它是如何绘制的。

因此方向元数据。

如果您想裁剪、调整大小等，这将成为一个问题——但是一旦您知道发生了什么，您只需定义您的矩阵，一切都会解决。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-08-10T21:38:36.123

[快速复制/粘贴 Dilip出色答案](https://stackoverflow.com/a/10602363/3128245)的 Swift 翻译。

```
import Darwin

class func rotateCameraImageToProperOrientation(imageSource : UIImage, maxResolution : CGFloat) -> UIImage {

    let imgRef = imageSource.CGImage;

    let width = CGFloat(CGImageGetWidth(imgRef));
    let height = CGFloat(CGImageGetHeight(imgRef));

    var bounds = CGRectMake(0, 0, width, height)

    var scaleRatio : CGFloat = 1
    if (width > maxResolution || height > maxResolution) {

        scaleRatio = min(maxResolution / bounds.size.width, maxResolution / bounds.size.height)
        bounds.size.height = bounds.size.height * scaleRatio
        bounds.size.width = bounds.size.width * scaleRatio
    }

    var transform = CGAffineTransformIdentity
    let orient = imageSource.imageOrientation
    let imageSize = CGSizeMake(CGFloat(CGImageGetWidth(imgRef)), CGFloat(CGImageGetHeight(imgRef)))

    switch(imageSource.imageOrientation) {
    case .Up :
        transform = CGAffineTransformIdentity

    case .UpMirrored :
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);

    case .Down :
        transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        transform = CGAffineTransformRotate(transform, CGFloat(M_PI));

    case .DownMirrored :
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);

    case .Left :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        transform = CGAffineTransformRotate(transform, 3.0 * CGFloat(M_PI) / 2.0);

    case .LeftMirrored :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        transform = CGAffineTransformRotate(transform, 3.0 * CGFloat(M_PI) / 2.0);

    case .Right :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        transform = CGAffineTransformRotate(transform, CGFloat(M_PI) / 2.0);

    case .RightMirrored :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransformMakeScale(-1.0, 1.0);
        transform = CGAffineTransformRotate(transform, CGFloat(M_PI) / 2.0);

    default : ()
    }

    UIGraphicsBeginImageContext(bounds.size)
    let context = UIGraphicsGetCurrentContext()

    if orient == .Right || orient == .Left {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    } else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);
    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);

    let imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-12-01T13:50:40.633

[Swift 4 版本，对Dilip 的答案](https://stackoverflow.com/a/10602363/4637283)进行了安全检查。

```
public static func rotateCameraImageToProperOrientation(imageSource : UIImage, maxResolution : CGFloat = 320) -> UIImage? {

    guard let imgRef = imageSource.cgImage else {
        return nil
    }

    let width = CGFloat(imgRef.width)
    let height = CGFloat(imgRef.height)

    var bounds = CGRect(x: 0, y: 0, width: width, height: height)

    var scaleRatio : CGFloat = 1
    if (width > maxResolution || height > maxResolution) {

        scaleRatio = min(maxResolution / bounds.size.width, maxResolution / bounds.size.height)
        bounds.size.height = bounds.size.height * scaleRatio
        bounds.size.width = bounds.size.width * scaleRatio
    }

    var transform = CGAffineTransform.identity
    let orient = imageSource.imageOrientation
    let imageSize = CGSize(width: CGFloat(imgRef.width), height: CGFloat(imgRef.height))

    switch(imageSource.imageOrientation) {
    case .up:
        transform = .identity
    case .upMirrored:
        transform = CGAffineTransform
            .init(translationX: imageSize.width, y: 0)
            .scaledBy(x: -1.0, y: 1.0)
    case .down:
        transform = CGAffineTransform
            .init(translationX: imageSize.width, y: imageSize.height)
            .rotated(by: CGFloat.pi)
    case .downMirrored:
        transform = CGAffineTransform
            .init(translationX: 0, y: imageSize.height)
            .scaledBy(x: 1.0, y: -1.0)
    case .left:
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransform
            .init(translationX: 0, y: imageSize.width)
            .rotated(by: 3.0 * CGFloat.pi / 2.0)
    case .leftMirrored:
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransform
            .init(translationX: imageSize.height, y: imageSize.width)
            .scaledBy(x: -1.0, y: 1.0)
            .rotated(by: 3.0 * CGFloat.pi / 2.0)
    case .right :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransform
            .init(translationX: imageSize.height, y: 0)
            .rotated(by: CGFloat.pi / 2.0)
    case .rightMirrored:
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width;
        bounds.size.width = storedHeight;
        transform = CGAffineTransform
            .init(scaleX: -1.0, y: 1.0)
            .rotated(by: CGFloat.pi / 2.0)
    }

    UIGraphicsBeginImageContext(bounds.size)
    if let context = UIGraphicsGetCurrentContext() {
        if orient == .right || orient == .left {
            context.scaleBy(x: -scaleRatio, y: scaleRatio)
            context.translateBy(x: -height, y: 0)
        } else {
            context.scaleBy(x: scaleRatio, y: -scaleRatio)
            context.translateBy(x: 0, y: -height)
        }

        context.concatenate(transform)
        context.draw(imgRef, in: CGRect(x: 0, y: 0, width: width, height: height))
    }

    let imageCopy = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return imageCopy
} 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2012-12-13T13:43:22.803

iPhone/iPad 生成的任何图像都保存为横向左侧，带有指定实际方向的 EXIF 方向标记 (Exif.Image.Orientation)。

它具有以下值： 1：横向左侧 6：纵向正常 3：横向右侧 4：纵向颠倒

在 IOS 中，EXIF 信息被正确读取，图像以与拍摄时相同的方式显示。但在 Windows 中，不使用 EXIF 信息。

如果您在 GIMP 中打开这些图像之一，它会说该图像具有旋转信息。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-02-11T00:38:51.993

对于使用 Xamarin 的其他人，这里是 Dilip 的[出色答案](https://stackoverflow.com/a/10602363/5911000)的 C# 翻译，并感谢 thattyson 的[Swift 翻译](https://stackoverflow.com/a/31929631/5911000)。

```
public static UIImage RotateCameraImageToProperOrientation(UIImage imageSource, nfloat maxResolution) {

    var imgRef = imageSource.CGImage;

    var width = (nfloat)imgRef.Width;
    var height = (nfloat)imgRef.Height;

    var bounds = new CGRect(0, 0, width, height);

    nfloat scaleRatio = 1;

    if (width > maxResolution || height > maxResolution) 
    {
        scaleRatio = (nfloat)Math.Min(maxResolution / bounds.Width, maxResolution / bounds.Height);
        bounds.Height = bounds.Height * scaleRatio;
        bounds.Width = bounds.Width * scaleRatio;
    }

    var transform = CGAffineTransform.MakeIdentity();
    var orient = imageSource.Orientation;
    var imageSize = new CGSize(imgRef.Width, imgRef.Height);
    nfloat storedHeight;

    switch(imageSource.Orientation) {
        case UIImageOrientation.Up:
            transform = CGAffineTransform.MakeIdentity();
            break;

        case UIImageOrientation.UpMirrored :
            transform = CGAffineTransform.MakeTranslation(imageSize.Width, 0.0f);
            transform = CGAffineTransform.Scale(transform, -1.0f, 1.0f);
            break;

        case UIImageOrientation.Down :
            transform = CGAffineTransform.MakeTranslation(imageSize.Width, imageSize.Height);
            transform = CGAffineTransform.Rotate(transform, (nfloat)Math.PI);
            break;

        case UIImageOrientation.DownMirrored :
            transform = CGAffineTransform.MakeTranslation(0.0f, imageSize.Height);
            transform = CGAffineTransform.Scale(transform, 1.0f, -1.0f);
            break;

        case UIImageOrientation.Left:
            storedHeight = bounds.Height;
            bounds.Height = bounds.Width;
            bounds.Width = storedHeight;
            transform = CGAffineTransform.MakeTranslation(0.0f, imageSize.Width);
            transform = CGAffineTransform.Rotate(transform, 3.0f * (nfloat)Math.PI / 2.0f);
            break;

        case UIImageOrientation.LeftMirrored :
            storedHeight = bounds.Height;
            bounds.Height = bounds.Width;
            bounds.Width = storedHeight;
            transform = CGAffineTransform.MakeTranslation(imageSize.Height, imageSize.Width);
            transform = CGAffineTransform.Scale(transform, -1.0f, 1.0f);
            transform = CGAffineTransform.Rotate(transform, 3.0f * (nfloat)Math.PI / 2.0f);
            break;

        case UIImageOrientation.Right :
            storedHeight = bounds.Height;
            bounds.Height = bounds.Width;
            bounds.Width = storedHeight;
            transform = CGAffineTransform.MakeTranslation(imageSize.Height, 0.0f);
            transform = CGAffineTransform.Rotate(transform, (nfloat)Math.PI / 2.0f);
            break;

        case UIImageOrientation.RightMirrored :
            storedHeight = bounds.Height;
            bounds.Height = bounds.Width;
            bounds.Width = storedHeight;
            transform = CGAffineTransform.MakeScale(-1.0f, 1.0f);
            transform = CGAffineTransform.Rotate(transform, (nfloat)Math.PI / 2.0f);
            break;

        default :
            break;
    }

    UIGraphics.BeginImageContext(bounds.Size);
    var context = UIGraphics.GetCurrentContext();

    if (orient == UIImageOrientation.Right || orient == UIImageOrientation.Left) {
        context.ScaleCTM(-scaleRatio, scaleRatio);
        context.TranslateCTM(-height, 0);
    } else {
        context.ScaleCTM(scaleRatio, -scaleRatio);
        context.TranslateCTM(0, -height);
    }

    context.ConcatCTM(transform);
    context.DrawImage(new CGRect(0, 0, width, height), imgRef);

    var imageCopy = UIGraphics.GetImageFromCurrentImageContext();
    UIGraphics.EndImageContext();

    return imageCopy;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-04T07:46:09.910

我遇到了这个问题，因为我遇到了类似的问题，但使用的是 Swift。只是想链接到对任何其他 Swift 开发人员都适用的答案：[https ://stackoverflow.com/a/26676578/3904581](https://stackoverflow.com/a/26676578/3904581)

这是一个有效解决问题的 Swift 代码片段：

```
let orientedImage = UIImage(CGImage: initialImage.CGImage, scale: 1, orientation: initialImage.imageOrientation)! 
```

超级简单。一行代码。问题解决了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-08T10:29:21.463

我很清楚你的问题是什么。您正在使用 UIImagePicker，这在各个方面都很奇怪。我建议您将 AVFoundation 用于相机，它可以提供方向和质量的灵活性。使用 AVCaptureSession。您可以在此处获取代码[如何将使用 AVFoundation 拍摄的照片保存到相册？](https://stackoverflow.com/questions/13106486/how-to-save-photos-taken-using-avfoundation-to-photo-album)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-01T09:54:43.777

为 Swift 3 快速重构（有人可以测试它并确认一切正常吗？）：

```
static func rotateCameraImageToProperOrientation(imageSource : UIImage, maxResolution : CGFloat) -> UIImage {
    let imgRef = imageSource.cgImage

    let width = CGFloat(imgRef!.width)
    let height = CGFloat(imgRef!.height)

    var bounds = CGRect(x: 0, y: 0, width: width, height: height)

    var scaleRatio : CGFloat = 1
    if width > maxResolution || height > maxResolution {

        scaleRatio = min(maxResolution / bounds.size.width, maxResolution / bounds.size.height)
        bounds.size.height = bounds.size.height * scaleRatio
        bounds.size.width = bounds.size.width * scaleRatio
    }

    var transform = CGAffineTransform.identity
    let orient = imageSource.imageOrientation
    let imageSize = CGSize(width: imgRef!.width, height: imgRef!.height)

    switch imageSource.imageOrientation {
    case .up :
        transform = CGAffineTransform.identity

    case .upMirrored :
        transform = CGAffineTransform(translationX: imageSize.width, y: 0)
        transform = transform.scaledBy(x: -1, y: 1)

    case .down :
        transform = CGAffineTransform(translationX: imageSize.width, y: imageSize.height)
        transform = transform.rotated(by: CGFloat.pi)

    case .downMirrored :
        transform = CGAffineTransform(translationX: 0, y: imageSize.height)
        transform = transform.scaledBy(x: 1, y: -1)

    case .left :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width
        bounds.size.width = storedHeight
        transform = CGAffineTransform(translationX: 0, y: imageSize.width)
        transform = transform.rotated(by: 3.0 * CGFloat.pi / 2.0)

    case .leftMirrored :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width
        bounds.size.width = storedHeight
        transform = CGAffineTransform(translationX: imageSize.height, y: imageSize.width)
        transform = transform.scaledBy(x: -1, y: 1)
        transform = transform.rotated(by: 3.0 * CGFloat.pi / 2.0)

    case .right :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width
        bounds.size.width = storedHeight
        transform = CGAffineTransform(translationX: imageSize.height, y: 0)
        transform = transform.rotated(by: CGFloat.pi / 2.0)

    case .rightMirrored :
        let storedHeight = bounds.size.height
        bounds.size.height = bounds.size.width
        bounds.size.width = storedHeight
        transform = CGAffineTransform(scaleX: -1, y: 1)
        transform = transform.rotated(by: CGFloat.pi / 2.0)

    }

    UIGraphicsBeginImageContext(bounds.size)
    let context = UIGraphicsGetCurrentContext()

    if orient == .right || orient == .left {

        context!.scaleBy(x: -scaleRatio, y: scaleRatio)
        context!.translateBy(x: -height, y: 0)
    } else {
        context!.scaleBy(x: scaleRatio, y: -scaleRatio)
        context!.translateBy(x: 0, y: -height)
    }

    context!.concatenate(transform)
    context!.draw(imgRef!, in: CGRect(x: 0, y: 0, width: width, height: height))

    let imageCopy = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return imageCopy!
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-15T12:50:59.993

这是 Dilip 很棒的答案的 Swift3 版本

```
func rotateCameraImageToProperOrientation(imageSource : UIImage, maxResolution : CGFloat) -> UIImage {
    let imgRef = imageSource.cgImage!;

    let width = CGFloat(imgRef.width);
    let height = CGFloat(imgRef.height);

    var bounds = CGRect(x: 0, y: 0, width: width, height: height)

    var scaleRatio : CGFloat = 1
    if (width > maxResolution || height > maxResolution) {
        scaleRatio = min(maxResolution / bounds.size.width, maxResolution / bounds.size.height)
        bounds.size.height = bounds.size.height * scaleRatio
        bounds.size.width = bounds.size.width * scaleRatio
    }

    var transform = CGAffineTransform.identity
    let orient = imageSource.imageOrientation
    let imageSize = CGSize(width: width, height: height)

    switch(imageSource.imageOrientation) {
        case .up :
            transform = CGAffineTransform.identity

        case .upMirrored :
            transform = CGAffineTransform(translationX: imageSize.width, y: 0.0);
            transform = transform.scaledBy(x: -1, y: 1);

        case .down :
            transform = CGAffineTransform(translationX: imageSize.width, y: imageSize.height);
            transform = transform.rotated(by: CGFloat(Double.pi));

        case .downMirrored :
            transform = CGAffineTransform(translationX: 0.0, y: imageSize.height);
            transform = transform.scaledBy(x: 1, y: -1);

        case .left :
            let storedHeight = bounds.size.height
            bounds.size.height = bounds.size.width;
            bounds.size.width = storedHeight;
            transform = CGAffineTransform(translationX: 0.0, y: imageSize.width);
            transform = transform.rotated(by: 3.0 * CGFloat(Double.pi) / 2.0);

        case .leftMirrored :
            let storedHeight = bounds.size.height
            bounds.size.height = bounds.size.width;
            bounds.size.width = storedHeight;
            transform = CGAffineTransform(translationX: imageSize.height, y: imageSize.width);
            transform = transform.scaledBy(x: -1, y: 1);
            transform = transform.rotated(by: 3.0 * CGFloat(Double.pi) / 2.0);

        case .right :
            let storedHeight = bounds.size.height
            bounds.size.height = bounds.size.width;
            bounds.size.width = storedHeight;
            transform = CGAffineTransform(translationX: imageSize.height, y: 0.0);
            transform = transform.rotated(by: CGFloat(Double.pi) / 2.0);

        case .rightMirrored :
            let storedHeight = bounds.size.height
            bounds.size.height = bounds.size.width;
            bounds.size.width = storedHeight;
            transform = CGAffineTransform(scaleX: -1.0, y: 1.0);
            transform = transform.rotated(by: CGFloat(Double.pi) / 2.0);
    }

    UIGraphicsBeginImageContext(bounds.size)
    let context = UIGraphicsGetCurrentContext()!

    if orient == .right || orient == .left {
        context.scaleBy(x: -scaleRatio, y: scaleRatio);
        context.translateBy(x: -height, y: 0);
    } else {
        context.scaleBy(x: scaleRatio, y: -scaleRatio);
        context.translateBy(x: 0, y: -height);
    }

    context.concatenate(transform);
    context.draw(imgRef, in: CGRect(x: 0, y: 0, width: width, height: height))

    let imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy!;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-22T19:21:34.650

您可以通过此代码修复此 HECI 旋转图像

**Swift 5 扩展：**

```
extension UIImage {
    /// Fix image orientaton to protrait up
    func fixedOrientation() -> UIImage? {
        guard imageOrientation != UIImage.Orientation.up else {
            // This is default orientation, don't need to do anything
            return self.copy() as? UIImage
        }

        guard let cgImage = self.cgImage else {
            // CGImage is not available
            return nil
        }

        guard let colorSpace = cgImage.colorSpace, let ctx = CGContext(data: nil, width: Int(size.width), height: Int(size.height), bitsPerComponent: cgImage.bitsPerComponent, bytesPerRow: 0, space: colorSpace, bitmapInfo: CGImageAlphaInfo.premultipliedLast.rawValue) else {
            return nil // Not able to create CGContext
        }

        var transform: CGAffineTransform = CGAffineTransform.identity

        switch imageOrientation {
        case .down, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: size.height)
            transform = transform.rotated(by: CGFloat.pi)
        case .left, .leftMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.rotated(by: CGFloat.pi / 2.0)
        case .right, .rightMirrored:
            transform = transform.translatedBy(x: 0, y: size.height)
            transform = transform.rotated(by: CGFloat.pi / -2.0)
        case .up, .upMirrored:
            break
        @unknown default:
            fatalError("Missing...")
            break
        }

        // Flip image one more time if needed to, this is to prevent flipped image
        switch imageOrientation {
        case .upMirrored, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.scaledBy(x: -1, y: 1)
        case .leftMirrored, .rightMirrored:
            transform = transform.translatedBy(x: size.height, y: 0)
            transform = transform.scaledBy(x: -1, y: 1)
        case .up, .down, .left, .right:
            break
        @unknown default:
            fatalError("Missing...")
            break
        }

        ctx.concatenate(transform)

        switch imageOrientation {
        case .left, .leftMirrored, .right, .rightMirrored:
            ctx.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.height, height: size.width))
        default:
            ctx.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.width, height: size.height))
            break
        }

        guard let newCGImage = ctx.makeImage() else { return nil }
        return UIImage.init(cgImage: newCGImage, scale: 1, orientation: .up)
    }
} 
```

**目标 C 代码：**

```
-(UIImage *)scaleAndRotateImage:(UIImage *)image{
        // No-op if the orientation is already correct
        if (image.imageOrientation == UIImageOrientationUp) return image;

        // We need to calculate the proper transformation to make the image upright.
        // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
        CGAffineTransform transform = CGAffineTransformIdentity;

        switch (image.imageOrientation) {
            case UIImageOrientationDown:
            case UIImageOrientationDownMirrored:
                transform = CGAffineTransformTranslate(transform, image.size.width, image.size.height);
                transform = CGAffineTransformRotate(transform, M_PI);
                break;

            case UIImageOrientationLeft:
            case UIImageOrientationLeftMirrored:
                transform = CGAffineTransformTranslate(transform, image.size.width, 0);
                transform = CGAffineTransformRotate(transform, M_PI_2);
                break;

            case UIImageOrientationRight:
            case UIImageOrientationRightMirrored:
                transform = CGAffineTransformTranslate(transform, 0, image.size.height);
                transform = CGAffineTransformRotate(transform, -M_PI_2);
                break;
            case UIImageOrientationUp:
            case UIImageOrientationUpMirrored:
                break;
        }

        switch (image.imageOrientation) {
            case UIImageOrientationUpMirrored:
            case UIImageOrientationDownMirrored:
                transform = CGAffineTransformTranslate(transform, image.size.width, 0);
                transform = CGAffineTransformScale(transform, -1, 1);
                break;

            case UIImageOrientationLeftMirrored:
            case UIImageOrientationRightMirrored:
                transform = CGAffineTransformTranslate(transform, image.size.height, 0);
                transform = CGAffineTransformScale(transform, -1, 1);
                break;
            case UIImageOrientationUp:
            case UIImageOrientationDown:
            case UIImageOrientationLeft:
            case UIImageOrientationRight:
                break;
        }

        // Now we draw the underlying CGImage into a new context, applying the transform
        // calculated above.
        CGContextRef ctx = CGBitmapContextCreate(NULL, image.size.width, image.size.height,
                                                 CGImageGetBitsPerComponent(image.CGImage), 0,
                                                 CGImageGetColorSpace(image.CGImage),
                                                 CGImageGetBitmapInfo(image.CGImage));
        CGContextConcatCTM(ctx, transform);
        switch (image.imageOrientation) {
            case UIImageOrientationLeft:
            case UIImageOrientationLeftMirrored:
            case UIImageOrientationRight:
            case UIImageOrientationRightMirrored:
                // Grr...
                CGContextDrawImage(ctx, CGRectMake(0,0,image.size.height,image.size.width), image.CGImage);
                break;

            default:
                CGContextDrawImage(ctx, CGRectMake(0,0,image.size.width,image.size.height), image.CGImage);
                break;
        }

        // And now we just create a new UIImage from the drawing context
        CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
        UIImage *img = [UIImage imageWithCGImage:cgimg];
        CGContextRelease(ctx);
        CGImageRelease(cgimg);
        return img;
} 
```

**代码的使用**

```
 UIImage *img=[info objectForKey:UIImagePickerControllerOriginalImage];

 img=[self scaleAndRotateImage:img];
 NSData *image = UIImageJPEGRepresentation(img, 0.1); 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2016-01-20T16:55:36.977

尝试将图像格式更改为 .jpeg。这对我有用

# c# - 在 NHibernate 中动态引用属性？

> ID：10600618
> 
> 赞同：3
> 
> 时间：2012-05-15T12:26:16.273
> 
> 标签：c#, nhibernate, reflection

我目前正在研究 nHibernate，并且对动态访问持久对象中的属性有疑问。

我有以下课程`Domain`：

```
public class Locations {
    public virtual string CountryCode;
    public virtual string CountryName;
} 
```

现在，假设我有一个 Locations 对象的引用，我有什么办法可以做这样的事情吗？

```
Locations myCountry = new LocationsRepository().GetByCountryCode("US");
myCountry.Set("CountryName", "U.S.A."); 
```

而不是必须这样做：

```
myCountry.CountryName = "U.S.A." 
```

没有反思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:34:10.603

如果您避免反射的目标是提高性能，那么一个简单的解决方案是使用以下所有属性对功能进行硬编码：

```
public class Locations {
    public virtual string CountryCode;
    public virtual string CountryName;

    public void Set(string propertyName, string value) {
        if (propertyName == "CountryCode") this.CountryCode = value;
        else if (propertyName == "CountryName") this.CountryName = value;
        else throw new ArgumentException("Unrecognized property '" + propertyName + "'");
    }
} 
```

[**通过使用T4 模板**](http://www.hanselman.com/blog/T4TextTemplateTransformationToolkitCodeGenerationBestKeptVisualStudioSecret.aspx)`Set`以编程方式为所有域类生成方法，您可以轻松地使这种方法变得可行。事实上，我们在自己的代码库中做了类似的事情，使用 T4 模板生成适配器和序列化程序，以避免在运行时反射成本，同时在编译时获得反射代码生成的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:46:33.533

我知道你说“没有反射”，但反射并不全是坏的（当然不像人们想象的那么慢），所以值得一提的是这里的反射解决方案：

```
using System.Reflection;

typeof(Locations).GetProperty("CountryName").SetValue(myCountry, "U.S.A.", null); 
```

*噗*，完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:04:31.910

您正在寻找的东西既像具有属性的普通对象，又像字典一样。如果您使用的是 .NET4，您可能会看看[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)就是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T22:02:54.663

我讨厌在 StackOverflow 上回答我自己的问题，我感谢每个人的回答，但他们都没有真正为我这样做。经过一番研究，我发现最新版本的 NHibernate 提供了[动态模型](http://nhforge.org/doc/nh/en/index.html#persistent-classes-dynamicmodels)。

虽然很方便，但它们的实验性质让我对在生产中使用它们有点怀疑，所以我做了更多的研究。我发现 SE 自己的 Marc Gravell 继承了他的 HyperDescriptor 库，称为[Fastmember](http://marcgravell.blogspot.com/2012/01/playing-with-your-member.html)。它利用了 DLR 提供的速度增益，并将其与更简单的反射语法结合在一起。我在我的基实体类中将 FastMember 访问实现为简单的 GetValue 和 SetValue 方法，并且我在做生意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T12:33:39.640

没有反思，这可能是一个想法：

```
public class Locations 
{
  private Dictionary<string, object> _values;
  public Locations() 
  {
    _values = new Dictionary<string, object>();
  }
  public void Set(string propertyName, object value)
  {
     if(!_values.ContainsKey(propertyName))
        _values.Add(propertyName, value);
     else
        _values[propertyName] = value;
  }
  public object Get(string propertyName)
  {
     return _values.ContainsKey(propertyName) ? _values[propertyName] : null;
  }

  public string CountryCode
  {
     get{ return Get("CountryCode"); }
     set{ Set("CountryCode", value); }
  }
} 
```

通过这种方式，您无需反射即可访问属性并使用单一方法更改它们。我没有测试过这段代码，但我希望这就是你所说的“不能直接访问该属性”的意思。

# objective-c - CFReadStreamRef 与 NSInputStream *

> ID：10600638
> 
> 赞同：1
> 
> 时间：2012-05-15T12:27:06.333
> 
> 标签：objective-c, ios, stream, nsstream, cfstream

`NSInputStream *`和之间的区别`CFReadStreamRef`似乎是第一个是客观的 C 对象，而第二个是本机结构。然而，它们是免费桥接的。

我想实现一个基于网络流的程序。

*   [[NSStream getStreamsToHost:port:inputStream:outputStream:]](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)产生`NSInputStream *`和`NSOutputStream *`. 但是，在 iOS 上，此方法不可用。

    因此，必须在 iOS 上使用[CFStreamCreatePairWithSocketToHost 。](https://developer.apple.com/library/ios/#documentation/CoreFoundation/Reference/CFStreamConstants/Reference/reference.html)

    ```
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(
                     kCFAllocatorDefault, host, port, &readStream, &writeStream);
    NSInputStream *read = (__bridge NSInputStream *)readStream;
    NSOutputStream *write = (__bridge NSOutputStream *)writeStream; 
    ```

*   设置流属性时，使用时并非所有属性都可用`NSInputStream *`。特别是`kCFStreamPropertyShouldCloseNativeSocket`确保在关闭相应的流时也关闭套接字会很有趣。

    我是否必须将 转换`NSInputStream *`为 a`CFReadStreamRef`才能设置此属性，然后还原转换以设置此类属性？

*   ...

`NSInputStream *`似乎有多个缺点。它的唯一优势真的是我可以提供它自己的子类，而在这种情况下我不能这样做`CFReadStreamRef`吗？什么时候应该使用哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:41:05.943

一般来说，大多数 Foundation/CoreFoundation 免费桥接类在行为方面也相似。但你是对的，这不是 和 的`NSInputStream *`情况`CFReadStreamRef`。Apple 的[设置套接字流](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Streams/Articles/NetworkStreams.html)指南仅解释了您所描述的内容。即使使用最新的初始化程序（如10.6 中可用的），它在远程`inputStreamWithURL:`时仍然不起作用（例如。 ）。`url``http://...`

我认为继续使用的主要优势`NSInputStream`是在 Objective-C 应用程序中的更好集成。您可以随时尝试更改`NSInputStream *`对象的属性（*读取*），如下所示：

```
if (!CFReadStreamSetProperty((CFReadStreamRef)read,
                              kCFStreamPropertyShouldCloseNativeSocket,
                              kCFBooleanTrue))
     failure("property change not accepted"); 
```

作为所有这些的替代方案，我建议查看[URL 加载系统编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)`NSURLRequest`中描述的和`NSURLConnection`对象。

# memory - Joomla 和“致命错误：允许的内存大小为 134217728 字节已用尽（试图分配 78 字节）”

> ID：10600640
> 
> 赞同：1
> 
> 时间：2012-05-15T12:27:12.787
> 
> 标签：memory, joomla

我在 Joomla 上有站点，它是从另一台服务器安装的：我复制了所有文件，将它们转移到 var/www 并发现。在此之后，我将 MySQL-dump 从另一台服务器添加到新的 MySQL 数据库。没关系 - 我可以进入管理面板，甚至可以看到我需要的材料。

但是当我尝试查看该站点时 - 我发现了 500 错误，这对我来说是一种误解。然后我加了

```
ini_set('display_errors','On'); 
error_reporting(E_ALL); 
```

到 index.php 以检查我的网站发生了什么，并感到震惊： **致命错误：在线 /var/www/libraries/joomla/filter/filterinput.php 中允许的内存大小为 134217728 字节用尽（试图分配 78 字节） 530**

这很奇怪，因为我的 VPS 的 RAM 绰绰有余。在 index.php 的开头我有代码：

```
<?php ini_set("memory_limit", "128M"); ?> 
```

有人知道如何解决这样的麻烦吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T22:44:29.553

错误消息是说它正在尝试分配比允许多 78 字节的内存，允许的数量是**1342217728 字节**，即**128M**。

所以你已经用尽了允许的内存——因此你需要增加允许的分配。

# android - 手机休眠时播放声音

> ID：10600642
> 
> 赞同：1
> 
> 时间：2012-05-15T12:27:13.463
> 
> 标签：android, audio, sleep, audio-player

我正在编写一项以随机间隔提醒用户的服务。该服务由 Activity 启动，并作为服务在后台运行。

我面临的挑战是，当用户将手机置于睡眠状态（黑屏）时，在某些情况下根本不会播放声音。时间已用完，但声音既不会按时播放，也不会在用户唤醒手机时播放。

这是一些代码：

```
/**
 * Starts a new thread which is checking every seconds how much time has
 * elapsed and if the point of time has come to play the sound.
 * Once the time has come, it gets the next ring time and continues
 * until it is shut down by the user
 */
private void runCheck() {
    Log.i(tag, "starting runCheck");

    Thread thread = new Thread() {
        public void run() {

            Log.i(tag, "starting LogoTimerThread");
            while (vRunningFlag) {

                try {

                    // update the notification
                    makeNotification();

                    Log.v(tag,
                            "Next Ring in : ["
                                    + helper.TimeCalculator
                                            .duration2_hh_MM_SS((vTimerNextRing - System
                                                    .currentTimeMillis()) / 1000)
                                    + " sec.]");

                    // check if time has run out
                    if (vTimerNextRing < System.currentTimeMillis()) {
                        // reset the timer
                        setNextRingTime();
                        // update the screen
                        makeNotification();
                        // play the sound
                        playLTimerSound();
                    }

                    sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
            Log.i(tag, "finished LogoTimerThread");
        }
    };

    thread.start();
} 
```

整个服务作为设置为前台的远程服务运行，因此通知提醒用户该服务，他可以通过这种方式停止它。

一旦我注释掉`playLTimerSound()`，计时器就会倒计时。不知何故，线程通过播放声音而停止。

这也是该功能：

```
public void playLTimerSound() {
    Log.i(tag, "playLogoTimerSound - volume:" + vVolume);
    MediaPlayer mp = MediaPlayer.create(this, R.raw.enterprise);
    mp.setVolume(2.0f, 2.0f);
    mp.start();
    mp.setOnCompletionListener(new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            mp.release();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:35:59.950

在您的场景中无法获取 SCREEN_DIM_WAKE_LOCK 吗？

```
@Override
 protected void onCreate(Bundle icicle) {
     super.onCreate(icicle);

PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "App");
wl.acquire();

} 
```

# ruby - 使用 Ruby 处理 PST

> ID：10600647
> 
> 赞同：3
> 
> 时间：2012-05-15T12:27:45.347
> 
> 标签：ruby, email, eml, pst, msg

我正在编写一些代码来提取有关 PST 文件内容的信息，例如消息总数、子文件夹列表、每个文件夹的消息数、电子邮件主题名称和每条消息的发送/接收日期。

这是一项正在进行的工作，我必须在进行过程中熟悉 Ruby/Outlook/MAPI。

我正在使用以下代码片段在 Windows 中工作，以了解如何访问 PST 内容：

```
#Create outlook instance
outlook = WIN32OLE.new('Outlook.Application')
#Create mapi control
mapi = outlook.GetNameSpace('MAPI')
outlook.Session.AddStore('C:/test.pst')
#pst = mapi.Folders.Item('Personal Folders')
#puts pst.Items.count
#mapi.RemoveStore(pst) 
```

虽然我可以通过文件名添加 pst 文件，但为了删除它，我需要知道在 Outlook 中分配给文件的名称是什么。如果我在 Outlook 中手动操作，这很好，但我希望它能够自主运行。

有没有一种方法可以在加载后提取 pst“名称”并将其分配给变量以解决此问题，或者是否有另一种方法可以卸载我不知道的 pst 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:41:44.177

尝试使用数组方法

```
outlook.Session.AddStore('C:/test.pst')
mapi.RemoveStore(mapi.Folders.Item.last) 
```

另一个选项是在添加之前遍历 mapi.Folders。然后遍历 after 并找到映射的新“Item”名称，然后将其删除。

# java - 这个骑士的巡回算法怎么解决？

> ID：10600649
> 
> 赞同：2
> 
> 时间：2012-05-15T12:27:50.947
> 
> 标签：java, algorithm, knights-tour

在 8X8 棋盘中，只考虑马，如果我们从棋盘的任何一个方格开始马，目标是覆盖最大的方格数，而不重复任何一个方格。到目前为止，我发现下面的代码最有效的解决方案是：

```
60    29    34    49    0    15    46    0

35    50    1    16    45    48    11    0

30    59    28    33    2    9    14    47

51    36    31    44    17    12    3    10

58    43    52    27    32    25    8    13

37    40    55    18    23    6    21    4

42    57    38    53    26    19    24    7

39    54    41    56    0    22    5    20 
```

其中以 1 开头的数字表示骑士所遵循的路径。我的问题是这个代码是否可以被纠正为一个完美的答案，即 64（我的只有 60）？

```
package game;
import java.io.BufferedReader;  
import java.io.IOException;
import java.io.InputStreamReader;

public class Knight {
static int board[][]=new int[8][8];
static int value=1;
public static void zero()
{
    for(int i=0;i<7;i++)
        for(int j=0;j<7;j++)
            board[i][j]=0;
}

public static void knightpos(int x,int y)throws IOException
{
    if(value==61)
    {   System.out.println();
    for(int i=0;i<8;i++)
    {
        System.out.println();
        System.out.println();
        for(int j=0;j<8;j++)
        System.out.print("    "+board[i][j]);
    }

        System.exit(0);
    }

    if(x+1<=7&&y+2<=7)
    {
        if(board[x+1][y+2]==0)
        {  board[x+1][y+2]=value++;
           knightpos(x+1,y+2);
        }
    }

    if(x+2<=7&&y+1<=7)
    {
         if(board[x+2][y+1]==0)
        {
           board[x+2][y+1]=value++;
           knightpos(x+2,y+1);
        }
    }

    if(x-2>=0&&y-1>=0)
    {
        if(board[x-2][y-1]==0)
        {board[x-2][y-1]=value++;
           knightpos(x-2,y-1);
        }
    }

    if(x+2<=7&&y-1>=0)
    {
          if(board[x+2][y-1]==0)
        {board[x+2][y-1]=value++;
           knightpos(x+2,y-1);
        }
    }

    if(x+1<=7&&y-2>=0)
    {
        if(board[x+1][y-2]==0)
        {board[x+1][y-2]=value++;
           knightpos(x+1,y-2);}
    }

    if(x-1>=0&&y-2>=0)
    {
          if(board[x-1][y-2]==0)
        {board[x-1][y-2]=value++;
           knightpos(x-1,y-2);}
    }

    if(x-2>=0&&y+1<=7)
    {
          if(board[x-2][y+1]==0)
        {board[x-2][y+1]=value++;
           knightpos(x-2,y+1);}
    }

    if(x-1>=0&&y+2<=7)
    {
          if(board[x-1][y+2]==0)
        {board[x-1][y+2]=value++;
           knightpos(x-1,y+2);}
    }
    board[x][y]=0;
    value--;
    return;
}

public static boolean chk() {

    for(int i=0;i<7;i++)
        for(int j=0;j<7;j++)
            if(board[i][j]==0)
                return false;

    return true;

}

public static void main(String args[])throws IOException
{
    InputStreamReader ir = new InputStreamReader(System.in);
    BufferedReader br = new BufferedReader(ir);
    System.out.println("Knight chess game input x,y position ");
    int x=Integer.parseInt(br.readLine());
    int y=Integer.parseInt(br.readLine());
{
    if(!chk())
            {   
                zero();
                value=1;
                knightpos(x,y);
            }

}           
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:57:43.493

```
60    29    34    49    0    15    46    0

35    50    1    16    45    48    11    0

30    59    28    33    2    9    14    47

51    36    31    44    17    12    3    10

58    43    52    27    32    25    8    13

37    40    55    18    23    6    21    4

42    57    38    53    26    19    24    7

39    54    41    56    0    22    5    20 
```

如果您查看您的解决方案，您可以分支到零的第一步是步骤 3。作为附加信息，我们看到，您可以再次从 60 跳到 1，建立一个循环（但您不能，因为你不能两次访问一个地方。

但是如果你从 4 开始，你可以移动到 60，从那里移动到 1、2、3，现在你可以访问零字段之一。

但是，这只是 1 个字段的改进。由于其他未访问的字段不能按顺序访问，因此无法以相同的方式进一步改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:03:54.897

一个非常适合骑士旅行（甚至在纸上）的旧启发式总是跳到最受限制的方格，这是骑士移动最少的地方。

如果有多个具有相同限制的方格，则随机选择其中一个。

已经证明，理论上你可以通过这条规则进入死胡同，但通常（我认为超过 99%）它可以完成 64 次巡回赛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T10:10:37.103

您创建一个方法，该方法返回骑士所在的给定当前单元格的可能单元格列表，然后按照每个单元格作为候选者的元素数量对它们进行排序，在`ascending order`.
递归调用将首先尝试具有 a`lower number`个候选者的那些单元格，并更快地找到解决方案。但是，对于全套解决方案，您仍然需要探索整个搜索区域。

# java - GWT 应用程序中正在运行的客户端数量？

> ID：10600652
> 
> 赞同：2
> 
> 时间：2012-05-15T12:28:05.503
> 
> 标签：java, gwt

我有一个 GWT 客户端-服务器应用程序，我想在客户端浏览器标题中显示正在运行的客户端数量。我知道如何跟踪连接客户端的数量，但如何跟踪关闭的连接数量？

```
public class MyServiceImpl extends RemoteServiceServelt implements MyService
{
 [...]
 static int runningClients=0;
 @Override public Integer runningClients() {return ++runningClients;}
 // TODO: track closed connections
} 
```

编辑：按照建议，我实现了一个 HTTPSessionListener。不幸的是，它总是为 hits 和 connectedClients 返回 0。

```
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class ActiveClientsListener implements HttpSessionListener
{   
    private static long hits = 0;
    private static long numberOfConnectedClients = 0;

    public static long hits() {return hits;}
    public static long numberOfConnectedClients() {return numberOfConnectedClients;}

    @Override public synchronized void sessionCreated(HttpSessionEvent arg0)
    {
        hits++;
        numberOfConnectedClients++;
    }

    @Override public synchronized void sessionDestroyed(HttpSessionEvent arg0)
    {
        numberOfConnectedClients--;
    }
} 
```

**web.xml**

```
...
<listener>
 <listener-class>org.mypackage.server.ActiveClientsListener</listener-class>
</listener>
... 
```

PS：我的实现是线程安全的还是我必须制作字段`volatile`或以不同的方式同步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:13:26.343

假设每个连接的客户端都打开一个会话，我想我会为此目的使用[HttpSessionListener 。](http://docs.oracle.com/javaee/6/api/index.html?javax/servlet/http/HttpSessionListener.html)

创建会话时，您增加一个计数器，每当它被销毁时，减少它。确保同步对变量的访问。

当然，只要会话超时，计数器就会减少，这可能“为时已晚”。但是，您可以通过在用户离开您的应用程序时（使用[addWindowClosingHandler](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/Window.html#addWindowClosingHandler%28com.google.gwt.user.client.Window.ClosingHandler%29) ）显式销毁会话（[session.invalidate()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#invalidate%28%29) ）来改善这一点。

# android - OAuth 令牌无效：错误 2500

> ID：10600657
> 
> 赞同：1
> 
> 时间：2012-05-15T12:28:23.587
> 
> 标签：android, facebook

我在使用 Facebook OAuth 方法时经常遇到问题。尽管尝试了我自己的实现，但一切都应该是合规的，并且对话框工作正常，但是当我尝试执行请求时，我不断收到错误 2500。我在 oncreate 中调用的登录代码如下：

```
mPrefs = m_kActivity.getPreferences(m_kActivity.MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        m_kFacebookClient.setAccessToken(access_token);
    }
    if(expires != 0) {
        m_kFacebookClient.setAccessExpires(expires);
    }

    /*
     * Only call authorize if the access_token has expired.
     */
    if(!m_kFacebookClient.isSessionValid()) {

    m_kFacebookClient.authorize(m_kActivity, new String[] {
            "publish_stream", "read_stream" },
            new Facebook.DialogListener() { // OVERLOADS }
    } 
```

我的发布方法，也在 onCreate 中完成，是

```
byte[] data = null;
    String dataPath = "/mnt/sdcard/DCIM/100MEDIA/VIDEO0001.3gp";
    String dataMsg = "TestStuff";
    String dataName = "VIDEO0001.3gp";

    Bundle param;
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(m_kFacebookClient);
    InputStream is = null;
        is = new FileInputStream(dataPath);
        data = readBytes(is);
        param = new Bundle();
        param.putString("message", dataMsg);
        param.putByteArray("video", data);
        param.putString("filename", dataName);
        mAsyncRunner.request("me", param, "POST",
                new AsyncFacebookRunner.RequestListener() { // OVERLOAD } 
```

我尝试获取令牌信息，它是正确的：

```
05-15 14:53:17.149: D/myapp(7964): access token = AAACmjJqKCmMBAFRMjn49t7DvXEPlRyKnbdghdthdth31654651oGGJnBpSxEiLb5R3ZAxEEoI0x4JAfCvnQWIyK08cmzUGqX1I2IeeyV
05-15 14:53:17.149: D/myapp(7964): expiration = 1337090401151
05-15 14:53:17.169: D/myapp(7964): expiration datetime = Tue May 15 16:00:01 CEST 2012
05-15 14:53:17.169: D/myapp(7964): is session valid? true
05-15 14:54:48.849: D/myapp(7964): {"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

编辑：如果我添加“offline_access”权限，令牌就会出错。

```
05-15 15:24:06.639: D/myapp(8180): expiration = 0
05-15 15:24:06.669: D/myapp(8180): expiration datetime = Thu Jan 01 01:00:00 CET 1970
05-15 15:24:06.679: D/myapp(8180): is session valid? true 
```

至于行为，它在我第一次登录后从不要求我登录。如果我从手机上卸载它，我需要再次登录，如果我从我的 FB 帐户中删除该应用程序，它会再次要求所有权限。对话框也工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:35:14.013

看起来您根本没有设置访问令牌。请试试这个：

```
params.putString(Facebook.TOKEN, m_kFacebookClient.getAccessToken()); 
```

# android - 在 fragmentTabs 之间切换会产生意想不到的结果

> ID：10600660
> 
> 赞同：5
> 
> 时间：2012-05-15T12:28:40.873
> 
> 标签：android, android-fragments, android-tabhost, android-tabs

我正在尝试按照[http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)中的说明实现 FragmentTabs 。一切都很顺利，直到我这样做：

我从一个标签开始了许多不同的片段，例如：

tab1--->fragment1--->fragment2--->fragment3

选项卡2

但是当我切换到tab2并再次回到tab1时，我得到的是fragment1屏幕而不是fragment3（即我在第一个标签中有3个片段，而我在第三个片段上，我在切换到第二个标签后再次出现在第一个标签上，我是带到第一个片段而不是第三个片段）..谁能告诉可能是什么问题？

```
 @Override
        public void onTabChanged(String tabId) {
            TabInfo newTab = mTabs.get(tabId);
            if (mLastTab != newTab) {
                FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                if (mLastTab != null) {
                    if (mLastTab.fragment != null) {
                        ft.detach(mLastTab.fragment);
                    }
                }
                if (newTab != null) {
                    if (newTab.fragment == null) {
                        newTab.fragment = Fragment.instantiate(mActivity,
                                newTab.clss.getName(), newTab.args);
                        ft.add(mContainerId, newTab.fragment, newTab.tag);
                    } else {
                        ft.attach(newTab.fragment);
                    }
                }

                mLastTab = newTab;
                ft.commit();
                mActivity.getSupportFragmentManager().executePendingTransactions();
            }
        } 
```

当我评论 attach() 和 detatch() 时，我得到了这个：

![在此处输入图像描述](../Images/7e4dd3f544eb73e044831ee5416bdc1a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:04:59.063

## 更新：

我建议您保留原始代码`onTabChanged`并使用`addToBackStack`方法来维护片段的遍历状态。`addToBackStack`从一个片段转到下一个片段时调用，例如`add`ing 或`replace`ing 片段。

还要更改`TabInfo.fragment`引用以反映选项卡内片段之间的转换。

* * *

不要在每次更改选项卡时附加和分离。

```
 @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();

            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.replace(mContainerId, newTab.fragment, newTab.tag);
                } 
            }
            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:09:19.707

没有更多细节，很难说具体出了什么问题。但是，我可以根据个人经验说，当我第一次必须实现片段选项卡时，我经历了很多糟糕的教程，然后才找到了可行的方法。终于对我有意义的教程在这里： [http ://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

作为奖励，还有一些 Github 源代码： [https ://github.com/mitchwongho/Andy/tree/master/Andy/src/com/andy/fragments/tabs](https://github.com/mitchwongho/Andy/tree/master/Andy/src/com/andy/fragments/tabs)

# java - Java的Google Finance样式控件？

> ID：10600663
> 
> 赞同：5
> 
> 时间：2012-05-15T12:28:47.143
> 
> 标签：java, swing, user-interface, charts

我想制作一个时间线，您可以在其中查看概览并放大时间线的某些部分以获取更多详细信息。基本上，我想要谷歌财经所拥有的。

有什么东西可以提供确切的信息，或者至少让我接近吗？我将 Swing 和 SwingX 用于我的 GUI 组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:35:55.473

您可以尝试[JIDE Charts](http://www.jidesoft.com/products/charts.htm)作为起点。我用过 JIDE Charts，非常喜欢这个包。它非常模块化且易于使用。我们实际上创建并维护了一个图表包，它实现了您描述的功能。我们创建了一个自定义解决方案，它非常适合我们的应用程序。我最近才发现 JIDE Charts，但我的第一印象实际上是我们可能几乎可以使用该库作为基础构建我们的整个包。

另一种选择是[JFreeChart](http://www.jfree.org/jfreechart/)。我没有亲自使用过 JFreeChart，但我团队中的另一个人正在使用它并获得了不错的结果。

# c - 如何在 libcurl 中自定义 WRITEFUNCTION 以接收大数据流（最大 10K）？

> ID：10600665
> 
> 赞同：1
> 
> 时间：2012-05-15T12:29:06.053
> 
> 标签：c, curl, libcurl

我想自定义接收功能`libcurl`以接收大数据（可能高达 10K）。

我目前的实现如下：

```
static size_t wt_callback(char *ptr, size_t size, size_t nmb,
        void *data) {
    int len = size * nmb;

    struct response *rsp = (struct response *)data;
    int byte = len < rsp->buf_left ? len : rsp->buf_left;
    if (rsp->buf_offset == 0) {
        memset(rsp->buffer, 0, rsp->buf_left);
    }
    memcpy(rsp->buffer + rsp->buf_offset, ptr, byte);
    rsp->buf_offset += byte;
    rsp->buf_left   -= byte;

    return byte;
} 
```

和结构定义：

```
struct response {
    char *buffer;
    int  buf_left;
    int  buf_offset;
}; 
```

我安装了自定义的接收功能：

```
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, wt_callback);
                                        /* How data is received */
curl_easy_setopt(curl, CURLOPT_WRITEDATA, response);
                                        /* Where to store incoming data */ 
```

`response`键入为`struct response *`。

当前的问题是`wt_callback`未调用该函数，尽管我确定（我用 嗅探网络`wireshark`）该服务器已响应。

我不知道我被困在哪里，或者接收函数实现有什么问题。任何提示或建议将不胜感激。

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:50:10.627

如果不调用写回调，那么问题几乎不可能是回调函数本身。由于您没有向我们展示其余代码，因此我们真的很难猜到。也许您可以从具有我们知道的类似功能的示例代码中找到灵感：

[http://curl.haxx.se/libcurl/c/getinmemory.html](http://curl.haxx.se/libcurl/c/getinmemory.html)

# ant - 将属性转换为路径

> ID：10600666
> 
> 赞同：3
> 
> 时间：2012-05-15T12:29:08.300
> 
> 标签：ant

我有一个逗号分隔值的属性，例如。a,b,c

我想将其分开并创建不同文件集的路径；例如。

```
<path id="compile.path">
  <fileset dir="..\a\lib\"/>
  <fileset dir="..\b\lib\"/>
  <fileset dir="..\c\lib\"/>
</path> 
```

这可能吗？我该怎么做？我对蚂蚁不是很熟悉。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:34:53.980

您必须使用自定义脚本或非标准 Ant 任务。看看[这个 SO answer，它解释了如何从属性](https://stackoverflow.com/questions/945374/how-to-pull-out-a-substring-in-ant)中获取子字符串以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:42:41.537

另一种方法是编写一个 for 循环，根据分隔符迭代原始属性，并从循环中为每个标记调用一个目标。

```
 <foreach list="${property}" delimiter="${line.separator}" target="mytarget" 
param="token" /> 
```

然后被调用的目标：

```
<target name="mytarget">
    <echo>${token}</echo>           
</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:05:51.913

另一种方法是使用`PropertySelector`from ant-contrib

```
 <property name="package.ABC.name" value="abc pack name" />
    <property name="package.DEF.name" value="def pack name" />
    <property name="package.GHI.name" value="ghi pack name" />
    <property name="package.JKL.name" value="jkl pack name" />

    <propertyselector property="pack.list"
                         delimiter=","
                         match="package\.([^\.]*)\.name"
                         select="\1"
                         casesensitive="false" />               
would yield the results  
ABC,DEF,GHI,JKL 
```

# android - SQLiteDatabase.query 方法

> ID：10600670
> 
> 赞同：126
> 
> 时间：2012-05-15T12:29:23.710
> 
> 标签：android, sqlite

我正在使用 SQLiteDatabase 的查询方法。如何使用查询方法？

我试过这个：

```
Cursor cursor = sqLiteDatabase.query(
    tableName, tableColumns, whereClause, whereArgs, groupBy, having, orderBy); 
```

**tableColumns** - columns 参数构造如下。

```
String[] columns = new String[]{KEY_ID, KEY_CONTENT}; 
```

如果我们需要获取所有的字段，列参数应该如何构造。我们是否需要在字符串数组中包含所有字段名称？

如何正确使用查询方法？

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-05-15T13:28:42.153

**表列**

*   `null`对于所有列，如`SELECT * FROM ...`
*   `new String[] { "column1", "column2", ... }`对于特定列，如`SELECT column1, column2 FROM ...`- 您也可以在此处放置复杂的表达式：
    `new String[] { "(SELECT max(column1) FROM table1) AS max" }`会给您一个名为的列`max`，其中包含`column1`

**where子句**

*   您在`WHERE`没有该关键字的情况下放置的部分，例如`"column1 > 5"`
*   应该包括`?`动态的东西，例如`"column1=?"`-> 见`whereArgs`

**哪里Args**

*   `?`指定按照它们出现`whereClause`的顺序填写每个内容的内容

**其他**

*   就像`whereClause`关键字后面的语句或者`null`如果你不使用它。

**例子**

```
String[] tableColumns = new String[] {
    "column1",
    "(SELECT max(column1) FROM table2) AS max"
};
String whereClause = "column1 = ? OR column1 = ?";
String[] whereArgs = new String[] {
    "value1",
    "value2"
};
String orderBy = "column1";
Cursor c = sqLiteDatabase.query("table1", tableColumns, whereClause, whereArgs,
        null, null, orderBy);

// since we have a named column we can do
int idx = c.getColumnIndex("max"); 
```

等效于以下原始查询

```
String queryString =
    "SELECT column1, (SELECT max(column1) FROM table1) AS max FROM table1 " +
    "WHERE column1 = ? OR column1 = ? ORDER BY column1";
sqLiteDatabase.rawQuery(queryString, whereArgs); 
```

* * *

通过使用 Where/Bind -Args 版本，您可以获得自动转义的值，并且您不必担心 input-data 是否包含`'`.

不安全：`String whereClause = "column1='" + value + "'";`
安全：`String whereClause = "column1=?";`

因为如果 value 包含`'`您的语句，则您的语句会中断并且您会遇到异常或执行意外操作，例如，`value = "XYZ'; DROP TABLE table1;--"`甚至可能会删除您的表，因为该语句将成为两个语句和一个注释：

```
SELECT * FROM table1 where column1='XYZ'; DROP TABLE table1;--' 
```

使用 args 版本`XYZ'; DROP TABLE table1;--`将被转义`'XYZ''; DROP TABLE table1;--'`并仅被视为一个值。即使`'`不打算做坏事，人们在他们的名字中使用它或在文本、文件名、密码等中使用它仍然很常见。所以总是使用 args 版本。（虽然可以直接构建`int`和其他原语`whereClause`）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-24T05:02:08.310

这是一个更一般的答案，旨在为未来的观众提供快速参考。

**例子**

```
SQLiteDatabase db = helper.getReadableDatabase();

String table = "table2";
String[] columns = {"column1", "column3"};
String selection = "column3 =?";
String[] selectionArgs = {"apple"};
String groupBy = null;
String having = null;
String orderBy = "column3 DESC";
String limit = "10";

Cursor cursor = db.query(table, columns, selection, selectionArgs, groupBy, having, orderBy, limit); 
```

**[文档](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query(java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String))中的解释**

> *   `table` 字符串：用于编译查询的表名。
> *   `columns` 字符串：要返回的列的列表。传递 null 将返回所有列，不鼓励这样做以防止从存储中读取不会使用的数据。
> *   `selection` 字符串：声明要返回哪些行的过滤器，格式化为 SQL WHERE 子句（不包括 WHERE 本身）。传递 null 将返回给定表的所有行。
> *   `selectionArgs` 字符串：您可以在选择中包含 ?s，它将被 selectionArgs 中的值替换，以便它们出现在选择中。这些值将绑定为字符串。
> *   `groupBy` 字符串：声明如何对行进行分组的过滤器，格式化为 SQL GROUP BY 子句（不包括 GROUP BY 本身）。传递 null 将导致行不被分组。
> *   `having` 字符串：一个过滤器声明要在游标中包含哪些行组，如果正在使用行分组，则格式化为 SQL HAVING 子句（不包括 HAVING 本身）。传递 null 将导致包含所有行组，并且在不使用行分组时是必需的。
> *   `orderBy` 字符串：如何对行进行排序，格式为 SQL ORDER BY 子句（不包括 ORDER BY 本身）。传递 null 将使用默认排序顺序，可能是无序的。
> *   `limit` 字符串：限制查询返回的行数，格式为 LIMIT 子句。传递 null 表示没有 LIMIT 子句。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-05-15T12:47:50.750

Where 子句和 args 共同构成 SQL 查询的 WHERE 语句。所以说你想表达

```
WHERE Column1 = 'value1' AND Column2 = 'value2' 
```

那么你的 whereClause 和 whereArgs 将如下

```
String whereClause = "Column1 =? AND Column2 =?";
String[] whereArgs = new String[]{"value1", "value2"}; 
```

如果要选择所有表列，我相信传递给 tableColumns 的空字符串就足够了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-09T07:10:50.193

如果你的 SQL 查询是这样的

```
SELECT col-1, col-2 FROM tableName WHERE col-1=apple,col-2=mango
GROUPBY col-3 HAVING Count(col-4) > 5  ORDERBY col-2 DESC LIMIT 15; 
```

然后对于 query() 方法，我们可以这样做：-

```
String table = "tableName";
String[] columns = {"col-1", "col-2"};
String selection = "col-1 =? AND col-2=?";       
String[] selectionArgs = {"apple","mango"};
String groupBy =col-3;
String having =" COUNT(col-4) > 5";
String orderBy = "col-2 DESC";
String limit = "15";

query(tableName, columns, selection, selectionArgs, groupBy, having, orderBy, limit); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T12:57:31.200

```
db.query(
        TABLE_NAME,
        new String[] { TABLE_ROW_ID, TABLE_ROW_ONE, TABLE_ROW_TWO },
        TABLE_ROW_ID + "=" + rowID,
        null, null, null, null, null
); 
```

`TABLE_ROW_ID + "=" + rowID`, 这里`=`是`where`子句。要选择所有值，您必须提供所有列名：

```
or you can use a raw query like this 
db.rawQuery("SELECT * FROM permissions_table WHERE name = 'Comics' ", null); 
```

这是一个[很好的数据库教程](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/)。

# qt - 丑陋的Qt应用在ubuntu下看

> ID：10600675
> 
> 赞同：3
> 
> 时间：2012-05-15T12:29:40.010
> 
> 标签：qt, ubuntu, gtk

我参与在 Linux 下开发一些 Qt 应用程序构建。我已经下载了源代码并首先在 Windows 7 下编译它，但后来我决定在 Ubuntu 下工作。问题是，Linux中的应用程序看起来像Win95时代的。我已经安装了 Qt4 设置并选择了 GTK+ 样式，但这只是稍微改善了外观，尽管它看起来仍然很丑陋（如 256 色调色板，字体为斜体）。我还安装了许多 gtk 库，但没有任何帮助。我使用 Qt-4.7.4。我知道它应该看起来不同，因为在 Windows 上不会出现问题，即使在我老板的电脑上，他也在使用 Ubuntu，应用程序看起来好多了。

该应用程序将样式更改为 QPlasticStyle 本身。

提前感谢您的每一个答案。

* * *

好吧，又尝试了很多次，但没有任何改变。也许我会告诉你这个问题。应用程序的外观（或多或少）（由我的一位同事制作）： http: [//postimage.org/image/70p6sw7xd/full/](http://postimage.org/image/70p6sw7xd/full/)

以及它的实际外观（我制作的 ss）： http: [//postimage.org/image/48psktnuj/full/](http://postimage.org/image/48psktnuj/full/)

到目前为止我还没有做两件事：
1）一开始，我安装了 Qt-4.8.1，但它产生了一些 OpenGL 错误，`make`所以我下载了 4.7.4 版本（我的老板和cos正在使用）并且正在努力安装。最后，我刚刚用 4.7.4 中的 qt-make 覆盖了 4.8.1 中的 qt-make，它编译得很好。但后来我遇到了“问题的事情”。重点 - 所有 Qt 应用程序都告诉（Help-> About Qt）他们正在使用 Qt-4.8.1，我想知道它是否与问题有关。

2）第二件事是我的图形。我有搭载 Nvidia Optimus 的 MSI CX640 笔记本电脑。安装 Ubuntu 后，我不得不使用集成的 Intel HD3000 而不是专用的 GT520M（它使风扇的噪音变得不必要）。我已经用谷歌搜索了这样做的方法，实际上成功地禁用了 GT520M。它有什么意义 - 我不确定，但我记得在我正在寻找解决方案的网站上提到了一些 OpenGL 的东西）。我认为这与问题没有任何共同之处，但我很沮丧，现在我正在洞察一切。

也许这些可以更好地概述问题。

PS。感谢您的尝试，我很感激他们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T22:49:48.140

尝试安装`qt4-qtconfig`软件包。使用该`qtconfig`工具自定义外观。

```
sudo apt-get install qt4-qtconfig
qtconfig & 
```

**编辑：**

如果它看起来很糟糕，请尝试删除（或临时重命名）该`~/.config/Trolltech.conf`文件。然后使用 Qt4 Settings 重新开始。另外，我建议您尝试安装 Oxygen 和 QtCurve 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:57:15.430

**第一个提议的方法**

您是否尝试过通过命令行手动更改应用程序的样式？转到应用程序文件夹，其中有程序的编译版本，并通过附加或`-style cleanlooks`任何其他预定义样式（`windows`、`motif`、`cde`、`plastique`或）来执行它。如果程序名为，那么您必须编写：`cleanlooks``gtk+``foo`

```
foo -style gtk+ 
```

将外观与您老板的计算机进行比较。这将表明问题出在样式上还是与 Qt 中预定义样式的选择有关。

**另一种可能的方法**

知道您已经覆盖了以前的安装，可能某些库文件已损坏或丢失或未被 Qt4.7.4 覆盖。

`diff`如果是这种情况，您会通过在老板的计算机和您的计算机之间的某些目录上执行 a 来发现哪些文件已损坏或误导。

Qt 库通常位于`/usr/lib/i386-linux-gnu/`（预编译的预编译样式在哪里），文件名的格式为`libQt...`

如果您检查一些项目的 Makefile 并搜索`-L`开关，您可以验证库的路径。也许你的在另一个文件夹中，比如`/usr/lib`直接。

因此，您可以使用以下命令列出库及其名称和大小：

```
ls -l /usr/lib/i386-linux-gnu/libQt* 
```

如果你看到一些链接指向错误的地方，或者版本号乱码，那么你已经找到了问题所在。如果不是，则将列表与您老板的另一个列表进行比较（可能文件大小可能表明 Qt4.8 的残余）。

我不知道您是否可以将库文件从一台计算机替换到另一台计算机。尝试。至少可能发生的是您必须重新安装 Qt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:29:07.193

您是否尝试过*清理*项目？

删除除 .cpp、.h 和 .pro 之外的所有内容

这包括一个扩展名为 .pro.user 的文件，该文件也必须删除。同时删除调试和发布文件夹。

然后像往常`qmake`一样`make`从命令行运行。

执行时您是否在“sudoing”您的应用程序？那也叫另一种风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T15:38:13.277

好吧，几天过去了，我还在挣扎。

但是，我已经正确地重新安装了 Qt 4.7.4，如果在其上构建，应用程序看起来不错，尽管字体类似于 Monotype 而不是 Ubuntu 的字体。不幸的是，这是 Qt 问题，很难弥补。也许你现在该怎么做？我正在解决我的问题的最后一部分。

编辑：万岁！解决了！[我使用http://qt-project.org/forums/viewthread/14269/#74232](http://qt-project.org/forums/viewthread/14269/#74232) 和 [http://ubuntuforums.org/showthread.php?t=1559654](http://ubuntuforums.org/showthread.php?t=1559654)堆叠了与我的项目兼容的 4.8.1

谢谢大家。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-08T17:25:21.643

如果使用 Qt 4，您可能只需将图形系统设置为“光栅”。我不知道是否可以在 Qt 5 中执行（尝试命令行开关，因为 setGraphicsSystem 函数已经消失）。

有几种方法可以做到这一点。见[http://qt-project.org/doc/qt-4.8/qapplication.html#setGraphicsSystem](http://qt-project.org/doc/qt-4.8/qapplication.html#setGraphicsSystem)

> **void QApplication::setGraphicsSystem ( const QString & system ) [静态]**
> 
> 将默认图形后端设置为系统，它将用于屏幕小部件和 QPixmap。可用的系统是“native”、“raster”和“opengl”。
> 
> 有几种方法可以设置图形后端，按照优先级递减的顺序：
> 
> *   应用程序命令行 -graphicssystem 开关
> *   QApplication::setGraphicsSystem()
> *   QT_GRAPHICSSYSTEM 环境变量
> *   Qt 配置 -graphicssystem 开关
> 
> 如果最高优先级开关设置了无效名称，则错误将被忽略并使用默认后端。
> 
> **警告**：此函数仅在调用 QApplication 构造函数之前有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-13T21:27:16.973

使用 ubuntu 14.04，应用程序在以普通用户身份运行时看起来不错，但在以 root 身份运行时，它使用的`motif`主题非常难看。

通过使用，我能够使应用程序使用漂亮的默认辐射主题：

`app.setStyle("gtk")`

实例`app`在哪里。`QApplication`

见[http://doc.qt.io/qt-4.8/qapplication.html#setStyle-2](http://doc.qt.io/qt-4.8/qapplication.html#setStyle-2)

# jquery - 使用 jquery 加载图像：IE9 中的附加请求

> ID：10600678
> 
> 赞同：1
> 
> 时间：2012-05-15T12:29:46.423
> 
> 标签：jquery, internet-explorer-9

我有这样一个页面：

```
<script type="text/javascript">
    $(function () {
        $("#links a").mouseover(function () {
            $("#flag").attr("src", "/Images/" + $(this).attr("id") + ".png");
        });
    });
</script>
<div>
    <img id="flag" src="/Images/austria.png" alt="austria" />
</div>
<div id="links">
    <a id="austria" href="#">austria</a>
    <a id="brazil" href="#">brazil</a> 
    <a id="japan" href="#">japan</a>
</div> 
```

每件事在不同的浏览器（FF10，Chrome，IE9）中都能正常工作。但是当我在 IE9 中使用“F12 开发人员工具”监控网络时，每次鼠标经过链接时，都会额外请求图像。但是在 FF 和 Chrome 中，通过使用 FireBug 和开发工具检查，对于每个图像，只有一个请求，而第二次浏览链接时，没有请求。

*   IE9（或我的代码；））有什么问题？

*   是否有其他解决方案可以解决我的问题以防止出现此问题？

（实际上我想要像 Yahoo Hot news 这样的东西，对于每个新闻图像，它的请求只调用一次，即使在 IE9 中也是如此）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:35:01.153

您没有检查是否已经加载了当前图像；因此，即使它已经存在，它也会重新加载它。一些浏览器可能正在使用图像的缓存版本，因此没有再次获取它。

```
$(function () {
    $("#links a").mouseover(function () {
        var $flag = $("#flag");
        var newImage = "/Images/" + $(this).attr("id") + ".png";

        if ($flag.attr("src").indexOf(newImage) == -1)
            $flag.attr("src", newImage);
    });
}); 
```

**编辑**：

从我们的谈话中，我写了以下内容，这也是你所指的吗？

**HTML**：

```
<div class="flag">
    <img id="flag" src="/Images/austria.png" alt="austria" />
</div>
<div id="links">
    <a id="austria" href="#">austria</a>
    <a id="brazil" href="#">brazil</a> 
    <a id="japan" href="#">japan</a>
</div>​​​ 
```

**Javascript**：

```
$(function () {
    $("#links a").mouseover(function () {
        var $flag = $(".flag");;
        var $flagImg = $("#flag");
        var imageID = $(this).attr("id");

        if ($flagImg.attr("src").indexOf(imageID) == -1)
            $flag.html('<img id="flag" src="/Images/' + imageID  + '.png" alt="' + imageID + '" />');
    });
}); 
```

[现场演示](http://jsfiddle.net/nSE8B/7/)

# javascript - 如何使用此关键字访问表单元素

> ID：10600683
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:30:02.013
> 
> 标签：javascript, jquery, html

我有循环生成的表单，所以元素的名称是相同的。这就是我想使用 $(this) 来访问它们并进行比较的原因。但到目前为止还没有成功，任何想法我怎么能。仅供参考，我是 Jquery 的新手，任何帮助表示赞赏:)

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$("form").submit(function() {

 if ($(this).children("#textbx").val() < $(this).children("#comparetobox").val() ) {

    $("span").text("Validated...").show();
    return true;

  }

    $("span").text("Not valid!").show().fadeOut(1000);
  return false;
});

</script>

<form id='userbid'  name='userbid'  method=post>
<input type="text" name="textbx" id="textbx">
<input type="text" name="comparetobox" id="comparetobox">
<span></span>
<input type="submit" value="save" name="submit">
</form>
<!-- Form is in loop so can be generated N no of times -->
<form id='userbid'  name='userbid'  method=post>
<input type="text" name="textbx" id="textbx">
<input type="text" name="comparetobox" id="comparetobox">
<span></span>
<input type="submit" value="save" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:35:37.797

我不知道您如何比较`input`框的值，但这是有效的 JavaScript 代码：

```
$("form").submit(function() {
    if ($(this).children(".textbx").val() < $(this).children(".comparetobox").val()) {
        $(this).children("span").text("Validated...").show();
        return true;
    }
    $(this).children("span").text("Not valid!").show().fadeOut(1000);
    return false;
}); 
```

请注意，元素的 ID 应该是唯一的。改用类（例如`.textbx`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:37:25.210

在第二个输入中你有'is'而不是'id'，这可能是你的问题。

# c# - 使用 linq 从 var 中提取一列

> ID：10600690
> 
> 赞同：5
> 
> 时间：2012-05-15T12:30:34.557
> 
> 标签：c#, linq-to-entities

我有这样的东西

```
var emp = db.Employees.toList(); 
```

在我的员工表中，我有 emp 名称、emp id 和薪水，使用带有 lambda 表达式的 linq，我如何在另一个变量中访问 emp id。我已经尝试查找它，找不到使用带有 lambda 表达式的 linq 的解决方案

```
var employeeLeaves = db.Leaves
     .Include("Employee")
     .Include("Employee.Manager")
     .Where(l => l.Status.Id == 1)
     .GroupBy(l => l.Employee.Manager.Id)
     .Select(l => l.GroupBy(k=>k.Employee.Id).Select(j=>j.GroupBy(‌​p=>p.GroupId)))
     .ToList(); 
```

这是我的实际查询，不要问我是怎么写的..:P 现在我想从employeeLeaves 获取id 列并将其存储在另一个变量中

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T12:32:10.373

尚不完全清楚您要做什么，这就是为什么您有这么多不同方法的答案。如果您试图将“员工集合”转换为“ID 集合”，那么您需要这样的东西：

```
var ids = emp.Select(x => x.Id); 
```

或者更直接：

```
var ids = db.Employees.Select(x => x.Id); 
```

（可选地`ToList`在每一个的末尾加上。）

我强烈建议您`var`借助一本好书或教程从头开始彻底学习 LINQ（以及一些相关的语言功能，例如 ）。IMO，仅通过查找与您想要的有点相似的样本来零碎地学习并不是一个好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:32:56.267

```
var empId = db.Employees.Single(x => x.id == 5).Id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:32:20.000

试试这个语法：

```
var empIds = db.Employees.Select(e=>e.EmpID) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:32:46.577

您可以使用`select`. 也许是这样的：

```
var result=db.Employees
              .Select(s=>s.emp_id); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-28T11:15:31.730

```
Database.Tablename.Single(x => x.id == anyId) 
```

这应该选择单行

# php - 如果会话不存在，Codeigniter ajax 函数不会重定向到登录页面

> ID：10600692
> 
> 赞同：0
> 
> 时间：2012-05-15T12:30:37.597
> 
> 标签：php, ajax, codeigniter

我正在为具有用户注册功能的 Web 应用程序使用 codeigniter。而且我在大多数地方都使用 ajax 来加载页面。问题是，如果通过 ajax 调用某个函数来加载页面并且如果会话不存在，则它不会重定向到登录页面。但是当我们通过浏览器访问相同的 URL 时它正在工作（它正在重定向到登录页面）。我应该怎么做才能解决这个问题？

这是我们正在使用的检查会话的代码。

```
 $userid=$this->phpsession->get('userid');
    if(!($userid))
    { 
        redirect('home','refresh');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:42:26.980

在您的控制器中检测它是否是 ajax 请求：

```
if($this->input->is_ajax_request())
{
    $userid=$this->phpsession->get('userid');
    if(!($this->usermodel->is_user($userid)))
    { 
        echo "1";
    }
} 
```

在 ajax 中检测响应并重定向到登录页面：

```
$.post('index.php/login', function(data){

if(data == "1")
{
document.location.href = <?php echo site_url("home"); ?>;
}

}); 
```

# php - 升级到 php 5.3 后无法重新声明函数

> ID：10600693
> 
> 赞同：0
> 
> 时间：2012-05-15T12:30:38.763
> 
> 标签：php, php-5.3, ioncube

我尝试在我的测试机器上从 php 5.2 升级到 php 5.3，并且使用了一个商业包，它是编码的，我根本无法更改它。它应该与 PHP 5.3 一起使用，除了它声明了一个 lcfirst 函数，所以我收到一个错误 PHP 致命错误：无法重新声明 lcfirst()。有什么办法可以解决这个问题，以便我可以在 PHP 5.3 上运行它？或者是没有这个函数编译 PHP 的唯一选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:32:18.953

恐怕不是，你不能取消声明一个函数......他们将不得不更改他们的函数名称。

正如@Michael 所说，PHP 5.3 已经存在很长时间了，他们遇到这个问题似乎有点奇怪。

# asp.net - 在 SQL Server Management Studio 中重新组织存储过程显示

> ID：10600694
> 
> 赞同：0
> 
> 时间：2012-05-15T12:30:42.323
> 
> 标签：asp.net, sql-server, sql-server-2008

我目前正在使用一个涉及大量存储过程的 Asp.NET Web 应用程序。

由于我也在使用 Asp.NET Membership/Roles/Profile 系统，Microsoft Sql Server Management Studio 中显示的存储过程列表确实变得难以导航。当我打开`Programmability/Stored Procedures`树时，我有一长串`dbo.aspnet_spXXX`存储过程，我的过程在最后徘徊。

我想做的是将所有这些 aspnet 存储过程洗牌到他们自己的文件夹中，让我的像现在一样漂浮。我不想放弃目前的组织，我只是想稍微完善一下。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:39:49.537

我认为您在 SSMS 中可以做的最好的事情是使用过滤器来排除 aspnet 存储过程。

*   右键单击存储过程文件夹
*   选择过滤器 -> 过滤器设置
*   按名称过滤，不包含“aspnet_sp”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:39:00.787

我会推荐 redgate 的 SQL 搜索工具——方便查找特定的过程，而不是滚动浏览一个大列表。允许您双击并转到它：

[http://www.red-gate.com/products/sql-development/sql-search/](http://www.red-gate.com/products/sql-development/sql-search/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T12:45:24.793

Management Studio 不支持按字母顺序以外的方式对这些对象进行排序。

我喜欢过滤器和第 3 方插件的想法，但您可以探索的另一个想法是为您的对象使用不同的架构。如果您将模式命名为“abc”或更合乎逻辑的名称，它们将始终首先排序，您的用户都不必应用过滤器。

```
CREATE SCHEMA abc AUTHORIZATION dbo;
GO
ALTER SCHEMA abc TRANSFER dbo.proc1;
ALTER SCHEMA abc TRANSFER dbo.proc2;
ALTER SCHEMA abc TRANSFER dbo.proc3;
... 
```

当然，您需要更新代码以引用此架构，并且您还应该更改所有用户的默认架构。

这实际上并不是模式的主要目的之一，但没有将您的对象放在不同的数据库中，这是一种在视觉上分离它们的方法。

# java - 如何在 JPA 中使用 Hibernate 的二级缓存？

> ID：10600698
> 
> 赞同：7
> 
> 时间：2012-05-15T12:30:51.903
> 
> 标签：java, hibernate, caching, jpa, nhibernate-caches

我正在实现基于实体属性值的持久性机制。所有数据库访问都是通过 Hibernate 完成的。我有一个包含节点路径的表，它非常简单，只有一个 id 和一个路径（字符串）路径数量很少，大约几千。

主表有数百万行，我没有重复路径，而是将路径标准化为他们自己的表。以下是插入主表时我想要的行为

1）检查路径表中是否存在路径（通过实体管理器查询，使用路径值作为参数）

2）如果不存在，插入，获取id（通过实体管理器持久化）

3）将id作为外键值放入主表行，并将其插入主表。

对于一组域对象，这将发生数千次，它们对应于主表和其他一些表中的许多行。因此，使用单个事务重复上述步骤，如下所示：

```
 EntityTransaction t = entityManager.getTransaction();
    t.begin();
    //perform steps given above, check, and then persist etc..
    t.commit(); 
```

当我执行第 2 步时，它会给整个操作带来巨大的性能下降。它正在乞求缓存，因为一段时间后，该表将最多有 10-20k 个条目，其中包含非常罕见的新插入。我试过用 Hibernate 来做这件事，结果丢了将近 2 天。

我正在使用带有 JPA 注释和 ECache 的 Hibernate 4.1。我尝试启用查询缓存，即使在整个插入过程中使用相同的查询对象，如下所示：

```
Query call = entityManager.createQuery("select pt from NodePath pt " +
                "where pt.path = :pathStr)");
        call.setHint("org.hibernate.cacheable", true);  
        call.setParameter("pathStr", pPath);
        List<NodePath> paths = call.getResultList();
        if(paths.size() > 1)
            throw new Exception("path table should have unique paths");
        else if (paths.size() == 1){
            NodePath path = paths.get(0);
            return path.getId();
        }
        else {//paths null or has zero size
            NodePath newPath = new NodePath();
            newPath.setPath(pPath);
            entityManager.persist(newPath);
            return newPath.getId();
        } 
```

NodePath 实体注释如下：

```
@Entity
@Cacheable
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
@Table(name = "node_path", schema = "public")
public class NodePath implements java.io.Serializable { 
```

从统计数据中可以看出，查询缓存正在被使用，但没有报告二级缓存的使用：

```
queries executed to database=1
query cache puts=1
query cache hits=689
query cache misses=1
....
second level cache puts=0
second level cache hits=0
second level cache misses=0
entities loaded=1
.... 
```

一个简单的手写哈希表作为缓存，按预期工作，大大减少了总时间。我想由于我的操作性质，我无法触发 Hibernate 的缓存。

**如何在此设置中使用 hibernate 的二级缓存？**作为记录，这是我的持久性 xml：

http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
<class>...</class>
<exclude-unlisted-classes>true</exclude-unlisted-classes>
<shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>

  <properties>
   <property name="hibernate.connection.driver_class" value="org.postgresql.Driver" />
    <property name="hibernate.connection.password" value="zyx" />
    <property name="hibernate.connection.url" value="jdbc:postgresql://192.168.0.194:5432/testdbforml" />
    <property name="hibernate.connection.username" value="postgres"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
    <property name="hibernate.search.autoregister_listeners" value="false"/>
    <property name="hibernate.jdbc.batch_size" value="200"/>
     <property name="hibernate.connection.autocommit" value="false"/> 
     <property name="hibernate.generate_statistics" value="true"/>
    <property name="hibernate.cache.use_structured_entries" value="true"/>

    <property name="hibernate.cache.use_second_level_cache" value="true"/>
     <property name="hibernate.cache.use_query_cache" value="true"/>           

     <property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory"/>              

  </properties> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:32:44.797

好的，我找到了。我的问题是，缓存查询仅在缓存中保留查询结果的 ID，并且它（可能）返回到 db 以获取实际值，而不是从二级缓存中获取它们。

问题当然是，查询没有将这些值放入二级缓存，因为它们不是由主 ID 选择的。所以解决方案是使用一种将值放入二级缓存的方法，并且使用休眠 4.1，我已经设法使用自然 id 做到这一点。这是从缓存中插入或返回值的函数，以防万一它帮助其他人：

```
private UUID persistPath(String pPath) throws Exception{
        org.hibernate.Session session = (Session) entityManager.getDelegate();
        NodePath np = (NodePath) session.byNaturalId(NodePath.class).using("path", pPath).load();
        if(np != null)
            return np.getId();
        else {//no such path entry, so let's create one
            NodePath newPath = new NodePath();
            newPath.setPath(pPath);
            entityManager.persist(newPath);
            return newPath.getId();
        }

    } 
```

# javascript - 我收到“这不是函数”错误

> ID：10600699
> 
> 赞同：1
> 
> 时间：2012-05-15T12:30:53.863
> 
> 标签：javascript, jquery, dom

我`$("<div/>").text(value).html is not a function`在下面的代码中收到错误：

```
function htmlEncode(value) { 
    return $('<div/>').text(value).html(); 
}

function startImageUpload(imageuploadform, imagefilename){

    $('.imagef1_cancel').eq(window.lastUploadImageIndex).html(
        '<div>' + 
        htmlEncode(imagefilename) + 
        '<button type="button" class="imageCancel" cancel_image_file_name="' + 
        imagefilename + 
        '">CANCEL</button></div>'
    );

    return true;
} 
```

如何修复此错误？

奇怪的是我在下面有一个类似的代码，但功能不同（stopImageUpload）并且代码在下面工作正常：

```
 function htmlEncode(value) { 
        return $('<div/>').text(value).html(); 
    }

    function stopImageUpload(success, imagefilename) {
        imagecounter++;
        $('.listImage').eq(window.lastUploadImageIndex).append(
            '<div>' + 
            htmlEncode(imagefilename) +
            '<button type="button" class="deletefileimage" image_file_name="' +
            imagefilename + 
            '">Remove</button><br/><hr/></div>'
        ); 

        return true;   
    } 
```

链接到应用程序以查看正在发生的事情在这里：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:40:22.710

```
$('<div/>').html(value); //without text function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:36:58.837

```
function htmlEncode(value) { 
    return $('<div/>').text(value).html(); 
} 
```

如果`value`在上面的代码片段中是`undefined`，则`text()`返回 DOM 元素的文本内容，而不是元素本身，导致链式调用失败。

# qt - 在 QML WebView 中实现文件上传

> ID：10600703
> 
> 赞同：0
> 
> 时间：2012-05-15T12:31:04.440
> 
> 标签：qt, webview, qml, symbian

我正在尝试使用 Symbian 平台的 QML Webview 中的表单将文件上传到远程服务器。该表单包含一个 HTML 文件上传表单字段。当我在设备（诺基亚 N8）上运行它时，webview 会加载，但单击文件上传字段的浏览按钮不会执行任何操作。

如果我使用桌面浏览器直接进入网页，并且其他表单元素（如文本字段）在 Web 视图中工作，则此方法效果很好。

QML webview 和 html 文件上传字段有问题吗？是否有其他方法可以使用 QML 将文件上传到远程服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:51:29.843

可能不是解决方案，但可以尝试。由于在 Symbian 中访问文件系统需要某些功能，例如**ReadUserData、ReadDeviceData**等，这些功能可以添加到应用程序中并进行尝试。

# ios - iOS：选项卡和文档目录

> ID：10600704
> 
> 赞同：0
> 
> 时间：2012-05-15T12:31:05.537
> 
> 标签：ios, tabs, directory, document

我正在编写一个带有四个选项卡的应用程序。在第二个选项卡中，我将数据存储在 plist 中并使用此代码设置路径：

```
//get the path to the documents directory (where we will store our plist)
NSString* docDirectory = [self applicationDocumentsDirectory];

//append the path to the documents diretory with our plist name
NSString* destPath = [docDirectory stringByAppendingPathComponent:@"surveyResults.plist"]; 
```

这是在它自己的方法。工作正常。

在第四个选项卡中，我放置了相同的代码，但在 [self applicationDocumentsDirectory] ​​上出现错误：

```
No visible @interface for 'FourthViewController' declares the selector 'applicationDocumentsDirectory' 
```

我在 viewDidLoad 方法中有它。

它在一个选项卡上而不是另一个选项卡上工作的任何原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:36:27.013

我想你正在使用这篇文章中的代码：

[如何获取应用程序文档目录 iPhone 的 URL](https://stackoverflow.com/questions/5608091/how-to-get-url-for-applications-document-directory-iphone)

您只需要确保第四个选项卡的 ViewController 也包含此代码片段，我希望您只是忘记将其放入。

就我个人而言，我会将这样的方法放在帮助程序类中，并将其标记为静态方法，以便我可以调用它，例如 [MyHandyUtils applicationDocumentsDirectory]。

# php - 如何在 PHP 函数中从 MySQL 返回 TRUE 或 FALSE？

> ID：10600705
> 
> 赞同：0
> 
> 时间：2012-05-15T12:31:06.347
> 
> 标签：php, function, if-statement

我正在尝试使用 PHP。这是我的 func.php

```
function returnBlankStylist(){

$sql=mysql_query("SELECT * FROM `".$dbn."`.`stylist` WHERE `stylist`.`customer_id`='1'");
if (mysql_affected_rows()==0) {
 return false;
} else {
 return true;
}
} 
```

这是我的页面.tpl

```
<?php if (returnBlankStylist==false){?>
<div class="center graybox"> Please enjoy this discount since this you have never filled out a query before</div>
<? }?> 
```

如果客户 ID 1 存在，则显示消息，如果客户 ID 1 不存在，则显示消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:32:12.070

## 页面.tpl

```
<?php if (returnBlankStylist() == false) : ?>
    <div class="center graybox">
        Please enjoy this discount since this you have never filled out a query before
    </div>
<? endif; ?> 
```

或者

```
<?php if (!returnBlankStylist()) : ?>
    <div class="center graybox">
        Please enjoy this discount since this you have never filled out a query before
    </div>
<? endif; ?> 
```

或者

```
<?php if (returnBlankStylist() == false) { ?>
    <div class="center graybox">
        Please enjoy this discount since this you have never filled out a query before
    </div>
<? } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:33:08.700

你错过了括号..

```
if(returnBlankStylist()==false){
    //your code...
} 
```

希望它对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:34:35.063

请将您的代码替换`if (mysql_affected_rows()==0)`为`if (mysql_num_rows()==0);`

试试这个：

```
<?php if (!returnBlankStylist()){?>
<div class="center graybox"> Please enjoy this discount since this you have never filled out a query before</div>
<? }?> 
```

# netbeans - 在 netBeans 中快速选择一行的方法

> ID：10600706
> 
> 赞同：6
> 
> 时间：2012-05-15T12:31:19.823
> 
> 标签：netbeans, netbeans-7, netbeans-plugins

我正在寻找一种在 netBeans 中选择一行的快速方法。

例如复制和粘贴。（在 vim 编辑器中`yy`拉出当前行）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-20T12:12:40.723

我已经使用 Netbeans 几个月了。

`Ctrl + c`将复制整行而不选择它。

`Ctrl + e`将删除该行而不选择它。

`Ctrl + Shift + down or up`箭头将复制该行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T12:38:29.973

大多数 GUI，包括 Netbeans，都允许您通过双击来选择一个单词，并通过三次单击来选择整行。

或者

selection-end-line (Shift+End) selection-down (SHIft+Down) 任意多行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-17T11:37:23.413

我来晚了这篇文章，但有一个解决方案。在`netbeans 8.x`中，转到**Tools -> Options -> Keymap**。在那里，搜索`Select Line`. 您将在那里获得一个条目。在字段下`Shortcut`，您可以提供方便的快捷方式。默认没有快捷方式

# javascript - setInterval 和 setTimeout 清除

> ID：10600710
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:31:26.020
> 
> 标签：javascript, settimeout, setinterval

在执行下一步操作之前是否需要清除 setInterval() 和 setTimeout() 方法。因为在使用 setInterval 和 timeout 做了一些动画之后，我正在绘制形状但它不起作用......所以请帮助我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:49:57.460

在 setTimeout 之后，您不需要清除 Timeout。

clearTimeout 用于取消尚未发生的 setTimout 或使用 clearInterval 停止 setInterval。

已执行的 setTimeout 已完成。

为了获得更好的答案，您需要提供更多代码作为示例。

# java - 如何重新定位小程序查看器窗口？

> ID：10600712
> 
> 赞同：8
> 
> 时间：2012-05-15T12:31:39.497
> 
> 标签：java, applet

使用 Eclipse 制作 java Applet。每次从 IDE 运行它时，applet 查看器都会显示在左上角 (0,0) 处。如何在开发过程中可编程地将其更改为屏幕中间？我知道在浏览器中部署时，我们无法从小程序内部更改窗口，因为 html 确定位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T02:33:42.190

与另一张海报相比，我认为这是一个毫无意义的练习，并且更喜欢他们的建议，即制作一个混合应用程序/小程序以使开发更容易。

OTOH - “我们拥有技术”。小程序查看器中小程序的顶级容器通常是`Window`. 获取对此的参考，您可以将其设置在您希望的位置。

试试这个（恼人的）小例子。

```
// <applet code=CantCatchMe width=100 height=100></applet>
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.Random;

public class CantCatchMe extends JApplet {

    Window window;
    Dimension screenSize;
    JPanel gui;
    Random r = new Random();

    public void init() {
        ActionListener al = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                moveAppletViewer();
            }
        };
        gui = new JPanel();
        gui.setBackground(Color.YELLOW);
        add(gui);

        screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        // change 2000 (every 2 secs.) to 200 (5 times a second) for REALLY irritating!
        Timer timer = new Timer(2000, al);
        timer.start();
    }

    public void start() {
        Container c = gui.getParent();
        while (c.getParent()!=null) {
            c = c.getParent();
        }
        if (c instanceof Window) {
            window = (Window)c;
        } else {
            System.out.println(c);
        }
    }

    private void moveAppletViewer() {
        if (window!=null) {
            int x = r.nextInt((int)screenSize.getWidth());
            int y = r.nextInt((int)screenSize.getHeight());
            window.setLocation(x,y);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:44:05.530

有趣的问题。

我还没有找到影响 AppletViewer 的可靠方法，而不是在 Windows 上使用脚本从批处理文件模式启动它，即使这样也效果不佳。

另一种方法是编写您的测试代码，以便 Applet 从 JFrame 开始，您可以轻松地将其居中。

向您的 Applet 添加一个主要方法：

```
 public class TheApplet extends JApplet {

   int width, height;

   public void init() {
      width = getSize().width;
      height = getSize().height;
      setBackground( Color.black );
   }

   public void paint( Graphics g ) {
      g.setColor( Color.orange );
      for ( int i = 0; i < 10; ++i ) {
         g.drawLine( width / 2, height / 2, i * width / 10, 0 );
      }
   }

    public static void main(String args[]) {
        TheApplet applet = new TheApplet();

        JFrame frame = new JFrame("Your Test Applet");
        frame.getContentPane().add(applet);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(640,480);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        applet.init();

    }
} 
```

这应该可以工作，除非我错过了什么——我更新了我在我的机器上运行的工作代码。

# ios - 如何在用户选择时在 uitabbarcontroller 内的 uinavigationcontroller 中每次都初始化 viewcontroller

> ID：10600725
> 
> 赞同：0
> 
> 时间：2012-05-15T12:32:35.130
> 
> 标签：ios

我正在尝试完成一项任务，但即使尝试了几天也没有成功。

我有一个标签栏，其中包含 3 个标签朋友、聊天、设置。

*   Friends 选项卡只是 uitableviewcontroller 的子类，当用户点击任何用户时，他将跳转到第二个选项卡，即聊天选项卡。

*   第二个选项卡（聊天）包含一个 uinavigationscontroller。这个 uinavigationcontroller 它本身包含两个视图 1> 聊天界面，2> ActiveChats，它是 uitableviewcontroller 的子类，用于显示用户当前正在与之聊天的人员列表。

*   我想要的是当用户在第一个标签上并选择她的任何朋友聊天时，她必须跳到第二个标签上并直接看到聊天界面才能与她的朋友聊天。问题是我必须为navigationcontoller设置一个根视图控制器，该控制器将被预初始化，但我希望每次用户选择她的朋友时都必须初始化聊天视图控制器，我还实现了一个方法initWithId，它必须接受一个选定的人识别并将味精传递给该特定人并保存发送和接收的消息。

*   问题的第二部分，这个聊天界面是根视图控制器，但我还想要一个后退按钮，所以当用户点击它时，用户将看到 ActiveChat 视图。此功能类似于 WhatsApp、Viber 或 OneTeam 应用程序。

请帮助我，避免任何愚蠢的错误，我是新手。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:57:39.553

我理解您问题的第一部分，因为您想使用特定于用户的 details 初始化您的类的对象。您已经使流程变得非常复杂，如果它是基于导航的，对您来说会容易得多。现在在这里，根据您的要求，您必须在单击的每一行上初始化您的类，因此您必须使您的“聊天界面”作为 UINavigation 或 viewcontroller.view 的 rootview 的子视图，然后在 rootView 的 viewDidLoad 方法中，您可以每次都初始化“聊天界面”。

我可以从您的另一个问题中推断出，您希望后退按钮实际转到 UInavigationcontroller 中的下一页，这不实用且没有意义。只需将 nextview 推到 navigationController 上。

从我们的评论中，我看到了该网站，它不是一个后退按钮，它被定制为一个后退按钮。Apple 不允许这样的事情，你可能会冒险你的应用程序。无论如何你可以这样做：-

```
UIImage *image= [UIImage imageNamed:@"yourImage.png"]; //Here image shoulb be similar to backButton
UIButton *yourButton= [UIButton buttonWithType:UIButtonTypeCustom]; 
[yourButton setBackgroundImage:image forState:UIControlStateNormal]; 
yourButton.font = [UIFont boldSystemFontOfSize:10]; 
yourButton.frame = CGRectMake(0, 0, image.size.width, image.size.height); 
[yourButton addTarget:self action:@selector(yourTarget) forControlEvents:UIControlEventTouchUpInside];  self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:yourButton]; 
```

# c# - 选择查询以从 Excel 文件中获取任意格式的日期时间值

> ID：10600726
> 
> 赞同：0
> 
> 时间：2012-05-15T12:32:37.020
> 
> 标签：c#, excel, datetime

我正在使用以下选择查询从 excel 表中获取详细信息。

```
Select UserID,UserName,Country,State,City,DOB from [Sheet1$] 
```

默认 DOB(DateOfBirth) 值是 Excel 文件中的 mm/dd/yyyy 格式。如果我在 excel 中将 DOB 值格式 mm/dd/yyyy 更改为 dd/mm/yyy 或 dm-yyyy（默认格式除外）。上述选择查询检索空 DOB 值。

如何编写选择查询以获取任何格式的日期时间值？

如果SQL中有类似Cast()或Convert()的方法，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:40:33.610

尝试这个。不要在演员表上浪费时间。只需获取您需要的值，然后让 String.Format 以您需要的格式显示它。

查询正常的 DoB 值（如您的格式`mm/dd/yyyy`），以及显示它的位置，使用`String.Format( {0:dd/MM/yyyy},DOB );`

希望这可以帮助

例如，在您拥有包含结果的数据集后，

```
string DateOfBirth = String.Format ( {0:dd/MM/yyyy},<yourDataSet>.Tables[0].Rows.Field<string>(column_number)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:34:31.573

为了获得普遍价值 - 你应该设置一个普遍价值。

这是一个例子：

```
05/22/1978 
```

还有更多的模式。

但这是一个您可能会发现易于使用的代码：

```
if (value != null)
{
    if (value is double)
    {
        dt = DateTime.FromOADate((double)value);
    }
    else
    {
        DateTime.TryParse((string)value, out dt); //here you can try patterns of dd/mm/yyyy
    }
} 
```

# ios - 配方应用的方法

> ID：10600728
> 
> 赞同：-3
> 
> 时间：2012-05-15T12:32:46.193
> 
> 标签：ios

我打算做一个食谱应用程序。在这个应用程序中，首先将在 tableView 中显示一个类别列表，当用户选择特定类别的食谱列表时，将在另一个 tableview 中显示（我将为此使用导航控制器）。当用户选择特定配方时，另一个视图将显示详细配方（包含图像和文本）。每个食谱都有不同的文字和图像。那么我应该如何开始申请呢？我应该创建一个包含配方和类别的 sql 文件吗？如何在视图中显示或绘制不同的文本？大约有100个食谱。我有每个食谱的文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:26:49.220

苹果在[这里](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008913-Intro-DontLinkElementID_2)有一个使用核心数据的示例食谱应用程序，看看它以获得一些有用的想法。

您的数据有多种选择：

如果您的数据存储在本地并且您不需要动态更新它们，那么您有以下选择：

1 将数据存储在核心数据中。

Apple 将核心数据描述为中级技能，因此如果您还不太了解它们，我不确定您是否想学习全部内容。

2 存储在数据库文件中。

您最好的选择是 sqlite 数据库。你可以用谷歌搜索大量的例子。

3 使用属性列表。

财产清单可能是最简单的清单。但是，我不知道一个 plist 通常应该处理多少数据，您可能想对其进行一些研究，看看这是否符合您的需要。

4 您也可以尝试使用文本文件或字符串文件。

我以前没有使用过文本文件，但我认为这是可能的。如果您的应用程序支持多种语言，最好使用字符串文件。用苹果的话来说，国际化的应用程序。

如果您想从服务器获取食谱以便随时更新它们，您将需要使用 Web 服务调用或使用嵌入式 uiwebview 控件来显示网页的内容。如果是这样，我可以多谈。当然，您也可以在使用上述选项之一从 Web 服务获取配方后存储配方。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:37:07.440

我的建议是使用核心数据，因为数据集不是很大。您概述的场景非常简单。UITableViewController 委托方法将很好地满足您的目的。

[Apple 关于 tableviews 的文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html) 非常有帮助。如果您有任何进一步的疑问，请发表评论并让我知道。

# programming-languages - 为什么我们用上下文无关语言编写程序？为了图灵完备，程序不应该是递归可枚举的语言吗？

> ID：10600732
> 
> 赞同：3
> 
> 时间：2012-05-15T12:33:02.277
> 
> 标签：programming-languages, computer-science, computation-theory, formal-languages

如果我们主要使用上下文无关语言进行编码，我真的无法理解如何模拟图灵机（它接受递归可枚举语言）的输出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T12:38:41.400

您将程序的规范与其输出混淆了。

例如，可以接受递归可枚举语言的图灵机仍然由有限转换函数或“规则表”指定。规则表本身可以用常规语言表示。

再说一次，只有现代编程语言的基本语法完全由上下文无关语法定义。一个有效的程序必须满足许多语法无法捕获的条件：标识符必须在使用之前声明，一个函数只能定义一次，程序必须通过类型检查器，等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T12:39:56.147

“大部分没有上下文”没有意义，就像“有点怀孕”没有意义一样。该属性要么存在，要么不存在，对于我曾经使用过的任何编程语言，它都不存在。

但这不是您可以在其中编写任意算法的原因。一种语言的源代码语法可能会或可能不会被特定的语法描述，但重要的是输入/输出行为。例如，打印 A^iB^iC^i 形式的字符串的程序可以用 Pascal 编写，即使这些字符串不构成上下文无关语言。但这可能的原因不是 Pascal 语法比上下文无关（尽管这是真的），而是 Pascal 中构造的语义（最终，程序将在其上运行的冯诺依曼机器的概念）。

# php - 将日期数组转换为日期范围

> ID：10600739
> 
> 赞同：-3
> 
> 时间：2012-05-15T12:33:30.463
> 
> 标签：php

我有一系列日期：从和到'sie：

```
array(
    [0] => array('from' => '19-01-2000' 'to' => '20-01-2000')
    [1] => array('from' => '20-01-2000' 'to' => '21-01-2000')
    [2] => array('from' => '21-01-2000' 'to' => '22-01-2000')
    [3] => array('from' => '23-01-2000' 'to' => '24-01-2000')
    [4] => array('from' => '24-01-2000' 'to' => '25-01-2000')
) 
```

我正在尝试找到一种方法来转换创建一个只有日期范围的新数组，即：

```
array(
    [0] => array('from' => '19-01-2000' 'to' => '22-01-2000')
    [1] => array('from' => '23-01-2000' 'to' => '25-01-2000')
) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:27:19.110

我已经通过以下方式解决了它。

```
 $new_array = array();
    $j = 0;
    $i = 0;
    $flag = true;
    $range = false;
    while ($flag) {
        if ($array[$j+1] == null) {
            $flag = false;
        }
        if ($array[$j]['date_to'] == $array[$j+1]['date_from']) {
            if (!$range) {
                $new_array[$i] = $array[$j];
                $j++;
                $range = true;
            }
            else {
                $j++;
            }
        }
        else {
            if (!$range) {
                $new_array[$i] = $array[$j];
            }
            else {
                $new_array[$i]['date_to'] = $array[$j]['date_to'];
                $range = false; 
            }
            $i++;
            $j++;
        }
    } 
```

$new_array 现在只包含日期范围。

# python - Python - 加载文件 - 字典

> ID：10600746
> 
> 赞同：0
> 
> 时间：2012-05-15T12:33:46.800
> 
> 标签：python, class, function, dictionary

我正在尝试编写一个函数，它将我的文本文件变成带有子集的字典。到目前为止我加载的文本文档显示如下：

```
101
102
103
201, John Cleese, 5/5/12, 5/7/12
202
203, Eric Idle, 7/5/12, 8/7/12
301
302
303 
```

该函数的结果应该加载信息并将其返回为：

```
[('101', None), ('102', None), ('103', None),
('201', Guest(John Cleese, 05/05/12, 05/07/12)), ('202', None),
('203', Guest(Eric Idle, 07/05/12, 08/07/12)), ('301', None),
('302', None), ('303', None)] 
```

我一直在尝试 isdigit 但无济于事。我设法让最后一个房间（303）几乎可以正常工作。

```
def load_rooms(self, filename):
    fd = open(filename, 'rU')
    self._rooms = {}
    for i in fd:
        i = i.rstrip()
        print i

    if i.isdigit():
        self._rooms[i] = None
        print self._rooms
    else:
        print i 
```

显示

```
101
102
103
201, John Cleese, 5/5/12, 5/7/12
202
203, Eric Idle, 7/5/12, 8/7/12
301
302
303
{'303': None} 
```

哦，哇，我刚刚注意到房间 303 显示了两次......我的问题是，我将如何加载文本文件？我是否必须确保所有代码都采用格式，或者我可以只编写一个函数将其转换为带有子集的字典吗？我对字典很陌生，所以一点帮助会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:39:07.063

```
import re

class Guest(object):
  ...

data = []
with open('data.txt') as f:
  for line in f:
    tok = re.split(r'\s*,\s*', line.strip())
    if len(tok) > 1:
      guest = Guest(tok[1], tok[2], tok[3])
    else:
      guest = None
    data.append((tok[0], guest))

print(data) 
```

实现`Guest`类留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:39:03.977

我不确定您是否需要该`re`模块

尝试这个

```
def load_file( filename ):
    text = open( "data.txt" ).readlines()
    rooms = {}
    for line in text:
        room_data = line.strip( '\n' ).split( ',' )
        if len( room_data ) > 1:
            #rooms[room_data[0]] = room_data[1:]
            rooms[room_data[0]] = tuple( room_data[1:] )
        else:
            rooms[room_data[0]] = None

    return rooms 
```

您在标题中提到了字典，但您的预期结果是嵌套列表。

***编辑***

回答了吗？

# java - Java Switch 和 Or 语句

> ID：10600748
> 
> 赞同：3
> 
> 时间：2012-05-15T12:33:49.637
> 
> 标签：java

> **可能重复：**
> [我可以在 Java 开关中使用 OR 语句吗？](https://stackoverflow.com/questions/9566263/can-i-use-or-statements-in-java-switches)

我有一个 switch 语句。有没有办法在 switch 中做一个 or 语句。IE

```
switch(val){

case 1
//Do Stuff
break;

case 2
//Do Stuff
break;

case 3
//Do Stuff
break
} 
```

而是做类似的事情

```
switch(val){

case 1 or 3
//Do Stuff
break;

case 2
//Do Stuff
break;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T12:35:29.483

是的，试试这个：

```
switch(val){

    case 1: case 3:
        //Do Stuff
        break;

    case 2:
        //Do Stuff
        break;

    default:
        //Do Stuff
        break;

} 
```

永远记住也要包括默认情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:35:43.087

```
switch(val) {

case 1:
case 3:
  //Do Stuff
  break;

case 2
  //Do Stuff
  break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:36:06.487

是的：

```
switch(val){
    case 1:
    case 2:
       //Do Stuff
       break;
    case 3:
       //Do Stuff
       break;
    default:
       break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:36:52.790

```
switch(val) {

case 1:    
case 2:
   //Do Stuff
   break;       
case 3:
   //Do Stuff
   break;
} 
```

# java - Spring Web Flow：为 JUnit 测试设置请求参数

> ID：10600749
> 
> 赞同：3
> 
> 时间：2012-05-15T12:33:51.823
> 
> 标签：java, spring, mocking, junit4, spring-webflow-2

## 介绍

我有一个 Java/Tomcat/Spring 2.5/Spring Webflow 2.0.9 Web 应用程序。为了测试一些页面，我创建了 JUnit 测试，它为表单对象设置值并模拟来自浏览器的请求。JUnit 测试类看起来像这样：

```
@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class })
@ContextConfiguration(locations = { "classpath:/WebTests-context.xml", "classpath:/messageSourceConfig.xml" })
@RunWith(SpringJUnit4ClassRunner.class)

public class InitechValidatorTests {

    protected MockHttpSession session;
    protected MockHttpServletRequest request;

    //test methods omitted

    protected void startSession() {
        session = new MockHttpSession();
    }

    protected void endSession() {
        session.clearAttributes();
        session = null;
    }

    protected void startRequest() {
        request = new MockHttpServletRequest();
        request.setSession(session);
        RequestContextHolder.setRequestAttributes(new ServletRequestAttributes(request));

        MockRequestContext mrc = new MockRequestContext();
        org.springframework.webflow.execution.RequestContextHolder.setRequestContext(mrc);

        MessageContext messageContext = org.springframework.webflow.execution.RequestContextHolder.getRequestContext()
                .getMessageContext();
        this.validationContext.setMessageContext(messageContext);
    }

    protected void endRequest() {
        ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).requestCompleted();
        RequestContextHolder.resetRequestAttributes();
        request = null;

        org.springframework.webflow.execution.RequestContextHolder.setRequestContext(null);
    }
} 
```

对于每个测试方法，我调用 startRequest 和 endRequest 方法（在第一个测试方法之前调用 startSession，在最后一个测试方法之后调用 endSession）。如果没有这个构造，我将无法在我正在测试的代码中使用例如 RequestContextHolder。

## 问题

在要测试的类中，我从 Web 流中读取请求参数的内容，如下所示：

```
RequestContext requestContext = RequestContextHolder.getRequestContext();
ExternalContext externalContext = requestContext.getExternalContext();
String printPressed = externalContext.getRequestParameterMap().get("printPressed"); 
```

我需要在我的 JUnit 测试方法中设置“printPressed”请求参数，如下所示：

```
org.springframework.webflow.execution.RequestContext requestContext = org.springframework.webflow.execution.RequestContextHolder
                    .getRequestContext();
ExternalContext externalContext = requestContext.getExternalContext();
Map requestParamMap = externalContext.getRequestParameterMap().asMap();
requestParamMap.put("printPressed", "true"); 
```

然而，这是不可能的，因为映射是不可变的并且会导致 UnsupportedOperationException。

问题是：如何在[org.springframework.webflow.context.ExternalContext](http://static.springsource.org/spring-webflow/docs/2.0.9.RELEASE/javadoc-api/org/springframework/webflow/context/ExternalContext.html)类中为 requestParameterMap 设置请求参数？[getRequestParameterMap](http://static.springsource.org/spring-webflow/docs/2.0.9.RELEASE/javadoc-api/org/springframework/webflow/context/ExternalContext.html#getRequestParameterMap%28%29)返回的参数映射是不可变的，所以我不能在那里添加参数。我注意到有一个对象[MockParameterMap](http://static.springsource.org/spring-webflow/docs/2.0.9.RELEASE/javadoc-api/org/springframework/webflow/test/MockParameterMap.html)，这听起来很有希望：*“允许参数突变的参数映射的扩展。可用作测试的存根。”*

**如何将 MockParameterMap 注入测试类中的 ExternalContext？还是有其他方法可以设置单元测试的请求参数？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:42:56.010

通过修改 startRequest 方法解决了这个问题，因此我将[MockParameterMap](http://static.springsource.org/spring-webflow/docs/2.0.9.RELEASE/javadoc-api/org/springframework/webflow/test/MockParameterMap.html)设置为一个新的[MockExternalContext](http://static.springsource.org/spring-webflow/docs/2.0.x/javadoc-api/index.html)对象，该对象设置为[MockRequestContext](http://static.springsource.org/spring-webflow/docs/2.0.x/javadoc-api/org/springframework/webflow/test/MockRequestContext.html)如下：

```
MockParameterMap mpp = new MockParameterMap();
MockExternalContext mec = new MockExternalContext(mpp);
mrc.setExternalContext(mec); 
```

然后在 JUnit 测试方法中我可以设置如下参数：

```
org.springframework.webflow.execution.RequestContext requestContext = org.springframework.webflow.execution.RequestContextHolder
                    .getRequestContext();
ExternalContext externalContext = requestContext.getExternalContext();
MockParameterMap requestParameterMap = (MockParameterMap) externalContext.getRequestParameterMap();
requestParameterMap.put("printPressed", "true"); 
```

# android - 是否可以在 WebView 中使用可绘制对象（不是图像）？

> ID：10600751
> 
> 赞同：3
> 
> 时间：2012-05-15T12:34:05.937
> 
> 标签：android, html, webview

> **可能重复：**
> [@Android 在 WebView 中显示 /res/viewable](https://stackoverflow.com/questions/2630829/android-display-res-viewable-in-webview)

`img`是否可以在 WebView（内部标签）中使用可绘制对象（形状、渐变等）？

PS我读过[这个答案](https://stackoverflow.com/questions/1792604/html-imagegetter)。所以，我知道如何插入图像，但是其他可绘制对象呢？

**编辑**

例如：我需要在 WebView 中显示圆圈（不使用画布）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:36:13.850

您可以直接在 <IMG...> 标记的 URL 中插入 Base64 编码的图像数据。URL 格式为“data: *mimetype* ;base64, *data* ”。例如看[这里](https://github.com/ldo/ti5x_android/blob/master/mlsrc/help11.html)。

# jquery - 带有数据数组/数据分组的 Jquery 表

> ID：10600755
> 
> 赞同：0
> 
> 时间：2012-05-15T12:34:23.613
> 
> 标签：jquery, tabular

我想显示一个数据表，但具有如下图所示的层次结构：

![在此处输入图像描述](../Images/485e871710380a2df114b9967aa1bebf.png)

我搜索了很多 jQuery 表，但似乎没有一个有这种类型的表。

是否有任何 jQuery/Javascript 表可以用来完成此操作？

任何人？

# wordpress - wordpress 按 id 删除用户

> ID：10600766
> 
> 赞同：0
> 
> 时间：2012-05-15T12:34:44.803
> 
> 标签：wordpress

我目前正在尝试允许 wordpress uer 从数据库中删除自己的条目。

目前我有一个表单，提交时会抛出一个 js 警报，确认他们希望继续。一旦他们点击确定，他们就会被引导到一个带有以下代码的页面：

```
<?php $user_id = $current_user->ID ;  wp_delete_user($user_id) ; ?> 
```

您现在将被重定向到主页。

">

由于某种原因，这不起作用。有什么想法吗？没有错误被抛出，并且元刷新正常进行。

任何帮助将不胜感激，

干杯丹尼奥

编辑：刚刚注意到元刷新没有显示，但应该位于消息“您现在将被重定向到主页”下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:23:39.663

我相信 WP 功能受到与管理区域相同的权限限制。也就是说，我认为*任何人都*不能删除一个帐户（甚至是他们自己的）。*事实上，如果您是*管理员，我什至不确定您是否*可以*删除自己的帐户。

 *[这个人](http://plugins.svn.wordpress.org/user-self-delete/trunk/user_self_delete.php)通过运行 SQL 查询解决了这个问题，这应该可以工作，但可能会有点混乱。据我所知，这个插件将从“用户”表中删除用户，但不会删除用户的任何帖子。根据您要如何处理此问题，根据此自定义构建您自己的解决方案。*

# jquery - 如何显示从捕获中抛出的异常，从公共静态 Web 方法

> ID：10600774
> 
> 赞同：1
> 
> 时间：2012-05-15T12:35:09.477
> 
> 标签：jquery, asp.net, exception, exception-handling, webmethod

我正在使用 jQuery .Ajax 从我的代码隐藏中调用一个方法，该方法必须是一个公共静态方法。因此，我无法访问我的任何页面控件，除非它们也被声明为公共静态并且我不希望我的任何变量或任何以这种方式声明的东西。如果我在 WebMethod 中返回一个列表，我可以在 catch 中做些什么来让错误气泡回到客户端页面？我可以看到能够以我想要的方式执行此操作的唯一方法是 WebMethod 返回字符串而不是列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:56:20.233

为什么不直接抛出异常？[这是一篇关于如何使用 jQuery 捕获和解析 WebMethod 异常的好文章](http://encosia.com/use-jquery-to-catch-and-display-aspnet-ajax-service-errors/)。

# c# - 计算系数以获得正常速度动画

> ID：10600775
> 
> 赞同：1
> 
> 时间：2012-05-15T12:35:09.790
> 
> 标签：c#, .net, wpf

我使用一些 WPF 动画来垂直移动 UserControl。

这是代码

```
public void RestartAnimation(double contentControlHeight, double thisHeight)
        {
            if (cp != null && IsLoaded)
                da.From = contentControlHeight;  
                da.To = -thisHeight;
                da.RepeatBehavior = RepeatBehavior.Forever;
                da.Duration = new Duration(TimeSpan.FromSeconds(this.Duration)); 
                sb.Children.Clear();
                sb.Children.Add(da);
                Storyboard.SetTargetProperty(da, new PropertyPath("(Canvas.Top)"));
                Storyboard.SetTarget(da, cp);
                sb.Begin();           
            }
        } 
```

**它工作得很好，但我发现如果高度更大，那么运动就会更快。**

所以我需要意识到两件事：

一些速度范围值，即 1-100（非常慢 - 超快），在内部我需要一些**公式/系数**来做到这一点。

我用静态速度和*不同的高度*做了一些实验，得到了一些桌子。

![在此处输入图像描述](../Images/50a5f89d2b83bcd36c4d0055bd122eed.png)

请帮我弄清楚**我必须做哪些计算才能设置速度范围（1-100），它应该可以正常工作，无论** `StackPanel` **高度**。

谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:49:53.450

我不确定您是否应该对比率（StackPanel Height / ContentControl Height）感兴趣，而只是对*差异*（StackPanel Height - ContentControl Height）感兴趣。

假设您希望您的速度为每秒 30 像素（实际上相当慢，但只是从上面的“速度”值开始）。您可能有兴趣根据以每秒 30 个像素的速率覆盖像素距离（高度差）所需的秒数来设置持续时间。

所以你只需要：

```
var duration = TimeSpan.FromSeconds((thisHeight - contentControlHeight) / pixelPerSecondSpeed); 
```

这就是你如何让速度保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:41:04.233

您需要标准化动画的持续时间。因此，假设堆栈面板高度与内容控件高度的比率为`0.5`，持续`N`秒数被认为是“正常速度”（您应该决定`N`此时是什么）。

所以现在假设有一些`R`不同的比率`0.5`，我们想找出动画持续时间应该是多少。这很容易：

```
var duration = TimeSpan.FromSeconds(N * R / 0.5); 
```

假设您也想使用标准化的持续时间比例。假设在这个线性刻度上，100 对应于“正常”速度；假设数字越小，动画*越快*，所以 1 是“几乎瞬间”，而 200 是“正常速度的一半”。我们称之为标准化的持续时间`norm`。然后你会有：

```
var absoluteDuration = TimeSpan.FromSeconds(N * R / 0.5);
var normalizedDuration = absoluteDuration.Seconds * norm / 100; 
```

# go - 我如何才能找到我的包裹？

> ID：10600776
> 
> 赞同：15
> 
> 时间：2012-05-15T12:35:15.973
> 
> 标签：go

我应该把我的包放在哪里，以便它可以被另一个包导入？

```
$ tree
.
├── main.go
└── src
    └── test.go

1 directory, 2 files

$ cat src/test.go 
package test

$ cat main.go 
package main

import "test"

$ go build main.go 
main.go:3:8: import "test": cannot find package 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T13:06:45.070

设置你的 GOPATH。将您的包 foo 源代码放入 GOPATH/src/optional-whatever/foo/*.go 并在代码中使用它

```
import "optional-whatever/foo" 
```

您*不需要*显式安装 foo，go 工具是一个构建工具，它会在必要时自动为您完成。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T12:45:47.067

有几件事需要发生。您必须先安装“测试”包：

```
$ export GOPATH=$(pwd)   # Assumes a bourne shell (not csh)
$ mkdir src/test
$ mv src/test.go src/test/test.go
$ mkdir pkg                 # go install will put packages here
$ go install test           # build the package and put it in $GOPATH/pkg
$ go build main.go 
```

请注意，没有必要创建 pkg，因为`go install`会为您创建。一旦你安装了测试包（通常是一个坏名字，顺便说一句）`go build main.go`现在应该给出不同的错误（例如，“导入和未使用”）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-16T04:03:01.660

或许，你可以把 test.go 文件和 main.go 放在同一目录下，在 test.go 中，它使用这样的东西：</p>

```
import "./test" 
```

# eclipse - 禁用 JFace WizardPage 上的窗口调整大小

> ID：10600777
> 
> 赞同：0
> 
> 时间：2012-05-15T12:35:25.583
> 
> 标签：eclipse, eclipse-plugin, swt, jface

我想禁用按钮最大化/最小化，下面我发布图片来解释

![在此处输入图像描述](../Images/b238a2cc47aaf992e57773a04bfd95d5.png)

这是我的代码：

```
public class ProjectWizardPageOne extends WizardPage {

private String platform;

public ProjectWizardPageOne(String title) {
    super(title);
    this.setTitle(title);
    this.setMessage("Configure Project Name and Location");
}

@Override
public void createControl(Composite parent) {
    Composite container = new Composite(parent,SWT.NONE);
    setPageComplete(false);
    setControl(container);

    Canvas leftPanel = new Canvas(container, SWT.NONE);
    leftPanel.setBackgroundImage(new Image(leftPanel.getDisplay(), this
            .getClass().getClassLoader()
            .getResourceAsStream("/icons/mypicture.png")));
    leftPanel.setBounds(0, 0, 183, 282);

    Composite rightContainer = new Composite(container, SWT.NONE);
    rightContainer.setBackground(new Color(null, 255, 255, 255));
    rightContainer.setBounds(181, 0, 399, 282);
}

public String getPlatform() {
    return platform;
}

public void setPlatform(String platform) {
    this.platform = platform;
}
} 
```

我试图像这样“container.getShell();”获得复合材料的外壳。但我不明白如何设置这些参数“SWT.SHELL_TRIM | SWT.TOOL”！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:13:11.510

控制`Window`/`Shell`不是 a 的责任`WizardPage`，它不能那样做。`WizardDialog`这是创建它的代码或代码的责任。事实上，不能保证 a`Wizard`和它`WizardPage`的 s 甚至会包含在 a 中`WizardDialog`；任何东西都可以实现`IWizardContainer`界面以不同的方式呈现向导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:13:01.040

在对话框的情况下，我观​​察到我需要在右上角明确指定我需要最小、最大按钮。为此，我需要在构造函数中调用以下方法：

```
setShellStyle(getShellStyle() | SWT.MAX | SWT.MIN | SWT.RESIZE); 
```

由于 Wizard 也是一个对话框，我可以调用上面的方法来重置 shellStyle 不包括 max、min 和其他按钮（见上面的代码）。默认情况下，向导可能会添加这些按钮。但我认为您可以通过在向导创建结束时调用来覆盖它。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:37:59.760

它是以编程方式启动的文件 - > 新向导还是自定义向导。如果它是自定义的，则必须创建 WizardDialog 然后将 Wizard 实例传递给它。创建 WizardDialog 时，您还将创建 Shell，您可以在没有 SWT.RESIZE 的情况下为其发送参数。对于文件-> 新建，由于对话框不是由您创建的，我认为您不能在那里控制调整大小选项。调整大小只能在 Shell 的构造函数中传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T12:11:53.770

```
public class InstallerWizard extends Wizard{
...
main()
{
WizardDialog dialog = new DisableMax(shell, new InstallerWizard());
dialog.open();
} 
```

} 公共类 DisableMax 扩展 WizardDialog {

```
 public DisableMax(Shell parentShell, IWizard newWizard) {
        super(parentShell, newWizard);
        setShellStyle(SWT.CLOSE | SWT.MIN | SWT.RESIZE | getDefaultOrientation());
    }
} 
```

# audio - DECE 通用文件格式 (UltraViolet)

> ID：10600789
> 
> 赞同：2
> 
> 时间：2012-05-15T12:36:12.570
> 
> 标签：audio, audio-streaming

我需要解析通用文件格式（DECE CFF）。有没有可用的规范？

另外，我有一些 .uvu 文件，我该如何播放。有没有可用的播放器？

我知道 CFF 基于 Fragmented MP4，但如何解析 .uvu 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:33:34.440

这是他们如何扩展 mp4 文件格式的公共规范： [http ://www.uvvuwiki.com/images/c/cb/CFFMediaFormat-1.1r1.pdf](http://www.uvvuwiki.com/images/c/cb/CFFMediaFormat-1.1r1.pdf)

此页面上还有更多内容： [http ://www.uvvu.com/uv-for-business.php](http://www.uvvu.com/uv-for-business.php)

# html - Webkit 支持三星电视浏览器上的本地存储

> ID：10600793
> 
> 赞同：3
> 
> 时间：2012-05-15T12:36:28.010
> 
> 标签：html, air, webkit, local-storage, samsung-smart-tv

我正在将基于 HTML 的应用程序移植到三星智能电视。该应用程序使用本地存储来保存首选项等。似乎支持本地存储，并且在浏览器打开时数据是持久的。但是，一旦浏览器退出......*噗！*数据不见了。会话和 cookie 等其他数据确实存在。

我在应用程序中使用了[Lawnchair 库](http://westcoastlogic.com/lawnchair/)，并且还使用[jStorage](http://www.jstorage.info/)进行了测试。除了关闭浏览器之外，它们都不会持续存在。

电视上的浏览器（或浏览器组件）是 webkit build 534.7。从玩浏览器开始，我怀疑它实际上是用 Adob​​e Air 编写的。

我还在我的 PC 上测试了 Air 浏览器组件，它是 webkit 的 build 533.19.4。这似乎根本不支持本地存储。

我 PC 上的 Chrome，构建 535.19 的 webkit，在我所有的测试中都可以正常工作。

那么，责任在哪里：是 webkit 构建、webkit 在 Adob​​e Air 中的实现，还是电视？任何人都可以提供解决方法或建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T06:56:03.990

不幸的是，我没有 2012 型号，所以我无法检查 HTML5 localStorage 是否正常工作。

但是我为您提供了一种解决方法，它也将向后兼容以前的电视机型号，因为 2010 和 2011 型号使用 Maple 浏览器：http: [//www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_3.1/API_Reference/ JavaScript_APIs/File_API](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_3.1/API_Reference/JavaScript_APIs/File_API)

1.  序列化你的数据对象
2.  使用 File API 将其保存到应用程序目录
3.  每次打开应用程序时都会打开此文件并反序列化数据。

这肯定会奏效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:00:37.370

1-您使用文件 api 2-您可以设置 cookie

我曾经试图保存我的应用程序的首选项，并且使用 cookie 似乎更容易。我对 html5 了解不多，但在电视中，您应该检查允许哪些功能。大多数智能电视都部分支持 html5。

# php - WAMP 服务器错误“禁止您无权访问此服务器上的 /phpmyadmin/。”

> ID：10600795
> 
> 赞同：30
> 
> 时间：2012-05-15T12:36:34.343
> 
> 标签：php, wamp

嗨，朋友们，我以前使用的是 XAMP 服务器，但是当我安装 joomla 模板时，它会产生很多错误。现在我安装了 WAMP，但问题是： 1\. 我可以使用 127.0.0.1 访问，但我无法使用“localhost”访问。2 当我访问 phpmyadmin 时出现此错误。

Forbidden 您无权访问此服务器上的 /phpmyadmin/。

```
 Alias /phpmyadmin "c:/wamp/apps/phpmyadmin3.4.5/" 

# to give access to phpmyadmin from outside 
# replace the lines
#
#        Order Deny,Allow
#   Deny from all
#   Allow from 127.0.0.1
#
# by
#
#        Order Allow,Deny 
#   Allow from all
# 
```

> 改完之后是这个样子

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
        Allow from all
</Directory> 
```

> 在此之后只需重新启动 Wamp

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-29T01:45:11.000

去`C:\wamp\alias`。打开文件`phpmyadmin.conf`并更改

```
<Directory "c:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

到

```
<Directory "c:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Allow,Deny
    Allow from all
</Directory> 
```

问题解决了

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-12T17:21:17.147

更改 httpd.conf 文件如下：

从

```
<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

到

```
<Directory />
    AllowOverride none
    Require all granted
</Directory> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-30T15:41:08.860

所以上面的东西都不适合我。除了这个：编辑httpd.conf，

找到线

```
Listen 80 
```

并更改为

```
listen 0.0.0.0:80 
```

如果您正在运行 Windows 8，则它与使用 ipv6 而不是 ipv4 有关

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-15T12:42:20.847

转到 C:\wamp\alias。打开文件 phpmyadmin.conf 并添加

```
Options Indexes FollowSymLinks MultiViews
AllowOverride all
Order Deny,Allow
Deny from all
Allow from 127.0.0.1
Allow from MACHINE_IP 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-02-25T17:36:11.953

更改以下文件 \bin\apache\apache2.2.22\conf\httpd.conf

```
Replace Listen 80 with Listen 0.0.0.0:80 
```

代替

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory> 
```

和

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Allow from all
</Directory> 
```

代替

# onlineoffline 标签 - 不要删除

```
Order Deny,Allow
Deny from all
Allow from 127.0.0.1 
```

和

# onlineoffline 标签 - 不要删除

```
Order Deny,Allow
Allow from all
Allow from 127.0.0.1 
```

在 \wamp\alias\phpmyadmin.conf 替换

```
<Directory "c:/wamp/apps/phpmyadmin3.4.10.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

和

```
<Directory "c:/wamp/apps/phpmyadmin3.4.10.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
    Allow from ::1
</Directory> 
```

在 Windows 本地主机上测试。 **注意：**也请考虑 RigsFolly 的评论。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-24T23:53:27.197

对于带有 Apache 2.4.2 的 WampServer 2.2，我最终得到：

```
Options Indexes FollowSymLinks MultiViews
AllowOverride all
Require local 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-08T11:53:00.780

为了解决这个问题，我打开`httpd.conf`并更改了以下行：

```
Allow from 127.0.0.1 
```

到：

```
Allow from 127.0.0.1 ::1 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-10T15:45:08.610

我遇到了这个问题

```
Forbidden You don't have permission to access /phpmyadmin/ on this server 
```

关于这个的一些帮助：

首先检查您安装了新的 wamp 或更换现有的。如果它是新鲜的没有问题，对于完成现有的安装。

跟着这些步骤。

1.  打开你的 wamp\bin\mysql 目录
2.  检查此文件夹中是否有另一个名称不同的mysql文件夹，如果存在则将其删除。
3.  输入保留mysql文件夹并删除重复文件。
4.  再次启动您的 wamp 服务器。Wamp 将工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-07-15T16:36:38.843

只需在 wamp/alias/phpmyadmin.conf 中添加以下行
Allow from ::1

所以它看起来像这样取决于您的 phpmyadmin 版本。

```
<Directory "c:/wamp/apps/phpmyadmin3.5.1/">
Options Indexes FollowSymLinks MultiViews
AllowOverride all
    Order Deny,Allow
Deny from all
Allow from 127.0.0.1
Allow from ::1
</Directory> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-06T11:15:21.593

如果可能卸载 wamp，则以管理员身份运行安装，然后像这样更改 mysql.conf 文件

```
<Directory "c:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Allow,Deny
    Allow from all
    Allow from all
</Directory> 
```

不是：在我以管理员身份重新安装之前，上面的解决方案对我不起作用

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-05-23T07:30:17.007

将文件内容更改为`c:\wamp\alias\phpmyadmin.conf`以下内容。

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
        Allow from all
</Directory> 
```

这里我的 WAMP 安装在 c:\wamp 文件夹中。根据您的安装更改它。

以前，它是这样的：

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

进行这些更改后重新启动 Apache 服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-21T07:02:33.533

在您的 apache 配置文件中 (../bin/apachex.yz/cong/httpd.conf)

只是改变

<目录“c:/wamp/www/”> ...
...

“要求本地”===>“要求所有授予”
</Directory>

这允许其他电脑访问（读取）您的网络文件夹。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-18T06:58:58.370

我对文件中的新**phpmyadmin4.0.4**进行了以下更改`httpd.conf`

```
<Directory />
    AllowOverride none
    Require all granted
</Directory> 
```

和`phpmyadmin.conf`

```
<Directory "c:/wamp/apps/phpmyadmin4.0.4/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Allow,Deny
    Allow from all
</Directory> 
```

并重新启动我的服务器。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-07T21:24:25.330

以上答案都不适合我，或者不安全（正如一些人指出的那样，使用`Allow from all`可以使您的文件和数据可供外界访问）。

打开`c:\wamp\alias\phpmyadmin.conf`文件并更改

```
Allow from 127.0.0.1 
```

到

```
Allow from 127.0.0.1  ::1 
```

解释：

*   在大多数计算机系统上，localhost 解析为 IP 地址 127.0.0.1，这是最常用的 IPv4 环回地址，**以及 IPv6 环回地址 ::1**（来源：[https](https://en.wikipedia.org/wiki/Localhost) ://en.wikipedia.org/wiki/Localhost )
*   将名称 localhost 解析为一个或多个 IP 地址由操作系统的 hosts 文件中的以下行配置：

    ```
    127.0.0.1    localhost
    ::1          localhost 
    ```

*   要查看您的主机文件，请转到`c:\Windows\System32\drivers\etc\HOSTS`

*   注意上面的行被注释掉了：`# localhost name resolution is handled within DNS itself.`

在我的机器上，在 Win7 上，我还注意到以下内容：

*   `localhost\phpmyadmin`不能在 Chrome 上工作，但在 IE11 上工作
*   `127.0.0.1\phpmyadmin`在 Chrome 上工作

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-27T18:41:00.753

评论 需要来自 httpd.conf 的本地

“#要求本地”

# c# - 在 ASP.Net C# 中，应用程序会在站点上发生错误或触发 Application_Error 时结束

> ID：10600801
> 
> 赞同：2
> 
> 时间：2012-05-15T12:36:47.447
> 
> 标签：c#, asp.net

您好 Stackoverflow 上的聪明人，我想知道在 ASP.Net C# 中，应用程序是否会在发生错误或触发 Application_Error 时结束？根据我的理解，它不应该，我只是想加倍确定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:53:55.460

通常，如果与请求关联的线程中发生异常，它会触发 Application_Error 事件，如果未处理，则会向客户端返回 HTTP 500 错误。

但是，与请求无关的线程中未处理的异常将关闭工作进程（换句话说，杀死您的应用程序）。即使您通过 Application_Error 方法设置了处理程序，也会发生这种情况。[托管线程中的异常的 MSDN 链接以](http://msdn.microsoft.com/en-us/library/ms228965.aspx)获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:38:23.547

如果您不处理异常，很可能会将您带到 HTTP 500 错误页面。

应用程序本身不会“结束”，因为它是一个 Web 应用程序。任何重新进入该网站都可能会开始一个新的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:39:02.367

不，不会的。Application_End 与托管 IIS 进程 (w3wp.exe) 正常终止一起触发。正常终止的最可能原因是 IIS 像定期间隔那样回收进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:42:55.420

不，当发生未处理的异常时，不会触发 application_end 事件。Application_Error 将被触发。

通常，Application_End 在应用程序池被回收或重新启动 IIS 时触发。

# php - 密码验证不登录只是重新加载登录页面

> ID：10600802
> 
> 赞同：1
> 
> 时间：2012-05-15T12:36:49.293
> 
> 标签：php, mysql, login

我在这里扯掉我的菜鸟头发。无法理解为什么下面的代码不起作用。页面加载正常，但是当我尝试使用数据库中的用户名和密码登录时，页面只是使用登录表单重新加载到其原始状态，而我实际上希望看到一个注销按钮。我还尝试将没有盐和散列的密码与数据库中未散列的、未加盐的等效项进行比较。不工作。

我得到的唯一警告是**“依赖系统的时区设置是不安全的”。**，而且我认为这些与密码验证功能没有任何关系。

页面开始是这样的：

```
session_start();

error_reporting(-1); ini_set('display_errors', 'On'); 
```

然后是一些 HTML。然后：

```
if (isset($_POST['log_out'])) {
    session_unset();
    session_destroy();
    $_SESSION = array();
} 
```

注销按钮在按下时设置为`$_POST['log_out']`。然后是我从书中得到的一个函数，用于防止 SQL 注入：

```
function mysql_fix_string($string) {
    if (get_magic_quotes_gpc()) $string = stripslashes($string);
    $string = htmlspecialchars($string, ENT_QUOTES);
    $string = mysql_real_escape_string($string);
    return $string;
} 
```

然后是密码验证部分，它应该只在用户提交登录表单时运行（它回发到同一页面，因此设置`$_POST['username']`and `$_POST['password']`）：

```
if (isset($_POST['username']) && isset($_POST['password'])) {

    $salt1 = 'how';
    $salt2 = 'pony';
    $password = md5($salt1 . $_POST['password'] . $salt2);

    $db_hostname = 'xxxxxxxxx';
    $db_username = 'xxxxxxxxx';
    $db_password = 'xxxxxxxxx';
    $db_database = 'xxxxxxxxx';

    $db_server = mysql_connect($db_hostname, $db_username, $db_password);

    if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

    mysql_select_db($db_database)
        or die("Unable to select database: " . mysql_error());

    $username = mysql_fix_string($_POST['username']);

    $query = "SELECT password FROM users WHERE name = '" . $username . "'";

    $result = mysql_fetch_assoc($query);
    $passwordindatabase = $result['password'];

    if ($password == $passwordindatabase) {
        $_SESSION['logged_in'] = true;
        $_SESSION['user'] = $username;
        unset($_POST['username']);
        unset($_POST['password']);
    }

} 
```

再往下一点是登录表单，仅显示`if ($_SESSION['logged_in'] != true)`。它将输入字段的值发布`username`到`password`（`$_SERVER['REQUEST_URI']`同一页面）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:05:52.040

在我看来，您缺少[mysql_query()](http://php.net/manual/en/function.mysql-query.php)函数，这意味着您实际上并未执行查询。

> mysql_query — 发送 MySQL 查询

执行以下操作，看看它是否有效：

```
$result = mysql_query($query);

$passwordindatabase = mysql_fetch_assoc($result); 
```

**编辑**
在一个完全不同的注释上，您不应该使用 mysql 函数，因为它们非常老式并且具有 mysql_injection 漏洞。我建议你尽快开始使用 PDO，它（如果做得好）没有 mysql_injection 漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:48:29.467

要使用基于 cookie 的会话，`session_start()`必须在向浏览器输出任何内容之前调用。

但是，时区警告是之前发送的。

`php.ini`在文件中设置时区。

编辑..不仅是这个问题。您必须`mysql_query()`在 sql 请求之前使用函数`mysql_fetch_assoc()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:55:14.777

关于您显示的代码的唯一“气味”是：

```
if ($password == $passwordindatabase) { 
```

我更喜欢看到这样的东西：

```
if (strcmp($password, $passwordindatabase) == 0) { 
```

我们还需要查看您实际将值插入`users`表中的代码，因为很明显`$password`并且`$passwordindatabase`不匹配。

# c# - 从多个对象中获取最大值、最小值、平均值的最快和最简单的方法

> ID：10600806
> 
> 赞同：3
> 
> 时间：2012-05-15T12:37:01.287
> 
> 标签：c#, list, observablecollection

我需要找到具有自己的统计信息（ResultGroup 类统计信息，基于所有结果统计信息）的对象列表的最大值、最小值和平均值（统计信息）值。当我添加对象时，值很容易更新，但如果我更改或删除其中一个，那么我需要再次查找统计信息。通常会有超过 40.000 个项目，我需要它来快速操作。

有没有比遍历所有项目更好的方法？

```
public class ResultGroup
{
    private Stats resultStats;
    //I need an updated stats
    public Stats ResultStats
    {
        get { return resultStats; }
    }
    private readonly ObservableCollection<Result> results = new ObservableCollection<Result>();

    public ObservableCollection<Result> Results
    {
        get
        {
            return results;
        }
    }
    public ResultGroup()
    {
        this.resultStats = new Stats();
        this.results.CollectionChanged += new NotifyCollectionChangedEventHandler(CollectionChanged);
    }

    private void CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            //It works ok on add.
            Stats lastResultStat = this.results[this.results.Count - 1].Stat;
            if (resultStats.Max < lastResultStat.Max)
                resultStats.Max = lastResultStat.Max;

            if (resultStats.Min > lastResultStat.Min)
                resultStats.Min = lastResultStat.Min;

            resultStats.Mean = (resultStats.Mean * (this.results.Count - 1) + lastResultStat.Mean) / this.results.Count;
        }
        else if (e.Action == NotifyCollectionChangedAction.Reset)
        {
            this.resultStats = StatsFactory();
        }
        else if (e.Action == NotifyCollectionChangedAction.Remove)
        {
            //Need to find the stats here
        }
        else if (e.Action == NotifyCollectionChangedAction.Replace)
        {
            //Need to find the stats here
        }
    }

    private Stats StatsFactory()
    {
        Stats dataStats = new Stats();
        dataStats.Max = float.MinValue;
        dataStats.Min = float.MaxValue;
        dataStats.Mean = 0;
        return dataStats;
    }
}

public class Result
{
    private float[] data;

    //Another class will fill data and set the Stats (max, min, mean)
    public float[] Data
    {
        get { return data; }
    }

    public Result(int lenght)
    {
        this.data = new float[lenght];
    }

    private Stats stat;
    public Stats Stat
    {
        get { return stat; }
        set { stat = value; }
    }
}

public class Stats
{
    public float Max { get; set; }
    public float Min { get; set; }
    public float Mean { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:59:24.583

当移除一个项目时，你只需要遍历所有项目，当移除的项目等于当前的最小值/最大值时。

当替换一个项目时，你只需要遍历所有项目，当删除的项目等于当前的最小值/最大值并且新的项目更大/更小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:44:33.950

我认为您可以在第一次初始化集合时缓存最大值、最小值，然后您可以将新值与缓存值进行比较。

我可以建议下一个算法：如果我有一个巨大的值列表，我会将其拆分为范围并为每个范围创建一个集合。对于每个集合，我都会有一个缓存的平均值，当集合发生变化时会重新计算该平均值。当我添加新值（或更改）时，我会看到元素的统计信息并找到具有所需范围的集合。在这种情况下，我们得到一个统计数据作为附加索引，我们必须仅在某些集合（第一个，最后一个）中找到最大值和最小值。我们可以从所有集合的平均值中得到的平均值。Max, Min 值我们也可以缓存在第一个和最后一个集合中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:45:25.377

您是否尝试过为此使用数据库？

因为数据库有索引可以提供帮助。还可以查看 KDB 或 SAP 的 HANA，它具有基于垂直/列的数据库，可以在几毫秒内渗透数百万行。

也许像 SqlLite 这样的基于文件的简单数据库会有所帮助。（如果您正在处理大量数据，这也应该有助于减少内存使用）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T12:42:17.317

您是否尝试过在 CollectionChanged 中使用诸如 Min、Max 和 Average 之类的 LINQ 运算符？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T13:31:05.260

//最好有一个自定义集合，其中包含集合内所需的属性，然后在集合顶部使用 linq 来存储聚合值...

```
 public class ObserCol: ObservableCollection<int>
{

    private int _maxValue = 0;

    public ObserCol() { 
        base.CollectionChanged +=new NotifyCollectionChangedEventHandler(CollectionChanged);
    }

    public int MaxValue{
        get {
            return _maxValue;
        }
    }

    private void CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            //Can use Linq to get the Max or Other Aggregate values..
        }
        else if (e.Action == NotifyCollectionChangedAction.Reset)
        {

        }
        else if (e.Action == NotifyCollectionChangedAction.Remove)
        {

        }
        else if (e.Action == NotifyCollectionChangedAction.Replace)
        {

        }
    }
} 
```

# python - 读取 __slots__ 的内置函数

> ID：10600813
> 
> 赞同：0
> 
> 时间：2012-05-15T12:37:19.467
> 
> 标签：python, descriptor

假设我有这样的课程：

```
class Test(object):
    prop = property(lambda self: "property") 
```

每当我尝试访问时，描述符优先`Test().prop`。所以那将返回`'property'`。如果我想访问对象的实例存储，我可以这样做：

```
x = Test()
x.__dict__["prop"] = 12
print(x.__dict__["prop"]) 
```

但是，如果我将课程更改为：

```
class Test(object):
    __slots__ = ("prop",)
    prop = property(lambda self: "property") 
```

由于不再存在，我该如何做同样的事情，并访问 的内部存储`x`、写入`12`和读取它？`x.__dict__`

我对 Python 很陌生，但我理解 Python 的理念是提供完全控制，那么为什么实现细节阻止我这样做呢？

Python是否缺少可以从实例内部存储中读取的内置函数，例如：

```
instance_vars(x)["prop"] = 12
print(instance_vars(x)["prop"]) 
```

这会像`vars`, 除了它也适用于, 和没有?`__slots__`的内置类型`__dict__`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:30:45.010

简短的回答，**你不能**

问题是插槽本身是根据描述符实现的。鉴于：

```
class Test(object):
    __slots__ = ("prop",)

t = Test() 
```

词组：

```
t.prop 
```

大致翻译为：

```
Test.prop.__get__(t, Test) 
```

where`Test.prop`是`<type 'member_descriptor'>`由运行时专门设计的，用于从实例的保留空间中加载`prop`值。`Test`

如果您在类主体定义中添加另一个描述符，它会掩盖`member_descriptor`可以让您访问 slotted 属性的描述符；没有办法要求它，它不再存在了。这实际上就像在说：

```
class Test(object):
    @property
    def prop(self):
        return self.__dict__['prop']

    @property
    def prop(self):
        return "property" 
```

你已经定义了两次。没有办法“理解”第一个`prop`定义。

* * *

但：

长答案，**你不能*以一般的方式。***你可以

您仍然可以滥用 python 类型系统来使用另一个类定义来解决它。您可以更改 python 对象的类型，只要它具有完全相同的类布局，这大致意味着它具有所有相同的插槽：

```
>>> class Test1(object):
...     __slots__ = ["prop"]
...     prop = property(lambda self: "property")
... 
>>> class Test2(object):
...     __slots__ = ["prop"]
... 
>>> t = Test1()
>>> t.prop
'property'
>>> t.__class__ = Test2
>>> t.prop = 5
>>> t.prop
5
>>> t.__class__ = Test1
>>> t.prop
'property' 
```

但是没有通用的方法来内省一个实例来计算它的类布局。你只需要从上下文中知道。您可以查看它的`__slots__`类属性，但这不会告诉您超类中提供的插槽（如果有的话），也不会在定义类后该属性因某种原因*发生更改时给您任何提示。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:00:07.627

我不太明白你想做什么以及为什么要这样做，但这对你有帮助吗？

```
>>> class Test(object):
    __slots__ = ("prop",)
    prop = property(lambda self: "property")

>>> a = Test()
>>> b = Test()
>>> a.prop
'property'
>>> tmp = Test.prop
>>> Test.prop = 23
>>> a.prop
23
>>> Test.prop = tmp; del tmp
>>> b.prop
'property' 
```

当然，您不能在每个实例的基础上覆盖该属性，这就是开槽描述符的全部意义所在。

请注意，具有`__slots__`do 的类的子类具有 a `__dict__`，除非您手动定义`__slots__`，因此您可以这样做：

```
>>> class Test2(Test):pass

>>> t = Test2()
>>> t.prop
'property'
>>> t.__dict__['prop'] = 5
>>> t.__dict__['prop']
5
>>> Test2.prop
<property object at 0x00000000032C4278> 
```

但仍然：

```
>>> t.prop
'property' 
```

这不是因为`__slots__`，而是描述符的工作方式。

你`__dict__`在属性查找中被绕过了，你​​只是在滥用它作为恰好用于存储状态的数据结构。相当于这样做：

```
>>> class Test(object):
    __slots__ = ("prop", "state")
    prop = property(lambda self: "property")
    state = {"prop": prop}

>>> t.prop
'property'
>>> t.state["prop"] = 5
>>> t.state["prop"]
5
>>> t.prop
'property' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:25:30.340

如果你真的想做那样的事情，并且你真的真的需要那样的事情，你总是可以覆盖`__getattribute__`and `__setattribute__`，这同样愚蠢......这只是为了向你证明：

```
class Test(object):
    __slots__ = ("prop",)
    prop = property(lambda self: "property")
    __internal__ = {}

    def __getattribute__(self, k):
        if k == "__dict__":
            return self.__internal__
        else:
            try:
                return object.__getattribute__(self, k)
            except AttributeError, e:
                try:
                    return self.__internal__[k]
                except KeyError:
                    raise e

    def __setattribute__(self, k, v):
        self.__internal__[k] = v
        object.__setattribute__(self, k, v)

t = Test()

print t.prop

t.__dict__["prop"] = "test"
print "from dict", t.__dict__["prop"]
print "from getattr", t.prop

import traceback
# These won't work: raise AttributeError
try:
    t.prop2 = "something"
except AttributeError:
    print "see? I told you!"
    traceback.print_exc()

try:
    print t.prop2
except AttributeError:
    print "Haha! Again!"
    traceback.print_exc() 
```

（在 Python 2.7 上试过）我猜这正是你所期望的。不要这样做，没用的。

# spring-mvc - 从 FreeMarker 模板访问静态字段 (Spring)

> ID：10600817
> 
> 赞同：1
> 
> 时间：2012-05-15T12:37:33.867
> 
> 标签：spring-mvc, freemarker, templating

我想从 FreeMarker 模板访问静态属性

我有一个类说 Global 它包含静态最终字段，并且这个类不是 FreeMarker 模型的一部分。我想知道是否有办法在我的应用程序启动时将此类添加到 FreeMarker 模型并从 Freemarker 模板访问，如下所示：

```
${statics["com.ums.common.Global"].Change} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:31:40.457

尝试

```
dataModel.put("statics", ((BeansWrapper) cfg.getObjectWrapper()).getStaticModels()); 
```

`cfg`FreeMarker`Configuration`对象在哪里。然后您可以使用`statics['com.example.ClassName'].FIELD_NAME`来访问静态字段或方法。你也可以使用类似的东西

```
dataModel.put("globals", ((BeansWrapper) cfg.getObjectWrapper()).getStaticModels().get("com.ums.common.Global")); 
```

如果您只想公开该类的常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T08:37:42.407

您可以创建 Spring 配置类来配置 Freemarker 并使用 Freemarker`configuration.setSharedVariables()`方法来启用从任何​​模板访问静态方法。共享变量对于放置全局属性（例如，从您的`application.yaml`文件中）也非常有用，因此它们可以从任何模板全局使用。

```
@Configuration
public class FreemarkerConfig implements BeanPostProcessor {

    @Value("${email.from-address}")         // e.g. from `application.yaml`
    private String emailFromAddress;

    @SneakyThrows         // or use try / catch (if not using lombok)
    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        if (bean instanceof FreeMarkerConfigurer) {
            FreeMarkerConfigurer configurer = (FreeMarkerConfigurer) bean;
            freemarker.template.Configuration configuration = configurer.getConfiguration();
            BeansWrapper objectWrapper = (BeansWrapper) configuration.getObjectWrapper();
            configuration.setSharedVariables(getSharedVariables(objectWrapper));
        }
        return bean;
    }

    private Map<String, ?> getSharedVariables(BeansWrapper config) {
        Map<String, Object> sharedVariables = new HashMap<>();

        // Add global variables
        sharedVariables.put("emailFromAddress", emailFromAddress);

        // Add static support
        TemplateModel statics = config.getStaticModels();
        sharedVariables.put("statics", statics);
        return sharedVariables;
    }

} 
```

设置好配置后，您可以在任何模板（例如`${emailFromAddress}`）中添加对共享变量的访问权限。

要访问静态方法，首先需要链接包含静态方法的类。例如，如果您想对 2 个对象进行更定制的比较，您可能拥有：-

```
public class FreemarkerUtils {

    /**
     * Compare 2 objects.  Both objects are converted to Strings first of all (empty String if null) and compared.
     */
    public static boolean isEqualTo(Object obj1, Object obj2) {
        String str1 = obj1 != null ? String.valueOf(obj1) : "";
        String str2 = obj2 != null ? String.valueOf(obj2) : "";

        return str1.equals(str2);
    }

} 
```

此静态方法必须在 freemarker 模板中按如下方式分配...

```
<#assign Util=statics['com.my.package.FreemarkerUtils']> 
```

...并按如下方式使用...

```
<#if Util.isEqualTo (obj1, obj2)> objects are equal! </#if> 
```

当 Freemarker 对您的特定用例不够强大时，从您的模板中使用这样的 Java 静态方法会很有用。

# ios - iOS 应用程序崩溃而没有任何错误消息

> ID：10600820
> 
> 赞同：1
> 
> 时间：2012-05-15T12:37:41.410
> 
> 标签：ios, crash

所以，这有点莫名其妙，我不知道该怎么办。我的应用程序在使用几分钟后随机崩溃，总是在相同的操作上（相同的模式视图被关闭）。崩溃并不总是发生，但它会发生在模拟器和真实设备上。

我试图：

*   确保我处于**调试模式**（当然，但什么也没发生）
*   启用**保护 malloc**（无）
*   **在仪器**内部运行（无）
*   直接从终端运行 iPhone 模拟器，然后将 LLDB 附加到应用程序（只不过是代码 0的经典*退出）*
*   添加**异常断点**（没什么意义）

我尝试的最后一件事是在`exit`函数上添加断点。应用程序停止，但我也没有有意义的堆栈跟踪（见下文）。

![退出时的堆栈跟踪](../Images/ca0a03cd38fc0b61849f7598355e87b7.png)

另外，我正在用 Lua 做一些非常简单的东西，所以它可能是相关的。Mac OSX 日志在这里显示了这条奇怪的行：

```
5/15/12 2:16:57.190 PM com.apple.debugserver-170.1: 1 +0.000000 sec [233b/1a03]: error: ::read ( 1, 0x10af80a60, 1024 ) => -1 err = Bad file descriptor (0x00000009) 
```

如果您对如何获得更有意义的堆栈跟踪有任何想法，例如至少获得库/模块/文件/负责`exit`调用的任何内容，这将有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:48:33.070

这有点猜测，但是您的目标的其他链接器标志中有 -weak_library /usr/lib/libSystem.B.dylib 吗？这至少会在模拟器上的各个地方导致奇怪的崩溃——cordova/phonegap 生成的应用程序包括这个标志，一些版本的 flurry 和 urbanairship 也使用它。

如果将 -weak_library /usr/lib/libSystem.B.dylib 替换为 -weak-lSystem /usr/lib/libSystem.B.dylib 并且崩溃消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:45:41.177

转到断点导航器（快捷键：cmd + 6），在左下角你会看到一个小 + 图标。单击它并选择“添加异常断点”。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:58:30.167

您可能认为这很痛苦，但也许您可以尝试将 NSLog 语句放入所有方法中？

顺便说一句，尝试将您的模态解雇延迟一两秒，以消除这是问题的一个指标。

你的应用程序还在做什么？

# scala - 使用每个 Tuple 的一个元素过滤 Tuple3 的 Seq

> ID：10600822
> 
> 赞同：3
> 
> 时间：2012-05-15T12:37:45.393
> 
> 标签：scala, tuples, seq

我有一个`Seq`元素`Tuple3`。我想要一个由每个元组的**第二个**元素组成的结果集合（可能是 a `Set`） 。

 **例如

```
(a, b, c), (d, e, f), (g, h, i) ==> (b, e, h) 
```

任何的想法？我搜索了很多，但我发现的所有内容都与过滤元组有关，而不是在它们内部，如果这有任何意义的话。

我对 Scala 还是很陌生，学习是一个漫长的过程 :) 感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:43:22.517

根据您对所需内容的描述，这是 type 的某些功能`Seq[(A, B, C)] => Set[B]`，您需要映射，而不是过滤。例如，

```
scala> Seq(('a', "foo", 1), ('b', "bar", 2)).map(_._2).toSet
res0: scala.collection.immutable.Set[java.lang.String] = Set(foo, bar) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T13:09:46.020

如果您不喜欢笨拙的元组访问器（_1、_2 等），可以在其中使用模式匹配的“部分函数文字”：

```
scala> Seq(('a', "foo", 1), ('b', "bar", 2)) map { case (_, x, _) => x } toSet
res1: scala.collection.immutable.Set[java.lang.String] = Set(foo, bar) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T12:42:51.040

`yourSeqOfTuples.map(tuple => tuple._2).toSet`, 可以缩短为`yourSeqOfTuples.map(_._2).toSet`

如果您愿意，可以使用 {} 而不是 ()。 `_2`是获取元组第二个元素的方法。**

# javascript - 文本框圆角asp.net

> ID：10600826
> 
> 赞同：1
> 
> 时间：2012-05-15T12:38:04.263
> 
> 标签：javascript, asp.net, textbox, rounding

我使用 [javascript](http://code.google.com/p/rocon/downloads/list)作为圆角，它仅在我单击文本框时才有效。如果文本框失去焦点，则文本框再次变为矩形，我错了，代码如下

```
<script src="Jquery/rounded-corners.js" type="text/javascript"></script>
 <asp:TextBox CssClass="rounded rc5 FilterCriteria" ID="txtSearch" runat="server"></asp:TextBox>
 <ajaxToolkit:FilteredTextBoxExtender ID="ftxtSearch" runat="server" TargetControlID="txtSearch" FilterType="Numbers" />
<style>
    .rounded { 
    background:white;
    white-space:nowrap;
    zoom:1;
    } 
    .rc5 {
        border-radius: 5px 5px 5px 5px;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:51:51.920

在样式表中添加这些行

```
 -moz-border-radius: 6px 6px 0 0;
 -webkit-border-radius: 6px 6px 0 0;
 border-radius: 6px 6px 0 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:52:20.063

但是你没有使用 javascript 来圆文本框的角落。您所做的只是使用border-radius 意味着您正在使用样式（CSS 3.0）来圆角文本框；您的浏览器必须与 CSS3.0 兼容

# sql - 使用 SQL 从不同表中删除行

> ID：10600827
> 
> 赞同：0
> 
> 时间：2012-05-15T12:38:06.080
> 
> 标签：sql

![这是两个表的值以及它们之间的关系](../Images/e3ef2f31687a3400e65a4836096f38da.png)

我正在尝试删除`tblProInfo,tblOrderAA`tblProInfo.proInfoScienceName='shalosh'中的所有行

这是我写的命令。我收到一条消息，它无法生成我的查询。

```
DELETE tblOrderAA.*,  tblProInfo.*
FROM tblProInfo INNER JOIN tblOrderAA ON tblProInfo.proInfoSerialNum = tblOrderAA.orderAASerialPro
WHERE (((tblProInfo.proInfoScienceName)='shalosh' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:43:48.480

```
DELETE a1,  a2
FROM tblProInfo as a1 INNER JOIN tblOrderAA as  a2
ON a1.proInfoSerialNum = a2.orderAASerialPro
WHERE a1.proInfoScienceName='shalosh' 
```

根据 msaccess，语法是正确的，但不会删除记录。访问删除查询一次不能从多个表中删除。这是访问限制。

[请参阅此处以了解有关从 MS-Access 中的多个表中删除记录的信息](http://office.microsoft.com/en-us/access-help/delete-statement-HA001231444.aspx)

如果两个表都已连接并且引用完整性设置为级联删除，那么您可以通过简单地删除链接一侧的记录来同时从两个表中删除记录。

**在 Sql Server 中：**
在单个 delete 语句中从多个表中删除行的概念在 sql server 中无法完成。在以级联样式执行删除的表上有触发器的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:41:51.330

在这一行中，您有 3 个左括号和 1 个右括号：

```
WHERE (((tblProInfo.proInfoScienceName)='shalosh' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:42:30.347

你必须分开陈述。您不能通过一个查询从两个表中删除

```
DELETE FROM tblOrderAA
WHERE tblOrderAA.orderAASerialPro IN
(
    SELECT orderAASerialPro 
    FROM tblProInfo WHERE tblProInfo    
    tblProInfo.proInfoScienceName='shalosh'
)

DELETE FROM orderAASerialPro
WHERE tblProInfo.proInfoScienceName='shalosh' 
```

# javascript - Javascript获取图像源并注入另一个图像源

> ID：10600828
> 
> 赞同：0
> 
> 时间：2012-05-15T12:38:06.830
> 
> 标签：javascript, html, image

我一直在开发一个 Javascript 照片库，我希望它对用户非常友好。这涉及只需要使用一张图像和每张图像一个链接。我有它，所以所有图像都出现在左侧的滚动 div 中，并且 onClick 假设更改右侧的图像源，但我似乎无法获取 javascript 从原始图像获取图像源并更改第二个一个与它。我尝试了其他一些方法，但这是我喜欢的方式，如果我能让它工作，那就完美了。

这是在一个表格内，所以它的对齐方式不同我只是提供所需的代码。

此代码在下面给出，但似乎他删除了他的答案。我觉得你比我亲近很多！

Javascript：

```
<script type="Text/javscript">

function setImage(this) {
    document.getElementById("ImageFrame").src = this.childNodes[0].src;
}

</script> 
```

休息

```
 <div style="width:275;height:400;overflow-x:scroll;">

     <a href="#" onclick="setImage(this);"><img class="gallery" src="JCF/PICT0421.jpg" /></a>

     <a href="#" onclick="setImage(this);"><img class="gallery" src="JCF/PICT0422.jpg" /></a>

     <a href="#" onclick="setImage(this);"><img class="gallery" src="JCF/PICT0423.jpg" /></a>

</div> 
```

正在更改的图像。

```
 <div>
<img id="ImageFrame" src="JCF/PICT0421.jpg" width="400" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:42:50.537

```
var pic1 = document.getElementById("image1"); 
var src = pic1.src;  // here is the src for image1

var pic2 = document.getElementById("image2"); 
pic1.src = src;  // here we set the src for image2 
```

所以这段代码`src`将从 image1 中获取图像并将其放入 image2 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:48:02.270

我相信这样的事情应该适合你：

**HTML**：

```
<a href="#" onclick="setImage(this);"><img class="gallery" id="image1" src="image1.jpg" /></a> 
```

**Javascript**：

```
function setImage(imgParent) {
    document.getElementById("ImageFrame").src = imgParent.childNodes[0].src;
}​ 
```

[现场演示](http://jsfiddle.net/rDt7P/3/)

当您实际加载图像时，演示会更好地工作。但是，如果您检查损坏的图像，您可以看到它正确加载到新图像中。

**编辑**：

由于 Kaf 提到他遇到了 childNodes 的问题，您可能想尝试一下：

**Javascript**：

```
function setImage(imgParent) {
    document.getElementById("ImageFrame").src = imgParent.getElementsByTagName('img')[0].src;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:01:24.370

这是一个工作示例。`NOTE: a.getElementsByTagName('img')[0].src`因为不同的浏览器会在子标签之前和之后添加节点到标签。`It is safe to use getElementsByTagName('img')[0].src`

```
<html>
    <head>
    <script type="text/javascript">
    function setImg(a){
          //alert(a.getElementsByTagName('img')[0].src);
              document.getElementById('ImageFrame').src = 
                          a.getElementsByTagName('img')[0].src
            }
        </script>
    </head>
    <body>
    <a href="#" onclick="setImg(this);"><img src="JCF/PICT0421.jpg"></a>

        <div>
           <img id="ImageFrame" src="JCF/PICT0421.jpg" width="400" />
        </div>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T13:42:49.877

您应该使用所谓的“Unobtrusive JavaScript”，即不要将内容与 JavaScript 混合，并在加载窗口后应用所需的行为。像这样的东西：

```
function addDomListener(element, eventName, listener) {
  if (element.addEventListener) // most browsers
    element.addEventListener(eventName, listener, true);
  else if (element.attachEvent) // IE
    element.attachEvent('on' + eventName, listener);
}
window.onload = function() {
  var elements = getElementsByClassName('thumb-link');
  for (int i=0; i < elements.size(); i++) {
    var el = elements[i];
    addDomListener(el, "click", function () {
      setImage(el);
    });
  }
} 
```

getElementsByClassName 在这里仍然需要一个实现，并且每个以前具有 onlick 的标签都需要类“thumb-link”。但我相信你会明白的。

使用 jQuery 或 Prototype.js 之类的库会让这里变得更容易......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T13:10:26.503

假设你可以使用 Jquery

```
$('.imageClass').click(function(){
    var srcToCopy = $(this).attr('src');
    $(somewheretoputsrc).attr('src', srcToCopy);
}) 
```

这段代码应该可以工作

编辑：使用工作图像编辑的小提琴 [http://jsfiddle.net/jbduzan/b7adx/1/](http://jsfiddle.net/jbduzan/b7adx/1/)

# android - 如何将“不再显示”复选框添加到警报框？

> ID：10600830
> 
> 赞同：0
> 
> 时间：2012-05-15T12:38:10.603
> 
> 标签：android, android-alertdialog

当我的 android 应用程序启动时，会有一个提示询问用户是否升级到较新版本。我使用警报框来显示它。我有两个按钮，“升级”和“不，谢谢”。然后我添加了一个复选框。该复选框的标签是“不要再问我”。当用户单击该复选框时，应记住该复选框，并且不应再次询问提示。有人可以建议我实现此目的的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:43:50.510

您可以选择的最佳选择是[SharedPreference](http://developer.android.com/reference/android/content/SharedPreferences.html)。您可以保存在内部数据库中。

```
 PackageInfo info = getPackageManager().getPackageInfo(PACKAGE_NAME, 0);
        int currentVersion = info.versionCode;
        // version name here for display in the about box later.
        this.sVersionName = info.versionName;
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        int lastVersion = prefs.getInt("Key", 0);

        if (currentVersion > lastVersion) {

            prefs.edit().putInt("key",currentVersion).commit();
            Intent intent = new Intent(this, StartUp.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET)

           //  Your Code goes here if you want to Display it Only Once.

            return true;
        } 
```

编辑

```
SavePreferences("MEMORY1","Your String Here");   

private void SavePreferences(String key, String value) {
    SharedPreferences settings = getSharedPreferences(pref, 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(key, value);
    editor.commit();
}

private void LoadPreferences() {
    SharedPreferences settings = getSharedPreferences(Settings.pref, 0);
    String sDefault_Card = settings.getString("MEMORY1", "");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:42:02.117

使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)并保存/检索布尔值来指示选中/未选中状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:43:12.777

您可以使用 SharedPreferences 来存储用户的选择：

```
SharedPreferences preferences = 
      PreferenceManager.getDefaultSharedPreferences(getBaseContext());      
boolean showPrompt = preferences.getBoolean("Show_Prompt", true); 
```

# iphone - 如何在 iPhone 中使用 URL 方案阻止自定义应用程序？

> ID：10600834
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:38:27.073
> 
> 标签：iphone, url-scheme

我对 URL 方案进行了一些研究，并设法访问了我使用另一个应用程序创建的自定义应用程序。我的要求是在电池电量低于某个水平时阻止我的自定义应用程序。

有没有办法做到这一点？我必须通过 URL 方案传递哪些数据？

阻止我的意思是完全禁用或卸载。只是寻求一些控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:48:48.717

如果通过 URL 方案打开应用程序，则无法完全阻止应用程序启动。我建议通过打开一个方案来检查您的应用程序是否已启动，然后只显示一个警报视图，并通知您的应用程序需要手机有更多的电池电量（或正在充电）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:29:01.313

我认为您应该使用推送通知，它可以处理您的要求

# java - SQL 处理中的 Java BatchUpdateException

> ID：10600838
> 
> 赞同：0
> 
> 时间：2012-05-15T12:38:39.787
> 
> 标签：java, mysql

下面的代码给出了一个`BatchUpdateException`，我不知道为什么。

```
public void createContactmoment(Document document) {
    try {
        c = MySqlDAOFactory.getInstance().getConnection();
        //
        c.setAutoCommit(false);
        //
        String sql = "insert into index(iddocument,chapter,chapterdate)"
                + "values (?,?,?)";
        //
        prest = c.prepareStatement(sql);
        //
        int count = 1;
        //Formatter for the time
        DateTimeFormatter format = DateTimeFormat.forPattern("dd-MM-yyyy");
        //
         while (count <= Integer.parseInt(document.getTeachingWeeks())
            || count == document.getAllDates().size()
            || count == document.getContactMomentList().size()) {
            //
            if (MysqlDocumentDAO.getInstance().findByName(
                    document.getName()) == -1)
                return;
            //
            prest.setInt(1,MysqlDocumentDAO.getInstance().findByName(
            document.getName()));
            if (document.getContactMomentList().get(count) != null)
            prest.setString(2,document.getContactMomentList().get(count));
            else
            prest.setString(2, "No contactmoment found, but expected");
            //
            if (document.getAllDates().get(count) != null)
                prest.setString(3,(format.print(document.getAllDates().get(count))));
            else
            prest.setString(3, "Na date found, but expected");
            //
            prest.addBatch();
            //
            count++;
        }
        //
        prest.executeBatch();
        c.commit();
        //
    } catch (SQLException e) {
        JdbcLogging.info("Dit trad op bij het uitvoeren van de batchtaak (contactMoments)"+ " :" + e);
    } finally {
        MySqlConnectionFactory.getInstance().closeStatement(prest);
        MySqlConnectionFactory.getInstance().closeConnection(c);
    }
} 
```

我在日志中看到的错误是：

> INFO JdbcLogging:25 - Dit trad op bij het uitvoeren van de batchtaak (contactMoments) :java.sql.BatchUpdateException: 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'index(iddocument,chapter,chapterdate)values (44,'Examen; * Verdedigen project','' 附近使用正确的语法

所以似乎在上次更新中我丢失了一些数据。我想写的数据确实存在（我用系统打印线检查过。

任何建议都会更受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:49:01.957

`index`是保留字，不应用作表名。在您的查询中，将单词 ` `index`` 放在*`back 引号*` 中并执行，然后它应该可以工作。

```
String sql = "insert into `index`(iddocument,chapter,chapterdate) values (?,?,?)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:49:34.213

尝试在 2 个 SQL 行之间添加一个空格 -`)`和单词`values`应该分开......

```
String sql = "insert into index (iddocument,chapter,chapterdate) "
           + "values (?,?,?)"; 
```

同样，尝试在`index`and之间添加一个空格也没有什么坏处`(`——它只取决于 SQL 解释器的挑剔程度。

此外，`index`对于表来说，这是一个不好的名称，因为索引在许多数据库中具有特殊含义。我假设这`index`是您的表的名称，您实际上并没有尝试将数据插入索引！？

最后，不确定`;`语句末尾是否需要 a？在构建这样的代码时通常不需要它，所以可以先尝试不使用它，如果仍然有问题，可以稍后添加它。

# php - PHP多维数组值检查

> ID：10600841
> 
> 赞同：0
> 
> 时间：2012-05-15T12:38:46.987
> 
> 标签：php, arrays

我在一段时间内一直在为一些“简单”的算法苦苦挣扎，在整个互联网上搜索我放弃的答案之后......我知道，很难过。一开始我想为我的英语语法等道歉。

基于此查询：

```
    选择 a.*、b.*
    从麦切
    加入投注 b
    ON a.mecz_id = b.mecz_id AND a.wynik != 'NULL'

```

我有一个数组“punkty”，其值如下：

```
    [0] => 数组
        (
            [mecz_id] => 1 //match_id
            [druzyna_1_id] => 1 //team_1_id
            [druzyna_2_id] => 2 //team_2_id
            [wynik] => 1:2 //score - 比赛
            [wynik_buk] => 2 //bookie 得分 - 比赛
            [bet_id] => 1 //用户下注id
            [user_id] => 1 //用户 id :)
            [bet_wynik] => 3:2 //用户投注分数
            [bet_wynik_buk] => 1 //用户赌注得分
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [punkty] => 0 //points - 这里会在计算的时候加上
        )

    [1] => 数组
        (
            [mecz_id] => 2
            [druzyna_1_id] => 3
            [druzyna_2_id] => 4
            [威尼克] => 3:2
            [wynik_buk] => 1
            [bet_id] => 2
            [user_id] => 1
            [bet_wynik] => 3:2
            [bet_wynik_buk] => 1
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [2] => 数组
        (
            [mecz_id] => 3
            [druzyna_1_id] => 2
            [druzyna_2_id] => 4
            [威尼克] => 1:1
            [wynik_buk] => 0
            [bet_id] => 3
            [user_id] => 1
            [bet_wynik] => 1:1
            [bet_wynik_buk] => 0
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [3] => 数组
        (
            [mecz_id] => 1
            [druzyna_1_id] => 1
            [druzyna_2_id] => 2
            [威尼克] => 1:2
            [wynik_buk] => 2
            [bet_id] => 6
            [user_id] => 4
            [bet_wynik] => 3:1
            [bet_wynik_buk] => 1
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [4] => 数组
        (
            [mecz_id] => 2
            [druzyna_1_id] => 3
            [druzyna_2_id] => 4
            [威尼克] => 3:2
            [wynik_buk] => 1
            [bet_id] => 7
            [user_id] => 4
            [bet_wynik] => 2:3
            [bet_wynik_buk] => 2
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [5] => 数组
        (
            [mecz_id] => 3
            [druzyna_1_id] => 2
            [druzyna_2_id] => 4
            [威尼克] => 1:1
            [wynik_buk] => 0
            [bet_id] => 8
            [user_id] => 4
            [bet_wynik] => 0:0
            [bet_wynik_buk] => 0
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [6] => 数组
        (
            [mecz_id] => 1
            [druzyna_1_id] => 1
            [druzyna_2_id] => 2
            [威尼克] => 1:2
            [wynik_buk] => 2
            [bet_id] => 9
            [user_id] => 5
            [bet_wynik] => 1:2
            [bet_wynik_buk] => 2
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [7] => 数组
        (
            [mecz_id] => 2
            [druzyna_1_id] => 3
            [druzyna_2_id] => 4
            [威尼克] => 3:2
            [wynik_buk] => 1
            [bet_id] => 10
            [user_id] => 5
            [bet_wynik] => 3:3
            [bet_wynik_buk] => 0
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

    [8] => 数组
        (
            [mecz_id] => 3
            [druzyna_1_id] => 2
            [druzyna_2_id] => 4
            [威尼克] => 1:1
            [wynik_buk] => 0
            [bet_id] => 11
            [user_id] => 5
            [bet_wynik] => 1:1
            [bet_wynik_buk] => 0
            [krol] => 马里奥·戈麦斯 (GER)
            [laczny] => 5 包 � Hiszpania (2 包)
            [朋克蒂] => 0
        )

```

根据上面的数组，我分配分数以获得良好的分数和准确的结果：
玩家得分正确时得 1 分（即 1 或 X 或 2）
当玩家准确得分正确时得 4 分（即 1:1 或3:1 等）

```
    foreach ( $punkty as $k => $v ){
        $wbuk = $v['wynik_buk']; //匹配博彩分数
        $bwbuk = $v['bet_wynik_buk']; //用户 bookie 投注分数
        $w = $v['wynik']; //匹配分数
        $bw = $v['bet_wynik']; //用户投注分数

        如果（$wbuk == $bwbuk）{
            如果 ( $w == $bw ) {
                $pkt = 4;
            }别的{
                $pkt = 1;
            }
        } 别的 {
            $pkt = 0;
        }
    }

```

上面的代码正确地分配了点，但我想向它添加另一件事。

**如果只有一个**用户有这个分数/结果，我想为达到正确的分数或正确的结果添加一些奖励积分：
如果用户是**唯一一个**得分正确的人（即 1 或 X 或 2）
，则 2 分如果用户是唯一具有正确结果的（即 3:1 或 1:1 等**）**

请帮忙 ！！！我知道必须有成千上万种方法可以做到，但我的思想处于 StackOverflow 状态并崩溃了 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:57:44.047

给出答案很棘手，因为我无法理解变量，但我想我明白你想要做什么。

要判断用户是否是唯一具有准确分数或准确结果的人，您有几个选项（少数但尽可能简单），在每个循环上运行查询以查看用户是否唯一具有正确值的函数或编写一个使用 in_array 函数的函数：

[in_array() 和多维数组](https://stackoverflow.com/questions/4128323/in-array-and-multidimensional-array)

编辑：

或者在你进入这个循环之前，运行一个查询并创建一个'score'数组并对其进行操作。

# asp.net - 数据绑定中的下拉列表值

> ID：10600849
> 
> 赞同：0
> 
> 时间：2012-05-15T12:39:04.270
> 
> 标签：asp.net, sql, database, vb.net, drop-down-menu

我的下拉列表设置为这样的数据库...

```
dt = dal.FillDataTable(SqlConnectionString, "SELECT SQL Query Statement")
dropdownlist1.datasource = dt
dropdownlist1.datatextfield = dt.columns.item(0).tostring
dropdownlist1.databind() 
```

这轮流填充我的下拉列表，当用户选择一个值时，然后通过会话调用将其填充到剩余表单上的剩余文本框......

```
dropdownlist2.add(ctype(session.item("valOne"), String)) 
```

通过此会话填充一个值，是否可以显示所选值但还包括所有其他下拉列表项，以防他们想要更改他们的选择？任何建议真的会有所帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:47:54.700

我不明白一次添加一个值。只需向他们展示所有相关的值，让他们选择或更改他们的决定。

示例代码

```
public DataSet GetmTest_Filter()
    {

        try
        {
            DataSet oDS = new DataSet();

            SqlParameter[] oParam = new SqlParameter[1];

            oParam[0] = new SqlParameter("@col_Id", _scolidvalue);

            oDS = SqlHelper.ExecuteDataset(DataConnectionString, CommandType.StoredProcedure, "your_stored_procedure_here", oParam);
            return oDS;
        }
        catch (Exception e)
        {
            ErrorMessage = e.Message;
            return null;
        }
    }
    public void ddlFill_Test(DropDownList ddl)
    {
        DataSet oDSddlmTest = new DataSet();
        oDSddlmTest = GetmTest_Filter();
        if (oDSddlmTest.Tables[0].Rows.Count > 0)
        {
            ddl.DataSource = oDSddlmTest.Tables[0].DefaultView;
            ddl.DataTextField = "col_desc";
            ddl.DataValueField = "col_id";
            ddl.DataBind();
        }
        else
        {
            ddl.Enabled = false;
        }
    } 
```

愿这对你有所帮助。

# css - H 标签不会位于基线网格上

> ID：10600852
> 
> 赞同：0
> 
> 时间：2012-05-15T12:39:17.853
> 
> 标签：css, typography, baseline

我正在尝试使用字体大小：12px 和行高：18px 的基线网格。

除了 H 标签外，大多数东西似乎都可以排列。特别是 h2 标签以基线指南结束，贯穿其中。

这是我尝试在此基础上建立网站的第一次尝试，所以我不确定它是否意味着这样，因为它们的边距仍然允许其他所有内容都到位，但标题并没有像我预期的那样出现。

结果的屏幕截图：![在此处输入图像描述](../Images/00791952c92b6a511aadddba3119f16a.png)

CSS

```
/* reset.css */
html {margin:0;padding:0;border:0;}
body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, code, del, dfn, em, img, q, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, dialog, figure, footer, header, hgroup, nav, section {margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}
article, aside, details, figcaption, figure, dialog, footer, header, hgroup, menu, nav, section {display:block;}
body {line-height:1.5;background:white;}
table {border-collapse:separate;border-spacing:0;}
caption, th, td {text-align:left;font-weight:normal;float:none !important;}
table, th, td {vertical-align:middle;}
blockquote:before, blockquote:after, q:before, q:after {content:'';}
blockquote, q {quotes:"" "";}
a img {border:none;}
:focus {outline:0;}

/* typography.css */
html {font-size:100.01%;}
body {font-size:75%;color:#444;font-family:"Helvetica Neue", Arial, Helvetica, sans-serif;background: url("../images/gridbg.gif") repeat scroll 0 0 #FFFFFF;}
h1, h2, h3, h4, h5, h6 {font-weight:normal;color:#111;}
h1 {font-size:3em;line-height:1;margin-bottom:0.5em;}
h2 {font-size:2em;margin-bottom:0.75em;}
h3 {font-size:1.5em;line-height:1;margin-bottom:1em;}
h4 {font-size:1.2em;line-height:1.25;margin-bottom:1.25em;}
h5 {font-size:1em;font-weight:bold;margin-bottom:1.5em;}
h6 {font-size:1em;font-weight:bold;}
h1 img, h2 img, h3 img, h4 img, h5 img, h6 img {margin:0;} 
```

HTML

```
<h1>Welcome</h1>
<p>
Feel free to select a few different date/time combinations in order of preference.
This makes it easier for us to accomodate you when it is busy.
If your prefered slot is unavailable we will contact you to confirm whether you would like to use one of the alternatives you had previously specified. 
</p>
<p>
Feel free to select a few different date/time combinations in order of preference.
This makes it easier for us to accomodate you when it is busy.
If your prefered slot is unavailable we will contact you to confirm whether you would like to use one of the alternatives you had previously specified. 
</p>

<h2>Welcome</h2>
<p>
Feel free to select a few different date/time combinations in order of preference.
This makes it easier for us to accomodate you when it is busy.
If your prefered slot is unavailable we will contact you to confirm whether you would like to use one of the alternatives you had previously specified. 
</p>

<h3>Welcome</h3>
<p>
Feel free to select a few different date/time combinations in order of preference.
This makes it easier for us to accomodate you when it is busy.
If your prefered slot is unavailable we will contact you to confirm whether you would like to use one of the alternatives you had previously specified. 
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:37:22.343

基线网格的垂直间隔为`18px`。的高度`h1`是`3em`，`2em`对于`h2`。`3em`表示[字体大小的三倍](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)，因此 3*12px= `36px`。因此，网格贯穿这些标签。

基线网格并不意味着所有东西都应该完全适合网格，它意味着页面的主要部分被均匀地拟合和分开，例如`<p>`代码中的 s 。

如果你觉得一个标签和后面的段落之间的差距`h`太大，你可以增加一点，并相应地`margin-top`减少标签。`margin-botom``h`

# c# - 如何在 LINQ 中选择特定列？

> ID：10600854
> 
> 赞同：7
> 
> 时间：2012-05-15T12:39:32.257
> 
> 标签：c#, linq

我必须使用 linq 从我的 DataTable 中选择特定列 我正在使用此代码

```
ds.Table[0].AsEnumerable().Where<DataRow>(r=>r.Field<int>("productID")==23).CopyToDataTable(); 
```

~

但它给了我所有的专栏，我只需要 PRODUCTNAME ， DESCRIPTION ， PRICE

我怎么写这个查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T12:48:11.993

要扩展@lazyberezovsky，您可以使用匿名类型投影来获取所需的所有字段：

```
ds.Table[0].AsEnumerable()
    .Where<DataRow>(r => r.Field<int>("productID") == 23)
    .Select(r => new { ProductName = r.Field<string>("productName"), 
                       Description = r.Field<string>("description"),
                       Price = r.Field<decimal>("price") }); 
```

我不知道您的产品名称、描述和价格字段是什么名称和类型，因此您必须替换它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T12:41:08.503

使用 Select 方法：

```
ds.Table[0].AsEnumerable()
           .Where<DataRow>(r=>r.Field<int>("productID")==23)
           .Select(r => r.Field<int>("productID")); 
```

更新：如果您需要选择多个列，您可以返回匿名类型：

```
var query = from row in dt.ds.Table[0].AsEnumerable()
            where row.Field<int>("productID")==23
            select new  {
                           ProductID = x.Field<string>("productID"),
                           Foo = x.Field<string>("foo")
                        }; 
```

如果您需要将该数据复制到新表，您将面临问题（CopyToDataTable 需要 DataRow 对象的集合）。请参阅[如何：在通用类型 T 不是 DataRow 的情况下实现 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx)以解决此问题。

# java - 在连接池中获取 SQLException 错误

> ID：10600855
> 
> 赞同：0
> 
> 时间：2012-05-15T12:39:37.480
> 
> 标签：java, oracle, jdbc

我正在使用数据源对象从连接池获取 Oracle JDBC 连接。并使用连接将一些日志从java（通过java静态方法）插入数据库。由于每个用户大约有 10 到 20 个插入，我正在做的是，我在过滤器中的请求级别提交连接并在会话级别关闭连接（通过会话侦听器的 sessionDestroyed() 方法）我没有收到任何错误在测试但在生产环境中，我得到的错误很少，如下所示，

```
java.sql.SQLException: execute, Exception = null (one scenario)
java.sql.SQLException: close, Exception = null (for another scenario) 
```

如何避免这些错误？我可以改为在 java 静态方法中提交并关闭连接，而不是在请求级别提交并在会话级别关闭吗？

但是让我感到有趣的是，尽管在我的 java 静态方法中有以下逻辑，这些错误还是会发生，

```
if (con.isClosed() || con == null) {
 DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
    con=connHelper.getConnection("ds");
    con.setAutoCommit(false);
} 
```

所以我正在检查上述内容，因此当我尝试执行时无法关闭连接，对吗？但不确定和困惑它为什么会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:28:13.717

我猜你的 con 对象是空的？

考虑以下块：

```
if (con.isClosed() || con == null) {
 DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
    con=connHelper.getConnection("ds");
    con.setAutoCommit(false);
} 
```

首先，您询问连接是否已关闭。然后你看看它是否为空。如果 con 真的是 null，你会得到一个 NullpointerException。

切换检查，看看它是否有帮助:-)

```
if (con == null || con.isClosed()) {
 DBConnectionHelper connHelper = DBConnectionHelper.createInstance();
    con=connHelper.getConnection("ds");
    con.setAutoCommit(false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:28:43.967

改变

```
if (con.isClosed() || con == null) { 
```

至

```
if ( con == null || con.isClosed() ) { 
```

看看有没有区别。

你是如何检查`con=connHelper.getConnection("ds");`成功的？
我担心`con`在`null`执行之前`con.setAutoCommit(false);`
如果是这种情况，您需要检查生产数据库的连接字符串是否正确。

# drupal - 按节点引用字段排序视图

> ID：10600856
> 
> 赞同：1
> 
> 时间：2012-05-15T12:39:45.567
> 
> 标签：drupal, drupal-7, drupal-views

我需要按实际上是节点引用字段的特定字段对视图进行排序。

但是，由于某种原因，节点引用字段没有出现在排序标准列表中。

有什么理由吗？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:04:13.213

您不能按节点排序，因为 Drupal 不知道对节点进行排序以说出哪个是第一个，哪个是第二个等的标准。

我假设您的意思是要按引用的节点的某个字段（如标题）进行排序。

要按引用节点中的字段排序，您必须将关系中的引用节点加入表。您可以简单地添加按“ `title`”字段排序，但请确保在创建排序字段时在“**关系**”下拉列表下选择正确的关系。

![在此处输入图像描述](../Images/9fd7929827ba79e5929aea89a2edbfa3.png)

# jquery - 如何使用 jquery 在网页上获取网络摄像头？

> ID：10600857
> 
> 赞同：0
> 
> 时间：2012-05-15T12:39:47.920
> 
> 标签：jquery

我试图在我的网页上安装一个网络摄像头，
它还不需要拍照，而只是网络摄像头看到的屏幕。
我现在无法让它工作。

我使用了这个网站：[http](http://www.xarg.org/project/jquery-webcam-plugin/) ://www.xarg.org/project/jquery-webcam-plugin/ 我下载了插件，但无法使用 jQuery 在我的页面上获取网络摄像头。

我需要使用什么 jQuery 代码在我的页面上获取网络摄像头的图像？
有人可能有代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:05:05.840

[正如网站](http://www.xarg.org/project/jquery-webcam-plugin/)上所说，您可以像这样初始化网络摄像头插件：

```
$("#camera").webcam({
    width: 320,
    height: 240,
    mode: "callback",
    swffile: "/download/jscam_canvas_only.swf",
    onTick: function() {},
    onSave: function() {},
    onCapture: function() {},
    debug: function() {},
    onLoad: function() {}
}); 
```

# java - dispatcher-servlet：发现以元素“repositories”开头的无效内容

> ID：10600861
> 
> 赞同：2
> 
> 时间：2012-05-15T12:39:58.713
> 
> 标签：java, spring, spring-data

我正在尝试使用：

```
<repositories base-package="com.site.cmt.repositories" repository-impl-postfix="">
    <repository id="variableRepository" />
</repositories> 
```

但我不断收到此错误：

> org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 ServletContext 资源 [/WEB-INF/dispatcher-servlet.xml] 的 XML 文档中的第 71 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：71；列号：94；cvc-complex-type.2.4.a：发现以元素“存储库”开头的无效内容。'{"http://www.springframework.org/schema/beans":import, "http://www.springframework.org/schema/beans":alias, "http://www.springframework.org /schema/beans":bean, WC[##other:"http://www.springframework.org/schema/beans"], "http://www.springframework.org/schema/beans":beans}'是期待。

我以为我正确加载了所有内容...

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
       http://www.springframework.org/schema/jee 
       http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
       http://www.springframework.org/schema/data/jpa
       http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T13:25:48.943

repositories 标签的命名空间错误，只需将其更改为：

```
<repository:repositories base-package="com.site.cmt.repositories" repository-impl-postfix="">
    <repository:repository id="variableRepository" />
</repository:repositories> 
```

或者将 xml 的默认命名空间设置为存储库：

```
xmlns="http://www.springframework.org/schema/data/repository" 
```

更新：对不起，我弄错了名称空间，在您的情况下，实际上您已将其用作`jpa`与存储库相关的正确名称空间的前缀`http://www.springframework.org/schema/data/jpa`，因此您基本上必须使用：

```
<jpa:repositories base-package="com.site.cmt.repositories" repository-impl-postfix="">
    <jpa:repository id="variableRepository" />
</jpa:repositories> 
```

但是最好将存储库前缀重新分配给`http://www.springframework.org/schema/data/jpa`命名空间，这是正常的[约定](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.definition)

# css - 使用 z-index 覆盖 DIV

> ID：10600863
> 
> 赞同：2
> 
> 时间：2012-05-15T12:40:12.870
> 
> 标签：css, html, overlay

我试图在我的整个页面上覆盖一个 div 以显示一个弹出窗口。问题是，它不会覆盖整个页面。这是代码的近似值：

```
<div style="z-index:902;">
    <div style="position: fixed; width: 100%; height: 100%; left: 0; top: 0;">
        Overlay
    </div>
    Contents of container 1
</div>
<div style="z-index:902;">
    Contents of container 2
</div>
<div style="z-index:902;">
    Contents of container 3
</div> 
```

覆盖 div 出现在容器 1 的顶部，但容器 2 和 3 的内容出现在覆盖的顶部。

我无法将覆盖 div 移到容器 1 之外，因为我正在使用 CMS（如果有帮助，请使用 DotNetNuke）。

我尝试将叠加层的 z-index 设置为高于容器，但没有任何效果。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T12:43:46.880

工作[小提琴示例！](http://jsfiddle.net/zuul/H5NB8/)

如果您将此问题的范围限制在您提供的代码中，那么它工作得很好！例如，在 Fiddle 上，您可以看到我为`position:fixed` `div`as 放置了背景颜色以说明解决方案正在运行。

**但是**，如果您正在使用`z-index`，可以安全地假设您的元素`z-index`已经`position`应用了一些。

考虑到这一点，这部分：

```
<div style="z-index:902;">
    <div style="position: fixed; width: 100%; height: 100%; left: 0; top: 0;">
        Overlay
    </div>
    Contents of container 1
</div> 
```

**不能**作为“整个页面”叠加使用，因为内部 div`position:fixed`位于堆叠元素内，该堆叠元素的侧面（兄弟姐妹）具有其他堆叠元素，与`z-index:902;`.

看这个[小提琴来说明！](http://jsfiddle.net/zuul/H5NB8/7/)

如果将兄弟元素移动到较低的堆栈位置，则可以使其工作。请参阅此[小提琴示例！](http://jsfiddle.net/zuul/H5NB8/8/)

> **已编辑**
> 
> 我的答案的第一部分是按照[My Head Hurts](https://stackoverflow.com/users/681807/my-head-hurts)的建议进行编辑的（请参阅评论），以更好地解释第一个 Fiddle 有效，因为 OP 将问题留给猜测！对此答案提出并批准的两个解决方案没有进行任何更改！

* * *

## 一个解法

会将叠加层放置在所有其他 div 之外，但这取决于您的目标：

```
<div style="z-index:902;">
    Contents of container 1
</div>
<div style="z-index:902;">
    Contents of container 2
</div>
<div style="z-index:902;">
    Contents of container 3
</div>
<div style="position:fixed; z-index:10000; left:0; top:0; right:0; bottom:0; background:#ccc;">
    Overlay
</div> 
```

请参阅此[小提琴示例！](http://jsfiddle.net/zuul/H5NB8/2/)

* * *

# 已编辑

**因为这个评论：**

*是的，这将是理想的答案，我会接受它，因为它回答了我所写的问题，但我面临的问题来自一些 JavaScript，它动态改变了我无法控制的其他容器的 z-index不可能将我的 div 放在它们之上。*

**假设你可以**在里面放置你想要的任何东西`container 1`，并且假设你正在使用或者可以使用 jQuery，你可以这样做来解决这个问题：

```
<div style="z-index:902;">
  <div class="placeOutside" style="position:fixed; z-index:903; right:0; bottom:0; left:0; top:0; background:#ccc;">
        Overlay
  </div>
  <script type="text/javascript">
    jQuery(document).ready(function($) {
        $('.placeOutside').appendTo('body');
    });
  </script>
  Contents of container 1
</div>
<div style="z-index:902;">
  Contents of container 2
</div>
<div style="z-index:902;">
  Contents of container 3
</div> 
```

请参阅这个工作[小提琴示例！](http://jsfiddle.net/zuul/H5NB8/5/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T12:43:55.633

[`z-index`](http://www.w3.org/TR/CSS21/visuren.html#z-index)仅适用于*定位元素*（例如`position:absolute;`、`position:relative;`和`position:fixed;`）。

> 如果元素的属性值不是，则称该元素已*定位*。`position``static`
> 
> *~ CSS 2.1 规范的[视觉格式化模型](http://www.w3.org/TR/CSS21/visuren.html#position-props)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:44:46.947

您已为叠加层提供了 100% 的宽度和高度，并且由于它是容器 1 的直接后代，因此其宽度将被计算为容器 1 的宽度和高度的 100%，从而解释了您的问题。

至于解决方案，您可能应该在显示之前将覆盖的宽度和高度设置为 JavaScript 中浏览器窗口大小的绝对像素值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:52:10.037

这段代码在 Firefox 中为我工作：

```
<div style="z-index:1;">
    <div style="position: fixed; width: 100%; height: 100%; left: 0; top: 0; z-index:901;">
        Overlay
    </div>
    Contents of container 1
</div>
<div style="z-index:1;">
    Contents of container 2
</div>
<div style="z-index:1;">
    Contents of container 3
</div> 
```

所以尝试一下，看看它是否适合你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T07:20:04.537

这是我的解决方案...想象一下两个兄弟 div。#in-front 需要位于#behind 之上。

```
<div id="behind"></div>
<div id="in-front"></div> 
```

不要让它们成为兄弟姐妹，而是将第一个 div 包装在包装器中并将其定位设置为固定。

```
<div id="wrapper" style="position:fixed; width:100%; top:0; left:0;">
    <div id="behind"></div>
</div>
<div id="in-front"></div> 
```

#behind div 现在可以根据需要定位或居中。以这个[jsfiddle](http://jsfiddle.net/nicotr014/xUNv5/13/)为例。注意它们是如何在没有负边距的情况下协同工作的！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-12T17:54:13.890

如果我混合位置相对和绝对宽度 z-index 这没有任何意义：

```
<div style=" Position: fixed ;  z-index:902; width:100%; heigth:100%;background:#F00;">
    Contents of container 2
</div>
<div style="z-index:1; position:relative">
    <div style=" z-index:903; Position: fixed ; left: 0; top: 0;background:#ccc;">
        Overlay
    </div>
</div> 
```

[http://jsfiddle.net/vLp0am43/](http://jsfiddle.net/vLp0am43/)

# c - Unix下最快的删除目录

> ID：10600864
> 
> 赞同：3
> 
> 时间：2012-05-15T12:40:18.217
> 
> 标签：c, performance, unix

我目前正在研究对 I/O 非常敏感的代码，性能方面，我正在寻找从 C 代码中删除 Unix 下的目录的*最快方法。*我想编写适用于所有常见平台（Android、MacOS X、Linux）的东西，但我愿意为不同风格的 Unix 编写不同的实现（我怀疑 BSD/MacOS X 和 Linux/Android 有不同的技巧）。

以下是我脑海中闪过的几件事：

*   `opendir`在所有平台上，我都可以使用, `readdir_r`et al来遍历目录结构，`dirent->_d_type`用于区分目录和文件——这在 Linux 下似乎是标准化的，但在 MacOS X 下却不是；

*   在 Linux/Android 下，如果我选择这个选项，我也可以使用`dirfd`和`unlinkat`来快速删除每个文件；

*   在所有平台上，我都可以使用 来遍历目录结构`ftw`，`flag`用于区分目录和文件；

*   `fts_open`在所有平台上，我都可以使用, `fts_read`et al来遍历目录结构，`FTSENT->fts_info`用于区分目录和文件；

*   我没有检查过，但我的印象是BSD/MacOS X`copyfile`功能可以用来删除一个目录。

这些技术中的一种是否比其他技术更好？我错过了一些明显的东西吗？

请注意，我主要对最小化 I/O 以及更普遍的系统调用感兴趣——我对 CPU 成本并不太贪心。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:52:03.050

*删除目录的最快*方法可能是不删除它:-)

或者，更准确地说，推迟它。如果您的意图是简单地摆脱（例如）`/home/pax/porn`，只需`mv`将其转移到同一文件系统（`/home/no_user/junk/pax/porn`）上的其他位置并启动后台进程以在低优先级进程中摆脱它。

低优先级，我并不一定是指 CPU 咕噜声，更多的是进程会根据您的需要尽可能减少资源使用。

例如，如果您需要在很长一段时间内分散此 I/O 效果，您可以让进程删除文件或目录，并在两者之间有延迟。虽然 I/O 可能类似于您一次删除所有文件，但在短时间内测量的 I/O 会更少。

这种方法的优点是，根据任何寻找您“删除”的目录的过程，它几乎立即消失了。

当然，恢复磁盘空间需要一段时间，因为这是以延迟的方式发生的，但这是否重要取决于您的相对优先级。

# java - 如何将列表数据加载到struts组合框标签中

> ID：10600866
> 
> 赞同：0
> 
> 时间：2012-05-15T12:40:25.517
> 
> 标签：java, jakarta-ee, struts2

我有两个选择标签国家和语言。所以我采取了 2 select tag() 现在我想实现以下目标： 1] 在 jsp 页面上，我正在编写 JSP scriptlet 来获取国家/地区列表，所以我想将列表值设置为国家/地区选择框

2]当我选择特定国家时，我想动态填充该国家的语言

3] 我想使用 struts2 标记来实现这一点，就好像我使用普通的 html 标记而不是 struts2 标记一样，然后对该字段的验证将失败。

所以请帮助我如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:21:18.333

我想到的最常见的想法之一是使用 Ajax。如果你想工作的时间少于 Struts2 的[JQuery 插件](http://code.google.com/p/struts2-jquery/wiki/SelectTag)，那将能够做你正在寻找的事情，但我建议你使用纯 JQuery 选项。

[其他选项是在Struts2 JSon](http://struts.apache.org/2.2.3/docs/json-plugin.html)插件的帮助下使用纯 JQuery。当用户从第一个下拉列表中选择一个值时，使用 Ajax 和 JQuery 将该值发送到您的操作类，并基于该发送回 JSON 数据，使用 JQuery 内置解析 JSON 数据并填充第二个相关下拉列表的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:51:40.927

看看[这里](http://www.roseindia.net/struts/struts2/struts2uitags/combobox-tag.shtml)

**相关的**

爪哇

```
public class comboboxTag extends ActionSupport{

    private List fruits;
    public String execute()throws Exception{
    fruits = new ArrayList();
    fruits.add("Apple");
    fruits.add("Mango");
    fruits.add("Orange");
    fruits.add("Pine Apple");
    return SUCCESS;

    }

    public List getFruits(){
    return fruits;
    }
} 
```

html

```
<s:combobox label="Fruits Name" name="fruitsNames"
headerValue="--- Please Select ---"
headerKey="1" list="fruits" /> 
```

# java - 我希望 DatePicker 在用户更改日期后将日期恢复到今天

> ID：10600868
> 
> 赞同：0
> 
> 时间：2012-05-15T12:40:35.460
> 
> 标签：java, android, datepicker

首先我只是一个初学者，但到目前为止我几乎完全了解我的应用程序，所以我希望有人能给我答案如何做到这一点。

这是我的完整应用程序代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.DatePicker;
import android.view.View;
import java.util.Calendar;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import android.widget.Toast;

public class MainActivity extends Activity {

Button mBtnPlanMe;
CheckBox mCbSaturdaysAllowed;
DatePicker mDpDate;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dynamiclayout);

    mBtnPlanMe = (Button) findViewById(R.id.btnPlanMe);
    mCbSaturdaysAllowed = (CheckBox) findViewById(R.id.cbSaturdaysAllowed);
    mDpDate = (DatePicker) findViewById(R.id.dpDate);

}

public void PlanMe(View view){
    if (view == mBtnPlanMe){
        Calendar cal = Calendar.getInstance();
        Calendar cal1 = Calendar.getInstance();

        int xday = mDpDate.getDayOfMonth();
        int xmonth = mDpDate.getMonth();
        int xyear = mDpDate.getYear();

        cal.set(xyear, xmonth, xday);

        if (cal.before(cal1) == true) {
            Toast.makeText(this, "Kan geen datum inplannen voor vandaag", Toast.LENGTH_LONG).show();
        }

        else {

        if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY){
            cal.add(Calendar.DAY_OF_MONTH, 1);
        }

        if (!mCbSaturdaysAllowed.isChecked() && cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY){
            cal.add(Calendar.DAY_OF_MONTH, 2);
        }

        DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
        String date = formatter.format(cal.getTime());

        Toast.makeText(this, "Uw afspraak is ingepland op: " + date, Toast.LENGTH_LONG).show();
    }
    }
}
} 
```

现在，在这部分：

```
if (cal.before(cal1) == true) {
    Toast.makeText(this, "Cannot plan a date earlier than today", Toast.LENGTH_LONG).show();
} 
```

它告诉用户他们无法计划当前日期之前的日期，但我也希望将日期选择器重置为当前日期，但我不知道如何。我不能再次使用“cal.set”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:42:51.867

```
 final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

   DatePicker mDpDate = (DatePicker) findViewById(R.id.dpDate);
    // set current date into datepicker
    mDpDate .init(year, month, day, null); 
```

# c# - 自定义 WCF Rest 错误响应

> ID：10600874
> 
> 赞同：1
> 
> 时间：2012-05-15T12:41:17.947
> 
> 标签：c#, wcf, rest, wcf-rest

我编写了一个供第三方使用的 WCF REST API。我想做的一件事是在出现任何问题时向客户返回自定义错误响应。我不希望 WCF 默认错误页面显示发生内部服务器错误或找不到方法名称。

为此，我`WebFaultException<Error>`在必要时抛出。这会向客户端返回以下类型的响应：

```
<Error>
  <type>MissingTag</type>
  <Desc>Tag 349 is missing</Desc>
</Error> 
```

但是，如果发生任何其他类型的错误，例如序列化错误或“找不到方法”错误或我想检查 POST、PUT 和 PATCH 是否存在 http 标头内容类型的地方，我该如何处理。我也想扔`WebFaultException<>`那里。我试着调查`IErrorHandler`但无法让它工作。

任何人都对如何实现这种事情有想法。我也可以有一个简单的代码来演示`IErrorHandler`用法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:33:53.583

您可以查看[Message Inspectors](http://msdn.microsoft.com/en-us/library/aa717047.aspx) BeforeSendReply 以自定义需要发送给客户端的回复

如果在发出请求时未设置内容类型，您可以查看 AfterReceiveRequest，您可以在其中自定义收到的请求，然后根据需要进行操作。

# sql - 计算同一表中多边形之间的重叠区域

> ID：10600875
> 
> 赞同：0
> 
> 时间：2012-05-15T12:41:19.050
> 
> 标签：sql, gis, spatial

我需要计算同一张表中多边形之间的重叠区域。理想情况下，我想为此使用 mssql 空间功能（类似于@a.SHAPe.STIntersections(@b.SHAPE).STArea()）。

但我不知道如何对同一层中的多边形执行此操作。

谢谢！

房地美

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:37:48.913

我为你举了一个小例子，向你展示如何实现这一点。

```
SELECT 

    a.Geog1.STIntersection(b.Geog2) AS OverlapGeog
,   a.Geog1.STIntersection(b.Geog2).STArea() AS AreaOverlap
FROM
(
    SELECT 
    GEOGRAPHY::STGeomFromText('POINT(0.0 0.0)',4326).STBuffer(100) AS Geog1
) a
INNER JOIN
(
    SELECT 
    GEOGRAPHY::STGeomFromText('POINT(0.001 0.0)',4326).STBuffer(100) AS Geog2
) b
On
a.Geog1.STIntersects(b.Geog2) = 1 
```

# c++ - 异常处理语法问题的简单方法

> ID：10600882
> 
> 赞同：4
> 
> 时间：2012-05-15T12:41:48.573
> 
> 标签：c++, exception-handling

注意：我不能使用任何默认值。

我正在尝试制作一个非常简单的异常处理例程，或者至少制作一些看起来很重要的东西。我不想做太多，只是抛出异常并打印错误消息。

在.h

```
class MyException {
    protected: string message;

    public:

        MyException (string mes) {
            this->message = mes;
        }

        MyException (); // is this necessary ? does it do anything ?

        string getMessage() const {
            return this->message;
        }
}; 
```

我想要的是有一个“PersonException”和“ActivityException”。可能会使用模板，但不确定是否可行。

```
class PersonException:public MyException {

    public:

        PersonException (string message):MyException(message) {

        }
};

class PersonValidator {

    public:

        PersonValidator (Person p) throw (PersonException);
}; 
```

在.cpp

```
void PersonValidator::PersonValidator(Person p) throw (PersonException) {
    if (p.getPhone < 0) {
        throw PersonException ("Person Number is invalid");
} 
```

这里有什么问题或麻烦，如何才能做得更好？我在哪里实际打印错误消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T12:45:32.207

1）**默认构造函数不是必需**的，至少你现在有代码的方式，所以你可以删除

```
 MyException (); 
```

2) 建议**从`std::exception`**.

3）您可以通过捕获 a来**捕获异常**`MyException&`，并在那里打印消息：

```
try
{
    PersonValidator validator(Person());
}
catch(const MyException& ex)
{
    std::cout << ex.getMessage();
} 
```

4)**避免`using`在标题中使用指令。**您的语法表明您`using namespace std;`在标题中有 a 。这是错误的，您应该支持全名限定，至少在标题中：

```
protected: std::string message;
MyException (std::string mes) 
```

等等

5)对于复杂类型，支持**通过 const 引用**而不是按值传递：

```
MyException (const std::string& mes)

PersonValidator (const Person& p) 
```

6)**以 const 正确性为目标**：

```
std::string getMessage() 
```

应该：

```
std::string getMessage() const 
```

因为它不会改变任何成员。

7）**使用初始化列表**：

```
 MyException (string mes) {
     this->message = mes;
 } 
```

变成

```
 MyException (string mes) : message(mes) {
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:54:11.217

您还可以使用默认构造函数来初始化一些预定义的值。

```
MyException () : message ("throwing an exception") {}; 
```

# python - 如何从python中的列中排除重复的条目

> ID：10600886
> 
> 赞同：2
> 
> 时间：2012-05-15T12:41:55.797
> 
> 标签：python

我有一个像这样的文件：

```
q12j4
q12j4
fj45j
q12j4
fjmep
fj45j 
```

现在我想做的是：

*   查找是否有重复的条目，
*   如果是这样，则打印一次条目，并且不会重复打印它们。
    输出应该是这样的：

    ```
    q12j4  
    fj45j  
    fjmep 
    ```

    [省略重复]

我试图用`defaultdict`函数来做，但我认为它不适用于字符串。
请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:46:26.233

```
def unique(seq):
    seen = set()
    for val in seq:
        if val not in seen:
            seen.add(val)
            yield val

with open('file.txt') as f:
    print ''.join(unique(f)) 
```

如您所见，我选择编写一个单独的生成器来从可迭代对象中删除重复项。这个生成器，`unique()`也可以在许多其他情况下使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T12:49:22.920

这应该足够了：

```
with open('file.txt', 'r') as f:
    for line in set(f):
        print line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T12:45:54.243

```
seen = set()
with open(filename, 'r') as f:
    for line in f:
        if line not in seen:
            print line
            seen.add(line) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:43:46.897

您应该使用 itertools.groupby 函数，有关用法示例，请查看标准库或此相关问题：[如何使用 Python 的 itertools.groupby()？](https://stackoverflow.com/questions/773/how-do-i-use-pythons-itertools-groupby)

假设这`toorder`是您的重复条目列表：

```
import itertools
toorder = ["a", "a", "b", "a", "b", "c"]

for key, group in itertools.groupby(sorted(toorder)):
    print key 
```

应该输出：

```
a
b
c 
```

# javascript - Javascript中的数组迭代问题

> ID：10600892
> 
> 赞同：0
> 
> 时间：2012-05-15T12:42:10.490
> 
> 标签：javascript, arrays, loops, iteration

我正在尝试创建一个从数组中读取元素并将其值分配`<tr>`给表标签的函数。所以我写了这段代码：

```
(function () {
  "use strict";
  var selectQG = {
    distributeCat : function (tablerow, categories) {
      var tr = $(tablerow), tri = 0;
      tr.each(function () {
        if (tri > 2) {
          for (var i = 0; i<categories.length; i++) {
            this.setAttribute('categoria',categories[i]);
          }
        }
        tri++;
      });
    }
  }
  var categories = ['1,2','3,4','5,6','7,8','9,10','11,12'];
  selectQG.distributeCat('table tr', categories);
} () ); 
```

检查此小提琴以查看 html 代码和功能工作：http: [//jsfiddle.net/5kqEf/2/](http://jsfiddle.net/5kqEf/2/)）

循环被执行了 6 次，我不知道为什么。我仍然是编程新手，所以我需要一些帮助才能知道我做错了什么。任何帮助将不胜感激。

编辑：想法是每个都`<tr>`获得数组值。它应该从 3rd 开始发生`<tr>`，这就是为什么我把“如果”作为条件。所以，第一个`<tr>`得到“categories[1]”，第二个`<tr>`得到“categories[2]”，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:46:13.907

外部循环执行 9 次，因为您有 9 个表 tr 元素。.each 将遍历每个 tr 元素，恰好是 9 个元素。见[http://jsfiddle.net/5kqEf/4/](http://jsfiddle.net/5kqEf/4/)

内部 for 循环循环超过 6 个元素（数组`var categories = ['1,2','3,4','5,6','7,8','9,10','11,12'];`），所以这是有道理的......

你的确切问题是什么？

如果您想根据索引选择一个类别（如果 tr 元素多于类别，则重新开始），您可能需要替换它：

```
 for (var i = 0; i<categories.length; i++) {
    this.setAttribute('categoria',categories[i]);
 } 
```

有了这个

```
var index = tri % categories.length;
this.setAttribute('categoria',categories[index]); 
```

*   有关模数运算符的使用，请参阅[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators)。

# visual-studio-2010 - 安装多个office版本的VSTO项目

> ID：10600893
> 
> 赞同：5
> 
> 时间：2012-05-15T12:42:13.697
> 
> 标签：visual-studio-2010, vsto

我目前安装了 Office 2010，并试图帮助仍在使用 VSTO 解决方案的 2007 的同事。这变得一团糟，因为我的 Visual Studio 副本破坏了项目文件，更新它们以指向 O2010 dll。如果我要在 2010 旁边安装 office 2007，我是否能够在升级向导不破坏所有内容的情况下打开解决方案，或者我唯一的选择是对解决方案进行重大[架构更改](https://stackoverflow.com/questions/403338/c-sharp-visual-studio-how-to-have-mulitple-developers-on-a-solution-that-refere)或恢复到 O2007，直到我的雇主将 O2010 设为新标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:41:32.800

您[不能并排运行 Outlook 版本](https://superuser.com/a/199306/108939)（*[和此处](http://blogs.msdn.com/b/andreww/archive/2007/06/08/why-is-vs-development-not-supported-with-multiple-versions-of-office.aspx)*）。

您[仍然可以同时定位 2007 和 2010](http://blogs.msdn.com/b/vsto/archive/2010/06/04/creating-an-add-in-for-office-2007-and-office-2010-that-quot-lights-up-quot-on-office-2010-mclean-schofield.aspx)，但您需要研究**[嵌入式互操作类型](http://badecho.com/2010/08/office-and-embedded-interop-types/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:26:09.757

您无需安装 Office 2007 即可创建 Office 2007 加载项。我认为这里的问题是您缺少正确的 VSTO 组件。

确保您已安装以下内容：

*   Office 中的所有 .NET 和开发人员工具（来自 Office 2010 安装程序 -- 不需要 Office 2007 安装程序）
*   Visual Studio 中的 Microsoft Office 开发人员工具（来自 VS 安装程序）
*   [Microsoft Office 2007 主要互操作程序集](http://www.microsoft.com/en-us/download/details.aspx?id=18346)
*   [适用于 Office 运行时的 Microsoft Visual Studio 2010 工具](http://www.microsoft.com/en-us/download/details.aspx?id=20479)
*   [适用于 Microsoft Office 系统的 Microsoft Visual Studio 工具（3.0 版运行时）](http://www.microsoft.com/en-us/download/details.aspx?id=23656)

如果其中任何一个已经安装，那么我建议修复它们的安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:48:50.513

尝试禁用此选项：

选项 > Office 工具 > 项目升级 >**始终升级到已安装的 Office 版本**（[更多信息在这里](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VS.TOOLSOPTIONSPAGES.MICROSOFT_OFFICE_KEYBOARD_SETTINGS.MICROSOFT_OFFICE_UPGRADE%29&rd=true)）

我认为这不能解决根本问题，即您甚至不应该被提示升级您的项目。我仍然怀疑您的 VSTO 相关组件的安装有问题（有关该信息，请参阅我的其他答案）。但是，这可能是一个简单的解决方法。

需要明确的是，您*可以*在不安装 Office 2007 的情况下开发 Office 2007 加载项。我现在正在这样做，而无需遵循此解决方法。

# javascript - 如何为我使用 Mappings 插件创建的敲除 observables 设置验证

> ID：10600899
> 
> 赞同：2
> 
> 时间：2012-05-15T12:42:32.843
> 
> 标签：javascript, knockout.js

一直在尝试为我的淘汰赛 observables 上的属性设置验证，例如（必需、最小长度、最大长度等）。我使用 Mapping 插件创建了我的 observables。我找到了以下链接，但有人可以帮助我，找出正确的方法来设置验证。这是我正在查看的链接。

[http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)

我把我的代码放在 jsfiddle 中，目前它没有运行，因为它抱怨敲除文件。但想有人可以在这里看到我的代码[http://jsfiddle.net/wQfuM/13/](http://jsfiddle.net/wQfuM/13/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:58:27.703

我无法让你的 jsfiddle 工作。但这是一个简单的方法。您可以使用映射插件映射选项对象来控制可观察对象的创建。

```
var json = {
    someValue: "foo"
};

var viewModel = function(data) {
    ko.mapping.fromJS(data, {
        someValue: {
            create: function(options) {
                return ko.observable(options.data).extend({ minLength: 10 });
            }
        }
    }, this);
};

ko.applyBindings(new viewModel(json)); 
```

[http://jsfiddle.net/madcapnmckay/b3UrF/1/](http://jsfiddle.net/madcapnmckay/b3UrF/1/)

希望这可以帮助。

# jquery - jQuery UI 小部件无法找到封闭的功能

> ID：10600901
> 
> 赞同：0
> 
> 时间：2012-05-15T12:42:45.337
> 
> 标签：jquery, jquery-ui, jquery-ui-widget

我正在尝试创建一个简单的进度小部件。但我得到`_showProgress`的不是一次又一次的函数错误。

```
(function ($, undefined) {
    $.widget("AOne.ProgressBar", {

        options: { max: 100, min: 0, current: 0, time: 1000, stepWidth: 1 },

        innerDiv: $("<div></div>").css({ overflow: 'hidden', clear: 'both', 
                        height: '10px', width: '0px', 
                        background: 'transparent url("Progress.gif") repeat-x 
                        scroll left center' }).html("&nbsp;"),

        _create: function () {
            this.element.append(this.innerDiv);
            maxWidth = this.element.outerWidth();
            this.options.stepWidth = maxWidth / this.options.max;
        },

        _init: function () {
            this.intervalId = setInterval(function () {
                this._showProgress();
            },
            this.options.time);
        },

        _showProgress: function () {
            this.options.current += 1;

            if (this.options.current < this.options.max) {
                this.innerDiv.css({ width: this.options.stepWidth * 
                                                this.options.current + 'px' });
            } else {
                window.clearInterval(this.intervalId);
            }
        },

        _setOption: function (key, value) {
            $.Widget.prototype._setOption.apply(this, arguments);
        },

        destroy: function () {
            $.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:53:51.020

这可能是范围问题吗？尝试这个：

```
_init: function () {
    that = this;
    this.intervalId = setInterval(function () {
        that._showProgress();
    },
    this.options.time);
}, 
```

# google-chrome - Jquery POST 在 Chrome 中不起作用

> ID：10600908
> 
> 赞同：1
> 
> 时间：2012-05-15T12:43:01.783
> 
> 标签：google-chrome, jquery

我有一个使用 jQuery 用 javascript 制作的函数。我用它来向服务器发送一些信息

```
function cart(val, theImg)
{
    var url = location.protocol+'//'+location.hostname+'/';
    if(!theImg.hasClass('added'))
    {
        jQuery.post(url,{ajax:'1',compedit:'shopping-cart',q:'1',tocart:val},function(result){
            theImg.attr({'src':'/media/images/substract_from_cart.png','title':'Substract from cart','alt':'Substract from cart'}).addClass('added');
            jQuery('.btip').text('Substract From Cart');                 
        }, 'text');
    }
    else
    {
        jQuery.post(url,{'ajax':'1','compedit':'shopping-cart','q':'0','tocart':val},function(result){
            theImg.attr({'src':'/media/images/add_to_cart.png','title':'Add To Cart','alt':'Add To Cart'}).removeClass('added');
            jQuery('.btip').text('Add To Cart');                 
        }, 'text');
    }
} 
```

我的问题是，此功能不会将数据发送到 Webkit 浏览器（Chrome、Safari）中的服务器！任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:47:01.767

第一个`post`不对添加`'`：

```
 jQuery.post(url,{'ajax':'1','compedit':'shopping-cart','q':'1','tocart':val}.. 
```

# android - 更改按钮颜色导致应用程序崩溃

> ID：10600909
> 
> 赞同：-1
> 
> 时间：2012-05-15T12:43:03.933
> 
> 标签：android, android-button

我想更改按钮颜色，所以我使用了以下选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true" android:color="#FFFF00"/>
    <item android:state_pressed="true" android:color="#FFFF00"/>

    <item>
        <shape>
            <gradient android:startColor="#ff00ff00" android:endColor="#bb00ff00" android:angle="270" />
            <stroke android:width="1dp" android:color="#bb00ff00" />
            <corners android:radius="3dp" />
            <padding android:left="10dp" android:top="10dp" android:right="10dp" android:bottom="10dp" />
        </shape>
    </item>

</selector> 
```

并像这样使用它

```
<Button
    android:id="@+id/SODEOD"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="SOD/EOD" 
    android:background="@drawable/firstbuttoncolorstyle" 
    /> 
```

但这会导致应用程序崩溃

知道为什么会发生这种情况，以及如何解决它，这就是日志猫

```
05-15 15:25:06.491: E/AndroidRuntime(666): FATAL EXCEPTION: main
05-15 15:25:06.491: E/AndroidRuntime(666): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.appnetics/com.appnetics.TryNewLayoutActivity}: android.view.InflateException: Binary XML file line #92: Error inflating class <unknown>
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.os.Looper.loop(Looper.java:123)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-15 15:25:06.491: E/AndroidRuntime(666):  at java.lang.reflect.Method.invokeNative(Native Method)
05-15 15:25:06.491: E/AndroidRuntime(666):  at java.lang.reflect.Method.invoke(Method.java:521)
05-15 15:25:06.491: E/AndroidRuntime(666):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-15 15:25:06.491: E/AndroidRuntime(666):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-15 15:25:06.491: E/AndroidRuntime(666):  at dalvik.system.NativeStart.main(Native Method)
05-15 15:25:06.491: E/AndroidRuntime(666): Caused by: android.view.InflateException: Binary XML file line #92: Error inflating class <unknown>
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
05-15 15:25:06.491: E/AndroidRuntime(666):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-15 15:25:06.491: E/AndroidRuntime(666):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.Activity.setContentView(Activity.java:1647)
05-15 15:25:06.491: E/AndroidRuntime(666):  at com.appnetics.TryNewLayoutActivity.onCreate(TryNewLayoutActivity.java:24)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-15 15:25:06.491: E/AndroidRuntime(666):  ... 11 more
05-15 15:25:06.491: E/AndroidRuntime(666): Caused by: java.lang.reflect.InvocationTargetException
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.widget.Button.<init>(Button.java:65)
05-15 15:25:06.491: E/AndroidRuntime(666):  at java.lang.reflect.Constructor.constructNative(Native Method)
05-15 15:25:06.491: E/AndroidRuntime(666):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
05-15 15:25:06.491: E/AndroidRuntime(666):  ... 24 more
05-15 15:25:06.491: E/AndroidRuntime(666): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/firstbuttoncolorstyle.xml from drawable resource ID #0x7f020001
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.content.res.Resources.loadDrawable(Resources.java:1697)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.view.View.<init>(View.java:1885)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.widget.TextView.<init>(TextView.java:327)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.widget.Button.<init>(Button.java:69)
05-15 15:25:06.491: E/AndroidRuntime(666):  ... 28 more
05-15 15:25:06.491: E/AndroidRuntime(666): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag requires a 'drawable' attribute or child tag defining a drawable
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:165)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:788)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
05-15 15:25:06.491: E/AndroidRuntime(666):  at android.content.res.Resources.loadDrawable(Resources.java:1694)
05-15 15:25:06.491: E/AndroidRuntime(666):  ... 32 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T13:01:08.670

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:state_focused="true">
    <shape>
        <solid android:color="#FFFF00"/>
        <stroke android:width="1dp" android:color="#bb00ff00" />
        <corners android:radius="3dp" />
        <padding android:left="10dp" android:top="10dp" android:right="10dp" android:bottom="10dp" />
    </shape>
</item>
<item android:state_pressed="true">
    <shape>
        <solid android:color="#FFFF00"/>
        <stroke android:width="1dp" android:color="#bb00ff00" />
        <corners android:radius="3dp" />
        <padding android:left="10dp" android:top="10dp" android:right="10dp" android:bottom="10dp" />
    </shape>
</item>
<item>
    <shape>
        <gradient android:startColor="#ff00ff00" android:endColor="#bb00ff00" android:angle="270" />
        <stroke android:width="1dp" android:color="#bb00ff00" />
        <corners android:radius="3dp" />
        <padding android:left="10dp" android:top="10dp" android:right="10dp" android:bottom="10dp" />
    </shape>
</item> 
```

它应该工作...

你需要有一个形状在每个`<item>`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:58:07.353

**tab-bg_selected.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" 
        android:shape="rectangle">

        <corners  android:radius="8dp" />
        <gradient android:startColor="#FEE5AC" android:centerColor="#FEF1B5"
                    android:endColor="#FCD59C" android:angle="-90" />

    </shape> 
```

**tab_bag_unselected.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <!-- <corners  android:bottomLeftRadius="5dp" android:bottomRightRadius="5dp"/> -->

    <gradient android:startColor="#0000FF" android:centerColor="#0000FF" 
    android:endColor="#0000FF"
        android:angle="135" />

</shape> 
```

**tab_bg_selecter.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Active tab -->
    <item android:drawable="@drawable/tab_bg_selected" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>

    <!-- Inactive tab -->
    <item android:drawable="@drawable/tab_bg_unselected" android:state_focused="false" android:state_pressed="false" android:state_selected="false"/>

    <!--
    <item android:state_pressed="true" android:drawable="@android:drawable/alert_dark_frame" />
     Selected tab (using d-pad)
    <item android:state_focused="true" android:state_selected="true"
        android:state_pressed="false" android:drawable="@color/transparent" />
    -->

</selector> 
```

# ant - 我们如何在ant中使用搜索特定目录下的文件

> ID：10600915
> 
> 赞同：0
> 
> 时间：2012-05-15T12:43:21.113
> 
> 标签：ant

大家好，这是我用于检查特定文件是否存在的代码，例如`${file}=license`

```
<target name="File.check" >
   <condition property="File.exists" >
      <available file="${File}" type="file" />
    </condition> 
```

尽管如果存在的文件完全是许可证，它可以正常工作，但有时该文件可以是 license.txt 甚至是大写的。

所以我希望我上面的代码在所有条件下都能工作，即使文件是许可证或许可证或许可证或 LICENSE.txt 或任何以 l 或 L 开头的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:20:11.037

包含所有可能的变体可能是最简单的，因为[文件属性](https://stackoverflow.com/questions/10600915/how-can-we-use-search-for-a-file-under-particular-directory-in-ant)需要一个真实的文件并且不允许使用通配符：

```
 <condition property="File.exists" >
    <or>
      <available file="license.txt" type="file" />
      <available file="LICENSE.txt" type="file" />
      <available file="license" type="file" />
      <available file="LICENSE" type="file" />
    </or>
 </condition> 
```

另一种可能性是[写你自己的条件](https://ant.apache.org/manual/Types/custom-programming.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:55:03.460

您可以使用[包含](https://ant.apache.org/manual/Tasks/conditions.html#contains)条件来检查是否`${file}`包含文本“许可证”。它甚至有一个`casesensitive`论点。不确定是否

> 任何以 l 或 L 开头的东西

不过是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:59:52.873

```
<target name="SearchForfile">
    <delete dir="../filepresent" />
        <copy todir="../filepresent" failonerror="yes" flatten="true">
            <fileset dir="../result/unzip/${param1}" casesensitive="false"> 
                <include name="**/*license*"/> 
            </fileset>
        </copy>
    <antcall target="CheckFileExistance"/>  
</target> 
```

在该`"CheckFileExistance"`目标中，只需检查`"filepresent"`文件夹是否存在，如果存在则文件存在于您的源目录中，否则如果`"filepresent"`文件夹不存在则意味着文件不存在于您的搜索目录中的任何位置...我希望这一切都清楚

# c# - Directory.GetFiles 不返回文件

> ID：10600921
> 
> 赞同：2
> 
> 时间：2012-05-15T12:43:37.410
> 
> 标签：c#, windows, filesystems

当我执行以下代码时，我在 c:\windows\System32 中手动创建了一个名为 AAAAA.txt 的文本文件：

```
var sys32Files = Directory.GetFiles(@"C:\windows\System32"); 
```

它返回一堆文件，但 AAAAA.txt 不在该列表中。AAAAA.txt 的所有权限都与返回的文件相同。

有人可以解释这里可能是什么问题吗？

*是的，我以管理员身份运行。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T12:47:11.230

您有一台 64 位机器并且正在运行一个 32 位进程。[文件系统重定向器](http://msdn.microsoft.com/en-us/library/aa384187.aspx)意味着被`C:\Windows\system32`重定向到`C:\Windows\SysWOW64`. 如果要在其中查找文件，`C:\Windows\system32`可以使用`C:\Windows\sysnative`别名。或者编译为 64 位。

当然，您首先不应该在系统目录中创建文件。它属于 Windows，你应该别管它。

# android - 如何以编程方式在android中创建虚拟卡？

> ID：10600929
> 
> 赞同：1
> 
> 时间：2012-05-15T12:43:53.200
> 
> 标签：android, vcf-vcard

我想为 android 创建一个虚拟卡，并且我有一个包含以下字段的 android 活动：

1) 我的名字
2) 地址
3) 联系电话
4) 收件人的电子邮件

我想将此信息通过电子邮件发送给另一个 android 接收器，如果该用户单击它，它应该让他们可以选择将此信息添加到他的联系人/电话簿中。

我在谷歌上搜索过，但我得到的只是如何“如何创建虚拟 SD 卡”，仅此而已。

请注意它是一个与编程相关的问题。

# mongodb - MongoDB 条目数量

> ID：10600931
> 
> 赞同：3
> 
> 时间：2012-05-15T12:44:04.470
> 
> 标签：mongodb, querying

如何获取仅包含特定键中唯一数据的条目数量（在集合中）？

例如：

```
{
   "_id": ObjectId("4f9d996eba6a7aa62b0005ed"),
   "tag": "web" 
}
{
   "_id": ObjectId("4f9d996eba6a7aa62b0006ed"),
   "tag": "net" 
}
{
   "_id": ObjectId("4f9d996eba6a7aa62b0007ed"),
   "tag": "web" 
}
{
   "_id": ObjectId("4f9d996eba6a7aa62b0008ed"),
   "tag": "page" 
} 
```

具有唯一键“tag”的条目数量，并返回 3。

ps：如果可能的话，如何获取所有找到的键的唯一值列表：“tag”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:20:05.767

要获取`unique`值列表，您需要`DISTINCT`或`GROUP BY`。MongoDB 支持这两种范式：

*   [清楚的](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)
*   [团体](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)

要获取所有不同`tag`值的列表，您将运行：

```
db.mycollection.distinct('tag'); 
```

或者

```
db.runCommand({ distinct: 'mycollection', key: 'tag' }) 
```

您只需查看`length`结果即可获得计数：

```
db.mycollection.distinct('tag').length 
```

注意`distinct`文档中的命令：`Note: the distinct command results are returned as a single BSON object. If the results could be large (> max document size – 4/16MB ), use map/reduce instead`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:22:42.603

您可以使用[Map/Reduc](http://www.mongodb.org/display/DOCS/MapReduce)对条目进行分组。

我创建了名为“内容”的内容，并在其中插入了 4 个数据（您在上面列出的）。然后通过使用下面的 map/reduce 代码，您可以按它们的标签对它们进行分组。最终结果被写入内容名称“result”。

```
var map = function() {
    emit(this.tag, 1);
};

var reduce = function(key,values){
    var result = 0;
    for(v in values){
        result += values[v];
    }
    return result;
};

res = db.content.mapReduce(map,reduce,{out:"result"}}); 
```

结果如下所示。

```
{ "_id" : "net", "value" : 1 }
{ "_id" : "page", "value" : 1 }
{ "_id" : "web", "value" : 2 } 
```

# php - 上传到网络服务器时源代码不起作用？

> ID：10600936
> 
> 赞同：0
> 
> 时间：2012-05-15T12:44:16.500
> 
> 标签：php, svn, .htaccess

该站点运行正常，但在我修改了代码文件之后。该网站停止工作。我检查了错误日志并尝试了其他调试解决方案，但该站点根本无法正常工作。它显示一个空白页。错误日志不显示任何内容。目录索引设置为 index.php。请帮助我。[注意：错误报告已打开，它也是一个普通的 php 代码文件，当我回显某些内容时，它不会显示任何内容。]

```
<?php
  include_once('../../includes/SiteSetting.php');
  include_once('../../includes/classes/class.forum.php');

  $forumObj = new Forum();

  #--------GEtting Forum List-------------
  $categories = $forumObj->getCategories();
  if(!empty($categories) && count($categories)>0)
  {
    $i=0;
    foreach($categories as $category)
    {
      $forums = $forumObj->getForums($_GET['search'], $category['categoryid']);
      $ForumArray[$i] =  $category;
      $ForumArray[$i]['forums'] = $forums;
      $i++;
    }
  }
  else
  {
    $ForumArray[$i]['forums'] ="";
  }
  $smarty->assign("forumarray", $ForumArray);
?> 
```

这是 htaccess 选项 +FollowSymLinks +ExecCGI

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:01:29.220

您在错误日志中看到了什么？如果您无法弄清楚，请检查其他页面是否正常工作。您也可以尝试使用相同的代码创建一个新文件并删除现有文件。

# c - Micrium uC/OS-III RTOS 中的 Malloc

> ID：10600942
> 
> 赞同：2
> 
> 时间：2012-05-15T12:44:34.793
> 
> 标签：c, memory-management, malloc, rtos, micrium

我们使用的是 Micrium 的 uC/OS-III RTOS。我们正在尝试在 RTOS 上返回 malloc 的值。当我们在 RTOS 启动之前执行 99999 的 malloc（对于 RAM 来说太多）时，我们会得到一个空指针，这正是我们所期望的。

当我们在 RTOS 启动和任务中执行相同的 malloc 时，我们不会得到空指针，这是我们不期望的。不过，系统此时确实冻结了。

有人对此有解释吗？

提前致谢

编辑：

信息：我们使用的是瑞萨电子的 RX62N 微控制器和 GNURX 编译器

该程序实际上并没有冻结。程序“认为”它得到了一个有用的指针（不是 NULL 指针），并继续运行。在某个时刻，程序将其程序计数器更改为 00000000 并停止。所以它不会进入异常，因此我们无法捕获它。

但是，在 RTOS 启动之前调用 malloc 和在 RTOS 启动时调用*malloc*时会有所不同。不同之处在于*malloc*的真正深层汇编代码。

在某一点上执行以下指令

```
CMP         R1,R7
BGTU.B      0FFF802C0H
ADD         R14,R7 
```

当我们试图分配太多 RAM 时，**BGTU.B**指令不应分支，然后程序继续执行**ADD**指令。这在启动 RTOS 之前执行*malloc*时非常有效，但在我们之后执行时失败。

```
These are the values I get in several cases

Outside RTOS (allocable number: 10)
R1: 00008348
R7: 00000014

Outside RTOS (not allocable number: 9999)
R1: 00008348
R7: 00002718

Inside RTOS (allocable number: 10)
R1: FFFFF9D0
R7: 00000014

Inside RTOS (not allocable number: 9999)
R1: FFFFF9D0
R7: 00002718 
```

我希望整个情况都很清楚，我试图尽可能地解释它：P

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:16:53.210

除了示例中的第二种情况，R7 似乎包含分配的大小（请求的大小 + 对齐 + 堆管理数据）。直观地说，R7=0x2718 对应于 999 字节的分配，所以我怀疑这可能是一个错字。

我猜 R1 包含将分配内存的堆块的大小，因为那时 CMP 才有意义。如果块不够大，它将失败。

但是当 RTOS 运行时，R1 中的值变得非常大，显然是不正确的。如果您的堆损坏，则可能会发生这种情况。如果您超出堆上分配的缓冲区，就会发生这种情况。如果您从堆中分配线程堆栈，并且堆栈太小，那将具有相同的效果。您的线程堆栈必须足够大，以应对最坏情况的调用堆栈，以及 RTOS 支持上下文切换所需的任何内容。即使您没有从堆中分配堆栈，如果线程堆栈与堆内存相邻，堆栈溢出也可能产生相同的效果。

堆损坏的另一种方法是在多个线程中同时执行分配或解除分配，而不强制互斥或临界区。标准库堆管理不太可能是线程安全的，除非您进行了必要的修改以将其与您的 RTOS 集成 - 如果 RTOS 和标准库来自同一供应商（例如，如果两者都提供），则可能是这种情况与编译器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T19:25:05.070

我们发现在 UCOS-III 操作系统启动之前调用 malloc 可以正常工作。当从线程调用时，它会失败并返回一个 NULL 指针。我怀疑这是由于对堆栈的检查，当在可以具有任意放置堆栈的线程中运行时，这当然是无效的。我可以在映射文件中看到该库引用了特定的 sbrk (lib_a-sbrk.o) 函数，但我找不到该函数的任何来源。众所周知，默认的 GNU sbrk 函数会检查当前堆栈指针以查看当前中断是否超出 SP 并失败。

不幸的是，我们必须依赖 malloc，因为我们使用的是复杂的 C++ 库，因为我们有兆字节的内存，我们不关心碎片，我们只希望 malloc 工作。实际上，我们甚至不关心重入，因为我们只在单个线程中使用 malloc。

是否有可能阐明堆函数是如何在库中实现的。我们使用的是 ARM-9 芯片。

# php - php网站：测量用户点击和显示响应之间的时间

> ID：10600943
> 
> 赞同：1
> 
> 时间：2012-05-15T12:44:40.883
> 
> 标签：php, mysql, hosting

我正在尝试查看是否有这样的工具可以解决我的问题。

我有一个 php 网站，每次单击链接时，响应时间都很长。我在看mysql查询，没有慢查询。所以，我想知道是否有任何工具可以在显示页面时查看哪个部分慢？是数据库吗？是主机服务器吗？是别的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:47:41.657

我一直使用[YSlow](http://yslow.org/)来衡量在浏览器中花费的时间。在尝试优化网页时，经常会忘记前端加载时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:48:31.707

首先，您的浏览器在这里可能会有很大帮助。

Chrome（control maj J）为此提供了有用的工具。

其余的，我想你需要一些自定义分析你的 php sql 调用......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T12:49:37.490

也有网站测量它。一个例子[http://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)

# java - Android 存储位图数组

> ID：10600945
> 
> 赞同：0
> 
> 时间：2012-05-15T12:44:48.497
> 
> 标签：java, android, bitmap, android-canvas

我想知道在 Android 中哪个是存储位图的数组实现的最佳选择。存储位图是个好主意`ArrayList<Bitmap>`还是不是一个好的解决方案。

我试图在我的应用程序中存储以编程方式创建的 5 个不同的位图并将它们存储在数组中，它们将它们绘制到 e 画布上，但它无法正常工作。

这是我正在做的事情：

```
//beginning
ArrayList<Bitmap> temp = new ArrayList<Bitmap>();

//in some function where mBitmap is been created
temp.add(mBitmap);

//in my custom class which extends View
Bitmap bm = Bitmap.createBitmap(temp.get(temp.size()-1));
mCanvas.drawBitmap(bm);
invalidate(); 
```

但是来自 temp 的位图从未添加到我的`mCanvas`.

任何想法为什么以及在Android / Java中将位图存储在Array中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:47:43.830

更好地使用[LruCache](http://developer.android.com/reference/android/util/LruCache.html)进行位图缓存。请阅读[有效地显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T09:44:40.497

这不是在 ArrayList 中存储位图的最佳方式，使用 LruCache 和软引用

```
 LruCache<String, SoftReference<Bitmap>> cache;
 cache = new LruCache<String, SoftReference<Bitmap>>(8*1024*1024) 
```

# xib - 如何将现成的项目（使用应用程序委托创建和启动但没有 xib、nib）添加到另一个项目

> ID：10600979
> 
> 赞同：1
> 
> 时间：2012-05-15T12:46:29.690
> 
> 标签：xib, nib

我有一个现成的项目（使用应用程序委托创建和启动，但没有 xib、nib）。现在我想从另一个项目调用并启动它。但是我不能使用 initwithnib，如何从另一个项目中包含并启动这个现成的项目？更具体地说，如何将只有自己的 appDelegate 和 Mainwindow.xib 文件的 Apple 示例代码“TableViewUpdates (TVAnimationsGestures.xcodeproject)”添加和集成到我自己的应用程序中？谢谢！或者您可以将 xib 文件添加到 Apple 的示例代码“TableViewUpdates (TVAnimationsGestures.xcodeproject)”中，以便我可以在我的另一个项目中使用 initWithNib 来调用和运行示例代码。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:19:15.927

我在 Xcode 4.3.2 上工作。

1.  创建单视图单视图应用程序。
2.  展开 MoviePlayer 示例中的所有文件夹。选择除 info.plist、main、Frameworks、Products 文件夹、readme.txt、MoviePlayer.project 之外的所有文件。**将**它们复制到新的空项目中。不要忘记检查“添加到目标”。
3.  在目标的构建阶段选项卡中添加了 MediaPlayer.framework（在链接二进制与库中）
4.  将 MainWindow.xib 中的所有对象复制到您自己的 viewController 的 xib。

*比在 ViewController.h 中：*

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UITabBarController *tabBarConroller;

@end 
```

将您的 tabBarController 从 ViewController.xib 连接到属性。

*比在 ViewController.m 中：*

```
@implementation ViewController
@synthesize tabBarConroller;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview:tabBarConroller.view];
}

- (void)viewDidUnload
{
    [self setTabBarConroller:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}
...other appdelegateMethods ...
@end 
```

7\. 检查 viewController.xib 中的所有对象是否都有必要的出口。
6\. 编辑 > 重构 > 转换为 ARC。（接下来，好的……）

完成。

# c++ - std::logic_error 而不是 return false

> ID：10600983
> 
> 赞同：6
> 
> 时间：2012-05-15T12:46:36.077
> 
> 标签：c++, exception-handling, validation

我正在寻找关于使用`std::logic_error`而不是使用复杂的嵌套 if/elseif 返回 true/false 列表的意见。

我想从很多类似的功能中移出，如下所示

```
bool validate_data(){
    std::vector<int> v; 
    //fill with data
    if( v.find(10) == v.end() ){
       return false;
    } 
    // other checks that return false
} 
```

到

```
bool validate_data(){
    std::vector<int> v; 
    //fill with data
    if( v.find(10) == v.end() ){
       throw std::logic_error("error message");
    } 
    // other checks that return false
} 
```

并在一个`try-catch`块中调用所有这些函数列表。

因为它是一个派生的，`std::exception`我可能不知道这是否是一个好主意。

有人像下面的例子那样使用吗？

非常感谢

AFG

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:04:57.077

仅在异常情况下使用异常。

发现值 10 不是例外情况吗？还是只是正常情况？

将您的方法从 validate_data 重命名为 is_data_valid 会更清晰。如果该方法返回 true，则它是有效的。如果它返回 false，则不是。无需为此使用异常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T13:06:16.013

您应该只在特殊情况下使用例外。当返回值是真或假的可能性不小时，使用（和检查）返回值的效率要高得多。只有当抛出的可能性小到超过返回值检查的成本时，异常才会更有效率。

因此，如果无效数据的可能性非常低，那么就例外。否则，当前的解决方案不仅应该很好，而且效率也稍高一些（因为投掷和处理相对昂贵）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T13:03:51.223

由于调用了您的函数，因此`validate_data()`我只会在函数中存在任何内部错误并使用`true`or`false`表示该函数确实验证了输入，但它是`valid`( `return true`) 或无效 ( `return false`) 时才抛出异常。

这不会阻止您使用多个`if() else if() else`构造，但它会使代码更清晰，更容易区分数据是否无效或发生内部错误。

```
try {
  bool valid = validate_data(foo);
  /* process data or break if invalid */
} catch (std::exception &ex) {
  /* internal error happened */
} 
```

如您所见，它会使您的代码更长，恕我直言，更干净。

# java - Android：OpenGL：glGenTextures 在构造函数中不起作用？

> ID：10600984
> 
> 赞同：1
> 
> 时间：2012-05-15T12:46:39.337
> 
> 标签：java, android, opengl-es, sdk

谁能告诉我为什么`glGenTextures()`不在我的构造函数中工作？

这是我的项目的设置方式：

*   使用自定义渲染器调用`.draw`当前活动阶段。
*   创建阶段时，它将自己（其构造函数的结束行）分配给 static `Global.activeStage`。
*   现在渲染器调用`.draw`当前活动的阶段，其中引用保留在`Global.activeStage`.
*   在舞台上，我有一个函数可以加载舞台上需要的所有纹理。
*   如果我第一次调用这个函数`.draw`是没有问题的。
*   但是，如果我在构造函数中调用它，则一切正常，除了`glGenTextures()`-它创建一个零值而不是 1..2..3 等等。
*   在这两种情况下，都会使用全局`GL10`引用而不是`.draw`获取引用，所以这不是问题。

似乎只有当已经引用了我正在使用的当前阶段时，一切才有效（如果创建了阶段，例如构造函数已经运行）。

我不确定它是否相关，但舞台是在`onCreateSurface`结束后在线程中创建的。

如果您说哪些部分相关，我可以发布一些代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:00:18.660

我很确定您必须`openGL`在与`Thread`关联的`openGL`. 这就是为什么当`draw()`从渲染器调用的方法（在 GL 线程上运行）而不是从构造函数（如你所说的在另一个线程上运行）调用它时它可以工作的原因。

# javascript - 如何添加表格第一个列标题。整个表来自 table.js 库

> ID：10600986
> 
> 赞同：0
> 
> 时间：2012-05-15T12:46:50.720
> 
> 标签：javascript, jquery, json

```
BA.Table.prototype.drawHeader = function()
{
    if ( ! this.headHTML ) {
        this.headHTML = $('<thead/>');
        var tr = $('<tr/>');

        var didSort = false;

        if ( ! this.config.noIndex ) {
            var th = $('<th class="table_index"></th>');
            th.appendTo(tr);
        }

        for( var ix = 0; ix < this.children.length; ix++ ) {
            var child = this.children[ix];
            if ( child instanceof BA.InputHidden
                 || ( child.config && child.config.hidden ) )
            {
                continue;
            }
            if ( ! child.config.id ) {
                child.config.id = 'c' + ix;
            }
            var label = child.config.label ? child.config.label : '';

            var labelHTML;
            if ( child.config.title ) {
                labelHTML = $('<th><span title="' + child.config.title + '">' + label + '</span></th>');
            } else if ( child.config.sort ) {
                var a = $('<a href="#" id="sort_' + child.config.id + '">' + label + '</a>');
                a.bind('click', {t: this, i: ix}, function(event) { event.data.t.sortByColumn(event.data.i); return false; });
                if ( child.config.sorted ) {
                    var img = child.config.sorted > 0 ? 'up' : 'down';
                    $('<img src="' + window.IMAGES_PATH + img + '.gif"/>').appendTo(a);
                }
                labelHTML = $('<th/>');
                a.appendTo(labelHTML);
            } else {
                labelHTML = $('<th>' + label + '</th>');
            }

            labelHTML.appendTo(tr);
            child.hideLabel = true;
        }

        if ( this.config.canAddRows === undefined || this.config.canAddRows == true
             || this.config.canDeleteRows
        ) {
            var labelHTML = $('<th class="action"> </th>');
            $(labelHTML).appendTo(tr);
        }
        tr.appendTo(this.headHTML);
        this.headHTML.appendTo(this.tableHTML);
    }
}; <br> 
```

以上是创建表的常用库。使用json对象绘制表格下面是php页面

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
<script type="text/javascript">
var listLayout = {
    o: 'Page',
 c: [
        { o: 'Form', id: 'list', name: 'list', c: [
            { o: 'Table', canAddRows: false, value: [],
                caption: { c: [
                  { o: 'Button', label: '<?php echo lang("add_new_volume");?>', id: 'vr_add_icon' }
              ]},
              c: [             
                { o: 'HTML', label: '<?php echo lang('volumes');?>', id: 'volumes_', 'class': 'name' },
                { o: 'HTML', label: '<?php echo lang('type');?>', id: 'type_', 'class': 'type' },
                { o: 'HTML', label: '<?php echo lang('drives');?>', id: 'drives_', 'class': 'driver' },
                { o: 'HTML', label: '<?php echo lang('usage');?>', id: 'usage_', 'class': 'usage' },
                { o: 'HTML', label: '<?php echo lang('size');?>', id: 'size_', 'class': 'size' },
                { o: 'HTML', label: '<?php echo lang('status');?>', id: 'status_', 'class': 'status' },
                { o: 'HTML', label: '<?php echo lang('operations');?>', id: 'action_' }
            ]},
            {
                o: 'HTML',
                html: '<div class="mv_ajax_status"></div>'
            }
        ]}
    ] 
```

![在此处输入图像描述](../Images/105f9ed7a1c9700de73b6f6779507737.png)

在上图中，缺少第一个列标题.. 如果没有编辑库，我如何为第一列添加 Sr.no。我需要第一个列标题名称是 Sr.no。但没有向主库添加任何内容..

```
if ( ! this.config.noIndex ) {
            var th = $('<th class="table_index"></th>');
            th.appendTo(tr);
        } 
```

如果我在 `var th = $('<th class="table_index">Sr.no</th>');`它上面添加了..但是不添加它们我怎么能得到第一个列标题。?
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:51:06.937

尝试 ：

```
$('th:first').text('Sr.no'); 
```

使用[`:first`选择器](http://api.jquery.com/first-selector/)选择第一个`th`

# jquery - 如何在移动应用程序中更改文本输入元素的大小？

> ID：10600990
> 
> 赞同：1
> 
> 时间：2012-05-15T12:47:09.847
> 
> 标签：jquery, html, css

我正在设计一个移动应用程序，我正在尝试更改 html 文本元素的大小。但是“大小”属性没有显示出任何影响。我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:49:57.493

要动态更改大小，请使用[`css()`](http://api.jquery.com/css/)jQuery 中的方法：

```
$("#element").css({
    width: 100,
    height: 100
}); 
```

或者没有jQuery的另一种方式：

```
with (document.getElementById("element").style) {
    width = "100px";
    height = "100px";
} 
```

* * *

要设置静态大小，请使用 CSS`width`和`height`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:49:16.850

`size`属性是上古遗物。

使用 CSS 定义`input`元素的尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:51:40.110

HTML

```
<input type="text" class="input-text" /> 
```

CSS

```
.input-text
{
width:300px;
height:30px;
font:Verdana, Geneva, sans-serif;
font-size:30px;
} 
```

# php - 将文件上传到Linux服务器根文件夹外的文件夹？

> ID：10600992
> 
> 赞同：1
> 
> 时间：2012-05-15T12:47:11.297
> 
> 标签：php, linux, file-upload

在我的项目中，我必须将一些视频文件上传到位于根文件夹之外的文件夹中。我正在使用简单`move_uploaded_file`的 php 函数来上传文件。我已经尝试过使用下面的代码。

```
$source  = $_FILES['Filedata']['tmp_name'];
$targetFile = '/usr/local/WowzaMediaServer-3.1.1/content/video.mp4'
move_uploaded_file($source,$targetFile); 
```

但它不起作用。我们可以通过`move_uploaded_file`. 如果没有，建议一个更好的选择来做到这一点。

我见过一些类似的问题，但没有任何帮助。所以任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:35:16.473

你确定你不在chroot监狱里吗？

如果是这样，您的“绝对”路径名可能指向错误的地方——某个不存在的地方。

如果是这样，请将路径更改为指向监狱内的某个位置。

可能需要将`mount --bind`您希望将其放入监狱中某个位置的目录。（请注意，符号链接不适用于越狱。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T18:00:09.243

我将假设您出于此答案的目的使用 Apache。

首先，上传的文件正常吗？您可能遇到问题的一个可能原因是 tmp 目录不可被网络服务器写入，或者无法读取。假设没问题，那么 move_uploaded_file 应该可以正常工作。

在您的 DOCUMENT_ROOT 旁边创建一个文件夹，我们称之为“文件存储”。确保它可由 www-data 或任何运行 apache 的用户写入。现在，您应该能够将文件移动到该文件夹​​中。请注意，它们通常由 www-data:www-data 拥有 - 或者您的服务器设置为运行的任何用户和组。我将“filestore”文件夹放在 DOCUMENT_ROOT 文件夹旁边的原因是您可以确保网络服务器可以读取到 DOCUMENT_ROOT 的文件路径。否则，您将面临路径不可读的文件夹部分风险，这将阻止您死亡。例如，如果您将 /usr/local/media 作为目标文件夹，并且 /usr/local 不能被网络服务器读取（和可执行），那么您就完蛋了。

如果所有这些都有效，并且您绝对必须在其他地方拥有媒体，那么您可以在任何地方拥有“filestore”文件夹，只要它的整个路径可以被网络服务器读取/执行。检查路径中的每个目录。

如果这些上传的文件是由其他用户通过网络下载的，那么“filestore”文件夹只需要具有 700 的权限，因为它始终是读取它们的网络服务器的用户。如果其他用户需要访问权限，通常是因为以不同用户身份运行的其他软件需要使用它们，那么您可能需要权限为 750 以允许组成员读取（和执行）目录。您还需要将该其他用户添加到 www-data 组。

对于下载，您需要编写一个简单的脚本，在进行一些身份验证检查后将文件转储到浏览器。这样，您可以避免仅通过 http 访问媒体而无需先进行任何身份验证 - 这可能会使您的服务成为非法文件的有吸引力的地方（侵犯版权是这里最不关心的问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T13:02:04.167

这很可能是一个简单的权限问题，而且很容易解决。

1.  找到 apache 使用的用户。为此，请打开您的 httpd.conf 文件并查找以下内容：

    用户 apache
    组 apache

2.  更改您尝试上传到的文件夹的所有权。

    chown -R apache.apache /usr/local/WowzaMediaServer-3.1.1/content/

3.  更改文件夹的权限

    chmod -R 775 /usr/local/WowzaMediaServer-3.1.1/content/

应该就是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T16:17:29.787

这是一种危险的方法，因为它为 apache 用户提供了 root 权限，因此请谨慎使用。

将 apache 用户添加到 sudoers 列表中 - 这将允许您以 root 身份在 php 中通过`system('sudo the_command')`. 然后将上传的文件移动到 apache 用户可以写入的临时位置（例如，在 doc 根目录中创建一个“tmp”目录）。然后使用`system("sudo mv \"$source\" \"$destination\"");`将临时文件移动到它的最终位置。

您可以通过执行找到 apache 用户`<?php echo exec('whoami'); ?>`。然后将以下条目添加到 sudoers `the-apache-user ALL=(ALL) NOPASSWD: ALL`。用于`visudo`添加 sudoer 条目。

例子：

```
$source  = $_FILES['Filedata']['tmp_name'];
$targetFile = '/usr/local/WowzaMediaServer-3.1.1/content/video.mp4'

$tempLocation = 'tmp/temp-file.mp4';

move_uploaded_file($source, $tempLocation);

system('sudo mv "' . $tempLocation . '" "' . $targetFile . '"'); 
```

**编辑：**相关问题 -[如何以 root 身份运行 PHP exec()？](https://stackoverflow.com/questions/1598231/how-to-run-php-exec-as-root)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T07:39:31.613

总是遇到代码问题，查看服务器日志或更容易打开错误显示。也就是说，您的问题可能与`upload_tmp_dir`设置有关。检查 a`phpinfo()`讲述的内容或查看您的`php.ini`文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T02:42:36.617

更好的解决方案是将文件写入您可以写入的位置（即在 webroot 下），然后从媒体目录创建一个符号链接到您写入的位置。

例如：

*   Web 根目录是 /var/www/html
*   你想要它在 /usr/local/WowzaMediaServer-3.1.1/content/
*   创建目录 /var/www/html/mediaserver/content/
*   在 /var/www/html/mediaserver/content/ 777 上设置权限（以便 apache 可以写入它）
*   将文件从 /usr/local/WowzaMediaServer-3.1.1/content/ 复制到 /var/www/html/mediaserver/content/
*   删除 /usr/local/WowzaMediaServer-3.1.1/content/ （只是“内容”目录）
*   创建从 /usr/local/WowzaMediaServer-3.1.1/content/ 到 /var/www/html/mediaserver/content/ 的符号链接

然后你有读/写的权限，媒体服务器也应该有。唯一的问题是媒体服务器是否经过培训不阅读符号链接 - 但您可以足够快地找到它。