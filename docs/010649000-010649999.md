# StackOverflow 问答 10649000-10649999

# python - 从一个字典中提取两个字典

> ID：10649001
> 
> 赞同：0
> 
> 时间：2012-05-18T08:07:42.007
> 
> 标签：python, django

我发送 post 参数，如

```
css=request.POST['q']
css=css.encode('utf-8') 
```

和 css 有类似的内容

```
{
    "container": {
        "border-color": "white",
        "border-width": "0px",
        "height": "419px",
        "width": "200px",
        "border-style": "solid",
        "position": "relative",
        "background-color": "white"
    },
    "elemorder": {
        "productcode": {
            "font-size": "14px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "40px",
            "width": "200px",
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "hidden",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center"
        },
        "name": {
            "font-size": "14px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "40px",
            "width": "200px",
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "hidden",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center"
        },
        "url": {
            "font-size": "14px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "40px",
            "width": "200px",
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "hidden",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center"
        },
        "price": {
            "font-size": "14px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "40px",
            "width": "200px",
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "hidden",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center"
        },
        "id": {
            "font-size": "14px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "40px",
            "width": "200px",
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "hidden",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center"
        },
        "imgurl": {
            "font-size": "14px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "227",
            "width": 200,
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "hidden",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center",
            "left": 0,
            "top": 80
        },
        "desc": {
            "font-size": "13px",
            "line-height": "18px",
            "color": "blue",
            "border-width": "0px",
            "letter-spacing": "0px",
            "text-decoration": "none",
            "height": "69",
            "width": "200px",
            "border-color": "white",
            "font-weight": "normal",
            "font-style": "normal",
            "position": "absolute",
            "overflow": "auto",
            "font-family": "Arial",
            "border-style": "solid",
            "display": "block",
            "background-color": "#3385D6",
            "text-align": "center",
            "left": 0,
            "top": 307
        }
    }
} 
```

我把它放在css变量中。我想把字典像

```
elemorder=css['elemorder']
container=css['container'] 
```

但我得到错误**字符串索引必须是整数，而不是 str**如何创建两个变量（字典）elemorder 和容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:18:05.760

从 POST 请求中，您得到 str 而不是 dict。尝试使用 json lib 之类的

```
import json
css = json.loads(request.POST['q']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:18:20.147

您需要序列化数据，将其传递给 Django 应用程序，然后反序列化。

JSON 序列化看起来很适合您的任务。

# python - 通过使用python将一个文件与另一个文件匹配来打印一个文件的内容和索引位置

> ID：10649002
> 
> 赞同：0
> 
> 时间：2012-05-18T08:07:45.320
> 
> 标签：python, regex, file-io, soundex

我是python的新手我想要的是能够打印我拥有的文件的内容..

> 土豆泥，上面有这个和那个............ 9.99$

相似地

> 产品名称，描述......................价格

当我将它与仅包含 Product_names 的文件匹配时

> 土豆泥
> 
> 过去的
> 
> 凯撒沙拉
> 
> 等等等等

第一个文件的内容没有统一的顺序，所以这就是我尝试使用搜索、匹配和打印方法的原因

我希望你能理解我的问题

这是我尝试过的

```
 import re

      content_file = open('/Users/ashishyadav/Downloads/pdfminer-20110515/samples/te.txt',"r")
      product_list = open('/Users/ashishyadav/Desktop/AQ/te.txt',"r")
      output = open("output.txt" , "w")
      line = content_file.read().lower().strip()
      for prod in product_list:
        for match in re.finditer(prod.lower().strip(), line):
         s=match.start()
         e=match.end()
         print >>output, match.group(),"\t",
         print >>output, '%d:%d' % ( s, e),"\n", 
```

我的代码所做的是将第二个产品列表文件与完整内容文件匹配，但只给我 product_Names 的索引而不是描述和价格..

我想要的是从 Product_name 到 price 的索引/跨度..

喜欢土豆泥 ---- 9.99$( 土豆泥 - [0:58]),,m 刚刚得到 [0:14]

以及使用相同方法打印描述和价格的任何方式

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:05:59.517

*   将整个“第二个文件”读入一个集合 X。
*   逐行读取“第一个”文件。
*   对于每一行，提取逗号之前的部分。
*   如果这部分在集合 X 中，则打印所需的任何内容。

如果你在 python 中需要这个，请告诉我。

```
# Read the whole "second file" into a set X.
with open('foo') as fp:
    names = set(fp)

# Read the "first" file line by line.
with open('bar') as fp:
    for line in fp:

        # For each line, extract the part before the comma.
        name = line.split(',')[0]

        # If this part is in the set X, print whatever is desired.
        if name in names:
             print line 
```

# jquery - jquery 当用户单击一个元素时，我需要将一个复选框从未选中切换到检查我该怎么做？

> ID：10649003
> 
> 赞同：1
> 
> 时间：2012-05-18T08:07:50.840
> 
> 标签：jquery, html, forms, jquery-ui, checkbox

并且当用户重新单击已选中的元素时，如果已选中，复选框将变回未选中。我该怎么做呢？

[http://jsfiddle.net/DZtwq/](http://jsfiddle.net/DZtwq/)

```
<div class="demo" style="width:520px; height:300px;">

<ol id="selectable">
  <li id="1" class="ui-state-default">1</li>
  <li id="2" class="ui-state-default">2</li>
  <li id="3" class="ui-state-default">3</li>
  <li id="4" class="ui-state-default">4</li>
  <li id="5" class="ui-state-default">5</li>
  <li id="6" class="ui-state-default">6</li>
  <li id="7" class="ui-state-default">7</li>
  <li id="8" class="ui-state-default">8</li>
  <li id="9" class="ui-state-default">9</li>
</ol>

<input id="1" type="checkbox">
<input id="2" type="checkbox">
<input id="3" type="checkbox">
<input id="4" type="checkbox">
<input id="5" type="checkbox">
<input id="6" type="checkbox">
<input id="7" type="checkbox">
<input id="8" type="checkbox">
<input id="9" type="checkbox">

<p id="feedback">
<span>Youve selected:</span> 
<span id="select-result">none</span>.
</p>
</div>

​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:22:10.853

这将做到：

```
$('#selectable li').click(function(){
   var id = $(this).attr('id');
    $('input[type=checkbox]').each(function(){
        if ($(this).attr('id')==id) {
           if (this.checked) $(this).removeAttr('checked');
           else              $(this).attr('checked','checked');
        }
    });
}); 
```

但请注意，您的 html 无效。Id 值必须是唯一的，并且不能以数字开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:25:31.790

此解决方案将与 selectable() 的拖动选择功能一起使用

```
 $("li", this).each(function() {
            var check = $("#c"+$(this).attr("id"));
            console.log($(check).html());
            if ( $(this).hasClass("ui-selected") ) {
                $(check).attr("checked", true);
            } else {
                $(check).attr("checked", false);
            }
        }); 
```

您应该避免对不同的元素使用相同的 id

一个工作示例：http: [//jsfiddle.net/Z2s2B/](http://jsfiddle.net/Z2s2B/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:19:30.477

尝试这个：

[http://www.electrictoolbox.com/check-uncheck-checkbox-jquery/](http://www.electrictoolbox.com/check-uncheck-checkbox-jquery/)

```
$('input[name=foo]').attr('checked', true); 
```

还有这个插件[http://archive.plugins.jquery.com/project/checkboxes](http://archive.plugins.jquery.com/project/checkboxes)你可能会觉得有趣

# android - Android VideoView 崩溃

> ID：10649004
> 
> 赞同：0
> 
> 时间：2012-05-18T08:07:51.953
> 
> 标签：android, memory, crash, android-videoview

我有一个应用程序在 2.2 上流式传输 RTSP，在 3.2 上流式传输 HLS，两者都有相同的问题。播放大约 45 分钟到 3 小时的任何时间都会崩溃。您可以在 2.2 崩溃之前很容易地注意到它的延迟。现在我正在尝试清除内存，除了我需要的之外没有任何活动的对象，但无论如何我仍然会遇到这些崩溃。有没有人知道如何阻止它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:26:38.390

你能提一下 Log cat Error 那么只有我们才能找到问题然后你减小视频视图的大小

# javascript - dom 准备好但未渲染后的 Javascript 事件

> ID：10649005
> 
> 赞同：3
> 
> 时间：2012-05-18T08:08:09.910
> 
> 标签：javascript

在 dom 准备好但未渲染后是否可以做某事（白屏）我想对用户隐藏内容，经过一些操作后我想显示最终图片。我可以在我的 body 标签上使用“display:none”，但我正在做一个巨大的项目，所以我不想更改每一页。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:11:26.260

这是怎么回事？

```
document.onload = function() {
    //your codes
} 
```

与此不同`window.onload`的是，此函数在 DOM 加载后运行，因此可以进行操作，但不需要渲染所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:17:01.730

> dom准备好但没有渲染后是否可以做某事

浏览器在将 HTML 解析为 DOM 时会逐步呈现 DOM。你描述的状态不会自然发生。

你可以这样假装……</p>

> 我可以在我的 body 标签上使用“display:none”，但我正在做一个巨大的项目，所以我不想更改每一页。

如果你不想因为工作量太大而改变每一页，那就太糟糕了。去设置一个每个页面都使用的外部样式表。

如果您不想更改每个页面，因为您只希望更改出现在某些页面上，那么请使用更具体的选择器。

* * *

也就是说，阻止内容显示并为用户提供白屏（甚至是加载屏幕）只会让人们失去兴趣并将很多人带到另一个网站。我不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:16:21.787

我将在这里贡献我自己的 2 美分。

使用 jquery，$("document").ready() 事件在 DOM 完全加载（即没有图像）到您的浏览器后触发，但未显示。所以我认为要实现你想要的，你必须在“.ready()”方法中输入一些处理函数来处理你想要实现的任何东西。

那是你要找的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:13:43.703

如果您可以使用 JQuery，则在 dom 准备好但页面未加载时调用此方法

```
$(document).ready(function(){

)}; 
```

# visual-studio - 输出窗口中不显示任何内容 (Visual Studio 2008)

> ID：10649011
> 
> 赞同：2
> 
> 时间：2012-05-18T08:08:18.560
> 
> 标签：visual-studio, visual-studio-2008

我被分配到一个工作项目，我需要做一些旧式调试，因为调试本身不适用于正在使用的库。

因此，由于它是带有 Qt 应用程序的 C++，我首先尝试使用 qDebug()。然后是 cout，最后是 printf（与前者相比，我讨厌它）。没有。

Visual Studio 2008 的输出窗口中没有写入任何内容，我很确定它正在执行这些代码行（我什至尝试在 main.cpp 的开头放置一个 qDebug）。顺便说一句，它是一个 GUI 应用程序，我尝试过 Debug 输出和 Build 输出，但没有显示任何内容。

我一直在寻找类似的问题，但没有一个提供解决方案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:22:47.290

很有可能，您的 Visual Studio 环境已配置为将所有输出从输出窗口重定向到即时窗口。我已经被这个咬过几次了，因为这莫名其妙地是某些环境配置的默认设置。

要重置设置，请执行以下步骤：

1.  从“工具”菜单中，选择“选项”。
2.  展开左侧树中的“调试”项，然后选择“常规”。
3.  在右侧的列表中，向下滚动到“将所有输出窗口文本重定向到立即窗口”，并确保它*未选中*。
4.  单击“确定”以使世界恢复理智。

   ![](../Images/9d75eb6ee53fbdc6f5abf8e490edb9b6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:08:04.277

如果 qDebug 不是基于控制台的应用程序，您似乎无法直接使用它。对我来说听起来很奇怪，但很遗憾就是这样。

# iphone - iOS：从磁盘读取时如何获得透明的png

> ID：10649027
> 
> 赞同：3
> 
> 时间：2012-05-18T08:09:36.187
> 
> 标签：iphone, objective-c, ios

我正在将 png 图像作为 NSData （用于缓存）保存到磁盘，当读取时以黑色代替透明像素。如何解决？

这是我用来保存到磁盘的：

```
-(void)cacheImage:(UIImage *)image forURL:(NSURL *)url {
NSURL *cacheFileURL = [[self asyncableCachesDirectory] URLByAppendingPathComponent:[[url absoluteString] MD5]];

NSData *imageData = nil;

switch ([self imageTypeForJTDynamicImageURL:url]) {
    case AsyncableImageTypeJPEG:
        imageData = UIImageJPEGRepresentation(image, 1);
        break;
    case AsyncableImageTypePNG:
        imageData = UIImagePNGRepresentation(image);
        break;
    default:
        break;
}

NSError *error = nil;

[imageData writeToURL:cacheFileURL options:0 error:&error]; 
```

}

这就是我用来阅读图像的内容：

```
-(UIImage *)imageFromCacheForURL:(NSURL *)url {
UIImage *image;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *urlHash;
NSURL *cacheFileURL;

image = [self.images objectForKey:[url absoluteString]];

// if we already have the full size image in memory just return it.
if (image) {
    debug(@"---Asyncable returning full size image from memory for url: %@", url);
    return image;
}

// check disk for full size image
urlHash = [[url absoluteString] MD5];
cacheFileURL = [[self asyncableCachesDirectory] URLByAppendingPathComponent:urlHash];

image = [UIImage imageWithData:[fileManager contentsAtPath:[cacheFileURL path]]];

if (image) {
    [self.images setObject:images forKey:url];
    debug(@"---Asyncable returning full size image from disk for url: %@", url);

    return image;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:13:06.087

```
imageData = UIImagePNGRepresentation(image); 
```

如果在这两种情况下使用会发生什么？

# trac - 如何从 svn 提交创建 trac 票证？

> ID：10649028
> 
> 赞同：1
> 
> 时间：2012-05-18T08:09:37.267
> 
> 标签：trac

我正在寻找一种创建（不更新）trac 票证的方法，以响应诸如“破解代码以不杀死你的狗（TODO：正确修复此问题以避免追逐小猫）”之类的提交消息。

我希望 trac 系统对“TODO”关键字作出反应，并使用提交消息的内容、设置为提交者的所有者和已引用的打开提交创建一张票。

在搜索 SO 时，我发现[Open and close trac 票证只需一次提交](https://stackoverflow.com/questions/3020403/open-and-close-trac-tickets-with-a-single-commit)，这基本上说明了我如何推出自己的解决方案。如果没有可用的预制件，我会这样做。所以 - 有吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T08:30:08.183

我建议查看 Python 的官方 Trac 包：http: [//pypi.python.org/pypi/Trac/0.11.4](http://pypi.python.org/pypi/Trac/0.11.4)和文档[http://www.edgewall.org/docs/tags-trac-0.11.7 /epydoc/trac-module.html](http://www.edgewall.org/docs/tags-trac-0.11.7/epydoc/trac-module.html)

这是我们用来从 python 脚本在 Trac 中创建票证的方法，我认为它使用起来相当简单。您可以将此 python 脚本作为 VCS 的提交后挂钩运行。

您可以使用您的项目设置启动一个 trac 环境，然后新建工单并保存它们。您可能还有更多内容，但这应该给您一个好主意：

```
from trac.env import Environment
from trac.ticket import Ticket

env = Environment(projectSettings, create=0)
tkt = Ticket(env)
tkt['summary'] = 'first line of commit message'
tkt['description'] = 'full commit message'
tkt.save_changes(commitAuthor, '') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T14:33:16.930

不用说，当前的 Trac 稳定版是 0.12.3，但当然开发需要与您当前的版本一致。（你没有在你的问题中告诉我们。）

关于你的问题，有[一个](http://trac.edgewall.org/ticket/9753)关于如何在Trac 核心的*CommitTicketUpdater*之上实现不同功能的提示。它具有 update 和 close 作为内置操作，因此您需要像这样进行一些更改（基于[当前 Trac`trunk`](http://trac.edgewall.org/browser/trunk/tracopt/ticket/commit_updater.py?rev=10968)）：

*   `commands_create`为命令创建一个附加选项*，以空格分隔的列表形式创建参考变更集的新票证*
*   `self.comment`在赋值之后`changeset_added`和`changeset_modified`之后添加一个类范围的变量`comment`
*   添加一个模块`cmd_create`，如（*未经测试*）

    > ```
    > def cmd_create(self, ticket, changeset, perm):
    >     if not self.check_perms or 'TICKET_CREATE' in perm:
    >         # Commit messages in general is used for a ticket comment.
    >         # New tickets require summary and we'll want description too,
    >         # because comment is ignored on ticket creation.
    >         # So we need to do message processing here beforehand.
    >         ticket['comment'] = None
    >         ticket['description'] = self.comment
    >         ticket['owner'] = changeset.author
    >         ticket['status'] = 'new'
    >         ticket['summary'] = ' '.join(['TODO from', str(changeset.rev)])
    >         ticket.insert() 
    > ```

*   改变`ticket_command`所以正则表达式不仅匹配默认的函数票对，而且匹配一元'TODO：'（对不起，现在不能让它工作）

*   扩展私有模块`_parse_message`以包含之前的另一个案例`if func:`

    > ```
    >  if cmd.startswith('TODO'):
    >        tickets.update({None : ['create']})
    >        continue 
    > ```

*   更改`_update_tickets`以使评论保存有条件，因为您不需要/想要对新票的附加评论）

    > ```
    >  if ticket['comment']:
    >        ticket.save_changes(changeset.author, comment, date, db) 
    > ```

好的，如果您想尝试这种方法，请根据需要询问。

# c# - 从符合 PCI 规范的客户端 (?) 检测到危险的 Request.Path 值

> ID：10649029
> 
> 赞同：0
> 
> 时间：2012-05-18T08:09:39.370
> 
> 标签：c#, asp.net, facebook-graph-api, pci-compliance

我收到此错误

```
A potentially dangerous Request.Path value was detected from the client (?) 
```

我知道把

```
requestPathInvalidCharacters="" 
```

在网络配置中将允许我这样做，但这不符合 PCI 标准，它只是对我的问题打了一个补丁。有没有办法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:15:57.840

首先找出请求是什么以及为什么它很危险。如果您认为您的客户应该发送请求，请查看您是否可以转义请求中的危险字符。例如，如果您在请求中有 >。在将字符串提交到服务器之前，您可以添加一个 java 脚本来转义您的字符串。

# javascript - 谷歌地图上的简单折线有最大数量吗？

> ID：10649032
> 
> 赞同：3
> 
> 时间：2012-05-18T08:10:14.160
> 
> 标签：javascript, google-maps, google-maps-api-3, maps, polyline

我正在使用 Google Maps Javascript API v3 和 Chrome 浏览器。我将在地图上渲染大量简单（两点）折线。在浏览器性能开始成为问题之前，是否有人遇到过折线数量的上限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:38:13.607

如果您使用具有大图层的 Google Maps Javascript API v3，那么 Google 会为您呈现图层，但存在文件大小限制。

[https://developers.google.com/kml/documentation/mapsSupport](https://developers.google.com/kml/documentation/mapsSupport)
*当通过 GGeoXml 和客户端加载简单的 KML 文件时，选择基于浏览器的要素渲染，创建基于 GOverlay 的对象并将其添加到地图中，触发 addoverlay相应的事件。另一方面，当使用 GGeoXml 加载大型 KML 文件并调用服务器端渲染时，不会创建这些对象并且不会触发 addoverlay。*

但是有[geoxml3](http://code.google.com/p/geoxml3/)使用您的计算机资源，而不是 Google 的。

# javascript - 用数字创建日期 (new Date(2012, 03, ...) 给出错误的月份 (+1)

> ID：10649036
> 
> 赞同：10
> 
> 时间：2012-05-18T08:10:38.847
> 
> 标签：javascript

当使用零件的数字创建`new Date`对象时，我得到的值正好比我为“月”输入的值提前一个月 **。**

```
new Date(2012, 05, 17, 00, 00, 00)
Sun Jun 17 2012 00:00:00 GMT+0800 (HKT)  // june?! 
```

但是，对完全相同的字符串进行正常解析会返回正确的时间：

```
new Date("2012-05-17 00:00:00")
Thu May 17 2012 00:00:00 GMT+0800 (HKT) 
```

我在 ie/ff/chrome 中得到了相同的结果。删除小时/分钟/秒没有任何效果。我可以通过在设置月份之前减去一个来解决它，但我只是切换到将我的日期写为字符串。

**编辑：** *字符串解析在 IE 中不起作用。我不知道我做了什么，但我发誓我做到了。那是概率。为什么我首先避免它。我现在已经改用 moment.js 了。*

啊，现在我明白了。就像常规的 Java 日期一样，我很少编写代码，即使这样也总是使用库（joda 等）。无论如何，这是一个多么糟糕的主意。这是 skeets 提出的问题：[为什么 Java 日历中的 1 月是 0 月？](https://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)

为什么会这样？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T08:11:21.650

程序员从 0 开始计数。所以月份用 0(Jan)-11(Dec) 表示。

天数不遵循此规则的原因是不要将作者与 30/31 个月的差异混淆。

**[来自 MDN：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)**

> ### 月
> 
> 表示月份的整数值，从 0 开始表示一月到 11 表示十二月。

# swing - 在 java 中使用 JXMapkit

> ID：10649038
> 
> 赞同：1
> 
> 时间：2012-05-18T08:10:45.407
> 
> 标签：swing, map

请告诉代码和/或逻辑使用 JXMapkit。我在 Eclipse IDE 中使用 swingx-ws-1.0.jar 包。如果有更好（更新）的软件包可用，请发布下载链接。我尝试使用以下代码将 JXMapkit 添加到 JPanel 上，但我也没有成功：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import org.jdesktop.swingx.JXMapKit;
import java.awt.*;

public class Main {
public static void main(String[] args) {
       JFrame frame = new JFrame();
       JXMapKit kit = new JXMapKit();
       JPanel parentPanel = new JPanel();
       parentPanel.setLayout(new BorderLayout());
       parentPanel.add(kit, BorderLayout.CENTER);
       frame.setContentPane(parentPanel);
       frame.pack();
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.setVisible(true);
   }

} 
```

错误在于以下行：

```
parentPanel.add(kit, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T06:43:08.487

我在以下链接中找到了答案：

[http://www.jarvana.com/jarvana/view/org/swinglabs/swingx-ws/1.0/swingx-ws-1.0-sources.jar!/org/jdesktop/swingx/JXMapKit.java?format=ok](http://www.jarvana.com/jarvana/view/org/swinglabs/swingx-ws/1.0/swingx-ws-1.0-sources.jar!/org/jdesktop/swingx/JXMapKit.java?format=ok)

完美运行。它需要以下参考库：

*   swingx-all-1.6.3.jar
*   swingx-ws-1.0.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T04:59:54.643

您可以使用此代码，它将起作用

```
 JFrame frame = new JFrame();
       JXMapKit kit = new JXMapKit();
       kit.setDefaultProvider(JXMapKit.DefaultProviders.OpenStreetMaps);
       JPanel parentPanel = new JPanel();
       parentPanel.setLayout(new BorderLayout());
       parentPanel.add(kit, BorderLayout.CENTER);
       frame.setContentPane(parentPanel);
       frame.pack();
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.setVisible(true); 
```

# ruby-on-rails - 如果存在唯一字段值，Rails 3 验证多个字段

> ID：10649041
> 
> 赞同：0
> 
> 时间：2012-05-18T08:11:15.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有一个**分配**模型，它具有以下字段：**:user_id**、**:company_id**、**:role_id**

每个用户在公司内可以有多个角色，但每个公司只能有一个角色 ID == 5 的用户。

我想做类似下面的事情（显然这不起作用）。

```
validates :company_id, :uniqueness => { :scope => :role_id => {:is => 5}, :message => "Only one owner is allowed." } 
```

有没有办法以与上述类似的格式实现这一点，还是我需要创建一个自定义验证宏？

如果需要自定义验证，这将如何完成？如果需要创建一个继承自 ActiveModel::EachValidator 的新类，那么存储此代码的“正确”位置在哪里？（我是将它保存在同一个文件中还是创建一个新文件并可能将其保存在 /lib 中？）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:57:09.687

```
validates_uniqueness_of :user_id, :scope => :company_id, :if => Proc.new{|user| user.role_id == 5 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:21:48.747

好的，我想出了一个解决方案，但不太确定它是否是这样做的“rails 方式”，或者它是否只是一种 hack-y 解决方法。有人可以纠正我吗？

我在我的 Association.rb 文件中完成了以下操作：

```
validate :owner_exists
.
..
...
protected
  def owner_exists
      errors.add(:role_id, " of owner already exists") if (role_id == 5 && Assignment.where('company_id = ? AND role_id = 5', company_id ).exists?)
  end 
```

# android - Android Http Post/Get java.net.SocketException：操作超时

> ID：10649044
> 
> 赞同：0
> 
> 时间：2012-05-18T08:11:25.983
> 
> 标签：android, post, get, timeout

我正在使用 Http Post / Get 方法将数据发送到服务器。

但经常报这个错误：java.net.SocketException: The operation timed out

在我看互联网时看到的那一刻也有效。

我的代码：

```
HttpPost request = new HttpPost(url);

            //add headers
            for(NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            HttpParams httpParameters = new BasicHttpParams();

    HttpConnectionParams.setConnectionTimeout(httpParameters, 10000); 
    HttpConnectionParams.setSoTimeout(httpParameters, 10000);
    HttpConnectionParams.setTcpNoDelay(httpParameters, true);

    HttpClient client = new DefaultHttpClient(httpParameters);        

    HttpResponse httpResponse;

    try {
        httpResponse = client.execute(request);

        responseCode = httpResponse.getStatusLine().getStatusCode();
        message = httpResponse.getStatusLine().getReasonPhrase();

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {

            InputStream instream = entity.getContent();
            response = convertStreamToString(instream);

            instream.close();
        }

    } catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    } catch (IOException e) {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    } 
```

如果您能提供帮助，我将不胜感激。

谢谢。

# iphone - 如何从 iPhone 中的 nsstring 评估中获取整数值？

> ID：10649055
> 
> 赞同：0
> 
> 时间：2012-05-18T08:12:07.757
> 
> 标签：iphone, objective-c, nsstring

我有这样的 NSString `@"0,0,0,0,0,0,1,2012-03-08,2012-03-17"`。我想要用逗号分隔的值。我想要逗号之前的值并忽略逗号。

我是 iPhone 新手，我知道如何用 Java 做，但不知道如何用 Objective-C 做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T08:15:38.310

```
NSString *string = @"0,0,0,0,0,0,1,2012-03-08,2012-03-17";

NSArray *componentArray = [string componentSeperatedByString:@","]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T08:14:16.027

使用 的[`componentsSeparatedByString:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-componentsSeparatedByString_)方法`NSString`。

```
NSString *str = @"0,0,0,0,0,0,1,2012-03-08,2012-03-17";
NSArray *components = [str componentsSeparatedByString:@","];

for (NSString *comp in components)
{
    NSLog(@"%@", comp);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T08:15:58.507

```
for (NSString *s in [yourstring componentsSeparatedByString:@","])
{
    int thisval = [s intValue];
} 
```

# objective-c - 如果用户不接受，也使用推送通知

> ID：10649058
> 
> 赞同：0
> 
> 时间：2012-05-18T08:12:33.190
> 
> 标签：objective-c, push

我对 iPhone 推送通知有疑问。当用户使用应用程序时，我需要使用它们，但对我来说，当应用程序关闭时不需要警报声音徽章。

我的问题是：如果用户在应用程序启动时不接受推送通知，我是否也可以使用这些通知？

我会使用推送系统来避免任何计时器在应用程序运行时从我们的服务器定期获取信息；它们将是没有警报、没有徽章和没有声音的自定义通知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:20:58.740

不，您不能规避用户的选择（用户说不，您应该尊重这一点）。但是，您可以确定用户是否选择退出使用

```
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (types == UIRemoteNotificationTypeNone) {
    // user does not want to get push notifications
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:18:34.953

不，你不能。如果用户拒绝通知，APNS 服务器将不会将它们发送到设备。顺便说一句，在不征得用户许可的情况下尝试从应用程序获取应用程序/用户信息可能会导致应用程序被 App Store 拒绝。

# asp.net-mvc-3 - 用于手机和电话号码的 ASP.NET MVC 3 数据注释（已编辑）

> ID：10649059
> 
> 赞同：10
> 
> 时间：2012-05-18T08:12:36.357
> 
> 标签：asp.net-mvc-3

如何在写电话号码如“094-4567”或手机号码如“09129705678”等时使用数据注释进行验证？

```
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;

namespace PhoneBook.Models
{
    public class Contact
    {
        [Required(ErrorMessage="Telephone Number Required")
        [?]
        public string Telephone Number {get; set;}
    }
} 
```

我真的不知道该怎么办...

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-18T08:21:03.580

您可以像这样使用正则表达式属性：

```
namespace PhoneBook.Models
{
    public class Contact
    {
        [Required(ErrorMessage="Telephone Number Required")
        [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$", ErrorMessage = "Entered phone format is not valid.")]
        public string Telephone Number {get; set;}
    }
} 
```

它将匹配以下数字：*0123456789、012-345-6789、(012)-345-6789*等。

您可以在此处了解有关此表达式的更多信息：[如何使用正则表达式验证电话号码](http://www.authorcode.com/how-to-use-regular-expression-for-validating-phone-numbers-in-net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T00:11:41.927

试试这个：

```
[DataType(DataType.PhoneNumber, ErrorMessage = "Provided phone number not valid")] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T09:35:12.180

```
Try for simple regular expression for Mobile No

  [Required (ErrorMessage="Required")]
  [RegularExpression(@"^(\d{10})$", ErrorMessage = "Wrong mobile")]
   public string Mobile { get; set; } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-10-16T15:08:58.457

```
namespace PhoneBook.Models
{
    public class Contact
    {
        [Required(ErrorMessage="Telephone Number Required")
        [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$", ErrorMessage = "Entered phone format is not valid.")]
        public string Telephone Number {get; set;}
    }
} 
```

# wpf - WPF：从 ObservableCollection 获取特定字段

> ID：10649063
> 
> 赞同：0
> 
> 时间：2012-05-18T08:12:51.813
> 
> 标签：wpf, combobox, field, observablecollection, datacontext

我有一个名为 SeiveList 的 ObservableCollection。我想要列表中的所有 SeiveIdSize（除了最后一个，因为它没有用）并为 Combobox 设置 DataContext。我添加了

```
seiveCmb.DataContext = GlobalUtils.SeiveList;
seiveCmb.DisplayMemberPath = // WHAT SHOULD GO HERE. hOW TO ONLY SHOW SeiveIdSize

// XML 
<ComboBox Name="seiveCmb" ItemsSource="{Binding}"  Grid.Column="1" Grid.Row="1" Margin="2" SelectedIndex="0" ></ComboBox> 
```

**根据塞巴斯蒂安的建议编辑：**目前，我刚刚尝试了组合框的列表。我的Seive类：

```
public class Seive : INotifyPropertyChanged 
{
   // Other Members
   private bool isSelected;

           public bool IsSelected
    {
        get { return isSelected; }
        set
        {
            isSelected = value;
            OnPropertyChanged("IsSelected");
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string p)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(p));
    }
 } 
```

在我的 Window .xaml 文件中：

```
 <Window.Resources>
    <CollectionViewSource Source="{Binding Path=comboSeives}"
                          x:Key="comboSeivesFiltered"
                          Filter="ComboSeiveFilter">            
    </CollectionViewSource>
</Window.Resources>

 <ComboBox Name="seiveCmb" ItemsSource="{Binding Source={StaticResource         comboSeivesFiltered}}" DisplayMemberPath="SeiveIdSize"
                      Grid.Column="1" Grid.Row="1" Margin="2" SelectedIndex="0"
                      ></ComboBox> 
```

在 Window .cs 文件中：

```
 public ObservableCollection<Seive> comboSeives { get; set; }

    // Initial original data in Window_Loaded method
    comboSeives = GlobalUtils.SeiveList;

    public void ComboSeiveFilter(object sender, FilterEventArgs e)
    {
        Seive sv = e.Item as Seive;
        // Add items those is != "TOTAL" and isSelected == false
        if (sv.SeiveIdSize != "TOTAL" && sv.IsSelected == false)
            e.Accepted = true;
        else
            e.Accepted = false;
    } 
```

如果 id 为“TOTAL”或 isSelected 为 false（即未添加到网格中），则仅返回 true 并将其添加到其中。初始所有记录都有 isSelected = false。

这是我从您对[本网站](http://bea.stollnitz.com/blog/?p=31)的解释和帮助中了解到的。并实现了这一点。但是在运行时，我在组合框中看不到任何东西。我试图调试在过滤器方法添加中断，但它从未到达那里。你能从上面的代码中指出我在哪里犯了错误。

感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:56:18.113

我了解您希望过滤您的收藏，删除一个元素。一种方法是在您的 Window.Resources 中创建一个 CollectionView 并应用一个过滤器方法 - 如此处所示和[解释](http://bea.stollnitz.com/blog/?p=31)。

```
<Window.Resources>
    <CollectionViewSource Source="{Binding Path=SeiveList}"
                          x:Name="seiveListFiltered"
                          Filter="MyFilter">

    </CollectionViewSource>
</Window.Resources> 
```

您的代码暗示在您的情况下，集合是窗口的 DataContext。这必须更改以匹配您的新资源：

```
<ComboBox ItemsSource="{Binding Source={StaticResource seiveListFiltered}}"/> 
```

请注意，这将使用类似于 SeiveItem.ToString() 方法的输出的项目填充您的组合框（实际上，我不知道项目的类名）。使用`DisplayMemeberPath`-Property 设置要显示的属性名称。

```
<ComboBox DisplayMemberPath="SeiveIdSize" ItemsSource="{Binding Source={StaticResource seiveListFiltered}}"/> 
```

# javascript - 如何将正则表达式用于货币

> ID：10649064
> 
> 赞同：6
> 
> 时间：2012-05-18T08:12:51.603
> 
> 标签：javascript, jquery, regex

我需要从一个元素中获取价格并将其添加到另一个元素中。

我正在使用这个：

```
\$\d+(?:\.\d+)? 
```

这似乎适用于`$0.50`, `$1.00`, `$20.00`，`$200.00`但我撞到了一堵砖墙`$1,000.00`并获得了 10,000.00 美元

（不太可能`$10,000.00`会被使用）。

逗号让我绊倒了。

** 编辑 **

我离开了一个小时才回到一堆答案。在我浏览它们之前，我想我会澄清而不是回答所有评论：

正在使用的平台会自动生成购物车中商品的总价值。它在一个元素中呈现 - 这取决于用户是添加还是删除项目。

该值不太可能进入 10,000.00，因为产品成本并不高。

我是使用正则表达式的新手，我花了足够长的时间才走到这一步，因此提出了这个问题。

自动生成的 HTML：

```
<span vertical="False" quote="False" id="catCartSummary">
   <table cellspacing="0" class="cartSummaryTable">
     <tbody>
       <tr>
         <td class="cartSummaryItem">3 item(s), Total: $115.00 <a href="#" class="cartSummaryLink">View Cart</a></td>
       </tr>
     </tbody>
   </table>
</span> 
```

在这种情况下，我只需要 $ 价值 $115.00 - 但我需要它以 $1,000.00 的价格工作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T08:21:04.307

将`non-digit`和`non-dot`simbols替换为`''`，然后应用`parseFloat`：

```
var currencyValue = parseFloat("$1,000.50".replace(/[^\d\.]/g,''));

console.log( currencyValue ) ;   //1000.5 
```

**更新：**如果您的“HTML 自动生成器”生成有效的货币字符串，那么

```
/\$\S+/g 
```

正则表达式就足够了，用于提取所有货币：

```
var currencies = $('#cartSummaryItem').text().match(/\$\S+/g);    // ["$115.00"] 
```

然后您可以将它们转换为数字以对它们进行数学运算：

```
var currenciesAsNumbers = currencies.map( function(item){
    return parseFloat( item.replace(/[^\d\.]/g,'') );
});    // [115] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:16:55.817

这对我有用：

```
/\$\d+(,\d+)*(?:\.\d+)?/g 
```

[**演示**](http://jsfiddle.net/FbFUV/1)

我找到了一个优秀的正则表达式，它可以抓取每一种有效货币，并根据您的需要对其进行了一些定制：

```
/^\$[0-9]{1,3}(?:[0-9]*(?:[.,][0-9]{2})?|(?:,[0-9]{3})*(?:\.[0-9]{2})?|(?:\.[0-9]{3})*(?:,[0-9]{2})?)$/g 
```

[**演示**](http://jsfiddle.net/FbFUV/2/)

[正则表达式的来源](https://stackoverflow.com/questions/354044/what-is-the-best-u-s-currency-regex)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:17:51.513

修改成这样的：

```
\$(?:\d{1,3},)*\d+(?:\.\d+)? 
```

或这个

```
 \$\d{1,3}(,\d{3})*(?:\.\d+)? 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T08:19:38.593

```
var re = /^\d{1,3}(\,\d{3})*(?:\.\d+)?$/;

console.log(re.test('0.50'));
console.log(re.test('1'));
console.log(re.test('20.50'));
console.log(re.test('200.50'));
console.log(re.test('2,000'));
console.log(re.test('2,000.50'));
console.log(re.test('20,000'));
console.log(re.test('20,000.00'));
console.log(re.test('1,000,000'));
console.log(re.test('1,000,000.50')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-21T04:00:57.537

使用此 RegEx 替换，可以轻松地去除 $ 货币符号和逗号：[^.0-9]

此处提供演示： [http ://rubular.com/r/Gwkx62RtLa](http://rubular.com/r/Gwkx62RtLa)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T08:18:31.427

我得到了这个：

```
^\d{1,3}(,\d{3})*(\.\d+)?$ 
```

将仅匹配数字，不包括货币符号。

# c# - asp:dropdownlist 动态变化

> ID：10649069
> 
> 赞同：0
> 
> 时间：2012-05-18T08:13:05.340
> 
> 标签：c#, javascript, asp.net, ajax, code-behind

有没有机会，当我从中选择一行`asp:dropdownlist`，动态更改页面，执行 sql 查询并在结果之后，在第二个更改选定的行`asp:dropdownlist`？

如果仅使用 asp.net 和 codebehind 无法做到这一点，请告诉我如何在 javascript 中执行 SELECT-query（可能使用 Ajax；但我不明白）并更改第二个下拉列表的选定行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:50:37.727

它有点笼统的问题，因为有几个选项可以做，而且我不是 100% 确定你想做什么。简而言之，您可以使用 AJAX 联系一个 PHP 页面，该页面将对您的数据库进行操作。它生成并发送回客户端的结果。您可以使用 JSON 来保存发送到浏览器的数据。

AJAX 所做的只是允许您根据您提供的 URI 从另一个位置获取数据。我会使用 JQuery 库，因为它可以轻松实现 AJAX。

```
// This will trigger ajax whenever the is a change in the drop down. I am assuming the drop down class is .dropdown
$('.dropdown').change(function() {
    $.ajax({
      type: "POST",
      url: "page_change.php",
      data: { name: "about_us" }
      dataType:JSON,
      success: function(data) {
      //The data returned from test.php is loaded in the .result tag
        $('.result').html(data.html);
      // If you want to change page you would execute
      window.location(data.url);    
      }
    });
}); 
```

page_change.php 然后将联系您的数据库并生成 JSON。

更多关于 JQuery AJAX 的信息在这里： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您需要查看 JQuery、AJAX、PHP 和 JSON 来更改页面上的数据。

如果您只想在下拉更改中更改页面，我想您可以将页面名称存储在选项 id 中？

```
$('.dropdown').change(function() {
 var page = $(this).attr('id');
      window.location(page + ".html");    

}); 
```

# jquery - 如何创建显示通用信息的弹出窗口

> ID：10649076
> 
> 赞同：1
> 
> 时间：2012-05-18T08:13:38.420
> 
> 标签：jquery, asp.net-mvc-3

我有一个包含以下字段的表，我使用 EF 创建了一个模型：

```
Event Details

EventMngID
Event_name
Event_location
Event_Date
EM_opt1Question1
EM_opt1Answer1
EM_opt1Question2
EM_opt1Answer2
EM_opt1Question3
EM_opt1Answer3
EM_opt1Question4
EM_opt1Answer4 
```

我有一个页面显示事件信息和自定义问题，它们是分开的。如您所见，第二张图片有一个 Edit Choices 操作链接。当我单击编辑时，它将显示一个显示答案的弹出窗口。从弹出窗口中，我可以修改值并保存答案。所有更改都应反映在自定义问题部门的答案字段下拉列表中。我的问题是，使用的机制是什么，因为表格包含 4 个答案字段，如果我要在弹出窗口（下面的代码）中这样做，那么 Answer2 ..4 呢？我相信它会引发错误。有关如何解决此问题的任何帮助，或者如果有与我的问题相关的链接，请将其发送给我。

```
 <div class="editor-field">
        <%: Html.TextBoxFor(model => model.Answer1) %>
        <%: Html.ValidationMessageFor(model => model.Answer1) %>
    </div> 
```

![活动详情信息](../Images/1b9765176f8271e4716794b4ae8b21fa.png)

![自定义问题](../Images/30707e9319d9290e1129b634a7f6b66a.png)

![在此处输入图像描述](../Images/bac43a49cc39210cbfe03d1fe2bf468d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:39:47.620

在我看来，你有两个选择。

第一个（我认为这不是最好的选择）是找出正在编辑的问题和答案编号并动态生成您的查询。我不确定你是否使用了一些像实体框架这样的 ORM，但如果你是，那么你将需要一些长的 if/elseif 语句，如下所示：

```
if (editing question 1)
     return (query to get question and answer 1)
else if (editing question 2)
     return (query to get question and answer 2) 
```

另一方面，如果您只是动态编写 sql 查询并使用 ADO.NET，则可以更轻松地生成查询文本。同样，我不推荐这个解决方案。

更好的解决方案是标准化您的数据库并将问题和答案分开到他们自己的表中，而不是将它们集中到 EventDetails 表中。您需要从表中删除每个 EM_opt1QuestionX 和 EM_opt1AnswerX 列，并创建一个具有如下结构的新表：

```
QuestionAnswer
--------
QuestionAnswerID
EventMngID
Question
Answer 
```

然后每个问题和答案都有自己的 id，这使您可以轻松地定位给定的记录。这还允许您根据需要拥有尽可能多或尽可能少的问题和答案，而无需尝试猜测所需的最大问题数。

# wcf - 在不同的服务器上使用什么作为 WCF net.tcp 主机 baseAddress？

> ID：10649078
> 
> 赞同：2
> 
> 时间：2012-05-18T08:13:53.697
> 
> 标签：wcf

在我的 App.config 中，我指定了这个基地址（“jerrycan”是我的计算机的名称）：

```
<service behaviorConfiguration="helloWorldServiceBehavior" name="OpdService.OpdService">
    <endpoint address="/service" binding="netTcpBinding" bindingConfiguration="NewBinding0"
      name="MainEndPoint" contract="OpdService.IOpdService">
      <identity>
        <dns value="jerrycan" />
      </identity>
    </endpoint>
    <endpoint kind="udpDiscoveryEndpoint" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://jerrycan:8000" />
        <add baseAddress="http://jerrycan/service" />
      </baseAddresses>
      <timeouts openTimeout="00:00:15" />
    </host>
  </service> 
```

一切正常，直到我在其他计算机上运行服务 - 客户端可以通过 UDP 发现找到服务，但无法连接，因为服务继续发送旧地址。当我将“jerrycan”更改为“localhost”时，只有本地客户端能够连接到服务（但在任何计算机上）。其他计算机上的任何客户端都尝试连接到“localhost”但没有成功。

那么如果我希望能够在不同的计算机上运行服务而不需要重新编译，我应该使用什么作为主机地址呢？我应该将地址存储在每台计算机的配置文件中，还是应该在运行时更改地址？我想，我在这里遗漏了一些简单而基本的东西。

或者也许我应该使用 localhost （就像在许多 wcf 示例中一样），这是我的客户端连接代码带来了问题：

```
EndpointAddress endpointAddress = findResponse.Endpoints[0].Address;
OpdChannelFactory = new DuplexChannelFactory<OpdServiceReference.IOpdService>(CallbackHandler,
                        new NetTcpBinding("MainEndPoint"), endpointAddress); 
```

同样，当我使用“localhost”作为基地址时，“localhost”作为`findResponse`.

**编辑：**

好像**我在这里找到了解决方案**：http : [//btw-blog.blogspot.com/2011/02/dynamic-base-address-for-wcf-service.html](http://btw-blog.blogspot.com/2011/02/dynamic-base-address-for-wcf-service.html)

关键是将基地址中的主机名替换为 * 符号（通配符）。它将在运行时使用实际主机名进行更改。

还没有测试一切，但看起来它确实有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T06:10:33.590

好像我在这里找到了解决方案：http: [//btw-blog.blogspot.com/2011/02/dynamic-base-address-for-wcf-service.html](http://btw-blog.blogspot.com/2011/02/dynamic-base-address-for-wcf-service.html)

关键是用“*”符号（通配符）替换基地址中的主机名。它将在运行时使用实际主机名进行更改。

对其进行了测试，效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:18:09.337

现在您的服务端点地址是：

`net.tcp://jerrycan:8000/service`

当您在托管服务（jerrycan-pc）的计算机上创建客户端时，本地客户端当然可以通过引用来访问该服务

`net.tcp://localhost:8000/service`

显然，如果其他客户端（在您网络上的其他计算机上）尝试联系**localhost ，****则无法**连接到该服务，因为端点：正在调用本地计算机，在这种情况下该计算机未托管该服务（仅适用于 jerrycan-pc ）。如果是托管服务，则客户端可以通过引用来调用服务，但客户端必须尝试调用或的 IP。如果您将服务配置中的端点更改为您的服务主机 IP 甚至计算机名称，并使用服务主机/计算机名称的 IP 引用其他计算机上的服务，那么他们将能够访问它。例如，如果 jerrycan-pc 托管服务并且它的 IP 为**`net.tcp://localhost:8000/service``jerrycan-pc``jerrycan-pc``localhost``mike-pc``jerrycan-pc``jerrycan-pc``192.168.1.5`，您的客户端可以通过引用此端点来使用服务：**

 **`net.tcp://192.168.1.5:8000/service`

因此，在您的服务配置中更改`localhost`为 IP 地址或 PC 名称，并尝试在您的客户端上联系该地址，而不是联系`localhost`.**

# psi - PSI 新任务自定义字段未写入

> ID：10649079
> 
> 赞同：4
> 
> 时间：2012-05-18T08:14:03.810
> 
> 标签：psi, project-server-2007

我正在通过 PSI 开发一个流程，将新任务添加到现有项目中。为此，首先，通过 PWA，我创建了 4 个新的任务自定义字段（一个数字、两个日期和一个文本），我需要在创建任务时通知我。我还必须编写 2 个已经存在的数字任务自定义字段。

任务正在正确创建，并且之前存在的两个自定义字段也被正确写入。但是，正在编写新的 4 个新自定义字段中的任何一个。我该如何解决这个问题？

这是代码：

```
WSProject.Project project = InitProject();

project.CheckOutProject(projectGuid, sessionId, "Check out");

WSProject.ProjectDataSet dsProject = new WSProject.ProjectDataSet();

Guid taskGuid = CreateTaskRow(dsProject, projectGuid, taskname, duration, startdate);
Guid assignmentGuid = CreateAssignmentRow(dsProject, projectGuid, taskGuid, resGuid);

//Custom Fields
Guid idNCF1 = GetGuidUsingFieldName("NCF1"); //OLD
Guid idNCF2 = GetGuidUsingFieldName("NCF2"); //OLD
Guid idNCF3 = GetGuidUsingFieldName("NCF3"); //NEW
Guid idDCF1 = GetGuidUsingFieldName("DCF1"); //NEW
Guid idDCF2 = GetGuidUsingFieldName("DCF2"); //NEW
Guid idTCF1 = GetGuidUsingFieldName("TCF1"); //NEW

SetNumberCustomField(dsProject, projectGuid, taskGuid, idNCF3, 4); //Not Works
SetDateCustomField(dsProject, projectGuid, taskGuid, idDCF1, DateTime.Today); //Not Works
SetTextCustomField(dsProject, projectGuid, taskGuid, idTCF1, "A"); //Not Works
SetDateCustomField(dsProject, projectGuid, taskGuid, idDCF2, DateTime.Today); //Not Works
SetNumberCustomField(dsProject, projectGuid, taskGuid, idNCF1, 1); //Works
SetNumberCustomField(dsProject, projectGuid, taskGuid, idNCF2, 2); //Works

//Using debug, here I can see that all custom fields are properly set in dsProject TaskCustomFields table
Guid jobId = Guid.NewGuid();
project.QueueAddToProject(jobId, sessionId, dsProject, false);
WaitForQueue(jobId);

jobGuid = Guid.NewGuid();
project.QueueCheckInProject(jobGuid, projectGuid, true, sessionId, "Checked in");

jobGuid = Guid.NewGuid();
project.QueuePublish(jobGuid, projectGuid, true, "");
WaitForQueue(jobGuid); 
```

SetNumberCustomField（我省略了数据和文本函数，因为本质上是相同的）

```
private static void SetNumberCustomField(WSProject.ProjectDataSet dsProject,
                                   Guid projectId,
                                   Guid taskId,
                                   Guid customFieldId,
                                   int CFValue)
        {
            WSProject.ProjectDataSet.TaskCustomFieldsRow tCustomField = dsProject.TaskCustomFields.NewTaskCustomFieldsRow();

            tCustomField.CUSTOM_FIELD_UID = Guid.NewGuid();
            tCustomField.PROJ_UID = projectId;
            tCustomField.TASK_UID = taskId;
            tCustomField.FIELD_TYPE_ENUM = (byte)PSLibrary.CustomField.Type.NUMBER;
            tCustomField.NUM_VALUE = CFValue;
            tCustomField.MD_PROP_UID = customFieldId;

            dsProject.TaskCustomFields.AddTaskCustomFieldsRow(tCustomField);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T19:00:15.530

我注意到您的代码存在一些问题。PSI 非常复杂，所以我不做任何保证.. 但这里有。:)

1）您的 ProjectDataSet 未正确初始化。

您需要使用[Project.ReadProjectEntities](http://msdn.microsoft.com/en-us/library/websvcproject.project.readprojectentities%28v=office.12%29.aspx)来获取要使用的初始 ProjectDataSet。您将需要使用逻辑 OR ( `|`) 来获取多个表。你需要`Project | TaskCustomFields`.

如果您进行更新，我很确定您需要这样做。

2) 提交更改

在提交之前，您只能从 ProjectDataSet 中获取更改。

```
ProjectDataSet updates = dsProject.GetChanges() as ProjectDataSet; 
```

然后，您可以调用[QueueUpdateProject](http://msdn.microsoft.com/en-us/library/websvcproject.project.queueupdateproject%28v=office.12%29.aspx)并仅将更新数据集传递给它。然后，继续进行 QueuePublish。

# ajax - 为什么我用类别列表填充选择列表

> ID：10649081
> 
> 赞同：1
> 
> 时间：2012-05-18T08:14:13.480
> 
> 标签：ajax, asp.net-mvc, nhibernate

我想要做的是`SelectList`从类别存储库中填充类别。一个小样机[http://mockupbuilder.com/App/15379](http://mockupbuilder.com/App/15379)。

我现在拥有的是一个控制器：

```
[HandleError]
public class ProductController : Controller {
    private IRepository<Product> exhibitions;
    private IRepository<Category> categories;
    private readonly Int32 PageSize = 18;

    // ctor ...

    [HttpPost]
    public ActionResult Create(Product product, Guid categoryId) { 
        // validation ...
        // properties setting ...            
        product.Category = categories.Get(categoryId);
        return View(product);
    } 
```

类别类是这样的：

```
public class Category : AbstractEntity<Category> {
    public String Title { get; set; }
    public String Description { get; set; }
} 
```

我如何填充一个`SelectList`？我该如何使用`JSON`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:33:06.573

您可以将列表放入 viewbag 并使用 aspx 代码呈现它。如下所示：

```
[HttpGet]
public ActionResult Create() // your create page render action
{
    Viewbag.CategoryList = categories.GetAll(); //put it into viewbag

    return View();
} 
```

在您的视图页面中，是这样的：

```
<select name="categoryId"> <%-- use name attribute to bind action parameters and model --%>
<%foreach (Category item in Viewbag.CategoryList)
  { %>
<option value="<%=item.Id %>"><%=item.Title %></option>
<% } %>
</select> 
```

如果你想通过 json 填充类别。您必须在类别控制器中编写一个新操作，例如：

```
public class CategoryContrller : Controller{
    ....

    [HttpGet]
    public ActionResult GetAll()
    {
        var categories = categories.GetAll(); //put it into viewbag

        return Json(categories, JsonRequestBehavior.AllowGet);
    }
} 
```

并在您页面的 js 逻辑中使用 ajax 来调用它并处理结果。

# spring - Spring JavaMailSender：使其异步和持久化

> ID：10649084
> 
> 赞同：3
> 
> 时间：2012-05-18T08:14:31.687
> 
> 标签：spring, queue, jms, spring-jms

是否有一种简单/轻量级的方法可以将持久性添加到 Spring 的 JavaMailSender 并让它异步运行？Spring 是否为此提供任何“内置”支持？我目前正在使用 JMS 查看队列，但对于手头的任务（查看 ActiveMQ 和 RabbitMQ）来说，它们似乎有点矫枉过正。是否有轻量级 JMS 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:19:19.700

您使用[jms](/questions/tagged/jms "显示标记为“jms”的问题")的方法很好。不幸的是，持久性和异步处理并不是一个简单的任务，您将不得不编写一些代码。

但是看看[Spring integration](http://www.springsource.org/spring-integration)，它提供了对 JMS 入站和电子邮件出站的内置支持 - 您所要做的就是通过 XML DSL 连接各个部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T15:35:09.873

如果你想让 Spring 中的任何方法异步，你需要做的就是`task`在 xml 配置中配置命名空间`<task:annotation-driven/>`。然后，您只需注释该方法，`@Async`它将在自己的线程中运行。请注意，异步调用将在其自己的事务中运行，因为 Spring 从其内部池中获取一个新线程来为调用提供服务。如果这样做，则不需要 JMS 进行异步处理。

# php - 在php中弹出到同一应用程序的另一个用户

> ID：10649087
> 
> 赞同：0
> 
> 时间：2012-05-18T08:14:42.413
> 
> 标签：php, javascript, ajax, interaction

我正在使用一个 php 应用程序。在这里，许多用户可以像网站一样同时登录。在这里，当用户保存表单时，一个弹出窗口应该自动出现在另一个用户的浏览器上。当第一个用户保存表单时，表单中将提到第二个用户的 id。

请任何人给我任何想法。至少我应该使用什么类型的技术以及需要什么类型的技术。

谢谢 ！拉克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:20:36.327

您需要的技术是 AJAX。

您应该编写一个 javascript 函数，该函数会定期调用您的服务器（通过 XMLHttpRequest）来处理您想要通知用户的任何事件，并且当您有相关答案时，该函数应该会弹出警告。

您可能想开始使用 jQuery，这是一个很棒的 Javascript 库（包括 Ajax 调用），它可以为您节省大量时间。

# matlab - 如何将多组不同大小的集合发送到 matlab 函数？

> ID：10649089
> 
> 赞同：0
> 
> 时间：2012-05-18T08:15:04.550
> 
> 标签：matlab, parameters, matrix, arguments, argument-passing

我有一个矩阵，其中每一行都有不同的大小，额外的地方用零填充。该矩阵取决于一些输入参数，因此具有动态而非固定的行数和大小。

```
for e.g.
1 2 4 5 0
1 3 0 0 0
1 2 3 4 5 
```

如何创建 n 组不同大小（每行一组）并将其发送到另一个函数，例如 cartprod [http://www.mathworks.com/matlabcentral/fileexchange/5475-cartprod-cartesian-product-of-multiple-sets](http://www.mathworks.com/matlabcentral/fileexchange/5475-cartprod-cartesian-product-of-multiple-sets) ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:32:38.093

如果您不希望 的输入向量中有任何零，则`cartprod`可以使用以下命令：

```
CellArrayWithoutZeros = cellfun(@(x) x(find(x)), num2cell(Matrix, 2), 'UniformOutput', false);

CartProdResultMatrix = cartprod(CellArrayWithoutZeros{:}); 
```

**编辑：**如果您只想切断输入向量的前导零（在任何非零元素的右侧）`cartprod`：

```
CellArrayWithoutLeadingZeros = cellfun(@(x) x(1:find(x, 1, 'last')), num2cell(Matrix, 2), 'UniformOutput', false);

CartProdResultMatrix = cartprod(CellArrayWithoutLeadingZeros{:}); 
```

# c# - 使用 Selenium WebDriver C# 最大化 Firefox 的浏览器窗口

> ID：10649093
> 
> 赞同：4
> 
> 时间：2012-05-18T08:15:34.000
> 
> 标签：c#, selenium, firefox, selenium-webdriver

对于 Chrome，我有以下代码：

```
 List<String> capabilityValue = new List<string>();
    capabilityValue.Add("--start-maximized");
    capabilities = DesiredCapabilities.Chrome();
    capabilities.SetCapability("chrome.switches", capabilityValue);
    capabilities.Platform = new Platform(platform);
    WebDriver driver = new WebDriver ("www.google.com", capabilities); 
```

我尝试替换`chrome.switches`为`firefox.switches`. 对于 Mozilla Firefox，这不起作用。

谁能知道我怎样才能最大限度地打开网站？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T08:36:37.670

对于 Firefox 使用 -

```
driver.Manage().Window.Maximize(); 
```

您可以查看此链接以获取更多详细信息 -[如何使用 C# 在 Selenium WebDriver (Selenium 2) 中最大化浏览器窗口？](https://stackoverflow.com/questions/3189430/how-do-i-maximize-the-browser-window-using-webdriver-selenium-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:33:12.837

Firefox 没有用于打开最大化窗口的命令行参数，但您可以明确指定窗口大小。例如，这应该将窗口大小设置为 800x600：

```
capabilityValue.Add("-width");
capabilityValue.Add("800");
capabilityValue.Add("-height");
capabilityValue.Add("600"); 
```

# php - 使用来自企业应用程序的 PHP 从 MySQL 数据生成大型 Excel 文件

> ID：10649094
> 
> 赞同：8
> 
> 时间：2012-05-18T08:15:34.973
> 
> 标签：php, mysql, excel, export-to-excel, large-data

我们正在开发和维护几个系统，这些系统需要以 Excel 格式将报告导出给最终用户。这些报告是从 MySQL 数据库中收集的，经过一些简单的处理，通常会产生约 40000 行 10-15 列的数据，我们预计数据量将稳步增长。

目前我们正在使用 PHPExcel 生成 Excel，但它不再适合我们了。当我们超过 5000 行之后，内存消耗和加载时间变得难以忍受，并且无法通过无限期增加 PHP 的内存使用和脚本执行时间的最大限制来解决。数据处理尽可能精简，整个问题在于 PHPExcel 是一个内存猪。CSV 生成会更轻松，但不幸的是，由于用户需求，我们需要从我们的服务中导出 Excel（和单独的 Excel）。这是由于格式要求等原因，因此不能选择 CSV。

对于第三方应用程序/模块/服务/生成大型 excel 的任何想法/建议？不管它是否是商业许可，只要它符合我们的需求，可以集成到现有的 PHP 应用程序中并完成它的工作。我们的服务通常在 linux/php/mysql 上运行，我们几乎可以对服务器做任何我们需要做的事情。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:39:13.087

对于如此大量的数据，我不推荐 PHPExcel 或 ApachePOI（用于 Java）之类的工具，因为它们需要内存。我最近一直在为类似的任务而苦苦挣扎，我发现了将数据注入电子表格的方便（但可能有点繁琐）的方法。可以在服务器端生成或更新 Excel 电子表格，从而进行简单的 XML 编辑。我在服务器上有 XLSX 电子表格，每次从 dB 收集数据时，我都会使用 php 解压缩它。然后我访问包含需要手动注入和插入数据的工作表内容的特定 XML 文件。之后，我压缩电子表格文件夹，以便将其作为常规 XLSX 文件分发。整个过程非常快速和可靠。显然，与 XLSX/Open XML 文件的内部组织相关的问题和故障很少（例如 Excel 倾向于将所有字符串存储在单独的表中，并在工作表中使用对该表的引用）。但是当只注入像数字和字符串这样的数据时，这并不难。如果有人有兴趣，我可以提供一些代码。

好的，这是示例代码。我试图评论它的作用，但随时要求进一步解释。

```
<?php
/** 
 * Class for serverside spreadsheet data injecting
 * Reqs: unzip.php, zip.php (containing any utility functions able to unzip files & zip folders)
 *
 * Author: Poborak
 */
class DataInjector
{    
    //spreadsheet file, we inject data into this one
    const SPREADSHEET_FILE="datafile.xlsx";   
    // specific worksheet into which data are being injected    
    const SPREADSHEET_WORKSHEET_FILE="/xl/worksheets/sheet7.xml"; 
    //working directory, spreadsheet is extracted here
    const WSPACE_DIR="Wspace";
    // query for obtaining data from DB
    const STORE_QUERY = "SELECT * FROM stores ORDER BY store_number ASC"; 

    private $dbConn;
    private $storesData;

    /**
     * @param   mysqli  $dbConn
     */
    function __construct(mysqli $dbConn) {   
        $this->dbConn = $dbConn;
    }

    /**
     * Main method for whole injection process
     * First data are gathered from DB and spreadsheet is decompressed to workspace.
     * Then injection takes place and spreadsheet is ready to be rebuilt again by zipping.
     *
     * @return   boolean    Informace o úspěchu
     */     
    public function injectData() {

        if (!$this->getStoresInfoFromDB()) return false;        
        if (!$this->explodeSpreadsheet(self::SPREADSHEET_FILE,self::WSPACE_DIR)) return false;                      
        if (!$this->injectDataToSpreadsheet(self::WSPACE_SUBDIR.self::SPREADSHEET_WORKSHEET_FILE)) return false;            
        if (!$this->implodeSpreadsheet(self::SPREADSHEET_FILE,self::WSPACE_DIR)) return false;
        return true;
    }

    /**
     * Decompress spreadsheet file to folder
     *
     * @param   string  $spreadsheet
     * @param   string  $targetFolder
     *
     * @return   boolean    success/fail 
     */   
    private function explodeSpreadsheet($spreadsheet, $targetFolder) {
        return unzip($spreadsheet,$targetFolder);
    }

    /**
     * Compress source folder to spreadsheet file
     *
     * @param   string  $spreadsheet    
     * @param   string  $sourceFolder
     *
     * @return   boolean    success/fail 
     */   
    private function implodeSpreadsheet($spreadsheet, $sourceFolder) {
        return zip($sourceFolder,$spreadsheet);
    }

    /**
     * Loads data from DB to member variable $storesDetails (as array)
     *
     * @return   boolean    success/fail 
     */ 
    private function getStoresInfoFromDb() {
        unset($this->storesData);       

        if ($stmt = $this->dbConn->prepare(self::STORE_QUERY)) {
            $stmt->execute();
            $stmt->bind_result($store_number, $store_regional_manager, $store_manager, $store_city, $store_address);
            while ($stmt->fetch()) {
                $this->storesData[trim($store_number)] = array(trim($store_regional_manager),trim($store_manager),trim($store_address),trim($store_city));
            }           
            $stmt->close();
        }   
        return true;        
    }

    /**
     * Injects data from member variable $storesDetails to spreadsheet $ws
     *
     * @param   string  $ws target worksheet
     *
     * @return   boolean    success/fail
     */ 
    private function injectDataToSpreadsheet($ws) {
         $worksheet = file_get_contents($ws);    
         if ($worksheet === false or empty($this->storesData) return false;

         $xml = simplexml_load_string($worksheet);  
         if (!$xml) return false;

        // Loop through $storesDetails array containing rows of data
        foreach ($this->storesData as $std){

            // For each row of data create new row in excel worksheet
            $newRow = $xml->sheetData->addChild('row'); 

            // Loop through columns values in rowdata
            foreach ($std as $cbd){                      
                // Save each column value into next column in worksheets row 
                 foreach ($this->storesData as $cbd){
                    $newCell = $newRow->addChild('c'); 
                    $newCell->addAttribute('t', "inlineStr");
                    $newIs = $newCell->addChild('is');
                    // text has to be saved as utf-8 (otherwise the spreadsheet file become corrupted)
                    if (!mb_check_encoding($cbd, 'utf-8')) $cbd = iconv("cp1250","utf-8",$cbd); 
                    $newT = $newIs->addChild('t',$cbd);                     
                }
             }
         }

         // Save xml data back to worksheet file
         if (file_put_contents($ws, $xml->asXML()) !== false) return true;           
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:16:16.087

我尝试保持最新的 PHPExcel 替代品列表在[这里](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)

如果您追求的原始速度/内存性能超出 PHPExcel 所能提供的任何东西，那么我真正推荐的唯一一个是[Ilia 的 libXL 包装器扩展](https://github.com/iliaal/php_excel)，[因为](http://www.libxl.com/)该库仍然受到积极支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:21:21.650

您是否尝试过旧的 Pear Excel（又名 Spreadsheet_Excel_Writer： http: [//pear.php.net/package/Spreadsheet_Excel_Writer/redirected](http://pear.php.net/package/Spreadsheet_Excel_Writer/redirected)）？

关于 Pear Vs PHPExcel 的结帐讨论：http:
[//phpexcel.codeplex.com/discussions/240688](http://phpexcel.codeplex.com/discussions/240688)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:21:33.873

您可以以 CSV 格式导出，Excel 可以处理。如果您在写入文件时遇到问题，您可以随时循环结果（分页）并将它们附加到 CSV 文件中

之后尝试使用 PHPExcel 将其转换为 .xsl 或 .odf 格式，否则将其保留为 CSV。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T15:31:32.967

查看[OfficeWriter](http://www.officewriter.com/)。我们最近专门为一家财富 500 强金融公司改进了海量数据集的性能。它对文件格式的作用比您特别需要的要多（图表和您拥有的东西），但是 API 非常易于使用，并且通过评估，您可以快速获得 POC。免责声明 - 我支持构建最新版本的工程师。

你们的另一个缺点是它是.NET。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-07T12:35:45.347

只是打印表呢？

```
<?php
header("Content-Type:   application/vnd.ms-excel; charset=utf-8");
header("Content-Disposition: attachment; filename=abc.xls");  //File name extension was wrong
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false);

echo "<table><tr><td>Test</td><td>Test2</td></table>"; 
```

# php - 从 wordpress 数据库中查询作者信息

> ID：10649097
> 
> 赞同：1
> 
> 时间：2012-05-18T08:15:47.620
> 
> 标签：php, mysql, wordpress

我的 Wordpress 博客中有一个作者页面，但我也想将每个作者的帖子数量显示为一个数字。我对数据库查询了解不多，所以我想知道如何使用每个用户的帖子数量来扩展以下查询。

到目前为止，这是我的代码：

```
 function contributors() {
    global $wpdb;

    $authors = $wpdb->get_results("SELECT ID, user_nicename from $wpdb->users WHERE display_name <> 'admin' ORDER BY display_name");

        foreach ($authors as $author ) {

        echo "<li>";
        echo "<div class='author-image'>";
        echo "<a href=\"".get_bloginfo('url')."/?author=";
        echo $author->ID;
        echo "\">";
        echo userphoto($author->ID);
        echo "</a>";
        echo "</div>";
        echo "<div class='meta'>";
        echo "<h2 class='author-name'>";
        the_author_meta('display_name', $author->ID);
        echo "</h2>";
        echo "<span class='count'>";
        count_user_posts($author->ID); //Not working
        echo " Articles</span>";
        echo "<p class='description'>";
        the_author_meta('description', $author->ID);
        echo "</p>";
        echo "<span class='top-dotted'></span>";
        echo "</div>";
        echo "</li>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:21:35.077

您只需要添加一个子选择来计算每个用户。

我可以使用以下查询获得基本上正确的结果：

```
SELECT ID, 
    user_nicename, 
    (select count(*) from wp_posts where post_author=w.ID) as posts 
FROM wp_users w 
WHERE display_name <> 'admin' 
ORDER BY display_name 
```

请注意，我在查询中将表命名为 wp_users，`w`以便我们可以在子选择中引用正确的 ID。

# jquery - jQuery UI Slider 更改后更新页面内容

> ID：10649104
> 
> 赞同：0
> 
> 时间：2012-05-18T08:16:16.963
> 
> 标签：jquery, ajax

我正在为一个 web 项目使用 jquery Ui 滑块，我有一个小问题，我必须在滑块的值更改后更新页面内容，我不熟悉 ajax，所以请给我一个例子，我想我必须向服务器发送一个带有新数据的发布请求

我的html代码

```
<div>
<p class='stops_air'>Price</p>  
<input type="text" id="price_option_right" style="border:0; color:#f6931f; font-weight:bold;" />
<div id="slider-range"></div><br />
<input type="button" value="More Filters" class="more_filters_right_option">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:19:06.523

你可以这样做：

```
$('yoursliderselector').change(function(){
    $.ajax({
        type : 'post',
        url : 'yoururl',
        data : {yourdata},
        success : function(data){
            // process to update here
        }
    });
}); 
```

编辑 ：

对于任何类型的输入

```
$('input').change(function(){
    $.ajax({
        type : 'post',
        url : 'yoururl',
        data : $(this).val(),
        success : function(data){
            // process to update here
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:21:38.680

示例代码...

```
$("#elementid").slider({
    range: true,
    min: 0,
    max: 100,
    slide: function (event, ui) {
        // write your jQuery post code here
        $.post("url", function(data){
           // write your page update code here
        });
    }
}); 
```

# git - 查看合并分支的历史

> ID：10649106
> 
> 赞同：0
> 
> 时间：2012-05-18T08:16:21.927
> 
> 标签：git, git-log

鉴于这样的历史：

1.  在提交 a111 处创建新分支 foo
2.  添加 3 次提交到 foo (b222, c333, d444)
3.  将 foo 合并到 master (e555)

是否有一系列参数`git log ... e555`可以选择 b222 到 d444？（同样选择 a111 或 e555 也可以）。

（好吧，我想我可以自己回答）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:19:50.100

经过一些试验和错误，我想通了：

```
e555^1..e555^2 
```

换句话说，“选择合并[分支]的第二个父级的历史记录中但不在第一个父级[主，通常]的历史记录中的提交”。

我不认为有更简单的方法吗？

# android - 无法获取 ACTION_IMAGE_CAPTURE 拍摄的照片路径

> ID：10649110
> 
> 赞同：0
> 
> 时间：2012-05-18T08:16:49.980
> 
> 标签：android, android-intent

我使用 Intent 和 ACTION_IMAGE_CAPTURE 使用相机拍照，我成功获取了照片的 uri，但是当我使用此 uri 获取路径时，发生了异常。当我去画廊时，我没有看到照片。我重新启动手机，然后我在图库中看到了这张照片。一旦我完成意图，谁能告诉我如何获取路径或让位图进入画廊？

我的代码：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                    Date today = new Date();

                    fileName = Integer.toString(today.getYear()) + Integer.toString(today.getMonth()) + Integer.toString(today.getDay()) +
                            Integer.toString(today.getHours()) + Integer.toString(today.getMinutes()) + Integer.toString(today.getSeconds());

                    File out = new File(Environment.getExternalStorageDirectory(), fileName + ".jpg");
                    tempUri = Uri.fromFile(out);
                    intent.putExtra(MediaStore.EXTRA_OUTPUT, tempUri);
                    startActivityForResult(intent, TAKEPHOTO);
                    break; 
```

并在 onActivityResult

```
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == COMPLETE)
    {
        if (data != null)
        {
            Uri uri = data.getData();
            if (uri != null)
            {
                    uris[currentIndex] = uri;
                    setBitmapFromUri();
            }
        }
    }
    else if (requestCode == TAKEPHOTO)
    {
        uris[currentIndex] = tempUri;
        setBitmapFromUri();
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

这是 setBitmapFromUri：

```
private void setBitmapFromUri()
{
    Uri uri = uris[currentIndex];

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 3;
    try
    {
        String path = getAbsoluteImagePath(uri);

        ExifInterface exif = new ExifInterface(path);

        int tag = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, -1);

        int degree = 0;
        if (tag == ExifInterface.ORIENTATION_ROTATE_90)
        {
            degree = 90;
        }
        else if (tag == ExifInterface.ORIENTATION_ROTATE_180)
        {
            degree = 180;
        }
        else if (tag == ExifInterface.ORIENTATION_ROTATE_270)
        {
            degree = 270;
        }

        Bitmap bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), null, options);
        Matrix matrix = new Matrix();
        matrix.setScale (2 * getWindowManager().getDefaultDisplay().getWidth() / 3 / bitmap.getWidth(), 2 * getWindowManager().getDefaultDisplay().getHeight() / 3 / bitmap.getHeight());
        matrix.setRotate(degree);

        bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);

        imageViews.get(currentIndex).setImageBitmap(bitmap);
    } catch (IOException e)
    {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }

} 
```

这是一个例外：

```
05-18 10:38:20.645: ERROR/AndroidRuntime(3342): FATAL EXCEPTION: main
    java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.Trine.HideAndSeek/com.Trine.HideAndSeek.UploadHints}: java.lang.NullPointerException
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2653)
    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2695)
    at android.app.ActivityThread.access$2000(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3835)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.Trine.HideAndSeek.UploadHints.getAbsoluteImagePath(UploadHints.java:324)
    at com.Trine.HideAndSeek.UploadHints.setBitmapFromUri(UploadHints.java:140)
    at com.Trine.HideAndSeek.UploadHints.onActivityResult(UploadHints.java:196)
    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2649) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:21:42.767

我用它来从图像的 Uri 获取真实的文件路径..

```
//----------------------------------------
/**
 * This method is used to get real path of file from from uri
 * 
 * @param contentUri
 * @return String
 */
//----------------------------------------
public String getRealPathFromURI(Uri contentUri)
{
    try
    {
        String[] proj = {MediaStore.Images.Media.DATA};
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
    catch (Exception e)
    {
        return contentUri.getPath();
    }
} 
```

此外，要在图库中查看您捕获的图像，您必须从您的应用程序启动 android 媒体扫描仪。

在捕获图像后尝试这条线..

```
context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:25:14.127

试试这个，它对我有用：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

mImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),"temp_file_" + String.valueOf(System.currentTimeMillis()) + ".jpg"));

intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);

try 
{
    intent.putExtra("return-data", true);
    startActivityForResult(intent, INTENT_FOR_IMG_PROCESSING);
} 
catch (ActivityNotFoundException e) 
{   
     e.printStackTrace();
} 
```

# design-patterns - 哪种设计模式适合 WPF 中的 Canvas 绘图

> ID：10649116
> 
> 赞同：0
> 
> 时间：2012-05-18T08:17:14.793
> 
> 标签：design-patterns, canvas, drawing

我确实有一个应用程序，它处理在 WPF 画布上绘制一些线条和形状，并在绘制的线上添加许多点，比如 1000。

哪种设计模式适合 wpf 中这种高度广泛的画布绘图。

MVVM 是绘制线条和点绘图的更好方法吗？

非常感谢任何帮助/想法。

问候， Sreekesh NK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:25:58.637

形状和线条绘制是特定于 UI 的，因此在 MVVM 中，这将存在于视图中。

如果您要坚持线条和形状，那么可能会涉及模型和视图模型，但老实说设计模式似乎并没有出现在您的要求中。

MVVM、MVP、MVC——所有这些模式都是企业架构模式。他们关心您的解决方案层和组件的复合分解，将它们分开，以便可以对其进行测试和维护。

画布绘图并不真正属于特定的设计模式。当然你可以使用 MVVM，但我看不出这会影响你对绘图组件的具体实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:47:07.287

以下是您可以考虑使用的设计的基本概述：

（我是 C++ 人，但我想你会明白的）

```
class ScreenBase
{
public:
    // define abstract operations here, may consider different return types
    // These may be Template Patterns depending
    // if there is common stuff to all screens
    virtual void drawLine(/* appropriate params here*/) = 0;
    virtual void dragLine(/* appropriate params here*/) = 0;
    virtual void deleteLine(/* appropriate params here*/) = 0;
    // more common operations

    // Use a Template pattern if there is common screen
    // serialization stuff, else just define it as abstract
    void serialize() {
        // do common stuff here
        doSynchronize();
        // do more common stuff here
    }

    virtual void doSynchronize(/* appropriate params here*/) = 0;
    ...

private:
    // store the drawing shapes here appropriately
};

class Screen1 : public ScreenBase
{
public:
    // concrete operation implementations
    virtual void drawLine(/* appropriate params here*/);
    virtual void dragLine(/* appropriate params here*/);
    virtual void deleteLine(/* appropriate params here*/);
    virtual void doSerialize() { ... }

    // concrete specifics here
};

// class Screen2 : public ScreenBase

// class Screen3 : public ScreenBase

// I dont know the Microsoft stuff, the shapes should be
// defined in WPF, So we wont need to define anything here. 
```

您可以考虑使用 Stategy 设计模式，而不是实现序列化的 Screens，这将创建一个单独的序列化类或类层次结构并将其设置为 Screen(s) 上的属性

试试这个，然后随着你的进步，试着问更具体的问题

# android - Activity中调用第三方库的native方法两次导致Android应用关闭

> ID：10649119
> 
> 赞同：12
> 
> 时间：2012-05-18T08:17:22.563
> 
> 标签：android, android-ndk, java-native-interface

我在我的应用程序中集成了两个本机库 (.so)。这些库编译得很好，我也可以将它们加载到我的应用程序中。我第一次调用库的本机方法时它工作正常，但如果我在 Activity 中再次调用相同的方法，应用程序将关闭。

我面临的问题与此处提到的完全相同：http:
[//grokbase.com/t/gg/android-ndk/1226m68ydm/app-exit-on-second-native-call](http://grokbase.com/t/gg/android-ndk/1226m68ydm/app-exit-on-second-native-call)

可行的解决方案是在另一个 Activity 中调用本机方法并通过 System.exit(0) 强制将其关闭。在文章之后，我尝试在成功操作后将被调用方法的指针设置为 NULL，但这也对我没有帮助。一旦它被 System.loadLibrary() 加载，它也不能卸载一个库。

我想在不创建新活动的情况下多次调用本机方法。任何想法如何解决这个问题？

（我终于找到了解决方案……在这里）

好的，我终于找到了解决这个问题的方法。解决方案实际上非常简单。构建另一个独立的本机库（实用程序库）来加载和卸载其他库。我们需要做的是在实用程序的本机方法中使用 dlopen() 和 dlclose()。我们可以像以前一样通过 System.loadLibrary() 加载实用程序库。

所以在实用程序库的原生方法中，我们需要做的是：

使用`#include <dlfcn.h>`// 这是调用 dlopen() 和 dlclose() 函数所必需的。

提供处理程序和函数原型：

```
void *handle;
typedef int (*func)(int); // define function prototype
func myFunctionName; // some name for the function 
```

通过 dlopen() 打开库：

```
handle = dlopen("/data/data/my.package.com/lib/somelibrary.so", RTLD_LAZY); 
```

获取和调用库函数：

```
myFunctionName = (func)dlsym(handle, "actualFunctionNameInLibrary");
myFunctionName(1); // passing parameters if needed in the call 
```

现在通话结束了。通过 dlclose() 关闭它：

```
dlclose(handle); 
```

希望这将帮助其他面临同样问题的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T19:35:46.533

所以......我的解决方案是启动一个运行共享库代码的服务，这个服务有一个不同的进程名称（你可以在 Android Manifest 中设置它），因为它是一个不同的进程，你可以杀死它（ Using Process.killProcess (Process.myPid()) 完成运行后，不会以任何方式影响您的应用程序。

对我来说工作得很好，希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T20:32:16.997

由于这是该问题的热门话题，并且问题本身仍然存在，因此 ZakiMak 与我们分享的方法似乎仍然是最受欢迎的解决方案。

对于其他可能想要实现它并希望了解最新 Android 版本的更多详细信息的人，以下是我在偶然发现时做的一些笔记：

*   首先，现在有一个在 GitHub 上实现这种方法的解决方案。我没有亲自尝试过，但我已将其用作参考。查看 Android.mk 文件的结构以及库的打开方式和方法调用方式非常有用。链接在这里：[https ://github.com/jhotovy/android-ffmpeg](https://github.com/jhotovy/android-ffmpeg)
*   本机库文件夹的路径会随着 Android 版本的变化而变化，并且每次运行应用程序时它似乎也会发生变化（尽管这可能只是处于调试模式）。无论哪种方式，如果可能，最好从调用 Java 方法传入路径。例如：

在 Java 包装类中：

```
import android.content.Context;
import android.util.Log;

public class FfmpegJNIWrapper {

    //This class provides a Java wrapper around the exposed JNI ffmpeg functions.

    static {
        //Load the 'first' or 'outer' JNI library so this activity can use it
        System.loadLibrary("ffmpeg_wraper_multi_invoke_jni");
    }

    public static int call_ffmpegWrapper(Context appContext, String[] ffmpegArgs) {
        //Get the native libary path
        String nativeLibPath = appContext.getApplicationInfo().nativeLibraryDir;

        //Call the method in the first or 'outer' library, passing it the
        //native library past as well as the original args
        return ffmpegWrapper(nativeLibPath, ffmpegArgs);
    }

    // Native methods for ffmpeg functions
    public static native int ffmpegWrapper(String nativeLibPath, String[] argv);

} 
```

在“第一”或“外部”本机库中：

```
JNIEXPORT jint JNICALL Java_com_yourpackage_androidffmpegwrapper_FfmpegJNIWrapper_ffmpegWrapper(JNIEnv *pEnv, jobject pObj, jstring nativeLibPath, jobjectArray javaArgv) {

    //Get the second or 'inner' native library path
    char* nativePathPassedIn = (char *)(*pEnv)->GetStringUTFChars(pEnv, nativeLibPath, NULL);
    char ourNativeLibraryPath[256];
    snprintf(ourNativeLibraryPath, sizeof (ourNativeLibraryPath), "%s%s", nativePathPassedIn, "/libffmpeg_wraper_jni.so"); //the name of your ffmpeg library

    //Open the so library
    void *handle;
    typedef int (*func)(JNIEnv*, jobject, jobjectArray);
    handle = dlopen(ourNativeLibraryPath, RTLD_LAZY);
    if (handle == NULL) {
        __android_log_print(ANDROID_LOG_VERBOSE, APPNAME, "could not open library: %s", dlerror());
        printf("Could not dlopen(\"libbar.so\"): %s\n", dlerror());
        return(-1);
    }

    //Call the ffmpeg wrapper functon in the second or 'inner' library
    func reenterable_ffmpegWrapperFunction;
    reenterable_ffmpegWrapperFunction = (func)dlsym(handle, "Java_com_yourpackage_androidffmpegwrapper_FfmpegJNIWrapper_ffmpegWrapper");
    reenterable_ffmpegWrapperFunction(pEnv, pObj, javaArgv); //the original arguments

    //Close the library
    dlclose(handle);

    // return
    return(1);
} 
```

*   礼貌地说，Android.mk 文件有点“古怪”。因为您在一个 Android.mk 文件中构建了两个独立的库，所以这可能比其他 NDK 生成的文件更复杂一些，因此如果您遇到一些奇怪的错误，请在开始拆分项目之前进行一些搜索。例如：[https ://stackoverflow.com/a/6243727/334402](https://stackoverflow.com/a/6243727/334402)

# javascript - 谷歌地图仅在 iPad 上导致不可见的 html 元素，奇怪的行为为什么？

> ID：10649120
> 
> 赞同：0
> 
> 时间：2012-05-18T08:17:22.927
> 
> 标签：javascript, ipad, html, google-maps, google-maps-api-3

如果您有 iPad，请在您的 iPad 上查看此页面[www.toughtomato.com/view](http://www.toughtomato.com/view)（我在 iPad2 上对此进行了测试）。现在在您的桌面浏览器上检查它 - 任何浏览器都没有关系。

如果您注意到左侧的菜单在 iPad 上消失了，但元素仍然存在，因为您可以点击以单击它们。

现在我已将此行为归结为在页面上包含 Google Maps v3 脚本：

```
<script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=false'></script> 
```

如果我从这个页面的 HTML 中删除这行代码，那么菜单在 iPad 上仍然可见。什么可能导致这种情况，有解决办法吗？

谢谢你的帮助。这是一个非常令人沮丧的问题！

**[编辑] 除了谷歌地图脚本之外，我已经从页面中删除了所有 JS。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:25:21.253

Thought i would chip in on this too. After playing around with z-indexs and getting no where I found this post

[iPad Safari scrolling causes HTML elements to disappear and reappear with a delay](https://stackoverflow.com/questions/9807620/ipad-safari-scrolling-causes-html-elements-to-disappear-and-reappear-with-a-dela)

Which was to do with elements being hidden during scroll.

One of the fixes was to use

```
*:not(html) {
-webkit-transform: translate3d(0, 0, 0); 
```

To force hardware acceleration (I think). I used modified version (applying it to all divs) and behold it works.

Hope this is helpful to someone else.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:29:51.697

感谢您之前通过使用 iFrame 嵌入地图找到了一种变通解决方案，但是，我通过将以下属性添加到不可见元素来解决了这个问题。

```
z-index: -1; 
```

这些元素只有在 Google Maps JS 加载后才变得不可见，因此很明显它正在操纵 DOM。不幸的是，它所针对的块级元素没有共性，但它们位于 body 标记中的第一个和最后一个块元素。好奇的。

无论如何，我希望这个解决方案可以帮助遇到这个奇怪错误的人。

PS。我在运行 iOS 5.1.1 的 iPad 1 上测试我的网站

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:48:54.443

您可以将此问题概括为：我在我的页面上包含了第 3 方 JavaScript，当我这样做时，它会更改没有第 3 方 JavaScript 的内容的呈现和/或行为。

Google Maps JS 的包含是否导致了这件事真的很难说。

可能是 Google Maps JS 正在修改影响您的演示文稿的 DOM。可能是 Google Maps JS 与您的 JS 冲突。这可能是由于 Google Maps JS 写得不好。这可能是因为你的 JS 写得不好。

有太多因素可以提出解决方案，甚至是一个单一的起点。

你可以试试：

*   删除您的 JS 并查看问题是否仍然存在；如果不是，请调查受影响的页面内容以何种方式依赖于您的 JS，以及如何重写您的 JS 以不与 Google Maps JS 冲突

*   检查启用和未启用 JS 的 DOM，并查看 Google Maps JS 可能以何种方式修改内容

*   检查受影响内容上的应用样式；如何更新您的 CSS 以进行补偿？

# xamarin.android - 从 URI 获取位图

> ID：10649122
> 
> 赞同：3
> 
> 时间：2012-05-18T08:17:31.477
> 
> 标签：xamarin.android

我正在从画廊中选择图像。
这是我正在使用的代码

```
 Intent intent = new Intent();
            intent.SetType("image/*");
            intent.SetAction(Intent.ActionGetContent);
            this.StartActivityForResult(Intent.CreateChooser(intent,
                    "Select Picture"), SelectPicture); 
```

我`data.DataString` `content://media/external/images/media/11`在 Activty 结果中得到这个字符串。
这不是所选图像的完整路径。但最终我想将其转换为位图。

在活动结果..

```
protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)

Bitmap bitmap = (Android.Graphics.Bitmap)data.Extras.Get("data"); 
```

给出空错误。

但是，当我从相机捕获图像时，它没有从图库中选择图像，它工作正常，我得到了位图。我正在使用的代码：

```
 var cameraIntent = new Intent(MediaStore.ActionImageCapture);
 cameraIntent.PutExtra(MediaStore.ExtraOutput, imageUri);
 this.StartActivityForResult(cameraIntent, TakePicture); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T14:24:48.037

要将 Uri 转换为位图，请遵循以下示例：[convertUriToBitmap](https://stackoverflow.com/questions/2227209/how-to-get-the-images-from-device-in-android-java-application/2229154#2229154)。在 monodroid 中，代码如下：

```
private Android.Graphics.Bitmap NGetBitmap(Android.Net.Uri uriImage)
    {
        Android.Graphics.Bitmap mBitmap = null;
         mBitmap = Android.Provider.MediaStore.Images.Media.GetBitmap(this.ContentResolver, uriImage);
         return mBitmap;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:29:53.920

食谱：

[http://docs.xamarin.com/android/recipes/Data/Files/Selecting_a_Gallery_Image](http://docs.xamarin.com/android/recipes/Data/Files/Selecting_a_Gallery_Image)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-05T10:51:37.660

安卓

`val bitmap = BitmapFactory.decodeStream(contentResolver.openInputStream(uri))`

Xamarin Android

```
var ins = context.ContentResolver.OpenInputStream(uri);
Bitmap bitamp = BitmapFactory.DecodeStream(ins); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T11:29:56.890

```
public override void OnActivityResult(int requestCode, int resultCode, Intent data)
{
    base.OnActivityResult(requestCode, resultCode, data);

    Uri uri = data.Data;
} 
```

# mysql - mysql amazon ec2“无法创建测试文件”错误

> ID：10649132
> 
> 赞同：2
> 
> 时间：2012-05-18T08:18:24.980
> 
> 标签：mysql, amazon-ec2

我在 EC2 上运行，并希望在另一个 EBS 上拥有 MYSQL 的数据目录。我将 EBS (ext3) 安装在 /data 上，并将 my.cnf 中的 datadir 更改为指向该目录。但是，当我尝试启动 mysql 时，出现此错误：

```
120518 03:53:17 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120518 03:53:28 mysqld_safe Starting mysqld daemon with databases from /data/mysql/
120518  3:53:28 [Warning] Can't create test file /data/mysql/ip-10-136-23-225.lower-test
120518  3:53:28 [Warning] Can't create test file /data/mysql/ip-10-136-23-225.lower-test
/usr/libexec/mysqld: Can't change dir to '/data/mysql/' (Errcode: 13)
120518  3:53:28 [ERROR] Aborting

120518  3:53:28 [Note] /usr/libexec/mysqld: Shutdown complete

120518 03:53:28 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T00:21:07.817

如果您在 Ubuntu 之类的发行版上运行，那么 AppArmor 可能会阻止 mysqld 访问不同目录中的文件。如果你检查你的系统日志文件，你会发现一个神秘的错误信息。

解决方案包括：

1.  禁用 AppArmor（不推荐）

2.  编辑 AppArmor 规则（复杂）

3.  使用“挂载绑定”让 MySQL 认为您的数据文件位于原始位置，而它们实际上位于 EBS 卷上。恢复对 datadir 的更改。

几年前，我为 Amazon 写了一篇文章，描述了您正在尝试做的事情的社区最佳实践，包括 mount bind 示例的命令：

> 使用 EBS 在 Amazon EC2 上运行 MySQL
> [http://ec2ebs-mysql.notlong.com](http://ec2ebs-mysql.notlong.com)

请注意，文章中的 AMI id 是旧的。使用现代 Ubuntu AMI，您需要在 mkfs.xfs 和 /etc/fstab 中将 /dev/sdh 替换为 /dev/xvdh（但不是在 ec2 工具命令行中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T00:17:16.717

如果您运行的是 Ubuntu，由于 apparmor 服务，您可能会遇到此错误。为了解决这个问题。要绕过它，您需要执行以下操作：

1）编辑'/etc/apparmor.d/usr.sbin.mysqld'并添加以下行：

```
/opt/lib/mysql/ r,

/opt/lib/mysql/** rwk,

( assuming your new data directory is in /opt/lib/mysql ) 
```

2）重新启动apparmor服务：

```
sudo service apparmor restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:07:03.240

将 /data 目录的所有者更改为 mysqld 进程所有者（chown owner /data）。或 (chmod 777 -R /data) 非常不安全。

# android - 解密期间的Android AES加密错误

> ID：10649133
> 
> 赞同：0
> 
> 时间：2012-05-18T08:18:25.247
> 
> 标签：android, encryption, aes

我对 Android/Java 中的 AES 加密一无所知

我从这里得到了这段代码[http://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)

我在解密时收到以下错误，我的代码是否有问题？（我将加密值从一个活动传递到另一个活动）

```
 05-18 13:49:58.828: W/System.err(3350): javax.crypto.BadPaddingException: pad block   corrupted
 05-18 13:49:59.133: W/System.err(3350):    at org.bouncycastle.jce.provider.JCEBlockCipher.engineDoFinal(JCEBlockCipher.java:653)
 05-18 13:49:59.148: W/System.err(3350):    at javax.crypto.Cipher.doFinal(Cipher.java:1116)
 05-18 13:49:59.153: W/System.err(3350):    at com.spacenext.noserver2.SimpleCrypto.decrypt(SimpleCrypto.java:55)
 05-18 13:49:59.158: W/System.err(3350):    at com.spacenext.noserver2.SimpleCrypto.decrypt(SimpleCrypto.java:28) 
```

加密

```
 05-18 15:07:32.283: I/Home(3341): 530AEA4983C93379EB512387B4E547522C1E310AD6E7752AF5B9F91C329D313315FDDA853E60C78EA618211A37BA8A47 
```

在另一个活动中收到加密消息

```
 05-18 15:07:55.382: I/Home(7871): 530AEA4983C93379EB512387B4E547522C1E310AD6E7752AF5B9F91C329D313315FDDA853E60C78EA618211A37BA8A47 
```

两者都是相同的，但是当消息在另一个活动中被解密时，它会抛出一条错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:23:35.610

此代码使用弱密钥派生过程，考虑使用基于标准密码的加密来派生您的密钥。

您的错误的原因很可能是您使用了错误的密钥进行解密。以十六进制形式打印出来并与您的加密密钥（的输出`getRawKey()`）进行比较。如果您以某种方式自定义了代码，请显示相关部分。你是如何传递加密值的？它是否以某种方式编码？还要检查解密活动中的大小是否符合预期。

由于加密和解密是在不同的设备上完成的，并且涉及到一个服务器。这里还有一些需要检查/记住的事情：

1.  确保您从设备 A 发送的密文是在设备 B 上收到的。可能涉及到编码问题。
2.  不要对模式和填充使用默认参数。这些可能因您的设备而异。像这样明确指定它们`Cipher.getInstance("AES/CBC/PKCS5Padding")`
3.  确保将 IV 与密文一起发送。否则可能会自动生成一个随机的，您将无法解密。

# python - PEP 8：应该如何对 __future__ 导入进行分组？

> ID：10649145
> 
> 赞同：9
> 
> 时间：2012-05-18T08:19:32.020
> 
> 标签：python, coding-style, python-import, pep8

根据[PEP 8](https://www.python.org/dev/peps/pep-0008/#imports)：

> 进口应按以下顺序分组：
> 
> 1.  标准库导入
> 2.  相关第三方进口
> 3.  本地应用程序/库特定导入
> 
> 您应该在每组导入之间放置一个空行。

但它没有提到`__future__`进口。导入应该`__future__`与标准库导入组合在一起还是与标准库导入分开。

所以，哪个更优选：

```
from __future__ import absolute_import
import sys
import os.path

from .submod import xyz 
```

或者：

```
from __future__ import absolute_import

import sys
import os.path

from .submod import xyz 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T08:26:07.130

我个人将它们分开。导入不仅像`__future__`其他导入一样绑定名称，它还改变了语言的含义。有了模块之类的东西`from __future__ import division`，无论有没有导入，它都可能运行良好，但是如果我想了解更多关于它们来自哪里的信息，那么在没有什么告诉我去查看导入的名称的地方会给出不同的（错误的）结果。`__future__`进口商品*应尽可能*突出。

另外，我通常按字母顺序对组内的导入进行排序（没有特别好的理由这样做；我只是发现它对差异和合并分支有一些非常小的好处），并且`__future__`导入必须放在第一位，所以我将它们放在自己的组中.

# sql - 查看sql删除行日志

> ID：10649146
> 
> 赞同：0
> 
> 时间：2012-05-18T08:19:37.477
> 
> 标签：sql, sql-server-2008

如何查看特定表中已删除行的日志（并实际查看已删除的内容）..

现在我想弄清楚，`select * from ::fn_dblog(null, null)`但这只是胡说八道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:39:17.837

如果数据库处于完全恢复模式，则可以恢复您的数据。你必须执行

1.  事务日志备份
2.  使用 norecovery 恢复最新的完整备份
3.  使用 norecovery 恢复所有（如果存在）事务日志备份
4.  如果您知道错误查询被触发的确切时间，请使用 STOPAT 选项恢复最后一个事务日志。

如果数据库处于简单恢复模式，则无法恢复您的数据。

# php - 二进制值未通过 php 在数据库中更新

> ID：10649151
> 
> 赞同：0
> 
> 时间：2012-05-18T08:20:20.957
> 
> 标签：php, mysql

我正在尝试更新状态 onclick。在显示功能中我给出了这样的

```
if($row['IsActive']=="1")
{
    echo "<td> <a href='managecategories.php?IsActive=0&CategoryID=" .$row['CategoryID']. "'>Active</a></td>";
}
else
{
    echo "<td> <a href='managecategories.php?IsActive=1&CategoryID=" .$row['CategoryID']. "'>Deactive</a></td>";
} 
```

并且在加载页面时它应该获得数据库状态，因为我已经编写了这样的代码

```
 if (isset($_GET['IsActive']))
{
$status = $_GET['IsActive'];
$id = $_GET['CategoryID'];
 if($status =="0")

{

$sql = "update Categories set IsActive= 0 where CategoryID='$id'";
        $result = mysql_query($sql) or die("Could not insert data into DB: " . mysql_error());
}        
else 
 if($status =="1")
{
$sql = "update Categories set IsActive= 1 where CategoryID='$id'";
        $result = mysql_query($sql) or die("Could not insert data into DB: " . mysql_error());
}        
} 
```

但我没有得到任何结果而不是错误......请帮我看看我错在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:48:40.320

在 MySQL 中，您没有`true`and `false`，而只有`0`and `1`( `INT`)。因此，将您的查询更改为以下内容：

```
$sql = "update Categories set IsActive= 0 where CategoryID='$id'"; // FALSE
$sql = "update Categories set IsActive= 1 where CategoryID='$id'"; // TRUE 
```

此外，我看到在第一段代码中您***正确地***执行了此操作：如果行*处于活动状态，则*打印一个链接以停用 ( `if 1 then print 0`)，反之亦然。

但是在第二段代码中，你得到了你必须在`$status`变量中设置的值，然后你再说一遍`if 1 then store 0`。这是个错误。事实上，这样你总是运行一个 UPDATE 查询，将*活动*状态设置为其当前值，因为*双交换*。

也就是说，尝试交换第二段代码中的查询，如下所示：

```
if ($status == "0") 
{
    $sql = "update Categories set IsActive=0 where CategoryID='$id'";
    $result = mysql_query($sql) or die("Could not insert data into DB: " . mysql_error());
}        
else if($status == "1")
{
    $sql = "update Categories set IsActive=1 where CategoryID='$id'";
    $result = mysql_query($sql) or die("Could not insert data into DB: " . mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:01:11.610

我假设您在数据库中使用整数类型。我知道我会使用`TINYINT`任何布尔值，因为 MySQL 没有布尔类型。您的显示功能`if($row['IsActive']=="1")`支持这一点。但是，您的更新查询`$sql = "update Categories set IsActive= 'false' where CategoryID='$id'";`不会。在这里，您尝试保存一个字符串值。

因此，您应该首先确保布尔值作为 a 存储`TINYINT`在数据库中。（字符串在 PHP 端更难使用。）然后您需要确保插入到数据库中的值实际上是正确的类型。你应该使用 0`false`和 1 `true`。这也适用于 PHP：

```
$isActive = 1;
$if($isActive) {
   // This code is run
} 
```

另请注意，您应该验证类别 ID。您现在在没有事先验证的情况下插入用户输入，这很危险。用户很容易在一个命令中激活或停用所有类别。

# android - NETWORK_PROVIDER 总是返回 0.0 0.0

> ID：10649152
> 
> 赞同：0
> 
> 时间：2012-05-18T08:20:24.657
> 
> 标签：android, location

我对 network_provider 有疑问。这是我的 LocationListener：`private final class LocListener implements LocationListener{

```
 @Override
    public void onLocationChanged(Location location) {
        if(location != null){   
            latitude = location.getLatitude();
            longitude = location.getLongitude();
        }else Log.i("locListener", "null");
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

}` 
```

这是我的坐标监听器：

```
private void gpsListener(){
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                0, 0, this.locListener);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                0, 0, this.locListener2);
} 
```

我也想在室内检索位置，这就是使用 network_provider 的原因。但是当我在室内时，方法`onLocationChanged()`不会调用。我添加到清单文件中的所有需要​​的权限。

哦，我想在不使用 Wi-Fi 或其他连接的情况下从手机信号塔检索位置

感谢您的回复

# jquery - jQuery：在错误函数中使用时，getResponseHeader 在 IE 中不起作用

> ID：10649156
> 
> 赞同：3
> 
> 时间：2012-05-18T08:20:53.127
> 
> 标签：jquery, internet-explorer, header, ajaxform

我正在使用 jQuery 1.7.1。连同[Ajax Form 插件](http://jquery.malsup.com/form/)，最新版本可用。当我执行 Ajax 请求时，例如：

```
$('form').ajaxForm (
{
    success: function ( data )
    {
        alert ( data.responseText );
    },
    error: function ( data, status, error )
    {
        alert ( data.getResponseHeader('Content-type') );
    }
}
); 
```

如果请求返回错误，IE（在我的例子中是 IE9）将始终为 Content-type 标头或任何其他标头返回 undefined 。data.responseText 属性也返回 null。Gecko 或 Webkit 浏览器并非如此。

以下是 Ajax 请求返回的响应标头的示例：

```
Response         HTTP/1.1 400 Bad Request
Date             Fri, 18 May 2012 08:15:32 GMT
Server           Apache/2.2.14 (Ubuntu)
X-Powered-By     PHP/5.3.2-1ubuntu4.15
Expires          Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control    no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma           no-cache
Connection       close
Content-Type     text/html 
```

关于如何在 IE 中规避这种行为的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:53:12.183

我有一个类似的问题。由于某种原因，IE 不会检索头部，除非您在使用 GET 时未更改的静态页面上明确要求它。将 ajax 类型更改为“HEAD”而不是 GET 或 POST，它应该会拉取响应标头。

# java - 在 Java 7 64 位中，我的程序在循环中冻结

> ID：10649166
> 
> 赞同：0
> 
> 时间：2012-05-18T08:21:20.823
> 
> 标签：java

这是我的简单程序：

```
public class Test {
    public static Object obj = null;

    public static void main(String[] args) {
        obj = null;
        System.out.println("Start");
        MyThread myThread = new MyThread();
        myThread.start();
        while(obj == null) {
            //System.out.println("");
        }
        System.out.println("Stop");

    }
}

class MyThread extends Thread {

    @Override
    public void run() {
        System.out.println("Thread 1");
        try {
            sleep(1);
        } catch (InterruptedException ex) {
        }
        System.out.println("Thread 2");
        Test.obj = new Object();
        System.out.println("Thread 3");
    } 
} 
```

如您所见，我运行 MyThread 线程和 Test 类的 while 循环。循环检查 obj 是否为空，如果不是，我停止它并打印“2”。MyThread 为 obj 赋值。现在的问题是：

在 Java 7 64 位下，如果 while 循环为空，它永远不会停止。但是，如果我取消注释 System.out.print("")，则会打印循环下的“Stop”。但是对于循环内的其他语句（例如 int i = 1;），我的程序会冻结。在 Java 32 位下，所有情况下一切正常。

有人可以向我解释这种奇怪的行为吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:24:33.647

您的代码不是线程安全的。如果没有某种形式的同步，您在线程中所做的分配`Test.obj`不能保证在主线程中可见。

将该静态变量设为私有，并提供**同步**的静态 getter/tester/setter 方法将是正确实现这一点的一种方法（只要所有访问都通过这些方法）。存在其他替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:26:44.370

请记住，Java 中也有`volatile`关键字。在这个特定示例的情况下 - Java 缓存您的`obj`.

# asp.net - 读取 xml 文件时出现服务器错误

> ID：10649182
> 
> 赞同：0
> 
> 时间：2012-05-18T08:22:16.807
> 
> 标签：asp.net

我有一些 xml 文件，其中包含用于在我的页面中填充下拉列表的源数据。这些下拉菜单会根据从其他 dropdwons 中选择的项目重新填充。我收到服务器错误

> 找不到路径 X:\ASP.Net\CommodDisplay\DataFiles\dataXML.xml' 的一部分。

即使这是一条有效的路径。

这是我用来调用它的代码；

```
Dim doc As New XmlDocument()
        'Load XML from the file into XmlDocument object
        doc.Load(HttpContext.Current.Server.MapPath("~/DataFiles/dataXML.xml"))

        Dim root As XmlNode = doc.DocumentElement

        'Select all nodes with the tag Book
        Dim nodeList As XmlNodeList = root.SelectNodes("futures")
        For Each node As XmlNode In nodeList
            ddlMainsub1.Items.Add(node.SelectSingleNode("product").InnerText)
        Next 
```

我也尝试使用 Server.MapPath 并得到同样的错误。这些文件位于网络驱动器中。这有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:27:13.030

您的 asp.net 服务运行在与您自己不同的用户帐户下。您应该确保服务帐户可以访问路径：

```
X:\ASP.Net\CommodDisplay\DataFiles\dataXML.xml 
```

如果路径的一部分是网络映射，则它可能是为您映射的，但不是为运行您网站的服务帐户映射的。将所有文件放在本地并尝试是否有帮助。

# objective-c - 应用程序不再在设备上运行......吓坏了

> ID：10649184
> 
> 赞同：1
> 
> 时间：2012-05-18T08:22:26.337
> 
> 标签：objective-c, ios, xcode

当我尝试运行时，突然出现以下错误：Xcode, Duplicate symbol _main

所以我在另一篇文章中读到解决方案是从目标中删除项目-> 编译源

现在它将仅在模拟器上运行。它首先开始在构建栏上加载，但一旦达到 10% 左右，它就会停止并保持 20 秒，然后说构建成功（没有错误），但永远不会在我的 iOS 设备上启动。一直试图弄清楚过去 2 小时发生了什么。有人可以帮帮我吗？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:39:39.147

如果它在模拟器上运行，那么代码似乎没有问题。

虽然我从来没有遇到过这个特殊的错误，但是很多 XCode 的问题都可以通过断开设备、删除设备上的应用程序、重新启动设备来解决。

# css - Chrome 没有在正文上显示背景图像或颜色

> ID：10649185
> 
> 赞同：1
> 
> 时间：2012-05-18T08:22:27.447
> 
> 标签：css, google-chrome, background-image, background-color

几天前查看[我的网站时，一切正常，但今天早上在 Chrome 中查看它时，应用到正文的背景图像和颜色刚刚完全消失。](http://charanj.it)Safari 看起来也很糟糕，背景颜色可见，而主体上的背景图像仅在其他背景图像后面可见！

我尝试过的事情...

*   调整背景图像的大小，使其更小
*   删除图像并仅具有背景颜色
*   以隐身模式查看网站

结果完全没有区别。我已清除缓存并尝试禁用缓存但无济于事。此外，该文件肯定存在。我不仅可以在 Chrome 开发人员工具的“网络”选项卡中看到它们被下载，还可以在此处查看：[http ://charanj.it/assets/images/website-bg.jpg](http://charanj.it/assets/images/website-bg.jpg)

您还可以查看我尝试过的较小版本[http://charanj.it/assets/images/website-bg-small.jpg](http://charanj.it/assets/images/website-bg-small.jpg)

奇怪的是，在 Safari 中调整浏览器窗口的大小会带入背景图像。另一个奇怪的事情是，我使用几乎完全相同的背景技术构建的另一个站点显示图像很好，请参阅[http://nikeplusphp.org](http://nikeplusphp.org)

CSS 是使用 LESSPHP 生成的，但我确信这不是问题，因为它之前工作正常，并且几个月来没有对 CSS 进行任何更改。

我有 Chrome v19.0.1084.46 m 和 Safari 5.1.2、Windows 7，但问题也发生在我的 MacBook 上和 Chrome 19 上。

**更多信息：**问题也发生在网站的本地运行副本中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T07:22:01.367

虽然这似乎是一个浏览器问题，但罪魁祸首是样式表顶部的以下 CSS 行：

```
* {
    -webkit-backface-visibility: hidden;
} 
```

我试着把它移到别处，但我仍然遇到同样的问题。应用于单个元素似乎可行，但由于我不再在网站上使用任何 3D 过渡，因此不需要它，删除它已经解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:31:56.437

我检查了您的网站，后台工作正常，尝试清除所有导航数据（`ctrl`+ `shift`+`delete`选择所有复选框和任何时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:39:48.010

在我的 chrome(20.0.1132.11 dev-m) 中一切正常。

问题可能出在扩展（尝试禁用所有）或大多数chrome（尝试重新安装）

**更新： SO上的** [相同错误](https://stackoverflow.com/questions/9275802/css-background-image-disappearing-in-chrome)，根据该问题的答案，此错误是已知的，尚未修复

# validation - Zend_Form：相同的字段在实际相同时返回 false

> ID：10649189
> 
> 赞同：0
> 
> 时间：2012-05-18T08:22:32.353
> 
> 标签：validation, zend-framework, zend-form, password-confirmation

我已经为此苦苦挣扎了一个小时，但仍然无法理解出了什么问题。
这是我设置两个字段的方式：

```
$password = $this->createElement('password', 'password');
$password->setLabel('Password');
$password->setRequired('true');
$password->addValidator(new Zend_Validate_Regex('/^([a-zA-Z0-9]*[0-9]+[a-z]*[A-Z]+[a-zA-Z0-9]*)|([a-zA-Z0-9]*[A-Z]+[a-z]*[0-9]+[a-zA-Z0-9]*)$/'));
$password->setAttrib('size', 25);
$password->setAttrib('length', 150);
$this->addElement($password);

$confirm_password = $this->createElement('password', 'confirm_password');
$confirm_password->setLabel('Confirm');
$confirm_password->setRequired('true');
$confirm_password->setAttrib('size', 25);
$confirm_password->setAttrib('length', 150);

$confirm_password->addValidator('Identical', false, array('token' => 'password'));
//$confirm_password->addValidator(new Zend_Validate_Identical(array('token' => 'password')));

$this->addElement($confirm_password); 
```

我已经尝试了两个验证器（+评论的那个），但没有一个有效。这些声明来自[www.wjgilmore.com/blog/entry/validating_identical_passwords_with_the_zend_framework](http://www.wjgilmore.com/blog/entry/validating_identical_passwords_with_the_zend_framework)和[https://stackoverflow.com/a/3653416/1300454](https://stackoverflow.com/a/3653416/1300454)

这两个声明总是返回“两个给定的标记不匹配”，即使我确信这两个字段包含完全相同的字符串。

有什么猜测吗？谢谢！

**编辑**：感谢XDebug，当`Zend_Validate_Identical`'`isValid()`函数被调用时，我的`$token`等于'密码'而我的`$value`等于'P4ssword'（我在confirm_password字段中输入的密码。这是怎么回事？

**EDIT2**：尝试使用这两种解决方案：[emanaton.com/code/php/validateidenticalfield](http://emanaton.com/code/php/validateidenticalfield)和[stackoverflow.com/a/1628611/1300454](https://stackoverflow.com/a/1628611/1300454)但它们都不适合我。使用通用 IdenticalField 验证器，它找不到我的“密码”字段，第二个验证器只返回两个字段不匹配，再次使用 XDebug，我发现它仍在寻找将我的密码“P4ssword”与单词匹配我作为字段名称提供的“密码”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:06:42.830

您是否可能没有使用当前的 Zend Framework 版本？类中的代码看起来应该像您期望的那样工作（1.11）。你使用的是 $form->isValid() 还是 ->isValidPartial()？尝试编辑 ZF 的代码并转储 $context 变量的内容。看起来您的代码没有按应有的方式填充 $context 变量。

```
public function isValid($value, $context = null)
{
    $this->_setValue((string) $value);

    if (($context !== null) && isset($context) && array_key_exists($this->getToken(), $context)) {
        $token = $context[$this->getToken()];
    } else {
        $token = $this->getToken();
    }

    if ($token === null) {
        $this->_error(self::MISSING_TOKEN);
        return false;
    }

    $strict = $this->getStrict();
    if (($strict && ($value !== $token)) || (!$strict && ($value != $token))) {
        $this->_error(self::NOT_SAME);
        return false;
    }

    return true;
} 
```

# php - 生成表单结果的唯一 url

> ID：10649192
> 
> 赞同：0
> 
> 时间：2012-05-18T08:22:47.010
> 
> 标签：php, forms, wordpress, url, unique

我目前使用表单根据用户在表单中的选择来获取 wordpress 帖子。

提交表单后，您会根据选择获得一系列结果。

我想生成这些结果的唯一页面链接/网址。

所以我想到了以下几点：

```
page-result?posts-id=12,22,35&day=0&day2=1 
```

`posts-id`是结果中帖子的 ID。day 告诉你这一天是隐藏的还是可见的。

现在我的表单使用 post，我知道通过 get 你会得到类似的东西，但那是表单选择，我需要为结果创建一个 url。

做这个的最好方式是什么。

如果需要，我可以添加我现在使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:54:32.033

用户如何选择？复选框？以这种方式进行：

```
// Anyway user make choices, you can create an 
// array of choosen post IDs, right?
$post_ids = array();
$post_ids[] = 12;
$post_ids[] = 22;
$post_ids[] = 35;

// Then you jave something to get choosen "day"
$day = 0;
$day2 = 1;

// Now build your new URL
$post_ids = implode(',', $post_ids);
$url = "page-result?posts-id=$post_ids&day=$day&day2=$day2";

// And redirect user to that URL
header("Location: $url");
exit(); 
```

# php - 使用 base64_encode 而不是 mysql_real_escape_string 是否安全？

> ID：10649201
> 
> 赞同：3
> 
> 时间：2012-05-18T08:23:27.057
> 
> 标签：php, mysql

我一直在使用`base64_encode`从`<textarea>`表单中保留 html 并将数据存储在数据库中。检索时`base64_decode`使用并将数据放入文本区域。不使用这是否安全`mysql_real_escape_string()`？

我`mysql_real_escape_string`在检索`$_GET`template 的参数时使用`id`。

`templates.php?id=4`

然而，使用 base64 来保留 html 也会保留任何可能添加到 textarea 中的恶意 sql 代码。到目前为止，我还没有遇到任何问题。

使用 base64 代替这是不好的做法`mysql_real_escape_string()`吗？

“错误的工作工具”？

*注意：我`htmlspecialchars($text, ENT_QUOTES);`用于 xss。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:31:33.070

从技术上讲`base64_encode`，永远不会输出任何可用于 SQL 注入的内容。到目前为止，它是安全的。

但是，我会养成*始终*SQL 转义*任何查询中使用的**任何*参数或始终使用参数化查询开头的习惯（真的，与时俱进！）。它更简单，直接，当您更改代码时，它不会给您带来问题。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:41:38.047

是的，base64 字符串在数据库中使用是安全的。但它有一些缺点。

*   每次进入/存在数据库时，您都需要对字符串进行编码和解码，而当您转义/准备它时，您只需要执行一次。
*   你在浪费空间。base64 字符串比原始字符串大约 33%。

您最好的选择是迁移到更新的 MySQL 驱动程序（例如`mysqli`or `PDO`），并使用准备好的语句。如果由于某种原因无法做到这一点，请坚持使用`mysql_real_escape_string`.*

# c++ - 在 VC 6.0 中使用函数指针调用虚拟析构函数时出错

> ID：10649205
> 
> 赞同：1
> 
> 时间：2012-05-18T08:23:48.857
> 
> 标签：c++

我想查看A类的vtable的内容，尤其是虚拟析构函数，但是我不能通过函数指针调用它。这是我的代码：

```
typedef void (*fun)();

class A {
public:
     virtual func() {printf("A::func() is called\n");}
     virtual ~A() {printf("A::~A() is called\n");}
};

//enter in the vtable 
void *getvtable (void* p, int off){
     return (void*)*((unsigned int*)p+off);
}

//off_obj is used for multiple inherence(so not here), off_vtable is used to specify the   position of function in vtable
fun getfun (A* obj, unsigned int off_obj,int off_vtable){
     void *vptr = getvtable(obj,off_obj);
     unsigned char *p = (unsigned char *)vptr;
     p += sizeof(void*) * off_vtable;
     return (fun)getvtable(p,0);
}

void main() {
     A* ptr_a = new A;
     fun pfunc = getfun(ptr_a,0,0);
     (*pfunc)();
     pfunc = getfun(ptr_a,0,1);
     (*pfunc)(); //error occurred here, this is supposed to be the virtual desctrutor, why?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:51:31.520

为了论证的目的，我们假设所讨论的 vtable 确实按照您认为的方式布置，作为普通内存地址的表，并且当将这些地址转换为函数指针时，它们是可调用的。

你至少有两个问题：

1.  成员函数的*调用约定*不一定与普通函数相同。Microsoft 的默认调用约定是*thiscall*，它将指向正在调用其方法的对象的指针放在 ECX 寄存器中。没有手动指定的工具；实现这一点的唯一方法是以调用成员函数*的方式*调用成员函数，这涉及到类似`obj.f()`or的语法`pobj->f()`。你不能用指向函数的指针（甚至不是成员函数指针）来做到这一点，除非你编写机器代码或汇编程序来正确获取所有低级细节。

    你碰巧没有遇到这个问题，`func`因为它没有引用`this`（直接或隐式引用其他成员）。不过，析构函数确实如此。析构函数是特殊的，实际上存储在 vtable 中的是指向编译器生成的辅助函数的指针，该函数调用真正的析构函数，然后检查作为隐藏参数传递的一些标志以确定它是否应该释放对象的内存。恰好在 ECX 中的值对调用无关紧要`func`，但对`~A`调用正确非常重要。

2.  析构函数不像普通函数。正如我上面提到的，编译器可以生成一个或多个辅助函数，它们除了接收`this`. 您还没有在代码中考虑到这一点。编译器为数组和非数组析构函数生成单独的帮助器，所以现在我们甚至不知道你在 vtable 的索引 1 找到了哪个。但是由于您没有将有效的标志参数传递给它，并且没有办法将`this`值传递给它，所以无论如何您在 vtable 中找到什么并不重要。

您可以尝试通过指定不同的调用约定来解决第一个问题，例如*stdcall*。这会将`this`参数与其余参数一起放回堆栈，并允许您在调用函数指针时传递它。对于`func`,`fun`需要有这样的声明：

```
typedef void (__stdcall * fun)(A*); 
```

像这样调用`pfunc`：

```
pfunc(ptr_a); 
```

要解决第二个问题，您需要确定 vtable 函数的实际顺序，以便知道找到正确的析构函数助手。要调用它，您还需要一个不同的函数指针声明。析构函数在技术上没有返回类型，但`void`工作得很好。你可以使用这样的东西：

```
typedef void (__stdcall * destr)(A*, unsigned flags); 
```

对于这个答案的大部分内容，我使用[了 Igorsk 的一篇](http://www.openrce.org/articles/full_view/23)关于识别程序中某些模式的文章，以便将其反编译回 C++。第 2 部分涵盖类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T08:44:37.900

你不调用析构函数。你调用 operator delete()，它会计算出析构函数。直接调用析构函数是未定义的行为，与取消引用 NULL 的意义相同，即在我见过的每个平台上都会爆炸。

# c++ - 如何在 Windows 上将串行数据从 Python 脚本发送到 Arduino - 没有任何作用

> ID：10649208
> 
> 赞同：3
> 
> 时间：2012-05-18T08:24:06.190
> 
> 标签：c++, python, serial-port, arduino

我无法从 Python 脚本通过串行方式正确地将数据发送到 Arduino Uno。我正在使用 9600 波特，并且 Arduino 正确重置，但它没有读取我从 Python 脚本发送的字符。我打电话`time.sleep()`以确保 Arduino 上的重置不会干扰，并且我使用的是 Windows 7。我应该澄清说我的桌面正在运行 python 脚本并通过 USB 连接到我的 Arduino Uno 的串行。然后，我将 Uno 的 RX 和 TX 引脚（引脚 0 和 1）连接到我的 Mega 的 Serial1（引脚 18 和 19）。然后，我在笔记本电脑（使用 Mega 的常规串行）上的 Arduino IDE 中使用串行监视器来查看 Uno 所看到的内容。这是 Mega 的代码：

```
void setup() {
  Serial1.begin(9600);
  Serial.begin(9600);
  Serial.println("Master Ready");
}

void loop() {
  if(Serial1.available() > 0) {
    char inByte = Serial1.read();
    Serial.write(inByte);
    Serial.write("\n");
  }
} 
```

这是 Uno 的代码：

```
void setup() {
  Serial.begin(9600);
  Serial.println("Slave Ready");
}

void loop() {
 if(Serial.available() > 0) {
   char inByte = Serial.read();
   Serial.write(inByte);
   }
} 
```

最后，这是 python 脚本：

```
import sys
import serial
import time

ser = serial.Serial("COM23",9600)
n = int(sys.argv[1])
print n

time.sleep(10)
print ser
print n == 41
if (n == 70):
    ser.write(chr(97))
    print 'a'
elif n == 41:
    ser.write('ggggggg')
    print 'b'
elif n == 42:
    ser.write('hello world')
    print 'c'
elif n == 25:
    ser.write(chr(100))
elif n == 26:
    ser.write(chr(101))
elif n == 22:
    ser.write(chr(102))
elif n == 10:
    ser.write(chr(103))
elif n == 4:
    ser.write(chr(104))
elif n == 14:
    ser.write(chr(105))
elif n == 7:
    ser.write(chr(106))
elif n == 11:
    ser.write(chr(105))
elif n == 5:
    ser.write(chr(106))
elif n == 17:
    ser.write(chr(107))

# head - a - 70
# right bicep - b - 41
# right forearm - c - 42
# left bicep - d - 25
# left forearm - e - 26
# chest - f - 22
# right thigh - g - 10
# left thigh - h - 4
# right shin - i - 11 - 14
# left shin - j - 5 - 7
# waist - k - 17 
```

如果有帮助，我实际上是在尝试将 Doom3 中的命中位置通过串行方式写入 Arduino，以便 Arduino 可以在您身体的适当位置打开电机。游戏代码是用 C++ 编写的，我首先尝试使用 C++ 的串行库，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:52:53.227

我刚遇到类似的事情。这里的关键是它在从 IDE 与 arduino 通信时工作，而在使用其他一些串行程序时失败。你已经被这个`auto-reset` *特性*所吸引了。

查看[Arduino Playground 上的此链接，](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)详细了解正在发生的事情以及如何处理它。该网站根据您的技能和舒适度提供了几种解决方案。

我希望您的 C++ 代码在您从该站点实现其中一种变通方法后将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:47:28.167

如果我正确理解您的物理设置，Arudino IDE 和 python 之间似乎存在冲突。默认情况下，一次只能打开一个程序（如打开文件进行独占写入）。如果您只使用 python 脚本，请不要启动 arduino IDE 并更改 arduino 以在收到消息时打开 LED，这应该可以工作（如果您的串行端口分配正确）。arduino 的诊断 LED 应随着正常的串行流量闪烁，但对于单个消息，您可能会错过短暂的闪烁。

看起来IDE之间和Arduinos之间使用串行端口之间也存在冲突。（我不明白多个 Arduino 的原因。）每个串行通信对应该是唯一的。使用 Arduino 的 SoftwareSerial 库使用另一对数字引脚在 arduino 之间进行通信，而不是 FTDI 芯片当前用于与 IDE 通信的 d0/d1 引脚。

如果 python 脚本无法打开/与串行端口通信，可能还会在 python 脚本中包含一些诊断消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-30T21:39:33.390

# 问题：

串行通信并不总是准确的。有时您会注意到，在串行监视器中，由于来自 Arduino 的两条或多条数据重叠，您不希望出现的垃圾数据。同样，尝试快速发送两个值并在串行监视器上打印该值，您会注意到相同类型的重叠。Arduino 需要一定的延迟才能有效工作，因此 pyserial 模块不是将 python 与 Arduino 一起使用的最佳方式。

* * *

* * *

# 解决方案：

1) 在你的 python 脚本中使用 ser.write() 或 ser.read() 函数两次！如果您觉得这很烦人，请使用下一个解决方案。

* * *

2 ) 使用 Arduino_Master_Delta 模块（python）与 Arduino 进行通信，该模块专门设计用于简化流程并通过先进的数据科学和可视化功能去除垃圾值。

### pip 模块的链接是[Arduino_Master_Delta](https://pypi.org/project/Arduino-Master-Delta/)

安装此模块后，您可以改用以下语句：

```
import Arduino_Master_Delta as amd
writeSerial(23, msg=' Whatever you want to send to the serial monitor')
# Data will be encoded into bytes and hence use the Serial.readString() in Arduino code
# and then convert the string to your desired data type! 
```

阅读以上链接中的文档以了解更多信息！

顺便说一句，我是这个 python 模块的开发者。请分享您对此的看法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T04:39:36.020

我也遇到了串行通信问题，我设法通过关闭 Arduino 中的串行监视器来解决它。我不知道你是否在运行程序时打开它，但如果你这样做了，那可能就是问题所在。

# java - 自动比较单个单元测试的 Java 分析结果

> ID：10649210
> 
> 赞同：8
> 
> 时间：2012-05-18T08:24:27.373
> 
> 标签：java, profiling

我想运行一个单元测试并收集它的“分析”信息：每个方法被调用的频率、某个类的多少个实例被创建、执行某个方法/线程需要多少时间等等。然后，我想要将此信息与一些预期值进行比较。是否有任何适用于 Java 的 Profiler 可以让我这样做（当然，所有这些都应该自动完成，无需任何 GUI 或用户交互）？

这就是我希望它的工作方式：

```
public class MyTest {
  @Test
  public void justTwoCallsToFoo() {
    Profiler.start(Foo.class);
    Foo foo = new Foo();
    foo.someMethodToProfile(); // profiler should collect data here
    assertThat(
      Profiler.getTotalCallsMadeTo(Foo.class, "barMethod"), 
      equalTo(3)
    );
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:04:00.050

使用多个 Java 分析器可以自动捕获分析信息的快照，您必须将 VM 参数添加到 Java 启动命令以加载分析器，并且您必须告诉分析器记录数据并在退出时保存快照。

在[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)中，您可以使用[“profile”ant 任务](http://resources.ej-technologies.com/jprofiler/help/doc/offline/ant.html)来执行此操作。它从从 JProfiler GUI 导出的配置文件中获取分析设置。您可以使用[Controller API](http://resources.ej-technologies.com/jprofiler/help/doc/offline/javadoc/com/jprofiler/api/agent/Controller.html)开始录制并保存快照。

那么你有两个选择：

1.  您可以使用**jpcompare**命令行实用程序或相应的[“比较”ant 任务](http://resources.ej-technologies.com/jprofiler/help/doc/export/antComparisons.html)将快照与已知基线进行比较。有[几个比较可用](http://resources.ej-technologies.com/jprofiler/help/doc/export/cmdlineComparisons.html)。您可以将结果导出为 HTML 或机器可读格式 (CSV/XML)。

2.  **您可以使用jpexport**命令行实用程序或相应的 [“导出”ant 任务](http://resources.ej-technologies.com/jprofiler/help/doc/export/antExport.html)从快照中提取数据。然后，您可以编写自己的代码来分析来自特定运行的分析数据。

对于一组有限的分析数据，实际上可以使用 JProfiler API 编写您自己的分析器，该分析器执行类似于`Profiler.getTotalCallsMadeTo(Foo.class, "barMethod")`示例中的操作。请参阅`api/samples/platform`JPfiler 安装中的示例。您将从热点数据中获取信息。

但是，为了断言是否调用了特定方法，我建议采用基于 AOP 的方法。使用基于分析器的方法适用于检测性能回归。

免责声明：我公司开发 JProfiler。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:08:38.927

我发现这可以使用 J2SE 内置的[HPROF 分析工具](http://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html)来完成。

```
java -agentlib:hprof=cpu=times MyTest 
```

它会生成一个格式如下的文本文件：

```
CPU SAMPLES BEGIN (total = 126) Fri Oct 22 12:12:14 2004
rank   self  accum   count trace method
   1 53.17% 53.17%      67 300027 java.util.zip.ZipFile.getEntry
   2 17.46% 70.63%      22 300135 java.util.zip.ZipFile.getNextEntry
   3  5.56% 76.19%       7 300111 java.lang.ClassLoader.defineClass2
   4  3.97% 80.16%       5 300140 java.io.UnixFileSystem.list
   5  2.38% 82.54%       3 300149 java.lang.Shutdown.halt0
.... 
```

然后很容易解析文件并提取您感兴趣的方法。该解决方案完全免费并且内置JSE，这与其他工具相比具有很大的优势。

# java - 将作业与值相关联

> ID：10649215
> 
> 赞同：0
> 
> 时间：2012-05-18T08:24:42.403
> 
> 标签：java, c, java-native-interface

```
jclass object = (*env)->FindClass(env,"java/lang/Integer") // C Code 
```

有什么办法可以将*整*数值与`object`？我想`object`包含/指向一个整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:14:54.250

确保您阅读了 JNI 指南的Pitfalls*部分中的*[Confusing jclass with jobject的理解。](http://java.sun.com/docs/books/jni/html/pitfalls.html#29158)

 *`FindClass(env, "Foo")`返回（句柄）类型的对象`java.lang.Class`。它在概念上等同于[`Class.forName(String)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#forName%28java.lang.String%29)静态方法：它不返回作为参数 ( `Foo`) 提供的类的实例。它返回一个`Class`表示该类的类型的对象。

你可以用 a `jclass`（或 a `Class`）做的是找到你想要的构造函数，然后调用该构造函数来创建一个类型的对象`Foo`。

JNI 指南有一个示例，说明如何在类的[调用构造函数](http://java.sun.com/docs/books/jni/html/fldmeth.html#26254)`String`中执行此操作。`Integer`除了方法签名之外，对类执行此操作是相似的。

你会做这样的事情：

```
jclass clazz = (*env)->FindClass(env, "java/lang/Integer");
jmethodID mid = (*env)->GetMethodID(env, clazz, "<init>", "(I)V");
jobject mint = (*env)->NewObject(env, clazz, mid, 42); // your desired value here 
```

（需要错误检查。）*

# javascript - 在不使用 javascript 或 Jquery 提交表单的情况下将值添加到文本框历史记录

> ID：10649219
> 
> 赞同：1
> 
> 时间：2012-05-18T08:25:16.407
> 
> 标签：javascript, jquery, textbox, browser-history

你好朋友我的`<input type="text" id="tempID" />`表格中有一个元素

我的表格中也有一个`<input type="button" onclick="doSomething()" />`元素。

当用户单击按钮时，我想将文本框值添加到文本框历史记录中。

我正在使用 Jquery ajax 处理请求。所以我必须用javascript或Jquery来做。

这是否可以`<input type="text" />`使用 javascript/Jquery.. 向特定元素的历史添加值？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:28:11.847

这是使用 HTML5 LocalStorage 的方法

```
$( "#tempID" ).autocomplete({
  source: function( req, resp ) {

    var temp = localStorage.getItem('custom_history');  

    var data = JSON.parse(temp);
    resp( data );

}
});

$('#tempID').on('blur', function() {
    var temp = localStorage.getItem('custom_history');  

    var data = JSON.parse(temp); 
    if($.trim(this.value).length > 0)
       data.push(this.value);

    localStorage.setItem('custom_history', JSON.stringify(data)); 
```

});

我正在做的是当用户离开输入字段时将值设置为 HTML5 本地存储，单击其他地方。

然后检索它并将其设置为 jQuery UI 自动完成的源。

这是一个工作小提琴[http://jsfiddle.net/joycse06/EBduF/173/](http://jsfiddle.net/joycse06/EBduF/173/)

输入一些值。点击其他地方。再次单击返回并添加其他值。刷新小提琴并开始输入其中一个，然后会显示自动完成。

**更新**

根据他的评论和后来的聊天，他需要的最终代码是这个，如果以后可能会有其他人，我会粘贴

```
// if we dont set this line then ff will return null, and null.length will throw an error
if(!localStorage.getItem('custom_history'))
        localStorage.setItem('custom_history','');
 $( "#test" ).autocomplete({
    source: function( req, resp ) {
      var term = req.term;
      var temp = localStorage.getItem('custom_history');  
        var data = [];
        if(temp.length > 0)
           data = JSON.parse(temp);
       var intRegex = /^\d+$/; 
       data = $.map(data,function(val){
                if(intRegex.test(val)){
                   if(val.indexOf(term) != -1) 
                        return val;
                   else
                        return null;
                }
                else
                    return null;
             });
      resp( data );

    }
});

$('#save').on('click', function() {
    var temp = localStorage.getItem('custom_history'); 

      var data = [];
      if(temp.length > 0)
        data = JSON.parse(temp); 
      var value = $.trim($('#test').val());
      if(value.length > 0){
         if($.inArray(value,data) != -1){
             //alert('Duplicate'); 
             return;
         }

      }
      data.push(value);
      localStorage.setItem('custom_history', JSON.stringify(data)); // set item to localStorage
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:28:28.840

您可以使用`localStorage`如下：

```
var arr = [];
$('input#tempID').on('click', function() {
   arr.push(this.value);
   localStorage.setItem('history', JSON.stringify(arr)); // set item to localStorage
}); 
```

要检索该值，请尝试，

```
var temp = localStorage.getItem('history');

if(retarr) { // checking that data it stored in localStorage or not, if not exists temp = null
  var allHistories = JSON.parse(temp); // now you have history
  console.log(allHistories);
} 
```

我认为你需要像[**自动完成这样的东西**](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/)

# c++ - 返回 ref 时是否为未定义的行为？到局部变量？

> ID：10649224
> 
> 赞同：-3
> 
> 时间：2012-05-18T08:25:49.563
> 
> 标签：c++, reference, undefined-behavior

> **可能重复：**
> [返回局部变量或临时变量的地址](https://stackoverflow.com/questions/2744264/returning-the-address-of-local-or-temporary-variable)
> [局部变量的内存是否可以在其范围之外访问？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)
> [返回对局部变量的引用](https://stackoverflow.com/questions/6689030/return-reference-to-local-variable)

返回 ref 时是否为未定义的行为？到局部变量？

[http://ideone.com/Kz381](http://ideone.com/Kz381)

```
int & func(){

        int x = 10;
        return x;

}

int main() {

        int &y = func();
        cout << y << endl;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T08:27:30.813

是的。函数结束时，该变量不再可用。

你很不幸，它似乎有效。问题是，那个内存没有被清除，所以`10`它仍然存在，但它可以随时回收，所以它绝对不安全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T08:36:03.227

如果你想获得技术，返回它不是未定义的行为。当/如果您尝试*使用*返回的内容时，您只会得到未定义的行为。

# javascript - 鼠标悬停时未显示选择列表标题

> ID：10649229
> 
> 赞同：1
> 
> 时间：2012-05-18T08:26:42.910
> 
> 标签：javascript, jquery

我创建了一个选择列表并应用了 jquery UI `selectmenu plugin`，例如：

```
 <select id="test" title="This is not showing on mouse hover">
  <option..>
  </option>..
  </select>

  $("#test").selectmenu(); 
```

现在我的问题是我给我的**标题**`select list`没有显示在鼠标悬停上。有什么问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:33:38.413

显然，选择菜单小部件没有公开`title`原始元素的属性。

当这个小部件在主 jQuery UI 树中可用时，这可能会修复，但与此同时，您可以自己实现此功能。尝试：

```
var $test = $("#test");
$test.selectmenu().selectmenu("widget").attr("title", $test.attr("title")); 
```

# spring - 没有默认构造函数的类在spring中的bean类实例化

> ID：10649237
> 
> 赞同：0
> 
> 时间：2012-05-18T08:27:18.040
> 
> 标签：spring, constructor, default-constructor

我在我的模型中使用第三方库类 XYZ 作为参数。XYZ 没有默认构造函数。所以 spring 无法为其创建 bean 并给出错误消息

```
org.springframework.web.util.NestedServletException: Request processing failed; 

nested exception is org.springframework.data.mapping.model.MappingInstantiationException: 

Could not instantiate bean class [org.abc.def.XYZ]: No default constructor found;nested exception is java.lang.NoSuchMethodException: org.abc.def.XYZ./<init/>()
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:681) 
```

我能做些什么来解决这个问题？我无法将默认构造函数添加到 XYZ。

我在调度程序 servlet 中添加了以下内容，但它仍然不起作用。

```
<bean name="token" class="org.abs.def.Xyx">
    <constructor-arg name="arg1" value="val1"/>
    <constructor-arg name="arg2" value="val2"/>
    <constructor-arg name="arg3" value="val3"/>
</bean> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:38:14.693

您可以在 XML 文件中将其定义为传递所有必要参数以实例化它的 spring bean。

样本：

```
<bean id="xyz" class="com.a.b.Xyz" >
    <constructor-arg index="0" ref="anotherBean"/>
    <constructor-arg index="1" value="12"/> 
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:39:43.537

您需要`<constructor-arg>`在应用程序上下文配置文件中提供元素，如[文档中所述](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-factory-collaborators)。

# php - youtube php api中的开发者标签

> ID：10649239
> 
> 赞同：0
> 
> 时间：2012-05-18T08:27:25.163
> 
> 标签：php, zend-framework, youtube-api

有没有人让开发人员标签与 php zend 客户端库一起使用？

我上传了带有“BABYLON__”开发者标签的视频

按照[api](https://developers.google.com/youtube/2.0/developers_guide_php#Retrieving_and_searching_for_videos)说明，它应该只能使用下面的代码检索带有开发者标签的视频

```
$devTagUrl =
'http://gdata.youtube.com/feeds/api/videos/-/%7Bhttp%3A%2F%2Fgdata.youtube.com' .
'%2Fschemas%2F2007%2Fdevelopertags.cat%7DBABYLON__';

// obtain a feed with videos matching the provided developer tag
$yt->getVideoFeed($devTagUrl); 
```

然而这没有返回任何东西。我知道这些视频存在，作为对

```
$devTagUrl = "http://gdata.youtube.com/feeds/api/users/default/uploads";
$videoFeed = $yt->getVideoFeed($devTagUrl); 
```

将所有视频拉入提要。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:31:09.170

上传和可用于搜索的开发人员标签之间存在延迟。不要指望您的视频在上传后立即可搜索，延迟可能会超过一个小时！

# xslt - 使用 XSLT 将 DIDL XML 转换为 HTML

> ID：10649246
> 
> 赞同：-1
> 
> 时间：2012-05-18T08:28:39.880
> 
> 标签：xslt

我有一个非常具体的 DIDL XML 文件，有点像这样 - [http://en.wikipedia.org/wiki/Digital_Item_Declaration_Language](http://en.wikipedia.org/wiki/Digital_Item_Declaration_Language)

我想使用 XSLT 将其转换为 HTML，它也应该具有展开和折叠功能。我尝试了很多东西，但找不到任何解决方案。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:04:12.000

除了特定的命名空间声明之外，它确实是一个常规的 XML。

示例 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<did:DIDL xmlns:did="urn:mpeg:mpeg21:2002:02-DIDL-NS" xmlns:didmodel="urn:mpeg:mpeg21:2002:02-DIDMODEL-NS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <did:Item>
    <did:Descriptor>
      <did:Statement mimeType="text/plain">Image item which two images</did:Statement>
    </did:Descriptor>
    <did:Descriptor>
      <did:Component>
        <did:Resource mimeType="image/png" ref="http://imagearchive.net/path/image.png"/>
      </did:Component>
    </did:Descriptor>
    <did:Choice choice_id="choice1" minSelections="1" maxSelections="1" default="selection1">
      <did:Descriptor>
        <did:Statement mimeType="text/plain">Choice for selection of image 1 or 2\. Digital items do not need to have choices.</did:Statement>
      </did:Descriptor>
      <did:Selection select_id="selection1">
        <did:Descriptor>
          <did:Statement mimeType="text/plain">Selection 1</did:Statement>
        </did:Descriptor>
      </did:Selection>
    </did:Choice>
    <did:Component>
      <did:Condition require="selection1" />
      <did:Descriptor>
        <did:Statement mimeType="text/plain">Picture 1 text summary</did:Statement>
      </did:Descriptor>
      <did:Resource mimeType="plain/text">This is a plain text resource which is a text about picture 1</did:Resource>
    </did:Component>
    <did:Component>
      <did:Condition require="selection1" />
      <did:Descriptor>
        <did:Statement mimeType="text/plain">Picture 1 text#1</did:Statement>
      </did:Descriptor>
      <did:Descriptor>
        <!-- the statement also can contain XML -->
        <did:Statement mimeType="text/plain">Picture 1 text#2</did:Statement>
      </did:Descriptor>
      <did:Resource mimeType="image/jpg" ref="http://picturedatabase.com/path/image1.jpg"/>
      <did:Resource mimeType="image/jpg" ref="http://picturedatabasemirror.com/path/image1.jpg"/>
    </did:Component>
    <did:Component>
      <did:Descriptor>
        <did:Statement mimeType="text/plain">Picture 2 text#2</did:Statement>
      </did:Descriptor>
      <did:Resource mimeType="image/jpg" ref="http://picturedatabase.com/path/image1.jpg"/>
      <did:Resource mimeType="image/jpg" ref="http://picturedatabasemirror.com/path/image1.jpg"/>
    </did:Component>
  </did:Item>
</did:DIDL> 
```

下面是一个 XSL 代码，只有相同的模板。输出将与输入相同

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:did="http://www.w3.org/2001/XMLSchema-instance">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

下面的代码将元素替换`<did:Descriptor/>`为`<did:CustomElement/>`

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:did="urn:mpeg:mpeg21:2002:02-DIDL-NS">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
  <xsl:template match="node()[local-name() = 'Descriptor']">
    <xsl:element name="did:CustomElement">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

# spring - Spring Framework 3.0.5 - spring 表单数据绑定 - 逗号分隔符

> ID：10649248
> 
> 赞同：0
> 
> 时间：2012-05-18T08:28:52.137
> 
> 标签：spring, binding, ldap, delimiter, comma

我有一个小组编辑表格：

```
 <form:form method="POST" action="" commandName="group">
            <table>         
                <tr>
                    <td><form:label path="name">Name</form:label></td>
                    <td><form:input path="name" disabled="disabled" /></td>
                    <td><form:errors path="name" class="error" /></td>
                </tr>
                <tr>
                    <td><form:label path="description">Description</form:label></td>
                    <td><form:input path="description" /></td>
                    <td><form:errors path="description" class="error" /></td>
                </tr>
                <tr>
                    <td><form:label path="gidNumber">GID</form:label></td>
                    <td><form:input path="gidNumber" /></td>
                    <td><form:errors path="gidNumber" class="error" /></td>
                </tr>
                <tr>
                    <td colspan="3"><input type="submit" /></td>
                </tr>       
            </table>
            <form:hidden path="members" />
        </form:form> 
```

此表单是类 Group 的绑定对象。问题是将成员属性绑定到隐藏字段。Group 类中成员属性的定义如下。组类也被 Spring LDAP ODM 管理器使用（因此那里的注释）。

```
@Attribute(name="member", syntax="1.3.6.1.4.1.1466.115.121.1.12")
private List<String> members = new ArrayList<String>(); 
```

这个数组列表的内容通常是这样的：

```
1: uid=user1,ou=users,dc=example,dc=com
2: uid=lilcuttie2,ou=users,dc=example,dc=com
3: uid=naprostejmagor,ou=users,dc=example,dc=com
4: uid=crazyuser,ou=users,dc=brazzers,dc=com
... 
```

当内容绑定到隐藏字段时，它被连接到逗号分隔，然后当它再次被拆分为 arraylist 条目时，当然每个条目被分成四个单独的条目。

我尝试为 ArrayList 使用自定义转换器，但它搞砸了一些其他的东西，比如为语言环境加载资源消息。

你有什么建议如何以任何不丑陋的方式处理它 - 这样我就不必包装我的 DAO 类或修改它们。

谢谢，

/雅库布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:46:37.003

在你的`members`元素上有一个小的包装类型，比如：

```
public class MembersWrapper{
    private List<String> members;
.....
} 
```

现在，您可以提供一个自定义转换器来将此 MembersWrapper 实例转换为 String 并返回 - 转换可以说是列表的每个元素之间用冒号分隔，您可以稍后解析：

```
public class MemberWrapperToStringConverter implements Converter<MemberWrapper, String>{
...
}

public class StringToMemberWrapperConverter implements Converter<String, MemberWrapper>{
....
} 
```

并使用 Spring MVC 注册这些转换器：

```
<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="converters">
        <set>
            <bean class="..MemberWrapperToStringConverter "/>
            <bean class="..StringToMemberWrapperConverter "/>
        </set>
    </property>
</bean> 
```

另一种方法是通过 @InitBinder 注释提供自定义属性编辑器：

```
 @InitBinder
public void initBinder(WebDataBinder binder){
    binder.registerCustomEditor(Wrapper.class, new PropertyEditorSupport(){
        @Override public String getAsText() {
            //....
        }

        @Override public void setAsText(String text) throws IllegalArgumentException {
            //....
        }
    });
} 
```

这些转换器中的逻辑应该很简单，将列表转换为某种字符串形式，您可以轻松地将其解析回列表，例如在列表元素之间添加一个冒号或分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:57:59.070

由于我不清楚您的问题，我做了一些假设并在此基础上提供了这个答案。

那么你可以使用**在**成员**列表中循环您的条目，并为列表中的每个条目创建一个单独的隐藏字段。**

 **希望这对您有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:56:46.320

使用时，您现在不需要为隐藏字段添加表单标签**只需对隐藏字段使用简单的输入标签，但在 name 属性中您需要指定如下。**

 **```
<input type="hidden" name="members${status.index}"/> 
```

通过这种方式，它将相同的值绑定回控制器。

我认为这应该对你有所帮助。

干杯。****

# .net - AutoMapper 中的 Mapper.Map 是线程安全的吗？

> ID：10649250
> 
> 赞同：33
> 
> 时间：2012-05-18T08:29:09.843
> 
> 标签：.net, asp.net-mvc, automapper

我现在正在查找[AutoMapper](https://github.com/AutoMapper)代码（为我正在从事的项目之一评估它），坦率地说，我很惊讶：

*   库 API 基于单个静态访问点（`Mapper`类型），因此通常它的任何方法都必须是线程安全的
*   但我没有在代码中找到任何证据。

我所能找到的只是[这个问题](http://automapper.codeplex.com/workitem/3197)，但即使是那里的陈述似乎也不正确：如果`Map`内部不使用线程安全的数据结构，它也不能被认为是线程安全的，如果我要`CreateMap`在非并发上下文中调用，但同时与`Map`.

即在例如 ASP.NET MVC 应用程序中 AutoMapper 唯一可能的使用模式是：

```
lock (mapperLock) {
    ... Mapper.AnyMethod(...) ...
} 
```

显然，如果我是正确的，那将是一个巨大的缺陷。

所以我有两个问题：

*   我对么？
*   如果是，那么没有此问题的 AutoMapper 的最佳替代方案是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-18T09:55:05.700

链接的[问题](http://automapper.codeplex.com/workitem/3197)或多或少地回答了您的问题：

> Mapper.CreateMap 不是线程安全的，以后也不会。但是， Mapper.Map 是线程安全的。Mapper 静态类只是 MappingEngine 和 Configuration 对象之上的一个薄包装器。

因此，仅`Mapper.CreateMap`当您以线程安全的方式在**一个中心位置进行配置时才使用。**

你的评论是：

> 我问这个是因为我想就地配置自动机，即在使用之前。我打算在非并发上下文中配置它，即 ~ lock (mapperConfigLock) { Mapper.CreateMap()....; }，我担心现在这还不够。

如果您正在进行就地配置，请不要使用静态`Mapper`类。正如对 github 问题的评论建议直接使用映射引擎：

```
var config = 
    new ConfigurationStore(new TypeMapFactory(), MapperRegistry.AllMappers());
config.CreateMap<Source, Destination>();
var engine = new MappingEngine(config);

var source = new Source();
var dest = engine.Map(source); 
```

它需要更多代码，但您可以围绕它创建自己的助手。但是在给定的方法中，一切都是本地的，因此没有共享状态，无需担心线程安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T03:26:14.580

这个问题可能有点过时了，只是想在稍微调查下记录一下我的一些发现。

[Mapper](https://github.com/AutoMapper/AutoMapper/blob/c968f34e58eed73e7cb40e8e52849408693eddb6/src/AutoMapper/Mapper.cs)是一个包装类，用于包装创建新的配置，以及静态内存中的新映射器实例，所以严格来说它不是线程安全的，但你可以安全地使用它，只要你只初始化一次配置。

[MapperConfiguration](https://github.com/AutoMapper/AutoMapper/blob/c968f34e58eed73e7cb40e8e52849408693eddb6/src/AutoMapper/MapperConfiguration.cs)创建新的mapper实例，并将配置记录在自己的实例内存空间中。

**TLDR；**

如果您只需要初始化一次配置，请选择静态 API

如果需要多次初始化配置，又担心线程安全，选择instance API

# xml - 为什么 XML 文件无法在 Firefox 中正确呈现？

> ID：10649253
> 
> 赞同：29
> 
> 时间：2012-05-18T08:29:59.907
> 
> 标签：xml, firefox

我正在使用 Firefox 读取 XML 文件，但它没有正确呈现 XML 文件。可能是什么问题呢？我在下面发布 XML 示例：

```
 <?xml version="1.0" encoding="utf-8"?><ExtPostTransaction><TransactionInfo><UserID>us</UserID><Password>pwd</Password><ServiceCode>1010</ServiceCode><TransactionID>T20120518091833</TransactionID></TransactionInfo></ExtPostTransaction> 
```

我的 Firefox 显示为：

```
uspwd1010T20120518091833 
```

我期待这个：

```
<ExtPostTransaction>
  <TransactionInfo>
    <UserID>us</UserID>
    <Password>pwd</Password>
    <ServiceCode>1010</ServiceCode>
    <TransactionID>T20120518091833</TransactionID>
  </TransactionInfo>
</ExtPostTransaction> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-22T06:19:44.460

对我来说，事实证明某种 Skype 插件是问题所在。伟大的侦探工作。奇怪的是，点击通话扩展程序如何产生如此随机的问题......

**只是禁用Skype点击通话插件**，之后Firefox显示行xml

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-05T08:05:15.010

在我的情况下，XML 页面显示为空白，当我*查看页面源*时（当您右键单击页面或按`Ctrl`+时可用选项`U`），完整的 XML 就在那里。

当我禁用**Awesome Screenshot**插件时，它得到了解决。

我建议您尝试一个一个地停用附加组件！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-28T09:15:38.410

对我来说，它来自**AdBlocker Ultimate**（至少在 2.26 版中）

但显然有一长串插件可以修改，包括（至少在某些版本中）： - Skype 通话点击 - Avira - Kaspersky

是的，提供的内容会出现问题`Content-Type: application/xml`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-23T18:29:21.883

我遇到了同样的问题，我发现 Evernote webclipper 插件搞乱了我的 firefox。一旦我禁用它，我就可以查看预先格式化的 xml。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-26T23:31:22.103

尝试禁用所有 Firefox 扩展，然后重新加载 XML 并查看 XML 是否再次显示为树。如果是这样，请一一重新启用它们，直到您的 xml 失去其样式。

对我来说，它是`Adobe Acrobat 18.0.8 "Convert current web page to an Adobe PDF file"`Firefox Quantum 59.0.2（64 位）中的插件。

禁用后，刷新页面会生成漂亮的 XML 树。启用该插件将立即将 XML 恢复为没有标签的纯文本，而无需刷新。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-21T05:46:55.267

终于找到了解决方案。当firebug打开时，firefox似乎错误地呈现XML文件。当它关闭时，XML文件正确呈现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T08:34:17.493

听起来您正在使用`text/html`内容类型提供文档，因此 Firefox 正在尝试将其呈现为 HTML。

如果您希望它使用其默认的 XML 视图来呈现它，您需要真实地说明它是什么类型的数据。使用一个`application/xml`或其他 XML 内容类型来提供它。

具体如何操作将取决于您的网络服务器和/或服务器端编程语言（如果涉及）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-24T06:14:17.270

我必须禁用 Firefox 扩展“AdBlocker Lite 0.4.2”才能让 XML 文件显示为 XML 而不是文本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-20T09:05:10.403

我打开了一个私人标签，一切都很好。然后我一一关闭并打开扩展，直到正确呈现xml文件。

对我来说， **DuckDuckGo Privacy Essentials**是个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-14T16:39:40.927

从插件管理器安装 XML Developer Toolbar 0.2 Addin。它应该可以解决您的问题。它还将解决在 Firefox 中不显示 xml 的 xml 内容。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-18T12:26:08.690

对我来说，问题是 Avira 浏览器 Safety 1.4.4 附加组件，我将其禁用，现在 xml 和 wsdl 格式可以正确打开。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-12T20:18:35.120

我有一个非常相似的问题，但我没有要禁用的附加组件。然后我注意到文本中有一些图形图像。他们原来是嵌入式 SVG。当我剥离这些内容时，剩余的 XML 标记按预期呈现为可扩展的树。

显然，Firefox 渲染器首先看到 SVG 并对其进行转换，而不是将其简单地识别为 XML 文档的一部分。我还注意到 Chrome 以同样的方式处理这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-03T09:16:57.810

从您的 Firefox 中禁用 Skype 插件，之后 Firefox 将显示 xml

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-15T16:54:44.817

我通过禁用 Mozilla Firefox 浏览器的 Kaspersky Protection 插件解决了上述问题。您可以通过按 Ctrl + Shift + A 启用/禁用/删除附加组件。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-11-13T13:02:21.147

我不得不禁用“LanguageTool - 语法和样式检查器”。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-09T13:59:33.470

禁用“Selenium IDE”扩展（[https://github.com/SeleniumHQ/selenium-ide](https://github.com/SeleniumHQ/selenium-ide)）为我解决了这个问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-02-14T14:14:57.800

似乎有许多扩展以破坏 XML 呈现的方式修改页面的显示。

检查问题是否由插件引起的最佳方法是尝试在私人窗口中查看页面。如果显示正确，请一一禁用您的插件，直到找到违规者。然后，请将其添加到列表中。

其他帖子中的一些已知插件是：

*   Nimbus 屏幕截图：截图、注释
*   硒 IDE
*   LanguageTool - 语法和样式检查器
*   卡巴斯基保护
*   Avira 浏览器安全
*   广告拦截器精简版
*   AdBlocker Ultimate
*   Skype 点击通话
*   Adobe 杂技演员
*   很棒的截图
*   优酷下载
*   卡塔隆录音机
*   什么字体
*   蜜糖

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-27T17:27:29.503

就我而言，禁用**Firefox**的**Passbolt**扩展解决了它。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-01-13T02:00:25.227

我不知道是哪个插件导致了问题，但我没有要禁用或删除的插件。

我已经安装了[https://addons.mozilla.org/en-US/firefox/addon/pretty-xml/](https://addons.mozilla.org/en-US/firefox/addon/pretty-xml/) 它很漂亮

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-31T09:12:50.480

这可能是由于在 Firefox 浏览器上安装了**扩展程序造成的。**尝试一一禁用您的扩展程序以找出导致此问题的扩展程序。

对我来说**AdBlocker Ultimate**扩展是罪魁祸首。

# facebook - 使用 PHP-SDK 向朋友推荐页面

> ID：10649256
> 
> 赞同：-1
> 
> 时间：2012-05-18T08:30:17.190
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk

如何使用 PHP-SDK 或 Javascript SDK 实现“向朋友推荐我的页面”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:33:16.717

首先，您需要包含 base_facebook.php、facebook.php 和 fb_ca_chain_bundle.crt 的 Facebook SDK 包。您还需要 fbmain.php 和 config.php 。

接下来你应该有一个包含 fbmain.php 的文件（例如 postToWall.php）

```
<?php
include_once "fbmain.php";
?> 
```

postToWall.php 文件的示例。

```
<html>
    <body id="my_body">
    <div id="fb-root"></div>
     <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });

        FB.Canvas.setAutoGrow();
      };

      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>

    <?php

        if ($me)
        {
            $params = array('message' => "message here",
                            'picture' => "picture hyperlink here",
                            'name'  => "name here",
                            'link' => "facebook page hyperlink here",
                            'description' => " description here"
                            );
            $status = $facebook->api('/me/feed', 'POST', $params);

            if (isset($status['id']))
            {
                        //do something
            }

        }
    ?>
    </body>
</html> 
```

感谢我的导师 Zen Leow 先生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T09:03:21.153

我之前发布的解决方案是使用 PHP SDK 方法。

使用 JavaScript SDK，您可以拥有一个使用 onclick 属性调用函数的 HTML 按钮。

```
<input type="button" value="Share" onclick="share();"/> 
```

在 share 函数中，method 属性是强制性的，其他属性（链接、图片、名称、标题、描述）是可选的。方法属性中的“feed”值是指您需要的提要对话框，方法属性还有其他值，例如“apprequests”（请求对话框）和“send”（发送对话框）。有关更多信息，请查看[http://developers.facebook.com/docs/reference/dialogs/](http://developers.facebook.com/docs/reference/dialogs/)

```
<script>
        function share()
        {
            var obj = {
              method: "feed",
              link: "Facebook page hyperlink",
              picture: "Picture hyperlink",
              name: "Title",
              caption: "A short caption right below the title",
              description: "Description"
            };

            function callback(response) {
              document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
            }

            FB.ui(obj, callback);
        }
</script> 
```

**PHP SDK 和 JavaScript SDK 的区别**

对于 PHP SDK，在 postToWall.php 中指定的默认消息将在单击共享按钮后直接发布到用户的墙上。您必须先将用户重定向到 postToWall.php，然后将他/她重定向回您的应用程序页面。

对于 JavaScript SDK，点击分享按钮会弹出一个窗口，用户可以在发送之前输入自己的消息。发送后不需要额外的重定向，因为用户仍在同一页面上。

PS：我现在还在学习Facebook和PHP，如果我犯了任何错误，请纠正我哈哈。谢谢 =)

# opengl - “渲染到纹理”和多通道渲染

> ID：10649258
> 
> 赞同：0
> 
> 时间：2012-05-18T08:30:38.183
> 
> 标签：opengl, graphics, shader, cg

我正在实现一个关于铅笔渲染的算法。首先，我应该使用 Phong 着色来渲染模型以确定强度。然后我应该将纹理映射到渲染结果。

我将使用 opengl 和 cg 着色器进行多通道渲染。有人告诉我我应该尝试“渲染到纹理”。但是我不知道如何使用这种方法来获得我想要的效果。在我看来，我们应该首先使用这种方法来渲染网格，然后我们可以获得关于整个场景的 2D 纹理。现在我们已经将内容绘制到帧缓冲区，接下来我们应该渲染到屏幕上，对吧？但是如何使用渲染的纹理并对其进行一些后期处理呢？任何人都可以告诉我一些关于它的代码或链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:19:07.293

我制作了本教程，它可能会对您有所帮助：[http ://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/)

但是，我认为，使用 RTT 对于您正在尝试做的事情来说太过分了。如果您需要纹理中的片段强度，那么您已经在着色器中拥有它，因此无需渲染两次......

也许这可能有用？[http://www.ozone3d.net/demos_projects/toon-snow.php](http://www.ozone3d.net/demos_projects/toon-snow.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:30:32.403

*   使用 Phong 着色渲染到纹理
*   在全屏纹理四边形中再次*将该纹理*绘制到屏幕上，应用执行所需操作的着色器。

我假设您需要澄清 RTT 和使用它。

本质上，您的屏幕是一个帧缓冲区（非常类似于纹理）；这是一天结束时的二维图像。RTT 的想法是捕获该 2D 图像。为此，最好的方法是使用帧缓冲对象 (FBO)（谷歌“帧缓冲对象”，然后点击第一个链接）。从这里，你有你的场景的 2D 图片（你应该通过保存到一个图像文件来检查它，它实际上是你想要的）。

获得图像后，您将设置*2D 视图*并将该图像用 800x600 四边形或您拥有的东西绘制*回*屏幕上。绘图时，您使用片段程序（着色器），它将图像的亮度转换为灰度值。您可以输出它，也可以将其用作另一个“铅笔”纹理的偏移量。

# python - 全局 Python 列表

> ID：10649260
> 
> 赞同：1
> 
> 时间：2012-05-18T08:30:47.470
> 
> 标签：python, python-3.x

我需要一些帮助来解决我坚持的这个功能。

我需要做三个过程，一个是根据输入的奇数或偶数运行来切换每个玩家，这是可行的，但是，我不知道如何替换和填充与列表`batsmanName`相关的占位符`batsmanBatting`，如果取了一个检票口，它会改变到`batsmanName`列表中的下一个元素（如果采取检票口，则由用户添加）。

最后的过程是将`batsmanRun`相关指标中的得分添加到击球手的击球中，即如果`batsmanBatting[4]`是'T'`batsmanRun[4]`则应按此累积。

我希望我已经清楚地解释了这一点并且有意义，如果不是我可以添加更多信息，任何帮助将不胜感激。

```
def getRuns(totalScore):

    global batsmanName  #[] empty list a function adds a player if a wicket is taken
    global batsmanRun #[0,0,0,0,0,0,0,0,0,0,0] #accumulators 
    global batsmanBatting #['F', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F'] 
    global batsmanOnField #['F', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F']
    global wickets

    while(1):
        try:
            if(totalScore%2==0):
                print(batsmanBatting)
                runs=int(input("\nEnter runs for striker %s: " % batsmanName[0]))
                batsmanRun[0]+=runs
                print(batsmanRun)
            else:
                print(batsmanBatting)
                runs=int(input("\nEnter runs for striker %s: " % batsmanName[1]))
                batsmanRun[1]+=runs
                print(batsmanRun)
            if(runs<7):    
                return runs 
            else:
                print("Invalid run(s) entered. Please try again.")
        except Exception as err:
                print(err)
                print("Please try again.") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:34:52.533

要将名称添加到`batsmanName`列表中，请执行

```
batsmanName.append('Mr Batsman') 
```

如果它是一个真正的占位符，那么不要使用列表，使用`None`或空字符串。在这种情况下，您通过分配它来更新它：

```
batsmanName = 'Mr Batsman' 
```

对于你的第二个问题（你真的应该单独提出单独的问题），不清楚“如果 batsmanBatting[4] 是 'T' 那么 batsmanRun[4] 应该根据”是什么意思，但我想这意味着：

```
for num, state in enumerate(batsmanBatting):
    if state == 'T':
        batsmanRun[num] += 1 
```

可能有更好的方法来做到这一点。或者不是，我不知道板球。

# c# - Ninject：将构造函数参数绑定到其他对象的属性

> ID：10649261
> 
> 赞同：14
> 
> 时间：2012-05-18T08:30:54.570
> 
> 标签：c#, ninject

我有一个`IConfig`对象，其中包含在我的应用程序中使用的设置。此刻，我将整个对象注入到每个需要它的对象的构造函数中，如下：

```
public interface IConfig 
{
    string Username { get; }
    string Password { get; }
    //... other settings
}

public class Foo : IFoo
{
    private readonly string username;
    private readonly string password;

    public Foo(IConfig config)
    {
        this.username = config.Username;
        this.password = config.Password;
    }
} 
```

缺点是`IConfig`包含大量设置，因为它是从整体配置文件反序列化的，因此不需要注入整个对象。我想做的是将构造函数更改为，`Foo(string username, string password)`以便它只接收它需要的设置。这也使得创建`Foo`用于测试的对象变得更加容易（不必`IConfig`为了创建而设置`Foo`）。我想直接在 my 中绑定构造函数参数`NinjectModule`，如下所示：

```
public class MyModule : NinjectModule
{
    public override void Load()
    {
        Bind<IConfig>().To<JsonConfig>()
            .InSingletonScope();

        Bind<IFoo>().To<Foo>()
            .WithConstructorArgument("username", IConfig.Username)
            .WithConstructorArgument("password", IConfig.Password);
    }
} 
```

显然这段代码不起作用，但我将如何去做我想做的事？

我最初的想法是使用`NinjectModule.Kernel`获取`IKernel`然后获取我的`IConfig`对象的实例并根据需要注入属性，但是返回的对象`NinjectModule.Kernel`没有`Get<T>()`方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T07:05:03.337

你走在正确的轨道上：

该方法是在名称空间中`Kernel.Get<T>()`定义的扩展方法，因此添加它也可以在您的模块中使用。`ResolutionExtensions``Ninject``using Ninject;`

但是，`Module.Kernel`您应该使用`IContext`在第二个重载中提供的`WithConstructorArgument`来获取`Kernel`：

```
Bind<IFoo>().To<Foo>()
    .WithConstructorArgument("username", 
                             context => context.Kernel.Get<IConfig>().Username)
    .WithConstructorArgument("password", 
                             context => context.Kernel.Get<IConfig>().Password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-12T05:05:52.523

[这可能是接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)的一个很好的候选。

在这种情况下，定义另一个接口，例如`ICredentialConfig`仅包含`Username`and`Password`属性的接口，然后`IConfig`实现该接口。

```
public Interface ICredentialConfig
{
   string Username { get; }
   string Password { get; }
}

public Interface IConfig : ICredentialConfig
{
   //... other settings
} 
```

现在 make`Foo`依赖于`ICredentialConfig`而不是`IConfig`. 然后您可以：

1.  注入您`JsonConfig`使用的 Ninject，而不是使用硬编码的参数名称。
2.  实现/模拟一个`ICredentialConfig`用于在测试中实例化`Foo`，而不是必须实现完整的`IConfig`接口。

# javascript - DIV的onclick中的alert()点击后不显示

> ID：10649264
> 
> 赞同：0
> 
> 时间：2012-05-18T08:31:02.300
> 
> 标签：javascript, css, html

我有两个矩形，里面有一些文字。我想在单击每个警报时显示不同的警报，但下面的代码不起作用（不显示警报）。有任何想法吗？谢谢

```
<div id="panel0" style="width: 100%">
    <div class="titleBox" id="rect0" onclick="alert('yeah1');"
        style="height: 85px; width: 85px;">Hello</div>
    <div class="titleBox" id="rect1" onclick="alert('yeah2');"
        style="height: 85px; width: 85px;">Hello</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:29:54.727

**试试这个**

```
<div id="rect0" onclick="alert('yeah1');" style="height: 85px; width: 85px; background-color: #ff0000;">
     Hello
</div> 
```

# .htaccess - Yii：.htaccess 和 urlManager 用于单独的后端和前端

> ID：10649266
> 
> 赞同：6
> 
> 时间：2012-05-18T08:31:25.863
> 
> 标签：.htaccess, yii, frontend, backend

我很难在 Yii 项目中配置我的 .htaccess 和 urlManager 以在 http://www.example.com 中使用前端，在[http://www.example.com/backend](http://www.example.com/backend)[中](http://www.example.com)使用后端以下文件夹结构。欢迎任何帮助。谢谢。

```
/assets
/backend
   /controllers
   /config
      main.php
   /models
   /views
/common
   /models
/protected
   /controllers
   /config
      main.php
   /models
   /views 
.htaccess
backend.php
index.php 
```

**解决方案：**在@bool.dev 的大力帮助下一切正常，所以我在这里添加了所有需要的最终文件。在前端，我使用 url 的路径格式并隐藏 index.php

/backend/config/main.php

```
$backend=dirname(dirname(__FILE__));
Yii::setPathOfAlias('backend', $backend);
return array(
'basePath' => $backend,

'controllerPath' => $backend.'/controllers',
'viewPath' => $backend.'/views',
'runtimePath' => $backend.'/runtime',

...); 
```

/protected/config/main.php

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName'=>false,
    'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
    ),
), 
```

.htaccess

```
Options +FollowSymLinks
IndexIgnore */*
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /yii/example/
RewriteRule backend backend\.php [T=application/x-httpd-php]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
</IfModule> 
```

后端.php

```
$yii=dirname(__FILE__).'/../../yii/framework/yii.php';
$config=dirname(__FILE__).'/backend/config/main.php';
require_once($yii);
Yii::setPathOfAlias('common', dirname(__FILE__).DIRECTORY_SEPARATOR.'common');
Yii::createWebApplication($config)->run(); 
```

索引.php

```
$yii=dirname(__FILE__).'/../../yii/framework/yii.php';
$config=dirname(__FILE__).'/protected/config/main.php';
require_once($yii);
Yii::setPathOfAlias('common', dirname(__FILE__).DIRECTORY_SEPARATOR.'common');
Yii::createWebApplication($config)->run(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T13:02:48.190

根据[Qiang 的这篇 wiki 文章](http://www.yiiframework.com/wiki/33/)，您可以进行以下更改，它应该可以工作：

```
// backend.php:
require('path/to/yii.php');
Yii::createWebApplication('backend/config/main.php')->run(); 
```

然后在您的后端配置中（即*backend/config/main.php*）：

```
$backend=dirname(dirname(__FILE__));
$frontend=dirname($backend);
Yii::setPathOfAlias('backend', $backend);

return array(
    'basePath' => $backend,

    'controllerPath' => $backend.'/controllers',
    'viewPath' => $backend.'/views',
    'runtimePath' => $backend.'/runtime',

    'import' => array(
        'backend.models.*',
    ),
    // ... other configurations ...
); 
```

但是为了让它工作，我们需要主 .htaccess 来将 example.com/backend 路由到 backend.php，我还没有弄清楚。

**编辑：**
刚刚发现：

```
RewriteEngine On
RewriteBase /projectroot/
RewriteRule backend backend\.php [T=application/x-httpd-php] 
```

这`RewriteBase`对我来说很重要，因为当我没有给出正确的*projectroot时找不到**backend.php*，基本上它应该是你有入口脚本*backend.php*的目录。

# c# - 在 C# 中是否可以创建实体模型而不考虑最初的数据库？

> ID：10649267
> 
> 赞同：0
> 
> 时间：2012-05-18T08:31:32.450
> 
> 标签：c#, .net, entity-framework

在 C# 中，无论最初是什么数据库，都可以创建实体模型。是否有以这种方式创建图形实体的工具？你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:35:37.737

好吧，在你的问题中，它是一个标签——实体框架是一个很好的工具。您可以创建类，然后将其推送到数据库。

搜索“代码优先”。我敢肯定，谷歌会提供很多结果。

**根据评论编辑：**

那么，在这种情况下，试试这个：当你创建 edmx 文件时，选择第二个选项 - 空模型。

从它的描述来看：

> 创建一个空模型作为从工具箱直观地设计概念模型的起点。编译项目时从模型中生成类。您可以稍后指定数据库连接以将概念模型映射到存储模型。

这可能是你想要的东西。

# c# - 创建一个与 iPhone 进行 JSON 通信的 ASP.NET Web 服务

> ID：10649270
> 
> 赞同：2
> 
> 时间：2012-05-18T08:31:48.267
> 
> 标签：c#, asp.net, ios, json, web-services

我们有一个服务器，我需要一个 ASP.NET 网络服务来从我的 iPhone 访问 MS SQL 2008 数据库。我认为最好的方法是在 Csharp 中创建一个 Web 服务并使用 JSON 与 iPhone 通信。

我找不到任何教程如何使用 JSON 创建一个简单的 Web 服务。

你能给我一个像“hello world”这样的小例子，这样我就可以看到它是如何完成的？那太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:36:17.500

您可以为此使用 ServiceStack。一个hello world教程可以在这里找到：

[http://www.servicestack.net/ServiceStack.Hello/](http://www.servicestack.net/ServiceStack.Hello/)

JSON 示例可以在这里找到：

[http://www.servicestack.net/ServiceStack.Hello/servicestack/json/syncreply/Hello](http://www.servicestack.net/ServiceStack.Hello/servicestack/json/syncreply/Hello)

# c - 方法的 C 错误

> ID：10649272
> 
> 赞同：0
> 
> 时间：2012-05-18T08:32:02.697
> 
> 标签：c, incompatibletypeerror

我有以下代码：

```
#define MIDTERM_PERCENTAGE 40
#define FINAL_PERCENTAGE 60
#define ARRAY_LENGTH(array) (sizeof((array))/sizeof((array)[0]))

struct student 
{
     char name[20];
     int  midterm;
     int  final;
     int  grade;
}

int calcGrade(struct student s) {
    int midterm = (s.midterm * MIDTERM_PERCENTAGE)/100;
    int final = (s.final * FINAL_PERCENTAGE)/100;
    int grade = midterm + final;
    return grade;
} 
```

我收到这些错误：

```
student.c:13: two or more data types in declaration of `calcGrade'
student.c: In function `calcGrade':
student.c:17: incompatible types in return 
```

我也有一个具有以下声明的头文件：

```
int calcGrade(struct student s); 
```

但是，我没有看到我的错误。我认为这可能是我的部门的问题，但由于它在设置 Grade=midterm+final 时没有给我任何错误，我不明白为什么我的返回类型有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T08:34:22.503

您忘记了结构定义结束后的分号。

# c - extern char **environ 的定义在哪里？

> ID：10649273
> 
> 赞同：18
> 
> 时间：2012-05-18T08:32:11.617
> 
> 标签：c, linux

我们可以像这样在 C 中获取环境变量：

```
extern char **environ;
int main(int argc, char *argv[])
{
    int count = 0;

    printf("\n");
    while(environ[count] != NULL)
   {
         printf("[%s] :: ", environ[count]);
         count++;
   }

   return 0;
} 
```

但是环境的定义在哪里？我在 unistd.h 中找不到。它是如何工作的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T09:07:00.670

`environ`在 Glibc 源文件中定义为全局变量[`posix/environ.c`](http://sourceware.org/git/?p=glibc.git;a=blob;f=posix/environ.c)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T08:35:51.807

您是否尝试过将 envp 声明为 main 的参数？

```
int main (int argc, char *argv[], char *envp[]) 
```

[http://www.gnu.org/software/libc/manual/html_node/Program-Arguments.html#Program-Arguments](http://www.gnu.org/software/libc/manual/html_node/Program-Arguments.html#Program-Arguments)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:35:50.290

男人：

> 此变量必须在用户程序中声明，但在头文件 unistd.h 中声明，以防头文件来自 libc4 或 libc5，并且如果它们来自 glibc 并定义了 _GNU_SOURCE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-24T17:39:18.307

在 POSIX 系统上，标识符

```
extern char **environ; 
```

不必在任何标题中定义。正如[@triclosn](https://stackoverflow.com/a/10649315/4756299)对这个问题的回答中所述，“这个变量必须在用户程序中声明......”

根据[POSIX 7**环境变量**](https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html)：

> 环境变量的值是一个字符串。对于 C 语言程序，一个称为环境的字符串数组应在进程开始时可用。该数组由外部变量environ指向，定义为：
> 
> extern char **环境；

没有 POSIX 要求`environ`在任何头文件中声明变量，因此在符合 POSIX 的系统上，如果您希望在代码中声明它，它只是可用的。

# php - 无法在 PHP 中解析响应对象数组

> ID：10649274
> 
> 赞同：0
> 
> 时间：2012-05-18T08:32:16.077
> 
> 标签：php, oop, soap, response

我正在尝试将运输 API 与我的应用程序集成。我将我的详细信息发送到一个 SOAP 客户端，我收到一个对象数组作为回报，我无法解析。以下是数组。请帮我解析一下：

```
object(stdClass)#29 (4) {
    ["Transaction"]=>
    object(stdClass)#30 (5) {
        ["Reference1"]=>
        string(0) ""
        ["Reference2"]=>
        string(0) ""
        ["Reference3"]=>
        string(0) ""
        ["Reference4"]=>
        string(0) ""
        ["Reference5"]=>
        string(0) ""
    }
    ["Notifications"]=>
    object(stdClass)#31 (0) {
    }
    ["HasErrors"]=>
    bool(false)
    ["Shipments"]=>
    object(stdClass)#32 (1) {
        ["ProcessedShipment"]=>
        object(stdClass)#33 (8) {
            ["ID"]=>
            string(10) "42939401"
            ["Reference1"]=>
            string(9) "100000002"
            ["Reference2"]=>
            string(0) ""
            ["Reference3"]=>
            string(0) ""
            ["ForeignHAWB"]=>
            string(0) ""
            ["HasErrors"]=>
            bool(false)
            ["Notifications"]=>
            object(stdClass)#34 (0) {
            }
            ["ShipmentLabel"]=>
                object(stdClass)#35 (2) {
                ["LabelURL"]=>
                string(76) "http://content/rpt_cache/9c0d152bbcdc4e739132d2dsda5506.pdf"
                ["LabelFileContents"]=>
                NULL
            }
        }
    }
} 
```

我在`$response`变量中接受了这个响应并尝试了以下但这些都不起作用：

```
echo $order    = $response["Shipments"]["ProcessedShipment"]["Reference1"];
echo $hawb     = $response["Shipments"]["ProcessedShipment"]["ID"];
echo $barcode  = $response["Shipments"]["ProcessedShipment"]["ShipmentLabel"]["LabelURL"]; 
```

我不能尝试太多，因为服务没有测试框架，我必须手动取消我创建的所有发货。请告诉我该怎么办。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:33:57.613

它是对象，而不是数组。您应该使用`->`来访问该属性。

```
$order    = $response->Shipments->ProcessedShipment->Reference1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:35:54.790

那不是一个数组，它是一个`stdClass`对象（一个通用对象）。

你应该使用`$response->Shipments->ProcessedShipment->Reference1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:35:47.670

您使用`->`运算符来访问对象的属性

```
$response->Shipments->ProcessedShipment->Reference1;
$response->Shipments->ProcessedShipment->ID;
$response->Shipments->ProcessedShipment->ShipmentLabel->LabelURL; 
```

# wordpress - 无法在 WordPress 中调整缩略图的大小

> ID：10649275
> 
> 赞同：0
> 
> 时间：2012-05-18T08:32:18.853
> 
> 标签：wordpress, resize, thumbnails

这是我的代码：

```
$imgdata = wp_get_attachment_image_src( get_post_thumbnail_id($id, 'thumbnail' );
$imgurl = $imgdata[0]; 
$imgwidth = $imgdata[1]; 
$imgheight = $imgdata[2];
if( !empty($imgurl) ){
    echo '<img src="'.$imgurl.'" width="10" height="1" alt="" />';  
} 
```

图像尺寸始终为 365x228。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:59:17.753

**Regenerate Thumbnails 插件**是迄今为止管理与缩略图尺寸相关的任何内容的最简单的解决方案。

[重新生成缩略图](http://wordpress.org/extend/plugins/regenerate-thumbnails/)

# android - 如果没有 wifi 或 Internet 3G 连接，如何弹出警报？

> ID：10649277
> 
> 赞同：0
> 
> 时间：2012-05-18T08:32:33.883
> 
> 标签：android, webview, wifi, toast

我正在创建使用的应用程序

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

我正在使用 WebView 来启动 URL。但是当手机没有连接WIFI和互联网3G时，在WebView中出现的正是URL链接。

如果没有互联网连接，我不希望用户可以在 WebView 中看到 URL 链接，我该怎么做？

最好的问候， 维拉克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:35:14.003

检查以下函数的返回（true 表示在线，false 表示不在线）并根据您所追求的修改输出。

```
private boolean haveNetworkConnection() {
        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();
        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase("WIFI"))
                if (ni.isConnected())
                    haveConnectedWifi = true;
            if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
                if (ni.isConnected())
                    haveConnectedMobile = true;
        }
        return haveConnectedWifi || haveConnectedMobile;
    } 
```

如果您想要在没有连接的情况下显示弹出窗口或 toast，那么在您的活动中拥有该功能将允许您执行以下操作，这将显示 Toast。

```
if(!haveNetworkConnection()){
    Toast.makeText(this,"No internet connection",Toast.LENGTH_LONG).show();
}else{
    //Do whatever you need if there IS connectivity
} 
```

我喜欢使用我给你的功能（几个月前不知道我从哪里复制它），因为它允许我在需要时轻松修改它，只有在我有 wifi 或移动互联网时才返回 true，允许我**仅**当 wifi 连接可用时才下载高清视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:56:39.970

检查互联网连接的示例代码；

```
public static boolean checkInternetConnection(Context context) {

        ConnectivityManager conMgr = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

        // ARE WE CONNECTED TO THE NET?
        if (conMgr.getActiveNetworkInfo() != null
                && conMgr.getActiveNetworkInfo().isAvailable()
                && conMgr.getActiveNetworkInfo().isConnected()) {
            return true;
        } else {
            Log.w(TAG, "Internet Connection NOT Present");
            return false;
        }
    } 
```

# facebook - 如何对我发布的帖子启用操作

> ID：10649278
> 
> 赞同：0
> 
> 时间：2012-05-18T08:32:48.500
> 
> 标签：facebook, facebook-graph-api

我通过 facebook api 在我的墙上发了一个帖子，它运行良好，但是没有像帖子底部这样的操作，评论，分享我该如何启用它？

我在 url 上发了一个 http 帖子： [https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)？access_token=xxx&message=xxx&link=xxx&picture=xxx&name=xxx&caption=xxx&description=xxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:37:14.753

在客户端应用程序上使用提要对话框； [https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

在那个链接上，也有通过 Graph API 调用的示例

让我尝试添加进行 HTTP POST 调用时所需的示例参数；

```
Map<String, String>  fbParams = new HashMap<String, String>();

String actions="{\"name\": \""+ "name of your app" +"\""+
", \"link\": \""+ "link to your app, webpage etc" +"\"}";

fbParams.put("message",message);// NOTE: leave empty, let user enter this via dialog
fbParams.put("picture",picture_static);
//fbParams.putString("source", picture_static);// only 'picture' param is enough
fbParams.put("link",link);
fbParams.put("name",name);
fbParams.put("description",description);
fbParams.put("caption","using BlablaApp"); 
fbParams.put("actions",actions); 
```

# c# - 在通用基类中使用静态对象进行缓存锁定

> ID：10649279
> 
> 赞同：0
> 
> 时间：2012-05-18T08:32:49.530
> 
> 标签：c#, generics, caching

我有一个用于值缓存功能的通用基类。

```
public abstract class CachedValueProviderBase<T> : ICachedValueProvider<T> where T : class
{
    private Cache Cache { set; get; }
    protected string CacheKey { get; set; }
    protected int CacheSpanInMinutes { get; set; }

    private static readonly object _cacheLock = new object();

    public T Values
    {
        get
        {
            T value = Cache[CacheKey] as T;
            if (value == null)
            {
                lock (_cacheLock)
                {
                    value = Cache[CacheKey] as T;
                    if (value == null)
                    {
                        value = InitializeCache();
                    }
                }
            }

            return value;
        }
    }

    protected CachedValueProviderBase()
    {
        Cache = HttpRuntime.Cache;
        CacheSpanInMinutes = 15;
    }

    public T CacheValue(T value)
    {
        if (value != null)
        {
            lock (_cacheLock)
            {
                Cache.Insert(CacheKey, value, null, DateTime.UtcNow.AddMinutes(CacheSpanInMinutes),
                             Cache.NoSlidingExpiration);
            }
        }

        return value;
    }

    private T InitializeCache()
    {
        T value = Initialize();
        CacheValue(value);

        return value;
    }

    protected abstract T Initialize();
} 
```

我有几个使用这个基类的类，只要 T 不同就可以了。例如，当两个子类使用相同的 T，字符串时，它们共享相同的缓存锁定对象。在基类中实现逻辑但仍为每个子类提供自己的缓存锁定对象的最佳方法是什么？

**更新** 在以下建议之后，我更新了我的课程：

```
public abstract class CachedValueProviderBase<T> : ICachedValueProvider<T> where T : class
    {
        private Cache Cache { set; get; }
        protected string CacheKey { get; set; }
        protected int CacheSpanInMinutes { get; set; }
        private object _cacheLock = new object();

        public T Values
        {
            get
            {
                T value = Cache[CacheKey] as T;
                if (value == null)
                {
                    lock (_cacheLock)
                    {
                        value = Cache[CacheKey] as T;
                        if (value == null)
                        {
                            value = InitializeCache();
                        }
                    }
                }

                return value;
            }
        }

        protected CachedValueProviderBase()
        {
            Cache = HttpRuntime.Cache;
            CacheSpanInMinutes = 15;
        }

        public T CacheValue(T value)
        {
            if (value != null)
            {
                Cache.Insert(CacheKey, value, null, DateTime.UtcNow.AddMinutes(CacheSpanInMinutes),
                             Cache.NoSlidingExpiration);

            }

            return value;
        }

        private T InitializeCache()
        {
            T value = Initialize();
            CacheValue(value);

            return value;
        }

        protected abstract T Initialize();
    }
} 
```

我的子类现在是单例的，所以我可以摆脱静态缓存锁对象，使其成为实例变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:12:05.283

我必须仔细查看您的代码，以确定它是否正确。一旦我注意到您的缓存是 a `HttpRuntime.Cache`，它就有意义了。`HttpRuntime.Cache`是线程安全的。否则你会有几个线程安全问题。使用您当前的代码，我建议您执行以下操作：

```
private string CacheKey { get; set; }

protected CachedValueProviderBase(string cacheKey)
{
    this.CacheKey = cacheKey + "_" + typeof(T).FullName;
} 
```

通过提供`cacheKey`as 构造函数参数并将属性设为私有（或 readonly 可以），您可以防止它稍后被更改。通过将类型名称附加到键，您可以防止缓存冲突，因为每个人都使用相同的缓存。

最后一点。`lock`方法中的是`CacheValue`多余的，因为`Cache`是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:37:50.027

好吧，只需删除 cacheLock 对象上的 static 修饰符。

该关键字强制该字段在共享相同通用参数类型的子类的所有实例之间共享。

如果删除它，cacheLock 对象将对子类的**每个实例**都是私有的，而不管泛型参数的类型如何。

```
 private static readonly object _cacheLock = new object(); 
```

应该 ：

```
 private readonly object _cacheLock = new object(); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T19:01:44.907

我通过在我的基类 GetCacheLockObject() 中实现一个抽象方法来处理这个问题。

```
protected abstract object GetCacheLockObject(); 
```

然后每个派生类返回它自己对缓存锁对象的引用：

```
private static readonly object _cacheLockObject = new Object();

protected override object GetCacheLockObject()
{
    return _cacheLockObject;
} 
```

调用锁定共享基类缓存代码然后引用此方法而不是基类中的对象。

# matlab - 放置颜色条后如何保持子图大小不变

> ID：10649286
> 
> 赞同：11
> 
> 时间：2012-05-18T08:33:37.067
> 
> 标签：matlab

假设我们有一个 1×2 的子图，我们在里面绘制一些图形，如下所示：

```
subplot(1,2,1)
surf(peaks(20))

subplot(1,2,2)
surf(peaks(20)) 
```

![在此处输入图像描述](../Images/b4e9561f707586754cfcc2bd5441032b.png)

然后我们要放置一个颜色条：

```
colorbar 
```

![在此处输入图像描述](../Images/bcb38b37d77177b7f91925c381ba85b8.png)

我不希望结果中的正确数字被挤压。我们如何才能将颜色条放在一行子图中最右边的图形之外并保持它们的大小不变？

注意：实际上，我需要它来绘制颜色条常见的图像，我想把它放在右边。为了简单起见，我使用了这个玩具示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T10:40:02.787

您可以提取第一个图的位置并在第二个图上使用。重新缩放时，MATLAB 会自动将颜色条向右移动。

```
f1=figure(1);clf;
s1=subplot(1,2,1);
surf(peaks(20));

s2=subplot(1,2,2);
surf(peaks(20));
hb = colorbar('location','eastoutside');

%% # Solution:
s1Pos = get(s1,'position');
s2Pos = get(s2,'position');
s2Pos(3:4) = [s1Pos(3:4)];
set(s2,'position',s2Pos);

%% # Alternative method. Brute force placement
set(s1,'Units','normalized', 'position', [0.1 0.2 0.3 0.6]);
set(s2,'Units','normalized', 'position', [0.5 0.2 0.3 0.6]);
set(hb,'Units','normalized', 'position', [0.9 0.2 0.05 0.6]); 
```

![在此处输入图像描述](../Images/de973866da321619431d5a5bb5590a43.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T14:26:42.910

这正是我一直在寻找的。在实施[Vidar 的自动解决方案](https://stackoverflow.com/a/10651078/1714410)后，我想出了一个简化方案。在添加颜色条之前获取最右侧轴的位置，然后将压缩位置重置为原始位置：

```
f1=figure(1);clf;
s1=subplot(1,2,1);
surf(peaks(20));

s2=subplot(1,2,2);
surf(peaks(20));
s2Pos = get(s2,'position');

hb = colorbar('location','eastoutside');
set(s2,'position',s2Pos); 
```

# c# - 获取/设置错误“非静态字段需要对象引用......”

> ID：10649289
> 
> 赞同：0
> 
> 时间：2012-05-18T08:33:57.783
> 
> 标签：c#

我收到一条错误消息“非静态字段、方法或属性需要对象引用......”以调用 Refresh 函数：

> // 地位
> 
> ```
>  public static string Status 
>     {
>         get 
>           { 
>               return status; 
>           }
>         set 
>         {
>             status = value;
>             Refresh();
>         } 
>     }
> 
>     private void Refresh()
>     {
>         lblStatus.Text = Status.ToString();
>     } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:36:26.437

您只能从静态函数调用静态函数。

它应该像

```
public static string Status 
{
    get 
    { 
       return status; 
    }
    set 
    {
        status = value;
        Refresh();
    } 
}

private static void Refresh()  // Change signature of function
{
    lblStatus.Text = Status.ToString();
} 
```

**或者**

使属性非静态

```
public string Status // Change signature of property 
{
    get 
    { 
       return status; 
    }
    set 
    {
        status = value;
        Refresh();
    } 
}

private void Refresh()
{
    lblStatus.Text = Status.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:41:24.080

只需将**Status**属性设为非静态。显然，您不会在该类的所有实例中共享此属性。看起来您正在使用控件或页面类，并且还尝试调用其他实例方法或属性。

所以这将修复编译错误。

```
public string Status 
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:42:47.767

我认为这是一个糟糕的设计，因为 lblStatus 是一个控件，我猜，所以它不能是静态的，所以 Refresh 不能是静态的。

因此，无论如何，您都不应该在静态上下文中调用 Refresh() ......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:59:18.690

这是一个糟糕的设计。您应该从状态中删除静态。

您要做的是从静态属性设置实例值。

您只能从静态属性/方法修改静态字段/属性。

如果您坚持 Status 必须是 Static，那么您必须创建另一个静态属性/字段并通过该字段进行更新。（这非常糟糕）。

示例：假设在 Form1 类中定义了 Status，那么 Form1 的实例就只有一个

```
 Class Form1
    {
        private static Form1 staticInstance = default(Form1);
        Form1()
            {
            staticInstance  = this;
            }
        public static string Status 
        {
            get 
            { 
            return status; 
            }
            set 
            {
                status = value;
                Refresh();
            } 
        }

        private static void Refresh()  // Change signature of function
        {
            if(staticInstance  != default(Form1)
            staticInstance .lblStatus.Text = Status.ToString();
        }

    } 
```

# javascript - 如何将代码添加到主体之外的函数？

> ID：10649293
> 
> 赞同：2
> 
> 时间：2012-05-18T08:34:15.330
> 
> 标签：javascript

我想将代码添加到函数之外，甚至可能在一个完全不同的 JS 文件中。这可能吗？我怎样才能做到这一点？这是一个代表我迄今为止尝试过的代码片段：

```
function myViewModel() {
    var self = this;

    this.firstName = ko.observable("Mike");
    this.lastName = ko.observable("Rassel");

    // this was where I was originally making the call
    //myViewModel.fullName = ko.computed(function() {
    //    return self.firstName() + ' ' + self.lastName();
    })
}

// this is where the error is happening 
myViewModel.fullName = ko.computed(function() {
    return self.firstName() + ' ' + self.lastName();

ko.applyBindings(new myViewModel()); 
```

更多代码可以在[这个 JFiddle](http://jsfiddle.net/6E7Lq/)查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:36:45.100

这是向 Javascript 中已定义的构造函数添加方法的方法。

我的视图模型。**原型**.newFunctionName = function () {};

[http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)

[http://timkadlec.com/2008/01/using-prototypes-in-javascript/](http://timkadlec.com/2008/01/using-prototypes-in-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:39:55.037

您需要添加这样的函数：myViewModel.prototype.methodName = function(){}

如果您想学习，这将作为 OO JS 的一个很好的介绍：http: [//beardedocto.tumblr.com/post/21920818233/oo-js-in-15mins-or-less](http://beardedocto.tumblr.com/post/21920818233/oo-js-in-15mins-or-less)

# vb.net - vb.net - 继承类的对象聚合

> ID：10649294
> 
> 赞同：0
> 
> 时间：2012-05-18T08:34:17.233
> 
> 标签：vb.net, object-design, object-composition

我正在玩几个对象的组合。

我有两个课程（笔记和任务）。Task 类派生自 Note 类，因为任务是扩展的注释。

每个便笺都有一个属性`Property Child as list (of note)`，因为可以将便笺或任务添加到现有便笺或任务中（因此，此“子”便笺可能是任务或便笺）

IE。

```
dim x as new note()

x.Child.item(0).Child.item(0).Child.item(0).description.ToString() 
```

最后的子笔记对象实际上是一个任务，我怎样才能使这个聚合工作？我不在乎它是笔记还是任务，但我想释放基类或扩展类的功能。

我的直接想法是每个对象都需要有一个任务列表和一个笔记列表，但感觉可能有一个更优雅的解决方案。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:43:40.337

如果我对您的理解正确，您应该使用我们 C# 人员所谓的虚拟方法/属性来实现您的类的行为......本质上他们使用后期绑定调用，以便从正确的类调用适当的功能 - 是父类或派生类。

我认为VB.Net equivilent 是“Overrideable”和“Overrides”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:53:34.060

您收集的 Note 对象应该已经为您提供了您想要的东西。

如果您需要区分 Note 和 Task，您可以询问实例是否是“typeof”任务，然后适当地进行转换以获取派生属性和方法。

如果您需要的方法和属性是基类的一部分，则不需要强制转换，您可以依靠多态性来调用适合类型的方法/属性。

# android - Android 版 Instagram 如何使用 offline_access？

> ID：10649297
> 
> 赞同：0
> 
> 时间：2012-05-18T08:34:25.817
> 
> 标签：android, facebook, instagram

最近 Facebook 已弃用“offline_access”。但是，我发现适用于 Android 的 Instagram 应用程序仍然使用它。这怎么可能？我正在开发一个应用程序，该应用程序将从移动设备验证用户并稍后使用该权限从服务器发布到用户的墙（根据用户的操作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:11:23.327

您仍然可以通过身份验证过程的“offline_access”部分并且不会遇到任何特定错误，无论如何 Facebook 都会返回一个短暂的令牌。
另一方面，您可以将短期令牌延长至 60 天，

[请参阅https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)下的场景4

例子; [https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN)

# iphone - 如何保存自定义单元格内容

> ID：10649301
> 
> 赞同：0
> 
> 时间：2012-05-18T08:35:03.660
> 
> 标签：iphone, ios, uitableview

我已经尝试使用[此](http://kshitizghimire.com.np/insert-customuitableviewcell-in-uitablevew-on-row-selected/)url 在自定义单元格中插入 uitextfield，但我不确定何时保存修改后的内容。

请让我知道并谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:49:57.963

一种方法是让您的 UITableViewController 实现 UITextFieldDelegate 协议，然后将其分配为嵌入在您的 CustomCell UITableViewCellSubclass 中的 UITextField 的委托。

您首先需要在表视图控制器子类中实现 UITextFieldDelegate 协议...

```
MyTableViewController : UITableViewController <UITextFieldDelegate> 
```

然后在您的子类中为 textFieldShouldReturn:(UITextField*)textField 方法添加一个实现。当用户完成编辑单元格的 UITextField 的内容时，将调用此方法...

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    NSString *enteredText = [textField text];
    // .. do something with the text
} 
```

最后，您需要将 CustomCell 的 UITextField 的委托属性设置为您的 UITableViewController 子类。为此，只需向现有的 tableView:cellForRowAtIndexPath: 方法添加一个方法调用...

```
cell.textField.delegate = self; 
```

# asp.net - JMeter 用于测试 ASP .NET 网页有多好？

> ID：10649303
> 
> 赞同：9
> 
> 时间：2012-05-18T08:35:06.473
> 
> 标签：asp.net, testing, jmeter

有人告诉我[JMeter](http://jmeter.apache.org/)在 ASP.NET 页面上存在一些问题，这是真的吗？

我是 JMeter 的初学者，不想遇到一些我无法解决的问题。我读过有人成功使用它，问题是，它需要多少手动更改和 JMeter 知识？

还有一个基本问题：根据您的经验，最新版本的 JMeter 在测试 ASP 网页方面有多好？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T09:37:21.967

有一种专门用于使用 Jmeter 测试 ASP.NET 应用程序的方法，但它可以通过 Jmeter 开箱即用的可能性完全处理。

这里已经[问过](https://stackoverflow.com/questions/1855496/benchmarking-a-asp-net-website-can-i-use-jmeter)同样的问题。
还可以查看 Jmeter wiki[中有关使用 jmeter 测试 ASP.NET 的特定部分](http://wiki.apache.org/jmeter/JMeterTesting/ASPNETViewState)。

也有很多关于这个的文章：

*   [使用 JMeter 对 ASP.NET 站点进行负载测试](http://blog.technicallyworks.com/2009/06/load-testing-aspnet-sites-with-jmeter.html)
*   [使用 Jmeter 对 ASP.NET Web 应用程序进行负载测试](http://www.qadit.com/blog/?p=1684)
*   [使用 Jmeter 对 ASP.NET 进行压力测试](http://www.velocityreviews.com/forums/t85332-web-stress-aspnet-with-jmeter.html)
*   [JMeter：向 ASP.NET 网站发送 HTTP POST 请求](http://ajitdhungana.blogspot.com/2012/03/jmeter-sending-http-post-request-to.html)
*   [将 JMeter 与 ASP.NET WebForms 身份验证一起使用](http://www.markschabacker.com/blog/2013/05/10/jmeter_with_webforms_authentication/)

相当有用的文章，虽然非 jmeter 但与 MS VS 相关：[Web 测试创作和调试技术](http://msdn.microsoft.com/en-us/library/ms364082(d=printer,v=vs.80).aspx)。

请不要懒惰地在互联网上寻找可用信息，如果您在进一步测试期间遇到任何问题，请在此处提出更具体的问题。

# security - 安全的 OpenID 用户身份验证

> ID：10649304
> 
> 赞同：0
> 
> 时间：2012-05-18T08:35:12.423
> 
> 标签：security, authentication, openid

我的目标是在 stackoverflow 等系统中安全登录。我是新手，但正如您可能已经看到的那样，我整天都在查找有关安全性的 stackoverflow 文章。作为这项研究的结果，我现在制定了一个攻击计划。特别是这个页面对[使用 OpenID 进行网站身份验证很有帮助](https://stackoverflow.com/questions/1171828/using-openid-for-website-authentication)。您能否告诉我以下系统是否是安全系统，如果不是，我应该如何改进系统。

1.  使用 OpenID 验证用户。

2.  一旦用户通过 OpenID 验证，就从 OpenID 获取用户的电子邮件地址。

3.  散列电子邮件地址并存储在会话变量中。

4.  将散列的电子邮件地址与数据库中的散列电子邮件地址列表进行比较

5.  根据散列的电子邮件地址返回适合该用户的内容。

特别是我对使用电子邮件地址而不是 ProviderOpenID 感到紧张。

请假设我有（因为我在其他 stackoverflow 页面上找到了这些问题的答案）：

1.  使用后正确销毁会话。

2.  设置我的服务器以将会话数据存储在无法访问的位置。

3.  以安全的方式设置我的数据库。

4.  我正在使用 SSL 来确保无法拦截流量。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:25:42.020

一般来说，您最好为您正在使用的支持 OpenID 的语言使用一些身份验证架构。它不仅更安全，而且更容易，您编写的代码更少，而且您不必维护或测试该代码。有用于 PHP、python、c#/asp.net、rails 的。很多框架也有支持。

首先，为什么不使用提供的 ID ？

我认为你有两个问题：

1.  openID 提供商可能会返回与提供商不同的域的电子邮件地址。

    例如，gmail 可以正确地对我进行身份验证，但我可以指定我的电子邮件地址是 billg@microsoft.com。然后你会认为我的身份是比尔盖茨，尽管事实并非如此。当然有办法防止这种情况发生，但标准系统可能包含保护措施，即使没有，修复它们也是其他人的责任，其他人会关注这些问题。

2.  如果我正确阅读了维基百科[文章](http://en.wikipedia.org/wiki/OpenID)，openID id 不一定是电子邮件地址

    这不是安全问题，但确实会破坏预期行为。

# javascript - 确定单击元素时调用的 Javascript 函数

> ID：10649305
> 
> 赞同：8
> 
> 时间：2012-05-18T08:35:13.643
> 
> 标签：javascript, events, dom

有没有办法确定当您单击 HTML 页面中将 JS 绑定到 click 事件（使用 jQuery，而不是`onClick`tag 属性添加）的项目时调用的 Javascript 函数？

显然，网站不是我的，代码被缩小了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T08:41:09.980

这在开发者工具中的所有主要浏览器中都可用（通常按 F12 打开）。

例如，在 Chrome 中，右键单击元素，检查元素。

然后展开右侧的“事件侦听器”选项卡，找到“单击”并展开它。它应该为您提供有关单击事件的所有潜在侦听器的列表，包括从冒泡中捕获的侦听器以及指向该函数及其在文件中的位置的链接。

诚然，它可能需要一些狩猎。如果代码被缩小，大多数开发人员工具可以为您扩展它（例如，Chrome 等 webkit 浏览器中的“漂亮打印”选项或 IE 中的“格式化 javascript”工具）或使用外部工具，例如[http://jsbeautifier.org/](http://jsbeautifier.org/) .

![在此处输入图像描述](../Images/6a12345905b35c9dcb5d41633035e50d.png)

# android - 从异步任务 onRetainNonConfigurationInstance() 获取 ListView 内的 LinearLayout

> ID：10649309
> 
> 赞同：0
> 
> 时间：2012-05-18T08:35:19.283
> 
> 标签：android, android-listview

我希望标题没有误导。我正在尝试实现`onRetainNonConfigurationInstance()`加载`AsyncTask`图像并收到此错误`"Java.lang.RuntimeException:Unable to retain Activity"`。这是我的代码`onRetainNonConfigurationInstance()`：

```
public Object onRetainNonConfigurationInstance(){
  //final ListView listview = list;

  final int count = list.getChildCount();
    final LoadedImage[] mylist = new LoadedImage[count];

    for(int i = 0; i < count; i++){
        final ImageView v = (ImageView)list.getChildAt(i); // getting error here
        mylist[i] = new LoadedImage(((BitmapDrawable) v.getDrawable()).getBitmap());
    }
    return mylist;
} 
```

这是`Logcat`：

```
05-18 08:43:15.385: E/AndroidRuntime(28130): java.lang.RuntimeException: Unable to retain activity {com.MyApps.ImageGen/com.MyApps.ImageGen.Wallpapers}: java.lang.ClassCastException: android.widget.LinearLayout
05-18 08:43:15.385: E/AndroidRuntime(28130):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2989)
05-18 08:43:15.385: E/AndroidRuntime(28130):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3100)
05-18 08:43:15.385: E/AndroidRuntime(28130):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3216)
05-18 08:43:15.385: E/AndroidRuntime(28130):    at android.app.ActivityThread.access$1600(ActivityThread.java:132) 
```

这是我的布局`ListView`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000"
    android:listSelector="@android:color/transparent" >
</ListView>     
</LinearLayout> 
```

这是我设置的方法`ListView`：

```
private void setupViews() { 
        list = (ListView)findViewById(android.R.id.list);
        list.setDivider(null);
        list.setDividerHeight(0);
        imageAdapter = new ImageAdapter(getApplicationContext());
        list.setAdapter(imageAdapter);
        list.setOnItemClickListener(this);
} 
```

我的异步任务和项目适配器：

```
class LoadImagesFromSDCard extends AsyncTask<Object, LoadedImage, Object> {

    @Override
    protected Object doInBackground(Object... params) {

        Bitmap bitmap = null;
        Bitmap newbitmap = null;
        Uri uri = null;

        String [] img = {MediaStore.Images.Media._ID};

        String state = Environment.getExternalStorageState();

        if(Environment.MEDIA_MOUNTED.equals(state)){    

        cursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, img, null, null, null);

        } else {
        // cursor = getContentResolver().query(MediaStore.Images.Media.INTERNAL_CONTENT_URI, img, null, null, null);

         inInternalStorage = true;
        }

        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);
        int size = cursor.getCount();

        if(size == 0){
            //Toast.makeText(getApplicationContext(), "There are no Images on the sdcard", Toast.LENGTH_SHORT).show();
            //System.out.println("size equals zero");

            Wallpaper.this.runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(getApplicationContext(), "There are no Images on the sdcard", Toast.LENGTH_SHORT).show();
                }
            });

            return params;
        }else {

        }

        for(int i = 0; i < size; i++){
            cursor.moveToPosition(i);
            int ImageId = cursor.getInt(column_index);

            if(inInternalStorage == true){
             uri = Uri.withAppendedPath(MediaStore.Images.Media.INTERNAL_CONTENT_URI, "" + ImageId);
         }else {
             uri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + ImageId);
         }

         try {
             BitmapFactory.Options options = new BitmapFactory.Options();
             options.inJustDecodeBounds = true;

             BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), null, options);

             int imageHeight = options.outHeight;
             int imageWidth = options.outWidth;
             String imageType = options.outMimeType;

             Log.i(TAG, "imageheight = " + imageHeight);
             Log.i(TAG, "imagewidth = " + imageWidth);
             Log.i(TAG, "imageType = " + imageType);

             //options.inSampleSize=4;

             options.inSampleSize = calculateInSampleSize(options, imageWidth, imageHeight);

            options.inJustDecodeBounds = false;
             //bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
             bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), null, options);

             if(bitmap != null){
                 newbitmap = Bitmap.createScaledBitmap(bitmap, 180, 180, true);
                 bitmap.recycle();
             }
             if(newbitmap != null){
                 publishProgress(new LoadedImage(newbitmap));

             }
         }catch(IOException e){

         }
         //cursor.close();
        }
        cursor.close();
        return null;    
    }

    @Override
    public void onProgressUpdate(LoadedImage... value){
        addImage(value);
    }

       @Override
        protected void onPostExecute(Object result) {
            setProgressBarIndeterminateVisibility(false);
        }
}

private static class LoadedImage {
    Bitmap mBitmap;

    LoadedImage(Bitmap bitmap) {
        mBitmap = bitmap;
    }

    public Bitmap getBitmap() {
        return mBitmap;
    }
}

/*Image Adapter to populate grid view of images*/

public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private ArrayList<LoadedImage> photos = new ArrayList<LoadedImage>();

    public ImageAdapter(Context context){
        this.mContext = context;
    }

    public void addPhotos(LoadedImage photo){
        photos.add(photo);
    }

    @Override
    public int getCount() {
        return photos.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView image;
        ViewHolder holder;

        if(convertView == null){
            LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            //convertView = inflater.inflate(R.layout.image_list,null);
            convertView = inflater.inflate(R.layout.media_view, null);
            holder = new ViewHolder();

            holder.image = (ImageView)convertView.findViewById(R.id.media_image_id);

            //holder.item_name = (TextView)convertView.findViewById(R.id.media_image_id);

            convertView.setTag(holder); 
        } else{
            holder = (ViewHolder)convertView.getTag();
        }   
        //holder.image.setLayoutParams(new GridView.LayoutParams(100, 100));

         //String item_name = cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DISPLAY_NAME));

            holder.image.setImageBitmap(photos.get(position).getBitmap());    

            //holder.item_name.setText(item_name);

        return convertView;
    }
}

static class ViewHolder {
   ImageView image;
   TextView item_name;
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Cursor cursor = null;
    int image_column_index = 0;
    String[] proj = {MediaStore.Images.Media.DATA};

    String state = Environment.getExternalStorageState();

  if(Environment.MEDIA_MOUNTED.equals(state)){

    cursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,proj,null, null,null);
  }else{
      cursor = managedQuery(MediaStore.Images.Media.INTERNAL_CONTENT_URI,proj,null, null,null);

  }
    cursor.moveToPosition(position);
    image_column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

    String info = cursor.getString(image_column_index);
    Intent imageviewer  = new Intent(getApplicationContext(), ViewImage.class);
           imageviewer.putExtra("pic_name", info);
           startActivity(imageviewer);

     cursor.close();
}

public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 2;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
}

/*final int REQUIRED_SIZE = 180;

int scale = 1;
if(reqWidth > REQUIRED_SIZE || reqHeight > REQUIRED_SIZE){
    scale = (int)Math.pow(2, (int)Math.round(Math.log(REQUIRED_SIZE/(double)Math.max(reqHeight, reqWidth)) / Math.log(0.5)));
}*/

return inSampleSize;

} 
```

异步任务中的其他方法：

```
private void loadImages() {
 final Object data = getLastNonConfigurationInstance();
 if(data == null){
     new LoadImagesFromSDCard().execute();
 }else {
     final LoadedImage[] photos = (LoadedImage[])data;
     if(photos.length == 0){

        new LoadImagesFromSDCard().execute();
     }
     for(LoadedImage photo:photos){
         addImage(photo);
    }
 }

}

private void addImage(LoadedImage... value) {

    for(LoadedImage photo: value){
        imageAdapter.addPhotos(photo);  
        imageAdapter.notifyDataSetChanged();
    }

} 
```

我假设我应该先获取根元素，然后再`ListView`从`logcat`错误中获取，但我不知道如何，我似乎无法从文档中找到合适的方法。

PS：我使用的是一个`Activity`而不是一个`ListActivity`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:11:31.067

异常告诉您您尝试进行无效转换。我的猜测是，您的行布局并不`ImageView`像您假设的那样简单，而是您的行布局可能有一个包装（和其他视图？！）`onRetainNonConfigurationInstance()`的父级。当您调用该方法时，您会获得尝试将其转换为. 相反，您应该这样做：`Linearlayout``ImageView``getChildAt``Linearlayout``ImageView`

```
//...
for(int i = 0; i < count; i++){
        LinearLayout parent = (LinearLayout)list.getChildAt(i);
        final ImageView v = (ImageView) parent.findViewById(R.id.the_id_of_the_imageview_from_theRow_layout);
        mylist[i] = new LoadedImage(((BitmapDrawable) v.getDrawable()).getBitmap());
} 
```

注意：该`getChildAt`方法仅返回可见行的行视图，因此如果您尝试访问`View`当前不可见的行`NullPointerException`的从解析所有行`Views`）。

**根据评论编辑**：

如果我理解你的问题，你看到的行为是正常的。你没有说你最终是如何获得位图的，`onRetainNonConfigurationInstance`但我的猜测是你只是保存了`ListView`用户当前可见的行中的图像。当需要使用您提供的图像来恢复适配器时，`getLastNonConfigurationInstance()`最终只会获得以前可见的图像。如果再次旋转手机，情况会变得更糟，因为很可能横向显示的图像比纵向显示的要少。

我不知道这是否可行，但您可以尝试修改`LoadedImage`类以存储`id`来自`MediaStore.Images.Media`. 当需要保存配置时，停止`LoadImagesFromSDCard`任务并 从（在适配器中）*取消*所有图像（删除`Bitmap`到哪些`LoadedImage`点），`LoadedImages` `ArrayList`除了当前对用户可见的图像。通过 . 从您的适配器 发送*照片* 。`ArrayList``onRetainNonConfigurationInstance`

当需要恢复适配器时，将新适配器的*照片* `ArrayList`设置为您返回的照片，并将其放在`ListView`可见图像的位置（以便用户看到发送的图像）。在`getView`您的适配器的方法中，当您在关联类中有一个值时，您将放置一个默认图像（如*loading... ）。*开始一个新任务来获取图像并再次解析它们。当您从那里获得时，您将检查适配器中是否存在带有 this的 a 以及它是否有一个集合。如果它不存在（或它没有关联），则加载图像并将其放入适配器中，如果不存在，则图像已存在并移至下一个。`null``Bitmap``LoadedImage``LoadImagesFromSDCard``id``MediaStore.Images.Media``LoadedImage``id``Bitmap``Bitmap`

我不知道上面的解决方案是否有效或是否有效。我建议您修改代码并按需加载图像，而不是在一项大任务中全部加载。

# javascript - 获取动态创建的元素的id

> ID：10649313
> 
> 赞同：2
> 
> 时间：2012-05-18T08:35:45.147
> 
> 标签：javascript, jquery, ajax

我想通过id选择使用ajax动态创建的元素，代码是：

```
$(function(){
   $('#loadFeed').bind('click',function(){ 
        $.getJSON('getData.php', function(json) {
            var output="<ul id='feedsList'>";

            for(var i=json.posts.length-1;i>=json.posts.length-31;i--){
                output+="<li class='post'>";
                output+="<div class='text' id='"+json.posts[i].id+"'>"+json.posts[i].shortmsg+"</div>";         
                output+="</li>";
            }
            output+="</ul>"
            $(output).appendTo('.posts');
    });
  });
}); 
```

html代码：

```
<div class="posts">
    <!--dynamic content here-->
</div> 
```

我尝试使用 $(this).attr("id") 获取 id：

```
$(".post").on("click",".text",function(){
      var this_id =$(this).attr("id");
      alert(this_id);
}); 
```

但它说未定义。我怎样才能正确获得 id？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:43:57.553

`$(".post")`应该是`$('div.post')`，因为您是`li`从具有相同类的 ajax 请求创建的。正如`div.post`你的 DOM 中存在的那样，你正在将你的列表附加到它上面。

那是，

```
$("div.post").on("click","li.post div.text",function(){
      var this_id = this.id;
      alert(this_id);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:51:33.993

数字不是有效的 ID。ID 需要以字母开头。

您将需要使用这样的东西：

```
output+="<div class='text' id='post_"+json.posts[i].id+"'>"+json.posts[i].shortmsg+"</div>"; 
```

以下是有效 id 的结构：[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

# c# - vbObjectError 如何在c#代码中使用这个

> ID：10649318
> 
> 赞同：1
> 
> 时间：2012-05-18T08:35:57.557
> 
> 标签：c#, vb.net, vb.net-to-c#

让我知道如何在 c# 代码中使用这个**“vbObjectError”** ：//这是我的 VB 代码

```
Public Enum CryptoErrors
    ErrorAquiringContext = vbObjectError + 1056
    ErrorCreatingHash = vbObjectError + 1057
    ErrorCreatingHashData = vbObjectError + 1058
    ErrorDerivingKey = vbObjectError + 1059
    ErrorEncryptingData = vbObjectError + 1060
    ErrorDecryptingData = vbObjectError + 1061
    ErrorInvalidHexString = vbObjectError + 1062
    ErrorMissingParameter = vbObjectError + 1063
    ErrorBadEncryptionType = vbObjectError + 1064
End Enum 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:29:53.397

You could translate it literally as:

```
public enum CryptoErrors
{   
     ErrorAcquiringContext = Microsoft.VisualBasic.Constants.vbObjectError + 1056,
     ...
} 
```

in which case you need a reference to Microsoft.VisualBasic.dll.

If you don't want to take a dependency on Microsoft.VisualBasic.dll, you could define your own C# constant instead:

```
public const int VBObjectError = -2147221504; 
```

But I'd question why you'd need it in a C# application. Constants offset from `vbObjectError` normally correspond to an HRESULT and are used in a VB `Err.Raise` statement.

In C# you'd just throw an exception.

# php - 在同一页面上 $_POST 后刷新数据

> ID：10649323
> 
> 赞同：1
> 
> 时间：2012-05-18T08:36:07.550
> 
> 标签：php, mysql, redirect, post, insert

我有一个页面，其中有谁在同一页面上发帖。我希望在成功的数据库 INSERT 之后用新数据刷新该页面。

让我添加一些代码。

**默认的.php**

```
<?php
session_start();
require("dbconfig.php");
include("head.php");

//if user is not signed in, redirect to login page
if (!isset($_SESSION['sess_user']) ) {
   header ("Location: login.php");
   exit;
 }

?>

<body>

<div id="menu">
  <?php
     include("menu.php"); //include the menu
  ?>

</div>
<div id="page_content">
   <?php 
    include ($p); //Include selection from menu.php
   ?>
</div>
?> 
```

**数据库配置文件**

```
<?php 
DEFINE ('DB_USER', 'someuser');  
DEFINE ('DB_PASSWORD', 'somepassword');  
DEFINE ('DB_HOST', 'localhost');  
DEFINE ('DB_NAME', 'somedatabase'); 

$connection = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD) or 
die('Connection to the specified database couldn\'t be established');  
mysql_select_db(DB_NAME)  or 
die ('Specified database couldn\'t be selected');

function db_escape ($post)
{
if (is_string($post) ) {
    if (get_magic_quotes_gpc() ) {
        $post = stripslashes($post);
    }
    return mysql_real_escape_string ($post);
}
foreach ($post as $key => $val) {
    $post [$key] = db_escape($val);
}
return $post;
}
?> 
```

**页面/cities.php**

```
<?php 
//if not signed in correctly, redirect to login page
session_start();
if (!isset($_SESSION['sess_user']) ) {
    header ("Location: login.php");
    exit;
}
?>
<h2>Available cities</h2>
<?php
//List all available cities from database
$cities_query = "SELECT city_name FROM city_selection";
$cities_result = mysql_query($cities_query);

    while ($row = mysql_fetch_assoc($cities_result)) {
        echo $row['city_name'] . "<br />";
        }
?>
<?php
//Add new city to list
if(isset($_POST['submit'])){

    $city_name = $_POST['city_name'];
    $query="INSERT into city_selection (city_name) values ('$city_name')";
    $result = mysql_query($query);
}
 ?>
<hr>
<h2>Add new city</h2>
<form method="post" action="default.php?p=settings_cities">
Namn: <input type="text" name="city_name">
<input type="submit" name="submit" value="Add city">
</form> 
```

这段代码可能不漂亮，但它可以工作。它成功地向数据库添加了一条新记录，但是我希望在发布后用我的 ny 记录刷新 page/cities.php。这可能吗？

让我补充一下，这是我的第一个 php 页面。我只读过一些书，所以不要因为我是一个糟糕的程序员而抨击我:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T08:38:57.047

是的，只需将您的插入部件移动到您选择的部件上方。

**页面/cities.php**

```
<?php 
//if not signed in correctly, redirect to login page
session_start();
if (!isset($_SESSION['sess_user']) ) {
    header ("Location: login.php");
    exit;
}
//Add new city to list
if(isset($_POST['submit'])){

    $city_name = $_POST['city_name'];
    $query="INSERT into city_selection (city_name) values ('$city_name')";
    $result = mysql_query($query);
}
?>
<h2>Available cities</h2>
<?php
//List all available cities from database
$cities_query = "SELECT city_name FROM city_selection";
$cities_result = mysql_query($cities_query);

    while ($row = mysql_fetch_assoc($cities_result)) {
        echo $row['city_name'] . "<br />";
        }
?>

<hr>
<h2>Add new city</h2>
<form method="post" action="default.php?p=settings_cities">
Namn: <input type="text" name="city_name">
<input type="submit" name="submit" value="Add city">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:52:25.447

阅读[Post-Redirect-Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式，并在保存记录后将浏览器重定向到同一页面。重定向应该通过 PHP 的[`header`](http://us.php.net/manual/en/function.header.php)函数来完成。

由于您的代码现在可以工作，通过 F5 刷新的人将再次插入相同的值... PRG 避免了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:44:32.857

您还可以使用 javascript 刷新页面：

```
<script type="text/javascript">
    document.location = "URL"
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:40:41.913

只做

```
if(isset($_POST['submit'])){
  //yada yada 
```

在你做选择之前

# sql-server - Sql Server如何为存储过程中的逻辑流编译执行计划？

> ID：10649327
> 
> 赞同：6
> 
> 时间：2012-05-18T08:36:27.033
> 
> 标签：sql-server

我需要两次使用相同的查询，但 where 子句略有不同。我想知道用一个位值简单地调用相同的存储过程是否有效，并有一个 IF...ELSE... 语句来决定要比较哪些字段。

或者我应该创建两个存储过程并根据我的应用程序中的逻辑调用每个过程？

我想更详细地了解这一点，但要正确理解。如何为此编制执行计划？每个 IF...ELSE... 中的每个代码块都有一个吗？

还是编译成一个大的执行计划？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:25:04.190

您担心被缓存的执行计划是正确的。

Martin 给出了一个很好的例子，表明该计划是缓存的，并且会在第一次执行时针对您的逻辑的某个分支进行优化。在第一次执行之后，即使您使用不同的参数调用存储过程 (sproc)，也会重用该计划，从而导致您的执行流程选择另一个分支。这非常糟糕，会影响性能。我已经多次看到这种情况发生，并且需要一段时间才能找到根本原因。

这背后的原因被称为**“参数嗅探”**，非常值得研究。

一个常见的建议解决方案（我不建议这样做）是将您的 sproc 分成几个小块。如果您在 sproc 内部调用 sproc，则内部 sproc 将获得针对传递给它的参数优化的执行计划。

如果没有充分的理由（一个很好的理由是模块化），将一个存储过程拆分为几个较小的存储过程是一个丑陋的解决方法。Martin 表明，可以通过对模式进行更改来重新编译语句。我会在语句末尾使用 OPTION (RECOMPILE)。这指示优化器在考虑*所有*变量的当前值的情况下进行语句重新编译：不仅考虑参数，还考虑局部变量，这可以区分好计划和坏计划。

回到您的问题，即根据参数构造具有不同 where 子句的查询。我会使用以下模式：

```
WHERE
(@parameter1 is null or col1 = @parameter1  ) 
AND
(@parameter2 is null or col2 = @parameter2  ) 
...
OPTION (RECOMPILE) 
```

不利的一面是，该语句的执行计划永远不会被缓存（尽管它不会影响到语句的缓存），如果 sproc 被执行多次，这可能会产生影响，因为现在应该占用编译时间考虑到。使用生产质量数据执行测试将为您提供问题是否存在问题的答案。

好处是您可以编写可读且优雅的存储过程，而不会将优化器设置在错误的位置。

要记住的另一个选项是，您可以在 sproc 级别（相对于语句级别）禁用执行计划缓存，这种缓存粒度较小，更重要的是，在优化时不会考虑局部变量的值。

更多信息请访问 [http://www.sommarskog.se/dyn-search-2005.html](http://www.sommarskog.se/dyn-search-2005.html) http://sqlinthewild.co.za/index.php/2009/03/19/catch-all-queries/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:08:05.823

它使用传递给过程的参数的初始值编译一次。尽管某些语句可能会受到延迟编译，在这种情况下，它们将使用最终编译时的任何参数值进行编译。

您可以通过运行下面的代码并查看实际的执行计划来看到这一点。

```
CREATE TABLE T
  (
     C INT
  )

INSERT INTO T
SELECT 1 AS C
UNION ALL
SELECT TOP (1000) 2
FROM   master..spt_values
UNION ALL
SELECT TOP (1000) 3
FROM   master..spt_values

GO

CREATE PROC P @C INT
AS
    IF @C = 1
      BEGIN
          SELECT '1'
          FROM   T
          WHERE  C = @C
      END
    ELSE IF @C = 2
      BEGIN
          SELECT '2'
          FROM   T
          WHERE  C = @C
      END
    ELSE IF @C = 3
      BEGIN
          CREATE TABLE #T
            (
               X INT
            )

          INSERT INTO #T
          VALUES     (1)

          SELECT '3'
          FROM   T,
                 #T
          WHERE  C = @C
      END

GO

EXEC P 1

EXEC P 2

EXEC P 3

DROP PROC P

DROP TABLE T 
```

运行该`2`案例显示来自`T`as `1`not的估计行数，`1000`因为该语句是根据传入的初始参数值编译的`1`。运行该`3`案例给出了准确的估计计数，`1000`因为对（尚未创建的）临时表的引用意味着该语句受到延迟编译的影响。

# java - JQGrid - 使用 IE9 加载数据的 JQuery

> ID：10649328
> 
> 赞同：2
> 
> 时间：2012-05-18T08:36:34.473
> 
> 标签：java, javascript, jquery, ajax, jqgrid

我做了一个`JQgrid`要求`Ajax`在加载页面时获取数据的方法。但在 IE9 中，问题在于它没有在加载表单时加载数据，而是在我重新加载页面时完成相同的过程，并且我能够在网格中看到数据。IE9 或 Grid 有什么问题吗？它在所有其他浏览器中都显示。

它显示没有数据的空白网格。

我的网格定义如下。

```
jQuery(document).ready(function(){
               jQuery("#internetusagerecords").jqGrid({
                height:250,
                datatype: 'local',
                colNames:['IP Address','Start Time',
                            <% if (isHttpMacFlowOn){%>
                                'MAC Address',
                            <% } %>
                             'Stop Time','Used Time','Effective Session Time','Downloaded Data','Uploaded Data','Total Transfer'],
                colModel :[ 
                    {name:'ip', index:'ip', sorttype:'text'},
                    {name:'starttime', index:'starttime', sorttype:'int',align:"right"},
                    <% if (isHttpMacFlowOn){ %>
                    {name:'macaddress', index:'macaddress',  sorttype:'text', align:"left"},
                    <% } %>
                    {name:'stoptime', index:'stoptime', sorttype:'int',align:"right"},
                    {name:'usedtime', index:'usedtime',  sorttype:'text', align:"right"},       
                    {name:'effectivesession', index:'effectivesession',sorttype:'date', align:"right"},     
                    {name:'download', index:'download', sorttype:'int',align:"right"},
                    {name:'upload', index:'upload',sorttype:'int',align:"right"},
                    {name:'totaltransfer', index:'totaltransfer',sorttype:'int',align:"right"}],
                pager:jQuery('#internetusagepager'),
                rowNum:10,
                sortname: 'ip',
                autowidth:true,
                sortorder: "asc",
                rowList:[10,20,50,100,200],
                viewrecords: true,
                loadonce:false,
                grouping:true,
                footerrow: true,
                userDataOnFooter: true,
                gridComplete: function call1(){},
                /*
                loadComplete: function(data) {
                    var costsum = jQuery("#records").jqGrid('getCol', 'estimatedcost', true, 'sum');
                    var calldurationsum = jQuery("#records").jqGrid('getCol', 'seconds', true, 'sum');
                    var unitssum = jQuery("#records").jqGrid('getCol', 'units', true, 'sum');
                    jQuery("#records").jqGrid('footerData','set', {starttime: 'Total:', estimatedcost: costsum,seconds: calldurationsum,units: unitssum});
                },
                */
                caption:'Internet Usage Details'
              });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:45:44.570

实际上旧`JQuery`包装存在问题。现在在`JQGrid`图书馆解决了。

`JQuery`关于IE9我也遇到了同样的问题`JQgird`，现在已经解决了。

我下载了新包并检查了那个东西，然后它解决了我的 IE9 问题。

# java - 了解服务器端的 websockets

> ID：10649336
> 
> 赞同：7
> 
> 时间：2012-05-18T08:37:18.980
> 
> 标签：java, websocket

我在理解 websocket 通信方面有一些问题。AFAIU，在客户端，它是这样工作的：

1.  从客户端，使用“new WebSocket('ws://blahblah')”创建一个新的 Socket 处理程序
2.  然后使用 onOpen() 方法知道我们已连接到 WS 服务器
3.  使用 onMessage() 方法，它知道已经从 WS 服务器接收到一条消息
4.  OnClose() 方法指示套接字连接已关闭

因此，从客户的角度来看，它很清楚。但是从服务器的角度来看，流程是如何进行的（如上面的客户端）以及 websocket 服务器进程的确切含义以及我们的意思是什么时候通信发生在 TCP 上以及我们如何检查它（如果问题是我的道歉非常基础）

有人可以解释一下。预先感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T14:52:58.100

在服务器端，它实际上取决于 websockets 库的实现、语言和 API，或者您自己使用的实现。

此描述仅适用于 WebSockets 的 RAW 实现，并不基于使用任何库来处理 WebSockets 协议。库，例如 jWebSockets (Java)、SignalR、socket.io 和其他库，绝对会有另一个进程来使用 WebSockets。

如果我们谈论的是原始套接字上的原始实现，那么过程是这样的：

1.  创建服务器端 TCP 套接字，绑定到特定端口并监听它，然后进入接受状态。接受可以是阻塞的或非阻塞的。我使用.Net，并进行了异步接受，这样每次连接到服务器时都会触发方法。1b。通过JS调用客户端：new WebSocket(...);
2.  接受新套接字后，它必须开始接收数据。TCP 协议是基于流的，而不是基于消息的。
3.  WebSockets 协议要求在进行通信之前完成 WebSockets 的 HTTP 握手。因此，在接受新套接字后，您立即开始接收数据，首先您将收到握手数据 - 一些文本行。
4.  继续握手过程。这意味着读取握手数据，并在服务器端生成响应握手数据并将其发送到WebSocket。4b。如果握手数据将被客户端（浏览器）验证和验证，你会得到回调“onopen”，否则你可能会得到“onerror”和“onclose”。
5.  握手完成后，您可以接收和发送消息。消息是基于 WebSockets 协议的数据帧（非原始）。WebSockets 是基于 MESSAGE 的协议。因此，您必须确保在对数据进行逻辑处理之前读取特定数量的消息数据。
6.  为了在服务器端接收数据，如果您使用自己的实现，则必须实现从 TCP 套接字流读取。为此，您将始终只想读取 2 个字节，如果有的话（2 个字节） - 这是标头数据，根据协议数据帧规范对其进行解码，并继续读取其余数据以找出是否有masking 然后读取掩码字节和长度。这一切都在标题中。但标题的长度可能略有不同。这就是为什么您必须先只读取 2 个字节，然后再读取一些字节的原因。获得长度后，您必须从 TCP 套接字流中准确读取此字节长度。在所有读取之后，实际数据被取消屏蔽（如果启用了屏蔽，根据我的经验，它总是启用的），之后，您可以让套接字从头开始读取一些其他数据。
7.  在读取并取消屏蔽消息后，您将获得原始数据，在大多数情况下，它只是您使用“socket.send("...");”从客户端发送的字符串。
8.  要发送数据，您必须获取原始字符串数据，然后使用 UTF8 编码获取字符串的字节，然后用数据帧覆盖它，因此与读取相反，唯一的区别是您不应该进行屏蔽。所以从服务器到客户端的数据不会被屏蔽。
9.  在您制作二进制文件并发送后，如果一切正常，您可能会在客户端收到您发送的数据“onmessage”。

客户端永远不会收到部分数据或无序数据。它将始终按照您发送的顺序接收数据包，并且始终按照您发送的顺序接收数据包。服务器可能会部分基于低级 TCP 层进程接收数据。但会收到总是订购的。

该协议是可靠且有序的。

最流行的 WebSockets 协议[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)规范，请记住 iOS 使用另一个规范，它们可能不交叉兼容，这意味着您需要专门为不同的协议实现创建另一个握手功能和数据框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:25:09.247

> 握手完成后，您可以接收和发送消息。消息是基于 WebSockets 协议的数据帧（非原始）。WebSockets 是基于 MESSAGE 的协议。因此，您必须确保在对数据进行逻辑处理之前读取特定数量的消息数据。

这里有更多信息：

*   [Netty - 框架](https://stackoverflow.com/questions/9506146/netty-framing)
*   [http://www.ietf.org/mail-archive/web/hybi/current/msg07641.html](http://www.ietf.org/mail-archive/web/hybi/current/msg07641.html)
*   [http://www.lenholgate.com/blog/2011/07/websockets-is-a-stream-not-a-message-based-protocol.html](http://www.lenholgate.com/blog/2011/07/websockets-is-a-stream-not-a-message-based-protocol.html)

因此，服务器可以将消息分割成多个 WebSocket 帧，然后发送给客户端。

# php - php mkdir，文件夹名称和结构

> ID：10649338
> 
> 赞同：2
> 
> 时间：2012-05-18T08:37:36.017
> 
> 标签：php

我需要在我的服务器上创建一个新文件夹，这也可以使用 mkdir()

但是有人可以告诉我如何使用 mkdir() 来制作文件夹名称和结构吗？

文件夹名称将是 = $_SESSION['username'];

新文件夹内的结构应为 = /folder1/folder2/folder3/folder4/

谢谢你的时间。

/塔尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:44:37.530

您需要设置`true`允许您创建嵌套目录的第三个参数：

```
mkdir($_SESSION['username'] . '/folder1/folder2/folder3/folder4/', 0777, true); 
```

# c# - 拆分长字符串 WP7

> ID：10649339
> 
> 赞同：-1
> 
> 时间：2012-05-18T08:37:38.293
> 
> 标签：c#

如何拆分长字符串？

输入 ：

```
ABCDEFGHI 
```

输出 ：

```
ABC, DEF, GHI 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:58:40.983

假设这是一个很长的字符串，请使用字符串生成器进行连接。并使用 substring 来构建单独分组的字符串。这将为您节省内存。

```
string longString = "ABCDEFGHIJK";
int groupingLength = 3;

var stringLength = longString.Length;
var startingLength = Math.Min(longString.Length, groupingLength);
var startingString = longString.Substring(0, startingLength);
var sb = new StringBuilder(startingString);
if (stringLength > groupingLength)
{
    for(int i = groupingLength; i < stringLength; i = i + groupingLength)
    {
        var subStringLength = Math.Min(stringLength - i, groupingLength);
        var groupedString = longString.Substring(i, subStringLength);
        sb.Append(", ").Append(groupedString);
    }
}
var finalString = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:53:14.250

利用

```
string str = "ABCDEFGHI";

List<string> lst = new List<string>();

string temp = "";

for(int i = 0; i < str.Length; i++)
{
    temp = str[i].ToString();

    if((i + 1) % 3 == 0)
    {
        lst.Add(temp);
        temp = "";
    }
}

string final_str = string.Join(", ", lst); 
```

# android - 如何知道哪些在线数据库可以连接

> ID：10649340
> 
> 赞同：0
> 
> 时间：2012-05-18T08:37:41.060
> 
> 标签：android, database

我正在构建一个与商店有关的*客户端服务器 android 应用程序* ，我希望（当用户接近 2 或 3 家商店且他们的数据库在线时）我的应用程序**了解他可以连接到其中一个商店的数据库**和将它们列在屏幕上。（当我们想要连接到互联网时，可用的 wifi 会发生什么）

我怎样才能做到这一点？
我希望我清楚我在寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:56:46.107

如我错了请纠正我。您正在编写一个可以从服务器/数据库属于商店的服务器访问数据的应用程序？

如果我对您的问题的理解是正确的，请执行以下操作：

*   创建一个监听连接变化的连接广播
*   创建一个 GPS 管理器，将当前位置与基于商店位置的位置进行比较
*   如果在一个或多个商店的范围内并且有可用的连接，请通过 restfull 请求查询服务器，在服务器端，触发查询，查看是否得到任何结果（我不知道是否存在特定查询检查从服务器端代码到数据库的数据库连接）如果得到结果，则表明数据库可用，将结果从服务器发送回客户端，并将数据库/存储列为可用。

我个人会使用 JSON 来处理来自客户端 <-> 服务器的请求。因为它重量轻且易于使用。

编写广播员：[BraodcastReciever](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

例子：

```
private Context _context;
private State _state;
private boolean _listening;
private String _reason;
private boolean _isFailOver;

private NetworkInfo _networkInfo;

private NetworkInfo _otherNetworkInfo;
private ConnectivityBroadcastReceiver _receiver;
/**
 * The broadcast that listens to connectivity changes(wifi, mobile network etc)
 * */
private class ConnectivityBroadcastReceiver extends BroadcastReceiver {
    /**
     * Called when connectivity state changes
     * 
     * @param Context the context
     * @param Intent the intent containing the information about the change
     * */
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if(!action.equals(ConnectivityManager.CONNECTIVITY_ACTION) || _listening == false) {
            Log.w(TAG, "onReceived() called with " + _state.toString() + " and " + intent);
            return;
        }

        boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);

        //Set the state according to current connectivity.
        if(noConnectivity) {
            _state = State.NOT_CONNECTED;
        } else {
            _state = State.CONNECTED;
        }

        //If current state is CONNECTED. Start background services, otherwise stop services.
        switch(_state) {
        case CONNECTED:
            //Do stuff when connected
            break;
        case NOT_CONNECTED:
            //Do stuff if not connected
            break;
        }

        _networkInfo = (NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
        _otherNetworkInfo = (NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

        _reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
        _isFailOver = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

        Log.d(TAG, "onRecieve(): _networkInfo= " + _networkInfo + " _otherNetworkInfo= " + (_otherNetworkInfo == null ? "[none]" : _otherNetworkInfo + 
                " noConn= " + noConnectivity) + " _state= " + _state.toString());
    }
}; 
```

我没有发布整个代码。我围绕 ConnectivityBroadcastReceiver 编写了一个包装器。但是使用给定的代码，您应该能够走得足够远。请注意，代码中的 State 是一个包含 3 个值的**枚举**：CONNECTED、NOT_CONNECTED、UNKNOWN

至于 GPS 管理器：

```
 /**
 * <h1>GPSManager</h1>
 * 
 * <p>
 * Manager for GPS tracking.
 * Able to enable and disable GPS tracking for the application.
 * </p>
 * */
public class GPSManager {
    public static final String TAG = "LocationFinder";
    private double _lat;
    private double _lon;
    private float _accuracy;
    private Context _context;
    private LocationManager _locManager;
    private LocationListener _locListener;

    private static GPSManager _instance;

    /**
     * Constructor.
     * 
     * @param context The context of the caller.
     * */
    private GPSManager(Context context) {
        this._context = context;
        this._locListener = new LocationTracker();
    }

    /**
     * GPSManager is singleton. Retrieve the shared instance.
     * 
     * @param context The context of the caller.
     * @return GPSManager An instance of the GPSManager class.
     * */
    public static synchronized GPSManager getInstance(Context context) {
        if(_instance == null) {
            _instance = new GPSManager(context);
        }
        return _instance;
    }

    /**
     * Start tracking GPS locations.
     * */
    public void startGpsTracking() {
        _locManager = (LocationManager)_context.getSystemService(Context.LOCATION_SERVICE);
        _locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
                0, 0, _locListener);
    }

    /**
     * Stop tracking GPS locations.
     * */
    public void stopGpsTracking() {
        _locManager.removeUpdates(_locListener);
        _locManager = null;
    }

    /**
     * Retrieve the latitude from the GPSManager.
     * 
     * @return double The latitude.
     * */
    public double getLatitude() {
        return _lat;
    }

    /**
     * Retrieve the longitude from the GPSManager.
     * 
     * @return double The longitude.
     * */
    public double getLongitude() {
        return _lon;
    }

    /**
     * Check if the GPSManager has a fix on a location.
     * 
     * @return boolean True if GPSManager has a fix, otherwise false.
     * */
    public boolean hasFix() {
        if(_lat != 0 && _lon != 0)
            return true;
        else
            return false;
    }

    /**
     * Retrieve the accuracy of the fix.
     * 
     * @return float The accuracy.
     * */
    public float getAccuracy() {
        return _accuracy;
    }

    /**
     * Retrieve the last known location.
     * 
     * @return Location The last known location.
     * */
    public Location getLastLocation() {
        return _locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    }

    /**
     * <h1>LocationTracker</h1>
     * 
     * <p>Tracks the location for the GPSManager.</p>
     * */
    private class LocationTracker implements LocationListener {
        /** (non-Javadoc)
         * @see android.location.LocationListener#onLocationChanged(android.location.Location)
         */
        @Override
        public void onLocationChanged(Location location) {      
            _lat = location.getLatitude();
            _lon = location.getLongitude();
            _accuracy = location.getAccuracy();
        }

        /** (non-Javadoc)
         * @see android.location.LocationListener#onProviderDisabled(java.lang.String)
         */
        @Override
        public void onProviderDisabled(String provider) {
            Log.d(TAG, "Gps Disabled");     
        }

        /** (non-Javadoc)
         * @see android.location.LocationListener#onProviderEnabled(java.lang.String)
         */
        @Override
        public void onProviderEnabled(String provider) {
            Log.d(TAG, "Gps Enabled");  
        }

        /** (non-Javadoc)
         * @see android.location.LocationListener#onStatusChanged(java.lang.String, int, android.os.Bundle)
         */
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {};
    };
} 
```

根据您自己的需要扩展它。gps 管理器中的大多数代码都是不言自明的。

而对于其余的东西，有很多不同的方法，你必须自己查一下。

作为对您评论的回答，我将向您展示我对 webrequest 的实现。我个人使用 apache-mime4j-0.6.jar 和 httpmime-4.0.1.jar。

```
WebService _service = new WebService();
    @Override
    protected String doInBackground(String... arg0) {
        try {
            MultipartEntity multipart = new MultipartEntity();
            multipart.addPart("username", new StringBody(_inputName));
            multipart.addPart("password", new StringBody(_inputPass));

            _service.post(QfConfig.RESTFUL_LOGIN_URL, multipart);

            long response = _service.getLongResponse();

            if(response != 0) {
                _pgUserId = response;
                _onlineValidated = true;
            }
        } catch(Exception e) {
            e.printStackTrace();
        }
        return null;
    } 
```

我不知道您是要 POST 还是 GET。上面的示例使用 POST。我创建了一个 MultipartEntity，并向其中添加了 2 个部分。多部分将作为 POST 值的名称为 username 的表单发送到服务器，名称为 username 的帖子的 VALUE 为 new StringBody(_inputName)。

对于我的 WebService 类中的帖子部分：

```
public void post(String url, MultipartEntity postData) {
    HttpClient client = null;
    HttpPost post = null;
    HttpResponse httpResponse = null;
    HttpEntity entity = null;
    InputStream _inStream = null;

    try {
        client = new DefaultHttpClient();
        post = new HttpPost();
        URI uri = URI.create(url);
        post.setURI(uri);
        post.setEntity(postData);
        //Execute the HttpPost request and store the response in httpResponse.
        httpResponse = client.execute(post);
        //Set the response code from the request's responst.
        setResponseCode(httpResponse.getStatusLine().getStatusCode());
        //Retrieve the entity from the response.
        entity = httpResponse.getEntity();

        if(entity != null) {
            //Retrieve the content from the entity.
            _inStream = entity.getContent();
            //Convert the InputStream to String and set the String response to the returned value.
            setStringResponse(IOUtility.convertStreamToString(_inStream));
            //Close the InputStream.
            Log.d(TAG, getStringResponse());
        }   

        //try to create a numeric value of the response result and store it if so
        if(GeneralUtil.isNumeric(getStringResponse())) {
            setLongResponse(Long.parseLong(getStringResponse()));
        }

        Log.d(TAG, httpResponse.getStatusLine().getReasonPhrase());
    } catch(Exception e) {
        e.printStackTrace();
        setResponseCode(0);
        setLongResponse(0);
        setStringResponse("");
    } finally {
        try {
            _inStream.close();
        } catch (Exception ignore) {}
    }
} 
```

我通过 https 工作，这更复杂，所以我把这些东西排除在外。我在这里所做的是，创建一个新的 httpClient 和 HttpPost，设置 URI（如果是 post），将多部分数据添加到 post.setEntity() 然后执行请求并将响应保存在 HttpResponse 对象中。

然后，我检索实体并将其保存为 HttpEntity，以了解从何处获取响应内容。可以是 JSON 字符串、数字，基本上可以是任何你想要的。然后我设置了一些方法来帮助我通过 getter 和 setter 轻松检索结果。

对于 HttpGet 更简单，您只需要传递一个 url ，而不是 HttpPost 对象，您创建一个 HttpGet 对象，将 url 传递给它， _client.execute([HttpGet object]) 并以相同的方式检索结果。

在 php 脚本中，您可以直接使用 $_POST['username'] 这将给出您在上面代码中的 StringBody 中设置的用户名值。

使用 get，我建议发送一个 url（带或不带参数，然后将 JSON 字符串作为结果发送回 get 请求。

如果您需要更多帮助，请告诉我。我认为这是我能做到的。我无法显示 php 方面，因为我使用的是自行设计的框架。

# php - Zend-Logging：“'php://output”在哪里？

> ID：10649341
> 
> 赞同：-1
> 
> 时间：2012-05-18T08:37:44.347
> 
> 标签：php, zend-framework, logging

我是 Zend 框架的初学者，想要做一些日志记录来查找错误。我[在 Zend 手册中找到了一个示例](http://framework.zend.com/manual/en/zend.log.overview.html)：

```
$logger = new Zend_Log();
$writer = new Zend_Log_Writer_Stream('php://output');
$logger->addWriter($writer); 
```

我想知道写入后在哪里可以找到`php://output`-log 文件？这是一个真实的路径还是这只是一个例子，我必须`php://output`用其他文件名替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:40:09.217

`php://output`不是文件，它是允许您在屏幕上打印内容的[流。](http://www.php.net/manual/en/wrappers.php.php)

来自 PHP 文档：

> php://output 是一个只写流，它允许您以与 print 和 echo 相同的方式写入输出缓冲区机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:44:01.837

输出通常用于命令行界面，当您通过网络服务器执行 PHP 时并不是特别有用。

出于调试目的，您可以考虑使用`error_log`which 将写入与您的网络服务器关联的错误日志。

[http://php.net/manual/en/function.error-log.php](http://php.net/manual/en/function.error-log.php)

# flash - Google Chrome Frame - 在 Windows 资源管理器中打开本地链接

> ID：10649345
> 
> 赞同：1
> 
> 时间：2012-05-18T08:38:00.577
> 
> 标签：flash, google-chrome-extension, npapi, google-chrome-frame

我可以使用 Windows 资源管理器从 IE 中打开远程站点中的本地链接 (file://)，这些链接在注册表中定义为受信任。这对我来说很好。

现在我也想在 GCF 中做这件事。以下都不起作用。有任何想法吗？

1.点击

```
<a target='_blank' rel='noreferrer' href='file:///C:/'>Open Folder</a> 
```

2.点击

```
<div target='_blank' rel='noreferrer' onclick='window.open("file:///C:/")'>Open Folder</div> 
```

3.尝试安装一个使用 NPAPI 插件的 .crx 扩展来使用此方法访问本地文件：[http](http://code.google.com/chrome/extensions/external_extensions.html#registry) ://code.google.com/chrome/extensions/external_extensions.html#registry （扩展在 Chrome 中有效，但在 GCF 中无效)

4.没试过Flash解决方案。是否可以使用 Flash 在指定文件夹上打开 Windows 资源管理器，或者在单击 .doc 文件时像 IE 一样使用 Microsoft Word 直接打开 .doc 文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:46:50.673

现在不可能。我提交了一个错误
crbug.com/129183

# visual-studio-2010 - 如何将 Visual Studio 调试器附加到托管类型进程？

> ID：10649351
> 
> 赞同：2
> 
> 时间：2012-05-18T08:38:20.040
> 
> 标签：visual-studio-2010, debugging, windows-services

我一直在按照[本指南](http://msdn.microsoft.com/en-us/library/7a50syb3%28v=vs.100%29.aspx)调试 Windows 服务应用程序。

基本上，我需要将 Visual Studio 调试器附加到安装已开发的 Windows 服务后启动的进程。但是，VS 不允许我将调试器附加到此进程，如下图所示：

![在此处输入图像描述](../Images/05cb84ad27ef6195a257b91d3381f9fd.png)

如何将调试器附加到此进程？如果我单击任何其他进程，附加按钮就会启用。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:47:18.517

检查复选框`Show processes from all users`，然后你会看到`AutomatedReports.exe`。附上那个（不是`AutomatedReports.vshost.exe`）

`vshost`是帮助调试的主机进程。[有关此MSDN 链接](http://msdn.microsoft.com/en-us/library/ms185331.aspx)的更多信息

此外，您还需要在您的服务代码中放置您想要打断点的地方。

```
System.Diagnostics.Debugger.Break(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:47:40.540

该服务可能在单独的用户帐户上运行。选中“显示所有用户的进程”复选框并将调试器附加到`AutomatedReports.exe`进程。

还要确保您正在运行该服务的调试版本，否则，您将无法进行大量调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:55:49.610

您是否尝试过更改您正在调试的代码的类型？

点击“选择...”

选择“调试这些代码类型”

然后，您可以选择以下类型：“托管 (v4.0…)”

# jquery - 比图像大小多 10 px

> ID：10649352
> 
> 赞同：0
> 
> 时间：2012-05-18T08:38:20.827
> 
> 标签：jquery, html, css

我不知道为什么这不起作用，我想要`div`大于图像的大小？

```
<script type="text/javascript">
    $(document).ready(function() {
        $(function() {
            var a = $('#img').clientWidth;
            $('#viewimg').css('width', +a);
            var b = $('#img').clientHeight;
            $('#viewimg').css('height', +b);
        });
    });
</script> 
```

HTML

```
 <  div  style="he"">
      <div id="viewimg">
        <p>asdsa
        </p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
      </div>
      <img id="img" src="https://www.google.com/intl/es_ALL/images/logos/images_logo_lg.gif" style= border:dotted 1px;"/>
      <div class="t">
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:28:35.680

设置`padding`（顶部和左侧）或`margin`（顶部和左侧）将完成工作

```
$(document).ready(function() {
        var extraSpace = 15;//pixels
        var img = $("#img");
        var div = $("#viewimg");
        img.css('margin-left', extraSpace/2);
        img.css('margin-top', extraSpace/2);
        var a = img.width();
        var b = img.height();
        div.css('width', a+extraSpace);
        div.css('height', b+extraSpace);
});​ 
```

演示：http: [//jsfiddle.net/dkr3A/3/](http://jsfiddle.net/dkr3A/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:48:54.327

你不能`clientWidth`像这样在 jQuery 对象上使用。看看这个 jsFiddle：http: [//jsfiddle.net/hewnR/1/](http://jsfiddle.net/hewnR/1/)

如果要访问 jQuery 对象匹配的 DOM 元素，需要使用`.get()`. 看看[文档](http://api.jquery.com/get/)。但是如果你使用 jQuery 的方法`.width()`而不是`.get(0).clientWidth`.

```
//This doesn't work:
var a = $('#img').clientWidth;

//But this does:
var a = $('#img').get(0).clientWidth;
//and does the same as this:
var a = $('#img').width();

//Then, add 10px and change the width:
$('#viewimg').width(10+a+'px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:41:55.307

```
var a= $('#img').width();
$('#viewimg').width(a+10) ; // $('#viewimg').css('width', a+10); 
```

# python - PyQT4 - 2个窗口之间的通信

> ID：10649354
> 
> 赞同：2
> 
> 时间：2012-05-18T08:38:27.857
> 
> 标签：python, pyqt4, communication

我在 PyQt 中的 2 个窗口之间的通信有问题。

主窗口 = UI_Form（MyForm 类） 附加窗口 = UI_Employee（Employee 类）

当我单击 AddTextButton (Ui_Employee) 时，我想在 LineTextEdit (UI_Form) 中设置文本这是我的代码。

```
import sys
from PyQt4 import QtCore, QtGui

from Form import Ui_Form
from Window import Ui_Employee

class MyForm(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_Form()
        self.ui.setupUi(self)

        QtCore.QObject.connect(self.ui.AddButton,QtCore.SIGNAL("clicked()"), self.add)

    def add(self):
        self.Employee = Employee(self)
        self.Employee.show()

class Employee(QtGui.QMainWindow):
    def __init__(self,parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui = Ui_Employee()
        self.ui.setupUi(self)

        QtCore.QObject.connect(self.ui.AddRowButton,QtCore.SIGNAL('clicked()'), self.addText)

    def addText(self):
        self.Form = MyForm()
        self.Form.ui.textEdit.setText('someText')

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MyForm()
    myapp.show()
    sys.exit(app.exec_()) 
```

我在方法 addText 中遇到了问题。第一行和第二行被忽略。我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:40:00.073

在您的方法中`Employee.addText`，您创建一个新的`MyForm`. 这可能不是你想要的。您可以通过`myapp`内部访问您的原件。`Employee``self.parentWidget()`

```
class Employee(QtGui.QMainWindow):

    def addText(self):
        self.parentWidget().ui.textEdit.setText('someText') 
```

# ubuntu - 用于将 ubuntu 时间与 gps 设备同步的 Shell 脚本

> ID：10649355
> 
> 赞同：0
> 
> 时间：2012-05-18T08:38:49.633
> 
> 标签：ubuntu, gps, ntp

我有一个运行 gpsd 的 ubuntu 盒子，能够从天空收集信号。

现在我想从这个 gpsd 同步我的 ubuntu 时间。有没有简单的shell脚本可以做到这一点？所以我可以做一个 crontab 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:45:04.693

您可以将 gpsd 设置为一种 NTP-TimeServer。看看这个教程：[http ://www.bufferbloat.net/projects/cerowrt/wiki/Getting_time_from_gpsd](http://www.bufferbloat.net/projects/cerowrt/wiki/Getting_time_from_gpsd)

# json - Spring @ResponseBody Jackson JsonSerializer 与 JodaTime

> ID：10649356
> 
> 赞同：15
> 
> 时间：2012-05-18T08:38:50.023
> 
> 标签：json, spring, spring-mvc, jackson, jodatime

我有以下用于 JodaTime 处理的序列化程序：

```
public class JodaDateTimeJsonSerializer extends JsonSerializer<DateTime> {

    private static final String dateFormat = ("MM/dd/yyyy");

    @Override
    public void serialize(DateTime date, JsonGenerator gen, SerializerProvider provider)
            throws IOException, JsonProcessingException {

        String formattedDate = DateTimeFormat.forPattern(dateFormat).print(date);

        gen.writeString(formattedDate);
    }

} 
```

然后，在每个模型对象上，我这样做：

```
@JsonSerialize(using=JodaDateTimeJsonSerializer.class )
public DateTime getEffectiveDate() {
    return effectiveDate;
} 
```

使用上述设置，`@ResponseBody`Jackson Mapper 肯定可以工作。但是，我不喜欢我一直在写的想法`@JsonSerialize`。我需要的是一个没有`@JsonSerialize`模型对象的解决方案。是否可以在 spring xml 中的某处编写此配置作为一个配置？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T13:59:00.090

尽管您可以为每个日期字段添加注释，但最好为您的对象映射器进行全局配置。如果您使用杰克逊，您可以按如下方式配置您的弹簧：

```
<bean id="jacksonObjectMapper" class="com.company.CustomObjectMapper" />

<bean id="jacksonSerializationConfig" class="org.codehaus.jackson.map.SerializationConfig"
    factory-bean="jacksonObjectMapper" factory-method="getSerializationConfig" >
</bean> 
```

对于 CustomObjectMapper：

```
public class CustomObjectMapper extends ObjectMapper {

    public CustomObjectMapper() {
        super();
        configure(Feature.WRITE_DATES_AS_TIMESTAMPS, false);
        setDateFormat(new SimpleDateFormat("EEE MMM dd yyyy HH:mm:ss 'GMT'ZZZ (z)"));
    }
} 
```

当然，SimpleDateFormat 可以使用您需要的任何格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T01:48:26.077

@Moesio 几乎明白了。这是我的配置：

```
<!-- Configures the @Controller programming model -->
<mvc:annotation-driven/>

<!-- Instantiation of the Default serializer in order to configure it -->
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapterConfigurer" init-method="init">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper" ref="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean>

<bean id="jacksonObjectMapper" class="My Custom ObjectMapper"/>

<bean id="jacksonSerializationConfig" class="org.codehaus.jackson.map.SerializationConfig"
    factory-bean="jacksonObjectMapper" factory-method="getSerializationConfig" /> 
```

让我印象深刻的是`<mvc:annotation-driven/>`它自己制作`AnnotationMethodHandler`并忽略了你手动制作的那个。我从[http://scottfrederick.blogspot.com/2011/03/customizing-spring-3-mvcannotation.html](http://scottfrederick.blogspot.com/2011/03/customizing-spring-3-mvcannotation.html)获得了 BeanPostProcessing 的想法来配置使用的那个，瞧！奇迹般有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T13:46:17.727

使用 Spring 3 的 JavaConfig 相同：

```
@Configuration
@ComponentScan()
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter
{

    @Override
    public void configureMessageConverters(final List<HttpMessageConverter<?>> converters)
    {
        converters.add(0, jsonConverter());
    }

    @Bean
    public MappingJacksonHttpMessageConverter jsonConverter()
    {
        final MappingJacksonHttpMessageConverter converter = new MappingJacksonHttpMessageConverter();
        converter.setObjectMapper(new CustomObjectMapper());

        return converter;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T05:34:10.527

如果您使用的是 Spring Boot，请在 application.yml 中尝试：

```
spring:
    jackson:
       date-format: yyyy-MM-dd
       time-zone: Asia/Shanghai
       joda-date-time-format: yyyy-MM-dd 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-20T15:30:06.350

如果您只是在类路径中有 Jackson JAR，并返回 a `@ResponseBody`，Spring 会自动将 Model 对象转换为 JSON。您无需在模型中注释任何内容即可使其正常工作。

# android - USB 主机 API 在三星 Galaxy S3 上公开或被阻止

> ID：10649361
> 
> 赞同：1
> 
> 时间：2012-05-18T08:39:16.203
> 
> 标签：android, usb, host

我们知道三星 Galaxy S3 将配备 USB 主机，但你们是否知道 USB API 是否也会在三星 Galaxy S3 上公开/可访问或被阻止以允许开发需要访问这些 API 的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:52:50.030

它将与其他 SG 类似。与往常一样通过 android OS/（Linux 如果 root）进行相同的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:07:17.110

我有一个 Galaxy S3，“USB 主机查看器”和“USB 主机控制器”等应用程序能够在连接了 OTG 主机适配器的情况下正常查看从设备。

我将假设这意味着 API 已启用，但由于我还没有找到一个可以支持的 USB 驱动程序

# oracle - 使用 XQJ 和 Oracle 11g 设置连接信息

> ID：10649364
> 
> 赞同：0
> 
> 时间：2012-05-18T08:39:18.280
> 
> 标签：oracle, xquery

我正在尝试通过他们的 XQJ API 向 Oracle 11g 数据库提交 XQuery 查询。

[当我按照http://www.oracle.com/technetwork/articles/oem/xquery-jdbc-325944.html](http://www.oracle.com/technetwork/articles/oem/xquery-jdbc-325944.html)中的说明实例化一个 oracle.xquery.xqj.OXQDataSource 时，我可以很好地提交查询，除非我没有找到如何设置服务器连接（服务器名称、端口、用户名、密码……）信息：

*   该数据源声称它不支持设置任何属性。
*   它没有实现采用 JDBC 连接的数据源构造函数。
*   我没有看到任何非标准方法来设置此类信息。
*   当我尝试访问像 collection("oradb:/foo") 这样的随机集合时，即使没有服务器正在运行，我也会得到一个空的结果集，这表明驱动程序甚至没有尝试连接。

我错过了什么，如何设置服务器连接信息？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:49:15.273

感谢[Charles Foster](http://xqj.net)，我可以回答我自己的问题：Oracle 的 XQJ 实现是 2010 年 1 月以来的旧独立版本，它非常无用并且不与 Oracle 数据库交互。

尽管所有关于 XQJ 的 Oracle 声明，我都无法找到任何客户端/服务器 XQJ 实现（当然来自 DataDirect 的一个除外），并且向 Oracle 数据库提交 XQuery 查询的方式似乎是通过嵌入 PL- 的 JDBC SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T19:19:21.737

12年有可能。

XQJ 在 Java 中运行查询：http: [//docs.oracle.com/database/121/ADXDK/adx_j_xqj.htm#ADXDK99930](http://docs.oracle.com/database/121/ADXDK/adx_j_xqj.htm#ADXDK99930)

XQJ 对数据库运行查询：http: [//docs.oracle.com/database/121/ADXDK/adx_j_xqjxdb.htm#ADXDK136](http://docs.oracle.com/database/121/ADXDK/adx_j_xqjxdb.htm#ADXDK136)

# symfony1 - 在 Symfony 操作中读取 yml 文件

> ID：10649366
> 
> 赞同：0
> 
> 时间：2012-05-18T08:39:22.507
> 
> 标签：symfony1, symfony-1.4, yaml

我有少量配置数据（不足以使用数据库中的表），我想将其保存在 YAML 文件中。由于 Symfony 在 libray 的很多部分都使用这种格式，我猜想读取 *.yml 文件并在操作中包含这些信息并不难。

我的 YAML 文件如下所示：是层次菜单定义

```
#menu-config.yml
.basicUser:
    menu: menu1
        menu: submenu1.1
            link: link1
                url: url1.com
        menu: submenu1.2
        link: link2
            url: url2.com
        link: link3
            url: url3.com
    menu: menu2
        menu: submenu2.1
            link: link4
                url: link4.com
.admin
... 
```

我想要的是一个具有菜单、子菜单和链接层次结构的 php 数组

我试过这个：

```
$myYaml = sfYaml::load('<path-to-my-yaml-file>'); 
```

但是当 i`echo`或 它在模板中时仅显示“1” `print_r`。`var_dump`:S 我确定我加载了一个文件，因为该函数`is_file('path-to-my-yaml-file');`返回 true。

那么，有没有人有好的结果呢？非常感谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:05:44.637

你的 yaml 文件有效吗？没有标签等..

您是否尝试过使用其他 yaml 文件，例如[这个](http://trac.symfony-project.org/browser/branches/1.4/lib/config/config/settings.yml)文件并查看 php 数组是什么？

我曾经在一个动作中手动加载一个 yaml，我这样做：

```
$database = sfYaml::load(dirname(__FILE__).'/../config/databases.yml');
$param    = $database['all']['doctrine']['param']; 
```

而且效果很好。我认为，如果负载仅返回`1`，则意味着它失败或文件有问题。

# gitolite - Gitolite宏扩展为用户名？

> ID：10649367
> 
> 赞同：1
> 
> 时间：2012-05-18T08:39:35.840
> 
> 标签：gitolite

我有一个类似的配置文件：

```
repo qt/[a-zA-Z0-9_\.\-]+
  C      = @admins
  RW+    = @admins
  R      = @users
  RW bob = bob 
```

正如您所看到的，每个用户（在@users 组中）都可以读取所有分支，我希望 bob 能够创建并推送到分支 bob（以及 bob/fix 等）。

是否有可以扩展到用户名的宏？我想做类似的事情：

```
repo qt/[a-zA-Z0-9_\.\-]+
  C       = @admins
  RW+     = @admins
  R       = @users
  RW USER = USER 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:11:21.983

一个看起来接近你想要的 Gitolite 功能是“**[个人分支](http://sitaramc.github.com/gitolite/special.html#pers)**”

> “个人”分支非常适合开发人员需要共享工作但不能直接相互拉取的环境（通常是由于网络或身份验证相关的原因，这在公司设置中都很常见）。
> 
> 个人分支存在于它们自己的命名空间中。语法是

```
RW+ personal/USER/  =   @userlist 
```

> where the "personal" can be anything you like (but cannot be empty), and the "`/USER/`" part is necessary (including both slashes).
> 
> A user "`alice`" (if she's in the userlist) can then push any branches inside `personal/alice/`.
> Which means she can push `personal/alice/foo` and `personal/alice/bar`, but NOT `personal/alice`.
> 
> (Background: at runtime the "`USER`" component will be replaced by the name of the invoking user. Access is determined by the right hand side, as usual).

That means, when you are looking for "Is there a macro that would expand to the users name?", `/USER/` would be an example of a "macro" expended to the username.

# objective-c - 不符合协议的实现方法

> ID：10649368
> 
> 赞同：0
> 
> 时间：2012-05-18T08:39:37.867
> 
> 标签：objective-c, cocoa-touch

在我的 TheTabBarController 中，不符合 UINavigationControllerDelegate 协议，我可以将我的类分配给 moreNavigationController.delegate。

```
// without conforming to protocol, <UINavigationControllerDelegate>
@interface TheTabBarController : UITabBarController 

self.moreNavigationController.delegate = self; 
```

它只是引发以下警告，但编译成功。

> 从不兼容的类型'TheTabBarController *const __strong'分配给'id'

协议的方法在运行时被调用，没有任何错误。我用它来隐藏一些视图控制器的更多导航栏。

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

所以，我想知道，这是否合法且安全？它会在以后崩溃或泄漏内存吗？这怎么能在语义上被允许呢？运行时如何解决方法，尽管它没有在接口中定义并且协议不符合？或者，UITabBarController 使用了符合协议的隐藏类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:53:14.093

协议没有运行时意义。它们仅在编译期间用于在您尝试执行您现在正在执行的操作时显示类型错误。如果它实现了协议，你为什么不想`TheTabBarController`成为？`UINavigationControllerDelegate`

在 Objective-C 中，您可以在任何对象上调用任何方法，并且它可以通过实现`forwardInvocation:(NSInvocation *)anInvocation`或相关方法之一来处理它。您还可以在运行时使用`objc_install_instance_method`相关函数向对象或类添加新方法。

# objective-c - Xcode中类之间的简单变量传递

> ID：10649370
> 
> 赞同：3
> 
> 时间：2012-05-18T08:39:41.257
> 
> 标签：objective-c, ios, xcode, class

我正在尝试做一个 ios 应用程序，但我被困在类之间传递数据。这是我的第二个应用程序。第一个是用一个全局类完成的，但现在我需要多个类。我尝试了许多教程，但没有奏效或传递的值始终为零。有人可以给我写一个简单的应用程序来演示 IOS 5 中的变量传递。没什么特别的，故事板带有 2 个视图控制器，一个变量。

感谢您的帮助 。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.

            FirstViewController *fv;
            fv.value = indexPath.row;

            NSLog(@"The current %d", fv.value);

            FirstViewController *detail =[self.storyboard instantiateViewControllerWithIdentifier:@"Detail"];
            [self.navigationController pushViewController:detail animated:YES]; 

} 
```

这是我的主视图中的代码，我需要将 indexPath.row 或我按下的单元格的索引发送到下一个视图

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T08:57:55.480

有几件事要做。根据应用程序，您可以向 AppDelegate 类添加一个变量，使其通过共享实例可用于所有类。最常见的事情（我认为）是做一个单例。为此，您可以创建一个类，比如 StoreVars，以及一个返回对象的静态方法，这使得类“全局”。在该方法中，您可以像往常一样初始化所有变量。然后，您可以随时从任何地方联系到他们。

```
@interface StoreVars : NSObject

@property (nonatomic) NSArray * mySharedArray;
+ (StoreVars*) sharedInstance;

@implementation StoreVars
@synthesize mySharedArray;

+ (StoreVars*) sharedInstance {
    static StoreVars *myInstance = nil;
    if (myInstance == nil) {
        myInstance = [[[self class] alloc] init];
        myInstance.mySharedArray = [NSArray arrayWithObject:@"Test"];
    }
    return myInstance;
} 
```

这将产生一个单例。如果你记得在你的两个视图控制器中导入“StoreVars.h”，你可以像这样访问现在共享的数组；

```
[StoreVars sharedInstance].mySharedArray;
               ^ 
```

这是一个返回 StoreVars 对象的方法。在 StoreVars 类中，您可以实现任何对象并在静态方法中对其进行初始化。只要记住初始化它，否则，你所有的对象都将是 0/nil。

如果你不是 UINavigationController 的粉丝并且宁愿使用 segues，它会容易得多，但会使你的应用程序相当“混乱”。UIViewController 中实现了一个方法，你应该重载：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"YOUR_SEGUE_NAME_HERE"])
    {
        // Get reference to the destination view controller
        YourViewController *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
        [vc setMyObjectHere:object];
    }
} 
```

来源：[如何通过prepareForSegue：一个对象](https://stackoverflow.com/questions/7864371/ios5-how-to-pass-prepareforsegue-an-object)

在问这样的问题之前做一些研究。阅读一些教程，亲自尝试，然后提出与您真正需要的内容相关的问题。不是每天人们都想为你做所有的工作，但有时你很幸运。好像今天。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:53:59.373

如果您在 2 个控制器之间使用 segue，则必须重载 prepareToSegue 方法

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// check if it's the good segue with the identifier
if([[segue identifier] isEqualToString:@"blablabla"])
{
    // permit you to get the destination segue
    [segue destinationViewController];
    // then you can set what you want in your destination controller
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:30:09.580

你面临的问题对于初学者来说是相当令人困惑的。以错误的方式“解决”它可能会导致学习大量的坏习惯。
请看一看[Ole Begemann的关于](https://stackoverflow.com/users/116862/ole-begemann)[在视图控制器之间传递数据](http://oleb.net/blog/2012/02/passing-data-between-view-controllers/)的优秀教程——它真的很值得一读。

# database - 如何将几何数据类型用于 postgres 表？

> ID：10649373
> 
> 赞同：5
> 
> 时间：2012-05-18T08:39:50.153
> 
> 标签：database, geospatial, postgis, postgresql-9.1

我已经设置了一个 postgres 数据库（版本 9.1）并尝试使用以下查询创建一个能够存储 st_geometry 的表：

```
CREATE TABLE sensitive_areas (area_id integer, name varchar(128), zone st_geometry); 
```

但我收到如下错误：

```
ERROR:  type "st_geometry" does not exist 
```

我是否需要进一步配置我的 postgres 安装以启用几何数据类型。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T10:24:51.850

正确的类型名称是`geometry`. 如果您使用的是 PostGIS 2.0，则可以使用 typmod：

```
-- If you haven't done so already
CREATE EXTENSION postgis;

-- Make a table of Polygons, using long/lat coords
CREATE TABLE sensitive_areas (
    area_id integer primary key,
    name varchar(128),
    zone geometry(Polygon,4326)
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T10:12:57.147

```
CREATE TABLE sensitive_areas (area_id integer, name varchar(128), zone geometry); 
```

你应该已经`PostGIS`在你的数据库中安装了它才能工作。

# objective-c - hitTestForEvent:inRect:ofView 在我的 NSOutlineView 单元格中被调用了两次

> ID：10649379
> 
> 赞同：2
> 
> 时间：2012-05-18T08:40:17.620
> 
> 标签：objective-c, cocoa

通过在界面生成器中设置自定义类，我对 NSOutlineView 的单元格进行了子类化。

我已经实现了这个委托方法来配置单元：

```
- (void)outlineView:(NSOutlineView *)outlineView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn item:(id)item 
```

另外，我已经在我的自定义单元类中实现了这个方法：

```
- (NSUInteger)hitTestForEvent:(NSEvent *)event inRect:(NSRect)cellFrame ofView:(NSView *)controlView 
```

每次单击单元格时都会调用两次。我想知道为什么不只是一次。事件类型始终为 MouseDown。

我不知道这是否重要，但即使单元格没有父母或孩子，它也会被调用两次。所以它不能是细胞层次结构。

如果单击单元格的特定区域时不能依靠 hitTestForEvent 触发操作，我应该使用哪种方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:11:05.407

`-hitTestForEvent:inRect:ofView`用于触发动作是*完全*错误的方法。您应该使用`-trackMouse:inRect:ofView:untilMouseUp:`,*或* `-startTrackingAt:inView:`, `-continueTracking:at:inView:`and `-stopTracking:at:inView:mouseIsUp:`。

**重要提示：**如果您在 中实现自己的鼠标跟踪循环`-trackMouse:inRect:ofView:untilMouseUp:`，**您应该在某处记录这一事实**，因为一般来说，它会排除其他三种方法的使用。AppKit 框架中的一些`NSCell`子类会这样做，但没有记录他们已经这样做了（结果你会思考几个小时为什么它`-startTrackingAt:inView:`永远不会被调用）。

您如何实现自己的跟踪循环？像这样：

```
- (BOOL)trackMouse:(NSEvent *)theEvent inRect:(NSRect)cellFrame
            ofView:(NSView *)controlView untilMouseUp:(BOOL)untilMouseUp
{
  NSPoint pos = [controlView convertPoint:[theEvent locationInWindow]
                                 fromView:nil];

  if ([theEvent type] == NSLeftMouseDown && NSPointInRect (pos, myClickRect)) {
    NSWindow *window = [controlView window];
    NSEvent *myEvent;
    NSDate *endDate = [NSDate distantFuture];

    while ((myEvent = [window nextEventMatchingMask:(NSLeftMouseDragged
                                                     |NSLeftMouseUp)
                                          untilDate:endDate
                                             inMode:NSEventTrackingRunLoopMode
                                            dequeue:YES])) {
      if ([myEvent type] != NSLeftMouseUp)
        continue;

      pos = [controlView convertPoint:[theEvent locationInWindow]
                             fromView:nil];

      if (NSPointInRect (pos, myClickRect)) {
        // React somehow
      }

      return YES;
    }
  }

  return [super trackMouse:theEvent inRect:cellFrame ofView:controlView
              untilMouseUp:untilMouseUp];
} 
```

(The above code was just typed in here, so the usual caveats apply; it assumes the existence of an `NSRect` called `myClickRect` that defines the active area of your cell. You might need to calculate that from `cellFrame` at the head of the method.)

Obviously you can watch for and handle other events too, if they are relevant to you.

Perhaps I should also add that the three method approach, while conceptually cleaner, tends to be quite a bit slower, which generally leads me to prefer overriding `-trackMouse:inRect:ofView:untilMouseUp:` as shown above.

# django - 如何在视图中动态设置字段值？

> ID：10649384
> 
> 赞同：0
> 
> 时间：2012-05-18T08:41:03.770
> 
> 标签：django

我有一个模型，比如“文章”，有一个字段

```
published = models.BooleanField(default=True) 
```

和一个带有条件的模板：

```
{% if user.is_staff %}
    <li>form.published.label_tag</li>
    <li>form.published</li>
{% else %}
    <li>form.published.as_hidden</li>
{% endif %} 
```

我使用基于类的通用视图来添加和更新这个模型。

在这种情况下，普通编外和恶意用户仍然可以替换`published`字段的值。

我认为我必须将条件移至视图级别以防止此问题，例如

```
class ArticleEdit(UpdateView):
    model = Article
    form_class = ArticleForm

    def form_valid(self, form):
        self.object = form.save(commit=False)
        if self.request.user.is_staff:

            ''' How to let the staff change this value? '''

        else:

            ''' How to set previous value? '''

        self.object.save()
        return HttpResponseRedirect(self.get_success_url()) 
```

假设我从模板中删除了这个隐藏字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:43:52.173

我会考虑定义两种形式，一种用于员工，一种用于普通用户。然后，您可以覆盖该[`get_form_class`](https://docs.djangoproject.com/en/dev/ref/class-based-views/#django.views.generic.edit.ModelFormMixin.get_form_class)方法以选择正确的表单。如果您`published`从非员工表单中排除该字段，那么他们将无法更改该值。

```
class ArticleForm(forms.ModelForm):
    class Meta:
        model = Article
        exclude = ('published',)

class ArticleStaffForm(ArticleForm)
    class Meta:
        model = Article
        exclude = ()

class ArticleEdit(UpdateView):
    ...
    def get_form_class(self):
        if self.request.user.is_staff:
            return ArticleStaffForm
        else:
            return ArticleForm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:57:53.420

您可以执行以下操作：

```
class MyForm(forms.Form):
    def __init__(self, user, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        if not user.is_staff:
            del self.fields['published'] 
```

然后在初始化时将 request.user 对象传递给表单。

警告：未经测试的伪代码。但这应该给你一个想法。

# azure - Azure 平台就绪 - HTTPS 测试用例失败

> ID：10649386
> 
> 赞同：0
> 
> 时间：2012-05-18T08:41:10.057
> 
> 标签：azure

我正在尝试通过 Microsoft 平台就绪测试来获取我的 Azure 应用程序。我已成功启动并运行测试，但仅在其中一个测试用例上失败。这是输出：

```
======================================================================
Log generated by Microsoft Platform Ready Test Tool - Version 2.0.0.0 
======================================================================
    Test name: MyTest v4
    Test date: 05/17/2012 08:37:45
    Tested on: Physical Machine
    Test for: Microsoft Windows Azure
======================================================================
Test case/Verification: TC 16 - If the application has HTTPS URL then is it using 
port 443 for SSL configuration?
======================================================================
SSL not configured for the application.
Test Status: Fail
======================================================================
Test case/Verification: TC 16 - If the application has HTTPS URL then is it using 
port 443 for SSL configuration?
05/17/2012 08:37:46 End of Log.
====================================================================== 
```

该服务有一个 Web 角色（两个实例，用于通过弹性测试，TC 10），并且有两个端点：

*   80 : http : 使用 IIS 重写模块重定向到 https 端点。
*   443：https：发送站点

（我还启用了 RDP，它打开了 3389 端口。）

在 MPR 设置中，我将通过 Web 浏览器下载的 SSL 证书的公钥作为“服务证书文件”提供。我很确定这是正确的做法（？）。

![MPR Azure 设置](../Images/f7c631fdccce5404b6b3a4f62f25868e.png)

我已经针对 https 端点“应用程序 URL”运行 MPR 工具，但对于测试用例 16，它仍然返回失败 - 我不知道为什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:04:28.560

大约两个月前，我遇到了同样的问题。联系 MPR 支持团队，他们将帮助您解决问题！这是唯一的方法，因为在 SSL 验证部分的 MPR 工具中似乎存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:34:31.173

问题是可下载的 MPR 工具已过时，由于某种原因，当有人下载​​此工具时，由于 CDN 缓存或其他原因，他们得到了旧的过时工具，我真的很惊讶为什么它会继续发生。

您要做的就是直接通过 mprsupport@microsoft.com 联系 MPR 支持团队，他们会为您提供一个链接来下载更新的 MPR 工具，该工具不会显示此问题。

我现在要在博客上讨论这个问题，因为它仍然会给用户带来问题，这很糟糕。

# android - 禁用键盘上的特定键

> ID：10649392
> 
> 赞同：2
> 
> 时间：2012-05-18T08:41:23.740
> 
> 标签：android, android-layout, android-intent

您可以禁用键盘上的某些键以防止用户输入错误的字符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:52:14.403

以下代码是禁用数字和字符

```
{
  final InputFilter filter = new InputFilter() { 

        @Override
        public CharSequence filter(CharSequence source,
                int start, int end, Spanned dest, int dstart,
                int dend)
        {
              for (int i = start; i < end; i++)
              { 
                   if (Character.isDigit(source.charAt(i))||Character.isLetter(source.charAt(i)))
                   { 
                           return ""; 
                   } 
           } 
            return null;
        } 
}; 

answerTXT.setFilters(new InputFilter[]{filter});

} 
```

# javascript - jQuery插件激活错误

> ID：10649393
> 
> 赞同：2
> 
> 时间：2012-05-18T08:41:26.383
> 
> 标签：javascript, jquery, jquery-plugins, bug-tracking

我在识别我正在开发的网站上的错误时遇到了一些麻烦。更具体地说，我在同一页面上使用了[jPages两次。](http://luis-almeida.github.com/jPages/)

该插件的第一个实例用作网站导航，因为它是一个单页网站。第二个实例用于浏览一堆产品，而不是滚动。

你可以在这里找到我正在建立的网站：.

我还将粘贴所有 JavaScript，因为我现在不知道错误在哪里以及为什么会这样：

```
$(document).ready(function() {

var default_cluster_options = {
    environment             : "Development",
    local_storage_key       : "Cluster",
    plugin_navigation_class : ".navigation",
    plugin_wrapper_id       : "content-wrapper",
    headings                : ['.heading-first h1', '.heading-second h1'],
    input_types             : ['input', 'textarea'],
    info_iqns_class         : ".iqn",
    preview_iqn_class       : ".preview",
    limits                  : [ { min: 1224, items: 8 }, { min: 954, items: 6 }, { min: 624, items: 4 }, { min: 0, items: 2 } ],
    shop_local_storage_key  : "Shop",
};

var default_plugin_options = {
    containerID : "",
    first       : false,
    previous    : false,
    next        : false,
    last        : false,
    startPage   : 1,
    perPage     : 1,
    midRange    : 6,
    startRange  : 1,
    endRange    : 1,
    keyBrowse   : false,
    scrollBrowse: false,
    pause       : 0,
    clickStop   : true,
    delay       : 50,
    direction   : "auto",
    animation   : "fadeIn",
    links       : "title",
    fallback    : 1000,
    minHeight   : true,
    callback    : function(pages, items) {}
};

var Cluster = function(cluster_options, plugin_options) {

    var self = this;

    this.options = $.extend({}, default_cluster_options, cluster_options);

    this.plugin_options = $.extend({}, default_plugin_options, plugin_options);

    this.environment = this.options.environment;

    this.data_key = this.options.local_storage_key;

    this.shop_data_key = this.options.shop_local_storage_key;

    this.plugin_navigation_class = this.options.plugin_navigation_class;

    this.plugin_wrapper_id = this.options.plugin_wrapper_id;

    this.headings = this.options.headings;

    this.input_types = this.options.input_types;

    this.viewport = $(window);

    this.body = $('body');

    this.viewport_width = this.viewport.width();

    this.viewport_height = this.viewport.height();

    this.info_iqns_class = this.body.find(this.options.info_iqns_class);

    this.preview_iqn_class = this.body.find(this.options.preview_iqn_class);

    this.limits = this.options.limits;

    this.current_shop_page = this.options.current_shop_page;

    this.total_shop_pages = this.options.total_shop_pages;

    this.initiate_cluster(self.plugin_navigation_class, {
        containerID : self.plugin_wrapper_id,
        startPage : +(self.get_local_storage_data(self.data_key) || 1),
        callback : function(pages){
            self.set_local_storage_data(self.data_key, pages.current);
        }
    });

    this.inititate_shop();

    this.initiate_shop_touch_events();

};

Cluster.prototype.set_environment = function() {
    if(this.environment == "Development") {
        less.env = "development";
        less.watch();
    }
};

Cluster.prototype.set_local_storage_data = function(data_key, data_val) {
    return localStorage.setItem(data_key, data_val);
};

Cluster.prototype.get_local_storage_data = function(data_key) {
    return localStorage.getItem(data_key);
};

Cluster.prototype.initiate_scalable_text = function() {
    for(var i in this.headings) {
        $(this.headings[i]).fitText(1.6);
    }
};

Cluster.prototype.initiate_placeholder_support = function() {
    for(var i in this.input_types) {
        $(this.input_types[i]).placeholder();
    }
};

Cluster.prototype.initiate_iqn_selected_class = function() {
    if(this.viewport_width < 980) {
        $(this.info_iqns_class).each(function(index, element) {
            var iqn = $(element).parent();
            $(iqn).on('click', function() {
                if($(iqn).hasClass('selected')) {
                    $(iqn).removeClass('selected');
                } else {
                    $(iqn).addClass('selected');
                }
            });
        });
    }
};

Cluster.prototype.initiate_preview_action = function() {
    $(this.preview_iqn_class).each(function(index, element) {
        var data = $(element).attr('data-image-link');
        $(element).on('click', function(ev) {
            $.lightbox(data, {
                'modal'         : true,
                'autoresize'    : true
            });
            ev.preventDefault();
        });
    });
};

Cluster.prototype.initiate_plugin = function(plugin_navigation, plugin_options) {
    var options = $.extend({}, this.plugin_options, plugin_options);
    return $(plugin_navigation).jPages(options);
};

Cluster.prototype.initiate_shop_touch_events = function() {
    var self = this;
    return $("#shop-items-wrapper").hammer({prevent_default: true, drag_min_distance: Math.round(this.viewport_width * 0.1)}).bind("drag", function(ev) {
        var data = JSON.parse(self.get_local_storage_data(self.shop_data_key));
        if (ev.direction == "left") {
            var next_page = parseInt(data.current_page + 1);
            if(next_page > 0 && next_page <= data.total_pages) {
                $(".shop-items-navigation").jPages(next_page);
            }
        }
        if(ev.direction == "right") {
            var prev_page = parseInt(data.current_page - 1);
            if(prev_page > 0 && prev_page <= data.total_pages) {
                $(".shop-items-navigation").jPages(prev_page);
            }
        }
    });
}

Cluster.prototype.inititate_shop = function() {
    var self = this;
    for(var i = 0; i < this.limits.length; i++) {
        if(this.viewport_width >= this.limits[i].min) {
            this.initiate_plugin('.shop-items-navigation', {
                containerID : "shop-items-wrapper",
                perPage     : self.limits[i].items,
                midRange    : 8,
                animation   : "fadeIn",
                links       : "blank",
                keyBrowse   : true,
                callback    : function(pages) {
                    var data = {
                        current_page : pages.current,
                        total_pages  : pages.count
                    }
                    self.set_local_storage_data(self.shop_data_key, JSON.stringify(data));
                }
            });
            return false;
        }
    }
};

Cluster.prototype.initiate_cluster = function(plugin_navigation, plugin_options) {
    this.set_environment();
    this.initiate_scalable_text();
    this.initiate_placeholder_support();
    this.initiate_iqn_selected_class();
    this.initiate_preview_action();
    this.initiate_plugin(plugin_navigation, plugin_options);
};

var cluster = new Cluster();

}); 
```

还有我所说的错误，当您在**主页**上并导航到**商店**页面时，您会注意到插件的第二个实例没有激活，因为项目应该只有 8（如果屏幕的宽度是超过 1224px ），您应该可以使用键盘的左右箭头浏览，但您不能。

但是，如果您在**商店**页面上，请点击刷新，插件现在将在页面加载后激活。

所以，我想要一些帮助，跟踪错误，因为我还在学习 JavaScript，而且我对它不是很有经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:03:14.523

根据[jPages](https://github.com/luis-almeida/jPages/blob/master/js/jPages.js)源文件，发生这种情况是因为在*第二个*插件初始化插件无法找到`:visible`元素，因为它们被*第一个*插件初始化^(（第 60 行）)隐藏：

```
this._items = this._container.children(":visible"); 
```

要使用插件加载您的商店模块，`jPages`您需要在显示商店商品后初始化该插件。为此，您需要修改函数`callback`中的值`initiate_cluster`：

可以说*商店*页面索引是`4`：

```
Cluster.prototype.initiate_cluster = function(plugin_navigation, plugin_options) {
    // ... your code
    plugin_options.callback = function( pages ) {
        if( pages.current == 4 ) {
            this.inititate_shop();
        }
    };
    this.initiate_plugin(plugin_navigation, plugin_options);
}; 
```

并从类构造函数中删除`this.inititate_shop();`函数调用。`Cluster`

这应该有效。

或者您可以尝试交换插件调用，但我不确定：

```
// first we initiate shop
this.inititate_shop();

// then main site navigation
this.initiate_cluster(self.plugin_navigation_class, {
    containerID : self.plugin_wrapper_id,
    startPage : +(self.get_local_storage_data(self.data_key) || 1),
    callback : function(pages){
        self.set_local_storage_data(self.data_key, pages.current);
    }
}); 
```

# php - Symfony2：没有扩展加载 Buzz

> ID：10649394
> 
> 赞同：2
> 
> 时间：2012-05-18T08:41:31.027
> 
> 标签：php, curl, symfony, buzz

我在尝试在 Buzz 中为 Symfony2 使用 Curl 时遇到了一个问题（我终于设法安装了它，请参阅[这篇文章](https://stackoverflow.com/questions/10621949/symfony2-reinstall-issue)）。

我在我的捆绑包中使用它，并且我更新了 services.yml，添加了这些：

```
# cURL client for Buzz
buzz.client.curl:
class:  Buzz\Client\Curl
public: false
calls:
  - [setVerifyPeer, [false]]

# Buzz browser
buzz.browser:
    class:     Buzz\Browser
    arguments: ['@buzz.client.curl'] 
```

当我去检查我的项目页面时，这是我得到的错误：

```
InvalidArgumentException: There is no extension able to load the configuration for "buzz.client.curl" (in myBundle) Looked for namespace "buzz.client.curl", found none 
```

因此，据我了解，我必须在某处更改 Buzz 的命名空间声明之一。
但是有人知道什么，在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:14:59.673

好吧，我的错误，我只是没有为我的 yml 文件使用正确的格式。

这是服务的代码，以防万一有人遇到问题。想想 4 个空格，这样可以节省很多时间……

服务：

# Buzz 的 cURL 客户端

```
buzz.client.curl:
    class:  Buzz\Client\Curl
    public: false
    calls:
        - [setVerifyPeer, [false]] 
```

# 嗡嗡声浏览器

```
buzz.browser:
    class:     Buzz\Browser
    arguments: ['@buzz.client.curl'] 
```

# android - 想要在单个文本视图中有多种文本显示样式

> ID：10649398
> 
> 赞同：1
> 
> 时间：2012-05-18T08:41:55.233
> 
> 标签：android, xml, android-layout, styles

我正在开发一个 android 应用程序我想知道如何用粗体常规和几个斜体表示几个单词例如我有一个带有文本 HELLOO 的文本视图现在我想在文本视图中显示这样的文本

**地狱***哦*

请告诉我如何通过android中的样式来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:13:42.737

假设您有一个 TextView 即**etx**，请使用以下代码：

* * *

```
 final SpannableStringBuilder sb = new SpannableStringBuilder("HELLOO");

        final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text bold
        final StyleSpan iss = new StyleSpan(android.graphics.Typeface.ITALIC);Span to make text italic
        sb.setSpan(bss, 0, 4, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold 
        sb.setSpan(iss, 4, 6, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make last 2 characters Italic
        etx.setText(sb); 
```

* * *

使用这种方法的主要优点是您可以动态格式化文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T20:39:50.900

`<b>`已弃用。使用`<strong>`and`<em>`而不是`<i>`.

```
text1.setText(Html.fromHtml("<strong>bold text</strong> normal text <em>italic text</em> ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:57:09.130

如果您在 strings.xml 中有字符串，那么。

```
<string name="startup"><b><i>HELL</i></b><i>oo</i></string> 
```

你可以在里面使用 HTML 标签`<string> </string>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:02:59.790

如果你想让它加粗使用 b 标签。如果你想让它是斜体使用 i 标签。如果你想让一个单词加粗或斜体，把那个单词放在标签内。

```
 <resources> 
<string name="register"> <u><b><i>SignUp</i></b></u> </string>
</resources> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-18T08:57:14.057

```
String text="<html>"+"<b>"+"Hell"+"</b>"+"<i>"+"oo"+"</i>"+"</html>"; 
```

# selenium - 如何使用 Capybara 验证 Jquery 对话框上显示的文本

> ID：10649400
> 
> 赞同：1
> 
> 时间：2012-05-18T08:42:11.883
> 
> 标签：selenium, cucumber, capybara

我如何验证出现在 Jquery 对话框弹出框中的文本并单击该对话框上的“确定”按钮。我的框架正在使用带有**selenium webdriver的****黄瓜** **Capybara**。

# javascript - 如何检查字符串是否不是浮点数？

> ID：10649406
> 
> 赞同：2
> 
> 时间：2012-05-18T08:42:41.623
> 
> 标签：javascript

```
var num = "10.00";
if(!parseFloat(num)>=0)
{
    alert("NaN");
}
else
{
    alert("Number");
} 
```

我想检查一个值是否不是浮点数，但上面的代码总是返回`NaN`，有什么想法我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:46:26.397

`!parseFloat(num)`所以`false`你在比较`false >= 0`

你可以这样做：

```
if(! (parseFloat(num)>=0)) 
```

但这样做会更具可读性：

```
if(parseFloat(num) < 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T08:48:03.597

`parseFloat`返回一个 float 或`NaN`，但您正在对其应用布尔 NOT 运算符`!`，然后将其与另一个浮点进行比较。

您可能想要更多类似的东西：

```
var num = "10.0";
var notANumber = isNaN(parseFloat(num)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:47:38.173

因为`!`具有比 更高的优先级`>=`，所以您的代码确实

`!parseFloat(num)`这是`false`

然后

`>= 0`,`false`被强制转换为`0`, 并且`0 >= 0`为真, 因此`alert("NaN")`

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:55:01.233

```
function isFloat(value) {
  if(!val || (typeof val != "string" || val.constructor != String)) {
  return(false);
  }
  var isNumber = !isNaN(new Number(val));
     if(isNumber) {
        if(val.indexOf('.') != -1) {
           return(true);
        } else {
           return(false);
        }
     } else {
  return(false);
 }
} 
```

[参考](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/115310/float-value-checking)

# c - dup2，C 中的管道和叉子

> ID：10649407
> 
> 赞同：0
> 
> 时间：2012-05-18T08:42:43.960
> 
> 标签：c, unix, system-calls

我应该实现一个程序来模拟“ls -l | sort -n”的行为，我已经编写了我的代码，根据我的逻辑，一切都应该正常工作，但事实并非如此。在过去的几个小时里，我一直在尝试调试它，因此非常感谢任何额外的输入。这是代码：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>

int main(int argc, char *argv[])
{
    int fd[2];
    int errcheck;
    errcheck = pipe(fd);
    printf("Errcheck after pipe call: %d\n", errcheck);
    pid_t childpid;
    childpid=fork();
    if(childpid==0)
    {
        printf("Entering child\n");
        errcheck = dup2(fd[1], STDOUT_FILENO);
        printf("Errcheck after dup2 child: %d\n", errcheck);
        close(fd[0]);
        execl("bin/ls", "ls", "-l", NULL);
    }
    printf("Before sort call\n");
    errcheck = dup2(fd[0], STDIN_FILENO);
    printf("Errcheck after dup2 parent: %d\n", errcheck);
    close(fd[1]);
    execl("/usr/bin/sort", "sort", "-n", NULL);
} 
```

“进入孩子”后程序卡住了，我真的不明白为什么孩子的dup2调用没有完成......

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T02:37:14.450

是否有理由不使用 dirent 列出文件 -`opendir` `readdir`等等？或者这是学校的作业？如果它用于生产，请考虑使用 dirent.h 和 stat.h。

对于功课，你需要做什么取决于你的教授。如果是这样，请将其标记为作业。

# nginx - SSI 中的换行符

> ID：10649411
> 
> 赞同：1
> 
> 时间：2012-05-18T08:42:57.437
> 
> 标签：nginx, ssi

所以，我`.log`在 HTML 页面中包含一个文件

```
<!--#include file="/logs.access.log" --> 
```

它工作正常，除了一件事：日志后没有换行符。所以，我只有一长串日志。

阅读起来很烦人......它是否有解决方案在日志后自动添加换行符（如 a `tail`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:57:35.313

这可能是因为您的日志文件是纯文本，并且显示为不保留换行符的 html。尝试使用`<pre><!--#include file="/logs.access.log" --></pre>`，看看是否有帮助。

# ios - 一个 UIView 中有 2 个 UITableViews

> ID：10649412
> 
> 赞同：28
> 
> 时间：2012-05-18T08:42:59.980
> 
> 标签：ios, uitableview

我有一个`UIView`需要显示两个 UITableViews，但它们永远不会一起显示，通过使用`SegementedBar`你可以切换一个或另一个。

处理这个问题的最佳方法是什么？只需创建一个`Table View Controller`并更改数据源，或者创建 2 个`Table View Controllers`并在另一个可见时隐藏一个。

这 2 个表格将具有完全不同的布局和不同的自定义单元格。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-18T08:59:10.540

我会保留一个数据源和委托。

这意味着所有委托/数据源方法都变得更加复杂，但这意味着您可以保留 viewController 和 view 之间的一对一关系。

保留对每个表视图的引用

```
//vc.h
@property (nonatomic, weak) IBOutlet UITableView* firstTableView;
@property (nonatomic, weak) IBOutlet UITableView* secondTableView; 
```

在 datasource/delegate 方法中，您需要考虑这样一个事实，即该方法需要根据正在使用的 table view 表现出不同的行为。例如

```
//vc.m
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    ...

    if (tableView == self.firstTableView) {

        ...

    } else { // tableView == self.secondTableView

        ...
    }
}

return cell; 
```

}

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T09:29:12.117

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    ...

    if (tableView.tag == 1) {

        ...

    } else { // tableView == self.secondTableView

        ...
    }
} 
```

可以从 .xib 分配标签。所以不需要在 .h 文件中有 UITableVeiw 变量。.xib 中需要两个表视图

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T08:51:18.297

两种方法都有一些优点和缺点，但我个人更喜欢具有两个独立控制器的方法。

方法 1 - 创建一个 Table View Controller 并更改数据源

*   这种方法有助于避免额外和重复的代码。
*   使用这种内存管理就像只使用一个控制器一样好。（虽然这不是一个大问题，直到那时我们不会有很多数据。）
*   问题在于复杂性。

方法 2 - 2 表视图控制器

*   使用这种方法肯定会有额外和重复的代码。
*   但这样的复杂性较低。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-18T05:40:26.377

在我当前的应用程序中，我需要`UITableView`在一个单独的应用程序中有 4 个，我必须`UIViewController`一次显示单个表格，根据用户选择的选项卡，我添加了四个表格，因为它们都有不同的自定义单元格和功能，为了降低复杂性，我花了四个。

这样做的主要好处是，每次您不需要调用`reloadData`来更新单个表。我只需要正确处理表格的显示和隐藏流程。相信我，这看起来很酷。一点都不闪。

就我而言，我仅通过代码创建四个表。我创建了一个方法，该方法将根据我通过的标签返回一个表格。

我`cellForRowAtIndexPath`通过将代码分成不同的功能来保持尽可能小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T09:18:51.787

使用单独`UITableViewControllers`并交换视图。它的代码更少，复杂性更低，这是 Apple 使用**TabBar**的方式。

至于代码复杂度，真的没有。`UISegmentedControl`当' 的值发生变化时，您只需执行以下操作即可切换视图：

```
UIView *previousSuperview = myViewController1.view.superview;
myViewController2.view.frame = myViewController1.view.frame;
[myViewController1.view removeFromSuperview];
[previousSuperview addSubview:myViewController2.view]; 
```

或者，您可以设置相应视图的`hidden`属性。

# python - etree.ElementTree 解析 xml，然后构建一棵树，它是一种高效可搜索的数据结构吗？

> ID：10649414
> 
> 赞同：0
> 
> 时间：2012-05-18T08:43:17.573
> 
> 标签：python, xml-parsing, string-search

我有一个 XML 字符串

```
<tags>
   <person1>dave jones</person1>
   <person2>ron matthews</person2>
   <person3>sally van heerden</person3>
   <place>tygervalley</place>
   <ocassion>shopping</ocassion>
</tags> 
```

我想使用“Sally Van Heerden”或“Tygervalley”等搜索词来搜索这个 xml 字符串

使用正则表达式查找此字符串中的术语是否更快，或者 Python 的 find() 方法是否足够快？我也可以使用 python 的元素树 XML 解析器进行搜索，然后构建 XML 树然后搜索它，但我担心它会太慢。

以上三个哪个最快？还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:04:18.690

The answer will really depend on what you are going to do with the search results. The only case when you should even consider **not** using an XML parser is when you don't remotely care about the XML document structure.

If this is the case, you can try timing all three, but building a tree is then not necessary and can take too much time to compete with the substring search.

Time all three to see the difference on a typical file for your problem. For instance, on your small example file:

```
$ python -m timeit "any('tygervalley' in line for line in open('t.xml'))"
100000 loops, best of 3: 14.6 usec per loop

$ python -m timeit "import re" "for line in open('t.xml'):" "    re.findall('tygervalley', line)"
10000 loops, best of 3: 27.4 usec per loop

$ python -m timeit "from lxml.etree import parse" "tree = parse('t.xml')" "tree.xpath('//*[text()=\'tygervalley\']')"
10000 loops, best of 3: 133 usec per loop 
```

You can play around with the actual methods to call, there's always choice.

Edit: note how things change on a 100 times longer file:

```
$ python -m timeit "any('tygervalley' in line for line in open('t.xml'))"
100000 loops, best of 3: 20.8 usec per loop

$ python -m timeit "import re" "for line in open('t.xml'):" "    re.findall('tygervalley', line)"
1000 loops, best of 3: 252 usec per loop

$ python -m timeit "from lxml.etree import parse" "tree = parse('t.xml')" "tree.xpath('//*[text()=\'tygervalley\']')"
1000 loops, best of 3: 1.34 msec per loop 
```

Be careful interpreting the results :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:47:22.313

我尝试比较 regexp 和 lxml 对于不是大的 xml 文件，并且两者之间没有很大的差异。

# c# - Datagridview（焦点或更新）没有得到正确的数据

> ID：10649417
> 
> 赞同：0
> 
> 时间：2012-05-18T08:43:37.297
> 
> 标签：c#, datagridview, focus

使用 Csharp .NET4.0 和 ms Visual Studio 2010。

我有一个非常有问题的问题，至少可以说是把我烦死了。

我有一个 datagridview 显示最畅销零件的排行榜。该程序所做的是允许用户根据自己的知识和判断来改变联赛位置。

输入数字后，用户可以保存更新我的 MS SQL 本地服务器上的表的进度。但在保存信息之前，它会运行一个方法来检查输入信息的列中是否存在重复的数字。

如果它检测到任何重复，它将拒绝保存，并通知用户在另一个较小的 datagridview 中显示的部件名称。然后用户可以从这里选择显示的部分，它将自动导航并突出显示主数据网格视图，以便用户进行适当的更改。

现在问题如下，如果用户输入重复值，然后单击 datagridview 中的其他位置，然后单击保存，程序运行正确。

但是如果用户输入了一个重复的值并直接保存，那么它就会大错特错。基本上它会保存用户输入数据之前的数据，也不会显示任何重复的值。

我相信这是因为用户输入数据的单元格尚未更新。

如果有帮助，我可以提供一些代码。只是徘徊，如果这是一个常见修复的常见问题？

许多问候

代码：

```
private void saveMyProgressToolStripMenuItem_Click(object sender, EventArgs e)
    {
        DialogResult result2 = MessageBox.Show("Do you wish to save you progress?",
                                                "Important Question",
                                                MessageBoxButtons.YesNo);
        if (result2 == DialogResult.Yes)
        {
            CheckForDuplicate();
            if (dupi == true)
            {
                CountMyGrid();
                dupi = false;
            }
            else
            {
                Task t = new Task(() => SaveMyWorkI());
                t.Start();
                dupi = false;
            }
        }
    } 
```

上面的代码根据重复方法布尔切换检查是否可以保存。

```
public void CheckForDuplicate()
    {

            DataGridViewRowCollection coll = ParetoGrid.Rows;
            DataGridViewRowCollection colls = ParetoGrid.Rows;
            IList<String> listParts = new List<String>();
            int count = 0;
            foreach (DataGridViewRow item in coll)//379
            {
                foreach (DataGridViewRow items in colls)//143641
                {
                    count++;
                    if ((items.Cells["NewPareto"].Value != null) && (items.Cells["NewPareto"].Value != DBNull.Value))
                    {
                        if ((items.Cells["NewPareto"].Value != DBNull.Value) && (items.Cells["NewPareto"].Value != null) && (items.Cells["NewPareto"].Value.Equals(item.Cells["NewPareto"].Value)))
                        {
                            if ((items.Cells["Part"].Value != DBNull.Value) && (items.Cells["Part"].Value != null) && !(items.Cells["Part"].Value.Equals(item.Cells["Part"].Value)))
                            {
                                listParts.Add(items.Cells["Part"].Value.ToString());

                                dupi = true;
                            }
                        }
                    }
                }
            }

            MyErrorGrid.DataSource = listParts.Select(x => new { Part = x }).ToList();

    } 
```

如果您原谅对空类型的常量检查，这部分会循环检测任何重复项。

如果您需要更多代码，请询问并且很乐意提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:16:46.967

尝试应用

```
.Refresh() 
```

DataGridView 的函数。如果这不起作用，请尝试

```
.EndEdit() 
```

请注意，您应该在保存信息之前应用此权限。

# php - 数据透视表 PHP/MySQL

> ID：10649419
> 
> 赞同：2
> 
> 时间：2012-05-18T08:43:44.533
> 
> 标签：php, mysql, pivot-table

在 php/MySQL 中处理数据透视表的最佳方法是什么（或类似的东西）

我有一个返回信息如下的查询

```
id      eng     week        type                sourceid    userid

95304   AD      2012-01-02  Technical           744180      271332
95308   AD      2012-01-02  Non-Technical       744180      280198
96492   AD      2012-01-23  Non-Technical       1056672     283843
97998   AD      2012-01-09  Technical           1056672     284264
99608   AD      2012-01-16  Technical           1056672     283842
99680   AD      2012-01-02  Technical           1056672     284264
100781  AD      2012-01-23  Non-Technical       744180      280671 
```

而且我想用 PHP 构建一个报告，该报告按组计算，并带有一周开始的列标题。例如

```
week commencing: 2012-01-02    2012-01-09    2012-01-16    2012-01-23    2012-01-30
Total:           3             1             1             1             0
Technical:       2             1             1             0             0
Non-Technical:   1             0             0             1             0 
```

但是我不确定从哪里开始，因为标题是动态的，具体取决于报告的运行月份。

我知道如何传递当月的详细信息并检索 PHP 中的所有数据，但它当前输出在一列中，而不是能够分组并将其放入数组中。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:55:23.760

您可以使用子查询来执行此操作，然后生成和聚合这些数据。尝试这样的事情：

```
select week, 
    count(*) as total, 
    sum(technical) as technical, 
    sum(non_technical) as non_technical) 
from(
    select week, 
    case(type) when 'Technical' then 1 else 0 END as technical, 
    case(type) when 'Non-Technical' then 1 else 0 END as non_technical
) as data
GROUP BY week 
```

# internet-explorer - Google Maps Javascript V3.8 中引入的内存泄漏（在 IE 9 中观察到）

> ID：10649420
> 
> 赞同：1
> 
> 时间：2012-05-18T08:43:55.447
> 
> 标签：internet-explorer, memory-leaks, google-maps-api-3

我包含的工作示例代码显示了 IE 9 中的泄漏。（几分钟内 1 Gb）。当您将 V3.8 更改为 V3.7 时，不会发生此内存泄漏！！！所以我的猜测是它是在 v3.8 中引入的！该代码似乎在 Chrome/Firefox 中工作，但我正在开发一个 C# Winform 应用程序，并使用嵌入式 .NET webcontrol，一个围绕 IE 的 COM 包装器。已经尝试过 gecko .NET 组件，但这对我来说别无选择。

我被困在这里并且绝望，所以如果有人愿意提供解决方案......

谢谢罗伯

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <title>Memoryleak in IE</title>

      <style type="text/css">
            html
            {
            }
            body
            {
                margin: 0px;
                padding: 0px;
            }

        </style>
        <style type="text/css">
            .context
            {
                font-family: Arial, sans-serif;
                text-decoration: none;
                color: #4444ff;
                font-size: small;
            }
            a:hover div
            {
                background: #00eeee;
            }
        </style>

      <script src="https://maps.googleapis.com/maps/api/js?sensor=false&amp;v=3.8" type="text/javascript"></script>
      <script type="text/javascript">

         var coords = [
    -115.821139332819,51.2247937004413,
    -115.821139332819,51.2247937004413,
    -115.820783024602,51.2247102926052,
    -115.820783024602,51.2247102926052,
    -115.820327685708,51.2246117850904,
    -115.820327685708,51.2246117850904,
    -115.819759388578,51.2244962798047,
    -115.819759388578,51.2244962798047,
    -115.819290270032,51.2244074438906,
    -115.819290270032,51.2244074438906,
    -115.818926957722,51.2243299769159,
    -115.818926957722,51.2243299769159,
    -115.818338387318,51.2242059504634,
    -115.818338387318,51.2242059504634,
    -115.817977304212,51.2241249042188,
    -115.817977304212,51.2241249042188,
    -115.817599143301,51.224042310143,
    -115.817599143301,51.224042310143,
    -115.817134937747,51.2239589216431,
    -115.817134937747,51.2239589216431,
    -115.816536085049,51.2238583513406,
    -115.816536085049,51.2238583513406,
    -115.816082549208,51.2237586568853,
    -115.816082549208,51.2237586568853,
    -115.815700862212,51.2236505400057,
    -115.815700862212,51.2236505400057,
    -115.815357631111,51.223555251529,
    -115.815357631111,51.223555251529,
    -115.814809515585,51.2234021852219,
    -115.814809515585,51.2234021852219,
    -115.814355814815,51.2232968327074,
    -115.814355814815,51.2232968327074,
    -115.813999142875,51.2231965005283,
    -115.813999142875,51.2231965005283,
    -115.813647699181,51.2230910623849,
    -115.813647699181,51.2230910623849,
    -115.813026822773,51.2229353329219,
    -115.813026822773,51.2229353329219,
    -115.812582641159,51.2228335929039,
    -115.812582641159,51.2228335929039,
    -115.812013680777,51.2226994808324,
    -115.812013680777,51.2226994808324,
    -115.811661976828,51.2225955792611,
    -115.811661976828,51.2225955792611,
    -115.811254131518,51.2224819086399,
    -115.811254131518,51.2224819086399,
    -115.810894380211,51.2223965803553,
    -115.810894380211,51.2223965803553,
    -115.810314308135,51.2222515485398,
    -115.810314308135,51.2222515485398,
    -115.809965253975,51.2221524009482];

        var myPano = null;
        var mySVC  = null;
        var sv     = new google.maps.StreetViewService();
        var teller = 0;
        var tmr    = null;

        function startStreetviewMode(lat, lon)
        {
            try
            {
                var svPanoramaOptions = {
                    visible:          true,
                    disableDoubleClickZoom: true,
                    linksControl:     true,
                    addressControl:   true,
                    panControl:       true,
                    zoomControl:      false,
                    imageDateControl: false,
                    position:         new google.maps.LatLng(lat, lon),
                    pov: {
                         heading: 180,
                         pitch:   0,
                         zoom:    1
                         }
                    };

                myPano = new google.maps.StreetViewPanorama(document.getElementById("pano"), svPanoramaOptions);
                myPano.setVisible(true);

                svPanoramaOptions = null;
            }
            catch (err)
            {
                alert("startStreetviewMode, " + err.source + ':' + err.message);
            }
       }

       function SVPanoInitialized(SVLocation)
       {
       }

       function handleSVError(errorCode)
       {
       }

       function showStreet(lat, lng)
       {
           try
           {
               sv.getPanoramaByLocation(new google.maps.LatLng(lat, lng), 50, function (data, status)
               {
                   if (status == google.maps.StreetViewStatus.OK)
                   {
                       myPano.setPov({
                           heading: 180,
                           pitch:   10,
                           zoom:    1
                       });
                       myPano.setPano(data.location.pano);
                       myPano.setVisible(true);
                       data   = null;
                       status = null;
                   }
                   else
                   {
                       handleSVError(status);
                   }
               });
            }
            catch (err)
            {
                alert("showStreet, " + err.source + ':' + err.message);
            }
        }

        function showit()
        {
            // Keep looping through array
            teller = teller + 2;
            if (teller > 80) teller = 0;

            // Show streetview to demonstrate leak
            showStreet(coords[teller + 1], coords[teller]);
        }

        function init()
        {
            startStreetviewMode(coords[teller + 1], coords[teller]);
          window.setInterval(this.showit, 750);
     }
    </script>
    </head>
    <body onload="init()">
        <div id="pano" style="width: 1024px; height: 768px" />
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:09:21.903

已知无作用域（和全局作用域）变量会导致内存泄漏。我建议您确保所有变量都正确地限定为函数局部变量。

# ide - 维护一个 cmake 项目（来自 Eclipse CDT4）

> ID：10649423
> 
> 赞同：0
> 
> 时间：2012-05-18T08:43:59.130
> 
> 标签：ide, import, cmake, eclipse-cdt

我在使用 cmake (2.8.7) 和 Eclipse + CDT (3.7.1) 时遇到了一些困难。我正在使用 CMakeBuilder (http://www.cmakebuilder.com/)，我通过这里的搜索功能找到了它。其实我想，就这样吧。

*   问题是它**也不**提供任何导入功能：所以我最初需要 cmake 来生成 Eclipse CDT4 Makefile，这需要我维护两个独立的构建系统并处理副本。一种用于部署，一种用于开发。
*   此外，我需要将我的更改逐个文件复制到原始项目中，因为我只能处理 cmake 与 Makefile 一起生成的副本。最后：两倍的工作。每次仔细检查集成。

有什么可以直接从 Eclipse（或另一个健全的 IDE）处理 cmake 项目的吗？主要是我需要良好的 C++ 编辑（非常大的库集，所以路径是一个主要问题，cmake 在每个平台上搜索这些）。我可以自己维护 cmake，但 Eclipse（和其他 IDE）缺少有用的导入设置。不过一些IDE会很好。;)

最好的，马吕斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:31:41.480

我记得[KDevelop4](http://kdevelop.org/)有原生支持。另一方面：为什么不`CMakeLists.txt`直接编辑为一个简单的脚本（来自编辑器*）并使用[官方 GUI](http://cmake.org/)？我没有将 Eclipse 与 CMake 一起使用，但在 Visual Studio 中，解决方案是在编辑任何项目或解决方案`CMakeLists.txt`文件后自动生成的。我也希望 Eclipse 有类似的东西。

[Eclipse CDT4 生成器](http://www.cmake.org/Wiki/Eclipse_CDT4_Generator)

[更多信息。](http://www.cmake.org/Wiki/CMake_Editors_Support)

*：[Notepad++](http://notepad-plus-plus.org/)具有 CMake 文件的高亮显示。

# javascript - 定义数组的小数

> ID：10649428
> 
> 赞同：1
> 
> 时间：2012-05-18T08:44:28.463
> 
> 标签：javascript

我有 2 个函数，第一个函数生成一个二维数组，第二个函数定义一个数组减去最后一行和最后一列。但是它不起作用。代码如下：

```
function calcDet () {   
    var A = [];     //generates the array
    for (var i = 0; i < k; i++) {
        A[i] = [];
        for (var j = 0; j < k; j++) {   
            var id = "A" + (i + 1) + (j + 1);                   
            A[i][j] =  parseFloat(document.getElementById(id).value);               
        }
     }   
     return (A); 
}
function returnDet() {            
    var s;
    var A = calcDet();
    var smaller=[];                
    for (var i=0;i<k-1;i++) {
        smaller[i]=A[i]             
        for (var j=0;j<k-1;j++) {
            smaller[i][j]=A[i][j];
        }
    }
    alert (smaller);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:57:13.563

您的代码有未定义的变量：“k”似乎在两个函数中突然出现

行 var id = "A" + (i + 1) + (j + 1); 将为 i 和 j 的（某些）不同变体（[i = 11 and j = 1] == [i = 1 and j = 11]）生成相同的 id，这可能会导致进一步的错误

如果您提到您遇到的错误，它总是很有用 - 我希望您的脚本根本不会像它们一样运行......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T08:58:16.500

您的变量`k`（数组的长度）在任何地方都没有定义。它应该抛出一个错误来说明这一点。

你的`returnDet`函数有错误。您首先创建数组`smaller`，然后用“二级”数组填充它`A`：

```
 smaller[i]=A[i]; 
```

之后，您将每个（除了最后一个）值`smaller[i]`设置为它们已经拥有的值：

```
 for (var j=0;j<k-1;j++) {
        smaller[i][j]=A[i][j];
    } 
```

然而，`smaller[i][k-1]`（最后一个，你不想要的）仍然存在于数组中，因为两者都`smaller[i]`指向`A[i]`同一个对象。你想做的是：

```
function returnDet() {   
    var A = calcDet();
    var smaller = [];                
    for (var i=0; i<A.length-1; i++)
        smaller[i] = A[i].slice(0, -1);
    return smaller;
}
alert(returnDet()); 
```

[`Array.slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)复制数组中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:24:14.367

使用内置语言功能使代码更易于编写和理解，也更高效。

```
function trim (arr, r, c) {
  // Return a new array omitting the last r rows and c columns
  //    of a two dimensional array arr
  //    if not specified r and c default to 1

  arr = arr.slice (0, -(r || 1)); // remove last r rows
  arr.forEach (function (v, i, a) { a[i] = v.slice (0, -(c || 1)); });
  return arr;
}

[JSON.stringify (trim ([[11, 12, 13], [21, 22, 23], [31, 32, 33]])),
 JSON.stringify (trim ([[11, 12, 13], [21, 22, 23], [31, 32, 33]], 1, 2)),
 JSON.stringify (trim ([[11, 12, 13], [21, 22, 23], [31, 32, 33]], 2, 1))]

/* Displays on JS console :
  ["[[11,12],[21,22]]", "[[11],[21]]", "[[11,12]]"]
*/ 
```

# tcpdump - Tcpdump 在 vlan 中不起作用

> ID：10649429
> 
> 赞同：2
> 
> 时间：2012-05-18T08:44:32.200
> 
> 标签：tcpdump

我从 vlan 捕获了一个 pcap 文件。我想用 Tcpdump 从该文件中过滤掉一些数据包，但它不起作用。

是因为tcpdump不支持vlan吗？因为它适用于在普通以太网中捕获的 pcap 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:02:37.997

如果数据包包含 802.1q vlan 标签，您可以执行以下操作 -

tcpdump -s0 -nnpi eth0 vlan 100

其中 100 是 vlan id。

您必须小心将 vlan 关键字作为 BPF 过滤器（与其他过滤器组合时），因为它将过滤器向右移动 4 个字节，请参见此处 - [http://www.christian-rossow.de/文章/tcpdump_filter_mixed_tagged_and_untagged_VLAN_traffic.php](http://www.christian-rossow.de/articles/tcpdump_filter_mixed_tagged_and_untagged_VLAN_traffic.php)。

您还可以使用以太网标头的过滤器 - 此链接完美地描述了解决方案和潜在问题 -

[https://serverfault.com/questions/196250/tcpdump-capture-one-of-several-vlans](https://serverfault.com/questions/196250/tcpdump-capture-one-of-several-vlans)。

# mysql - SQL 和 HQL 从两个表中检索数据

> ID：10649433
> 
> 赞同：0
> 
> 时间：2012-05-18T08:44:56.337
> 
> 标签：mysql, sql, hql

我在 Mysql 中有两个表。

```
message -> msg_id(pk) and message(varchar)
track_record -> tr_id(pk), msg_id (foreign key), object_id (to whom the message is sent), profile_id(who sent the message) 
```

现在我想创建一个查询，它给我消息和给定 object_id 的发件人资料 ID。

例如说我有object_id 1。

现在我想查看发送给 id 为 1 的用户的所有消息。

编辑答案以添加我尝试过的查询

```
SELECT m.message, u.profile_profile_id FROm `message` as m, `user_track_record` as u 
WHERE msg_id IN 
      (SELECT message_msg_id FROM user_track_record WHERE object_profile_id = 1) 
      and u.profile_profile_id IN 
      (SELECT profile_profile_id from `user_track_record` WHERE object_profile_id = 1) 
```

想要在 SQL 和 HQL 中执行此操作。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:40:34.477

您的 SQL 查询过于复杂。

从简单的事情开始：

选择发送给用户 1 的所有 track_records：

```
select tr.* from track_record tr where tr.object_id = 1 
```

现在您希望将消息链接到跟踪记录。这是使用连接完成的：

```
select tr.*, m.* from track_record tr 
inner join message m on m.msg_id = tr.msg_id
where tr.object_id = 1 
```

现在您只需要发件人的 ID 和邮件正文：

```
select tr.profile_id, m.message 
from track_record tr 
inner join message m on m.msg_id = tr.msg_id
where tr.object_id = 1 
```

在 HQL 中，查询几乎相同。您有一个 Message 实体和一个 TrackRecord 实体。TrackRecord 与 Message 具有多对一关联。它还与发送者和接收者具有多对一关联

```
select tr.sender.id, m.message
from TrackRecord tr
inner join tr.message m
where tr.receiver.id = 1 
```

# node.js - 如何使用 node.js 将图片和文本从一个文件动态复制到另一个文件中

> ID：10649437
> 
> 赞同：0
> 
> 时间：2012-05-18T08:45:50.267
> 
> 标签：node.js

假设我有两个文件 a_b_c_d.txt 和 e_f_g_h.png S，在运行时，即通过使用命令提示符，我必须在 a.txt 内的 d 文件夹内的 c 文件夹内创建 b 文件夹，对于另一个文件 f-> g->h->e.png 我在 a 中有一些文本，在 epng 中有一些图像。.所以，我怎样才能从那些现有文件中获取值到创建的文件中。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:04:34.400

You can find all the file system operations inside the fs module. [http://nodejs.org/api/fs.html](http://nodejs.org/api/fs.html)

But like tapan says if you need to do complex synchronous execution that manipulates the file system something like Bash will be a lot better suited for that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:25:44.420

因此，如果我对您的理解正确，您希望在某个文件夹中获取一个名为“a_b_c_d.txt”的文件，并将其移动到嵌套文件夹中，如下所示：

```
 ./a_b_c_d.txt -> ./b/c/d/a.txt 
```

一般的解决方案是：

1.  如果文件名[`process.argv`](http://nodejs.org/api/process.html#process_process_argv)不同，请使用它。例如，如果您将文件作为参数提供给节点，例如 `node move.js "a_b_c_d.txt"`，参数“a_b_c_d.txt”将在 argv 数组中。
2.  [使用字符串](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String#Methods)和[数组方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#Methods_2)的组合处理文件名。
    *   [`__dirname`](http://nodejs.org/api/globals.html#globals_dirname)如果需要，节点当前目录存储在全局变量中。
    *   [`split(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)您可以使用字符串的方法将扩展名与路径的其余部分分开。对于上述参数，`split('.')`将导致数组`['a_b_c_d', 'txt']`
    *   然后，您可以`'a_b_c_d'`使用拆分`'_'`，并使用各种数组操作将文件名`'a'` 从数组中提取出来，这样您就可以将路径`['b', 'c', 'd']` 、文件名和扩展名留在它们自己的变量中。
3.  在路径数组上使用[`fs.mkdirSync(...)`](http://nodejs.org/api/fs.html#fs_fs_mkdirsync_path_mode)以创建每个嵌套文件夹，从`b`（例如使用数组的[`forEach(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)方法）开始。您也可以使用异步`fs.mkdir(...)`和供应回调，但在这种情况下同步版本更容易。
4.  最后使用[`fs.renameSync(...)`](http://nodejs.org/api/fs.html#fs_fs_renamesync_path1_path2)移动`./a_b_c_d.txt`到`./b/c/d/a.txt`。

如您所见，python 或 bash（如 tapan 建议的那样）对于此用例可能会更简单，但如果由于某种原因您*必须*使用 node，上述建议有望足以让您入门。

# c# - LINQ：根据参数对列表进行排序

> ID：10649439
> 
> 赞同：1
> 
> 时间：2012-05-18T08:45:56.880
> 
> 标签：c#, sorting, ienumerable, linq-to-objects

我有一个 LINQ 对象查询来选择所有 20 岁以上的人

```
IEnumerable<Object> result = null;
result = (from person in AllPersons.ToList()
          where  person.age > 20
                  select new
                  {
                      FirstName= person.FirstName,
                      LastName= person.LastName,
                      Email= person.Email,
                      PhoneNumber= person.PhoneNumber

                  });
return result; 
```

我有一个参数`string SortProperty`，我想用它来根据属性对结果进行排序。

例如，如果`SortProperty="FirstName"`我想根据名字对结果进行排序。

我尝试执行以下操作：

```
return result.OrderBy(x => x.GetType().GetProperty(SortProperty)); 
```

但它没有用

知道怎么做吗？

PS：我不想测试所有可能性，并在每个可能性上做一个 if-else 或一个案例切换。我正在寻找一种有效的方法来做到这一点

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:51:02.510

查看动态 Linq 扩展库...

它具有接受`string`s 而不是属性的扩展方法。

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

既然你`SortProperty`已经是`string`你可以做的

```
var result = (from person in AllPersons.ToList()
              where  person.age > 20
              select new
                     {
                        FirstName= person.FirstName,
                        LastName= person.LastName,
                        Email= person.Email,
                        PhoneNumber= person.PhoneNumber
                     }
              ).OrderBy(SortProperty);

return result; 
```

此外，根据具体情况，通过调用直到结束`AllPersons`来枚举它可能没有意义。`ToList()`例如

```
var result = (from person in AllPersons
             ...
             ).OrderBy(SortProperty).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:56:56.947

尝试

```
return result.OrderBy(x => x.GetType().GetProperty(SortProperty).GetValue(x, null)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:52:27.963

```
return result.OrderBy( x => TypeHelper.GetPropertyValue( x, sortProperty ) )
           .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:25:55.837

我正在使用这样的东西：

```
var sortExpression = @"A,C";
var expressions = sortExpression.Split(new[] { ',' });

var cmpPredicates = new Dictionary<string, Func<Person, Person, int>>(3);
cmpPredicates.Add(@"A", (x, y) => x.A.CompareTo(y.A));
cmpPredicates.Add(@"B", (x, y) => x.B.CompareTo(y.B));
cmpPredicates.Add(@"C", (x, y) => x.C.CompareTo(y.C));
cmpPredicates.Add(@"Default", (x, y) => x.Id.CompareTo(y.Id));

var currentPredicates = new Func<Person, Person, int>[expressions.Length + 1];
for (int i = 0; i < expressions.Length; i++)
{
    currentPredicates[i] = cmpPredicates[expressions[i]];
}
// Default sort order
currentPredicates[currentPredicates.Length - 1] = cmpPredicates[@"Default"];

persons.Sort((x, y) =>
                {
                    var cmp = 0;

                    var index = 0;
                    while (cmp == 0 && index < currentPredicates.Length)
                    {
                        cmp = currentPredicates[index++](x, y);
                    }

                    return cmp;
                }); 
```

其中 Person 类具有以下定义

```
public class Person
    {
        public string A { get; set; }
        public string B { get; set; }
        public string C { get; set; }

        public long Id { get; set; }

        public Person()
        {
            this.A = string.Empty;
            this.B = string.Empty;
            this.C = string.Empty;
        }
    } 
```

主要好处是**多属性支持**。用户可以提供额外的检查（重复和存在和谓词限制）。

# c# - 如何将字节转换为字符，例如 1 -> '1'？

> ID：10649440
> 
> 赞同：2
> 
> 时间：2012-05-18T08:46:09.813
> 
> 标签：c#, char, byte

如何将字节转换为字符？我的意思不是 ASCII 表示。我有一个类型的变量，`byte`并希望它作为一个字符。

我只想进行从字节到字符的转换：
0 ->'0'
1 ->'1'
2 ->'2'
3 ->'3'
4 ->'4'
5 ->'5'
6 ->' 6'
7 ->'7'
8 ->'8'
9 ->'9'

`(char)1`并且`Convert.ToChar(1)`不工作。他们的结果是`''`因为他们认为`1`是ASCII码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T08:47:59.297

号码`.ToString();`

```
one.ToString(); // one.ToString()[0] - first char -'1'
two.ToString(); // two.ToString()[0] - first char -'2' 
```

**请注意，您不能真正将 a 转换`byte`为 a`char`**
`char`是一个字符，而 byte 甚至可以是三位数的值！

* * *

如果你想使用`LINQ`并且你确定字节不会超过一位（10+）你可以使用这个：

```
number.ToString().Single(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T08:47:31.243

简单地使用`variable.ToString()`就足够了。如果您想花哨，请`0`在转换之前将 的 ASCII 代码添加到变量中：

```
Convert.ToChar(variable + Convert.ToByte('0')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T08:50:41.310

使用它进行转换。

```
(char)(mybyte + 48); 
```

其中`mybyte`= 0 或 1 等等

**或者**

```
Convert.ToChar(1 + 48); // specific case for 1 
```

虽然其他人已经给出了解决方案，但我会告诉你为什么你的`(char)1`和`Convert.ToChar(1)`不工作。

当您将字节 1 转换为 char 时，它会将其`1`作为一个`ASCII`值。

**现在`ASCII of 1 != 1`。**

在其中添加 48 因为 ASCII 为 1 == 1 + 48`。0、2等类似情况。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T08:49:07.610

假设你有变量`byte x;` 只需使用`(char)(x + '0')`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T08:47:54.437

使用 Convert.ToString() 来执行此操作。

# c - 无法从共享对象映射段：资源暂时不可用

> ID：10649445
> 
> 赞同：0
> 
> 时间：2012-05-18T08:46:24.110
> 
> 标签：c, memory, dlopen

在 Linux x86_64 上加载共享库时我得到

`dlopen error: "FILENAME" failed to map segment from shared object: Resource temporarily unavailable`

这台机器安装了 48 GiB 的主机内存，没有其他用户登录。所以，它可能不是因为内存不足。

我加载了几十个共享库。

代码就像（非常减少的设置）。是`mlockall`的，是故意的：

```
#if _POSIX_MEMLOCK > 0
#warning "POSIX_MEMLOCK available" 
#else
#error "POSIX_MEMLOCK needed. Aborting"
#endif

int main()
{
  if (mlockall(MCL_FUTURE)) {
    printf("error page-locking\n");
    exit(1);
  }

  void *handle;
  handle = dlopen( "filename.so" ,  RTLD_LAZY);

} 
```

页面锁定还有其他限制吗？

# php - PHP邮件主题中的阿拉伯符号

> ID：10649446
> 
> 赞同：1
> 
> 时间：2012-05-18T08:46:24.570
> 
> 标签：php, encoding, sendmail, arabic

在其中一个项目中，我需要用波斯语（阿拉伯语）发送一封信。至于消息的正文，我正在将阿拉伯符号转换为 ASCII 代码，这就像一个魅力。问题出在主题领域。无论我尝试设置什么编码，我总是得到问号而不是文本。有人可以帮我解决这个问题吗？这是我的代码：

```
$subject = '=?utf-8?B?'.base64_encode(mb_convert_encoding('انصراف از دریافت پیام های اطلاع رسانی', "UTF-8","US-ASCII")).'?='; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:50:38.177

尝试这个

```
mb_internal_encoding("UTF-8");

$subject_evernote = mb_encode_mimeheader("العربية"); 
```

问候

# objective-c - iOS - Facebook Connect 注销不删除登录详细信息？

> ID：10649450
> 
> 赞同：6
> 
> 时间：2012-05-18T08:46:45.303
> 
> 标签：objective-c, ios, facebook

我在另一个问题相对较少的项目上使用了 Facebook Connect，但是在我当前的项目中，似乎当我调用`[facebook logout];`它时并没有删除用户的详细信息。如果我然后重新启动应用程序，我在 didFinishLaunchingWithOptions 函数中有以下内容：

```
facebook = [[Facebook alloc] initWithAppId:@"XXXXXXXXXXXXX" andDelegate:self];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if([defaults objectForKey:@"FBAccessTokenKey"]
   && [defaults objectForKey:@"FBExpirationDateKey"]){
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];

}

    NSLog(@"startup login");
    [self loginToFacebook];//attempt to login automatically on startup 
```

我的 loginToFacebook 函数是这样的：

```
- (void)loginToFacebook
{
    NSLog(@"Logging into facebook");
    //set up facebook and login in automatically if possible
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if([defaults objectForKey:@"FBAccessTokenKey"]
       && [defaults objectForKey:@"FBExpirationDateKey"]){
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];

    }

    if (![facebook isSessionValid]){

        //get permissions that user will need to agree to us using
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_likes",@"read_friendlists",@"offline_access", @"publish_stream",
                            nil];
        //authorise our login
        [facebook authorize:permissions];
        [permissions release];
    }
    else
    {
        [facebook authorize:nil];
    }
} 
```

就我而言，这次应该提示我使用我的电子邮件和密码登录。我主要使用模拟器，所以 Facebook 应用程序本身不是原因，在 Facebook.h 类中我已经改变了

```
[self authorizeWithFBAppAuth:NO safariAuth:YES]; 
```

至

```
[self authorizeWithFBAppAuth:NO safariAuth:NO]; 
```

然而，Facebook 窗口会短暂闪烁并消失，正如我已经登录时所期望的那样。然后它会从我之前的登录详细信息中加载我的 ID、姓名、朋友列表等。我再也不可能更改用户了！我应该补充一点，我有以下代码在“注销”上相应地打印：

```
- (void)fbDidLogout{
    NSLog(@"Logged out of facebook");
} 
```

...当 [facebook logout] 被调用时打印到控制台。我也有正确的 url 方案，所以那里没有问题。

正如我所说，我已经在另一个应用程序上运行了这个，但我看不出这次我可以忽略什么。我欢迎任何建议，因为我怀疑这是非常简单的事情。

编辑：我刚刚在设备上对其进行了测试，尝试登录 Facebook 会导致应用程序崩溃。我怀疑这是因为它试图使用“存储的”信息登录，但由于我还没有登录设备，所以该信息不存在。我仍在调查，但如果有人能看到明显的缺陷，我将不胜感激。

Edit2：我尝试使用 safecase 的示例删除 cookie。我还在 a) didFinishLaunchingWithOptions 和 b) fbDidLogout 期间打印出所有 cookie，我得到以下信息：

a) `2012-05-18 10:40:40.665 MyApp[15545:17003] ("",

```
"<NSHTTPCookie version:0 name:\"c_user\" value:\"634361620\" expiresDate:2012-06-17 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:TRUE>",
"<NSHTTPCookie version:0 name:\"csm\" value:\"2\" expiresDate:2012-06-17 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:FALSE>",
"<NSHTTPCookie version:0 name:\"datr\" value:\"gxe2T8ZyBzMGb5w3LS29Q0kJ\" expiresDate:2014-05-18 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:FALSE>",
"<NSHTTPCookie version:0 name:\"locale\" value:\"en_US\" expiresDate:2012-05-25 09:36:43 +0000 created:2012-05-18 09:36:44 +0000 (3.59027e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:FALSE>",
"<NSHTTPCookie version:0 name:\"lu\" value:\"RgayA7CMIlsAl-lOD2-Y-O3g\" expiresDate:2014-05-18 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:FALSE>",
"<NSHTTPCookie version:0 name:\"m_user\" value:\"0%3A0%3A0%3A0%3Av_1%2Cajax_1%2Cwidth_320%2Cpxr_1%2Cgps_1%3A1337333673%3A2\" expiresDate:2012-08-16 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:FALSE>",
"<NSHTTPCookie version:0 name:\"s\" value:\"Aa4WdKU-oOFathmK\" expiresDate:2012-06-17 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:TRUE>",
"<NSHTTPCookie version:0 name:\"xs\" value:\"125%3AFFIWXjAXDXUMmw%3A2%3A1337333673\" expiresDate:2012-06-17 09:34:33 +0000 created:2012-05-18 09:34:34 +0000 (3.59026e+08) sessionOnly:FALSE domain:\".facebook.com\" path:\"/\" isSecure:TRUE>" 
```

)`

b) `2012-05-18 10:41:16.530 MyApp[15545:17003] ( )`

由于它变为空，我认为它们已被删除。但是在重新打开应用程序时，它们又都在那里了。

Edit3：我发现解决此问题的唯一方法是在应用程序打开后立即删除所有 cookie，但这意味着用户每次都必须登录，即使他们在上次打开应用程序时让自己保持登录状态。目前这是一个临时修复，我仍然不确定为什么它不能正常工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T09:10:59.537

当用户单击注销并删除存储在 facebook 的 userdefault 中的所有密钥时，您提供此方法

```
- (void)fbDidLogout
{
  NSLog(@"Logged out of facebook");
  NSHTTPCookie *cookie;
   NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
   for (cookie in [storage cookies])
   {
       NSString* domainName = [cookie domain];
       NSRange domainRange = [domainName rangeOfString:@"facebook"];
       if(domainRange.length > 0)
       {
           [storage deleteCookie:cookie];
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:25:44.750

注意：除了 FB 应用程序在其中存储登录信息外，`NSUserDefaults`它还将登录信息存储在`NSHTTPCookieStorage`using name**`m_user`**中。您可以删除此记录以使 FB 再次询问您的登录信息。

希望这些信息对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:57:29.463

[appDelegate.session closeAndClearTokenInformation];

只是那行代码，帮助我清除了我的令牌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T08:19:27.590

```
 [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"FBAccessTokenKey"];

[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"FBExpirationDateKey"]; 
```

# c# - 如何将复选框映射到 MVC 模型成员？

> ID：10649454
> 
> 赞同：14
> 
> 时间：2012-05-18T08:47:14.977
> 
> 标签：c#, .net, asp.net-mvc, iis, model

我有一个 MVC 视图

```
<%@ Page Language="C#" MasterPageFile="PathToMaster" Inherits="System.Web.Mvc.ViewPage<ModelData>" %> 
```

我有一个带有 HTML 标记的表单，用于一组复选框：

```
<label for="MyCheckbox">Your choice</label>
<input type="checkbox" id="Option1" class="checkbox" name="MyCheckbox" value="Option one" />
<label for="Option1">Option one</label><br />
<input type="checkbox" id="Option2" class="checkbox" name="MyCheckbox" value="Option two" />
<label for="Option2">Option two</label><br /> 
```

我有一个控制器-动作对

```
class MyController : Controller {
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult RequestStuff( ModelData data )
    {
    }
} 
```

并在提交表单时调用该操作。

如何将复选框映射到`ModelData`（以及我必须添加到的成员`ModelData`）的成员上，以便在提交表单时`data`存储有关选中哪些复选框的信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T09:05:25.133

好的，这将适用于 MVC3，但是 - 除了语法更改 - 也应该在 MVC2 中工作。方法基本相同。

首先，你应该准备一个合适的（视图）模型

```
public class MyViewModel
{
    [DisplayName("Option 1")]
    public bool Option1 { get; set; }

    [DisplayName("Option 2")]
    public bool Option2 { get; set; }
} 
```

然后将此模型传递给您正在显示的视图（控制器）：

```
public ActionResult EditMyForm()
{
    var viewModel = new MyViewModel()
    return View(viewModel);
} 
```

形式：

```
@model MyViewModel
@using( Html.BeginForm())
{
    @Html.Label("Your choice")

    @Html.LabelFor(model => model.Option1) // here the 'LabelFor' will show you the name you set with DisplayName attribute
    @Html.CheckBoxFor(model => model.Option1)

    @Html.LabelFor(model => model.Option2)
    @Html.CheckBoxFor(model => model.Option2)
    <p>
        <input type="submit" value="Submit"/>
    </p>
} 
```

现在这里的 HTML 助手（所有的`CheckBoxFor`,`LabelFor`等`EditorFor`）允许将数据绑定到模型属性。

现在请注意，`EditorFor`当属性为类型`bool`时，视图中的复选框也会给您。:)

然后，当您提交给控制器时，它将自动绑定值：

```
[HttpPost]
public ActionResult EditMyForm(MyViewModel viewModel)
{
    //And here the view model's items will be set to true/false, depending what you checked.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:13:15.370

首先`SelectList`为选项定义。这将仅用于呈现复选框

```
 public IList<SelectListItem> OptionsSelectList { get; set; } 
```

然后，您定义的模型将在发布后保留单个选择的选项的值

```
public class ChooseOptionViewModel
{
    public int OptionIdentifier { get; set; } //name or id
    public bool HasBeenChosen { get; set; } //this is mapped to checkbox
} 
```

然后 IList 中的这些选项`ModelData`

```
public IList<ChooseOptionViewModel> Options { get; set; } 
```

最后，观点

```
 @for (int i = 0; i < Model.OptionsSelectList.Count(); i++)
    {
        <tr>
            <td class="hidden">
                @Html.Hidden("Options[" + i + "].OptionIdentifier", Model.OptionsSelectList[i].Value)
            </td>
            <td>
                @Model.OptionsSelectList[i].Text
            </td>
            <td>
                @Html.CheckBox("Options[" + i + "].HasBeenChosen", Model.Options != null && Model.Options.Any(x => x.OptionIdentifier.ToString().Equals(Model.OptionsSelectList[i].Value) && x.HasBeenChosen))
            </td>
        </tr>
    } 
```

发布后，您只需检查`Options.Where(x => x.HasBeenChosen)`

这是全功能的，它允许您在发生验证错误等时重新显示视图。这似乎有点复杂，但我没有想出比这更好的解决方案。

# jsf - 出现错误时显示对话框

> ID：10649472
> 
> 赞同：2
> 
> 时间：2012-05-18T08:48:48.337
> 
> 标签：jsf, primefaces

我在 JBoss AS 7.1 上使用 JSF 和 PrimeFaces 3.2。

问题：我无法将验证结果（不是常规的 JSF 验证！）从后端移交给前端。

我有一个绑定到实体的表单，当单击保存按钮时，我想对实体进行一些验证：

```
<p:growl id=saveSuccessDialog" />

<p:dialog widgetVar="verificationDialog" modal="true"
    header="#{msg['dialog.title.verificationError']}" resizable="false">
    <h:form id="verificationErrorForm">
        <h:outputText value="#{verificationResult.problemDescription}" />
    </h:form>
</p:dialog>

<h:form>
...some fields...
<p:commandButton
    actionListener="#{adminBean.saveObject}"
    value="Save" icon="ui-icon-check"
    onerror="verificationDialog.show();"
    update=":verificationErrorForm :saveSuccessDialog" />
</h:form> 
```

现在，bean 的动作是这样的：

```
public void saveObject(ActionEvent event) {
    this.verifyObject();
    if (verificationResult.isValidConfiguration()) {
        FacesContext.getCurrentInstance().addMessage("Object successfully saved", new FacesMessage("Saved")); // this is correctly shown in the growl
        objectDao.save(this.sessionBean.getSelectedObject());
    } else {
        FacesContext.getCurrentInstance().getExternalContext().setResponseStatus(500);
    }
} 
```

和验证结果：

```
@Named
@ConversationScoped
public class VerificationResult implements Serializable {
    private String problemDescription; // with get/set
    ... some more information about the problem here ...
} 
```

我希望，意图很明确：当用户单击“保存”时，验证将运行（有效），如果验证失败，应弹出一个对话框，其中包含其他信息。如果验证成功，则会出现“保存成功”的咆哮声。这也有效。

但是如果显示验证错误对话框，`verificationResult.problemDescription`尽管它已设置，但它是空的。

所以，有两个问题：a）我该如何解决？b) 是否有更好的解决方案来处理此类要求？

我希望，这个问题是可以理解的。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:55:09.540

经过几个小时的搜索，我终于在 PrimeFaces 论坛上找到了解决方案：http: [//forum.primefaces.org/viewtopic.php? f=3&t=16769](http://forum.primefaces.org/viewtopic.php?f=3&t=16769)

基本思想是将评估（是否显示对话框）安排到`visible`对话框本身的 - 属性中，然后让对话框`update`在 commandButton/Link 的 - 属性中更新。

感谢 BalusC 在另一个论坛上提出了这个问题 :-)

# php - 在 PHP 中对具有特殊字符的数组进行排序

> ID：10649473
> 
> 赞同：13
> 
> 时间：2012-05-18T08:48:48.700
> 
> 标签：php, setlocale, asort

我有一个数组，其中包含西班牙语的语言名称：

```
$lang["ko"] = "coreano"; //korean
$lang["ar"] = "árabe"; //arabic
$lang["es"] = "español"; //spanish
$lang["fr"] = "francés"; //french 
```

我需要对数组进行排序并维护索引关联，因此我将[asort()](http://ca.php.net/asort)与**SORT_LOCALE_STRING一起使用**

```
setlocale(LC_ALL,'es_ES.UTF-8'); //this is at the beginning (config file)
asort($lang,SORT_LOCALE_STRING);
print_r($lang); 
```

预期输出将按以下顺序排列：

*   数组 ( [ar] => árabe [ko] => coreano [es] => español [fr] => francés )

但是，这是我收到的：

*   数组 ( [ko] => coreano [es] => español [fr] => francés [ar] => árabe )

我错过了什么吗？感谢您的反馈意见！（我的服务器使用的是 PHP 版本 5.2.13）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T08:54:22.583

尝试按音译名称排序：

```
function compareASCII($a, $b) {
    $at = iconv('UTF-8', 'ASCII//TRANSLIT', $a);
    $bt = iconv('UTF-8', 'ASCII//TRANSLIT', $b);
    return strcmp($at, $bt);
}

uasort($lang, 'compareASCII');

print_r($lang); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:55:48.513

您在 中错误地定义了您的语言环境`setlocale()`。

改变：

```
setlocale(LC_ALL,'es_ES.UTF-8'); 
```

到：

```
setlocale(LC_ALL,'es_ES'); 
```

输出：

```
Array ( [ar] => árabe [ko] => coreano [es] => español [fr] => francés ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:15:24.897

文档中[`setlocale`](http://php.net/manual/en/function.setlocale.php)提到

> 不同的系统有不同的语言环境命名方案。

您的系统可能无法将语言环境识别为`es_ES`. 如果您使用的是 Windows，请尝试`esp_ESP`改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:59:17.490

试试这个

```
setlocale(LC_COLLATE, 'nl_BE.utf8');
$array = array('coreano','árabe','español','francés');
usort($array, 'strcoll'); 
print_r($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-20T18:24:55.800

这是没有问题的！

您的初始解决方案完全按预期工作，您的问题是 setlocale 函数未能设置语言环境，因此`asort($array, SORT_LOCALE_STRING)`无法按预期排序

您可以在接受 setlocale()的[phptester.net](https://phptester.net)上尝试自己的代码：

```
$lang["ko"] = "coreano"; //korean
$lang["ar"] = "árabe"; //arabic
$lang["es"] = "español"; //spanish
$lang["fr"] = "francés"; //french

asort($lang,SORT_LOCALE_STRING);
echo "<pre>";
print_r($lang);
echo "</pre>";

echo "<pre>";
/*this should return es_ES; 
if returns false it has failed and asort wont return expected order
*/
var_dump(setlocale(LC_ALL,'es_ES')); 
echo "</pre>";

asort($lang,SORT_LOCALE_STRING);
echo "<pre>";
print_r($lang); 
```

# javascript - Mediawiki 编辑器 reftoolbar 不见了？

> ID：10649475
> 
> 赞同：0
> 
> 时间：2012-05-18T08:48:50.140
> 
> 标签：javascript, jquery, css, mediawiki

对于我的 projetc，我在我的服务器中安装了 mediawiki，除了引用（参考工具栏）之外，一切正常。我附上截图。我们是否需要包含任何其他 js/css 文件？提前致谢 ![在此处输入图像描述](../Images/b6846a6313b7e3efe1284daf011e1b06.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:40:32.837

维基百科对 MediaWiki 软件运行了许多自定义扩展。与任何 MediaWiki 安装一样，您可以在[Special:Version](http://en.wikipedia.org/wiki/Special%3aVersion)中查看已安装扩展的列表。我相信您正在寻找的是[Extension:Cite](https://www.mediawiki.org/wiki/Extension%3aCite)。

# c# - NETCF 如何通过 ref 将结构传递给 DeviceIoControl

> ID：10649480
> 
> 赞同：2
> 
> 时间：2012-05-18T08:49:00.340
> 
> 标签：c#, windows-ce, .net-cf-3.5

我是 .NET 紧凑型框架的新手。我需要调用 DeviceIoControl 函数并将结构作为输入和输出参数传递给 IOControl 函数。

在[PInvoke/DeviceIoControl](http://pinvoke.net/default.aspx/coredll/DeviceIoControl.html)中，我发现了如何访问函数本身。但是我怎样才能将指针作为结构`InBuf`和`OutBuf`参数传递呢？

DeviceIoControl 定义为 P/Invoke：

```
[DllImport("coredll", EntryPoint = "DeviceIoControl", SetLastError = true)]
  internal static extern int DeviceIoControlCE(
    int hDevice, int dwIoControlCode,
    byte[] lpInBuffer, int nInBufferSize,
    byte[] lpOutBuffer, int nOutBufferSize,
    ref int lpBytesReturned, IntPtr lpOverlapped); 
```

有问题的结构具有以下布局：

```
struct Query
{
  int a;
  int b;
  char x[8];
}

struct Response
{
  int result;
  uint32 success;
}

void DoIoControl ()
{
  Query q = new Query();
  Response r = new Response();
  int inSize = System.Runtime.InteropServices.Marshal.SizeOf(q);
  int outSize = System.Runtime.InteropServices.Marshal.SizeOf(r);
  NativeMethods.DeviceIoControlCE((int)handle, (int)IOCTL_MY.CODE,
    ref q, inSize, ref r, outSize, ref bytesReturned, IntPtr.Zero);   
} 
```

*编辑*：当我尝试编译此代码时，出现错误：

```
cannot convert from 'ref MyNamespace.Response' to 'byte[]' 
```

如何将结构的地址传递给 DeviceIoControl 函数什么期望指向字节的指针而不是 struct ref？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:05:46.223

问题是您的 P/Invoke 声明与您的调用不匹配。DeviceIoControl 接收输入/输出参数的指针：

```
BOOL DeviceIoControl(
  HANDLE hDevice, 
  DWORD dwIoControlCode, 
  LPVOID lpInBuffer, 
  DWORD nInBufferSize, 
  LPVOID lpOutBuffer, 
  DWORD nOutBufferSize, 
  LPDWORD lpBytesReturned, 
  LPOVERLAPPED lpOverlapped
); 
```

因此，您可以通过多种方式“调整”您的声明。您提供的链接中的那个`byte[]`可能是为了方便他们使用它的地方。在您的情况下，由于您传递的是简单的结构（即没有指向其他数据的内部指针），那么最简单的“修复”就是更改您的 P/Invoke 声明：

```
[DllImport("coredll", SetLastError = true)]    
internal static extern int DeviceIoControl(    
    IntPtr hDevice, 
    IOCTL.MY dwIoControlCode,    
    ref Query lpInBuffer,
    int nInBufferSize,    
    ref Response lpOutBuffer, 
    int nOutBufferSize,    
    ref int lpBytesReturned, 
    IntPtr lpOverlapped); 
```

你的代码应该可以工作。请注意，我还更改了前两个参数的类型，以使您的调用代码在没有强制转换的情况下更加清晰。

**编辑 2**

如果您发现需要不同的签名，只需重载 P/Invoke。例如，[智能设备框架](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)代码至少有 11 个用于 DeviceIoControl 的重载。这里只是其中一些给你一个味道：

```
 [DllImport("coredll.dll", EntryPoint = "DeviceIoControl", SetLastError = true)]
    internal static extern int DeviceIoControl<TInput, TOutput>(
        IntPtr hDevice,
        uint dwIoControlCode,
        ref TInput lpInBuffer,
        int nInBufferSize,
        ref TOutput lpOutBuffer,
        int nOutBufferSize,
        out int lpBytesReturned,
        IntPtr lpOverlapped)
        where TInput : struct
        where TOutput : struct;

    [DllImport("coredll.dll", EntryPoint = "DeviceIoControl", SetLastError = true)]
    internal unsafe static extern int DeviceIoControl(
        IntPtr hDevice,
        uint dwIoControlCode,
        void* lpInBuffer,
        int nInBufferSize,
        void* lpOutBuffer,
        int nOutBufferSize,
        out int lpBytesReturned,
        IntPtr lpOverlapped);

    [DllImport("coredll.dll", EntryPoint = "DeviceIoControl", SetLastError = true)]
    internal static extern int DeviceIoControl(
        IntPtr hDevice,
        uint dwIoControlCode,
        IntPtr lpInBuffer,
        uint nInBufferSize,
        IntPtr lpOutBuffer,
        uint nOutBufferSize,
        out int lpBytesReturned,
        IntPtr lpOverlapped);

    [DllImport("coredll.dll", EntryPoint = "DeviceIoControl", SetLastError = true)]
    internal static extern int DeviceIoControl(
        IntPtr hDevice,
        uint dwIoControlCode,
        byte[] lpInBuffer,
        int nInBufferSize,
        IntPtr lpOutBuffer,
        int nOutBufferSize,
        out int lpBytesReturned,
        IntPtr lpOverlapped); 
```

# asp.net - ASP.NET 如何提取导致回发的提交按钮名称以及如何引发其事件？

> ID：10649501
> 
> 赞同：-1
> 
> 时间：2012-05-18T08:50:47.020
> 
> 标签：asp.net, webforms

在这里，我给出了只有一个按钮的渲染 html 代码。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
<form method="post" action="WebForm1.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"  value="/wEPDwUKMjA0OTM4MTAwNGRkfc0B7nRWOSrJt3Z50Lk+r5MmkK9k8GG8PK4FAT3XHhM=" />
 </div>

 <div class="aspNetHidden">

<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWAgLVlqviBgKM54rGBsRtS0Jrc+rNk0+mSfAVoJasek0SuUeZnx6RZWwMf1mq" />
 </div>
 <div>
    <input type="submit" name="Button1" value="Button" id="Button1" />
 </div>
 </form>
 </body>
 </html> 
```

html非常简单。当我们单击提交按钮时，将调用提交按钮的关联服务器端事件处理程序。

所以我有一个非常简单的问题，asp.net 引擎如何提取导致回发的按钮名称以及 asp.net 引擎如何调用按钮的事件处理程序服务器端。

在谷歌搜索了一下后，我发现 asp.net 引擎从 __VIEWSTATE 和 __EVENTVALIDATION 隐藏字段获取导致回发的按钮名称。是真的吗？如果是，那么 asp.net 引擎如何从 __EVENTVALIDATION 中提取按钮名称。请讨论这个 asp.net 内部问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:13:14.667

这是您的解决方案::

> HTML ::

```
<asp:Button ID="Button1" runat="server" Text="click"/><br /><br />
<asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton><br /><br />
<asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="True" /><br /><br />
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True">
    <asp:ListItem>--Select--</asp:ListItem>
    <asp:ListItem>a</asp:ListItem>
    <asp:ListItem>b</asp:ListItem>
    <asp:ListItem>c</asp:ListItem>
    <asp:ListItem>d</asp:ListItem>
</asp:DropDownList><br /><br />
PostBack Control :: <asp:Label ID="Label3" runat="server" Text="None"></asp:Label> 
```

> 后面的代码::

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
        Label3.Text = getPostBackControlName();
}

private string getPostBackControlName()
{
    Control control = null;

    //first we will check the "__EVENTTARGET" because if post back made by the controls
    //which used "_doPostBack" function also available in Request.Form collection.

    string ctrlname = Page.Request.Params["__EVENTTARGET"];
    if (ctrlname != null && ctrlname != String.Empty)
    {
        control = Page.FindControl(ctrlname);
    }
    // if __EVENTTARGET is null, the control is a button type and we need to
    // iterate over the form collection to find it

    else
    {
        string ctrlStr = String.Empty;
        Control c = null;
        foreach (string ctl in Page.Request.Form)
        {
            //handle ImageButton they having an additional "quasi-property" in their Id which identifies

            //mouse x and y coordinates

            if (ctl.EndsWith(".x") || ctl.EndsWith(".y"))
            {
                ctrlStr = ctl.Substring(0, ctl.Length - 2);
                c = Page.FindControl(ctrlStr);
            }

            else
            {
                c = Page.FindControl(ctl);
            }

            if (c is System.Web.UI.WebControls.Button || c is System.Web.UI.WebControls.ImageButton)
            {
                control = c;
                break;
            }
        }
    }
    return control.ClientID;
} 
```

# c# - MessageBox.Show 在按钮单击时不起作用

> ID：10649505
> 
> 赞同：0
> 
> 时间：2012-05-18T08:51:02.863
> 
> 标签：c#, messagebox

大家。:)

现在对 C# 完全陌生，所以我为这个问题的愚蠢行为道歉。:P 在过去的几个小时里，我做了很多搜索，但不幸的是，我找不到任何可以解决我问题的东西。

我一直在浏览一些基本的 C# 指南，并且正在创建一个带有按钮的简单 Windows 窗体应用程序，单击该按钮时会显示一个带有简短短语的 MessageBox。但奇怪的是，当我调试应用程序并单击按钮时，什么也没有发生。在我的搜索中，我看到了很多情况，人们的 MessageBox 显示没有文本。然而，在这种情况下，绝对没有发生任何事情。它表现得好像没有应用任何动作。

我正在使用 VSC# 2010 Express。我尝试了新项目并在我的 Windows 7 机器和 XP 机器上安装，两者的结果相同。

谢谢你的帮助！代码粘贴在下面。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Here's a message??");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:53:43.027

将 button1_click 事件处理程序挂钩到按钮的 Click 事件

```
 public Form1()
    {
        InitializeComponent();
        button1.Click += new EventHandler(button1_Click); 
        //add above line
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Here's a message??");
    } 
```

发生的事情是您刚刚编写了事件编码，但没有人要求它。

当点击发生时，这条线`button1.Click += new EventHandler(button1_Click);`将执行`private void button1_Click(object sender, EventArgs e)`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:54:01.977

您可能还没有将您的实际按钮连接到此事件处理程序。在设计器中选择按钮，然后在属性窗口中单击闪电螺栓的小图标。找到`Click`事件并下拉选择并选择`button1_Click`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:54:28.677

很可能事件处理程序没有为 click 事件注册。

尝试像这样更改您的代码：

```
public Form1()
{
    InitializeComponent();
    button_1.Click += new EventHandler(button_1_Click);
} 
```

或者类似的东西......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T08:56:02.690

似乎按钮的事件绑定没有正确完成。请双击设计器中的按钮，它将创建一个这样的事件。现在你把你的消息代码放在那里，希望它能起作用。

```
private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Here's a message??");
        } 
```

# cocos2d-iphone - cocos 2d继承CCSprite，不能访问方法

> ID：10649506
> 
> 赞同：0
> 
> 时间：2012-05-18T08:51:05.330
> 
> 标签：cocos2d-iphone, ccsprite

可能是我遗漏了一些基本的东西。我创建了一个继承 CCSprite 的类，叫做 Dude。在我的图层中，我添加了对象 dude，它可以正常工作：它显示在屏幕上。一切顺利，直到我触摸屏幕。不知何故，无法达到我班 Dude 中的方法“Jump”。

我得到的错误是：

-[CCSprite Jump::]: unrecognized selector sent to instance 0xf4611a0 2012-05-18 10:20:40.870 bitman[1732:10a03] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[CCSprite Jump:: ]: 无法识别的选择器发送到实例 0xf4611a0'

谁能指出我正确的方向？为什么错误显示 [CCSprite Jump::] 而不是 [Dude Jump::]？我错过了什么？

我有一个图层设置如下（仅相关代码）：

```
#import "GameplayLayer.h"
#import "Dude.h"

@implementation GameplayLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    GameplayLayer *layer = [GameplayLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(id)init{
    self=[super init];
    if(self!=nil){
        dude=[[Dude alloc]init] ;
        dude.position=ccp(screenSize.width/2,screenSize.height/2);
        [self addChild:dude];

        fJumpHight=screenSize.height/3;
        fJumpTime=.2f;
    }
    return self;
}

-(void) registerWithTouchDispatcher
{ 
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority: swallowsTouches:YES];
}

-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
    [dude Jump:40:3];
    return YES;
}

@end 
```

我设置类 Dude 如下：Dude.h：

```
#import "CCSprite.h"
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Dude : CCSprite

    -(void) Jump:(float)fHight:(float)fTime;

@end 
```

老兄.m:

```
#import "Dude.h"
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@implementation Dude
-(id)init{
    self=[super init];
    if(self!=nil){

        CGSize screenSize =[CCDirector sharedDirector].winSize;
        self=[[CCSprite spriteWithFile:@"something.png"]retain];
        self.position=ccp(screenSize.width/2,screenSize.height*0.333f);

    }
    return self;
}

-(void) Jump:(float)fHight:(float)fTime{
    NSLog(@"JUMP!");
    //Jump actions    
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:33:14.270

您的主要错误在您的`Dude`.

```
self=[[CCSprite spriteWithFile:@"something.png"]retain]; 
```

首先，您正确地将`self = [super init]`wich 叶子分配`self`为 a`Dude`但通过覆盖将`self`其`[CCSprite spriteWithFile:...]`更改为 default `CCSprite`。

您可以改为使用`self = [super initWithFile:@"something.png"]`. 像这样：

```
-(id)init {
  self = [super initWithFile:@"something.png"];
  if (self == nil) return nil;

  CGSize screenSize =[CCDirector sharedDirector].winSize;
  self.position = ccp(screenSize.width / 2.0, screenSize.height / 3.0);

  return self;
} 
```

另一条建议：在 objc 中，方法通常是小写的，并且倾向于为您提供有关参数的更多信息。所以你可以考虑将你的重命名`Jump::`为

```
-(void)jumpWithHeight:(float)height duration:(ccTime)duration {
  ...
} 
```

这是因为您*阅读*代码的频率高于*编写*代码的频率；）

# android - 当 Android 中发生旋转变化时，ExpandableListView 崩溃

> ID：10649508
> 
> 赞同：1
> 
> 时间：2012-05-18T08:51:13.047
> 
> 标签：android, rotation, expandablelistview

在我的`Activity`我有两个`Gallery`项目之一`ExpandableListView`，对于我的孩子`ExpandableListView`我有一个`GridView`. 程序运行完美。我需要的是处理方向变化。我知道，当方向改变时，活动会调用`onDestroy`，然后`onCreate`。因此，`ExpandableListView`即使用户在更改方向之前已经扩展，我的意志也会崩溃。

我发现了一个在 StackOverflow 中处理旋转变化的好概念。这是[链接](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)。我试图以这种方式实施，但我失败了。

我需要的是采用与用户在方向改变之前使用的相同的界面，即使在方向改变发生之后也是如此。请指导我。

**更新清单内容**

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity 
        android:name=".activities.HomeActivity"  
        android:configChanges="keyboardHidden|orientation|screenLayout" >       

        <intent-filter>
            <action android:name="android.intent.action.MAIN" ></action>
            <category android:name="android.intent.category.LAUNCHER" ></category>
        </intent-filter>            
    </activity>

    <activity 
        android:name=".activities.WebViewActivity"
        android:configChanges="keyboardHidden|orientation|screenLayout" >          
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:00:44.527

处理旋转可能是微不足道的，并且取决于您在屏幕旋转时必须做出的反应。如果您没有什么特别的事情要做，您可以随时告诉 Android 自己来管理轮换，并避免重新启动您的`activity`. 这可以通过在`AndroidManifest.xml` `android:configChanges="orientation"`. 如果你这样做，Android 会调用`onConfigurationChanged`，你可以随时调用`override`。如果您希望在屏幕旋转时重新启动活动，则必须保存当前状态。也就是说，在您的情况下，它可能是当前`groups`和`children`当前崩溃并重新崩溃。您可以使用它`onSavedInstanceState()/onRestoreInstanceState()`来保存和恢复您需要的状态。

编辑：如果您的目标是 API 级别 13，则必须将`screenSize`选项与[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)中所述的选项`android:configChanges`一起添加：`orientation`

> 屏幕方向发生了变化——用户旋转了设备。
> 
> 注意：如果您的应用程序以 API 级别 13 或更高级别为目标（由 minSdkVersion 和 targetSdkVersion 属性声明），那么您还应该声明“screenSize”配置，因为当设备在纵向和横向之间切换时它也会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:03:58.597

你为什么不把这些东西放在一个包里。

您将状态放在onDestroy 函数中的[包](http://developer.android.com/reference/android/os/Bundle.html)中，然后在 onCreate 函数中读取包。

```
onDestroy()
{
 Bundle extras = intent.getExtras();
extras.putInt("group", 5);
extras.putInt("item", 23);
}

onCreate()
{
 Bundle extras = getIntent().getExtras();
 int item= extras.getInt("item");
 int group= extras.getInt("group");
} 
```

`ExpandableListView`如果扩展包，您可以保存捆绑包。

# pdf - 从 pdf (UTF-8) 中正确提取文本

> ID：10649511
> 
> 赞同：0
> 
> 时间：2012-05-18T08:51:19.987
> 
> 标签：pdf, text, utf-8, text-extraction, pdf-extraction

我想从一些 pdf 文件中提取文本（以编程方式，使用一些实用程序，甚至使用复制/粘贴），但有些字符出来真的很奇怪。虽然我在提取文本时指定了 UTF-8 编码，但像“ș、ț、ă”等字符看起来像“„˛”而不是“s、t、a”（或至少显示的字符）。文本显示正确，但是当我尝试复制它时，这些字符不正确。
是否有某种方法可以正确提取文本，或者这些 pdf 文件是否以某种方式损坏（java/C/python 等或 windows/linux/etc 实用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:08:10.453

您可以在 Acrobat 中正确地从 PDF 中提取文本吗？

# svn - SVN 提交失败 - 访问被拒绝：500 内部服务器错误

> ID：10649512
> 
> 赞同：2
> 
> 时间：2012-05-18T08:51:20.333
> 
> 标签：svn, tortoisesvn, visualsvn, jdeveloper, visualsvn-server

我最近将我的 VisualSVN Server 2.5.2 移动到同一网络中的新机器（从 Windows Server 2003 到 Windows Server 2008 R2），将`/Repositories`目录从一台机器移动到另一台机器（复制/粘贴）。

我在我的 JDeveloper 安装 11.1.1.4 中使用 Subversion 来跟踪我的编码。结帐功能工作正常。当我尝试通过 JDeveloper 提交某些内容时，我收到以下错误：

```
svn:Commit failled (details follow):
svn: Can't open file 'C:\Repositories\xxxxxxx\db\txn-current-lock': Access is denied.
svn: MKACTIVITY of '/svn/xxxxxxx/!svn/act/xxxxxx-xxxx-xxxx-xxxxxx': 500 Internal Server Error(https://nameOfMyServer) 
```

提交是使用以下方法完成的：

```
commit -m "" C:/JDeveloper/mywork/newRepo/xxxxx/xxxx/xxxx/Filename.java 
```

当我尝试通过文件系统使用 TortoiseSVN（1.7.7 64 位）提交时，出现以下错误：

```
Commit
Commit failed (details follow):
The POST request returned invalid XML in the response: XML parse error at line
 3: not well-formed (invalid token) (/svn/xxxxxxxxxxx/!svn/me) 
```

使用 TortoiseSVN 也可以正常结帐。

请注意，我已经仔细检查了我的存储库中的所有权限，并且我登录的用户具有所有读/写权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:51:13.823

似乎 VisualSVN 服务器服务帐户（默认为*“网络服务” ）缺少对存储库根文件夹（* *“C:\Repositories”* ）的修改 NTFS 权限，它是子文件夹。

您还可以通过 VisualSVN 服务器管理器强制权限。

![自动调整权限](../Images/e402d2893b751acb56758396a51c2a11.png)

请参阅[运行 VisualSVN 服务器所需的权限](http://www.visualsvn.com/support/topic/00037/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:26:35.307

解决了。

刚刚将 VisualSVNServer 软件从 2.5.2 升级到 2.5.4，现在工作正常。我不确定到底是什么问题。我没有测试过**bahrep**提供的解决方案。这也可能是一个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T06:38:34.773

这可能是权限问题。向服务器上的存储库文件夹授予 777 权限。

# vb.net - 使用 vb.net 2010 在文本文件中搜索特定字符串

> ID：10649514
> 
> 赞同：1
> 
> 时间：2012-05-18T08:51:32.087
> 
> 标签：vb.net, ini

有一个 INI 文件，我想从中访问和读取信息。这是相关 INI 文件的完整内容：[http ://www.heypasteit.com/clip/0C3Q](http://www.heypasteit.com/clip/0C3Q)

有几个人向我推荐了代码，但它们不起作用。我相信这是因为`[ ]`那个 INI 文件中的标签。因为如果我删除标签，它们就会起作用。

我的程序有一堆组合框、轨迹栏和复选框。这些项目将由从 INI 文件中获取的信息填充。

例如，ini 文件有这些行；

```
...
bCrosshairEnabled=1
bDoDepthOfField=0
bFXAAEnabled=1
uiMaxSkinnedTreesToRender=10
iSize H=720
iSize W=1280
... 
```

示例：我希望我的表单中的 checkbox8 被选中，如果`bFXAAEnabled`它的值是 ，`1`或者如果它是`0`。

请确保您的代码兼容 VB.NET 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:59:56.260

你可以试试这个

```
 Dim myvalue As Integer
    For Each k As String In IO.File.ReadLines("d:\test.txt")
        If k.Contains("valueccc=") Then
            Dim values() As String = k.Split(CChar("=")).ToArray
            myvalue = Convert.ToInt32(values(1))
        End If
    Next
Select case myvalue
case 1
case 2
End select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:08:33.390

从您对我的其他答案的评论中推断，我发布了一个关于如何从 INI 文件中读取值的新答案：

```
Imports System.Text
Imports System.Runtime.InteropServices

Public Class TestForm
    'declare the API
    <DllImport("kernel32.dll", SetLastError:=True)> _
    Private Shared Function GetPrivateProfileString(ByVal lpAppName As String, _
                        ByVal lpKeyName As String, _
                        ByVal lpDefault As String, _
                        ByVal lpReturnedString As StringBuilder, _
                        ByVal nSize As Integer, _
                        ByVal lpFileName As String) As Integer
    End Function

    'Function to retrieve a value from an INI file
    Public Function GetINIValue(filename As String, section As String, key As String, Optional defaultValue As String = "") As String
        Dim res As Integer
        Dim sb As New StringBuilder(500)
        res = GetPrivateProfileString(section, key, "", sb, sb.Capacity, filename)
        If res = 1 Then Return sb.ToString Else Return defaultValue
    End Function

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim filename As String = "C:\Scratch\Test.ini"
        CheckBox1.Checked = If(GetINIValue(filename, "Display", "bFXAAEnabled") = "1", True, False)
    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:16:22.130

```
'Reads each line from the text file one at a time
    For Each line As String In IO.File.ReadLines("text file path")

        'split the string by equals sign
        Dim ary As String() = line.Split("="c)

        'Check the data type of the string we collected is inline with what we are expecting, e.g. numeric
        If IsNumeric(ary(1)) Then

            'create key value pair: the string before the equals and the number after it
            'e.g.
            'key = "valuexyz" | value = "36""
            Dim valuePair As New KeyValuePair(Of String, Integer)(ary(0), CInt(ary(1)))

            'obtain the string after the equals sign
            Dim value As Integer = CInt(ary(1))

            'based on the value after the equals sign, do something
            Select Case value
                Case 1
                    ' do something using..
                    'valuePair.Key - this is the string before the equals
                    'valuePair.Value - this is the string after the equals
                Case 2
                    ' do something using..
                    'valuePair.Key - this is the string before the equals
                    'valuePair.Value - this is the string after the equals
                Case Else
                    ' do something using..
                    'valuePair.Key - this is the string before the equals
                    'valuePair.Value - this is the string after the equals
            End Select

        End If

    Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:01:29.657

```
 'remember to import this at the top of your class
    Imports System.IO

    Dim filename As String = "C:\file.txt"
    Dim parts() As String = Nothing

    'use a stream reader to read the file line by line
    Using sr As New StreamReader(filename)
        'read a line as split into parts at the equal sign
        parts = sr.ReadLine.Split("="c)
        'check we actually have read the data in the correct format
        If parts.Length >= 2 Then
            Select Case parts(0)
                'use a case statement for the left hand side
                Case "valuexyz"
                    'now use a case statement for the right hand side
                    Select Case parts(1).Trim
                        Case "0"
                            Foo()
                        Case "1"
                            Bar()
                    End Select

                Case "valueabc"
                    Select Case parts(1).Trim
                        Case "0"
                            Foo2()
                        Case "1"
                            Bar2()
                    End Select
            End Select
        End If
    End Using 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T11:00:33.337

在您的底例语句中，您将 Checkbox8.checked 属性设置为 false 在任何一种情况下。确定在哪种情况下需要将复选框设置为选中并编写相应的行来执行此操作。

# shell - 使用 sed 从文件中删除从“{”到“}”的所有行

> ID：10649516
> 
> 赞同：1
> 
> 时间：2012-05-18T08:51:34.133
> 
> 标签：shell, unix, sed, awk, tr

我有一个文件，其内容如下：

```
control_data {
some data dadadadf 
some data fsfsfs
some more data
.
.
.
}
more data below 
{
.
.
} 
```

我想将数据从“control_data”删除到第一个“}”

我尝试了一个命令

```
sed "s/control_data\([^}]*\)}//g" 
```

但这仅在我们没有多行时才有效，例如。当我们有以下数据时，此命令有效：

```
control_data {some data dadadadf some data fsfsfs some more data...}more data 
```

它给 ：

```
more data {....} 
```

当我们有跨多行的数据时，如何使这个命令工作？我是shell脚本的新手，一些带有答案的解释将对帮助大有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:09:47.203

这个可能不是一个理想的，但是这个使用了 sed（你的 sed 代码）

```
cat ip_file.txt | tr '\n' ':' | sed "s/control_data\([^}]*\)}//g" | tr ':' '\n' 
```

逻辑：我将所有新行转换为：，然后使用您的 sed 代码，然后将所有：转换为换行符注意：我的假设是：不会出现在文件中的任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:15:09.223

我的 sed-fu 很弱，但这是我的工作（使用[这个答案](https://stackoverflow.com/questions/4462013/delete-matching-nth-line-until-blank-line-in-awk-sed-grep/4463707#4463707)作为指导）：

```
[me@home]$ sed -n '/^control_data {/{:a;n;/^}/!ba;n};p' input_file.txt
more data below 
{
.
.
} 
```

这是命令的细分

```
sed -n "             # "-n" = suppress automatic printing of pattern space
/^control_data {/ {  # if (line matches control data)
   :a;                 #   mark this spot with label a
   n;                  #   get next line
   /^}/!ba             #   if (doesn't start with "}") go back to label a
   n;                  #   get next line before leaving this control block
};                   # end if
p;                   # print everything else not affected by previous block
" input_file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:54:25.087

这可能对您有用：

```
sed '/^control_data {.*}$/d;/^control_data {/,/^}$/d' file 
```

*   第一个命令删除所有单行`/^control_data {.*}$/d`
*   第二个命令删除所有块`/^control_data {/,/^}$/d`

# php - 将数据存储在对象中。哪种方法更快？

> ID：10649517
> 
> 赞同：0
> 
> 时间：2012-05-18T08:51:37.347
> 
> 标签：php, optimization

嗨，我最近看到[了这篇](http://www.webmaster-source.com/2009/08/20/php-stdclass-storing-data-object-instead-array/)关于如何将数据存储到对象中的文章：

```
$profile = new stdClass;
$profile->first_name = 'Woppi';
$profile->last_name = 'Jillenjack';
$profile->email = 'woppi.jillenjack@gmail.com'; 
```

我习惯于将其设为数组，然后将其类型转换为对象（在阅读本文之前）：

```
$profile = array('first_name'=>'Woppi', 'last_name'=>'Jillenjack', 'email'=>'woppi.jillenjack@gmail.com');
$profile = (object)$profile; 
```

我认为第一种方法更快。我怎么知道哪个更快......你能建议我找到这个的方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:27:02.587

在这两种情况下，您都需要创建一个类（stdClass 或 Array）的实例并设置数据。在第二种情况下，您添加了一个新操作，即强制转换，因此隐含了 stdClass 实例的创建以及从 Array 到 stdClass 的解析数据操作。

在第一种情况下，您只创建一个类的实例，在第二种情况下，两者都创建，但 1 对程序员是不可见的。我认为第一个在内存和速度上效率更高

```
 1 <?php                                                                                                                                                                          
  2                                                                                
  3  $time_start = microtime(true);                                                
  4                                                                                
  5 for($i=0 ; $i<1000000; $i++)                                                   
  6 {                                                                              
  7  $profile = new stdClass;$                                                      
  8  $profile->first_name = 'Woppi';                                               
  9  $profile->last_name = 'Jillenjack';                                           
 10  $profile->email = 'woppi.jillenjack@gmail.com';                               
 11  $time_end = microtime(true);$                                                  
 12 }                                                                              
 13                                                                                
 14  $object = $time_end - $time_start;                                            
 15                                                                                
 16                                                                               
 17  $time_start = microtime(true);                                               
 18  for($i=0;$i<1000000;$i++)                                                     
 19  {                                                                             
 20  $profile = array('first_name'=>'Woppi',                                      
 21          'last_name'=>'Jillenjack',                                            
 22          'email'=>'woppi.jillenjack@gmail.com');                               
 23  $profile = (object)$profile;                                                  
 24  $time_end = microtime(true);                                                  
 25  }                                                                             
 26  $array_to_object = $time_end - $time_start;                                   
 27                                                                                
 28  echo "stdClass: $object | Typecasting: $array_to_object";                     
 29                                                                              
 30 ?> 
```

标准类：10.045720100403 | 类型转换：10.009358882904

标准类：9.9519069194794 | 类型转换：9.2100629806519

标准类：9.2515120506287 | 类型转换：9.480808019638

标准类：9.5376181602478 | 类型转换：9.2310011386871

标准类：9.9628109931946 | 类型转换：10.414475917816

测试不是决定性的，在这种情况下，消耗的内存可能会帮助我们选择使用一种或另一种

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:55:08.687

[好吧，如果您在 Linux 上运行 PHP，您可以使用microtime()](http://php.net/manual/en/function.microtime.php)测量运行每个方法的时间
* Windows 不会返回正确的时间，而是一个近似值。如果您试图在微秒内测量某些东西，那将不会真正帮助您。

另外我认为第二种方法应该更快，因为它将使用用 C 编写的集成函数，而不是解释几行 PHP 代码然后执行它们。

所以我投票给第二个。您仍然可以通过测量每种方法所需的时间来获得一些乐趣。

# tortoisegit - TortoiseGit... 将远程分支拉到不同的本地分支

> ID：10649520
> 
> 赞同：1
> 
> 时间：2012-05-18T08:51:45.587
> 
> 标签：tortoisegit

我正在本地分支上工作，并希望将最新的远程 master 合并到此分支中，以使其与其他分支合并到 master 的其他更改保持最新。

我是 git 的新手，但 TortoiseGit 让它变得更加混乱，因为它似乎并没有以完全相同的方式使用完全正确的术语。

我什至可以这样做，还是我必须更新我的整个本地仓库，然后合并我的本地 master -> 本地分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:50:46.177

这是你要找的吗？[以不同的名称签出远程分支](https://stackoverflow.com/questions/12043236/pull-remote-branch-into-local-repo-with-different-name/12043264#12043264)

```
git checkout -b myBranchName <repo_name>/<remote's_branch_name> 
```

# jquery - 检索 jQuery 元素的 X & Y 位置

> ID：10649524
> 
> 赞同：3
> 
> 时间：2012-05-18T08:52:01.243
> 
> 标签：jquery

我需要检索一个元素的 X 和 Y 位置，一旦它被删除，我该如何实现呢？

我想我需要使用 droppable 回调：

```
$(".portletPlaceHolder").droppable({
    drop: function( event, ui ) {
        //...
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:00:59.917

伙计，您应该阅读文档的整个页面：

> 所有回调都接收两个参数：原始浏览器事件和准备好的 ui 对象，请查看下面的此对象的文档（如果您将第二个参数命名为“ui”）：
> 
> *   ui.draggable - 当前可拖动元素，一个 jQuery 对象。
> *   ui.helper - 当前可拖动的助手，一个 jQuery 对象
> *   ui.position - 可拖动助手的当前位置 { top: , left: }
> *   ui.offset - 可拖动助手的当前绝对位置 { top: , left: }

[可放置的 jQuery 手册](http://jqueryui.com/demos/droppable/)

```
$(".portletPlaceHolder").droppable({
    drop: function (evt, ui) {
        var offset = ui.offset;
        console.log(offset.left + "x" + offset.top);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:01:39.083

Use **.offset()**

```
<script>
   var p = $("p:last");
   var offset = p.offset();
   p.html( "left: " + offset.left + ", top: " + offset.top );
</script> 
```

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

UPDATE

[http://www.jquery4u.com/snippets/jquery-coordinates-element/#.T7YW7Nz9Mi0](http://www.jquery4u.com/snippets/jquery-coordinates-element/#.T7YW7Nz9Mi0) http://www.quirksmode.org/js/dragdrop.html [http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/clientX.htm](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/clientX.htm)

**This one is Awsm Show Dynamic Coordinates of cursor movement**

[http://www.diffusedreality.com/content.html](http://www.diffusedreality.com/content.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T08:54:09.160

您可以使用`position()`检索顶部和左侧位置的功能

```
$('yourselector').position(); 
```

# objective-c - 更改标头信息二进制文件并将其写回

> ID：10649525
> 
> 赞同：3
> 
> 时间：2012-05-18T08:52:02.780
> 
> 标签：objective-c, xcode, ipad, file, bytearray

我需要更改文件夹中文件的标题信息。最推荐的读取和写回二进制数据的方法是什么？

1.  如何从文件夹二进制读取数据到数组/流
2.  如何将数据从数组/流写回本地 iPad 文件夹？

![Objective-C中的二进制读/写](../Images/4727c3809e2ad3201b374a05222fb640.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:56:22.917

主包是只读的，你不能在那里写任何东西。
对于写作，我们有文档目录。
这将从主包中读取文件

```
NSString *path= [[NSBundle mainBundle] pathForResource:@"myFile" ofType:@"txt"]; 
```

* * *

**已编辑**
正如您所展示的，您的标头是 1 到 10 字节。
您能否告诉我一个正在阅读您文件的人如何知道您的标头的确切长度是多少。它可以是 1 到 10 之间的 2、3 或 7。必须有一种方法来判断它具有特定长度的标题，并且文件的其他部分也是如此。
如果没有这些信息，我认为人们永远不会知道您的页眉、正文或页脚的大小。
如果我创建了这个文件，我可能会将标题的第一个字节作为标题的长度，以便任何人都可以读取标题，并在读取标题之后的第一个字节用于正文的大小和页脚的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T09:49:01.810

如果您没有更具体一点，这很难回答，但最有效的方法可以说是**根本不更改文件。**

由于我们讨论的是 iOS，因此除了您的应用程序本身之外，没有对这些文档的文件系统级别的访问。那么为什么不将您想要与文件关联的附加/自定义标题数据保存在应用程序范围的元数据存储中（例如 iTunes 或 iPhoto 所做的），并仅在导出期间将它们与*实际文件标题交错？*

不管怎样，我真的没有看到一个令人信服的理由来使用 C 级文件函数来更改这些数据：`NSInputStream`为您提供流式文件读取访问，`NSOutputStream`并可用于将数据流式传输到文件。

如果你接受我上面的建议，你最终可能会得到这样的 API：

```
typedef void (^DataExportHandler)(NSData *resultData, NSError *exportError);

@interface DataStore (FileExport)

/** If you wanted to abort the export, you could pass the stream into the `abort…:`-method
@param  identifier  Something that you use internally to manage your stored files.
@param  error       For good measure…
@return The export stream for the object or `nil` if an error occurred.
*/
- (NSInputStream *)exportStreamForObjectWithIdentifier:(id)identifier error:(NSError * __autoreleasing*)error;

/** If your data are mostly small, it may be more convenient to not consume the exports as streams but as BLOBs, if the sizes vary you could implement this as a convenience…
@param  identifier  Equivalent to the identifier in the method above
@param  handler     Callback that is invoked once some time later when the export finished or failed. **Must not** be `nil`.
*/
@return A cancellation token.
- (id)asynchronouslyExportDataForObjectWithIdentifier:(id)identifier resultHandler:(DataExportHandler)handler;

/**
@param  exportToken  Either a stream from the first method or a token returned from the second one.
*/
- (void)abortAsynchronousExportWithToken:(id)exportToken;

@end 
```

假设 ARC 并且不知道您必须做什么才能将附加元数据与原始元数据交错，这就是实现的样板部分*可能*的样子。

很明显，我在这里没有展示的部分是：为`rawDataStream`您使用原始文件中的数据执行委托，将标题与您的附加信息交错。虽然这可能应该被分解到一个单独的类中，但我只是暗示数据存储`NSStreamDelegate`相应地实现了回调。

在标题之后，您只需通过文件的其余部分......</p>

```
/// Scribble of another helper class that can be used whenever one needs to consume a stream for its aggregate data:
@interface _StreamConsumer : NSObject <NSStreamDelegate> {
    NSInputStream *_stream;
    DataExportHandler _handler;
    NSMutableData *_data;
}

// initiate the data, set itself as the stream’s delegate, open and schedule the stream in a runloop.
- (id)initWithInputStream:(NSInputStream *)stream resultHandler:(DataExportHandler)handler;

// forward the close to the stream
- (void)close;

// Implementation of the stream delegate callbacks can be more or less copy-pasted from Apple’s Stream Programming Guide (https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Streams/Streams.html)
@end

@implementation DataStore (FileExport)

- (id)asynchronouslyExportDataForObjectWithIdentifier:(id)someUniqueIdentifier resultHandler:(void (^)(NSData *fileData, NSError *exportError))
{
    NSParameterAssert(handler);
    handler = [handler copy];

    NSError *setupError;
    NSInputStream *exportStream = [self exportStreamForObjectWithIdentifier:someUniqueIdentifier error:&setupError];
    if (!exportStream)
    {
        dispatch_async(dispatch_get_current_queue(), ^{
            handler(nil, setupError);
        });

        return nil;
    }

    _StreamConsumer *helper = [[_StreamConsumer alloc] initWithStream:exportStream resultHandler:handler];

    return helper;
}

- (void)abortAsynchronousExportWithToken:(id)exportToken
{
    [exportToken close];
}

- (NSInputStream *)exportStreamForObjectWithIdentifier:(id)identifier error:(NSError * __autoreleasing*)error
{
    // do your thing to retrieve the URL to the actual data-file and then:
    NSInputStream *rawDataStream = [NSInputStream inputStreamWithURL:rawFileURL];

    if (!rawDataStream)
    {
        // populate the error in a meaningful way
        return nil;
    }

    CFReadStream cfExportStream;
    CFWriteStream cfBuffer;
    CFStreamCreateBoundPair(kCFAllocatorDefault, &cfExportStream, &cfBuffer, someValueYouHaveTuned);

    if (!cfExportStream || !cfBuffer)
    {
        // error population
        return nil;
    }

    NSInputStream *exportStream = (__bridge_transfer NSInputStream *)cfExportStream;

    // HACKITY HACK: In reality, you’d want this stuff separated!
    // For the sake of simplicity, take the responsibility for that ourselves
    _exportBuffer = (__bridge_transfer NSOutputStream *)cfBuffer;

    rawDataStream.delegate = self;
    [rawDataStream open];
    [rawDataStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunloopDefaultMode];
    // END: HACKITY HACK

    return exportStream;
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T07:26:01.023

C 流很简单：`FILE*`, `fopen`, `fseeko`, `fread`, `fwrite`.

如果您的数据只有 266 个字节，那么它足够小，您可以使用's方法将其全部读取`[NSMutableData dataWithContentsOfURL:url]`，然后将其写回（覆盖整个文件） 。但是，对于较大的文件，您将希望避免这种方法。那时，您将需要使用 C 接口（如上），或考虑, , , ,等。`NSData``write*``NSFileHandle``NSInputStream``NSOutputStream``CFReadStream``CFWriteStream`

# .net - 如何从流中加载非托管 DLL？

> ID：10649531
> 
> 赞同：3
> 
> 时间：2012-05-18T08:52:29.947
> 
> 标签：.net, vb.net, pinvoke, unmanaged

我有一个用 .NET 4.0 编写的应用程序，需要在内存中加载本机 DLL（编写为 C）。

目前，我正在使用对 LoadLibrary 的 P/Invoke 调用传递 DLL 所在的路径。

这是可行的，但由于这个 DLL 来自数据库，我想知道是否可以通过流加载它，从而避免将 DLL 存储在文件系统中的某个位置的必要性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:26:54.773

Windows 不允许这样做，必须始终从磁盘上的文件加载本机代码。这是操作系统设计方式的核心，可执行文件通过内存映射文件映射到内存中。这需要一个文件。

它仅适用于纯托管代码（Assembly.Load(byte[])，因为 IL 是数据，而不是本机代码。

避免将 DLL 存储在 dbase 中，通常不能将它们写入磁盘，因为 UAC 或病毒扫描程序或 IT 人员对不知从何处出现的可执行文件非常不满意。它可以在您的开发机器上运行，但在用户机器上的几率很低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:55:57.953

这是不可能的，因为您在 PInvoke 属性用法中指定了文件名。PInvoke 需要一个静态已知的文件名。

如果不能静态确定文件名，则可能需要使用 LoadLibrary 和 GetProcAddress 来调用 dll 中包含的函数。

或者您可以使用反射发射来动态发射 PInvoke 函数。

# opengl - 为不同的 VBO 使用 OpenGL VAO

> ID：10649532
> 
> 赞同：1
> 
> 时间：2012-05-18T08:52:30.957
> 
> 标签：opengl

我正在为游戏编写自己的渲染器。我有一个几何类，它以 VBO（顶点缓冲区对象）的形式封装几何数据。Geometry 还引用了 InputLayout 类型的对象，该对象存储有关几何数据的信息。InputLayout 实例在 Geometry 实例之间共享。我正在使用 InputLayout 在“绘图调用”（例如 glDrawArrays()）之前正确配置管道（例如 glVertexAttribPointer()）。配置例程有点低效，因为我必须扫描活动顶点着色器的活动属性，然后在活动的 InputLayout 实例中查找这些属性。我想通过使用 VAO 来自动化整个过程。

这就是问题所在。我应该为每个着色器/输入布局对还是每个着色器/几何对创建一个 VAO？通过为每个着色器/InputLayout 对创建 VAO，我将不得不在每次绘制调用之前更改 VAO 中的缓冲区绑定。是否值得重新设计我的渲染器并为每个着色器/几何对创建 VAO？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T09:51:53.127

使用 VAO 的目的是让您不必经常更改它们。你绑定一个 VAO 并渲染。由于关联的缓冲区对象是VAO 状态的*一部分*，因此唯一的方法是让 VAO 存储实际的缓冲区，而不仅仅是“布局”。

# facebook - 允许用户添加 disqus/facebook 评论插件

> ID：10649533
> 
> 赞同：7
> 
> 时间：2012-05-18T08:52:38.950
> 
> 标签：facebook, facebook-graph-api, facebook-comments, disqus

想象一个工具可以帮助人们建立他们的投资组合。作为其中的一部分，该工具允许其用户在他们的投资组合上添加 disqus/facebook 评论小部件，以便访问他们的投资组合的人可以对投资组合发表评论。

从工具的角度来看，它需要代表投资组合创建者托管此类小部件的权限/能力，以便投资组合创建者仍然可以围绕发布的评论进行审核；通过登录到他的 disqus 或 facebook 帐户。

我该如何实施这样的事情？

由于大多数人都有 facebook 帐户，因此集成 facebook 评论插件的答案会更好。

**更新：**

Disqus 具有适用于 Wordpress、Blogger 等平台的小部件。情况类似于我试图为我的应用程序/平台支持一个 disqus 小部件，以便我的应用程序的每个用户都可以添加一个 disqus 小部件。

我在 SO 上发现了一个类似的问题：

[Facebook评论插件的基于用户的管理](https://stackoverflow.com/questions/8326544/user-based-management-of-facebook-comment-plugin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:17:53.053

你应该试试[评论](http://developers.facebook.com/docs/reference/plugins/comments/)插件。（这只是建议。我还没有尝试过这种情况。）

我认为困难的部分是让投资组合持有人适度。我认为在单一应用程序下，您将更难授予他们管理权限。您必须检查是否有可能授予这些用户访问权限。（或者你已经为每个用户创建了不同的应用程序。）

或者可以从每个投资组合持有人那里获取设置。您将必须获取用户权限并将其存储在您的数据库中。然后在每个用户页面上根据用户给出的设置显示评论页面。

见[评论插件信息](http://blog.kissmetrics.com/facebook-social-plugins/)。

# ruby-on-rails - 运行此服务器有什么问题？

> ID：10649534
> 
> 赞同：0
> 
> 时间：2012-05-18T08:52:39.403
> 
> 标签：ruby-on-rails

我已经成功地制作了一个新的 Rails 项目框架，没有任何问题。但是，当我尝试运行 rails 服务器时，它不起作用。我在下面包含了一个日志，以了解正在发生的事情。

```
stanley@ubuntu:~$ rails new railstest
       exist  
   identical  README.rdoc
   identical  Rakefile
   identical  config.ru
   identical  .gitignore
   identical  Gemfile
       exist  app
   identical  app/assets/images/rails.png
   identical  app/assets/javascripts/application.js
   identical  app/assets/stylesheets/application.css
   identical  app/controllers/application_controller.rb
   identical  app/helpers/application_helper.rb
       exist  app/mailers
       exist  app/models
   identical  app/views/layouts/application.html.erb
   identical  app/mailers/.gitkeep
   identical  app/models/.gitkeep
       exist  config
   identical  config/routes.rb
   identical  config/application.rb
   identical  config/environment.rb
       exist  config/environments
   identical  config/environments/development.rb
   identical  config/environments/production.rb
   identical  config/environments/test.rb
       exist  config/initializers
   identical  config/initializers/backtrace_silencers.rb
   identical  config/initializers/inflections.rb
   identical  config/initializers/mime_types.rb
    conflict  config/initializers/secret_token.rb
Overwrite /home/stanley/railstest/config/initializers/secret_token.rb? (enter "h" for help) [Ynaqdh] y
       force  config/initializers/secret_token.rb
   identical  config/initializers/session_store.rb
   identical  config/initializers/wrap_parameters.rb
       exist  config/locales
   identical  config/locales/en.yml
   identical  config/boot.rb
   identical  config/database.yml
       exist  db
   identical  db/seeds.rb
       exist  doc
   identical  doc/README_FOR_APP
       exist  lib
       exist  lib/tasks
   identical  lib/tasks/.gitkeep
       exist  lib/assets
   identical  lib/assets/.gitkeep
       exist  log
   identical  log/.gitkeep
       exist  public
   identical  public/404.html
   identical  public/422.html
   identical  public/500.html
   identical  public/favicon.ico
   identical  public/index.html
   identical  public/robots.txt
       exist  script
   identical  script/rails
       exist  test/fixtures
   identical  test/fixtures/.gitkeep
       exist  test/functional
   identical  test/functional/.gitkeep
       exist  test/integration
   identical  test/integration/.gitkeep
       exist  test/unit
   identical  test/unit/.gitkeep
   identical  test/performance/browsing_test.rb
   identical  test/test_helper.rb
       exist  tmp/cache
       exist  tmp/cache/assets
       exist  vendor/assets/javascripts
   identical  vendor/assets/javascripts/.gitkeep
       exist  vendor/assets/stylesheets
   identical  vendor/assets/stylesheets/.gitkeep
       exist  vendor/plugins
   identical  vendor/plugins/.gitkeep
         run  bundle install
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.5) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using coffee-script-source (1.3.3) 
Using execjs (1.3.2) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.3) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 
Using jquery-rails (2.0.2) 
Using bundler (1.1.3) 
Using rails (3.2.3) 
Using sass (3.1.18) 
Using sass-rails (3.2.5) 
Using sqlite3 (1.3.6) 
Using uglifier (1.2.4) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
stanley@ubuntu:~$ cd railstest/
stanley@ubuntu:~/railstest$ rails server
/var/lib/gems/1.8/gems/execjs-1.3.2/lib/execjs/runtimes.rb:50:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /var/lib/gems/1.8/gems/execjs-1.3.2/lib/execjs.rb:5
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1
    from /var/lib/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /var/lib/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /home/stanley/railstest/config/application.rb:7
    from /var/lib/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
    from /var/lib/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:53
    from /var/lib/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /var/lib/gems/1.8/gems/railties-3.2.3/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

提前感谢您对正在发生的事情的反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:57:20.850

一行来解决您的问题：

```
sudo apt-get install nodejs 
```

更高版本的 rails 需要 javascript 运行环境，这可以通过多种解决方案来解决，在 ubuntu 上安装 nodejs 是最简单的解决方案之一。

# java - 自定义 JSP 标记文件 <%@ variable ..> 不起作用？

> ID：10649535
> 
> 赞同：3
> 
> 时间：2012-05-18T08:52:44.543
> 
> 标签：java, jsp, jsp-tags

我想定义一个自定义 JSP 标记，它生成一个具有交替行背景颜色的 HTML 表。因此，CSS 类“奇数”和“偶数”是根据表的行索引设置的。

没有 JSP 标记的示例可以正常工作，问题是：下面的自定义标记示例中出了什么问题？如何通过两个自定义标签传递变量“rowIndex”？

参考[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html)没有帮助。

谢谢

**有效的示例 JSP 页面：**

```
<c:set var="rowIndex" value="1"/>
<table class="datatable">
    <tbody>
        <tr class="${(rowIndex %2 == 0) ? 'odd' : 'even'}"><c:set var="rowIndex" value="${rowIndex+1}"/>
            <td width="200px"><bean:message key='myKey' /></td>
            <td>todoValue</td>
        </tr>
        <tr class=${(rowIndex %2 == 0) ? 'odd' : 'even'}><c:set var="rowIndex" value="${rowIndex+1}"/>
            <td><bean:message key='myKey' /></td>
            <td>todoValue</td>
        </tr>
    </tbody>
</table> 
```

**具有不起作用的自定义标记的示例 JSP 页面：**

JSP 页面

```
<%@taglib tagdir="/WEB-INF/tags" prefix="myApp"%>

....

<myApp:keyValueDataTable>
    <myApp:keyValueDataTableRow />
    <myApp:keyValueDataTableRow />
    <myApp:keyValueDataTableRow />
</myApp:keyValueDataTable> 
```

数据表.tag

```
<%@ include file='/tiles/taglibs.inc'%>
<%@tag description="Description" pageEncoding="UTF-8"%>

<%@ variable name-given="rowIndex" %> 
<c:set var="rowIndex" value="1" />

<table class="datatable">
    <tbody>
        <jsp:doBody/>
    </tbody>
</table> 
```

tableRow.tag

```
<%@ include file='/tiles/taglibs.inc'%>
<%@tag description="Description" pageEncoding="UTF-8"%>

<%@ variable name-given="rowIndex" %> 

        <tr class="${(rowIndex %2 == 0) ? 'odd' : 'even'}">
            <c:set var="rowIndex" value="${rowIndex+1}" />
            <td width="200px"><c:out value="Index=${rowIndex}"></c:out> <bean:message key='myKey' /></td>
            <td>todoValue</td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:55:36.310

您是否尝试过 URI 语法？

```
<%@ taglib prefix="utils" uri="http://www.example.com/tld/utils"%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:09:51.627

要将页面中的变量传递到标签中，请使用属性指令。在你的标签文件中添加这个：

```
<%@ attribute name="rowIndex" required="true" type="java.lang.Integer" %> 
```

而在使用此标签的 jsp 中，只需添加 rowIndex 作为标签属性。

# u-boot - 如何调试uBoot？

> ID：10649536
> 
> 赞同：4
> 
> 时间：2012-05-18T08:52:48.237
> 
> 标签：u-boot

我试图让 Uboot 在飞思卡尔 mx28evk 板上运行。它编译得很好并给了我一个图像，我可以将它复制到 SD 卡。

当我打开电路板时，串行调试控制台没有输出，甚至没有错误消息。我可以确认该板与卡上的另一个工作图像一起工作正常。

找出导致问题的原因的适当下一步是什么？uBoot 分区上是否有任何模式或幻数可供我查找以确认它是有效的 uBoot？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T17:27:21.420

假设您已经配置了 U-Boot 版本，例如`u-boot-2013.07`使用`mx28evk_config`配置并`u-boot.sb`使用工具链构建了 Makefile 目标`arm-2009q1-203-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2`，并使用 将目标转换为`.sd`文件`./tools/mxsboot sd u-boot.sb u-boot.sd`，那么最可能的问题是您的 PMU 或SDRAM 配置。这些配置中的错误可能会导致**重置循环，****在您到达 U-Boot 横幅打印输出之前**发生重置。

确保您已按照[Denx U-Boot`doc/README.mx28evk`文件](http://git.denx.de/?p=u-boot.git;a=blob;f=doc/README.mx28evk;h=2fc50696f5ef3175ea5211565d59f33d1280aedd;hb=HEAD)中指定的方式设置 EVK 开关： 将引导模式 DIP 开关设置为：

*   引导模式选择：1 0 0 1（从 SD 卡插槽 0 - U42 引导）
*   JTAG PSWITCH RESET：向右（禁用复位）
*   电池来源：向下
*   墙 5V：向上
*   VDD 5V：向左（关闭）
*   按住按钮：向下（关闭）

调试此类问题所需的下一步是将串行输出**及早**放入 SPL SRAM 代码中。首先将`putc`语句放入`arch/arm/cpu/arm926ejs/mxs/spl_boot.c:mxs_common_spl_init()`. 例如：

```
void mxs_common_spl_init(const iomux_cfg_t *iomux_setup,
                    const unsigned int iomux_size)
{
    struct mxs_spl_data *data = (struct mxs_spl_data *)
            ((CONFIG_SYS_TEXT_BASE - sizeof(struct mxs_spl_data)) & ~0xf);

    debug_putc('a');

    uint8_t bootmode = mxs_get_bootmode_index();

    debug_putc('b');

    mxs_iomux_setup_multiple_pads(iomux_setup, iomux_size);

    debug_putc('c');

    mxs_power_init();

    debug_putc('d');

    mxs_mem_init();

    debug_putc('e');

    data->mem_dram_size = mxs_mem_get_size();

    data->boot_mode_idx = bootmode;

    mxs_power_wait_pswitch();
} 
```

我使用的`putc`这个是从 Freescale i.MX28 bootlet 代码中借来的：

```
void debug_putc(char ch)
{
    int loop = 0;
    while (((*(volatile hw_uartdbgfr_t *) ((0x80000000 + 0x74000) + 0x18)).U)&0x00000020)
    {
            loop++;
            if (loop > 10000)
            break;
    };
    ((*(volatile hw_uartdbgdr_t *) ((0x80000000 + 0x74000) + 0x0)).U = (ch));
} 
```

您需要的类型是：

```
typedef unsigned int   reg32_t;
typedef unsigned short reg16_t;
typedef unsigned char  reg8_t;

typedef union
{
    reg32_t  U;
    struct
    {
        unsigned DIV_EMI            :  6;
        unsigned RSRVD1             :  2;
        unsigned DIV_XTAL           :  4;
        unsigned RSRVD2             :  4;
        unsigned DCC_RESYNC_ENABLE  :  1;
        unsigned BUSY_DCC_RESYNC    :  1;
        unsigned RSRVD3             :  8;
        unsigned BUSY_SYNC_MODE     :  1;
        unsigned BUSY_REF_CPU       :  1;
        unsigned BUSY_REF_EMI       :  1;
        unsigned BUSY_REF_XTAL      :  1;
        unsigned SYNC_MODE_EN       :  1;
        unsigned CLKGATE            :  1;
    } B;
} hw_clkctrl_emi_t;

typedef union
{
    reg32_t  U;
    struct
    {
            unsigned TRG               :  5;
            unsigned RSRVD1            :  3;
            unsigned BO_OFFSET         :  3;
            unsigned RSRVD2            :  1;
            unsigned LINREG_OFFSET     :  2;
            unsigned RSRVD3            :  2;
            unsigned DISABLE_FET       :  1;
            unsigned ENABLE_LINREG     :  1;
            unsigned DISABLE_STEPPING  :  1;
            unsigned PWDN_BRNOUT       :  1;
            unsigned RSRVD4            : 12;
    } B;
} hw_power_vddactrl_t;

typedef union
{
    reg32_t  U;
    struct
    {
            reg8_t   DATA;
            unsigned FE           :  1;
            unsigned PE           :  1;
            unsigned BE           :  1;
            unsigned OE           :  1;
            unsigned RESERVED     :  4;
            reg16_t  UNAVAILABLE;
    } B;
} hw_uartdbgdr_t;

typedef union
{
    reg32_t  U;
    struct
    {
            unsigned CTS          :  1;
            unsigned DSR          :  1;
            unsigned DCD          :  1;
            unsigned BUSY         :  1;
            unsigned RXFE         :  1;
            unsigned TXFF         :  1;
            unsigned RXFF         :  1;
            unsigned TXFE         :  1;
            unsigned RI           :  1;
            unsigned RESERVED     :  7;
            reg16_t  UNAVAILABLE;
    } B;
} hw_uartdbgfr_t;

void debug_putc(char c); 
```

我把类型`arch/arm/cpu/arm926ejs/mxs/mxs_init.h`和`putc`实现放在`spl_boot.c`. 我也倾向于在and中放很多`putc`语句。`spl_power_init.c``spl_mem_init.c`

请注意，对 PMU 进行错误编程`spl_power_init.c`可能会导致复位，只有稍后您到达`spl_mem_init.c`. 不要让这个假装你出去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:52:45.893

尝试制作没有 U-Boot 的 SD 卡（mk_mx28_sd /dev/sdX）

在使用 U-Boot (mk_mx28_sd -u /dev/sdX) 制作 SD 卡之前尝试重新编译引导程序 (./ltib -p boot_stream.spec -f)

# mysql - 如何从存在 10 个列值中至少 3 个的数据库中检索记录？

> ID：10649539
> 
> 赞同：0
> 
> 时间：2012-05-18T08:52:55.263
> 
> 标签：mysql, sql, ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3.2.2，我想从数据库中检索*至少*存在 10 个列值中的 3 个的记录。也就是说，如果我有一个具有 10 个属性（表列）的类（一个 MySQL 数据库表），其值可以是`nil`（`null`存在属性值（不存在`null`）。

可能吗？如果是这样，如何做到这一点？

**更新**如果我有一个具有 10 个属性（表列）的类（一个 MySQL 数据库表），其值可以是`nil`（`null`）*或*“ `”（*不是* `null`），那么我想执行一个查询，以便返回对象（记录），其中至少这 10 个属性值中有 3 个存在（不是`null` *也不*是“ `”）。``

 ``* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T08:59:32.357

您可以与测试每一列的总和进行比较：[`IS NOT NULL`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_is-not-null) [`AND`](http://dev.mysql.com/doc/en/logical-operators.html#operator_and) [`<>`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_not-equal)

```
WHERE (  (colA IS NOT NULL AND colA <> ' ')
       + (colB IS NOT NULL AND colB <> ' ')
       + ...
       + (colJ IS NOT NULL AND colJ <> ' ')
      ) >= 3 
```

这是有效的，因为每个测试的布尔结果都隐式转换为`1`（如果为真）或`0`（如果为假）；因此总和是既不是`NULL`也不是的列数`' '`。

或者，您可以`NULL`使用以下方法处理此案例[`IFNULL()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_ifnull)：

```
WHERE (IFNULL(colA<>' ',0) + IFNULL(colB<>' ',0) + ... + IFNULL(colJ<>' ',0)) >= 3 
`````

# php - Mysql加入表数据，需要在1个查询中从两者中拖出数据

> ID：10649541
> 
> 赞同：1
> 
> 时间：2012-05-18T08:53:14.107
> 
> 标签：php, mysql, xml

因此，我正在根据 mysql 表中的数据生成一个 XML 文件，但需要能够使用我的查询从 2 个表中获取我想要的数据，并且不确定如何执行此操作。详情如下：

```
TABLE: store_locations
===================================
store_location_id
country
latitude
longitude
===================================

TABLE: store_locations_descriptions
===================================
store_location_id
name
description
city
=================================== 
```

PHP函数：

```
// Function to generate XML file based on store data from database
function fn_store_locator_generate_xml(){
    $qur = db_get_field("JOIN QUERY WANTED HERE");
    $ans=mysql_query($qur);
    $output.= "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<kml xmlns=\"http://earth.google.com/kml/2.2\">
<Document>";
    while($row=mysql_fetch_array($ans))
    {
      $output.="<name>".$row['name']."</name>";
      $output.="<description>".$row['description']."</surname>";
      $output.="<Placemark>";
      $output.="<name>".$row['name']."</name>";
      $output.="<Snippet>".$row['description']."</Snippet>";
      $output.="<description>".$row['description']."</description>";
      $output.="<Point>";
      $output.="<coordinates>".$row['latitude'].",".$row['longitude']."</coordinates>";
      $output.="</Point>";
      $output.="</Placemark>";
      $output.="</person>";
    } 
    $output.="</Document>";

    $file_name = "galleries.xml";
    $file_pointer = fopen($file_name, "w+");
    fwrite($file_pointer, "$output");
    fclose($file_pointer);
}
// generate the XML file
fn_store_locator_generate_xml(); 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:00:22.637

看起来你只需要一个加入。我假设您在这些表之间有 1 对 1 的关系。

```
select s.store_location_id,
    s.country,
    s.latitude,
    s.longitude,
    d.name,
    d.description,
    d.city
from store_locations s
    join store_locations_descriptions d
    on s.store_location_id = d.store_location_id 
```

你当然应该看看连接是如何工作的：http: [//www.keithjbrown.co.uk/vworks/mysql/mysql_p5.php](http://www.keithjbrown.co.uk/vworks/mysql/mysql_p5.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:59:15.630

SELECT * FROM store_locations JOIN store_locations_descriptions，但你应该看看 mysql join tutorial，join 在操作数据库中的数据时必不可少，例如：[mysql join tutorial](http://phpweby.com/tutorials/mysql/32)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:59:47.427

```
SELECT sl.country, sl.latitude, sl.longitude, sld.name, sld.description, sld.city
FROM store_locations sl
JOIN store_location_descriptions sld
ON sl.store_location_id=sld.store_location_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:00:19.953

尝试这个

```
select s.foo sd.foo
from store_locations s
join store_locations_descriptions sd
on s.store_location_id = sd.store_location_id 
```

# arrays - 最大总和小于限制

> ID：10649543
> 
> 赞同：0
> 
> 时间：2012-05-18T08:53:26.243
> 
> 标签：arrays, algorithm

我一直在尝试解决问题[http://www.spoj.pl/problems/RPLB/](http://www.spoj.pl/problems/RPLB/)但无法提出算法。

我的尝试——

1.  将输入分成两个数组，一个是奇数索引处的值，另一个是偶数索引处的值。之后，对两个数组进行排序并添加数字，直到总和小于限制。我很快就可以通过一些测试用例来解决这个问题。

2.  我将输入存储在一个数组中，并且每次我尝试添加最大的剩余数字，条件是它不与已添加的任何数字相邻，但这个算法也被证明是错误的。

现在，通过尝试所有可能的组合，我能想到的唯一解决方案是指数级的:(

请提出解决此问题的正确算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:13:33.147

这是带有附加约束的 KNAPSACK 问题（您不能选择两个相邻的灌木丛），并且附加约束不会使它变得更容易也不会变得更难。由于它与 KNAPSACK 一样难，即 NP 完全，除了蛮力搜索（可以优化但仍将保持指数/超多项式）之外，基本上没有其他事情可做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:57:19.177

这是一个众所周知的 NP 难题，因此如果您的解决方案是指数级的，请不要担心。

# javascript - 如何提供带有子项圆角的水平菜单？

> ID：10649544
> 
> 赞同：0
> 
> 时间：2012-05-18T08:53:29.070
> 
> 标签：javascript, html, dreamweaver

我想在我的情况下开发带有子项的菜单我想在java脚本中显示子项的圆角矩形我正在上传那个图像。我想显示带有尾框的菜单子项。

提前致谢..

# sitecore - 触发与 Sitecore 中的项目关联的配置文件

> ID：10649545
> 
> 赞同：1
> 
> 时间：2012-05-18T08:53:32.443
> 
> 标签：sitecore, sitecore-dms

我有一个关于触发与项目关联的配置文件的问题。如果访问者访问页面，则为该访问者触发与该页面关联的配置文件。

如何触发与代码中的项目关联的配置文件？该项目不是页面。如果访问者符合某种条件，我只想触发配置文件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:12:51.043

这一切都是通过`startTracking`管道完成的。不幸的是，看起来 Sitecore 已经“硬编码”了使用上下文项的管道。您应该可以通过更换`ProcessItem`处理器来完成此操作。

注意：以下内容未经测试。

1.  创建一个`Sitecore.Analytics.Pipelines.StartTracking.StartTrackingArgs`具有`Item`属性的子类
2.  创建 的子类`Sitecore.Analytics.Pipelines.StartTracking.ProcessItem`。使用反射器或 ILSpy 来拉取`Process`方法的现有逻辑。如果`StartTrackingArgs`传入的是您的子类，并且`Item`指定了属性，请使用它而不是上下文项。
3.  [使用带有 patch:attribute 的 Include 配置](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files-with-the-Sitecore-ASPNET-CMS.aspx)替换管道中现有的`ProcessItem`类型。`startTracking`
4.  `StartTrackingArgs`要触发调用，请构造一个 your和 call的实例`Sitecore.Analytics.Pipelines.StartTracking.StartTrackingPipeline.Run(yourArgs)`。

# php - 如何在两个封闭标签之间获取文本史努比 PHP

> ID：10649547
> 
> 赞同：0
> 
> 时间：2012-05-18T08:53:34.540
> 
> 标签：php, snoopy

如何使用 Snoopy PHP 示例检索两个标签之间的文本：

```
<html>
<body>
<h1> Test </h1>
</body>
</html> 
```

在这个例子中我想得到“测试”谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:46:02.983

**试试这个代码，它会给你结果**

```
<?php
 $doc =new DOMDocument();
 $doc->loadHTML("<html><body><h1>TEst</h1></body></html>");
 $xml=simplexml_import_dom($doc);
 $h1 = $xml->xpath('//h1');
 echo $h1[0];
?> 
```

# c# - WPF 自定义控件创建。？

> ID：10649554
> 
> 赞同：1
> 
> 时间：2012-05-18T08:53:54.757
> 
> 标签：c#, wpf, custom-controls, dependency-properties

我现在正在使用 WPF 应用程序，我必须为 DateTime Picker 编写自己的自定义控件。日期时间选择器没有任何设置用户定义日期格式的规定。

这样做的方法是什么..如果有人有任何想法请帮助我。

谢谢阿里吉特。

* * *

用户定义格式意味着.. 在我的 senarion 中，我有一个配置文件，我有 n 个轴，其中日期时间将被显示，我有一个下拉列表，它将以配置文件中配置的格式显示当前日期。现在对于每个轴，配置文件中的格式可能不同，在这个场景中，我希望日期选择器应该填充当前选择的轴的格式。

现在的问题是我已经尝试过@Sebastian Edelmeier已经指出的以下方法，但是

```
CultureInfo ci = new CultureInfo(Thread.CurrentThread.CurrentCulture.Name);
ci.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";
ci.DateTimeFormat.DateSeparator = "/";
Thread.CurrentThread.CurrentCulture = ci; 
```

因为我将改变应用程序的文化改变下拉菜单，这种方式是不可接受的。此外，控件是一个对话框，一旦当前线程被更新，我猜它不会恢复到另一种文化。

我完全被困在时间点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:56:05.903

也许您可以在 Binding 中使用 StringFormat 参数覆盖 DatePickerTextBox 的 ControlTemplate。例如

```
<Style TargetType="{x:Type DatePickerTextBox}">
   <Setter Property="Control.Template">
       <Setter.Value>
          <ControlTemplate>
              <TextBox x:Name="PART_TextBox" 
                   Text="{Binding Path=SelectedDate, RelativeSource={RelativeSource AncestorType={x:Type DatePicker}}, StringFormat=\{0:f\}}" />
              </ControlTemplate>
       </Setter.Value>
   </Setter>
</Style> 
```

其中 {0:f} 是所需的字符串格式。或者，您可以使用自定义转换器来获得所需的格式。我想这可能就足够了，因此您不必覆盖整个日期选择器的控制模板

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T09:03:29.297

If you want all the functionality and only change the way the date is described, you can just edit your CultureInfo :

```
 CultureInfo ci = new CultureInfo(Thread.CurrentThread.CurrentCulture.Name);
 ci.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";
 ci.DateTimeFormat.DateSeparator = "/";
 Thread.CurrentThread.CurrentCulture = ci; 
```

This should do the trick.

# vba - 是否可以使用 VBA 检查使用命名范围指定的工作簿是否打开？

> ID：10649555
> 
> 赞同：0
> 
> 时间：2012-05-18T08:53:55.837
> 
> 标签：vba, excel

我试图拼凑其他几个 VBA 来实现这一点，但我是该语言的初学者，所以没有运气。我想使用 VBA 来实现以下目标：

*   在加载时运行以下命令：
*   检查当前是否打开了另一个工作簿。该工作簿由一个命名范围 (input_sheet_location) 指定，该范围包含所述工作簿的整个网络位置。
*   如果没有打开，询问用户是否可以打开。
*   如果加载失败（即无法找到/被限制/命名范围为空），则退出子并显示错误消息并允许用户继续。
*   如果它已打开，请继续进行而不提示。

我 99% 确信所有这些事情都是可以实现的；我根本没有将它们串在一起所需的专业知识。因此，我真正缺乏的唯一难题是上面的第二个要点；还有什么，我可以（希望）弄清楚。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:34:11.617

我设法弄清楚了；感谢您的回复。

它是这样的：

```
Sub IsInputSheetOpen()
Dim Ret

Ret = IsWorkBookOpen(range("input_sheet_location_nobrackets"))

If Ret = True Then
    MsgBox "Input sheet is open."
Else
    MsgBox "Input sheet is not open. Auto output won't work without it."
End If
End Sub

Function IsWorkBookOpen(FileName As String)
Dim ff As Long, ErrNo As Long

On Error Resume Next
ff = FreeFile()
Open FileName For Input Lock Read As #ff
Close ff
ErrNo = Err
On Error GoTo 0

Select Case ErrNo
Case 0:    IsWorkBookOpen = False
Case 70:   IsWorkBookOpen = True
Case Else: Error ErrNo
End Select
End Function 
```

关键是在命名范围（input_sheet_location_nobrackets）内格式化我的文件位置，而不需要方括号，以便将其用作参考。我确定以上内容很混乱，但它似乎有效！

# java - 在 Java 中排序线程的执行

> ID：10649559
> 
> 赞同：2
> 
> 时间：2012-05-18T08:54:18.263
> 
> 标签：java, multithreading, synchronization

请看下面的代码：

**A级**

```
package generalscenarios;

public class A implements Runnable{

    public void run(){

        System.out.println("dsad");

    }

} 
```

**B类**

```
package generalscenarios;

public class B {

    public static void main(String[] args) throws InterruptedException {

        A a1  = new A();
        Thread a = new Thread(a1);
        a.start();
        System.out.println("hi");
    }
} 
```

当我执行 B 类时，我的线程 a 将由主线程启动，并且 hi 将由主线程在控制台上打印。但是打印“hi”和“dsad”的顺序是不确定的。

我希望在“dsad”之后打印“hi”。

我想到的解决方案是在主线程和线程“a”之间取一个共享变量。主线程将等待该变量，直到线程“a”通知他。

**A级**

```
package generalscenarios;

public class A implements Runnable{

    public void run(){

        System.out.println("dsad");
        synchronized (this) {
            this.notify();  
        }

    }

} 
```

**B类**

```
package generalscenarios;

public class B {

    public static void main(String[] args) throws InterruptedException {

        A a1  = new A();
        Thread a = new Thread(a1);
        a.start();
        synchronized (a1) {
            a1.wait();
        }
        System.out.println("hi");
    }
} 
```

**如果我的想法有效，请建议我。请提出任何其他方式来实现这一目标。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T08:57:53.360

你可以尝试类似的东西

```
public static void main(String[] args) throws InterruptedException {

    A a1  = new A();
    Thread a = new Thread(a1);
    a.start();
    a.join();
    System.out.println("hi");
} 
```

请阅读[Thread.join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)并阅读`Thread`.

# encoding - 在 Access 2007 中直接获取编码

> ID：10649566
> 
> 赞同：1
> 
> 时间：2012-05-18T08:54:58.923
> 
> 标签：encoding, utf-8, ms-access-2007

我有一个 UTF-8 编码文件，我想从中读取数据并将其放入表中。

要正确执行此操作，我需要了解以下内容：

1.  如果您只是创建数据库并创建表并创建一些字段而不更改任何默认设置，那么 Access 2007 中的默认编码是什么？

2.  数据库中的某些内容可以使用与默认编码不同的编码进行编码吗？即可以像所有其他数据库一样设置它吗？

3.  如果是这样，在什么“级别”上？即对于整个数据库、整个表或单个字段？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T07:37:49.273

我RTFM'd。

1.  UTF-8。

2.  否（来自谷歌搜索）。通过为“源”数据源设置连接字符集，您可以在导入时将文本转换为 UTF-8。

3.  见 2。

# html - div 拉伸包含画布

> ID：10649567
> 
> 赞同：0
> 
> 时间：2012-05-18T08:55:00.517
> 
> 标签：html, canvas, stretching

## 嗨，我想拥有这个：

`<div>
<canvas height="300px" width="200px"></canvas>
</div>`

我创建了 javascript 来渲染画布，有人可以建议如何根据画布大小拉伸 div 以及是否可以在没有 javascript 的情况下进行拉伸？我已经尝试过嵌套 div 的解决方案，但没有奏效。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:48:18.433

使用不同`display`的包含`div`然后事情应该工作（另见[这个 jsfiddle](http://jsfiddle.net/kpdgQ/)）：

```
<div>
    <canvas height="300px" width="200px"></canvas>
</div> 
```

CSS：

```
div {
    border: 2px solid blue; /* demo purposes */
    display: inline-block;
    line-height: 0;
}
canvas {
    background-color: khaki; /* demo purposes */
} 
```

PS。`line-height: 0`那里是为了确保在画布下方没有[呈现任何空间。](http://jsfiddle.net/JPdeJ/1/)另请参阅[此问题](https://stackoverflow.com/q/15807833/419956)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:59:15.323

if you can determine when your canvas size is changed then fire a event that will set the dimensions of the div dynamically as according to the changed dimensions of the canvas

# hp-quality-center - 使用 com4j 和 Quality Center 添加设计步骤进行测试

> ID：10649569
> 
> 赞同：1
> 
> 时间：2012-05-18T08:55:05.577
> 
> 标签：hp-quality-center, com4j

全部，

我正在使用 com4j 来操作 Quality Center，并且可以成功地在两者中创建测试计划和实验室、嵌套文件夹和实际项目。

我现在正在尝试将设计步骤添加到测试中，例如：

```
ITestFactory iTestFactory = sNode.testFactory().queryInterface(ITestFactory.class);
Com4jObject oTest = iTestFactory.addItem(name);
ITest iTest = oTest.queryInterface(ITest.class);
iTest.field("TS_DESCRIPTION", description);
iTest.field("TS_STATUS", "Design");
iTest.field("TS_DEV_COMMENTS", comments);
iTest.post(); 
```

这一切都很好，然后我尝试这样做：

```
IBaseFactory iFactory = iTest.designStepFactory().queryInterface(IBaseFactory.class);

IStep iStep = iFactory.addItem(1).queryInterface(IStep.class); // ends up null

iStep.field("ST_DESCRIPTION", "Step desc 1");
iStep.field("ST_EXPECTED", "Expected 1");
iStep.post(); 
```

但 iStep 总是以 null 结束。没有 IDesignStepFactory 接口，因此我试图在 queryInterface 调用中使用基础工厂。

检查 QC 帮助文件和 otaclient.dll 似乎表明没有 IDesignStepFactory 接口之类的东西，并且在（某些）VB 示例中使用了基本工厂，因此我在上面的尝试...

这是工厂方法可用的几个地方之一，但似乎没有显式接口，例如：

```
ITestSet ts; ts.tsTestFactory() // no ITSTestFActory interface exists... 
```

感激地收到任何指点，

西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T09:11:56.100

通常， IBaseFactory.addItem 应该接收相当于 DBNull 的参数，而不是其他任何参数，在您发布的代码中它是“1”。除非在相关实体的文档中明确指定它可以接受的其他值的集合及其用途。

在设计步骤的情况下，我猜它应该是 DBNull。

# c - 如何引用静态库中声明的变量？

> ID：10649575
> 
> 赞同：4
> 
> 时间：2012-05-18T08:55:27.973
> 
> 标签：c, linux, gcc, x86-64, glibc

我正在尝试使用修改后的 glibc 库。glibc 库静态链接到我的代码。`my_libc_var`我在 glibc 库中声明了一个新变量（让我们称之为）。但是，当我尝试在我的程序中包含该变量时（使用`extern`关键字 ofcourse），我得到了`undefined reference`错误。我怎么解决这个问题？

在 glibc 中，变量声明如下。

```
int my_libc_var; 
```

而在我的程序中，它声明如下。

```
extern int my_libc_var; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:40:08.080

检查在编译过程中，您添加的变量是否包含在使用`-fvisibility=hidden`或等选项编译的源文件中`-fvisibility=internal`。这将使您的符号无法从其他模块引用。

只要您使用 gcc，就可以使用以下任一方法获得类似的行为：

```
#pragma GCC visibility push("hidden") 
```

可以放在源文件的开头，或者：

```
int var __attribute__ ((visibility ("hidden"))); 
```

在符号的定义中（显然你没有放置，但我把它放在这里是为了完成我的答案）。

更多信息，您可以参考[gcc 属性概览页面](http://ohse.de/uwe/articles/gcc-attributes.html#func-visibility)。

# java - Java Regex：查找匹配开始和结束的单词

> ID：10649579
> 
> 赞同：3
> 
> 时间：2012-05-18T08:55:48.707
> 
> 标签：java, regex

我一般是正则表达式的新手，我开始阅读更多关于它们的信息，所以要温柔:-)

我想找到所有以`my("`or开头的单词`my('`。单词本身可以包含下划线、字符、数字，基本上是任何字符。但它应该以`")`or结尾`')`。

所以我尝试了以下方法：

```
Pattern.compile("_(\"(.*)\")"); // for underscores first, instead of my 
```

和

```
Pattern.compile("(my)(\"(.*)\")"); 
```

但这也给了我其他的东西，我看不出我为什么以及在哪里犯了这个思维错误......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:01:29.190

如果您想匹配但不匹配`my("xxx")`，请尝试以下表达式：`my('xxx')``my("xxx')`

```
my\((?:"[^"]*"|'[^']*')\) 
```

下面是表达式的简短分解：

*   `my\(...\)` 表示比赛应该`my(`以`)`
*   `(?:"[^"]*"|'[^']*')`表示被双引号或单引号包围的字符序列（因此字符类表示“任何不是双引号的字符”或“任何不是单引号的字符”）

*编辑：*

表达式的问题`(my)("(.*)")`是，它是贪婪的，并且由于匹配任何东西，匹配将从最后一个开始`my("`但在最后一个结束。因此它会匹配，因为匹配。`")``.*``my("xxx") your("yyy")``.*``xxx") your("yyy`

有关正则表达式的更多信息，请参见[http://www.regular-expressions.info](http://www.regular-expressions.info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:03:01.170

In regular expressions, the brackets (`(` and `)`) are actually reserved characters so you will need to escape those. So this regex should do the trick: `_\\(\"(.*)\"\\)`. However, you also stated that you wanted to find words which *must begin* with `my(` and *must end* with `")`. So you will need to add anchors like so: `^my\\([\"'](.*)[\"']\\)$`. This should match any string which starts with `my("` or `my("'` and ends with `")` or `')`.

The `^` and `$` are anchors. The `^` will instruct the regex engine to start matching from the beginning of the string and the `$` will instruct the regex engine to stop matching at the end of the string. If you remove these anchors, the following would be considered as matches: `foo my('...') bar`, `my("...") bar`, etc.

This however will make no distinction and will match also strings like `my("...')` and `my('...")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:20:06.860

使用单词边界选项，

```
\bmy\((["']).*?\1\)(?:\b|$) 
```

# java - 使用 Lucene 进行标记化和索引，如何处理外部标记化和词性？

> ID：10649581
> 
> 赞同：6
> 
> 时间：2012-05-18T08:55:55.817
> 
> 标签：java, lucene, nlp, tokenize

我想构建我自己的 - 这里不确定是哪一个 - 标记器（从 Lucene 的角度来看）或我自己的分析器。我已经编写了一个代码，用 word 标记我的文档（作为 List < String > 或 List < *Word* >，其中*Word*是一个类，只有一种具有 3 个 public String 的容器：word、pos、lemma - pos 代表部分词性标签）。

我不确定要索引什么，可能只有“ *Word.lemma* ”或类似“ *Word.lemma + '#' + Word.pos* ”的东西，可能我会根据部分从停用词列表中进行一些过滤演讲。

顺便说一句，这是我的误解：我不确定应该在哪里插入 Lucene API，

我应该将自己的标记器包装在新的标记器中吗？我应该重写 TokenStream 吗？我应该认为这是分析器而不是标记器的工作吗？还是我应该绕过所有内容并通过使用 IndexWriter、Fieldable 等直接在索引中添加我的单词来直接构建我的索引？（如果是这样，您是否知道有关在绕过分析过程时如何从头开始创建自己的索引的任何文档）

此致

**编辑**：可能是最简单的方法应该是 org.apache.commons.lang.StringUtils.join 我的*Word* -s，在我的个人标记器/分析器的出口有一个空格，并依靠 WhiteSpaceTokenizer 来提供 Lucene（和其他经典过滤器) ?

**编辑**：所以，我已经阅读**了 Larsmans**指出的**EnglishLemmaTokenizer** ...但我仍然感到困惑的是，我以完整的 *List < Word > * （*Word*类包装*.form/. pos/.lemma*），这个过程依赖于我用 Java 包装的外部二进制文件（这是必须做的/不能做的 - 它不是从消费者的角度来看，结果我得到了完整的列表）我仍然不明白我应该如何再次包装它以回到正常的 Lucene 分析过程。

我还将使用带有 TF.IDF 的 TermVector 功能，例如评分（可能是重新定义我自己的），我也可能对邻近搜索感兴趣，因此，在将它们提供给 Lucene 之前从它们的词性中丢弃一些词内置标记器或内部分析器可能看起来是个坏主意。而且我很难想到将 Word.form / Word.pos / Word.lemma（甚至其他 Word.anyOtherUnterestingAttribute）包装到 Lucene 方式的“正确”方式。

**编辑：** 顺便说一句，这是我写的一段代码，灵感来自@Larsmans：

```
class MyLuceneTokenizer extends TokenStream {

    private PositionIncrementAttribute posIncrement;
    private CharTermAttribute termAttribute;

    private List<TaggedWord> tagged;
    private int position;

    public MyLuceneTokenizer(Reader input, String language, String pathToExternalBinary) {
        super();

        posIncrement = addAttribute(PositionIncrementAttribute.class);
        termAttribute = addAttribute(CharTermAttribute.class); // TermAttribute is deprecated!

        // import com.google.common.io.CharStreams;            
        text = CharStreams.toString(input); //see http://stackoverflow.com/questions/309424/in-java-how-do-i-read-convert-an-inputstream-to-a-string
        tagged = MyTaggerWrapper.doTagging(text, language, pathToExternalBinary);
        position = 0;
    }

    public final boolean incrementToken()
            throws IOException {
        if (position > tagged.size() -1) {
            return false;
        }

        int increment = 1; // will probably be changed later depending upon any POS filtering or insertion @ same place...
        String form = (tagged.get(position)).word;
        String pos = (tagged.get(position)).pos;
        String lemma = (tagged.get(position)).lemma;

        // logic filtering should be here...
        // BTW we have broken the idea behing the Lucene nested filters or analyzers! 
        String kept = lemma;

        if (kept != null) {
            posIncrement.setPositionIncrement(increment);
            char[] asCharArray = kept.toCharArray();
            termAttribute.copyBuffer(asCharArray, 0, asCharArray.length);
            //termAttribute.setTermBuffer(kept);
            position++;
        }

        return true;
    }
}

class MyLuceneAnalyzer extends Analyzer {
    private String language;
    private String pathToExternalBinary;

    public MyLuceneAnalyzer(String language, String pathToExternalBinary) {
        this.language = language;
        this.pathToExternalBinary = pathToExternalBinary;
    }

    @Override
    public TokenStream tokenStream(String fieldname, Reader input) {
        return new MyLuceneTokenizer(input, language, pathToExternalBinary);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:02:36.663

There are various options here, but when I tried to wrap a POS tagger in Lucene, I found that implementing a new `TokenStream` and wrapping that inside a new `Analyzer` was the easiest option. In any case, mucking with `IndexWriter` directly seems like a bad idea. You can find my code [on my GitHub](https://github.com/larsmans/lucene-stanford-lemmatizer).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:38:06.400

如果你想使用 UIMA，Salmon Run 有一个[例子](http://sujitpal.blogspot.ch/2011/06/running-uima-analysis-engine-in-lucene.html)。但是在 Lucene contrib 模块中努力包含 UIMA 工作流，请参见[此处](https://issues.apache.org/jira/browse/LUCENE-3731)和[此处](http://mvnrepository.com/artifact/org.apache.lucene/lucene-analyzers-uima/4.0.0-ALPHA)。

# ruby - 继续安装在某个点中断的 gem

> ID：10649587
> 
> 赞同：3
> 
> 时间：2012-05-18T08:56:09.720
> 
> 标签：ruby, installation, gem

我需要安装 mysql2 gem，但它在与“错误：无法构建 gem 本机扩展”链接时中断。它确实错误地使用了-lmysqlclient_r，而它应该使用-lmysqlclient。

所以我做什么：

```
$ cd /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11/ext/mysql2
$ vi Makefile # change -lmysqlclient_r to -lmysqlclient
$ make
linking shared-object mysql2/mysql2.so
$ cd ../../ 
```

我现在应该怎么做才能从这一点继续安装？

更新：我认为运行 make install “有效”。但是我的 ruby​​ 安装非常糟糕，所以我决定从头开始，这次是用户空间安装。进入mysql2安装后：

```
$ make install
/usr/bin/install -c -m 0755 mysql2.so /data/web/rails/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11/lib/mysql2

$ rails server -d
/data/web/rails/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'mysql2 (>= 0) ruby' in the gems available on this machine. (Bundler::GemNotFound)
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:05:41.947

在 a 之后`make`，你应该做 a `make install`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:05:20.420

答案在这里： http: [//guides.rubygems.org/command-reference/#gem_install](http://guides.rubygems.org/command-reference/#gem_install)

从“如果您通过编辑 gem 文件来纠正编译错误，您将需要手动编写规范”开始。根据例子。

# facebook - Facebook Graph API 中每天的调用次数是如何计算的。

> ID：10649589
> 
> 赞同：0
> 
> 时间：2012-05-18T08:56:22.123
> 
> 标签：facebook, facebook-graph-api, limit

阅读有关阈值的 Facebook 政策后： [https](https://developers.facebook.com/policy/#features) ://developers.facebook.com/policy/#features “如果您超过或计划超过以下任何阈值，请通过创建带有“阈值”的机密错误报告与我们联系政策”标签，因为您可能会受到附加条款的约束：（>5M MAU）或（>100M API 调用每天）或（>50M 印象每天）。”

如果每天的调用被视为“http请求”或每个项目的请求，我想更好地理解。

如果我用连接的 id 拨打电话，它是否计入请求的项目？例如： [https ://graph.facebook.com/?ids=123456,456789](https://graph.facebook.com/?ids=123456,456789)

它被认为是来自 facebook 平台的 1 个呼叫还是 2 个呼叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:19:41.190

您可以批量处理您的请求并将它们全部放在一个中，每批的最大请求数为 50，您可以在此处找到更多信息：[https ://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

# linq - 如何在空集合上使用聚合运算符避免 Linq 异常？

> ID：10649593
> 
> 赞同：1
> 
> 时间：2012-05-18T08:56:33.497
> 
> 标签：linq, c#-4.0

我喜欢在 db 表上编写综合查询，如下所示：

```
Decimal sum = MyDataContext.MyTable.Where(el => el.Client == selectedClien).Sum(el => el.Value.GetValueOrDefault(0)); 
```

不幸的是，如果 where 子句根本不返回任何元素，它就会引发错误。在使用 .Sum 之前，我应该检查 .Any 是否有一些元素，但生成的代码与最初的代码相比很难看。不要认为放置一个 try/catch 块是一个好的解决方案。

您有比以下代码更好的建议吗？

```
if (MyDataContext.MyTable.Where(el => el.Client == selectedClien).Any())
  sum =  MyDataContext.MyTable.Where(el => el.Client == selectedClien).Sum(el => el.Value.GetValueOrDefault(0));
else sum = 0; 
```

谢谢菲利波

经过更多调查后添加：

```
MyDataContext.MyTable.Where(el => el.Client == selectedClien).Sum(el => el.Value).GetValueOrDefault(0) 
```

当集合为空时，上面的代码运行良好。我将 'GetValueOrDefault(0)' 放在 .Sum() 内的 lambda 中的原因是字段 'Value' 是 Decimal？，所以它可能为空。我还没有测试某些元素具有空值的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:03:16.320

我写了一个扩展来避免这种情况。

```
 public static decimal? SafeSum<T>(this IEnumerable<T> source, Func<T, decimal?> selector)
    {
        try
        {
            return source.Sum(selector);
        }
        catch
        {
            /* ignore exception */
            return null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:41:37.233

令人惊讶的是（对我来说）我引入了一个可能的异常原因，试图让我的代码更健壮！编写健壮代码的正确方法如下：

```
Decimal sum = MyDataContext.MyTable.Where(el => el.Client == selectedClien).Sum(el => el.Value).GetValueOrDefault(0); 
```

如上面的评论和 msdn 文档中所述

```
Enumerable.Sum<TSource> Method (IEnumerable<TSource>, Func<TSource, Nullable<Decimal>>) 
```

对空值和空集合具有鲁棒性。GetValueOrDefault() 确保它返回一个非空的十进制。

无论如何，为什么初始代码抛出异常仍然不是很清楚。

# objective-c - 如何从 Objective-C 代码中提取 AST？

> ID：10649594
> 
> 赞同：8
> 
> 时间：2012-05-18T08:56:39.500
> 
> 标签：objective-c, parsing, code-analysis, clang, abstract-syntax-tree

我需要分析 Objective-C 静态代码，主要是 AST，在查看了可能的工具后，我发现 LLVM 中的 Clang 工具可以转储 AST，所以我使用终端使用以下命令对其进行测试：

```
clang -cc1 -ast-dump ~/SomeTest.m 
```

但我收到此错误：

```
In file included from /Users/myusername/SomeTest.m:9:
/Users/myusername/SomeTest.h:9:9: fatal error: 'UIKit/UIKit.h' file not found
#import <UIKit/UIKit.h>
        ^
typedef __int128_t __int128_t;
typedef __uint128_t __uint128_t;
typedef SEL *SEL;
typedef id id;
typedef Class *Class;
struct __va_list_tag {
    unsigned int gp_offset;
    unsigned int fp_offset;
    void *overflow_arg_area;
    void *reg_save_area;
};
typedef struct __va_list_tag __va_list_tag;
typedef __va_list_tag __builtin_va_list[1];
@interface just4testViewController@end
@implementation just4testViewController
- (void) dealloc (CompoundStmt 0x7f86b183b110 </Users/myusername/SomeTest.m:14:1, line:16:1>)

- (void) didReceiveMemoryWarning (CompoundStmt 0x7f86b183b2a0 </Users/myusername/SomeTest.m:19:1, line:24:1>)

- (void) viewDidUnload (CompoundStmt 0x7f86b183b430 </Users/myusername/SomeTest.m:37:1, line:41:1>)

- (id) shouldAutorotateToInterfaceOrientation:(id)interfaceOrientation (CompoundStmt 0x7f86b183b648 </Users/myusername/SomeTest.m:44:1, line:47:1>)

@end
1 error generated. 
```

知道为什么我会得到这个吗？我不介意使用任何工具从 Objective-C 代码中提取 AST，只要它是可靠的并为输出提供文档

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:18:21.970

编译器没有找到 UIKit 框架。你必须告诉它使用它：

```
clang -framework UIKit -cc1 -ast-dump ~/SomeTest.m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:29:44.343

尝试`-Xclang -ast-dump`代替`-cc1 -ast-dump`. （标准免责声明：任何使用`-Xclang`或`-cc1`正在使用编译器的不稳定接口的东西。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:05:09.113

OP 说*我不介意使用任何工具从 Objective-C 代码中提取 AST ......*

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)可以为 Objective-C 做到这一点。

对于 DMS 生成的解析器“domainparser”的此命令行：

```
 run \DMS\Domains\C\ObjectiveCv2\Tools\Parser\domainparser ++AST "C:\temp\test.m" 
```

这个目标 C 文件“test.m”：

```
 @implementation GTLClientLoginAuthorizationArgs

 @synthesize request = request_,
     delegate = delegate_,
     selector = sel_,
     completionHandler = completionHandler_,
     thread = thread_,
     error = error_;

 + (GTLClientLoginAuthorizationArgs *)argsWithRequest:(NSMutableURLRequest *)req
                     delegate:(id)delegate
                     selector:(SEL)sel
                completionHandler:(id)completionHandler
                       thread:(NSThread *)thread {
   GTLClientLoginAuthorizationArgs *obj;
   obj = [[[GTLClientLoginAuthorizationArgs alloc] init] autorelease];
   obj.request = req;
   obj.delegate = delegate;
   obj.selector = sel;
   obj.completionHandler = completionHandler;
   obj.thread = thread;
   return obj;
 }

 - (void)dealloc {
   self.request = nil;
   self.delegate = nil;
   self.selector = NULL;
   self.completionHandler = nil;
   self.thread = nil;
   self.error = nil;
   [super dealloc];
 }
 @end 
```

使用 AST 生成此输出：

```
Domain Parser for C~ObjectiveCv2 2.4.4
Copyright (C) Semantic Designs 1996-2012; All Rights Reserved
(translation_unit@C~ObjectiveCv2=2#422f080^0 Line 1 Column 1 File C:/temp/test.m
 (class_implementation@C~ObjectiveCv2=1048#422f140 Line 1 Column 1 File C:/temp/test.m
  (IDENTIFIER@C~ObjectiveCv2=1270#4228b40[`GTLClientLoginAuthorizationArgs'] Line 1 Column 17 File C:/temp/test.m)IDENTIFIER
  (super_class_option@C~ObjectiveCv2=1046#4228b80 Line 3 Column 1 File C:/temp/test.m)super_class_option
  (instance_variables@C~ObjectiveCv2=1061#4228bc0 Line 3 Column 1 File C:/temp/test.m)instance_variables
  (implementation_definition_list@C~ObjectiveCv2=1079#422f0a0 Line 3 Column 1 File C:/temp/test.m
   (implementation_definition_list@C~ObjectiveCv2=1079#422e8c0 Line 3 Column 1 File C:/temp/test.m
   |(implementation_definition_list@C~ObjectiveCv2=1079#42290a0 Line 3 Column 1 File C:/temp/test.m
   | (implementation_definition_list@C~ObjectiveCv2=1078#4228c00 Line 3 Column 1 File C:/temp/test.m)implementation_definition_list
   | (property_implementation@C~ObjectiveCv2=1131#4229080 Line 3 Column 1 File C:/temp/test.m
   |  (property_synthesize_list@C~ObjectiveCv2=1134#4229060 Line 3 Column 13 File C:/temp/test.m
   |   (property_synthesize_list@C~ObjectiveCv2=1134#4228fc0 Line 3 Column 13 File C:/temp/test.m
   |   |(property_synthesize_list@C~ObjectiveCv2=1134#4228f40 Line 3 Column 13 File C:/temp/test.m
   |   | (property_synthesize_list@C~ObjectiveCv2=1134#4228e80 Line 3 Column 13 File C:/temp/test.m
   |   |  (property_synthesize_list@C~ObjectiveCv2=1134#4228de0 Line 3 Column 13 File C:/temp/test.m
   |   |   (property_synthesize_list@C~ObjectiveCv2=1133#4228d00 Line 3 Column 13 File C:/temp/test.m
   |   |   |(property_synthesize_item@C~ObjectiveCv2=1136#4228cc0 Line 3 Column 13 File C:/temp/test.m
   |   |   | (IDENTIFIER@C~ObjectiveCv2=1270#4228c40[`request'] Line 3 Column 13 File C:/temp/test.m)IDENTIFIER
   |   |   | (IDENTIFIER@C~ObjectiveCv2=1270#4228c80[`request_'] Line 3 Column 23 File C:/temp/test.m)IDENTIFIER
   |   |   |)property_synthesize_item
   |   |   )property_synthesize_list
   |   |   (property_synthesize_item@C~ObjectiveCv2=1136#4228dc0 Line 4 Column 13 File C:/temp/test.m
   |   |   |(IDENTIFIER@C~ObjectiveCv2=1270#4228d80[`delegate'] Line 4 Column 13 File C:/temp/test.m)IDENTIFIER
   |   |   |(IDENTIFIER@C~ObjectiveCv2=1270#4228da0[`delegate_'] Line 4 Column 24 File C:/temp/test.m)IDENTIFIER
   |   |   )property_synthesize_item
   |   |  )property_synthesize_list
   |   |  (property_synthesize_item@C~ObjectiveCv2=1136#4228e60 Line 5 Column 13 File C:/temp/test.m
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#4228e20[`selector'] Line 5 Column 13 File C:/temp/test.m)IDENTIFIER
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#4228e40[`sel_'] Line 5 Column 24 File C:/temp/test.m)IDENTIFIER
   |   |  )property_synthesize_item
   |   | )property_synthesize_list
   |   | (property_synthesize_item@C~ObjectiveCv2=1136#4228f20 Line 6 Column 13 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4228ea0[`completionHandler'] Line 6 Column 13 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4228f00[`completionHandler_'] Line 6 Column 33 File C:/temp/test.m)IDENTIFIER
   |   | )property_synthesize_item
   |   |)property_synthesize_list
   |   |(property_synthesize_item@C~ObjectiveCv2=1136#4228fa0 Line 7 Column 13 File C:/temp/test.m
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#4228f60[`thread'] Line 7 Column 13 File C:/temp/test.m)IDENTIFIER
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#4228f80[`thread_'] Line 7 Column 22 File C:/temp/test.m)IDENTIFIER
   |   |)property_synthesize_item
   |   )property_synthesize_list
   |   (property_synthesize_item@C~ObjectiveCv2=1136#4229040 Line 8 Column 13 File C:/temp/test.m
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#4228fe0[`error'] Line 8 Column 13 File C:/temp/test.m)IDENTIFIER
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#4229020[`error_'] Line 8 Column 21 File C:/temp/test.m)IDENTIFIER
   |   )property_synthesize_item
   |  )property_synthesize_list
   | )property_implementation
   |)implementation_definition_list
   |(class_method_definition@C~ObjectiveCv2=1087#422ea00 Line 10 Column 1 File C:/temp/test.m
   | (method_type@C~ObjectiveCv2=1103#4229200 Line 10 Column 3 File C:/temp/test.m
   |  (type_id@C~ObjectiveCv2=647#42291c0 Line 10 Column 4 File C:/temp/test.m
   |   (AMBIGUITY<type_specifier=388>@C~ObjectiveCv2=1390#4228ca0{2} Line 10 Column 4 File C:/temp/test.m
   |   |(type_specifier@C~ObjectiveCv2=1144#4229100 Line 10 Column 4 File C:/temp/test.m
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#42290c0^2#4228ca0:2#4229100:1[`GTLClientLoginAuthorizationArgs'] Line 10 Column 4 File C:/temp/test.m)IDENTIFIER
   |   | (protocol_option@C~ObjectiveCv2=1057#42290e0 Line 10 Column 36 File C:/temp/test.m)protocol_option
   |   |)type_specifier
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#42290c0^2#4228ca0:2#4229100:1... [ALREADY PRINTED] ...)
   |   )AMBIGUITY
   |   (ptr_operator@C~ObjectiveCv2=640#4229120 Line 10 Column 36 File C:/temp/test.m)ptr_operator
   |  )type_id
   | )method_type
   | (keyword_selector@C~ObjectiveCv2=1095#4229940 Line 10 Column 38 File C:/temp/test.m
   |  (keyword_selector@C~ObjectiveCv2=1095#4229720 Line 10 Column 38 File C:/temp/test.m
   |   (keyword_selector@C~ObjectiveCv2=1095#42296a0 Line 10 Column 38 File C:/temp/test.m
   |   |(keyword_selector@C~ObjectiveCv2=1095#4229580 Line 10 Column 38 File C:/temp/test.m
   |   | (keyword_selector@C~ObjectiveCv2=1094#42294a0 Line 10 Column 38 File C:/temp/test.m
   |   |  (keyword_declarator@C~ObjectiveCv2=1099#4229480 Line 10 Column 38 File C:/temp/test.m
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#42291e0[`argsWithRequest'] Line 10 Column 38 File C:/temp/test.m)IDENTIFIER
   |   |   (method_type@C~ObjectiveCv2=1103#4229440 Line 10 Column 54 File C:/temp/test.m
   |   |   |(type_id@C~ObjectiveCv2=647#42293c0 Line 10 Column 55 File C:/temp/test.m
   |   |   | (AMBIGUITY<type_specifier=388>@C~ObjectiveCv2=1390#4229300{2} Line 10 Column 55 File C:/temp/test.m
   |   |   |  (type_specifier@C~ObjectiveCv2=1144#42292a0 Line 10 Column 55 File C:/temp/test.m
   |   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#4229220^2#4229300:2#42292a0:1[`NSMutableURLRequest'] Line 10 Column 55 File C:/temp/test.m)IDENTIFIER
   |   |   |   (protocol_option@C~ObjectiveCv2=1057#4229260 Line 10 Column 75 File C:/temp/test.m)protocol_option
   |   |   |  )type_specifier
   |   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4229220^2#4229300:2#42292a0:1... [ALREADY PRINTED] ...)
   |   |   | )AMBIGUITY
   |   |   | (ptr_operator@C~ObjectiveCv2=640#42293a0 Line 10 Column 75 File C:/temp/test.m)ptr_operator
   |   |   |)type_id
   |   |   )method_type
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#42293e0[`req'] Line 10 Column 77 File C:/temp/test.m)IDENTIFIER
   |   |  )keyword_declarator
   |   | )keyword_selector
   |   | (keyword_declarator@C~ObjectiveCv2=1099#4229600 Line 11 Column 45 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4229460[`delegate'] Line 11 Column 45 File C:/temp/test.m)IDENTIFIER
   |   |  (method_type@C~ObjectiveCv2=1103#4228d40 Line 11 Column 54 File C:/temp/test.m
   |   |   (type_specifier@C~ObjectiveCv2=1143#42294e0 Line 11 Column 55 File C:/temp/test.m
   |   |   |(protocol_option@C~ObjectiveCv2=1057#4229500 Line 11 Column 57 File C:/temp/test.m)protocol_option
   |   |   )type_specifier
   |   |  )method_type
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4228d20[`delegate'] Line 11 Column 58 File C:/temp/test.m)IDENTIFIER
   |   | )keyword_declarator
   |   |)keyword_selector
   |   |(keyword_declarator@C~ObjectiveCv2=1099#4229680 Line 12 Column 45 File C:/temp/test.m
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#42295a0[`selector'] Line 12 Column 45 File C:/temp/test.m)IDENTIFIER
   |   | (method_type@C~ObjectiveCv2=1103#4229280 Line 12 Column 54 File C:/temp/test.m
   |   |  (simple_type_specifier@C~ObjectiveCv2=1141#42295c0 Line 12 Column 55 File C:/temp/test.m)simple_type_specifier
   |   | )method_type
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#4229560[`sel'] Line 12 Column 59 File C:/temp/test.m)IDENTIFIER
   |   |)keyword_declarator
   |   )keyword_selector
   |   (keyword_declarator@C~ObjectiveCv2=1099#4229700 Line 13 Column 36 File C:/temp/test.m
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#4229520[`completionHandler'] Line 13 Column 36 File C:/temp/test.m)IDENTIFIER
   |   |(method_type@C~ObjectiveCv2=1103#42294c0 Line 13 Column 54 File C:/temp/test.m
   |   | (type_specifier@C~ObjectiveCv2=1143#42296c0 Line 13 Column 55 File C:/temp/test.m
   |   |  (protocol_option@C~ObjectiveCv2=1057#42296e0 Line 13 Column 57 File C:/temp/test.m)protocol_option
   |   | )type_specifier
   |   |)method_type
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#4228c60[`completionHandler'] Line 13 Column 58 File C:/temp/test.m)IDENTIFIER
   |   )keyword_declarator
   |  )keyword_selector
   |  (keyword_declarator@C~ObjectiveCv2=1099#4229920 Line 14 Column 47 File C:/temp/test.m
   |   (IDENTIFIER@C~ObjectiveCv2=1270#4229760[`thread'] Line 14 Column 47 File C:/temp/test.m)IDENTIFIER
   |   (method_type@C~ObjectiveCv2=1103#4229900 Line 14 Column 54 File C:/temp/test.m
   |   |(type_id@C~ObjectiveCv2=647#4229860 Line 14 Column 55 File C:/temp/test.m
   |   | (AMBIGUITY<type_specifier=388>@C~ObjectiveCv2=1390#4229320{2} Line 14 Column 55 File C:/temp/test.m
   |   |  (type_specifier@C~ObjectiveCv2=1144#42297e0 Line 14 Column 55 File C:/temp/test.m
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#42297c0^2#4229320:2#42297e0:1[`NSThread'] Line 14 Column 55 File C:/temp/test.m)IDENTIFIER
   |   |   (protocol_option@C~ObjectiveCv2=1057#4229740 Line 14 Column 64 File C:/temp/test.m)protocol_option
   |   |  )type_specifier
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#42297c0^2#4229320:2#42297e0:1... [ALREADY PRINTED] ...)
   |   | )AMBIGUITY
   |   | (ptr_operator@C~ObjectiveCv2=640#4229840 Line 14 Column 64 File C:/temp/test.m)ptr_operator
   |   |)type_id
   |   )method_type
   |   (IDENTIFIER@C~ObjectiveCv2=1270#42298c0[`thread'] Line 14 Column 66 File C:/temp/test.m)IDENTIFIER
   |  )keyword_declarator
   | )keyword_selector
   | (declaration_star@C~ObjectiveCv2=1085#4229980 Line 14 Column 73 File C:/temp/test.m)declaration_star
   | (compound_statement@C~ObjectiveCv2=403#422e920 Line 14 Column 73 File C:/temp/test.m
   |  (statement_seq@C~ObjectiveCv2=405#422e3e0 {8} Line 15 Column 3 File C:/temp/test.m
   |   (AMBIGUITY<statement=332>@C~ObjectiveCv2=1390#4229780{2} Line 15 Column 3 File C:/temp/test.m
   |   |(expression_statement@C~ObjectiveCv2=400#422e200 Line 15 Column 3 File C:/temp/test.m
   |   | (multiplicative_expression@C~ObjectiveCv2=209#4229e60 Line 15 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#42299e0^3#42297a0:1#4229a80:1#4229e60:1[`GTLClientLoginAuthorizationArgs'] Line 15 Column 3 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4229ca0^2#4229d60:2#4229e60:2[`obj'] Line 15 Column 36 File C:/temp/test.m)IDENTIFIER
   |   | )multiplicative_expression
   |   |)expression_statement
   |   |(simple_declaration@C~ObjectiveCv2=515#422e1e0 Line 15 Column 3 File C:/temp/test.m
   |   | (AMBIGUITY<type_specifier=388>@C~ObjectiveCv2=1390#42297a0{2} Line 15 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#42299e0^3#42297a0:1#4229a80:1#4229e60:1... [ALREADY PRINTED] ...)
   |   |  (type_specifier@C~ObjectiveCv2=1144#4229a80 Line 15 Column 3 File C:/temp/test.m
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#42299e0^3#42297a0:1#4229a80:1#4229e60:1... [ALREADY PRINTED] ...)
   |   |   (protocol_option@C~ObjectiveCv2=1057#4229a20 Line 15 Column 35 File C:/temp/test.m)protocol_option
   |   |  )type_specifier
   |   | )AMBIGUITY
   |   | (declarator@C~ObjectiveCv2=624#4229d60 Line 15 Column 35 File C:/temp/test.m
   |   |  (ptr_operator@C~ObjectiveCv2=640#4229cc0 Line 15 Column 35 File C:/temp/test.m)ptr_operator
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#4229ca0^2#4229d60:2#4229e60:2... [ALREADY PRINTED] ...)
   |   | )declarator
   |   |)simple_declaration
   |   )AMBIGUITY
   |   (expression_statement@C~ObjectiveCv2=400#422e3c0 Line 16 Column 3 File C:/temp/test.m
   |   |(assignment_expression@C~ObjectiveCv2=356#422e360 Line 16 Column 3 File C:/temp/test.m
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422e1c0[`obj'] Line 16 Column 3 File C:/temp/test.m)IDENTIFIER
   |   | (primary_expression@C~ObjectiveCv2=1158#422e340 Line 16 Column 9 File C:/temp/test.m
   |   |  (primary_expression@C~ObjectiveCv2=1158#422e320 Line 16 Column 10 File C:/temp/test.m
   |   |   (primary_expression@C~ObjectiveCv2=1158#422e2e0 Line 16 Column 11 File C:/temp/test.m
   |   |   |(IDENTIFIER@C~ObjectiveCv2=1270#422e220[`GTLClientLoginAuthorizationArgs'] Line 16 Column 12 File C:/temp/test.m)IDENTIFIER
   |   |   |(IDENTIFIER@C~ObjectiveCv2=1270#422e2a0[`alloc'] Line 16 Column 44 File C:/temp/test.m)IDENTIFIER
   |   |   )primary_expression
   |   |   (IDENTIFIER@C~ObjectiveCv2=1270#422e2c0[`init'] Line 16 Column 51 File C:/temp/test.m)IDENTIFIER
   |   |  )primary_expression
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e300[`autorelease'] Line 16 Column 57 File C:/temp/test.m)IDENTIFIER
   |   | )primary_expression
   |   |)assignment_expression
   |   )expression_statement
   |   (expression_statement@C~ObjectiveCv2=400#422e540 Line 17 Column 3 File C:/temp/test.m
   |   |(assignment_expression@C~ObjectiveCv2=356#422e500 Line 17 Column 3 File C:/temp/test.m
   |   | (postfix_expression@C~ObjectiveCv2=130#422e480 Line 17 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e380[`obj'] Line 17 Column 3 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e440[`request'] Line 17 Column 7 File C:/temp/test.m)IDENTIFIER
   |   | )postfix_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422e4a0[`req'] Line 17 Column 17 File C:/temp/test.m)IDENTIFIER
   |   |)assignment_expression
   |   )expression_statement
   |   (expression_statement@C~ObjectiveCv2=400#422e680 Line 18 Column 3 File C:/temp/test.m
   |   |(assignment_expression@C~ObjectiveCv2=356#422e640 Line 18 Column 3 File C:/temp/test.m
   |   | (postfix_expression@C~ObjectiveCv2=130#422e600 Line 18 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e520[`obj'] Line 18 Column 3 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e5c0[`delegate'] Line 18 Column 7 File C:/temp/test.m)IDENTIFIER
   |   | )postfix_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422e620[`delegate'] Line 18 Column 18 File C:/temp/test.m)IDENTIFIER
   |   |)assignment_expression
   |   )expression_statement
   |   (expression_statement@C~ObjectiveCv2=400#422e780 Line 19 Column 3 File C:/temp/test.m
   |   |(assignment_expression@C~ObjectiveCv2=356#422e720 Line 19 Column 3 File C:/temp/test.m
   |   | (postfix_expression@C~ObjectiveCv2=130#422e740 Line 19 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e660[`obj'] Line 19 Column 3 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e560[`selector'] Line 19 Column 7 File C:/temp/test.m)IDENTIFIER
   |   | )postfix_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422e760[`sel'] Line 19 Column 18 File C:/temp/test.m)IDENTIFIER
   |   |)assignment_expression
   |   )expression_statement
   |   (expression_statement@C~ObjectiveCv2=400#422e6e0 Line 20 Column 3 File C:/temp/test.m
   |   |(assignment_expression@C~ObjectiveCv2=356#422e800 Line 20 Column 3 File C:/temp/test.m
   |   | (postfix_expression@C~ObjectiveCv2=130#422e840 Line 20 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e580[`obj'] Line 20 Column 3 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e6a0[`completionHandler'] Line 20 Column 7 File C:/temp/test.m)IDENTIFIER
   |   | )postfix_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422e860[`completionHandler'] Line 20 Column 27 File C:/temp/test.m)IDENTIFIER
   |   |)assignment_expression
   |   )expression_statement
   |   (expression_statement@C~ObjectiveCv2=400#422e900 Line 21 Column 3 File C:/temp/test.m
   |   |(assignment_expression@C~ObjectiveCv2=356#422e960 Line 21 Column 3 File C:/temp/test.m
   |   | (postfix_expression@C~ObjectiveCv2=130#422e8a0 Line 21 Column 3 File C:/temp/test.m
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e820[`obj'] Line 21 Column 3 File C:/temp/test.m)IDENTIFIER
   |   |  (IDENTIFIER@C~ObjectiveCv2=1270#422e7a0[`thread'] Line 21 Column 7 File C:/temp/test.m)IDENTIFIER
   |   | )postfix_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422e940[`thread'] Line 21 Column 16 File C:/temp/test.m)IDENTIFIER
   |   |)assignment_expression
   |   )expression_statement
   |   (jump_statement@C~ObjectiveCv2=487#422e9c0 Line 22 Column 3 File C:/temp/test.m
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#422e880[`obj'] Line 22 Column 10 File C:/temp/test.m)IDENTIFIER
   |   )jump_statement
   |  )statement_seq
   | )compound_statement
   |)class_method_definition
   )implementation_definition_list
   (instance_method_definition@C~ObjectiveCv2=1088#422f280 Line 25 Column 1 File C:/temp/test.m
   |(AMBIGUITY<method_result_option=527>@C~ObjectiveCv2=1390#4229f40{2} Line 25 Column 3 File C:/temp/test.m
   | (method_result_option@C~ObjectiveCv2=1101#422ea60 Line 25 Column 3 File C:/temp/test.m)method_result_option
   | (method_type@C~ObjectiveCv2=1103#422e7c0 Line 25 Column 3 File C:/temp/test.m
   |  (simple_type_specifier@C~ObjectiveCv2=545#422e9e0 Line 25 Column 4 File C:/temp/test.m)simple_type_specifier
   | )method_type
   |)AMBIGUITY
   |(IDENTIFIER@C~ObjectiveCv2=1270#422e8e0[`dealloc'] Line 25 Column 9 File C:/temp/test.m)IDENTIFIER
   |(declaration_star@C~ObjectiveCv2=1085#422e7e0 Line 25 Column 17 File C:/temp/test.m)declaration_star
   |(compound_statement@C~ObjectiveCv2=403#422efa0 Line 25 Column 17 File C:/temp/test.m
   | (statement_seq@C~ObjectiveCv2=405#422ecc0 {7} Line 26 Column 3 File C:/temp/test.m
   |  (expression_statement@C~ObjectiveCv2=400#422eb40 Line 26 Column 3 File C:/temp/test.m
   |   (assignment_expression@C~ObjectiveCv2=356#422eb20 Line 26 Column 3 File C:/temp/test.m
   |   |(postfix_expression@C~ObjectiveCv2=130#422eae0 Line 26 Column 3 File C:/temp/test.m
   |   | (primary_expression@C~ObjectiveCv2=1155#422ea80 Line 26 Column 3 File C:/temp/test.m)primary_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422eaa0[`request'] Line 26 Column 8 File C:/temp/test.m)IDENTIFIER
   |   |)postfix_expression
   |   |(primary_expression@C~ObjectiveCv2=1157#422eb00 Line 26 Column 18 File C:/temp/test.m)primary_expression
   |   )assignment_expression
   |  )expression_statement
   |  (expression_statement@C~ObjectiveCv2=400#422eca0 Line 27 Column 3 File C:/temp/test.m
   |   (assignment_expression@C~ObjectiveCv2=356#422ec40 Line 27 Column 3 File C:/temp/test.m
   |   |(postfix_expression@C~ObjectiveCv2=130#422ec00 Line 27 Column 3 File C:/temp/test.m
   |   | (primary_expression@C~ObjectiveCv2=1155#422eba0 Line 27 Column 3 File C:/temp/test.m)primary_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422ebc0[`delegate'] Line 27 Column 8 File C:/temp/test.m)IDENTIFIER
   |   |)postfix_expression
   |   |(primary_expression@C~ObjectiveCv2=1157#422ec20 Line 27 Column 19 File C:/temp/test.m)primary_expression
   |   )assignment_expression
   |  )expression_statement
   |  (expression_statement@C~ObjectiveCv2=400#422ee20 Line 28 Column 3 File C:/temp/test.m
   |   (assignment_expression@C~ObjectiveCv2=356#422ee00 Line 28 Column 3 File C:/temp/test.m
   |   |(postfix_expression@C~ObjectiveCv2=130#422ed60 Line 28 Column 3 File C:/temp/test.m
   |   | (primary_expression@C~ObjectiveCv2=1155#422ece0 Line 28 Column 3 File C:/temp/test.m)primary_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422ed40[`selector'] Line 28 Column 8 File C:/temp/test.m)IDENTIFIER
   |   |)postfix_expression
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#422edc0[`NULL'] Line 28 Column 19 File C:/temp/test.m)IDENTIFIER
   |   )assignment_expression
   |  )expression_statement
   |  (expression_statement@C~ObjectiveCv2=400#422ef40 Line 29 Column 3 File C:/temp/test.m
   |   (assignment_expression@C~ObjectiveCv2=356#422ef20 Line 29 Column 3 File C:/temp/test.m
   |   |(postfix_expression@C~ObjectiveCv2=130#422eee0 Line 29 Column 3 File C:/temp/test.m
   |   | (primary_expression@C~ObjectiveCv2=1155#422ee60 Line 29 Column 3 File C:/temp/test.m)primary_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422eec0[`completionHandler'] Line 29 Column 8 File C:/temp/test.m)IDENTIFIER
   |   |)postfix_expression
   |   |(primary_expression@C~ObjectiveCv2=1157#422ef00 Line 29 Column 28 File C:/temp/test.m)primary_expression
   |   )assignment_expression
   |  )expression_statement
   |  (expression_statement@C~ObjectiveCv2=400#422ee80 Line 30 Column 3 File C:/temp/test.m
   |   (assignment_expression@C~ObjectiveCv2=356#422efe0 Line 30 Column 3 File C:/temp/test.m
   |   |(postfix_expression@C~ObjectiveCv2=130#422f020 Line 30 Column 3 File C:/temp/test.m
   |   | (primary_expression@C~ObjectiveCv2=1155#422ee40 Line 30 Column 3 File C:/temp/test.m)primary_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422f000[`thread'] Line 30 Column 8 File C:/temp/test.m)IDENTIFIER
   |   |)postfix_expression
   |   |(primary_expression@C~ObjectiveCv2=1157#422efc0 Line 30 Column 17 File C:/temp/test.m)primary_expression
   |   )assignment_expression
   |  )expression_statement
   |  (expression_statement@C~ObjectiveCv2=400#422ef80 Line 31 Column 3 File C:/temp/test.m
   |   (assignment_expression@C~ObjectiveCv2=356#422f0c0 Line 31 Column 3 File C:/temp/test.m
   |   |(postfix_expression@C~ObjectiveCv2=130#422f100 Line 31 Column 3 File C:/temp/test.m
   |   | (primary_expression@C~ObjectiveCv2=1155#422ef60 Line 31 Column 3 File C:/temp/test.m)primary_expression
   |   | (IDENTIFIER@C~ObjectiveCv2=1270#422f060[`error'] Line 31 Column 8 File C:/temp/test.m)IDENTIFIER
   |   |)postfix_expression
   |   |(primary_expression@C~ObjectiveCv2=1157#422f120 Line 31 Column 16 File C:/temp/test.m)primary_expression
   |   )assignment_expression
   |  )expression_statement
   |  (expression_statement@C~ObjectiveCv2=400#422f1a0 Line 32 Column 3 File C:/temp/test.m
   |   (primary_expression@C~ObjectiveCv2=1158#422f180 Line 32 Column 3 File C:/temp/test.m
   |   |(primary_expression@C~ObjectiveCv2=1156#422f1e0 Line 32 Column 4 File C:/temp/test.m)primary_expression
   |   |(IDENTIFIER@C~ObjectiveCv2=1270#422f040[`dealloc'] Line 32 Column 10 File C:/temp/test.m)IDENTIFIER
   |   )primary_expression
   |  )expression_statement
   | )statement_seq
   |)compound_statement
   )instance_method_definition
  )implementation_definition_list
 )class_implementation
)translation_unit
Exiting with final status 0 
```

因为树的形状与我们使用的语法同构，所以语法*就是*文档。请参阅先前的 SO 答案，[了解我们如何执行此操作并生成 AST](https://stackoverflow.com/a/1916687/120163)。

这是取自一个流行库的代码片段；它只是一个片段，否则这棵树会很大。我也作弊了一点，省略了#imports，这让我可以运行一个易于配置的解析器。DMS 将解析包含 #includes 的文件并保留指令或保留包含文本，具体取决于其解析器的配置方式。

这是针对ObjectiveC，而不是ObjectiveC++。我们正在努力：-}

DMS 为在其生成的 AST 上运行的程序分析提供了许多额外的支持。

# symfony - Symfony2：保存一对多关系时出错

> ID：10649599
> 
> 赞同：0
> 
> 时间：2012-05-18T08:56:56.183
> 
> 标签：symfony, doctrine

我收到此错误：

> 完整性约束违规：1048 列 'user_id' 不能为空

当我尝试在控制器中使用地址保存用户时：

```
 $em = $this->getDoctrine()->getEntityManager();
    $user=new User();       
    $adr=new Address();
    $user->getAddresses()->add($adr);
    /* i add something missing here */
    $form =$this->createForm(new UserForm(),$user);

    if ('POST' == $request->getMethod()) {
        $form->bindRequest($request);
        if ($form->isValid()) {             
            $em->persist($user);
            $em->flush();
            return $this->redirect($this->generateUrl('homepage'));
        }
    } 
```

好吧，这些是我的实体类，用户和地址：

```
public class User {
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var Address
     *
     * @ORM\OneToMany(targetEntity="Address", mappedBy="user", cascade={"all"})
     * @ORM\OrderBy({"zipCode" = "ASC"})
     */
    protected $addresses;
}

public class Address{
        /**
     * @var User
     *
     * @ORM\ManyToOne(targetEntity="User",inversedBy="addresses")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     * })
     */
    private $user;
} 
```

在表单类中：

```
$builder->add('addresses', 'collection', array('type' => new AddressForm())); 
```

在日志中，有以下消息：

```
INSERT INTO user (email, password, salt, is_active, username, description, user_type_id,partner_type_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?){"1":"test@yahoo.ca","2":"ttttt","3":null,"4":null,"5":null,"6":"sdfadf","7":3,"8":9}) 
```

当它尝试保存地址时：

```
INSERT INTO address (Number, voie_name, additional_address, zip_code, city, cedex, created_at, tel, loc_lat, loc_lng, voie_id, user_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ({"1":"12","2":"asdf","3":"sdfasdf","4":"69001","5":"Lyon 1er","6":null,"7":null,"8":"04 65 46 46 54","9":null,"10":null,"11":4,"12":null}) 
```

注意`"12":null`，这很奇怪，因为 Doctrine 已经保存了用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:54:13.450

Not sure, maybe try:

```
public class Address{
    /**
 * @var User
 *
 * @ORM\ManyToOne(targetEntity="User",inversedBy="addresses", cascade={"all"})
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * })
 */
private $user;
} 
```

or try adding to your User entity:

```
public function setAddresses($Addresses){
    foreach($Addresses as $Address){
        $User->setAddress($this);
    }

} 
```

# android - Iphone/Android - 从应用程序连接到数据库的一般方法

> ID：10649606
> 
> 赞同：0
> 
> 时间：2012-05-18T08:57:18.567
> 
> 标签：android, iphone, xcode

我对 Iphone/Android 的应用程序有疑问。我会在应用程序中连接到数据库服务器，但我不知道如何？我使用 xml-rpc 或 soap，它很好，但有时数据交换很慢。对于移动应用程序，连接从数据库服务器获取数据的其他metotd 是什么？

我的意思是从应用程序连接到数据库（数据交换）的一般方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:45:18.390

您的问题本质上非常抽象，请从下一个开始尝试准确，希望对您有所帮助。我假设您有用于与 DB server 交互的 Web 服务。
现在根据 web 服务的类型，有各种库用于发送和接收数据，如 android 中的 KSOAP2，用于基于 SOAP 的。尝试谷歌你会发现很多例子..

# javascript - 处理多个并行 ajax 请求的响应

> ID：10649609
> 
> 赞同：2
> 
> 时间：2012-05-18T08:57:35.697
> 
> 标签：javascript, jquery

我对我的服务 (jsonp) 有 4 个并行 jQuery ajax 请求，并且一切正常，直到数据从服务返回并需要显示给用户。我无法处理响应，因为它们都以几毫秒的间隔到达，并且它们调用相同的 jsonp 回调方法。

我想要做的是在每个 ajax 请求完成其工作时更新数据框。

代码示例：

```
$.ajax({
   url: 'http://link/service?source=1',
   dataType: 'jsonp',
   jsonp: 'callback',
   jsonpCallback: 'asyncPrint'
   complete: function(data) {
      console.log("completed");
   }
});

$.ajax({
   url: 'http://link/service?source=2',
   dataType: 'jsonp',
   jsonp: 'callback',
   jsonpCallback: 'asyncPrint'
   complete: function(data) {
      console.log("completed");
   }
});

$.ajax({
   url: 'http://link/service?source=3',
   dataType: 'jsonp',
   jsonp: 'callback',
   jsonpCallback: 'asyncPrint'
   complete: function(data) {
      console.log("completed");
   }
});

$.ajax({
   url: 'http://link/service?source=4',
   dataType: 'jsonp',
   jsonp: 'callback',
   jsonpCallback: 'asyncPrint'
   complete: function(data) {
      console.log("completed");
   }
}); 
```

在其他文件中，我实现了 asyncPrint 方法：

```
function asyncPrint(data) {
   if(data == undefined) return;

   //Populate sourceMedia with data from all sources
   sourceMedia[data.list[0].source] = data;

   //Do something with arrived data
   goThroughArrivedData(data);
} 
```

PS 我尝试过使用 $.when()，但它等待所有 ajax 请求完成，这是不可接受的，因为其中一个 ajax 调用可能需要 30 秒以上。

# javascript - 将对象而不是字符串传递给 phonegap 插件

> ID：10649610
> 
> 赞同：1
> 
> 时间：2012-05-18T08:57:40.843
> 
> 标签：javascript, cordova, phonegap-plugins

我为 phonegap 创建了一个简单的插件，但我想将对象作为参数而不是 string 传递，下面是我的代码结构...

```
BackGroundService.java  

public class BackGroundService extends Plugin {
   public PluginResult execute(String arg0, JSONArray args, String arg2) {  //How can i pass object instead or String       
   }
}

worker.js
var worker = function(name, win, fail) {   
  PhoneGap.exec(win, win, "BackGroundService", "worker", [name]);
}

PhoneGap.addConstructor(function() {
  navigator.app.addService('BackGroundService','com.service.app.BackGroundService');

}) 
```

从 html 调用

```
worker("football", win);   //Pass object instead of football        

var win = function(d) {
     alert("success");      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:33:10.140

将对象解压缩成字符串数组？

假设您正在传递一个名为“Sport”的对象，该对象具有以下属性：

.name: "足球" .ball: "round" .periods: 2 .periodTiming: 45

您可以将此对象解压缩为 ["Football", "round", 2, 45]，然后修改 Java 代码以获取每个参数：

```
 String name = args.getString(0);
    String ball = args.getString(1);
    int periods = args.getInt(2);
    int timing = args.getInt(3); 
```

高温高压

# sql - 我需要什么样的 JOIN 来执行这种类型的查询？

> ID：10649617
> 
> 赞同：1
> 
> 时间：2012-05-18T08:58:05.610
> 
> 标签：sql, sql-server, sql-server-2008

假设我有三个表：

*   Cars (CarID) 包含 10 个不同的汽车行。
*   SafetyTests (TestID, TestName) 包含 20 个不同的安全测试行。
*   TestResults（ID、TestID、CarID、TestValue）包含 0 到 200 个安全测试行之间的数字。

在安全测试表中，它包含对 Cars 表中的 10 辆汽车执行的每个安全测试的结果。最多有 20 个安全测试——这显然是从 SafetyTests 表上的 select 语句中获得的。然而，这 10 辆汽车中的一些已经完成了所有 20 次测试，而其他汽车只进行了 5 次。

我想生成一个 10 x 20 矩阵，它将显示每辆车 20 个结果（即使他们没有 20 个安全测试结果）。如果尚未在汽车上执行测试，它只会显示测试名称，但值为零（或 null）。

我认为这将是 SafetyTests 表上的 SELECT （以获取不同的测试 ID 列表）和 LEFT JOIN 到 Cars 和 TestResults 之间的 JOIN 组合上，但问题是这会返回 NULL 的 CAR ID 缺少测试，因为Car 表没有匹配项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:00:00.977

您可以从汽车交叉连接到安全测试 - 然后左连接到 TestResults - 交叉连接确保您获得 10 x 20 矩阵，左连接为您提供结果

使用 ISNULL 或 COALESCE 将结果集中的空值替换为零

例如

```
SELECT car.name, testresults.testname, isnull(testresults.result, 0) FROM 
cars CROSS JOIN
safetytests
LEFT JOIN testresults on safetytests.testid = testresults.testid AND car.id = testresults.carid 
```

![这是交叉连接的工作](../Images/ef7388936c6e460ad8d9fec752764d0f.png)

按照某人的建议做了一个 sqlfiddle :) 那个网站真的很好

[http://sqlfiddle.com/#!3/2bc73/2](http://sqlfiddle.com/#!3/2bc73/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:12:06.517

如果我正确理解了这个问题，您需要一个 10x20 的结果集，如下所示：

```
CarID   |   Test1   |   Test2   |   ....    |   Test20
-------------------------------------------------------
1       |   NULL    |   Fail    |   ....    |   true
2       |   2       |   Pass    |   ....    |   false 
```

为此，我将利用 SQL-Server 2008 的`PIVOT`功能。

```
WITH Results AS
(   SELECT  cars.CarID,
            TestName,
            TestValue
    FROM    Cars
            CROSS JOIN SafetyTests s
            LEFT JOIN TestResults res
                ON res.CarID = Cars.CarID
                AND res.TestID = s.TestID
) 
SELECT  *
FROM    Results
        PIVOT
        (   MAX(TestValue)
            FOR TestName IN ([TesT1], [Test2], [Test3], [Test4]) 
            -- LIST ALL 20 TEST NAMES HERE
        ) pvt 
```

这样做的缺点是您必须明确列出所有要旋转的测试名称，否则它们不会显示为列，但是可以动态地执行此操作。下面与上面的查询基本完全相同，但我动态生成了所有列名的列表并将它们插入到查询中。

```
DECLARE @SQL NVARCHAR(MAX) = ''

SELECT  @SQL = @SQL + ',' + QUOTENAME(TestName)
FROM    SafetyTests

SET @SQL = 'WITH Results AS
            (   SELECT  Cars.CarID,
                        TestName,
                        TestValue
                FROM    Cars
                        CROSS JOIN SafetyTests s
                        LEFT JOIN TestResults res
                            ON res.CarID = Cars.CarID
                            AND res.TestID = s.TestID
            ) 
            SELECT  *
            FROM    Results
                    PIVOT
                    (   MAX(TestValue)
                        FOR TestName IN (' + STUFF(@SQL, 1, 1, '') + ')
                    ) pvt'

EXECUTE SP_EXECUTESQL @SQL 
```

[SQL小提琴](http://sqlfiddle.com/#!3/f5025/1)

# database-design - 在 OSGi 包启动/停止后执行模式演变

> ID：10649619
> 
> 赞同：1
> 
> 时间：2012-05-18T08:58:19.897
> 
> 标签：database-design, osgi

我有一个 OSGi 应用程序。每个 OSGi 模块都由一些业务逻辑和**数据模型**组成。我计划在每次**新**模块第一次启动时进行模式演变。正如我上面提到的，每个模块都包含扩展应用程序核心数据模型的数据模型。因此，我需要在新模块启动之前创建一些新表。

我能想到的唯一解决方案是**扩展器模式**。换句话说，将有一个名为的模块`db-schema-extender`，它将等待`DbSchemaEvolutionService`. 该服务的实现将由愿意扩展应用程序核心数据模型的每个模块提供。当在 OSGi 服务注册表中请求此类实现时，`db-schema-extender`将调用 `DbSchemaEvolutionService.getEntities()`方法来获取实体列表，然后`db-schema-extender`将执行`schemaExport(List<Object> entities)`创建新模块所需的表。

你有遇到类似问题的经验吗？

你的解决方案是什么？

您如何看待我提出的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:19:55.890

我有类似你的问题的经验。我认为您的解决方案会起作用，但我不知道是否有更好的解决方案。我的解决方案有点不同：我没有提供服务**DbSchemaEvolutionService ，而是在****MANIFEST**文件中添加了一个新标头，该标头列出了该捆绑包包含的所有实体。像您这样的模块**db-schema-extender**将侦听捆绑启动和停止事件，以从管理实体中添加或删除这些实体。

# android - 下载图像时防止应用程序挂起？

> ID：10649621
> 
> 赞同：1
> 
> 时间：2012-05-18T08:58:36.553
> 
> 标签：android, performance, process, download

我正在使用 ListView 显示与这些图像关联的一些图像和标题。我正在从互联网上获取图像。有没有办法延迟加载图像，以便在显示文本时，UI 不会锁定，并且在下载图像时会显示图像。图片数量不固定。

## 更新：

（使用下面的代码，我尝试下载图像并在 ListView 中显示）

```
Bitmap bmImg; Bitmap downloadFile(String fileUrl) 
{ 
 URL myFileUrl = null; 
  try { 
      myFileUrl = new URL(fileUrl); 
   } 
   catch (MalformedURLException e) 
   { 
      e.printStackTrace(); 
   } 

   try { 
     HttpURLConnection conn = (HttpURLConnection) myFileUrl .openConnection(); 
    conn.setDoInput(true); 
    conn.connect(); 
    InputStream is = conn.getInputStream(); 
    bmImg = BitmapFactory.decodeStream(is); 
   } catch (IOException e) 
    { 
        e.printStackTrace(); 
   } 
    return bmImg; 
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:05:13.293

```
import java.io.IOException;

public class DrawableManager {
    private final Map<String, Drawable> drawableMap;

    public DrawableManager() {
        drawableMap = new HashMap<String, Drawable>();
    }

    public Drawable fetchDrawable(String urlString) {
        if (drawableMap.containsKey(urlString)) {
            return drawableMap.get(urlString);
        }

        Log.d(this.getClass().getSimpleName(), "image url:" + urlString);
        try {
            InputStream is = fetch(urlString);
            Drawable drawable = Drawable.createFromStream(is, "src");

            if (drawable != null) {
                drawableMap.put(urlString, drawable);
                Log.d(this.getClass().getSimpleName(), "got a thumbnail drawable: " + drawable.getBounds() + ", "
                        + drawable.getIntrinsicHeight() + "," + drawable.getIntrinsicWidth() + ", "
                        + drawable.getMinimumHeight() + "," + drawable.getMinimumWidth());
            } else {
              Log.w(this.getClass().getSimpleName(), "could not get thumbnail");
            }

            return drawable;
        } catch (MalformedURLException e) {
            Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
            return null;
        } catch (IOException e) {
            Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
            return null;
        }
    }

    public void fetchDrawableOnThread(final String urlString, final ImageView imageView) {
        if (drawableMap.containsKey(urlString)) {
            imageView.setImageDrawable(drawableMap.get(urlString));
        }

        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message message) {
                imageView.setImageDrawable((Drawable) message.obj);
            }
        };

        Thread thread = new Thread() {
            @Override
            public void run() {
                //TODO : set imageView to a "pending" image
                Drawable drawable = fetchDrawable(urlString);
                Message message = handler.obtainMessage(1, drawable);
                handler.sendMessage(message);
            }
        };
        thread.start();
    }

    private InputStream fetch(String urlString) throws MalformedURLException, IOException {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(urlString);
        HttpResponse response = httpClient.execute(request);
        return response.getEntity().getContent();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:05:57.830

我在这里读到你的问题是尝试这个的代码......

公共类 ImageDownloader { 私有静态最终字符串 LOG_TAG = "ImageDownloader";

```
public enum Mode {
    NO_ASYNC_TASK, NO_DOWNLOADED_DRAWABLE, CORRECT
}

private Mode mode = Mode.CORRECT;

/**
 * Download the specified image from the Internet and binds it to the
 * provided ImageView. The binding is immediate if the image is found in the
 * cache and will be done asynchronously otherwise. A null bitmap will be
 * associated to the ImageView if an error occurs.
 * 
 * @param url
 *            The URL of the image to download.
 * @param imageView
 *            The ImageView to bind the downloaded image to.
 */
public void download(String url, ImageView imageView) {

    if (url != null && !url.isEmpty()) {
        url = url.replaceAll(" ", "%20");
        resetPurgeTimer();
        Bitmap bitmap = getBitmapFromCache(url);

        if (bitmap == null) {
            forceDownload(url, imageView);
        } else {
            cancelPotentialDownload(url, imageView);
            imageView.setImageBitmap(bitmap);
        }
    }
}

/*
 * Same as download but the image is always downloaded and the cache is not
 * used. Kept private at the moment as its interest is not clear. private
 * void forceDownload(String url, ImageView view) { forceDownload(url, view,
 * null); }
 */

/**
 * Same as download but the image is always downloaded and the cache is not
 * used. Kept private at the moment as its interest is not clear.
 */
private void forceDownload(String url, ImageView imageView) {
    // State sanity: url is guaranteed to never be null in
    // DownloadedDrawable and cache keys.
    if (url == null) {
        imageView.setImageDrawable(null);

        return;
    }

    if (cancelPotentialDownload(url, imageView)) {
        switch (mode) {
        case NO_ASYNC_TASK:
            Bitmap bitmap = downloadBitmap(url);
            addBitmapToCache(url, bitmap);
            imageView.setImageBitmap(bitmap);
            break;

        case NO_DOWNLOADED_DRAWABLE:
            imageView.setMinimumHeight(156);
            BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);
            task.execute(url);
            break;

        case CORRECT:
            task = new BitmapDownloaderTask(imageView);
            DownloadedDrawable downloadedDrawable = new DownloadedDrawable(
                    task);
            imageView.setImageDrawable(downloadedDrawable);
            imageView.setMinimumHeight(156);
            task.execute(url);
            break;
        }
    }
}

/**
 * Returns true if the current download has been canceled or if there was no
 * download in progress on this image view. Returns false if the download in
 * progress deals with the same url. The download is not stopped in that
 * case.
 */
private static boolean cancelPotentialDownload(String url,
        ImageView imageView) {
    BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);

    if (bitmapDownloaderTask != null) {
        String bitmapUrl = bitmapDownloaderTask.url;

        if ((bitmapUrl == null) || (!bitmapUrl.equals(url))) {
            bitmapDownloaderTask.cancel(true);
        } else {
            // The same URL is already being downloaded.
            return false;
        }
    }
    return true;
}

/**
 * @param imageView
 *            Any imageView
 * @return Retrieve the currently active download task (if any) associated
 *         with this imageView. null if there is no such task.
 */
private static BitmapDownloaderTask getBitmapDownloaderTask(
        ImageView imageView) {
    if (imageView != null) {
        Drawable drawable = imageView.getDrawable();
        if (drawable instanceof DownloadedDrawable) {
            DownloadedDrawable downloadedDrawable = (DownloadedDrawable) drawable;

            return downloadedDrawable.getBitmapDownloaderTask();
        }
    }

    return null;
}

Bitmap downloadBitmap(String url) {
    final int IO_BUFFER_SIZE = 4 * 1024;

    // AndroidHttpClient is not allowed to be used from the main thread
    final HttpClient client = (mode == Mode.NO_ASYNC_TASK) ? new DefaultHttpClient()
            : AndroidHttpClient.newInstance("Android");
    final HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();

        if (statusCode != HttpStatus.SC_OK) {
            Log.w("ImageDownloader", "Error " + statusCode
                    + " while retrieving bitmap from " + url);

            return null;
        }

        final HttpEntity entity = response.getEntity();

        if (entity != null) {
            InputStream inputStream = null;

            try {
                inputStream = entity.getContent();
                // return BitmapFactory.decodeStream(inputStream);
                // Bug on slow connections, fixed in future release.
                return BitmapFactory.decodeStream(new FlushedInputStream(
                        inputStream));
            } finally {
                if (inputStream != null) {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        }
    } catch (IOException e) {
        getRequest.abort();
        Log.w(LOG_TAG, "I/O error while retrieving bitmap from " + url, e);
    } catch (IllegalStateException e) {
        getRequest.abort();
        Log.w(LOG_TAG, "Incorrect URL: " + url);
    } catch (Exception e) {
        getRequest.abort();
        Log.w(LOG_TAG, "Error while retrieving bitmap from " + url, e);
    } finally {
        if ((client instanceof AndroidHttpClient)) {
            ((AndroidHttpClient) client).close();
        }
    }

    return null;
}

/*
 * An InputStream that skips the exact number of bytes provided, unless it
 * reaches EOF.
 */
static class FlushedInputStream extends FilterInputStream {
    public FlushedInputStream(InputStream inputStream) {
        super(inputStream);
    }

    @Override
    public long skip(long n) throws IOException {
        long totalBytesSkipped = 0L;

        while (totalBytesSkipped < n) {
            long bytesSkipped = in.skip(n - totalBytesSkipped);

            if (bytesSkipped == 0L) {
                int b = read();

                if (b < 0) {
                    break; // we reached EOF
                } else {
                    bytesSkipped = 1; // we read one byte
                }
            }

            totalBytesSkipped += bytesSkipped;
        }

        return totalBytesSkipped;
    }
}

/**
 * The actual AsyncTask that will asynchronously download the image.
 */
class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
    private String url;
    private final WeakReference<ImageView> imageViewReference;

    public BitmapDownloaderTask(ImageView imageView) {
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    /**
     * Actual download method.
     */
    @Override
    protected Bitmap doInBackground(String... params) {
        url = params[0];

        return downloadBitmap(url);
    }

    /**
     * Once the image is downloaded, associates it to the imageView
     */
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (isCancelled()) {
            bitmap = null;
        }

        addBitmapToCache(url, bitmap);

        if (imageViewReference != null) {
            ImageView imageView = imageViewReference.get();
            BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);
            // Change bitmap only if this process is still associated with
            // it
            // Or if we don't use any bitmap to task association
            // (NO_DOWNLOADED_DRAWABLE mode)
            if ((this == bitmapDownloaderTask) || (mode != Mode.CORRECT)) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
}

/**
 * A fake Drawable that will be attached to the imageView while the download
 * is in progress.
 * 
 * <p>
 * Contains a reference to the actual download task, so that a download task
 * can be stopped if a new binding is required, and makes sure that only the
 * last started download process can bind its result, independently of the
 * download finish order.
 * </p>
 */
static class DownloadedDrawable extends ColorDrawable {
    private final WeakReference<BitmapDownloaderTask> bitmapDownloaderTaskReference;

    public DownloadedDrawable(BitmapDownloaderTask bitmapDownloaderTask) {
        super(Color.WHITE);
        bitmapDownloaderTaskReference = new WeakReference<BitmapDownloaderTask>(
                bitmapDownloaderTask);
    }

    public BitmapDownloaderTask getBitmapDownloaderTask() {
        return bitmapDownloaderTaskReference.get();
    }
}

public void setMode(Mode mode) {
    this.mode = mode;
    clearCache();
}

/*
 * Cache-related fields and methods.
 * 
 * We use a hard and a soft cache. A soft reference cache is too
 * aggressively cleared by the Garbage Collector.
 */

private static final int HARD_CACHE_CAPACITY = 1000;
private static final int DELAY_BEFORE_PURGE = 10 * 1000; // in milliseconds

// Hard cache, with a fixed maximum capacity and a life duration
private final HashMap<String, Bitmap> sHardBitmapCache = new LinkedHashMap<String, Bitmap>(
        HARD_CACHE_CAPACITY / 2, 0.75f, true) {
    @Override
    protected boolean removeEldestEntry(
            LinkedHashMap.Entry<String, Bitmap> eldest) {
        if (size() > HARD_CACHE_CAPACITY) {
            // Entries push-out of hard reference cache are transferred to
            // soft reference cache
            sSoftBitmapCache.put(eldest.getKey(),
                    new SoftReference<Bitmap>(eldest.getValue()));

            return true;
        } else
            return false;
    }
};

// Soft cache for bitmaps kicked out of hard cache
private final static ConcurrentHashMap<String, SoftReference<Bitmap>> sSoftBitmapCache = new ConcurrentHashMap<String, SoftReference<Bitmap>>(
        HARD_CACHE_CAPACITY / 2);

private final Handler purgeHandler = new Handler();

private final Runnable purger = new Runnable() {
    public void run() {
        clearCache();
        System.gc();
    }
};

/**
 * Adds this bitmap to the cache.
 * 
 * @param bitmap
 *            The newly downloaded bitmap.
 */
private void addBitmapToCache(String url, Bitmap bitmap) {
    if (bitmap != null) {
        synchronized (sHardBitmapCache) {
            sHardBitmapCache.put(url, bitmap);
        }
    }
}

/**
 * @param url
 *            The URL of the image that will be retrieved from the cache.
 * @return The cached bitmap or null if it was not found.
 */
private Bitmap getBitmapFromCache(String url) {
    // First try the hard reference cache
    synchronized (sHardBitmapCache) {
        final Bitmap bitmap = sHardBitmapCache.get(url);

        if (bitmap != null) {
            // Bitmap found in hard cache
            // Move element to first position, so that it is removed last
            sHardBitmapCache.remove(url);
            sHardBitmapCache.put(url, bitmap);

            return bitmap;
        }
    }

    // Then try the soft reference cache
    SoftReference<Bitmap> bitmapReference = sSoftBitmapCache.get(url);

    if (bitmapReference != null) {
        final Bitmap bitmap = bitmapReference.get();

        if (bitmap != null) {
            // Bitmap found in soft cache
            return bitmap;

        } else {
            // Soft reference has been Garbage Collected
            sSoftBitmapCache.remove(url);
        }
    }

    return null;
}

/**
 * Clears the image cache used internally to improve performance. Note that
 * for memory efficiency reasons, the cache will automatically be cleared
 * after a certain inactivity delay.
 */
public void clearCache() {
    sHardBitmapCache.clear();
    sSoftBitmapCache.clear();
}

/**
 * Allow a new delay before the automatic cache clear is done.
 */
private void resetPurgeTimer() {
    purgeHandler.removeCallbacks(purger);
    // purgeHandler.postDelayed(purger, DELAY_BEFORE_PURGE);
} 
```

}

# python - python日志记录不适用于使用谷歌应用引擎的网络应用

> ID：10649623
> 
> 赞同：1
> 
> 时间：2012-05-18T08:58:40.520
> 
> 标签：python, google-app-engine, logging

我有一个使用谷歌应用引擎的网络应用程序。在 ubuntu 中，我使用启动应用程序引擎

```
./dev_appserver.py /home/me/dev/mycode 
```

在 mycode 文件夹中，我有 app.yml 和 web 应用程序的 python 文件。在 web 应用程序代码中，我使用日志记录来写入一些变量的值，例如

```
import logging
LOG_FILENAME = '/home/me/logs/mylog.txt'
logging.basicConfig(filename=LOG_FILENAME,level=logging.DEBUG)

class Handler(webapp2.RequestHandler):
    ....

class Welcome(Handler):
    def get(self):
        if self.user:
            logging.debug('rendering welcome page for user')            
            self.render('welcome.html',username= self.user.name)
        else:
            logging.debug('redirect to signup')            
            self.redirect('/signup')
class MainPage(Handler):
        def get(self):
            self.redirect('/welcome')
app = webapp2.WSGIApplication([('/', MainPage),('/signup', Register),('/welcome', Welcome)], debug=True) 
```

我已经`chmod 777`为日志目录设置了..那里仍然没有创建日志。我不知道如何在谷歌应用引擎运行时查看任何日志..因为它在 linux 中，我没有 `launcher with gui`..如果生成了任何应用引擎日志，则很难查看

如果有人可以帮我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:30:15.983

我有相同的环境（Ubuntu、python、gae）并且在日志记录方面遇到了类似的问题。

您无法按照此处所述登录到本地文件：[https ://developers.google.com/appengine/docs/python/overview](https://developers.google.com/appengine/docs/python/overview)

> “沙盒确保应用程序只能执行不干扰其他应用程序的性能和可扩展性的操作。例如，应用程序不能将数据写入本地文件系统或建立任意网络连接。”
> 
> “开发服务器在您的本地计算机上运行您的应用程序以测试您的应用程序。服务器模拟 App Engine 数据存储区、服务和沙盒限制。”

我能够让控制台日志记录如下工作：

```
import logging
logging.getLogger().setLevel(logging.DEBUG) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:07:31.853

您是否阅读过此[https://developers.google.com/appengine/articles/logging](https://developers.google.com/appengine/articles/logging)，据我了解，您不得声明自己的日志文件

# jquery - jQuery MULTIPLE TABLES 悬停并单击

> ID：10649624
> 
> 赞同：0
> 
> 时间：2012-05-18T08:58:44.230
> 
> 标签：jquery, html-table

我有（10+）个表格，它们都具有相同的格式，试图让页面显示标题并制作它，所以当你将鼠标悬停在标题上时它会显示它们的正文，当你点击那个标题（或正文）时，它会保留它显示个人头部/身体。还要保留其他已经被点击的。

只有初学者 jQuery-er。仅在这个元素上已经花费了 15 多个小时，所以是时候寻求帮助了。

忽略图片。

我创建了一些混乱：http: [//jsfiddle.net/XE6AG/159/](http://jsfiddle.net/XE6AG/159/) 与此非常相似：http: [//jsfiddle.net/gRSXZ/1/](http://jsfiddle.net/gRSXZ/1/)除了我需要隐藏 tbody 然后在悬停时展开，保持展开点击！

```
<tbody>
   <tr>
     <td >
        <table class="ActiveTableAwards"  cellpadding="0" cellspacing="0">
           <thead class="ActiveTableAwardsHead">
              <tr>
                <th >
                <img height="27" src="images/pmcmsa_head.gif" width="430"    alt="pmcmsahead" /></th>
              </tr>
           </thead>
           <tbody class="TextTbody">
              <tr>
                 <td>
                    <p>One </p>
                 </td>
                 <td>
                     <img height="200" src="images/pmcmsa.jpg" width="200" alt="pmcmsa" />   
                 </td>
             </tr>
             <tr> 
                <td>
                    <img height="5" src="images/separator_md.gif" width="550" alt="separator" />    
                </td>
             </tr>
          </tbody>
       </table>
       <table class="ActiveTableAwards"  cellpadding="0" cellspacing="0">
           <thead class="ActiveTableAwardsHead">
              <tr>
                <th >
                <img height="27" src="images/rd_head.gif" width="430" alt="rdhead" /></th>
              </tr>
           </thead>
           <tbody class="TextTbody">
              <tr>
                 <td>
                    <p>Two</p>
                 </td>
                 <td >
                     <img height="200" src="images/rd.jpg" width="200" alt="rd" />                  
                 </td>
             </tr>
               <tr> 
                <td>
                    <img height="5" src="images/separator_md.gif" width="550" alt="separator" />    
                </td>
             </tr>

          </tbody>
       </table>
       <table class="ActiveTableAwards"  cellpadding="0" cellspacing="0">
           <thead class="ActiveTableAwardsHead">
              <tr>
                <th >
                <img height="27" src="images/merit_head.gif" width="430" alt="rdhead" /></th>
              </tr>
           </thead>
           <tbody class="TextTbody">
              <tr>
                 <td>
                    <p>Three </p>
                 </td>
                 <td >
                     <img height="200" src="images/merit.jpg" width="200" alt="rd" />                   
                 </td>
             </tr>
               <tr> 
                <td>
                    <img height="5" src="images/separator_md.gif" width="550" alt="separator" />    
                </td>
             </tr>

          </tbody>
       </table>
       <table class="ActiveTableAwards"  cellpadding="0" cellspacing="0">
           <thead class="ActiveTableAwardsHead">
              <tr>
                <th >
                <img height="27" src="images/membership_head.gif" width="430" alt="rdhead" /></th>
              </tr>
           </thead>
           <tbody class="TextTbody">
              <tr>
                 <td>
                    <p>Four</p>
                 </td>
                 <td >
                     <img height="200" src="images/membership.jpg" width="200" alt="rd" />                  
                 </td>
             </tr>
               <tr> 
                <td>
                    <img height="5" src="images/separator_md.gif" width="550" alt="separator" />    
                </td>
             </tr>

          </tbody> 
```

**- jQuery**

```
$(".ActiveTableAwards") 
    .hover(function() {
        $(".ActiveTableAwardsHead") .toggleClass('hover') .toggle("fast", function showNext(){                                                         

          $(".TextTbody").show("slow", showNext);
          });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:01:05.040

您需要使用 $(".ActiveTableAwardsHead") 而不是 $("ActiveTableAwardsHead")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:32:01.780

```
$(".ActiveTableAwardsHead").hover(function() {
            $(this).children('tr').toggleClass('hover').show();
                     }
          ).hover(function() {
           $(this).fadeIn();
                      }, 
           function() {
            $(this).fadeOut();
                      });    

$(".TextTbody").children('tr').addClass('hover').click(function(){
          $(this).addClass('hover').fadeOut();
}); 
```

# user-interface - 测试计算器的编码 UI

> ID：10649625
> 
> 赞同：0
> 
> 时间：2012-05-18T08:58:45.113
> 
> 标签：user-interface, coded-ui-tests, data-driven-tests

我在数据驱动模式下对一个简单的计算器应用程序进行了编码 UI 测试。添加断言后，我的测试结果没有通过，我认为这是由于“。” （Windows 计算器应用程序中已经存在的小数点）。

因此，我只想知道如何编写代码，以便接受所有类型的值，包括十进制和整数。我用于数据表的 CSV 文件是

```
input1     input2      expected_add
1.2         2.3        3.5
2.4         2.5        4.9
5.6         1.4         7 
```

这里第一行和第二行通过，但第三行失败。

这是我用于数据驱动测试的示例代码。

```
this.UIMap.add_2_dec_numParams.UICalculatorDialogSendKeys = TestContext.DataRow["input1"].ToString();
this.UIMap.add_2_dec_numParams.UIItemEditSendKeys = "{add}" + TestContext.DataRow["input2"].ToString() + "=";
this.UIMap.add_2_dec_num();
this.UIMap.add_asertExpectedValues.UIItemEditText = TestContext.DataRow["expected_add"].ToString()+" ";
this.UIMap.add_asert(); 
```

前两行通过，因为它们有小数。在第三行的预期结果中，我需要将值`7`设为`7.`只有这样它才会被计算器接受。那就是问题所在..

如果我将代码更改为以下内容：

```
this.UIMap.add_asertExpectedValues.UIItemEditText = TestContext.DataRow["expected_add"].ToString()+"."+" "; 
```

然后第三行将通过，前两行将失败。错误将显示为`expected <3.5 > actual<3.5\. >`，`expected <4.9 > actual<4.9\. >`这就是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:15:31.453

我的猜测是使用的断言是比较字符串而不是转换为整数或双精度然后比较。“7”和“7”的字符串比较。当然会失败。

将您的断言移出 UIMap。然后在执行 Assert.AreEqual 之前将文本框和数据行的文本值转换为双精度值。如果您想避免双精度浮点数的一些误报，请使用具有 delta 的版本...

# apache-flex - Spark TextArea 的可见文本（来自文本流的段落）

> ID：10649629
> 
> 赞同：2
> 
> 时间：2012-05-18T08:59:11.307
> 
> 标签：apache-flex, position, textarea, paragraph

如何在 sparks 文本区域中找到当前可见的字符。我需要知道第一个（和最后一个）可见字符的位置。或者，更好的是，女巫段落（ParagraphElement's，来自 TextFlow）是可见的（也是开始和结束索引）。

Thanks.

# javascript - 在 GWT 中过度使用 JSNI 调用有什么缺点吗？

> ID：10649632
> 
> 赞同：4
> 
> 时间：2012-05-18T08:59:16.990
> 
> 标签：javascript, gwt, jsni

可能看起来像一个幼稚的问题，但是使用大量 JSNI 而不是仅仅坚持纯 GWT 是否有任何明显的缺点（性能方面）？

我问是因为当我使用 GWT 时，我发现自己必须处理非常具体的要求，这些要求最好通过使用成熟的 Javascript 库来解决......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:48:34.317

唯一的缺点是使用第三方库：您不会从 GWT 编译完成的*死代码修剪*中受益（也就是说，除非您以某种方式将库包装为 JSNI）。

实际上，还有另一个问题：因为 GWT 只会优化您的 JS 代码，如果用 Java 编写的话，您将无法从进一步的优化中受益。这是因为 Java 是一种静态类型的语言。

除此之外，不，JSNI 对性能没有负面影响（在 DevMode 中实际上可能恰恰相反：你从 Java 切换到 JS 和/或 Js 到 Java 的次数越多，它变得越慢；但这仅适用于 DevMode，在接下来的几个月里，这又会被*弃用）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:48:23.067

我认为 JSNI 代码在开发模式下比较慢。但是，开发模式显然应该很快被超级草稿模式取代，请参阅[https://plus.google.com/110412141990454266397/posts/iqXo5AyHkyd](https://plus.google.com/110412141990454266397/posts/iqXo5AyHkyd)

另外，我不确定 GWT 能够在多大程度上分析和优化纯 Javascript 代码。在编译纯 Java 时，GWT 做了很多内联和其他优化。

另一个问题可能是加载库的额外往返行程。

根据库 API 的复杂性（即，如果您需要包装大量类），将可比较的纯 Java 库转换为 GWT 可能更简单。但这显然不适用于 UI 库或其他严重依赖于 GWT 未涵盖的 Java 运行时部分的库。

因此，如果现有成熟的 Javascript 库适合您的目的，最好将它们包装在 JSNI 中并按照您的建议继续。

JSNI 边界本身不会产生任何额外的运行时开销。

# asp.net - MVC - 单击输入类型按钮验证表单

> ID：10649635
> 
> 赞同：0
> 
> 时间：2012-05-18T08:59:22.810
> 
> 标签：asp.net, asp.net-mvc, validation, data-annotations

我需要在输入类型 =“按钮”单击时验证 MVC 表单，而不是在输入类型 =“提交”上。单击按钮时，如果值无效，则需要使用 javascript 验证表单并触发相关验证。

我的表格就像

```
<% using (Html.BeginForm("ConfirmationForPayment", "Plan", FormMethod.Post, new { id = "frm" })) 
```

我也试过

```
 $('form#frm').validate();
 $('frm').validate(); 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:03:12.590

If your use client side validation you can try:

```
Sys.Mvc.FormContext.getValidationForForm($("#frm")[0]).validate('submit'); 
```

# sockets - 从 Socket 句柄构建的 Lazy ByteString 不能被延迟消费和 GC

> ID：10649636
> 
> 赞同：3
> 
> 时间：2012-05-18T08:59:23.547
> 
> 标签：sockets, memory, haskell, lazy-evaluation, bytestring

我正在编写一个网络文件传输应用程序。使用 Lazy ByteString 作为中间体

```
import qualified Data.ByteString.Lazy as BSL 
```

从本地文件构造 BSL 时，将 BSL 放入 Socket 的句柄中：

```
BSL.readFile filename >>= BSL.hPut remoteH  -- OK 
```

这工作正常。内存使用是恒定的。但要从 Socket 接收数据，则写入本地文件：

```
BSL.hGet remoteH size >>= BSL.hPut fileH bs  -- starts swapping in 1 second 
```

我可以看到内存使用量不断上升，BSL 占用了**size**字节的内存。更糟糕的是，对于超出我的物理内存大小的大**尺寸**，操作系统会立即开始交换。

我必须递归地接收 ByteStrings 段。那没问题。

为什么**BSL**会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T12:02:26.507

`hGet`是严格的——它立即要求您请求的字节数。这样做是为了便于数据包级别的数据读取。

但是，`hGetContentsN`它是惰性的，并且`readFile`是根据`hGetContentsN`.

考虑两种实现：

```
hGetContentsN :: Int -> Handle -> IO ByteString
hGetContentsN k h = lazyRead -- TODO close on exceptions
  where
    lazyRead = unsafeInterleaveIO loop

    loop = do
        c <- S.hGetSome h k -- only blocks if there is no data available
        if S.null c
          then do hClose h >> return Empty
          else do cs <- lazyRead
                  return (Chunk c cs) 
```

和

```
hGet :: Handle -> Int -> IO ByteString
hGet = hGetN defaultChunkSize

hGetN :: Int -> Handle -> Int -> IO ByteString
hGetN k h n | n > 0 = readChunks n
  where
    STRICT1(readChunks)
    readChunks i = do
        c <- S.hGet h (min k i)
        case S.length c of
            0 -> return Empty
            m -> do cs <- readChunks (i - m)
                    return (Chunk c cs) 
```

关键的魔法是懒惰`hGetContentsN`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:06:58.777

我无法权威地回答惰性字节串的行为，但我建议您研究某种流式处理方法，例如[管道](http://hackage.haskell.org/package/conduit)或[枚举](http://hackage.haskell.org/package/enumerator)器。使用导管，您可以编写如下内容：

```
import Data.Conduit
import Data.Conduit.Binary

main = do
    let filename = "something"
    remoteH <- getRemoteHandle
    runResourceT $ sourceHandle remoteH $$ sinkFile filename 
```

[如果您愿意，也可以通过使用network-conduit](http://hackage.haskell.org/package/network-conduit)和类似的东西完全绕过`Handle`抽象：

```
runResourceT $ sourceSocket socket $$ sinkFile filename 
```

# selenium - 确保 webdriver 打开的浏览器始终处于焦点位置

> ID：10649637
> 
> 赞同：12
> 
> 时间：2012-05-18T08:59:26.103
> 
> 标签：selenium, webdriver

如果浏览器窗口不在焦点上，则当前页面上的所有 webdriver 标识都会失败。

如何使用 webdriver 使浏览器成为焦点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:50:59.970

```
((JavascriptExecutor) webDriver).executeScript("window.focus();"); 
```

应该做的伎俩！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-22T23:54:04.853

`executeScript("window.focus();")` **在最新的 Chrome 中对我不起作用**（在本文发布时为 v47）

但是，我在[另一个问题](https://stackoverflow.com/q/19167961/1082449)中发现了一个 hack，它在这个版本的 Chrome中*确实有效。*

以下是通用步骤，因为问题没有指定 Selenium API 语言：

1.  通过在浏览器中执行脚本来显示警报
2.  接受警报

中的实现`webdriverjs`，我正在使用

```
const chrome = setupChromeWebdriver(); // get your webdriver here

chrome.executeScript('alert("Focus window")'))
  .then(() => chrome.switchTo().alert().accept()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-03T00:37:10.460

这对我有用。在打开浏览器的代码之后，发出以下代码段：

```
String window = driver.getWindowHandle();
((JavascriptExecutor) driver).executeScript("alert('Test')");
driver.switchTo().alert().accept();
driver.switchTo().window(window); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-10T22:07:04.650

Selenium 3.0 采用了这个：

```
((IJavaScriptExecutor)po.WebDriver).ExecuteScript("window.focus();"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-08T15:12:18.253

将焦点设置在“驱动程序选项”应该可以：

```
InternetExplorerOptions options = new InternetExplorerOptions();
options.setCapability("requireWindowFocus", true); 
```

# android - 是否有一些默认的边框背景？

> ID：10649640
> 
> 赞同：2
> 
> 时间：2012-05-18T08:59:34.637
> 
> 标签：android, drawing, border, bevelled

我想绘制带有凸起斜角边框的自定义面板状视图（Swing 术语）。有一些预定义的方法吗？例如，是否可以从当前按钮样式中获取边框？或者我必须创建自己的 9 补丁或其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:09:41.587

一种粗略的方法是制作一个可绘制的 XML，其中包含一个图层列表，并自己编写按钮的结构。在我的示例中，您实现了以下按钮样式。

![在此处输入图像描述](../Images/07ab62ec2c24a5df49a97843fb7b1e2a.png)

如果需要，所有颜色都可以更改以适合您的风格。我知道角落应该是 45º 角而不是 90º 但没有简单的方法让我在这里展示这个没有一些测试。源 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <!-- The gray part of the border -->
    <item>
        <shape>
            <solid android:color="#fccc"></solid>
        </shape>
    </item>
    <!-- The black part of the border -->
    <item android:right="2dip"
          android:bottom="2dp">
        <shape>
            <solid android:color="#f000"></solid>
        </shape>
    </item>
    <!-- The content -->
    <item android:left="2dip"
          android:top="2dp"
          android:right="2dip"
          android:bottom="2dp"> 
        <shape>
            <solid android:color="#ffafafaf"></solid>
        </shape> 
    </item>
</layer-list> 
```

作为您可以在此处实现的进一步示例，只需添加`<corners android:radius="4dp"></corners>`边框形状，我们就可以获得稍微不那么刺眼的样式：

![在此处输入图像描述](../Images/5f3884dae68b2b0f02bf4727a31866c4.png)

或者，您可以采用不同的方法并避免凸起的斜角边框，使其在 XML 方面更容易并且可能更好。要实现这种按钮：

![在此处输入图像描述](../Images/9bc9e9c8eb4594eeb9cb8c8e273bcef4.png)

XML 就像以下一样简单：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <corners android:radius="4dp"></corners>
    <solid android:color="#fccc"></solid>
    <stroke android:width="2dp" android:color="#ff6f6f6f"></stroke>
</shape> 
```

# javascript - javascript函数未从html文件调用

> ID：10649641
> 
> 赞同：1
> 
> 时间：2012-05-18T08:59:44.337
> 
> 标签：javascript, html

我有一个js文件和一个html文件野兔是代码

testjs.js

```
function DynamicDiv() {  
    alert('enter');            
        var dynDiv = document.createElement("div");
        dynDiv.id = "divDyna";
        dynDiv.innerHTML = "Created using JavaScript";
        dynDiv.style.height = "20px";
        dynDiv.style.width = "300px"; 
        dynDiv.style.backgroundColor = 'gray';
        document.body.appendChild(dynDiv);
    } 
```

我的html代码如下

```
<html>
<head>
<TITLE>Test Page</TITLE>
<script type="text/javascript" src="testjs.js" language="javascript"></script>
<script type="text/javascript" src="jquery-1.4.2.js" language="javascript"></script>
<script type="text/javascript" language="javascript">
    //"Global" variable accessible to all 
    //$(document).ready(DynamicDiv());  
</script>
</head>
<body onLoad="DynamicDiv()"> 
 <input id="Button1" type="button" value="Using JS" onclick="" />   
<div id="Layer1" style="position: absolute; width: 100%; height: 17px; z-index: 1; left: 0px; top: 3px;">
  <div align="right"><a href="http://www.uspto.gov/main/patents.htm">PATENTS</a>&nbsp;&nbsp;&nbsp; </div>
</div>
</body>
</html> 
```

但我无法调用该函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:04:55.553

well your code is woking well with me, may be the path that you have provided to your testjs.js file might not be accurate but its workin fine with me. try checking the path to your js file

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:22:26.093

另一个建议，因为你加载 jQuery，加载最新的并更改脚本以使用它

```
<html>
  <head>
    <TITLE>Test Page</TITLE>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js" language="javascript"></script>
    <script type="text/javascript" language="javascript">
    function DynamicDiv() {  // to be externalised
    //    alert('enter');            
      $('<div/>', {
        id: 'divDyna',
        width:300,
        height:20,
        css:{border:'1px solid black', 'background-color':'grey'},
        html: 'Created using <i>JavaScript</i>'
      }).appendTo('body')
    } 
    </script>
    <script type="text/javascript" language="javascript">     
      $(document).ready(function() {
        DynamicDiv();  
      });  
    </script>
  </head>
  <body> 
    <input id="Button1" type="button" value="Using JS" onclick="" />   
    <div id="Layer1" style="position: absolute; width: 100%; height: 17px; z-index: 1; left: 0px; top: 3px;">
      <div align="right"><a href="http://www.uspto.gov/main/patents.htm">PATENTS</a>&nbsp;&nbsp;&nbsp;         
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:48:55.430

我使用外部 js 文件进行了测试。即使在 IE6 上也可以正常工作。此类问题多为“文件路径错误”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T03:46:22.347

您的代码与我配合良好，可能您的 Internet 浏览器不兼容，或者您​​提供给`testjs.js`文件的路径可能不正确。检查 JavaScript 文件的路径。

# javascript - 没有 jQuery 的 JS 上的动态 html 表

> ID：10649647
> 
> 赞同：0
> 
> 时间：2012-05-18T09:00:22.700
> 
> 标签：javascript, html, dynamic

如何在JS上做动态html表格？如何做得更好（appendChild 或 innerHTML）**而不**使用 jQuery。例如，我必须有 6 个按钮：

*   添加行开始表格；
*   将行添加到中间；
*   将行添加到末尾；
*   删除第一行；
*   删除中间行；
*   删除最后一行；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:59:25.033

```
var table=document.getElementById('table')
    var x;
    for( var j=0; j<list.length; j++){
        x=table.insertRow(-1);
        for(var i=0; i<40; i++)
            x.insertCell(i).innerHTML=list[j][i]; 
```

这就是我制作动态表的方式。之后，您可以索引要添加或删除的行。这一切都是在 JS 中使用 DOM 属性完成的（我不太了解 JQ，但我确定您可以翻译）使用这种方法，您可以添加一个查找表格中间行的函数。此外，如果您想让用户更轻松地在表中的任何位置添加行或删除行，则此方法允许这样做，因为它将根据您发送的索引动态添加它

```
table.deleteRow(table.rows.length-1);//deletes last row
table.deleteRow(0); //deletes first row 
```

要阅读有关 DOM 表方法的更多信息：[http ://www.javascriptkit.com/domref/tablemethods.shtml](http://www.javascriptkit.com/domref/tablemethods.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-20T01:24:54.583

*OP的解决方案。*

```
function addRow(val) {
    // Get a reference to the table
    var tbl = document.getElementById('mytable');
    var lastRow = tbl.rows.length;
    var tmp = 1;
    if (val == 1) tmp = 1;
    if (val == 2) tmp = lastRow / 2;
    if (val == 3) tmp = lastRow - 1;

    // Insert a row in the table at row index  
    var newRow = tbl.insertRow(tmp);

    // Insert a cell in the row at index 0 1 2 3
    var newCell = newRow.insertCell(0);
    var newCell1 = newRow.insertCell(1);
    var newCell2 = newRow.insertCell(2);
    var newCell3 = newRow.insertCell(3);

    // Append a text node to the cell
    var newText = document.createTextNode('New row')
    newCell.appendChild(newText);
}

function removeLast() {
    var tbl = document.getElementById('mytable');
    var lastRow = tbl.rows.length;
    if (lastRow > 2) tbl.deleteRow(lastRow - 2);
}

function removeFirst() {
    var tbl = document.getElementById('mytable');
    var lastRow = tbl.rows.length;
    if (lastRow > 2) tbl.deleteRow(1);
}

function removeMiddle() {
    var tbl = document.getElementById('mytable');
    var lastRow = tbl.rows.length;
    if (lastRow > 2) tbl.deleteRow(lastRow / 2 - 1);
} 
```

# windows-phone-7 - 在 WindowsPhone 上的 taskhost 之外启动新进程

> ID：10649648
> 
> 赞同：0
> 
> 时间：2012-05-18T09:00:26.427
> 
> 标签：windows-phone-7, process

我想从另一个本机进程在 Windows Phone 7 上运行本机进程。不幸的是，我无法使用 System.Diagnostic.Process，因为 WP7 不支持它。

与 System.Runtime.InteropServices.Automation.AutomationFactory 相同，因为它是 Silverlight 内部库。

有没有其他方法可以做到这一点？

预先感谢您的任何帮助

BR，卢卡斯

编辑：

假设我在“\Windows\Process.exe”中有一个名为“Process.exe”的进程。我可以使用 WPRun.exe 工具通过我的电脑启动它，但我想从我的手机自动启动它。（没有可以使用 AutomationFactory 执行此操作的 Silverlight 应用程序。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:36:57.307

不支持*在手机上执行此类操作的方式。

*-如果您尝试使用比公共 SDK 更多的东西编写东西，您可能会在 XDADeveloeprs 上得到更好的响应

# javascript - 使用 jQuery 一个接一个地切换 DOM 元素

> ID：10649650
> 
> 赞同：2
> 
> 时间：2012-05-18T09:00:34.870
> 
> 标签：javascript, jquery, jquery-animate

我有以下代码：

```
<div id="quotes">
    <p>"Quote 1."</p>
    <p>"Quote2!"</p>
    <p>"Quote3"</p>
    <p>"Etc"</p>
</div> 
```

有没有一种简单的方法可以循环浏览每个报价，所以显示报价 1，然后淡出显示报价 2！等还是我需要使用插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:03:19.227

```
$('#quotes p').each(function(index){
    $(this).delay(index * 1000).fadeIn().fadeOut();
}); 
```

或者是这样的：

```
$('#quotes p').hide().each(function(index){
    $(this).delay(index * 1600).fadeIn().delay(750).fadeOut();
});​ 
```

[**现场演示**](http://jsfiddle.net/NThcn/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:05:53.717

1.  将 Q2、Q3 等的可见性保持为“隐藏”。
2.  延迟显示第一个报价的时间，然后在回调时，您可以切换第一个和第二个报价的可见性。在此回调中为流程重复延迟和回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:05:57.457

```
 $('#quotes').find('p').hide();   

 $('#quotes').find('p').each(function(i){
        $(this).prev().fadeOut('slow');
        $(this).fadeIn('slow');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:06:22.437

另一种选择是使用插件。jQuery 循环插件非常棒，而且设置起来超级简单：

它变成了一个班轮： `$('#quotes').cycle()`

演示：http: [//jsfiddle.net/lucuma/HsWrC/1/](http://jsfiddle.net/lucuma/HsWrC/1/)

循环插件：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

参考（控制时间、动画类型等）：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

# c# - 在没有 Linq 的情况下对列表进行排序

> ID：10649651
> 
> 赞同：-3
> 
> 时间：2012-05-18T09:00:39.917
> 
> 标签：c#, list

岁月是 IList

```
Data = new SelectList(years.Distinct().ToList().Sort()); 
```

但它给出了语法错误。该怎么办？我不能使用 linq。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:04:41.000

如果您不能使用 LINQ，那么您也不能使用`Distinct`and `ToList`，因此您的示例代码没有意义。

也就是说，both`List<T>`和`Array`have[方法](http://msdn.microsoft.com/en-us/library/9771wchs)。[`Sort`](http://msdn.microsoft.com/en-us/library/3da4abas)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:05:54.453

这里的问题是`Sort()`返回`void`并传递`void`给`SelectList`构造函数。您的代码应如下所示：

```
var list = years.Distinct().ToList();
list.Sort();
Data = new SelectList(list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:03:01.250

不`Lambda Operator`使用

```
List tData = years.Distinct().ToList();

Array.Sort(tData); // Since Array.Sort has a `void` return type.

var Data = new SelectList(tdata); 
```

你`Distinct()`和`ToList()`是`LINQ`基于。

# mysql - Rails 资产预编译失败，连接太多

> ID：10649652
> 
> 赞同：1
> 
> 时间：2012-05-18T09:00:42.343
> 
> 标签：mysql, ruby-on-rails

当我尝试调用`rake assets:precompile`生产时，我收到“连接太多”错误。

我正在使用 Rails 3.2.3，并且我的 database.yml 设置为`pool: 5`

关于如何解决这个问题的任何想法？

谢谢

# android - 如何在 Android/Phonegap 中设置宽度？

> ID：10649655
> 
> 赞同：1
> 
> 时间：2012-05-18T09:00:49.280
> 
> 标签：android, cordova

我正在使用 phonegap 构建网站，问题是我无法根据手机的屏幕尺寸设置页面宽度，我根据 HVGA 设计了我的页面。我不能做的是页面内容根据屏幕尺寸以任何方向拉伸宽度，以便覆盖整个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:07:18.017

你的意思是设置视口吗？

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"> 
```

# python - 如何使用 python 的 networkx 模块从节点列表生成完全连接的子图

> ID：10649673
> 
> 赞同：24
> 
> 时间：2012-05-18T09:02:02.437
> 
> 标签：python, networkx

我需要从要连接的节点列表开始使用[networkx生成一个完全连接的子图。](http://networkx.lanl.gov/)基本上，我希望传递给函数的列表中的所有节点都相互连接。

我想知道是否有任何内置函数可以实现这一点（我还没有找到）？还是我应该考虑一些算法？

非常感谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T11:09:49.807

我不知道有什么方法可以做到这一点，但你可以很容易地模仿 networkx 的 complete_graph() 方法并稍微改变它（几乎就像一个内置的）：

```
import networkx
import itertools

def complete_graph_from_list(L, create_using=None):
    G = networkx.empty_graph(len(L),create_using)
    if len(L)>1:
        if G.is_directed():
            edges = itertools.permutations(L,2)
        else:
            edges = itertools.combinations(L,2)
        G.add_edges_from(edges)
    return G

S = complete_graph_from_list(["a", "b", "c", "d"])
print S.edges() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-18T11:13:37.583

有一个用于创建完全连接（即完整）图的函数 nameley `complete_graph`。

```
import networkx as nx
g = nx.complete_graph(10) 
```

它需要一个整数参数（图中的节点数），因此您无法控制节点标签。我还没有找到自动执行此操作的功能，但`itertools`它很容易：

```
from itertools import combinations

nodes = ['A', 'B', 'C', 'D', 'E']
edges = combinations(nodes, 2)
g = nx.Graph()
g.add_nodes_from(nodes)
g.add_edges_from(edges) 
```

`combinations(nodes, 2)`将创建具有所有对组合的 2 元素元组`nodes`，然后将其用作图中的边。

但是，此解决方案仅对无向图有效。查看[zubinmehta 的解决方案](https://stackoverflow.com/a/10651524/885443)以获得更通用的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-26T12:43:37.650

您可以使用 networkx 命令直接生成带有整数节点的 clique，然后有一个简单的命令可以使用任何其他可散列名称重新标记节点。

```
import networkx as nx
L=["hello", "world", "how", "are", "you"]
G=nx.complete_graph(len(L))
nx.relabel_nodes(G,dict(enumerate(L)), copy = False) #if copy = True then it returns a copy. 
```

# forms - Specifying a date range in a Symfony2 form

> ID：10649674
> 
> 赞同：0
> 
> 时间：2012-05-18T09:02:17.147
> 
> 标签：forms, symfony, doctrine-orm, date-range

In my Symfony2 application there is an entity called 'Appointment'. This entity has a field/property called "date". It has a format like: '2012-12-24'.

I have created a form called AppointmentType, to be able to search for appointments based on their properties. The form is used in AppointmentController, and rendered to appointment.html.twig.

So far so good. I can search appointments based on all fields. I can for instance search on a specific date (that is, on an exact match).

However, I would like to be able to search for appointments given a date range (using a start and end date). The question would be: "Give me all appointments between this and that date." I've tried many things but can't figure it out in Symfony2.

Some random thoughts here:

*   Should I create two extra fields in the Appointment entity beside "date", call them "startdate" and "enddate", not link them to the MySql table but only use them for search?
*   Should I do something in the form, creating two date fields linked to the same date property of the entity (seems to cause violation)?
*   Should I not use a Symfony2 form for this, but do it the old fashion way (manually write and process the form)? This works at the moment but it is far from elegant in a Symfony2 environment.

Any help is welcome. Especially a (complete) working code example would be awesome, so I can study it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:11:37.330

```
public function getAppointmentsByDate($startDate, $endDate)
{
   $query = $em->createQuery('SELECT a FROM Appointment a WHERE a.date BETWEEN ?1 AND ?2');
   $query->setParameter(1, $startDate);
   $query->setParameter(2, $endDate);
   return $query->getResult();
} 
```

# mysql - 如何查询涉及多个多对多关系的位置

> ID：10649675
> 
> 赞同：1
> 
> 时间：2012-05-18T09:02:22.420
> 
> 标签：mysql, many-to-many

我有几个具有以下关系的表：-

```
publications->id name  
categories->id name
types->id name
program->id name 
```

一份出版物可以有许多类别、许多类型和许多节目。同样，每个出版物都有许多出版物。所以发布表与这些表中的每一个都有多对多的关系。因此，我为它们中的每一个创建了关联表，并放置了以下三个表来链接上述每个表

```
pub_cat ->publicationid categoryid
pub_type->publicationid typeid
pub_prog->publicationid programid 
```

现在我必须找到所有出版物的名称 categoryid=2,typeid=2 和 programid=1

我对这些复杂的查询很陌生，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:31:40.377

您应该查看将所有表连接在一起的连接，并在 where 子句中说明您想要查找的内容。一个例子可能是：

```
SELECT * FROM t1 LEFT JOIN (t2, t3, t4)
             ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)
WHERE t2.a = 1; 
```

这只是这里[MySQL 参考的一个例子](http://dev.mysql.com/doc/refman/5.6/en/join.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:44:03.353

好的，我刚刚解决了这个..谢谢@eggyal，@raphael

```
select id,title,pub_cat.catid,pub_prog.progid,pub_type.typeid from publications
inner join pub_cat on publications.id=pub_cat.pubid
inner join pub_prog on publications.id=pub_prog.pubid inner join pub_type
on publications.id=pub_type.pubid where pub_type.typeid=6 and pub_cat.catid=7
and pub_prog.progid=1; 
```

# shell - How to regroup commands in a shell to avoid repeated redirections?

> ID：10649678
> 
> 赞同：1
> 
> 时间：2012-05-18T09:02:41.320
> 
> 标签：shell

I have a script where I output three things into a file. I'd like to call the `>` operator only once. Is there a way to describe a block of instructions? Should I use a function?

```
#!/bin/sh

for i in $(ls src)
 do
  f=${i%.*}
  echo 'first bit' > dist/$i.htm
  perl myScriptThatOutputsSecondBit.pl >> dist/$i.htm
  echo 'third bit' >> dist/$i.htm
 done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:09:12.013

使用`compound/group`命令：

要在当前 shell 中运行它，

```
 {echo 'first bit';perl myScriptThatOutputsSecondBit.pl;echo 'third bit';} > dist/$i.htm 
```

要在子 shell 中运行它，

```
 (echo 'first bit';perl myScriptThatOutputsSecondBit.pl;echo 'third bit') > dist/$i.htm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:30:22.053

写一个简单的日志函数，这样会更有效率。例如

```
log(){
   echo $1 >> dist/$i.htm
} 
```

然后从脚本中调用它：

```
for i in $(ls src)
do
    f=${i%.*}
    log 'first bit'
    perl myScriptThatOutputsSecondBit.pl >> dist/$i.htm
    log 'third bit'
done 
```

# twitter - How do I get top tweeps by country?

> ID：10649679
> 
> 赞同：3
> 
> 时间：2012-05-18T09:02:51.280
> 
> 标签：twitter

I want to know how to get top tweeps by country.

ex : [http://india.twirus.com/?category=india&freqtype=today](http://india.twirus.com/?category=india&freqtype=today)

Tweeps = twitter People ;)

**Ranking Logic : Top Mention profile for last 24hrs.** *(You can also suggest me if you have any batter logic to get popular tweeps)

I tried twitter API but not able to find this one.

**If there is no available api , you can also suggest possible logic.**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T15:49:12.600

您必须[搜索](https://dev.twitter.com/docs/api/1/get/search)包含所有感兴趣的推文，然后循环遍历结果，为每个用户创建一个计数。然后，您的问题就变成了对结果进行排序的简单案例。

由于每个请求最多有 100 个结果（每个分页结果大约 1500 个），您几乎肯定必须通过指定`since_id`和/或`max_id`参数来分块结果。

*   如果您希望获取*有关*您感兴趣的国家/地区的推文，您可以按[地点](https://dev.twitter.com/docs/platform-objects/places)搜索（您首先必须使用[地理搜索 API](https://dev.twitter.com/docs/api/1/get/geo/search)来识别您感兴趣的国家/地区的地点 ID；在印度的情况下，地点 ID 是[b850c1bfd38f30e0](https://api.twitter.com/1/geo/search.json?query=India&granularity=country)）。

*   如果您希望*从*您感兴趣的国家/地区获取推文，您可以指定一个参数，该`geocode`参数由该国家/地区内的一个点和一个足够大以包含该国家/地区其他地区的半径组成。这两个元素都可以通过以下方式作为一次性练习获得：

    1.  确定感兴趣国家的边界​​多边形；这些可以从现有资源中获得，例如从[CloudMade 下载站点](http://downloads.cloudmade.com/)。在印度的情况下，坐标可[在此处](http://downloads.cloudmade.com/asia/southern_asia/india/india.poly)获得。

    2.  找到多边形顶点的[最小边界圆](http://en.wikipedia.org/wiki/Smallest_circle_problem)，记住在计算中使用[地理距离](http://en.wikipedia.org/wiki/Geographical_distance)。

    如果您希望排除地理标记在圆圈内但在国家边界多边形之外的推文，对于每个生成的推文，您必须[确定](http://erich.realtimerendering.com/ptinpoly/)其是否`coordinates`位于多边形内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:05:01.587

Twitter 没有这方面的 API - Twirus 收集他们自己的数据。

可能的逻辑：使用示例流（或联系 Twitter 以访问更好的流，例如gardenhose 或 firehose）并处理所有传入的推文。您必须使用数学来确定推文是在哪个国家/地区发布的。然后执行其他明显的逻辑，例如为用户保留提及数量的计数器。

# java - 在 Spring IDE 中，关于 html/jsp 页面的 css、javascript 和图像文件在哪里保存？

> ID：10649680
> 
> 赞同：3
> 
> 时间：2012-05-18T09:02:54.213
> 
> 标签：java, eclipse, spring-mvc

我正在使用**Eclipse** Europa IDE 和**Tomcat**服务器 在 Spring MVC 框架中开发一个 Web 应用程序

我的目录结构是（部分）：

```
- WebContent  
    - WEB-INF  
        - pages  
            - CSS  
            - images  
            - login.html  
        - dispatcher-servlet.xml  
        - web.xml 
```

在我的 login.html 中，我有一个指向 css 文件的链接

```
<link rel="stylesheet" type="text/css" href="CSS/loginregister.css" media="screen"> 
```

由于我的 login.html 和 CSS 文件夹位于同一个文件夹“页面”中，我认为这会起作用。
但是**没有**。css 文件未加载（login.html 出现流畅）

我也试过：

> <href="/CSS/loginregister.css">
> <href="pages/CSS/loginregister.css">

我正在通过我的**控制器类**访问 login.html 。
我的网址是这样的：`http://localhost:8080/AccountCreation/login.htm`

谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:10:17.167

将您的“页面”文件夹移动到 WebContent 而不是 WEB-INF 下。JSP 页面应受 WEB-INF 保护，但不受 css、js、html 等静态文件的保护。

您的应用程序上下文的根是 WebContent 将被引用为

```
http://server.com/contextroot/ 
```

最佳做法是创建一个文件夹 WebContent/css 并将您的文件 loginregister.css 放在那里。您的链接将是

```
<link rel="stylesheet" type="text/css" href="css/loginregister.css" media="screen"> 
```

要进行测试，您只需在浏览器中输入以下 URL，以确保 css 文件按预期从您的上下文根中提供

```
http://server.com/contextroot/css/loginregister.css 
```

**[编辑]**

对于您的初始测试，也将您的 login.html 放在 WebContent（例如`WebContent/login.html`）中，但是您已经提到您使用的是 Spring，因此您最终可能会用等效的 JSP 替换 login.html。

```
http://server.com/contextroot/login.html 
```

# javascript - How to upload an image ON THE PAGE with AJAX

> ID：10649686
> 
> 赞同：0
> 
> 时间：2012-05-18T09:03:14.697
> 
> 标签：javascript, html, browser, canvas, w3c

This is just a conjecture, I'm not sure whether there is an approach.

The core part of this question is how to get the data of the image without making another XHR request for it's src.

I have tried canvas before, I created a canvas object and want to `drawImage` with the DOM reference of the target image, or an `Image` object with src attribute. But I always got the same error as this [question](https://stackoverflow.com/questions/2390232/why-does-canvas-todataurl-throw-a-security-exception) mentions.

Go back to question, since the image we see has been fetched by the browser and must be somewhere in the disk or memory, there should be a method to operate the image file. If really not, please tell me why javascript or browsers prevent doing this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:53:36.623

如果您遇到安全异常，则无法上传该图像。时期。

好吧，您也许可以为该图像[启用 cors](http://enable-cors.org/)并修复错误。

否则，有[很好的理由](http://simonsarris.com/blog/480-understanding-the-html5-canvas-image-security-rules)不允许您这样做。

# java - Using @EmbeddedId with JpaRepository

> ID：10649691
> 
> 赞同：40
> 
> 时间：2012-05-18T09:03:29.923
> 
> 标签：java, spring, jpa, jpql, spring-data

I have simple Entitly class with the `@EmbeddedId` (`Integer` and `String` fields in separate class). And I use the Spring Data (`org.springframework.data.jpa.repository.JpaRepository`) to access the database (MySql), with the normal Id the queries are working fine, both the generated by Spring and the ones wrote by myself. With the `EmbeddedId` I didnt manage to create the correct query. What I want to do is to select all the id (one of the fields of embeddedId for which some condition occurs) Here you have some code samples, maybe somebody will have an idea how to solve it.
The entity class:

```
@Entity
@Table(name="table_name")
public class EntityClass {

    @EmbeddedId
    private EmbeddedIdClass id;
    private String  someField;
    //rest of implemetation
} 
```

the EmbeddedId class:

```
@Embeddable
public class EmbeddedIdClass implements Serializable {

public EmbeddedIdClass(Long id, String language) {
    super();
    this.id = id;
    this.language = language;
}

public UserAdTextId() {}        

@Column(name="ad_id", nullable=false)
    private Integer id;

    @Column(name="language_code", nullable=false)
    private String  language;
    //rest of implemetation
} 
```

and the repository:

```
@Transactional(readOnly=true)
public interface MyRepository extends JpaRepository<EntityClass, EmbeddedIdClass> {
    @Query("select distinct ad_id from EntityClass where userId = :userId and (/*here the conditions*/)")
    public Page<Integer> findUserAdsWithSearchString(@Param("userId") Integer userId, @Param("searchString") String searchString, Pageable page);
//rest of implemetation
} 
```

I didn't find any documentation how to create the methods for supporting the @EmbeddedId, I was trying many different method names, but I always get exceptions from the method parser..

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-02-05T14:21:33.453

（由 Yosi Lev 撰写）这可以通过以下方式完成：假设您的主要实体是：

```
@Entity
@Table(name="JRULES_FLOW")
public class JrulesFlow implements Serializable {
   private static final long serialVersionUID = 1L;

   @EmbeddedId
   private JrulesFlowPK id;

   @Column(name="NEXT_SEQ")
   private int nextSeq;

   @Column(name="REF_ID")
   private String refId;

   @Column(name="TASK_TYPE")
   private String taskType;

   @Column(name="VALUE_TO_FIND")
   private String valueToFind;
} 
```

你的PK课是：

```
@Embeddable
public class JrulesFlowPK implements Serializable {
   //default serial version id, required for serializable classes.
   private static final long serialVersionUID = 1L;

   @Column(name="FLOW_ID")
   private String flowId;

   @Column(name="TASK_SEQ")
   private long taskSeq;
 } 
```

JPA 存储库方法名称应包括主类中 id 字段的名称，后跟要在 PK 类中查询的属性：

```
public interface JrulesFlowRepository extends JpaRepository<JrulesFlow, 
      JrulesFlowPK> { // NOTE: put here both classes - also the pk class..
   public List<JrulesFlow>  findByIdFlowId(String flowId);  // Id - is the 
                  // @EmbeddedId in JrulesFlow. FlowId is an attribute 
                  // within JrulesFlowPK
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-18T09:18:49.193

您的查询似乎使用了列名。它应该包含属性名称，包括嵌入对象的导航。这里还有一个相关的问题：[How to write JPQL SELECT with embedded id?](https://stackoverflow.com/q/4676904/851811)

```
select distinct id.id from EntityClass where userId = :userId and (...) 
```

第一个`id`是指（类型）的属性`id`，第二个是指的属性。`EntityClass``EmbeddedIdClass``id``EmbeddedIdClass`

另外，请确保`userId`.`EntityClass`

# windows-phone-7 - single-click vs double-click dilemma in wp7

> ID：10649693
> 
> 赞同：1
> 
> 时间：2012-05-18T09:03:37.017
> 
> 标签：windows-phone-7, silverlight-4.0

single-click vs double-click dilemma

I have an event happening for a single-click, and I have a different event happening for double-click.

Single-click: load preview of email message

Double-click: load message view in different window

The issue is that in order for a double-click to occurr, a single-click happens... twice. The current solution has been to put a timeout on the single-click and cancel it if the double-click is detected.

Question 1: What is the timeout on a double-click event to occur? If I single-click really slowly, it won't take place, for example.

Question 2: Is there a better way to solve this than to use a timeout?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:24:43.650

您绝对应该重新考虑您的 UI。看看你身边的应用程序，尤其是在 Windows 中：当支持双击时，单击动作总是被触发，并且不显眼。例如，当双击一个图标时，第一次单击将选择它，第二次单击将触发动作。至少有两个原因：

1.  双击是一个复杂的操作。用户有时会失败，而是触发单击操作。因此，你不想做任何可能惹恼他的事情。

2.  如果您不想在每次用户双击时触发单击操作，那么除了设置超时之外别无他法。这意味着每个尝试使用单击的用户都必须忍受该超时，从而降低应用程序的响应能力并阻碍用户体验。

我可以添加一个特定于 WP7 开发的原因：由于大多数其他移动应用程序中没有使用双击，因此手势不可发现，并且大多数用户不会意识到他们可以使用它。

底线：考虑使用其他手势（如扫动或点击并按住），或更改您的 UI 以使其不必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T17:20:58.600

我在朋友的帮助下找到了答案。

```
private void Button_Tap(object sender, GestureEventArgs e)
    {
        //add the event handler for single tap event
        dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
        //start timer. If the tick happends a single tap happend. If it is a double tap the tick event will be removed.
        dispatcherTimer.Start();
    }

    //No double tap happend. So execute the tap function.
    private void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        //Stop timer
        dispatcherTimer.Tick -= new EventHandler(dispatcherTimer_Tick);
        dispatcherTimer.Stop();

        //Rest of the tap function
        Taps.Add("Tap");
    }

    private void Button_DoubleTap(object sender, GestureEventArgs e)
    {
        //Stop timer
        dispatcherTimer.Tick -= new EventHandler(dispatcherTimer_Tick);
        dispatcherTimer.Stop();

        //Rest of the double tap function
        Taps.Add("Double tap");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:22:53.010

你为什么不使用别的东西。点击以在新窗口中打开按住预览？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T19:00:23.897

on wp7, doubleTap is likely never used. Hold would be the right way to go

# c - 如何从 Linux 中的分叉子进程立即返回？

> ID：10649694
> 
> 赞同：0
> 
> 时间：2012-05-18T09:03:38.350
> 
> 标签：c, linux, process, execv

我不熟悉linux C开发。

我的代码：

```
....

if((pid=fork())==0){
  //child process
  //start a process, may be need to change execv to other call
  execv (workdir , args);
}else if (pid<0){
  ...
}else{
  ...
} 
```

我想要做的是立即从子进程中启动的新进程返回。

因为在当前程序中，`execv (workdir , args);`不会返回。（我需要开始一个长时间运行的过程）。

我想做的是开始这个​​长期运行的过程并立即在我的 C 代码中返回，以便我的 C 程序可以退出。

我怎样才能做到这一点？也许让我开始的新子进程成为一个守护进程，如何通过 api 调用来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:19:28.633

像这样的东西：

```
close(0); open("/dev/null", 0);
close(1);

if(open("/dev/null", O_WRONLY) < 0) {
    perror("/dev/null");
    exit(1);
}

switch(pid = fork()) {
    case -1:
        perror(argv[0]);
        exit(1);
        break;
    case 0:
        fflush(stdout);
        close(2); dup(1);
        setpgrp();
        setsid();
        execv(argv[0], argv);
        execvp(argv[0], argv);
        perror(argv[0]);
        _exit(1);
        break;
    default:
        exit(0);
        break;
} 
```

将分叉和分离一个进程，然后退出。它“守护”程序。

# f# - How do I stop my FSUnit tests using F# full syntax

> ID：10649696
> 
> 赞同：1
> 
> 时间：2012-05-18T09:03:44.663
> 
> 标签：f#, fsunit

We are using the wonderful FSUnit for our unit testing. This works fine, except the bodies of our tests insist on using full F# syntax (with 'in' at the end of each line etc.) instead of #light syntax. For example:

```
module MyTests

open System
open NUnit.Framework
open FsUnit
open MyModule

[<TestFixture>] 
type ``Given a valid file`` () =

    let myFile = createSomeFile()

    [<Test>] member x.
     ``Processing the file succeeds`` () =
        let actual = processFile myFile in
        actual |> should be True 
```

Note the 'in' at the end of the first line of the test. Without that, the test won't compile - which is fine for short tests but is becoming a pain for longer test methods. We've tried adding an explicit #light in the source but that seems to make no difference. This is part of a large project with many modules, all of which - other than the test modules - are happily using light syntax (without any explicit #light). What's triggering full syntax in the test modules?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:14:03.457

在编写类成员时，您需要使用一些不同的缩进。以下应该没问题：

```
[<TestFixture>]  
type ``Given a valid file`` () = 
    let myFile = createSomeFile() 

    [<Test>] 
    member x.``Processing the file succeeds`` () = 
        let actual = processFile myFile
        actual |> should be True 
```

第一个问题是成员的名称应该比缩进更远`.`，第二个问题是成员的主体应该比`member`关键字缩进更远 - 在您的版本中，关键字写在后面`[<Test>]`，所以如果你缩进它会起作用身体进一步。

添加`in`解决了这个问题，因为这更明确地告诉编译器如何解释代码（因此它不依赖于缩进规则）。

除了 - 使用一些单元测试框架，也可以使用`module`它为您提供更轻的语法（但我不确定如果您需要一些初始化 - 即加载文件，它是如何工作的）：

```
[<TestFixture>]  
module ``Given a valid file`` = 
    let myFile = createSomeFile() 

    [<Test>] 
    let ``Processing the file succeeds`` () = 
        let actual = processFile myFile
        actual |> should be True 
```

# hex - 如何在字符串中显示完整的十六进制？

> ID：10649703
> 
> 赞同：0
> 
> 时间：2012-05-18T09:04:12.223
> 
> 标签：hex

我如何在字符串中显示完整的十六进制，例如 000010，但不仅仅是 10。我必须在 10 前面显示 0000。这是我的代码......谢谢=）

```
bn1 = Convert.ToString(Convert.ToInt32(strm1, 16), 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:07:57.313

您可以在您提供的代码行之后执行以下操作：

```
for (int i = 0; i < 6 - bn1.Length; i++)
    bn1 = "0" + bn1; 
```

请注意，这是一个非常简单的方法，只是为了展示这个想法。

# windows - Maven：找不到 mvn 命令

> ID：10649707
> 
> 赞同：29
> 
> 时间：2012-05-18T09:04:30.570
> 
> 标签：windows, maven

我设置了以下系统变量（OS = Vista）：

```
M2_HOME = C:\Program Files\Maven 
M2 = %M2_HOME%\bin 
path = %M2% 
```

如果我运行 mvn -- version 我得到：

```
mvn: command not found 
```

有人知道为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-08-25T11:36:14.697

Maven设置：

一种。[从https://maven.apache.org/download.cgi](https://maven.apache.org/download.cgi)安装 maven

湾。解压maven并保存在C盘。

C。在系统变量中 设置**MAVEN_HOME 。**[![在此处输入图像描述](../Images/4668d1e9cc2e55955da89eda2d0b7b15.png)](https://i.stack.imgur.com/Y3xL0.png)

d。**为maven设置路径** [![在此处输入图像描述](../Images/0c2c1ce64292efbaeb6c5dec5d9d9389.png)](https://i.stack.imgur.com/fPhYC.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T09:12:10.147

如果您在 Windows 上，我想您需要像这样设置 PATH：

```
SET PATH=%M2% 
```

此外，我假设您需要将路径设置为 C:...\apache-maven-3.0.3\ 因为这是 Windows 存档的默认文件夹。另一方面，我假设您需要将 maven 的路径添加到您的路径中，而不是将其设置为仅 maven，因此您的设置应如下所示：

```
SET PATH=%PATH%;%M2% 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-29T07:01:48.843

我遵循了本教程：[如何在 Windows 上安装 Maven](https://www.mkyong.com/maven/how-to-install-maven-in-windows/)

但是运行`mvn -version`，我仍然得到：

> mvn：找不到命令

所以，我关闭了当前的 git 窗口，并打开了一个新窗口。一切顺利:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-16T18:07:52.607

我尝试了其他线程的解决方案。在系统变量甚至用户变量中添加 M2 和 M2_HOME。以管理员身份运行 cmd。这些方法都没有奏效。

但是今天我将 maven bin 的整个路径添加到我的系统变量“PATH”（C:\Program Files (x86)\Apache Software Foundation\apache-maven-3.1.0\bin）以及其他路径中，到目前为止它运行良好. 希望它会保持这种状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T09:15:01.307

1.  在命令提示符下运行 ' *path* ' 并确保列出了 maven 安装目录。
2.  确保 maven 安装在“C:\Program Files\Maven”中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-21T12:36:26.827

我认为问题出在空格上。我在系统变量中有我的变量，但它不起作用。当我更改变量时，`Progra~1 = 'Program Files'`一切正常。

```
M2_HOME C:\Progra~1\Maven\apache-maven-3.1.1 
```

我也在`M2_HOME`最后移动了我的`PATH(%M2_HOME%\bin)`我不确定这是否有任何区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-27T21:11:23.733

我认为@emdhie 通过的教程会有很大帮助。 [如何安装maven](http://www.tutorialspoint.com/maven/maven_environment_setup.htm)

但是，我跟着，仍然得到`mvn: command not found`

我找到了这个解决方案来了解我的配置有什么问题：

我打开命令行并调用了这个命令：

```
../apache-maven-3.5.3/bin/mvn --version 
```

之后我得到了正确的 JAVA_HOME 并看到我的 JAVA_HOME 是错误的。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-02-06T05:05:29.153

mvn-版本

导出 PATH=$PATH:/opt/apache-maven-3.6.0/bin

# java - Test a single instance in Weka

> ID：10649708
> 
> 赞同：0
> 
> 时间：2012-05-18T09:04:36.577
> 
> 标签：java, weka

Does weka require the test instances to have the class attribute. I have used a training set arff file to train the classifier. Now I want to test an instance (not from arff file, have to create by code) without the class attribute and predict the class. I found this link [Weka: How do I get the prediction value in java for a test instance?](https://stackoverflow.com/q/8957926/1138148)

But my class attribute is a string 'Y' or 'N'. If evaluateModelOnce() returns double, what does it mean. Is it the class attribute or something else. i am using the weka API.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:56:47.313

要测试实例，实例必须具有类标签。即使您提供类标签，在使用构建的模型进行分类时，Weka 也看不到测试实例的类标签。而是在测试之后，它匹配它对测试实例类的预测是否正确。如果您在训练实例中有标签（您必须有）而不是在测试实例上，那么您将收到一条错误消息，例如“训练集和测试集不兼容”。谢谢你。

# backbone.js - 主干.js - 绑定或连接来自两个集合的模型

> ID：10649709
> 
> 赞同：2
> 
> 时间：2012-05-18T09:04:41.277
> 
> 标签：backbone.js

我有两个数据集返回到两个不同的骨干集合，每个集合使用不同的模型。两个模型共享一个可用于链接它们的字段。

第二个 ajax 调用是在第一个加载之后进行的，作为一种预加载器。

在成功获取第二个集合后（在“重置”事件中），我想以某种方式绑定/加入模型（或简单地将 JSON 复制进去，这是一种单向只读的东西），公共字段的值相同存在匹配的每个其他模型上的属性。

只是重新阅读，我认为它读起来不太好，但希望你能理解......

集合 1

```
[
  {
    foo: 'text',
    bar: 'xxx'
  },
  {
    foo: 'text',
    bar: 'yyy'
  }
] 
```

收藏 2

```
[
  {
    prop1: 'a',
    prop2: 'b',
    bar: 'xxx'
  }
] 
```

无论是添加原始数据还是建立绑定，我希望集合 1 JSON 能够像这样读取

```
[
  {
    foo: 'text',
    bar: 'xxx',
    prop1: 'a',
    prop2: 'b',
  },
  {
    foo: 'text',
    bar: 'yyy'
  }
] 
```

或者

```
[
  {
    foo: 'text',
    bar: 'xxx',
    extraProps: {
      prop1: 'a',
      prop2: 'b'
    }
  },
  {
    foo: 'text',
    bar: 'yyy'
  }
] 
```

非常感谢任何帮助。我认为可以实现的所有方式似乎都不是很*坚强*

PS：我刚刚在标记这个问题时注意到了一个主干关系标记。如果我看到任何有用的东西，我会在那里阅读并回帖。形成一个好的搜索短语是一个相当困难的问题......

**编辑**

感谢您的回复，我突然写了一个快速脚本，并注意到我什至还没写完就收到了一些回复。无论如何，仅供参考，我将添加我最初的，也许是相当健壮的脚本。请忽略 mailing/mailing_id 没有相同的字段名称这一事实，此时我无法控制数据源...

```
<script>
var matches = 0;
_.each(clicks.models, function(click) {
  _.each(mailshots.models, function(mailshot){
    if(click.get('mailing') == mailshot.get('mailing_id')){
      matches++;
      click.set('subject',mailshot.get('mailing_subject'));
    }
  });
});
if(matches) clicks.trigger('reset');
</script> 
```

无论如何，这行得通。但我只是要测试第一个回复并看一下骨干关系。可能比我现在需要的多，但看起来很有趣......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:13:49.967

加载两个集合后，您可以执行以下操作

```
_(collection2).each(function(v,i){
 var model = collection1.where({bar:v.get("bar")}).first();// assuming values of bar are unique
 model.set("prop1",v.get("prop1"));
 model.set("prop2",v.get("prop2"));
}) 
```

并且更有活力

```
 _(collection2).each(function(v,i){
     var model = collection1.where({bar:v.get("bar")}).first();// assuming values of bar are unique
     _.each(_.keys(v),function(k){
          model.set(v,v.get(k));
        });
}) 
```

# asp.net - Publish a website on IIS server

> ID：10649713
> 
> 赞同：0
> 
> 时间：2012-05-18T09:04:54.120
> 
> 标签：asp.net, iis

I designed a web application using `asp.net` . Now I want to publish this site on `IIS` server using a static IP address.

***The steps that I did as follows:***

1.  under IIS sites folder I created a new site.
2.  I selected the website name, application pool, physical path of the web app folder, the protocol `(HTTP)`, public `IP` address and the port(80). Then , I tried to browse and I got this error :

    ***"The requested page cannot be accessed because the related configuration data for the page is invalid."***

Could you please help me to identify the problem or which steps I missed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-20T12:51:24.520

池 .netframework 版本不正确（可能它需要 v4.0 而您的池只有 v2.0）或模式不正确（经典或集成）。另一个因素是共享发布文件夹，（右键单击文件夹，使用 Windows 资源管理器 > 属性 > 共享 > 将其共享给“每个人”读写。

# subquery - HQL 子查询别名

> ID：10649716
> 
> 赞同：2
> 
> 时间：2012-05-18T09:05:01.657
> 
> 标签：subquery, hql, alias

我对 HQL 查询有一些问题。我会像这样使用带有别名的子查询

```
 select distinct a.some1, count(a.some2), 
           (Select count(z.any), z.any.any_id as v from Z z where
            z.level=4) as "zoo", azc.a.any_id 
            from A a 
            where a.z.level=4
            zoo.v=a.z.m 
```

但别名给我一个错误。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:03:14.010

HQL 不支持选择子句中的列的别名，

但是有一个未解决的 jira 问题，请查看[Jira Link](https://hibernate.onjira.com/browse/HHH-2390?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

此功能计划在未来作为新功能添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:54:40.050

好吧，首先，您不能使用双引号来定义别名（`"zoo"`--> `zoo`）。

其次，您使用的是未定义的别名：`azc`.

第三，您的 where 子句是错误的：您忘记了两个限制之间的一个`and`或一个。`or`

在您修复所有这些错误后，我不确定您的查询是否正确，但您至少应该从那开始。请加入错误消息和您遇到的任何异常的完整堆栈跟踪。

# c++ - UDP 套接字。如何确定数据是否发送到线路？

> ID：10649717
> 
> 赞同：1
> 
> 时间：2012-05-18T09:05:02.937
> 
> 标签：c++, sockets, udp

我正在使用UDP套接字。服务器应用程序向客户端发送有关客户端应将数据传输到服务器多长时间的信息。然后，客户端在这段时间内通过发送特定的数据包开始传输。

所以我需要一种方法来确定数据是否在*Sendto()*之后发送到线路，以了解客户端实际发送了多少时间。它存在吗？

操作系统：Windows 7

我尝试使用性能计数器（*网络接口 \ 输出队列长度*），但它始终为 0；

我知道的另一种方法是将 SO_SNDBUF ( *setsockopt()* ) 设置为要发送的数据包的大小。因此*sendto()*会阻塞，直到发送套接字缓冲区已满（前一个数据包未发送到网络接口缓冲区）。但似乎它不起作用，只是因为它只适用于套接字缓冲区而不是网络接口缓冲区。

我也对 Linux 的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-27T15:07:57.530

我遇到了一个类似的问题，即使 send() 没有返回错误，UDP send() 也从未真正连接到网络上。

原来问题是 ARP 从来没有得到本地链路主机的响应，所以数据包在内部被丢弃了。

简单的答案是；如果您可以 PING 目标地址，您的 UDP 数据包几乎肯定会进入网络。如果 PING 显示“主机无法访问”，则不会。如果您只是用 tcpdump 或 wireshark 嗅探 UDP 数据包，您可能会认为您的设备有问题，因为，嘿，您的 UDP 数据包从未发送过！

因此，还可以嗅探 ARP 响应，或者您甚至可以通过编程方式检查 ARP 缓存以查找目标地址（如果是本地）或网关（如果不是）的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:19:21.680

阅读上面 Mat 的评论。通常使用 UDP，您必须假设数据在您调用 send() 方法后立即发送。无法确定数据是否实际发送和/或接收。

编辑：我的意思是没有办法确定数据已到达预期目的地。您可以检查数据是否正在发送，甚至可以在一定程度上跟踪它的路线。但是没有办法确保数据已收到，即使您的预期收件人可以访问，这并不意味着他们正在收听......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:20:23.853

> 我需要一种方法来确定在 Sendto() 之后是否将数据发送到线路，以了解客户端实际发送了多少时间。它存在吗？

至于`sendto()`成功传输的数据包是否发送到客户端，这可能比您需要做的工作更多。

为确保客户端仅在特定时间段内发送，您需要在服务器的数据包中包含剩余的传输时间。客户端还应该估计通过网络到达服务器所需的时间。使用这两个数字来估计客户端传输的剩余时间。

# iphone - GL_CLAMP_TO_EDGE 应该在 NPOT 纹理中使用

> ID：10649719
> 
> 赞同：6
> 
> 时间：2012-05-18T09:05:15.880
> 
> 标签：iphone, cocos2d-iphone, opengl-es-2.0

我有两张图片：

1.  PNG (sRGB) 64x64（从网络下载）
2.  PNG (sRGB)，从 fla 移植到 png，然后，从 png 到 jpg 与 sRGB，然后到 PNG (sRGB)。

我正在尝试用从这张图片创建的纹理填充多边形：

```
CCTexture2D *texture = [[CCTextureCache sharedTextureCache] addImage:spriteName];

    polygon = [[[PhisicsFilledPoligon alloc] initWithPoints:points
                         andTexture:texture] autorelease]; 
```

PhysicsFilledPolygon 是 box2d 的一种 PhysicsSprite，但覆盖了“draw”方法：

```
-(void) draw 
{
    ccGLBindTexture2D( [self.texture name] );

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position | kCCVertexAttribFlag_TexCoords );

    [prog use];
    [prog setUniformForModelViewProjectionMatrix];

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, sizeof(CGPoint), areaTrianglePoints);
    glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, sizeof(CGPoint), textureCoordinates);

    glDrawArrays(GL_TRIANGLES, 0, areaTrianglePointCount);
} 
```

当我尝试使用第一张图像作为纹理时，一切正常。但由于我使用的是第二个，应用程序崩溃并出现错误：

```
*** Assertion failure in -[CCTexture2D setTexParameters:], /Users/SentineL/Documents/squirrels ios/squirrels/libs/cocos2d/CCTexture2D.m:743
2012-05-18 14:42:26.603 squirrels[21436:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'GL_CLAMP_TO_EDGE should be used in NPOT textures' 
```

无论我尝试使用什么图像，结果都是相同的错误。Cocos2d 版本是 2.0 rc0。这是开始 cocos2d 的信息：

```
2012-05-18 14:42:25.038 squirrels[21436:707] cocos2d: OS version: 5.1 (0x05010000)
2012-05-18 14:42:25.041 squirrels[21436:707] cocos2d: GL_VENDOR:   Imagination Technologies
2012-05-18 14:42:25.042 squirrels[21436:707] cocos2d: GL_RENDERER: PowerVR SGX 543
2012-05-18 14:42:25.044 squirrels[21436:707] cocos2d: GL_VERSION:  OpenGL ES 2.0 IMGSGX543-63.24
2012-05-18 14:42:25.047 squirrels[21436:707] cocos2d: GL_MAX_TEXTURE_SIZE: 4096
2012-05-18 14:42:25.048 squirrels[21436:707] cocos2d: GL_MAX_TEXTURE_UNITS: 8
2012-05-18 14:42:25.049 squirrels[21436:707] cocos2d: GL_MAX_SAMPLES: 4
2012-05-18 14:42:25.051 squirrels[21436:707] cocos2d: GL supports PVRTC: YES
2012-05-18 14:42:25.053 squirrels[21436:707] cocos2d: GL supports BGRA8888 textures: YES
2012-05-18 14:42:25.054 squirrels[21436:707] cocos2d: GL supports NPOT textures: YES
2012-05-18 14:42:25.056 squirrels[21436:707] cocos2d: GL supports discard_framebuffer: YES
2012-05-18 14:42:25.057 squirrels[21436:707] cocos2d: compiled with Profiling Support: NO

2012-05-18 14:42:25.059 squirrels[21436:707] cocos2d: **** WARNING **** CC_ENABLE_GL_STATE_CACHE is disabled. To improve performance, enable it by editing ccConfig.h

2012-05-18 14:42:25.061 squirrels[21436:707] cocos2d: cocos2d v2.0.0-rc0
2012-05-18 14:42:25.063 squirrels[21436:707] cocos2d: Using Director Type:CCDirectorDisplayLink
2012-05-18 14:42:25:201 squirrels[21436:707] Retina Display Not supported
2012-05-18 14:42:25.214 squirrels[21436:707] cocos2d: animation started with frame interval: 60.00
2012-05-18 14:42:25.234 squirrels[21436:707] cocos2d: surface size: 1024x768 
```

我的问题在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T11:23:00.710

您正在使用具有非二维幂的纹理。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T15:21:40.297

我认为问题在于：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT); 
```

GL_REPEAT 不是用于 NPOT 纹理的核心 OpenGL ES 2.0 规范的一部分，只有 GL_CLAMP_TO_EDGE 是，因此不支持 GL_REPEAT。

您基本上需要设置 GL_CLAMP_TO_EDGE 而不是 GL_REPEAT，或者使用 POT 纹理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T18:39:04.190

将 GL_REPEAT 切换为 GL_CLAMP_TO_EDGE 会消除错误并在我的项目中再次构建，但我失去了重复效果。升级到 Cocos2d 2.x 后我必须这样做。最好的选择，只需将图像尺寸设为 2 的幂...（2、4、8、16、32、64、128、256、512、1024、2048）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T08:25:24.730

神奇的词是：CCConfiguration.m：//在第 122 行附近

```
supportsNPOT_ = NO; // before it said YES 
```

# assembly - 读取 I/O 端口有副作用吗？那么在程序化 I/O 中呢？

> ID：10649720
> 
> 赞同：1
> 
> 时间：2012-05-18T09:05:16.617
> 
> 标签：assembly, x86, port, cpu, ata

读取 CPU 端口（通过`in`/`out`指令）是否有任何副作用？

例如：

1.  它是否“告诉”设备该端口已被读取？

2.  不小心读取任意端口会造成任何伤害吗？

我假设它不应该，但是有些东西对我来说没有意义：

如果没有副作用，那么 ATA 驱动器如何在进行编程 I/O 时“知道”何时读取了一个字，以便提供下一个数据字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:08:16.957

是的，读取端口可能会产生副作用，但它是否会（如果是的话，它们是什么）因设备而异。

我从未听说过读取端口可能会损坏设备。一些（*但*大部分是旧的）可能会因写入不正确的值而损坏/造成损坏，但我不知道读取可能会造成损坏。在大多数情况下，阅读的副作用相当轻微。

阅读行为可以告诉设备它正在被阅读。要从设备读取，您需要在总线上放置一个命令和一个地址。如果命令是“读取”并且地址对应于设备，则设备正在被读取。

# c# - 在 WPF 的屏幕上查看 PrintDocument？

> ID：10649722
> 
> 赞同：1
> 
> 时间：2012-05-18T09:05:23.637
> 
> 标签：c#, wpf, printing, preview

我创建了一个用于打印的自定义 PrintDocument 类。我处理 PrintPage 事件并使用 Graphics 对象将内容输出到文档。

如何在我的 WPF 应用程序中在屏幕上显示此文档的“预览”？可能吗？

我试图将 PrintDocument 绑定到 DocumentViewer，但没有得到任何输出。WPF 中没有可视化的 PrintPreview 组件？

# php - 异步：1\. 发布 URL 和 2\. 图片下载（从给定的 URL）

> ID：10649737
> 
> 赞同：-2
> 
> 时间：2012-05-18T09:06:28.453
> 
> 标签：php, javascript, jquery, codeigniter, asynchronous

我想知道如何异步下载图像。

**使用：** Codeigniter，JQuery。

**背景：** 我们有一个网站，用户可以在其中发布 URL。给定一个 URL，我们将： - 获取并 prase HTML 以提取 img url（使用 simple_html_dom） - 在我们的服务器（curl）中下载这些图像（如果有）。- 发布用户完成的帖子。- 将用户重定向到发布的帖子。

**问题：** 下载图像可能需要一段时间，我们不想在那里阻止用户。

**需要：** 有任何方法可以发布线程并允许用户在我们异步下载图像时正常导航，因为我们不需要图像出现在帖子中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:10:24.873

在您的 PHP 脚本中，`ignore_user_abort`

```
ignore_user_abort(TRUE);

// just to be safe, override the default php timeout so the script doesn't timeout for long operations
ini_set('max_execution_time', 600);

// download images 
```

[http://php.net/ignore_user_abort](http://php.net/ignore_user_abort)

# java - Java 小程序中的 PDF 查看器

> ID：10649738
> 
> 赞同：0
> 
> 时间：2012-05-18T09:06:38.593
> 
> 标签：java, applet, pdf-viewer

嗨，我的公司需要一个 PDF 查看器，但不需要 Acrobat 阅读器或其他独立程序，它应该在 Java 小程序中，我们的要求是查看 PDF 文件不要复制或粘贴，文件的位置也不应该显示明确地说，是任何可用的开放软件库或工具，我用谷歌搜索，但找不到任何符合我要求的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:09:06.337

在小程序中查看 PDF 很痛苦。

尝试[http://www.jpedal.org/support_tutApplet.php](http://www.jpedal.org/support_tutApplet.php)或[http://www.snowbound.com/products/document-viewer/applet-demo](http://www.snowbound.com/products/document-viewer/applet-demo)以获得一些解决方案。

如果你自己做一些研究，你可能会在这里做得更好。

# mysql - SELECT 语句中的 MySQL 存储过程变量

> ID：10649748
> 
> 赞同：15
> 
> 时间：2012-05-18T09:07:48.623
> 
> 标签：mysql, stored-procedures

我正在尝试创建一个存储过程。这是我到目前为止所拥有的（不工作）：

```
DELIMITER |
CREATE PROCEDURE getNearestCities(IN cityID INT)
    BEGIN
        DECLARE cityLat FLOAT;
        DECLARE cityLng FLOAT;
        SET cityLat = SELECT cities.lat FROM cities WHERE cities.id = cityID;
        SET cityLng = SELECT cities.lng FROM cities WHERE cities.id = cityID;
        SELECT *, HAVERSINE(cityLat,cityLng, cities.lat, cities.lng) AS dist FROM cities ORDER BY dist LIMIT 10;
    END | 
```

HAVERSINE 是我创建的一个可以正常工作的函数。如您所见，我正在尝试从城市表中获取城市的 id，然后将 cityLat 和 cityLng 设置为该记录的其他一些值。我显然在这里使用 SELECT 做错了。

这甚至可能吗。似乎应该如此。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-18T09:47:38.390

更正了一些事情并添加了替代选择 - 酌情删除。

```
DELIMITER |

CREATE PROCEDURE getNearestCities
(
IN p_cityID INT -- should this be int unsigned ?
)
BEGIN

DECLARE cityLat FLOAT; -- should these be decimals ?
DECLARE cityLng FLOAT;

    -- method 1
    SELECT lat,lng into cityLat, cityLng FROM cities WHERE cities.cityID = p_cityID;

    SELECT 
     b.*, 
     HAVERSINE(cityLat,cityLng, b.lat, b.lng) AS dist 
    FROM 
     cities b 
    ORDER BY 
     dist 
    LIMIT 10;

    -- method 2
    SELECT   
      b.*, 
      HAVERSINE(a.lat, a.lng, b.lat, b.lng) AS dist
    FROM     
      cities AS a
    JOIN cities AS b on a.cityID = p_cityID
    ORDER BY 
      dist
    LIMIT 10;

END |

delimiter ; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-18T09:12:59.073

您只需将`SELECT`语句括在括号中以表明它们是子查询：

```
SET cityLat = (SELECT cities.lat FROM cities WHERE cities.id = cityID); 
```

或者，您可以使用 MySQL 的[`SELECT ... INTO`](https://dev.mysql.com/doc/en/select-into.html)语法。这种方法的一个优点是两者`cityLat`和`cityLng`都可以从单个表访问中分配：

```
SELECT lat, lng INTO cityLat, cityLng FROM cities WHERE id = cityID; 
```

但是，整个过程可以替换为单个自连接`SELECT`语句：

```
SELECT   b.*, HAVERSINE(a.lat, a.lng, b.lat, b.lng) AS dist
FROM     cities AS a, cities AS b
WHERE    a.id = cityID
ORDER BY dist
LIMIT    10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-12T09:19:48.567

我正面临一种奇怪的行为。

SELECT INTO 和 SET 两者都适用于某些变量而不适用于其他变量。事件语法相同

```
SET @Invoice_UserId :=  (SELECT UserId FROM invoice WHERE InvoiceId = @Invoice_Id  LIMIT 1); -- Working
                SET @myamount := (SELECT amount FROM invoice WHERE InvoiceId = @Invoice_Id LIMIT 1); - Not working
SELECT  Amount INTO @myamount FROM invoice WHERE InvoiceId = 29  LIMIT 1; - Not working 
```

如果我直接运行这些查询然后可以工作，但不能在存储过程中工作。

# java - 如何将手机连接到笔记本电脑？

> ID：10649749
> 
> 赞同：0
> 
> 时间：2012-05-18T09:07:51.267
> 
> 标签：java, android, tcpclient

我想通过 WiFi 使用我的智能手机连接到我的笔记本电脑和其他智能手机。我写了一个应用程序（android），但只能找到wifi网络，没有设备。有谁知道如何找到智能手机和笔记本电脑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:16:47.147

根据您的问题，我认为您的智能手机是基于 Android 的。我还假设，当您说“找不到设备”时，您的意思是您的笔记本电脑创建的 WLAN 网络。

我似乎记得在 Android 文档的某处读过 Android 设备无法连接到（甚至检测到）ad-hoc 无线网络。Ad-hoc 网络通常是由非专用网络设备（例如 Windows 计算机）托管的网络。

您可以使用一些实用软件来使用您的计算机创建基础设施类型的无线网络（与 ad-hoc 相对）。除此之外，您几乎只能使用由网络路由器托管的实际基础设施无线网络，并通过它连接所需的设备，这基本上是通常的 (W)LAN 使用场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:22:32.930

好问题！WiFi 与蓝牙和其他一些协议不同，它不允许您发现网络中的其他设备。要在 WiFi 网络上查找其他设备，您需要在 TCP 堆栈的更高层中运行应用程序。然后，您可以向所有设备发送 TCP 或 UDP 数据包，如果您收到回复，您几乎可以确定其他设备在网络中。这是一个非常脆弱的过程，许多障碍（例如防火墙）可能会阻止发现过程。这就是为什么您需要等待 Windows 发现网络打印机或网络计算机的原因。

要在 Java/Android（或任何其他平台）中实现这样的事情，最简单的方法是编写一个运行后台线程并监听[广播消息](http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html)的应用程序。当你想开始一个发现过程（在发现者端）时，你发送一个广播消息并等待回复。在另一端（discover-ee 端），如果您收到广播消息，您只需使用所需信息（例如，设备名称）回复该消息。收到回复消息后（在发现器上），您可以轻松找出网络中的其他设备。

或者，您可以使用 TCP 套接字进行探测。在这种情况下，由于不支持广播消息，您需要尝试连接到网络中每个可能的 IP 地址（通常，这至少是 255 个 IP 地址），这会使过程变得更慢。

[这](http://developer.android.com/reference/java/net/DatagramSocket.html#setBroadcast%28boolean%29)可能会有所帮助。

# java - 如何从原始 JAR 中查找开源 JAR 中的更改

> ID：10649750
> 
> 赞同：0
> 
> 时间：2012-05-18T09:07:51.707
> 
> 标签：java, open-source, jar

我的应用程序正在使用大约 30-40 个罐子。由于该应用程序很旧，并且许多人在我之前就已经在使用它，因此我想弄清楚是否对它们进行了任何自定义。

目前我正在尝试从可用版本中找到所有 jar，然后下载它们。然后我打算对它们进行差异合并以找出差异。

我认为应该有另一种方法。请告诉。有些可以通过查看 JAR 名称或清单文件找到。但其他人呢？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:25:29.097

您可以计算哈希码，例如 MD5。如果两个 jar 具有相同的 MD5 哈希码，则内容很可能也是相同的。

否则，如果您有良好的测试覆盖率，您可以尝试尝试错误的方法：

*   Mavenize 你的项目
*   运行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:15:19.963

我能想到的获得一组依赖项的最简单方法是创建一个新的 Maven 项目并将所需的每个 jar 添加到项目 pom 文件中。

Maven，如果您不知道，它是一个专注于简化依赖管理的 Java 构建工具。它通过一个 pom.xml 文件来实现，该文件列出了有关您的项目的信息，包括它所需的 jars（依赖项）列表。依赖项由其名称 (artifactId)、组和版本标识，采用以下 XML 格式...

```
<dependency>
  <groupId>group-a</groupId>
  <artifactId>artifact-b</artifactId>
  <version>1.0</version>
</dependency> 
```

您可以创建一个新的 mvn 项目（首先下载并安装 maven）然后执行：

```
mvn archetype:generate 
```

创建一个新项目。这将为您提供一个没有依赖项的空项目和一个模板 pom.xml 文件。从那里您可以编辑您的依赖项列表并添加您需要的 40 个 jar 中的每一个。一旦你完成了那个执行......

```
mvn dependency:copy-dependencies 
```

这会将您需要的所有 jar 文件从 Maven 在线中央存储库拉到项目的目标/依赖文件夹中。从那里您可以编写一个脚本来执行您的 jar 文件的 md5sum 比较。

[在官方主页](http://maven.apache.org/)上了解更多关于 Maven 的信息。

# android - 为什么触摸 ListView 时我的 CheckBox 的背景颜色会发生变化？

> ID：10649751
> 
> 赞同：1
> 
> 时间：2012-05-18T09:07:54.587
> 
> 标签：android, checkbox, android-listview, background-color

我有一个习惯`ListView`，每个`row.xml`看起来像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="bottom"
android:orientation="horizontal" >

<CheckBox
    android:id="@+id/star_listed"
    style="?android:attr/starStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:contentDescription="@string/question_img_cd"
    android:focusable="false"/>

<TextView
    android:id="@+id/listTitles"
    style="@style/ListTitles" /> 
```

一切正常，除了当我按下 上的任意位置时`ListView`，背景`CheckBox`变为黑色（而不是保持白色）。`TextView`在我将其背景颜色设置为白色之前，它也发生在我身上。

![行.xml](../Images/5c89bc5823ec5688d84a0018d5a93570.png)

如果我将“复选框”背景更改为白色，甚至是透明的，它就会消失。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:27:37.280

我不确定，但可能会发生这种情况，因为您使用了`?android:attr/starStyle`具有透明背景（我不确定）的 star() 的默认样式属性，并且您看到了底层的黑色行颜色。尝试为行中的父级设置白色，`LinearLayout`而不是为行中的每个设置颜色`View`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:16:44.823

您可以在项目资源的样式 xml 文件上以透明方式设置背景复选框（或）设置列表视图背景颜色！

欢迎！

# java - OSGi 如何解决将捆绑定义的类转换为 rt.jar 定义的类的任务？

> ID：10649756
> 
> 赞同：1
> 
> 时间：2012-05-18T09:08:16.340
> 
> 标签：java, osgi, concept

OSGi 如何解决问题¹将使用 OSGi 自定义类加载器从捆绑包中加载的类转换为从 rt.jar 加载的类？rt.jar 是否也加载了自定义类加载器，而不是系统类加载器？

**UPD1**

由于 ClassLoader.java 中的以下代码，我似乎无法使用自定义类加载器加载 rt.jar 的大部分部分：

```
private ProtectionDomain preDefineClass(String name, ProtectionDomain protectionDomain) {
    ...
    if ((name != null) && name.startsWith("java.")) {
        throw new SecurityException("Prohibited package name: " +
        name.substring(0, name.lastIndexOf('.')));
    }
    ...
} 
```

[1] 问题如下：使用不同类加载器加载的类被 jvm 视为完全不同的类，即使它们的字节码完全相同，因此，例如，当我们有类`rt.jar!/SomeClass`并在其中派生它时`bundle.jar!/SomeClassChild`，我们如果它们是由不同的类加载器加载的，则无法`SomeClassChild`转换为。`SomeClass`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:16:20.103

Java中没有这样的问题。当然不像问题中所说的那样。确实，由不同类加载器加载的同名类永远不会被视为同一个类，但由此并不意味着超类必须由同一个类加载器作为子类加载。

实际上，由于所有 java.* 类，包括 Object，都来自引导类加载器，并且应用程序中没有用户类由引导类加载器加载，所以在 OSGi 出现之前，甚至不可能将任何东西转换为 Object .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T07:31:01.660

*   java.* 类是特殊的...... Java 规范要求所有以“java”开头的类。出于安全原因从引导类路径加载。
*   来自 rt.jar 的其他类（以及包）由框架本身导出。所有框架都有一组默认值，但有一些属性允许您扩展这些默认值（org.osgi.framework.system.packages[.extra]）。框架将从加载框架的类加载器或基于启动属性的引导类加载器加载这些包中的类。

神奇之处在于，OSGi 框架将所有这些包连接在一个类加载器网格中，以确保每个包都看到一个没有冲突的一致类空间，即使多个类加载器可以加载相同的类名。因此，在具有适当元数据且没有类加载技巧的 OSGi 中，类转换异常不会发生。

如果两个包绑定到相同包名的不同类加载器，那么 OSGi 框架会确保这些包不能互相看到，因为它们驻留在不同的类空间中。

# android - 类别和子类别 Android

> ID：10649762
> 
> 赞同：0
> 
> 时间：2012-05-18T09:08:21.807
> 
> 标签：android

我有一个应用程序，我想根据数据库显示类别和子类别、子子类别等。

我想要以图形模式显示它，以便用户可以在类别之间导航以轻松查看里面的文章。

¿ 任何人都知道我可以使用哪个控件布局来显示类别？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:14:02.040

您正在寻找具有“n”级的自定义可扩展 ListView。基本上[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)有两个级别。一个是父组，另一个是子组。单击您的父组可以查看您的子组。但是由于您正在寻找子子类别，因此您必须修改适配器以适合您。这是一个很好的例子，可以帮助您实现它。

[http://mylifewithandroid.blogspot.in/2011/02/3-level-expandable-lists.html](http://mylifewithandroid.blogspot.in/2011/02/3-level-expandable-lists.html)

[http://code.google.com/p/tree-view-list-android/](http://code.google.com/p/tree-view-list-android/)

# javascript - JavaScript 对象没有被销毁？

> ID：10649763
> 
> 赞同：2
> 
> 时间：2012-05-18T09:08:36.380
> 
> 标签：javascript, jquery, html, garbage-collection

我是 JavaScript 的初学者，但我最近遇到了一个问题，我可以用一个小例子重现：

```
function TimerTest(panelId)
{
    this.PanelID = panelId;
}

TimerTest.prototype.Start = function()
{
    var self = this;

    $(document.getElementById(this.PanelID)).everyTime("1s", "Test", function(){
        self.Print();
    });
}

TimerTest.prototype.Print = function()
{
    $("#debug").append("<div>triggered...</div>");
}

function Remove()
{
    $("#main").empty();
    $("#main").html("I'm done!");
}

$(document).ready(function(){
    var timer = new TimerTest("timerpanel");
    timer.Start();
}); 
```

[在 JSFiddle 中运行](http://jsfiddle.net/XYcDn/4/)

调用 Remove() 后，该对象似乎仍然存在并打印“已触发...” :(

我使用 HTML5 的历史功能通过 AJAX 加载内容。我基本上遇到的是，我有一个带有标记的嵌入式谷歌地图和一个计时器，每隔一段时间就会更新这些标记。当离开该页面时，我仍然可以在 FireBug AJAX 调用中看到更新标记。这对我来说意味着即使它的面板从 DOM 中删除，对象也没有被破坏？JQuery 关于 empty() 的文档虽然说它删除了所有 DOM 元素及其数据。

我有点困惑。我知道在离开之前我可以在对象上调用“stopTime()”，但这不是我的问题。示例中的计时器就在那里，因此我实际上可以看到 TimerTest 对象仍然存在（即我的 Google 地图仍然存在！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:11:21.667

即使您`#main`要从 DOM 中删除该元素，`TimerTest`仍然会保留对它的引用。元素可以存在，但不能在 DOM 中（参见[`detach()`](http://api.jquery.com/detach)示例）。

对象仅在不存在对它的引用时才由垃圾收集器回收。

jQuery 的`empty()`方法将从 DOM 中删除元素，并将删除 jQuery 存储的有关*通过[`data()`](http://api.jquery.com/data)方法*添加的元素的所有数据，以及事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:05:43.840

~~试图运行你的小提琴，Chrome 抱怨 jquery.offput.ca，它称之为“已知分发恶意软件”的网站。如果我去看那个 jQuery 插件的演示，我会得到同样的警告。因此，我无法使用该实际代码。~~ *在您更新时，我可以使用您的实际代码，因此请参阅此答案的最后，以使用您的原始代码获得答案。不过，我将保留非计时器插件的答案。*

该*元素*可能会或可能不会保留在内存中，这完全取决于计时器插件的工作方式。不过，重要的是，无论元素是否在内存中，都不会停止*计时器*。你需要代码来做到这一点。

我从未使用过该计时器插件，但大概它有一些方法可以告诉计时器停止，可能是通过您对已附加计时器的元素的 jQuery 包装器进行的调用。因此，在您的`Remove`函数中，您需要一种方法来识别带有计时器的元素，以便您可以停止它们。

这是一个*不*使用计时器插件的示例，以演示这些概念。以下是我的做法：

1.  当我创建`setInterval`计时器时，我记得一个名为`data-timer-handle`. 您可能需要也可能不需要，但您需要在元素上放置某种标记，以便告诉计时器插件停止。

2.  在`Remove`中，在清除之前`#main`，我找到它具有属性的任何子项`data-timer-handle`并清除间隔计时器。

[现场复制](http://jsbin.com/uwiyef)| [来源](http://jsbin.com/uwiyef/edit)：

HTML：

```
<div id="main">
    <div id="timerpanel">I'm the timer panel</div>
</div>
<input type="button" id="removeButton" value="Remove It">
<div id="debug"></div> 
```

JavaScript：

```
function TimerTest(panelId)
{
    this.PanelID = panelId;
}

TimerTest.prototype.Start = function()
{
    var self = this;

    // Start the timer
    var handle = setInterval(function() {
        self.Print();
    }, 1000);

    // Remember the handle on a data-timer-handle property
    // on the element.
    $(document.getElementById(this.PanelID)).attr("data-timer-handle", handle);
}

TimerTest.prototype.Print = function()
{
    $("#debug").append("<div>triggered...</div>");
}

function Remove()
{
    var main = $("#main");
    // Find any elements with timers on them, stop them
    main.find("[data-timer-handle]").each(function() {
        clearInterval($(this).attr("data-timer-handle"));
    });
    main.html("I'm done!");
}

$(document).ready(function(){
    var timer = new TimerTest("timerpanel");
    timer.Start();
    $("#removeButton").click(function() {
        Remove();
    });
}); 
```

如果我正在编写一个将计时器附加到元素的计时器插件，我肯定会在元素中添加一些东西（`data-*`属性、类等），以便您再次找到它们。但是，我还提供了一个选项，用于在元素从 DOM 中删除时自动取消计时器（这样您就不需要查找和停止它们），方法是让每个计时器滴答声检查元素是否仍然存在随附的。（默认情况下我可能不会启用它，但它会是一个选项。）

* * *

在下面回复您的评论：

> 不过，我对您的代码有疑问：它确实停止了计时器，但是我怎么知道它实际上破坏了`TimerTest`-object？计时器只是我说的一种方式。AFAIK 计时器本身没有对`TimerTest`-object 的引用，那么为什么该对象仍然存在？您可以通过修改 Print() 来打印“this.PanelID”`

啊，但是计时器*确实*保留了对`TimerTest`实例的引用：您传递给计时器的函数是一个*闭包*。它引用了创建它的范围内的所有内容，包括`self`引用该对象的变量`TimerTest`（当然，否则`self.Print()`将不起作用）。因此，只要该函数存在，它就会将`TimerTest`实例保存在内存中。

那么是什么将这个函数保存在内存中呢？计时器对它的引用。只要计时器还活着，它就有一个对该函数的引用，并将该函数保存在内存中。在我上面的示例中，`clearInterval`删除了对函数的引用，使其符合垃圾回收的条件；这意味着该函数不再将它关闭的东西保存在内存中。如果该函数是唯一对实例具有突出引用的事物`TimerTest`，则意味着该`TimerTest`实例有资格进行垃圾回收。

在我的代码中，没有任何东西将*元素*保留在内存中（您正在使用的计时器插件可能不是这样），但是`TimerTest`只要浏览器的`setInterval`东西正在使用该函数，该函数就会使该实例保持活动状态。

更多探索：

*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

现在你的小提琴没有链接到那个（也许）狡猾的网站：

我惊讶地发现，计时器插件似乎并没有在元素中添加任何东西，以便再次轻松找到。没关系，这对我们来说是微不足道的。

更改`Start`以标记元素 - 这里我使用了一个类：

```
TimerTest.prototype.Start = function()
{
    var self = this;

    $("#" + this.PanelID)
        .addClass("hastimer")
        .everyTime("1s", "Test", function(){
            self.Print();
    });
}; 
```

（我还使用 jQuery 来查找元素，而不是`document.getElementById`。并且您希望在函数表达式的末尾使用分号。）

并更改`Remove`为在该类的所有元素上停止计时器：

```
function Remove()
{
    var main = $("#main");
    main.find(".hastimer").stopTime();
    main.html("I'm done!");
} 
```

`empty`（在调用之前无需调用`html`；`html`调用`empty`。）

[更新的小提琴](http://jsfiddle.net/XYcDn/5/)

# sql-server-2008 - 如何找到根节点

> ID：10649764
> 
> 赞同：4
> 
> 时间：2012-05-18T09:08:37.680
> 
> 标签：sql-server-2008

```
id  Parant_ID       sort_nm    Scheme_Name
5   5               CAMPA      CAMPA
6   5               NPV        Net Present Value
7   5               CA         Compensatory Afforestation
8   6               ACA        Additional Compensatory  Afforestation
43  8               asd        asdasd
45  45              new        new
46  45              asdaasdas  asdasdasdas 
```

我在 SQL Server 中有上述树结构。
我想知道每个节点的根节点 ID。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T09:18:32.707

您可以使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)。从根开始，通过递归携带RootID。

```
with C as
(
  select id,
         Parant_ID,
         sort_nm,
         Scheme_Name,
         id as RootID
  from YourTable
  where id = Parant_ID
  union all
  select T.id,
         T.Parant_ID,
         T.sort_nm,
         T.Scheme_Name,
         C.RootID
  from YourTable as T
    inner join C
      on T.Parant_ID = C.id
  where T.id <> T.Parant_ID
)
select *
from C 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/70562/find-the-rootid)

# ruby-on-rails - 使用自制软件安装了 elasticsearch，但找不到配置文件

> ID：10649766
> 
> 赞同：36
> 
> 时间：2012-05-18T09:08:42.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, path, elasticsearch, homebrew

我使用自制软件安装了 elasticsearch，我想对其进行一些配置，但我找不到它安装到的文件夹。我正在寻找配置文件作为状态[here](http://www.elasticsearch.org/guide/reference/setup/configuration.html)。使用 rails 3.1.1 谢谢！

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-18T14:02:53.447

只需键入`brew info elasticsearch`，它就会打印出所有的路径。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-09-20T21:07:57.163

虽然@karmi 的回答让您获得了大部分成功，但您实际上需要查看通过自制软件安装时链接的 .plist 并遵循（LaunchAgent 说明）

```
more ~/Library/LaunchAgents/homebrew.mxcl.elasticsearch.plist 
```

将产生一些包含重要行的输出：

```
es.config=/usr/local/Cellar/elasticsearch/0.20.5/config/elasticsearch.yml 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-22T09:43:20.573

在我的 macOS 上，它位于此处：

```
/usr/local/etc/elasticsearch/elasticsearch.yml 
```

在 Windows 上它应该在这里：

```
C:\ProgramData\Elastic\Elasticsearch\config\elasticsearch.yml 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-27T13:56:04.303

在最新版本 (5.6.3) 中，它位于 /usr/local/Cellar/elasticsearch/5.6.3/libexec/config/ealasticsearch.yml

# python - gql 内部交易

> ID：10649767
> 
> 赞同：1
> 
> 时间：2012-05-18T09:09:03.500
> 
> 标签：python, google-app-engine

Google 应用引擎返回“BadRequestError：事务中只允许祖先查询”。这在代码上下文中意味着什么：

```
class Counter(db.Model):
        totalRegistrations = db.IntegerProperty(default=0)   

@db.transactional
def countUsers():
    counter = Counter.all().get()
    counter.totalRegistrations = counter.totalRegistrations + 1
    counter.put()
    i = counter.totalRegistrations
    return i

print countUsers() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T01:10:50.563

它只是意味着您运行的查询`Counter.all().get()`不是祖先查询。在这种情况下，您应该从事务方法中获取获取计数器的查询，如下所示：

```
@db.transactional
def incrementUsers(counterKey):
    counter = Counter.get(counterKey)
    counter.totalRegistrations = counter.totalRegistrations + 1
    counter.put()
    return counter.totalRegistrations

counterKey = Counter.all(keys_only=True).get()

print incrementUsers(counterKey) 
```

这意味着您首先获得对 Counter 的引用，但仅在事务方法中获取并放入值，从而保证原子性。

# file-upload - Railwayjs csrf - 如何正确处理

> ID：10649769
> 
> 赞同：2
> 
> 时间：2012-05-18T09:09:08.547
> 
> 标签：file-upload, csrf, railway.js

我正在使用 railjs，我正在尝试上传文件。我正在使用 iframe 来启用独立的 ajax 上传。（禁用多部分解析器，并计划直接使用强大）

我正在从 application_layout 的元标记中复制 csrf_token，并将其作为隐藏输入字段附加到文件上传表单中。这是在上传每个文件时在前端动态使用 jquery 完成的。

但是，服务器说“不正确的真实性令牌”。我想检查我与服务器持有的副本一起发送的令牌。这是在堆栈中的哪个位置完成的。

作为最后的手段，我该如何禁用它，它甚至是可取的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:45:26.333

嗯，它很旧，但你只需要添加`<%- csrf_tag() %>`到你的表单:)

# windows-phone-7 - 为前景创建转换器

> ID：10649773
> 
> 赞同：1
> 
> 时间：2012-05-18T09:09:19.947
> 
> 标签：windows-phone-7, silverlight-4.0

我创建了一个转换器来将前景绑定到一个特殊值并更改它，但它始终将 val 设为 null：

```
public class PositionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        //string vall;
        //TextBlock txt= TextBlock.TextProperty(

        var val = value as TextBlock;
        if (val != null)
        {
            if (val.Text.StartsWith("-"))
            {
                return new SolidColorBrush(Colors.Red);

            }
            else
            {
                return new SolidColorBrush(Colors.Green);
            }
        }
        return new SolidColorBrush(Colors.Red);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
           <TextBlock FontSize="28"  x:Name="solde" TextWrapping="Wrap"  >
           <Run Text="        Solde : " Foreground="Black"/>
           <Run Text="{Binding amount}" Foreground="{Binding amount, Converter=               {StaticResource PositionConverter}}" Language="fr-FR"/>
             </TextBlock> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:15:50.033

`value`是绑定中涉及的值（在您的情况下：数量），而不是控件。因此，将其转换为 TextBlock 将永远不会起作用。

你可以试试这个：

```
public class PositionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {          
        if (value == null)
        {
            return new SolidColorBrush(Colors.Red);
        }

        if (value.ToString().StartsWith("-"))
        {
            return new SolidColorBrush(Colors.Red);                   
        }

        return new SolidColorBrush(Colors.Green);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# magento - 在家中展示超过 9 种产品

> ID：10649774
> 
> 赞同：2
> 
> 时间：2012-05-18T09:09:20.603
> 
> 标签：magento, product

我补充说，

```
{{block type="catalog/product_list" template="catalog/product/home.phtml" category_id="16" column_count="5" }} 
```

到我在主页 css 页面中的内容。我的类别 ID 为 16，包含 10 个产品。但是，主页上仅显示 9 个产品（即使类别 16 包含 12 个或更多产品）。

你可以[在这里查看](http://fachbuecher7-24.de/)。

如何展示**超过 9 个产品**？我想要每行 10、5 个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:24:36.757

这看起来像使用主列表模板，因此您需要更改管理区域中的设置。转到`System-> Configuration->Catalog->Frontend`并更改每页数量选项和默认值。

> 网格上每页的产品允许值 网格上每页
> 的产品默认值

# java - Java：无法将给定的对象格式化为日期

> ID：10649782
> 
> 赞同：64
> 
> 时间：2012-05-18T09:09:47.203
> 
> 标签：java

我有这种格式的日期（2012-11-17T00：00：00.000-05：00）。我需要将日期转换为这种格式 mm/yyyy。

我试过这种方式，但我得到了这个异常。

```
Exception in thread "main" java.lang.IllegalArgumentException: Cannot format given Object as a Date
    at java.text.DateFormat.format(Unknown Source)
    at java.text.Format.format(Unknown Source)
    at DateParser.main(DateParser.java:14) 
```

请在下面查看我的代码：

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class DateParser {    
  public static void main(String args[]) {   
    String MonthYear = null;    
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("mm/yyyy");    
    String dateformat = "2012-11-17T00:00:00.000-05:00";
    MonthYear = simpleDateFormat.format(dateformat);    
    System.out.println(MonthYear);    
  }    
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-05-18T09:13:33.773

`DateFormat.format`仅适用于`Date`价值观。

您应该使用两个 SimpleDateFormat 对象：一个用于解析，一个用于格式化。例如：

```
// Note, MM is months, not mm
DateFormat outputFormat = new SimpleDateFormat("MM/yyyy", Locale.US);
DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSX", Locale.US);

String inputText = "2012-11-17T00:00:00.000-05:00";
Date date = inputFormat.parse(inputText);
String outputText = outputFormat.format(date); 
```

编辑：请注意，您可能很想在格式中指定时区和/或语言环境，并且您*还*应该考虑使用[Joda Time](http://joda-time.sf.net)而不是所有这些开始 - 这是一个更好的日期/时间 API。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-19T12:27:33.190

## java.time

我想贡献现代答案。这个`SimpleDateFormat`类是出了名的麻烦，虽然在六年半前被问到这个问题时，用它来解决问题是合理的，但今天我们在 java.time，现代 Java 日期和时间 API 中有了更好的解决方案。`SimpleDateFormat`和它的朋友`Date`现在被认为已经过时了，所以不要再使用它们了。

```
 DateTimeFormatter monthFormatter = DateTimeFormatter.ofPattern("MM/uuuu");
    String dateformat = "2012-11-17T00:00:00.000-05:00";
    OffsetDateTime dateTime = OffsetDateTime.parse(dateformat);
    String monthYear = dateTime.format(monthFormatter);
    System.out.println(monthYear); 
```

输出：

> 11/2012

我正在利用这样一个事实，即您的字符串采用国际标准 ISO 8601 格式，并且 java.time 的类将此格式解析为默认格式，即没有任何显式格式化程序。其他答案所说的仍然是正确的，您需要先解析原始字符串，然后将生成的日期时间对象格式化为新字符串。通常这需要两个格式化程序，只有在这种情况下我们很幸运，并且可以只使用一个格式化程序。

## 你的代码出了什么问题

*   正如其他人所说，`SimpleDateFormat.format`不能接受`String`参数，当参数类型声明为时也是如此`Object`。
*   由于您没有发现异常：您的格式模式字符串中还有一个错误，`mm/yyyy`. 小写`mm`os 表示小时的分钟。您需要大写`MM`月份。
*   `m`最后，Java 命名约定说在变量名中使用小写第一个字母，因此使用小写`monthYear`（也因为 java.time 包含一个`MonthYear`带有大写的类`M`，以避免混淆）。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用`java.time`.
*   [维基百科文章：ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T09:10:51.393

你有一个`DateFormat`，但你需要两个：一个用于输入，另一个用于输出。

你有一个输出，但我没有看到任何与你的输入相匹配的东西。当您将输入字符串提供给输出格式时，您看到该异常也就不足为奇了。

```
DateFormat inputDateFormat = new SimpleDateFormat("yyyy-MM-ddhh:mm:ss.SSS-Z"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-18T09:14:34.580

`SimpleDateFormat.format(...)`将日期作为参数并将日期格式设置为字符串。所以你需要仔细看看API

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T09:15:23.007

我已经解决了，这样

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

public class DateParser {

    public static void main(String args[]) throws Exception {

        DateParser dateParser = new DateParser();

        String str = dateParser.getparsedDate("2012-11-17T00:00:00.000-05:00");
        System.out.println(str);
    }

    private String getparsedDate(String date) throws Exception {
        DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS", Locale.US);
        String s1 = date;
        String s2 = null;
        Date d;
        try {
            d = sdf.parse(s1);
            s2 = (new SimpleDateFormat("MM/yyyy")).format(d);

        } catch (ParseException e) {

            e.printStackTrace();
        }

        return s2;

    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-12T08:51:17.127

```
public static String showDate(){
    SimpleDateFormat df=new SimpleDateFormat("\nTime：yyyy-MM-dd HH:mm:ss");
    System.out.println(df.format(new Date()));
    String s=df.format(new Date());
    return s;
} 
```

我认为这段代码可以解决你的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-02T08:15:18.813

这对我有用：

```
String dat="02/08/2017";
long date=new SimpleDateFormat("dd/MM/yyyy").parse(dat,newParsePosition(0)).getTime();
java.sql.Date dbDate=new java.sql.Date(date);
System.out.println(dbDate); 
```

# ssis - SSIS DB2 和分布式事务

> ID：10649785
> 
> 赞同：1
> 
> 时间：2012-05-18T09:09:58.327
> 
> 标签：ssis, db2, msdtc, distributed-transactions

我正在使用 Microsoft OLEDB Provider for DB2 连接到 DB2 数据库。我有一个序列容器，里面有两个执行 SQL 任务。当我将容器事务选项设置为“必需”时，我收到错误-“错误描述：无法获取连接。连接可能未正确配置，或者您可能对此连接没有正确的权限”我已在中设置 MSDTC 属性服务器到网络 DTC 访问，允许远程客户端，允许入站和允许出站，以及不需要身份验证，但我仍然收到相同的错误。

**更新：** 我也在运行包的本地机器上完成了相同的 DTC 设置。仍然存在相同的错误。我创建了在 SQL 表上实现事务的示例包，这工作正常。我需要为 DB2 数据库做任何额外的设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:14:15.230

> 我已将服务器中的 MSDTC 属性设置为网络 DTC 访问

您需要在运行包的计算机上启用 MSDTC。他是负责协调 SSIS 事务的人，而不是数据库服务器

# android - 带有图标的 ActionBar 微调器（如 Google 地图），我该如何实现？

> ID：10649786
> 
> 赞同：2
> 
> 时间：2012-05-18T09:10:00.977
> 
> 标签：android, navigation, icons, spinner, android-actionbar

除了令人惊叹的 ActionBerSherlock 库之外，我目前正在尝试在我的应用程序中添加一个微调器导航菜单（如谷歌地图）

注意：我也一直在考虑 SPotify/Evernote/Facebook 模式，但这在 Android 上似乎不合适：http: [//alexanderblom.se/2012/04/23/android-navigation-and-spotify/](http://alexanderblom.se/2012/04/23/android-navigation-and-spotify/)

![在此处输入图像描述](../Images/5ccc7e983e621877d8494291dfabe836.png)

我已经研究过微调器（[http://developer.android.com/design/building-blocks/spinners.html](http://developer.android.com/design/building-blocks/spinners.html)），但添加图标似乎并不容易

非常感谢此菜单上的任何链接或帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:49:32.723

首先，您需要为您的微调器创建一个 CustomArrayAdapter。它应该同时处理一个字符串数组和一个 Drawable 数组。在你的情况下，也许是第二个数组来做一个小总结。

然后，您需要一个项目的布局，其中 ImageView 用于图标，TextView 用于文本（也许还有一个用于摘要）。覆盖 getView() 和 getDropDownView() 以使用提交的资源填充布局（createFromResource() 可能是一种研究方法）。

对于导航，您需要做的就是在 onCreate() 中使用资源数组创建 CustomArrayAdapter，调用 MyActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST) 并通过 MyActionBar.setListNavigationCallbacks(list, this) 使用 CustomArrayAdapter 提供导航.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:39:28.977

有人会假设有人会使用 Android`Adapter`模式，该适配器包含一个列表，排序（可能是一个`ArrayList`？），您想要显示的项目（在这种情况下，一个图标、一个标题字符串和一个字幕字符串） .

看看扩展某种`SpinnerAdapter`; 大概你还需要为每个包含图标和两个`TextView`s 的项目创建一个布局。

# android - 相机中的android如何在api 14或更高版本中设置可聚焦区域

> ID：10649788
> 
> 赞同：3
> 
> 时间：2012-05-18T09:10:04.280
> 
> 标签：android, camera, android-camera

我试图在**“Camera.getParameters()”**中添加可聚焦区域，但不反映在相机表面视图中。

我的代码是这样的

```
Camera.Area area = new Area(new Rect(-500, -500, 500,500), 0);\\put 0 or max 1000 weight but not any changes.
ArrayList<Area> listArea = new ArrayList<Camera.Area>();
listArea.add(area);
parameters.setFocusAreas(areas);
camera.setParameters(parameters); 
```

代码中有任何问题，或者如果这是应用可聚焦的错误样式，请帮助我..如何在相机视图微距模式下聚焦特定区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T19:07:52.697

确保您已将焦点模式设置为以下之一：

> 只有当前对焦模式为 FOCUS_MODE_AUTO、FOCUS_MODE_MACRO、FOCUS_MODE_CONTINUOUS_VIDEO 或 FOCUS_MODE_CONTINUOUS_PICTURE 时，对焦区域才有效。

来自[http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getFocusAreas()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getFocusAreas())

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T15:36:12.380

您是否尝试过先调用 getFocusareas() ？首先检查 getFocusareas() 是否返回非零值，然后尝试调用 setfocusareas()

# google-apps-script - validateOptions 得到错误

> ID：10649793
> 
> 赞同：0
> 
> 时间：2012-05-18T09:10:42.127
> 
> 标签：google-apps-script

validateOptions 客户端处理程序选项不起作用。它总是给出一个错误。这种方法有问题吗？

```
function doGet() {
  var mc = new Array();
  mc[0]='h';
  mc[1]='ho';
  mc[2]='hou';
  mc[3]='hous';
  mc[4]='house';
  var app = UiApp.createApplication();
  var rech = app.createTextBox();
  var result = app.createLabel('Match').setVisible(false);
  var ch = app.createClientHandler().validateOptions(rech, mc).forTargets(result).setVisible(true);
  rech.addKeyUpHandler(ch);
  app.add(rech);
  app.add(result);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:39:19.157

它肯定有问题。我也总是可以重现这个问题，而且你的代码看起来很好。您应该打开关于 Apps Script [issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list)的报告。

顺便说一句，作为一种解决方法，直到他们解决它。您可以随时使用该`validateMatch`方法代替`validateOptions`，这对于不了解正则表达式的人来说更加困难。这是使用您的代码段的示例：

```
var ch = app.createClientHandler().validateMatches(rech, '^h(o(u(se?)?)?)?$').forTargets(result).setVisible(true); 
```

# shell - 如何从 shell 脚本执行 sql 查询

> ID：10649794
> 
> 赞同：2
> 
> 时间：2012-05-18T09:10:44.560
> 
> 标签：shell, postgresql-9.1

我正在编写一个 shell 脚本来在 postgres 中运行一堆查询。

这是我写的脚本。

```
#!/bin/sh
host="172.16.7.102"
username="priyank"
dbname="truaxis"
x=1
echo "Connection done"
while [ $x -le 3 ]
do
        x=$(($x + 1 ))
        echo "Connection $x"
        psql -h $host $dbname $username << EOF
        select * from students where sid = $x;
        EOF
done 
```

这个脚本有两个问题。

1.  pgtest1.sh：17：语法错误：文件结尾意外（预期“完成”）

2.  如何在 sql 中动态传递 $x

我想每次迭代创建新的数据库连接。

我对 postgre 和 shell 都很陌生。

谢谢

普里扬克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:14:28.540

> 1) pgtest1.sh: 17: 语法错误：文件结尾意外（期待“完成”）

您需要单独在自己的行中有 EOF（没有空格等）

```
 psql -h $host $dbname $username << EOF
        select * from students where sid = $x;
EOF 
```

> 2）如何在sql中动态传递$x

```
$ sh scriptname.sh value_of_x 
```

然后在你的脚本中

```
x=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:23:15.017

`EOF`您指定的方式不能缩进。您需要执行以下操作（请注意here-doc 标记*之前的破折号：*

```
while [ $x -le 3 ] ; do
    psql foo bar <<-EOQ
        select * from students where sid = $x;
    EOQ
done 
```

作为旁注，为什么不使用`for`循环而不是`while`？

```
for (( x=$1 ; x<=3 ; x++ )) ; do
    foo
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T07:20:02.867

我做了同样的事情，除了我的情况是 mysql 。我正在使用zsh。我设置了一个别名，这样当我调用脚本时，shell 就不会做任何 globbing，这样我就可以做到这一点：

```
$ sql select * from Table 
```

代替：

```
$ sql select '*' from Table 
```

别名是：

```
alias sql='noglob sql' 
```

我还`sed`习惯在必要时自动添加引用，以便我可以这样做：

```
$ sql select * from Client where first_name like John% and last_name = Wiley 
```

代替：

```
$ sql select '*' from Client where first_name like "'John%'" and last_name = "'Wiley'" 
```

在我不希望 shell 脚本自动添加引号的情况下，我会省略 = 运算符前后的空格，如下所示：

```
$ sql select t1.col1,t2.col2 from Table1 t1 join Table t2 on t1.client_id=t2.client_id. 
```

我将脚本粘贴在这里，以防您从中获利。它是 zsh 和 mysql 特定的。您必须修改它以适应您传递要在 psql 中运行的 sql 命令的方式。脚本中使用的`mpager`程序是另一个 shell 脚本，它调用 vim 并要求它充当适合浏览表格输出的寻呼机：

```
#!/usr/bin/zsh

function usage() {
  echo -n "Usage: $0 [-h] [-t] [-d db] [-q] [-v] [-n] [p] [-q] [sql commands]
   -d db   Use specified database instead of the default one
   -t      Do not 'tabularize' (borders) the output
   -v      Be verbose
   -n      Dry-run - show what command to be executed
   -p      Pipe output to mpager
   -q      Surpress own output, only show output from mysql
   -h      Show this help message
"
}

password=${DB_PASS:-secret}
db=${DB:-default_db}
user=${DB_USER:-username}

USE_TABLE='--table'
while getopts d:tvnhpq o
do
  case "$o" in
    d)  db=$OPTARG ;;
    t)  USE_TABLE='' ;;
    v)  verbose=1 ;;
    n)  dry_run='echo' ;;
    p)  use_mpager=t ;;
    h)  usage; exit 0 ;;
    q)  quiet=1;;
    *)  usage;
        exit 1 ;;
  esac
done
shift `expr $OPTIND - 1`

case $2 in
    database|databases)
    db=
    ;;
esac
if [ -z "$quiet" -a -n "$db" ]; then
    echo 1>&2 "Database: $db"
fi

if [ $# -lt 1 ]; then
  mysql --table -u $user -p$password $db "$@"
  exit
fi

to_run=`echo $*|sed -e "s/ \(=\|like\) *\([^'][^ ]*\+\)/ \1 '\2'/g"`

# This helps for debugging. Show what is going to run when output is going to a
# terminal:
if [ -t 1 ]; then
    echo "to_run: $to_run" 1>&2
fi

if [ -n "$verbose" ]; then
    echo "mysql $USE_TABLE -u $user -p$password $db -e ${(q)to_run}"
fi
if [ -n "$use_mpager" ]; then
    $dry_run mysql $USE_TABLE -u $user -p$password $db -e "$to_run" | mpager
else
    $dry_run mysql $USE_TABLE -u $user -p$password $db -e "$to_run"
fi 
```

# html - NMS FormMail.pl“错误：错误或缺少收件人”

> ID：10649795
> 
> 赞同：0
> 
> 时间：2012-05-18T09:10:45.830
> 
> 标签：html, perl, cgi, formmail

我正在尝试使用 NMS FormMail.pl 为我的网站设置一个简单的表单邮件脚本。无论我做什么，它都会给我一个错误说：

> **错误：错误或缺少收件人**
> 
> 发送到 FormMail 的数据中没有指定收件人或指定的收件人无效。请确保您已使用在@recipients 或@allow_mail_to 中配置的电子邮件地址填写收件人表单字段。有关填写收件人/allow_mail_to 表单字段和变量的更多信息可以在 README 文件中找到。

问题是，我无数次确保表单上的收件人字段与脚本的@allow_mail_to 部分中的收件人字段*完全相同。*我尝试获取最新版本的脚本，将电子邮件地址从表单复制粘贴到脚本，反之亦然，将 \'s 放在 @ 和 . 在电子邮件中取出它们，甚至取出表单上的收件人字段（当我这样做时，尽管自述文件说它只会发送给@allow_mail_to字段中的第一个人，但它仍然给我错误。

以下是我为脚本以及表单标签所做的配置：

```
 BEGIN
{
  $DEBUGGING         = 1;
  $emulate_matts_code= 0;
  $secure            = 1;
  $allow_empty_ref   = 1;
  $max_recipients    = 1;
  $mailprog          = '/usr/sbin/sendmail -oi -t';
  $postmaster        = '';
  @referers          = qw(--.com);
  @allow_mail_to     = qw(steven@--.com --.com localhost);
  @recipients        = ();
  %recipient_alias   = ();
  @valid_ENV         = qw(REMOTE_HOST REMOTE_ADDR REMOTE_USER HTTP_USER_AGENT);
  $locale            = '';
  $charset           = 'iso-8859-1';
  $date_fmt          = '%A, %B %d, %Y at %H:%M:%S';
  $style             = '/css/nms.css';
  $no_content        = 0;
  $double_spacing    = 1;
  $wrap_text         = 0;
  $wrap_style        = 1;
  $address_style     = 1;
  $send_confirmation_mail = 0;
  $confirmation_text = <<'END_OF_CONFIRMATION';
From: you@your.com
Subject: form submission

Thank you for your form submission.

END_OF_CONFIRMATION

# You may need to uncomment the line below and adjust the path.
# use lib './lib';

# USER CUSTOMISATION SECTION
# --------------------------
# Place any custom code here

# USER CUSTOMISATION << END >>
# ----------------------------
# (no user serviceable parts beyond here)
} 
```

收件人表单字段：

```
<input name="recipient" type="hidden" id="recipient" value="steven@--.com"> 
```

如果有帮助，我使用 Dreamweaver CS6 创建站点，包括表单。我用记事本修改了FormMail.pl。运行它的服务器是 Apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:55:52.143

我最终使用了同一个人的 TFmail.pl 而不是 FormMail.pl，结果工作得很好。

# xml - 组合同级 XML 标记

> ID：10649798
> 
> 赞同：0
> 
> 时间：2012-05-18T09:10:55.620
> 
> 标签：xml, xslt

我有如下的源 XML：

```
<ROOT>
    <RECORD>
        <Tag1>Tag1 Value</Tag1>
        <Tag2>
            <TagA1>TagA1 Value</TagA1>
            <TagA2>TagA2 Value</TagA2>
            <TagA3>TagA3 Value</TagA3>
        </Tag2>
        <Tag1>Tag1 Value</Tag1>
    </RECORD>
<RECORD>
        <Tag1>Tag1 Value</Tag1>
        <Tag2>
            <TagA1>TagA1 Value</TagA1>
            <TagA2>TagA2 Value</TagA2>
        </Tag2>
        <Tag1>Tag1 Value</Tag1>
</RECORD>
</ROOT> 
```

我需要像下面这样::

```
<ROOT>
    <RECORD>
        <Tag1>Tag1 Value</Tag1>
        <Tag2>TagA1 Value | TagA2 Value | TagA3 Value</Tag2>
        <Tag1>Tag1 Value</Tag1>
    </RECORD>
<RECORD>
        <Tag1>Tag1 Value</Tag1>
        <Tag2>TagA1 Value | TagA2 Value</Tag2>
        <Tag1>Tag1 Value</Tag1>
</RECORD>
</ROOT> 
```

我必须将原始 XML 转换为这种形式，我们如何使用 XSLT 来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:46:58.507

我认为您可以通过使用模板来匹配 RECORD 元素的“孙子”节点并简单地输出值来实现这一点。例如

```
<xsl:template match="RECORD/*/*">
   <xsl:value-of select="." />
</xsl:template> 
```

但是，您需要为第一个节点和后续节点提供单独的案例，以处理 | 他们之间的性格。试试这个 XSLT 作为替代方案

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="RECORD/*/*[1]">
      <xsl:value-of select="." />
   </xsl:template>

   <xsl:template match="RECORD/*/*[position() > 1]">
      <xsl:value-of select="concat(' | ', .)" />
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:43:10.670

这是生成所需输出的一种可能性：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">     
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>      

  <xsl:template match="RECORD/*[*]">
    <xsl:copy>
      <xsl:for-each select="*">
        <xsl:value-of select="."/>
        <xsl:if test="position() != last()"> | </xsl:if>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T23:57:17.227

另一种变体（使用已经提出的想法，但我认为是最简单的方法并且不使用`<xsl:for-each>`）：

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity Template: copies everything as-is -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- For all grandchildren of <RECORD> elements, concat them, using -->
  <!-- a pipe as a delimiter (as long as we're not on the last element) -->
  <xsl:template match="RECORD/*/*">
    <xsl:value-of select="." />
    <xsl:if test="position() != last()">
        <xsl:text> | </xsl:text>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

**输入 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<ROOT>
  <RECORD>
    <Tag1>Tag1 Value</Tag1>
    <Tag2>
      <TagA1>TagA1 Value</TagA1>
      <TagA2>TagA2 Value</TagA2>
      <TagA3>TagA3 Value</TagA3>
    </Tag2>
    <Tag1>Tag1 Value</Tag1>
  </RECORD>
  <RECORD>
    <Tag1>Tag1 Value</Tag1>
    <Tag2>
      <TagA1>TagA1 Value</TagA1>
      <TagA2>TagA2 Value</TagA2>
    </Tag2>
    <Tag1>Tag1 Value</Tag1>
  </RECORD>
</ROOT> 
```

**输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<ROOT>
  <RECORD>
    <Tag1>Tag1 Value</Tag1>
    <Tag2>TagA1 Value | TagA2 Value | TagA3 Value</Tag2>
    <Tag1>Tag1 Value</Tag1>
  </RECORD>
  <RECORD>
    <Tag1>Tag1 Value</Tag1>
    <Tag2>TagA1 Value | TagA2 Value</Tag2>
    <Tag1>Tag1 Value</Tag1>
  </RECORD>
</ROOT> 
```

# javascript - Javascript 月份范围选择器

> ID：10649806
> 
> 赞同：6
> 
> 时间：2012-05-18T09:11:27.373
> 
> 标签：javascript

任何人都可以向我推荐一个具有最小和最大日期功能的好的 javascript 月份范围选择器。

我用谷歌搜索了它，但找不到一个好的。我已经看到了一个 JQuery UI 日期选择器修改。但是当我通过最大和最小日期时，它无法正常工作，并且显示错误的年份和月份。

下面是我尝试过的代码。

```
<script type="text/javascript">
$(document).ready(function() {  
    $( "#fromMonth, #toMonth" ).datepicker({    
            changeMonth: true,
            changeYear: true,
            showButtonPanel: false,
            dateFormat: 'M yy',
                            minDate:new Date(2010, 1 - 1, 1),
                maxDate:new Date(2012, 4 - 1, 1),   
            onClose: function(dateText, inst) { 
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
                $(this).datepicker('refresh');
            },
            beforeShow : function(input, inst) {
                if ((datestr = $(this).val()).length > 0) {
                    year = datestr.substring(datestr.length-4, datestr.length);
                    month = jQuery.inArray(datestr.substring(0, datestr.length-5), $(this).datepicker('option', 'monthNames'));
                    $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
                    $(this).datepicker('setDate', new Date(year, month, 1));    
                }
                var other = this.id == "fromMonth" ? "#toMonth" : "#fromMonth";
                var option = this.id == "fromMonth" ? "maxDate" : "minDate";        
                if ((selectedDate = $(other).val()).length > 0) {
                    year = selectedDate.substring(selectedDate.length-4, selectedDate.length);
                    month = jQuery.inArray(selectedDate.substring(0, selectedDate.length-5), $(this).datepicker('option', 'monthNames'));
                    $(this).datepicker( "option", option, new Date(year, month, 1));
                }
            }
        });
        $("#btnShow").click(function(){ 
        if ($("#fromMonth").val().length == 0 || $("#toMonth").val().length == 0){
            alert('All fields are required');
        }
        else{
            alert('Selected Month Range :'+ $("#from").val() + ' to ' + $("#to").val());
            }
        })

});

</script>
<style type="text/css">
.ui-datepicker-calendar {display: none;}
</style> 
```

谁能告诉我上面的代码有什么问题或提出一个好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-13T20:56:35.143

我建议[**DateRangePicker**](https://github.com/yairEO/dateRangePicker/tree/gh-pages)，一个轻量级的月份范围选择器，非常容易定制

## 用例

```
$('input').rangePicker({ minDate:[2,2009], maxDate:[10,2013] })
    // subscribe to the "done" event after a date was selected
    .on('datePicker.done', function(e, result){
        console.log(result);
    }); 
```

### 可用设置：

```
{
    RTL : false,
    closeOnSelect : true,
    presets : [{
            buttonText  : '1 month',
            displayText : 'one month',
            value       : '1m'
        },{
            buttonText  : '3 months',
            displayText : 'three months',
            value       : '3m'
        },{
            buttonText  : '6 months',
            displayText : 'six months',
            value       : '6m'
        },{
            buttonText  : '12 months',
            displayText : 'twelve months',
            value       : '12m'
    }],
    months  : ['jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec'],
    minDate : [5,2006],
    maxDate : [8,2013],
    setDate : null
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-14T09:46:55.073

我发现的新组件：[https ://codepen.io/nathanfiscus/pen/qELYjG](https://codepen.io/nathanfiscus/pen/qELYjG)

```
<div id="sla-data-range" class="mrp-container nav navbar-nav">
  <span class="mrp-icon"><i class="fa fa-calendar"></i></span>
  <div class="mrp-monthdisplay">
    <span class="mrp-lowerMonth">Jul 2014</span>
    <span class="mrp-to"> to </span>
    <span class="mrp-upperMonth">Aug 2014</span>
  </div>
<input type="hidden" value="201407" id="mrp-lowerDate" />
<input type="hidden" value="201408" id="mrp-upperDate" /> 
```

```
 var MONTHS = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

$(function () {
  startMonth = 7;
  startYear = 2014
  endMonth = 8;
  endYear = 2015;
  fiscalMonth = 7;
  if(startMonth < 10)
    startDate = parseInt("" + startYear + '0' + startMonth + "");
  else
    startDate = parseInt("" + startYear  + startMonth + "");
  if(endMonth < 10)
    endDate = parseInt("" + endYear + '0' + endMonth + "");
  else
    endDate = parseInt("" + endYear + endMonth + "");

  content = '<div class="row mpr-calendarholder">';
  calendarCount = endYear - startYear;
  if(calendarCount == 0)
    calendarCount++;
  var d = new Date();
  for(y = 0; y < 2; y++){
        content += '<div class="col-xs-6" ><div class="mpr-calendar row" id="mpr-calendar-' + (y+1) + '">'
                         + '<h5 class="col-xs-12"><i class="mpr-yeardown fa fa-chevron-circle-left"></i><span>' + (startYear + y).toString() + '</span><i class="mpr-yearup fa fa-chevron-circle-right"></i></h5><div class="mpr-monthsContainer"><div class="mpr-MonthsWrapper">';
    for(m=0; m < 12; m++){
      var monthval;
      if((m+1) < 10)
        monthval = "0" + (m+1);
      else
        monthval = "" + (m+1);
            content += '<span data-month="' + monthval  + '" class="col-xs-3 mpr-month">' + MONTHS[m] + '</span>';
    }
    content += '</div></div></div></div>';
  }
  content += '<div class="col-xs-1"> <h5 class="mpr-quickset">Quick Set</h5>';
  content += '<button class="btn btn-info mpr-fiscal-ytd">Fiscal YTD</button>';
  content += '<button class="btn btn-info mpr-ytd">YTD</button>';
  content += '<button class="btn btn-info mpr-prev-fiscal">Previous FY</button>';
  content += '<button class="btn btn-info mpr-prev-year">Previous Year</button>';
  content += '</div>';
  content += '</div>';

  $(document).on('click','.mpr-month',function(e){
    e.stopPropagation();
        $month = $(this);
        var monthnum = $month.data('month');
        var year = $month.parents('.mpr-calendar').children('h5').children('span').html();
        if($month.parents('#mpr-calendar-1').size() > 0){
          //Start Date
          startDate = parseInt("" + year + monthnum);
          if(startDate > endDate){

            if(year != parseInt(endDate/100))
              $('.mpr-calendar:last h5 span').html(year);
               endDate = startDate;
          }
        }else{
          //End Date
          endDate = parseInt("" + year + monthnum);
          if(startDate > endDate){
            if(year != parseInt(startDate/100))
              $('.mpr-calendar:first h5 span').html(year);
            startDate = endDate;
          }
        }

        paintMonths();
  });

  $(document).on('click','.mpr-yearup',function(e){
        e.stopPropagation();
        var year = parseInt($(this).prev().html());
        year++;
        $(this).prev().html(""+year);
        $(this).parents('.mpr-calendar').find('.mpr-MonthsWrapper').fadeOut(175,function(){
        paintMonths();
        $(this).parents('.mpr-calendar').find('.mpr-MonthsWrapper').fadeIn(175);
      });
  });

  $(document).on('click','.mpr-yeardown',function(e){
        e.stopPropagation();
        var year = parseInt($(this).next().html());
        year--;
        $(this).next().html(""+year);
        //paintMonths();
      $(this).parents('.mpr-calendar').find('.mpr-MonthsWrapper').fadeOut(175,function(){
        paintMonths();
        $(this).parents('.mpr-calendar').find('.mpr-MonthsWrapper').fadeIn(175);
      });
  });

  $(document).on('click','.mpr-ytd', function(e){
    e.stopPropagation();
    var d = new Date();
    startDate = parseInt(d.getFullYear() + "01");
    var month = d.getMonth() + 1;
    if(month < 9)
      month = "0" + month;
    endDate = parseInt("" + d.getFullYear() + month);
    $('.mpr-calendar').each(function(){
      var $cal = $(this);
      var year = $('h5 span',$cal).html(d.getFullYear());
    });
    $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeOut(175,function(){
        paintMonths();
        $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeIn(175);
    });
  });

  $(document).on('click','.mpr-prev-year', function(e){
    e.stopPropagation();
    var d = new Date();
    var year = d.getFullYear()-1;
    startDate = parseInt(year + "01");
    endDate = parseInt(year + "12");
    $('.mpr-calendar').each(function(){
      var $cal = $(this);
      $('h5 span',$cal).html(year);
    });
    $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeOut(175,function(){
        paintMonths();
        $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeIn(175);
    });
  });

  $(document).on('click','.mpr-fiscal-ytd', function(e){
    e.stopPropagation();
    var d = new Date();
    var year;
    if((d.getMonth()+1) < fiscalMonth)
      year = d.getFullYear() - 1;
    else
      year = d.getFullYear();
    if(fiscalMonth < 10)
      fm = "0" + fiscalMonth;
    else
      fm = fiscalMonth;
    if(d.getMonth()+1 < 10)
      cm = "0" + (d.getMonth()+1);
    else
      cm = (d.getMonth()+1);
    startDate = parseInt("" + year + fm);
    endDate = parseInt("" + d.getFullYear() + cm);
    $('.mpr-calendar').each(function(i){
      var $cal = $(this);
      if(i == 0)
        $('h5 span',$cal).html(year);
      else
        $('h5 span',$cal).html(d.getFullYear());
    });
    $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeOut(175,function(){
        paintMonths();
        $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeIn(175);
    });
  });

  $(document).on('click','.mpr-prev-fiscal', function(){
    var d = new Date();
    var year;
    if((d.getMonth()+1) < fiscalMonth)
      year = d.getFullYear() - 2;
    else
      year = d.getFullYear() - 1;
    if(fiscalMonth < 10)
      fm = "0" + fiscalMonth;
    else
      fm = fiscalMonth;
    if(fiscalMonth -1 < 10)
      efm = "0" + (fiscalMonth-1);
    else
      efm = (fiscalMonth-1);
    startDate = parseInt("" + year + fm);
    endDate = parseInt("" + (d.getFullYear() - 1) + efm);
    $('.mpr-calendar').each(function(i){
      var $cal = $(this);
      if(i == 0)
        $('h5 span',$cal).html(year);
      else
        $('h5 span',$cal).html(d.getFullYear()-1);
    });
    $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeOut(175,function(){
        paintMonths();
        $('.mpr-calendar').find('.mpr-MonthsWrapper').fadeIn(175);
    });
  });

  var mprVisible = false;
  var mprpopover = $('.mrp-container').popover({
    container: "body",
    placement: "bottom",
    html: true,
    content: content
  }).on('show.bs.popover', function () {
    $('.popover').remove();
    var waiter = setInterval(function(){
      if($('.popover').size() > 0){
        clearInterval(waiter);
        setViewToCurrentYears();
            paintMonths();
      }
    },50);
  }).on('shown.bs.popover', function(){
    mprVisible = true;
  }).on('hidden.bs.popover', function(){
    mprVisible = false;
  }); 

  $(document).on('click','.mpr-calendarholder',function(e){
    e.preventDefault();
    e.stopPropagation();
  });
  $(document).on("click",".mrp-container",function(e){
    if(mprVisible){
      e.preventDefault();
        e.stopPropagation();
      mprVisible = false;
    }
  });
  $(document).on("click",function(e){
    if(mprVisible){
        $('.mpr-calendarholder').parents('.popover').fadeOut(200,function(){
        $('.mpr-calendarholder').parents('.popover').remove();
        $('.mrp-container').trigger('click');
      });
      mprVisible = false;
    }
  });
});

function setViewToCurrentYears(){
    var startyear = parseInt(startDate / 100);
    var endyear = parseInt(endDate / 100);
    $('.mpr-calendar h5 span').eq(0).html(startyear);
    $('.mpr-calendar h5 span').eq(1).html(endyear);
}

function paintMonths(){
    $('.mpr-calendar').each(function(){
      var $cal = $(this);
      var year = $('h5 span',$cal).html();
      $('.mpr-month',$cal).each(function(i){
        if((i+1) > 9)
          cDate = parseInt("" + year + (i+1));
        else
          cDate = parseInt("" + year+ '0' + (i+1));
        if(cDate >= startDate && cDate <= endDate){
            $(this).addClass('mpr-selected');
        }else{
          $(this).removeClass('mpr-selected');
        }
      });
    });
  $('.mpr-calendar .mpr-month').css("background","");
    //Write Text
    var startyear = parseInt(startDate / 100);
    var startmonth = parseInt(safeRound((startDate / 100 - startyear)) * 100);
    var endyear = parseInt(endDate / 100);
    var endmonth = parseInt(safeRound((endDate / 100 - endyear)) * 100);
    $('.mrp-monthdisplay .mrp-lowerMonth').html(MONTHS[startmonth - 1] + " " + startyear);
    $('.mrp-monthdisplay .mrp-upperMonth').html(MONTHS[endmonth - 1] + " " + endyear);
    $('.mpr-lowerDate').val(startDate);
    $('.mpr-upperDate').val(endDate);
    if(startyear == parseInt($('.mpr-calendar:first h5 span').html()))
        $('.mpr-calendar:first .mpr-selected:first').css("background","#40667A");
    if(endyear == parseInt($('.mpr-calendar:last h5 span').html()))
      $('.mpr-calendar:last .mpr-selected:last').css("background","#40667A");
  }

  function safeRound(val){
    return Math.round(((val)+ 0.00001) * 100) / 100;
  } 
```

[![在此处输入图像描述](../Images/62fb18aae7b3478a67e7b51a576f28e2.png)](https://i.stack.imgur.com/8RFNC.png)

# android - 带有 Google API 的 Android 应用程序可以在模拟器上运行，但不能在手机上运行

> ID：10649810
> 
> 赞同：1
> 
> 时间：2012-05-18T09:11:41.497
> 
> 标签：android, google-maps, google-api

我有一个使用 Google API 的 Android 应用程序，在此地图上显示地图和一些标记。当我在模拟器上运行该应用程序时，该应用程序按预期运行，但在实际的 Andorid 手机上下载时它会崩溃。

手机在 Android 2.3.3 和 Google API 版本 15 上运行。我已将这一行放在 AndroidManifest.xml 文件中：

```
<uses-sdk android:minSdkVersion="7" /> 
```

我还使用发布密钥库签署了 Google API 密钥，并确保在签署应用程序时使用相同的密钥库。

如前所述，当在模拟器上运行时，应用程序运行良好，但是当应用程序启动时（安装后）我确实收到此错误：

```
MainActivity  couldn't get connection factory client 
```

然后有一堆这种类型的异常/警告：

```
System.err    IOExeption processing: 26
System.err    java.io.IOException: Server returned: 3 
```

我是 Android 编程的新手，所以我将不胜感激任何可以解决这个问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:25:40.503

首先检查是否在 AndroidManifest.xml 中设置了适当的权限。检查您是否提供了正确的谷歌地图密钥。创建密钥[http://www.pocketvnc.com/blog/?page_id=511](http://www.pocketvnc.com/blog/?page_id=511) 还尝试生成新的 MAP 密钥并使用它而不是使用旧的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T09:21:25.173

要在真实硬件上进行测试，您需要使用与调试密钥不同的密钥。在您的帖子之后，您正在使用调试密钥库。

[https://developers.google.com/maps/documentation/android-api/v1/?csw=1#getfingerprint](https://developers.google.com/maps/documentation/android-api/v1/?csw=1#getfingerprint)

在谷歌上阅读那段。

将应用程序导出为具有用于 google api 的相同密钥（而不是调试密钥）的签名应用程序很重要。

要创建有效的阅读该段落：

[http://developer.android.com/guide/publishing/app-signing.html#releasemode](http://developer.android.com/guide/publishing/app-signing.html#releasemode)

然后使用相同的密钥获取 google maps api 密钥。

获得应用程序的密钥后，您可以通过在项目上单击鼠标右键来导出签名的应用程序，选择 Android 工具，然后导出为签名的应用程序包并按照向导进行操作（可能您可以使用该密钥创建新密钥向导）。

希望有所帮助。

# eclipse - 更改 Eclipse 颜色主题时符号不会改变颜色

> ID：10649811
> 
> 赞同：13
> 
> 时间：2012-05-18T09:11:43.983
> 
> 标签：eclipse, groovy, eclipse-plugin, syntax-highlighting

我正在使用 Eclipse 颜色主题插件。
当我更改主题时，所有颜色都会更改，除了`()[].={}`.etc。
它们保持黑色，因为我正在尝试使用使事情变得困难的黑暗主题。

有人遇到同样的问题，或者知道解决方法吗？

编辑：

问题是使用 Groovy 时没有正确设置语法着色。
[这解决了它](http://mydigitalbricks.blogspot.co.uk/2011/12/changing-syntax-highlighting-for.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T08:13:26.580

问题是使用 Groovy 时没有正确设置语法着色。
[这解决了它](http://mydigitalbricks.blogspot.co.uk/2011/12/changing-syntax-highlighting-for.html)

> 窗口->首选项->Groovy->编辑器。在此设置页面中，您将找到需要更改的其余设置。将运算符、括号颜色设置为更明显的颜色（以及您可能希望的任何其他细微调整）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T07:07:02.243

您可以通过以下方式更改运算符/括号的颜色（默认为黑色）：Preferences -> Groovy -> Editor 在这里您可以手动设置颜色。

# android - 如何在 Android 上创建社交网络应用

> ID：10649813
> 
> 赞同：12
> 
> 时间：2012-05-18T09:11:51.557
> 
> 标签：android

我想为 Android 构建一个社交网络应用程序。但是，我不知道从哪里开始。我尝试在[http://developer.android.com](http://developer.android.com)和许多其他教程中进行搜索。但是，我不了解数据存储。例如，在 Web 开发（PHP）中，我们需要服务器和数据库（MySQL）。安卓应用怎么样？我需要了解开发Android社交网络应用程序的概念，例如存储用户的帖子、评论、上传的照片、谷歌地图数据等。我不想要代码，我在为 Android 开发社交网络应用程序时寻求想法和概念。

任何指向适合我的网站的链接将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T09:17:39.587

您可以使用文件存储（SD 卡）、首选项（用于设置等）或 SQLLIte 在 Android 手机上进行存储。但如果它是一个真正的*社交*应用程序，我怀疑你希望用户能够进行交互。因此，与 php 和 mysql 等效，您的用户可能使用他们的浏览器（在这种情况下是手机）来使用该应用程序，但他们使用您的服务器来存储数据（朋友、喜欢、转发、whathaveyous）。

所以你需要做的是

*   制作一个像“正常”一样存储数据的服务器。我建议使用 MySQL，因为您似乎知道它是如何工作的
*   制作一个 API 以将数据添加到该服务器。我建议在 PHP 中使用 RESTfull API，因为您似乎知道它是如何工作的
*   编写您的应用程序。每当您想进行交互（例如“喜欢”帖子）时，您都会通过 API 发送请求，并将您的操作保存到数据库中。
*   您的其他用户可以看到类似的情况，因为他们的手机通过 API 获取来自同一数据库的信息。

现在设置（应用程序检查新消息的次数）保存在首选项文件中（您可以在开发人员页面上找到），并且一些额外的东西可能保存在 sd 卡上（图像等）。

所以APP部分还是挺简单的，用手册搞清楚也没问题，SOCIAL部分就需要按照我上面说的来做。是的，这是一些工作，但是关于使用应用程序进行 php-mysql 交互的文章已经足够多了。

# git - 从远程仓库获取最后一个 git 标签，无需克隆

> ID：10649814
> 
> 赞同：66
> 
> 时间：2012-05-18T09:12:01.887
> 
> 标签：git, git-tag, git-describe

如何从（未签出）远程仓库中获取最后一个标签？

在我使用的本地副本上`describe`

```
git describe --abbrev=0 --tags 
```

但我不能`describe`与远程存储一起使用

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-03T08:38:20.407

## TL;博士

您可以从[`git ls-remote`](https://git-scm.com/docs/git-ls-remote)远程存储库中获取参考列表。

要查看最新版本是什么，请查看以下输出的最后一行：

```
git -c 'versionsort.suffix=-' ls-remote --tags --sort='v:refname' <repository> 
```

要*仅输出使用*[语义版本控制](http://semver.org/)的存储库的最新标记（例如在 shell 脚本中），请使用：

```
git -c 'versionsort.suffix=-' \
    ls-remote --exit-code --refs --sort='version:refname' --tags <repository> '*.*.*' \
    | tail --lines=1 \
    | cut --delimiter='/' --fields=3 
```

对于没有`--sort`标志的旧版本 Git（pre v2.18）或不支持的版本`versionsort.suffix`（pre v2.4），请使用：

```
git ls-remote --refs --tags <repository> \
    | cut --delimiter='/' --fields=3     \
    | tr '-' '~'                         \
    | sort --version-sort                \
    | tail --lines=1 
```

`sort`没有标志的旧版本`--version-sort`超出了这个问题的范围......

* * *

# 长版

## 仅标签

使用`--tags`确保列表仅包含标签引用。

这将包括引用和取消引用的标签。这意味着一些标签将`^{}`在 refname 的末尾。（有关此问题的更多信息，请参阅[StackOverflow 其他地方的这个问题](https://stackoverflow.com/questions/12938972/what-does-mean-in-git)。）

对于人类消费来说，这并不重要，但如果你不想看到那些`^{}`add `--refs`。

## 排序

可以使用 对引用列表进行排序`--sort`。

排序选项使用与 相同的排序键[`git for-each-ref`](https://git-scm.com/docs/git-for-each-ref#_field_names)。由于我们在本地没有所有信息，因此并非所有选项都可供我们使用（例如与日期相关的排序键）。

我们要使用*版本排序*，基于*引用名称*。为此，我们使用`version:refname`密钥。这也可以缩写为`v:refname`。

这将对版本进行升序排序，这意味着最新版本将排在*最后*。

要反转列表，请在排序键前面加上`-`: `--sort='-v:refname'`。

## 预发布排序

此时，**版本排序**会将候选版本（例如`v2.28.0-rc2`）放在他们应该在前面的稳定版本*之后。*

从 v2.12 开始，我们可以[使用一个配置标志，告诉 Git 在没有该字符后缀的引用](https://git-scm.com/docs/git-config#Documentation/git-config.txt-versionsortsuffix)*之后*对具有特定字符后缀的引用名进行排序：`git -c 'versionsort.suffix=-'`.

要始终这样使用`versionsort.suffix`，可以全局设置：

```
git config --global 'versionsort.suffix' '-' 
```

在 v2.4 和 v2.12 之间，该标志称为`versionsort.prereleaseSuffix`。

## 在旧版本的 Git 中排序

对于较旧的 Git 版本，可以使用一个技巧：破折号在空格*之前*`-`排序，但波浪号在空格*之后*排序。*`~`*

 **`-`因此，通过用波浪号替换破折号`~`，事情会以正确的顺序排序。这可以使用`tr '-' '~'`

## 仅一根线

由于我们并不真正关心所有输出，除了最后一行，我们只显示 tail: `tail --lines=1`。当然，如果列表按降序检索（使用`--sort='-v:refname'`），则为：`head --lines=1`。

## 只是 Refname

ls-remote 命令的输出还输出参考*哈希*：

```
ada126bd28d66c8c8ff5966a52d63ce2c9e4d031        refs/tags/v2.28.0-rc0 
```

为了只看到实际的标签（即参考名称），我们可以剪切该行的第一部分：`cut --delimiter='/' --fields=3`

## 参考过滤器

最后要注意的是，可以给 ls-remote 一个过滤器，以*仅*显示与过滤器模式匹配的引用。例如，对于语义版本控制，我们可以使用：`'*.*.*'`. 与该模式不匹配的任何内容都不会显示。

如果存储库始终在版本标记前加上`v`.，则可以进一步缩小到`'v*.*.*'`.

另一个示例是仅检索特定主版本的最新标签。例如，要仅查看 repo 版本 2 的标签，我们可以使用`'v2.*'`.

确保在过滤器周围使用引号，否则那颗星`*`会给您带来麻烦！

### 找不到参考

使用过滤器时，最好使用`--exit-code`标志。

这是因为 Git 将始终以状态码退出，`0`以表明它已成功与远程存储库通信。

对于人类消费来说，这很好，如果找到任何参考，您将在屏幕上看到。

但是，如果在 shell 脚本中使用此代码，则可能会出现问题。

`2`当在远程存储库中找不到匹配的引用时，可以告诉 Git 使用状态码。这是通过使用`--exit-code`标志来完成的。

这样脚本就会*知道什么*时候出了问题！

显然，如果不使用过滤器，那么使用`--exit-code`就没有任何意义。

## 是时候举个例子了！

假设我们想知道 Git 的最新标签是什么。

我们会这样做：

```
git ls-remote --sort='version:refname' --tags https://github.com/git/git.git 
```

这将返回一个包含所有标签的长列表，如下所示（为了理智而截断）。

```
 ...

4c8bcdda4d6e4757caf876ddc401b5392e874e21        refs/tags/v2.28.0
ada126bd28d66c8c8ff5966a52d63ce2c9e4d031        refs/tags/v2.28.0-rc0
bd42bbe1a46c0fe486fc33e82969275e27e4dc19        refs/tags/v2.28.0-rc0^{}
49bfe36405d1631a303992cac5cc408980a0454e        refs/tags/v2.28.0-rc1
3ddac3d691c3633cd4d9a74c07e3b2301f546f77        refs/tags/v2.28.0-rc1^{}
84a0d5cc2107b83a791aa4034cc54874e1d50668        refs/tags/v2.28.0-rc2
b066807397fd55553f4910ede74839e319b661fd        refs/tags/v2.28.0-rc2^{}
47ae905ffb98cc4d4fd90083da6bc8dab55d9ecc        refs/tags/v2.28.0^{} 
```

这告诉我们最新的标签是`v2.28.0`.

另一个例子是`versionsort.suffix`全局设置，然后只获取最后一个标签：

```
git config --global 'versionsort.suffix' '-'

git ls-remote --refs --sort=':refname' --tags https://github.com/git/git.git \
    | tail --lines=1 | cut --delimiter='/' --fields=3 
```

现在，让我们看看是否已经有版本 3 的 Git！

```
$ git ls-remote --exit-code --refs --tags https://github.com/git/git.git 'v3.*'
$ echo $?
2 # nope, not yet 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-08-09T07:38:13.227

由于 version`2.18` `git` [有](https://public-inbox.org/git/20180408122832.65414-4-haraldnordgren@gmail.com/)一个内置`--sort`选项，用于排序 ref 名称的确切目的。

所以最新的命令是

```
git ls-remote --tags --sort="v:refname" git://github.com/git/git.git | tail -n1 
```

要同时删除散列和取消引用标记 ( `^{}`)，只需输入一些简单的`sed`

```
git ls-remote --tags --sort="v:refname" git://github.com/git/git.git | tail -n1 | sed 's/.*\///; s/\^{}//' 
```

根据@Frederik Nord 的建议，您还可以使用`--refs`开关摆脱`^{}`，只留下一个`sed`命令（使 oneliner 4 个字符更短）：

```
git ls-remote --tags --refs --sort="v:refname" git://github.com/git/git.git | tail -n1 | sed 's/.*\///'

# output: v2.18.0 
```

对于`git`之前的版本，`2.18`这里是通过管道输出的组合`sort`

```
git ls-remote --tags git://github.com/git/git.git | sort -t '/' -k 3 -V | awk -F/ '{ print $3 }' | awk '!/\^\{\}/' | tail -n 1 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-10-09T14:18:54.247

不幸的是，`git ls-remote --tags`实际上是按字母顺序列出标签的（至少从 1.7.2.5 开始）。因此，在 1.7.10、1.7.11 或 1.7.12 是最新标签时，1.7.9 将是列表中的最后一个：

```
git ls-remote --tags git://github.com/git/git.git |grep "1\.7\."

[...]
bf68fe0313c833fa62755176f6e24988ef7cf80f        refs/tags/v1.7.9.6
cb2ed324fc917db0b79d7b1f3756575ffa5f70d5        refs/tags/v1.7.9.6^{}
3996bb24c84013ec9ce9fa0980ce61f9ef97be4d        refs/tags/v1.7.9.7
d0f1ea6003d97e63110fa7d50bb07f546a909b6e        refs/tags/v1.7.9.7^{} 
```

但是，我们可以通过 'sort' 管道这些结果，以更接近我们正在寻找的结果：

```
git ls-remote --tags git://github.com/git/git.git |grep "1\.7\."| sort -g -k3 -t.

[...]
eab05abaeb51531e11835aaa4c26564a1babebac        refs/tags/v1.7.9-rc2
eac2d83247ea0a265d923518c26873bb12c33778        refs/tags/v1.7.9-rc0^{}
f59f511e26b4924b22c6966e79fe4f754bc81dc6        refs/tags/v1.7.9.2
0e2d57fd50f61e668be3180bc8f25991ea88aa8c        refs/tags/v1.7.10-rc1^{}
121f71f0da1bc9a4e1e96be2c3e683191a82a354        refs/tags/v1.7.10.4^{}
26e5c5d09334d157bd04f794f16f6e338d50c752        refs/tags/v1.7.10.3^{}
[...]
cffb45719f60d6fc2cc98ead6af88a895c63c9ac        refs/tags/v1.7.12.4
d8cf053dacb4f78920c112d10c7be21e4f5a5817        refs/tags/v1.7.12.2^{}
dcd07fb6262fd8bb9f531890df3986a8b719a0b5        refs/tags/v1.7.12-rc0
e15c16de396a1e1f42001b03cb885ce64eb4098e        refs/tags/v1.7.12-rc2^{} 
```

虽然仍然不正确，但它更接近。如果我们排除 -rc 和 ^{}，并在最后一个子版本号上添加一个额外的排序，我们可能会足够接近大多数需求：

```
git ls-remote --tags git://github.com/git/git.git |grep "1\.7\."|grep -v -|grep -v {| sort -n -t. -k3 -k4

23ed9debf17263ed6bed478a4d6d86e71342c18a        refs/tags/v1.7.11.6
527b331100ddba839cc54bb31c1bcd66acc08321        refs/tags/v1.7.11.7
14d20a75e3d57a872a8c81ae90dcc4c61ddba011        refs/tags/v1.7.12
51993a414a76120fda20d56ba767fa513d9ff440        refs/tags/v1.7.12.1
04043f4d1ae42bddee67d354a2e6fd2464592a1e        refs/tags/v1.7.12.2
b38da673be332933b8f3a873ce46ffea08d2ee2c        refs/tags/v1.7.12.3
cffb45719f60d6fc2cc98ead6af88a895c63c9ac        refs/tags/v1.7.12.4 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-04T02:53:19.063

```
git ls-remote --tags "#{github_repo}" | awk '{print $2}' | grep -v '{}' | awk -F"/" '{print $3}' | sort -n -t. -k1,1 -k2,2 -k3,3 | tail -n 1.chomp 
```

这对我有用，[如何从 github 远程存储库获取最新标签](https://addhewarman.com/tag/how-to-get-latest-tag-from-github-remote/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-08T09:20:27.637

### TL;博士：

```
% git -c 'versionsort.suffix=-' ls-remote -t --exit-code --refs --sort=-v:refname \
    https://github.com/robert7/nixnote2 'v*' \
    | sed -En '1!q;s/^[[:xdigit:]]+[[:space:]]+refs\/tags\/(.+)/\1/gp'  
v2.1.0-beta4g 
```

### 解释

通过`--refs`以[`git ls-remote`](https://manned.org/git-ls-remote.1)摆脱`{}`其他答案中显示的参考：

```
$ git ls-remote -t --refs <URL> 
```

这给出了如下输出：

```
8f235769a2853c415f811b19cd5effc47cc89433        refs/tags/continuous
24e666ed73486a2ac65f09a1479e91e6ae4a1bbe        refs/tags/continuous-develop
7c2cff2c26c1c2ad4b4023a975cd2365751ec97d        refs/tags/v2.0
35b69eed46e5b163927c78497983355ff6a5dc6b        refs/tags/v2.0-beta10 
```

要仅获取标签名称，请通过：

`sed -E 's/^[[:xdigit:]]+[[:space:]]+refs\/tags\/(.+)/\1/g'`：

```
$ git ls-remote -t --exit-code --refs https://github.com/robert7/nixnote2.git \
  | sed -E 's/^[[:xdigit:]]+[[:space:]]+refs\/tags\/(.+)/\1/g'
continuous
continuous-develop
v2.0
v2.0-beta10 
```

然后，您可以通过适当的`grep`和/或`head -n1`（或添加到您的`sed`命令，如果您想保持您的 PID 数字低）。

建议：

*   在命令行末尾添加一个模式进行过滤。例如`'v*'`，如果所有版本标签都以`v`.
*   当没有返回匹配的引用时，传递`--exit-code`以确保不退出。`0`
*   使用`https://`版本：它更快，如果您正在打包，您不想冒被要求提供 ssh 密钥的风险。
*   `--sort=-v:refname`按版本而不是按字典排序，并在顶部有最大的版本
*   用于`git -c versionsort.suffix=-`防止`2.0-rc`出现“之后”`2.0`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-07-20T16:26:54.430

这是我的单线:-)

```
git ls-remote --tags --refs --sort="version:refname" git://github.com/git/git.git | awk -F/ 'END{print$NF}' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-15T08:52:10.067

对于**Git < 2.0** `ls-remote --sort`不支持：

> 用法：git ls-remote [--heads] [--tags] [-u | --upload-pack ] [-q|--quiet] [--exit-code] [--get-url] [ [...]]

要列出最新的标签，以及较旧的 Git 版本，请使用内置`sort`命令。

打印标签，按第二列的版本号（反转）排序：

```
git ls-remote --tags $my_repo | sort -Vr -k2 
```

> ...hash id... refs/tags/v0.10.0-rc0
> ...hash id... refs/tags/v0.9.0-rc0
> ...hash id... refs/tags/v0.9.0
> 。 ..hash id... refs/tags/v0.8.1
> ...hash id... refs/tags/v0.8.0-rc1

用于`grep`获取特定版本的最新标签（例如，最新的 0.8 版本）：

```
git ls-remote --tags $my_repo | sort -Vr -k2 | grep -Po -m 1 "tags/\K.*0.8.*" 
```

> v0.8.1**

# objective-c - 根据像素中的 NSString 大小设置 UILabel 长度：Objective C

> ID：10649823
> 
> 赞同：1
> 
> 时间：2012-05-18T09:12:39.793
> 
> 标签：objective-c, ipad, nsstring, uilabel

在我的 iPad 应用程序中，我展示`UILabel`了将从 Web 服务获取的文本滚动，并且需要将相同的文本大小设置为动态。我的问题是我必须`UILabel`根据要从 Web 服务获取的文本的长度来设置宽度。

[我](https://stackoverflow.com/questions/6422742/how-to-know-the-length-of-nsstring-that-fits-a-uilabel-with-fixed-size) [已经](https://stackoverflow.com/questions/1947970/dynamic-calculation-of-uilabel-width-in-uitableviewcell) [尝试](https://stackoverflow.com/questions/7174007/how-to-calculate-uilabel-height-dynamically) [了所有](https://discussions.apple.com/thread/2014858?start=0&tstart=0)或[大部分](http://www.iphonedevsdk.com/forum/iphone-sdk-development/38333-sizing-uilabel-according-string-length.html)可能的解决方案[，](http://www.iphonedevsdk.com/forum/iphone-sdk-development/64758-scaling-text-fit-view.html)但徒劳无功。

假设`NSString`我存储从服务器获取的字符串的位置是 300 个字符，它使用以下代码将 2270 显示为宽度。

```
CGFloat width =  [ScrollingLabel.text sizeWithFont:ScrollingLabel.font].width;

ScrollingLabel.frame = CGRectMake(1024,720,width,45); 
```

但是我也没有在应用程序中获得一半的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:47:06.963

我可以通过将宽度乘以代码得到的 2 来解决我的问题：

```
CGFloat width =  [ScrollingLabel.text sizeWithFont:ScrollingLabel.font].width;

ScrollingLabel.frame = CGRectMake(1024,720,width,45); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:43:12.057

实际上最好的方法是写一个 UILabel 的类别并添加方法：

```
- (CGFloat)expectedWidth
{
    CGSize size = [self.text sizeWithFont:self.font
                        constrainedToSize:CGSizeMake(FLT_MAX,self.bounds.size.height)
                            lineBreakMode:self.lineBreakMode];

     return size.width;
} 
```

# python - 寻找 i18ndude 的替代品或改进版

> ID：10649824
> 
> 赞同：4
> 
> 时间：2012-05-18T09:12:50.160
> 
> 标签：python, internationalization, plone, gettext, zope

我正在寻找 i18ndude 的改进版本（已签出 v3.2.2）或某种继任者。i18ndude 从 Python 代码（使用 pygettext）和 Zope 页面模板中提取可翻译的字符串，但它有些不尽如人意：

*   它隐藏了 pygettext 的命令行选项，因此无法在不修改代码的情况下指定关键字
*   它难以理解且难以扩展（例如，可能想以某种方式添加对 Javascript 文件的解析）
*   命令行语法很麻烦（例如“i18ndude merge --pot ... --merge ... --merge2 ...”）
*   一些文件没有被解析或以错误的方式解析，导致一些字符串未被找到（例如，每个名为“*pt”的文件都被认为是HTML，甚至是“*.xml.pt”）。
*   开发似乎已于 2010 年结束。

有东西就好了

*   具有更好的命令行界面，例如Subversion，支持“命令”和“帮助命令”
*   易于扩展
*   易于配置（例如使用哪个解析器解析哪种文件，或者如何判断文件的类型，例如考虑 svn:mime-type 属性）

由于命令行界面可能与 i18ndude 不兼容，我认为最好换一个。

现在有没有人写过这样的工具并愿意分享它，或者这是一项仍有待完成的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:46:55.583

你试过[巴别塔](http://babel.edgewall.org/)吗？它支持用于从各种来源提取消息的插件系统。

[lingua](https://github.com/tmassman/lingua)为 ZPT 和 zope.i18nmessageid 提供插件，为您提供 i18ndude 的所有功能，但具有相当活跃的开源社区。

要在项目中使用 babel，您需要将[setup.py 配置为使用 babel commands](http://babel.edgewall.org/wiki/Documentation/setup.html#method-mapping)，然后将这些功能作为 setup.py 命令运行；例如`python yourpackage/setup.py extract_messages`。

如果`lingua`egg 可以作为依赖项使用，那么你可以`message_extractors`在 setup.py 的结构中使用它的插件来告诉 Babel 如何从源文件中提取 i18n 消息：

```
... 
from babel.messages import frontend as babel
...

setup(...
    setup_requires=['lingua'],
    cmdclass = dict(
        compile_catalog=babel.compile_catalog,
        extract_messages=babel.extract_messages,
        init_catalog=babel.init_catalog,
        update_catalog=babel.update_catalog,
    ),
    message_extractors = {
        'path/in/package': [
            ('**.py',                'lingua_python', None),
            ('**/templates/**.pt',   'lingua_xml', None),
        ],
    },
    ...
) 
```

请注意，您不能将 Babel 作为 setup_requires 依赖项包含在内，因为 setup.py 脚本仅在它可以实际导入 babel 时才有效！您可以尝试通过为 cmdclass 条目创建垫片来解决此问题，但我自己还没有尝试过。现在，只需在你的 virtualenv 或全局安装 Babel egg。

如果您想使用`--mapping-file`CLI 选项而不是`message_extractors`条目，则该选项需要带有`[method fileglob]`标题的 INI 样式文件格式：

```
[lingua_python **.py]

[lingua_xml **/templates/**.pt] 
```

每个部分都可以包含要传递给提取器函数的选项（每一`option = value`行都成为传递给它的选项字典中的一个键值对），但我认为 lingua_* 方法没有任何选项。

然后将提取器配置用于您在命令行中提到的每个输入目录，或 setup.py`packages`选项中提到的每个包。

# c - 在 C 中确定数组大小

> ID：10649826
> 
> 赞同：0
> 
> 时间：2012-05-18T09:13:04.423
> 
> 标签：c, arrays

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

在我的主要功能中，我有以下代码：

```
struct student s1 = {"zack",0,0,82};
struct student s2 = {"bob",0,0,80};
struct student s3 = {"joe",0,0,97};
struct student s4 = {"bill",0,0,100};

struct student c[] = {s1,s2,s3,s4};

printf("%d\n\n", arrayLengths(c));
printf("%d\n\n", sizeof(c)/sizeof(c[0])); 
```

其中arrayLength定义为：

```
int arrayLengths(struct student g[]) {
    return sizeof(g)/sizeof(g[0]);
} 
```

尽管我得到了两个不同的结果，但使用重复的代码。我的控制台输出是：

```
0
4 
```

是什么赋予了？为什么会这样，我怎样才能把它放在它自己的功能中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:16:12.663

当一个数组被传递给一个函数时，它会衰减为一个指针，指向数组中的第一个元素。所以：

```
int arrayLengths(struct student g[]) {
    return sizeof(g)/sizeof(g[0]);
} 
```

实际上是：

```
int arrayLengths(struct student* g) {
    return sizeof(struct student*)/sizeof(struct student);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:15:59.430

里面的代码`arrayLengths`怎么知道数组有多大？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:18:56.390

传递给函数的数组衰减为指针。在 32 位系统上，指针大小通常为 4 个字节。

而主函数中数组的大小将等于

```
sizeof(array element type) * (number of elements in the array) 
```

这应该可以解释您所看到的行为。

# php - PHP 通过身份验证从远程 URL 获取 XML - 403 错误

> ID：10649828
> 
> 赞同：0
> 
> 时间：2012-05-18T09:13:12.270
> 
> 标签：php, xml, curl, pear, http-request

我有一个提供 xml 输出的 URL。它需要一个用户名和密码，我可以使用以下格式通过浏览器访问：

```
http://username:password@url.com 
```

但是，当我尝试通过 php 文件访问它时，我得到了 403 禁止：

```
$url = "http://username:password@url.com";

$xml = @simplexml_load_file($url);
print_r($http_response_header); 
```

我尝试使用 curl 并将用户代理设置为浏览器，但这仍然没有回显数据。

```
$username = "user";
$password = "pass";
$process = curl_init("http://user:pass@url.com/feed?feed_id=1");
//curl_setopt($process, CURLOPT_HTTPHEADER, array('Content-Type: application/xml'));
curl_setopt($process, CURLOPT_HEADER, 1);
curl_setopt($process, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($process, CURLOPT_USERPWD, $username . ":" . $password);
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
$return = curl_exec($process);
echo $return; 
```

我还尝试使用 pear 的 http 请求 2，它也给出了 403 禁止

我试图访问的服务器是否拒绝通过 PHP 进行所有连接，或者有没有办法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:17:38.640

似乎您请求的页面非常挑剔。确保完全按照浏览器的方式发送所有标头。

*   在 Firefox 中安装 Firebug，或使用 Chrome 的检查器
*   写下请求受保护页面时发送的所有标头
*   与浏览器完全一样，从您的 php 脚本发送标头。
*   如果它不起作用，请使用 Wireshark 验证您是否真的做对了。

我怀疑该页面还会查找用户代理标头左右，而不仅仅是密码。

另一个问题可能是您的 IP 与您的服务器不同，并且只有您的 IP 被列入白名单。

# extjs - EXTJS 4 上的 Ext.XTemplate 中的 Extjs 组件

> ID：10649832
> 
> 赞同：10
> 
> 时间：2012-05-18T09:13:29.417
> 
> 标签：extjs, components, extjs4, render

我正在尝试将 extjs 组件添加到 tpl 面板。有没有像这样将组件插入到 tpl

```
Ext.create('Ext.panel.Panel',{ 
    renderTo: Ext.getBody(), 
    data: {},  
    listeners:{
        afterrender:function(){
            var renderSelector = Ext.query('div.comment-add-textarea'); 
                for(var i in renderSelector){
                    Ext.create('Ext.form.field.TextArea',{
                        height:300,
                        renderTo:renderSelector[i]
                    });   
                } 
        }
    },
    tpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
        '<div class="comment-add-textarea"></div>',
        '</tpl>',{
          compiled:true
        })
});​ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T04:29:15.823

试试这个

```
Ext.create('Ext.panel.Panel', {
    renderTo: Ext.getBody(),
    data: {},
    listeners: {
        refresh: function() {
            var renderSelector = Ext.query('div.comment-add-textarea');
            for (var i in renderSelector) {
                Ext.create('Ext.form.field.TextArea', {
                    height: 300,
                    renderTo: renderSelector[i]
                });
            }
        }
    },
    tpl: Ext.create('Ext.XTemplate',
        '<tpl for=".">',
        '<div class="comment-add-textarea"></div>',
        '</tpl>', {
            compiled: true
    })
}); 
```

# .net - 使用 Npanday 和 Jenkins 发布多模块 .Net 项目时出现依赖性错误

> ID：10649835
> 
> 赞同：2
> 
> 时间：2012-05-18T09:13:36.120
> 
> 标签：.net, maven, jenkins

在尝试使用 Npanday 和 Jenkins 发布 .Net 项目时，我遇到了一些问题。

我的项目结构如下：

```
net_test (parent, with 2 modules)
  net_test_1
  net_test_2 (dependent of net_test_1) 
```

当我尝试使用常规的 Maven 命令行首先发布这些

```
mvn release:prepare 
```

接着

```
mvn release:perform 
```

一切正常。但是当我尝试使用 jenkins 发布项目时，net_test_2 模块说它无法解析我尝试发布的版本中的 net_test_1。当然是这种情况，因为它还没有被构建，但是由于它在反应器中，它将被构建并且依赖关系不应该被解决。

错误信息如下

```
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building net_test_2
[INFO] [INFO]    task-segment: [clean, verify]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] [clean:clean {execution: default-clean}]
[INFO] [INFO] [compile:initialize {execution: default-initialize}]
[INFO] 2012-maj-18 10:48:44 npanday.PathUtil getDotNetArtifact
[INFO] VARNING: 
[INFO] NPANDAY-1005-0001: Error copying dependency com.apptus.dag:net_test_1:dotnet-library:1.0.1:compile File C:\.m2\repository\com\apptus\dag\net_test_1\1.0.1\net_test_1-1.0.1.dll does not exist
[INFO] Downloading: http://repo.apptus.local/content/repositories/releases//com/apptus/dag/net_test_1/1.0.1/net_test_1-1.0.1.dll
[INFO] [INFO] Unable to find resource 'com.apptus.dag:net_test_1:dotnet-library:1.0.1' in repository releases (http://repo.apptus.local/content/repositories/releases/)
[INFO] 2012-maj-18 10:48:48 npanday.dao.impl.ProjectDaoImpl storeProjectAndResolveDependencies
[INFO] VARNING: NPANDAY-181-121:  Problem in resolving assembly: com.apptus.dag:net_test_1:dotnet-library:1.0.1:compile, Message = Unable to download the artifact from any repository
[INFO] 
[INFO] Try downloading the file manually from the project website.
[INFO] 
[INFO] Then, install it using the command: 
[INFO]     mvn install:install-file -DgroupId=com.apptus.dag -DartifactId=net_test_1 -Dversion=1.0.1 -Dpackaging=dotnet-library -Dfile=/path/to/file
[INFO] 
[INFO] Alternatively, if you host your own repository you can deploy the file there: 
[INFO]     mvn deploy:deploy-file -DgroupId=com.apptus.dag -DartifactId=net_test_1 -Dversion=1.0.1 -Dpackaging=dotnet-library -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]
[INFO] 
[INFO] 
[INFO]   com.apptus.dag:net_test_1:dotnet-library:1.0.1 
```

我不知道这是否是 Npanday、jenkins 的 M2 发布插件或其他东西的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:47:20.007

IIRC，准备的目标必须至少设置为“安装”。但这将在 1.5 中修复（仍未发布）。

# events - 如何处理 NM_CUSTOMDRAW 事件以检索列表项

> ID：10649836
> 
> 赞同：0
> 
> 时间：2012-05-18T09:13:41.103
> 
> 标签：events, mfc, ondraw, win32gui, clistctrl

我正在开发一个 win32/MFC 项目。我有一个自定义 CListCtrl 控件，我必须不时添加一些字符串。我绝对需要对动态添加到我的 CListCtrl 的项目执行一些操作。

基本上，我需要：

1.  *检测*添加单个元素；
2.  *检索*_single items_ 立即之后（理想情况下，在 InsertItem() 调用之后不久）；
3.  *将单个项目的值存储在地图中，我将使用它来执行其他操作 *。**

 *我考虑过覆盖方法 DrawItem()。但 OnDraw 事件*似乎*不适用于我的 CListCtrl。

**永远不会生成事件。**

**重要提示：**请注意 MyCustomCListCtrl 将“ *On Draw Fixed* ”属性设置为*True*，但“ *View* ”属性未*设置*为*报告*。

因此，我决定处理 NW_CUSTOMDRAW 事件，编写我的 CustomDraw 处理程序，如此[处](http://msdn.microsoft.com/en-us/library/ms364048%28v=vs.80%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775501%28v=vs.85%29.aspx)所述：

[在这里](http://forums.codeguru.com/showthread.php?t=257669)您可以查看另一个代码示例。

然后，我需要一种从 CListCtrl 中检索单个 itemID 的方法。
更准确地说，我需要一种*从 NMHDR struct 获取单个项目 ID*的方法。

我怎样才能做到这一点？我只能获得我添加的*最后一个项目的 ID。*我确信这是一个我找不到的简单错误。

下面的示例代码：

包含 CList Ctrl 的 Dialog 的来源：

```
/* file MyDlg.cpp */

#include "stdafx.h"
#include "MyDlg.h"

// MyDlg dialog

IMPLEMENT_DYNAMIC(MyDlg, CDialog)

MyDlg::MyDlg(CWnd* pParent)
    : CDialog(MyDlg::IDD, pParent)
{
}

MyDlg::~MyDlg()
{
}

void MyDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_Control(pDX, IDC_LIST1, listView); /* listView is a MyCustomCListCtrl object */
}

BEGIN_MESSAGE_MAP(MyDlg, CDialog)
    ON_BN_CLICKED(IDC_BUTTON1, &MyDlg::OnBnClickedButton1) 
END_MESSAGE_MAP()

BOOL MyDlg::OnInitDialog()
{
    CDialog::OnInitDialog();
    return TRUE;
}

/* OnBnClickedButton1 handler add new strings to MyCustomCListCtrl object */

void MyDlg::OnBnClickedButton1()
{
    listView.InsertItem(0, "Hello,");
    listView.InsertItem(1, "World!");
} 
```

我的自定义 CList Ctrl 源：

```
/* file MyCustomCListCtrl.cpp */

#include "stdafx.h"
#include "MyCustomCListCtrl.h"

MyCustomCListCtrl::MyCustomCListCtrl()
{
}

MyCustomCListCtrl::~MyCustomCListCtrl()
{
}

BEGIN_MESSAGE_MAP(MyCustomCListCtrl, CListCtrl)
    //{{AFX_MSG_MAP(MyCustomCListCtrl)
    //}}AFX_MSG_MAP
    // ON_WM_DRAWITEM()                             /* WM_DRAWITEM NON-AVAILABLE */
    ON_NOTIFY_REFLECT(NM_CUSTOMDRAW, OnCustomDraw)
END_MESSAGE_MAP()

// 'Owner Draw Fixed' property is already TRUE
/*  void CTranslatedCListCtrl::DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct)
{
    bool inside = true; /* Member function removed: I never enter here... */
}  */

void MyCustomCListCtrl::OnCustomDraw(NMHDR* pNMHDR, LRESULT* pResult)
{
    /* Here, I must retrieve single strings added to my MyCustomCListCtrl object */

    LPNMLISTVIEW plvInfo = (LPNMLISTVIEW)pNMHDR;
    LVITEM lvItem;

    lvItem.iItem = plvInfo->iItem;          /* Here I always get _the same_ ID: ID of last element...*/
    lvItem.iSubItem = plvInfo->iSubItem;    // subItem not used, for now...

    int MyID = 0;

    this->GetItem(&lvItem); // There mai be something error here?
    MyID = lvItem.iItem;

    CString str = this->GetItemText(MyID, 0); /* ...due to previous error, here I will always get the last string I have added("World!") */

    // Immediately after obtaining ALL IDS, I can Do My Work

    *pResult = 0;
} 
```

任何帮助表示赞赏！

PS请不要给我这样的提示：

1.  将您的“Own Draw Fixed”属性设置为 True；
2.  检查您是否已插入“ON_WMDRAWITEM()”行
3.  将您的 CListCtrl 转换为报告；

我已经尝试了一切...... :-)

谢谢大家！

它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:57:53.113

首先，如果您需要检测添加单个项目，为什么不处理[LVN_INSERTITEM](http://msdn.microsoft.com/en-us/library/bb774841%28VS.85%29.aspx)消息？我的意思是，这就是该消息的目的。相反，处理 NM_CUSTOMDRAW 是错误的方法，因为如果控件被隐藏、窗口最小化、...

在您的 OnCustomDraw() 中，您始终获得相同的 ID：这是因为列表控件始终绘制所有可见项目，因此您获得了第一个可见项目的 ID。如果在此处设置断点，则在下一次运行时，控件会刷新，并且绘图会从第一个可见项重新开始。

注意：由于您正在处理 NM_CUSTOMDRAW，因此您不会收到任何未插入控件可见部分的添加项目的通知！因此，正如我所提到的，您应该改为处理 LVN_INSERITEM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:21:02.813

首先...感谢您在这个*愚蠢*的问题上浪费了宝贵的时间。我从来没有发现任何关于`LVN_INSERT`事件的信息。我编写科学软件（大多数在 Linux 平台上）；我不是长期的 Win32 开发人员，所以我不深入了解 Win32 API。`MyCustomCListCtrl`正如你所建议的，我已经修改了类的源文件。下面的代码似乎是实现我想要的最好（和更快）的方法：

```
 /* file MyCustomCListCtrl.cpp */

    #include "stdafx.h"
    #include "MyCustomCListCtrl.h"

    MyCustomCListCtrl::MyCustomCListCtrl()
    {
    }

    MyCustomCListCtrl::~MyCustomCListCtrl()
    {
    }

    BEGIN_MESSAGE_MAP(MyCustomCListCtrl, CListCtrl)
        //{{AFX_MSG_MAP(MyCustomCListCtrl)
        //}}AFX_MSG_MAP
        ON_NOTIFY_REFLECT(LVN_INSERTITEM, OnLvnInsertItem)
    END_MESSAGE_MAP()

    ...

    afx_msg void CTranslatedListCtrl::OnLvnInsertItem(NMHDR* pNMHDR, LRESULT* pResult)
    {
        LPNMLISTVIEW plvInfo = (LPNMLISTVIEW)pNMHDR;
        CString str = this->GetItemText(plvInfo->iItem, 0);

        // Add Some Logic

        *pResult = 0;
    } 
```

你确定吗？从我所看到的，它似乎工作。：-） 再次感谢！

它*

# spring - 如何在非弹簧加载的java类中获取spring加载的属性

> ID：10649838
> 
> 赞同：1
> 
> 时间：2012-05-18T09:13:43.397
> 
> 标签：spring

有人可以告诉我如何在没有由 spring 加载的 java 类中获取由 spring porpertyconfigurer 加载的属性吗？我想写一个单例类实现

> 应用程序上下文感知

并检索属性值。还有其他更好的方法吗？或者 Spring 是否有任何实用程序类来获取加载的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:58:46.550

The PropertyPlaceholderConfigurer is a BeanFactoryPostProcessor, a specialized utility for post-processing bean definitions, and as such it is only relevant to the bean factory itself. The use case you have in mind is just not covered by it, the PropertyPlaceholderConfigurer does not lend its properties to the ApplicationContext, nor does it have a getProperties() (or similar) method.

AFAIK, you will have to introduce some value-holder bean, that will hold the property value for you

# c# - 如何为长时间运行的查询增加 executionTimeout？

> ID：10649843
> 
> 赞同：58
> 
> 时间：2012-05-18T09:14:19.917
> 
> 标签：c#, asp.net

在我的应用程序中，执行一个查询需要 3 分钟。我发现**Default ExecutionTimeout 值为 110 sec**。我试图将其更改为 500（秒），但它没有解决我的问题。在某处我发现该设置`<compilation debug="false">`允许配置**ExecutionTimeout**属性。但是，即使这样也没有解决我的问题。

有谁知道如何增加长时间运行查询的执行超时？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-18T09:36:18.317

`.NET`Framework 1.0 和 1.1的执行超时为 90 秒，否则为 110 秒。

如果您需要更改默认设置，您需要在您的`web.config`下进行`<httpRuntime>`

```
<httpRuntime executionTimeout = "number(in seconds)"/> 
```

但要记住：

***此超时仅在编译元素中的调试属性为 False 时适用。***

详细了解[编译元素](http://msdn.microsoft.com/en-us/library/s10awwz0.aspx)

看看这个关于[httpRuntime Element的文档](http://msdn.microsoft.com/en-US/library/e1f13641%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-18T09:35:11.377

您可以`executionTimeout`在*web.config*中设置以支持更长的执行时间。

`executionTimeout`指定请求在被 ASP.NET 自动关闭之前允许执行的最大秒数。[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/e1f13641(v=vs.100).aspx)

```
<httpRuntime  executionTimeout = "300" /> 
```

这使执行超时为*五分钟*。

可选的 Int32 属性。

> 指定请求在被 ASP.NET 自动关闭之前允许执行的最大秒数。
> 
> 此超时仅在编译元素中的调试属性为 False 时适用。因此，如果调试属性为 True，则不必将此属性设置为较大的值以避免在调试时关闭应用程序。默认值为 110 秒，[参考](http://msdn.microsoft.com/en-us/library/vstudio/e1f13641%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-09-09T09:14:46.253

回覆。“我们可以为单个页面设置这个值吗？” – MonsterMMORPG。

是的，您可以（通常应该）使用位置标签附上之前的答案。

例如

```
 ...
  <location path="YourWebpage.aspx">
    <system.web>
      <httpRuntime executionTimeout="300" maxRequestLength="29296" />
    </system.web>
  </location>
</configuration> 
```

上面的片段取自我昨天测试过的我自己的工作 web.config 的末尾 - 它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-22T08:43:10.387

要在每页级别设置超时，您可以使用以下简单代码：

```
Page.Server.ScriptTimeout = 60; 
```

注意：60 表示 60 秒，此超时仅适用于编译元素中的调试属性为 False 的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T09:23:53.247

当查询需要这么长时间时，我建议异步运行它并在完成时使用回调函数。

我对 ASP.NET 没有太多经验，但也许您可以将 AJAX 用于这种异步行为。

通常，网页应该在几秒钟内加载，而不是几分钟。不要让您的用户等待这么久！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-11T09:32:41.280

就我而言，我需要让我的 wcf 运行超过 2 小时。设置，根本没有工作。wcf 的执行时间可能不超过 20~30 分钟。所以我在 IIS 管理器中更改了应用程序池的空闲超时设置，然后它就起作用了！在 IIS 管理器中，选择您的应用程序池并右键单击它并选择高级设置，然后将空闲超时设置更改为您想要的任何分钟。所以，我认为设置 web.config 和设置应用程序池都是需要的。

# clearcase - 在 2 个 VoB Clearcase 之间共享分支和标签

> ID：10649849
> 
> 赞同：1
> 
> 时间：2012-05-18T09:14:43.637
> 
> 标签：clearcase

如何在 ClearCase 7 中的两个 Vobs 之间共享类型资源管理器中创建的分支和标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:50:28.800

您需要将这两个 vobs 与一个公共管理 vob 链接，以便定义**[全局类型](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/c_bntr_impldev_gblty.htm)**。

> Rational® ClearCase® 全局类型工具使您可以轻松地确保他们需要的分支、标签、属性、超链接和元素类型出现在您的项目使用的所有 VOB 中。

请参阅“ [VOB 数据类型和管理 VOB 层次结构](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.books.cc_admin.doc/type-admin.htm)”。

![层次结构](../Images/504a8595089ede1b1960e856f07e303e.png)

> 通常，对全局类型或全局类型的本地副本的所有操作都适用于全局类型及其所有本地副本。
> 
> 大多数 cleartool 类型创建命令（请参阅预定义和用户定义类型对象）支持一个`-global`选项，该选项创建一个全局类型对象。以下命令在 VOB \admin 中创建一个全局标签类型：

```
cleartool mklbtype -c "final label for REL6" -global REL6@\admin 
Created label type "REL6". 
```

# python - 在 Django Admin 中根据用户过滤查询

> ID：10649856
> 
> 赞同：1
> 
> 时间：2012-05-18T09:15:04.933
> 
> 标签：python, django, django-admin

我正在尝试根据一些 3 路关系逻辑过滤 m-2-m。我有以下模型（仅作为示例......但我写的越多，它看起来就像我想玩的游戏......）请原谅我过度使用`spam`和`eggs`元变量......

### 楷模：

```
class SuperProfile(models.Model):
    user = models.ForgeignKey('User')
    eggs_unlocked = models.ManyToMany('Egg')
    my_kitchen = models.ForeignKey('SuperKitchen')

class SuperKitchen(models.Model):
    name = models.CharField(max_length=20)

class Egg(models.Model):
    eggyness = models.PostiveIntegerField(help_text=_("how Eggy it is. eg." 
                                                      "Spam'n'Eggs is over 9000")
    kitchens = models.ForeignKey(help_text=_('What kitchen carries this') 
```

### 问题：作为管理员，在*别人的*SuperProfileAdmin 中：

*   我想根据他们所属的内容列出`eggs`他们可以使用的内容`kitchen`
*   一个人`Kitchen`，永远不会变。
*   `Eggs`只出现在一个`kitchen`。
*   您如何获得`SuperProfile`或`SuperKitchen`过滤所述*其他用户*`Egg`的列表的实例

 *我不确定这是否清楚，请评论需要澄清的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:34:24.143

在你的`EggAdmin`，你必须覆盖`queryset`方法

```
class EggAdmin(admin.ModelAdmin):
    ...
    def queryset(self, request):
        kitchen = request.user.superprofile_set.get().my_kitchen #get related users kitchen
        qs = super(EggAdmin, self).queryset(request) #call original queryset method that you are overriding
        return qs.filter(kitchens=kitchen) #apply your filter 
```

更新：好的，这改变了一切......在 SuperPrifile 管理员上，当您打开 SuperProfile 记录时，您希望`eggs_unlocked`根据该用户进行过滤......所以：

```
import re
# grab the superprofile id from the url
sup_pro_rgx=re.compile(r'(\d+)')
sup_pro = sup_pro_rgx.findall(request.META['REQUEST_URI'])[0]
# I know this is really the ugliest way to do this, but there is no other way (at least as far as i know) to do this

class SuperProfileAdmin(admin.ModelAdmin):
...
def formfield_for_manytomany(self, db_field, request, **kwargs):
    if db_field.name == "eggs_unlocked":
        my_kitchen = self.get_object(request, object_id=sup_pro).my_kitchen
        kwargs["queryset"] = Egg.objects.filter(kitchen=my_kitchen)
    return super(SuperProfileAdmin, self).formfield_for_manytomany(db_field, request, **kwargs) 
```

我知道，使用正则表达式来获取对象 ID 是一种非常糟糕的做法，但正如我所提到的，这是我所知道的唯一方法。

这是[formfield_for_manytomany的文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:14:31.153

```
Eggs.objects.filter(kitchens=profile.my_kitchen) 
```*

# c# - 想要在 C# 中的多个实例之间共享一个字符串

> ID：10649857
> 
> 赞同：0
> 
> 时间：2012-05-18T09:15:07.930
> 
> 标签：c#, shared-memory

我想在 C# 中的多个应用程序实例之间共享一个字符串。
我正在使用 .net 框架 3.5 SP1。而且这个版本**不支持 Memory-Mapped Files**。
由于一些权限和性能问题，我无法使用磁盘 IO。
所以谁能告诉我一个方便的方法来做到这一点。
我搜索并遇到了其中的一些：
1\. 序列化
2\. 编组
3\. 管道
，但是所有这些都太复杂了，不能只共享一个字符串。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:18:33.377

[消息队列](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue%28v=vs.100%29.aspx)，也许？

查看[本文](http://www.techrepublic.com/article/use-microsoft-message-queuing-in-c-for-inter-process-communication/6170794)以获取示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:20:09.690

你可以使用数据库。

如果您想要共享内存，我认为您会遇到的其中一件事是 AppDomains，请参见此处：这是一个解决此问题的示例：http: [//www.codeproject.com/Articles/17606/NET-Interprocess-Communication](http://www.codeproject.com/Articles/17606/NET-Interprocess-Communication)

# jquery - TinyMCE 模板

> ID：10649860
> 
> 赞同：1
> 
> 时间：2012-05-18T09:15:15.233
> 
> 标签：jquery, tinymce, cakephp-1.3

是否可以在 tinyMCE template_templates 块中插入 jQuery 脚本？

这是 template_templates 块

```
template_templates : [
    {
            title : "Editor Details",
            src : "editor_details.htm",
            description : "Adds Editors Name and Staff ID"
    }
] 
```

我想把jQuery放在这里

```
template_templates : [
  //jQuery
] 
```

在这里需要一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:04:22.593

是的你可以。据我所知，它只能是一条语句（[] 之间的分号会产生错误）。对于更复杂的代码，您可以将其包含在一个函数中：

```
template_templates : [
    function() {
        //jQuery code here
    }
] 
```

或者，根据您想要实现的目标，您可以在其中放置一个变量，并且可以在此对象之外计算其值。

# php - 确保我的 Web 服务在没有活动 Facebook 会话的情况下不被调用

> ID：10649865
> 
> 赞同：0
> 
> 时间：2012-05-18T09:15:36.450
> 
> 标签：php, facebook-graph-api

我正在开发一个 Facebook 画布应用程序（它是一个 Flash 应用程序），所有 Facebook 调用都是从客户端（JS SDK）完成的，我在我的服务器上设置了一个 php Web 服务来存储和读取我的数据库中的数据，所以基本上目前我根本没有使用 Facebook php sdk。

在没有活动的 Facebook 会话的情况下，保护我的 Web 服务不被调用的最简单方法是什么？

* * *

**更新：**解决了，保罗的回答是正确的，谢谢@Paul。

问题很简单：在 php 会话开始后初始化 JS sdk，因此对我的 php 文件的进一步调用未被识别为已登录。为了使其工作，我在嵌入 swf 的文件中初始化了 Facebook 会话（是 Html ，现在是 php)，这意味着处理尚未授权应用程序的用户是通过 php 完成的，甚至在加载 swf 之前。现在我可以依靠我的网络服务中的活动会话和用户识别，现在咖啡的味道好多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:23:04.843

如果不检查 FB 访问令牌是否有效，我认为没有真正好的方法可以做到这一点。

如果我是你，我会使用 SDK 来验证会话。它非常易于使用，只需从[此处](https://github.com/facebook/php-sdk/)获取并尝试以下代码：

```
<?php
require 'php-sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
    // you have a secure session
} 
```

# javascript - 应该在 jQuery 文档内部还是外部编写和调用 Javascript 函数？

> ID：10649867
> 
> 赞同：3
> 
> 时间：2012-05-18T09:15:39.123
> 
> 标签：javascript, jquery, function, scope, document-ready

我只是有一个关于在 jQuery 中编写函数的问题。在定义自己的函数时，它们应该写在里面`$(function(){});`还是外面？请注意，这些只是示例函数，可以是任何函数。我选择了一个jQuery函数和一个原生JavaScript，看看是否有任何区别，即是否应该在文档中定义一个自定义的jQuery函数？

例如：

```
$(function(){
    $('select').jQueryExample();
    nativeExample();    
});

$.fn.jQueryExample = function(){
    //Do something
}

function nativeExample(a, b)
{   
    return a + b;
} 
```

与此相反，它们被称为并在文档中定义好了吗？

```
$(function(){
    $('select').jQueryExample();
    nativeExample();

    $.fn.jQueryExample = function(){
        //Do something
    }

    function nativeExample(a, b)
    {   
        return a + b;
    }
}); 
```

**：：编辑：：**

一个额外的问题。如果一个函数在文档准备外部定义并且也称为外部文档准备就绪，那么与将它定义在外部但调用**内部**文档准备好相比会发生什么？

我问这个是因为我在文档就绪范围之外定义了一个函数，这个函数是一个 ajax 调用，它在页面加载时获取新消息。应该在外部或内部调用文件准备好？

例如：

```
$(function(){
 //Hello, I am jQuery

});

nativeExample();

function nativeExample(a, b)
{   
    return a + b;
} 
```

相对于：

```
$(function(){

 nativeExample();

});

function nativeExample(a, b)
{   
    return a + b;
} 
```

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T09:22:19.883

我认为你应该在 jQuery`ready`方法之外定义你的函数，因为：

*   函数定义代码是一个“被动”代码：它不需要 DOM 是 runt
*   如果你想在事件之前使用你的函数`ready`，如果函数是在事件内部定义的，你就不能这样做，
*   jQuery`ready`方法应该只在真正需要的时候使用，这意味着当你*真的*必须等待 DOM 准备好时

有关信息，这是我每次使用的简化但常见的 HTML 页面模式，它运行良好：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Page title</title>
    <!-- your CSS code -->
    <link rel="stylesheet" href="/path/to/file.css">
</head>
<body>
    <!-- your HTML elements -->

    <!-- all your scripts elements at the bottom -->

    <!-- load jQuery from Google CDN -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <!-- load all your "passive" code that defines custom or vendor jQuery plugins -->
    <script src="jquery.plugins.js"></script>

    <!-- load all your "active" code -->
    <script src="yourcode.js"></script>
</body>
</html> 
```

该`jquery.plugins.js`文件可能包含您提供的内容：

```
// define all jQuery plugin, aka "passive" code
// "passive" means it won't affect the page
$.fn.jQueryExample = function(){
    //Do something
};

$.fn.somePlugin = function(){
    // Do something
};

// you could define vanilla JavaScript functions in a separated file if you want
function nativeExample(a, b)
{
    return a + b;
} 
```

该文件`yourcode.js`可能是：

```
// place here all "active" code
// by "active" code I mean all code that will interact/alter/modify your page
$(function(){
    $('select').jQueryExample();
    nativeExample();    
}); 
```

* * *

关于您的编辑，您的问题`what would happen as opposed to having it defined outside but called inside document ready`没有统一的答案。看这个例子：

```
<!-- basic html setup -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Page title</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        // placing <script> tag in the <head> tag is considered as a bad practice
        // I use it for the example but you should not do the same in real code

        // define your functionsin the <head> tag
        function getFoo() {
            return "foo";
        }
        function getAnchor() {
            return document.getElementsByTagName('a');
        }
    </script>

    <script>
        // reference: ONE
        // call your function in the <head> tag
        console.log( "one", getFoo() ); // "foo"
        console.log( "one", getAnchor() ); // empty array
    </script>
    <script>
        // reference: TWO
        $(document).ready(function(){
            // call your function inside the jQuery 'ready' event
            console.log( "two", getFoo() ); // "foo"
            console.log( "two", getAnchor() ); // array with one element
        });
    </script>
</head>
<body>

    <a href="www.example.com">bar</a>

    <script>
        // reference: THREE
        // call your function at the end of the <body> tag
        console.log( "three", getFoo() ); // "foo"
        console.log("three",  getAnchor() ); // array with one element
    </script>

    <script>
        // reference: FOUR
        $(document).ready(function(){
            // call your function inside the jQuery 'ready' event
            console.log( "four", getFoo() ); // "foo"
            console.log( "four", getAnchor() ); // array with one element
        });
    </script>
</body>
</html> 
```

该函数`getFoo`不需要 DOM 即可工作。因此，它的 4 次调用总是返回 'foo'，因此无论何时何地调用她（在 'ready' 事件内部或外部），该函数都可以工作。

该函数`getAnchor`查询 DOM 并返回页面中锚标记的集合。脚本“ONE”中的第一个调用在`ready`事件之外并返回未定义。第三个调用，在脚本“THREE”中，也在`ready`事件之外，**但**它在控制台中记录了一组锚元素。这意味着，**函数调用的位置可以改变函数的行为**。在第一次调用中，显然页面中没有锚标记，这就是函数返回的原因`undefined`。然后，放置在页面开头和结尾的第二次调用和第四次调用都记录了一个数组。在这种情况下，函数调用的位置不会改变函数的行为，因为函数`getAnchor`实际上是在所有 DOM 元素被加载后调用。如果您查看控制台日志，您会看到如下内容：

```
one foo
one []

three foo
three [<a href=​"www.example.com">​bar​&lt;/a>​]

two foo
two [<a href=​"www.example.com">​bar​&lt;/a>​]

four foo
four [<a href=​"www.example.com">​bar​&lt;/a>​] 
```

看日志顺序：一、三、二、四；这与源顺序不同：一、二、三、四。功能是`ready`一直延迟到页面加载完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:20:37.177

当然——你可以在任何你想要的地方编写你的函数。它们根本**不需要**在您的文档就绪功能中。我不喜欢用函数把它弄得乱七八糟，所以我只是把它们写在外面。没有**真正的**理由你应该或不应该; 无论如何，这些功能应该可以工作。

这个想法是，这些函数只会在你的`$(function(){});`（document.ready 函数）中被调用。

一旦所有 HTML 元素（也称为 DOM）完全加载并且 jQuery 也准备就绪，就会调用文档就绪函数。最佳实践 (IMO) 是最后加载 jQuery 文件 - 在所有自定义 JavaScript 文件和 css 文件之后。这样，只有在调用文档就绪函数后 - 您就 100% 确定所有文件都已加载并准备就绪。

```
<head>
  <link type="text/css" href="myStyle.css">
  <script type="text/javascript" src="myFunctions.js" ></script>
  <script type="text/javascript" src="myUtils.js" ></script>
  <script type="text/javascript" src="jquery-1.7.2.min.js" ></script>
</head> 
```

您甚至可以将您的函数完全放在一个单独的文件中......只要您在满足所有依赖项之前不调用该函数就可以了。

* * *

回复：您的编辑 -

一旦调用了文档就绪函数 - 您就可以在 JavaScript 中的任何地方使用 jQuery 方法。如果您的 AJAX 调用发生在您的文档准备好之前，它可能不知道如何实际执行请求（如果您使用的是 jQery AJAX 调用）。您必须在准备好的文档中调用该函数。只需将“页面加载”事件替换为文档准备就绪的回调 - 使其在 jQuery 准备就绪后加载新消息。

# javascript - Jquery 选择器输入[type=text]')

> ID：10649869
> 
> 赞同：109
> 
> 时间：2012-05-18T09:15:44.537
> 
> 标签：javascript, jquery

我写了一个基本上选择所有`input type=text`元素的代码，如下所示：

```
$('.sys input[type=text]').each(function () {} 
```

如何将其更改为选择`input[type=text]`或`select`？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-05-18T09:16:38.383

使用普通的 css 选择器：

```
$('.sys input[type=text], .sys select').each(function() {...}) 
```

如果你不喜欢重复：

```
$('.sys').find('input[type=text],select').each(function() {...}) 
```

或者更简洁地说，传入`context`参数：

```
$('input[type=text],select', '.sys').each(function() {...}) 
```

注意：内部`jQuery`会将上述内容转换为`find()`等价物

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

我个人认为第一个替代方案是最易读的:)，不过你的看法

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T09:16:47.880

```
$('.sys').children('input[type=text], select').each(function () { ... }); 
```

`.sys > input[type=text]`编辑：实际上，如果您想要后代选择（ ） ，则上面的代码等效于子选择器，`.sys input[type=text]`您需要使用@NiftyDude 给出的选项。

更多信息：

*   [`jQuery.children()`](http://api.jquery.com/children/)
*   [多重选择器](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-19T14:54:14.530

如果您有多个输入作为表单或表格中的文本需要遍历，我这样做了：

```
var $list = $("#tableOrForm :input[type='text']");

$list.each(function(){
    // Go on with your code.
}); 
```

我所做的是检查每个输入以查看类型是否设置为“文本”，然后它会抓取该元素并将其存储在 jQuery 列表中。然后，它将遍历该列表。您可以像这样为当前迭代设置一个临时变量：

```
var $currentItem = $(this); 
```

这会将当前项目设置为每个循环的当前迭代。然后你可以用 temp 变量做任何你想做的事情。

希望这对任何人都有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T09:17:36.007

```
$('input[type=text],select', '.sys'); 
```

循环：

```
$('input[type=text],select', '.sys').each(function() {
   // code
}); 
```

# java - java中内存使用最少的本机集合

> ID：10649870
> 
> 赞同：1
> 
> 时间：2012-05-18T09:15:47.060
> 
> 标签：java, memory, collections

哪个是更快的集合和更小的内存占用空间，我可以用它来存储一些要在稍后迭代的值？（不需要订购）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:29:35.660

这在**很大程度上**取决于用例。这就是为什么有这么多`Collections`，毕竟！每个人都适合做不同的事情。

最重要`Collection`的是——你需要什么？除了迭代之外，您还会对它执行任何其他操作吗？它将存储多少元素？某些元素会被复制吗？是否有任何性能方面或内存方面的限制？如果没有这些信息，我们只能给您一般性的答案。

* * *

最通用的方法是使用数组。严重地。如果要节省内存，请使用数组。

如果这不是一个选项，那么[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)这是您的最佳选择，因为它在内部使用数组并且通常是最节省内存的`Collection`（我认为与 一起[`ArrayDeque`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)）。它预先分配了一些空间，每次填满时都会变大两倍。因此，请尝试使用正确数量的插槽来构建它，这样就不会使用多余的空间。

如果您正在寻找特定的东西，您可以使用这些：

*   存储位，使用[`BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)
*   存储原语，使用[`Trove`](http://trove.starlight-systems.com/)
*   如果许多元素将在 中多次出现`Collection`，您可能需要尝试一些[`Bag`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/Bag.html)实现，即[`HashBag`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/bag/HashBag.html)；或多[组](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Multiset.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:20:08.400

这在很大程度上取决于用例。

需要收藏吗？不只是一个数组？我会选择 a `LinkedList`，因为它不像 an`ArrayList`或`Vector`（颤抖）那样预先分配空间。

# c# - .NET 中的 Google 预测 API 服务身份验证

> ID：10649872
> 
> 赞同：1
> 
> 时间：2012-05-18T09:15:58.570
> 
> 标签：c#, authentication, google-api, oauth-2.0, google-prediction

我正在尝试构建一个可以访问 Google 预测 API 的 .NET 服务应用程序。

此应用程序是一项服务（无用户交互），因此我想知道如何自动对 Google API 进行身份验证（无需打开用于登录的浏览器，然后按“授权”）。

我试过的：

*   运行了一些 .NET Google API 示例——它们似乎都需要这种打开浏览器并要求用户单击的身份验证方案（我相信这称为本机应用程序客户端身份验证）。

*   尝试使用[服务帐户](http://code.google.com/p/google-api-python-client/wiki/OAuth2#Service_Accounts)OAuth2 身份验证 - 这是正在进行的工作。但是，没有用于此的 .NET 库。我目前正在使用 python 示例并且遇到了一些问题（因为我不是 Python 开发人员）。

在这一点上，我希望我能够让 python 示例运行并在 .NET 中重新编写它，或者将它与 Iron Python 一起使用。

我很感兴趣是否有人以前遇到过这种问题以及解决方案是什么。如果在 .NET 中（目前）无法进行 OAuth2 服务身份验证，我也对非 OAuth2（并且可能已弃用）身份验证解决方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:08:57.040

我编写了一个[示例应用程序](http://code.google.com/p/try-prediction/)（在 Python 和 Java 中，抱歉在 C# 中不可用），它进行一次身份验证，将 OAuth 凭据和相关数据存储在服务器（Google App Engine）上，然后重用这些共享凭据，刷新需要时访问令牌，无需最终用户查看 OAuth 允许/拒绝对话框或 OAuth 的任何其他方面。

这仍然需要应用程序管理员执行 OAuth 对话框，但这是一次性事件。如果出于某种原因您想要重置存储的服务器凭据，则可以通过特殊 URL 按需重新执行初始化步骤，但是，此重置功能受到保护，因此只有应用程序管理员可以发出该请求，而不是最终用户.

# c# - 如何在 WinRT 图像控件中放大/缩小

> ID：10649874
> 
> 赞同：0
> 
> 时间：2012-05-18T09:16:04.950
> 
> 标签：c#, windows-runtime

我有一个显示图像的 WinRT Metro 应用程序。我现在喜欢用捏合手势放大/缩小。有没有一种简单的方法可以在图像控件上激活它，还是我必须自己实现整个手势/捏合逻辑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T06:22:38.150

我找到了更好的解决方案。

只需使用 ScrollViewer 控件，这将为您进行整个缩放：

```
 <ScrollViewer x:Name="ImageScrollViewer"  HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Visible" VerticalAlignment="Stretch" MinZoomFactor="0.5" >
        <Grid>
            <Image x:Name="SmugImage"   Source="http://www.website.com/image.png"  Stretch="Uniform" Grid.Column="0" Grid.Row="0" />
        </Grid>
    </ScrollViewer> 
```

确保将 Horizo​​ntalScrollBarVisibility 设置为 Visible，否则在开始缩放时图像将左对齐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:36:44.693

根据[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/fd033b83-6557-498f-b532-59fc41210705)的 Windows Metro 论坛，没有内置的处理程序可用于您想要做的事情，但它们确实链接到示例代码，以实现我相信您[在此站点上尝试实现的目标](http://www.sharpgis.net/post/2012/01/17/Building-A-Multi-Touch-Photo-Viewer-Control.aspx)

# javascript - 在 Joomla html 选项卡默认代码上，如何使用外部 javascript 更改活动标签

> ID：10649893
> 
> 赞同：0
> 
> 时间：2012-05-18T09:17:16.070
> 
> 标签：javascript, joomla, tabs, mootools

在我正在制作的 joomla 组件中，我使用的是 joomla 的默认选项卡功能。它使用 mootools 并且像魅力一样工作。

问题是我需要使用 javascript（来自 ajax 调用）更改活动选项卡。

我准备了一个简单的例子： [http ://dianthos.net/test/tabs/tabs.html](http://dianthos.net/test/tabs/tabs.html)

我希望能够单击“单击此处”，然后更改活动选项卡。

限制：我不能修改 html，也不能修改任何现有的 javascript。我必须在函数 loadtab2() 中做任何事情

有什么想法可以从那里引用它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:20:22.077

保存对 Tabs 实例的引用：

```
var tabsInstance; // up the scope.

// further down
tabsInstance = new JTabs(tabs, {
    useStorage: false,
    titleSelector: 'dt.tabs',
    descriptionSelector: 'dd.tabs'
});

// event handler
el.addEvent('click', function(e) {
    e.stop();
    tabsInstance.display(2);
}); 
```

通过这里可用的方法：http: [//dianthos.net/test/tabs/tabs.js](http://dianthos.net/test/tabs/tabs.js)

穷人的外部电话没有上述内容：

```
$$("dt.tabs")[1].fireEvent('click'); 
```

# java - 使用 Lucene 计算文档相似度的更好方法

> ID：10649898
> 
> 赞同：2
> 
> 时间：2012-05-18T09:17:46.573
> 
> 标签：java, lucene, similarity

我通过在索引时指定 TermVector 来使用 Lucene 索引文档集合。然后我通过读取索引并计算每个文档的 TF-IDF 得分向量来检索术语及其频率。然后，使用 TF-IDF 向量，我使用[维基百科的余弦相似度方程](http://en.wikipedia.org/wiki/Cosine_similarity)计算文档之间的成对余弦相似度。

这是我的问题：假设我在这个集合中有两个相同的文档“A”和“B”（A 和 B 有 200 多个句子）。如果我计算 A 和 B 之间的成对余弦相似度，它会给我余弦值=1，这是完全可以的。但是，如果我从文档“B”中删除一个句子，它会给我这两个文档之间大约 0.85 的余弦相似度值。这些文档几乎相似，但余弦值不相似。我知道问题出在我使用的方程式上。

有没有更好的方法/方程可以用来计算文档之间的余弦相似度？

**已编辑**

这就是我计算余弦相似度的方式，`doc1[]`并且`doc2[]`是对应文档的 TF-IDF 向量。向量只包含`scores`但不包含`words`

```
private double cosineSimBetweenTwoDocs(float doc1[], float doc2[]) {
    double temp;
    int doc1Len = doc1.length;
    int doc2Len = doc2.length;
    float numerator = 0;
    float temSumDoc1 = 0;
    float temSumDoc2 = 0;
    double equlideanNormOfDoc1 = 0;
    double equlideanNormOfDoc2 = 0;
    if (doc1Len > doc2Len) {
        for (int i = 0; i < doc2Len; i++) {
            numerator += doc1[i] * doc2[i];
            temSumDoc1 += doc1[i] * doc1[i];
            temSumDoc2 += doc2[i] * doc2[i];
        }
        equlideanNormOfDoc1=Math.sqrt(temSumDoc1);
         equlideanNormOfDoc2=Math.sqrt(temSumDoc2);
    } else {
        for (int i = 0; i < doc1Len; i++) {
            numerator += doc1[i] * doc2[i];
            temSumDoc1 += doc1[i] * doc1[i];
            temSumDoc2 += doc2[i] * doc2[i];
        }
         equlideanNormOfDoc1=Math.sqrt(temSumDoc1);
         equlideanNormOfDoc2=Math.sqrt(temSumDoc2);
    }

    temp = numerator / (equlideanNormOfDoc1 * equlideanNormOfDoc2);
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:10:00.313

正如我在评论中告诉你的那样，我认为你在某个地方犯了错误。向量实际上不仅包含`<word,frequency>`对`words`。因此，当你删除句子时，只将对应词的频率减1（后面的词不移位）。考虑以下示例：

文件一：

```
A B C A A B C. D D E A B. D A B C B A. 
```

文件 b：

```
A B C A A B C. D A B C B A. 
```

向量 a：

```
A:6, B:5, C:3, D:3, E:1 
```

向量 b：

```
A:5, B:4, C:3, D:1, E:0 
```

这导致以下相似性度量：

```
(6*5+5*4+3*3+3*1+1*0)/(Sqrt(6^2+5^2+3^2+3^2+1^2) Sqrt(5^2+4^2+3^2+1^2+0^2))=
62/(8.94427*7.14143)=
0.970648 
```

**编辑** 我认为你的源代码不能正常工作。考虑以下代码，它适用于上述示例：

```
import java.util.HashMap;
import java.util.Map;

public class DocumentVector {
    Map<String, Integer> wordMap = new HashMap<String, Integer>();

    public void incCount(String word) {
        Integer oldCount = wordMap.get(word);
        wordMap.put(word, oldCount == null ? 1 : oldCount + 1);
    }

    double getCosineSimilarityWith(DocumentVector otherVector) {
        double innerProduct = 0;
        for(String w: this.wordMap.keySet()) {
            innerProduct += this.getCount(w) * otherVector.getCount(w);
        }
        return innerProduct / (this.getNorm() * otherVector.getNorm());
    }

    double getNorm() {
        double sum = 0;
        for (Integer count : wordMap.values()) {
            sum += count * count;
        }
        return Math.sqrt(sum);
    }

    int getCount(String word) {
        return wordMap.containsKey(word) ? wordMap.get(word) : 0;
    }

    public static void main(String[] args) {
        String doc1 = "A B C A A B C. D D E A B. D A B C B A.";
        String doc2 = "A B C A A B C. D A B C B A.";

        DocumentVector v1 = new DocumentVector();
        for(String w:doc1.split("[^a-zA-Z]+")) {
            v1.incCount(w);
        }

        DocumentVector v2 = new DocumentVector();
        for(String w:doc2.split("[^a-zA-Z]+")) {
            v2.incCount(w);
        }

        System.out.println("Similarity = " + v1.getCosineSimilarityWith(v2));
    }

} 
```

# ios - 关闭 UIButton 闪烁动画

> ID：10649903
> 
> 赞同：0
> 
> 时间：2012-05-18T09:18:15.290
> 
> 标签：ios, xcode, uibutton

我想关闭`UIButton`Flicker 动画，我尝试使用：

```
button.highlighted = NO;
[button setHighlighted:NO]; 
```

（但一直没有关闭`UIButton`闪烁动画，没有反应..）

我尝试另一个：

```
[button setEnabled:NO]; 
```

（按钮闪烁关闭，但我的按钮变成白色。）

请给我一些建议，谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:20:11.470

根据需要使用其中任何一个-

1.  这将禁用按钮 -

    ```
    button.userInteractionEnabled = NO; 
    ```

2.  在 xib 文件中 - 您可以取消选中“突出显示调整图像”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:25:55.270

尝试在 UIButton 的类参考中找到的 showTouchWhenHighlighted

# c# - 切换/案例到策略模式

> ID：10649906
> 
> 赞同：2
> 
> 时间：2012-05-18T09:18:22.013
> 
> 标签：c#

我有一个巨大的 switch/case 语句，我想用策略模式替换它。每个语句都有很大的代码执行特定的逻辑。有没有人有在这种情况下使用该模式的好例子，或者你有任何其他好的解决方案？

到目前为止我的解决方案

```
class Context
{
    private readonly List<CalculationUnit> _calculationsUnits;

    public Context()
    {
        _calculationsUnits = new List<CalculationUnit>()
                                 {
                                     new CalculationUnitA("calc1"),
                                     new CalculationUnitB("calc2"),
                                     new CalculationUnitC("calc2")
                                 };
    }

    public int Calculate(string name)
    {
        return (from c in _calculationsUnits where c.Name.Equals(name) select c.Calculate()).FirstOrDefault();
    }
}

class CalculationUnit
{
    public string Name { get; private set; }

    public CalculationUnit(string name)
    {
        Name = name;
    }

    public virtual int Calculate()
    {
        return 0;
    }
}

class CalculationUnitA : CalculationUnit
{
    public CalculationUnitA(string name) : base(name) { }

    public override int Calculate()
    {
        //calculations logic A
    }
}

class CalculationUnitB : CalculationUnit
{
    public CalculationUnitB(string name) : base(name) { }

    public override int Calculate()
    {
        //calculations logic A
    }
}

class CalculationUnitC : CalculationUnit
{
    public CalculationUnitC(string name) : base(name) { }

    public override int Calculate()
    {
        //calculations logic A
    }
} 
```

但是我最终会得到 50 个类来实现每个逻辑......

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T09:23:08.010

[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)通过将每个分支中的大段代码重构为单独的类（或方法）来提供帮助。然后，您的 switch 就变成了选择适当策略类（或方法委托）的简单情况，然后在 switch 语句的末尾通过一次调用执行。因此大致是这样的：

```
switch (...)
{
    case ...:
        // Horrible logic;
        break;
    ...
} 
```

变成这样：

```
ILogicImplementer implementer;
switch (...)
{
    case ...:
        implementer = new FirstCaseImplementer();
        break;
    ...
}
implementer.Implement(); 
```

您需要将逻辑重构为一系列实现公共接口（或扩展公共基类）的类，或一系列具有兼容签名的方法，以便您的策略可以选择匹配的委托。正如 Oded 在他的评论中暗示的那样，您不一定会摆脱`select`这样做，但每个案例都会变得更小。

从您的简短描述来看，这听起来确实是使您的代码更简单、更易于维护的适当方法。

# image-processing - 使用网格网格进行图像变换的边界条件

> ID：10649914
> 
> 赞同：2
> 
> 时间：2012-05-18T09:18:56.217
> 
> 标签：image-processing, numpy

我使用 转换了图像`meshgrid`，但新坐标部分超出了原始图像的范围，导致转换失败。

首先我使用剪辑

```
...
tX = numpy.clip(tX.astype(numpy.int),0,image.w)
tY = numpy.clip(tY.astype(numpy.int),0,image.h)
result image([tX,tY]) 
```

这导致类似于“最近”边界条件的效果。

我希望所有外部像素都是黑色的。我认为我可以通过在网格网格上使用布尔数组来实现这一点，但我不知道如何将布尔数组正确应用于网格网格。

```
tXbool = numpy.abs(tX) < image.w
tXbool.shape
(850, 1280)
tX[tXbool].shape
(193180,) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:59:24.670

您应该始终将逆变换应用于*目标*图像中的像素，并使用它来查找源图像中的（插值）颜色/值。否则你最终会遇到漏洞和量化问题。这是参考，或在任何图像处理教科书中查找图像转换/扭曲：[http ://www.cs.clemson.edu/~dhouse/courses/405/notes/image-warps.pdf](http://www.cs.clemson.edu/~dhouse/courses/405/notes/image-warps.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T15:56:33.437

好吧，我最后就是这样做的：

```
tXbool = (0 < tX) & (tX  < image.w )
tybool = (0 < tY) & (tY  < image.h )
outliers = tXbool & tybool

mask = where(outliers,1,0)
mask4channels = dstack([mask,mask,mask])
image = image*mask4channels 
```

# c# - 我们可以在 mvvm 中应用存储过程吗？有道理的解释

> ID：10649917
> 
> 赞同：0
> 
> 时间：2012-05-18T09:19:16.527
> 
> 标签：c#, wpf, mvvm

在这里，我对存储过程感到困惑。在这里，我们将所有与数据库相关的操作应用到代码中：

```
string query = "insert into accounts(name, opening_balance, category, address, contact_person, phone_number) values("
                                + "'" + account.Name + "',"
                                + account.OpeningBalance + ","
                                + account.Category.Id + ","
                                + "'" + account.Address + "',"
                                + "'" + account.ContactPerson + "',"
                                + "'" + account.PhoneNumber + "')";
            account.Id = SQLiteHelper.ExecuteInsert(query); 
```

我们可以在存储过程中应用它吗？如果是这样：如何？存储过程比它有什么优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:24:50.617

MVVM 与您的 SQL 问题无关。

基本上，您不应该将值串在一起形成 SQL 表达式，因为它允许最终用户注入 SQL 代码。IE。*真是个坏主意*。

存储过程使您可以更好地控制参数并避免注入攻击。它还允许您在不更改调用 C# 代码的情况下进行细微更改，例如，如果数据库发生轻微更改。

不幸的是，SQLite 似乎不支持存储过程，因此您可能希望改变您的方法。看看这个链接：[http ://www.sqlite.org/whentouse.html](http://www.sqlite.org/whentouse.html)

如果您必须坚持使用 SQLite，而不是使用 SQL CE，您将需要在代码中添加验证检查以确保不插入 SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:08:33.767

1.  您应该检查 sql 中插入的值以避免 sql 注入。
2.  数据访问代码不应该在视图模型中。它应该在模型中。

# android - Android 如何在 Edittext 中获取选定的单词？

> ID：10649920
> 
> 赞同：6
> 
> 时间：2012-05-18T09:19:24.417
> 
> 标签：android, android-edittext, highlight

我正在开发像记事本这样的应用程序，我想在其中动态更改选定的文本格式（颜色、更改字体样式、粗体、斜体、下划线等）。如何格式化特定单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:30:16.790

`getSelectionStart()`您可以使用and方法获取所选单词`getSelectionEnd()`：

```
EditText etx=(EditText)findViewById(R.id.editext);

int startSelection=etx.getSelectionStart();
int endSelection=etx.getSelectionEnd();

String selectedText = etx.getText().substring(startSelection, endSelection); 
```

* * *

然后，您可以在按钮单击/其他事件上将其带到**SpannableStringBuilder**后，通过在完整字符串中使用此选定子字符串来应用您的特定格式**：**

 **## 格式化文本的代码：

```
 int startSelection=etx.getSelectionStart();
  int endSelection=etx.getSelectionEnd();

                  final SpannableStringBuilder sb = new SpannableStringBuilder(etx.getText().toString());

                        final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text bold
                        final StyleSpan iss = new StyleSpan(android.graphics.Typeface.ITALIC); // Span to make text italic                                     
                        sb.setSpan(iss, startSelection, endSelection, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
                        sb.setSpan(bss, startSelection, endSelection, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
                        etx.setText(sb); 
```

* * *

[参考](https://stackoverflow.com/questions/4897349/android-coloring-part-of-a-string-using-textview-settext)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:30:01.417

```
EditText et1=(EditText)findViewById(R.id.edit);

int startSelection=et.getSelectionStart();
int endSelection=et.getSelectionEnd();

String selectedText = et1.getText().substring(startSelection, endSelection); 
```

希望此代码适合您的情况**

# android - 游戏状态管理 Android？

> ID：10649924
> 
> 赞同：0
> 
> 时间：2012-05-18T09:19:34.297
> 
> 标签：android

在 Windows phone 中，我发现了一个非常有用的游戏状态管理示例代码[http://create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)。它包含一个带有一些基本屏幕的骨架，例如：主菜单、游戏屏幕、选项屏幕......

Android中是否有类似的示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:39:48.687

有一些开源框架通过提供创建菜单/功能/显示的简单方法来简化工作。

几个著名的：AndEngine、rokon 或 libgdx。

只需谷歌“Android 游戏框架”并选择一个。请注意许可证，有一些非自由框架。可以免费使用，但如果您想分发/销售您的应用程序，则需要付费。

# c# - 当某些应用程序完全安装或卸载时，有什么方法可以得到通知

> ID：10649925
> 
> 赞同：1
> 
> 时间：2012-05-18T09:19:37.010
> 
> 标签：c#

我正在尝试使用 WMI win32_product 类获取完全安装/卸载的应用程序的通知。在c#中有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:20:56.463

如果您自己编写安装程序，那么您可以控制卸载时发生的情况。够了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:33:13.690

Im sorry, but im pretty sure you can't. WMI is just a database of information about your computers inventory. If an application is installed successfully or not, totally depends on the installer used by the Application.

If the installer is corrupt, it would still report that the installation went fine, but the program actually does'nt work.

Microsoft Installers (MSI) is quite reliable, since it has a rollback function. If an error occurs during the installation, the installer will roll back all the changes it has made so far, and therefore wont be shown in WMI.

Hope this cleared it up a little.

------ EDIT

Actually, depending on the scope of your project.. You could write a installer wrapper (havent done it before myself, but should be doable).

Almost any well known installers (MSI, Installshield etc.), all returns a result code, when its done executing.

If you wrote an application that executed the installer, you would be able to retrieve the result code, and by that know if the installation were success. A successfull installation usually returns 0.

But for this to work, you must make sure that all installations is executed by your wrapper, and not directly, and again, it is not 100% reliable because it still depends on the installer.

Just a thought

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:23:42.473

我认为您只需要调用安装/卸载文件`Process.Start`并等到它结束

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:24:53.243

对于一般统计信息以及安装/卸载，您可以使用[DeskMetrics](http://deskmetrics.com/)，它也有免费选项。

# ruby - ruby 脚本到 telnet 切换

> ID：10649933
> 
> 赞同：1
> 
> 时间：2012-05-18T09:20:34.157
> 
> 标签：ruby, telnet, cisco

我创建了以下 ruby​​ 脚本，可以远程登录到 Cisco 设备，远程登录到 Cisco 设备并运行命令“show int status err”。

```
require 'net/telnet'

C3550_20_PterraEst = "192.168.244.20" #Enter the IP address here

USER = "user" #Enter username here

PASS = "password" #Enter password here

ENABLE = "password" #Enter enable password here

print "Selezionare il piano [0-1-2-All]: ";

# get the input from the console, 
val1 = gets;
tn = Net::Telnet::new("Host" => C3550_20_PterraEst,
"Timeout" => 5,
"Prompt" => /Username/ )
tn.cmd("\n#{USER}") 
tn.cmd(PASS) 
tn.cmd("sh int status err\n") { |c| print c }
exit 
```

现在我希望那些 Cisco 设备输出（当我发送“show int status err”时）应该分配给我的脚本中的一个变量......我解释得更好：

假设命令“show int status err”返回这个值：

内部 fa0/20 内部 fa0/25

我想做一些事情，比如... variable1 = 'Int fa0/20,Int fa0/25' 然后在我的脚本中使用 variable1 。

我可以用女巫的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:49:45.797

我认为你想要做的不是：

```
tn.cmd("sh int status err\n") { |c| print c } 
```

反而：

```
response = tn.cmd("sh int status err\n") 
```

根据 NET::Telnet 上的文档， Telnet#cmd 返回响应。如果你将它传递给一个块，它也会产生对该块的响应，但是如果你想将响应存储在一个变量中，我的示例是最好的方法。

如果您还想打印对 STD 的响应，您应该能够同时执行这两项操作，如下所示：

```
response = tn.cmd("sh int status err\n") { |c| print c } 
```

但是，如果 tn.cmd("sh int status err\n") { |c| print c } 给你一个错误，我的解决方案可能无法正常工作，直到你弄清楚它为什么会产生错误。如果您需要帮助排除故障，您应该将其添加到评论中。

综上所述，如果您希望您的脚本生成额外的命令来响应 telnet 响应，您可能需要考虑使用`[expect][1]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:28:38.403

在这一行`tn.cmd("sh int status err\n") { |c| print c }`c 是命令的返回值，但由于它是一个局部变量，它存在于该块中。您可以使用[实例变量](https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Variables_and_Constants#Instance_Variables)来包含它，这将允许您在块外使用它。

# java - android 布局文件中无法识别自定义 XML 属性

> ID：10649934
> 
> 赞同：3
> 
> 时间：2012-05-18T09:20:35.840
> 
> 标签：java, android, android-custom-view

我正在使用这个小部件[https://github.com/erikwt/PullToRefresh-ListView](https://github.com/erikwt/PullToRefresh-ListView)并想做一些改变。我已经定义了 attrs.xml 以便能够从 XML 定义中控制文本的颜色等。但是我的自定义属性没有被识别（错误是：在包'eu.erikw'中找不到属性'ptrContainerBackground'的资源标识符）。我已经使用了在其他库项目中定义的自定义视图，到目前为止一切正常。你能帮忙解决问题吗？

这是我的 attrs.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<declare-styleable name="eu.erikw.PullToRefreshListView">
    <attr name="ptrContainerBackground" format="integer"/>
    <attr name="ptrArrow" format="integer"/>
    <attr name="ptrTextColor" format="integer"/>
    <attr name="ptrTextSize" format="integer"/>
</declare-styleable>    
</resources> 
```

这是布局文件中的视图定义：

```
<eu.erikw.PullToRefreshListView xmlns:ptr="http://schemas.android.com/apk/res/eu.erikw"
        android:id="@+id/lv_transactionsList"
        ptr:ptrTextColor="@color/text_white_color"
        ptr:ptrContainerBackground="@color/text_white_color"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:divider="@drawable/transactions_list_divider"
        android:dividerHeight="1dip"
        android:cacheColorHint="@color/stations_finder_item_bg">
</eu.erikw.PullToRefreshListView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T11:46:47.537

1）尝试清理您的项目，并再次构建，和/或

2）检查是否`eu.erikw`是正确的包

> xmlns:ptr="http://schemas.android.com/apk/res/eu.erikw"

这应该是

> xmlns:ptr="http://schemas.android.com/apk/res/your_package_name

其中 your_package_name 是您在`AndroidManifest.xml`

3) 不要在

> 声明样式名称="eu.erikw.PullToRefreshListView">

因为这会使在 Java 代码中检索 attrs 变得困难。

# asp.net-mvc - ASP.NET MVC 3 查看保存变量而不使用 HTML

> ID：10649937
> 
> 赞同：0
> 
> 时间：2012-05-18T09:20:42.533
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html

这是我在 ASP.NET MVC3 中的 Create.cshtml 的代码片段。我不知道如何将 DateAdded 保存为 DateTimeNow。我使用 CRUDE 创建新记录。我已经尝试删除下面的代码并将其替换为 DateTimeNow（系统时间）而不显示下面代码中的文本框和标签：

```
<div class="editor-label">
    @Html.LabelFor(model => model.DateAdded)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.DateAdded)
    @Html.ValidationMessageFor(model => model.DateAdded)
</div> 
```

* * *

这是我的 Create.cshtml 片段

```
@model PhoneBook.Models.Contact

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
<fieldset>
    <legend>Contact</legend>
    <div class="editor-label">
        @Html.LabelFor(model => model.DateAdded)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DateAdded)
        @Html.ValidationMessageFor(model => model.DateAdded)
    </div>

  <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:23:03.557

您应该`DateTime.Now`在控制器中给出值：

```
[HttpPost]
public ActionResult Foo(Contact model)
{
    model.DateAdded = DateTime.Now;
    ...
    ...
} 
```

或者，如果您希望日期时间在呈现时出现在页面中：

```
[HttpGet]
public ActionResult Foo()
{
    Contact model = new Contact{ DateAdded = DateTime.Now};

    return View(model);
} 
```

# php - SQL中自动增加两个字段？

> ID：10649939
> 
> 赞同：0
> 
> 时间：2012-05-18T09:20:44.343
> 
> 标签：php, sql

我想知道是否有办法自动增加同一张表中的两列。

我有带有 user_id 的数据库，所以每个注册用户都会有他唯一的 nr。但我想添加一个 file_id 以便用户上传的每个文件都有一个唯一的编号。

有小费吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:26:01.460

为确保您的数据库正确规范化，您应该将文件上传存储在单独的表中。

这意味着一个用户有可能拥有多个文件，并允许表正确地增加文件记录的标识字段。

您可以在 Wikipedia 上阅读有关数据库规范化的信息： [http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:29:07.053

No, only one identity column per table is allowed.

if you are using SQl Server follow this:

If your second field is static (you dont have to edit and it follows a sinmple logic to generate its value) what you can do is create the second field as a calculated one, for example:

```
create table autoINC(
field1 int identity(1,1),
field2 as field1+1,
real_field varchar(50))

insert into autoINC values('test')
select * from autoINC 

1   2   test 
```

if you need to update your second field, then you need to use a trigger

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:28:46.900

我认为您可以根据数据库使用触发器或类似的解决方案。

在 MSSQL 中，更新触发器应该可以工作。

但这并不能确保文件名的唯一性，除非文件名还包括用户 ID。

您是否有理由需要 fileid 为每个用户按顺序排列？

如果没有，请在文件表中添加一个 userid 字段，并在其中有一个单独的 fileid 标识列。

# java - 从子类外部访问父类的受保护方法（使用反射或任何可行的方法）

> ID：10649940
> 
> 赞同：3
> 
> 时间：2012-05-18T09:20:46.647
> 
> 标签：java, testing, reflection, junit, powermock

我四处寻找没有运气的解决方案，这就是我所拥有的以及我正在努力实现的目标

**家长班**

```
public abstract class MyAbstractParentClass{
     private String privateParentField;

     protected String getPrivateParentField(){
          return privateParentField;
     }

     public void setField(String value){
          privateParentField = value;
     }
} 
```

**儿童班**

```
public class MyChlidClass extends MyAbstractParentClass{
     @Override
     public void setField(String value){
          super.setField(value);
     }
} 
```

我正在尝试调用`MyChlidClass`'`setField`方法，然后调用`MyAbstractParentClass`'`protected String getPrivateParentField()`后记；

```
@Test
public void f(){
    Method[] m = MyChlidClass.class.getDeclaredMethods();
    for (Method method : m) {
        System.out.println(method.getName());
    }
} 
```

但是上面的这段代码只返回`MyChlidClass`没有父类的声明方法`protected`，我怎么能访问受保护的方法？有任何想法吗？

非常感谢你:)

**编辑** 这是感兴趣的人的最终解决方案

```
MyChildClass child = new MyChildClass();
chlid.setField("FOO_BAR");

Method getPrivateParentField = child.getClass().getSuperclass().getDeclaredMethod("getPrivateParentField");
getPrivateParentField.setAccessible(true);

String result = (String) getPrivateParentField.invoke(child);
System.out.println((String)result); //prints out FOO_BAR 
```

PS：有一些例外你可以捕捉或添加它们的抛出声明；

再次感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T09:30:54.300

您可以通过调用获取超类方法

```
MyChlidClass.class.getSuperclass().getDeclaredMethods(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:25:35.433

您可以在扩展类时增加可见性。您不需要更改 MyChlidClass 的代码，您可以扩展它：

```
public class MyGrandChlidClass extends MyChlidClass{

     @Override
     public String getPrivateParentField(){
          return super.getPrivateParentField();
     }
}

@Test
public void f(){
    MyGrandChlidClass myGrandChlidClass = new MyGrandChlidClass();
    myGrandChlidClass.setField("hello");
    System.out.println(myGrandChlidClass.getPrivateParentField());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:30:37.017

您不能直接从外部类访问受保护的方法。它只能从类内部或继承的类中访问。要从外部访问它，您必须在子类中创建一个公共方法，该方法调用父类的受保护方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:34:23.107

在父类上使用`getDeclaredMethods()`以获取有关父类的受保护方法的信息。

# objective-c - Phonegap iOS 自定义上下文菜单

> ID：10649944
> 
> 赞同：2
> 
> 时间：2012-05-18T09:21:06.823
> 
> 标签：objective-c, ios, cocoa, cordova

我正在为 iOS 开发一个 phonegap 应用程序，想在选择文本后显示的上下文菜单中插入一个新选项。我看了几篇非常相关的帖子，几乎所有帖子都指向了[这个链接](http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/)。我按照该示例的说明进行操作，但由于缺乏使用 Objective-c 的经验，无法使其工作。即便如此，我不确定这是否是使用 Cordova/Phonegap 的有效解决方案，至少在没有破解框架的情况下。有人完成了这个任务吗？

# android - Android 不自动完成或微调

> ID：10649947
> 
> 赞同：1
> 
> 时间：2012-05-18T09:21:11.490
> 
> 标签：android, android-widget

我的 android 应用程序中有相关的输入文本字段。

用户首先输入一个父值（使用自动完成文本）

对于相关的子文本条目，我尝试了微调器和自动完成文本。

微调器显示现有值，这是一个好的开始，但是我需要用户也能够输入新值。一旦用户添加了新值，这将被合并到屏幕后续视图的下拉列表中。

用户可能不知道所有可用值，因此自动完成不能满足我的要求，因为您必须知道列表中已有的内容才能为您提供帮助。

我觉得微调器是我的子文本输入字段的最佳起点。

如何在微调器中启用文本输入？

这个问题的“最佳”解决方案是什么？

# javascript - 带有 jQ uery 的动态 html 表

> ID：10649950
> 
> 赞同：0
> 
> 时间：2012-05-18T09:21:33.720
> 
> 标签：javascript, jquery, html, dynamic

如何**用**jQuery 在 JS 上做动态 html 表格？例如，我必须有 6 个按钮：

*   添加行开始表格；
*   将行添加到中间；
*   将行添加到末尾；
*   删除第一行；
*   删除中间行；
*   删除最后一行；

**升级版：**

那是我的 JS：

```
$(document).ready(function(){
        $('#addFirstPosition').click(function(){
            var $tr = $('<tr><td>3</td><td>3</td></tr>');
            //var $myTable = $('#myTable');
            //$myTable.append($tr);
            $("#myTable > tbody").append($tr);
        );
        }); 
```

这是我的html：

```
<input id="addFirstPosition" type="button" value="AddFirst" />
<input id="addMiddlePosition" type="button" value="AddMiddle" />
<input id="addLastPosition" type="button" value="AddLast" />
<br />
<input id="deleteFirstPosition" type="button" value="DelFirst" />
<input id="deleteMiddlePosition" type="button" value="DelMiddle" />
<input id="deleteLastPosition" type="button" value="DelLast" />
<br />
<br />
<table id="myTable" border="1px">
    <tbody>
        <tr>
            <td>
                1
            </td>
            <td>
                1
            </td>
        </tr>
        <tr>
            <td>
                2
            </td>
            <td>
                2
            </td>
        </tr>
    </tbody>
</table> 
```

当我单击按钮时，没有任何反应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T09:28:37.743

按照你问这个问题的格式，通过 $(tr); 搜索行。然后使用

```
.append(); for adding to the last
.prepend(); for adding to the first
select an elemnt by doint $(tr).eq(index).after() to add in between 
```

在你选择了你可以做的行之后

```
var r = $(tr).eq(index) 
```

删除你可以做

```
r.remove() 
```

无论您的行在哪里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T12:52:01.180

您的 js 代码中有错误：

```
$(document).ready(function() {
    $('#addFirstPosition').click(function() {
        var $tr = $('<tr><td>3</td><td>3</td></tr>');;
        $("#myTable > tbody").append($tr);
    });// I WAS MISSING A } BEFORE );
});​ 
```

括号丢失或位置错误。上面的代码已更正，我对错误进行了评论。

[演示在这里](http://jsfiddle.net/J6kwP/)

但是[Parv Sharma](https://stackoverflow.com/a/10650041/829835)在他/她的回答中有一些优点。

# ffmpeg - 如何从 HTML 浏览器上播放的视频中解复用音频并将其复用回去播放

> ID：10649952
> 
> 赞同：1
> 
> 时间：2012-05-18T09:21:38.657
> 
> 标签：ffmpeg, html5-video, video-processing, video-encoding, html5-audio

我有一个要求，我可以从 html 浏览器中播放的视频中解复用音频，并希望对音频应用一些效果，然后再复用此更改来播放视频。任何人都可以向我指出正确的来源或示例，这将是非常大的帮助。

问候 symadept

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:32:47.537

可以使用ffmpeg [http://ffmpeg.org/或 gstreamer。](http://ffmpeg.org/)

# php - 从平面数组创建新的多维数组 - 目录路径 - PHP

> ID：10649953
> 
> 赞同：0
> 
> 时间：2012-05-18T09:21:39.313
> 
> 标签：php, arrays, recursion

希望有人可以在这里为我指明正确的方向...

我有一个 unix grep 的目录路径和部分文件输出。我有一个来自这些输出的平面数组。现在我想做一点 PHP 魔术，把这个平面数组变成一个层次更高的多维数组，以便更精细的用户输出

当前数组；

```
array(7) {
  [0]=>
  string(160) "/home/user/data/section1/dir1/20120107/filename.txt:random text after the colon"
  [1]=>
  string(160) "/home/user/data/section1/dir1/20120108/filename.txt: More random text after the colon"
  [2]=>
  string(160) "/home/user/data/section1/dir2/20120107/filename.txt: More random text after the colon"
  [3]=>
  string(160) "/home/user/data/section1/dir2/20120108/filename.txt: More random text after the colon"
  [4]=>
  string(160) "/home/user/data/section1/dir3/20120107/filename.txt: More random text after the colon"
  [5]=>
  string(160) "/home/user/data/section1/dir3/20120106/filename.txt: More random text after the colon"
  [6]=>
  string(160) "/home/user/data/section1/dir3/20120108/filename.txt: More random text after the colon"
} 
```

我真正想要的

```
array(1) {
    array(3) {
        ["dir"]=>
        string(4) "dir1"
        ["date"]=>
        string(8) "20120107"
        ["text"]=>
        array (2) {
          [0]=>
          string(160) "random text after the colon"
          [1]=>
          string(160) "More random text after the colon"
          }
    }
    array(3) {
        ["dir"]=>
        string(4) "dir1"
        ["date"]=>
        string(8) "20120108"
        ["text"]=>
        array (2) {
          [0]=>
          string(160) "More random text after the colon"
          [1]=>
          string(160) "More random text after the colon"
          }
    }
    array(3) {
        ["dir"]=>
        string(4) "dir2"
        ["date"]=>
        string(8) "20120107"
        ["text"]=>
        array (2) {
          [0]=>
          string(160) "More random text after the colon"
          [1]=>
          string(160) "More random text after the colon"
          }
    }
} 
```

我已经尝试了很多 foreach 的 SPL 迭代器方法，但我只是没有胜出。寻找任何指导。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:34:35.750

此代码（使用`for`循环）：

```
<?php
$data[] = "/home/user/data/section1/dir1/20120107/filename.txt:random text after the colon";
$data[] = "/home/user/data/section1/dir1/20120108/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir2/20120107/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir2/20120108/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir3/20120107/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir3/20120106/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir3/20120108/filename.txt: More random text after the colon";

for($i = 0; $i < count($data); $i++) {
    $data[$i] = str_replace('/home/user/data/section1/','',$data[$i]);
    $tmp = explode('/', $data[$i]);

    $newData[$i] = array(
        'dir' => $tmp[0],
        'date' => $tmp[1]
    );

    $tmp = explode(':', $tmp[2]);

    $newData[$i]['fileName'] = $tmp[0];
    $newData[$i]['text'] = $tmp[1];
}

print_r($newData);
?> 
```

或者这段代码（使用`foreach`循环）：

```
<?php
$data[] = "/home/user/data/section1/dir1/20120107/filename.txt:random text after the colon";
$data[] = "/home/user/data/section1/dir1/20120108/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir2/20120107/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir2/20120108/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir3/20120107/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir3/20120106/filename.txt: More random text after the colon";
$data[] = "/home/user/data/section1/dir3/20120108/filename.txt: More random text after the colon";

foreach($data as $d) {
    $tmp = explode('/', str_replace('/home/user/data/section1/','',$d));
    $tmp2 = explode(':', $tmp[2]);

    $newData[] = array(
        'dir' => $tmp[0],
        'date' => $tmp[1],
        'filename' => $tmp2[0],
        'text' => $tmp2[1]
    );
}

print_r($newData);
?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [dir] => dir1
            [date] => 20120107
            [fileName] => filename.txt
            [text] => random text after the colon
        )

    [1] => Array
        (
            [dir] => dir1
            [date] => 20120108
            [fileName] => filename.txt
            [text] =>  More random text after the colon
        )

============ more data here ============

    [6] => Array
        (
            [dir] => dir3
            [date] => 20120108
            [fileName] => filename.txt
            [text] =>  More random text after the colon
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:26:38.943

在第一个数组上创建一个 foreach 并 preg_match() 为要从每个字符串中提取的信息的元素。

```
foreach( $firstArray => $strElement )
{
   $newArray[] = array();

   if( preg_match( "~(?<=section1/)[.-\w]*~i", $strElement, $astrMatches) >= 1 )
     $newArray['dir'] = $astrMatches[0];
   ...etc...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:26:49.900

[用“/”分解](http://in3.php.net/manual/en/function.explode.php)每个路径字符串。之后你会得到一个数组。然后在数组中推送所需的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:49:39.883

```
function magic($array_of_strings)
{
    define('REGEX','_^/home/user/data/section1/(dir\d+)/(\d+)/filename.txt:(.*)$_');
    $ret_array = array();

    foreach($array_of_strings as $string) {
        if (preg_match(REGEX, $string, $matches)) {
            $ret_array []= array(
              'dir'=>$matches[1],
              'date'=>$matches[2],
              'text'=>$matches[3],
            );
        }
    }
    return $ret_array;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T10:14:03.110

好的，这将完成这项工作，只要最后两个目录保持相同的顺序，您就可以随意更改目录结构`/dir/date`。

您可以将任意数量的字符串添加到`text`数组的部分，方法是在 URL 后用多个冒号分隔它们。例如`/blah/dir/date/filename.txt : string 1 : string 2`。

必须调用您的原始数组`$array`。

享受：

```
foreach ($array as $string) {
   $temp = array();
   $temp["strings"] = explode(':', $string); //Convert the string into an array using `:` as a seperator
   $temp["path"] = explode('/', $temp["strings"][0]); //Convert the url into an array using `/` as a seperator (each directory is it's own entry)
   $path_count = count($temp["path"]); //Count number of directories in the url
   $output = array(
      "dir" => $temp["path"][$path_count - 3],
      "date" => $temp["path"][$path_count - 2],
      "text" => array()
   );
   foreach ($temp["strings"] as $index => $value) { //Loop through and add any additional text to array
      if ($index) {
         array_push($output["text"], trim($value));
      }      
   }
   print_r($output);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T13:34:48.737

感谢大家的输入和脚本。实际上，我已经从这些脚本中学到了很多关于将数据按摩到多维数组中的知识。不幸的是，他们都没有完全按照我的意愿工作。我在研究这个问题时学到的一件事是，“还有另一种呈现数据的方法吗？” 在这种情况下，我找到了它。一个 shell 脚本，用于搜索所有文件，输出文件名，然后是相关文本。

```
find /home/user/data/section1 -name 'filename.txt' | xargs grep -il texttxet | 
   while read file 
       do
          echo "$file"
          grep -i  -A 4 texttxet "$file" 
       done

File:/home/user/data/section1/dir1/20120107/filename.txt
line1
line2
line3

File:/home/user/data/section1/dir1/20120108/filename.txt
line1
line2

File:/home/user/data/section1/dir2/20120108/filename.txt
line1
line2 
```

从这一点开始，我可以轻松地在数组中获取此信息。再次感谢大家

# google-app-engine - SEARCH API：将文档添加到索引

> ID：10649957
> 
> 赞同：0
> 
> 时间：2012-05-18T09:21:51.740
> 
> 标签：google-app-engine, gae-search

到目前为止，我一直在成功地为我的应用程序使用 Search API。我昨天能够成功地将文档添加到索引中。

但是当我今天尝试执行相同的操作时，它给了我这个例外。

**例外：**

引起：java.lang.NoSuchMethodError: com.google.appengine.api.search.Index.add(Ljava/lang/Iterable;)Lcom/google/appengine/api/search/AddDocumentsResponse;

我正在尝试仅将一个文档添加到索引中并且它不起作用。请给我解决这个问题的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:56:37.173

此问题可能与已弃用**AddDocumentResponse的**[app-engine 1.6.6 预发行版](https://groups.google.com/forum/?hl=en&fromgroups#!topic/google-appengine/8zmSKSYJC_o)的外观相关。

 **也许在您使用此预发行版部署版本之后，新文档的插入将正常工作。

(*) 对我来说，它适用于 1.6.5 sdk 中的旧代码。**

# dojo - 在 OpenSocial 小工具中使用 Dojo 网格

> ID：10649972
> 
> 赞同：0
> 
> 时间：2012-05-18T09:23:07.283
> 
> 标签：dojo, grid, opensocial, apache-shindig

我尝试在 opensocial 小工具中使用 dojo 网格，框架总是尝试从
[http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/../获取 DataGrid.js dojox//grid/DataGrid.js](http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/../dojox//grid/DataGrid.js)，它失败了。

但在普通的 html 中，我的应用程序运行良好，它可以从
[http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojox//grid/DataGrid.js](http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojox//grid/DataGrid.js)获取 DataGrid.js 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:42:38.290

OpenSocial 限制了跨域请求的使用。我相信常见的解决方法是像这样通过他们的代理进行中继；

```
<script src="http://api.msappspace.com/proxy/relay.proxy?opensocial_url=http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-props="async:true"></script> 
```

# java-me - j2me 中的 java.lang.nullpointerexception

> ID：10649974
> 
> 赞同：1
> 
> 时间：2012-05-18T09:23:12.667
> 
> 标签：java-me, nullpointerexception, smartcard, apdu, mifare

我正在编写一个读取 mifare 卡的应用程序，但是当我通过 APDU 时，在模拟器“java.lang.nullpointerexception”上发生错误。我已经成功检测到 ISO14443_CARD 之后我通过了 APDU

```
if (tp.hasTargetType(TargetType.ISO14443_CARD)){
  form.append("Target is ISO14443_CARD\n");

 try { 
            static byte[]   APDU_AUTH1 = { (byte) 0xff, (byte) 0x86, (byte) 0x00, (byte) 0x00, (byte) 0x05,(byte)0x01,(byte)0x00,(byte)0xfc,(byte)0x60,(byte)0x00};
            static byte[]   STATUS_BYTE = {(byte)0x90,(byte)0x00}; 
        if(STATUS_BYTE == iso14443.exchangeData(APDU_LOAD_KEY))
        {
         String value1 = new String("Hai!");
         textfield1.setString(value1);
         form.append(textfield1);

        }
        else
        {
            String value1 = new String("Hello!");
             textfield1.setString(value1);
             form.append(textfield1);
        }

     } 
    catch (Exception ex) { 
        form.append(ex.toString()); 
        } 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:40:57.847

`iso14443`或`textfield1`对象中的任何一个都可能为空。

通过您调试事物的方式（非常聪明的顺便说一句，我的祝贺），您可以按如下方式记录检查：

```
form.append("\n\n iso14443 is null: [" + (iso14443 == null)
        + "],\n textfield1 is null: [" + (textfield1 == null) + "]"); 
```

# word-wrap - 在没有自动换行的 iframe 中显示文本/纯文本？

> ID：10649975
> 
> 赞同：2
> 
> 时间：2012-05-18T09:23:32.147
> 
> 标签：word-wrap

当我在 iframe 中显示文本文件（文本/纯文本）时，它始终处于自动换行模式（没有水平滚动条） 如何在没有自动换行的 iframe 中显示文本文件？

# jquery - JQuery OptGroup alpha 排序

> ID：10649981
> 
> 赞同：2
> 
> 时间：2012-05-18T09:24:07.137
> 
> 标签：jquery, html

我有以下标记：-

```
<select name="List1" id="l1">
<option>One</option>
<option>Two</option>
<option>Three</option>
<option>Bob</option>
<option>Four</option>
<option>Five</option>
<option>Alyn</option>
</select> 
```

和下面的jQuery： -

```
$('#l1 option:nth-child(n+5)').wrapAll('<optgroup label="Group 1">'); 
```

这导致四五和 Alyn 出现在名为 Group 1 的 optgroup 中。

我希望按字母顺序对结果进行排序，但在应用了 optgroup 之后。

因此，前四个结果应按字母顺序排序，而 optgroup 中的最后 3 个结果应按字母顺序排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:50:55.273

[http://jsfiddle.net/xGENn/16/](http://jsfiddle.net/xGENn/16/)

```
$('#sort').click(function() {

    var $options = $('#l1 option:nth-child(n+5)');
    $options.sort(function(a, b) {
        return $(a).text().localeCompare($(b).text());
    });
    $options.wrapAll('<optgroup label="Group 1">');

    $options = $('#l1').children('option');
    $options.sort(function(a, b) {
        return $(a).text().localeCompare($(b).text());
    });
    $('#l1').prepend($options).val($("#l1 option:first").val());
});

​ 
```

# macos - 在 OS X Lion Server 的 Server App/Server Admin/Workgroup Manager 中创建大量用户帐户

> ID：10649984
> 
> 赞同：0
> 
> 时间：2012-05-18T09:24:31.983
> 
> 标签：macos, osx-lion

我正在尝试通过 Mac Mini 上的 OS X Lion Server 管理 iOS 设备。

现在我需要在 Server App 中创建 100 多个用户帐户。如果有任何方法可以做到这一点，而无需一个一个地创建每个帐户？写剧本？

[http://manuals.info.apple.com/en_US/UserMgmt_v10.6.pdf](http://manuals.info.apple.com/en_US/UserMgmt_v10.6.pdf) 根据这个文件，账户的导出文件是一个XML文件。但是我找不到在哪里以有效的方式创建或编辑此文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:37:13.917

如果您使用的是 Open Directory（您可能应该使用该数量的用户），那么一种选择是使用`dscl`它可能更容易自动化。Apple Discussions 中有一个[线程](https://discussions.apple.com/message/9448669#9448669)描述了如何将用户添加到组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T15:11:45.100

Workgroup Manager（[服务器管理工​​具包](http://support.apple.com/downloads/#server%20admin%20tools)的一部分）可以通过一些工作导入制表符分隔的文本文件。当您进行导入时，您需要告诉它文件的格式——记录和字段分隔符是什么（通常是换行符和制表符），然后是每个字段包含的数据。有关该过程的示例，请参阅[此视频。](http://vimeo.com/15050876)

如果您需要设置文件中没有的属性，您可以选择所有导入的帐户并一次为所有帐户设置属性（视频显示为主目录位置执行此操作），或者（如果您在进行导入之前考虑一下）使用相关设置创建一个模板帐户，将其保存为预设（WGM 窗口底部有一个弹出菜单），然后在导入对话框中选择该预设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T19:04:57.567

尝试使用乘客[http://macinmind.com/?area=app&app=passenger&pg=info](http://macinmind.com/?area=app&app=passenger&pg=info)

如果您有超过 20 个用户，您可能想以 60 美元的价格购买它，或者按照我的做法将它们按 20 个用户分组并运行 5 次。

# wpf - WPF ListBox ItemTemplate 图像

> ID：10649987
> 
> 赞同：0
> 
> 时间：2012-05-18T09:24:47.870
> 
> 标签：wpf

我想将图像添加到 ListBox 项。

我有 2 张图片。一个是上箭头，第二个是下箭头

我可以使用 ItemTemplate 分配初始图像说 UpArrow 并将图像添加到它

但是单击排序按钮，我想更改图像。新图像已设置但未在 UI 上更改。

**我的窗口代码如下**

```
<Window x:Class="WpfApplication1.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
Title="Window1" Height="Auto" Width="Auto" Loaded="Window_Loaded">
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources>
<Grid Height="Auto" Width="Auto">
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>
    <ListBox x:Name="lstBox" ItemsSource="{Binding ListIconDataCollection}" Grid.Row="0" Height="200" Width="200">
        <ListBox.ItemTemplate>
            <DataTemplate DataType="{x:Type local:ListIconData}">
                <Grid Width="Auto" Height="Auto" Background="Transparent" >
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Stretch" Text="{Binding DisplayText}"/>
                    <Image  Grid.Row="0" Grid.Column="1" Source="{Binding Path=ImageSource}" Width="20" HorizontalAlignment="Right"/>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
    <Button Name="btnSort" Grid.Row="1" Height="40" Margin="0,15,0,0" Content="Sort" Click="btnSort_Click"></Button>

</Grid> 
```

**我的表格代码如下**

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        lstDataToSet.Add(new ListIconData { DisplayText = "Milind", ItemSortDirection = SortDirection.None, ImageSource = (ImageSource)FindResource("ImgUp") });
        lstDataToSet.Add(new ListIconData { DisplayText = "Patil", ItemSortDirection = SortDirection.None });

        lstBox.ItemsSource = ListIconDataCollection;
    } 
```

**这是正在执行的表单代码，但 UI 上的图像没有改变**

```
private void btnSort_Click(object sender, RoutedEventArgs e)
    {
        ListIconData objSelectedItem = (ListIconData)lstBox.SelectedItem;
        if (objSelectedItem.ItemSortDirection==SortDirection.None)
        {
            objSelectedItem.ImageSource = null;
            objSelectedItem.ImageSource = (ImageSource)FindResource("ImgDown");

        }

    } 
```

**这是 Dictionary1 资源文件代码**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<ImageSource x:Key="ImgUp">icons/Up.ico</ImageSource>
<ImageSource x:Key="ImgDown">icons/Down.ico</ImageSource> 
```

**以下是 ListIconDataClass。这是我绑定到 ListBox 的列表**

```
public class ListIconData
{
    public string DisplayText { get; set; }
    public SortDirection ItemSortDirection { get; set; }
    public ImageSource ImageSource { get; set; }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:26:56.013

正如 nikeee13 建议的那样，您应该发送有关模型类更改的通知

```
public class ListIconData : INotifyPropertyChanged
{
    #region INotifyPropertyChanged implementation

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion

    public string DisplayText { get; set; }
    public SortDirection ItemSortDirection { get; set; }

    private ImageSource imgSource;
    public ImageSource ImageSource { 
        get{return imgSource;} 
        set{
              if(imgSource == null || !imgSource.Equals(value))
              {
                 imgSource = value;
                 OnPropertyChanged("ImageSource");
              }
           } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:29:20.107

```
private void btnSort_Click(object sender, RoutedEventArgs e)
    {
        **lstBox.BeginInit();**
        ListIconData objSelectedItem = (ListIconData)lstBox.SelectedItem;
        if (objSelectedItem.ItemSortDirection==SortDirection.None)
        {
            objSelectedItem.ImageSource = null;
            objSelectedItem.ImageSource = (ImageSource)FindResource("ImgDown");
        }
        **lstBox.EndInit();**

    } 
```

**请找到我添加的粗体**代码行以使其正常工作谢谢大家的帮助

# sql - SQL多对多选择与链接表

> ID：10649988
> 
> 赞同：2
> 
> 时间：2012-05-18T09:24:49.077
> 
> 标签：sql, search, stored-procedures, many-to-many, sql-match-all

我正在尝试使用以下 3 个表格使我的关键字搜索尽可能高效：

**tblImageFiles** [ID, ImageURL]

**tblTags** [ID,标签]

**tblxImagesTags** [ID, ImageID, TagID] （这是一个链接表，以多对多的关系加入上述内容）

任何人都可以通过存储过程帮助我返回与基于此模式输入的所有搜索标签匹配的所有图像吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:33:06.247

中的数字`count(distinct aux.TagID)`必须等于 中的标签数`where t.Tag in (tag1, tag2, tag3)`。

```
select img.* from tblImageFiles img
inner join (
   select it.ImageID from tblTags t
   inner join tblxImagesTags it on it.TagID = t.ID
   where t.Tag in (tag1, tag2, tag3)
   group by it.ImageID
   having count(distinct it.TagID) = 3
) aux on aux.ImageID = img.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:32:04.940

```
 SELECT tblImageFiles.ImageURL
          FROM tblImageFiles
  WHERE EXISTS (SELECT 1
                  FROM tblxImagesTags
            INNER JOIN tblTags
                    ON tblTags.ID = tblxImagesTags.TagID
                 WHERE tblxImagesTags.ImgageID = tblImageFiles.ID
                   AND tblTags.Tag = <searchtag1>)
    AND EXISTS (SELECT 1
                  FROM tblxImagesTags
            INNER JOIN tblTags
                    ON tblTags.ID = tblxImagesTags.TagID
                 WHERE tblxImagesTags.ImgageID = tblImageFiles.ID
                   AND tblTags.Tag = <searchtag2>)
                // etc... 
```

派生表可以分离出来，但其语法取决于您使用的数据库。您还需要运行一个循环以确保您可以处理可变数量的搜索词，但这是基本思想。

# php - 我想使用 jquery 从数据库中验证用户名

> ID：10649992
> 
> 赞同：-2
> 
> 时间：2012-05-18T09:25:02.843
> 
> 标签：php, javascript, jquery, html

我希望当用户从字段中输入用户名时，它会从 process.php 进行验证，并在验证后将结果显示在名称字段的前面。我希望当用户从 contry 中选择 uk 时，它显示英国城市，如果选择印度，则显示印度城市如何使用 jquery 以及如果任何字段 eppty 显示错误

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
<head>
    <title>JQuery Form Example</title> 
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#myform").validate({
            debug: false,
            rules: {
                name: "required",
                email: {
                    required: true,
                    email: true
                }
            },
            messages: {
                name: "Please let us know who you are.",
                email: "A valid email will help us get in touch with you.",
            },
            submitHandler: function(form) {
                // do other stuff for a valid form
                $.post('process.php', $("#myform").serialize(), function(data) {
                    $('#results').html(data);
                });
            }
        });
    });
    </script>
    <style>
    label.error { width: 250px; display: inline; color: red;}
    </style>
</head>
<body>
<form name="myform" id="myform" action="" method="POST">  
<!-- The Name form field -->
    <div id='name'> </div>
    <label for="name" id="name_label">Username</label>  
    <input type="text" name="name" id="name" size="30" value=""/>  
    <br>
<!-- The Email form field -->
    <div id='email'> </div>
    <label for="email" id="email_label">Email</label>  
    <input type="text" name="email" id="email" size="30" value=""/> 
    <br>
<!-- The Country form field -->
    <div id='Select_option'> </div>
    <label for="country" id="country_label">Contry</label>  
<select name="contry">
<option value="uk">uk</option>
<option value="india">india</option>
</select>

    <br>
<!-- The Country form field -->
    <div id='uk_city'> </div>
    <label for="ukcity" id="ukcity_label">uk city</label>  
<select name="uk_city">
<option value="u0">u0</option>
<option value="u1">u1</option>
</select>

    <br>
<!-- The Country form field -->
    <div id='ind_city'> </div>
    <label for="indcity" id="indcity_label">ind city</label>  
<select name="ind_city">
<option value="i0">i0</option>
<option value="i1">i1</option>
</select>

    <br>

<!-- The Submit button -->
    <input type="submit" name="submit" value="Submit"> 
</form>
<!-- We will output the results from process.php here -->
<div id="results"><div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:32:40.427

First, most validation should be done i js to save server roundtrips for easy things like empty fields or invalid input (letters in an age field).

Then use ajax to validate the form returning a json object containing either success = true or success = false along with an array with objects indicating which fields are in error and what the error is.

You could avoid posting the form bu using $.ajax command instead and only sending the fields you need to validate.

Also remember to not trust js validation, only server side validation is immune to tampering.

Normally you create a server side session where you set logged in to true to prevent the user to bypass login bu going directly to specific page.