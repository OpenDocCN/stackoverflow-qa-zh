# StackOverflow 问答 10124000-10124999

# asp.net-mvc - 使用枚举并将其传递到我的 Web 服务中

> ID：10124001
> 
> 赞同：0
> 
> 时间：2012-04-12T12:55:46.373
> 
> 标签：asp.net-mvc, wcf

我有一个 ASP.NET MVC 解决方案和一个用于数据访问的 WCF 服务。在我的 WebUI 中，我有一些这样的枚举：

```
public enum CompanyColumsEnumViewModel
{
    CompanyName,
    CompanyPostCode,
    CompanyCity
} 
```

这个枚举允许我根据特定列执行搜索。例如：在 CompanyPostCode 字段中搜索“2000”。

当用户提交搜索公式时，我调用我的服务并传递几个参数，如下所示：

```
var companies = _requestServiceClient.GetCompanies(term, column); 
```

其中 term = '2000' 和 column = 'CompanyPostCode'

**我的问题是**什么是最好的：

*   将列作为 Web 服务中的枚举传递？(1)

*   在我的 Web 服务中将列作为简单字符串传递？(2)

    (1) IEnumerable<Companies> GetCompanies(string term, CompanyColumsEnumViewModel 列)

    (2) IEnumerable<Companies> GetCompanies(string term, string column)

如果我使用枚举，我必须在两边声明这些枚举：一个在我的 WebUI 中，一个在我的 Web 服务中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:11:07.683

如果您的枚举是您的 ServiceContract 的一部分（因为它作为参数存在），那么您需要将其归因于`DataContract`：

```
[DataContract]
public enum CompanyColumsEnumViewModel
{
    [EnumMember]
    CompanyName,

    [EnumMember]
    CompanyPostCode,

    [EnumMember]
    CompanyCity
} 
```

然后，您可以在客户端的服务引用中发现这一点。我认为，这比字符串列更受欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:12:19.817

您可以在单独的文件中将您的枚举声明为正常。可以明确地为自定义对象提供已定义的数据协定和成员，但如果枚举作为 WCF 服务中的参数公开，则 WCF 足够智能，可以返回并将其序列化到 WSDL 本身。

这适用于所有类型。如果您有一个类作为 WCF 方法中的参数，并且该类将此枚举作为属性，则该类和枚举都将通过 WSDL 公开，并将在客户端上自动生成。

# jsp - 在浏览器中查找执行行

> ID：10124003
> 
> 赞同：0
> 
> 时间：2012-04-12T12:55:50.477
> 
> 标签：jsp, web-applications, internet-explorer-10

我有一个正在生产中的 Web 应用程序。它在 IE 10 浏览器上停止执行并且流程停止。即用户没有去，他得到一个空白屏幕。问题仅在于 IE10 浏览器。在所有其他浏览器中，我没有看到这个问题。有趣的是，这个问题只在生产系统中观察到。即它不会在我的本地环境中复制。因此我无法从代码中调试。我只能像任何外部用户一样访问在线系统。我想知道执行在 jsp 页面的哪一行停止。是否有任何工具可以告诉我在 IE 中执行的 jsp 中的行？

提前致谢，

穆吉布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:07:26.383

浏览器不执行 JSP。它由服务器处理，并将 HTML + 脚本标记发送到浏览器。服务器可以根据用户代理修改发送的标记。

你有 IE 10 预览版的调试插件吗？尝试按 F12 打开调试器。如果这不起作用，只需右键单击并查看源代码，以查看有多少标记（如果有）已发送到浏览器。

# ruby - 将哈希转换为 CSV

> ID：10124010
> 
> 赞同：0
> 
> 时间：2012-04-12T12:56:13.980
> 
> 标签：ruby, csv, hash, nokogiri, saxparser

我有一个 CSV，我喜欢在上面保存我所有的哈希值。我正在使用 nokogiri sax 解析 xml 文档，然后将其保存到 CSV。

萨克斯解析器：

```
require 'rubygems'
require 'nokogiri'
require 'csv'

class MyDocument < Nokogiri::XML::SAX::Document

  HEADERS = [ :titles, :identifier, :typeOfLevel, :typeOfResponsibleBody, 
              :type, :exact, :degree, :academic, :code, :text ]

  def initialize
     @infodata = {}
     @infodata[:titles] = Array.new([])
  end

  def start_element(name, attrs)
    @attrs = attrs
    @content = ''
  end
  def end_element(name)
    if name == 'title'
      Hash[@attrs]["xml:lang"]
      @infodata[:titles] << @content
      @content = nil
    end
    if name == 'identifier'
       @infodata[:identifier] = @content
       @content = nil
    end
    if name == 'typeOfLevel'
       @infodata[:typeOfLevel] = @content
       @content = nil
    end
    if name == 'typeOfResponsibleBody'
       @infodata[:typeOfResponsibleBody] = @content
       @content = nil
    end
    if name == 'type'
       @infodata[:type] = @content
       @content = nil
    end
    if name == 'exact'     
       @infodata[:exact] = @content
       @content = nil
    end
    if name == 'degree'
       @infodata[:degree] = @content
       @content = nil
    end
    if name == 'academic'
       @infodata[:academic] = @content
       @content = nil
    end
    if name == 'code'
       Hash[@attrs]['source="vhs"']
       @infodata[:code] = @content 
       @content = nil
    end
    if name == 'ct:text'
       @infodata[:beskrivning] = @content
       @content = nil
    end 
  end
  def characters(string)
    @content << string if @content
  end
  def cdata_block(string)
    characters(string)
  end
  def end_document
    File.open("infodata.csv", "ab") do |f|
      csv = CSV.generate_line(HEADERS.map {|h| @infodata[h] })
      csv << "\n"
      f.write(csv)
    end
  end
end 
```

为存储在文件夹中的每个文件（47.000xml 文件）创建新对象：

```
parser = Nokogiri::XML::SAX::Parser.new(MyDocument.new)
counter = 0

Dir.glob('/Users/macbookpro/Desktop/sax/info_xml/*.xml') do |item|
  parser.parse(File.open(item, 'rb'))
  counter += 1
  puts "Writing file nr: #{counter}"
end 
```

**问题：** 我没有为每组新值都换行。有任何想法吗？

**3个用于尝试代码的xml文件：https:** [//gist.github.com/2378898](https://gist.github.com/2378898) [https://gist.github.com/2378901](https://gist.github.com/2378901) [https://gist.github.com/2378904](https://gist.github.com/2378904)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:04:11.697

您需要使用“a”模式打开文件（使用“w”打开文件会清除之前的所有内容）。

将数组附加到 csv 对象将自动插入换行符。Hash#values 返回值的数组，但强制排序会更安全。展平数组可能会导致列未对齐（例如 [[:title1, :title2], 'other-value'] 将导致 [:title1, :title2, 'other-value']）。尝试这样的事情：

```
HEADERS = [:titles, :identifier, ...]

def end_document
  # with ruby 1.8.7
  File.open("infodata.csv", "ab") do |f|
    csv = CSV.generate_line(HEADERS.map { |h| @infodata[h] })
    csv << "\n"
    f.write(csv)
  end
  # with ruby 1.9.x
  CSV.open("infodata.csv", "ab") do |csv|
    csv << HEADERS.map { |h| @infodata[h] }
  end
end 
```

可以通过执行以下命令来验证上述更改：

```
require "csv"

class CsvAppender

  HEADERS = [ :titles, :identifier, :typeOfLevel, :typeOfResponsibleBody, :type,
              :exact, :degree, :academic, :code, :text ]

  def initialize
    @infodata = { :titles => ["t1", "t2"], :identifier => 0 }
  end

  def end_document
    @infodata[:identifier] += 1

    # with ruby 1.8.7
    File.open("infodata.csv", "ab") do |f|
      csv = CSV.generate_line(HEADERS.map { |h| @infodata[h] })
      csv << "\n"
      f.write(csv)
    end
    # with ruby 1.9.x
    #CSV.open("infodata.csv", "ab") do |csv|
    #  csv << HEADERS.map { |h| @infodata[h] }
    #end
  end

end

appender = CsvAppender.new

3.times do
  appender.end_document
end

File.read("infodata.csv").split("\n").each do |line|
  puts line
end 
```

运行上述信息后，infodata.csv 文件将包含：

```
"[""t1"", ""t2""]",1,,,,,,,,
"[""t1"", ""t2""]",2,,,,,,,,
"[""t1"", ""t2""]",3,,,,,,,, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:19:26.503

我猜你需要一个额外的循环。类似的东西

```
CSV.open("infodata.csv", "wb") do |csv|    
  csv << @infodata.keys
  @infodata.each do |key, value|
    csv << value
  end
end 
```

# jenkins - 身份验证失败：詹金斯部署

> ID：10124014
> 
> 赞同：2
> 
> 时间：2012-04-12T12:56:30.553
> 
> 标签：jenkins

我开始使用 jenkins，并且在部署项目时遇到了身份验证问题。我不知道在哪里写凭据。

```
Authentication failed: The host was not known and was not accepted by the configuration 
```

我在哪里可以写我的凭据？我在配置面板中看不到这一点。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:35:25.893

问题出现在 settings.xml 文件（在 .m2 中）上，该文件没有适当的登录名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T16:35:23.290

如果您使用 ssh 密钥进行身份验证，则可以使用这样的服务器部分：

```
<server>
 <id>repository-id</id>
   <username>john/username>
   <privateKey>/home/john/.ssh/id_rsa</privateKey>
</server> 
```

你仍然可能在詹金斯遇到麻烦。您可能必须在交互模式下运行一次 maven deploy 以接受例如 RSA 主机密钥。

# python - 我应该使用哪种数据结构进行地理编码？

> ID：10124015
> 
> 赞同：8
> 
> 时间：2012-04-12T12:56:33.147
> 
> 标签：python, openstreetmap, geocoding, large-data-volumes, large-data

我正在尝试创建一个 Python 脚本，该脚本将地址作为输入，并会吐出它的纬度和经度，或者在多个匹配的情况下吐出纬度和经度，就像[Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)一样。

因此，可能的输入和输出可能是：-

1.  *输入：*美国纽约*=> 输出：*纽约（纬度：x1 经度：y1）
2.  *输入：*纽约*=> 输出：*纽约（纬度：x1 经度：y1）
3.  *输入：*美国纽约珍珠街*=> 输出：*珍珠街（纬度：x2 经度：y2）
4.  *输入：*美国珍珠街*=> 输出：*珍珠街（纬度：x2 经度：y2），珍珠街（纬度：x3 经度：y3）
5.  *进：*珍珠街*=> 出：*珍珠街（纬度：x2 经度：y2），珍珠街（纬度：x3 经度：y3）
6.  *输入：* 103 Alkazam，纽约，美国*=> 输出：*纽约（纬度：x1 经度：y1）

在上面的 6 中，由于没有找到带有 address 的地方，所以返回了 New York `103 Alkazam, New York, USA`，但它至少可以找到`New York, USA`。

最初我想建立一个树来表示兄弟姐妹按字母顺序排序的层次关系。可能是这样的：-

```
 GLOBAL
                                       |
                   ---------------------------------------------
                   |            | ...
                  USA
             ---------------
             |        | ...
         CALIFORNIA  NEW YORK 
            |         |
     -----------    -------------
     |        |..   |          |....
 PEARL STREET      PEARL STREET 
```

但问题是用户可以提供不完整的地址，如 2、4 和 5。

因此，我接下来想到了使用搜索树并将完全限定的地址存储在每个节点中。但这也很糟糕，因为：-

*   这将在每个节点中存储高度冗余的数据。由于这将是一个非常大的数据，因此空间保护很重要。
*   它将无法利用用户缩小搜索空间的事实。

我还有一个*额外的要求*。我需要检测拼写错误。我想这必须作为一个单独的问题处理，并且可以将每个节点视为通用字符串。

**更新 1**

稍加阐述。输入将是一个列表，其中较低索引的项目是较高索引项目的父项；他们当然可能是也可能不是直接的父母或孩子。所以对于查询 1，输入将是`["USA", "NEW YORK"]`. `USA, New York`因此，不返回任何结果是完全可以的。

如果用户有地址并且我们的数据非常详细，他应该能够找到建筑物。

**更新 2（遗漏案例）**

如果用户查询`Pearl Street, USA`，那么我们的算法应该能够找到地址，因为它知道`Pearl Street`作为`New York`父地址并且`USA`是它的父地址。

**更新 3（盈余案例）**

假设用户查询`101 C, Alley A, Pearl Street, New York`. 还假设我们的数据确实知道`101 C`但不知道`Alley A`。根据它`101 C`是 的直系子女`Pearl Street`。即使在这种情况下，它也应该能够找到地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:19:33.667

感谢所有人的回答，他们的回答很有帮助，但并没有解决我需要的所有问题。我终于找到了一种处理我所有情况的方法。该方法是我在问题中建议的修改版本。

# 基本方法

在这里我将提到一个叫做“节点”的东西，它是一个类对象，它将包含地理信息，比如一个地方实体的纬度、经度，也可能是维度，以及它的完整地址。

如果实体的地址是“101 C, Pearl Street, New York, USA”，那么这意味着我们的数据结构将至少有四个节点：“101 C”、“Pearl Street”、“New York”和“美国'。每个节点都有一个`name`和一个`address`部分。对于“101 C”，`name`将是“101 C”，地址将是“Pearl Street, New York, USA”。

基本思想是拥有这些节点的搜索树，其中节点`name`将用作搜索的键。我们可能会得到多个匹配，所以稍后我们需要根据节点`address`与查询的匹配的好坏对结果进行排名。

```
 EARTH
                                      |
                ---------------------------------------------
                |                                           |
               USA                                        INDIA
                |                                           |
        ---------------------------                     WEST BENGAL
        |                         |                         |
     NEW YORK                 CALIFORNIA                 KOLKATA
        |                         |                         |
   ---------------            PEARL STREET              BARA BAZAR
   |             |                                          |
PEARL STREET   TIME SQUARE                                 101 C
   |             |
  101 C         101 C 
```

假设我们有一个如上的地理数据。因此，搜索“101 C, NEW YORK”不仅会返回“NEW YORK”中的“101 C”节点，还会返回“INDIA”中的节点。这是因为算法只会使用`name`'101 C' 来搜索节点。稍后我们可以通过测量节点`address`与查询地址的差异来对结果的质量进行评分。我们没有使用完全匹配，因为允许用户提供不完整的地址，就像在这种情况下一样。

# 评分搜索结果

要对结果的质量进行分级，我们可以使用[Longest Common Subsequence](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)。这个算法很好地处理了“遗漏”和“剩余”的情况。

最好让代码来说话。下面是为此目的量身定制的 Python 实现。

```
def _lcs_diff_cent(s1, s2):
    """
    Calculates Longest Common Subsequence Count Difference in percentage between two strings or lists.

    LCS reference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem.
    Returns an integer from 0-100\. 0 means that `s1` and `s2` have 0% difference, i.e. they are same.
    """
    m = len(s1)
    n = len(s2)

    if s1 == s2:
        return 0
    if m == 0: # When user given query is empty then that is like '*'' (match all)
        return 0
    if n == 0:
        return 100

    matrix = [[0] * (n + 1)] * (m + 1)
    for i in range(1, m+1):
        for j in range(1, n+1):
            if s1[i-1] == s2[j-1]:
                matrix[i][j] = matrix[i-1][j-1] + 1
            else:
                matrix[i][j] = max(matrix[i][j-1], matrix[i-1][j])

    return int( ( 1 - float(matrix[m][n]) / m ) * 100 ) 
```

# 优化方法

我放弃了上述（基本）方法，因为它强制冗余，并且它无法减少这样一个事实，即如果用户在他的查询中提供了“美国”，那么我们就不需要查看“印度”中的节点。

这种优化的方法在很大程度上解决了上述两个问题。解决方案不是拥有一棵大搜索树。我们可以将搜索空间划分为“美国”和“印度”。稍后我们可以进一步按状态重新划分这些搜索空间。这就是我所说的“切片”。

在下图中 -`SearchSlice`代表一个“切片”，并`SearchPool`代表一个搜索树。

```
 SearchSlice()
                                  |
            ---------------------------------------------
            |                                           |
        SearchSlice(USA)                           SearchSlice(INDIA)
            |                                           |
    ---------------------------                  SearchPool(WEST BENGAL)
    |                         |                   |
 SearchPool(NEW YORK)     SearchPool(CALIFORNIA)  |- KOLKATA
    |                         |                   |- BARA BAZAR, KOLKATA
    |- PEARL STREET           |- PEARL STREET     |- 101 C, BARA BAZAR, KOLKATA
    |- TIME SQUARE
    |- 101 C, PEARL STREET
    |- 101 C, TIME SQUARE 
```

上面需要注意的几个关键点...

*   每个切片只有一层深度。好吧，这在上面并不是很明显。
*   切片级别的名称不会出现在其子级的地址中。例如，`SearchSlice(USA)`在“美国”中维护一个州的切片。因此，“NEW YORK”下的节点在其`address`. 其他地区也一样。层次关系隐含地定义了完整地址。
*   '101 C'也`address`包括其父级`name`，因为它们没有被切片。

# 扩展可能性

哪里有桶（池），哪里就有隐含缩放的可能性。我们（比如说）将“美国”的地理数据分为两组。两者都可以在不同的系统上。因此，如果“NEW YORk”池在系统 A 上，而“CALIFORNIA”池在系统 B 上，则完全没问题，因为它们不共享任何数据，当然除了父母。

这是警告。我们需要复制始终是切片的父母。由于切片的数量是有限的，因此层次结构不会太深，因此复制它们不应该太冗余。

# 工作守则

请参阅我的 GitHub 以获取[有效的演示 Python 代码](https://github.com/applegrew/PyFlexiGeocode)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:15:33.683

如何使用键值存储映射和全文搜索。

*   位置字符串的键
*   location_level 和 lat&lon 数据的值。
*   搜索：
    *   将用户输入字符串拆分为单个位置的单词（不仅是逗号）
    *   搜索地图中的每个单词
    *   返回最小位置级别的纬度和经度

python.dict,memcached,mongodb .... 将满足您的需求。

*   如果你的位置词太多，将location_level拆分为新地图，两次搜索会加快
*   忘记位置级别，将其作为全文搜索
*   海量数据？短字符串或数字的哈希键

**需要考虑的一些问题：**

*   如何将数据存储在数据库中
*   如何从数据中初始化搜索树（如果有）
*   如何在运行时扩展/编辑搜索树
*   输入/存储容错
*   存储空间>速度？还是速度>存储？

所以，用户输入的更有**用的测试用例**

> ```
> 101 C, Time Square, New York, US
> 101 C, Pearl street, New York, US
> 
> 101 C, Time Square, SomeCity, Mars
> 101 C
> 101 C, US
> 101 C, New York, US
> 
> 101 C, New York, Time Square, US
> 
> North Door, 101 C, Time Square, New York, US
> South Door, 101 C, Time Square, New York, US 
> ```

**对于这种情况**：

*   快速处理海量数据；
*   完全容错；
*   通过存储和运行时间轻松调整

**最好的解决方案**：（也是最复杂的）

*   平面键值映射存储
*   全文检索
    *   或带有 B-tree 搜索的哈希键

您的程序/网站可能能够像谷歌一样快速运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:18:52.113

如果你尝试为这个问题创建一个数据结构，我认为你会有数据冗余。相反，您可以使用树/图并尝试实现一种搜索算法，该算法根据节点值搜索用户输入中的单词。*模糊*匹配可以帮助您生成最可能的结果，并且您可以根据相似度的置信度向用户建议/显示其中的前几个。

这也可以处理拼写错误等。

# jquery - Check if obect is jQuery wrapper

> ID：10124023
> 
> 赞同：-2
> 
> 时间：2012-04-12T12:57:08.143
> 
> 标签：jquery

> **Possible Duplicate:**
> [Check if object is a jQuery object](https://stackoverflow.com/questions/1853223/check-if-object-is-a-jquery-object)

I need something like:

```
function func(obj) {
    if (!$.isJQ(obj)) {
        obj = $(obj);
    }
    // ...
} 
```

Is there any `isJQ` function in jQuery?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:59:58.563

You can use the instanceof operator:

```
obj instanceof jQuery 
```

So, your code goes like :

```
function func(obj) {
    if (!(obj instanceof jQuery)) {
        obj = $(obj);
    }
    // ...
} 
```

# java - Eclipse MessageConsole 似乎被阻止 - 需要异步输出

> ID：10124027
> 
> 赞同：1
> 
> 时间：2012-04-12T12:57:23.957
> 
> 标签：java, eclipse

我想将程序的输出写入控制台，但在某种程度上控制台似乎被阻止/控制台在功能完成之前甚至没有显示。

这是一些示例代码，它显示了完全相同的行为：

```
public void startConsole() throws IOException { 
    long start = System.currentTimeMillis();
    MessageConsole console = new MessageConsole("TestConsole", null);
    ConsolePlugin.getDefault().getConsoleManager().addConsoles(new IConsole[] {console});
    ConsolePlugin.getDefault().getConsoleManager().showConsoleView(console);        
    MessageConsoleStream stream = console.newMessageStream();
    stream.setActivateOnWrite(true);        
    stream.println("Start: " + (System.currentTimeMillis()-start));
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    stream.println("End: " + (System.currentTimeMillis()-start));
} 
```

我得到了什么：函数运行了大约一秒钟，我看到了输出（“开始：0\n结束：1000”）

我想要什么：我启动该功能，并看到第一个输出（“开始：0”），一秒钟后，我希望将“结束：1000”添加到控制台。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:15:49.560

您将需要在新线程中运行该方法。

定义一个实现 java.lang.Runnable 的新类，它的 run() 方法完成了上面显示的事情。

然后，使用您定义的 Runnable 对象创建 java.lang.Thread 的实例。通过在线程实例上调用 start() 方法来调用线程来开始工作。

# google-docs-api - 使用 API 编辑谷歌文档的最佳方式是什么？

> ID：10124028
> 
> 赞同：4
> 
> 时间：2012-04-12T12:57:26.027
> 
> 标签：google-docs-api

我希望能够使用 Google App Engine 的 API 编辑任何类型的 Google 文档。我的目标是在编辑文档时丢失尽可能少的信息。编辑非常简单，就像替换一些单词一样。

*   文档

为了编辑它们，我在 HTML 中进行导出并再次导入。但是我们正在丢失一些信息，例如注释。标题也有问题，每次更新时每个标题之前的大小都会增加，所以我必须重置一些css。有没有更好的编辑文档的方法？

*   电子表格

有电子表格 API，所以我想我已经涵盖了。

*   介绍

我没有找到可以再次导出和导入的格式。唯一的似乎是powerpoint。但是 powerpoint 文件不容易编辑。

*   绘画

我没有找到可以导出和导入的格式。我尝试使用 SVG，但无法将 svg 导入回来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:39:54.787

**文档**

PDF 为您提供进出 Google Docs 的最佳保真度，而无需使用 MS Word 文件等专有或复杂格式的麻烦。

**电子表格**

只有专有或复杂的格式才能保证单元格颜色等内容的保真度。电子表格 API 只允许更新数据，但不允许格式化。

**介绍**

您是对的，PPTX 是唯一可以进出 Google 演示文稿的格式。

**绘画**

您是对的，没有可以进出 Google 绘图的导入格式。

# asp.net - 跨页发布。在 Asp.net 中使用 PreviousPage 是一个好习惯吗？

> ID：10124030
> 
> 赞同：3
> 
> 时间：2012-04-12T12:57:32.697
> 
> 标签：asp.net, cross-page-postback

我在 MSDN 上找到了这篇关于[跨页发布的文章](http://msdn.microsoft.com/en-us/library/ms178139.aspx)。

我从未使用过 Page.PreviousPage。但我认为它很有趣。

你用它吗？这是一个好的做法，还是一个坏主意？

你有什么想法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:40:45.157

跨页发布是一个助手，`post some data to a different page`并且仍然具有功能背后的 asp.net 代码。

为什么会存在这个？因为 asp.net 有一个限制`of one and only form per page`。但实际上对于一个 html 页面，您可以有许多表单和许多不同的帖子到不同的页面。

因此，为这种情况提供一个工具，是让您设置第二个页面来发布数据，然后在按钮上设置它（而不是通过放置第二个表单），然后从那里解决这个问题，将数据发布到不同的页面。

例如......没有asp.net和页面上的简单html你可以做到这一点。

```
<body>
<form method="post" action="samepage.html">
   Username: <input type="text" name="user" />
   <input type="submit" value="Submit" />
</form>

<form method="post" action="page_b.html">
   email for news letter: <input type="text" name="email" />
   <input type="submit" value="Submit" />
</form>
</body> 
```

为了解决这样的情况，并且因为 asp.net 不允许在同一页面上使用两个表单，所以给出了这个选项。

```
<body>
<form id="form1" runat="server">
Username: <asp:TextBox runat="server" ID="Name" />
<asp:Button runat="server"/>

email for news letter: <asp:TextBox runat="server" ID="email" />
<asp:Button runat="server" PostBackUrl="page_b.aspx" />

</form>
</body> 
```

在第二种情况下，您有一个表单，但您将 PostBackUrl 设置为不同的页面，并且从那里 asp.net 仍然直接在第二页上处理代码后面的数据（没有重定向）。

我希望这个例子能让你知道在哪里真正使用前一页。更常见的是重定向，在某些情况下您需要将结果发送到不同的页面。因此，无论您是否使用它，都要按情况进行。

# gridview - Extjs 3.0 网格过滤器，从商店加载选项

> ID：10124031
> 
> 赞同：0
> 
> 时间：2012-04-12T12:57:33.590
> 
> 标签：gridview, extjs, filter, header

我正在尝试使用 ExtJS 4 API - [Ext.ux.grid.filter.ListFilterView 源...](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ux.grid.filter.ListFilter)中介绍的数据存储（而不是硬编码列表）来实现 Ext.ux.grid.filter.ListFilter 。我在此列标题上看到了一个过滤器选项，但现在我想知道如何从商店加载选项？我用下面的代码尝试了它，但它不起作用。如果选项是硬编码的，则过滤器可以正常工作。

这是一些代码：

```
var tradeStore = new Ext.data.JsonStore({
        fields: ['tradegroup_id','tradegroup_name'],
        data: [
            { tradegroup_id: 1, tradegroup_name: '10 T-shirts' },
            { tradegroup_id: 2, tradegroup_name: '15 polo' },
            { tradegroup_id: 3, tradegroup_name: '60 Pants' },
            { tradegroup_id: 4, tradegroup_name: '62 Denim' } 
        ],
        autoLoad: {
            // this callback function is actually Ext js 4, how to convert it to Ext js 3?
            callback: function() {
                grid.getView().getHeaderCt().child('#Trademark').initialConfig.filter.options = tradeStore.collect('tradegroup_name'); 
            }
        }
    });

    _filtersPlugin = new Ext.ux.grid.GridFilters({
        encode: encode, // json encode the filter query
        local: local,   // defaults to false (remote filtering)
        filters: [
            {
                type: 'list',
                dataIndex: 'Trademark',
                options: [] 
                // options: ['10 T-shirts', '60 Pants']   // this is harcoded, I don't want this
                store: tradeStore

            },
        ] 
```

# gridview - 如何从gridview的headertemplate中的控件获取值？

> ID：10124032
> 
> 赞同：0
> 
> 时间：2012-04-12T12:57:36.173
> 
> 标签：gridview, drop-down-menu, controltemplate, radgrid

我有一个带有 headertemplate 和 itemtemplate 的 RadGrid (Telerik)[几乎与 gridview 相同]：

```
<telerik:GridTemplateColumn DataField="field" SortExpression="field">
     <HeaderTemplate>
          <asp:Label Width="100%" Text="<center>Field</center>" runat="server" />
          <asp:DropDownList runat="server" ID="ddlField" OnSelectedIndexChanged="ddlField_SelectedIndexChanged" AutoPostBack="true" Width="100%" />
     </HeaderTemplate>
     <ItemTemplate>
          <asp:Label ID="lblField" runat="server" Text="testert" />
     </ItemTemplate>
</telerik:GridTemplateColumn> 
```

同一个 radgrid 还有 2 个具有相同模板的其他列和 1 个带有按钮的列。现在，当用户在上面显示的下拉列表中选择一个值时，新项目将加载到其他 2 个项目模板中。但是当用户选择了他想要的值时，用户可以按下按钮。当用户按下按钮时，系统应添加一行，并将值作为标签。但是当按钮的 onClick 事件发生时，我找不到从 headertemplates 中的下拉列表中获取值的方法。谁能告诉我如何从按钮的 OnClick 事件访问 headertemplate 中下拉列表的选定值？

PS 我开发 ASP.NET/C#！

提前致谢！！

亲切的问候，韦斯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:07:53.787

您可以将每个下拉列表中的选定值存储到隐藏的表单字段中，然后在按钮 OnClick 上访问这些隐藏的表单字段吗？应启用表单视图状态。

# python - 使用 Mock 修补函数

> ID：10124033
> 
> 赞同：5
> 
> 时间：2012-04-12T12:57:43.167
> 
> 标签：python, unit-testing, mocking, patch

我有一个测试套件（使用nose，而不是unittest），我想修补一个函数来为测试类中的每个测试返回一个特定的值序列。我的第一次尝试，使用一个简化的例子，是：

```
@patch('time.clock', MagicMock(side_effects=[1, 2]))
class Tests:
    def test_1(self):
        assert time.clock() == 1
        assert time.clock() == 2

    def test_2(self):
        assert time.clock() == 1
        assert time.clock() == 2 
```

但是，MagicMock 实例只创建一次，所以当副作用用完时，第二次测试失败。我可以单独修补每个测试方法，但我真的不想在所有这些方法上复制补丁装饰器（有比这个例子中更多的测试！）我可以做的另一种方法是创建补丁设置代码如下：

```
class Tests:
    def setup(self):
        self.old_clock = time.clock
        time.clock = MagicMock(side_effects=[1, 2])

    def teardown(self):
        time.clock = self.old_clock

    def test_1(self):
        assert time.clock() == 1
        assert time.clock() == 2

    def test_2(self):
        assert time.clock() == 1
        assert time.clock() == 2 
```

但是保存和恢复原始函数定义似乎是 Mock 应该能够自动完成的事情。还有另一种我想念的方法吗？或者我的最后一个例子是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T08:57:22.370

```
a = (x for x in [1,2])

x = lambda : next(a)

x() 
```

出：1

```
x() 
```

出：2

将您的答案放入 a 的列表中。将 X 更改为您想要的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T08:50:41.410

您应该只将补丁应用于每个测试，而不是将其应用于类：

```
class Tests:
    @patch('time.clock', MagicMock(side_effects=[1, 2]))
    def test_1(self):
        assert time.clock() == 1
        assert time.clock() == 2

    @patch('time.clock', MagicMock(side_effects=[1, 2]))
    def test_2(self):
        assert time.clock() == 1
        assert time.clock() == 2 
```

# ruby - 在 Jenkins CI 中找不到 json-1.6.5

> ID：10124036
> 
> 赞同：0
> 
> 时间：2012-04-12T12:57:48.213
> 
> 标签：ruby, ruby-on-rails-3, rake, sinatra, jenkins

我有一个 Jenkins CI 服务器，当我运行以下构建脚本时出现错误：

```
rdoc spec 
```

这是错误：

```
/usr/bin/ruby1.9.1 -S rspec spec/requests/home_spec.rb
/home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/spec_set.rb:88:in `block in materialize': Could not find json-1.6.5 in any of the sources (Bundler::GemNotFound)
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/spec_set.rb:82:in `map!'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/spec_set.rb:82:in `materialize'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/definition.rb:90:in `specs'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/definition.rb:135:in `specs_for'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/runtime.rb:11:in `setup'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler.rb:117:in `setup'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler.rb:122:in `require'
    from /var/lib/jenkins/jobs/App1/workspace/config/boot.rb:10:in `<top (required)>'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from /var/lib/jenkins/jobs/App1/workspace/spec/spec_helper.rb:11:in `<top (required)>'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from /var/lib/jenkins/jobs/App1/workspace/spec/requests/home_spec.rb:1:in `<top (required)>'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `load'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `block in load_spec_files'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `map'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/configuration.rb:698:in `load_spec_files'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/command_line.rb:22:in `run'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:80:in `run_in_process'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:69:in `run'
    from /home/zeck/.rvm/gems/ruby-1.9.3-p0/gems/rspec-core-2.8.0/lib/rspec/core/runner.rb:10:in `block in autorun'
rake aborted! 
```

这是我的 Rakefile：

```
require 'rdoc/task'
require 'rspec/core/rake_task'

desc 'Generate test result'
RSpec::Core::RakeTask.new(:spec) do |t|
  t.pattern = 'spec/*/*_spec.rb'
end 
```

这是我的 Gemfile：

```
source :rubygems

# Required gems
gem 'sinatra', '>= 1.3.2'
gem 'rdoc', '>= 3.12'
gem 'rake'
gem 'json', '>= 1.6.5'

group :test do
  gem 'rspec', '>= 2.9.0'
  gem 'rack-test'
  gem 'simplecov', '>= 0.6.1', require: false
end 
```

我没有任何想法。请帮我。我将 Ruby 1.9.3 与 RVM 一起使用。

谢谢你的每一个建议。对不起英语不好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:31:03.473

可能原因是 Jenkins 运行构建的环境与运行构建的环境不同。

通常差异是由为您设置但不是为 Jenkins 设置的环境变量引起的

您可以通过运行命令来检查您的环境变量`env`。您可以在 Manage Jenkins -> System Information 中查看 Jenkins 的环境。

如果需要设置一些环境变量，可以在 Manage Jenkins -> Configure System 中进行。

# c++ - 无法理解代码片段的返回类型

> ID：10124042
> 
> 赞同：0
> 
> 时间：2012-04-12T12:58:09.623
> 
> 标签：c++, types, return

我很困惑为什么这个是对的。返回值是引用类型`int&`，但`h()`函数`int`在句中返回值类型`return x`。那么，`int`return 是如何变为 a 的`int &`呢？

这是代码片段，可以使用 C++ 编译器很好地编译。

```
int& h() {
 int q;
 static int x;
 return x;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:06:13.927

这将返回对 static 的引用`int`。函数在第`x`一次`h`调用时被初始化。像这样使用它：

```
int& href = h();
++href; // increments the static variable
int& href2 = h(); // another reference to the same static variable 
```

该变量`q`应该没有效果，我认为它是可疑的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:28:42.957

引用意味着您实际上实际上返回了相同的变量，因此更改返回的值将直接改变`x`If 代码已被编写的值：

```
int h()
{
    int q;
    static int x;
    return x;
} 
```

（即不是参考）然后您将返回值的*副本*`x`（尽管您应该公平地查看[Return Value Optimization](http://en.wikipedia.org/wiki/Return_value_optimization "返回值优化")。）返回参考是有效的，但是，有时（多线程是一个明显的例如）可能不受欢迎和令人困惑的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:32:41.707

`int&`是对 int 的引用。`x`是一个整数。因此`return x;`，从返回 an 的函数返回对`int&`的引用`x`。

还：

返回对*局部*变量的引用是危险的，因为局部变量在函数退出时被破坏。当您获得参考时，它所引用的东西并不存在。这被称为悬空引用，它就像一个不指向任何东西的指针。

静态变量不是局部变量，在函数退出时不会被销毁。因此，当你得到它时，引用仍然指向一个有效的对象。

# symfony1 - symfony 不能调用任何模块。配置？

> ID：10124044
> 
> 赞同：0
> 
> 时间：2012-04-12T12:58:11.677
> 
> 标签：symfony1, symfony-1.4

我设置了另一台计算机（Linux Mint 12）。无论有无frontend_dev.php，我都可以在浏览器中很好地调用我的项目索引。但我不能调用任何模块。就是说文件不存在。任何想法？

ServerAdmin webmaster@localhost

```
DocumentRoot /var/www
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory>

</VirtualHost>
 <VirtualHost *:80>
 ServerName localhost
 ServerAlias dev.project.com
 DocumentRoot /home/trunk/web
 DirectoryIndex index.php index.html index.htm
 Alias /sf "/home/trunk/symfony/data/web/sf"

<Directory /home/trunk/web>
AllowOverride All    
Options Indexes FollowSymLinks Includes ExecCGI    
Order allow,deny    
Allow from all    
</Directory>

<Directory /home/trunk/symfony/data/web/sf">
 AllowOverride All
 Allow from All
</Directory>

<Directory /home/trunk/symfony">
 AllowOverride All
 Allow from All
</Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:14:01.263

根据上面的评论，问题出在您的网络服务器上。我会检查：

*   您的 Apache 配置设置为允许 Path Info 内容（`AcceptPathInfo`设置为 以外的内容`Off`）。试试看`On`是否设置为`Default`
*   您的 Apache 配置设置为允许 .htaccess 文件（检查`AllowOverride`未设置为`None`并`AccessFileName`设置为`.htaccess`）
*   您在 Apache 构建中启用了 mod_rewrite（尝试从 .htaccess 中删除`<IfModule mod_rewrite.c>`和`</IfModule>`位。如果 mod_rewrite 不存在，Apache 将抛出 500 错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:10:04.403

您是否使用 Apache 作为 Web 服务器？

你[按照医生说的](http://www.symfony-project.org/getting-started/1_4/en/05-Web-Server-Configuration#chapter_05_sub_web_server_configuration)设置了吗？

那[呢`.htaccess`](http://svn.jobeet.org/trunk/web/.htaccess)？

# ios - 半屏选项是如何实现的

> ID：10124045
> 
> 赞同：0
> 
> 时间：2012-04-12T12:58:14.250
> 
> 标签：ios

我注意到像“whatsapp”这样的应用程序，如果你点击“告诉朋友”它会显示半屏选项按钮，我想知道这些半屏选项视图是如何实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:04:41.897

如果没有图像，我会说半视图是[UIActionSheet](http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/)。

# javascript - Body Background Image Rotation 应该支持动态的图片数量

> ID：10124046
> 
> 赞同：1
> 
> 时间：2012-04-12T12:58:21.803
> 
> 标签：javascript, jquery, html

我使用 jquery 幻灯片来旋转背景图像。但我的要求是，我必须根据具体的日子显示背景图像。我的意思是有时我必须像这样旋转一张图像，有时需要旋转 3 次，有时需要旋转 3 次以上。为此，我每次都必须更改脚本。如何在不更改脚本的情况下动态旋转背景图像。如果有人有解决方案，请建议我一些示例脚本。

```
var slideshowSpeed = 6000;
var photos = [
    {image1.png},
    {image2.png},
    {image3.png}
];
$(document).ready(function() {
    $("#back").click(function() {
        stopAnimation();
        navigate("back");
    });
    $("#next").click(function() {
        stopAnimation();
        navigate("next");
    });
    var interval;
    $("#control").toggle(function() {
        stopAnimation();
    }, function() {
        $(this).css({"background-image":"url(images/btn_pause.png)"});
        navigate("next");
        interval = setInterval(function() {
            navigate("next");
        }, slideshowSpeed);
    });
    var activeContainer = 1;
    var currentImg = 0;
    var animating = false;
    var navigate = function(direction) {
        if (animating) {
            return;
        }
        if (direction == "next") {
            currentImg++;
            if (currentImg == photos.length + 1) {
                currentImg = 1;
            }
        } else {
            currentImg--;
            if (currentImg == 0) {
                currentImg = photos.length;
            }
        }
        var currentContainer = activeContainer;
        if (activeContainer == 1) {
            activeContainer = 2;
        } else {
            activeContainer = 1;
        }
        showImage(photos[currentImg - 1], currentContainer, activeContainer);
    };
    var currentZindex = -1;
    var showImage = function(photoObject, currentContainer, activeContainer) {
        animating = true;
        currentZindex--;
        $("#headerimg" + activeContainer).css({"background-image":"url(images/" + photoObject.image + ")","display":"block","z-index":currentZindex});
        $("#headertxt").css({"display":"none"});
        $("#firstline").html(photoObject.firstline);
        $("#secondline").attr("href", photoObject.url).html(photoObject.secondline);
        $("#pictureduri").attr("href", photoObject.url).html(photoObject.title);
        $("#headerimg" + currentContainer).fadeOut(function() {
            setTimeout(function() {
                $("#headertxt").css({"display":"block"});
                animating = false;
            }, 500);
        });
    };
    var stopAnimation = function() {
        $("#control").css({"background-image":"url(images/btn_play.png)"});
        clearInterval(interval);
    };
    navigate("next");
    interval = setInterval(function() {
        navigate("next");
    }, slideshowSpeed);
}); 
```

我有上面的脚本。下面是我的 html

```
<div id="headerimgs">
    <div id="headerimg1" class="headerimg"></div>
    <div id="headerimg2" class="headerimg"></div>
    <div id="headerimg3" class="headerimg"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:19:58.850

您可以制作一个简单的 javascript 函数，该函数`var photos`根据当前日期返回。

```
function getPhotos() {
     var currentDate = new Date(),
         photos;

     if (currentDate === new Date("December 25, 2012")) {
         photos = [{ .... }];
     }
     return photos;
} 
```

您的代码将是：

```
 var photos = getPhotos(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:11:16.510

您可以使用

```
var d = new Date();
var n = d.getDay(); 
```

找出它是哪一天.. 对于图像旋转，我会推荐[raphael](http://raphaeljs.com/)库。这与大多数浏览器（Firefox 3.0+、Safari 3.0+、Chrome 5.0+、Opera 9.5+ 和 Internet Explorer 6.0+）兼容并且非常易于使用。

# c# - 如何以编程方式更改 rdlc 报告中的数据表

> ID：10124047
> 
> 赞同：1
> 
> 时间：2012-04-12T12:58:21.883
> 
> 标签：c#, database-connection, rdlc

我有以下问题。我制作了一个为我的一个客户生成 rdlc 报告的应用程序。我使用 TableAdapters 来填充我在这些报告中使用的 DataTables。问题是我的客户有一个新数据库，他希望能够使用该应用程序从旧数据库和新数据库生成报告。我认为可以更改我的 TableAdapters 使用的连接，以便他们只从我的客户端选择的数据库中获取数据（两个数据库具有相同的架构），但我被告知无法做到这一点。那么是否可以更改 rdlc 报告使用的 DataTable？我怎么解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:16:59.763

您可以使用以下代码在运行时将任何数据表分配给 rdlc。

```
 DataTable dtTest =obj.SelectDepartment(1);//Here I am selecting the data from DB

        this.reportViewer1.RefreshReport();
        reportViewer1.Visible = true;
        ReportDataSource rds = new ReportDataSource();
        reportViewer1.Reset();
        reportViewer1.ProcessingMode = ProcessingMode.Local;
        LocalReport rep = reportViewer1.LocalReport;
        rep.Refresh();

        rep.ReportEmbeddedResource = "Report.rdlc";//Provide full path
        rds.Name = "DataSet1_tblAdapter";//Provide refrerence to data set which is used to   design the rdlc. (DatasetName_TableAdapterName)
        rds.Value = dtTest;

        rep.DataSources.Add(rds);
        this.reportViewer1.RefreshReport(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:08:35.560

当然，动态更改报告的数据源应该没问题

```
 rptView.LocalReport.ReportPath = Server.MapPath("MyReportName")
  rptView.LocalReport.DataSources.Add(New ReportDataSource("DataSource", "ObjectSource")) 
```

对不起，代码是 VB.net，我知道你的问题被标记为 C#，但它应该足够相似

编辑：

如果你想要一些参数

```
 dim listOfParams = new List(of ReportParameter);
    listOfParams.Add(new ReportParameter("Param1", myValue.toString()))
    listOfParams.Add(new ReportParameter("Param2", myOtherValue.toString()))

    Me.rptView.LocalReport.GetParameters(listOfParams) 
```

只是直接编码，所以它很可能是 C# 和 VB.net 的混合体

# c++ - 编译器不警告精度损失？

> ID：10124049
> 
> 赞同：6
> 
> 时间：2012-04-12T12:58:26.700
> 
> 标签：c++, c++11, g++, compiler-warnings

我最近一直在玩 C++11，并想出了以下 sum 函数：

```
template <typename T>
inline T sum(const std::function<T (int)> &f, int initial, int end)
{
    T retval = 0;
    for(int k = initial; k <= end; k++) {
        retval += f(k);
    }
    return retval;
} 
```

这个想法是我可以传递一个 lambda 函数，从而为数学求和提供一个简洁易读的函数。然后我尝试了以下方法：

```
int main()
{
    std::array<double, 2> arr1 = {{ 0.5, 1.5 }},
                          arr2 = {{ 1.5, -0.5 }};
    auto n = sum<int>([&](int k) { return arr1[k]*arr2[k]; }, // Precision loss!
                      0, 1);
    return 0;
} 
```

我使用 g++ 4.6.3 编译了这个：`g++ -Wall -pedantic -std=c++0x -o test main.cpp`并且没有给出任何关于我在源代码注释中提到的精度损失的警告。

这几乎是给定的，这`sum<int>`是一件坏事，但在更复杂的环境中可能并不那么明显。编译器是否应该注意到我的 lambda 函数的返回值是`double`并警告我在转换为时我失去了精度`int`？有没有特定的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:21:31.643

似乎完全合理。您是在告诉编译器不要打扰模板参数推导（即使用`sum<double>`），而是明确告诉它使用`sum<int>`。这与显式演员表一样好。

[编辑] 怎么样

```
template <typename F>
auto sum(F const& f, int initial, int end) -> decltype(f(initial))
{
    auto retval = f(initial++);
    while(initial <= end) {
        retval += f(initial++);
    }
    return retval;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:28:00.180

VS11 确实发出警告：

警告 1 警告 C4189: 'n' : 局部变量已初始化但未引用
**警告 2 警告 C4244: '+=' : 从 'double' 转换为 'int'，可能丢失数据**

编辑，实际上该警告来自使用代码：

```
template <typename T,typename Func>
inline T sum(Func f, int initial, int end) 
```

如果你使用`std::function<T (int)>`，你会得到一个关于错误转换的不同警告，所以 VS 在这个问题上仍然很好。（IMO，您通常应该将仿函数作为模板类型而不是 std::function）

即使带有 -Weverything 的 clang 也不会对此发出警告（编辑：虽然我无法使用 clang ATM 测试 std::function 版本）。似乎可以改进的东西。

我确实收到了这个奇怪的警告：

```
ConsoleApplication1.cpp:15:51: warning: will never be executed [-Wunreachable-code]
    auto n = sum<int>([&](int k) { return arr1[k]*arr2[k]; }, // Precision loss!
                                                  ^~~~ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:20:06.827

如果您解除对函子的约束，并且将行更改`retval += f(k);`为`retval += T { f(k) };`以下方式：

```
// Machinery to allow caller to indifferently use
// sum(f, i, j) and sum<R>(f, i, j)
struct deduced {};

template<
    typename Request = deduced
    , typename Functor
    , typename Ret = typename std::conditional<
        std::is_same<Request, deduced>::value
        , typename std::result_of<Functor&(int)>::type
        , Request
    >::type
>
inline Ret sum(Functor f, int initial, int end)
{
    Ret retval = 0;
    for(int k = initial; k <= end; k++) {
        retval += Ret { f(k) };
    }
    return retval;
} 
```

然后，您不必依赖编译器发出警告的意愿，而是*需要*发出诊断信息，因为在列表初始化中不允许缩小转换（即使用大括号进行初始化）。

如果您将函子限制为`std::function<Sig>`. 这仅取决于实现的编写方式`std::function`，何时发出缩小转换的警告，甚至是否对自己的代码发出警告。

# c# - F# 中的代理 unicode 字符问题

> ID：10124058
> 
> 赞同：10
> 
> 时间：2012-04-12T12:58:48.707
> 
> 标签：c#, unicode, f#, surrogate-pairs

我正在使用字符串，它可能包含代理 unicode 字符（非 BMP，每个字符 4 个字节）。

当我使用“ *\Uxxxxxxxxv* ”格式在 F# 中指定代理字符时 - 对于某些字符，它给出的结果与 C# 不同。例如：

**C＃：**

```
string s = "\U0001D11E";
bool c = Char.IsSurrogate(s, 0);
Console.WriteLine(String.Format("Length: {0}, is surrogate: {1}", s.Length, c)); 
```

给出：`Length: 2, is surrogate: True`

**F＃：**

```
let s = "\U0001D11E"
let c = Char.IsSurrogate(s, 0)
printf "Length: %d, is surrogate: %b" s.Length c 
```

给出：`Length: 2, is surrogate: false`

注意：某些代理字符在 F# 中有效（“\U0010011”、“\U00100011”），但其中一些无效。

**问：这是 F# 中的错误吗？如何使用 F# 处理字符串中允许的代理 unicode 字符（F# 是否有不同的格式，或者只有使用的方法** `Char.ConvertFromUtf32 0x1D11E`**）**

**更新：**
`s.ToCharArray()`为 F# 提供`[| 0xD800; 0xDF41 |]`；对于 C#`{ 0xD834, 0xDD1E }`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T22:35:29.213

这是 VS2010（和 SP1）附带的 F# 编译器中的一个已知错误；该修复出现在 VS11 位中，因此如果您拥有 VS11 Beta 并使用 F# 3.0 编译器，您将看到此行为符合预期。

（如果这里的其他答案/评论在此期间没有为您提供合适的解决方法，请告诉我。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T13:34:20.010

这显然意味着 F# 在解析某些字符串文字时会出错。您提到的字符是非 BMP 的事实证明了这一点，并且在 UTF-16 中它应该表示为一对代理项。代理是 0xD800-0xDFFF 范围内的单词，而生成的字符串中的字符都不适合该范围。

但是代理的处理并没有改变，因为框架（引擎盖下的东西）是一样的。因此，您的问题已经有了答案 - 如果您的代码中需要带有非 BMP 字符的字符串文字，您应该只使用`Char.ConvertFromUtf32`而不是 \UXXXXXXXX 表示法。所有其余的处理都将与往常一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:23:01.897

在我看来，这与不同形式的规范化有关。在 C# 和 F# 中 s.IsNormalized() 返回 true 但在 C#

s.ToCharArray() 给我们 {55348, 56606} //0xD834, 0xDD1E

在 F# 中

s.ToCharArray() 给我们 {65533, 57422} //0xFFFD, 0xE04E

您可能知道 System.Char.IsSurrogate 是通过以下方式实现的：

```
 public static bool IsSurrogate(char c)
   { 
        return (c >= HIGH_SURROGATE_START && c <= LOW_SURROGATE_END); 
   } 
```

在哪里

```
 HIGH_SURROGATE_START = 0x00d800; 
   LOW_SURROGATE_END    = 0x00dfff; 
```

因此，在 C# 中，第一个字符 (55348) 小于 LOW_SURROGATE_END，但在 F# 中，第一个字符 (65533) 不小于 LOW_SURROGATE_END。

我希望这有帮助。

# objective-c - 传递变量，pushViewControll

> ID：10124059
> 
> 赞同：-1
> 
> 时间：2012-04-12T12:58:52.107
> 
> 标签：objective-c, ios, uinavigationcontroller, pushviewcontroller

我正在尝试使用地图功能构建一个简单的导航控制器。我正在尝试将两个变量从 Root 视图带到 Detail 视图。一个有标签，有经度。

我从 Root 获取值到 Detail'd 视图，但在日志中它说：

*   2012-04-12 14:38:41.331 地图[80073:11603] 长：0.000000
*   2012-04-1214:38:41.331 地图 [80073:11603] 标签
*   2012-04-12 14:38:41.331 地图[80073:11603] 长：62.375702

其中 long 是经度，标签应该是标签的变量。我只传递了一个“长”变量，但无论如何总是先得到 0.00000，这会使地图显示错误的位置，并且标签根本不会显示任何内容..

几个小时以来，我一直试图找出问题所在，但似乎在代码或网络上找不到任何东西，因此非常感谢任何帮助。

RootViewController.m：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

            NSString *term = @"Label";
            float longi1 = 100.102321;

 DetailViewController *svc = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]]; 

            //send properties to your view controller

             svc.term = term;
            svc.longi = longi1;

            //push it to the navigationController
           [self.navigationController pushViewController:svc animated:YES];
            [svc release];
            svc = nil;

        } 
```

DetailViewController.m：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view.

 NSLog(term);
        NSLog(@"long: %f", longi);
        coor.text = term; 
    float lati = 65.12414;

    CLLocationCoordinate2D coord = {.latitude = lati, .longitude = longi};
        MKCoordinateSpan span = {.latitudeDelta =  0.5, .longitudeDelta= 0.5};
        MKCoordinateRegion region = {coord, span};
        [mapView setRegion:region];
        [self.view addSubview:mapView];  
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:26:18.507

发生这种情况是因为`-initWithNibName:bundle:`将视图加载到内存中并导致`-viewDidLoad`在分配经度之前被调用。

`-viewDidLoad`尝试将代码移入`-viewWillAppear`

# python - Python Boto Dynamodb 对范围键的小记录集检索性能非常慢

> ID：10124062
> 
> 赞同：10
> 
> 时间：2012-04-12T12:59:11.603
> 
> 标签：python, performance, boto, amazon-dynamodb

我正在通过 boto 测试 dynamodb，发现它在检索基于 hashkey、rangekey 条件查询的数据集时速度非常慢。我已经看到一些关于导致 ssl (is_secure) 执行速度比非 ssl 快 6 倍的奇怪的讨论，我可以确认这一发现。但即使使用 ssl，我也看到在相当小的数据集（少于 1K 条记录）上使用 hashkey/range 键条件检索 300 条记录需要 1-2 秒。

运行 profilehooks profiler 我看到在 ssl.py 中花费了大量无关的时间，大约 20617 个 ncalls 来检索 300 条记录。似乎即使每条记录有 10 次调用，它仍然是我预期的 6 倍。这是在中型实例上 - 尽管在微型实例上会出现相同的结果。500 读取/秒 1000 写入/秒配置，没有记录限制。

我已经考虑过执行批处理请求，但无法使用范围键条件为我消除了该选项。

任何关于我在哪里浪费时间的想法将不胜感激！

```
 144244 function calls in 2.083 CPU seconds 
```

排序依据：累计时间、内部时间、通话次数

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.001    0.001    2.083    2.083 eventstream.py:427(session_range)
  107    0.006    0.000    2.081    0.019 dynamoDB.py:36(rangeQ)
  408    0.003    0.000    2.073    0.005 layer2.py:493(query)
  107    0.001    0.000    2.046    0.019 layer1.py:435(query)
  107    0.002    0.000    2.040    0.019 layer1.py:119(make_request)
  107    0.006    0.000    1.988    0.019 connection.py:699(_mexe)
  107    0.001    0.000    1.916    0.018 httplib.py:956(getresponse)
  107    0.002    0.000    1.913    0.018 httplib.py:384(begin)
  662    0.049    0.000    1.888    0.003 socket.py:403(readline)
20617    0.040    0.000    1.824    0.000 ssl.py:209(recv)
20617    0.036    0.000    1.785    0.000 ssl.py:130(read)
20617    1.748    0.000    1.748    0.000 {built-in method read}
  107    0.002    0.000    1.738    0.016 httplib.py:347(_read_status)
  107    0.001    0.000    0.170    0.002 mimetools.py:24(__init__)
  107    0.000    0.000    0.165    0.002 rfc822.py:88(__init__)
  107    0.007    0.000    0.165    0.002 httplib.py:230(readheaders)
  107    0.001    0.000    0.031    0.000 __init__.py:332(loads)
  107    0.001    0.000    0.028    0.000 decoder.py:397(decode)
  107    0.008    0.000    0.026    0.000 decoder.py:408(raw_decode)
  107    0.001    0.000    0.026    0.000 httplib.py:910(request)
  107    0.003    0.000    0.026    0.000 httplib.py:922(_send_request)
  107    0.001    0.000    0.025    0.000 connection.py:350(authorize)
  107    0.004    0.000    0.024    0.000 auth.py:239(add_auth)
 3719    0.011    0.000    0.019    0.000 layer2.py:31(item_object_hook)
  301    0.010    0.000    0.018    0.000 item.py:38(__init__)
22330    0.015    0.000    0.015    0.000 {method 'append' of 'list' objects}
  107    0.001    0.000    0.012    0.000 httplib.py:513(read)
  214    0.001    0.000    0.011    0.000 httplib.py:735(send)
  856    0.002    0.000    0.010    0.000 __init__.py:1034(debug)
  214    0.001    0.000    0.009    0.000 ssl.py:194(sendall)
  107    0.000    0.000    0.008    0.000 httplib.py:900(endheaders)
  107    0.001    0.000    0.008    0.000 httplib.py:772(_send_output)
  107    0.001    0.000    0.008    0.000 auth.py:223(string_to_sign)
  856    0.002    0.000    0.008    0.000 __init__.py:1244(isEnabledFor)
  137    0.001    0.000    0.008    0.000 httplib.py:603(_safe_read)
  214    0.001    0.000    0.007    0.000 ssl.py:166(send)
  214    0.007    0.000    0.007    0.000 {built-in method write}
 3311    0.006    0.000    0.006    0.000 item.py:186(__setitem__)
  107    0.001    0.000    0.006    0.000 auth.py:95(sign_string)
  137    0.001    0.000    0.006    0.000 socket.py:333(read) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T13:10:07.500

这不是一个完整的答案，但我认为此时值得发布它。

在过去的几周里，我从几个人那里听到了这样的报告。我能够重现 HTTPS 比 HTTP 快得多的异常，但无法追踪它。这个问题似乎是 Python/boto 独有的，但事实证明在 C#/.Net 上发现了同样的问题，并调查发现根本问题是在 Python 和 .Net 库中使用[Nagle 算法。](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)在 .Net 中，很容易将其关闭，但不幸的是，在 Python 中就没有那么容易了。

为了测试这一点，我编写了一个简单的脚本，循环执行 1000 个 GetItem 请求。正在提取的项目非常小，远低于 1K。在 us-east-1 区域的 m1.medium 实例上的 Python 2.6.7 上运行此程序会产生以下结果：

```
>>> http_data = speed_test(False, 1000)
dynamoDB_speed_test - RUNTIME = 53.120193
Throttling exceptions: 0
>>> https_data = speed_test(True, 1000)
dynamoDB_speed_test - RUNTIME = 8.167652
Throttling exceptions: 0 
```

请注意，表中有足够的预置容量来避免服务的任何限制，并且 HTTP 和 HTTPS 之间的意外差距很明显。

接下来我在 Python 2.7.2 中运行了相同的测试：

```
>>> http_data = speed_test(False, 1000)
dynamoDB_speed_test - RUNTIME = 5.668544
Throttling exceptions: 0
>>> https_data = speed_test(True, 1000)
dynamoDB_speed_test - RUNTIME = 7.425210
Throttling exceptions: 0 
```

所以，2.7 似乎已经解决了这个问题。然后我在 2.6.7 中对 httplib.py 应用了一个简单的补丁。该补丁只是设置与 HTTPConnection 对象关联的套接字的 TCP_NO_DELAY 属性，如下所示：

```
self.sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1) 
```

然后我在 2.6.7 上重新运行了测试：

```
>>> http_data = speed_test(False, 1000)
dynamoDB_speed_test - RUNTIME = 5.914109
Throttling exceptions: 0
>>> https_data = speed_test(True, 1000)
dynamoDB_speed_test - RUNTIME = 5.137570
Throttling exceptions: 0 
```

甚至更好，尽管使用 HTTPS 的时间仍然比 HTTP 更快。很难知道这种差异是否显着。

因此，我正在寻找以编程方式为 HTTPConnection 对象配置套接字以正确配置 TCP_NO_DELAY 的方法。在 httplib.py 中要做到这一点并不容易。如果可能的话，我目前最好的建议是使用 Python 2.7。

# android - 为快捷方式设置不同的图标/图像？

> ID：10124063
> 
> 赞同：0
> 
> 时间：2012-04-12T12:59:14.133
> 
> 标签：android, icons, shortcut

我已经编写了一个程序，可以在 android 模拟器主屏幕中创建我的应用程序的快捷方式。但问题是当我创建快捷方式时，它具有默认的 android 图标。我的问题是如何更改快捷方式的图标？

我使用以下行来设置图标

```
Intent j=new Intent();
j.putExtra(Intent.EXTRA_SHORTCUT_INTENT,i);     
j.putExtra(Intent.EXTRA_SHORTCUT_NAME,n);                                                   
j.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,R.drawable.icon);
j.putExtra ("duplicate", false);
j.setAction("com.android.launcher.action.INSTALL_SHORTCUT");   
sendBroadcast(j); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:23:57.670

你可以通过两种方式做到这一点。

> putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,resId);
> 
> putExtra（Intent.EXTRA_SHORTCUT_ICON，位图）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:08:27.063

该系统不在您的上下文中。因此，您需要提供更多详细信息才能向您发送图标。

见[https://github.com/ldo/ShortcutCircus_Android/blob/master/src/Activity2.java](https://github.com/ldo/ShortcutCircus_Android/blob/master/src/Activity2.java)

该图标由 给出：

```
Intent.ShortcutIconResource.fromContext(Activity2.this, R.drawable.icon) 
```

或者您可以解码位图并使用`EXTRA_SHORTCUT_ICON`。

# ruby-on-rails - 选择性活动记录

> ID：10124067
> 
> 赞同：0
> 
> 时间：2012-04-12T12:59:26.333
> 
> 标签：ruby-on-rails, activerecord

假设我有一张“用户”表。一个用户可以在我的表中存在 3 次（记录），处于 3 个不同的状态（state1、state2、state3）。首先将创建 state1，然后创建 state2，...如果 state3 存在，我不想再查看 state1 和 state2，但我必须将它们保留在我的表中，以备后用。所有 3 条记录都具有相同的 uuid。

如果我想收集所有用户，我不能使用 User.all （因为他会给我同一个用户的所有 3 个状态）。

在我的模型中有一个简短的解决方案吗？现在我正在收集所有 uuid，对于每个 uuid，我将检查哪个是最新状态，然后将这些记录放入一个数组中。这个数组的问题在于它只是一个“数组”，而不是一个 ActiveRecord 对象。

```
@uuid = []
@users = [] #will contain only the latest states at the end

User.all.each do |u|
  @uuid << u.uuid unless @uuid.includes?(u.uuid)
end

@uuid.each do |u|
  if user = User.find_by_state_and_uuid(3, u)
     @users << user
  elsif user = User.find_by_state_and_uuid(2, u)
     @users << user
  elsif user = User.find_by_state_and_uuid(1, u)
     @users << user
  end
end 
```

有什么想法可以将这个逻辑转换为 ActiveRecord 对象吗？

简而言之：User.magic_function 只返回每个 uuid 的最新状态

提前致谢！沃特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:41:53.257

如果您提前计划，您总是可以对您的状态进行排序并返回“最高”的状态。如果你有一个从一个到下一个的线性进展，这很有效。举个例子：

```
user = User.where(:uuid => u).order('users.state DESC').first 
```

对于更复杂的过渡，您将无法使用此技巧。您可以尝试使用不同的列进行排序，例如按`created_at`时间获取最后一个。

从设计的角度来看，在不同状态下拥有多个用户记录似乎非常不寻常。更好的计划可能是将用户记录的状态驱动部分拆分到一个单独的表中，并在那里进行状态跟踪，所有内容都链接回单个用户记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:05:21.853

您是否考虑过使用[范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)？您应该能够为每个用户状态创建一个范围，然后使用它们进行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:15:09.213

尝试 ：

```
User.get_user(state, uuid) 
```

并在您的用户模型中设置范围：

```
 scope :get_user, lambda { |*args| { :conditions => ["state = ? AND uuid = ?",args.first , args.second ] }} 
```

# eclipse - Eclipse，恢复最近的历史

> ID：10124070
> 
> 赞同：1
> 
> 时间：2012-04-12T12:59:42.747
> 
> 标签：eclipse

有没有办法回顾 Eclipse 项目最近的本地历史保存？

我的意思是：

1：`I Code Something`

我保存并运行。我按 Ctrl+z...

2：`I Code Something else`

我保存并运行。我对新代码不满意，现在我想回到初始代码。

我有什么办法可以恢复我最初编码的内容吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:05:12.903

您可以使用 Eclipse 的[本地历史](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-55.htm)来实现您想要的，方法是从包/项目资源管理器中对特定文件调用**Team > Show History**或直接单击打开的编辑器。

![地方历史](../Images/c16045675629d8d8f8f97f2325cea0f6.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-12T13:03:36.227

不。Eclipse 不（默认情况下）保留此信息。

对于您的问题，我可以想到两种解决方案：

1.  使用版本控制系统，并在每次保存时检查您的项目。
2.  使用支持文件版本控制的文件系统（有关详细信息，请参阅[http://en.wikipedia.org/wiki/Versioning_file_system ）。](http://en.wikipedia.org/wiki/Versioning_file_system)

# php - php 超级全局变量，如何使用它们

> ID：10124072
> 
> 赞同：1
> 
> 时间：2012-04-12T12:59:45.467
> 
> 标签：php, superglobals

小问题，这样做更好吗

```
$HOST = $_SERVER["HTTP_HOST"]; 
```

并`$HOST`在我的网络应用程序中使用

或者

这样做更好吗

```
define ( "HOST", $_SERVER["HTTP_HOST"] ); 
```

并`HOST`在我的整个 Web 应用程序中使用

或者

忘记使用变量和常量并在`$_SERVER["HTTP_HOST"];`每次需要主机时使用会更好吗？

哪种方式更有效率。哪种方式更具可读性。

我应该使用哪种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:02:13.067

更适合你使用第二个，

```
define ( "HOST", $_SERVER["HTTP_HOST"] ); 
```

定义它并在任何地方使用它..

任何情况下都不要选择第三个，因为硬编码将来会影响很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:02:37.303

您拥有的全局变量越少越好，恕我直言，所以只需 `$_SERVER["HTTP_HOST"]`在您的所有应用程序中使用。如果你真的想定义它

```
define ( "HOST", $_SERVER["HTTP_HOST"] ); 
```

是要走的路

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:02:49.960

全局状态通常很糟糕，因为它耦合了组件，打破了[IoC](http://en.wikipedia.org/wiki/Inversion_of_control)概念。

我会使用[依赖注入](http://msdn.microsoft.com/en-us/magazine/cc163739.aspx)在类和模块之间传递参数。

但是如果你真的想使用一个全局变量，你为什么不直接使用`$_SERVER["HTTP_HOST"]`呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:03:07.987

更好是一个相对术语。使用 $_SERVER["HTTP_HOST"] 是完全可以接受的，因为看到它的每个人都本能地知道它应该是什么，而不必猜测它是否包含完整的 URL 或其他内容。

即使您必须欺骗生产主机名进行测试，您仍然可以使用`$_SERVER['HTTP_HOST'] = 'www.mywebsite.whatever'`;

# python - 如何在 sqlalchemy 中获取级联删除（或标记为删除）项目的 id？

> ID：10124077
> 
> 赞同：3
> 
> 时间：2012-04-12T13:00:00.330
> 
> 标签：python, sql, postgresql, sqlalchemy, cascading-deletes

当我级联删除一项时，我想获取所有已删除项 id （主键）的列表，包括已删除子项的 id。是否可以？

我的课看起来像：

```
class Example(Base):
    __tablename__ = 'example'
    id = Column(Integer, primary_key=True)
    parent_id = Column(Integer, ForeignKey('example.id', ondelete='CASCADE'), nullable=True)
    childrens = relationship('Example', backref=backref('parent', remote_side=[id], cascade="all, delete")) 
```

我像这样查询：

```
session.query(Example).filter(Example.id == id).delete() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:25:40.653

我知道的唯一真正的解决方案是使用触发器。处理此类问题的通用触发器已作为 9.2 的可安装扩展提交给 PostgreSQL 项目（预计将于今年夏天发布）。如果您的 python 环境支持 PostgreSQL LISTEN/NOTIFY 功能，您可以下载它并将其与 9.1 或 9.0 一起使用。（我们 [威斯康星法院系统] 已经在生产环境中使用了这两个系统几个月了。）恐怕你需要能够从源代码构建它，直到版本 9.2 发布。如果您以前没有这样做过，那么此页面的底部应该是一个好的开始：

[http://www.postgresql.org/docs/devel/static/contrib.html](http://www.postgresql.org/docs/devel/static/contrib.html)

您可以在此处找到扩展的源代码：

[http://git.postgresql.org/gitweb/?p=postgresql.git;a=tree;f=contrib/tcn;h=aa9c5813223a3996e22cabbf064d7243fa474c6c;hb=HEAD](http://git.postgresql.org/gitweb/?p=postgresql.git;a=tree;f=contrib/tcn;h=aa9c5813223a3996e22cabbf064d7243fa474c6c;hb=HEAD)

...您目前可以在此处找到文档：

[http://www.postgresql.org/docs/devel/static/tcn.html](http://www.postgresql.org/docs/devel/static/tcn.html)

您需要创建一个触发器，该触发器在您想要通知的每个表上执行此触发器功能。DML 是直接的还是间接的并不重要，就像通过外键定义的 ON DELETE CASCADE 子句一样。虽然文档给出了一个将函数附加到*所有*DML 的示例，但如果这是您需要的，您可以将其附加到 DELETE，如下所示：

```
create trigger example_tcn_trigger
  after delete on example
  for each row execute procedure triggered_change_notification(); 
```

完全披露：我为威斯康星州法院系统写了这篇文章，他们允许我与 PostgreSQL 社区分享。

# java - XY线图JFreeChart中不同系列的不同颜色

> ID：10124079
> 
> 赞同：9
> 
> 时间：2012-04-12T13:00:09.720
> 
> 标签：java, jfreechart

我使用 JFreeChart 创建了 XY 折线图，有两个数据集，我希望两条线都是不同的颜色。我尝试使用以下代码-

```
 XYPlot plot = chart.getXYPlot();
  XYItemRenderer xyir = plot.getRenderer();
  xyir.setSeriesPaint(0, Color.GREEN);
  plot.setDataset(0, xyDataset1);

  xyir.setSeriesPaint(1, Color.blue);
  plot.setDataset(1, xyDataset2); 
```

我也尝试过使用以下代码，我使用不同的渲染器（不知道这是否是正确的方法） -

```
 XYPlot plot1 = chart.getXYPlot();
  XYPlot plot2 = chart.getXYPlot();

  XYItemRenderer xyir1 = plot1.getRenderer();
  xyir1.setSeriesPaint(0, Color.GREEN);
  plot1.setDataset(0, xyDataset1);

  XYItemRenderer xyir2 = plot2.getRenderer();
  xyir2.setSeriesPaint(1, Color.blue);
  plot2.setDataset(1, xyDataset2); 
```

在这两种情况下，它都以蓝色打印两条线。怎么了？？有什么建议么？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T04:57:06.000

找到了解决方案，它对我有用，使用两个不同的渲染器，早些时候我没有正确地做它 -

```
 XYPlot plot = chart.getXYPlot();
  plot.setDataset(0, xyDataset1);
  plot.setDataset(1, xyDataset2);
  XYLineAndShapeRenderer renderer0 = new XYLineAndShapeRenderer(); 
  XYLineAndShapeRenderer renderer1 = new XYLineAndShapeRenderer(); 
  plot.setRenderer(0, renderer0); 
  plot.setRenderer(1, renderer1); 
  plot.getRendererForDataset(plot.getDataset(0)).setSeriesPaint(0, Color.red); 
  plot.getRendererForDataset(plot.getDataset(1)).setSeriesPaint(0, Color.blue); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:28:18.653

显示的方法在此[示例](https://stackoverflow.com/a/8056418/230513)中有效，单个渲染器就足够了。sscce[可能](http://sscce.org/)有助于隔离问题。

要控制单个项目，您可以覆盖，`getItemPaint()`如图所示[。](https://stackoverflow.com/a/7285922/230513)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-26T09:51:32.487

尝试在渲染器中设置`Series`油漆`null``setSeriesPaint(null);`

如果您查看源代码，它首先检查油漆是否为`!null`，然后使用基色。

如果`null`它使用查找表中与时间序列关联的颜色。

# c# - c#中加密的显式或隐式密钥

> ID：10124081
> 
> 赞同：1
> 
> 时间：2012-04-12T13:00:16.290
> 
> 标签：c#, security, encryption

我打算编写一个 C# 类库，其中将包括我的加密算法，如 RC4、DES。这些是单密钥加密算法。
现在我想要最好的安全决定来保护我的密钥。我应该**将我的密钥硬编码在 DLL 中**，还是应该**从使用 DLL 的外部应用程序中设置我的密钥**？当您考虑反编译工具时，您认为哪个更安全？
大声思考：

*   如果密钥在我的安全库中被硬编码并且有人找到了 DLL 并将其导入到他的 C# 应用程序中，他可以轻松解码我的芯片数据吗？
*   如果密钥不是在我的安全库中硬编码而是从我的外部应用程序设置的，那么有人还需要反编译我的外部应用程序以找到我的密钥？

从我的将使用安全 DLL 的外部应用程序设置键值对我来说似乎更安全。你怎么看？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:16:55.090

**硬编码键**

如果您在 DLL 中包含共享/私有密钥，那么拥有 DLL 副本的任何人都将拥有该密钥的副本。如果您的模型要与多个用户共享您的应用程序，所有用户将拥有相同的加密密钥，并且可以解密其他用户加密的任何内容。如果您的应用程序很容易获得，那么您必须假设攻击者也拥有该应用程序（因此也拥有密钥）。

这也意味着所有开发人员都可以访问生产加密密钥，因为他们拥有源代码。QE 也可以访问，因为他们可能可以访问二进制文件。这两个内部团体中的任何一个都将能够解密您的应用程序为您的客户保护的任何内容。

这是你想要的吗？这通常是一种不好的做法，但在某些环境中比其他环境更糟糕。例如，如果您正在编写代码来学习如何编写加密货币，仅此而已，这可能无关紧要 - 只要确保没有其他人可以使用它:) 如果您正在编写服务，这是一种不好的做法并引入风险，但这不是你能做的最糟糕的事情。如果您正在编写将与多个客户共享的内容，那么您通过在二进制文件中包含密钥来破坏加密的目的。

生成随机数据（使用加密的强随机数生成器）、将其存储在文件中并使用该文件作为加密密钥并不是那么难。我的建议是使用单独的密钥。

**单独的钥匙**

如果您在单独的文件中传送密钥，则消除了在二进制文件中传送密钥所带来的所有风险，但您会引入其他风险。或者，换一种说法，既然你的加密可以做一些好事，你需要确保你做对了，否则它仍然没用。

密钥需要使用加密强的随机数生成器生成，因此它是不可预测的。密钥需要安全存储 - 需要保护密钥文件的整个路径，并且您应该考虑使用受密码保护的存储（如密钥库）以确保只有具有正确密码的用户才能访问密钥。当然，最后一个取决于您的部署模型，以及是否需要无人值守重启。并且需要安全地使用密钥 - 恒定顺序操作，不要执行加密或解密预言，在语义解析之前验证数据的完整性等。

# android - 对话框动画 fillAfter 不起作用

> ID：10124084
> 
> 赞同：1
> 
> 时间：2012-04-12T13:00:30.733
> 
> 标签：android, xml, dialog, android-animation

我无法让动画的 fillAfter 属性工作。我在 xml 中的翻译和动画集中都使用了它，但它总是跳到最后的标准对话框位置。这甚至可能吗？

xml动画中的当前幻灯片：

```
<set
android:fillAfter="true"
xmlns:android="http://schemas.android.com/apk/res/android">

<translate
    android:fromXDelta="100%"
    android:toXDelta="70%"
    android:fromYDelta="100%"
    android:toYDelta="70%"
    android:duration="2000" />

</set> 
```

应用于对话框的 Themes.xml：

```
<style name="theme_dialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowAnimationStyle">@style/style_slide_in_dialog</item>
</style>

<style name="style_slide_in_dialog">
    <item name="android:windowEnterAnimation">@anim/animation_slide_in_dialog</item>
    <item name="android:windowExitAnimation">@anim/animation_slide_out_dialog</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:06:22.167

像这样的动画`TranslateAnimation`是暂时的。如果您希望效果在动画完成后持续存在，您需要注册一个`AnimationListener`并做一些事情来使更改永久保存在`onAnimationEnd()`. 例如，对于 a `TranslateAnimation`，您需要调整您的`LayoutParams`以使其位于您的最终位置。

# installation - 在 Wix 文本控件中插入 crlf

> ID：10124094
> 
> 赞同：3
> 
> 时间：2012-04-12T13:01:03.687
> 
> 标签：installation, wix

这可能是一个愚蠢或愚蠢的问题，但是如何在 Wix 文本控件的文本中输入回车符 (crlf)？

我试过：

```
<Control Type="Text">
    <Text>Text goes here</Text>
    <Text>Another text goes here</Text>
</Control> 
```

但当然 wix 说我不能在一个控制标签内有多个 Text 元素。

有任何想法吗？我很确定这很容易做到，但我的 google foo 现在失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T16:44:36.680

答案比预期的要容易，并且一直摆在我面前……使用 CDATA 是解决问题的方法……

因此，在文本控件中执行回车只需将文本包含在 CDATA 中，例如：

```
<Control Type="Text">
<Text><![CDATA[
This is my text.
With a return line
]]>
</Text>
</Control> 
```

看起来可能有更多方法可以做到这一点，但我发现一种更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:56:15.697

不幸的是，Windows Installer 不支持静态文本控件中的换行符。在安装过程中，文本会根据控件和字体大小自动格式化。

但是，如果您真的想要换行符，只需为下一行使用另一个静态文本控件。

# html - 在网页中托管 WebBrowser 控件

> ID：10124096
> 
> 赞同：0
> 
> 时间：2012-04-12T13:01:04.293
> 
> 标签：html, winforms, iis, webbrowser-control

我正在按照下面提到的教程创建自定义 Windows 窗体控件库。我能够在 html 页面中托管控件并针对给定的 label.text 更改示例对其进行测试。

[http://weblogs.asp.net/spano/archive/2007/09/19/hosting-a-windows-form-control-in-a-web-page.aspx](http://weblogs.asp.net/spano/archive/2007/09/19/hosting-a-windows-form-control-in-a-web-page.aspx)

[http://www.codeguru.com/csharp/.net/net_general/internet/article.php/c19639/Hosting-NET-Windows-Forms-Controls-in-IE.htm](http://www.codeguru.com/csharp/.net/net_general/internet/article.php/c19639/Hosting-NET-Windows-Forms-Controls-in-IE.htm)

但是，当我在自定义用户控件中使用 WebBrowser 控件时，它可以在 Windows 窗体应用程序中运行，但甚至不会加载到 html 页面中，即使我遵循示例中的确切过程。

我们如何在 HTML 页面中托管具有 WebBrowser 控件的用户控件？

谢谢，阿尼尔

# tsql - 在 sql server 2008 中的两个日期之间获取 Id

> ID：10124098
> 
> 赞同：0
> 
> 时间：2012-04-12T13:01:10.757
> 
> 标签：tsql, sql-server-2008-r2

帮我，

我有一张这样的桌子

```
WEEK_ID WEEK_STARTDATE  WEEK_YEAR   WEEK_MONTH  WEEK_CREATEDTS
------------------------------------------------------------------------
252 10/26/2008  2008    11  2008-10-07 15:10:00.000
253 11/02/2008  2008    11  2008-10-07 15:10:00.000
254 11/09/2008  2008    11  2008-10-07 15:10:00.000
255 11/16/2008  2008    11  2008-10-07 15:10:00.000
256 11/23/2008  2008    12  2008-10-07 15:10:00.000
257 11/30/2008  2008    12  2008-10-07 15:10:00.000
258 12/07/2008  2008    12  2008-10-07 15:10:00.000
259 12/14/2008  2008    12  2008-10-07 15:10:00.000
260 12/21/2008  2008    12  2008-10-07 15:10:00.000
266 2/1/2009             2009   2   2008-10-07 15:16:00.000
267 02/08/2009  2009    2   2008-10-07 15:16:00.000
268 02/15/2009  2009    2   2008-10-07 15:16:00.000
269 02/22/2009  2009    2   2008-10-07 15:16:00.000
270 3/1/2009             2009   3   2008-10-07 15:17:00.000
271 03/08/2009  2009    3   2008-10-07 15:17:00.000
272 03/15/2009  2009    3   2008-10-07 15:17:00.000
273 03/22/2009  2009    3   2008-10-07 15:17:00.000
274 3/29/2009            2009   4   2008-10-07 15:19:00.000
275 04/05/2009  2009    4   2008-10-07 15:19:00.000
276 04/12/2009  2009    4   2008-10-07 15:19:00.000
277 04/19/2009  2009    4   2008-10-07 15:19:00.000
278 04/26/2009  2009    4   2008-10-07 15:19:00.000
279 5/3/2009             2009   5   2008-10-07 15:20:00.000
280 05/10/2009  2009    5   2008-10-07 15:20:00.000
281 05/17/2009  2009    5   2008-10-07 15:20:00.000
282 05/24/2009  2009    5   2008-10-07 15:20:00.000
283 5/31/2009            2009   6   2008-10-07 15:34:00.000
284 06/07/2009  2009    6   2008-10-07 15:34:00.000
285 06/14/2009  2009    6   2008-10-07 15:34:00.000
286 06/21/2009  2009    6   2008-10-07 15:34:00.000
287 6/28/2009   2009    7   2008-10-07 15:36:00.000
288 07/05/2009  2009    7   2008-10-07 15:36:00.000
289 07/12/2009  2009    7   2008-10-07 15:36:00.000
290 07/19/2009  2009    7   2008-10-07 15:36:00.000
291 07/26/2009  2009    7   2008-10-07 15:36:00.000
297 12/28/2008  2009    1   2008-10-08 03:45:00.000
298 01/04/2009  2009    1   2008-10-08 03:45:00.000
299 01/11/2009  2009    1   2008-10-08 03:45:00.000
300 01/18/2009  2009    1   2008-10-08 03:45:00.000
301 01/25/2009  2009    1   2008-10-08 03:45:00.000
302 8/2/2009    2009    8   2008-10-28 12:52:00.000
303 08/09/2009  2009    8   2008-10-28 12:52:00.000
304 08/16/2009  2009    8   2008-10-28 12:52:00.000
305 08/23/2009  2009    8   2008-10-28 12:52:00.000
306 8/30/2009            2009   9   2008-10-28 12:54:00.000
307 09/06/2009  2009    9   2008-10-28 12:54:00.000
308 09/13/2009  2009    9   2008-10-28 12:54:00.000
309 09/20/2009  2009    9   2008-10-28 12:54:00.000
310 9/27/2009   2009    10  2008-10-28 12:54:00.000
311 10/04/2009  2009    10  2008-10-28 12:54:00.000
312 10/11/2009  2009    10  2008-10-28 12:54:00.000
313 10/18/2009  2009    10  2008-10-28 12:54:00.000
314 10/25/2009  2009    10  2008-10-28 12:54:00.000
315 11/1/2009            2009   11  2008-10-28 12:55:00.000
316 11/08/2009  2009    11  2008-10-28 12:55:00.000
317 11/15/2009  2009    11  2008-10-28 12:55:00.000
318 11/22/2009  2009    11  2008-10-28 12:55:00.000
319 11/29/2009  2009    12  2008-10-28 12:55:00.000
320 12/06/2009  2009    12  2008-10-28 12:55:00.000
321 12/13/2009  2009    12  2008-10-28 12:55:00.000
322 12/20/2009  2009    12  2008-10-28 12:55:00.000
323 12/28/2009  2010    1   2008-10-28 12:56:00.000
324 01/04/2010  2010    1   2008-10-28 12:56:00.000
325 01/11/2010  2010    1   2008-10-28 12:56:00.000
326 01/18/2010  2010    1   2008-10-28 12:56:00.000
327 01/25/2010  2010    1   2008-10-28 12:56:00.000
329 02/01/2010  2010    2   2010-01-18 08:10:00.000
330 02/08/2010  2010    2   2010-01-18 08:10:00.000
331 02/15/2010  2010    2   2010-01-18 08:10:00.000
332 02/22/2010  2010    2   2010-01-18 08:10:00.000
333 03/01/2010  2010    3   2010-01-18 08:11:00.000
334 03/08/2010  2010    3   2010-01-18 08:11:00.000
335 03/15/2010  2010    3   2010-01-18 08:11:00.000
336 03/22/2010  2010    3   2010-01-18 08:11:00.000
337 03/29/2010  2010    4   2010-03-17 11:00:00.000
338 04/05/2010  2010    4   2010-03-17 11:00:00.000
339 04/12/2010  2010    4   2010-03-17 11:00:00.000
340 04/19/2010  2010    4   2010-03-17 11:00:00.000
341 04/26/2010  2010    4   2010-03-17 11:00:00.000
342 05/03/2010  2010    5   2010-03-17 11:01:00.000
343 05/10/2010  2010    5   2010-03-17 11:01:00.000
344 05/17/2010  2010    5   2010-03-17 11:01:00.000
345 05/24/2010  2010    5   2010-03-17 11:01:00.000
346 05/31/2010  2010    6   2010-03-17 11:03:00.000
347 06/07/2010  2010    6   2010-03-17 11:03:00.000
348 06/14/2010  2010    6   2010-03-17 11:03:00.000
349 06/21/2010  2010    6   2010-03-17 11:03:00.000
350 06/28/2010  2010    7   2010-03-17 11:03:00.000
351 07/05/2010  2010    7   2010-03-17 11:03:00.000
352 07/12/2010  2010    7   2010-03-17 11:03:00.000
353 07/19/2010  2010    7   2010-03-17 11:03:00.000
354 07/26/2010  2010    7   2010-03-17 11:03:00.000
355 08/02/2010  2010    8   2010-03-17 11:04:00.000
356 08/09/2010  2010    8   2010-03-17 11:04:00.000
357 08/16/2010  2010    8   2010-03-17 11:04:00.000
358 08/23/2010  2010    8   2010-03-17 11:04:00.000
359 08/30/2010  2010    9   2010-03-17 11:05:00.000
360 09/06/2010  2010    9   2010-03-17 11:05:00.000
361 09/13/2010  2010    9   2010-03-17 11:05:00.000
362 09/20/2010  2010    9   2010-03-17 11:05:00.000
363 09/27/2010  2010    10  2010-03-17 11:06:00.000
364 10/04/2010  2010    10  2010-03-17 11:06:00.000
365 10/11/2010  2010    10  2010-03-17 11:06:00.000
366 10/18/2010  2010    10  2010-03-17 11:06:00.000
367 10/25/2010  2010    10  2010-03-17 11:06:00.000
368 11/01/2010  2010    11  2010-03-17 11:09:00.000
369 11/08/2010  2010    11  2010-03-17 11:09:00.000
370 11/15/2010  2010    11  2010-03-17 11:09:00.000
371 11/22/2010  2010    11  2010-03-17 11:09:00.000
372 11/29/2010  2010    12  2010-03-17 11:10:00.000
373 12/06/2010  2010    12  2010-03-17 11:10:00.000
374 12/13/2010  2010    12  2010-03-17 11:10:00.000
375 12/20/2010  2010    12  2010-03-17 11:10:00.000
376 12/27/2010  2011    1   2010-03-17 11:11:00.000
377 01/03/2011  2011    1   2010-03-17 11:11:00.000
378 01/10/2011  2011    1   2010-03-17 11:11:00.000
379 01/17/2011  2011    1   2010-03-17 11:11:00.000
380 01/24/2011  2011    1   2010-03-17 11:11:00.000
381 01/31/2011  2011    2   NULL
382 02/07/2011  2011    2   NULL
383 02/14/2011  2011    2   NULL
384 02/21/2011  2011    2   NULL
441 02/28/2011  2011    3   NULL
442 03/07/2011  2011    3   NULL
443 03/14/2011  2011    3   NULL
444 03/21/2011  2011    3   NULL
451 03/28/2011  2011    4   NULL
452 04/04/2011  2011    4   NULL
453 04/11/2011  2011    4   NULL
454 04/18/2011  2011    4   NULL
455 04/25/2011  2011    4   NULL
456 05/02/2011  2011    5   NULL
457 05/09/2011  2011    5   NULL
458 05/16/2011  2011    5   NULL
459 05/23/2011  2011    5   NULL
460 05/30/2011  2011    6   NULL
461 06/06/2011  2011    6   NULL
462 06/13/2011  2011    6   NULL
463 06/20/2011  2011    6   NULL
464 06/27/2011  2011    7   NULL
465 07/04/2011  2011    7   NULL
466 07/11/2011  2011    7   NULL
467 07/18/2011  2011    7   NULL
468 07/25/2011  2011    7   NULL
469 08/01/2011  2011    8   NULL
470 08/08/2011  2011    8   NULL
471 08/15/2011  2011    8   NULL
472 08/22/2011  2011    8   NULL
473 08/29/2011  2011    9   NULL
474 09/05/2011  2011    9   NULL
475 09/12/2011  2011    9   NULL
476 09/19/2011  2011    9   NULL
477 09/26/2011  2011    10  NULL
478 10/03/2011  2011    10  NULL
479 10/10/2011  2011    10  NULL
480 10/17/2011  2011    10  NULL
481 10/24/2011  2011    10  NULL
482 10/31/2011  2011    11  NULL
483 11/07/2011  2011    11  NULL
484 11/14/2011  2011    11  NULL
485 11/21/2011  2011    11  NULL
486 11/28/2011  2011    12  NULL
487 12/05/2011  2011    12  NULL
488 12/12/2011  2011    12  NULL
489 12/19/2011  2011    12  NULL
491 12/26/2011  2012    1   NULL
492 01/02/2012  2012    1   NULL
493 01/09/2012  2012    1   NULL
494 01/16/2012  2012    1   NULL
495 01/23/2012  2012    1   NULL
496 01/30/2012  2012    2   NULL
497 02/06/2012  2012    2   NULL
498 02/13/2012  2012    2   NULL
499 02/20/2012  2012    2   NULL
500 02/27/2012  2012    3   NULL
501 03/05/2012  2012    3   NULL
502 03/12/2012  2012    3   NULL
503 03/19/2012  2012    3   NULL
504 03/26/2012  2012    4   NULL
505 04/02/2012  2012    4   NULL
506 04/09/2012  2012    4   NULL
507 04/16/2012  2012    4   NULL
508 04/23/2012  2012    4   NULL
509 04/30/2012  2012    5   NULL
510 05/07/2012  2012    5   NULL
511 05/14/2012  2012    5   NULL
512 05/21/2012  2012    5   NULL
513 05/28/2012  2012    6   NULL
514 06/04/2012  2012    6   NULL
515 06/11/2012  2012    6   NULL
516 06/18/2012  2012    6   NULL
517 06/25/2012  2012    7   NULL
518 07/02/2012  2012    7   NULL
519 07/09/2012  2012    7   NULL
520 07/16/2012  2012    7   NULL
521 07/23/2012  2012    7   NULL
522 07/30/2012  2012    8   NULL
523 08/06/2012  2012    8   NULL
524 08/13/2012  2012    8   NULL
525 08/20/2012  2012    8   NULL
526 08/27/2012  2012    9   NULL
527 09/03/2012  2012    9   NULL
528 09/10/2012  2012    9   NULL
529 09/17/2012  2012    9   NULL
530 09/24/2012  2012    10  NULL
531 10/01/2012  2012    10  NULL
532 10/08/2012  2012    10  NULL
533 10/15/2012  2012    10  NULL
534 10/22/2012  2012    10  NULL
535 10/29/2012  2012    11  NULL
536 11/05/2012  2012    11  NULL
537 11/12/2012  2012    11  NULL
538 11/19/2012  2012    11  NULL
539 11/26/2012  2012    12  NULL
540 12/03/2012  2012    12  NULL
541 12/10/2012  2012    12  NULL
542 12/17/2012  2012    12  NULL
543 12/24/2012  2013    1   NULL
544 12/31/2012  2013    1   NULL
545 01/07/2013  2013    1   NULL
546 01/14/2013  2013    1   NULL
547 01/21/2013  2013    1   NULL
548 01/28/2012  2013    1   NULL 
```

我写了一个查询来像这样将 6 天添加到 week_startdate

```
select week_id,week_startdate,convert(varchar,dateadd(day,6,week_startdate),101) as week_enddate from dbo.TBL_S3_FISCALWEEKS_1 
```

查询的结果是

```
week_id week_startdate  week_enddate
252 10/26/2008  11/01/2008
253 11/02/2008  11/08/2008
254 11/09/2008  11/15/2008
255 11/16/2008  11/22/2008
256 11/23/2008  11/29/2008
257 11/30/2008  12/06/2008
258 12/07/2008  12/13/2008
259 12/14/2008  12/20/2008
260 12/21/2008  12/27/2008
266 2/1/2009    02/07/2009
267 02/08/2009  02/14/2009
268 02/15/2009  02/21/2009
269 02/22/2009  02/28/2009
270 3/1/2009    03/07/2009
271 03/08/2009  03/14/2009
272 03/15/2009  03/21/2009
273 03/22/2009  03/28/2009
274 3/29/2009   04/04/2009
275 04/05/2009  04/11/2009
276 04/12/2009  04/18/2009
277 04/19/2009  04/25/2009
278 04/26/2009  05/02/2009
279 5/3/2009    05/09/2009
280 05/10/2009  05/16/2009
281 05/17/2009  05/23/2009
282 05/24/2009  05/30/2009
283 5/31/2009   06/06/2009
284 06/07/2009  06/13/2009
285 06/14/2009  06/20/2009
286 06/21/2009  06/27/2009
287 6/28/2009   07/04/2009
288 07/05/2009  07/11/2009
289 07/12/2009  07/18/2009
290 07/19/2009  07/25/2009
291 07/26/2009  08/01/2009
297 12/28/2008  01/03/2009
298 01/04/2009  01/10/2009
299 01/11/2009  01/17/2009
300 01/18/2009  01/24/2009
301 01/25/2009  01/31/2009
302 8/2/2009    08/08/2009
303 08/09/2009  08/15/2009
304 08/16/2009  08/22/2009
305 08/23/2009  08/29/2009
306 8/30/2009   09/05/2009
307 09/06/2009  09/12/2009
308 09/13/2009  09/19/2009
309 09/20/2009  09/26/2009
310 9/27/2009   10/03/2009
311 10/04/2009  10/10/2009
312 10/11/2009  10/17/2009
313 10/18/2009  10/24/2009
314 10/25/2009  10/31/2009
315 11/1/2009   11/07/2009
316 11/08/2009  11/14/2009
317 11/15/2009  11/21/2009
318 11/22/2009  11/28/2009
319 11/29/2009  12/05/2009
320 12/06/2009  12/12/2009
321 12/13/2009  12/19/2009
322 12/20/2009  12/26/2009
323 12/28/2009  01/03/2010
324 01/04/2010  01/10/2010
325 01/11/2010  01/17/2010
326 01/18/2010  01/24/2010
327 01/25/2010  01/31/2010
329 02/01/2010  02/07/2010
330 02/08/2010  02/14/2010
331 02/15/2010  02/21/2010
332 02/22/2010  02/28/2010
333 03/01/2010  03/07/2010
334 03/08/2010  03/14/2010
335 03/15/2010  03/21/2010
336 03/22/2010  03/28/2010
337 03/29/2010  04/04/2010
338 04/05/2010  04/11/2010
339 04/12/2010  04/18/2010
340 04/19/2010  04/25/2010
341 04/26/2010  05/02/2010
342 05/03/2010  05/09/2010
343 05/10/2010  05/16/2010
344 05/17/2010  05/23/2010
345 05/24/2010  05/30/2010
346 05/31/2010  06/06/2010
347 06/07/2010  06/13/2010
348 06/14/2010  06/20/2010
349 06/21/2010  06/27/2010
350 06/28/2010  07/04/2010
351 07/05/2010  07/11/2010
352 07/12/2010  07/18/2010
353 07/19/2010  07/25/2010
354 07/26/2010  08/01/2010
355 08/02/2010  08/08/2010
356 08/09/2010  08/15/2010
357 08/16/2010  08/22/2010
358 08/23/2010  08/29/2010
359 08/30/2010  09/05/2010
360 09/06/2010  09/12/2010
361 09/13/2010  09/19/2010
362 09/20/2010  09/26/2010
363 09/27/2010  10/03/2010
364 10/04/2010  10/10/2010
365 10/11/2010  10/17/2010
366 10/18/2010  10/24/2010
367 10/25/2010  10/31/2010
368 11/01/2010  11/07/2010
369 11/08/2010  11/14/2010
370 11/15/2010  11/21/2010
371 11/22/2010  11/28/2010
372 11/29/2010  12/05/2010
373 12/06/2010  12/12/2010
374 12/13/2010  12/19/2010
375 12/20/2010  12/26/2010
376 12/27/2010  01/02/2011
377 01/03/2011  01/09/2011
378 01/10/2011  01/16/2011
379 01/17/2011  01/23/2011
380 01/24/2011  01/30/2011
381 01/31/2011  02/06/2011
382 02/07/2011  02/13/2011
383 02/14/2011  02/20/2011
384 02/21/2011  02/27/2011
441 02/28/2011  03/06/2011
442 03/07/2011  03/13/2011
443 03/14/2011  03/20/2011
444 03/21/2011  03/27/2011
451 03/28/2011  04/03/2011
452 04/04/2011  04/10/2011
453 04/11/2011  04/17/2011
454 04/18/2011  04/24/2011
455 04/25/2011  05/01/2011
456 05/02/2011  05/08/2011
457 05/09/2011  05/15/2011
458 05/16/2011  05/22/2011
459 05/23/2011  05/29/2011
460 05/30/2011  06/05/2011
461 06/06/2011  06/12/2011
462 06/13/2011  06/19/2011
463 06/20/2011  06/26/2011
464 06/27/2011  07/03/2011
465 07/04/2011  07/10/2011
466 07/11/2011  07/17/2011
467 07/18/2011  07/24/2011
468 07/25/2011  07/31/2011
469 08/01/2011  08/07/2011
470 08/08/2011  08/14/2011
471 08/15/2011  08/21/2011
472 08/22/2011  08/28/2011
473 08/29/2011  09/04/2011
474 09/05/2011  09/11/2011
475 09/12/2011  09/18/2011
476 09/19/2011  09/25/2011
477 09/26/2011  10/02/2011
478 10/03/2011  10/09/2011
479 10/10/2011  10/16/2011
480 10/17/2011  10/23/2011
481 10/24/2011  10/30/2011
482 10/31/2011  11/06/2011
483 11/07/2011  11/13/2011
484 11/14/2011  11/20/2011
485 11/21/2011  11/27/2011
486 11/28/2011  12/04/2011
487 12/05/2011  12/11/2011
488 12/12/2011  12/18/2011
489 12/19/2011  12/25/2011
491 12/26/2011  01/01/2012
492 01/02/2012  01/08/2012
493 01/09/2012  01/15/2012
494 01/16/2012  01/22/2012
495 01/23/2012  01/29/2012
496 01/30/2012  02/05/2012
497 02/06/2012  02/12/2012
498 02/13/2012  02/19/2012
499 02/20/2012  02/26/2012
500 02/27/2012  03/04/2012
501 03/05/2012  03/11/2012
502 03/12/2012  03/18/2012
503 03/19/2012  03/25/2012
504 03/26/2012  04/01/2012
505 04/02/2012  04/08/2012
506 04/09/2012  04/15/2012
507 04/16/2012  04/22/2012
508 04/23/2012  04/29/2012
509 04/30/2012  05/06/2012
510 05/07/2012  05/13/2012
511 05/14/2012  05/20/2012
512 05/21/2012  05/27/2012
513 05/28/2012  06/03/2012
514 06/04/2012  06/10/2012
515 06/11/2012  06/17/2012
516 06/18/2012  06/24/2012
517 06/25/2012  07/01/2012
518 07/02/2012  07/08/2012
519 07/09/2012  07/15/2012
520 07/16/2012  07/22/2012
521 07/23/2012  07/29/2012
522 07/30/2012  08/05/2012
523 08/06/2012  08/12/2012
524 08/13/2012  08/19/2012
525 08/20/2012  08/26/2012
526 08/27/2012  09/02/2012
527 09/03/2012  09/09/2012
528 09/10/2012  09/16/2012
529 09/17/2012  09/23/2012
530 09/24/2012  09/30/2012
531 10/01/2012  10/07/2012
532 10/08/2012  10/14/2012
533 10/15/2012  10/21/2012
534 10/22/2012  10/28/2012
535 10/29/2012  11/04/2012
536 11/05/2012  11/11/2012
537 11/12/2012  11/18/2012
538 11/19/2012  11/25/2012
539 11/26/2012  12/02/2012
540 12/03/2012  12/09/2012
541 12/10/2012  12/16/2012
542 12/17/2012  12/23/2012
543 12/24/2012  12/30/2012
544 12/31/2012  01/06/2013
545 01/07/2013  01/13/2013
546 01/14/2013  01/20/2013
547 01/21/2013  01/27/2013
548 01/28/2012  02/03/2012 
```

我没有 week_enddate 列，我通过将 6 天添加到 week_startdate 来创建它。要求是如果我在 week_startdate 和 week_enddate 之间传递日期作为输入参数，我必须得到 week_id

例如，如果我在 04/02/2012 到 04/08/2012 之间传递日期，我应该只得到那个 week_id

那是在

```
04/02/2012,
04/03/2012,
04/04/2012,
04/05/2012,
04/06/2012,
04/07/2012,
04/08/2012 
```

我必须像这样获得 week_id 505。该表没有我在 select 语句中通过添加 6 天创建的 week_enddate 但我应该只通过 startdate 并且我应该在两个日期之间获得 week_id

帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:08:42.860

尝试以下查询

```
select week_id
from dbo.TBL_S3_FISCALWEEKS_1
where @yourdate between week_startdate and convert(varchar,dateadd(day,6,week_startdate),101) 
```

# node.js - 使用 Express 的 node-formidable 上传多个文件时处理多个文件

> ID：10124099
> 
> 赞同：9
> 
> 时间：2012-04-12T13:01:15.733
> 
> 标签：node.js, express

在 Express 上使用 node-formidable 上传文件就这么简单

```
app.post('/upload', function(req, res) {
    // do something with req.files
}); 
```

文件现已保存

表单：（multiple="multiple" 是 HTML5 功能，允许用户选择多个文件上传）

```
<form method="post" enctype="multipart/form-data" action="upload">
    <input type="text" name="title"/>
    <input type="file" name="upload" multiple="multiple"/>
    <input type="submit" value="upload" id="s3form_submit"/>
</form> 
```

如果我将此行添加到上传代码

```
console.log(req.files.upload.path); 
```

上传一个文件时，路径会显示在控制台中。但是当我上传多个文件时，它只会在控制台中显示未定义。如何获取每个文件的日志内容？使用 for 循环？

当您上传多个文件时，GitHub 上的 node-formidable 示例会记录每个文件：[https](https://github.com/felixge/node-formidable/blob/master/example/upload.js) ://github.com/felixge/node-formidable/blob/master/example/upload.js （我尝试在 Express 中使用此代码，但没有工作）它完全符合我的要求，但我如何在 Express 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T10:58:42.810

它通过将下面的行移动到 app.configure 函数的底部来工作。在此处阅读有关 Express 中中间件顺序的重要性：http: [//expressjs.com/guide.html#middleware](http://expressjs.com/guide.html#middleware)

```
app.use(express.bodyParser({ uploadDir:__dirname + '/public/uploads' })); 
```

通过使用这个处理程序：

```
app.post('/upload', function(req, res){
    var form = new formidable.IncomingForm(),
    files = [],
    fields = [];
    form.on('field', function(field, value) {
        fields.push([field, value]);
    })
    form.on('file', function(field, file) {
        console.log(file.name);
        files.push([field, file]);
    })
    form.on('end', function() {
        console.log('done');
        res.redirect('/forms');
    });
    form.parse(req);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T16:46:23.313

所以`req.files`可能是一个数组。尝试`console.log(req.files)`在处理程序中做，看看它是什么样子......但我认为你最好像他们的例子那样做。您可以通过删除`../test/common`顶部的 require 并将常量更改为静态值（例如，而不是`TEST_TMP`use `__dirname + '/uploads'`）来使其工作。

处理程序：

```
var form = new formidable.IncomingForm(),
    files = [],
    fields = [];

form.uploadDir = __dirname + '/uploads';

form
  .on('field', function(field, value) {
    console.log(field, value);
    fields.push([field, value]);
  })
  .on('file', function(field, file) {
    console.log(field, file);
    files.push([field, file]);
  })
  .on('end', function() {
    console.log('-> upload done');
    res.writeHead(200, {'content-type': 'text/plain'});
    res.write('received fields:\n\n '+util.inspect(fields));
    res.write('\n\n');
    res.end('received files:\n\n '+util.inspect(files));
  });
form.parse(req); 
```

这些文件现在`__dirname + '/uploads'`根据控制台上的输出命名（以及响应，如您在处理程序中所见`end`）。

# javascript - 为什么这些列表项位置不正确？

> ID：10124100
> 
> 赞同：0
> 
> 时间：2012-04-12T13:01:17.977
> 
> 标签：javascript, html, math, css

我正在用 Javascript 创建一个圆形菜单，并决定使用绝对定位和 -webkit-transforms 的组合来将列表项定位在圆圈的外部。

这是一个已被修改为 JSFiddle 形状的演示：http: [//jsfiddle.net/5XnKZ/6/](http://jsfiddle.net/5XnKZ/6/)

您可以看到列表项的位置是松散的圆形，但它们没有按顺序显示，也没有按我预期的宽度显示。如果您尝试从列表中添加和删除项目，您会发现不同数量的列表项目对它们的显示方式有很大不同的影响。

我使用绝对定位将项目定位在圆的中心，然后使用 webkit 转换将它们转换为圆上的位置。转换的 x 和 y 如下获得：

```
var x = Math.cos(d) * r;
var y = Math.sin(d) * r; 
```

其中 d 是项目应处于的弧度角度，r 是我将它们定位在的圆的半径。

谁能看到出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:06:55.970

您的指数计算不正确。

```
(function() {
    //A foreach alternative function
    var each = function(a, b) {
        for (var i = 0; i < a.length; i++) {
            b(a[i]);
        }
    };

    //Get an array of all the circlr elements
    var circles = document.getElementsByClassName('circle');
    //Iterate over these elements
    each(circles, function(circle) {
        //For each of their children
        var i = 0;
        each(circle.children, function(child) {
            //Get child's index as a percentage of 2 PI radian
            var p = (i) / circle.children.length * (2*Math.PI);
            var r = 80;
            child.style.webkitTransform = 'translatey(' + Math.sin(p) * r + 'px) translatex(' + Math.cos(p) * r + 'px)';
            i++;
        });
    });
})(); 
```

检查[更正后的 JsFiddle](http://jsfiddle.net/Mikey/q68g5/)。

# sql - 代码优先实体框架在初始化时未获取 web.config 连接字符串

> ID：10124101
> 
> 赞同：2
> 
> 时间：2012-04-12T13:01:25.883
> 
> 标签：sql, entity-framework-4, ef-code-first

我一直在使用代码优先的实体框架。我在 web.config 中定义了一个连接，其名称与我的 DbContext 的类名匹配（在本例中为“MyDbContext”）。

当数据库存在时，EF 使用此连接没有问题。

但是，如果我删除数据库（以强制 EF 重新创建它），EF 会在本地 Sql Express 服务器上创建数据库。

如果我在 DbContext 类构造函数中指定完整的连接字符串，例如

```
 public class ReykerSCPContext : DbContext
{
public ReykerSCPContext() : 
    base("Server=tcp:MyDBSErver.database.windows.net,1433;Database=MyDB;User ID=#######;Password=#######;Trusted_Connection=False;Encrypt=True;MultipleActiveResultSets=True;PersistSecurityInfo=True;") { }
} 
```

然后在选择的服务器上正确创建数据库。伟大的！

谁能告诉我这是否是正确的行为，因为我正在猛烈抨击我的大脑。我希望这一切都可以从 web.config 中工作，所以我不需要重新构建并记住更改代码等中的设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T19:34:47.903

这应该这样做：

```
public class EFDbContext : DbContext {
    public EFDbContext() : base("EFDbContext") {

    }

    public DbSet<Product> Products { get; set; }
} 
```

您应该在 web.config 中通过上下文类的名称获得连接字符串，这样就可以了。web.config 应该在根目录中。

```
<connectionStrings>
    <add name="EFDbContext" connectionString="Data Source = .; Initial Catalog = ITSDB; Integrated Security = true" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T00:01:35.430

如果你这样做

```
update-database -v 
```

并且它显示它正在使用 IIS express 实例而不是来自 Web.Config 的值，这意味着当本地 IIS express 实例正在运行时，EF 会感到困惑。

我有同样的问题，并通过停止/删除 IIS express 解决。

```
"sqllocaldb.exe stop v11.0"

"sqllocaldb.exe delete v11.0” 
```

跳，帮助某人！

# sharepoint - 人员选择器能否解析 FBA 扩展站点中的 NTLM 用户

> ID：10124102
> 
> 赞同：3
> 
> 时间：2012-04-12T13:01:28.150
> 
> 标签：sharepoint

我们有一个使用声明身份验证的 SharePoint 2010 Extranet Web 应用程序。

*   Intranet 区域使用混合身份验证（针对内部 AD 的 NTLM 和针对单独 AD 的 FBA）。
*   Extranet 区域仅针对单独的 AD 使用 FBA。

我们的网站在成员 SharePoint 组中有 NTLM 用户。我们的库的“人员”列仅限于成员组。我们希望允许 FBA 用户在填写商品元数据时选择成员组中的 NTLM 用户。问题是 FBA 用户可以在人员选择器中看到 NTLM 用户，但是当他们选择他们时，用户并没有解决。我意识到我们可以通过将 NTLM 添加到 Extranet 区域来解决这个问题，但如果可能的话，我们不希望这样做。

我的问题是：

这是适合自定义声明提供程序的场景吗？

这是可以通过 peoplepicker-searchadforests 属性解决的问题吗？（我无法理解这个属性正在发挥作用的真实世界示例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:25:35.163

这就是我理解人员选择器工作的方式。我不是 100% 肯定，所以不要把它当成绝对真理：）

基本上，在 Extranet 应用程序的上下文中，所有标准选择器都完全不知道内部 AD 的存在。您在人员选择器中获得的“点击”可以在 SiteUsers 列表和/或个人资料数据库中找到。

“这个问题可以通过 peoplepicker-searchadforests 属性解决吗？” 我不这么认为，我认为即使您能够让人员选择器搜索其他广告也可能会给出一些非常奇怪的结果，例如能够将人员权限添加到某个对象，但使用 FBA 声明前缀，不等于使用 NTLM 登录时的用户。（使用 NTLM 和 Claims 登录的用户在技术上是不同的用户。）

“这是适合自定义索赔提供者的场景吗？” 我不这么认为:(

您可以为您创建的人员选择器执行一个技巧（即您有一个自定义页面或 web 部件或带有人员选择器的东西），您可以设置几个属性来更改检索用户的位置。例如，您可以设置像“WebApplication”或类似的属性，基本上使选择器在内部应用程序的上下文中工作，尽管当前用户已登录外部应用程序。

我在想也许有某种方法可以在 Extranet 应用程序上启用 NTLM 成员资格提供程序，但实际上并没有启用最终用户身份验证。这听起来并非不可能，但我不确定这将如何完成。

# windows-phone-7 - 以编程方式关闭 WP 7 Mango 上的 phonegap 应用程序

> ID：10124105
> 
> 赞同：1
> 
> 时间：2012-04-12T13:01:33.043
> 
> 标签：windows-phone-7, cordova

我正在尝试将现有的 phonegap 应用程序（iOS/Android）移植到 WP7。一切正常，除了处理“后退”按钮的代码。目前有后退按钮的处理程序，如果逻辑要求它会重新加载页面，或者如果用户在“第一”页中则关闭应用程序。

代码：

```
if (doLogic) {
  // some update logic
} else  {
  // try to close app
  device.exitApp();
} 
```

不幸的是，虽然更新逻辑有效，但我无法关闭应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:03:35.170

**您不能强制退出 wp7 上的应用程序。** 它在 Wp7 设计指南中。

让用户按回，如果你想让他退出，不要取消它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:26:33.327

正如@TDaver 所提到的，Windows Phone 应用程序并不是要关闭的。试图关闭它们违反了开发指南，并且该应用程序可能会被拒绝。

让默认的导航堆栈机制来处理它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T13:04:19.320

要退出应用程序，无论您在哪个页面：

```
 if (NavigationService.CanGoBack)
 {
     while (NavigationService.RemoveBackEntry() != null)
     {
         NavigationService.RemoveBackEntry();
     }
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T13:34:52.043

似乎使用当前的 PhoneGap 实现不可能添加后退按钮处理程序并且仍然允许应用程序使用后退按钮关闭。

通过更改 CordovaView.xaml.cs 中的 page_BackKeyPress 方法，只需很少侵入 PhoneGap 即可解决此问题

将 if(OverrideBackButton) 更改为

```
 string cancel = "false";
    if (OverrideBackButton)
    {
        try
        {
            cancel = CordovaBrowser.InvokeScript("shouldCancelBackButton") as string;
            Console.WriteLine("CancelBackButton response: " + cancel);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Exception while checking for backbutton cancel into cordova view: " + ex.Message);
        } 

        try
        {
            e.Cancel = cancel == "true"; 
            CordovaBrowser.InvokeScript("CordovaCommandResult", new string[] { "backbutton" });
        }
        catch (Exception ex)
        {
            Console.WriteLine("Exception while invoking backbutton into cordova view: " + ex.Message);
        }
    } 
```

现在我可以在页面中添加 shouldCancelBackButton JS 函数并基于状态抑制或执行默认的后退按钮处理程序行为。

可能这不是最好的解决方案，但不幸的是，我没有时间更熟悉 PhoneGap 的内部结构。

# wpf - 如何制作 WPF ComboBox 来处理对上覆 TextBlock 的点击？

> ID：10124113
> 
> 赞同：1
> 
> 时间：2012-04-12T13:01:47.870
> 
> 标签：wpf, combobox, wpf-controls, click, routed-events

我有一个位于 ComboBox 上方的 TextBlock，我希望在单击它时出现组合框弹出窗口（下拉菜单）。

```
<Grid>
    <ComboBox Name="tstcmb" Height="27" HorizontalAlignment="Left" Margin="29,92,0,0" VerticalAlignment="Top" Width="131"  SelectedIndex="1"  >
       <ComboBoxItem>a</ComboBoxItem>
       <ComboBoxItem>aaaa</ComboBoxItem>
    </ComboBox>
    <TextBlock Text="skdkdkdk" Background="Green" Height="16" HorizontalAlignment="Left" Margin="29,92,0,0" VerticalAlignment="Top" Width="131" />
</Grid> 
```

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:06:17.600

设置 IsHitTestVisible="False"

```
<TextBlock IsHitTestVisible="False".../> 
```

这样，TextBlock 不会拦截鼠标点击，并允许它们由下面的 ComboBox 处理。

# jquery - 等待功能，直到用户停止输入

> ID：10124114
> 
> 赞同：10
> 
> 时间：2012-04-12T13:01:53.530
> 
> 标签：jquery, events, delay, settimeout

我有用户在打字时进行 ajax 调用。问题是它会调用每个输入的字母，所以我设置了这样的超时：

```
$(input).live('keyup', function(e){

setTimeout(function(){ 

var xx = $(input).val();
doSearch(xx); 

}, 400); 

}); 
```

它确实会等待 400 毫秒，但随后会为每个 keyup 执行。如何更改此设置以使 ajax 调用仅在最后一个输入字母后 400 毫秒左右“一次”？

（我过去使用了“延迟”，但这对我的脚本根本不起作用......）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-12T13:05:12.390

```
timer = 0;
function mySearch (){ 
    var xx = $(input).val();
    doSearch(xx); 
}
$(input).live('keyup', function(e){
    if (timer) {
        clearTimeout(timer);
    }
    timer = setTimeout(mySearch, 400); 
}); 
```

最好将你的函数移动到一个命名函数并多次调用它，因为否则你会在每个 keyup 上创建另一个 lambda 函数，这是不必要且相对昂贵的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T13:03:26.713

每次按下新键时，您都需要重置计时器，例如

```
(function() {
    var timer = null;

    $(input).live('keyup', function(e) {
        timer = setTimeout(..., 400);
    });

    $(input).live('keydown', function(e) {
        clearTimeout(timer);
    });
)(); 
```

函数表达式用于确保`timer`变量的范围仅限于需要它的两个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:13:30.360

我认为你*可以*在这种情况下再次使用`delay()`，只要你可以在混合中添加一个新的临时“东西”。这对你有用吗？

```
$(input).live('keyup', function(e) {
    if (!$(input).hasClass("outRunningAJob")) {
        var xx = $(input).val();
        $(input).addClass("outRunningAJob");
        doSearch(xx);
        $(input).delay(400).queue(function() {
            $(this).removeClass("outRunningAJob");
            $(this).dequeue();
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T17:40:52.357

我发现以下更容易实现：

```
$(input).on('keyup', function () {
    delay(function () {
        if (input).val() !== '' && $(input).val() !== $(input).attr('searchString')) {
            // make the AJAX call at this time
            // Store the value sent so we can compare when JSON returns
            $(input).attr('searchString', $(input).val());

            namepicker2_Search_Prep(input);
        }
    }, 500);
}); 
```

通过存储当前字符串，您可以看到用户已停止输入。然后你可以安全地调用你的函数来做任何需要处理的事情。

# c# - DevExpress 皮肤不工作

> ID：10124116
> 
> 赞同：5
> 
> 时间：2012-04-12T13:02:01.490
> 
> 标签：c#, winforms, devexpress

有没有人会导致他们的控件的 devExpress 皮肤选项不起作用？

例如，如果我将控件的 skinName 更改`Office 2010 Black`为，它不会执行任何操作。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T13:09:30.520

您需要注册皮肤。通常，您在应用程序启动时应用应用程序范围的皮肤。

[请参阅DevExpress 在线文档](http://documentation.devexpress.com/#WindowsForms/CustomDocument3096)中的这篇文章。

这是我通常做的：

`DevExpress.UserSkins.BonusSkins.Register();` `DevExpress.UserSkins.OfficeSkins.Register();`

您需要添加 DevExpress 的皮肤 DLL 的引用。之后你就可以使用你想要的皮肤了：

`defaultLookAndFeel1.LookAndFeel.SetSkinStyle("Office 2010 Silver");`

`defaultLookAndFeel1`从工具箱拖到 WinForm 上的控件在哪里。建议将其拖动到基本表单。然后从基本表单继承其余表单，所有应用程序将提供一致的外观。

**更新：** 最新的 DevExpress 更改了自定义皮肤的命名空间。最后两行可能对您很重要。

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);

DevExpress.UserSkins.BonusSkins.Register();
DevExpress.Skins.SkinManager.EnableFormSkins();
DevExpress.Skins.SkinManager.EnableMdiFormSkins(); 
```

# c - 拥有二进制文件有什么用？

> ID：10124125
> 
> 赞同：1
> 
> 时间：2012-04-12T13:02:30.087
> 
> 标签：c, file-io

我正在学习 C 中的 FileIO，并且对二进制文件有点困惑。我的问题是，当我们总是可以使用 ASCII 或其他易于理解的格式的文件时，拥有二进制文件有什么用。二进制文件在哪些应用程序中更有用？对此真的有任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:06:08.873

所有文件本质上都是二进制文件。ASCII 文件是包含被认为是“人类可读”数据的二进制文件的子集。纯二进制文件不限于可读的字符子集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T13:04:38.287

访问速度

混淆

无需创建大型序列化文件即可将本机对象写入文件的能力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T13:05:04.917

ASCII 很容易被人类理解，但对于许多其他目的，计算机以二进制格式存储东西更有效、更容易。例如，如果您想保留一个整数序列，那么计算机读取/写入表示 所需的 4 个字节`int`比写出数字的 ascii 表示，然后在读取时解析它更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T13:05:30.967

可以存储任何字节值至关重要，例如程序是二进制的。任何可能的二进制代码都可以是 CPU 的程序指令。

ASCII 只存储 7 位值，因此有一半可能的值被浪费了。

此外，整数将存储为什么？

数字 4294967295 可以存储为 4 个字节，32 位，但如果以 ASCII 格式存储，作为数字，则需要 10 个字符。此外，还需要处理将其转换为 32 位数字。这两件事都不好。

32bit的数字是固定大小的，所以很容易得到文件中的第234856个值，只要寻找到4*234856的位置即可。

如果将 32 位数字存储为 ASCII，则它们必须始终占用 10 个字节，使文件大 2.5 倍，或者它们以可变大小存储，使得几乎不可能在不读取整个文件的情况下查找特定值。

编辑：

值得补充的是（在正常使用中）人类看不到文件中保存的数据。检查文件内容的唯一方法是运行可以读取和使用数据的程序。因此，人类的便利性是一个很小的考虑因素。

一般来说，数据以最方便程序使用的形式存储，并且该形式旨在适应程序的目的。ASCII 是一种为文本编辑程序设计的格式，用于创建人类可读的文档并支持简单的文本显示方式，仅限于英文字母、数字和一些标点符号。当我们想要支持所有人类书面语言时，ASCII 的局限性太大了。

我相信我们有超过一百万个字符来表示人类书面语言（和一些其他图片），但我们还没有为所有人类语言提供字符。

UTF-8 是一种将我们目前所拥有的书面字符表示为多个字节的方法。UTF-8 使用 8bit 编码，超出了 ASCII 的范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T13:21:56.100

将二进制文件视为数据的真实表示，由计算机程序直接解释而不是由人类读取。程序写出数据（无论是 ascii 还是 ascii 格式的数字）都会产生很多开销。最有可能的是，程序员必须发明一种协议，以将数组、结构和标量以 ascii 形式写入文件，以便人类可读，也可以由程序读回并转换回二进制形式。

数据库表就是一个很好的例子。无论表中是否有文本或数字字段，数据库管理器都会以二进制格式读取和写入该数据。更容易写出、读入，然后根据需要进行转换以显示您可以读取的任何数据。

Perception 给出了一个我以前从未考虑过的好答案。所有数据都是二进制的，ascii 是一个子集。这个答案让我想到了 ftp 并将模式设置为 ascii 或二进制。如果我正在传输存储在 Linux 系统上的 Windows 二进制文件，我会告诉 ftp 将它们作为二进制文件传输。这意味着，不要将其解释为 ascii 文件并在每行末尾添加 \cr。有时我会将 .csv 和 .txt 数据作为二进制文件传输，因为我知道 Windows Excel 知道如何解释这些非 DOS 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T15:45:27.200

我不想编写一个必须编码/解码图像、音频文件、GIS 数据、航天器遥测或 <fill in the blank> 作为 ASCII 的程序。

# c# - 使用 xaml 根据所选选项卡使选择控件可见

> ID：10124132
> 
> 赞同：0
> 
> 时间：2012-04-12T13:02:53.950
> 
> 标签：c#, wpf, xaml

我有以下代码：

```
 private Dictionary<int, UserControl> tabControls = new Dictionary<int, UserControl>();

    public MainWindow()
    {
        InitializeComponent();

        tabControls[0] = new Panel1();
        tabControls[1] = new Panel2();
        tabControls[2] = new Panel3();
        tabControls[3] = new Panel4();
        tabControls[4] = new Panel5();
        tabControls[5] = new Panel6();
        tabControls[6] = new Panel7();
        tabControls[7] = new Panel8();
    }

    public object SelectedTab
    {
        //this is assigned from xaml binding
        set
        {
            OnCurrentTabChanged(tabControl.SelectedIndex);
        }
    }

    void OnCurrentTabChanged(int tabIndex)
    {
        if (dataDisplay != null)
        {
            dataDisplay.Children.Clear();
            dataDisplay.Children.Add(tabControls[tabIndex]);
        }
    } 
```

每次用户选择不同的选项卡时，都会出现另一个控件。

有没有办法使用 xaml 来简化它？

我不能将控件本身放在选项卡控件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:45:47.323

我之前已经用另一个`TabControl`隐藏了标题和框架的方法来做到这一点。然后我只是将 绑定`SelectedIndex`到您的其他选项卡`SelectedIndex`，并且两者是同步的

```
<!-- TabControl without the TabHeaders -->
<Style x:Key="TabControl_NoHeadersStyle" TargetType="{x:Type TabControl}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabControl}">
                <DockPanel>
                    <!-- This is needed to draw TabControls with Bound items -->
                    <StackPanel IsItemsHost="True" Height="0" Width="0" />

                    <ContentPresenter x:Name="PART_SelectedContentHost"
                                      ContentSource="SelectedContent" />
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后你可以设置你的两个选项卡控件，每个绑定到不同的源，并将`SelectedIndex`一个绑定到`SelectedIndex`另一个

```
<TabControl x:Name="MainTabControl" />

<TabControl ItemsSource="{Binding Panels}"
            SelectedIndex="{Binding ElementName=MainTabControl, Path=SelectedIndex}" 
            Style="{StaticResource TabControl_NoHeadersStyle}" /> 
```

另一种选择是将 绑定`SelectedIndex`到您的代码隐藏中的某些内容，然后在它发生更改时，`PropertyChanged`在另一个属性上发出通知，该属性会公开您要显示的面板。

```
<TabControl SelectedIndex="{Binding SelectedTabIndex} />

<ContentControl Content="{Binding SelectedPanel}" /> 
```

在后面的代码中

```
public int SelectedTabIndex
{
    get { return _selectedTabIndex;}
    set
    {
        if (_selectedTabIndex != value)
        {
            _selectedTabIndex = value;
            RaisePropertyChanged("SelectedTabIndex");

            RaisePropertyChanged("SelectedPanel");
        }
    }
}

public UserControl SelectedPanel
{
    get { return tabControls[SelectedTabIndex]; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:46:04.840

TabItem 有一个 IsSelected 属性，您可以绑定到它，我认为这会简化语法。

```
 public bool TabIsSelected
 {
     get { return tabIsSelected; }
     set 
     {
          if (value && dataDisplay != null)
          {
              dataDisplay.Children.Clear();
              dataDisplay.Children.Add(tabControls[tabIndex]);
          }
          tabIsSelected = value;
     } 
```

但我还是不明白为什么你不能把控件放在 tabitem 中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:11:18.053

使用代码隐藏

```
void OnCurrentTabChanged(int tabIndex)
{
    if (dataDisplay != null)
    {
        UIElemnt[] pp = dataDisplay.Children.Cast<UIElement>().ToArray();
        Array.ForEach(pp, x=> x.visibility = Visibility.Collapsed); 
        pp[tabIndex].visibility = Visibility.Visible;
    }
} 
```

# c++ - 将 C++ FOR 循环转换为 Delphi

> ID：10124137
> 
> 赞同：-1
> 
> 时间：2012-04-12T13:03:07.210
> 
> 标签：c++, delphi

> **可能重复：**
> [将 C“FOR”循环转换为 Delphi](https://stackoverflow.com/questions/9986346/converting-c-for-loop-to-delphi)

我正在尝试将 C++ FOR 循环转换为 Delphi，但我不知道该怎么做......

这是 C++ 函数：

```
bool bCompare(const BYTE* pData, const BYTE* bMask, const char* szMask)
{
    for(;*szMask;++szMask,++pData,++bMask)
        if(*szMask=='x' && *pData!=*bMask)   return 0;
    return (*szMask) == NULL;
} 
```

我刚刚转换了函数声明：

```
function bCOmpare( pData: PBYTE; bMask: PBYTE; szMask: PCHAR):boolean;
begin
//...
end; 
```

转换如何？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:12:39.583

```
function bCOmpare(pData: PByte; bMask: PByte; szMask: PAnsiChar): Boolean;
begin
  while szMask^<>#0 do
  begin
    if ((szMask^='x') and (pData^<>bMask^)) then
    begin
      Result := False;
      exit;
    end;
    inc(szMask);
    inc(pData);
    inc(bMask);
  end;
  Result := True;//the test in the C code is pointless
end; 
```

# c# - 使用 Windows phone 7 在 POST 请求中发送文件

> ID：10124150
> 
> 赞同：0
> 
> 时间：2012-04-12T13:03:53.467
> 
> 标签：c#, windows-phone-7

我已经在我的 Windows 手机中创建了一个“csv 文件”，我想将它发布到服务器中，在网络上，但我不知道我想如何继续，

我不想只用参数发出“发布请求”，我想在服务器中发布我的文件......

实际上，我已连接到此服务器，但它找不到我的文件...

```
public void SentPostReport()
    {

        //Post response.
        string url = this.CurentReportkPI.configXml.gw; // string url 
        Uri uri = new Uri(url);

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.Accept = "application/CSV";
        request.Method = "POST";
        request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);
    }

    private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        // End the operation
        Stream postStream = request.EndGetRequestStream(asynchronousResult);

        // I create My csv File 
        CreateCsv reportCsv = new CreateCsv();
        string pathReportFile = reportCsv.CreateNewReport(this.report);
        string CsvContent = reportCsv.ReadFile(pathReportFile);

        // Convert the string into a byte array.
        byte[] byteArray = Encoding.UTF8.GetBytes(CsvContent);

        // Write to the request stream.
        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();

        // Start the asynchronous operation to get the response
        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
    }

    private static void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        Debug.WriteLine("GetResponseCallback");
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        // End the operation
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();
        StreamReader streamRead = new StreamReader(streamResponse);
        string responseString = streamRead.ReadLine();
        // Close the stream object
        streamResponse.Close();
        streamRead.Close();

        // Release the HttpWebResponse
        response.Close();
    } 
```

当我着手解决我的问题并将我的 CSV 文件与我的请求一起发送时，你有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:36:05.390

不确定这是否是这里的问题，但是在 POST 请求中，您应该设置 ContentLength 和 ContentType ("application/x-www-form-urlencoded") 标头，除此之外...

请检查[这篇](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)关于完全正确的 POST 请求的“操作方法”文章——它不适用于 Windows Phone，但我认为你仍然会得到完整的想法！

另一方面，我建议您选择[RestSharp](http://restsharp.org/)，它将为您解决所有这些问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:38:57.067

您可以使用带有 AddFile 方法的 RestSharp 或 Hammock 轻松完成此操作。这是我使用 Hammock 上传照片的示例：

```
var request = new RestRequest("photo", WebMethod.Post);
request.AddParameter("photo_album_id", _album.album_id);
request.AddFile("photo", filename, e.ChosenPhoto);
request.Client.BeginRequest(request, (restRequest, restResponse, userState) =>
    { 
        // handle response 
    } 
```

# java - 用于从特定文件中提取信息的正则表达式

> ID：10124152
> 
> 赞同：0
> 
> 时间：2012-04-12T13:04:17.373
> 
> 标签：java, regex

对于作业，我需要从文件中提取某些信息（在 java 中），文件中的文本类似于：

```
OFFICE_MANAGEMENT =     Higher ManagementCONSTRUCTION = SupervisorCONTRACT_MANAGEMENT = Contract ManagerPROJECT =   Project ManagerLOCATION = User Specified LocationDEPARTMENT = Local......... 
```

我需要提取每个特定项目

我在正则表达式方面几乎没有经验，但我试过了。

如果我使用类似的东西

```
OFFICE_MANAGEMENT =\s*([a-z A-Z]*)\s* 
```

我明白了

```
Higher ManagementCONSTRUCTION 
```

结果。我可能不会更改文本:(

我怎样才能确保他把所有东西都拿走，直到下一个项目。我在想他需要阅读所有内容，直到下一个单词超过一个大写字母，但我不知道该怎么做。

因此，任何帮助或建议都将受到欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:17:40.380

假设键都是大写的（可能加上下划线）：

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile(
    "([\\p{Lu}_]+)  # one or more characters, all caps and underscores\n" +
    "\\s*=\\s*      # equals sign, possibly surrounded by whitespace\n" +
    "([^=]+)        # any letters except equals sign\n" +
    "(?<=\\p{Ll})   # but only until the last lowercase letter", 
    Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group());
} 
```

将您的字符串分成

```
OFFICE_MANAGEMENT =     Higher Management
CONSTRUCTION = Supervisor
CONTRACT_MANAGEMENT = Contract Manager
PROJECT =   Project Manager
LOCATION = User Specified Location
DEPARTMENT = Local 
```

（并且对于每个匹配项，`regexMatcher.group(1)`包含标题和`regexMatcher.group(2)`描述。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:13:41.523

尝试类似的东西

```
[A-Z_]+\s*=\s*(?:\s?[A-Z][a-z]+)+ 
```

[在 Regexr 上](http://regexr.com?30kd8)查看

这将匹配一个由大写和下划线组成的单词，`=`以及等号之后的一个或多个单词，以大写开头，然后是小写。

这里是 Java Unicode 版本：

```
String text = "OFFICE_MANAGEMENT =     Higher ManagementCONSTRUCTION = SupervisorCONTRACT_MANAGEMENT = Contract ManagerPROJECT =   Project ManagerLOCATION = User Specified LocationDEPARTMENT = Local";

Pattern p = Pattern
            .compile("[\\p{Lu}\\p{Pc}]+\\s*=\\s*(?:\\s?\\p{Lu}\\p{Ll}+)+");
Matcher m = p.matcher(text);
while(m.find()){
    System.out.println(m.group(0));
} 
```

`\\p{Lu}`具有大写字母属性的 Unicode 代码点

`\\p{Ll}`具有小写字母属性的 Unicode 代码点

`\\p{Pc}`连接单词的标点符号，例如下划线

[有关Unicode 代码属性](http://www.regular-expressions.info/unicode.html#prop)的更多详细信息，请参见此处。

# java - 更正 Java 程序代码片段

> ID：10124157
> 
> 赞同：3
> 
> 时间：2012-04-12T13:04:43.750
> 
> 标签：java, java.util.scanner

我是学习Java的初学者，并通过回答以前过去试卷上的问题来修改我的考试，并且有一个问题我被困住了。

**考虑下面的代码片段，它读取输入命令然后对其进行处理。**

```
String cmd = scanner.next();

if (cmd == "forward" )
    robot.forward(1);
else if (cmd == "turn" ) 
    robot.turn();
else
     System.out.println("Unknown command: " + cmd); 
```

**在测试程序时，扫描仪将字符串“forward”读入 cmd，但程序输出“Unknown command: forward”。**

**a) 详细解释为什么会发生这种情况。**

**b) 应对代码进行哪些更改以纠正此错误。**

如果有人可以帮助我回答问题**a)**和**b)**，我将不胜感激。

ps 我知道这不是一个只寻找答案的网站（#noeasywayout），所以我会尽量不要在这里贪婪。对于任何不便，我深表歉意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T13:09:23.437

*这个老栗子...*

在 java 中，`==`测试两个操作数是否是*完全相同的 object*，显然它们不是（其中一个对象是 String 常量，另一个是从输入中读取的）。

使用[`String.equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法来比较它们的*值*。

试试这个：

```
if (cmd.equals("forward"))
    robot.forward(1);
else if (cmd.equals("turn")) 
    robot.turn();
else
    System.out.println("Unknown command: " + cmd); 
```

顺便说一句，使用这种代码模式，如果是，请当心调用`.equals()`-`cmd`你`null`会得到一个[NPE](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html)。在不添加任何代码的情况下避免这种情况的常用方法是使用“yoda 测试”（具有“反转”逻辑的测试）：

```
if ("forward".equals(cmd))
    robot.forward(1);
else if ("turn".equals(cmd)) 
    robot.turn();
else
    System.out.println("Unknown command: " + cmd); 
```

如果是，此代码不会抛出[NPE](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html)`cmd``null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:08:58.490

尝试 cmd.equalsIgnorecase 或 cmd.equals 而不是 ==。

```
String cmd = scanner.next();

if (cmd.equals("forward") )
   robot.forward(1);
else if (cmd.equals("turn") ) 
   robot.turn();
else
 System.out.println("Unknown command: " + cmd); 
```

String 是一个对象的原因，当您使用 == 时，它会进行对象比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:13:31.550

[请参阅Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)中的此部分：

> 15.21.3 引用相等运算符 == 和 !=
> 
> 虽然 == 可用于比较 String 类型的引用，但这样的相等性测试确定两个操作数是否引用相同的 String 对象。如果操作数是不同的 String 对象，则结果为 false，即使它们包含相同的字符序列。可以通过方法调用 s.equals(t) 来测试两个字符串 s 和 t 的内容是否相等。

# android - 通过电子邮件发送图像，Android？

> ID：10124158
> 
> 赞同：4
> 
> 时间：2012-04-12T13:04:45.343
> 
> 标签：android, image, email, bitmap

我正在尝试制作一个应用程序来捕获图像并通过电子邮件发送，我通过以下代码成功实现了它

```
 String path = Images.Media.insertImage(getContentResolver(), bmp,"title", null);
    Uri screenshotUri = Uri.parse(path);
    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    emailIntent
            .putExtra(android.content.Intent.EXTRA_EMAIL, emailAddresses);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    emailIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
    emailIntent.setType("image/png");
    startActivity(Intent.createChooser(emailIntent, "Send email using")); 
```

但是图像以小尺寸和非常低的分辨率发送？！对于发送具有实际尺寸和分辨率的图像有什么建议吗？！或者有没有其他方法可以从相机结果中获取 jpeg 图像而不是位图？！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:10:57.547

`bmp`是我假设的位图吗？然后你可以使用压缩来保存图像[http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream% 29](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)方法从位图类中将其写入文件，然后从文件中创建一个Uri。

插入图像时，您从 Media 收到的 Uri 可以是缩小版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:46:06.607

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, EMAIL_SUBJECT);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, EMAIL_TEXT);
File newFile = new File(Environment.getExternalStorageDirectory(), IMAGE_PATH);
emailIntent.putExtra(android.content.Intent.EXTRA_STREAM,Uri.fromFile(newFile));
startActivity(emailIntent); 
```

# android - SDK rev 18 更新中未找到基于 Android x86 的系统映像

> ID：10124159
> 
> 赞同：4
> 
> 时间：2012-04-12T13:04:47.760
> 
> 标签：android, windows, android-emulator, x86, intel

昨天我已经将 Android SDK 更新到 rev 18，但是 API 级别 14 和 15 只有 ARM EABI v7a 系统映像，而在[本教程](http://developer.android.com/guide/developing/devices/emulator.html#accel-vm)中，他们说我可以使用基于 x86 的系统映像来获得更好和更流畅的模拟器性能。我检查了 sdk-folder\tool\ 并且“emulator-86.exe”也存在，但没有创建 x86 AVD 来运行它。我还安装了 HAXM，它在我的机器上运行良好。在 GUI AVD 创建中，每个 API 级别的 CPU/ABI 下拉框也被禁用。

那么我在哪里可以找到并为我的 Android SDK 使用基于 x86 的系统映像？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:23:12.297

[您还可以直接从英特尔网站](http://software.intel.com/en-us/android/)下载用于 HAXM 和仿真器的图像。[此链接](https://software.intel.com/en-us/android/articles/android-44-kitkat-x86-emulator-system-image)上的当前版本是 API 19 (4.4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:22:18.753

15 是当前的最高 API 级别。只有 SDK 工具和插件的修订级别为 18。在 Windows 系统中，您会在下面找到您的 AVD：**\users\you\.android\avd**

# java - 如何使用 Eclipse IDE 查找注释用法？

> ID：10124162
> 
> 赞同：17
> 
> 时间：2012-04-12T13:04:53.423
> 
> 标签：java, eclipse, annotations

使用 Eclipse IDE，我想获得一个使用特定 Java 注释注释的所有“事物”的列表。

例如，我想在 Spring Framework 的源代码或 JAR 中获取使用 @Bean 注释的所有方法的列表。

我知道可以以编程方式查找注释使用情况，正如[这个问题](https://stackoverflow.com/questions/862106/how-to-find-annotated-methods-in-a-given-package)中所指出的那样。相反，我想在我的 Eclipse IDE 中查看开发时的注释使用情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T13:09:31.017

您可以在 Eclipse 中搜索参考资料。单击注释名称，然后右键单击，选择“参考”并选择搜索范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T13:23:56.760

您可以按住 Control 键单击将打开注释定义类的注释，然后右键单击并选择`References`-> `Workspace`。

编辑：我刚刚检查过它，只需右键单击提到的注释并选择`References`->`Workspace`甚至无需进入其定义即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-18T22:11:01.810

在[STS](https://spring.io/tools)中，搜索中有一个选项：

[![STS 切入点匹配](../Images/58135527f06190d9a6261568adb1b333.png)](https://i.stack.imgur.com/MGR3D.png)

您可以在其中指定例如：`@target(org.springframework.stereotype.Service)`这将找到所有标记为的类`@Service`

# r - 如何从 R 和 Igraph 中的名称顶点获取 id 顶点？

> ID：10124168
> 
> 赞同：5
> 
> 时间：2012-04-12T13:05:11.557
> 
> 标签：r, igraph

我有一个名称从 1 到 10 的图表

```
library(igraph)
library(Cairo)

    g<- graph(c(0,1,0,4,0,9,1,7,1,9,2,9,2,3,2,5,3,6,3,9,4,5,4,8,5,8,6,7,6,8,7,8),n=10,dir=FALSE)
    V(g)$name<-c(1:10)
    V(g)$label<-V(g)$name
    coords <- c(0,0,13.0000,0,5.9982,5.9991,7.9973,7.0009,-1.0008,11.9999,0.9993,11.0002,7.9989,13.0009,10.9989,14.0009,5.9989,14.0009,7.0000,4.0000)
    coords <- matrix(coords, 10,2,byrow=T)
    plot(g,layout=coords)

listMn<-neighborhood(g,1,0:9) 
```

我想这样做，但以相反的方式

```
m1<-V(g)[listMn[[7]]]$name 
```

上述说明得到，

```
7 4 8 9 
```

如何从名称 7 4 8 9 中获取 listMn[[7]]=6 3 7 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:24:49.570

节点编号从零开始：`listMn[[7]]`给出第七个节点（编号6，名称7）的邻居的编号，即6,3,7,8，对应名称（编号加1）7,4,8， 9.

使用字符串作为名称可能不会那么混乱：

```
V(g)$name <- as.character( 1:10 ) 
```

# eclipse - Eclipse 插件开发——Bundle-ClassPath 定义

> ID：10124172
> 
> 赞同：4
> 
> 时间：2012-04-12T13:05:19.990
> 
> 标签：eclipse, plugins

我正在开发需要使用 JDBC 驱动程序的插件（mysql-connector-java-5.1.19-bin.jar）。当我在插件清单中定义此 jar 文件的路径时，如下所示：

`Bundle-ClassPath: lib/mysql-connector-java-5.1.19-bin.jar`

插件停止识别我的视图，我得到这个异常：

```
java.lang.ClassNotFoundException: diplomaproject.views.SampleView
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:494)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:398)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:326)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:231)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1193)
... 
```

当我删除行时：

`Bundle-ClassPath: lib/mysql-connector-java-5.1.19-bin.jar`

从清单来看，视图正在运行，但 JDBC 连接器不起作用。

我的整个清单文件：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: DiplomaProject
Bundle-SymbolicName: diplomaProject; singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: diplomaproject.Activator
Bundle-Vendor: MYDIPLOMA
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ActivationPolicy: lazy
Bundle-ClassPath: lib/mysql-connector-java-5.1.19-bin.jar 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:49:16.153

您必须在包类路径中添加一个点 ('.')。这会将所有从插件中包含的源编译的类添加到类路径中。

清单中的正确属性应该是：

```
Bundle-ClassPath: lib/mysql-connector-java-5.1.19-bin.jar,
 . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:49:46.240

您还需要将包添加到类路径中。尝试这个：

```
Bundle-ClassPath: .,lib/mysql-connector-java-5.1.19-bin.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T05:57:54.747

我面临着同样的问题。由于某些更改，我的 build.properties 文件已更改。

我替换了 similler 项目中的内容并且它有效。

# nhibernate - 为同一个映射表切换数据库

> ID：10124174
> 
> 赞同：2
> 
> 时间：2012-04-12T13:05:26.780
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我使用 Fluent NHibernate，现在必须处理存档数据，其中同一个表存在于多个 MSSQL 数据库中。根据用户提供的日期值，我必须连接到不同的数据库，而所有映射信息保持不变。

更具体：如果提供的 Date 值在当前年份内，则使用 DB `CUR`，否则使用年度 DB（2011、2010、2009、...）。

现在有一段时间人们告诉我一遍又一遍地重新创建一个 SessionFactory 是一件相当昂贵的事情，所以我心想一定有一种方法可以使用现有的 sessionFactory，更新我的 ClassMap（类似于更改架构从“CUR.DBO”到“2011.DBO”）并重新连接。

我尝试将 FluentConfiguration 和 SessionFactory 弄得一团糟，但**~~后来我膝盖中了一箭，~~**找不到在运行时刷新映射的方法。

我最终会创建一个新的 SessionFactory 吗？或者有没有人知道在运行时重新初始化（Fluent）NHibernate 映射的可行程序？

**编辑：**一个非常重要的细节，SqlConnection 也是外部提供的。它提供对所有数据库的访问，这意味着理论上我永远不必创建连接。所以，基本上我要做的就是为每个 Archive 创建一个 SessionFactory 来更新 Mapping 的 Schema 信息，指向另一个数据库。但这正是我卡住的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:10:29.083

确实，创建会话工厂是比创建会话更昂贵的操作，因此您当然不想为对数据库的每个查询都创建一个。

但是，根据我的经验，最多只需要几秒钟。

我建议您每次用户选择不同的年份时创建一个新的。如果您在发生这种情况时给他们很好的反馈（可能是一个对话框，上面写着“连接到 2010 数据库”，带有进度条），他们可能不会介意等待。

一旦你创建了一个一年，如果他们在同一年进行更多查询，你可以重复使用它，所以他们每年只需要等待一次被查询。

如果创建会话工厂花费的时间太长，我已经看到了解释如何保存或缓存配置以减少创建时间的帖子。然而，一个快速的谷歌并没有找到任何好的链接，所以你可能需要研究一下，或者问另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:04:47.073

感谢您的回复/评论。实际上我还没有找到重用会话工厂的方法，所以我最终按照建议为它们创建了一个查找列表。以下解决方案可以满足我的需要（更改数据库），我们将了解它的执行方式：

```
 private IDictionary<string, ISessionFactory> _sessionFactories;

    public SqlConnection Connection { get; set; }

    public ISessionFactory GetSessionFactory(string dbName)
    {
        if (_sessionFactories.ContainsKey(dbName))
        {
            return _sessionFactories[dbName];
        }

        FluentConfiguration cfg = Fluently.Configure().Database(MsSqlConfiguration.MsSql2008
                                                                .ShowSql()
                                                                .ConnectionString(c=>c.Is(Connection.ConnectionString)))
                                                      .Mappings(x=>x.FluentMappings.Add<MappedClassMap>());
        cfg.ExposeConfiguration(x => x.GetClassMapping(typeof(MappedClass)).Table.Schema = string.Format("{0}.dbo",dbName));
        ISessionFactory sf = cfg.BuildSessionFactory();
        _sessionFactories.Add(dbName, sf);
        return sf;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T12:38:48.133

如果为单个数据库创建 sessionfactory 似乎就足够了。但是，在使用 Sessionfactory 实例打开会话时，可以使用重载方法来提供 dbconnection 对象，我们可以在其中切换数据库。已经验证它并且它工作正常。

# mysql - 如何从此表中选择并添加平均值然后排序

> ID：10124176
> 
> 赞同：-9
> 
> 时间：2012-04-12T13:05:28.467
> 
> 标签：mysql, select, average

> **可能重复：**
> [如何在 mysql 表中选择、平均和排序](https://stackoverflow.com/questions/10123110/how-to-select-average-and-sort-in-mysql-table)

我在 mySql 中有一个表，就像这张图片一样

![在此处输入图像描述](../Images/3f17b187891a3c236d2fa35204414473.png)

我想编写一个查询，其结果将按 LESSON 列分组，并添加新行，即 LESSON 列的平均值和 CNT 列值的总和....
![在此处输入图像描述](../Images/ed7062dab8464adbc73d20179a999238.png)

我使用这个查询，但它给出的结果如图 3 所示，在这种情况下我无法按 PERC 排序

```
select no, STUD_ID,CLASS,LESSON, AVG(PERC) as PERC,SUM(CNT) as CNT from t_lesson where LESSON='CHEM' group by CLASS
union all
select no,STUD_ID,CLASS,'AVERAGE' as LESSON, AVG(PERC) as PERC, SUM(CNT) as CNT from t_lesson where LESSON='CHEM' group by LESSON 
```

![在此处输入图像描述](../Images/ff478701c2eb35ca5401585f30d744bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:23:00.040

```
select * from <your query> order by PERC 
```

至：

```
select * from (

select no, STUD_ID,CLASS,LESSON, AVG(PERC) as PERC,SUM(CNT) as CNT from t_lesson where LESSON='CHEM' group by CLASS
union all
select no,STUD_ID,CLASS,'AVERAGE' as LESSON, AVG(PERC) as PERC, SUM(CNT) as CNT from t_lesson where LESSON='CHEM' group by LESSON

) as sub order by PERC DESC 
```

# r - R“图像”函数的意外转置翻转输出

> ID：10124180
> 
> 赞同：4
> 
> 时间：2012-04-12T13:05:35.650
> 
> 标签：r, image, matrix, transpose

假设我有一个矩阵：

```
m<-matrix(1:5,4,5)
m
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    5    4    3    2
[2,]    2    1    5    4    3
[3,]    3    2    1    5    4
[4,]    4    3    2    1    5 
```

现在，当我这样做时

```
image(m) 
```

我得到了意想不到的输出。所以我需要做：

```
image(t(m)[,4:1]) 
```

以“正确”的方式获得它。重点是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:19:48.393

从帮助文件：

> 请注意，图像将 z 矩阵解释为 f(x[i], y[j]) 值的表，因此 x 轴对应于行号，y 轴对应于列号，底部为第 1 列，即矩阵的传统印刷布局逆时针旋转 90 度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T18:42:37.607

其他人指出，您所看到的与文档一致，这里有一些关于它为什么这样做的想法。

image 函数最初不是为了绘制图像/图形而设计的，而是以图形方式表示表格信息，因此事物的顺序旨在与其他图形理想保持一致，而不是确保剪贴画看起来正确。这意味着图像的旋转和镜像不会使其“错误”，它只是一个不同的视图，并且选择了遵循绘图规则的视图。

它还试图与其他图形功能及其所基于的理念保持一致。对于散点图，我们使用`plot(x,y)`with`x`作为水平轴，但是当我们这样做时`table(x,y)`，`x`变量会形成结果表的行。这两个事实都符合惯例（解释变量通常是表中的行变量，因为数字更容易垂直比较）。所以图像函数使用矩阵的行（x 变量，如果它来自表函数）作为水平轴上的预测变量/解释变量。绘图中的值也习惯于从左到右和从下到上增加（但在表格中更常见的是从上到下增加）。

# mysql - mysql：重命名连接的所有字段

> ID：10124181
> 
> 赞同：3
> 
> 时间：2012-04-12T13:05:41.907
> 
> 标签：mysql, sql

我没有找到任何相关的信息。

这是我的查询：

```
SELECT p.*, pa.*, a.*
FROM produit p
LEFT OUTER JOIN produit_attribut pa
ON p.id=pa.id_produit
LEFT OUTER JOIN attribut a
ON a.id=pa.id_attribut
ORDER BY p.id,a.id; 
```

但问题是它返回列

```
with the same name:

+----+------------+-----+------------+-------------+------+-----+----+----+
| id | titre      | desc| id_produit | id_attribut | id   | desc| val| abb|
+----+------------+-----+------------+-------------+------+-----+----+----+
|  1 | Anchois    | Sauc|          1 |           1 |    1 | Nomb| 2  | Nb |  
|  2 | Fromage    | Sauc|          2 |           1 |    1 | Nomb| 2  | Nb |  
|  3 | Mozzarella | Sauc|          3 |           1 |    1 | Nomb| 2  | Nb |  
|  4 | Jambon     | Sauc|          4 |           1 |    1 | Nomb| 2  | Nb |  
|  5 | Roquefort  | Sauc|          5 |           1 |    1 | Nomb| 2  | Nb |  
|  6 | Royale     | Sauc|          6 |           1 |    1 | Nomb| 2  | Nb | 
```

我想知道是否有办法重命名表的所有字段，可能看起来像（我知道以下 sql 不起作用）：

```
SELECT p.* as p*, pa.* as pa*, a.* as att*
FROM produit p
LEFT OUTER JOIN produit_attribut pa
ON p.id=pa.id_produit
LEFT OUTER JOIN attribut a
ON a.id=pa.id_attribut
ORDER BY p.id,a.id; 
```

顺便说一句，我知道我可以做类似的事情：

```
SELECT
  p.id AS p_id,
  p.titre AS p_titre,
  p.description AS p_description,
  p.prix AS p_prix,
  p.text_detail AS p_text_detail,
  p.img_petite AS p_img_petite,
  p.img_grande AS p_img_grande,
  pa.id_produit AS pa_id_produit,
  pa.id_attribut AS pa_id_attribut,
  a.id AS a_id,
  a.description AS a_description,
  a.valeur AS a_valeur,
  a.abbreviation AS a_abbreviation
FROM produit p
LEFT OUTER JOIN produit_attribut pa
ON p.id=pa.id_produit
LEFT OUTER JOIN attribut a
ON a.id=pa.id_attribut
ORDER BY p_id,a_id; 
```

但我想避免这种情况。

我希望请求是通用的，因为我将在 Php 中使用这个请求，它是关于通用 CRUD 组件（和嵌套表）的。

有办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:08:28.870

不，没有办法做到这一点。但是，您应该尽量避免使用`*`反正来选择列，因此通过这种重构，您可以摆脱两者，`*`并且可以将别名添加到您需要将它们添加两个的所有列。一石两鸟！;)

# jquery - 使用 jquery 加载外部图像

> ID：10124188
> 
> 赞同：1
> 
> 时间：2012-04-12T13:06:09.163
> 
> 标签：jquery

我尝试使用此代码更改 img 图像，它在 localhost 中工作，但在我的主机上工作。这些是我的方式：

```
$("#btnChangImg").click(function () {
             $("#Div").html('<img id="img" alt="" src="/Test/2.jpg" />');
}); 
```

这是我所采用的另一种方式：

```
$("#btnChangImg").click(function () {
             $("#img").attr("src", "/Test/2.jpg");
}); 
```

#img 的 src 现在是“/Test/1.jpg”，应该改为“/Test/1.jpg”

这是我的 HTML：

```
<form id="form1" runat="server">
<div id="Div">
    <img id="img" alt="" src="/Test/1.jpg" />
</div>
<input id="btnChangImg" type="button" value="button" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:22:39.437

你可以这样做 ：

```
$("div").click(function(){
    $("img").attr("src", "secondImage.jpg")            
}) 
```

这是我制作的一个 jsFiddle：http: [//jsfiddle.net/ZjQ7t/1/](http://jsfiddle.net/ZjQ7t/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:19:44.687

如果您使用的是 ASP.NET 或类似的东西，则在呈现页面时您的 id 可能会更改，因为您的代码是正确的

```
$("#btnChangImg").click(function () {
             $("#img").attr("src", "/Test/2.jpg");
}); 
```

看看这里的小提琴[http://jsfiddle.net/KBWk8/](http://jsfiddle.net/KBWk8/)

# module - Makefile: Avoid compiling Fortran modules for new folder

> ID：10124191
> 
> 赞同：3
> 
> 时间：2012-04-12T13:06:11.780
> 
> 标签：module, makefile, fortran

I have a Fortran program that uses modules, i.e. it creates `.mod`-files during compilation. I also wrote a `Makefile` that uses all the `.f90`-files from `src/` puts all created `.o`-files in `obj/` and the binary in the current folder, and everything works fine.

I now recompile my program in different folders for different calculations (say `calc1/`), i.e. I copy the `Makefile` into `calc1/`, type `make all` in `calc1/` and all it does is the linking, because the object-files already exist. However, if the program includes any modules the compiler needs the corresponding `.mod`-files to be present in `calc1/`. Until now, I recompiled everything (`make clean all`), but with the program growing this takes too much time!

A possible solution I came up with is to have one specific folder for the binaries (`bin/`). But this is not a viable option because I have jobs in the queue, which obviously need a stable binary, while I also try new features in the meantime.

So, I'm looking for a solution that somehow treats the `.mod`-files similar to `.o`-files, e.g. places them in `obj/`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:23:25.670

I would expect that (most?) compilers would specify an option to change the module file path. with `gfortran`, the option is `-J` or `-M` (from the man page):

```
-Jdir
-Mdir
       This option specifies where to put .mod files for compiled modules.  It is also
       added to the list of directories to searched by an "USE" statement.

       The default is the current directory.

       -M is deprecated to avoid conflicts with existing GCC options. 
```

I think that most compilers look for .mod files in directories included with `-I`

**EDIT**

As of gfortran 4.6, `-M` is no longer supported. Use `-J`

based on one of my configure scripts, the flag is `-module` for `ifort` and `pgf90` although I almost never use those compilers these days so somebody else should confirm that ...

# list - 如何在 Scheme 中使用 Car 和 Cdr 破解 (11 (12 13))

> ID：10124194
> 
> 赞同：3
> 
> 时间：2012-04-12T13:06:13.837
> 
> 标签：list, functional-programming, scheme

我只需要从列表中返回那些奇数的值，所以我试图使用 car 和 cdr 函数来打破我的列表。我有一个递归函数调用，它检查 Car 是否返回一个列表，然后使用 car 和 cdr 进一步打破它，否则只需将第一个元素传递给函数调用，检查是否为奇数。

特殊情况 (10 11 (12 13)) 的问题是 car 返回 10 cdr 返回 (11 (12 13))

然后在第二次迭代中 car 返回 (11 (12 13)) cdr 返回 (11 (12 13))

所以我怎样才能使用 car 和 cdr 进一步打破我的清单。我需要在最终答案中保留括号，并且只返回具有奇数整数值的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:13:59.507

对于需要在任意嵌套列表上工作的函数，我发现很容易首先编写平面列表版本（在我们的例子中为 filter-odd），然后对其进行编辑以生成嵌套版本（我将其称为 filter-odd*）

首先是普通过滤器 - 奇数

```
(define filter-odd
   (lambda (ls)
      (cond
        [(null? ls) '()]
        [(odd? (car ls)) (cons (car ls) (filter-odd (cdr ls)))]
        [else (filter-odd (cdr ls))]))) 
```

现在对于 filter-odd* （右侧将留作练习（尽管您似乎知道问题的答案））

```
(define filter-odd*
   (lambda (ls)
      (cond
        [(null? ls) '()]
        [(list? (car ls)) #| Do something with both car and cdr of ls |# ]
        [(odd? (car ls)) (cons (car ls) (filter-odd* (cdr ls)))]
        [else (filter-odd* (cdr ls))]))) 
```

需要注意的是，这种设计模式可用于帮助编写任何递归程序，并将其从仅处理平面列表转换为处理任意深度的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:15:41.427

对于具有任意嵌套级别的列表，这是一个通用解决方案：

```
(define (odds-list lst)
  (cond ((null? lst) '())                 ; the list is empty
        ((not (list? (car lst)))          ; first element is not a list
         (if (odd? (car lst))             ; element is odd
             (cons (car lst) (odds-list (cdr lst))) ; build the returned list
             (odds-list (cdr lst))))      ; element is even
        (else (cons (odds-list (car lst)) ; first element is a list
                    (odds-list (cdr lst)))))) 
```

请注意，需要考虑三种情况：

1.  如果列表为空
2.  如果列表的第一个元素不是列表
3.  如果列表的第一个元素是列表

对于第二种情况，需要考虑另外两种情况：

1.  如果元素是奇数，那么我们将它添加到返回的列表中
2.  如果元素是偶数，我们跳过它并继续下一个元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T10:18:36.677

这是我的看法：

```
(define filter*
  (lambda (e f)
    (cond ((pair? e)
           (append (filter* (car e) f)
                   (filter* (cdr e) f)))
          ((null? e) '())
          ((f e) (list e))
          (else '())))) 
```

然后你可以这样做：

```
> (filter* '(1 (2 . 3) ((4 . 5))) even?)
(2 4)
> (filter* '(1 (2 . 3) ((4 . 5))) odd?)
(1 3 5) 
```

# safari - 在 OSX 10.7 上的 Safari 5.1 中隐藏 Flash SWF 对象的问题（它适用于 10.6 上的 Safari 5.1）

> ID：10124197
> 
> 赞同：1
> 
> 时间：2012-04-12T13:06:21.940
> 
> 标签：safari, osx-lion, swfobject

我正在使用 JS 在流程的各个阶段隐藏和显示 Flash 视频对象。该功能在所有浏览器中都能完美运行，包括 OSX 10.6 上的 Safari 5.1，但不适用于 OSX 10.7 上的 Safari 5.1.3、5.1.4 和 5.1.5。它在页面上重新定位，但仍然可见。

你可以在[这里](http://www.test.launchpadrecruits.com/interviews/demo)看到问题。

任何帮助真的很感激！

**嵌入代码：**

```
 var swfVersionStr="10.2.0";
  var xiSwfUrlStr="/video/expressInstall.swf";
  var flashvars={
    sToken:"#{@stream_name}",
    sSWFPath: "/video/Recorder.swf",
    sConfigPath: "#{current_recorder_config_file}"
  };
  var params={
    bgcolor:"#FFFFFF",
    allowfullscreen:"true",
    allownetworking:"all",
    allowscriptaccess:"always",
    base:".",
    devicefont:"false",
    menu:"false",
    play:"true",
    quality:"high",
    salign:"tl",
    scale:"showall",
    seamlesstabbing:"false",
    swliveconnect:"true",
    wmode:"window"
  };

  var attributes={
    id:"Recorder",
    name:"Recorder"
  };
  swfobject.embedSWF("/video/Recorder.swf", "flashContent", "384", "318", swfVersionStr, xiSwfUrlStr, flashvars, params, attributes); 
```

**隐藏和显示的 JS：**

```
function hideVideo() {$('.step_video, #flashContent').css({visibility:'hidden', height:1})}

function showVideo() {$('.step_video, #flashContent').css({visibility:'visible', height:'auto'})} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:01:50.317

在你不应该隐藏它之前已经有这个错误，这是一个闪光灯的错误。我的解决方法是：

```
 position: absolute;
  left: -5000px; 
```

# java - GWT 序列化 TreeMap 的排序/比较器

> ID：10124202
> 
> 赞同：4
> 
> 时间：2012-04-12T13:06:38.293
> 
> 标签：java, serialization, gwt, guava, treemap

我有一个带有 TreeMap 的可序列化对象。

```
Map<String, Dogs> dogsByNames = Maps.newTreeMap(); // guava style 
```

到目前为止，一切都很好。现在可以忽略键的大小写：

```
Map<String, Dogs> dogsByNames = Maps.newTreeMap(String.CASE_INSENSITIVE_ORDER); 
```

这不起作用，因为 String.CASE_INSENSITIVE_ORDER 不可序列化：

> com.google.gwt.user.client.rpc.SerializationException：类型“java.lang.String$CaseInsensitiveComparator”未包含在可由此 SerializationPolicy 序列化的类型集中，或者无法加载其 Class 对象。出于安全考虑，此类型不会被序列化。: instance = java.lang.String$CaseInsensitiveComparator@f26f68

所以我创建了自己的：

```
private static abstract class MyComparator<T>
    implements
        Comparator<T>, // extends Ordering<T> do not work
        IsSerializable { // Serializable do not work
}

public static final MyComparator<String> CASE_INSENSITIVE_ORDER = new MyComparator<String>() {
    @Override
    public int compare(final String left, final String right) {
        if (null == left) {
            return (null == right) ? 0 : -1;
        } else if (null == right) {
            return 1;
        }
        return left.compareToIgnoreCase(right);
    }
}; 
```

但这仍然行不通。

怎么了？

**解决方案：**

```
protected static class MyOrdering // no-private!!!
    extends
        Ordering<String>
    implements
        IsSerializable {
    @Override
    public int compare(final String left, final String right) {
        if (null == left) {
            return (null == right) ? 0 : -1;
        } else if (null == right) {
            return 1;
        }
        return left.compareToIgnoreCase(right);
    }
}

public static final Ordering<String> CASE_INSENSITIVE_ORDER = new MyOrdering(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T00:44:02.167

您创建的 CASE_INSENSITIVE_ORDER 是一个匿名类，无法在 GWT 中序列化。要使其 GWT 可序列化，您需要

1.  创建一个自定义顶级类（如

    ```
    CaseInsensitiveOrder implements Comparator<..>, Serializable {
        ...
    } 
    ```

2.  `CASE_INSENSITIVE_ORDER`像你一样创建一个常量。

3.  为该类 ( `CaseInsensitiveOrder_CustomFieldSerializer`) 创建一个自定义字段序列化程序，它返回`CASE_INSENSITIVE_ORDER`实例 on `deserialize()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:08:16.310

**错误的堆栈跟踪会很有帮助。**但是我会冒险猜测您会遇到以下异常：

> com.google.gwt.user.client.rpc.SerializationException：类型 'com.foo.Bar.MyComparator' 未包含在可由此 SerializationPolicy 序列化的类型集中，或者无法加载其 Class 对象。出于安全考虑，此类型不会被序列化

发生这种情况是因为 GWT 在编译时创建了它可能需要序列化的所有类型的列表。这就是“序列化策略”。为此，GWT 检查所有 RPC 方法的参数和返回类型，并搜索所有“可达”类型。

编译器可能没有意识到您的 Comparator 将被序列化，并且它没有添加到序列化策略中。

一种解决方法是声明一个虚拟方法，该方法将所有可能需要序列化的类型作为参数，如[this other SO answer](https://stackoverflow.com/questions/4202964/serializationpolicy-error-when-performing-rpc-from-within-gwt-application)中所述。就像是：

```
// in your RPC interface
SerializationWhitelist dummyMethodForSerializationPolicy(SerializationWhitelist serializationWhiteList);

// the SerializableWhiteList class
public class SerializationWhitelist {
    public Bar.MyComparator<String> myComparator;
} 
```

# jython - Jython 2.5.3b1 中的 ZipFile.open 在哪里？

> ID：10124203
> 
> 赞同：1
> 
> 时间：2012-04-12T13:06:42.327
> 
> 标签：jython

请注意：

```
PS Z:\dev\poc\SDR> jython.bat
Jython 2.5.3b1 (2.5:5fa0a5810b25, Feb 22 2012, 12:39:02)
[Java HotSpot(TM) 64-Bit Server VM (Sun Microsystems Inc.)] on java1.6.0_27
Type "help", "copyright", "credits" or "license" for more information.
>>> from zipfile import ZipFile
>>> z=ZipFile('d:/ookla/us_aaa.zip')
>>> z.open
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: ZipFile instance has no attribute 'open'
>>> ZipFile.open
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: class ZipFile has no attribute 'open'
>>> 
```

那么，`open`方法在哪里呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T12:30:48.380

它不可用。[ZipFile.open](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.open)是在 Python 2.6 中添加的，但 Jython 仍然是 2.5 版本。

该方法已添加到[Jython 开发存储库](http://hg.python.org/jython/file/tip/Lib/zipfile.py)中。

另请参阅[如何在 Python 2.5 中模拟 ZipFile.open？](https://stackoverflow.com/q/3781261).

# magento - Magento 1.6.2 畅销产品不工作

> ID：10124204
> 
> 赞同：0
> 
> 时间：2012-04-12T13:06:50.403
> 
> 标签：magento

```
$storeId = Mage::app()->getStore()->getId();
$products = Mage::getResourceModel('reports/product_collection')
->addOrderedQty()
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description', 'description'))
->addStoreFilter($storeId)
->setPageSize(4)
->setCurPage(1)
->setOrder('ordered_qty', 'desc')->load(); 
```

畅销书代码在 Magento 1.6.2 中不起作用。该集合甚至没有按商店过滤。

`Zend_Debug::dump($storeId)`; 给了我`string '2' (length=1)`，但我无法执行`Zend_Debug::dump($products->getSelect());`，因为它给了我一个错误`There has been and error processing your request`，它给了我以下查询：

```
SELECT SUM(order_items.qty_ordered) AS ordered_qty, order_items.name AS order_items_name, order_items.product_id AS entity_id, e.entity_type_id, e.attribute_set_id, e.type_id, e.sku, e.has_options, e.required_options, e.created_at, e.updated_at, e.name, e.price, e.small_image, e.short_description FROM tp_sales_flat_order_item AS order_items INNER JOIN tp_sales_flat_order AS order ON order.entity_id = order_items.order_id AND order.state <> 'cancelled' LEFT JOIN tp_catalog_product_entity AS e ON (e.type_id NOT IN ('grouped', 'configurable', 'bundle')) AND e.entity_id = order_items.product_id AND e.entity_type_id = 4 WHERE (parent_item_id IS NULL) GROUP BY order_items.product_id HAVING (SUM(order_items.qty_ordered) > 0) ORDER BY ordered_qty desc LIMIT 4 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-31T09:32:57.123

尝试这个：

```
<?php 
    $products = Mage::getResourceModel('reports/product_collection')
               ->addAttributeToSelect('*')
               ->addOrderedQty($from, $to, true)
               ->addAttributeToSelect(array('name', 'price', 'small_image'))
               ->addCategoryFilter($category)
               ->setStoreId($storeId)
               ->addStoreFilter($storeId)
               ->setOrder('ordered_qty', 'desc');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:42:40.810

我在 magento 1.6.2 中也遇到过这类问题。我在过滤集合时发现属性过滤器存在一些问题。

我已经用**addFieldToFilter替换了****addAttributeToFilter**并且它的工作。

 **试试这个可能对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:57:46.887

尝试这个：

```
$storeId = Mage::app()->getStore()->getId();
$products = Mage::getResourceModel('reports/product_collection')
->addOrdersCount()
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description', 'description'))
->addStoreFilter($storeId)
->setPageSize(4)
->setCurPage(1)
->setOrder('orders', 'desc')->load(); 
```

更改是 addOrdersCount() 方法和 ->setOrder() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T11:07:49.383

尝试为您的收藏设置 storeid。添加 OrderedQty 后插入此行：

```
->setStoreId($storeId) 
```**

# jquery - jQuery Onclick 函数

> ID：10124205
> 
> 赞同：0
> 
> 时间：2012-04-12T13:06:53.740
> 
> 标签：jquery, jquery-animate

我正在使用以下代码，

```
function slideonlyone(thechosenone,selectedHeader) {
    $("#navigation li a").each(function(){
        $(this).removeClass("active");
        $(selectedHeader).addClass("active");
    });     
    $('div[name|="newboxes2"]').each(function (index) {         
        if ($(this).attr("id") == thechosenone) {               
            $(this).slideDown(600);
            $(this).removeClass("active");
            $(this).addClass("active");
        }
        else {
            $(this).slideUp(600);
        }
    });
}
function goToByScroll(id){
    $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
    return false;       
}
$(document).ready(function(){
    $('a.close-btn').click(function () {        
        $('div[name|="newboxes2"]').slideUp(600);
    });     
}); 
```

一切正常。除了那个。我的以下功能工作正常，但在第二次点击时，我希望它在点击导航链接时工作。

```
function goToByScroll(id){
    $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
    return false;       
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:02:14.963

jQuery permite hacer un trigger de los eventos .trigger( event ) y lo coloca en el link apuntando al eventto

在 jquery 上，您可以使用 .trigger( event ) 触发事件，您可以在链接事件上调用它来调用要执行的事件

# delphi - TDataSource 组件放在哪里？

> ID：10124211
> 
> 赞同：8
> 
> 时间：2012-04-12T13:07:13.843
> 
> 标签：delphi

当我将代码拆分为 TDataModule（=访问数据）和 TFom（=显示数据）时，我应该将 TDataSource 组件放在哪里？它属于 TDataModule 还是 TForm？

当创建多个实例时，如何处理 TDataModule 和 TForm 之间的连接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T13:12:13.003

我会把它放在`Datasources`表单中，因为它只是一个与可视控件一起使用的组件。

此外，您可以`Datasouces`在需要时在表单中按需创建，然后在运行时绑定到数据集。在这种情况下，很容易处理 TDataModule 和 TForm 之间的连接。

但这只是**我**的观点：我永远不会使用`DBControls`nor `DataSouces`。我更喜欢手动绑定我的数据，并且比使用`DBControls`和`DataSouces`坚持使用 Borland 创建的一些奇怪的机制具有更大的灵活性。但这只是 MHO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:41:59.657

It is recomended to put your TDatasource components in the Form, but only if the data linked to them is only used by the parent form or any child of it.

Also is recommended to put your TDatasource components on a global TDatamodule when they are linked to global accesible data or list data, like a list of client, countries, etc. Data that may be used in more than one form in your application.

For example, if you have a `TDBLookupCombo`, the TDatasource assigned to `ListSource` property, is a good candidate to be on a TDatamodule.

# .net - 如何在.net中获取给定服务器的共享文件夹

> ID：10124212
> 
> 赞同：0
> 
> 时间：2012-04-12T13:07:17.967
> 
> 标签：.net, shared-directory

> **可能重复：**
> [在 Windows 上列出不安全的共享文件夹](https://stackoverflow.com/questions/6694786/listing-unsecured-shared-folders-on-windows)

我想知道如何在窗口平台上通过给定的服务器名称获取共享文件夹。

我的意思是当用户提交服务器名称“\server”

我想列出共享文件夹。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:52:26.463

我认为您正在寻找的是`NetShareEnum`来自 win32 api 的内容。这里有一些[文档](http://www.pinvoke.net/default.aspx/netapi32/netshareenum.html)

您还可以查看[这篇 codeproject 文章](http://www.codeproject.com/Articles/2939/Network-Shares-and-UNC-paths)。

# php - PHP，MYSQL - 查询失败但没有出现错误信息

> ID：10124213
> 
> 赞同：2
> 
> 时间：2012-04-12T13:07:26.200
> 
> 标签：php, mysql

再次回来，感谢上次的所有帮助。我正在运行这个查询：

```
 $query = "SELECT * FROM event where evLoc = ".$loc." AND evChar = ".$char;
 var_dump($query);
 $result = mysql_query($query, $con) or die('Error 1:'.mysql_error());
 if ($result) {
    $row = mysql_fetch_array($result) or die('Error 2:'.mysql_error());
    var_dump(mysql_num_rows($result));
    exit(); 
```

我收到一条消息 Error 2: but no mysql_error 打印出来。var_dump($query) 打印出在 phpMyAdmin 中运行时没有错误的查询。var_dump(mysql_num_rows($result)) 没有打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:09:40.923

在查询字段中应用单引号

```
 $query = "SELECT * FROM event where evLoc = '".$loc."' AND evChar = '".$char."'"; 
```

你也可以用简短的形式写这些。像

```
$query = "SELECT * FROM event where evLoc = '$loc' AND evChar = '$char'"; 
```

接下来，您可能想要更改获取部分。

```
while($row = mysql_fetch_assoc($result)) { 
 ....
} 
```

当您使用它时，您将避免在没有返回行时收到的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:09:50.457

这是一个*过于*谨慎并在不属于它的地方应用错误检查的情况。

不要`die()`与 fetch 调用合作调用。当没有可用行时，fetch 有意返回 FALSE，因此您没有错误，只是没有行。

```
// No rows were returned, wich is FALSE
$row = mysql_fetch_array($result) or die('Error 2:'.mysql_error()); 
```

相反，不要`die()`在这里调用：

```
$row = mysql_fetch_array($result);
if ($row) {
  // you got something
} 
```

或者这样：

```
if ($row = mysql_fetch_array($result)) {
  // you got something.
} 
```

如果期望返回多行，则在`while`循环中获取。

```
while ($row = mysql_fetch_array($result)) {
  // loops until you're out of rows
  // or not at all if you have no rows
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:10:01.040

显然，您的请求返回 0 行并且 mysql_fetch_array 返回 FALSE

# neo4j - 从 xml 文件初始加载 Neo4j db

> ID：10124216
> 
> 赞同：3
> 
> 时间：2012-04-12T13:07:39.217
> 
> 标签：neo4j

xml（以及它在实体之间的关系）可以用于最初填充 Neo4j 数据库吗？

Neo4j或者一些graph db能否自动解析出实体之间的关系，然后加载db。我想，我以后可以在关系中添加更多细节吗？

PS：我正在阅读 Neo4j，但这可以是任何图形数据库。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:48:58.483

graphML可以使用 blueprints [GraphML loader加载到几乎任何](https://github.com/tinkerpop/blueprints/wiki/GraphML-Reader-and-Writer-Library)[graphdb中](http://en.wikipedia.org/wiki/GraphML)

# asp.net - 在选定的gridview行上显示formview

> ID：10124217
> 
> 赞同：0
> 
> 时间：2012-04-12T13:07:41.097
> 
> 标签：asp.net, c#-4.0

单击gridview中的选定行时，我想显示formview。它在命令字段的帮助下正常工作，而我希望在选择行时显示它。

我也想在新窗口中显示表单视图。我已经为 gridview 和 formview 使用了更新面板，但是当我单击选择按钮时，gridview 和 formview 仍然显示在同一页面上。参考代码

[http://pastebin.com/qnQnAEUy](http://pastebin.com/qnQnAEUy)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:08:54.750

在帮助下解决了

[http://www.geekzilla.co.uk/view9FC28EE6-ACB0-4F51-BFE4-38B0B10134D5.htm](http://www.geekzilla.co.uk/view9FC28EE6-ACB0-4F51-BFE4-38B0B10134D5.htm)。

谢谢大家

# c# - 使用 c# for framework 4.0 在 asp.net webform 中进行 URL 路由/重写

> ID：10124218
> 
> 赞同：2
> 
> 时间：2012-04-12T13:07:47.530
> 
> 标签：c#, asp.net, url-rewriting, webforms

我正在一个几乎完整的网站上工作。网站已在 ASP.Net、C# Framework 4.0 中开发。

我想为 URL 路由/重写添加一个功能，以使我的 URL 更加用户友好。我在网上找到了很多例子，但大多数例子都像[http://www.example.com/phone](http://www.example.com/phone)或[http://www.example.com/computer](http://www.example.com/computer)。

在我的情况下，我的页面依赖于多个查询字符串，例如 PageID、Language、ArticleID。

如何将下面的示例 URL 转换为一个，如下所示

[http://webd:8080/ArticleDetails.aspx?Language=en-US&PageID=19&ArticleID=18](http://webd:8080/ArticleDetails.aspx?Language=en-US&PageID=19&ArticleID=18) 应该是 [http://webd:8080/Article/Article-title-should-appear-here.aspx](http://webd:8080/Article/Article-title-should-appear-here.aspx)

[http://webd:8080/Archive.aspx?PageId=7&Language=en-US](http://webd:8080/Archive.aspx?PageId=7&Language=en-US) 应该是 [http://webd:8080/Archive](http://webd:8080/Archive)

[http://webd:8080/Archive.aspx?PageId=7&Language=en-USx](http://webd:8080/Archive.aspx?PageId=7&Language=en-USx) 应该是 [http://webd:8080/الذاتية/وسوف-تذهب-المادة-الرابعة-العنوان-هنا.aspx](http://webd:8080/%D8%A7%D9%84%D8%B0%D8%A7%D8%AA%D9%8A%D8%A9/%D9%88%D8%B3%D9%88%D9%81-%D8%AA%D8%B0%D9%87%D8%A8-%D8%A7%D9%84%D9%85%D8%A7%D8%AF%D8%A9-%D8%A7%D9%84%D8%B1%D8%A7%D8%A8%D8%B9%D8%A9-%D8%A7%D9%84%D8%B9%D9%86%D9%88%D8%A7%D9%86-%D9%87%D9%86%D8%A7.aspx)

是的，这是一个多语言网站，现在有英语和阿拉伯语版本，以后我们还需要添加西班牙语和其他语言。

我在网上看到的例子很少，但我希望有人能指点我一个完整的例子，如果可能的话，该网站的阿拉伯语版本也有同样的例子。

我应该能够以某种方式传递 Language=en-US PageID=19 ArticleID=18 并创建用户朋友网址。我希望有一个完整的例子让我有一个开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:35:15.223

[过去，我使用了一个名为UrlRewriter.NET](http://urlrewriter.net/)的开源 URL 重写组件，它应该可以帮助您创建所需的 URL。

但是我没有测试过这个组件来显示阿拉伯语。

如果您打算使用 UrlRewriter，这些帖子应该可以帮助您入门：http: [//www.blogiversity.org/blogs/blogdayafternoon/archive/2008/12/18/url-rewriting-using-intelligencia-urlrewriter.aspx](http://www.blogiversity.org/blogs/blogdayafternoon/archive/2008/12/18/url-rewriting-using-intelligencia-urlrewriter.aspx)

[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:07:02.240

实际发生的是处理 Application_BeginRequest 路由以重写 url。将 Global.asax 添加到您的项目（全局应用程序类） - 该类中有一些预定义的方法。使用 Application_BeginRequest 使用 Context.RewritePath 重写您的 url。

例如基于数据表：

```
 DataTable paths = BusinessLogic.Article.Path_List();
            for (int i = 0; i < paths.Rows.Count; i++)
            {
                if (String.Compare(Request.Url.AbsolutePath.ToString(), paths.Rows[i]["ART_Path"].ToString(), true) == 0)
                {
                    BusinessLogic.ArticleTypes aType = (BusinessLogic.ArticleTypes)Convert.ToInt32(paths.Rows[i]["ART_Type"]);
                    Context.RewritePath("/article.aspx?type=" + aType.ToString() + "&id=" + paths.Rows[i]["ART_ID"].ToString());
                    break;
                }
            } 
```

问题示例：

```
protected void Application_BeginRequest(object sender, EventArgs e)
    {
        // Request.Url.AbsolutePath returns your path with preceding / -- example /default.aspx

    // you do not want to hardcode this, but read it from a config file or database, but for the example it'll suffice
    Dictionary<string,string> urls = new Dictionary<string,string>();
    urls.Add("/Article/Article-title-should-appear-here", "/ArticleDetails.aspx?Language=en-US&PageID=19&ArticleID=18");
    urls.Add("/Archive", "/Archive.aspx?PageId=7&Language=en-US");
    urls.Add("/الذاتية/وسوف-تذهب-المادة-الرابعة-العنوان-هنا", "/Archive.aspx?PageId=7&Language=en-USx");
    foreach (KeyValuePair<string, string> kvp in urls)
    {
        if (String.Compare(Request.Url.AbsolutePath, kvp.Key, true) == 0 || String.Compare(Request.Url.AbsolutePath, kvp.Key + ".aspx", true) == 0)
        {
            Context.RewritePath(kvp.Value);
            break;
        }
    }
} 
```

# git - 从 git repo 中只提取一个目录

> ID：10124223
> 
> 赞同：14
> 
> 时间：2012-04-12T13:08:04.100
> 
> 标签：git, git-pull, git-checkout, git-fetch

我有一个 git repo，我想从中提取。我做的很正常`git pull`，没有问题。问题是我只想要一个特定的目录。我的想法是我可以使用具有`.gitignore`如下规则的文件：

```
#Ignore all files
/
#Except the one I want
!/temp 
```

问题是这行不通。这是正确的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-12T13:18:43.220

`git pull`获取并合并远程分支。

`.gitignore`仅在本地工作，并且将隐藏匹配的条目以不显示`git status`并添加到索引中`git add`。这不是你想要的。

您想要做的是`fetch`远程分支，然后从中提取您需要的目录/文件。

```
$ git fetch <remote> <branch>
$ git checkout <remote>/<branch> -- relative/path/to/file/or/dir 
```

文件/目录现在应该在您的分支中并添加到索引中。

# ruby - 如何在使用 Ruby mechanize 加载页面之前设置 Referer 标头？

> ID：10124224
> 
> 赞同：4
> 
> 时间：2012-04-12T13:08:22.880
> 
> 标签：ruby, http-headers, mechanize, http-referer

有没有一种直接的方法来设置使用 Mechanize 2.3 的自定义标题？

我尝试了[以前的解决方案](https://stackoverflow.com/a/1536251/1069375)，但得到：

```
$agent = Mechanize.new
$agent.pre_connect_hooks << lambda { |p|
  p[:request]['Referer'] = 'https://wwws.mysite.com/cgi-bin/apps/Main'
} 

# ./mech.rb:30:in `<main>': undefined method `pre_connect_hooks' for nil:NilClass (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T02:08:55.130

[文档](http://mechanize.rubyforge.org/Mechanize.html)说：

```
get(uri, parameters = [], referer = nil, headers = {}) { |page| ... } 
```

例如：

```
agent.get 'http://www.google.com/', [], agent.page.uri, {'foo' => 'bar'} 
```

或者，您可能会喜欢：

```
agent.request_headers = {'foo' => 'bar'}
agent.get url 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:53:29.920

您误解了您正在复制的代码。示例中有一个换行符，但它在格式中消失了，因为它没有标记为代码。`$agent`包含`nil`因为您在初始化之前尝试使用它。您必须初始化对象然后使用它。试试这个：

```
$agent = Mechanize.new
$agent.pre_connect_hooks << lambda { |p| p[:request]['Referer'] = 'https://wwws.mysite.com/cgi-bin/apps/Main' } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:34:31.277

对于这个问题，我注意到人们似乎使用：

```
page = agent.get("http://www.you.com/index_login/", :referer => "http://www.you.com/") 
```

顺便说一句，既然我测试了这个答案，看来这不是我实际问题背后的问题：每次访问我正在抓取的网站都需要再次浏览登录序列页面，甚至在第一次登录后几秒钟后 -在访问中，尽管我总是以 yaml 格式加载和保存完整的 cookie jar。但这当然会引出另一个问题。

# ios - 使用条形码的产品详细信息

> ID：10124225
> 
> 赞同：0
> 
> 时间：2012-04-12T13:08:25.393
> 
> 标签：ios, barcode, product

嗨，我正在创建一个条形码阅读器应用程序，能够获取条形码编号，但需要有关在何处查找产品详细信息（如价格、产品名称等）的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:13:32.043

Google 的购物搜索 API（请参阅[https://developers.google.com/shopping-search/](https://developers.google.com/shopping-search/)）是众多具有简单的条形码到产品元数据接口的服务之一，它将以 XML/JSON 或其他。它使用起来非常简单，但如果你不确定如何让它工作，我相信你可以看看条码扫描应用 Zxing 是如何使用它的（代码可用）。

# html - Common Lisp：如何使用宏为 CL-WHO 生成 S 表达式？

> ID：10124227
> 
> 赞同：1
> 
> 时间：2012-04-12T13:08:28.710
> 
> 标签：html, common-lisp

假设我为 CL-WHO 定义了一个宏：

```
(defmacro test-html (&body body)
   `(with-html-output-to-string (*standard-output* nil :PROLOGUE t :indent t)
      (:html
       (:body
    ,@body)))) 
```

然后：

```
(test-html (:h1 "hallo")) 
```

给出（删除第一行）：

```
"<html>
  <body>
    <h1>
      hallo
    </h1>
  </body>
</html>" 
```

正如预期的那样。现在我定义了一个函数来生成 CL-WHO 使用的 s 表达式：

```
(defun test-header (txt)
  `(:h1 ,txt)) 
```

当用“hallo”调用时返回

```
(:h1 "hallo") 
```

但是现在当我打电话时

```
(test-html (test-header "hallo")) 
```

它返回：

```
"<html>
  <body>

  </body>
</html>" 
```

出了什么问题，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:25:52.817

我有同样的问题。据我所知，在 cl-who 的正式版本中是不可能的：http: [//lisp-univ-etc.blogspot.com/2009/03/cl-who-macros.html](http://lisp-univ-etc.blogspot.com/2009/03/cl-who-macros.html)

我改用这个版本，它支持宏：[https ://github.com/vseloved/cl-who](https://github.com/vseloved/cl-who)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:11:16.247

我倾向于解决这个问题的方法是定义一个快捷宏，比如

```
(defmacro html-to-stout (&body body)
  "Outputs HTML to standard out."
  `(with-html-output (*standard-output* nil :indent t) ,@body)) 
```

或字符串等效项。这里的关键是它不输出 a `:prologue`，因此它可以输出一个 HTML 块而不是整个页面。一旦你有了它，你就可以做类似的事情

```
(defun test-header (text)
  (html-to-stout 
    (:h1 (str text))))

(test-html (test-header "Hello Hello")) 
```

# java - Java 覆盖继承的字符串

> ID：10124229
> 
> 赞同：0
> 
> 时间：2012-04-12T13:08:29.117
> 
> 标签：java

我有一个抽象类，它是由另一个具体类派生的。在我的抽象类中，我有一个在同一个抽象类的方法中调用的属性。此属性在抽象类中为空，但在派生中我为其设置了一个值。然而，当编译器启动该方法时，它需要抽象类的变量，而不是我在派生类的 Object 上启动此方法。如何获取实际的 URL var 而不是 null ？

```
abstract public class AbstractHTTPFactory {
    protected String URL = null;

    final public ArrayList<? extends LGCookObject> make() throws HTTPFactoryException{
        try {
            String response = sr.getData(URL);
            }
    }
}

public class RecipesHTTPFactory extends AbstractHTTPFactory{
    protected String URL = "VALUE";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:11:25.673

字段不是多态的。如果你想要多态行为，你需要*方法*：

```
public abstract class AbstractHTTPFactory {
    public final ArrayList<? extends LGCookObject> make()
            throws HTTPFactoryException {
        String response = sr.getData(getURL());
        ...
    }

    protected abstract String getURL();
}

public class RecipesHTTPFactory extends AbstractHTTPFactory {
    protected String getURL() {
        return "VALUE";
    }
} 
```

或者，您可能有一个`AbstractHTTPFactory`提供给构造函数的字段：

```
public abstract class AbstractHTTPFactory {
    private final String url;

    public final ArrayList<? extends LGCookObject> make()
            throws HTTPFactoryException {
        String response = sr.getData(url);
        ...
    }

    protected AbstractHTTPFactory(String url) {
        this.url = url;
    }
}

public class RecipesHTTPFactory extends AbstractHTTPFactory {
    public RecipesHTTPFactory() {
        super("VALUE");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:55:01.987

如果您真的想在抽象基类中保留 URL 定义，请在派生的具体类中设置它的值，而不是重新定义一个具有相同名称的变量，这将隐藏基类之一。这不是一个好习惯，因为派生类中会出现神秘的变量。

# sql-server-2005 - 有什么简单的方法可以一次在多个远程 SQL Server 数据库上运行相同的 SQL 脚本吗？

> ID：10124234
> 
> 赞同：1
> 
> 时间：2012-04-12T13:08:47.883
> 
> 标签：sql-server-2005

我们公司有许多分支机构，每个分支机构都位于不同的国家。

因此，当我通过 VPN 连接更新任何国家的数据库时，我需要通过 vpn 连接一个一个地更新另一个国家的相同数据库。

这是一个非常累人的工作......

所以我认为可以有任何简单的技巧来轻松更新不同国家的多个数据库。所以我正在开发一个存储过程，它将通过vpn一个接一个地连接到每个数据库，并从`.sql`文件中读取脚本并通过vpn在远程数据库中执行脚本。

所以请看一下我的脚本并告诉我该怎么做。

这是一个表结构，我将在其中放置所有远程数据库详细信息。

```
CREATE TABLE [dbo].[DBDetails]
(
[ServerName] [varchar](max)     NULL,
[DBName] [varchar](max)         NULL,
[UserID] [varchar](max)         NULL,
[Password] [varchar](max)       NULL,
[CountryCode] [varchar](2)      NULL
) 

SET NOCOUNT ON

DECLARE DB CURSOR FOR SELECT ServerName,DBName,UserID,Password,CountryCode FROM    DBDetails 
OPEN DB
DECLARE @ServerName     varchar(MAX)
DECLARE @DBName         varchar(MAX)
DECLARE @UserID         varchar(MAX)
DECLARE @Password       varchar(MAX)
DECLARE @CountryCode    varchar(2)

FETCH NEXT FROM DB INTO @ServerName,@DBName,@UserID,@Password,@CountryCode
WHILE @@FETCH_STATUS = 0
BEGIN

-- here I need some help for opening db connection and read sql file and execute  the statement
-- Please help here 

FETCH NEXT FROM DB INTO @ServerName,@DBName,@UserID,@Password,@CountryCode
 END
 CLOSE DB
 DEALLOCATE DB 
```

谢谢

# python - .py 文件在浏览器中显示代码而不是运行

> ID：10124235
> 
> 赞同：14
> 
> 时间：2012-04-12T13:08:48.367
> 
> 标签：python, cgi, localhost

我正在尝试开始使用 Python，但无法为 localhost（使用 Ampps）正确设置服务器。Python 通过 IDLE 和命令行运行得很好，但是，当我在浏览器中打开文件时，代码显示并且不运行。

我按照这个[http://www.imladris.com/Scripts/PythonForWindows.html](http://www.imladris.com/Scripts/PythonForWindows.html)教程来设置 cgi，但它不起作用。

这是我的“hello world”程序的代码，如果这有什么不同的话。

```
#!/usr/bin/env python
# -*#!/usr/bin/python

print "Content-type:text/html\r\n\r\n"
print '<html>'
print '<head>'
print '<title>Hello Word - First CGI Program</title>'
print '</head>'
print '<body>'
print '<h2>Hello Word! This is my first CGI program</h2>'
print '</body>'
print '</html>' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:13:39.370

您的 Web 服务器将您的 python 代码视为静态文件而不是可执行文件。这里的目标是您希望 Apache 执行 python 并将标准输出发送回用户的浏览器。

我对 Ampps 不熟悉，但获取此设置的基本 Apache 流程是这样的。

1.  编辑 httpd.conf 的 Options 行以包含 ExecCGI
2.  通过添加以下行，将您的 python 文件与 httpd.conf 注册为 cgi 处理程序：
    `AddHandler .py`
3.  重启阿帕奇
4.  **确保您的 shebang 行（顶部的 #!/usr/bin/env python 位）实际上指向您的 python 可执行文件的路径。** 对于生活在 C: 上的 python2.6，这可能是：
    `#!\Python26\python`
5.  如果您的脚本必须是可移植的，请不要修改 shebang 行，而是将该行添加`ScriptInterpreterSource registry`到您的 httpd.conf，并确保 windows 默认使用 Python.exe 打开 *.py 文件。这可以通过双击脚本来测试。如果它没有执行，请右键单击它，选择打开方式，然后选择其他，然后浏览到您的 python.exe。确保选中“始终使用此程序打开此类文件”框。[这里](http://support.microsoft.com/kb/307859)有一篇关于此的 Microsoft 知识库文章。

最后，mod_wsgi 或 FastCGI 是让 Apache 执行 python 的首选方法，优先选择较低流量的站点（每天有 10 的数千个请求）。我还建议研究 web 框架，例如 web.py（非常轻量级）或 django（较重，但如果您正在收集用户输入或与数据库交互，可以节省大量时间）。

*   [mod_wsgi 设置说明。](http://code.google.com/p/modwsgi/wiki/InstallationOnWindows)
*   [FastCGI 文档](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html)（在 Windows 上进行设置可能会很痛苦）
*   [Django 入门](https://docs.djangoproject.com/en/dev/intro/)
*   [web.py 教程](http://webpy.org/docs/0.3/tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-23T18:25:07.453

给定的解决方案在树莓派 3 B+ 上对我有用：

1）尝试编辑：sudo nano /etc/apache2/sites-enabled/000-default.conf

2）在此文件中添加以下代码：

```
 <Directory /var/www/html>
            Options +ExecCGI
            AddHandler cgi-script .py
            # DirectoryIndex index.py
    </Directory> 
```

3）重启apache2：sudo service apache2 restart

4）在您的代码中只需添加上面的几行：

```
#!/usr/bin/env python3
import cgitb
cgitb.enable()
print("Content-Type:text/html;charset=utf-8")
print()
print("Hello world") 
```

5）您的代码应该可以工作；）

# php - 或语句无法正常运行

> ID：10124239
> 
> 赞同：0
> 
> 时间：2012-04-12T13:09:02.297
> 
> 标签：php

如果我没有帐户 1 或没有帐户 2，我想被重定向。问题是，即使我有 account1，它也会重定向我：

```
if(($_SESSION['account'] != "account1") || ($_SESSION['account'] != "account2")){
    header("location:/home");
    exit();
} 
```

当我没有包含 OR 时，它可以正常工作并且当我有 account1 时不会重定向我：

```
if($_SESSION['account'] != "account1"){
    header("location:/home");
    exit();
} 
```

但如果他们碰巧拥有account2，我也需要它不重定向。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:11:13.200

逻辑错误；您可能指的是 AND 而不是 OR。`$_SESSION['account']`在任何给定时间只能有一个值，所以它总是不同于`account1`OR 不同于`account2`.

所以代码应该读

```
if(($_SESSION['account'] != "account1") && ($_SESSION['account'] != "account2")){
    header("location:/home");
    exit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:11:48.180

你需要

```
if(($_SESSION['account'] != "account1") && ($_SESSION['account'] != "account2")){
    header("location:/home");
    exit();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:12:48.753

你的条件是错误的 :) 假设你有一个 account2，第一个比较是真的，你会被重定向。您需要将条件与 AND (&&) 结合起来。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T13:10:52.143

我相信你想检查 ($_SESSION['account'] != "account2")。在第二种情况下，您似乎将它们颠倒了。

# iphone - 谁能给我一个关于“self = super init”的简单解释？

> ID：10124240
> 
> 赞同：0
> 
> 时间：2012-04-12T13:09:05.697
> 
> 标签：iphone, xcode

我还是不明白 self=super init; ，虽然我读了很多书和谷歌。我知道它用于检查当前对象是否等于父类的返回对象等。但是，我不能接受这是答案。有人可以给我一个简单但可靠的可接受的答案吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T13:13:10.223

快速的回答是你告诉你的类的超类来初始化对象。因为您是从该超类继承的，所以您可以执行特定于您的实现的其他初始化任务，但首先您必须确保执行初始化的基础知识（由基类 NSObject 处理）。从另一个类扩展（继承）的每个类都必须确保它们的超类已经初始化，然后才能进行初始化。

一个很快就编出来的（因此可能很差）的类比——在你被创造之前，你的父母必须被创造出来（超类），他们必须首先创造他们的父母（他们的超类）

我建议您搜索面向对象的编程基础知识来了解这类事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T15:40:49.390

您提到“检查”让我认为您将其`=`视为比较操作。它不是。这是一个任务。有时，分配出现在`if`条件中。这是利用赋值表达式有一个值的事实——被赋值的值。因此，`if (self = [super init])`结合了“调用 super 的`-init`方法”、“将结果分配给`self`”**和**“检查我们是否从 super 的方法中获得了非 nil `-init`”（也就是说，该 super 没有初始化失败）。

因为这种组合的分配和测试可能会令人困惑且容易出错，Apple 现在建议将分配与失败检查分开：

```
self = [super init];
if (self)
    // ... continue initializing ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T13:30:40.803

NSObject 是根类。 [https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html) 你可以在`init`那里找到一个方法。类中的该`init`方法`NSObject`是 Objective-C 中每个对象的初始化器。`super`简单地返回一个对象的超类。

如果`Class B`继承自`Class A`，`Class A`将是 的超类`Class B`。又是另一个`Class C`继承自的类，将是`Class B`的超类。很快。`Class C``Class B`

当你`[super init];`从一个类调用时，它只是调用`init`它的超类的方法，然后它又调用`init`它的超类的方法，依此类推。最后它会到达根对象NSObject，并调用真正的`init`方法。那时，iOS 将为您的对象分配内存并为您的对象分配必要的数据结构。阅读有关 NSObject 类中每个方法和属性的文档。

如果您创建的类`MyView`是 的子类`UIView`，则您的类层次结构将是。

```
 NSObject

UIAppearanceContainer

   UIAppearance

     NSCoding

      UIView

      MyView 
```

因此，当您`init`在“MyView”类中调用方法时，它会调用

UIView的init方法

UIView 会调用 NSCoding 的 init 方法

NSCoding 会调用 UIAppearance 的 init 方法

UIAppearance 会调用 UIAppearanceContainer 的 init 方法

UIAppearanceContainer 将调用 NSObject 的 init 方法。

# mysql - MySQL 数据库还原错误

> ID：10124241
> 
> 赞同：0
> 
> 时间：2012-04-12T13:09:14.877
> 
> 标签：mysql, command-line, import, restore

第 1 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确使用的语法

在第 1 行

使用以下 mysql 语句时出现错误。mysql -u root -p* ******* < network.sql

MySQL 服务器版本为 5.5.21

network.sql 文件的内容是

```
IF EXISTS (SELECT name FROM master.dbo.sysdatabases WHERE name = N'server')
    DROP DATABASE [server]
GO

CREATE DATABASE [server]  ON (NAME = N'server', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL\Data\server.mdf' , SIZE = 1, FILEGROWTH = 10%) LOG ON (NAME = N'server_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL\Data\server_log.LDF' , FILEGROWTH = 10%)
 COLLATE SQL_Latin1_General_CP1_CI_AS
GO

exec sp_dboption N'server', N'autoclose', N'false'
GO

exec sp_dboption N'server', N'bulkcopy', N'false'
GO

exec sp_dboption N'server', N'trunc. log', N'false'
GO

exec sp_dboption N'server', N'torn page detection', N'true'
GO

exec sp_dboption N'server', N'read only', N'false'
GO

exec sp_dboption N'server', N'dbo use', N'false'
GO

exec sp_dboption N'server', N'single', N'false'
GO

exec sp_dboption N'server', N'autoshrink', N'false'
GO

exec sp_dboption N'server', N'ANSI null default', N'false'
GO

exec sp_dboption N'server', N'recursive triggers', N'false'
GO

exec sp_dboption N'server', N'ANSI nulls', N'false'
GO

exec sp_dboption N'server', N'concat null yields null', N'false'
GO

exec sp_dboption N'server', N'cursor close on commit', N'false'
GO

exec sp_dboption N'server', N'default to local cursor', N'false'
GO

exec sp_dboption N'server', N'quoted identifier', N'false'
GO

exec sp_dboption N'server', N'ANSI warnings', N'false'
GO

exec sp_dboption N'server', N'auto create statistics', N'true'
GO

exec sp_dboption N'server', N'auto update statistics', N'true'
GO

use [server]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Connection]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Connection]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[NodeInformation]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[NodeInformation]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[pda]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[pda]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[possibledelay]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[possibledelay]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[possiblepath]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[possiblepath]
GO

CREATE TABLE [dbo].[Connection] (
    [NodeName] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [Neighbour] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [Cost] [decimal](10, 0) NULL ,
    [Delay] [decimal](18, 0) NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[NodeInformation] (
    [NodeName] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [PortNo] [int] NULL ,
    [SystemName] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL, 
                [Status] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[NodeId] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[pda] (
    [path] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [cost] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [delay] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[node] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL  
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[possibledelay] (
    [destination] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [path] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [delay] [decimal](18, 0) NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[possiblepath] (
    [destination] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [path] [varchar] (20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [cost] [decimal](10, 0) NULL ,
    [delay] [decimal](18, 0) NULL 

) ON [PRIMARY]
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:12:16.353

您尝试恢复的文件看起来像 MSSQL 的 T-SQL 文件。所以它不适用于MySQL。至少不是原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:12:05.870

第一个猜测是它正在从文本文件中获取换行符或 cr 并对其进行攻击。如果您可以从 Windows 框访问数据库，请尝试从查询浏览器运行相同的命令。或者，如果它是一个 linux 机器，您可以在打开所有字符的文本编辑器中打开文件，然后查看无关字符的来源。

# javascript - javascript将整数字符串拆分为数组

> ID：10124243
> 
> 赞同：2
> 
> 时间：2012-04-12T13:09:23.420
> 
> 标签：javascript

我有一个这样的字符串 MyString ：

```
var MyString = "32,43,545,34,23,"; 
```

我想把它放在一个整数数组中。

如果我这样做：

```
var MyArray = MyString.split(","); 
```

我得到一个字符串数组。如何获得整数数组？

我知道我可以遍历数组并对每个元素执行 parseInt ，但我想知道是否有更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:11:15.590

不幸的是，您将不得不手动遍历数组并像这样更改每个元素：

```
var MyArray = MyString.split(",");
for (var i=0, LoopTimes = MyArray.length; i < LoopTimes; i++){
    MyArray[i] = parseInt(MyArray[i], 10);
} 
```

或者你也可以看看这个：[http ://phpjs.org/functions/array_walk:349](http://phpjs.org/functions/array_walk:349)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T13:12:42.000

```
'32,43,545,34,23'.split(',').map(Number) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:20:13.920

这在大多数情况下也应该有效，并且它比我相信的 parseInt 方法略快。

```
for(var i=0;i<MyArray.length,i++){
  MyArray[i]=MyArray[i]-0;
} 
```

# php - 用php形成mysql数据

> ID：10124245
> 
> 赞同：0
> 
> 时间：2012-04-12T13:09:27.017
> 
> 标签：php, mysql

我有这段代码可以连接到 mysql 并从一个表中获取数据：

```
<?php

    //Include database connection details
    require_once('sql/config.php');

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

    $result = mysql_query("SELECT * FROM customers");

    while($row = mysql_fetch_array($result)) {
        echo $row['email'];
        echo "<br />";
    }

    mysql_close($link);
?> 
```

现在我怎样才能将这个电子邮件数据从 mysql 填充到以前安全地创建的表单中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:13:03.623

改变

```
while($row = mysql_fetch_array($result)) {
        echo $row['email'];
        echo "<br />";
    } 
```

到：

```
while($row = mysql_fetch_array($result)) {
        $emails_array[] = $row['email'];
    } 
```

然后`$emails_array`用作：

```
$people_to_email_to = implode(";", $emails_array); 
```

然后你的表格：

```
echo "<input id='emails' type='text' value='$people_to_email_to' name='emails' />"; 
```

# c# - SQL Server 与 C# 的连接 -> 是否存在数据库？

> ID：10124249
> 
> 赞同：1
> 
> 时间：2012-04-12T13:09:44.480
> 
> 标签：c#, sql-server, ssms

在我为学校制作的一个小型应用程序中，我试图确定是否存在必要的数据库。

如果没有，我想创建它（连同数据库中的表），然后照常使用它。

我正在使用 Visual C# Express Edition 以及 SQL Server Express。我在下面写了一个小测试程序......

```
namespace DatabaseConnectionTest
{
    class Program
    {
        public static SqlConnection con;

        public static void EstablishConnection()
        {
            string userName = "username";
            string password = "password";
            string server = @".\SQLEXPRESS";
            string database = "Blibbity";
            string trustedConnection = "yes";
            string timeout = "30";

            try
            {
                con = new SqlConnection(
                        "user id=" + userName +
                        ";password=" + password +
                        ";server=" + server +
                        ";Trusted_Connection=" + trustedConnection +
                        ";database=" + database +
                        ";connection timeout=" + timeout);
                con.Open();
                Console.WriteLine("Connection successful!");

                var command = new SqlCommand("insert into sometable values ('somedata')", con);
                command.ExecuteNonQuery();
                Console.WriteLine("Insert successful!");

                command = new SqlCommand("select somecolumn from sometable", con);
                SqlDataReader reader = command.ExecuteReader();

                while (reader.Read())
                {
                    Console.WriteLine("Fectched data ====> " + reader["somecolumn"].ToString());
                }

                reader.Close();
                Console.WriteLine("Query successful!");

                command = new SqlCommand("delete from sometable where somecolumn = 'somedata'", con);
                command.ExecuteNonQuery();
                Console.WriteLine("Delete successful!");
            }
            catch
            {
                database = "master";

                con = new SqlConnection(
                    "user id=" + userName +
                    ";password=" + password +
                    ";server=" + server +
                    ";Trusted_Connection=" + trustedConnection +
                    ";database=" + database +
                    ";connection timeout=" + timeout);

                con.Open();

                var command = new SqlCommand(@"
                    USE [master]
                    GO

                    /****** Object:  Database [Blibbity]    Script Date: 04/12/2012 07:08:45 ******/
                    CREATE DATABASE [Blibbity] ON  PRIMARY 
                    ( NAME = N'Blibbity', FILENAME = N'c:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\Blibbity.mdf' , SIZE = 2048KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
                     LOG ON 
                    ( NAME = N'Blibbity_log', FILENAME = N'c:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\Blibbity_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
                    GO

                    ALTER DATABASE [Blibbity] SET COMPATIBILITY_LEVEL = 100
                    GO

                    IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
                    begin
                    EXEC [Blibbity].[dbo].[sp_fulltext_database] @action = 'enable'
                    end
                    GO

                    ALTER DATABASE [Blibbity] SET ANSI_NULL_DEFAULT OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET ANSI_NULLS OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET ANSI_PADDING OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET ANSI_WARNINGS OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET ARITHABORT OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET AUTO_CLOSE OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET AUTO_CREATE_STATISTICS ON 
                    GO

                    ALTER DATABASE [Blibbity] SET AUTO_SHRINK OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET AUTO_UPDATE_STATISTICS ON 
                    GO

                    ALTER DATABASE [Blibbity] SET CURSOR_CLOSE_ON_COMMIT OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET CURSOR_DEFAULT  GLOBAL 
                    GO

                    ALTER DATABASE [Blibbity] SET CONCAT_NULL_YIELDS_NULL OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET NUMERIC_ROUNDABORT OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET QUOTED_IDENTIFIER OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET RECURSIVE_TRIGGERS OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET  DISABLE_BROKER 
                    GO

                    ALTER DATABASE [Blibbity] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET DATE_CORRELATION_OPTIMIZATION OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET TRUSTWORTHY OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET ALLOW_SNAPSHOT_ISOLATION OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET PARAMETERIZATION SIMPLE 
                    GO

                    ALTER DATABASE [Blibbity] SET READ_COMMITTED_SNAPSHOT OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET HONOR_BROKER_PRIORITY OFF 
                    GO

                    ALTER DATABASE [Blibbity] SET  READ_WRITE 
                    GO

                    ALTER DATABASE [Blibbity] SET RECOVERY SIMPLE 
                    GO

                    ALTER DATABASE [Blibbity] SET  MULTI_USER 
                    GO

                    ALTER DATABASE [Blibbity] SET PAGE_VERIFY CHECKSUM  
                    GO

                    ALTER DATABASE [Blibbity] SET DB_CHAINING OFF 
                    GO", con);

                command.ExecuteNonQuery();
                con.Close();

                database = "Blibbity";

                con = new SqlConnection(
                    "user id=" + userName +
                    ";password=" + password +
                    ";server=" + server +
                    ";Trusted_Connection=" + trustedConnection +
                    ";database=" + database +
                    ";connection timeout=" + timeout);

                con.Open();

                command = new SqlCommand(@"
                    USE [Blibbity]
                    GO

                    /****** Object:  Table [dbo].[sometable]    Script Date: 04/12/2012 07:09:07 ******/
                    SET ANSI_NULLS ON
                    GO

                    SET QUOTED_IDENTIFIER ON
                    GO

                    SET ANSI_PADDING ON
                    GO

                    CREATE TABLE [dbo].[sometable](
                        [somecolumn] [varchar](50) NULL
                    ) ON [PRIMARY]

                    GO

                    SET ANSI_PADDING OFF
                    GO", con);

                command.ExecuteNonQuery();
                con.Close();

                EstablishConnection();
            }
            finally
            {
                con.Close();
                Console.WriteLine("Connection now closed...");
                Console.ReadLine();
            }
        }

        static void Main(string[] args)
        {
            EstablishConnection();
        }
    }
} 
```

显然`Blibbity`只是一个垃圾数据库。当我点击`ExecuteNonQuery()`异常捕获中的第一行时，它告诉我附近的语法`"GO"`不正确，但我只是使用 SQL Server Management Studio 的“Script As CREATE TO”功能复制了用于创建数据库/表的文本。

有人知道我为什么遇到这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:13:58.363

GO 不是 sql server 命令，它由 Management Studio 解释。如果要实现相同的行为，则必须通过 go 指令拆分 sql 命令并顺序执行每个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:13:47.950

我建议您使用实体框架，而不是手动创建数据库，它在代码优先的方法中具有内置支持，如果它不存在，则可以创建新数据库、添加表甚至用初始数据填充它们。

因此，与其寻找解决问题的方法，不如解决问题本身。

# css - CSS 规则“.drop.a”被应用到类“drag a”

> ID：10124254
> 
> 赞同：5
> 
> 时间：2012-04-12T13:10:06.780
> 
> 标签：css, internet-explorer, internet-explorer-9, css-selectors

我有以下 HTML 标记：

```
<div class="drag a"></div>
<div class="drop a"></div> 
```

我还有以下 CSS 规则，它应该只应用于我的第二个 div：

```
.drop.a
{
   background-color:red;
} 
```

这工作正常，但在 Internet Explorer 9 中，CSS 规则同时应用于这两个元素。

为什么是这样？我以为这种 CSS 可以与所有浏览器通用兼容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T13:13:24.113

> 我以为这种 CSS 可以与所有浏览器通用兼容？

没有。[IE 直到并包括版本 6 会忽略链中除最后一个之外的所有类选择器。](https://stackoverflow.com/a/3772305/106224)IE9 可能会在 quirks 模式下呈现您的页面，这意味着它将像它的前辈一样行事，并将您的`.drop.a`选择器视为`.a`相反。

尝试将 doctype 声明添加到您的页面，看看是否可以修复它。如果您的页面上已经有一个并且您仍然看到此行为，则说明其他问题。

# c# - 如何在 Composite C1 中创建文档上传和文档列表页面

> ID：10124256
> 
> 赞同：1
> 
> 时间：2012-04-12T13:10:11.440
> 
> 标签：c#, content-management-system, c1-cms

我是 C1 的新手，我正在开发一个简单的网站，现在我需要添加文档页面，其中列出了一堆 PDF 文件和文档视图页面以在 Issuu 播放器中显示 PDF。

首先，我将要求第 1 部分：

a) 如何上传 PDF 文档？我的意思是如何创建一个包含文件上传框和描述框的上传 PDF 页面，如果它与后端界面隔离，那就太好了。

b) 如何创建动态列出上传的 PDF 文档的文档页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:47:03.337

1）你有存储PDF的媒体文件夹路径，例如“/Uploads/PDF Documents”

以下是如何将 HttpPostedFile 上传到**C1 Media Archive**的示例代码：

```
public static void UploadFileToMediaArchive(HttpPostedFile file, string mediaFolderPath)
    {
        try
        {
            WorkflowMediaFile mediaFile = new WorkflowMediaFile();
            mediaFile.FileName = file.FileName;
            mediaFile.FolderPath = mediaFolderPath;
            mediaFile.Title = "";
            mediaFile.Description = "";
            mediaFile.Culture = Thread.CurrentThread.CurrentCulture.Name;
            mediaFile.Length = file.ContentLength;
            mediaFile.MimeType = MimeTypeInfo.GetCanonical(file.ContentType);

            if (mediaFile.MimeType == MimeTypeInfo.Default)
            {
                mediaFile.MimeType = MimeTypeInfo.GetCanonicalFromExtension(System.IO.Path.GetExtension(mediaFile.FileName));
            }
            using (System.IO.Stream readStream = file.InputStream)
            {
                using (System.IO.Stream writeStream = mediaFile.GetNewWriteStream())
                {
                    readStream.CopyTo(writeStream);
                }
            }
            IMediaFile addedFile = DataFacade.AddNew<IMediaFile>(mediaFile);
        }
        catch (Exception ex)
        {
            Composite.Core.Log.LogError("UploadFileToMediaArchive", ex.Message);
        }
    } 
```

2) 要在页面上显示 PDF 文件，您可以创建一个简单的 XSLT 函数，然后使用“以数据为中心”的函数调用“GetIMediaFileXml”并使用 MediaFolderFilter 过滤器。下面是“GetIMediaFileXml”函数调用的源代码：

```
 <f:function name="Composite.Data.Types.IMediaFile.GetIMediaFileXml" localname="GetIMediaFileXml">
    <f:param name="PropertyNames">
        <f:paramelement value="KeyPath" />
        <f:paramelement value="CompositePath" />
    </f:param>
    <f:param name="Filter">
        <f:function name="Composite.Data.Types.IMediaFile.MediaFolderFilter">
            <f:param name="MediaFolder" value="MediaArchive:7dce5da6-ae73-417a-86a3-dfb7a3f05cf3" />
        </f:function>
    </f:param>
</f:function> 
```

# iphone - 从 Nsmutablearray+iphone 中删除重复值

> ID：10124260
> 
> 赞同：0
> 
> 时间：2012-04-12T13:10:30.397
> 
> 标签：iphone, objective-c, nsmutablearray

**我编辑的问题：-** 我复制了数组。但问题是当下面的行执行 [mainRestaurantArray removeObjectAtIndex:j]; mainRestaurantArray 的索引是减少的。这将不允许删除正确的索引值

因为它显示了索引超出范围的错误。因为 arrayRestaurantList -31 的总索引和 mainRestaurantArray-25 的总索引（删除重复值后）。

```
if([arrayRestaurantList count]==[mainRestaurantArray count]){
    BtnMore.hidden=YES;
    TablView.frame=CGRectMake(0,57, 320, 360);
    }   else{
    [mainRestaurantArray removeAllObjects];
    mainRestaurantArray=[[NSMutableArray arrayWithArray:arrayRestaurantList] retain];
    if ([arrayRestaurantList count]>10) {
        for (int i=0;i<[arrayRestaurantList count]-10;i++) {
            NSString *Old_data;
            Old_data=[[arrayRestaurantList objectAtIndex:i] objectForKey:@"Name"];
            NSLog(@"olddata==>%@",Old_data);
            for (int j=[arrayRestaurantList count]-10;j<[arrayRestaurantList count];j++) {              
                NSString *New_data;             
                New_data=[[arrayRestaurantList objectAtIndex:j] objectForKey:@"Name"];
                NSLog(@"olddata==>%@ newdata==>%@",Old_data,New_data);
                if ([New_data isEqualToString:Old_data]) {
                    //BtnMore.hidden=YES;                   
                    [mainRestaurantArray removeObjectAtIndex:j];

                }
            }
        }
    }
    } 
```

我有一个`NSMutableArray`( `mainRestaurantArray`)，它是从作为 web 服务响应的数据中填充的。

中的数据`mainRestaurantArray`如下：-

```
{
    Address = "Ellisbridge Opposite Parimal Garden Near Doctor House Ahmedabad Gujarat 380006 India (Collegian Restaurant)";
    Image = "";
    Latitude = "23.020119999999999";
    Longitude = "72.556343999999996";
    Name = "Collegian Restaurant";
    "Phone_Number" = "079 26401020";
    url = "";
}
{
    Address = "Ground Floor Aakash Ganga Ellisbridge B/H Gujrat College : Next To Art Palace Ellisbridge Ahmedabad Gujarat 380006 India (TC's Bread Shop)";
    Image = "";
    Latitude = "23.023137999999999";
    Longitude = "72.560096000000001";
    Name = "TC's Bread Shop";
    "Phone_Number" = "079 26568158";
    url = "";
}
{
    Address = "Center Point Panchwati Crossing C G Road Ahmedabad Gujarat 380009 India (Kings Food Factory)";
    Image = "";
    Latitude = "23.022670000000002";
    Longitude = "72.555651999999995";
    Name = "Kings Food Factory";
    "Phone_Number" = "079 4002 1122";
    url = "http://www.kingsfoodfactory.com";
} 
```

即以字典形式。现在有时会发生数据重复。所以我想删除它。我编写了如下代码：

```
if ([mainRestaurantArray count]>10) {
        for (int i=0;i<[mainRestaurantArray count]-10;i++) {
            NSString *Old_data;
            Old_data=[[mainRestaurantArray objectAtIndex:i] objectForKey:@"Name"];
            NSLog(@"olddata==>%@",Old_data);
            for (int j=[mainRestaurantArray count]-10;j<[mainRestaurantArray count];j++) {              
                NSString *New_data;             
                New_data=[[mainRestaurantArray objectAtIndex:j] objectForKey:@"Name"];
                NSLog(@"olddata==>%@ newdata==>%@",Old_data,New_data);
                if ([New_data isEqualToString:Old_data]) {
                    BtnMore.hidden=YES;
                    TablView.frame=CGRectMake(0,57, 320, 360);
                    [mainRestaurantArray removeObjectAtIndex:j];

                }
            }
        }
    } 
```

但是这段代码中的问题是当我删除引用丢失的值时。所以应用程序崩溃了。任何人都可以帮助我如何删除数据

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:15:43.747

```
 NSArray *cleanedArray = [[NSSet setWithArray:listItems] allObjects]; 
```

//listItems 是你的 NSMutableArray 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:35:39.523

您可以为此使用此方法

```
+(NSMutableArray*)GetFilterData :(NSMutableArray*)array;
{
//Filter duplicate data
NSArray *copy = [array copy];
NSInteger index = [copy count] - 1;
for (id object in [copy reverseObjectEnumerator]) {
    if ([array indexOfObject:object inRange:NSMakeRange(0, index)] != NSNotFound) {
        [array removeObjectAtIndex:index];
    }
    index--;
}
[copy release];
NSLog(@"arr %@",[array description]);
return array;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:08:54.763

**这是从 NSMutable 数组中删除重复值的代码。**.它会为你工作。myArray 是您要删除重复值的可变数组。

```
for(int j = 0; j < [myArray count]; j++){
    for( k = j+1;k < [myArray count];k++){
        NSString *str1 = [myArray objectAtIndex:j];
        NSString *str2 = [myArray objectAtIndex:k];
        if([str1 isEqualToString:str2])
            [myArray removeObjectAtIndex:k];
    }
} 
```

现在打印你的数组，会看到没有重复的值

# java - 如何覆盖包装类中的方法？

> ID：10124272
> 
> 赞同：1
> 
> 时间：2012-04-12T13:11:28.040
> 
> 标签：java, methods, overriding, extends, implements

我定义了以下类...

```
class Class2 implements ICommon {
    ....
    ICommon  wrappedClass;
    //delegate interface methods to wrapped class
}

class Class1 implements ICommon {
    //interface methods
    //specific methods
    public void method1() {
        ......
    }
} 
```

我需要`Class1`覆盖`method1()`of `Class2`，但是我仍然想实现`ICommon`接口。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:12:37.980

你不能在不扩展的情况下覆盖。Class2 必须扩展 Class1，然后您将能够覆盖。

```
class Class2 extends Class1 // no need for implements anymore, because class1 already implements
{

    @Override
    public void method1()
    {

    }
} 
```

要知道这种设计意味着每个 Class2 都是 Class1，就像每个 Ant 都是一个 Bug。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:14:38.283

```
class Class1 extends Class2{
     ...method1((){
          ......
       }
 } 
```

Class2 已经在实现 IComm 接口，所以 Class1 正在间接实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:14:50.890

你的意思是，只是：

```
class Class2 extends Class1 implements ICommon {
 ....
  ICommon  wrappedClass;
  //delegate interface methods to wrapped class

  @Override 
  public void method1 () {...}
} 
```

那应该可以正常工作，不是吗？你甚至不需要`implements ICommon`since`Class`已经这样做了，我只是把它放在那里以表明它确实做到了。

需要明确的是，这不需要任何更改`ICommon`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T13:16:09.703

你可以让 Class1 成为一个接口......

```
class Class2 implements ICommon, Class1 {
    ICommon  wrappedClass;
}

interface Class1 extends ICommon {
    public void method1();
} 
```

或者使 Class1 扩展 Class2（通过这样做，Class1 仍然实现 ICommon，因为 Class2 实现了 ICommon）...

```
class Class2 implements ICommon {
    ICommon  wrappedClass;
}

class Class1 extends Class2 {
    public void method1() {
    }
} 
```

# asp.net - ASP.NET MVC 3 中带有子集合的模型

> ID：10124273
> 
> 赞同：3
> 
> 时间：2012-04-12T13:11:32.047
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在尝试学习来自 Web 表单背景的 ASP.NET MVC 3。我正在尝试找出实现我想要的 MVC 方式，而实际困难在于我不确定要谷歌什么！

我无法理解的是如何使用更复杂的模型。asp.net 站点上的所有教程都围绕着相当简单的数据对象工作，因此使用它们来管理数据的编辑器也相当简单。

想象一个假设的派对预订应用程序的模型：-

```
公开课派对
{
    公共字符串 PartyName {get;set;}
    公共日期时间派对日期 {get; 放; }

    公共 ICollection<Guest> 客人 {get; 放;}
}

公开课嘉宾
{
    公共字符串名称 {get; 放;}
    公共字符串电子邮件地址 {get; 放;}
}

```

这里的关键是客人的集合。

我想了解如何实现，是如何实现一个控制器+视图，它允许我在一个页面中创建一个派对并同时添加新的客人（最好使用客人添加/删除功能-ajax 中的页面）。

在 asp.net Web 表单中的类似应用程序中，将访客的功能放在 UpdatePanel 中会很直接。但我不确定如何在 MVC 中实现这一点。

如果有人有任何提示、指示或讨论类似主题的文章链接，我会非常感激，

谢谢

滑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:23:52.057

使用 jQuery ajax 来处理添加许多客人。

**1) 带有模型弹出**窗口 当您单击 Add Guest 按钮时，调用您的 Action 方法，该方法在模型对话框中返回 Guest for m（jQuery UI 对话框是此处使用的一个选项）。使用 ajax post call 保存数据。一个成功事件，将新的客人数据附加到客人的主要表格列表或仅使用 jquery load 重新加载该部分

**2）页面内添加**当您单击添加访客按钮时，在主表单本身中，显示表单（您可以通过多种方式从javascript动态创建输入框和保存按钮）。使用 jQuery ajax 帖子保存数据。以 json 格式发送数据。只要参数名称与您的 ViewModel 的属性名称匹配，您的操作方法就可以接受数据

您的 HTML 页面

```
<a href="#" id="addNew"> Add Guest</a>

<div id="divForm" style="display:none">
    <input type="text" id="txtName" />
    <input type="text" id="txtEmail" />
    <input type="button" id="btnSaveGuest" value="Save"/>
</div>
<ul>

<div id="divGuests"></div> 
```

在你的脚本中

```
$(function(){
  //Show the hidden form
  $("#addNew").click(function(){
      $("#divForm").fadeIn(300);
  }); 

   //Save the new guest details
   $("#btnSaveGuest").click(function() {
     var name=$("#txtName").val();
     var email=$("#txtEmail").val();
     $.ajax({
        url: '@Url.Action("SaveGuest","Guest")',
        data: {Name: name, EmailAddress :email},
       success: function(data) {

        if(data=="true")
        {
          //Saved successfully.May be append to list of Guest
          $("#divGuests").append("<p>"+name+"</p>");
        }
        else
        {
          //Error. Show msg to user
        }
       }
     });
   });
}); 
```

你保存的 Action 方法

```
[HttpPost]
public ActionResult SaveGuest(Guest objGuest)
{
  try
  {
  // read the objGuest property values and Save to db

   return "true";
  }
  catch(Exception e)
  {
     //Log error
     return "false";
  }
} 
```

这是一个示例应用程序：http: [//jsfiddle.net/Qzk3F/16/](http://jsfiddle.net/Qzk3F/16/) （示例中的一些值是硬编码的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:21:41.990

有很多方法可以做到这一点，但部分考虑是底层数据库布局。创建视图时，您可以将其强输入到 Party 对象中，然后通过客人的集合，您将可以访问客人的属性。然后将创建客人的方法添加到派对模型中。或者，您可以为聚会和来宾提供单独的模型，无论是否包含集合，然后创建一个将聚会与来宾联系起来的视图模型。然后将视图强输入到视图模型中。

也可能有更好或“更正确”的方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:49:12.793

使用第三个容器模型

```
public class BookingModel
{
  public Party PartyModel { get; set; }
  public Guest GuestModel { get;set; }
} 
```

然后将 BookingModel 绑定到您可以访问 PartyModel 和 GuestModel 的视图

编辑：哎呀，再次阅读问题。

```
public class BookingModel
{
  public Party PartyModel { get; set; }
} 
```

然后在您的 BookingController 中有一个方法：

```
public ActionResult AddGuest(string name)
{
  BookingModel.Guests.Add(new Guest() { Name=name });
} 
```

显然，您首先需要参考 BookingModel。如果您愿意，也可以为来宾创建 PartialView，或者只使用一些“未绑定”输入。

# php - 显示图像的 PHP 脚本很慢

> ID：10124276
> 
> 赞同：2
> 
> 时间：2012-04-12T13:11:36.127
> 
> 标签：php, image, readfile

所以我有一个需要登录才能查看的网站，它有一个照片库。为了保护这些照片，我将它们移到了 Web 根目录之外，并使用 php 脚本来显示它们。像这样的东西。

照片画廊.php

```
echo '<img src="photo.php?id=X"/>'; 
```

照片.php

```
$id = (int)$_GET['id'];

$photo = getPhotoDataFromDb($id);
$path  = DIRECTORY.basename($photo['filename']);

// Make sure photo file exists
if (!file_exists($path) || !is_file($path))
{
    logError(__FILE__.' ['.__LINE__.'] No photo found in directory ['.$path.'] for photo id ['.$id.'].');
    header('HTTP/1.0 404 Not Found');
    return;
}

$info = getimagesize($path);

header("Cache-control: public, no-cache;");
header("Content-type: ".$info['mime']);

readfile($path); 
```

一切正常，除了这比从网络根目录中正常显示照片慢*6*到*7倍。*

**所以，我的问题是：**

1.  我的代码有问题吗，还是这种方法总是会增加更多时间？
2.  我怎样才能加快速度？有没有一种安全的方法来缓存图像？我相信画廊 2 会以某种方式做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:31:48.573

1.  是的，您的方法增加了时间，通过将图像置于循环之外，您强制 PHP 将每个图像缓冲到内存中，然后将其发送给用户，从而增加服务器上的负载并为 LARGE 图像创建明显的延迟（假设此处为画廊） .

2.  您可以通过将图像放在网站/应用程序的根目录中来加快速度。要保护您的图像免受远程盗链，只需使用`htaccess`脚本（谷歌）。您还可以创建组合`htaccess`和登录权限，以防止未经批准的用户进入包含图像的文件夹。

**参考：**

*   盗链：[https ://stackoverflow.com/a/1245917/158014](https://stackoverflow.com/a/1245917/158014)
*   [http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)的问题`readfile()`
*   使用 HTACCESS 保护目录：http: [//www.bignosebird.com/apache/a10.shtml](http://www.bignosebird.com/apache/a10.shtml)（这个例子可以进一步结合会话、登录等；）
*   PHP 和 htaccess：[从 PHP 中检索 .htaccess 登录名](https://stackoverflow.com/questions/5231041/retrieve-htaccess-login-name-from-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:13:40.737

图像应直接以文件形式提供，而不是通过 readfile 提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:17:01.607

在很多情况下 getimagesize(); 需要很长时间。尽量避免它，并注意是否有任何速度差异。

这种情况最常发生在远程图像中，因此不能完全确定您是否遇到了同样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T13:32:42.613

看看[https://tn123.org/mod_xsendfile/](https://tn123.org/mod_xsendfile/)

我发现 sendfile 比直接在代码中返回文件要快一些。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T14:19:15.680

尝试使用 jquery 插件或 javascript 图库代码来显示照片而不是 php。PHP 是一种服务器端语言，所以它必须联系服务器来获取新图像，这可能会降低网站速度。

# c# - post方法中的MVC3 RedirectToAction和ViewBag抑制

> ID：10124277
> 
> 赞同：12
> 
> 时间：2012-04-12T13:11:43.140
> 
> 标签：c#, asp.net-mvc-3, viewbag

我目前正在处理我需要在表示列表的视图中显示的数据列表，并为每个项目显示可以执行的相应操作，例如编辑或删除它们。对于这个版本来说，承认它是一个特定的观点是没有问题的。我的问题是当我想删除一个项目时，我在 post 方法中有两个选择。

```
 //Call directly the list 
 [HttpPost]
 [Authorize]
 public ActionResult Delete(int itemId)
 {
     // logic to delete an item
     ViewBag.Error = ""; // The result of the execution
     return List(); 
 } 
```

这个解决方案的问题是 url 不再与第一个相同： .../List，现在是 .../Delete，我觉得这个解决方案不太好，另一个解决方案是重定向到行动，现在url是好的，但是viewBag中的错误信息不再可见，你们有更好的主意吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-12T13:17:32.690

您可以使用`TempData`在一个请求中保留信息，它适用于这个确切的用例。而不是用`ViewBag`use`TempData["Error"] = "";`来代替。然后，在接收端，您将有如下代码段：

```
[HttpGet]
public ActionResult List() {
    ViewBag.Error = TempData["Error"];
    // ...
    return View();
} 
```

请参阅[ASP.NET TempData 在请求之间持续存在](https://stackoverflow.com/questions/473520)以及[何时在 ASP.Net MVC 3 中使用 ViewBag、ViewData 或 TempData](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-12T13:16:28.150

如果您正在执行重定向，请尝试使用`TempData`而不是`ViewBag`. TempData 是一个字典，它保留用户会话中的键/值，直到下一个页面请求。在您的控制器中：

```
TempData["Error"] = "A message goes here"; 
```

在您重定向到的列表视图中：

```
@TempData["Error"] 
```

或者，如果您不使用剃须刀：

```
<%= TempData["Error"] %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T12:40:07.447

使用`ViewBag`POST `ActionResult`：

```
ActionResult SubmitUser()
{
    ViewBag.Msg =TempData["Msg"];

    return view();
}

[HtttpPost]
ActionResult SubmitUser()
{
    TempData["Msg"] ="Submitted Successfully"];

    return view();
} 
```

# php - PHP If 语句不起作用

> ID：10124284
> 
> 赞同：-2
> 
> 时间：2012-04-12T13:11:54.300
> 
> 标签：php

这是我的代码：

```
 if ($username == "" || $pass == "" || $emailad==""|| $fname=="")
{  
    $msg = "Not all fields were entered"; 
}else
{
    if(uniqueUser($username,$emailad))
    {
        $msg="The username or email already exists";
    }else
    { 
        insertIntoDB($fname,$emailad,$username,$pass);
        $msg="The user has been inserted";

    }

}
    echo $msg; 
```

这将用于将新用户插入我的数据库。但是我的问题是，如果我要向其中添加一个不存在的用户，程序会告诉我用户名已经存在，但是如果它不在数据库中，它将插入新帐户。因此，该程序在插入方面工作正常，具体取决于用户是否存在于数据库中。问题是我的消息显示，因为我永远不会知道用户是否已经在数据库中，因为无论我如何重写这段代码，不存在的用户插入都会导致显示错误的消息。这是因为代码将运行 if 语句，插入新用户......并再次运行显示它已经存在的消息。谁能解释为什么会这样？

独特的用户功能：

```
function uniqueUser($usern,$eml)
{
$query = "SELECT S.username,S.email FROM tbl_user S WHERE S.username='$usern' OR        S.email='$eml'";
return mysql_num_rows(queryMysql($query));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:16:32.903

大概您想回显该消息？在语句中添加`echo`之前。`$msg``if`

```
if(uniqueUser($username,$emailad))
{
    echo $msg="The username or email already exists";
}else
{ 
    insertIntoDB($fname,$emailad,$username,$pass);
    $msg="The user has been inserted";
    echo $msg;
} 
```

如果用户存在，则输出“用户名或电子邮件已存在”消息。如果用户不存在，那么它将被插入并输出“用户已被插入”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:27:44.270

尝试这个

```
if ($username == "" || $pass == "" || $emailad==""|| $fname=="")
{  
    $msg = "Not all fields were entered"; 
}
else if(uniqueUser($username,$emailad))
{
    $msg="The username or email already exists";
}
else
{ 
    insertIntoDB($fname,$emailad,$username,$pass);
    $msg="The user has been inserted";
}
echo $msg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:23:36.983

这是我可以建议的算法：

1.  检查字段是否为空
2.  检查用户是否已存在于数据库中（在这种情况下，您需要选择特定字段的基础，例如电子邮件字段或用户名字段。
3.  成功，如果用户不存在，则将数据插入数据库。

所以这里是代码：

```
 <?php

/**
 * @author MESMERiZE
 * @copyright 2012
 */

if (empty($username) || empty($pass) || empty($pass) || empty($fname))
{  
        $msg = "Not all fields were entered"; 
}else
{
    // FALSE if exists TRUE if doesnt exist
    if(uniqueUser($username,$emailad) == FALSE)
    {
        $msg="The username or email already exists";

    }else
    { 
        insertIntoDB($fname,$emailad,$username,$pass);
        $msg="The user has been inserted";
        echo $msg;
    }

}

?> 
```

将您的 uniqueUser 函数编辑为：

```
function userExists($usern, $eml)
{
    $query = 'SELECT * FROM tbl_user S WHERE S.username="' . $usern .
        '" OR S.email="' . $eml . '"';
    $q = mysql_query($query);
    if (mysql_num_rows($q) > 0) {
        return false;
    } else {
        return true;
    }
} 
```

# asp.net - 通过 MVC 上传开发的网站后程序集丢失错误

> ID：10124286
> 
> 赞同：0
> 
> 时间：2012-04-12T13:12:03.670
> 
> 标签：asp.net, asp.net-mvc

我用 Asp.net mvc 写了一个站点并发布它，现在想上传它，当我上传它时，我遇到了这个错误：

**无法加载文件或程序集“System.Web.Mvc，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。**

(http://gol.datagts.net)

我该怎么办？有没有人可以帮助我？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:20:15.350

查看程序集的属性（在参考文件夹中）：设置 copyLocal：true

# php - 如何优化我的html代码

> ID：10124290
> 
> 赞同：-1
> 
> 时间：2012-04-12T13:12:08.013
> 
> 标签：php, mysql, html

我一直在 mysql 文本字段中保存缓冲区内容，但是当内容超过字符数限制时，代码被压缩。

那么如何通过使用 php 从代码中删除制表符和空格来优化 html 缓冲区内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:24:08.093

为什么不使用能够保留所有数据的类型？例如长文本或中文本？但是，您可以使用删除所有重复的空格字符

```
preg_replace("/\s+/", " ", trim($s)); 
```

**添加**

正如评论中所注意到的，即使它是有意义的，这也会压缩每个重复的“空格”字符。这不适用于默认的 pre 标签样式，也不适用于任何其他带有 CSS 更改[white-space](http://www.w3.org/TR/CSS2/text.html#white-space-prop)属性的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:13:53.853

您可以使用正则表达式，例如：

```
preg_replace("/\s+/", " ", $string); 
```

那应该只用一个替换所有多个空格、制表符和换行符。

另请参阅：[如何从句子中删除多余的空格、制表符和换行符，并仅用一个空格替换它们？](https://stackoverflow.com/questions/5539169/how-do-i-remove-extra-spaces-tabs-and-line-feeds-from-a-sentence-and-substitute)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:17:44.953

您可以使用诸如**gzdeflate 之**类的函数来压缩数据。见[http://php.net/manual/en/function.gzdeflate.php](http://php.net/manual/en/function.gzdeflate.php)

如果这需要进入非二进制安全位置，您可以对 gzip 压缩的字符串进行 base64_encode，然后存储。

# javascript - 使用 each() 将 cookie 与元素 ID 匹配

> ID：10124294
> 
> 赞同：0
> 
> 时间：2012-04-12T13:12:15.603
> 
> 标签：javascript, jquery, cookies, each

我有一堆 cookie 集，我想与页面上所有元素的 ID 进行匹配。本质上，在页面加载时遍历 dom 并检查该元素的 ID 值是否与 cookie 的值匹配并对该元素执行某些操作。

到目前为止，这是我的代码。

```
<div class="event" id="event_1">

</div>

<div class="event" id="event_100">

</div>

<div class="event" id="event_47">

</div> 
```

假设已经设置了 cookie：

```
event_1, event_1, 30
event_100, event_100, 30 
event_47, event_47, 30 
```

```
$('.event').each(function() {
    var id = $(this).attr('id');
    if (id == readCookie('event_'+id+'')) {
        $(this).hide();
    }

    console.log(id);
    //returns event_1,event_100,event_47
}); 
```

我想我快到了。我认为它与 var id 有关，它返回一个数组。如果我将它硬编码为 event_1 它可以工作。

我应该在这里做什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:19:08.243

您正在收集的 id 已经有 event_ 部分但是您在尝试读取 cookie 时添加它（例如尝试读取 event_event_1 ），我认为应该是这个

```
if(id == readCookie(id)){
    $(this).hide();
} 
```

# java - 如何从 Java 终止进程树？

> ID：10124299
> 
> 赞同：16
> 
> 时间：2012-04-12T13:12:22.840
> 
> 标签：java, windows, batch-file, cmd, process

我在 Java 中使用 Runtime.getRuntime().exec() 命令来启动一个批处理文件，该批处理文件又为 Windows 平台启动另一个进程。

```
javaw.exe(Process1)
 |___xyz.bat(Process2)
        |___javaw.exe(Process3) 
```

Runtime.getRuntime().exec() 返回一个 Process 对象，它有一个 destroy 方法，但是当我使用 destroy() 时，它只杀死 xyz.bat 并使批处理文件的子进程悬空。

Java中是否有一种干净的方法来破坏以批处理为根的进程树？

*我不能使用任何自定义库\摆脱批处理文件来绕过问题

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T13:30:33.473

使用标准 Java API 无法做到这一点（请参阅文章末尾的编辑以获取更改此内容的更新）。您将需要一些不同种类的本机代码。使用 JNA，我使用了如下代码：

```
public class Win32Process
{
    WinNT.HANDLE handle;
    int pid;

    Win32Process (int pid) throws IOException
    {
        handle = Kernel32.INSTANCE.OpenProcess ( 
                0x0400| /* PROCESS_QUERY_INFORMATION */
                0x0800| /* PROCESS_SUSPEND_RESUME */
                0x0001| /* PROCESS_TERMINATE */
                0x00100000 /* SYNCHRONIZE */,
                false,
                pid);
        if (handle == null) 
            throw new IOException ("OpenProcess failed: " + 
                    Kernel32Util.formatMessageFromLastErrorCode (Kernel32.INSTANCE.GetLastError ()));
        this.pid = pid;
    }

    @Override
    protected void finalize () throws Throwable
    {
        Kernel32.INSTANCE.CloseHandle (handle);
    }

    public void terminate ()
    {
        Kernel32.INSTANCE.TerminateProcess (handle, 0);
    }

    public List<Win32Process> getChildren () throws IOException
    {
        ArrayList<Win32Process> result = new ArrayList<Win32Process> ();
        WinNT.HANDLE hSnap = KernelExtra.INSTANCE.CreateToolhelp32Snapshot (KernelExtra.TH32CS_SNAPPROCESS, new DWORD(0));
        KernelExtra.PROCESSENTRY32.ByReference ent = new KernelExtra.PROCESSENTRY32.ByReference ();
        if (!KernelExtra.INSTANCE.Process32First (hSnap, ent)) return result;
        do {
            if (ent.th32ParentProcessID.intValue () == pid) result.add (new Win32Process (ent.th32ProcessID.intValue ()));
        } while (KernelExtra.INSTANCE.Process32Next (hSnap, ent));
        Kernel32.INSTANCE.CloseHandle (hSnap);
        return result;
    } 
```

}

此代码使用标准 JNA 库中未包含的以下 JNA 声明：

```
public interface KernelExtra extends StdCallLibrary {

    /**
     * Includes all heaps of the process specified in th32ProcessID in the snapshot. To enumerate the heaps, see
     * Heap32ListFirst.
     */
    WinDef.DWORD TH32CS_SNAPHEAPLIST = new WinDef.DWORD(0x00000001);

    /**
     * Includes all processes in the system in the snapshot. To enumerate the processes, see Process32First.
     */
    WinDef.DWORD TH32CS_SNAPPROCESS  = new WinDef.DWORD(0x00000002);

    /**
     * Includes all threads in the system in the snapshot. To enumerate the threads, see Thread32First.
     */
    WinDef.DWORD TH32CS_SNAPTHREAD   = new WinDef.DWORD(0x00000004);

    /**
     * Includes all modules of the process specified in th32ProcessID in the snapshot. To enumerate the modules, see
     * Module32First. If the function fails with ERROR_BAD_LENGTH, retry the function until it succeeds.
     */
    WinDef.DWORD TH32CS_SNAPMODULE   = new WinDef.DWORD(0x00000008);

    /**
     * Includes all 32-bit modules of the process specified in th32ProcessID in the snapshot when called from a 64-bit
     * process. This flag can be combined with TH32CS_SNAPMODULE or TH32CS_SNAPALL. If the function fails with
     * ERROR_BAD_LENGTH, retry the function until it succeeds.
     */
    WinDef.DWORD TH32CS_SNAPMODULE32 = new WinDef.DWORD(0x00000010);

    /**
     * Includes all processes and threads in the system, plus the heaps and modules of the process specified in th32ProcessID.
     */
    WinDef.DWORD TH32CS_SNAPALL      = new WinDef.DWORD((TH32CS_SNAPHEAPLIST.intValue() |
            TH32CS_SNAPPROCESS.intValue() | TH32CS_SNAPTHREAD.intValue() | TH32CS_SNAPMODULE.intValue()));

    /**
     * Indicates that the snapshot handle is to be inheritable.
     */
    WinDef.DWORD TH32CS_INHERIT      = new WinDef.DWORD(0x80000000);

    /**
     * Describes an entry from a list of the processes residing in the system address space when a snapshot was taken.
     */
    public static class PROCESSENTRY32 extends Structure {

        public static class ByReference extends PROCESSENTRY32 implements Structure.ByReference {
            public ByReference() {
            }

            public ByReference(Pointer memory) {
                super(memory);
            }
        }

        public PROCESSENTRY32() {
            dwSize = new WinDef.DWORD(size());
        }

        public PROCESSENTRY32(Pointer memory) {
            useMemory(memory);
            read();
        }

        /**
         * The size of the structure, in bytes. Before calling the Process32First function, set this member to
         * sizeof(PROCESSENTRY32). If you do not initialize dwSize, Process32First fails.
         */
        public WinDef.DWORD dwSize;

        /**
         * This member is no longer used and is always set to zero.
         */
        public WinDef.DWORD cntUsage;

        /**
         * The process identifier.
         */
        public WinDef.DWORD th32ProcessID;

        /**
         * This member is no longer used and is always set to zero.
         */
        public BaseTSD.ULONG_PTR th32DefaultHeapID;

        /**
         * This member is no longer used and is always set to zero.
         */
        public WinDef.DWORD th32ModuleID;

        /**
         * The number of execution threads started by the process.
         */
        public WinDef.DWORD cntThreads;

        /**
         * The identifier of the process that created this process (its parent process).
         */
        public WinDef.DWORD th32ParentProcessID;

        /**
         * The base priority of any threads created by this process.
         */
        public WinDef.LONG pcPriClassBase;

        /**
         * This member is no longer used, and is always set to zero.
         */
        public WinDef.DWORD dwFlags;

        /**
         * The name of the executable file for the process. To retrieve the full path to the executable file, call the
         * Module32First function and check the szExePath member of the MODULEENTRY32 structure that is returned.
         * However, if the calling process is a 32-bit process, you must call the QueryFullProcessImageName function to
         * retrieve the full path of the executable file for a 64-bit process.
         */
        public char[] szExeFile = new char[WinDef.MAX_PATH];
    }

    // the following methods are in kernel32.dll, but not declared there in the current version of Kernel32:

    /**
     * Takes a snapshot of the specified processes, as well as the heaps, modules, and threads used by these processes.
     *  
     * @param dwFlags
     *   The portions of the system to be included in the snapshot.
     * 
     * @param th32ProcessID
     *   The process identifier of the process to be included in the snapshot. This parameter can be zero to indicate
     *   the current process. This parameter is used when the TH32CS_SNAPHEAPLIST, TH32CS_SNAPMODULE,
     *   TH32CS_SNAPMODULE32, or TH32CS_SNAPALL value is specified. Otherwise, it is ignored and all processes are
     *   included in the snapshot.
     *
     *   If the specified process is the Idle process or one of the CSRSS processes, this function fails and the last
     *   error code is ERROR_ACCESS_DENIED because their access restrictions prevent user-level code from opening them.
     *
     *   If the specified process is a 64-bit process and the caller is a 32-bit process, this function fails and the
     *   last error code is ERROR_PARTIAL_COPY (299).
     *
     * @return
     *   If the function succeeds, it returns an open handle to the specified snapshot.
     *
     *   If the function fails, it returns INVALID_HANDLE_VALUE. To get extended error information, call GetLastError.
     *   Possible error codes include ERROR_BAD_LENGTH.
     */
    public WinNT.HANDLE CreateToolhelp32Snapshot(WinDef.DWORD dwFlags, WinDef.DWORD th32ProcessID);

    /**
     * Retrieves information about the first process encountered in a system snapshot.
     *
     * @param hSnapshot A handle to the snapshot returned from a previous call to the CreateToolhelp32Snapshot function.
     * @param lppe A pointer to a PROCESSENTRY32 structure. It contains process information such as the name of the
     *   executable file, the process identifier, and the process identifier of the parent process.
     * @return
     *   Returns TRUE if the first entry of the process list has been copied to the buffer or FALSE otherwise. The
     *   ERROR_NO_MORE_FILES error value is returned by the GetLastError function if no processes exist or the snapshot
     *   does not contain process information.
     */
    public boolean Process32First(WinNT.HANDLE hSnapshot, KernelExtra.PROCESSENTRY32.ByReference lppe);

    /**
     * Retrieves information about the next process recorded in a system snapshot.
     *
     * @param hSnapshot A handle to the snapshot returned from a previous call to the CreateToolhelp32Snapshot function.
     * @param lppe A pointer to a PROCESSENTRY32 structure.
     * @return
     *   Returns TRUE if the next entry of the process list has been copied to the buffer or FALSE otherwise. The
     *   ERROR_NO_MORE_FILES error value is returned by the GetLastError function if no processes exist or the snapshot
     *   does not contain process information.
     */
    public boolean Process32Next(WinNT.HANDLE hSnapshot, KernelExtra.PROCESSENTRY32.ByReference lppe);

} 
```

然后，您可以使用“getChildren()”方法获取子列表，终止父节点，然后递归终止子节点。

我相信您可以使用反射来增加 java.lang.Process 的 PID（但是，我没有这样做；我转而使用 Win32 API 自己创建进程，以便我可以更好地控制它）。

所以把它放在一起，你需要这样的东西：

```
int pid = (some code to extract PID from the process you want to kill);
Win32Process process = new Win32Process(pid);
kill(process);

public void kill(Win32Process target) throws IOException
{
   List<Win32Process> children = target.getChildren ();
   target.terminateProcess ();
   for (Win32Process child : children) kill(child);
} 
```

# 编辑

事实证明，Java API 的这个特殊缺点正在 Java 9 中得到修复。请参阅[此处](http://download.java.net/jdk9/docs/api/index.html?java/lang/ProcessHandle.html)的 Java 9 文档预览（如果未加载正确的页面，则需要查看`java.lang.ProcessHandle`界面）。对于上述问题的要求，代码现在看起来像这样：

```
Process child = ...;
kill (child.toHandle());

public void kill (ProcessHandle handle)
{
    handle.descendants().forEach((child) -> kill(child));
    handle.destroy();
} 
```

（请注意，这未经测试 - 我还没有切换到 Java 9，但我正在积极阅读它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:47:02.417

如果您控制子进程和批处理文件，另一种解决方案是让子进程创建一个线程，打开一个 ServerSocket，监听到它的连接，如果它收到一个调用 System.exit()正确的密码就可以了。

如果您需要多个同时实例，可能会出现并发症；那时，您将需要某种方式为它们分配端口号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-13T08:30:09.133

您无法使用适用于 Java 8 或更低版本的标准 Java API 来做到这一点。

#### 方法一

如果你有 Java 9 或更高版本，你可以使用[ProcessHandle](https://docs.oracle.com/javase/9/docs/api/java/lang/ProcessHandle.html)

#### 方法二

在 Java 中`taskkill`与`/t`and`/f`标志和`Runtime.getRuntime().exec()`or类一起使用。`ProcessBuilder`

/f --> 强制杀死 /t --> 杀死该进程生成的所有子进程。

```
ProcessBuilder pb1 = new ProcessBuilder("cmd.exe","/c","taskkill /f /t /pid "+p.pid());
Process p1 = pb1.start(); 
```

# 详细分析

我曾在我的 Java 代码中使用流程构建器来完成它。

我已经复制了问题陈述。这是一个示例批处理文件，它`Powershell`在 windows 中启动另一个进程以每秒打印从 1 到 20 的计数器，这是子进程：

```
@echo off
echo starting
powershell -command " for ($count=1;$count -le 20;$count++) { Start-Sleep 1; Write-Output $count }"
echo success 
```

ps：您需要将 InputStream 重定向到 stdout 以获得终端上的输出。

使用对象`destroy()`方法`process`只会杀死该进程，而不是子/孙进程。

您可以`tasklist`在终端上运行并定位`powershell.exe`以比较运行 java 程序之前和之后的子进程，以查看仍在运行的子进程。

要与父进程一起杀死子进程，请使用`ProcessBuilder`以下`p`方式启动一个新进程，您要删除的进程在哪里：

```
ProcessBuilder pb1 = new ProcessBuilder("cmd.exe","/c","taskkill /f /t /pid "+p.pid());
Process p1 = pb1.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:17:43.423

您不能使用 JDK 杀死 Windows 的进程树。您需要依赖 WinAPI。您将不得不求助于本机命令或 JNI 库，所有这些都依赖于平台并且比纯 Java 解决方案更复杂。

示例链接[JNI 示例](https://stackoverflow.com/questions/2172520/how-to-use-winapi-functions-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T02:15:35.387

这是另一种选择。使用这个 powershell 脚本来执行你的 bat 脚本。当你想杀死树时，终止你的 powershell 脚本的进程，它会自动在它的子进程上执行 taskkill。我让它调用 taskkill 两次，因为在某些情况下它不会在第一次尝试时进行。

```
Param(
    [string]$path
)

$p = [Diagnostics.Process]::Start("$path").Id

try {
    while($true) {
        sleep 100000
    }
} finally {
    taskkill /pid $p
    taskkill /pid $p
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-15T07:56:02.427

使用 java 9，杀死主进程会杀死整个进程树。你可以这样做：

```
Process ptree = Runtime.getRuntime().exec("cmd.exe","/c","xyz.bat");
// wait logic
ptree.destroy(); 
```

请查看此[博客](http://blog.andresoviedo.org/2016/07/java-9-process-api.html)并查看***处理流程树***示例。

# asp.net - formsauthentication redirecttologinpage 不起作用

> ID：10124302
> 
> 赞同：1
> 
> 时间：2012-04-12T13:12:32.747
> 
> 标签：asp.net, authentication, redirect, login

我有一个 login.aspx。其中有一个重定向页面的代码。

```
Server.Transfer(string.Format("~/admin/FillUserExtraInfo.aspx?UserName={0}",Server.UrlEncode(loginInitial.UserName))); 
```

它确实有效，然后在 FillUserExtraInfo.aspx

```
protected void Page_Load(object sender, EventArgs e)
    {
        // retrieve the username from the querystring
        userName = this.Request.QueryString["UserName"];
        string mode = UsefulFunctions.GetOperatingMode();
        if (mode == ConfigurationSettingValues.OperatingModes.Backup.ToString())
            FormsAuthentication.RedirectToLoginPage(); 
```

但是 FormsAuthentication.RedirectToLoginPage() 不起作用。程序继续向前执行，直到 Page_Load 结束，然后最终返回登录。

**更新：在此期间，我发现 url bacomes`http://localhost:53906/Login.aspx?ReturnUrl=%2fLogin.aspx%3fAction%3dLogout`**

最后。但我得到一个错误：

```
Unable to evaluate expression because the code is optimized or a native frame is on top of the call stack. 
```

我的 web.config：

```
<authentication mode="Forms">
        <forms loginUrl="Login.aspx" protection="All" timeout="30" requireSSL="false" slidingExpiration="true" defaultUrl="default.aspx" cookieless="UseDeviceProfile" enableCrossAppRedirects="false"/>
    </authentication> 
```

我的问题：

1.  为什么 FormsAuthentication.RedirectToLoginPage() 不起作用？
2.  如何处理我遇到的错误？

谢谢你。

**第二次更新：我在 FormsAuthentication.RedirectToLoginPage() 之后添加了 Response.End() 然后它可以工作但异常仍然存在。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:25:15.907

尝试使用 Response.Redirect("url", false) 而不是 Server.Transfer()。

```
Response.Redirect("~/admin/FillUserExtraInfo.aspx?UserName=" + Server.UrlEncode(loginInitial.UserName) + "", false); 
```

[参考](http://support.microsoft.com/kb/312629/EN-US/)

# actionscript-3 - 最佳 JPEG 图像压缩质量

> ID：10124306
> 
> 赞同：1
> 
> 时间：2012-04-12T13:12:42.530
> 
> 标签：actionscript-3, compression

我正在将 bitmapData 编码为 JPG。什么是一个好的压缩率，可以在不损失整体图像质量的情况下产生更小的文件大小？（我正在寻找适用于任何图像的解决方案）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:32:16.093

所以，我试图以最理论上的方式回答你的问题，并解释为什么很难（如果不可能的话）推荐一个在*所有*情况下都能很好地工作的单一压缩率。

首先，您必须至少对有损压缩和无损压缩之间的区别有一个模糊的了解。

## 有损与无损

无损压缩是一种压缩算法，它采用一组数据，将其转换为另一组更小的数据。逆向过程应产生与预压缩数据*完全相同的数据集。*另一方面，有损压缩不会。

使用有损压缩，算法可以丢弃它认为重建原始消息不必要的信息，但不保证重建完全相同的消息。

让我们看一个假设的例子来说明这一点。假设我想出了一种压缩英文文本的算法方法。我有一个称为有损编解码器`A`和一个有损编解码器称为`B`. 假设我想压缩以下短语：

> 鲍勃去商店买牛奶了。

通过编解码器运行该短语`A`，然后对其进行解压缩，我会得到：

> 鲍勃去商店买牛奶了。

`B`但是，通过压缩率为 10 的编解码器运行相同的消息，我可能会得到以下短语：

> 鲍勃去商店买牛奶。

请注意，结果不一样，但非常接近。消息的完整性保持不变，但它与我放入系统的信息不同。

现在让我们通过`B`压缩率为 5 的编解码器运行源消息。这次我尝试解码压缩消息时可能会得到以下信息：

> 鲍勃去商店买食物。

请注意，缺少更多信息，但消息的隐含意图仍然存在。但是我不知道，鲍勃去商店买什么样的食物。

最后，让我们通过`B`压缩率为 1 的编解码器运行源消息。这次我可能会返回：

> 鲍勃不在这里。

这次算法决定 Bob 去了哪里并不重要，只是 Bob 不在当前位置。原始消息的核心意图仍然保留，但上下文的其余部分已丢失。

同样的理论也适用于图像。JPEG 压缩的工作原理是算法丢弃它认为不需要重建图像的数据。

## 那么JPEG如何真正起作用呢？

JPEG 实际工作的过程充满了复杂的数学，但在更高的层次上它很容易理解。它通过将图像分解成小的 8x8 像素块来工作。然后，它将这些像素从一组像素转换为一组数学公式（如果您有兴趣，可以使用[DCT-II](http://en.wikipedia.org/wiki/Discrete_cosine_transform#DCT-II)），然后通过分析这些公式，根据给定的压缩率查看可以省略哪些公式。

维基百科上的 DCT 文章中有一个很好的数学示例。

![工作中的 DCT](../Images/646ce79167603e99c8df3227c5ddfa4a.png)

注意它是如何通过将一组简单的图案块（从余弦生成）混合在一起来构建字母“A”的图像的。

现在，你会注意到——如果你足够近距离地观察该图像——有一堆非常接近于零的系数，比如`+0.006`和`+0.021`。你会注意到，如果你仔细观察，它们对左侧最终图像的影响是相当小的。最简单的解释是：JPEG 压缩通过丢弃这些小值来工作，实际上不计算它们。因此，当它重构图像时，通过反转过程（iDCT/DCT-III），它不会对块添加或减去这些细微的变化。它只存储/使用对最终块影响最大的那些。

压缩率越低，它试图丢弃的这些越多。压缩率越高，它试图保持的越多。

现在在这个阶段有很多更微妙的数学，但这是最好的简单例子。

## 这是什么意思呢？！

这意味着压缩器尝试删除的信息*直接取决于*您尝试压缩的图像。由于块的结构和它们包含的信息，一些图像将比其他图像更容易压缩而不会显示视觉伪影。

还要考虑压缩的效果取决于*谁*在看它。我经常处理图像（无论是在大学还是在专业领域），并且花了很多时间研究 JPEG/MPEG 的底层压缩机制，因此我很容易发现压缩伪影，因为我知道我在寻找什么。但是，那些不那么敏锐的眼睛可能不会发现这些相同的文物。（就像有些人不能听 MP3 压缩文件，因为他们可以从字面上听到工作中的压缩算法）

因此，您的里程可能会有所不同，具体取决于您尝试执行的操作以及您尝试压缩的图像。如果您对基础数学有很好的理解，那么您可能能够根据您尝试压缩的图像预测在压缩比方面什么会给您带来*最大的收益。*但大多数时候，它只是实验的产物。

## TL;博士

60% 到 80% 之间的压缩率通常可以很好地减小尺寸，而不会引入太多明显的视觉伪影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:47:17.327

您使用的压缩方式在很大程度上取决于图像以及您将使用它的目的。每当您将图像保存为 JPG 时，您都会失去永远无法恢复的质量，并且压缩率越高，您失去的质量就越多。

你需要问自己：

*   图像将如何使用？
*   它需要看起来多好？
*   我想节省空间吗？如果有，多少钱？如果不是，我对 JPG 压缩的目标是什么？

如果你有一堆大的、高分辨率的图像想要缩小以供网络使用，你最好调整图像的大小而不是降低质量。

如果我对您想要完成的工作以及您使用的图像类型有更多了解，我可以给您我的个人意见。最后，它确实取决于图像以及使用情况。

# bash - 从完整路径中获取 Unix 中的文件名

> ID：10124314
> 
> 赞同：56
> 
> 时间：2012-04-12T13:13:07.467
> 
> 标签：bash, shell, unix, ksh

我试图`"abc.txt"`摆脱`/this/is/could/be/any/path/abc.txt`使用 Unix 命令。注意`/this/is/could/be/any/path`是动态的。

任何的想法？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-12T13:15:07.887

在`bash`：

```
path=/this/is/could/be/any/path/abc.txt 
```

如果您的路径中有空格，请将其包装在`"`

```
path="/this/is/could/be/any/path/a b c.txt" 
```

然后提取路径，使用[basename函数](https://ss64.com/bash/basename.html)

```
file=$(basename "$path") 
```

或者

```
file=${path##*/} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T13:16:00.173

`basename path`给出路径末尾的文件名

编辑：

值得补充的是，一种常见的模式是在命令周围使用反引号，例如 `basename ...`，因此 UNIX shell 将执行命令并返回其文本值。

因此，要将 basename 的结果分配给变量，请使用

```
x=`basename ...path...` 
```

$x 将是文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-03T08:34:11.927

您可以使用 dirname 命令

```
$ dirname $path 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T13:15:14.947

您可以使用`basename /this/is/could/be/any/path/abc.txt`

# c# - 我可以在不将页面限制到特定模块的情况下呈现 DotNetNuke 模块的控件吗？

> ID：10124324
> 
> 赞同：1
> 
> 时间：2012-04-12T13:13:42.393
> 
> 标签：c#, dotnetnuke, dotnetnuke-module

我正在开发一个 DotNetNuke 模块，该模块由几个不同的屏幕组成，每个屏幕都有自己的一组用户界面交互。我决定通过将每个屏幕放在不同的模块控件中来处理这个问题。我能找到加载该控件的唯一方法是通过以下方式为链接提供 URL：

```
Globals.NavigateURL(Constants.LicenseDetailControl, "clientId=" + _clientId, "licenseId=" + data.Id, "mid=" + this.ModuleId); 
```

不幸的是，由于`mid=xxx`查询参数，这将页面限制为仅呈现此特定模块。但是，如果我不提供模块 ID 参数，那么我的控件根本不会呈现并且页面是空白的。

有没有办法在不强制页面只显示一个模块的情况下呈现特定控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:23:52.790

> 有没有办法在不强制页面只显示一个模块的情况下呈现特定控件？

答案是不。

通过指定 ctl 类型和模块 ID 来渲染特定控件通常用于编辑和管理模块，它们专门从页面中排除其他模块。

正如 Mitchel 所回答的，您必须自己进行动态加载。还有其他模块可以执行此操作，您可以复制模式。许多 Ventrian 模块使用它们自己的 Url 规范来加载不同的控件（这意味着不要在 Url 中使用 /ctl/xx 和 /mid/yy，而是用您自己的定义替换它，例如 'view=x'）

但是，您也可以考虑将模块分散到不同的页面，以便一个 DNN 页面具有“列表”，而另一个页面具有“视图”。这提供了一组更合乎逻辑的 URL（想象一个名为 /licences 的许可证列表页面，然后是一个名为 /licence/licenceId/xx 的许可证详细信息页面）。它还允许在整个站点中更灵活地使用该模块。但它确实使安装变得不那么直观，因为它只是将所有模块转储在一页上。

不久前我写了一篇关于这个主题的博客文章——试图解释它是如何组合在一起的。它较旧，但仍然相关，可能会为您提供更多信息。 [设计、构建和构建 DotNetNuke 模块](http://www.ifinity.com.au/Blog/EntryId/48/Designing-Structuring-and-Architecting-DotNetNuke-reg-Modules)

或者，正如另一位评论者已经发布的那样，只需对内容进行完整的 AJAX 显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:30:35.353

好吧，这个问题的答案并不像你希望的那么简单。您正在查看的情况是所谓的“模块隔离”，从框架的角度来看，没有真正的方法可以绕过它。

但是，对于如何在模块中执行此操作以获得所需的效果，您有一些选择。

1.  在您的主视图控件中，根据您传递和处理的查询字符串值将实际视图动态加载到 PlaceHolder 中。
2.  在您的主视图控件中，每个视图都有面板，并根据需要通过参数显示/隐藏它们
3.  在您的主视图控件中，为每个视图添加子控件。从这里您可以根据需要启用/禁用项目和视图状态来处理视图，再次通过处理参数。

就我个人而言，我选择 1 或 3。一个效果很好并且最干净，但我发现某些控件在动态注入方面存在问题。我更喜欢选项 3，否则我可以禁用所有未呈现的控件上的视图状态，以减小页面大小，否则页面大小会被 2 放大。

# c++ - 模板 - 类对象 - 类对象的结构

> ID：10124332
> 
> 赞同：-3
> 
> 时间：2012-04-12T13:14:04.970
> 
> 标签：c++, oop

[（*我必须使用我的数组结构，并且它必须是动态的）]

我希望`Array`结构中充满`Expe`类对象。我正在使用模板，但不知何故我的结构标头无法识别我创建的模板。

结构头：

```
template <class T>;
struct Arr{
    int days;
    T * M;
};
typedef Arr* Array; 
```

结构 cpp：

```
void constr(Array &o){
    //Construct of 31*1 Matrix
    o=new Arr;
    o->days = 31;
    o->M = new T[o->days]; 
```

我认为应该没问题，但我收到错误：

```
..\ListStruc.cpp:26:13: error: expected type-specifier before 'T' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:20:49.810

你在`template<class T>`and之间有一个分号`struct Arr`，它不属于那里。所以改成

```
template <class T> struct Arr{ int days; T * M; }; 
```

此外`Arr`是一个模板，因此您不能 typedef`Arr*`到`Array`, only `Arr<someConcreteType>*`。

最后一个模板函数必须在标题中实现，并且如前所述 typedef 不起作用，因此放入`constr`标题并将其更改为：

```
template<class T> void constr(Arr<T>*& o){
  o=new Arr<T>;
  o->days = 31;
  o->M = new T[o->days]; 
```

可能还有其他问题，但这就是我从问题中可以看到的。

当然，除了编译之外，您的代码也存在问题（违反[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)和缺乏异常安全性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:29:15.547

您必须删除结构声明中的分号。此外，当您创建这种类型的对象时，您必须指定模板类名称。而且您不能将指针放入引用中。事实上，你不能把任何东西放在引用中，它们是常量。使用指针而不是引用作为 constr 函数参数。

# java - Java ArrayList：创建数组的副本并与旧对象分开使用，但不要创建新对象

> ID：10124333
> 
> 赞同：1
> 
> 时间：2012-04-12T13:14:05.233
> 
> 标签：java, object, reference

例如，我有一个 ArrayList：

```
ArrayList<Animal> zoo = new ArrayList<Animal>();
// some code to add animals to zoo 
```

我想为此创建一个副本`old zoo`，`new zoo`我可以使用 remove/add... 来处理这个新动物园。（当然，它不会影响到旧动物园）。所以，我有一个方法：创建一个新的动物园，克隆旧动物园中的每个动物（这意味着创建动物对象）。所以，它太慢了。

我有另一种方法：创建旧动物园的每只动物的参考并复制到新动物园。所以，新动物园只是参考了动物园的动物。所以，每次我删除/添加，......它只是删除对动物对象的引用。不会影响旧动物园，也不会创建新对象。

但是，我不知道如何在 Java 中做到这一点。请教我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:17:01.767

这在 Java 中非常简单：

```
ArrayList<Animal> copy = new ArrayList<Animal>(zoo); 
```

构造函数[`ArrayList<T>(Collection<? extends E> c)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#ArrayList%28java.util.Collection%29)执行您作为参数提供的列表的*浅表副本*，这正是您正在寻找的语义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T13:17:01.893

只需尝试：

```
ArrayList<Animal> newZoo = new ArrayList<Animal>(oldZoo); 
```

# youtube-api - 在子域上使用 youtube API 访问我的谷歌帐户的问题

> ID：10124336
> 
> 赞同：0
> 
> 时间：2012-04-12T13:14:23.733
> 
> 标签：youtube-api

我对 youtube API 有疑问。

实际上，它在服务器（http://mysite.com）上运行良好，但我想在另一台服务器上创建另一个 API（或使用相同的 API）（使用 url：[http://dev.mysite .com](http://dev.mysite.com)，所以它只是一个子域）。

问题是，它在第​​二台服务器上不起作用，（我对两者都使用 php Zend 库）。

当我在用户接受授权后点击链接女巫应该给我一个令牌时，我收到一条错误消息，例如“我们无法访问您的 googleaccount 帐户，因为另一个网站试图访问它并发送了错误的请求。 .. AuthSub 目标路径前缀与提供的“下一个”URL 不匹配。”（但它仍然适用于第一台服务器 (http://mysite.com)）。

我在我的客户端和代码中注册了良好的重定向 URI，我不明白......

你知道如何解决这个问题吗？

当您想在多个子域上创建应用程序时，您必须按子域创建一个产品和一个 client_id 还是让我们为每个子域创建一个产品和一个 client_id？

感谢帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:35:32.467

我通过使用 Auth Google Javascript 库解决了这个问题

# iphone - 使用 iphone sharekit 在一篇文章中发布多个 url

> ID：10124340
> 
> 赞同：2
> 
> 时间：2012-04-12T13:14:39.180
> 
> 标签：iphone, ios, sharekit

我想使用共享工具包发布文本（在 twitter、fb、邮件上），如下所示：

> 你好，
> 
> 这是分享文字
> 
> 单击此处做某事*<===这应该是一个链接*
> 
> 点击这里到另一个东西*<=== 这应该是一个链接*
> 
> 干杯

我有以下代码：

```
-(IBAction)shareOnTwitter:(id)sender
{
    [SHK setRootViewController:self];
    SHKItem *item;
    NSURL *url = [NSURL URLWithString:@"http://dosomething.com"];
    item = [SHKItem URL:url title:@"HI,\n\nThis is share text\n\nCheers"];
    [SHKTwitter shareItem:item];

}

- (IBAction)shareOnFacebook:(id)sender
{
    SHKItem *item;
    NSURL *url = [NSURL URLWithString:@"http://dosomething.com"];
    item = [SHKItem URL:url title:@"HI,\n\nThis is share text\n\nCheers"];
    [SHKFacebook shareItem:item];

}

- (IBAction)shareWithMail:(id)sender
{
    SHKItem *item;
    NSURL *url = [NSURL URLWithString:@"http://dosomething.com"];
    item = [SHKItem URL:url title:@"HI,\n\nThis is share text\n\nCheers"];
    [SHKMail shareItem:item];

} 
```

但 url 附加在末尾。如何在我的文本中添加多个链接并将链接放在中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:52:46.423

我只是查看了文档。ShareKit 不是为共享长信息而设计的。只有文本、图像、文件或 URL（一次只有一个）。您将不得不自己研究对它们进行编程（或找到更好的库）。

*   对于邮件，您可以阅读[MFMailComposeViewController的文档](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)
*   对于 twitter 和 facebook，您需要不同的东西，只需观看网络教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:52:13.323

基本上你想首先创建带有链接的 html 格式的文本，然后将其加载到文本 SHKItem 并共享它。

```
SHKItem *item = [SHKItem text:yourHTMLFormattedString];
[SHKMail shareItem:item]; 
```

它可能需要一些自定义，因为每个服务可能以不同的方式处理 html 格式的文本。但至少邮件共享器应该没有问题。

URL SHKItem 用于不同的目的 - 仅用于单个 URL 共享，每个共享者处理它的方式不同，例如。Facebook 自动从网页添加图片，Twitter 将其缩短等。

还有一个提示，以防万一您不知道 - [ShareKit 2.0](https://github.com/ShareKit/ShareKit/)具有一些新功能，已更新和维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T20:04:50.717

您将不得不更改处理这些服务的 ShareKit 类：

*   SHKFacebook.m：“-(BOOL)send”方法。
*   SHKTwitter.m：“-(void)showTwitterForm”方法。
*   SHKMail.m：“-(BOOL)sendMail”方法。

对于 Twitter 和 Mail 来说，这很容易，您只需要根据需要创建一个带有消息文本的 NSString。使用 Facebook，您必须更改附件，您可以在[此处](https://developers.facebook.com/docs/guides/attachments/)查看 facebook API以获取更多选项。

# java - 使用 Java 拆分 URL 格式的字符串

> ID：10124341
> 
> 赞同：2
> 
> 时间：2012-04-12T13:14:42.847
> 
> 标签：java, android, string

我有`String`一个网站 URL，例如*"http://www.abcd.com/en/sites/default/files/pic.jpg"*。我想拆分这个字符串，以便我可以更改一些路径值，例如将*/files/*更改为*/newfolder/*。

这很容易实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:18:20.787

```
String[] afterSplit = yourString.split("files/");
String newString = afterSplit[0];
newString += "/newfolder/";
newString += afterSplit[1]; 
```

使用标准 String.split() 方法，因为您要求拆分。newString 是结果字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:20:05.410

这将删除最后一个“/”之后的部分并附加“newfolder/pic.jpg”

```
String str = "http://www.abcd.com/en/sites/default/files/pic.jpg";
str.substring(0, s.lastIndexOf("/") + 1) + "newfolder/pic.jpg"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:21:39.313

怎么样：

```
String parts[] = String.split(oldPath, "files\");
String newPath = parts[0] + "newfolder\" + parts[1]; 
```

我还没有测试过它，但理论上它应该可以工作。正则表达式中的反斜杠可能有问题，但如果是这样，它很容易修复。

问候，

-哈利

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T13:17:01.050

例如，使用替换功能并将“files/”替换为“files/newfolder/”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T13:19:21.637

这有效：

```
String input = "http://www.abcd.com/en/sites/default/files/pic.jpg";
int lastIndexOfSlash = input.lastIndexOf('/');
String result = input.substring(0, lastIndexOfSlash + 1) + "newfolder/" + input.substring(lastIndexOfSlash + 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T13:16:26.303

```
string.replace("pic.jp" ,"newfolder/pic.jpg"); 
```

希望能帮助到你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T13:16:53.820

```
String string = "http://www.abcd.com/en/sites/default/files/pic.jpg";
string.replace("files/", "files/newfolder/"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-12T13:24:13.727

这应该工作：

```
String s = "http://www.abcd.com/en/sites/default/files/pic.jpg";
StringBuilder sb = new StringBuilder(s);
sb.insert(sb.lastIndexOf("/"), "/newfolder");
s = sb.toString(); 
```

# php - Android - 显示和更新 MySQL 数据库

> ID：10124343
> 
> 赞同：0
> 
> 时间：2012-04-12T13:14:43.890
> 
> 标签：php, android, mysql, eclipse

我目前设法创建了一个允许用户注册和登录的android应用程序。注册的数据保存到数据库中，并从数据库中提取登录数据。

我现在想允许用户从将存储在数据库中的类列表（类表）进行预订。我需要向用户显示课程详细信息，以允许他们选择（可能带有复选框）他们希望预订的课程。

完成此操作后，用户现在可以访问显示其预订的屏幕（用户预订表 - 加入表），还允许他们“取消”他们的预订，然后更新此表并删除他们选择的预订从表。

有谁知道网站/youtube上的任何教程可以帮助我，甚至是个人知识，比如这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:28:22.137

我想你需要几个 api 调用。一种是验证您的用户并返回一个类和详细信息列表，以便 android 可以显示它们。另一种方法将允许经过身份验证的用户从选定的类创建预订。第三个将允许用户修改或删除他们的预订。

这是 CRUD api 的教科书示例。 [http://en.wikipedia.org/wiki/Create,_read,_update_and_delete](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)，您也需要为您的用户提供某种身份验证系统。

[http://www.myintervals.com/blog/2009/06/19/api-authentication-methodologies/](http://www.myintervals.com/blog/2009/06/19/api-authentication-methodologies/)

# asp.net - VB.NET IsNothing() 没有按预期工作？

> ID：10124345
> 
> 赞同：0
> 
> 时间：2012-04-12T13:14:52.687
> 
> 标签：asp.net, vb.net

我有一个这样的查询：

```
 Dim clcexists = (From p In dbContext.Signatures _
                          Where p.StudentID = people_id _
                         And p.ContractType = "clc" _
                          Order By p.ID Descending _
                           Select p) 
```

稍后我使用 IsNothing 检查 clcexists 中是否存在任何行，如下所示：

```
 If IsNothing(clcexists) Then ' If no CLC is on file.
            clcfirst = Date.Now.Subtract(year)
            clcdate = clcfirst
        Else ' If CLC is on file.
            clcfirst = clcexists.FirstOrDefault()
            clcdate = clcfirst.SignatureDate
        End If 
```

但是 IsNothing() 并没有像我预期的那样运行。结果表中没有行，但它仍然表现得好像存在并转到 Else 子句。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:18:31.940

您可能想[`Any`](http://msdn.microsoft.com/en-us/library/bb337697.aspx)改用：

```
If Not clcexists.Any() Then ' no CLC is on file.
    clcfirst = Date.Now.Subtract(year)
    clcdate = clcfirst
Else ' If CLC is on file.
    clcfirst = clcexists.FirstOrDefault()
    clcdate = clcfirst.SignatureDate
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:26:11.417

`IsNothing`检查引用是否具有分配给它的对象实例（即它不是`null`）。在您的情况下，对象不是`null`，因为它指向没有行的实例。

[http://msdn.microsoft.com/en-us/library/5adx7fxz(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/5adx7fxz(v=vs.71).aspx)

您应该使用`Rows.Count`,`Rows.Any()`或`HasRows`属性来检查您的实例上是否存在行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:16:39.553

使用 HasRows 属性：

[http://msdn.microsoft.com/en-us/library/system.data.datatablereader.hasrows.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatablereader.hasrows.aspx)

# jquery - 如何触发jQuery asual的地址插件的更改事件？

> ID：10124349
> 
> 赞同：0
> 
> 时间：2012-04-12T13:15:11.013
> 
> 标签：jquery, jquery-address

我正在使用 jQuery Asual 地址插件：[http ://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

jQuery Asual Address 插件是这样使用的

```
$('a').click(function() {
  $.address.value($(this).attr('href'));
  return false;
});

$.address.change(changeFunction); 
```

如果我在链接“index.php”上单击两次，则第二次 URL 不会更改，并且不会触发 Change 事件，因此页面不会重新加载。知道如何触发 jquery 地址更改吗？

问候， Sanket

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-27T18:12:46.870

这个优秀插件的棘手之处在于它`$.address`是一个常规对象而不是 jQuery 对象（`$`这里有误导性）。

为了使触发器工作，您需要以这种方式使用它（我已经通过插件源阅读了此内容）：

```
$($.address).trigger("change"); 
```

不幸的是，这导致了一个缺点，即您不能依赖通常的调用者参数`value`, `path`, `pathNames`,`parameterNames`和。您需要以这种方式构建回调函数，以便它可以在内部提取这些值（例如通过方法）。`parameters``queryString``$.address.value()`

# android - android根据切换按钮的状态验证textview

> ID：10124351
> 
> 赞同：1
> 
> 时间：2012-04-12T13:15:18.070
> 
> 标签：android, textview, togglebutton, android-button

我在一种能够根据切换按钮的状态验证文本视图的方法之后。如果切换处于开启状态，我希望最大数字为 9，如果处于关闭状态，我希望最大数字为 14。

我目前有以下用于我的切换

公共无效 addListenerOnButton() {

```
unitToggle = (ToggleButton) findViewById(R.id.unitToggle);
        final TextView tw1 = (TextView)findViewById(R.id.tw1);
        final TextView tw2 = (TextView)findViewById(R.id.tw2);
        final TextView cw1 = (TextView)findViewById(R.id.cw1);
        final TextView cw2 = (TextView)findViewById(R.id.cw2);
        final TextView rightUnit = (TextView)findViewById(R.id.rightUnit);

        unitToggle.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                StringBuffer result = new StringBuffer();
                if(tw1.getHint().toString().equals("kg")){
                    tw1.setHint("st");
                    tw2.setHint("lb");
                    cw1.setHint("st");
                    cw2.setHint("lb");
                }
                else{
                    tw1.setHint("kg");
                    tw2.setHint("g");
                    cw1.setHint("kg");
                    cw2.setHint("g");
                }
            }
        });
    } 
```

tw2 和 cw2 是我希望添加验证的文本视图。（上面只是在单击切换时设置文本视图的提示。我还有一个按钮，用于将值（tw1、tw2、cw1 和 cw2）存储到共享首选项中。一旦单击此存储按钮，就会运行一些条件。我的问题是我想添加一个条件，如果切换状态为 on 并且 tw2 或 cw2 为 >9 则显示警报对话框。（与 off stae 相同，但使用 14 而不是 9 ）

任何帮助，将不胜感激。

如果这听起来不清楚，请告诉我，我会为你重写。

* * *

**编辑**。我知道如何验证

```
 if( Integer.parseInt(tw2.getText().toString())>14){ 
```

但我不知道如何比较切换的两种状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:54:32.700

您可以设置 exitText 的最大长度。有关信息，请参阅此。[长度输入过滤器](https://stackoverflow.com/questions/3285412/limit-text-length-of-edittext-in-android)

您只需在编辑文本或任何 textView 组件（editText 扩展 TextView）上设置输入过滤器。不要使用 int 解析，因为这种方式要好得多。或至少计算字符串长度，无需转换为 Int。

要检查切换按钮状态，请设置此处描述的 checkedChangeListener：

[切换按钮](http://developer.android.com/reference/android/widget/CompoundButton.html#setOnCheckedChangeListener%28android.widget.CompoundButton.OnCheckedChangeListener%29)

并检查按钮是否被切换，您只需使用 isChecked()，也在上述文档中进行了描述。

# c# - ajax调用后MVC3重定向到新页面

> ID：10124353
> 
> 赞同：0
> 
> 时间：2012-04-12T13:15:26.327
> 
> 标签：c#, ajax, asp.net-mvc-3, redirect

在 ASP.NET MVC3 应用程序中，我有一个基本控制器，我在其中覆盖了一些功能。我从中派生出所有的控制器。

在基本控制器中

我正在重写`OnAuthorization`事件处理程序来检查一些东西，然后返回真或假。如果结果为真，我想重定向到主页

```
protected override void OnAuthorization(AuthorizationContext filterContext)
{
    if(CheckValues())
    {
        RedirectToHomePage();
    }

}

public ActionResult RedirectToHomePage()
{
    return RedirectToAction("Index", "Home");
} 
```

重定向适用于正常的操作调用。

但是，当有 AJAX CALL 时，主页会在页面的 DIV 内加载，而不是作为新页面加载。

当有 AJAX 调用时，有没有办法强制整个页面重新加载并重定向到主页？

我尝试使用`Redirect("~/")`重定向到根 URL 但同样的问题。页面加载在 DIV 内，而不是在整个页面中。

希望我很清楚。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:21:54.293

您需要在 AJAX 回调方法（javascript 客户端）而不是 C#（服务器端）中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:22:58.267

你的 AJAX 调用怎么样？如果您使用的是 jQuery AJAX，那么您可以使用 on success 来重定向页面。

```
$.ajax({
    url: 'ajax/test.html',
    success: function() {
      window.location = "/";
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T09:57:07.793

```
var redirectSucURL = '@Url.Action("MethodName","ControllerName")'; 
```

成功消息成功后：函数（结果）{

```
if (true) {
    window.location.href = redirectSucURL;
} 
```

# html - 我需要在没有 CSS 或 JS 的图像上放置文本

> ID：10124354
> 
> 赞同：1
> 
> 时间：2012-04-12T13:15:29.127
> 
> 标签：html, layout, browser, cross-browser

有没有办法可以将文本`<p>`放在图像顶部？不使用 css 或 javascript。只是普通的html。原因是这种技术或方法将用于不支持 css 或 javascript 的旧手机。它也不支持“背景”属性。

[http://jsbin.com/aroxit/2](http://jsbin.com/aroxit/2)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:27:02.870

CSS 是做到这一点的唯一方法。没有其他 HTML 选项可以让您将项目放在一起。唯一的另一种选择是设置文本服务器端并使用图像中的文本重新生成图像，就像 icanhascheezburger 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:24:17.633

将图像作为背景图像添加到单个单元格表格中，然后在 td 标记中插入另一个表格，您的文本可以在其中放置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:27:18.880

如果不使用 CSS 或 JS，这是不可能的。HTML 元素的位置或显示不能仅受 HTML 影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:27:47.733

不 - 做服务器端或不用担心 - 并非所有浏览器都需要看起来相同。你需要做一个计算——这是否会从这些设备获得足够的流量，以证明花时间解决这个“问题”是合理的。只要它在设备中可用，就应该没问题。

# c# - Linux 无法读取由 BitConverter.GetBytes() 编码的整数

> ID：10124355
> 
> 赞同：0
> 
> 时间：2012-04-12T13:15:30.577
> 
> 标签：c#, c, sockets

我用 C# 制作了一个客户端，我想在 Linux 下用 C 语言构建一个服务器。

我为每个“消息”使用带有“消息”长度的前缀。`byte[]`我使用`BitConverter.GetBytes()`（4字节数组）将其编码为数组。之后我发送它

```
socket.Send(prefix, prefix.Length, 0); 
```

Linux 上的 C 服务器无法读取数字。它显示了一个奇怪的字符，尽管它读取了 4 个字节。

Linux端看起来像

```
char prefix[4];
int bytes = 0;
bytes = recv(s, prefix, 4, 0);
printf("%s", prefix); 
```

如果我使用 对数字进行编码`Encoding.UTF8.GetBytes()`，Linux 可以正确理解它。

我对其进行了测试，看来问题仅在于程序以这两种不同的语言编码时。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:20:23.653

*   `BitConverter.GetBytes()`会给你一个**二进制**表示 - 在大多数情况下不是可打印的字符（尝试 int 0x20202020，这应该给你一个或多个空格），但非常适合处理目的。你可以用类似的东西打印它`printf("%d",the_int_variable)`

*   `Encoding.UTF8.GetBytes()`将为您提供**字符串**表示形式 - 这对于将其打印到控制台很不错，但对于处理来说不是最佳的。

**编辑**

更新问题后，更改`printf("%s", prefix);`为`printf("%d", prefix);`after 更改前缀以键入 int 并重试。

# c# - 需要将键绑定到列表 C# 中的值

> ID：10124360
> 
> 赞同：0
> 
> 时间：2012-04-12T13:15:43.073
> 
> 标签：c#, wcf

更新：只需要从字典中返回一个键，字典是由 Web 服务创建的，然后传递回我的 WPF 程序，然后将字典填充到包含以下值的下拉列表中

```
IT_ED
IT_FS
IT_BUS 
```

* * *

按键分配如下

```
Key Value
[1] IT_ED
[2] IT_FS
[3] IT_BUS 
```

我需要值中的键，基于在下拉菜单中选择的项目

我用来存放钥匙的字典

```
private Dictionary<int, string> _DivisionDict = new Dictionary<int, string>();

private Dictionary<int, string> DivisionDict
{
    get { return _DivisionDict; }
    set { _DivisionDict = value; }
} 
```

下面是我如何使用键填充下拉菜单和字典

```
foreach (var D in Divisions)
{
   txtY.Items.Add(D.Value);
   DivisionDict.Add(D.Key, D.Value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:57:40.867

好的，现在好多了（问题），
所以，如果我做对了，你想从 WPF 下拉列表中的选定项目（即 ComboBox）中取回一个“索引”。

首先，最简单的方法是通过您的视图模型进行适当的数据“绑定”，

```
ItemsSource="{Binding YourDictionaryProperty}" 
SelectedItem="{Binding Path=YourDictionarySelectedItem, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"  
DisplayMemberPath="Value" 
```

*   通过 View Model 类公开您的字典。就像您创建的财产一样，
*   将视图模型作为组合框（或父级等）的数据上下文，
*   用于绑定 (`YourDictionarySelectedItem`和`YourDictionaryProperty`) 的两个属性都是视图模型中的属性。一个是“按原样”公开字典，另一个是 KeyValuePair ...SelectedItem。仅供参考，
*   做类似上面的事情......

...然后在您`YourDicitonarySelecteItem`的视图模型中-您将拥有字典中的 KeyValuePair 。从那里你知道索引和价值。

或者是`brute force`通过例如像这样的LINQ在字典中找到所选值（如果您根据当前设置的方式将其作为“输出”）...

```
Divisions.Where(d=>d.Value == "selected value").FirstOrDefault(); 
```

...这会给你“对”，然后从那里得到`Key`.

希望这次我们成功了：），干杯

编辑：正确的字典绑定不在原始范围内，因此它是一个快速修复解决方案。如果您需要“从后面”更新字典，则需要使用一些可观察的集合 - 或在其项目更改时强制 OnPropertyChanged 在整个字典上。有关更多具体信息，请参见此链接，
[WPF 中使用字典的双向数据绑定](https://stackoverflow.com/questions/800130/two-way-data-binding-with-a-dictionary-in-wpf)

# url - 如果查询参数如“？key=value”部分属于url长度计数？

> ID：10124363
> 
> 赞同：0
> 
> 时间：2012-04-12T13:15:47.307
> 
> 标签：url, limit

众所周知，url有长度限制。我的问题是“？key = value”部分等查询参数是否属于url长度计数？www.google.com? 查询=abcd。提前致谢。

# sql - Oracle 更快的重叠检查

> ID：10124365
> 
> 赞同：4
> 
> 时间：2012-04-12T13:15:56.777
> 
> 标签：sql, database, oracle

我有一个包含两列 beginrange 和 endrange 的表。不应允许重叠范围。这些列上有索引，我们尝试了许多 sql 条件，例如

```
inputBegin between beginRange and endRange or
inputEnd between beginRange and endRange 
```

`not ( inputEnd < beginRange or inputStart > endRange )`

等工作正常，除了它们非常慢，因为表包含超过 500 万条记录。

反正有没有写一个非常有效的重叠检查？

**编辑**：我想到了另一种解决方案，只有当 count() 在具有索引的 NOT NULL 列上完成时，oracle 才会计算索引。如果 beginRange 和 endRange 不是 NULL 并且都有一个索引，我们可以得到三个和：

```
count(endRange) where inputBegin > endRange
+
count(beginRange) where inputEnd < beginRange
=
count(beginRange/endRange) 
```

所以使用 UNION ALL 我会得到三行，在代码中我需要检查前两个的总和是否等于第三个。当然，我假设只计算索引并且不会访问任何行。还有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:34:00.630

我不确定您是否要：

1.  检查您要插入的行是否与某些现有行重叠，或者
2.  搜索所有现有行并识别那些重叠的行？

* * *

如果（1），那么你本质上已经在做什么......

```
SELECT *
FROM YOUR_TABLE
WHERE :inputEnd > beginRange AND :inputStart < endRange; 
```

...会给你重叠并且应该非常高效，前提是你有一个复合索引，它的组件方向**相反**：`{beginRange ASC, endRange DESC}`.

* * *

如果 (2)，那么您可以像这样使用窗口：

```
SELECT *
FROM (
    SELECT
        YOUR_TABLE.*,
        LEAD(beginRange) OVER (ORDER BY beginRange) nextBeginRange
    FROM YOUR_TABLE
)
WHERE endRange > nextBeginRange; 
```

这将为您提供与其下一个范围重叠的每个范围（其中“下一个”的含义在`beginRange`排序的上下文中定义）。

严格来说，这甚至不需要复合索引（除非你想要[覆盖](http://use-the-index-luke.com/sql/clustering/index-only-scan-covering-index)）——只需一个简单的索引就`{beginRange}`可以确保良好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:34:03.980

这是一个答案 - 如果可以做出某些断言：

您有一个带有`beginRange`和`endRange`列的表，其中没有两个现有的重叠行`(beginRange, endRange)`。

您想插入一个新行，`(inputStart, inputEnd)`但检查它是否与表上的任何现有行重叠。

然后你可以使用这个应该很快的条件 - 使用简单的索引`startRange`：

```
WHERE input_Start <
      ( SELECT endRange
        FROM
          ( SELECT endRange
                 , ROW_NUMBER() OVER(ORDER BY startRange DESC) AS rn 
            FROM tableX
            WHERE startRange < input_End
          ) tmp
        WHERE rn = 1
      )

  --- TRUE  --> Overlaps
  --- FALSE --> No overlap 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T05:58:28.243

假设**现有范围不重叠**，则`{beginRange}`应该是（主或备用）键，并检测新范围是否与某些现有范围重叠，可以这样完成：

```
SELECT *
FROM YOUR_TABLE
WHERE beginRange = (
    SELECT MAX(beginRange)
    FROM YOUR_TABLE
    WHERE beginRange < :inputEnd
)
AND :inputStart < endRange 
```

*   如果新范围与某些现有范围重叠，则此查询返回“最高”范围。
*   如果没有重叠，则返回一个空结果集。

键“下”的索引`{beginRange}`足以提高效率（我们只需要支持“MAX扫描”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:00:22.597

没有一个索引可以满足这个查询。这实际上意味着您最好创建两个索引并运行两个查询，然后合并结果......

1）在 InputBegin 上创建一个索引
2）在 InputEnd 上创建一个*单独*的索引
3）运行以下查询

```
SELECT * FROM yourTable WHERE InputEnd   < ExclusionPeriodStart 
UNION ALL
SELECT * FROM yourTable WHERE InputBegin > ExclusionPeriodEnd 
```

然后，第一个查询可以在 InputEnd 索引上使用范围查找。然后，第二个查询也可以使用范围搜索，但在不同的索引上。

通过保持查询分开，两种不同的需求不会相互干扰，并且可以使用最优化的索引。

您还已经知道（通过了解您的数据）结果中没有重叠（在完成之前没有记录可以开始，因此两个查询中都不会出现记录）。这意味着`UNION ALL`可以使用速度较慢的`UNION`.

据我所知，没有办法比这更快地执行此查询。（在 500 万条记录上，仅在小型数据集上扫描整个表可能会更快。）

**编辑**：*该答案假定您正在尝试查找未出现在固定范围内的所有记录。如果您想检查每条记录与其他记录，那么您需要一种不同的方法......*

检查每个重叠是昂贵的。此外，如果您有这四个范围，则无法确定要删除的范围...

```
1 -->--> 4
      3 -->--> 6
            5 -->--> 8
                  7 -->--> 9 
```

您应该删除范围 1 和 3，还是 2 和 4？

您可以做的是找到与另一个范围重叠的所有范围。

而你不想要的是发现A与B重叠，B与A重叠。

```
SELECT
  *
FROM
  yourTable   AS first_range
INNER JOIN
  yourTable   AS second_range
    ON  second_range.start_date >= first_range.start_date
    AND second_range.start_date <= first_range.end_date 
```

这将需要扫描整个表的 first_range。但是因为您只检查第二个范围的 start_date，它将能够在 start_date 索引上使用范围搜索来查找任何冲突。

**EDIT2**：或者您可能需要与第一个答案相反的答案？

如果您希望所有范围与设定范围发生冲突，*则*可以修改相同方法。

```
SELECT * FROM yourTable WHERE InputEnd   >= ExclusionPeriodStart 
INTERSECT
SELECT * FROM yourTable WHERE InputBegin <= ExclusionPeriodEnd 
```

然而，这可能不是很好。您将在 query1 中获取表的一部分，并将其与表的几乎所有其余部分相交。相反，您可以使用简单的方法，然后添加优化...

```
SELECT
  *
FROM
  yourTable
WHERE
    InputStart <= ExclusionPeriodEnd
AND InputEnd   >= ExclusionPeriodStart 
```

WHERE 子句中的第一个条件可以通过范围查找来解决，然后扫描所有结果记录以测试第二个条件。那么，我们是否可以缩小需要扫描的范围`(currently (start of table) -> (ExclusionPeriodEnd))`。

***如果***我们知道一条额外的信息，我们*可以：任何一个范围的最大长度......*

 *```
SELECT
  *
FROM
  yourTable
WHERE
    InputStart <= ExclusionPeriodEnd
AND InputStart >= ExclusionPeriodStart - (maximumLength)
AND InputEnd   >= ExclusionPeriodStart 
```

现在前两个条件形成了范围搜索，并提供了一组更小的数据来扫描最后一个条件。

你怎么知道最大长度？您可以扫描整个表，但这是一种自我挫败的优化尝试。

相反，您可以索引一个计算字段；给出范围最大长度的计算。 `SELECT MAX(calculatedField) FROM yourTable`然后避免扫描整个表。或者您可以使用触发器跟踪。这对 INSERTS 来说很好，但是当你有一个 DELETE 时有点混乱（如果你删除最长的范围，你是否再次扫描整个表以找到新的最长范围？可能不是，你可能会想保留旧的最大长度反而）。*

# process - 杀死远程机器上的 com 进程，确定进程启动参数

> ID：10124369
> 
> 赞同：1
> 
> 时间：2012-04-12T13:16:08.510
> 
> 标签：process, command-line-arguments, kill

我想杀死远程计算机上的 com 进程。

我尝试了 taskkill，但我找不到如何从 com guid 或启动参数中获取 pid。

然后我尝试了以下操作：

```
ConnectionOptions connectoptions = new ConnectionOptions();
connectoptions.Username = @"YourDomainName\UserName";
connectoptions.Password = "Password";

ManagementScope scope = new ManagementScope(@"\\" + remoteComp + @"\root\cimv2", connectoptions);

//Define the WMI query to be executed on the remote machine
SelectQuery query = new SelectQuery("select * from Win32_process where name = 'dllhost.exe' and CommandLine LIKE '%COMGUID%'");

using (ManagementObjectSearcher searcher = new
                   ManagementObjectSearcher(scope, query))
{
    foreach (ManagementObject process in searcher.Get())
    {

        process.InvokeMethod("Terminate", null);

    }
} 
```

出于某种原因，由于 RPC 错误（防火墙已关闭），我无法执行它

我把它放在自己的 Web 服务中，但我得到“用户凭据不能用于本地连接”

我删除了 ConnectionOptions 但我仍然无法执行它，因为我得到 CommandLine 始终为空并且我无法确定正确的 dllhost.exe 实例。

我在 web 服务中使用了 Process 类，但 sturtupinfo 参数始终为空。

如何获取不同进程的 stutup 参数，或者是否有任何方法来终止进程。

# algorithm - 给出数字排列以使相邻差值之和小于 2 的算法

> ID：10124380
> 
> 赞同：1
> 
> 时间：2012-04-12T13:16:38.100
> 
> 标签：algorithm

这是一个家庭作业问题，但我错过了讲师解释解决方案的讲座，我仍然无法弄清楚......

如果给定区间 [0,1] 中的 n 个实数（即 x1，x2，x3，...，xn），则表明存在一种算法，该算法在最坏情况下运行的线性时间给出了这些 n 个数的排列这样相邻数字的差之和小于 2。给出的提示是“桶”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:27:08.857

好吧，你可以走这条路。分割`[0, 1]`成`k`段：`[0, 1/k)`, `[1/k, 2/k)`, ..., `[(k-1)/k, 1]`.

您现在浏览您的列表并首先将所有适合第一段的数字放入一个新列表，然后放入第二段等。这可以一次性完成，所以`O(n)`.

考虑一下现在需要的金额是多少。同一段内`1/k`数字的差异最多是这种差异的数量`n-(k-1)`。其余的`(n-1)`差异在来自相邻存储桶的数字之间，总共（很清楚，为什么？）不超过`1`. 总和受 约束`(n-k+1)/k + (k-1)/k`。如果足够小，您可以制作足够`k`大。

* * *

更多细节：

让我们将我们的差异绘制成 2 种颜色：来自同一段的数字之间的差异被绘制为蓝色，而来自不同段的数字之间的差异被绘制为红色。由于排序，我们首先只有第 1 段中的数字（可能为 0），然后是第 2 段中的数字，依此类推。因此，我们首先有一些蓝色差异，然后是红色差异，然后是几个蓝色差异，然后是红色差异等。

让我们看看红色差异的数量是多少。显然不只是`k-1`红色的差异，对吧？因为每个红色差异都会从一个段跳到更高的段。其余的差异是蓝色的。

现在，每个蓝色差异不超过`1/k`，因为被减数和减数来自同一段。并且所有红色差值（即它们的总和！）总共不超过 1。（暂时跳过其余部分，因为这是一道作业题。）

* * *

更正：
所有红色差异的总和不超过 2-2/k。这是为什么？走着瞧。在最坏的情况下，第一个红色差异可能是从某个段的开头`A`到某个其他段的结尾`B`。第二个是在最坏的情况下从某个其他段的*开始*到结束。因此，在差异总和中，除了第一个和最后一个段之外，每个段最多计算两次。`B``C`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:23:46.010

尝试将区间拆分为 n 个等长区间。现在将数字按任意顺序放入它们所属的区间中，并证明这可以解决您的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T13:24:03.573

你学过桶排序吗？[http://en.wikipedia.org/wiki/Bucket_sort](http://en.wikipedia.org/wiki/Bucket_sort)

还要看看排序数组的行为：{ 0, .5, .75, 1 } ：差异之和为 1。

将其与未排序数组的行为进行比较： { .75, .5, 0, 1 } ：差值之和为 1.75

# c# - 从 wcf 客户端更改服务器 app.config 绑定配置

> ID：10124383
> 
> 赞同：1
> 
> 时间：2012-04-12T13:16:45.123
> 
> 标签：c#, wcf, wcf-client

当我的 nettcpbinding 在客户端的 c# 代码中设置并且在服务器上我的绑定在 app.config 中定义时，如何*动态设置像 NONE 这样的安全模式？*如何从客户端更改服务器的 app.config？

WCF 服务器端点：

```
 <service name="Test.ServiceProvider.MyService">
            <endpoint address="" binding="netTcpBinding" contract="Test.Contracts.IMyService">
              <identity>
                  <dns value="localhost" />
              </identity>
            </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" name="NetTcpMetadataPoint" 
         contract="IMetadataExchange">
        </endpoint>
        </service> 
```

WCF 客户端端点：Uri 是：

```
net.tcp//localhost:12345/MyService

    1.) What else should my 2nd address be for the 2nd NetTcpBinding?
I guess I just change the MyService to MyEncryptedService and use the same interface? But then I have 2 equal classes/implementations of one interface. Thats stupid actually.
    2.) How does the client binding find its server binding? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:20:48.417

简而言之，你不能。服务器公开服务并且服务器指示其安全设置。它要么需要安全性，要么不需要安全性，但此配置是在服务器开始托管服务时完成的，并且在不“停止”服务的情况下无法更改。从客户端更改它的唯一方法是通过一些“管理”，这将更改服务的配置并重新启动它，但这将具有全局范围。

如果您需要安全和不安全的通信，则需要公开两个不同的端点。一种用于安全操作，一种用于不安全操作（如果两个端点上的操作不同，您还应该使用不同的服务合同）。

# macos - Mac - 列出终端中打开的窗口

> ID：10124386
> 
> 赞同：6
> 
> 时间：2012-04-12T13:16:55.103
> 
> 标签：macos, applescript, osascript

我想在终端中列出打开的窗口以获取 x、y、宽度和高度，就像`xwininfo -root -tree`X11 一样。

我试过：

```
osacript -e tell application "Microsoft Word" to get the bounds of the front window 
```

但它不适用于所有应用程序，并且您不能指定一个孩子（如果您有两个 Word 文档，它会返回第一个打开的文档）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:54:04.537

获取所有窗口的位置：

```
osascript -e 'tell application "System Events" to get the position of every window of every process' 
```

尺寸：

```
osascript -e 'tell application "System Events" to get the size of every window of every process' 
```

标题：

```
osascript -e 'tell application "System Events" to get the title of every window of every process' 
```

检查 AppleScript 编辑器中的参考以获取更多属性。

# core-plot - 我正在使用核心图绘制条形图，我想在一个条形图中显示两种颜色，该怎么做？

> ID：10124393
> 
> 赞同：1
> 
> 时间：2012-04-12T13:17:02.383
> 
> 标签：core-plot

我正在使用核心图绘制条形图，我想在一个条形图中显示两种颜色，该怎么做？比如 Y 值是从 0 到 15 的绿色，从 15 到 25 是红色，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T00:44:24.923

使用两个条形图制作堆积条形图。让第一个显示栏的下部（0 到 15）。在第二个图上设置`barBasesVary`为 YES 并使用它来显示其余部分。

有关示例代码，请参阅 Plot Gallery 应用程序中的垂直条形图示例。

# iphone - 将 NSMutable 字典数据保存在 plist 文件中_整数作为键

> ID：10124397
> 
> 赞同：0
> 
> 时间：2012-04-12T13:17:20.787
> 
> 标签：iphone, objective-c, plist, nsmutabledictionary

我目前正在尝试将 NSMutabledictionary 键和对象保存在 plist 文件中。我的键是整数，所以我使用 NSNumber 将它们放入 writeToFile 函数。

即使进行了更改，我也无法在 plist 查找中找到任何已保存的数据。我想 NSNumber 指针有问题，因为当我使用字符串时它可以工作。

您知道我的代码中缺少什么吗？

```
 NSMutableDictionary *dictionnaireNoms = [[NSMutableDictionary alloc] initWithCapacity:40];
    NSNumber *nombre = [[NSNumber alloc] initWithInteger:dictionnaireNoms.count];        
    NSString *nomCommerce = text.text;
    [dictionnaireNoms setObject:nomCommerce forKey:nombre];

    //2\. Sauvegarde du nom dans un fichier
    [saveDicoCommerce enregisterNom:dictionnaireNoms];

- (void)enregisterNom:(NSMutableDictionary*)nom
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSLog(@"%@", documentsDirectory);
    NSString *pathNom = [documentsDirectory stringByAppendingPathComponent:@"NomsDeCommerces.plist"];
    if (!documentsDirectory) {
        NSLog(@"Documents directory not found!");
        return;
    }
    [nom writeToFile:pathNom atomically:YES];
    if(![[NSFileManager defaultManager] fileExistsAtPath:pathNom])
    {
        NSLog(@"file not found");
        return;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:42:37.137

`NSDictionary`如果它只包含字符串键，则只能直接写自己。它证实了您尝试使用

```
[[NSPropertyListSerialization dataWithPropertyList:nom format:NSPropertyListBinaryFormat_v1_0 options:0 error:nil] writeToFile:pathNom atomically:NO];` 
```

输出是：

> 属性列表对格式无效：200（属性列表字典可能只有 CFStrings 键，而不是 'CFNumber'）

但是，如果您使用 序列化它，您可以存储`NSDictionary`包含`NSNumber`键的对象`NSCoding`。替换这个：

```
[nom writeToFile:pathNom atomically:YES]; 
```

和：

```
[NSKeyedArchiver archiveRootObject:nom toFile:pathNom]; 
```

要读取创建的文件，请使用：

```
NSDictionary *nom2 = [NSKeyedUnarchiver unarchiveObjectWithFile:pathNom]; 
```

有关档案的更多信息，请参阅[档案和序列化编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:30:45.897

为什么要分配 NSNumber？试试这个 [your_dictionary setValue:[NSNumber numberWithInt:your_int]];

# iphone - 通过使用数组收集地图坐标，然后使用 MKPolyLine 绘图

> ID：10124400
> 
> 赞同：0
> 
> 时间：2012-04-12T13:17:32.407
> 
> 标签：iphone, ios, ipad

在编写 IOS 设备方面，我是一个新手，我需要一点帮助。我正在尝试创建一个数组，将 GPS 坐标存储为从 a 点到 b 点的驱动器，然后我想使用 MKPolyLine 将它们绘制在地图上。如果有人能给我一些指示，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:19:14.183

是的，制作一个位置坐标（纬度，经度）的 NSMutableArray，如下所示：

```
[arrayOfDesc addObject:[
                        [CLLocation alloc] initWithLatitude:location.coordinate.latitude longitude:location.coordinate.longitude]]; 
```

然后使用此[源代码](http://navarra.ca/?p=786)中的类。使用“NVPolylineAnnotation”和“NVPolylineAnnotationView”类。并通过一个方法传递你的数组：

```
NVPolylineAnnotation *annotations = [[NVPolylineAnnotation alloc] initWithPoints:arrayOfDesc mapView:_mapView];
[_mapView addAnnotation:annotations]; 
```

它真的很简单，你只需要将坐标传递给类，剩下的就是提到的类了 :)

# iphone - 如何在 iphone sdk 中使用 audiounit 和 augraph 播放音乐

> ID：10124402
> 
> 赞同：2
> 
> 时间：2012-04-12T13:17:40.007
> 
> 标签：iphone, core-audio

我是 AudioUnit 和 AUGraph 服务的新手。我需要使用这些服务播放单个声音文件。我已经从苹果的开发者网站下载了 MixerHost 项目并更改了一些代码。但是代码现在崩溃了

我新更改的代码是：

```
#import "JKAudioPlayer.h"
#pragma mark Mixer input bus render callback

//
//    Declared as AURenderCallback in AudioUnit/AUComponent.h. See Audio Unit Component Services Reference.
static OSStatus inputRenderCallback (

                                     void                        *inRefCon,  
                                     AudioUnitRenderActionFlags  *ioActionFlags, 
                                     const AudioTimeStamp        *inTimeStamp,  
                                     UInt32                      inBusNumber,  
                                     UInt32                      inNumberFrames,
                                     AudioBufferList             *ioData   
                                     ) {

    soundStructPtr    soundStructPointerArray   = (soundStructPtr) inRefCon;
    UInt32            frameTotalForSound        = soundStructPointerArray[inBusNumber].frameCount;
    BOOL              isStereo                  = soundStructPointerArray[inBusNumber].isStereo;

    AudioUnitSampleType *dataInLeft;
    AudioUnitSampleType *dataInRight;

    dataInLeft                 = soundStructPointerArray[inBusNumber].audioDataLeft;
    if (isStereo) dataInRight  = soundStructPointerArray[inBusNumber].audioDataRight;

    AudioUnitSampleType *outSamplesChannelLeft;
    AudioUnitSampleType *outSamplesChannelRight;

    outSamplesChannelLeft                 = (AudioUnitSampleType *) ioData->mBuffers[0].mData;
    if (isStereo) outSamplesChannelRight  = (AudioUnitSampleType *) ioData->mBuffers[1].mData;

    UInt32 sampleNumber = soundStructPointerArray[0].sampleNumber;

    for (UInt32 frameNumber = 0; frameNumber < inNumberFrames; ++frameNumber) {
        outSamplesChannelLeft[frameNumber]                 = dataInLeft[sampleNumber];
        if (isStereo) outSamplesChannelRight[frameNumber]  = dataInRight[sampleNumber];
        sampleNumber++;
        if (sampleNumber >= frameTotalForSound) sampleNumber = 0;
    }
    soundStructPointerArray[inBusNumber].sampleNumber = sampleNumber;
    return noErr;
}

#pragma mark -
#pragma mark Audio route change listener callback
static void audioRouteChangeListenerCallback (
                                              void                      *inUserData,
                                              AudioSessionPropertyID    inPropertyID,
                                              UInt32                    inPropertyValueSize,
                                              const void                *inPropertyValue
                                              ) {
    if (inPropertyID != kAudioSessionProperty_AudioRouteChange) return;
    JKAudioPlayer *audioObject = (__bridge_transfer JKAudioPlayer *) inUserData;  
    if (NO == audioObject.isPlaying) {
        NSLog (@"Audio route change while application audio is stopped.");
        return;
    } else {
        CFDictionaryRef routeChangeDictionary = inPropertyValue;
        CFNumberRef routeChangeReasonRef =
        CFDictionaryGetValue (
                              routeChangeDictionary,
                              CFSTR (kAudioSession_AudioRouteChangeKey_Reason)
                              );

        SInt32 routeChangeReason;

        CFNumberGetValue (
                          routeChangeReasonRef,
                          kCFNumberSInt32Type,
                          &routeChangeReason
                          );        
        if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {

            NSLog (@"Audio output device was removed; stopping audio playback.");
            NSString *MixerHostAudioObjectPlaybackStateDidChangeNotification = @"MixerHostAudioObjectPlaybackStateDidChangeNotification";
            [[NSNotificationCenter defaultCenter] postNotificationName: MixerHostAudioObjectPlaybackStateDidChangeNotification object: audioObject]; 

        } else {

            NSLog (@"A route change occurred that does not require stopping application audio.");
        }
    }
}

@implementation JKAudioPlayer
@synthesize monoStreamFormat;           // mono format for use in buffer and mixer input for "beats" sound
@synthesize graphSampleRate;            // sample rate to use throughout audio processing chain
@synthesize mixerUnit;                  // the Multichannel Mixer unit
@synthesize playing;                    // Boolean flag to indicate whether audio is playing or not
@synthesize interruptedDuringPlayback;  // Boolean flag to indicate whether audio was playing when an interruption arrived
- (id) init {

    self = [super init];

    if (!self) return nil;
    NSURL *beatsLoop   = [[NSBundle mainBundle] URLForResource: @"beatsMono"
                                                 withExtension: @"caf"];
    sourceURL   = (__bridge_retained  CFURLRef) beatsLoop;
    self.interruptedDuringPlayback = NO;
    [self setupAudioSession];    
    [self setupMonoStreamFormat];
    [self readAudioFilesIntoMemory];
    [self configureAndInitializeAudioProcessingGraph];
    [self enableMixerInput: 0 isOn: YES];
    [self setMixerOutputGain:1];
    [self setMixerInput: 0 gain:YES];
    return self;
}
- (void) setupAudioSession {
    AVAudioSession *mySession = [AVAudioSession sharedInstance];
    [mySession setDelegate: self];
    NSError *audioSessionError = nil;
    [mySession setCategory: AVAudioSessionCategoryPlayback
                     error: &audioSessionError];

    if (audioSessionError != nil) {

        NSLog (@"Error setting audio session category.");
        return;
    }
    self.graphSampleRate = 44100.0;    // Hertz
    [mySession setPreferredHardwareSampleRate: graphSampleRate
                                        error: &audioSessionError];
    if (audioSessionError != nil) {

        NSLog (@"Error setting preferred hardware sample rate.");
        return;
    }
    [mySession setActive: YES
                   error: &audioSessionError];

    if (audioSessionError != nil) {

        NSLog (@"Error activating audio session during initial setup.");
        return;
    }    
    self.graphSampleRate = [mySession currentHardwareSampleRate];
    AudioSessionAddPropertyListener (
                                     kAudioSessionProperty_AudioRouteChange,
                                     audioRouteChangeListenerCallback,
                                     (__bridge void*)self
                                     );
}
- (void) setupMonoStreamFormat {
    size_t bytesPerSample = sizeof (AudioUnitSampleType);
    monoStreamFormat.mFormatID          = kAudioFormatLinearPCM;
    monoStreamFormat.mFormatFlags       = kAudioFormatFlagsAudioUnitCanonical;
    monoStreamFormat.mBytesPerPacket    = bytesPerSample;
    monoStreamFormat.mFramesPerPacket   = 1;
    monoStreamFormat.mBytesPerFrame     = bytesPerSample;
    monoStreamFormat.mChannelsPerFrame  = 1;                  // 1 indicates mono
    monoStreamFormat.mBitsPerChannel    = 8 * bytesPerSample;
    monoStreamFormat.mSampleRate        = graphSampleRate;
}

- (void) readAudioFilesIntoMemory {
    ExtAudioFileRef audioFileObject = 0;
    OSStatus result = ExtAudioFileOpenURL (sourceURL, &audioFileObject);
    if (noErr != result || NULL == audioFileObject) {NSLog(@"error ext audiofile open url %ld",result); return;}
    UInt64 totalFramesInFile = 0;
    UInt32 frameLengthPropertySize = sizeof (totalFramesInFile);
    result =    ExtAudioFileGetProperty (
                                         audioFileObject,
                                         kExtAudioFileProperty_FileLengthFrames,
                                         &frameLengthPropertySize,
                                         &totalFramesInFile
                                         );

    if (noErr != result) {NSLog(@"ExtAudioFileGetProperty (audio file length in frames %ld",result); return;}
    soundStruct.frameCount = totalFramesInFile;
    AudioStreamBasicDescription fileAudioFormat = {0};
    UInt32 formatPropertySize = sizeof (fileAudioFormat);
    result =    ExtAudioFileGetProperty (
                                         audioFileObject,
                                         kExtAudioFileProperty_FileDataFormat,
                                         &formatPropertySize,
                                         &fileAudioFormat
                                         );

    if (noErr != result) {NSLog( @"ExtAudioFileGetProperty (file audio format)%ld",result); return;}

    UInt32 channelCount = fileAudioFormat.mChannelsPerFrame;
    soundStruct.audioDataLeft =
    (AudioUnitSampleType *) calloc (totalFramesInFile, sizeof (AudioUnitSampleType));

    AudioStreamBasicDescription importFormat = {0};
    if (1 == channelCount) {

        soundStruct.isStereo = NO;
        importFormat = monoStreamFormat;

    } else {

        NSLog (@"*** WARNING: File format not supported - wrong number of channels");
        ExtAudioFileDispose (audioFileObject);
        return;
    }
    result =    ExtAudioFileSetProperty (
                                         audioFileObject,
                                         kExtAudioFileProperty_ClientDataFormat,
                                         sizeof (importFormat),
                                         &importFormat
                                         );

    if (noErr != result) {NSLog( @"ExtAudioFileSetProperty (client data format %ld", result); return;}
    AudioBufferList *bufferList;
    bufferList = (AudioBufferList *) malloc (
                                             sizeof (AudioBufferList) + sizeof (AudioBuffer) * (channelCount - 1)
                                             );

    if (NULL == bufferList) {NSLog (@"*** malloc failure for allocating bufferList memory"); return;}

    bufferList->mNumberBuffers = channelCount;
    AudioBuffer emptyBuffer = {0};
    size_t arrayIndex;
    for (arrayIndex = 0; arrayIndex < channelCount; arrayIndex++) {
        bufferList->mBuffers[arrayIndex] = emptyBuffer;
    }
    bufferList->mBuffers[0].mNumberChannels  = 1;
    bufferList->mBuffers[0].mDataByteSize    = totalFramesInFile * sizeof (AudioUnitSampleType);
    bufferList->mBuffers[0].mData            = soundStruct.audioDataLeft;

    if (2 == channelCount) {
        bufferList->mBuffers[1].mNumberChannels  = 1;
        bufferList->mBuffers[1].mDataByteSize    = totalFramesInFile * sizeof (AudioUnitSampleType);
        bufferList->mBuffers[1].mData            = soundStruct.audioDataRight;
    }

    UInt32 numberOfPacketsToRead = (UInt32) totalFramesInFile;

    result = ExtAudioFileRead (
                               audioFileObject,
                               &numberOfPacketsToRead,
                               bufferList
                               );

    free (bufferList);

    if (noErr != result) {

        NSLog( @"ExtAudioFileRead failure - %ld " , result);
        free (soundStruct.audioDataLeft);
        soundStruct.audioDataLeft = 0;

        if (2 == channelCount) {
            free (soundStruct.audioDataRight);
            soundStruct.audioDataRight = 0;
        }

        ExtAudioFileDispose (audioFileObject);            
        return;
    }

    NSLog (@"Finished reading file  into memory");
    soundStruct.sampleNumber = 0;
    ExtAudioFileDispose (audioFileObject);
}

- (void) configureAndInitializeAudioProcessingGraph {

    NSLog (@"Configuring and then initializing audio processing graph");
    OSStatus result = noErr;
    result = NewAUGraph (&processingGraph);

    if (noErr != result) {[self printErrorMessage: @"NewAUGraph" withStatus: result]; return;}

    // I/O unit
    AudioComponentDescription iOUnitDescription;
    iOUnitDescription.componentType          = kAudioUnitType_Output;
    iOUnitDescription.componentSubType       = kAudioUnitSubType_RemoteIO;
    iOUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
    iOUnitDescription.componentFlags         = 0;
    iOUnitDescription.componentFlagsMask     = 0;

    // Multichannel mixer unit
    AudioComponentDescription MixerUnitDescription;
    MixerUnitDescription.componentType          = kAudioUnitType_Mixer;
    MixerUnitDescription.componentSubType       = kAudioUnitSubType_MultiChannelMixer;
    MixerUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
    MixerUnitDescription.componentFlags         = 0;
    MixerUnitDescription.componentFlagsMask     = 0;

    //............................................................................
    // Add nodes to the audio processing graph.
    NSLog (@"Adding nodes to audio processing graph");

    AUNode   iONode;         // node for I/O unit
    AUNode   mixerNode;      // node for Multichannel Mixer unit

    // Add the nodes to the audio processing graph
    result =    AUGraphAddNode (
                                processingGraph,
                                &iOUnitDescription,
                                &iONode);

    if (noErr != result) {[self printErrorMessage: @"AUGraphNewNode failed for I/O unit" withStatus: result]; return;}

    result =    AUGraphAddNode (
                                processingGraph,
                                &MixerUnitDescription,
                                &mixerNode
                                );

    if (noErr != result) {[self printErrorMessage: @"AUGraphNewNode failed for Mixer unit" withStatus: result]; return;}
    result = AUGraphOpen (processingGraph);

    if (noErr != result) {[self printErrorMessage: @"AUGraphOpen" withStatus: result]; return;}
     result =    AUGraphNodeInfo (
                                 processingGraph,
                                 mixerNode,
                                 NULL,
                                 &mixerUnit
                                 );

    if (noErr != result) {[self printErrorMessage: @"AUGraphNodeInfo" withStatus: result]; return;}
    UInt32 busCount   = 2;    // bus count for mixer unit input

    UInt32 beatsBus   = 1;    // mixer unit bus 1 will be mono and will take the beats sound

    NSLog (@"Setting mixer unit input bus count to: %lu", busCount);
    result = AudioUnitSetProperty (
                                   mixerUnit,
                                   kAudioUnitProperty_ElementCount,
                                   kAudioUnitScope_Input,
                                   0,
                                   &busCount,
                                   sizeof (busCount)
                                   );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetProperty (set mixer unit bus count)" withStatus: result]; return;}
   UInt32 maximumFramesPerSlice = 4096;

    result = AudioUnitSetProperty (
                                   mixerUnit,
                                   kAudioUnitProperty_MaximumFramesPerSlice,
                                   kAudioUnitScope_Global,
                                   0,
                                   &maximumFramesPerSlice,
                                   sizeof (maximumFramesPerSlice)
                                   );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetProperty (set mixer unit input stream format)" withStatus: result]; return;}
    for (UInt16 busNumber = 0; busNumber < busCount; ++busNumber) {

        // Setup the struture that contains the input render callback 
        AURenderCallbackStruct inputCallbackStruct;
        inputCallbackStruct.inputProc        = &inputRenderCallback;
        inputCallbackStruct.inputProcRefCon  = &soundStruct;

        NSLog (@"Registering the render callback with mixer unit input bus %u", busNumber);
        // Set a callback for the specified node's specified input
        result = AUGraphSetNodeInputCallback (
                                              processingGraph,
                                              mixerNode,
                                              busNumber,
                                              &inputCallbackStruct
                                              );

        if (noErr != result) {[self printErrorMessage: @"AUGraphSetNodeInputCallback" withStatus: result]; return;}
    }

    NSLog (@"Setting mono stream format for mixer unit \"beats\" input bus");
    result = AudioUnitSetProperty (
                                   mixerUnit,
                                   kAudioUnitProperty_StreamFormat,
                                   kAudioUnitScope_Input,
                                   beatsBus,
                                   &monoStreamFormat,
                                   sizeof (monoStreamFormat)
                                   );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetProperty (set mixer unit beats input bus stream format)" withStatus: result];return;}

    NSLog (@"Setting sample rate for mixer unit output scope");
     result = AudioUnitSetProperty (
                                   mixerUnit,
                                   kAudioUnitProperty_SampleRate,
                                   kAudioUnitScope_Output,
                                   0,
                                   &graphSampleRate,
                                   sizeof (graphSampleRate)
                                   );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetProperty (set mixer unit output stream format)" withStatus: result]; return;}
     NSLog (@"Connecting the mixer output to the input of the I/O unit output element");

    result = AUGraphConnectNodeInput (
                                      processingGraph,
                                      mixerNode,         // source node
                                      0,                 // source node output bus number
                                      iONode,            // destination node
                                      0                  // desintation node input bus number
                                      );

    if (noErr != result) {[self printErrorMessage: @"AUGraphConnectNodeInput" withStatus: result]; return;}
    CAShow (processingGraph);
    result = AUGraphInitialize (processingGraph);

    if (noErr != result) {[self printErrorMessage: @"AUGraphInitialize" withStatus: result]; return;}
}

// Start playback
- (void) startAUGraph  {
     OSStatus result = AUGraphStart (processingGraph);
    if (noErr != result) {[self printErrorMessage: @"AUGraphStart" withStatus: result]; return;}

    self.playing = YES;
}

// Stop playback
- (void) stopAUGraph {
    Boolean isRunning = false;
    OSStatus result = AUGraphIsRunning (processingGraph, &isRunning);
    if (noErr != result) {[self printErrorMessage: @"AUGraphIsRunning" withStatus: result]; return;}

    if (isRunning) {

        result = AUGraphStop (processingGraph);
        if (noErr != result) {[self printErrorMessage: @"AUGraphStop" withStatus: result]; return;}
        self.playing = NO;
    }
}

- (void) enableMixerInput: (UInt32) inputBus isOn: (AudioUnitParameterValue) isOnValue {
   OSStatus result = AudioUnitSetParameter (
                                             mixerUnit,
                                             kMultiChannelMixerParam_Enable,
                                             kAudioUnitScope_Input,
                                             inputBus,
                                             isOnValue,
                                             0
                                             );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetParameter (enable the mixer unit)" withStatus: result]; return;}

}

- (void) setMixerInput: (UInt32) inputBus gain: (AudioUnitParameterValue) newGain {
    NSLog(@"mixer input %lu gain %f",inputBus,newGain);

    OSStatus result = AudioUnitSetParameter (
                                             mixerUnit,
                                             kMultiChannelMixerParam_Volume,
                                             kAudioUnitScope_Input,
                                             inputBus,
                                             newGain,
                                             0
                                             );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetParameter (set mixer unit input volume)" withStatus: result]; return;}

}
- (void) setMixerOutputGain: (AudioUnitParameterValue) newGain {
    NSLog(@"mixer output  gain %f",newGain);
    OSStatus result = AudioUnitSetParameter (
                                             mixerUnit,
                                             kMultiChannelMixerParam_Volume,
                                             kAudioUnitScope_Output,
                                             0,
                                             newGain,
                                             0
                                             );

    if (noErr != result) {[self printErrorMessage: @"AudioUnitSetParameter (set mixer unit output volume)" withStatus: result]; return;}

}
- (void) printErrorMessage: (NSString *) errorString withStatus: (OSStatus) result {

    char resultString[5];
    UInt32 swappedResult = CFSwapInt32HostToBig (result);
    bcopy (&swappedResult, resultString, 4);
    resultString[4] = '\0';

    NSLog (
           @"*** %@ error: %@ %@s",
           errorString,
           (char*) &resultString
           );
}

@end 
```

应用程序此时崩溃

outSamplesChannelLeft[frameNumber] = dataInLeft[sampleNumber]; if (isStereo) outSamplesChannelRight[frameNumber] = dataInRight[sampleNumber]; 我的代码有什么错误有人可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T13:10:38.577

以下[SO 问题](https://stackoverflow.com/questions/10300965/how-do-i-connect-an-audiofileplayer-audiounit-to-a-3dmixer)包含使用音频单元播放单个文件的工作代码（即使中间有混音器，您可能不需要它）。尽管问题表明它不起作用，但它对我来说是开箱即用的——只需`AUGraphStart(_graph)`在最后添加一个。它使用 AudioFilePlayer 单元，无需编写自己的渲染回调。

# javascript - grails 指定 javascript 库

> ID：10124405
> 
> 赞同：1
> 
> 时间：2012-04-12T13:17:44.010
> 
> 标签：javascript, grails, configuration

在我的 grails 应用程序中，我们使用 jquery。我在必要的页面上包含 jquery

```
<g:javascript library="jquery"/> 
```

如果我们决定更改 javascript 库，我需要更新每个页面。我知道我可以将它包含在布局中，但并不是每个页面都需要该库，所以这似乎很浪费。

grails 中是否有一种典型的方法可以在一个地方指定默认的 javascript 库应该是什么，然后只包含该默认库而不在每个页面上指定它是 jquery（或其他任何内容）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:27:27.833

由于大多数浏览器会大量缓存 JavaScript 库之类的内容，因此将库包含在布局中可能比将其放在每个单独的页面中*更好。*浏览器执行的大量缓存意味着用户只会为整个站点（或至少是他们的浏览会话）从服务器加载一次库，并且通过在布局中处理它，您将大大减少维护负载（您提到）

一般来说，你的 JavaScript 库应该是高度缓存的，并且在许多情况下，最好从使用率很高的 CDN 中提取它们，例如[Google 的](https://developers.google.com/speed/libraries/devguide). 仅当 CDN 提供商出现故障且浏览器无法访问其库时，才应请求您的“本地”（即来自您的服务器）库。（看看[HTML5Boilerplate 项目](http://html5boilerplate.com/html5boilerplate-site/built/en_US/docs/html/#google-cdn-for-jquery)是如何做到的）

正因为如此，我不会担心将库放入布局页面会产生*非常小的性能损失。*即使你没有为你的库使用一个使用良好的 CDN，人们今天实际使用的任何浏览器也只会加载你的 JavaScript 库一次（它获得的第一个包含它的页面），其余的只会使用它的缓存副本您网站上的页面。

所以，简而言之，**把它放在布局页面中，不用担心。它只会在第一个页面加载时被请求，并且将来自所有后续加载的缓存，并且您的代码库将是 DRYer。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:31:52.853

您还可以创建一个外部 JS 文件来选择性地加载您指定的文件。像这样的东西：

```
//FILENAME: jselector.js
if ( [conditions] ) {
  var fileref=document.createElement('script');
  fileref.setAttribute("type","text/javascript");
  fileref.setAttribute("src", filename); //reference your Jquery file here
  document.getElementsByTagName("head")[0].appendChild(fileref);
} 
```

`jselector.js`然后在需要它的每个页面中添加对该文件的引用 ( )。

```
<script type="text/javascript" src="jselector.js"></script> 
```

如果你的 jQuery 文件发生变化，你更新这个单一的外部 JS ( `jselector.js`)，所有的页面都会自动指向新的 jQuery。

# c++ - 寻找一个好的跨平台 C++ 框架

> ID：10124407
> 
> 赞同：-1
> 
> 时间：2012-04-12T13:17:56.230
> 
> 标签：c++, frameworks

我正在寻找一个好的 C++ 框架（不仅适用于 UI）。

其实我在这些之间犹豫不决：

*   POCO 库（http://pocoproject.org/）；
*   JUCE (http://www.rawmaterialsoftware.com/juce.php)；
*   开放框架（http://www.openframeworks.cc/）；

当然，还有 wxWidget。

有人对他们有经验吗？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:23:00.693

我会考虑[Qt toolkit](http://qt.nokia.com/)。它是一个完整的应用程序框架——网络、数据库、并发抽象都是内置的，此外还有一个*非常*强大的 UI 框架。所有这些组件都很好地集成在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:23:06.007

框架通常允许您做一些普通语言无法掌握的事情，例如实现设计模式 (MVC) 或 UI。

如果你要问的是你应该使用什么库来帮助你编写好的 C++，那么我会说你应该使用你需要的东西。如果 POCO 中有适合您需求的东西，请使用它。

我个人尝试尽可能多地使用标准库，这始终是我的第一站，所有功能都是标准的，其他程序员应该知道。令人高兴的是 Boost 库，我一直在使用它，因为它们质量高，文档好，并且以与 C++ std 库非常相似的风格编写。

对于 UI 工作，似乎没有任何真正好的选项 (IMO)，它们都是非常内部的、过时的并且往往以非标准风格编写。我认为这些天 QT 已经成为最坏的一群（再次是 IMO），但是如果你的目标是 windows，我在这里有关于 WTL 的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:23:33.743

当然，Qt 会是你的朋友。

# kohana - 如何调试不发送电子邮件的表单？

> ID：10124408
> 
> 赞同：0
> 
> 时间：2012-04-12T13:17:57.783
> 
> 标签：kohana

我有一个从 kohana 框架构建的表单，它应该发送一封电子邮件。

当我按下“发送”按钮时，一切似乎都正常……没有错误消息……但没有电子邮件出现！

如果我在萤火虫中看不到任何东西..我在哪里可以看？

应用程序日志状态

> “错误：缺少 i18n 条目contact.captcha.valid for language en_US”

但我不知道如何找到问题的根源..欢迎任何帮助..你的，

抢

我会尝试找出我使用的是哪个版本.....该应用程序是最新版本的 Ushahidi (2.2.1) www.ushahidi.com

```
<?php defined('SYSPATH') OR die('No direct access allowed.'); 
```

/** * 验证码库。* * $Id: Captcha.php 3917 2009-01-21 03:06:22Z zombor $ * * @package Captcha * @author Kohana 团队 * @copyright (c) 2007-2008 Kohana 团队 * @license [http://kohanaphp .com/license.html](http://kohanaphp.com/license.html) */ 类 Captcha_Core {

```
// Captcha singleton
protected static $instance;

// Style-dependent Captcha driver
protected $driver;

// Config values
public static $config = array
(
    'style'      => 'basic',
    'width'      => 150,
    'height'     => 50,
    'complexity' => 4,
    'background' => '',
    'fontpath'   => '',
    'fonts'      => array(),
    'promote'    => FALSE,
);

/**
 * Singleton instance of Captcha.
 *
 * @return  object
 */
public static function instance()
{
    // Create the instance if it does not exist
    empty(self::$instance) and new Captcha;

    return self::$instance;
}

/**
 * Constructs and returns a new Captcha object.
 *
 * @param   string  config group name
 * @return  object
 */
public static function factory($group = NULL)
{
    return new Captcha($group);
}

/**
 * Constructs a new Captcha object.
 *
 * @throws  Kohana_Exception
 * @param   string  config group name
 * @return  void
 */
public function __construct($group = NULL)
{
    // Create a singleton instance once
    empty(self::$instance) and self::$instance = $this;

    // No config group name given
    if ( ! is_string($group))
    {
        $group = 'default';
    }

    // Load and validate config group
    if ( ! is_array($config = Kohana::config('captcha.'.$group)))
        throw new Kohana_Exception('captcha.undefined_group', $group);

    // All captcha config groups inherit default config group
    if ($group !== 'default')
    {
        // Load and validate default config group
        if ( ! is_array($default = Kohana::config('captcha.default')))
            throw new Kohana_Exception('captcha.undefined_group', 'default');

        // Merge config group with default config group
        $config += $default;
    }

    // Assign config values to the object
    foreach ($config as $key => $value)
    {
        if (array_key_exists($key, self::$config))
        {
            self::$config[$key] = $value;
        }
    }

    // Store the config group name as well, so the drivers can access it
    self::$config['group'] = $group;

    // If using a background image, check if it exists
    if ( ! empty($config['background']))
    {
        self::$config['background'] = str_replace('\\', '/', realpath($config['background']));

        if ( ! is_file(self::$config['background']))
            throw new Kohana_Exception('captcha.file_not_found', self::$config['background']);
    }

    // If using any fonts, check if they exist
    if ( ! empty($config['fonts']))
    {
        self::$config['fontpath'] = str_replace('\\', '/', realpath($config['fontpath'])).'/';

        foreach ($config['fonts'] as $font)
        {
            if ( ! is_file(self::$config['fontpath'].$font))
                throw new Kohana_Exception('captcha.file_not_found', self::$config['fontpath'].$font);
        }
    }

    // Set driver name
    $driver = 'Captcha_'.ucfirst($config['style']).'_Driver';

    // Load the driver
    if ( ! Kohana::auto_load($driver))
        throw new Kohana_Exception('core.driver_not_found', $config['style'], get_class($this));

    // Initialize the driver
    $this->driver = new $driver;

    // Validate the driver
    if ( ! ($this->driver instanceof Captcha_Driver))
        throw new Kohana_Exception('core.driver_implements', $config['style'], get_class($this), 'Captcha_Driver');

    Kohana::log('debug', 'Captcha Library initialized');
}

/**
 * Validates a Captcha response and updates response counter.
 *
 * @param   string   captcha response
 * @return  boolean
 */
public static function valid($response)
{
    // Maximum one count per page load
    static $counted;

    // User has been promoted, always TRUE and don't count anymore
    if (self::instance()->promoted())
        return TRUE;

    // Challenge result
    $result = (bool) self::instance()->driver->valid($response);

    // Increment response counter
    if ($counted !== TRUE)
    {
        $counted = TRUE;

        // Valid response
        if ($result === TRUE)
        {
            self::instance()->valid_count(Session::instance()->get('captcha_valid_count') + 1);
        }
        // Invalid response
        else
        {
            self::instance()->invalid_count(Session::instance()->get('captcha_invalid_count') + 1);
        }
    }

    return $result;
}

/**
 * Gets or sets the number of valid Captcha responses for this session.
 *
 * @param   integer  new counter value
 * @param   boolean  trigger invalid counter (for internal use only)
 * @return  integer  counter value
 */
public function valid_count($new_count = NULL, $invalid = FALSE)
{
    // Pick the right session to use
    $session = ($invalid === TRUE) ? 'captcha_invalid_count' : 'captcha_valid_count';

    // Update counter
    if ($new_count !== NULL)
    {
        $new_count = (int) $new_count;

        // Reset counter = delete session
        if ($new_count < 1)
        {
            Session::instance()->delete($session);
        }
        // Set counter to new value
        else
        {
            Session::instance()->set($session, (int) $new_count);
        }

        // Return new count
        return (int) $new_count;
    }

    // Return current count
    return (int) Session::instance()->get($session);
}

/**
 * Gets or sets the number of invalid Captcha responses for this session.
 *
 * @param   integer  new counter value
 * @return  integer  counter value
 */
public function invalid_count($new_count = NULL)
{
    return $this->valid_count($new_count, TRUE);
}

/**
 * Resets the Captcha response counters and removes the count sessions.
 *
 * @return  void
 */
public function reset_count()
{
    $this->valid_count(0);
    $this->valid_count(0, TRUE);
}

/**
 * Checks whether user has been promoted after having given enough valid responses.
 *
 * @param   integer  valid response count threshold
 * @return  boolean
 */
public function promoted($threshold = NULL)
{
    // Promotion has been disabled
    if (self::$config['promote'] === FALSE)
        return FALSE;

    // Use the config threshold
    if ($threshold === NULL)
    {
        $threshold = self::$config['promote'];
    }

    // Compare the valid response count to the threshold
    return ($this->valid_count() >= $threshold);
}

/**
 * Returns or outputs the Captcha challenge.
 *
 * @param   boolean  TRUE to output html, e.g. <img src="#" />
 * @return  mixed    html string or void
 */
public function render($html = TRUE)
{
    return $this->driver->render($html);
}

/**
 * Magically outputs the Captcha challenge.
 *
 * @return  mixed
 */
public function __toString()
{
    return $this->render();
} 
```

} // 结束验证码类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:18:21.987

```
class Contact_Controller extends Main_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    public function index()
    {

        $this->template->header->this_page = 'contact';
        $this->template->content = new View('contact');

        $this->template->header->page_title .= Kohana::lang('ui_main.contact').Kohana::config('settings.title_delimiter');

        // Setup and initialize form field names
        $form = array (
            'contact_name' => '',
            'contact_email' => '',
            'contact_phone' => '',
            'contact_subject' => '',
            'contact_message' => '',
            'captcha' => ''
        );

        // Copy the form as errors, so the errors will be stored with keys
        // corresponding to the form field names
        $captcha = Captcha::factory();
        $errors = $form;
        $form_error = FALSE;
        $form_sent = FALSE;

        // Check, has the form been submitted, if so, setup validation
        if ($_POST)
        {
            // Instantiate Validation, use $post, so we don't overwrite $_POST fields with our own things
            $post = Validation::factory($_POST);

            // Add some filters
            $post->pre_filter('trim', TRUE);

            // Add some rules, the input field, followed by a list of checks, carried out in order
            $post->add_rules('contact_name', 'required', 'length[3,100]');
            $post->add_rules('contact_email', 'required','email', 'length[4,100]');
            $post->add_rules('contact_subject', 'required', 'length[3,100]');
            $post->add_rules('contact_message', 'required');
            $post->add_rules('captcha', 'required', 'Captcha::valid');

            // Test to see if things passed the rule checks
            if ($post->validate())
            {
                // Yes! everything is valid - Send email
                $site_email = Kohana::config('settings.site_email');
                $message = Kohana::lang('ui_admin.sender').": " . $post->contact_name . "\n";
                $message .= Kohana::lang('ui_admin.email').": " . $post->contact_email . "\n";
                $message .= Kohana::lang('ui_admin.phone').": " . $post->contact_phone . "\n\n";
                $message .= Kohana::lang('ui_admin.message').": \n" . $post->contact_message . "\n\n\n";
                $message .= "~~~~~~~~~~~~~~~~~~~~~~\n";
                $message .= Kohana::lang('ui_admin.sent_from_website'). url::base();

                // Send Admin Message
                email::send( $site_email, $post->contact_email, $post->contact_subject, $message, FALSE );

                $form_sent = TRUE;
            }
            // No! We have validation errors, we need to show the form again, with the errors
            else
            {
                // repopulate the form fields
                $form = arr::overwrite($form, $post->as_array());

                // populate the error fields, if any
                $errors = arr::overwrite($errors, $post->errors('contact'));
                $form_error = TRUE;
            }
        }

        $this->template->content->form = $form;
        $this->template->content->errors = $errors;
        $this->template->content->form_error = $form_error;
        $this->template->content->form_sent = $form_sent;
        $this->template->content->captcha = $captcha;

        // Rebuild Header Block
        $this->template->header->header_block = $this->themes->header_block();
        $this->template->footer->footer_block = $this->themes->footer_block();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:15:58.543

我的问题已经解决了！

我的电子邮件服务器未正确设置。我解决了后缀问题，现在评论表可以正常工作，

感谢所有回答的人，

抢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:48:32.997

从所提供的小细节来看，我认为您的站点使用 Kohana 的 I18n 库来实现站点的国际化。另一种选择是您的网站使用 Kohana 消息来显示表单错误。

当生成验证错误时，Validation 类在内部使用 __() 函数。我认为您没有消息中`valid`指定的密钥`APPPATH/messages/contact/captcha.php`。

您应该尝试更多地调查表单的处理方式以及是否生成了一些验证错误。验证码验证中可能存在错误，尽管看起来没有错误，但可能存在并且只是错误消息无法显示。

# c# - 使用 EntLib 策略注入块 + StructureMap + log4net 进行日志记录

> ID：10124411
> 
> 赞同：0
> 
> 时间：2012-04-12T13:18:04.197
> 
> 标签：c#, asp.net-mvc, enterprise-library, aop, structuremap

我正在尝试使用以下方法**在 ASP.NET MVC**应用程序中通过 AOP 添加日志记录：

*   企业库策略注入应用程序块

*   结构图

*   log4net

这就是我所拥有的：

网络配置

```
 <configSections>
    <section name="policyInjection" type="Microsoft.Practices.EnterpriseLibrary.PolicyInjection.Configuration.PolicyInjectionSettings, Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
  </configSections>   

  <policyInjection>
    <policies>
      <add name="Policy">
        <matchingRules>
          <add type="Microsoft.Practices.EnterpriseLibrary.PolicyInjection.MatchingRules.TagAttributeMatchingRule, Microsoft.Practices.EnterpriseLibrary.PolicyInjection, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            match="Log" name="Tag Attribute Matching Rule" />
        </matchingRules>
        <handlers>
          <add type="MyApp.Website.MyLoggingCallHandler, MyApp.Website, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
            name="Custom Handler" />
        </handlers>
      </add>
    </policies>
  </policyInjection> 
```

引导程序：

```
ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory()); 
```

结构映射控制器工厂：

```
public class StructureMapControllerFactory : DefaultControllerFactory
{
  protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
  {
    var instance = ObjectFactory.GetInstance(controllerType);
    return PolicyInjection.Wrap<IController>(instance);
  }
} 
```

控制器：

```
[Tag("Log")]
public class HomeController : Controller
{
  //Implementation
} 
```

MyLoggingCallHandler：

```
namespace MyApp.Website
{
    [ConfigurationElementType(typeof(CustomCallHandlerData))]
    public class MyLoggingCallHandler : ICallHandler
    {
        public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
        {
          //Implementation
        }

        public int Order { get; set; }
    }
} 
```

问题是：**调用处理程序永远不会被触发**。
我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:25:49.793

答案可以在这里找到： [http ://entlib.codeplex.com/discussions/352050](http://entlib.codeplex.com/discussions/352050)

# ios - mapkit 默认显示注解

> ID：10124412
> 
> 赞同：13
> 
> 时间：2012-04-12T13:18:07.347
> 
> 标签：ios, annotations, mapkit

我在带有自定义图像的 mapkit 中显示了一个注释，显示效果很好，

但是在贴上图钉后会显示注释，

我怎样才能在默认情况下显示注释？，当我启动视图时？没有敲击别针。

```
- (MKAnnotationView *)mapView:(MKMapView *)mv viewForAnnotation:(id <MKAnnotation>)annotation
{

    if([annotation isKindOfClass:[MKUserLocation class]])
        return nil; 

    NSString *annotationIdentifier = @"PinViewAnnotation"; 

    MKPinAnnotationView *pinView = (MKPinAnnotationView *) [mapView 
                                                            dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];

    if (!pinView) 
    {
        pinView = [[[MKPinAnnotationView alloc] 
                    initWithAnnotation:annotation 
                    reuseIdentifier:annotationIdentifier] autorelease];

        [pinView setPinColor:MKPinAnnotationColorGreen];
        pinView.animatesDrop = YES; 
        pinView.canShowCallout = YES; 

        UIImageView *houseIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tijereta.png"]];
        pinView.leftCalloutAccessoryView = houseIconView; 
        [houseIconView release];        
    }
    else 
    {
        pinView.annotation = annotation;
    }

    return pinView; 

} 
```

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-07T14:14:26.157

你可以用这个

`[mapView selectAnnotation:pinView animated:YES];`//这里pinView是你的注释，mapview是你的地图

希望有帮助

# haskell - Haskell：基本阅读诠释

> ID：10124419
> 
> 赞同：4
> 
> 时间：2012-04-12T13:18:36.473
> 
> 标签：haskell, io

目标是将 Haskell 中的 Nim 游戏编码为学校作业。我是 Haskell 的新手，当我尝试读取输入时会出现奇怪的行为。

目标是读取两个整数。而不是打印第一条消息，然后提示然后继续第二条消息，它只打印两条消息，我无法提供正确的输入。这里有什么问题？

```
type Board = [Int]      -- The board
type Heap  = Int        -- id of heap
type Turn  = (Int, Int) -- heap and number of stars to remove

readInt :: String -> IO Int
readInt msg = do putStr (msg ++ "> ")
                 inp <- getChar
                 let x = ord inp
                 return x

readTurn :: Board -> IO(Turn)
readTurn b = do heap <- readInt "Select heap:"
                amt <- readInt "Select stars:"
                print heap
                print amt
                return(heap, amt) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:28:19.370

问题是`stdout`默认情况下是行缓冲的，这意味着在您打印换行符之前没有任何输出。有两种方法可以解决这个问题：

1.  在打印提示后使用`hFlush stdout`以刷新缓冲区。
2.  在程序开始时使用`hSetBuffering stdout NoBuffering`以禁用输出缓冲。

此外，使用`getChar`and`ord`将读取单个字符并为您提供其 ASCII 值，这可能不是您想要的。要读取和解析数字，请使用`readLn`：

```
import System.IO (hFlush, stdout)

readInt :: String -> IO Int
readInt msg = do
    putStr (msg ++ "> ")
    hFlush stdout
    readLn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:27:06.537

`readChar`一次只读取一个字符。我假设您想要阅读整行，将其转换为数字（可能不止一位），然后继续。您需要使用`getLine :: IO String`和`read :: Read a => String -> a`：

```
readInt :: String -> IO Int
readInt msg = do
    putStr (msg ++ "> ")
    hFlush stdout
    inp <- getLine
    return (read inp) 
```

# android - ClipBoardManager Android .... NoClassdefFoundException

> ID：10124420
> 
> 赞同：3
> 
> 时间：2012-04-12T13:18:41.060
> 
> 标签：android, clipboard

我正在开发一个 android 应用程序，并且需要将文本（从 listView 项）复制到剪贴板，以便将其粘贴到 editText 中。

所以复制功能看起来像：

```
 ClipboardManager clipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
 clipboard.setText("String to copy"); 
```

但是，第一行会引发异常：

```
04-12 15:08:59.101:
E/AndroidRuntime(25406): java.lang.NoClassDefFoundError: android.content.ClipboardManager 
```

我用谷歌搜索了它，但我没有找到有效的答案。

感谢您的回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:32:47.110

检查 ClipboardManager 的包。

一个来自 android.text 包，另一个来自 android.content 包。

android.content.ClipboardManager 仅适用于 API 级别 11 及更高级别。我猜这就是这个错误的原因。

所以，你要在旧手机上运行你的代码，你应该使用 android.text.ClipboardManager

# soundcloud - SoundCloud API：上传推文和禁用评论

> ID：10124423
> 
> 赞同：0
> 
> 时间：2012-04-12T13:19:02.090
> 
> 标签：soundcloud

以下 PHP 代码成功将新曲目上传到 SoundCloud，但未发送推文。

为了做到这一点，我还需要有什么东西吗？

```
$track = $soundcloud->post('tracks',
        array(
                'track[asset_data]' => '@audio.mp3', 
                'track[title]' => "my audio",
                'track[description]' => "Updated: " . date('l jS F Y h:i:s A'),
                'track[sharing]' => 'public',
                'track[shared_to][connections][][id]' => '123',
                'track[sharing_note]' => 'Have a listen to'
                )); 
```

此外，我希望能够禁用对我上传的音频的评论，但我不确定该参数是什么？

谢谢！

D b

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:58:32.750

我无法重现共享问题。请注意，有时不会立即在其他社交网络上分享。你还在烦恼吗？这是我使用的代码：

```
<?php

require_once 'Services/Soundcloud.php';

$client = new Services_Soundcloud("foo", "bar");
$client->setAccessToken('ACCESS_TOKEN');

$track = $client->post('tracks', array(
    'track[title]' => 'Foooo',
    'track[asset_data]' => '@/Users/paul/audio.wav',
    'track[sharing]' => 'public',
    'track[shared_to][connections][][id]' => 'CONNECTION_ID',
    'track[sharing_note]' => 'Check it out'
));

print_r($track); 
```

还要验证您的 CONNECTION_ID 是否正确。一些代码来获取连接列表，以便您可以验证 id：

```
<?php

require_once 'Services/Soundcloud.php';

$client = new Services_Soundcloud("foo", "bar");
$client->setAccessToken('ACCESS_TOKEN');

print_r(json_decode($client->get('me/connections'))); 
```

不幸的是，目前无法通过 API 禁用评论。我会提交一个错误，看看如何解决这个问题。

希望有帮助！

# c# - 删除用户输入字段中过多的空格

> ID：10124426
> 
> 赞同：1
> 
> 时间：2012-04-12T13:19:10.193
> 
> 标签：c#, asp.net-mvc-3

在我处理（可能是敌对的）用户输入字段的控制器方法中，我有以下代码：

```
string tmptext = comment.Replace(System.Environment.NewLine, "{break was here}"); //marks line breaks for later re-insertion
tmptext = Encoder.HtmlEncode(tmptext);
//other sanitizing goes in here 
tmptext = tmptext.Replace("{break was here}", "<br />");

var regex = new Regex("(<br /><br />)\\1+");
tmptext = regex.Replace(tmptext, "$1"); 
```

我的目标是为典型的非恶意使用保留换行符，并以安全的 htmlencoded 字符串显示用户输入。我接受用户输入，将其解析为换行符，并在换行符处放置一个分隔符。我执行 HTML 编码并重新插入中断。（我可能会将其更改为将段落重新插入为 p 标签而不是 br，但现在我使用的是 br）

现在实际插入真正的 html 中断让我发现了一个微妙的漏洞：回车键。regex.replace 代码用于删除仅站在回车键上并用废话填充页面的恶意用户。

这是对只有白色的大垃圾泛滥的修复，但仍然让我容易受到滥用，例如输入一个字符，两个换行符，一个字符，两个换行符在整个页面上。

我的问题是确定这是滥用并在验证时失败的方法。我担心可能没有简单的程序方法来做到这一点，而是需要启发式技术或贝叶斯过滤器。希望有人有更简单，更好的方法。

编辑：也许我在问题描述中不清楚，正则表达式处理连续看到多个换行符并将它们转换为一个或两个。那个问题就解决了。真正的问题是将合法文本与垃圾泛滥区分开来，如下所示：

一种

一种

一种

...想象一下其中的 1000 个...

一种

一种

一种

一种

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:26:54.817

听起来你很想用正则表达式尝试一些“聪明”的东西，但 IMO 最简单的方法是循环遍历字符串的字符，将它们复制到 StringBuilder，随时过滤。

任何未通过 char.IsWhiteSpace() 测试的内容都不会被复制。（如果其中一个是换行符，则插入一个 <br/> 并且在您遇到非空白字符之前不允许添加更多 <br/>）。

**编辑**

如果你想阻止用户输入任何旧的废话，现在就放弃吧。如果用户真的想要的话，你永远不会找到一种过滤方式，用户在一分钟内找不到解决办法。

在输入中限制换行数或字符总数会更好。

想想做一些聪明的事情来清理“错误输入”需要付出多少努力，然后考虑发生这种情况的可能性有多大。可能没有意义。可能您真正需要的所有清理工作是确保数据是合法的（对于您的系统来说不会太大而无法处理，所有危险字符都被剥离或转义等）。（这正是论坛有人工版主的原因，他们可以根据任何适当的标准过滤帖子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:34:53.320

我将`HttpUtility.HtmlEncode`字符串，然后将换行符转换为`<br/>`.

```
HttpUtility.HtmlEncode(subject).Replace("\r\n", "<br/>").Replace("\r", "<br/>").Replace("\n", "<br/>"); 
```

此外，您应该在输出给用户时执行此逻辑，而不是在保存在数据库中时。我对数据库做的唯一验证是确保它被正确转义（除了正常的业务规则）。

**编辑**：但是，要解决实际问题，您可以使用 Regex 预先用单个换行符替换多个换行符。

```
subject = Regex.Replace(@"(\r\n|\r|\n)+", @"\n", RegexOptions.Singleline); 
```

我不确定你是否需要`RegexOptions.Singleline`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:35:36.363

与其尝试用过滤后的文本替换换行符，然后尝试在其上使用正则表达式，为什么不在插入`<br />`标签之前清理您的数据呢？不要忘记先清理输入`HttpUtility.HtmlEncode`。

为了尝试连续处理多条短线，这是我最好的尝试：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

class Program {
  static void Main() {
    // Arbirary cutoff used to join short strings.
    const int Cutoff = 6;

    string input =
      "\r\n\r\n\n\r\r\r\n\nthisisatest\r\nstring\r\nwith\nsome\r\n" + 
      "unsanatized\r\nbreaks\r\nand\ra\nsh\nor\nt\r\n\na\na\na\na" +
      "\na\na\na\na\na\na\na\na\na\na\na\na\na\na\na\na\na";
    input = (input ?? String.Empty).Trim(); // Don't forget to HtmlEncode it.
    StringBuilder temp = new StringBuilder();
    List<string> result = new List<string>();
    var items = input.Split(
                        new[] { '\r', '\n' },
                        StringSplitOptions.RemoveEmptyEntries)
                     .Select(i => new { i.Length, Value = i });

    foreach (var item in items) {
      if (item.Length > Cutoff) {
        if (temp.Length > 0) {
          result.Add(temp.ToString());
          temp.Clear();
        }

        result.Add(item.Value);
        continue;
      }

      if (temp.Length > 0) { temp.Append(" "); }
      temp.Append(item.Value);
    }

    if (temp.Length > 0) {
      result.Add(temp.ToString());
    }

    Console.WriteLine(String.Join("<br />", result));
  }
} 
```

产生以下输出：

```
thisisatest<br />string with some<br />unsanatized<br />breaks and a sh or t a a
 a a a a a a a a a a a a a a a a a a a 
```

我敢肯定你已经想出了这个解决方案，但不幸的是你所要求的并不是很直接。

对于那些感兴趣的人，这是我的第一次尝试：

```
using System;
using System.Text.RegularExpressions;

class Program {
  static void Main() {
    string input = "\r\n\r\n\n\r\r\r\n\nthisisatest\r\nstring\r\nwith\nsome" +
                   "\r\nunsanatized\r\nbreaks\r\n\r\n";
    input = (input ?? String.Empty).Trim().Replace("\r", String.Empty);
    string output = Regex.Replace(
                      input,
                      "\\\n+",
                      "<br />",
                      RegexOptions.Multiline);
    Console.WriteLine(output);
  }
} 
```

产生以下输出：

```
thisisatest<br />string<br />with<br />some<br />unsanatized<br />breaks 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:43:26.167

这不是处理这个问题的最有效方法，也不是最聪明的（免责声明），
***但如果你的文本不是太大***，那么它并不重要并且缺少任何更智能的算法（注意：很难检测到类似的东西，`char\nchar\nchar\n...`尽管你可以在行 len 上设置限制）

您可以只`Split`使用白色字符（添加您能想到的任何字符，除了 \n） - 然后`Join`只使用一个空格`，然后拆分`\n`（以获取行） - 加入`<br />`. 在加入线路时，您可以测试`line.Length > 2`例如或其他内容。`

 `为了使这更快，您可以使用更有效的算法进行迭代，逐个字符，使用 IndexOf 等。

同样不是最有效或最完美的处理方式，但会给你一些快速的东西。

编辑：过滤“相同行”-您可以使用例如`DistinctUntilChanged`-来自`Ix - Interactive extensions`（我认为请参阅 NuGet Ix-experimental）应该过滤“相同行”连续+您可以为这些添加行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:14:27.933

一个随机建议，灵感来自 slashdot.org 的评论过滤器：使用 System.IO.Compression.DeflateStream 压缩您的用户输入，如果它与原始文件相比太小（您必须做一些实验才能找到有用的截止）拒绝它。`

# excel - MS Excel + VBA：以编程方式设置数据标签方向

> ID：10124427
> 
> 赞同：0
> 
> 时间：2012-04-12T13:19:15.640
> 
> 标签：excel, vba, charts, label

我正在尝试将条形图上数据标签的方向设置为垂直。通常我会通过录制宏来了解如何做到这一点，但由于某种原因，它似乎没有生成任何代码。有可能吗？

我正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:23:49.550

以下是记录宏生成的内容：

```
With Selection.TickLabels
    .ReadingOrder = xlContext
    .Orientation = xlDownward
End With 
```

希望这可以帮助！:)

# amazon-ec2 - 将亚马逊实例存储安装到另一个实例 - 有可能吗？如何？

> ID：10124433
> 
> 赞同：0
> 
> 时间：2012-04-12T13:19:39.953
> 
> 标签：amazon-ec2

由于更新后系统崩溃，我用 ebs 设置了新实例（旧实例有一个实例存储）。但我需要将一些数据从旧实例复制到新实例。可以将实例存储从旧实例挂载到新实例吗？这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:39:17.107

Have you come across this thread: [Mounting Old EBS Volume to the new Instance - Amazon EC2](https://stackoverflow.com/questions/9350222/mounting-old-ebs-volume-to-the-new-instance-amazon-ec2)

I'm not sure if that's what you're looking for, but the answer on that thread details the process of mounting the old EBS volume to the new one on an Amazon EC2 instance.

# c# - 如何返回包含文件的文件夹列表？

> ID：10124434
> 
> 赞同：2
> 
> 时间：2012-04-12T13:19:42.890
> 
> 标签：c#, .net, system.io.fileinfo

我想知道如何返回包含文件的文件夹列表。

因为我不能同时返回这两个列表……也不能把这两种类型都放在列表中。

```
 public List<DirectoryInfo> GetTopFolders()
    {
        List<DirectoryInfo> Folders = new List<DirectoryInfo>();
        List<FileInfo> Files = new List<FileInfo>();

        System.IO.DirectoryInfo di = new System.IO.DirectoryInfo("C://inetpub//wwwroot//Files//");
        di.GetDirectories();
        System.IO.FileInfo[] fiArr = di.GetFiles();

        foreach (DirectoryInfo t in di.GetDirectories())
        {
            Folders.Add(t);
            foreach (FileInfo f in di.GetFiles())
            {
                Files.Add(f);
            }
        }
        return Folders;
    } 
```

这是我实际使用的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:25:48.613

好吧， FileInfo 和 DirectoryInfo 都继承自[FileSystemInfo](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.aspx)。因此，您可以改为维护该类型的列表并将全部内容一起返回：

```
public List<FileSystemInfo> GetTopFoldersAndFiles()
{
    List<FileSystemInfo> FilesAndFolders = new List<FileSystemInfo>();

    System.IO.DirectoryInfo di = new System.IO.DirectoryInfo("C://inetpub//wwwroot//Files//");
    di.GetDirectories();
    System.IO.FileInfo[] fiArr = di.GetFiles();

    foreach (DirectoryInfo t in di.GetDirectories())
    {
        FilesAndFolders.Add(t);
        foreach (FileInfo f in di.GetFiles())
        {
            FilesAndFolders.Add(f);
        }
    }
    return FilesAndFolders;
} 
```

当然，您可能需要在代码中根据每个项目的类型使用此对象的一些条件处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T13:23:33.660

你可以使用一个二元组。请参阅[msdn 上的 Tuple.Create](http://msdn.microsoft.com/en-us/library/dd387181.aspx)

```
public Tuple<List<DirectoryInfo>,List<FileInfo>> GetTopFolders()
{
    List<DirectoryInfo> Folders = new List<DirectoryInfo>();
    List<FileInfo> Files = new List<FileInfo>();

     /* All your other code here */
     /* Removed for brevity*/
    foreach (DirectoryInfo t in di.GetDirectories())
    {
        Folders.Add(t);
        foreach (FileInfo f in di.GetFiles())
        {
            Files.Add(f);
        }
    }
    return Tuple.Create(Folders, Files);
} 
```

你像这样使用它：

```
var fileAndFolders = GetTopFolders()
fileAndFolders.Item1 //will be your folders of type List<DirectoryInfo>
fileAndFolders.Item2 //will be your folders of type List<FileInfo> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:31:58.197

您可以使用`Dictionary<DirectoryInfo, List<FileInfo>>`：

```
private Dictionary<DirectoryInfo, List<FileInfo>> GetTopFolders()
{
    Dictionary<DirectoryInfo, List<FileInfo>> r = new Dictionary<DirectoryInfo, List<FileInfo>>();

    DirectoryInfo di = new DirectoryInfo("C://inetpub//wwwroot//Files//"); 
    di.GetDirectories();

    r.Add(di, di.GetFiles().ToList());

    foreach (DirectoryInfo t in di.GetDirectories()) 
    {
        r.Add(t, t.GetFiles().ToList());
    } 

    return r; 
} 
```

然后您可以像这样列出您的文件夹和文件：

```
StringBuilder sb = new StringBuilder();

foreach (KeyValuePair<DirectoryInfo, List<FileInfo>> item in GetTopFolders())
{
    sb.AppendLine(item.Key.FullName);

    foreach (FileInfo file in item.Value)
    {
        sb.AppendLine("\t" + file.Name);
    }
}

Console.WriteLine(sb.ToString()); 
```

# ios - iOS 管理远程请求的异步块

> ID：10124441
> 
> 赞同：0
> 
> 时间：2012-04-12T13:20:05.890
> 
> 标签：ios, asynchronous, objective-c-blocks, block

不知道如何最好地解释这一点 - 如果我使用块来加载 UITableViewCells 的图像，我怎样才能最好地确保当图像实际完成加载时 - 它是单元格的正确图像。假设我正在制作一个带有用户图标的应用程序 - 所以单元格 5 是给 John 的，它开始加载 John 的图像。假设该请求被挂断，当它返回时，该单元格已在 23 号单元格被比尔重用。我们显然不想加载约翰的图标 - 我们只想要比尔的图标。

这是一个简化的解释。我知道我们可以在设置图像之前检查块中是否可见单元格 - 但在不同的情况下，我有一个方法可以在调用时发出远程请求。远程请求完成后，它会调用该方法中定义的块来更新 UI。如果我调用它并且在它返回之前我再次调用它并且只希望执行最近调用的块。这样做有没有好的模式？

目前，我尝试在方法中存储一个具有某种状态的变量，以便当它返回时，我可以检查该状态是否仍然有效。只是想我会看看是否有更好的方法。谢谢。

只是检查是否有任何更新。

# c# - 如何在 Windows 窗体中暂停 backgroundWorker

> ID：10124446
> 
> 赞同：1
> 
> 时间：2012-04-12T13:20:25.047
> 
> 标签：c#, .net, windows, winforms, backgroundworker

我是 .net 世界的新手，所以我遇到了一些问题，请帮帮我，这是其中一个，我有一个 for 循环，我有一个 backgroundWorker 控件和一个 progressBar 控件，还有一个 id 按钮：" btnPause”。所以我的要求是当我的表单加载时，peogressbar 将显示进度它已完成多少，每当我单击按钮（btnPause）时，按钮文本需要更改并将文本设置为暂停，然后每当我再次单击该按钮，它需要从暂停的值恢复。请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:32:34.970

我的方法是使用一个布尔标志让我知道操作是否暂停（也许第二个让我知道操作是否被取消）。当用户按下暂停按钮时，您将`IsPaused`标志设置为 true，以便当工作人员开始处理下一个项目时，它可以检查此标志并知道进入等待状态。

有几种方法可以让 BackgroundWorker 保持这种暂停状态。我的方法是使用 ManualResetEvent。这允许 BackgroundWorker 线程进入睡眠状态并在设置事件时退出。我认为这比使用带有睡眠主体的 while 循环要好，因为线程在设置事件之前一直处于睡眠状态，而不是醒来检查它是否仍应处于睡眠状态。当用户希望继续时，它可以设置此事件并让后台工作人员继续。

所以代码看起来有点像这样：

```
private void backgroundWorker_doWork(object sender, DoWorkEventArgs args)
{
   //Initialize any pre-work stuff here.
   while(!finished)
   {
       if (Paused)
          m_evtPause.WaitOne();
       if (Cancelled)
          break;

       //lengthy thread procedure code.
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:28:18.660

尝试使用这个

```
class MyWorkerClass
{
    volatile bool m_bPaused  = false;
    // Public property to control worker execution
    public bool Paused 
    {
        get { return m_bPaused; }
        set { m_bPaused = value; }
    }

    long ThreadFunc (BackgroundWorker worker, DoWorkEventArgs e)
    {
        ...
        // While Paused property set to true
        while (m_bPaused)
        {
            // Pause execution for some time
            System.Threading.Thread.Sleep (100);      
        }
    }
} 
```

# tsql - 如何获取不为空的第一列

> ID：10124447
> 
> 赞同：4
> 
> 时间：2012-04-12T13:20:26.513
> 
> 标签：tsql, sql-server-2005, null, sql-server-2008-r2

如果标题不好，请见谅。但我不知道如何解决这个问题。我一直在为 sql 中的查询而苦苦挣扎。我不知道以前是否有人问过这个问题。但我需要得到第一列不为空。我有一张这样的桌子：

```
ID  0       1       2       3       4       5       6       7       8      9    
59  NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL   text1
185 NULL    NULL    NULL    NULL    NULL    text1   text2   text3   text4  text5
428 NULL    NULL    NULL    NULL    NULL    NULL    text1   text2   text3  text4
53  NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    text1  text2
452 NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL   text1
267 text1   text2   text3   text4   text5   text6   text7   text8   text9  text10 
```

我希望输出是这样的：

```
ID  0       1       2       3       4       5       6       7       8      9    
59  text1   NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL   NULL
185 text1   text2   text3   text4   text5   NULL    NULL    NULL    NULL   NULL
428 text1   text2   text3   text4   NULL    NULL    NULL    NULL    NULL   NULL
53  text1   text2   NULL    NULL    NULL    NULL    NULL    NULL    NULL   NULL
452 text1   NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL   NULL
267 text1   text2   text3   text4   text5   text6   text7   text8   text9  text10 
```

该`ID`列是每行唯一的。

我失败的尝试是创建一个标量函数并为每一列运行它。该函数如下所示：

```
CREATE FUNCTION GetCulumnsThatIsNotNull
(
    @column1 VARCHAR(500),
    @column2 VARCHAR(500),
    @column3 VARCHAR(500),
    @column4 VARCHAR(500),
    @column5 VARCHAR(500),
    @column6 VARCHAR(500),
    @column7 VARCHAR(500),
    @column8 VARCHAR(500),
    @column9 VARCHAR(500),
    @column10 VARCHAR(500)
)
RETURNS VARCHAR(500)
AS
BEGIN
RETURN 
    COALESCE(@column1,
    COALESCE(@column2,
    COALESCE(@column3,
    COALESCE(@column4,
    COALESCE(@column5,
    COALESCE(@column6,
    COALESCE(@column8,
    COALESCE(@column9,
    COALESCE(@column10,null)))))))))
END 
```

但是这个函数的问题是它只是选择第一列是`null`. 所以结果是这样的：

```
ID  0       1       2       3       4       5       6       7       8      9    
59  text1   text1   text1   text1   text1   text1   text1   text1   text1  text1
185 text1   text1   text1   text1   text1   text1   text1   text1   text1  text1
428 text1   text1   text1   text1   text1   text1   text1   text1   text1  text1
53  text1   text1   text1   text1   text1   text1   text1   text1   text1  text1
452 text1   text1   text1   text1   text1   text1   text1   text1   text1  text1
267 text1   text1   text1   text1   text1   text1   text1   text1   text1  text1 
```

有什么建议么？

**编辑**

这将不起作用。

```
COALESCE(pvt.[0],
pvt.[1],
pvt.[2],
pvt.[3],
pvt.[4],
pvt.[5],
pvt.[6],
pvt.[7],
pvt.[8],
pvt.[9]) 
```

因为它会导致相同的输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:02:36.847

我会在视图或 CTE 或其他东西中规范化数据，然后运行普通的枢轴。这样，如果您真正规范化表，您将能够重用代码。

```
-- Setup test data
declare @texts table (
      ID int not null primary key
    , Col0 varchar(10) null
    , Col1 varchar(10) null
    , Col2 varchar(10) null
    , Col3 varchar(10) null
    , Col4 varchar(10) null
    , Col5 varchar(10) null
    , Col6 varchar(10) null
    , Col7 varchar(10) null
    , Col8 varchar(10) null
    , Col9 varchar(10) null
)
insert into @texts select 59, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'text1'
insert into @texts select 185, NULL, NULL, NULL, NULL, NULL, 'text1', 'text2', 'text3', 'text4', 'text5'
insert into @texts select 428, NULL, NULL, NULL, NULL, NULL, NULL, 'text1', 'text2', 'text3', 'text4'
insert into @texts select 53, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'text1', 'text2'
insert into @texts select 452, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'text1'
insert into @texts select 267, 'text1', 'text2', 'text3', 'text4', 'text5', 'text6', 'text7', 'text8', 'text9', 'text10'

-- Normalize and get new column in a CTE
;with cte as (
    select *
        , row_number() over (partition by ID order by Col) - 1 as NewCol
    from (
        select ID, 0 as Col
            , (select Col0 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 1 as Col
            , (select Col1 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 2 as Col
            , (select Col2 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 3 as Col
            , (select Col3 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 4 as Col
            , (select Col4 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 5 as Col
            , (select Col5 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 6 as Col
            , (select Col6 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 7 as Col
            , (select Col7 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 8 as Col
            , (select Col8 from @texts where ID = a.ID) as Val
        from @texts a
        union all
        select ID, 9 as Col
            , (select Col9 from @texts where ID = a.ID) as Val
        from @texts a
    ) as b
    where b.Val is not null
)
-- Run a pivot of the CTE
select ID
    , (select Val from cte where ID = a.ID and NewCol = 0) as Col0
    , (select Val from cte where ID = a.ID and NewCol = 1) as Col1
    , (select Val from cte where ID = a.ID and NewCol = 2) as Col2
    , (select Val from cte where ID = a.ID and NewCol = 3) as Col3
    , (select Val from cte where ID = a.ID and NewCol = 4) as Col4
    , (select Val from cte where ID = a.ID and NewCol = 5) as Col5
    , (select Val from cte where ID = a.ID and NewCol = 6) as Col6
    , (select Val from cte where ID = a.ID and NewCol = 7) as Col7
    , (select Val from cte where ID = a.ID and NewCol = 8) as Col8
    , (select Val from cte where ID = a.ID and NewCol = 9) as Col9
from cte a
group by ID
order by ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:05:45.390

```
select *
from
  (
    select T.ID, C.C, row_number() over(partition by T.ID order by C.N) - 1 as rn
    from @T as T
      cross apply (values (C0, 0),(C1, 1),(C2, 2),(C3, 3),(C4, 4),
                          (C5, 5),(C6, 6),(C7, 7),(C8, 8),(C9, 9)) as C(C, N)
    where C.C is not null
  ) as T
pivot
  (
    min(C) for rn in ([0],[1],[2],[3],[4],[5],[6],[7],[8],[9])
  ) as P 
```

试用[SE-Data](https://data.stackexchange.com/stackoverflow/query/66584)

# android - Opengl 透明背景和相机预览不喜欢纹理

> ID：10124449
> 
> 赞同：8
> 
> 时间：2012-04-12T13:20:34.273
> 
> 标签：android, opengl-es, camera, overlay, textures

我一直在努力创建一个opengl相机叠加层，并成功地在相机预览上放置了一个带有透明背景的3d立方体，但是在添加纹理时会出现问题。

其自身的纹理会出现几秒钟，然后整个 opengl 立方体消失，只留下相机预览运行。

这是我添加相机和opengl视图的地方

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        glView = new GLLayer(this);

        mPreview = new CamLayer(this);

        camera = new CameraSurfaceView(this);
        setContentView(glView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        addContentView(camera, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); // does not work when texture added

} 
```

这是给我所有麻烦的类，我使用方法 bindCameraTexture 使用位图动态重新纹理立方体，这在没有透明背景的情况下有效。

```
public GLLayer(Context c) {
    super(c);

    this.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
    this.setRenderer(this);
    this.getHolder().setFormat(PixelFormat.TRANSLUCENT);//sets the backround to transparent
}

public void onDrawFrame(GL10 gl) {
    onDrawFrameCounter++;

    drawFrame(mBitmap);
    mSecs += 1;
    drawFrameAt(mBitmap, mSecs);

    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    bindCameraTexture(gl,mBitmap);

    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0, 0, 4.2f, 0, 0, 0, 0, 1, 0);

    //-------------------------------------------------------------------Does not need to Rotate

    gl.glRotatef(onDrawFrameCounter,1,0,0); //Rotate the camera image
    gl.glRotatef((float)Math.sin(onDrawFrameCounter/20.0f)*40,0,1,0); //Rotate the camera image
    gl.glRotatef((float)Math.cos(onDrawFrameCounter/40.0f)*40,0,0,1); //Rotate the camera image

    //-------------------------------------------------------------------

    gl.glNormal3f(0,0,1);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);          
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 4, 4);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 8, 4);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP,12, 4);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP,16, 4);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP,20, 4);
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);

    float ratio = (float) width / height;
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glFrustumf(-ratio, ratio, -1, 1, 1, 10);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0, 0, 4.2f, 0, 0, 0, 0, 1, 0);        
}

public void videoUpdate(int seconds)
{
    drawFrame(mBitmap);
    mSecs += seconds;
    drawFrameAt(mBitmap, mSecs);    
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    mBitmap = Bitmap.createBitmap(240, 240, Bitmap.Config.ARGB_8888); //----I FOR GOT THIS I AM STUPID
    openFile();

    videoUpdate(1);

    bindCameraTexture(gl,mBitmap);
    //createTexture(gl, mBitmap); // why does this not work when texturing the cube it disappears 

    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);

    gl.glClearColor(0, 0, 0, 0);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glEnable(GL10.GL_DEPTH_TEST);

    cubeBuff = makeFloatBuffer(camObjCoord);
    texBuff = makeFloatBuffer(camTexCoords);        
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, cubeBuff);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texBuff);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
}   

/**
 * Generates a texture from bitmap which is being dynamically updated
 */

void bindCameraTexture(GL10 gl,Bitmap bitmap) {

    //Makes this thread safe due to resorce sharing
    synchronized(this) {
        if (cameraTexture==null)
            cameraTexture=new int[1];
        else
            gl.glDeleteTextures(1, cameraTexture, 0);

        gl.glGenTextures(1, cameraTexture, 0);
        int tex = cameraTexture[0];
        gl.glBindTexture(GL10.GL_TEXTURE_2D, tex);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0); 

        //bitmap.getPixels(pixels, offset, stride, x, y, width, height)

        //gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_LUMINANCE, 256, 256, 0, GL10.GL_LUMINANCE, GL10.GL_UNSIGNED_BYTE, ByteBuffer.wrap(glCameraFrame));
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);

        //Look into playing video of screen
    }
} 
```

笔记：

*   动态纹理在没有透明背景的情况下工作
*   无纹理的 3d 立方体适用于相机预览

我最初的猜测是立方体的纹理和相机预览会以某种方式相互影响。

* * *

代码更新：我一直在尝试用不同的方法来纹理一个 opengl 相机覆盖，而相机预览不会消失，我偶然发现了一些东西。

我现在在 Opengl 立方体上获得了纹理，但是相机预览似乎也在 opengl 立方体上

我认为让这个代码也可用会很有趣。

* * *

相机类

```
import java.io.IOException;

import android.content.Context;
import android.hardware.Camera;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraSurfaceView  extends SurfaceView implements SurfaceHolder.Callback {

Camera mCamera;
boolean isPreviewRunning = false;
Camera.PreviewCallback callback;

CameraSurfaceView(Context context) {
    super(context);
    //this.callback=callback;

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    SurfaceHolder mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}
//mPreview.setLayoutParams(new LayoutParams(100,100))

public void surfaceCreated(SurfaceHolder holder) {
    synchronized(this) {
        mCamera = Camera.open();

        Camera.Parameters p = mCamera.getParameters();  
        p.setPreviewSize(240, 160);
        mCamera.setParameters(p);

        try {
            mCamera.setPreviewDisplay(holder);
        } catch (IOException e) {
            Log.e("Camera", "mCamera.setPreviewDisplay(holder);");
        }

        mCamera.startPreview();
        //mCamera.setPreviewCallback(this);
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    // Because the CameraDevice object is not a shared resource, it's very
    // important to release it when the activity is paused.
    synchronized(this) {
        try {
            if (mCamera!=null) {
                mCamera.stopPreview();  
                isPreviewRunning=false;
                mCamera.release();
            }
        } catch (Exception e) {
            Log.e("Camera", e.getMessage());
        }
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

}

public void onPreviewFrame(byte[] arg0, Camera arg1) {
    if (callback!=null)
        callback.onPreviewFrame(arg0, arg1);        
}

} 
```

* * *

Square SquareRenderer 类

```
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import javax.microedition.khronos.opengles.GL11;

import android.content.*;

import android.opengl.GLSurfaceView;
import java.lang.Math;

class SquareRenderer implements GLSurfaceView.Renderer 
{
    public SquareRenderer(boolean useTranslucentBackground,Context context) 
    {
        mTranslucentBackground = useTranslucentBackground;
        this.context=context;
        mSquare = new Square();
    }

    public void onDrawFrame(GL10 gl) 
    {

        gl.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);

        //int resid = test.com.google.R.drawable.ic_launcher;   
        //mSquare.createTexture(gl, this.context, resid);           //2
        gl.glMatrixMode(GL11.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glTranslatef(0.0f,(float)Math.sin(mTransY), -3.0f);

        mSquare.draw(gl);

        mTransY += .075f;
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) 
    {
         gl.glViewport(0, 0, width, height);

         /*
          * Set our projection matrix. This doesn't have to be done
          * each time we draw, but usually a new projection needs to
          * be set when the viewport is resized.
          */

         float ratio = (float) width / height;
         gl.glMatrixMode(GL11.GL_PROJECTION);
         gl.glLoadIdentity();
         gl.glFrustumf(-ratio, ratio, -1, 1, 1, 10);

         //int resid = book.BouncySquare.R.drawable.hedly;
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) 
    {
        /*
         * By default, OpenGL enables features that improve quality
         * but reduce performance. One might want to tweak that
         * especially on software renderer.
         */

        //glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);

        gl.glDisable(GL11.GL_DITHER);

        /*
         * Some one-time OpenGL initialization can be made here
         * probably based on features of this particular context
         */

         int resid = test.com.google.R.drawable.ic_launcher;    
         mSquare.createTexture(gl, this.context, resid);            //2

         gl.glHint(GL11.GL_PERSPECTIVE_CORRECTION_HINT,
                 GL11.GL_FASTEST);

         if (mTranslucentBackground) {
             gl.glClearColor(.5f,.5f,.5f,1.0f);
         } else {
             gl.glClearColor(1,1,1,1);
         }
         gl.glEnable(GL11.GL_CULL_FACE);
         gl.glShadeModel(GL11.GL_SMOOTH);
         gl.glEnable(GL11.GL_DEPTH_TEST);
    }
    private boolean mTranslucentBackground;
    private Square mSquare;
    private float mTransY;
    private float mAngle;
    private Context context;
} 
```

* * *

广场班

```
import android.content.Context;
import android.graphics.*;
import android.opengl.*;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;

import javax.microedition.khronos.opengles.GL10;
import javax.microedition.khronos.opengles.GL11;

/**
 * A vertex shaded square.
 */
class Square
{
    public Square()
    {
        float vertices[] = 
        {
                -1.0f, -1.0f,
                 1.0f, -1.0f,
                -1.0f,  1.0f,
                 1.0f,  1.0f
        }; 

        byte maxColor=(byte)255;

        byte colors[] = 
        {
                maxColor,maxColor,       0,maxColor,
                0,       maxColor,maxColor,maxColor,
                0,              0,       0,maxColor,
                maxColor,       0,maxColor,maxColor
        }; 

        byte indices[] = 
        {
            0, 3, 1,
            0, 2, 3
        };

        float[] textureCoords =     
        {                       
            0.0f, 0.0f,
            1.0f, 0.0f,
            0.0f, 1.0f,
            1.0f, 1.0f      
        };

        ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        mFVertexBuffer = vbb.asFloatBuffer();
        mFVertexBuffer.put(vertices);
        mFVertexBuffer.position(0);

        mColorBuffer = ByteBuffer.allocateDirect(colors.length);
        mColorBuffer.put(colors);
        mColorBuffer.position(0);

        mIndexBuffer = ByteBuffer.allocateDirect(indices.length);
        mIndexBuffer.put(indices);
        mIndexBuffer.position(0);

        ByteBuffer tbb = ByteBuffer.allocateDirect(textureCoords.length * 4);
        tbb.order(ByteOrder.nativeOrder());
        mTextureBuffer = tbb.asFloatBuffer();
        mTextureBuffer.put(textureCoords);
        mTextureBuffer.position(0); 
    }

    public void draw(GL10 gl)
    { 
        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, mFVertexBuffer);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glColorPointer(4, GL10.GL_UNSIGNED_BYTE, 0, mColorBuffer);
        gl.glEnableClientState(GL10.GL_COLOR_ARRAY);

        gl.glEnable(GL10.GL_TEXTURE_2D);                //1
        gl.glEnable(GL10.GL_BLEND);                 //2 

        gl.glBlendFunc(GL10.GL_ONE, GL10.GL_SRC_COLOR);         //3
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);      //4 

        gl.glTexCoordPointer(2, GL10.GL_FLOAT,0, mTextureBuffer);   //5
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);        //6 

        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);          //7

        gl.glDisableClientState(GL10.GL_COLOR_ARRAY);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);       //8
    }

    private int[] textures = new int[1];

    public int createTexture(GL10 gl, Context contextRegf, int resource) 
    {

        Bitmap tempImage = BitmapFactory.decodeResource(contextRegf.getResources(), resource); // 1

        gl.glGenTextures(1, textures, 0); // 2
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]); // 3

        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, tempImage, 0); // 4

        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR); // 5a
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR); // 5b   

        tempImage.recycle();//6

        return resource;

    }

    private Float mTransY;
    public FloatBuffer  mTextureBuffer;
    private FloatBuffer mFVertexBuffer;
    private ByteBuffer  mColorBuffer;
    private ByteBuffer  mIndexBuffer;
} 
```

* * *

主要活动课

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.FrameLayout;

import android.graphics.PixelFormat;
import android.opengl.GLSurfaceView;

public class CameraAndOpengGLActivity extends Activity {
    /** Called when the activity is first created. */

    private CameraSurfaceView mPreview;
    private GLSurfaceView mGLSurfaceView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);
        // Create our Preview view and set it as the content of our
        // Activity
        FrameLayout frame = new FrameLayout(this);
        mGLSurfaceView = new GLSurfaceView(this);
        mPreview = new CameraSurfaceView(this);
        // We want an 8888 pixel format because that's required for
        // a translucent window.
        // And we want a depth buffer.
        mGLSurfaceView.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        // Tell the cube renderer that we want to render a translucent version
        // of the cube:
        mGLSurfaceView.setRenderer(new SquareRenderer(true,this.getApplicationContext()));
        // Use a surface format with an Alpha channel:
        mGLSurfaceView.getHolder().setFormat(PixelFormat.TRANSLUCENT);
        //setContentView(mGLSurfaceView);
        frame.addView(mGLSurfaceView);
        frame.addView(mPreview);
        setContentView(frame);
        //addContentView(mPreview, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  

        //setContentView(frame);
    }
        //FrameLayout frame = new FrameLayout(this);

        //mPreview = new CameraSurfaceView(this);

        //frame.addView(mPreview);

        //setContentView(frame);

        // Create our Preview view and set it as the content of our
        // Activity
        //mGLSurfaceView = new GLSurfaceView(this);
        // We want an 8888 pixel format because that's required for
        // a translucent window.
        // And we want a depth buffer.
        //mGLSurfaceView.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        // Tell the cube renderer that we want to render a translucent version
        // of the cube:
        //mGLSurfaceView.setRenderer(new CubeRenderer(true));
        // Use a surface format with an Alpha channel:
        //mGLSurfaceView.getHolder().setFormat(PixelFormat.TRANSLUCENT);
        //setContentView(mGLSurfaceView);

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T22:19:20.497

我不知道对你来说是否为时已晚，但我认为问题可能很简单：

```
setContentView(glView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
addContentView(camera, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

您正在将相机图像添加到 glView 的顶部。所以也许你可以试着反过来呢？啊，无论如何，您肯定已经找到了解决方案。:-)

# iphone - sectionedTableView iPhone 中的 JSON 数据

> ID：10124457
> 
> 赞同：0
> 
> 时间：2012-04-12T13:21:06.690
> 
> 标签：iphone, mysql, objective-c, json, uitableview

我从我的 mysql 数据库中接收客户数据。我想在分段表视图中显示所有客户。每个部分的标题是客户姓名的第一个字母，每个部分中的 numberOfrows 是以相同字母开头的客户数。基本上它应该看起来像我 iPhone 上的联系人应用程序。

这是我的数据[http://mobile.beger.org/getdata.php53?object=customer&mode=all](http://mobile.beger.org/getdata.php53?object=customer&mode=all)

现在我可以在我的 tableView 中显示所有客户。我怎样才能把客户分成几个部分？我必须编辑我的mysql选择吗？或者我应该有两个 json 字符串。一个是每封信和以这封信开头的客户数量，另一个是客户详细信息？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:27:59.200

您正在使用这种块来获得简单且便宜的解决方案。我已编辑您的网络服务响应。请看一下。

```
{
  "customer": [
    { "A": [
      {
        "i_customer_m": "22",
        "s_name1": "Amann Solutions AG",
        "s_town": "Herisau"
      },
      {
        "i_customer_m": "5",
        "s_name1": "Architekturhaus Leibold GmbH",
        "s_town": "D\u00fcnkelsried"
      },
      {
        "i_customer_m": "68",
        "s_name1": "ATEcare Service GmbH & Co.KG",
        "s_town": "Aichach"
      },
      {
        "i_customer_m": "83",
        "s_name1": "Autohandel Polska GmbH",
        "s_town": "Prag"
      },
      {
        "i_customer_m": "65",
        "s_name1": "Autohandel Polska GmbH",
        "s_town": "Prag"
      }
    ]},
    {"B": [
      {
        "i_customer_m": "45",
        "s_name1": "Baugenossenschaft Strassbourgh",
        "s_town": "Strassbourgh"
      },
      {
        "i_customer_m": "11",
        "s_name1": "Baugenossenschaft Wien",
        "s_town": "Wien"
      },
      {
        "i_customer_m": "1",
        "s_name1": "Betzy AG",
        "s_town": "Germering, Oberbayern"
      },
      {
        "i_customer_m": "46",
        "s_name1": "BSG",
        "s_town": "Herrsching am Ammersee"
      },
      {
        "FirstLetter": "B",
        "i_customer_m": "67",
        "s_name1": "BVVS Systemhaus GmbH",
        "s_town": "M\u00fcnchen"
      }
    ]}
  ]
} 
```

谢谢，

# scala - 带有远程 Actor 和持久邮箱的 Akka

> ID：10124458
> 
> 赞同：2
> 
> 时间：2012-04-12T13:21:07.997
> 
> 标签：scala, actor, akka

我想将 Akka 配置为使用带有 redis 持久邮箱的远程参与者，如下所示。

common.conf 文件：

```
 akka {
     actor {
         mailbox {
             redis {
                hostname = "127.0.0.1"
                port = 6379
              }
         }
     provider = "akka.remote.RemoteActorRefProvider"   }

   remote {netty {hostname = "127.0.0.1" }}
} 
```

和我的 application.conf 文件：

```
calculatorActor {include "common"}
remotecreation {
include "common"
akka {
    actor {
      deployment {
        /advancedCalculator {
          router = "round-robin"
          nr-of-instances = 200
          target {
            nodes = ["akka://CalculatorApplication@127.0.0.1:2552"]
          }

        }
      }
    }
    remote.netty.port = 2554
  }
} 
```

这是从 akka-sample-remote 派生的配置。当我运行应用程序时，我看不到任何与 redis 端（持久邮箱！）的连接。Redis 日志仅包含：

```
0 clients connected (0 slaves) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:23:36.290

您必须指定具有正确邮箱类型的调度程序。

来自文档：

```
my-dispatcher {
  mailbox-type = akka.actor.mailbox.RedisBasedMailboxType
} 
```

然后使用此调度程序创建您的演员：

```
val myActor = system.actorOf(Props[MyActor].withDispatcher("my-dispatcher"), name = "myactor") 
```

# c# - 如何检查从文件中读取的字符是否为“/n”？

> ID：10124459
> 
> 赞同：0
> 
> 时间：2012-04-12T13:21:08.157
> 
> 标签：c#, string

嗨，我正在尝试通过文件 grep 并计算行数、每行的最大空格数和最长的行。

如果我通过给定文件的字符槽迭代字符，我如何确定“/ n”字符？

非常感谢。

这是我用于此的代码：

```
 using (StreamReader sr = new StreamReader(p_FileName))
     {

  char currentChar;
  int current_length=0,current_MaximumSpaces=0;
    p_LongestLine=0;
    p_NumOfLines=0;
    p_MaximumSpaces=0;
    while (!sr.EndOfStream){
        currentChar=Convert.ToChar(sr.Read());
        current_length++;
        if(Char.IsWhiteSpace(currentChar) || currentChar==null){
            current_MaximumSpaces++;
        }
        if(currentChar == '\n'){
            p_NumOfLines++;
        }
        if(current_length>p_LongestLine){
            p_LongestLine=current_length;
        }
        if(current_MaximumSpaces>p_MaximumSpaces){
            p_MaximumSpaces=current_MaximumSpaces;
        }
        current_length=0;
        current_MaximumSpaces=0;
    }
    sr.Close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:22:36.630

```
if(currentChar == '\n')
    count++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:39:46.513

您不需要逐个字符：为了您的目的，逐行进行就足够了，并且您可以让 .NET 为您处理与系统相关的换行符作为额外的奖励。

```
int maxLen = -1, maxSpaces = -1;
foreach ( var line in File.ReadLines("c:\\data\\myfile.txt")) {
    maxLen = Math.Max(maxLen, line.Length);
    maxSpaces = Math.Max(maxSpaces, line.Count(c => c == ' '));
} 
```

**编辑**：您的程序不起作用，因为与您检查无关的错误`'\n'`：您将每个字符后的`current_length`and清零`current_MaximumSpaces`，而不是仅在看到换行符时才清除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:28:34.210

尝试比较[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)

```
bool is_newline = currentChar.ToString().Equals(Environment.NewLine); 
```

我猜你换行实际上是`\r\n`（非Unix）结束。您需要跟踪前一个/当前字符并查找`\r\n`或`Environment.NewLine`。

# php - htaccess 重写规则异常

> ID：10124461
> 
> 赞同：0
> 
> 时间：2012-04-12T13:21:25.863
> 
> 标签：php, apache, .htaccess, url-rewriting, rewrite

我有以下代码：

```
RewriteEngine On
RewriteRule ^user/([0-9]+)/([0-9]+)/?$ template.php?user_id=$1&slide=$2 [NC,L,QSA] 
```

所以当我去**www.mydomain.com/user/7/1**它正在工作，并从**www.mydomain.com/template.php?user_id=7&slide=1**

现在我的问题是，如何让幻灯片变量成为可选的。**如果有人输入/user/7/**，我希望它能够工作。

在我的 template.php 文件中，我有：

```
if(!$current_slide) {
    header("Location: user/".$user_id."/1");
} 
```

因此，如果我手动转到 template.php?user_id=1 它会自动重定向到 /user/7/1/ 这很好，它可以工作。但我需要修改我的 htaccess 文件，所以如果有人输入 /user/7/ 它将重定向到 /7/1/

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:23:30.803

```
RewriteRule ^user/([0-9]+)/?([0-9]*)/?$ template.php?user_id=$1&slide=$2 [NC,L,QSA] 
```

# sql - 搜索按钮错误

> ID：10124462
> 
> 赞同：0
> 
> 时间：2012-04-12T13:21:26.493
> 
> 标签：sql, vb.net

我有一个搜索按钮，可以通过在文本框中输入的名称搜索数据库，这在 Visual Studio 中运行良好，但是当尝试在托管版本中使用它时，我收到以下消息：

“/”应用程序中的服务器错误。

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

这个按钮的代码是：

```
 GridView2.Visible = True

    lblEnterName.Text = ""

    If txtLoanName.Text = "" Then

        lblEnterName.Text = "Please enter a Bandie's Name"

    Else

        Dim conn As SqlConnection = Nothing
        Try
            Dim connString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BandDatabase.mdf;Integrated Security=True;User Instance=True"
            conn = New SqlConnection(connString)

            Dim query As String = "SELECT [SongName], [PartLearnt], [Status] FROM [Learning] WHERE ([BandieName] LIKE '%' + @Name + '%') ORDER BY [SongName]"

            Dim cmd As SqlCommand = New SqlCommand(query, conn)
            cmd.Parameters.AddWithValue("@Name", txtLoanName.Text)
            conn.Open()
            Dim dr As SqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
            Dim dt As DataTable = New DataTable()
            dt.Load(dr)
            GridView2.DataSource = dt
            GridView2.DataBind()

            lblSearchBandieName.Text = "Progress for " + txtLoanName.Text

        Finally
            conn.Close()
        End Try

    End If 
```

我不确定为什么这会带来以前没有的错误，我所做的只是更改了按钮所在的页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:18:53.420

您是否检查了连接字符串中的信息？可能不是托管解决方案上的 sqlexpres。此外，您可能希望在 web.config 中有连接信息

现在作为答案....:-)

# couchdb - Apache CouchDb 和移动功能

> ID：10124465
> 
> 赞同：4
> 
> 时间：2012-04-12T13:21:30.343
> 
> 标签：couchdb

如果我有一个 couchdb 服务器可以从移动平台输入信息并且可能会脱机。我必须在移动平台上安装另一个数据库实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:20:38.267

如果您想要无缝的离线功能，那么 CouchDB 是您的最佳选择。您可以在设备和云服务器上安装兼容的 CouchDB 版本，并使用 Couch 强大的复制能力来统治世界，而您的用户仍然很高兴地没有意识到他们的电信公司稳定性差。

# telerik - DNN 的 HTML 编辑器

> ID：10124467
> 
> 赞同：1
> 
> 时间：2012-04-12T13:21:32.830
> 
> 标签：telerik, ckeditor, dotnetnuke, fckeditor, radeditor

我需要一个 html 编辑器，因为 DNN 6 提供的那个不工作。radeditor 不会显示我从文件系统复制到 DNN 门户安装的子文件夹或图像。文档管理器也不起作用，只是显示为白色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:24:30.450

看看 Will Strohl 的这篇博文是否有助于解决您的问题。

[http://www.dotnetnuke.com/Resources/Blogs/EntryId/3021/No-Folders-in-DotNetNuke-RadEditor-Image-Manager.aspx](http://www.dotnetnuke.com/Resources/Blogs/EntryId/3021/No-Folders-in-DotNetNuke-RadEditor-Image-Manager.aspx)

# hibernate - 用于获取单个树中所有节点的 JPA 查询

> ID：10124468
> 
> 赞同：5
> 
> 时间：2012-04-12T13:21:34.220
> 
> 标签：hibernate, tree, jpa-2.0

我有存储在数据库表中的树结构。该表可以存储多棵树。我需要一个查询，它将返回**单个**树中的所有节点。我使用以下站点作为资源，但其中的查询会将所有树的所有节点加载到 PersistenceContext 中（不是加载整个表吗？）。我不想这样做，我只想加载一棵树。我如何做到这一点？

我使用 JPA 2 和 Hibernate 作为提供者。

[OpenJPA 1.2.x 使用 JPQL](https://stackoverflow.com/questions/4110699/openjpa-1-2-x-select-tree-structure-using-jpql)
[http://www.tikalk.com/java/load-a-tree-with-jpa-and-hibernate#comment-1821选择树结构](http://www.tikalk.com/java/load-a-tree-with-jpa-and-hibernate#comment-1821)

[更新] 根据@bennidi 的建议，我想知道我是否可以使用这样的东西：

```
@Entity
public class Node {

    private String name;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "rootId")
    private Node root;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "parentId")
    private Node parent;

    @OneToMany(mappedBy = "parent", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @OrderBy("name")
    private List<Node> children = new LinkedList<Node>();
} 
```

JPQL 查询：

```
select distinct n from Node n left join fetch n.children where n.rootId = ROOT_ID 
```

[不过，我确实有一个问题，我是否应该像本文](http://www.codeproject.com/Articles/8355/Trees-in-SQL-databases)中那样创建第二个表来维护父子关系，或者如果我只使用自引用表就可以了。使用前者似乎需要更多的维护，并且可能需要更复杂的查询。这值得么？我不确定这篇文章解决了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:32:00.250

我认为在关系数据库中存储递归结构是不自然的。此外，您的问题的答案将取决于您选择为节点和树建模的模式。如果您有一个将父子关系作为外键保存的自引用节点表，则无法通过一次查询选择作为特定节点的子节点的所有节点。我认为你应该为每棵树都有一个表，并让每个节点引用它的树。然后您可以简单地选择特定树的所有节点并通过分析节点创建树结构。

看看这篇文章： http: [//www.codeproject.com/Articles/8355/Trees-in-SQL-databases](http://www.codeproject.com/Articles/8355/Trees-in-SQL-databases)

# vb.net - 当我在 Visual Basic .net 中遇到间歇性异常（在 Visual Studio Express 2010 中调试）时，我应该考虑什么？

> ID：10124471
> 
> 赞同：0
> 
> 时间：2012-04-12T13:21:45.170
> 
> 标签：vb.net, debugging, exception, visual-studio-express, intermittent

我正在通过在 Visual Studio express 中运行它来测试我的 Visual Basic .net 应用程序。

有时它运行正常，但有时我会遇到异常（如果有用，请参阅下面的详细信息）。我不确定为什么会出现异常，因为我正在测试的应用程序的特定部分重用了适用于其他功能的代码。

我应该检查什么，什么会给我关于根本原因的提示。

到目前为止我尝试过的事情是：

*   重写一些代码以使其更健壮。结果是这种方法失去了控制——我正在纠正一切。我进行了更改，例如替代库（例如用 convertTo 替换 CInt 等）。一些懒惰的声明，但我想到在我更改之前这些代码没有问题。我似乎解决的每一个变化都发现了另一个问题，另一个不同的例外
*   所以我认为我的安装肯定有根本性的问题，并且搜索发现了来自经历类似情况的人的讨论组帖子。建议的补救措施是重新安装 .net 框架。所以我这样做了，问题仍然存在。

关于解决问题根源的方法有什么想法吗？我不是在寻求解决方案，但非常欢迎一些新的想法。

**更新：**

我添加了以下代码以获取更多详细信息（+1 感谢@Meta-Knight）

```
 Dim exceptionMessage As String = ex.Message
        Console.WriteLine("Message: \n" & exceptionMessage)
        Dim exceptionTargetSite As String = ex.TargetSite.ToString
        Console.WriteLine("Inner: \n" & ex.TargetSite.ToString)
        Dim exceptionSource As String = ex.Source
        Console.WriteLine("Source\n:" & exceptionSource)
        ' put the stack trace into a variable
        ' (this helps debugging - put a break point after this is assigned
        ' to see the contents)
        Dim stackTrace As String = ex.StackTrace.ToString()
        Console.WriteLine("Stack trace\n:" & stackTrace) 
```

**有关异常的更多详细信息**

错误 - 异常消息“算术运算导致溢出。”

异常目标站点：“Int32 ToInteger(System.String)”

异常来源：“Microsoft.VisualBasic”

> 在 Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) 在 MyCo_3rd-Party-Industrial-Printing-System.Customer_EanUpc_serialNumberGeneratorAssembly.btnPrint_Click(Object sender, EventArgs e) 在 C:\labelprint\MyCo 3rd-Party-Industrial-Printing- System v2\MyCo 3rd-Party-Industrial-Printing-System\PrintForms\Customer_EanUpc_serialNumberGeneratorAssembly.vb：System.Windows.Forms.Control.OnClick(EventArgs e) 处 System.Windows.Forms.Button.OnClick(EventArgs e) 处的第 271 行在 System.Windows.Forms.Button.PerformClick() 在 System.Windows.Forms.Form.ProcessDialogKey(Keys keyData) 在 System.Windows.Forms.Control.ProcessDialogKey(Keys keyData) 在 System.Windows.Forms.Control.PreProcessMessage （消息和消息）在 System.Windows.Forms.Control.PreProcessControlMessageInternal（控制目标，消息和msg) 在 System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG& msg) 在 System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FPreTranslateMessage(MSG& msg) 在 System.Windows.Forms .Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData) 在 System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context) 在 System.Windows。 Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context) at System.Windows.Forms.Application.RunDialog(Form form) at System.Windows.Forms.Form.ShowDialog(IWin32Window owner) at System.Windows.Forms.Form .ShowDialog() at MyCo_3rd-Party-Industrial-Printing-System.utlForm.openNewModalForm(String form) 在 C:\labelprint\MyCo 3rd-Party-Industrial-Printing-System v2\MyCo 3rd-Party-Industrial-Printing-System\实用程序\utlForm.vb：第 128 行

**更新 2：**

第 272 行的代码是：

```
 For i As Integer = 1 To CInt(numQuantity)
            If generationMethods() Then 
```

第 272 行的代码现在是（我已经调整过）：

```
 Dim numQuantityAsStr As String = numQuantity.Text
        Dim numQuantityAsInt As Integer = Convert.ToInt32(numQuantityAsStr)
        For i As Integer = 1 To numQuantityAsInt
            If generationMethods() Then 
```

`numQuantity`是我正在使用的 Windows 表单中字段的字符串变量，它有一个用户输入的值，该字段用于指定某物的数量，因此该变量被转换为整数，以便可以使用在一个 for 循环中。我使用的测试值总是在这个字段中输入 1，有时这会导致异常。

我的更改使用了我认为更现代的类型转换`Convert.ToInt32`，而不是`CInt`我还引入了中间步骤来帮助调试。

现在这里没有发生异常，但我确实在前一周尝试了这个，另一个单独的异常从其他地方弹出（如果我记得的话），所以我们会看看这是否能解决它。关于为什么使用不同的转换实用程序可以解决问题的任何想法？

**更新 3：** 现在其他地方出现异常：（但是为什么？！这是从库代码中抛出的！）

以下代码导致它：

```
Dim dateNowAsStr As String = DateTime.Now.Date.ToString 
```

异常消息：“要添加的值超出范围。参数名称：值”

异常目标站点：“System.DateTime Add(Double, Int32)”

异常来源：“mscorlib”

" 在 System.TimeZoneInfo.GetDaylightTime(Int32 年，AdjustmentRule 规则) 在 System.TimeZoneInfo.GetIsDaylightSavingsFromUtc(DateTime time, Int32 年，TimeSpan utc，AdjustmentRule 规则，Boolean& isAmbiguousLocalDst) at System.TimeZoneInfo.GetDateTimeNowUtcOffsetFromUtc(DateTime time, Boolean& isAmbiguousLocalDst) at System.DateTime.get_Now() at GenerationLibrary.GenerationUtilities.callserialNumberGenerator(String serialNumberGeneratorSnFile, String serialNumberGeneratorRange, DefaultSettingsHandler 设置) C:\labelprint\MyCo 3rd-Party-Industrial-Printing-System v2\GenerationLibrary\GenerationUtilities.vb：GenerationLibrary.MyCoSnGeneration 的第 28 行。C:\labelprint\MyCo 3rd-Party-Industrial-Printing-System v2\GenerationLibrary\MyCoSnGeneration.vb：第 18 行中的constructMyCoSn(DataRow& oDataRow, DefaultSettingsHandler& settings)：MyCo_3rd-Party-Industrial-Printing-System.Customer_EanUpc_serialNumberGeneratorAssembly.generationMethods()在 C:\labelprint\MyCo 3rd-Party-Industrial-Printing-System v2\MyCo 3rd-Party-Industrial-Printing-System\PrintForms\Customer_EanUpc_serialNumberGeneratorAssembly.vb：MyCo_3rd-Party-Industrial-Printing-System.Customer_EanUpc_serialNumberGeneratorAssembly 的第 40 行。 btnPrint_Click(Object sender, EventArgs e) 在 C:\labelprint\MyCo 3rd-Party-Industrial-Printing-System v2\MyCo 3rd-Party-Industrial-Printing-System\PrintForms\Customer_EanUpc_serialNumberGeneratorAssembly.vb：System.Windows 的第 275 行。系统中的 Forms.Control.OnClick(EventArgs e)。Windows.Forms.Button.OnClick(EventArgs e) 在 System.Windows.Forms.Button.PerformClick() 在 System.Windows.Forms.Form.ProcessDialogKey(Keys keyData) 在 System.Windows.Forms.Control.ProcessDialogKey(Keys keyData ) 在 System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG& msg) 在 System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG& msg) 在 System.Windows.Forms.Control.PreProcessControlMessageInternal(Control target, Message& msg) 在 System.Windows.Forms.Control.PreProcessMessage(Message& msg) .Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FPreTranslateMessage(MSG& msg) 在 System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 原因，Int32 pvLoopData) 在 System.Windows.Forms.Application。System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context) 在 System.Windows.Forms.Application.RunDialog(Form form) 在 System.Windows.Forms 的 ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)。 Form.ShowDialog(IWin32Window owner) at System.Windows.Forms.Form.ShowDialog() at MyCo_3rd-Party-Industrial-Printing-System.utlForm.openNewModalForm(String form) in C:\labelprint\MyCo 3rd-Party-Industrial-打印系统 v2\MyCo 3rd-Party-Industrial-Printing-System\Utilities\utlForm.vb:line 128"Form.ShowDialog(IWin32Window owner) at System.Windows.Forms.Form.ShowDialog() at MyCo_3rd-Party-Industrial-Printing-System.utlForm.openNewModalForm(String form) in C:\labelprint\MyCo 3rd-Party-Industrial-打印系统 v2\MyCo 3rd-Party-Industrial-Printing-System\Utilities\utlForm.vb:line 128"Form.ShowDialog(IWin32Window owner) at System.Windows.Forms.Form.ShowDialog() at MyCo_3rd-Party-Industrial-Printing-System.utlForm.openNewModalForm(String form) in C:\labelprint\MyCo 3rd-Party-Industrial-打印系统 v2\MyCo 3rd-Party-Industrial-Printing-System\Utilities\utlForm.vb:line 128"

**更新 4**

但

```
Dim dateNowAsStr As String = CStr(DateTime.Now) 
```

不会导致异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:30:20.080

我认为您可以先查看 Customer_EanUpc_serialNumberGeneratorAssembly.vb 源代码文件第 271 行的内容。位于：C:\labelprint\MyCo 3rd-Party-Industrial-Printing-System v2\MyCo 3rd-Party-Industrial-Printing-System\PrintForms\ 目录。

看起来问题与字符串到整数之间的转换有关，可能它失败了，因为字符串无法转换为整数......也许它有字母数字字符......“Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value )"

你已经检查了吗？

为什么您有时会收到错误但并不总是因为（我在这里猜测）serialNumberGeneratorAssembly 中的代码有时会生成仅数字值（可以正确转换为整数），而其他一些时候会生成字母数字序列号（抛出转换例外）。

**更新**：生成序列号的代码正在生成大于整数值的数字。尝试转换为 Long 而不是 Integer... 或查看 System.Numerics.BigInteger 以防这些数字太大。这解释了：“算术运算导致溢出。” 异常消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:32:33.757

在重写或重新安装任何东西之前，您应该尝试确定错误的来源和原因。

首先要做的是分析错误消息和堆栈跟踪。如果您在应用程序的文件中包含调试文件 (.pdb)，您将获得更详细的信息，例如行号，这会很有帮助。

如果这不能提供有关错误情况的足够信息，那么您可以向您的应用程序添加一些日志记录。通过记录用户在您的应用中所做的事情，可能有助于重现问题。

最后，您始终可以通过在 google 上搜索或在 StackOverflow 上询问来获得帮助，但请确保包含实际的错误消息，而不仅仅是堆栈跟踪......您还应该发布错误发生的代码。

**编辑：**

所以实际的错误是：“算术运算导致溢出。”

谷歌搜索会有所帮助：您会发现当您尝试转换超出整数范围的数字时会发生这样的错误。如果您希望有一些非常大的数字，您可以尝试转换为`Long`。

# ruby-on-rails - 在Rails中对具有多个字段的数组进行排序

> ID：10124477
> 
> 赞同：1
> 
> 时间：2012-04-12T13:21:58.513
> 
> 标签：ruby-on-rails

考虑下面的哈希

```
[
{:rank => 3, :time => "3.00 AM" , :name => "JJJ"},
{:rank => 1, :time => "3.05 AM" , :name => "AAA"},
{:rank => 5, :time => "2.55 AM" , :name => "XXX"},
{:rank => 2, :time => "3.10 AM" , :name => "BBB"}
] 
```

我如何按顺序对字段进行排序，以便我将像查询一样获得结果
**（考虑我们是否从表中获取 has 中的值）**

```
select * from my_table order by rank, time, name 
```

如果我不清楚，请发表评论。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:26:46.070

```
a = [
{:rank => 3, :time => "3.00 AM" , :name => "JJJ"},
{:rank => 1, :time => "3.05 AM" , :name => "AAA"},
{:rank => 5, :time => "2.55 AM" , :name => "XXX"},
{:rank => 2, :time => "3.10 AM" , :name => "BBB"}
]
res = a.sort_by{|t| [t[:rank], t[:time], t[:name]]} 
```

# java - Mockito：是否可以将 mock 与方法名称结合起来在 when() 调用中创建 methodCall？

> ID：10124482
> 
> 赞同：7
> 
> 时间：2012-04-12T13:22:19.950
> 
> 标签：java, class, reflection, methods, mockito

我在 StackOverflow 上的第一个问题。我希望能够做类似的事情：

**SomeClass 模拟 = 模拟（SomeClass.class）；**

**String methodName = "someMethod"; 或方法方法 = ...someMethod...**

这两件事（模拟和方法）将结合起来执行以下操作：

**when(mock.someMethod()).thenReturn(null);**

当然，“null”值将根据我的需要进行相应更改，但我试图确定两件事：

1）在Java中 甚至可以做这样**的事情吗？****这**= 将一个类对象和一个方法组合成一个方法调用。

2）我该怎么做这样的事情？

我已经无休止地研究了这个，我找不到任何东西。问题是，即使这适用于常规类和常规方法（someClass 和 someMethod 将一起执行 someClass.someMethod()），请记住，这必须与**模拟对象**一起使用，以便在 when( ） 称呼。

答案：when(method.invoke(mock)).thenReturn("Hello world."); 是正确的语法，反射确实在 when() 调用中起作用。谢谢凯文韦尔克！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T21:09:21.400

由于您基本上要求我重新发布我的评论，并根据您的回复进行修改，作为答案，这里是：

尝试使用反射，如：

```
when(method.invoke(mock)).thenReturn("Hello world."); 
```

虽然，我不确定这对你有什么用，因为你不能模拟/间谍类`Method`（它是最终的）。Mockito`when()`仅适用于模拟或间谍。如果这真的对你有用，你能发布更多细节吗？

如果它不起作用，您可以 - 正如我在 OP 中的评论中所建议的那样 - 走 CGLib 路线并绕过 Mockito。这实际上并不像最初看起来那么困难。在我的 OSS 项目[Funcito](http://funcito.googlecode.com)（*不是*模拟框架）中，我剥离了很多 Mockito CGLib 代理代码，并根据我的需要重写了它。它为代理类和拦截方法调用的世界提供了一个更简单的视图。

**对评论的补充回复** 我知道这对你有什么作用，但我不确定你是否真的理解它是如何工作的。这可能很重要的原因是，未来对 Mockito 本身工作方式的更改可能会导致您的解决方案在未来被破坏。从本质上讲，它起作用的原因几乎是偶然的，但是是的，它会起作用。

应该起作用的方式`when()`是括号之间发生的是对先前创建的 Mockito 生成的模拟或间谍的方法调用，这只是一个类的精美代理，而不是该类的真实实例。代理具有特殊的逻辑来拦截假代理方法调用，并将其添加到已注册代理方法调用的列表中（它存储在称为 an`IOngoingStubbing`或类似的东西中）以供以后使用。由于 Java 在调用方法之前评估参数，这保证了代理方法调用在`when()`方法实际执行之前被注册/记住。所做的`when()`是弹出这个 IOngoingStubbing，然后它成为`thenReturns()`被调用的对象。

您没有“正确”使用它，但它仍然对您有用。如何？好吧，所要做的就是需要调用代理上的方法才能在执行`IOngoingStubbing`之前注册`when()`。您不是*直接*在代理上调用方法，而是通过将代理传递给`Method.invoke()`. 因此满足条件，并且`when()`已经在`IOngoingStubbing`.

你可以在下面的代码中看到同样的“意外”快乐，在你意识到 Mockito 是如何工作的之前，这似乎是没有意义的：

```
@Test
public void testSomething() throws Exception {
    List listMock = mock(List.class);
    Method m = List.class.getDeclaredMethod("get", int.class);
    m.invoke(listMock, Mockito.anyInt());

    when(null).thenReturn("Hello World");  // Huh? passing null?

    assertEquals("Hello World", listMock.get(0)); // works!
} 
```

上面的测试居然通过了！即使参数`when`为空，重要的是代理（即模拟）实例在调用`when`语句之前调用了正确的方法。

虽然 Mockito 不太可能改变事情在幕后工作的基本方式，但仍有可能在未来的某个时候为你打破。就像我说的，它起作用或多或少是一个快乐的意外。只要您了解它的工作方式和所涉及的风险，您就有更多的权力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:29:43.480

我认为，只要在提供给 Mockito 的接口或类中没有指定方法，在类初始化之后添加新方法是不可能的。您将在初始化后更改类签名，这是不可能的。

对于存根方法调用，请查看：[http](http://code.google.com/p/mockito/) ://code.google.com/p/mockito/ 。有一个关于存根方法调用的示例。

如果您想获得动态答案，而不是静态答案，则不应使用 Mockito。使用假对象或存根来获取测试行为。有关此问题的详细信息，请参阅：[http ://martinfowler.com/articles/mocksArentStubs.html。](http://martinfowler.com/articles/mocksArentStubs.html)

# java - 将 ORB 访问到实现中？

> ID：10124487
> 
> 赞同：1
> 
> 时间：2012-04-12T13:22:41.513
> 
> 标签：java, corba

我有一个棘手的问题。作为 CORBA 的新手，我无法摆脱它。

如何从另一个实现实例化一个实现对象？

通常，如果我有一个接口 A。我会创建一个 A_Impl 类（在 A_Impl.java 文件中），从 idl 生成的 A_POA 类扩展。

然后，在服务器端我会做这样的事情：

```
AImpl  my_a_impl = new A_Impl ();
org.omg.CORBA.Object ref = orb.activate_object(my_a_impl);
A my_a_object = A.narrow(ref); 
```

但是当另一个对象 B 的方法之一需要返回 A 时怎么办？

在我的 B_impl 类中，我无权访问 orb，因此无法使用 activate_object 方法获取对我的对象的引用。

那么我怎样才能返回这样的对象？

任何帮助将不胜感激。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:31:15.000

CORBA 已经提供了一个可以用来获取现有 ORB 引用的函数 - `ORB_init()`. 对于大多数 ORB，该函数的行为类似于单例并且将返回一个现有的 ORB 对象，假设您每次调用它时使用相同的 ORB ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:21:08.410

在单例类中引用当前活动的球体，您可以从非常 object 访问`*_Impl`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:39:20.537

似乎（出于我无法理解的原因），构造函数不是由 idl 生成的。创建构造函数允许我简单地将对象作为引用传递，并使它们对我的类可见。是的……就这么简单:)

# wcf - Json.net 无法反序列化复杂类型列表

> ID：10124502
> 
> 赞同：2
> 
> 时间：2012-04-12T13:23:47.247
> 
> 标签：wcf, json.net, wcf-rest

我正在使用 json.net 在 IIS 托管的 restful 服务中执行处理我的 json 反序列化。

首先，这是我正在尝试使用的对象。

```
[DataContract]
public class CreateSamplesRequest
{
    [DataMember] public Guid SessionId { get; set; }
    [DataMember] public SampleTemplateDTO Template { get; set; }
}
[DataContract]
public class SampleTemplateDTO
{
    [DataMember] public int NumberOfSamples { get; set; }
    [DataMember] public int CompanyId { get; set; }
    [DataMember] public int SampleTypeId { get; set; }
    [DataMember] public HmisDTO Hmis { get; set; }
    [DataMember] public List<AttributeValueDTO> AttributeValues { get; set; }   
}
[DataContract]
public class AttributeValueDTO
{
    [DataMember] public int AttributeId { get; set; }
    [DataMember] public string AttributeName { get; set; }
    [DataMember] public string Value { get; set; }
}

[DataContract]
public class HmisDTO
{
    [DataMember] public string Health { get; set; }
    [DataMember] public string Flammability { get; set; }
    [DataMember] public string Reactivity { get; set; }
    [DataMember] public string Equipment { get; set; }
} 
```

帮助页面要求为 CreateSamplesRequest 提供这种格式的 json

```
{
 "SessionId":"1627aea5-8e0a-4371-9022-9b504344e724",
 "Template":{
    "NumberOfSamples":2147483647,
    "CompanyId":2147483647,
    "SampleTypeId":2147483647,
    "Hmis":{
        "Health":"String content",
        "Flammability":"String content",
        "Reactivity":"String content",
        "Equipment":"String content"
    },
    "AttributeValues":[{
        "AttributeId":2147483647,
        "AttributeName":"String content",
        "Value":"String content"
    }]
  }
} 
```

这就是我实际发送的内容：

```
{
 "SessionId":"17aaec11-be28-4536-b5df-d98fbda91e91",
 "Template":{
    "NumberOfSamples":1,
    "CompanyId":1,
    "SampleTypeId":9,
    "Hmis":{
        "Health":"2",
        "Flammability":"0",
        "Reactivity":"0",
        "Equipment":"E",
    },
   "AttributeValues":[
      {"AttributeId":1,"AttributeName":"Item No.","Value":"MN0002NG"},
      {"AttributeId":2,"AttributeName":"Lot No.","Value":"C4526"}
    ]
 }
} 
```

我遇到的问题是 SampleTemplateDTO 对象的 AttributeValues 属性总是最终被忽略。使用上面的代码，它将为空。如果我将它实例化为空`List<AttributeValueDTO>`，它将是一个空列表。几个小时以来，我一直在努力解决这个问题。

我试过创建一个只需要 a 的服务，`List<AttributeValueDTO>`它工作正常。我尝试为 AttributeValues 创建一个包装类，但它仍然以 null 结束。我完全被难住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:39:05.753

上帝的母亲，我刚刚在一个该死的逗号上浪费了 5 个该死的小时。HMIS 部分中的尾随逗号显然是在告诉 json.net 在该点停止解析。

当我提交这个 json 时：

```
{
 "SessionId":"17aaec11-be28-4536-b5df-d98fbda91e91",
 "Template":{
  "NumberOfSamples":1,
  "CompanyId":1,
  "SampleTypeId":9,
  "Hmis":{
    "Health":"2",
    "Flammability":"0",
    "Reactivity":"0",
    "Equipment":"E"
  },    
  "AttributeValues":[
   {"AttributeId":1,"AttributeName":"Item No.","Value":"MN0002NG"},
   {"AttributeId":2,"AttributeName":"Lot No.","Value":"C4526"}
  ]     
 }
} 
```

一切都很好。

# symfony - 实现 Symfony2 单点登录

> ID：10124509
> 
> 赞同：16
> 
> 时间：2012-04-12T13:24:11.950
> 
> 标签：symfony, single-sign-on

我对Symfony2中的[安全概念](http://symfony.com/doc/current/book/security.html)有了基本的了解。现在我正在尝试为多域网站实现单点登录功能。

SSO 概念本身相当简单：

*   域 A 是 cookie 域；人们可以登录此域
*   在域 B 上登录时，用户将被重定向到域 A，其中需要[一次性密码](http://en.wikipedia.org/wiki/One-time_password)。用户需要域 A 上的会话才能获取此密码。
*   获取 OTP 后，将用户返回到域 B，它将 OTP 与域 A 上的会话匹配。
*   如果匹配，将为域 B 创建一个会话。对于从此时起的每个后续请求，该会话将针对域 A 上的会话进行验证。

可以像往常一样为域 A 实施防火墙/身份验证。据我了解，我需要：

*   为域 B 设置防火墙
*   为该防火墙创建一个侦听器，以某种方式将用户重定向到域 A（更具体地说：请求 OTP 的 uri）
*   创建处理 OTP 并为域 B 创建会话的[身份验证提供程序](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)
*   创建另一个侦听器，根据域 A 上的会话检查会话有效性

但是，我真的可以使用一些技巧来说明如何在捆绑中执行此操作。如果有人可以在这里帮助我，那就太好了。

另外，我还不确定如何实现 OTP，或者如何比较两个会话，并确保它们都是有效的。稍后会出现，我需要先让这个工作流程正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:50:15.217

In order to get multidomain SSO you can implement a SAML solution. Take a look on simplesamlphp software and in this extension for symfony1 [https://github.com/chtitux/sfSAMLPlugin](https://github.com/chtitux/sfSAMLPlugin)

To resolve the OTP issue you can use for example LinOTP2 witch is compatible with simplesamlphp: [https://github.com/lsexperts/simplesamlphp-linotp](https://github.com/lsexperts/simplesamlphp-linotp)

# objective-c - BarAlarm iOS 应用程序是如何制作的？

> ID：10124515
> 
> 赞同：2
> 
> 时间：2012-04-12T13:25:00.997
> 
> 标签：objective-c, ios, private, signals

> **可能重复：**
> [以编程方式测量 iPhone 设备中运营商的信号强度](https://stackoverflow.com/questions/4954389/programatically-measuring-carriers-signal-strength-in-iphone-device)

我正在为 iOS 创建一个应该能够从设备获取信号强度的应用程序。我知道使用私有 API 是可能的，但是我想将来在应用商店中发布这个应用程序，所以在这种情况下我不能使用任何私有 API。

商店里有一个应用程序能够以条形显示信号强度水平，这对我来说也足够了。该应用程序是这个：

[http://itunes.apple.com/us/app/baralarm/id364878555?mt=8](http://itunes.apple.com/us/app/baralarm/id364878555?mt=8)

我的问题是，如果不使用私有 API，我找不到任何方法来实现这种功能，但由于 Apple 已经接受了 BarAlarm 到商店，它应该是可能的。

简而言之：iOS 应用程序如何在不使用私有 API 的情况下获取信号强度、条级别的事件？

# google-docs-api - Google Docs：无法在 python 中使用管理访问/模拟（禁止 403）导出/下载用户的文档

> ID：10124516
> 
> 赞同：1
> 
> 时间：2012-04-12T13:25:01.447
> 
> 标签：google-docs-api

我已经彻底阅读了这篇文章：[https](https://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users) ://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users 我已经用谷歌搜索死了。

到目前为止，我已经能够：

1.  授权：

    *   客户登录
    *   OAuth 令牌（使用我的域密钥）
2.  为域中的所有用户检索文档提要（在 #1 中以任一方式授权）
    我正在使用提要中的“条目”来导出/下载文档，并且对于未与管理员共享的文档，其他用户总是被禁止。我正在使用的提要查询是这样的：（ `https://docs.google.com/feeds/userid@mydomain.com/private/full/?v=3` 我尝试过使用和不使用 ?v=3）

我还尝试在 uri 和客户端属性中添加 xoauth_requestor_id（我在帖子中也看到了 xoauth_requestor）：`client.xoauth_requestor_id = ...`

代码片段：

客户端登录（使用管理员凭据）：

```
client.http_client.debug = cfg.get('HTTPDEBUG')
client.ClientLogin( cfg.get('ADMINUSER'), cfg.get('ADMINPASS'), 'HOSTED' ) 
```

认证：

```
client.http_client.debug = cfg.get('HTTPDEBUG')
client.SetOAuthInputParameters( gdata.auth.OAuthSignatureMethod.HMAC_SHA1, cfg.get('DOMAIN'), cfg.get('APPS.SECRET') )
oatip = gdata.auth.OAuthInputParams( gdata.auth.OAuthSignatureMethod.HMAC_SHA1, cfg.get('DOMAIN'), cfg.get('APPS.SECRET') )
oat = gdata.auth.OAuthToken( scopes = cfg.get('APPS.%s.SCOPES' % section), oauth_input_params = oatip )
oat.set_token_string( cfg.get('APPS.%s.TOKEN' % section) )
client.current_token = oat 
```

检索到提要后：

```
# pathname eg whatever.doc
client.Export(entry, pathname)
# have also tried
client.Export(entry, pathname, extra_params = { 'v': 3 } )
# and tried
client.Export(entry, pathname, extra_params = { 'v': 3, 'xoauth_requestor_id': 'admin@mydomain.com' } ) 
```

关于我在这里缺少什么的任何建议或指示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:27:54.113

您非常接近正确实施。在上面的示例中，您有：

```
client.Export(entry, pathname, extra_params = { 'v': 3, 'xoauth_requestor_id': 'admin@mydomain.com' } ) 
```

xoauth_requestor_id 必须设置为您要模拟的用户。您还需要在令牌或客户端中使用带有 xoauth_requestor_id 设置的 2-Legged OAuth 1.0a。

```
import gdata.docs.client
import gdata.gauth

import tempfile

# Replace with values from your Google Apps domain admin console
CONSUMER_KEY = ''
CONSUMER_SECRET = ''

# Set this to the user you're impersonating, NOT the admin user
username = 'userid@mydomain.com'
destination = tempfile.mkstemp()

token = gdata.gauth.TwoLeggedOAuthHmacToken(
    consumer_key, consumer_secret, username)
# Setting xoauth_requestor_id in the DocsClient constructor is not required
# because we set it in the token above, but I'm showing it here in case your
# token is constructed via some other mechanism and you need another way to
# set xoauth_requestor_id.
client = gdata.docs.client.DocsClient(
    auth_token=token, xoauth_requestor_id=username)
# Replace this with the resource your application needs
resource = client.GetAllResources()[0]
client.DownloadResource(resource, path)
print 'Downloaded %s to %s' % (resource.title.text, destination) 
```

这是 TwoLeggedOAuthHmacToken 类的源代码中的引用：

1.  [http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py#1062](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py#1062)

以下是源代码中提供 xoauth_requestor_id 构造函数参数的引用（按顺序阅读）：

1.  [http://code.google.com/p/gdata-python-client/source/browse/src/atom/client.py#42](http://code.google.com/p/gdata-python-client/source/browse/src/atom/client.py#42)
2.  [http://code.google.com/p/gdata-python-client/source/browse/src/atom/client.py#179](http://code.google.com/p/gdata-python-client/source/browse/src/atom/client.py#179)
3.  [http://code.google.com/p/gdata-python-client/source/browse/src/gdata/client.py#136](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/client.py#136)

# c++ - C++：.bmp 到文件中的字节数组

> ID：10124517
> 
> 赞同：2
> 
> 时间：2012-04-12T13:25:05.223
> 
> 标签：c++, arrays, bmp

是的，我已经解决了与此相关的其他问题，但我发现它们没有多大帮助。他们有一些帮助，但我还是有点困惑。所以这里我需要做什么：

我们有一个 132x65 的屏幕。我有一个 132x65 的 .bmp。我想通过 .bmp 并将其分成小的 1x8 列，以获得该 32 位列的二进制文件。然后做 132 次，然后做 9 次。任何不是白色的东西都应该算作一点点。例子：

如果图片的左上角像素是任何非白色的颜色，而下面的 7 个像素是白色的，那么这将是数组的第一个元素，即该数字的十六进制，所以数组看起来像这样：数组 [ ] = { 0x01 } 然后它将继续填充这 132 列，然后对 9 个“部分”行再次执行此操作。并且文件结果将只是单独文件中的那个数组。

我了解此标题格式，我已阅读有关 .bmp 文件格式的 wiki 文章，我的主要问题是我真的不知道如何与 .bmp 进行交互，而我实际上希望它进入并与每个像素进行交互从图像。我真的不需要整个东西，但也许只是从 .bmp 中获取每个像素并将像素的颜色输出到文件或其他内容中的示例。我的 c++ 有点生疏（最近一直在做 java 和 javscript）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:28:50.920

如果您想读取已知格式的 BMP 并且不关心它是如何完成的（即，仅限内部的事情），您可以只使用 BMP，忽略标题并将其用作像素数组。它从左下角开始逐行存储。它的包装方式有一些细节问题，但根据我的经验，如果您拍摄 32bpp 图像，则可以完全忽略它。

作为一个非常简单的例子：

```
unsigned int *buffer;
void readfile() {
    FILE *f = fopen("file.bmp", "rb");
    buffer = new unsigned int[132*65];
    fseek(f, 54);
    fread(buffer, 132*65*4, 1, f);
    fclose(f);
}

unsigned int getpixel(int x, int y) {
    //assuming your x/y starts from top left, like I usually do
    return buffer[(64 - y) * 132 + x];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:44:44.887

我遇到了同样的问题，但是通过阅读 BMP 文件格式描述，我编写了一个函数来读取 .BMP 文件并将其存储到数组中。也许这个功能可以帮助你：

```
unsigned int PIC::BinToNum(char *b,int bytes)
{
    unsigned int tmpx = 0;
    unsigned int pw = 1;
    for(int i=0;i<bytes;i++)
    {
        tmpx += ((unsigned char)b[i]* pw);
        pw = pw * 256;
    }
    return tmpx;
}

int PIC::Open(const char *path)
{
    int pad = 0;
    unsigned int sof = 0;
    unsigned int tx = 0;
    char tmp[4] = {0,0,0,0};
    fstream file;
    file.open(path,ios::in);
    if(file.fail())
    {
        width=height=ColorBits=size=0;
        return -1;
    }
    else
    {
        file.seekg(0,ios::beg);
        file.read(tmp,2);
        if(!(tmp[0] == 66 && tmp[1] == 77))
        {
            width=height=ColorBits=size=0;
            return 0;
        }
        else
        {
            file.seekg(2,ios::beg); // 0x2 size
            file.read(tmp,4);
            size = BinToNum(tmp,4);
            file.seekg(18,ios::beg); // 0x12 width
            file.read(tmp,4);
            width = BinToNum(tmp,4);
            file.seekg(22,ios::beg); // 0x16 height
            file.read(tmp,4);
            height = BinToNum(tmp,4);
            file.seekg(28,ios::beg); // 0x1C Bits per Pixel
            file.read(tmp,2);
            ColorBits = BinToNum(tmp,2);
            file.seekg(10,ios::beg); // 0x0A start offset
            file.read(tmp,4);
            sof=BinToNum(tmp,4);
            file.seekg(34,ios::beg); // 0x22 Padding
            file.read(tmp,4);
            pad = BinToNum(tmp,4);
            pad = (int)(pad / height); // Compute Spacing in each row
            pad = pad - (width*ColorBits/8);

            // Initialize Matrix//
            matrix = new(unsigned int[height*width]);

            for(int h=height-1;h>=0;h--)
            {
                for(int w=0;w<=width-1;w++)
                {
                    file.seekg(sof,ios::beg);
                    file.read(tmp,(int)(ColorBits/8));
                    tx = BinToNum(tmp,(int)(ColorBits/8));
                    matrix[(h*width)+w] = tx;
                    sof+=(int)(ColorBits/8);
                }
                sof +=pad;
            }
        }
    }
    file.close();
    return 1;
}

Note:This functions is member of a class that i named it "PIC"... 
```

# gcc - LMA 不等于 VMA

> ID：10124518
> 
> 赞同：1
> 
> 时间：2012-04-12T13:25:09.177
> 
> 标签：gcc, linker, linux-kernel, ld

我正在构建一个嵌入式 Linux，我遇到了由于各个部分的 LMA 和 VMA 地址不相等而导致的错误：

```
> /opt/tc/uclibc-crosstools-gcc-4.6/usr/bin/mips-linux-uclibc-objdump -h vmlinux
...
9  __modver      00000470  802b6b90  802b6b90  002aab90  2**0
                 ALLOC
10 .data         002f5e20  802b8000  802b7b90  002abb90  2**14
                 CONTENTS, ALLOC, LOAD, DATA
11 .init.text    0001c020  805ae000  805adb90  005a1b90  2**2
                 CONTENTS, ALLOC, LOAD, READONLY, CODE
... 
```

我遇到的问题是自动生成的链接器脚本（arch/mips/kernel/vmlinux.lds）具有以下行：

```
 .init.data : AT(ADDR(.init.data) - 0) { ...} 
```

对我来说，这表明 .init.text VMA 应该等于 .init.text LMA。我还尝试为 .data 手动添加 AT，就像我`.data : AT(ADDR(.data))`在脚本中那样，但这也不会将 .data 移回正确的位置。有趣的一项是 LMA 和 VMA 相差 0x470 字节，这正是 __modver 部分的大小。谁能解释我为什么会出现这种行为？

（我将 buildroot 2011.11、uClibc 0.9.32.1、gcc 4.6 和 linux 3.2 用于 mips 架构。）

谢谢

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:32:20.603

所以，我正在回答我自己的问题，以防其他人遇到同样的问题，这可能会节省他们一些时间——事实证明链接器中有一个错误。modver 部分是空的，但包含一个 ALIGN 指令。似乎这使链接器感到困惑，并且它抛弃了所有后续部分的 LMA。对此的解决方案是强制将单字节变量包含在 modver 中（但不在 start_modver 和 end_modver 之间——否则会引入新问题......）。这解决了问题。链接器最终必须被修复。

约翰

# php - 在 MYSQL 中可以进行这种排序吗

> ID：10124520
> 
> 赞同：1
> 
> 时间：2012-04-12T13:25:10.430
> 
> 标签：php, mysql, database, sorting

我现在在我的 PHP 页面中对数据进行排序时遇到问题，其中显示的数据由两个表组合而成，因为这两个表都通过其中一个表中的外键链接。

两张表如下

***表名：学生*** **stu_id
stu_name
。
.
.
stu_course_id** 
***表名：课程* course_id
course_name** 

文显示数据，其显示格式如下：

**学生证 | 学生姓名 | 学生课程
----1 --------------约翰-------------工程
----2--------- -----戴夫---------------业务**

我可以按名称对数据进行排序，这很容易，但我很难按课程名称对数据进行排序。这可能是因为课程名称与学生不在同一张表中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:27:54.713

```
select s.stu_id, s.stu_name, c.course_name
from students s
inner join courses c on s.stu_course_id = c.course_id
order by c.course_name asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:28:06.890

是的，使用 ORDER BY 子句。

```
SELECT * FROM courses ORDER BY course_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:28:11.030

当然。简单地引用列名，没有歧义，即：

`ORDER BY courses.course_name`

告诉我你的查询，我会做的。

# android - Android ICS 编译问题

> ID：10124522
> 
> 赞同：6
> 
> 时间：2012-04-12T13:25:16.720
> 
> 标签：android, android-4.0-ice-cream-sandwich

我成功下载了 Android 4.0.3 的源代码。但我无法在我的机器上编译它。

我的机器配置是 UBUNTU 11.10 64 位，4 GB RAM

当我运行午餐命令时，出现以下错误。

```
/bin/bash: prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/arm-linux-androideabi-gcc: Permission denied
/bin/bash: prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/arm-linux-androideabi-gcc: Permission denied
/bin/bash: prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/arm-linux-androideabi-gcc: Permission denied
/bin/bash: build/core/find-jdk-tools-jar.sh: Permission denied
build/core/config.mk:268: *** Error: could not find jdk tools.jar, please install JDK6, which you can download from java.sun.com.  Stop.

** Don't have a product spec for: 'full'
** Do you have the right repo manifest? 
```

JDK 已经在路径中。当我运行命令 java -version 时，我正在关注 OutPut

```
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode) 
```

任何人都可以帮助继续吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T18:08:18.607

如果您检查脚本 build/core/find-jdk-tools-jar.sh，您可以看到它首先检查了一个名为 ANDROID_JAVA_HOME 的环境变量。如果您将 ANDROID_JAVA_HOME 环境变量设置为您的 JDK 路径，它应该会修复此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T08:16:30.077

这是由 build/core/find-jdk-tools-jar.sh 导致“which javac”的结果错误。

通常，这是由于没有将 javac 配置为系统的替代方案。因此，您的 javac 没有 /usr/bin/javac 的链接。

请设置 javac 的替代方案： $sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/jdk1.6.0_32/bin/javac" 1

注意：我的javac的安装目录是“/usr/lib/jvm/jdk1.6.0_32/”，你可以通过你的配置来改变它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:28:17.490

您正在尝试在 64 位操作系统上运行 32 位二进制文​​件（NDK 工具链），因此首先确保您安装了 32 位兼容性库：

```
sudo apt-get install ia32-libs 
```

如果这不能解决问题，请确保您对这些文件具有执行权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-16T06:44:47.830

-打开终端 -type: chmod 777 WORKING_DIR -R -这将修复错误

# c# - 将异步调用变为同步

> ID：10124524
> 
> 赞同：8
> 
> 时间：2012-04-12T13:25:31.740
> 
> 标签：c#, .net, design-patterns, .net-4.0, asynchronous

将异步调用转换为同步调用是否有任何好的做法（模式）？
我有一个第三方库，它的方法都是异步的，要获得几乎任何方法的结果，你必须监听一个事件，这将带来一些上下文。基本上它看起来像：

```
service.BeginSomething(...);
service.OnBeginSomethingCompleted += ; 
```

我需要的是在 BeginSomething 真正完成后执行一些代码（因此在触发 OnBeginSomethingCompleted 之后）。在事件中处理响应非常不方便。

我能想到的唯一方法是运行 Thread.Sleep 循环并等待表单上的某些字段更新，但它看起来不是非常优雅的解决方案。

我正在使用.net 4.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T13:40:34.577

您可以子类化主类并提供操作的同步版本。如果子类化不是一个选项，您可以创建一个扩展方法。这是事情的样子。

```
public class Subclass : BaseClass
{
  public void Something()
  {
    using (var complete = new ManualResetEventSlim(false))
    {
      EventHandler handler = (sender, args) => { complete.Set(); };
      base.OnBeginSomethingCompleted += handler;
      try
      {
        base.BeginSomething();
        complete.Wait();
      }
      finally
      {
        base.OnBeginSomethingCompleted -= handler;
      }
    }
  }
} 
```

**更新：**

我应该指出的一件事是，在某些情况下这可能会出现问题。考虑这个例子。

```
var x = new Subclass();
x.BeginSomething();
x.Something(); 
```

很明显，`handler`in`Something`可以接收`OnBeginSomethingCompleted`来自上一次调用的事件`BeginSomething`。确保以某种方式防范这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:30:33.207

正如其他人所说，如果*可能的*话，您应该尝试使自己的代码异步。如果这不起作用，您的第三方库是否支持标准`BeginXXX`的`EndXXX`异步模式？如果是这样，那么使用 TPL 将使您的事情变得容易。您的代码将如下所示：

```
using System.Threading.Tasks;

...

var task = Task<TResult>.Factory.FromAsync(
    service.BeginSomething, service.EndSomething, arg1, arg2, ..., null);

task.Wait();
var result = task.Result; 
```

您要使用的特定重载将取决于您需要传递的参数数量。您可以在[此处](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)查看列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:31:35.350

使用`ManualResetEvent`. 在您的同步包装器中创建它，然后将其`service.BeginSomething()`作为状态对象的一部分传递给调用。通话后，立即`WaitOne()`就可以了，这将阻塞。

如果`service.OnBeginSomethingCompleted`从状态对象中提取它并设置它，这将解除同步调用者的阻塞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T13:34:15.897

如果`BeginSomething()`返回一个`IAsyncResult`（就像一个代表`.BeginInvoke`会做的那样），你可以从中得到`WaitHandle`：

```
service.OnBeginSomethingCompleted += ;
var asyncResult = service.BeginSomething();
asyncResult.AsyncWaitHandle.WaitOne(); // Blocks until process is complete 
```

顺便说一句，通过在启动异步进程后分配事件处理程序，您将引入一个竞争条件，其中异步调用可能在事件注册之前完成，导致它永远不会触发。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T13:32:17.637

你可能想看看[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)

使用 Rx，您基本上可以将其包装到一个“事件”中——`someClass.SomeEvent.Subscribe(d=>...)`通常使用一些 lambda 表达式来处理您需要的内容。也用于`ObserveOn`在 GUI 线程上处理它（请参阅详细信息，这只是一个提示）。

其他选项是使用`async await`（现在可用于 VS 2010）。

希望这可以帮助

注意：Rx 对异步方法具有原生支持，只需一次调用即可将它们转换为 Rx 事件。看看`Observable.FromAsyncPattern` [FromAsyncPattern](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.fromasyncpattern%28v=vs.103%29.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T13:29:43.580

现代软件开发的总趋势（也在 Windows 平台上）是运行，异步是可能的。

实际上，从 Windows8 软件设计指南来看，如果代码运行时间超过 50 毫秒，则它必须是异步的。

所以我不建议阻塞线程，而是从那个库中受益，并为用户提供一些漂亮的动画，说“等待，响应来”，或者类似的东西，或者一些进度条。

简而言之，不要阻塞线程，通知用户应用程序中发生的事情并让它保持异步。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-21T18:43:33.213

这个解决方案类似于 Brian Gideon 的，但我认为你想要做的事情更干净一些。它使用 Monitor 对象使调用线程等待，直到触发 Completed 事件。

```
public class SomeClass : BaseClass
{
   public void ExecuteSomethingAndWaitTillDone()
    {
        // Set up the handler to signal when we're done
        service.OnBeginSomethingCompleted += OnCompleted;

        // Invoke the asynchronous method.
        service.BeginSomething(...);

            // Now wait until the event occurs
            lock (_synchRoot)
            {
                // This waits until Monitor.Pulse is called
                Monitor.Wait(_synchRoot);
            }
    }

    // This handler is called when BeginSomething completes
    private void OnCompleted(object source, ...)
    {
        // Signal to the original thread that it can continue
        lock (_synchRoot)
        {
            // This lets execution continue on the original thread
            Monitor.Pulse(_synchRoot);
        }
    }

    private readonly Object _synchRoot = new Object();
} 
```

# informatica-powercenter - 使用 Informatica Design SDK 创建映射时出错

> ID：10124526
> 
> 赞同：0
> 
> 时间：2012-04-12T13:25:35.573
> 
> 标签：informatica-powercenter, informatica

我找到了映射 sdk 代码示例，但是没有任何文档。

目前正在使用 9.0，我正在寻找更多信息。

对于当前问题之一，当我尝试将映射保存到存储库时（pcconfig.properties 位于生成 xml 文件的同一文件夹中），我收到以下错误：

```
Written the file..

Caught an exception in run() method

java.io.IOException: Cannot run program ""C:\Informatica\pmrep"" (in directory "C:\Informatica"): CreateProcess error=2, The system cannot find the file specified

java.io.IOException: Cannot run program ""C:\Informatica\pmrep"" (in directory "C:\Informatica"): CreateProcess error=2, The system cannot find the file specified

com.informatica.powercenter.sdk.mapfwk.exception.MapFwkOutputException: Error saving to repository :  Failed to connect to repository

    at com.informatica.powercenter.sdk.mapfwk.xml.XMLWriter.save(Unknown Source)

    at com.informatica.powercenter.sdk.mapfwk.repository.Repository.save(Unknown Source)

    at TestRaghavExample.generateOutput(TestRaghavExample.java:259)

    at TestRaghavExample.create(TestRaghavExample.java:64)

    at TestRaghavExample.main(TestRaghavExample.java:272)

Caught an exception in run() method 
```

这是我最初的例子..试图通过 API 找到我的方式..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:05:40.887

该`pmrep`实用程序的路径看起来不正确。它通常位于`C:\Informatica\<version>\server\bin`Windows 上的路径中。

检查`PC_CLIENT_INSTALL_PATH`within的值`pcconfig.properties`是否正确。

# cuda - 使用设备中的阵列在 CUDA 上并行减少

> ID：10124528
> 
> 赞同：1
> 
> 时间：2012-04-12T13:25:39.167
> 
> 标签：cuda, thrust, reduction

我需要执行并行缩减以找到 CUDA 设备上数组的最小值或最大值。我为此找到了一个很好的库，称为 Thrust。您似乎只能对主机内存中的数组执行并行缩减。我的数据在设备内存中。是否可以减少设备内存中的数据？我不知道该怎么做。这是 Thrust 的文档：[http](http://code.google.com/p/thrust/wiki/QuickStartGuide#Reductions) ://code.google.com/p/thrust/wiki/QuickStartGuide#Reductions 。谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:59:05.290

您可以减少已经在设备内存中的阵列的推力。您需要做的就是将设备指针包装在`thrust::device_pointer`容器中，并调用其中一个缩减过程，正如您链接到的 wiki 中所示：

```
// assume this is a valid device allocation holding N words of data
int * dmem;

// Wrap raw device pointer 
thrust::device_ptr<int> dptr(dmem);

// use max_element for reduction
thrust::device_ptr<int> dresptr = thrust::max_element(dptr, dptr+N);

// retrieve result from device (if required)
int max_value = dresptr[0]; 
```

请注意，返回值也是 a `device_ptr`，因此您可以直接在其他内核中使用它`thrust::raw_pointer_cast`：

```
int * dres = thrust::raw_pointer_cast(dresptr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:49:59.797

如果推力或任何其他库没有为您提供这样的服务，您仍然可以自己创建该内核。

Mark Harris 有一个关于并行减少及其在 cuda 上的优化的很棒的教程。按照他的幻灯片，根据您的需要实施和修改它并不难。

# javascript - QUnit - 基本测试 - 检查字段值

> ID：10124535
> 
> 赞同：0
> 
> 时间：2012-04-12T13:26:03.730
> 
> 标签：javascript, jquery, qunit

我对 QUnit 很陌生。选择了一个简单的 JavaScript 函数来针对它编写一个 qunit 测试。这是功能：

```
function createSelectField(parent, elemid, value, collection) {
 var elem1 = document.createElement("select");
 elem1.id = elemid; 
      parent.appendChild(elem1);
 $("#" +  elemid).addOption(collection, false);
 if(value != null) {
         elem1.value = value ;
 }
 var oldvalue = value;
} 
```

它创建一个选择字段，将其附加到父级，向其添加一些选项（使用 JQuery 插件）并将默认值设置为传入的任何内容。我正在尝试为这个函数编写两个测试，一个当值是null，当值为某个字符串时为一个。假设测试它来检查字段的值。

这是我尝试过的：

```
module('Test createSelectField');
test('createSelectField() with no default value', function() {   
var parent = document.createElement("div");
createSelectField(parent, 'umbi', null, {"key1": "value1", "key2": "value2"});
var elem = $('#umbi');
equal(elem.val(), null, "No default value provided for the drop down");

}); 

test('createSelectField() with some default value', function() {   
var parent = document.createElement("div");
createSelectField(parent, 'bi', 'key1', {"key1": "value1", "key2": "value2"});
var elem = $('#bi');
equal(elem.val(), 'key1', "Default to key1 value");

}); 
```

首先，我尝试获取使用 document.getElementById 创建的元素，但没有成功，它返回 null。使用 JQuery 选择器似乎让我得到了元素，但我没有看到值（使用 FireBug 调试）（我什至不确定它是否给了我在函数中创建的元素）。我什至尝试从我的主函数返回元素，但仍然无法正常工作。我感到困惑和沮丧。我想编写单元测试我的javascript，但这几乎让我想放弃。帮助？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:32:57.533

因为您的元素没有插入到页面中，而是在您创建的 div 中，所以 CSS 查询`$('#umbi')`无法正常工作，因为它会在文档中查看。

Where`$('#umbi', parent)`将在父上下文中搜索它并且即使该元素不是 DOM 的一部分也可以工作。

但是对于您的测试，您只需插入一个项目，您也可以通过`div.childNodes[0]`.

# .htaccess - .htaccess 重定向异常

> ID：10124538
> 
> 赞同：1
> 
> 时间：2012-04-12T13:26:19.013
> 
> 标签：.htaccess, redirect

在我的一个项目中，我尝试使用 .htaccess 进行重定向。我正在使用这样的重定向：

```
RewriteRule ^$ public/ [L]
RewriteRule (.*) public/$1 [L] 
```

但是，现在我想为重写规则添加一个例外。我希望[http://example.com/admin/](http://example.com/admin/)以相同的方式重定向到不同的目录。所有其他流量仍应转到公共目录。所以我添加了这样的重写条件：

```
RewriteCond %{REQUEST_URI} !/admin/
RewriteRule ^$ public/ [L]
RewriteRule (.*) public/$1 [L] 
```

这没有奏效。我仍然被重定向到公用文件夹。我也试过这个：

```
RewriteRule ^admin$ admin/ [L]
RewriteRule admin(.*) admin/$1 [L]

RewriteCond %{REQUEST_URI} !/admin
RewriteRule ^$ public/ [L]
RewriteRule (.*) public/$1 [L] 
```

这只会让事情变得更糟。我现在收到 500 内部服务器错误。

我已经搜索了几个小时，我有点厌倦了寻找展示如何为某个文件夹添加例外但不展示如何将此流量重定向到另一个文件夹的示例。你能告诉我我做错了什么，或者我可以尝试哪种其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:44:29.673

A`RewriteCond`仅适用*于其正下方的规则*。换句话说，在您的示例中，它仅适用于空路径规则。向下移动`RewriteCond`一个档次，效果会更好。

```
RewriteRule ^$ public/ [L]

RewriteCond %{REQUEST_URI} !/admin/
RewriteRule (.*) public/$1 [L] 
```

另外，我发现你的规则

```
RewriteRule admin(.*) admin/$1 [L] 
```

奇怪。一个类似的 URL`/adminsomething`将被重写`/admin/something`，我认为这不是你想要的。

此外，我有一种预感，您将*rewrite*与*redirect*混淆了。重写是使请求在内部重写并以不同方式解释的规则。重定向是一条规则，它将告诉访问者的浏览器转到不同的地址。你要去哪一个？

*重定向*的神奇关键字是`R=301`表示使用 http 代码 301 永久移动的重定向。例如，您可能想尝试...

```
# This first rule is actually redundant in this case so skip it...
#RewriteRule ^$ public/ [R=301,L]
RewriteCond %{REQUEST_URI} !/admin
RewriteRule (.*) public/$1 [R=301,L] 
```

# php - 对数组的索引进行排序 - PHP

> ID：10124539
> 
> 赞同：0
> 
> 时间：2012-04-12T13:26:20.233
> 
> 标签：php, arrays, sorting

我有一个这样的数组：

```
array
  0 => 'Name1'
  1 => 'Name2'
  2 => 'Name1'
  3 => 'Name2'
  4 => 'Name3'
  5 => 'Name2'
  6 => 'Name1'
  7 => 'Name3' 
```

在应用 array_unique() 让重复项消失后，我的数组如下所示：

```
 0 => 'Name1'
  1 => 'Name2'
  4 => 'Name3' 
```

如您所见，数组索引为 0、1、4！我需要将其重置并在您制作时像一个新数组一样，例如：

```
 0 => 'Name1'
  1 => 'Name2'
  2 => 'Name3' 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T13:29:06.447

打电话[`array_values`](http://php.net/array_values)。这将重置密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:44:02.473

好吧，我试试这个，然后工作

```
$array = array( 
 0 => 'Name1',
  1 => 'Name2',
  2 => 'Name1',
  3 => 'Name2',
  4 => 'Name3',
  5 => 'Name2',
  6 => 'Name1',
  7 => 'Name3');

sort($array);
foreach ($array as $key => $val) {
    echo "nombre[" . $key . "] = " . $val . "\n";
} 
```

结果：

名称[0] = 名称1 名称[1] = 名称1 名称[2] = 名称1 名称[3] = 名称2 名称[4] = 名称2 名称[5] = 名称2 名称[6] = 名称3 名称[7] = 名称3

# android - 主题和风格建议

> ID：10124540
> 
> 赞同：0
> 
> 时间：2012-04-12T13:26:23.320
> 
> 标签：android, android-layout

我的 AndroidManifest.xml

```
<application android:icon="@drawable/app_icon" android:label="@string/app_name" android:name=".android.WAYApplication">
<activity android:name=".android.activities.LoginActivity"/>
<activity android:name=".android.activities.RegisterActivity"/>
<activity android:name=".android.activities.settingsActivity"/> 
```

我想知道我是否可以使用清单的应用程序为我的所有活动提供主题或样式，或者我应该单独设置每个活动。我想创建主题并将其提供给我的应用程序。我找不到任何有用的东西，任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:29:10.297

你读过这个吗？[风格和主题](http://developer.android.com/guide/topics/ui/themes.html)

# java - Java MemoryClassLoader (IllegalArgumentException)

> ID：10124541
> 
> 赞同：1
> 
> 时间：2012-04-12T13:26:29.500
> 
> 标签：java, class, memory, loader, encryption

我有一个在自定义 Minecraft 启动器中使用的内存类加载器（[此处）。](https://i.stack.imgur.com/ySWFW.png)

[内存类加载器](http://svn.apache.org/repos/asf/openejb/branches/openejb0/src/main/org/openejb/util/MemoryClassLoader.java)

每当我加载 Minecraft（一个 Java LWJGL 游戏）时，我都会收到以下错误：

```
27 achievements
182 recipes
Setting user
LWJGL Version: 2.4.2
java.lang.IllegalArgumentException: input == null!
at javax.imageio.ImageIO.read(Unknown Source)
at lc.<init>(SourceFile:21)
at gi.<init>(SourceFile:10)
at net.minecraft.client.Minecraft.a(SourceFile:254)
at net.minecraft.client.Minecraft.run(SourceFile:657)
at java.lang.Thread.run(Unknown Source) 
```

我正在创建这样的类加载器：

```
Base.cLoader = new CLoader(
    GameUpdater.classLoader,
    new JarInputStream(new ByteArrayInputStream(jarFileBytes))); 
```

如您所见，它设法加载第一部分，然后在 LWJGL 版本之后突然崩溃，并出现“input == null”。

编辑 - 这是新的 getResource 方法。
错误出现在“URL()”上，如图所示。

![图片](../Images/add1d7f5c16cbfebfce2dbb07ec9ce64.png)

代码：

```
public URL getResource(final String name) {
    URL url = new URL() { public InputStream openStream() {
        return new ByteArrayInputStream((byte[])others.get(name));
    }};

    return url;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:36:34.410

一个疯狂的猜测......它可能是这样的：**警告：**此 URL 尚未实现！您不能调用 getResource() 或 getResources()！

因此，您的代码希望使用未实现的方法从 JAR 中检索图像。可能正在执行与此等效的操作：

```
ImageIO.read(memClassLoader.getResource(someString)); 
```

除此之外，正如我们所见，抛出的错误被`getResource`忽略`null`并被用作值。[`ImageIO.read`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/javax/imageio/ImageIO.java#ImageIO.read%28java.net.URL%29)像这样：

```
public static BufferedImage read(URL input) throws IOException {
    if (input == null) {
        throw new IllegalArgumentException("input == null!");
    }

    InputStream istream = null;
    try {
        istream = input.openStream();
    } catch (IOException e) {
        throw new IIOException("Can't get input stream from URL!", e);
    }
} 
```

听起来很熟悉？所以，这大致是你需要实现的：

```
public URL getResource(final String name) {
  try {
    return new URL("", "", 0, "",
        new URLStreamHandler() { public URLConnection openConnection(URL url) {
          return new URLConnection(url) {
            public void connect() {}
            public InputStream getInputStream() {
              // return the appropriate InputStream, based on the name arg
            }
          };
        }});
  } catch (MalformedURLException e) { throw new RuntimeException(e); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:59:56.217

MemoryClassLoader 几乎坏了。它没有实现 getResource() （如源代码中的注释所述），也没有为它加载的类定义包（这可能会或可能不会破坏应用程序）。

很可能 ClassLoader 很快就被黑客入侵以进行测试，而将更复杂的方法排除在外。

实现您自己的 URL 协议来处理 getResource() 并不太困难，在 getResource() 中，您返回一个使用自定义协议名称（例如“myclassloader://resourcename”）的 URL，以及处理它的 URLStreamHandler 的自定义实现协议。如果通过 ClassLoader 加载的代码使用 URL.toString() 并将其转换回来，它仍然会中断，这可能无法涵盖所有​​可能导致定位资源问题的漏洞。

实现一个不简单委托给现有 ClassLoader 的完全工作的 ClassLoader 并不像大多数示例看起来那样简单。

# sql-server - 来自 MS Access 的内部查询对 SQL Server 的性能问题

> ID：10124547
> 
> 赞同：2
> 
> 时间：2012-04-12T13:26:48.600
> 
> 标签：sql-server, performance, ms-access, database-performance, sqlperformance

我们有一个在 MSAccess 中运行但使用 SQL Server 作为后端数据库的应用程序。这会生成一个查询来检查它可以访问哪些视图，对于普通用户来说，这最多需要 18 秒。对于属于 db_owner 角色的所有用户，需要 0.2 秒。有什么办法可以为普通用户调整这个吗？也许我可以在 Access 中做些什么？我不想给他们 db_owner，重写应用程序以不使用 Access 是不可能的。

这是查询：

```
select 
  object_name(id), 
  user_name(uid), type, 
  ObjectProperty(id, N'IsMSShipped'), 
  ObjectProperty(id, N'IsSchemaBound') 
    from sysobjects 
    where type = N'V' 
      and permissions(id) & 4096 <> 0 
```

使用 MS Access 2003、SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T14:30:32.743

让我猜猜：您有一个在启动时执行此操作的 Access-ADP 应用程序。我们完全一样。此查询用于获取 Access 稍后使用的元数据。问题的根本原因是不推荐使用的 PERMISSIONS 函数：

[http://msdn.microsoft.com/en-us/library/ms186915.aspx](http://msdn.microsoft.com/en-us/library/ms186915.aspx)

引用：“继续使用 PERMISSIONS 函数可能会导致性能下降。”

由于您无法更改查询或函数，因此您很不走运。

我建议您考虑迁移到带有链接表的 ACCDB，因为无论如何 ADP 支持在 Access 2013 中都被取消了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T14:11:09.627

派对迟到了，但试试这个：

```
select
  [name], 
  schema_name(schema_id), 
  [type], 
  Is_MS_Shipped,
  Is_Schema_published
from 
    sys.all_views
where 
    not permissions(object_id) & 4096 = 0 
```

使用特定于视图的对象并反转比较可能会给您带来轻微的改进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T05:07:02.077

没有找出问题的根本原因，也许解决方法可能会有所帮助？只是一个想法：您可以将您的 SQL 语句封装在 db_owner 拥有的 proc 中，并给它一个 [EXECUTE AS](http://msdn.microsoft.com/en-us/library/ms188354.aspx)子句。这样，当非 db_owner 调用 proc 时，proc 中的 SQL 将在 db_owner 的模拟下执行，仅在 proc 的持续时间和范围内。希望您的非 db_owner 用户将受益于您在 db_owner 运行该 SQL 时所看到的性能。

# .net - ODP.NET UPDATE... RETURNING INTO... 多行，参数类型

> ID：10124548
> 
> 赞同：0
> 
> 时间：2012-04-12T13:26:48.600
> 
> 标签：.net, oracle, odp.net

我想知道以下行动方案是否可行：

我正在实现一个简单的数据输入应用程序。每个可编辑记录都驻留在一个表中。用户必须同时编辑多条记录（以减少数据输入时间）。我目前尝试做的是在记录中实现某种锁定机制。

我想到的第一件事是执行 (ExecuteNonQuery) UPDATE some_table SET status = 'locked' WHERE rownum = 1 RETURNING id INTO :locked_id 与输出参数，给我锁定记录的 ID。我可以根据这个 ID 执行另一个 SELECT 语句来读取我想要的任何其他信息。

虽然上述方法似乎适用于单个锁定记录，但我真的不知道如何为多个返回的行执行此操作。- 如果在上面的示例中，WHERE 子句是“rownum < 4”而不是“rownum = 1”怎么办？

我的 OracleParameter 应该是什么样的？当我像这样指定我的返回 oracle 参数时（适用于单行），

`OracleParameter p = cmd.Parameters.Add("ID", OracleDbType.Int32, 10, 0, ParameterDirection.Output);`

给出了 ORA-24369。我尝试使用 ArrayBindCount 和数组作为参数的 .Value 属性，但无济于事。

另外，您是否发现整个特定的锁定方式存在根本性的问题？

谢谢你

编辑：一些澄清 - 1\. 有一个名为 user_name 的列，它可以保存例如登录用户的名称 - 我将它与锁定更新一起更新 2\. 还有另一列我称之为locked_timestamp，它保存时间记录被锁定。可能会有一个后台进程在夜间运行并将锁定的记录重置回“解锁” - 鉴于这种情况不会经常发生，并且由于崩溃等原因保持“锁定”的记录比例很小与已编辑记录的数量相比 3\. 并发更新应该由 Oracle 自动处理，是的，我在每次 UPDATE 期间都使用事务 - 所以一条记录同时被两个用户锁定的可能性很小 - 或者就是这样我听说（会试试这个，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:00:08.783

最后，经过数小时的搜索和代码操作，我得出了以下结论（除了头痛）：

我得到了我想要的使用组合来自

1.  [这里](http://osdir.com/ml/python.db.cx-oracle/2007-04/msg00056.html)有一个提示，它建议将 UPDATE..RETURNING 语句包装到一个匿名 PL/SQL 块中（以 BEGIN 开头，以 END 结尾；） - 这没有解释，我仍然不知道为什么行为不同
2.  Oracle 文档中关于 OracleCommand 的代码片段，特别是[关于使用 BULK COLLECT INTO 绑定 PL/SQL 关联数组](http://docs.oracle.com/html/B14164_01/featOraCommand.htm#sthref181)的部分（无法让简单的数组绑定工作..）：

 `````
try
{
    conn.Open();
    transaction = conn.BeginTransaction();

    cmd = new OracleCommand();
    cmd.Connection = GetConnection();

    cmd.CommandText =
        "BEGIN UPDATE some_table " +
        "SET status = 'locked', " +
        "    locked_tstamp = SYSDATE, " +
        "    user_name = '" + user + "' " +
        "WHERE rownum <= 4 " +
        "RETURNING id BULK COLLECT INTO :id; END;";

    cmd.CommandType = CommandType.Text;

    cmd.BindByName = true;
    cmd.ArrayBindCount = 4;

    p = new OracleParameter();
    p.ParameterName = "id";
    p.Direction = ParameterDirection.Output;
    p.OracleDbType = OracleDbType.Int64;
    p.Size = 4;
    p.ArrayBindSize = new int[] { 10, 10, 10, 10 };
    p.CollectionType = OracleCollectionType.PLSQLAssociativeArray;
    cmd.Parameters.Add(p);

    int nRowsAffected = cmd.ExecuteNonQuery();

    // nRowsAffected is always -1 here
    // we can check the number of "locked" rows only by counting elements in p.Value (which is returned as OracleDecimal[] here)
    // note that the code also works if less than 4 rows are updated, with the exception of 0 rows
    // in which case an exception is thrown - see below
    ...
}
catch (Exception ex)
{
    if (ex is OracleException && !String.IsNullOrEmpty(ex.Message) && ex.Message.Contains("ORA-22054")) // precision underflow (wth)..
    {
        Logger.Log.Info("0 rows fetched");
        transaction.Rollback();
    }
    else
    {
        Logger.Log.Error("Something went wrong during Get : " + ex.Message);
        ret = null;
        transaction.Rollback();
    }
}
finally
{
    // do disposals here
}
... 
````  `* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:00:32.523

关于此记录锁定方案，需要考虑以下几点：

1.  你怎么知道谁的记录被锁定了？我怀疑在某些时候你会想知道。
2.  如果会话崩溃，记录如何解锁？他们肯定不会一直锁定到时间结束吗？！？
3.  如何处理同时锁定尝试？假设我启动了一个事务来锁定记录#12345。我的应用程序看到该状态是“解锁”（或 NULL，或其他），并立即执行 UPDATE 和 COMMIT 以“锁定”记录。与此同时，隔壁立方体中的 Susie 也在做同样的事情——读取数据库，看看它是否被解锁，然后执行同样的 UPDATE 和 COMMIT。现在好 - 1) 记录的状态是什么，2) 谁真的把它锁定了，3) 谁的后续更改将被覆盖 - 我告诉你，最好是 Susie 或者我来了' 在那里大声谈论这个！

只是有几点需要思考。

分享和享受。``

# exchangewebservices - 插入交换约会时，EndDate 早于 StartDate 错误

> ID：10124551
> 
> 赞同：4
> 
> 时间：2012-04-12T13:27:02.713
> 
> 标签：exchangewebservices, exchange-server-2010

当我将约会插入交换时，我收到以下问题“结束日期早于开始日期”，有人可以帮忙解决这个问题吗？

```
Appointment appt=new Appointment();
appt.Start=DateTime.Now();
appt.End=DateTime.Now().Addhours(1);
appt.Subject="Test";
appt.Save(WellKnownFolderName.Calendar); 
```

在最后一行我遇到了问题，但我给出了正确的开始和结束日期，谁能告诉我为什么我会遇到这个问题？

注意：如果我在开始日期和结束日期中给出不同的日期，它将接受。开始日期和结束日期应该是相同的，只有时间不同，在这种情况下，只有我遇到了这个问题。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-20T06:26:29.103

我今天遇到了一个非常相似的问题，但是在更新事件时。我相信我的解决方案与问题有关。

我正在更新在中欧时区创建的事件。我的代码按以下顺序设置属性：

```
appt.Start = DateTime.UtcNow;
appt.End = DateTime.UtcNow.AddMinutes(30);
appt.StartTimeZone = TimeZoneInfo.FindSystemTimeZoneById("UTC");
appt.EndTimeZone = TimeZoneInfo.FindSystemTimeZoneById("UTC"); 
```

使用 Managed Api，我的印象是属性分配的顺序对实际操作没有影响，但是在这种情况下，我发现它不是真的。

Managed Api 生成以下 XML：

```
<soap:Body>
        <m:UpdateItem ConflictResolution="AlwaysOverwrite" SendMeetingInvitationsOrCancellations="SendToNone">
            <m:SavedItemFolderId>
                <t:FolderId Id="AQMkADJkAAA==" />
            </m:SavedItemFolderId>
            <m:ItemChanges>
                <t:ItemChange>
                    <t:ItemId Id="AAMkADJkZWZiODMxLWNRE" />
                    <t:Updates>
                        <t:SetItemField>
                            <t:FieldURI FieldURI="calendar:EndTimeZone" />
                            <t:CalendarItem>
                                <t:EndTimeZone Name="UTC" Id="UTC">
                                    ...
                                </t:EndTimeZone>
                            </t:CalendarItem>
                        </t:SetItemField>
                        <t:SetItemField>
                            <t:FieldURI FieldURI="calendar:Start" />
                            <t:CalendarItem>
                                <t:Start>2015-10-19T15:30:00.000Z</t:Start>
                            </t:CalendarItem>
                        </t:SetItemField>
                        <t:SetItemField>
                            <t:FieldURI FieldURI="calendar:End" />
                            <t:CalendarItem>
                                <t:End>2015-10-19T16:00:00.000Z</t:End>
                            </t:CalendarItem>
                        </t:SetItemField>
                        ...
                        <t:SetItemField>
                            <t:FieldURI FieldURI="calendar:StartTimeZone" />
                            <t:CalendarItem>
                                <t:StartTimeZone Name="UTC" Id="UTC">
                                    ...
                                </t:StartTimeZone>
                            </t:CalendarItem>
                        </t:SetItemField>
                    </t:Updates>
                </t:ItemChange>
            </m:ItemChanges>
        </m:UpdateItem>
    </soap:Body> 
```

切换属性分配的顺序以设置时区首先为我解决了这个问题。

当事件的原始时区等于设置的时区时，也不会出现问题。就在切换时区的时候。

请注意，这并不是真正的解决方案。更好的方法是克隆托管 api 并修复库中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:25:33.643

也许问题出在时区。当您使用现在时区时，使用[Exchange 2010 Exchange Web 服务中](http://msdn.microsoft.com/en-us/library/ff406132%28v=exchg.140%29.aspx)`DateTimeKind.Local`的时区不推荐。你会尝试一些东西吗？ 我使用 Exchange2007，您的代码对我有用，但时区处理在 2010 年发生了变化。`appt.Start = new DateTime(2010, 2, 12, 10, 0, 0, DateTimeKind.Unspecified);`

# php - 将 Session 变量传递给名为 PHP 脚本的 ajax

> ID：10124560
> 
> 赞同：2
> 
> 时间：2012-04-12T13:27:31.540
> 
> 标签：php, javascript, ajax

在我的 PHP 脚本中使用会话时，我想将会话变量传递给称为 PHP 的脚本。但是会话变量没有被调用，因为在 HTML 代码之后不能使用 session_start() 函数。我正在使用简单的 Javascript AJAX。请给我路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:48:48.377

我认为您需要的是以下内容：

在您使用 ajax 打开/请求的 php 脚本中，您必须在第一行添加：

```
session_start(session_id()); 
```

这样，您就可以访问存储在会话中的变量，在会话中使用 ajax 调用请求

# jquery - 返回由 cfc 发送的 jQuery $.post 中未定义的变量

> ID：10124561
> 
> 赞同：1
> 
> 时间：2012-04-12T13:27:40.133
> 
> 标签：jquery, coldfusion, cfc

我正在使用`$.post()`将 json 发送到我的 cfc，它会更新一些记录。我没有将 json 返回到调用页面，我只是返回我在 cfc 中设置的变量的内容。根据该变量的值，更新成功/失败。我似乎无法了解变量的内容。我刚开始使用 jQuery，所以我认为我做得对，但显然不是。

jQuery：

```
$("#edit_button").click(function(){
    if(theArray.length > 0){
        theJson = JSON.stingify(theArray);
        $.post("cfcs/fund_profile.cfc",{
            method:"updateProfile",
            data:theJson,
            dataType:"text"
            success:function(response){alert(response);}
        });
   }
}); 
```

我不会发布整个 cfc，只发布重要的部分。

我只是返回一个字符串。

```
<cffunction name="updateProfile" ...>
    ...

    <cfif message neq ''>
        <cfreturn message>
    <cfelse>
        <cfset message = "success">         
    </cfif>
    <cfreturn message>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:35:24.063

您使用`$.post`不正确。`$.ajax`这看起来像是和的混搭`$.post`。你的电话应该是这样的：

```
$.post("cfcs/fund_profile.cfc",{ method: "updateProfile", data: theJson}, 
    function(response) {
       alert(response);
    }, 
"text"); 
```

文档：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# ruby-on-rails - 使用 HAML 生成单行注释？

> ID：10124563
> 
> 赞同：27
> 
> 时间：2012-04-12T13:27:45.443
> 
> 标签：ruby-on-rails, ruby, haml

我正在尝试在 HTML 文件末尾的单行上生成注释：

```
<!-- generated by SERVER1 --> 
```

* * *

我试过了

```
/
  generated by #{@server_name} 
```

但这会输出超过 3 行 -

```
<!-- 
    generated by SERVER1 
--> 
```

我试过了

```
/ generated by #{@server_name} 
```

但这并不能评估`@server_name`var -

```
<!-- generated by #{@server_name} --> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-15T14:32:16.020

就像您可以在需要时退回到原始 HTML 输出一样，您也可以放入原始 HTML 注释，即使是插值。

这个模板：

```
- @foo = 42
#test1
  /
    Hello #{@foo}
#test2
  <!-- Hello #{@foo} --> 
```

产生这个输出：

```
<div id='test1'>
  <!--
    Hello 42
  -->
</div>
<div id='test2'>
  <!-- Hello 42 -->
</div> 
```

*使用 Haml v3.1.4 测试（分离的 Sally）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T13:50:37.340

这仍然是一个悬而未决的问题：[github.com/haml/haml/issues/313](https://github.com/haml/haml/issues/313)。我认为您现在仍然坚持使用多行注释，即使 nex3 说单行插值应该可以工作。

# nhibernate - 休眠和生成的 GUI

> ID：10124571
> 
> 赞同：0
> 
> 时间：2012-04-12T13:28:06.193
> 
> 标签：nhibernate, user-interface

是否存在可以从我的休眠映射和域自动生成（运行时或设计时）简单 CRUDE GUI 的框架？开源和c#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:45:33.240

[MVC Scaffolding](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)包用于实体框架，但 T4 模板是可编辑的。您可能能够修改它们以使用 NHibernate 会话而不是 EF DBContext。生成的所有其他内容都应该运行良好。

# objective-c - 在xcode中设置导航栏的标题

> ID：10124574
> 
> 赞同：8
> 
> 时间：2012-04-12T13:28:13.553
> 
> 标签：objective-c, ios, xcode, uitableview

我以编程方式创建了一个导航控制器，

```
 //Creating AddViewController Object
        addViewController *addView = [[addViewController alloc]init];
        UINavigationController *addViewControl = [[UINavigationController alloc]init];

        [addViewControl.view addSubview:addView.view];

        [self presentModalViewController:addViewControl animated:YES]; 
```

但是当我在 addViewController 类中添加 self.title = @"Title" 时。它没有显示。

我尝试了以下方法，

```
self.navigationItem.title = @"Title";

self.navigationController.navigationBar.topItem.title = @"Title"; 
```

但它不显示标题。

我认为可以设置标签。但以上一种是直接方法。

任何的想法..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T13:41:09.480

您应该将标题分配给`addView`like`addView.title = @"Title";`

另一种方法是`self.navigationItem.title = @"Title";`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T16:13:09.643

在 viewController 类中： `[self setTitle:@"title"];`或`self.title=@"title";`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-14T02:10:50.707

这对我来说似乎很好用

```
self.navigationController.navigationBar.topItem.title = @"Title"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-12T13:41:39.513

尝试以这种方式初始化导航控制器：

```
UINavigationController *addViewControl = [[UINavigationController alloc] initWithRootViewController:addView];
[self presentModalViewController:addViewControl animated:YES];
//[addView release];
//[addViewControl release]; // uncomment these two lines if not using ARC 
```

然后在方法中设置你的类的`title`属性。`addViewController``viewWillAppear`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T13:48:05.407

您的导航控制器设置不正确：

```
UINavigationController *addViewControl = [[UINavigationController alloc]initWithRootViewController:addView];
// delete this line: [addViewControl.view addSubview:addView.view]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-30T05:03:57.683

这适用于我正在创建的应用程序：

```
[self.navigationItem setTitle:@"title here"]; 
```

# ajax - 带有 Codeigniter 的 Ajax 无法正常工作

> ID：10124575
> 
> 赞同：0
> 
> 时间：2012-04-12T13:28:15.133
> 
> 标签：ajax, codeigniter

我想发出一个ajax请求，它不会工作。这是我的代码：

```
function loadSingleProductPaso1(div_loading,div_id,index, json,ajaxurl){
$.ajax({
    type: "POST",  
    url: ajaxurl, //the url is http://www.mysite.com/controller/function
    data: "ajax=true&precio="+JSON.parse(json[index]).miprecio,
    success: function(msg){
             ...
            } 
    }
}); 
```

}

问题是，当我添加一个“？” 到数据元素（数据：“?ajax=true&...”），它工作，但发送一个 $_POST['?ajax'] 变量。

我真的不明白我在做什么错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:09:31.843

你可以使用post功能，

## 像这样，

```
$.post(ajaxurl, {
   name : "Test",
   city : "Istanbul"
}, function(data){
   if(data == 1){
       alert("success!");
   }
}); 
```

* * *

```
function ajax(){
    if($this->input->post('name') == "Test"){
        echo 1;
    }
} 
```

# excel - 为每个过滤结果创建一个单独的 Excel 文件

> ID：10124576
> 
> 赞同：0
> 
> 时间：2012-04-12T13:28:16.990
> 
> 标签：excel, file, vba, filtering

我有一个电子表格，我想将其拆分为每个部门的单独电子表格，显示的部门多于显示的部门，我希望将每个部门的 .xls 文件与部门名称一起保存

部门字段是 D 列。

即，我想要一个 .xls 文件，每个文件只包含部门 1、部门 2 等的记录。

不幸的是，我无法发布电子表格的屏幕截图，因为我的代表还不够好。

我将使用什么 VBA 代码来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:58:25.057

这应该做你需要的。如果您运行它并提供一个列字母，它将基于该列，否则它将默认为您指定的 D：

```
Sub SplitWorkbook(Optional colLetter As String, Optional SavePath As String)
If colLetter = "" Then colLetter = "D"
Dim lastValue As String
Dim hasHeader As Boolean
Dim wb As Workbook
Dim c As Range
Dim currentRow As Long
hasHeader = True 'Indicate true or false depending on if sheet  has header row.

If SavePath = "" Then SavePath = ThisWorkbook.Path
'Sort the workbook.
ThisWorkbook.Worksheets(1).Sort.SortFields.Add Key:=Range(colLetter & ":" & colLetter), _
    SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
With ThisWorkbook.Worksheets(1).Sort
    .SetRange Cells
    If hasHeader Then ' Was a header indicated?
        .Header = xlYes
    Else
        .Header = xlNo
    End If
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With

For Each c In ThisWorkbook.Sheets(1).Range("D:D")
    If c.Value = "" Then Exit For
    If c.Row = 1 And hasHeader Then
    Else
        If lastValue <> c.Value Then
            If Not (wb Is Nothing) Then
                wb.SaveAs SavePath & "\" & lastValue & ".xls"
                wb.Close
            End If
            lastValue = c.Value
            currentRow = 1
            Set wb = Application.Workbooks.Add
        End If
        ThisWorkbook.Sheets(1).Rows(c.Row & ":" & c.Row).Copy
        wb.Sheets(1).Cells(Rows.Count, 1).End(xlUp).Select
        wb.Sheets(1).Paste

    End If
Next
If Not (wb Is Nothing) Then
    wb.SaveAs SavePath & "\" & lastValue & ".xls"
    wb.Close
End If
End Sub 
```

这将在与您运行它的工作簿相同的文件夹中生成一个单独的工作簿......或在您提供的路径中。

# php - 在 OS X Lion 10.7.6 上安装 xdebug

> ID：10124580
> 
> 赞同：1
> 
> 时间：2012-04-12T13:28:19.980
> 
> 标签：php, xcode, xdebug

所以我安装了 xdebug，但我猜测它的版本是错误的，因为我下载了一个预编译版本并且它不起作用所以我决定自己制作。我按照 xdebug 站点上的说明进行操作，在运行 phpize 时出现以下错误：

```
Cannot find config.m4\. 
Make sure that you run './phpize' in the top level source directory of the module 
```

当我在目录 /usr/bin 中运行 phpize 时，我得到了同样的错误。

当我尝试查看正在运行的 phpize 版本时，出现以下错误：

```
grep: /usr/include/php/main/php.h: No such file or directory
grep: /usr/include/php/Zend/zend_modules.h: No such file or directory
grep: /usr/include/php/Zend/zend_extensions.h: No such file or directory
Configuring for:
PHP Api Version:        
Zend Module Api No:     
Zend Extension Api No: 
```

还有另一件事阻止我前进的是我没有 gcc 编译器我现在已经卸载并重新安装了两次 xcode 没有占上风......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:37:39.900

您应该使用 xdebug 源代码在目录内运行 phpize。它与xcode无关。然后你用 make 脚本编译它并将结果模块复制到 php 扩展文件夹。您确定您从 git 获得了正确的来源吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:10:19.990

XDebug 一直在工作，我没有在我的 php.ini 文件中打开 html_errors，也没有在我的 index.php 文件中将 application_env 更改为 development，因为我正在使用 zend 框架！对困惑感到抱歉。

# c# - 与 Devexpress 中 ASPXMenu 中的 ItemClick 事件相关的问题

> ID：10124588
> 
> 赞同：0
> 
> 时间：2012-04-12T13:28:46.623
> 
> 标签：c#, asp.net, devexpress

我有数据库中的 ASPXMenu 和绑定项目。我添加了 ItemClickEvent 。

它确实在Parant Menu上触发

但是当我点击Parant Item下的Items时..它不会触发。

怎么能火呢？

```
 protected void mMain_ItemClick(object source, DevExpress.Web.ASPxMenu.MenuItemEventArgs e)
    {
        string s = "";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:37:15.207

无法如我们的文档中所述处理服务器端[ItemClick事件。](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxMenuASPxMenuBase_ItemClicktopic)如果要处理它，则必须从菜单项中删除 NavigateUrl 属性定义，然后通过 Response.Redirect 方法执行响应重定向。

```
protected void ASPxMenu1_ItemClick(object source, DevExpress.Web.ASPxMenu.MenuItemEventArgs e)
    {
        Label1.Text = "The clicked item: " + e.Item.Text;
    } 
```

# iphone - 如何通过 Sql Query 在 Sqlite 中获取表的最后一行/最后一行

> ID：10124589
> 
> 赞同：3
> 
> 时间：2012-04-12T13:28:47.163
> 
> 标签：iphone, sql, sqlite

我正在尝试获取我的 sqlite3 数据库的最后一行。谁能告诉我查询语法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T13:31:52.757

```
SELECT field
FROM TABLE
ORDER BY field DESC
LIMIT 1 
```

假设 order by`DESC`将您的最后一行*放在首位*

# android - 在 android 中读取 .PDF/.TXT 文件

> ID：10124590
> 
> 赞同：1
> 
> 时间：2012-04-12T13:28:47.397
> 
> 标签：android

如何读取存储在我的android应用程序资产中的pdf文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:31:59.493

对于 PDF，您将需要像 PDFBox 这样的 PDF 库，因为 Android 或 Java 都没有对 PDF 的原生支持。你可以用谷歌搜索。

[http://pdfbox.apache.org/](http://pdfbox.apache.org/)

# git - 从修改后的提交中删除文件

> ID：10124593
> 
> 赞同：14
> 
> 时间：2012-04-12T13:28:51.877
> 
> 标签：git, version-control

我将提交推送到我不小心添加了一个文件的仓库。没有其他人从远程仓库合并，所以我可以重写历史。但是当我从本地提交中删除文件（取消暂存，不从源代码管理或磁盘中删除）时，我无法推送更改。git push 显示一切都是最新的

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T15:42:52.997

Here you go:

```
git checkout HEAD~ -- path/to/your/file
git add path/to/your/file
git commit --amend -C HEAD 
```

* * *

```
git diff -p HEAD~ -- path/to/your/file | git apply -R
git commit --amend -C HEAD 
```

* * *

```
git reset HEAD~ -- path/to/your/file
git commit --amend -C HEAD 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T13:37:37.370

尝试：

```
git rm --cached <yourfile>
git commit --amend
git push -f 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T14:30:03.567

如果您需要重写完整的提交，请尝试使用

```
git reset HEAD^
git add <files to be part of the commit>
# or git add -pu
git commit -C <previous commit number> 
```

在执行此操作之前，您需要保留最后一个提交编号，以便能够重用提交消息/日期/作者。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T03:38:00.793

虽然我做了类似于 Colin 和 ydroneaud 建议的事情，

答案是使用

```
git push +sa1:sa1 
```

其中 sa1 是我的分支。这迫使甚至“什么都没有”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-02T09:55:58.113

使用这两个命令，您可以立即恢复`FILE`上次提交中的所有更改，*而无需*更改其（工作树）内容：

```
git reset HEAD~ "FILE"
git commit --amend --no-edit 
```

根据[https://superuser.com/a/567550的答案进行了简化](https://superuser.com/a/567550)

请注意，这也会将所有当前暂存的更改添加到提交中，因此您可能需要提前运行`git restore --staged -- $(git rev-parse --git-dir)`。

* * *

先前的解决方案源自@ColinHebert 的答案

```
git diff -p HEAD~ -- "FILE" | git apply --reverse --cached
git commit --amend --no-edit 
```

# iphone - 通过选项卡控制器从视图控制器到另一个视图控制器

> ID：10124599
> 
> 赞同：1
> 
> 时间：2012-04-12T13:29:06.797
> 
> 标签：iphone, ipad, ios5

我想知道是否有人可以提供帮助。鉴于下面的故事板：

{对不起，我想发布一张图片，但由于我是新来的，他们不会让我这样做}

|测试视图控制器| -- |标签栏控制器| -- |视图控制器 - 项目 1| | | | | | |

我想单击测试视图控制器中的按钮。我已经连接了 UIButton。在为测试视图控制器中的 segue 做准备时，我有这个：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"Results"])
    {
        [segue.destinationViewController setCurrentUserData:initialUserData];
    }
} 
```

在视图控制器 - 最右边的第 1 项中，我确实有初始用户数据：

```
@property (strong, nonatomic) NSMutableArray *currentUserData; 
```

但是，当我运行程序时，会抛出以下异常：

-[UITabBarController setAllUserData:]：无法识别的选择器发送到实例 0x6d6c2a0

所以我猜segue的准备实际上应该是Tab Bar Controller。我尝试使用上面的属性创建一个自定义选项卡栏控制器类，我不再有异常，但我被困在将另一个准备从选项卡控制器传递到视图控制器 - 项目 1 以便我终于可以得到我的结果在那个观点中。问题是，当您单击从选项卡栏控制器到视图控制器的连接时 - 第 1 项您不能在其中指定一个 segue 标识符，所以从逻辑上讲，我一定是在这里做错了什么......有谁知道我在做什么？做错了吗？

# objective-c - libcs s 中的 css_stylesheet_create()（错误：函数调用的参数过多）

> ID：10124601
> 
> 赞同：0
> 
> 时间：2012-04-12T13:29:14.350
> 
> 标签：objective-c, c, xcode4, struct, typedef

我正在尝试在Objective C中实现一个C库（libcs​​s）。我在函数**css_stylesheet_create**（）上得到一个**“函数调用的参数太多，预计有4个，有13个”**

 **```
 code = css_stylesheet_create(CSS_LEVEL_DEFAULT, "UTF-8", "", NULL,
                             false, false, myrealloc, 0, resolve_url, 0, NULL, NULL,
                             &sheet); 
```

css_stylesheet_create 定义：

```
 /** 
    *  Parameter block for css_stylesheet_create() 
    */ 

    typedef struct css_stylesheet_params {
            /** ABI version of this structure */
            uint32_t params_version;

            /** The language level of the stylesheet */
            css_language_level level;
            /** The charset of the stylesheet data, or NULL to detect */
            const char *charset;
            /** URL of stylesheet */
            const char *url;
            /** Title of stylesheet */
            const char *title;

            /** Permit quirky parsing of stylesheet */
            bool allow_quirks;
            /** This stylesheet is an inline style */
            bool inline_style;

            /** URL resolution function */
            css_url_resolution_fn resolve;
            /** Client private data for resolve */
            void *resolve_pw;

            /** Import notification function */
            css_import_notification_fn import;
            /** Client private data for import */
            void *import_pw;

            /** Colour resolution function */
            css_color_resolution_fn color;
            /** Client private data for color */
            void *color_pw;

            /** Font resolution function */
            css_font_resolution_fn font;
            /** Client private data for font */
            void *font_pw;
   } css_stylesheet_params;

css_error css_stylesheet_create(const css_stylesheet_params *params,
        css_allocator_fn alloc, void *alloc_pw,
        css_stylesheet **stylesheet); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:31:37.247

原型要求 4 个参数，调用有 13 个参数！

检查这个 [补丁](http://www.mail-archive.com/netsurf-commits@netsurf-browser.org/msg07905.html)。他们正在`css_stylesheet_create`完全改变功能。即他们将所有参数嵌入其中，`css_stylesheet_params`从而将参数数量`css_stylesheet_create`从 13 减少到 4

所以你需要像这样打电话 -

```
css_stylesheet_params params;

params.level = CSS_LEVEL_DEFAULT;
params.charset = "UTF-8";
params.url = "";
params.title = NULL;
params.allow_quirks = false;
params.inline_style = false;
params.resolve = resolve_url;
params.resolve_pw = NULL;
params.import = NULL;
params.import_pw = NULL;
params.color = NULL;
params.color_pw = NULL;

css_stylesheet_create(&params, myrealloc, NULL, &sheet) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:33:23.070

是的，检查一下，在你的函数声明中，你只给出了 4 个参数，但是你用超过 4 个参数调用函数

```
 css_error css_stylesheet_create(const css_stylesheet_params *params,  
       css_allocator_fn alloc, void *alloc_pw,
         css_stylesheet **stylesheet); 
```**

# sql - sql中的日期名称函数

> ID：10124604
> 
> 赞同：0
> 
> 时间：2012-04-12T13:29:21.260
> 
> 标签：sql, sql-server-2008, tsql

我想从给定日期获取星期，为此我尝试使用 DATENAME 函数来获取 WEEK，

```
 Select DateName(WEEK,'2012-03-09') 
```

我得到的输出为 10。我想得到本周的开始日期和结束日期，这`2012-03-04 to 2012-03-10`可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:34:23.227

做这样的事情：

```
DECLARE @MyDate Date = '2012-03-09';

-- This gets you the SUNDAY of the week your date falls in...
SELECT DATEADD(DAY, -(DATEPART(WEEKDAY, @MyDate) - 1), @MyDate);

-- This gets you the SATURDAY of the week your date falls in...
SELECT DATEADD(DAY, (7 - DATEPART(WEEKDAY, @MyDate)), @MyDate);

-- This will show the range as a single column
SELECT
  CONVERT(NVarChar, DATEADD(DAY, -(DATEPART(WEEKDAY, @MyDate) - 1), @MyDate))
  + ' through ' +
  CONVERT(NVarChar, DATEADD(DAY, (7 - DATEPART(WEEKDAY, @MyDate)), @MyDate)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:35:41.727

尝试以下操作，将 getdate 更改为您的日期

```
Select 
DateAdd(d, 1- DatePart(dw,GetDate()),GetDate()) FirstDayOfWeek,
DateAdd(d, 7- DatePart(dw,GetDate()),GetDate()) LastDayOfWeek 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:53:36.107

这不依赖于 datefirst 的默认设置。

```
set datefirst 4 -- this row does nothing in this query. 
                -- It will hurt the queries using datepart though
declare @t table(dt datetime)
insert @t values('2012-03-09 11:12'), ('2012-03-10 11:12'),('2012-03-11 11:12')

-- week from sunday to saturday 
Select dateadd(week, datediff(week, 0, dt),-1),
       dateadd(week, datediff(week, 0, dt),+5)
from @t 
```

# firefox - Firefox Add-on SDK 1.6.1 是否可以制作卸载按钮？

> ID：10124608
> 
> 赞同：4
> 
> 时间：2012-04-12T13:29:41.587
> 
> 标签：firefox, button, uninstallation, firefox-addon-sdk

我正在编写一个 Firefox 插件。我的老板想要弹出一个许可协议（知道了，它正在工作），用户可以接受或拒绝。我想要拒绝按钮来卸载加载项。Add-on SDK 1.6.1 Add-on 可以自行卸载吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T13:45:37.197

好的，我想通了：

```
const {Cu} = require("chrome");
let AddonManager = Cu.import("resource://gre/modules/AddonManager.jsm").AddonManager;
...
uninstallExtension(require("self").id);
...
function uninstallExtension(id) {
    AddonManager.getAddonByID(id,function(addon){addon.uninstall();});
} 
```

# c++ - 在 C++ 中自动生成 ID

> ID：10124609
> 
> 赞同：1
> 
> 时间：2012-04-12T13:29:42.540
> 
> 标签：c++, auto-generate

```
// AnE.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<conio.h>
#include<string.h>
#include<stdlib.h>
#include<iostream>
using namespace std;

// The maximum number of patients in queue
#define MAXPATIENTS 30

// define structure for patient information
struct patient

{
   char FirstName[50];
   char LastName[50];
   char ID[20];
};

// define class for queue
class queue
{
   public:
   queue (void);
   int RegisterPatien (patient p);
   int RegisterPatientAtBeginning (patient p);
   patient GetNextPatient (void);
   int CancelAll (patient * p);
   void OutputList (void);
   char DepartmentName[50];
   private:
   int ShowAllPatient;
   patient List[MAXPATIENTS];
};

// declare member functions for queue

queue::queue ()
{
   // Constructor
   ShowAllPatient = 0;
}

int queue::RegisterPatien (patient p)
{
   // To add a patient (normally) to the queue (to the end).
   // returns 1 if successful, 0 if queue is full.
  if (ShowAllPatient >= MAXPATIENTS)
   {
      // queue is full
      return 0;
   }
      // put in new patient
      else
      List[ShowAllPatient] = p;  ShowAllPatient++;
      return 1;
}

int queue::RegisterPatientAtBeginning (patient p)
{
   // adds a critically ill patient to the beginning of the queue.
   // returns 1 if successful, 0 if queue is full.
   int i;
   if (ShowAllPatient >= MAXPATIENTS)
   {
      // queue is full
      return 0;
   }

   // move all patients one position back in queue
   for (i = ShowAllPatient-1; i >= 0; i--)
   {
      List[i+1] = List[i];
   }
   // put in new patient
   List[0] = p;  ShowAllPatient++;
   return 1;
}

patient queue::GetNextPatient (void)
{
   // gets the patient that is first in the queue.
   // returns patient with no ID if queue is empty

   int i;  patient p;
   if (ShowAllPatient == 0) {
   // queue is empty
   strcpy(p.ID,"");
   return p;}
   // get first patient
   p = List[0];
   // move all remaining patients one position forward in queue
   ShowAllPatient--;
   for (i=0; i<ShowAllPatient; i++)
   {
      List[i] = List[i+1];
   }
   // return patient
   return p;
}

int queue::CancelAll (patient * p)

{
   // removes a patient from queue.
   // returns 1 if successful, 0 if patient not found
   int i, j, found = 0;
   // search for patient
   for (i=0; i<ShowAllPatient; i++)
    {
            if (stricmp(List[i].ID, p->ID) == 0)
        {
        // patient found in queue
        *p = List[i];  found = 1;
        // move all following patients one position forward in queue
        ShowAllPatient--;

    for (j=i; j<ShowAllPatient; j++)
                {
                        List[j] = List[j+1];
                }
        }
    }
   return found;
}

void queue::OutputList (void)
{
   // lists entire queue on screen
   int i;
   if (ShowAllPatient == 0)
    {
            cout<< "Queue is empty";
    }
   else
    {

        for (i=0; i<ShowAllPatient; i++)
        {
            cout << "First Name : " << List[i].FirstName<<endl;
            cout << "Last Name : " << List[i].LastName<<endl;
        }
    }
}

// declare functions used by main:

patient InputPatient (void)

{
   // this function asks user for patient data.
   patient p;
   cout<<endl<<endl;
   cout << "Please enter the information of the Patient"<<endl<<endl;
   cout << "First name: "<<endl<<endl;
   cin.getline(p.FirstName, sizeof(p.FirstName));
   cout << "Last name: "<<endl<<endl;
   cin.getline(p.LastName, sizeof(p.LastName));
   // check if data valid
   if (p.FirstName[0]==0 || p.LastName[0]==0 || p.ID[0]==0)
    {
            // rejected
            strcpy(p.ID,"");
            cout << "Error: Data not valid. Operation cancelled.";
            getch();
    }
   return p;
}

void OutputPatient (patient * p)
{
   // this function outputs patient data to the screen
   if (p == NULL || p->ID[0]==0)
    {
            cout << "No patient";

    return;
    }
   else
   cout << "Patient Information:"<<endl<<endl;
   cout << "First name: " << p->FirstName<<endl<<endl;
   cout << "Last name: " << p->LastName<<endl<<endl;
}

int ReadNumber()
{
   // this function reads an integer number from the keyboard.
   // it is used because input with cin >> doesn't work properly!
   char buffer[20];
   cin.getline(buffer, sizeof(buffer));
   return atoi(buffer);
}

void DepartmentMenu (queue * q)
{
   // this function defines the user interface with menu for one department
   int choice = 0, success;  patient p;
   while (choice != 6)
    {
        // print menu
           system("CLS");
           cout << "<< || Welcome || >> "<<endl << q->DepartmentName<<endl;
           cout << "Please enter your choice:"<<endl<<endl;
           cout << "1:  Register patient"<<endl;
           cout << "2:  Serve patient "<<endl;
           cout << "3:  Cancel all patients from queue"<<endl;
           cout << "4:  Show all patient"<<endl;
           cout << "5:  Exit"<<endl<<endl<<endl<<endl<<endl<<endl<<endl<<endl;

           choice = ReadNumber();

        switch (choice)
      {
            case 1:   // Add new patient
        p = InputPatient();
        if (p.ID[0])
           {
                success = q->RegisterPatien(p);
                system("CLS");
                if (success)
                {
                    cout << "Patient added:"<<endl<<endl;

                }
            else
           {
                // error
                cout << "Sorry: The queue is full. We Cannot add any patient:";
           }
                OutputPatient(&p);
                cout << "Press any key";
                getch();
      }
     break;

      case 2:   // Call patient for operation /First Come First Surve
     p = q->GetNextPatient();
     system("CLS");
     if (p.ID[0])
        {
           cout << "Patient to operate:";
           OutputPatient(&p);
     }
     else
        {
           cout << "Currently there is no patient to operate.";
     }
           cout << "Press any key to contiune";
           getch();
           break;

      case 3:   // Cancel all from queue
     p = InputPatient();
     if (p.ID[0])
       {
            success = q->CancelAll(&p);
            system("CLS");          
            if (success)
              {
                cout << "Patient removed:";
              }
              else
              {
                // error
                cout << "Sort: We cannot find patient:";
              }
        OutputPatient(&p);
            cout << "Press any key to contiune";
            getch();
       }
     break;

      case 4:   // Show all patient -> queues
          system("CLS");
          q->OutputList();
     cout << "Press any key";
     getch();  break;
     }
      }
}

// the main function defining queues and main menu
void main ()
{
   int i, MenuChoice = 0;
   // define  queue
   queue department[1];
   // set department name
   strcpy_s (department[0].DepartmentName, "To Emergency Department");

   while (MenuChoice != 2)
    {
        system("CLS");

// Cout menu
           cout<<"\n------------------------------------\n";
           cout << "Welcome to Waiting Room Management System"<<endl;
           cout<<"---------------------------------------\n";
           cout << "Please Select a Number from the following menu:"<<endl<<endl;
          for (i = 0; i < 1; i++)

    {
           // write menu item for department i
           cout<< "" << (i+1) << ":  "<< department[i].DepartmentName;
           cout<<endl;
          }
          cout << "2:  Exit"<<endl;
          // get user choice
          MenuChoice = ReadNumber();
          // is it a department name?
            if (MenuChoice >= 1 && MenuChoice <= 1)
            {
            // call submenu for department
            // (using pointer arithmetics here:)
            DepartmentMenu (department + (MenuChoice-1));
            }
    }
} 
```

好的，候诊室是 Vc++。您可以看到代码运行良好，但生成 ID 有问题！我需要为每个患者生成 ID（由系统自动生成）。如何为我的队列生成 ID？非常感谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:33:20.867

通常，您可以通过`static`在该类中放置一个变量来做到这一点，并且每次获得一个新患者时，您将其当前值分配给当前患者，然后将其递增。

```
class patient { 
    // ...
    int id;

    static int current_id; // added

    patient() : id(current_id++) {} // added
};

int patient::current_id; // added 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-21T19:17:04.233

其他答案很好，但当前接受的答案实际上并不是另一位用户指出的线程安全的。

要制作线程安全的 ID 生成函数，我们可以使用原子！这是对当前接受的答案的修改，使其成为线程安全的。

```
#include <atomic> //std::atomic_uint32_t

class patient 
{ 
    // ...
    uint32_t id;

    static std::atomic_uint32_t current_id; // added

    patient() : id(current_id++) {} // added
};

uint32_t patient::current_id; // added 
```

`std::atomic_uint32_t`是一个 32 位无符号整数，如果由两个不同的线程同时写入，它（因为它的原子性）不会有任何数据竞争。

我还将整数更改为无符号。这是因为 ID 永远不会是负数，因此将其设为无符号是有意义的。

[https://en.cppreference.com/w/cpp/atomic/atomic](https://en.cppreference.com/w/cpp/atomic/atomic)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:33:11.430

如果你想要唯一的 id，你可以生成一个 GUID。对于 VC++，您可以使用：

```
extern C
{
   #include <Rpc.h>
}

//...
UUID id;
UuidCreate ( &id ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:33:38.713

您可以在创建患者时使用静态变量（如果您需要它），它会在构造函数中自增，或者您队列中的变量会在您添加患者时增加（如果您只想在在队列中）。

但在你的情况下，我认为你想要第一个解决方案（构造函数中的静态变量）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-16T11:21:19.727

我对 SQL 数据库有同样的需求，最终得到了这个......

警告：主要是混合 C 和 C++ 的不良编程示例（仍需要转换旧代码），但它是为了传达这个想法。我确信存在更好的解决方案......

它根据当前日期和时间生成（不幸的是）基于大字符的 ID。这意味着每个下一个自动生成的 ID 都需要更大：如果它相等或更小，则附加一个毫秒计时器，代码将等待直到 ID 变得唯一。它也可以在没有毫秒的情况下工作，但是如果您需要一次生成多个 ID（每次暂停一秒钟），这将导致长时间的延迟。如果需要，它还将添加一个可选的后缀（可以帮助省略毫秒）。

我对简单计数器的经验是，它们在某些情况下可能会重复，这让我寻找替代方案。

小心：另一台计算机上的另一个用户可能会生成相同的 ID...（相同的秒或毫秒）

```
TUID::TUID()

{
 *LastID = 0; // char [80] - Global within object
}    

void TUID::GetToday (int *d, int *m, int *y)

{
  time_t now;
  struct tm *ltm;

  time (&now);
  ltm = localtime (&now);

  *y = ltm->tm_year + 1900;
  *m = ltm->tm_mon + 1;
  *d = ltm->tm_mday;
}

void GetTime (int *h, int *m, int *s)

{
time_t t = time(0);   // get time now
struct tm * now = localtime( & t );

*h = now->tm_hour;
*m = now->tm_min;
*s = now->tm_sec;
}

const char *TUID::NewUID (bool bPreviousAttemptFailed, const char *_postfix)

{
  int d, m, y,
      _h, _m, _s;
  bool bSameAsLastUID;
  char _uid [80];

  GetToday (&d, &m, &y);

  do
    {
      GetTime (&_h, &_m, &_s);
      sprintf (_uid, "%04d%02d%02d_%02d%02d%02d%s", y, m, d, _h, _m, _s, _postfix);
      bSameAsLastUID = (strcmp (_uid, LastUID) <= 0);
      if (bPreviousAttemptFailed || bSameAsLastUID)
        sprintf (_uid + strlen (_uid), "_%d", 
std::chrono::duration_cast<std::chrono::milliseconds>(std::chrono::steady_clock::now().time_since_epoch()).count());
    }
  while (strcmp (_uid, LastUID) <= 0);

  strcpy (LastUID, _uid);

  return LastUID;
} 
```

这导致ID是这样的：

```
20170816_115904 (no post-fix)
20170816_115904i (with post-fix keeping id unique, preventing milliseconds)
20170816_115904i_6427264 (auto-added milliseconds to keep ID unique)
20170816_115904i_6427265
20170816_115904i_6427266 
```

# stack - 如何粉碎堆栈？

> ID：10124615
> 
> 赞同：2
> 
> 时间：2012-04-12T13:29:51.883
> 
> 标签：stack

我有一点堆栈粉碎的任务。那么粉碎堆栈的最简单方法是什么？我只想要一个简单的说明性方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:34:28.323

尝试阅读 Aleph One 的“ [Smashing the Stack for Fun and Profit](http://insecure.org/stf/smashstack.html) ”。

# php - ajax没有将参数传递给php

> ID：10124617
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:04.277
> 
> 标签：php, ajax, parameters, insert

我对将记录插入数据库的 php 文件进行了 ajax 调用。但是，我没有看到在 php 文件中传递的参数值，其中我有将值插入数据库的代码。这是我的ajax调用

```
 dataString = 'firstname=Jim&lastname=Smith';
  $.ajax(
  {
    type: "POST",
    url: "submit.php",
    data: dataString,
  }); 
```

这就是我在 submit.php 文件中读取值的方式

```
$first_name = mysql_escape_string($_POST('firstname'));
$last_name = mysql_escape_string($_POST('lastname'));
$query = "INSERT into USERS (first_name, last_name) VALUES ('$first_name','$last_name'); 
```

但我在 $first_name 或 $last_name 中没有看到任何值，因此没有插入任何记录。如果我在 submit.php 文件中静态定义了 $first_name = 'Jim' 和 $last_name = 'Smith'，那么我会看到记录被插入到数据库中。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:34:52.253

`$_POST`是一个数组，因此您应该使用`$_POST['var']`而不是访问它的内容`$_POST('var')`。我建议您启用错误报告，这将帮助您更好地调试。例如，您的代码会导致致命错误。

```
$first_name = mysql_escape_string($_POST['firstname']);
$last_name = mysql_escape_string($_POST['lastname']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:34:48.420

您可以尝试在对象结构而不是字符串中添加参数，例如：

数据：{名：“吉姆”，姓：“史密斯”}

# java - 接近的物体看起来被拉伸/改变消失点？

> ID：10124618
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:04.987
> 
> 标签：java, android, opengl-es, perspective

我在 OpenGL 中为我的 android 应用程序构建了一个非常好的魔方。不幸的是，当我将它靠近相机时，它看起来有点拉长。它看起来像这样：

![我的魔方 1](../Images/48975161c241731293622c2a04ce4377.png)

![我的魔方2](../Images/004a2e571d9ce4a21a1e5dcf7c33b282.png)

我想让我的立方体尽可能大地出现在我的屏幕上，但没有那种拉伸。

这是一段代码：

```
gl.glMatrixMode(GL10.GL_MODELVIEW);

    gl.glLoadIdentity();

    float z = 3;
    float x = 0;
    float y = 3;

    GLU.gluLookAt(gl, x, y, z, 0, 0, 0, 0, 1, 0); 
```

我尝试使用 GLU.gluPerspective() 但它不起作用。

编辑：这是我的渲染器类的更多代码：

```
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    gl.glDisable(GL10.GL_DITHER);

    gl.glClearColor(0, 0, 0, 0);

    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glClearDepthf(1f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
}

@Override
public void onDrawFrame(GL10 gl) {

    gl.glDisable(GL10.GL_DITHER);

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glMatrixMode(GL10.GL_MODELVIEW);

    gl.glLoadIdentity();

    float z = 3;
    float x = 0;
    float y = 3;

    GLU.gluLookAt(gl, x, y, z, 0, 0, 0, 0, 1, 0);

    gl.glRotatef(angleX, 1, 0, 0); //This is the rotation if surface is touched
    gl.glRotatef(angleY, 0, 1, 0); 

    f.draw(gl); //drawing the pieces of the cube
    r.draw(gl);
    l.draw(gl);
    u.draw(gl);
    d.draw(gl);
    b.draw(gl);

    for (int i = 0; i < corners.length; i++) {
        corners[i].draw(gl);
    }
    for (int i = 0; i < edges.length; i++) {
        edges[i].draw(gl);
    }
    display(); //this has nothing to do with opengl

}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);

    float ratio = (float) width / height;

    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glFrustumf(-ratio, ratio, -1, 1, 1, 25);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:33:34.300

相机离物体太近。尝试将相机向后移动一点，近平面向后移动一点。（第 5 个参数`glFrustumf`）。

# opencart - Opencart 中如何填充 $styles 数组？

> ID：10124623
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:29.637
> 
> 标签：opencart

我开始使用 Opencart，并通过复制默认模板制作自己的模板。

当我浏览 template/common/header.tpl 时，我看到以下几行

```
<?php foreach ($styles as $style) { ?>
<link rel="<?php echo $style['rel']; ?>" type="text/css" href="<?php echo $style['href']; ?>" media="<?php echo $style['media']; ?>" />
<?php } ?> 
```

我一直在想，它是如何被填充的。虽然我已经更改了主题以用作我的新主题，但它仍然填充了旧的默认样式表。如果有人能指出我错过的方向，我将非常感激。如果这是一个幼稚的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:52:18.860

`$this->document->addStyle()`样式被各种控制器类添加到数组中。如果您想查看方法的源代码，该类`$this->document`位于`/system/library/document.php`

# iphone - 将 NSarray 项插入指定的 UItableviewcell

> ID：10124626
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:34.613
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个包含 10 个单元格的 UItableview。我需要将来自 NSarray 的消息显示到这个 tableview 中。数组包含 3 个项目，需要显示在 3 个单元格中的任何一个中。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    CustomTableView *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[ CustomTableView alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    NSString *order = [orderArray objectAtIndex:indexPath.row];

    NSString *sdate = [dateArray objectAtIndex:indexPath.row];

//Label positions    
    UILabel *ordernum = [[UILabel alloc] initWithFrame:CGRectMake(5,28,95,21)];
    UILabel *date = [[UILabel alloc] initWithFrame:CGRectMake(100,28,80,21)];
    UILabel *orderStatusMessage = [[UILabel alloc] initWithFrame:CGRectMake(200,28,80,21)];

    NSString *ordertypeName  =   [ordertypeArray objectAtIndex:indexPath.row];

    ordernum.textColor = [UIColor blackColor];

    [cell.contentView addSubview:ordernum];

    date.textColor = [UIColor blackColor];

     [cell.contentView addSubview:date];

    orderStatusMessage.textColor = [UIColor blackColor];

    if ([ordertypeName isEqualToString:@"saved"]) {
        ordernum.text   =   [NSString stringWithString:@"Saved Order"];

        date.text = [NSString stringWithFormat:@"%@",sdate];

    }
    else{

        if (![order isEqualToString:@""]) {
            for (int i=0; i<[reversed count]; i++)
                {
            stat=[reversed objectAtIndex:i];
                }

        }

    ordernum.text = [NSString stringWithFormat:@"%@",order];

    date.text = [NSString stringWithFormat:@"%@",sdate];

    orderStatusMessage.text =[NSString stringWithFormat:@"%@",stat];

    [cell.contentView addSubview:orderStatusMessage];

    }
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    cell.selectionStyle = UITableViewCellSelectionStyleGray;

//   } 

    return cell;
} 
```

使用上面的代码，我只能从反向数组中获取最后一项。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:00:07.003

首先，你的 for 循环是假的

```
if (![order isEqualToString:@""]) {
        for (int i=0; i<[reversed count]; i++)
            {
        stat=[reversed objectAtIndex:i];
            }

} 
```

为什么每次迭代都循环并覆盖对 stat 的引用？这显然不是你的意图。

其次，我建议重构，因为这段代码非常令人困惑，而且几乎不可能理解其意图。请在重命名变量并稍微清理代码后重新发布。

# r - 如何使用结构（）创建整数向量？

> ID：10124628
> 
> 赞同：1
> 
> 时间：2012-04-12T13:30:40.127
> 
> 标签：r, types, integer

我似乎无法使用`structure()`.

```
> x <- structure(c(1,2), class='integer', mode='integer', storage.mode='integer')
> paste(class(x), mode(x), storage.mode(x), is.integer(x))
[1] "integer numeric double FALSE" 
```

与真正的整数向量比较：

```
> y <- as.integer(c(1,2))
> paste(class(y), mode(y), storage.mode(y), is.integer(y))
[1] "integer numeric integer TRUE" 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:40:51.463

试试这个：

```
> x <- structure(c(1L,2L))
> is.integer(x)
[1] TRUE 
```

只是

```
> x <- c(1L,2L)
> is.integer(x)
[1] TRUE 
```

没关系。

# php - 从一个网页重定向到另外两个网页

> ID：10124630
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:43.153
> 
> 标签：php, javascript, webpage, redirect

实际上，我正在使用 API 从我的网站的网页发送短信。短信网关站点只提供发送反馈，不返回我的网站。发送短信后，我需要发送电子邮件和更新数据库。我知道 JavaScript 和 PHP。

我不想依赖短信网关重定向，有没有办法在没有他们参与的情况下访问他们的网页并返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:34:05.987

使用 cURL 从您的服务器调用 API 并使客户端体验完全在您的控制之下 - 这样您不仅可以重定向、AJAX 或任何您想要的东西，您还可以在客户端滥用您的页面时躲避一些低飞的子弹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:35:52.053

从您的问题来看，我假设您通过将浏览器重定向到 SMS 网关站点来将控制权转移到它，然后没有。一旦浏览器离开您的站点并加载网关站点，您将无法再运行任何代码。

相反，如果您是通过服务器或客户端代码调用 SMS 网关 API，那么可以。调用 API 的 HTTP 请求完成后，您将能够像往常一样执行重定向。

# javascript - 动态控制的 z-Index

> ID：10124631
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:44.237
> 
> 标签：javascript, html, z-index

我正在尝试创建三个重叠 div，它们的 z-Index 使用 Javascript 动态更改。选择时，我的 div 位于堆栈顶部，但我无法单击顶部 div 下方的其他 div。有人可以帮我吗？以下是我正在使用的 Javascript：

```
<script>
$(document).ready(function() {
$("div#box").click(function() {
    $(this).css({'z-index' : '9999'});
} , function() {
    $(this).css({'z-index' : '1'});
});
});
</script> 
```

CSS：

```
 #container{
display: block;
position:relative;
margin: 0px;
padding: 0px;
width: 465px;
height: 350px;
 }

 .redBox {
display: block;
margin: 0px;
padding: 0px;
width: 450px;
border: 1px solid #ED1F24;
z-index: 100;
position: absolute;
top: 120px;
right:0px;
background-color: #FFF;
cursor:pointer;
  }

  .redBox h1 {
font-family: Arial, Helvetica, sans-serif;
font-size: 18px;
font-weight: bold;
color: #FFF;
background-color: #ED1F24;
display: block;
height: 10px;
margin: 0px;
text-align: left;
padding: 10px 10px 10px 20px;
line-height: 10px;
 }

 .redBox h2 {
font-family: Arial, Helvetica, sans-serif;
font-size: 10px;
font-weight: normal;
color: #FFF;
background-color: #ED1F24;
display: block;
height:10px;
margin: 0px;
text-align: left;
padding: 10px 10px 10px 20px;
line-height: 10px;
 }

 .redBox ul {
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
font-weight: normal;
color: #000;
margin: 0px;
height: 150px;
padding: 10px 10px 0px 20px;
 }

 .redBox p{
margin:0px;
padding:0px;    
 }

 .redBox .boxFooter {
font-family: Arial, Helvetica, sans-serif;
font-size: 9px;
line-height: 1.1em;
color: #000;
padding-top: 10px;
padding-right: 20px;
padding-bottom: 10px;
padding-left: 0px;
margin-top: 0px;
list-style-type: none;
margin-left: 5px;
}

.blueBox .footer {
font-family: Arial, Helvetica, sans-serif;
font-size: 9px;
line-height: 1.1em;
color: #000;
padding-top: 10px;
padding-right: 20px;
padding-bottom: 10px;
padding-left: 0px;
margin-top: 0px;
list-style-type: none;
margin-left: 20px;
 }

 .blueBox {
display: block;
margin: 0px;
padding: 0px;
width: 430px;
border: 1px solid #2B3087;
z-index: 50;
position: absolute;
top: 90px;
right:0px;
background-color: #FFF;
cursor:pointer;
 }

 .blueBox h1 {
font-family: Arial, Helvetica, sans-serif;
font-size: 18px;
font-weight: bold;
color: #FFF;
background-color: #2B3087;
display: block;
height: 10px;
margin: 0px;
text-align: left;
padding: 10px 10px 10px 20px;
line-height: 10px;
 }

 .blueBox h2 {
font-family: Arial, Helvetica, sans-serif;
font-size: 10px;
font-weight: normal;
color: #FFF;
background-color: #2B3087;
display: block;
height:10px;
margin: 0px;
text-align: left;
padding: 10px 10px 10px 20px;
line-height: 10px;
 }

 .blueBox p {
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
line-height: 1.1em;
color: #000;
padding: 0px 0px 0px 20px;
margin: 5px 0px;
 }

 .blueBox p strong {
font-family: Arial, Helvetica, sans-serif;
font-size: 16px;
font-weight:bold;
line-height: 1.1em;
color: #000;
 }

 .greenBox {
display: block;
margin: 0px;
padding: 0px;
width: 410px;
border: 1px solid #99CA3C;
z-index: 2;
position: absolute;
top: 60px;
right:0px;
background-color: #FFF;
cursor:pointer;
 }

 .greenBox h1 {
font-family: Arial, Helvetica, sans-serif;
font-size: 20px;
font-weight: bold;
color: #FFF;
background-color: #99CA3C;
display: block;
height: 10px;
margin: 0px;
text-align: left;
padding: 10px 10px 10px 20px;
line-height: 10px;
  }

  .greenBox h2 {
font-family: Arial, Helvetica, sans-serif;
font-size: 10px;
font-weight: normal;
color: #FFF;
background-color: #99CA3C;
display: block;
height:10px;
margin: 0px;
text-align: left;
padding: 10px 10px 10px 20px;
line-height: 10px;
  }

  #hero {
display: block;
margin: 0px;
padding: 0px;
height: 315px;
width: 465px;
text-align: center;
  } 
```

HTML：

```
 <td width="50%" rowspan="2" valign="top" style="position:relative;">
 <div id="hero"><img src="images/image.jpg" alt="" width="300" height="315" border="0" />
 </div>
 <div id="container">
 <div class="redBox" id="box">
        <h1>Rewards</h1>
        <ul>
          <li>Text</li>
                      <li>Text</li>
                      <li>Text</li>>
                  <li>Text</li>
                   </ul>
       <h2>Rewards</h2> 
</div>

<div class="blueBox" id="box">
           <h1>Service and Security</h1>
       <p>text</p>
           <p>text</p>
           <p>text</p>
           <<p>text</p>
           <p class="footer">Text</p>
           <h2>Service and Security</h2>    
</div>
<div class="greenBox" id="box">
           <h1>Redeem Rewards</h1>
        <ul>
                <li>text Here</li>
                    <li>text Here</li>
                    <li>text Here</li>
                </ul>
        <h2>Rewards</h2>    
</div>
</div>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:45:50.217

您的代码有几个问题。首先，您的目标是`id`，它应该是唯一的，而不是用于识别多个元素。您的代码将只针对 that 的第一个实例`id`。而是使用类名来定位不同的 div。其次，`click`接受一个参数，一个事件处理程序，或两个，其中第一个是事件数据，第二个是处理程序。因此，您的代码只执行那里的第二个函数，并且只针对第一个 div。

试试这个：

```
$(document).ready(function() {
    var zIndex = 9999;
    $(".box").click(function() {
        $(this).css({'z-index': zIndex++ });
    });
});​ 
```

HTML。

```
<div class="box"></div>
<div class="box"></div>
<div class="box"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:29:47.440

我用一个可行的解决方案创建了一个小提琴。如果您需要更改元素的 z-index，则必须将其位置属性设置为“静态”以外的任何内容。静态是默认设置，因此您可以将其更改为“绝对”或“相对”。如果您不这样做，浏览器会忽略 z-index。此外，当您尝试通过 javascript 更改 CSS 属性时，您不能使用“z-index”，javascript 使用驼峰命名法作为名称。

这是小提琴的链接：http: [//jsfiddle.net/vKeqD/](http://jsfiddle.net/vKeqD/)

这是后代的代码：

```
$(document).ready(function() {
    var zIndex = 9999;
    $(".box").on('click', function() {
        $(this).css({'zIndex' : zIndex++ , 'position': 'absolute'});
    });
}); 
```

您还会看到我将事件侦听器更改为使用“on”而不是“click”。这仅仅是因为您仅以这种方式添加一个事件侦听器，而不是为每个目标元素附加不同的侦听器。在您的情况下，您只有三个目标。但是，如果你说 100，你只附加一个事件侦听器而不是 100。希望这会有所帮助。

# android - 动态控制位置跟踪的正确方法（注册/注销位置广播接收器）

> ID：10124633
> 
> 赞同：0
> 
> 时间：2012-04-12T13:30:50.680
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter, locationmanager

我想动态控制位置跟踪（注册/注销位置广播接收器）。这就是我打算这样做的方式。我有两个问题：

1.  下面的实现中有什么错误，因为所有这些概念对我来说仍然非常理论化，因为我对 android/java 开发人员非常陌生。仍在构建概念！

2.  如何将一些 EXTRA_INFO 从我的位置库类传递给位置接收器。

**执行：**

我有一个库类 LocationLibrary.java，它由两种方法组成。他们就像名字所暗示的那样。位置跟踪应该在我调用 startTracking() 时开始。请注意需要传递给 myLocationReceiver 的 extraInfo。调用 stopTracking() 时应该停止跟踪。

代码片段：

```
public class LocationLibraray
{
    private static BroadcastReceiver myLocationReceiver;

    public LocationLibraray(Context context)
    {
        this.ctx = context;
        myLocationReceiver = new MyLocationReceiver();
    }

    public void startTracking(Context context, String extraInfo)
    {
         IntentFilter filter = new IntentFilter();
         filter.addAction("com.app.android.tracker.LOCATION_READY");
         context.registerReceiver(myLocationReceiver, filter);

        // NEED TO PASS extraInfo to myLocationReceiver for some processing, but HOW?
    }

    public void stopTracking(Context context)
    {
        context.unregisterReceiver(locationReceiver);
    } 
```

}

MyLocationReceiver.java

```
public class MyLocationReceiver extends BroadcastReceiver  {

    public void onReceive(final Context context, Intent intent) {
        if ((intent.getAction() != null) && 
                (intent.getAction().equals("com.app.android.tracker.LOCATION_READY")))
        {
             //GET THAT EXTRA INFO FROM LocationLibrary class and process it here
        }
    }
} 
```

请帮帮我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:41:12.143

为什么不向 MyLocationReceiver 添加构造函数？

```
public class MyLocationReceiver extends BroadcastReceiver {
 String info = "";

 public MyLocationReceiver(String extraInfo)
 {
     this.info = extraInfo;

 }
 ........
 public void onReceive(final Context context, Intent intent) {
     if ((intent.getAction() != null) && 
                (intent.getAction().equals("com.app.android.tracker.LOCATION_READY")))
        {
             if (info.contains("Hi"))
                 //do some stuff
        }
    }

} 
```

你会像这样实例化它：

```
myLocationReceiver = new MyLocationReceiver(new String("Hello!")); 
```

# c++ - 当用户在视图之间切换时如何通知您？

> ID：10124638
> 
> 赞同：1
> 
> 时间：2012-04-12T13:31:21.650
> 
> 标签：c++, visual-c++, mdi, mdichild

在 MDI 应用程序中，当用户在视图之间切换时，必须更新某些内容。当这种情况发生时，最好处理什么信息？在我的应用程序中，一个文档只有一个视图，但从逻辑上讲，我希望在文档之间切换时得到通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:58:22.420

您可以在 CChildFrame (ChildFrm.h) 中捕获 WM_SETFOCUS。当用户单击视图窗口或以其他方式将焦点设置到视图时，此成员函数可以成为您需要在应用程序中设置的任何内容的桥梁。

# android - 从非活动类调用主要活动

> ID：10124646
> 
> 赞同：1
> 
> 时间：2012-04-12T13:31:50.853
> 
> 标签：android, android-activity

我一直在尝试许多不同的方法并获得空指针异常。

场景：Activity1 在启动时加载，如果表中的行数为 0，则调用 Activity2。现在我希望它在行数为 0 时返回到 Activity1，并且该调用将来自 db 处理程序。在数据库处理程序类中：

```
 if(num ==0){
        Activity1 bs1 = new Activity1();
        Context context = bs1.getApplicationContext();
        Intent intent = new Intent();//
        intent.setClass(context, Activity1.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);

    } 
```

Activity1 onCreate()

```
 int num = db.numOfRows();
    if(num==0){
        setContentView(R.layout.main);
    } else {    
        startActivity(new Intent(this, Activity2.class));//
    } 
```

Activity2 onCreate()

```
 super.onCreate(savedInstanceState);
        setContentView(R.layout.moreprojects);
        populateRows(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:34:12.087

您不应该自己实例化 Activity 类。尝试以这种方式启动它：

```
Intent i = new Intent(context, MainActivity.class);
context.startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:35:05.003

您不使用构造函数来调用新活动。见下文：

```
Context context = bs1.getApplicationContext();
Intent intent = new Intent();
intent.setClass(context, MainActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); //required to launch from non-activity
context.startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:12:06.487

您不能从还不是活动的上下文开始活动。在您的情况下，没有解决方案。*如果用户想要，*您可能需要考虑发送带有 PendingIntent 的通知来开始您的活动

# android - Android - 列表滚动没有页面上的其他元素

> ID：10124656
> 
> 赞同：0
> 
> 时间：2012-04-12T13:32:06.343
> 
> 标签：android, android-layout

我有一个活动，我在其中显示评论列表，然后显示一个文本区域供人们添加更多评论。

现在，如果有一些评论到达屏幕底部，它会被文本区域覆盖。

我希望整个页面与评论和文本区域一起滚动。

这是我当前的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >         

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >    

<TextView
    android:id="@+id/question_label"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Your question: "
    />     

<TextView
    android:id="@+id/question"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text=""
    />     

<TextView
    android:id="@+id/please_wait"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Please wait while the discussion loads..."
    />     

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >        
    </ListView>

        <EditText  
            android:id="@+id/question_text"  
            android:layout_height="wrap_content"  
            android:hint="@string/question_comment_hint"  
            android:inputType="textMultiLine"  
            android:lines="5"  
            android:layout_width="fill_parent">  
        </EditText>

<Button  
            android:id="@+id/submit"  
            android:layout_height="wrap_content"  
            android:text="@string/submit"  
            android:onClick="sendFeedback"  
            android:layout_width="fill_parent">  
        </Button>               

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:39:36.737

在列表视图中使用页脚 ( `view.setFooterView()`)。[这里](http://www.vogella.com/articles/AndroidListView/article.html#miscellaneous_headerfooter)解释了。

并且不要同时使用列表视图和滚动视图。Listview 在这里完全够用了。

# jpa - 在对象上执行 persist() 时 JDO/ORM 的行为是什么？

> ID：10124657
> 
> 赞同：0
> 
> 时间：2012-04-12T13:32:12.070
> 
> 标签：jpa, persistence, jdo

这是我的场景（我使用的是 datanucleus，JDO，但我认为它也适用于 JPA）：

```
tx.begin();
Dog d = new Dog();
persistenceManager.persist(d);
d.setName("Doggie");
tx.commit(); 
```

在上面的代码中，名称“Doggie”在数据库中没有持久化。然而，当做

```
tx.begin();
Dog d = new Dog();
d.setSize(10);
persistenceManager.persist(d);
Dog d2 = dogDao.getDogBySize(10);
d2.setName("Doggie");
tx.commit(); 
```

有用！

这种行为是否是因为我的“第二只”狗在某种程度上是一个托管实例，被从数据库中取出，而在第一个示例中，该对象是非托管的？

它是特定于 JDO 的行为吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:16:53.903

在上面的代码中，名称的更新确实存在于数据存储中......当我运行它时。实际上，当您查看日志时，您会看到一个非常清晰的 INSERT 用于持久化，然后是一个 UPDATE，除非在您获得具有最新名称值的单个 INSERT 时使用乐观 txns。

# javascript - JavaScript 事件处理

> ID：10124658
> 
> 赞同：0
> 
> 时间：2012-04-12T13:32:16.677
> 
> 标签：javascript, events, zepto

我制作了这个很棒的插件：[https ://github.com/suprMax/Zepto-onPress](https://github.com/suprMax/Zepto-onPress)

除了一个小细节之外，它还可以完美地工作。当我获得回调函数时，我需要将它与我的真实事件处理程序一起存储，以便当有人试图删除事件处理程序并为我提供原始回调时我可以将其分离。所以基本上我需要能够为每个元素存储多个键值对，其中键应该是函数，值也是函数。我试图做到这一点，但现在脚本在内部进行了这个：

```
(function(){}).toString() 
```

这不是一个最好的主意，因为我可以删除错误的事件处理程序，因为：

```
(function(){}).toString() === (function(){}).toString(). 
```

我想有更好的方法来做到这一点。任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:41:34.423

唯一安全且高效的方法是将您的函数存储在一个数组中（indexOf 完美地工作，因为它会搜索指针值）并使用数组索引将另一种方法推送到另一种方法。

```
var fn1store = [];
var fn2store = [];
function pushFunctions(fn1, fn2) {
   var p;
   if (p = fn1store.indexOf(fn1) > -1) {
     teardown(fn2store[p]);
   } 
   p = fn1store.push(fn1) -1;
   fn2store[p] = fn2;   

} 
```

# spring - 使用基于注释的 AOP 修改控制器响应？

> ID：10124660
> 
> 赞同：0
> 
> 时间：2012-04-12T13:32:24.180
> 
> 标签：spring, grails, groovy, aop, spring-aop

我正在尝试通过 AOP 将标头添加到控制器响应中，但我不确定如何访问控制器或控制器的响应。

我该怎么做呢？

这是我当前的注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target([ElementType.METHOD, ElementType.TYPE, ElementType.FIELD])
public @interface NoCaching {
} 
```

这是我目前的方面：

```
@Aspect
@Component("noCachingAspect")
class NoCachingAspect {

    @Pointcut("@annotation(com.grailsrocks.cacheheaders.NoCaching)")
    public void nameDoesntMatter() {
    }

    @Before("com.grailsrocks.cacheheaders.NoCachingAspect.nameDoesntMatter()")
    public void beforeMethod(JoinPoint joinPoint) throws Throwable {
        println 'hellowoeijf'
    }
} 
```

这是我使用注释的方式：

```
@NoCaching
    def annotations(){
        println 'bar'
    } 
```

如何访问注解所针对的控制器以修改响应对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:02:50.293

不久前我写了一篇关于此的博客文章，请参阅[http://burtbeckwith.com/blog/?p=80](http://burtbeckwith.com/blog/?p=80)

# mysql - 日期时间列的 MySql 转储和时区

> ID：10124672
> 
> 赞同：1
> 
> 时间：2012-04-12T13:33:14.923
> 
> 标签：mysql, datetime, timezone

我们最近将 mysql 服务器从 EST 移至 GMT。在这样做时，我们的 DateTime 列当前都具有不正确的偏移量。

例如，当服务器在 EST 中并且客户端在 PST 中时，本地 PST 日期时间 2012-01-01 00:00:0000 将在 EST 服务器上存储为 ...03:00:0000。现在移动服务器后，偏移量实际上应该是 7 而不是 3。因为 PST 和 GMT 之间有额外的 4 小时。

我已阅读可以使用 uct-tz 转储开关修改时间戳列，但尚未找到日期时间列的修复程序。

谢谢你的帮助。

# oracle - 使用hibernate注释和oracle继承序列

> ID：10124677
> 
> 赞同：2
> 
> 时间：2012-04-12T13:33:23.807
> 
> 标签：oracle, hibernate, inheritance, annotations, sequence

我有遗产

抽象类A：

```
@MappedSuperclass
public abstract class A {

    public Integer id;

    @Id
    @Column(name = "ID", nullable = false)
    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }
} 
```

子类 B，使用序列：

```
@Entity
@Table(name = "B")
public class B
    extends A {

    private String descripction;

    @Override
    @SequenceGenerator(name = "SEQ_TRANSACTIONID", sequenceName = "SEQ_TRANSACTION", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SEQ_TRANSACTIONID")
    public Integer getId() {
        return id;
    }

    @Column(name = "DESCRIPTION", nullable = false)
    public String getDescripction() {
        return descripction;
    }

    public void setDescripction(String descripction) {
        this.descripction = descripction;
    }
} 
```

和 C 子类，不需要序列：

```
public class C extends A {
} 
```

B 类需要生成序列，但 C 类不需要。

我在“create-drop”中使用“hibernate.hbm2ddl.auto”运行项目。但从未创建 SEQ_TRANSACTIONID。

我已经建立了这个[测试](http://dl.dropbox.com/u/52515066/hibernate-test-TRUNK.rar)，所以你可以重现错误。

请帮帮我.....

提前致谢。

# java - Java 程序从文本文件中读取输入并相应地修改它

> ID：10124678
> 
> 赞同：0
> 
> 时间：2012-04-12T13:33:30.640
> 
> 标签：java, string, file-io

我正在编写一个 Java 程序，它输入一个测试文件，对数据进行一些修改，然后将其写入一个新的文件输出。

输入文本文件如下所示...

```
url = http://184.154.145.114:8013/wlraac name = wlr samplerate = 44100 channels =2 format = S16le~
url = http://newstalk.fmstreams.com:8080 name = newstalk samplerate = 22050 channels = 1 format = S16le 
```

程序需要能够将采样率更改为 44100，并将通道更改为 1，如果它们还没有这些值的话。我也会完全删除 url 和 name 部分。在这些更改之后，需要将新行写出到不同的输出文本文件中。

到目前为止，我的程序所能做的就是选择一个文件并向用户显示文件的内容。有人可以指出我的程序应该如何工作以实现我所要求的结果的正确方向。

正如有人在这里问的那样，这是我到目前为止所拥有的

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;

import javax.swing.JFileChooser;
import javax.swing.JFrame;

public class reader2 {
public reader2() {
}
public static void main(String[] args) {
    reader(args);

}
public static void reader(String[] args) {

    JFileChooser chooser = new JFileChooser();
    chooser.setCurrentDirectory(new File("."));

    chooser.setFileFilter(new javax.swing.filechooser.FileFilter() {
        public boolean accept(File f) {
            return f.getName().toLowerCase().endsWith(".txt")
            || f.isDirectory();
        }

        public String getDescription() {
            return "Text Documents (.txt)";
        }
    });

    int r = chooser.showOpenDialog(new JFrame());
    if (r == JFileChooser.APPROVE_OPTION) {
        String name = chooser.getSelectedFile().getName();
        String pathToFIle = chooser.getSelectedFile().getPath();
        System.out.println(name);
        try{
            BufferedReader reader = new BufferedReader( new FileReader( pathToFIle ) ); //Setup the reader

            while (reader.ready()) { //While there are content left to read
                String line = reader.readLine(); //Read the next line from the file
                String[] tokens = line.split( "url = " ); //Split the string at every @ character. Place the results in an array.

                for (String token : tokens){ //Iterate through all of the found results

                        //System.out.println(token);
                        System.out.println(token);
                    }

            }

            reader.close(); //Stop using the resource
        }catch (Exception e){//Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:40:49.147

你需要做这样的事情......

1.  读取文件内容，一次一行
2.  将行拆分为单独的组件，例如将其拆分为“空格”字符
3.  根据您的问题更改采样率和通道值
4.  将该行写入文件，然后从步骤 1 重新开始。

如果您尝试一下，请在 StackExchange 上发布一些有任何问题的代码，我们会尽力提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:11:26.607

你能试一下吗

```
 File file = new File( fileName );
        File tempFile = File.createTempFile("buffer", ".tmp");
        FileWriter fw = new FileWriter(tempFile);

        Reader fr = new FileReader(file);
        BufferedReader br = new BufferedReader(fr);

        while(br.ready()) {
            String line = br.readLine();
            String newLine = line.replaceAll( "samplerate =\\s*\\d+", "samplerate = 44100");
            newLine = newLine.replaceAll( "channels =\\s*\\d+", "channels = 1");

            fw.write(newLine + "\n");
        }

        fw.close();
        br.close();
        fr.close();

        // Finally replace the original file.
        tempFile.renameTo(file); 
```

参考：[文件 java 替换字符](https://stackoverflow.com/questions/3940997/files-java-replacing-characters)

# c++ - 如果我读取不存在键的地图值会发生什么？

> ID：10124679
> 
> 赞同：107
> 
> 时间：2012-04-12T13:33:31.930
> 
> 标签：c++, map

```
map<string, string> dada;
dada["dummy"] = "papy";
cout << dada["pootoo"]; 
```

我很困惑，因为我不知道它是否被认为是未定义的行为，如何知道我何时请求一个不存在的密钥，我是否只使用 find 代替？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-04-12T13:34:38.077

在`map::operator[]`数据结构中搜索与给定键对应的值，并返回对它的引用。

如果找不到它，它会透明地为其创建一个默认构造元素。（如果您不想要这种行为，您可以使用该`map::at`函数。）

您可以在此处获取 std::map 方法的完整列表：

[http://en.cppreference.com/w/cpp/container/map](http://en.cppreference.com/w/cpp/container/map)

这是`map::operator[]`来自当前 C++ 标准的文档...

### 23.4.4.3 地图元素访问

### `T& operator[](const key_type& x);`

1.  效果：如果映射中没有与 x 等效的键，则将 value_type(x, T()) 插入映射中。

2.  要求：key_type 应为 CopyConstructible，mapped_type 应为 DefaultConstructible。

3.  返回：对 *this 中 x 对应的 mapped_type 的引用。

4.  复杂性：对数。

### `T& operator[](key_type&& x);`

1.  效果：如果映射中没有与 x 等效的键，则将 value_type(std::move(x), T()) 插入映射中。

2.  要求：mapped_type 应为 DefaultConstructible。

3.  返回：对 *this 中 x 对应的 mapped_type 的引用。

4.  复杂性：对数。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-12-20T13:18:09.797

如果您尝试访问`key value`using 索引运算符`[]`，则可能会发生 2 件事：

1.  地图包含这个`key`。所以它会返回对应的`key value`.
2.  该地图不包含`key`. 在这种情况下，它会自动`key`在地图中添加`null value`.

`"pootoo"`您的地图中不存在密钥。所以它会自动添加这个`key`（`value = ""`空字符串）。您的程序将打印空字符串。

这里地图大小将增加`1`.

要搜索您可以使用的键，如果该键不存在`map_name.find()`，它将返回。`map_name.end()`并且不会`key`添加任何额外内容。

`[]`当您想为键设置值时，可以使用运算符。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-12T13:35:29.650

这不是未定义的行为。如果`operator []`没有找到提供的键的值，它会在该位置插入一个值。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-12T13:35:12.707

对于 operator[]，如果您尝试访问不存在的键的值，则默认构造的新值对象将被放入映射并返回它的引用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-12T13:44:16.570

`operator[]`for`map`返回一个非常量引用，您可以按照您在第二行显示的方式使用它进行分配。以这种方式访问​​将创建`value`类型的默认构造元素。

如果你想找到一个元素，更好的方法是

```
iterator find ( const key_type& x ) 
```

`<map>.end()`（或 const 替代方案）如果它没有找到密钥，或者如果你只是想知道它是否在你可以使用的集合中，它将返回一个等于

```
size_type count ( const key_type& x ) const 
```

由于键是唯一的，因此对于地图，它将始终返回 1 或 0。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-15T12:45:22.447

如果 operator [] 没有找到提供的键的值，它会在该位置插入一个值。

但是**你应该注意**，如果你访问 a`not exist key`并调用它的成员函数，比如 mapKV[not_exist_key].member_fun()。程序可能会崩溃。

**让我举个例子，测试类如下：**

```
struct MapValue{
    int val;

    MapValue(int i=0){
        cout<<"ctor: "<<i<<endl; val = i;
    }

    ~MapValue(){
        cout<<"dtor: "<<val<<endl;
    }

    friend ostream& operator<<(std::ostream& out, const MapValue& mv){
        cout<<"MapValue: "<<mv.val<<endl;
    }

    string toString(){
        cout<<"MapValue: "<<val<<endl;
    }
}; 
```

**测试代码：**

```
cout<<"-------create map<int, MapValue>-------"<<endl;

map<int, MapValue> idName{{1, MapValue(1)}, {2, MapValue(2)}};

cout<<"-----cout key[2]-----"<<endl;
cout<<idName[2]<<endl;

cout<<"-----cout key[5]-----"<<endl;
cout<<idName[5]<<endl;

cout<<"------- runs here means, does't crash-------"<<endl; 
```

**输出如下：**

```
-------create map<int, MapValue>-------
ctor: 1
ctor: 2
dtor: 2
dtor: 1
dtor: 2
dtor: 1
-----cout key[2]-----
MapValue: 2

-----cout key[5]-----
ctor: 0
MapValue: 0

-------runs here means, does't crash-------
dtor: 0
dtor: 2
dtor: 1 
```

我们可以看到：`idName[5]`调用 map 构造`{5, MapValue(0)}`插入到 idName。

**但是，如果你调用成员函数 by `idName[5]`，那么程序就会崩溃：**

```
cout<<"-------create map<int, MapValue>-------"<<endl;

map<int, MapValue> idName{{1, MapValue(1)}, {2, MapValue(2)}};

idName[5].toString();  // get crash here.

cout<<"------- runs here means, doesn't crash-------"<<endl; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-16T13:55:11.260

请查看 out_of_range 异常： [http ://www.cplusplus.com/reference/stdexcept/out_of_range/](http://www.cplusplus.com/reference/stdexcept/out_of_range/)

如果 key 不存在，这就是 map::at 和 map::operator[] 将抛出的内容。您可以像链接中的矢量示例一样捕获它。

您也可以使用： [http ://www.cplusplus.com/reference/map/map/find/](http://www.cplusplus.com/reference/map/map/find/)

并检查 map::end

# python - Selenium：与 WebDriverWait & click 的时间不一致

> ID：10124682
> 
> 赞同：0
> 
> 时间：2012-04-12T13:33:46.953
> 
> 标签：python, selenium, webdriver

我有一组 div 以典型的手风琴风格显示/隐藏内容。HTML 看起来像这样；

```
 <div class="accordionContainer">
    <div class="accordion">
      <h3>Click This</h3>
      <div class="accordionContent" style="display:none">
      </div>
    </div>
    <div class="accordion">
      <h3>Click This</h3>
      <div class="accordionContent" style="display:none">
      </div>
    </div>
</div> 
```

然后我让我的 python 选择第一个 H3，然后打开`accordionContent`.

```
 WebDriverWait(ff, 10).until(lambda driver : driver.find_element_by_xpath("id('main_content')/div[3]/div/div/div[1]/h3[1]")).click()

 WebDriverWait(ff, 10).until(lambda driver : driver.find_element_by_xpath("id('main_content')/div[3]/div/div/div[1]/div/p/a")).click() 
```

我已经运行了它并看到它有效。然而大多数时候它失败了。第一个 div 被点击（我可以看到它上面的一个小箭头旋转以显示内容，但它似乎被点击了两次，因为它立即返回默认值并且我得到了错误；

```
 [exec] selenium.common.exceptions.ElementNotVisibleException: Message: u'Element is not currently visible and so may not be interacted with' 
```

奇怪的是，如果您再次调用相同的 click() 行，则可以看到它被单击但未打开，它会起作用。

可以推进第二个 xpath 以检查`accordionContent`是否已更改为`display: block`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:09:35.200

这个 xpath 应该可以工作：

```
"//div[@class='accordionContainer']/div[@class='accordion'][1]/div[@class='accordionContent' and contains(@style, 'block')]" 
```

或者如果结构非常安全，可以这样做：

```
"//div[@class='accordionContainer']/div[1]/div[contains(@style, 'block')]" 
```

注意：我假设这只是示例中的一个错字，即“手风琴”div 的结束标签应该是一个结束标签（而不是看到的开始标签）。

# iphone - 苹果手机。制作 UITextView 但不会使其可见

> ID：10124683
> 
> 赞同：0
> 
> 时间：2012-04-12T13:33:48.093
> 
> 标签：iphone, delegates, uitextview

```
@interface SomeViewController : UIViewController <UITextViewDelegate>

@property (retain, nonatomic) IBOutlet UIImageView *imageView;
@property (nonatomic, retain) UIImage *image;

@property (nonatomic, retain) IBOutlet UITextView *textView; 
```

我的视图控制器中需要 textview(editable)。

所以我设置了协议，

并且，IB 也是文件的所有者。（不知道，有没有必要？）

还有我的 .m 文件.. viewDidLoad..

```
_textView = [[UITextView alloc]init];
[_textView setFrame:CGRectMake(8, 110, 304, 82)];
[_textView setFont:[UIFont boldSystemFontOfSize:12]];
_textView.editable = YES;
//[textView setText:@"hdgffgsfgsfgds"];// if uncommented, this actually visible...

[self.view insertSubview:_textView atIndex:2]; 
```

到目前为止，它正在工作。但我希望这些方法能够运行......

```
- (void)textViewDidChange:(UITextView *)textView
{

    if([_textView.text length] == 0)
    {
        _textView.text = @"Foobar placeholder";
        _textView.textColor = [UIColor lightGrayColor];
        _textView.tag = 0;
    }
} 
```

但是在构建之后，我的文本视图仍然是空的。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:41:02.023

您需要将委托添加到您的文本视图中，请尝试以下操作：

```
_textView.delegate = self; 
```

另一方面，

```
textViewDidChange 
```

仅当您更改文本时才有效，如果您想在 textview 中放置文本，您可以执行以下操作：

```
 _textView.text = @"Foobar placeholder";
        _textView.textColor = [UIColor lightGrayColor];
        _textView.tag = 0; 
```

在你的**ViewdidLoad**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:50:27.853

合成textView的时候，是不是像`@synthesize textView = _textView`这样可以用下划线的名字呢？通常，下划线仅用于 setter/getter 方法（例如在覆盖它们时）。

注意

> 文本视图调用此方法以响应用户对文本的更改。不会调用此方法以响应以编程方式启动的更改。

这是来自 Apple 的文档，用于您使用的方法。这意味着如果您通过代码更改文本，则不会触发该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:53:21.127

您是否期望 [textView setText:@"hdgffgsfgsfgds"] 反过来调用 textViewDidChange:？调用 setText 不会自动调用 textViewDidChange:。

# lotus-notes - 可用于读取复合应用程序中的动态属性的选项

> ID：10124688
> 
> 赞同：0
> 
> 时间：2012-04-12T13:34:01.243
> 
> 标签：lotus-notes

可以使用如下语法打开 Lotus Notes 复合应用程序 (CA)：cai:///uniqueappid/uniquepageid?hint

根据 wiki 文章 - [打开复合应用程序时向组件传递上下文](http://www-10.lotus.com/ldd/compappwiki.nsf/dx/passing-context-to-components-when-opening-composite-applications-)- 您可以将动态属性传递给复合应用程序并让 CA 中的组件读取它。这篇文章有一个这样的例子：

```
String[] values = data.getPreference("com.ibm.portal.app.input.NiklasTest"); 
```

哪个应该能够从格式如下的 URL 读取参数：cai:///uniqueappid/uniquepageid?hint&NiklasTest=xxxxx

我正在寻找我的选择是为了掌握这样的财产。

*   编写一个 java 组件。这似乎可行。
*   编写 xPage 组件。它能够处理动态属性吗？
*   编写 Portlet 组件。它能够处理动态属性吗？
*   编写基于 NSF 表单或页面的组件。是否有可以处理动态属性的 LotusScript 或 @functions？

我不是在寻找最好的解决方案。我正在寻找已知有效的选项列表。基本上在我上面的列表中剔除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:12:25.053

我对复合应用程序一无所知，也不知道动态属性到底是什么，但在 XPage 中，您可以简单地使用 param.NiklasTest 来从 URL 中获取 xxxxx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:06:42.663

在我们需要传递参数的应用程序中（并且能够多次打开 CA）。（简单的）解决方案是动态构建 .ca 文件（并嵌入参数），然后启动它。

您可以使用设计器为 .ca 文件构建模板

[IBM 维基](http://www-10.lotus.com/ldd/compappwiki.nsf/dx/10282008051122PMWEBSUN.htm "本地复合应用程序（.ca 文件）")

# html - 嵌套列表是否需要最小宽度？

> ID：10124696
> 
> 赞同：0
> 
> 时间：2012-04-12T13:34:21.753
> 
> 标签：html, css

我有一个嵌套列表，例如：

```
<ul>
    <li>
      <a href="#" class="">Parent Links</a>
      <!-- Flyoutwrapper is what expands when users hover over the parent links, the contents of flyoutwrapper will be changing, so I can not set a min-width or width -->
      <div class="flyoutWrapper">
        <ul class="flyout fourCol">
          <li></li>
          <li></li>
        </ul>
      </div>
    </li>
</ul> 
```

我希望 class="flyoutfourCol" 中的所有 li 都彼此相邻浮动。在列中。但除非我为“flyoutfourCol”设置了~900px 的最小宽度，否则每个 li 元素都会折叠到前一个元素之下。

这就是我希望我的下拉列表看起来的样子：

```
#nav .flyout.fourCol { min-width:900px; } 
```

[http://jsfiddle.net/t7esz/](http://jsfiddle.net/t7esz/)（这工作）

```
#nav .flyout.fourCol { width:auto; } 
```

[http://jsfiddle.net/sumcA/2/](http://jsfiddle.net/sumcA/2/)（这不起作用！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:09:55.107

In your case, yes, because your `.flyout` submenu is inheriting the width from its parent, your "weddings" `li`, which does not have a width of `900px`. If you remove the width from your `flyout` div and add it to your "weddings" parent `li` your submenu will inherit that same width and will not need to be explicitly given a width. So your answer is yes, you need to add a width to your submenu in order to conform to its own width, otherwise it will be inherited from the parent.

# maven - tycho-p2-repository-plugin 失败并显示“没有为 p2 存储库指定内容”

> ID：10124702
> 
> 赞同：13
> 
> 时间：2012-04-12T13:34:33.507
> 
> 标签：maven, tycho

我正在尝试使用 Tycho 和`eclipse-repository`包装类型中的 tycho-p2-repository-plugin 构建一个 p2 存储库。当我运行构建时，它给了我以下异常：

> 无法在项目 com.mycompany 上执行目标 org.eclipse.tycho:tycho-p2-repository-plugin:0.13.0:assemble-repository (default-assemble-repository)：没有为 p2 存储库指定内容

有人可以指出这个问题的原因吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T17:32:24.067

您需要 eclipse-repository 项目的根目录中的以下文件之一：

*   `category.xml`至少引用了一项功能的文件
*   一个`*.product`文件

这些文件定义了应包含在 p2 存储库中的内容，因此如果没有这些文件，则 p2 存储库将为空。这可能不是您想要的，因此第谷无法构建。（诚​​然，错误消息可能更有帮助......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T01:00:05.250

我也遇到了这个问题，不幸的是，这是众多问题之一，我不记得我做了什么来解决它。

确保您使用的是 0.14.1 的 tycho。

我的工作版本是一个非常空的 pom.xml，很像[Packaging Types](http://wiki.eclipse.org/Tycho/Packaging_Types)

我不需要通过 tycho-p2-repository-plugin 配置 eclipse-repository。

您是否在某处的反应堆构建中定义了有效的目标定义？您的 *.product 文件有效吗？产品文件需要与您的 eclipse-repository pom 位于同一目录中，我认为它是通过黑魔法找到的。

还要确保您的产品功能与您的 eclipse-repository 分开。在 PDE 构建下，您可以拥有 *.product 文件和作为产品根目录的功能。

# jsp - 如何将 Struts2 属性值作为变量放入 JSP 中的查询字符串中？

> ID：10124705
> 
> 赞同：0
> 
> 时间：2012-04-12T13:34:48.980
> 
> 标签：jsp, struts2, query-string

问题是：我可以使用以下方法从操作类中获取属性值：

```
<s:property value="%{variable}" /></TD> 
```

现在我想将此变量放入查询字符串中，例如：

```
<a href="http://www.sample.com/sample.jsp?name=${variable}">Visit W3fools.com</a>, 
```

但这种格式适用于 plian JSP 变量，我应该在这种情况下使用哪种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:07:04.627

```
 <s:url var="sample" value='http://www.sample.com/sample.jsp'>
      <s:param name="name"><s:property value="%{variable}"/></s:param>
  </s:url>

  <s:a href="%{sample}">Visit W3fools.com</s:a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:43:52.570

我会说使用链接`${variable}`

因为`<s:property value="%{variable}" />`需要更多的时间来执行。

看看他们的[区别](https://stackoverflow.com/q/1099933/778687)

# workflow - 如果我在一个问题上按下“开始进度”按钮，JIRA 可以停止其他问题的进展吗？

> ID：10124708
> 
> 赞同：1
> 
> 时间：2012-04-12T13:34:54.033
> 
> 标签：workflow, jira

JIRA 中的问题有“开始进度”按钮，它将问题变为“进行中”状态。

如果我在一个问题上按下“开始进度”按钮，JIRA 可以停止其他问题的进展吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:44:32.460

您可以使用[Jira Scripting](https://marketplace.atlassian.com/16346) Suite 编写一个在转换后运行的 post 脚本，`start progress`并将所有其他处于不同状态的问题更改`In progress`为不同的状态。

如果您在编码方面需要帮助，请告诉我。

# c# - NHibernate GetAll

> ID：10124709
> 
> 赞同：12
> 
> 时间：2012-04-12T13:35:01.277
> 
> 标签：c#, .net, nhibernate

我有这个：

```
public static class Domain
{
    private const string sessionKey = "NHib.SessionKey";
    private static ISessionFactory sessionFactory;

    public static ISession CurrentSession
    {
        get
        {
            return GetSession(true);
        }
    }

    static Domain()
    {
    }

    public static void Init()
    {
        sessionFactory = new Configuration().Configure("Nhibernate.cfg.xml").BuildSessionFactory();
    }

    public static void Close()
    {
        ISession currentSession = GetSession(false);

        if (currentSession != null)
        {
            currentSession.Close();
        }
    }

    private static ISession GetSession(bool getNewIfNotExists)
    {               
        ISession currentSession;

        if (HttpContext.Current != null)
        {
            HttpContext context = HttpContext.Current;
            currentSession = context.Items[sessionKey] as ISession;

            if (currentSession == null && getNewIfNotExists)
            {
                currentSession = sessionFactory.OpenSession();
                context.Items[sessionKey] = currentSession;
            }
        }
        else
        {
            currentSession = CallContext.GetData(sessionKey) as ISession;

            if (currentSession == null && getNewIfNotExists)
            {
                currentSession = sessionFactory.OpenSession();
                CallContext.SetData(sessionKey, currentSession);
            }
        }

        return currentSession;
    }
}
public class Question
{
    public virtual int Id { get; protected set; }

    public virtual string Text { get; set; }

    public virtual string Answer1 { get; set; }

    public virtual string Answer2 { get; set; }

    public virtual string Answer3 { get; set; }

    public virtual string Answer4 { get; set; }

    public virtual int NumberOfRight { get; set; }

    public override string ToString()
    {
        return this.Text;
    }
} 
```

我可以对数据库中的任何问题进行 CRUD 操作。
但我需要展示所有问题，如何获得它们？
在我的数据库中，问题的编号为：1,2,3,100。我不认为，通过所有可能的 Id - 是可以接受的......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-12T13:37:21.993

`Query<T>`您可以使用命名空间中的扩展方法，`NHibernate.Linq`也可以使用`ISession.QueryOver<T>`：

```
var allQuestions = session.Query<Question>().ToList();
// or
var allQuestions = session.QueryOver<Question>().List(); 
```

# c++ - OpenCV：将内存中的指针转换为图像

> ID：10124717
> 
> 赞同：2
> 
> 时间：2012-04-12T13:35:27.637
> 
> 标签：c++, c, image, pointers, opencv

我有一个抓取器，它可以获取图像并使用以下代码在屏幕上显示它们

```
while((lastPicNr = Fg_getLastPicNumberBlockingEx(fg,lastPicNr+1,0,10,_memoryAllc))<200) {                                                           
                iPtr=(unsigned char*)Fg_getImagePtrEx(fg,lastPicNr,0,_memoryAllc);                  
                ::DrawBuffer(nId,iPtr,lastPicNr,"testing");                                         } 
```

但我想使用指向图像数据的指针并用 OpenCV 显示它们，因为我需要对像素进行处理。我的相机是 CCD 单声道相机，像素深度为 8 位。我是 OpenCV 的新手，opencv 中是否有任何选项可以返回 (unsigned char*)Fg_getImagePtrEx(fg,lastPicNr,0,_memoryAllc); 并将其显示在屏幕上？或从 iPtr 指针获取数据并允许我使用图像数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:11:20.323

创建`IplImage`from`unsigned char* raw_data`需要 2 个重要说明：[`cvCreateImageHeader()`](http://opencv.itseez.com/modules/core/doc/old_basic_structures.html?highlight=cvsetdata#IplImage*%20cvCreateImageHeader%28CvSize%20size,%20int%20depth,%20int%20channels%29)和 [`cvSetData()`](http://opencv.itseez.com/modules/core/doc/old_basic_structures.html?highlight=cvsetdata#void%20cvSetData%28CvArr*%20arr,%20void*%20data,%20int%20step%29)：

```
// 1 channel for mono camera, and for RGB would be 3
int channels = 1; 
IplImage* cv_image = cvCreateImageHeader(cvSize(width,height), IPL_DEPTH_8U, channels);
if (!cv_image)
{
    // print error, failed to allocate image!
}

cvSetData(cv_image, raw_data, cv_image->widthStep);

cvNamedWindow("win1", CV_WINDOW_AUTOSIZE);
cvShowImage("win1", cv_image);
cvWaitKey(10);

// release resources
cvReleaseImageHeader(&cv_image);
cvDestroyWindow("win1"); 
```

我还没有测试过代码，但是您正在寻找的代码的路线图就在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T14:28:08.950

如果您使用的是 C++，我不明白您为什么不以这样的简单方式进行操作：

如果您的相机受支持，我会这样做：

```
 cv::VideoCapture capture(0);

   if(!capture.isOpened()) {
     // print error
     return -1;
   }

   cv::namedWindow("viewer");

   cv::Mat frame;

   while( true )
   {
     capture >> frame;

     // ... processing here

     cv::imshow("viewer", frame);
     int c = cv::waitKey(10);
     if( (char)c == 'c' ) { break; } // press c to quit
   } 
```

我建议您开始阅读您可以在[此处](http://opencv.itseez.com/index.html)找到的文档和教程。

# jquery-ui - jquery UI 连接可排序（从 ul 到 div）

> ID：10124719
> 
> 赞同：1
> 
> 时间：2012-04-12T13:35:33.797
> 
> 标签：jquery-ui, jquery-ui-sortable

我有 2 个可排序的。一个应用于一个，一个应用于一个我在两者上都使用了“connectWith”，我似乎无法从这里拖到这里是一个 jsfiddle 链接[http://jsfiddle.net/P9dDY/](http://jsfiddle.net/P9dDY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:22:03.380

我把你的一些样式代码放在头上，然后像这样从正文中删除它......

```
<style type="text/css">
#div-parent {width:800px; height:30px;}
#div-parent div {width:90px; height:30px; float:left; display:block;}
</style> 
```

现在它似乎工作了，见[http://jsfiddle.net/P9dDY/2/](http://jsfiddle.net/P9dDY/2/)

# linux - 是否有一个内核模块可以准确地返回一个简单的“ifconfig”所做的事情？

> ID：10124721
> 
> 赞同：3
> 
> 时间：2012-04-12T13:35:40.367
> 
> 标签：linux, kernel-module, network-interface

我正在编写一个内核模块，它需要有关本地机器接口的信息，就像通过简单的“ifconfig”命令重新调整的那些，我已经搜索了很多，但找不到任何东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T15:17:22.440

`struct net_device`您可以通过一种或另一种方式获取所有这些信息。正如 Albert Veli 所说，您可以`struct net_device`使用`__dev_get_by_name()`.

如果您告诉我们您具体需要哪些信息，我们甚至可以为您指出正确的字段。

查找 MAC 地址相当简单：

```
struct net_device *dev = __dev_get_by_name("eth0");
dev->dev_addr; // is the MAC address
dev->stats.rx_dropped; // RX dropped packets. (stats has more statistics) 
```

查找 IP 地址相当困难，但并非不可能：

```
struct in_device *in_dev = rcu_dereference(dev->ip_ptr);
// in_dev has a list of IP addresses (because an interface can have multiple)
struct in_ifaddr *ifap;
for (ifap = in_dev->ifa_list; ifap != NULL;
         ifap = ifap->ifa_next) {
    ifap->ifa_address; // is the IPv4 address
} 
```

（这些都没有经过编译测试，因此可能存在拼写错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:51:18.320

例如，查看如何获取地址的`in6_dump_addrs`函数。`net/ipv6/addrconf.c`对于链路层地址等链路属性，请参阅`core/rtnetlink.c`。ifconfig 及其 ioctl 已过时（在 Linux 上），因此最好不要考虑那个现在充满错误的程序。

# c++ - 我怎样才能检测到拖过我的窗口的文件

> ID：10124726
> 
> 赞同：1
> 
> 时间：2012-04-12T13:36:02.103
> 
> 标签：c++, winapi, drag-and-drop

我有使用 win32 api 创建的窗口。如何检测文件是否被拖动（而不是拖放）到我的窗口上？以及如何获取文件名列表。我知道 DragAcceptFiles/WM_DROPFILES 消息，但它们没有注册拖动。当用户掉线时，我会收到消息。所以我无法显示拖动的文件是否可以拖放到该位置或文件类型是否有效等...我尝试使用 Spy++ 我肯定没有收到任何消息，但是当我检查资源管理器窗口时，我看到它们正在传递自定义消息（ WM_USER+210)。我正在寻找一个仅限 winapi 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:14:38.513

要在 Raymond Chen 的帮助下回答我的问题，
请将您的窗口注册为放置目标。

[http://www.catch22.net/tuts/drop-target](http://www.catch22.net/tuts/drop-target)

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb776904(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776904(v=vs.85).aspx)

并使用读取文件删除数据

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb776902(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776902(v=vs.85).aspx)

# c# - 如何在字符串中嵌入制表符以更改表单字段

> ID：10124728
> 
> 赞同：1
> 
> 时间：2012-04-12T13:36:06.937
> 
> 标签：c#

我有一个包含两个字段（称为名字和第二名）和一个返回字符串的二维码（如 Eliza Smith）的表单。扫描仪用于输入数据。我想要的是将制表符放在 Eliza 和 Smith 之间。这样 smith 可以自动填充到第二个字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:38:34.720

您可以像使用任何其他字符一样使用制表符。
你也可以使用它的转义码，`\t`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:40:04.653

我不完全确定你的要求是什么？您是否要求将 firstname 和 secondname 变量的值放入另一个字段\变量中，中间有一个选项卡。如果是这样，那么应该这样做。

```
string s = firstname + "\t" + secondname; 
```

# binary - 是否存在可以向我展示两个可执行文件之间差异的程序？

> ID：10124730
> 
> 赞同：0
> 
> 时间：2012-04-12T13:36:13.597
> 
> 标签：binary, patch, disassembly, ida

是否存在可以向我展示两个可执行文件之间差异的程序？

我需要一个程序，它将两个可执行文件作为输入，并可以生成一个包含所有差异的差异文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:44:29.640

您可能正在寻找的是 BinDiff：[http](http://www.zynamics.com/bindiff.html) ://www.zynamics.com/bindiff.html 查看屏幕截图以了解它是如何工作的，以及它的输出是什么。它不是免费的，但它提供的价格相当合理（200 美元）。

# jquery - CSS 和 jquery 加载

> ID：10124732
> 
> 赞同：0
> 
> 时间：2012-04-12T13:36:20.670
> 
> 标签：jquery, html

我在一个项目中工作并遇到了一个错误（可能是正常情况），当我尝试加载**网站的****主页**时，我从 **jquery中****隐藏**的**div**显示给我，然后在**整个页面**获取时隐藏**加载**。

 ******我知道这是因为服务器响应缓慢而发生的，但我希望在任何情况下都不应该发生这种情况。我应该怎么做才能确保**div**保持隐藏状态；默认情况下。

我正在使用的代码非常简单：

```
$(document).ready(function(){
    $('#divId').hide();
}); 
```

这段代码几乎一直工作正常，即我的 div 保持在隐藏模式，但有时它会显示几秒钟然后被隐藏，所以有什么技术可以确保**div****每次都**处于隐藏模式（100 **%)**

谢谢，还有一件事，因为我是服务器端脚本的新手，可能是我忘记了一些东西，所以请考虑一下。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:38:30.963

为什么不把它隐藏在 html 标记中

```
style="display:none;" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T13:38:49.257

一些 CSS 可以解决问题：

```
#divId {
    display: none;
} 
```

...你就完成了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:39:40.193

为什么不简单地用 CSS 隐藏它，如果你需要它，然后使用 jQuery 来显示它。要么在下面放置一个内联样式，要么为它分配一个类/id，并将下面的样式赋予类/id。

```
style="display: none;" 
```

您永远不需要以这种方式在加载时隐藏它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T13:38:22.707

使用样式表将 div 设置为隐藏。

```
<div id="divID" style="display:none"> 
```******

# objective-c - 将 powerpoint 和 keynote 文件转换为图像集

> ID：10124733
> 
> 赞同：1
> 
> 时间：2012-04-12T13:36:22.273
> 
> 标签：objective-c, ios, c, powerpoint

C 或 Objective-C 中有没有办法将演示文件（.ppt/.key）转换为一组图像？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:12:04.210

I doubt. ppt file is the fact XML style document. So if you want to parse it you have to write a XML parser who puts element in the exact position... So in fact you have to create your own powerpoint.

But, you might (both PowerPoint and Keynote) consider to export presentation to pdf, and then this will be a lot simpler.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T15:42:49.763

对于 PowerPoint，您可以获取每张幻灯片，通过 UIWebView 呈现并从视图 [IOS 库中捕获图像，以将 PowerPoint 演示文稿转换为图像](https://stackoverflow.com/questions/15971969/ios-library-to-convert-powerpoint-presentations-into-images/18129059#18129059)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:26:23.367

知道为什么要这样做会更有帮助，但是在 mac 上，可以使用[javascript](http://www.jaimerios.com/?p=171)来做这种事情， 并且可以从[cocoa中调用 javascript](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/Introduction/Introduction.html)

如果你想在 iOS 中做这件事，我怀疑你会有什么运气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T09:05:16.627

PowerPoint for Mac在“文件”菜单中打开“**另存为图片**”，听起来就像您正在寻找的那样。

# c# - 结束事件中的 ShowDialog

> ID：10124737
> 
> 赞同：9
> 
> 时间：2012-04-12T13:37:04.987
> 
> 标签：c#, .net, wpf

如果用户关闭应用程序，则必须显示 Save-File-Message（以确保他想要丢弃已编辑文件的更改）。

为了实现这一点，我有一个带有命令绑定（没有键手势）的菜单项：

```
private void Command_Exit(object sender, ExecutedRoutedEventArgs e)
{
    Application.Current.Shutdown();
} 
```

主窗口有一个关闭事件。在这种情况下，我检查是否有未保存的文件。如果是，则必须打开保存对话框（以选择必须保存哪些文件）：

```
private void Window_Closing(object sender, CancelEventArgs e)
    {
        if (sdl.Count() > 0)
        {
            SaveDialog sd = new SaveDialog();
            IEnumerable<Doc> close = sd.ShowDialog(this);
            if (close == null) 
                e.Cancel = true;
            else
                foreach (Doc document in close)
                    document.Save();
        }

    } 
```

在这个 ShowDialog 方法（在我的 SaveDialog 类中实现）我调用

```
bool? ret = ShowDialog();
if (!ret.HasValue)
     return null;
if (!ret.Value)
     return null; 
```

问题是：

如果我使用 Alt+F4-Shortcut 关闭应用程序（主窗口的默认行为）它可以工作，如果有未保存的文件，我会得到 savedialog。但如果我通过执行 Command_Exit-Method 关闭应用程序，则 Method-Call

```
bool? ret = ShowDialog(); 
```

返回 null 并且对话框不出现。

如果我将 Alt+F4 KeyGesture 分配给 CommandBinding，则会切换问题：执行 Command_Exit 效果很好，但 Alt+F4 快捷方式不行。

ShowDialog()-Method 在这两种情况下都不起作用的原因是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:41:29.257

该`Application.Current.Shutdown`路由允许您通过处理此处详细说明的 Exit 事件来侦听关闭请求：

[http://msdn.microsoft.com/en-us/library/ms597013.aspx](http://msdn.microsoft.com/en-us/library/ms597013.aspx)

它没有详细说明它是如何关闭窗口的，所以我不一定相信关闭事件处理程序会在它关闭应用程序之前触发。

关闭应用程序的另一种非常标准的方法是关闭主窗口（最开始显示的那个）。这可能是`Window.Close`方法，如果您已经在窗口的上下文中，只需调用`Close()`. 然后这将命中关闭事件处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T13:41:27.837

你的`Command_Exit`实现是错误的。`Application.Current.Shutdown()`表示应用程序已经关闭，这可能会阻止对话框打开。

您应该以其他方式实现命令：在命令中，您应该询问您的业务逻辑是否可以安全关闭，并且`Application.Current.Shutdown()`仅在这种情况下发出。否则，您应该要求业务逻辑启动关闭序列，这将依次保存打开的文件，并`Shutdown`在完成保存操作时发出 a。

此外，当用户试图关闭主窗口（即在其上`Window.Closing`）时，您应该触发相同的例程。

# ios - UIImage 或 UIImageView 带有分页和点击缩放

> ID：10124740
> 
> 赞同：0
> 
> 时间：2012-04-12T13:37:24.350
> 
> 标签：ios, uiview, uiimageview, uiimage

我有一个 UIView，我可以在其中获取有关用户的某些信息，包括一堆文本字段和一堆他的照片（如果有的话）。

不，我在这里有点受限，所以我的视图上必须有一个 UIImage 或 UIImageView（只有我的视图的前半部分，才能显示这些图像。

到目前为止，我在背景中有一组这些图像，一旦用户在 UIImageView 上滑动，图像就会显示下一个。但它很丑，因为没有真正的分页（你知道，在你滑动时看到第二张图片，目前它只有 UIMageView.Image = xxx 和它的丑陋）并且没有缩放（点击放大）。

有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:40:51.777

使用一个`UIScrollView`并将所有图像放入其中（如`UIImageViews`）。

# c# - Knockout.js - 无法在无法从数组中删除项目时获取数组长度

> ID：10124741
> 
> 赞同：1
> 
> 时间：2012-04-12T13:37:27.780
> 
> 标签：c#, .net, asp.net-mvc-3, razor, knockout.js

查看代码（我在 ASP MVC 3 上使用 Knockout.js）：

```
@model List<Person>
@{
    ViewBag.Title = "Home Page";
}
<table>
    <thead><tr>
        <th>First Name</th><th>Last Name</th><th>Age</th><th>Department</th> <th></th>
    </tr></thead>
    <tbody data-bind="foreach: people">
    <tr>
        <td><input data-bind="value: FirstName" /></td>
        <td><input data-bind="value: LastName"></select></td>
        <td><input data-bind="value: Age"></select></td>
        <td><select></select></td>
        <td><a href="#" data-bind="click: $root.removePerson">Remove</a></td>
    </tr>    
    </tbody>
    <tfoot>
        <tr> <th align=left colspan=4>Total number of people:</th> <th><span data-bind="text: $root.people().length"></span></th> </tr>
    </tfoot>

</table>

<button data-bind="click: addPerson, enable: people().length < 5">Add another person</button>

<script type="text/javascript">
    function ViewModel() {
        var self = this;
        self.people = ko.observableArray(ko.mapping.fromJS(@Html.Raw(new JavaScriptSerializer().Serialize(Model))));

        self.addPerson = function() {
            self.people.push(@Html.Raw(new JavaScriptSerializer().Serialize(new Person() { FirstName = "I am", LastName = "a new Person", Age = "0" })));
        }

        self.removePerson = function(person) 
        { 
            self.people.remove(person) 
        }
    }

    ko.applyBindings(new ViewModel());
</script>

public class Person
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public string Age { get; set; }

    public string FullName
    {
        get { return FirstName + " " + LastName; }
    }
} 
```

我的问题是为什么 people().length 返回 0？（为什么我不能使用我的函数 removePerson 从数组中删除一个项目？）-> 已解决

编辑：这是生成的 HTML 主页

```
 <script src="/Scripts/knockout.js" type="text/javascript"></script>
    <script src="/Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <div id="header">
            <div id="title">
                <h1>
                    My MVC Application</h1>
            </div>
            <div id="logindisplay">
                    [ <a href="/Account/LogOn">Log On</a> ]

            </div>
            <div id="menucontainer">
                <ul id="menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="/Home/About">About</a></li>
                </ul>
            </div>
        </div>
        <div id="main">
            <table>
    <thead><tr>
        <th>First Name</th><th>Last Name</th><th>Age</th><th>Department</th> <th></th>
    </tr></thead>
    <tbody data-bind="foreach: people">
    <tr>
        <td><input data-bind="value: FirstName" /></td>
        <td><input data-bind="value: LastName"></select></td>
        <td><input data-bind="value: Age"></select></td>
        <td><select></select></td>
        <td><a href="#" data-bind="click: $root.removePerson">Remove</a></td>
    </tr>    
    </tbody>
    <tfoot>
        <tr> <th align=left colspan=4>Total number of people:</th> <th><span data-bind="text: $root.people().length"></span></th> </tr>
    </tfoot>

</table>

<button data-bind="click: addPerson, enable: people().length < 5">Add another person</button>

<script type="text/javascript"> 
    function ViewModel() {
        var self = this;
        self.people = ko.observableArray(ko.mapping.fromJS([{"FirstName":"Basti","LastName":"Wuf","Age":"28","FullName":"Basti Wuf"},{"FirstName":"Mawie","LastName":"Mew","Age":"25","FullName":"Mawie Mew"}]));

        self.addPerson = function() {
            self.people.push({"FirstName":"I am","LastName":"a new Person","Age":"0","FullName":"I am a new Person"});
        }

        self.removePerson = function(person) 
        { 
            //alert(person.FirstName);
            self.people.remove(person) 
        }
    }

    ko.applyBindings(new ViewModel());
</script>

        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:48:16.613

`ko.mapping.fromJS`当给定一个数组时，它会变成一个 observableArray。

所以，当你这样做时：

`self.people = ko.observableArray(ko.mapping.fromJS([{"FirstName":"Basti","LastName":"Wuf","Age":"28","FullName":"Basti Wuf"},{"FirstName":"Mawie","LastName":"Mew","Age":"25","FullName":"Mawie Mew"}]));`

self.people 将包裹两次（observableArray 包含一个 observableArray）。

因此，`self.people()`将返回内部 observableArray。对它（一个函数）执行 a`length`将返回为函数定义的参数数量（在这种情况下为 0）。

基本上，您可以只删除`ko.observableArray`视图模型初始化代码中的外部，让映射插件为您完成。

# jsf - bean、@Inject 和 params 的 CDI 生命周期

> ID：10124742
> 
> 赞同：0
> 
> 时间：2012-04-12T13:37:30.310
> 
> 标签：jsf, jsf-2, seam, cdi, jboss-weld

在我尝试修复非标准名称之前，视图和 bean 一直在工作，现在我已经断开了两者之间的联系。奇怪的是，“返回”按钮有正确的链接，但内容没有显示，也没有记录。为什么 Detail.getComments() 不执行？

我一直在阅读[焊接](http://docs.jboss.org/weld/reference/1.1.0.Final/en-US/html/injection.html)文档并试图更好地理解@Inject。似乎也存在我不理解的生命周期问题。如果它不是生命周期，那么我什至无法推测为什么 Detail.getComments() 从未在 glassfish 日志中显示：

```
INFO: MessageBean.getModel..
INFO: SingletonNNTP.returning messages..
INFO: MessageBean.getModel..
INFO: SingletonNNTP.returning messages..
INFO: MessageBean.getModel..
INFO: SingletonNNTP.returning messages..
INFO: Detail..
INFO: Detail.getId..null
INFO: Detail.getId..SETTING DEFAULT ID
INFO: Detail.onLoad..2000
INFO: Detail.getId..2000
INFO: Detail.getId..2000
INFO: Detail.setId..2000
INFO: Detail.getId..2019
INFO: ..Detail.setId 2019
INFO: Detail.back..
INFO: Detail.getId..2019
INFO: ..Detail.back 2,018
INFO: Detail.getId..2019 
```

值 2000 是默认值，仅在 id==null 时才会发生，它永远不会发生这种情况。它应该立即引入该属性。所以，我不确定这是否是范围（我现在才发现 CDI 不支持 @SessionScoped）、生命周期或其他问题。也许我需要在那个变量上使用@Inject？

视图，detail.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
    <body>
        <f:metadata>
            <f:viewParam name="id" id="id" value="#{detail.id}" />
        </f:metadata>
        <ui:composition template="./complexTemplate.xhtml">
            <ui:define name="top">
                <h:link value="back" outcome="detail" includeViewParams="true">
                    <f:param name="id" value="#{detail.back}"/>
                </h:link>
            <ui:define name="content">
                <h:outputText value="#{detail.content}" rendered="false"/>
            </ui:define>
            <ui:define name="bottom">
                bottom
            </ui:define>
        </ui:composition>
    </body>
</html> 
```

和支持bean：

```
package net.bounceme.dur.nntp;

import java.io.Serializable;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.PostConstruct;
import javax.enterprise.context.ConversationScoped;
import javax.inject.Named;
import javax.mail.Message;

@Named
@ConversationScoped
public class Detail  implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger logger = Logger.getLogger(Detail.class.getName());
    private static final Level level = Level.INFO;
    private String id = null;       //should never get default value in getter
    private Message message = null;
    private SingletonNNTP nntp = SingletonNNTP.INSTANCE;
    private String forward = null;  //id + 1
    private String back = null;     //id - 1
    private String content = null;  //message.content

    public Detail() {
        logger.log(level, "Detail..");
    }

    @PostConstruct
    private void onLoad() {
        logger.log(level, "Detail.onLoad..{0}", getId());
    }

    public Message getMessage() {
        logger.log(level, "Detail.getMessage..");
        return message;
    }

    public void setMessage(Message message) {
        logger.log(level, "Detail.setMessage..");
        this.message = message;
    }

    public String getId() {
        logger.log(level, "Detail.getId..{0}", id);
        if (id == null) {
            logger.log(level, "Detail.getId..SETTING DEFAULT ID");
            id = String.valueOf(2000);
        }
        return id;
    }

    public void setId(String id) throws Exception {
        logger.log(level, "Detail.setId..{0}", getId());
        this.id = id;
        logger.log(level, "..Detail.setId {0}", getId());
    }

    public String getForward() {
        logger.log(level, "Detail.forward..");
        int f = Integer.parseInt(getId());
        f = f + 1;
        logger.log(level, "..Detail.forward {0}", f);
        forward = String.valueOf(f);
        return forward;
    }

    public void setForward(String forward) {
        this.forward = forward;
    }

    public String getBack() {
        logger.log(level, "Detail.back..");
        int b = Integer.parseInt(getId());
        b = b - 1;
        logger.log(level, "..Detail.back {0}", b);
        back = String.valueOf(b);
        return back;
    }

    public void setBack(String back) {
        this.back = back;
    }

    public String getContent() throws Exception {
        logger.log(level, "Detail.getContent..{0}", getId());
        message = nntp.getMessage(Integer.parseInt(getId()));
        content = message.getContent().toString();
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }
} 
```

根据上面的日志，它似乎从未调用过 Detail.getContent()，尽管它是视图的一部分： `<h:outputText value="#{detail.content}" rendered="false"/>`

奇怪的是，在我更改此类以更好地遵循命名约定之前调用了 Detail.content()。我正在阅读一些[Weld](http://docs.jboss.org/weld/reference/1.1.0.Final/en-US/html/injection.html)和[Oracle](https://blogs.oracle.com/enterprisetechtips/entry/using_cdi_and_dependency_injection) Java EE 6 文档，但完全不介意被引导到一本精美的手册。我发现描述这一点的文档总是使用@ManagedBeans，但是我不是。正如@Kawu在[这个](https://stackoverflow.com/questions/2930889/)答案中所描述的，似乎有很多陷阱。

在 id 字段中添加 @Inject 会导致部署错误：

```
init:
deps-module-jar:
deps-ear-jar:
deps-jar:
library-inclusion-in-archive:
library-inclusion-in-manifest:
compile:
compile-jsps:
In-place deployment at /home/thufir/NetBeansProjects/NNTPjsf/build/web
Initializing...
deploy?DEFAULT=/home/thufir/NetBeansProjects/NNTPjsf/build/web&name=NNTPjsf&contextroot=/NNTPjsf&force=true failed on GlassFish Server 3.1.2 
 Error occurred during deployment: Exception while loading the app : WELD-001408 Unsatisfied dependencies for type [String] with qualifiers [@Default] at injection point [[field] @Inject private net.bounceme.dur.nntp.Detail.id]. Please see server.log for more details.
/home/thufir/NetBeansProjects/NNTPjsf/nbproject/build-impl.xml:749: The module has not been deployed.
See the server log for details.
BUILD FAILED (total time: 9 seconds) 
```

当然，注入 String 不是问题，也许是[bug](https://issues.jboss.org/browse/WELD-846)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T14:22:09.550

我理解你的挫败感，我认为问题更多的是你的设置/理解。但是，仍然很难找到任何真正的问题来回答，也许您下次可以尝试拆分您的问题。

以下是一些答案：

> 为什么 Detail.getComments() 不执行？

嗯，也许是因为它不在豆子里？我猜你正在重新考虑`detail.getContent`？

> 根据上面的日志，它似乎从未调用过 Detail.getContent()，尽管它是视图的一部分：

试试`rendered = true`:-)

```
@PostConstruct
private void onLoad() {
    logger.log(level, "Detail.onLoad..{0}", getId());
} 
```

您已经在 getter 中加入了大量的逻辑。尝试使用现场调试，而不是使用吸气剂...

> 值 2000 是默认值，仅在 id==null 时才会发生，它永远不会发生这种情况。

看起来这`private String id = null;`是一个完美的解释为什么 id*将为*空。

请记住，JSF、CDI 和 Java EE 等现代框架在幕后做**了很多工作，使用反射、代理和拦截器。**例如，不要依赖于对何时（以及多久）调用构造函数的经典理解。

同样，考虑将初始化逻辑从 getter 移开。@PostConstruct 将是 Java EE 规范之父为其选择的地方。

老实说：看起来没有什么特别错误的，但是你的代码有点乱，而且非常难以理解和遵循。

尝试删除像这样的所有间接...

```
int b = Integer.parseInt(getId()); 
```

...一切都会看起来好多了。

哦，你为整个班级声明一个固定的日志级别有什么具体原因吗？尝试这样的事情

```
private static final Logger LOG = Logger.getLogger(Some.class);
...
LOG.info("..."); 
```

希望这能给你一个开始。随意发布更多问题，最好短一点，并回答单一、孤立的方面。

# python - python suds urllib2 错误

> ID：10124747
> 
> 赞同：1
> 
> 时间：2012-04-12T13:37:59.463
> 
> 标签：python, web-services, urllib2, suds

Suds 在 Ubuntu 虚拟机中运行良好。我克隆了这个虚拟机，现在在不同的环境中运行它。但现在它抛出了这个错误：

```
ERROR: <urlopen error [Errno -2] Name or service not known>
Traceback (most recent call last):
  File "../keystone/keystone/bin/keystone-manage", line 16, in <module>
    keystone.manage.main()
  File "../keystone/keystone/keystone/manage/__init__.py", line 284, in main
    raise exc
 urllib2.URLError: <urlopen error [Errno -2] Name or service not known> 
```

这与 urllib2 和代理有关吗？

提前致谢！

, ķ

# python - 将平面列表转换为python中的列表列表

> ID：10124751
> 
> 赞同：23
> 
> 时间：2012-04-12T13:38:17.420
> 
> 标签：python, list

人们可能想做与扁平化列表相反的事情，[就像这里](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)：我想知道如何将扁平列表转换为列表列表。

在 numpy 中，您可以执行以下操作：

```
>>> a=numpy.arange(9)
>>> a.reshape(3,3)
>>> a
array([[0, 1, 2],
   [3, 4, 5],
   [6, 7, 8]]) 
```

我想知道你如何做相反的事情，我通常的解决方案是：

```
>>> Mylist
['a', 'b', 'c', 'd', 'e', 'f']
>>> newList = []
for i in range(0,len(Mylist),2):
...     newList.append(Mylist[i], Mylist[i+1])
>>> newList 
[['a', 'b'], ['c', 'd'], ['e', 'f']] 
```

有没有更“pythonic”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-12T13:40:16.823

```
>>> l = ['a', 'b', 'c', 'd', 'e', 'f']
>>> zip(*[iter(l)]*2)
[('a', 'b'), ('c', 'd'), ('e', 'f')] 
```

正如@Lattyware 所指出的，这仅在每次`zip`返回元组时函数的每个参数中有足够的项目时才有效。如果其中一个参数的项目少于其他参数，则项目被切断，例如。

```
>>> l = ['a', 'b', 'c', 'd', 'e', 'f','g']
>>> zip(*[iter(l)]*2)
[('a', 'b'), ('c', 'd'), ('e', 'f')] 
```

如果是这种情况，那么最好使用@Sven Marnach 的解决方案

[如何`zip(*[iter(s)]*n)`工作](https://stackoverflow.com/questions/2233204/how-does-zipitersn-work-in-python)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-12T13:41:32.237

这通常使用[`itertools`文档](http://docs.python.org/library/itertools.html#recipes)中的石斑鱼配方完成：

```
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return itertools.izip_longest(fillvalue=fillvalue, *args) 
```

例子：

```
>>> my_list = ['a', 'b', 'c', 'd', 'e', 'f', 'g']
>>> list(grouper(2, my_list))
[('a', 'b'), ('c', 'd'), ('e', 'f'), ('g', None)] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-29T03:48:01.877

创建列表列表的另一种方法可以简化如下所示：

```
>>>MyList = ['a','b','c','d','e','f']
# Calculate desired row/col
>>>row = 3
>>>col = 2
>>>NewList = [MyList[col*i : col*(i+1)] for i in range(row)]
>>>NewList
[['a', 'b', 'c'], ['d', 'e', 'f']] 
```

可以扩展此方法以产生任何行和列大小。如果您选择这样的行和列值`row*col >len(MyList)`，则包含最后一个值的子列表（行）`MyList`将在那里结束，并且`NewList`将简单地填充适当数量的空列表以满足行/列规范

```
>>>MyList = ['a','b','c','d','e','f','g','h']
>>>row = 3
>>>col = 3
>>>NewList = [MyList[col*i : col*(i+1)] for i in range(row)]
>>>NewList
[['a', 'b', 'c'], ['d', 'e', 'f'], ['g','h']]

>>>row = 4
>>>col = 4
>>>NewList = [MyList[col*i : col*(i+1)] for i in range(row)]
[['a', 'b', 'c', 'd'], ['e', 'f', 'g','h'], [], []] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T06:10:04.347

如果更喜欢列表列表，而不是平面列表中的元组列表，那么可以这样做：

```
 a = range(20) # sample starting list 
    b = [] # new list
    c = [] # alternate new list
    # ny is length of new list. nx length of each list within it
    nx = 5; ny = 4 
    bb = 0; ee = bb + nx # option one: sliding indeces for slices.
    for ii in range(ny-1):
        bb += nx
        ee += nx
        b.append(a[bb:ee])
        c.append(a[slice(ii*nx,nx*(ii+1))]) # option two, use slice() 
```

（我已经尝试将整个 for 循环缩小为带有列表理解的一行，但没有成功。按照我使用它的方式， slice() 几乎可以让你到达那里。）这些方法的一个可能优势是其他提到的是，如果您的原始平面列表不是您的新的所需列表列表的维度的偶数倍，您将不会丢失任何数据。需要注意的是，最后一个列表将比所有其他列表短，因为它将包含“剩菜”。当然，这些方法都没有让我觉得非常pythonic。

# sql - SQL Server Management Studio - 为“创建日期”的模板参数自动生成指定值

> ID：10124753
> 
> 赞同：0
> 
> 时间：2012-04-12T13:38:23.257
> 
> 标签：sql, sql-server, sql-server-2008

我在 Microsoft SQL Server Management Studio 2008 中创建了很多存储过程。

我正在使用[Query -> Specify Values for Template Parameters 方法](http://msdn.microsoft.com/en-us/library/ms345415.aspx)。

我想知道是否有人知道如何让作者和创建日期字段自动包含我的姓名和当前日期。目前我必须一次又一次地输入它们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:50:06.963

我不认为你可以。您可以编写一些动态 SQL 来打印您的模板。然后你可以告诉它打印 GETDATE()，你的名字将被存储为一个变量。

您将运行代码，然后将结果作为模板粘贴到您的窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T09:20:33.350

对于您的姓名，您可以指定如下模板

`<Author,String,Sam Leach>`

# c++ - 复对称三对角矩阵的快速矩阵指数

> ID：10124754
> 
> 赞同：5
> 
> 时间：2012-04-12T13:38:24.517
> 
> 标签：c++, c, matrix, blas

基本上我需要以上。我已经搜索了谷歌，但找不到实现这一点的方法。

我在这里找到了这个功能[http://www.guwi17.de/ublas/examples/](http://www.guwi17.de/ublas/examples/)但它太慢了。我什至按照 MATLAB 的例程编写了自己的 Pade Approximation，但它只比链接中的快一点。

令我震惊的是 Mathematica 计算矩阵指数的速度有多快（它是否关心矩阵是否是 tridiag，我不知道）。

有人能帮忙吗？

**编辑：这是我想出的，有什么意见吗？希望对以后的读者有用**

我已经有一段时间没有使用 c++ 了，所以下面的代码可能有点杂乱/缓慢，所以如果你看到改进，请赐教。

```
//Program will compute the matrix exponential expm( i gA ). where i = sqrt(-1) and gA is a matrix

#include <iostream>
#include <gsl/gsl_complex.h>
#include <gsl/gsl_complex_math.h>
#include <gsl/gsl_matrix.h>
#include <gsl/gsl_linalg.h>
#include <gsl/gsl_blas.h>

int main() {

    int n = 100;

    unsigned i = 0;
    unsigned j = 0;

    gsl_complex img = gsl_complex_rect (0.,1.);

    gsl_matrix * gA = gsl_matrix_alloc (n, n);

//Set gA:       
    for ( i = 0; i<n; i++) {
        for ( j = 0; j<=i; j++) {
            if( i == j ) {
                if( i == 0 || i == n-1 ) {
                    gsl_matrix_set (gA, i, j, 1.);
                } else {
                    gsl_matrix_set (gA, i, j, 2.);
                }
            } else if( j == i-1 ) {
                gsl_matrix_set (gA, i, j, 1.);
                gsl_matrix_set (gA, j, i, 1.);
            } else {
                gsl_matrix_set (gA, i, j, 0.);
                gsl_matrix_set (gA, j, i, 0.);
        }
    }
}

//get SVD of gA 
    gsl_matrix * gA_t = gsl_matrix_alloc (n, n);
    gsl_matrix_transpose_memcpy (gA_t, gA);                 

    gsl_matrix * U = gsl_matrix_alloc (n, n);
    gsl_matrix * V= gsl_matrix_alloc (n, n);
    gsl_vector * S = gsl_vector_alloc (n);

    gsl_vector * work = gsl_vector_alloc (n);
    gsl_linalg_SV_decomp (gA_t, V, S, work);
    gsl_vector_free(work);

    gsl_matrix_memcpy (U, gA_t);

//Take exponential of S and form matrix
    gsl_matrix_complex * Sp = gsl_matrix_complex_alloc (n, n);
    gsl_matrix_complex_set_zero (Sp);
    for (i = 0; i < n; i++) {
        gsl_matrix_complex_set (Sp, i, i, gsl_complex_exp ( gsl_complex_mul_real ( img, gsl_vector_get(S, i) ) ) ); // Vector 'S' to matrix 'Sp'
    }

    gsl_matrix_complex * Uc = gsl_matrix_complex_alloc (n, n);

//convert U to a complex matrix for next step   
    for (i = 0; i < n; i++) {
        for ( j = 0; j<n; j++) {
            gsl_matrix_complex_set (Uc, i, j, gsl_complex_rect ( gsl_matrix_get(U, i, j), 0\. ) );       
        }
    }

//recombine U S Utranspose  
    gsl_matrix_complex * tA = gsl_matrix_complex_alloc (n, n);
    gsl_matrix_complex * eA = gsl_matrix_complex_alloc (n, n);
    gsl_blas_zgemm (CblasNoTrans, CblasNoTrans, GSL_COMPLEX_ONE, Uc, Sp, GSL_COMPLEX_ZERO, tA);
    gsl_blas_zgemm (CblasNoTrans, CblasTrans, GSL_COMPLEX_ONE, tA, Uc, GSL_COMPLEX_ZERO, eA);

//Print result  
    std::cout << "eA:" << std::endl;
    for (i = 0; i < n; i++)  
        for (j = 0; j < n; j++)
            printf ("%g + %g i\n", GSL_REAL(gsl_matrix_complex_get (eA, i, j)), GSL_IMAG(gsl_matrix_complex_get (eA, i, j)));
    std::cout << "\n" << std::endl;

//Free up
    gsl_matrix_free(gA_t);
    gsl_matrix_free(U);
    gsl_matrix_free(gA);
    gsl_matrix_free(V);
    gsl_vector_free(S);
    gsl_matrix_complex_free(Uc);
    gsl_matrix_complex_free(tA);    
    gsl_matrix_complex_free(eA);    

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:34:26.377

我在我的问题中发布的上面的代码效果很好。我发现的另一个改进是通过特征值缩放 V 副本中的列，而不是执行完整的矩阵乘法。由于 zgemm 是此代码中最慢的部分，因此删除其中一个 zgemm 函数将其速度提高了近两倍。我很快就会在这里发布完整的代码清单。

# c# - 如何从谷歌 api 令牌中获取数据？

> ID：10124755
> 
> 赞同：0
> 
> 时间：2012-04-12T13:38:24.787
> 
> 标签：c#, google-api, access-token

我想在我的网站中使用 Google 登录凭据。所以我正在使用 Google API。我在 URL 中获得了一个谷歌 API 令牌。所以我想获取登录用户数据？我正在使用 C#。成功登录并重定向回我的网站后，我得到了这个 URL：-

[http://localhost:20885/WebServices/Welcome.aspx#state=/profile&access_token=ya29.AHES6ZRERYieYZIclNxQp3cPeXDnNWMP4IQuhDaj-TO_4wX2eqziRg&token_type=Bearer&expires_in=3600](http://localhost:20885/WebServices/Welcome.aspx#state=/profile&access_token=ya29.AHES6ZRERYieYZIclNxQp3cPeXDnNWMP4IQuhDaj-TO_4wX2eqziRg&token_type=Bearer&expires_in=3600)

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:42:23.957

看看这个 .Net 库

[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

这将为您完成所有繁重的 OpenID/OAuth 工作。您只需将其指向 Google 的 OpenID URL。

请求特定的用户数据（例如电子邮件）很容易，并在此处进行了说明：

[https://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:38:59.307

在您的 .aspx 页面中使用此 javascript：

```
// First, parse the query string
var params = {}, queryString = location.hash.substring(1),
regex = /([^&=]+)=([^&]*)/g, m;
while (m = regex.exec(queryString)) {
  params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
}

// And send the token over to the server
var req = new XMLHttpRequest();
// consider using POST so query isn't logged
req.open('GET', 'http://' + window.location.host + '/public/Google.aspx?' + queryString, true);

req.onreadystatechange = function (e) {
  if (req.readyState == 4) {
    if (req.status == 200) {
      window.location = params['state']
    }
    else if (req.status == 400) {
      alert('There was an error processing the token.')
    }
    else {
      alert('something else other than 200 was returned')
    }
  }
};
req.send(null); 
```

使用它来调用您的相同或另一个 .aspx 页面。

# knockout.js - 淘汰赛：数组的部分映射

> ID：10124756
> 
> 赞同：3
> 
> 时间：2012-04-12T13:38:24.817
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

看看[这个小例子](http://jsfiddle.net/8sGuY/2/)。

```
<select data-bind="options: Days, optionsText: 'title'"></select>
<input type="button" value="update" data-bind="click: update" />

<script type="text/javascript">
var Days = {'Days': [{"id":1,"title":"Monday"},{"id":2,"title":"Tuesday"},{"id":3,"title":"Wensday"}]};

var DaysUpdate = {'Days': [{"id":3,"title":"Wednesday"},{"id":4,"title":"Thursday"},{"id":5,"title":"Friday"}]};

var mapping = {    
    'Days': {        
        key: function(data) {            
            return ko.utils.unwrapObservable(data.id);        
        }    
}}

var viewModel = {
    Days: ko.observableArray(),
    update: function() {
        ko.mapping.fromJS(DaysUpdate, mapping, viewModel);
    }
}

ko.mapping.fromJS(Days, mapping, viewModel);

ko.applyBindings(viewModel);

</script> 
```

在此示例中，数据被部分映射。首先来自 Days 对象，然后（通过单击更新按钮）来自 DaysUpdate 对象。第二次更新从数组中删除“Monday”和“Tuesday”对象。我如何让那些留下来？

PS。感谢 Mark Robinson 提供了结构更好的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:26:06.333

这是映射插件的常见问题。目前没有办法用插件本身来做到这一点。这一直困扰着我一段时间。该插件假定您给它的数组是数组的新内容，因此删除了其他项目。

目前我知道的唯一解决方案是遍历集合并手动映射每个元素。

[http://jsfiddle.net/madcapnmckay/5878E/](http://jsfiddle.net/madcapnmckay/5878E/)

在这些日子里，我会尝试提出一个合适的解决方案并向映射插件人员发送拉取请求。

希望这可以帮助。

# java - 在 javascript 和 java applet 之间传递数据

> ID：10124758
> 
> 赞同：1
> 
> 时间：2012-04-12T13:38:32.087
> 
> 标签：java, javascript

我有一个 JavaScript 函数，我在这里发布并得到了一些答案。我需要更多帮助，以便能够清楚地操作代码：

```
function printreceipt(tax,subtotal,total)
{
    subtotalElem=document.getElementById("total");
    var taxElem=document.getElementById("tax");
    productElem=document.getElementById("product-name");
    alert("here are my products" + taxElem.innerHTML + subtotalElem.innerHTML);
} 
```

我询问如何将 JavaScript 变量发送到 JAVA 小程序，答案是将其添加到 JavaScript：

```
var myApp = document.applets['myApplet'];
myApp.receiveData(taxElem.innerHTML + subtotalElem.innerHTML); 
```

建议我把这段代码放在 JAVA 小程序中

```
public void receiveData(String dataFromJS)
{
     //Do what you need with your data
} 
```

向我展示了如何包含公共函数以从小程序中检索数据，但是当我部署小程序时，它不会检索数据 - 它是空的。

*   如何以字符串的形式获取数据，例如 tax 中的内容。
*   如何在代码中添加参数以检索税等元素的内容。
*   如何在小程序中显示数据？

# excel - 如何在保持相同格式样式的excel中导入word文档？

> ID：10124762
> 
> 赞同：0
> 
> 时间：2012-04-12T13:38:53.783
> 
> 标签：excel, vba, ms-word

我想使用模板生成带有 VBA 的 Ms Word 文档。
我需要将 Ms Word 模板导入 Excel（在工作表中），对其进行操作（通过从其他 Excel 工作表中添加一些数据），然后生成 Word 文档。问题是我无法在 excel 中复制模板，它包含一些表格和文本，当我尝试复制/粘贴时，它没有保持相同的格式样式......我尝试使用粘贴选项正如提到的[这里](http://office.microsoft.com/en-us/excel-help/copy-a-word-table-into-excel-HP010254130.aspx)，但它并没有解决问题......

我应该使用 VBA 以编程方式操作模板并直接从 excel 填充它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:34:45.813

最后我实现了[Tim Williams](https://stackoverflow.com/users/478884/tim-williams)解决方案：我复制模板，重命名 i，并使用我已经定义的书签填充它：

```
 With myDoc.Bookmarks
       .Item("myBookmarkItem").Range.Text = "New Text"
    End With 
```

# actionscript-3 - Alternativa3d 8 中的鼠标拖动？

> ID：10124763
> 
> 赞同：2
> 
> 时间：2012-04-12T13:38:58.203
> 
> 标签：actionscript-3, flash

所以我看到了几个使用鼠标在 Alternativa3d 中拖动对象的好例子：

[http://wonderfl.net/c/hrsq/read](http://wonderfl.net/c/hrsq/read)

[http://www.thetechlabs.com/3d/dragging-3d-objects-in-flex-3-using-alternativa3d-and-actionscript-3/](http://www.thetechlabs.com/3d/dragging-3d-objects-in-flex-3-using-alternativa3d-and-actionscript-3/)

但它们适用于引擎的早期版本，并且它们包含现在已弃用的代码，如果您愿意的话，没有直接的正向翻译。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:39:18.433

这是我根据您发布的 Wonderfl 示例使用 alternativa3d 8.27.0 制作的版本。希望能帮助到你..

```
package {

import alternativa.engine3d.core.events.MouseEvent3D;
import alternativa.engine3d.core.RayIntersectionData;
import flash.display.Sprite;
import flash.events.Event;
import flash.display.Stage3D;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import alternativa.engine3d.primitives.Box;
import alternativa.engine3d.core.Resource;
import alternativa.engine3d.controllers.SimpleObjectController;
import alternativa.engine3d.core.Camera3D;
import alternativa.engine3d.core.Object3D;
import alternativa.engine3d.core.View;
import alternativa.engine3d.materials.FillMaterial;
import flash.events.MouseEvent;
import flash.geom.Vector3D;

/**
 * ...
 * @author David E Jones
 */
public class Main extends Sprite 
{
    private var scene:Object3D = new Object3D();
    private var camera:Camera3D;
    private var controller:SimpleObjectController;
    private var stage3D:Stage3D;
    private var box:Box;
    private var boxSelected:Boolean = false;
    private var startPoint:Vector3D;

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);

        stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE;

        camera = new Camera3D(1, 1000);
        camera.view = new View(stage.stageWidth, stage.stageHeight, false, 0, 0, 4);
        camera.view.backgroundColor = 0x000000;
        addChild(camera.view);
        addChild(camera.diagram);

        camera.x = -30;
        camera.y = -30;
        camera.z = 0;
        controller = new SimpleObjectController(stage, camera, 200);
        controller.lookAt(new Vector3D(0,0,0));
        scene.addChild(camera);

        stage3D = stage.stage3Ds[0];
        stage3D.addEventListener(Event.CONTEXT3D_CREATE, onContextCreate);
        stage3D.requestContext3D();
    }

    private function onContextCreate(e:Event):void {
        stage3D.removeEventListener(Event.CONTEXT3D_CREATE, onContextCreate);

        box = new Box(10, 10, 10, 1, 1, 1, false, null);
        var material:FillMaterial = new FillMaterial( 0xFF0000 );
        box.setMaterialToAllSurfaces(material);
        scene.addChild(box);
        uploadResources(box.getResources(true));

        box.addEventListener(MouseEvent3D.MOUSE_DOWN, onMouseDown);

        stage.addEventListener(Event.ENTER_FRAME, onEnterFrame);
        stage.addEventListener(Event.RESIZE, onResize);
        onResize();
    }

    private function onMouseDown(e:MouseEvent3D):void 
    {
        stage.addEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);
        stage.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);

        var object:Object3D = e.target as Object3D;
        var origin:Vector3D = new Vector3D();
        var direction:Vector3D = new Vector3D();
        camera.calculateRay(origin, direction, stage.mouseX, stage.mouseY);
        var data:RayIntersectionData = object.intersectRay(origin, direction);

        if (data != null) {
            startPoint = data.point;
        }
    }

    private function onMouseUp(e:MouseEvent):void
    {
        stage.removeEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);
        stage.removeEventListener(MouseEvent.MOUSE_UP, onMouseUp);
    }

    private function onMouseMove(e:MouseEvent):void
    {
        var origin:Vector3D = new Vector3D;
        var directionA:Vector3D = new Vector3D;
        var directionB:Vector3D = new Vector3D;
        var direction:Vector3D = new Vector3D;

        camera.calculateRay(origin, directionA, camera.view.width/2, camera.view.height/2);
        camera.calculateRay(origin, directionB, mouseX, mouseY);

        var pos : Vector3D = intersectionPoint(origin, directionB, new Vector3D(0, startPoint.y, 0), new Vector3D(0, 1, 0));
        box.x = pos.x-startPoint.x;
        box.y = pos.y-startPoint.y;
        box.z = pos.z-startPoint.z;
    }

    public static function intersectionPoint(lineStart:Vector3D, lineDirection:Vector3D, planePosition:Vector3D, planeNormal:Vector3D):Vector3D {

        var result:Vector3D = new Vector3D();
        var w:Vector3D = lineStart.subtract(planePosition);
        var d:Number = planeNormal.dotProduct(lineDirection);
        var n:Number = -planeNormal.dotProduct(w);

        if (Math.abs(d) < 0.0000001) return result;    

        var sI:Number = n / d;

        result.x = lineStart.x + (lineDirection.x * sI);
        result.y = lineStart.y + (lineDirection.y * sI);
        result.z = lineStart.z + (lineDirection.z * sI);

        return result;    
    }

    private function uploadResources(resources:Vector.<Resource>):void {
        for each (var resource:Resource in resources) {
            resource.upload(stage3D.context3D);
        }
    }

    private function onEnterFrame(e:Event):void {
        if (boxSelected) {

        }
        camera.render(stage3D);
    }

    private function onResize(e:Event = null):void {
        camera.view.width = stage.stageWidth;
        camera.view.height = stage.stageHeight;
    }
} 
```

}

# java - 应用程序打印“[[ljava.lang.string;@40585b18”而不是数组值

> ID：10124765
> 
> 赞同：0
> 
> 时间：2012-04-12T13:39:13.773
> 
> 标签：java, android

我打印了这个“[[ljava.lang.string;@40585b18”，而不是字符串数组中的一个值，称为答案。

目前我对打印出来的内容并不挑剔。只需让应用程序从数组中显示一些有意义的东西，这就是现在开始的好地方。

以下两行代码是当前打印的内容：

TextView quesAns4 = (TextView) findViewById(R.id.answer3);

quesAns4.setText("4) " + 答案) ;

```
package ks3.mathsapp.project;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MathsMultiplicationActivity extends Activity {

TextView quesnum;
TextView ques;
TextView ans1;
TextView ans2;
TextView ans3;
TextView ans4;

int qno = 0;
int right_answers = 0;
int wrong_answers = 0;
int rnd1;
int rnd2;

String [] questions = {"How much mph does the F-Duct add to the car?",
          "What car part is considered the biggest performance variable?",
          "What car part is designed to speed up air flow at the car rear?",
          "In seconds, how long does it take for a F1 car to stop when travelling at 300km/h?",
          "How many litres of air does an F1 car consume per second?",
          "What car part can heavily influence oversteer and understeer?",
          "A third of the cars downforce can come from what?",
          "Around how much race fuel would be consumed per 100km?","The first high nose cone was introduced when?",
          "An increase in what, has led to the length of exhaust pipes being shortened drastically?"};

String [] [] answers = {{"3","5","8","9"},
{"Tyres","Front Wing","F-Duct","Engine"},
{"Diffuser","Suspension","Tyres","Exhaust"},
{"4","6","8","10"},
{"650","10","75","450"},
{"Suspension","Tyres","Cockpit","Chassis"},
{"Rear Wing","Nose Cone","Chassis","Engine"},
{"75 Litres","100 Litres","50 Litres","25 Litres"},
{"1990","1989","1993","1992"},
{"Engine RPM","Nose Cone Lengths","Tyre Size","Number of Races"}};

 @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.multiplechoice);

// Importing all assets like buttons, text fields
quesnum = (TextView) findViewById(R.id.questionNum);
ques = (TextView) findViewById(R.id.question);
ans1 = (TextView) findViewById(R.id.answer1);
ans2 = (TextView) findViewById(R.id.answer2);
ans3 = (TextView) findViewById(R.id.answer3);
ans4 = (TextView) findViewById(R.id.answer4);

TextView quesAns1 = (TextView) findViewById(R.id.answer1); 
quesAns1.setText("1) " + answers) ;            
TextView quesAns2 = (TextView) findViewById(R.id.answer2); 
quesAns2.setText("2) " + answers) ;   
TextView quesAns3 = (TextView) findViewById(R.id.answer3); 
quesAns3.setText("3) " + answers) ;   
TextView quesAns4 = (TextView) findViewById(R.id.answer3); 
quesAns4.setText("4) " + answers) ;   
}                    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:41:47.650

你这样做是不对的。它应该是这样的：

```
quesAns1.setText("1) " + answers[0][0]);  //change index values as required 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:42:20.443

您将文本设置为`"1) " + answers`, 并且`answers`是字符串数组的数组。相反，您应该从数组中获取字符串：`answers[0][0]`例如，将获得第一个问题的第一个答案。

# java - Java EE 和 Spring MVC “引导程序”/在服务器启动时运行代码

> ID：10124767
> 
> 赞同：2
> 
> 时间：2012-04-12T13:39:20.620
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我正在使用 Spring MVC 3.05。

我想知道创建引导类的最佳方法是什么？想想 Grails。在以前的项目中，我相信另一个人声明了一个 spring bean 和一个调度程序，但我也记得它有点难看：

```
<bean id="bootstrap" class="com.jobs.Bootstrap" />

<task:scheduler id="SpringScheduele" />
<task:scheduled-tasks scheduler="SpringScheduele">
<task:scheduled ref="bootstrap" method="onServerStart" fixed-delay="5000000000" /
</task:scheduled-tasks> 
```

我相信这会让它在启动时触发，然后等到它再次触发。不是很理想。

```
public class Bootstrap {

    public void onServerStart() {
        System.out.println("....");        
    }    
} 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:26:06.507

您必须创建一个实现[ApplicationListener](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/ApplicationListener.html)并监听[Co​​ntextRefreshedEvent](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/event/ContextRefreshedEvent.html)的 bean ：

```
@Component
public class Bootstrap implements ApplicationListener<ContextRefreshedEvent> {
    @Override
    void onApplicationEvent(ContextRefreshedEvent event) 
        ...  
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:48:02.550

我想你可以创建一个实现的类`InitializingBean`，例如：

```
public class Bootstrap implements InitializingBean {
    @Value("${my.prop.value}")
    Integer somePropValue;

    @Overrides
    public void afterPropertiesSet() {
        // runs after constructor & setter injection
    }
} 
```

# python - Python、pywin32、Windows 服务和多处理

> ID：10124768
> 
> 赞同：1
> 
> 时间：2012-04-12T13:39:22.817
> 
> 标签：python, windows-services, pywin32

我正在使用 python 2.6、pywin32 build 217 和 Windows 7。

我创建了一个windows服务如下：

```
class Service(win32serviceutil.ServiceFramework):

    _svc_name_ = 'MPTESTER'
    _svc_display_name_ = 'MP TESTER'
    _svc_description_ = "NA"
    _scratch_workspace_ = os.environ["TEMP"]
    _process_count_ = (int(os.environ["NUMBER_OF_PROCESSORS"]) *2) -1
    _pool_ = None
    def __init__(self, *args):
        win32serviceutil.ServiceFramework.__init__(self, *args)
        self.log('init')
        self.runFlag = True
        self.stop_event = win32event.CreateEvent(None, 0, 0, None)
    def log(self, msg):
        import servicemanager
        servicemanager.LogInfoMsg(str(msg))
    def sleep(self, sec):
        win32api.Sleep(sec*1000, True)
    def SvcDoRun(self):
        self.ReportServiceStatus(win32service.SERVICE_START_PENDING)
        try:
            self.ReportServiceStatus(win32service.SERVICE_RUNNING)
            self.log('start')
            self.start()
            while self.runflag == True:
                pass
            self.log('wait')
            win32event.WaitForSingleObject(self.stop_event, win32event.INFINITE)
            self.log('done')
        except Exception, x:
            self.log('Exception : %s' % x)
            self.SvcStop()
    def SvcStop(self):
        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
        self.log('stopping')
        self.stop()
        self.log('stopped')
        win32event.SetEvent(self.stop_event)
        self.ReportServiceStatus(win32service.SERVICE_STOPPED)
    def start(self):
        dummyFilePath = r"c:\temp\errorLog.log"
        with open(dummyFilePath,'w') as dummy:
            #pythonFile = os.path.basename(str(inspect.getfile(inspect.currentframe())))
            #scriptPath = str(inspect.getfile(inspect.currentframe())).replace(os.sep + pythonFile,"")
            dummy.write('test 1\n')
            dummy.flush()
            pythonExe = os.path.join(sys.exec_prefix, 'python.exe')
            multiprocessing.set_executable(pythonExe)
            dummy.write('test 2\n')
            dummy.flush()
            if self.runFlag == None:
                self.runFlag = True
            dummy.write('test 3\n')
            dummy.flush()
            while self.runFlag:
                dummy.write('test 4\n')
                dummy.flush()
                results = []
                pool = multiprocessing.Pool((int(os.environ["NUMBER_OF_PROCESSORS"]) *2) -1)
                dummy.write("After POOL CREATED")
                dummy.flush()
                for i in range(self._process_count_):
                    dummy.write('test in range \n')
                    dummy.flush()
                    results.append(pool.apply_async(someLongFunction, 
                                                   [r"c:\temp",
                                                    "test_" + str(i) + ".txt"
                                                         ] ))

                #    Wait for all processes to finish
                #
                pool.close()
                pool.join()
                dummy.write("WAITING TO FINISH!")
                dummy.flush()
                #    delete the references
                #
                del results
                del pool
                dummy.write('fin test \n')
                dummy.flush()
                self.stop()
                break
    def stop(self): 
        self.runFlag = False 
```

我的问题是多处理实例永远不会触发。有没有办法让多处理模块工作？我可以使用子处理，但我真的不想维护两个 python 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:56:19.630

事实上python在模块上有一个[bug](http://bugs.python.org/issue5162)`..multiprocessing/forking.py` ，原因是这样的：

> 当程序作为 Windows 服务运行但未打包到单个可执行文件中时，main_path 将成为服务可执行文件（通常为 pythonservice.exe）的路径。当此数据进入子进程时，prepare() 函数会将 main_path 视为 Python 模块的路径，并尝试导入它。这会导致它失败。

[你可以在这里](http://bugs.python.org/issue5162)找到补丁或者从[这里](http://hg.python.org/cpython/file/4b101df1e9f7/Lib/multiprocessing/forking.py)
下载整个文件

# selenium - 是否有 Selenium 2 版本的 Selenium IDE？

> ID：10124769
> 
> 赞同：5
> 
> 时间：2012-04-12T13:39:23.970
> 
> 标签：selenium, selenium-rc, selenium-ide, selenium-webdriver

我是**Selenium**的新手，我对版本号有点困惑。 **Selenium 2.0**于 2011 年发布。我刚刚下载了**Selenium IDE** Firefox 扩展，它是 version `1.7.2`。是否还有 2.0 版本`IDE`，或者`1`. x系列混淆包含`2.0`代码？

我检查了[Selenium HQ](http://seleniumhq.org/download/)，它指出当前是**Selenium IDE**`1.7.2`的最新版本。

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T13:45:34.370

Selenium 版本的版本控制总是有点令人困惑。Selenium 1 和 2 的本质区别在于 Selenium 1 使用了 Selenium Remote Control 接口，而 Selenium 2 是基于 WebDriver。这意味着：Selenium 2 测试是您以面向对象的方式用代码（例如 Java）编写的测试。您使用 Selenium IDE 录制或编写脚本的所有内容都使用 Selenium RC 接口，该接口仍可与 Selenium 2 一起使用以实现向后兼容性。所以没有 Selenium IDE 2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T14:02:34.940

碰巧的是，我实际上正在开发 Selenium IDE 的替代品，称为[Se Builder](https://github.com/admc/se-builder)，它支持 Selenium 2。它仍在开发中，但第一个 beta 版本将在未来几天内发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T09:31:50.497

目前 selenium IDE 仅发布[1.9.0](http://release.seleniumhq.org/selenium-ide/1.9.0/selenium-ide-1.9.0.xpi)。

所以没有2.0 IDE，可以下载并更新IDE 1.9.0 for firefox。

但是 Selenium 服务器发布[2.25.0](http://selenium.googlecode.com/files/selenium-server-standalone-2.25.0.jar)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T08:59:45.543

没有 Selenium IDE 2.0。您可以将 Selenium IDE 与 Selenium 1.0 以及 selenium 2.0 一起使用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T05:49:34.727

您可以使用 Selenium IDE 2.9.x，在将代码从 IDE 导出到 java 期间，您可以根据需要导出为“Java / TestNG / WebDriver”或“Java / JUnit4 / WebDriver”。

您还可以将代码转换为 C#、Python、Ruby 等。Selenium 2 基于 WebDriver。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-27T19:29:47.907

好吧，还有这个：[https](https://github.com/samitbadle/seleniumide/) ://github.com/samitbadle/seleniumide/ ，“即将正式发布的 Selenium IDE 2.0 的最新版本”。

它的最后一次提交是在 2 年前，所以也许那个“很快”的方面从未发生过。维护者在开发过程中写了很多关于它的内容（[http://blog.reallysimplethoughts.com/tag/selenium-2-2/](http://blog.reallysimplethoughts.com/tag/selenium-2-2/)），但标签下没有任何内容，因为它是要发布的。

我还没有运行代码，但我仔细猜测它是[废弃软件](http://en.wikipedia.org/wiki/Abandonware)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T06:56:29.613

Selenium IDE 1.7 是最新版本.. 更新了 selenium 命令并与 firefox 兼容...我们没有相同的 selenium IDE 2

谢谢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T14:40:22.400

ide的最新版本是1.9.0。对于网络驱动程序支持，您需要下载其他格式化程序，如 php 格式化程序等。**

# asp.net - 使用中等信任度 .NET 2.0 操作目录和图像

> ID：10124774
> 
> 赞同：1
> 
> 时间：2012-04-12T13:39:41.197
> 
> 标签：asp.net, directory, virtual-directory, virtualpathprovider

这个问题：

[在中等信任环境中创建目录？](https://stackoverflow.com/questions/6387888/creating-directories-in-medium-trust-environment)

有点相同，但答案并没有真正帮助。

在我的网站上，我在名为“Products2”的主目录中保存了一堆产品图像，其中包含基于项目 ID 的图像的各种子目录 0/0/0/1、0/0/0/2 等。

我有很多问题

`Security Exception Description: The application attempted to perform an operation not allowed by the security policy. To grant this application the required permission please contact your system administrator or change the application's trust level in the configuration file.`

`Exception Details: System.Security.SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.`

由于权限而尝试使用`DirectoryInfo`等。`createDirectory`

该网站托管在与 Medium Trust 共享的主机上。

我已要求我的托管公司对文件夹设置适当的权限，以便我可以使用这些功能，这些功能从根本上是使我的网站正确显示图像所必需的。伙计们已经这样做了，但由于某种原因，服务器设置不断恢复，然后我到处乱扔错误。

我被指出：

[http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)

由我的托管服务提供商提供，但我无法达到我的需要。

有人可以帮我弄这个吗？

例如，尝试获取目录中包含的图像列表并将它们绑定到 ASP:Repeater：

```
Private Function getThumbnails(ByVal directoryPath As String, mainImg As String) As DataTable

    Dim imgTable As New DataTable("images")
    Dim imageURL As DataColumn = New DataColumn("url")
    imgTable.Columns.Add(imageURL)
    Dim imageID As DataColumn = New DataColumn("id")
    imgTable.Columns.Add(imageID)

    Dim dirInfo As New DirectoryInfo(directoryPath)
    Dim fileList() As FileInfo = dirInfo.GetFiles("*.jpg")

    For Each Image In fileList
        If InStr(Image.Name, "-tb") > 0 And InStr(Image.Name, mainImg) <= 0 Then
            Dim imgDetail As DataRow = imgTable.NewRow()
            Dim theMapPath = HttpContext.Current.Server.MapPath("~/Products2")
            Dim dirUrl = "/Products2" & Replace(Replace(directoryPath, theMapPath, ""), "\", "/")
            Dim imgURL As String = Path.Combine("http://" & Request.ServerVariables("SERVER_NAME") & dirUrl, Image.Name)
            imgURL = Replace(Replace(Replace(imgURL, "dev.", "www."), "~", ""), "admin.", "www.")
            imgDetail.Item("url") = imgURL
            imgDetail.Item("id") = Image.Name
            imgTable.Rows.Add(imgDetail)
        End If
    Next
    Return imgTable
End Function 
```

这个函数接收一个目录作为一个字符串，变量`directoryPath`是它的关键，并以`Server.MapPath`生成的格式返回，所以`D://etc...`

有人告诉我的是我需要使用相对路径，但是尝试了各种“明显”选项后，我无法获得相同的功能。

在我看来，这只是意味着“/Products2/0/0/1/”等，但这不起作用，我收到错误消息说路径无效。

去做：

```
Uploading (using saveAs from an HttpPostedFile)
Delete images (File.Delete)
Create Directory (Directory.Create(), from Dim Directory As New DirectoryInfo() 
```

并根据上述功能从目录中获取图像并显示。

我将如何使用 来执行此操作`VirtualPathProvider`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:03:09.753

在 SharePoint 中，我使用[SPSecurity.RunWithElevatedPrivileges 委托](http://SPSecurity.RunWithElevatedPrivileges)对此进行了管理。没有这个，代码将在当前用户的权限下运行；这是一个 ASP.NET 版本：

[ASPSecurity.RunWithElevatedPrivileges 的 Asp.Net 替代方案](http://%20http://rrfreeman.blogspot.com/2010/01/aspnet-alternative-to.html.)

另一种选择是查看[自定义代码访问安全性](https://www.google.com/sorry/index?continue=https://www.google.com/search%3Fsugexp%3Dchrome,mod%3D18%26ix%3Dnh%26sourceid%3Dchrome%26ie%3DUTF-8%26q%3Dasp.net%2520RunWithElevatedPrivileges&q=EgRSrc3iGPv3soEGIhkA8aeDS_thTVEvWSK0Cib4PB6LUZIo05_lMgFy)；但是，如果您对主机几乎没有控制权，那么第一个解决方案可能是您的最佳途径。

这是我将它用于带有 SharePoint 的 Web 部件的地方：

[使用 VSeWSS 1.3 创建 Web 部件 - 第 II 部分](http://www.codersbarn.com/post/2009/01/25/Create-a-Web-Part-with-VSeWSS-13-Part-II.aspx)

至于路径无效的问题，它应该足够简单以检查正在生成的内容。

# css - 控制 LI 元素与其项目符号之间的边距

> ID：10124784
> 
> 赞同：0
> 
> 时间：2012-04-12T13:40:16.950
> 
> 标签：css, html-lists

我有一个里面有 LI 元素的 UL。我正在使用自定义列表项目符号

```
list-style: url(images/att_remove3.png) outside; 
```

我想把子弹放在外面，因为不是所有的 LI 元素都有子弹。

如何控制 LI 文本和项目符号之间的边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:44:51.063

您是否尝试过使用负边距？

```
ul li { margin-left: -XXpx; } 
```

# php - 支持恢复将大文件上传到 S3

> ID：10124785
> 
> 赞同：21
> 
> 时间：2012-04-12T13:40:18.513
> 
> 标签：php, file-upload, amazon-s3, amazon-web-services, multipart

（我是 Amazon AWS/S3 的新手，请多多包涵）

我的最终目标是允许我的用户使用他们的网络浏览器将文件上传到 S3，我的要求是：

1.  我必须处理大文件（2GB+）
2.  我必须支持带有进度指示器的暂停/恢复
3.  （可选但可取！）如果连接暂时中断，则能够恢复上传

**我的两部分问题是：**

*   我已阅读有关 S3 分段上传的信息，但尚不清楚如何为基于 webbrowser 的上传实现暂停/恢复。

甚至可以对大文件执行此操作吗？如果有怎么办？

*   我应该将文件上传到 EC2，然后在完成后将它们移动到 S3 吗？我可以（安全地）将文件直接上传到 S3 而不是使用临时文件吗？网络服务器？

如果可以直接上传到 S3，我该如何处理暂停/恢复？

**PS。我正在使用 PHP 5.2+**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:09:22.753

### 更新 20150527

同时可用的适用[于 JavaScript 的 AWS 开发工具包（在浏览器中）](http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/index.html)支持 Amazon S3，包括一个类[ManagedUpload](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3/ManagedUpload.html)，以支持手头用例的分段上传方面（有关此内容的更多信息，请参阅前面的更新）。相应地，它现在可能是您的场景的最佳解决方案，请参阅例如[使用文件 API 上传本地文件以](http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/browser-examples.html#Uploading_a_local_file_using_the_File_API)获取依次使用[HTML5 文件 API](http://www.w3.org/TR/FileAPI/)的简明示例- 介绍性博客文章[在 AWS 开发工具包中宣布 Amazon S3 托管上传器JavaScript](http://blogs.aws.amazon.com/javascript/post/Tx3EQZP53BODXWF/Announcing-the-Amazon-S3-Managed-Uploader-in-the-AWS-SDK-for-JavaScript)提供了有关此 SDK 功能的更多详细信息。

### 更新 20120412

我最初的回答显然错过了要点，所以澄清一下：

如果您想通过简单的 HTML 表单进行基于浏览器的上传，则只能使用[POST Object 操作](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectPOST.html)，该操作*使用 HTML 表单将对象添加到指定的存储桶*：

> POST 是 PUT 的另一种形式，它允许基于浏览器的上传作为将对象放入存储桶中的一种方式。通过 HTTP 标头传递给 PUT 的参数改为作为表单字段传递给多部分/表单数据编码的消息正文中的 POST。[...]

上传在此处通过单个操作处理，因此不支持暂停/恢复，并将您的原始最大对象大小限制*为 5 GB 或更少*。

您只能通过[使用 REST API 进行分段上传来克服这两个限制，而](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html)[AWS SDK for PHP](http://aws.amazon.com/sdkforphp/)等 SDK 又使用该 API来实现此功能。

这显然需要一个服务器（例如在 EC2 上）来处理通过浏览器发起的操作（这也允许您轻松地促进[S3 存储桶策略](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingBucketPolicies.html)和/或[IAM 策略](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingIAMPolicies.html)以进行访问控制）。

一种替代方法可能是使用 JavaScript 库并执行此客户端，例如，请参阅[jQuery Upload Progress 和 AJAX 文件上传](https://stackoverflow.com/questions/4856917/jquery-upload-progress-and-ajax-file-upload)以获取初始指针。~~不幸的是，没有适用于 AWS 的规范 JavaScript SDK（令人惊讶的是， [aws-lib](https://github.com/livelycode/aws-lib)甚至还不支持 S3）——显然，[knox](https://github.com/learnboost/knox)的一些分支已经添加了分段上传，参见例如[slakis 的分支](https://github.com/slaskis/knox)，我没有使用其中任何一个来使用虽然手头的情况。~~

* * *

### 初步答案

> 如果可以将 [大文件] 直接上传到 S3，我该如何处理暂停/恢复？

[AWS SDK for PHP](http://aws.amazon.com/sdkforphp/)支持通过[Low-Level PHP API for Multipart Upload](http://docs.amazonwebservices.com/AmazonS3/latest/dev/usingLLmpuPHP.html)将大文件上传到 Amazon S3 ：

> 适用于 PHP 的 AWS 开发工具包公开了一个与用于分段上传的 Amazon S3 REST API 非常相似的低级 API（请参阅使用 REST API 进行分段上传）。**当您需要暂停和恢复分段上传、在上传过程中改变分段大小或事先不知道数据大小时，请使用低级 API**。只要您没有这些要求，请使用高级 API（请参阅使用高级 PHP API 进行分段上传）。*[强调我的]*

Amazon S3 可以处理*从 1 字节一直到 5 TB 的*对象，请参阅相应的介绍性帖子[Amazon S3 - Object Size Limit Now 5 TB](http://aws.typepad.com/aws/2010/12/amazon-s3-object-size-limit.html)：

> [...] Now customers can store extremely large files as single objects, which greatly simplifies their storage experience. Amazon S3 does the bookkeeping behind the scenes for our customers, so you can now GET that large object just like you would any other Amazon S3 object.
> 
> In order to store larger objects you would use the new [Multipart Upload API](http://aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html) that I blogged about last month to upload the object in parts. [...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:07:38.673

I don't know of any flash uploaders offering anything more powerful than standard HTTP Post but you could develop your own flash software for the client with co-ordinating software on the server.

# python - Flask - 标头未转换为 unicode？

> ID：10124786
> 
> 赞同：7
> 
> 时间：2012-04-12T13:40:29.353
> 
> 标签：python, unicode, flask, werkzeug, storm-orm

我正在使用 python 开发一个小型 Web 服务：

*   烧瓶 (v. 0.8)
*   风暴 ORM (v. 0.19)
*   带有 mod_wsgi 的 Apache

我有一个自定义 HTTP 标头，`Unison-UUID`有时我会使用它来检索数据库中的信息。

这是我遇到问题的（为简单起见稍微重写）片段：

```
uuid = flask.request.headers['Unison-UUID']
store = storm.locals.Store(my_database)
user = store.get(models.User, uuid) 
```

这个类`User`或多或少是这样的：

```
class User(Storm):
    uuid = Unicode(primary=True)
    # Other columns.... 
```

上面的代码以下列方式失败：

```
 File "/Users/lum/Documents/unison-recsys/www/api/unison/unison.py", line 27, in decorated
    user = g.store.get(models.User, uuid)
  File "/Users/lum/Documents/unison-recsys/venv/lib/python2.6/site-packages/storm/store.py", line 165, in get
    variable = column.variable_factory(value=variable)
  File "/Users/lum/Documents/unison-recsys/venv/lib/python2.6/site-packages/storm/variables.py", line 396, in parse_set
    % (type(value), value))
TypeError: Expected unicode, found <type 'str'>: '00000000-0000-0000-0000-000000000009' 
```

我真的不明白为什么会发生这种情况以及我能做些什么。我认为[Flask 是 100% unicode](http://flask.pocoo.org/docs/unicode/)。

我发现的一个快速解决方法是解码标头值，即`uuid = uuid.decode('utf-8')`. 这真的是需要做的吗？这似乎有点骇人听闻。有没有办法直接获取unicode，而不必手动“解码”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T20:05:30.200

在[http://flask.pocoo.org/docs/api/#flask.request](http://flask.pocoo.org/docs/api/#flask.request)我们读到

> 请求对象是子类的一个实例，`Request`并提供 Werkzeug 定义的所有属性。

这个词`Request`链接到我们阅读的[http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.Request](http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.Request)

> `Request`and`Response`类是`BaseRequest`and 类的子`BaseResponse`类，并实现 Werkzeug 提供的所有 mixins：

这个词`BaseRequest`链接到我们阅读的[http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.BaseRequest](http://werkzeug.pocoo.org/docs/wrappers/#werkzeug.wrappers.BaseRequest)

> headers
> 来自 WSGI 环境的 headers 是不可变的`EnvironHeaders`。

这个词`EnvironHeaders`链接到我们阅读的[http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.EnvironHeaders](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.EnvironHeaders)

> *这提供了与Headers*相同的接口，并且是从 WSGI 环境构建的。

*Headers*这个词是......不，它没有链接，但它应该链接到我们阅读的[http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.Headers](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.Headers)

> Headers 主要与 Python`wsgiref.headers.Headers`类兼容

该短语`wsgiref.headers.Headers`链接到我们阅读的[http://docs.python.org/dev/library/wsgiref.html#wsgiref.headers.Headers](http://docs.python.org/dev/library/wsgiref.html#wsgiref.headers.Headers)

> 创建一个类似映射的对象包装标头，它必须是标头名称/值元组的列表，如`PEP 3333`.

该短语`PEP 3333`链接到[http://www.python.org/dev/peps/pep-3333/](http://www.python.org/dev/peps/pep-3333/)没有明确定义标题应该是什么类型，但是在搜索单词*标题*一段时间后，我们找到了这个语句

> 因此，WSGI 定义了两种“字符串”：
> 
> ```
> "Native" strings (which are always implemented using the type named str)
> that are used for request/response headers and metadata
> "Bytestrings" (which are implemented using the `bytes` type in Python 3,
> and `str` elsewhere), that are used for the bodies of requests and
> responses (e.g. POST/PUT input data and HTML page outputs). 
> ```

这就是为什么在 Python 2 中你得到的 headers`str`不是`unicode`.

现在让我们开始解码。

无论是你的`.decode('utf-8')`还是 mensi 的`.decode('ascii')`（也不是盲目地期待任何其他编码）都不是普遍适用的，因为[理论上，HTTP 标头字段值可以传输任何东西；棘手的部分是让所有各方（发送者、接收者和中间人）就编码达成一致。](https://stackoverflow.com/a/7568675/95735). 话虽如此，我认为你应该按照 Julian Reshke 的[建议行事](https://stackoverflow.com/a/7568675/95735)

> 因此，执行此操作的安全方法是坚持使用 ASCII，并在此基础上选择一种编码，例如 RFC 5987 中定义的编码。

在检查您支持的用户代理（浏览器）是否已实现它之后。

[RFC 5987](https://www.rfc-editor.org/rfc/rfc5987)的标题是*超文本传输​​协议 (HTTP) 标头字段参数的字符集和语言编码*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:55:20.117

标头值是 ASCII，请参阅 Acorn 的链接问题。

您可以在这里做的是像您一样手动解码（尽管您应该使用`uuid.decode('ascii')`而不是 utf-8）或将您的字段更改`RawStr`为`Unicode`

# php - SQL 中的 JavaScript

> ID：10124788
> 
> 赞同：-1
> 
> 时间：2012-04-12T13:40:38.963
> 
> 标签：php, javascript, sql

每次年份更改时，我都必须在我的 sqldb 中插入一个新的主键（例如：2012 年我的键是 2012000000，2013 年我的键是 2013000000），我想自动执行

我的方法是像这样向管理面板添加一个脚本

```
<script type="text/javascript" src="myscript.php"></script> 
```

我想知道的：

*   如果它是自动增量，我可以向主键插入任意值吗？
*   如果是这样，它会自动递增而没有问题吗？
*   我的整体方法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:05:25.703

这是一种不正当的做法。

1.  为什么你需要插入主键？看看[table partitioning](http://en.wikipedia.org/wiki/Partition_%28database%29)，它可能会更优雅地实现您的目标。
2.  如果您的应用程序级别（类似于`year = primary_key / 1000000`）暗示了此限制 - 请考虑重新实现它，这是一个巨大的设计缺陷。
3.  如果我没有得到任何东西，而您仍然确定必须插入 id - 这取决于您的数据库引擎。其中一些允许插入主键，但需要特殊语法。请指定您正在使用的数据库。
4.  实现定时执行的正确方法是使用[cron](http://en.wikipedia.org/wiki/Cron)（如果您的服务器在 *nix 上运行）或[任务计划程序](http://support.microsoft.com/kb/308569)（如果它在 Windows 命令下）。这些是用于重复执行的灵活工具。在您的情况下，您只需告诉它`myscript.php`在每年 01/01 的 00:00:00 运行您的脚本 ( ) - 就可以了。该脚本可能是 php 页面、控制台程序或其他任何东西。
5.  最后一点，为什么要管它是 javascript？“正确”的方法是使用`include`.

总而言之，我强烈建议重新考虑它。上次你最终采用的方法非常违反直觉和明显，而且有问题（想象一下，如果在添加新年的时候没有人登录到管理后端会怎样:)）

# joomla - 如何在 Virtuemart 中添加带有产品图片上传的自定义字段？

> ID：10124793
> 
> 赞同：0
> 
> 时间：2012-04-12T13:40:47.663
> 
> 标签：joomla, virtuemart

我正在使用 Virtuemart 2.0.2 和 Joomla 1.7。

我想通过选择颜色来自定义 mercurial 以显示特定的产品图像。

但我在 mercurialmart 中找不到文件/代码，我可以在其中添加自定义字段“产品颜色”的值，同时将产品图像保存到数据库。

我想在保存产品图像时添加自定义字段“产品颜色”的值，以便我可以识别哪个产品图像与哪种颜色相关。

我在早期版本的美德玛特中做到了这一点，但在美德玛特 2.0.2 中无法弄清楚。

很长时间以来一直坚持这一点。谁能帮我这个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T14:17:31.847

1.  通过 VM 后端将您的彩色图像上传到媒体文件。（如red.jpg、blue.jpg等）

2.  创建新的自定义字段：

    *   类型：图片
    *   标题：颜色
    *   购物车属性：是（所以它会在购物车中生效）
    *   保持其余部分不变
3.  在单个产品设置中，转到自定义字段选项卡

4.  添加新的“颜色”自定义字段，并选择正确的文件名 (red.jpg)

5.  再次添加新的“颜色”，并再次...（blue.jpg ...等）

6.  *（您可以使用价格来增加/减少产品价格取决于颜色，或者您可以保持不变）。*

7.  节省

8.  如果您不添加价格，您将看到：“无额外费用”。您可以在语言 ini 中删除或更改此文本。（ROOT/language/en-GB/en-GB.com_virtuemart.ini - 当然在其他语言中你应该找到合适的ini，例如ROOT/language/hu-HU/hu-HU.com_virtuemart.hu）

    *   COM_VIRTUEMART_CART_PRICE_FREE="修改文本" 或 COM_VIRTUEMART_CART_PRICE_FREE=""

（注意：您可能需要在前端为此功能创建一些 CSS）

# iphone - 无法向苹果提交应用内购买产品

> ID：10124800
> 
> 赞同：2
> 
> 时间：2012-04-12T13:41:21.363
> 
> 标签：iphone, ios, in-app-purchase

我刚刚创建了一个 iPhone 应用程序并将其提交到 Apple 商店。该应用程序已获得苹果公司的批准，可在苹果商店购买。该应用程序使用应用内购买。我已经使用测试用户帐户测试了应用内购买。现在我想提交应用内购买产品以供审核。这些产品的状态已准备好在 itunesConnect 中提交。当我打开这些产品时，我可以看到提交审核按钮，但它是灰色的，即被禁用。现在我将如何提交应用内购买。

我已经从苹果商店下载了应用程序，但是当我打开它时，它可能会崩溃，可能是因为尚未提交应用内购买。有人可以帮帮我吗？我有点卡住，担心有人可能因此对我的应用程序给予负面评价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:52:50.003

我必须上传一个版本并将其从 iTunes Connect 中删除，然后我才能提交应用内购买产品。

# gstreamer - GStreamer 0.10 库参考手册和 GStreamer 0.10 核心参考手册之间的区别

> ID：10124801
> 
> 赞同：1
> 
> 时间：2012-04-12T13:41:21.527
> 
> 标签：gstreamer

我只是在浏览[gstreamer 文档](http://gstreamer.freedesktop.org/documentation/)。我无法理解 [GStreamer 0.10 库参考手册](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/)和[GStreamer 0.10 核心参考手册](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/)之间的区别。大多数函数调用（如 gst_X_funtion_name）都可以通过检查 Gst_X 文档从 GStreamer 0.10 核心参考手册中解释.但是为什么使用 GStreamer 0.10 库参考手册以及使用它的位置。请详细说明。软软的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:43:18.013

核心部分用于核心库。库手册用于额外的库（例如，还包含单元测试的帮助程序、元素基类）。并不严格需要使用额外的库，因此需要拆分。

使用 devhelp 之类的工具来访问文档。这将帮助您轻松查找内容，而无需记住文档所在的位置。

# jquery - jquery 效果在 jfiddle 中有效但不能在线 - 请帮助

> ID：10124803
> 
> 赞同：1
> 
> 时间：2012-04-12T13:41:24.750
> 
> 标签：jquery, effect

几个小时后仍然试图解决这个问题。该脚本在 jfiddle 中工作：http: [//jsfiddle.net/uCcYw/3/](http://jsfiddle.net/uCcYw/3/)，对 add_item (simplecart_shelfitem) 的父应用 Flash 效果，但不在线：[http](http://www.diysoakwells.com.au/test.html) ://www.diysoakwells.com.au/test.html 。它复制和粘贴相同的代码，我不明白！请帮忙 ： ）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:44:23.030

你需要把它放在里面

```
$(document).ready(function() {
   // some code here
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:50:11.763

改变

```
(function() {
    $(".item_add").click(function() {
        $(this).parent().effect("highlight", {}, 750);

        return false;
    });
})(jQuery); 
```

到

```
$(function() {
    $(".item_add").click(function() {     
        $(this).parent().effect("highlight", {}, 750);       
        return false;
    });
}) 
```

工作样本：http: [//jsfiddle.net/gtT4H/7/](http://jsfiddle.net/gtT4H/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:45:08.300

您还没有将 JavaScript 包装在[`$(document).ready()`](http://api.jquery.com/ready/)调用中。具有指定类的元素在 JS 执行时不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:45:08.950

您的就绪处理程序从一开始就缺少`$`：

```
$(function() {
    $(".item_add").click(function() {
        $(this).parent().effect("highlight", {}, 750);

        return false;
    });
}); 
```

# javascript - 如何将我选择的 GridView 行放入 Javascript 变量中？

> ID：10124809
> 
> 赞同：4
> 
> 时间：2012-04-12T13:41:46.923
> 
> 标签：javascript, asp.net-mvc, gridview, razor, devexpress

我使用带有剃须刀模板的 ASP.NET C# MVC3，我想知道以下内容：

我有一个`GridView`可以选择行的 DevExpress。
选择后，我想将它们传递给 Javascript 变量。我该怎么做呢？
如果我同时选择了多行，我可以把它们放在一个数组中吗？

编辑：感谢您的评论，我现在有以下“JQuery”功能：

```
$(function () { // Verwijder functie
    $('#select').click(function () {
        var Delete = confirm("Weet u zeker dat u de geselecteerde records wilt verwijderen?");
        if (Delete) {
            //Verwijder Funtie
            var test = ;
            alert(test);
        } else {
            //Niks
        }
    });
}); 
```

我需要将所选行的 Id 放入变量“test”中，我使用 GetSelectedFieldValuesCallback 和 GetSelectedFieldValues 进行了尝试。但这并没有像我预期的那样工作。如果有人可以提供一些例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T10:48:36.573

网格的最基本操作之一令人惊讶地缺乏示例。特别是如果您想将行发送回服务器以进行进一步处理。

grid.GetSelectedFieldValues() 的问题在于它会生成回发。这意味着您需要第二次回发才能将数据实际发送回服务器。

我能够实现的最优雅的解决方案是使用 grid.GetSelectedKeysOnPage()。这将返回通过 settings.KeyFieldName = "Id"; 定义的选定关键字段

将显示您的网格的视图。

```
<script type="text/javascript">
    $(function () {
        $('#btn1').click(function () {
            simpleGrid.PerformCallback();
        });
    });
    function OnBeginCallback(s, e) {
        var selectedValues = s.GetSelectedKeysOnPage();
        e.customArgs["Id"] = "";
        for (var i = 0; i < selectedValues.length; i++) {
            e.customArgs["Id"] += selectedValues[i] + ',';
        }
    }
</script>
@Html.Partial("ProductsPartial", Model.Data)
<div id="btn1">
    btn
</div> 
```

在单独的局部视图中创建网格很重要（不知道为什么，但这就是 devexpress 页面上所说的。

“ProductsPartial”局部视图：

```
@Html.DevExpress().GridView(
        settings =>
        {
            settings.Name = "simpleGrid";
            settings.KeyFieldName = "Id";
            settings.CallbackRouteValues = new { Controller = "yourController", Action = "Postback" };
            settings.SettingsText.Title = "simpleGridWithPostback";
            settings.Settings.ShowTitlePanel = true;
            settings.Settings.ShowStatusBar = GridViewStatusBarMode.Visible;
            settings.SettingsPager.Mode = GridViewPagerMode.ShowAllRecords;
            settings.SettingsPager.AllButton.Text = "All";
            settings.SettingsPager.NextPageButton.Text = "Next &gt;";
            settings.SettingsPager.PrevPageButton.Text = "&lt; Prev";
            settings.Width = new System.Web.UI.WebControls.Unit(200);
            settings.Columns.Add("Id");
            settings.Columns.Add("Name");
            settings.CommandColumn.Visible = true;
            settings.CommandColumn.ShowSelectCheckbox = true;
            settings.ClientSideEvents.BeginCallback = "OnBeginCallback";
        }).Bind(Model).GetHtml() 
```

最后是可以处理数据的控制器

```
public ActionResult Postback()
{
    String data = Request["Id"];
} 
```

这样你就可以在服务器端处理你想要的所有数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T08:35:12.083

我找到了解决方案。以下函数提供了我想要的数据：

```
$(function () {
    $('#select').click(function () {
        Index.GetSelectedFieldValues("Id", OnGetSelectedFieldValues);
    });
});

function OnGetSelectedFieldValues(result) {
    for (var i = 0; i < result.length; i++){
            alert(result[i]);
        }
} 
```

对于有/有同样问题的人。

更改**“索引**”

```
Index.GetSelectedFieldValues("Id", OnGetSelectedFieldValues); 
```

到你命名你的gridview的任何东西，并将“Id”更改为你想要获取的列。

您还可以从单行获取多个数据，为此您需要添加另一个 for 循环，`function OnGetSelectedFieldValues(result)`如下所示：

```
function OnGetSelectedFieldValues(result) {
    for (var i = 0; i < result.length; i++)
        for (var j = 0; j < result[i].length; j++) 
            alert(result[i][j]);
        }
} 
```

您还需要按以下方式更改吸气剂

`Index.GetSelectedFieldValues("Id;YOUROTHERCOLUMN", OnGetSelectedFieldValues);`

我希望这将在未来对其他用户有所帮助。

# python - 覆盖 haystack build_page() 函数

> ID：10124811
> 
> 赞同：1
> 
> 时间：2012-04-12T13:41:48.797
> 
> 标签：python, django, django-haystack, django-pagination

我正在使用`django-haystack`并想要覆盖`build_page()`功能。这是[build_page()](http://django-haystack.readthedocs.org/en/latest/views_and_forms.html#build-form-self-form-kwargs-none)的 url 。我想`paginator`用`django-paginator`. 多谢 ：-）

```
def build_page(self):
    """
    Paginates the results appropriately.

    In case someone does not want to use Django's built-in pagination, it
    should be a simple matter to override this method to do what they would
    like.
    """ 
```

我写了乱七八糟的代码。你能帮帮我吗？谢谢

```
class MyView(SearchView):
  def build_page(self):
    build_page = super(MyView, self).build_page()
    page = self.results
    return page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:03:08.133

我`django-haystack`与`django-pure-pagination`. 要使分页工作，您所要做的就是覆盖`build_page`Haystacks`SearchView`类和对象中`render`的方法。`Page`

网址.py

```
from core.views import ModifiedSearchView

urlpatterns = patterns('',
    url(r'^search/', ModifiedSearchView(), name='haystack_search'),
) 
```

视图.py

```
from haystack.views import SearchView
from pure_pagination.paginator import Paginator
from django.http import Http404

class ModifiedSearchView(SearchView):
    def build_page(self):
        try:
            page_no = int(self.request.GET.get('page', 1))
        except (TypeError, ValueError):
            raise Http404("Not a valid number for page.")

        if page_no < 1:
            raise Http404("Pages should be 1 or greater.")

        paginator = Paginator(self.results, self.results_per_page, request=self.request)
        page = paginator.page(page_no)

        return (paginator, page) 
```

搜索.html

```
{{ page.render }} 
```

或者

```
{% include "pagination.html" with page_obj=page %} 
```

分页.html

要修改默认渲染（例如，如果您使用引导程序），最简单的方法是将包`pagination.html`捆绑的模板复制`django-pure-pagination`到您的模板目录并包含`pagination.html`如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:20:24.543

我使用 django-pure-pagination 完成了这项工作

网址.py

```
from haystack.views import SearchView, search_view_factory
from haystack.forms import SearchForm
from myproj.myapp.views import CustomSearchView

urlpatterns += patterns('haystack.views',
    url(r'^buscar/$', search_view_factory(
        view_class=CustomSearchView,
        template='myapp/obj_list.html',
        form_class=SearchForm
    ), name='haystack_search'),
) 
```

视图.py

```
from haystack.views import SearchView
from pure_pagination import Paginator, EmptyPage, PageNotAnInteger
from django.conf import settings

class CustomSearchView(SearchView):
    def __name__(self):
        return "CustomSearchView"

    def extra_context(self):
        extra = super(CustomSearchView, self).extra_context()

        try:
            page = self.request.GET.get('page', 1)
        except PageNotAnInteger:
            page = 1

        RESULTS_PER_PAGE = getattr(settings, 'HAYSTACK_SEARCH_RESULTS_PER_PAGE', 20)
        p = Paginator(self.results, RESULTS_PER_PAGE, request=self.request)
        pag = p.page(page)
        extra['page_obj'] = pag

        # important, to make haystack results compatible with my other templates
        extra['myobj_list'] = [i.object for i in pag.object_list]

       return extra 
```

# c# - Mono for Android LVL 和

> ID：10124814
> 
> 赞同：0
> 
> 时间：2012-04-12T13:41:55.717
> 
> 标签：c#, xamarin.android, android-lvl

有没有人创建了[Android LVL](http://developer.android.com/guide/market/licensing/index.html)和[下载器库](http://developer.android.com/guide/market/expansion-files.html#AboutLibraries)的 C# 实现？还是[播放扩展库](http://developer.android.com/guide/market/expansion-files.html)？

我的意思是，要么有人已经完成了绑定，要么有人已经将库翻译成它的 C#/.Net 版本——翻译了它们。

如果没有，那么我可以开始使用它，因为对此存在一些问题，我想在我的应用程序中使用谷歌新的 4GB APK 扩展以及 LVL。

PS：我不知道在哪里问这个。也许有人可以指出一个更好的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:31:09.370

**新的**

我只想指出官方Java库的新绑定：

[https://github.com/xamarin/XamarinComponents/tree/master/Android/GoogleAndroidVending](https://github.com/xamarin/XamarinComponents/tree/master/Android/GoogleAndroidVending)

**老的**

我开始研究 th LVL 和扩展库的 C#.NET 版本：

[https://github.com/mattleibow/Android.Play.ExpansionLibrary](https://github.com/mattleibow/Android.Play.ExpansionLibrary)

任何帮助都会帮助所有可能想在他们的应用程序中使用它的人

# hibernate - java.sql.SQLException：ORA-00932：不一致的数据类型：预期 - 得到 BLOB

> ID：10124817
> 
> 赞同：2
> 
> 时间：2012-04-12T13:42:02.487
> 
> 标签：hibernate, oracle11g

我在我的应用程序中使用 Hibernate + Oracle

我在下面的代码中收到错误

示例 1\. 我的 pojo 类

```
public Test{

@Type(type = "blob2map")
public Map<String, String> param;

public Map<String, String> getParam() {
    return param;
}

public void setParam(Map<String, String> param) {
    this.param= param;
} 
```

1.  我的道类方法

    ```
    public List<BusinessObject> searchByExample(Class<BusinessObject> entity,
        BusinessObject example) {

    return getSession().createCriteria(entity).add(
            Example.create(example)).list();
    } 
    ```

其中业务对象是 Test.class 和示例测试

由 hibernate 或 Oracle10gDialect 生成的查询是

从测试中选择 this_.id,this_.param where this_.param=?

完整的错误日志是

```
Exception in thread "main" java.sql.SQLException: ORA-00932: inconsistent datatypes: expected - got BLOB

at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:305)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:272)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:623)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:181)
at oracle.jdbc.driver.T4CPreparedStatement.execute_for_describe(T4CPreparedStatement.java:420)
at oracle.jdbc.driver.OracleStatement.execute_maybe_describe(OracleStatement.java:896)
at oracle.jdbc.driver.T4CPreparedStatement.execute_maybe_describe(T4CPreparedStatement.java:452)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:986)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:2888)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:2929)
at com.csam.wsc.widget.management.BlobTester.showFilteredContent(BlobTester.java:55)
at com.csam.wsc.widget.management.BlobTester.main(BlobTester.java:98) 
```

# spring - 没有定义类型 [org.springframework.batch.item.file.mapping.DefaultLineMapper] 的唯一 bean：预期单个匹配 bean 但找到 3

> ID：10124824
> 
> 赞同：-1
> 
> 时间：2012-04-12T13:42:30.533
> 
> 标签：spring

我的mapping-xml中的一个spring bean具有以下映射。然后，当我尝试在我的一个junit-test类中@Autowired“ClassParent”时，我收到异常为“org.springframework.beans。 factory.NoSuchBeanDefinitionException：没有定义类型 [org.springframework.batch.item.file.mapping.DefaultLineMapper] 的唯一 bean：预期单个匹配 bean 但找到 3"

# 映射是：

```
<bean id="ClassParent"
        class="org.springframework.batch.item.file.mapping.PatternMatchingCompositeLineMapper">
        <property name="tokenizers">
            <map>
                <entry key="D*" value-ref="ClassC" />
                <entry key="T*" value-ref="ClassD" />
            </map>
        </property>
        <property name="fieldSetMappers">
            <map>
                <entry key="D*" value-ref="ClassA" />
                <entry key="T*" value-ref="ClassB" />
            </map>
        </property>
    </bean> 
```

我如何自动装配bean“ClassParent”请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:30:10.867

它尝试查找注入的 bean 定义并找到三个 bean。您必须使用资源注释指定名称属性，并以名称属性给出要使用该特定实例注入的 bean 的 id

```
@Resouce(name="classparentId")
@Autowired 
```

请参阅[自动装配问题和没有唯一 bean](https://stackoverflow.com/questions/2699608/problem-with-autowiring-no-unique-bean)

# java - 例外：“HTTP 标头之一的值格式不正确”

> ID：10124825
> 
> 赞同：3
> 
> 时间：2012-04-12T13:42:34.290
> 
> 标签：java, windows, eclipse, azure, azure-storage

大家好，我有一个问题....我已经创建了一个队列，但是我需要创建另一个队列，所以我编写了以下代码：

```
CloudStorageAccount storageAccount =
CloudStorageAccount.parse (storageConnectionString);
CoudQueueClient queueClient1= storageAccount.createCloudQueueClient();
Cloud Queue queue1 =queueClient1.getQueueReference("my-queue");
queue1.createIfNotExist (); 
```

第一个队列我称之为“myqueue”，而这个新队列我称之为“my-queue”，但是当你运行这段代码时：

```
queue1.createIfNotExist(); 
```

抛出的异常是`The value for one of the HTTP headers is not in the correct format ....`有谁知道告诉我为什么？

# jquery - 从周围的标签中选择标签文本的复选框？

> ID：10124829
> 
> 赞同：2
> 
> 时间：2012-04-12T13:42:45.083
> 
> 标签：jquery, jquery-selectors, checkbox

以下结构：

```
<label class="selectit">
    <input value="3" type="checkbox" name="tax_input[event_type][]" id="in-event_type-3">
     Workshops
</label> 
```

我可以很容易地找出复选框是否被选中……</p>

```
if ( $('#in-event_type-3').attr('checked') ) { 
```

还有一些方法可以使用选择器，我可以在“研讨会”中选择复选框？问题是`id`复选框的 是动态生成的，并且不时更改。但是，`label`-text“Workshops”是由我设置的，我想知道我是否可以以某种方式编写一个使用此“Workshops”字符串来选择复选框的选择器？

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:47:03.767

尝试`:contains`选择器：

```
$(".selectit:contains('Workshops')").find(":checkbox").prop('checked'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:48:54.493

给你的标签一个 for 属性：

```
<label class="selectit" for="in-event_type-3"> 
```

编辑：抱歉，没有意识到 ID 不时更改。你也可以放一些 jQuery 来查找输入，然后分配 for。像这样：

```
$('input').each( function() {
    $(this).parent().attr('for', $(this).attr('id') );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T13:49:18.770

不能加类吗？

以后更容易选择了吗？

```
if($('.Workshops').is(':checked')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T13:54:02.110

如果您可以控制输入以在其上放置一个类（让我们称之为“研讨会”），那么它将是：

```
$(".workshop").attr("checked", "checked"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:03:10.277

所以，其他人都说要使用课程——听他们说！这要容易得多！

但是，有时更改 HTML 内容根本不是一种选择。在这种情况下，我们将不得不求助于一些肮脏的工作并查看标签元素中包含的所有文本以找到相应的复选框。

```
var selectedCheckboxes = [];
$.each($("#container > label"),function(index,elem){
  var labelText = $(elem).text();
  var testString = "Workshops";
  if (labelText.match(testString)){
    selectedCheckboxes = $(elem).find("input[type='checkbox']:checked");
  }
}); 
```

我必须警告您，此解决方案适用于您提供的简单示例，但是如果标记稍微复杂一些（例如在具有自己的文本内容的附加子元素中），那么此方法将不得不变得更大并且更复杂.

没有内置的选择器来匹配 HTML 标记中元素的文本内容，这是正确的。元素的文本内容应该只是数据或信息的可视化表示；它不应该包含身份信息。为了识别一个元素和集合与其兄弟或后代分开，我们使用`id`和`class`属性。还有更多可以使用的，但这些是基本的构建块。

这里要注意的一件事是 jQuery`.text()`函数的行为。它会 ：

> 获取匹配元素集中每个元素的组合文本内容，**包括它们的后代。**

^(强调添加)

选择`:contains()`器对于后代具有类似的行为，并且[已经](https://stackoverflow.com/a/10124899/558021)在之前的答案中介绍过。

关于这个限制的更*实际*和更直观的例子......

鉴于这个简约的 HTML 片段：

```
<div id="matt">
  One
  <span>Two</span>
  <div> 
     <label>Three</label>
  </div>
  Four
</div> 
```

调用`$("#matt").text()`将导致：

> 一二三四

还包括所有后代文本内容...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T14:13:21.860

```
var element = $('input').filter(function() {
    return $.trim($(this).parent('label').text())=='Workshops'?$(this):null;
});

var isChecked = $(element).attr('checked'); //true-false 
```

# expressionengine - 如何在表达式引擎的入口页面上隐藏分页？

> ID：10124830
> 
> 赞同：0
> 
> 时间：2012-04-12T13:42:57.383
> 
> 标签：expressionengine

我目前正在使用 Expression Engine 构建一个站点。

我刚刚在我的新闻页面上放了一些分页。这完美地工作。但是分页出现在入口页面上，我不希望它出现。

我试过

{if segment_3 == ""} {paginate} 第 {current_page} 页，共 {total_pages} {pagination_links}

{/paginate} {/if}

它将它从入口页面中删除...但是这也将其从所有列表页面中删除...因为 P1/P2 等将显示为 segment_3..

有任何想法吗？

干杯戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:31:02.433

抓住[Switchee 插件](http://devot-ee.com/add-ons/switchee)，然后执行以下操作：

```
{exp:switchee variable="{segment_3}" parse="inward"}
{case value="#^P(\\d+)$#|''"}
    {paginate} Page {current_page} of {total_pages} {pagination_links}{/paginate}
{/case}
{/exp:switchee} 
```

虽然通常我建议为您的条目列表和单个条目视图使用单独的模板。它更符合 EE 的设计方式，如果您想添加诸如类别过滤或通过第三方数据（如标签等）过滤之类的内容，它将为您带来更少的问题。您可以使用片段来避免重复频道条目“循环”代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T01:03:26.993

您现在可以开箱即用地执行此操作：

`paginate="hidden"`

[https://ellislab.com/expressionengine/user-guide/templates/pagination.html#id11](https://ellislab.com/expressionengine/user-guide/templates/pagination.html#id11)

或者，您可以制作它`paginate="inline"`并使用 a `count == 1`or将您的逻辑包装在它周围，`count == total_results`以便更好地控制它的放置位置。

# ruby-on-rails - 如何优雅地处理设计在 AJAX 中的 401 状态？

> ID：10124832
> 
> 赞同：21
> 
> 时间：2012-04-12T13:43:09.783
> 
> 标签：ruby-on-rails, ajax, authentication, devise

使用**设计**一种方法`before_filter :authenticate_user!`来限制仅对经过身份验证的用户的访问。

当未经身份*验证*的用户无论如何都尝试访问受限页面时，设计会自动导致重定向到**登录**页面。

因此，尝试打开[http://localhost:3000/users/edit](http://localhost:3000/users/edit)将导致重定向到[http://localhost:3000/users/sign_in](http://localhost:3000/users/sign_in)。

现在，如果我将链接[http://localhost:3000/users/edit](http://localhost:3000/users/edit)定义为`:remote => true`，devise 只会通过 JS发出**401 状态码。**

我怎样才能优雅地应对这种情况并在**覆盖**或**重定向中显示登录对话框，因为非远程变体**会这样做？

*设计是否为我只需要激活的那种情况提供默认策略？*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T09:13:23.440

```
$(document).ajaxError(function (e, xhr, settings) {
        if (xhr.status == 401) {
           $('.selector').html(xhr.responseText);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-05T08:11:43.290

这是我现在选择的解决方案（使用 CoffeeScript 语法）：

```
$ ->
  $("a").bind "ajax:error", (event, jqXHR, ajaxSettings, thrownError) ->
    if jqXHR.status == 401 # thrownError is 'Unauthorized'
      window.location.replace('/users/sign_in') 
```

然而，这（它自己）只是忘记了用户最初想要访问的页面，这限制了可用性。

更优雅的处理需要额外的（控制器）逻辑。

**更新：正确的重定向**

在函数中，`this`保存用户打算访问的初始 URL。

通过调用`window.location.replace(this)`（*而不是显式重定向到登录页面*），应用程序将尝试将用户重定向到最初预期的目的地。

虽然仍然不可能（未经授权），但这现在将是一个 GET 调用（而不是 JS/AJAX）。因此， **Devise**能够启动并将用户重定向到登录页面。

从那时起，Devise 照常运行，在成功登录后将用户转发到最初预期的 URL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T00:43:53.373

一个版本混合事件绑定`location.reload()`：

```
$(function($) {
  $("#new-user")
    .bind("ajax:error", function(event, xhr, status, error) {
      if (xhr.status == 401) {  // probable Devise timeout
        alert(xhr.responseText);
        location.reload();      // reload whole page so Devise will redirect to signin
      }
    });
}); 
```

使用 Devise 3.1.1 进行测试，这确实设置正确`session["user_return_to"]`，因此用户在再次登录后返回页面（）。

我添加了`alert`一个简单的方法来解决这里讨论的不优雅的消息问题： [使用设计的 RoR 中的会话超时消息](https://stackoverflow.com/a/19647614)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-24T15:17:28.963

这是我在 CoffeScript 中的 copy-past-hapy(tm) 解决方案。它将所有 401 重定向到登录页面。

```
<% environment.context_class.instance_eval { include Rails.application.routes.url_helpers } %>

$(document).ajaxError (_, xhr)->
  window.location = '<%= new_user_session_path %>' if xhr.status == 401 
```

在 Javascript 中：

```
<% environment.context_class.instance_eval { include Rails.application.routes.url_helpers } %>

$(document).ajaxError( function(event, xhr){
  if (xhr.status == 401) {
    window.location = '<%= new_user_session_path %>'
  }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-27T05:40:53.263

As of Rails 5.1 and the new rails-ujs, all custom events return only one parameter: `event`. In this parameter, there is an additional attribute `detail` which contains an array of extra parameters. The parameters `data`, `status`, `xhr` have been bundled into `event.detail`. So handling the 401 error in ajax with the `ajax:error` event becomes:

```
document.body.addEventListener('ajax:error', function(event) {
  var detail = event.detail;
  var response = detail[0], status = detail[1], xhr = detail[2];
  if (xhr.status == 401) {
    // handle error
  }
}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-05T00:21:08.277

如果您正在执行“:remote => true”，则可以在“ajax:error”事件绑定上使用 .live。

```
$('#member_invite, #new_user')
        .live("ajax:success", function(evt, data, status, xhr){
          $.colorbox.close();
        })
        .live("ajax:error", function(evt, data, status, xhr){
          alert("got an error");
        }); 
```

其中“#new_user”将是表单 ID 值。

请注意，如果您已经有叠加层或对话框，更优雅的方法是简单地插入一条消息，而不是 alert()：

```
$('.messages').html('Invalid email or password'); 
```

在您的登录表单中，您只需执行

```
<div class="messages"></div> 
```

或者您甚至可以只替换表单的标题，无论您需要什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T13:59:46.833

我很乐意看看是否也有一种优雅的方式来做到这一点！

在那之前，这就是我的处理方式。

在您的 edit.js.erb 视图文件中，您可以输入以下代码：

```
<% case response.status
  when 200
%>
  //do what you need to do
<% when 401 %>
  //handle the 401 case, for example by redirecting to root or something
  window.location.href('/');
<% else %>
  //catch all
  alert('We\'ve had a problem, please close this, refresh the page and try again');
<% end %> 
```

它将查看响应的状态码，如果是 401，则重定向到登录页面。

我想知道是否没有办法直接在控制器级别处理这个问题。

# python - 使用两个项目作为键来创建字典 python

> ID：10124833
> 
> 赞同：22
> 
> 时间：2012-04-12T13:43:14.880
> 
> 标签：python

> **可能重复：**
> [如何制作一个包含多个键的字典？](https://stackoverflow.com/questions/10123853/how-do-i-make-a-dictionary-with-multiple-keys-to-one-value)

我有5列数据，

```
 usermac, useragent, area ,videoid, number of requests 
```

我想同时使用 (usermac,useragent) 作为创建字典的键，因为 (usermac, useragent) 的唯一组合代表一个唯一用户。

所以字典会是这样的：

```
 usermac1, useragent1: area1, videoid1, 10
                       area1, videoid2, 29
 usermac1, useragent2: area1, videoid1, 90
                       area1, videoid2, 34

                        ... 
```

我只知道如何创建一个只有一项作为键的字典。所以有人可以帮忙吗？

我的代码是：

```
 for line in fd_in.readlines():
        (mac, useragent, area, videoid, reqs) = line.split()

    video_dict = d1.setdefault((mac,useragent) {})
    video_dict.setdefault(videoid, []).append(float(reqs)) 
```

它有语法错误：

```
 video_dict = d1.setdefault((mac,useragent) {}) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-12T13:45:57.443

您可以使用任何（可散列的）对象作为 python 字典的键，因此只需使用包含这两个值的元组作为键。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-12T13:46:51.107

我相信您可以使用元组作为字典的键。所以你会有

```
mydict = {}
mydict[(usermac1,useragent1)] = [ [area1, videoid1, 10],[area1,videoid2,29]... ] 
```

# mysql - Mysql子数据库？？他们叫什么

> ID：10124839
> 
> 赞同：3
> 
> 时间：2012-04-12T13:43:50.833
> 
> 标签：mysql, phpmyadmin

![在此处输入图像描述](../Images/5fee36afbe5cb384080fe7f97a7c4e3f.png)

我正在查看 phpmyadmin，我看到一些看起来像 mysql 中的子数据库的东西。这些叫什么！？当然，我曾尝试搜索谷歌，但我并没有走得太远，因为我什至不知道这些东西是什么？模式？子数据库？任何帮助，将不胜感激。泰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:45:45.023

我认为这些没有名称-> 如果您使用下划线命名某些内容（例如 "maindb" 和 "maindb_test" ），则可以在 PHPMyAdmin 中获取它们，但是对于 MySQL 本身没有区别。这就是 PHPMyAdmin 试图使其更清晰的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T09:54:33.327

您可以在 PhpMyAdmin 中组织表格，方法是在名称的第一个（分组）部分后使用双下划线，例如：

projecta__table1

projecta__table2

项目b__table1

项目b__table2

这些表将根据 PhpMyAdmin 界面中的项目进行分组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T13:45:33.390

它们是数据库。phpMyAdmin 只是以一种有趣的方式列出它们（在第一个下划线 (_) 之前的字符串上进行分类）。

# unix - ssh 命令即使在完成其工作后也不会退出

> ID：10124842
> 
> 赞同：2
> 
> 时间：2012-04-12T13:43:58.893
> 
> 标签：unix, ssh

```
ssh GJMEHUL@10.1.0.61 'more /home/GJMEHUL/.bash_history > /home/GJMEHUL/smsc_cmdlog_12Apr12_GJMEHUL.txt' 
```

我存储在名为 alarmtest.sh 的脚本中的上述命令。我已经设置了 ssh 密钥。问题是即使命令正在执行它的工作，它也不会停止，我必须使用 Ctrl+C 手动杀死它。

当我在脚本中尝试以下命令时：

```
ssh GJMEHUL@10.1.0.61 'who > /home/GJMEHUL/smsc_cmdlog_12Apr12_GJMEHUL.txt' 
```

它工作得很好。

为什么 ssh 命令的行为是这样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:48:23.043

more 命令是交互式的。

您应该使用 cat 或 head 或 tail。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:48:58.923

您使用“更多”，它等待用户交互。也许您更愿意使用 cat 或简单的 cp？

# javascript - 使用从服务器动态填充的信息对 HTML 表进行排序

> ID：10124843
> 
> 赞同：6
> 
> 时间：2012-04-12T13:44:01.983
> 
> 标签：javascript, html, sorting, knockout.js

编辑 2012 年 4 月 16 日：我解决了问题并让排序正常工作。我还将时区转换为它们的单字母 UTC 代码 (AZ)。剩下的唯一事情就是让格式化程序检查夏令时，但是关于这个主题有很多。但是，如果您愿意，请随时做出贡献，这将是最受欢迎的。感谢大家帮助我实现目标。

EDIT2 2012 年 4 月 16 日：我解决了！！由于日期已经在 UTC，我正在做一些不必要的转换，这些转换会产生一些冲突/奇怪的结果。这个问题将被视为已解决。感谢所有帮助过的人。

我正在使用 knockoutjs 创建一个从我的服务器动态提取信息的小部件（html/javascript 中的表格）。我坚持为此的排序方法。我制作并下载了不同版本的表格排序方法，但它们都使从服务器中提取的初始数据消失了。他们将表格视为无法编辑的信息；所以似乎与我的表有冲突，因为我需要使所有信息都可编辑。

```
Right now in my ViewModel.js file I have:

Event(column1,column2,column3,...columnN){
    var self = this;
    self.column1 = column1;
    self.column2 = column2;
    .
    .
}

function ViewModel(){
    var self= this;
    self.rows = ko.observableArray([]);

    self.addRow = function(){
        self.rows.push("","",.......);
    }

    //THIS REMOVE FUNCTION DOESN'T WORK
    self.removeRow = function(row)
        self.rows.remove(row);
    }

    //THIS DOESN'T WORK EITHER, a.column and b.column, the 'column would be column1, 
    //column2, etc.
    self.SortMethod = function(){
        self.items.sort(function(a,b){
            return a.column < b.column ? -1 : 1;
        });
    }
}

//navigate to the server and its info
function getEvents(){
    $get.JSON("http://......", 
      function(data){
          $.each(data.d, function(i,item){handleEvent(item)})
      }
    );
}

//this populates the rows/columns in the table with the events(info) from the server
//Here, 'Model' is a new ViewModel which is declared further below
function handleEvent(item){
    var newEvent = new Event(item.Event1, item.Event2,.....);
    this.Model.rows.push(newEvent);
}

this.Model = new ViewModel();
this.getEvents();
ko.applyBindings(this.Model);

//The HTML code just makes the table, the headers and the style of the table and I then use 
//data-bind to bind the info in the server into the appropriate block in the table.  
//And yes, I do use <script src="knockout.js"> and for all other js files I have in the
//HTML file.

The HTML is basically this:

title
meta
scripts
table style
table
headers <tr><td>Column1Header</td><td>Column2Header</td>.....</tr>
table body
    Example line from table's body: <td><input data-bind = "value: column1" /><td>
    buttons (for adding a row and another button for sorting the array)

 //I think it would be better to get rid of the sorting button and make it so if you click on 
//the table headers, you'll sort the table according to that header's column's information. 
```

==================================================== ============================= EDIT2：

纠正了排序错误，我不小心忘记重命名复制的排序函数之一，因此导致冲突。我仍然无法弄清楚如何让桌子恢复到原来的顺序。如果有人可以查看我制作的排序功能并向我展示我需要做什么或更改，将不胜感激。

我也无法让删除功能正常工作。它以某种方式引起了冲突，因为当我将它包含在表中时，来自服务器的数据没有填充表。

编辑：我设法找到一种“快速而肮脏”的方式来对单个列进行排序。它是这样的：

```
//After the line: self.rows = ko.observableArray([]); I continued with:
self.sortColumn = "Column1";
self.sortAscending = true;

self.SortColumn1 = function (){
    if(self.sortColumn == "Column1")
        self.sortAscending = !self.sortAscending;
    else{
        self.sortColumn = "Column1";
        self.sortAscending = true;
    }
    self.rows.sort(function(a,b){
        if(self.sortAscending == true)
            return a.Column1 < b.Column1 ? -1 : 1;
        else
            return a.Column1 > b.Column1 ? -1 : 1;
    });
} 
```

但是，如果我为所有其他列复制了此代码（将所有 Column1 更改为 Column2 和 3，以此类推，用于函数的每个不同副本）；某些行未正确排序。但是，如果我只保留这一个功能而没有对其他列的任何副本，它就可以正常工作。

**我还需要能够将桌子恢复到原来的顺序。现在我将这个函数绑定到表中的 Column1 标题。如果我单击一次，它将按降序排列，如果我再次单击标题；它将表格按升序排列（当然根据 Column1 的信息）。现在的问题是，如果我第三次单击，它将表恢复到其默认（原始）顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:49:19.677

如何实施这样的[事情](http://jsfiddle.net/uWr4h/85/)？（单击列标题进行排序）：

```
function ViewModel(){
    var self = this;

    self.rows = ko.observableArray([]);
    self.newOne = {
        firstName:ko.observable(""),
        lastName:ko.observable("")
    };

    self.currentSort = ko.observable("");

    self.addNew = function() {
        self.addRow(self.newOne.firstName(), self.newOne.lastName());
        self.newOne.firstName("");
        self.newOne.lastName("");
    }

    self.addRow = function(firstName, lastName) {
        self.rows.push(
            {
                firstName: firstName.capitalize(),
                lastName:lastName.capitalize()
            });

        if(self.currentSort() != "")
            self.sortBy(self.currentSort());
    };

    self.removeRow = function() {
        self.rows.remove(this);
    };

    self.sortBy = function(sortField) {
        sortFunc = self.defaultSorter;

        self.rows.sort(function(left, right) {
            return sortFunc(left[sortField], right[sortField]);
        });

        self.currentSort(sortField);
    };

    self.defaultSorter = function(left, right) {
        if(left > right)
            return 1;

        return left < right ? -1 : 0;
    };
};

String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1).toLowerCase();
};

this.Model = new ViewModel();
this.Model.addRow("Any", "Coder");
this.Model.addRow("Some", "Another");
this.Model.addRow("Nice", "Guy");
this.Model.addRow("Cool", "One");
ko.applyBindings(this.Model);
```

```
th, td
{
    border: 1px solid gray;
    padding: 0px 2px;
}

.sort-by
{
    cursor: pointer;
}

button
{
    width: 18px;
    height: 18px;
    border: 1px solid lightgray;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/2.0.0/knockout-min.js"></script>

<div>
    current sorting: <span data-bind="text: currentSort"></span>
    <table>
    <thead>
        <tr>
            <th class="sort-by" data-bind="click: sortBy.bind($data, 'firstName')">First name</th>
            <th class="sort-by" data-bind="click: sortBy.bind($data, 'lastName')">Last name</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: rows">
        <tr>
            <td data-bind="text: firstName"></td>
            <td data-bind="text: lastName"></td>
            <td><button href='#' data-bind="click: $parent.removeRow">-</button></td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td><input data-bind="value: newOne.firstName" /></td>
            <td><input data-bind="value: newOne.lastName" /></td>
            <td><button data-bind="click: addNew">+</button></td>
        </tr>        
    </tfoot>
    </table>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:31:02.453

我解决了！！由于日期已经在 UTC，我正在做一些不必要的转换，这些转换会产生一些冲突/奇怪的结果。这个问题将被视为已解决。感谢所有帮助过的人。

# jquery-mobile - JQuery 移动树插件

> ID：10124849
> 
> 赞同：1
> 
> 时间：2012-04-12T13:44:15.243
> 
> 标签：jquery-mobile

谁能告诉我任何 jQuery Mobile Tree(TreeView, TreeList) 插件？实施它的良好起点也将符合条件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:50:51.523

许多通用的 jQuery 树插件在 jQuery Mobile 中也能正常工作；我建议做一些实验。

另一种解决方法是使用 jQuery mobile 的手风琴组件：

[http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html)

通过一些额外的 CSS 样式，您可以使一堆嵌套的手风琴看起来像一棵树。

# asp.net-mvc-3 - 根据登录的用户名 MVC3 检查数据库中的用户名

> ID：10124852
> 
> 赞同：0
> 
> 时间：2012-04-12T13:44:21.273
> 
> 标签：asp.net-mvc-3, model, controller

我对 MVC3 相当陌生，我正在尝试创建一个订单屏幕，用户可以在其中登录并查看他们最近的订单。这证明了一个问题，因为我试图从数据库中提取用户名值并将它们与当前登录的用户进行比较，以便每个用户只能查看自己的订单而不能查看其他人。但是，我正在努力将数据库中的值转换为字符串，以便将它们与登录的用户名进行比较。

这是我的模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace Assignment2.Models
{
    public partial class Order
    {
        [ScaffoldColumn(false)]
        public int OrderId                      { get; set; }

        [ScaffoldColumn(false)]
        public System.DateTime OrderDate { get; set; }

        [ScaffoldColumn(false)]
        public string Username                  { get; set; }

        [Required(ErrorMessage = "First Name is required")]
        [DisplayName("First Name")]
        [StringLength(160)]
        public string FirstName                 { get; set; }

        [Required(ErrorMessage = "Last Name is required")]
        [DisplayName("Last Name")]
        [StringLength(160)]
        public string LastName                  { get; set; }

        [Required(ErrorMessage = "House Number/Name")]
        [StringLength(70)]
        public string House                  { get; set; }

        [Required(ErrorMessage = "Street Name is required")]
        [StringLength(70)]
        public string Address1                  { get; set; }

        public string Address2                  { get; set; }

        [Required(ErrorMessage = "City is required")]
        [StringLength(40)]
        public string City                      { get; set; }

        [Required(ErrorMessage = "County is required")]
        [StringLength(40)]
        public string County                    { get; set; }

        [Required(ErrorMessage = "Post Code is required")]
        [DisplayName("PostCode")]
        [StringLength(10)]
        public string Postcode                  { get; set; }

        [Required(ErrorMessage = "Country is required")]
        [StringLength(40)]
        public string Country                   { get; set; }

        [Required(ErrorMessage = "Phone number is required")]
        [StringLength(24)]
        public string Phone                     { get; set; }

        [Required(ErrorMessage = "Email Address is required")]
        [DisplayName("Email Address")]
        [RegularExpression(@"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}",
        ErrorMessage = "Email is is not valid.")]
        [DataType(DataType.EmailAddress)]
        public string Email                     { get; set; }

        [ScaffoldColumn(false)]
        public decimal Total                    { get; set; }

        public List<OrderDetail> OrderDetails   { get; set; }
    }
} 
```

这就是我试图用我的控制器做的事情

```
using System.Web.Security;
using System.Web.Mvc;
using Assignment2.Models;

namespace Assignment2.Controllers
{
    public class OrderController : Controller
    {
        private RevolutionEntities db = new RevolutionEntities();

        public ViewResult Index()
        {
            string loggedinuser = User.Identity.Name;
            string username =   
                            from a in db.Orders
                            where a.Username == loggedinuser
                            select a;                            
            return View();
    }
} 
```

谢谢杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:52:12.513

```
var orders = db.Orders.Orders(p=>p.UserName == loggedinuser); 
```

# asp.net - 使用 SOAP wcf webservice 检索对象列表

> ID：10124857
> 
> 赞同：1
> 
> 时间：2012-04-12T13:44:32.507
> 
> 标签：asp.net, wcf, web-services, soap, dotnetopenauth

我目前正在构建一个通过 DotNetOpenAuth 库进行身份验证的 Web 服务。为此，我在 IIS7 服务器上创建了两个站点，一个与消费者，另一个与提供者和实际的 web 服务（顺便说一下，我目前正在本地调试消费者项目，但最终我会切换到消费者项目在单独的 IIS7 站点上）。

每个项目的实施单独工作就像一个魅力，然而，当把它们捆绑在一起时，我遇到了一个问题。

从消费者调用 web 服务，并返回一个`List<TimeTable>`（TimeTable 是我自己编写的类）。然而，每当我测试我的代码时，webservice 工作正常，生成一个包含大约 300 个项目的列表，但是当消费者收到它时，列表突然计数为 0。

我相信这可能是因为 web 服务和消费者是独立的项目。消费者项目不“知道” TimeTable 类（因为它只存在于服务提供者项目中），所以在消费者中我尝试使用 a`List<object>`来存储`List<TimeTable>`，这显然不起作用。但是我不知道我应该改用什么。

想法？

编辑：根据要求，我添加了来自消费者和提供者的最重要的方法。请注意，其中大多数与 DotNetOpenAuth 示例几乎相同——以这种方式检索字符串或“列表”非常有效。

**消费者** *SampleWcf.aspx.cs中的方法*

```
protected void retrieveTimeTable_Click(object sender, EventArgs e)
{
     try
     {                
         List<object> timeTables = CallService(client => client.retrieveTimeTable("1", "52"));
         this.retrieveTimeTableLabel.Text = timeTables.Count.ToString();
     }
     catch (SecurityAccessDeniedException)
     { this.retrieveTimeTableLabel.Text = "Access denied!"; }}

private T CallService<T>(Func<DataApiClient, T> predicate) 
{
    DataApiClient client = new DataApiClient();
    var serviceEndpoint = new MessageReceivingEndpoint(client.Endpoint.Address.Uri, HttpDeliveryMethods.AuthorizationHeaderRequest | HttpDeliveryMethods.PostRequest);
    var accessToken = Session["WcfAccessToken"] as string;
    if (accessToken == null) 
    { throw new InvalidOperationException("No access token!"); }
    WebConsumer consumer = this.CreateConsumer();
    WebRequest httpRequest = consumer.PrepareAuthorizedRequest(serviceEndpoint, accessToken);
    HttpRequestMessageProperty httpDetails = new HttpRequestMessageProperty();
    httpDetails.Headers[HttpRequestHeader.Authorization] = httpRequest.Headers[HttpRequestHeader.Authorization];
    using (OperationContextScope scope = new OperationContextScope(client.InnerChannel)) {
    OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpDetails;
          return predicate(client); }} 
```

*在 DataApiClient 类中*

```
public List<string> getList()
{ return base.Channel.getList(); } 
```

***类 DataApi.cs***中提供程序中的方法****

 ***```
public List<TimeTable> retrieveTimeTable(string weekVan, string weekTot)
{
    TimeTableWebService ttws = new TimeTableWebService();
    List<TimeTable> results = ttws.getTimeTable(weekVan, weekTot);

    StringBuilder fbr = new StringBuilder();
    fbr.AppendLine("New log created on: " + DateTime.Now.ToString());
    fbr.AppendLine("Number of results: " + results.Count);

    using (StreamWriter outfile = new StreamWriter(@"D:\oauthSiteTest\log9.txt"))
    { outfile.Write(fbr.ToString()); }

    return results; } 
```***

# java - Java 中 spring-security 的替代方案（spring）

> ID：10124859
> 
> 赞同：13
> 
> 时间：2012-04-12T13:45:02.363
> 
> 标签：java, spring, authentication, authorization

我正在寻找一个良好的安全框架，允许注释基于参数的访问规则的方法。

基本上我想检查是否允许经过身份验证的用户以特定对象作为参数调用某个方法。

Spring security 可以满足我的需求，但正因为[如此](https://stackoverflow.com/questions/10110374/preauthorize-doesnt-work)（[spring forum](http://forum.springsource.org/showthread.php?125300-PreAuthenticate-not-having-any-effekt)），如果我无法让它工作，我正在寻找替代方案。

要求：

*   基于配置或注释的方法安全性，我想避免将我的安全代码放在我的服务方法中
*   规则基于方法的参数，简单的基于角色的安全性是不够的
*   开箱即用的弹簧支撑是一个优点

有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:13:21.440

Apache Shiro 与 Spring Security 竞争。更简单，覆盖更多。见[这里](http://shiro.apache.org/spring.html)。

# asp.net - 带有 WCF 服务的 ASP.NET - 如何对数据进行分页

> ID：10124860
> 
> 赞同：0
> 
> 时间：2012-04-12T13:45:07.490
> 
> 标签：asp.net, wcf, pagination

我有一个 WCF 服务，它具有返回列表的函数，例如返回客户列表的函数

```
[OperationContract]
IList<Customer> GetCustomers(); 
```

我的 ASP.NET 页面可能会：

```
var top10Customers = Model.GetCustomers().Take(10);
var first10Customers = Model.OrderBy(c => c.ID).Take(10); 
```

据我了解，以下代码将从 WCF 服务返回所有客户，然后应用`OrderBy`和`Take(10)`

一次返回整个数据集似乎效率低下，尤其是 WCF 服务可能驻留在与 ASP.NET 网站不同的机器上。在这种情况下，我怎样才能最好地分页结果集或允许对其进行 LINQ 操作？

我现在可以看到的唯一选项是向函数添加分页选项，但是一直重写这段代码似乎效率低下：

```
[OperationContract]
IList<Customer> GetCustomers(int from, int numResults); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:06:34.700

我建议将参数添加到 GetCustomers 方法中，然后在该端执行 LINQ 以生成最有效的 SQL？

```
[OperationContract] 
IList<Customer> GetCustomers(int fromRecoard, string orderBy); 
```

order by 将是一个小技巧，因为您需要将 sting 转换为 lamda 表达式并使用 Customer 的属性，但网络上有很多示例。

有关 .Net 4.5 中 IQueryable 的更多信息，请查看 OData 部分下的这篇博文。

[http://www.davidhayden.me/blog/asp.net-mvc-4-web-api-routes-and-apicontroller](http://www.davidhayden.me/blog/asp.net-mvc-4-web-api-routes-and-apicontroller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:35:46.473

```
[OperationContract]
IList<Customer> GetCustomers(int from, int numResults); 
```

什么更无效率？在几个地方更改您的代码，或者通过“网络”发送整个数据集以获得 10 行？

您最好的选择通常是在服务端应用分​​页，LINQ 可以对数据库执行最佳查询。即使服务 sid 上的分页没有那么优化，您仍然可以通过将少量数据传回给消费者来获得收益。

至于排序，我认为没有理由不能在客户端进行排序。事实上，我认为你应该这样做，以便消费者可以按照他们认为合适的方式进行分类。您不会从排序中获得或损失太多 - 相同数量的记录被传递，排序与否。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:06:54.730

我建议将参数添加到 GetCustomers 方法中，然后在该端执行 LINQ 以生成最有效的 SQL？

# java - 发生异常时 JBehave 不会失败构建

> ID：10124866
> 
> 赞同：1
> 
> 时间：2012-04-12T13:45:28.017
> 
> 标签：java, maven, build, jbehave

我正在使用 JBehave 运行使用 WebDriver 编写的测试。Maven 用于自动化构建过程。现在，当我运行测试并且它们失败时，即抛出有关超时的异常等，整个构建不会中断。

这是异常的示例输出：

[糊盒](http://pastebin.com/zvuD2nDX)

谁能告诉我为什么在那之后构建不会失败以及如何让它失败？如果您需要更多信息，请告诉我什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:49:52.843

设置[`org.jbehave.core.configuration.Configuration`](http://jbehave.org/reference/stable/javadoc/core/org/jbehave/core/configuration/Configuration.html)对象时，添加：

```
myConfiguration.usePendingStepStrategy(new FailingUponPendingStep()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T06:39:57.197

在我的项目中，我使用 maven-failsafe-plugin 执行测试，我遇到了同样的问题。解决方案是为故障安全添加验证阶段：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <executions>
        <execution>
        <id>failsafe-verify</id>
        <phase>verify</phase>
        <goals>
            <goal>verify</goal>
        </goals>
        </execution>
    </executions>
  </plugin>
</plugins> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T17:57:34.213

虽然晚了 5 年，实际上并没有回答 2012 年提出的问题，但 jBehave 4.0 有一个错误，[即使用 jBehave 4.0+ 时，Maven 运行不会触发 Maven 失败](https://jbehave.atlassian.net/browse/JBEHAVE-1099)。

因此，如果您在 2017 年或 2018 年从谷歌搜索到这里，请查看票证，因为它可能包含您问题的答案（截至 2017 年撰写本文时，它是“降级到 3.9.5...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-27T12:25:43.327

可能设置以下属性会有所帮助： `-Dignore.failure.in.view=false`

# sencha-touch-2 - Sencha touch 2.0：将“空”选择添加到选择字段

> ID：10124869
> 
> 赞同：1
> 
> 时间：2012-04-12T13:45:33.450
> 
> 标签：sencha-touch-2

我了解“选择字段”旨在从您提供的现有“选项”中进行选择（或从“商店”中的条目中进行选择）。

我想要的是用户不选择任何选项的可能性。最重要的是，如果能够在未选择任何选项时显示占位符（例如“选择一个...”），那就太好了。

当前的选择字段行为是，如果您未提供初始值或不属于“选项”（或您的“商店”）的值，则默认选择第一项。

关于选择器，我不介意在选择一个选项后是否无法返回空选择。我想要的是，如果您不触摸它，可以将选择字段留为空选择。

有没有人这样做的有效解决方案（覆盖选择字段？扩展一个新字段？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T13:51:59.767

这是 Thiem Nguyen 扩展 Select 字段的解决方案的通用实现。希望它会节省一些时间;）

```
/**
 * Adds an additional option to a select field filled by a store
 * @cfg {mixed} valueFieldValue Value of the added option
 * @cfg {string} displayFieldValue Text to display for the added option
 */
Ext.define('util.field.SelectPlus', {
    extend: 'Ext.field.Select',
    xtype: 'selectfieldplus',
    alternateClassName: 'Ext.field.SelectPlus',
    requires: 'Ext.data.Store',

    config: {
        displayFieldValue: '',
        valueFieldValue: ''
    },

    /**@override
     * Insert our item each time the store is loaded
     * @param {Ext.data.Store} store The refreshed store
     */
    onStoreDataChanged: function(store) {
        if(store.findExact(this.getValueField(), this.getValueFieldValue()) === -1) { //prevent infinite loop ;)
            var item = Ext.create(store.getModel());
            item.set(this.getValueField(), this.getValueFieldValue());
            item.set(this.getDisplayField(), this.getDisplayFieldValue());
            store.insert(0, item);
        }
        this.callParent([store]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:28:33.497

覆盖`Ext.field.Select`和扩展新领域都能够满足您的需求，但我真的更喜欢第二种解决方案。根据我的经验，无论用户从您的选择字段中选择“空”还是“非空”选项，都会执行后续流程。例如：

*   将其作为“空”值保存到数据库中。
*   简单地忽略它。

此外，由于它实际上是一个选项，用户可以随时在选择“非空”选项后再次选择“空”选项。

当然，这会有点烦人，尤其是当您与很多商店合作时。但是考虑到灵活性和易用性，我推荐这个解决方案。

# iis - IIS 7 没有响应

> ID：10124884
> 
> 赞同：-2
> 
> 时间：2012-04-12T13:46:17.037
> 
> 标签：iis, iis-7

基于 IIS7 的网站一天前还在工作，现在什么也没有。浏览器只是说“等待 www.sitename.com”。我在具有管理员权限的服务器上运行浏览器。没有错误消息，没有日志条目，Firefox 只是无限期地等待（与 IE 相同）。我从哪说起呢？我一无所知。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T14:04:23.210

您可能希望考虑在服务器上打开 IIS 管理器并在左侧的树中找到您的站点。找到它后，单击站点图标，然后查看是否有一个小的方形图标覆盖。这将告诉您您的网站是否已停止。如果是这样，在最右侧的窗格中，有一个标题为“管理网站”的部分，其中包含一个启动它的选项。

如果站点没有停止，请尝试单击右侧窗格中“浏览网站”部分下方显示的浏览链接上的链接。如果您的网站在这样做之后没有出现，那么您可能想尝试使用“管理网站”部分中的“重新启动”链接。

如果以上都不起作用，您可能需要尝试从 Windows 服务管理器界面重新启动名为“万维网发布服务”的服务或重新启动服务器。如果一切都失败了，我会考虑的下一步是浏览 Windows 事件日志和您的 IIS 日志以查找错误和/或删除并重新创建网站。

希望这有助于您入门。

# xslt - 如何使用 xslt 替换元素和属性中的命名空间前缀

> ID：10124887
> 
> 赞同：3
> 
> 时间：2012-04-12T13:46:32.007
> 
> 标签：xslt, namespaces, transformation

我有一个源 xml，如下所示：

```
<SampleRequest xmlns="http://sample.com/s"
       xmlns:s1="http://sample.com/s1"
       xmlns:s2="http://sample.com/s2"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://sample.com/s schema.xsd">
<data>
<s1:customer s1:firstName="Jim" s1:lastName="Ellison"/>
<s2:address>
    123 test street
</s2:address>
</data>
</SampleRequest> 
```

我需要将其转换为以下

```
<SampleRequest xmlns="http://sample.com/t"
       xmlns:t1="http://sample.com/t1"
       xmlns:t2="http://sample.com/t2"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://sample.com/t targetSchema.xsd">
<data>
<t1:customer t1:firstName="Jim" t1:lastName="Ellison"/>
<t2:address>
    123 test street
</t2:address>
</data>
</SampleRequest> 
```

两个 xmls 具有相同的架构但不同的命名空间。

我试图使用以下 xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns="http://sample.com/s"
            xmlns:s1="http://sample.com/s1"
            xmlns:s2="http://sample.com/s2"
            xmlns:t1="http://sample.com/t1"
            xmlns:t2="http://sample.com/t2"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="s1 s2">
<xsl:output method="xml" encoding="UTF-8" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="/">
    <SampleRequest xmlns="http://sample.com/t"
       xmlns:t1="http://sample.com/t1"
       xmlns:t2="http://sample.com/t2"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <xsl:attribute name="xsi:schemaLocation" namespace="http://www.w3.org/2001/XMLSchema-instance">
            http://sample.com/t targetSchema.xsd
        </xsl:attribute>
        <xsl:copy>
             <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </SampleRequest>
</xsl:template>
<xsl:template match="s1:*"> 
    <xsl:element name="t1:{local-name()}" namespace="http://sample.com/t1">      
        <xsl:apply-templates select="* | node()"/>
    </xsl:element>
</xsl:template>

<xsl:template match="s2:*"> 
    <xsl:element name="t2:{local-name()}" namespace="http://sample.com/t2">
        <xsl:apply-templates select="* | node()"/>
    </xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

我得到以下结果

```
<?xml version="1.0" encoding="UTF-8"?><SampleRequest xmlns="http://sample.com/t"   xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:t2="http://sample.com/t2" xmlns:t1="http://sample.com/t1" xsi:schemaLocation=" http://sample.com/t targetSchema.xsd">
<t1:customer/>
<t2:address>
    123 test street
</t2:address>
</SampleRequest> 
```

似乎所有属性都丢失了。我对 XSLT 很陌生，感谢每一点帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T14:26:36.527

您的 XSLT 中有两个问题。首先，在匹配 s1 和 s2 元素的地方，您随后不会尝试将模板应用于任何属性。您需要替换此语句

```
<xsl:apply-templates select="* | node()"/> 
```

有了这个声明

```
<xsl:apply-templates select="@* | node()"/> 
```

其次，您没有任何模板来匹配这些属性。你需要一个这样的模板：

```
<xsl:template match="@s1:*">
    <xsl:attribute name="t1:{local-name()}">
        <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template> 
```

试试这个 XSLT

```
<xsl:stylesheet version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns="http://sample.com/s" 
   xmlns:s1="http://sample.com/s1" 
   xmlns:s2="http://sample.com/s2" 
   xmlns:t1="http://sample.com/t1" 
   xmlns:t2="http://sample.com/t2" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:xs="http://www.w3.org/2001/XMLSchema" 
   exclude-result-prefixes="s1 s2">

   <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

   <xsl:strip-space elements="*"/>

   <xsl:template match="/">
      <SampleRequest 
        xmlns="http://sample.com/t" 
        xmlns:t1="http://sample.com/t1" 
        xmlns:t2="http://sample.com/t2" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
         <xsl:attribute name="xsi:schemaLocation">http://sample.com/t targetSchema.xsd</xsl:attribute>
         <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
         </xsl:copy>
      </SampleRequest>
   </xsl:template>

   <xsl:template match="s1:*">
      <xsl:element name="t1:{local-name()}">
         <xsl:apply-templates select="@* | node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@s1:*">
      <xsl:attribute name="t1:{local-name()}">
         <xsl:value-of select="."/>
      </xsl:attribute>
   </xsl:template>

   <xsl:template match="s2:*">
      <xsl:element name="t2:{local-name()}">
         <xsl:apply-templates select="@* | node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@s2:*">
      <xsl:attribute name="t2:{local-name()}">
         <xsl:value-of select="."/>
      </xsl:attribute>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<SampleRequest 
   xsi:schemaLocation="http://sample.com/t targetSchema.xsd" 
   xmlns:t1="http://sample.com/t1" 
   xmlns:t2="http://sample.com/t2" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:xs="http://www.w3.org/2001/XMLSchema" 
   xmlns="http://sample.com/t">
   <t1:customer t1:firstName="Jim" t1:lastName="Ellison"/>
   <t2:address> 123 test street </t2:address>
</SampleRequest> 
```

# android - Mapview 无法在安卓设备上运行

> ID：10124889
> 
> 赞同：0
> 
> 时间：2012-04-12T13:46:38.580
> 
> 标签：android, android-maps, android-mapview

我正在尝试使用 Mapview 查找两个城市之间的路径。

问题是 Mapview 无法工作，仅在设备中获取灰色网格和块而不是地图，但在模拟器中工作正常。

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.MapDirection"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

       <uses-library android:name="com.google.android.maps" />

    <activity
        android:label="@string/app_name"
        android:name=".MapDirectionActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

     <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

</manifest> 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="xxxxxxxxxxxxxxxxxxxxxx"
/>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:54:28.773

> 仅在设备中获取灰色网格和块而不是地图，但在模拟器中可以正常工作。

任何一个：

1.  你在你的布局中没有权限`apiKey`，对应于你用来签署你的应用程序的签名密钥，或者

2.  您的设备无法访问互联网或无法访问 Google 的地图图块服务器

（第三种可能性是缺少`INTERNET`权限，但看起来你有这个权限）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:00:41.947

好的...“调试”的 API 密钥仅适用于模拟器。如果您使用 Eclise 以“调试模式”将软件加载到手机中，您将得到图块，而不是地图。如果您使用“release”API 密钥更新 mapview，然后使用 Eclipse“EXPORT”创建一个 apk 文件，将其复制到手机上的 sd 卡，然后使用安装程序应用程序（从 Google Play 免费下载）安装它在电话上它工作！

# javascript - 让我的javascript函数在ipad上全屏显示

> ID：10124894
> 
> 赞同：0
> 
> 时间：2012-04-12T13:46:52.300
> 
> 标签：javascript, ipad, resize

我写了一个可以在浏览器中玩的javascript游戏。当我在 ipad 上播放时，它太大了，你必须滚动才能看到所有内容。

如果在 ipad 上播放，如何将其调整为始终与 ipad 的屏幕尺寸一样大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:50:05.367

你可能需要这个：

```
<meta name="viewport" content="initial-scale=1.0, width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

更多阅读： [meta "viewport" device-width: Wrong width small on Opera Mobile 9.7 (10 works)](https://stackoverflow.com/questions/1974703/meta-viewport-device-width-wrong-width-small-on-opera-mobile-9-7-10-works)

从这里开始，您必须使用 screen.width 和 height 值进行计算以正确缩放，但使用之前的元数据，您至少会在屏幕尺寸方面获得一致的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:52:13.043

尝试`<meta>`在您的 html 头部分中设置此标记

```
<meta name="viewport" content="width=device-width"> 
```

如果这还不够，请使用`css media queries`进一步自定义移动设备的元素，例如

```
@media only screen and (min-width: 480px) {
  /* Style adjustments for viewports 480px and over */
}

@media only screen and (min-width: 768px) {
  /* Style adjustments for viewports 768px and over */
} 
```

# java - 编写预构建测试的最佳方法是什么

> ID：10124895
> 
> 赞同：0
> 
> 时间：2012-04-12T13:46:55.490
> 
> 标签：java, testing, prebuild

在开始构建 java 项目之前，我想检查代码中的一些标志和 xml 文件中的一些值。最好的方法是什么？你会写一个java类来做吗？你会只使用脚本吗？

我正在使用 Ant，我需要检查在我的类中设置为静态变量的一些标志是否具有正确的值。我可以编写单元测试，但在这种情况下，它们将在构建之后执行。我需要在它之前完成它。

我还应该补充一点，我正在使用 Windows

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:46:57.960

如果测试失败，这种事情通常会由单元测试处理，并且构建会被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:53:22.373

如果您将问题如此笼统地提出，很多事情都是可能的。你的构建环境是什么？如果您使用 Maven，您可以为它编写一个 Maven 插件（在 Java 或 Groovy 中）。如果您使用 ant，也许一个 groovy 脚本和[Groovy Ant Task](http://groovy.codehaus.org/The+groovy+Ant+Task)可以提供帮助。

您要检查哪些内容？也许像[PMD](http://pmd.sourceforge.net/)、[checkstyle](http://checkstyle.sourceforge.net/)或[findbugs](http://findbugs.sourceforge.net/)这样的工具可以满足您的需求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:51:52.650

您可以使用 TeamCity 和[预测试提交](http://www.jetbrains.com/teamcity/features/delayed_commit.html)。这将在构建服务器上生成构建工件之前运行单元测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T15:10:46.813

如果您的程序中的值需要与 XML 文件中的值保持一致，那么您最好从程序中的 XML 文件中读取值，而不是尝试使它们保持同步并且必须验证它们是否同步.

# c# - Log4Net 以编程方式检查 IsEnabledFor 的 Appender 过滤器

> ID：10124896
> 
> 赞同：3
> 
> 时间：2012-04-12T13:46:55.943
> 
> 标签：c#, log4net, log4net-configuration

如何以编程方式检查`IsEnabledFor`是否`true`适用于某个 appender 过滤器。

这是我的配置：

```
<log4net>
 <root>
  <level value="ALL" />
  <appender-ref ref="appender" />
 </root>

 <appender name="appender" type="log4net.Appender.FileAppender">
  <filter type="log4net.Filter.LevelRangeFilter">
   <levelMin value="ERROR" />
   <levelMax value="FATAL" />
  </filter>
 </appender>

<log4net> 
```

好的，所以如果我将`<root>`Level 设置为说`ERROR`并执行`IsEnabledFor`（调试）它会返回`true`，但如果我将`<root>`level设置`ALL`为并向 appender 添加过滤器，则它不会考虑过滤器。

如何让它包含附加过滤器，或者有另一种查询方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:15:10.963

我可能是错的，但我不明白如何轻松做到这一点。你可以做的是这样的：

```
var hierarchy = LogManager.GetRepository() as Hierarchy;
if(hierarchy != null) 
{       
    var appenders = hierarchy.GetAppenders();
    foreach( IAppender appender in appenders)
    {
        var appenderSkeleton = a as AppenderSkeleton
        if (appenderSkeleton != null)
        {
            IFilter filterHead = appenderSkeleton.FilterHead;
            // now analyse the filter chain
        }        
    }
} 
```

我没有测试这段代码，但它应该或多或少地工作。您以这种方式得到的是所有从`AppenderSkeleton`. 过滤器链的头部实现`IFilter`（与所有过滤器一样），它包含一个方法和一个属性：

```
FilterDecision Decide(LoggingEvent loggingEvent);   
IFilter Next { get; set; } 
```

现在您可以创建一个`LoggingEvent`具有您感兴趣的日志级别的 a 实例，并使用该`Next`属性遍历过滤器链并通过调用来测试每​​个过滤器`FilterDecision`。

这会告诉您附加程序是否会接受或拒绝日志记录事件，但您需要注意附加程序也可能根据其他条件（例如消息内容）进行过滤，因此它不会完全是“IsEnabledFor”实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T19:45:32.383

我知道这是一篇旧帖子，但 Stefan 的回答有助于构建以下内容。我的用例是给定操作性能的自定义日志记录级别。显然我们需要切换这个级别的能力。

在我的特殊情况下，我们只使用 LevelMatchFilter 所以我们不会遇到其他过滤器类型的问题......

```
 /// <summary>
    /// evaulates if a custom log level is enabled. 
    /// </summary>
    /// <param name="log"></param>
    /// <param name="level"></param>
    /// <returns></returns>
    public static bool IsLevelEnabled(this log4net.ILog log, log4net.Core.Level level)
    {
        var hierarchy = log4net.LogManager.GetRepository() as log4net.Repository.Hierarchy.Hierarchy;
        if (hierarchy != null)
        {
            var appenders = hierarchy.GetAppenders();
            foreach (log4net.Appender.IAppender appender in appenders)
            {
                var appenderSkeleton = appender as log4net.Appender.AppenderSkeleton;
                if (appenderSkeleton != null)
                {
                    log4net.Filter.IFilter filterHead = appenderSkeleton.FilterHead;
                    //traverse the filter chain
                    var currentFilter = filterHead;
                    while (currentFilter.Next != null)
                    {
                        if (currentFilter is log4net.Filter.LevelMatchFilter)
                        {
                            //if the filter level matches the target
                            if (((log4net.Filter.LevelMatchFilter)currentFilter).LevelToMatch == level)
                            {
                                return true;
                            }
                        }
                        //move to the next filter
                        currentFilter = currentFilter.Next;
                    }
                }
            }
        }
        return false;
    } 
```

# xpages - 用于数据源的参数的最简单的 URL 编码/解码模式

> ID：10124901
> 
> 赞同：2
> 
> 时间：2012-04-12T13:47:19.307
> 
> 标签：xpages

应用程序使用按类别过滤视图中的文档的机制 - 查找所有可用类别（仅少数）并将其提供给 Outline 组件。然后每个大纲条目添加在视图数据源中使用的 URL 参数，以按类别过滤文档。问题在于非 ANSI 字符（国际）。在许多情况下，它按预期工作，但一些代理禁止在 URL 中使用这些字符。

解决方法是使用 url 的编码/解码，这使得视图数据源的 Category 属性中的 SSJS 代码变得复杂：不是简单`context.getUrlParameter("category");`，而是需要解码参数，这是“复杂的”，例如：[http:// www.mkyong.com/java/how-to-encode-a-url-string-or-form-parameter-in-java/](http://www.mkyong.com/java/how-to-encode-a-url-string-or-form-parameter-in-java/)

是否有任何 XPages 特定的方法来简化这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:51:58.200

旧 RFC 规范中不允许使用非 ANSI 字符，必须对其进行编码。有名为*escape*和*unescape*的 SSJS 函数，但它们不能正常工作（最后用 8.5.3 测试）

但是您可以改用Java。在向 URL 添加参数之前，您可以使用此 SSJS：

```
java.net.URLEncoder.encode (" ABC DEF", "utf-8") 
```

这将为您提供*%20ABC%20DEF*的结果，并且可以作为参数添加到您的 URL (fe *?category=%20ABC%20DEF* )。

要解码 SSJS 中的参数，您可以使用

```
var hlp = context.getUrlParameter("category");
var param = java.net.URLDecoder.decode (hlp, "utf-8") 
```

# javascript - OpenLayers 作为大型（不断变化和不断增长的）图像查看器

> ID：10124902
> 
> 赞同：1
> 
> 时间：2012-04-12T13:47:42.933
> 
> 标签：javascript, image, openlayers

基本上，我想要做的是使用地图查看器作为图像查看器，具有相同的高效切片加载、缩放/平移功能，而无需自己构建。

具体来说，我需要一个图像查看器，它允许图像增长和更改，同时不改变任何旧（未更改）图块的坐标。这意味着图像开始生长的中心点 (0,0) 必须始终保持 (0,0)。所以我正在寻找一个库，它允许我使用一个非常基本的笛卡尔坐标系（没有地图投影！），它将在所有方向上无限地请求瓷砖而没有重复（与地图库如何忽略 y-地图上方和下方的轴，但 x 轴重复）。

还有一个问题。我需要缩放级别 0 才能一直放大*。*由于图像在不断增长，因此无法确定最大缩放级别是多少，并且坐标需要基于基本图像图层切片，以便缩放级别 z 中的每个切片包含 2^z 基本图层切片。

我想知道 OpenLayers 是否可以做到这一点以及如何做到这一点。如果不是，任何可以做到这一点的其他（开源javascript）库的建议将不胜感激！我试过玩[Polymaps](http://polymaps.org/)，但文档太少了，我无法判断它是否有效。到目前为止还没有运气。

如果这些都没有意义，请告诉我，我会尝试包含一些图像或更好的解释。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:22:15.230

毕竟我最终使用了 Polymaps，因为我比 OpenLayers 更喜欢它，因为它更快并且滚动和平移更流畅。我不能完全按照我的意愿去做，但我所做的已经足够接近了。

我最终编写了自己的图层（基于 po.image() 图层），它禁用了地图的无限水平循环。然后我编写了我自己的 po.url() 版本，它修改了发送到服务器以获取图块的请求，以便反转缩放（我只是随意选择了 20 的“最大”缩放，然后在发出请求时减去缩放级别20) 并且 x 和 y 坐标根据缩放级别和以 (0,0) 为中心的地图从 Polymaps 使用的标准行、列坐标转换为笛卡尔坐标。

如果有人对代码感兴趣，我可以在这里发布。让我知道！

编辑：我在 github 上发布了代码[https://github.com/camupod/polymaps](https://github.com/camupod/polymaps)

相关文件是 src/Backwards* 和 examples/backwards（虽然它实际上不起作用，但您也许可以清理一些关于它*应该*如何工作的信息）。

# python - Python列表推导使用条件从列表中创建不等长度的列表

> ID：10124903
> 
> 赞同：2
> 
> 时间：2012-04-12T13:47:46.337
> 
> 标签：python, generator, list-comprehension

使用列表推导`itertools`或类似功能，是否可以根据条件从一个列表创建两个不相等的列表？这是一个例子：

```
main_list = [6, 3, 4, 0, 9, 1]
part_list = [4, 5, 1, 2, 7]

in_main = []
out_main = []

for p in part_list:
    if p not in main_list:
        out_main.append(p)
    else:
        in_main.append(p)

>>> out_main
[5, 2, 7]

>>> in_main
[4, 1] 
```

我试图保持简单，但作为一个使用示例，`main_list`可​​以是`part_list`包含字典键的字典中的值。我需要同时生成两个列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:50:41.613

只要您没有重复的数据和顺序无关紧要。

```
main_set = set([6, 3, 4, 0, 9, 1])
part_set = set([4, 5, 1, 2, 7])

out_main = part_set - main_set
in_main = part_set & main_set 
```

任务完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T13:49:39.297

如果顺序（在 part_list 中）很重要：

```
out_main = [p for p in part_list if p not in main_list]
in_main = [p for p in part_list if p in main_list] 
```

除此以外：

```
out_main = list(set(part_list) - set(main_list))
in_main = list(set(part_list) & set(main_list)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T14:24:50.970

`itertools`适用于可迭代对象的基于true的解决方案：

```
>>> part_iter = iter(part_list)
>>> part_in, part_out = itertools.tee(part_iter)
>>> in_main = (p for p in part_in if p in main_list)
>>> out_main = (p for p in part_out if p not in main_list) 
```

用这些来制作列表会破坏使用迭代器的意义，但结果如下：

```
>>> list(in_main)
[4, 1]
>>> list(out_main)
[5, 2, 7] 
```

这具有延迟生成`in_main`和`out_main`从另一个延迟生成的序列的优点。唯一的问题是，如果您在另一个之前迭代一个，`tee`则必须缓存一堆数据，直到它被另一个迭代器使用。因此，仅当您大致同时遍历它们时，这才真正有用。否则你还不如自己使用辅助存储。

还有一个有趣的基于三元运算符的解决方案。（您可以将其压缩为列表理解，但那是错误的。）我将 main_list 更改为用于 O(1) 查找的集合。

```
>>> main_set = set(main_list)
>>> in_main = []
>>> out_main = []
>>> for p in part_list:
...     (in_main if p in main_set else out_main).append(p)
... 
>>> in_main
[4, 1]
>>> out_main
[5, 2, 7] 
```

还有一个有趣的`collections.defaultdict`方法：

```
>>> import collections
>>> in_out = collections.defaultdict(list)
>>> for p in part_list:
...     in_out[p in main_list].append(p)
... 
>>> in_out
defaultdict(<type 'list'>, {False: [5, 2, 7], True: [4, 1]}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:10:54.540

```
in_main = list(set(main_list) & set(part_list))
out_main = list(set(part_list) - set(in_main)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T14:43:43.753

从谓词列表开始：

```
test_func = [part_list.__contains__, lambda x: not part_list.__contains__(x)]
# Basically, each of the predicates is a function that returns a True/False value     
# (or similar) according to a certain condition.
# Here, you wanted to test set intersection; but you could have more predicates.

print [filter(func, main_list) for func in test_func] 
```

然后你有你的“单线”，但是通过维护一个谓词列表你有一些开销工作

正如在其他答案中所说，您可以通过使用来加快查找速度`set(main_list)`（当然不是在列表理解中，而是在之前）。

# php - mysql中的多维表

> ID：10124904
> 
> 赞同：1
> 
> 时间：2012-04-12T13:47:47.793
> 
> 标签：php, mysql, multidimensional-array

mySQL中是否可以有一个多维表

我想根据他们的 ip、他们的用户代理和他们发送的会话令牌来记录用户。

像这样的东西：

```
ip1
    user-agent1
        session token1
    user-agent2
        session token2
        session token3
ip2
    user-agent3
        session token4 
```

我想避免使用`serialize()`，因为我听说它会降低桌子的效率和便携性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:53:59.250

不是你有一个多维表，而是*多个表*。

### 表 ips

```
id INT
ip VARCHAR 
```

### 表用户代理（将 UA 链接到 IP）

```
ip_id INT
useragent VARCHAR(2048) (some large value) 
```

### 表令牌（将用户链接到令牌）

```
id
userid 
token 
```

上述所有三个组件通过它们的`id`列链接在一​​起，形成一个标识会话的表。Multiple`ip_id`可能与单个 关联`token`，而后者又关联多个可能的 UA 字符串。

这使得同一个 IP 可能存在相同的 UA 字符串，但具有来自同一个 IP 的多个不同会话令牌的可能性。

### 表会话

```
ip_id
token_id 
```

# .net - .NET/MySQL 连接器：证书存储位置

> ID：10124905
> 
> 赞同：1
> 
> 时间：2012-04-12T13:47:49.473
> 
> 标签：.net, mysql, ssl-certificate, mysql-connector

尝试使用不在“CurrentUser”（当前用户 > 个人 > 证书存储）中但在计算机证书存储中的证书。MySQL 文档仅引用 MySQL 教程，该教程在其示例中使用 CurrentUser，但我找不到实际有效证书位置字符串值的列表。我尝试了“CurrentComputer”，但这引发了运行时错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:57:06.423

[找到了](http://mysql-connector-net.sourcearchive.com/documentation/6.4.3-1/namespaceMySql_1_1Data_1_1MySqlClient_af5d0cd3d5250513841ef8de1e504ecad.html#af5d0cd3d5250513841ef8de1e504ecad)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T20:14:55.760

有效值为`None`、`CurrentUser`和`LocalMachine`。

在 .NET 连接器的源文件[MySql.Data/Provider/Source/MysqlDefs.cs](http://lists.mysql.com/commits/87374?f=plain)中：

```
public enum MySqlCertificateStoreLocation
{
    /// <summary>
    /// Do not use certificate store
    /// </summary>
    None,
    /// <summary>
    /// Use certificate store for the current user
    /// </summary>
    CurrentUser,
    /// <summary>
    /// User certificate store for the machine
    /// </summary>
    LocalMachine
} 
```

# php - Symfony2 两步验证

> ID：10124906
> 
> 赞同：0
> 
> 时间：2012-04-12T13:47:53.527
> 
> 标签：php, validation, symfony

我创建了一个名为 Proposal 的实体（在 PHP 中使用 Symfony2），它带有几个参数，如 $proposalFile、$shippingProposalDate 和许多其他参数。

它们都不应该是空白的。但我需要让用户保存此表单，即使他们没有填写所有必填字段。表格末尾是最后一个名为 proposalDone 的复选框。一旦用户将提案标记为完成，我需要验证所有字段不为空。

可以在 Symfony2 中验证填充字段和空白不验证。在将提案标记为完成后验证所有并检查用户是否没有忘记任何东西。

# iphone - WebView 活动指示器不会停止旋转 - iPhone Objective-C

> ID：10124908
> 
> 赞同：0
> 
> 时间：2012-04-12T13:47:56.693
> 
> 标签：iphone, objective-c, xcode, ios5, uiactivityindicatorview

一旦网站完成加载，我希望它停止旋转......

我有它的代码：

在我的.h

```
IBOutlet UIActivityIndicatorView *activityIndicator; 
```

在我的.m

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
[activityIndicator startAnimating];
}
- (void)webViewDidFinishLoad:(UIWebView *)webView {
[activityIndicator stopAnimating];
self.view = webView;
} 
```

然后我将它连接到笔尖中的文件所有者。它旋转，但不会停止！有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:55:32.950

Web 视图是否真正完成加载？设置一个断点，看看你是否曾经打过那个方法。

而且，为了完整性......您确实将 webview 的委托设置为您的视图控制器，正确（我假设您这样做，因为它开始动画，但您永远不知道）？

有两种方法可以设置 webview 的委托。如果您的笔尖中有它，请控制单击 web 视图并从委托属性拖动到文件的所有者。或者，在 viewDidLoad 中，只需说 _webView.delegate = self;

***更新：***在我们的谈话之后，关于下面的评论，我只想添加这个以确保完整性，以及其他任何在未来看到这个问题的人。您的 webView 在完成加载后变得巨大的原因是，当您说 self.view = webview 时，您将其分配给视图控制器的视图属性。没必要。把它拿出来，你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:10:03.313

Make sure you have the correct toggle settings on the actual UIActivityIndicatorView object in Interface Builder and make sure it's linked correctly. I believe you want "hides when stopped".

Also make sure you have the WebView Delegate implemented.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:55:19.263

应该按照您实现它的方式工作。

添加以下代码

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
    [loadIndicator stopAnimating];
} 
```

也许您的 UIWebView 没有正确完成加载。

# mysql - 是否有任何 mysql/Oracle 函数可以提供增量编号。基于另一列相似值的一列？

> ID：10124909
> 
> 赞同：0
> 
> 时间：2012-04-12T13:47:57.380
> 
> 标签：mysql, oracle, function, count

我很想知道**是否有任何 mysql/Oracle 函数可以提供增量编号。基于另一列相似值的一列？**

就像在下面的代码中一样，我有 order_primary 列，其中包含订单号。因此，基于此我们可以确定有多少产品属于特定订单。计数也用于存储诸如 1,2,3 等的值。但我面临的问题是计数值只会增加......

我的代码-：

```
$query_product = "SELECT name, id,qty_ordered,price,row_total,base_subtotal, 
base_shipping_amount,base_grand_total,order_primary,message
FROM  sales_order WHERE `prod_Flag`=0 ";

$result_query_product = mysql_query($query_product);
        $count = 0;
            while($row = mysql_fetch_array($result_query_product))
        {
            $count++;
            $name = ($row["name"]);
            $message1 = ($row["message"]);
                 $result_str_product .= "('". mysql_real_escape_string($name) . "',". "'" . $row["sku"] . "'," . "'" . $row["qty_ordered"] . "',". "'" . $row["price"] . "'," . "'" . $row["row_total"] . "'," . "'" . $row["base_subtotal"]. "'," . "'" . $row["base_shipping_amount"] . "'," . "'" . $row["base_grand_total"] ."',". $row["order_primary"].",". $count.",". "'".mysql_real_escape_string($message1)."'".", NOW()),";      
        }

        $query_prod_insert = "INSERT into sales_product(name, sku, qty_ordered, price, row_total, base_subtotal,    base_shipping_amount,base_grand_total,prod_foreign,count,message,product_creation_date) VALUES ".$result_str_product;
    $final_query = substr_replace($query_prod_insert,";",-1);
    $result_query_product_outbound = mysql_query($final_query); 
```

所以我的o/p是-：

```
('shirt','st','2.0000','75','150','150','20','170',29,1,NOW()),
    ('tie'  ,'te','2.0000','50','100','100','10','110',29,2,NOW()),
    ('tie'  ,'te','2.0000','50','100','100','10','110',29,3,NOW()),                   
('socks','sk','5.0000','20','100','100','05','105',30,4,NOW()); 
    ('jackt','jt','3.0000','40','120','120','15','135',30,5,NOW()); 
```

但我想要这样的o/p-：

```
 ('shirt','st','2.0000','75','150','150','20','170',29,**1**,NOW()),
    ('tie'  ,'te','2.0000','50','100','100','10','110',29,**2**,NOW()),
    ('tie'  ,'te','2.0000','50','100','100','10','110',29,**3**,NOW()),

('socks','sk','5.0000','20','100','100','05','105',30,**1**,NOW()); 
    ('jackt','jt','3.0000','40','120','120','15','135',30,**2**,NOW()); 
```

**那么是否有任何 mysql/Oracle 函数可以提供增量编号。基于另一列相似值的列，即在我的情况下，对于相同的订单号。值说 29，计数值应该是 1,2,3 & 对于相同的订单号。30，计数值应该是1,2...**

那么是否有任何功能或如何做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:54:39.793

对于 Oracle，这非常简单：

```
SELECT order_no, 
       row_number() over (partition by order_no order by order_primary) as rn
FROM sales_product 
```

注意：我猜测列名是因为它们隐藏在 PHP(?) 代码中的某个地方。请根据您的表结构调整它们。对于以后的帖子，您还应该在问题中包含相应的 CREATE TABLE 语句。

# ssl - ssl cacertfile 生成

> ID：10124911
> 
> 赞同：2
> 
> 时间：2012-04-12T13:48:01.050
> 
> 标签：ssl, openssl

ssl certfile 和 ssl cacertfile 有什么区别？

我读到第一个是用户的证书，而第二个是用于验证对等证书的受信任证书，如果我不验证对等，可以省略。

鉴于我生成第一个

```
openssl x509 -req -days 30 -in request.pem -signkey key.pem -out certificate.pem 
```

如何生成第二个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T02:18:49.017

“常规”证书和 CA 证书都是证书 - 存在细微差别，但从您的角度来看，它们之间并没有本质上的不同。

首先 - 什么是证书？证书是签名的文件。它就像一个信封。当您从邮政服务处收到一封未打开的邮件时，您相信写在信封上的发件人就是将所有内容放入其中的人 - 它是密封的。假设有人在信封里给你发了一个号码 15728，然后说“好的，这是我的号码。每当有人给你东西并出示这个号码时，都要知道是我”。

这是对签名的简化 - 例如在 X.509 案例中，您通过有效加密并给它一个“数字”来签署类似“我的名字是 ABC，我的组织被称为 DEF，它位于 GHI 国家”之类的东西世界上任何其他人都不可能产生。除非您拥有私钥，否则很难获得相同的文档，因此该证书在出示时可用于确定**任何其他**文档是否由拥有该私钥的人提供。与您的朋友发送给您的号码类似——任何人都可以发送给您 15728，但他们不太可能从所有其他可能性中猜出该号码。

我将尝试解释 CA / 端点证书的情况。首先，基本前提是信任。假设你有很多人（我会用字母 A、B、C 等来标记他们）。假设他们像这样认识并相互信任：

*   A <-> B
*   B <-> C
*   D <-> E

假设 A 需要买一辆车。假设 C 和 E 都有车。通常，B 更有可能告诉 A：“嘿，我的朋友 C 有一辆您正在寻找的车”，而 A 会基于信任（相信这是一辆好车）购买那辆车。在这种情况下，它不太可能从 E 购买汽车，因为 E 不受信任。然而，D 可能更渴望从 E 处购买汽车，因为他们彼此了解并信任对方。

CA 类似于上例中的 B。CA 基本上是一个受信任的权威，地球上很多人都盲目地信任它。他们将自己的声誉投入到业务中来赢得信任。您基本上信任不同的 CA 供应商，他们将验证人员和组织，并仅在完成这些检查后向他们颁发证书。

CA 拥有所谓的“根证书”或“中间证书”。根证书安装在例如您的操作系统或浏览器证书存储中，并且本质上是受信任的。其他证书通过链接的方式得到信任。也就是说，如果 CA A 向 CA B 颁发了证书，则 CA B 拥有该“中间证书”，它可以用来签署更多（中间或端点）证书。例如，它可以是这样的：

*   CA A 有根证书 R
*   CA A 向 CA B 颁发中间证书 X
*   CA B 向 CA C 颁发中间证书 Y
*   CA C 向您颁发证书 Z

现在你可以通过链接的方式，基本上对世界上任何信任 CA A（即它的根证书 R）的人说：

*   好的，我有这个证书 Z。这表明 CA C 信任我。
*   反过来，CA C 拥有表明 CA B 信任它的证书 Y。
*   CA B 又拥有证明 CA A 信任它的证书 X
*   你信任 CA A，所以没有理由不信任我

您可以在此处阅读有关此内容的更多信息：

*   [http://en.wikipedia.org/wiki/Digital_certificate](http://en.wikipedia.org/wiki/Digital_certificate) - 右边的图片很好地解释了这一点
*   [http://gdp.globus.org/gt3-tutorial/multiplehtml/ch10s04.html](http://gdp.globus.org/gt3-tutorial/multiplehtml/ch10s04.html) - X.509 的简短解释
*   [http://support.citrix.com/proddocs/topic/xenapp5fp-w2k8/sg-certificates-authorities-v2.html](http://support.citrix.com/proddocs/topic/xenapp5fp-w2k8/sg-certificates-authorities-v2.html)和[http://support.citrix.com/proddocs/topic/xenapp5fp-w2k8/sg-certificate-链-v2.html](http://support.citrix.com/proddocs/topic/xenapp5fp-w2k8/sg-certificate-chains-v2.html)
*   [http://www.x500standard.com/index.php?n=X509.X509Overview](http://www.x500standard.com/index.php?n=X509.X509Overview) - X.509 本身

以下是您可以使用以下方法创建它们的方法`openssl`：

*   [https://stackoverflow.com/a/10176685/438544](https://stackoverflow.com/a/10176685/438544)

# svn - 如果 teamcity 构建被破坏，是否可以停止 subversion 签入？

> ID：10124917
> 
> 赞同：1
> 
> 时间：2012-04-12T13:48:17.087
> 
> 标签：svn, teamcity

我们有一个庞大的分布式团队，其中一些人不断签入而不先更新，并且（更糟糕的是！）在 teamcity 构建为红色时签入。

是否可以在允许人们签入新工作之前设置颠覆以检查 teamcity 构建状态？

我意识到这几乎可以肯定是一件可怕的事情，团队教育和自满会更好......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:51:13.640

您可以编写一个 svn 预提交钩子，它将使用 TeamCity API 查看构建是否损坏，如果是，则停止提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:52:05.707

Teamcity 提供了一个名为“[预测试提交](http://www.jetbrains.com/teamcity/features/delayed_commit.html)”的功能，也许这会对您有所帮助？

# android - 我可以在 XML 中绘制矩形吗？

> ID：10124919
> 
> 赞同：130
> 
> 时间：2012-04-12T13:48:22.530
> 
> 标签：android, xml, draw

我想知道我是否可以在 XML 中绘制矩形。我知道如何以编程方式使用 drawRect 方法进行绘制。

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-04-12T14:00:54.747

是的，你可以，这是我之前做的一个：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/listview_background_shape">
    <stroke android:width="2dp" android:color="#ff207d94" />
    <padding android:left="2dp"
        android:top="2dp"
        android:right="2dp"
        android:bottom="2dp" />
    <corners android:radius="5dp" />
    <solid android:color="#ffffffff" />
</shape> 
```

您可以在 drawable 文件夹中创建一个新的 XML 文件，并添加上述代码，然后将其保存为 rectangle.xml。

要在布局中使用它，您可以将`android:background`属性设置为新的可绘制形状。我们定义的形状没有任何尺寸，因此将采用布局中定义的视图的尺寸。

所以把它们放在一起：

```
<View
    android:id="@+id/myRectangleView"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:background="@drawable/rectangle"/> 
```

最后; 您可以将此矩形设置为任何视图的背景，尽管对于 ImageViews 您将使用`android:src`. 这意味着您可以使用矩形作为 ListViews、TextViews...等的背景。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-12T14:03:45.520

使用 Shape Drawable创建`rectangle.xml`像这样放入您的**Drawable**文件夹...

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
   <solid android:color="@android:color/transparent"/>
   <corners android:radius="12px"/> 
   <stroke  android:width="2dip" android:color="#000000"/>  
</shape> 
```

把它放到一个`ImageView`

```
<ImageView 
android:id="@+id/rectimage" 
android:layout_height="150dp" 
android:layout_width="150dp" 
android:src="@drawable/rectangle">
</ImageView> 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-08-22T12:43:31.413

快速而肮脏的方式：

```
<View
    android:id="@+id/colored_bar"
    android:layout_width="48dp"
    android:layout_height="3dp"
    android:background="@color/bar_red" /> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-21T06:25:31.087

尝试这个

```
 <TableRow
                    android:layout_width="match_parent"
                    android:layout_marginTop="5dp"
                    android:layout_height="wrap_content">

                    <View
                        android:layout_width="15dp"
                        android:layout_height="15dp"
                        android:background="#3fe1fa" />

                    <TextView
                        android:textSize="12dp"
                        android:paddingLeft="10dp"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:text="1700 Market Street"
                        android:id="@+id/textView8" />
                </TableRow> 
```

输出

[![在此处输入图像描述](../Images/fe30cdfa2b0cf1d0ce5639acd62819c7.png)](https://i.stack.imgur.com/2h3WQ.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-10T08:39:43.927

使用此代码

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

    <corners
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="5dp"
        android:radius="0.1dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="5dp" />

    <solid android:color="#Efffff" />

    <stroke
        android:width="2dp"
        android:color="#25aaff" />

</shape> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-03T07:50:23.770

在drawable中创建资源文件

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<solid android:color="#3b5998" />
<cornersandroid:radius="15dp"/> 
```

# .net - 将 Tiff 文件转换为每像素 .net 8 位的 png 格式

> ID：10124923
> 
> 赞同：0
> 
> 时间：2012-04-12T13:48:44.540
> 
> 标签：.net, image-processing

我需要使用 .net 将黑白颜色的 tiff 文件转换为 png。但我无法将颜色深度降低到每像素 8 位。它总是以每像素 24 位输出文件。有什么办法可以在.net中做到这一点？或任何开源托管库这样做？

我正在使用的代码。

```
public bool convertTiffToJpg(string sourceFile, string targetFile)
        {

            bool response = false;

            try
            {

                // Get individual Images from the original image
                Image sourceImage = Bitmap.FromFile(sourceFile);

                var total = sourceImage.GetFrameCount(FrameDimension.Page);
                var pageNumbers = Enumerable.Range(0, total).ToArray();
                Image[] sourceImages = new Image[pageNumbers.Length];
                for (int i = 0; i < pageNumbers.Length; i++)
                {
                    sourceImage.SelectActiveFrame(FrameDimension.Page, pageNumbers[i]);
                    float width = sourceImage.Width;
                    float height = sourceImage.Height;
                    ResizeImage(1000, sourceImage.Height, ref width, ref height);

                    using (var returnImage = new Bitmap(sourceImage, (int)width, (int)height))
                    {
                        using (MemoryStream ms = new MemoryStream())
                        {
                            returnImage.Save(ms, ImageFormat.Jpeg);
                            sourceImages[i] = Image.FromStream(ms);
                        }
                    }
                }

                // Merge individual Images into one Image
                var totalHeight = sourceImages.FirstOrDefault().Height * total;
                var totalWidth = sourceImages.FirstOrDefault().Width;
                using (var finalImage = new Bitmap(totalWidth, totalHeight))
                {
                    using (var g = Graphics.FromImage(finalImage))
                    {
                        // All other pages
                        for (int i = 0; i < pageNumbers.Length; i++)
                        {
                            g.DrawImage(sourceImages[i], new Point(0, sourceImages[i].Height * i));
                        }
                    }
                        ImageCodecInfo Codec = ImageCodecInfo.GetImageEncoders().Where(codec => codec.FormatID.Equals(ImageFormat.Png.Guid)).FirstOrDefault();

                        finalImage.Save(targetFile, Codec, GetCodedParams(50));
                }

                response = true;
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }

            return response;
        }

private EncoderParameters GetCodedParams(int? quality)
        {
            var imageQuality = quality ?? 80;
            EncoderParameter ratio = new EncoderParameter(Encoder.Quality, imageQuality);
            EncoderParameter light = new EncoderParameter(Encoder.ColorDepth, 8L);
            EncoderParameters codecParameters = new EncoderParameters(2);
            codecParameters.Param[0] = ratio;
            codecParameters.Param[1] = light;
            return codecParameters;
        } 
```

但我仍然无法获得 8 位深度的 png。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:30:41.740

这就是我想出的。我使用图像量化来减少颜色深度。

[http://msdn.microsoft.com/en-us/library/aa479306.aspx](http://msdn.microsoft.com/en-us/library/aa479306.aspx) 这就是我得到的量化器

```
 public bool convertTiffToPng(string sourceFile, string targetFile)
        {

            bool response = false;

            try
            {

                // Get individual Images from the original image
                Image sourceImage = Bitmap.FromFile(sourceFile);

                var total = sourceImage.GetFrameCount(FrameDimension.Page);
                var pageNumbers = Enumerable.Range(0, total).ToArray();
                Image[] sourceImages = new Image[pageNumbers.Length];
                for (int i = 0; i < pageNumbers.Length; i++)
                {
                    sourceImage.SelectActiveFrame(FrameDimension.Page, pageNumbers[i]);
                    float width = sourceImage.Width;
                    float height = sourceImage.Height;
                    ResizeImage(1024, sourceImage.Height, ref width, ref height);

                    using (var returnImage = new Bitmap(sourceImage, (int)width, (int)height))
                    {
                        using (MemoryStream ms = new MemoryStream())
                        {
                            returnImage.Save(ms, ImageFormat.Jpeg);
                            sourceImages[i] = Image.FromStream(ms);
                        }
                    }
                }
                 var p = new System.Collections.ArrayList();
                    p.Add(Color.Black);
                    p.Add(Color.Gray);
                    p.Add(Color.LightGray);
                    p.Add(Color.DarkGray);
                    p.Add(Color.White);
                    PaletteQuantizer quantizer = new PaletteQuantizer(p);
                    //OctreeQuantizer quantizer = new OctreeQuantizer(2,2);

                // Merge individual Images into one Image
                var totalHeight = sourceImages.FirstOrDefault().Height * total;
                var totalWidth = sourceImages.FirstOrDefault().Width;
                using (var finalImage = new Bitmap(totalWidth, totalHeight))
                {

                    using (var g = Graphics.FromImage(finalImage))
                    {
                        g.InterpolationMode = InterpolationMode.Low;
                        g.PixelOffsetMode = PixelOffsetMode.HighSpeed;

                        // All other pages
                        for (int i = 0; i < pageNumbers.Length; i++)
                        {
                            g.DrawImage(sourceImages[i], new Point(0, sourceImages[i].Height * i));
                        }
                    }

                    //finalImage.MakeTransparent(Color.White);
                    using (var toout = quantizer.Quantize(finalImage))
                    {
                        ImageCodecInfo Codec = ImageCodecInfo.GetImageEncoders().Where(codec => codec.FormatID.Equals(ImageFormat.Png.Guid)).FirstOrDefault();
                        toout.Save(targetFile, Codec, GetCodedParams(null));
                    }

                }

                response = true;
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }

            return response;
        } 
```

# php - 将 SQL_Latin1_General_CP1_CI_AS 编码为 UTF-8

> ID：10124930
> 
> 赞同：15
> 
> 时间：2012-04-12T13:48:57.773
> 
> 标签：php, xml, sql-server-2008, encoding, utf-8

我正在使用 DomDocument 用 PHP 生成一个 XML 文件，我需要处理亚洲字符。我正在使用 pdo_mssql 驱动程序从 MSSQL2008 服务器中提取数据，并将 utf8_encode() 应用于 XML 属性值。只要没有特殊字符，一切正常。

服务器是 MS SQL Server 2008 SP3

数据库、表和列排序规则都是 SQL_Latin1_General_CP1_CI_AS

我正在使用 PHP 5.2.17

这是我的 PDO 对象：

```
$pdo = new PDO("mssql:host=MyServer,1433;dbname=MyDatabase", user123, password123); 
```

我的查询是一个基本的 SELECT。

我知道将特殊字符存储到 SQL_Latin1_General_CP1_CI_AS 列中并不是很好，但理想情况下，不更改它就可以工作会很好，因为其他非 PHP 程序已经使用该列并且工作正常。在 SQL Server Management Studio 中，我可以正确看到亚洲字符。

考虑到上述所有细节，我应该如何处理数据？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T15:21:12.383

我找到了解决方法，所以希望这对某人有所帮助。

首先，SQL_Latin1_General_CP1_CI_AS 是 CP-1252 和 UTF-8 的奇怪组合。基本字符是 CP-1252，所以这就是为什么我所要做的就是 UTF-8 并且一切正常。亚洲和其他 UTF-8 字符在 2 个字节上编码，并且 php pdo_mssql 驱动程序似乎讨厌不同长度的字符，所以它似乎对 varchar（而不是 nvarchar）进行 CAST，然后所有 2 字节字符变成问号（' ？'）。

我通过将其转换为二进制来修复它，然后用 php 重建文本：

```
SELECT CAST(MY_COLUMN AS VARBINARY(MAX)) FROM MY_TABLE; 
```

在 php 中：

```
//Binary to hexadecimal
$hex = bin2hex($bin);

//And then from hex to string
$str = "";
for ($i=0;$i<strlen($hex) -1;$i+=2)
{
    $str .= chr(hexdec($hex[$i].$hex[$i+1]));
}
//And then from UCS-2LE/SQL_Latin1_General_CP1_CI_AS (that's the column format in the DB) to UTF-8
$str = iconv('UCS-2LE', 'UTF-8', $str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T19:27:24.683

我知道这篇文章很旧，但唯一对我有用的是 iconv("CP850", "UTF-8//TRANSLIT", $var); 我对 SQL_Latin1_General_CP1_CI_AI 也有同样的问题，也许它也适用于 SQL_Latin1_General_CP1_CI_AS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-17T23:19:49.377

你可以这样尝试：

```
header("Content-Type: text/html; charset=utf-8");
$dbhost   = "hostname";
$db       = "database";
$query = "SELECT *
    FROM Estado
    ORDER BY Nome";
$conn = new PDO( "sqlsrv:server=$dbhost ; Database = $db", "", "" );
$stmt = $conn->prepare( $query, array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL, PDO::SQLSRV_ATTR_CURSOR_SCROLL_TYPE => PDO::SQLSRV_CURSOR_BUFFERED, PDO::SQLSRV_ENCODING_SYSTEM) );
$stmt->execute();
while ( $row = $stmt->fetch( PDO::FETCH_ASSOC ) )
{
// CP1252 == code page Latin1
print iconv("CP1252", "ISO-8859-1", "$row[Nome] <br>");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-26T15:19:04.680

不需要疯狂的东西。排序规则`SQL_Latin1_General_CP1_CI_AS`字符编码为：`Windows-1252`

这对我来说很完美：`$str = mb_convert_encoding($str, 'UTF-8', 'Windows-1252');`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T19:13:56.517

对我来说，以上都不是直接的解决方案——尽管我确实使用了上述解决方案的一部分。这对我使用越南字母表很有用。如果您遇到这篇文章并且以上方法都不适合您，请尝试：

```
 $req = "SELECT CAST(MY_COLUMN as VARBINARY(MAX)) as MY_COLUMN FROM MY_TABLE"; 
    $stmt = $conn->prepare($req);
    $stmt->execute();
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $str = pack("H*",$row['MY_COLUMN']);
        $str = mb_convert_encoding($z, 'HTML-ENTITIES','UCS-2LE');
        print_r($str);
    } 
```

还有一点好处——我必须对这些数据进行 json_encode 并且（duh）获取 html 代码而不是特殊字符。在使用 json_encode 发送之前，只需在字符串上使用 html_entity_decode() 即可修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T14:34:40.013

默认情况下，`PDO`用于`PDO::SQLSRV_ENCODING_UTF8`发送/接收数据。

如果您当前的整理是`LATIN1`，您是否尝试过指定`PDO::SQLSRV_ENCODING_SYSTEM`让`PDO`您知道您想使用当前系统编码而不是`UTF-8`？

您甚至可以使用`PDO::SQLSRV_ENCODING_BINARY`which 返回二进制形式的数据（传输数据时不进行编码或翻译）。这样，您就可以处理自己的字符编码。

更多文档在这里：[http ://ca3.php.net/manual/en/ref.pdo-sqlsrv.php](http://ca3.php.net/manual/en/ref.pdo-sqlsrv.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-12T04:59:09.177

感谢@SGr 的回答。
我找到了一种更好的方法：

`SELECT CAST(CAST(MY_COLUMN AS VARBINARY(MAX)) AS VARCHAR(MAX)) as MY_COLUMN FROM MY_TABLE;`
并尝试：
`SELECT CAST(MY_COLUMN AS VARBINARY(MAX)) as MY_COLUMN FROM MY_TABLE;`

在 PHP 中，您应该将其转换为 UTF-8 ：

`$string = iconv('UCS-2LE', 'UTF-8', $row['MY_COLUMN']);`

# actionscript-3 - 对单个容器内的多个对象应用转换

> ID：10124932
> 
> 赞同：1
> 
> 时间：2012-04-12T13:49:07.367
> 
> 标签：actionscript-3

我正在使用 flash builder 开发一个画板应用程序。用户可以绘制一些形状对象（椭圆、圆形、矩形）。我想在我的应用程序中实现一些类似 ms-word 的分组/取消分组功能。我通过将多个对象放在一个容器（UIComponent）中来对它们进行分组。现在我将调整大小应用到容器并且它调整得很好。我正在使用免费的对象处理程序 API 在容器上应用选择句柄。我想根据容器更改的大小调整所有子项的大小并重新定位。一切都很顺利，直到容器内的所有孩子的旋转 = 0。但是如果有任何孩子的旋转 > 0 和 <0 事情会变得更糟。孩子调整大小但不是以适当的方式。我拉伸父容器宽度并增加旋转子容器的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:51:35.477

您使用的是 Flash 专业版吗？以我的经验，将对象放置在符号中是最好的方法，这对我来说是最容易实现的。

1.  选择要链接在一起的所有对象（也可以包括现有符号）
2.  右键单击并选择“创建符号”
3.  将符号命名为您想要的名称，然后单击确定

然后，您可以自由变换该符号的任何实例，从而保留其中对象之间的关系（包括旋转）。

# java - java - 如何强制事件侦听器在java中最后执行？

> ID：10124934
> 
> 赞同：3
> 
> 时间：2012-04-12T13:49:11.250
> 
> 标签：java, swing, events

我有一个 JTextPane，它有一个 DocumentListener 等待对基础 HTML 文档的更改。当内容发生变化时，事件使用 JTextPane.scrollToReference 将视图移动到某个参考锚点。问题是 JTextPane 中的底层视图也在监听文档更改，并且直到我的监听器执行后才会更新，这会导致异常。有什么方法可以强制我的 DocumentListener 在该特定事件的任何其他事件侦听器之后执行？或者有什么方法可以在执行我的代码之前等待视图更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:52:08.850

首先尝试将 SwingUtilities.invokeLater() 用于必须作为最后执行的侦听器。如果这不起作用，请建立自己的优先级队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:51:19.637

*   Document 是 JTextComponents 的模型，然后把两个或多个 Listeners 写到 Document 的更改不是一个好主意，

*   如果模型向视图调用所有已实现的事件，则所有事件都应该完成，那么只有当所有事件都在视图中完成时，才可以使用 JViewport 移动

*   不知道你实现了什么侦听器，但是 DocumentListener（例如）和 FocusListener（ei）可以创建无限循环，但 RepaintManager 有很好的例外

*   删除产生异常的监听器，如果确实需要添加监听器，立即删除使用的监听器，

*   Swing 完全没有保证 Listeners 的顺序，也没有来自 model_to_view 之间的 multiplayed Listeners 的事件，反之亦然

*   您可以通过从 Swing Action（从 Swing Timer 延迟）推送所需事件或通过 Thread.sleep(int) 推送异步侦听器（冻结）来测试侦听器是否随后或逐渐触发事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T12:35:55.463

我最终不得不扩展 Viewport 和 JScrollPane 类来实现这一点。我为视口的更改事件公开了一个侦听器，并在其中添加了我的逻辑（确保它是渲染链中执行的最后一个代码）。

# iphone - 访问 iOS 设备 SSL 证书

> ID：10124937
> 
> 赞同：1
> 
> 时间：2012-04-12T13:49:15.390
> 
> 标签：iphone, ios, xcode, ssl, certificate

我们正在开发一个 iPhone 应用程序，我们有一个客户想要使用他们自己的 SSL 证书包。据我所知，这是不可能的，因为应用程序无法访问设备证书（假设客户端只是在他们的每个设备上安装自己的包）。另一种选择是为他们提交一个完全不同的应用程序，但这不是一个好的解决方案，我试图避免这种情况。

有没有人遇到过这类问题？我试图用谷歌搜索，但找不到任何东西。

任何帮助或方向将不胜感激！

# php - 在加载之前获取图像高度

> ID：10124939
> 
> 赞同：1
> 
> 时间：2012-04-12T13:49:16.490
> 
> 标签：php, html, css

所以这是我的问题，我知道图像的宽度，但我不知道高度，而且我正在使用预加载器，我的问题是当图像加载时......图像下的内容会向下反弹...当它完全加载时，如果我有固定的图像宽度和高度，这将很容易解决，只需使用宽度和高度属性设置它们，它看起来就可以了。

但是有没有办法在页面呈现之前设置高度，也许使用 PHP 左右。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T13:50:52.653

您可以在服务器端使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php)和 php 来获取图像高度并将该数据正确添加到 html。如果您有太多图像并且您不想在每次页面加载时都浏览它们，那么请考虑将此数据缓存在数据库中的某个位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:55:12.217

好吧，你可以通过 imagesx 和 imagesy 获得高度和宽度，然后打印出来。

```
<?php
$img = 'image.jpg';
$image = imagecreatefromjpeg($img);
$width  = imagesx($image);
$height = imagesy($image);
print '<img src="'.$img.'" height="'.$height.'" width="'.$width.'" alt="" />';
?> 
```

# android - 需要帮助在 Android 上制作 GPS 跟踪应用程序

> ID：10124941
> 
> 赞同：0
> 
> 时间：2012-04-12T13:49:19.847
> 
> 标签：android, gps, tracking

在问之前我已经搜索了很多，但我无法弄清楚。我正在为跑步者和骑自行车者在 Android 上制作一个 GPS 跟踪应用程序，例如 KeepRunning。

我尝试使用 open-gpstracker ：[http://code.google.com/p/open-gpstracker/source/checkout](http://code.google.com/p/open-gpstracker/source/checkout)这正是我想要的 GPS。但我无法让它运行，我总是会出错，因为我无法导入 httpmime 等……你对此有什么想法吗？

我也尝试自己做，但从未调用过 OnLocationChanged。（也许是因为模拟器？我使用 DDMS 菜单更改位置，点移动但未加载功能）知道吗？我试图“混合”这两个答案：[创建一个 Android GPS 跟踪应用程序](https://stackoverflow.com/questions/5096192/help-creating-an-android-gps-tracking-application)并[在谷歌地图上绘制一条线/路径，](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps)但现在无法做到。

我还检查了 myTracks 这似乎是最好的，但它现在对我来说太复杂了......

我刚开始在 Android 上编码，我对所有这些东西还不是很舒服，所以提前感谢您抽出时间阅读和回答:)

西尔万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:39:06.670

您需要下载以下 .jar 文件并将其导入 httpmime [http://www.java2s.com/Code/Jar/h/Downloadhttpmime412jar.htm](http://www.java2s.com/Code/Jar/h/Downloadhttpmime412jar.htm)的项目中。希望这会有所帮助。

# c++ - 模板格式化下的结构const错误

> ID：10124944
> 
> 赞同：0
> 
> 时间：2012-04-12T13:49:51.817
> 
> 标签：c++, templates

闲置的代码告诉我构造函数的 o.days 和 days 无法解决，有人知道为什么吗？

```
template <class T> struct Array{
    int days;
    T * M;
}; 
```

类的构造函数：

```
void constr(Array<Expe> &o){
        o=new Array;
        o->days = days;
        o->M = new Array[o->days];
} 
```

编辑（卢奇安·格里高尔）：

```
template <class T> struct Array{
int days;
T * M;
Array( int size ) : days(size), M(new int[size])
{
}
~Array()
{
   delete[] M;
}
}; 
```

当我尝试像这样在 main 中初始化一个数组时：

```
int main(){
//Main function of the program. no pre/ post condition.
Array <Expe> A; 
```

错误：

`enter code here`..\M.cpp:18:15: 错误: 没有匹配函数调用'Array::Array()'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:51:51.497

`Array<Expe> &o`是对`Array<Expe>`对象的引用，而不是指针。如果你**必须**重新初始化它，语法是。

```
o = Array<Expe>(); 
```

您可以通过以下方式访问成员`.`：

```
o.days = days;
o.M = new Array[o.days]; 
```

编辑：

我记得昨天的相同代码。你为什么再次使用正确的构造函数？

```
template <class T> struct Array{
    int days;
    T * M;
    Array( int size ) : days(size), M(new int[size])
    {
    }
    ~Array()
    {
       delete[] M;
    }
}; 
```

# c# - 如何使用 DataSet 中的 xsd 捕获 xml 验证中缺少的元素

> ID：10124946
> 
> 赞同：0
> 
> 时间：2012-04-12T13:49:59.423
> 
> 标签：c#, xml, dataset

好的，所以我正在尝试针对代表我的项目属性的 DataSet 验证 xml。架构添加是这样完成的：

```
dataSet d = new dataSet();
schema.add("http://tempuri.org/settings.xsd", XmlReader.Create(new StringReader(d.GetXmlSchema()))); 
```

假设我的数据集有两列“路径”和“版本”。然后，如果我尝试验证 xml：

```
<settings>
  <paht>c:\</path>
</settings> 
```

这将很好地验证。而且我不希望它...我不想收到错误，因为没有“版本”条目。所以我查看了我从 d.GetXmlSchema() 得到的东西，它看起来像一个 xsd。所有条目都包含一个属性：`minOccurs="0"`

我猜我`="1"`不希望这样，但是如何为 DataSet 设置这样的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:48:15.840

好的，所以这解决了问题，但这不是一个很好的解决方案......

所以我们需要的是`"minOccurs="1"`，但我们所拥有的是`...="0"`，我们只需对从 xml 和 tada 获得的字符串进行替换！

```
dataSet d = new dataSet();
schema.add("http://tempuri.org/settings.xsd", XmlReader.Create(new StringReader(d.GetXmlSchema().replace("minOccurs=\"0\"", "minOccurs=\"1\"")))); 
```

正如我所说，不是很好，如果您有更好的建议，请随时添加。

# sql - Oracle sql查询，一行匹配另一个表中的多个

> ID：10124949
> 
> 赞同：-4
> 
> 时间：2012-04-12T13:50:02.480
> 
> 标签：sql, oracle

我需要一些帮助才能在 Oracle 上创建 sql 查询。

我正在寻找与此线程中所示完全相同的事情

[将一行连接到另一个表中的多行](https://stackoverflow.com/questions/2892816/join-one-row-to-multiple-rows-in-another-table)

这个线程是在 MySql 中完成的，而我需要用 Oracle 来完成。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:57:48.547

这是一种不好的提问方式，但我认为这是你所需要的。

在 11gr2 之后，您可以使用`LISTAGG`, 记录[在这里](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)。

对于较低版本，请使用`wm_concat`但未记录在案。这两种情况在网上都有很多例子，因为你没有提供足够的信息我不能给你一个例子。只需亲自查看并满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:02:22.123

```
SELECT x.name,
      wmsys.wm_concat (y.property)
 FROM PEOPLE x
LEFT JOIN PROPERTIES y ON y.name = x.name
WHERE x.age > 26
GROUP BY x.name 
```

# entity-framework - 实体框架使用复合键插入行

> ID：10124952
> 
> 赞同：1
> 
> 时间：2012-04-12T13:50:09.987
> 
> 标签：entity-framework, composite, savechanges

我正在使用 Entity Framework 4.3.1 并尝试将新记录插入到我的`ProductVersion`实体所基于的表中。

该`ProductVersion`实体具有 2 个属性，它们构成名为`ProductId`和的表的复合主键`ProductOrdinal`。

每当有人更新产品条目时，我都会创建一个`ProductVersion`实体并将其传递回我的存储库，增加`ProductOrdinal`属性，并尝试将实体添加到上下文并保存它。

我不断收到以下错误：

> 属性“ProductOrdinal”是对象的关键信息的一部分，不能修改。

构成键的列都不是自动编号的，我在我的 POCO 中注释了以下属性：

```
[Key, Column("PROD_Ordinal", Order=2), DatabaseGenerated(DatabaseGeneratedOption.None)]
public long ProductOrdinal { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:06:06.740

Marc_S 在他的评论中完全正确地解释了为什么这不起作用。

从异常和您的描述看来，您正在增加现有 'ProductVersion' 实例上的 'ProductOrdinal' 属性并尝试保存它。您可能想要做的是从现有实例创建一个新的“ProductVersion”实例，并增加“ProductOrdinal”属性并保存新实例。

# jquery - 带有jquery mobile multipage的全局变量

> ID：10124953
> 
> 赞同：0
> 
> 时间：2012-04-12T13:50:11.293
> 
> 标签：jquery, jquery-mobile, global-variables, multipage

我有一个带有 jquery mobile 的多页设计。在第一个站点上，我使用 onklick() 调用一个函数来用值填充全局数组。现在我想在第二个站点上显示这些值，但我无法用 document.write(array) 显示它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:22:21.727

要将数据附加到 DOM，您首先需要选择一个元素将其附加到，然后在您的情况下遍历数组，将每个索引的值添加到 DOM：

```
//here is the array of values
var myArr = [...];

//wait for out page to initialize
$(document).delegate('#my-page-id', 'pageinit', function () {

    //create an array to buffer the output
    var output = [];

    //use a fast loop to add the value at each index to an array,
    //in this case I'm adding some HTMl markup to it as well
    for (var i = 0, len = myArr.length; i < len; i++) {
        output.push('<li>' + myArr[i] + '</li>');
    }

    //check to see if there were any indexes in the array
    if (output.length) {

        //append a list-view widget with the info from myArr to the content section of the current page
        $(this).children('.ui-content').append('<ul data-role="listview">' + output.join('') + '</ul>').trigger('create');
    }
}); 
```

文档`document.write`：[https ://developer.mozilla.org/en/document.write](https://developer.mozilla.org/en/document.write)

这是一个 JSPerf 来显示一些循环之间的性能差异：http: [//jsperf.com/jquery-each-vs-for-loops/2](http://jsperf.com/jquery-each-vs-for-loops/2)

# java - android.os.NetworkOnMainThreadException 问题

> ID：10124955
> 
> 赞同：0
> 
> 时间：2012-04-12T13:50:12.747
> 
> 标签：java, android, sockets

我想在我的 Android 应用程序中打开一个 Socket，它从服务器读取文件。

我的服务器与模拟器在同一台计算机上运行，​​并且我已经在 Android 之外对其进行了测试，以确保我没有防火墙问题或其他连接问题。

下面是我有问题的代码。它将打印 IP 地址，后跟*streamm000*。此时它抛出一个`android.os.NetworkOnMainThreadException`.

此外，另一个`toast`给了我`NULL`。

这是我的代码...

```
 toast("IP="+getIP());

    try {
        toast("created stream00000");
        so=new Socket("10.50.1.25", 80);
        toast("created stream111111");
        oos=new ObjectOutputStream(so.getOutputStream());
        toast("created stream2222");
        dos=new DataOutputStream(so.getOutputStream());
        //oos.close();
        toast("created stream33333");
    }
    catch(Exception e){
        toast(e.getCause() +"problem with this bla bla is opensteam");
        toast(e.getMessage()+"problem with this bla bla is opensteam");
        Log.v(e+"problem ","with this bla bla is opensteam");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:55:37.817

您的代码能够回答您的问题没有多大意义。但看起来您正在主 UI 线程上执行网络操作。这在较新的 API 级别中是不允许的。当您尝试执行此操作时，它将引发此异常。

您将需要生成一个不同的线程，并在那里进行网络操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:54:45.333

被`NetworkOnMainThreadException`抛出是因为在 Honeycomb 及更高版本中，您被迫在与主显示分开的线程上执行网络操作`Thread`。

请参阅此处的描述... [http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

因此，我的建议是将您的代码移动到一个新`Runnable`类中，然后创建一个`Thread`来执行它。

# javascript - 使用 json 的 javascript 和 asp.net

> ID：10124956
> 
> 赞同：0
> 
> 时间：2012-04-12T13:50:13.983
> 
> 标签：javascript, asp.net

我对 asp.net 和 javascript post and get 有疑问，我知道如何从连接到数据库的 asp.net 中的下拉列表中获取值，但是如何将内容发送到 asp.net 和 asp.net 将其发送回来。 ..

```
<div id="map" style="width: 500px; height: 500px">
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:RFIDConnectionString %>" 
            SelectCommand="SELECT neighborhood_name FROM [Neighborhood]"></asp:SqlDataSource>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:RFIDConnectionString %>" 
            SelectCommand="SELECT street_name FROM [Street]"></asp:SqlDataSource>
         <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:RFIDConnectionString %>" 
            SelectCommand="select * from Street,neighborhood where Street_status='high' and street.neighborhood_id=neighborhood.neighborhood_id"></asp:SqlDataSource>
         <asp:SqlDataSource ID="SqlDataSource4" runat="server" 
            ConnectionString="<%$ ConnectionStrings:RFIDConnectionString %>" 
            SelectCommand="SELECT neighborhood_name FROM [Neighborhood]"></asp:SqlDataSource>

                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:40:09.953

最好使用 AJAX 请求。从javascript调用asp.net函数也取决于浏览器，IE使用`ActiveXObject`而Mozilla家族使用`XMLHttpRequest`，你必须编写跨浏览器兼容的代码所以我建议你使用jquery，这样你就不用编写跨浏览器兼容的代码而是回答你的问题，这是我使用的：

## Javascript：

**向asp.net发送数据：**

```
function CallAjax(actionUrl, postData, callbackFunc) {
    xmlHttp = GetXmlHttpObject(callbackFunc);
    xmlHttp.open("POST", actionUrl, true);
    xmlHttp.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    xmlHttp.send(postData);

}

function GetXmlHttpObject(handler) {
    var objXmlHttp = null;
    if (navigator.userAgent.indexOf("MSIE") >= 0) {
        var strName = "Msxml2.XMLHTTP";
        if (navigator.appVersion.indexOf("MSIE 5.5") >= 0) {
            strName = "Microsoft.XMLHTTP";
        }
        try {
            objXmlHttp = new ActiveXObject(strName);
            objXmlHttp.onreadystatechange = handler;
            return objXmlHttp;
        }
        catch (e) {
            alert("Error. Scripting for ActiveX might be disabled");
            return;
        }
    }
    if (navigator.userAgent.indexOf("Mozilla") >= 0) {
        objXmlHttp = new XMLHttpRequest();
        objXmlHttp.onload = handler;
        objXmlHttp.onerror = handler;
        return objXmlHttp;
    }
} 
```

JS函数的示例用法：

```
var catCode = "001";
// GetSubcategories is the name of asp.net WebMethod present at Default.aspx page
// SubCategoryResponse is the name of JS callback function that will receive data from server
CallAjax("Default.aspx/GetSubcategories", catCode, SubCategoryResponse); 
```

**从 asp.net 接收数据：**

```
function SubCategoryResponse() {
    if (xmlHttp.readyState == 4 || xmlHttp.readyState == "complete") {
        var resp = xmlHttp.responseText;
    }
} 
```

## ASP.NET：

```
Imports System.Web.Services
Imports System.Web.Script.Serialization

<WebMethod()> _
Public Shared Function GetSubcategories(ByVal catCode As String) As String
    Dim json As New JavaScriptSerializer()
    // Get subcategories into subcateg list
    Dim subcateg As IList(Of String())

    Return json.Serialize(subcateg)
End Function 
```

`System.Web.Extensions`在您的标记中注册。

**标记 - Default.aspx：**

```
<%@ Register Assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Namespace="System.Web.UI" TagPrefix="asp" %> 
```

## 网络配置：

您可能必须在 web.config 中设置正确的 httpHandlers 和 httpModules 才能成功进行 AJAX 请求/响应。请参阅[配置 ASP.NET AJAX](http://www.asp.net/AJAX/documentation/live/ConfiguringASPNETAJAX.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:54:18.537

如果我正确理解您的问题，您所说的是将您的 sql 数据源数据绑定到下拉列表控件。

编辑-您的问题是如何从 javascript 进行 asp.net 回发。

对于 asp.net（不是 asp.net ajax），您需要调用

```
__doPostBack((eventTarget, eventArgument); 
```

其中 eventTarget 是您正在执行回发的控件的名称，而 eventArgument 是附加信息 - 您可能需要根据控件应该执行的操作等来填充它。

# ruby-on-rails-3 - 如何加入并显示 first_name 和 last_name？

> ID：10124959
> 
> 赞同：0
> 
> 时间：2012-04-12T13:50:23.543
> 
> 标签：ruby-on-rails-3, methods, refactoring, devise

我正在使用带有 rails 3.2.1 的 devise 和 cancan，我遇到了一个不寻常的问题，我知道可以重构和简化，但经过大量搜索后，我被卡住了。

我在用户模型中有 first_name 和 last_name 字段，并使用以下代码在 users/show.html.erb 视图中成功显示了用户的全名：

```
<%= @user.first_name + " " + @user.last_name %> 
```

我成功地在标题中显示了指向用户显示页面的链接，使用：

```
<% if user_signed_in? %>
  <li><%= link_to @user.first_name + " " + @user.last_name, current_user %></li>
<% end %> 
```

但是，我无法弄清楚这一点，在处理应用程序的另一部分之后，标题开始给我一个未定义的方法错误消息......

无论如何，我知道有一种更好的方法来定义和使用用户名，我已经尝试了一些方法，例如向用户模型添加名称方法，但正如你从这篇文章中可以清楚地看出的那样，我是一个初学者并且无法完成这项工作。

如果您对如何在这样的应用程序中最好地使用用户名有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:20:43.300

你在哪里定义`@user`？我敢打赌它在您的 UsersController 显示操作中，这意味着它仅在该操作中为您的标题定义。

尝试用以下代码替换您的标头代码：

```
<% if user_signed_in? %>
  <li><%= link_to current_user.first_name + " " + current_user.last_name, current_user %></li>
<% end %> 
```

诀窍是当用户登录时，Devise`current_user`始终可用。您不必担心设置`@user`实例变量。

# amazon-ec2 - 将 memcached 和 beanstalk 绑定到 EC2 实例上的外部 IP

> ID：10124963
> 
> 赞同：3
> 
> 时间：2012-04-12T13:50:29.243
> 
> 标签：amazon-ec2, memcached

我有一个正在运行的 EC2 服务器，它有一个弹性 IP 地址，它愉快地运行 memcached 和 beanstalkd，分别在端口 11211 和 11300 监听外部 IP。我拿了服务器的 AMI 来升级大小，当服务器重新启动时，memcached 和 beanstalkd 都没有运行。memcached 很麻烦，因为这是要重新启动的 init.d，但 beanstalkd 是从命令行作为守护进程运行的。

但是，几个小时后，我似乎无法弄清楚如何让它们重新启动并运行。

对于 memcached，配置文件读取：

```
# Default connection port is 11211
-p 11211

# Specify which IP address to listen on. The default is to listen on all IP addresses
-l <EXTERNAL IP ADDRESS> 
```

当我尝试从命令行以 root 身份运行 memcached 时：

```
memcached -d -m 1024 -u root -l <EXTERNAL IP ADDRESS> -v -p 11211 
```

我得到：

```
bind(): Cannot assign requested address
failed to listen on TCP port 11211: Cannot assign requested address 
```

然而，当我查看 netstat 时，已经没有任何东西绑定到该端口：

```
netstat -ant | grep LIST
tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:23              0.0.0.0:*               LISTEN     
tcp6       0      0 :::22                   :::*                    LISTEN 
```

如果我 grep 进程列表，则没有其他 memcached 正在运行。

iptables 报告如下：

```
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere            tcp spt:11300 state ESTABLISHED 
ACCEPT     tcp  --  anywhere             anywhere            tcp spt:11211 state ESTABLISHED 

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

EC2 实例使用与原始服务器相同的安全组，因此所需的端口是开放的。

最后，也许一个提示是 ifconfig IP 地址与弹性 IP 地址不同。如果我尝试在 inet 上监听添加： Bcast：memcached 服务运行并绑定但是我似乎无法通过弹性 IP 访问 memcached。

我一定是在做一些对你来说愚蠢而明显的事情。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T14:46:58.733

绑定到应该公开的 0.0.0.0。

# python - ReportLab - 不写已经循环和存储的记录

> ID：10124964
> 
> 赞同：-1
> 
> 时间：2012-04-12T13:50:32.433
> 
> 标签：python, reportlab

[我昨天发布](https://stackoverflow.com/questions/10108467/reportlab-error-when-creating-a-table)的这个问题的后续

我能够遍历我的所有记录，并将它写入一个名为 data 的变量，然后将其附加到另一个名为 parts 的变量上，当我在 part 变量上放置手表时，我可以看到正确的数据，但是当它尝试构建pdf ...

```
doc.build(parts) 
```

我收到以下错误

```
AttributeError: 'list' object has no attribute 'getKeepWithNext' 
```

这是完整的代码

```
import os, arcgisscripting, datetime,  string

from reportlab.lib.pagesizes import A4
from reportlab.platypus import *
from reportlab.lib import colors
from reportlab.lib.styles import ParagraphStyle

myWorkspace = r"W:\HeartOfTheCity.gdb"
myReportFolder = r"W:\Reports"
OpenPDF = "true"

gp = arcgisscripting.create(9.3)

#setup geoprocessor
gp.workspace = myWorkspace
gp.toolbox = "analysis"
gp.OverwriteOutput = 1
mySelectedGroupsFC = myWorkspace + os.sep + "SelectedGroups"
myNewBusinessFC = myWorkspace + os.sep + "New_Businesses"
myBufferFC = myWorkspace + os.sep + "Buffer"
myReportTable = myWorkspace + os.sep + "FINAL_TABLE"

#obtain Selected groups
mySelGroupsCursor = gp.searchcursor(mySelectedGroupsFC)
mySelectedGroups = mySelGroupsCursor.next()

#obtain New Business groups
myNewBusinessCursor = gp.searchcursor(myNewBusinessFC)
myNewBusiness = myNewBusinessCursor.next()

#obtain Buffer
myBufferCursor = gp.searchcursor(myBufferFC)
myBuffer = myBufferCursor.next()

#setup PDF doc
pdf_file_name = myNewBusiness.Postcode
pdf_file = myReportFolder + os.sep + pdf_file_name + ".pdf"

doc = SimpleDocTemplate(pdf_file, pagesize=A4)

#array of report elements
parts = []

#
#HEADER
#
parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=12, alignment=1, spaceAfter=20)
p = Paragraph('<b><u>Heart of the City Search Report</u></b>', parstyle)
parts.append(p)

p = Paragraph('The following community groups are located within <b><u>' + myBuffer.Buffer + ' metres  of -  <b><u>' + myNewBusiness.Postcode + '<\b><\u>.',parstyle)
parts.append(p)

#Enter while loop for each buffer feature
#while myBuffer:
while myBuffer:
    print myBuffer.Buffer
    parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0, spaceAfter=15, spaceBefore =15)
    p = Paragraph('<b><u>Community groups within ' + myBuffer.Buffer + ' metres of ' + myNewBusiness.Postcode  + '</u><\b><br>', parstyle)
    parts.append(p)

    data = []
    parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0)

    while mySelectedGroups:
        selectedGroups_desc = 'Community ID:'+ '<i>' + mySelectedGroups.Community_ID + '<\i>'+ 'Organisation Name :' + mySelectedGroups.Organisation_Name + '<br>'
        p = Paragraph(selectedGroups_desc, parstyle)
        data.append(p)
        #print data

        mySelectedGroups = mySelGroupsCursor.next()    
    parts.append(data)
    print parts
    #print parts

    myBuffer = myBufferCursor.next()

#
#FOOTER
#
parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0, spaceAfter=15, spaceBefore=15)
p = Paragraph('''Should you have any further questions **''', parstyle)
parts.append(p)

doc.build(parts)

del mySelGroupsCursor, myNewBusinessCursor, myBufferCursor

#Open document
if OpenPDF == "true":
    os.startfile(pdf_file) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:43:45.470

自从我使用 ReportLab 以来已经有一段时间了，所以我可能会在这方面有所偏离。但是，我认为*零件*中的所有项目都需要属于 Flowable 类。在这里，您将列表附加到部件：

```
data = []
parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0)

while mySelectedGroups:
    selectedGroups_desc = 'Community ID:'+ '<i>' + mySelectedGroups.Community_ID + '<\i>'+ 'Organisation Name :' + mySelectedGroups.Organisation_Name + '<br>'
    p = Paragraph(selectedGroups_desc, parstyle)
    data.append(p)
    #print data

    mySelectedGroups = mySelGroupsCursor.next()    
parts.append(data) 
```

我不认为这是有效的。部分中的所有内容都应该是Flowable。也许您正在尝试制作一个列表，在这种情况下您需要一个 ListFlowable。

以下是文档[http://www.reportlab.com/docs/reportlab-userguide.pdf](http://www.reportlab.com/docs/reportlab-userguide.pdf)第 9.10 节中的示例：

```
from reportlab.platypus import ListFlowable, ListItem
from reportlab.lib.styles import getSampleStyleSheet
styles = getSampleStyleSheet()
style = styles["Normal"]
t = ListFlowable(
[
Paragraph("Item no.1", style),
ListItem(Paragraph("Item no. 2", style),bulletColor="green",value=7),
ListFlowable(
                [
                Paragraph("sublist item 1", style),
                ListItem(Paragraph('sublist item 2', style),bulletColor='red',value='square')
                ],
                bulletType='bullet',
                start='square',
                ),
Paragraph("Item no.4", style),
],
bulletType='i'
) 
```

# jquery - 在 CKFinder 对话框中使用 jQuery

> ID：10124969
> 
> 赞同：0
> 
> 时间：2012-04-12T13:50:51.927
> 
> 标签：jquery, jcrop, ckfinder

是否存在在 CKFinder 2 对话框中使用 jQuery 和 jQuery 插件的方法？我只想使用 Jcrop 来用我的插件裁剪图像。例如下面的代码不起作用。`jQuery(document).ready(...)`事件触发良好，但在其中我无法选择对话框的任何元素。那么，有可能吗？

```
CKFinder.dialog.add("ImageCroppingDialog", function (api) {
return {
    title: "Test",
    minWidth: 480,
    minHeight: 750,
    onShow: function () {
        var file = api.getSelectedFile();
        var url = file.getUrl();
        var doc = this.getElement().getDocument();
        var img = doc.getById('cropbox');
        img.setAttribute('src', url);
        jQuery(document).ready(function () {
            jQuery('#cropbox').Jcrop();
        });
    },
    contents: [
            {
                id: 'tab1',
                label: '',
                title: '',
                expand: true,
                padding: 0,
                elements: [
                        {
                            type: 'html',
                            html: '<h3>Select area to crop.</h3><img id="cropbox" src="" style="max-width: 480px; max-height: 580px;"></img>'
                                    + '<script type="text/javascript" src="../Scripts/jquery-1.5.1.min.js"></script>'
                                    + '<script type="text/javascript" src="../Scripts/crop/jquery.jcrop.min.js"></script>'
                        }
                ]
            }
        ],
    buttons: [CKFinder.dialog.cancelButton, CKFinder.dialog.okButton]
};
});

CKFinder.addPlugin('ImageCropper', function (api) {

api.addFileContextMenuOption({ label: 'Crop image', command: "ImageCropper" }, function (api, file) {
    api.openDialog("ImageCroppingDialog");
    if (!file.isImage()) {
        api.openMsgDialog("Image cropping", "This feature is only available for editing images.");
        return;
    } //end check if isImage()
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:29:14.357

我注意到 CKFinder 使用的是 iFrame，混淆了 jquery 选择器。

你应该像这样尝试

```
$("#cropbox", $("iframe:first").contents()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:16:24.743

ckEditor有一个[插件版本，它集成了 jQuery。](http://ckeditor.com/blog/CKEditor_for_jQuery)如果你不能切换到那个版本，有[几种方法](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)可以将 jQuery 对象传递给 CKFinder 对象，其中最简单的方法是：

```
CKFinder.prototype.J = jQuery; 
```

# mysql - MySQL查询以使用逗号分隔值搜索所有记录

> ID：10124972
> 
> 赞同：4
> 
> 时间：2012-04-12T13:51:04.260
> 
> 标签：mysql

我有 2 个 sql 表 表名：**代理** 包含一个带有列 AgentID 的记录

表名为：**空缺**是显示数据 ans 的表。名为 vacancies 的表有 vacancies.Agents 包含与此类似的值

```
VacanyID    Company       position        CTC        Candidates        Agents
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
FBVAC001  | HDFC      |  Branch Manager | 4.5  | FBCAN001,FBCAN002| Agent3,Agent4
FBVAC003  | TBNH      |  Branch Manager | 4.5  | FBCAN004,FBCAN005| Agent2,Agent4
FBVAC005  | MMNT      |  Branch Manager | 4.5  | FBCAN008,FBCAN006| Agent3
FBVAC008  | LCFC      |  Branch Manager | 4.5  | FBCAN009,FBCAN023| Agent3,Agent4
FBVAC008  | KOTC      |  Branch Manager | 4.5  | FBCAN009,FBCAN023| Agent5,Agent4 
```

我想运行一个查询，该查询将只返回那些包含对应于表名代理的代理的值的记录。代理ID。这是迄今为止的查询，但它返回的只是那些在 vacancies.Agents 中没有多个值的记录

例如，如果要搜索的值是 Agent3，它应该返回 rows1,3 和 4，而不是只返回第 3 行。

```
SELECT
vacancies.VacancyID,
vacancies.Company,
vacancies.`Position`,
vacancies.CTC,
vacancies.Candidates,
vacancies.Agents
FROM vacancies
, agents
WHERE (FIND_IN_SET(vacancies.Agents,agents.AgentID) <> 0) 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:57:36.250

我相信你有你的参数在`FIND_IN_SET`. 套装应该排在第二位

```
FIND_IN_SET(agents.AgentID, vacancies.Agents) 
```

更多信息：[http ://www.bitbybit.dk/carsten/blog/?p=162](http://www.bitbybit.dk/carsten/blog/?p=162)

* * *

此外，如果您只想查看特定代理，则还需要对其进行过滤，否则您将获得代理和匹配空缺的所有可能组合（因此重复行）：

```
AND Agents.AgentID = 'Agent3' 
```

演示：[http ://www.sqlfiddle.com/#!2/b4dcb/3](http://www.sqlfiddle.com/#!2/b4dcb/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:17:57.053

```
SELECT
  vacancies.VacancyID,
  vacancies.Company,
  vacancies.`Position`,
  vacancies.CTC,
  vacancies.Candidates,
  vacancies.Agents
FROM vacancies,
  agents
WHERE (select
     agents.agentid,
     vacancies.agentid
   from agents
     left join vacancies
       on vacancies.agentid = agents.agentid)
and agents.agentid = 'Agent3' 
```

# android - 选项卡下的条带未绘制

> ID：10124973
> 
> 赞同：2
> 
> 时间：2012-04-12T13:51:04.587
> 
> 标签：android, tabs, strip

在我的**活动**中，我这样做是为了设置 TabHost：

```
//...     
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.getTabWidget().setDividerDrawable(R.drawable.my_divider_tab);
        mTabHost.getTabWidget().setStripEnabled(true);
        mTabHost.getTabWidget().setLeftStripDrawable(R.drawable.my_strip_tab);
        mTabHost.getTabWidget().setRightStripDrawable(R.drawable.my_strip_tab);
        setupTab(new TextView(this), getString(R.string.device_text_tab));
        setupTab(new TextView(this), getString(R.string.sensor_text_tab));
        setupTab(new TextView(this), getString(R.string.actuator_text_tab));
//...

private void setupTab(final View view, final String tag) {

    View tabview = createTabView(mTabHost.getContext(), tag);
        TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(new TabContentFactory() {
        public View createTabContent(String tag) {return view;}
    });
    mTabHost.addTab(setContent);
}

private static View createTabView(final Context context, final String text) {

    View view = LayoutInflater.from(context).inflate(R.layout.state_tabwidget, null);
    TextView tv = (TextView) view.findViewById(R.id.tabsText);
    tv.setText(text);
    return view;
} 
```

**my_strip_tab.xml**只是一个矩形：

```
<?xml version="1.0" encoding="utf-8"?>
<shape  
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <solid 
        android:color="#FFFFFF"/>

    <size 
        android:width="0dp"
        android:height="2dp"/>
</shape> 
```

绘制垂直分隔线。但是选项卡下的条带没有显示...

可能是什么问题呢？的大小`my_strip_tab`？

我刚刚发现：

```
/**
 * Controls whether the bottom strips on the tab indicators are drawn or
 * not.  The default is to draw them.  If the user specifies a custom
 * view for the tab indicators, then the TabHost class calls this method
 * to disable drawing of the bottom strips.
 * @param stripEnabled true if the bottom strips should be drawn.
 */ 
```

此处：[TabWidgetExample](http://www.devdaily.com/java/jwarehouse/android/core/java/android/widget/TabWidget.java.shtml)

因此，当我们对选项卡使用自定义视图时（就像我正在做的那样），条似乎会自动禁用......我该如何启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:50:06.857

你唯一需要做的就是移动这段代码

```
 mTabHost.getTabWidget().setStripEnabled(true);
    mTabHost.getTabWidget().setLeftStripDrawable(R.drawable.my_strip_tab);
    mTabHost.getTabWidget().setRightStripDrawable(R.drawable.my_strip_tab); 
```

毕竟你的 setupTab()

如果您查看 Google 文档，原因是当您为选项卡指示器使用自定义视图时，将自动调用 setStripEnabled(false)。您只需在设置所有自定义视图或选项卡指示器后再次重新启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T17:38:15.973

我发现解决此问题的唯一解决方案是：

```
//...
<TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <FrameLayout
        android:id="@android:id/tabcontent" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <View
            android:id="@+id/my_strip_tab"
            android:layout_width="fill_parent"
            android:layout_height="3dp" 
            android:background="@drawable/my_strip_tab"/>

//...

    </FrameLayout> 
```

**my_strip_tab.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape  
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <solid 
        android:color="#67E667"/>

</shape> 
```

# ruby - 使用 ruby mine 运行 bundle install 后仍然缺少宝石

> ID：10124975
> 
> 赞同：0
> 
> 时间：2012-04-12T13:51:09.673
> 
> 标签：ruby, rubymine

我用 ruby​​mine 开始了一个新的 Rails 应用程序项目。
之后 Rubymine 运行捆绑安装。

项目没有成功在
一个项目上运行 - 没有 mysql 定义，错误是
gemnotfound - 找不到 gem sqlite

在一个项目上 - 使用 mysql 定义错误是
gemnotfound - 找不到 gem mysql2

有人知道那些是什么吗？bundle install 不应该给我带来那些吗？如何使用 ruby​​mine 开始一个简单的 Rails 项目？有没有解决所有这些问题的好教程？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:28:46.910

RubyMine 可能无法自动安装这些 gem，因为它们依赖于您的系统上可能不可用的本机库。您还需要安装并运行[DevKit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)才能安装本机扩展。

我建议你阅读相关的帖子：

*   [无法安装 mysql2 gem](https://stackoverflow.com/questions/5841406/cannot-install-mysql2-gem)
*   [在 Windows 7 上安装 SQLite 3.6](https://stackoverflow.com/questions/1734629/installing-sqlite-3-6-on-windows-7)

你也可以`sqlite-ruby`改用，至于你需要的上述宝石`sqlite3.dll`，`libmysql.dll`在`PATH`.

谷歌是你的朋友，找到各种安装指南并不难。

# magento - 在 Magento 的 Shop By 框中更改文本

> ID：10124976
> 
> 赞同：0
> 
> 时间：2012-04-12T13:51:11.220
> 
> 标签：magento

我[在 Magento 的一个网站上](http://guardianbreeders.com/catalogsearch/result/?q=princess)工作，默认情况下，它将类别列为“类别”。但是，我希望将其更改为“品种”。

关于如何做到这一点的任何想法？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:30:19.843

在 app/design/frontend/default/THEME/template/catalog/layer/view.phtml 中，将第 47 行替换为：

```
<dt><?= $this->__($_filter->getName()) == 'Category' ? 'Breeds' : $this->__($_filter->getName()) ?></dt> 
```

# javascript - 元素：first-child强制重新评估

> ID：10124977
> 
> 赞同：2
> 
> 时间：2012-04-12T13:51:12.997
> 
> 标签：javascript, jquery, css

我有一`".hidden"`堂课，我实时构建 DOM 元素。所以我得到一个简单的代码，如：

```
...
    <div class="hidden">1</div>
    <div class="hidden">2</div>
    <div class="hidden">3</div>
... 
```

我的 CSS 定义不仅仅是简单的：

```
.hidden {
display: none;
}

.hidden:first-child {
display: block;
} 
```

一切都很好，每个人都很开心。现在，如果我执行以下操作：`$('.hidden:first-child').remove()`它会删除，但不会出现下一个元素。它似乎仅在我单击开发人员控制台中的 DOM 节点时出现（**在 chrome 中为 ctrl+shift+i**）。

任何想法如何强制浏览器评估 CSS 规则？

**更新** 这是一个[jsFiddle 测试用例](http://jsfiddle.net/B8Nj2/)。单击按钮后，您将看到“0”，没有其他数字，应该是“1”，然后是“2”，依此类推。

**结论：** 奇怪的是，但是如果我在 remove() 之前删除了 fadeOut(400) 它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:59:19.947

尝试使用 css 伪类 :first-of-type 而不是 :first-child

这是关于 jsFiddle 的一个工作示例：http: [//jsfiddle.net/jukDU/3/](http://jsfiddle.net/jukDU/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:56:45.753

我会先显示下一个项目，然后将其删除。

```
$('.hidden:first-child').next().show();
$('.hidden:first-child').remove(); 
```

# c# - 将数据绑定到 ListView

> ID：10124985
> 
> 赞同：2
> 
> 时间：2012-04-12T13:51:48.190
> 
> 标签：c#, wpf, xaml, data-binding

我是 DataBindings 的新手。我正在尝试将文件列表（更准确地说是 a `IEnumerable<FileInfo>`）绑定到`ListView`C#（Visual Studio 2010）中的 a 。这是我想要做的（我做了很多试验，这是最简单的发布）：

我的 XAML 是（其他地方没有定义资源/数据绑定）：

```
 <ListView
            Name="lvInvoices" Height="Auto" HorizontalAlignment="Center" VerticalAlignment="Stretch" 
            Width="Auto" MinWidth="150" MinHeight="100" Margin="10">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="#" Width="Auto"/>
                    <GridViewColumn Header="Fichero" Width="Auto" DisplayMemberBinding="{Binding Path=SourceFile}"/>
                    <GridViewColumn Header="Importe" Width="Auto"/>
                </GridView>
            </ListView.View>
        </ListView> 
```

我的“项目”课程是这样的。我知道我没有触发 PropertyChanged 事件，现在我只想填充列表。

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SPInvoiceLoader
{
  public class Invoice : System.ComponentModel.INotifyPropertyChanged
  {
    public Invoice()
    {
    }

    public Invoice(FileInfo srcFile)
    {
      this.SourceFile = srcFile;
    }
    public FileInfo SourceFile { get; private set; }
    public int SpId { get; set; }
    public Decimal Amount { get; set; }
    public string Nif { get; set; }
    public bool Signed { get; set; }

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;
  }
} 
```

设置 DataContext 的代码是：

```
 IEnumerable<FileInfo> pdfFiles = dir.EnumerateFiles("*.pdf");
    pdfFiles = pdfFiles.OrderBy(f => f.Name);
    ObservableCollection<Invoice> coll = new ObservableCollection<Invoice>();
    foreach (FileInfo pdfFile in pdfFiles)
    {
      coll.Add(new Invoice(pdfFile));
    }
    this.lvInvoices.DataContext = coll; 
```

我尝试将`pdfFiles`两者都设置为局部变量和实例成员，但无论哪种方式都不起作用。

效果是根本没有更新任何项目，列表继续为空。

有什么建议吗？我对此很陌生，所以不排除愚蠢的错误。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:07:22.633

一个快速的解决方案，可以更好（使用视图模型）......

你必须让你的 ObservableCollection 成为一个属性：

```
public ObservableCollection<Invoice> MyInvoices { get; set; } 
```

如果`Loaded`您的用户控件初始化您的集合：

```
this.MyInvoices = .... 
```

在同一事件中，将用户控件的 DataContext 设置为自身：

```
this.DataContext = this; 
```

现在在 XAML 中执行：

```
<ListView ItemsSource="{Binding MyInvoices}"></ListView> 
```

这样，当您向用户控件添加更多内容时，只需添加属性并准备好绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:57:30.867

您希望将 ObservableCollection 分配给 ListView 的 ItemsSource 属性，而不是分配给 DataContext。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:03:02.433

尝试将 ListView 上的 ItemsSource 设置为 {Binding} 以便它知道从其 DataContext 中获取其项目： ItemsSource="{Binding}"

# grep - 使用 grep 时，如何确保搜索字符串从行首开始（不包括空格）？

> ID：10124989
> 
> 赞同：0
> 
> 时间：2012-04-12T13:51:54.260
> 
> 标签：grep

我有以下 grep 查询

```
 $ grep -nr "ActiveChild\s*=" . 
```

这会找到 ActiveChild 的所有实例，后跟空格-

```
 ActiveChild = "ABC"
    ActiveChild = "PQR"
 ActiveChild = "XYZ" 
```

但是，它也给了我这样的结果

```
 If ActiveChild = "LMN" Then 
```

我想避免上述情况。我想确保“ActiveChild”是出现在我正在搜索的行上的第一个单词。前面是否有空格无关紧要。不幸的是，写类似

```
 grep -nr "\s*ActiveChild\s*=" . 
```

根本没有帮助。我该如何编写这样的查询？另外，“查询”是正确的词，还是在 grep 的上下文中使用的其他词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:00:14.767

```
kent$  cat test
 ActiveChild = "ABC"
    ActiveChild = "PQR"
 ActiveChild = "XYZ"
 If ActiveChild = "LMN" Then

kent$  grep -E '^\s*ActiveChild\s*=' test
 ActiveChild = "ABC"
    ActiveChild = "PQR"
 ActiveChild = "XYZ" 
```

# php - PDO PHP 未捕获的异常

> ID：10124994
> 
> 赞同：1
> 
> 时间：2012-04-12T13:52:06.760
> 
> 标签：php, pdo

我目前已切换到使用 PDO，但在处理异常时遇到了麻烦。连接是正确的，查询工作完美，但是当我故意犯错误时，错误并没有像我预期的那样处理。

我已将查询中的表名更改为不存在的表。从下面看到的代码中，我希望页面打印出“数据库错误”，而是得到可怕的橙色错误说......

'未捕获的异常'PDOException' 带有消息'SQLSTATE [42S02]：未找到基表或视图：1146 表'test.post' 不存在'在 C:\wamp\www\website\functions.php 第 46 行'

这是连接数据库时的代码...

```
$hostname = 'localhost';
$username = '';
$password = '';
try{
    $dbh = new PDO("mysql:host=$hostname;dbname=test", $username, $password);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
     print ("Database Error");
} 
```

我犯了错误还是有不同的方法来处理 PDO 错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:54:00.683

连接后，需要设置错误处理：

```
$dbh = new PDO("mysql:host=$hostname;dbname=test", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

**编辑：**请注意，异常在它被抛出的地方被捕获，所以你需要`try` `catch`在查询周围放置一个块，你在连接时使用的那个只捕获那里的异常（如果有的话，请参阅@Crontab 的评论）。

# checkbox - CQ5 复选框错误

> ID：10124996
> 
> 赞同：0
> 
> 时间：2012-04-12T13:52:09.250
> 
> 标签：checkbox, adobe, selection, aem

我希望它一次只能选择一个复选框，并且在选择时显示与选择关联的文本字段。至少有它，我一次只能选择一个复选框。我已经设置对话框在选择时运行选择时语句，但一次只想选择一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:09:04.733

您可以使用侦听器对用户操作做出反应，[例如：动态对话](http://dev.day.com/docs/en/cq/current/developing/widgets.html#Dynamic%20Dialogs)，但您可能希望使用收音机。

# apache - Htaccess 重定向或重写

> ID：10124997
> 
> 赞同：1
> 
> 时间：2012-04-12T13:52:12.357
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, rewrite

我正在使用预览 URL 测试站点，直到 DNS 传输过来。我正在预览该网站`http://IP_ADDRESS/~name/`。

我在 CMS 中上传的所有图像都以`<img src="/uploads/images/">`.

但这在我使用预览 URL 时不起作用。所以理想情况下我需要重定向`/uploads/*`到`/~name/uploads/*`

我想知道这是否应该是 htaccess 中的重定向或重写以及规则可能是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:08:52.713

这是您在 DOCUMENT_ROOT 下的 .htaccess 中需要的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^uploads/ ~name%{REQUEST_URI} [L,NC] 
```