# StackOverflow 问答 000881000-000881999

# iphone - 设备错误但模拟器中没有

> ID：881008
> 
> 赞同：2
> 
> 时间：2009-05-19T04:49:25.500
> 
> 标签：iphone, objective-c, cocoa-touch

我有这行代码（splits 是一个实例变量）：

```
splits = [[NSMutableArray alloc] initWithObjects:[NSMutableArray array]]; 
```

这段代码显然是错误的（它应该是零终止的），但是它在模拟器中运行良好，即使它`EXC_BAD_ACCESS`在设备上抛出了一个。我的问题是为什么模拟器不会抛出错误？

凯尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T05:22:38.327

实际结果取决于内存内容。模拟器上的内存布局很可能在第一个参数（匿名数组）的地址之后包含一个零。这个零被解释为好像您将关闭参数列表`nil`并且一切正常。（PS 在这种情况下调用[`NS_REQUIRES_NIL_TERMINATION`](http://www.google.com/search?q=NS_REQUIRES_NIL_TERMINATION)了一个有趣的宏，尽管它显然在这里没有帮助。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T05:22:26.797

iPhone的内存比你的电脑少得多。在被 initWithObjects 函数使用之前，堆栈的内存区域可能已设置为 0x00 (nil)。当参数被发送到 initWithObjects 函数并分配堆栈时，计算机上的内存空间比 iPhone 更可能预设为 0x00，因为相同的内存空间使用频率较低。因此，很可能正在从内存中已设置为 0 的位置读取 nil。

如果你在电脑上填满内存，然后运行模拟器，模拟器可能会像 iPhone 一样崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T05:21:03.023

缓冲区溢出会导致未定义的行为。不能保证它们会导致访问冲突（甚至是明显的错误）。在现代机器上，如果您碰巧踩到“别人的”内存，它们将导致访问冲突，但如果您只是从自己的堆栈中读取垃圾，则可能不会。

基本上，您只需要小心，并且可以尝试使用[Mudflap](http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging)和[Valgrind](http://valgrind.org/)之类的工具来帮助您（这两个特别适用于 C/C++，我不知道它们对 Obj-C 的适用程度如何）。

# matlab - 如何在matlab中求解具有双系数的符号方程？

> ID：881010
> 
> 赞同：2
> 
> 时间：2009-05-19T04:51:46.157
> 
> 标签：matlab, symbolic-math

我有二次方程 1/x = 1/(ax) + 1/(3*a -x)

我想在matlab中解决它：

```
solve('1/x=1/(a-x)+1/(3*a-x)', 'x')
ans =
 (4/3+1/3*7^(1/2))*a
 (4/3-1/3*7^(1/2))*a 
```

有没有办法用浮点系数求解方程？喜欢

```
ans = 
  2.215250437021530*a
  0.451416229645136*a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T04:57:04.097

[显然](http://forum.allaboutcircuits.com/showthread.php?t=8234)，`double(ans)`应该为您转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-20T15:51:29.777

我使用 eval() 从符号表达式中获得双重结果

# java - 如何读取套接字中的大量数据并写入套接字通道

> ID：881013
> 
> 赞同：0
> 
> 时间：2009-05-19T04:53:11.163
> 
> 标签：java, sockets, nio

如何使用 socket 的 DataInputStream 读取非常大的数据 如果数据是 String 格式并且长度超过 1,00,000 个字符。

另外如何在 java 中使用 SocketChannel 编写大数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T04:07:30.637

问题是您的数据是以块的形式到达的。数据包大小可能会受到限制，或者 DataInputStream 的内部缓冲区可能只有 40k。我不知道，但没关系。无论哪种方式，所有 1000000 个字节都不会立即到达。所以你必须重写你的程序来期待它。您需要读取收到的较小块并将它们存储在另一个 byte[1000000] 变量中（跟踪最后一个字节索引的位置）。继续循环，直到你读完套接字。然后你可以使用你的内部变量。

# wpf - 我想知道同一图像被添加到图像列表框中的次数

> ID：881027
> 
> 赞同：1
> 
> 时间：2009-05-19T05:00:36.187
> 
> 标签：wpf, image, c#-3.0, listbox

我有一个图像列表框。我想知道同一张图片被添加到那个 ListBox 的次数。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T06:11:55.633

如果您想检查图像本身，无论文件名如何，都不会重复，然后为图像数据生成一个 MD5 校验和并存储它。

如果您想确保两者始终链接，则要么将其标记到文件的末尾，要么创建一个将图像和校验和保存在一起的类。

MD5 检查可用于区分任何数据文件，甚至是同一文件的不同版本（如果内容不同）。

# asp.net - 如何选择下拉列表值，然后使用 PowerShell 和 IE 6.0 回发

> ID：881032
> 
> 赞同：2
> 
> 时间：2009-05-19T05:02:50.880
> 
> 标签：asp.net, unit-testing, internet-explorer, powershell

这将设置值，但不会导致回发：

```
function SelectValue($ddl, $val) {
    $ddl.options | % {$i = 0}{ if ($_.value -eq $val) { 
            $ddl.selectedIndex = $i; }; $i += 1; }

} 
```

此外，一旦我得到回发工作，我是否需要添加延迟，例如：

```
 while($ie.ReadyState -ne 4) {
        start-sleep -m 100
    } 
```

HTML 看起来像这样：

```
<select name="ddl" onchange="__doPostBack('ddl','')" language="javascript" id="ddl" class="required" style="width:100%;">
<option value="-- Please Select --">-- Please Select --</option>
<option value="Some Value">Some Value</option>
</select> 
```

**编辑：** 我为什么要在 Powershell 中执行此操作？可能 WatiN 会简单得多（尽管我从未使用过 WatiN）。但我只是想弄清楚如何使用 Powershell 进行快速、临时、有限的网站自动化。我经常旅行并使用不同的机器，而 Powershell 是我可以依赖的为数不多的常量之一。

**解决方案：** 事实证明这很简单，而且非常有用，因为现在我可以编写一个页面，进行一些选择，然后单击提交按钮，就像施了魔法一样，而且很简单。我认为我与 Powershell 的爱/恨关系正在转向爱。无论如何，关键是使用表单提交而不是使用 onchange 事件，众所周知，无论如何在使用 javascript 调用时都不会触发该事件。这是如何做到的：

```
$frm = $ie.document.getElementById("frm");
$frm.submit(); 
```

我发现我不必等待回发。为了完整起见，单击按钮就像在 javascript 中一样：

```
$btnReport = $ie.document.getElementById("btnReport")
$btnReport.click() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T19:52:28.517

> 为什么我要在 Powershell 中执行此操作？可能 WatiN 会简单得多（尽管我从未使用过 WatiN）。但我只是想弄清楚如何使用 Powershell 进行快速、临时、有限的网站自动化。

是的，您应该使用 WatiN，但您想使用 PowerShell？因此，请使用 PowerShell 中的 WatiN！

PowerShell 是一个通用的 shell/脚本/自动化工具。为了完成任务，PowerShell 使用了专门的工具（COM、WMI、.NET 等）。

这里有一些东西可以开始。

[http://poshcode.org/1108](http://poshcode.org/1108)

# c# - 在静态类中引发事件

> ID：881034
> 
> 赞同：8
> 
> 时间：2009-05-19T05:03:21.583
> 
> 标签：c#, events, class, static

我有一个带有绑定到数据表的数据网格的 Windows 窗体。单击按钮时，数据表将传递给静态类。

```
private void btnSave_ItemClick(object sender, EventArgs e)
{
   MyStaticClass.SaveData(DataTable dt);
}

internal static class MyStaticClass
{
    internal static void SaveData(DataTable dt)
    {
       foreach(DataRow dr in dt.rows)
       {
           // do something    
       }
    }
} 
```

我需要将状态信息从 SaveData 方法传回我的表单，以便通知用户记录是如何处理的。

例如 - 我想每 100 条记录发回一条消息 - “处理记录 #....”，以便它显示在表单上。

是否可以从静态类中引发事件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T05:14:13.543

是的，它是可能的，并且就像非静态类中的事件一样工作（当然，除了您需要将事件声明为 are `static`）。

请注意，尽管通过这种设计，您可以（至少在理论上）`SaveData`同时调用多个表单，因此该方法的一个实例引发针对表单 A 的事件，而另一个实例将引发针对表单 B 的事件。由于事件是静态的，所有事件都将被两种表单捕获，因此您可能希望在事件中包含信息，该表单可用于确定事件的特定调用是否感兴趣。

例如，您可以将一个自定义 EventArgs 类放在一起并将其传递`DataTable`，以便监听代码可以查看它是否是该表单中的 DataTable。如果是，则 UI 将被更新，如果不是，则可以简单地忽略该调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T05:07:19.380

是的，您可以从静态类中引发事件。将事件定义为静态。

```
public static event EventHandler MyEvent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T23:09:21.157

如果我错了，请有人纠正我！我认为，按照惯例，处理事件的委托应该用两个参数声明：

```
public delegate void SomethingHappenedEventHandler(object sender, EventArgs args); 
```

通常发送者对象是“this”，但在静态类中，没有“this”之类的东西:-(因此，我创建了一个空的虚拟发送者对象来发送事件，以保持它与所有其他事件处理程序。

```
//Events:
    public delegate void SomethingHappenedEventHandler(object sender, EventArgs args); //1\. Define a delegate
    public static event SomethingHappenedEventHandler SomethingHappened;                  //2\. Define an event based on that delegate
    private static void OnSomethingHappened()
    {
        Object sender = new Object();
        SomethingHappened?.Invoke(sender, EventArgs.Empty);                            //3\. raise the event 
```

但我只是一个初学者。所以，如果这完全是胡说八道，请告诉我为什么。

# screen-scraping - 如何从专有 CMS 迁移资源？

> ID：881035
> 
> 赞同：0
> 
> 时间：2009-05-19T05:03:21.677
> 
> 标签：screen-scraping, web-crawler

我需要从使用活动服务器页面的专有 CMS 迁移我们的网站。是否有工具或技术可以帮助从现有站点下载资源？我想我正在寻找一种可以抓取和抓取整个网站的工具。

另一个挑战是该站点使用 SSL 并受到基于表单的身份验证的保护。我有必要的凭据，我可以获取验证会话的 cookie，但我不确定从这里去哪里，如果现有工具可以帮助我，我不想重新发明轮子。

编辑 - 我正在使用 Windows 操作系统

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T05:14:44.667

wget 可能是您使用的好工具

```
wget --load-cookies cookies.txt --mirror --page-requisites http://example.com/ 
```

添加 --convert-links 如果您希望使其更适合本地存档，而不是您可以在某处重新上传的内容。

wget 的 Windows 版本可从 sourceforge.net [http://gnuwin32.sourceforge.net/packages/wget.htm上的 gnuwin32 项目获得](http://gnuwin32.sourceforge.net/packages/wget.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T05:09:16.527

```
wget --http-user:username --http-pass:password -r http://yoursite.com 
```

这将获取整个站点（递归）。如果你在 Windows 上，你会想要安装 cygwin 或类似的东西来使用它，尽管我相信你可以下载 wget 的 Windows 版本/克隆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T05:10:37.007

如果您了解 Perl，您可能会喜欢[WWW::Mechanize](http://search.cpan.org/~petdance/WWW-Mechanize-1.54/lib/WWW/Mechanize.pm)。取决于您尝试实现的自动化水平——`wget`在某些情况下可能会做得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T05:13:49.813

你有很多选择。要考虑的一件事是身份验证的复杂程度。除了[wget](http://www.gnu.org/software/wget/)，您还可以查看[curl](http://curl.haxx.se/)（一个非常强大的选项，绑定了许多不同的语言）、Python 的[urllib](http://docs.python.org/library/urllib.html)、[Apache HttpClient](http://hc.apache.org/httpclient-3.x/index.html)、[WWW-Mechanize](http://search.cpan.org/dist/WWW-Mechanize/)等。

# ruby-on-rails - Rails 应用程序设置

> ID：881036
> 
> 赞同：2
> 
> 时间：2009-05-19T05:03:47.060
> 
> 标签：ruby-on-rails, controller, settings

我正在创建两个相关的 Rails 应用程序，并且注意到很多非 DRY 工作。

例如，`@title`在各种控制器方法中设置的字段做同样的事情，除了应用程序标题，如下所示：

```
# SiteController (application 'Abc')
def SiteController < ApplicationController
  def index
    @title = 'Abc'
  end
  def about
    @title = 'about Abc'
  end
  def news
    @title = 'Abc news'
  end
  def contact
    @title = 'contact Abc'
  end
end 
```

和：

```
# SiteController (application 'Xyz')
def SiteController < ApplicationController
  def index
    @title = 'Xyz'
  end
  def about
    @title = 'about Xyz'
  end
  def news
    @title = 'Xyz news'
  end
  def contact
    @title = 'contact Xyz'
  end
end 
```

我想要做的是有类似的东西

```
# SiteController
def SiteController < ApplicationController
  def index
    @title = "#{ApplicationTitle}'
  end
  def about
    @title = "about #{ApplicationTitle}"
  end
  def news
    @title = "#{ApplicationTitle} news"
  end
  def contact
    @title = "contact #{ApplicationTitle}"
  end
end 
```

我想弄清楚的是：应该在哪里定义不变的应用程序设置。它在 config/*rb 文件中吗？它在 .yaml 文件之一中吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T05:17:55.583

对于像应用程序名称这样基本的东西，加上许多其他常量，我在 environment.rb 中声明了这些常量

常量应该使用 Ruby 常量特性，而不是 markjeee 建议的带有访问器的类变量。

参考：第 330 页，“编程 Ruby”（Pickaxe）第 2 版。

拉里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T05:11:37.180

您可以将它们放在 app/controllers/application.rb 文件中。

例如：

```
class ApplicationController < ActionController::Base
  attr_accessor :application_title

  def initialize
    self.application_title = "Some application title"
  end
end 
```

然后在您的控制器中，您可以通过以下方式访问标题：

```
class SomeController < ApplicationController
  def some_action
    @title = "some text with #{application_title}"
  end
end 
```

您还可以将应用程序标题声明为辅助方法，以便可以在您的视图中访问它。

您也可以使用全局常量，并将其放在您的 config/environment.rb 文件中。将它放在 environment.rb 的最底部，在配置块之外，如下所示：

```
APPLICATION_TITLE = "Some title here" 
```

然后在您在控制器中设置 @title 实例变量时使用该常量。请注意，它必须全部大写，因此 Ruby 会将其解释为全局常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T07:13:55.897

在 config/environment.rb 文件中定义常量

# python - 尝试在 Mac 上更改桌面墙纸时出现“OSERROR -10000 Apple 事件处理程序失败”

> ID：881041
> 
> 赞同：1
> 
> 时间：2009-05-19T05:06:55.840
> 
> 标签：python, macos, debugging, py-appscript, sourceforge-appscript

我编写了以下非常简单的 python 脚本来更改我的 Mac 上的桌面墙纸（基于此[线程](https://stackoverflow.com/questions/431205/how-can-i-programatically-change-the-background-in-mac-os-x)）：

```
from appscript import app, mactypes
import sys 

fileName = sys.argv[1:]

app('Finder').desktop_picture.set(mactypes.File(fileName)) 
```

但是，当我运行它时，我得到以下输出：

> 回溯（最后一次调用）：
> 文件“../Source/SetWallPaper2.py”，第 6 行，在 app('Finder').desktop_picture.set(mactypes.File(fileName)) 文件“/Library/Python/2.5 /site-packages/appscript-0.19.0-py2.5-macosx-10.5-i386.egg/appscript/reference.py”，第 513 行，**调用** appscript.reference.CommandError：命令失败：OSERROR：-10000 消息： Apple 事件处理程序失败。命令：app(u'/System/Library/CoreServices/Finder.app').desktop_picture.set(mactypes.File(u"/Users/Daniel/Pictures/['test.jpg']"))

我已经进行了一些网络搜索，但找不到任何东西可以帮助我弄清楚 OSERROR -10000 的含义或如何解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T06:59:03.033

`fileName = sys.argv[1]` 代替 `fileName = sys.argv[1:]`

`mactypes.File(u"/Users/Daniel/Pictures/['test.jpg']")`

看到文件名周围的方括号和引号了吗？

# fonts - Comic Sans 的“素描字体”替代品？

> ID：881045
> 
> 赞同：7
> 
> 时间：2009-05-19T05:07:58.553
> 
> 标签：fonts, wireframe, mockups

在诸如[Balsamiq](http://www.balsamiq.com/)和[WireframeSketcher](http://wireframesketcher.com/features.html) Comic Sans 之类的草图（或模型）工具中，Comic Sans 用于提供“粗略”的手绘​​外观。我唯一的问题是，我*厌倦*了那种字体。

对替代品有什么建议吗？

编辑：WireframeSketcher 不默认为 Comic Sans 字体，但它是用于显示“粗略”外观示例的字体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T05:13:21.080

谷歌搜索“技术字体”。我喜欢[这个](http://eknp.com/php/fd.php?f=technical)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T05:14:05.227

查看 Casual、Bradley Hand ITC TT、Handwriting-Dakota、Marker Felt 和 Mistral，它们都加载在 Mac OS X 10.5 上。

凯尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T05:12:09.567

如果您的印刷体面，您可以在 www.yourfonts.com 拥有自己制作的字体

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T06:26:04.523

SitePoint 最近有[一篇文章](http://www.sitepoint.com/blogs/2009/05/11/friends-dont-let-friends-use-comic-sans/)，其中介绍了 Comic Sans 的一些不错的替代品。很好，如果你想真正制作漫画。它们可能不如占位符文本那么好。

这里有几个例子

*   [![零基因](https://i.stack.imgur.com/pOTeK.jpg)](https://i.stack.imgur.com/pOTeK.jpg)
    [（来源：[sitepoint.com](http://www.sitepoint.com/blogs/wp-content/uploads/2009/05/comicfonts_clip_image017.jpg)）]

*   [![火鸡三明治](https://i.stack.imgur.com/1KaqX.jpg)](https://i.stack.imgur.com/1KaqX.jpg)

[文章](http://www.sitepoint.com/blogs/2009/05/11/friends-dont-let-friends-use-comic-sans/)内有下载链接。

# c++ - 应用程序可以自行终止的最暴力方式是什么（linux）

> ID：881053
> 
> 赞同：13
> 
> 时间：2009-05-19T05:10:29.800
> 
> 标签：c++, c, linux, operating-system

我想模拟暴力系统关闭，即尽可能接近应用程序级别的断电。我们正在谈论 Linux 上的 c/c++ 应用程序。**我需要应用程序自行终止。**

目前我看到几个选项：

1.  调用[退出（）](http://linux.die.net/man/3/exit)
2.  调用[_exit()](http://linux.die.net/man/2/exit)
3.  调用[中止（）](http://linux.die.net/man/3/abort)
4.  除以零或取消引用NULL。
5.  其他选择？

什么是最好的选择？

[这个问题](https://stackoverflow.com/questions/397075/what-is-the-difference-between-exit-and-abort)的部分重复

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-19T05:43:46.620

恕我直言，最接近断电的方法是在 VM 中运行应用程序并在不关闭的情况下为 VM 供电。在应用程序终止时操作系统仍在运行的所有其他情况下，操作系统将执行*一些*在真正断电时不会发生的清理工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-19T05:57:53.340

在应用层面，你能得到的最暴力的就是_exit()。除以零、段错误等都是可以捕获的信号 - 如果未捕获，它们基本上与 _exit() 相同，但可能会根据信号留下核心转储。

如果您真的想要硬关机，最好的办法是以最暴力的方式切断电源。调用 /sbin/poweroff -fn 是尽可能接近，尽管它可能会在退出时在硬件级别进行一些清理。

但是，如果您真的想强调一些事情，最好的办法是真正地切断电源——在电源线上安装某种软件控制的继电器，然后让软件切断它。不受控制的电力损失会出现各种奇怪的东西。例如，由于[RAM 在 DMA 控制器或硬盘之前断电](http://zork.net/~nick/mail/why-reiserfs-is-teh-sukc)，磁盘上的数据可能会损坏。这不是您可以通过多次试验在生产硬件配置中实际切断电源以外的任何东西进行测试的东西。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-19T05:14:44.167

```
kill -9 
```

它杀死一个进程并且不允许任何信号处理程序运行。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-19T05:14:36.647

为什么不停下来？还是叫恐慌？

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-19T05:46:09.613

尝试

```
raise(SIGKILL) 
```

在此过程中，或从命令行：

```
kill -9 pid 
```

其中 pid 是您的进程的 PID（这两种方法是等效的，不应执行任何清理）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-19T05:59:29.953

你不清楚你的要求是什么。如果您正在测试如何从电源故障中恢复，您需要实际导致电源故障。即使做内核恐慌之类的事情也会允许硬盘上的写入缓冲区刷新，因为它们独立于 CPU。

如果您确实需要测试完整的故障案例，远程电源板可能是一种解决方案。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-19T06:36:29.263

您可以尝试使用虚拟机。冻结它，用力拧，看看会发生什么。

否则 kill -9 将是最好的解决方案。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-19T21:40:20.573

如果您需要应用程序自行终止，以下似乎是合适的：

```
kill(getpid(), SIGKILL); // same as kill -9 
```

如果这还不够暴力（可能还不够暴力），那么我喜欢终止运行应用程序的 VM 的想法。您应该能够安装一些东西，应用程序可以向主机发送命令（通过 ssh 或其他东西）以终止其自己的虚拟机。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-19T06:04:32.490

我已经进行了回归测试，我们曾经在将电源开关拨到 OFF 的地方执行这些测试。在做磁盘 IO 时。

后来未能恢复是，嗯：失败。

您可以像这样购买可靠性：通常您需要“最终用户证书”。

您可以通过与您的 UPS 交谈（脏话）在软件中到达那里。APC UPS 肯定会在软件控制下断电！

谁说系统不能自行重启？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-19T22:03:28.060

无限递归，应该耗尽堆栈空间（如果没有，OOM 杀手将完成工作）：

```
void a() { a(); } 
```

分叉炸弹（如果应用程序没有任何分叉限制，那么 OOM 杀手应该在某个时候杀死应用程序）：

```
 while(1)
    fork(); 
```

内存不足：

```
 while(1)
    malloc(1); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-19T22:25:57.173

在单个正在运行的进程中**kill(getpid(), SIGKILL)**是最极端的，因为不可能进行清理。

否则，如果您正在进行自动化测试，请尝试使用 VM，或将测试机器放在电源板上并关闭电源。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-04-26T20:04:28.150

进程以编程方式自行终止的任何解决方案都不会以任何方式模拟异步终止。从某种意义上说，它完全是确定性的，每次它都会在代码中的同一点终止。

你的建议

*   exit() 被定义为*“正常终止，执行定期清理以终止进程。* ” - 几乎没有*暴力*！

*   _exit() 执行 exit() 操作的一些子集，但对应用程序、操作系统及其资源仍然“很好”。

*   abort() 创建一个 SIGABRT，操作系统可能会选择执行一些资源的清理。

*   /0 可能与 abort() 有类似的行为

最好不要让应用程序自行终止，而是让一些外部进程异步终止它，以便在执行的任何时候都可能发生终止。在随机计时器上使用来自另一个进程或脚本的 kill 来发送无法捕获的[SIGKILL信号，并且不执行任何清理。](http://en.wikipedia.org/wiki/SIGKILL)如果您必须让进程自行终止，请从某个异步线程执行此操作，该线程在一些不确定的时间后唤醒并终止该进程，但即便如此，您也会知道哪个线程在它终止时正在运行。即使使用这些方法，也无法像真正的断电那样在 CPU 周期中途终止进程，并且在进程终止后，任何缓存或缓冲的数据挂起输出仍可能出现或被写入。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-03T04:44:08.307

正如所指出的，尝试消耗尽可能多的资源，直到内核杀死你：

```
while(1)
    {
    malloc(1);
    fork();
    } 
```

另一种方法是尝试写入只读页面，继续写入内存，直到出现总线错误。

如果您可以访问内核，那么杀死它的一个好方法就是简单地覆盖内核使用的数据结构，如果您发现一个页面仅可读并标记为可写，然后覆盖它，则可以加分。顺便说一句，大多数 linux 内核都允许写入 syscall_table 或中断表，如果你在那里写，你的系统肯定会崩溃。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-22T21:13:15.137

在最近的系统上，具有超级用户权限的进程可以获取实时 CPU/IO 优先级，锁定所有可寻址内存，同时在 LAN/WiFi、固件 ioctl 和闪存中喷射垃圾，对 CPU/GPU/RAM 进行超频/超`/proc`压，并且有很大的机会通过造成附近的东西来退出。`/dev``/sys`*`Halt and Catch Fire`*

如果这个过程只需要做*隐喻*的暴力，它可以停止在`/proc/sysrq-trigger`。

# master-pages - 访问母版页控制

> ID：881056
> 
> 赞同：1
> 
> 时间：2009-05-19T05:11:03.607
> 
> 标签：master-pages, master

我正在使用母版页中存在的 UserControl。我需要访问 UserControl 中的母版页控件。我需要你的建议。

方案是 母版页中存在一个标签。根据用户控件中的选择，我需要修改母版页标签。UserControl 存在于母版页本身而不是内容占位符中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T05:54:41.067

在母版页中创建一个公共方法（或公共属性）以修改您的标签，并在 UserControl 中通过`Page.master`对象调用它：

```
YourMasterPageClass master = Page.master as YourMasterPageClass;
if(master != null)
{
    master.YourEditMethod("hello");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T05:33:13.387

快速简便的方法是在控件中创建事件并在 master 中处理，如下所示：

```
//Control aspx
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TestControl.ascx.cs" 
  Inherits="TestControl" %>

<div style="width:300px;border:2px groove blue;">
    <asp:Button ID="btn1" runat="server" Text="One" onclick="btn_Click" />
    <asp:Button ID="btn2" runat="server" Text="Two" onclick="btn_Click" />
    <asp:Button ID="btn3" runat="server" Text="Three" onclick="btn_Click" />
    <asp:Button ID="btn4" runat="server" Text="Four" onclick="btn_Click" />
</div>    

//Control C#

namespace Controls
{
    public partial class TestControl : System.Web.UI.UserControl
    {
        public delegate void UserChoice(TestEventArgs e);
        public event UserChoice OnUserChoice;

        protected void btn_Click(object sender, EventArgs e)
        {
            if (OnUserChoice != null)
                OnUserChoice(new TestEventArgs(((Button)sender).Text));
        }
    }

    public class TestEventArgs : EventArgs
    {
        private string _value;

        public TestEventArgs(string str)
        {
            _value = str;
        }
        public string Message
        {
            get { return _value; }
        }
    }
}

//MasterPage Code

protected void Page_Load(object sender, EventArgs e)
{
     test1.OnUserChoice += new 
        Controls.TestControl.UserChoice(test1_OnUserChoice);
}

void test1_OnUserChoice(ROMS.Intranet.Controls.TestEventArgs e)
{
    MasterLabel.Text = e.Message;
} 
```

MasterLabel 是母版页中标签的名称。

test1 是母版页中的控件。

# java - 自顶向下和自底向上编程

> ID：881064
> 
> 赞同：42
> 
> 时间：2009-05-19T05:14:08.503
> 
> 标签：java, c++, c

为什么我们说像 C 这样的语言是自上而下的，而像 Java 或 C++ 这样的 OOP 语言是自下而上的？这种分类在软件开发中是否重要？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-05-19T05:29:30.550

“自上而下”的方法对问题进行高级定义并将其细分为子问题，然后递归地执行这些子问题，直到得到明显且易于编码的部分。这通常与编程的“功能分解”风格相关联，但并非必须如此。

在“自下而上”编程中，您确定可以组合成更大程序的低级工具。

实际上，几乎所有的编程都是通过多种方法组合完成的。在面向对象编程中，您通常通过识别域对象（这是一个自上而下的步骤）和细化这些对象来细分问题，然后将它们重新组合到最终的程序中——自下而上的步骤。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-05-19T05:28:14.810

在 Top-Down 开发中，您从主要功能开始，然后考虑需要采取的主要步骤，然后将这些步骤中的每一个分解为子部分，依此类推。

在自下而上编程中，您会考虑基本功能和您将需要的部分并构建它们。你开发演员和他们的方法，然后你把他们联系在一起，形成一个连贯的整体。

当您开发对象时，OOP 自然倾向于自下而上，而当您从一个功能开始并慢慢添加到它时，过程编程倾向于自顶向下。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T05:38:46.453

我从未听说过以这种方式使用的术语“自上而下”和“自下而上”。

这些术语通常用于描述一种方法如何设计和实现软件系统，因此适用于任何语言或编程范式。

在“On LISP”中，Paul Graham 使用术语“自下而上”略有不同，表示不断将通用功能提取到共享函数中，以便最终创建一种新的、更高级别的 LISP 方言，让您根据应用程序进行编程领域。这不是该术语的常见用法。如今，我们将其称为“重构”和“特定领域的嵌入式语言”（老 LISP 程序员会嘲笑 LISP 自 1950 年代以来就能够做到这一点）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-19T05:30:13.797

我从来没有听说过这种分类适用于特定的语言，而是一种编程范式——你是先填写细节（即构建完整的实现方法）然后将它们放在一起（例如从它们调用 main() 方法），还是从逻辑流程开始，然后充实实施？

你真的可以用两种类型的语言来做......但我想说这通常是相反的，在当前的 OOP 语言中，你将首先定义接口，形成逻辑结构，然后才担心实现，而直接程序像 C 这样的语言，你需要在调用它们之前实际实现一些方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T05:27:39.680

这个维基百科页面很好地解释了它[http://en.wikipedia.org/wiki/Top-down#Programming](http://en.wikipedia.org/wiki/Top-down#Programming)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-25T04:03:09.543

在自上而下的方法中，系统首先在开始时指定但不详细说明任何子系统，然后详细定义每个系统及其子系统，直到将其指定到基础。

例如，在 C 程序中，需要在程序顶部声明函数，然后通过主入口对每个子系统/子程序进行详细定义。

在自下而上的方法首先设计中，从基础级别开始到抽象级别完成。

eg-In c++/java 从编程特性的基本级别从类开始设计，然后进入程序的主体部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-02T13:23:49.047

它更多的是关于范式（面向对象、命令式、函数式等）而不是语法。

来自[dept-info.labri.fr](http://dept-info.labri.fr/~strandh/Teaching/PFS/Common/Strandh-Tutorial/bottom-up-programming.html)

> 自底向上编程与自顶向下编程相反。它指的是一种编程风格，**从现有的编程语言原语开始构建应用程序**，并逐渐构建越来越复杂的功能，直到编写完所有应用程序。

稍后在同一篇文章中：

> 在诸如 C 或 Java 之类的语言中，自底向上编程采用从语言的原语或现有抽象数据类型构造抽象数据类型的形式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-22T06:44:05.000

我确实相信自上而下的方法和自下而上的编程方法之间的区别在于，自上而下的方法将问题分解为可管理的步骤，而自下而上的方法实际上是对这些步骤的详细说明。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-12T05:00:54.807

大多数过程或低级语言都遵循 C 语言等自上而下的方法。类似地，java、c++ 等高级语言遵循自下而上的方法。

在自上而下的方法中，所有系统或大功能被分解为小子系统，而在自下而上的方法中，小子系统组合在一起形成一个大的和最终的系统。

例如，递归是自上而下的方法，而迭代是自下而上的方法。

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2009-05-19T05:22:30.293

C是结构化语言，程序的顺序是从上到下的。从主要方法开始。

而 OOP 取决于类和对象的数量。程序流程在 OOP 中不是自上而下的方法

# list - 用于 Web 的长检查列表 ui 模式

> ID：881070
> 
> 赞同：3
> 
> 时间：2009-05-19T05:15:46.727
> 
> 标签：list, user-interface

我有一个需要用户的数据输入页面，因此请从列表中进行一些选择。目前它只是一个可以勾选大约 10 个项目的清单，但很快就会扩展到大约 230 个。处理大量可选项目的好的 UI 范例是什么？我正在考虑双重列表类型控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-23T20:38:47.270

双列表，但是，对于大量不可分组的元素：

*   必须具有选择多个元素的能力（Duh！）
*   应该能够通过单击选择所有元素
*   应该能够搜索（在任一列表中），并选择所有匹配的元素

此外，如果列表非常大（1k+），您可能会遇到渲染缓慢的问题。如果是这样，您还可以对列表进行“分页”——例如，仅显示前 N 个元素，允许从中进行选择，然后能够将“框架”转移到下一个 N 个元素。

（以上所有，顺便说一句，是我们在企业 Web 应用程序中实现的解决方案的真实属性，需要一个包含 30k 个可能值的选择列表，这些值无法分组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T05:32:11.220

项目是否以任何方式分组？如果是这样，可折叠的树型导航可能会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:54:48.003

这真的取决于情况和你有多少空间，但在大多数情况下，我更喜欢双列表控件，也就是列表生成器，你在想什么。

这是一个很好的灵感链接（需要silverlight）： http: [//good.ly/qh7aeg8](http://good.ly/qh7aeg8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-16T09:41:20.923

这是一种仅使用 HTML 和 Javascript 的可访问方式：

1.  使用 HTML`fieldset`标签将它们分成逻辑组；
2.  使用（比如）JQuery 显示/隐藏每个组；
3.  在顶部添加导航以跳转到每个组。

如果您最初隐藏所有组，用户可以单击他们想要完成的组的链接。此外，如果您添加一个带有每个组描述的翻转（可能只是`title`链接上的工具提示属性以实现可访问性），用户将在访问它之前获得“预览”。

最后，如果标签足够短，给`fieldsets`一个宽度并使用 CSS`float`或`absolute`定位将它们变成列。

尝试坚持使用有效的 (X)HTML、CSS 和 Javascript——这方面有很多先例。

# google-chrome - 你不知道如何在服务器端捕获任意 URL 吗？（含铬）

> ID：881072
> 
> 赞同：0
> 
> 时间：2009-05-19T05:17:15.227
> 
> 标签：google-chrome, capture

至于谷歌浏览器，如果我个人认为，一个网站会记录阅读历史。你不能在图书馆获得捕获吗？喜欢这个网站；[链接文本](http://img.simpleapi.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T05:31:18.023

您是否在询问如何截屏某人提交的网站，例如您链接到的网站中的缩略图？最简单的方法是使用[其中之一的服务。](http://websitetips.com/tools/#online-screenshots)然后编写一个脚本来抓取图像。

# linux - 如何使用sprof？

> ID：881074
> 
> 赞同：9
> 
> 时间：2009-05-19T05:18:23.727
> 
> 标签：linux, sprof

请举例说明？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T06:39:58.087

从[此处](http://sources.redhat.com/ml/libc-alpha/2003-07/msg00029.html)和[此处](http://sourceware.org/ml/binutils/2002-04/msg00035.html)找到的电子邮件中，我提取了以下注释：

给定一个应用程序`my_app', which links against a shared object`my_sobj'，并使用 '-g' 编译标志进行编译：

```
#set the environment variable LD_PROFILE to the name of the shared obj
export LD_PROFILE=my_obj
#run your application
my_app
#this should create a file /var/tmp/my_sobj.profile
#now run sprof
sprof my_sobj my_sobj.profile 
```

这提供了共享库的配置文件信息，而不是 my_app

# iphone - 执行时在屏幕上闪烁

> ID：881079
> 
> 赞同：0
> 
> 时间：2009-05-19T05:22:20.090
> 
> 标签：iphone, objective-c

这是我的代码，

```
egg[0] = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Big_egg.png"]];
egg[0].transform = CGAffineTransformMakeScale(0.0, 0.0);
egg[0].alpha = 1;
[self addSubview:egg[0]]; 
```

我想旋转鸡蛋，同时鸡蛋的大小也在增加，我的代码是，

```
[ UIView beginAnimations:nil context:nil];
[ UIView setAnimationCurve: UIViewAnimationCurveLinear ] ;
[ UIView setAnimationDuration:3.0 ];    
egg[0].transform = CGAffineTransformMakeScale(1.0, 1.0);
egg[0].transform = CGAffineTransformRotate(egg[0].transform,2*M_PI/180.0);
[ UIView commitAnimations] ; 
```

因此，我在屏幕上闪烁，在执行时，我想将其删除。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T07:08:01.617

看起来您有一些问题可能会给您带来问题

首先，您没有更改比例 1.0，1.0 在 x 和 y 方向上都是 1 的比例因子。选择一个大于或小于 1 的数字，我选择 0.5。

其次，您设置了两次转换。只需设置一次，创建临时变量以在您操作它时保存它（常见的 Cocoa 模式）：

```
 CGAffineTransform tempTransform = CGAffineTransformScale(egg[0].transform, 0.5, 0.5);
   tempTransform = CGAffineTransformRotate(tempTransform, 2*M_PI/180.0);
   egg[0].transform = tempTransform; 
```

# c# - RhinoMocks 中的 SetupResult 和 Stub 有区别吗？

> ID：881084
> 
> 赞同：3
> 
> 时间：2009-05-19T05:23:42.973
> 
> 标签：c#, rhino-mocks

有的话，有吗？：

```
 var storage = mocks.DynamicMock<IStorage>();

...

    SetupResult.For(storage.GetCustomers())
        .Return(new Collection<Customer> { cust1, cust2 });

            // and

    storage.Stub(x => x.Customers)
        .Return(new Collection<Customer> { cust1, cust2 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T05:27:46.373

编辑：我之前没有见过`Stub`扩展方法，只有存储库上的方法。

我怀疑主要区别在于您可以`Stub`在模拟处于任一模式（重播或录制）时调用。它会暂时将其设置回记录模式，记录动作，然后如果它以重放模式开始，则恢复为重放。

它还允许您在一个 lambda 表达式中存根多个操作，只要您只需要其中一个操作（最后一个）即可返回结果。

# javascript - 计算Javascript中字符串中字符的出现次数

> ID：881085
> 
> 赞同：674
> 
> 时间：2009-05-19T05:24:24.643
> 
> 标签：javascript, string

我需要计算字符串中某个字符的出现次数。

例如，假设我的字符串包含：

```
var mainStr = "str1,str2,str3,str4"; 
```

我想找到逗号`,`字符的计数，即 3。以及沿逗号拆分后的单个字符串的计数，即 4。

我还需要验证每个字符串，即 str1 或 str2 或 str3 或 str4 不应超过 15 个字符。

* * *

## 回答 #1

> 赞同：947
> 
> 时间：2009-05-19T05:33:20.237

我已经更新了这个答案。我更喜欢使用匹配的想法，但它更慢：

```
console.log(("str1,str2,str3,str4".match(/,/g) || []).length); //logs 3

console.log(("str1,str2,str3,str4".match(new RegExp("str", "g")) || []).length); //logs 4
```

如果您事先知道要搜索的内容，请使用正则表达式文字，否则您可以使用`RegExp`构造函数，并将`g`标志作为参数传递。

`match`返回`null`没有结果，因此`|| []`

我在 2009 年做出的原始答案如下。它不必要地创建了一个数组，但**使用拆分更快**（截至 2014 年 9 月）。我很矛盾，如果我真的需要速度，毫无疑问我会使用拆分，但我更喜欢使用匹配。

旧答案（从 2009 年开始）：

如果您正在寻找逗号：

```
(mainStr.split(",").length - 1) //3 
```

如果您正在寻找 str

```
(mainStr.split("str").length - 1) //4 
```

在@Lo 的回答和我自己的愚蠢[性能测试](https://parsebox.io/dthree/fgrsjqmknxzs)中，速度都领先，至少在 Chrome 中是这样，但再次创建额外的数组似乎并不明智。

* * *

## 回答 #2

> 赞同：265
> 
> 时间：2012-05-20T07:54:02.900

至少有五种方法。最好的选项，也应该是最快的（由于本机 RegEx 引擎）放在顶部。

### 方法一

```
("this is foo bar".match(/o/g)||[]).length;
// returns 2 
```

### 方法二

```
"this is foo bar".split("o").length - 1;
// returns 2 
```

不推荐拆分，因为它很耗资源。它为每个匹配分配新的 'Array' 实例。不要尝试通过 FileReader 获取 >100MB 的文件。**您可以使用Chrome 的分析器**选项观察确切的资源使用情况。

### 方法三

```
 var stringsearch = "o"
       ,str = "this is foo bar";
    for(var count=-1,index=-2; index != -1; count++,index=str.indexOf(stringsearch,index+1) );
// returns 2 
```

### 方法四

搜索单个字符

```
 var stringsearch = "o"
       ,str = "this is foo bar";
    for(var i=count=0; i<str.length; count+=+(stringsearch===str[i++]));
     // returns 2 
```

### 方法五

元素映射和过滤。不建议这样做，因为它的整体资源预分配而不是使用 Pythonian 'generators'：

```
 var str = "this is foo bar"
    str.split('').map( function(e,i){ if(e === 'o') return i;} )
                 .filter(Boolean)
    //>[9, 10]
    [9, 10].length
    // returns 2 
```

**分享：** 我提出了这个*[要点](https://gist.github.com/2757250)*，目前有 8 种字符计数方法，所以我们可以直接汇集和分享我们的想法 - 只是为了好玩，也许还有一些有趣的基准:)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-05-29T20:44:06.543

简单地说，使用**拆分**来找出字符串中某个字符的出现次数。

`mainStr.split(',').length` *// 给出 4 是使用分隔符逗号分割后的字符串数*

`mainStr.split(',').length - 1` *// 给出 3 是逗号的计数*

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-01-08T16:43:14.920

将此函数添加到 sting 原型：

```
String.prototype.count=function(c) { 
  var result = 0, i = 0;
  for(i;i<this.length;i++)if(this[i]==c)result++;
  return result;
}; 
```

用法：

```
console.log("strings".count("s")); //2 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-05-19T05:54:12.410

一个快速的[谷歌](http://www.google.com/)搜索得到了这个（来自[http://www.codecodex.com/wiki/index.php?title=Count_the_number_of_occurrences_of_a_specific_character_in_a_string#JavaScript](http://www.codecodex.com/wiki/index.php?title=Count_the_number_of_occurrences_of_a_specific_character_in_a_string#JavaScript)）

```
String.prototype.count=function(s1) { 
    return (this.length - this.replace(new RegExp(s1,"g"), '').length) / s1.length;
} 
```

像这样使用它：

```
test = 'one,two,three,four'
commas = test.count(',') // returns 3 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-10-15T22:30:05.707

这是一个类似的解决方案，但它使用`Array.prototype.reduce`

```
function countCharacters(char, string) {
  return string.split('').reduce((acc, ch) => ch === char ? acc + 1: acc, 0)
} 
```

如前所述，`String.prototype.split`工作速度比`String.prototype.replace`.

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-08-23T14:10:46.247

您还可以[休息](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)您的字符串并像使用元素数组一样使用它

*   [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)

```
const mainStr = 'str1,str2,str3,str4';
const commas = [...mainStr].filter(l => l === ',').length;

console.log(commas);
```

或者

*   [Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)

```
const mainStr = 'str1,str2,str3,str4';
const commas = [...mainStr].reduce((a, c) => c === ',' ? ++a : a, 0);

console.log(commas);
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-07-15T20:04:14.410

好的，另一个带有正则表达式的 - 可能不快，但比其他人短且可读性更好，在我的情况下只是`'_'`为了数

```
key.replace(/[^_]/g,'').length 
```

只需删除所有看起来不像您的字符但使用字符串作为输入看起来不好看的所有内容

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2017-04-06T08:58:47.110

如果你使用 lodash， _. [countBy](https://lodash.com/docs#countBy)方法会这样做：

```
_.countBy("abcda")['a'] //2 
```

此方法也适用于数组：

```
_.countBy(['ab', 'cd', 'ab'])['ab'] //2 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-05-07T16:07:45.860

我发现在非常大的字符串（例如，1 000 000 个字符长）中搜索字符的最佳方法是使用该`replace()`方法。

```
window.count_replace = function (str, schar) {
    return str.length - str.replace(RegExp(schar), '').length;
}; 
```

您可以看到[另一个 JSPerf](http://jsperf.com/count-number-of-occurrences-of-a-character-in-a-string)套件来测试此方法以及在字符串中查找字符的其他方法。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-06-30T08:30:50.843

拆分与正则表达式的性能

```
var i = 0;

var split_start = new Date().getTime();
while (i < 30000) {
  "1234,453,123,324".split(",").length -1;
  i++;
}
var split_end = new Date().getTime();
var split_time = split_end - split_start;

i= 0;
var reg_start = new Date().getTime();
while (i < 30000) {
  ("1234,453,123,324".match(/,/g) || []).length;
  i++;
}
var reg_end = new Date().getTime();
var reg_time = reg_end - reg_start;

alert ('Split Execution time: ' + split_time + "\n" + 'RegExp Execution time: ' + reg_time + "\n");
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-05-06T16:51:06.837

我对接受的答案做了一点改进，它允许检查区分大小写/不区分大小写的匹配，并且是附加到字符串对象的方法：

```
String.prototype.count = function(lit, cis) {
    var m = this.toString().match(new RegExp(lit, ((cis) ? "gi" : "g")));
    return (m != null) ? m.length : 0;
} 
```

`lit`是要搜索的字符串（例如 'ex' ），而 cis 是不区分大小写的，默认为 false，它将允许选择不区分大小写的匹配项。

* * *

要在字符串中搜索`'I love StackOverflow.com'`小写字母`'o'`，您可以使用：

```
var amount_of_os = 'I love StackOverflow.com'.count('o'); 
```

`amount_of_os`将等于`2`。

* * *

如果我们要使用不区分大小写的匹配再次搜索相同的字符串，您将使用：

```
var amount_of_os = 'I love StackOverflow.com'.count('o', true); 
```

这一次，`amount_of_os`将等于`3`，因为字符串中的大写`O`字母被包含在搜索中。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-01-09T11:13:43.487

我发现的最简单的方法...

例子-

```
str = 'mississippi';

function find_occurences(str, char_to_count){
    return str.split(char_to_count).length - 1;
}

find_occurences(str, 'i') //outputs 4 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2019-07-28T04:33:56.560

这是我的解决方案。很多解决方案已经在我面前发布。但我喜欢在这里分享我的观点。

```
const mainStr = 'str1,str2,str3,str4';

const commaAndStringCounter = (str) => {
  const commas = [...str].filter(letter => letter === ',').length;
  const numOfStr = str.split(',').length;

  return `Commas: ${commas}, String: ${numOfStr}`;
}

// Run the code
console.log(commaAndStringCounter(mainStr)); // Output: Commas: 3, String: 4 
```

[在这里你可以找到我的 REPL](https://repl.it/@JamalUddin/commaAndStringCounter)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2013-02-22T11:35:10.773

```
s = 'dir/dir/dir/dir/'
for(i=l=0;i<s.length;i++)
if(s[i] == '/')
l++ 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-02-12T14:04:22.707

我正在做一个需要子字符串计数器的小项目。搜索错误的短语没有给我任何结果，但是在编写了自己的实现之后，我偶然发现了这个问题。无论如何，这是我的方式，它可能比这里的大多数都慢，但可能对某人有帮助：

```
function count_letters() {
var counter = 0;

for (var i = 0; i < input.length; i++) {
    var index_of_sub = input.indexOf(input_letter, i);

    if (index_of_sub > -1) {
        counter++;
        i = index_of_sub;
    }
} 
```

[http://jsfiddle.net/5ZzHt/1/](http://jsfiddle.net/5ZzHt/1/)

如果您发现此实施失败或不遵循某些标准，请告诉我！:)

**更新** 您可能想要替换：

```
 for (var i = 0; i < input.length; i++) { 
```

和：

```
for (var i = 0, input_length = input.length; i < input_length; i++) { 
```

有趣的阅​​读讨论上述内容： [http ://www.erichynds.com/blog/javascript-length-property-is-a-stored-value](http://www.erichynds.com/blog/javascript-length-property-is-a-stored-value)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-09-20T03:07:52.860

我刚刚使用 Node v7.4对[repl.it做了一个非常快速和肮脏的测试。](https://repl.it/)对于单个字符，标准 for 循环是最快的：

**一些代码**：

```
// winner!
function charCount1(s, c) {
    let count = 0;
    c = c.charAt(0); // we save some time here
    for(let i = 0; i < s.length; ++i) {
        if(c === s.charAt(i)) {
            ++count;
        }
    }
    return count;
}

function charCount2(s, c) {
    return (s.match(new RegExp(c[0], 'g')) || []).length;
}

function charCount3(s, c) {
    let count = 0;
    for(ch of s) {
        if(c === ch) {
            ++count;
        }
    }
    return count;
}

function perfIt() {
    const s = 'Hello, World!';
    const c = 'o';

    console.time('charCount1');
    for(let i = 0; i < 10000; i++) {
        charCount1(s, c);
    }
    console.timeEnd('charCount1');

    console.time('charCount2');
    for(let i = 0; i < 10000; i++) {
        charCount2(s, c);
    }
    console.timeEnd('charCount2');

    console.time('charCount3');
    for(let i = 0; i < 10000; i++) {
        charCount2(s, c);
    }
    console.timeEnd('charCount3');
} 
```

**几次运行的结果**：

```
perfIt()
charCount1: 3.301ms
charCount2: 11.652ms
charCount3: 174.043ms
undefined

perfIt()
charCount1: 2.110ms
charCount2: 11.931ms
charCount3: 177.743ms
undefined

perfIt()
charCount1: 2.074ms
charCount2: 11.738ms
charCount3: 152.611ms
undefined

perfIt()
charCount1: 2.076ms
charCount2: 11.685ms
charCount3: 154.757ms
undefined 
```

**2021 年 2 月 10 日更新**：修复了 repl.it 演示中的错字

**2020 年 10 月 24 日更新**：[Node.js 12 仍然如此（在这里自己玩）](https://repl.it/talk/share/Character-Count-Perf-Test/59754)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-05-24T08:36:25.600

string.split(desiredCharecter).length-1 怎么样

例子：

var str = "你好，生活怎么样"; var len = str.split("h").length-1; 将为上述字符串中的字符“h”提供计数 2；

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-01-21T23:12:24.447

**最快的方法似乎是通过索引运算符：**

```
function charOccurances (str, char)
{
  for (var c = 0, i = 0, len = str.length; i < len; ++i)
  {
    if (str[i] == char)
    {
      ++c;
    }
  }
  return c;
}

console.log( charOccurances('example/path/script.js', '/') ); // 2
```

**或者作为原型函数：**

```
String.prototype.charOccurances = function (char)
{
  for (var c = 0, i = 0, len = this.length; i < len; ++i)
  {
    if (this[i] == char)
    {
      ++c;
    }
  }
  return c;
}

console.log( 'example/path/script.js'.charOccurances('/') ); // 2
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-05-19T06:31:54.810

下面使用正则表达式来测试长度。testex 确保您没有 16 个或更多连续的非逗号字符。如果它通过了测试，那么它将继续拆分字符串。计算逗号就像计算标记减一一样简单。

```
var mainStr = "str1,str2,str3,str4";
var testregex = /([^,]{16,})/g;
if (testregex.test(mainStr)) {
  alert("values must be separated by commas and each may not exceed 15 characters");
} else {
  var strs = mainStr.split(',');
  alert("mainStr contains " + strs.length + " substrings separated by commas.");
  alert("mainStr contains " + (strs.length-1) + " commas.");
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-06-01T23:16:26.470

我正在使用 Node.js v.6.0.0，最快的是带索引的（Lo Sauer 回答中的第三种方法）。

第二个是：

```
function count(s, c) {
  var n = 0;
  for (let x of s) {
    if (x == c)
      n++;
  }
  return n;
}
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-04-12T20:14:08.870

这是一个与 the 和 replace 方法一样快的`split()`方法，它比正则表达式方法（在 Chrome 和 Firefox 中）快一点。

```
let num = 0;
let str = "str1,str2,str3,str4";
//Note: Pre-calculating `.length` is an optimization;
//otherwise, it recalculates it every loop iteration.
let len = str.length;
//Note: Don't use a `for (... of ...)` loop, it's slow!
for (let charIndex = 0; charIndex < len; ++charIndex) {
  if (str[charIndex] === ',') {
    ++num;
  }
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-07-24T07:51:48.183

还有：

```
function character_count(string, char, ptr = 0, count = 0) {
    while (ptr = string.indexOf(char, ptr) + 1) {count ++}
    return count
} 
```

也适用于整数！

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-02-06T17:46:18.573

```
var mainStr = "str1,str2,str3,str4";
var splitStr = mainStr.split(",").length - 1; // subtracting 1 is important!
alert(splitStr);
```

拆分成一个数组给了我们一些元素，这些元素总是比字符实例的数量多 1。这可能不是最节省内存的，但如果您的输入总是很小，这是一种直接且易于理解的方法。

如果您需要解析非常大的字符串（超过几百个字符），或者如果这是在处理大量数据的核心循环中，我会推荐一种不同的策略。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-12-05T12:50:09.530

我知道我在这里聚会迟到了，但我很困惑没有人用最基本的方法回答这个问题。社区为这个问题提供的大部分答案都是基于迭代的，但所有答案都是基于每个字符移动字符串，这并不是很有效。

在处理包含数千个字符的大字符串时，遍历每个字符以获取出现次数可能变得相当无关紧要，更不用说代码气味了。以下解决方案利用`slice`,`indexOf`和受信任的传统`while`循环。这些方法使我们不必遍历每个字符，并将大大加快计算出现次数的时间。这些遵循与您在需要字符串遍历的解析器和词法分析器中发现的类似逻辑。

**与切片一起使用**

在这种方法中，我们正在利用`slice`每`indexOf`场比赛，我们将在字符串中移动并消除先前搜索的药水。每次我们调用`indexOf`它搜索的字符串的大小都会变小。

```
function countChar (char: string, search: string): number {

  let num: number = 0;
  let str: string = search;
  let pos: number = str.indexOf(char);

  while(pos > -1) {
    str = str.slice(pos + 1);
    pos = str.indexOf(char);
    num++;
  }

  return num;

}

// Call the function
countChar('x', 'foo x bar x baz x') // 3 
```

**从位置与 IndexOf 一起使用**

与第一种方法类似，使用`slice`但不是增加我们正在搜索的字符串，它将利用方法中的`from`参数`indexOf`。

```
function countChar (char: string, str: string): number {

  let num: number = 0;
  let pos: number = str.indexOf(char);

  while(pos > -1) {
    pos = str.indexOf(char, pos + 1);
    num++;
  }

  return num;

}

// Call the function
countChar('x', 'foo x bar x baz x') // 3 
```

就我个人而言，我倾向于第二种方法而不是第一种方法，但是在处理大字符串时两者都很好并且性能更好，但也适用于较小的字符串。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-04-09T01:17:12.093

我的解决方案：

```
function countOcurrences(str, value){
   var regExp = new RegExp(value, "gi");
   return str.match(regExp) ? str.match(regExp).length : 0;  
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-10-03T14:57:51.183

如果字符位于字符串的开头，则 Leo Sauers 答案中的第五种方法失败。例如

```
var needle ='A',
  haystack = 'AbcAbcAbc';

haystack.split('').map( function(e,i){ if(e === needle) return i;} )
  .filter(Boolean).length; 
```

将给出 2 而不是 3，因为过滤器函数 Boolean 为 0 给出 false。

其他可能的过滤功能：

```
haystack.split('').map(function (e, i) {
  if (e === needle) return i;
}).filter(function (item) {
  return !isNaN(item);
}).length; 
```

还有一个答案：

```
function count(string){
  const count={}

  string.split('').forEach(char=>{
    count[char] = count[char] ? (count[char]+1) : 1;
  })

  return count
}

console.log(count("abfsdfsddsfdfdsfdsfdsfda")) 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-10-17T07:35:41.223

我知道这可能是一个老问题，但我为 JavaScript 的低级初学者提供了一个简单的解决方案。

作为一个初学者，我只能理解这个问题的一些解决方案，所以我使用两个嵌套的**FOR**循环来检查每个字符与字符串中的每个其他字符，为找到的每个字符增加一个**计数**变量等于该字符。

我创建了一个新的空白对象，其中每个属性键都是一个字符，值是每个字符在字符串中出现的次数（计数）。

示例功能：-

```
function countAllCharacters(str) {
  var obj = {};
  if(str.length!==0){
    for(i=0;i<str.length;i++){
      var count = 0;
      for(j=0;j<str.length;j++){
        if(str[i] === str[j]){
          count++;
        }
      }
      if(!obj.hasOwnProperty(str[i])){
        obj[str[i]] = count;
      }
    }
  }
  return obj;
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-11-24T18:56:44.137

我相信您会发现以下解决方案非常短、非常快、能够处理非常长的字符串、能够支持多字符搜索、防错以及能够处理空字符串搜索。

```
function substring_count(source_str, search_str, index) {
    source_str += "", search_str += "";
    var count = -1, index_inc = Math.max(search_str.length, 1);
    index = (+index || 0) - index_inc;
    do {
        ++count;
        index = source_str.indexOf(search_str, index + index_inc);
    } while (~index);
    return count;
} 
```

示例用法：

```
console.log(substring_count("Lorem ipsum dolar un sit amet.", "m "))

function substring_count(source_str, search_str, index) {
    source_str += "", search_str += "";
    var count = -1, index_inc = Math.max(search_str.length, 1);
    index = (+index || 0) - index_inc;
    do {
        ++count;
        index = source_str.indexOf(search_str, index + index_inc);
    } while (~index);
    return count;
}
```

上面的代码修复了 Jakub Wawszczyk 中的主要性能错误，即即使在 indexOf 表示没有匹配项并且他的版本本身由于他忘记提供函数输入参数而无法正常工作之后，该代码仍会继续寻找匹配项。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-03-26T07:32:33.573

```
var a = "acvbasbb";
var b= {};
for (let i=0;i<a.length;i++){
    if((a.match(new RegExp(a[i], "g"))).length > 1){
        b[a[i]]=(a.match(new RegExp(a[i], "g"))).length;
    }
}
console.log(b); 
```

在 javascript 中，您可以使用上面的代码来获取字符串中某个字符的出现。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-02-11T22:23:36.250

我使用 ramda js 的解决方案：

```
const testString = 'somestringtotest'

const countLetters = R.compose(
  R.map(R.length),
  R.groupBy(R.identity),
  R.split('')
)

countLetters(testString) 
```

[链接到 REPL。](https://ramdajs.com/repl/#?const%20testString%20%3D%20%27somestringtotest%27%0A%0Aconst%20countLetters%20%3D%20R.compose%28%0A%20%20R.map%28R.length%29%2C%0A%20%20R.groupBy%28R.identity%29%2C%0A%20%20R.split%28%27%27%29%0A%29%0A%0AcountLetters%28testString%29)

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-06-09T15:04:26.017

该函数将字符串 str 作为参数，并计算字符串中每个唯一字符的出现次数。结果出现在每个字符的键值对中。

```
var charFoundMap = {};//object defined
    for (var i = 0; i < str.length; i++) {

       if(!charFoundMap[ str[i] ])  {
        charFoundMap[ str[i] ]=1;
       } 
       else
       charFoundMap[ str[i] ] +=1;
       //if object does not contain this 
    }
    return charFoundMap;

} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2020-09-04T13:39:42.150

```
let str = "aabgrhaab"
let charMap = {}

for(let char of text) {
   if(charMap.hasOwnProperty(char)){
      charMap[char]++
   } else {
     charMap[char] = 1
   }
} 
```

控制台.log(charMap); //{a: 4, b: 2, g: 1, r: 1, h: 1}

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-06-26T07:29:21.847

有一个非常棘手的方法，但它是相反的：

```
const sampleStringText = "/john/dashboard/language"; 
```

假设上面的示例，要计算正斜杠的数量，您可以这样做：

```
console.log( sampleStringText.split('/') - 1 ); 
```

**所以**我建议为它使用一个函数（TypeScript）：

```
const counter = (sentence: string, char: string): number => sentence.split(char) - 1; 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2021-11-24T04:44:20.813

```
function len(text,char){

return text.innerText.split(string).length
}

console.log(len("str1,str2,str3,str4",",")) 
```

这是一个非常简短的函数。

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2018-06-06T09:43:33.287

```
var i = 0;

var split_start = new Date().getTime();
while (i < 30000) {
  "1234,453,123,324".split(",").length -1;
  i++;
}
var split_end = new Date().getTime();
var split_time = split_end - split_start;

i= 0;
var reg_start = new Date().getTime();
while (i < 30000) {
  ("1234,453,123,324".match(/,/g) || []).length;
  i++;
}
var reg_end = new Date().getTime();
var reg_time = reg_end - reg_start;

alert ('Split Execution time: ' + split_time + "\n" + 'RegExp Execution time: ' + reg_time + "\n");
```

* * *

## 回答 #37

> 赞同：-1
> 
> 时间：2020-05-02T08:49:43.167

**下面这个是最简单的逻辑，很容易理解**

```
 //Demo string with repeat char 
  let str = "Coffee"
  //Splitted the str into an char array for looping
  let strArr = str.split("")
  //This below is the final object which holds the result
  let obj = {};
  //This loop will count char (You can also use traditional one for loop)
  strArr.forEach((value,index)=>{
      //If the char exists in the object it will simple increase its value
      if(obj[value] != undefined)
      {
          obj[value] = parseInt(obj[value]) + 1;
      }//else it will add the new one with initializing 1
      else{
          obj[value] =1;
      }      
  });

  console.log("Char with Count:",JSON.stringify(obj)); //Char with Count:{"C":1,"o":1,"f":2,"e":2} 
```

# python - Google App Engine self.redirect 帖子

> ID：881086
> 
> 赞同：2
> 
> 时间：2009-05-19T05:24:40.587
> 
> 标签：python, google-app-engine

我有一个将信息发布给我的一个处理程序的表单。我的处理程序验证信息，然后需要将此信息发布给第三方并将用户重定向到该页面。

示例

```
 class ExampleHandler(BaseRequestHandler):
  """DocString here...
  """
  def post(self):
    day = int(self.request.get('day'))
    checked_day = CheckDay(day)
    if checked_day:
      #Here is where I would like to redirect the user to the 3rd party -- but via a post as I will be submitting a form based on data in checked_day on their behalf.
    else:
      # Otherwise no post redirect is needed  -- just a simple self.redirect.
      self.redirect('/example') 
```

您对如何将用户重定向到我提交表单的页面有任何建议吗？

理想情况下，我希望 self.redirect() 允许 POST 到 3rd 方站点，但我不认为这是一个选项。

我的目标是在将提供的数据发送给第三方之前检查它们。我错过了他们的其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T06:03:42.803

您可以发布表单并将用户重定向到页面，但它们必须是单独的操作。

该`urlfetch.fetch()`方法允许您将方法设置为 POST，如下所示：

```
import urllib

form_fields = {
  "first_name": "Albert",
  "last_name": "Johnson",
  "email_address": "Albert.Johnson@example.com"
}
form_data = urllib.urlencode(form_fields)
headers = {'Content-Type': 'application/x-www-form-urlencoded'}
result = urlfetch.fetch(url=url,
                        payload=form_data,
                        method=urlfetch.POST,
                        headers=headers) 
```

上面的例子来自[URL Fetch Python API Overview](http://code.google.com/appengine/docs/python/urlfetch/overview.html)。

# git - 如何在 Git 中合并特定的提交

> ID：881092
> 
> 赞同：1219
> 
> 时间：2009-05-19T05:27:34.407
> 
> 标签：git, merge

我从 GitHub 的存储库中创建了一个分支，并提交了一些特定于我的东西。现在我发现原始存储库有一个很好的特性，它位于`HEAD`.

我只想在没有以前提交的情况下合并它。我该怎么办？我知道如何合并所有提交：

```
git branch -b a-good-feature
git pull repository master
git checkout master
git merge a-good-feature
git commit -a
git push 
```

* * *

## 回答 #1

> 赞同：1328
> 
> 时间：2009-05-19T05:35:40.607

' [`git cherry-pick`](https://git-scm.com/docs/git-cherry-pick)' 应该是你的答案。

> 应用现有提交引入的更改。

不要忘记阅读[bdonlan](https://stackoverflow.com/users/36723/bdonlan)在这篇文章中关于挑选樱桃的后果的回答：
[“从一个分支中提取所有提交，将指定的提交推送到另一个”](https://stackoverflow.com/questions/880957/pull-all-commits-from-a-branch-push-specified-commits-to-another/881014#881014)，其中：

```
A-----B------C
 \
  \
   D 
```

变成：

```
A-----B------C
 \
  \
   D-----C' 
```

> 这个提交的问题是 git 认为提交包括他们之前的所有历史
> 
> 其中 C' 具有不同的`SHA-1`ID。
> 同样，cherry 从一个分支到另一个分支的提交基本上涉及生成一个补丁，然后应用它，因此也会以这种方式丢失历史记录。
> 
> 这种提交 ID 的更改破坏了 git 的合并功能（尽管如果谨慎使用，会有一些启发式方法可以解决这个问题）。
> 更重要的是，**它忽略了函数依赖——如果 C 真的使用了 B 中定义的函数，你永远不会知道**.

* * *

## 回答 #2

> 赞同：858
> 
> 时间：2009-05-19T05:35:57.050

您可以使用 git cherry-pick 将单个提交单独应用到当前分支。

例子：`git cherry-pick d42c389f`

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-05-27T05:29:48.520

让我们试着举个例子来理解：

我有一个分支，比如**master**，指向 X <commit-id>，我有一个新分支指向 Y <sha1>。

其中**Y <commit-id> = <master> 分支提交 - 很少提交**

现在说对于 Y 分支，我必须关闭主分支和新分支之间的提交。以下是我们可以遵循的程序：

***第1步：***

```
git checkout -b local origin/new 
```

其中 local 是分支名称。可以给出任何名称。

***第2步：***

```
 git merge origin/master --no-ff --stat -v --log=300 
```

将主分支的提交合并到新分支，并创建一个日志消息的合并提交，其中包含最多 <n> 个正在合并的实际提交的单行描述。

更多关于 Git 合并的信息和参数，请参考：

```
git merge --help 
```

此外，如果您需要合并特定的提交，那么您可以使用：

```
git cherry-pick <commit-id> 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2020-07-13T01:11:24.657

假设您要将`e27af03`分支 X 的提交合并到 master。

```
git checkout master
git cherry-pick e27af03
git push 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2020-06-16T06:53:58.587

我过去常常挑剔，但发现我时不时会遇到一些神秘的问题。我看到了在微软工作了 25 年的老将 Raymond Chen 的博客，其中描述了在某些情况下采摘樱桃可能会导致问题的一些场景。

经验法则之一是，如果您从一个分支中挑选到另一个分支，然后在这些分支之间合并，您迟早会遇到问题。

以下是 Raymond Chen 关于此主题的博客的参考：[https ://devblogs.microsoft.com/oldnewthing/20180312-00/?p=98215](https://devblogs.microsoft.com/oldnewthing/20180312-00/?p=98215)

我对 Raymond 博客的唯一问题是他没有提供完整的工作示例。所以我会尝试在这里提供一个。

*上面的问题询问如何仅将a-good-feature*分支中 HEAD 指向的提交合并到*master*。

这是如何完成的：

1.  *找到master*和*a-good-feature* 分支之间的共同祖先。
2.  从那个祖先创建一个新分支，我们称之为新分支*patch*。
3.  Cherry 选择一个或多个提交到这个新的*补丁*分支。
4.  将补丁分支合并到**master***和*a *-good-feature*分支。
5.  *master*分支现在将包含提交，并且*master*和*a-good-feature*分支也将有一个新的共同祖先，如果稍后执行进一步的合并，它将解决任何未来的问题。

以下是这些命令的示例：

```
git checkout master...a-good-feature  [checkout the common ancestor]
git checkout -b patch
git cherry-pick a-good-feature  [this is not only the branch name, but also the commit we want]
git checkout master
git merge patch
git checkout a-good-feature
git merge -s ours patch 
```

可能值得注意的是，合并到*a-good-feature*分支的最后一行使用了“ *-s ours* ”合并策略。这样做的原因是因为我们只需要在指向新共同祖先的*a-good-feature*分支中创建一个提交，并且由于代码已经在该分支中，我们希望确保没有任何机会的合并冲突。如果您要合并的提交不是最新的，这将变得更加重要。

围绕部分合并的场景和细节可能非常深入，因此我建议阅读 Raymond Chen 博客的所有 10 个部分，以全面了解可能出现的问题、如何避免以及为什么会这样。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2020-02-22T05:15:25.963

领先的答案描述了如何***将来自***特定提交的更改应用到当前分支。如果这就是您所说的“如何合并”的意思，那么只需按照他们的建议使用cherry-pick。

但是如果你真的想要一个***合并***，即你想要一个**有两个父母**的新提交——当前分支上的现有提交，以及你想要应用更改的提交——那么樱桃选择将无法实现这一点。

拥有真实的合并历史可能是可取的，例如，如果您的构建过程利用 git ancestry 根据最新标签（使用`git describe`）自动设置版本字符串。

你可以做一个实际的`git merge --no-commit`，而不是樱桃挑选，然后手动调整索引以删除你不想要的任何更改。

假设您在分支上`A`，并且您想在分支的尖端合并提交`B`：

```
git checkout A
git merge --no-commit B 
```

现在您已设置好创建一个包含两个父级的提交，当前的提示提交为`A`和`B`。但是，您可能应用了比您想要的更多的更改，包括 B 分支上早期提交的更改。您需要撤消这些不需要的更改，然后提交。

（可能有一种简单的方法可以将工作目录和索引的状态设置回合并之前的状态，这样您就有了一个干净的状态，可以首先挑选您想要的提交。但是我不知道如何做到这一点。`git checkout HEAD`并且`git reset HEAD`都会删除合并状态，从而违背了此方法的目的。）

所以手动撤消不需要的更改。例如，您可以

```
git revert --no-commit 012ea56 
```

对于每个不需要的提交`012ea56`。

完成调整后，创建提交：

```
git commit -m "Merge in commit 823749a from B which tweaked the timeout code" 
```

现在您只有您想要的更改，并且祖先树显示您在技术上从 B 合并。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2020-12-11T13:15:30.667

如果您已将更改提交到 master 分支。现在您想将相同的提交移动到发布分支。检查提交的提交 ID（例如：xyzabc123）。

现在尝试以下命令

```
git checkout release-branch
git cherry-pick xyzabc123
git push origin release-branch 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-11-28T21:44:10.877

在我的用例中，我们对 CI CD 也有类似的需求。我们将 git flow 与开发和主分支一起使用。开发人员可以自由地直接合并他们的更改以进行开发或通过来自功能分支的拉取请求。然而，为了掌握，我们仅通过 Jenkins 以自动方式合并来自开发分支的稳定提交。

在这种情况下，挑选樱桃不是一个好的选择。但是，我们从 commit-id 创建一个本地分支，然后将该本地分支合并到 master 并执行 mvn clean verify（我们使用 maven）。如果成功，则使用带有 localCheckout=true 选项和 pushChanges=false 的 maven 发布插件将生产版本工件发布到 nexus。最后，当一切都成功时，将更改和标签推送到原点。

示例代码片段：

如果手动完成，假设您在 master 上。但是在 jenkins 上，当您签出 repo 时，您将位于默认分支（如果已配置，则为 master）。

```
git pull  // Just to pull any changes.
git branch local-<commitd-id> <commit-id>  // Create a branch from the given commit-id
git merge local-<commit-id>  // Merge that local branch to master.
mvn clean verify   // Verify if the code is build able
mvn <any args> release:clean release:prepare release:perform // Release artifacts
git push origin/master  // Push the local changes performed above to origin.
git push origin <tag>  // Push the tag to origin 
```

这将使您完全控制无所畏惧的合并或冲突地狱。

如果有更好的选择，请随时提出建议。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-11-30T16:54:53.373

我们将不得不使用`git cherry-pick <commit-number>`

场景：我在一个名为 release 的分支上，我只想添加从 master 分支到 release 分支的少量更改。

第 1 步：签出要添加更改的分支

`git checkout release`

第 2 步：获取您要添加的更改的提交号

例如

```
git cherry-pick 634af7b56ec 
```

第 3 步：`git push`

*注意：每次合并时都会创建一个单独的提交号。不要将提交号用于不起作用的合并。相反，您要添加的任何常规提交的提交号。*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-24T04:47:09.447

我会建议一个答案。也就是通过Export手动更改并提交到目标分支，对于使用像tortoise这样的工具，export确实是一种有效的方式来完成这一点。我知道这在 SVN 中效果很好，到目前为止，在 git 的一些测试中也取得了同样的成功，只要它们 100% 相同，将来合并功能分支时不应该有任何冲突解决。

让我举个例子：
c:/git/MyProject_Master/ModuleA/
c:/git/MyProject_FeatureA/ModuleA/

假设我们希望 ModuleA 的 FeatureA 分支中的所有文件都在 master 分支中。暂时假设这是一个巨大的项目，并且还有其他模块，并且我们从经验中知道 ModuleA 没有任何依赖项，这些依赖项不会因功能分支的新更改而导致编译器或功能问题。选择 ModuleA 文件夹，然后选择 Export from tortoise。然后选择 master 的 ModuleA 将其导出。最后，使用 diff 工具对每个文件进行文件差异检查以查看更改，确保所有调用仍然兼容。确保它编译，彻底测试。承诺，推动。该解决方案对 svn 来说是久经考验且有效的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-21T06:03:16.810

如果你不熟悉cherrypick，可以试试 GitHub 桌面版，当你选择cherry-pick 选项时，GitHub 会要求你选择要推送提交的分支。

## 1)

[![在此处输入图像描述](https://i.stack.imgur.com/wm8cP.png)](https://i.stack.imgur.com/wm8cP.png)

## 2)

[![在此处输入图像描述](https://i.stack.imgur.com/X7tx8.png)](https://i.stack.imgur.com/X7tx8.png)

# c# - 使用 Structuremap Automocking 存根的函数不返回值

> ID：881096
> 
> 赞同：0
> 
> 时间：2009-05-19T05:28:02.097
> 
> 标签：c#, structuremap-automocking

使用 Josh Flanagans [StructureMap Automocking overview](http://www.lostechies.com/blogs/joshuaflanagan/archive/2009/02/03/auto-mocking-explained.aspx?CommentPosted=true#commentmessage)，我正在尝试它，但可以获得以下代码来返回我分配的 Category 对象：

```
 [Test]
    public void Service_Should_Return_Category_From_ID()
    {
        // Arrange
        var categoryToTest = new Category()
            {
                ID = 1,
                Name = "Department 1",
                Description = "Department 1 description"
            };

            var mocks = new RhinoAutoMocker<CatalogueService>();
        mocks.Get<ICatalogueService>().Stub(c => c.GetCategory(1)).Return(categoryToTest);

        // Act
        var categoryResult = mocks.ClassUnderTest.GetCategory(1);

        // Assert
        Assert.IsNotNull(categoryResult);
        Assert.AreEqual(categoryToTest.ID, categoryResult.ID);
    } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T06:15:58.107

我将返回值添加到被测类的接口，而不是被注入的接口。

# sql-server - 同步两个sql server 2005

> ID：881099
> 
> 赞同：0
> 
> 时间：2009-05-19T05:28:26.840
> 
> 标签：sql-server, sql-server-2005, synchronization

我需要在 Intranet 和 Extranet 之间同步两个 sql server 2005 实例（通过防火墙）。同步将从 Intranet 启动。我可以使用哪些解决方案？

内网数据库：表 t1 -> 外网数据库：表 t1

内网数据库：表 t2 <- 外网数据库：表 t2

即，应将 Intranet t1 内容推送到 Extranet t1，并且应从 Extranet t2 获取 Intranet t2 内容。

我们打算每小时同步一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T05:31:37.413

复制、日志传送、备份/恢复、导出/导入。一切看你的要求。

仅基于运输表，我只会使用 SSIS。

# jboss - Jboss 上 JMS 上的 POC

> ID：881109
> 
> 赞同：-1
> 
> 时间：2009-05-19T05:33:20.017
> 
> 标签：jboss, jms, jboss-4.0.x

我正在为 JBoss 4.0.5 GA 上运行 JMS 做 POC。谁能给我一个链接，其中显示了如何

1.  在 Jboss 中创建队列
2.  在 Jboss 建立工厂。
3.  配置

如果以上不适用，Jboss 中是否有默认的 que、topic、factory。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-06T20:48:42.590

[http://www.jboss.org/file-access/default/members/jbossas/freezone/docs/Server_Configuration_Guide/4/html/Messaging_on_JBoss.html](http://www.jboss.org/file-access/default/members/jbossas/freezone/docs/Server_Configuration_Guide/4/html/Messaging_on_JBoss.html)

[http://www.outwardmotion.com/outwardmotion/jmsjboss1.php](http://www.outwardmotion.com/outwardmotion/jmsjboss1.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T14:22:28.127

首先要注意的是 JBoss 4.0.5 默认会运行 JBossMQ（相对于较新的 JBoss Messaging）。您的一些问题的答案取决于您在做什么，即 MDB/EJB3 与否？

请注意，您必须在这些链接的开头添加 http://，Stackoverflow 很蹩脚，不允许我发布链接。

看看这个 URL：www.java2s.com/Code/Java/EJB3/EJBTutorialfromJBossdemoformessagedrivenbean.htm

1.  在示例中 JBoss 加载 MDB 时，将自动为您创建队列
2.  假设您的意思是 JMS 连接工厂，您可以使用以下方式将工厂和目的地注入 EJB3：

    @Resource(mappedName = "queue/notification.EmailSender") 私有 javax.jms.Destination emailSenderQueue;

    @Resource(mappedName = "QueueConnectionFactory") 私有 javax.jms.ConnectionFactory connectionFactory;

3.  这是一个很好的起点：www.jboss.org/file-access/default/members/jbossas/freezone/docs/Server_Configuration_Guide/4/html/Messaging_on_JBoss.html

此外，如果您还没有在 Jboss 4.0.3 中使用 EJB3，请参阅：rwatsh.blogspot.com/2006/12/ejb3-development-using-jboss-405ga.html

# java - 如何在运行时从 jar 文件调用方法

> ID：881113
> 
> 赞同：2
> 
> 时间：2009-05-19T05:35:48.393
> 
> 标签：java

我在特定位置有多个 jar 文件。根据一些计算，我需要加载不同的 jar 文件并在 jar 中调用某个方法。jar 文件包含充当 Web 服务客户端的方法。当我使用反射调用该方法时，它会引发错误 Wrapper class not found。你有没有运行 APT 来生成它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T05:52:09.573

听起来您从 JAR 加载的类使用了不在类路径中的其他类。您可以将它们依赖的库添加到应用程序的系统类路径中，或者将它们列在您正在加载的 JAR 清单文件的 Class-Path 条目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T06:30:14.890

只是检查您根本没有使用`-jar`选项吗？这是互斥的`-classpath`。有关更多说明，请参见[此处](https://stackoverflow.com/questions/250166/250173#250173)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T05:46:12.997

查看[此问题](https://stackoverflow.com/questions/194698/how-to-load-a-jar-file-at-runtime)以获取可能的解决方案。

我不确定为什么当您尝试通过反射调用方法时会出现这样的错误，但是在谷歌上[搜索](http://www.google.nl/search?q=class+not+found.Have+you+run+APT+to+generate+them)了一下这个[论坛帖子](http://markmail.org/message/kbxuixgh7ejg3szp#query:Wrapper%20class%20not%20found.Have%20you%20run%20APT%20to%20generate%20them+page:1+mid:jbgdh2fdt23hr5as+state:results)（以及其他帖子）。

# sqlplus - 如何为 SQLPlus 创建批处理文件？

> ID：881115
> 
> 赞同：1
> 
> 时间：2009-05-19T05:37:21.713
> 
> 标签：sqlplus

我需要创建一个批处理文件，即`batch.bat`.

当我们执行这个文件时：

1.  它将打开 SQLPlus
2.  它将调用一个名为`file1.sql`.

`file1.sql`包含特定用户的创建和插入脚本。

我有`file.sql`，但我需要知道的是，如何创建批处理文件来执行此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T05:47:42.527

一个小测试脚本（存储在名为 的文件中`test.sql`）：

```
select 1 from dual;

exit; 
```

...并执行它：

```
sqlplus user/password @test.sql 
```

# visual-studio - 没有 AddRef() 的 EnvDTE 的 CoCreateInstance？

> ID：881116
> 
> 赞同：1
> 
> 时间：2009-05-19T05:37:23.257
> 
> 标签：visual-studio, com, atl

[这与我问过的另一个问题](https://stackoverflow.com/questions/879575/)有点相关，我已经很清楚了。最后一块拼图是使用 CoCreateInstance() 而不是 GetActiveObject()。我不想使用现有的 EnvDTE 实例，所以我调用 CoCreateInstance，它会正确触发 VisualStudio 的新实例。CoCreateInstance() 调用 AddRef() 并将输出指针存储在 CComPtr 中，它在销毁时正确调用 Release。当这个 Release() 发生时，你瞧，VS 的实例就关闭了！当然会，因为引用计数为零。我想要做的是让新进程拥有最后一个实例，因此当用户使用关闭 (X) 按钮关闭 VS 时，它将破坏 COM 对象。

我尝试了一些事情： 1\. 在我的 CComPtr 上调用 Detach()，这样对象就会继续存在。当然可以，但是，使用关闭按钮关闭 VS 并不会真正终止进程（它仍在任务管理器列表中运行）。2\. 启动一个单独的VS进程，然后使用ROT找到新的实例。这很难看，因为在尝试查找 COM 对象的新实例之前，我必须等待应用程序启动的不确定时间。3\. 使用全局或静态 CComPtr，并在我的应用关闭时手动销毁对象。我宁愿不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T22:47:11.663

因此，对于使用 CoCreateInstance 创建 VisualStudio.DTE 对象的特定情况，我已经弄清楚了这一点。返回的 DTE 对象有一个 UserControl 属性，可以设置为 TRUE。当您将此设置为 TRUE 时，保存 DTE 对象的 CComPtr 的 Release() 不会破坏实例：

```
#define RETURN_ON_FAIL( expression ) \
result = ( expression );    \
if ( FAILED( result ) )     \
    return false;           \
else // To prevent danging else condition

HRESULT result;
CLSID clsid;
CComPtr<IUnknown> punk = NULL;

CComPtr<EnvDTE::_DTE> dte = NULL;
RETURN_ON_FAIL( ::CLSIDFromProgID(L"VisualStudio.DTE", &clsid) );
RETURN_ON_FAIL( ::CoCreateInstance( clsid, NULL, CLSCTX_LOCAL_SERVER, EnvDTE::IID__DTE, (LPVOID*)&punk ) );
dte = punk;
dte->put_UserControl( TRUE ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:47:51.703

查看[WindowClosing 事件](http://msdn.microsoft.com/en-us/library/aa301256(VS.71).aspx)。您可以订阅该事件，并在触发事件时调用 Release()。这将要求您确定要订阅哪些窗口事件。

# c++ - 处理 C++ 类中的惰性计算

> ID：881119
> 
> 赞同：4
> 
> 时间：2009-05-19T05:39:30.743
> 
> 标签：c++, constants, lazy-evaluation, mutable

假设我有一堂课：

```
class NumberCollection
{
public:
    typedef std::set<int> SetType;
    typedef SetType::iterator iterator;
    void insert(int n);

    iterator begin();
    iterator end();
    size_t size() const;

    iterator difficultBegin();
    iterator difficultEnd();
    size_t difficultSize() const;    

private:
    SetType easySet_, difficultSet_;
} 
```

Where`insert()`添加一个元素到`easySet_`. `difficultSet_`的成员根据 的成员而变化`easySet_`。

我遇到的问题是，多次插入意味着`difficultSet_`不断重新计算。所以我想`difficultSet_`被懒惰地计算（即只有当`difficultBegin()`, `difficultEnd()`, or`difficultSize()`被调用时）。问题是，那我其实得把它`difficultSet_`弄成一个`mutable`，否则`difficultSize()`不能对它进行操作。

所以现在我的班级声明看起来像

```
class NumberCollection
{
public:
    typedef std::set<int> SetType;
    typedef SetType::iterator iterator;
    void insert(int n);

    iterator begin();
    iterator end();
    size_t size() const;

    iterator difficultBegin();
    iterator difficultEnd();
    size_t difficultSize() const;    

private:
    SetType easySet_; 
    mutable SetType difficultSet_;
    mutable bool upToDate_;
} 
```

我觉得这是一个糟糕的设计。有没有更好的办法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-19T05:49:45.863

这完全是这样做的。const 可以表示二进制 const，也可以表示概念上的 const。使用 mutable 意味着你正在做后者，这很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T06:12:38.440

为了帮助理解为什么要使用 mutable，我们可以探索其他选项。

*您可以使用const_cast*解决相同的问题：

```
size_t NumberCollection::difficultSize() const
{
     if(!upToDate_)
     {
          NumberCollection& nonConst = const_cast<NumberCollection&>(*this);
          nonConst.difficultSet_ = PerformExpensiveCalculationFunction();
          nonConst.upToDate_ = true;
     }
     // etc....
} 
```

提供了这个解决方案后，我会说它不如使用*mutable*。如果一个成员被标记为*mutable*，那么只需查看标题，我就可以了解您是如何对待它的。*如果您使用const_cast* ，我不会得到此信息。

但是有人可能会站在辩论的另一边，说最好不要在标题中公开实现细节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T05:55:33.673

这本质上是 C++ 具有可变结构的原因。Alan De Smet 关于 mutable 滥用的[咆哮](http://www.highprogrammer.com/alan/rants/mutable.html)表明了不应该使用 mutable 的情况。

在这种情况下，difficultSize() 不会改变 NumberCollection 所代表的内容——它适合标记为 const。它有时需要更改内部结构，这就是为什么您需要将 hardSet_ 和 upToDate_ 标记为可变的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T00:08:35.987

您的解决方案在 C++98 中很好。请注意，在 C++11 中，您应该考虑同步对可变数据的访问。否则，当您的类被 STL 使用时，您可能会遇到问题，STL 假定所有 const 成员函数都是线程安全的。

有关更多详细信息，请参阅[是否 const 意味着 C++11 中的线程安全？](https://stackoverflow.com/questions/14127379/does-const-mean-thread-safe-in-c11?lq=1)

# vb.net - 从 DataGridView 制作数据绑定对象的多个副本 - 如何将它们解耦？

> ID：881121
> 
> 赞同：0
> 
> 时间：2009-05-19T05:40:03.597
> 
> 标签：vb.net, databound

我有一个 DataGridView 对象，我绑定了从数据库查询返回的对象列表（资产类型）。

我正在使用 Visual Studio 2005 在 VB 中编程。

我想从 DataGridView 中的选定行中获取绑定对象的两个副本（称为 oldAsset 和 newAsset），根据表单上其他控件的输入更新 newAsset，并将 oldAsset 和 newAsset 都传递给将更新的函数数据库中的适当记录。

我尝试像这样抓取两个副本：

```
Dim currentRow As DataGridViewRow = Me.AssetDataGridView.CurrentRow
Dim newAsset As Asset
newAsset = currentRow.DataBoundItem
Dim oldAsset As Asset
oldAsset = currentRow.DataBoundItem 
```

在 oldAsset 和 newAsset 上打开监视窗口表明此时已提取了适当的值。但是当我尝试更改 newAsset 的属性时，例如

```
newAsset.CurrentLocationID = cboLocations.SelectedValue 
```

我看到 oldAsset 中的相应值也发生了变化。这不是我想要的，但这显然是我告诉计算机要做的。

我如何告诉计算机做我想做的事？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T20:29:52.273

发现出了什么问题。根本不是数据绑定。

newAsset 和 oldAsset 是浅拷贝。我想要深拷贝。

我实现了 ICloneable，编写了一个 Clone() 函数来进行成员复制，并编写了

```
 Dim oldAsset As Asset
    oldAsset = currentRow.DataBoundItem
    Dim newAsset As Asset = oldAsset.Clone() 
```

# windows - 如何提高视频质量？

> ID：881129
> 
> 赞同：0
> 
> 时间：2009-05-19T05:47:04.697
> 
> 标签：windows, video, media, encoder

我正在使用以下代码片段来录制屏幕，并且在大多数情况下录制的 wmv 文件足够清晰，但对于视频的某些部分，它不是很清晰（某些部分为灰色）。我录制的是全屏模式的ppt。我正在使用 Windows Media 编码器 9。

这是我的代码片段，

```
IWMEncSourceGroup SrcGrp;
IWMEncSourceGroupCollection SrcGrpColl;
SrcGrpColl = encoder.SourceGroupCollection;
SrcGrp = (IWMEncSourceGroup)SrcGrpColl.Add("SG_1");

IWMEncVideoSource2 SrcVid;
IWMEncSource SrcAud;
SrcVid = (IWMEncVideoSource2)SrcGrp.AddSource(WMENC_SOURCE_TYPE.WMENC_VIDEO);
SrcAud = SrcGrp.AddSource(WMENC_SOURCE_TYPE.WMENC_AUDIO);

SrcVid.SetInput("ScreenCap://ScreenCapture1", "", "");
SrcAud.SetInput("Device://Default_Audio_Device", "", "");

// Specify a file object in which to save encoded content.
IWMEncFile File = encoder.File;
string CurrentFileName = Guid.NewGuid().ToString();
File.LocalFileName = CurrentFileName;
CurrentFileName = File.LocalFileName;

// Choose a profile from the collection.
IWMEncProfileCollection ProColl = encoder.ProfileCollection;
IWMEncProfile Pro;
for (int i = 0; i < ProColl.Count; i++)
{
    Pro = ProColl.Item(i);

    if (Pro.Name == "Screen Video/Audio High (CBR)")
    {
        SrcGrp.set_Profile(Pro);
        break;
    }
}
encoder.Start(); 
```

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-18T04:06:38.517

我猜这是您的编码器配置文件或设置的问题，而不是代码的问题。如果您在 WME9 中使用默认的“屏幕视频/音频高 (CBR)”配置文件，它使用 250Kbps 的视频比特率，这是相当低的。我建议在 Windows Media Encoder Profile Editor Utility 中创建一个自定义配置文件。像这样的东西：

## 很棒的sc.prx

> 名称：Awesome Screen Profile
> 
> 音频：WMA 9.2 CBR（32kbps，44kHz，单声道 CBR）
> 
> 视频：WMV 9 屏幕质量 VBR（视频大小与视频输入相同，帧速率 10fps，关键帧间隔 3 秒，视频质量 90）

然后只需更改代码以匹配自定义配置文件的名称。

```
if (Pro.Name == "Awesome Screen Profile") 
```

编码器设置需要更长的时间才能完成，但如果您没有更改它们的默认设置，您应该没问题。

基于质量的 VBR 算法可能非常惊人，并且可能会产生令人惊讶的低平均比特率，但如果 VBR 不能满足您的需求，您可以使用 Windows Media Encoder Profile Editor 实用程序导入**schia.prx**配置文件您正在使用并调整设置以找到更高的 CBR 比特率，从而产生可接受的质量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2011-03-30T10:04:52.643

“屏幕视频/音频媒体 (CBR)”它解决了我的问题

# excel - 检索组件的 COM 类工厂失败

> ID：881132
> 
> 赞同：23
> 
> 时间：2009-05-19T05:47:50.297
> 
> 标签：excel, com

我正在使用 excel 对象（COM 组件）进行 excel 操作。它在我的 PC 上运行良好，但是当我将应用程序部署到我们的 Intranet 时，我收到此错误：

> 由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005

我在我的`web.config`.

我在组件服务中进行了所有设置，但仍然出现相同的错误。

请帮忙

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-08-19T09:43:05.280

I had the same error when I deployed my app. I've got solution from this site: [Component with CLSID XXX failed due to the following error: 80070005 Access is denied](http://tanveeronline.blogspot.com/2012/05/component-with-clsid-xxx-failed-due-to.html)

Here is this solution:

1.  In **DCOMCNFG**, right click on the **My Computer** and select **properties**.

2.  Choose the **COM Securities** tab.

3.  In **Access Permissions**, click **Edit Defaults** and add *Network Service* to it and give it **Allow local access** permission. Do the same for *< Machine_name >\Users*.

4.  In **Launch and Activation Permissions**, click **Edit Defaults** and add *Network Service* to it and give it **Local launch** and **Local Activation** permission. Do the same for *< Machine_name >\Users*.

*I used forms authentication.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-02-11T22:14:23.003

这对我有用：（来自[msdn 论坛](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvb/thread/b6388275-b295-4e55-8c25-6d8788eac1ca/)的解决方案）

> 转到控制面板--> 管理工具--> 组件服务--> 计算机--> myComputer--> DCOM 配置--> Microsoft Excel 应用程序。
> 
> 右键单击以获取属性对话框。转到安全选项卡并相应地自定义权限。

在启动和应用程序权限中，选择自定义、编辑。添加调用应用程序的用户/组。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-07-07T10:08:26.180

如果您将**Windows 2008 Server**与**IIS7**一起使用，您可能还需要解决一个问题。服务器可能会报告以下错误：

*Microsoft Office Excel 无法访问文件“c:\temp\test.xls”。有几个可能的原因：*

*   *文件名或路径不存在。*
*   *该文件正被另一个程序使用。*
*   *您尝试保存的工作簿与当前打开的工作簿同名。*

解决方案发布在这里（查找用户 Ogawa 发布的文本）：[http ://social.msdn.microsoft.com/Forums/en-US/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91?prof=必需的](http://social.msdn.microsoft.com/Forums/en-US/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91?prof=required)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-03-02T10:45:27.643

`EXCEL.EXE`当系统中有过时的进程时，您也会收到此错误（使用`Task Manager --> Processes`选项卡查看这些。）

杀死所有这些实例，应用程序将正常工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-29T22:01:56.243

如果它对某人有帮助：

我正在运行 Windows 7 64 位，我想注册一个 32 位 dll。

首先我尝试： regsvr32 并得到以下错误：

System.Runtime.InteropServices.COMException (0x80040154)：检索具有 CLSID {A1D59B81-C868-4F66-B58F-AC94A4A7982E} 的组件的 COM 类工厂失败，原因是以下错误：80040154。

然后我尝试通过组件服务 (Run->DCCOMCNFG) ( [http://www.justskins.com/forums/difference-registering-dll-using-regsvr32-and-component-services-17280.html](http://www.justskins.com/forums/difference-registering-dll-using-regsvr32-and-component-services-17280.html) )添加应用程序并得到以下错误：

System.UnauthorizedAccessException：检索具有 CLSID {A1D59B81-C868-4F66-B58F-AC94A4A7982E} 的组件的 COM 类工厂失败，原因是以下错误：80070005。

有很多链接可以解决它，但对我有用的是：控制台根目录 -> 组件服务 -> 计算机 -> 我的电脑 -> COM+ 应用程序 -> *your_application_name* -> 属性：安全选项卡：授权：取消选中“对此强制执行访问检查”应用'。

我不知道它有什么作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-01T01:04:41.187

对于 IIS 8，我做了与 Monic 基本相同的事情。我在 x64 机器上将我的应用程序作为自己的应用程序池运行 1.在 DCOMCNFG 中，右键单击我的电脑并选择属性。

2.选择 COM 证券选项卡。

3.在访问权限中，单击编辑默认值并添加 iis apppool\myapp 并赋予它允许本地访问权限。对 iis apppool\myapp 执行相同操作

4.在启动和激活权限中，单击编辑默认值并将iis apppool\myapp添加到它并赋予它本地启动和本地激活权限。对 iis apppool\myapp 执行相同的操作。

另外，我必须创建 C:\Windows\SysWOW64\config\systemprofile\Desktop 下概述的文件夹，并为 iis apppool\myapp 提供读\写权限

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-02T17:39:59.833

您描述的 CLSID 用于 Microsoft.Office.Interop.Excel.ApplicationClass。这个类基本上是通过 InprocServer32 启动 excel.exe。如果您没有安装它，那么它将返回您在上面收到的错误消息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-04T06:43:03.470

我在 IIS 8.5 (Windows Server 2012 R2)Server 中完成了以下操作，并且它在我的情况下无需重新启动即可工作：

1.  在 IIS 中选择连接到应用程序的应用程序池

2.  然后右键-->高级设置-->进程模型-->选择**本地系统**而不是推荐的**ApplicationPoolIdentity**

3.  并确保 C:\Windows\SysWOW64\config\systemprofile\desktop 对用户有足够的访问权限。

4.  刷新与此池连接的网站链接

[![在此处输入图像描述](https://i.stack.imgur.com/bAcQm.png)](https://i.stack.imgur.com/bAcQm.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-23T12:21:44.763

我能理解你的痛苦。在我的情况下，通过执行以下步骤解决了错误：

1.  开始 > 运行 > dcomcnfg。
2.  打开文件夹 DCOM Config 并选择 Component Services > Computers > My Computer > DCOM Config。
3.  选择“Microsoft Office Word 97 – 2003 文档”/“Microsoft Excel 应用程序”并转到其属性。
4.  在“安全”选项卡中设置“启动和激活权限”需要自定义（授权用户）。
5.  现在转到 IIS 并选择 Web 的应用程序池，然后转到其高级设置并选择“网络服务”作为身份用户。

希望这可以帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-03T14:07:18.443

尝试从 Act 导出 csv 文件时，我遇到了同样的错误！脱颖而出。我发现的一种解决方法是运行 Act！作为管理员。

这告诉我这可能是某种许可问题，但这里以前的答案都没有解决这个问题。我尝试运行 DCOMCNFG 并更改整台计算机的权限，我还尝试仅更改 Excel 组件的权限，但它未在我的 Windows 10 Pro PC 上的 DCOMCNFG 中列出。

也许这种解决方法会帮助某人，直到找到更好的解决方案。

# c# - 在 C# 中动态创建一个数组

> ID：881133
> 
> 赞同：7
> 
> 时间：2009-05-19T05:47:59.687
> 
> 标签：c#

如何在 C# 中动态创建数组？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-19T05:56:26.620

我想在 Natrium 的回答中添加通用集合也支持这个 .ToArray() 方法。

```
List<string> stringList = new List<string>();
stringList.Add("1");
stringList.Add("2");
stringList.Add("3");
string[] stringArray = stringList.ToArray(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-19T05:50:36.627

首先制作一个arraylist。添加/删除项目。进而`ArrayList.ToArray()`

还有你的阵列！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T06:52:47.927

好的，所以数组初始化*每次都*让我受益。所以我花了 10 分钟来做这件事。

```
 static void Main(string[] args)
    {
        String[] as1 = new String[] { "Static", "with", "initializer" };
        ShowArray("as1", as1);

        String[] as2 = new String[5];
        as2[0] = "Static";
        as2[2] = "with";
        as2[3] = "initial";
        as2[4] = "size";
        ShowArray("as2", as2);

        ArrayList al3 = new ArrayList();
        al3.Add("Dynamic");
        al3.Add("using");
        al3.Add("ArrayList");
        //wow! this is harder than it should be
        String[] as3 = (String[])al3.ToArray(typeof(string));
        ShowArray("as3", as3);

        List<string> gl4 = new List<string>();
        gl4.Add("Dynamic");
        gl4.Add("using");
        gl4.Add("generic");
        gl4.Add("list");
        //ahhhhhh generic lubberlyness :)
        String[] as4 = gl4.ToArray();   
        ShowArray("as4", as4);
    }

    private static void ShowArray(string msg, string[] x)
    {
        Console.WriteLine(msg);
        for(int i=0;i<x.Length;i++)
        {
            Console.WriteLine("item({0})={1}",i,x[i]);
        }
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-19T05:55:22.097

```
object foo = Array.CreateInstance(typeof(byte), length); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T06:10:48.567

您也可以`new`像使用其他对象类型一样使用运算符：

```
int[] array = new int[5]; 
```

或者，使用变量：

```
int[] array = new int[someLength]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-19T06:18:42.253

使用泛型 List 或 ArrayList。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-02-15T18:30:12.397

```
int[] array = { 1, 2, 3, 4, 5};

for (int i=0;i<=array.Length-1 ;i++ ) {
  Console.WriteLine(array[i]);
} 
```

# javascript - 确定嵌入的 html 对象的高度

> ID：881138
> 
> 赞同：0
> 
> 时间：2009-05-19T05:51:10.137
> 
> 标签：javascript

两个问题......我想使用对象标签嵌入一个使用外部样式表的html文件......但是，我尝试过的没有任何工作。第一个问题是怎么做？...注意：样式表链接到两个文档。

第二个问题是如何确定和设置对象的height属性，从而消除滚动条...

对象标签位于以下 DIV ...

在 IE8 中，我简单地调用 "ScrollHeightValue('SF_010A','SF_010B')" ... 这是对象标签的 id 和嵌入文档的正文。

```
function ScrollHeightValue(a, b) {
    var testObject1 = document.getElementById(a);
    var testObject = testObject1.getElementById(b);
    testObject1.style.height = testObject.scrollHeight + 'px';
} 
```

因此，第二个问题确实是......我如何为非 IE 浏览器执行此操作？

我是一个新手......也许我没有正确地问问题......只是想知道锄头来确定对象的高度，以便对象的内容是可见的......没有滚动条。

谢谢，

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T09:26:28.793

第一个问题的答案：要将外部 HTML 文件嵌入到您的页面中，请使用 iframe，而不是“对象”。

对第二个问题的回答：要获取 DOM 元素的总高度，请使用它的 scrollHeight 属性。但是，据报道，对于 IE 8，此属性偏离了 5px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T05:56:35.043

试试[https://developer.mozilla.org/en/DOM/window.getComputedStyle](https://developer.mozilla.org/en/DOM/window.getComputedStyle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T08:23:53.413

如果要将 HTML 文档嵌入到另一个文档中，则必须使用.`iframe`而不是`object`.

# c# - EF的内存消耗

> ID：881140
> 
> 赞同：2
> 
> 时间：2009-05-19T05:51:52.990
> 
> 标签：c#, .net, entity-framework, .net-3.5

早上好！

实际上我正在玩 EF atm 一点点，我需要你们的帮助：
以下场景：我有一张表，里面有很多数据。如果我通过 EF 查询此表，所有记录都会加载到内存中。

例如。

```
var counter = default(int);
using (var myEntities = new MyEntities())
{
    foreach (var record in myEntities.MySpecialTable)
    {
        counter++;
    }
} 
```

所以，我遍历了 MySpecialTable 的所有记录并计数`counter`。当我查看任务管理器或任何其他显示我的应用程序内存消耗的东西时，它告诉我：400Mb。（因为数据）
如果我再次运行表，内存消耗将增加一倍。

我已经尝试调用 GC，但它不起作用。

为什么每次运行的所有记录都存储在内存中的某个位置（并且没有被释放）？它们存储在哪里？有没有办法让 EF 查询表现得像 DataReader？或者还有其他像 EF 一样优雅的 ORM 吗？

**编辑：**
不，我没有做那样的计数......这只是为了显示迭代:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:35:50.470

首先，我希望您实际上并没有像那样进行计数；Count 方法效率更高。但假设这只是演示内存问题的演示代码：

[将 ObjectQuery 的 MergeOption 属性更改为 NoTracking](http://blogs.msdn.com/adonet/archive/2008/02/11/exploring-the-performance-of-the-ado-net-entity-framework-part-2.aspx)。这告诉实体框架您无意修改实体，因此它不必费心跟踪它们的原始状态。

# c# - 如何为 VS2005 创建插件？

> ID：881141
> 
> 赞同：1
> 
> 时间：2009-05-19T05:52:04.130
> 
> 标签：c#, visual-studio

我想将我在 VS2005 中使用 C# 开发的窗口应用程序转换为 Visual Studio 2005 的插件。我该怎么做。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T07:48:24.390

这里有一个很好的快速入门教程：http: [//www.codeproject.com/KB/macros/LineCounterAddin.aspx](http://www.codeproject.com/KB/macros/LineCounterAddin.aspx)

这对我来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T07:39:09.303

您可以尝试查看[MSDN](http://msdn.microsoft.com/en-us/vsx/default.aspx)或[书籍](https://rads.stackoverflow.com/amzn/click/com/0470230843)，但您可能会发现隐藏在 VS2008 内容后面的 VS2005 信息...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T07:54:50.977

我想自己创建一个，但我还没有时间处理所需的信息：

*   [“我如何能？” Visual Studio 可扩展性视频](http://msdn.microsoft.com/en-gb/vsx/bb507746.aspx)
*   从头开始详细介绍扩展视觉工作室的文章系列： [LearnVSXNow！](http://www.codeplex.com/LearnVSXNow/Wiki/View.aspx?title=LearnVSXNowOld&referringTitle=Home)
*   Microsoft 的[VSX 主页代码库](http://code.msdn.microsoft.com/vsx)
*   [构建自己的 Visual Studio Source Code Outliner 扩展](http://blogs.msdn.com/quanto/archive/2008/01/22/building-your-own-visual-studio-source-code-outliner-extension.aspx)（以及 Quan 的整个博客）

总的来说，我建议等待 Visual Studio 2010（或开始使用[新的 beta 1](http://blogs.msdn.com/mikeormond/archive/2009/05/18/visual-studio-2010-beta-1-available-today-to-msdn-subscribers.aspx)），因为扩展 Visual Studio 会有很多变化和更多可能性。（想想 WPF。）我链接的代码库已经包含与此相关的内容。

# plot - 三次样条外推

> ID：881143
> 
> 赞同：6
> 
> 时间：2009-05-19T05:52:20.930
> 
> 标签：plot, interpolation, spline, graphing, extrapolation

我有一个很好的三次样条代码，但它仅用于插值。我需要对未来进行一点[推断。](http://en.wikipedia.org/wiki/Extrapolation)有谁知道这样做的好代码源，而不是库？

[这是](http://www.coastrd.com/basic-cubic-spline-interpolation)我在基本（现在是 ASM）中编写的用于插值的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T06:19:22.130

你不需要新的代码。

要外推样条曲线，您可以**外推**第一个和最后一个样条曲线的参数。

根据您现有的代码/库，如果不修改代码可能无法实现。在这种情况下，只需将**另外两个点**添加到点列表的开头/结尾即可。您可以通过在第一个/最后两个点之间进行线性插值来获得这两个点。

**注意：**根据点的原始含义，外推可能完全不合适，尤其是在涉及统计数据时。在这种情况下，您应该考虑使用[回归分析](http://en.wikipedia.org/wiki/Regression_analysis)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-06-22T03:32:34.223

为简单起见，我将三次贝塞尔曲线表示为 4 个点（A、B、C、D），其中 A 和 D 是曲线的端点，B 和 C 是“控制手柄点”。（实际曲线通常不*接触*控制手柄点）。

请参阅[“Don Lancaster's Guru's Lair Cubic Spline Library”](http://www.tinaja.com/cubic01.asp) 了解如何将这种三次贝塞尔曲线表示转换为其他流行表示。

**插值**

给定一条三次贝塞尔曲线（P0、P1、P2、P3），我们使用[De Casteljau 算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm) 将贝塞尔曲线分成左半部分和右半部分。即使在没有“乘法”指令的微控制器上，这也非常容易，因为它只需要计算几个平均值，直到我们得到一个中点：

```
P0
   F0 := average(P0, P1)
P1                       S0 := average(F0, F1)
   F1 := average(P1, P2)         Midpoint := average(S0, S1)
P2                       S1 := average(F1, F2)
   F2 := average(P2, P3)
P3 
```

整个贝塞尔曲线是 (P0, P1, P2, P3)。

整个贝塞尔曲线的左半部分是贝塞尔曲线（P0、F0、S0、M）。

整个贝塞尔曲线的右半部分是贝塞尔曲线（M、S1、F2、P3）。

许多微控制器继续将每条曲线分成越来越小的小曲线，直到每条曲线小到可以近似为一条直线。

但我们想走另一条路——外推到更大的曲线。

**外推**

给定左半部分或右半部分，我们可以反向运行以恢复原始曲线。

假设我们忘记了原始点 P1、P2、P3。

给定贝塞尔曲线的左半部分（P0，F0，S0，M），我们可以向右外推：

```
S1 := M + (M - S0)
F1 := S0 + (S0 - F0)
P1 := F0 + (F0 - P0) 
```

然后使用这些值来计算

```
F2 := S1 + (S1 - F1)
P2 := F1 + (F1 - P1) 
```

最后

```
P3 := F2 + (F2 - P2) 
```

外推并恢复外推的 Bazier 曲线（P0、P1、P2、P3）。

**细节**

外推曲线 (P0, P1, P2, P3) 穿过原始曲线 (P0, F0, S0, M) 中的每个点 - 特别是从 P0 开始并穿过中点 M - 并一直持续到它达到P3。

我们总是可以从任何 4 个点（P0、F0、S0、M）进行推断，无论这 4 个点最初是否计算为某个较大贝塞尔样条的左半部分（或右半部分）。

我相信您已经知道这一点，但只是为了清楚起见：

```
Midpoint = average(F0, F1) 
```

意思是“找到点 F0 和 F1 之间的中点”，或者换句话说，

```
Midpoint.x = (F0.x + F1.x)/2
Midpoint.y = (F0.y + F1.y)/2
Midpoint.z = (F0.z + F1.z)/2 
```

表达方式

```
S1 := M + (M - S0) 
```

意思是“给定一条线段，一端在 S0，中点在 M，从 S0 开始并沿直线经过 M，直到在 S1 到达另一端”，或者换句话说（除非你有一个像样的向量库）3行代码

```
S1.x := M.x + (M.x - S0.x)
S1.y := M.y + (M.y - S0.y)
S1.z := M.z + (M.z - S0.z) 
```

. （如果你在做 2D，跳过所有“z”的东西——它总是零）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T06:17:27.280

你真的需要稍微扩展一下这个问题。此外，“三次样条”是一个非常广泛的术语。

如果您对样条线感兴趣，我可以衷心推荐 Carl de Boors 的“样条线实用指南”。然而，它有点数学导向，但包含代码示例（可以从作者的主页下载）。谷歌搜索和维基搜索“三次样条”可以提出一些例子，甚至可能是特定语言 - 另一件事要添加到问题中（如果您正在寻找代码）。

如果您对外推和曲线拟合感兴趣，谷歌搜索可能会有所帮助。Matlab 包有一个非常好的曲线拟合工具箱。维基百科有一些有用参考的链接

真的，这是一个太宽泛的问题，甚至无法开始猜测答案。

另外，你能解释一下你到底想做什么吗？什么样的数据？任何事物 ？

* * *

Edit1：在这里，试试这个：你可能会在这里找到有用的东西 -[链接](http://zunzun.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T06:18:31.193

通常对于样条插值，您使用变量 t 在线上进行插值。只要 0 <= t <= 1 你在插值。但是，当 t < 0 或 t > 1 时，您只是在外推样条曲线。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T06:33:23.497

您需要为请求的代码编写更好的要求。样条通常用于通过使用一些固定数据集对一些未知或复杂函数进行插值。如果你想在这个数据集的边界之外估计函数的值，那么你不应该使用样条。

如果您的样条是在您真正想要评估您的值（三次，但不是分段三次）的地方定义的函数，那么您已经可以评估该值。

如果您希望能够在插值范围之外评估样条曲线，但将其保留为在插值范围内具有相同值的分段三次函数，那么您应该通过一些节点扩展样条曲线范围，并在新节点（例如，您希望样条曲线不仅是连续函数，而且还有一些一阶导数也是连续函数）

真的，我建议您使用一些更适合外推的算法，例如使用[拉格朗日多项式](http://en.wikipedia.org/wiki/Lagrange_interpolation)，如果您真正需要的一切都是离原始数据集点不远的单个值。

# jquery - 如果表单字段没有被修改，如何在 jQuery 中禁用提交按钮？

> ID：881144
> 
> 赞同：2
> 
> 时间：2009-05-19T05:52:27.280
> 
> 标签：jquery, html, forms, form-submit

我有一个包含文本字段、复选框、单选按钮和提交按钮的 HTML 表单。

我希望仅在修改字段内容时启用提交按钮。现在要注意了：*如果用户将字段内容修改回原始值，则应再次禁用表单按钮。*

1.  原始字段值“foo”=> 提交按钮被禁用
2.  用户将字段值更改为“栏”=> 提交按钮变为启用状态
3.  用户将字段值更改回“foo” => 提交按钮再次被禁用

如何用[jQuery](http://jquery.com/)实现这一点？是否有任何通用解决方案或脚本可以用于任何形式？

编辑：我的要求不能通过简单的脏状态跟踪来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T06:00:19.500

使用脏状态跟踪。为每个输入控件附加一个布尔值（例如 IsDirty），并在值更改时切换它。在提交表单时检查是否至少一个或多个值发生了变化，然后提交表单。否则向用户显示警报。

另一种解决方案是在控件值更改时调用通用函数。在此函数中，如果发生更改，您可以将全局变量 (IsDirty) 设置为 true，还可以启用/禁用提交按钮。

```
var isDirty = false;

function SomethingChanged(){
     if( !isDirty ) isDirty = true;
     btnSubmit.disabled = !isDirty;
} 
```

任何控件的通用函数

假设：将每个控件的初始值添加到属性“InitVal”

```
function SomethingChanged(control){
     if( control.value != control.InitVal )
          control.IsDirty = true;
     else
          control.IsDirty = false;
} 
```

在上面的函数中，为了使其通用，您可以为每种类型的控件设置单独的函数，例如 TextBoxChanged 和 DropDownChanged 等。但是每个控件都有以下两个属性

1.  InitValue - 控件的初始值
2.  IsDirty - 指示控件值已更改的布尔值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T09:44:24.983

只需两步：

1.  将所有初始值的散列存储在 javascript 变量中
2.  每个输入的 onchange 都会重新计算该散列并使用存储的散列对其进行验证。如果相同，禁用提交按钮，如果不是，启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T06:01:38.360

看看[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-28T13:39:57.870

这似乎是一个更好的答案。

[1401-使用-jQuery-To-Leverage-The-OnChange-Method-Of-Inputs.htm](http://www.bennadel.com/blog/1401-Using-jQuery-To-Leverage-The-OnChange-Method-Of-Inputs.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-21T22:35:41.490

我还没有测试过下面的内容:-) 但这是你的意思吗？

```
$(document).ready(function() {
    $("#myform :input").attr("init",$(this).val()).bind("change.dirty", function(evt) {
        if ($(this).val()!=$(this).attr("init")) $(this).addClass("dirty");
        else $(this).removeClass("dirty");
        $('#thebutton').attr("disabled",!$("#myform .dirty").size());
    });
}); 
```

*-派克

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-25T16:00:08.880

应该可以保存整个表单对象（按原样保存，或者通过迭代 .each() 并将数据存储在地图中），然后执行相同的 onSubmit 并比较两个值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-14T07:23:51.237

您可以改用[dirtyField](http://www.thoughtdelimited.org/dirtyFields/documentation.cfm)插件并设置denoteDirtyForm: true。现在，如果您的表单具有“dirtyForm”类，则意味着您有未保存的更改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-10T14:23:24.177

您可以做的是设置一个 jquery 脚本以在页面加载时扫描页面并检查表单，清点字段及其值，然后在更新输入时检查该输入引用数组。

# javascript - processing.js 加载外部文件

> ID：881146
> 
> 赞同：2
> 
> 时间：2009-05-19T05:54:10.337
> 
> 标签：javascript, processing.js

我想将我的 processing.js 代码拆分为几个文件，但我不确定如何。我试着做

```
<script type="application/processing" src="main.pjs"> 
```

加载我的 processing.js 文件“main.pjs”，但它没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-20T19:36:40.930

我知道这已经得到了回答，但我想我会添加更多解释：

您最初方法的问题是浏览器不知道如何处理“应用程序/处理”类型的文件，因此它甚至从未从服务器中提取。TML 发布的 init() 包会查找这些并通过 XHR 提取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T06:34:13.090

试试[http://www.hyper-metrix.com/misc/Processing.AJAX.init.zip](http://www.hyper-metrix.com/misc/Processing.AJAX.init.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T06:35:13.917

您可以在 JS 中使用画布和源字符串初始化处理。

处理（画布，源字符串）

该字符串可能来自当前文件之外的任何地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-13T23:41:19.457

Processing.js 可以像这样从外部文件运行代码......

```
<script src="processing.js"></script>
<canvas datasrc="yourSketch.pjs" width="200" height="200"></canvas> 
```

# web-services - 是否可以跟踪使用代理网站的用户？

> ID：881155
> 
> 赞同：1
> 
> 时间：2009-05-19T05:56:43.780
> 
> 标签：web-services, proxy

是否可以跟踪使用代理网站的用户 IP 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T06:04:02.243

一些代理服务器向代理请求添加[X-Forwarded-For标头。](http://en.wikipedia.org/wiki/X-Forwarded-For)

不要期望它总是存在，它甚至可能包含错误和/或无效信息，因此它不是 100% 可靠的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T06:20:47.573

是的，您所要求的**代理网站**是可能的（像 anonymizer.com 这样的网站）

代理网关是不可能的，因为代理会拦截所有客户端请求，然后依次转发，因此设计上您无法确定发起者的 IP。这就是其他回应所暗示的。

但是，代理网站的工作方式是将表单的所有链接转换`resource.aspx`为 `proxy.com?resource.aspx`. 这意味着如果您有**AJAX 请求**，您可以跳过代理并让客户端通过获取客户端 IP 将请求直接转发到那里的服务器。您还可以使用**Adob​​e Flash**直接与客户端通信并绕过网站代理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T06:04:09.870

有时代理会添加 Header: X-Forwarded-For，但这充其量只是零星的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T06:01:08.063

否定的。没有。没有发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T06:20:45.670

除了`HTTP_VIA`, `HTTP_FORWARDED`,之外，如果或包含单词“via”、“squid”、“proxy”、“cache”或“delegate”，`HTTP_X_FORWARDED_FOR`则可以进行额外的猜测 。匿名代理可能会隐藏这些东西。`REMOTE_HOST``HTTP_USER_AGENT`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T11:52:38.710

将 X-Forwarded-For 标头用于代理请求。

# git - 是否有从 CVS 到 Git 的迁移工具？

> ID：881158
> 
> 赞同：63
> 
> 时间：2009-05-19T05:58:50.157
> 
> 标签：git, version-control, migration, cvs

我打算从 CVS 切换到 Git。在 SVN 的情况下，似乎有`cvs2svn`. 是否有类似的工具可以轻松地从 CVS 迁移到 Git？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-19T21:37:15.163

唯一具有**增量**导入的工具似乎是[git-cvsimport](http://www.kernel.org/pub/software/scm/git/docs/git-cvsimport.html "git-cvsimport(1) 手册页")。如果你想从 CVS 转换（**迁移**）到 Git，目前最好的解决方案似乎是上面提到[的 cvs2svn 的 cvs2git 模式](http://cvs2svn.tigris.org/cvs2git.html "cvs2svn: cvs2git 文档")。

另请参阅Git wiki 上的[Interfaces Frontends And Tools](https://git.wiki.kernel.org/index.php/Interfaces,_frontends,_and_tools)页面，有关与其他修订控制系统交互的部分。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-16T15:52:34.083

# cvs2git

除了提供的答案之外，这里还有一个关于如何使用 cvs2git 工具将 cvs 转换为 git 的指南。这里，modulename 是您要导入的 CVS 目录的名称。

**先决条件**

`cvs2svn`包（包括 cvs2git 命令）应该已经安装。

**更新：**第 1 步和第 2 步并不完全正确 - 在尝试之前，请阅读 cvs2git 的维护者 mhagger 下面的评论

1.  结帐模块名称

    ```
    cvs -d URL co -P modulename 
    ```

2.  创建 cvs2git 所需的空 CVSROOT

    ```
    mkdir modulename/CVSROOT 
    ```

3.  [在http://cvs2svn.tigris.org/svn/cvs2svn/trunk/cvs2git-example.options](http://cvs2svn.tigris.org/svn/cvs2svn/trunk/cvs2git-example.options)下载 cvs2git.options 示例（用户“guest”没有密码）

4.  编辑 cvs2git.options 文件。将 r'test-data/main-cvsrepos' 替换为 'modulename'。编辑作者转换。

    ```
    # edit this
    run_options.set_project(  r'modulename',

    # and this
    author_transforms={
        'jrandom' : ('J. Random', 'jrandom@example.com'),
        'mhagger' : 'Michael Haggerty <mhagger@alum.mit.edu>', 
    ```

5.  运行 cvs2git 创建 git 临时文件

    ```
    cvs2git  --options=cvs2git.options --fallback-encoding utf-8 
    ```

6.  创建 git 仓库

    ```
    mkdir gitrepo && cd gitrepo && git init . 
    ```

7.  从 cvs2git 创建的 git 临时文件导入

    ```
    cat ../cvs2git-tmp/git-{blob,dump}.dat | git fast-import 
    ```

8.  结帐工作副本

    ```
    git reset --hard 
    ```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-19T06:01:48.297

cvs2svn 有一个[cvs2git](http://cvs2svn.tigris.org/cvs2git.html)模式。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-07-21T02:01:41.420

如果有人仍然不幸使用 CVS，您可以尝试“废话”：[https](https://github.com/rcls/crap) ://github.com/rcls/crap 它很快（只要访问 CVS 可以很快），支持您在 cvs repos 中找到的混乱和增量。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-19T07:13:14.087

另一种可能是使用[git cvsimport *](http://www.kernel.org/pub/software/scm/git/docs/gitcvs-migration.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-19T06:08:56.807

我自己没有尝试过，但朋友们报告说，首先从 CVS 转换为 SVN，然后从 SVN 转换为 Git，取得了很好的成功。与直接从 CVS 到 Git 的转换相比，进行这些相应转换的工具似乎已经被彻底淘汰了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-09T18:23:35.447

我试过 cvs2git、git-cvsimport 和 parsecvs。

cvs2git 有时（据我记得）会为标签创建虚假分支。

git-cvsimport 不支持变更集的多个标签。但是，可以为 cvsps 获取一些额外的更改以支持它并将原始 git-cvsimport 更改为使用更新的 cvsps 的东西（我已经尝试过，它似乎可以工作）。在优势方面，它支持增量更新并具有一些正确导入合并的逻辑（但它需要适当的提交消息格式）。

parsecvs 到目前为止给了我最好的结果。不幸的是，网络上可用的代码不能用最新的 git 干净地编译。这种改变虽然不是微不足道的，但也是可行的。

编辑：看起来[ESR](http://www.catb.org/~esr/)接管了[cvsps](http://gitorious.org/cvsps/cvsps)和[parsecvs](https://github.com/BartMassey/parsecvs)，所以对 CVS->GIT 迁移有一些希望。但他已经在一些邮件列表中提到，他可能会宣布他最近接管的一些工具正式死亡。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-09-12T10:35:36.987

我阅读了 Vanuan 的答案和 mhagger 的评论。不幸的是，mhagger 没有发布如何使用`cvs2git`. 这里写得很好：[http ://www.mcs.anl.gov/~jacob/cvs2svn/cvs2git.html](http://www.mcs.anl.gov/~jacob/cvs2svn/cvs2git.html)

我使用`cvs2git`而不是`git-cvsimport`因为文档`git-cvsimport`建议使用它来避免以下问题`git-cvsimport`：[https ://www.kernel.org/pub/software/scm/git/docs/git-cvsimport.html#issues](https://www.kernel.org/pub/software/scm/git/docs/git-cvsimport.html#issues)

它遵循它的本质，它对我有用，可以从 Debian Sid 上的 sourceforge CVS 存储库创建一个 git 存储库：

```
$ apt-get install cvs2svn cvs
$ mkdir project.cvs
$ rsync -av rsync://${PROJECT}.cvs.sourceforge.net/cvsroot/${PROJECT}/ project.cvs
$ cvs2git --blobfile=git-blob.dat --dumpfile=git-dump.dat --username=cvs2git project.cvs
$ mkdir project.git
$ cd project.git
$ git init
$ cat ../git-blob.dat ../git-dump.dat | git fast-import 
```

该`rsync`步骤是必需的，因为`cvs2git`需要访问整个历史记录。一个简单的结帐是不够的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-13T19:09:34.433

我是 cvs-fast-export 的维护者。我曾经维护 cvsps 和 parse2cvs，并仔细评估了 cvs-fastimport 和 cvs2git。

CVS 到 git 的转换对于 rebarbative 边缘情况来说是一个棘手的、令人讨厌的问题。所有现有的转换工具都有已知的局限性，有些相当严重。

我建议先尝试 cvs-fast-export。它比其他任何东西都能产生更好、更快的转换，除非在极少数情况下它完全失败并退出。如果您遇到罕见但可怕的“分支循环错误”，请尝试 cvs2git。

不要相信 cvs-fastimport，它有很多 bug，而且经常搞砸分支连接。

有关更多信息，请参阅[http://www.catb.org/esr/cvs-fast-export/](http://www.catb.org/esr/cvs-fast-export/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-25T12:08:11.327

您可以将[fromcvs](http://ww2.fs.ei.tum.de/~corecode/hg/fromcvs)添加到列表中。它转换得很好，速度非常快，而且是增量的。但是，它不做粘性标签，只做分支。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-18T22:51:32.927

您可以使用`git cvsimport`. 它需要`cvsps`安装，但您需要安装 2.x，因为 3.x不再[不兼容](https://stackoverflow.com/q/9609943/55075)。

然后在空 git 上导入 CVS 存储库。示例用法：

```
git cvsimport -C RepoName -r cvs -o master -k -v -d:pserver:anonymous@reponame.cvs.sourceforge.net:/cvsroot/path ModuleName 
```

* * *

在 OSX 上，您`cvsps-2.1`按以下方式安装（具有`brew`）：

```
brew tap homebrew/versions
brew install cvsps2
brew link  cvsps2 
```

* * *

您还可以使用[`cvs2git`](http://cvs2svn.tigris.org/cvs2git.html)可以将 CVS 存储库转换为 git 的工具。但是，您需要有权访问 CVSROOT 目录。

查看[cvs2git 文档](http://cvs2svn.tigris.org/cvs2git.html)了解安装步骤。

示例用法：

```
cvs2git --blobfile=git-blob.dat --dumpfile=git-dump.dat --username=cvs2git /path/to/cvs/repo 
```

这将创建两个 git 快速导入格式的输出文件。这些文件的名称由您的选项文件或命令行参数指定。在示例中，这些文件被命名`cvs2git-tmp/git-blob.dat`为`cvs2git-tmp/git-dump.dat`.

这些文件可以通过以下方式导入到空的 git 存储库中：

```
cat git-blob.dat git-dump.dat | git fast-import 
```

然后删除`TAG.FIXUP`分支并运行`gitk --all`查看转换结果。

通过运行检查更多信息：`cvs2git --help`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-14T01:43:13.310

我发现[cvs-fast-export](https://gitlab.com/esr/cvs-fast-export)做得很好。我必须自己下载并编译它，但这样做没有任何重大问题。

# python - 如何抑制python 2中的回车？

> ID：881160
> 
> 赞同：2
> 
> 时间：2009-05-19T05:59:39.937
> 
> 标签：python, io

```
 myfile = open("wrsu"+str(i)+'_'+str(j)+'_'+str(TimesToExec)+".txt",'w')
        sys.stdout = myfile
        p1 = subprocess.Popen([pathname,"r", "s","u",str(i),str(j),str(runTime)],stdout=subprocess.PIPE)
        output = p1.communicate()[0]
        print output, 
```

当我使用它来将 exe 的输出重定向到我自己的文件时，它总是

每行后有一个回车，如何抑制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T06:08:30.300

这是我删除回车的方法：

```
 p = Popen([vmrun_cmd, list_arg], stdout=PIPE).communicate()[0]
 for line in p.splitlines():
 if line.strip():
     print line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T06:25:12.183

```
def Popenstrip(self):
  p = Popen([vmrun_cmd, list_arg], stdout=PIPE).communicate()[0]
  return (line for line in p.splitlines() if line.strip()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-02-27T01:44:35.990

```
print line.rstrip('\r\n') 
```

会做得很好。

# web-services - 企业网站搜索

> ID：881162
> 
> 赞同：2
> 
> 时间：2009-05-19T06:01:04.257
> 
> 标签：web-services, search, web, full-text-search

在基本密码保护方案后面有一个小型的、对 SEO 友好的公司网站，我想通过使用一种现成的解决方案来添加一个基本的搜索工具。（我不介意谷歌或雅虎拥有该网站的内容，只要它不泄露到网络上）。

[谷歌似乎不支持](http://www.google.com/support/customsearch/bin/answer.py?answer=72365)这一点，所以我想向 SO 社区寻求建议，以及每个（最好是免费的）解决方案的优缺点？（滚动我自己是最不喜欢的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T06:17:46.313

维基百科有一个很好的[企业搜索供应商](http://en.wikipedia.org/wiki/List_of_enterprise_search_vendors)列表，其中链接到每个供应商的信息。在不知道您正在寻找过去文本索引的功能范围的情况下推荐某些功能有点困难。

[Xapian](http://xapian.org/)是一种免费的解决方案，可以很容易地与多种语言的现有应用程序集成，它们也有[Omega](http://xapian.org/docs/omega/overview.html)，这是一个打包的搜索解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T06:44:57.033

如果您可以在您的网站上运行 PHP，那么 Wrensoft 的[Zoom 搜索引擎](http://www.wrensoft.com/zoom/)非常好。50 页以下的网站免费，大型网站便宜。如果您想查看它的实际效果，我将它用于我的网站[http://entrian.com/source-search/ 。](http://entrian.com/source-search/)（我不隶属于 Wrensoft - 只是一个快乐的用户。）

# javascript - jQuery - 复选框，如单选按钮

> ID：881166
> 
> 赞同：20
> 
> 时间：2009-05-19T06:02:32.947
> 
> 标签：javascript, jquery

我有组复选框，我喜欢这个组是否有类似具有相同名称属性的单选按钮的行为。

每个复选框都有不同的名称。

复选框中只能选择一项。

我怎么能做到这一点？

* * *

**解决方案**

为什么我需要这个？因为我们需要一致性的 webUI。拜托，这不是关于我们的应用程序架构的问题。:)

**HTML 示例**

```
<div class="multiCheckBox">
 <span class="multiGroup">
  <div><input class="multiItem" value="111" name="list" type="checkbox" />111</div>
  <div><input class="multiItem" value="112" name="list" type="checkbox" />112</div>
  <div><input class="multiItem" value="113" name="list" type="checkbox" />113</div>
 </span>
 <span>
  <div><input class="multiItem" value="121" name="list" type="checkbox" />121</div>
  <div><input class="multiItem" value="122" name="list" type="checkbox" />122</div>
  <div><input class="multiItem" value="133" name="list" type="checkbox" />123</div>
 </span>
 <span>
  <div><input class="multiItem" value="131" name="list" type="checkbox" />131</div>
  <div><input class="multiItem" value="132" name="list" type="checkbox" />132</div>
  <div><input class="multiItem" value="133" name="list" type="checkbox" />133</div>
 </span>
</div> 
```

**JavaScript**

```
var $groups = $("span.multiGroup", $that);
$groups.each(function() {
    var $group = $(this);
    var $checkboxes = $(":checkbox", $group);
    $checkboxes.click(function() {
        var $activeCheckbox = $(this);
        var state = $activeCheckbox.attr('checked');
        $checkboxes.attr('checked', false);
        $activeCheckbox.attr('checked', state);
    });
}); 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2009-05-19T06:09:11.440

这里有一个提示：使用单选按钮。;)

我不建议这样做，因为它会被认为对可用性不利，并且肯定会违反最小意外原则。用户已经习惯于期望收音机接受 1 个检查和复选框来接受许多。[不要让你的用户思考。](http://www.sensible.com/)

但是，如果你有你的理由，下面是如何使用 jQuery 来做这件事：

```
<input type='checkbox' name='mygroup1' value='1' class='unique'>
<input type='checkbox' name='mygroup2' value='2' class='unique'>
<input type='checkbox' name='mygroup3' value='3' class='unique'> 
```

和 jQuery：

```
var $unique = $('input.unique');
$unique.click(function() {
    $unique.filter(':checked').not(this).removeAttr('checked');
}); 
```

这是一个[现场样本](http://jsbin.com/uwewi)。

**编辑**：

正如评论中所指出的，这将允许用户取消选择所有复选框，即使他们最初选择了一个，这与单选按钮不完全一样。如果你想要这个，那么 jQuery 应该是这样的：

```
var $unique = $('input.unique');
$unique.click(function() {
    $unique.removeAttr('checked');
    $(this).attr('checked', true);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T06:09:42.937

那你为什么不使用单选按钮呢？

差异是有原因的。它是这样设计的，从用户的角度来看，单选按钮的意思是“选择一个”，而复选框的意思是“选择很多”。

不要通过改变这个久经考验的范例来打破用户的期望。当应用程序开发人员更喜欢“外观”而不是可用性和约定时，这是一件坏事，所以不要成为其中之一。

用户界面之所以有效，是因为所使用的隐喻（复选框、按钮、鼠标指针的形状、颜色等）具有某种特定的行为方式。当你做这样的事情时，用户会遇到你的应用程序的问题，甚至可能不知道为什么。

这是一种反模式，与使用复选框状态更改标签属于同一类别：

```
[ ] 启用选项与 [ ] 选项
[x] 禁用选项 [x] 选项

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:39:20.730

我有一个类似的问题。我不能使用单选按钮，因为在某些情况下，同一个表单必须显示多选复选框。我拿了你的标记，写了一小段 jQuery：

```
$("span.multiGroup input").click(function() {
    $("span.multiGroup input").attr('checked', false);
    $(this).attr('checked', true);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T06:12:25.680

```
$(".checkboxClass").click(function() {
    $(".checkboxClass").each(function() {
        $(this)[0].checked = false;});
    $(this)[0].checked = true;
}); 
```

首先清除所有复选框，然后检查被单击的复选框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-17T11:02:50.837

```
var $unique = $('input.unique');

$unique.click(function() {

 $checked = $(this).is(':checked') ; // check if that was clicked.
 $unique.removeAttr('checked'); //clear all checkboxes
 $(this).attr('checked', $checked); // update that was clicked.

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-23T23:41:43.347

**HTML**

```
<input type='checkbox' name='mygroup1' value='1' class='unique'>
<input type='checkbox' name='mygroup2' value='2' class='unique'>
<input type='checkbox' name='mygroup3' value='3' class='unique'> 
```

**Javascript**

```
$('input.unique').each(function() {
    $(this).on('touchstart click', function() {
    $('input.unique').not(this).removeAttr('checked');
});
}); 
```

小提琴：http: [//jsfiddle.net/L2ad1vd8/](http://jsfiddle.net/L2ad1vd8/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-30T18:46:36.677

如果您的页面上只有一组这些，Pablo 的回答效果很好。我在尝试解决引导程序实现时遇到了这个问题，这给我带来了一些麻烦，因为单选按钮已被完全覆盖，事实证明将复选框用作单选按钮会更容易。

这是此代码的一个版本，它通过引用调用元素的第二个类来允许多个集合。

```
$('input.unique').each(function() {
  $(this).on('touchstart click', function() {
    var secondClass = $(event.target).attr('class').split(' ')[1];
    $('input.' + secondClass).not(this).removeAttr('checked');
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<input type='checkbox' name='mygroup1' value='1' class='unique check1'>
<input type='checkbox' name='mygroup2' value='2' class='unique check1'>
<input type='checkbox' name='mygroup3' value='3' class='unique check1'>
<br>
<hr>
<input type='checkbox' name='mygroup1' value='1' class='unique check2'>
<input type='checkbox' name='mygroup2' value='2' class='unique check2'>
<input type='checkbox' name='mygroup3' value='3' class='unique check2'>
```

[JSFiddle](http://jsfiddle.net/CommandLineDesign/j5zhv7y0/3/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-06T10:17:42.343

此现场演示说明 Radio Button 可以执行您想要的操作：

[http://jsfiddle.net/ftnwg8yf/](http://jsfiddle.net/ftnwg8yf/)

```
function selectiongrp_control( s_selectiongrpName, b_useJQueryUiThemeToDecorate )
{
	var ADF_THIS_IS_LAST_SELECTED_ATTR='adf_this-is-last-selected-attr'
	var ADF_THIS_IS_LAST_SELECTED_VALUE='adf_this-is-last-selected-val';

	if ( !s_selectiongrpName ) return -1;

	$( '#fieldset-' + s_selectiongrpName + '-result' ).hide();
	if( b_useJQueryUiThemeToDecorate )   $( '#jQueryUi-' + s_selectiongrpName).buttonset();

	$( 'input[name=' + s_selectiongrpName + ']' ).each( function()
	{
		$( this ).on( 'click', function()
		{
			if( $( this ).attr( ADF_THIS_IS_LAST_SELECTED_ATTR ) )
			{
				$( this ).removeAttr( 'checked' );
				$( this ).removeAttr( ADF_THIS_IS_LAST_SELECTED_ATTR );
			} else
			{
				$( this ).attr( ADF_THIS_IS_LAST_SELECTED_ATTR, ADF_THIS_IS_LAST_SELECTED_VALUE );
			}

			$( 'input[name=' + s_selectiongrpName + ']' ).not( this ).removeAttr( ADF_THIS_IS_LAST_SELECTED_ATTR );
			if( b_useJQueryUiThemeToDecorate )   $( '#jQueryUi-' + s_selectiongrpName ).buttonset( 'refresh' );

			if( $( 'input[name=' + s_selectiongrpName + ']:checked' ).length > 0 )
			{
				$( '#fieldset-' + s_selectiongrpName + '-resultarea' ).html( 'You have selected : [' + $( this ).val() + '].');
			} else
			{
				$( '#fieldset-' + s_selectiongrpName + '-resultarea' ).html( 'Nothing is selected.' );
			}
			$( '#fieldset-' + s_selectiongrpName + '-result' ).show();
		});
	});
}

$( document ).ready( function() {
	var ADF_USE_JQUERYUI_THEME_TO_DECORATE=true;
	selectiongrp_control( 'selectiongrp-01', !ADF_USE_JQUERYUI_THEME_TO_DECORATE );
	selectiongrp_control( 'selectiongrp-02', ADF_USE_JQUERYUI_THEME_TO_DECORATE );
});
```

```
<!-- Load jQuery core library -->
<script type='text/javascript' src='http://code.jquery.com/jquery-2.1.4.min.js'></script>

<!-- Load jQueryUI library-->
<script type='text/javascript' src='http://code.jquery.com/ui/1.11.4/jquery-ui.js'></script>

<!-- Load jQueryUI Theme library (make either one effective) -->
<!--
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/ui-lightness/jquery-ui.css'>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/ui-darkness/jquery-ui.css'>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/blitzer/jquery-ui.css'>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/eggplant/jquery-ui.css'>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/flick/jquery-ui.css'>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css'>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/sunny/jquery-ui.css'>
-->
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/redmond/jquery-ui.css'>

<h3>Plain (without styling/decoration):</h3>
<fieldset id='fieldset-selectiongrp-01'>
	<legend>Please <b>click</b> to <b>select</b> or <b>re-click</b> to <b>deselect</b> </legend>
	<span id='jQueryUi-selectiongrp-01'>
		<input type='radio' name='selectiongrp-01' value='Yes' id='selectiongrp-01-option-Y'/><label for='selectiongrp-01-option-Y'>Yes</label>
		<input type='radio' name='selectiongrp-01' value='No' id='selectiongrp-01-option-N'/><label for='selectiongrp-01-option-N'>No</label>
		<input type='radio' name='selectiongrp-01' value='Unknown' id='selectiongrp-01-option-U' /><label for='selectiongrp-01-option-U'>Unknown</label>
	</span>
</fieldset>
<fieldset id='fieldset-selectiongrp-01-result'>
	<legend>Result</legend>
	<span id='fieldset-selectiongrp-01-resultarea'></span>
</fieldset>

<br/>

<h3>Decorated by &quot;jQueryUI Theme&quot;:</h3>
<fieldset id='fieldset-selectiongrp-02'>
	<legend>Please <b>click</b> to <b>select</b> or <b>re-click</b> to <b>deselect</b> </legend>
	<span id='jQueryUi-selectiongrp-02'>
		<input type='radio' name='selectiongrp-02' value='Yes' id='selectiongrp-02-option-Y'/><label for='selectiongrp-02-option-Y'>Yes</label>
		<input type='radio' name='selectiongrp-02' value='No' id='selectiongrp-02-option-N'/><label for='selectiongrp-02-option-N'>No</label>
		<input type='radio' name='selectiongrp-02' value='Unknown' id='selectiongrp-02-option-U' /><label for='selectiongrp-02-option-U'>Unknown</label>
	</span>
</fieldset>
<fieldset id='fieldset-selectiongrp-02-result'>
	<legend>Result</legend>
	<span id='fieldset-selectiongrp-02-resultarea'></span>
</fieldset>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-08T05:04:20.043

基于“单选按钮组”的原始行为，即在同一组中只能选择一个单选按钮，“单选按钮方法”总是比“复选框方法”更受欢迎，因为它可以帮助防止异常数据提交JavaScript 或 jQuery 编码无法正确加载。

然后，我们要解决的唯一挑战是使选定的单选按钮成为“可取消选择”。

所以，这里有一个例子来说明，通过使用额外的 JavaScript 控件，仍然可以取消选择单选按钮。本示例使用 jQuery 作为主要的 JavaScript 框架。

JSFiddle.net 也提供在线版本：http: [//jsfiddle.net/0fbef3up/](http://jsfiddle.net/0fbef3up/)

此示例考虑了在 JavaScript 或 jQuery 编码未加载的情况下满足意外情况，因此提供了“或有选项”。为了了解这种特殊情况将如何发生以及意外情况如何起作用，您可以通过注释/删除相关代码行来简单地省略 jQuery 库的加载：

```
<script type='text/javascript' src='http://code.jquery.com/jquery-2.1.4.min.js'></script> 
```

下面是用于演示的完整 HTML/JavaScript 代码。本质就在JavaScript函数'selectiongrp_logicControl'，大家可以学习参考。

第一个编码帧的 JavaScript（即控制/模型层）和第二个编码帧的 HTML（即表示层）：

```
function selectiongrp_logicControl( s_selectiongrpName, b_useJQueryUiThemeToDecorate )
{
	// Safeguard measure: If the mandatory function parameter is undefined or empty, nothing can be proceed further, so quit the current function with excit code:
	if ( !s_selectiongrpName ) return -1;

	// Define a constant for future use:
	var ADF_THIS_IS_LAST_SELECTED='adf_this-is-last-selected';

	// Hide the 'contingent select option item' and all its relevant ancillary objects (i.e. the label element):
	$( '#' + s_selectiongrpName + '-option-X' ).hide();
	$( '#' + s_selectiongrpName + '-option-X' ).next( 'label' ).hide();

	// Decorate the selection group option items and their labels by applying the jQueryUI 'buttonset' function:
	if( b_useJQueryUiThemeToDecorate )   $( '#jQueryUi-' + s_selectiongrpName).buttonset();

	// Loop for each option item within the selection group:
	$( 'input[name=' + s_selectiongrpName + ']' ).each( function()
	{
		// Define an 'onClick' event for every option item within the selection group:
		$( this ).on( 'click', function()
		{
			// If the option item being clicked is the last selected one, then de-select such item.
			// Two ways can achieve de-selection, apply either one below to adapt to your programming style or desired controller mechanism.

			if( $( this ).attr( ADF_THIS_IS_LAST_SELECTED ) )
			{
				// Way[1]: Force selecting another item within the same selection group.
				// This Way entails the 'contingent select option item'.  So, if you consider such 'contingent select option item' is unnecessary/inappropriate to your programming style or controller mechanism, please don't choose this Way.
				// (Note: Such 'contingent select option item' was deliberately hidden at the outset).
				// $( '#' + s_selectiongrpName + '-option-X' ).prop( 'checked', true );

				// Way[2]: Simply remove the current item's "checked" attribute:
				$( this ).removeAttr( 'checked' );

				// Both Way[1] and Way[2]: Remove the additional attribute from the item being clicked.
				$( this ).removeAttr( ADF_THIS_IS_LAST_SELECTED );
			} else
			{
				// Apply an additional attribute to the item being clicked.  This additional attribe functioned as a secret hint for internal reference to signify the item was the last seledcted one:
				$( this ).attr( ADF_THIS_IS_LAST_SELECTED, ADF_THIS_IS_LAST_SELECTED );
			}
			// Other than the item being clicked, all other items (i.e. denotes by the jQuery 'not( this )' selector) should have removed such additional attribute:
			$( 'input[name=' + s_selectiongrpName + ']' ).not( this ).removeAttr( ADF_THIS_IS_LAST_SELECTED );

			// Force the jQueryUI engine to re-render the decoration to reflect the latest selection by applying the 'buttonset' function again ( provide the 'refresh' parameter ):
			if( b_useJQueryUiThemeToDecorate )   $( '#jQueryUi-' + s_selectiongrpName ).buttonset( 'refresh' );

			// Lastly, this is an optional step, refresh the Result Area for displaying user's latest selection on specific screen area:
			selectiongrp_visualControl_refreshResultArea( s_selectiongrpName );
		});
	});
}

function selectiongrp_visualControl_refreshResultArea( s_selectiongrpName )
{
	// Safeguard measure: If the mandatory function parameter is undefined or empty, nothing can be proceed further, so quit the current function with excit code:
	if( !s_selectiongrpName )   return -1;

	var adf_resultArea_string;
	var ADF_RESULTAREA_STRING_NOTHING_SELECTED='Nothing is selected';

	// If Way[1] is adopted:
	if( $( '#' + s_selectiongrpName + '-option-X' ).prop( 'checked' ) )
	{
		adf_resultArea_string=ADF_RESULTAREA_STRING_NOTHING_SELECTED;
	} else // If Way[2] is adopted:
	{
		// If some option items are selected within the selection group:
		if( $( 'input[name=' + s_selectiongrpName + ']:checked' ).length > 0 )
		{
			adf_resultArea_string='You have selected : [' + $( 'input[name=' + s_selectiongrpName + ']:checked' ).next( 'label' ).text() + ']';
		} else
		{
			adf_resultArea_string=ADF_RESULTAREA_STRING_NOTHING_SELECTED;
		}
	}

	$( '#fieldset-' + s_selectiongrpName + '-resultarea' ).html( adf_resultArea_string );
	$( '#fieldset-' + s_selectiongrpName + '-result' ).show();
}

$( document ).ready( function()
{
	var ADF_USE_JQUERYUI_THEME_TO_DECORATE=true;
	selectiongrp_logicControl( 'selectiongrp-01', !ADF_USE_JQUERYUI_THEME_TO_DECORATE );
	selectiongrp_logicControl( 'selectiongrp-02', ADF_USE_JQUERYUI_THEME_TO_DECORATE );

	// If jQuery can be loaded properly, the error message must be hidden:
	$( '#jquery-compatibility-error' ).hide();
});
```

```
<!-- Load jQuery core library -->
<script type='text/javascript' src='http://code.jquery.com/jquery-2.1.4.min.js'></script>

<!-- Load jQueryUI library -->
<script type='text/javascript' src='http://code.jquery.com/ui/1.11.4/jquery-ui.min.js'></script>

<!-- Load jQueryUI Theme library (make either one effective) -->
<!--
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/ui-lightness/jquery-ui.min.css'/>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/ui-darkness/jquery-ui.min.css'/>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/blitzer/jquery-ui.min.css'/>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/eggplant/jquery-ui.min.css'/>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/flick/jquery-ui.min.css'/>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.min.css'/>
<link rel="stylesheet" type="text/css" href='http://code.jquery.com/ui/1.11.4/themes/sunny/jquery-ui.min.css'/>
-->
<link rel='stylesheet' type='text/css' href='http://code.jquery.com/ui/1.11.4/themes/redmond/jquery-ui.min.css'>

This webpage is primarily to demonstrate de-selectable radio boxes.

<h3 id='jquery-compatibility-error'>ERROR: It was detected that JavaScript or jQuery coding does not load properly, so some advance feature cannot be realised.</h3>

<h3>Style1: Raw (i.e. no styling/decoration):</h3>
<fieldset id='fieldset-selectiongrp-01'>
	<legend>Please <b>click</b> to <b>select</b> or <b>re-click</b> to <b>deselect</b></legend>
	<span id='jQueryUi-selectiongrp-01'>
		<input type='radio' name='selectiongrp-01' value='X' id='selectiongrp-01-option-X' checked/><label for='selectiongrp-01-option-X'>None/NULL/Non-Selected <small><small>(This option is provided for contingency purpose in case JavaScript or jQuery does not load)</small></small></label>
		<input type='radio' name='selectiongrp-01' value='Y' id='selectiongrp-01-option-Y'/><label for='selectiongrp-01-option-Y'>Yes</label>
		<input type='radio' name='selectiongrp-01' value='N' id='selectiongrp-01-option-N'/><label for='selectiongrp-01-option-N'>No</label>
		<input type='radio' name='selectiongrp-01' value='U' id='selectiongrp-01-option-U' /><label for='selectiongrp-01-option-U'>Unknown</label>
	</span>
</fieldset>
<fieldset id='fieldset-selectiongrp-01-result' style='display:none'>  <!-- Initaially hidden by using stylesheet attribute "style='display:none'"-->
	<legend>Selection</legend>
	<span id='fieldset-selectiongrp-01-resultarea'><br/></span>
</fieldset>

<br/>

<h3>Style2: Decorated by &quot;jQueryUI Theme&quot; <small><small>(jQueryUI Theme adopted: '<i>Redmond</i>')</small></small>:</h3>
<fieldset id='fieldset-selectiongrp-02'>
	<legend>Please <b>click</b> to <b>select</b> or <b>re-click</b> to <b>deselect</b></legend>
	<span id='jQueryUi-selectiongrp-02'>
		<input type='radio' name='selectiongrp-02' value='X' id='selectiongrp-02-option-X' checked/><label for='selectiongrp-02-option-X'>None/NULL/Non-Selected <small><small>(This option is provided for contingency purpose in case JavaScript or jQuery does not load)</small></small></label>
		<input type='radio' name='selectiongrp-02' value='Y' id='selectiongrp-02-option-Y'/><label for='selectiongrp-02-option-Y'>Yes</label>
		<input type='radio' name='selectiongrp-02' value='N' id='selectiongrp-02-option-N'/><label for='selectiongrp-02-option-N'>No</label>
		<input type='radio' name='selectiongrp-02' value='U' id='selectiongrp-02-option-U' /><label for='selectiongrp-02-option-U'>Unknown</label>
	</span>
</fieldset>
<fieldset id='fieldset-selectiongrp-02-result'style='display:none;'>  <!-- Initaially hidden by using stylesheet attribute "style='display:none'"-->
	<legend>Selection</legend>
	<span id='fieldset-selectiongrp-02-resultarea'><br/></span>
</fieldset>
```

# fluent-nhibernate - Fluent NHibernate - 将 2 个表映射到一个类

> ID：881168
> 
> 赞同：9
> 
> 时间：2009-05-19T06:03:10.760
> 
> 标签：fluent-nhibernate

我有一个类似这样的表结构

```
table Employees
 EmployeeID
 EmployeeLogin
 EmployeeCustID

table Customers
 CustomerID
 CustomerName 
```

我想要的是将上面的结构映射到一个名为：

```
Class Employee
 EmployeeID
 EmployeeLogin
 EmployeeName 
```

我如何使用流利的 nhibernate 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T12:29:03.107

我不知道 fluent 是否可行，但在 xml 中你使用 join 元素：

简化：

```
<class name="Employee" table="Customers" >
  <id name="CustomerID" .../>

  <property name="CustomerName"/>

  <join table="Employees">
    <key column="EmployeeCustID" />
    <property name="EmployeeLogin" />
  </join>

</class> 
```

[请参阅Ayende 的](http://ayende.com/Blog/archive/2009/04/20/nhibernate-mapping-ltjoingt.aspx)这篇文章

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-09-10T13:51:21.437

我同意上面的 Frans，但是如果你被别人的代码卡住并且不得不使用现有的结构，你可以使用 WithTable。

```
public class EmployeesMap : ClassMap<Employees>
{
    public EmployeesMap()
    {
        Id(x => x.EmployeeId);
        Map(x => x.EmployeeLogin);

        WithTable("Customers", join =>
            {
                join.Map(m => m.EmployeeName, "CustomerName");
                join.WithKeyColumn("EmployeeCustID");
            });
    }
}

[DataContract(IsReference = true)]
public class Employees
{
    [DataMember]
    public virtual int EmployeeId { get; set; }

    [DataMember]
    public virtual string EmployeeLogin { get; set; }

    [DataMember]
    public virtual string EmployeeName { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-02T18:51:32.247

自从 Fluent NHibernate 升级到 1.0 以来，我还没有尝试过这个，所以我的语法可能不正确。我很确定这只有`Customer.CustomerId`在`Employee`.

```
public class EmployeeMap : ClassMap<Employee>
{
  public EmployeeMap()
  {
    Id(x => x.EmployeeId);
    Map(x => x.EmployeeLogin);

    Table("Customer", m =>
    {
      m.Map(x => x.EmployeeName, "CustomerName");
    });
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T09:30:25.790

EmployeeCustID 是唯一的吗？如果没有，这将永远无法工作，因为您随后尝试将两种不同的实体类型塞进 1 中。此外，对于您的结构，您希望如何保存实例？-> CustomerID 未知，因此您无法保存这样的实体。

恕我直言，最好将客户简单地保留为与员工相关的实体，因为（我假设）如果员工也是客户，则 EmployeeCustID 用于将客户实体链接到员工实体，这意味着“客户”只是一个角色雇员，因此是可选的和可变的，因此应该是一个单独的实体。

# c# - C# 在消息框的标题中显示 unicode 文本

> ID：881172
> 
> 赞同：2
> 
> 时间：2009-05-19T06:03:49.310
> 
> 标签：c#, unicode

C# 2005。

我的应用程序支持 2 种语言英语和泰语。

但是，在我的标题消息框中，它将显示问号，即???????????? 当我必须显示泰语时。

消息框字符串文本没问题。显示正常。然而，它只是有问题的标题。

我是否需要以某种方式在消息框中启用 unicode？

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T06:12:00.283

MessageBox 标题对 unicode 字符没有任何问题。我的猜测（没有看到任何代码）是标题的字符串经过了一些不支持 unicode 的处理。

您是否尝试过在标题中显示带有硬编码泰语文本的 MessageBox？如果显示正常，您应该在代码中向后跟踪标题字符串，并确定它在哪里得到“去统一编码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:55:18.570

您可以安装和使用支持所需字符的字体。并非所有字体都支持所有字符。[] 框字符是“不支持”的字体表示

默认情况下，文本框可能使用 MS Sans Serif，因此将其更改为 Arial 或“Mangal”Arail uniocde。

arial 支持和 mangal 支持大多数语言字符。如果要检查字体是否已预先安装，您可以将您的 unicode 代码粘贴到“写字板”中或使用类型运行框“charmap”进行检查

# c# - 如何使用com组件

> ID：881176
> 
> 赞同：1
> 
> 时间：2009-05-19T06:05:25.250
> 
> 标签：c#, .net, c++-cli

我已经使用 vs2005 创建了一个 COM 组件。

现在让我知道我可以在 vs2003（使用 f/w 1.1）中使用我在 vs2005（使用 f/w 2.0）上创建的 dll 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T06:16:34.893

我认为您真正的问题是，只要它们使用 COM 进行交互，您是否可以在单个应用程序中混合 .NET 版本。

我相信答案是“不”。一个 AppDomain 只能加载一个 .NET 运行时。多个运行时是 .NET 4 的一个特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T06:16:07.500

在 .NET 项目中，将引用添加到解决方案的“引用”分支中，并将`using`指令添加到要使用该组件的每个文件中。在 C++ 项目中使用`import`指令。

# perl - 如何使用 Perl 脚本将二进制数转换为字符串字符？

> ID：881177
> 
> 赞同：2
> 
> 时间：2009-05-19T06:05:40.180
> 
> 标签：perl, binary, numbers

如何使用 Perl 脚本将二进制数转换为字符串字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T06:28:29.277

如果你的意思是二进制到 ASCII 像[这个](http://www.roubaixinteractive.com/PlayGround/Binary_Conversion/Binary_To_Text.asp)网页，这应该可以解决问题：

```
#!/usr/bin/perl

$binarySample = "01010100011001010111001101110100"; # "Test" in binary
$chars = length($binarySample);
@packArray = pack("B$chars",$binarySample);
print "@packArray\n"; 
```

**输出：**

```
测试
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T06:31:29.333

`chr(0x41)`或者`chr(65)`将数字 65（十六进制的 41）变成字母“A”，这是您要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T06:12:26.287

字符串可以包含二进制数据或文本字符；没有什么特别的需要。

告诉我们更多关于您要做什么的信息，这可能会阐明您所说的“转换”或“二进制”的含义。

# iphone - Iphone 的谷歌地图链接帮助

> ID：881180
> 
> 赞同：2
> 
> 时间：2009-05-19T06:07:30.037
> 
> 标签：iphone

我有一个谷歌地图链接，它将打开谷歌地图应用程序......@“ [http://maps.google.com/maps?q=cupertino](http://maps.google.com/maps?q=cupertino) ”......而不是一个特定的位置，我希望它以当前打开经度和纬度..链接会像@“ [http://maps.google.com/maps?q=ll](http://maps.google.com/maps?q=ll) ”这样...或者有不同的方法吗？

我正在使用 CLocation 框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T06:48:53.673

您可以使用不同的 URL 参数来设置位置，例如

> ?中心=l,l

[http://code.google.com/apis/maps/documentation/staticmaps/#URL_Parameters](http://code.google.com/apis/maps/documentation/staticmaps/#URL_Parameters)

# python - 如何在python中发送电子邮件

> ID：881184
> 
> 赞同：2
> 
> 时间：2009-05-19T06:08:51.097
> 
> 标签：python

```
import smtplib

SERVER = "localhost"

FROM = "sender@example.com"
TO = ["user@example.com"]

SUBJECT = "Hello!"

TEXT = "This message was sent with Python's smtplib."
server = smtplib.SMTP(SERVER)
server.sendmail(FROM, TO, message)
server.quit() 
```

这给出了错误：

```
'**The debugged program raised the exception unhandled AttributeError
"'module' object has no attribute 'SMTP'"
File: /home/an/Desktop/email.py, Line: 13**' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-19T06:14:45.240

将您的文件重命名为 email.py 以外的名称。还要摆脱任何剩余的 email.pyc 文件。问题解决了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T06:56:17.657

发生这种情况是因为电子邮件是 Python 标准的[内置库](http://docs.python.org/library/email)。如果您将程序重命名为其他名称（如上所述），那应该可以解决问题。

# mysql - 如何在 MySQL 中转义特殊字符？

> ID：881194
> 
> 赞同：91
> 
> 时间：2009-05-19T06:12:30.907
> 
> 标签：mysql

例如：

```
select * from tablename where fields like "%string "hi"  %"; 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'hi" "' 附近使用正确的语法

如何构建此查询？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2009-05-19T06:16:47.857

> ***此答案中提供的信息可能会导致不安全的编程实践。***
> 
> 此处提供的信息高度依赖于 MySQL 配置，包括（但不限于）程序版本、数据库客户端和使用的字符编码。

请参阅[http://dev.mysql.com/doc/refman/5.0/en/string-literals.html](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

```
MySQL 识别以下转义序列。
\0 ASCII NUL (0x00) 字符。
\' 单引号 (“'”) 字符。
\" 双引号 (“"”) 字符。
\b 退格字符。
\n 换行符（换行符）。
\r 回车符。
\t 制表符。
\Z ASCII 26 (Control-Z)。见表格后面的注释。
\\ 一个反斜杠 (“\”) 字符。
\％ 一个人物。见表格后面的注释。
\_ 一个人物。见表格后面的注释。

```

所以你需要

```
select * from tablename where fields like "%string \"hi\" %"; 
```

尽管正如[Bill Karwin 下面所指出](https://stackoverflow.com/questions/881194/how-to-escape-special-character-in-mysql/881252#881252)的，对字符串定界符使用双引号并不是标准 SQL，因此使用单引号是一种很好的做法。这简化了事情：

```
select * from tablename where fields like '%string "hi" %'; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2011-06-25T15:11:33.317

I've developed my own MySQL escape method in Java (if useful for anyone).

See class code below.

Warning: wrong if NO_BACKSLASH_ESCAPES SQL mode is enabled.

```
private static final HashMap<String,String> sqlTokens;
private static Pattern sqlTokenPattern;

static
{           
    //MySQL escape sequences: http://dev.mysql.com/doc/refman/5.1/en/string-syntax.html
    String[][] search_regex_replacement = new String[][]
    {
                //search string     search regex        sql replacement regex
            {   "\u0000"    ,       "\\x00"     ,       "\\\\0"     },
            {   "'"         ,       "'"         ,       "\\\\'"     },
            {   "\""        ,       "\""        ,       "\\\\\""    },
            {   "\b"        ,       "\\x08"     ,       "\\\\b"     },
            {   "\n"        ,       "\\n"       ,       "\\\\n"     },
            {   "\r"        ,       "\\r"       ,       "\\\\r"     },
            {   "\t"        ,       "\\t"       ,       "\\\\t"     },
            {   "\u001A"    ,       "\\x1A"     ,       "\\\\Z"     },
            {   "\\"        ,       "\\\\"      ,       "\\\\\\\\"  }
    };

    sqlTokens = new HashMap<String,String>();
    String patternStr = "";
    for (String[] srr : search_regex_replacement)
    {
        sqlTokens.put(srr[0], srr[2]);
        patternStr += (patternStr.isEmpty() ? "" : "|") + srr[1];            
    }
    sqlTokenPattern = Pattern.compile('(' + patternStr + ')');
}

public static String escape(String s)
{
    Matcher matcher = sqlTokenPattern.matcher(s);
    StringBuffer sb = new StringBuffer();
    while(matcher.find())
    {
        matcher.appendReplacement(sb, sqlTokens.get(matcher.group(1)));
    }
    matcher.appendTail(sb);
    return sb.toString();
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2009-05-19T06:34:12.480

您应该使用单引号作为字符串分隔符。单引号是标准的 SQL 字符串分隔符，双引号是标识符分隔符（因此您可以在表或列的名称中使用特殊单词或字符）。

在 MySQL 中，默认情况下，双引号（非标准）用作字符串分隔符（除非您设置`ANSI`SQL 模式）。如果您曾经使用过其他品牌的 SQL 数据库，那么您将受益于养成标准使用引号的习惯。

使用单引号的另一个方便的好处是字符串中的文字双引号字符不需要转义：

```
select * from tablename where fields like '%string "hi" %'; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-11-09T14:08:43.580

MySQL 有字符串函数[QUOTE](https://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_quote)，应该可以解决问题

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-08-13T11:05:00.700

对于这样的字符串，对我来说最舒服的方法是将'或'加倍，如 MySQL 手册中所述：

> 有几种方法可以在字符串中包含引号字符：
> 
> ```
> A “'” inside a string quoted with “'” may be written as “''”.
> 
> A “"” inside a string quoted with “"” may be written as “""”.
> 
> Precede the quote character by an escape character (“\”).
> 
> A “'” inside a string quoted with “"” needs no special treatment and need not be doubled or escaped. In the same way, “"” inside a 
> ```
> 
> 用“'”引用的字符串不需要特殊处理。

它来自[http://dev.mysql.com/doc/refman/5.0/en/string-literals.html](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-05-19T06:21:32.297

您可以使用[mysql_real_escape_string](http://in1.php.net/mysql_real_escape_string)。`mysql_real_escape_string()`不转义`%`and `_`，所以你应该单独转义 MySQL 通配符 ( `%`and `_`)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-18T06:37:16.780

For testing how to insert the double quotes in MySQL using the terminal, you can use the following way:

> TableName(Name,DString) - > Schema
> insert into TableName values("Name","My QQDoubleQuotedStringQQ")

After inserting the value you can update the value in the database with double quotes or single quotes:

```
update table TableName replace(Dstring, "QQ", "\"") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-23T08:35:46.277

如果您在搜索字符串时使用变量，这`mysql_real_escape_string()`对您有好处。只是我的建议：

```
$char = "and way's 'hihi'";
$myvar = mysql_real_escape_string($char);

select * from tablename where fields like "%string $myvar  %"; 
```

# android - Android : 禁用 1.5 纸杯蛋糕动画过渡

> ID：881195
> 
> 赞同：1
> 
> 时间：2009-05-19T06:12:37.893
> 
> 标签：android, animation, screen, transition

长话短说，如何禁用活动之间的屏幕转换？如果您愿意，我们实现了自己的选项卡处理程序，现在它正在选项卡之间进行转换，这看起来很俗气。谢谢！

克里斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-08T22:25:00.003

看`android.content.Intent.FLAG_ACTIVITY_NO_ANIMATION`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T06:49:28.383

您在模拟器、自建图像和（我想）在源代码树中找到的 Spare Parts 应用程序让您可以打开/关闭这些转换（全局！）。您可能想查看它的源代码以了解其工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T00:15:24.283

您不应该为每个选项卡启动一个全新的活动。您应该将每个 Activity 嵌入到 android.app.ActivityGroup 中并使用 android.app.LocalActivityManager。

# php - 如何加入表中的最新记录？

> ID：881198
> 
> 赞同：4
> 
> 时间：2009-05-19T06:13:48.143
> 
> 标签：php, mysql, greatest-n-per-group

我需要做的很简单......但它是凌晨 3 点，我可能忽略了显而易见的事情。

我正在编写一个简单的论坛。一个表存储论坛标题、描述等，而另一个存储帖子。在显示所有论坛列表的论坛列表中，我想抓取每个论坛中的最新帖子，并显示帖子主题、发布者和帖子 ID 以及日期。简单的。

唯一的问题是，当我加入帖子表时，它会加入表中的第一个记录，而不是最后一个记录，这表示该论坛中的最后一个帖子。

这是获取“最新”帖子（现在用作“第一篇帖子”）的论坛列表+数据的简化查询。

```
SELECT forum_title, forum_id, post_subject, post_user, post_id, post_date FROM board_forums 
     LEFT JOIN board_posts 
     ON (forum_id = post_parentforum AND post_parentpost = 0) 
WHERE forum_status = 1
GROUP BY forum_id
ORDER BY forum_position 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T06:27:37.483

您遇到的问题是经典的**Ambiguous GROUP BY**问题。这是 MySQL 特有的，因为其他 RDBMS（和标准 SQL）根本不允许您的查询。您的查询未通过单值规则，因为您没有在`GROUP BY`.

这是一个解决方案，展示了我最喜欢的每组获得最大行数的方法：

```
SELECT f.forum_title, f.forum_id, p1.post_subject, p1.post_user, 
  p1.post_id, p1.post_date 
FROM board_forums f
LEFT JOIN board_posts p1
  ON (f.forum_id = p1.post_parentforum AND p1.post_parentpost = 0)
LEFT JOIN board_posts p2
  ON (f.forum_id = p2.post_parentforum AND p2.post_parentpost = 0 
      AND p1.post_id < p2.post_id)
WHERE p2.post_id IS NULL AND f.forum_status = 1
ORDER BY f.forum_position; 
```

如果`p2.post_id IS NULL`，这意味着没有找到`p2`比 中找到的帖子更大的帖子`p1`。

Ergo，`p1`是最新的帖子（假设`post_id`是自动递增的）。

* * *

重新评论：

> 这个有点问题。ID 最高的 post_id 不一定是最新的帖子。

没问题。只需使用保证区分较早帖子和较晚帖子的列。你提`post_date`。在平局的情况下，您必须打破与另一列（或多列）的平局，这肯定是按时间顺序排列的。

```
LEFT JOIN board_posts p2
  ON (f.forum_id = p2.post_parentforum AND p2.post_parentpost = 0 
    AND (p1.post_date < p2.post_date 
      OR p1.post_date = p2.post_date AND p1.post_millisecond < p2.post_millisecond)) 
```

# c# - 使用 control.begininvoke 后 UI 仍然无响应

> ID：881202
> 
> 赞同：2
> 
> 时间：2009-05-19T06:15:05.910
> 
> 标签：c#, begininvoke

我制作了一个 C# winforms 应用程序。现在我有一个有很多按钮的表单，它们调用大量的数字处理函数，我在文本框中更新其输出。我调用 textbox.begininvoke() 方法，我将委托传递给更新文本框中文本的函数，但是当文本很大时，表单没有响应，因为我无法单击取消按钮。有没有办法让整个表单保持响应，并且更新也不断发生。我必须在数据即将到来时向用户显示数据，我无法缓冲整个数据并最终显示。我还尝试实现我自己的缓冲区并以特定间隔显示数据，这对于少量文本非常有用，但在大量文本中，UI 只是没有响应。有什么帮助吗？谢谢

**在出现一些混乱时更新问题**

*   我已经在单独的线程上调用了数字运算功能。
*   每当数据到达时，该数字运算函数调用 control.begininvoke 函数以更新文本框
*   我的 UI 将被显示，我看到了输出，但是当数据很大时，我不能做任何其他活动，尽管我仍然可以看到 UI

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T06:25:42.183

调用 BeginInvoke（或 Invoke）不会给您带来任何好处，除非数字运算函数在 UI 线程之外的另一个线程上运行。

考虑以下代码：

```
private void HardWork(object state)
{
    for (int i = 0; i < 10; i++)
    {
        Thread.Sleep(500);
        SetText(i.ToString());
    }
}

private void SetText(string text)
{
    if (this.InvokeRequired)
    {
        this.Invoke(new Action<string>(SetText), text);
    }
    else
    {
        textBox1.Text = text;
    }
}
private void Button_Click(object sender, EventArgs e)
{
    ThreadPool.QueueUserWorkItem(HardWork);            
} 
```

该`Button_Click`方法将开始`HardWork`在单独的线程上执行该方法。HardWork 会做一些处理（通过`Thread.Sleep`调用模拟）然后调用一个方法来显示一些进度。在这个方法中，我们需要检查我们是否在 UI 线程上。如果不是，我们使用`Invoke`(or `BeginInvoke`) 调用相同的方法，以强制它在 UI 线程上执行。

更新：如果数字运算方法发出的数据量非常大，这当然可能会对 UI 响应性产生负面影响。例如，如果您在线程方法中累积大量文本并在每次更新时发出该文本，那么这将比仅发出自上次更新以来发生的变化要慢。文本框也是如此；仅使用新文本调用 TextBox.AppendText 将比重复分配 TextBox.Text 属性更快。

很难就如何解决您的特定问题给出更详细的想法，因为我们还没有看到您的代码实际做了什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T06:21:36.447

你把它弄反了。

BeginInvoke 是您应该用来更新 UI 的工具。正如您似乎相信的那样，它不会产生新线程。

BeginInvoke 只是“在最初创建控件的线程中执行以下操作”，这是您的 UI 线程。

因此，BeginInvoke 是您应该在数字处理线程中使用的，以将更新回发到 UI 中。

希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-19T06:24:12.607

让更新文本框的函数逐个执行，并在每次更新之间调用[DoEvents 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents(VS.71).aspx)也就是说，分解字符串并...

```
update piece 1
DoEvents
update piece 2
DoEvents
...
update piece n 
```

# jquery - 如何让 Ajax Queue 插件在 jQuery 1.3 中工作？

> ID：881222
> 
> 赞同：9
> 
> 时间：2009-05-19T06:22:13.060
> 
> 标签：jquery, ajax

我有一个同时发送多个 Ajax 请求的应用程序。[在我发现jQuery Ajax Queue 插件](http://plugins.jquery.com/project/ajaxqueue)之前，我最初遇到了竞争条件，该插件在 jQuery 1.2 上运行良好，但在 jQuery 1.3 上失败了。实际上有两个不同版本的插件；我目前正在使用[这个](http://view.jquery.com/trunk/plugins/ajaxQueue/jquery.ajaxQueue.js)，它与第一个相同，但只是添加了更多功能。

无论如何，我在 Firefox 3.0.10 上使用 Firebug，当我运行我的代码时，我没有收到任何明确的错误，只是永远不会返回调用。

我显然可以继续使用 v1.2，但我真的很想了解为什么这个插件在最新版本中失败，以及我可以做些什么来让它工作。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-06-30T06:38:44.527

如果您愿意做一些跑腿工作，您应该能够使用 jQuery 的内置队列支持。

```
// First Ajax request
$(document).queue("ajaxRequests", function() {
  $.ajax({
    // Stuff
    success: function() {
      $(document).dequeue("myName");
    });
  });
});

// Second Ajax request
$(document).queue("ajaxRequests", function() {
  $.ajax({
    // Stuff
    success: function() {
      $(document).dequeue("myName");
    });
  });
});

// Trigger the queue
$(document).dequeue("ajaxRequests"); 
```

当然，将它包装在插件中会很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-03-28T21:46:23.250

刚刚找到了这个问题的答案，我自己也在寻找解决方案。有人决定修改原来的ajaxQueue插件。

[http://www.onemoretake.com/2009/10/11/ajaxqueue-and-jquery-1-3/](http://www.onemoretake.com/2009/10/11/ajaxqueue-and-jquery-1-3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-17T22:38:40.467

[ajaxManager](http://www.protofunc.com/scripts/jquery/ajaxManager/)插件基于 Ajax Queue Plugin，但更加灵活，可与 jQuery 1.3.2 配合使用。

# mysql - 如何备份 MySQL 中的存储过程

> ID：881223
> 
> 赞同：21
> 
> 时间：2009-05-19T06:22:38.100
> 
> 标签：mysql, stored-procedures, backup

我用`mysqldump`的是MySQL 5.0，每天都备份，但是不明白只有存储过程备份的方法。

我怎样才能备份它？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-05-19T06:49:12.583

我不确定您是要备份存储过程以及其他所有内容，还是仅备份存储过程...

与其他所有内容一起存储在转储中：

```
mysqldump -R <dbname> #or
mysqldump --routines <dbname> 
```

只是存储过程：

```
mysqldump -n -t -d -R <dbname> #or
mysqldump --no-create-db --no-create-info --no-data --routines <dbname> 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T04:07:34.803

您还可以放入文件`routines=true`的`[mysqldump]`部分`my.cnf`（您可能必须添加此部分，因为它通常不存在于原始`my.cnf`文件中）以在正常转储中包含例程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T15:54:07.040

```
mysqldump - u dbusername (ex: -uroot) -ppassword (ex:-pmysql@dbpas) --routines <dbname> 
```

使用用户名和密码可能会更有帮助。

# jquery - $.ajax() 方法数据

> ID：881224
> 
> 赞同：1
> 
> 时间：2009-05-19T06:22:39.643
> 
> 标签：jquery, ajax

我有一些 div 标签，我想将新值插入到我的数据库中。正如人们所建议的那样，我正在使用`$.ajax POST`插入。由于我是 JQuery 和 Ajax 的新手，我实际上并不知道 $.ajax() 中的数据和消息是什么。请解释如何将我的值异步插入数据库（即时）

```
 $(".div"+increment).change(function(){
                   $.ajax({
                     type: "POST",
                     url: "./server",
                     data: "name=John&location=Boston",
                     success: function(msg){
                     alert( "Data Saved: " + msg);
                          }
                })

               }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T06:26:21.013

数据属性应该是一个对象

```
 $(".div"+increment).change(function(){
               $.ajax({
                 type: "POST",
                 url: "./server",
                 data: {name:"John", location:"Boston"},
                 success: function(msg){
                 alert( "Data Saved: " + msg);
                      }
            })

           }); 
```

在服务器端，只需像往常一样检索 post 参数。例如，在 php 中，您可以执行 $_POST("name") 和 $_POST("location") 之类的操作。PHP 生成的响应将显示为 msg。因此，您可以在执行插入后在您的 PHP 脚本中回显“保存操作成功”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T06:37:06.253

您可以考虑改用[$.post](http://docs.jquery.com/Ajax/jQuery.post#urldatacallbacktype)。它更容易处理。缺点是它不提供错误通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T07:54:50.257

当您说“将我的值异步插入数据库......（即时）”时，我希望您的意思是“插入数据库，期间”。

POST 请求（通过 $.ajax() 或 $.post() ）只能将您的数据从客户端发送到您的服务器。

您将需要编写服务器端代码来进行插入。

假设您的服务器上有一个名为“do-insertion.php”的脚本，如果将 POST 变量“名称”和“位置”提交给它，它可以将数据插入数据库。

所以你会写（我猜你已经知道了）：

`$.post( "do-insertion.php", {"name":"John", "location":"SF"}, function(data){alert("got response="+data);} );`

重要的是您在服务器端代码上编写的内容。我假设是 PHP，所以你会使用 mysql API for php 并将你的数据插入到你的数据库中。

当然，您可以将提交的数据读取为

`$name=$_POST['name'];`

`$location=$_POST['location'];`

这仅适用于 PHP；其他语言将有其他方法来做所有事情。

* * *

顺便说一句，您的问题中的“异步....（即时）”是否意味着任何特别之处？

# c# - LINQ to Dataset DBNULL 问题/空引用异常

> ID：881225
> 
> 赞同：0
> 
> 时间：2009-05-19T06:23:18.380
> 
> 标签：c#, linq, dbnull

我有以下 LINQ 查询，当我在 dtblDetail 中的“备注”列为空时，即使我测试它是否为空，它也总是会导致错误。

```
var varActiveAndUsedElementsWithDetails =
                        from e in dtblElements
                        join d in dtblDetails on e.PK equals d.FK into set
                        from d in set.DefaultIfEmpty()
                        where (e.ElementActive == true)
                        select new
                        {
                            ElementPK = e.PK,
                            Remark = d.IsRemarkNull() ? null : d.Remark
                        }; 
```

错误消息是：“表 'dtblDetails' 中列 'Remark' 的值是 DBNull。” 添加 d.IsRemarkNull() 的测试后，会引发空引用异常。

你能帮我解决这个问题吗？

我已经检查了以下网站，但除了我必须测试 DBNULL 之外没有发现任何有用的东西。但正如所说，这并不能解决我的问题。

*   [http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/3d124f45-62ec-4006-a5b1-ddbb578c4e4d](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/3d124f45-62ec-4006-a5b1-ddbb578c4e4d)
*   [http://blogs.msdn.com/adonet/archive/2007/02/13/nulls-linq-to-datasets-part-3.aspx](http://blogs.msdn.com/adonet/archive/2007/02/13/nulls-linq-to-datasets-part-3.aspx)
*   [http://www.vbforums.com/showthread.php?t=506645](http://www.vbforums.com/showthread.php?t=506645)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T09:14:48.743

问题是整个“d”项是空的。所以调用 'd.IsRemarkNull()' 会导致空引用异常。下面的代码解决了这个问题：

```
var varActiveAndUsedElementsWithDetails =
                    from e in dtblElements
                    join d in dtblDetails on e.PK equals d.FK into set
                    from d in set.DefaultIfEmpty()
                    where (e.ElementActive == true)
                    select new
                    {
                        ElementPK = e.PK,
                        Remark = d == null? null : (d.IsRemarkNull() ? null : d.Remark)
                    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T06:43:06.647

错误来自哪里？是否有可能是 d.IsRemarkNull() 导致它？这种方法是什么样的？

也许：

```
DBNull.Value.Equals(d.Remark) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T10:35:19.200

也许这个字段不允许在db中为null，为其获取默认值，并避免处理null值

# xml - 如何使用 Jet.OLEDB.4.0 提供程序连接两个字符串

> ID：881226
> 
> 赞同：3
> 
> 时间：2009-05-19T06:23:50.267
> 
> 标签：xml, csv, oledb

我将查询传递给运行该查询并返回结果的内部应用程序，连接到 CSV 文件，我正在连接 Provider=Microsoft.Jet.OLEDB.4.0

我想将字符串加入一列，但出现错误。

这可以做到吗，有人知道怎么做吗？

我在做什么的例子：

```
select 
 PurchaseOrderNo, 
 PurchaseOrderDate, 
 Description, 
 Quantity,
 ContractName + 'delimiter' + ContractNo as LinePrimaryKeys
from [POImport baseline.csv] 
```

错误是： - 错误 - 提供程序无法确定 Double 值。例如，行刚刚创建，Double 列的默认值不可用，消费者尚未设置新的 Double 值。

从其他阅读来看，我加入的两个值似乎都没有被识别为字符串。

例如，将 PurchaseOrderNo + 'delimiter' + ContractNo 作为 LinePrimaryKeys 替换为 PurchaseOrderNo + 'delimiter' + PurchaseOrderNo 作为 LinePrimaryKeys

停止错误。那么现在我如何投射到字符串？

这行不通。ContractName + 'cn' + CAST(ContractName as nvarchar(50)) as LinePrimaryKeys

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T06:34:53.353

您必须使用**&**而不是**+**。

**&**执行字符串连接，**+**执行（数字）加法。使用**&**自动将所有操作数转换为字符串。

```
select 
 PurchaseOrderNo, 
 PurchaseOrderDate, 
 Description, 
 Quantity,
 PurchaseOrderNo & 'delimiter' & ContractNo as LinePrimaryKeys
from [POImport baseline.csv] 
```

# git - 需要新项目的 git repo 布局建议

> ID：881230
> 
> 赞同：2
> 
> 时间：2009-05-19T06:25:01.280
> 
> 标签：git, layout, dvcs, firmware

我正在开发一个计划保存在 git 存储库中的新项目。我知道如何在 CVS 中执行此操作，但我对 git 有点陌生，可以使用一些建议。

该项目是两个嵌入式设备的固件，它们相互通信并被打包成一对。对于这两种设备，都有代码的生产变体和制造变体。这两个设备项目都有许多子/兄弟项目，用于执行硬件的各个位（闪烁 LED 等）或与硬件相关的代码位（驱动程序等）。大多数代码在所有事物中都是通用的。

我还要求能够独立地修改生产和制造固件，以防止对一个固件的更改通过验证将另一个发回。

下面是我现有的目录布局。在我知道我会使用 git 之前，它就有机地成长了，而且大部分时间都被放下了。如果有更好的方法，我不反对重新组织整个事情。

*   项目根
    *   包括
    *   源代码
    *   设备A
        *   生产
        *   制造业
        *   眨
        *   纽扣
        *   ...
    *   设备B
        *   生产
        *   制造业
        *   眨
        *   纽扣
        *   ...

我很想将生产和制造放在分支上，但我通常在给定的一天同时工作，而 git 一次只允许一个分支处于活动状态。然后我不知道如何处理闪烁、按钮等，因为它们并不是真正的制造或生产。建议？

**说明：**

*   代码的制造版本在生产线上用于测试硬件。产品代码在硬件通过测试站后加载，然后交付给客户。两者至少有 75% 相似，但它们需要独立，这样我就可以修复生产代码中的错误，而无需停止生产线。

*   因为 DeviceA 和 DeviceB 是一对，所以两个代码集都被标记并同时发布，具有相同的发布版本号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:00:22.750

我使用 git 来管理硬件/软件代码设计，所以我可能会提供一些有用的建议。

根据经验，如果您的设计部分可以相互操作，而不管您正在处理的版本是什么，那么您最好为这些部分创建单独的 git 存储库。

举个例子，您希望您的驱动程序位于与您的硬件设计不同的存储库中。这是因为软件和硬件之间的接口非常清晰，是一个天然的分解缝。此外，相同的驱动程序版本将适用于您设备的一系列设计阶段。

我不确定您所说的设计的生产和制造版本是什么意思。如果你想解耦开发和稳定版本，你应该为这些单独的分支做好准备。

git 中的分支和合并尽可能便宜，分支之间的切换快如闪电；因此，拥有分支机构不会受到任何惩罚。在分支之间挑选兼容的更改也相当容易。您通常在软件世界中看到的方法（发布分支，加上一个 HEAD）效果很好。

您可能应该将演示/测试模块（闪烁器等）与它们应该演示/测试的模块放在一起。这是因为演示耦合接口通常易于更改。这样，您必须使演示代码与实际设备保持同步，从长远来看，这应该有助于设计稳定性。

附带说明一下，在 FPGA 世界中，您通常在大型设备上进行原型设计，并在受限设备上进行生产。这样，您的模块最终会拥有两个独立开发的品种。您可能希望将这些品种保存在单独的存储库中，因为它们实际上是不同的实体。在这种情况下，两者之间共享的代码（总有一些您可以重用的可移植代码）可以存在于单独的存储库中，并且是一个单独的库。特别是如果代码大小证明它是合理的。

然后，您可以使用 git 子模块将所有提到的模块绑定在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T06:57:39.213

我认为您可以使用子模块。我不是 100% 确定它是如何工作的，但是您可以为您的通用代码创建一个 git 存储库（例如 LED 和用户界面，甚至每个存储库），并包含此存储库的副本作为您的存储库的子模块A，另一个副本作为 B 的 repo 的子模块。

如果您想对公共部分进行更改，请在您当前正在使用的单元上进行。完成后，将更改推送到其他产品的子模块。如果感觉更舒服，您也可以在其他地方拥有公共部分的回购。

总结一下：将您的可重用代码放在单独的存储库中，以便您可以重用它。

我不是子模块之王，但我很快就需要做和你一样的事情。所以我对你将如何让它工作很感兴趣。

# documentation - 程序设计文档策略

> ID：881238
> 
> 赞同：2
> 
> 时间：2009-05-19T06:26:54.193
> 
> 标签：documentation

在阅读了程序设计的定义（[http://en.wikipedia.org/wiki/Design_document](http://en.wikipedia.org/wiki/Design_document)）并搜索了一些示例图之后，除了找到这个图之外，我一直很难找到更多关于程序设计的含义（[http://www.kelso.scotborders.sch.uk/departments/computing/resources/mindmaps/Procedural%20program%20design.gif](http://www.kelso.scotborders.sch.uk/departments/computing/resources/mindmaps/Procedural%20program%20design.gif)）。通常，何时需要此类文档？是在应用程序中使用了特定算法时吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T08:08:49.420

当您有一些非常相似且经常使用的构造时，最常使用此方法。在某种程度上，SQL 是一种“过程设计”，因为它将您限制在表和列以及少数可应用于“数据模型”（= 数据库）的操作。

代码生成器在这一领域蓬勃发展，因为它们具有大量但简单的输入，并生成大量代码，这些代码非常繁琐且手工编写容易出错。以类似的方式，您可以为此生成“文档”，这通常会浪费大量时间，因为它的容量很大，并且包含的​​关于系统如何工作的信息非常少。

[编辑] 在计算机科学中，消息中的信息量是您每比特获得的“惊喜”量。因此，一页“1'000 英尺视图”中包含大量信息，它为您提供了系统是如何设计的以及您如何找到自己的方式的压缩介绍，这值得超过 1,000 页的文档生成一个数据模型。

# ruby - 在运行时使用字符串作为变量

> ID：881239
> 
> 赞同：39
> 
> 时间：2009-05-19T06:27:25.677
> 
> 标签：ruby, string

我有一个字符串，它是在运行时创建的。我想用这个字符串作为变量来存储一些数据。如何将字符串转换为变量名？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-19T07:37:35.670

如果您可以原谅变量名称前的 @ 符号，则以下内容将起作用：

```
variable_name = ... # determine user-given variable name
instance_variable_set("@#{variable_name}", :something) 
```

这将创建一个名为 的变量`@whatever`，其值设置为`:something`。`:something`显然，可以是您想要的任何东西。这似乎在全局范围内工作，通过声明一个`Object`绑定所有东西的自发实例（我找不到这个的参考）。

该`instance_variable_get`方法将允许您以相同的方式按名称检索值。

```
instance_variable_get("@#{variable_name}") 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-19T06:53:40.000

`eval()`如果您首先声明了变量，则可以使用它：

```
>> foo = []
>> eval("foo")[1] = "bar"
>> foo[1]
=> "bar" 
```

这是[文档](http://www.ruby-doc.org/core/classes/Kernel.html#M005948)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-19T15:25:20.053

与其直接这样做，不如考虑使用散列。字符串将是键，而您要存储的值将是值。像这样的东西：

```
string_values = { }
some_string = params[:some_string]       # parameter was, say "Hello"
string_values[some_string] = 42
string_values                            # { 'Hello' => 42 }
some_number = string_values[some_string]
some_number                              # 42 
```

这有几个好处。首先，这意味着你没有做任何以后可能难以弄清楚的魔法。其次，您使用了一个非常常见的 Ruby 习惯用法，它在整个 Rails 中用于类似的功能。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-28T14:25:46.383

现在只需使用 instance_variable_set 方法，就可以在运行时创建实例变量。

```
instance_variable_set('@' + 'users', User.all) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-19T07:02:30.703

我不是要消极，而是要小心行事。Ruby 为您提供了许多用于高度动态编程的特性，例如`define_method`，将块存储为`Proc`稍后调用的对象等。通常这些代码更简洁，更安全。99%的时间使用`eval()`都是错误的。

绝对不要`eval()`在包含用户提交输入的字符串上使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T15:20:07.380

正如 Jason Watkins 所说，很多人可能会很快使用 eval() 第一件事，这将是一个严重的错误。大多数情况下，如果您注意使用类实例变量而不是本地变量，则可以使用 Tack 描述的技术。

局部变量通常不可检索。任何带有@ 或@@ 前缀的东西都可以轻松检索。

# objective-c - iPhone的UITextView - 你怎么知道你附加的文本何时不在视野范围内

> ID：881247
> 
> 赞同：0
> 
> 时间：2009-05-19T06:32:42.687
> 
> 标签：objective-c, uikit

我有一个 UITextView，我不时向其附加文本，但我无法找到一个 API 来告诉我我附加的文本是否不在视图中，因此我可以向 UITextView 发送 scrollToRange 消息。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T06:42:52.157

每次添加文本时检查内容大小

```
UITextView *textView;
    if(textView.contentSize.height > textView.frame.size.height)
    {
        //your text is lager then view
    } 
```

# php - PHP DOM 函数从输入文件中读取行号

> ID：881248
> 
> 赞同：1
> 
> 时间：2009-05-19T06:32:59.533
> 
> 标签：php, dom

我有一个使用 DOM 函数读取 XML 文件的程序：

```
$doc = new DOMDocument('1.0');
$doc->load("myFile.xml"); 
```

当我遍历本文档中的节点时，有没有办法告诉输入文件的哪一行定义了节点？

例如：

```
1: <!-- myFile.xml -->
2: <foobar>
3:     <foo>FOO</foo>
4:     <bar>BAR</bar>
5: </foobar> 
```

和 PHP：

```
$xp = new DOMXPath($doc);
$bars = $xp->query("//bar");
$myBar = $bars[0];
echo "The first <bar> element is on line " . performMagicHere(); // 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-24T23:24:50.127

`$element->getLineNo()`将返回开始标签的行号。注意：对于跨越多行的开始标签，它将返回开始标签的结尾。它似乎不适用于 DOMText 节点（返回 0）。

[http://us3.php.net/manual/en/domnode.getlineno.php](http://us3.php.net/manual/en/domnode.getlineno.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T06:46:28.857

你不能用 PHP 的 DOM 类真正做到这一点。DOM Level 3[添加了对 this](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#DOMLocator-line-number)的支持，但我们在 PHP 中还没有 DOM level 3 支持。

# c# - 如何获取应用程序的路径（没有app.exe）？

> ID：881251
> 
> 赞同：8
> 
> 时间：2009-05-19T06:33:31.547
> 
> 标签：c#, windows-mobile, compact-framework, filepath

我想获取我的应用程序的路径，例如：“\\ProgramFiles\\myApp”，我尝试使用以下代码：

```
 string path = System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase; 
```

但它返回一个结尾有“\\myapp.exe”的路径。

我也试过：

```
 string path = System.IO.Directory.GetCurrentDirectory(); 
```

但它会引发“NotSupportedException”。

有没有办法在最后获得没有 .exe 的路径？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-19T06:35:02.793

`Application.StartupPath`应该为你做。

更新：从您的编辑中，我看到您正在 Compact Framework 上运行。然后 Application.StartupPath 将不起作用。这是我通常使用的构造：

```
private static string GetApplicationPath()
{
    return System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-19T06:34:40.250

```
path = System.IO.Path.GetDirectoryName( path ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T06:58:57.013

比其他的更简单：

```
using System.IO;
using System.Reflection;
...
var path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T06:36:29.590

您可以使用 Path.GetDirectoryName(string) 方法将原始路径字符串作为参数传递。你想解决什么问题？也许你真的需要像工作目录这样的东西？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T06:36:31.167

```
Path.GetFileNameWithoutExtension(path); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T06:36:57.827

使用 FileInfo 对象提取目录名称怎么样？

在 Vb.Net 中：

```
fi = New FileInfo(System.Reflection.Assembly.GetExecutingAssembly.Location)
path = fi.DirectoryName 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T06:56:04.490

如果它是您的情况下的 exe，请使用：

```
 // Summary:
    //     Gets the path for the executable file that started the 
    //     application, not including the executable name.    
    Application.StartupPath 
```

# gdi - 如何在 GDI 编程中创建大型 Compatible Memory DC？

> ID：881270
> 
> 赞同：3
> 
> 时间：2009-05-19T06:37:49.340
> 
> 标签：gdi, cdc

我想创建一个大的CompatibleDC，在上面画一个大的图像，然后bitblt部分图像到其他DC，以达到高性能。

我正在使用以下代码来创建兼容的 Memory DC。但是当矩形变得非常大时，等等：5000*5000，创建的 CompatibleDC 变得不稳定。有时还可以，有时却失败了。我的代码有什么问题吗？

```
input :pInputDC
output:pOutputMemDC

{
    pOutputMemDC=new CDC();
    VERIFY(pOutputMemDC->CreateCompatibleDC(pInputDC));

    CRect rect(0,0,nDCWidth,nDCHeight);
    CBitmap bitmap; 
    if (bitmap.CreateCompatibleBitmap(pInputDC, rect.Width(), rect.Height()))
    {
        pOutputMemDC->SetViewportOrg(-rect.left, -rect.top);
        m_pOldBitmap = pOutputMemDC->SelectObject(&bitmap);
    }
    CBrush brush;
    VERIFY(brush.CreateSolidBrush(RGB(255,0, 0)));
    brush.UnrealizeObject();
    pOutputMemDC->FillRect(rect, &brush);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:36:21.500

与其创建一个大的 DC，然后将它的一部分连接到另一个较小的 DC，不如创建一个与目标 DC 大小相同或至少与 blit 目标大小相同的 DC。然后，通过要复制的子部分的 (-x,-y) 偏移所有绘图命令。如果您的目标是源上的 (100,200)-(400,400)，则创建一个 DC (300x200) 并将所有内容偏移 (-100,-200)。

这有两大优势：首先，所需的内存要小得多。其次，GDI 会将您的绘图操作剪辑到 DC 的大小（无论如何它总是剪辑）。尽管裁剪操作需要 CPU 时间，但不绘制看不见的像素所节省的时间弥补了这一点。

现在，如果这个大型 DC 类似于图像（例如 JPEG），那么您需要研究其他方法。许多图像编辑程序使用的一种技术是将图像分割成块并将块分页到内存/硬盘或从内存/硬盘分页。每个图块都有自己的 DC，而您只有足够的源 DC 来填充目标 DC。当视图窗口在大图像上移动时，卸载已移出目标矩形的图块并加载已变为可见的图块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:04:09.910

每个 5000x5000 像素的图像需要 ca。100MB 内存。根据您的 PC 有多少 RAM，这可能已经是问题所在。

如果您有 1GB 或更多的 RAM，那么这可能不是问题。在这种情况下，您必须有内存泄漏。你在哪里释放分配的位图？我看到您没有意识到画笔，但是位图呢？

请注意，增加您的交换将无济于事，因为这会影响您的表现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:59:43.390

确保将所有原始 GDI 对象选择到 DC。

问题可能是您的位图在被销毁时仍被选择到 pOutputMemDC 中，并且其中之一或两者都无法正确删除。因此，内存问题可能会开始。

# visual-studio-2008 - 是否有 VS2008 的插件来管理最喜欢的解决方案/项目？

> ID：881273
> 
> 赞同：5
> 
> 时间：2009-05-19T06:39:14.860
> 
> 标签：visual-studio-2008, add-in, favorites

VS2008 启动页面上的“Recent Projects”部分对我来说毫无用处。

我习惯于检查多个存储库以处理不同的功能。我们的存储库结构非常深。文件->“最近的项目”菜单没有显示足够的路径让我弄清楚它将打开哪个项目。我能得到的最接近的方法是将鼠标悬停在启动页面上“最近的项目”部分中的项目上，因为这样我就可以在状态栏中阅读整个路径。我仍然倾向于经常打开项目来测试不同的想法，但总的来说我只处理几个项目。

我认为最好有一个“最喜欢的项目”部分而不是一个“最近的项目”，其中包含我可以自己命名的条目。

有人知道 VS2008 有这样的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T22:03:58.067

[MZ-Tools](http://www.mztools.com/index.aspx)的功能与您描述的非常接近。

**收藏解决方案**功能的详细信息可在[功能以增强您的 Visual Studio 体验](http://www.mztools.com/v6/features.aspx#EnhanceExperience)标题下找到。

> 此功能旨在替换 Visual Studio 的“最近项目”或“起始页”功能，这些功能存在一些缺陷：最近的项目并不总是最喜欢的项目...

尽管此工具*不是*免费的，但它确实提供了您正在寻找的功能。您可以试用[30 天](http://www.mztools.com/v6/download_demo.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T08:43:28.433

为什么不直接创建 .sln 文件的快捷方式并将它们放在桌面或快速启动栏中？然后只需单击一下，您就可以打开您的项目并等待具有收藏项目功能的 VS2010。实际上我们的存储库结构也很深，我也想要这个功能但想不通。我使用工具 -> 选项将最近项目显示的项目数从 4 更改为 10。这显示了我目前正在处理的几乎所有项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T06:54:40.000

请检查：

[Visual Studio 的收藏夹菜单](http://visualstudiogallery.msdn.microsoft.com/en-us/00F3B972-CB54-47F2-AC56-B2F48C77A74D)（仅适用于文件）

如果您无法在网上找到它，如果您需要，我可以为您托管。

[下载链接。](http://depositfiles.com/files/6fm5h1q5p)

或者，您可以使用 MRU Cleaner 插件定期清除重新发送的列表

# .net - 黑白托管/非托管代码和本机代码有什么区别？

> ID：881277
> 
> 赞同：0
> 
> 时间：2009-05-19T06:41:32.033
> 
> 标签：.net, c++-cli

非托管代码是本机代码吗？有什么不同

任何人帮助我。

* * *

**重复：** [本机代码和托管代码之间的区别？](https://stackoverflow.com/questions/855756/difference-between-native-and-managed-code)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T06:45:01.870

托管代码是在虚拟机下运行的代码，换句话说，它的内存由另一个程序（例如 C#）“管理”。

非托管代码在底层架构上运行，不需要虚拟机，但它可能需要运行时库。（例如 C）

进一步阅读：[http ://en.wikipedia.org/wiki/Managed_code](http://en.wikipedia.org/wiki/Managed_code)

哎呀，这是一个[**Duplicate**](https://stackoverflow.com/questions/855756/difference-between-native-and-managed-code)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T06:57:15.737

托管代码由 .NET 运行时运行。因此，CLR 处理内存管理（也称为垃圾收集）等。托管二进制文件位于 IL 代码中。CPU 不能直接理解此代码，而是由 CLR 为 CPU 解释。任何具有 CLR 的环境都可以运行托管程序集。

非托管代码只是定期编译的代码。CPU 直接理解的一系列 ASM 指令。运行速度更快，但支持框架较少，并且在出生时仅限于可能运行的一组特定的可能 CPU。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-19T06:58:48.730

有一天，我听到了一个相当不错的故事。如果原来的人过来看到这个，那么我会相信他。我不确定他是否希望我放弃他的名字。

非托管代码：想象一下一些非常卑鄙的战士。他们拥有完全的自由统治权。他们可以做任何他们想做的事，去他们需要去的任何地方。唯一的问题是他们到处拉屎。他们会在整个地方大便，然后将便便带到他们不应该进入的地方。这是 C/C++ 等。

托管代码：这些人是远亲。精致多了。但几乎没有那么合适和刻薄。事实上，它们的体重略微超重。他们不被允许跑到他们想去的地方。事实上，他们的小游戏笔里有一个边界。他们也拉便便，但他们是尿布，所以他们不会到处都是便便。通常会有一个小家伙过来清理他们的尿布。这是Java。

便便显然是记忆。边界是虚拟机。小家伙是垃圾收集器。

我只是不记得可移植性功能是如何融入这个故事的。

# unix - 远程文件的大小不知道获取运行时间

> ID：881278
> 
> 赞同：1
> 
> 时间：2009-05-19T06:41:51.393
> 
> 标签：unix, command-line, fetch

当我执行 fetch 命令时，输出了以下消息。

“远程文件的大小未知”

这会是一个错误吗？如果我指定一个选项，它会是什么或消失的东西吗？或者即使我不介意也可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-05T23:17:30.167

这是因为 HTTP 服务器没有在响应中发送 Content-Length 标头。这样，客户端不会提前知道文件有多长，并且必须假设它在服务器关闭连接时结束，副作用是如果连接过早断开，您最终会得到在不知情的情况下下载不完整。

这听起来不太好，但实际上在网络上是很常见的做法，尤其是对于脚本生成的动态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T07:33:08.250

这是[Freebsd 的 fetch](http://nixdoc.net/man-pages/FreeBSD/fetch.1.html)命令，对吧？

这不是错误，只是警告。不过，我认为没有选项可以抑制该警告。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-10-08T12:54:28.333

这是 UNIX 中的方式 //Google Image echo "Weberdev Logo Size:" 的文件大小。getRemoteFileSize' [http://www.weberdev.com/images/BlueLogo150x45.gif](http://www.weberdev.com/images/BlueLogo150x45.gif) ');

# asp.net-mvc - 什么是 ModelState.IsValid 在 NerdDinner 的 ASP.NET MVC 中有效？

> ID：881281
> 
> 赞同：149
> 
> 时间：2009-05-19T06:42:44.403
> 
> 标签：asp.net-mvc, validation, nerddinner

在[Professional ASP.NET MVC 1.0的](http://www.wrox.com/WileyCDA/WroxTitle/Professional-ASP-NET-MVC-1-0.productCd-0470384611.html)[NerdDinner](http://www.wrox.com/WileyCDA/Section/id-321793.html)示例中，有一种方法可以创建一个新的晚餐，复制如下（免费的 NerdDinner 版本的第 89 页）。

它在那里检查 ModelState.IsValid 是否为真。它似乎检查模型是否对数据库有效（也就是说，它捕获数据类型转换，例如格式无效的日期，但不是业务规则）。真的吗？

提交表单时，如果您在日期中有错误，ModelState.IsValid 将为 false，您将返回错误，但仅针对该日期，因为从未执行过 AddRuleViolations。如果您完全删除对 ModelState.IsValid 的检查，那么您将收到所有错误（由于异常），包括无效日期中的标记。那么，为什么要检查 ModelState.IsValid 呢？我错过了什么吗？

```
// 
// POST: /Dinners/Create 

[AcceptVerbs(HttpVerbs.Post)] 
public ActionResult Create(Dinner dinner) {
    if (ModelState.IsValid) {
        try {
            dinner.HostedBy = "SomeUser"; 

            dinnerRepository.Add(dinner);
            dinnerRepository.Save();

            return RedirectToAction("Details", new {id = dinner.DinnerID }); 
        } catch {
            ModelState.AddRuleViolations(dinner.GetRuleViolations());
        } 
    } 
    return View(dinner); 
} 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2009-05-19T07:07:39.383

`ModelState.IsValid`告诉您是否已将任何模型错误添加到`ModelState`.

默认模型绑定器会为基本类型转换问题添加一些错误（例如，为“int”传递非数字）。您可以根据您使用的任何验证系统更充分地填充 ModelState。

示例模型绑定器将使用从模型属性中`DataAnnotations`获取的验证错误填充模型状态。`DataAnnotations`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-07-14T02:20:19.447

来自勘误表： `ModelState.AddRuleViolations(dinner.GetRuleViolations());`

应该：

`ModelState.AddModelErrors(dinner.GetRuleViolations());`

参考：[http ://www.wrox.com/WileyCDA/WroxTitle/Professional-ASP-NET-MVC-1-0.productCd-0470384611,descCd-ERRATA.html](http://www.wrox.com/WileyCDA/WroxTitle/Professional-ASP-NET-MVC-1-0.productCd-0470384611,descCd-ERRATA.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-22T19:38:25.560

所有具有明确类型的模型字段，在返回给控制器时应进行验证。如果任何模型字段与其定义的类型不匹配，则 ModelState.IsValid 将返回 false。因为，这些错误会被添加到 ModelState 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-11T17:12:41.287

是的，Jared 和 Kelly Orr 是对的。我在编辑异常中使用以下代码。

```
foreach (var issue in dinner.GetRuleViolations())
{
    ModelState.AddModelError(issue.PropertyName, issue.ErrorMessage);
} 
```

代替

```
ModelState.AddRuleViolations(dinner.GetRuleViolations()); 
```

# javascript - :hover 与嵌套的 sIFR 元素

> ID：881283
> 
> 赞同：1
> 
> 时间：2009-05-19T06:43:00.470
> 
> 标签：javascript, css, sifr

我有以下html：

```
<li><a href="#"><span class="font Berthold-light">1</span>Consectetur adipiscing elit risus.</a></li> 
```

中的数字`span`被 sIFR 取代，但我希望它在`a:hover`. 在 CSS 中它会像这样工作：

```
a:hover span { color: #0fb5ef; } 
```

有没有办法对 sIFR 做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T17:59:17.297

下面是我处理链接悬停效果的 sifr-config.js 的摘录。尝试并适应您的使用。

sIFR.replace({
selector: 'h3',
src: 'flash/din.swf',
highsrc: 'flash/din.swf',
css: {
'.sIFR-root' : { 'text-transform': '大写' , 'color':'#FEBF10', 'font-weight':'bold','font-size':'12px'},
'a': { 'text-decoration': 'none', 'color' :'#FEBF10' },
'a:link': { 'text-decoration': 'none', 'color':'#FEBF10' },
'a:hover': { 'text-decoration': '下划线' , '颜色':'#FEBF10' },
'a:visited': { '

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T21:39:24.063

不幸的是，Flash 不支持这一点。

# dns - 域重定向问题

> ID：881285
> 
> 赞同：2
> 
> 时间：2009-05-19T06:43:51.747
> 
> 标签：dns

我有一个网站说 domain.old 托管说'host-old'

我想取消'host-old'并使用'host-new'

（因此有效地“主机旧”托管将结束）

我也想要一个新域 - 说'domain.new'

**所以现在我有了 'domain.old' 、 'domain.new' 和 'host-new'**

现在我希望保留所有旧链接：

即。*http: **//domain.old** /cat1/link1/page1/*

重定向到*http://domain.new / **cat1** /link1/page1/*

现在请建议与新主机一起设置的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T07:22:58.393

这是一个多步骤的过程：

1.  在“host-new”创建所有页面，以便“ [http://domain.new/cat1/link1/page1/](http://domain.new/cat1/link1/page1/) ”全部工作。
2.  在 'host-new' 上启用 Apache 中的 mod_rewrite，并进行如下配置。
3.  将“domain.old”的 dns 条目更改为指向“host.new”
4.  等待 2-3 天，让 dns 条目传播到 Internet 的其余部分。
5.  停止在'host-old'托管

您需要的 mod_rewrite 配置是：

```
LoadModule rewrite_module modules/mod_rewrite.so
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.old$
RewriteRule ^(.*)$ http://domain.new/$1 [NE,R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T06:53:57.660

我不知道这将如何工作，但您可以从旧站点解析 URL 并重定向到您的新主机。您需要在 domain.old 母版页中为您执行此操作的通用脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T06:54:52.277

如果您指定了平台，这个问题会更容易回答。如果你在 Apache 上，我会看看[mod_rewrite](http://httpd.apache.org/docs/1.3/misc/rewriteguide.html)

您可能希望提供 301（永久移动）http 响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T07:19:01.550

当您摆脱旧域时，您将无法再控制它，因此不会从中获得流量。您应该将旧域转移到新主机（不太难），然后在其上运行重定向器 - 其他答案建议的方式。

# iphone - IB 对象与 init/viewDidLoad 中手动分配的对象

> ID：881290
> 
> 赞同：1
> 
> 时间：2009-05-19T06:46:10.950
> 
> 标签：iphone, cocoa-touch

当我在我的自定义 initWithNibName 方法中以编程方式分配一个 UILabel 时，后来在 viewDidLoad 中，试图为其分配一个字符串，标签没有指向任何东西。我没有释放它；标签显示在屏幕上。如果我在 IB 中创建标签，并在 viewDidLoad 中为其分配文本，它就可以工作。

在 viewDidLoad 中设置手动分配的对象是否违反规则？为什么它没有指向任何东西，即使在我的初始化之后调用了 viewDidLoad？

来自 viewDidLoad 的文档：

> 在视图控制器将其关联的视图加载到内存后调用此方法。无论视图是存储在 nib 文件中还是在 loadView 方法中以编程方式创建，都会调用此方法。此方法最常用于对从 nib 文件加载的视图执行额外的初始化步骤。

在我的初始化中：

```
_descriptionLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 218, 280, 10)];
    _descriptionLabel.numberOfLines = 0;
    _descriptionLabel.lineBreakMode = UILineBreakModeWordWrap;
    _descriptionLabel.font = [UIFont systemFontOfSize:12.0];
    _descriptionLabel.adjustsFontSizeToFitWidth = NO;
    _descriptionLabel.text = @"Description not found.";
    _descriptionLabel.backgroundColor = [UIColor clearColor]; 
```

在 viewDidLoad 中，变量的值为 0x0。这与我手动分配的 UIButton 相同，一旦加载视图，它就可以完全工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T07:42:14.850

如果你想以编程方式创建 UILabel，你可以，但你仍然在 viewDidLoad 中进行（而不是 initWithNibName）。

不要害怕在 viewDidLoad 中进行 UI 设置。提供在视图出现在屏幕上之前添加任何静态 UI 元素。

直到 viewDidAppear:(BOOL)animated 被调用之前，视图才会出现。

如果您有动态内容，请在 viewWillAppear:(BOOL)animated 中配置它。（这看起来像你的情况）

然后确保将其添加到视图中：

```
[self.view addSubview:myLabel]; 
```

如果您需要将来访问新标签，则需要创建一个 ivar 来保存指向它的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:52:29.643

在贴出的代码中，_descriptionLabel UILabel 没有保留，会在视图绘制之前释放。

尝试

```
_descriptionLabel = [[[UILabel alloc] initWithFrame:CGRectMake(20, 218, 280, 10)] retain]; 
```

确保将 [_descriptionLabel release] 放入 dealloc。这假定 _descriptionLabel 是一个实例变量。

这基本上适用于您使用 alloc、copy 或 new 创建的任何对象。

# asp.net-mvc - ASP.NET MVC：是否允许助手抓取数据？

> ID：881294
> 
> 赞同：2
> 
> 时间：2009-05-19T06:48:51.240
> 
> 标签：asp.net-mvc, html-helper

我项目中的所有控制器都继承自基本控制器，该控制器具有我的实体模型的属性。

假设我有一个显示世界城市的视图，并且可以选择按国家/地区进行过滤。国家过滤器是数据库中国家的下拉列表。下拉列表的 Html 助手请求一个`IEnumerable<SelectItem>`.

现在有了这些信息，如果我创建一个`HtmlHelper`如下所示的可以吗：

```
 public static IEnumerable<SelectListItem> GetCountries(HtmlHelper htmlHelper)
    {
        return (from c in ((BaseController) htmlHelper.ViewContext.Controller).Entities.Countries
                orderby c.Name
                select new SelectListItem() {Text = c.Name, Value = c.ID});

    } 
```

问题不是我是否可能，而是根据 MVC 的做事方式是否可以。（或者我应该将国家的集合放在控制器内的 ViewData 中？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T07:04:17.143

我会将数据作为参数传递给 GetCountries 方法。htmlHelper 函数真的不应该知道你的基本控制器的属性——如果有人在一个不从你的基本控制器继承的控制器上使用它怎么办？我知道我知道，你控制代码，等等。如果您真的对最佳实践感兴趣，请避免依赖。

```
public static IEnumerable<SelectListItem> GetCountries(this HtmlHelper html, Countries countries) {
    return from c in countries
           order by c.Name
           select new SelectListItem 
           {
               Text = c.Name,
               Value = c.ID
           };
} 
```

然后，在您的视图中：

```
<%=Html.GetCountries(this.Entities.Countries)%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:00:04.327

查看 ViewModel 模式，它在 NerdDinner 教程中提到：http: [//nerddinnerbook.s3.amazonaws.com/Part6.htm](http://nerddinnerbook.s3.amazonaws.com/Part6.htm)

基本上，您创建一个 ViewModel 类来封装您的视图可能需要的所有数据。因此，您将拥有一个包含所有城市和/或国家的列表的类，以及在控制器操作中实例化/填充的任何其他内容。

然后，您可以强烈键入您的视图以使用该 ViewModel 类，并且 blammo：您已经获得了表单所需的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T14:37:15.430

我认为 html 助手应该返回 html。所以你有两种方法：

首先，如果您想在开始时执行此操作，请从您的 htmlhelper 准备您的元素列表，然后使用初始化列表、选定元素等调用 html.RenderDropDown...

其次，您可以在模型中进行准备，因此控制器将传递带有您需要的所有元素的启动对象，因此在您的视图中您可以直接调用 renderdropdown

干杯

# java - 肥皂体是 utf-8 编码两次

> ID：881298
> 
> 赞同：0
> 
> 时间：2009-05-19T06:50:33.670
> 
> 标签：java, web-services, axis2

我们使用需要 UTF-8 的 Web 服务。我们在客户端使用的框架是 Apache Axis2。我们调用 Web 服务，soap 正文包含 UTF-8 字符串。问题是身体似乎是“双重编码的”。即我们有字符'å'。utf-8 中“å”的 utf-8 表示是 C3 A5，但是我们在日志中看到发送的（双）编码值是 C3 83 C2 A5。

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T06:55:20.263

您如何调用 Web 服务并不完全清楚。Web 服务中的方法是否只接受一个字符串？如果是这样，您的字符串在 Java 中是什么样的？Java 中的所有字符串都是 UTF-16 编码的 - 如果您通过获取每个字节并将其转换为字符来将 UTF-8 二进制表示转换为字符串，那么这就是问题所在。

如果你能展示你正在调用的方法是什么样的，以及你是如何调用它的，那将有很大帮助。

对于它的价值，我过去使用 Axis 和非 ASCII 字符串没有问题。我强烈怀疑这是您如何使用它而不是 Axis 本身的问题，尽管我愿意被证明是错误的 :)

编辑：根据您的评论，在您使用网络服务之前，您似乎在接收 HTML 表单数据时遇到了问题。如果用户在表单中输入了“å”，那么这就是您在 Eclipse 中调试时应该看到的内容。如果您将不良数据放入您的 Web 服务，难怪您会在另一端收到不良数据。我建议您运行[WireShark](http://wireshark.org)以查看浏览器向您发送的*确切*内容，包括原始字节以及它指定的内容编码。我的猜测是您的网络服务器将其视为 ISO-8859-1，但它实际上是 UTF-8。

一旦您从表单中正确获取了字符串，我怀疑您会发现将它传递给 Web 服务完全没有问题。

# c# - 使用面板动态创建 ASP.net 提交链接按钮

> ID：881299
> 
> 赞同：1
> 
> 时间：2009-05-19T06:51:55.807
> 
> 标签：c#, asp.net

我正在尝试实现一个应用程序，该应用程序将动态创建一个列表，该列表的每个项目旁边都有一个按钮。我可以使用aspx页面中的Panel控件部分地做到这一点，并在后面的代码中动态添加html。我在动态添加 LinkBut​​ton 时遇到问题，它将根据它的 ID 进行数据库工作。这甚至可以用我所拥有的吗？：

aspx：

```
<asp:Panel ID="ItemPanel" runat="server">
</asp:Panel> 
```

后面的代码：

```
...
StringBuilder sb = new StringBuilder();
string UserID;

while (dr.Read())
{
    UserID = Convert.ToInt32(dr["UserID"]);
    sb.Append("<div><b class='template'></b>");
    //Create LinkButton with event and code behind function
}

ItemPanel.Controls.Add(new LiteralControl(sb.ToString())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T07:15:53.707

您可能想查看[这个最近的问题](https://stackoverflow.com/questions/876636/can-i-send-a-server-control-from-the-aspx-cs-page/)，如果您有其他疑问，请编辑您的问题。

**编辑**（在OP的评论之后）

* * *

发布该链接的目的是让您了解如何动态创建控件。既然你问了，这是一个简单的基本 ASPX 页面，它创建一个 LinkBut​​ton 并为`Click`事件附加一个事件处理程序。不过，不确定“处理服务器上的更改”是什么意思。

```
<%@ Page Language="C#" %>

<script runat="server">

  protected void Page_Load(object sender, EventArgs e)
  {
    LinkButton lnk1 = new LinkButton();
    lnk1.Text = "Click me!";

    //lnk1.PostBackUrl = "SomeOtherPage.aspx";

    // Use the eventhandler to perform redirection, 
    // instead of the PostBackUrl to show it works.
    lnk1.Click += new EventHandler(lnk1_Click);

    // Add control to container:
    pnl1.Controls.Add(lnk1);
  }

  void lnk1_Click(object sender, EventArgs e)
  {
    Response.Redirect("SomeOtherPage.aspx");
  }

</script>

<html>
<head>
  <title>Untitled Page</title>
</head>
<body>
  <form id="form1" runat="server">
    <asp:Panel ID="pnl1" runat="server">
    </asp:Panel>
  </form>
</body>
</html> 
```

# asp.net-mvc - 如何在 ASP.NET MVC 上的规则违规中获得数据库验证？

> ID：881300
> 
> 赞同：2
> 
> 时间：2009-05-19T06:51:55.977
> 
> 标签：asp.net-mvc, database, validation, nerddinner

在[NerdDinner](http://www.wrox.com/WileyCDA/Section/id-321793.html)示例中，编写了一组*业务规则*来验证模型上的数据。检查空字符串之类的内容，并通过调用 modelObject.GetRuleViolations() 来获取所有内容。但是还有另一层验证是数据库。例如，将 datetime 字段留给数据库进行验证，它只接受可以转换为 DateTime 对象的字符串。

我看到的问题是 modelObject.GetRuleViolations() 永远不会返回日期时间的违规行为。因此，即使正确阻止了保存记录并显示表单，指定存在错误并突出显示日期时间字段，也没有特定的错误消息。有没有办法在业务规则验证错误中获取数据库验证错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:06:00.697

您需要捕获数据访问层抛出的异常，并将它们转换为更新 ModelState 以指示有问题的错误的调用。在全局级别上没有真正的好方法，因为特定的 SQL 错误只能在它们被调用时被解释，而不是以通用方式处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T07:07:39.727

我不记得来自 NerdDinner 的确切代码，尽管我看过它。但是，在我的应用程序中，我通常在数据库中执行 raiserror('Some error',16,1) 并在我的控制器/模型中使用 try/catch，如下所示：

```
public void DoSomething() 
{
    try
    {
        // Some database activity
    } 
    catch (SqlException ex) 
    {
        ViewData["ErrorMessage"] = ex.Message;
    }
} 
```

然后，我可以根据需要在我的视图中呈现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-23T16:32:23.093

你的假设是错误的。日期时间字段不会在数据库上进行验证。

我在 NerdDinner/MVC 课程中必须了解的一件事是，验证将在 Dinner.cs OnValidate() 部分方法和对 UpdateModel() 的调用中的 DinnersController.cs 中进行。此调用将文本从屏幕复制到模型中。例如，如果它尝试将文本复制到浮点数，或解析无效日期，它将更新 ModelState 并抛出错误。正常验证不会运行。

# c# - C# 到 VB6 COM 事件（“对象或类不支持事件集”）

> ID：881305
> 
> 赞同：5
> 
> 时间：2009-05-19T06:53:07.100
> 
> 标签：c#, events, vb6, interop, delegates

真的用这个把我的头发拉出来......

我有一个 C# 项目，其接口定义为：

```
/* Externally Accessible API */
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface ISerial
{
    [DispId(1)]
    bool Startup();

    [DispId(2)]
    bool Shutdown();

    [DispId(3)]
    bool UserInput_FloorButton(int floor_number);

    [DispId(4)]
    bool Initialize();
}

/* Externally Accesssible Event API */
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface ISerialEvent
{
    [DispId(5)]
    void DataEvent();
}

[ComSourceInterfaces(typeof(ISerialEvent), typeof(ISerial))]
[ClassInterface(ClassInterfaceType.None)]
public class SerialIface : ISerial
{
    public delegate void DataEvent();
    public event DataEvent dEvent;

    public bool Initialize()
    {
        //testing the event callback
        if (dEvent != null)
        {
            dEvent();
        }
    }
    ...
} 
```

VB6 代码如下所示：

```
Private WithEvents objSerial As SerialIface

Private Sub objSerial_DataEvent()
    'do something happy'
End Sub

Public Sub Class_Initialize()
    Set objSerial = New SerialIface  '<---this is the line that fails'
    Call objSerial.Initialize  '<--Initialize would trigger DataEvent, if it got this far'
End Sub 
```

好吧，正常的 API 类型的函数似乎正在工作（如果我声明 objSerial 没有 WithEvents 关键字），但我一辈子都无法让“DataEvent”工作。它失败并显示“对象或类不支持事件集”消息。

我最初将这两个接口混为一谈，但后来 C# 抱怨说 DataEvent 没有在类中定义。就目前的情况而言，我能够在 VB6 对象浏览器中完美地查看所有 API 和一个事件——一切看起来都在那里......我只是无法让它真正工作！

我确定我遗漏了一些明显的东西或做了一些愚蠢的事情——但我对整个互操作业务都是新手，所以它完全在逃避我。

帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T12:31:20.323

[在这里](http://www.csharphelp.com/2006/08/building-com-objects-in-c/)看这篇文章。

具体来说，您似乎缺少一个看起来像这样的声明。

```
[Guid("9E5E5FB2-219D-4ee7-AB27-E4DBED8E123E"),
    ClassInterface(ClassInterfaceType.None),
    ComSourceInterfaces(typeof(DBCOM_Events))]
    public class DBCOM_Class : DBCOM_Interface
    { 
```

你有这部分

```
// // Events interface Database_COMObjectEvents 
[Guid("47C976E0-C208-4740-AC42-41212D3C34F0"), 
InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface DBCOM_Events 
{
} 
```

但是如果没有第二个，COM 对象的 vtable 和 typelib 就没有与 VB6（或其他 COM 使用者）一起使用所需的事件映射。

您可以使用 Google 搜索词“com event”c# 并获得一堆其他好的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T02:54:59.637

我使用**委托**而不是**事件**定义接口：

```
/* Externally Accesssible Event API */
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface ISerialEvent
{
    [DispId(5)]
    void DataEvent();
} 
```

应该

```
/* Externally Accesssible Event API */
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface ISerialEvent
{
    [DispId(5)]
    void dEvent();
} 
```

# asp.net - 在 asp.net ajax 中调用 web 服务

> ID：881313
> 
> 赞同：1
> 
> 时间：2009-05-19T06:55:23.290
> 
> 标签：asp.net

如何从 asp.net ajax 调用不是我编写的 web 服务。最新和最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:18:28.697

调用 Sys.Net.WebServiceProxy 调用方法

[详情在这里](http://www.asp.net/ajax/documentation/live/clientreference/Sys.Net/WebServiceProxyClass/WebServiceProxyInvokeMethod.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T07:04:02.400

ASP.NET AJAX 不再是首选库。改用 jQuery，它也支持[jsonp](http://remysharp.com/2007/10/08/what-is-jsonp/)，这是您从客户端调用跨域 Web 服务所需要的。

# sql - 如何在sql server中创建一个计划进程

> ID：881316
> 
> 赞同：0
> 
> 时间：2009-05-19T06:55:57.377
> 
> 标签：sql, sql-server, sql-server-2008, asp.net-3.5

在 MSSQL Server 2008 中，我将如何创建一个计划进程：

从用户列中的特定用户获取浮点列的总和，然后比较哪个总和最大，并每周将该数字与具有该值的用户一起存储到单独的表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:50:44.727

创建执行存储过程或原始 SQL 的 SQL Server 计划作业。

根据您的描述，查询可能如下所示：

```
insert into table (username, sumofcolumn)
select top 1 username, sum(column)
from table2
group by username
order by sum(column) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T07:04:03.087

就我个人而言，我更喜欢编写一个定期执行操作的服务，因为我可以更好地控制何时执行操作，并且一切都在一个地方。

如果您只想通过数据库方式解决问题，只需创建一个实现您的逻辑的存储过程，然后从[计划的作业](http://msdn.microsoft.com/en-us/library/ms186273.aspx)中调用该存储过程。

# apache - 让 CGI 脚本使用 Apache 捕获对域的所有请求

> ID：881319
> 
> 赞同：5
> 
> 时间：2009-05-19T06:56:55.020
> 
> 标签：apache, mod-rewrite, apache2, cgi

使用 Apache 2，我想配置我的网站，以便将对该域的任何请求转发到 Python CGI 脚本。基本上，如果用户访问[http://www.example.com](http://www.example.com) ，我希望 cgi /cgi-bin/cgi.py 执行。如果用户访问[http://www.example.com/index.rss](http://www.example.com/index.rss)我希望 /cgi-bin/cgi.py 以 /index.rss 作为参数执行。我尝试了 ScriptAlias 和 Rewrite 的各种组合，但似乎无法让它们处于正确的关系中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T07:10:27.103

```
RewriteEngine On

RewriteRule ^(.*)$ /cgi-bin/cgi.py?url=$1 
```

这会将所有请求重定向到您的 python 文件。如果您仍然遇到脚本别名问题，请尝试在 RewriteRule 行的末尾添加直通标志 [PT] 如果您仍然希望能够访问图像等，请在 RewriteRule 之前添加：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T07:21:33.870

（不确定回答自己问题的正确程序 - 但是......）

看起来我与 ScriptAlias 和 RewriteRule 有冲突。最后的解决方案是使用 AddHandler 创建关系，然后使用 mod_rewrite 将所有内容拉入 CGI。和 RewriteCond 以避免捕获 /resources/ 和 /media/。我的 VirtualHost 现在看起来像这样：

```
AddHandler cgi-script .cgi
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/resources/.*$
RewriteCond %{REQUEST_URI} !^/media/.*$
RewriteRule ^(.*)$ /cgi-bin/pyblosxom.cgi$1 [L] 
```

谢谢你们的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T07:05:29.857

虽然它不是 100% 您正在寻找的东西，但这是我用于我的一个旧的废弃域的 .htaccess 以正确重定向人们。它基本上重定向本地目录结构中找不到的任何文件或目录。这取决于脚本本身来确定它被调用的 url：

```
RewriteEngine On

#if the request isn't for a file or a directory...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-19T15:23:59.127

我使用了捕获重写规则，它在一定程度上起作用。问题是请求 URI 的原始查询字符串在使用 $1 时没有传递给 cgi。我最终删除了捕获并仅在我的 cgi 脚本中引用 ENV['REQUEST_URI'] 以获得访问权限。

# file - Grep ：获取所有没有匹配行的文件

> ID：881326
> 
> 赞同：21
> 
> 时间：2009-05-19T06:58:51.210
> 
> 标签：file, grep

我有很多包含多行的文件，在大多数情况下，其中一行包含某种模式。我想列出每个没有这种模式行的文件。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-19T07:09:53.890

使用“-L”选项以使文件没有模式。根据手册页：

> -L, --files-without-match
> 
> 抑制正常输出；而是打印通常不会打印输出的每个输入文件的名称。扫描将在第一次匹配时停止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T07:01:17.710

Grep 返回 0/1 以指示是否存在匹配项，因此您可以执行以下操作：

```
for f in *.txt; do
    if ! grep -q "some expression" $f; then
        echo $f
    fi
done 
```

**编辑**：您还可以使用 -L 选项：

grep -L "一些表达式" *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T07:11:21.017

尝试“count”并过滤等于“：0”的地方：

```
grep -c [pattern] * | grep ':0$' 
```

（如果您使用 TurboGREP*咳嗽*，您将没有 -L 开关；））

（编辑：添加 '$' 到正则表达式的末尾，以防文件名中有“：0”）

# python - 当我在 Python 中连接套接字时发生错误

> ID：881332
> 
> 赞同：0
> 
> 时间：2009-05-19T07:00:35.700
> 
> 标签：python, sockets

很高兴见到你。套接字通过Linux（消息的传输）⇒Windows（接收）在Python中制作程序，但是出现以下错误并且现在无法连接。Linux、Windows都是网络连接在一起的，而且是有权限切断的。

socket.error: (111, '连接被拒绝')

你可以帮帮我吗！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:06:03.770

111 表示侦听器已关闭/不接受连接 - 重新启动应侦听连接的 Windows 应用程序，或断开任何已绑定的客户端。

# objective-c - 比较 Cocoa 中的字符串

> ID：881335
> 
> 赞同：18
> 
> 时间：2009-05-19T07:01:35.947
> 
> 标签：objective-c, cocoa, nsstring, compare

我试过了：

```
- (NSString*) generateString
{
    NSString* stringToReturn = @"thisString";
    return stringToReturn;
}

- (void) otherMethod
{
    NSString *returnedString = [self generateString];
    if (returnedString == @"thisString")
    { // Do this }
    else if (returnedString == @"thatString")
    { // Do that }
} 
```

哪个永远不匹配。

然后我尝试过

```
if ([returnedString compare:@"thisString"] == 1) 
```

但是 compare 方法总是为我返回 1，即使与不同的字符串进行比较也是如此。

这样做的正确方法是什么，我应该期待什么结果？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-19T07:18:49.040

首先，您使用`==`运算符来比较两个对象指针（类型为`NSString *`）。因此，当指针相同时返回 true，而不是字符串具有相同内容时。如果你想比较两个字符串是否相同，你应该使用`isEqualToString:`or `isEqual:`(`isEqual:`更通用，因为它适用于所有类型的对象)。

其次，当它们相同时`compare:`返回`0`( )，当第一个大于第二个时返回( )。所以实际上它*只有*在它们不同时才返回 1（特别是当第一个大于第二个时）。`NSOrderSame``1``NSOrderedDescending`

 ** * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-19T07:11:10.067

```
[returnedString isEqualToString: @"thisString"] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T07:11:41.047

比较两个相同的字符串`compare`时会返回`NSOrderedSame`, 即 0。也可以返回`NSOrderedAscending`, -1, 和`NSOrderedDescending`, 1。

您可能更喜欢使用[`isEqualToString`](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-isEqualToString_)which 返回 YES 或 NO。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-17T18:14:11.870

```
if ([returnedString isEqualToString:@"thisString"])
    NSLog(@"Equal");
else
    NSLog(@"Not Equal"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T07:25:31.463

== 运算符应用于对象时检查指针是否相等。

您必须使用`-compare`方法或其同伴之一 - `compare:options:`-`compare:options:range:`或`-compare:options:range:locale:`返回`NSComparisonResult`( `NSOrderAscending`, `NSOrderSame`, `NSOrderDescending`)

如果你只需要相等比较，你可以使用`-isEqualToString:`which 返回一个`BOOL`值。

# c# - Telerik RadGrid Cast 异常，当按其父类型填充对象数组时

> ID：881336
> 
> 赞同：0
> 
> 时间：2009-05-19T07:02:02.967
> 
> 标签：c#, casting, telerik, radgrid

我刚刚在使用 Telerik RadGrid 时遇到了投射异常。

如果我有一个对象数组作为数据源，它会在 DataBind 事件期间发生

`radgrid1.DataSource = new BaseObject[] { new ChildObject1(), new ChildObject2() };`

其中 ChildObject1 和 ChildObject2 类都继承自 BaseObject 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T07:03:49.873

刚刚找到答案。

`var objects = new BaseObject[] { new ChildObject1(), new ChildObject2() };` `radgrid1.DataSource = new List<BaseObject>(objects);`

# java - 如何模块化（大型）Java 应用程序？

> ID：881340
> 
> 赞同：17
> 
> 时间：2009-05-19T07:03:26.490
> 
> 标签：java, maven-2, refactoring, modularity

我手头有一个相当大的（几个 MLOC）应用程序，我想将其拆分为更易于维护的独立部分。目前该产品由大约 40 个 Eclipse 项目组成，其中许多项目具有相互依赖关系。仅此一项就使连续构建系统不可行，因为每次签入都必须进行大量重建。

是否有“最佳实践”方式

*   识别可以立即分离的部件
*   直观地记录相互依赖关系
*   解开现有代码
*   处理我们需要应用于库的“补丁”（目前通过将它们放在实际库之前的类路径中来处理）

如果有（免费/开放）工具来支持这一点，我将不胜感激。

尽管我对 Maven 没有任何经验，但它似乎强制进行了非常模块化的设计。我现在想知道这是否是可以迭代改造的东西，或者如果要使用它的项目必须从一开始就考虑到模块化的布局。

**编辑 2009-07-10**

我们正在使用[Apache Ant/Ivy](http://ant.apache.org/ivy)拆分一些核心模块。真正有用且设计精良的工具，不会像 maven 那样对您造成太大影响。

我在我的博客上写了一些更一般的细节和个人意见，说明我们为什么要这样做 - 太长了，不能在这里发布，可能不是每个人都感兴趣，所以请自行决定：[www.danielschneller.com](http://www.danielschneller.com/2009/07/modularizing-software-with-antivy-and.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T07:35:18.967

使用[OSGi](http://www.osgi.org/Main/HomePage)可能非常适合您。它将允许从应用程序中创建模块。您还可以以更好的方式组织依赖项。如果您正确定义了不同模块之间的接口，那么您可以使用持续集成，因为您只需重建您在签入时影响的模块。

OSGi 提供的机制将帮助您解开现有代码。由于类加载的工作方式，它还可以帮助您以更简单的方式处理补丁。

[OSGi 的一些概念似乎很适合您，如 wikipedia 所示：](http://en.wikipedia.org/wiki/OSGi)

该框架在概念上分为以下几个方面：

*   Bundles - Bundles 是带有额外清单标头的普通 jar 组件。
*   服务 - 服务层通过为普通的旧 Java 对象 (POJO) 提供发布-查找-绑定模型以动态方式连接捆绑包。
*   Services Registry - 用于管理服务的 API（ServiceRegistration、ServiceTracker 和 ServiceReference）。
*   Life-Cycle - 用于生命周期管理（安装、启动、停止、更新和卸载捆绑包）的 API。
*   模块 - 定义封装和依赖声明的层（包如何导入和导出代码）。
*   安全性 - 通过将捆绑功能限制为预定义功能来处理安全方面的层。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T07:38:53.297

第一：祝你好运和好咖啡。你两个都需要。

我曾经有一个类似的问题。具有可怕循环依赖关系的遗留代码，即使在来自不同包（如 org.example.pkg1.A）的类之间也依赖于 org.example.pk2.B **，**反之亦然。

我从 maven2 和新的 eclipse 项目开始。首先，我尝试确定最常见的功能（日志记录层、常用接口、常用服务）并创建 maven 项目。每次我对某个部件感到满意时，我都会将该库部署到中央 nexus 存储库，以便它几乎可以立即用于其他项目。

所以我慢慢地通过层来工作。maven2 处理依赖项，m2eclipse 插件提供了一个有用的依赖项视图。顺便说一句 - 将 eclipse 项目转换为 maven 项目通常并不难。m2eclipse 可以为您完成，您只需创建一些新文件夹（如 src/main/java）并调整源文件夹的构建路径。只需一两分钟。但是，如果您的项目是 eclipse 插件或 rcp 应用程序，并且您希望 maven 不仅要管理工件，还要构建和部署应用程序，那么预计会遇到更多困难。

就观点而言，eclipse、maven 和 nexus（或任何其他 maven 存储库管理器）是一个很好的开始基础。你很幸运，如果你有一个很好的系统架构文档**并且**这个架构真的被实现了；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T07:58:44.370

我在一个小型代码库（40 kloc）中也有类似的经历。没有°规则”：

*   **使用和**不使用“模块”编译以查看它的用法
*   我从“叶子模块”开始，没有其他依赖的模块
*   我处理了循环依赖（这是一个非常容易出错的任务）
*   使用 maven，可以在 CI 流程中部署大量文档（报告）
*   使用 maven，您始终可以在 netbeans 中查看站点中的内容（带有
    非常好的有向图）
*   使用 maven，您可以在代码库中导入库代码，应用源代码补丁并与您的产品一起编译（有时这很容易，有时却很困难）

还要检查依赖分析器：（ [来源：][[javalobby.org](http://www.javalobby.org/servlet/JiveServlet/download/17-96956-92153685-7907/screenshot.jpg)][）][![](https://i.stack.imgur.com/j7LPe.jpg)](https://i.stack.imgur.com/j7LPe.jpg)

网豆：

[![](https://i.stack.imgur.com/ahBNj.jpg)](https://i.stack.imgur.com/ahBNj.jpg)
[（来源：[zimmer428.net](http://dm.zimmer428.net/wp-content/uploads/2009/02/67pre-dependency-graph.jpg)）]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T19:16:40.690

对于现有系统迁移到 Maven 是很痛苦的。但是它可以轻松应对100多个模块项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T22:21:58.087

您需要决定的第一件事是您将迁移到什么基础设施。它应该是许多独立维护的模块（转换为单独的 Eclipse 项目），还是您将其视为一个单独的代码块，它是作为一个整体进行版本控制和部署的。第一个非常适合迁移到类似 Maven 的构建环境 - 后者用于同时包含所有源代码。

在任何情况下，您都需要运行持续集成系统。您的首要任务是自动构建代码库，这样您就可以让 CI 系统监视您的源存储库并在您更改内容时重新构建它。我决定在这里使用非 Maven 方法，我们专注于拥有一个简单的 Eclipse 环境，因此我使用 ant4eclipse 和 Team ProjectSet 文件（我们无论如何都使用）创建了一个构建环境。

下一步将摆脱循环依赖——这将使您的构建更简单，摆脱 Eclipse 警告，并最终让您进入“签出、编译一次、运行”阶段。这可能需要一段时间 :-( 当您迁移方法和类时，不要移动它们，而是提取或委托它们并留下它们的旧名称并将它们标记为已弃用。这会将您的解开与重构分开，并允许代码“外部”您的项目仍然可以使用您的项目中的代码。

您将从允许移动文件和保留历史记录的源存储库中受益。CVS 在这方面非常薄弱。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T07:35:15.893

我不会推荐 Maven 作为遗留源代码库。只是试图调整一切以适应它，它可能会给你带来很多麻烦。

我想您需要做的是对您的项目进行架构布局。一个工具可能会有所帮助，但最重要的部分是组织模块的逻辑视图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-22T16:34:04.273

它不是免费的，但[Structure101](http://structure101.com/products/structure101/)会为您提供尽可能好的工具支持，以达到您的所有要点。但为了记录，我有偏见，所以你可能也想看看 SonarJ 和 Lattix。;-)

# .net - .net 3.5 框架和 IIS 7.0 使用 sqlserver 会话状态时是否需要序列化属性

> ID：881350
> 
> 赞同：3
> 
> 时间：2009-05-19T07:07:32.863
> 
> 标签：.net, asp.net, sql-server

我想知道如果以下错误，

*System.Web.HttpException：无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象*

是由于没有序列化属性引起的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T07:18:19.523

当您使用 StateServer 或 SQL Server 会话状态时，您存储在会话中的所有对象都必须是可序列化的。对于您自己的类，这通常可以通过使用 [Serializable] 属性标记它们来轻松修复，但对于第三方提供的类，没有简单的修复。

如果你一直遇到这个问题，你可能会考虑在每个请求上重建你的数据，而不是完全使用会话状态，但这是另一个讨论...... :-)

# sharepoint - SharePoint 调查，根据答案询问 n 次

> ID：881353
> 
> 赞同：1
> 
> 时间：2009-05-19T07:07:42.177
> 
> 标签：sharepoint, survey

我们需要实施一项调查，该调查将允许以下内容：

*   问题1：您拥有多少辆汽车？
*   答案：下拉列表（值范围从 1 - 5）

根据这个问题的答案，我们需要问同样的一组问题 5 次。例如，你的车是什么颜色和什么牌子的……等等。

有没有办法通过使用 OOB 功能/InfoPath 表单的 SharePoint 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T10:51:08.577

要成为 OOTB，我看到两个选项：InfoPath（如果您有 MOSS Enterprise，最好是 Forms Services）或调查列表。InfoPath 解决方案会更好，但设置时间会更长（可能需要几个小时而不是 30 分钟）。此外，如果您没有 MOSS Enterprise，则无法使用 InfoPath Forms Services，并且每个人都必须在桌面上安装 InfoPath 客户端。

对于 InfoPath，这只是用所需的逻辑设计表单。您不需要任何代码。我只想问你最初的问题，然后为每组后续问题设置一个部分。在部分的显示选项卡中，您可以使用条件逻辑根据第一个问题的答案隐藏部分。如果您愿意，您的所有答案都可以提升到 SharePoint 表单库字段。

我认为调查列表将更像是一个杂项（技术术语）。它具有有限的分支逻辑功能，因此它可能会有点奇怪。在调查中，您可以根据该问题的答案分支到另一个问题。所以，你可以这样排序你的问题（基本上是倒着的）：

1.  你有多少辆车？（如果 4 分支到问题 #4，如果 3 分支到问题 #6，如果 2 分支到 #8，如果 1 分支到 #10）
2.  车#5 问题#1
3.  车#5 问题#2
4.  车#4 问题#1
5.  车#4 问题#2
6.  车#3 问题#1
7.  车#3 问题#2
8.  车#2 问题#1
9.  车#2 问题#2
10.  车#1 问题#1
11.  车#1 问题#2

也许其他人可以通过调查列表提出更好的解决方案？

# java - 在运行时扩展 JPA 实体数据

> ID：881355
> 
> 赞同：5
> 
> 时间：2009-05-19T07:08:09.463
> 
> 标签：java, hibernate, jpa, runtime

我需要允许客户端用户在运行时扩展 JPA 实体包含的数据。换句话说，我需要在运行时向实体表添加一个*虚拟列。*此*虚拟列*仅适用于某些*数据行*，并且可能存在相当多的这些*虚拟列*。因此，我不想在数据库中创建实际的附加列，而是想使用代表这些*虚拟列*的附加实体。

例如，考虑以下情况。我有一个*Company*实体，它有一个标记为*Owner*的字段，其中包含对*公司**Owner*的引用。在运行时，客户端用户决定属于特定*所有者的所有**公司*都应具有标记为*ContactDetails*的额外字段。

 ***我的初步设计使用两个额外的实体来实现这一点。第一个基本上代表*虚拟列*，包含字段名称和预期值类型等信息。另一个代表实际数据并将实体行连接到*虚拟列*。例如，第一个实体可能包含数据“ContactDetails”，而第二个实体包含“555-5555”。

这是做这件事的正确方法吗？有更好的选择吗？*此外，在加载原始实体时自动*加载此数据的最简单方法是什么？我希望我的 DAO 调用返回实体及其*扩展*。

编辑：我将示例从标有*类型*的字段（可能是*合作伙伴*或*客户*）更改为当前版本，因为它令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-15T14:54:46.010

也许更简单的替代方法是向每个公司添加一个 CLOB 列并将扩展存储为 XML。与您的解决方案相比，这里有一组不同的权衡，但只要额外的数据不需要 SQL 可访问（没有索引、fkey 等），它可能会比您现在所做的简单。

这也意味着，如果您对额外数据有一些奇特的逻辑，则需要以不同的方式实现它。例如，如果您需要所有可能的扩展类型的列表，则必须单独维护它。或者，如果您需要搜索功能（通过电话号码查找客户），您将需要 lucene 或类似的解决方案。

如果您有兴趣，我可以详细说明。

编辑：

要启用搜索，您需要类似[lucene 之](http://lucene.apache.org/java/docs/)类的东西，它是对任意数据进行自由文本搜索的出色引擎。还有[hibernate-search](https://www.hibernate.org/410.html)，它使用注释等直接将lucene与hibernate集成在一起——我没有使用过它，但我听说过它的好消息。

对于获取/写入/访问数据，您基本上是在处理 XML，因此应该应用任何 XML 技术。最好的方法实际上取决于实际内容及其使用方式。我建议研究[XPath](http://www.w3schools.com/XPath/default.asp)以进行数据访问，并可能考虑定义您自己的休眠[用户类型](http://www.jroller.com/eyallupu/entry/hibernate_compositeusertype_and_annotations)，以便将所有访问封装到一个类中，而不仅仅是普通的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-09T07:27:37.997

我遇到的问题比我希望的要多，因此我决定降低第一次迭代的要求。我目前正在尝试仅在整个*公司实体上允许此类**扩展*，换句话说，我正在放弃整个*所有者*要求。所以这个问题可以改写为“如何在运行时向实体添加*虚拟列*（另一个实体中充当附加列的条目）？”

 ***我目前的实现如下（过滤掉无关部分）：

```
@Entity
class Company {
  // The set of Extension definitions, for example "Location"
  @Transient
  public Set<Extension> getExtensions { .. }

  // The actual entry, for example "Atlanta"
  @OneToMany(fetch = FetchType.EAGER)
  @JoinColumn(name = "companyId")
  public Set<ExtensionEntry> getExtensionEntries { .. }
}

@Entity
class Extension {
  public String getLabel() { .. }
  public ValueType getValueType() { .. } // String, Boolean, Date, etc.
}

@Entity
class ExtensionEntry {
  @ManyToOne(fetch = FetchType.EAGER)
  @JoinColumn(name = "extensionId")
  public Extension getExtension() { .. }

  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "companyId", insertable = false, updatable = false)
  public Company getCompany() { .. }

  public String getValueAsString() { .. }
} 
```

原样的实现允许我加载*Company*实体，Hibernate 将确保它的所有*ExtensionEntries*也被加载，并且我可以访问与这些*ExtensionEntries*对应的*Extensions*。换句话说，例如，如果我想在网页上显示这些附加信息，我可以访问所有必需的信息，如下所示：

```
Company company = findCompany();
for (ExtensionEntry extensionEntry : company.getExtensionEntries()) {
  String label = extensionEntry.getExtension().getLabel();
  String value = extensionEntry.getValueAsString();
} 
```

然而，这存在许多问题。首先，当使用带有@OneToMany 的 FetchType.EAGER 时，Hibernate 使用外连接，因此将返回重复的 Companies（每个 ExtensionEntry 一个）。这可以通过使用 Criteria.DISTINCT_ROOT_ENTITY 来解决，但这反过来会导致我的分页错误，因此这是一个不可接受的答案。另一种方法是将 FetchType 更改为 LAZY，但这意味着我将始终“手动”加载*ExtensionEntries*。据我了解，例如，如果我加载了 List of 100 *Companies*，我将不得不循环并查询其中的每一个，生成 100 条 SQL 语句，这在性能方面是不可接受的。

我遇到的另一个问题是，理想情况下，我想在加载*公司*时加载所有*扩展*。我的意思是我希望名为 getExtensions() 的 @Transient getter 返回任何*Company的所有**Extensions*。*这里的问题是Company*和*Extension*之间没有外键关系，因为*Extension*不适用于任何单个*Company*实例，而是适用于所有实例。目前，我可以使用下面提供的代码来解决这个问题，但是在访问引用的实体时这将不起作用（例如，如果我有一个实体*Employee*引用了*********Company*，我通过 employee.getCompany() 检索的*公司*不会加载*扩展）：*********

 **```
List<Company> companies = findAllCompanies();
List<Extension> extensions = findAllExtensions();
for (Company company : companies) {
  // Extensions are the same for all Companies, but I need them client side
  company.setExtensions(extensions); 
} 
```

这就是我目前的情况，我不知道如何继续解决这些问题。我在想我的整个设计可能有缺陷，但我不确定如何尝试和接近它。

欢迎任何和所有的想法和建议！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T03:08:00.577

Company、Partner 和 Customer 的示例实际上是多态性的一个很好的应用程序，它通过 JPA 的继承来支持：您将有以下 3 种策略可供选择：单表、每类表和连接。您的描述听起来更像是联合战略，但不一定。

您也可以只考虑一对一（或零）关系。然后，您需要为虚拟列的每个值建立这种关系，因为它的值代表不同的实体。因此，您将与合作伙伴实体建立关系，并与客户实体建立另一个关系，并且两者都可以为空，也可以都不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-13T14:27:27.760

使用模式装饰器并将您的实体隐藏在 decoratorClass 中，再见

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-18T12:24:47.430

恕我直言，使用 EAV 模式是错误的选择，因为性能问题和报告问题（许多连接）。挖掘解决方案我在这里找到了其他东西：http: [//www.infoq.com/articles/hibernate-custom-fields](http://www.infoq.com/articles/hibernate-custom-fields)

# c - 如何使用 Perl 将 C 注释从行首移动到行尾？

> ID：881363
> 
> 赞同：1
> 
> 时间：2009-05-19T07:11:28.847
> 
> 标签：c, perl, comments

在当前循环中运行时如何检查下一行？另外，如何将 C 注释移动到表格的行尾？

我有一个这样的文件：

```
array_table=
{
    /* comment 1*/ (unsigned int a); 
    /* comment 2*/ (unsigned int b); 
    /* comment 3*/ (unsigned int c); 
    /* comment 4*/ (unsigned int d);
} 
```

我的意图是将这些评论移到行尾，例如：

```
array_table=
{
    (unsigned int a); /* comment 1*/
    (unsigned int b); /* comment 2*/
    (unsigned int c); /* comment 3*/ 
    (unsigned int d); /* comment 4*/
} 
```

我怎样才能在 Perl 中做到这一点？任何人都可以帮助我处理 Perl 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T07:25:07.500

像这样的东西应该工作：

```
while (<>) {
    chomp;
    if ($_ =~ m%^(.*)/\*(.*)\*/(.*)$%) {
            printf "%s%s/*%s*/%s", $1, $3, $2, $/;
    } else {
            print $_ . $/;
    }
} 
```

括号中的表达式匹配注释之前的任何内容、注释本身以及注释之后的任何内容。然后`printf`以正确的顺序重新组合它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T07:35:38.857

好的-重申我认为您要的内容，您要解析文件并查找表单的分配

```
foo=
   {
       ....
   } 
```

在块内，您希望将注释移动到行尾。有很多方法可以做到这一点，最优雅的通​​常与您在循环中所做的其他事情有关。想到的就是记住最后一行包含“=”这一事实，并在匹配行首的“{”时使用该事实。使用我最喜欢的 perl 结构之一，标量上下文中的范围运算符。所以这会给...

```
my $last_line_an_assignment = 0;
while (<DATA>)
{
    if (($last_line_an_assignment && m!^\s*{!) .. m!^\s*}!)
    {
        s!(/\*.*?\*/)\s*(.*)$!$2 $1!;
    }

    print $_;

    $last_line_an_assignment = m!=!;
}

__DATA__

  /* comment other */ (unsigned int a); 

  other_assignment=
     /* not a table */ 12;

  array_table=
      {
        /* comment 1*/ (unsigned int a); 
        /* comment 2*/ (unsigned int b); 
        /* comment 3*/ (unsigned int c); 
        /* comment 4*/ (unsigned int d);
      }

  /* comment other */ (unsigned int a); 
```

您可以将数据打印到另一个文件，也可以使用 perl 的“-i”选项更新文件

```
local (@ARGV) = ($filename);
local ($^I) = '.bak';
while (<>)
{
    # make changes to line AND call print
} 
```

这会导致 perl 对 $filename 进行备份（扩展名为 '.bak'），然后循环中的所有打印调用将覆盖文件内容 - 有关更多信息，请参阅“perlrun”中的“-i”选项手册页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:37:07.333

如果您只想更改`array_table`语句中的注释：

```
perl -pe's,^(\s*)(/\*.*?\*/)\s*(.*?)[ \t]*$,$1$3 $2, if/^\s*array_table\s*=/../^\s*\}/' 
```

否则简单地说：

```
perl -pe's,^(\s*)(/\*.*?\*/)\s*(.*?)[ \t]*$,$1$3 $2,' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T16:49:24.397

使用 Regexp::Common 而不是自己滚动。例如

```
use Regexp::Common;

while ($_ = <DATA>) {
    chomp;
    if (s/(^\s*)($RE{comment}{C})//) {
        print $1, $_, $2, "\n";
    }
    else {
        print $_, "\n";
    }
}

__DATA__
              /* comment other */ (unsigned int a); 

              other_assignment=
                 /* not a table */ 12;

              array_table=
                  {
                    /* comment 1*/ (unsigned int a); 
                    /* comment 2*/ (unsigned int b); 
                    /* comment 3*/ (unsigned int c); 
                    /* comment 4*/ (unsigned int d);
                  }

              /* comment other */ (unsigned int a); 
```

# iphone - 找出用于构建 SQLite 的编译选项的方法

> ID：881370
> 
> 赞同：15
> 
> 时间：2009-05-19T07:14:38.360
> 
> 标签：iphone, cocoa, cocoa-touch, sqlite

在我的性能测试中，我发现 Apple 在 iPhone 3.0 上提供的 SQLite 版本比我自己编译的合并 SQLite 版本快得多。所以我的问题是，有没有办法找出 Apple 确实使用了哪些编译选项？

是否有一个测试应用程序可以打印出所有默认设置的 pragams 和 sqlite3_config 设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T15:41:24.463

您可以使用[compile_options](http://www.sqlite.org/pragma.html#pragma_compile_options) pragma（或链接文档中提到的相关函数）查看构建 SQLite 时使用的编译时选项。但是，此编译指示（以及相关函数）的可用性似乎取决于它是否在编译时启用。SQLite 文档说：

> 通过在编译时指定 SQLITE_OMIT_COMPILEOPTION_DIAGS 选项，可以省略对诊断函数 sqlite3_compileoption_used() 和 sqlite3_compileoption_get() 的支持。

因此很可能您的发行版在编译时没有启用此功能，这意味着您可能无法查看这些选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T10:50:59.043

除了尝试所有可能的排列并测试每个排列以查看哪些行为相同（除非 Apple 进行了自定义修改）之外，没有办法询问 libsqlite 的确切配置。您可以调用的最好的方法`sqlite3_libversion`返回 sqlite 的版本号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T13:05:44.163

看起来 pragma 设置中唯一的不同是 cache_size 默认为 2000，但在 iPhone 上为 500。

在某些系统上，可以通过以下方式读取编译器设置： objdump --full-contents --section .GCC.command.line

# php - 如何在 XML_Serializer 的序列化中将任意元素与 CDATA 绑定？

> ID：881375
> 
> 赞同：0
> 
> 时间：2009-05-19T07:18:28.667
> 
> 标签：php, xml-serialization, cdata

```
$serializer = new XML_Serializer($options); 
$serializer->serialize($some_array);
$output = $serializer->getSerializedData(); 
```

我想在 CDATA 中用上面的绳子包围生成 XML 的任意元素，但我做不到。有什么好的方法吗？

```
XML_SERIALIZER_OPTION_CDATA_SECTIONS = true 
```

当我将此选项与它一起使用时，CDATA 会坚持所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-13T14:29:04.927

只需将 cdata 标签放在您想要在 cdata 中的文本周围，然后关闭自动 cdata 选项。

# maven-2 - 无法让 Grails 1.1 与 Maven 2.1 一起使用

> ID：881379
> 
> 赞同：-2
> 
> 时间：2009-05-19T07:20:18.070
> 
> 标签：maven-2, grails

当我尝试使用 Maven 2.0.9 或 2.1 构建 Grails 1.1 项目时，我收到此错误：

```
[INFO] [grails:maven-compile {execution: default}]
Running pre-compiled script
Environment set to development
Plugin [debug-1.0.2] not installed, resolving..
Reading remote plugin list ...
Plugin list file corrupt, retrieving again..
   [delete] Deleting: C:\Dokumente und Einstellungen\DIGULAA\.grails\1.1\plugins-list-core.xml
      [get] Getting: http://svn.codehaus.org/grails/trunk/grails-plugins/.plugin-meta/plugins-list.xml
      [get] To: C:\Dokumente und Einstellungen\DIGULAA\.grails\1.1\plugins-list-core.xml
.
      [get] last modified = Thu May 14 10:44:43 CEST 2009
Error reading remote plugin list [org.apache.xerces.jaxp.DocumentBuilderFactoryImpl], building locally...
Plugins list cache is corrupt [org.apache.xerces.jaxp.DocumentBuilderFactoryImpl]. Re-creating..
Unable to list plugins, please check you have a valid internet connection: org.apache.xerces.jaxp.DocumentBuilderFactoryImpl
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Unable to start Grails

Embedded error: java.lang.reflect.InvocationTargetException
Cannot get property 'plugin' on null object 
```

我的猜测是 XML 解析器有问题，因为插件列表文件没有损坏；Grails 只是无法阅读它，开发人员吞下了异常:(

有没有人有同样的问题？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T16:36:36.633

你又试过了吗？我认为插件存储库几天前无法正常工作。

# .net - 静态方法

> ID：881385
> 
> 赞同：1
> 
> 时间：2009-05-19T07:24:04.320
> 
> 标签：.net, garbage-collection

> **可能的重复：**
> [静态成员的垃圾收集](https://stackoverflow.com/questions/851370/garbage-collection-of-static-members)

将垃圾收集器清理静态方法和静态类

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T07:27:41.100

方法和类没有被清理。对象是。

如果您有一个对象的静态引用，那么一旦静态超出范围（即卸载 AppDomain 时），相关对象将被清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T07:32:39.843

重复：[静态成员的垃圾收集](https://stackoverflow.com/questions/851370/garbage-collection-of-static-members)

我还可以提一下，何时收集 OBJECT。不会收集方法和类。

```
public class TestClass
{
   public static Hashtable h_object = new Hashtable();
}

TestClass.h_object = null; 
//* here it has no more references and it will be added to GC. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T07:28:16.950

据我所知，收集 AppDomain 时会发生这种情况（即您的应用程序关闭时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T07:29:00.550

如果您引用的是静态字段，那么没有，没有必要。根据定义，它们会一直保留到流程（或 AppDomain）结束。

如果您在静态方法中引用由代码分配的局部变量，那么堆分配的内存将由 GC 清理

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T07:38:22.517

static 意味着只有一个这种类型的对象。最好的例子是 main 方法。它只存在一次。所以垃圾收集也会收集这些对象，但不会在程序中自动收集，只是在最后。

除了 Lukas Šalkauskas 所说的“some_object”。“some_other_obj” = null;

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-19T07:28:44.327

不会。在您关闭应用程序域之前，不会删除静态类。

# python - 创建守护进程时执行双叉的原因是什么？

> ID：881388
> 
> 赞同：192
> 
> 时间：2009-05-19T07:25:18.437
> 
> 标签：python, unix, daemon

我正在尝试在 python 中创建一个守护进程。我发现了[以下问题](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)，其中有一些我目前正在关注的好资源，但我很好奇为什么需要双叉。我在 google 上四处搜寻，发现大量资源声明这是必要的，但不是为什么。

有人提到这是为了防止守护进程获取控制终端。如果没有第二个分叉，它将如何做到这一点？有什么影响？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2011-03-22T04:19:44.600

我试图理解双叉并在这里偶然发现了这个问题。经过大量研究，这是我想出来的。希望它能帮助任何有同样问题的人更好地澄清事情。

在 Unix 中，每个进程都属于一个组，该组又属于一个会话。这是层次结构……</p>

会话（SID）→进程组（PGID）→进程（PID）

进程组中的第一个进程成为进程组组长，会话中的第一个进程成为会话组长。每个会话都可以有一个与之关联的 TTY。只有会话负责人可以控制 TTY。对于真正被守护的进程（在后台运行），我们应该确保会话领导者被杀死，这样会话就不可能控制 TTY。

我在我的 Ubuntu 上从[这个站点运行了 Sander Marechal 的 python 示例守护程序。](https://gist.github.com/dcai/1075904/6f7be00f7f411d5c2e7cd1691dcbb68efacb789c)这是我的评论的结果。

```
1\. `Parent`    = PID: 28084, PGID: 28084, SID: 28046
2\. `Fork#1`    = PID: 28085, PGID: 28084, SID: 28046
3\. `Decouple#1`= PID: 28085, PGID: 28085, SID: 28085
4\. `Fork#2`    = PID: 28086, PGID: 28085, SID: 28085 
```

请注意，该进程是 之后的会话负责`Decouple#1`人，因为它是`PID = SID`. 它仍然可以控制 TTY。

请注意，`Fork#2`不再是会话负责人`PID != SID`。此过程永远无法控制 TTY。*真正被妖魔化了。*

我个人觉得术语 fork-two 令人困惑。更好的习惯用法可能是 fork-decouple-fork。

其他感兴趣的链接：

*   Unix 进程 - [http://www.win.tue.nl/~aeb/linux/lk/lk-10.html](http://www.win.tue.nl/~aeb/linux/lk/lk-10.html)

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-05-01T11:54:52.977

严格来说，双叉与将守护进程重新设置为`init`. 重新养育孩子所需要的只是父母必须退出。这可以只用一个叉子来完成。此外，单独执行双叉不会将守护进程重新设置为`init`; 守护进程的父进程*必须*退出。换句话说，当派生一个适当的守护进程时，父进程总是退出，以便守护进程重新成为`init`.

那么为什么是双叉呢？[POSIX.1-2008](http://pubs.opengroup.org/onlinepubs/9699919799/toc.htm)第 11.1.3 节“[控制终端](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap11.html#tag_11_01_03)”有答案（强调添加）：

> 会话的控制终端由会话领导者以实现定义的方式**分配。**`O_NOCTTY`如果会话领导者没有控制终端，并且在不使用选项（请参阅 参考资料）的情况下打开尚未与会话关联的终端设备文件，则`open()`终端是否成为会话领导者的控制终端是实现定义的。如果一个**不是会话领导者**的进程打开了一个终端文件，或者该`O_NOCTTY`选项被使用 on `open()`，**则该终端不应成为调用进程的控制终端**。

这告诉我们，如果一个守护进程做这样的事情......

```
int fd = open("/dev/console", O_RDWR); 
```

...然后守护进程*可能会*获得`/dev/console`它的控制终端，这取决于守护进程是否是会话领导者，以及取决于系统实现。如果程序首先确保它不是会话负责人，则程序可以*保证*上述调用不会获得控制终端。

通常，在启动守护程序时`setsid`（从调用后的子进程调用`fork`）以将守护程序与其控制终端分离。但是，调用`setsid`也意味着调用进程将成为新会话的会话领导者，这为守护进程重新获取控制终端留下了可能性。双叉技术确保守护进程不是会话领导者，从而保证对 的调用`open`，如上例所示，不会导致守护进程重新获取控制终端。

双叉技术有点偏执。*如果您知道*守护程序永远不会打开终端设备文件，则可能没有必要。此外，在某些系统上，即使守护程序确实打开了终端设备文件，也可能没有必要，因为该行为是实现定义的。然而，没有实现定义的一件事是只有会话负责人才能分配控制终端。**如果一个进程不是会话领导者，它就不能分配控制终端。**因此，如果您想偏执并确保守护进程不会无意中获取控制终端，而不管任何实现定义的细节，那么双叉技术是必不可少的。

* * *

## 回答 #3

> 赞同：119
> 
> 时间：2009-05-19T07:42:54.490

查看问题中引用的代码，理由是：

> 分叉第二个孩子并立即退出以防止僵尸。这会导致第二个子进程成为孤立的，使 init 进程负责其清理。而且，由于第一个孩子是没有控制终端的会话领导者，因此它有可能通过将来打开终端来获得一个（基于 System V 的系统）。第二个分叉保证子进程不再是会话领导者，从而阻止守护进程获取控制终端。

因此，这是为了确保守护进程重新成为 init 的父进程（以防启动守护进程的进程长期存在），并消除守护进程重新获取控制 tty 的任何机会。因此，如果这两种情况都不适用，那么一个分叉就足够了。“ [Unix Network Programming - Stevens](https://rads.stackoverflow.com/amzn/click/com/0201433079) ”对此有很好的部分。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-05-19T07:32:26.770

取自[坏 CTK](http://blog.charcoalphile.com/2008/05/03/python-tips-for-writing-daemons/)：

“在某些版本的 Unix 上，你不得不在启动时进行双叉，以便进入守护程序模式。这是因为单叉不能保证与控制终端分离。”

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-19T07:33:54.723

根据 Stephens 和 Rago 撰写的“Unix 环境中的高级编程”，第二个 fork 更多的是推荐，这样做是为了保证守护程序不会在基于 System V 的系统上获取控制终端。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-19T07:43:39.513

一个原因是父进程可以立即为子进程 wait_pid() ，然后忘记它。当孙子去世时，它的父母是 init，它将等待（）它 - 并将其从僵尸状态中取出。

结果是父进程不需要知道分叉的子进程，并且还可以从库等分叉长时间运行的进程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-19T07:33:16.037

如果 daemon() 调用成功，则父调用 _exit()。最初的动机可能是允许父母在孩子进行守护进程时做一些额外的工作。

它也可能基于一个错误的信念，即有必要确保守护进程没有父进程并重新设置为 init 的父进程 - 但是一旦父进程在单叉案例中死亡，无论如何都会发生这种情况。

所以我想这一切最终都归结为传统——只要父母在短时间内死亡，一个叉子就足够了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-19T07:56:23.810

一个不错的讨论似乎是在[http://www.developerweb.net/forum/showthread.php?t=3025](http://www.developerweb.net/forum/showthread.php?t=3025)

从那里引用mlampkin：

> ...将 setsid( ) 调用视为做事​​的“新”方式（与终端分离），然后将 [second] fork( ) 调用视为处理 SVr4 的冗余...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-28T03:15:02.643

用这种方式可能更容易理解：

*   The first fork and setsid will create a new session (but the process ID == session ID).
*   The second fork makes sure the process ID != session ID.

# hibernate - StaticAliasToBeanResultTransformer

> ID：881391
> 
> 赞同：0
> 
> 时间：2009-05-19T07:25:33.193
> 
> 标签：hibernate, search, hibernate-search

我正在使用休眠搜索 1.1。我想应用 ResultTransformer 操作后查询来匹配目标数据结构。

但我无法在**休眠搜索**jar 中找到该类（StaticAliasToBeanResultTransformer）。我在哪里可以找到这门课？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T07:31:49.203

你的意思是;

org.hibernate.transform.AliasToBeanResultTransformer？如果是这样，它包含在发行版中的主要休眠 jar 中。

[参见 javadocs](https://www.hibernate.org/hib_docs/v3/api/org/hibernate/transform/AliasToBeanResultTransformer.html)

# winforms - DataGridView 确保应用程序范围内的一致性

> ID：881393
> 
> 赞同：0
> 
> 时间：2009-05-19T07:26:15.297
> 
> 标签：winforms, datagridview

在我们的应用程序中，我们将有几个查找器对话框。finder 对话框的 UI 很简单（文本框、datagridview 结果、确定按钮、取消按钮）。不同对话框之间唯一真正的变化是一些标签文本和网格绑定源。我们希望强制执行某些属性（如全行选择和只读模式）和事件（如单击和双击），以便当有人想要添加对话框时，我们知道用户将获得一致的行为，因为该对话框实现了相同的我们应用程序中的每个其他对话框都实现的属性和事件。

我创建了一个基本查找器表单，其中包含一些属性和确定/取消按钮 + 它们的点击事件。我被困在datagridview上。在我们的一个查找器对话框中，确保所有数据网格视图共享相似特征的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:39:29.363

如果不同对话框之间的唯一区别是某个标签的文本和 datagridview 的绑定源，为什么不简单地对所有对话框使用相同的表单？您可以轻松地让表单公开属性，通过这些属性您可以控制这些差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:39:20.090

今天我实现了一个继承自 DataGridView 的自定义网格 (DataGridViewFinder)。此网格仅特定于我们的查找器对话框。网格设置了默认属性，因此它与我们所有其他查找器网格一致。另外，因为我知道这种类型的网格只会出现在 finder 对话框中，所以我已经覆盖了一些将在基本 finder 上设置属性和调用方法的事件。

我喜欢这种方法，因为它确保当我将自定义网格放在查找器对话框上时，某些属性和事件已经为我处理了。会有很多查找器对话框，我怀疑这会节省很多时间。有人看到这个实现有什么问题吗？

```
protected override void OnEnter(EventArgs e)
{
    base.OnEnter(e);
    if (Parent is BaseFinder)
    {
        (Parent as BaseFinder).Mode = FinderMode.Ok;
    }
}

protected override void OnDoubleClick(EventArgs e)
{
    base.OnDoubleClick(e);
    if (Parent is BaseFinder)
    {
        (Parent as BaseFinder).btOk_Click(this, e);
    }
} 
```

# c# - 在DetailsView的TemplateField中查找用户控件

> ID：881416
> 
> 赞同：2
> 
> 时间：2009-05-19T07:34:10.433
> 
> 标签：c#, asp.net, .net, detailsview, findcontrol

我有一个要发回的 DetailsView - 其中有一个 UserControl。我很难在回发数据中找到它。

举个例子：

```
<asp:DetailsView ID="dvDetailsView" runat="Server" AutoGenerateRows="false">
<Fields>
  <asp:TemplateField>
    <ItemTemplate>
      Some text here
    </ItemTemplate>
    <EditItemTemplate>
      <uc:UserControl ID="ucUserControl" runat="server" />
    </EditItemTemplate>
    <InsertItemTemplate>
      <uc:UserControl ID="ucUserControl" runat="server" />
    </InsertItemTemplate>
  </asp:TemplateField>
</Fields>
</asp:DetailsView> 
```

当我回发时，我会假设我会做这样的事情：

```
MyUserControlType ucUserControl = dvDetailsView.FindControl("ucUserControl") as MyUserControlType; 
```

但这什么也没找到。事实上，我什至在 QuickWatch 中四处走动都找不到这个宝贝……

我需要做什么才能找到这个东西？

**编辑：**事实证明我的用户控件 ID 正在更改 - 但为什么呢？我在插入和编辑模板上确实有相同的 ID，但将其注释掉并没有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T07:39:30.457

**控制后** `DataBind`，您将使用：

```
dvDetailsView.Rows[0].Cells[0].FindControl("ucUserControl") 
```

并确保您仅在编辑模式下执行此操作，因为该控件仅存在于`EditItemTemplate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T00:22:42.880

事实证明，用户控件名称已更改 - 我的用户控件，标记为“ucUserControl”，其名称已更改为通用名称 - 'ctl01'。

于是，做了一个`dvSituation.Rows[0].Cells[0].FindControl("ctl01")`发现控件。

为了找到这个 ID，我只是查看了正在呈现的 HTML 元素，并从 id 中检查了父元素，例如 ' `ctl00_MainContent_dvDetailsView_ctl01_lblLabel`'，其中 lblLabel 出现在 ucUserControl 上。

rows 列是基于 0 的字段数索引，如果您指定了 headertemplate，则单元格索引将为 1。

**编辑**：天哪！有人（真的不是我，我发誓）隐藏了控件类的 ID 属性！

```
public partial class UserControl : BaseControl
{
  public int Id;
} 
```

这意味着当 ASP.Net 生成 id 时，它不能，它只是为控件分配了一个通用的 Id（在本例中为“ctl01”），而不是实际的名称。

哇。

# asp.net-mvc - （沮丧）在 ASP.NET MVC 中找到正确的方法来创建类似门户的站点（使用 portlet）

> ID：881422
> 
> 赞同：1
> 
> 时间：2009-05-19T07:38:15.043
> 
> 标签：asp.net-mvc

我的头脑真的要爆炸了，我很沮丧。关于这个问题，我已经在网上搜索了 1 周，我在这个问题上看到了很多矛盾，我不知道哪种方法是正确的。

*   有些人喜欢在[这篇文章中](http://blog.wekeroad.com/blog/aspnet-mvc-using-helper-classes-and-services/)说使用

    <%=Html.RenderUserControl("~/Gravatar/GravatarImage.ascx")%> 但在评论中，人们对使用背后的代码大发雷霆，人们在谈论破坏 MVC 模式和可测试性。

*   在[这篇文章](http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/)中，这个家伙建议使用 Partialrequests，但有些人又在谈论打破 MVC 模式和可测试性。

*   在[这篇文章](http://stephenwalther.com/blog/archive/2008/07/07/asp-net-mvc-tip-14-create-a-template-helper-method.aspx)中，这个家伙提出了一种创建模板的方法，但它不再起作用了。

*   然后是子控制器，渲染动作等......

这真的很令人困惑，让我想自杀。我真的很喜欢 MVC 的简单性，但似乎创建共享实体是某种火箭科学；真的那么难还是我错过了什么？

我要的很清楚；我有一个门户网站，例如

*   您在博客页面中，但在右栏中，您有来自 IMDB 服务或其他任何内容的最新电影列表。
*   我想登录，在所有页面加入新闻信。
*   基于某些逻辑或请求加载这些模块的能力。
*   能够异步加载这些小型 portlet 或实体（通过加载进度 GIF）

当然，这些要求与当前页面视图或它们的控制器无关（这是您可以混搭和混合的门户网站的整体理念）。在 Web 窗体中，您只需创建一个该死的用户控件，将其拖到页面、母版页即可；地狱，您甚至可以根据特定逻辑动态加载它们。

所以，如果有人能告诉我如何在不违反 MVC 的牛顿或爱因斯坦定律的情况下实现这种功能，我认为很多人都和我一样在同一条船上，所以我认为答案会让我们很多人受益。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:22:47.167

如果您不是 mvc 纯粹主义者，我认为这是最好的解决方案 [http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/ 我](http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-22T09:46:24.833

GitHub 上的[Maverick](http://github.com/anurse/MaVeriCk/)开源内容管理系统项目是一个很好的起点。但它目前处于早期预览状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T18:44:12.170

这不就是局部视图的用途吗？

# c# - Html 敏捷包 - 解析

> ID：881425
> 
> 赞同：4
> 
> 时间：2009-05-19T07:39:09.130
> 
> 标签：c#, .net, html-parsing, html-agility-pack

我想从简单的网站上抓取一个事实列表。每个事实都包含在一个`<li>`标签中。我将如何使用 Html Agility Pack 做到这一点？有更好的方法吗？

`<li>`标签中包含的唯一内容是事实，仅此而已。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T07:40:31.360

就像是：

```
List<string> facts = new List<string>();
foreach (HtmlNode li in doc.DocumentNode.SelectNodes("//li")) {
    facts.Add(li.InnerText);
} 
```

# nhibernate - NHibernate 删除操作

> ID：881432
> 
> 赞同：1
> 
> 时间：2009-05-19T07:41:16.990
> 
> 标签：nhibernate

NHibernate 不执行删除操作的可能原因有哪些？

```
 public bool Delete(MyType model)
 {
     using (var session = _sessionFactory.OpenSession())
         session.Delete(model);
     return true;
 } 
```

我试图调用 session.Clear() 方法，这也没有帮助。我有点困惑。：/

在这种情况下，MyType 只有 Id&Name。创建操作成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T07:44:47.157

刷新会话，或将删除放入事务中并提交事务。

NHibernate 将 - 默认情况下 - 尽量推迟 SQL 语句的执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T07:57:07.447

这有助于...

```
using (var session = _sessionFactory.OpenSession())
{
    using (ITransaction tx = session.BeginTransaction())
    {
        session.Delete(model);
        session.Flush();
        tx.Commit();
    }
} 
```

# c# - 具有自定义 IEqualityCompare 的 HashSet 构造函数由 lambda 定义？

> ID：881438
> 
> 赞同：6
> 
> 时间：2009-05-19T07:44:35.470
> 
> 标签：c#, .net, lambda, iequalitycomparer

目前`HashSet<T>`，允许您自己定义相等比较的构造函数是`HashSet<T>(IEqualityComparer<T> comparer)`构造函数。我想将此 EqualityComparer 定义为 lambda。

我发现[这篇博客文章](http://brendan.enrick.com/blog/linq-your-collections-with-iequalitycomparer-and-lambda-expressions/)创建了一个类，该类允许您通过 lambda 生成比较器，然后使用扩展方法隐藏该类的构造以执行例如 except()。

现在我想做同样的事情，但使用构造函数。是否可以通过扩展方法创建构造函数？还是有另一种方法我可以以某种方式创建一个`HashSet<T>(Func<T,T,int> comparer)`？

**--UPDATE--**
为清楚起见，这是我正在尝试完成的（一个片段）的手绘版本：

```
HashSet<FileInfo> resultFiles = new HashSet<FileInfo>(
    srcPath.GetFiles(),
    new LambdaComparer<FileInfo>(
        (f1, f2) => f1.Name.SubString(10).Equals(f2.Name.SubString(10)))); 
```

或更理想地

```
HashSet<FileInfo> resultFiles = new HashSet<FileInfo>(
    srcPath.GetFiles(),
    (f1, f2) => f1.Name.SubString(10).Equals(f2.Name.SubString(10))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T07:52:30.653

不，您不能添加构造函数（即使使用扩展方法）。

假设您有一些从 a`Func<T,T,int>`到 an 的神奇方法`IEqualityComparer<T>`（如果您可以引用它，我很想阅读该博客文章）-那么您可以做的最接近的可能是：

```
public static class HashSet {
    public static HashSet<T> Create<T>(Func<T, T, int> func) {
        IEqualityComparer<T> comparer = YourMagicFunction(func);
        return new HashSet<T>(comparer);
    }
} 
```

然而; 我怀疑你可以用 lambda 做什么来表示平等......你有两个概念要表达：散列和真正的平等。你的 lambda 会是什么样子？如果您试图推迟到子属性，那么也许 a`Func<T,TValue>`选择属性，并在`EqualityComparer<TValue>.Default`内部使用......类似：

```
class Person {
    public string Name { get; set; }
    static void Main() {
        HashSet<Person> people = HashSetHelper<Person>.Create(p => p.Name);
        people.Add(new Person { Name = "Fred" });
        people.Add(new Person { Name = "Jo" });
        people.Add(new Person { Name = "Fred" });
        Console.WriteLine(people.Count);
    }
}
public static class HashSetHelper<T> {
    class Wrapper<TValue> : IEqualityComparer<T> {
        private readonly Func<T, TValue> func;
        private readonly IEqualityComparer<TValue> comparer;
        public Wrapper(Func<T, TValue> func,
            IEqualityComparer<TValue> comparer) {
            this.func = func;
            this.comparer = comparer ?? EqualityComparer<TValue>.Default;
        }
        public bool Equals(T x, T y) {
            return comparer.Equals(func(x), func(y));
        }

        public int GetHashCode(T obj) {
            return comparer.GetHashCode(func(obj));
        }
    }
    public static HashSet<T> Create<TValue>(Func<T, TValue> func) {
        return new HashSet<T>(new Wrapper<TValue>(func, null));
    }
    public static HashSet<T> Create<TValue>(Func<T, TValue> func,
        IEqualityComparer<TValue> comparer)
    {
        return new HashSet<T>(new Wrapper<TValue>(func, comparer));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:49:29.803

马克是对的。单个 lambda 没有简单的方法来表达 Equals 和 GetHashCode 所需的信息。如果您提供的 GetHashCode 为“相等”元素返回不同的哈希值，则会导致不正确的行为。

这是我的妥协实现。它将允许任何通用 Func （如 Marc，我忽略了 int 因为你没有解释它），这将给出正确的（因为它符合合同），但非常低效的行为。

我建议您坚持使用满足您需求的真正 IEqualityComparer。不过，遗憾的是 C# 不支持匿名内部类。

```
public static class HashSetDelegate
{
    public static HashSet<T> Create<T>(Func<T, T, bool> func)
    {
    return new HashSet<T>(new FuncIEqualityComparerAdapter<T>(func));
    }

    private class FuncIEqualityComparerAdapter<U> : IEqualityComparer<U>
    {
    private Func<U, U, bool> func;
    public FuncIEqualityComparerAdapter(Func<U, U, bool> func)
    {
        this.func = func;
    }

    public bool Equals(U a, U b)
    {
        return func(a, b);
    }

    public int GetHashCode(U obj)
    {
        return 0;
    }  

    }
}

public class HashSetTest
{
    public static void Main()
    {
    HashSet<string> s = HashSetDelegate.Create((string a, string b) => string.Compare(a, b, true) == 0);
    }
} 
```

# scheduled-tasks - Schedule app in BREW

> ID：881443
> 
> 赞同：2
> 
> 时间：2009-05-19T07:46:37.293
> 
> 标签：scheduled-tasks, brew-framework, brewmp

Is there any way to launch get a BREW application started according to a schedule? This is basically the same question as [this one](https://stackoverflow.com/questions/48446/scheduling-windows-mobile-apps-to-run), only for BREW instead of Windows Mobile.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T00:36:01.807

Yes. There is. See documentation on the ISHELL_SetAlert() It up to you to check if Alerts that been assigned survive reboot of the device. There is a trick that you can run some code when receiving alert without becoming foreground application by not calling IShell_Activate But it requires a special care.

# c# - 在 C# / .Net 中解析 Lua 数据结构的最简单方法

> ID：881445
> 
> 赞同：12
> 
> 时间：2009-05-19T07:47:16.840
> 
> 标签：c#, parsing, lua

任何人都知道在 C# 或任何 .Net 库中解析 Lua 数据结构的简单方法吗？这将类似于 JSON 解码，除了 Lua 而不是 javascript。

在这一点上，我似乎需要自己写，但希望已经有一些东西了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T07:18:26.870

感谢你们两个，我找到了我正在寻找的使用 LuaInterface

这是我想阅读的 Lua 中的一个数据结构（“c:\sample.lua”）：

```
TestValues = {
    NumbericOneMillionth = 1e-006,
    NumbericOnehalf = 0.5,
    NumbericOne = 1,
    AString = "a string"
} 
```

下面是一些使用 LuaInterface 读取 Lua 数据结构的示例代码：

```
Lua lua = new Lua();

var result = lua.DoFile("C:\\sample.lua");

foreach (DictionaryEntry member in lua.GetTable("TestValues")) {
    Console.WriteLine("({0}) {1} = {2}", 
        member.Value.GetType().ToString(), 
        member.Key, 
        member.Value);
} 
```

这是示例代码写入控制台的内容：

```
(System.String) AString = a string
(System.Double) NumbericOneMillionth = 1E-06
(System.Double) NumbericOnehalf = 0.5
(System.Double) NumbericOne = 1 
```

为了弄清楚如何使用这个库，我在 Reflector 中打开了 LuaInterface.dll 并用谷歌搜索了成员函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T21:25:35.543

亚历山大所说的。毕竟，实验室是 Lua 的家。

具体来说，[LuaInterface](http://code.google.com/p/luainterface/)可以允许 Lua 解释器嵌入到您的应用程序中，以便您可以使用 Lua 自己的解析器来读取数据。这类似于将 Lua 嵌入到 C/C++ 应用程序中以用作配置/数据文件语言。LuaCLR项目在某些时候可能[也会](http://code.google.com/p/luaclr/)有成果，但它可能还不够成熟。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-30T22:50:47.263

[LsonLib](https://github.com/rstarkov/LsonLib)可以解析 Lua 数据结构，对其进行操作并将结果序列化回 Lua 文本。全面披露：我是作者。它是纯 C# 并且没有依赖项。

鉴于：

```
MY_VAR = { "Foo", ["Bar"] = "Baz" }
ANOTHER = { 235, nil } 
```

基本用法：

```
var d = LsonVars.Parse(File.ReadAllText(somefile));

d["MY_VAR"][1].GetString()     // returns "Foo"
d["MY_VAR"]["Bar"].GetString() // returns "Baz"
d["MY_VAR"][2]                 // throws

d["ANOTHER"][1].GetString()    // throws because it's an int
d["ANOTHER"][1].GetInt()       // returns 235
d["ANOTHER"][2]                // returns null
d["ANOTHER"][1].GetStringLenient() // returns "235"

d["ANOTHER"][1] = "blah";      // now { "blah", nil }
d["ANOTHER"].Remove(2);        // now { "blah" }

File.WriteAllText(somefile, LsonVars.ToString(d)); // save changes 
```

（它实际上是我们内部使用的 JSON 库的一个相当简单的端口，因此它具有相当多的功能，并且可能会留下一些 JSON 痕迹）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T04:40:10.323

[您可能（也可能不会）在Lablua 项目](http://www.lua.inf.puc-rio.br/section/2)中找到您需要的东西。

无论如何，请不要犹豫，在[Lua 邮件列表](http://www.lua.org/lua-l.html)上提出您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-02-01T09:02:11.343

我还没有看过这个，现在保存一个链接： [http://www.youpvp.com/blog/post/LuaParse-C-parser-for-World-of-Warcraft-saved-variable-files。 aspx](http://www.youpvp.com/blog/post/LuaParse-C-parser-for-World-of-Warcraft-saved-variable-files.aspx)

不幸的是，LuaInterface 仅被打包为在 x86 上运行，所以我正在寻找替代方案。这是来源：

```
/*
 * Denis Bekman 2009
 * www.youpvp.com/blog
 --
 * This code is licensed under a Creative Commons Attribution 3.0 United States License.
 * To view a copy of this license, visit http://creativecommons.org/licenses/by/3.0/us/
 */

using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;
using System.IO;
using System.Text.RegularExpressions;
using System.Xml;
using System.Net;

namespace YouPVP
{
    public class LuaParse
    {
        List<string> toks = new List<string>();

        public string Id { get; set; }
        public LuaObject Val { get; set; }
        public void Parse(string s)
        {
            string qs = string.Format("({0}[^{0}]*{0})", "\"");
            string[] z = Regex.Split(s, qs + @"|(=)|(,)|(\[)|(\])|(\{)|(\})|(--[^\n\r]*)");

            foreach (string tok in z)
            {
                if (tok.Trim().Length != 0 && !tok.StartsWith("--"))
                {
                    toks.Add(tok.Trim());
                }
            }

            Assign();
        }
        protected void Assign()
        {
            if (!IsLiteral)
                throw new Exception("expect identifier");
            Id = GetToken();
            if (!IsToken("="))
                throw new Exception("expect '='");
            NextToken();
            Val = RVal();
        }
        protected LuaObject RVal()
        {
            if (IsToken("{"))
                return LuaObject();
            else if (IsString)
                return GetString();
            else if (IsNumber)
                return GetNumber();
            else if (IsFloat)
                return GetFloat();
            else
                throw new Exception("expecting '{', a string or a number");
        }
        protected LuaObject LuaObject()
        {
            Dictionary<string, LuaObject> table = new Dictionary<string, LuaObject>();
            NextToken();
            while (!IsToken("}"))
            {
                if (IsToken("["))
                {
                    NextToken();
                    string name = GetString();
                    if (!IsToken("]"))
                        throw new Exception("expecting ']'");
                    NextToken();
                    if (!IsToken("="))
                        throw new Exception("expecting '='");
                    NextToken();
                    table.Add(name, RVal());
                }
                else
                {
                    table.Add(table.Count.ToString(), RVal());//array
                }
                if (!IsToken(","))
                    throw new Exception("expecting ','");
                NextToken();
            }
            NextToken();
            return table;
        }

        protected bool IsLiteral
        {
            get
            {
                return Regex.IsMatch(toks[0], "^[a-zA-Z]+[0-9a-zA-Z_]*");
            }
        }
        protected bool IsString
        {
            get
            {
                return Regex.IsMatch(toks[0], "^\"([^\"]*)\"");
            }
        }
        protected bool IsNumber
        {
            get
            {
                return Regex.IsMatch(toks[0], @"^\d+");
            }
        }
        protected bool IsFloat
        {
            get
            {
                return Regex.IsMatch(toks[0], @"^\d*\.\d+");
            }
        }
        protected string GetToken()
        {
            string v = toks[0];
            toks.RemoveAt(0);
            return v;
        }
        protected LuaObject GetString()
        {
            Match m = Regex.Match(toks[0], "^\"([^\"]*)\"");
            string v = m.Groups[1].Captures[0].Value;
            toks.RemoveAt(0);
            return v;
        }
        protected LuaObject GetNumber()
        {
            int v = Convert.ToInt32(toks[0]);
            toks.RemoveAt(0);
            return v;
        }
        protected LuaObject GetFloat()
        {
            double v = Convert.ToDouble(toks[0]);
            toks.RemoveAt(0);
            return v;
        }
        protected void NextToken()
        {
            toks.RemoveAt(0);
        }
        protected bool IsToken(string s)
        {
            return toks[0] == s;
        }
    }

    public class LuaObject : System.Collections.IEnumerable
    {
        private object luaobj;

        public LuaObject(object o)
        {
            luaobj = o;
        }
        public System.Collections.IEnumerator GetEnumerator()
        {
            Dictionary<string, LuaObject> dic = luaobj as Dictionary<string, LuaObject>;
            return dic.GetEnumerator();
        }
        public LuaObject this[int ix]
        {
            get
            {
                Dictionary<string, LuaObject> dic = luaobj as Dictionary<string, LuaObject>;
                try
                {
                    return dic[ix.ToString()];
                }
                catch (KeyNotFoundException)
                {
                    return null;
                }
            }
        }
        public LuaObject this[string index]
        {
            get
            {
                Dictionary<string, LuaObject> dic = luaobj as Dictionary<string, LuaObject>;
                try
                {
                    return dic[index];
                }
                catch (KeyNotFoundException)
                {
                    return null;
                }
            }
        }
        public static implicit operator string(LuaObject m)
        {
            return m.luaobj as string;
        }
        public static implicit operator int(LuaObject m)
        {
            return (m.luaobj as int? ?? 0);
        }
        public static implicit operator LuaObject(string s)
        {
            return new LuaObject(s);
        }
        public static implicit operator LuaObject(int i)
        {
            return new LuaObject(i);
        }
        public static implicit operator LuaObject(double d)
        {
            return new LuaObject(d);
        }
        public static implicit operator LuaObject(Dictionary<string, LuaObject> dic)
        {
            return new LuaObject(dic);
        }
    }
} 
```

# c# - 在 Compact Framework 上的 c# 中对列表进行数据绑定

> ID：881446
> 
> 赞同：2
> 
> 时间：2009-05-19T07:48:04.903
> 
> 标签：c#, data-binding, compact-framework

我目前正在学习在 VS2008 中使用 c# 为 .net 紧凑框架开发，并有一个数据绑定查询。该列表在 Form1_Load 中绑定得很好，但是当我将其他人添加到列表中时，他们不会出现在 dataGrid1 中（尽管如果我删除并重新添加绑定，他们确实会出现）。添加人员后有什么需要做的吗？

```
 class Person
    {
        private string firstname;
        private string surname;

        public string FirstName { get { return firstname; } set { firstname = value; } }
        public string Surname { get { return surname; } set { surname = value; } }

        public Person(string F, string S)
        {
            this.firstname = F;
            this.surname = S;
        }
    }

    private void btnAdd_Click(object sender, EventArgs e)
    {
        people.Add(new Person(tbFirstName.Text, tbSurname.Text));
    }

    class People : List<Person>
    {
    }

    People people = new People();

    private void Form1_Load(object sender, EventArgs e)
    {
        people.Add(new Person("Jim", "Jones"));
        people.Add(new Person("Al", "Hill"));
        people.Add(new Person("Darth", "Vader"));
        dataGrid1.DataSource = people;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T07:54:38.777

将您对“人”的声明更改为：

```
class People : BindingList<Person> { } 
```

当列表更改时，普通旧版`List<T>`没有基础事件来告诉数据绑定 UI。使用`BindingList<T>`应该让你继续前进。

# java - 查看一个是 Map 但其中键可以是值的数据结构，值可以是键

> ID：881449
> 
> 赞同：2
> 
> 时间：2009-05-19T07:49:44.807
> 
> 标签：java, algorithm, data-structures, map

**Map**从键映射到值，并根据键的知识提供快速访问。

是否存在像 Maps 这样同时支持键值和值访问的数据结构？有时我可能想通过值取消对 Map 的引用，而其他时候则通过键。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T07:53:53.240

不在 JDK 中，但您可以在 Google Collections 中找到一个很好的 BiMap 实现：http: [//google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/BiMap.html](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/BiMap.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T07:55:49.600

[Apache Commons Collections](http://commons.apache.org/collections/index.html)提供了一个用于此目的的[BidiMap 。](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/package-use.html#org.apache.commons.collections.bidimap)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T07:56:25.123

看看[org.apache.commons.collections.BidiMap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/BidiMap.html)。

> 定义一个允许键和值之间双向查找的映射。

# excel - Excel 文档格式不正确

> ID：881452
> 
> 赞同：0
> 
> 时间：2009-05-19T07:50:28.457
> 
> 标签：excel, file-format

我有一个启用宏的工作簿，我将 .xlsm 文件的名称更改为 [FileName].xlsm.zip，然后我解压缩我得到一些文件夹，然后将这些提取的文件夹放入另一个文件夹，然后将其压缩回来并重新更改我现在尝试打开以前的 xlsm 格式的扩展名，但出现无法读取的错误。我不会在这里更改任何内容，只是将其提取并压缩回去。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-17T20:39:20.443

只要您的 excel 文件不受保护，Winzip 就可以正常工作。诀窍是您不能压缩包含所有解压缩 xml 的文件夹。相反，您必须打开该文件夹，选择其中的所有内容并压缩您的选择。

或者，如果您安装了 winzip 的命令行功能，您可以使用以下内容进行压缩和解压缩。

```
wzunzip -d test.xlsx unzipped_test\ 
```

和

```
wzzip -p -r test.xlsx unzipped_test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T02:39:33.713

好的，我已经用 .xlsx 文件做了同样的事情（我必须对格式做一个演示，所以我需要学习文件结构）。**不要**使用 WinZip。我只能使用 Windows 的内置压缩（压缩）文件夹实用程序成功地“重新压缩”文件。这很麻烦（您必须将文件从 .zip 存档中复制出来，然后在完成后使用资源管理器浏览器将其粘贴回去，而不是最后重新压缩整个存档），但它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-10T01:38:44.600

"""我解压缩得到一些文件夹，然后将这些提取的文件夹放入另一个文件夹并重新压缩"""

如果这意味着您重新排列了 xlsm 文件中的文件/文件夹层次结构，那么您遇到“无法读取的错误”也就不足为奇了。简短的回答：不要那样做。你想达到什么目的？

[稍后添加] 如果是“winzip”问题，您可以尝试 7-Zip ( [http://www.7-zip.org/](http://www.7-zip.org/) )。

我能够做到以下几点：使用 Excel 2007 创建非常小的（2 个单元格）xlsx，使用 7-Zip 打开文件，深入到共享字符串 xml 组件，点击 F4 -- 使用记事本打开文件进行编辑（大概可以配置另一个编辑器），更改出现在两个单元格中的文本，从记事本保存，退出记事本，7-Zip 检测到更改，询问我是否要更新存档，我说是，存档已更新，退出 7-Zip，打开更新的存档又名 xlsx 与 Excel 2007，没有投诉，文本更改正确显示。

# c# - C# 类到 XML (xmlserializaion) 问题

> ID：881455
> 
> 赞同：3
> 
> 时间：2009-05-19T07:52:02.870
> 
> 标签：c#, xml

目前我正在使用 xml 并且必须从 C# object serializaion 填充 xml 文件。下面的 Suppost 是我想要做的 xml 格式。

```
<DVD>
<Starring>
    <Star position="actor">
        Tom Hanks
    </Star>
   <Star position="actress">
        Robin Wright
    </Star>
<Title>Forrest Gump</Title>
</Starring>
</DVD> 
```

我有两个课程 DVD 和 Star。

```
Public class DVD
{
  string title;
  public string Title{get{return title;}set {title=value;}}
  List<Star> Starring=new List<Star>();
}
public class Star
{
   string star;
   string pos;
   [XmlAttribute]
   public string Position{get{return pos;}set{pos=value;}}
   //Actually i don't want this property as a xmlelement
    public String StarName
   {
     get{return star;}
     set {star=value;} 
   }
} 
```

序列化的结果是

```
<DVD>
<Starring>
    <Star position="actor">
        <StarName>Tom Hanks</StarName>
    </Star>
   <Star position="actress">
        <StarName>Robin Wright</StarName>
    </Star>
<Title>Forrest Gump</Title>
</Starring>
</DVD> 
```

我的问题是我找不到在没有 StarName 节点的情况下如何包装演员和女演员姓名的方法。有没有办法做到这一点？任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T07:56:55.730

在 StarName 属性上使用 XmlTextAttribute。

# c# - 如何更新 ms 访问表

> ID：881463
> 
> 赞同：1
> 
> 时间：2009-05-19T07:54:36.950
> 
> 标签：c#, ms-access

如何更新包含多行单列的 ms 访问表。该表显示在 a 上`listview`，每当我从中删除一行时，`listview`该行都应从表中删除。我怎样才能做到这一点。使用 C#。我创建了一个 oledb 连接，并从列表视图检查项目中删除了一行。那是代码：

```
if (listView1.CheckedItems.Count > 0)
{
    foreach (ListViewItem lvi in listView1.CheckedItems)
       listView1.Items.Remove(lvi);
} 
```

现在如何更新 ms 访问表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T07:56:37.900

只需创建一个对行执行 sql DELETE 查询的 OleDB 命令。

编辑：
该表是否仅包含一列？该列是您在列表视图中显示的内容？然后你可以做这样的事情：

```
using (OleDBCommand deleteCommand = connection.CreateCommand())
{
  deleteCommand.CommandText = "DELETE FROM tablename WHERE colname=@rowvalue";
  deleteCommand.Parameters.AddWithValue("@rowvalue", YourRowValue);
  deleteCommand.ExecuteNonQuery();
} 
```

此代码片段假定您有一个打开的 OleDBConnection 命名连接。只需将 tablename 替换为您的表的名称，将 colname 替换为列的名称，并将 YourRowValue 替换为您要删除的值，您应该有一些有用的东西。

要删除所有选中的项目，您应该将上面的代码封装在一个方法中，比如说`DeleteItem(string name)`并使用以下内容：

```
List<ListViewItem> itemsToBeDeleted = new List<ListViewItem>(listView1.CheckedItems); 
foreach (ListViewItem itemToDelete in itemsToBeDeleted)
{ 
   DeleteItem(itemToDelete.Text);
   listView1.Items.Remove(itemToDelete); 
} 
```

# wcf - 保存 SoapUI 项目时如何保存响应

> ID：881466
> 
> 赞同：4
> 
> 时间：2009-05-19T07:54:49.790
> 
> 标签：wcf, web-services, testing, soap, soapui

我正在使用**SoapUI 2.5.1** - 评估版

**在测试用例中，如何将响应消息与请求一起保存在 SoapUI 项目中？**

以下是当前发生的情况： 当我创建一个 Web 服务 SoapUI 项目并发送 SOAP 请求以进行操作时，我得到一个响应 XML。现在保存soapUI 并退出该工具后——当我再次打开它时，我看到响应XML 选项卡为空。 [![替代文字](https://i.stack.imgur.com/BXmK7.jpg)](https://i.stack.imgur.com/BXmK7.jpg)

为什么只保存请求而不保存响应 - 这是 SoapUI 中的错误吗？

谢谢-阿伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T13:20:10.523

正如 Thomas Bratt 所指出的，没有保存响应，因为在大多数情况下，这样做没有意义。SoapUI 用于测试；如果你想保存你的测试结果，你必须明确地这样做。

要保存特定响应消息，请使用响应编辑器的上下文菜单（或按 Ctrl+S），然后将其保存到文件中。如果需要，您可以使用相同的上下文菜单（或按 Ctrl+L）重新加载它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T12:49:58.947

不会保存响应，因为它可能会因调用而异。

我认为逻辑是只需要保存请求。服务器每次都会自动生成响应。

例如，“获取时间”SOAP 方法每次都会返回不同的结果。我在工作中使用 SOAP-UI 与代理视频连接请求并返回错误代码的 SOAP 服务器进行通信。错误代码每次都不一样，所以保存它没有意义。

您可以使用请求的上下文菜单来创建测试用例。这将允许您根据 WSDL 模式检查响应，并断言响应不包含 SOAP 错误。

# c# - 为什么要在 C# 中捕获并重新抛出异常？

> ID：881473
> 
> 赞同：641
> 
> 时间：2009-05-19T07:56:55.073
> 
> 标签：c#, exception-handling, try-catch

我正在看文章C# -可序列化 DTO 上的*[数据传输对象。](http://www.codeproject.com/KB/cs/datatransferobject.aspx)*

文章包括这段代码：

```
public static string SerializeDTO(DTO dto) {
    try {
        XmlSerializer xmlSer = new XmlSerializer(dto.GetType());
        StringWriter sWriter = new StringWriter();
        xmlSer.Serialize(sWriter, dto);
        return sWriter.ToString();
    }
    catch(Exception ex) {
        throw ex;
    }
} 
```

文章的其余部分看起来很理智和合理（对于菜鸟来说），但是 try-catch-throw 会抛出 WtfException ......**这不完全等同于根本不处理异常吗？**

尔格：

```
public static string SerializeDTO(DTO dto) {
    XmlSerializer xmlSer = new XmlSerializer(dto.GetType());
    StringWriter sWriter = new StringWriter();
    xmlSer.Serialize(sWriter, dto);
    return sWriter.ToString();
} 
```

还是我错过了一些关于 C# 中错误处理的基本知识？它与 Java 几乎相同（减去检查的异常），不是吗？...也就是说，他们都改进了 C++。

堆栈溢出问题*[重新抛出无参数捕获和不做任何事情之间的区别？](https://stackoverflow.com/questions/717489)*似乎支持我的论点，即 try-catch-throw 是无操作的。

* * *

**编辑：**

只是为将来发现此线程的任何人总结...

**不要**

```
try {
    // Do stuff that might throw an exception
}
catch (Exception e) {
    throw e; // This destroys the strack trace information!
} 
```

堆栈跟踪信息对于确定问题的根本原因至关重要！

**做**

```
try {
    // Do stuff that might throw an exception
}
catch (SqlException e) {
    // Log it
    if (e.ErrorCode != NO_ROW_ERROR) { // filter out NoDataFound.
        // Do special cleanup, like maybe closing the "dirty" database connection.
        throw; // This preserves the stack trace
    }
}
catch (IOException e) {
    // Log it
    throw;
}
catch (Exception e) {
    // Log it
    throw new DAOException("Excrement occurred", e); // wrapped & chained exceptions (just like java).
}
finally {
    // Normal clean goes here (like closing open files).
} 
```

在不太具体的异常之前捕获更具体的异常（就像 Java 一样）。

* * *

**参考：**

*   [MSDN - 异常处理](http://msdn.microsoft.com/en-us/library/ms229005.aspx)
*   [MSDN - try-catch（C# 参考）](http://msdn.microsoft.com/en-us/library/0yd65esw.aspx)

* * *

## 回答 #1

> 赞同：486
> 
> 时间：2009-05-19T08:02:45.000

第一的; 文章中的代码这样做的方式是邪恶的。`throw ex`将异常中的调用堆栈重置到此 throw 语句所在的位置；丢失有关异常实际创建位置的信息。

其次，如果你只是像这样捕获并重新抛出，我认为没有任何附加值，上面的代码示例在`throw ex`没有 try-catch 的情况下也一样好（或者，考虑到一点，甚至更好）。

但是，在某些情况下，您可能想要捕获并重新抛出异常。日志记录可能是其中之一：

```
try 
{
    // code that may throw exceptions    
}
catch(Exception ex) 
{
    // add error logging here
    throw;
} 
```

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2009-05-19T08:03:23.267

不要这样做，

```
try 
{
...
}
catch(Exception ex)
{
   throw ex;
} 
```

您将丢失堆栈跟踪信息...

要么做，

```
try { ... }
catch { throw; } 
```

或者

```
try { ... }
catch (Exception ex)
{
    throw new Exception("My Custom Error Message", ex);
} 
```

您可能想要重新抛出的原因之一是如果您正在处理不同的异常，例如

```
try
{
   ...
}
catch(SQLException sex)
{
   //Do Custom Logging 
   //Don't throw exception - swallow it here
}
catch(OtherException oex)
{
   //Do something else
   throw new WrappedException("Other Exception occured");
}
catch
{
   System.Diagnostics.Debug.WriteLine("Eeep! an error, not to worry, will be handled higher up the call stack");
   throw; //Chuck everything else back up the stack
} 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2009-05-19T08:20:21.640

C#（在 C# 6 之前）不支持 CIL“过滤异常”，而 VB 支持，因此在 C# 1-5 中重新抛出异常的一个原因是您在 catch() 时没有足够的信息确定您是否想要实际捕获异常。

例如，在 VB 中你可以做

```
Try
 ..
Catch Ex As MyException When Ex.ErrorCode = 123
 .. 
End Try 
```

...它不会处理具有不同 ErrorCode 值的 MyExceptions。在 v6 之前的 C# 中，如果 ErrorCode 不是 123，则必须捕获并重新抛出 MyException：

```
try 
{
   ...
}
catch(MyException ex)
{
    if (ex.ErrorCode != 123) throw;
    ...
} 
```

[从 C# 6.0 开始，您可以](http://www.thomaslevesque.com/2015/06/21/exception-filters-in-c-6/)像使用 VB 一样进行过滤：

```
try 
{
  // Do stuff
} 
catch (Exception e) when (e.ErrorCode == 123456) // filter
{
  // Handle, other exceptions will be left alone and bubble up
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2009-09-18T09:50:33.167

我有如下代码的主要原因：

```
try
{
    //Some code
}
catch (Exception e)
{
    throw;
} 
```

这样我就可以在 catch 中有一个断点，它有一个实例化的异常对象。我在开发/调试时经常这样做。当然，编译器会对所有未使用的 e 发出警告，理想情况下应该在发布构建之前将它们删除。

不过，它们在调试过程中很好。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-05-19T08:03:22.300

重新抛出异常的一个正当理由可能是您想向异常添加信息，或者可能将原始异常包装在您自己的制作中：

```
public static string SerializeDTO(DTO dto) {
  try {
      XmlSerializer xmlSer = new XmlSerializer(dto.GetType());
      StringWriter sWriter = new StringWriter();
      xmlSer.Serialize(sWriter, dto);
      return sWriter.ToString();
  }
  catch(Exception ex) {
    string message = 
      String.Format("Something went wrong serializing DTO {0}", DTO);
    throw new MyLibraryException(message, ex);
  }
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-05-19T08:11:11.770

> 这不完全等同于根本不处理异常吗？

不完全一样，也不一样。它重置异常的堆栈跟踪。尽管我同意这可能是一个错误，因此是错误代码的示例。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-05-19T08:02:32.690

你不想抛出 ex - 因为这会丢失调用堆栈。请参阅*[异常处理](https://msdn.microsoft.com/en-us/library/ms229005.aspx)*(MSDN)。

是的，try...catch 没有做任何有用的事情（除了丢失调用堆栈 - 所以实际上更糟 - 除非出于某种原因您不想公开此信息）。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-05-27T15:35:30.960

当您为库或 dll 编写函数时，这可能很有用。

这种重新抛出结构可用于有目的地重置调用堆栈，以便您从函数本身获取异常，而不是查看函数内部单个函数抛出的异常。

我认为这只是为了使抛出的异常更干净，并且不会进入库的“根”。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-10-14T16:56:17.780

人们没有提到的一点是，虽然 .NET 语言并没有真正做出适当的区分，但是当异常发生时是否应该*采取行动以及是否会**解决*它的问题实际上是不同的问题。在许多情况下，人们应该根据没有希望解决的异常采取行动，并且在某些情况下，“解决”异常所需要的只是将堆栈展开到某个点——不需要进一步的行动.

由于人们应该只“捕获”可以“处理”的东西这一普遍智慧，许多在发生异常时应该采取行动的代码却没有。例如，很多代码会获取锁，将受保护的对象“临时”置于违反其不变量的状态，然后将其置于合法状态，然后在其他人看到该对象之前释放锁。如果在对象处于危险无效状态时发生异常，通常的做法是在对象仍处于该状态时释放锁。更好的模式是在对象处于“危险”条件时发生异常，明确使锁无效，因此任何未来获取它的尝试都将立即失败。

在大多数 .NET 语言中，代码根据异常采取行动的唯一方法是`catch`（即使它知道它不会解决异常），执行有问题的行动，然后重新`throw`）。如果代码不关心抛出什么异常，另一种可能的方法是使用`ok`带有`try/finally`块的标志；将`ok`标志设置`false`为块`true`之前，块退出之前以及块`return`内的任何内容之前。然后，在 内`finally`，假设如果`ok`未设置，则必须发生异常。这种方法在语义上比`catch`/好`throw`，但丑陋且难以维护。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-08-09T11:47:08.870

虽然许多其他答案提供了很好的例子来说明为什么您可能想要重新抛出异常，但似乎没有人提到“最终”的场景。

例如，您有一个设置光标的方法（例如设置为等待光标），该方法有几个退出点（例如 if () return;），并且您希望确保光标在方法结束。

为此，您可以将所有代码包装在 try/catch/finally 中。在finally中将光标设置回右光标。为了不掩埋任何有效的异常，请在 catch 中重新抛出它。

```
try
{
    Cursor.Current = Cursors.WaitCursor;
    // Test something
    if (testResult) return;
    // Do something else
}
catch
{
    throw;
}
finally
{
     Cursor.Current = Cursors.Default;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-05-19T08:04:03.110

这取决于您在 catch 块中所做的事情，以及您是否要将错误传递给调用代码。

您可能会说`Catch io.FileNotFoundExeption ex`然后使用替代文件路径或类似的路径，但仍然会引发错误。

还做`Throw`而不是`Throw Ex`允许您保留完整的堆栈跟踪。Throw ex 从 throw 语句重新启动堆栈跟踪（我希望这是有道理的）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-07-30T15:12:20.113

catch-throw 的一个可能原因是禁用堆栈更深处的任何异常过滤器以防止向下过滤（[随机旧链接](http://www.pluralsight.com/community/blogs/keith/archive/2005/03/31/7149.aspx)）。但是，当然，如果这是意图，那里会有评论说这样的话。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-05-19T08:19:11.677

实际上，在您发布的代码示例中，捕获异常是没有意义的，因为在捕获时没有做任何事情，它只是重新抛出，实际上它弊大于利，因为调用堆栈丢失了.

但是，如果发生异常，您将捕获异常以执行一些逻辑（例如关闭文件锁的 sql 连接，或者只是一些日志记录），然后将其扔回调用代码进行处理。这在业务层中比前端代码更常见，因为您可能希望实现业务层的编码器来处理异常。

尽管在您发布的示例中捕获异常没有意义，但要重新迭代。不要那样做！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-09-16T07:22:00.817

对不起，但许多“改进设计”的例子仍然闻起来很糟糕，或者可能极具误导性。尝试 { } catch { log; throw } 完全没有意义。异常日志记录应该在应用程序的中心位置完成。无论如何，异常都会在堆栈跟踪中冒泡，为什么不将它们记录在靠近系统边界的某个地方呢？

当您将上下文（即一个给定示例中的 DTO）序列化到日志消息中时，应谨慎使用。它可以很容易地包含敏感信息，可能不想到达所有可以访问日志文件的人的手中。而且，如果您不向异常添加任何新信息，我真的看不出异常包装的意义。好的旧 Java 对此有一定的意义，它要求调用者知道在调用代码时应该期待什么样的异常。由于您在 .NET 中没有此功能，因此在我见过的至少 80% 的情况下，包装没有任何好处。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-09-22T19:53:01.980

除了其他人所说的之外，请参阅[我](https://stackoverflow.com/questions/1461369/what-is-the-point-of-this-catch-statement/1461513#1461513)对相关问题的回答，该问题表明捕获和重新抛出不是无操作（它在 VB 中，但某些代码可以从 VB 调用 C#）。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-12-25T22:41:10.177

大多数答案都在谈论场景捕获日志重新抛出。

不要在代码中编写它，而是考虑使用 AOP，特别是带有 OnExceptionOptions IncludeParameterValue 和 IncludeThisArgument的[Postsharp.Diagnostic.Toolkit](http://www.sharpcrafters.com/blog/post/Configuring-PostSharp-Diagnostics-Toolkits.aspx)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-12-09T17:08:38.623

`throw`当您没有特定代码来处理当前异常时，或者当您有处理特定错误情况的逻辑但想跳过所有其他情况时，通过重新抛出异常 非常有用。

**例子：**

```
string numberText = "";
try
{
    Console.Write("Enter an integer: ");
    numberText = Console.ReadLine();
    var result = int.Parse(numberText);

    Console.WriteLine("You entered {0}", result);
}
catch (FormatException)
{
    if (numberText.ToLowerInvariant() == "nothing")
    {
        Console.WriteLine("Please, please don't be lazy and enter a valid number next time.");
    }
    else
    {
        throw;
    }
}    
finally
{
    Console.WriteLine("Freed some resources.");
}
Console.ReadKey(); 
```

但是，还有*另一种方法*，在 catch 块中使用**条件子句：**

```
string numberText = "";
try
{
    Console.Write("Enter an integer: ");
    numberText = Console.ReadLine();
    var result = int.Parse(numberText);

    Console.WriteLine("You entered {0}", result);
}
catch (FormatException) when (numberText.ToLowerInvariant() == "nothing")
{
    Console.WriteLine("Please, please don't be lazy and enter a valid number next time.");
}    
finally
{
    Console.WriteLine("Freed some resources.");
}
Console.ReadKey(); 
```

> 这种机制比重新抛出异常更有效，因为 .NET 运行时不必在重新抛出异常对象之前重新构建它。

# delphi - 将旧的 delphi 5 项目转换为图表（也是 vb6）

> ID：881479
> 
> 赞同：2
> 
> 时间：2009-05-19T07:58:49.487
> 
> 标签：delphi, vb6

有谁知道将旧德里 5 项目转换为类图/uml 或任何形式的图表以便于阅读的任何（免费）工具？

此外，如果您知道任何 VB6 工具（同样，最好是免费的）也可以转换为某种形式的图表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T08:16:03.537

没有工具能胜过[ModelMaker](http://www.modelmakertools.com) （不是免费的）

免费试用[ESS 模型](http://essmodel.sourceforge.net/)，它是一个开源项目，可以使用 Delphi 代码（由 Delphi BTW 编写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:12:04.060

不是免费的，但[Modelmaker](http://www.modelmakertools.com/)为 Delphi 完成了这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T10:21:34.470

Turbo Delphi Explorer 是免费的，可以打开 Delphi 5 项目并包含一个模型视图（Together），它允许将类拖放到 Delphi IDE 中的图表中，并具有自动连接以进行类继承。

与往常一样，在使用处理宝贵代码的工具时，不要记得使用备份或源代码控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T10:34:05.413

对于 VB，请查看[Visual UML](http://www.visualuml.com/)。对于 Delphi 和 VB，[Enterprise Architect](http://www.sparxsystems.com.au/products/ea/features.html)都是不错的选择。（它们都不是免费的，VB 和 AFAIK 都没有免费的）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T12:13:54.653

使用名为 convertTo 的商业工具将您的 Delphi 表单转换为 VB 表单。它不会将德里代码转换为 VB。您将不得不手动执行此操作。

我很想知道您为什么要从 Delphi 迁移到 VB6（经典）？

# c# - 如何在 Windows Mobile 中调试 .net 应用程序

> ID：881480
> 
> 赞同：2
> 
> 时间：2009-05-19T07:59:02.853
> 
> 标签：c#, asp.net, windows-mobile

我是移动应用程序开发的新手。

如何在 Windows Mobile 中调试 .net 应用程序。

请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T08:01:21.913

使用调试配置，您应该能够通过将应用程序主动同步到您的移动设备或带有断点等的模拟器来运行。

如果由于某种原因您的断点没有被命中，那么去删除您的 bin/obj 目录以及您的移动部署文件夹，有时 VS 会卡住......并且它不会部署您的新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:23:45.040

或者你可以在**emulator**上调试它，工作方式相同。请记住在设备模拟器管理器中放置模拟器。如果您没有模拟器，请下载适当的版本，例如：

[WM6 SDK](http://www.microsoft.com/downloads/details.aspx?FamilyID=06111A3A-A651-4745-88EF-3D48091A390B&displaylang=en)

您可以模拟每一个细节或真实设备、电池电量、WiFi 连接等。如果您想模拟发送短信或拨打某个号码，请查看“Celural 模拟器”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:27:41.600

这在 Visual Studio 中并不是特别困难，但如果您使用真实设备进行操作，则需要很大的耐心。如“每步 10 秒”。

# nsstring - 如何将 NSString 转换为字节

> ID：881482
> 
> 赞同：17
> 
> 时间：2009-05-19T08:00:44.800
> 
> 标签：nsstring

`NSString *test = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";`

如何将此字符串转换为字节？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-19T08:03:57.807

```
NSData *bytes = [test dataUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-01-30T10:14:25.107

你想要这样的东西：

```
NSString *test=@"ABCDEFGHIJKLMNOPQRSTUVWXYZ";
NSUInteger bytes = [test lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"%i bytes", bytes); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-25T11:08:44.297

**斯威夫特 1.x**

```
extension String {
    var bytes: [Byte] {
        return Array(utf8)
    }
} 
```

* * *

**斯威夫特 2.1.1**

```
extension String {
    var bytes : [UInt8] {
        return Array(utf8)
    }
} 
```

* * *

**Xcode 9 • Swift 4 或更高版本**

```
extension StringProtocol {
    var bytes: [UInt8] { return .init(utf8) }
    var data: Data { return .init(utf8) }
} 
```

* * *

**Xcode 11 • Swift 5.1 或更高版本**

```
extension StringProtocol {
    var bytes: [UInt8] { .init(utf8) }
    var data: Data { .init(utf8) }
} 
```

* * *

测试：

```
"ABCDEFGHIJKLMNOPQRSTUVWXYZ".bytes  // [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90] 
```

# xml - 使用 XPath 选择特定表

> ID：881484
> 
> 赞同：3
> 
> 时间：2009-05-19T08:01:26.237
> 
> 标签：xml, xslt, xpath, screen-scraping

我有一个 XHTML 文档，我想选择其中唯一一个带有 class="index" 的表。

如果我理解正确，后代轴将选择从当前节点直接和间接下降的所有节点，所以这就是我所得到的。

```
//descendant::table[@class="index"] 
```

使用 xmlstarlet 进行测试时，它似乎不起作用。是我的工具坏了，还是 XPath 表达式错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T08:06:58.907

我想`//table[@class="index"]`这就是你想要的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T23:14:36.087

根据您的示例页面（metacritic.com/film/highscores.shtml），我会说您需要使用：

```
//TABLE[@CLASS="index"] 
(or /descendant::TABLE[@CLASS="index"]) 
```

这是因为带有 CLASS 索引的 TABLE 在您的示例页面上以大写形式写入（XML 和 XPath 区分大小写）。

如果您针对特定页面，这将起作用，但如果不同页面对相同的 html 标签使用不同的大小写，则可能会成为问题。

然后你需要一个可憎的东西

```
//TABLE[@CLASS="index" or @class="index" or @Class="index" or ...]
|//table[@CLASS="index" or @class="index" or ...]
|... 
```

因此，您可能需要在提取信息之前继续使用 Tidy，或者切换到专门用于 HTML 抓取的工具（而不是 XPath）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T08:21:55.977

是的，`descendant`轴选择从上下文节点下降的所有节点。但这里的关键是上下文节点。

例如，`descendant::span`将检索`span`当前节点的所有后代。同样，`descendant::*`将检索当前节点的所有后代元素。

如果您需要匹配表和子表，您提供的 XPath 在我的测试期间可以正常工作：

```
//descendant::table[@class="index"] 
```

...选择表本身和子节点。

如果只需要匹配表的孩子，首先匹配你想要的节点*，然后*匹配它的后代：

```
//table[@class="index"]/descendant::* 
```

.. 仅选择表的子节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-13T11:29:11.917

使用此代码

```
 let $info :=($p//descendant::TABLE[@class="index"])
        return $info 
```

# mercurial - php长时间运行脚本

> ID：881499
> 
> 赞同：0
> 
> 时间：2009-05-19T08:05:22.717
> 
> 标签：mercurial, php

如何为可能运行相当长一段时间的 shell 命令提供反馈？

例如，我需要一个执行 hg clone 的脚本......然后在我的 php 中我拨打电话

```
exec('hg clone ...', $output, $return_value); 
```

但在命令实际结束之前我将无法获得输出。文档（[http://www.php.net/manual/en/function.exec.php](http://www.php.net/manual/en/function.exec.php)）中指出

```
Note: If a program is started with this function, in order for it to continue running in the background, the output of the program must be redirected to a file or another output stream. Failing to do so will cause PHP to hang until the execution of the program ends. 
```

这是否意味着我应该将我的命令更改为类似于

```
exec('hg clone 2>&1 $some_file', $output, $return_value); 
```

我是否需要命令后面的 & 符号才能使其在后台工作？我可以使用信息 $some_file 向用户提供反馈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T08:10:34.780

弹出：

[http://php.net/popen](http://php.net/popen)

PS popen 与 AJAX 配合得很好

# c# - 我可以存储数据表以供进一步细化吗

> ID：881500
> 
> 赞同：0
> 
> 时间：2009-05-19T08:05:22.717
> 
> 标签：c#, asp.net

我有一个包含结果的数据表我只想使用这个数据表来优化结果......我正在尝试这样做，但是每次刷新页面时这个数据表都会被破坏......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T08:18:14.190

您可以将数据表保存在会话变量或缓存中

```
Cache.Insert("MyData1", datatable) 
```

当页面再次加载时，您可以检查缓存值是否不等于 null。如果不是，您可以再次使用该值。

IE。

```
Datatable Source;
Source = (Datatable)Cache["MyData1"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:55:07.173

*新闻快讯：*网络是无状态的！

您最好查看“ [ASP.NET 中的状态管理](http://www.google.com/search?q=state+management+in+ASP.NET)”。

# vba - 如何在 Excel VBA 中使用 Google 的搜索结果？

> ID：881502
> 
> 赞同：3
> 
> 时间：2009-05-19T08:05:36.523
> 
> 标签：vba, excel

现在复制Google的搜索结果，想贴在Excel上。

我能写到IE里搜索的地方，但是比它不明白。

```
Sub get()
With CreateObject("InternetExplorer.application")
.Visible = True
.navigate ("http://www.google.com/")
While .Busy Or .readyState <> 4
DoEvents
Wend
.document.all.q.Value = "keyword"
.document.all.btnG.Click
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T09:08:35.880

通过手动浏览搜索页面以外的其他方式使用谷歌（目前）违反了他们[的服务条款](http://www.google.com/accounts/TOS)（强调我的）：

> 5.3 您同意不通过谷歌提供的界面以外的任何方式访问（或试图访问）任何服务，除非您在与谷歌的单独协议中被明确允许这样做。**您明确同意不通过任何自动化方式（包括使用脚本或网络爬虫）访问（或尝试访问）任何服务，**并应确保您遵守服务中存在的任何 robots.txt 文件中的说明.

我知道这并不能解决您的直接问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T20:40:35.557

我假设您只是对完成从 Web 获取信息到 Excel 的任务的各种方法感兴趣。不是专门的谷歌。下面发布了一种这样的方法。但是，正如所指出的那样，我至少存在违反 TOS 的风险。如果您使用下面的代码，您同意自己承担所有潜在的责任/风险。提供的代码不用于使用，但您可以查看如何在您有权使用的站点上执行此任务。

```
Option Explicit

Sub Example()
    Dim strKeyword As String
    Dim lngStartAt As Long
    Dim lngResults As Long
    Dim ws As Excel.Worksheet
    On Error GoTo Err_Hnd
    LockInterface True
    lngStartAt = 1
    lngResults = 100
    strKeyword = "Google TOS"
    Set ws = Excel.ActiveSheet
    ws.UsedRange.Delete
    With ws.QueryTables.Add("URL;http://www.google.com/search?q=" & strKeyword & "&num=100&start=" & lngStartAt & "&start=" & lngResults, ws.Cells(1, 1))
        .Name = "search?q=" & strKeyword
        .WebSelectionType = xlEntirePage
        .WebFormatting = xlWebFormattingNone
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebDisableDateRecognition = False
        .Refresh False
    End With
    StripHeader ws
    StripFooter ws
    Normalize ws
    Format ws
Exit_Proc:
    On Error Resume Next
    LockInterface False
    Exit Sub
Err_Hnd:
    MsgBox Err.Description, vbCritical, "Error: " & Err.Number
    Resume Exit_Proc
    Resume
End Sub

Private Sub StripHeader(ByRef ws As Excel.Worksheet)
    Dim rngSrch As Excel.Range
    Dim lngRow As Long
    Set rngSrch = Intersect(ws.UsedRange, ws.Columns(1))
    lngRow = rngSrch.Find("Search Results", ws.Cells(1, 1), xlValues, xlWhole, _
        xlByColumns, xlNext, True, SearchFormat:=False).row
    ws.Rows("1:" & CStr(lngRow + 1&)).Delete
End Sub

Private Sub StripFooter(ByRef ws As Excel.Worksheet)
    Dim lngRowCount As Long
    lngRowCount = ws.UsedRange.Rows.Count
    ws.Rows(CStr(lngRowCount - 6&) & ":" & CStr(lngRowCount)).Delete
End Sub

Private Sub Normalize(ByRef ws As Excel.Worksheet)
    Dim lngRowCount As Long
    Dim lngRow As Long
    Dim lngLastRow As Long
    Dim lngDPos As Long
    Dim strNum As String
    lngRowCount = ws.UsedRange.Rows.Count
    ws.Cells(1&, 2&).Value = ws.Cells(3&, 1&).Value
    lngLastRow = 1&
    For lngRow = 2& To lngRowCount
        lngDPos = InStr(ws.Cells(lngRow, 1).Value, ".")
        If lngDPos Then
            If IsNumeric(Left$(ws.Cells(lngRow, 1).Value, lngDPos - 1&)) Then
                ws.Cells(lngRow, 2&).Value = ws.Cells(lngRow + 2&, 1).Value
                ws.Hyperlinks.Add ws.Cells(lngLastRow, 1&), "http://" & Left$(ws.Cells(lngRow - 2&, 1).Value, InStr(ws.Cells(lngRow - 2&, 1).Value, " ") - 1&)
                lngLastRow = lngRow
            End If
        End If
    Next
    ws.Hyperlinks.Add ws.Cells(lngLastRow, 1&), "http://" & Left$(ws.Cells(lngRow - 1&, 1).Value, InStr(ws.Cells(lngRow - 2&, 1).Value, " ") - 1&)
    For lngRow = lngRowCount To 1& Step -1&
        If LenB(ws.Cells(lngRow, 2).Value) = 0& Then ws.Rows(lngRow).Delete
    Next
End Sub

Private Sub Format(ByRef ws As Excel.Worksheet)
    With ws.UsedRange
        .ColumnWidth = 50
        .WrapText = True
        .Rows.AutoFit
    End With
    ws.Rows(1).Insert
    ws.Cells(1, 1).Value = "Result"
    ws.Cells(1, 2).Value = "Description"
End Sub

Public Sub LockInterface(ByVal lockOn As Boolean)
    Dim blnVal As Boolean
    Static blnOrgWIT As Boolean
    With Excel.Application
        If lockOn Then
            blnVal = False
            blnOrgWIT = .ShowWindowsInTaskbar
            .ShowWindowsInTaskbar = False
        Else
            blnVal = True
            .ShowWindowsInTaskbar = blnOrgWIT
        End If
        .DisplayAlerts = blnVal
        .EnableEvents = blnVal
        .ScreenUpdating = blnVal
        .Cursor = IIf(blnVal, xlDefault, xlWait)
        .EnableCancelKey = IIf(blnVal, xlInterrupt, xlErrorHandler)
    End With
End Sub 
```

此外，如果您想继续使用机器人方法，这里是如何继续。以前的警告适用：

```
Sub RobotExample()
    Dim ie As SHDocVw.InternetExplorer  'Requires reference to "Microsoft Internet Controls"
    Dim strKeyword As String
    Dim lngStartAt As Long
    Dim lngResults As Long
    Dim doc As MSHTML.HTMLDocument      'Requires reference to "Microsoft HTML Object Library"
    Set ie = New SHDocVw.InternetExplorer
    lngStartAt = 1
    lngResults = 100
    strKeyword = "Google TOS"
    ie.navigate "http://www.google.com/search?q=" & strKeyword & _
        "&num=100&start=" & lngStartAt & "&start=" & lngResults
    Do Until ie.readyState = READYSTATE_COMPLETE: DoEvents: Loop
    Set doc = ie.document
    MsgBox doc.body.innerText
    ie.Quit
End Sub 
```

# sql - 无法从 codeplex 下载 Adventure Works 数据库 2005

> ID：881507
> 
> 赞同：1
> 
> 时间：2009-05-19T08:07:53.790
> 
> 标签：sql, sql-server-2005, database, sample, adventureworks

无法从 codeplex 下载 AdventureWorks 数据库 2005。我在哪里可以找到和下载它？？？我一直在网上搜索，我找到了一些结果，但我无法下载任何一个。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T13:07:04.583

未找到响应或解决方案。就放弃找了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:10:23.800

它通常与 sql 安装盘捆绑在一起

尝试此链接以在线下载 sqlserver 示例

[1](http://www.codeplex.com/MSFTDBProdSamples/Release/ProjectReleases.aspx?ReleaseId=4004)

[2](http://codeplex.com/SqlServerSamples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T08:11:46.777

他们在这里是[http://msftdbprodsamples.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=18407](http://msftdbprodsamples.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=18407)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T08:13:29.470

不知道为什么找不到它，因为`adventure works`在 CodePlex 网站上进行简单搜索后，我就找到了以下 URL：

[http://msftdbprodsamples.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=18407#ReleaseFiles](http://msftdbprodsamples.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=18407#ReleaseFiles)

# jquery - 按值对 JSON 进行排序

> ID：881510
> 
> 赞同：61
> 
> 时间：2009-05-19T08:09:53.190
> 
> 标签：jquery, json

我有一个非常简单的 JSON 对象，如下所示：

```
{
   "people":[
      {
         "f_name":"john",
         "l_name":"doe",
         "sequence":"0",
         "title":"president",
         "url":"google.com",
         "color":"333333"
      },
      {
         "f_name":"michael",
         "l_name":"goodyear",
         "sequence":"0",
         "title":"general manager",
         "url":"google.com",
         "color":"333333"
      }
   ]
} 
```

现在这是从我的服务器端代码返回的，我运行`jQuery.each`以形成必要的 html 并输出结果。

现在我正在做的是向包含我的排序信息的服务器发送一个 AJAX 调用......例如“Title DESC”并重新运行 SQL 查询以返回新的结果集。但我想避免这种情况，并使用 jQuery 对生成的 JSON 进行排序，以防止往返服务器和多个数据库访问。

如何使用 jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-02-08T05:21:15.510

jQuery 对排序不是特别有帮助，但这是一个优雅而高效的解决方案。只需编写一个普通的 JS 函数，该函数接受属性名称和顺序（升序或降序）并使用简单的比较函数调用本机 sort() 方法：

```
var people = [
    {
        "f_name": "john",
        "l_name": "doe",
        "sequence": "0",
        "title" : "president",
        "url" : "google.com",
        "color" : "333333",
    }
    // etc
];

function sortResults(prop, asc) {
    people.sort(function(a, b) {
        if (asc) {
            return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
        } else {
            return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
        }
    });
    renderResults();
} 
```

然后：

```
sortResults('l_name', true); 
```

[在这里](http://jsfiddle.net/194rbn3s/5/)玩一个工作示例。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-19T03:37:53.857

**演示：[https ://jsfiddle.net/kvxazhso/](https://jsfiddle.net/kvxazhso/)**

成功传递相等的值（保持相同的顺序）。灵活：处理升序（123）或降序（321），适用于数字、字母和 unicode。适用于所有经过测试的设备（Chrome、Android 默认浏览器、FF）。

**给定这样的数据**：

```
var people = [ 
{ 'myKey': 'A', 'status': 0 },
{ 'myKey': 'B', 'status': 3 },
{ 'myKey': 'C', 'status': 3 },
{ 'myKey': 'D', 'status': 2 },
{ 'myKey': 'E', 'status': 7 },
...
]; 
```

**按升序或倒序排序**：

```
function sortJSON(arr, key, way) {
    return arr.sort(function(a, b) {
        var x = a[key]; var y = b[key];
        if (way === '123') { return ((x < y) ? -1 : ((x > y) ? 1 : 0)); }
        if (way === '321') { return ((x > y) ? -1 : ((x < y) ? 1 : 0)); }
    });
}

people2 = sortJSON(people,'status', '321'); // 123 or 321
alert("2\. After processing (0 to x if 123; x to 0 if 321): "+JSON.stringify(people2)); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-19T10:33:27.083

```
jQuery.fn.sort = function() {  
    return this.pushStack( [].sort.apply( this, arguments ), []);  
};  

 function sortLastName(a,b){  
     if (a.l_name == b.l_name){
       return 0;
     }
     return a.l_name> b.l_name ? 1 : -1;  
 };  
  function sortLastNameDesc(a,b){  
     return sortLastName(a,b) * -1;  
 };
var people= [
{
"f_name": "john",
"l_name": "doe",
"sequence": "0",
"title" : "president",
"url" : "google.com",
"color" : "333333",
},
{
"f_name": "michael",
"l_name": "goodyear",
"sequence": "0",
"title" : "general manager",
"url" : "google.com",
"color" : "333333",
}]

sorted=$(people).sort(sortLastNameDesc); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-12-02T20:53:39.350

如果你不介意使用外部库，[Lodash](http://lodash.com)有很多很棒的实用程序

```
var people = [
  {
     "f_name":"john",
     "l_name":"doe",
     "sequence":"0",
     "title":"president",
     "url":"google.com",
     "color":"333333"
  },
  {
     "f_name":"michael",
     "l_name":"goodyear",
     "sequence":"0",
     "title":"general manager",
     "url":"google.com",
     "color":"333333"
  }
];

var sorted = _.sortBy(people, "l_name") 
```

您还可以按多个属性排序。[这是](http://embed.plnkr.co/hRe4awZjnrHW0pTPJrD5/preview)一个显示它在行动中的 plunk

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-16T13:20:14.630

使用不同类型和大小写的解决方案。
例如，如果没有该`toLowerCase`语句，“Goodyear”将以升序排列在“doe”之前。运行我答案底部的代码片段以查看不同的行为。

JSON数据：

```
var people = [
{
    "f_name" : "john",
    "l_name" : "doe", // lower case
    "sequence": 0 // int
},
{
    "f_name" : "michael",
    "l_name" : "Goodyear", // upper case
    "sequence" : 1 // int
}]; 
```

JSON排序函数：

```
function sortJson(element, prop, propType, asc) {
  switch (propType) {
    case "int":
      element = element.sort(function (a, b) {
        if (asc) {
          return (parseInt(a[prop]) > parseInt(b[prop])) ? 1 : ((parseInt(a[prop]) < parseInt(b[prop])) ? -1 : 0);
        } else {
          return (parseInt(b[prop]) > parseInt(a[prop])) ? 1 : ((parseInt(b[prop]) < parseInt(a[prop])) ? -1 : 0);
        }
      });
      break;
    default:
      element = element.sort(function (a, b) {
        if (asc) {
          return (a[prop].toLowerCase() > b[prop].toLowerCase()) ? 1 : ((a[prop].toLowerCase() < b[prop].toLowerCase()) ? -1 : 0);
        } else {
          return (b[prop].toLowerCase() > a[prop].toLowerCase()) ? 1 : ((b[prop].toLowerCase() < a[prop].toLowerCase()) ? -1 : 0);
        }
      });
  }
} 
```

用法：

```
sortJson(people , "l_name", "string", true);
sortJson(people , "sequence", "int", true); 
```

```
var people = [{
  "f_name": "john",
  "l_name": "doe",
  "sequence": 0
}, {
  "f_name": "michael",
  "l_name": "Goodyear",
  "sequence": 1
}, {
  "f_name": "bill",
  "l_name": "Johnson",
  "sequence": 4
}, {
  "f_name": "will",
  "l_name": "malone",
  "sequence": 2
}, {
  "f_name": "tim",
  "l_name": "Allen",
  "sequence": 3
}];

function sortJsonLcase(element, prop, asc) {
  element = element.sort(function(a, b) {
    if (asc) {
      return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
    } else {
      return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
    }
  });
}

function sortJson(element, prop, propType, asc) {
  switch (propType) {
    case "int":
      element = element.sort(function(a, b) {
        if (asc) {
          return (parseInt(a[prop]) > parseInt(b[prop])) ? 1 : ((parseInt(a[prop]) < parseInt(b[prop])) ? -1 : 0);
        } else {
          return (parseInt(b[prop]) > parseInt(a[prop])) ? 1 : ((parseInt(b[prop]) < parseInt(a[prop])) ? -1 : 0);
        }
      });
      break;
    default:
      element = element.sort(function(a, b) {
        if (asc) {
          return (a[prop].toLowerCase() > b[prop].toLowerCase()) ? 1 : ((a[prop].toLowerCase() < b[prop].toLowerCase()) ? -1 : 0);
        } else {
          return (b[prop].toLowerCase() > a[prop].toLowerCase()) ? 1 : ((b[prop].toLowerCase() < a[prop].toLowerCase()) ? -1 : 0);
        }
      });
  }
}

function sortJsonString() {
  sortJson(people, 'l_name', 'string', $("#chkAscString").prop("checked"));
  display();
}

function sortJsonInt() {
  sortJson(people, 'sequence', 'int', $("#chkAscInt").prop("checked"));
  display();
}

function sortJsonUL() {
  sortJsonLcase(people, 'l_name', $('#chkAsc').prop('checked'));
  display();
}

function display() {
  $("#data").empty();
  $(people).each(function() {
    $("#data").append("<div class='people'>" + this.l_name + "</div><div class='people'>" + this.f_name + "</div><div class='people'>" + this.sequence + "</div><br />");
  });
}
```

```
body {
  font-family: Arial;
}
.people {
  display: inline-block;
  width: 100px;
  border: 1px dotted black;
  padding: 5px;
  margin: 5px;
}
.buttons {
  border: 1px solid black;
  padding: 5px;
  margin: 5px;
  float: left;
  width: 20%;
}
ul {
  margin: 5px 0px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="buttons" style="background-color: rgba(240, 255, 189, 1);">
  Sort the JSON array <strong style="color: red;">with</strong> toLowerCase:
  <ul>
    <li>Type: string</li>
    <li>Property: lastname</li>
  </ul>
  <button onclick="sortJsonString(); return false;">Sort JSON</button>
  Asc Sort
  <input id="chkAscString" type="checkbox" checked="checked" />
</div>
<div class="buttons" style="background-color: rgba(255, 214, 215, 1);">
  Sort the JSON array <strong style="color: red;">without</strong> toLowerCase:
  <ul>
    <li>Type: string</li>
    <li>Property: lastname</li>
  </ul>
  <button onclick="sortJsonUL(); return false;">Sort JSON</button>
  Asc Sort
  <input id="chkAsc" type="checkbox" checked="checked" />
</div>
<div class="buttons" style="background-color: rgba(240, 255, 189, 1);">
  Sort the JSON array:
  <ul>
    <li>Type: int</li>
    <li>Property: sequence</li>
  </ul>
  <button onclick="sortJsonInt(); return false;">Sort JSON</button>
  Asc Sort
  <input id="chkAscInt" type="checkbox" checked="checked" />
</div>
<br />
<br />
<div id="data" style="float: left; border: 1px solid black; width: 60%; margin: 5px;">Data</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-05T01:37:22.670

这是一个多级排序方法。我包含来自 Angular JS 模块的片段，但是您可以通过限定排序键对象的范围来完成相同的事情，以便您的排序函数可以访问它们。你可以在[Plunker](http://embed.plnkr.co/hHBAqrAnUTfqwaFeyKUQ/preview)看到完整的模块。

```
$scope.sortMyData = function (a, b)
{
  var retVal = 0, key;
  for (var i = 0; i < $scope.sortKeys.length; i++)
  {
    if (retVal !== 0)
    {
      break;
    }
    else
    {
      key = $scope.sortKeys[i];
      if ('asc' === key.direction)
      {
        retVal = (a[key.field] < b[key.field]) ? -1 : (a[key.field] > b[key.field]) ? 1 : 0;
      }
      else
      {
        retVal = (a[key.field] < b[key.field]) ? 1 : (a[key.field] > b[key.field]) ? -1 : 0;
      }
    }
  }
  return retVal;
}; 
```

# c# - 应用启动后更改应用图标

> ID：881512
> 
> 赞同：4
> 
> 时间：2009-05-19T08:10:11.600
> 
> 标签：c#, wpf, windows

启动后有什么方法可以更改应用程序的图标吗？我想更改图标以反映通知。

谢谢

编辑：基于 Fredrik Mörks 答案的 Wpf 解决方案。

```
Uri iconUri = new Uri("icon1.ico", UriKind.RelativeOrAbsolute);
this.Icon = BitmapFrame.Create(iconUri); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T08:17:23.910

您可以更改主窗体的图标：

```
this.Icon = new Icon(@"<path to icon on disk"); 
```

# javascript - 如何在 JavaScript 中声明命名空间？

> ID：881515
> 
> 赞同：1048
> 
> 时间：2009-05-19T08:11:02.660
> 
> 标签：javascript, namespaces, javascript-namespaces

如何在 JavaScript 中创建命名空间，以便我的对象和函数不会被其他同名对象和函数覆盖？我使用了以下内容：

```
if (Foo == null || typeof(Foo) != "object") { var Foo = new Object();} 
```

有没有更优雅或更简洁的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1060
> 
> 时间：2011-05-10T08:28:07.430

我使用[Enterprise jQuery site 上的方法](https://web.archive.org/web/20181005005954/https://appendto.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)：

这是他们的示例，展示了如何声明私有和公共属性和函数。一切都是作为一个自动执行的匿名函数完成的。

```
(function( skillet, $, undefined ) {
    //Private Property
    var isHot = true;

    //Public Property
    skillet.ingredient = "Bacon Strips";

    //Public Method
    skillet.fry = function() {
        var oliveOil;

        addItem( "\t\n Butter \n\t" );
        addItem( oliveOil );
        console.log( "Frying " + skillet.ingredient );
    };

    //Private Method
    function addItem( item ) {
        if ( item !== undefined ) {
            console.log( "Adding " + $.trim(item) );
        }
    }
}( window.skillet = window.skillet || {}, jQuery )); 
```

因此，如果您想访问其中一位公共成员，您只需使用`skillet.fry()`或`skillet.ingredients`.

真正酷的是您现在可以使用完全相同的语法扩展命名空间。

```
//Adding new Functionality to the skillet
(function( skillet, $, undefined ) {
    //Private Property
    var amountOfGrease = "1 Cup";

    //Public Method
    skillet.toString = function() {
        console.log( skillet.quantity + " " +
                     skillet.ingredient + " & " +
                     amountOfGrease + " of Grease" );
        console.log( isHot ? "Hot" : "Cold" );
    };
}( window.skillet = window.skillet || {}, jQuery )); 
```

# 第三个`undefined`论据

> 第三，`undefined`argument 是 value 变量的来源`undefined`。我不确定它今天是否仍然相关，但是在使用旧浏览器/JavaScript 标准（ecmascript 5，javascript < 1.8.5 ~ firefox 4）时，全局范围变量`undefined`是可写的，因此任何人都可以重写它的值。第三个参数（当未传递值时）创建一个名为的变量，该变量`undefined`的作用域为命名空间/函数。因为在创建命名空间时没有传递任何值，所以它默认为 value `undefined`。

* * *

## 回答 #2

> 赞同：798
> 
> 时间：2009-05-19T08:22:29.827

我喜欢这个：

```
var yourNamespace = {

    foo: function() {
    },

    bar: function() {
    }
};

...

yourNamespace.foo(); 
```

* * *

## 回答 #3

> 赞同：354
> 
> 时间：2009-05-19T08:39:28.483

另一种方法是：

```
var ns = new function() {

    var internalFunction = function() {

    };

    this.publicFunction = function() {

    };
}; 
```

以上很像[模块模式](http://yuiblog.com/blog/2007/06/12/module-pattern/)，[无论你喜欢与否](http://snook.ca/archives/javascript/no-love-for-module-pattern)，它都允许你将所有函数公开为公共，同时避免对象字面量的刚性结构。

* * *

## 回答 #4

> 赞同：158
> 
> 时间：2010-05-26T11:34:01.460

> 有没有更优雅或更简洁的方式来做到这一点？

是的。例如：

```
var your_namespace = your_namespace || {}; 
```

那么你可以拥有

```
var your_namespace = your_namespace || {};
your_namespace.Foo = {toAlert:'test'};
your_namespace.Bar = function(arg) 
{
    alert(arg);
};
with(your_namespace)
{
   Bar(Foo.toAlert);
} 
```

* * *

## 回答 #5

> 赞同：97
> 
> 时间：2011-05-20T20:07:18.990

我通常在闭包中构建它：

```
var MYNS = MYNS || {};

MYNS.subns = (function() {

    function privateMethod() {
        // Do private stuff, or build internal.
        return "Message";
    }

    return {
        someProperty: 'prop value',
        publicMethod: function() {
            return privateMethod() + " stuff";
        }
    };
})(); 
```

自从写了这篇文章以来，这些年来我的风格发生了微妙的变化，现在我发现自己在写这样的闭包：

```
var MYNS = MYNS || {};

MYNS.subns = (function() {
    var internalState = "Message";

    var privateMethod = function() {
        // Do private stuff, or build internal.
        return internalState;
    };
    var publicMethod = function() {
        return privateMethod() + " stuff";
    };

    return {
        someProperty: 'prop value',
        publicMethod: publicMethod
    };
})(); 
```

通过这种方式，我发现公共 API 和实现更容易理解。将 return 语句视为实现的公共接口。

* * *

## 回答 #6

> 赞同：59
> 
> 时间：2010-11-09T04:27:21.893

因为您可能编写不同的 JavaScript 文件，然后在应用程序中组合或不组合它们，所以每个文件都需要能够恢复或构造命名空间对象，而不会损坏其他文件的工作......

一个文件可能打算使用命名空间`namespace.namespace1`：

```
namespace = window.namespace || {};
namespace.namespace1 = namespace.namespace1 || {};

namespace.namespace1.doSomeThing = function(){} 
```

另一个文件可能想要使用命名空间`namespace.namespace2`：

```
namespace = window.namespace || {};
namespace.namespace2 = namespace.namespace2 || {};

namespace.namespace2.doSomeThing = function(){} 
```

这两个文件可以同时存在或分开而不会发生冲突。

* * *

## 回答 #7

> 赞同：53
> 
> 时间：2012-04-22T15:44:01.303

以下是 Stoyan Stefanov 在他的*[JavaScript 模式](http://shop.oreilly.com/product/9780596806767.do)*一书中的做法，我觉得这本书非常好（它还展示了他如何进行注释以允许自动生成 API 文档，以及如何向自定义对象的原型添加方法）：

```
/**
* My JavaScript application
*
* @module myapp
*/

/** @namespace Namespace for MYAPP classes and functions. */
var MYAPP = MYAPP || {};

/**
* A maths utility
* @namespace MYAPP
* @class math_stuff
*/
MYAPP.math_stuff = {

    /**
    * Sums two numbers
    *
    * @method sum
    * @param {Number} a First number
    * @param {Number} b Second number
    * @return {Number} Sum of the inputs
    */
    sum: function (a, b) {
        return a + b;
    },

    /**
    * Multiplies two numbers
    *
    * @method multi
    * @param {Number} a First number
    * @param {Number} b Second number
    * @return {Number} The inputs multiplied
    */
    multi: function (a, b) {
        return a * b;
    }
};

/**
* Constructs Person objects
* @class Person
* @constructor
* @namespace MYAPP
* @param {String} First name
* @param {String} Last name
*/
MYAPP.Person = function (first, last) {

    /**
    * First name of the Person
    * @property first_name
    * @type String
    */
    this.first_name = first;

    /**
    * Last name of the Person
    * @property last_name
    * @type String
    */
    this.last_name = last;
};

/**
* Return Person's full name
*
* @method getName
* @return {String} First name + last name
*/
MYAPP.Person.prototype.getName = function () {
    return this.first_name + ' ' + this.last_name;
}; 
```

* * *

## 回答 #8

> 赞同：33
> 
> 时间：2009-05-19T08:26:18.213

我使用这种方法：

```
var myNamespace = {}
myNamespace._construct = function()
{
    var staticVariable = "This is available to all functions created here"

    function MyClass()
    {
       // Depending on the class, we may build all the classes here
       this.publicMethod = function()
       {
          //Do stuff
       }
    }

    // Alternatively, we may use a prototype.
    MyClass.prototype.altPublicMethod = function()
    {
        //Do stuff
    }

    function privateStuff()
    {
    }

    function publicStuff()
    {
       // Code that may call other public and private functions
    }

    // List of things to place publically
    this.publicStuff = publicStuff
    this.MyClass = MyClass
}
myNamespace._construct()

// The following may or may not be in another file
myNamespace.subName = {}
myNamespace.subName._construct = function()
{
   // Build namespace
}
myNamespace.subName._construct() 
```

外部代码可以是：

```
var myClass = new myNamespace.MyClass();
var myOtherClass = new myNamepace.subName.SomeOtherClass();
myNamespace.subName.publicOtherStuff(someParameter); 
```

* * *

## 回答 #9

> 赞同：32
> 
> 时间：2010-08-27T23:15:58.240

这是 user106826 到 Namespace.js 的链接的后续内容。似乎该项目已移至[GitHub](http://en.wikipedia.org/wiki/GitHub)。现在是[smith/namespacedotjs](http://github.com/smith/namespacedotjs)。

我一直在为我的小项目使用这个简单的 JavaScript 帮助程序，到目前为止，它似乎很轻巧但用途广泛，足以处理命名空间*和*加载模块/类。如果它允许我将包导入我选择的命名空间，而不仅仅是全局命名空间......叹气，但这不是重点。

它允许您声明命名空间，然后在该命名空间中定义对象/模块：

```
Namespace('my.awesome.package');
my.awesome.package.WildClass = {}; 
```

另一种选择是一次声明命名空间及其内容：

```
Namespace('my.awesome.package', {
    SuperDuperClass: {
        saveTheDay: function() {
            alert('You are welcome.');
        }
    }
}); 
```

[有关更多使用示例，请查看源代码](http://github.com/smith/namespacedotjs/blob/master/example/sandbox.js)中的 example.js 文件。

* * *

## 回答 #10

> 赞同：29
> 
> 时间：2012-05-10T11:44:51.063

样本：

```
var namespace = {};
namespace.module1 = (function(){

    var self = {};
    self.initialized = false;

    self.init = function(){
        setTimeout(self.onTimeout, 1000)
    };

    self.onTimeout = function(){
        alert('onTimeout')
        self.initialized = true;
    };

    self.init(); /* If it needs to auto-initialize, */
    /* You can also call 'namespace.module1.init();' from outside the module. */
    return self;
})() 
```

如果您希望它是私有的，您可以选择声明一个`local`变量、、`same`like`self`和 assign 。`local.onTimeout`

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2017-01-31T16:06:05.887

模块模式最初被定义为一种为传统软件工程中的类提供私有和公共封装的方法。

在使用模块模式时，我们可能会发现定义一个简单的模板来开始使用它很有用。这是一个涵盖名称间距、公共和私有变量的内容。

在 JavaScript 中，模块模式用于进一步模拟类的概念，使我们能够在单个对象中包含公共/私有方法和变量，从而将特定部分与全局范围隔离开来。这导致我们的函数名称与页面上其他脚本中定义的其他函数发生冲突的可能性降低。

```
var myNamespace = (function () {

  var myPrivateVar, myPrivateMethod;

  // A private counter variable
  myPrivateVar = 0;

  // A private function which logs any arguments
  myPrivateMethod = function( foo ) {
      console.log( foo );
  };

  return {

    // A public variable
    myPublicVar: "foo",

    // A public function utilizing privates
    myPublicFunction: function( bar ) {

      // Increment our private counter
      myPrivateVar++;

      // Call our private method using bar
      myPrivateMethod( bar );

    }
  };

})(); 
```

**好处**

为什么模块模式是一个不错的选择？对于初学者来说，对于来自面向对象背景的开发人员来说，它比真正封装的想法要干净得多，至少从 JavaScript 的角度来看是这样。

其次，它支持私有数据——因此，在模块模式中，我们代码的公共部分可以接触到私有部分，而外界无法接触到类的私有部分。

**缺点**

模块模式的缺点是，当我们以不同的方式访问公共和私有成员时，当我们希望更改可见性时，我们实际上必须对使用该成员的每个地方进行更改。

**我们也不能在稍后添加到对象的方法中访问私有成员**。也就是说，在许多情况下，模块模式仍然非常有用，如果使用得当，肯定有可能改进我们应用程序的结构。

**显示模块模式**

现在我们对模块模式稍微熟悉了一点，让我们来看一个稍微改进的版本——Christian Heilmann 的 Revealing Module 模式。

显示模块模式的出现是因为 Heilmann 对当我们想要从另一个公共方法调用或访问公共变量时必须重复主对象的名称这一事实感到沮丧。他也不喜欢模块模式对必须切换的要求反对他希望公开的事物的文字符号。

他努力的结果是更新了模式，我们只需在私有范围内定义所有函数和变量，并返回一个匿名对象，其中包含指向我们希望公开为私有功能的指针。

**可以在下面找到如何使用显示模块模式的示例**

```
var myRevealingModule = (function () {

        var privateVar = "Ben Cherry",
            publicVar = "Hey there!";

        function privateFunction() {
            console.log( "Name:" + privateVar );
        }

        function publicSetName( strName ) {
            privateVar = strName;
        }

        function publicGetName() {
            privateFunction();
        }

        // Reveal public pointers to
        // private functions and properties

        return {
            setName: publicSetName,
            greeting: publicVar,
            getName: publicGetName
        };

    })();

myRevealingModule.setName( "Paul Kinlan" ); 
```

**好处**

这种模式允许我们脚本的语法更加一致。它还在模块的末尾更清楚地说明了我们的哪些函数和变量可以公开访问，从而简化了可读性。

**缺点**

这种模式的一个缺点是，如果一个私有函数引用一个公共函数，那么如果需要补丁，这个公共函数就不能被覆盖。这是因为私有函数将继续引用私有实现，并且该模式不适用于公共成员，仅适用于函数。

引用私有变量的公共对象成员也受上述无补丁规则注释的约束。

* * *

## 回答 #12

> 赞同：16
> 
> 时间：2017-03-22T12:27:39.797

如果您需要私有范围：

```
var yourNamespace = (function() {

  //Private property
  var publicScope = {};

  //Private property
  var privateProperty = "aaa"; 

  //Public property
  publicScope.publicProperty = "bbb";

  //Public method
  publicScope.publicMethod = function() {
    this.privateMethod();
  };

  //Private method
  function privateMethod() {
    console.log(this.privateProperty);
  }

  //Return only the public parts
  return publicScope;
}());

yourNamespace.publicMethod(); 
```

否则，如果您永远不会使用私有范围：

```
var yourNamespace = {};

yourNamespace.publicMethod = function() {
    // Do something...
};

yourNamespace.publicMethod2 = function() {
    // Do something...
};

yourNamespace.publicMethod(); 
```

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2012-04-28T14:03:37.103

您可以声明一个简单的函数来提供命名空间。

```
function namespace(namespace) {
    var object = this, tokens = namespace.split("."), token;

    while (tokens.length > 0) {
        token = tokens.shift();

        if (typeof object[token] === "undefined") {
            object[token] = {};
        }

        object = object[token];
    }

    return object;
}

// Usage example
namespace("foo.bar").baz = "I'm a value!"; 
```

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2010-07-04T04:25:42.330

我创建了受 Erlang 模块启发的*[命名空间。](http://jweir.github.com/namespace/)*这是一种非常实用的方法，但这就是我这些天编写 JavaScript 代码的方式。

它为闭包提供了一个全局命名空间，并在该闭包中公开了定义的集合函数。

```
(function(){

  namespace("images", previous, next);
  // ^^ This creates or finds a root object, images, and binds the two functions to it.
  // It works even though those functions are not yet defined.

  function previous(){ ... }

  function next(){ ... }

  function find(){ ... } // A private function

})(); 
```

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2016-11-28T00:05:51.013

我迟到了 7 年，但 8 年前为此做了很多工作：

*   [http://blogger.ziesemer.com/2008/05/javascript-namespace-function.html](http://blogger.ziesemer.com/2008/05/javascript-namespace-function.html)
*   [http://blogger.ziesemer.com/2007/10/respecting-javascript-global-namespace.html](http://blogger.ziesemer.com/2007/10/respecting-javascript-global-namespace.html)

重要的是能够轻松有效地创建多个嵌套命名空间以保持复杂的 Web 应用程序的组织和可管理性，同时尊重 JavaScript 全局命名空间（防止命名空间污染），并且在这样做时不会破坏命名空间路径中的任何现有对象.

从上面看，这是我大约 2008 年的解决方案：

```
var namespace = function(name, separator, container){
  var ns = name.split(separator || '.'),
    o = container || window,
    i,
    len;
  for(i = 0, len = ns.length; i < len; i++){
    o = o[ns[i]] = o[ns[i]] || {};
  }
  return o;
}; 
```

这不是创建命名空间，而是提供创建命名空间的功能。

这可以浓缩为一个缩小的单线：

```
var namespace=function(c,f,b){var e=c.split(f||"."),g=b||window,d,a;for(d=0,a=e.length;d<a;d++){g=g[e[d]]=g[e[d]]||{}}return g}; 
```

使用示例：

```
namespace("com.example.namespace");
com.example.namespace.test = function(){
  alert("In namespaced function.");
}; 
```

或者，作为一种说法：

```
namespace("com.example.namespace").test = function(){
  alert("In namespaced function.");
}; 
```

然后执行为：

```
com.example.namespace.test(); 
```

如果您不需要对旧版浏览器的支持，更新版本：

```
const namespace = function(name, separator, container){
    var o = container || window;
    name.split(separator || '.').forEach(function(x){
        o = o[x] = o[x] || {};
    });
    return o;
}; 
```

现在，我对暴露`namespace`于全局命名空间本身持谨慎态度。（太糟糕了，基础语言没有为我们提供这个！）所以我通常会自己在闭包中使用它，例如：

```
(function(){
	const namespace = function(name, separator, container){
		var o = container || window;
		name.split(separator || '.').forEach(function(x){
			o = o[x] = o[x] || {};
		});
		return o;
	};
	const ns = namespace("com.ziesemer.myApp");

	// Optional:
	ns.namespace = ns;

	// Further extend, work with ns from here...
}());

console.log("\"com\":", com);
```

在更大的应用程序中，这只需要在页面加载开始时定义一次（对于基于客户端的 Web 应用程序）。如果保留其他文件，则可以重用命名空间功能（在上面作为“可选”包含）。在最坏的情况下，如果这个函数被重新声明了几次——它只有几行代码，如果缩小的话，代码会更少。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2010-03-27T06:38:01.153

在将我的几个库移植到不同的项目，并且不得不不断地更改顶级（静态命名）命名空间之后，我已经切换到使用这个小型（开源）帮助函数来定义命名空间。

```
global_namespace.Define('startpad.base', function(ns) {
    var Other = ns.Import('startpad.other');
    ....
}); 
```

好处的描述在我的[博客文章](http://blog.pageforest.com/javascript-namespaces)中。您可以在[此处获取源代码](http://g02me.googlecode.com/svn/trunk/app/scripts/namespace.js)。

我真正喜欢的好处之一是模块之间在加载顺序方面的隔离。您可以在加载外部模块之前对其进行引用。当代码可用时，您获得的对象引用将被填写。

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2015-02-04T22:45:03.667

我对命名空间使用以下语法。

```
var MYNamespace = MYNamespace|| {};

 MYNamespace.MyFirstClass = function (val) {
        this.value = val;
        this.getValue = function(){
                          return this.value;
                       };
    }

var myFirstInstance = new MYNamespace.MyFirstClass(46);
alert(myFirstInstance.getValue()); 
```

jsfiddle：http: [//jsfiddle.net/rpaul/4dngxwb3/1/](http://jsfiddle.net/rpaul/4dngxwb3/1/)

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2018-07-05T11:41:10.263

我认为你们都为这样一个简单的问题使用了太多的代码。无需为此进行回购。这是一个单行函数。

```
namespace => namespace.split(".").reduce((last, next) => (last[next] = (last[next] || {})), window); 
```

尝试一下 ：

```
// --- definition ---
const namespace = name => name.split(".").reduce((last, next) => (last[next] = (last[next] || {})), window);

// --- Use ----
const c = namespace("a.b.c");
c.MyClass = class MyClass {};

// --- see ----
console.log("a : ", a);
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-01-20T17:43:13.573

我最喜欢的模式最近变成了这样：

```
var namespace = (function() {

  // expose to public
  return {
    a: internalA,
    c: internalC
  }

  // all private

  /**
   * Full JSDoc
   */
  function internalA() {
    // ...
  }

  /**
   * Full JSDoc
   */
  function internalB() {
    // ...
  }

  /**
   * Full JSDoc
   */
  function internalC() {
    // ...
  }

  /**
   * Full JSDoc
   */
  function internalD() {
    // ...
  }

})();
```

当然，return 可以放在最后，但如果后面只有函数声明，那么更容易看到命名空间是什么，以及暴露了哪些 API。

在这种情况下使用函数表达式的模式会导致不查看整个代码就无法知道公开了哪些方法。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2021-09-24T09:25:04.990

[ES6 模块命名空间导入](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#creating_a_module_object)

```
// circle.js
export { name, draw, reportArea, reportPerimeter }; 
```

```
// main.js
import * as Circle from './modules/circle.js';

// draw a circle
let circle1 = Circle.draw(myCanvas.ctx, 75, 200, 100, 'green');
Circle.reportArea(circle1.radius, reportList);
Circle.reportPerimeter(circle1.radius, reportList); 
```

这会抓取 circle.js 中所有可用的导出，并将它们作为 object 的成员使用`Circle`，从而有效地赋予它自己的命名空间。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-12-02T15:39:28.063

我喜欢 Jaco Pretorius 的解决方案，但我想通过将“this”关键字指向模块/命名空间对象来使其更有用。我的煎锅版本：

```
(function ($, undefined) {

    console.log(this);

}).call(window.myNamespace = window.myNamespace || {}, jQuery); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2011-02-06T10:42:05.197

我编写了另一个命名空间库，它的工作方式更像其他语言中的包/单元。它允许您创建一个 JavaScript 代码包以及该包从其他代码中的引用：

### 文件 hello.js

```
Package("hello", [], function() {
  function greeting() {
    alert("Hello World!");
  }
  // Expose function greeting to other packages
  Export("greeting", greeting);
}); 
```

### 文件 Example.js

```
Package("example", ["hello"], function(greeting) {
  // Greeting is available here
  greeting();  // Alerts: "Hello World!"
}); 
```

只有第二个文件需要包含在页面中。它的依赖项（本例中的文件*hello.js*）将自动加载，从这些依赖项导出的对象将用于填充回调函数的参数。

*[您可以在Packages JS](http://packagesinjavascript.wordpress.com/)*中找到相关项目。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2011-04-13T14:36:21.267

如果使用 Makefile，您可以这样做。

```
// prelude.hjs
billy = new (
    function moduleWrapper () {
    const exports = this;

// postlude.hjs
return exports;
})();

// someinternalfile.js
function bob () { console.log('hi'); }
exports.bob = bob;

// clientfile.js
billy.bob(); 
```

一旦达到大约 1000 行，我还是更喜欢使用 Makefile，因为我可以通过删除 makefile 中的一行来有效地注释掉大量代码。它使摆弄东西变得容易。此外，使用这种技术，名称空间只在前奏中出现一次，因此很容易更改，您不必在库代码中不断重复它。

使用 makefile 时在浏览器中进行实时开发的 shell 脚本：

```
while (true); do make; sleep 1; done 
```

将此添加为“开始”任务，您可以“开始”以在编写代码时保持构建更新。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2015-06-13T04:31:36.797

Ionuț G. Stan 的回答的相当后续，但通过 using 展示了整洁代码的好处`var ClassFirst = this.ClassFirst = function() {...}`，它利用 JavaScript 的闭包范围来减少同一命名空间中的类的命名空间混乱。

```
var Namespace = new function() {
    var ClassFirst = this.ClassFirst = function() {
        this.abc = 123;
    }

    var ClassSecond = this.ClassSecond = function() {
        console.log("Cluttered way to access another class in namespace: ", new Namespace.ClassFirst().abc);
        console.log("Nicer way to access a class in same namespace: ", new ClassFirst().abc);
    }
}

var Namespace2 = new function() {
    var ClassFirst = this.ClassFirst = function() {
        this.abc = 666;
    }

    var ClassSecond = this.ClassSecond = function() {
        console.log("Cluttered way to access another class in namespace: ", new Namespace2.ClassFirst().abc);
        console.log("Nicer way to access a class in same namespace: ", new ClassFirst().abc);
    }
}

new Namespace.ClassSecond()
new Namespace2.ClassSecond() 
```

输出：

```
Cluttered way to access another class in namespace: 123
Nicer way to access a class in same namespace: 123
Cluttered way to access another class in namespace: 666
Nicer way to access a class in same namespace: 666 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-08-21T05:23:26.393

我们可以这样独立使用它：

```
var A = A|| {};
A.B = {};

A.B = {
    itemOne: null,
    itemTwo: null,
};

A.B.itemOne = function () {
    //..
}

A.B.itemTwo = function () {
    //..
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-10-20T11:43:45.227

在 JavaScript 中，没有预定义的方法来使用命名空间。在 JavaScript 中，我们必须创建自己的方法来定义 NameSpaces。这是我们在 Oodles 技术中遵循的程序。

注册名称空间 下面是注册名称空间的函数

```
//Register NameSpaces Function
function registerNS(args){
 var nameSpaceParts = args.split(".");
 var root = window;

 for(var i=0; i < nameSpaceParts.length; i++)
 {
  if(typeof root[nameSpaceParts[i]] == "undefined")
   root[nameSpaceParts[i]] = new Object();

  root = root[nameSpaceParts[i]];
 }
} 
```

`'.'`要注册一个命名空间，只需调用上面的函数，参数为用（点）分隔的命名空间。例如让您的应用程序名称为 oodles。您可以通过以下方法创建命名空间

```
registerNS("oodles.HomeUtilities");
registerNS("oodles.GlobalUtilities");
var $OHU = oodles.HomeUtilities;
var $OGU = oodles.GlobalUtilities; 
```

基本上它将在后端创建如下所示的 NameSpaces 结构：

```
var oodles = {
    "HomeUtilities": {},
    "GlobalUtilities": {}
}; 
```

在上面的函数中，您注册了一个名为`"oodles.HomeUtilities"`and的命名空间`"oodles.GlobalUtilities"`。为了调用这些命名空间，我们创建了一个变量，即 var`$OHU`和 var `$OGU`。

这些变量只不过是初始化命名空间的别名。现在，每当你声明一个属于`HomeUtilities`你的函数时，都会像下面这样声明它：

```
$OHU.initialization = function(){
    //Your Code Here
}; 
```

上面是函数名初始化，它被放入一个命名空间`$OHU`。并在脚本文件中的任何位置调用此函数。只需使用以下代码。

```
$OHU.initialization(); 
```

同样，与另一个 NameSpaces。

希望能帮助到你。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-04-16T13:38:02.330

我的习惯是使用*函数 myName()*作为属性存储，然后*var myName*作为“方法”持有者......

不管这是否足够合法，打败我！我一直依赖于我的 PHP 逻辑，而且一切正常。:D

```
function myObj() {
    this.prop1 = 1;
    this.prop2 = 2;
    this.prop3 = 'string';
}

var myObj = (
 (myObj instanceof Function !== false)
 ? Object.create({

     $props: new myObj(),
     fName1: function() { /* code..  */ },
     fName2: function() { /* code ...*/ }
 })
 : console.log('Object creation failed!')
); 
```

`if (this !== that) myObj.fName1(); else myObj.fName2();`

> 您也可以在对象创建之前以“反之亦然”的方式进行检查，这样会**更好**：

```
function myObj() {
    this.prop1 = 1;
    this.prop2 = 2;
    this.prop3 = 'string';
}

var myObj = (
    (typeof(myObj) !== "function" || myObj instanceof Function === false)
    ? new Boolean()
    : Object.create({
        $props: new myObj(),
        init: function () { return; },
        fName1: function() { /* code..  */ },
        fName2: function() { /* code ...*/ }
    })
);

if (myObj instanceof Boolean) {
    Object.freeze(myObj);
    console.log('myObj failed!');
    debugger;
}
else
    myObj.init(); 
```

对此的参考：*[JavaScript：使用 Object.create() 创建对象](http://xahlee.info/js/js_creating_object.html)*

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-12-16T16:06:29.017

JavaScript 默认不支持命名空间。因此，如果您创建任何元素（函数、方法、对象、变量），那么它就会变成全局并污染全局命名空间。让我们以定义两个没有任何命名空间的函数为例，

```
function func1() {
    console.log("This is a first definition");

}
function func1() {
    console.log("This is a second definition");
}
func1(); // This is a second definition 
```

它总是调用第二个函数定义。在这种情况下，命名空间将解决名称冲突问题。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2022-01-12T13:08:04.527

JavaScript 还没有命名空间的本地表示，但 TypeScript 有。

例如，您可以使用以下 TS 代码 ( [playground](https://www.typescriptlang.org/play?#code/HYQwtgpgzgDiDGEAEBlALgg1kg3gKCUKQgA8YB7AJzSXnOChoAsIAbV8pAXiQAoBKbgD5a9KOVYQAdBwDmvAORMAlgv54AvnjzosUlu3IC8QA) )

```
namespace Stack {
    export const hello = () => console.log('hi')
}

Stack.hello() 
```

如果您无法将代码更新为 TS，您至少可以使用 TS 在为命名空间生成 JS 输出时使用的模式，如下所示：

```
var Stack;
(function (Stack) {
    Stack.hello = () => console.log('hi');
})(Stack || (Stack = {}));
Stack.hello(); 
```

### 延伸阅读：

*   [TS - 命名空间](https://www.typescriptlang.org/docs/handbook/namespaces.html)
*   [TS - 命名空间和模块](https://www.typescriptlang.org/docs/handbook/namespaces-and-modules.html)

# python - SQLAlchemy - 每个请求的数据库命中？

> ID：881517
> 
> 赞同：0
> 
> 时间：2009-05-19T08:11:21.317
> 
> 标签：python, sqlalchemy

我目前正在使用用 Python 编写的 Web 应用程序（并使用 SQLAlchemy）。为了处理身份验证，应用程序首先检查会话中的用户 ID，如果它存在，则将整个用户记录从数据库中提取出来，并将其存储用于该请求的其余部分。还会运行另一个查询来检查它存储的用户的权限。

我对 Web 应用程序开发世界还很陌生，但据我了解，在*每个*请求上访问数据库以获取类似的东西效率不高。或者这被认为是正常的事情吗？

到目前为止，我唯一想到的就是提取这些数据一次，并存储相关的内容（甚至每个请求都不需要大多数数据）。但是，这会带来一个问题，即如果此用户记录恰好在此期间被删除，将会发生什么。关于如何最好地管理这个的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T10:44:05.500

“在每次请求时都在数据库中查找类似的东西效率不高。”

错误的。而且，您假设没有缓存，这也是错误的。

大多数 ORM 层完全能够缓存行，从而节省一些数据库查询。

大多数 RDBMS 具有广泛的缓存，从而可以非常快速地响应常见查询。

所有 ORM 层都将使用一致的 SQL，进一步帮助数据库优化重复操作。（具体来说就是缓存了SQL语句，节省了解析和规划的时间。）

“或者这被认为是正常的事情？”

真的。

在您可以证明您的查询是应用程序中最慢的部分之前，请不要担心。构建真正有效的东西。然后优化你能证明是瓶颈的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T20:53:57.243

对于*简单*Web 应用程序中的用户登录和基本权限令牌，我肯定会将其存储在基于 cookie 的会话中。确实，每个请求的几个 SELECT 根本不是什么大问题，但是如果您可以从缓存数据中执行部分/全部 Web 请求而根本没有 DB 命中，那只会增加更多的可伸缩性一个计划接收大量负载的应用程序。

在数据库上更改用户令牌的问题有两种处理方式。一个是，忽略它——对于很多用例来说，用户注销并重新登录以获得在其他地方授予的新权限并不是什么大问题（以 unix 为例）。另一个是通过一种方法过滤用户行的所有突变，该方法也重置基于 cookie 的会话中的状态，但这仅在用户他/她自己是通过浏览器界面发起更改的人时才有效。

如果 OTOH 上述用例都不适用于您，那么您可能需要坚持在每个请求中内置一点数据库访问权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T11:25:43.407

您基本上是在谈论缓存数据作为性能优化。与往常一样，过早优化是一个坏主意。事先很难知道瓶颈在哪里，如果应用程序域对您来说是新的，则更是如此。优化增加了复杂性，如果你优化了错误的东西，你不仅浪费了精力，而且使必要的优化变得更加困难。

请求用户数据通常是一个非常简单的查询。您可以为自己构建一个简单的基准，看看它会引入什么样的开销。如果它不占您时间预算的很大一部分，那就别管它了。

如果您仍然想在应用服务器上缓存数据，那么您必须提出一个缓存失效方案。

可能的方案是检查数据库中的更改。如果您没有大量数据要缓存，那么这实际上并没有比重新加载它更有效。

另一种选择是让缓存数据超时。如果更改的即时可见性不重要，这是一个不错的选择。

另一种选择是主动使更改的缓存无效。这取决于您是否仅通过应用程序修改数据库，以及您是否有单个应用程序服务器或集群解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T08:17:02.897

它是一个数据库，因此经常“点击”数据库以提取所需数据是很常见的。如果您建立联接或存储过程，您可以减少单个查询。

# email - 防止意外向客户发送垃圾邮件的建议保护措施

> ID：881521
> 
> 赞同：0
> 
> 时间：2009-05-19T08:12:05.323
> 
> 标签：email, postfix-mta, spam-prevention

我正在开发一个网站，用户可以在该网站上选择接收各种事件的电子邮件通知（想想 Google Alerts）。该网站的早期版本存在一个问题，即意外地向相同的少数测试用户生成了数百封电子邮件。该错误已被修复，但引发了一个问题：有哪些建议可以确保客户不会被电子邮件意外轰炸？（除了确保代码没有错误！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T08:15:15.427

尝试通过一种机制来传递您的电子邮件，该机制检查客户是否在最近 x 时间内收到过电子邮件。如果是，那么不要再给他发电子邮件，并存储一个日志供您以后检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:14:06.553

您可以保留每个用户/电子邮件的“最后一封邮件发送”列表（带有时间戳），如果最后一封邮件仅在（天/小时）前发送，则拒绝发送邮件。

你应该把它嵌入到你的“sendmail”函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-24T23:19:14.013

过滤输入电子邮件以确保它们在放入标题时只是一封电子邮件。这是邮件功能[http://us3.php.net/manual/en/function.mail.php](http://us3.php.net/manual/en/function.mail.php)的一个大问题，因为它允许垃圾邮件发送者在电子邮件表单中放入多封额外的电子邮件并提交消息并让**您的服务器**发送他们的垃圾邮件。

# mobile-phones - 开发手机软件要用什么编程语言？

> ID：881530
> 
> 赞同：0
> 
> 时间：2009-05-19T08:14:08.813
> 
> 标签：mobile-phones, programming-languages

我应该使用哪种语言为诺基亚/三星/LG/索尼爱立信手机开发程序？（塞班和非塞班）？

当然要直接在手机内部安装软件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T08:23:30.170

手机应用程序主要有 2 个“类”——本机应用程序和 Java 应用程序。

对于 Java，大多数新手机都支持[MIDP](http://en.wikipedia.org/wiki/Mobile_Information_Device_Profile)的某些版本，并且为它进行开发相当容易。然而，就安装而言，它有点棘手。通常，您通过 Internet 上的链接安装应用程序，但一些运营商对可以在手机上安装的应用程序进行了限制。

对于本机应用程序，这取决于您手机的操作系统。对于他们中的大多数人来说，开发原生应用程序需要花费大量资金（用于工具和 SDK），而且应用程序的分发方式也存在问题。同样，安装和调试也因操作系统而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:17:23.613

java (j2me) 目前是事实上的语言.. 但可能不会太久！

[见移动太阳网站](http://java.sun.com/javame/index.jsp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T08:23:23.647

三星 i7500 由 Android 驱动，许多人似乎都跳上了同一列火车。Android是狗屎:)基本上是java，但编译成Dalvik可执行文件（.dex格式）。您在例如 Ellipse 中进行开发。

# prolog - 有向图的叶节点 - Prolog

> ID：881534
> 
> 赞同：1
> 
> 时间：2009-05-19T08:16:59.403
> 
> 标签：prolog

有谁知道，如何在 Prolog 中获取叶节点列表？

假设，我有一个由这些有向边描述的简单有向图：

```
de(0,1).
de(0,2).
de(2,3).
de(2,4).
de(3,4).
de(4,5). 
```

现在，如何递归地浏览图并编写这 2 个叶节点（节点 1 和 5）的列表？

感谢您的任何回答！

编辑：

好吧，我有第一个谓词编写和工作：

```
isLeaf(Node) :-
not(de(Node,_)). 
```

但是现在，我不知道如何遍历图形并编写叶节点的输出列表。我知道，这很容易，但我没有这种思维和编程方式的经验:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T12:06:59.843

您需要定义一个谓词`is_leaf/1`生成*器*，即它用可能的解决方案实例化输入变量。

像这样的东西：

```
% Directed graph
de(0,1).
de(0,2).
de(2,3).
de(2,4).
de(3,4).
de(4,5).

% If Node is ground,
%         then test if it is a child node that is not a parent node.
% If Node is not ground,
%         then bind it to a child node that is not a parent node.
is_leaf(Node) :-
    de(_, Node),
    \+ de(Node, _). 
```

使用示例：

```
?- is_leaf(Node).
Node = 1 ;
Node = 5.

?- is_leaf(Node), writeln(Node), fail ; true.
1
5
true.

?- findall(Node, is_leaf(Node), Leaf_Nodes).
Leaf_Nodes = [1, 5]. 
```

您的解决方案立即调用`not`. （顺便说一句，SWI-Prolog 建议使用`\+`而不是`not`.）

```
isLeaf(Node) :-
    not(de(Node,_)). 
```

这意味着您`isLeaf/2`不是*生成器*：它要么失败要么成功（一次），并且如果它恰好是一个变量，则永远不会绑定输入参数。此外，它从不测试输入是否是叶子，它只是测试它是否不是父节点。

```
% Is it false that 1 is a parent? YES
?- isLeaf(1).
true.

% Is it false that blah is a parent? YES
?- isLeaf(blah).
true.

% Is it false that 2 is a parent? NO
?- isLeaf(2).
false.

% Basically just tests if the predicate de/2 is in the knowledge base,
% in this sense quite useless.
?- isLeaf(Node).
false. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:25:14.377

想想你会做相反的事情，即制定一个谓词，可以告诉你一个节点是否是一个分支。

从那里开始，编写一个遍历图的谓词应该非常简单，如果当前节点是叶子，则打印和回溯。

# python - Django 管理站点上的字段之间的自动选项卡

> ID：881536
> 
> 赞同：0
> 
> 时间：2009-05-19T08:17:10.773
> 
> 标签：python, django, django-admin, field

我在具有固定长度数据的模型上有一个内联，必须非常快速地输入，所以我正在考虑一种在字段被填充时自动“切换”字段的方法......

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T09:04:29.993

当然可以，但它需要一些javascript。您希望将一个事件绑定到每个字段上的 keypress 事件，并在它触发时测试到目前为止输入的文本的长度 - 如果匹配，则将焦点移到下一个字段上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-15T22:41:02.283

我可以推荐以下链接：

*   [jQuery 自动选项卡](http://www.lousyllama.com/sandbox/jquery-autotab)

# .net - 你知道任何关于 MBUnit 的教程吗？

> ID：881537
> 
> 赞同：5
> 
> 时间：2009-05-19T08:17:12.693
> 
> 标签：.net, unit-testing, testing, automated-tests, mbunit

似乎很难找到有关 MBUnit 的文档。有谁知道任何教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T08:21:34.053

更准确地说，Vadim 提到的 Gallio 书的[第 3 章](http://www.gallio.org/book/XHtml/ch03.html)正是您要找的。

**编辑：**这*本书的项目*有点卡住了。但与此同时，已经建立了一个wiki。它有一个很好的 MbUnit 教程：[http ://gallio.org/wiki/doku.php?id=getting_started](http://gallio.org/wiki/doku.php?id=getting_started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T11:30:06.937

我知道有一本关于[加里奥](http://www.gallio.org/)的书正在制作中。

这是[使用 Rhino.Mocks 和 MbUnit 的 TDD](http://vkreynin.wordpress.com/2008/12/04/tutorial-to-tdd-using-rhino-mocks-and-systemwrapper/)教程。

这是一篇[关于 MbUnit GUI 树](http://vkreynin.wordpress.com/2007/09/29/explaining-mbunit-gui-tree/)的文章。它适用于 MbUnit v2，但您应该会发现它对 v3 很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-25T23:29:15.640

如果您使用的是 MBUnit 版本 2，这里有一个简单的教程：

[http://blog.dotnetwiki.org/CommentView,guid,504b5250-5220-499a-a2d5-2b51f29b7cd3.aspx](http://blog.dotnetwiki.org/CommentView,guid,504b5250-5220-499a-a2d5-2b51f29b7cd3.aspx)

# delphi - 如何在 Delphi 2009 中设置 JIT 调试器？

> ID：881538
> 
> 赞同：1
> 
> 时间：2009-05-19T08:17:18.480
> 
> 标签：delphi, debugging, delphi-2009

在我的机器上，我有 Visual Studio 2008、C# Express、Delphi 7 和 Delphi 2009 Architect（无更新）。

当我通常运行 Delphi 7 时，它会通知 JIT 调试器当前设置为另一个应用程序（在我的情况下为 Visual Studio），并询问我是否要将其更改为 Delphi。

如果我按是，我可以在 Delphi 7 中使用调试器，否则我不能使用它。

我的问题是，在 Delphi 2009 中，IDE 并没有要求我这样做，更糟糕的是 - 当我打开/创建项目时会发生崩溃。

如何在 delphi 2009 中设置 JIT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-26T06:51:06.633

将 BDS 2006 / Delphi 2006 / C++Builder 2006 / Delphi 2007 / C++Builder 2007 注册为 JIT 调试器 [http://support.codegear.com/article/36747](http://support.codegear.com/article/36747)

您可以修改它以使用 D2009

（编辑：Codegear.com 已不存在，新网址为：http: [//support.embarcadero.com/jp/article/36747](http://support.embarcadero.com/jp/article/36747)）

# javascript - 修改 Liferay javascript 功能

> ID：881541
> 
> 赞同：0
> 
> 时间：2009-05-19T08:18:11.553
> 
> 标签：javascript, jquery, ajax, liferay

我想在文章中添加一些标签。问题是标签以“随机”顺序显示在弹出窗口中。这是由于它们被推送到页面的顺序。我想干预，对标签进行排序并按顺序呈现。你会怎么做？我在 tags_entries_selector.js 中发现了这些方法，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T09:23:23.277

扩展 Liferay Portal 有两种基本方法：

*   外部环境
*   挂钩

Ext Environment 是一种强大的技术，但可能有点困难。对于钩子，你可以看看这个：http: [//jdem.cz/bfms4](http://jdem.cz/bfms4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T15:14:44.760

该解决方案的主要思想是将所有标签保留在一个数组中，并且在该数组“填充”之前不显示任何内容。要了解后者何时发生，请将数组的长度与`vocabularies.length`. 在您的自定义数组中执行所有必要的（不是微不足道的）修改，将其数据转换为字符串并将其传递给`container.html()`.

要理解的要点是该`instance._getVocabularyEntries()`函数是为每个条目执行的，但我们只希望它仅在我们的自定义数组“填充”所有必要的数据时执行它。该解决方案的缺点是在向用户显示任何内容之前必须获取所有必需的数据。

# asp.net - ASP.NET AJAX Function.createDelegate vs Function.createCallback？

> ID：881544
> 
> 赞同：3
> 
> 时间：2009-05-19T08:19:38.930
> 
> 标签：asp.net, javascript, asp.net-ajax

我正在阅读 manning - asp.net ajax in action 这本书。第 54-58 页描述了客户端委托和回调。

简而言之：

使用**客户端委托**，您可以更改**`this`**事件处理程序本身中的变量以反映另一个对象。（所以它不会是触发 DOM 事件的 DOM 对象）

通过**回调**，您可以将 a 传递**`context object`**给您的事件处理程序，该事件处理程序将作为**第二个参数/参数**在事件处理程序中可用。

两者都可以将一个对象“传递”给事件处理程序（无论是它`this`还是`context object`），而事件处理程序（在它的范围内）将不可用。

这些客户端委托与回调之间有什么不同？

在我看来：

**只有**您希望在事件处理程序中可用 的对象才能**以不同方式访问**：

*   **客户代表：`this`**
*   **打回来：`second argument`**

...也许只有**回调**有**DomEvent(first parameter)**，**但没有客户端委托**？！？？

这个对吗？这就是全部？

也许您可以解释客户端委托和回调之间的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-18T20:18:21.763

我不太确定这一点，但我认为回调是页面提交到服务器时发生的事情。

客户端创建委托用于创建调用 JavaScript 方法的委托。

Function.CreateDelegate() 方法非常有用。

假设您想在 JavaScript 中处理按钮单击事件。处理按钮单击的函数中可用的“this”对象是被单击的按钮。

现在假设您有一个 JavaScript 对象，它捕获按钮单击事件并执行某些操作。通常“this”指的是 JavaScript 对象本身，但由于 Object 的方法用于处理按钮单击事件，“this”实际上指的是引发事件的对象：按钮。

为了解决这个问题，创建了 JavaScript[应用](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/apply)方法。因此，不是通过在 attachEvent/attachEventListener 方法（或 Ajax.NET 框架中的 $addHandler() 方法）中指定 JavaScript 对象的方法来捕获按钮单击事件，而是将 apply() 方法与这些 attachEvent/附加事件监听器。这会更改上下文，因此“this”指的是 JavaScript 对象，而不是引发事件的对象。

现在，Function.CreateDelegate() 方法不仅仅使用 apply 方法来创建客户端委托。

看一下代码：

```
Function.createDelegate = function Function$createDelegate(instance, method) {
    /// <summary locid="M:J#Function.createDelegate" />
    /// <param name="instance" mayBeNull="true"></param>
    /// <param name="method" type="Function"></param>
    /// <returns type="Function"></returns>
    var e = Function._validateParams(arguments, [
    {name: "instance", mayBeNull: true},
    {name: "method", type: Function}
    ]);
    if (e) throw e;
    return function() {
      return method.apply(instance, arguments);
    }
} 
```

关于 apply() 方法，您应该知道一件事。当您执行它时，它会执行作为委托的方法。为了解决这个问题，createDelegate 方法执行上述操作。

所以，我不太确定回调如何适应这种情况，但是当您的 JavaScript 对象处理由某些 UI 元素引起的事件时，使用 createDelegate() 方法是一个好主意。

我假设回调是请求从浏览器发送到服务器时发生的操作。大多数时候 __doPostback 方法用于执行回调。此方法采用 2 个参数...导致回发/回调到服务器的对象，以及回发/回调的参数。不过，对于客户代表来说，这将是完全不同的事情。

快乐编码

-弗林尼

# ubuntu - 如何将在特定端口号上运行的服务映射到 Ubuntu 上的别名？

> ID：881545
> 
> 赞同：0
> 
> 时间：2009-05-19T08:19:51.953
> 
> 标签：ubuntu, mapping, alias, hosts

如何将在特定端口号上运行的服务映射到 Ubuntu 8.10 上的别名？

例如，我有一个可以像这样访问的网络服务：

```
http://localhost:3000/ 
```

但我想这样访问：

```
http://myservice/ 
```

我只想从同一台机器访问该服务。

我正在运行 Ubuntu 8.10，起初我认为我可以修改 /etc/hosts 文件，但现在我明白我不能包含端口号。到目前为止，我还查看了 /etc/services 文件，但没有任何运气......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:35:54.730

“http”的默认端口是 80，因此您需要 root 权限才能执行此操作。您可以采取多种路线：

*   `ssh -l root -L 3000:localhost:80 localhost`
*   netcat 也应该能够做到这一点
*   使用防火墙转发数据包

# c# - C# parchive / quickpar / par2 修复实现？

> ID：881546
> 
> 赞同：9
> 
> 时间：2009-05-19T08:19:58.397
> 
> 标签：c#, repair

我正在编写一个需要能够使用 par2 奇偶校验文件修复一组文件的 C# 应用程序。对于 C++，有很多东西可以做到这一点，但对于 C#，我找不到本机实现。

一种选择是使用来自 C# 的 C++ DLL，但我宁愿不这样做，因为不可能在 x64 应用程序中使用 32 位 dll，所以我将我的应用程序限制为 32 位模式。

另一种选择是在后台 shellexecute par2cmdline，但我宁愿对进程有更多的控制（进度、取消等）。

有谁知道将使用 par2 集修复文件的本机 C# 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T05:00:39.020

你想坚持自己的PAR吗？我有一个完全原生的 Reed/Solomon 实现，如果它有帮助（PAR 所基于的匹配），我会发布，但我没有任何文件处理和分解的东西。

我的代码是 Stream 的一个实现，并生成一个包含所有纠错数据的字符串。然后，您可以破坏该数据并将其发回，系统将自动恢复它。我只想发布它，但它很*长*，我懒得写博客文章并链接到它。

要使这项工作像 PAR 一样，您必须将其分解为文件，然后构建一个系统，该系统可以识别丢失的卷并为所有丢失的数据“添加”损坏的数据（数学无法处理丢失的数据，只能处理损坏的数据）。

此外，作为性能说明，此系统构建的系统相当“突发”，它一次会获得大量 100k 流，但也需要长时间等待什么都不做。C# 版本的数学运算比纯 C 版本快约 6%。如果我只使用不间断负载进行性能测试，C# 的运行速度会慢 1-2%。根据我的经验，大多数 C 到 C# 数学转换具有相同的性能结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:41:38.323

这不是一个直接的答案，但我认为有一种方法可以将 32 位 dll 加载到 64 位应用程序中：

[http://dnjonline.com/article.aspx?ID=jun07_access3264](http://dnjonline.com/article.aspx?ID=jun07_access3264)

来自文章：

> 此解决方案需要额外的工作，因为必须创建加载 32 位 DLL 并公开其 API 的 32 位代理进程。此外，由于消费者必须使用其中一种 IPC 技术，而不是直接访问 32 位 DLL，因此需要在 64 位端进行一些更改。值得注意的是，在极端情况下，这项额外的工作可以与从头开始开发 64 位版本的 32 位 DLL 所涉及的工作相媲美。
> 
> 降低这些成本的一种可能方法是实现一个 64 位包装 DLL，它公开与原始 32 位 DLL 相同的函数、参数、类型等。然后，此包装 DLL 可以对已加载到代理进程中的原始 32 位 DLL 进行基于 IPC 的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:06:29.900

不久前我正在做这样的事情。如果您查看 par2 源代码，这并非易事。您可能可以毫不费力地将其移植到 c#。可悲的是，所有付出的努力都会在性能上付出高昂的代价（如果您不相信我，请尝试一下）。

我最终通过 CreateProcess 调用了 par2 可执行文件。您可以获得标准输入、标准输出和 strerr 的句柄。因为可执行文件是一个控制台应用程序，您可以解析输出以获取进度。如果您想“取消”该操作，您可以随时终止该进程。

这是一种草率的方法。

“正确”的方法是采用 par2 源并将其移植到 64 位 dll（出于性能原因坚持使用非托管 C/C++ DLL）。

# objective-c - 释放对象属于另一个对象 - xcode内存管理

> ID：881547
> 
> 赞同：0
> 
> 时间：2009-05-19T08:20:05.120
> 
> 标签：objective-c, cocoa, xcode, memory-management

`[[MyObject itemProperty] release]`可以接受吗？

目前，我让 MyObject 获取一些数据并将其设置为 itemProperty。MyObject 的委托然后触发并使用 MyObject 的 itemProperty 数据并释放它。这是一种可接受的内存管理方式吗？

很多书都告诉我，你应该只释放你声明的对象。任何提示或替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T12:56:44.953

我建议您不要使用您所描述的方法……您在 SO 上提出问题的本能是正确的，因为这可能会导致麻烦。

对象负责管理自己的内部状态，而委托以这种方式干扰内部状态是非常不寻常的。清理内存的正常做法是必须在其方法中`MyObject`释放内存：`dealloc`

```
- (void)dealloc {
    [item release];
    [super dealloc];
} 
```

事实上，如果你`dealloc`按照你应该整理的方式实现`MyObject`，让委托向对象发送释放消息`itemProperty`将意味着`itemProperty`对象被释放两次，这将使 itemProperty 的保留计数处于意外状态并可能导致它提前解除分配。如果您曾经更改应用程序以便其他对象可能正在使用 itemProperty，他们会发现它在调用委托后被神秘地释放了。

另一方面，如果您不整理 中的内存`dealloc`，您会遇到一种情况，即您依赖于调用委托来确保正确管理内存。你真的能保证在你的应用程序中的某个时刻总是会调用委托方法吗？万无一失？即使有可能导致您的应用程序执行流程异常的异常或其他错误情况？

即使您可以保证这一点，随着应用程序逻辑的更改，情况可能不再如此，您会忘记委托正在执行内存管理，从而导致泄漏或段错误。当然，维护您的代码的其他可可开发人员不会考虑查看委托进行内存管理，并且可能很难调试出现的问题。

在这种情况下，让代理只使用`itemProperty`而不保留、释放或自动释放它（当然，除非代理需要保证 itemProperty 可能在 MyObject 消失后仍然存在）。当 MyObject 被释放时，itemProperty 数据将被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:40:22.287

通常，您仅在分配、新建或复制某些内容时才发布。由于您除了发布之外没有提供任何其他代码，因此很难说您是否应该发布。

从您所说的来看，最好的解决方案似乎是使用自动释放池。获取数据后，让 MyObject 调用 [itemProperty autorelease]。然后它会在您的委托人使用后自动释放。然而，这取决于你如何做这一切:-)

同样，更多的代码会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T16:30:50.743

首先，您不声明对象。您的对象创建其他对象、拥有它们、传递它们等等。

**永远不要发布你不拥有的东西。**释放一个对象意味着“我希望不再拥有这个对象”。如果你已经不拥有它，你要放弃什么？当你像这样做坏 mojo 时，预计会损坏。

如果您希望当前所有者停止拥有它，请告诉它。通常，这将类似于`[myObject setItemProperty:nil]`（或`myObject.itemProperty = nil`）。或者您可以提供一个新对象。无论哪种方式，当前所有者都有责任停止拥有它。

# wordpress - WP默认主题中的水平菜单

> ID：881548
> 
> 赞同：-2
> 
> 时间：2009-05-19T08:20:07.507
> 
> 标签：wordpress, menu

我正在使用 Wordpress 设置一个简单的网页。您可以在 www.unistore.se 上观看。如何在标题下方包含一个水平菜单？我希望能够在 wordpress 管理员中使用“新页面”功能在菜单中创建新链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T08:28:29.817

您必须为此编辑页面模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:22:29.917

看一眼您的网站，您可能已经知道这一点，但以防万一 - 要编辑您的页面模板，请转到主题文件夹中的 header.php 并将此函数放在显示标题的 <h1> 下：

```
<?php wp_list_pages(); ?> 
```

然后，您可以将该函数包装在 div 中，并将列表设置为水平显示。

替代解决方案：我没有尝试过，但是有一个用于在 WordPress 中创建菜单的插件 - 这是一个链接： [http ://wordpress.org/extend/plugins/allwebmenus-wordpress-menu-plugin/](http://wordpress.org/extend/plugins/allwebmenus-wordpress-menu-plugin/)

[或者只是在http://wordpress.org/extend/plugins/](http://wordpress.org/extend/plugins/)中搜索“菜单”

# asp.net-mvc - ASP.NET MVC：部分类：将模型转换为通用类？

> ID：881553
> 
> 赞同：1
> 
> 时间：2009-05-19T08:21:21.810
> 
> 标签：asp.net-mvc, generics, partial-views

我正在构建一个在 ASP.NET MVC 应用程序中使用的通用网格。我在制作一个将泛型类传递给它的局部视图时遇到了麻烦。

我准备了一个小示例项目，它展示了我想要做什么。[在这里下载。](http://thomasstock.net/GenericGridSpike.zip)

在 HomeController 中，我有 2 个控制器操作，它们使用我的通用网格类来准备员工和部门数据，以由可重用的部分视图 /Shared/SimpleTrustGridViewer.ascx 显示。

问题是，当我像这样继承部分视图时，我目前只能让员工控制器操作起作用：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<TrustGrid<Employee>>" %> 
```

Departments controlleraction 将抛出我坚持的错误。

我希望有人可以看看我准备的示例项目，并能想出一种简单的方法来使部分视图对员工和部门都有效。不需要数据库或任何东西，我只是使用假存储库。

您可以在此处复制粘贴修复代码或链接或邮寄 (*myUserNameWithoutSpace*1985@gmail.com) 修复的示例项目。

任何帮助深表感谢！

[（这是对这个问题](https://stackoverflow.com/questions/875085/generic-partial-view-how-to-set-a-generic-class-as-model)的跟进，因为我无法在那里得到一个好的答案。我现在准备了一个示例项目，您可以使用它来演示需要做什么。）

**编辑**：不要太介意 IColumn 和 ITrustGrid 接口，我在尝试解决问题时对它们进行了一些尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:11:14.480

扩展像 .getTrustGrid() 这样的方法，这样您就可以获得所需的相同类型。

# unix - unix 环境 'cd' 命令的源代码

> ID：881560
> 
> 赞同：9
> 
> 时间：2009-05-19T08:24:00.853
> 
> 标签：unix, chdir

我在哪里可以找到 Unix 环境`cd`命令的源代码？

我想知道命令是如何实现的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T08:33:08.340

这是一个完整的解释如何`cd`工作：[http ://web.archive.org/web/20090515201659/http://www.cs.ucr.edu/~brett/cs153_w02/syscall.html](http://web.archive.org/web/20090515201659/http://www.cs.ucr.edu/~brett/cs153_w02/syscall.html)

`cd`Unix 命令只是调用并`chdir`检查错误代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-05T01:54:30.840

要查看 bash cd 命令的源代码，例如：

1.  [从http://ftp.gnu.org/gnu/bash/](http://ftp.gnu.org/gnu/bash/)下载 bash 源
2.  提取源码
3.  检查 bash- *。*/builtins/cd.def，其中“ *.* ”代表您下载的版本（例如 4.2）。根据文件顶部的注释，这是从中创建 cd.c 的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T08:28:46.163

cd 通常内置在 shell 中，您应该只查看任何 shell 的代码，例如 bash 或 ash。

cd 命令最终应该基于 chdir() 函数，但如果您对所有命令行扩展感兴趣，那么源代码就是 shell。

[http://en.wikipedia.org/wiki/Comparison_of_computer_shells](http://en.wikipedia.org/wiki/Comparison_of_computer_shells)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T08:25:19.337

使用 chdir 函数：

[http://www.opengroup.org/onlinepubs/009695399/functions/chdir.html](http://www.opengroup.org/onlinepubs/009695399/functions/chdir.html)

# browser - 哪些浏览器只支持 SSLv2？

> ID：881563
> 
> 赞同：27
> 
> 时间：2009-05-19T08:24:29.073
> 
> 标签：browser, ssl

哪些浏览器只使用 SSLv2？我计划在我们的网络服务器上禁用 SSLv2，并且想知道哪些浏览器会受到影响。我在任何地方都找不到 Firefox 1/2 和 IE6/7 支持的 SSL 版本。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-20T14:39:57.467

根据这本书，[*Data Center Fundamentals，*](http://astore.amazon.com/amazon-books-20/detail/1587050234/)第 369 页，在 Netscape 2.x 和 Internet Explorer 3.x 中添加了 SSLv3 支持，在 Netscape 4.x 和 Internet Explorer 4.x 中添加了 TLS。

因此，自 1995 年至 1996 年以来，SSLv3 支持已被广泛使用。

我的工作假设是在博物馆外找不到*仅限*SSLv2的浏览器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T14:08:41.790

补充一下，没有服务包的 IE 6 只能运行 SSL 2。带 SP 的 IE 6 可以运行 SSL 3。WinXP 最多可以运行 IE 8。

[http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/ie6-sslv3/f942e818-ffe0-4624-88d6-58dfcdd1ddc9](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_other/ie6-sslv3/f942e818-ffe0-4624-88d6-58dfcdd1ddc9)

[http://windows.microsoft.com/en-ca/internet-explorer/ie-system-requirements#ie=ie-8](http://windows.microsoft.com/en-ca/internet-explorer/ie-system-requirements#ie=ie-8)

令人难以置信的是 IE 6 仍然存在，是的，即使在 2014 年。但是，坦率地说，如果你担心安全性，转身说，好吧，如果你不能使用我的密钥是没有多大意义的猜想我们会敞开大门。如果安全很重要，那么就执行它。我知道，我知道，你不想给你的客户带来不便。但说真的，更新你过期的 XP 机器已经......

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2009-05-19T09:00:28.160

我相信这取决于正在使用的底层 SSL 库。

# python - 在打印语句中，是什么决定了 python shell 是打印空字符还是等待输入

> ID：881564
> 
> 赞同：2
> 
> 时间：2009-05-19T08:24:55.563
> 
> 标签：python

最近我在尝试一些python中的练习程序，我遇到了这个小问题。

当我输入

```
print "" 
```

在 IDLE 中，python shell 打印了一个空字符。

如果我输入

```
print """""" 
```

在 IDLE 中，python shell 打印了一个空字符。

但是如果我键入，python shell 会等待输入

```
print """" 
```

为什么会观察到这种行为。据我所知，它也应该为此打印空字符`print """"`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T08:26:58.617

在 python 中，您可以将字符串用 1 或 3 个引号括起来。

```
print "a"
print """a""" 
```

在您的情况下，解释器正在等待最后一个三引号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T08:30:52.573

我怀疑你的意思是 python 打印了一个空行——这与空字符不同。

当 you 时`print """"""`，python 会找到一个空的三引号字符串。

当 you 时`print """"`，python 找到三引号字符串的开头，并等待您输入其余部分（以 结尾`"""`）。

三重引号字符串可以包括其他引号、换行符等。

# ajax - AJAX 回发和页面生命周期

> ID：881569
> 
> 赞同：0
> 
> 时间：2009-05-19T08:25:51.943
> 
> 标签：ajax, postback, partial, lifecycle

谁能解释一下它是如何工作的。

我有一个页面，其中有更新面板内的按钮和一些类成员（_pageContext）。顺便说一句，它不是静态成员这是它的声明

```
 internal PageContext _pageContext = null; 
```

当我单击按钮时，会发生下一个事件（我跟踪它们制作断点）

1) 页面构造函数。_pageContext == null 在断点处，好的 2) OnInit()。奇怪的事情从这里开始。_pageContext 已经被初始化（尽管它的初始化方法也是断点的，而且这个断点从未被命中）。

它是如何发生的以及页面类的新实例可以从哪里知道这个 _pageContext ，尽管它从未被初始化？在 On_Init 部分回发时恢复之前的类实例是有道理的，尽管这是不可能的，因为 HTTP 是无状态的并且浏览器与服务器类实例没有连接。

对这个超自然的事实有什么建议和解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T05:27:19.493

HTTP 确实是无状态的。ASP.NET WebForms 通过巧妙地使用 ViewState 将这些从您那里抽象出来。听起来 pageContext 正在被 ViewStated 存在 -[看看这个以获得更多信息](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。

如果一开始并不明显，请不要担心——理解生命周期并不容易。嗯嗯。

# vb.net - VB.NET 中的类与模块

> ID：881570
> 
> 赞同：164
> 
> 时间：2009-05-19T08:26:09.070
> 
> 标签：vb.net

在 VB.NET 中使用模块而不是具有共享成员函数的类是否被认为是一种可接受的做法？

我倾向于避免使用模块，因为它们感觉像是 Visual Basic 6.0 的剩余部分，并且似乎不再适合。另一方面，使用模块和只有共享成员的类之间似乎没有太大区别。我真的不太需要其中任何一个，但有时它们会提供一个简单的解决方案。

我很想知道您是否有任何意见或偏好。

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2009-05-19T08:29:22.840

`Module``static`s 是 C#类的 VB 对应项。当您的类仅设计用于辅助函数和扩展方法并且您**不想**允许**继承**和**实例化**时，您可以使用`Module`.

顺便说一句，使用`Module`并不是很主观，也**没有弃用**。事实上，你必须`Module`在适当的时候使用 a 。.NET Framework 本身做了很多次（`System.Linq.Enumerable`例如）。要声明扩展方法，需要使用`Module`s。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-19T08:38:51.153

我认为避免使用模块是一个好主意，除非您将它们放入单独的名称空间中。因为在 Intellisense 中，模块中的方法将在该命名空间的任何地方可见。

因此，`ModuleName.MyMethod()`您最终不会`MyMethod()`在任何地方出现弹出窗口，这种情况会使封装无效。（至少在编程级别）。

这就是为什么我总是尝试使用共享方法创建类，看起来好多了。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2009-05-19T14:21:10.227

模块绝不是过时的，并且在 VB 语言中大量使用。例如，这是在 VB.Net 中实现扩展方法的唯一方法。

具有静态成员的模块和类之间存在巨大差异。只要 Module 在当前命名空间中可用，在 Module 上定义的任何方法都可以全局访问。实际上，模块允许您定义全局方法。这是只有共享成员的类无法做到的。

这是我在编写与原始 COM 接口互操作的 VB 代码时经常使用的一个简单示例。

```
Module Interop
  Public Function Succeeded(ByVal hr as Integer) As Boolean
    ...
  End Function

  Public Function Failed(ByVal hr As Integer) As Boolean
    ...
  End Function
End Module

Class SomeClass
  Sub Foo()
    Dim hr = CallSomeHrMethod()
    if Succeeded(hr) then
      ..
    End If
  End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-01-13T17:13:34.357

使用是可以接受的`Module`。`Module`不用作 的替代品`Class`。`Module`服务于自己的目的。的目的`Module`是用作容器

*   扩展方法，
*   不特定于任何变量的变量`Class`，或
*   不适合任何`Class`.

`Module`不像，`Class`因为你不能

*   从 a 继承`Module`，
*   用 a实现`Interface`a `Module`，
*   也不创建 a 的实例`Module`。

a 中的任何内容`Module`都可以在`Module`程序集中直接访问，而无需`Module`通过其名称引用。默认情况下，a 的访问级别`Module`是`Friend`。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-07-16T10:52:08.347

**课程**

*   类可以实例化为**对象**
*   每个实例化对象的对象数据分别存在。
*   类可以**实现接口**。
*   在类中定义的成员在类**的特定实例范围内，并且仅****在对象的生命周期**内存在。
*   要从类外部访问类成员，您必须使用*Object.Member*格式的**完全限定名称**。

 ***模块**

*   模块**不能被实例化为对象**，因为标准模块的数据只有一份副本，当你的程序的一部分改变标准模块中的公共变量时，它将对整个程序可见。
*   默认情况下，在模块中声明的成员是可**公开访问的。**
*   任何可以访问该模块的代码都可以访问它。
*   这意味着标准模块中的变量实际上是全局变量，因为它们在项目中的任何地方都可见，并且它们在程序的生命周期内都存在。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2011-03-11T21:53:17.130

当我的 VB.NET 类之一具有所有共享成员时，我要么将其转换为具有匹配（或其他适当）命名空间的模块，要么使该类不可继承且不可构造：

```
Public NotInheritable Class MyClass1

   Private Sub New()
      'Contains only shared members.
      'Private constructor means the class cannot be instantiated.
   End Sub

End Class 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-11T10:32:12.667

模块可以很好地存储枚举和一些全局变量、常量和共享函数。它非常好，我经常使用它。声明的变量在整个项目中都是可见的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-12T03:10:27.717

如果要创建扩展方法，则*必须*使用模块（而不是类）。在 VB.NET 中，我不知道另一种选择。

由于我自己对模块有抵抗力，我只是花了几个小时试图找出如何添加一些样板代码来解决嵌入程序集的问题，结果发现`Sub New()`(Module) 和`Shared Sub New()`(Class) 是等价的。（我什至不知道模块中有*一个*可调用对象`Sub New()`！）

所以我只是把`EmbeddedAssembly.Load`和`AddHandler AppDomain.CurrentDomain.AssemblyResolve`线扔在那里，鲍勃就成了我的叔叔。

**附录**：我还没有 100% 地检查它，但是我有一个暗示，`Sub New()`它在模块中的运行顺序与在类中的运行顺序不同，只是因为我不得不将一些声明从外部移动到内部方法以避免错误。

# web-services - Web 服务接口 - 复杂类型作为参数？

> ID：881571
> 
> 赞同：6
> 
> 时间：2009-05-19T08:26:15.297
> 
> 标签：web-services

只是在寻找有关 Web 服务界面设计最佳实践的一些反馈。

我有两个选择：

**选项1**

```
public string GetSomeData(SomeCriteriaClass criteria); 
```

其中 SomeCriteriaClass 定义为：

```
public int ID;
public string Name;
public string Property2; etc. 
```

**选项 2**

```
public string GetSomeData(int id, string name, string property2) 
```

哪个是首选？这似乎是一种设计模式的冲突——一种是将参数包装在一个类中，另一种是保持 Web 服务接口的灵活和开放。

第二个问题是 - 如果我们选择 Option1 - 你如何通过 URL 调用它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:29:43.900

您可以使用 SOAP 来实现选项 #1。使用 SOAP，您可以定义复杂的数据类型。另一方面，您可以像选项 #2 中的“hack”方式使用 REST 并仅在 URL 或 HTTP POST 消息中对参数进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T09:23:18.177

术语“Web 服务”通常用于两种不同的事物。

*   一种技术：使用 HTTP(S) 作为进程间通信的协议。

*   一种架构方法：面向服务的架构。

如果我们将 Web 服务仅仅作为一种技术来讨论，那么您有很多选择：您可以使用 HTTP GET（这是使用 URL 参数的那个）或 HTTP POST（数据在 HTTP 消息的正文中）。对于 HTTP POST，有效负载可以是 SOAP 或任何专有的东西。

如果我们谈论面向服务的方法和作为工具的 Web 服务，那么 HTTP+SOAP 是最标准的方法。

如果我们认为 Web 服务方法只是服务操作的实现，那么使用下面强调这种方法的签名：

```
public FooResponse FooOperation(FooRequest request); 
```

这意味着一个操作有一个请求和一个响应文档（即使其中任何一个是空的），并且您可以将服务合同（您公开哪些操作）和数据合同（您如何编写请求和响应消息）分开. 有关它的更多详细信息，请参阅这篇文章：[服务设计原则和服务模式和反模式](http://msdn.microsoft.com/en-us/library/ms954638.aspx)

结论：

*   如果您不关心 SOA，只想通过 HTTP 调用一个方法，那么选项 2 就很简单明了。
*   但是，如果您正在构建 SOA 服务，那么请使用“以文档为中心”的签名。选项 1 是两者的混合，不推荐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T12:04:15.957

选项 1 公共字符串 GetSomeData(SomeCriteriaClass 标准); 是实现 web 服务的好方法，因为这里你使用的是 SOAP 和面向文档的术语。选项 2 适用于那些不太关注设计模式的基本 Java 开发人员。

让我们来看看场景 - 使用选项 2 后，假设您想在 SomeCriteriaClass.java 中再添加 3 个变量，那么您将选择哪种方式.. 在 GetSomeData() 方法中再添加 3 个参数或在 SomeCriteriaClass.java 中声明。

一个好的设计模式追随者，选择在 SomeCriteriaClass.java 中声明而不是在 GetSomeData() 中添加。

# sql - 更新语句中的语法错误

> ID：881573
> 
> 赞同：0
> 
> 时间：2009-05-19T08:26:25.483
> 
> 标签：sql, oledb

代码：

```
string query1 = @"UPDATE global_mapping set escape_id = " + 
  dataGridView1.Rows[i].Cells[2].Value + ",function_id = " + 
  dataGridView1.Rows[i].Cells[3].Value + ",function_name = '" + 
  dataGridView1.Rows[i].Cells[4].Value + "',parameter_name = '" + 
  dataGridView1.Rows[i].Cells[5].Value + "',parameter_validity = '" + 
  dataGridView1.Rows[i].Cells[6].Value + "',statusparameter_id = " + 
  dataGridView1.Rows[i].Cells[7].Value + ",acb_datatype = '" + 
  dataGridView1.Rows[i].Cells[8].Value + "',data_type_id = " + 
  dataGridView1.Rows[i].Cells[9].Value + ",bit_size = " + 
  dataGridView1.Rows[i].Cells[10].Value + ",validity_status ='" + 
  dataGridView1.Rows[i].Cells[11].Value + "',validity_func = '" + 
  dataGridView1.Rows[i].Cells[12].Value + "'WHERE global_mapping.parameter_id =" + 
  dataGridView1.Rows[i].Cells[1].Value + "";
OleDbCommand cmd1 = new OleDbCommand(query1, conn);
cmd1.ExecuteNonQuery(); 
```

代码结束：

当我执行上述代码时，我收到一条错误消息，指出“更新语句中的语法错误”。有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:48:27.780

看起来您需要在 WHERE 子句之前添加一个空格。

希望这可以帮助，

账单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:28:25.353

哇。我们可以说... SQL 注入吗？

尝试使用参数。您不仅会保护自己，而且您的 SQL 将变得更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T08:28:30.220

永远不要使用字符串连接来构建 SQL 查询。使用 SQL 参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T08:29:24.867

哎呀！请提供最终的 query1 值并尝试对其进行格式化，以便我们更好地了解它。我的猜测是缺少 ' 或其他东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T08:36:49.237

我会说你在那里遗漏了一些引号，但你的代码是如此的猪圈，我无法分辨。如果你不修复你的代码，那么至少给我们一个 query1 的转储，这样我们就可以读取你的实际查询。

并像前面回复所说的那样使用参数或存储过程。所需要的只是你的一个变量被讨厌的东西覆盖，你的服务器将对任何删除你的表或更糟的人开放。

即使这是一个本地“安全”数据库，你现在也应该改掉你的坏习惯。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-19T08:49:16.013

放在 `Console.WriteLine(query1)` 前面`OleDbCommand cmd1 = new OleDbCommand(query1, conn);`

查看`query1`打印到控制台窗口的值。
SQL 语句看起来正常吗？我猜不是——您现在可以在网格中找到一个非数字且为空白的字段。

并且，像其他人所说的那样使用参数。

# asp.net - Asp.net 3.5 Sp1 子域路由？

> ID：881574
> 
> 赞同：0
> 
> 时间：2009-05-19T08:26:39.727
> 
> 标签：asp.net, wildcard-subdomain, asp.net-routing, webforms-routing

我想知道有没有办法在 Asp.net 3.5 路由中引入子域

我发现的都是[http://blogs.securancy.com/post/ASPNET-MVC-Subdomain-Routing.aspx](http://blogs.securancy.com/post/ASPNET-MVC-Subdomain-Routing.aspx)

但我正在寻找更复杂的东西来允许做通配符子域

任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T12:34:24.030

应该没问题，即使有那个样本。在这种情况下，只需将通配符添加到您的 DNS "*.yourdomain" 并使用开关中的 'default' 语句来处理通配符。

换句话说，将 Global.asax 的示例更改为：

```
 default: 
                returnValue = new RouteData(this, new MvcRouteHandler());
                returnValue.Values.Add("controller", "MyControllerName"); 
                returnValue.Values.Add("action", "MyActionName");

                // for example, provide the entered subdomain as parameter;
                returnValue.Values.Add("MyActionParameterName", subDomain); 
                break; 
```

并且不要忘记：在您的 DNS 中添加通配符。但是，不能在 localhost 上测试子域。

# .net - 服务器端图表解决方案

> ID：881583
> 
> 赞同：0
> 
> 时间：2009-05-19T08:28:47.193
> 
> 标签：.net, charts

我正在寻找用于生成图表的 .NET 2 库。

*   .NET 2
*   占地面积小
*   快速地
*   基本中等制图能力
*   饼图支持
*   需要流输出
*   文件输出可选

你能推荐什么？为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:43:30.300

[微软的图表控件](http://www.microsoft.com/downloads/details.aspx?FamilyId=130F7986-BF49-4FE5-9CA8-910AE6EA442C&displaylang=en)呢？它是正式的 3.5，但到目前为止，我在 2.0 项目中使用它们还没有遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:34:41.177

我在我的 WinForms 应用程序中使用[ZedGraph取得了一定的成功。](http://zedgraph.org/wiki/index.php?title=Main_Page)它是免费的、轻量级的且易于使用。

您可以开始使用[饼图示例](http://zedgraph.org/wiki/index.php?title=Pie_Chart_Demo) [![替代文字](https://i.stack.imgur.com/LZGqe.png)](https://i.stack.imgur.com/LZGqe.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:15:43.213

查看 ScottGu 在[New ASP.NET Charting Controls](http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx)上的帖子。

[![替代文字](https://i.stack.imgur.com/dEmdP.png)](https://i.stack.imgur.com/dEmdP.png)
[（来源：[scottgu.com](http://www.scottgu.com/blogposts/chart/step2.png)）]

# java - 无法从 Firefox 扩展的 Javascript 访问 Java 类

> ID：881585
> 
> 赞同：0
> 
> 时间：2009-05-19T08:29:19.143
> 
> 标签：java, javascript, exception, reflection, firefox-addon

我将开发一个使用一些 Java 类的 Firefox 扩展。扩展`<input type="file">` 使用 Javascript 获取字段的值。

我要创建的 Java 类如下：

```
public class Firefox {
    public static String inFileName;
    public static void main(String[] args) throws IOException {
        inFileName = "";
        try {
            inFileName = args[0];
        } catch (Exception ex) {}
} 
```

在 Javascript 上，我必须使用 Java 反射才能访问 Java 类。

通过这种方式，我可以创建我的 Java 对象：

```
var fileInput = e.explicitOriginalTarget; // is an object HTMLInputElement, I get this when a file is selected
strArray = java.lang.reflect.Array.newInstance(java.lang.Class.forName("java.net.URL"),3);
classLoader = java.net.URLClassLoader.newInstance(strArray);
parameters = java.lang.reflect.Array.newInstance(java.lang.Class.forName("java.lang.String"),1);
parameters[0]= fileInput.value;
var aClass = java.lang.Class.forName("Firefox", true, classLoader);
var aStaticMethod = aClass.getMethod("main", [parameters.getClass()]); //gets the main(String[] args) method, here I get the exception*
var myJava = aStaticMethod.invoke(null, [parameters]); //invokes the main method 
```

我一直在 Firefox-3.5b4 上尝试这个扩展，一切都很好，但是当我在 Firefox-3.0.10 上尝试时，我得到以下异常*：

```
`InternalError: Unable to convert JavaScript value class [Ljava.lang.String; to Java value of type java.lang.Class[]` 
```

例如，将以下行放在 main 方法调用之前：

```
alert(parameters + "  -  " + parameters[0]); 
```

在 Firefox-3.0.10 和 3.5b4 上，我都会收到一个警告窗口，上面写着：

```
`[Ljava.lang.String;@194ca6c  -  /root/demo.pdf`  //demo.pdf is the selected file 
```

但只有在 3.0.10 上我才得到例外，只有在我的 GNU/Linux 机器上。在 Windows XP 上，我在两个 Firefox 版本上都没有问题！

请注意，在 Windows 和 Linux 上，Java 插件版本都是 6 update 13。

我哪里错了？它是 Firefox-3.0.10 Javascript 引擎上的一个可能的错误，还是在获取 main(...) 方法之前我必须做任何其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T08:36:57.037

假设您的完整类名是“your.package.Firefox”，您可以这样做：

```
importPackage("your.package");

args = java.lang.reflect.Array.newInstance(java.lang.String.TYPE, 1);
Firefox.main(args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:34:04.907

您错误地调用了使用的方法；

```
[parameters.getClass()] 
```

它将 java.lang.Class[] 类型的参数传递到期望 String 对象的签名中。只需按原样传递参数对象。

# iphone - iPhone OS 应用程序可以搜索设备的文件系统吗？

> ID：881589
> 
> 赞同：1
> 
> 时间：2009-05-19T08:29:53.883
> 
> 标签：iphone, sandbox

我可以从应用程序中搜索 iPhone 文件系统吗？我需要搜索 iPhone OS 设备并返回 iPhone OS 设备上安装的所有应用程序的列表。我相当了解 Apple 的限制和规则，即关于哪些应用程序可以在沙箱之外执行以及大多数情况下不能执行 - 并且知道除了*相册*之外，*地址簿*（通过指定的类）不允许应用程序访问外部的任何内容其主目录（沙箱）的安全性。但界限是模糊的。

无论如何，回到问题： UISearchBarDelegate（或任何其他类/协议）可以让我搜索 iPhone 设备吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:54:35.380

不幸的是，您仍然处于沙盒状态，访问设备文件系统的唯一方法是创建一个越狱设计的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-25T21:16:22.557

严格来说并非如此 - 例如，应用程序*FileSystem*允许您浏览 iOS 文件结构并查看许多（尽管不是全部）文件。但是，您可以访问 iTunes 备份中的几乎所有文件。

# asp.net-mvc - 使用什么技术来启动一个新项目？（技术优先）

> ID：881590
> 
> 赞同：2
> 
> 时间：2009-05-19T08:30:09.640
> 
> 标签：asp.net-mvc, linq-to-sql, entity-framework

今天我从经理那里得到了一个很好的机会，可以提出新技术来启动一个新项目。这里我们以前主要使用 ASP.NET 和 SQL。我真的很想建议使用 ASP.NET MVC 和 LINQ To SQL 并做一些不错的 TDD。问题是，我不知道如何说服我的经理，实际上我自己也不确定这些选择。请您成为我，并提出您认为最好的一组新技术，并提出一些资源以防开发人员不了解这些技术，以及在过渡期间我们可能想要考虑的任何其他事情。

PS：这个项目是一个网站，并且经常使用 Amazon Web Services，好在它是一个内部项目，时间没有那么大的限制。

等着你们这些可爱的小伙伴们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T08:39:01.730

显而易见的，如果不是立即有用的答案是在向任何人推荐它们之前去了解任何技术。如果你不相信，那就去拿起一个工具包，试着让它做点什么。

.Net MVC、Ruby on Rails 和大量其他平台存在，选择 3 并在每个平台中尝试相同的项目。这样你很快就会有一个你认为最强大的想法，并且说服你的经理将成为一个简单的案例“技术 X 更好，因为我们将花费更少的时间来构建一个更稳定的产品，从而为你省钱” .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:41:35.313

我最近也有同样的情况。
我使用的组合：

1.  ASP.NET MVC
    因为我厌倦了 webForms。一般来说，mvc 应该更快。

2.  StructureMap IoC
    因为我希望应用程序松散耦合，首先尝试了它，它的工作做得足够好。

3.  NHibernate
    因为它最适合 DDD，尽管缺乏 sproc 支持。

4.  RhinoMocks
    现在 - 它只是坐在我的工具带中等待轮到它。

5.  AutoMapper
    不再需要 NHibernate 映射功能的原因。

6.  MsTest 框架
    仍然没有看到任何关于切换到另一个的好论据。

7.  JQuery
    因为我不喜欢 MsAjax 框架。这太笨拙了。

8.  MVCContrib
    因为它使 ASP.NET MVC 应用程序更易于编写。

9.  Fluent NHibernate
    因为它为配置 NHibernate 提供了更好的方法。

试图遵循 TDD 和 DDD。也逐渐重写旧的遗留应用程序。
到现在为止还挺好。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T08:38:22.743

我认为如果你走的是 MVC 路线，你可能也应该考虑学习 JQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T08:39:47.857

您可以说 ASP.NET MVC 和 LINQ to SQL 确实提高了生产力并且非常易于维护。此外，逻辑得到很好的分离，测试变得轻而易举。

以 SO 为例，说明使用 LINQ2SQL 的 ASP.NET MVC 中的成功且可扩展的解决方案如何在这些新技术中发挥作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T09:13:15.653

在知道深度之前不要潜入游泳池，否则你的头会撞到池底。我了解它是一个内部项目，但在您选择任何技术堆栈之前。我会做以下事情 -

1.  了解团队优势，我不希望我的淡水鱼试图在海洋中游泳。
2.  尽可能多地了解域位。并非所有技术堆栈都以相同的方式解决问题。
3.  你说时间不是问题，但时间往往是驱动力。设定一个可行的时间表。
4.  制作一些软件的原型。

我认为你可以缩小到你想要的技术堆栈。我的选择是——

1.  ASP.net MVC + Entity Framework + jQuery + Silverlight（如果 RIA 是一个目标）
2.  MonoRail + NHibernate/ActiveRecord + jQuery + Silverlight（如果 RIA 是一个目标）
3.  混合搭配 1 和 2
4.  如果您喜欢网络表单或适合您团队的技能，为什么不呢？在新的 .net 版本中，我们将迎来许多新的发展方向。

# .net - 注册 Outlook 识别的自定义 url 协议处理程序？

> ID：881592
> 
> 赞同：7
> 
> 时间：2009-05-19T08:31:21.137
> 
> 标签：.net, outlook, uri, protocols, handler

早上好，

[我已经成功创建了一个小应用程序，该应用程序在http://msdn.microsoft.com/en-us/library/aa767914(VS.85)](http://msdn.microsoft.com/en-us/library/aa767914(VS.85).aspx)上的 msdn 条目之后在自定义 uri 协议 ('irma:') 下注册自己。 [aspx](http://msdn.microsoft.com/en-us/library/aa767914(VS.85).aspx)

当通过 shell/cmd 等手动打开这样的链接时，这工作得非常好，但是当发送这样的链接时，outlook 无法在设置了注册表项的客户端上“自动”识别这些链接。我是否需要做一些额外的事情才能让 Outlook 处理这样的自定义 uri，或者有可能吗？

干杯和感谢，-j

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-02T11:34:37.783

[好的，我将把这个作为一个新的答案发布，以保持这个干净，而不删除所有以前发布的内容。]

我刚刚重复了我在另一个答案中提到的研究，似乎在过去三年里情况有了很大的改善。Outlook 2003 (SP3) 和 Outlook 2007 (SP2) 现在都可以自动识别 MS 产品支持邮件中列出的所有协议，这些协议在我的旧答案链接的 NG 线程中引用，**包括`url:`-protocol！**

后者意味着您现在可以编写如下内容：

```
url:irma:whatever 
```

并对其进行适当的链接和处理。然而，Outlook 将在执行协议处理程序之前显示一个安全确认对话框。

**更新：**请注意，在 Outlook 2003 SP3 中，新协议（例如`url:`、`mms://`等）仅在 HTML 邮件中自动链接。纯文本检查器的行为如我的其他答案中所述。但是，它确实适用于 Outlook 2007 SP2 中的纯文本邮件。

但是，我仍然没有发现在 Outlook 中简单地注册自定义协议的能力的提示，这些协议可以在没有`url:`-prefix 的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T11:47:24.557

**更新：**下面显示的信息现在似乎已经过时了。请参阅我的另一个答案。

* * *

我过去对此进行了一些研究，得出的结论是这是不可能的。Outlook 能够“自动链接”的协议显然是硬编码的。我之前的研究结果记录在这个新闻组线程中：

[如何使自定义应用程序可被 Outlook/Word/... 识别](http://groups.google.com/group/microsoft.public.inetsdk.programming.urlmonikers/browse_thread/thread/a50b92c595d05968/c4a016d9f2888f15)
（于 2005 年 4 月至 6 月在 microsoft.public.inetsdk.programming.urlmonikers 上发布）

来自 MS 产品支持的报价：

> 不幸的是，Office 中的超链接识别 - 以便自动格式自动将输入的文本转换为超链接 - 是硬编码的。
> 因此，您不能将新协议添加到识别中。

请参阅该[线程中的最后一篇文章，](http://groups.google.com/group/microsoft.public.inetsdk.programming.urlmonikers/browse_thread/thread/a50b92c595d05968/c4a016d9f2888f15#7b4f4a44c0149e80)了解我对各种 Office 程序之间 URL 识别差异的总结（提示：Outlook 支持的协议最少）。

这是有关 Outlook 的相关信息。以下模式被 Outlook 自动识别为链接（截至 2005 年 6 月，即 Outlook 2003）：

1.  如果超链接的第一个单词是

    *   “www”（例如 www.microsoft.com）
    *   “ftp”（例如 ftp.microsoft.com）
2.  如果超链接以以下表达式之一开头，后跟“：/”

    *   http
    *   https
    *   ftp
    *   地鼠
    *   繁荣
    *   远程登录
    *   怀斯
    *   文件
3.  如果超链接以以下表达式之一开头，后跟“：”和字符串（例如`mailto:blah`）

    *   邮寄
    *   消息
    *   ntp
    *   外表

# yahoo-pipes - 我可以在 Yahoo!Pipes 中做 FetchPage 并且可以做 FetchPage 的结果吗？

> ID：881595
> 
> 赞同：0
> 
> 时间：2009-05-19T08:33:13.520
> 
> 标签：yahoo-pipes

我用 Yahoo!Pipes 抓取了一个页面，并且想用这个结果更多地抓取其他页面。

例如 [FetchPage] -[Regex] 基于它 [URLBuilder]

我想在 Path 中输入 URLBuilder，但是这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:29:12.523

您可以使用**数字输入**作为**Fetch Page**（如果您想从页面的不同部分进行分页）或**URL Builder**（如果页面支持服务器端分页）的输入

# c# - 在树视图中添加子节点

> ID：881607
> 
> 赞同：20
> 
> 时间：2009-05-19T08:38:15.473
> 
> 标签：c#, treeview

我是 C# 新手，没有任何编程经验。但我已经完成了 C# 基础知识。现在我想通过添加父节点和子节点来设计一个简单的树视图。

我想为第二个节点添加第二个孩子，我很困在这里，不知道接下来会发生什么。

有任何想法吗？

这是代码：

```
 private void addParentNode_Click(object sender, EventArgs e)
    {
        string yourParentNode;
        yourParentNode = textBox1.Text.Trim();
        treeView2.Nodes.Add(yourParentNode);
    }

    private void addChildNode_Click(object sender, EventArgs e)
    {
        string yourChildNode;
        yourChildNode = textBox1.Text.Trim();
        treeView2.Nodes[0].Nodes.Add(yourChildNode);
    } 
```

对不起，我不清楚，我不确定我是否真的需要这个：

```
 //treeView1.BeginUpdate(); 
  //treeView1.Nodes.Clear(); 
```

我想要做的是添加父节点和子节点。在我的代码中，我可以添加几个父节点，但是如果我想添加一个子节点，它只添加第一个父节点。我希望如果我添加一个子节点，我想将它添加到第二个父节点或第三个父节点。

在我的代码中，我在这里只使用一个名为 treeview2 的树视图 这是[**截图**](http://www.mypicx.com/05192009/error/)

这就是我的最终代码的样子：在我输入 else 之前，如果我没有选择任何东西，我会收到错误消息。所以我这样做了，如果没有选择任何内容，它会将“子节点”添加到“默认节点”或（parent1 节点）。它似乎运作良好。多谢你们;-）

```
 //This is for adding a parent node
    private void addParentNode_Click(object sender, EventArgs e)
    {
        treeView2.BeginUpdate();

        string yourParentNode;
        yourParentNode = textBox1.Text.Trim();
        treeView2.Nodes.Add(yourParentNode);
        treeView2.EndUpdate();
    }

    //This is for adding child node
    private void addChildNode_Click(object sender, EventArgs e)
    {
        if (treeView2.SelectedNode != null)
        {
            string yourChildNode;
            yourChildNode = textBox1.Text.Trim();

            treeView2.SelectedNode.Nodes.Add(yourChildNode);
            treeView2.ExpandAll();
        }
        //This is for adding the child node to the default node(parent 1 node)
        else
        {
            string yourChildNode;
            yourChildNode = textBox1.Text.Trim();
            treeView2.Nodes[0].Nodes.Add(yourChildNode);
        } 
```

附加问题：还有其他方法可以使代码变得更好吗？因为在这里，我两次声明了字符串“yourChildNode”。if 一个，else 一个，有没有简化？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-19T08:46:25.957

这还不错，但你忘了调用`treeView2.EndUpdate()`你的`addParentNode_Click()`方法。
您也可以在方法`treeView2.ExpandAll()`结束时调用以`addChildNode_Click()`直接查看您的子节点。

```
private void addParentNode_Click(object sender, EventArgs e) {
  treeView2.BeginUpdate();
  //treeView2.Nodes.Clear();
  string yourParentNode;
  yourParentNode = textBox1.Text.Trim();
  treeView2.Nodes.Add(yourParentNode);
  treeView2.EndUpdate();
}

private void addChildNode_Click(object sender, EventArgs e) {
  if (treeView2.SelectedNode != null) {
    string yourChildNode;
    yourChildNode = textBox1.Text.Trim();
    treeView2.SelectedNode.Nodes.Add(yourChildNode);
    treeView2.ExpandAll();
  }
} 
```

我不知道这是否是一个错误，但有 2 个 TreeViews。我将其更改为只有 1 个 TreeView ...

编辑：回答附加问题：
您可以在 if 子句之外声明包含子节点名称的变量：

```
private void addChildNode_Click(object sender, EventArgs e) {
  var childNode = textBox1.Text.Trim();
  if (!string.IsNullOrEmpty(childNode)) {
    TreeNode parentNode = treeView2.SelectedNode ?? treeView2.Nodes[0];
    if (parentNode != null) {
      parentNode.Nodes.Add(childNode);
      treeView2.ExpandAll();
    }
  }
} 
```

注意：有关 ?? 的信息，请参阅[http://www.yoda.arachsys.com/csharp/csharp2/nullable.html](http://www.yoda.arachsys.com/csharp/csharp2/nullable.html) 操作员。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-08-24T09:12:59.580

我可以在 Stormenet 示例中添加一些 KISS（保持简单和愚蠢）：

如果您已经有一个 treeView 或者刚刚创建了它的一个实例：让我们填充一些数据 - 例如。一个父母两个孩子的：

```
 treeView1.Nodes.Add("ParentKey","Parent Text");
            treeView1.Nodes["ParentKey"].Nodes.Add("Child-1 Text");
            treeView1.Nodes["ParentKey"].Nodes.Add("Child-2 Text"); 
```

另一个前任。两个父母的第一个有两个孩子的第二个孩子：

```
 treeView1.Nodes.Add("ParentKey1","Parent-1  Text");
            treeView1.Nodes.Add("ParentKey2","Parent-2 Text");
            treeView1.Nodes["ParentKey1"].Nodes.Add("Child-1 Text");
            treeView1.Nodes["ParentKey1"].Nodes.Add("Child-2 Text");
            treeView1.Nodes["ParentKey2"].Nodes.Add("Child-3 Text"); 
```

如果更远 - 孩子 2 的子孩子：

```
 treeView1.Nodes.Add("ParentKey1","Parent-1  Text");
            treeView1.Nodes["ParentKey1"].Nodes.Add("Child-1 Text");
            treeView1.Nodes["ParentKey1"].Nodes.Add("ChildKey2","Child-2 Text");
            treeView1.Nodes["ParentKey1"].Nodes["ChildKey2"].Nodes.Add("Child-3 Text"); 
```

如您所见，您可以拥有任意数量的孩子和父母，并且可以拥有子孩子的孩子等等....希望我有所帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T08:48:52.270

添加子节点的示例：

```
private void AddExampleNodes()
        {
            TreeNode node;

            node = treeView1.Nodes.Add("Master node");
            node.Nodes.Add("Child node");
            node.Nodes.Add("Child node 2");

            node = treeView1.Nodes.Add("Master node 2");
            node.Nodes.Add("mychild");
            node.Nodes.Add("mychild");
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T09:25:44.693

看起来您只是将子节点添加到第一个父节点`treeView2.Nodes[0].Nodes.Add(yourChildNode)`
根据您希望它的行为方式，您需要明确说明要将子节点添加到的父节点。
例如，从您的屏幕截图中，如果您想将子节点添加到第二个节点，您需要：
`treeView2.Nodes[1].Nodes.Add(yourChildNode)`
如果要将子节点添加到当前选定的节点，请获取`TreeView.SelectedNode`并将子节点添加到它。

尝试[TreeView](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview(VS.80).aspx "树视图")以了解该类的操作方式。不幸的是，msdn 文档中的代码示例非常简单……

我在这里遗漏了很多安全检查！

类似（未经测试）：

```
private void addChildNode_Click(object sender, EventArgs e) {
  TreeNode ParentNode = treeView2.SelectedNode;  // for ease of debugging!
  if (ParentNode != null) {
    ParentNode.Nodes.Add("Name Of Node");
    treeView2.ExpandAll();   // so you can see what's been added              
    treeView2.Invalidate();  // requests a redraw
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-07T18:15:05.737

我需要做类似的事情并且遇到了同样的问题。我使用 AfterSelect 事件来确保我没有获得先前选择的节点。

实际上很容易引用正确的节点来接收新的子节点。

```
private void TreeView1_AfterSelect(object sender, System.Windows.Forms.TreeViewEventArgs e)
{
   //show dialogbox to let user name the new node
   frmDialogInput f = new frmDialogInput();
   f.ShowDialog();

    //find the node that was selected
    TreeNode myNode = TreeView1.SelectedNode;
    //create the new node to add
    TreeNode newNode = new TreeNode(f.EnteredText);
    //add the new child to the selected node
    myNode.Nodes.Add(newNode);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-03-07T07:35:21.067

```
void treeView(string [] LineString)
    {
        int line = LineString.Length;
        string AssmMark = "";
        string PartMark = "";
        TreeNode aNode;
        TreeNode pNode;
        for ( int i=0 ; i<line ; i++){
            string sLine = LineString[i];
            if ( sLine.StartsWith("ASSEMBLY:") ){
                sLine  = sLine.Replace("ASSEMBLY:","");
                string[] aData = sLine.Split(new char[] {','});
                AssmMark  = aData[0].Trim();
                //TreeNode aNode;
                //aNode = new TreeNode(AssmMark);
                treeView1.Nodes.Add(AssmMark,AssmMark);
            }
            if( sLine.Trim().StartsWith("PART:") ){
                sLine  = sLine.Replace("PART:","");
                string[] pData = sLine.Split(new char[] {','});
                PartMark = pData[0].Trim();
                pNode = new TreeNode(PartMark);
                treeView1.Nodes[AssmMark].Nodes.Add(pNode);
            }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-14T09:49:18.033

您可以执行以下操作来使用父节点和子节点填充 treeView。并且还具有父节点和子节点的显示和值成员：

```
 arrayRoot = taskData.GetRocordForRoot();  // iterate through database table
    for (int j = 0; j <arrayRoot.length; j++) { 
                TreeNode root = new TreeNode();  // Creating new root node
                root.Text = "displayString";
                root.Tag = "valueString";
                treeView1.Nodes.Add(root); //Adding the root node

             arrayChild = taskData.GetRocordForChild();// iterate through database table
                for (int i = 0; i < arrayChild.length; i++) {
                    TreeNode child = new TreeNode(); // creating child node
                    child.Text = "displayString"
                    child.Tag = "valueString";
                    root.Nodes.Add(child); // adding child node
                }

            } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-28T12:56:50.123

**伙计们使用此代码从 C# 代码为 TreeView 添加节点和子节点。** *

亲吻（保持简单和愚蠢:)*

protected void Button1_Click(对象发送者，EventArgs e)

{

```
 TreeNode a1 = new TreeNode("Apple");

        TreeNode b1 = new TreeNode("Banana");
        TreeNode a2 = new TreeNode("gree apple");
        TreeView2.Nodes.Add(a1);
        TreeView2.Nodes.Add(b1);
        a1.ChildNodes.Add(a2); 
```

}

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-06T18:54:38.717

```
SqlConnection con = new SqlConnection(@"Data Source=NIKOLAY;Initial Catalog=PlanZadanie;Integrated Security=True");
        SqlCommand cmd = new SqlCommand();
        DataTable dt = new DataTable();
        public void loadTree(TreeView tree)
        {
            cmd.Connection = con;
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "SELECT [RAZDEL_ID],[NAME_RAZDEL] FROM [tbl_RAZDEL]";
            try
            {
                con.Open();
                SqlDataReader reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    tree.Nodes.Add(reader.GetString(1));
                    tree.Nodes[0].Nodes.Add("yourChildNode");
                    tree.ExpandAll();

                }

                con.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show("Ошибка с сообщением: " + ex.Message);
            }

        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-03T11:57:23.133

您可以改进该代码

```
 private void Form1_Load(object sender, EventArgs e)
    {
        /*
         D:\root\Project1\A\A.pdf
         D:\root\Project1\B\t.pdf
         D:\root\Project2\c.pdf
         */
        List<string> n = new List<string>();
        List<string> kn = new List<string>();
        n = Directory.GetFiles(@"D:\root\", "*.*", SearchOption.AllDirectories).ToList();
        kn = Directory.GetDirectories(@"D:\root\", "*.*", SearchOption.AllDirectories).ToList();
        foreach (var item in kn)
        {
            treeView1.Nodes.Add(item.ToString());
        }
        for (int i = 0; i < treeView1.Nodes.Count; i++)
        {
            n = Directory.GetFiles(treeView1.Nodes[i].Text, "*.*", SearchOption.AllDirectories).ToList();
            for (int zik = 0; zik < n.Count; zik++)
            {
                treeView1.Nodes[i].Nodes.Add(n[zik].ToString());
            }
        }        
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-11T21:49:25.477

```
void tree()
{
    int counter = 0;
    int counter1 = 0;
    int counter2 = 0;
    treeView1.Nodes.Clear();

    var node = db.ChartOfAccounts.
    Include(c => c.chartOfAccounts)
    .Where(c => c.parent_account == null).ToList();

    foreach (var account in node)
    {
               treeView1.Nodes.Add(account.account_title);

                 var node1 = db.ChartOfAccounts
                .Where(c => c.parent_account == account.c_id).ToList();
                 bool t1 = db.ChartOfAccounts.Any(c => c.parent_account == account.c_id);
                 if (!t1) { counter = counter + 1; }
                else
                 {
                    foreach (var item in node1)
                     { treeView1.Nodes[(counter)].Nodes.Add(item.account_title);

                          bool test1 = db.ChartOfAccounts
                          .Any(c => c.parent_account == item.c_id);
                          if (!test1) { counter1 = counter1 + 1; }
                          else { 
                                      var node2 = db.ChartOfAccounts
                                  .Where(c => c.parent_account == item.c_id).ToList();

                                    foreach (var item2 in node2)
                                    {
                                        treeView1.Nodes[counter].Nodes[(counter1)].Nodes.Add(item2.account_title);

                                        bool test2 = db.ChartOfAccounts
                                        .Any(c => c.parent_account == item2.c_id);
                                        if (!test2) { counter2 = counter2 + 1; }
                                        else
                                        {
                                            var node3 = db.ChartOfAccounts
                                        .Where(c => c.parent_account == item2.c_id).ToList();

                                            foreach (var item3 in node3)
                                            { treeView1.Nodes[counter].Nodes[counter1].Nodes[counter2].Nodes.Add(item3.account_title); }
                                        }
                                    }
                                }
                     }
                    counter = counter + 1;
                 }
    }
} 
```

# html - 使用 display:block 链接时 IE 出现问题

> ID：881620
> 
> 赞同：13
> 
> 时间：2009-05-19T08:42:15.293
> 
> 标签：html, css, internet-explorer

这是我的 HTML：

```
<div id="links">
  <a href="">Link 1</a>
  <a href="">Link 2</a>
  <a href="">Link 3</a>
  <a href="">Link 4</a>
</div> 
```

这些是 CSS 样式：

```
#links {
    position: absolute;
    border: 1px solid #000;
}

#links a {
    display: block;
}

#links a:hover {
    background-color: #CCC;
} 
```

这会显示链接列表，问题是在IE中，我只能通过直接单击文本链接来单击链接，而其他浏览器则不是这样（您可以单击任何地方，无论是文本链接还是其他任何地方，只要因为它在链接块中），是否有任何修复（只有CSS，没有javascript）？

请注意，我不想为链接或 div 指定宽度。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2010-04-24T10:40:45.227

我遇到了同样的问题，上面的解决方案都不适合我。我还需要链接的背景是透明的。

一个非常不舒服的解决方案，但完美的解决方案是将背景设置为透明 gif。只需要 1x1 像素，因为它会重复。

```
#links a
{
    display: block;
    background: url(/images/interface/blank/1dot.gif);
} 
```

除了对服务器的一个额外请求之外，这似乎没有任何副作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T20:55:09.040

放置**位置：相对；**在你的 CSS 中**#links a{ }**

[像这样](http://jsbin.com/imoma)

它会修复它:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T08:44:36.053

将链接文本包含在 span 元素中。然后它将在其范围内的任何地方接受点击。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-12T17:52:14.397

我不知道为什么，但给锚定背景颜色似乎为我解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-11T19:42:28.197

在 IE9、Chrome 和 Firefox 中将背景颜色设置为 #FFF 和不透明度为 0 对我有用。不过不知道其他版本。将其设置为透明对我没有帮助。

这具有纯 CSS 和跨浏览器的优势，所以也许它可能是一个更好的选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T09:45:11.307

好的，这个问题的解决方法是给锚点一个除透明之外的背景属性。一些人建议给锚点一个透明的背景图像。我对此有一个补充：图像不必存在。您可以简单地编写任何路径，它会使其工作：

```
a {
  background:url('dummy/doesnotexist.png') no-repeat;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-30T12:21:25.527

将其插入您的`a`-tag 样式中：

```
background:url('images/dot.png') no-repeat; 
```

哪里`dot.png`是 1x1 透明图像。

# jakarta-ee - 如何通知 web 模块有关在 MDB (EJB3.0) 中执行的作业状态？

> ID：881623
> 
> 赞同：0
> 
> 时间：2009-05-19T08:43:08.460
> 
> 标签：jakarta-ee, jboss-mdb

我们正在使用消息驱动 Bean 来生成大型报告和处理持久任务。MDB 如何在没有客户端轮询的情况下通知 web 模块 fe 会话侦听器有关作业状态的信息？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T10:46:39.240

尝试在 EJB 中创建 Web 服务并使用它，但它PERMGENious！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:47:13.620

Yeee，PermGen 是永恒的问题，祝你好运。

# php - 带有条件小节的多页 AJAX 表单

> ID：881626
> 
> 赞同：1
> 
> 时间：2009-05-19T08:43:42.360
> 
> 标签：php, javascript, jquery, zend-framework, forms

我想创建一个多页表单，该表单根据表单前几页上选择的选项进行更改。

我想使用`Zend_Form`，并且我知道 JavaScript 将负责使不同的表单字段出现/消失，但我不知道这两者将如何准确地协同工作。

`Zend_Form`我的问题是如何开始使用JavaScript创建这种表单？我对 jQuery 很熟悉，所以如果有一个 jQuery 插件可以帮助解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T08:57:33.890

我将创建一个经过修饰的多页表单来执行各种巧妙的技巧，我不建议使用 Zend_Form，因为它可能会妨碍您，但这只是我的意见。我使用 Zend 框架，但我从来没有看到需要使用 Zend Form，因为我喜欢编写与自己相关的所有表单。

我会用普通的 HTML 构建表单，您可以使用 jQuery[选项卡](http://docs.jquery.com/UI/Tabs)插件以更流畅的方式将表单分成页面，并使用 jQuery[表单](http://malsup.com/jquery/form/)插件来协助表单的序列化和 ajax 提交。

还有 jQuery[验证](http://docs.jquery.com/Plugins/Validation)插件，但我从未尝试过。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-22T11:11:41.350

如果你想使用 JavaScript，我强烈推荐[jQuery 向导插件](http://home.aland.net/sundman/)。它支持分支和验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-16T01:40:27.667

我同意 jquery 的评论，如果你熟悉它，我很确定 jquery 有一个 zend 连接。

话虽如此，如果您可以避免将表单分解到多个物理上不同的页面上，只需将它们在逻辑上分开，即：重新加载 div 中的数据（或 karim 提到的选项卡）等，这样您就可以维护所有信息在表格中跟踪。如果您必须有物理分离的页面，您可以使用会话来存储持久数据。

这可能会帮助您开始，尽管我不知道您的确切 zend 设置： http: [//framework.zend.com/manual/en/zendx.jquery.form.html](http://framework.zend.com/manual/en/zendx.jquery.form.html)

# c# - 如何实现网站的私人邮件？

> ID：881630
> 
> 赞同：2
> 
> 时间：2009-05-19T08:47:17.670
> 
> 标签：c#, asp.net, email

您将如何实施像 Bebo/Facebook 和其他社交网站这样的私人邮件功能？

您可以选择在成员的个人资料上发布公开评论，但您也可以发送私人邮件。

我正在考虑使用 XML 并将其作为一个字段存储在该特定用户的记录中。这听起来像个坏主意吗？

有人有更好的建议吗？我不确定哪个是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:53:25.117

我可能误解了你想要的，但是创建一个邮件表怎么样，例如

*   发件人
*   接受者
*   学科
*   信息
*   发送
*   读取（布尔）

然后当有人向某人发送私人消息时，只需在该表中添加一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T16:22:39.190

我强烈建议不要将消息存储在用户表的字段中。随着应用程序的增长，这很可能会导致性能问题。正如另一个答案所建议的那样，我会添加一个专门用于存储消息数据的表。下面是您的表格可能看起来的伪代码示例。

```
UserTable
{
    ID INT, -- a unique system generated ID
    USER_ID CHAR(20), -- also unique, this is a user provided ID
    FIRST_NAME CHAR(40),
    LAST_NAME CHAR(40),
    BIRTH_DATE DATE 
}

UserEmailTable
{
    ID INT, -- a unique system generated ID
    USER_ID CHAR(20), -- this ties the entry to the record on UserTable
    EMAIL_ADDR CHAR(128), -- user provided email
    PRIORITY INT, -- Specifies the users 0..N-th address
}

MailTable
{
    ID INT, -- a unique system generated ID
    SENDER_ID INT, -- this ties the entry to the record on UserTable
    RECIPIENT_ID INT, -- this ties the entry to the record on UserTable
    CREATE_DATE DATE,  -- record when the message was created by sender
    READ_DATE DATE,  -- record when the message was read by recipient
    PRIVATE BOOL, -- indicates if this is a private message
    MESSAGE BLOB -- the message body
} 
```

请记住，这只是一个示例，它可能无法解决您的应用程序的具体问题。

最后一个想法：您实际上是打算将 XML 直接存储在字段中，还是使用某种 XML<-->SQL 映射工具？如果您直接存储 XML，您可能无法利用数据库的功能。您对性能的担忧是有道理的，但是设计良好且经过优化的数据库应该能够轻松地在单个表中处理数百万条记录。

希望有帮助。

# sql-server - 在 SQL Server 2008 上安装 Dynamics AX 4.0 SP2

> ID：881631
> 
> 赞同：0
> 
> 时间：2009-05-19T08:47:34.753
> 
> 标签：sql-server, axapta

是否可以在 SQL Server 2008 和 Windows Server 2008 上安装 AX 4.0 SP2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:07:38.527

Dynamics AX 4.0 正式支持此功能

[http://www.microsoft.com/dynamics/ax/using/40systemrequirements.mspx#EUEAC](http://www.microsoft.com/dynamics/ax/using/40systemrequirements.mspx#EUEAC)

这是修补程序 (KB944115) 的链接，它为 AX 4.0 SP1 和 SP2 启用 SQL Server 2008

[合作伙伴来源] [https://mbs.microsoft.com/knowledgebase/KBDisplay.aspx?scid=kb;en-us;893082](https://mbs.microsoft.com/knowledgebase/KBDisplay.aspx?scid=kb;en-us;893082)

# windows-mobile - Windows CE 和 Windows Mobile 有什么区别？

> ID：881637
> 
> 赞同：4
> 
> 时间：2009-05-19T08:49:56.653
> 
> 标签：windows-mobile, windows-ce

我刚开始 Windows OEM 开发，遇到了**Windows CE**和**Windows Mobile**这两个术语。两者有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T09:02:25.113

[Windows CE 与 Windows Mobile、Pocket PC 和 SmartPhone 的关系](http://en.wikipedia.org/wiki/Windows_CE#Relationship_to_Windows_Mobile.2C_Pocket_PC.2C_and_SmartPhone "Windows CE 与 Windows Mobile、Pocket PC 和 SmartPhone 的关系")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T08:59:58.537

Windows CE 是基本操作系统。它可以配置并与程序捆绑，以支持不同的应用领域。Windows Mobile 是一种支持智能手机和其他移动设备的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T09:05:09.350

Windows CE 更像是一个操作系统构建工具包，而不是一个特定的操作系统。

该领域的一个重要主题是所谓的“信息亭模式”。例如，您正在为移动设备编写仓库库存系统，并且您不希望用户能够浏览网页、播放 mp3 等，只做他们的工作。如果供应商已经完成了他的工作，基于 WindowsCE 的设备可以很容易地被锁定以禁止此类活动；而基于 WindowsMo​​bile 的设备实际上很难锁定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T14:27:28.763

另请参阅：[对于 .net 开发人员，进入移动开发的学习曲线是什么？](https://stackoverflow.com/questions/378663/for-a-net-developer-whats-the-learning-curve-to-get-into-mobile-development)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T08:59:44.073

请允许我在这里引用维基百科：

> 最好将 Windows Mobile 描述为基于 Windows CE 基础的平台子集。目前，Pocket PC（现在称为 Windows Mobile Classic）、SmartPhone（Windows Mobile Standard）和 PocketPC Phone Edition（Windows Mobile Professional）是 Windows Mobile 旗下的三个主要平台。每个平台都使用 Windows CE 的不同组件，以及适合其各自设备的补充功能和应用程序。

所以据我了解，Windows CE 更像是用于移动设备的“真正的”Windows，而 Windows Mobile 在某种程度上被精简并针对那些 CPU 功率和内存较少的用户。我已经有一段时间没有真正遇到过任何 Win CE 设备了，可能是因为微软正在尝试建立 Windows XP 和 Vista，但在这方面并没有太成功。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T12:47:41.887

[http://blogs.msdn.com/b/fzandona/archive/2006/05/16/599485.aspx](http://blogs.msdn.com/b/fzandona/archive/2006/05/16/599485.aspx)解释得很好。

Windows CE 就像一堆乐高积木，允许您选择构建操作系统所需的乐高积木。（你自己建造）

Windows Mobile 建立在这些乐高积木的选择之上。（它作为预构建的操作系统提供）。

# ruby-on-rails - 如何从命名范围扩展访问 named_scope 参数？

> ID：881638
> 
> 赞同：2
> 
> 时间：2009-05-19T08:50:01.473
> 
> 标签：ruby-on-rails

以下示例：

```
named_scope :search, lambda {|my_args| {...}} do
  def access_my_args
    p "#{my_args}"
  end
end

# Call:
Model.search(args).access_my_args 
```

如您所见，我想从 named_scope 扩展中的 lambda 访问参数。有没有办法做到这一点？

一个更具体的例子：

```
class User < ActiveRecord::Base
  named_scope :by_name, lambda {|name_from_scope| {:conditions => {:name => name_from_scope}}} do
    def change_name
     each { |i| i.update_attribute(:name, "#{name_from_scope}xyz") }
    end
  end
end 
```

（我知道有一个 find_by_name 范围等等......）。我想使用 name_from_scope 参数，它在作用域扩展的作用域中传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T21:53:45.860

```
named_scope :test_scope, lambda {|id| {:conditions => {:id => id}} } do
    def test_scope_method
      each {|i| puts @proxy_options.to_yaml}
    end
  end 
```

我不相信您可以在不扩展 activerecord 的情况下直接获得论点。

@proxy_options 将为您提供块中的已编译选项。因此，在您的示例中，您将无法访问 name_from_scope，但您将可以访问 @proxy_options[:conditions][:name]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T11:31:23.427

这是你想要做的吗？

```
named_scope :search, lambda {|*my_args|
    OtherClass.announce_search_for_model(my_args, self.class)
    { :conditions => ['created_at < ?', my_args[:created_at]], :limit => my_args[:limit] }
}

args = {:created_at > 'NOW()', :limit => 5}
Model.search(args) 
```

如果您想观察传递给 named_scope 的内容，那么我会在 lambda 中执行此操作。

Named_scope 结果将始终是您使用 Model.find 的结果。这是 rails 的一项功能，因此如果您想要不同的东西，您需要使用 Module 覆盖 rails 功能。我不建议这样做，因为 named_scope 扩展是为了简化查找​​器，而不是观察参数。

# python - Python 导入：导入没有 .py 扩展名的模块？

> ID：881639
> 
> 赞同：4
> 
> 时间：2009-05-19T08:50:15.387
> 
> 标签：python, debian

在我开发的 Python 系统中，我们通常有这种模块结构。

```
mymodule/
mymodule/mymodule/feature.py
mymodule/test/feature.py 
```

这允许我们的小测试框架轻松导入 test/feature.py 并运行单元测试。但是，我们现在需要一些 shell 脚本（用 Python 编写）：

```
mymodule/
mymodule/scripts/yetanotherfeature.py
mymodule/test/yetanotherfeature.py 
```

Yetanotherfeature.py 由模块 Debian 软件包安装到 /usr/bin 中。但我们显然不想要 .py 扩展名。所以，为了让测试框架仍然能够导入模块，我必须做这个符号链接：

```
mymodule/
mymodule/scripts/yetanotherfeature
mymodule/scripts/yetanotherfeature.py @ -> mymodule/scripts/yetanotherfeature
mymodule/test/yetanotherfeature.py 
```

是否可以在 Python 中按文件名导入模块，或者您能想到一个更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T08:55:32.477

[imp 模块](http://docs.python.org/library/imp.html)用于此：

```
daniel@purplehaze:/tmp/test$ cat mymodule
print "woho!"
daniel@purplehaze:/tmp/test$ cat test.py 
import imp
imp.load_source("apanapansson", "mymodule")
daniel@purplehaze:/tmp/test$ python test.py
woho!
daniel@purplehaze:/tmp/test$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T08:59:37.427

您很可能通过使用 import [hooks](http://www.python.org/dev/peps/pep-0302/)来使用一些技巧，但我不推荐它。另一方面，我也可能会反过来做，把你的 .py 脚本放在某个地方，并制作指向 .py 文件的 '.py'less 符号链接。因此，您的库可以在任何地方，您可以通过正常导入它从内部运行测试（因为它具有 py 扩展名），然后 /usr/bin/yetanotherfeature 指向它，因此您可以在没有 py.

编辑：没关系（至少是钩子部分），导入 imp 解决方案对我来说非常好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T08:53:46.003

查看 imp 模块：

[http://docs.python.org/library/imp.html](http://docs.python.org/library/imp.html)

这将允许您按文件名加载模块。但我认为您的符号链接是一个更优雅的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T05:30:10.940

另一种选择是使用 setuptools：

> “...在 Windows 和 POSIX 平台上，让脚本的文件名匹配本地约定并不容易。另一方面，当您的实际“主”是一个在某个模块中的某个地方运行... setuptools 通过自动为您生成具有正确扩展名的脚本来解决所有这些问题，并且在 Windows 上它甚至会创建一个 .exe 文件..."

[https://pythonhosted.org/setuptools/setuptools.html#automatic-script-creation](https://pythonhosted.org/setuptools/setuptools.html#automatic-script-creation)

# .htaccess - 如果第一个域有文件夹路径，我如何 301 将一个域重定向到另一个域

> ID：881640
> 
> 赞同：2
> 
> 时间：2009-05-19T08:50:49.957
> 
> 标签：.htaccess, mod-rewrite, http-status-code-301, dns

我想从 www.olddomain.com 301 重定向到 newdomain.com 的根目录，但无论旧域上的文件夹路径是什么，我都希望它能够工作。例如：以下内容应全部重定向到 newdomain.com 的根目录

```
www.olddomain.com
olddomain.com
www.olddomain.com/folder/file.php
olddomain.com/folder/file.php 
```

如何使用 .htaccess 文件中的 Mod Rewrite 来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T08:55:27.063

试试这个规则：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} (^|\.)old\.example\.com$
RewriteRule ^ http://new.example.com/ [L,R=301] 
```

`old.example.com`旧主机名和新主机名在哪里`new.example.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-05T03:04:53.833

```
<?php
header("HTTP/1.1 301 Moved Permanently");
header("Location: http://www.newdomain.com/page.html");
exit();
?> 
```

这也应该对你有用。

# .net - 记录集和sqlreader的区别

> ID：881648
> 
> 赞同：0
> 
> 时间：2009-05-19T08:53:55.210
> 
> 标签：.net, ado.net

asp中的recordset和asp.net中的datareader的异同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T09:05:31.253

如果您将 ADO 记录集与 ADO.NET DataReader 进行比较，那么 Dino Esposito[在 MSDN 上有一篇非常古老的文章比较](http://msdn.microsoft.com/en-us/library/ms810288.aspx)了一些差异——它也涵盖了数据集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T09:32:59.967

A`DbDataReader`类似于只读 forward-only `RecordSet`。

A`DataTable`类似于断开连接`RecordSet`。

# ms-access - 规范化数据 - 使用循环批量插入

> ID：881651
> 
> 赞同：0
> 
> 时间：2009-05-19T08:54:27.347
> 
> 标签：ms-access, vba, bulkinsert

有没有人有任何提示可以帮助加快分解表并将大量记录插入新表的过程。

我目前正在使用 Access 和 VBA 将包含具有大字符串（700 + 个字符）的记录的表转换为一个新表，其中每个字符都有自己的记录（行）。我通过一次循环遍历字符串 1 个字符并使用 VBA 中的简单 DAO 插入新表来做到这一点。

目前我正在处理一小部分数据——300 条记录，每条记录有 700 个字符串。此过程大约需要 3 小时才能运行，因此不会扩展到包含 50,000 条记录的完整数据集！

表 1 结构

id - 字符串 001 - abcdefg

变成

表2结构

id - 字符串 001 - a 001 - b 001 - c 。. . . . .

我愿意接受任何可以改善事情的建议。

干杯

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T10:40:41.250

考虑这个使用 Northwind 的示例。使用 (Access = Long Integer)创建一个名为 Sequence 的表，`INTEGER`并使用 1 到 20 的值填充它（即 20 行表）。然后使用这个 ACE/Jet 语法 SQL 代码来解析员工姓氏的每个字母：

```
SELECT E1.EmployeeID, E1.LastName, S1.seq, MID(E1.LastName, S1.Seq, 1)
  FROM Employees AS E1, Sequence AS S1
 WHERE S1.seq BETWEEN 1 AND LEN(E1.LastName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T10:50:23.727

在进行批量插入时，通常可以通过删除表的索引、进行批量插入然后恢复索引来显着提高性能。在一种情况下，当向 MySQL 表中插入几百万条记录时，我看到这将运行时间从 17 小时缩短到大约 20 分钟。

我不能就 Access 提供具体建议（自 Access 2、15 年前左右我就没有使用过它），但一般技术几乎适用于任何数据库引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T17:36:27.313

我们有一个转置数据的例程。不确定代码是否经过优化，但文件压缩后运行速度明显加快。

大量删除和重建表会使 .mdb 文件显着膨胀。

# eclipse - 导入/导出项目首选项

> ID：881655
> 
> 赞同：26
> 
> 时间：2009-05-19T08:55:19.807
> 
> 标签：eclipse

有点问题，

由于我们使用的源代码控制设置，每个错误/增强功能都在一个新分支中进行。这很好，但是在 Eclipse 中，我们需要为每个分支设置一个新项目。

有什么方法可以轻松地为项目设置默认首选项，或者在 Eclipse 中导入/导出项目首选项？

谢谢，

斯图尔特

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-19T09:11:02.350

一种可能的解决方案是将这些常用首选项存储在 Eclipse 的**工作区**级别（请参阅[管理您的 Eclipse 环境](http://www.ibm.com/developerworks/library/os-ecl-manage/)一文）

> 拥有多个工作空间的缺点是需要在它们之间共享开发偏好。
> **由于首选项在 Eclipse 中以工作空间为基础保持不变，因此您必须导出工作空间首选项并将它们导入所需的工作空间**( `File > Export > Preferences`)。

即使您留在同一个工作区（有多个项目），您也可以通过导出这些*工作区*首选项与其他开发人员共享通用设置。

![设置](https://i.stack.imgur.com/Sw82v.png)

正如[Fabian 所提到的](https://stackoverflow.com/questions/881655/importing-exporting-project-preferences/881996#881996)，项目特定设置在`.classpath`and中`.project`，但他省略了**`.settings`**：

`.settings`用于特定于 IDE 项目的设置，例如编译器警告等。
如果您想共享项目特定的 IDE 相关设置，只需将 .settings 目录从项目目录复制到项目目录即可。

**提示**：将您的项目启动器（默认在 中创建`<workspace>\.metadata\.plugins\org.eclipse.debug.core\.launches`）复制到您的`.settings`目录中：这样，您还将共享您的自定义项目启动器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T17:07:24.093

上述方法可能在某些设置中有效，但不能解决从工作区导出单个项目（包括其属性以供其他人使用）的问题。

一种方法是如上所述将项目文件夹导出为 zip 存档，但还要从工作区保存以下文件：.metadata/.plugins/org.eclipse.core.resources/.projects/MYPROJECT/.indexes/ properties.index，其中 MYPROJECT 是您的项目名称。

如果您随后将该项目作为新项目导入到不同的工作区中，您可以随后将此文件复制到新的工作区元数据中，您将拥有原始项目属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:35:50.277

特定于*项目的*设置（与[已经提到](https://stackoverflow.com/questions/881655/importing-exporting-project-preferences/881720#881720) *的特定于工作区的*设置相反）存储在项目中的两个隐藏文件中：`.classpath`和`.project`，您可以重用它们来设置您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T11:39:55.743

看看[工作区机械师](https://code.google.com/a/eclipselabs.org/p/workspacemechanic/wiki/GettingStarted)

# jquery - jQuery 和 Web 服务

> ID：881656
> 
> 赞同：2
> 
> 时间：2009-05-19T08:55:25.657
> 
> 标签：jquery

我想称这个 WS [http://www.webservicex.net/country.asmx?op=GetCountries](http://www.webservicex.net/country.asmx?op=GetCountries)

使用 jQuery 的最佳方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T09:01:00.467

如果您想使用 jQuery 进行跨域调用，您可以在自己的服务器上设置一个“代理”文件，该文件获取远程内容并将它们发送到本地 jQuery，或者您需要 Web 服务来支持[JSONP](http://en.wikipedia.org/wiki/JSON#JSONP)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T09:03:37.793

您可以使用 ajax 方法（POST 或 GET）来执行此操作。在这里，我使用 GET，因为所有远程（不在同一个域上）请求都应指定为 GET。我还提供了一个回调方法来将结果显示为警报。

```
$.ajax({
   type: "GET",
   url: "http://www.webservicex.net/country.asmx",
   data: "op=GetCountries",
   success: function(msg){
     alert( "Result: " + msg );
   }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T09:01:00.250

也许这会有所帮助：

*   [http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/)

# java - 使用 keytool 生成 128 位密钥

> ID：881661
> 
> 赞同：7
> 
> 时间：2009-05-19T08:56:01.727
> 
> 标签：java, security, cryptography, bouncycastle, keytool

有没有办法使用 Sun 的 keytool 程序生成适合加密的 128 位密钥对？似乎[http://java.sun.com/javase/6/docs/technotes/guides/security/StandardNames.html#KeyPairGenerator](http://java.sun.com/javase/6/docs/technotes/guides/security/StandardNames.html#KeyPairGenerator)中提供的算法要么不受支持，要么不允许短于 512 位的密钥。

密钥对将与 ff 一起使用。代码片段：

```
Security.addProvider(new BouncyCastleProvider());

KeyStore keyStore = KeyStore.getInstance("PKCS12");

FileInputStream keyStoreSource = new FileInputStream("keystore");

try {
    keyStore.load(keyStoreSource, "password".toCharArray());
} finally {
    keyStoreSource.close();
}

String alias = (String) keyStore.aliases().nextElement();
PrivateKey privateKey = (PrivateKey) keyStore.getKey(alias, "password".toCharArray());
X509Certificate certificate = (X509Certificate) keyStore.getCertificate(alias);

CMSEnvelopedDataStreamGenerator generator = new CMSEnvelopedDataStreamGenerator();

generator.addKeyTransRecipient(certificate);

OutputStream output2 = generator.open(output, CMSEnvelopedDataGenerator.AES128_CBC, BouncyCastleProvider.PROVIDER_NAME);

try {
    IOUtils.copy(input, output2);
} finally {
    output2.close();
    output.close();
} 
```

其中输出是一些将保存加密数据的 OutputStream，输入是一些将读取明文数据的 InputStream。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T15:29:34.397

您只需要指定不同的 storetype

`keytool -genseckey -alias check2 -keyalg AES -keysize 128 -storepass changeit -storetype JCEKS -keystore ks.jck`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T18:17:45.880

证书用于公钥加密，不包含对称分组密码 AES-128 的加密密钥。相反，公钥加密仅用于加密或协商 128 位 AES 密钥，其余对话使用 AES。

128 位 AES 密钥不是证书，它只是来自加密强随机数生成器的 128 位，或者使用散列算法（如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2) ）从密码短语派生而来。如何获得这些位将取决于您的应用程序。SSL/TLS 必须协商一个随机密钥，但硬盘加密程序会从密码中派生密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:17:24.693

不能生成短于 512 位的密钥对是有道理的。公钥加密需要比对称密钥加密更长的密钥来维持相同级别的安全性。不建议将 128 位密钥对用于公钥加密。

# smalltalk - 吱吱声中的新行

> ID：881666
> 
> 赞同：6
> 
> 时间：2009-05-19T08:58:25.903
> 
> 标签：smalltalk, squeak

我想做这样的事情：成绩单显示：'\ n'。如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T09:05:49.537

使用以下内容：

```
Transcript cr 
```

您可以通过级联在值之后使用它：

```
Transcript show: 123; cr 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T12:03:48.620

字符本身可以通过`Character cr`. 所以，你也可以这样做：

```
Transcript show: 'Bla! , Character cr asString. 
```

但是当然，

```
Transcript show: 'Bla!' ; cr. 
```

更优雅。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-05-11T07:38:25.680

根据我的（长期）经验，缺少字符转义是 Smalltalk 中缺少的少数内容之一。对于流媒体，使用 cr、tab 等的解决方案是可以的。

但是，如果您需要字符串中的特定控制字符，这可能很难看且难以阅读（使用“streamContents:”或“withCRs”添加新行）。或者，您可能希望使用一种（非标准）字符串扩展机制。例如，在 VisualWorks 或 Smalltalk/X 中，你可以这样写（如果我没记错的话）：

```
'someString with newline<n>and<t>tabs' expandMacros 
```

甚至对其他对象的 printStrings 进行类似 printf 的切片：

```
'anotherString<n><t>with newlines<n>and<t>tabs and<p>' expandMacrosWith:(Float pi) 
```

我想，在 Squeak 和 V'Age 中也有类似的东西。

但是，请注意：这些扩展是在执行时完成的。因此，在许多字符串上大量使用它们时，您可能会遇到惩罚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-17T01:49:26.693

为了方便起见，我在 String 类中添加了一个方法“line”：

```
line
    ^self, String lf 
```

然后你可以说`obj showSomething: 'Hello world!' line.`

或者称它为换行符、endl、lf 等...

# c++ - 托管 C++ 中托管对象的分配

> ID：881667
> 
> 赞同：1
> 
> 时间：2009-05-19T08:58:46.773
> 
> 标签：c++, managed, allocation

使用 gcnew 分配对象后是否需要检查 nullptr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T09:09:54.740

不，您将在 GC 无法分配对象中获得[OutOfMemoryException 。](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx)

# web-services - Web 服务返回带有可选部分的复杂对象

> ID：881674
> 
> 赞同：2
> 
> 时间：2009-05-19T09:00:03.900
> 
> 标签：web-services

我正在尝试为 Web 服务考虑正确的设计。本质上，该服务将在许多不同的系统中执行客户端搜索，并返回结果。

现在，客户可以附加各种信息——例如各种联系信息、他们的地址、个人信息。从某些系统中检索这些信息中的某些信息可能很复杂，因此如果消费者不打算使用它，我希望他们能够通过某种方式向 Web 服务表明这一点。

一种明显的方法是对所需细节的不同组合使用不同的方法——但随着组合的增加，方法的数量也会增加。我看过的另一种方法是在方法调用中添加两个字符串数组参数，其中一个数组是必需项的列表（例如，我需要联系信息），另一个是可选项（例如，如果您要无论如何拉他们的名字，你还不如把它还给我）。

第三种方法是添加额外的方法来检索细节。但是，如果我需要为可能构成结果的数百个客户提供所有详细信息，这将导致往返次数激增。

老实说，我不确定我是否喜欢上述任何一种方法。那么您将如何设计这样一个通用的客户端搜索服务呢？

（考虑 CW，因为可能没有一个“正确”的答案，但我会等着看什么样的答案会到来）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T09:09:27.377

创建一个“ `criteria`”对象并将其用作参数。这样的对象应该有一堆属性来指示你想要的信息。例如“ `IncludeAddresses`”或“ `IncludeFullContactInformation`”。

然后，消费者负责将正确的属性设置为`true`，并且所有组合都是可能的。这也将使服务中的代码更容易执行。你可以简单地写`if(criteria.IncludeAddresses){response.Addresses = GetAddresses;}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T09:20:32.473

任何非结构化或半结构化数据最好由 XML 处理。您可以通过字符串传递 XML 数据或将其包装在一个类中，为其添加一些功能。使用 XPathNavigator 浏览 XML。您也可以使用 XMLDocument 类，尽管它使用起来不太友好。无论如何，您当然需要某种类来处理 XML 内容。

这就是发明 XML 的原因——用于处理结构没有明确定义的数据。

问候， Maciej

# python - 如何判断一个类是否来自另一个类

> ID：881676
> 
> 赞同：15
> 
> 时间：2009-05-19T09:00:23.823
> 
> 标签：python

我有一个接受类（不是实例）的函数，并且根据它是特定类*还是该类的子类*，我需要将其传递给其他两个（第三方）工厂函数之一。

（为了防止任何反对意见，我知道这不是很 Pythonic，但我依赖于第三方库接受的内容。）

`issubclass`仅适用于实例，不适用于类对象本身。我想我可以实例化类，做`issubclass`并丢弃实例，但这似乎有点浪费。

这就是我目前正在做的事情，依靠内置的**mro**属性来判断某个类是否在我的类的祖先列表中。这安全吗，有没有更好的方法呢？

```
if GenericClass in myclass.__mro__:
    result = generic_factory(myclass)
else:
    result = other_factory(myclass) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-19T09:03:33.363

> issubclass 仅适用于实例，而不适用于类对象本身。

这对我来说可以：

```
>>> class test(object):pass
...
>>> issubclass(test,object)
True 
```

# curl - php脚本因为curl挂掉了

> ID：881678
> 
> 赞同：1
> 
> 时间：2009-05-19T09:00:53.027
> 
> 标签：curl

此脚本导致我的 php 文件挂起：

```
$handle   = curl_init($pictureimg); 
    $connectable = curl_exec($handle);
    curl_close($handle); 
```

知道为什么吗？几天前它还在工作。然后我想我不小心改变了某个地方的设置，我所有的卷发都停止了工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-11T19:26:17.590

php 在执行 CURL 请求时是否等待？也许另一台服务器的资源越来越少。

# c# - 使用带有非捕获组的正则表达式解析数字

> ID：881679
> 
> 赞同：0
> 
> 时间：2009-05-19T09:00:59.080
> 
> 标签：c#, regex

我正在尝试使用正则表达式解析电话号码。正是我想使用这样的函数获取一个带有电话号码的字符串：

```
string phoneRegex = @"^([+]|00)(\d{2,12}(?:\s*-*)){1,5}$";
string formated = Regex.Match(e.Value.ToString(), phoneRegex).Value; 
```

如您所见，我正在尝试使用非捕获组 (?:\s*-*) 但我做错了。

预期的结果应该是：

输入（e.Value）：+48 123 234 344 或 +48 123234344 或 +48 123-234-345

输出：+48123234344

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:15:21.157

Regex.Match 不会为您更改字符串；它只会匹配它。如果您有一个电话号码字符串并想通过删除不需要的字符来格式化它，您将需要使用 Regex.Replace 方法：

```
// pattern for matching anything that is not '+' or a decimal digit
string replaceRegex = @"[^+\d]";
string formated = Regex.Replace("+48 123 234 344", replaceRegex, string.Empty); 
```

在我的示例中，电话号码是硬编码的，但仅用于演示目的。

作为旁注；您在上面的代码示例中的正则表达式假定国家代码是 2 位数字；情况可能并非如此。美国有一个数字代码 (1)，许多国家有 3 位代码（也许还有一些国家的数字比这更多？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:17:43.507

这应该有效：

```
Match m = Regex.Match(s, @"^([+]|00)\(?(\d{3})\)?[\s\-]?(\d{3})\-?(\d{4})$");
return String.Format("{0}{1}{2}{4}", m.Groups[1], m.Groups[2], m.Groups[3], m.Groups[3]); 
```

# data-structures - 堆栈与否？

> ID：881685
> 
> 赞同：2
> 
> 时间：2009-05-19T09:02:04.023
> 
> 标签：data-structures

假设我有一个类似于 Stack 的数据结构，但除了通常的 Push/Pop 之外，它还具有诸如 PushAt/PopAt 之类的函数，它们都将整数作为输入并在数据结构中的特定位置添加/返回项目。

现在 Stack 应该是 LIFO。此数据结构是否符合“堆栈”的条件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T09:12:39.960

在 HP RPN 计算器和 Postscript/PDF 中，存在 和 以外的其他运算`push`符`pop`：

*   `swap`或`exch`用于置换堆栈顶部和下一个元素，
*   `roll`作为的延伸`swap`

它们的主要数据结构仍然被认为是堆栈。

`pushAt`并且`popAt`只能用`pop`/`push`和编写`roll`。所以你的数据结构仍然可以命名为stack。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T09:08:26.507

技术上不是。LIFO 意味着（如您所知）后进*先出*。如果最后一个进入的元素不是第一个出来的，它就不能满足堆栈的“语义接口”（或契约）。

但是，由于您似乎只是添加其他方法而不修改现有方法，因此您的数据结构可以与堆栈互换使用，如果它像一个堆栈一样使用，即永远不会调用 pushAt() 和 popAt()（例如因为它们通过将其作为 a 传递`Stack`给函数而被“隐藏”）。

因此，从这个意义上说，您的版本是一个堆栈，就像列表在 Java 中是一个堆栈一样，例如。它可以作为一个，但它也可以做其他事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:19:09.270

如果要使用链表，因为可以重新分配指针，那么实现这一点会很容易，尽管如果您要使用数组，则很难在中间弹出一个实体，然后调整结构的大小以填充低于 O(n^2) 复杂度的差距。这种复杂性对于链表来说效率非常低，复杂性仅为 O(n)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T09:04:18.107

它不是堆栈，因为它不是 LIFO，您可以完全控制项目的获取/设置位置，这只是一个普通的列表恕我直言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T09:25:03.603

实际上，如果您只能 Pop 和 Push 元素，您仍然可以将其视为 Stack。*更灵活的堆栈*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T09:06:33.093

它可能看起来像一个 ADT，但听起来就像一个数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T09:07:20.220

IMO 只要它支持推送和弹出，它就是一个堆栈。它是否还支持其他操作并不重要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T09:11:59.353

如果它不是 LIFO 对象，则不能将其限定为堆栈。我会说它只是一个具有 Push Pop 功能的列表，它也不过是 AddAtEnd() 和 RemoveFromEnd()

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T09:17:57.220

您的数据结构可以用作堆栈..或数组/列表..
堆栈只是列表的一种特殊形式..您的实现似乎否定了这种特殊性..所以我倾向于将其称为列表的堆栈。

# java - Swing：向组件及其所有装饰添加侦听器？

> ID：881688
> 
> 赞同：2
> 
> 时间：2009-05-19T09:02:31.743
> 
> 标签：java, user-interface, swing, events

我可以向 Swing 组件及其所有**内部装饰组件添加一个侦听器（比如说****MouseAdapter** ）吗？

 **因此，当鼠标移动 JInternalFrame *（通过拖动其窗口标题栏）*时，它会给我以下事件：

*   **mousePressed**事件，
*   **鼠标拖动**事件，
*   **鼠标释放**事件。

**目前，我在拖动 JInternalFrame 时没有**收到上述任何事件。

*我希望有一些标准化的解决方案，但我找不到任何解决方案。*

**编辑：**
有些人建议使用**ComponentListener**，但这对我不起作用。我需要知道，**当**用户**停止拖动**时（mouseReleasedEvent）， **而不是**当组件移动时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:31:23.137

是的，您可以为容器的所有组件添加侦听器。`getComponents`并添加监听器。您应该能够设法以递归方式执行此操作。您还可以使用`ContainerListener`来检查添加和删除组件。

然而，`MouseListener`奇怪`MouseMotionListener`的是，事件通常会冒泡到父级，但如果侦听器在场，则不会这样做（这对于无望的设计来说是怎样的？）。

您的选择是：

*   递归添加侦听器（不好，见上文）
*   向特定组件添加侦听器（脆弱）
*   添加一个“玻璃窗格”（一个凌乱的黑客）
*   添加`AWTEventListener`到`Toolkit`（需要权限）
*   推送`EventQueue`并检查事件（Opera 和 Safari 显然不起作用；阻止系统复制和粘贴以及从工作中拖出的小程序）
*   使用`ComponentListener`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T09:56:38.997

我发现了它是如何**做到**的，但有件事告诉我，这是一个**肮脏的黑客**;）

**好吧，它有效，但谁能给我保证它在任何地方都有效？**

```
// ctor goes here {

InternalFrameUI thisUI = getUI();
((BasicInternalFrameUI) thisUI).getNorthPane()
    .addMouseMotionListener(new MyMouseListener());

// } 
```

**NorthPane**原来是窗口标题栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:24:11.887

拖动 JInternalFrame 时，MouseListener/MouseMotionListener 不会检测到。在这里检测运动的最佳选择是在 JInternalFrame 本身上使用 ComponentListener。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T09:14:53.433

您可能应该使用[MouseMotionListener](http://java.sun.com/j2se/1.5.0/docs/api/java/awt/event/MouseMotionListener.html)而不是[MouseListener](http://java.sun.com/j2se/1.5.0/docs/api/java/awt/event/MouseListener.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T09:17:32.977

在[JInternalFrame API 文档](http://java.sun.com/javase/6/docs/api/index.html?javax/swing/JInternalFrame.html)中，它说：

> 通常，您将 JInternalFrames 添加到 JDesktopPane。UI 将特定于外观的操作委托给由 JDesktopPane 维护的 DesktopManager 对象。

也许您应该将侦听器添加到 JDesktopPane。

# python - 来自程序内部的 python 中的无缓冲标准输出（如在 python -u 中）

> ID：881696
> 
> 赞同：70
> 
> 时间：2009-05-19T09:05:18.353
> 
> 标签：python

> **可能重复：**
> [禁用输出缓冲](https://stackoverflow.com/questions/107705/disable-output-buffering)

有没有办法`python -u`从我的代码中获得运行效果？如果做不到这一点，我的程序是否可以检查它是否在`-u`模式下运行，如果不是，则退出并显示错误消息？这是在 Linux（Ubuntu 8.10 服务器）上。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-05-19T10:51:10.557

我能想到的最好的：

```
>>> import os
>>> import sys
>>> unbuffered = os.fdopen(sys.stdout.fileno(), 'w', 0)
>>> unbuffered.write('test')
test>>> 
>>> sys.stdout = unbuffered
>>> print 'test'
test 
```

在 GNU/Linux 上测试。似乎它也应该在 Windows 上运行。如果我知道如何重新打开 sys.stdout，那就容易多了：

```
sys.stdout = open('???', 'w', 0) 
```

参考资料： http:
[//docs.python.org/library/stdtypes.html#file-objects](http://docs.python.org/library/stdtypes.html#file-objects)
[http://docs.python.org/library/functions.html#open](http://docs.python.org/library/functions.html#open)
[http://docs.python.org/library/ os.html#file-object-creation](http://docs.python.org/library/os.html#file-object-creation)

[编辑]

请注意，在覆盖之前关闭 sys.stdout 可能会更好。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2010-07-29T20:29:04.323

您始终可以在 shebang 行中传递 -u 参数：

```
#!/usr/bin/python -u 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-19T09:18:25.517

假设您在 Windows 上：

```
msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY) 
```

...在 Unix 上：

```
fl = fcntl.fcntl(sys.stdout.fileno(), fcntl.F_GETFL)
fl |= os.O_SYNC
fcntl.fcntl(sys.stdout.fileno(), fcntl.F_SETFL, fl) 
```

（Unix从注释的解决方案中复制，而不是链接。）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-19T10:51:03.770

**编辑**（2020 年 10 月）。[正如对此答案的注释中](https://stackoverflow.com/questions/881696/unbuffered-stdout-in-python-as-in-python-u-from-within-the-program/882057?noredirect=1#comment113509859_882057)所指出的，在 Python3 中，stderr*也被*缓冲了。

您可能会使用 stderr 从不缓冲的事实并尝试将 stdout 重定向到 stderr：

```
import sys
#buffered output is here
doStuff()

oldStdout = sys.stdout
sys.stdout = sys.stderr
#unbuffered output from here on

doMoreStuff()
sys.stdout = oldStdout

#the output is buffered again
doEvenMoreStuff() 
```

# c# - 如何将对象注入 WCF 服务

> ID：881705
> 
> 赞同：2
> 
> 时间：2009-05-19T09:07:23.950
> 
> 标签：c#, wcf, dependency-injection

如果我有这样的服务定义/实现：

```
using System;
using System.ServiceModel;

namespace aspace.service
{
  [ServiceContract(Namespace = "http://aspace.service")]
  public interface IUpdate
  {
    [OperationContract]
    ConfirmationMessage UpdatePerson(string PersonIdentifier);
  }
}

public class UpdateService : IUpdate
{
    public ConfirmationMessage UpdatePerson(string PersonIdentifier)
    {
        // some implementation here
    }
} 
```

我可以像这样创建一个服务主机：

```
ServiceHost host = new ServiceHost(typeof(UpdateService), someEndpointAddress); 
```

然后，在创建绑定并添加元数据行为之后，我可以打开主机。它将根据客户端的请求调用 UpdatePerson(aPersonIdentifier)。

我想与 UpdatePerson 的数据库交谈。[我的上一个问题的](https://stackoverflow.com/questions/878047/database-access-from-everywhere-in-application)答案建议我应该对这类事情使用依赖注入。

问题是我从未创建类 UpdateService 的实例。那么如何注入依赖项呢？你会如何解决这个问题？

谢谢，问候，米尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:11:59.713

看一下[IInstanceProvider](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iinstanceprovider.aspx)接口。基本上，您需要实现此接口，并在[GetInstance](http://msdn.microsoft.com/en-us/library/ms587089.aspx)方法中自己实例化 WCF 类，提供任何依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T09:14:22.733

基本上，您需要基于您的 IOC 容器和使用您编写的实例提供程序的 IServiceBehaviour 实现一个 IInstanceProvider。这将使 IOC 容器能够为您构建对象层次结构。

这里有一个[示例实现](http://orand.blogspot.com/2006/10/wcf-service-dependency-injection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:13:17.760

如果您打算注入依赖项，则绝对应该考虑使用 IoC 容器。例如温莎。

如果您使用 Windsor，则有一个 WCF 集成工具，它会自动将所有依赖项注入您的服务。[在这里](http://www.castleproject.org/container/facilities/trunk/wcf/index.html)查看。

# compiler-construction - 字节码解析指令和机器语言之间的区别？

> ID：881709
> 
> 赞同：4
> 
> 时间：2009-05-19T09:08:27.300
> 
> 标签：compiler-construction, programming-languages, interpreter, bytecode

> “字节码程序通常通过一次解析一条指令来执行。这种字节码解释器非常便携。一些称为动态翻译器或“即时”（JIT）编译器的系统将字节码翻译成机器语言在运行时根据需要：这使虚拟机不可移植。”

关于这一段的一个问题是：字节码被处理后，解析后的指令和机器语言（或机器码）有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T09:24:53.930

JIT 不同于字节码解释器。

考虑以下 C 函数：

```
int sum() {
   return 5 + 6;
} 
```

这将直接编译机器码。x86 和 ARM 处理器上的确切指令会有所不同。

如果我们编写一个基本的字节码解释器，它可能看起来像这样：

```
for(;;) {
   switch(*currentInstruction++) {
   case OP_PUSHINT:
      *stack++ = nextInt(currentInstruction);
      break;
   case OP_ADD:
      --stack;
      stack[-1].add(*stack);
      break;
   case OP_RETURN:
      return stack[-1];
   }
} 
```

这可以解释以下指令集：

```
OP_PUSHINT (5)
OP_PUSHINT (6)
OP_ADD
OP_RETURN 
```

如果您在 x86 或 ARM 上编译了字节码解释器，那么您将能够运行相同的字节码，而无需对解释器进行任何进一步的重写。

如果您编写了 JIT 编译器，则需要为每个受支持的处理器发出特定于处理器的指令（机器代码），而字节码解释器依赖于 C++ 编译器来发出特定于处理器的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T23:14:44.187

在字节码解释器中，指令格式通常设计用于使用移位和掩码运算符进行非常快速的“解析”。解释器在“解析”（我更喜欢“解码”）指令后，立即更新虚拟机的状态，然后开始解码下一条指令。因此，在*解释器*中处理完字节码后，不会有任何残留。

在 JIT 编译器中，字节以大于单条指令的单位进行处理。最小单元是基本块，但现代 JIT 会将较大的路径转换为机器代码。这是一个*翻译*步骤，翻译步骤的输出*是*机器码。原始字节码可能保留在内存中，但不用于实现——因此没有真正的区别。（尽管 JIT 虚拟机的机器代码与本机代码编译器发出的机器代码做的事情仍然很典型。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T09:11:13.503

没有区别 - JIT 编译器正是为此完成的 - 它生成在硬件上执行的机器代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T09:45:48.600

最终，这一切都归结为机器指令。

1.  Native App - 包含直接执行的机器指令。
2.  JIT App - 字节码被编译成机器指令并被执行。
3.  Translated App - 字节码由作为 Native App 的虚拟机翻译。

如您所知，使用 #1 时开销最少，而使用 #3 时开销最大。因此，在初始编译开销之后，#1 上的性能应该是最快的，而 #2 上的性能应该也一样快。

# asp.net - 在 IIS 下通过 ASP.NET 页面连接到 Oracle 数据库时出现问题

> ID：881717
> 
> 赞同：0
> 
> 时间：2009-05-19T09:10:22.727
> 
> 标签：asp.net, oracle

我在显示一个简单的 ASP.NET 网页时遇到问题。该页面包含一个带有连接到 Oracle 数据库的 SqlDataSource 的 GridView。

当我在 VS 调试器（cassini 网络服务器）中运行该页面时，一切正常，但是当我将应用程序发布到本地 IIS 服务器（同一台机器）时，出现以下错误：

ORA-12154: TNS: 无法解析指定的连接标识符

如果它是另一台机器，我可以理解它可能是 tnsnames.ora 或其他我可以通过 tnsping 调查的问题。我还将包含 Oracle 驱动程序的文件夹的安全性设置为“所有人”，并将 webapp 设置为在“特权”AppPool（以管理员身份）下运行，但没有成功。

其他人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:15:55.930

[本](http://support.microsoft.com/kb/255084)指南是解决此类问题的圣经 :)

实际上，我已经打印了本指南的一份副本，并将其分发给涉及 IIS ASP.NET 到 ORACLE 连接问题的每一位顾问。清单可能会解决您的问题，除非您的代码中存在根据您的场景似乎没有的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:28:50.067

我认为你不止 1 个 Oracle 客户端。您需要使用 Windows 资源管理器搜索**所有**tnsnames.ora 文件，并比较和同步**所有**这些文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-19T09:17:21.713

也许你需要指定 IP

# c# - 使用哈希码为枚举生成值

> ID：881726
> 
> 赞同：0
> 
> 时间：2009-05-19T09:12:16.640
> 
> 标签：c#, enums

众所周知，[所有枚举都编译为常量](https://stackoverflow.com/questions/405548/c-are-all-enum-constants)，这意味着如果您使用来自不同程序集的枚举，您可能会得到[意想不到的结果。](https://stackoverflow.com/questions/194484/whats-the-strangest-corner-case-youve-seen-in-c-or-net/311831#311831)

显式设置连续枚举编号没有帮助，因为如果你想为新值留出空间，你必须做基本行号样式的间距，这是 naff。

所以我想知道将枚举值名称的哈希码用作字符串，这很容易为其生成脚本。

这是一个好主意吗？哈希码可以返回的负值会有问题吗？

**编辑** 对于那些问为什么，我引用链接的“极端案例”：

给定一个程序集：

```
enum MyEnum
{
    Red,
    Blue,
} 
```

如果您在另一个程序集中使用 MyEnum.Red.ToString() ，并且在此期间有人将您的枚举重新编译为：

```
enum MyEnum
{
    Black,
    Red,
    Blue,
} 
```

在运行时，你会得到“黑色”。

*（注意，我对这里的 ToString 不是特别感兴趣，问题是如果调用代码要求 MyEnum.Red，它实际上是在引用 MyEnum.Black）*

另一个说明显式顺序编号问题的示例：

```
enum ECountry
{
    Afghanistan = 1,
    Barbados = 2,
    Chile = 3,
    ...
    Zambia = 243, 
} 
```

如果[Giggleswick](http://maps.google.com/maps?q=Giggleswick&um=1&ie=UTF-8&sa=N&hl=en&tab=wl)突然宣布自己是共和国，你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:24:41.793

不，这不是一个好主意。

您无法从其哈希码安全地重新创建字符串。您可以遍历名称并将其哈希码与您拥有的哈希码进行比较，但由于哈希码冲突，仍然存在误报的小风险。风险很小，但它仍然不是一种可靠的使用方法。

如果您需要从一个枚举版本转换为另一个版本，只需使用枚举值的名称即可。该`ToString`方法为您提供名称，您可以使用该`Enum.Parse`方法从字符串中获取枚举值。

编辑：
当然，使用字符串值要求您在每个程序集中出现一次枚举，以便每次都对其进行编译。如果您在引用的程序集中使用枚举，那么您必须为每个值提供特定的数字表示，否则您根本没有任何东西可以使值从一个版本到下一个版本保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T09:16:29.750

你不会有负值的问题。您可能会遇到重复值的问题，因为不能保证字符串的哈希码是唯一的。

不过，我宁愿将值明确设置为 1、2、3 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:20:28.713

两个不同字符串值的哈希码不能保证是唯一的，所以这似乎是一个危险的选择。明确设置值有什么问题？除非这些数字在您的对象模型中有意义，否则似乎没有理由为新值留出空间 - 只需在枚举末尾添加新选项即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-10T04:42:01.727

我不确定我是否误解了一些事情，但是..

MyEnum.Red.ToString() 应该产生“红色”而不是 0。因此，对于正确的字符串评估，Enum.Parse 应该没问题。您描述的问题是 int Foo = (int)MyEnum.Red; 这将是 0；这可能会导致使用新元素重新编译后描述的结果不一致。

根据我对需求的理解， enum.ToString 是持久的，应该没有问题。问题在于持久化值或枚举，而不是字符串表示。因此，不需要散列。

这是一个例子（假设我们添加了黑色）......

```
 class Program
 {
  static void Main(string[] args)
  {
   // this is the approach described
   string RedToString = MyEnum.Red.ToString();

   // We're pretending that red was the zeroth element when we did (int)MyEnum.Red;
   int RedToInt = 0;

   MyEnum RedFromString = (MyEnum)Enum.Parse(typeof(MyEnum), RedToString);
   MyEnum RedFromInt = (MyEnum)RedToInt;

   // this is in theory how RedToInt was persisted
   int BlackFromInt = (int)MyEnum.Black;

   Console.WriteLine("RedToString: " + RedToString); // Red
   Console.WriteLine("RedToInt: " + RedToInt); // 0
   Console.WriteLine("RedFromString: " + RedFromString); // Red
   Console.WriteLine("RedFromInt: " + RedFromInt); // Black
   Console.WriteLine("BlackFromInt: " + BlackFromInt); // 0
   Console.Read();
  }

  enum MyEnum
  {
   Black,
   Red,
   Blue,
  }
 } 
```

HTH，本

# sql-server-2005 - 在存储过程中使用 Group By 子句

> ID：881728
> 
> 赞同：0
> 
> 时间：2009-05-19T09:12:30.617
> 
> 标签：sql-server-2005

我有一个存储过程，其中我将 InvoiceValue 作为一个字段。我有对应于 1 个 fileid 的不同发票值。我想获得与每个 fileid 对应的发票值的总和。如何在这里使用 group by？这是我的存储过程

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
GO
ALTER Procedure [dbo].[rptGGM]
(
    @FromDate varchar(50),
    @ToDate varchar(50),
    @PartyID int,
    @WID int

)

As
DECLARE @WhereStr VarChar(800)

SET @FromDate = LTRIM(RTRIM(@FromDate)) 
SET @ToDate = LTRIM(RTRIM(@ToDate))

SET @WhereStr = 
    CASE @WID
        WHEN 23 THEN 'WHERE G.PartyID='+LTRIM(str(@PartyID)) +' AND ((D.ATASea >='''+@FromDate+''' And D.ATASea<='''+@ToDate+'''))'
        WHEN 7 THEN 'WHERE G.PartyID='+LTRIM(str(@PartyID)) +' AND ((D.ATASea >='''+@FromDate+''' And D.ATASea<='''+@ToDate+''')) AND  A.WorkID='+LTRIM(str(@WID))
        WHEN 6 THEN 'WHERE G.PartyID='+LTRIM(str(@PartyID)) +' AND ((D.ATASea >='''+@FromDate+''' And D.ATASea<='''+@ToDate+''')) AND  A.WorkID='+LTRIM(str(@WID))
        WHEN 11 THEN 'WHERE G.PartyID='+LTRIM(str(@PartyID)) +' AND ((D.ATASea >='''+@FromDate+''' And D.ATASea<='''+@ToDate+''')) AND  A.WorkID='+LTRIM(str(@WID))
        WHEN 12 THEN 'WHERE G.PartyID='+LTRIM(str(@PartyID)) +' AND ((D.ATASea >='''+@FromDate+''' And D.ATASea<='''+@ToDate+'''))  AND  A.WorkID='+LTRIM(str(@WID))

    END

BEGIN
exec

('SELECT 
         A.FileNumber As [File_No],
         H.IDFNumber as [IDF No],
         H.IDFRegNo as [TZDAR],
         F.POString As [PO_Numbers],
         B.PartyName As [Exporter Name],
         F.SIString As [Supplier Invoices],
         C.CargoDesc As [Cargo_Description],
         dbo.PackCntDetails(A.FileID) As [Pk/Cnt_Details],
         D.VesselName As [Vessel Name],
         D.VoyageNo As [Voyage No],
         L.Amount As [Invoice Value],
         convert(varchar, Dbo.ActualDate(A.ETA), 103) + '' '' + convert(varchar, Dbo.ActualDate(A.ETA), 108) As ETA,
         convert(varchar,Dbo.ActualDate(D.ATASea),103) + '' '' + convert(varchar, Dbo.ActualDate(D.ATASea), 108) As ATA,
         convert(varchar,Dbo.ActualDate(H.PCVRIssuedDate),103) + '' '' + convert(varchar, Dbo.ActualDate(H.PCVRIssuedDate), 108) as [PCVR Issued Date],
         convert(varchar,Dbo.ActualDate(V.VATRelDate),103) + '' '' + convert(varchar, Dbo.ActualDate(V.VATRelDate), 108) as [VR Requested],
         convert(varchar,Dbo.ActualDate(V.OriginalRecdDate),103) + '' '' + convert(varchar, Dbo.ActualDate(V.OriginalRecdDate), 108) as [VR Granted],
         convert(varchar,Dbo.ActualDate(H.SBECVRAppReturnedDate),103) + '' '' + convert(varchar, Dbo.ActualDate(H.SBECVRAppReturnedDate), 108) as [SBE _VR App. ReturnedDate],
         convert(varchar,Dbo.ActualDate(H.SBECVRIssuedDate),103) + '' '' + convert(varchar, Dbo.ActualDate(H.SBECVRIssuedDate), 108) as [SBE_CVR IssuedDate],
         convert(varchar,Dbo.ActualDate(I.CDFLodgedDate),103) + '' '' + convert(varchar, Dbo.ActualDate(I.CDFLodgedDate), 108) as [CDF LodgedDate],
         convert(varchar,dbo.ActualDate(I.AssessmentPaidDate), 103) + '' '' + convert(varchar,dbo.ActualDate(I.AssessmentPaidDate),108) As [DutyPaidDate], 
         convert(varchar,Dbo.ActualDate(I.EntryLodgedDate),103) + '' '' + convert(varchar, Dbo.ActualDate(I.EntryLodgedDate), 108) as [Entry LodgedDate],
         convert(varchar,Dbo.ActualDate(I.EntryPassedDate),103) + '' '' + convert(varchar, Dbo.ActualDate(I.EntryPassedDate), 108) as [Custom Released],
         [Actual Days from ATA to CR]=DATEDIFF(dd, Dbo.ActualDate(D.ATASea),Dbo.ActualDate(I.EntryPassedDate)),
         convert(varchar,Dbo.ActualDate(K.ShippingLineReleaseDate),103) + '' '' + convert(varchar, Dbo.ActualDate(K.ShippingLineReleaseDate),108) as [ShippingLine ReleaseDate],
         convert(varchar,Dbo.ActualDate(K.PortInvoicePaidDate),103) + '' '' + convert(varchar, Dbo.ActualDate(K.PortInvoicePaidDate),108) as [Port_Charges Paid_Date],
         convert(varchar,Dbo.ActualDate(K.RemPortYardDateSea),103) + '' '' + convert(varchar, Dbo.ActualDate(K.RemPortYardDateSea),108) as [Rem_Sea_Port to Yard_Date],
         [Actual Days From CR to RFD Dar]=DATEDIFF(dd,Dbo.ActualDate(I.EntryPassedDate), Dbo.ActualDate(K.RemPortYardDateSea)),
         [Total No: of Days(ATA-RFD)]=DATEDIFF(dd,Dbo.ActualDate(D.ATASea), Dbo.ActualDate(K.RemPortYardDateSea)),
         A.Remarks As [File Status]
FROM
    FileMain A
INNER JOIN Party G ON G.PartyID = A.PartyID
LEFT JOIN Party B ON B.PartyID = A.ExporterID
LEFT JOIN Cargo C ON C.FileID = A.FileID
LEFT JOIN FileSea D ON D.FileID = A.FileID
LEFT JOIN SIPOString F ON F.FileID=A.FileID
LEFT JOIN IDFMain H ON H.FileID=A.FileID
LEFT JOIN Customs I ON I.FileID=A.FileID
LEFT JOIN VATRelief V ON V.FileID=A.FileID
LEFT JOIN PortAirPortOperation K ON K.FileID=A.FileID
LEFT JOIN Invoice L ON L.FileID=A.FileID and L.Incoterm=''CIF''' +@WhereStr)

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T09:27:56.623

这里最快的实现是不使用 GROUP BY。我会在您的 SELECT 中使用子查询来执行发票的总和。

删除 LEFT JOIN 到 Invoice，然后用子查询替换 SELECT 中的 L.Amount 行，如下所示

```
(SELECT SUM(Amount) FROM Invoice WHERE Invoice.FileID = A.FileID and Invoice.Incoterm = 'CIF') [Invoice Value] 
```

如果您希望使用 GROUP BY 来执行 SUM，那么您需要对您选择的所有其他列进行 GROUP，或者在 VIEW（可能是嵌套的）中执行 GROUP by。

# javascript - 将 onRelease 与 sIFR 一起使用

> ID：881731
> 
> 赞同：4
> 
> 时间：2009-05-19T09:12:55.437
> 
> 标签：javascript, jquery, sifr

如何在 sIFR 中捕获 onclick 事件？我知道我打算使用 `onRelease`，但不知道*如何*使用。我一直在寻找将其与 jQuery ui 选项卡结合使用的解决方案，该选项卡由以下功能触发：

```
$(function() {
  $("#tabs").tabs();
}); 
```

我试过像这样简单地插入它，显然没有任何运气：

```
sIFR.replace(AkzidGroLight, {
  selector:  '#tabsNav h4.Berthold-light',
  onRelease: function(fi) { $('#tabs').tabs(); },
  css: [ 
    'a {text-align: center; display: block; text-decoration: none; letter-spacing: -0.5;}',
    'a:link { color: #333333; }' ,
    'a:hover { color: #999999; }' 
  ],
  offsetTop:   5,
  tuneHeight:  5,
  wmode: 'transparent'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:08:57.567

wmode 透明是越野车越野车。首先删除它，看看行为是否改变。万一您的回调有问题，请在其中放置警报或 console.log 以确保它实际上被调用。

# serialization - 使用 ProtoBuf 时最好的加密方法是什么？

> ID：881734
> 
> 赞同：15
> 
> 时间：2009-05-19T09:13:26.060
> 
> 标签：serialization, encryption, compact-framework, .net-2.0, protocol-buffers

我已将移动设备上的数据库从 VistaDB 迁移出去，因为它太慢了。我现在使用 ProtoBuf 在存储卡上创建一系列平面文件，唯一的问题是显然没有加密。

哪种加密方法最适合 ProtoBuf？我基本上是将数据实体的集合序列化为文件，然后从文件反序列化回我的集合中。我认为进行加密的最佳位置是在读/写的 FileStream 中。

数据将包含 NI 编号、名称和地址，因此必须是安全的。有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T09:46:33.637

我认为你在正确的轨道上。您应该能够执行以下操作：

```
ICryptoTransform encryptor = ...
Stream encStream = new CryptoStream(outputFileStream, encryptor, CryptoStreamMode.Write);
Serializer.Serialize(encStream, obj);
encStream.FlushFinalBlock()
encStream.Close();

ICryptoTransform decryptor = ...
Stream decStream = new CryptoStream(inputputFileStream, decryptor, CryptoStreamMode.Read);
Serializer.Deserialize<Type>(decStream);
decStream.FlushFinalBlock()
decStream.Close(); 
```

有关 .NET 加密框架的基础知识（包括如何获取 ICryptoTransform 对象，请参阅其他问题，例如[在 .NET 中加密短字符串的最佳方法是什么？](https://stackoverflow.com/questions/845623/whats-the-best-way-to-encrypt-short-strings-in-net)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T18:15:16.477

[另一种选择是通过安装系统范围的文件系统过滤器](http://blogs.msdn.com/ce_base/archive/2005/12/01/499052.aspx)来实际加密存储数据的整个文件夹。这里的优点是：

1.  您的应用程序代码与加密无关，加密将在本机代码中完成。
2.  由于加密是在本机代码中完成的，它会更快
3.  由于加密不在托管代码中，因此逆向工程和找出您的密钥、盐等要困难得多。

当然，缺点（对于那些不写 C 的人来说）是你不能用 C# 编写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-16T17:38:24.763

如果您担心密钥的机密性。是否基于密码，并多次散列手动输入的密码以生成密钥。

# browser - jQueryUI 选项卡 - 缓存图像

> ID：881738
> 
> 赞同：0
> 
> 时间：2009-05-19T09:15:05.713
> 
> 标签：browser, caching

我有一个表格在 4 个选项卡中分开。如果用户上传了一些照片，则其中一个选项卡包含照片。每张照片下方都有一个用于删除照片的按钮。它执行 AJAX 调用以删除照片并加载到新的 input[file] 字段中，用户可以使用该字段上传另一张照片。

这工作正常。问题是用户上传新照片后，旧照片似乎还在。如果用户刷新浏览器，它不会消失。用户实际上必须按住 shift 然后刷新（绕过缓存）。

问题很可能源于新图像与旧图像命名相同的事实......并且浏览器只是从它的缓存中提取。

我需要做些什么来防止这种情况发生？我已经在 jQueryUI 选项卡上设置了 {cache : false}。我相信这与浏览器缓存的图像有关。有没有办法告诉浏览器不要缓存一些图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T09:19:47.230

尝试在图片标签源文件名中加一个参数，比如当前时间戳来打破浏览器的缓存？就像是：

```
<img src="something.jpg?234343234"/> 
```

# java - php非常有限吗？

> ID：881744
> 
> 赞同：5
> 
> 时间：2009-05-19T09:16:45.070
> 
> 标签：java, php, asp.net

我已经尝试过 asp.net 和 jsp ......并且编程语言足够强大，可以创建桌面和 Windows 应用程序。

但是除了创建 Web 应用程序之外，我还能用 php 做什么呢？它有某种运行时或框架吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-19T09:19:53.083

*强大*是一个不幸的词。这是关于专注，而不是权力。PHP 不太适合桌面应用程序。部分原因是库支持较弱（尽管存在一些），部分原因是它的内存管理模型。不过，它可以用于网络世界以外的工作；它通常用作通用脚本语言，以及各种后台任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T09:21:35.857

PHP 本身并不是“有限的”。PHP 主要仅用于开发 Web 应用程序。然而，像 WinBinder 这样的产品承诺允许您使用 PHP 来构建桌面应用程序。我不会完全推荐。此外，您可能还没有使用 ASP.NET 和 JSP 构建 Windows 应用程序，而更有可能是使用 .NET WinForms 和 Java（可能是 Swing）。成千上万的开发人员使用 PHP 构建许多不同的 Web 应用程序。可以用它构建其他类型的应用程序，但我不建议再走这条路。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T09:22:43.700

PHP 旨在作为一种 Web 开发语言，但您可以使用它编写控制台脚本，如果您有勇气，可以使用[PHP-GTK 之](http://gtk.php.net/)类的东西来编写 GUI 应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T14:53:34.517

PHP 是一个非常出色的 shell 脚本工具。它内置了许多简单的功能。

*   [文件 IO](http://us.php.net/manual/en/ref.filesystem.php)
*   [字符串操作](http://us.php.net/manual/en/ref.strings.php)
*   [数组操作](http://us.php.net/manual/en/ref.array.php)

虽然您可以在 JSP 和 C# 中做同样的事情，但与任何脚本语言相比，您将花费更多的时间。

PHP 与其他脚本语言相比的最大优势是[PHP.net 文档](http://www.php.net/manual)。在我曾经使用过的任何语言中，这个单一资源定义了语言参考的良好文档和组织应该是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T09:21:15.170

PHP 可以通过命令行解释器运行，因此任何计算任务都可以在 PHP 中完成。我不了解桌面应用程序和 GUI。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T09:25:04.240

PHP 有一个运行时，但它不像某些语言那样被完全解释。例如，您不能重新定义方法。至于桌面应用程序，PHP 有用于创建桌面应用程序的绑定，但它不是很好。它非常适合命令行工具。Zend 和 CakePHP 是 Web 应用程序的两个框架。PHP 就像一个非常易于使用的 C 版本，具有非常好的扩展社区（查看 php.net 文档上的扩展）。PHP 在 Windows 上得到很好的支持（甚至是 Msft）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T09:31:31.983

通常是语言的“限制”或缺少更好的词“焦点”使其强大而不是弱。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T10:41:06.240

我会说 PHP 最适合 Web 应用程序开发。它完成了这项工作，并且做得很好。

但这并不是说它对其他任何事情都没有用。它可以用作通用脚本语言。

使用 Qt，您甚至可以使用 PHP 开发桌面应用程序。查看[http://php-qt.org/](http://php-qt.org/)

但*重点*必须放在 Web 应用程序上：PHP 是为 Web 设计的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T15:07:13.317

取决于你认为什么强大？它是为服务器端的 Web 开发而设计的，并且它完美地做到了这一点。

我不认为自己说一种语言比另一种更强大，因为这始终是一个偏好问题，手头的任务以及该语言是否是为您想要完成的任务而设计的。

# .net - Excel .NET COM - 自动化错误。该系统找不到指定的文件

> ID：881750
> 
> 赞同：21
> 
> 时间：2009-05-19T09:18:07.250
> 
> 标签：.net, excel, com, automation

我有一个 VBA 在 Excel 中使用的 .NET 2.0 COM 对象。它在我的开发机器上运行良好，但是当尝试在干净的 VM 工作站上使用它时，我收到此错误：

自动化错误。该系统找不到指定的文件。

该 dll 使用“regasm /tlb /codebase mycom.dll”注册，而不是放入 GAC。我没有 VM 框的管理权限

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-19T12:09:18.933

您需要使用程序集的完整路径作为`codebase`参数值调用 regasm，或者将程序集放置在某个位置，该位置始终位于搜索库的路径上。否则客户端尝试实例化 COM 对象时将找不到。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-16T13:41:16.710

在 Windows 7、64 位和 .NET 4.0 框架 dll（32 位）上，我希望可用作 Microsoft Excel 2010 VBA 应用程序的 COM 对象，这对我有用。

1.  将 dll 复制到 c:\windows\syswow64
2.  在 cmd shell 中，运行

    ```
    C:\Windows\Microsoft.NET\Framework\v4.0.<whatever you have>\regasm.exe c:\windows\syswow64\<name of dll> /codebase /tlb:c:\windows\syswow64\<name of dll minus '.dll'>.tlb 
    ```

如果您不想或不需要在您注册程序集的机器上进行智能感知，您可以跳过最后一部分 (/tlb:. . .)。

我遇到的关键问题是，在 XP 上我以前从未使用过 /codebase 参数，但这是在此工作之前需要的关键。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-18T13:54:03.217

我在创建 .NET .dll (v4.0) 并打算在 VB6 应用程序中使用它后收到此“自动化错误。系统找不到指定的文件”错误（用“ClassInterface”和“装饰我的类” ComVisible”属性，带有“ComVisible”的方法）。

我运行“regasm.exe -tlb C:\PathTo\MyDll.dll”，但在我的 VB6 应用程序中添加 .tlb 文件作为参考并运行/调试它后收到上述错误。只有在 regasm.exe 调用中添加“-codebase”参数并重新添加 .tlb 引用后，错误才得到解决。

只是想我会分享我的经验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-16T16:41:33.470

我还收到一个自动化错误。我的参考（在 MS Access 中）是 TLB 文件。保存 TLB 文件的文件夹中缺少相应的 DLL 文件，这导致出现“自动化错误”消息。将 DLL 添加回已修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-14T14:03:13.467

我遇到了同样的错误（在我最初编写它的第一台机器上工作之后，无法在第二台开发机器上使用旧版 VB6 代码中的 .NET 对象）。.NET DLL 编译和注册得很好——我尝试了各种组合——在 VS 中使用和不使用“Register for COM Interop”构建设置；通过 regasm.exe 手动注册并尝试使用 /codebase 参数和不使用 /codebase 参数；尝试启用和抑制 COM Visible 程序集级属性（抑制时，我在需要从 COM 使用的类上设置属性）。但是没有任何效果，我一直收到同样的错误。

结果我在第二台机器上将 DLL 输出升级到了 .NET 4.5，而它最初是在构建一个 .NET 2.0 程序集。我的项目有一些针对运行 .NET 2.0 的第 3 方互操作 DLL 的引用。当我更新这些引用并重建 DLL 或将我的项目重新设置为在 .NET 2.0 上运行时，我的问题就解决了。当使用 /codebase（VS 自动执行）时，我发现我不需要将我的 DLL 放在应用程序目录或 \syswow64 中。此外，MSDN 文档声明您必须在使用 /codebase 时为您的程序集使用 SN（强名称），但我发现您不必这样做；您只会从 regasm.exe 命令行工具收到警告。

关键是，从 COM 互操作的角度来看，请注意您的依赖项的 .NET 运行时版本与您所针对的 .NET Framework 相关。

# c# - 如何检查 net.tcp WCF 服务的可用性

> ID：881754
> 
> 赞同：16
> 
> 时间：2009-05-19T09:19:05.173
> 
> 标签：c#, wcf, net.tcp

我的 WCF 服务器需要定期上下，客户端有时会使用服务器，但如果它关闭，客户端就忽略它。所以每次我需要使用服务器服务时，我都会检查连接状态，如果它没有打开，我会打开它。问题是，如果我在服务器关闭时尝试打开，则会出现影响性能的延迟。我的问题是，有没有办法做某种`myClient.CanOpen()`？所以我想知道是否有任何点可以打开与服务器的连接。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-19T16:25:31.233

有一个 WS-Discovery 实现，可以让您监听服务的启动/停止通知。这也是一种非常方便的服务地址解析形式，因为它利用 UDP 多播消息来查找服务，而不是在客户端上配置一个集合地址。 [WCF 的 WS 发现](http://www.codeproject.com/KB/WCF/ws-discovery.aspx)

还有一个微软员工完成的实现： [WS-Discovery Sample Implementation](http://blogs.msdn.com/vipulmodi/archive/2006/12/21/ws-discovery-sample-implementation.aspx)

.NET 4.0 将本机包含此内容。您可以在 Jesus Rodriguez 的博客上了解 .NET 4.0 的实现。[它有一个很棒的图表，详细说明了在 WCF 4.0 中使用 WS-Discovery 在](http://weblogs.asp.net/gsusx/archive/2009/02/13/using-ws-discovery-in-wcf-4-0.aspx)WS-Disco 中进行的临时通信

您可能会考虑的另一件事，特别是如果您的消息主要是单向的，是一种可以在本地断开连接的协议，例如 MSMQ。我不知道您的应用程序设计是什么样的，但 MSMQ 将允许客户端发送消息，而不管服务的状态如何，并且服务会在它恢复时获取它。这样，您的客户就不必在通信之前阻止太多尝试确认服务已启动......它只会触发并忘记。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T09:36:46.307

如果您在具有用户界面的应用程序中执行预期服务器超时的同步调用，您应该在另一个线程中执行此操作。我怀疑性能下降是由于异常开销造成的。CPU 负载、gui 可用性或挂钟时间是您的性能损失吗？

您可以调查看看是否可以在 TCP 上创建自定义绑定，但超时更快。

我假设您知道 "IsOneWay=true" 在您的情况下比 request->response 更快，因为您无论如何都不会期望得到响应，但是您不会得到确认或返回值。您还可以实现不是请求->响应的双向通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T09:22:31.907

我认为不可能对您的客户进行服务器端调用以通知他您的服务已启动...我能看到的最佳方法是让客户端方法确定服务在哪里打开并且良好健康）状况。除非我缺少 WCF 的某些功能......

有一篇很好的博客文章[WCF：WCF 服务的可用性，](http://geekswithblogs.net/LeonidGaneline/archive/2008/05/07/wcf-availability-of-the-wcf-services.aspx)如果您有兴趣阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T10:00:22.000

如果您在本地网络中，则可能会广播信号以表明新服务器已启动。客户端需要监听广播信号并做出相应的响应。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-11T22:02:55.233

这就是我正在使用的东西，它就像一个魅力。顺便说一句，ServiceController 类位于命名空间“System.ServiceProcess”中。

```
try
{
    ServiceController sc = new ServiceController("Service Name", "Computer's IP Address");
    Console.WriteLine("The service status is currently set to {0}",
        sc.Status.ToString());

    if ((sc.Status.Equals(ServiceControllerStatus.Stopped)) ||
        (sc.Status.Equals(ServiceControllerStatus.StopPending)))
    {
        Console.WriteLine("Service is Stopped, Ending the application...");
        Console.Read();
        EndApplication();
    }
    else
    {
        Console.WriteLine("Service is Started...");
    }
}
catch (Exception)
{
    Console.WriteLine("Error Occurred trying to access the Server service...");
    Console.Read();
    EndApplication();
} 
```

# bash - 当今最好的（可移植和可维护的）Shell 脚本语言是什么？

> ID：881757
> 
> 赞同：6
> 
> 时间：2009-05-19T09:19:31.617
> 
> 标签：bash, unix, shell, ksh, csh

我知道这个问题过去曾引发过一场“宗教”战争，可能没有一个正确答案。但是在过去 3-4 年使用 ksh 和 csh 并经历了从一个移植到另一个或将一个通用逻辑应用于多个版本（读取为遗留代码）的痛苦之后，如果我正在编写一个新脚本，我会去ksh，但出于强迫而不是选择。除了 ksh/csh，还有更好的选择吗？还有一些可以跨 Unix（Solaris/HP/IBM/FreeBSD）和 Linux 移植的东西（如果我没有要求太多，或者它是否对所有 Linux 风格都有意义）

等待建议...

和平 :) Devang Kamdar

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T09:31:06.680

我建议plain old `sh`，它随处可见。

此外，值得注意的是，可移植性不仅涉及 shell，还涉及脚本中使用的其他命令，例如`awk`、或.`grep``ps``echo`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T09:28:12.707

如果你真的希望它是可移植的（我不知道任何 shell 脚本都是可维护的），我会指定 #!/bin/sh 并使用[dash](http://en.wikipedia.org/wiki/Debian_Almquist_shell)和如果可能的其他 shell 进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T09:33:14.443

我希望 BASH 成为目前传播最广泛的 shell，因为它是许多 Linux 发行版的默认设置（它甚至可以使用 cygwin 在 Windows 上运行，但其他 shell 也可能如此）。另一种方法可能是不使用 shell 本身编写脚本，而是使用其中一种脚本语言，如 perl、python、ruby ......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T10:29:30.087

我通常使用ksh。我发现这是功能和可移植性之间的一个很好的折衷。它在大多数 Linux 机器和 Solaris 上都存在（或可用的兼容版本）。我使用 HP-UX 已经有一段时间了（谢天谢地），但我很确定它在那里也可用。

如果您需要支持的所有机器都是现代的，那么 bash 可能是一种选择。Solaris 10 附带一份副本。这是大多数 Linux 机器上的默认设置。

您的最小公分母将是 Bourne (sh)，因此如果可移植性是您的主要关注点，则值得考虑。不过，它缺少 ksh 和 bash 的一些更友好的功能。

仍然值得避开 csh/tcsh 来编写脚本。[被认为有害的 Csh 编程](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)是一个老歌，但在很大程度上仍然具有相关性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T10:38:39.350

我的答案是 perl。

'sh' 'bash' 等是否可以以更好更优雅的方式完成。

而且它实际上更便携。给定版本的 perl 在所有平台上都非常一致。Linux、Solaris 和 AIX 发行版之间没有显着差异，而在这些平台之间移植 shell 脚本确实很痛苦。

它适用于所有 Windows 平台！如果您避免使用反引号和“system()”，您的脚本就有很好的运行机会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T15:05:52.913

Python！查看 iPython，它是一个增强的 Python 解释器。另外：[用于 Unix 和 Linux 系统管理的 Python](https://rads.stackoverflow.com/amzn/click/com/0596515820)。

您可以编写出色的可移植脚本，这很有趣。

# c# - 强命名会导致 C# 中的对象序列化问题吗？

> ID：881766
> 
> 赞同：3
> 
> 时间：2009-05-19T09:21:39.490
> 
> 标签：c#, serialization, strongname

我序列化一些配置对象并将结果字节存储在数据库中。

```
new BinaryFormatter().Serialize(memoryStream, instance);
Convert.ToBase64String(memoryStream.ToArray()); 
```

稍后将反序列化这些对象。

```
new BinaryFormatter().Deserialize(memoryStream); 
```

应用程序在反序列化时可能有一些新的程序集版本。一般来说，它运行良好，但有时我会收到文件加载异常： *“定位的程序集的清单定义与程序集引用不匹配。”* . 这些程序集都使用强命名，这可能是问题吗？我该如何避免这个问题？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T10:09:02.687

当然，使用`BinaryFormatter`数据库（即长期）存储是个坏主意。`BinaryFormatter`有~~两个~~三大故障（默认）：

*   它包括类型元数据（如果你移动/重命名你的类型......这也可能意味着强名称/版本控制）
*   它包括字段名称（字段是私人详细信息！）
*   它是 .NET 特定的（如果您想使用其他任何东西，这会很痛苦）

我的[博文在这里](http://marcgravell.blogspot.com/2009/03/obfuscation-serialization-and.html)提出了两个具体问题 - 混淆和自动实现的属性......我不会在这里重复文本，但您可能会发现它很有趣。

我建议使用**基于合同的**序列化。`XmlSerializer`或者`DataContractSerializer`正常就足够了。如果您想要小型高效二进制文件，那么[protobuf-net](http://code.google.com/p/protobuf-net/)可能会引起您的兴趣。与 不同`BinaryFormatter`的是，由此产生的二进制文件在实现之间是可移植的、可扩展的（用于新字段）等。而且它也[更快、更小](http://code.google.com/p/protobuf-net/wiki/Performance)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:36:17.837

我认为 WCF 可能是你最好的选择。即使它不知道如何反序列化它们，它也可以处理将未知字段传递给它的消费者。

例子：

服务 A：了解具有描述字段的 Widget 类的版本 2

服务 B：知道没有描述字段的 Widget 类的版本 1

服务 C：了解具有描述字段的 Widget 类的版本 2

如果服务 A 调用服务 B 并传递一个 Widget 对象，然后服务 B 调用服务 C 传递相同的 Widget 对象，那么服务 C 将获得描述字段，因为它是从服务 A 传递的。服务 B 将没有任何描述字段，但是当它反序列化它并重新序列化它它只会传递描述字段而不知道它是什么。

因此，您可以将 WCF 服务与进程内通信一起使用。

[有关版本化 wcf 合同](http://dasblonde.net/PermaLink,guid,a0b48932-4b7d-4d7b-9886-e7d0764d8908.aspx)的更多信息，请参阅此链接。

# javascript - 是否可以更改文本框中单词的颜色？

> ID：881767
> 
> 赞同：1
> 
> 时间：2009-05-19T09:21:42.080
> 
> 标签：javascript, text

我有一个常规的 texbox 控件。我需要用红色突出显示一些单词。是否有可能与 JavaScript（jquery 或其他任何东西）有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T09:47:53.663

大多数富文本 javascript 编辑器都使用`iframe`with，`designMode='on'`因为这样会产生最好的跨浏览器结果：

```
<iframe ID="rtbox"></iframe>
```

要`iframe`通过 Javascript 进行编辑和插入富文本，您可以使用以下示例代码：

```
var rtbox = document.getElementById('rtbox');
var doc = rtbox.document ? rtbox.document : rtbox.contentDocument;
doc.designMode = 'on';
doc.body.innerHTML = 'one <span style="color:red">red</span> word'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:24:00.407

不，你不能那样做。您唯一的方法是使用像 FCKEditor 或类似的富文本编辑器组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:56:48.110

不，您不能在标准中使用不同的样式`<textarea>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T10:32:32.343

我推荐使用 TinyMCE 作为富文本编辑器。

不，您所说的在标准文本区域上是不可能的。

# javascript - DOM 元素/节点的唯一标识符是什么

> ID：881768
> 
> 赞同：24
> 
> 时间：2009-05-19T09:22:11.143
> 
> 标签：javascript, dom

我正在使用 javascript DOM 遍历 HTML 文档。我想制作一个所有节点/元素及其值的列表（实际上是一个数组）。我找到了一个用于遍历 DOM 的脚本，但是如何将每个节点值存储在一个数组中。我似乎找不到节点的唯一标识符。有人有任何指示吗？我在想`xpath`什么。

`xpath`考虑将节点作为唯一标识符是否是个好主意。如果是这样，我如何`xpath`在遍历 DOM 时获取元素？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-19T10:22:40.023

作为在 C 和 C++ 世界中出生和长大的程序员，我对这类问题的第一个答案是“将他们的地址存储在数组中！”。但是经过几年对网络事物的处理方式，我可以给出正确的答案：

在javascript中，您可以直接将对对象的*引用*存储在数组中。不，xpath 不是一个好主意；使用引用更简单更好。*因此，您的问题的直接答案是：除了自身*之外，DOM 元素/节点没有唯一标识符。

在 javascript 中，所有对象都是通过引用传递的。所以这里有一个如何做到这一点的示例代码：

```
var theArray = [];
var theNodeToTraverse = document.getElementById('domelementtosearch');

traverseAndStore(theNodeToTraverse);

function traverseAndStore( node )
{
    if( node==null) return;
    theArray[ theArray.length ] = node;
    for( i=0; i<node.childNodes.length; i++ )
        traverseAndStore( node.childNodes[i] );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T14:26:15.460

你可以用这样的东西得到类似于 xpath 的东西。它通过 parentNode 属性从输入元素向上遍历 dom。

[https://gist.github.com/sebjwallace/3c0a6f7493ce23134516](https://gist.github.com/sebjwallace/3c0a6f7493ce23134516)

它会输出这样的字符串。

“#document/HTML/BODY/DIV”

```
var getElementPath = function(el){
  var path = el.nodeName;
  var parent = el.parentNode;
  while(parent){
    path = parent.nodeName + '/' + path;
    parent = parent.parentNode;
  }
  return path;
} 
```

# silverlight - 是否可以从 Silverlight 启动客户端应用程序？

> ID：881774
> 
> 赞同：3
> 
> 时间：2009-05-19T09:23:30.733
> 
> 标签：silverlight, client, certificate, executable

我有一个简单的公司门户，允许用户从浏览器启动他们的应用程序。超链接中的 URL 被传递（使用 Javascript）到签名的小程序以实际启动客户端应用程序。所有客户端都是 XP 或 Vista 并且都运行 IE6 或 IE7。

我最近一直在研究 Silverlight，想知道是否可以做类似的事情。理想情况下，我想从 Silverlight 做所有事情并摆脱小程序。

是否可以从 Silverlight 调用客户端应用程序？我可以签署 Silverlight 应用程序以赋予它额外的权利吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:54:58.000

您可以从 silverlight 调用 javascript，就像使用带有链接的 javascript 一样。

例如`somefunction`使用参数调用：

```
HtmlPage.Window.CreateInstance("somefunction", new string[] { "parameter1" }); 
```

[这里](http://silverlight.net/learn/learnvideo.aspx?video=65683)有一个关于 Html 浏览器集成的好视频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-10T19:58:33.130

现在 Silverlight 4 已经发布，您应该重新审视这一点。[您可以从这里](http://www.cynergysystems.com/blogs/page/michaelwolf?entry=silverlight_4_and_command_line%20)查看如何运行 exe 。

# delphi - 如何在 Delphi 7 的“uses 子句”中识别和删除未使用的单元？

> ID：881778
> 
> 赞同：14
> 
> 时间：2009-05-19T09:24:13.103
> 
> 标签：delphi, uses-clause

在我的一些非常大的项目中，这应该会大大减少可执行文件的大小。我相信还会有其他好处。

编辑：是否有一个实用程序可以扫描项目并自动删除多余的项目？我确实有 100 个项目，“自动删除”将是一等奖，尽管如果必须，我将在识别实用程序的帮助下采用手动方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T09:44:54.920

您可能想看看[CnPack](http://www.cnpack.org/index.php?lang=en)。

CnPack 包括一个使用清洁器向导，它还没有让我失望。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-19T09:33:23.290

我曾经使用[Icarus](http://www.peganza.com/)，它给了我一个未使用的使用条目的报告。

从网页

> ICARUS 解析 Delphi 或 Borland Pascal 源代码并生成使用报告。此报告将帮助您从使用列表中删除不需要的单元。您还将知道哪些单元可以从接口使用列表移动到实现使用列表。
> 
> 删除未使用的使用引用有多种好处： 维护更清晰的代码，无需为未使用的代码烦恼
> 
> ICARUS 非常易于使用，只需选择一个源文件，设置几个选项，然后开始分析。或者让内置向导引导您完成此过程。
> 
> ICARUS 是免费软件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T09:44:01.643

这样的工具永远无法分析是否需要执行已使用单元的初始化或终结部分。从使用中删除单元可能会导致不运行初始化和终结部分，从而导致错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T10:18:30.827

如果你的代码可以用 Free Pascal 编译，Free Pascal 编译器也会发出关于你代码中未使用单元的提示。

另请参阅此 SO 条目，其中包含有关可能问题的其他信息，例如基于 RTTI 的方法：

[https://stackoverflow.com/questions/605977/tools-to-detect-dead-code-in-delphi2007-or-above/](https://stackoverflow.com/questions/605977/tools-to-detect-dead-code-in-delphi2007-or-above/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T03:54:54.583

请记住，链接器将删除任何无法调用的内容。如果没有使用一个单元并且它没有初始化或完成，无论如何它都会被完全剥离。初始化或终结中引用的任何内容都将保留，但总的来说，这不会带来太多。

一个单元可能只包含初始化，因此无论如何都会限制全自动剥离。仅以某种方式改变系统行为的单元很可能没有引用，但仍然需要。（我想到了具有良好泄漏跟踪的替换内存管理器。虽然它确实有你可以参考的东西，但没有必要，只需使用它并获取泄漏报告。很好地仔细检查你的代码。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T09:30:44.650

[在这里](https://stackoverflow.com/questions/880125/how-do-i-reduce-uses-boilerplate-for-new-forms)查看一些答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T11:25:24.233

Peganza 有类似的工具：[http ://www.peganza.com/](http://www.peganza.com/)

# perl - 在 Perl 中删除换行符的最简洁方法

> ID：881779
> 
> 赞同：55
> 
> 时间：2009-05-19T09:24:15.553
> 
> 标签：perl, line-breaks

我正在维护一个脚本，该脚本可以从各种来源获取输入，并按行处理。根据使用的实际源，换行符可能是 Unix 风格、Windows 风格，甚至对于某些聚合输入，是混合（！）。

从文件中读取时，它是这样的：

```
@lines = <IN>;
process(\@lines);

...

sub process {
    @lines = shift;
    foreach my $line (@{$lines}) {
        chomp $line;
        #Handle line by line
    }
} 
```

所以，我需要做的是将 chomp 替换为删除 Unix 风格或 Windows 风格的换行符的东西。我想出了太多的方法来解决这个问题，这是 Perl 的常见缺点之一 :)

您对消除通用换行符的最佳方法有何看法？什么是最有效的？

编辑：一个小的澄清 - 方法'process'从某处获取行列表，*而不是从文件中读取*。每行可能有

*   没有尾随换行符
*   Unix 风格的换行符
*   Windows 风格的换行符
*   只是回车（当原始数据具有 Windows 样式的换行符并使用 $/ = '\n' 读取时）
*   线条具有不同样式的聚合集

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-05-19T11:14:17.187

在对[perlre](http://perldoc.perl.org/perlre.html)文档进行了一些挖掘之后，我将提出迄今为止我最好的建议，它似乎工作得很好。Perl 5.10 添加了 \R 字符类作为通用换行符：

```
$line =~ s/\R//g; 
```

它与以下内容相同：

```
(?>\x0D\x0A?|[\x0A-\x0C\x85\x{2028}\x{2029}]) 
```

我会暂时保留这个问题，看看是否有更多漂亮的方法等待被建议。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2011-02-18T22:46:05.063

每当我通过输入并想要删除或替换字符时，我都会通过像这样的小子程序运行它。

```
sub clean {

    my $text = shift;

    $text =~ s/\n//g;
    $text =~ s/\r//g;

    return $text;
} 
```

这可能并不花哨，但这种方法多年来对我来说一直完美无缺。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-19T09:41:59.433

```
$line =~ s/[\r\n]+//g; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-19T10:37:45.250

阅读[perlport](http://perldoc.perl.org/5.8.8/perlport.html#Newlines)我建议像

```
$line =~ s/\015?\012?$//; 
```

对于您使用的任何平台以及您可能正在处理的任何换行样式都是安全的，因为 \r 和 \n 中的内容可能因不同的 Perl 风格而异。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-19T17:35:03.150

**2017 年的注释：由于设计错误和未维护的错误，不推荐使用 File::Slurp。请改用[File::Slurper](https://metacpan.org/pod/File::Slurper)或[Path::Tiny](https://metacpan.org/pod/Path::Tiny)。**

延伸你的答案

```
use File::Slurp ();
my $value = File::Slurp::slurp($filename);
$value =~ s/\R*//g; 
```

File::Slurp 抽象出 File IO 的东西，只为你返回一个字符串。

**笔记**

1.  重要的是要注意添加`/g`，没有它，给定一个多行字符串，它只会替换第*一个*违规字符。

2.  此外，删除`$`对于此目的是多余的，因为我们想要删除*所有*换行符，而不仅仅是`$`在此操作系统上的任何含义之前的换行符。

3.  在多行字符串中，`$`匹配字符串的结尾*，*这将是有问题的）。

4.  第 3 点意味着第 2 点是在假设您还想使用的前提下做出`/m`的`$`并设法找到`\R*` 继续进行的`$`

**例子**

```
while( my $line = <$foo> ){
      $line =~ $regex;
} 
```

鉴于上述符号，操作系统不理解您的文件 '\n' 或 '\r' 分隔符，在默认情况下，操作系统的默认分隔符设置为`$/`将导致将整个文件作为一个连续的字符串读取（除非您的字符串中有 $OS 的分隔符，它将由它分隔）

所以在这种情况下，所有这些正则表达式都是无用的：

*   `/\R*$//` ：只会擦除`\R`文件中的最后一个序列
*   `/\R*//` ：只会擦除`\R`文件中的第一个序列
*   `/\012?\015?//`: When 只会擦除第一个`012\015`, `\012`, or`\015`序列，`\015\012`将导致要么 要么`\012`被`\015`发射。

*   `/\R*$//`: 如果文件中恰好没有 '\015$OSDELIMITER' 的字节序列，那么*除了*操作系统自己的换行符之外，不会删除任何换行符。

似乎没有人明白我在说什么，所以这里是示例代码，*经过**测试*不会删除换行符。运行它，你会看到它留下了换行符。

 *```
#!/usr/bin/perl 

use strict;
use warnings;

my $fn = 'TestFile.txt';

my $LF = "\012";
my $CR = "\015";

my $UnixNL = $LF;
my $DOSNL  = $CR . $LF;
my $MacNL  = $CR;

sub generate { 
    my $filename = shift;
    my $lineDelimiter = shift;

    open my $fh, '>', $filename;
    for ( 0 .. 10 )
    {
        print $fh "{0}";
        print $fh join "", map { chr( int( rand(26) + 60 ) ) } 0 .. 20;
        print $fh "{1}";
        print $fh $lineDelimiter->();
        print $fh "{2}";
    }
    close $fh;
}

sub parse { 
    my $filename = shift;
    my $osDelimiter = shift;
    my $message = shift;
    print "Parsing $message File $filename : \n";

    local $/ = $osDelimiter;

    open my $fh, '<', $filename;
    while ( my $line = <$fh> )
    {

        $line =~ s/\R*$//;
        print ">|" . $line . "|<";

    }
    print "Done.\n\n";
}

my @all = ( $DOSNL,$MacNL,$UnixNL);
generate 'Windows.txt' , sub { $DOSNL }; 
generate 'Mac.txt' , sub { $MacNL };
generate 'Unix.txt', sub { $UnixNL };
generate 'Mixed.txt', sub {
    return @all[ int(rand(2)) ];
};

for my $os ( ["$MacNL", "On Mac"], ["$DOSNL", "On Windows"], ["$UnixNL", "On Unix"]){
    for ( qw( Windows Mac Unix Mixed ) ){
        parse $_ . ".txt", @{ $os };
    }
} 
```

对于**CLEARLY Unprocessed**输出，请参见此处：[http ://pastebin.com/f2c063d74](http://pastebin.com/f2c063d74)

请注意，某些组合当然有效，但它们很可能是您自己天真地测试过的组合。

请注意，在此输出中，所有结果必须`>|$string|<>|$string|<` 采用*NO LINE FEEDS*的形式才能被视为有效输出。

并且`$string`是一般形式`{0}$data{1}$delimiter{2}`，在所有输出源中，应该有：

1.  `{1}`和之间没有`{2}`
2.  仅`|<>|`在`{1}`和之间`{2}`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-28T15:31:24.183

在你的例子中，你可以去：

```
chomp(@lines); 
```

或者：

```
$_=join("", @lines);
s/[\r\n]+//g; 
```

或者：

```
@lines = split /[\r\n]+/, join("", @lines); 
```

直接在文件上使用这些：

```
perl -e '$_=join("",<>); s/[\r\n]+//g; print' <a.txt |less

perl -e 'chomp(@a=<>);print @a' <a.txt |less 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-19T13:40:54.533

为了扩展上面 Ted Cambron 的答案以及此处未解决的问题：如果您从输入的文本块中不加选择地删除所有换行符，那么当您稍后输出该文本时，最终会出现没有空格的段落。这就是我使用的：

```
sub cleanLines{

    my $text = shift;

    $text =~ s/\r/ /; #replace \r with space
    $text =~ s/\n/ /; #replace \n with space
    $text =~ s/  / /g; #replace double-spaces with single space

    return $text;
} 
```

最后一个替换使用 g 'greedy' 修饰符，因此它会继续查找双空格，直到将它们全部替换。（有效地替换单个空格以外的任何内容）

# cloud - 需要通过 api 和安全性进行云文件共享

> ID：881785
> 
> 赞同：0
> 
> 时间：2009-05-19T09:25:14.523
> 
> 标签：cloud

我的客户不想在生产箱上安装 ftp（可以理解）。我们生成我们希望提供给客户的 ftp 文件，但他们没有能力接收。

我需要以下内容：

*   API自动上传数据
*   能够进行简单的 ftp 或 http 访问
*   保护目录/文件的能力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:24:44.547

我使用 HTTPS 在客户端服务器上使用简单的 C# 应用程序将统计信息上传到我们的 Web 服务器。

```
 using System.Net;

   WebClient client = new WebClient();

   client.UploadFile("https://website/upload", "PUT", localpathtofile); 
```

我们的 IIS 服务器只有一个不可浏览、可写的 IIS 文件夹和一个 SSL 证书。

# java - 使用 DOM 将一个 xml 文档复制到另一个

> ID：881787
> 
> 赞同：0
> 
> 时间：2009-05-19T09:26:20.480
> 
> 标签：java, xml, dom

这是我的情况：

我有两个 org.w3c.dom.Document 从两个 xml 文件创建。我想要获得的是包含两个xml文档所有数据的全新文档。

你对如何做到这一点有任何想法吗？

谢谢！抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:45:12.907

*   创建一个新文档
*   创建一个名为**newRoot的新根**
*   将第一个文档根添加为**newRoot的子级**
*   将第二个文档根添加为**newRoot的子级**

# python - 如何在 Django 中使用动态外键？

> ID：881792
> 
> 赞同：39
> 
> 时间：2009-05-19T09:27:30.227
> 
> 标签：python, django, foreign-keys

我想将一个连接`ForeignKey`到两个不同的模型。

例如：

我有两个名为`Casts`和`Articles`的模型，以及第三个模型，`Faves`，用于偏爱其他模型中的任何一个。我怎样才能使`ForeignKey`动态？

```
class Articles(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()

class Casts(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()

class Faves(models.Model):
    post = models.ForeignKey(**---CASTS-OR-ARTICLES---**)
    user = models.ForeignKey(User,unique=True) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2009-05-19T09:59:09.680

这是我的做法：

```
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import fields

class Photo(models.Model):
    picture = models.ImageField(null=True, upload_to='./images/')
    caption = models.CharField(_("Optional caption"),max_length=100,null=True, blank=True)

    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = fields.GenericForeignKey('content_type', 'object_id')

class Article(models.Model):
    ....
    images     = fields.GenericRelation(Photo) 
```

你会添加类似的东西

```
 content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = fields.GenericForeignKey('content_type', 'object_id') 
```

致最爱和

```
 fields.GenericRelation(Faves) 
```

到文章和演员

[内容类型文档](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#generic-relations)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-19T10:11:44.863

这是一种方法。（注意模型是单数的，Django 会自动为你复数。）

```
class Article(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()

class Cast(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()

FAVE_CHOICES = ( 
    ('A','Article'),
    ('C','Cast'),
)
class Fave(models.Model):
    type_of_fave = models.CharField( max_length=1, choices=FAVE_CHOICES )
    cast = models.ForeignKey(Casts,null=True)
    article= models.ForeigKey(Articles,null=True)
    user = models.ForeignKey(User,unique=True) 
```

这很少会带来深刻的问题。根据您的用例，它可能需要一些巧妙的类方法。

# objective-c - Objective C 中的 XML 解析

> ID：881801
> 
> 赞同：-1
> 
> 时间：2009-05-19T09:29:45.060
> 
> 标签：objective-c, xml

```
NSString * myxml=@"<ticketRequestOut>
  <ticketsCount>2</ticketsCount>
  <tickets>
    <ticket>
      <ticketData>006Cbm5ubm53bm53bndub</ticketData>
      <ticketId>6</ticketId>
    </ticket>
    <ticket>
      <ticketData>00BCbndub8</ticketData>
      <ticketId>7</ticketId>
    </ticket>
  </tickets>
</ticketRequestOut>"; 
```

如何在 Objective-C 中解析这个字符串？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T10:11:02.620

您的字符串看起来不包含 XML，但可以使用 NSXMLParser 实现的方法在 Objective-C 中解析 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:24:15.087

阅读[文档](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/NSXML_Concepts/Articles/TraversingTree.html#//apple_ref/doc/uid/TP40001257)。

# mysql - 故障排除一致的“SQLException：超过锁定等待超时”

> ID：881810
> 
> 赞同：9
> 
> 时间：2009-05-19T09:31:38.363
> 
> 标签：mysql, jdbc, transactions, locking, quartz-scheduler

我有一个运行 Quartz 1.6.1 w/persistent job store 的应用程序，使用 MySQL 5.1 作为数据库。该应用程序在 Tomcat6 中可以正常启动。在某些时候，它开始在每次启动时抛出以下异常：

```
- MisfireHandler: Error handling misfires: Failure obtaining db row lock: Lock wait timeout exceeded; try restarting transaction
org.quartz.impl.jdbcjobstore.LockException: Failure obtaining db row lock: Lock wait timeout exceeded; try restarting transaction [See nested exception: java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction]
    at org.quartz.impl.jdbcjobstore.StdRowLockSemaphore.executeSQL(StdRowLockSemaphore.java:112)
    at org.quartz.impl.jdbcjobstore.DBSemaphore.obtainLock(DBSemaphore.java:112)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.doRecoverMisfires(JobStoreSupport.java:3075)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$MisfireHandler.manage(JobStoreSupport.java:3838)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$MisfireHandler.run(JobStoreSupport.java:3858)
Caused by: java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
    at org.quartz.impl.jdbcjobstore.StdRowLockSemaphore.executeSQL(StdRowLockSemaphore.java:92)
    ... 4 more 
```

我应该提到这个应用程序还利用 JPA w/Hibernate 使用 C3P0 进行数据源连接池。这个异常总是在 JPA 完成更新我的模式后直接抛出。

首先，我升级到 Quartz 1.6.5，异常消失了，但应用程序似乎被冻结了。日志中的最后一件事 - 曾经是异常的地方 - 是：

```
...hbm2ddl stuff...
2969 [Thread-1] INFO org.hibernate.tool.hbm2ddl.SchemaUpdate - schema update complete
- Handling 6 trigger(s) that missed their scheduled fire-time. 
```

之后什么都没有，并且 webapp 不为请求提供服务；他们只是无限期地挂起。

当我在异常发生后立即使用*SHOW INNODB STATUS运行***mysql**命令行客户端时，它确实始终显示两个可疑事务：

 *```
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 49, signal count 49
Mutex spin waits 0, rounds 2100, OS waits 0
RW-shared spins 115, OS waits 49; RW-excl spins 0, OS waits 0
------------
TRANSACTIONS
------------
Trx id counter 0 165688
Purge done for trx's n:o < 0 165685 undo n:o < 0 0
History list length 12
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0 0, not started, OS thread id 5012
MySQL thread id 8, query id 1798 localhost 127.0.0.1 root
SHOW INNODB STATUS
---TRANSACTION 0 165687, ACTIVE 300 sec, OS thread id 3772
2 lock struct(s), heap size 320, 1 row lock(s)
MySQL thread id 30, query id 1795 localhost 127.0.0.1 my_app
---TRANSACTION 0 165685, ACTIVE 360 sec, OS thread id 5460
2 lock struct(s), heap size 320, 1 row lock(s), undo log entries 1
MySQL thread id 34, query id 1680 localhost 127.0.0.1 my_app 
```

我正在寻找有关如何进一步调查此问题的指导。也许如果我能以某种方式识别这两个交易的所有者，或者他们锁定了哪些资源？

**更新：我毫无问题地删除了***qrtz_simple_triggers*表中的所有行。然后我尝试在*qrtz_triggers*表上做同样的事情，我的 MySQL 客户端抛出了“超过锁定等待超时”错误。此时我停止了我的（仍然挂起的）应用程序，然后能够删除*qrtz_triggers*表的所有行。完成此操作后，我就能够成功启动我的应用程序。

看来我需要记录一个新的 Quartz 错误，但我希望能够给他们更多关于这里实际发生的事情的信息。那么，根据最初的问题，我该如何解决这些类型的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-03-29T20:37:02.517

您是否尝试过运行
`show processlist`
或
`show full processlist`
从 mysql 命令行运行？这些通常会显示锁定查询的完整 sql。它还将向您显示该进程运行该查询的时间。它可能会帮助您更接近答案。

# ruby - 如何查看 ruby 类的方法调用？（例如依赖注入、钩子、回调）

> ID：881811
> 
> 赞同：0
> 
> 时间：2009-05-19T09:32:40.030
> 
> 标签：ruby

我有一个 Populator 类，用于用随机数据填充数据库。我想用[rtui](http://github.com/nofxx/rtui/tree/master)进度条测量填充器的运行方法。但是，我不想在 Populater 类中调用进度条对象，而是希望有第三个类在调用 Populater 类中的某些方法时增加进度条。我想到的代码是这样的：

```
@populator = Populator.new
@pb = ProgressBar.new
Watcher.watch(@populator, :before, :add_record) do
  @pb.subject = "Adding a record..."
  @pb.inc
end 
```

Watcher 会在执行 @populator.add_record 之前调用 watch 块。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-07T15:16:51.350

您可能想看看[RCapture](http://code.google.com/p/rcapture/)，这是一个 Ruby 库，它允许使用简单且一致的接口在方法上放置挂钩。

克里斯托夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:38:00.707

我建议您查看[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。在真正需要之前，我会避免花哨的动态技巧，观察者模式很简单并且很好理解。

还要检查ruby​​ 标准库中的[Observable 类](http://www.ruby-doc.org/stdlib/libdoc/observer/rdoc/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T09:41:26.923

这样做不可行吗：

```
def watch(populator, when, dowhat)
    yield
    populator.add_record
end 
```

希望这可以帮助...

# php - PHP fopen 函数超时？

> ID：881816
> 
> 赞同：0
> 
> 时间：2009-05-19T09:33:25.287
> 
> 标签：php, fopen

知道为什么如果文件在我的服务器上并且我知道 url 是正确的，为什么 fopen 会超时？

更新：对不起，我应该提到这是在 php.ini 中。代码是：

```
fopen($url, 'r'); 
```

如果我输入文件的相对路径，它会起作用，但如果 $url 是我服务器中的 url 则不起作用（但它适用于 google.com）。谢谢您的帮助。

阿莱特尼克的回答是对的。只有当我通过以太网接口访问我自己的服务器文件时才会出现此问题。我怎样才能解决这个问题？我需要能够从以太网接口访问文件，因为 url 是动态加载的（它是从 wordpress cms 生成的，所以从技术上讲，url 在我的服务器上并不作为文件存在）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T09:39:37.427

你可以使用 ini_set('default_socket_timeout',2); 在打开 fopen $url 之前。这实际上设置了默认的套接字连接超时而不响应。Stream_set_timeout 在通过 fopn 或套接字打开函数建立的流上设置超时。试试这个可能对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T10:16:29.550

您似乎正在尝试使用 HTTP 协议从同一服务器上运行的程序*从您自己的服务器下载文件？*

如果是这样，超时问题很可能与 Web 服务器或网络配置有关。超时通常只会发生，因为：

1.  服务器确实需要很长时间才能发回答案，或者
2.  TCP 连接被阻塞

例如，`www.example.com`如果这些查询来自以太网接口，您的本地防火墙规则可能只允许访问，但本地建立的连接会尝试通过环回接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:52:13.343

也许您的“allow_url_fopen”设置为“关闭”检查您的 php.ini 文件或 phpinfo()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T10:11:40.513

如果您尝试获取 URL 的 HTML，我建议使用 curl 而不是 fopen。

fopen 最好用于本地文件，因为它不“知道”如何处理网络资源的特性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T10:13:27.077

检查对[fopen 文档](http://php.net/manual/en/function.fopen.php)的评论。里面有很多金子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-03-10T12:54:53.660

我花了很长时间才解决这个问题，但在这里我找到了，感谢 Alnitak。**在 URL 中使用 localhost 而不是主机名打开文件**是我的诀窍。

# java - 组合 TimeItem 和 DateItem 值

> ID：881818
> 
> 赞同：1
> 
> 时间：2009-05-19T09:34:10.307
> 
> 标签：java, gwt, smartgwt, gwt-rpc, gwt-ext

我必须在 smartgwt 中将 TimeItem 的时间值和 DateItem 中的日期值结合起来。在输出中我想要 java.util.Date 的日期对象。我试图将这两者结合起来。我做不到。

示例代码是：

```
DateItem date=new DateItem();
TimeItem time=new TimeItem();
DynamicForm form=new DynamicForm();
form.setFields(date,time);

// java.util.Date selectedDate= ? Here I need the output 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T17:30:17.217

我还没有尝试过，但这是我有根据的猜测：

您可以使用包含时间的日期格式设置 dateItem.setInputFormat(...) 和 dateItem.setDisplayFormat(...)。

# c# - 如何使用 SQLSERVERSMO 的 com 库？

> ID：881819
> 
> 赞同：0
> 
> 时间：2009-05-19T09:34:13.070
> 
> 标签：c#, .net, sql-server, sql-server-2005, c++-cli

我创建了一个 com 库，通过它我可以在 VS2005 中使用 SMo 命名空间发现 SQLVolume。现在我想在 VS2003 中使用这个 com 库在安装了 vs2003 的另一台机器上发现相同的 sqlvolumes。

我可以这样使用它吗？我已经使用 VS2005 版本创建了一个 COM，现在我想在 VS2003 中使用它，这可能吗？

我要求你们不要将此标记为重复，因为我需要有效的答案。

```
using System;

using System.Data.SqlClient;

using Microsoft.Win32;

using Microsoft.SqlServer.Management.Smo;

using Microsoft.SqlServer.Management.Common;

using System.Data;

public interface ICalculator

{

 void Show();

};

namespace ManagedDLL
{
    public class ManagedClass : ICalculator
    {

        public void Show()
        {

            Console.WriteLine("from managed class");
            Console.WriteLine("c# "); Console.WriteLine("c#");
            DataTable dt = new DataTable();
            string srvname,filepath; 

            //evaluates local instances of SQLSERVER
            dt = SmoApplication.EnumAvailableSqlServers(true);
            Console.WriteLine("Local Instances are \n");
            foreach (DataRow dr in dt.Rows)
                Console.WriteLine(dr["Name"]);

            foreach (DataRow dr in dt.Rows)
            {
                srvname = (string)dr["name"];

                Console.WriteLine("\nConnecting to Server " + srvname + "\n\nDiscovering Volumes...\n\nDiscovering Sql2005 Volumes for the Host " + srvname.ToLower() + "\n");
                Console.WriteLine("\nHostName   : " + srvname.ToLower() + "\n");
                Server srv = new Server(srvname);
                Console.WriteLine(" Server Name \n" + srv.Name);
                foreach( Database db in srv.Databases)
                {
                    filepath = db.PrimaryFilePath;
                    Console.WriteLine("File Path : " + filepath + "\\" + db.Name + ".mdf \n");
                    Console.WriteLine("File Path : " + filepath + "\\" + db.Name + ".ldf \n");
                }

            }//foreach

        }
    }

} 
```

我已经为这个类创建了一个com库，我必须在vs2003中使用这个com库，还有一件事是smo命名空间。

.net f/w 1.1 不支持上述代码。我该怎么做？

消费时出现以下错误：

Comssss.exe 中 0x7c812a6b 处的未处理异常：Microsoft C++ 异常：_com_error @ 0x0012fcbc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-30T07:55:03.163

您不能将框架的两个版本加载到同一个进程中。VS2003 已经在使用 .NET 1.1，因此您将无法加载需要 .NET 2.0 的进程内 COM 组件。

您也许可以使用 DCOM 并将其置于进程之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:43:46.900

是的，如果您安装了 .net 2 运行时，VS2003 COM 互操作应该可以正常工作。

你这样做有什么具体问题吗？如果是这样，您能告诉我们您遇到的问题吗？

# multithreading - InterlockedExchange 和内存对齐

> ID：881820
> 
> 赞同：8
> 
> 时间：2009-05-19T09:34:48.997
> 
> 标签：multithreading, winapi, x86, interlocked

我很困惑微软说 InterlockedExchange 需要内存对齐，但是英特尔文档说 LOCK 不需要内存对齐。我错过了什么，还是什么？谢谢

# **来自 Microsoft MSDN 库**

平台 SDK：DLL、进程和线程 InterlockedExchange

Target 参数指向的变量必须**在 32 位边界上对齐**；否则，此函数在多处理器 x86 系统和任何非 x86 系统**上的行为将无法预测。**

# **来自英特尔软件开发人员手册；**

*   LOCK 指令 使处理器的 LOCK# 信号在伴随指令的执行期间被断言（将指令变成原子指令）。在多处理器环境中，LOCK# 信号确保处理器在信号被断言时**独占使用任何共享内存。**

    LOCK 前缀的完整性不受内存字段对齐的影响。 **对于任意未对齐的字段，会观察到内存锁定。**

*   P6 和更新的处理器系列中的内存排序

    **锁定指令有一个总顺序。**

*   软件控制总线锁定

    总线锁的完整性不受内存字段对齐的影响。LOCK 语义遵循**更新整个操作数所需的尽可能多的总线周期。**但是，建议锁定访问在其自然边界上对齐以获得更好的系统性能： • 8 位访问的任何边界（锁定或其他）。•锁定字访问的16 位边界。• 锁定双字访问的32 位边界。• 锁定四字访问的64 位边界。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-16T20:12:30.400

曾几何时，Microsoft 在 x86 以外的处理器上支持 WindowsNT，例如 MIPS、PowerPC 和 Alpha。这些处理器都需要对齐它们的互锁指令，因此微软在他们的规范中提出了要求，以确保这些原语可以移植到不同的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T08:50:26.497

即使锁定前缀不需要对齐内存，并且可能用于实现 InterlockedExchange() 的 cmpxchg 操作也不需要对齐，但如果操作系统启用了对齐检查，那么 cmpxchg 将引发对齐检查异常 (AC ) 当使用未对齐的操作数执行时。检查 cmpxchg 和类似的文档，查看保护模式异常列表。我不确定 Windows 是否启用对齐检查，但这不会让我感到惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T10:58:39.260

嘿，[我](https://stackoverflow.com/users/67819?tab=recent#sort-top)回答了一些与此相关的问题，也请记住；

1.  没有字节级别的**InterlockedExchange ，****但是**有一个 16 位*短的**InterlockedExchange*。
****   您提到的文档差异可能只是一些文档疏忽。*   如果你想进行字节/位级别的原子访问，有很多方法可以使用现有的内在函数 Interlocked[ **And8** |Or8|Xor8]*   您进行高性能锁定的任何操作（使用您讨论的机器代码）都不应未对齐操作（*性能反模式*）*   xchg（具有隐式 LOCK 前缀的优化指令，由于能够缓存锁定并避免对主存储器的完全总线锁定而进行了优化）。**CAN**做8位联锁操作。***

 ***我几乎忘记了，从 Intel 的[TBB](http://www.threadingbuildingblocks.org/)中，他们定义了 Load/Store 8bit，不使用隐式或显式锁定（在某些情况下）；

```
.code 
    ALIGN 4
    PUBLIC c __TBB_machine_load8
__TBB_machine_Load8:
    ; If location is on stack, compiler may have failed to align it correctly, so we do dynamic check.
    mov ecx,4[esp]
    test ecx,7
    jne load_slow
    ; Load within a cache line
    sub esp,12
    fild qword ptr [ecx]
    fistp qword ptr [esp]
    mov eax,[esp]
    mov edx,4[esp]
    add esp,12
    ret

EXTRN __TBB_machine_store8_slow:PROC
.code 
    ALIGN 4
    PUBLIC c __TBB_machine_store8
__TBB_machine_Store8:
    ; If location is on stack, compiler may have failed to align it correctly, so we do dynamic check.
    mov ecx,4[esp]
    test ecx,7
    jne __TBB_machine_store8_slow ;; tail call to tbb_misc.cpp
    fild qword ptr 8[esp]
    fistp qword ptr [ecx]
    ret
end 
```

无论如何，希望这至少能为你解决一些问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2011-03-03T09:39:34.407

我不明白你的英特尔信息来自哪里。

对我来说，很明显英特尔非常关心对齐和/或跨越缓存线。

例如，在 Core-i7 处理器上，您仍然必须确保您的数据不会跨越缓存线，否则不能保证操作是原子的。

在第 3-I 卷，系统编程，对于 x86/x64 英特尔明确指出：

> # 8.1.1 保证原子操作
> 
> Intel486 处理器（以及之后的更新处理器）保证以下基本内存操作将始终以原子方式执行：
> 
> *   读取或写入一个字节
> *   读取或写入在 16 位边界上对齐的字
> *   读取或写入在 32 位边界上对齐的双字
> 
> Pentium 处理器（以及之后的更新处理器）保证以下额外的内存操作将始终以原子方式执行：
> 
> *   读取或写入在 64 位边界上对齐的四字
> *   对适合 32 位数据总线的未缓存内存位置进行 16 位访问
> 
> P6 系列处理器（以及之后的更新处理器）保证以下附加内存操作将始终以原子方式执行：
> 
> *   对适合高速缓存行的高速缓存内存进行未对齐的 16、32 和 64 位访问
> 
> Intel Core 2 Duo、Intel® Atom™、Intel Core Duo、Pentium M、Pentium 4、Intel Xeon、P6 系列、Pentium 和Intel486 处理器。Intel Core 2 Duo、Intel Atom、Intel Core Duo、Pentium M、Pentium 4、Intel Xeon 和 P6 系列处理器提供总线控制信号，允许外部存储器子系统使分离访问原子化；但是，不对齐的数据访问会严重影响处理器的性能，应该避免。

# ruby - 您更喜欢如何在 Ruby 中定义类方法？

> ID：881821
> 
> 赞同：9
> 
> 时间：2009-05-19T09:35:05.297
> 
> 标签：ruby

[John Nunemaker](http://addictedtonew.com/)最近发表了一篇关于在 Ruby[中定义类方法的各种方法的](http://railstips.org/2009/5/11/class-and-instance-methods-in-ruby)博客，给出了以下三种选择：

```
# Way 1
class Foo
  def self.bar
    puts 'class method'
  end
end

# Way 2
class Foo
  class << self
    def bar
      puts 'class method'
    end
  end
end

# Way 3
class Foo; end
def Foo.bar
  puts 'class method'
end 
```

*   你首选的方法是什么？
*   除了上述之外，您还喜欢其他的东西吗？
*   如果你使用不止一种方式，你在什么情况下使用它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-19T09:42:56.700

我一直使用方式1：

```
class Foo
  def self.bar
    puts 'class method'
  end
end 
```

它并不冗长，它将方法保持在类的相同上下文中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T13:05:31.693

我通常更喜欢`def self.foo`单个方法，以及`class << self`很长的类方法。我觉得它区分了类定义的类方法部分和实例方法部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:46:17.243

我更喜欢方式 1，因为它不区分上下文。我不喜欢跳到文件中间然后不得不向上或向下滚动以查看缩进是否意味着我在一个`class << self`块中，或者它是否只是一个嵌套模块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T12:35:32.353

同意大多数用户的看法。我倾向于主要使用

```
# Way 1
class Foo
  def self.bar
    puts 'class method'
  end
end 
```

如果我没记错的话，在实用程序员元编程讲座（我推荐）中显示了一些小的差异，这些差异与类代码的调用和执行方式有关。

不过，它们很小，而且大部分是我们不必在正常情况下处理的事情。看看我是否可以检查出来并发布它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T01:03:27.433

我认为添加方法的 << 太不寻常了（尽管我很乐意将 << 与字符串和 IO 一起使用）。

我避免使用 Foo.bar，因为这意味着重复自己。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T17:10:36.633

我使用方式#3，但我认为方式#1 也很棒。这取决于您的使用情况。如果您希望您的代码能够“剪切/粘贴”到其他模块和类中，那么方式 #1 会更好。我使用方式 #3 实际上使剪切/粘贴代码更加痛苦，b/c Ruby 的口头禅是“不要重复自己”，所以你不应该经常剪切/粘贴代码。

# c - 如何删除这些 C 宏之间的重复？

> ID：881825
> 
> 赞同：1
> 
> 时间：2009-05-19T09:36:44.670
> 
> 标签：c, macros, c-preprocessor, code-duplication

我有以下几个用于创建测试函数的**C**预处理器宏：

```
// Defines a test function in the active suite
#define test(name)\
    void test_##name();\
    SuiteAppender test_##name##_appender(TestSuite::active(), test_##name);\
    void test_##name() 
```

像这样使用：

```
test(TestName) {
    // Test code here
} 
```

和

```
// Defines a test function in the specified suite
#define testInSuite(name, suite)\
    void test_##name();\
    SuiteAppender test_##name##_appender(suite, test_##name);\
    void test_##name() 
```

像这样使用：

```
test(TestName, TestSuiteName) {
    // Test code here
} 
```

如何删除两个宏之间的重复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T09:42:55.080

```
#define test(name) testInSuite( name, TestSuite::active() ) 
```

但是，这不会减少发出的 C 和机器代码的数量，只会删除逻辑重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:44:44.093

尝试：

```
#define test(name) testInSuite (name, TestSuite::active()) 
```

# ruby-on-rails - 为 RSpec 生成缺失的规范文件

> ID：881830
> 
> 赞同：16
> 
> 时间：2009-05-19T09:38:32.093
> 
> 标签：ruby-on-rails, ruby, rspec, specifications

是否有任何命令可用于为现有模型/控制器生成所有缺少的规范文件？我有一个项目，其中有几个模型，这些模型是在没有规范文件的情况下生成的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2011-06-03T06:58:16.867

在用于 Rails 3 的 rspec-rails-2 中，所有 rspec 生成器都已被删除。

您可以通过运行 rails 模型生成器来解决此问题。您可以添加 -s 以跳过任何现有文件，并添加 --migration=false 以跳过创建迁移文件。

像这样：

```
rails generate model example -s --migration=false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T12:16:42.383

您可以只运行生成器并忽略模型/迁移/夹具。

```
ruby script/generate rspec_model User --skip-migration --skip-fixture --skip 
```

我一直在考虑写一些东西来做到这一点，但其他人没有任何兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T00:38:14.253

如果缺少规范的数量相当少，您可以简单地`rails generate`为缺少规范的每个组件运行命令。

当发生冲突时，只需选择不覆盖原始文件。生成器将忽略现有文件并生成丢失的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T18:01:28.923

[https://gist.github.com/omenking/7774140](https://gist.github.com/omenking/7774140)

```
require 'fileutils'
namespace :spec do

  def progress name, x, y
    print "\r #{name}: #{x}/#{y} %6.2f%%" % [x.to_f/y * 100]
  end

  def generate_files name
    kind       = name.to_s.singularize
    collection = Dir.glob Rails.root.join('app',name.to_s,'**','*').to_s
    root       = Rails.root.join('app',name.to_s).to_s<<'/'
    ext        = case name
                   when :controllers then  '_controller.rb'
                   when :models      then  '.rb'
                end
    count = collection.count
    collection.each_with_index do |i,index| 
      `rails g #{kind} #{$1} -s` if i =~ /#{root}(.+)#{ext}/
      progress name, index, count
    end
  end

  task generate_missing: :environment do
    generate_files :controllers
    generate_files :models
  end
end

# if you dont want certian things generated than
# configure your generators in your application.rb eg.
#
#   config.generators do |g|
#     g.orm :active_record
#     g.template_engine :haml
#     g.stylesheets false
#     g.javascripts false
#     g.test_framework :rspec,
#                      fixture: false,
#                      fixture_replacement: nil
#   end
# 
```

# silverlight - 动态创建的 Silverlight 控件不可见

> ID：881831
> 
> 赞同：1
> 
> 时间：2009-05-19T09:38:47.053
> 
> 标签：silverlight, dynamic, visibility

我在 Silverlight 2 中动态添加自定义控件，但它们不可见。但是，在检查 Silverlight Spy 中的可视化树时，我注意到它们的可见性属性是可见的，将其切换到折叠并返回可见会导致控件变得可见。

我可能做错了什么？关于我应该寻找什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T13:46:12.577

不需要 ParentControl 上的 UpdateLayout()。

但不要忘记 my_parent_control.Add(UIElement mynewcontrol);

即 my_parent_control 可以是堆栈面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:40:27.703

首先想到的是您使用哪种容器对象来创建动态控件（如果有的话）？

我可以看到在不使用容器的情况下添加控件可能会给您带来一些问题。我不能说我已经动态地创建了许多控件对象，但我认为将您的项目添加到堆栈面板将是最简单的实现。

一个好的测试用例可能是创建一个网格并在创建控件时为其分配网格位置。

这是有关如何执行此操作的[链接。](http://jesseliberty.com/2008/05/05/creating-controls-in-code/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:42:36.950

您是否尝试过在要添加它们的控件上调用 UpdateLayout()？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T06:59:40.433

我已经能够解决这个问题，这个问题发生在我将时间段动态添加到时间线时。

我动态添加到画布的控件具有以下结构。

```
<Path x:Name="ribbonItem" Fill="Green">
  <Path.Data>
    <GeometryGroup>
      <RectangleGeometry x:Name="ribbonItemBackground" />
    </GeometryGroup>
  </Path.Data>
</Path> 
```

RectangleGeometry 的尺寸取决于三个输入，时间线栏和时间线项目（我正在添加的内容）的日期和时间范围以及栏（画布）的尺寸。

当设置对象的任何 BarRange、ItemRange 或 BarSize 属性时，将调用以下方法。

```
private void Resize()
{
if (_itemRange != null && _barRange != null && _barSize != Size.Empty)
  {
    ribbonItemBackground.Rect = ItemRectangle();
  }
} 
```

这导致了我的问题中提到的绘图问题，解决方案是添加

```
ribbonItem.InvalidateMeasure(); 
```

设置ribbonItemBackground.Rect 后立即。

# css - 关于 css 中的 @import

> ID：881837
> 
> 赞同：0
> 
> 时间：2009-05-19T09:42:28.870
> 
> 标签：css, import

我想我把它分开是因为 css 变大了，并且做导入。

```
@import url("aaa.css"); 
       .
       .
       .
@import url("zzz.css"); 
```

有导入文件的上限数量吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T09:48:34.147

Internet Explorer 最多有 32 个 @import。每个 css 文件甚至有 ~288kb 的限制。

Firefox 和 Opera 不应受到限制。

# asp.net-mvc - 模型绑定列表

> ID：881838
> 
> 赞同：0
> 
> 时间：2009-05-19T09:42:49.620
> 
> 标签：asp.net-mvc, list, modelbinders, viewdata

我有一个控制器动作，比如

```
public class Question {   
   public int Id { get;set; }
   public string Question { get;set; }
   public string Answer { get;set; } 
}

public ActionResult Questions() 
{   
  return View(GetQuestions()); 
}

public ActionResult SaveAnswers(List<Question> answers) 
{  
  ... 
} 
```

视图> 看起来像：

```
<% for (int i = 0; i < Model.Count; i++) { %>   
 <div>
  <%= Html.Hidden(i.ToString() + ".Id") %>
  <%= Model[i].Question %>
  <%= Html.TextBox(i.ToString() + ".Answer") %>
 </div> 
<% } %> 
```

显然这种观点是行不通的。我只是无法访问视图中的列表。

这方面的文档也已经过时了，似乎很多模型绑定列表的功能在 beta 版中都发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T10:49:33.027

看看[这个](https://stackoverflow.com/questions/711184/asp-net-mvc-example-of-editing-multiple-child-records/)和[这个问题](https://stackoverflow.com/questions/798127/more-complexreal-life-modelbinding/)。还有[这篇博文](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)。

**编辑：**至于访问视图中的模型。您确定您使用以下属性声明了您的吗？

```
<%@ Page Language="C#" 
    Inherits="System.Web.Mvc.ViewPage<List<Namespace.Question>>" %>
//Assuming the GetQuestions() method returns a list of question objects. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T11:09:25.777

我认为 Scott Hanselman 的帖子可能提供了答案。但是，您似乎试图通过在帖子中返回来绑定您查看对匿名对象的引用`...0.Answer=answer...`

相反，我相信您应该将您的字段绑定到引用答案 [index].Answer 的“列表答案”。

尝试以下操作：

```
<% for (int i = 0; i < Model.Count; i++) { %>   
 <div>
  <%= Html.Hidden("answer["+i.ToString() + "].Id", Model["+i.ToString() + "].Id) %>
  <%= Model[i].Question %>
  <%= Html.TextBox("answer["+i.ToString() + "].Answer", Model["+i.ToString() + "].Answer) %>
 </div> 
<% } %> 
```

理查德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-12T14:00:44.150

答案是不使用 html 助手。

```
<% for (int i = 0; i < Model.Count; i++) { %> 
  <div>
     <input type="hidden" name="answers[<%= i %>].Id" id="answers_<%= i %>_Id" value="<%= Model[i].Id %>" />
     <input type="text" name="answers[<%= i %>].Answer" id="answers_<%= i %>_Answer" value="<%= Model[i].Answer %>" />
  </div> 
<% } %> 
```

不是很漂亮，但有效。重要的是 Name 和 Id 需要不同。名称允许有“[”、“]”，但 id 不是。

# reporting-services - RDLC 报告：超过一页？自定义分页符？

> ID：881842
> 
> 赞同：0
> 
> 时间：2009-05-19T09:43:20.147
> 
> 标签：reporting-services, rdlc, report, page-break

我有一个 Microsoft Reporting Services 报告（本地报告，VS2005），并且正在尝试生成一个相当棘手的报告......

我有两个从 SQL 查询返回的表。第一个是一个主表，其中包含与第二个记录集相对应的集合 ID 列表，并且具有如下记录集：

```
+----------------------+
| SetID                |
+----------------------+
| 1                    |
| 2                    |
| 3                    |
| ...                  |
|                      | 
```

第二个表是 bjorks 的列表，我们称它们为。它看起来像这样：

```
+----------+-------+-----------+-----------
| BjorkID  | SetID | BjorkName | ...
+----------+-------+-----------+-----------
| 1        | 1     | Bob       |
| 2        | 1     | Jones     |
| 3        | 1     | Smith     |
| 4        | 2     | Jack      |
| 5        | 2     | Daniels   |
| 6        | 3     | Moo       |
| 7        | 3     | Bean      |
| 8        | 3     | Bond      |
| 9        | 3     | Jim       |
| ...      | ...   | ...       |
|          |       |           | 
```

现在，我需要为每个 Set 生成一个打印一页的报告，并且每个 Set 的页面都包含其 Bjorks 的列表。

谁能指出我正确的方向来破坏 RDLC 这样做？:)

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T17:46:55.943

您只需使用第二个表/数据集以及表或列表上的父组和详细信息组即可完成任务。

SetID 上的父组。BjorkID 上的详细信息组。相应地设置分页符。

高温高压

# sql - 来自 microsoft sql server 实例的操作系统信息

> ID：881844
> 
> 赞同：2
> 
> 时间：2009-05-19T09:43:31.303
> 
> 标签：sql, sql-server

有谁知道如何通过 sql 从 microsoft sql server 实例获取操作系统信息？

使用[SERVERPROPERTY](http://msdn.microsoft.com/en-us/library/ms174396.aspx "服务器属性")可以获得一些信息，但我需要获取操作系统，例如“Microsoft Windows NT 5.2 (3790)”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T10:01:23.043

从@@VERSION 中提取

例如：

```
PRINT @@VERSION 
```

另一种方法是构建 CLR 函数或存储过程。这是一个示例代码：

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;

public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlString Function1()
    {
        return new SqlString(System.Environment.OSVersion.ToString());
    }
}; 
```

此示例应输出以下内容：

```
SELECT dbo.Function1()

Microsoft Windows NT 6.0.6001 Service Pack 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T09:47:09.937

我以前用过这样的东西：

exec master..xp_cmdshell 'systeminfo'

# asp.net - 如何显示插入或取消按钮而不是详细信息视图的链接？

> ID：881845
> 
> 赞同：0
> 
> 时间：2009-05-19T09:43:40.600
> 
> 标签：asp.net

如何显示插入或取消按钮而不是详细信息视图的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T09:56:33.147

您可以在`<fields>`标签内使用 CommandField

```
 <Fields>
            <asp:CommandField ButtonType="Button" />
        </Fields> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-06T19:57:13.143

在 DetailsView 上查找其他信息时遇到了这个问题。上述方法的另一种方法是将命令字段更改为模板字段（从详细信息视图的编辑字段对话框中，选择所选字段列表中的命令字段条目，然后单击“将此字段转换为模板字段”链接）。然后，回到源代码视图，您将看到如下内容：

```
 <asp:TemplateField HeaderText="Actions">
        <InsertItemTemplate>
             <asp:ImageButton ID="btnInsertAccept" runat="server" CausesValidation="True"  CommandName="Insert" AlternateText="Insert" ImageUrl="images/16x16.check.gif" ToolTip="Click to insert this new division." ValidationGroup="ValidationInsert" />&nbsp;
             <asp:ImageButton ID="btnInsertCancel" runat="server" CausesValidation="False" CommandName="Cancel" AlternateText="Cancel" ImageUrl="images/cancel.png" ToolTip="Click to cancel inserting this new division." />
        </InsertItemTemplate>
   </asp:TemplateField> 
```

现在，还会有 ItemTemplate 和 EditItemTemplate 条目，但你明白了。我已经将默认的 asp:LinkBut​​ton 控件更改为 ImageButtons，但您也可以使用普通按钮，只要适合您的 UI 设计。重要的部分是每个控件上的 CommandName 条目——无论是插入、更新、删除还是取消——正是该命令名称导致适当的操作发生。

希望能给您额外的帮助。

# cruisecontrol.net - 在开发者/构建机器上部署 biztalk

> ID：881851
> 
> 赞同：3
> 
> 时间：2009-05-19T09:45:27.057
> 
> 标签：cruisecontrol.net, nant, biztalk

对于每个 BizTalk 应用程序，我们有一个 setup.bat，它创建 BizTalk 应用程序、创建文件删除、构建代码、gacs、注册资源、创建端口 - 使用 vcscripts - 并应用绑定。我们还有一个 cleanup.bat，它与 setup.bat 执行相反的操作

然后这些脚本通过 nant 运行，最终被 Cruisecontrol.net 使用。这些脚本允许我们在装有 BizTalk 的机器上设置 BizTalk 应用程序，并下载最新的源代码和工具。

其他人如何以可重复和自动化的方式“引导”BizTalk 应用程序？

我见过 BizTalk nant 任务，它们比 vbscript 快吗？

设置。bat 在我们的 BizTalk 构建机器上运行速度慢了大约 3 倍！磁盘、CPU、内存、分页都很舒服。在运行任何测试之前，完整的构建/部署需要 2 小时 - 大约有 20 个 BizTalk 应用程序和各种 C# 服务、自定义组件。除了新机器或重建之外——我们的构建机器有 4 gig ram、双超线程内核和大约 5 年的服务器——有什么想法吗？你建造什么样的机器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:44:18.230

Michael Stephenson 写了一些关于自动化 BizTalk 构建的精彩博客，请查看[链接文本](http://www.geekswithblogs.com/michaelstephenson)

我们使用了 Mike 发布到 codeplex 的实用程序，它将为 BizTalk 应用程序创建一个 MS 构建脚本 - 这对我们来说非常有效。您可以在[链接文本中找到它](http://www.codeplex.com/BizTalkMsBuildTool)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-21T21:55:13.247

我只是通过 BizTalk Administrator 创建一个 MSI。我将绑定信息与 MSI 分开，因此开发人员需要通过导入绑定文件来绑定端口，但这很容易。

在需要将程序集部署到 gac 中的情况下，我使用运行 gacutil 的批处理文件，然后安装 MSI，最后绑定端口。

这种方法易于维护，更重要的是，其他人易于理解和排除故障。

关于 BizTalk 是一种资源消耗，首先查看 SQL Server 并确保将其限制在一些合理的内存量（默认情况下它会占用任何可能的内存 - 这通常是最可用的内存）。仅这一变化就会产生重大影响。

您还应该考虑在开发过程中只使用最少的软件——这意味着在开发人员编译和部署时禁用防病毒或排除目录被无用的扫描。在开发 BizTalk 解决方案时，避免在 RAM 很少（2Gb 或更少）的系统上使用 MS Word、Messenger 等。

在开发人员的工作站上，启用 BizTalk 消息框存档和清除作业，如下所述：

[http://msdn.microsoft.com/en-us/library/aa560754.aspx](http://msdn.microsoft.com/en-us/library/aa560754.aspx)

保持小型数据库可以节省宝贵的磁盘空间，有助于提高整体性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T05:02:40.070

我们也将 NAnt 用于 BizTalk 部署。具体来说，我们结合调用[BizTalk 相关的 NAntContrib 任务](http://nantcontrib.sourceforge.net/release/latest/help/tasks/)（均以**bts**开头）和使用[`<exec`>](http://nant.sourceforge.net/release/latest/help/tasks/exec.html)任务直接调用命令行[btstask.exe](http://technet.microsoft.com/en-us/library/aa559686.aspx)。

在某种程度上，它们都使用相同的底层技术与 BizTalk 服务器通信，因此很难说 NAnt 是否比 VB 更快。

我会说，根据我的经验，BizTalk 似乎是一种资源*消耗*。由于很难改变这一点，我们唯一能控制的就是我们提供给它的资源数量。因此，如果构建花费的时间太长，并且一个人有时间/金钱这样做，那么就向它扔**更大更坏**的硬件。这通常是最便宜的方式，因为我们开发人员在构建时间上进行亚边际改进所花费的时间最终可能比硬件成本更高。例如，我们注意到迁移到 8GB 内存可以带来不同，从字面上改变整个体验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T09:28:06.007

有很多解决方案 - Rob Bowman 提到了 Michael Stephenson 的[msbuild 生成器](http://www.codeplex.com/BizTalkMsBuildTool) 同样在 codeplex 上，您可以找到Scott Colestock、Thomas Abraham 和 Tim Rayburn 的[另一个框架](http://biztalkdeployment.codeplex.com/)

我还与 Oslo 打交道，还有一个小[补充，但它没有这两个成熟的一半，但它确实使用了](http://btsdf.codeplex.com/)[SDC 任务](http://www.codeplex.com/sdctasks)，如果您希望创建自己的基于 msbuild 的解决方案，这是一个很好的起点。

# asp-classic - 在经典 ASP 中检测 Server.Transfer

> ID：881852
> 
> 赞同：1
> 
> 时间：2009-05-19T09:45:44.263
> 
> 标签：asp-classic

在经典 ASP 中，您如何检测到页面通过 Server.Transfer() 获得了控制权？

我无法将 URL 与当前的 ASP 文件名进行比较，因为代码存储在库中（包括在内）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T10:08:54.247

您可以检查是否`Request.ServerVariables("URL")`与当前页面匹配。对于 Server.Transfer，URL 仍然是请求的原始页面。

响应您的编辑：该页面需要将当前页面名称提供给库中的代码，否则该库没有任何东西可以与请求的 URL 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T08:14:57.613

如果没有调用 Transfer 的页面或执行转移到的页面的帮助，就无法实现这一点。可能后者将是执行此操作并调整库代码以接受其中有关传输的详细信息（如果有）的最佳位置。

# nhibernate - NHibernate Map 多对多连接表

> ID：881865
> 
> 赞同：3
> 
> 时间：2009-05-19T09:53:36.680
> 
> 标签：nhibernate, nhibernate-mapping

我的数据库结构如下所示：

```
Person
  Id
  Name
  FieldA
  FieldB

Phone
  Id
  Number

PersonPhone
  PhoneId
  PersonId
  IsDefault 
```

我对 Person 和 Phone 对象的 NHibernate 映射是直截了当的，它是我遇到困难的 PersonPhone。我想拥有一个 PersonPhone 对象的集合作为 Person 的一个属性，这将允许我拥有一个人的电话号码，并能够分辨哪个是一个人的“默认”或主要电话号码。

理想情况下，我希望我的 PersonPhone 对象看起来像这样：

```
public class PersonPhone
{
    public virtual Person Person { get; set; }
    public virtual Phone Phone { get; set; }
    public virtual bool IsDefault { get; set; }
} 
```

到目前为止，我对该表的 NHibernate 映射如下所示：

```
<class name="PersonPhone" table="PersonPhone">
    <composite-id>
        <key-property name="Person" column="PersonId" />
        <key-property name="Phone" column="PhoneId" />
    </composite-id>
    <property name="IsDefault" column="IsDefault"/>
</class> 
```

但是当 NHibernate 编译我的映射时，我收到一条错误消息：

无法编译映射文档：MyApp.Entities.PersonPhone.hbm.xml。NHibernate.MappingException：无法确定类型：MyApp.Entities.Person，MyApp.Entities，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null，对于列：NHibernate.Mapping.Column(PersonId)

关于如何映射的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T10:31:11.800

答案是使用复合键中的元素而不是键属性

```
<class name="PersonPhone" table="PersonPhone">
    <composite-id>
        <key-many-to-one name="Person" column="PersonId"></key-many-to-one>
        <key-many-to-one name="Phone" column="PhoneId"></key-many-to-one>
    </composite-id>
    <property name="IsDefault" column="IsDefault"/>
</class> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-17T16:36:56.797

我认为考虑Phone和Peron实体之间的多对多关系并摆脱PersonPhone实体更合适。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-10T12:09:26.587

要使用 Fluent NHibernate 设置相同的映射，请执行以下操作：

```
public class PersonPhoneMap : ClassMap<PersonPhone>
{
    public PersonPhoneMap()
    {
        CompositeId()
            .KeyReference(p => m.Person)
            .KeyReference(p => m.Phone);

        References(p => p.Person)
            .Column("PersonID");
        References(m => m.Phone)
            .Column("PhoneID");
        Map(p => p.IsDefault)
            .Column("IsDefault");
    }
} 
```

# data-structures - 使用 VList 的哈希表

> ID：881867
> 
> 赞同：5
> 
> 时间：2009-05-19T09:56:14.960
> 
> 标签：data-structures, haskell, functional-programming, hashtable, complexity-theory

Phil Bagwell 在他[2002 年关于 VList 数据结构的论文中](http://infoscience.epfl.ch/record/64410/files/techlists.pdf)指出，您可以使用 VList 来实现持久哈希表。然而，他对它如何工作的解释并没有包含太多细节，我也不明白。谁能给我更详细的解释，甚至是例子？

此外，在我看来，这种数据结构虽然可能具有与 Hashtable 相同的 big-O 复杂性，但会更慢，因为它会进行额外的查找。是否有人愿意详细分析慢了多少，最好包括缓存行为？在没有碰撞或碰撞很多的情况下，两者的性能关系如何变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T23:18:32.823

我看了这篇论文，它看起来*很*初步。事实上，没有发布更高版本，并且原版出现在 IFL（这是一个正在进行中的会议），这表明你可能在浪费你的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-10T19:56:57.870

嗯，该论文提出的数据结构似乎存在许多问题。

即兴发挥，首先提到的幼稚 vlist 似乎需要独特的参考，以便获得接近所提议的时间保证的任何东西。你失去了大部分分享尾巴的能力。您可以共享列表后面的小节点，但是当您将某些东西放到仍然处于活动状态的 vlist 的 cdr 上时，您最终不得不复制最大的 vlist 节点。该成本与复制整个列表的成本成正比。

通过后面提到的 2d 修改，它再次变为常量，但它是一个相当大的常量，因为您最终至少复制了页面列表（或更糟糕的是，vlist）的头部和列表中的第一页。

老实说，那里的功能哈希列表对我来说似乎没有多大意义。这只是一个简短的宣传，似乎被固定在另一篇无关的论文上，没有足够的细节来真正说明它的实用性。

# language-agnostic - 如何说服您的开发人员编写简短的方法？

> ID：881871
> 
> 赞同：34
> 
> 时间：2009-05-19T09:57:40.383
> 
> 标签：language-agnostic, metrics

长方法在以下几个方面是邪恶的：

*   他们很难理解
*   他们很难改变
*   它们很难重复使用
*   他们很难测试
*   他们的凝聚力低
*   它们可能具有高耦合
*   它们往往过于复杂

如何说服您的开发人员编写简短的方法？（武器是禁止的=）

来自[敏捷开发者的问题](http://www.agiledeveloper.com/blog/PermaLink.aspx?guid=8a745e85-2a34-4d9c-8c25-ca371530e281)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-19T10:03:06.973

要求他们为这些方法编写单元测试。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-19T11:25:12.597

这取决于您对“短”和“长”的定义。

当我听到有人说“写简短的方法”时，我立即反应很糟糕，因为我遇到了太多的人写的意大利面条，他们认为理想的方法是两行长：一行做尽可能小的工作单元，然后一行调用另一个方法。（你说长方法是邪恶的，因为“它们很难理解”？试着走进一个项目，其中每一个微不足道的动作都会产生一个调用堆栈 50 深的方法，并试图找出这 50 层中的哪一层是你需要更改的...)

另一方面，如果“简短”是指“独立且仅限于单个概念功能”，那么我完全赞成。但请记住，这不能简单地通过代码行来衡量。

而且，正如 tydok 指出的那样，用蜂蜜比用醋捕捉更多的苍蝇。试着告诉他们为什么你的方式是好的，而不是为什么他们的方式不好。如果你可以做到这一点，而无需对他们或他们的实践进行任何公开的比较或引用（除非他们特别询问你的想法与他们正在做的事情有什么关系），它会更好。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-05-19T10:07:12.847

你列出了缺点。尝试使用简短的方法列出您将获得的东西。具体例子。然后尝试再次说服他。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-05-19T10:23:01.440

我从某处读到这句话：

编写你的代码，就好像必须维护它的人是一个知道你住在哪里的暴力精神病一样。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-19T10:17:34.417

以我的经验，在这些情况下说服同行的最好方法是通过例子。找机会向他们展示你的代码，并与他们讨论短函数与长函数的好处。最终他们会自然而然地意识到什么是更好的，而不需要让他们感觉“糟糕”的程序员。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-05-19T12:17:33.037

**代码审查！**

我建议您尝试进行一些代码审查。通过这种方式，您可以就最佳实践和公司所遵循的任何格式举办一个小型研讨会。这增加了上下文，即短方法是一种使代码更易读、更容易理解并且符合 SRP 的方法。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-05-19T12:42:05.590

如果你试图解释好的设计，但人们只是不明白，或者只是拒绝明白，那就停止尝试。这不值得努力。你得到的只是你自己的坏名声。有些人只是没有希望。

基本上它归结为一些程序员只是不适合开发。他们可以理解已经编写的代码，但他们不能自己创建代码。

这些人应该被引导到支持角色，但不应该允许他们从事任何新的工作。支持是查看许多不同代码的好地方，所以也许几年后他们会看到好的设计的好处。

我确实喜欢其他人建议的代码审查的想法。这些草率的程序员不仅应该审查自己的代码，还应该参与对好的代码的审查。这将使他们有机会了解什么是好的代码。可能他们只是从未见过好的代码。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-05-19T15:19:34.650

为了扩展 rvanider 的答案，对代码执行圈复杂度分析确实能引起人们对大方法问题的关注；当我离开时，让人们改变的工作仍在进行中（对大方法的推动力太大）。

引爆点是当我们开始将圈复杂度与错误数据库联系起来的时候。一个超过 20 个非工厂的 CC 保证在 bug 数据库中有多个条目，并且这些 bug 通常具有“血统”（修复 Bug A 导致 Bug B；修复 Bug B 导致 Bug C 等）。实际上，我们有 3 个 CC 超过 100（最多 275 个），这些方法占我们错误数据库中案例的 40%——“你知道，也许 5000 行函数不是一个好主意……”

这在我开始时领导的项目中更为明显。目标是保持 CC 尽可能低（97% 低于 10），最终结果是我基本上停止支持的产品，因为我的 20 个错误不值得修复。

没有错误的软件不会因为短方法而发生（这可能是你必须解决的一个论点），但是错误修复非常快，并且当你使用短方法时通常没有副作用，简洁的方法。

尽管编写单元测试可能会治愈它们的长方法，但您的公司可能不使用单元测试。修辞只到此为止，很少适用于陷入困境的开发人员；向他们展示这些方法如何创造更多的工作和错误的软件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-05-19T13:18:55.860

在函数长度和简单性之间找到正确的融合可能很复杂。尝试应用诸如[圈复杂](http://en.wikipedia.org/wiki/Cyclomatic_complexity "圈复杂度")度之类的度量来证明以当前形式维护代码的难度。没有什么比基于分支和决策计数等测试因素的非个人测量更好的了。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-05-20T07:05:50.613

不知道这个伟大的报价来自哪里，但是：

“首先，调试的难度是编写代码的两倍。因此，如果你尽可能巧妙地编写代码，那么根据定义，你就不够聪明，无法调试它”

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-05-19T09:59:42.113

强迫他阅读 Steve McConnell 的 Code Complete。假设每个优秀的开发人员都必须阅读这篇文章。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-05-19T10:06:49.960

让他喝醉？:-)

这个答案的重点是一个问题，“为什么我总是写简短的函数，而我不写的时候讨厌自己？”

原因是我难以理解复杂的代码，无论是长函数、维护和操作大量状态的东西，还是诸如此类的东西。多年前我注意到有相当多的人在处理这种复杂性方面比我好得多。具有讽刺意味的是，可能正因为如此，我往往比他们中的许多人更优秀：我自己的局限性迫使我面对和清理那种代码。

很抱歉，我无法在这里真正提供真正的答案，但也许这可以提供一些见解来帮助我们找到答案。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-05-19T10:09:41.577

强迫他们阅读“清洁代码”这本书，还有很多其他的，但这是一本新书，很好，而且很容易阅读。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-05-19T10:21:16.390

要求他们为复杂代码编写单元测试是一个很好的途径。此人需要亲自了解执行维护或分析时复杂性带来的债务。

我总是问我的团队的问题是：“现在是晚上 11 点，您必须阅读此代码 - 可以吗？您在压力下理解吗？您能否通过电话，无需远程登录，将他们带到他们可以修复的部分一个错误？” 如果答案是否定的，那么接下来是“你能隔离一些复杂性吗？”

如果你得到一个论据作为回报，这是一个失败的原因。然后扔东西。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-05-19T11:36:57.017

我会给他们 100 行代码，全部在 1 种方法下，然后另外 100 行代码在几个方法之间划分，并要求他们写下每个方法的解释。

计算写两段所需的时间，然后向他们展示结果。

...确保选择的代码需要两倍或三倍的时间才能理解它是否都在一种方法下 - Main() -

没有什么比通过例子学习更好的了。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-05-19T13:51:45.577

短或长是可以不同解释的术语。一个简短的是 2 行方法，而其他人会认为不超过 100 行代码的方法很短。我认为最好声明一个方法不应该同时做超过一件事，这意味着它应该只有一个责任。也许您可以让您的开发人员同行阅读有关如何实践 SOLID 原则的内容。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-05-19T10:32:21.313

我通常会向他们展示具有良好编写方法的旧项目。然后，我将逐步介绍这些方法，同时解释我们以这种方式开发它们的原因。

希望在放眼大局时，他们会理解这背后的原因。

附言。此外，这个练习可以结合使用作为旧项目的小型知识转移。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-05-19T14:21:17.997

*   向他展示测试短方法是多么容易。证明编写简短的方法会让他更容易和更快地为他的方法编写测试（他**正在**测试这些方法，对吗？）

*   当你审查他的代码时，请提出来。“这个方法比较长，比较复杂，好像在做四件不同的事情。提取方法**here** , **here** , **here**。”

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-05-19T12:24:58.653

长方法通常意味着对象模型有缺陷，即一个类有太多职责。您可能不希望在同一个类中只需要更多功能，每个功能都更短，而是将这些职责正确分配给不同的类。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-10-14T05:09:25.630

教猪唱歌是没有用的。这会浪费你的时间并惹恼猪。

只是比某人更出色。

当需要修复 5000 行例程中的错误时，您将拥有一个 10 行例程和一个 4990 行例程。慢慢地这样做，没有人注意到突然的变化，除了事情开始变得更好并且慢慢地大泥球蒸发了。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2009-05-20T08:16:06.557

你可能想告诉他们他可能有很好的记忆力，但你没有。有些人能够处理比其他人更长的方法。如果你们俩都必须能够维护代码，则只能在方法较小的情况下完成。

只有在他没有优越感的情况下才这样做

[编辑] 为什么这会收集负分？

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2009-05-19T10:06:28.730

您可以开始将他们编写的*每个方法*重构为多个方法，即使他们目前正在处理它们。为您的日程安排分配额外的时间来“重构其他方法以使代码可维护”。像你认为应该做的那样去做，并且——这里是教育部分——当他们抱怨时，告诉他们如果他们第一次就做对了，你就不必重构方法。这样，你的老板知道你必须纠正别人的懒惰，而你的同事也知道他们应该改变它。

这至少是一些理论。

# javascript - Javascript / jQuery / Microsoft-ajax混合中的双重加载问题

> ID：881873
> 
> 赞同：1
> 
> 时间：2009-05-19T09:59:04.720
> 
> 标签：javascript, jquery, microsoft-ajax

我对一些 JavaScript 代码有一个奇怪的问题（同样，我讨厌调试 JS 代码）。我正在处理一个常规表——我从一个 JSON 调用中填充它，并添加了对一些分页（我猜你可以称之为 2x 分页）、排序和一些行选择的支持。一切都运行良好 - 但是当一行被取消选择（并且仅取消选择）时，我的 add_navigate 事件被触发两次，这会导致重新加载一些不需要的数据 - 并且表明更不需要加载。

首先这是我的 JS 代码：

```
var customerType;
var selYear;
var selMonth;
var sdir;
var sort;
var page;
var noteId;
var hasDoneCall;
var customerId;

var customerIdChanged = false;

function initValues() {
    customerType = "Publisher";
    selYear = new Date().getFullYear();
    selMonth = new Date().getMonth()+1;
    sdir = false;
    sort = "CustomerName";
    page = 1;
    noteId = false;
    customerId = 0;

    hasDoneCall = location.href.indexOf('#') > 0;

}
function flash(elm, color, duration) {

    var current = elm.css('backgroundColor');

    elm.animate({ backgroundColor: 'rgb(' + color + ')' }, duration / 2).animate({ backgroundColor: current }, duration / 2);

}

function createNotes(elm) {
    var btn = jQuery(elm);
    btn.attr('disabled', 'disabled');
    bulkCreditOption('true', '', function(changeSet) {
        var i = 0;
        while (i < changeSet.length) {
            var selector = "input[type=checkbox][value=" + changeSet[i] + "].check:checked";
            var row = jQuery(selector).parent().parent();
            var cell = row.find("td:nth-child(2)");

            cell.html("<a href=\"javascript:showNotes('" + changeSet[i] + "')\">" + cell.html() + "</a>");
            flash(row, '60, 130, 200', 500);
            i++;
        }
        btn.removeAttr('disabled');
    });
}

function deleteNotes(elm) {
    var btn = jQuery(elm);
    btn.attr('disabled', 'disabled');
    bulkCreditOption('', 'true', function(changeSet) {
        var i = 0;
        while (i < changeSet.length) {
            var selector = "input[type=checkbox][value=" + changeSet[i] + "].check:checked";
            var row = jQuery(selector).parent().parent();
            var cell = row.find("td:nth-child(2)");

            cell.html(cell.text());
            flash(row, '60, 130, 200', 500);
            i++;
        }
        btn.removeAttr('disabled');
    });
}

function bulkCreditOption(createNotes, deleteNotes, callback) {
    var path = "/BulkCredit";
    var data = "";
    var checked = jQuery("input[type=checkbox].check:checked");
    checked.each(function(chk) {
        data += "&ids=" + urlencode(jQuery(this).val());

    });
    jQuery.ajax({
        type: 'POST',
        url: path,
        dataType: 'json',
        data: "createNotes=" + urlencode(createNotes) + data + "&deleteNotes=" + urlencode(deleteNotes),
        success: function(msg) {
            callback(msg);
        }
    });
}

initValues();

Sys.Application.add_init(function() {
    Sys.Application.add_navigate(function(sender, e) {
        var reinstate = e.get_state();
        if (typeof (reinstate) != 'undefined' && typeof (reinstate.customerType) != 'undefined') {
            customerType = reinstate.customerType;
            selYear = reinstate.selYear;
            selMonth = reinstate.selMonth;
            sdir = reinstate.sdir;
            sort = reinstate.sort;
            page = reinstate.page;
            noteId = reinstate.noteId;
            customerId = reinstate.customerId;

        } else {
            initValues();
        }

        if (!customerIdChanged) {

            jQuery("#customerTypeChanger").val(customerType);

            jQuery("#customerFilter").val(customerId);

            jQuery("#monthPicker").empty();

            makeMonthPicker();

            if (noteId != false && noteId != 'false') {
                doShowNotes();
            } else {
                jQuery("#notesContent").hide();
                jQuery("#tableContent").show();
                doAjaxCall();
            }
        } else {
            //logic to fetch customer specific stuff here, TODO
            customerIdChanged = false;
        }
    });
    Sys.Application.set_enableHistory(true);

    jQuery(document).ready(function() {
        origColor = jQuery("#dataTable > thead > tr > th").css('backgroundColor');

        makeMonthPicker();

        jQuery("#customerTypeChanger").val(customerType);
        jQuery("#customerTypeChanger").change(function() {
            customerType = jQuery(this).val();
            iqSetHistory();
        });

        jQuery("#customerFilter").change(function() {
            customerId = jQuery(this).val();
            var tableBody = jQuery("#dataTable > tbody");
            tableBody.find("tr").removeClass("selected");
            tableBody.find("tr[rel=" + customerId + "]").addClass("selected");
            customerIdChanged = true;
            iqSetHistory();
        });

        jQuery(".checkAll").click(function() {
            var elm = jQuery(this);
            if (elm.is(':checked')) {
                jQuery(".check").attr('checked', 'checked');
            } else {
                jQuery(".check").removeAttr('checked');
            }
        });

        if (!hasDoneCall) {
            if (noteId == false) {
                doAjaxCall();
            } else {
                doShowNotes();
            }
        }

    });
});

function makeMonthPicker() {
    var selDate = new Date();
    selDate.setFullYear(selYear);
    selDate.setMonth(selMonth-1);
    jQuery("#monthPicker").monthPicker(function(year, month) {
        selYear = year;
        selMonth = month;
        iqSetHistory();
    }, selDate);
}

var origColor;
var notesPath = "/ShowNotes";

function fadeOut(elm) {
    elm.animate({ backgroundColor: 'rgb(180, 180, 180)' }, 250);
}
function fadeIn(elm) {
    elm.animate({ backgroundColor: origColor }, 250);
}

function iqSetHistory() {
    var state = { 'customerType': customerType, 'selYear': selYear, 'selMonth': selMonth, 'sdir': sdir, 'sort': sort, 'page': page, 'noteId': noteId, 'customerId':customerId };

    Sys.Application.addHistoryPoint(state);
}
var ajaxPath = "/GetCreditListMonth";
function doAjaxCall() {

    fadeOut(jQuery("#dataTable > thead > tr > th"));
    jQuery.ajax({
        type: "POST",
        url: ajaxPath,
        dataType: "json",
        data: "month=" + selMonth + "&year=" + selYear + "&custType=" + customerType + "&sort=" + sort + "&sdir=" + sdir + "&page=" + page + "&asCsv=false",
        success: function(msg) {
            var table = jQuery("#dataTable");

            var tableBody = table.find("tbody");

            tableBody.empty();

            var i = 0;
            while (i < msg.Rows.length) {
                var data = msg.Rows[i];
                var row = jQuery("<tr rel=\"" + data.CustomerId + "\"></tr>");

                if (data.CustomerId == customerId) {
                    row.addClass("selected");
                }

                if (i % 2 == 1) {
                    row.addClass("alternatetablerow");
                }

                var custName = data.CustomerName;
                if (data.PaymentCreated) {
                    custName = "<a href=\"javascript:showNotes('" + getCreditId(data.CustomerId) + "')\">" + custName + "</a>";
                }
                row.append("<td><input type=\"checkbox\" class=\"check\" name=\"ids\" value=\"" + getCreditId(data.CustomerId) + "\" /></td>");
                row.append("<td>" + custName + "</td>");
                row.append("<td>" + data.AmountExcludingTaxes + "</td>");
                row.append("<td>" + data.BonusAmount + "</td>");
                row.append("<td>" + data.Amount + "</td>");

                row.appendTo(tableBody);
                i++;
            }

            tableBody.find("input, a").click(function(event){ //Stop clicks from falling through to the table row event
                event.stopPropagation();
                return true;
            });
            tableBody.find("tr").click(function(event){
                var row = jQuery(this);
                if (row.hasClass("selected")) { //Deselect
                    jQuery("#customerFilter").val(0);
                } else {
                    jQuery("#customerFilter").val(jQuery(this).attr('rel'));
                }
                jQuery("#customerFilter").triggerHandler("change");
            });

            createPager(msg.Pages, jQuery("#pager"));
            jQuery(".checkAll").triggerHandler('click');

            fadeIn(table.find('thead > tr > th'));
        }
    });
}

function downloadListAsCsv() {
    window.location.href = ajaxPath + "?month=" + selMonth + "&year=" + selYear + "&custType=" + customerType + "&sort=" + sort + "&sdir=" + sdir + "&page=0&asCsv=true";
}

function doShowNotes(){
    jQuery.ajax({
        type: "GET",
        url: notesPath + "/" + noteId,
        success: function(msg) {
            jQuery("#tableContent").hide();
            jQuery("#notesContent").html(msg).show();

        }

    });
}

function showNotes(id) {
    noteId = id;
    iqSetHistory();
}

function showTable() {
    noteId = false;
    iqSetHistory();
}

function getCreditId(custId) {
    return selYear + "-" + selMonth + "-" + custId;
}

function sortDataTable(col) {
    if (col == sort) {
        sdir = !sdir;
    } else {
        sdir = false;
    }

    page = 1

    sort = col;
    iqSetHistory();
}

function createPager(totalPages, elm) {
    elm.empty();
    if (totalPages > 1)
        {
            var builder = "";

            var numDirections = 2;

            if (page > 1)
            {
                if (page - numDirections - 1 > 0)
                {
                    builder += CreatePageLinkStatic(1, "&laquo;");
                    builder += " ";
                }

                builder += CreatePageLinkStatic(page - 1, "&lt;");
                builder += " ";
            }

            var n = page - numDirections;
            while (n < page)
            {
                if (n > 0)
                {
                    builder += CreatePageLinkStatic(n, n);
                    builder += " ";
                }
                n++;
            }

            builder += page;
            builder += " ";

            n = page + 1;

            while (n <= page + numDirections && n <= totalPages)
            {
                builder += CreatePageLinkStatic(n, n);
                builder +=" ";
                n++;
            }

            if (page < totalPages)
            {
                builder += CreatePageLinkStatic(page + 1, "&gt;");
                builder += " ";
                if (page + numDirections < totalPages)
                {
                    builder += CreatePageLinkStatic(totalPages, "&raquo;");
                }
            }

            builder;

            elm.append(builder);
        }

}
function CreatePageLinkStatic(page, str){
    return "<a href=\"javascript:pageDataTable(" + page + ")\">" + str + "</a>";
}

function pageDataTable(newPage){
    page = newPage;
    iqSetHistory();
} 
```

和标记：

```
<div id="tableContent">
<select id="customerTypeChanger">
    <option selected="selected" value="Publisher">Publisher</option>
    <option value="Advertiser">Advertiser</option>
</select>
<select id="customerFilter"><option value="0">Choose Customer</option><option value="1">Customer 1</option><option value="1">Customer 2</option>...</select>
<div id="monthPicker"></div>
<div><a href="javascript:downloadListAsCsv()">DownloadAsCSV</a></div>
    <table id="dataTable" class="grid">
        <thead>
            <tr>
                <th style="text-align: left"><input type="checkbox" name="toggleCheckBox" class="checkAll" value="dummy" /></th>
                <th><a href="javascript:sortDataTable('CustomerName')">Customer name</a></th>
                <th><a href="javascript:sortDataTable('AmountExcludingTaxes')">Amount</th>
                <th><a href="javascript:sortDataTable('BonusAmount')">Bonus amount</a></th>
                <th><a href="javascript:sortDataTable('Amount')">Amount including VAT</a></th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <div class="pagination" id="pager"></div>
    <div>With the selected rows</div>
<input id="createNotes" type="button" value="Create notes" onclick="javascript:createNotes(this)" /> <input id="deleteNotes" value="Delete notes" type="submit" onclick="javascript:deleteNotes(this)" />

</div>
<div id="notesContent"></div> 
```

如果还需要，这是我为月份选择器所做的代码（这是一个非常基本的日期选择器，它只是让你在月份之间来回滑动并给出类似的输出

**< 2009 年 4 月 2009 年** *5 月 2009 年* **6 月 >**

（粗体是可点击的链接，可以让你看到那个月的时间段，斜体是已经选择的，显然实际的 html 标记不同）

它利用 jQuery UI 中的 datepicker 来获取月份的本地化名称

```
(function($) {

    var selDate;

    $.fn.monthPicker = function(callback, selectedDate) {

        selDate = selectedDate;

        var elm = this;

        this.html("<span class=\"prevMonthButton\"><a href=\"\">&lt;</a></span><span class=\"prevMonth\"><a href=\"\"></a></span><span class=\"curMonth\"></span><span class=\"nextMonth\"><a href=\"\"></a></span><span class=\"nextMonthButton\"><a href=\"\">&gt;</a></span>");

        populateDates(this);

        var prevMonthFunc = function() {

            var month = selDate.getMonth() - 1;
            if (month < 0) {
                month = 11;
                selDate.setFullYear(selDate.getFullYear() - 1);
            }
            selDate.setMonth(month);

            populateDates(elm);
            callback(selDate.getFullYear(), selDate.getMonth() + 1);
            return false;
        }
        var nextMonthFunc = function() {
            var month = selDate.getMonth() + 1;
            if (month > 11) {
                month = 0;
                selDate.setFullYear(selDate.getFullYear() + 1);
            }
            selDate.setMonth(month);

            populateDates(elm);
            callback(selDate.getFullYear(), selDate.getMonth() + 1);
            return false;
        };

        this.find(".prevMonth > a").click(prevMonthFunc);
        this.find(".prevMonthButton > a").click(prevMonthFunc);
        this.find(".nextMonth > a").click(nextMonthFunc);
        this.find(".nextMonthButton > a").click(nextMonthFunc);
    }

    function populateDates(elm) {

        var months = jQuery.datepicker._defaults.monthNames;
        var selYear = selDate.getFullYear();
        var selMonth = selDate.getMonth();

        elm.find(".curMonth").text(months[selMonth] + " " + selYear);

        var prevMonth = selMonth - 1;
        var prevYear = selYear;
        if (prevMonth < 0) {
            prevMonth = 11;
            prevYear = prevYear - 1;
        }

        elm.find(".prevMonth > a").text(months[prevMonth] + " " + prevYear);

        var nextMonth = selMonth + 1;
        var nextYear = selYear;
        if (nextMonth > 11) {
            nextMonth = 0;
            nextYear = nextYear + 1;
        }

        elm.find(".nextMonth > a").text(months[nextMonth] + " " + nextYear);
    }
})(jQuery); 
```

我知道大部分 JavaScript 代码都很糟糕 - 但对于主要部分，它似乎做得很好，但正如我所说，单击一行以选择它，然后单击它以取消选择并繁荣，双重调用 add_navigate 导致对我的 JSON 服务的额外调用和客户端的视觉闪烁 - 我无法弄清楚它为什么会发生（更奇怪的是，为什么它只是在取消选择而不是在选定的一个选择时发生）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T21:06:56.080

我会尝试做

```
.unbind('click').click(function() 
```

代替

```
.click(function() 
```

只是为了确保点击事件不会被绑定两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-21T09:53:30.867

我认为问题在于不自觉地将事件双重绑定到同一元素。

通常是这样的场景，

```
(function($){
   var MyDocument = new Object({
       prepareBody : function(){

          //addClick Event
          $('div#updatedElement').click(MyDocument.ajaxCall());

          //adjusting the height of an updatedElement to an-otherElement
          $('div#updatedElement').css('height', $('div#otherElement').height());
       },
       ajaxCall : function(){

          //do your ajax Call
           $.getJSON('index.php',{param:1, param:2},function(response){

                //do something with your response
                $('div#updatedElement').html(response)

               //say if after your call you decide to update the body again
                MyDocument.prepareBody();

               //what that does is you will double bind click to the updateElement div.
               //The next time that it is click, the AjaxCall function will run twice
                //The next time it is clicked the MyDocument.ajaxCall function will be run four times

                //8 - 16 - 32 and by now, firefox would have crashed!

           },'json');
       }
   });
   $(document).ready(function(){
       MyDocument.prepareBody()
   });
})(jQuery); 
```

因此，按照 KClough 的建议，在绑定事件之前取消绑定事件，以便它们只运行一次！可悲的 jQuery 不会像其他框架那样覆盖它们！

希望这对其他人有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T00:51:57.793

哦，对不起，我完全忘记了这个问题。

此后不久，我重组了一些代码，然后问题就消失了。我不确定是什么原因造成的，因为它仍然让我感到惊讶，我似乎只有一半的时间得到了双重加载。

无论如何，问题已经解决了，只是我不知道如何或为什么，这仍然让我有些困扰，但另一方面 - 它有效。

# java - 是否可以使用 JPA 持久化 DSL Java 对象？

> ID：881884
> 
> 赞同：0
> 
> 时间：2009-05-19T10:05:29.260
> 
> 标签：java, jpa, dsl

我有一个 DSL Java 对象，即`this`在 setter 中返回的 POJO 加上 getter/setter 有一个不寻常的命名模式：

```
public class Demo {
    private long id;
    private String name;
    private Date created;

    public Demo id (long value) { id = value; return this; }
    public String id () { return id; }
    public Demo name (String value) { name = value; return this; }
    public String name () { return name; }
    public Demo created (Date value) { created = value; return this; }
    public Date created () { 
        if (created == null) created = new Date ();

        return created;
    }

} 
```

是否可以告诉 JPA 使用“name(String)”和“name()”作为 setter/getter 方法？

[编辑] 我的问题是`created`上面的字段。对于此字段，我希望 JPA 使用“getter” `created()`，因此该字段将始终为非 NULL。

或者有没有办法告诉 JPA`CURRENT TIMESTAMP`在创建新对象时使用`created == null`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T11:50:15.383

根据 JPA 规范（请参阅[JSR-220](http://jcp.org/aboutJava/communityprocess/final/jsr220/index.html)）第 2.1.1 章，您可以通过注释映射信息的字段而不是 getter 方法来告诉 JPA 使用字段访问而不是属性访问。

我认为您不能告诉 JPA 为 getter 和 setter 使用哪种命名约定，因为它是一个基本的 java bean 概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:04:06.857

当你在类中定义时，你能不能简单地初始化`created`，然后使用字段访问。

```
private Date created = new Date(); 
```

# c# - 如何将 Linq2SQL 集合数据绑定到 winform 文本字段

> ID：881885
> 
> 赞同：4
> 
> 时间：2009-05-19T10:05:53.923
> 
> 标签：c#, winforms, linq-to-sql, data-binding

对于如何通过使用 DataBindings 来优化我的程序，我有点困惑。我的程序使用了几个 Linq2SQL 绑定的对象来存储数据。所有 ORM 对象都存储在层次结构中。在第二个 GUI 项目中，我在一些文本和组合框字段中显示此数据。

数据结构层次结构如下：

*   `JobManager`包含一个字典`Jobs`
*   每个作业都包含一个字典`Jobitems`
*   每个 Jobitem 都包含一个`Article`

`Job`,每个都是 Linq2SQL 对象，代表一个 ORM `Jobitem`。`Article`

现在我有一个带有 2 个列表视图和一个选项卡窗格的 GUI。选项卡窗格显示作业、作业项和文章的属性，并提供修改作业和作业项的可能性。GUI 的行为应该是这样的：

1.  在第一个 ListView 中选择a`Job`时，相关的 jobitems 将显示在第二个 ListView 中，有关作业的详细信息显示在选项卡窗格中。
2.  在第二个 ListView 中选择a`Jobitem`时，jobitem 详细信息和文章详细信息显示在选项卡窗格中，但只有 Jobitem 信息是可编辑的。
3.  更改完成后，用户必须有意保存它们。否则更改应该被丢弃并且不同步到数据库。

如何使用 DataBinding 实现此行为？

特别是，我可以一次将完整的集合绑定到单个 TextField 并通过 ListViews 中的选择指定的位置移动吗？或者我是否必须在每个作业的基础上为用户进行的每次选择添加和删除单独的 DataBindings？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T10:23:38.087

你真的是指“字典”吗？Winform 绑定适用于列表 ( `IList`/ `IListSource`)，但不适用于字典。此外，`ListView`不像其他一些控件那样容易绑定。

除此之外，它应该纯粹使用映射名称来工作 - 我会尝试做一个简单的例子......

* * *

使用 Northwind 的基本示例进行编辑；请注意，理想情况下，数据上下文不应长期存在；您可能还想查看存储库实现之类的东西，而不是直接绑定：

```
using System;
using System.Windows.Forms;
using SomeNamespaceWithMyDataContext;
static class Program
{
    [STAThread]
    static void Main() {
        MyDataContext ctx = new MyDataContext();
        BindingSource custs = new BindingSource() {
            DataSource = ctx.Customers};

        BindingSource orders = new BindingSource {
            DataMember = "Orders", DataSource = custs};

        Button btn;
        using (Form form = new Form
        {
            Controls = {
                new DataGridView() {
                    DataSource = orders, DataMember = "Order_Details",
                    Dock = DockStyle.Fill},
                new ComboBox() {
                    DataSource = orders, DisplayMember = "OrderID",
                    Dock = DockStyle.Top},
                new ComboBox() {
                    DataSource = custs, DisplayMember = "CompanyName",
                    Dock = DockStyle.Top},                
                (btn = new Button() {
                    Text = "Save", Dock = DockStyle.Bottom
                }), // **edit here re textbox etc**
                new TextBox {
                    DataBindings = {{"Text", orders, "ShipAddress"}},
                    Dock = DockStyle.Bottom
                },
                new Label {
                    DataBindings = {{"Text", custs, "ContactName"}},
                    Dock = DockStyle.Top
                },
                new Label {
                    DataBindings = {{"Text", orders, "RequiredDate"}},
                    Dock = DockStyle.Bottom
                }
            }
        })
        {
            btn.Click += delegate {
                form.Text = "Saving...";
                ctx.SubmitChanges();
                form.Text = "Saved";
            };
            Application.Run(form);
        }
    }
} 
```

顺便说一句 - 请注意语法：

```
DataBindings = {{"Text", orders, "ShipAddress"}} 
```

相当于：

```
someTextBox.DataBindings.Add("Text", orders, "ShipAddress"); 
```

（我只添加这个，因为这是一个常见问题）

# jquery-ui - 使用 Jquery 捕获样式属性顶部的值变化

> ID：881886
> 
> 赞同：0
> 
> 时间：2009-05-19T10:06:08.777
> 
> 标签：jquery-ui

在我的我们页面中，我正在动态更改 div 样式的最高值，即。

<div id="div1" style="top:89;">测试</div>

我需要的是在最高值更改为 88 或 90 时使用 Jquery 捕获事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T10:53:50.490

更改元素的样式时不会生成任何事件，因此这是不可能的。

如果您使用 jQuery 自己更改元素的样式，您当然可以在那里生成一些事件。

# html - 如何向 Google 提供有关我网站上有趣/重要页面的信息？

> ID：881887
> 
> 赞同：4
> 
> 时间：2009-05-19T10:06:18.447
> 
> 标签：html, seo

例如，在 Google 上搜索“Last.fm”。第一个结果将是 www.last.fm 并列出了 8 个附加链接；“收听”、“登录”、“音乐”、“下载”、“图表”、“注册”、“爵士音乐”和“用户”。我查看了他们的 HTML，但无法弄清楚这些信息是从哪里提供给 Google 的。

有什么帮助吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T10:07:51.067

您可以尝试查看[Google Webmaster Tools](http://www.google.com/webmasters/tools/)，并为 google 提供您网站的 webtree。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T10:10:36.897

编写语义标记。

谷歌从中找出重要的链接，但没有明确告知。

谷歌的[文档解释了这个过程](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=47334)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T10:36:00.293

使用 XML 站点地图。但是，请注意站点地图不得被滥用。关于站点地图是否好存在很大的争论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T10:36:22.427

在您的[站点地图](http://sitemaps.org)中，您可以指定页面的优先级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T22:59:13.590

上面的答案都很好。

您也可以尝试在您的主页或其他页面上使用 NO FOLLOWING (rel="nofollow") 不重要的链接。谷歌将给予更多的关注链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-04T11:40:44.863

过去，如果您是最佳结果，您需要达到 pagerank 4 或更高才能显示附加链接。（然后你可以通过 webmastertools 编辑它们）

但似乎谷歌目前正在改变周围的事情。显然，它们的点击量不足以保证在结果页面上占用宝贵的空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-13T06:48:04.377

我以前遇到过这样的事情。我所做的是向谷歌提交新的、准确的网站页面。

仔细查看内容以及 Mata 标签，看看它们是否准确且具有描述性。就我而言，我重新组织了整个内容。

最重要的是，我回到了SEO的轨道，经常刷新内容。不好意思，好久没刷新内容了。

我不知道哪一个玩规则，但事情现在运作良好。希望对你有参考价值。

# php - PHP 包含带变量的类函数

> ID：881890
> 
> 赞同：1
> 
> 时间：2009-05-19T10:07:00.867
> 
> 标签：php, class, variables

我正在尝试使用变量来获取扩展类中的函数，这是我想要做的，但我无法让它工作，感谢您的帮助。

```
class topclass {
    function mode() {
        $mode = 'function()';

        $class = new extendclass;
        $class->$mode;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T10:11:33.990

不要在 $mode 变量中包含方括号“()”。

```
class topclass {
    function mode() {
        $mode = 'functionx';

        $class = new extendclass;
        $class->$mode();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:11:09.587

您还可以使用回调，它是实例的数组元组和命名函数的字符串。如果预期的调用是 $foo->bar()，那么回调将是：

```
$callback = array($foo, 'bar'); 
```

常规函数（不是方法）和静态方法存储为纯字符串：

```
// Function bar
$callback = 'bar';
// Static method 'bar' in class Foo
$callback = 'Foo::bar'; 
```

它使用 call_user_func 或 call_user_func_array 调用，第二个允许将参数传递给回调函数：

```
// No parameters
call_user_func($callback);
// Parameters 'baz' and 'bat'
call_user_func_array($callback, array('baz', 'bat'); 
```

看起来这似乎是不必要的复杂化，但在许多情况下，您可能希望能够以编程方式构建函数调用，或者您可能不提前知道将传递给函数的参数数量（某些函数，例如因为 array_merge 和 sprintf 允许可变数量的参数）。

# sql - 如何在 MySQL 的给定组中标记重复项？

> ID：881893
> 
> 赞同：1
> 
> 时间：2009-05-19T10:07:18.603
> 
> 标签：sql, mysql, logic, procedure

我有以下表结构（在 MySQL 中）：

```
DocID, Code, IsDup, DopOf 
```

，`DocID`唯一性在哪里。

价值观是这样的：

```
1,AAAA,无,无
2,AAAA,无,无
3，AAAA，无，无
4,BBBB,无,无
5,CCCC,无,无
6,CCCC,无,无

```

我想要的是编写一个可以更新表并给出所需结果的过程：

```
1,AAAA,0,0
2,AAAA,1,1
3,AAAA,1,1
4,BBBB,0,0
5,CCCC,0,0
6,CCCC,1,5

```

`IsDup``Doc`在 的 基础 上显示 是否重复`Code`, 并`DupOf`标明 原`DocId`.

有谁能够帮助我？我正在尝试实现逻辑，但我被卡住了。

您的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T10:15:43.360

```
UPDATE  table t
JOIN    (
        SELECT  code, MIN(docId) AS firstdoc
        FROM    table
        GROUP BY
                code
        ) q
ON      t.code = q.code
SET     t.isDup = NOT (t.docId = q.firstdoc), 
        t.dupOf = CASE WHEH t.docId = q.firstdoc THEN 0 ELSE q.firstDoc END 
```

如果你的表是`MyISAM`，你应该有一个索引`(code, docId)`。

如果您的表是`InnoDB`并且`docId`是 a `PRIMARY KEY`，则您应该在`(code)`.

# c - char 是否保证正好是 8 位长？

> ID：881894
> 
> 赞同：63
> 
> 时间：2009-05-19T10:07:47.930
> 
> 标签：c, types, char

就这样。没有找到任何类似的主题，所以请耐心等待。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-05-19T10:29:11.553

从[ANSI C 规范的副本](http://flash-gordon.me.uk/ansi.c.txt)，请参阅*第 3.1.2.5 节 - 类型*：

> 声明为 char 类型的对象大到足以存储基本执行字符集的任何成员。如果 $2.2.1 中枚举的所需源字符集的成员存储在 char 对象中，则其值保证为正数。如果其他数量存储在 char 对象中，则行为是实现定义的：这些值被视为有符号或非负整数。

“执行字符集”的概念在*第 2.2.1 节 - 字符集中*介绍。

换句话说，一个 char 必须至少足够大，以包含构成基本执行字符集的至少 95 个不同字符的编码。

现在添加第*2.2.4.2 节 - 数值限制*

> 符合要求的实现应记录本节中指定的所有限制，这些限制应在标题`<limits.h>`和 `<float.h>`.
> 
> **整型尺寸**
> 
> 下面给出的值应替换为适用于#if 预处理指令的常量表达式。它们的实现定义值的大小（绝对值）应等于或大于所示值，符号相同。
> 
> *   不是位域（字节）的最小对象的最大位数
>     CHAR_BIT 8
>     
>     
> *   类型为signed char SCHAR_MIN -127的对象的最小值
>     
>     
> *   类型为signed char SCHAR_MAX +127的对象的最大值
>     
>     
> *   unsigned char
>     UCHAR_MAX 255类型的对象的最大值
>     
>     
> 
> ……

所以你有它 - char 中的位数必须**至少为**8。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-19T10:09:46.507

不，不能保证是 8 位。sizeof(char) 保证为 1，但这并不一定意味着一个 8 位字节。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-19T10:10:43.323

不，char 数据类型必须至少包含 8 位（参见 ANSI C 规范）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-19T11:11:53.417

C99 标准草案规定一个字节必须至少为 8 位宽，因为`<limits.h>`它包含一个`CHAR_BIT`产生每个字节的位数的宏，并且保证至少为 8（第 5.2.4.2.1 节）。

C++ 标准草案包括 C 的`<limits.h>`名称`<climits>`（第 18.2.2 节）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-01-29T21:46:26.027

让我们看看标准是怎么说的：

> 5.2.4.2.1 整数类型的大小
> ......
> 它们的实现定义的值的大小（绝对值）应等于或大于所示的值，并具有相同的符号。
> 
> * * *
> 
> 不是位域（字节）的最小对象的位数
> CHAR_BIT 8

这告诉我们一个字节至少是 8 位（上面的段落

> 如果 char 类型的对象的值在表达式中使用时被视为有符号整数，则 CHAR_MIN 的值应与 SCHAR_MIN 的值相同，CHAR_MAX 的值应与 SCHAR_MAX 的值相同。否则，CHAR_MIN 的值应为 0，CHAR_MAX 的值应与 UCHAR_MAX 的值相同。UCHAR_MAX 值应等于 2^CHAR_BIT - 1
> 
> * * *
> 
> 对于每个有符号整数类型，都有一个对应的（但不同的）无符号整数类型（用关键字 unsigned 指定），它使用相同的存储量（包括符号信息）并具有相同的对齐要求。
> 
> * * *
> 
> 对于 unsigned char 以外的无符号整数类型，对象表示的位应分为两组：值位和填充位（后者不需要任何一个）。

这些段落告诉我们：

*   一个 unsigned char 需要表示 2^CHAR_BIT-1 个值，可以在最小 CHAR_BIT 位上进行编码（根据标准规定的常规位表示）
*   unsigned char 不包含任何附加（填充）位
*   有符号字符占用与无符号字符完全相同的空间
*   char 的实现方式与 signed 或 unsigned char 相同

**结论：一个 char 及其变体 unsigned char 和 signed char 保证在大小上正好是一个字节，并且一个字节保证至少是 8 位宽。**

现在它们是char 确实是一个字节的其他*迹象（但不是上面的正式证明）：*

> 除位域外，对象由一个或多个字节的连续序列组成，其数量、顺序和编码要么明确指定，要么由实现定义。
> 
> * * *
> 
> 存储在任何其他对象类型的非位域对象中的值由 n × CHAR_BIT 位组成，其中 n 是该类型对象的大小，以字节为单位。该值可以复制到 unsigned char [n] 类型的对象中
> 
> * * *
> 
> sizeof 运算符产生其操作数的大小（以字节为单位），它可以是表达式或带括号的类型名称。大小由操作数的类型决定。结果是整数。如果操作数的类型是变长数组类型，则计算操作数；否则，不计算操作数，结果是一个整数常量。
> 
> * * *
> 
> 当应用于具有 char、unsigned char 或 signed char 类型（或其限定版本）的操作数时，结果为 1。当应用于具有数组类型的操作数时，结果是数组中的总字节数. 88) 当应用于具有结构或联合类型的操作数时，结果是此类对象中的总字节数，包括内部和尾随填充。

（注意这里有歧义。这里的 sizeof(char) 是否覆盖了 sizeof(type) 规则或者它只是给出了一个例子？）

不过，还有一个问题需要解决。字节到底是什么？根据标准，它是“不是位域的最小对象”。**请注意，理论上这可能不对应于机器字节**，并且对于所谓的“机器字节”也存在歧义：它可以是构造函数所指的任何“字节”，因为知道每个构造函数可能有不同的“字节”的定义；或一般定义，例如“计算机以单个单元处理的一系列位”或“最小的可寻址数据块”。

例如，具有 7 位字节的机器必须将“C 字节”实现为两个机器字节。

*所有引用的来源：[委员会草案 — 2007 年 9 月 7 日 ISO/IEC 9899:TC3](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T11:16:34.547

来自描述 limits.h 的 C 标准（需要重新格式化）：

1.  不是位域（字节）的最小对象的位数：CHAR_BIT 8
2.  带符号字符类型对象的最小值：SCHAR_MIN -127
3.  带符号字符类型对象的最大值：SCHAR_MAX +127

CHAR_BIT 最小值为 8 可确保字符至少为 8 位宽。SCHAR_MIN 和 SCHAR_MAX 的范围确保有符号字符的表示至少使用八位。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-19T11:28:38.593

我要说的第一件事是，如果您需要一个类型是精确的位数，那么请使用特定于大小的类型。取决于您的平台，范围从`__s8`Linux 上的签名 8 位类型到`__int8`Windows 上的 VC++。

现在，根据 Robert Love 在“Linux 内核开发”中关于可移植性的章节中的说法，他指出 C 标准“将标准类型的大小留给实现，尽管它确实规定了最小大小。”

然后在页面底部的脚注中，他说：“除了`char`总是 8 位”

现在我不确定他的依据是什么，但也许[是 ANSI C 规范中](http://flash-gordon.me.uk/ansi.c.txt)的这一部分？

2.2.4.2 数值限制

符合要求的实现应记录本节中指定的所有限制，这些限制应在标头limits.h和float.h中指定

“整数类型的大小limits.h”

下面给出的值应替换为适用于#if 预处理指令的常量表达式。它们的实现定义值的大小（绝对值）应等于或大于所示值，符号相同。

不是位域的最小对象的最大位数（字节）

CHAR_BIT 8

有符号字符类型的对象的最小值

SCHAR_MIN -127

有符号字符类型的对象的最大值

SCHAR_MAX +127

unsigned char 类型对象的最大值

UCHAR_MAX 255

char 类型对象的最小值

CHAR_MIN 见下文

char 类型对象的最大值

CHAR_MAX 见下文

对于任何支持的语言环境，多字节字符中的最大字节数

MB_LEN_MAX 1

short int 类型对象的最小值

SHRT_MIN -32767

short int 类型对象的最大值

SHRT_MAX +32767

unsigned short int 类型对象的最大值

USHRT_MAX 65535

int 类型对象的最小值

INT_MIN -32767

int 类型对象的最大值

INT_MAX +32767

unsigned int 类型对象的最大值

UINT_MAX 65535

long int 类型对象的最小值

LONG_MIN -2147483647

long int 类型对象的最大值

LONG_MAX +2147483647

unsigned long int 类型对象的最大值

ULONG_MAX 4294967295

如果在表达式中使用 char 类型的对象的值进行符号扩展，则 CHAR_MIN 的值应与 SCHAR_MIN 的值相同，CHAR_MAX 的值应与 SCHAR_MAX 的值相同。如果 char 类型的对象的值在表达式中使用时没有符号扩展，则 CHAR_MIN 的值应为 0，并且 CHAR_MAX 的值应与 UCHAR_MAX 的值相同。/7/

# sql - SQL Server 2008 - 从选择到快速编辑

> ID：881900
> 
> 赞同：5
> 
> 时间：2009-05-19T10:09:41.937
> 
> 标签：sql, sql-server-2008, ssms

在 server management studio 2008 中，您可以在表格上单击鼠标右键，然后点击选择前 1000 行。是否有按钮或快速方法来编辑其中一个返回的行，而不必再次右键单击表格并单击编辑前 200 行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T17:01:30.410

这是我通常这样做的方式：

1.  右键单击表格并选择“编辑前 200 行”

2.  右键单击结果的任意位置，导航到窗格 -> SQL

您将看到一个以

```
SELECT TOP(200) ..... 
```

将“200”更改为更大的值，或在底部添加 WHERE 子句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-02-26T16:11:26.520

在选项 - SQL Server 对象资源管理器中，您可以编辑的命令

编辑前行命令

选择顶行命令

您可以将编辑更改为 1000 行而不是 200

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:19:30.327

在我的系统上，我可以立即单击编辑前 200 行（不需要初始选择前 1000 行）。

如果您需要选择**哪一**行，您可以单击 SQL 工具栏按钮来编辑您的查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:37:27.010

在 SQL Server 2008 Management Studio 中，您可能希望更改默认设置以允许您一次编辑超过 200 行，或者选择超过 1000 行，这是 SQL Server 的默认设置。

要修改“编辑前 200 行”或“选择前 1000 行”设置，请执行以下操作：

1.在 SQL Server 2008 Management Studio 中，转到“工具”->“选项”->“SQL Server 对象资源管理器”->“命令”。

2.现在在右侧的“表和视图选项”部分，您可以更改： ◦Edit TopRows 命令的值，大于或小于 200。◦选择 TopRows 命令的值，大于小于或小于 1000。

3.通过指定值 0，SQL Server 将返回所有行。（如果你的 sql 表真的很大，你肯定不想将这些值设置为 0。

4.单击确定保存更改。

# java - 用于配置的 Web UI 框架

> ID：881905
> 
> 赞同：2
> 
> 时间：2009-05-19T10:10:57.237
> 
> 标签：java, configuration, user-interface, frameworks, jmx

我正在寻找一个支持以下功能的 UI 框架：

*   与 Apache Commons Config 和/或 JFig 集成
*   支持嵌套选项卡
*   了解用户/组/角色
*   可以与 JMX MBean 交互
*   不需要Javascript即可运行
*   用 Java 编写，最好是基于 JSP 的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T12:19:14.333

我真的怀疑你能找到类似的东西，因为你指定了浏览器端、服务器端和开发端的要求。它相当限制了这个领域。

我认为您不会找到开箱即用的支持这些要求的单一框架。

如果 GUI 对您很重要，我会推荐 Wicket。嵌套选项卡和 no-javascript- *required*得到很好的支持（至少在我去年使用它时）。虽然这与 JSP 完全不兼容......

作为一个安全系统 Spring Security（以前称为 Acegi）跃入脑海。它几乎可以与任何东西集成——如果还没有可用的绑定的话。

“可以与 JMX MBean 交互”需要澄清一下——它应该如何处理这些 bean？

如果你不是在 Mac 上工作，你也可以考虑 GWT（GWT 开发环境并不真正适用于 64 位 java）。它完全是java，前端被编译。

并与 Commons Config / JFig 集成？您希望配置什么？即使框架支持公共配置，它也可能不允许您配置您想要配置的内容......

我个人目前正在使用带有spring security的spring MVC。我选择这个是因为我们已经在使用 Spring，而且我喜欢 JSP 作为视图技术，只要视图简单。

如果我需要使用相同的代码创建 javascript 和无 javascript 页面，我会选择 Wicket，因此这种灵活性不会成为*我的*问题。

我意识到这不是问题的答案，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T21:26:16.573

既不是 UI 也不是与 JMX 一起工作，而是 JFig 在没有 XML 膨胀的情况下做的事情，并且完全是 Java（使用 Commons Configuration、Commons IO、Guava 等）。

Maven 配置有很好的默认值，但有很多附加选项可以适应遗留环境。可以构建脚本以及配置。

再加上 Maven Assembly 插件，我们将其用于持续交付推送自动部署脚本推送属性/配置、（liquibase）数据库更改、应用程序服务器 CLI 和 Web 服务器更改。

Maven Central 上的最新版本是 0.9.10：

```
<plugin>
    <groupId>com.ariht</groupId>
    <artifactId>config-generation-maven-plugin</artifactId>
    <version>0.9.10</version>
    <executions>
       <execution>
           <goals>
               <goal>generate/goal>
           </goals>
       </execution>
    </executions>
</plugin> 
```

[https://github.com/sofdes/config-generation-maven-plugin](https://github.com/sofdes/config-generation-maven-plugin)

# jquery - jQuery中的数据方法

> ID：881907
> 
> 赞同：0
> 
> 时间：2009-05-19T10:11:16.113
> 
> 标签：jquery

在我的代码中，我想在我的数据中发送两个参数。`Name`是我的参数名称之一，它的值在一个变量`a`中。另一个参数名称是变量`type`中的`str`值。以下对我不起作用：

```
 $.ajax({
  type: "POST",
  url: "./server",
  data: "name="+a+"type="+str,

      success: function(msg){
        alert( "Data Saved: " + msg);
    }
}) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T10:15:36.010

尝试这样的事情：

```
 $.ajax({
  type: "POST",
  url: "./server",
  data: {name:a, type: str},

      success: function(msg){
        alert( "Data Saved: " + msg);
    }
}) 
```

使用文字而不是变量，它将是这样的：

```
 $.ajax({
  type: "POST",
  url: "./server",
  data: {name: "some name", type: "some type"},

      success: function(msg){
        alert( "Data Saved: " + msg);
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T10:26:06.397

这是我的做法：

```
$.ajax({
  type: "POST",
  url: "./server",
  data: "name="+a+"&type="+str,

      success: function(msg){
        alert( "Data Saved: " + msg);
    }
}) 
```

就像查询字符串一样。请记住对它们进行正确的 URL 编码。就像 PHP 的[urlencode()](http://php.net/urlencode)一样，仅在 JavaScript 中（查看 escape()，但它也不是一个完整的实现）。

# java - 使用 Log4J 进行结构化/组合日志记录

> ID：881909
> 
> 赞同：4
> 
> 时间：2009-05-19T10:11:32.447
> 
> 标签：java, logging, log4j

我希望你能帮助我。

我有一个需要记录事务的网络服务。由于有很多命中，日志语句在日志文件中显得不相交/碎片化。

我已经考虑通过层传递一个 StringBuilder 实例并将语句附加到该实例，然后在向客户端返回响应之前在最后（主控制器中的 finally 子句）记录其内容一次。这似乎没有必要，我确信使用 Log4J 有一种更简洁的方法。

任何人都可以阐明这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T10:43:13.617

the good things is that you are using Log4j. The library itself implements the concept of *nested diagnostic context* (`org.apache.log4j.NDC`) and *mapped diagnostic context* (`org.apache.log4j.MDC`). I reckon you should definitely have a look at both, because those allows you to build some sort of the context that you can use in your log output layout.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T10:22:13.737

您可能会考虑扭转问题：在运行时记录日志时不要合并条目的所有部分，而是稍后在数据分析期间合并它们。

例如，我们有一个记录大量数据的应用程序，其中快速响应很重要。我们最近实现了一个（定制的）系统，该系统记录到一个有效的关系数据库。但是，它的日志记录部分已针对日志记录进行了优化；我们只需按照应用程序生成它的顺序将元组数据附加到日志文件中。我们有可以针对这种格式进行查询的工具，并且当我们开始对针对日志格式的每个查询实际上都需要对数据库中的每个表进行表扫描感到恼火时，我们还计划生成以不同格式存储的新数据库版本。

即使您不能直接使用这种技术，只要考虑一下它就可以为您提供在 Log4J 中做得更好的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:54:45.840

Do you really need to have all the log statements in order I mean they are being logged as they occur. If you change the order you might miss the sequence of some events which you may need to track down tricky bugs.

Can you not add an identifier to your messages like start them with a thread id or user id from which the request is originating, this way you can then run queries on the logs using something like grep.

```
grep userId *.log 
```

the statement will return all the log statements for that user in the correct order and its fast.

We use this technique on a high throughput trading platform and it is the easiest way of following a trade or user request through the system in the log files. It also doesn't require extending or writing your own logger.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T10:29:46.827

我们需要解决过去类似的问题。我们创建了一个封装的消息对象，其中还包含有关消息的元数据（例如用户事务 ID）和一个自定义附加程序类。在这个 appender 类中，我们使用 instanceof 语句从信封中获取元数据，而不是简单地调用 toString（它应该为一般的 appender 返回一个不错的日志）。

或者您可以考虑使用 SLF4J，它是通过日志消息传递[标记对象的标准功能。](http://www.slf4j.org/apidocs/org/slf4j/Marker.html)例如，查看 Javadoc 以了解他们的[debug(Marker marker, String msg)](http://www.slf4j.org/apidocs/org/slf4j/Logger.html#debug(org.slf4j.Marker,%20java.lang.String))方法重载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T10:48:48.783

One more idea, instead of passing a StringBuilder instance through-out the layers, which might lead to pretty awkward API (additional method parameters), you could consider using `java.lang.ThreadLocal` to hold the *current* context that could be dumped to the log at the very end.

# sql-server - 用于在一列中显示词频的sql server函数

> ID：881913
> 
> 赞同：4
> 
> 时间：2009-05-19T10:11:53.350
> 
> 标签：sql-server, string, text, indexing, frequency

我有一张表格，列出了一项调查中的自由文本输入，允许参与者输入他们的回答（关于他们希望在婚礼中使用的颜色）

我想编写一个 sql 函数，从该列中收集所有信息，并排序计算每个单词的频率，按此计数对结果集进行排序。

```
Response
--------
Red and White
green
White and blue
Blue
Dark blue 
```

我想按如下顺序订购上表

```
Response  Frequency
--------  ---------
Blue      3
White     2
And       2
Red       1
Green     1 
```

在函数运行后，我可以去掉所有像“和”这样的垃圾词。有谁知道产生这种行为的任何好的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T13:53:59.957

好的，这是一种享受。首先是一个分离值的函数......

```
Alter Function dbo.SeparateValues    

(    
 @data VARCHAR(MAX),    
 @delimiter VARCHAR(10)     
)     
RETURNS     
@tbldata TABLE(col VARCHAR(MAX))    
As    
--Declare @data VARCHAR(MAX) ,@delimiter VARCHAR(10)     
--Declare @tbldata TABLE(col VARCHAR(10))    
--Set @data = 'hello,how,are,you?,234234'    
--Set @delimiter = ','    
--DECLARE @tbl TABLE(col VARCHAR(10))    
Begin    
DECLARE @pos INT    
DECLARE @prevpos INT    
SET @pos = 1     
SET @prevpos = 0    

WHILE @pos > 0     
BEGIN    
SET @pos = CHARINDEX(@delimiter, @data, @prevpos+1)    
if @pos > 0     
INSERT INTO @tbldata(col) VALUES(LTRIM(RTRIM(SUBSTRING(@data, @prevpos+1, @pos-@prevpos-1))))    
else    
INSERT INTO @tbldata(col) VALUES(LTRIM(RTRIM(SUBSTRING(@data, @prevpos+1, len(@data)-@prevpos))))    
SET @prevpos = @pos     
End    

RETURN       
END 
```

然后我把它应用到我的桌子上......

```
Select Count(*), sep.Col FROM (
        Select * FROM (
            Select value = Upper(RTrim(LTrim(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(response, ',', ' '), '.', ' '), '!', ' '), '+', ' '), ':', ' '), '-', ' '), ';', ' '), '(', ' '), ')', ' '), '/', ' '), '&', ''), '?', ' '), '  ', ' '), '  ', ' ')))) FROM Responses
        ) easyValues
        Where value <> '' 
    ) actualValues 
    Cross Apply dbo.SeparateValues(value, ' ') sep
    Group By sep.Col
    Order By Count(*) Desc 
```

好的，所以我使用嵌套表进行了 OTT，但我已经删除了所有的废话字符，分离了值并保留了最常用单词的运行总数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T21:05:36.493

```
DECLARE @phrases TABLE (id int, phrase varchar(max))
INSERT @phrases values
(1,'Red and White'  ),
(2,'green'          ),
(3,'White and blue' ),
(4,'Blue'           ),
(5,'Dark blue'      );

SELECT word, COUNT(*) c
FROM @phrases
CROSS APPLY (SELECT CAST('<a>'+REPLACE(phrase,' ','</a><a>')+'</a>' AS xml) xml1 ) t1
CROSS APPLY (SELECT n.value('.','varchar(max)') AS word FROM xml1.nodes('a') x(n) ) t2
GROUP BY word 
```

> ```
> word         freq
> ----------- -----------
> and         2
> blue        3
> Dark        1
> green       1
> Red         1
> White       2 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:39:16.197

您的主要问题是您在 SQL Server 中缺少拆分功能。

这里有一个样本，看起来很不错..

[http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648)

使用它，您可以编写一个存储过程......

```
CREATE TABLE #Temp (Response nvarchar(50), Frequency int) 

DECLARE @response nvarchar(100)
DECLARE db_cursor CURSOR FOR 
SELECT response FROM YourTable

OPEN db_cursor  
FETCH NEXT FROM db_cursor INTO @response 

WHILE @@FETCH_STATUS = 0  
BEGIN  
       /* Pseudo Code */ 
       --Split @Response 
       --Iterate through each word in returned list
       --IF(EXISTS in #TEMP)
       --    UPDATE THAT ROW & INCREMENT THE FREQUENCY
       --ELSE
       --    NEW WORD, INSERT TO #Temp WITH A FREQUENCY OF 1

       FETCH NEXT FROM db_cursor INTO @response 
END   

SELECT * FROM #Temp 
```

没有游标可能有一种不那么笨拙的方法，但如果它只是你需要运行一次的东西，并且你的表或响应不是特别大，那么这应该可以工作

# php - php 中的 simplexml_load_file() 错误

> ID：881914
> 
> 赞同：3
> 
> 时间：2009-05-19T10:12:14.677
> 
> 标签：php, xml

我使用 php 创建了一个测试 xml，其内容在 gujrati

```
$doc = new DomDocument('1.0','UTF-8');
$fieldvalue = mb_convert_encoding($question['questiontext'],'ISO-8859-1','UTF-8');
$value2 = $doc->createTextNode($fieldvalue); 
```

XML 文件已成功创建，但是当我尝试使用 simplexml_load_file 函数呈现 XML 内容时，出现以下错误：

> 警告：`simplexml_load_file()`[function.simplexml-load-file]：testsxml/test27_4.xml:2：解析器错误：输入不正确的 UTF-8，表示编码！字节：0xC9 0xD6 0xF7 0x20

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T10:30:44.233

我遇到过同样的问题，使用[utf8encode](http://php.net/utf8encode)解决了。我看到您使用了多字节版本，但尝试一下可能值得一试。还要确保您没有对事物进行两次编码。

还有一件事。我想 DomDocument 为你做的，但检查 & 是 & 等等。

# unix - 将 nmake 转换为 make

> ID：881921
> 
> 赞同：3
> 
> 时间：2009-05-19T10:14:57.247
> 
> 标签：unix, makefile, porting, nmake

市场上有没有一种工具可以获取 Visual Studio“nmake”文件，并将它们转换为 Unix 风格的“make”文件？是否有任何工具可以减轻在大型项目中管理 makefile 的痛苦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T10:17:43.403

我还没有看到任何可以自动将 nmake 转换为 unix make 的工具，但是有几个工具可以帮助管理大型项目中的 makefile。我最喜欢的是[CMake](http://www.cmake.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-25T18:36:58.600

我认为业界已经通过[Ant](http://en.wikipedia.org/wiki/Apache_Ant)和 Ant 相关技术解决了您遇到的挫折。（[南安特](http://en.wikipedia.org/wiki/NAnt)）

蚂蚁是：

*   跨平台
*   不依赖于 OS shell 命令
*   没有更多的空白问题

或者，由于您提到您正在使用 VisualStudio，您可能会考虑迁移到 Microsoft 的[MSBuild](http://msdn.microsoft.com/en-us/library/wea2sca5(VS.80).aspx) ——Microsoft 的（相对较新的）VisualStudio 构建引擎。

# c# - 泛型 c#.net

> ID：881922
> 
> 赞同：3
> 
> 时间：2009-05-19T10:15:27.040
> 
> 标签：c#, generics

在下面的代码“where T : WsgTypes.RouteRestriction”中，我可以添加多个类，以便 T 可以是我感兴趣的少数类类型

```
 public static T GetDetails<T>(string code) where T : WsgTypes.RouteRestriction
    {
        T details;
        if (typeof(T) == typeof(WsgTypes.TicketType))
        {
            details = TicketTypeDetail.GetDetails(code) as T;

        }
        else if (typeof(T) == typeof(WsgTypes.RouteRestriction))
        {
            details = RouteRestrictionDetail.GetDetails(code) as T;

        }
        else
        {
            throw new NotSupportedException("");
        }
        return details;
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T10:21:45.390

在我看来，这不是对泛型的正确使用。如果`TicketType`并`RouteRestriction`实施一些会更好`IDetailed`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T10:20:26.860

不，泛型类型约束只能指定一个基类。

您可以指定多个接口，但这是“全部”，而不是“任何”。

您所问的问题可以通过重载实现，但不能通过泛型实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:18:59.610

恐怕你不能。通常的方法是提供一个您感兴趣的所有类都可以实现的通用接口。问题是，在泛型主体内部，编译器期望泛型类型参数是明确的。

好吧，或者您可以将对象作为参数并随意转换。但不是。不。

`typeof`请注意，您也可以使用`is`and运算符来代替`as`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T10:19:18.250

看这篇文章...

[http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

... 了解更多关于约束的信息。您可以添加多个约束，并且可以通过某个接口或某个基类进行约束，但不能通过任意类的列表进行约束。

这是多个约束的示例（来自上面）：

```
class Base { }
class Test<T, U>
    where U : struct
    where T : Base, new() { } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T10:20:13.553

对于继承，您可以拥有一个具有多个接口的类。

```
public static T GetDetails<T>(string code) where T : WsgTypes.RouteRestriction, , IComparable
    {
    } 
```

相反，您可以拥有一个接口并让多个类实现它。

```
public interface IInterface
    {}

    public class Class1: IInterface
    {}

    public class Class2: IInterface
    {}

public static T GetDetails<T>(string code) where T:IInterface
        {
            T instance;
            // ...
            return instance;
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T10:20:14.787

您是否尝试像这样将它们分开：

```
public static T GetDetails<T>(string code) where T : WsgTypes.RouteRestriction, NextClass, AnotherClass, AndSoOn
{
...
} 
```

# linux - 开发内核以支持多个 CPU

> ID：881925
> 
> 赞同：2
> 
> 时间：2009-05-19T10:16:16.853
> 
> 标签：linux, multithreading, operating-system, kernel, multicore

我希望进入操作系统内核开发，并认为我的贡献是扩展[SANOS](http://www.jbox.dk/sanos/)操作系统以支持多核机器。我一直在阅读有关操作系统的书籍 (Tannenbaum) 以及研究 BSD 和 Linux 如何应对这一挑战，但仍然停留在几个概念上。

1.  SANOS 在多个 CPU 上运行时是否需要更复杂的调度算法，或者当前使用的算法是否可以正常工作？

2.  我知道线程与启动它们的内核具有亲和力是一个好主意，但是这是通过调度还是通过更改线程创建方式的实现来处理的？

3.  需要考虑什么才能使 SANOS 可以在具有数百个内核的机器上运行？据我所知，BSD 和 Linux 最多只能支持十几个内核。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T11:06:33.850

你的阅读材料很好。所以那里没有问题。还可以看看斯坦福大学关于操作系统设计的 CS 可下载讲座。

1.  调度算法可能需要更复杂。这取决于运行的应用程序的类型以及它们的贪婪程度。他们是屈服还是被迫屈服。那种事。这更多的是您的流程想要或期望什么的问题。RTOS 将具有比桌面更复杂的调度。
2.  线程应该与一个核心具有亲和性，因为一个进程中的 2 个线程可以并行执行……但不能在同一个核心上同时实时执行。将它们放在不同的内核上可以让它们真正并行运行。缓存也可以针对核心亲和力进行优化。这实际上是您的线程实现和调度程序的混合。sched 可能希望确保线程在内核上同时启动，而不是临时启动以减少线程在彼此和事物上等待的时间量。如果你的线程库是用户空间的，它可能会分配核心，或者让调度程序根据容量或最近的死亡情况来决定。
3.  可扩展性通常是内核限制（可以是任意的）。在 Linux 中，如果我记得，限制是由于在调度程序中保存 CPU 信息结构的数组的静态大小。因此它们是固定大小的。这可以通过重新编译内核来改变。大多数优秀的调度算法将支持非常大量的内核。随着您的核心或处理器数量越来越多，您需要注意不要过多地分割进程执行。如果一个程序有 2 个线程，请尝试将它们安排在接近时间的位置，因为它们之间可能存在因果关系（通过共享数据）。

您还需要决定如何实现线程，以及如何在内核中表示进程（无论是重的还是轻量的）。线程内核是否管理？用户空间管理？这些东西都会对调度器的设计产生影响。看看 POSIX 线程是如何在各种操作系统中实现的。你要考虑的东西太多了：）

**简而言之**，对于逻辑存在或应该存在的位置，并没有真正的直接答案。这完全取决于设计、应用程序期望、时间限制（在程序上）等等。

希望这会有所帮助，但是我不是这里的专家。

# sql-server - Windows 身份验证受信任的连接不起作用

> ID：881928
> 
> 赞同：3
> 
> 时间：2009-05-19T10:16:40.987
> 
> 标签：sql-server, database-connection, windows-authentication, sqlconnection, trustedconnection

MSSQL Server 位于“abc”域中并具有混合模式身份验证。我从不在域或域“xyz”但使用 MSSQL Jdbc 驱动程序 2.0 的同一网络中的机器连接。我在 xyz 域中以管理员或帐户身份登录。

使用以下 url 连接“sa”或 SQL 模式身份验证可以正常工作。

> jdbc:sqlserver://%DB_IP%:%DB_PORT%;SelectMethod=cursor;DatabaseName=dbname

它不适用于使用凭据的窗口身份验证，`"MSSQLDomain\username"`即`"abc\username"`使用以下 url

> jdbc:sqlserver://%DB_IP%:%DB_PORT%;SelectMethod=cursor;integratedSecurity=true;DatabaseName=dbname;

给出以下错误。用户 '' 登录失败。用户未与受信任的 SQL Server 连接关联。

我尝试将属性 Trusted_Connection=Yes 添加到 url，但仍然给出相同的错误。我不想映射 SQL Server 的驱动器。通过提供“MSSQLDomain\username”和密码，我可以访问 SQL Server 机器的任何共享文件夹。

如果两台机器都在同一个域中，它适用于两种身份验证模式。如果我从不在域或同一网络（即同一子网）内的“xyz”域中的机器上使用 jtDS 驱动程序，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T10:36:48.963

这是 Windows 身份验证的故意和正确行为。

这是因为您从中连接的域与您的 SQL Server 实例所在的 Windows 域不同。

我相信可以说有一些方法可以桥接域，但是它们需要自定义和棘手的实现。您还必须配置域之间的信任关系。

以下主题包含您可能会发现有用的讨论。

[http://sql-server-performance.com/Community/forums/p/24601/137574.aspx](http://sql-server-performance.com/Community/forums/p/24601/137574.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-19T09:34:49.730

更改登录凭据可能会有所帮助，请使用 SQL 身份验证而不是 nt 身份验证

[https://support.microsoft.com/en-us/kb/555332](https://support.microsoft.com/en-us/kb/555332)

# 症状

安装 Microsoft SQL Server 2014、SQL Server 2012、SQL Server 2008、SQL Server 2005 或 SQL Server 2000 并尝试连接到运行 SQL Server 的服务器后，您会收到以下错误消息之一：

用户 '%.*ls' 登录失败。该登录名是 SQL Server 登录名，不能与 Windows 身份验证一起使用。%.*ls

用户 '' 登录失败。用户未与受信任的 SQL Server 连接关联。（Microsoft SQL Server，错误：18452）

用户 '' 登录失败。（Microsoft SQL Server，错误：18456）

# 解析度

如果用户尝试使用无法验证的凭据登录，则会出现此问题。在以下情况下可能会出现此问题：

# 场景一：

登录可能是 SQL Server 登录，但服务器只接受 Windows 身份验证

要解决此问题，请将 SQL Server 配置为混合身份验证模式。

# 场景二：

您正在尝试使用 SQL Server 身份验证进行连接，但使用的登录名在 SQL Server 上不存在

要解决此问题，请验证 SQL Server 登录是否存在。有关详细信息，请参阅 SQL Server 联机丛书中的创建登录。

# 场景 3：

登录可能使用 Windows 身份验证，但登录是无法识别的 Windows 主体

无法识别的 Windows 主体意味着 Windows 无法验证登录。这可能是因为 Windows 登录来自不受信任的域。要解决此问题，请确认您登录到正确的域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T10:55:58.100

我参与了跨域的 SQL 服务器连接，这非常痛苦。为了使用来自另一个域的凭据，您分配权限的域必须信任该帐户来自的域。IT 专业人员通常非常不愿意以这种方式信任另一个域，这是有充分理由的，因此如果尚未建立这种信任关系，它可能不太可能说服管理员这样做。

建立信任关系后，您可能需要在 Active Directory 中为您的 SQL 服务器注册 SPN，并分配委派权限。这种类型的环境很难设置、排除故障和维护。

我希望有其他方法可以做到这一点，因为听起来你正面临一个非常困难的情况。

希望对日韩有帮助

# c# - 使用带有字符串的 Subsonic.Select() ExecuteTypedList 方法

> ID：881929
> 
> 赞同：2
> 
> 时间：2009-05-19T10:16:44.900
> 
> 标签：c#, generics, subsonic

这更多的是关于仿制药而不是亚音速的问题：

想象一下，如果有以下代码：

```
 List<int> result = 
      DB.Select(Product.Columns.Id)
        .From<Product>()
        .ExecuteTypedList<int>(); 
```

这很好用，并返回一个带有我 Product 表中 id 的通用列表。

但是，如果我想获得 ProductName 的列表：

```
 List<String> result = 
      DB.Select(Product.Columns.ProductName)
        .From<Product>()
        .ExecuteTypedList<String>(); 
```

它抛出一个编译器消息（从德语翻译）：

> “字符串”必须是具有不带参数的公共构造函数的非抽象类型，才能用作泛型类型或在泛型方法“SubSonic.SqlQuery.ExecuteTypedList()”中用作参数“T”。

原因：字符串没有空的构造函数：

```
int i = new int;       // works
String s = new String; // compiler error: "string" does not contain a constructor that takes '0' argument 
```

~~如果我使用 a`List<Object>`代替它可以工作~~，但是有没有更优雅的方式，我可以在哪里使用`List<String>`？

更新：`List<Object>`不起作用。我确实得到了一个对象列表，但这似乎是不包含我的 ProductNames 的“空”对象（ object.ToString() 返回`{Object}`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T17:04:39.553

使用一点点 dotnet 魔法，无需修补亚音速代码即可。

1.  创建一个新类 SubsonicSqlQueryExtensionMethods 并删除此代码：

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    using SubSonic;

    namespace MyUtil.ExtensionMethods
    {
        public static class SubSonicSqlQueryExtensionMethods
        {
            public static List<String> ExecuteTypedList(this SqlQuery qry)
            {
                List<String> list = new List<String>();
                foreach (System.Data.DataRow row in qry.ExecuteDataSet().Tables[0].Rows)
                {
                     list.Add((String)row[0]);
                }
                return list;
            }
        }
    } 
    ```

现在向您的类添加对 MyUtil.ExtensionMethods 的引用：

```
 using MyUtil.ExtensionMethods; 
```

最后这有效：

```
 List<String> result = DB.Select(User.Columns.Name).From<User>().ExecuteTypedList(); 
```

请注意，上面的扩展方法重载了没有类型参数的 ExecuteTypedList() 方法（不幸的是，这个片段需要 dotnet 3.5，但对我来说它有效）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-17T17:15:23.250

我知道我参加这个聚会迟到了，但我找到了一种巧妙的方法来“欺骗”这个问题。

```
 List<String> result = 
  DB.Select()
    .From<Product>()
    .ExecuteTypedList<String>().Select(p => p.ProductName).ToList<String>(); 
```

这对我来说就像一个魅力。

希望在某个地方可以帮助某人，因为我相信您已经解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T11:16:05.313

好吧，我可以想到这一点，但它几乎没有更优雅：

```
List<string>result=DB.Select(Products.Columns.ProductName)
.From<Product>()
.ExecutTypedList<StringBuilder>()
.ConvertAll(sb=>sb.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:55:21.123

看起来 SubSonic 对带有字符串值的 ExecuteTypedList 没有适当的支持。构建列表的方法首先查找 SubSonic 类型，如果没有匹配项，则检查 T 是否为值类型。由于 string 不是值类型，因此它会遇到最后一个条件，即尝试将属性名称与返回的列名称匹配。由于 string 没有您可以分配的属性名称，因此它会失败。

请参阅：BuildTypedResult 方法：[http ://subsonicproject.googlecode.com/svn/trunk/SubSonic/SqlQuery/SqlQuery.cs](http://subsonicproject.googlecode.com/svn/trunk/SubSonic/SqlQuery/SqlQuery.cs)

# perl - 如何使用 Perl 在文件中查找扩展的 ASCII 字符？

> ID：881931
> 
> 赞同：7
> 
> 时间：2009-05-19T10:17:33.823
> 
> 标签：perl, parsing, encoding, extended-ascii

如何使用 Perl 在文件中查找扩展的 ASCII 字符？谁能拿到剧本？

.....提前致谢.....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T10:32:28.350

由于扩展的[ASCII](http://en.wikipedia.org/wiki/ASCII)字符具有[128 或更高](http://www.asciitable.com/)的值，因此您可以对单个字符调用[ord](http://perldoc.perl.org/functions/ord.html)并处理值 >= 128 的字符。以下代码从标准输入读取并仅打印扩展的 ASCII 字符：

```
while (<>) {
  while (/(.)/g) {
    print($1) if (ord($1) >= 128);
  }
} 
```

或者，与[chr](http://perldoc.perl.org/functions/chr.html)一起[unpack](http://perldoc.perl.org/functions/unpack.html)也可以。例子：

```
while (<>) {
  foreach (unpack("C*", $_)) {
    print(chr($_)) if ($_ >= 128);
  }
} 
```

（我确信一些 Perl 大师可以将这两个都浓缩为两个单行...）

* * *

要改为打印行号，您可以使用以下内容（这不会删除重复项，并且在传递 unicode 时会有奇怪的行为）：

```
while (<>) {
  while (/(.)/g) {
    print($. . "\n") if (ord($1) >= 128);
  }
} 
```

（感谢[Yaakov Belch](https://stackoverflow.com/users/104746/yaakov-belch)的`$.`提示。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-19T11:04:53.337

第一个可打印的 ASCII 字符是`space`(32)。最后一个可打印的 ASCII 字符是`~`(126)。所以我可能会使用

```
while (<>) {
  print "$.\n" if /[^ -~]/;
} 
```

诚然，它也会显示包含控制字符和扩展 ASCII 的行。

**编辑：**更改为打印行号而不是行本身。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-19T12:27:17.947

单线：

```
perl -nE'say$.if/[\xE0-\xFF]/' 
```

对于旧的 perl 版本

```
perl -lne'print$.if/[\xE0-\xFF]/' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T12:38:47.890

一个关键的问题是是否

使用字节；

pragma 应该生效。海报应该决定这一点。对于选择代码大于 127 的*字符，以下内容就足够了：*

```
print grep 127 < ord, split // while <>; 
```

或者

```
print grep /[^[:ascii:]]/, split // while <>; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-24T14:41:49.023

Hynek -Pichi- Vychodil 的回答：

```
perl -nE'say$.if/[\xE0-\xFF]/' 
```

只测试非印刷的有限部分大概应该是

```
perl -nE'say$.if/[\x80-\xFF]/' 
```

反而。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-08T22:21:42.823

grep 呢？

```
grep [\x00-\x1F\x7F-\xFF]+ * 
```

# cocoa - 匹配核心数据存储中的近似字符串

> ID：881936
> 
> 赞同：12
> 
> 时间：2009-05-19T10:18:50.687
> 
> 标签：cocoa, string, core-data, levenshtein-distance

我目前正在编写的核心数据应用程序有一个小问题。我有两个不同的模型，上下文和永久存储。一个用于我的应用数据，另一个用于与我相关的网站。

大多数时候，我将我的应用程序中的一条记录与另一个来源的另一条记录完全匹配。然而，有时我不得不回退到模糊字符串匹配来链接两条记录。我正在尝试匹配歌曲标题。我的本地标题可能是（编造的）`"The French Idealist is in your pensée"`，而远程歌曲标题可能是`"01 - 10 - French idealist in in you're pensee, The (dub remix, feat. DJ Objective-C)"`

我搜索堆栈溢出、谷歌、可可文档，但在这些情况下我找不到任何关于如何进行模糊匹配的明确答案。我的字符串可以以任何开头，有一堆特殊字符，通常以随机或被忽略的字符结尾。

Regexp 不行，NSPredicates 也不行，Soundex 不能很好地处理外国名称，也许 Levenshtein 还不够（或者会吗？）。

我在一组大约十几个潜在的比赛中寻找一个标题，但我不得不做这个操作很多。100% 的准确率不是目标。

我正在考虑删除被忽略的单词，提取关键字（在本例中为“french, Idealist, pensée”），将它们连接起来，然后使用 Levenshtein 距离（歌曲标题中的单词应该按相同的顺序排列）。

在我的特殊情况下，它会起作用吗？关于这个问题的行业标准是什么（我不可能是世界上唯一一个想要匹配略有不同的歌曲名称的人）Core Data、Cocoa 或 Objective-C 可以帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T21:00:46.550

您希望您的搜索对变音符号不敏感，以匹配 pensée 中的 'é' 和 pensee 中的 'e'。您可以通过在属性后添加 [d] 来获得此信息。像这样：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(songTitle like[cd] %@)", yourSongSubstring];
```

[cd] 中的“c”用于不区分大小写。

由于您的字符串可以在您正在搜索的字符串中以任何顺序出现，您可以标记您的搜索字符串 ([... componentsByString:@" "]) 然后创建一个谓词，如

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(songTitle like[cd] %@) and (songTitle like[cd] %@)", songToken1, songToken2];
```

上面组合谓词的语法可能是关闭的，来自内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T21:36:13.077

我相信您要在这里使用的工具是[SearchKit](http://developer.apple.com/documentation/UserExperience/Conceptual/SearchKitConcepts/searchKit_intro/searchKit_intro.html)。我这么说好像我只是让你的工作变得轻松......我没有，但它应该有你在这里取得成功所需的工具。LNC 仍然免费提供他们的[SearchKit 播客](http://www.mac-developer-network.com/podcasts/lnc/lnc014/)（非常好）。

在这种情况下，每个轨道都是一个文档，您需要想出一个好方法来使用可用于查找它们的标识符来索引它们。然后，您可以使用元数据加载它们并搜索它们。也许将标题“放入”文档中将有助于此处使用相似性搜索 ( `kSKSearchOptionFindSimilar`)。这可能会或可能不会很好地工作。

您提出的问题是一个很好的问题，但它肯定没有行业标准，因为任何能够很好地解决这个问题的人（即每个主要搜索引擎）都将他们的算法保密。这是一个难题；没有人准备好给出他们的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:43:41.477

考虑*q-grams*，它是长度为 q 的子串（[Gravano et al., 2001](http://www.cs.umd.edu/class/spring2012/cmsc828L/Papers/GravanoVLDB01.pdf)）。

对于两个字符串 s1 和 s2，您可以为 s1 的每个 q-gram 确定具有最小编辑距离的 s2 的相应 q-gram。然后添加所有这些距离，最终得到一个对单词和额外字符的排列非常稳健的度量。

通常，q 应该适合您的问题域（实验 q = 3、4、5...）。

# java - 升级操作系统内核的方法

> ID：881957
> 
> 赞同：2
> 
> 时间：2009-05-19T10:23:01.800
> 
> 标签：java, c++, multithreading, operating-system, kernel

我希望进入操作系统内核开发，并认为我的贡献是扩展[SANOS](http://www.jbox.dk/sanos)操作系统以支持 JDK 1.6 和 1.7。我一直在阅读有关操作系统的书籍 (Tannenbaum) 以及研究 BSD 和 Linux 如何应对这一挑战，但仍然停留在几个概念上。

1.  当 SANOS 更多地从下往上开始时，告诉我需要支持哪些额外系统调用的最快方法是什么？

2.  如果我有一个需要支持的系统调用列表，如果它们本质上相似，那么将它们汇总的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T17:42:50.910

任何合理的 *nix 风格的操作系统应该具有的最小系统调用数是（恕我直言）：

*   打开
*   关闭
*   读
*   写
*   叉
*   执行
*   等待进程

前 4 个允许您为程序提供输入并获得其输出。（请记住，就操作系统而言，在 *nix 之类的操作系统上，stdout 只是另一个文件句柄）。

其他 3 个是启动另一个程序并等待其结果的最低要求。但是，可以肯定的是，SanOS 已经拥有这些，因为它已经是一个功能非常强大的操作系统。

您需要进行的添加完全有可能不需要在内核级别完成。

**编辑：**

至于支持更新的 JVM 所需的内容，[SanOS 网站上](http://www.jbox.dk/sanos/java.htm)的这一段给出了一个很好的提示：

> 您可以在 sanos 下运行 Windows 版本的 Sun HotSpot JVM。这是可能的，因为 sanos 支持标准的 PE 可执行格式（.EXE 和 .DLL 文件）。为诸如 kernel32.dll、user32.dll、wsock32.dll 等的 Win32 DLL 以及 C 运行时库 msvcrt.dll 提供了包装器。我已经使用以下 JVM 测试了 sanos：

基本上，JVM 是标准的 windows exe 文件。因此，您只需要找出引用的 dll 进行的系统调用，并确保它们存在并正确实现。

# c++ - 向非 Windows 操作系统添加蓝屏死机

> ID：881964
> 
> 赞同：4
> 
> 时间：2009-05-19T10:26:41.870
> 
> 标签：c++, linux, operating-system, kernel, bsd

我希望进入[操作系统内核开发领域](http://www.jbox.dk/sanos)，并且一直在阅读有关操作系统的书籍 (Tannenbaum) 以及研究 BSD 和 Linux 如何应对这一挑战，但仍然停留在几个概念上。

1.  如果我想在操作系统上模仿 Windows 蓝屏死机，我会简单地将这个逻辑放在[恐慌](http://www.jbox.dk/sanos)内核方法中吗？

2.  有没有办法改进 Windows 当前执行此功能的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T11:34:02.390

我不确定在哪里查看源代码，但您可能想查看 ReactOS，这是一个开源的 Windows 克隆，已经有 BSOD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T15:07:43.153

[BSD 实际上比使用DDB](http://www.openbsd.org/cgi-bin/man.cgi?query=ddb)的Windows 处理得更好:) 这是[FreeBSD 内核调试](http://www.freebsd.org/doc/en/books/developers-handbook/kerneldebug.html)文档
的另一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:09:59.553

1.  您可以在任何地方模拟 Windows 的错误检查功能。大多数 Linux 系统将它放在[XScreenSaver](http://www.jwz.org/xscreensaver/)中。

    但是，我怀疑这是否是您真正要问的。你问如何生成转储文件？

2.  为了改进 Windows 错误检查，Windows 驱动程序开发人员可以使用[KeRegisterBugCheckReasonCallback()](http://msdn.microsoft.com/en-us/library/ms801913.aspx)在生成的 minidump 中记录有关其驱动程序状态的更多信息。当未启用完整的内核/内存转储时，这可能会提高事后调试的有效性。

# wpf - 我有一个带有图像的列表框。我想一次选择和取消选择该列表框中的所有图像

> ID：881965
> 
> 赞同：0
> 
> 时间：2009-05-19T10:26:46.893
> 
> 标签：wpf, image, xaml, c#-3.0, listbox

我有一个带有图像的列表框。我想一次选择和取消选择该列表框中的所有图像。我为此使用单选按钮。一个单选按钮用于选择列表框中的所有图像，另一个单选按钮用于取消选择列表框中的所有图像。任何请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T10:33:41.810

我想你在 listBox.SelectAll(); 和 listBox.SelectedItems.Clear();

如果您使用数据绑定并且实际上并未在代码隐藏中引用您的 listBox ，那么情况就不同了，但从您的问题来看，我认为您不是。

# c++ - 构造函数访问规则

> ID：881966
> 
> 赞同：3
> 
> 时间：2009-05-19T10:28:09.747
> 
> 标签：c++, constructor

如果我编译（在 G++ 下）并运行以下代码，它会打印“Foo::Foo(int)”。然而，在将复制构造函数和赋值运算符设为私有后，它无法编译并出现以下错误：“错误：'Foo::Foo(const Foo&)' is private”。如果它只在运行时调用标准构造函数，它怎么需要一个复制构造函数？

```
#include <iostream>

using namespace std;

struct Foo {
    Foo(int x) {
        cout << __PRETTY_FUNCTION__ << endl;
    }

    Foo(const Foo& f) {
        cout << __PRETTY_FUNCTION__ << endl;
    }

    Foo& operator=(const Foo& f) {
        cout << __PRETTY_FUNCTION__ << endl;
        return *this;
    }
};

int main() {
    Foo f = Foo(3);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-19T10:29:36.203

这里使用了复制构造函数：

```
Foo f = Foo(3); 
```

这相当于：

```
Foo f( Foo(3) ); 
```

其中第一组括号是对复制构造函数的调用。您可以通过以下方式避免这种情况：

```
Foo f(3); 
```

请注意，编译器可能会选择优化复制构造函数调用，但复制构造函数必须仍然可用（即不是私有的）。C++ 标准特别允许这种优化（参见第 12.8/15 节），无论复制构造函数的实现实际上做了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T10:50:42.073

你所看到的，是标准优化允许的结果，当编译器避免创建临时的。即使存在副作用（例如您的示例中的 IO），编译器也可以用简单的构造替换构造和赋值。

但是程序是否格式错误的事实不应该取决于情况，编译器何时进行此优化。这就是为什么

```
Foo f = Foo(3); 
```

需要复制构造函数。和

```
Foo f(3); 
```

才不是。虽然它可能会导致相同的二进制代码。

引自 12.8.15

> 当满足某些条件时，允许实现省略类对象的复制构造，即使对象的复制构造函数和/或析构函数具有副作用。在这种情况下，实现将省略的复制操作的源和目标视为简单地引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被销毁的较晚时间优化.111) 在以下情况下允许省略复制操作（可以组合起来消除多个副本）：
> 
> — 在具有类返回类型的函数的 return 语句中，当表达式是与函数返回类型具有相同 cv 非限定类型的非易失性自动对象的名称时，可以通过构造自动对象来省略复制操作对象直接转化为函数的返回值
> 
> — 当一个未绑定到引用（12.2）的临时类对象将被复制到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到省略的目标中来省略复制操作复制

另见“返回值优化”。

# c# - 锚 IE 6 错误

> ID：881967
> 
> 赞同：2
> 
> 时间：2009-05-19T10:28:24.003
> 
> 标签：c#, asp.net, internet-explorer-6, anchor

我创建了一个这样的锚：

```
<a id="create" /> 
```

它适用于 IE 7，但不适用于 IE 6。

如何在 IE6 中修复它？

更多信息：

我正在使用 asp.net c#。我在 IE6 和 iframe 中运行它。屏幕只是刷新，面板不显示。但如果我不使用：

> Response.Redirect(Request.Url.PathAndQuery + "&New=1#create");

即如果我这样做：

> Response.Redirect(Request.Url.PathAndQuery + "&New=1");

它工作正常，但没有进入面板。顺便说一句：在 IE 7 下一切正常。它在 IE 6 或 iframe 中的 IE 6 中不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T11:38:13.223

IE 6 有一个奇怪的行为，它不能识别带有锚点的重定向。解决方法是在“#”之前添加额外的 & 符号“&”。所以，在你的例子中，代码看起来像`Response.Redirect(Request.Url.PathAndQuery + "&New=1&#create");`

如果浏览器是 IE 6，我建议你检查服务器端的 User-Agent 并添加这个额外的 & 符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T10:32:59.877

从记忆中，您使用“名称”属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:34:41.370

尝试使用 name='create'

# .net - 误报：SqlCommand、SqlParameter 和单引号

> ID：881974
> 
> 赞同：2
> 
> 时间：2009-05-19T10:30:20.180
> 
> 标签：.net, c++, sql-server, managed-c++

我正在尝试修复代码中的单引号错误：

```
std::string Index;

connection->Open();
String^ sTableName = gcnew String(TableName.c_str());
String^ insertstring = String::Format("INSERT INTO {0} (idx, rec, date) VALUES (@idx,    @rec, getdate())", sTableName);
SqlCommand^ command = gcnew SqlCommand(insertstring, connection);
String^ idx = gcnew String(Index.c_str());
command->Parameters->Add("@idx", SqlDbType::VarChar)->Value = idx; 
```

错误是如果 idx="that's"，SQL 会失败，说明存在语法错误。显然，问题出在报价单上。但是一些谷歌搜索表明使用参数是使用引号的方法。如果类型是 TEXT 而不是 VARCHAR，则 SqlParameter 运行良好。

除了手动将字符串中的引号符号数量加倍之外，还有其他解决方案吗？

更新：我尝试在 SQL Management Studio 中手动编辑此字段，但它不允许在 VARCHAR 字段中使用单引号。这在 SQL 中正常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T11:44:09.030

我怀疑问题是在您的表名中引用了引号，或者 idx 听起来更像是数字类型的名称而不是字符类型的名称。

* * *

根据您的更新，我建议您检查管理工作室中表格的额外限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T10:41:03.777

老实说，我从来没有遇到过 SqlParameters 的问题。但请尝试以下操作：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

```
command->Parameters->AddWithValue("@idx", idx); 
```

这应该为您工作并正确编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T10:36:48.183

如果你确定它是一个报价问题，那么，

C#代码：

```
idx = idx.Replace("'", "''"); 
```

将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T12:50:48.740

对不起。

问题出在 SQL 触发器的代码中。删除它们后，一切正常。

# .net - 关于在本地 LAN 上实施服务的一些建议。WCF 与 .Net 远程处理

> ID：881985
> 
> 赞同：2
> 
> 时间：2009-05-19T10:32:45.883
> 
> 标签：.net, wcf, remoting

我正在设计一个资源访问层，它将位于由 5 个工作站和 7 个服务器组成的 LAN 上的数据库服务器上。我对资源访问层的意图是向 LAN 上的任何 C# (.Net 3.5) 客户端公开一组定义良好的 C# 方法，并允许客户端访问存储在 DBMS 中的数据，而无需了解数据是如何存储的被访问。这基本上是一个简单抽象的练习。

到目前为止，我已经配置了一个对象关系映射器来从 DBMS (MS SQL Server 2008) 中检索作为实体的数据。然后我编写了一个简单的数据访问类，它使用这些实体来检索和插入数据。示例方法包括 GetUser(Int ID) 和 SetUser(Int ID, String username, String password)。所有方法都采用并返回本机类型，而不是实体对象或类似的包装器。

我想让这个类在 LAN 上远程访问，这样任何 C# 客户端代码都可以使用相同的单例类来访问简单格式的数据。在 .Net 2.0 时代，显而易见的选择是使用 .Net 远程处理并声明类以继承 MarshalByRefObject。然而，随着 .Net 3.5 和 WCF 的到来，有更多的选择。

到目前为止，我一直不愿意将 WCF 用于资源访问层。据我了解，所有数据都作为 SOAP 消息传递，如果数据要遍历 Internet 并被多个平台访问，这正是您想要的，但这对于我的需要可能有点过头了。LAN 上的所有平台都是 windows vista 或 windows server 2008，都安装了 .net 3.5。没有真正需要将数据序列化为 XML，因为所有数据都是可能需要访问它的平台的本机数据。我担心的另一个问题是速度。该层需要尽可能快，如果需要将数据转码为 XML，则会产生开销。

我正在寻找有关在这种情况下使用的最佳 .Net 技术的任何建议。我可能忽略了 WCF 可以为我提供的一个重要好处，或者可能有一种方法可以将 WCF 配置为使用非常基本的有效负载。但是，如果我的担忧是有根据的，那么我将使用 .Net 远程处理来代替它。

为长问题道歉，欢迎任何建议。

谢谢你的时间，

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T16:16:06.920

WCF 速度非常快，并且对于正确设计的使用，它通常比 .NET 远程处理更快。Adinochestva 发布的第一篇文章讨论了序列化 .NET 数据集的性能，这是最坏的情况。

为了帮助您决定将哪种绑定与 WCF 一起用于您的目的，请查看 CoDe 杂志的这篇文章。顶部的流程图很有帮助： [http ://www.code-magazine.com/article.aspx?quickid=0605051&page=3](http://www.code-magazine.com/article.aspx?quickid=0605051&page=3)

接近尾声有对各种绑定和它们使用的序列化方法的描述。

使用 .NET 远程处理，您还需要在客户端和服务上共享二进制依赖项，这不是 WCF 的要求。通过这种方式，您可以获得远程处理无法获得的版本控制支持。远程处理也是微软不再投资的一项技术……然而，他们正在大力投资 WCF。

希望您会发现 WCF 的好处超过了它的局限性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T10:36:30.180

您可以在此处查看比较[或](http://geekswithblogs.net/marcel/archive/2007/04/12/111542.aspx)微软在[此处](http://msdn.microsoft.com/en-us/library/bb310550.aspx)进行的比较 但是如果选择使用 wcf ，请确保您没有为每个请求创建 ChannelFactory

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:27:18.160

使用 WCF，您可以使用非常快的 TCP/IP 绑定，但只能在 Windows 平台上运行（在您的情况下可以）。它就像任何 Web 服务一样工作，除了它使用 net.tcp:// 而不是绑定到 http://

# visual-studio-2008 - 为什么 Visual Studio 中的 F10（跨步）不起作用？

> ID：881992
> 
> 赞同：17
> 
> 时间：2009-05-19T10:35:13.757
> 
> 标签：visual-studio-2008, debugging, breakpoints

我正在 Visual Studio 2008 中调试一个（Web）项目。我遇到了断点。正如预期的那样，F10 继续到下一行，但下一个 F10 只是停止调试，代码继续运行，不再进行任何调试（如按 F5）。为什么会这样？

*   我试过“干净的解决方案”。
*   即使在相同的方法中，有时也会跳过其他断点（！）

有什么线索吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-19T18:18:01.137

这可能是因为您没有 Visual Studio 2008 的更新 kb 957912。这在我的机器上解决了同样的问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-19T10:53:12.143

确保您处于调试模式而不是发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T10:55:54.900

如果不了解您的应用程序的更多信息，很难说，但通常这种事情发生在进程启动线程或进入没有任何调试信息的代码时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T11:01:09.227

执行相关指令时可能出现异常。尝试启用所有异常以闯入调试器并检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T11:04:23.870

听起来您几乎拥有调试的默认设置。如果您转到：工具
- 选项 - 调试 在常规部分下，有一个“仅启用我的代码”选项默认情况下已选中，如果您取消选中，您应该能够进入您想要查看的代码。

在不了解您引用的项目和代码的更多信息的情况下，这是我对您为什么无法进入代码的最佳猜测。

希望对日韩有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T17:30:19.333

F10 是跨步。这意味着当前方法调用的任何方法都不会显示在调试器中。如果这些抛出未捕获的异常或以某种方式结束执行，则调试将结束，这将导致您遇到的情况。

在单步执行代码时，F11（Step Into）通常是一个更好的主意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T17:40:54.327

它可能会跳过线程中最后执行的代码，或者以某种方式返回到 UI 线程。如果它是一个 GUI 应用程序，请尝试执行一些调用事件处理程序的操作，并查看它是否在下一次执行时中断。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-04T21:36:20.133

我在开发在本地计算机上的 IIS 上运行的 Web 应用程序时遇到了这个问题。我发现打开任务管理器并终止进程（w3wp），然后再次尝试使问题暂时消失。

# sql-server-2005 - 将 xls 记录上传到数据库的有效方法

> ID：881994
> 
> 赞同：2
> 
> 时间：2009-05-19T10:35:18.797
> 
> 标签：sql-server-2005, vb6, ado

将记录从 excel 文件上传到数据库中的表的最有效方法是什么。我不允许使用 DTS/SSIS。所以我想知道是否有比从文件中顺序读取记录和触发命令更好的选择。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T15:33:08.960

Do you have permissions for [bulk inserting](http://msdn.microsoft.com/en-us/library/ms188365.aspx)?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:35:26.837

You could use the [bcp](http://msdn.microsoft.com/en-us/library/aa174646.aspx) utility. Save the Excel file as text and bcp it in. You don't usually need bulk insert privileges to do that.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T11:27:59.593

我建议您通过 ADODB 连接使用 ODBC/DSN 连接到 excel 文件。我发现这是非常有效的。

您首先通过以下方式创建一个 ODBC 数据源名称：控制面板>管理工具>数据源 (ODBC)。选择“系统”选项卡，然后单击“添加”。从出现的驱动程序列表中选择“Microsoft Excel 驱动程序”。为您的 DSN 命名，例如“MYDB”，然后浏览 xlS 文件并双击选择。

这可以通过编程方式完成，只是我们像 5 年前一样创建了一个 dll 来完成它，而我仍在尝试找到它的源代码。我一得到它就会发布它的代码。

然后从您的程序中，您可以按如下方式连接到您的 DSN：

```
 'declare the connection
   Global MyConn As New ADODB.Connection

  'open the connection
   MyConn.Open "DSN=MYDB;pwd=;" 
```

然后，您可以通过 ADODB 记录集以正常方式操作连接。

我希望这有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T16:07:05.227

[这个页面](http://cheeso.members.winisp.net/srcview.aspx?dir=MSOffice&file=CopyData-SqlToExcel-TwoOledbConnections.cs)有相反的代码——从 SQL Server 中提取数据并将其插入 Excel。您需要做的就是交换连接字符串。

像这样：

```
 private System.Data.OleDb.OleDbDataAdapter da ;
    private System.Data.DataSet ds;

    string sqlSelect="SELECT ProductId, ProductName, QuantityPerUnit, UnitPrice, UnitsInStock, GETDATE() as TimeExtracted  from Products order by UnitPrice";

    string sqlInsert="INSERT INTO Foo (ProductId, ProductName, QuantityPerUnit, UnitPrice, UnitsInStock, TimeExtracted) VALUES (@ProductId, @ProductName, @QuantityPerUnit, @UnitPrice, @UnitsInStock, @TimeExtracted)"; 

    string ExtractedTableName= "ExtractedData";

    private void ReadFromSource()
    {
        System.Console.WriteLine("Reading from Source...");

        string ConnStringSource= 
            "Provider=Microsoft.Jet.OLEDB.4.0;" + 
            "Data Source=" + ExcelFilename + ";" + 
                                             "Extended Properties=\"Excel 8.0;HDR=yes;\"";  // FIRSTROWHASNAMES=1;READONLY=false\"

        using (var conn= new System.Data.OleDb.OleDbConnection(ConnStringSource))
        {
            da= new System.Data.OleDb.OleDbDataAdapter();
            da.SelectCommand=  new System.Data.OleDb.OleDbCommand(sqlSelect);
            da.SelectCommand.Connection= conn;

            // this tells the DA to mark all rows as newly inserted.
            // upon calling da.Update() (later), all those rows will
            // be inserted into the DB.
            da.AcceptChangesDuringFill= false;

            ds= new System.Data.DataSet();
            da.Fill(ds, ExtractedTableName);
        }
    }

    private void InsertIntoDestination()
    {
        System.Console.WriteLine("Inserting data into Destination...");

        string ConnStringDest= "Provider=sqloledb;Data Source=(local);Initial Catalog=Northwind;Integrated Security=SSPI;";

        using (var conn= new System.Data.OleDb.OleDbConnection(ConnStringDest))
        {

            System.Data.OleDb.OleDbCommand cmd= new System.Data.OleDb.OleDbCommand(sqlInsert);

            cmd.Parameters.Add("@ProductId", System.Data.OleDb.OleDbType.Integer, 4, "ProductId");
            cmd.Parameters.Add("@ProductName", System.Data.OleDb.OleDbType.VarWChar, 40, "ProductName");
            cmd.Parameters.Add("@QuantityPerUnit", System.Data.OleDb.OleDbType.VarWChar, 20, "QuantityPerUnit");
            cmd.Parameters.Add("@UnitPrice", System.Data.OleDb.OleDbType.Currency, 8, "UnitPrice");
            cmd.Parameters.Add("@UnitsInStock", System.Data.OleDb.OleDbType.SmallInt, 2, "UnitsInStock");
            cmd.Parameters.Add("@TimeExtracted", System.Data.OleDb.OleDbType.Date, 8, "TimeExtracted");

            da.InsertCommand=  cmd;
            da.InsertCommand.Connection= conn;

            da.Update(ds, ExtractedTableName);

            // in the event you want to update a datasource via a different DataAdapter --
            // for example you want to fill from a System.Data.SqlClient.DataAdapter and
            // then Update via a System.Data.Oledb.OledbDataAdapter -- then you could define
            // two distinct DataAdapters.  Fill the DataSet with the first DA, then Update
            // with the second DA. 
        }
    } 
```*****************