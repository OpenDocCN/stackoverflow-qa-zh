# StackOverflow 问答 11566000-11566999

# jquery - jQuery 照片导航器功能 - 下一个和上一个按钮

> ID：11566005
> 
> 赞同：0
> 
> 时间：2012-07-19T17:17:10.283
> 
> 标签：jquery, photo-gallery, navigationcontroller

我已经为照片导航器编写了一些 jQuery，但是当我按下“返回”按钮时它不起作用。但是，当我首先单击“下一步”按钮时，后退按钮确实有效。更糟糕的是，当我首先单击“返回”按钮时，“下一步”按钮停止工作。有任何想法吗？

这是 2 个按钮的代码：

```
/* === Previous Button === */

$("#photo_show a#back").click(function(event) {

    var placeHolder2 = curPhoto;
    event.preventDefault();
    nextPhoto = curPhoto;
    curPhoto = placeHolder2.prev(); 
    if(curPhoto.length == 0){
            curPhoto = $("#gallery a:last");
    }
    $("span#display_photo").html("<img id=\"display_photo\" src=\"" + curPhoto.attr("href") + "\" width=\"500\" height=\"350\"/>");
    $("p#caption").html("<p id=\"caption\"><em>" + curPhoto.attr("title") + "</em></p>")    
});

/* === Next Button === */

$("#photo_show a#next").click(function(event) {

    var placeHolder = nextPhoto;
    event.preventDefault();
    curPhoto = nextPhoto;
    nextPhoto = placeHolder.next();
    if(nextPhoto.length == 0){
        nextPhoto = $("#gallery a:first");
    }

    $("span#display_photo").html("<img id=\"display_photo\" src=\"" + curPhoto.attr("href") + "\" width=\"500\" height=\"350\"/>");
    $("p#caption").html("<p id=\"caption\"><em>" + curPhoto.attr("title") + "</em></p>")
}); 
```

# android - 如何将文档添加到自定义属性？

> ID：11566006
> 
> 赞同：21
> 
> 时间：2012-07-19T17:17:11.440
> 
> 标签：android, xml, android-xml, attr

我知道如何为视图创建自定义属性，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="SomeViewsCustomAttrs">
        <attr name="someAttr" format="dimension" />
        <attr name="anotherAttr" format="boolean" />
    </declare-styleable>
</resources> 
```

我想知道是否有办法向这些自定义属性添加文档。在 XML 编辑器中编辑布局时，您可以获得描述属性的工具提示。例如，如果您正在输入`android:layout_width=`，它将为您提供以下信息，“指定视图的基本宽度。[维度，枚举]”

有没有办法为你自己的 attrs 提供它？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-15T13:50:22.487

为每个元素添加 XML 注释：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="SomeViewsCustomAttrs">
        <!-- Default highlight color for items that are pressed. -->
        <attr name="colorPressedHighlight" format="color" />
        <!-- Default highlight color for items that are long-pressed. -->
        <attr name="colorLongPressedHighlight" format="color" />
    </declare-styleable>
</resources> 
```

在您的视图的 Java 源文件中的 Java Doc 中链接到这样的属性（来自[TextView](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/TextView.java)的示例）：

```
* See {@link android.R.styleable#TextView TextView Attributes}, {@link android.R.styleable#View View Attributes} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-24T19:49:21.080

您需要在代码中编写构造函数，然后将它们链接到 xml。阅读[此](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)内容以获取更多信息。

# c++ - DirectShow 编译问题

> ID：11566007
> 
> 赞同：2
> 
> 时间：2012-07-19T17:17:12.953
> 
> 标签：c++, windows, directshow

我正在 64 位平台和 Windows SDKv 7.1 上使用 vs2010。我为 64 位平台构建了基类并在我的项目中进行了配置。但我面临以下问题。我正在尝试连接罗技 910 高清摄像机。

```
1>LogitechC910Interface.obj : error LNK2001: unresolved external symbol __imp_VariantClear
1>LogitechC910Interface.obj : error LNK2001: unresolved external symbol __imp_CoCreateInstance
1>LogitechC910Interface.obj : error LNK2001: unresolved external symbol __imp_CoUninitialize
1>LogitechC910Interface.obj : error LNK2001: unresolved external symbol __imp_VariantInit
1>LogitechC910Interface.obj : error LNK2001: unresolved external symbol __imp_CoInitializeEx
1>C:\PMD\windows\windows64bit\PMDSDK\examples\Release\simple.exe : fatal error LNK1120: 5 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T17:22:42.300

您需要查看项目设置以确保链接器使用相应`.LIB`的方法找到未解析符号的方式。对于您提到的那些，您需要`ole32.lib`and `oleaut32.lib`。或添加到源代码中（而不是项目设置）：

```
#pragma comment(lib, "ole32.lib")
#pragma comment(lib, "oleaut32.lib") 
```

# c# - 使用 HtmlAgilityPack 删除 HtmlNode 内的 HtmlNode

> ID：11566008
> 
> 赞同：1
> 
> 时间：2012-07-19T17:17:20.563
> 
> 标签：c#, html, html-agility-pack, nodes, removechild

如何从房子中删除数字节点及其值？

**文件**：

```
<number>123456</number>
<house> <number> </number>Red</house>
<house> <number>12</number>Blue</house>
<number>345345</number>
etc... 
```

**代码：**

```
private void getHouse(string houseHtml)
{
    HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

    htmlDoc.Load(new System.IO.StringReader(houseHtml));

    foreach (HtmlAgilityPack.HtmlNode house in htmlDoc.DocumentNode.SelectNodes("//house"))
    {
        MessageBox.Show(house.InnerText);
    }
} 
```

**结果：**

```
 Red
12Blue 
```

**要求的结果**

```
Red
Blue 
```

我一直在尝试使用：

```
house.RemoveChild(house.SelectSingleNode("//number")); 
```

以及其他一些组合并运行到“在集合中找不到节点”或什么都不会发生。它还将选择最上面的数字，而不是房屋标签内的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:26:53.180

为什么不直接删除节点？

```
var numbers = htmlDoc.DocumentNode.SelectNodes("//house/number");
if (numbers != null) {
    foreach(var node in number) 
        node.Remove();
} 
```

无论如何，您的 XPath 选择所有节点的原因是因为您需要提供相对于当前节点的路径：

```
house.SelectSingleNode("//number"); // wrong
house.SelectSingleNode(".//number"); // right 
```

# c# - LinqToXML 对多个子层进行正确的空值检查

> ID：11566014
> 
> 赞同：1
> 
> 时间：2012-07-19T17:17:40.330
> 
> 标签：c#, linq-to-xml

假设我期待 XML 如下，并且我试图在 layer3 中提取数据：

```
<Layer1>
   <Layer2>
      <Layer3>Test</Layer3>
   </Layer2>
</Layer1> 
```

C＃：

```
var data = doc.Element("Layer1").Element("Layer2").Element("Layer3"); 
```

如果缺少 layer1 或 layer2 元素，这将导致 null 异常。我一直在用 try/catch 包装这些查询，并在 catch 块中默认变量，但这种方法有异味。如果缺少任何图层，是否有更好的方法将“数据”变量设置为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:19:47.667

```
var data = doc.Elements("Layer1").Elements("Layer2").Elements("Layer3").SingleOrDefault(); 
```

注意**Element*s***的使用。

[`IEnumerable<T : XContainer>.Elements`](http://msdn.microsoft.com/en-us/library/bb351784.aspx)返回子元素的*集合*。集合可能为空，但不会为空。因此，您可以链接`Elements`调用而不必担心`NullReferenceException`.

* * *

附带说明一下，这就是 VB 在您编写时所做的

```
Dim data = doc.<Layer1>.<Layer2>.<Layer3>.SingleOrDefault() 
```

（尽管在 VB 中，您将使用方便的[`IEnumerable<XElements>.Value`扩展方法](http://msdn.microsoft.com/en-us/library/bb384768.aspx)而不是 SingleOrDefault，不幸的是，它在 C# 中不可用。如果您知道 C# 等效项，请留下评论。）

# json - 使用 JSON 配置创建 Ext.data.Model

> ID：11566015
> 
> 赞同：0
> 
> 时间：2012-07-19T17:17:51.697
> 
> 标签：json, extjs4

在我们正在开发的应用程序中，我们使用动态生成的配置（JSON 对象）在服务器端创建所有 JSON。我们将其用于商店（和其他东西，如 GUI），并使用动态生成的数据字段列表。

使用这样的 JSON：

```
{
"proxy": {
    "type": "rest",
    "url": "/feature/163",
    "timeout": 600000
},
"baseParams": {
    "node": "163"
},
"fields": [{"name": "id", "type": "int" },
    {"name": "iconCls", "type": "auto"},
    {"name": "text","type": "string"
    },{ "name": "name", "type": "auto"}
    ],
"xtype": "jsonstore",
"autoLoad": true,
"autoDestroy": true
}, ... 
```

Ext 会轻轻地创建一个“隐式模型”，我可以使用它，将它加载到表单上，保存它，删除它等等。

我想要的是通过 JSON 配置指定的不是字段，而是模型本身。这可能吗？

就像是：

```
{
model: {
       name: 'MiClass',
       extends: 'Ext.data.Model',
       "proxy": {
    "type": "rest",
    "url": "/feature/163",
    "timeout": 600000},
        etc... }
"autoLoad": true,
"autoDestroy": true
}, ... 
```

这样我就可以从服务器创建一个完整的 JSON，而不必在客户端使用 JS 语句来粘合东西。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:43:29.210

我不明白为什么不。创建模型类的语法类似于 store 和 components 的语法：

```
Ext.define('MyApp.model.MyClass', {
    extend:'Ext.data.Model',
    fields:[..]
}); 
```

所以如果你把它拆开，你可以调用`Ext.define(className,config);` where`className`是一个字符串和`config`一个 JSON 对象，两者都是在服务器上生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:20:58.927

没有办法实现我想要的。您可以做到这一点的唯一方法是定义 Ext.data.Store 的字段并让它通过使用字段配置生成隐式模型。

# php - mysql选择不在多对多关系中的行

> ID：11566016
> 
> 赞同：4
> 
> 时间：2012-07-19T17:17:52.267
> 
> 标签：php, mysql, sql

我有一个数据结构，其中学生和组具有多对多关系。我有三张桌子

> 学生：身份证，姓名
> 
> 组：ID，名称
> 
> 学生组：学生ID，组ID

如何只选择不属于特定组的学生（例如 group.id = 1）？

我做了一些搜索并尝试使用子查询，但只得到一个空集......

```
select * from students where not exists (select students.* from students left join students_groups on students_groups.student_id = student.id where students_groups.group_id = 1); 
```

我应该如何查询？提前谢谢！

**编辑** 好的，看来以下两个终于可以工作了...有人可以向我解释为什么我不需要加入表格就可以工作吗？？？

```
select * from students where not exists (select * from students_groups where students_groups.student_id = student.id and student_groups.group_id = 1);

select * from students where id not in (select student_id from students_groups where group_id = 1); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T17:23:05.010

使用 a`NOT IN`应该可以正常工作：

```
SELECT * FROM Students
WHERE Id NOT IN (
    SELECT Student_Id FROM Students_Groups
    WHERE Group_Id = 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:41:51.197

编辑后的问题要求解释。

将 SQL 查询视为文本中的[维恩图](http://en.wikipedia.org/wiki/Venn_diagram)。每个子句要么定义一个内容圈，要么告诉您您感兴趣的完整重叠圈图的哪一部分。

```
select * from students where id not in (select student_id from students_groups where group_id = 1); 
```

一圈是学生桌。一个圆圈是 student_groups 表，其中 group_id = 1。圆圈重叠，students.id 等于 student_groups.student_id。您想要学生表中*不在*重叠区域的部分。

您不需要连接这些表，因为您的结果集仅包含来自学生表的数据。您正在使用另一个表来限制该结果集，而不是为您的结果提供数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T17:22:06.357

未经测试，但以下其中一项应该可以工作。您将不得不做一些事情`explain`，看看哪一个是最好的。

```
select * 
from students 
where not exists (select *
                  from students_groups 
                  where students_groups.student_id = student.id 
                  and students_groups.group_id = 1) 
```

或者...

```
select * 
from students 
where id not in (select student_id
                  from students_groups 
                  where group_id = 1) 
```

或者...

```
select students.id, students.name 
from students 
left outer join students_groups on students.id = students_groups.student_id
                                and students_groups.group_id = 1
where students_groups.student_id is null
group by students.id, students.name 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T17:24:27.960

你可以尝试这样的事情：

```
SELECT
    *
FROM
    students
WHERE
    id NOT IN
        ((SELECT 
            student_id
        FROM
            students_groups
        WHERE
            group_id = 1
        )) 
```

# javascript - Fluster 2如何以特定缩放级别显示所有标记

> ID：11566020
> 
> 赞同：0
> 
> 时间：2012-07-19T17:18:17.617
> 
> 标签：javascript, google-maps, markerclusterer

我正在使用 Fluster 2 对标记进行聚类，并发现 Fluster 聚类方法过于激进。因此，即使我放大到城市级别，我最终仍然拥有比我真正想要的更多的集群。有谁知道如何修改混乱的 .js 以使其在您说缩放级别 5 后显示所有标记？

这里有太多与fluster相关的代码要添加，所以这个问题更适合那些已经使用fluster来满足他们的标记聚类需求的人。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:18:20.027

好答案齐德。

顺便说一句，如果您有多个具有相同位置的标记，即使 gridSize 为 0，聚类仍然会发生。为了解决这个问题，请将网格设置为 -1

```
 google.maps.event.addListener(map, "zoom_changed", function() {

  var zoomLevel = map.getZoom();

  switch(true){
    case zoomLevel > 13:
      fluster.gridSize = -1;
          break;
    case zoomLevel > 12:
      fluster.gridSize = 10;
      break;
    case zoomLevel > 7:
      fluster.gridSize = 20;
      break;
    case zoomLevel > 5:
      fluster.gridSize = 40;
      break;
    default:
      fluster.gridSize = 60;
      break;
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:05:23.353

您可以在地图的缩放级别上创建一个监听器，然后控制集群。这是您的代码应该是什么样子的示例。我还没有测试过代码，我从中获取代码的完整教程在[这里](http://codesnipp.it/javascript/google-maps-v3-with-fancybox-clustering)。

```
var fluster = new Fluster2(map);
// Set styles for the clustered icons
fluster.styles = {
  0: {
    image: "http://gmaps-utility-library.googlecode.com/svn/trunk/markerclusterer/1.0/images/m1.png",
    textColor: "#FFFFFF",
    width: 53,
    height: 52
  },
  10: {
    image: "http://gmaps-utility-library.googlecode.com/svn/trunk/markerclusterer/1.0/images/m2.png",
    textColor: "#FFFFFF",
    width: 56,
    height: 55
  },
  15: {
    image: "http://gmaps-utility-library.googlecode.com/svn/trunk/markerclusterer/1.0/images/m3.png",
    textColor: "#FFFFFF",
    width: 66,
    height: 65
  }
};
// Initialize Fluster
// This will set event handlers on the map and calculate clusters the first time.
fluster.initialize();

// Event listener for switching to Street View/Road Map to show/hide the
// close button, respectively
google.maps.event.addListener(panorama,"visible_changed",toggleVisible);

// Add a listener to the zoom change event so we can change the grid size
// of the cluster script. Should be dynamic!
google.maps.event.addListener(map, "zoom_changed", function() {

  var zoomLevel = map.getZoom();

  switch(true){
    case zoomLevel > 13:
      fluster.gridSize = 0;
      break;
    case zoomLevel > 12:
      fluster.gridSize = 10;
      break;
    case zoomLevel > 7:
      fluster.gridSize = 20;
      break;
    case zoomLevel > 5:
      fluster.gridSize = 40;
      break;
    default:
      fluster.gridSize = 60;
      break;
  }

}); 
```

# typo3 - TYPO3 中的 Powermail 2.0

> ID：11566021
> 
> 赞同：0
> 
> 时间：2012-07-19T17:18:19.940
> 
> 标签：typo3

我第一次在 TYPO3 4.7 中尝试 powermail 2.0，我在前端收到此错误消息：

> 无法确定默认控制器。请检查 ext_localconf.php 中的 Tx_Extbase_Utility_Extension::configurePlugin()。

我错过了什么？我已经插入了一个静态模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:41:10.607

我有同样的问题！我查看了我创建的表单，发现以某种方式检查了输入字段中自定义变量名称的复选框，并且值为空 {}。

所以不知何故扭曲了整个插件。现在它完美无缺！

来自奥地利安迪的问候

# paypal - 通过 API 访问 Paypal 帐户详细信息（每月销售报告）？

> ID：11566023
> 
> 赞同：2
> 
> 时间：2012-07-19T17:18:24.340
> 
> 标签：paypal

有什么方法可以让我们使用其 API 访问我们的贝宝帐户详细信息（例如每月/每日销售报告）？

我们有几个用于多个电子商务网站的贝宝帐户，我们需要每天报告昨天完成了多少销售，因此寻找任何可能与否的想法，如果是，而不是关于如何做的基本想法。

我们使用贝宝定期付款选项使用贝宝购物车付款。

提前致谢。

# ios - 是否可以删除应用程序图标徽章以使通知保留在通知中心？

> ID：11566024
> 
> 赞同：2
> 
> 时间：2012-07-19T17:18:28.957
> 
> 标签：ios

我的应用程序正在排队本地通知（并且还可以接收 APNs），因此应用程序的图标徽章被设置。

当应用程序启动时，我想清除图标徽章，但我希望通知保留在通知中心历史列表中。但这似乎不可能？将徽章计数设置为 0 具有从通知中心删除所有通知的效果。

有什么办法可以让它们留在那里，因此用户有责任删除它们，但同时清除应用程序的徽章？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T01:23:04.833

不，除非最近发生了变化，通知中心的通知与应用程序图标徽章相关联。

这段代码看起来应该只清除徽章，但是，它通常用于清除通知中心中的通知：

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

但是，使用该代码时，通知中心通知也会被清除。通知中心根据图标上显示的内容读取要显示的内容。

**资料来源**：

*   我自己的经历
*   [这个上一个问题](https://stackoverflow.com/questions/9978538/ios-remove-notification-from-notification-center)

# xml - xjc 的情节机制是否适用于包含而不是导入？

> ID：11566025
> 
> 赞同：1
> 
> 时间：2012-07-19T17:18:31.767
> 
> 标签：xml, xsd, xjc

我正在尝试使用*xjc* [单独的编译机制](http://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html)。

我首先编译一个 XML 模式，并将生成的类文件与剧集捆绑到一个 jar 文件中。然后我尝试编译另一个引用前一个模式的模式，但是尽管我遵循文档中描述的步骤（即，我将第一个 jar 文件指定为第二个模式调用*xjc*时的最后一个参数），但我没有设法使*xjc*使用另一个 jar 文件中的类，它会不断再次生成这些类。

由于我的模式引用相同的命名空间，我使用[xs:include](http://www.w3schools.com/schema/el_include.asp)而不是[xs:import](http://www.w3schools.com/schema/el_import.asp)并且我怀疑这可能是问题所在。

*xjc*单独编译机制是否支持 xs:include ？

（我的环境包括：xjc 2.1.10、java 1.6.0_24、SuSE Linux）。

# asp.net - 为 ASPNET 帐户添加权限

> ID：11566026
> 
> 赞同：1
> 
> 时间：2012-07-19T17:18:45.483
> 
> 标签：asp.net

我正在使用 PDFsharp（用于在 asp.net 中生成 pdf 文件），并收到错误“访问路径 'C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\Tax_receipt. pdf'被拒绝。”

我猜它正在尝试将文件写入此文件夹，因此我尝试向该文件夹添加具有写入权限的 ASPNET 帐户。我使用无法找到的“计算机名\ASPNET”和不起作用的“网络服务”。

有谁知道如何添加权限？非常感谢！！

编辑：

我最终使用 MemoryStream 而不是 FileStream，这样可以避免创建物理文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:37:21.950

我的猜测是您在 IIS v7.5 上托管。

如果是这种情况，您需要为您的 asp.net 应用程序分配到的应用程序池的应用程序池标识授予 ACL 权限。

例如，如果您已将 IIS 应用程序分配给默认应用程序池 (DefaultAppPool)，则需要授予权限`IIS AppPool\DefaultAppPool`（确保选择 IIS 服务器计算机名称作为位置）。

以下是一些相关资源：

[MS 支持文章](http://support.microsoft.com/kb/2005172)

[关于 SO 的类似问题](https://stackoverflow.com/questions/7334216/iis7-permissions-overview-applicationpoolidentity)

# blackberry - 要定位哪些 BlackBerry 设备/操作系统？（2012 年 7 月）

> ID：11566027
> 
> 赞同：3
> 
> 时间：2012-07-19T17:18:52.047
> 
> 标签：blackberry, blackberry-jde, blackberry-playbook

我们有一个相当简单的移动应用程序，为 iPhone 和 Android 完成，它执行以下操作：

*   查询 Web 服务以验证用户的帐户信息
*   显示动画以显示用户实际上拥有有效帐户

我们使用 Android 版本让应用程序在 PlayBook 上快速运行。

现在，客户要求我们探索让它在其他 BlackBerry 设备上运行。

我们对黑莓了解不多，从谷歌搜索 (http://us.blackberry.com/developers/choosingtargetos.jsp) 返回的问题的主要来源是 404 页面。

根据[这张图表](http://news.ebscer.com/2012/04/blackberry-smartphone-os-breakdown-unchanged/oschartmarch2012/)，仍然有各种各样的设备在使用。以哪些为目标有意义？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T21:07:00.367

去年我[在 stackoverflow](https://stackoverflow.com/a/8504593/119114)上发布了一个关于此的答案，但正如您所指出的，该链接最近已断开。

我发现唯一相似的是[这个 BlackBerry developer page](https://developer.blackberry.com/devzone/appworld)。例如，它显示付费应用程序正在由大约 97% 的 OS 5.0 及更高版本的设备购买。

从你告诉我的情况来看，我不知道你的应用程序在不同的设备上会有那么不同，除了智能手机与 Playbook 的明显差异。不同的设备肯定有不同的屏幕尺寸，所以你需要确保你的 UI 被编码以优雅地处理。

如果你们是 BlackBerry 新手，您可能希望远离 OS < 5.0。以前的操作系统版本（例如定位服务/地图、浏览器和网络）中有些东西有点难以使用，而且只有这么少比例的付费客户仍在使用小于 5.0 的操作系统，这可能不值得它给你。

所以，我想我建议您针对特定的**操作系统级别**（例如 5.0+）。这将是你如何构建应用程序的更大驱动力，而不是一组特定的设备。这是因为每个操作系统版本都添加了更多更好的 API 来使用。

一旦您决定了目标操作系统，那么您应该下载每个主要操作系统的 SDK。例如，如果您使用 Eclipse BlackBerry 插件，您可以安装 5.0 SDK（又名组件包）、6.0 SDK、7.0 和 7.1 SDK。

安装这些 SDK 后，您将拥有一堆模拟器（每个 SDK 都有一个**模拟器**文件夹）。在所有这些模拟器上运行您的应用程序，这可能是一个好的开始。

当然，也无法替代在真实硬件上运行，但如果您的应用程序主要执行标准操作（不与硬件传感器交互，仅显示网页并发出 HTTP 请求），模拟器应该为您提供一个非常好的测试环境. 他们肯定会给你所有的屏幕尺寸配置。

# c - 挑出奇数

> ID：11566028
> 
> 赞同：-2
> 
> 时间：2012-07-19T17:18:52.953
> 
> 标签：c

我想编写一个方法来返回最后一个未被删除的可用奇数位置。例如

* * *

`Say the number inputted to function is 5` `Then we can number as follows 1,2,3,4,5`

* * *

`After first pass, numbers left are - 2,4\. 1,3,5 have been removed After second pass - 2 has been removed and so we are left with 4`

* * *

`The function should return 4`. 在我的方法中，我创建了一个包含 n 个数字的数组。每个元素可能有一个值 0 或 1, 0 表示该元素没有被删除和 1 被删除。我的代码是

* * *

```
int findposition(int n)
{
int barr[n];
int count=0,i,begIndex=0;

for(i=0;i<n;i++)
    barr[i]=0;

while(n!=count+1)
{
    for(i=begIndex;i<n;i=i+2)
    {
        barr[i]=1;
    }

    for(i=0;i<n;i++)
    {
        if(barr[i]==0)
            begIndex=i;
    }

}

return (begIndex+1);
} 
```

* * *

上述函数编译成功，但从 main 方法调用时不打印任何内容。另外，我认为我的方法有点笨拙。有没有更简洁的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:34:22.773

如果您查看二进制位置符号中已删除对象的索引，您会发现在第一步中您删除了所有最后一位为 1 的数字。这给我们留下了 xxxx0 形式的数字，其中 xxxx 是某个范围内的所有二进制数字。所以你会得到**001** 0, **010** 0, **011** 0, **100 0。很明显，第二步删除了所有后缀为****10**的数字，你最终会得到**01** 00、10 **00、11** 00等。

 **显然，最后一个数字是尾随零最多的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:22:44.483

如果我正确理解了这个问题，则解决方案归结为找到输入数字的最高有效位。这只是[k = 2 的约瑟夫斯问题](http://en.wikipedia.org/wiki/Josephus_problem#k.3D2)。**

# extjs - Sencha touch 2 - 内存管理 - 破坏标签面板

> ID：11566031
> 
> 赞同：1
> 
> 时间：2012-07-19T17:19:08.570
> 
> 标签：extjs, sencha-touch-2

我想确保我的应用程序正确处理内存，我让它在“已擦除”事件上破坏面板，但是当我对选项卡面板执行此操作时，它显然会将它们从选项卡栏中删除。

什么策略最适合处理内存以及标签面板何时看不见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:52:34.123

这实际上可以做到，这是一项很棒的技术，但实施起来有点困难。首先，您不需要使用标签面板。您需要创建自己的选项卡面板版本。策略是这样的：

*   创建一个带有布局的容器：'card'。这个容器将容纳您的面板。
*   将工具栏停靠在此容器的底部，并使用不同的选项卡填充项目数组
*   在您的控制器中，为工具栏中的每个选项卡添加“控制”属性到您的配置对象，并监听选项卡“点击”事件；
*   在“点击”选项卡上，您会将每个视图呈现到您的容器中。
*   将“activeitemchange”事件侦听器添加到您的容器并销毁 oldCard。

不久前，当 Sencha Touch 2 处于预发布阶段时，我整理了一些样板。尽管某些代码需要升级，但这些概念仍然适用。看看这里：

[https://github.com/ARolek/Sencha-Touch-2.0-MVC-Boilerplate](https://github.com/ARolek/Sencha-Touch-2.0-MVC-Boilerplate)

这不是一个简单的概念，所以让我知道需要澄清什么。

希望这可以帮助。

# jsf - 在另一个 jspf 中包含 jspf

> ID：11566033
> 
> 赞同：2
> 
> 时间：2012-07-19T17:19:19.287
> 
> 标签：jsf, jsp-fragments

我正在开发一个关于 NetBeans 的 JSF 项目。我正在使用 JSPF 片段来实现模块化。我的 JSPF 目录是“/WEB-INF/jspf”。我`<jsp:include page="/WEB-INF/jspf/myincludefile.jspf"/>`用于包含 JSPF 文件。

问题是：我试图在另一个 JSPF 文件中包含一个 JSPF 文件，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-08T07:24:20.677

是的，我可以使用 include 指令以嵌套方式包含 JSPF：

```
<%@ include file="/WEB-INF/templates/signin-button.jspf"%> 
```

使用 JSTL 1.2

# java - 当我们知道HashMap中的值时获取key

> ID：11566039
> 
> 赞同：5
> 
> 时间：2012-07-19T17:19:37.263
> 
> 标签：java, data-structures

> **可能重复：**
> [Java Hashmap：如何从值中获取键？](https://stackoverflow.com/questions/1383797/java-hashmap-how-to-get-key-from-value)

我知道 HashMap 包含一个特定的整数变量作为值。如何获取与此值关联的键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T17:22:17.167

此代码将执行此操作：

```
 public List<Object> getKeysFromValue(Map<?, ?> hm, Object value){
    List <Object>list = new ArrayList<Object>();
    for(Object o:hm.keySet()){
        if(hm.get(o).equals(value)) {
            list.add(o);
        }
    }
    return list;
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:24:55.137

干得好：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Test
{
    public static void main( String args[] )
    {
        Map < Integer , Integer > map = new HashMap < Integer , Integer >();

        map.put( 1 , 2 );
        map.put( 3 , 4 );
        map.put( 5 , 6 );
        map.put( 7 , 4 );

        List< Integer > keys = new ArrayList< Integer >();

        Integer value = 4;

        for ( Integer key : map.keySet() )
        {
            if ( map.get( key ).equals( value ) )
            {
                keys.add( key );
            }
        }

        System.out.println( value + " has been found in the following keys: " + keys );
    }
} 
```

输出是：

```
4 has been found in the following keys: [7, 3] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T17:29:06.053

```
Set<Map.Entry> entries = hashMap.entrySet();
for(Map.Entry entry : entries) {
   if(entry.getValue().equals(givenValue)) {
       return entry.getKey();
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T17:21:14.967

如果您知道键，哈希图可以帮助您找到值。如果您真的想从值中获取键，则必须遍历所有项目，比较值，然后获取键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T17:33:03.023

遍历 entrySet 更快，因为您不会为每个键查询两次映射。

```
public Set<Object> getKeysFromValue(Map<Object, Integer> map, int value) {
        Set<Object> keys = new HashSet<Object>();
        for (Map.Entry<Object, Integer> entry:map.entrySet()) {
            //if value != null
            if (entry.getValue() == value) {
                keys.add(entry.getKey());
            }
        }
return keys; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T17:34:10.787

**试试这个......简短而甜蜜的方式......**

```
HashMap<String, Integer> list = new HashMap<String,Integer>();

        for (Map.Entry<String, Integer> arr : list.entrySet()){

                System.out.println(arr.getKey()+" "+arr.getValue()); 
        } 
```

# php - 在 PHP 中有效地测试多个值

> ID：11566042
> 
> 赞同：1
> 
> 时间：2012-07-19T17:19:39.213
> 
> 标签：php

好的，所以我有一些可能的匹配项需要测试。它可以等于**A**或**B**，因此测试它的明显方法是这样的：

```
if($val=="A"||$val="B"){
    echo "yup";
} 
```

我只是想知道它们是否是一种更简单的方法来测试值而无需为每个值重新指定变量，就像这样（我知道这不起作用）：

```
if($val==("A"||"B")){
    echo "yuppers";
} 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T17:21:25.247

您可以使用`in_array`

```
$array = array('A','B','other values');
if(in_array($val, $array)){
    // value is in array
}else {
    // invalid value
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:21:52.373

您可以使用[`in_array`](http://php.net/in-array)：

```
if (in_array($val, array('A', 'B'))) {
    echo 'yuppest';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T17:22:39.960

您可以将“A”和“B”添加到数组并使用`in_array`方法，但这绝对不会比`$val=="A" || $val =="B"`

# css - 使用 rem 调整（字体）大小时 !important 声明的效果

> ID：11566043
> 
> 赞同：0
> 
> 时间：2012-07-19T17:19:46.400
> 
> 标签：css, font-size

**更新：**请注意，我仅在 Chrome（最新版本）中看到此问题。Firefox 中的一切似乎都很好。

**[根据定义](http://snook.ca/archives/html_and_css/font-size-with-rem)：**

> rem 单位是相对于根元素或`<html>`元素的。这意味着我们可以在`<html>`元素上定义单个字体大小，并将所有 rem 单位定义为其百分比。

让我用一个例子来解释我的情况......

**相关CSS：**

```
html {
    font-size: 87.5%;
}

body {
    font-size: 17px;
    font-size: 1.21428571rem;
}

code {
    font-size: 14px !important;
    font-size: 1rem !important;
} 
```

我正在使用`!important`声明来覆盖内联代码的字体大小。

问题是，我注意到代码块的字体大小远小于 14px，很可能是 12px。但是，如果我删除`!important`声明并在特定`code`元素上设置字体大小（为特定的内联代码元素设置样式），则字体大小看起来很好，看起来是 14 像素。

您对声明如何`!important`影响`rem`'s 的大小有任何想法吗？（特别是考虑到我的情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:29:49.877

首先`!important`是懒惰的编码和可维护性的危险。它是有毒的并且破坏了 CSS（级联部分）的性质。不惜一切代价避免它。

第二：

```
code {
    font-size: 14px !important;
    font-size: 1rem !important;
} 
```

也可以这样写：

```
code {
    font-size: 1rem !important;
} 
```

第二条规则覆盖第一条（同样，CSS 的级联性质）

`rem`代表根em，即顶层元素（即html）的字体大小

以及您的规则所说的 1 x html 元素的 em，是浏览器默认值的 87.5%。

**编辑：**

您的`<p>`标签有`font-size`100% 继承自父元素，该父元素最终继承自`body`并`body`具有`1.2142857rem`大约 17px 这就是为什么您会看到字体大小的差异，而等宽字体和无衬线字体的差异也加剧了这种差异字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:40:03.960

好的，问题在于**(1)** `font-family`没有为`code`和`pre`块定义，这意味着 Chrome 和其他 webkit 浏览器选择了一些看起来更小的等宽字体**(2)** `line-height`更小（几乎等于`font-size`）。

解决这两个问题就解决了。

我不知道为什么 Chrome Dev Tools Web Inspector 的“Computed Style”显示 11px 作为字体大小（也适用于任何 webkit 浏览器，包括 Safari）。我可以确认它显示了错误的值，因为通过将字体更改为 Arial，我可以很容易地看出它是 14 像素。

此外，在设置`font-family`on`code`和`pre`blocks 之后，Chrome 现在会显示正确的计算`font-size`值。

# svn - Teamcity 结账使用较旧的 SVN

> ID：11566049
> 
> 赞同：1
> 
> 时间：2012-07-19T17:20:04.843
> 
> 标签：svn, teamcity, build-automation

我有 Teamcity ( 7.3 ) 从 SVN 为我签出代码。它将把它放在一些很好的临时路径中

```
[12:46:10]: Updating sources
[12:46:10]:  [Updating sources] Will perform clean checkout. Reason: Checkout directory is empty or doesn't exist
[12:46:10]:  [Updating sources] Cleaning C:\_app\TeamCity\buildAgent\work\a29b6ff3968e4c7a
[12:46:10]:  [Updating sources] VCS Root: MyAppBuild 
```

问题是当我使用新版本更新版本文件（运行构建#）并从我的 Nant 脚本对其执行 SVN 提交时，SVN 将引发错误。

```
[12:46:20]:  [NAnt output]      [exec] svn: E155036: Please see the 'svn upgrade' command
[12:46:20]:  [NAnt output]      [exec] svn: E155036: Working copy 'C:\_app\TeamCity\buildAgent\work\a29b6ff3968e4c7a\MyApp' is too old (format 10, created by Subversion 1.6) 
```

出乎意料的是，计算机上唯一的 svn 版本是 1.7.5 任何人都可以解释 Teamcity 是如何使用 1.6 svn 版本进行结帐的吗？我没有任何运气在 Teamcity 目录中搜索 svn.exe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:36:23.593

我找到了答案，您可以在结帐时选择 Teamcity 应该使用的版本。在下拉列表中的 VCS 根设置下 ( 1.4, 1.5, 1.6 ( Default ), 1.7 )

签出代理设置
工作副本格式：1.7

# facebook - 需要 Facebook Opengraph 帮助

> ID：11566050
> 
> 赞同：1
> 
> 时间：2012-07-19T17:20:08.713
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-opengraph

我对打开图表有点困惑，我只想让我的页面在喜欢或共享时显示正确的数据。我使用了以下

```
 <meta name="title" content="<%= MY PAGE %>" />
  <meta name="description" content="DESC" />
  <link rel="image_src" type="image/jpeg" href=""/> 
```

但是，当您使用发送按钮时，它不会在弹出窗口中显示图像。

所以我添加了所有打开的图形标签。效果很好。然而，它开始为每个页面生成 facebook 页面（我不希望这真的发生）。此外，当您使用共享按钮时，它会尝试发送 facebook 对象的 URL，而不是我的应用页面。这是正常行为吗。

即使阅读了所有文档，我也不认为我真的理解开放图。任何人都可以解释发生了什么，我需要添加到页面以使“赞”按钮和“发送”按钮正常工作的最小数量是多少，以及这些自动生成的页面的处理方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:36:12.897

> 所以我添加了所有打开的图形标签。效果很好。但是它开始为每个页面生成 facebook 页面

没有人看到这些页面。我认为（假设）您指的是 Facebook 之外喜欢的对象的管理页面。

> 此外，当您使用共享按钮时，它会尝试发送 facebook 对象的 URL，而不是我的应用页面。这是正常行为吗。

它将发送代码所在的当前页面，如果当前页面是 Facebook 对象，那么这就是它将发送的内容。

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

前几名

```
<meta property="fb:app_id" content="APP_ID">
<meta property="og:url" content="URL_OF_CURRENT_PAGE">
<meta property="og:title" content="TITLE">
<meta property="og:description" content="DESCRIPTION">
<meta property="og:image" content"URL_TO_IMAGE"> 
```

# php - sprintf php - 它是如何工作的？

> ID：11566051
> 
> 赞同：0
> 
> 时间：2012-07-19T17:20:11.157
> 
> 标签：php, wordpress-theming, printf

我正在使用一个使用 sprintf 的主题，我对此很陌生。我无法从开发人员那里获得自定义支持，所以我试图自己解决。

不了解 sprintf 的工作原理，我在 Google 上搜索了大量页面，试图找到我认为很简单的解决方法。

主题使用 %s 加载文本字符串，在本例中为页面标题。我只希望标题链接到页面！而已！不多，不多。我能够在下面想出一些接近的东西：

```
// Featured columns
case 'columns':
    $count = Website::getThemeOption('front_page/columns/count');
    $classes = array('one', 'two', 'three', 'four');
    $columns = array();
    for ($i = 0; $i < $count; $i++) {
        extract(Website::getThemeOption('front_page/columns/column/'.$i, true)->toArray());
        $text = DroneFunc::stringToHTML($text, false);
        if ($more && $link) {
            $text .= sprintf(' <a href="%s" class="more">%s</a>', $link, $more);
        }
        $columns[] = sprintf(
            '<li class="column">'.
                '<img src="%s/data/img/icons/32/%s" alt="" class="icon">'.
                '<h1><a href="%1$s">%s</a></h1><p>%s</p>'.
            '</li>',
            Website::get('template_uri'), $icon, $title, $text
        );
    }
    ?>
    <section class="columns <?php echo $classes[$count-1]; ?> clear">
        <ul>
            <?php echo implode('', $columns); ?>
        </ul>
    </section>
    <?php
    break; 
```

现在最初，没有超链接引用......我添加了它。现在这样做是使 h1 标题可点击，但它只是转到主题文件夹的根目录，而不是标题的页面。

任何有助于理解这一点并使其发挥作用的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:31:09.440

# `Sprintf`基础

`Sprintf`将参数添加到占位符位置的第一个参数（以 开头`%`）。

例如：

```
$name = 'Rob';
$str = sprintf('Hello, I am %s', $name); // become: Hello, I am Rob 
```

后面`%`的字母是参数类型的第一个字母。一个字符串是`%s`，一个小数是`%d`。例如：

```
$name = 'Rob';
$age = 26;
$str = sprintf('Hello, I am %s and I am %d years old.', $name, $age);
// become: Hello, I am Rob and I am 26 years old. 
```

`Sprintf`使用参数的顺序来确定将其放置在字符串中的位置。第一个占位符获取第二个参数，第二个占位符获取第三个参数，等等。
如果你想改变这个，你需要指定这个之间`%`和类型。您可以通过位置编号`<place>$`在哪里执行此操作`<place>`。

```
$name = 'Rob';
$age = 26;
$str = sprintf('Hello, I am %2$s and I am %1$d years old.', $age, $name);
// become: Hello, I am Rob and I am 26 years old. 
```

# 答案

你来做这件事：

```
'<h1><a href="%1$s">%s</a></h1><p>%s</p>' 
```

是第`%1$s`一个参数，即`template_uri`. 我认为这不是您要链接的网址？你想链接到 uri 中的 uri `$link`。只需将其放在参数中并引用它：

```
sprintf(
    '...'.
    '<h1><a href="%s">%s</a></h1><p>%s</p>',
    Website::get('template_uri'), $icon, $link, $title, $text
); 
```

# excel - excel中的外/内连接

> ID：11566054
> 
> 赞同：1
> 
> 时间：2012-07-19T17:20:19.990
> 
> 标签：excel

我有两个名为 Microsoft Excel 2010 的文件`2011.xls`，`2012.xls`其中包含学生信息表。

例如，如何在一列上对这两个表进行外部/内部联接`student name`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:08:52.933

我建议你看看使用 Excel 函数 VLOOKUP。请参阅 VLOOKUP 的 Excel 帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:56:23.913

两个文件就是两个数据库，用于连接Excel的OLEDB Driver不支持多个数据库。您需要将工作表放在一个工作簿中，然后使用以下过程：

[http://www.tomasvasquez.com.br/blog/microsoft-office/videos-unindo-dados-de-duas-ou-mais-planilhas-no-excel](http://www.tomasvasquez.com.br/blog/microsoft-office/videos-unindo-dados-de-duas-ou-mais-planilhas-no-excel)

这些视频是葡萄牙语的，但它可能会得到这个想法。

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T23:49:55.553

对于内部连接，VLOOKUP 是最好/最快的工具。对于外部连接，您可以在我的博客中使用像[这样的宏。](http://tduhameau.wordpress.com/2013/12/03/simulate-an-outer-join-with-excel/)

# javascript - 无法接受两个用户选择的输入并进行计算

> ID：11566058
> 
> 赞同：-4
> 
> 时间：2012-07-19T17:20:28.097
> 
> 标签：javascript, html, forms

我的 html 代码采用两个用户选择的输入数字并进行计算。在用户选择输入后，它无法实际进行计算。当我输入这两个数字并推动计算时，它什么也没做。

```
function calc(form)
{
if(isNaN(form.resistance.value))
 {
 alert("Error in input");
 return false;
 }

if(form.resistance.value.length > 32)
 {
 alert("Error in input");
 return false;
  }
 function calc(form1)
{
  if(isNaN(form1.strain.value))
 {
 alert("Error in input");
 return false;
}

 if(form1.strain.value.length > 32)
{
 alert("Error in input");
   return false;
} 

var Rchange = 2 * form1.strain.value * form.resistance.value;

 var newResistance =(parseInt(form.resistance.value) + Rchange);
document.getElementById("newResistance").innerHTML = chopTo4(newResistance);

}

function chopTo4(raw)
{
 strRaw = raw.toString();
 if(strRaw.length - strRaw.indexOf("0") > 4)
strRaw = strRaw.substring(0,strRaw.indexOf("0") + 5);
  return strRaw;
 }

</script>

</head>
<body>

<table>
<tr><form1><td>Enter Strain: </td><td><input style="text-align:right" type="text" name="strain"></td></tr>
</table>
<table>
<tr><form><td>Enter Resistance: </td><td><input style="text-align:right" type="text" name="resistance"></td></tr>
<tr><td colspan=2 align="center"><input type="button" value="Calculate" onClick="calc(this.form)"></td></form></tr>
<tr><td>New Resistance: </td><td id="newResistance"></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:49:51.027

```
function calc(form)
{
 if(isNaN(form.resistance.value))
{
 alert("Error in input");
 return false;
 }

if(form.resistance.value.length > 32)
 {
 alert("Error in input");
 return false;
 }

var Rchange = 2 * form.strain.value * form.resistance.value;

var newResistance =(parseInt(form.resistance.value) + Rchange);
  document.getElementById("newResistance").innerHTML = chopTo4(newResistance);

  }

function chopTo4(raw)
{
 strRaw = raw.toString();
 if(strRaw.length - strRaw.indexOf("0") > 4)
strRaw = strRaw.substring(0,strRaw.indexOf("0") + 5);
return strRaw;
}

</script>

</head>
<body>

<table>
 <tr><form><td>Enter Strain: </td><td><input style="text-align:right" type="text" name="strain"></td></tr>
</table>
<table>
 <tr><form><td>Enter Resistance: </td><td><input style="text-align:right" type="text" name="resistance"></td></tr>
 <tr><td colspan=2 align="center"><input type="button" value="Calculate" onClick="calc(this.form)"></td></form></tr>
<tr><td>New Resistance: </td><td id="newResistance"></td></tr>
</table> 
```

# objective-c - 我的 iPhone 中是否有像 Xcode 这样的输出日志？

> ID：11566066
> 
> 赞同：1
> 
> 时间：2012-07-19T17:20:52.717
> 
> 标签：objective-c, ios, xcode

我正在开发一个 iOS 应用程序，感谢 Xcode 的“输出日志”，我已经能够修复很多错误等。

当我在没有 Xcode 的情况下运行我的 iOS 应用程序时，有时它会崩溃。但是，由于我的设备没有连接到 Xcode，所以很难说它为什么会崩溃。所以我想知道，当我运行我的 iOS 应用程序时，是否有像 Xcode 这样的输出日志存储在我可以检索的 iOS 设备中的某个位置？还是我肯定需要 Xcode？或者也许还有其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T17:23:22.387

当您将设备连接到计算机时，在 XCode 中打开管理器。将有一个设备日志选项卡，您可以选择查看设备和崩溃日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:24:46.770

进入管理器，然后进入设备。你会在那里得到日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:27:30.403

如果您已越狱，您可以使用 /var/log/ 中的系统日志。我觉得它很有用。

编辑：您还需要将 syslogd 下载到 cydia 上的 /var/log/syslog 包。

# jquery - MVC3在javascript（Jquery）中增加变量

> ID：11566067
> 
> 赞同：0
> 
> 时间：2012-07-19T17:21:00.673
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试在表格中创建一个表格，每次将内容添加到表格时都会添加一个新行。这是我的代码，然后我会告诉你问题是什么。

```
@{
    //Declare the i variable
    var i = 0;
}

@using (Html.BeginForm())
{
    <table>
        <tr>
            <th>

            </th>
            <th>
                Question
            </th>
        </tr>
        <tr id="@(i+1)">
            <td class="QuestionNum">
                @(i+1))
            </td>
            //This is the cell with the Form field. 
            <td>
                @Html.TextBoxFor(m => m.Questions[i].Question, new { @class = "QuestionBox Last" })
            </td>
        </tr>
    </table>
}

<script>
    $(document).ready(function () {
        SetUpNewLine($('.QuestionBox'));
    });

    function SetUpNewLine(obj) {
        obj.bind('keyup paste', function () {
            if ($(this).val() != "") {
                if ($(this).hasClass("Last")) {

                    //This is the line that isn't working.
                    @(i++)

                    $(this).parents('table').append('<tr id="@(i+1)"><td class="QuestionNum">@(i+1))</td><td>@Html.TextBoxFor(m => m.Questions[i], new { @class = "QuestionBox Last", style="width:100%;" })</td></tr>');
                    $(this).removeClass('Last');
                    SetUpNewLine($('.Last'));
            }
        });
    }
</script> 
```

所以，这段代码第一次工作，但是`@(i++)`在Javascript函数中调用时，一旦你离开函数，它就不会保存变量更改。所以在第一个 Html.TextBoxFor 之后，它是 Model.Questions 对象中的第一个项目，它确实像我想要的那样创建了一个新的文本框，但是它没有增加它在 List 中更改的项目，而是让它们都只是编辑列表中的第二项。

奇怪的是，如果我在`@(i++)`里面做`$(document).ready()`，它会工作得很好。

关于如何正确增加变量的任何想法？我敢肯定，在混合 Razor 变量和 Javascript 时，有一些我不知道的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:36:00.433

您需要将服务器呈现的值存储`i`在 javascript 中。

**编辑** 这都是错误的。您将无法像您尝试做的那样使用剃刀语法附加到您的元素。Razor 是一种服务器端模板语言，一旦将其解释为 HTML，您就可以从客户端呈现更多 HTML。

**编辑 2** 尝试以下操作：

```
var current_index = (@i);

    $(document).ready(function () {
        SetUpNewLine($('.QuestionBox'));
    });

    function getHtml(index){
        return '<tr id="' +index + '"><td class="QuestionNum">'+ index +'</td><td><input type="text" name="Question" class="QuestionBox Last" style="width:100%;"/></td></tr>';
    }

    function SetUpNewLine(obj) {
        obj.bind('keyup paste', function () {
            if ($(this).val() != "") {
                if ($(this).hasClass("Last")) {

                    //This is the line that isn't working.
                    current_index++;

                    $(this).parents('table').append(getHtml(current_index);
                    $(this).removeClass('Last');
                    SetUpNewLine($('.Last'));
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:24:46.277

将变量的值存储在隐藏的表单字段中，因此当表单发布到服务器时，也会发送该变量的递增值。

```
<input type="hidden" name="incrementedVar" value="1" /> 
```

Javascript来增加它：

```
$("input[name='incrementedVar']").val($("input[name='incrementedVar']").val() + 1); 
```

并在您的控制器中获取值

```
public ActionResult MyAction(int incrementedVar)
{
    // the incrementedVar param matches the name of the hidden field. 
    // the model binder will automatically pass the value of the hidden field to this param.
} 
```

使用此代码，该变量完全由 javascript 控制，服务器只能在回发时访问它。您需要删除您当前拥有的剃刀声明和递增代码。

# c - 为什么我在按负值移位时得到正确？

> ID：11566068
> 
> 赞同：0
> 
> 时间：2012-07-19T17:21:02.453
> 
> 标签：c, bit-manipulation, bit-shift

> **可能的重复：**
> [在 C 中右移负数](https://stackoverflow.com/questions/1857928/right-shifting-negative-numbers-in-c)

我在 上找到了这个问题`SO`，但我发现到处都是未定义的结果。

```
int main()
{
   printf("%d\n",32<<-2); <-------------1
   printf("%d\n",32>>-2); <-------------2
   return 0;
} 
```

我得到的输出为：http: [//ideone.com/fIaXo](http://ideone.com/fIaXo)

```
8
128 
```

似乎在编号为 的语句中`1`，32 向右移动了 2 次，而在第二个语句中，32 向左移动了 2 次。
**当一个值向左移动时`-p`，编译器是否将其视为`p`向右移动时间？**
**为什么我在这里得到正确的输出？**

# ruby-on-rails - delay_job 给出“NameError：未初始化的常量”

> ID：11566070
> 
> 赞同：1
> 
> 时间：2012-07-19T17:21:13.017
> 
> 标签：ruby-on-rails, delayed-job, nameerror

我正在尝试移动当前工作任务（在生产和控制台中）以在 Rails 2 应用程序中使用延迟作业，但不断收到错误消息：

```
ThermalImageJob failed with NameError: uninitialized constant Barby::Code128B 
```

我仔细研究了其他人的代码以寻找无济于事的答案。这是我的代码：

/lib/thermal_image_job.rb

```
class ThermalImageJob < Struct.new(:order_id)
  def perform
    order = Order.find(order_id)
    order.tickets.each do |ticket|
      ticket.barcodes.each do |barcode|
        barcode.generate_thermal_image
      end
    end
  end
end 
```

/app/controllers/orders_controller.rb

```
Delayed::Job.enqueue(ThermalImageJob.new(@order.id)) 
```

/app/models/barcode.rb

```
def generate_thermal_image(format=:gif)
  filename = "#{barcode}_thermal.#{format}"
  temp_file_path = File.join("#{RAILS_ROOT}", 'tmp', filename)
  unless FileTest.exists?(temp_file_path)
    barcode_file = File.new(temp_file_path, 'w')
    code = Barby::Code128B.new(barcode)
      ....
end 
```

宝石文件

```
gem "delayed_job", "2.0.7"
gem "daemons", "1.0.10" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:05:39.887

好吧，经过多次头部撞击，我想通了，所以我发布这个来帮助下一个人。问题是它找不到 barby 库，所以我在课程开始时添加了一个要求：

```
require "barby/outputter/rmagick_outputter"
require "barby/barcode/code_128" 
```

# c++ - C++中向量的叉积

> ID：11566072
> 
> 赞同：0
> 
> 时间：2012-07-19T17:21:19.770
> 
> 标签：c++, function, cross-product

作为我正在编写的程序的一部分，我需要找到一个双精度向量和一个复数双精度向量的叉积。我写了一个我觉得应该这样做的函数，但是当我调用它时，我收到以下错误：

```
error: no matching function for call to ‘CrossProduct1D(std::vector< double, std::allocator<double> >&, std::vector<std::complex<double>, std::allocator<std::complex<double> > >&)’ 
```

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
#include <vector>
#include <math.h>
#include <complex>
using namespace std;

//1D cross product
template <typename T>
vector<T> CrossProduct1D(vector<T> const &a, vector<T> const &b)
{
  vector<T> r (a.size());  
  r[0] = a[1]*b[2]-a[2]*b[1];
  r[1] = a[2]*b[0]-a[0]*b[2];
  r[2] = a[0]*b[1]-a[1]*b[0];
  return r;
}

//::::::::importing data from text::::::::::
  vector<string> ezivec;
  ezivec.reserve(4000);

  string ezidat("ez.i.txt");

  ifstream ezifile;
  ezifile.open(ezidat.c_str());

  if(!ezifile.is_open())
    {
      cerr<<"Error opening file : "<<ezidat.c_str()<<endl;
      return -1;
    }

  string ezistr; //store lines in vector
  while(getline(ezifile, ezistr, ';'))
    {
      ezivec.push_back(ezistr);
    }

  ezifile.close();

 //Converting from vector of strings to vector of floats
  vector<double> ezi (ezivec.size());
  for(int i = 0; i < ezivec.size(); ++i)
    {
      ezi[i] = string_to_T<double>(ezivec[i]);
    }

 //

  vector<string> ezrvec;
  ezrvec.reserve(4000); 

  string ezrdat("ez.r.txt");

  ifstream ezrfile;
  ezrfile.open(ezrdat.c_str());

  if(!ezrfile.is_open())
    {
      cerr<<"Error opening file : "<<ezrdat.c_str()<<endl;
      return -1;
    }

  string ezrstr;
  while(getline(ezrfile, ezrstr, ';'))
    {
      ezrvec.push_back(ezrstr);
    }

  ezrfile.close();

  vector<double> ezr (ezrvec.size());
  for(int i = 0; i < ezrvec.size(); ++i)
    {
      ezr[i] = string_to_T<double>(ezrvec[i]);
    }

//:::::::defining vectors:::::::
vector<vector<complex<double> > > E0 (ezi.size(), vector<complex<double> > (3));
for(int i = 0; i < ezi.size(); i++)
{
  E0[i][0].real() = 0.0;
  E0[i][0].imag() = 0.0;
  E0[i][1].real() = 0.0;
  E0[i][1].imag() = 0.0;;
  E0[i][2].real() = ezr[i];
  E0[i][2].imag() = ezi[i];
} 

vector<double> n_a (3);
n_a[0] = 1.0;
n_a[1] = 0.0;
n_a[2] = 0.0;

//:::::::calling cross product:::::::
for(int j = 1; j < jmax; j++)
    {
      M[j] = CrossProduct1D(n_a, E0[j]);
    } 
```

“ez.i.txt”和“ez.r.txt”是由分号分隔的 4000 个数字的文本文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T17:28:59.973

您的模板函数在单个类型上参数化，`T`, 并接受两个`vector<T>`，但您试图将两种不同类型的向量传递给它，因此没有一个`T`可以选择。

您可以有两个模板参数，例如

```
template<class T, class U> CrossProduct1D(std::vector<T> const& a,
                                          std::vector<U> const& b) 
```

# c# - 使 ScrollViewer 中的 TextBlock 自动缩放以适应

> ID：11566076
> 
> 赞同：0
> 
> 时间：2012-07-19T17:21:49.910
> 
> 标签：c#, .net, xaml, microsoft-metro

我正在创建一个 Windows 8 Metro 应用程序。我有`TextBlock`一个`ScrollViewer`。我想知道是否可以以编程方式更改 ZoomFactor`ScrollViewer`以使`TextBlock`自动适应屏幕的宽度。意思是，`TextBlock`适合屏幕宽度的最长线（不换行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:56:57.870

一般来说，我发现 ViewBox 是缩放 xaml 内容以适应预定大小的最有用的方法。只需让您的 ScrollViewer 和 TextBlock 没有大小要求（并关闭换行），然后将 ScrollViewer 放在 Scale=Uniform 的 ViewBox 内（或者根据您的需要可能是 UniformToFit）。

TextBlock 将使 ScrollViewer 的大小适合其内容，然后 ViewBox 将缩放 ScrollViewer 以完全适合其自己的控制范围。（将 ViewBox 放在根网格内或作为页面的根控件应该会导致它填满整个屏幕。）

# java - 如何在 Spring 2.5 的配置文件中连接两个 String bean

> ID：11566084
> 
> 赞同：4
> 
> 时间：2012-07-19T17:22:19.270
> 
> 标签：java, spring

我知道 Spring 3.0 及更高版本有 EL，但在这种情况下，项目使用 Spring 2.5 ，例如：

```
<bean id="dir" class="java.lang.String">
    <constructor-arg value="c:/work/"
</bean>

<bean id="file" class="java.lang.String">
    <constructor-arg value="file.properties" />
</bean>

<bean id="path" class="java.lang.String">
    <constructor-arg value=**dir +  file**/>
</bean> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T17:33:38.790

这行得通吗？

```
<bean id="dir" class="java.lang.String">
    <constructor-arg value="c:/work/"
</bean>

<bean id="file" class="java.lang.String">
    <constructor-arg value="file.properties" />
</bean>

<bean id="path" factory-bean="dir" factory-method="concat">
    <constructor-arg ref="file"/>
</bean> 
```

注意[`String.concat(java.lang.String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#concat(java.lang.String))方法 as的用法`factory-method`。

但是 XML 并不是这类东西的最佳位置，那么 Java`@Configuration`呢？

```
@Configuration
public class Cfg {
    @Bean
    public String dir() {
        return "c:/work/";
    }

    @Bean
    public String file() {
        return "file.properties";
    }

    @Bean
    public String path() {
        return dir() + file();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:24:45.713

Spring 不是这样存储应用程序逻辑的地方。

如果需要，请添加一个执行以下操作的`getPath()`方法：

```
public String getPath() {
    if(path == null) {
        path = getDir() + getPath();
    }
    return path;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:28:08.627

您是否尝试过使用 Spring-EL？看看这个[链接](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html)

使用 Spring-EL，您可以执行以下操作：

```
<bean id="dir" class="java.lang.String">
    <property name="path" value="c:/work/" />
</bean>
<bean id="file" class="java.lang.String">
    <property name="fileName" value="file.properties" />
</bean>
<bean id="path" class="java.lang.String">
    <property name="initialShapeSeed" value="#{dir.path}#{file.fileName}"/>
</bean> 
```

这从 Spring 3.0 开始可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T17:29:14.257

您可以使用 ref 代替 value。IE

```
<bean id="path" class="java.lang.String">
    <constructor-arg ref="file"/>
</bean> 
```

# javascript - 在 Angular Seed 项目中，index-async.html 的意义何在？

> ID：11566087
> 
> 赞同：40
> 
> 时间：2012-07-19T17:22:28.587
> 
> 标签：javascript, angularjs

我已经开始使用 Angular JS 并将其用作与 Play Framework POC 集成的前端。我已经完成了教程。

[我从github](https://github.com/angular/angular-seed/)上的种子项目克隆了我的前端。它有一个`app/index.html` （我将其用作我的主页）和一个`app/index-async.html`. 后者的意义何在？真的有必要吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-19T20:06:43.763

这两个文件是可互换的，您可以使用其中任何一个来构建您的应用程序。`index-async.html`异步加载脚本，这可能会为您提供更快的引导时间。`index.html`同步加载脚本，这通常有点慢，但目的是让学习使用框架的人更容易理解代码。

要阅读有关异步引导的更多信息，请查看此处的文档：http: [//docs.angularjs.org/guide/bootstrap](http://docs.angularjs.org/guide/bootstrap)

# vb.net - 有没有办法引用我正在工作的“With”项目？

> ID：11566088
> 
> 赞同：1
> 
> 时间：2012-07-19T17:22:33.157
> 
> 标签：vb.net

> **可能重复：**
> [如何在 With ... End With 中访问对象本身](https://stackoverflow.com/questions/1152983/how-to-access-the-object-itself-in-with-end-with)

假设我想做这样的事情：

```
 With grid.Columns("Reviewed")
        CType(<the with object>, DataGridViewCheckBoxColumn).ThreeState = False
        ...
 End With 
```

基本上，我希望在上述声明中具有以下等效项：

```
CType(grid.Columns("Reviewed"), DataGridViewCheckBoxColumn).ThreeState = False 
```

是否有一些关键字可以用来指代我“WITH”的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:02:42.090

据我所知，没有办法完全做到这一点，但是根据您将要执行的操作，创建另一个变量来引用该列可能会更容易。

```
Dim ReviewColumn as DataGridViewCheckBoxColumn = grid.Columns("Reviewed")
With ReviewColumn
    .ThreeState = False
    ''etc                
End With 
```

老实说，那时我什至不会使用 With 块。

# ruby - 试图将字符串拆分为单个单词或“引用的单词”，并希望将引号保留在结果数组中

> ID：11566094
> 
> 赞同：12
> 
> 时间：2012-07-19T17:22:55.780
> 
> 标签：ruby, regex, csv

我正在尝试将字符串拆分为这样`Presentation about "Test Driven Development"`的数组：

```
[ 'Presentation',
  'about',
  '"Behavior Driven Development"' ] 
```

我已经尝试过`CSV::parse_line(string, col_sep: ' ')`，但这会导致

```
[ 'Presentation',
  'about',
  'Behavior Driven Development' ] # I'm missing the quotes here 
```

我也尝试了一些正则表达式魔法，但我仍然是初学者并且没有成功。我想这对于专业人士来说很简单，所以也许有人可以指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-19T17:33:50.897

您可以使用以下正则表达式[`split`](http://ruby-doc.org/core/classes/String.html#method-i-split)：

```
str = 'Presentation about "Test Driven Development"'
p str.split(/\s(?=(?:[^"]|"[^"]*")*$)/)
# => ["Presentation", "about", "\"Test Driven Development\""] 
```

如果有空格，则它会拆分，但前提是直到末尾的文本包含偶数个`"`. 请注意，此版本仅在正确引用所有字符串时才有效。

另一种解决方案用于[`scan`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)读取字符串的各个部分（除了空格）：

```
p str.scan(/(?:\w|"[^"]*")+/)
# => ["Presentation", "about", "\"Test Driven Development\""] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-02T12:19:39.810

只是为了扩展霍华德先前的答案，您可以添加此方法：

```
class String
  def tokenize
    self.
      split(/\s(?=(?:[^'"]|'[^']*'|"[^"]*")*$)/).
      select {|s| not s.empty? }.
      map {|s| s.gsub(/(^ +)|( +$)|(^["']+)|(["']+$)/,'')}
  end
end 
```

结果：

```
> 'Presentation      about "Test Driven Development"  '.tokenize
=> ["Presentation", "about", "Test Driven Development"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:26:28.083

这里：

```
"Presentation about \"Test Driven Development\"".scan(/\s?\w+\s?|"[\w\s]*"/).map {|s| s.strip} 
```

# sql - 返回的记录数与 count(*) 结果不一致

> ID：11566095
> 
> 赞同：1
> 
> 时间：2012-07-19T17:22:59.023
> 
> 标签：sql, count, oracle10g

我使用的是 Oracle 10g，但遇到了不一致的问题，在以下查询中，如果我执行 select *，我会得到 6746 条记录，但如果我执行 count(*)，我只会得到 1361 条记录：

```
SELECT  *
    from TOTALD.TOT_IN A, TOTALD.TOT_CE B
    WHERE FECHA >= TO_DATE(NVL(NULL, '01/01/2012'),'DD/MM/YYYY')
    AND     FECHA <= TO_DATE(NVL('17/07/2012', sysdate),'DD/MM/YYYY')
    AND (A.ID_CE = B.ID_CE
    OR  A.ID_CE IS NULL)
    AND A.ID_EST = '1'; 
```

除了记录之外，我还需要计算计数。

有谁知道为什么会发生这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:03:30.357

`sql%rowcount`应该返回受查询影响的行数。然后你不需要运行它两次

# java - 没有瓷砖的Spring mvc布局

> ID：11566099
> 
> 赞同：0
> 
> 时间：2012-07-19T17:23:11.720
> 
> 标签：java, jsp, spring-mvc

在 Spring Mvc 中，除了使用 tile 之外，还有什么方法可以决定 jsp 布局。我的意思是考虑一个带有侧边菜单面板的设计，如果我想为每个 jsp 显示一个相关的侧边菜单，我怎么能在不使用瓷砖的情况下做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:00:31.380

您可以使用以下内容包含 html 或 jsp 设计.....

```
It works same as the master page of asp.Net......
<%@ include file="page.jsp"%>

<%@ include file="page.html"%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:32:56.257

您可以为页面布局的每个部分创建单独的 jsp：页眉、页脚、菜单等。并使用：

```
<%@ include file="yourPageSection.jsp"%> 
```

在您的页面中包含常用部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:09:48.850

Sitemesh 是另一个jsp页面布局框架：[http ://wiki.sitemesh.org/display/sitemesh/Home](http://wiki.sitemesh.org/display/sitemesh/Home)

# c# - foreach 和 linq 查询 - 请帮助理解

> ID：11566105
> 
> 赞同：7
> 
> 时间：2012-07-19T17:23:31.377
> 
> 标签：c#, linq, foreach

我有一个 linq 查询，我在 foreach 循环中迭代其结果。

第一个是从表格布局面板中获取控件集合的查询，然后我遍历该集合并从 tableLayoutPanel 中删除控件，因此：

```
var AllItems = (from Item in this.tableLayoutPanel1.Controls.OfType<ItemControl>()
                select Item);

foreach (ItemControl item in AllItems)
{
    Trace.WriteLine("Removing " + item.ToString());
    this.tableLayoutPanel1.Controls.Remove(item);
    item.Dispose();
} 
```

上面没有按我的预期做（即抛出一个错误），它只删除了一半的控件（奇数编号的）似乎在每次迭代中 AllItems 减少了它的自身，尽管正在修改底层集合，但没有错误是抛出。

如果我对字符串数组进行类似操作：

```
 string[] strs = { "d", "c", "A", "b" };
        List<string> stringList = strs.ToList();

        var allitems = from letter in stringList
                       select letter;

        foreach (string let in allitems)
        {
            stringList.Remove(let);

        } 
```

这次 Visual Studio 抛出一个错误（如预期的那样），抱怨基础集合已更改。

为什么第一个例子也没有爆炸？

Iterators/IEnumerable 有一些我在这里不理解的地方，我想知道是否有人可以帮助我理解 linq 和 foreach 的幕后情况。

（我知道我可以通过 AllItems.ToList(); 在迭代之前解决这两个问题，但想了解为什么第二个示例会引发错误而第一个不会）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T17:34:28.717

> 为什么第一个例子也没有爆炸？

内部的`IEnumerator`实现`tableLayoutPanel1.Controls`没有执行适当的检查以查看集合是否已被修改。这并不意味着它是一个安全的操作（因为结果不合适），而是该类没有以引发异常的方式实现（它可能应该）。

通过 a 枚举`List<T>`并删除项目时引发的异常实际上是由[`List<T>.Enumerator`](http://msdn.microsoft.com/en-us/library/x854yt9s.aspx)类型引发的，而不是“通用”语言功能。

请注意，这是该类型的一个*不错的功能*`List<T>.Enumerator`，因为[`IEnumerator<T>`](http://msdn.microsoft.com/en-us/library/78dfe2yb.aspx)文档明确指出：

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且其行为未定义。

虽然没有合同要求抛出异常，但当您进入“未定义行为”领域时，这样做对实现是有益的。

在这种情况下，[TableLayoutControlCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutcontrolcollection.aspx)类枚举器实现不会执行额外的检查，因此您会看到当您使用“行为未定义”的功能时会发生什么。（在这种情况下，它正在删除所有其他控件。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T20:48:40.983

> 所以在我的第一种情况下，linq 表达式是否在 foreach 循环的每次迭代中都被重新评估？还是 linq 从 tablelayoutpanel.controls 集合中获取 IEnumerator？

把它想象成是这样发生的，这两种情况都发生了：

```
 foreach (string l in (from letter in stringList select letter)) 
    { 
        stringList.Remove(l); 
    } 
```

上面的伪代码说明，当您尝试删除一个项目时，您基本上处于`stringList`集合枚举的中间。Reed 的意思是，在第二种情况下，枚举`stringList`器确保在枚举过程中没有人在弄乱它。

他是说，在您的控件的情况下，控件枚举器很高兴地进行，而不是检查是否有人在胡闹其数据。

为了完整起见，请比较以下两个示例：

`letters`每次触摸时都会重新评估此查询，`letters`其中包括我们在 foreach 循环中的时间：

```
 IEnumerable<string> letters = from letter in stringList select letter);

    // everytime we hit this we're going to hit the stringList collection
    foreach (string l in letters) 
    { 
        stringList.Remove(l); 
    } 
```

此查询使用立即填充的 ToList()，`letters`我们将不再触及`stringList`foreach 循环中的集合。

```
 List<string> letters = (from letter in stringList select letter).ToList()

    // because we ran ToList(), we will no longer enumerate stringList
    foreach (string l in letters) 
    { 
        stringList.Remove(l); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T23:59:41.523

尝试这个：

```
var AllItems = (from Item in this.tableLayoutPanel1.Controls.OfType<ItemControl>() 
                select Item);  

  int totalCount = AllItems .Count;
   for (int i = 0; i < totalCount; i++)
       {
           AllItems .RemoveAt(0);
        } 
```

# php - php中注册表单的简单服务器端验证（不同的技术）

> ID：11566108
> 
> 赞同：0
> 
> 时间：2012-07-19T17:23:39.863
> 
> 标签：php, validation

我真的搞砸了。有没有人可以帮助我知道使用 php.ini 进行服务器端验证的更简单方法或简单方法是什么？我真的很感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:42:28.773

这是一个简单的 PHP 表单验证：

```
<?php

    // validate $_GET['foo'], here I test that it is at least 1 character long
    $valid = TRUE;
    if( isset($_GET['foo']) && strlen($_GET['foo']) < 1 ) {
        $valid = FALSE;
    }

    // if the form is submitted and $_GET['foo'] is valid, show a success message
    if( isset($_GET['bar']) && $valid ) :

        // do something with the form data
?>

    <p>The form was successfully submitted.</p>

<?php
    // show the form
    else :
?>

    <form method="get" action="">
        <div>
            <label for="foo">Foo: </label>
            <input type="text" id="foo" name="foo" value="<?php echo $_GET['foo']; ?>" />
            <?php if( !$valid ) : ?>
                <p>Please enter a valid value.</p>
            <?php endif; ?>
        </div>
        <div>
            <input type="submit" id="bar" name="bar" value="Bar" />
        </div>
    </form>

<?php
    endif;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-07T20:08:27.793

用这个：

```
<?php

class Validator {

  public $data = array();
  public $rules = array();
  public $messages = array();
  public $error = array();
  public $pass = true;

  public function __construct($options = null) {

        foreach ($options as $option => $value) {

      $this->$option = $value;

        }

  }

  public function validate() {

    foreach($this->rules as $k=>$v) {

      $rules = explode('|',$v);
      $pass = true;

      foreach ($rules as $rule) {

        $rule = explode(':',$rule);

        switch ($rule[0]) {

          case 'required':
            if(empty($this->data[$k])) {
              $pass = false;
            }
            break;

          case 'min':
            if(strlen($this->data[$k]) < $rule[1]) {
              $pass = false;
            }
            break;

          case 'max':
            if(strlen($this->data[$k]) > $rule[1]) {
              $pass = false; 
            }
            break;

          case 'equal':
            if(strlen($this->data[$k]) != $rule[1]) {
              $pass = false; 
            }
            break;

          case 'not':
            if($this->data[$k] == $rule[1]) {
              $pass = false; 
            }
            break;

          case 'allow':
            $allowed = explode(',',$rule[1]);
            if(!in_array($this->data[$k],$allowed)) {
              $pass = false; 
            }
            break;

          case 'email':
            if (!filter_var($this->data[$k],FILTER_VALIDATE_EMAIL)) {
              $pass = false;
            }
            break;

          case 'same':
            if ($this->data[$k] != $this->data[$rule[1]]) {
              if(!isset($this->error[$rule[1]])) {
                $this->error[$rule[1]] = '';
              }
              $pass = false;
            } else {
              if(isset($this->error[$rule[1]])) {
                $this->error[$k] = $this->error[$rule[1]]; 
              }
            }
            break;

          case 'unique':
            if (egrediDB_checkUnique($rule[1],$k,$this->data[$k]) != 0) {
              $pass = false;  
            }

        }

        if($pass == false) {

          $this->pass = false;
          $this->error[$k] = $this->messages[$k];   

        }

      }

    }

    //print_r($this->error);

    return array(
      'error'=>$this->error,
      'pass'=>$this->pass
    );

  }

}

?> 
```

注意：我为数据库检查创建了一个自定义函数：

```
<?php

// Funktion für die Klasse Validator.php
function egrediDB_checkUnique($table,$column,$value) {

  global $egrediDB;

  return $egrediDB->count($table,array($column=>$value));

}

?>

<?php

$Validator = new Validator(array(
  'data'=>$_POST['data'],
  'rules' => array(
    'firstname'       => 'required',
    'lastname'        => 'required',
    'password'        => 'required|min:8',
    'password_repeat' => 'required|same:password',
    'email'           => 'email|unique:user',
    'email_repeat'    => 'required|same:email',
    'timezone'        => 'required|not:-1',
    'country'         => 'required|not:-1|max:2',
    'street'          => 'required',
    'postalcode'      => 'required',
    'city'            => 'required',
  ),
  'messages' => array(
    'firstname'       => 'Bitte geben Sie ein Vornamen ein',
    'lastname'        => 'Bitte geben Sie ein Nachnamen ein',
    'password'        => 'Bitte geben Sie ein Sicheres 8-stelliges Passwort ein',
    'password_repeat' => 'Ihre Passwörter stimmen nicht überein',
    'email'           => 'E-Mail ist ungültig oder schon registriert',
    'email_repeat'    => 'Ihre E-Mails stimmen nicht überein',
    'timezone'        => 'Bitte wählen Sie eine Zeitzone',
    'country'         => 'Bitte wählen Sie ein Land',
    'street'          => 'required',
    'postalcode'      => 'required',
    'city'            => 'required',
  ),
));

echo json_encode($Validator->validate());exit;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:35:51.200

正如 Marc B 所说，真的没有*简单*的方法。您可以使用第三方表单验证库/类或使用具有表单验证作为组件的框架。我个人使用[Zend 框架](http://framework.zend.com/)，但这对你来说可能是多余的。

如果你自己做，你需要记住以下几点（根据你的需要加上更多）：

*   根据特定的所需格式，数据是否正确？（即，电子邮件、电话号码、邮政编码）您可以通过多种方式验证这一点。（常用表达）
*   您是插入数据库还是返回页面？那你应该逃跑。简单的方法包括：[htmlentities](http://php.net/manual/en/function.htmlentities.php)、[htmlspecialchars](http://www.php.net/manual/en/function.htmlspecialchars.php)等。同样，这取决于您的具体需求
*   您想强制执行最大限制吗？如果是这样，您将需要在服务器端执行此操作，因为 DOM 可以由用户操作，并且任何`input`级别限制都可以轻松更改。
*   字段是必需的吗？确保`POST`变量存在且不为空。

您只需要写下您对表单的要求，然后从那里决定您将如何实施验证。

# ruby - Ruby BigDecimal - 错误？

> ID：11566111
> 
> 赞同：0
> 
> 时间：2012-07-19T17:24:00.503
> 
> 标签：ruby

当您取一个小数的 sqrt 但指定非常高的精度时，BigDecimal 发生了一些奇怪的事情......

当我说奇怪时，我的意思是 36 的 sqrt 是 5。

谁能解释这里发生了什么或者这是一个错误......

```
require 'bigdecimal'
require 'bigdecimal/util'

@d = BigDecimal.new(36)
puts @d.sqrt(250).to_i

$ ruby1.9 test.rb 
5

$ ruby1.9 -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin10]

$ uname -a
Darwin jack.bidcactus.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:32:52.307

36 的平方根是 6。当 Ruby 以这种精度评估它时，它得到 5.9999... 当你调用`to_i`时，你将值四舍五入，取而代之的是 5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:26:49.300

它返回一个浮点数。这就是您看到“奇怪”行为的原因。因此，这不是一个错误。[API](http://www.ruby-doc.org/core-1.9.3/Math.html#method-c-sqrt)

代码：

```
 static VALUE
math_sqrt(VALUE obj, VALUE x)
{
    double d0, d;

    Need_Float(x);
    d0 = RFLOAT_VALUE(x);
    /* check for domain error */
    if (d0 < 0.0) domain_error("sqrt");
    if (d0 == 0.0) return DBL2NUM(0.0);
    d = sqrt(d0);
    return DBL2NUM(d);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:29:39.767

当您调用 时`to_i`，您将删除平方根创建的所有小数精度。当你打电话时， s 之后的`to_i`几乎无限的踪迹（看到我的删除）。如果你想这样做，你可能想在调用之前先调用。`9``5``to_i``round``to_i`

# java - 在 JSP 中覆盖请求参数

> ID：11566115
> 
> 赞同：0
> 
> 时间：2012-07-19T17:24:12.140
> 
> 标签：java, jsp

我有一个 JSP 页面，它将 HttpServletRequest 和 HttpServletResponse 传递给 Java 类，该 Java 类根据名为“action”的参数将请求和响应分派给 action 类。动作类执行一些动作，有时会转发到另一个重复相同过程的 JSP。如果您认为我应该使用 servlet，那么您是对的，但这是一个很长的故事，基本上我也没有权限。

在我的一个操作类中，我验证数据，如果有效，则使用 RequestDispatcher 将请求转发到另一个 JSP。我还尝试设置“action”属性，以便我可以告诉其他 JSP 执行什么操作，但是我了解到属性不会随请求一起转发。事实上，我的代码开始无限循环是因为我在执行相同的操作，因为action参数没有改变，导致请求在action和jsp之间循环。

我发现我可以通过在新页面的 url 中传递参数来覆盖 action 参数。像这样：

```
RequestDispatcher dispatcher = request.getRequestDispatcher("someUrl.jsp?action=SOME_OTHER_ACTION");
dispatcher.forward(request, response"); 
```

这个解决方案对我来说很腥。任何人都可以提供任何见解，这是否是一个好主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:37:20.103

是的，这是在转发时发送请求参数的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:42:27.270

正如您所发现的，请求属性只是过滤器或其他请求处理程序将对象添加到请求对象的方便位置。它们与来自 HTTP 请求本身的参数完全不同。属性不会传递给 HTTP 客户端，并且在发送响应后就消失了。

你的方法没有任何可疑之处。另一种（可能更糟）的方法是使用会话来维护状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T17:29:56.097

我认为这是传递参数的有效方式之一。

其他方式可能是，您可以访问请求对象，您可以将其设置为请求属性。forward 在服务器上，您应该能够在另一端访问相同的请求属性。

# android - ListView - 所选项目未按预期工作

> ID：11566116
> 
> 赞同：2
> 
> 时间：2012-07-19T17:24:18.580
> 
> 标签：android, android-listview

我有一个列表视图，当我选择一个项目时，它会填充一个详细信息视图。我想通过将其更改为绿色来显示在列表视图中选择的项目。麻烦的是，直到我两次单击同一个项目，所选项目才会显示为绿色。我在选定的项目上做错了什么，直到该项目被点击两次才变为绿色？这是我的 xml 选择器文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

<!-- Active list item -->
<item android:state_selected="true"
    android:state_focused="false"
    android:state_pressed="false"
    android:drawable="@drawable/lv_bg_selected" />

<!-- Inactive list item -->
<item android:state_selected="false"
    android:state_focused="false"
    android:state_pressed="false"
    android:drawable="@drawable/lv_bg_unselected_state" />

<!-- Pressed list item --> 
<item android:state_pressed="true" 
    android:drawable="@drawable/lv_bg_pressed_state" />

</selector> 
```

和 onListitemClick：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id)
{
 .
 .
 .
 v.setSelected(true);
 .
 .
 .
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T17:39:20.540

将默认状态添加到选择器 xml，特别是作为最后一项。

```
<selector ...>
   ...
   ...
    <!-- Normal list item --> 
    <item android:drawable="@drawable/lv_bg_normal_state" />
</selector> 
```

## 更新：

在您的选择器、列表视图中使用[android:state_activated](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html#attr_android:state_activated)`setChoiceMode(ListView.CHOICE_MODE_SINGLE)`并在单击项目时调用`setItemChecked()`。

`android.R.layout.simple_list_item_activated_1`在您的 getView 方法中膨胀以使其`CHOICE_MODE_SINGLE`正常工作。

有关更多详细信息，请参阅这篇文章： [在列表视图中显示当前选择](https://stackoverflow.com/questions/9729517/showing-the-current-selection-in-a-listview)

# jpa - 无法获取数据源。无法将 JPA EntityManager (EclipseLink) 与 JBoss 5.1 一起使用

> ID：11566117
> 
> 赞同：6
> 
> 时间：2012-07-19T17:24:24.853
> 
> 标签：jpa, jboss, eclipselink, jboss5.x

将 JPA (EclipseLink) 放在 JBoss 服务器中工作时，我遇到了很多困难。我通常使用Tomcat，它很简单......

1.  我将 mysql-ds.xml 从 /jboss-5.1.0.GA/docs/examples/jca 复制到 /jboss-5.1.0.GA/servers/default/deploy/ 然后我配置它。

mysql-ds.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<datasources>
  <local-tx-datasource>
    <jndi-name>EDeliveryUnit</jndi-name>
    <connection-url>jdbc:mysql://localhost:3306/edelivery_db</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>root</user-name>
    <password>root</password>
    <exception-sorter-class-name>org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter</exception-sorter-class-name>
    <check-valid-connection-sql>SELECT * FROM systemuser</check-valid-connection-sql>
    <metadata>
       <type-mapping>mySQL</type-mapping>
    </metadata>
  </local-tx-datasource>
</datasources> 
```

1.  然后我在我的 WebApplication 中配置了 persistence.xml。

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
<persistence-unit name="edeliveryPU"
    transaction-type="RESOURCE_LOCAL">
    <jta-data-source>jdbc/EDeliveryUnit</jta-data-source>
    <non-jta-data-source>jdbc/EDeliveryUnit</non-jta-data-source>
    <class>pt.inov.spocs.board.server.model.entity.SystemUser</class>
    <class>pt.inov.spocs.board.server.model.entity.UserSession</class>
    <properties>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/edelivery_db" />
        <property name="javax.persistence.jdbc.user" value="root" />
        <property name="javax.persistence.jdbc.password" value="root" />
        <property name="eclipselink.jdbc.batch-writing" value="JDBC" />
        <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
    </properties>
</persistence-unit> 
```

最后我实例化了EntityManager：

```
private EntityManagerFactory emf;
private EntityManager em;

public Controller() {
    System.out.println("Begin..");

    emf = Persistence.createEntityManagerFactory("edeliveryPU");
    em = emf.createEntityManager();

    user = em.find(SystemUser.class, new Long(1));
    System.out.println("Username: " + user.getUsername() + " | pass: "
            + user.getPassword());
} 
```

当我部署它时，我的 jboss 中出现了这些错误：

```
2012-07-20 13:22:15,762 INFO  [STDOUT] (http-127.0.0.1-8080-1) Begin..
2012-07-20 13:22:16,346 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The access type for the persistent class [class pt.inov.spocs.board.server.model.entity.UserSession] is set to [FIELD].
2012-07-20 13:22:16,414 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The target entity (reference) class for the many to one mapping element [field user] is being defaulted to: class pt.inov.spocs.board.server.model.entity.SystemUser.
2012-07-20 13:22:16,417 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The access type for the persistent class [class pt.inov.spocs.board.server.model.entity.SystemUser] is set to [FIELD].
2012-07-20 13:22:16,419 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The alias name for the entity class [class pt.inov.spocs.board.server.model.entity.UserSession] is being defaulted to: UserSession.
2012-07-20 13:22:16,424 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The table name for entity [class pt.inov.spocs.board.server.model.entity.UserSession] is being defaulted to: USERSESSION.
2012-07-20 13:22:16,468 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [sessionKey] is being defaulted to: SESSIONKEY.
2012-07-20 13:22:16,470 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [endDate] is being defaulted to: ENDDATE.
2012-07-20 13:22:16,472 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [beginDate] is being defaulted to: BEGINDATE.
2012-07-20 13:22:16,472 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [ip] is being defaulted to: IP.
2012-07-20 13:22:16,474 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The alias name for the entity class [class pt.inov.spocs.board.server.model.entity.SystemUser] is being defaulted to: SystemUser.
2012-07-20 13:22:16,475 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The table name for entity [class pt.inov.spocs.board.server.model.entity.SystemUser] is being defaulted to: SYSTEMUSER.
2012-07-20 13:22:16,476 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [id] is being defaulted to: ID.
2012-07-20 13:22:16,477 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [username] is being defaulted to: USERNAME.
2012-07-20 13:22:16,477 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The column name for element [password] is being defaulted to: PASSWORD.
2012-07-20 13:22:16,479 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The pk column value for the table generator named [SystemUserGenerator] defined on [class pt.inov.spocs.board.server.model.entity.SystemUser] from [class pt.inov.spocs.board.server.model.entity.SystemUser] is being defaulted to: SystemUserGenerator.
2012-07-20 13:22:16,526 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The primary key column name for the mapping element [field user] is being defaulted to: ID.
2012-07-20 13:22:16,526 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Config]: The foreign key column name for the mapping element [user] is being defaulted to: USER_ID.
2012-07-20 13:22:16,696 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Warning]: PersistenceUnitInfo edeliveryPU has transactionType RESOURCE_LOCAL and therefore jtaDataSource will be ignored
2012-07-20 13:22:16,700 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Info]: EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
2012-07-20 13:22:16,716 INFO  [STDOUT] (http-127.0.0.1-8080-1) [EL Severe]: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
2012-07-20 13:22:16,717 SEVERE [org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage] (http-127.0.0.1-8080-1) Error Rendering View[/index.xhtml]
javax.el.ELException: /index.xhtml: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at org.apache.myfaces.view.facelets.compiler.TextInstruction.write(TextInstruction.java:57)
at org.apache.myfaces.view.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:46)
at org.apache.myfaces.view.facelets.compiler.UILeaf.encodeAll(UILeaf.java:214)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1159)
at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:662)
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
at pt.inov.spocs.board.server.model.entity.Controller.<init>(Controller.java:19)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at org.apache.myfaces.config.annotation.TomcatAnnotationLifecycleProvider.newInstance(TomcatAnnotationLifecycleProvider.java:49)
at org.apache.myfaces.config.ManagedBeanBuilder.buildManagedBean(ManagedBeanBuilder.java:162)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.createManagedBean(ManagedBeanResolver.java:303)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.getValue(ManagedBeanResolver.java:266)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
at org.apache.myfaces.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:65)
at org.apache.myfaces.el.convert.VariableResolverToELResolver.getValue(VariableResolverToELResolver.java:96)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:61)
at org.apache.el.parser.AstValue.getValue(AstValue.java:107)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at org.apache.myfaces.view.facelets.el.ELText$ELTextVariable.writeText(ELText.java:213)
at org.apache.myfaces.view.facelets.el.ELText$ELTextComposite.writeText(ELText.java:125)
at org.apache.myfaces.view.facelets.compiler.TextInstruction.write(TextInstruction.java:48)
... 28 more
Caused by: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at org.eclipse.persistence.exceptions.ValidationException.cannotAcquireDataSource(ValidationException.java:497)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:109)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
... 55 more
Caused by: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at javax.naming.CompoundName.addAll(CompoundName.java:445)
at org.jnp.interfaces.NamingContext.composeName(NamingContext.java:1077)
at org.jnp.interfaces.NamingContext.getAbsoluteName(NamingContext.java:1855)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:717)
at javax.naming.InitialContext.lookup(InitialContext.java:396)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:103)
... 59 more
2012-07-20 13:22:16,764 SEVERE [org.apache.myfaces.renderkit.ErrorPageWriter] (http-127.0.0.1-8080-1) An exception occurred
javax.faces.FacesException: javax.persistence.PersistenceException: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.wrap(ExceptionHandlerImpl.java:241)
at org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:156)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:258)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:662)
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:517)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
at pt.inov.spocs.board.server.model.entity.Controller.<init>(Controller.java:19)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at org.apache.myfaces.config.annotation.TomcatAnnotationLifecycleProvider.newInstance(TomcatAnnotationLifecycleProvider.java:49)
at org.apache.myfaces.config.ManagedBeanBuilder.buildManagedBean(ManagedBeanBuilder.java:162)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.createManagedBean(ManagedBeanResolver.java:303)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.getValue(ManagedBeanResolver.java:266)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
at org.apache.myfaces.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:65)
at org.apache.myfaces.el.convert.VariableResolverToELResolver.getValue(VariableResolverToELResolver.java:96)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:61)
at org.apache.el.parser.AstValue.getValue(AstValue.java:107)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at org.apache.myfaces.view.facelets.el.ELText$ELTextVariable.writeText(ELText.java:213)
at org.apache.myfaces.view.facelets.el.ELText$ELTextComposite.writeText(ELText.java:125)
at org.apache.myfaces.view.facelets.compiler.TextInstruction.write(TextInstruction.java:48)
at org.apache.myfaces.view.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:46)
at org.apache.myfaces.view.facelets.compiler.UILeaf.encodeAll(UILeaf.java:214)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1159)
at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263)
at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)
at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
... 21 more
Caused by: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:/EDeliveryUnit].
Internal Exception: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at org.eclipse.persistence.exceptions.ValidationException.cannotAcquireDataSource(ValidationException.java:497)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:109)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
... 55 more
   Caused by: javax.naming.InvalidNameException: Not a compound name: EDeliveryUnit
at javax.naming.CompoundName.addAll(CompoundName.java:445)
at org.jnp.interfaces.NamingContext.composeName(NamingContext.java:1077)
at org.jnp.interfaces.NamingContext.getAbsoluteName(NamingContext.java:1855)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:717)
at javax.naming.InitialContext.lookup(InitialContext.java:396)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:103)
... 59 more 
```

我尝试了许多不同的方式，但我无法让这些工作。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:51:08.163

我找到了解决方案。

如果我们不想使用事务，JBoss 强制我们定义一个**非 jta-** **data-source**，如果你想使用它，则强制我们定义一个 jta-data-source。

无论哪种方式，无论我们是否要使用事务，问题是提供的大多数信息都建议我们使用**jdbc/JNDI-NAME**来指定这些，而我们要使用的是**java:/JNDI-NAME**。

总之，如果您想将 EclipseLink JPA 与 JBoss 而不是 Data-Source 一起使用，您需要确保指定：

*   `transaction-type="RESOURCE_LOCAL"`
*   `<non-jta-data-source>java:/JNDI-NAME</non-jta-data-source>`或者`<jta-data-source>java:/JNDI-NAME</jta-data-source>`

这是我的persistence.xml的更正：

```
<persistence-unit name="persistenceSamplePU" transaction-type="RESOURCE_LOCAL">     
     <non-jta-data-source>java:/EDeliveryUnit</non-jta-data-source>

     <!-- Entities must be specified for EclipseLink weaving -->
    <class>pt.inov.spocs.board.server.model.entity.SystemUser</class>
    <class>pt.inov.spocs.board.server.model.entity.UserSession</class>

    <properties>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/edelivery_db" />
        <property name="javax.persistence.jdbc.user" value="root" />
        <property name="javax.persistence.jdbc.password" value="root" />
    </properties>
</persistence-unit> 
```

感谢您的宝贵帮助@Chris。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:08:30.350

您正在指定不与数据源混合的“javax.persistence.jdbc.x”属性。您应该指定要使用的数据源或 JDBC 连接 url 等，但不能同时指定两者。您是否尝试使用 JTA？还有一个警告，说明您正在使用定义了 JTA 数据源的 transaction-type="resource-local" - 您需要为要使用的 JTA 数据源指定“JTA”事务类型，并且需要它以便它可以挂钩到 JBoss 事务管理器。数据源查找可能还需要设置目标服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T16:41:44.677

我知道这可能是旧的。我在 jdeveloper 12c 和 weblogic 12.x 上遇到了同样的问题，我通过省略**java:** from datasource name at persistence.xml 文件解决了这个问题，如下所示：from: **java:/app/jdbc/data_source**

到： **/app/jdbc/data_source**

# c# - C#中的慢while循环

> ID：11566119
> 
> 赞同：5
> 
> 时间：2012-07-19T17:24:33.703
> 
> 标签：c#, performance, loops, while-loop

我有一个`while`循环，它所做的只是一个方法调用。我在循环外部有一个计时器，另一个计时器递增地增加方法调用在循环内花费的时间。外部时间大约需要 17 秒，内部计时器的总时间为 40 毫秒。该循环正在执行 50,000 次。以下是代码示例：

```
long InnerTime = 0;
long OutterTime = 0;
Stopw1.Start();
int count = 1;
while (count <= TestCollection.Count) {
    Stopw2.Start();
    Medthod1();
    Stopw2.Stop();
    InnerTime = InnerTime + Stopw2.ElapsedMilliseconds;
    Stopw2.Reset();
    count++;
}
Stopw1.Stop();
OutterTime = Stopw1.ElapsedMilliseconds;
Stopw1.Reset(); 
```

任何帮助将非常感激。马西莫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T17:45:11.323

你在比较苹果和橘子。您的外部计时器测量所用的总时间。您的内部计时器*测量*调用`Method1`.

[ElapsedMilliseconds](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsedmilliseconds.aspx)属性“表示向下舍入到最接近的整数毫秒值的经过时间” 。因此，您将四舍五入**到**最接近的毫秒约 50,000 次。

如果您的调用`Method1`平均不到 1 毫秒，那么大多数情况下，“ElapsedMilliseconds”属性将返回 0，您的内部计数将比实际时间少得多。事实上，你的方法平均需要大约 0.3 毫秒，所以你很幸运，甚至可以让它超过 1 毫秒 40 次。

使用`Elapsed.TotalMilliseconds`or`ElapsedTicks`属性代替`ElapsedMilliseconds`. 一毫秒相当于 10,000 个滴答声。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:29:58.067

这是在做什么：`TestCollection.Count`？

我怀疑你的 17 秒是在一遍又一遍地计算你的 50,000 件物品上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T17:33:04.517

尝试改变这个：

```
while (count <= TestCollection.Count) {
...
} 
```

对此：

```
int total = TestCollection.Count;
while (count <= total) {
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T17:37:55.063

为了补充其他人已经说过的内容，通常 C# 编译器必须重新评估任何属性，包括

```
TestCollection.Count 
```

对于每一个循环迭代。属性的值可能会随着迭代而变化。

将值分配给局部变量可以消除编译器对每次循环迭代重新评估的需要。

我知道的一个例外是 Array.Length，它受益于专门针对数组的优化。这称为[Array Bounds Check Elimination](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/08/13/array-bounds-check-elimination-in-the-clr.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T17:51:50.663

要正确测量通话时间，您应该使用刻度

请尝试以下方法：

```
long InnerTime = 0;
long OutterTime = 0;

Stopwatch Stopw1 = new Stopwatch();
Stopwatch Stopw2 = new Stopwatch();

Stopw1.Start();
int count = 1;
int run = TestCollection.Count;
while (count <= run) {
    Stopw2.Start();
    Medthod1();
    Stopw2.Stop();
    InnerTime = InnerTime + Stopw2.ElapsedTicks;
    Stopw2.Reset();
    count++;
}
Stopw1.Stop();
OutterTime = Stopw1.ElapsedTicks;
Stopw1.Reset(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T17:57:33.487

您不应该单独测量这种微小的方法。但如果你真的想，试试这个：

```
long innertime = 0;

while (count <= TestCollection.Count) 
{     
    innertime -= Stopw2.GetTimestamp();
    Medthod1();
    innertime += Stopw2.GetTimestamp();
    count++; 
} 

Console.WriteLine("{0} ms", innertime * 1000.0 / Stopw2.Frequency); 
```

# wpf - WPF中的Horizo ntalAlignment和Horizo ntalContentAlignment有什么区别？

> ID：11566122
> 
> 赞同：26
> 
> 时间：2012-07-19T17:24:45.007
> 
> 标签：wpf, wpf-controls

有什么区别：

*   `HorizontalAlignment="Stretch"`
*   `HorizontalContentAlignment="Stretch"`

在 WPF 的文本框中？

示例：

```
<TextBox HorizontalAlignment="Stretch"
            HorizontalContentAlignment="Stretch"
            Height="100"
            TextWrapping="Wrap"
            AcceptsReturn="True"
         ></TextBox> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-19T17:30:18.893

`HorizontalAlignment`并`VerticalAlignment`确定控件本身相对于其父控件的对齐方式。

`HorizontalContentAlignment`并`VerticalContentAlignment`确定控件内容相对于控件的对齐方式。

例如考虑一个常见的 Button 控件

```
<Button x:Name="aButton" Width="50" Height="25" /> 
```

在这里，您必须以某种方式指定此控件在其父控件中的对齐方式。合适的父控件可以是 StackPanel、Grid、WrapPanel 等。

对于两者`Horizontal`-您可以在选项、和之间进行`VerticalAlignment`选择。前三个选项尊重按钮的宽度和高度，而最后一个选项尝试将按钮拉伸到指定的方向，忽略设置的宽度或高度：`Left``Right``Center``Stretch`

编码

```
<StackPanel Orientation="Horizontal">
    <Button x:Name="aButton" Width="50" Height="25" HorizontalAlignment="Right" />
</StackPanel> 
```

例如，将 Button 放在 StackPanel 内并将其在左侧对齐。

`HorizontalContentAlignment`并`VerticalContentAlignment`对齐控件的内容。内容是内置在控件中的特殊 UIControl，您可以通过查看 ContentControl 的 ControlTemplate 来简单地利用它。请注意，我们特别谈论的是 ContenControls，它充当容器，能够将一个对象“携带”到内部并显示 - 它的内容。

因此`HorizontalContentAlignment`，并且`VerticalContentAlignment`正在确定此内容相对于其容器的对齐方式。在最初创建的按钮的情况下，按钮内容是它的标题，并且使用有问题的两个属性，您正在将此标题对齐在按钮边框内，这也是其中之一：左、右、中心、拉伸。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-19T17:30:36.337

`HorizontalAlignment`将使您的文本框与其包含的父`HorizontalContentAlignment`级对齐，而将您的文本框的文本与其自身对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-18T09:01:39.950

Horizo​​ntalContentAlignment 和 VerticalContentAlignment 与将这些应用于其内容的内容控件一起使用。例如，在下面的代码中，内容控制按钮会将其内容（在本例中为字符串，可以是任意对象）居中对齐。

当子元素位于面板内时，Horizo​​ntalAlignment 和 VerticalAlignment 与子元素一起使用。Panel 会根据子元素的这些属性来排列它的子元素。在下面的代码中，面板 (StackPanel) 将其子 (Button) 对齐。

```
<StackPanel>
    <Button Content="OK" 
    HorizontalContentAlignment="Center" VerticalContentAlignment="Center" 
    HorizontalAlignment="Right" VerticalAlignment="Top" />
</StackPanel> 
```

# c# - c#读取远程服务器的事件日志

> ID：11566126
> 
> 赞同：3
> 
> 时间：2012-07-19T17:24:46.790
> 
> 标签：c#, permissions, event-log

我正在关注[这篇](https://stackoverflow.com/questions/5313211/read-event-log-remotely-with-net)文章并尝试运行代码（复制如下），但我遇到了一个稍微不同的问题。我可以远程连接到服务器并通过事件查看器程序查看事件日志，但我无法遍历代码中的事件。我收到一个 InvalidOperationException 说“无法在机器上打开日志 EventLogName。Windows 没有提供错误代码。” 还有一个 System.ComponentModel.Win32Exception 类型的内部异常，显示“访问被拒绝”。

```
private static bool GetEventLogData(DateTime start)
{
    var log = new EventLog("EventLogName", "SERVER.domain.net");
    bool errorFound = false;
    foreach (EventLogEntry entry in log.Entries)
    {
        if ((entry.EntryType == EventLogEntryType.Error) && 
            (entry.TimeGenerated >= start))
        {
            Console.WriteLine("Error in Event Log:\n" + entry.Message + "\n");
            errorFound = true;
        }
    }
    return errorFound;
} 
```

有任何想法吗？

**编辑：**

异常数据如下。我无法发布服务器名称，因为它是公司信息。尝试读取事件日志时收到错误消息。我绝对确定我可以阅读日志，因为我可以远程连接我的帐户并使用事件查看器阅读日志。

```
System.InvalidOperationException was unhandled
  Message=Cannot open log EventLogName on machine SERVER.domain.net. Windows has not provided an error code.
  Source=System
  StackTrace:
       at System.Diagnostics.EventLogInternal.OpenForRead(String currentMachineName)
       at System.Diagnostics.EventLogInternal.GetEntryAtNoThrow(Int32 index)
       at System.Diagnostics.EventLogEntryCollection.EntriesEnumerator.MoveNext()
       at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
       at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
       at System.Collections.Generic.List`1.InsertRange(Int32 index, IEnumerable`1 collection)
       at System.Collections.Generic.List`1.AddRange(IEnumerable`1 collection)
       at MyApp.Program.GetEventLogData(String machineName, DateTime start) in c:\users\me\documents\visual studio 2010\Projects\MyApp\MyApp\Program.cs:line 45
       at MyApp.Program.Main(String[] args) in c:\users\me\documents\visual studio 2010\Projects\MyApp\MyApp\Program.cs:line 28
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.ComponentModel.Win32Exception
       Message=Access is denied
       ErrorCode=-2147467259
       NativeErrorCode=5
       InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:15:23.007

这很可能是策略许可问题。请参阅 TechNet 上的[授予非管理员权限以阅读事件日志 Windows 2003 和 Windows 2008](http://blogs.technet.com/b/janelewis/archive/2010/04/30/giving-non-administrators-permission-to-read-event-logs-windows-2003-and-windows-2008.aspx)博客条目。完成此操作后，我就可以使您的代码正常工作。对于 Windows 2008 Server 及更高版本，只需将用户添加到 Event Log Readers 本地安全组即可。在我这样做之前，我得到了同样的错误。

# java - 如何使用微调器将选择保存到共享首选项

> ID：11566135
> 
> 赞同：0
> 
> 时间：2012-07-19T17:25:10.550
> 
> 标签：java, android

我有一个名为 的微调器视图`Spinner_Gender`，我制作了数组、数组适配器并制作了`onItemSelectedListener`. 我想将选定的项目位置保存为共享首选项的整数，我尝试使用带有 Editor 和 putInt 的字符串，它保存得很好。但是当使用它将保存的数据重新加载到微调器`.setSelection`时会出错，因为它需要一个整数而不是字符串。同样，在 sharedpreference 中尝试 Integer 时，我无法将所选项目位置保存到其中，因为 putInt 只需要一个字符串即可放入 int 。

对不起，很长的问题，但我搜索了很多，找不到答案。请再问两个问题： spinner 的整数名称是`selectedItemPosition`什么？我怎样才能将它存储到`sharedpreference`？

代码：

```
final Spinner spinner = (Spinner) findViewById(R.id.Spinner_Gender);
spinner.setAdapter(adapter); 
spinner.setOnItemSelectedListener( new AdapterView.OnItemSelectedListener() { 
      public void onItemSelected(AdapterView<?> parent, View itemSelected, 
                                final int selectedItemPosition, long selectedId) 
      { 
          int selectedPosition = spinner.getSelectedItemPosition(); 
          Editor editor = mGameSettings.edit(); 
          editor.putInt(myNum,selectedPosition); 
          editor.commit(); 
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:41:11.333

I don't quite understand what's your issue with SharedPreferences. When you want to save the value you do something like this :

```
SharedPreferences test = getSharedPreferences("TEST", MODE_MULTI_PROCESS);
Editor editTest = test.edit();
editTest.putInt("key", id_from_spinner);
editTest.commit(); 
```

When you want to get the value you do something like this :

```
SharedPreferences test = getSharedPreferences("TEST", MODE_MULTI_PROCESS);
int id = test.getInt("key", -1);
if(id != -1) {
    //use it in your spinner
} else {
    //abort because value was not set
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:32:47.940

要将 int 转换为可以使用`Integer.toString(theInteger)`的 String 并将 String 转换为可以使用的 int `Integer.parseInt(theString)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:35:07.027

你应该做这样的事情

```
spinner.setSelection(dataAdapter.getPosition(genderstring)); 
```

## 更新 ：

```
final Spinner spinner = (Spinner) findViewById(R.id.Spinner_Gender);
spinner.setAdapter(adapter); 

spinner.setSelection(mGameSettings.getInt("gender", 0));

spinner.setOnItemSelectedListener( new AdapterView.OnItemSelectedListener() { 
      public void onItemSelected(AdapterView<?> parent, View itemSelected, 
                                final int selectedItemPosition, long selectedId) 
      { 
          Editor editor = mGameSettings.edit(); 
          editor.putInt("gender", selectedItemPosition); 
          editor.commit(); 
      }
} 
```

# c - c中的指针：删除链表的每隔一个元素的函数

> ID：11566138
> 
> 赞同：4
> 
> 时间：2012-07-19T17:25:28.893
> 
> 标签：c, pointers, linked-list

我想编写一个函数，它获取一个指向链表头的指针，并每隔一个成员就从链表中删除一次。List 是 element 类型的链接*元素*：

```
typedef struct element{
    int num;
    struct element* next;
}element; 
```

我对所有这些指针算术都很陌生，所以我不确定我是否正确编写它：

```
 void deletdscnds(element* head) {
    element* curr;
    head=head->next; //Skipping the dummy head//

    while (head!=NULL) {
        if (head->next==NULL) 
            return;

            else {
                curr=head;
                head=head->next->next; //worst case I'll reach NULL and not a next of a null//
                curr->next=head;
            }
        }
    } 
```

我一直在更改它，因为我一直在发现错误。你能指出任何可能的错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T17:33:54.803

如果您根据节点对来考虑链表，则该算法会简单得多。循环的每次迭代都应处理两个节点 -`head`和`head->next`，并在退出时`head`保持等于`head->next->next`。同样重要的是不要忘记删除中间节点，如果你要将它从列表中删除，否则你会看到内存泄漏。

```
while (head && head->next) {
    // Store a pointer to the item we're about to cut out
    element *tmp = head->next;
    // Skip the item we're cutting out
    head->next = head->next->next;
    // Prepare the head for the next iteration
    head = head->next;
    // Free the item that's no longer in the list
    free(tmp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:03:46.347

用递归术语可视化这个问题可能是最直接的，如下所示：

```
// outside code calls this function; the other functions are considered private
void deletdscnds(element* head) {
  delete_odd(head);
}

// for odd-numbered nodes; this won't delete the current node
void delete_odd(element* node) {
  if (node == NULL)
    return; // stop at the end of the list
  // point this node to the node two after, if such a node exists
  node->next = delete_even(node->next);
}

// for even-numbered nodes; this WILL delete the current node
void delete_even(element* node) {
  if (node == NULL)
    return NULL; // stop at the end of the list
  // get the next node before you free the current one, so you avoid
  // accessing memory that has already been freed
  element* next = node->next;
  // free the current node, that it's not needed anymore
  free(node);
  // repeat the process beginning with the next node
  delete_odd(next);
  // since the current node is now deleted, the previous node needs
  // to know what the next node is so it can link up with it
  return next;
} 
```

至少对我来说，这有助于阐明每一步需要做什么。

我不建议实际使用这种方法，因为在 C 中，递归算法可能会占用大量 RAM，并导致不优化它们的编译器导致堆栈溢出。相反，dasblinkenlight 的答案包含您应该实际使用的代码。

# linux - 我不小心做了ulimit -r1，我想回到ulimit -r90+，我该怎么做？

> ID：11566139
> 
> 赞同：2
> 
> 时间：2012-07-19T17:25:35.053
> 
> 标签：linux, bash, ulimit

然后我知道硬限制已变为 1 ..有没有一种简单的方法可以“重置我所做的”？这是我通过 ssh 登录的服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T17:27:19.427

注销并重新登录。

# android - 使用 savedInstanceState 和 onSaveInstanceState 重要吗？

> ID：11566140
> 
> 赞同：1
> 
> 时间：2012-07-19T17:26:00.063
> 
> 标签：android, android-intent, parameters

我有一个只支持纵向模式的应用程序。我正在使用序列化传递我所有的论点，通过意图传递 -`intent.putExtra()`然后在`onCreate()`- `getIntent().getExtras().getX(MY_PARAM_NAME)`...

即使系统关闭虚拟机，这也有效，因为与其他事情相关的崩溃。由于序列化，活动似乎以正确的参数重新开始。

所以问题是，在我的情况下是否需要保存实例状态？没有它似乎工作得很好......还没有遇到任何问题。但也许我遗漏了一些东西，或者没有进行足够的测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:32:58.160

正如您所指出的，如果您`Activity`被杀死（即由于资源不足），则在重新创建它时，它会传递`Intent`启动它的原始文件。就您而言，这意味着您可以取回序列化对象。

覆盖`onSaveInstanceState`对于在执行过程中发生更改`Activity`（尚未在其他地方持久化）的情况下很重要，您希望维护以防它被杀死。

例如，将成员变量存储在 your`Activity`中是危险的，因为当`Activity`被杀死并重新创建时，除非您将它们存储在`Bundle`in 中`onSaveInstanceState`，然后将它们从`Bundle`传递的 to中恢复`onCreate`。

**更新：**测试实现该方法的必要性的一个好方法是强制 Android 在您离开它们后立即终止您的活动。然后，运行您的应用程序，看看是否有任何问题。您可以使用模拟器上的[开发工具应用程序](http://developer.android.com/tools/debugging/debugging-devtools.html)执行此操作，或者在 ICS 中通过转到设置 -> 开发人员选项并选中“不保留活动”来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:32:09.843

`onSaveInstanceState()`并且`onRestoreInstanceState()`仅在需要重新创建 Activity 时由 Android 显式调用，通常是在配置更改之后（例如更改方向）。

# sql-server-2008 - 检测来自 Excel 的 varchar 列中的值 0x

> ID：11566141
> 
> 赞同：1
> 
> 时间：2012-07-19T17:26:00.240
> 
> 标签：sql-server-2008, excel, ms-jet-ace

我有一个通过 Excel 中的 SQLBulkCopy 填充的 sql 表。使用 Microsoft ACE 驱动程序完成复制。

我遇到了一个特定文件的问题 - 当它被加载到 sql 时，一些列（在 excel 中显示为空）包含一个奇数值。

例如，运行这个 sql：

```
SELECT
    CONVERT(VARBINARY(10),MyCol),
    LEN(MyCol)
FROM MyTab 
```

会回来

```
0x, 0 
```

即 - 将列中的值转换为`varbinary`显示某些内容，但执行 varchar 的长度显示没有长度。我意识到显示的值是十六进制值的词干，但它到达那里很奇怪，而且检测起来有多难。

显然我可以清除 Excel 中的单元格，但我确实需要自动检测到这一点，因为最终用户也会遇到同样的问题。当数据得到处理时，它会导致进一步的问题。很难将问题从最终症状追溯到源头。

除了上述转换为`varbinary`SSMS 中的输出之外，我还没有想出一种方法来检测这些值，无论是在 Excel 中还是通过 SQL 脚本来删除它们。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:45:10.047

这可能会帮助您：

-- 从十六进制字符串转换为 varbinary：

```
DECLARE @hexstring VarChar(MAX);
SET @hexstring = 'abcedf012439';
SELECT  CAST('' AS XML).Value('xs:hexBinary( substring(sql:variable("@hexstring"),     sql:column("t.pos")) )', 'varbinary(max)')
FROM (SELECT CASE SubString(@hexstring, 1, 2) WHEN '0x' THEN 3 ELSE 0 END) AS t(pos)
GO 
```

-- 从 varbinary 转换为 hex 字符串：

```
DECLARE @hexbin VarBinary(MAX); 
SET @hexbin = 0xabcedf012439; 
SELECT '0x' + CAST('' AS XML).Value('xs:hexBinary(sql:variable("@hexbin") )', 'varchar(max)'); 
GO 
```

一种方法是添加新列、转换数据、删除旧列并将新列重命名为旧名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:59:10.633

正如马丁在上面指出的，`0x`当你转换一个空字符串时你会得到什么。例如：

```
SELECT CONVERT(VARBINARY(10),'') 
```

因此，检测它的问题显然消失了。

我必须假设 excel 单元格中有一些垃圾，在 ACE 驱动程序或 SQLBulkCopy 的写下过程中被过滤掉了。因为原来字段中有东西，所以写入的值是空的，而不是null。

为了确保数据中的所有内容都是一致的，我们需要进行后期处理以将所有空值切换为空值，以便接下来的大量脚本可以工作。

# asp-classic - 经典 ASP：被两种模式分割

> ID：11566144
> 
> 赞同：3
> 
> 时间：2012-07-19T17:26:03.650
> 
> 标签：asp-classic, vbscript, split

我正在尝试通过两个参数/模式拆分经典 ASP 中的字符串

例如，我正在尝试做类似的事情

```
str = "1,2,3,4|5|6.7.8"
arr = Split(str, "," , "|" )
'arr = [ 1 , 2 , 3 , 4 , 5 , 6.7.8 ] 
```

除了编写我自己的拆分函数之外，还有其他方法吗？（迭代整个字符串，与模式比较......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:31:02.490

您可以先替换其中一个值，然后对其进行拆分。例如，用管道替换逗号，然后在管道上拆分：

```
arr = Split(Replace(str, ", ", "|"), "|" ) 
```

# html - 在css的网格结构中应用边框

> ID：11566156
> 
> 赞同：0
> 
> 时间：2012-07-19T17:26:43.497
> 
> 标签：html, css, css-float

我正在尝试创建一个具有相等高度和宽度的 div 的网格结构，但我无法应用边框 **CSS**

```
 .Container {
    width:1000px;
    position:relative;
    margin:0 auto;
}
.RowContainer {
    overflow:hidden;
    position:relative;
    height:200px;
    clear:both;
}
.RowContainer .Cell {
    position:relative;
    float:left;
    height:100%;
    width:200px;
    border:1px solid Black;

} 
```

HTML

```
 <div class="Container">     
    <div class="RowContainer">
      <div class="Cell"><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum</p> </div>
        <div class="Cell"><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></div>
        <div class="Cell"><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum
        </p>  </div>
        <div class="Cell"><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></div>
    </div>
    <div class="RowContainer">
        <div class="Cell"><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum
        </p></div>
        <div class="Cell"><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></div>
        <div class="Cell"><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></div>
        <div class="Cell"><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></div>
    </div>  
    <div style="clear:both"></div>    
</div> 
```

我有两个问题

1.最后一行没有显示边框。

2\. 尽管对所有人都应用了相同的边框属性，但边框宽度似乎不相等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:32:36.630

如果你想创建类似表格的东西，为什么不直接使用表格呢？

```
<table class="container">     
    <tr>
        <td><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum</p></td>
        <td><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></td>
        <td><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum</p></td>
        <td><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></td>
    </tr>
    <tr>
        <td><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum</p></td>
        <td><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></td>
        <td><h1>lorum ipsum lorum ipsum</h1><p>lorum ipsum epsum</p></td>
        <td><h1>lorum ipsum</h1><p>lorum ipsum epsum</p></td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:32:45.967

底部边框未显示在***任***一行中，因为您`height: 100%`在`.Cell`和`overflow: hidden`上`.Container`。您在第一行下看到的是第二行的顶部边框。

如果您在that has`height: 100%;`的一个元素的子元素上设置，然后为该子元素设置 a of ，则该边框*在所有边上加起来*。`height: 200px``overflow: hidden``border``1px`

 *`202px`它使该子元素垂直占据。那是`1px`从顶部边框**+** `200px`从高度**+** `1px`从底部边框。

但是父元素的高度**只有** `200px`and `overflow: hidden`，这意味着从子元素垂直方向上，您看到的是`1px`上边框和子元素`199px`的高度。`1px`它的高度和`1px`底部边框仍然是隐藏的。

第二个垂直边框比第一个更厚，因为你有第一个单元格的右边框和第二个单元格`1px`的左`1px`边框。

这将解决问题[http://dabblet.com/gist/3145644](http://dabblet.com/gist/3145644)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:35:24.427

`overflow:hidden`on`.RowContainer`隐藏了 div 上的边框，因为边框是在' 框`.Cell`之外绘制的，该框设置为 100% 高度。`.Cell`删除`overflow:hidden`应该再次显示它。

至于不相等的边界，我不能肯定地说，因为你没有提供一个 jsfiddle 来查看，但我猜你的意思是单元格之间的边界比它应该的要厚——那是因为每个单元格`.Cell`都有一个边框一直环绕，导致左/右边框彼此相邻，呈现出 2px 边框的外观。

您可以通过仅在每个的顶部和左侧`.Cell`设置边框，然后在底部和右侧设置边框来解决此问题`.Container`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T17:53:37.910

删除你的溢出：隐藏

像这样

```
 .Container {
width:1000px;

margin:0 auto;

}

   .RowContainer {

height:200px;
clear:both;

}

 .RowContainer .Cell {
position:relative;
float:left;
height:100%;
width:200px;

  border:1px solid Black;
} 
```

**CSS 溢出**

页面上的每个元素都是一个矩形框。这些盒子的大小、位置和行为都可以通过 CSS 控制。通过行为，我的意思是当盒子内部和周围的内容发生变化时盒子如何处理它。例如，如果您不设置框的高度，则该框的高度将增长到容纳内容所需的大小。但是当你在一个盒子上设置了一个特定的高度或宽度，而里面的内容却放不下时会发生什么？这就是 CSS 溢出属性的用武之地，它允许您指定您希望如何处理它。

溢出属性有四个值：可见（默认）、隐藏、滚动和自动。还有姐妹属性overflow-y 和overflow-x，它们的采用率较低。*

# php - 日期时间时区mysql和php计算

> ID：11566164
> 
> 赞同：2
> 
> 时间：2012-07-19T17:26:59.967
> 
> 标签：php, mysql, timezone

我有一个关于在使用 php 和 mysql 的应用程序中处理带有时区的有效日期和时间的问题。

mysql datetime object dosnt 保存时区信息。所以我不能在数据库中保存很多时区。但是在 php 应用程序中，每个用户都可以使用 php 脚本拥有自己的时区`date_default_timezone_set()`......所以问题会在什么时候出现。

```
user     timezone            lastchange
user1    UTC                 2012-01-01 12:20:00
user2    Australia/Melbourne 2012-01-01 12:19:00 
```

但在计算中 user2 lastchange 低于 user1 lastchange 但在现实世界中是负数。

解决此问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:31:15.197

我认为你必须将时间存储到你的时区，当你想显示它时，使用函数：date()，并将一个时间戳传递给用户的时区！mktime 将帮助您处理时间戳，因为您可以将负整数及时传递给它；）

# c++ - boost::python::extract 的对面

> ID：11566166
> 
> 赞同：1
> 
> 时间：2012-07-19T17:27:12.407
> 
> 标签：c++, python, boost, numpy, boost-python

我正在使用 boost Python 和 NumPy API。我知道在 C++ 方面，在 boost python 命名空间中，我们有以下能力通过使用类似的命令从 numpy.ndarray 中提取元素

```
float value = bp::extract<float>(someArray[someIndex]); 
```

现在我的问题是，是否存在一些相反的命令？

例如

```
someArray[someIndex] = bp::put<float>(value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:36:50.593

[仅限http://www.boost.org/doc/libs/1_50_0/libs/python/doc/v2/to_python_converter.html](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/v2/to_python_converter.html)。你的例子应该是

```
float value = bp::extract<float>(someArray[someindex]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T11:51:04.873

用于使用通常的 to-python 转换机制`bp::object(value)`转换为 Python。`value`

# javascript - jQuery如何在递归函数中按值递增变量

> ID：11566169
> 
> 赞同：1
> 
> 时间：2012-07-19T17:27:19.707
> 
> 标签：javascript, jquery, json, variables, arguments

我有一个在 document.ready 中调用的 JS 函数。意图是当它滚动到底部窗口时，它将从 JSON API 加载更多内容。

API有参数offset和limit。偏移量控制您看到的结果子集。例如。20-40 将是 offset=20 并且限制控制您一次可以查看多少。

我想我会用一个递归函数来解决这个问题，每次用户进入窗口底部时都会调用它自己，使用 window.scroll。一旦它们到达底部，它将每次将偏移量增加 20，然后再次运行该函数。

问题：我似乎无法让它将变量增加 20 来完成这项工作。想法？

```
function getData(offset) {
var jsonCallback = "&jsoncallback=?";
//var offset = 20;
//var offset += 20;
var limit = 20;

var characterURL = "http://api.example.com/character&byId=" + characterID + "&offset=" + offset + "&limit=" + limit;    

$.getJSON(characterURL + jsonCallback, function(data) {
    for (i=0; i < (data.data.results).length; i++) {

        var $characterUl = $("<ul>");
        $characterUl.appendTo("#characterComics");
        $("<li>").text(data.data.results[i].title).appendTo($characterUl);  
        $("<li>").text(data.data.results[i].id).appendTo($characterUl);  
        $("<li>").text(data.data.results[i].release_date).appendTo($characterUl);  
        if (data.data.results[i].release_date > 0) {
            $characterLi.text(data.data.results[i].issue_number).appendTo($characterUl);      
        }  
    }

    $(window).scroll(function() {
        if($(window).scrollTop() + $(window).height() > $(document).height() - 10) {
            while ((data.data.results).length === offset || (data.data.results).length > offset) {
                offset = offset+20;
                $("<div>").text(offset).appendTo("body");
                getComics(offset);
            }
        }
    });
   });
}

$(document).ready(function() {    
var $characterComics = $("<div>", {id : "characterComics"});
$characterComics.appendTo("body");
getData(0);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:40:58.203

**更新** 阅读更多作为伪代码

```
function getData(offset) {
    var jsonCallback = "&jsoncallback=?",
    characterURL = "http://api.example.com/character&byId=" + characterID + "&offset=" + offset + "&limit=" + limit;    

    $.getJSON(characterURL + jsonCallback, function(data) {
        for (i=0; i < (data.data.results).length; i++) {
            var $listItem = $("<li>");
            listItem.append("<span>"+data.data.results[i].title+"</span>");
            listItem.append("<span>"+data.data.results[i].id+"</span>");
            listItem.append("<span>"+data.data.results[i].release_date+"</span>"); 
            if (data.data.results[i].release_date > 0) {
                listItem.append("<span>"+data.data.results[i].issue_number+"</span>");   
            }
            listItem.appendTo($characterUl);
            itemsLoaded++;
        }
   });
}

$(document).ready(function() {
    var $characterComics = $("<div>", {id : "characterComics"}),
        $characterUl = $("<ul>"),
        offset = 0,
        itemsLoaded = 0;
        limit = 20;
    $characterComics.appendTo("body");
    $characterUl.appendTo($characterComics);

    $(window).scroll(function() {
        if($(window).scrollTop() + $(window).height() > $(document).height() - 10) {
            if ("check here if you reached your offsets") {
                offset = offset+20;
                getData(offset);
            }
        }
    });
   // get your first set of data
   getData(0);
}); 
```

# javascript - 如何通过 onclick 事件更改 div 的属性？

> ID：11566171
> 
> 赞同：1
> 
> 时间：2012-07-19T17:27:24.600
> 
> 标签：javascript, html, onclick

我想通过单击图像来更改容器的属性。
为什么这不起作用：

```
<script type="text/javascript">
    function changeMargin(){
        document.getElementById("container").style.margin.top="100px";
    }
</script>

<div id="container">
    <img id="btnRight" src="img/btnRight.png" onclick="changeMargin()">
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T17:28:57.210

它应该是

```
.marginTop="100px"; 
```

完整代码：

```
function changeMargin() {
    document.getElementById("container").style.marginTop = "100px";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:30:16.163

改变：

```
document.getElementById("container").style.margin.top="100px"; 
```

到：

```
document.getElementById("container").style.marginTop="100px"; 
```

# iphone - 如何在 ViewController 底部使用多个 Webview？

> ID：11566177
> 
> 赞同：0
> 
> 时间：2012-07-19T17:27:43.307
> 
> 标签：iphone, xcode, uiwebview, uiscrollview, youtube

![在此处输入图像描述](../Images/af2380076522465da31a6f44620dbe31.png)

我已经在服务器上有 10 个 youtube 视频链接。每个 youtube 视频都应该是 webview 中的缩略图。在给定的图像中，（红框）显示空间较小，用于在 webview 中显示所有 youtube 缩略图，所以我们如何滚动（红框）区域的 viewcontroll 以及如何在运行时为（红框）区域中从上到下的每个 youtube 链接创建 webview。任何建议或帮助将提前获得。thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:52:27.170

为了实现这一点，您可以使用`scrollview`with `webview`。

首先在视图中添加一个滚动视图（在红色矩形的位置）

```
UIScrollView *scrollView = [[UIScrollView  alloc] initWithFrame:CGRectMake(0,0,150,150)]; //You need to set the frame according to your need.
scrollView.contentSize = CGSizeMake(150,600);
scrollView.userInteractionEnabled = YES;
[self.view addSubview:scrollView];
[self.view bringSubviewToFront:scrollView]; 
```

现在向该滚动视图添加十个 webview

```
int yPos = 0;
for(int loop = 0; loop<10;loop++)
{
  UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,yPos,50,50)]
  NSString *htmlString = @"<html><head>
<meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 212\"/></head>
<body style=\"background:#F00;margin-top:0px;margin-left:0px\">
<div><object width=\"212\" height=\"172\">
<param name=\"movie\" value=\"http://www.youtube.com/v/oHg5SJYRHA0&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"></param>
<param name=\"wmode\" value=\"transparent\"></param>
<embed src=\"http://www.youtube.com/v/oHg5SJYRHA0&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"
type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"212\" height=\"172\"></embed>
</object></div></body></html>";

  //if your video url's are stored in an array then
  NSString *str = (NSString *)[urlArray objectAtIndex:loop];
  [webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@str]];
  [scrollView addSubview:webView];
  [webView release];
  webView = nil;
  yPos += 70;
}

[scrollView release]; 
```

这将在您的页脚视图中添加 10 个小型 you Tube 嵌入式播放器。您可以滚动页脚以查看视频的缩略图。

注意：您需要根据您的视图更改框架和内容大小。

# javascript - HTML5 Canvas 使用easeljs pan

> ID：11566179
> 
> 赞同：1
> 
> 时间：2012-07-19T17:28:04.027
> 
> 标签：javascript, html, animation, canvas, easeljs

这里有没有人有一个使用 Easeljs 进行平移的好例子？我实际上是在一个大约 5200x7400 的大画布内制作一个球的动画。我可以使用包含画布的 div 将球置于屏幕中心，将其设置为溢出滚动，然后使用该函数设置`tick()`我的.`scrollTop``scrollLeft``<div>`

我只想使用纯画布来执行此操作，因为当我尝试在 Android 4.0 上使用我的网站时，`scrollTop`它`ScrollLeft`不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:03:02.417

您是否有理由使用如此大的画布，而不仅仅是在画布内移动内容？像这样的大画布将对内存和性能产生相当大的影响——而在画布内翻译容器是相当微不足道的。

# c# - 如何限制对 WCF 中某些方法的访问？

> ID：11566182
> 
> 赞同：15
> 
> 时间：2012-07-19T17:28:09.047
> 
> 标签：c#, wcf, authentication

开始使用简单的 WCF 服务时我有点迷茫。我有两种方法，我想向世界公开一种，另一种我想限制给某些用户。最终我希望能够使用客户端应用程序来使用受限方法。到目前为止，我可以匿名访问这两种方法：

**C# 代码**

```
namespace serviceSpace
{
    [ServiceContract]
    interface ILocationService
    {
        [OperationContract]
        string GetLocation(string id);

        [OperationContract]
        string GetHiddenLocation(string id);
    }

    [AspNetCompatibilityRequirements(
     RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class LocationService : ILocationService
    {
        [WebGet(UriTemplate = "Location/{id}")]
        public string GetLocation(string id)
        {
            return "O hai, I'm available to everyone.";
        }

        // only use this if authorized somehow
        [WebGet(UriTemplate = "Location/hush/{id}")]
        public string GetHiddenLocation(string id)
        {
            return "O hai, I can only be seen by certain users.";
        }

    }
} 
```

**配置**

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>    
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" 
          automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel>
</configuration> 
```

我该如何开始？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T15:31:28.600

我找到的很多答案几乎都是我需要的，但并不完全正确。我最终设置了 ASP.net 成员资格并实现了一个自定义属性来拉取授权标头并在请求进入时处理登录。所有的魔法都发生在下面的*BeforeCall*和*ParseAuthorizationHeader*中：

```
public class UsernamePasswordAuthentication : Attribute, IOperationBehavior, IParameterInspector
{
    public void ApplyDispatchBehavior(OperationDescription operationDescription,
        DispatchOperation dispatchOperation)
    {
        dispatchOperation.ParameterInspectors.Add(this);
    }

    public void AfterCall(string operationName, object[] outputs,
                          object returnValue, object correlationState)
    {
    }

    public object BeforeCall(string operationName, object[] inputs)
    {
        var usernamePasswordString = parseAuthorizationHeader(WebOperationContext.Current.IncomingRequest);
        if (usernamePasswordString != null)
        {
            string[] usernamePasswordArray = usernamePasswordString.Split(new char[] { ':' });
            string username = usernamePasswordArray[0];
            string password = usernamePasswordArray[1];
            if ((username != null) && (password != null) && (Membership.ValidateUser(username, password)))
            {
                Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity(username), new string[0]);
                return null;
            }
        }

        // if we made it here the user is not authorized
        WebOperationContext.Current.OutgoingResponse.StatusCode =
            HttpStatusCode.Unauthorized;
        throw new WebFaultException<string>("Unauthorized", HttpStatusCode.Unauthorized);            
    }

    private string parseAuthorizationHeader(IncomingWebRequestContext request)
    {
        string rtnString = null;
        string authHeader = request.Headers["Authorization"];
        if (authHeader != null)
        {
            var authStr = authHeader.Trim();
            if (authStr.IndexOf("Basic", 0) == 0)
            {
                string encodedCredentials = authStr.Substring(6);
                byte[] decodedBytes = Convert.FromBase64String(encodedCredentials);
                rtnString = new ASCIIEncoding().GetString(decodedBytes);
            }
        }
        return rtnString;
    }

    public void AddBindingParameters(OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
    {
    }

    public void Validate(OperationDescription operationDescription)
    {
    }

} 
```

从那里我只需要将我的新属性添加到服务合同条目中。对该方法的任何请求都需要有效的授权标头，否则将在进行任何进一步处理时发回*未授权响应。*

```
[ServiceContract]
interface ILocationService
{
    [OperationContract]
    string GetLocation(string id);

    [OperationContract]
    [UsernamePasswordAuthentication]  // this attribute will force authentication
    string GetHiddenLocation(string id);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:43:37.690

使用以下步骤限制对特定 Windows 用户的访问：

*   打开计算机管理 Windows 小程序。
*   创建一个 Windows 组，其中包含您希望授予访问权限的特定 Windows 用户。例如，可以将一个组称为“CalculatorClients”。
*   将您的服务配置为要求 ClientCredentialType = “Windows”。这将要求客户端使用 Windows 身份验证进行连接。
*   使用 PrincipalPermission 属性配置您的服务方法，以要求连接用户是 CalculatorClients 组的成员。

```
// Only members of the CalculatorClients group can call this method.
[PrincipalPermission(SecurityAction.Demand, Role = "CalculatorClients")]
public double Add(double a, double b)
{ 
return a + b; 
} 
```

# php - 使用或时 PHP 正则表达式返回空白值

> ID：11566184
> 
> 赞同：0
> 
> 时间：2012-07-19T17:28:22.777
> 
> 标签：php, regex

当 OR 语句中的第二个值匹配时，我的正则表达式返回一个空白值，如果找到第二个匹配项，我希望它忽略第一个匹配项

```
preg_match('/>\s+(?:<input type="submit" value="(.*?)" \/>|<p class="no">(.*?)<\/p>)\s+<\/form>/', $string, $matches); 
```

如果第一项匹配：

```
Array
(
    [0] => <input type="submit" value="Go" />
    [1] => Go
) 
```

如果第二项匹配：

```
Array
(
    [0] => <p class="no">Value</p>
    [1] => 
    [2] => Value
) 
```

如何让它返回 [1] 而不是 [2] 中的第二个项目值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:31:35.583

不要使用`(?:`来启动选项，而是使用`(?|`[ [docs](http://php.net/manual/en/regexp.reference.subpatterns.php) ]

# tsql - 为不存在的日期批量插入可变日期字段？

> ID：11566194
> 
> 赞同：0
> 
> 时间：2012-07-19T17:29:07.147
> 
> 标签：tsql

```
Attendence
(
  Stu_id int
  Att_Id int
  Att_Date datetime
  Att_Num numeric(15,5)
) 
```

该表主要包含考勤记录。我试图找到从 2012 年 1 月 1 日到今天输入缺失日期行的逻辑。

假设此期间有一个出勤记录`row (1,1,'2012-05-06',1.20000)`。然后，我想为从 2012 年 1 月 1 日到今天的每一天插入行，除了现有日期之外，所有字段的值都相同，但应该是实际日期的日期字段除外。

我正在尝试批量插入所有行，但不知道如何调整日期字段并检查现有日期。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:34:19.857

尝试一个循环遍历日期的存储过程。

或者更好的是，制作一个日期表并从中进行选择。这会*快得多*。就像是：

```
INSERT INTO Attendence (Stu_id, Att_Id, Att_Date, Att_Num)
SELECT a.Stu_id, a.Att_Id, d.TheDate, a.Att_Num
FROM Attendence a
INNER JOIN Dates d ON d.TheDate BETWEEN '2012-01-01' AND GETDATE() 
    AND d.TheDate <> a.Att_Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:48:51.667

我会使用 DateDiff 函数来计算函数中的日期和相关日期之间的天数。创建一个 DateTime 变量并将其值设为 2012 年 1 月 1 日。然后设置一个 while 循环，该循环从 DateDiff 函数中循环天数。

在伪中，while 循环看起来像这样。

```
@DaysTill = DateDiff(days, 1/1/2012, @SomeDate)
While @DaysTill>0
    @@Check = Select Count(Att_Date) From Attendance where AttDate = DateAdd(days, @DaysTill, Jan 1st 2012)
    IF @@Check = 0 THEN Insert Into Attendance VALUES @Stu, @Id, DateAdd(days, @DaysTill, Jan 1st 2012), @numeric
    @DaysTill = @DaysTill - 1
END 
```

主要是了解 DateAdd 和 DateDiff。之后，一切都变得相对简单。

# asp.net-mvc - 从当前上下文隐含的 T4MVC 可选参数值

> ID：11566207
> 
> 赞同：6
> 
> 时间：2012-07-19T17:29:52.030
> 
> 标签：asp.net-mvc, t4mvc

我注意到我认为 T4MVC 的一些奇怪行为。具体来说，我正在尝试为可选参数值为 null 的操作构建 ActionLink（使用 HtmlHelper）。这在大多数情况下都可以正常工作。但是，如果当前路由与正在为其构建 ActionLink 的路由相同，并且 OptionalParameter 具有非空值，则生成的 ActionLink 将指定来自当前路由上下文的可选参数的值。

这是一个冗长的解释，我认为代码将有助于澄清。

## 控制器

```
public virtual ActionResult Today(int? lineNumber = null)
{
    return Index(DateTime.Today, DateTime.Today, lineNumber);
} 
```

## 路线

```
context.MapRoute(
    "TodaysProductionSchedules",
    "Production/{Controller}/Today/{lineNumber}",
    new
        {
            area = AreaName,
            controller = MVC.Production.ProductionSchedules.Name,
            action = MVC.Production.ProductionSchedules.ActionNames.Today,
            lineNumber = UrlParameter.Optional
        }); 
```

## 剃刀

```
@Html.ActionLink("Show Today", MVC.Production.ProductionSchedules.Today(null)) 
```

* * *

正如我之前提到的，如果我当前不在映射到此路由的视图上，则将正确生成链接。但是，如果当前视图确实映射了 this 路由，并且我要么省略该值，要么提供 null（如 razor 代码片段中所示），lineNumber 参数将从当前路由值中获取其值。

我认为这可能是 T4MVC 中的一个错误，因此我也会在 T4MVC codeplex 站点上发布该主题的链接。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T20:52:37.803

**2012 年 7 月 30 日更新**：**这已在 T4MVC 2.10.1 中修复！**

这实际上是模型 unbinder 更改的最新回归。在第 639 行附近的 t4mvc.tt 中，您可以尝试将 AddRouteValues 更改为以下内容：

```
 public static void AddRouteValues(RouteValueDictionary routeValueDictionary, string routeName, object routeValue) {
        IModelUnbinder unbinder;
        if (routeValue == null)
        {
            unbinder = DefaultModelUnbinder;
        }
        else
        {
            unbinder = ModelUnbinders.FindUnbinderFor(routeValue.GetType()) ?? DefaultModelUnbinder;
        }
        unbinder.UnbindModel(routeValueDictionary, routeName, routeValue);
    } 
```

* * *

**原始答案**：我认为通常在 MVC 中，在许多情况下，当新路由中省略某个值时，它会从当前路由中获取其值，假设高级值相同（因此您会看到两种不同的情况）。

所以现在的问题是 T4MVC 是否可以/应该做些什么来避免这种行为。我没有检查确切的逻辑，但也许如果它总是在路由中设置这个值，那将禁用这种不需要的行为。

但我认为第一步是在处理 T4MVC 案例之前充分了解这里的 MVC 行为。

随意进一步调查并发送带有修复的 PR！:)

# vim - 在vim中拆分窗口以浏览文件，然后在原始窗口中打开文件

> ID：11566222
> 
> 赞同：5
> 
> 时间：2012-07-19T17:31:04.863
> 
> 标签：vim

我已经为 vim 试用了 NERDTree 插件，它非常强大，但对于我使用它的用途来说可能有点矫枉过正。我一般不反对插件，但是当我没有充分使用插件时，我不喜欢依赖插件。

我真正想要的是能够以拆分方式打开文件浏览器，类似于工作方式`:Sex`和`:Vex`工作方式。我会选择我想要的文件，它会在原始窗口中打开，然后文件浏览器就会消失。

是否有任何内置命令可以以这种方式工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T17:37:31.107

查看和朋友`:help netrw`中可用的所有映射。`:Ex`

你想要的是简单的`P`。

顺便说一句，netrw 也是一个插件。

# amazon-web-services - Amazon EC2 实例的 Ephemeral Storage 中存储了哪些数据？

> ID：11566223
> 
> 赞同：301
> 
> 时间：2012-07-19T17:31:05.153
> 
> 标签：amazon-web-services, amazon-ec2, amazon-ebs

我正在尝试停止 Amazon EC2 实例并收到警告消息

> **警告：**请注意，实例的临时存储上的任何数据都将在停止时丢失。

**我的问题**

哪些数据存储在 Amazon EC2 实例的临时存储中？

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2013-04-11T02:44:38.473

基本上，根卷（您的整个虚拟系统磁盘）是短暂的，**但前提是**您选择创建由*Amazon EC2 实例存储*支持的 AMI 。

如果您选择创建*由 EBS 支持的*AMI，那么您的根卷由 EBS 支持，并且您在根卷上的所有内容都**将**在重新启动之间保存。

如果您不确定您拥有什么类型的卷，请查看 AWS 控制台中的 EC2->Elastic Block Store->Volumes，如果您的 AMI 根卷在此处列出，那么您是安全的。此外，如果您转到 EC2->Instances，然后在您的实例的“根设备类型”列下查看，如果它显示“ebs”，那么您不必担心根设备上的数据。

更多详细信息：http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html)

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2012-07-19T17:35:00.460

未存储在挂载到实例的 EBS 卷上的任何内容都将丢失。

例如，如果您将 EBS 卷安装在`/mystuff`，那么任何不在其中的`/mystuff`内容都会丢失。如果您不安装 ebs 卷并在其上保存内容，那么我相信一切都会丢失。

您可以从您当前的机器状态创建一个 AMI，它将包含您临时存储中的所有内容。然后，当您启动基于该 AMI 的新实例时，它将包含现在的所有内容。

**更新：**根据 mattgmg1990 和 glenn bech 的评论进行澄清：

请注意，“停止”和“终止”是有区别的。如果您“停止”由 EBS 支持的实例，那么当您再次“启动”机器时，根卷上的信息仍将处于相同状态。根据文档，“默认情况下，启动 Amazon EBS 支持的实例时附加的根设备卷和其他 Amazon EBS 卷会在实例终止时自动删除”，但您可以通过配置对其进行修改。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-06T12:55:09.977

明确并回答@Dean 的问题：EBS 类型的根存储似乎不是短暂的。数据在重新启动后是持久的，实际上使用 ebs 支持的“临时”根卷没有任何意义。这与基于图像的根卷没有什么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-27T09:45:14.977

根据 AWS 文档 [ [https://aws.amazon.com/premiumsupport/knowledge-center/instance-store-vs-ebs/]](https://aws.amazon.com/premiumsupport/knowledge-center/instance-store-vs-ebs/])，实例存储卷不会因实例停止、终止或硬件故障而持久存在。从实例存储磁盘创建的任何 AMI 都不包含实例存储中存在的数据，因此此 AMI 启动的所有实例都不会将数据存储在实例存储中。实例存储可以用作在实例上运行的应用程序的缓存，对于所有持久数据，您应该使用 EBS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-09T10:18:30.243

****当您从由 Amazon EC2实例存储**支持的 AMI 启动实例时，**临时只是根卷的另一个名称****

 ****所以一切都将存储在短暂的时间里。

如果您从由 EBS 卷支持的 AMI 启动实例，则您的实例没有临时性。****

# ios - 在 Facebook 墙上张贴照片

> ID：11566225
> 
> 赞同：0
> 
> 时间：2012-07-19T17:31:06.377
> 
> 标签：ios, facebook

我正在尝试在我的 iPad 应用程序中的 Facebook 墙上发布一张图片。但什么都没有发生，Facebook 网站弹出允许它，但从未发布图像。这是我的代码：

```
-(IBAction)facebookButton {
    facebook = [[Facebook alloc] initWithAppId: APP_ID andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults    objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }

    [facebook authorize:[NSArray arrayWithObjects: @"publish_stream",@"user_photos", nil]];

    UIImage* image = [UIImage imageNamed: @"image.png"];
    NSData* imgData = UIImagePNGRepresentation(image);
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                             @"Hey", @"message",  //whatever message goes here
                                                             imgData, @"data",   //img is your UIImage
                                                             nil];
    [facebook requestWithGraphPath:@"me/photos"
                                         andParams:params
                                 andHttpMethod:@"POST"
                                     andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:03:46.423

您已将帖子部分放入`fbDidLogin`方法中。

此外，这与您的问题完全无关，但这是我在您发布的代码中注意到的，您不必将图像转换为 NSData，如果您愿意，您可以将 UIImage 本身放在键下`picture`，它会被上传。

# cordova - Android Phonegap ChildBrowser - 隐藏 ChildBrowser

> ID：11566229
> 
> 赞同：1
> 
> 时间：2012-07-19T17:31:17.713
> 
> 标签：cordova, phonegap-plugins, childbrowser

我想知道是否有任何方法可以隐藏 ChildBrowser 而不是关闭它。我希望 ChildBrowser 中的 webview 能够持续存在，而不必每次都重新启动它。关于如何做到这一点的任何建议？我尝试使用 dialog.hide() 和 dialog.show()，但这似乎不起作用。对此主题的任何帮助将不胜感激。

谢谢！

# java - javax.servlet.ServletException：找不到指定 url 的操作配置

> ID：11566230
> 
> 赞同：1
> 
> 时间：2012-07-19T17:31:30.217
> 
> 标签：java, mysql, jsp, struts-1

* * *

RegAction.java

```
 private static final String FORWARD_succ = "succ";
Connection con=null;
public Connection getcon()
    {
    try
        {

        Class.forName("com.mysql.jdbc.Driver");
        con=DriverManager.getConnection("jdbc:mysql://localhost:3306/mysql","root","root");
        }catch(SQLException e)
        {}
        catch(ClassNotFoundException c)
        {
        }
        return con;
    }

    public void closeConnection()
    {
        try
        {
            con.close();
        }catch(SQLException e)
        {}
    }
   public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws ServletException 
  {
   RegForm1 r=(RegForm1)form;
     Connection con=getcon();

 String v1=r.getFname();
 String v2=r.getLname();
   String v3=r.getUid();
   String v4=r.getDob();
  String v5=r.getPwd();
  String v6=r.getCpwd();
   String v7=r.getCity();
  String v8=r.getSt();
  String v9=r.getZc();
 System.out.println(v1);
 System.out.println(v2);
 System.out.println(v3);
  System.out.println(v4);
 System.out.println(v5);
 System.out.println(v6);
 System.out.println(v7);
 System.out.println(v8);
  System.out.println(v9);

 try
{
PrintWriter pw=response.getWriter();
  Statement ps=con.createStatement();
   int k=ps.executeUpdate("insert into reg values(v1,v2,v3,v4,v5,v6,v7,v8,v9)");
    if(k==1)
      pw.println("susccessfully stored");
       con.commit();
}catch(SQLException s)
{
}

catch(IOException s)
{
}
  return mapping.findForward("succ"); 
```

配置文件

```
 <form-bean name="regform" type="RegForm1"/>
  </form-beans>
  <global-exceptions/>
  <global-forwards/>
  <action-mappings>
   <action name="regform" path="/reg" type="RegAction" validate="true input="/Register.jsp">
    <forward name="succ" path="/success.jsp"/> 
```

我想将以下字段值存储在 mysql 数据库中。但我收到以下异常，为什么？

新用户详细信息 名*： 姓*：

用户身份* ：

出生日期*：

密码* ：

确认密码*

城市*：

状态*：

邮政编码*：

按钮

HTTP 状态 500 -

* * *

```
type Exception report
message 
description The server encountered an internal error () that prevented it from fulfilling this request.
exception 
javax.servlet.ServletException
    org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:286)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
root cause 
java.lang.NullPointerException
    RegAction.execute(RegAction.java:75)
    org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
    org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
    org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
note The full stack trace of the root cause is available in the Apache Tomcat/5.5.29 logs. 
```

* * *

Apache Tomcat/5.5.29

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:55:39.130

西瓦..

```
int k=ps.executeUpdate("insert into reg values(v1,v2,v3,v4,v5,v6,v7,v8,v9)"); 
```

在上面的语句`V1,V2,v3...`中被视为字符串值而不是使用`PrepareStatement`.. 否则像这样重写代码

```
int k=ps.executeUpdate("insert into reg values('"+v1+"','"+v2+"','"+ . . ); 
```

如果您的列表中有任何数值（v1，v2，v3 ..），则无需输入`''`代码..希望你得到这个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:06:51.513

您的代码实际上很难阅读。我的猜测是这一行：`Statement ps=con.createStatement();`cause `NPE`. 考虑到您忽略了`getCon`方法中的异常，这很难说。你绝对不应该忽略这些类型的异常。您应该记录它们并查看确切的异常。使用一些日志框架来做到这一点，或者只是简单地打印堆栈跟踪以自己查看。

```
catch(SQLException e) {
   //log the exception
}
catch(ClassNotFoundException c) {
   //log the exception    
} 
```

我认为您的`getCon`方法中的连接返回为`null`. 您应该检查您的数据库连接是否有任何问题。

# math - HQL 从算术运算中删除括号

> ID：11566236
> 
> 赞同：0
> 
> 时间：2012-07-19T17:31:48.753
> 
> 标签：math, hql, parentheses, operations

在 HQL 之后：

```
"-(a.import + a.bill)" 
```

被翻译成以下 SQL：

```
"-a.import + a.bill" 
```

而不是预期的：

```
"-(a.import + a.bill)" 
```

这使得计算结果的操作与预期的结果不同。

该翻译已通过 org.hibernate.dialect.Oracle10gDialect 和 org.hibernate.dialect.HSQLDialect 得到证明

Hibernate 的版本是 3.5.1-Final

有谁知道为什么会这样？这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:28:58.277

这是因为错误[HHH-6714](https://hibernate.onjira.com/browse/HHH-6714)发生的。解决方案是将 Hibernate 更新到更新版本。如果您必须坚持使用 3.x，那么 3.6.9 或更新版本。在 4.x 中，任何稳定版本都会出现，因为它已在 4.0.0.CR6 中修复。

我尝试了 3.6.10 并且括号仍然存在。

# php - 如何检索 imageid 并将其插入另一个表？(Mysqli)

> ID：11566237
> 
> 赞同：0
> 
> 时间：2012-07-19T17:31:58.643
> 
> 标签：php, sql, database, mysqli

我在下面有一个 mysqli 代码，它上传文件并将数据插入“图像”表：

```
<?php

session_start();

$username="xxx";
$password="xxx";
$database="mobile_app";

  $mysqli = new mysqli("localhost", $username, $password, $database);

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

$result = 0;

      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

    $imagesql = "INSERT INTO Image (ImageFile) 
    VALUES (?)";

            if (!$insert = $mysqli->prepare($imagesql)) {
      // Handle errors with prepare operation here
    }

    //Dont pass data directly to bind_param store it in a variable
$insert->bind_param("s",$img);

//Assign the variable
$img = 'ImageFiles/'.$_FILES['fileImage']['name'];

 $insert->execute();

      }

  }

?> 
```

因此，例如，如果我将 2 个图像“cat.png”和“dog.png”插入“图像”数据库表中，它将像这样插入：

```
ImageId         ImageFile

220             cat.png
221             dog.png 
```

（ImageId 是一个自动增量）

无论如何，我的问题是，当上传文件时，不仅将数据插入到上面的表中，而且我还希望能够检索上面插入的 ImageId 并将其放在下面的 Image_Question 表中，这样就可以了像这样：

```
 ImageId         SessionId      QuestionId

    220             cat.png      1
    221             dog.png      4 
```

我的问题是如何从 Image Table 中检索 ImageId 并将其插入 Image_Question 表中？下面是我的代码，它将使用 mysql 将数据插入到 Image_Question 表中，只需要能够从 Image 表中检索 ImageId：

```
 $imagequestionsql = "INSERT INTO Image_Question (ImageId, SessionId, QuestionId) 
        VALUES (?, ?, ?)";

        if (!$insertimagequestion = $mysqli->prepare($imagequestionsql)) {
          // Handle errors with prepare operation here
        }

    $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');

    $insertimagequestion->bind_param("sss", $sessid, $_POST['numQuestion'][$i]);

            $insertimagequestion->execute();

            if ($insertimagequestion->errno) {
              // Handle query error here
            }

            $insertimagequestion->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:00:50.493

在第一次插入之后，您可以使用[mysqli_insert_id](http://us2.php.net/mysqli_insert_id)来获取 id，并在第二次插入 Image_Question 时使用该 id。

# java - JTable 到 iReport

> ID：11566238
> 
> 赞同：1
> 
> 时间：2012-07-19T17:32:07.717
> 
> 标签：java, jasper-reports, pdf-generation, ireport

我正在尝试获取 JTable 中的数据并像使用 Jasper Reports 的报告一样打印它。我发现[Usando o JRBeanCollectionDataSource](http://www.furutani.com.br/2009/02/usando-o-jrbeancollectiondatasource/)和[Java bean 作为 Jasper Reports 数据源，使用 JRBeanCollectionDataSource](http://www.robertomarchetto.com/www/how_to_print_java_collections_in_jasper_reports_using_JRBeanCollectionDataSource)作为示例来创建我自己的代码：

```
package Negocio.Relatorios;

import Negocio.Contato;
import java.io.InputStream;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.view.JasperViewer;

public class DataFromRelatorios{

    public void exibirRelatorio(List<Contato> contatos){

        String caminhoJasper = "./etiquetas.jasper";
        JRBeanCollectionDataSource dataSource = new JRBeanCollectionDataSource(contatos);
        Map parameters = new HashMap();
        JasperPrint printer;
        InputStream relJas = getClass().getResourceAsStream(caminhoJasper);

        try {
            printer = JasperFillManager.fillReport(relJas, parameters, dataSource);
            JasperViewer viewer = new JasperViewer(printer, true);
            viewer.setVisible(true);
        }
        catch (JRException ex) {
            ex.printStackTrace();
        } 

    }
} 
```

当 ActionEvent 发生时调用此类：

```
private void btnGeraEtiquetasActionPerformed(java.awt.event.ActionEvent evt) {                                                 
        geradorRelatorios.exibirRelatorio(relatorioTableModel.getDados());
    } 
```

这是我的踪迹：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at net.sf.jasperreports.engine.util.JRLoader.<clinit>(JRLoader.java:65)
    at net.sf.jasperreports.engine.JRPropertiesUtil.loadProperties(JRPropertiesUtil.java:99)
    at net.sf.jasperreports.engine.DefaultJasperReportsContext.initProperties(DefaultJasperReportsContext.java:95)
    at net.sf.jasperreports.engine.DefaultJasperReportsContext.<init>(DefaultJasperReportsContext.java:72)
    at net.sf.jasperreports.engine.DefaultJasperReportsContext.<clinit>(DefaultJasperReportsContext.java:60)
    at net.sf.jasperreports.engine.JasperFillManager.getDefaultInstance(JasperFillManager.java:85)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:956)
    at Negocio.Relatorios.DataFromRelatorios.exibirRelatorio(DataFromRelatorios.java:25)
    at GUI.JanGerenciaContato.btnGeraEtiquetasActionPerformed(JanGerenciaContato.java:239)
    at GUI.JanGerenciaContato.access$300(JanGerenciaContato.java:21)
    at GUI.JanGerenciaContato$4.actionPerformed(JanGerenciaContato.java:104)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6288)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6053)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4651)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:616)
    at java.awt.EventQueue$2.run(EventQueue.java:614)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:613)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 47 more 
```

我以为我拥有 Jasper Reports 所需的所有库，但我缺少哪个库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:12:32.887

我的猜测是您的类路径中缺少[Jakarta Commons Logging Component（版本 1.0.4 或更高版本）](http://jakarta.apache.org/commons/logging/)库。您可能应该查看[JasperReports 要求](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/requirements.html)，以确保您拥有所需的所有其他必需库和适当的版本。

顺便说一句，您提到您的数据在 JTable 中，您可能想看看[JRTableModelDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRTableModelDataSource.html)它将让您使用 Jtable 的 TableModel 创建数据源。

# php - Wordpress Edit Post Hook 加载自定义数据

> ID：11566239
> 
> 赞同：0
> 
> 时间：2012-07-19T17:32:08.253
> 
> 标签：php, wordpress

我`meta_box`在帖子创建屏幕中有一个。一旦用户单击特定类别，它将被显示。为了将信息保存在`meta_box`帖子标题和帖子内容中，我使用了 hook `post_updated`。一切都将保存在数据库中——将 wp_posts 中的数据和 meta_box 中的数据发布到一个特殊的创建表中。

但有时用户想从这个“特殊”类别中编辑这篇文章。在这种情况下，`meta_box`应该加载带有插入信息的并且是可编辑的。我知道我需要手动填写字段，但我需要知道当用户按下编辑链接时调用了哪个钩子。一个想法是，检查 url，如果找到参数编辑，请调用我的编辑例程。但这对我来说似乎是一件肮脏的事情。

法典不是很有帮助。我尝试了以下钩子：

> 编辑帖子，发布帖子，保存帖子，wp插入帖子

但是在我按下实现按钮后会调用它们。

BR,

迈贝克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:44:51.763

您不必为此使用任何钩子，只需在生成 meta_box html 的地方使用以下行

```
global $post; 
```

现在您可以在编辑时访问 $post 对象

```
get_post_meta($post_id, $key, $single); 
```

使用上述函数获取特定元的值并根据需要将其设置为您的 html。要阅读有关 get_post_meta 的更多信息，请转到[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

# algorithm - 如果公钥存储在服务器上怎么办？

> ID：11566254
> 
> 赞同：0
> 
> 时间：2012-07-19T17:33:07.790
> 
> 标签：algorithm, private, public, public-key-encryption

公钥和私钥对通过 java 脚本算法在客户端创建，然后将公钥传输到服务器。

个人私钥的副本以 java 脚本变量的形式存储在用户计算机上。

当用户 A 向用户 B 发送消息时

服务器使用用户 B 的公钥加密消息。

用户 B 获取消息并使用用户 B 的私钥对其进行解密（用 java 脚本编写的算法），该私钥是私有的并保存在 java 脚本变量中。

用户 B 的私钥在任何时候都不会通过网络公开。

那会安全吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:38:13.183

'public' 和 'private' 只是两个键的名称。**两个密钥中哪个是公开的，哪个是私有**的并不重要，只要你永远不会混淆使用。一旦两个密钥同时可供某人使用，消息传递系统的安全性就会被彻底破坏。

从技术上讲，由于您说密钥存储在 javascript 变量中，因此您暗示这些变量是在嵌入在某些基于浏览器的 html/javascript 中的 CLEAR 中发送的。这进一步意味着没有安全性——因为两个密钥都暴露在网络中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:44:34.207

要确定某事是否“安全”，您必须知道安全要求是什么。您的案例满足了一些可能的要求，但也有一些可能的要求*不满足*。例如：

*   消息的明文副本显然是通过网络从用户 A 传输到服务器的，因此任何人都可以在那时窃听它。（这可能是一个严重的问题。）
*   您没有解释公钥是如何传输到服务器的*。*如果它没有以经过身份验证的方式传输，那么中间人可以生成他自己的公钥-私钥对，并将他的公钥提供给服务器。（这可能是一个严重的问题。）
*   用户 B 无法验证他收到的消息的真实性。该消息可能来自服务器（最终来自用户 A），也可能来自其他任何拥有公钥副本的人。（这可能是也可能不是一个严重的问题，具体取决于应用程序。）

所以总的来说，我*不会*认为这种设计是“安全的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:41:51.280

它不会太安全，因为：

*   任何用户（比如用户 B）的私钥都可以通过注入的 JS 代码或坏的浏览器插件从您的应用程序中泄露出来
*   完成此操作后，任何可以访问针对用户 B 的任何消息的人都将能够对其进行解密并理解它
*   当然，如果您是唯一使用该应用程序的人，则上述情况不会发生 - 因为您可能会有其他用户使用不同的浏览器设置/插件/浏览行为等，这是完全有可能的
*   当用户 A 尝试向用户 B 发送内容时，您说服务器将使用用户 B 的公钥加密消息 - 现在，通过 JS 发出的这个请求可以由中间人解释。完成后，该中间人可以通过操纵发件人、引荐人等向任何用户发起任何请求。这可能导致冒充等等。
*   您还提到在生成之后，您打算将公钥发送到服务器。从 JS 发出的这个调用很容易被解释，这意味着公钥可以被泄露。

# php - 用标签显示数组的内容

> ID：11566256
> 
> 赞同：0
> 
> 时间：2012-07-19T17:33:18.610
> 
> 标签：php

如何显示或回显此数组。我想要做的是`<br>`在一行上显示这个带有标签的数组。例如：

```
one/two:3
one/four/0:5
one/four/1:6
one/four/2:7
eight/nine/ten:11 
```

下面是我的代码

```
$array = array(
    "one/" => array( 
            'two/' => array(
                ':3',
            'four/' => array( 
                '0' => ':5',
                '1' => ':6',
                '2' => ':7'
            )
        )
    ),
    "eight" => array( 'nine', 'ten', ':11' )
);
foreach ( $array as $keys ) {
    echo $keys . '<br />'; 
} 
```

我的`foreach()`正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:35:22.980

不，如果您想要阵列中的密钥，您需要

```
foreach($array as $key => $val)
// or
foreach(array_keys($array) as $key) 
```

同样，foreach 不进行多维循环。- 您的循环只会带回“一个”和“八个”条目，而不是任何子条目。

# ios - 如何在 iOS 中测试空对象？

> ID：11566257
> 
> 赞同：1
> 
> 时间：2012-07-19T17:33:19.360
> 
> 标签：ios, cocoa-touch

我允许用户选择一个位置并希望在另一个屏幕中对其进行测试：

```
 if (myManager.centerOfMap == (id)[NSNull null]) {
        self.centerOfMap = myManager.centerOfMap;
    } 
```

但是我知道上面是不对的，因为它给了我一个指针转换警告。

然后我尝试这样做：

```
 if (CLLocationCoordinate2DIsValid(*(myManager.centerOfMap))) {
        self.centerOfMap = myManager.centerOfMap;
    } 
```

但是我的程序由于 EXC_BAD_ACCESS 而崩溃，因为 myManager.centerOfMap 没有第一次设置。如何制作它以便让我知道 CLLocationCoordinate2D 是否已被赋值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:38:15.530

你有没有尝试过：

```
if (CLLocationCoordinate2DIsValid(myManager.centerOfMap)) {
    self.centerOfMap = myManager.centerOfMap;
} 
```

此外，在您的`myManager`班级中，您可能希望确保在班级初始化时设置`centerOfMap`为无效值。`CLLocationCoordinate2D`这样您就可以确定它以无效值开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:45:40.327

请注意，这`NSNull`实际上是一个（单例）对象。这个想法是在你想要一个空值对象时使用它（即你不能只使用一个空值或指针）。例如，作为`NSDictionary`. 这不是您要在这里寻找的东西。

如果您`centerOfMap`创建为 a`CLLocationCoordinate2D`这只是一个简单的结构，而不是一个对象。请注意，您将像这样创建它：

```
CLLocationCoordinate2D centerOfMap; 
```

不像这样：

```
CLLocationCoordinate2D *centerOfMap; 
```

CLLocationCoordinate2D 结构定义如下：

```
typedef struct {
    CLLocationDegrees latitude;
    CLLocationDegrees longitude;
} CLLocationCoordinate2D; 
```

因此，如果您想知道其中的给定值是否合适，您需要执行以下操作之一：

1) 有一个单独的成员变量，说明是否添加了有效位置。例如，`BOOL retrievedCenterOfMap`。然后在配置 centerOfMap 时将其设置为 YES，那么您的测试变为：

```
if ([myManager retrievedCenterOfMap]) {
    self.centerOfMap = myManager.centerOfMap;
} 
```

`centerOfMap`2) 在变量 中设置已知的无效值。`CLLocationCoordinate2DIsValid()`将告诉您该`centerOfMap`值是否有效，它是否是有效坐标，但您应该将其与您是否实际设置它区分开来！然后问题就变成了您应该使用什么无效值，并且将来检查您的代码的任何人都会知道您在这里做了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:44:50.860

你没有说，但我认为因为你将它传递给`CLLocationCoordinate2DIsValid`that`myManager.centerOfMap`是 type `(CLLocationCoordinate2D *)`。`CLLocationCoordinate2D`是一个结构而不是一个 Objective-C 对象。如果`myManager.centerOfMap`真的是指向您的指针，`CLLocationCoordinate2D`您首先需要检查它是否为 NULL，然后检查它是否有效：

```
 if (myManager.centerOfMap && CLLocationCoordinate2DIsValid(*(myManager.centerOfMap))) {
    self.centerOfMap = myManager.centerOfMap;
 } 
```

但是，您可能会发现直接存储 CLLocationCoordinate2D 而不是将指向它们的指针存储在实例变量中更容易。

# javascript - 如何使用 JQuery Mobile 检测 BlackBerry 上的按键？

> ID：11566263
> 
> 赞同：0
> 
> 时间：2012-07-19T17:33:45.593
> 
> 标签：javascript, blackberry, jquery-mobile, keyevent

我正在使用 JQuery Mobile 为基于 WebWorks（HTML5、CSS3、JS）技术的 BlackBerry 开发自己的应用程序。

在我的布局 div 上，我有 3 个输入元素。我不会检测到在第一个输入中按下 BlackBerry 输入键以专注于下一个输入。

我如何检查是否使用 JQuery Mobile 按下了硬件输入键（以及“T”、“R”、“D”等其他键）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:41:10.720

jQuery Mobile 对此没有什么特别的。您只需要在输入上添加一个事件侦听器并侦听相应的按键事件。[你可以在这里](http://www.quirksmode.org/dom/events/keys.html)找到一个很好的解释。

这里有一些示例代码可以帮助您入门（未经测试，您可能需要调试）：

```
$('#firstInput').keypress(function(event) {
  if ( event.which === 13 ) {
     $('#secondInput').focus();
   }
); 
```

在 中`event.which`，键码被检查（13 用于回车）。其他键有不同的键码。小心，我记得黑莓上的一个错误，它不会触发退格键的按键事件。

如果您需要更多详细信息，请更具体地说明您的问题。

# casting - ICollection 上的 MinLength 约束失败，实体框架

> ID：11566265
> 
> 赞同：3
> 
> 时间：2012-07-19T17:33:53.137
> 
> 标签：casting, asp.net-mvc-4, entity-framework-4.3, icollection

这是我拥有的数据模型：

```
public class Team
{
    [Key]
    public int Id { get; set;} 
    [Required]
    public string Name { get; set; }

    [MinLength(1)]
    public virtual ICollection<User> Users { get; set; }
} 
```

我的问题是，当我稍后尝试创建一个新团队（有一个用户）时，在保存上下文时会遇到以下问题。

> 调用 System.ComponentModel.DataAnnotations.MinLengthAttribute.IsValid 时，在验证“用户”期间引发了意外异常。有关详细信息，请参阅内部异常。

内部异常如下：

> {“无法将“System.Collections.Generic.List`1[MyNameSpace.Model.User]”类型的对象转换为“System.Array”类型。”}

这是实际保存的代码（现在在控制器中）：

```
 if (ModelState.IsValid)
        {
            team.Users = new List<User>();
            team.Users.Add(CurrentUser);//CurrentUser is a property that gives me the currently active User (MyNamespace.Model.User).
            DB.Teams.Add(team);//DB is a DbContext object that holds DbSets of all my models
            DB.SaveChanges();
            return RedirectToAction("Index");
        } 
```

那么，这里发生了什么？我做错了什么，还是发生了其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T17:56:59.310

我不相信您将能够使用 MinLength 属性来实现您想要实现的目标。 [这](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.minlengthattribute%28v=vs.110%29.aspx)是 MinLength 属性的 msdn 页面。基于描述： “指定*属性中允许的****字符串****数据数组的最小长度。”* **如您所见，它只能用于字符串数据数组。您可能需要创建自己的自定义 ValidationAttribute 来处理您的场景。**

# android - 如何克隆 Android SMS 视图

> ID：11566267
> 
> 赞同：0
> 
> 时间：2012-07-19T17:33:53.610
> 
> 标签：android

我正在开发需要具有类似内置 Android SMS Messenger 功能的应用程序。

我尝试执行以下操作：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
                a:layout_width="fill_parent"
                a:layout_height="fill_parent">
    <LinearLayout
            a:orientation="vertical"
            a:layout_height="wrap_content"
            a:layout_width="fill_parent">
        <EditText
                a:id="@+id/smsRecipients"
                a:layout_height="wrap_content"
                a:layout_width="fill_parent"
                a:hint="@string/sms_to_whom"/>
        <Button
                a:layout_height="wrap_content"
                a:layout_width="fill_parent"
                a:text="@string/sms_contacts"
                />
    </LinearLayout>

    <LinearLayout a:layout_alignParentBottom="true"
                  a:orientation="horizontal"
                  a:layout_width="fill_parent"
                  a:layout_height="wrap_content"
                  a:paddingTop="5dip"
                  a:paddingBottom="5dip"
                  a:paddingLeft="5dip"
                  a:paddingRight="5dip"
                  a:background="#dcdcdc">
        <EditText
                a:id="@+id/smsBody"
                a:layout_width="0dip"
                a:layout_height="wrap_content"
                a:layout_weight="1.0"
                a:autoText="true"
                a:capitalize="sentences"
                a:nextFocusRight="@+id/send_button"
                a:hint="@string/sms_enter_message"
                a:maxLines="10"
                a:inputType="textShortMessage|textAutoCorrect|textCapSentences|textMultiLine"
                a:imeOptions="actionSend|flagNoEnterAction"/>
        <LinearLayout a:orientation="vertical" a:layout_width="wrap_content" a:layout_height="fill_parent">
            <Button
                    a:id="@+id/smsSendButton"
                    a:layout_marginLeft="5dip"
                    a:layout_width="wrap_content"
                    a:layout_height="0dip"
                    a:layout_weight="1.0"
                    a:nextFocusLeft="@+id/smsBody"
                    a:text="@string/sms_send_abbr"
                    a:enabled="false"/>
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

它工作正常，除了当 EditText 扩展超过 1 行时，按钮也得到扩展。那么如何让按钮的高度固定呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:36:51.833

```
 <Button
   a:layout_height="0dip" 
```

表示它会自动调整大小，尝试将其设置为 wrap_content

# asp.net - 发布到生产服务器名称时 ELMAH 字符串的转换不起作用

> ID：11566268
> 
> 赞同：1
> 
> 时间：2012-07-19T17:33:54.773
> 
> 标签：asp.net, visual-studio-2010, elmah

我正在使用 ASP.Net 表单应用程序运行 Visual Studio 2010。我正在尝试在构建时转换 XMl，但它不起作用。

在我的配置部分，我有以下内容：

```
 <elmah>
    <security allowRemoteAccess="yes" />
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionString="Data Source=TestServer;Initial Catalog=OnlineApplication;Trusted_Connection=True" />
    <errorMail from="emhelp@server.edu" to="person@test.com" subject=" Exception" async="true" smtpserver="smtpgate.server.edu" /> 
```

当我通过 web.config.production xml 转换发布到生产环境时，我试图将其转换为 ELMAH 服务器名称。我对应用程序设置和连接字符串的所有其他设置都可以正常工作。我的 web.production.config 中有以下内容：

```
 <add type="Elmah.SqlErrorLog, Elmah"
         connectionString="Server=ProductionServer;Initial Catalog=OnlineApplication;Integrated Security=True"
         xdt:Transform="SetAttributes" xdt:Locator="Match(type)"/>
</elmah> 
```

它不会抱怨，但也不会改变文本。我需要更改什么才能在构建/发布时进行文件转换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T17:58:49.860

由于只有一个`errorLog`标签，您可以使用`Replace`而不是`SetAttributes`使用定位器。另请注意，您必须使用实际的标签名称，而不是`<add>`.

```
<errorLog type="Elmah.SqlErrorLog, Elmah"
     connectionString="Server=ProductionServer;Initial Catalog=OnlineApplication;Integrated Security=True"
     xdt:Transform="Replace"/> 
```

# .net - 子视图模型属性的错误渲染名称

> ID：11566269
> 
> 赞同：1
> 
> 时间：2012-07-19T17:33:59.060
> 
> 标签：.net, asp.net-mvc, razor

我有以下视图模型：

```
public class ViewModel
{
   //...
   [UIHint("Children")
   public IList<ChildViewModdel> Children {get;set;}
} 
```

其中 ChildViewModel 类具有 Quantity 属性（long 类型）。

这是儿童编辑器模板：

```
@model  IList<ChildViewModel>
@for (var index = 0; index < Model.Count(); index++)
{
    @Html.EditorFor(x => x[index])
} 
```

现在我通过渲染模型，`@Html.EditorForModel()`结果第一个 ChildViewModel 的 Quantity 文本框名称是`Children.[0].Quantity`. 你在 [0] 之前看到这个额外的点了吗？结果模型绑定器无法识别这些值，并且在用户发布表单时无法正确处理它们。如何制作 ASP.NET MVC`Children[0].Quantity`名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:54:41.777

首先让我声明这是一种正确的行为（至少“按设计”）。当 MVC 深入到嵌套属性时，它会附加“PropertyName”。（提到最后的点）在该嵌套模型内的每个字段前面。所以你得到了“孩子”。从`ViewModel`, "[0]." 来自`IList<ChildViewModel>`和来自 的“数量” `ChildViewModel`。

这里的主要问题是为什么你需要一个特殊的模板`IList<ChildViewModel>`？MVC 有自己处理 IEnumerables 的特殊情况，所以通常你不应该干涉。

如果您确实需要一些特殊处理，您可以包装`IList<ChildViewModel>`到另一个类中并在该类的 EditorTemplate 中引入您的特殊逻辑。就像：

```
public class ViewModel
{
   public ChildViewModdels Children {get;set;}
}
public class ChildViewModdels 
{
   public IList<ChildViewModdel> Children {get;set;}
} 
```

这里是您在 ChildViewModdels EditorTemplate 中的特殊逻辑

```
@model  ChildViewModdels
@for (var index = 0; index < Model.Children.Count(); index++)
{
    @Html.EditorFor(x => x.Children[index])
} 
```

同样，如果您**确实需要**这种特殊逻辑（从问题中不确定） ，则适用于这种情况

# iphone - SQLite3 表更新未反映在模拟器/用户文件夹中

> ID：11566273
> 
> 赞同：0
> 
> 时间：2012-07-19T17:34:11.820
> 
> 标签：iphone, database, xcode, ios5, sqlite

我能够成功创建和访问我的数据库。但是，当我稍后需要更改属性的类型时，我修改了项目的文件夹数据库，然后将新数据库添加到 Xcode。当我现在运行我的应用程序时（尽管我已经从模拟器中删除了应用程序的目录），我仍然得到我的旧数据库！

我什至尝试以编程方式更改表，如下所示：

```
NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"TTSData.sql"];
success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
//
sqlite3_stmt *statement; 
if(sqlite3_open([defaultDBPath UTF8String], &database) == SQLITE_OK)
{
    NSString *updateSQL = [NSString stringWithFormat: @"ALTER TABLE Patient ALTER COLUMN Result DOUBLE"];
    const char *update_stmt = [updateSQL UTF8String];
    sqlite3_prepare_v2(database, update_stmt, -1, &statement, NULL);

    if(sqlite3_step(statement)==SQLITE_DONE) 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Success" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];    
        [alert show];
        alert=nil;
    }
    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Not Altered" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];   
        [alert show];
        alert=nil;
    }   
    sqlite3_finalize(statement);    
    sqlite3_close(database);
} 
```

但我仍然得到我的旧数据库。有谁知道我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:53:40.713

您不得更改资源中的数据库。:(

# objective-c - 加载 iPad Storyboard 时出现黑屏。

> ID：11566276
> 
> 赞同：0
> 
> 时间：2012-07-19T17:34:25.983
> 
> 标签：objective-c, xcode, ipad, ios-universal-app

所以我正在开发一个应用程序[https://github.com/Kronusdark/PerlinNoiseKit](https://github.com/Kronusdark/PerlinNoiseKit)并且我有一个（蹩脚的）iPhone UI，但我决定让它在我的 iPad 上运行。问题是当它加载 iPad 故事板时，我得到一个黑屏。我检查了我的项目摘要，它指向正确的故事板文件。插座似乎都设置正确，它实际上会在我的 iPad 上的 viewController 中运行代码。我只是没有用户界面。如果有人想尝试运行它，我已将我最近的更改推送到我的 repo，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:03:40.227

尤里卡！事实证明，我的一个子视图无法正常工作。删除有问题的视图后，我的故事板加载没有问题。我相信这是由于一个流氓drawRect：。

# wpf - DependencyProperty 不适用于自定义 UserControl

> ID：11566278
> 
> 赞同：1
> 
> 时间：2012-07-19T17:34:32.960
> 
> 标签：wpf, user-controls, wpf-controls, dependency-properties

我有一些简单的依赖属性不起作用。我查看了它们，查看了我过去使用过的代码，但我不确定它们为什么不起作用。

我有一个扩展 UserControl 的自定义基类 (MyBaseControl)，然后我的自定义 UI 控件在其上进行扩展。例如，MyCustomControl 扩展了 MyBaseControl。

MyCustomControl XAML 很简单：

```
<StackPanel>
    <Image Source="{Binding Icon}" />
    <TextBlock Text="{Binding Blurb}" />
</StackPanel> 
```

MyCustomControl 代码如下所示：

```
public partial class MyCustomControl: MyBaseControl
{
    //public static readonly DependencyProperty IconProperty = Image.SourceProperty.AddOwner(typeof(MyCustomControl));
    //public static readonly DependencyProperty BlurbProperty = TextBlock.TextProperty.AddOwner(typeof(MyCustomControl));

    public static readonly DependencyProperty IconProperty =
        DependencyProperty.Register(
        "Icon",
        typeof(ImageSource),
        typeof(MyCustomControl),
        new PropertyMetadata(null));

    public static readonly DependencyProperty BlurbProperty =
        DependencyProperty.Register(
        "Blurb",
        typeof(String),
        typeof(MyCustomControl),
        new PropertyMetadata(null));

    public MyCustomControl() : base()
    {
        InitializeComponent();
    }

    #region Properties

    public ImageSource Icon
    {
        get { return (ImageSource)GetValue(IconProperty); }
        set { SetValue(IconProperty, value); }
    }

    public String Blurb
    {
        get { return (String)GetValue(BlurbProperty); }
        set { SetValue(BlurbProperty, value); }
    }

    #endregion Properties
} 
```

请注意，我尝试了几种不同的方法来定义`DependencyProperty`. 两者都不起作用。

我通过以下方式调用我的控件：

```
<ctrl:MyCustomControl Height="240" VerticalAlignment="Center" HorizontalAlignment="Center" Width="320" Blurb="Slide Show" Icon="pack://application:,,,/Resources/photo_scenery.png" /> 
```

如果我直接在 XAML 中设置 Source 或 Text，它们会显示得很好。绑定只是不想正常工作。

我错过了什么不允许我的绑定通过？

感谢您的任何帮助！

**更新：**我已经根据我尝试过的评论和其他更改更新了代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:01:13.700

您正在错误地注册 Icon 属性。在其注册方法中，您需要指定 DP 名称，即代替“ `IconProperty`”应该是“ `Icon`”-

```
public static readonly DependencyProperty IconProperty =
        DependencyProperty.Register(
        "Icon",
        typeof(ImageSource),
        typeof(MyCustomControl),
        new PropertyMetadata(null)); 
```

另外，尝试像这样在绑定中设置 RelativeSource -

```
<StackPanel>
    <Image Source="{Binding Icon, RelativeSource={RelativeSource 
            Mode=FindAncestor, AncestorType={x:Type ctrl:MyCustomControl}}}" />
    <TextBlock Text="{Binding Blurb, RelativeSource={RelativeSource 
            Mode=FindAncestor, AncestorType={x:Type ctrl:MyCustomControl}}}" />
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-08T22:43:46.780

或者，您可以通过如下更新代码来解决问题，而不是按照 Rohit Vats 的建议设置 RelativeSource

```
<StackPanel>
    <Image Name="imgImage" Source="{Binding Icon}" />
    <TextBlock Name="txtTextBlock" Text="{Binding Blurb}" />
</StackPanel> 
```

和

```
public LabeledTextBox()
{
    InitializeComponent();
    imgImage.DataContext = this;
    txtTextBlock.DataContext = this;
} 
```

# c# - 装饰者和绘画

> ID：11566279
> 
> 赞同：0
> 
> 时间：2012-07-19T17:34:41.140
> 
> 标签：c#, wpf, xaml

[我正在实现一个 UI，使用网格来显示，使用adorner 类](http://msdn.microsoft.com/en-us/library/system.windows.documents.adorner.aspx)拖放对象。现在，是否可以使用鼠标绘制一些几何形状？例如从a点到b点画一条直线

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:58:30.627

你想要的是这样的：

```
/// <summary>
/// Creates a line at run-time
/// </summary>
public void CreateALine()
{
   // Create a Line
   Line redLine = new Line();
   redLine.X1 = 50;
   redLine.Y1 = 50;
   redLine.X2 = 200;
   redLine.Y2 = 200;

   // Create a red Brush
   SolidColorBrush redBrush = new SolidColorBrush();
   redBrush.Color = Colors.Red;

   // Set Line's width and color
   redLine.StrokeThickness = 4;
   redLine.Stroke = redBrush;

   // Add line to the Grid.
   LayoutRoot.Children.Add(redLine);
} 
```

取自[c-sharpcorner](http://www.c-sharpcorner.com/uploadfile/mahesh/line-in-wpf/)

# c# - 如何使它不会在 C# 中的十进制数中删除尾随零？

> ID：11566281
> 
> 赞同：2
> 
> 时间：2012-07-19T17:34:46.333
> 
> 标签：c#, zero, trailing

我正在创建一个`RandomDecimal`允许您指定最大值和小数精度的函数。但是，如果选择的最后一个随机数字恰好为零，则将其丢弃并且精度关闭。有没有可能不失去这个零？我尝试将其转换为字符串，然后再转换回小数，但它仍然被丢弃。

```
 public static decimal RandomDecimal(int maxValue, int precision)
    {
        decimal result = new Random().Next(maxValue);

        if (maxValue == 0)
        {
            return result;
        }

        int i = 1;

        decimal digit = 0;

        while (i <= precision)
        {
            digit = new Random().Next(10);
            digit = (digit / (Convert.ToDecimal(Math.Pow(10, i))));
            result = result + digit;
            i++;
        }

    //    if (digit == 0)
    //    {
    //     string resultstring = Convert.ToString(result) + '0';
   //      result = Convert.ToDecimal(resultstring);
   //       } This code doesn't do anything because the zero is still dropped.

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:40:01.007

如果你想要一个数字的表示，它不仅有一个值，而且知道它有多少个有效数字，你最好使用`double`/ `float`/以外的东西`decimal`。您需要创建自己的类型，该类型既具有值又具有`SignificantDigits`属性。

您只是希望信息`decimal`不是为了让用户使用而设计的。在某些情况下（您没有前导/尾随零），尽管 [ `decimal`] 不知道信息，但您巧合地最终得到相同的结果，但这与您解决问题无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:46:29.163

`string`你想要的只能通过返回 a而不是 a来完成（使用内置类型）`decimal`。您还应该声明一个`Random`对象一次，而不是在一个方法中多次创建新对象。

```
 static Random r = new Random();
    public static string RandomDecimal(int maxValue, int precision)
    {
        decimal result = r.Next(maxValue);

        if (maxValue != 0)
        {
            int i = 1;

            decimal digit = 0;

            while (i <= precision)
            {
                digit = r.Next(10);
                digit = (digit / (Convert.ToDecimal(Math.Pow(10, i))));
                result = result + digit;
                i++;
            }
        }
        var sb = new StringBuilder("0.");
        sb.Append('0', precision);
        return result.ToString(sb.ToString());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T17:47:09.400

Decimal 结构在内部将比例因子存储为 10 的幂。[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.decimal%28v=vs.80%29.aspx)，

> 缩放因子还保留 Decimal 数字中的任何尾随零。尾随零不会影响算术或比较运算中的 Decimal 数的值。但是，如果应用了适当的格式字符串，则 ToString 方法可以显示尾随零。

对我来说，没有任何方法可以直接设置比例因子，除非使用`Decimal (Int32, Int32, Int32, Boolean, Byte)`构造函数，它将比例因子作为最后一个参数。因此，理论上，您可以通过使用该构造函数创建 Decimals 来创建带有显着尾随 0 的小数。

# ruby-on-rails - capistrano - 没有匹配的服务器

> ID：11566287
> 
> 赞同：2
> 
> 时间：2012-07-19T17:35:19.290
> 
> 标签：ruby-on-rails, ruby, capistrano

我正在尝试通过 capistrano 将我的应用程序部署到 Web 服务器。当我跑

```
cap deploy:cold 
```

我明白了

```
executing "cd /home/toe/apps/gallery2/releases/20120719172307 && rake RAILS_ENV=production  db:migrate"
`deploy:migrate' is only run for servers matching {:roles=>:db, :only=>{:primary=>true}}, but no servers matched 
```

我用谷歌搜索但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T18:05:14.243

您需要在 config/deploy.rb 中为角色“db”定义一个服务器

```
set :domain, 'horse.mine'
# ...
role :app, domain
role :web, domain
role :db, domain, :primary => true 
```

其中 domain 只是一个别名。

# php - TCPDF Costum 标题图像错误

> ID：11566291
> 
> 赞同：0
> 
> 时间：2012-07-19T17:35:30.163
> 
> 标签：php, tcpdf

当我尝试使用 TCPDF 添加自定义标题图像时，我不断收到相同的错误

```
$pdf->SetHeaderData("logo.png", PDF_HEADER_LOGO_WIDTH, "Something", "Lorem Ipsum"); 
```

它告诉我：

```
TCPDF ERROR: Can't open image file: /var/www/tcpdf/cache/mska_93170920eb930db72b109d6a0f192715 
```

我在 Ubuntu 上，我该怎么办？

**更新**：好的，似乎 tcpdf 对 png 图像有一些问题，改用 jpg 并且它有效！

# mysql - 跨两个模型连接的范围在 Rails 3.1 中不起作用

> ID：11566294
> 
> 赞同：1
> 
> 时间：2012-07-19T17:35:47.630
> 
> 标签：mysql, ruby-on-rails, activerecord, ruby-on-rails-3.1

我有一个时间跟踪应用程序。

一个`Hour`属于一个`Project`。而 a`Project`属于 a `ProjectStatus`，因此有一个字段`project_status_id`。

现在我想限定我的 Hour 模型以过滤属于具有特定状态的项目的所有时间，例如 2。

在我的项目模型中，我有这个范围：

```
 #project.rb
  scope :continous, where(:project_status_id => '2') 
```

在我的 Hour 模型中，我尝试了以下范围，但它总是返回一个空数组，而且我知道有几个小时可以计算我的标准：

```
 #hour.rb
  scope :intern, joins(:project) & Project.continous 
```

我还认为控制台上生成的 SQL 输出看起来有点奇怪：

```
1.9.2-p180 :003 > Hour.intern
  Hour Load (104.5ms)  SELECT `hours`.* FROM `hours` INNER JOIN `projects` ON `projects`.`id` = `hours`.`project_id`
  Project Load (6.1ms)  SELECT `projects`.* FROM `projects` WHERE (project_status_id <> 2)
  Hour Load (95.9ms)  SELECT `hours`.* FROM `hours` INNER JOIN `projects` ON `projects`.`id` = `hours`.`project_id`
  Project Load (1.0ms)  SELECT `projects`.* FROM `projects` WHERE `projects`.`project_status_id` = 2
  Hour Load (92.6ms)  SELECT `hours`.* FROM `hours` 
 => [] 
```

为什么有一个查询`WHERE (project_status_id <> 2)`和一个`WHERE 'projects'.'project_status_id' = 2`？

他是想把两者相减吗？任何提示如何使这个范围工作..？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:53:01.510

不确定这是否是最优雅的方法，但您可以合并关系对象：

```
scope :intern, lambda { joins(:project).merge(Project.continous) } 
```

请注意，我将它包装在 lambda 中，因此在应用程序加载时不会执行 Project.continuous。此外，这是在未来版本的 Rails 中定义范围的首选方式。

# python - 将项目添加到 ttk.Treeview 时出现“不匹配的大括号”错误

> ID：11566299
> 
> 赞同：4
> 
> 时间：2012-07-19T17:36:02.757
> 
> 标签：python, treeview, tkinter

我正在尝试将一个项目添加到`ttk.Treeview`我的 Python 脚本中的一个实例，该脚本构建一个基本的 UI。插入代码如下所示：

```
tree.insert(my_id, 
            'end', 
            todo_id, 
            text="Line " + str(line_num), 
            values=(str(todo_text), owner), # I have 2 cols, 'text' and 'owner'
            tags=['#todo_entry']) 
```

我发现`todo_text`在名为“text”的列中设置字符串时，Tkinter 在遇到特定字符串时会引发错误：

**_tkinter.TclError：列表中不匹配的左大括号**

我能想到的唯一原因是，有问题的字符串包含一个花括号。这是它打破的字符串：

`'// static class Properties { // TODO, temp class'`

`todo_text`无论我是否使用或，这似乎都会发生`str(todo_text)`。

文本字符串是否以某种方式被*解析*？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:25:27.010

Tkinter 的核心是 Tcl 解释器的包装器。对于 Tcl，花括号是特殊的，除非它们被转义。花括号是创建 Tcl 列表的最常用方法。如果您看到`unmatched open brace in list`，那是与您的大括号不平衡有关的 Tcl 错误。

对我来说，这看起来像是一个 Tkinter 错误——tkinter 包装器在将数据传递给 Tcl 解释器之前错误地引用了数据。当您在花括号前面放置一个反斜杠时，它现在变成了一个有效的 Tcl 字符串，这就是您不再看到错误的原因。

这已在 python 错误跟踪器上报告为问题[#15861](http://bugs.python.org/issue15861)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T19:24:44.547

Tkinter 位于 Tcl 之上，它使用大括号作为一种引用。

看起来 Tkinter 用大括号为 Tcl 引用字符串，但没有转义字符串本身中的任何内容。

# java - 在查询中使用随机未指定的列名休眠

> ID：11566307
> 
> 赞同：0
> 
> 时间：2012-07-19T17:36:24.157
> 
> 标签：java, mysql, hibernate

我的数据库模式中两个表的休眠映射有问题。一个被称为`BINARY_DATA_CONTENTS`，另一个是`BINARY_DATA`。`BINARY_DATA`只有一个名称字段和一个指向`BINARY_DATA_CONTENTS`. 这是模式的样子：

BINARY_DATA_CONTENTS：

```
CREATE TABLE `BINARY_DATA_CONTENTS` (
  `BINARY_DATA_CONTENTS_ID` varchar(255) NOT NULL,
  `BINARY_DATA` longblob, -- stores the data
  PRIMARY KEY (`BINARY_DATA_CONTENTS_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

二进制数据：

```
CREATE TABLE `BINARY_DATA` (
  `BINARY_DATA_ID` varchar(255) NOT NULL DEFAULT '',
  `BINARY_DATA_NAME` varchar(255) DEFAULT NULL, -- just a filename
  `BINARY_DATA_CONTENTS_ID` varchar(255) DEFAULT NULL, -- points to BINARY_DATA_CONTENTS
  PRIMARY KEY (`BINARY_DATA_ID`),
  KEY `BINARY_DATA_CONTENTS_FK` (`BINARY_DATA_CONTENTS_ID`),
  CONSTRAINT `BINARY_DATA_CONTENTS_FK` FOREIGN KEY (`BINARY_DATA_CONTENTS_ID`) REFERENCES `BINARY_DATA_CONTENTS` (`BINARY_DATA_CONTENTS_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

我为这些表中的每一个都有 Java 类。

二进制数据内容：

```
@Entity
@Table(name="BINARY_DATA_CONTENTS")
@Proxy(lazy=true)
@Inheritance(strategy= InheritanceType.JOINED)
public class BinaryDataContents implements Serializable, Persistable<BinaryDataContents>, Cloneable {
    private static final long serialVersionUID = /** blah */;

    @Id
    @GeneratedValue(generator="uuid") @GenericGenerator(name="uuid", strategy="uuid")
    @Column(name="BINARY_DATA_CONTENTS_ID")
    private String id;

    @Column(name="BINARY_DATA", length=32*1024*1024, columnDefinition="longblob") @Lob
    private byte[] contents;

    /**
     * Hibernate constructor
     */
    public BinaryDataContents() { }

    public BinaryDataContents(byte[] contents) {
        this.contents = ArrayUtils.clone(contents);
    }

    public byte[] getContents() {
        return contents;
    }
    // etc... 
```

二进制数据：

```
@Entity
@Table(name="BINARY_DATA")
@Inheritance(strategy=InheritanceType.JOINED)
public class BinaryData implements Serializable, Persistable<BinaryData>, Cloneable {

    private static final long serialVersionUID = 2154854247822039938L;

    @Id @Column @GeneratedValue(generator="uuid") @GenericGenerator(name="uuid", strategy="uuid")
    private String id;

    @Column
    private String binaryDataName;

    @OneToMany(cascade = CascadeType.ALL)
    @JoinColumn(name="BINARY_DATA_CONTENTS_ID", nullable=true) @ForeignKey(name="BINARY_DATA_CONTENTS_FK")
    private Collection<BinaryDataContents> binaryDataContents;

    @Transient
    private String cacheId;

    /**
     * Hibernate constructor
     */
    public BinaryData() { this.binaryDataContents = Sets.newHashSet(new BinaryDataContents()); }

    /**
     * Create a new instance of BinaryData.
     *
     * @param binaryDataData <code>byte []</code> of the file to store.
     * @param binaryDataName Name of attachment
     */
    public BinaryData(byte[] binaryDataData, String binaryDataName) {
        this.binaryDataContents = Sets.newHashSet(new BinaryDataContents(ArrayUtils.clone(binaryDataData)));
        this.binaryDataName = binaryDataName;
    }

    /**
     * Returns the BinaryData byte stream.
     *
     * @return binaryDataContents byte stream
     */
    public byte[] getData() {
        return binaryDataContents.iterator().next().getContents();
    }

    /**
     * Returns the BinaryData name.
     *
     * @return BinaryData name
     */
    public String getBinaryDataName() {
        return binaryDataName;
    }
    // etc... 
```

我希望`BinaryDataContents`延迟加载，仅在需要时（通过`getData`in `BinaryData`）。我不确定我是否正确设置了所有注释，因为在尝试保存新`BinaryData`对象时出现错误：

`PersistenceException: Failed to commit` `Caused by: org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update` `Caused by: java.sql.BatchUpdateException: Unknown column 'AUTHORISATION_REQUEST_ID' in 'field list'`

`AUTHORISATION_REQUEST_ID`这很奇怪，因为在这些表或类中没有任何列或字段被调用。看来休眠已经出问题了，并且正在将奇怪的列名放入 SQL 中：

`insert into BINARY_DATA (BINARY_DATA_NAME, AUTHORISATION_REQUEST_ID) values (?, ?)`

关于可能导致这种情况的任何想法？谢谢你。

**更新 1**

如果我使用`@OneToOne`注释，错误会略有变化。`BINARY_DATA_CONTENTS`插入似乎生成了正确的 SQL ：

`insert into BINARY_DATA_CONTENTS (BINARY_DATA, BINARY_DATA_CONTENTS_ID) values (?, ?)`

但是，`BINARY_DATA`插入仍然有一个随机的列名：

`insert into BINARY_DATA (BINARY_DATA_CONTENTS_ID, BINARY_DATA_NAME, AUTHORISATION_REQUEST_ID) values (?, ?, ?)`

**更新 2**

根据`AUTHORISATION_REQUEST_ID`我在应用程序中注册所有休眠注释类的顺序（有时`DATABASE_UPGRADE_ID`是 应用程序保留了这些类的列表并将它们传递给某种疯狂的 PersistenceConfiguration，它会用它做各种奇怪的事情。大概就是这个原因吧……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:47:36.423

不知道这个 AUTHORIZATION_REQUEST_ID 来自哪里。可能是因为你没有向我们展示。但是您的映射显然是错误的。二进制数据具有二进制数据内容的外键。

所以这意味着一个二进制数据可能只有一个二进制数据内容。所以，如果几个二进制数据可能共享相同的内容，你应该有一个 ManyToOne。否则，您应该有一个 OneToOne。OneToMany 当然不是你想要的，你使用 Set 并且只对它的第一个元素感兴趣这一事实强烈表明它是错误的。应该是这样的：

```
@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@JoinColumn(name = "BINARY_DATA_CONTENTS_ID", nullable=true) 
@ForeignKey(name = "BINARY_DATA_CONTENTS_FK")
private BinaryDataContents binaryDataContents; 
```

# django - 出错时返回（重定向）到表单

> ID：11566308
> 
> 赞同：2
> 
> 时间：2012-07-19T17:36:30.400
> 
> 标签：django, forms, redirect

我有两个视图 /home 和 /home/addItem

/home 包含一个用于创建新项目的表单，并将数据 POST 到 /home/addItem，如果数据验证 addItem 将用户重定向回 /home，如果数据不验证会出现问题：

我仍然希望用户返回 /home 上的表单，但我希望表单包含输入的表单数据以及通知用户要修复的表单错误。

我能找到的大多数地方都建议：

```
def addItem(request):
    form = NewItemForm(request.POST)
    if(form.is_valid()):
         #do stuff
         return HttpResponseRedirect("/home")
    return render_to_response("home-template.htm", {'form':form}) 
```

但是，此解决方案将在显示 /home 内容时将用户留在 /home/addItem 上，这在我的情况下效果不佳。

那么如何将用户连同表单内容和错误一起发送到 /home？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:48:31.830

如果您的表单数据不大，可能您可以将提交的数据存储在 session/cookie 中并将用户重定向到`/home`. View for`/home`可以检查会话/cookie 中是否存在任何表单数据，并向用户显示包含先前提交的数据和任何错误的表单。

示例代码（检查错误，存储/删除 cookie 的最佳方法）：

```
def addItem(request):
    form = NewItemForm(request.POST)
    if form.is_valid():
       #OK
       return HttpResponseRedirect("/home")
    else:
       request.session['form_data'] = request.POST #this may not be exact way, please verify.
       return HttpResponseRedirect("/home")

 def home(request):
    form_data = request.session.get('form_data', None)
    form = NewItemForm(initial=form_data)
    form.is_valid() # to get errors in form
    #render form using template. 
```

# objective-c - 来自多个实体的依赖属性

> ID：11566311
> 
> 赞同：1
> 
> 时间：2012-07-19T17:36:46.490
> 
> 标签：objective-c, core-data

我的 NSManagedObject 的属性之一取决于各种属性，其中一些在相关的 NSManagedObject 中。

在第一次运行中，我为此类属性实现了一个简单的瞬态属性，但我只是发现无法将 fetch 谓词与瞬态属性一起使用。

我需要创建一个属性，以便：

1.  它的值是使用不同的属性计算的
2.  依赖属性的 1 个存在于相关的 NSManagedObject 中
3.  我可以使用这个属性作为谓词来获取。
4.  如果我更新依赖属性之一，则必须更新计算值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:57:45.250

您可以使用键值观察来监视正在更改的属性，以使某些计算的属性保持最新。您可以将观察者添加到要监视的属性。

[KVO 编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA)。

* * *

**编辑：**参考[这里](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVODependentKeys.html)

要正确执行此操作，您需要覆盖计算属性的属性 getter，并创建一个`keyPathsFOrValuesAffecting<Key>`函数。

Apple 的示例非常好，它给出了一个`fullName`应该从`firstName`and收集属性的情况`lastName`。

所以你需要用这个函数来实现 KVO：

```
+ (NSSet *)keyPathsForValuesAffectingFullName
{
    return [NSSet setWithObjects:@"lastName", @"firstName", nil];
} 
```

这将允许您的应用在这些值被修改时收到通知。然后，您只需覆盖将在此通知上调用的 getter

```
- (NSString *)fullName 
{
    return [NSString stringWithFormat:@"%@ %@",firstName, lastName];
} 
```

# ruby-on-rails-3 - 在 Heroku 日志中查找特定字符串

> ID：11566312
> 
> 赞同：7
> 
> 时间：2012-07-19T17:36:48.757
> 
> 标签：ruby-on-rails-3, logging, heroku

我通过在我的 Rails 应用程序中执行此操作记录了一些错误：

```
logger.error "MY ERROR STRING" 
```

我如何查看heroku日志以找到该行？

我知道该怎么做`heroku logs --tail`，`heroku logs -n 500`但是如何在日志中找到特定的字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T18:16:35.613

使用`heroku logs -t | grep "term"`非常适合过滤当前日志事件。但是，Heroku[最多保留 1500 行](https://devcenter.heroku.com/articles/logging#log_retrieval)日志输出，因此即使您这样做了，`heroku logs -n 1500 -t`您也不会看到在该日志窗口之前发生的日志事件。

更好的方法是使用像[Papertrail](https://devcenter.heroku.com/articles/papertrail)这样的日志插件，它可以将您的日志保留更长时间，并使您的完整日志历史可搜索。

当然，您认为在您的代码中触发的日志事件也可能不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:43:56.690

试着把你的陈述放在`| grep "search term"`后面`heroku logs -n 500`

所以像：`heroku logs -n 500 | grep "MY ERROR STRING"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T18:06:49.410

对于 Windows 用户，

`heroku logs -n 100 -a appname | find "wordToFind"`

您可以将 100 更改为从 0 到 1500 的其他数字，即来自您的 heroku 应用程序的最后 1500 条日志

# javascript - jQuery Dialog，关闭时隐藏对话框中的元素

> ID：11566316
> 
> 赞同：0
> 
> 时间：2012-07-19T17:36:59.280
> 
> 标签：javascript, jquery, dialog

我正在使用 jQuery UI 对话框功能，关闭后，我想隐藏对话框中的元素之一。

我试图在 Dialog 函数的关闭事件中执行此操作，但它不起作用。我猜是因为该元素在关闭时不再存在。

这是代码。

```
// Dialog settings for our edit dialog's
$("#myDialog").dialog({
    autoOpen: false,
    close: function(event, ui){
         $("#myDiv").hide();
    }   
});

<div id="myDialog">
   <div id="myDiv">This div should hide when the user closes the dialog, but it stays open when I re-open the dialog.</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:48:29.843

您可能只需要参考与对话框相关的那些元素。

```
 $("#myDialog").dialog().find('#myDiv').hide() 
```

-编辑-

```
 close: function(event, ui){
     $(this).find('#myDiv').hide()
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:46:10.587

myDialog 和其中的所有内容，包括 myDiv，都应该在对话框关闭时自动隐藏。您不需要编写任何额外的代码来实现这一点。如果不起作用，则说明其他问题。我的猜测基于您问题中的代码示例：

1.  默认隐藏 myDialog，例如，`<div id="MyDialog" style="display:none;">...`
2.  在适当的时候显式打开对话框，例如，`$("#myDialog").dialog("open");`

# objective-c - Objective-C：从 alloc/init 和类方法调用创建对象有什么区别？

> ID：11566318
> 
> 赞同：3
> 
> 时间：2012-07-19T17:37:16.717
> 
> 标签：objective-c

例如，

1.  ```
    NSString *string = [NSString stringWithString:@"a string"]; 
    ```

2.  ```
    NSString *string = [[NSString alloc] initWithString:@"a string"]; 
    ```

当我们谈论字符串时，通过以下方式设置字符串有什么区别：

```
 NSString *string = @"a string"; 
```

?

最后一点，这不是关于 NSString 的具体问题。我问的是所有 NSObjects 的更广泛范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:40:55.560

ARC 没有区别，但在此之前有区别：`alloc/init`返回一个引用计数至少为一个的项目，`release`当你不需要它时，你需要它，而 class 方法返回一个自动释放的项目，你`retain`如果您想保留它，则需要。ARC 编译器知道这一切，并根据您的所有权规范为您保留/释放。

# opencv - 带有opencv的LshMatcher？

> ID：11566322
> 
> 赞同：2
> 
> 时间：2012-07-19T17:37:25.387
> 
> 标签：opencv, sift, matcher, orb

我正在尝试将 ORB 描述符与 LshMatcher 一起使用以实现更快的匹配。

我在某个地方找到了 LSH 实现（例如：[https](https://code.ros.org/trac/wg-ros-pkg/browser/branches/trunk_diamondback/stacks/object_recognition_experimental/rbrief/src/lsh.cpp) ://code.ros.org/trac/wg-ros-pkg/browser/branches/trunk_diamondback/stacks/object_recognition_experimental/rbrief/src/lsh.cpp ）

但它似乎还没有在 opencv 2.4.2 中实现。

您对如何在 opencv 中包含 LshMatcher 有任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:17:43.593

我在 OpenCV 开发论坛上问过同样的问题，但没有一个好的答案。

[http://answers.opencv.org/question/503/how-to-use-the-lshindexparams/](http://answers.opencv.org/question/503/how-to-use-the-lshindexparams/)

然而，我希望有更多的文档。你可以过几天再去查一下，看看有没有新的答案。

顺便说一句，如果您尝试将它与 SIFT/SURF/ORB 一起使用，它们是浮点描述符，据我所知，它将不起作用 LSH 仅适用于二进制描述符。

**编辑**

这似乎是 OpenCV (2.4.2) 中的一个错误，如此处接受的答案中所述 [http://answers.opencv.org/question/503/how-to-use-the-lshindexparams/](http://answers.opencv.org/question/503/how-to-use-the-lshindexparams/)

# playframework - Play 框架、Ebean 和 Akka Promises

> ID：11566327
> 
> 赞同：3
> 
> 时间：2012-07-19T17:37:43.583
> 
> 标签：playframework, playframework-2.0, akka, ebean

我们正在学习使用 Play！新项目中的框架。我们选择了玩！因为它的生产力、Scala 支持和非阻塞架构。

在对（Java）计算机数据库示例应用程序进行压力测试后，我看到了很多调度程序和 Ebean 线程，但我无法了解 Play 如何与 Ebean ORM 集成。每个调用都被分派给 Akka 并在另一个线程中执行。

我读了所有玩！框架文档（特别是这部分[http://www.playframework.org/documentation/2.0/JavaAsync](http://www.playframework.org/documentation/2.0/JavaAsync)）并且找不到有关此集成如何工作的任何信息。

如果有人能为我们照亮这条道路，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:28:37.217

首先，关于基准测试：

请阅读有关生产设置的页面：[https](https://github.com/playframework/Play20/wiki/Production) : //github.com/playframework/Play20/wiki/Production 在运行任何基准测试之前拥有正确的 akka 设置至关重要（取决于您的应用程序主要是阻塞应用程序还是非阻塞应用程序您可能需要使用不同的线程设置）。另外，请确保您只在 prod 模式下进行基准测试。

至于 ebean：play 是按原样使用 ebean 库（包括运行 ebean 的字节码增强器），所以没有什么特别之处。一般来说，每个请求都有一个单独的线程，我们通过 akka 将响应异步发送到 netty。

希望这可以帮助。

# php - 在新窗口中打开搜索结果，然后将结果链接到父级

> ID：11566331
> 
> 赞同：0
> 
> 时间：2012-07-19T17:38:05.880
> 
> 标签：php, javascript, window.open, window.opener

我不是最好的 javascript 程序员，所以请耐心等待。:)

我的一位同事为我们的 wiki 创建了自己的搜索引擎，因此我们将其添加到常规 wiki 搜索框下方的侧边栏中。因为搜索引擎托管在具有不同背景/格式的另一个域上，所以我将其设置为在较小的弹出窗口中显示搜索结果。

我遇到的一个问题是让结果链接重新加载到父窗口（wiki）中。我之前唯一一次编写过这样的代码，它有帧，所以这很容易......这有点困难。

这是表单的代码，如果有帮助的话：

```
<form action="http://othersite.com/metabase/search.php" method="request"
target="tcsearchresults" onSubmit="window.open('', 'tcsearchresults',
'width=700,height=500,status=yes,resizable=yes,scrollbars=yes')"> 
```

我尝试将 self.name 用于 wiki，然后将结果链接目标指向该位置，但无济于事。

有任何想法吗？提前致谢！！

# java - @NonNullByDefault 项目范围的设置

> ID：11566341
> 
> 赞同：1
> 
> 时间：2012-07-19T17:38:33.883
> 
> 标签：java, eclipse, eclipse-jdt

[@NonNullByDefault 属性](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/annotation/NonNullByDefault.html)的文档说明如下：

“如果在另一个 @NonNullByDefault 注释或项目范围的默认设置范围内使用 @NonNullByDefault 注释，则最里面的注释定义适用于任何给定位置的默认值”

如何设置项目范围的默认设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:14:33.880

您不能设置项目范围的默认值，javadoc 不正确，我为它打开了一个错误 - [https://bugs.eclipse.org/bugs/show_bug.cgi?id=385540](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385540)

您可以通过 package-info.java 文件将默认值应用于包

# string - 如何在 MS Access 中使 InStr 区分大小写

> ID：11566342
> 
> 赞同：6
> 
> 时间：2012-07-19T17:38:34.517
> 
> 标签：string, ms-access, vba, string-comparison

如何在 MS Access 中使 InStr 区分大小写？

我想显示以下内容`0`

```
 msgbox InStr("In Here", "here") 
```

相反，我得到`4`.

我试过添加 vbBinaryCompare

```
 msgbox InStr("In Here", "here", vbBinaryCompare) 
```

但它抱怨类型不匹配。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T17:38:34.517

使用`InStrB`而不是`InStr`. 然后它将进行逐字节比较而不是不区分大小写。

```
 msgbox InStrB("In Here", "here") 
```

显示`0`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T17:56:24.880

帮助主题并没有说明这一点，但是当您使用可选的*compare*参数时，您还需要提供可选的*start*参数以避免类型不匹配的投诉。

所以这在 0 中显示`MsgBox`：

```
MsgBox InStr(1,"In Here", "here", vbBinaryCompare) 
```

# c# - 使用 jQuery 定位元素时，SeleniumWebdrive 是否会更改对元素的关注？

> ID：11566346
> 
> 赞同：0
> 
> 时间：2012-07-19T17:38:42.863
> 
> 标签：c#, jquery, webdriver, selenium-webdriver

**背景：**

一直在使用 Selenium 2.0 (WebDriver)，并了解在定位元素时焦点会移动到元素上，如下所示：

```
var element = driver.FindElement(By.CssSelector("#foo"));
element.Click(); 
```

我也知道如果 jQuery 在被测页面上，我们可以做一些强大的事情（太酷了）：

```
IJavaScriptExecutor scriptExecutor = ((IJavascriptExecutor)driver);
scriptExecutor.ExecuteScript("$('#foo')[0].click();";
IWebElement hiddenElement = scriptExecutor.ExecuteScript("return $('#my_dynamic_element')[0]");
hiddenElement.Click;   // found ya! 
```

**问题：**

Selenium 的 WebDriver（特别是 .NET 风格）在将`.ExecuteScript()`结果转换为`IWebElement`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:12:22.210

我不这么认为，这是我设置的一个测试：

我创建了以下 html 页面，其中包含一个脚本，该脚本将在元素获得焦点时更改类名：

```
<script>
  function ChangeClass(theName, theClass)
  {
      document.getElementById(theName).className=theClass;
  }
</script>
<input type="text" class="notFocused" onfocus="ChangeClass('textfieldOne', 'focused');"    id="textfieldOne" /> 
```

当该字段获得焦点时，它将更改类名。

然后，我可以运行以下 WebDriver 测试，该测试使用 IJavaScriptExecutor 检索元素，然后检查类名是否已更改以指示该元素已获得焦点：

```
IWebDriver webDriver = new ChromeDriver();
webDriver.Navigate().GoToUrl("test.html");

IJavaScriptExecutor scriptExecutor = (IJavaScriptExecutor)webDriver;
IWebElement element = (IWebElement)scriptExecutor.ExecuteScript("return document.getElementById('textfieldOne');");

Assert.AreEqual("focused", element.GetAttribute("class")); 
```

断言失败，这告诉我没有设置焦点。

# javascript - Jquery Slider - 获取滑块的每个数值？不仅在mouseout？

> ID：11566347
> 
> 赞同：1
> 
> 时间：2012-07-19T17:38:45.940
> 
> 标签：javascript, jquery, uislider

我正在尝试创建一个 jquery 滑块，它基本上使用 jquery 滑块和 switch 语句使文本淡入和淡出（和图片）。这是代码：

```
$(function(){
            $sliderValue="";
            // Slider
            $('#slider').slider({
                orientation: "vertical",
                value : 100,
                min: 0,
                max: 100,
                slide: function(event, ui) {
                            $("#slider_value").val(ui.value);
                            //$("p#time1").fadeTo("slow", 0.90);

                      },
                stop: function(event, ui) {
                    $sliderValue=ui.value;
                      }
            });
            $('#slider').bind('slide', function() {
                var sV = $sliderValue;
                switch (sV) { 
                     case 100: 
                     $("p#time1").fadeTo("fast", 1);
                     break; 
                     case 90: 
                     $("p#time1").fadeTo("fast", 0.60);
                     break; 
                     case 80: 
                     $("p#time1").fadeTo("fast", 0.30);
                     break; 
                     case 75: 
                     $("p#time1").fadeTo("fast", 0.00);
                     break; 
                 }
            });

        }); 
```

所以基本上这个 switch 语句只在鼠标退出时触发（la脚！）我不知道为什么！任何提示将非常感谢。

我需要在滚动滑块时更新它（无需停止点击）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:16:02.930

并不是 switch 语句没有运行，它只是使用旧数据运行。

看起来您只是在停止事件中设置 $sliderValue 的值。但是，您随后在 switch 语句中使用 $sliderValue。

我也不确定是否有必要滑动事件（一个由绑定设置，一个在初始化中设置。我会将其更改为如下所示。

```
$(function(){  
        $sliderValue="";  
        // Slider  
        $('#slider').slider({  
            orientation: "vertical",  
            value : 100,  
            min: 0,  
            max: 100,  
            slide: function(event, ui) {  
                        $("#slider_value").val(ui.value);  
                        switch (ui.value) {   
                             case 100:   
                             $("p#time1").fadeTo("fast", 1);  
                             break;   
                             case 90:   
                             $("p#time1").fadeTo("fast", 0.60);  
                             break;   
                             case 80:   
                             $("p#time1").fadeTo("fast", 0.30);  
                             break;   
                             case 75:   
                             $("p#time1").fadeTo("fast", 0.00);  
                              break;
                         }  

                  },  
            stop: function(event, ui) {  
                $sliderValue=ui.value;  
                  }  
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:47:55.660

以下是我的评论：

1.  我认为您不必同时做这两个：设置“幻灯片”选项并绑定幻灯片事件处理程序。我相信这会将两个事件处理程序注册到同一个幻灯片事件（您可以尝试 console.log 在两个函数中查看行为）。所以你只需要选择一个。
2.  如果你想在滑动时改变不透明度，fadeTo() 效果可能是不必要的（因为延迟）。你可以改变css不透明度。
3.  因为不透明度值介于 0 和 1 之间，所以您还可以将 min/max/step 选项设置为相同的范围并摆脱一些计算。

这是代码和示例：http: [//jsfiddle.net/fLmKC/](http://jsfiddle.net/fLmKC/)

```
$(document).ready(function () {
   // Slider
   $('#slider').slider({
      orientation: "vertical",
      value : 1,
      min: 0,   
      max: 1,   
      step: 0.01,
      slide: function(event, ui) {
         $("p#time1").css("opacity", ui.value); 
      },              
   });      
});​ 
```

# tomcat - 彗星和超时

> ID：11566348
> 
> 赞同：0
> 
> 时间：2012-07-19T17:38:53.810
> 
> 标签：tomcat, comet, cloud-foundry

嗨，很长一段时间以来我一直在尝试在 tomcat 中使用彗星制作聊天应用程序。问题是我已经在云中部署了应用程序，其中有 30 秒的开放连接上限。因此，每次服务器响应时间超过 30 秒时（例如当没有聊天消息要推送时），客户端都会收到 504 异常。

那么这是否意味着彗星技术在我们有时间上限的情况下不起作用？

附上代码片段

```
package com.cumulations.clique.ChatHandler;
public class AsynchronousGetChatHandler extends HttpServlet implements
    CometProcessor {

public static HashMap consumerConnectionQueue = new HashMap();
public static HashMap consumerPoolingQueue = new HashMap<String, String>();
public static HashMap consumerSessionQueue = new HashMap<String, Date>();

public static ConnectionFactory factory;
public static Connection connection;

public void event(CometEvent event) throws IOException, ServletException {

    HttpServletRequest request = event.getHttpServletRequest();
    HttpServletResponse response = event.getHttpServletResponse();

    String userName = request.getParameter("userName");
    String sessionId = request.getParameter("accesskey");

    AsynchronousGetChatHandler.consumerPoolingQueue.put(userName, "ON");

    try {

        if (event.getEventType() == CometEvent.EventType.BEGIN) {

            String str = fromRabitQ(userName);

            if (str != null) {

                    System.out.println("delivering a message: " + str);

                    PrintWriter writer = response.getWriter();
                    writer.println(str);
                    writer.flush();
                    writer.close();
                }

             else {
                PrintWriter writer = response.getWriter();
                writer.println("");
                writer.flush();
                writer.close();
            }
        }
    }

    catch (Exception e) {
        throw new ServletException("Recieving exception");

        // TODO: handle exception
    }

}

public static String fromRabitQ(String userName) throws Exception {
    try {

        Channel channel;
        QueueingConsumer consumer;

        String QUEUE_NAME = userName;
        String message = "";

        connection = RabbitMqConnection.getConnection();

        channel = connection.createChannel();

        channel.queueDeclare(QUEUE_NAME, true, false, false, null);
        consumer = new QueueingConsumer(channel);
        channel.basicConsume(QUEUE_NAME, true, consumer);

        QueueingConsumer.Delivery delivery;

        delivery = consumer.nextDelivery(27000);

        if (delivery != null) {
            message = new String(delivery.getBody());

        } else {
            message = null;
        }

        channel.basicCancel(consumer.getConsumerTag());
        channel.close();

        return message;
    }

    catch (Exception e) {
        System.out.println("Exception occured while receiveing " + e);
        throw e;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:05:41.163

我会说继续修改

```
delivery = consumer.nextDelivery(27000); 
```

至：

```
 delivery = consumer.nextDelivery(20000); 
```

此外，如果您还可以提供 RabbitMqConnection 的实现，那就太好了。

# linux - crontab 为什么每 2 分钟执行一次脚本？

> ID：11566355
> 
> 赞同：0
> 
> 时间：2012-07-19T17:39:18.230
> 
> 标签：linux, crontab

为什么它每 2 分钟执行一次脚本？它不应该每 10 分钟执行一次吗？

```
*\10 * * * * /usr/bin/python /var/www/py/LSFchecker.py 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T17:42:15.320

```
*\10 * * * * 
```

应该是

```
*/10 * * * * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:30:28.867

你可以试试：

00,10,20,30,40,50 * * * * /usr/bin/python /var/www/py/LSFchecker.py

# php - 如果上传的文件已存在于目标文件夹中，则将上传文件的文件名从 'filename' 更改为 'filename(2)'

> ID：11566359
> 
> 赞同：1
> 
> 时间：2012-07-19T17:39:27.303
> 
> 标签：php, uploadify

我目前正在通过 uploadify 了解更多信息，顺便说一句，这就是我在 Wordpress 插件上使用的。我正确上传了文件；它的工作是仅上传单个 .pdf 文件。当我尝试两次上传相同的文件并检查将存储上传文件的文件夹时，我只有一个文件。我猜它被覆盖知道该文件已经存在于文件夹中。让我烦恼的是，我将如何更改第二个上传文件（同一个文件）的文件名，使其变为“文件名（2）”、“文件名（3）”等等。

这是我的代码，请告诉我应该从哪里开始配置uploadify.php：

```
 if (!empty($_FILES)) {
        $name = $_FILES['Filedata']['name'];

        $tempFile = $_FILES['Filedata']['tmp_name'];
        $targetPath = $targetFolder;
        $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

        $path = pathinfo($targetFile);

        $newTargetFile = $targetFolder.$name;

        // Validate the file type
        $fileTypes = array('pdf'); // File extensions
        $fileParts = pathinfo($_FILES['Filedata']['name']);

        if (in_array($fileParts['extension'],$fileTypes)) {
            // i think somewhere here , will i put something, but what's that something?
            move_uploaded_file($tempFile,$newTargetFile);
            echo $newTargetFile;
        } else {
            echo 'Invalid file type.';
        }
        return $newTargetFile;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:50:00.690

改变这个：

```
$newTargetFile = $targetFolder.$name; 
```

对此：

```
$i = 2;
list( $filename, $ext) = explode( '.', $name);
$newTargetFile = $targetFolder . $filename . '.' . $ext;
while( file_exists( $newTargetFile)) {
    $newTargetFile = $targetFolder . $filename . '(' . ++$i . ')' . '.' . $ext;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:44:30.660

试试这个：

```
<?php

function get_dup_file_name($file_name) {
    $suffix = 0;

    while (file_exists($file_name . ($suffix == 0 ? "" : "(" . $suffix . ")"))) {
        $suffix++;
    }

    return $file_name . ($suffix == 0 ? "" : "(" . $suffix . ")");
}

?> 
```

# eclipse - 在 Eclipse Indigo 上配置 Mojarra 2.1.X

> ID：11566360
> 
> 赞同：0
> 
> 时间：2012-07-19T17:39:41.387
> 
> 标签：eclipse, jsf, eclipse-indigo, mojarra

从 Properties/Project Facets/Java Server Faces 下载的用户库仅列出了 Apache 和 Mojarra 2.0.X 选项。并手动设置用户库，如果我添加`javax.faces-2.1.11.jar`，它不会出错，将 jar 放入条目中，然后说`\jarfiles\jaf (missing)`. 所以我认为没有办法使用 Mojarra 2.1.X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:34:01.280

我无法完全理解你在说什么？但据我所知，“您希望在您的项目中使用 Mojarra 2.1.X”。
现在这是您应该提及您正在使用的服务器的事情。
如果您使用的是 glassfish 3.1.x，那么您必须将文件夹中的`javax.faces.jar`礼物替换为 jar 中的 glassfish强制 glassfish 使用。现在，如果它是 Tomcat，那么您必须在 lib 文件夹中添加所有 jsf 强制 jar :)`/glassfish/modules``javax.faces-2.1.11.jar``javax.faces.jar``Mojarra 2.1.6`

最后一件事是，如果您使用的是任何其他内置对 JSF 的支持的服务器，并且您无法找到如何从该服务器替换您的 jar，或者您对该服务器的管理员访问有问题，那么您还可以通过放置webapp 自己的`/WEB-INF/lib`文件夹中更新的 javax.faces.jar 文件并编辑该`/WEB-INF/glassfish-web.xml`文件以添加以下两个新条目：`<class-loader delegate="false" /><property name="useBundledJsf" value="true" />`.
请记住，您只是强制 Web 服务器使用您想要的 jar，而不是应用程序服务器，因为许多应用程序服务器都提供了对 JSF 的内置支持。所以`Configuring Mojarra 2.1.X on Eclipse Indigo`问起来有点错误。你必须问我应该如何使用`Mojarra 2.1.x with my XXX server`，因为 eclipse 只是 IDE，这些东西是由 IDE 管理的，但仅限于 Webservers 的情况。
谢谢 ：）

# mysql - 有没有办法为多对多关系制作汇总表？

> ID：11566364
> 
> 赞同：0
> 
> 时间：2012-07-19T17:40:22.763
> 
> 标签：mysql, database, many-to-many, query-optimization

我们有一个包含太多行的数据库表。为了提高性能，我们正在尝试创建一个汇总表。这对一对一的关系很有用。例如，假设`furniture`有 a`type`和 a `manufacturer_id`，您可以有一个表同时包含这两个列和一个`counts`列。查询该表并很快获得给定类型的家具数量很容易。

但是，如果存在多对多关系怎么办？所以每件家具也可以有一个或多个`colors`和一个或多个`distributors`。那会发生什么？有什么方法可以总结这些数据，以便我可以快速找到有多少家具是绿色的？或者有多少是蓝色和黄色的？

显然这只是一个虚构的例子。但是给定一个包含数百万行的*庞大数据库表，我如何创建一个汇总表来快速查找汇总信息？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:21:52.407

假设您知道自己在做什么并且知道这是一个真正的瓶颈：您现在有性能测量吗？你知道从哪里开始需要时间吗？

无论如何，您都必须查询数据库才能获得该计数。因此，您可以将其存储在单独的表中，例如颜色计数和分销商计数。另一种解决方案是将这些查询的结果缓存在缓存系统中。例如，如果您已经使用了 memcached 或其他一些工具。

最简单的是，当您只有一个数据库时，只需创建一个表：

```
table color count
color_id
amount 
```

这是一个非常简单的查询。您可以很好地对其进行索引，并且不需要连接。

可以使用触发器、使用 cron 或在更新多对多表时进行更新。看你的需求和能力。考虑到更新记录也需要时间，所以用它来优化读取，这就是我在你的问题中读到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:21:43.307

多个表应该保持较小的大小......一个好的数据库系统应该保持性能。

在我看来，保留一个单独的“汇总表”会产生很多开销和维护问题，并且只有在一遍又一遍地需要相同的汇总信息时才真正有用（即，有多少家具是绿色的，而没有存储多少是蓝色的，有多少是黄色的，有多少是蓝色和黄色的，等等，等等，等等）

我会做的是：

表 1：家具

*   第 1 列：唯一 ID
*   第 2 列：名称

表 2：经销商

*   第 1 列：唯一 ID
*   第 2 列：名称

表 3：颜色

*   第 1 列：唯一 ID
*   第 2 列：名称

表 4：家具经销商

*   第 1 列：家具唯一 ID 值
*   第 2 列：distributorUniqueID 值

表 5：家具颜色

*   第 1 列：家具唯一 ID 值
*   第 2 列：colorUniqueID 值

有多少家具是绿色的：

SELECT COUNT(*) FROM 家具颜色 WHERE colorUniqueIDvalue = 'green ID';

有多少家具是蓝色和黄色的：

在 t1.furnitureUniqueIDvalue = t2.furnitureUniqueIDvalue AND t1.colorUniqueIDvalue = 'blue ID' AND t2.colorUniqueIDvalue = 'yellow ID' 上选择家具颜色作为 t1 INNER JOIN 家具颜色作为 t2；

使用正确的 SQL 语句（作为练习留给读者）可以获取蓝色和黄色家具的经销商列表，或者来自特定经销商的绿色或红色家具，或者大多数其他家具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:49:09.847

颜色汇总表中可能有**2^n**行，其中“n”是颜色数。如果您将颜色简化为位图并为每种颜色分配一个位置（红色=0、橙色=1、黄色=2、绿色=3 等），那么您的颜色汇总表可能是：

```
Color    Count
0x0001   256
0x0002   345
0x0003   23839
etc. 
```

256只有红色，345只有橙色，23,839有红色和橙色。要计算有多少有红色但可能有其他颜色，需要对设置了位位置 0 的行求和。或者，可以设置一个单独的汇总表，其中只有“n”个条目，每种颜色一个，以避免对行求和。

如果您希望汇总表同时管理经销商和颜色，那么我认为它将有**2^n * 2^m**行（其中“m”是经销商的数量）来为多件家具拥有多个经销商的所有组合每个都可能有多种颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T21:02:41.370

您需要区分计算不同类型的家具（不同的家具 ID）和计算实际的家具件数。

如果您有一个经销商颜色表，那么您可以计算实际的家具件数。但是，您不能计算不同类型的家具。在 OLAP 的术语中，这是加法事实和非加法事实之间的区别。如果您对此主题感兴趣，请查看 Ralph Kimball 和他的经典著作“数据仓库工具包”。

要计算家具类型，您需要将其包含在表格中。因此，您需要一个分销商颜色家具表。现在要获得经销商的总数，您可以使用：

```
select distributor, count(distinct furnitureid)
from dcf
group by distributor 
```

同样的颜色。

对于每个报告，您似乎希望将原始数据转换为事实表。这是开发数据集市的一个非常好的和标准的想法。您的数据集市可能有两个事实表。一种用于每种类型的家具（因此您可以轻松处理制造问题），另一种用于经销商颜色家具（用于更难的问题）。

某些数据库（例如 Oracle 和 SQL Server）支持这些类型的数据结构。你所说的更像是一个新的“系统”，而不仅仅是一个新的“表”。您需要考虑事实表的维度、更新以及您需要的报告类型。

# openssl - 使用 xmlsec 获取证书颁发者 X500 主体名称

> ID：11566365
> 
> 赞同：0
> 
> 时间：2012-07-19T17:40:24.657
> 
> 标签：openssl, xml-signature, xmlsec

我正在尝试将一段时间前制作的Java代码移植到iOS，我用openssl编译了xmlsec并且不支持xslt。

```
import java.security.cert.X509Certificate;

X509Certificate cert = ...
cert.getIssuerX500Principal().getName();
cert.getSerialNumber(); 
```

编辑：代码可以在 xmlsec 或 openssl 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:33:30.820

我使用 xmlsec 生成 xmlsignature 并且必须从中解析出该信息...

# c# - WPF ListBox 选择索引在连接项更改顺序后的奇怪行为

> ID：11566374
> 
> 赞同：0
> 
> 时间：2012-07-19T17:41:01.703
> 
> 标签：c#, wpf, mvvm, listbox

简而言之，如何交换[ListBox.Items](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx)的两个相邻元素？

详情如下。

我使用 WPF 列表框。
（我使用 MVVM 模式——对于这个问题来说没有那么重要，只是为了清楚起见）

我使用以下 XAML 定义定义 ListBox：

```
 <ListBox Name="listBox1" 
             DisplayMemberPath="Value" 
             ItemsSource="{Binding StringList}"
             SelectedIndex="{Binding StringListSelectedItem}" /> 
```

视图模型代码片段如下：

```
 public ObservableCollection<StringWrapper> StringList {get; set;}

    private int stringListSelectedItem;

    public int StringListSelectedItem
    {
        get {return stringListSelectedItem;}
        set {
            stringListSelectedItem = value;
            NotifyPropertyChanged("StringListSelectedItem");
        }
    } 
```

`StringWrapper`只是一个小类，以避免列表框中的相同字符串值出现[问题：](https://stackoverflow.com/questions/4176575/selection-bug-for-listbox-where-the-list-items-are-value-types-structs-and-con)

```
public class StringWrapper
{
    public string Value { get; private set; }

    public StringWrapper(string v)
    {
        Value = v;
    }
} 
```

我想交换列表中两个元素的顺序：

```
 StringWrapper tmp = StringList[index];
        StringList[index] = StringList[index - 1];
        StringList[index - 1] = tmp; 
```

执行此类交换后，我在为 赋值时获得了不正确的行为`StringListSelectedItem`：选择了 UI 中的几个项目，
但是`listBox1.SelectionMode == Single`.
此外，当我在调试器中检查变量值时，一切看起来都很好，但是在窗口中，当我运行应用程序时，我看到`ListBox`.

可以通过在交换后执行以下代码来修复它：

```
 for (int i = 0; i < vm.StringList.Count(); i++) 
            listBox1.SelectedIndex = i; 
```

但是每次都遍历所有项目并不是一个好主意，当我只需要设置选定的项目时。

我的代码有什么问题？它会破坏某些东西吗？如何获得正确的行为`SelectedIndex`？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:02:28.157

而不是这个：

```
 StringWrapper tmp = StringList[index];
    StringList[index] = StringList[index - 1];
    StringList[index - 1] = tmp; 
```

试试这个：

```
 StringWrapper tmp = StringList[index];
    StringList.RemoveAt(index);
    StringList.Insert(index-1,tmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:59:07.680

您提供选择模式的代码未设置为单一。您确定在您的应用程序中设置正确吗？如果是这样，您是在代码后面还是实际上在 XAML 中设置选择模式？如果它在后面的代码中，我怀疑数据绑定/选择项在启动时发生，然后设置选择模式的代码运行。为了安全起见，在 xaml 中设置选择模式以及绑定。

还尝试使用绑定路径而不是绑定，例如：

```
<ListBox Name="listBox1" 
             DisplayMemberPath="Value" 
             ItemsSource="{Binding StringList}"
             SelectedItem="{Binding Path=StringListSelectedItem, Mode=TwoWay}"
             SelectionMode="Single"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:09:50.853

您可以尝试为内置的 ObservableCollection 使用一个小的扩展，以确保当集合中的一个项目发生更改时，所有其他项目也会得到通知。

使用这个子类：

```
public class ExtednedObservableCollection<T> : ObservableCollection<T> {

    public ExtednedObservableCollection()
        : base() {

        this.CollectionChanged += new NotifyCollectionChangedEventHandler(OnCollectionChanged);
    }

    private void OnCollectionChanged(object o, NotifyCollectionChangedEventArgs e) {

        if (e.NewItems != null) {

            foreach (Object item in e.NewItems) {

                (item as INotifyPropertyChanged).PropertyChanged += new PropertyChangedEventHandler(item_PropertyChanged);
            }
        }

        if (e.OldItems != null) {

            foreach (Object item in e.OldItems) {

                (item as INotifyPropertyChanged).PropertyChanged -= new PropertyChangedEventHandler(item_PropertyChanged);
            }
        }
    }

    void item_PropertyChanged(object sender, PropertyChangedEventArgs e) {

        NotifyCollectionChangedEventArgs a = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset);
        OnCollectionChanged(a);
    }

} 
```

# node.js - 所需的 npm 错误与实际版本？

> ID：11566376
> 
> 赞同：1
> 
> 时间：2012-07-19T17:41:05.287
> 
> 标签：node.js, installation, npm

我在安装 express 时遇到 npm 错误，这是什么意思？我认为这意味着我必须卸载节点并重新安装它？或者升级它。无法弄清楚我应该做什么，我不愿意开始搞砸它，因为害怕破坏某些东西。

```
My-Comp:websockets101 myuser$ npm install express
npm ERR! error installing express@3.0.0beta7 Error: Unsupported
npm ERR! error installing express@3.0.0beta7     at checkEngine (/usr/lib/node_modules/npm/lib/install.js:567:14)
npm ERR! error installing express@3.0.0beta7     at nextStep (/usr/lib/node_modules/npm/lib/utils/chain.js:54:8)
npm ERR! error installing express@3.0.0beta7     at chain (/usr/lib/node_modules/npm/lib/utils/chain.js:27:3)
npm ERR! error installing express@3.0.0beta7     at installOne_ (/usr/lib/node_modules/npm/lib/install.js:545:3)
npm ERR! error installing express@3.0.0beta7     at installOne (/usr/lib/node_modules/npm/lib/install.js:485:3)
npm ERR! error installing express@3.0.0beta7     at /usr/lib/node_modules/npm/lib/install.js:422:9
npm ERR! error installing express@3.0.0beta7     at /usr/lib/node_modules/npm/lib/utils/async-map.js:57:35
npm ERR! error installing express@3.0.0beta7     at Array.forEach (native)
npm ERR! error installing express@3.0.0beta7     at /usr/lib/node_modules/npm/lib/utils/async-map.js:57:11
npm ERR! error installing express@3.0.0beta7     at Array.forEach (native)
npm ERR! Unsupported
npm ERR! Not compatible with your version of node/npm: connect@2.3.9
npm ERR! Required: {"node":">= 0.5.0"}
npm ERR! Actual:   {"npm":"1.0.17","node":"v0.4.11"}
npm ERR! 
npm ERR! System Darwin 10.8.0
npm ERR! command "node" "/usr/bin/npm" "install" "express"
npm ERR! cwd /Users/myuser/projects/websockets101
npm ERR! node -v v0.4.11
npm ERR! npm -v 1.0.17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:46:09.047

看起来像是 Express 维护者的一个错误。他让 Express 3.0.0 beta 安装在 Node 0.4.x 上，但需要一个只能安装在 0.5.x 和更高版本上的库。

尝试`npm install express@2.x`获取保证在 Node 0.4.x 上工作的最新版本（3.0 仍处于测试阶段），*或者*升级到最新版本的 Node.js（我相信现在是 0.8.1）。

# haskell - haskell - LYAH - 制作我们自己的类型和我们的类型类

> ID：11566378
> 
> 赞同：0
> 
> 时间：2012-07-19T17:41:14.063
> 
> 标签：haskell, types, typeclass

下面的haskell代码编译好了，好的。

```
data Point = Point Float Float  
data Radius = Radius Float  
data Shape = Circle Point Radius 
```

是否可以按照下面的代码编写一些东西（代码编译失败）：

```
data LengthQty = Radius Float | Length Float | Width Float   
data Shape = Circle Point Radius 
```

这一尝试背后的想法是半径、长度和宽度代表物理量长度。

请注意，在第二部分的第二行中，如果这样写

```
data Shape = Circle Point LengthQty 
```

然后，它会编译，但在这种情况下，“LengthQty”可以是长度、宽度或半径之类的任何东西，其中只需要半径。

(1) 第二部分有什么问题？
（2）如何纠正实现物理量长度（LengthQty）的思想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:20:35.283

您的代码无法编译的原因是数据声明的右侧必须是一个*构造函数*，后跟一个*类型*列表，即形式

```
data {-type-} = {-constructor-} {-type-} ... {-type-} 
```

在您的示例中，当您定义

```
data LengthQty = Radius Float | Length Float | Width Float 
```

你已经创建了一个`LengthQty`类型*while*和`Radius`是构造*函数*。因此，当你写`Length``Width`

 *```
data Shape = Circle Point Radius 
```

编译器看到一些形式

```
data {-type-} = {-constructor-} {-type-} {-constructor-} 
```

即它看到一个构造函数，它期望一个类型，所以它抛出一个错误。在原始代码中，该符号`Radius`同时用于构造函数和类型。当编译器看到

```
data Shape = Circle Point Radius 
```

它知道`Radius`在这种情况下必须是一个类型，因此不可能与*构造函数*半径混淆。

考虑到这一点，如果您只编写代码，就可以使您的代码正确编译

```
data Shape = Circle Point LengthQty 
```

你可以得到一个圆的特定实例

```
circle :: Shape
circle = Circle (Point 0 0) (Radius 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T18:29:36.463

这编译：

```
data Point = Point Float Float  
data Radius = Radius Float  
data Shape = Circle Point Radius

data LengthQty = R Float | Length Float | Width Float 
```

`Radius`是类型的名称，也是类型的数据构造函数的名称`Float -> Radius`；`R`是类型的数据构造函数`Float -> LengthQty`。您不能有两个具有相同名称的不同数据构造函数。这个**名字** `Radius`已经**被占用了**。

以下也有效：

```
data LengthQty = R Radius | Length Float | Width Float 
```

如果没有`R`，`Radius`其本身将是一个类型的数据构造函数`:: LengthQty`，这将再次与 . 冲突`Radius :: Float -> Radius`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:44:56.770

有用的区别

```
data Point = Point Float Float  
data Radius = Radius Float  
data Shape = Circle Point Radius 
```

和
`data LengthQty = Radius Float | Length Float | Width Float`

是 Haskell 的类型系统处理它们的方式。Haskell 有一个强大的类型系统，它可以确保向函数传递它可以处理的数据。您编写类似定义的原因`LengthQuantity`是，如果您有一个可以采用 a `Radius`、`Length`或`Width`的函数，而您的函数无法做到这一点。

如果您*确实*有一个可以采用 , 或 的函数`Radius`，`Length`我`Width`会这样编写您的类型：

```
data Point = Point Float Float  
data Radius = Radius Float  
data Shape = Circle Point Radius

data LengthQty = R Radius
               | L Length 
               | W Width 
```

这样，只能`Radius`从更具体的类型检查中受益的函数。*

# php - php发送双重电子邮件

> ID：11566380
> 
> 赞同：1
> 
> 时间：2012-07-19T17:41:19.477
> 
> 标签：php, email

我意识到这与[这个问题](https://stackoverflow.com/questions/5531892/phpmailer-duplicate-email-issue-conditional-statement-with-mail-send)相似，但是，我在发送给自己时只会收到一封双重电子邮件。我已经使用相同的脚本向其他人发送了电子邮件，他们收到了一封电子邮件。这是电子邮件脚本：

```
<?php
  function sendEmail( $recipient, $sub, $msg )
  {
    $to      = $recipient;
    $subject = $sub;
    $message = $msg;

    mail( $to, $subject, $message );
  }
?> 
```

调用它的代码是这样的：

```
if( $retVal != FALSE ) // No errors in execution of report generation
{
  $subject = "Successful Report";
  $message = "The report was successfully generated.";
  // Notify people about success
  sendEmail( $mailto, $subject, $message );

  echo "Successful report generation\n";
}
else // Error in report generation
{
  $subject = "Unsuccessful Report";
  $message = "The report failed to generate.";
  // Notify people about failure
  sendEmail( $mailto, $subject, $message );

  echo "Report generation was unsuccessful\n";
} 
```

其中 $retval 是[system()](http://php.net/manual/en/function.system.php)的返回值。任何人都可以对这个问题有所了解吗？或者这是可以忽略的事情？

非常感谢

-生锈的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:00:02.043

根据对话：您是唯一收到双重电子邮件的收件人，字符串“成功生成报告”仅打印一次。听起来 PHP 不是这里的罪魁祸首，而是 PHP 之外的东西，例如 MTA。

查看您收到的两封电子邮件的标头，尤其是 MessageID 标头。如果它们相同，则从 PHP 发送了一封电子邮件（很好！），并且沿线的某个地方将其发送给您两次。

如果它们不相同（混乱），那么 PHP 实际上确实发送了两封电子邮件（不太可能），或者 PHP 和您的邮件客户端之间的某个地方有一个重新发送者。

在后一种情况下，我将更深入地查看您电子邮件中的标题，以确定每封电子邮件的来源和路由，以及确定 MTA 发送邮件的位置的信封。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:55:45.493

我会将输出添加[`debug_backtrace()`](http://php.net/manual/en/function.debug-backtrace.php)到您的电子邮件正文中。这将允许您确定何时`sendEmail`调用该函数以及调用它的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T17:58:59.617

```
$message = "";
$header = "Content-Type: text/html; charset=UTF-8;\r\n";
mail($mailto, $subject, $message, $header); 
```

# javascript - 在 Firefox 中更改 src 时闪烁

> ID：11566381
> 
> 赞同：1
> 
> 时间：2012-07-19T17:41:33.817
> 
> 标签：javascript, html, firefox, image

我正在制作一张地图，当您将鼠标放在列表中的名称上`<img>`时，地图的 src 属性会更改为突出显示该区域的地图图像，我只使用`.attr()`jquery 的方法来更改它。

```
$("img.map").attr("src","newmap.png"); 
```

它在除Firefox之外的所有浏览器中都很好用，当图像更改时，首先旧的消失然后有很短的时间没有显示任何内容，然后出现新图像，我怎样才能在像chrome或IE这样的Firefox中顺利进行此更改??
（时间真的很短，但是当在目录中移动鼠标时，图像会在鼠标移动的整个过程中消失）。
或者您可能知道实现该效果的更好方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:43:45.720

尝试预加载您的图像。闪烁发生在浏览器加载新图像时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:47:30.090

在我的脑海中，悬停意图和背景图像的组合将对此有所帮助。

悬停意图很好，因为您不想不必要地下载图像。

如果你给包含的 div（甚至图像本身）一个原始或最后查看的图像的背景图像，闪烁效果会减少。我怀疑这些图像更改的加载时间可能会有所不同，因此您也可以借此机会显示某种加载图标。

说了这么多，我认为拥有原始图像然后在每次悬停一个区域时添加一个新图像更有意义。这样，您只能在图像元素尚不存在时添加它（保存 http 请求），甚至可以进行更优雅的更改（例如淡入原始图像）

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T17:45:14.523

发生这种情况是因为`src`属性明显发生了变化。好吧，新图像还没有下载。所以它必须向服务器发送一个请求并等待响应，而`src`属性已经改变了。这就是为什么你在那里什么都看不到的原因。有办法解决这个问题。在 JavaScript 中，使用新图像作为源创建一个新图像元素。添加一个 onload 事件处理程序，它将更改您*真正*想要显示`src`的图像的属性。是的，预加载可能有点困难，但它会减少初始页面加载时间*，*并且不会弄乱您的 HTML。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T17:43:52.637

问题是浏览器在您第一次引用它时正在下载图像，而不是之前。

我只需要两个图像元素并隐藏/显示它们，而不是更改`src`单个元素的属性。**

# java - 是否可以修改模式，以便在应用拆分时分隔符将是与基本模式不匹配的任何内容？

> ID：11566386
> 
> 赞同：0
> 
> 时间：2012-07-19T17:41:52.227
> 
> 标签：java, regex, string, split

在最近的一次使用中`String.split()`，我遇到了这样一种情况，即文本是如此动态，选择匹配项比过滤掉不匹配项更容易。

我发现自己想知道是否可以修改“反向正则表达式”，`String.split()`以便您可以给它任何模式，它会匹配与该模式不匹配的每一组字符。

*注意：这里的“问题”可以用`String.matches()`, `Tokens`,`Matcher.group()`等轻松解决。这个问题**主要是假设性**的（仍然欢迎代码示例，因为问题的性质非常需要它），而*不是关于如何获得结果*，而是关于*是否有可能以这种方式实现它们*。

* * *

我尝试了什么：

```
String pattern1 = "(test)"; //A verif. that what "should-not-match" is working correctly.
        String pattern2 = "[^(test)]"; //FAIL - unmatches the letters separately.
        String pattern3 = "(^(test))"; //FAIL - does not match anything, it seems.
        String text = ""
                        + "This is a test. "
                        + "This test should (?not?) match the word \"test\", whenever it appears.\n"
                        + "This is about to test if a \"String.split()\" can be used in a different way.\n"
                        + "By the way, \"testing\" does not equal \"test\","
                        + "but it will split in the middle because it contains \"test\".";
        for (String s : text.split(pattern3)) {
            System.out.println(s);
        } 
```

以及其他类似的模式，但都没有成功。

* * *

更新：

我现在也尝试了一些使用特殊构造函数的模式，但也没有让它工作。

至于我想要什么，按照“测试”示例，是获取一个包含内容为“文本”的字符串的数组（我想用作基本模式，或者换句话说，我想要查找的内容）。

但是这样做使用`String.split()`, with 使得使用基本模式直接导致“任何不是（测试）”，因此需要反转以导致“只是（测试）的出现”。

Bible-sized-long-story-short，想要的是`String.split()`导致这种行为的正则表达式（+结果）：注意：遵循上面的示例代码，包括所需的变量（文本）。

```
String[] trash = text.split("test"); //<-base pattern, needs reversing.
        System.out.println("\n\nWhat should match the split-pattern (due reversal), become separators, and be filtered out:");
        for (String s : trash) {
            System.out.println("[" + s + "]");
            text = text.replace(s, "%!%"); //<-simulated wanted behavior.
        }
        System.out.println("\n\nWhat should be the resulting String[]:");
        for (String s : text.split("%!%")) {
            System.out.println(s);
        }
        System.out.println("Note: There is a blank @ index [0], since if the text does not start with \"test\", there is a sep. between. This is NOT WRONG."); 
```

* * *

欢迎使用代码示例。毕竟，创建此类代码的可能性（或不可能性）是这个问题的本质。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:02:50.090

您可能正在谈论 (?! 构造。

它记录在 Pattern 类的 javadoc 中。他们称之为消极的前瞻性断言。

解决问题最直接的方法是重复查找。

```
 Pattern p = Pattern.compile(regexForThingIWant);
    Matcher m = p.matcher(str);
    int cursor = 0;
    while (m.find(cursor)) {
      String x = m.group();
      // do something with x
      cursor = m.end();
    } 
```

我能够为似乎做你想做的事情的分裂拼凑一个正则表达式，但很糟糕：

```
(^|(?<=test))((?!test).)* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:35:50.727

我很难看到`split`您想看到的输出，因为您唯一的提示是测试字符串的一部分，然后只是间接的（就像您希望单词`testing`分成两部分一样）。

好吧，让我们尝试一个积极的回顾：

```
^|(?<=test) 
```

这返回

```
This is a test
. This test
 should (?not?) match the word "test
", whenever it appears.
This is about to test
 if a "String.split()" can be used in a different way.
By the way, "test
ing" does not equal "test
",but it will split in the middle because it contains "test
". 
```

那是你想要的吗？

请注意，当以这样一种方式拆分文本时，输入的“匹配”和“不匹配”位（在松散意义上）都不会被拆分过程消耗，您需要设计正则表达式，使其仅匹配（一些）空字符串，在“匹配”这个词的技术意义上。

因此，前瞻和后瞻几乎是您使用正则表达式解决此类任务的唯一工具。

但是，如果您希望消耗所有非测试部件，那也是可以实现的。

```
(?<=^|(test))(tes[^t]|te[^s]|t[^e]|[^t])* 
```

它是相同的lookbehind，然后消费任何看起来不像这个词的东西`test`。

但是，这种方法并不完全通用。 [这个问题](https://stackoverflow.com/questions/3977455/how-do-i-turn-any-regex-into-an-complement-of-itself-without-complex-hand-editin)解释了限制。

# c# - 使用 javascript ASP.NET 获取服务器控件上的子控件

> ID：11566387
> 
> 赞同：0
> 
> 时间：2012-07-19T17:42:09.633
> 
> 标签：c#, javascript, asp.net, custom-server-controls, servercontrols

我创建了一个包含按钮的基本复合服务器控件。

```
<Custom:Class1 ID="testClass" ClientInstanceName="test1" runat="server"></Custom:Class1> 
```

我希望能够使用 javascript 访问子控件，例如：

var myButton = testClass.FindControl('btnTest');

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:34:56.993

创建一个客户端对象来表示您的服务器端控件（javascript 类）。在客户端对象上放置对子控件的引用集合。然后在服务器端 OnPreRender 事件创建或加载脚本来定义您的客户端对象，同时将引用集合传递给其构造函数。

如何嵌入包含客户端对象定义的 javascript 文件的示例（将此 somwhere 放在命名空间声明之上：

```
[assembly: WebResource("myNS.stuff.clientSideObj.js", "application/x-javascript")]
namespace myNS.stuff
{ 
```

如何注册 WebResouce (OnPreRender) 的示例：

```
 ClientScriptManager cs = this.Page.ClientScript;// Get a ClientScriptManager reference from the Page class.
 Type csType = this.GetType();// Get the type from this class.

 //Register an embedded JavaScript file. The JavaScript file needs to have a build action of "Embedded Resource".
 String resourceName1 = "myNS.stuff.clientSideObj.js";
 cs.RegisterClientScriptResource(csType, resourceName1); 
```

创建脚本以声明客户端对象 (OnPreRender) 实例的示例：

```
String childControlIDsList= getChildControlList();//I am not writing this one.. just look up javascript arrays.
String uniqueScriptKey = "myKey";
StringBuilder theScript = new StringBuilder();
theScript.AppendLine("var myObj = new clientSideObj(" + childControlIDsList + ");");
theScript.AppendLine("window['myClientControl'] = myObj;") //create a client side reference to your control.
cs.RegisterStartupScript(csType, uniqueScriptKey, theScript.ToString(), true); 
```

我将把客户端对象定义留给你...希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:48:33.830

如果您使用的是 .net 4.0，您可以设置`ClientIDMode`按钮上的 ' ' 属性，`Static`然后将 ID 属性设置为类似 ID="myButton" 并使用 jquery 访问它，如下所示

```
 $("#myButton") 
```

如果你不使用 jquery，你可以使用

```
document.getElementById("myButton") 
```

如果您在表单中多次使用该控件，您可以在按钮 ID 前加上您的自定义控件 ID。请记住将自定义控件的 ClientIDMode 属性也设置为静态。

```
<asp:Button ID="<%=Me.Id%>_myButton "  ClientIDMode="Static" runat="server"/> 
```

不完全确定这甚至是一种好的做法，或者它是否会起作用，但您可以尝试一下。（请记住设置您的自定义控件 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:10:30.557

这适用于 Sharepoint 可视化 Web 控件，但适用相同的一般过程：

[http://lemonharpy.wordpress.com/2011/07/20/expose-clientid-to-javascript-in-sharepoint-2010-visual-web-control/](http://lemonharpy.wordpress.com/2011/07/20/expose-clientid-to-javascript-in-sharepoint-2010-visual-web-control/)

本质上，在页面后面的代码中，您会在页面上获得对 ClientId 的引用，然后将其公开为 javascript 变量，您可以将其添加到您的 jQuery 选择器上。

我觉得这*有点*hacky - 但我认为它可以完成工作......

# ruby-on-rails - Rails JSON 自动包含关联

> ID：11566399
> 
> 赞同：1
> 
> 时间：2012-07-19T17:42:45.077
> 
> 标签：ruby-on-rails

在我的控制器中，我必须渲染一些具有很多关联的数据。

它看起来像这样：

```
render :json => current_client.items.some_scopes.includes(:assoscitation1, :assoscitation2, :assoscitation3 => {:nested_assoscitation1 => :nested_assoscitation2}).to_json(
        :include => {:assoscitation2 => {:include => :type}, 
                     :assoscitation1 => {}, 
                     :assoscitation3 => {:include => 
                       {:product => {:include => :type}}
                      }
                    }
    ) 
```

AR包括很好。我在范围内添加了它。但是再次在方法中指定所有这些关联`to_json`让我很难过。
我怎样才能删除这个重复？
或者也许添加演示者级别？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:43:53.103

在这一点上（大哈希中的丑陋）我会推荐 RABL。

[https://github.com/nesquena/rabl/](https://github.com/nesquena/rabl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T06:48:27.033

RABL 很棒，而 AMS 也是一个不错的选择：

[https://github.com/rails-api/active_model_serializers](https://github.com/rails-api/active_model_serializers)

# csv - 将表导入 plsql 开发人员（.csv 格式除外）

> ID：11566402
> 
> 赞同：1
> 
> 时间：2012-07-19T17:42:55.613
> 
> 标签：csv, import, plsql, xlsx, plsqldeveloper

我的计划是将表从 MS Access 数据库导出到 .xlsx 然后将其转换为 .csv

然后将其导入plsql developer。

但是 .xlsx 有一个日期和时间列（07-08-2012 13:01:33），当我将其转换为 .csv 时，.csv 仅显示 07-08-2012 。

所以我的问题是......有没有其他方法可以将表导入 plsql 开发人员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:13:08.743

为什么不使用“导出到文本文件”选项将其直接导出为 CSV 格式？将文件类型（指定文件名时）设置为 CSV。然后向导让您将导出格式定义为分隔符，然后默认为逗号分隔符。

就我个人而言，在导入 PL/SQL Developer 时，**我总是使用制表符分隔的文件**，以避免在我的数据碰巧嵌入逗号时发生冲突。您也可以直接在 Access 2010 中执行此操作，只需按照我在上面给出的步骤更改分隔符和文件扩展名即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:16:30.510

从 MS Access 数据库中，我使用 .txt 导出然后转换为 .csv 然后它包含完整的日期字符串。

# gcc - C 程序的数据流图生成

> ID：11566404
> 
> 赞同：3
> 
> 时间：2012-07-19T17:42:56.677
> 
> 标签：gcc, compiler-construction, graph, dataflow, ssa

我需要为 C 代码制作数据流图。数据流图是指图中的节点表示加法和乘法等操作，边表示节点之间的操作数（数据）流的图。我的目标是分析计算密集型内核的数据流图的并行性和执行时间。我使用了许多工具从 Trimaran、Oink、GCC 等 C 程序生成数据流图。在这些工具中，GCC 的 Gimple 内部表示为我提供了 SSA 中每个基本块的一些数据流分析（静态单一分配）表格。SSA 表格简化了我的分析。这是我使用 GCC 的方法：

`-fdump-tree-cfg`为每个函数生成一个控制流图，其中节点代表基本块，边代表控制依赖。还显示了每个基本块中的数据依赖性。但是，它没有给出每个基本块的数据流图。我需要将数据依赖可视化，以便分析每个基本块中的数据流。

举个例子，如果你应用`-fdump-tree-cfg`到下面的代码

```
for (i1=0; i1<=N1-N2; i1++)
    for (i2=0; i2<N2; i2++) //N2=31
        y[i1] = y[i1] + w[i2]*x[i1+i2]; 
```

你得到这个：

```
...
<bb 3>:
  i2 = 0;
  goto <bb 5>;

<bb 4>: //the inner-most loop, where real computation happens
  i1.0 = i1;
  i1.1 = i1;
  D.1608 = y[i1.1];
  i2.2 = i2;
  D.1610 = w[i2.2];
  D.1611 = i1 + i2;
  D.1612 = x[D.1611];
  D.1613 = D.1610 * D.1612;
  D.1614 = D.1608 + D.1613;
  y[i1.0] = D.1614;
  i2 = i2 + 1;

<bb 5>:
  if (i2 <= 31)
    goto <bb 4>;
  else
    goto <bb 6>;
... 
```

`-fdump-tree-vcg`生成格式的控制流图`VCG`，但不携带任何数据依赖信息。

但是，GCC 有一些限制。例如，GCC 不会为每个基本块生成可视化的数据流图。我想知道是否有任何工具可以为 C 程序生成数据流图？或者可能有一个 GCC 插件来从 Gimple 表示生成数据流图。

PS：工具应该是平台独立的，不限于特定的架构。例如，GCC 中的 Gimple 表示是独立于体系结构的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:44:46.190

没有特定的插件可以这样做。但是您可以使用“点”绘制图形。由于 gimple 表示具有特定格式，您可以轻松地制作一个解析器，它将 gimple 表示作为输入并将点文件作为输出。从点文件中，您可以轻松地绘制图形。只要做人点，你会得到一切。无论如何，这是一个很好的问题。

# php - Yii 仅选择数组中的指定属性

> ID：11566405
> 
> 赞同：14
> 
> 时间：2012-07-19T17:42:58.223
> 
> 标签：php, activerecord, yii

我经常遇到这个问题。。

可以说..在博客应用程序中，我需要向所有活跃用户发送电子邮件..

我所做的是在用户上次登录的某些条件大于某个值的情况下编写 findAll ......并获取所有用户对象......然后通过所有用户模型对象运行 foreach 并将电子邮件存储在数组中，然后使用数组..

换句话说，后端发生的事情是我正在加载整个模型，而我只需要很少`0.5%`的信息，然后运行脏代码以获取数组中的值，然后对其进行处理..

性能和脏代码不是很糟糕..

现在我能想到的其他方法是使用`commandBuilder`和编写查询，然后运行相同的脏代码来获取数组中的值..解决了一个性能问题..但是正如人们所说在 mvc 框架中编写 sql 并不是一个好主意..

我真正想要的是......一些类似的函数，如果它是单列，则为我提供数组中的列值，或者如果多列，则以列名作为索引的数组。

所以我想做的是通过扩展 ActiveRecord 或类似的东西来实现它，**我想检查的是是否有人已经实现了类似的东西，或者对它有一些想法..:)**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T05:08:59.157

您必须深入研究 CDbCriteria，它们就是您所看到的一切。

举个例子::

```
$criteria = new CDbCriteria;
$criteria->select = 't.first_name, t.email'; // select fields which you want in output
$criteria->condition = 't.status = 1';

$data = Users::model()->findAll($criteria); 
```

$data 也是一个数组输出。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-10T04:00:35.067

在 Yii2 中，你可以这样使用：

```
User::find()->select(['field1', 'field2']); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-20T05:14:05.427

正如我所说，我创建了行为，它的工作方式是：

```
$active_users_emails = User::model()->findColumn('email', 'active = 1');

**returns array('rajat@gmail.com','rajatsinghal@gmail.com')..** 
```

> 现在不需要遍历所有活动记录并收集数组中的列，然后继续，并且还承担加载整列的重量..

你可以在 git 上找到扩展 .. [https://github.com/rajatsinghal/CAdvancedArFindBehavior](https://github.com/rajatsinghal/CAdvancedArFindBehavior)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-12T09:22:57.390

这也可以在没有任何行为或没有添加到 CActiveRecord 的情况下工作。不过，我也喜欢这种行为的解决方案。

```
$active_users_emails=CHtml::listData(User::model()->findAllByAttributes(array('active'=>1)), 'id', 'email'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-17T07:55:10.793

需要使用**array_filter**函数过滤模型属性。像这样试试，效果很好-

```
$criteria = new CDbCriteria;
$criteria->select = 't.first_name, t.email'; // select fields which you want in output
$criteria->condition = 't.status = 1';

$data = Users::model()->findAll($criteria); 
```

在分配之前使用 array_filter。

```
foreach($data as $model){
      $rows[] = array_filter($model->attributes);
   }

echo CJSON::encode($rows) 
```

所以，你会得到这样的输出 -

```
[{"first_name" : "Rohit", "email" : "rohitsuthar@gmail.com"}, {"first_name" : "Rajat", "email" : "rajat@example.com"}] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-12T13:59:55.640

在与问题描述相同的情况下。在尝试了以上所有答案和其他一些资源之后，这就是我正在做的事情。

```
$emailIds = Yii::app()->db->createCommand(
                 'SELECT email FROM users WHERE is_active = 1'
            )->queryAll();

$emailIds = array_column( $emailIds, 'email' ) ); 
```

# javascript - 获取WebView Android中的事件点击组件

> ID：11566407
> 
> 赞同：1
> 
> 时间：2012-07-19T17:43:07.030
> 
> 标签：javascript, android, webview

我有一个包含输入 html 的 webview，如下所示：

```
<input type="file" name="upload" onChange="checkimg(this.value)"/> 
```

和 JavaScript 函数对应于该组件

```
function checkimg(fName){
    fullName=fName;
    splitName = fullName.split(".");
    fileType = splitName[1];
    fileType = fileType.toLowerCase();
    if (fileType == 'jpg'|| fileType == 'gif' || fileType == 'png' || fileType == 'jpeg' )
    {} 
    else {
        alert("Choose file with end : jpg, gif, png, jpeg");
        }
} 
```

现在我想在单击输入类型文件时获取事件。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:58:47.367

经过一番阅读，我终于自己掌握了它。当您对 javascript 一无所知并且文档在该主题上非常薄弱时，这有点困难。这是我的解决方案，希望这对其他人有帮助：

HTML 页面末尾包含 2 个按钮，如下所示：

```
<div>
<button type="button" id="ok"
    style="font-weight: 700; margin-right: 20px;" onclick="validClick();">J'accepte</button>
<button type="button" id="no" onclick="refuseClick();">Je refuse</button>
</div> 
```

我将 clic 的事件发送到 HTML 页面顶部的 javascript：

```
<script language="javascript">
function validClick() {
    valid.performClick();
    document.getElementById("ok").value = "J'accepte";
}
function refuseClick(){
    refuse.performClick();
    document.getElementById("no").value = "Je refuse";
}
</script> 
```

有效和拒绝是我通过 javascript 接口传递以使用它们的方法的 2 个 java 对象。所以在 java 中，我创建了 2 个按钮（没有真正显示在 Activity 中，仅用于它们的方法，并且是 HTML 按钮的阴影：

```
valid = new Button(ctx);
valid.setOnClickListener(this);
refuse = new Button(ctx);
refuse.setOnClickListener(this); 
```

然后我将 javascript 添加到我的 WebView ：

// 启用javascript

```
WebSettings ws = wv.getSettings();
ws.setJavaScriptEnabled(true); 
```

// 添加记录javascript事件的接口

```
wv.addJavascriptInterface(valid, "valid");
wv.addJavascriptInterface(refuse, "refuse"); 
```

最后，在 onClick 方法中处理点击事件：

```
@Override
public void onClick(View v) {
    if (v.equals(valid)) {
        //do Something
    } else if (v.equals(refuse)) {
        //do Something else }
} 
```

希望这会帮助你。

谢谢

# mysql - 当两个表都包含 NULL 时如何加入

> ID：11566409
> 
> 赞同：4
> 
> 时间：2012-07-19T17:43:28.007
> 
> 标签：mysql, sql, join, null

我正在对 2 列上的 2 个表进行外部连接。如果 table1.column1=table2.column1 和 table1.column2=table2.column2，则应该进行连接。由于允许 column2 包含 null，因此只要值为 null，连接就会失败，因为*null*不等于*null*（只有计算机科学家会喜欢它）。

我想出的解决方法是：

```
select table1.column1,table1.colunn1,table2.column1,table2.column2 from 
table1 
left join table2 
       on table1.column1=table2.column1 
       and if(table1.column2 is null,table2.column2 is null, table1.column2=table2.column2) 
```

这工作正常，但必须有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T17:45:44.833

您可以使用 MySQL[空安全比较运算符](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to) `<=>`：

```
SELECT    t1.column1, t1.column2, t2.column1, t2.column2 
FROM      table1 t1
LEFT JOIN table2 t2 
       ON t1.column1 = t2.column1 AND t1.column2 <=> t2.column2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:47:00.273

我会的`LEFT JOIN table2 ON table1.column1 = table2.column1 OR (table1.column1 IS NULL AND table2.column1 IS NULL)`。我不确定这是否可行。

（顺便说一句，空值不是值。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T04:50:03.963

因为`NULL`s 存在于源数据中，所以在用于 , 之前默认使用`COALESCE`（或`NVL`在 Oracle 中）的值`LEFT JOIN`，以允许`WHERE`子句按预期工作。可以是您选择的`'DEFAULT_VALUE'`任何内容，具体取决于数据类型。这种方法是有效的，因为它消除了混乱并允许表达式正常工作，而不会`NULL`妨碍。

使用内联视图：

```
select table1.column1,table1.column1,table2.column1,table2.column2
from
(
    select
    table1.column1
    coalesce(table1.column2,'DEFAULT_VALUE') as column2
    from table1
) t1
left join (
            select
            table2.column1
            coalesce(table2.column2,'DEFAULT_VALUE') as column2
            from table2
          ) t2
       on t2.column1 = t1.column1
      and t2.column2 = t1.column2; 
```

或使用 CTE：

```
with t1 as
(
    select
    table1.column1
    coalesce(table1.column2,'DEFAULT_VALUE') as column2
    from table1
),
t2 as
(
    select
    table2.column1
    coalesce(table2.column2,'DEFAULT_VALUE') as column2
    from table2
)     
select table1.column1,table1.column1,table2.column1,table2.column2
from t1
left join t2
       on t2.column1 = t1.column1
      and t2.column2 = t1.column2; 
```

# language-agnostic - i18n 是否有“可移植”格式字符串语法？

> ID：11566413
> 
> 赞同：2
> 
> 时间：2012-07-19T17:43:38.953
> 
> 标签：language-agnostic, internationalization, string-formatting

是否有满足这些要求的用于 i18n 目的的格式字符串语法？

*   实现可用于多种编程语言（内置或库绑定）。至少 C/C++，python。
*   开源并移植到多个平台
*   支持位置参数的排列（如 posix printf with $）
*   和/或者，更好的是，支持命名参数
*   可以针对应用程序定义的数据类型进行扩展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:50:48.333

我认为[**国际 Unicode 组件**](http://site.icu-project.org/)[(ICU)](http://site.icu-project.org/)的[*格式化和解析*功能](http://userguide.icu-project.org/formatparse)可能会为您解决问题。[](http://site.icu-project.org/)

 **ICU 有 C/C++ 和 Java 实现，其他提供[ICU 绑定 12 种语言](http://site.icu-project.org/related)，从 Python 到 Cobol。ICU 许可证允许“任何人……不受限制地交易软件……”。该类应该为您提供所需的命名参数[`MessageFormat`。](http://userguide.icu-project.org/formatparse/messages)我没有尝试扩展 ICU Formatting 类，但它们确实有一些您可以从它们开始的抽象基类。**

# eclipse-juno - 如何在 Eclipse rcp 构建中解决 ClassNotFoundException？

> ID：11566415
> 
> 赞同：3
> 
> 时间：2012-07-19T17:43:47.000
> 
> 标签：eclipse-juno

我已经在 eclipse juno 中构建了一个 eclipse 功能项目，当我从 IDE 启动程序时，一切都很好，控制台中没有错误。

当我导出它运行的产品时，它不显示我在 Application.e4xmi 文件中创建的部分的内容（只有灰色背景）。当我检查导出文件夹中的配置文件夹时，有一个包含以下错误的日志文件：

```
!ENTRY org.eclipse.e4.ui.workbench 4 0 2012-07-19 19:22:13.859
MESSAGE Unable to load class 'be.yt.diepvriezer.ui.handlers.ExitHandler' from bundle '2' 
```

> !ENTRY org.eclipse.e4.ui.workbench 4 0 2012-07-19 19:22:13.859 !MESSAGE 无法从捆绑包 '2' 加载类 'be.yt.diepvriezer.ui.handlers.ExitHandler' ！堆栈 0 java.lang.ClassNotFoundException: be.yt.diepvriezer.ui.handlers.ExitHandler at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501) at org.eclipse.osgi.internal.loader.BundleLoader .findClass(BundleLoader.java:421) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107 ) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247) .....

对于我在应用程序模型中创建的每个处理程序和部件，依此类推。

我检查了 build.properties 和清单文件，一切都在那里。

有人可以指出我正确的方向如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T17:01:33.380

有时您需要使用“-clean”启动应用程序，或定义“osgi.clean=true”以确保清除缓存的依赖项。在干净的工作区中启动将具有相同的效果（无缓存值）：

“OSGi 框架和 Eclipse 运行时使用的任何缓存数据都将被清除干净。这将清除用于存储捆绑依赖解析和 Eclipse 扩展注册表数据的缓存。使用此选项将强制 Eclipse 重新初始化这些缓存。”

更多信息[在这里](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:25:09.110

没有解决方案，只是需要检查：

当您查看`plugins/`导出产品的子目录时，它是否包含您的插件`be.yt.diepvriezer.ui.handlers.ExitHandler`？如果没有，则需要将该插件添加到产品中。当您从 IDE 中启动 RCP 产品时，通常会包含工作区中的所有插件，但是当您导出产品时，您确实需要列出您真正想要包含在`*.product`文件中的所有插件（直接或通过`*.feature`s）

当您解压缩该插件 jar 文件时，`...ExitHandler`该类真的在那里吗？如果不是，则产品导出失败。

`Application.e4xmi`那是指您`..ExitHandler`在与代码相同的插件中吗？如果不是，则`..ExitHandler`包含`Application.e4xmi`.

# android - 如何拖放视频？

> ID：11566416
> 
> 赞同：0
> 
> 时间：2012-07-19T17:43:51.030
> 
> 标签：android, video, drag-and-drop

我正在编写一个应用程序，我想在其中显示来自服务器的视频。视频通过 VideoView 正确显示。视频并没有占用所有空间，它实际上是左下角的一个小方块。现在我想为这个视频添加容量以进行拖放。当它被拖动时，我希望视频继续流畅地播放。你是怎样做的 ？

# javascript - Javascript / Amazon s3 - 通过threejs加载javascript文件时访问控制源错误

> ID：11566421
> 
> 赞同：0
> 
> 时间：2012-07-19T17:44:10.290
> 
> 标签：javascript, ajax, json, amazon-s3, three.js

我在 amazon s3 上托管了一些大文件，我希望我的网站能够通过 threejs 加载调用加载。但是，当我为这些文件调用加载时，我收到一个错误，即由于访问控制允许来源而不允许加载。我的负载调用是这样的：

```
loader = new THREE.JSONLoader();
loader.load("https://s3.amazonaws.com/folder/shoot-o.js",function(geometry){
    //DO STUFF
}); 
```

我如何访问这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:03:34.023

我知道让它与三个加载器一起工作的唯一方法是让服务器发送一个`Access-Control-Allow-Origin: yourdomain.com`包含您托管文件的标头。我不知道这在 s3 上是否可行。

您也可以尝试使用 JSONP（带有 Padding 的 JSON），例如：

```
var head = document.getElementsByTagName("head")[0];
var script = document.createElement("script");
script.src = "https://s3.amazonaws.com/folder/shoot-o.js";
head.appendChild(script); 
```

然后修改您的 js 文件，以便 JSON 数据由 js 函数调用包装：

```
loadJSON({yourData: true, ...}); 
```

并实现该`loadJSON`函数，以便它接受 JSON 数据作为第一个参数并用它来做你的事情。

[这是关于三个加载程序的问题的讨论](https://github.com/mrdoob/three.js/issues/475)

# sql-server - 使此函数返回不同的结果

> ID：11566422
> 
> 赞同：1
> 
> 时间：2012-07-19T17:44:11.490
> 
> 标签：sql-server, stored-procedures

好的，所以我知道这是一个大程序，但我的问题很简单。我试图从中获取一个 Bond 实例，但由于我是管理员，它给了我每个实例乘以与该机构相关的系统中的用户数。这发生在 OR EXISTS 语句所在的底部。我只需要帮助弄清楚如何将结果限制为每个债券的 1 个，同时仍然获得所需数量的正确结果，这就是为什么需要单独的连接语句的原因。

```
ALTER PROCEDURE dbo.GetBondAmounts
    (
    @Username varchar(20)
    )
AS
    SELECT Bond.ID BondID, (ISNULL(Powers.Amount,0) + ISNULL(Charges.Amount,0)) BondAmount,
    (ISNULL(BondFee.Amount,0) + ISNULL(Powers.Premium,0) + ISNULL(Charges.Premium,0)
    + ISNULL(Forfeiture.CostOfApprehension,0) + ISNULL(Forfeiture.AmountPaid,0) + Bond.StateTax) BondTotal,
    (ISNULL(BondFee.Amount,0) + ISNULL(Powers.Premium,0) + ISNULL(Charges.Premium,0)
    + ISNULL(Forfeiture.CostOfApprehension,0) + ISNULL(Forfeiture.AmountPaid,0) + Bond.StateTax
    - ISNULL(BalanceForgiveness.Amount,0) - ISNULL(Payment.Amount,0)) BondBalance
    FROM Bond
    LEFT OUTER JOIN UserAgency ON Bond.Agency = UserAgency.Agency
    LEFT OUTER JOIN
    (
        SELECT BondID, SUM(AmountForgiven) Amount
        FROM BalanceForgiveness
        GROUP BY BondID
    ) AS BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(Amount) Amount
        FROM BondFee
        GROUP BY Bond
    ) AS BondFee ON Bond.ID = BondFee.Bond
    LEFT OUTER JOIN
    (
        SELECT Powers.Bond, SUM(Charge.BondAmount) Amount,
        ISNULL(SUM(Charge.BondPremium), 0) Premium
        FROM Powers INNER JOIN Charge ON Powers.Surety = Charge.PowerSurety
        AND Powers.PowerPrefix = Charge.PowerPrefix AND Powers.PowerNumber = Charge.PowerNumber
        GROUP BY Bond
    ) AS Powers ON Bond.ID = Powers.Bond
    LEFT OUTER JOIN
    (
        SELECT BondID, SUM(BondAmount) Amount, SUM(BondPremium) Premium
        FROM ChargeWithoutPower
        GROUP BY BondID
    ) AS Charges ON Bond.ID = Charges.BondID
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(CostOfApprehension) CostOfApprehension, SUM(AmountPaid) AmountPaid
        FROM Forfeiture
        GROUP BY Bond
    ) AS Forfeiture ON Bond.ID = Forfeiture.Bond
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(Amount) Amount
        FROM Payment
        GROUP BY Bond
    ) AS Payment ON Bond.ID = Payment.Bond
    WHERE UserAgency.Username = @Username
    OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:22:42.983

好的，所以我找到了我自己的问题的答案。我只需要使 UserAgency 与其他加入相同。这是它的外观：

```
LEFT OUTER JOIN
(
    SELECT Agency, Username FROM UserAgency
    WHERE Username = @Username
) AS UserAgency ON Bond.Agency = UserAgency.Agency 
```

# asp.net - ASP.NET 2.0 不处理 IIS 7 下的静态文件

> ID：11566423
> 
> 赞同：2
> 
> 时间：2012-07-19T17:44:16.863
> 
> 标签：asp.net

我们最近从 Windows 2003 服务器上的 IIS 6 迁移到 Windows 2008 服务器上的 IIS 7。我们的应用程序使用 ASP.NET Framework 2.0 和自定义表单身份验证模块。

我们遇到的问题是 ASP.NET 正在处理本机 ASP.NET 文件类型（例如 .aspx），而不是静态文件（图像、文档、pdf 等）。因此，当用户访问我们的网站时，他们会收到登录提示。但是，如果他们直接访问文件，则不会提示登录，而是会收到该文件。这是我们在根文件夹下有一个受限文件夹的主要问题。根目录不安全，但受限文件夹是安全的，并且我们在主页上有直接指向该文件夹中文件的文档链接（您现在可以看到用户如何直接访问文件）。

我们的网站设置为使用经典模式，如下文所述。我们已按照说明进行操作，但我们的静态文件仍未得到保护。

[http://learn.iis.net/page.aspx/508/wildcard-script-mapping-and-iis-integrated-pipeline/](http://learn.iis.net/page.aspx/508/wildcard-script-mapping-and-iis-integrated-pipeline/)

请注意：此过程适用于我们的本地计算机（Windows 7、IIS7）。但是，当在我们的服务器上执行完全相同的步骤时，我们不会被提示登录静态文件。

# ember.js - 在 Ember 上使用过渡

> ID：11566424
> 
> 赞同：0
> 
> 时间：2012-07-19T17:44:18.537
> 
> 标签：ember.js, css-transitions

我一直在使用 jquery 插件在我的视图上创建过渡，并决定在 CSS 级别使用类名创建它们。

我想收到反馈/意见，了解哪种方式最适合在视图级别集成转换。

选项1）

```
App = Em.Application.create({

  customEvents: {
    webkitTransitionEnd: 'transitionEnd'
  }
});

Em.View.extend({

  transitionEnd: function(event) {
    // write you APP logic. TransitionEnd will fire multiple times for each transitioned CSS property
  },

}); 
```

选项 2)

```
Em.View.extend({

  transitionEnd: function(event) {
    // write you APP logic. TransitionEnd will fire multiple times for each transitioned CSS property
  },

  didInsertElement: function() {
    this._super();

    self.$().on('webkitTransitionEnd', function(event) {
      self.transitionEnd(event);
    });

  })

}); 
```

有什么意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:55:05.383

最后，我添加了由 eventDispatcher 管理的 webkitTransitionEnd 事件，并通过以下方式使用它：

```
Yn.Modal = Em.Mixin.create({

  isHidden: true,
  classNameBindings: ['isHidden'],
  classNames: ['modal'],

  transitionEnd: function(event) {
    // transitionEnd fires multiple times

    if ( event.originalEvent.propertyName === '-webkit-transform' ) {
      var eventName = this.get('isHidden') ? 'transitionHide' : 'transitionShow' ;
      this.fire(eventName);
    }

  }

}); 
```

# uiviewcontroller - 如何继承 UIViewController 的子类

> ID：11566427
> 
> 赞同：0
> 
> 时间：2012-07-19T17:44:22.337
> 
> 标签：uiviewcontroller, subclass

我难住了！这应该很简单...

我创建了 UIViewController 的子类（称之为 alphaVC 类）。这将有几个“通用”方法。但是，当我尝试创建 alphaVC 的子类（称为 betaVC，使用特定方法）时，如果我使用 [ @interface betaVC 手动创建 .h ，则在 New File/Objective C class/Subclass of ... 下无法识别 alphaVC： alphaVC ] 它不会编译，抱怨没有像 alphaVC 这样的类。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:22:21.723

对不起大家。

我手动重建了 .h 文件，一切似乎都正常。太阳黑子或脑放屁都是问题所在。

在 New File/Objective C class/Subclass of... 下拉列表中仍然看不到 alphaVC。

# python - 需要机器学习方法：在给定特征向量中的所有其他特征的情况下预测最可能的特征值

> ID：11566429
> 
> 赞同：0
> 
> 时间：2012-07-19T17:44:27.067
> 
> 标签：python, machine-learning, classification

我需要一种合适的机器学习方法，它可以告诉我特征向量中的特征最可能的值，给定该向量中其他特征的组合（以及从训练集中获得的知识）。我的特征向量可以包含数千个特征。然而，真正可能发生的特征组合只有极少数。我希望分类器学习这些似是而非的组合。

玩具示例：如果我的训练向量是 (0,1,2), (1,1,2), (2,2,2)，那么分类器应该预测对于未知项目 (3,1,x) x 的可能值为“2”。

请注意，在给定向量中其他特征的 (n-1) 个值的情况下，分类器应该能够对向量中的每个特征进行此类预测。

我已经尝试过朴素贝叶斯分类器……但这仅告诉我给定特征向量最可能的类别……而不是传入特征向量中特定特征的可能值。

谁能建议一种合适的方法来为我做这件事？理想情况下参考Python中合适的包？

谢谢和亲切的问候-

拍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:50:07.460

看看[Scikit-Learn](http://scikit-learn.org/stable/supervised_learning.html)中提供给您的内容。您正在寻找的是其中包含“回归”一词的任何内容（与分类相对）。我将从线性回归作为您的基线开始，并根据您可以负担的计算尝试一些其他回归技术。

# vba - 保留导入数据的关系

> ID：11566433
> 
> 赞同：1
> 
> 时间：2012-07-19T17:44:33.410
> 
> 标签：vba, ms-access, ms-access-2010

在解释我的代码问题之前，我将从背景故事开始。我正在使用 MS Access 2010。我已经能够导入包含两列的数据表。然后，我能够通过向导入的表中添加具有适当值的字段来管理数据。现在，我需要获取整理表并将其集成到我的数据库中。但是，我不能使用任何 Microsoft 内置查询，因为这些似乎都不能满足我的需要。集成将表格分开，是的，但它需要**保留**每条记录中数据的关系。

为此，我一直在用 VBA 编写一些代码：

```
Function IntegrateNIRData(curatedTable, queryRecords)

    On Error GoTo Error_Handler
    Dim db As DAO.Database
    Dim rsCuratedTable, rsDBRecords As DAO.Recordset
    Dim iCount As Integer

    Set db = CurrentDb()
    Set rsCuratedTable = db.OpenRecordset(curatedTable, dbOpenTable) 'open the recordset for use (table, Query, SQL Statement)
    Set rsDBRecords = db.OpenRecordset("NIR_Samples_verify", dbOpenDynaset, dbExecDirect, dbOptimisticValue)

    With rsCuratedTable
        If Not (.BOF And .EOF) Then
            Do While Not .EOF
                ' Rest of your code here.
                rsDBRecords.AddNew
                    'Assign Fields here.
                    rsDBRecords![Product Name] = rsCuratedTable![productName]
                    rsDBRecords![Lot Number] = rsCuratedTable![lotNumber]
                    rsDBRecords!counts = rsCuratedTable![counts]
                    rsDBRecords![subsets] = rsCuratedTable![subsets]
                    rsDBRecords![Date Taken] = rsCuratedTable![dateTaken]
                rsDBRecords.Update
                rsDBRecords.Bookmark = rsDBRecords.LastModified
                .MoveNext
            Loop
        End If
    End With

    rsCuratedTable.Close 'Close the recordset
    rsDBRecords.Close 'Close the recordset

Error_Handler_Exit:
    On Error Resume Next
    'Cleanup after ourselves
    Set rs = Nothing
    Set db = Nothing
    Exit Function

Error_Handler:
    MsgBox "MS Access has generated the following error" & vbCrLf & vbCrLf & "Error Number: " & _
    Err.Number & vbCrLf & "Error Source: IntegrateNIRData" & vbCrLf & "Error Description: " & _
    Err.Description, vbCritical, "An Error has Occured!"
    Resume Error_Handler_Exit

End Function 
```

该函数挂在这一行，第二个 OpenRecordset：

```
Set rsDBRecords = db.OpenRecordset("NIR_Samples_verify", dbOpenDynaset, dbExecDirect, dbOptimisticValue) 
```

据我了解，这可能与 Workspaces 和 Jet 引擎不接受跨越多个表的 ms 查询有关。当然，我也可能会走投无路。在这一点上的任何建议都会非常受欢迎。

更新：

你们中的一些人提出了类似的问题，所以我觉得我应该澄清以下几点：

1) NIR_Samples_verify 是一个 MS 访问选择查询，它从数据库中的几个表生成一个记录表。

2) 根据我在 OpenRecordset 方法中设置 RecordsetOptionEnum 和 LockTypeEnum 的内容，我不断收到两个错误。一是错误号 3027 数据库是只读的 二是错误号 3001 无效参数

3）据我了解，其余代码应该没问题，只是导致问题的 OpenRecordset 方法。

更新 2：

我在想也许访问不能做我想做的事。让我来说明一下。如果我有两个表都有主键，并且这些键在第三个表中引用，该表链接这两个表导致多对多关系，那么代码不仅需要将新数据添加到这两个表中，而且还在第三张表中生成适当的记录，以维护数据中的关系。希望从那以后。我确实很欣赏这些帮助和经验。

更新 3：

一直在网上搜索，发现如下：

从[这篇文章](http://rogersaccessblog.blogspot.com/2009/11/this-recordset-is-not-updateable-why.html)中它说查询仅在以下情况下可更新：1）它基于单个表。2）它基于基于单个表的查询。3) 它基于基于具有一对一关系的表的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:01:09.083

不知道内容`NIR_Samples_verify`是什么，我会高度怀疑`dbExecDirect`

从帮助文件

**dbExecDirect**

> “通过跳过 SQLPrepare 并直接调用 SQLExecDirect（仅限 ODBCDirect 工作区）运行查询。仅当您不基于参数查询打开记录集时才使用此选项。有关详细信息，请参阅“Microsoft ODBC 3.0 程序员参考”。“

我没有看到您提供任何参数。

**- 编辑 -**

通常我会像这样打开一个记录集

```
Set rsDBRecords = db.OpenRecordset("select bar from foo where bar > 10", _
                                    dbOpenDynaset, _
                                    dbSeeChanges) 
```

（特别是如果我想更改数据初始化）

希望这会让你在你的项目中走得更远。

**-- 编辑 2 --**

听起来`NIR_Samples_verify`编辑起来很复杂。实际上，考虑到它是多个表的连接，`Add`它没有多大意义，`Update`在某些情况下可能有意义。

Your ultimate solution is really going to be doing multiple Adds on multiple record sets (one for each table being referenced in `NIR_Samples_verify`); much like if you were entering the data into the DB by hand. You add the records that aren't dependant on anything else first (remembering to grab keys to use in the dependant tables).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:31:58.097

As it turns out my hunch was correct. The problem had to do with MS Access having updatable and non-updatble queries (See my edits of the question). The main problem was not only does Microsoft not make this information apparent, but there is no master list on their site either. Thank you everyone for the help. Feel free to see [this article](http://rogersaccessblog.blogspot.com/2009/11/this-recordset-is-not-updateable-why.html) for more details.

# http - 为用户与其他实体交互构建 URL 的 RESTful 方式是什么？

> ID：11566436
> 
> 赞同：4
> 
> 时间：2012-07-19T17:44:38.657
> 
> 标签：http, rest, restful-url, restful-architecture

我试图弄清楚为用户与其他实体交互构建 URL 的正确 RESTful 方式是什么？

例如，我有三个实体`users`：`posts`和`tags`。

您如何表示“用户喜欢帖子”、“用户关注标签”或“用户关注用户”。

这是我的想法，但我不确定这是否是正确的方法：

`POST /user/:id/like/post/:id`（用户喜欢帖子）

`POST /user/:id/follow/user/:id`（用户关注另一个用户）

看起来很语义化，但我不确定 POST 方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:12:52.360

公平警告：我也是 REST 的新手。

摘自Leonard Richardson 和 Sam Ruby的[RESTful Web Services的一些一般性评论：](http://shop.oreilly.com/product/9780596529260.do)

*   使用复数作为您的资源名称
*   如果服务器控制资源的身份，则对资源名称使用 POST
*   如果客户端控制资源的身份，则使用 PUT 到资源/：id

将其应用于您的情况，我可以看到以下资源

*   /users : 用户列表
*   /users/{id} : 特定用户
*   /users/{id}/tags : 此特定用户使用的标签列表
*   /users/{id}/posts : 此特定用户喜欢的帖子列表
*   /users/{id}/follows ：此特定用户关注的用户列表

要将帖子添加到用户喜欢的帖子中，我会 POST 到`/users/{id}/posts`要添加到请求正文中喜欢的帖子列表中的帖子的标识。

与记录用户 1 现在也关注用户 200 和 300 类似，我将`/users/{id}/follows`在请求正文中使用这些用户的标识进行 POST。

毕竟，您没有提供用户 1 和其他两个用户之间的关系标识，而是添加了两个新的关系资源，分别具有用户 200 和用户 300 作为其“关注用户”属性。

支持您的应用程序的数据库很可能有一个 Users 表、一个 Posts 表和一个 Likes，其中当您记录用户喜欢 Post 时，Likes 表是被添加到的表。并且点赞记录的标识不会是用户的标识，也不是帖子的标识，而是有自己的标识（单独或作为用户和帖子标识的组合）。

即使您将用户喜欢的帖子存储在关系模型之外的其他东西中，甚至可能没有单独的点赞标识，每个点赞的标识仍然是用户和帖子的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:36:06.620

RESTful 接口有一个众所周知的 URL 作为起点。响应中提供的超媒体控件应从那里访问所有其他操作和实体。从这个意义上说，URL 结构根本不重要，对客户端也不重要。它们可能是完全不透明的（例如，像[http://bit.ly/9xhUgg](http://bit.ly/9xhUgg)）并且客户端仍然可以工作。

这里有一些有用的读物​​：

*   [理查森成熟度模型](http://www.martinfowler.com/articles/richardsonMaturityModel.html)
*   [只需三个简单步骤的 RESTful 超媒体 API](http://www.amundsen.com/blog/archives/1041)

话虽如此，从服务器实现的角度来看，使用您建议的结构会更容易。就像是：

```
GET /

<myapplication href="/">
    <users href="/users"/>
    <posts href="/posts"/>
    <tags href="/tags"/>
</myapplication>

GET /users

<users href="/users">
    <user username="johndoe" href="/users/1234"/>
    <user username="janedoe" href="/users/1235"/>
    <next href="/users?page=2"/>
    <search href="/users">
        <name type="string" cardinality="required"/>
    </search>
</users>

GET /users?page=2

<users href="/users">
    <user username="bobgeldof" href="/users/1236"/>
    <user username="biancajager" href="/users/1237"/>
    <next href="/users?page=3"/>
    <prev href="/users"/>
    <search href="/users">
        <name type="string" cardinality="required"/>
    </search>
</users>

GET /users/1236

<user username="bobgeldof" href="/users/1236">
    <posts-liked href="/users/1236/posts"/>
    <tags-followed href="/users/1236/tags"/>
    <users-followed href="/users/1236/users"/>
    <like-post href="/users/1236" method="PUT">
        <post type="URL" cardinality="required"/>
    </like-post>
    <follow-tag href="/users/1236" method="PUT">
        <tag type="URL" cardinality="required"/>
    </follow-tag>
    <follow-user href="/users/1236" method="PUT">
        <user type="URL" cardinality="required"/>
    </follow-user>
</user> 
```

重要的是，当一篇文章被点赞、标签或用户被关注时，文章、标签或用户的 URI 是作为参数提交的，而不是 ID。顺便说一句，我将 PUT 用于这些操作的原因是该操作是幂等的。如果不是，我会改用 POST 。

```
GET /users/1236/posts

<liked-posts href="/users/1236/posts">
    <post href="http://stackoverflow.com/questions/11566436" title="What's the RESTful way to structure an URL for user interactions with other entities?">
        <unlike href="/users/1236/posts?href=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F11566436" method="DELETE"/>
    </post>
    ...
    <next href="/users/1236/posts?page=2"/>
</liked-posts>

GET /users/1236/users

<followed-users href="/users/1236/users">
    <user username="biancajager" href="/users/1237">
        <unfollow href="/users/1236/users?href=%2Fusers%2F1237" method="DELETE">
    </user>
    <user username="Jorge Pedret" href="http://stackoverflow.com/users/201092/jorge-pedret">
        <unfollow href="/users/1236/users?href=http%3A%2F%2Fstackoverflow.com%2Fusers%2F201092%2Fjorge-pedret" method="DELETE"/>
    </user>
    <next href="/users/1236/users?page=2"/>
</followed-users> 
```

我真正喜欢上面的事情（除了它是真正的 RESTful 之外）是因为您使用的是 URL 而不是 ID，所以您可以喜欢和关注其他系统中的帖子和用户。:)

# java - 使用命令行通过 Java File 编译文件

> ID：11566437
> 
> 赞同：2
> 
> 时间：2012-07-19T17:44:46.853
> 
> 标签：java, compiler-construction, cmd, tar

我正在寻找编译 java 文件的方法，我知道您可以使用命令行从命令行编译 Java 文件`javac Test.java`，但是有没有办法将此调用传递给命令行？

还有一种方法可以让命令行以相同的方式编译 .tar 文件……比如`javac -tar Test.tar`（从 java 文件传递​​命令）……或者最好的方法是什么？

抱歉，我不太擅长 cmd 命令

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:08:58.550

Java 提供了一个[接口](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)来从程序中调用编译器。

```
JavaCompiler compiler = ToolProvider
    .getSystemJavaCompiler();

StandardJavaFileManager fileManager = compiler
    .getStandardFileManager(null, null, null);

Iterable<? extends JavaFileObject> compilationUnits = fileManager
    .getJavaFileObjectsFromStrings(Arrays.asList("MyClass.java"));

compiler.getTask(null, fileManager, null, null, null, compilationUnits).call();

fileManager.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:49:10.780

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("javac Test.java"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T17:49:48.403

您可以使用 Runtime 类从 Java 运行系统命令，例如

```
Process p = Runtime.getRuntime().exec("javac Test.java"); 
p.waitFor(); 

BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream())); 
String line; 
while((line = reader.readLine()) != null) { 
    System.out.println(line); 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T17:55:12.430

尝试这个....

```
Process p = Runtime.getRuntime().exec("javac Test.java"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T17:50:22.383

我相信您在问如何将编译命令从 java 文件传递​​到命令行以编译另一个 java 文件。这将像您对命令行执行任何其他命令一样完成。在我看来，我对所有事情都使用进程构建器，但是，这是一个很好的例子，说明何时使用`.exec()`和传递你的命令行编译命令作为字符串。

# java - 解释动态绑定和静态方法

> ID：11566441
> 
> 赞同：4
> 
> 时间：2012-07-19T17:44:55.407
> 
> 标签：java

我对私有方法如何可以是静态的而公共方法必须是动态绑定的有点困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T18:02:04.227

动态绑定意味着在运行时决定运行哪些代码。这是多态性的基础。

公共、包访问和受保护方法是动态绑定的。子类可以覆盖这些方法并提供替代实现。私有方法不能被覆盖，因此它们不需要动态绑定。

静态方法不是动态绑定的（名称中的线索），因为它们是在类本身上定义的，而不是对每个对象都是唯一的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T18:36:09.260

**动态绑定或后期绑定**

*动态绑定*是指编译器无法解析调用并且绑定仅在运行时完成的情况。让我们试着理解这一点。假设我们有一个名为的类`SuperClass`，另一个名为`SubClass`扩展它的类。现在`SuperClass`也可以将引用分配给该类型的对象`SubClass`。如果我们有一个方法（比如`someMethod()`）`SuperClass`，我们在其中覆盖，`SubClass`那么对该引用的该方法的调用`SuperClass`只能在运行时解析，因为编译器无法确定该引用将指向什么类型的对象运行。

```
...
SuperClass superClass1 = new SuperClass();
SuperClass superClass2 = new SubClass();
...

superClass1.someMethod(); // SuperClass version is called
superClass2.someMethod(); // SubClass version is called
.... 
```

在这里，我们看到尽管对象引用`superClass1`和`superClass2`都`SuperClass`只是类型，但在运行时它们分别引用了 SuperClass 和 类型的对象`SubClass`。

因此，在编译时，编译器无法确定`someMethod()`对这些引用上的方法的调用是否实际引用了该方法的哪个版本——超类版本或子类版本。

因此，我们看到 Java 中的动态绑定只是根据实际对象类型绑定方法调用（仅继承方法，因为它们可以在子类中被覆盖，因此编译器可能不确定要调用哪个版本的方法）和不在对象引用的声明类型上。

* * *

**静态绑定或早期绑定**

如果编译器只能在编译时解析绑定，那么这种绑定称为静态绑定或早期绑定。所有实例方法调用总是在运行时解析，但所有静态方法调用都在编译时解析，因此我们对静态方法调用进行了静态绑定。因为静态方法是类方法，因此可以使用类名本身来访问它们（实际上，它们被鼓励仅使用相应的类名而不是使用对象引用来使用），因此需要解析对它们的访问在编译时只使用编译时类型信息。这就是静态方法实际上不能被覆盖的原因。阅读更多——[你能在 Java 中重写静态方法吗？](http://geekexplains.blogspot.com/2008/06/can-you-override-static-methods-in-java.html)

*对 Java 中所有成员变量的访问遵循静态绑定，因为 Java 不支持（事实上，它不鼓励）成员变量的多态行为。*

[除了这个讨论，你不能覆盖Java 中的*静态*（如上面的链接所述）、*私有*和*最终*方法。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:35:58.433

如果您不需要方法中的`this`引用`private`，您也可以制作它`static`，它不会有任何区别。在任何一种`private`情况下都不需要动态绑定方法，因此在实现级别上，您选择哪种方法真的无关紧要。但是，当您标记方法时，它有助于提高可读性，`static`从那时起，很明显该方法不依赖于对象的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T18:04:53.240

静态方法是类级别的方法，因此您只能通过类名访问，但方法必须是公共的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T18:10:48.207

**1.**在**类多态**中，子类的**对象引用变量作为参数传递给接受参数的方法，该参数是超类类型的对象引用变量**。`Public and Protected and Default members can be dynamically bounded`, **private 成员不是不被继承**。

**2.静态成员是类的，它不绑定**到任何单个对象，所以它不是动态绑定的。

# java - Java Jersey 可以将 HeaderParam 和 FormParam 注入到类私有变量中吗？

> ID：11566442
> 
> 赞同：2
> 
> 时间：2012-07-19T17:44:58.087
> 
> 标签：java, rest, jersey

我写了以下代码：

> 公共类 UserAccountWebServices {
> 
> ```
> @Context
> protected HttpHeaders httpHeaders;
> 
> @HeaderParam("Authorization")
> private String authorization;
> 
> @FormParam("UserAccountIdentifier")
> private String userAccountIdentifier; 
> ```
> 
> ...

问题是我的类变量（授权和 userAccountIdentifier）被标记为“私有”并且 IntelliJ IDEA 标记了一个警告 - 说它们从未被分配。在编译和运行它之前我还有很长的路要走，所以如果有人能告诉我它是否可以工作，我将不胜感激 - 注入私有变量？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:35:15.010

是的，这有效（假设您使用的是泽西岛）。

# xsd - XML 模式类型

> ID：11566447
> 
> 赞同：1
> 
> 时间：2012-07-19T17:45:24.850
> 
> 标签：xsd

如果我有一个元素，动物：

```
<animal name="dog"/> 
```

可以将以下内容作为 name 属性的值：

*   狗
*   猫
*   鸟
*   $(ANY_STRING)

其中 $(ANY_STRING) 是一个简单的名称、值替换，某些软件将在稍后执行和验证（ANY_STRING 实际上是任何字符串）。这个元素的 XML Schema 是什么样的？限制三个已知名称很容易：

```
 <xs:simpleType name="AnimalNames">
    <xs:restriction base="xs:string">
      <xs:enumeration value="dog"/>
      <xs:enumeration value="cat"/>
      <xs:enumeration value="bird"/>
    </xs:restriction>
  </xs:simpleType> 
```

限制 $(ANY_STRING) 本身同样容易（使用 xs:pattern 来限制）。但是由于属性可能只是简单类型，是否可以指定该属性可能在枚举列表或 $(ANY_STRING) 值中？

我考虑过的另一个选择是限制以下模式：

```
<xs:pattern value="dog|cat|bird|$(.*)"/> 
```

尽管随着可能值列表的增加，这变得非常讨厌。

当然，最简单的选择是只声明一个字符串类型，但我想限制更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:42:53.703

定义像这样的半封闭列表的一种方法是使用一组为文档明确指定的众所周知的值，然后使用转义影线来允许其他字符串，是使用您的`AnimalNames`类型的联合定义您的属性和xs:NMTOKEN 或 xs:Name （或任何内置或用户定义的类型最能捕捉您对未枚举的其他名称的约束）。

正如 guidot 在他的评论中指出的那样，这样的联合接受与其最具包容性的成员类型相同的一组值，因此对于其唯一目的是把关的模式来说，它是没有意义的。该技术对于文档和类型驱动的分派很有用（如果验证成员类型是`AnimalNames`做 X，否则做 Y）。

为了适应不提供有关哪个成员类型验证联合类型的特定值的信息的模式验证器，一些词汇设计者按照 guidot 的建议进行操作，并提供两种元素类型，一种用于已知/预测/预期的动物名称，另一种用于对于其他名称。或者他们将类型指定`AnimalNames`为接受字符串`dog`、`cat`、`bird`和`other`，将属性定义`name`为具有类型`AnimalNames`，并定义另一个属性（称为`other-name`），该属性被定义为当且仅当 时才有意义`name="other"`。所以狗被描述为

```
<animal name="dog"/> 
```

和仓鼠

```
<animal name="other" other-name="hamster"/> 
```

这使得在仍然接受其他名称的同时特别处理众所周知的名称变得相当简单。

# ios - iPhone 切片 Photoshop 模板

> ID：11566448
> 
> 赞同：0
> 
> 时间：2012-07-19T17:45:27.670
> 
> 标签：ios, photoshop

我对构建 iPhone 应用程序相当陌生。我有一个带有我想使用的模板的 psd 文件。人们通常如何获取模板并轻松地从中获取图像？有更简单的方法吗？Photoshop 中的其他工具或某些功能？

如果对此有其他讨论，请告诉我，因为我找不到任何此类信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:30:51.590

网上有这方面的一些教程。但是您可以在 Photoshop 中完成所有这些操作：

[http://www.mygeekpal.com/how-to-slice-a-psd-file/](http://www.mygeekpal.com/how-to-slice-a-psd-file/)

# jquery - 数据表在 fnReloadAjax 上保留现有的 fnServerParams

> ID：11566449
> 
> 赞同：1
> 
> 时间：2012-07-19T17:45:29.900
> 
> 标签：jquery

我正在尝试修改 fnReloadAjax 以保留我之前设置的现有 aoData

```
 fnServerParams:function(aoData) {
     var serializedForm = $('form#searchform').serializeArray();
     for (var n in serializedForm) {
        var tmpobj = serializedForm[n];
        var key = tmpobj['name'];
        var value = tmpobj['value'];
        aoData.push({"name":key,"value":value});
     }
} 
```

他们被重置

```
$.fn.dataTableExt.oApi.fnReloadAjax = function ( oSettings, sNewSource, fnCallback,bStandingRedraw )
...
...
...
var aData = []; # reset here 
```

如何获取现有的 aData 参数而不是将它们重置为空数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:06:03.387

fnReloadAjax() 不适用于 bServerSide = true

# c# - 如何按列名获取一行

> ID：11566450
> 
> 赞同：0
> 
> 时间：2012-07-19T17:45:33.453
> 
> 标签：c#, odbc, text-driver

我正在尝试按名称而不是按序号获取列值。这是我已经拥有的代码：

```
SELECT trim([Workitem Id]) as [Workitem Id1] from 1.csv 
```

以上是查询

```
rrm.id = oDR["Workitem Id"] == DBNull.Value ? string.Empty : oDR["Workitem Id"]; 
```

当我运行这个查询时，我得到了参数太少的预期错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:48:43.803

你的列名其实`Workitem Id1`是不是？

# app-store - 蹲App ID？

> ID：11566458
> 
> 赞同：0
> 
> 时间：2012-07-19T17:45:59.797
> 
> 标签：app-store

我刚刚在我的 Apple 开发人员帐户的配置门户中注册了应用程序 ID“com.rovio.angrybirds2”（出于好奇）。这是否意味着 Rovio 无法收购 com.rovio.angrybirds2？

为什么允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:57:46.277

注册应用名称时，如果我没记错的话，你有3个月的时间上传二进制文件，否则应用名称将被删除并再次免费。

除此之外，如果您有机会提交并获得苹果团队的批准，Rovio 只需一个电话即可删除您的应用程序。

我不会玩这个，您可能会阻止或暂停您的开发帐户，我认为这显然违反了应用程序批准的苹果政策（您可以在 iTunes Connect 中找到。

[应用审查资源链接](https://developer.apple.com/appstore/resources/approval/appreview.html)

引用：“如果您试图欺骗系统（例如，通过试图欺骗审核流程、窃取用户数据、复制其他开发人员的工作或操纵评级），您的应用程序将从商店中删除，您将被驱逐出境来自开发者计划。”

# selenium - 将 Image Magick 与 Junit 和 Selenium 一起使用

> ID：11566459
> 
> 赞同：1
> 
> 时间：2012-07-19T17:46:04.110
> 
> 标签：selenium, imagemagick, jmagick

有人可以指导我如何在设计自动化可视化测试时使用 image magick 或 jmagick。

基本上我想自动比较 Web 应用程序的屏幕截图（新旧）。

我已将 Selenium 配置为在 Eclipse 中使用 junit 核心运行。我仍在考虑如何在此配置中使用图像魔法。有链接吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:57:31.073

要使用最简单的命令直观地将参考屏幕截图与要测试的屏幕进行比较，只需运行这个（或将其转换为 jmagick 中的等效项）：

```
 compare reference.jpeg to-be-tested.jpeg -compose src diff.jpeg 
```

*   如果两者在视觉上相等，您的*diff.jpeg*将是白色图像。
*   如果两者在视觉上有所不同，则*diff.pdf*将用红色像素标记差异（而白色像素仍然意味着：“这里没有区别”）。

**例子**

![右边：](../Images/eed2cab871d7743bd46cd4a7205482a6.png)

另请参阅[**Imagemagick ：“区分”图像**](https://stackoverflow.com/a/11362152/359307)。

# windows-phone-7 - MvvmCross 和 WP7 辅助磁贴

> ID：11566460
> 
> 赞同：2
> 
> 时间：2012-07-19T17:46:07.763
> 
> 标签：windows-phone-7, mvvm, mvvmcross

首先，MvvmCross 很棒。和他们一起工作真的很愉快。

我对 WP7 中的辅助图块有一个小问题。我有一个经典的主细节场景，我想为细节（视图/视图模型）做辅助图块。那么如何从 ViewMode 创建辅助图块？

```
public IMvxCommand DetailPinCommand
        {
            get
            {
                return new MvxRelayCommand<Detail>((d) =>
                    {
                        StandardTileData NewTileData = new StandardTileData
                        {
                            Title = d.Name
                            ...
                            ...
                        };

                        ShellTile.Create(new Uri("/Views/DetailView.xaml?DetailId=" + d.ID, UriKind.Relative), NewTileData);

                    });
            }
        } 
```

这在视图模型中是错误的，当然它不起作用......你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:21:49.263

Mvx 包含一个示例服务，它允许添加一些简单的动态磁贴/书签 - [MvxWindowsPhoneLiveTileBookmarkLibrarian.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/WindowsPhone/Platform/Bookmarks/MvxWindowsPhoneLiveTileBookmarkLibrarian.cs)

这目前仅针对 WP7 实现 - 但 Android 和 WinRT 书签将来也可能使用相同的模板。

如果您想使用图书管理员服务，您可以尝试以下操作：

```
IMvxBookmarkLibrarian librarian;
if (!this.TryGetService<IMvxBookmarkLibrarian>(out librarian))
{
    // not much can be done...
    return;
}

var metadata = new BookmarkMetadata()
{
    Title = detail.Name,
};

var uniqueName = "DetailBookmark" + detail.UniqueId;

librarian.AddBookmark(
            typeof(DetailViewViewModel), 
            uniqueName, 
            metadata, 
            new Dictionary<string, string>()
                   {
                       { "detailId", detail.UniqueId }
                   }); 
```

这将调用生成 TileData 和 Xaml Uri 的 WP7 代码 - 要了解 uri 是如何生成的，请参阅[librarian](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/WindowsPhone/Platform/Bookmarks/MvxWindowsPhoneLiveTileBookmarkLibrarian.cs)`GetXamlUriFor`中的代码。

* * *

如果您想“按原样”使用这个现有的示例服务，那么元数据中当前可用的字段是：

```
 public Uri BackgroundImageUri { get; set; }
        public string Title { get; set; }

        public Uri BackBackgroundImageUri { get; set; }
        public string BackTitle { get; set; }
        public string BackContent { get; set; }

        public int Count { get; set; } 
```

但不可否认，这些字段目前非常特定于 WP7 - 例如，我怀疑 Uri 的图像将在不同平台上非常可重用。

* * *

在实践层面上，当我开发任何需要大量自定义动态磁贴的东西时——例如下载的图像——然后我通常会基于现有代码构建一个新的简单 BookmarkLibrarian 服务，这个自定义代码位于 WP7 UI 代码中该项目（并且是注入 ViewModel 的接口）

我发现这种定制方法使书签 API 更加简单，它允许我在 WP7 应用程序项目中（而不是在共享核心项目中）编写特定于 WP7 的逻辑。

* * *

编写自定义书签服务的关键是了解导航 uri 是如何生成的[1](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/WindowsPhone/Platform/Bookmarks/MvxWindowsPhoneLiveTileBookmarkLibrarian.cs) - 参见附近的代码`GetXamlUriFor`- 通过序列化 an`MvxShowViewModelRequest`并添加一个指示此书签唯一名称的查询参数来创建 uri。

* * *

当您以这种方式添加书签后，您可以将 WP7 App.xaml.cs 中的“正常”开始导航代码调整为：

```
 RootFrame.Navigating += (innerSender, args) =>
            {
                if (!_firstNavigation)
                    return;
                _firstNavigation = false;

                var applicationStart = this.GetService<IMvxStartNavigation>();
                if (args.Uri.ToString().Contains("MainPage.xaml")
                    || !applicationStart.ApplicationCanOpenBookmarks)
                {
                    args.Cancel = true;
                    RootFrame.Dispatcher.BeginInvoke(applicationStart.Start);
                }
            }; 
```

此代码允许直接打开书签。

* * *

如果您需要运行任何代码（例如代理）来更新磁贴以使其“生效”，那么您必须自己执行此操作 - 恐怕现在没有任何可用的示例......虽然我现在在 Android 和 WP7 的非 UI 项目中都使用了 Mvx - 所以我知道它可以做到！

# javascript - 单击按钮时，如何触发 jquery datatables fnServerData 通过 AJAX 更新表？

> ID：11566463
> 
> 赞同：18
> 
> 时间：2012-07-19T17:46:09.990
> 
> 标签：javascript, jquery, ajax, triggers, datatables

我将数据表插件与服务器端数据一起使用，并使用 AJAX 更新表。

我的 dataTables 设置如下所示：

```
tblOrders = parameters.table.dataTable( {
    "sDom": '<"S"f>t<"E"lp>',
    "sAjaxSource": "../file.cfc",
    "bServerSide": true,
    "sPaginationType": "full_numbers",  
    "bPaginate": true,
    "bRetrieve": true,
    "bLengthChange": false,         
    "bAutoWidth": false,
    "aaSorting": [[ 10, "desc" ]],      
    "aoColumns": [                      
        ... columns 
                  ],
    "fnInitComplete": function(oSettings, json) {
        // trying to listen for updates
        $(window).on('repaint_orders', function(){
            $('.tbl_orders').fnServerData( sSource, aoData, fnCallback, oSettings );
            });
        },
    "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
        var page = $(oSettings.nTable).closest('div:jqmData(wrapper="true")')
        aoData.push(
            { "name": "returnformat", "value": "plain"},
            { "name": "s_status", "value": page.find('input[name="s_status"]').val() },
            { "name": "s_bestellnr", "value": page.find('input[name="s_bestellnr"]').val() },
            { "name": "form_submitted", "value": "dynaTable" }
            );
        $.ajax({ "dataType": 'json', "type": "POST", "url": sSource, "data": aoData , "success": fnCallback });
        } 
```

我有一些用于过滤数据服务器端的自定义字段，我将其与 AJAX 请求一起推送。问题是，我不知道如何从表外触发 JSON 请求。如果用户输入过滤器，fnServerData 会触发并更新表。但是，如果用户选择表外的控件，我不知道如何触发**fnServerData**函数。

现在，我正在尝试在 fnInitComplete 中触发和收听的自定义事件。虽然我可以检测到用户选择了自定义过滤条件，但我缺少 fnServerData 正确触发所需的所有参数。

**问题**：
有没有办法从实际 dataTables 表之外的按钮触发 fnServerData？

我想我可以尝试在过滤器中添加一个空格，但这并不是一个真正的选择。

感谢您的输入！

**问题**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T05:24:28.217

从[这里](http://datatables.net/forums/discussion/6650/server-side-auto-refresh-table/p1#Comment_25881)的讨论中，Allan（DataTables 人）建议简单地调用 fnDraw 将产生您正在寻找的结果。这是我用于重新加载服务器端内容的方法（通过 fnServerData，这很重要），到目前为止它已经奏效。

```
$("#userFilter").on("change", function() {
    oTable.fnDraw();  // In your case this would be 'tblOrders.fnDraw();'
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T18:07:47.817

我前段时间找到了这个脚本（所以我不记得它是从哪里来的 :( 以及应该归功于谁 :'( ) 但在这里：

```
$.fn.dataTableExt.oApi.fnReloadAjax = function (oSettings, sNewSource, fnCallback, bStandingRedraw) {
    if (typeof sNewSource != 'undefined' && sNewSource != null) {
        oSettings.sAjaxSource = sNewSource;
    }
    this.oApi._fnProcessingDisplay(oSettings, true);
    var that = this;
    var iStart = oSettings._iDisplayStart;
    var aData = [];

    this.oApi._fnServerParams(oSettings, aData);

    oSettings.fnServerData(oSettings.sAjaxSource, aData, function (json) {
        /* Clear the old information from the table */
        that.oApi._fnClearTable(oSettings);

        /* Got the data - add it to the table */
        var aData = (oSettings.sAjaxDataProp !== "") ?
            that.oApi._fnGetObjectDataFn(oSettings.sAjaxDataProp)(json) : json;

        for (var i = 0; i < aData.length; i++) {
            that.oApi._fnAddData(oSettings, aData[i]);
        }

        oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
        that.fnDraw();

        if (typeof bStandingRedraw != 'undefined' && bStandingRedraw === true) {
            oSettings._iDisplayStart = iStart;
            that.fnDraw(false);
        }

        that.oApi._fnProcessingDisplay(oSettings, false);

        /* Callback user function - for event handlers etc */
        if (typeof fnCallback == 'function' && fnCallback != null) {
            fnCallback(oSettings);
        }
    }, oSettings);
} 
```

在调用数据表初始化函数*之前*添加它。然后你可以像这样调用重新加载：

```
$("#userFilter").on("change", function () {
        oTable.fnReloadAjax(); // In your case this would be 'tblOrders.fnReloadAjax();'
    }); 
```

`userFilter`是下拉列表的 ID，因此当它更改时，它会重新加载表的数据。我只是将其添加为示例，但您可以在任何事件上触发它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T10:42:05.943

前面提到的所有解决方案都存在一些问题（例如，附加用户 http 参数未发布或过时）。所以我想出了以下效果很好的解决方案。

扩展函数（我的参数是键值对数组）

```
<pre>
$.fn.dataTableExt.oApi.fnReloadAjax = function (oSettings, sNewSource, myParams ) {
if ( oSettings.oFeatures.bServerSide ) {
    oSettings.aoServerParams = [];
    oSettings.aoServerParams.push({"sName": "user",
        "fn": function (aoData) {
            for (var i=0;i<myParams.length;i++){
            aoData.push( {"name" : myParams[i][0], "value" : myParams[i][1]});
         }
     }});
     this.fnClearTable(oSettings);
     this.fnDraw();
     return;
    }
};
</pre> 
```

用于刷新事件侦听器的示例用法。

```
<pre>
oTable.fnReloadAjax(oTable.oSettings, supplier, val);
</pre> 
```

只需要注意一件事。不要重绘表格，一旦创建，因为它很耗时。因此，请务必仅在第一次绘制它。否则，重新加载它

```
<pre>
var oTable;
if (oTable == null) {
    oTable = $(".items").dataTable(/* your inti stuff here */); {
}else{
    oTable.fnReloadAjax(oTable.oSettings, supplier, val);
}
</pre> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-05T20:29:27.843

在初始化中使用：

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
                    //* Add some extra data to the sender *
                    newData = aoData;
                    newData.push({ "name": "key", "value": $('#value').val() });

                    $.getJSON( sSource, newData, function (json) {
                        //* Do whatever additional processing you want on the callback, then tell DataTables *
                        fnCallback(json);
                    } );
                }, 
```

然后只需使用：

```
$("#table_id").dataTable().fnDraw(); 
```

fnServerData 中的重要内容是：

```
 newData = aoData;
    newData.push({ "name": "key", "value": $('#value').val() }); 
```

如果您直接推送到 aoData，则第一次更改是永久性的，当您再次绘制表格时，fnDraw 不会按您想要的方式工作。因此，使用 aoData 的副本将数据推送到 ajax。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-19T21:36:30.673

我知道这对游戏来说已经很晚了，但是`fnDraw`（从[上面的这个答案](https://stackoverflow.com/a/16052161/870729)- 这应该是公认的答案），从 v1.10 开始被弃用

新方法是：

```
this.api( true ).draw( true ); 
```

顺便说一句，其中有一条评论如下：

```
// Note that this isn't an exact match to the old call to _fnDraw - it takes
// into account the new data, but can hold position. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T07:13:14.573

类似于 Mitja Gustin 的回答。更改了一个循环，添加了 sNewSource。

```
$.fn.dataTableExt.oApi.fnReloadAjax = function (oSettings, sNewSource, myParams ) {
    if(oSettings.oFeatures.bServerSide) {
        if ( typeof sNewSource != 'undefined' && sNewSource != null ) {
            oSettings.sAjaxSource = sNewSource;
        }
        oSettings.aoServerParams = [];
        oSettings.aoServerParams.push({"sName": "user",
            "fn": function (aoData) {
                for(var index in myParams) {
                    aoData.push( { "name" : index, "value" : myParams[index] });
                }
            }
        });
        this.fnClearTable(oSettings);
        return;
    }
};

var myArray = {
    "key1": "value1",
    "key2": "value2"
};

var oTable = $("#myTable").dataTable();
oTable.fnReloadAjax(oTable.oSettings, myArray); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-01T13:38:13.523

要重新加载数据，只需使用带有`DataTable()`函数和调用`_fnAjaxUpdate`函数的 jquery 选择器选择 DataTable。

这是示例：

```
$('#exampleDataTable').DataTable()._fnAjaxUpdate(); 
```

# windows - git 扩展导致 Visual Studio 按钮消失

> ID：11566464
> 
> 赞同：0
> 
> 时间：2012-07-19T17:46:17.950
> 
> 标签：windows, git, visual-studio-2008, git-extensions

我安装了 VS 2008，并在我的系统上放置了 Git 和 Git 扩展。我正在运行 Windows 7。当我启动 VS 并开始工作时，按钮将变为灰色。如果我将鼠标指针放在它们上面，它们会再次出现。如果我最小化窗口并将其重新打开，它们就在那里。如果我单击其中一个按钮，它会按预期工作。我试图让其他工程师开始使用这个工具，但这让他们担心为什么会这样。有没有其他人看到过这个，有没有人知道如何让它停止发生？谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:01:40.893

我对 Visual Studio 2010 和 Visual Studio 2012 有相同的行为。 *禁用 GitExtension 工具栏解决了这个问题。* 我只对没有 GIT 存储库的项目有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:30:18.093

禁用 GitExtensions 工具栏为我解决了这个问题。您仍然可以从 Visual Studio 菜单栏中的 Git 菜单项使用加载项。要禁用它，请右键单击工具栏区域并取消选中 GitExtensions 项目旁边的复选框。

在我禁用 GitExtensions 工具栏之前，每当我最大化或恢复主窗口的大小时，Visual Studio 都没有响应。我认为这是加载项中的错误。VS2008 版本似乎很旧，我在 VS2010 中没有遇到无响应行为，其中有更新的版本可用。

# jsp - 缺少 jspweb.xml 错误

> ID：11566469
> 
> 赞同：1
> 
> 时间：2012-07-19T17:46:29.827
> 
> 标签：jsp, maven, tomcat7, precompile

我假设由于缺少 jspweb.xml，我的插件没有编译我的 jsp 页面。这个怎么编译呢？我错过了设置吗？这是我在 jspc 上的 pom 片段：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jspc-maven-plugin</artifactId>
            <version>2.0-alpha-3</version>
            <executions>
                <execution>
                    <id>jspc</id>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
            <!-- Use the Tomcat 6 JSP compiler -->
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.mojo.jspc</groupId>
                    <artifactId>jspc-compiler-tomcat6</artifactId>
                    <version>2.0-alpha-3</version>
                </dependency>
            </dependencies>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <webXml>${basedir}/target/jspweb.xml</webXml>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>xpp3</groupId>
                    <artifactId>xpp3_min</artifactId>
                    <version>1.1.4c</version>
                </dependency>
            </dependencies>
        </plugin> 
```

# file - 在文本文件的每一行中插入字符

> ID：11566470
> 
> 赞同：0
> 
> 时间：2012-07-19T17:46:33.160
> 
> 标签：file, text, batch-file, insert, character

使用批处理文件，我需要将字符插入现有文本文件的每一行。将结果写入将用于填充数据库的新文本文件。插入的字符将成为分隔符，以正确排列数据。

示例：
当前存在的文件：

```
AAAAAAAAA~ZZZ  
AAAAAAAAA~BB~ZZZ  
AAAAAAAAA~BB~CCCC~ZZZ  
AAAAAAAAA~BBB~CC~ZZZ 
```

期望的结果：

```
AAAAAAAAA~~~~ZZZ  
AAAAAAAAA~BB~~~ZZZ  
AAAAAAAAA~BB~CCCC~~ZZZ  
AAAAAAAAA~BBB~CC~~ZZZ 
```

触发分隔符后的外观：

```
Part Num    Rev    Stat   Type        
AAAAAAAAA                 ZZZ  
AAAAAAAAA   BB            ZZZ  
AAAAAAAAA   BB     CC     ZZZ  
AAAAAAAAA   BBB    CC     ZZZ 
```

注意：
第一个字段总是 9 个字符
最后一个字段总是 3 个字符
我使用波浪号作为字段分隔符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:28:09.397

这应该这样做。
用法：`mapper {sourfile} {targetfile}`

`mapper.cmd`：

```
@echo off
setlocal enabledelayedexpansion
if "%~1" == "" (
  echo No source file specified.
  goto :eof
)
if not exist "%~1" (
  echo Source file not found.
  goto :eof
)
if "%~2" == "" (
  echo No target file specified.
  goto :eof
)
if exist "%~2" (
  echo Target file is already exist.
  goto :eof
)
rem>"%~2"
for /f "tokens=1,2,3,4,5 delims=~" %%a in (%~1) do (
  if "%%b" == "" (
    echo %%a~~~~>>"%~2"
  ) else (
    if "%%c" == "" (
      echo %%a~~~~%%b>>"%~2"
    ) else (
      if "%%d" == "" (
        echo %%a~%%b~~~%%c>>"%~2"
      ) else (
        if "%%e" == "" (
          echo %%a~%%b~%%c~~%%d>>"%~2"
        ) else (
          echo %%a~%%b~%%c~%%d~%%e>>"%~2"
        )
      )
    )
  )
) 
```

# c# - 每个请求的 NHibernate 会话/事务防止多次插入

> ID：11566471
> 
> 赞同：0
> 
> 时间：2012-07-19T17:46:35.403
> 
> 标签：c#, asp.net-mvc-3, nhibernate, transactions, session-per-request

我正在处理的 MVC 3 项目提交/回滚我在当前会话结束时所做的任何插入/更新调用。这在大多数情况下都可以正常工作，除了现在我正在做多个插入。

当 csv 上传到站点时，每条记录都会被解析并插入到数据库中。问题是，如果一条记录插入失败，所有以前的记录都会回滚，并且所有后续尝试都会失败并出现错误：

```
 don't flush the Session after an exception occurs 
```

如何禁用每个会话的请求（或者我是否必须以某种方式“重新启动”事务）？

编辑：详细信息

每个请求的会话内容是在实现 IHttpModule 的类中配置的。此类采用 HttpApplication 上下文和 UnitOfWork 类。这是提交和回滚发生的地方。

上面提到的 UnitOfWork 是使用 StructureMap 注入到存储库中的。

就像我说的，这种行为对于 99% 的站点其余部分来说都很好，我只需要获取此批量更新以忽略每个请求的会话事务。或者我需要为每条新记录手动重新启动事务。我只是不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:14:36.580

> 每个请求的会话内容是在实现 IHttpModule 的类中配置的。

您在 HttpModule 中启动的每个请求的会话是*您*执行的操作，而不是 NHibernate。如何禁用它，取决于您的代码。我个人不喜欢在某个 UnitOfWork-class 中抽象 NHibernate，因为现在您意识到您使用的抽象还不够好，而肮脏的 hack 可能是现在唯一的方法。

您实际上想要做的（并且不推荐）是：

```
foreach (var row in rows)
{
    using (var session = SessionFactory.OpenSession())
    using (var tx = session.BeginTransaction())
    {
         var whatever = ...
         session.Save(whatever);
         tx.Commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:26:13.103

`ISession`具有`FlushMode`默认值的属性`Auto`，

**自动** ISession 有时会在查询执行之前被刷新，以确保查询永远不会返回过时状态。这是默认的刷新模式。

**提交** 调用 Transaction.Commit() 时刷新 ISession

**从不** 除非应用程序显式调用 Flush()，否则永远不会刷新 ISession。这种模式对于只读事务非常有效

**未指定** 的未指定刷新模式的特殊值。

**总是**在每次查询之前刷新 ISession。这几乎总是不必要且低效的。

尝试更改`ISession's FlushMode`属性`Commit`值。

# java - 带有嵌入式配置单元的java节俭客户端？

> ID：11566480
> 
> 赞同：0
> 
> 时间：2012-07-19T17:47:10.973
> 
> 标签：java, hive, thrift

根据此处的链接[https://cwiki.apache.org/Hive/hiveclient.html#HiveClient-ThriftJavaClient](https://cwiki.apache.org/Hive/hiveclient.html#HiveClient-ThriftJavaClient)。它说

> Thrift Java Client 在嵌入式模式和独立服务器上运行。

如何在嵌入式模式下使用 hive 运行 thrift java 客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:55:55.043

所以这里是如何在嵌入式模式下运行 hive 'thrift' 客户端。

```
import org.apache.hadoop.hive.service.HiveInterface;
import org.apache.hadoop.hive.service.HiveServer;
...
HiveInterface hiveClient = new HiveServer.HiveServerHandler(); 
```

将以下内容添加到类路径

$HIVE_HOME/lib/*.jar

$HIVE_HOME/conf

我在这里的蜂巢源代码中找到了这个 $HIVE_HOME/src/jdbc/src/java/../HiveConnection.java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T07:26:30.773

Hive 使用 Thrift 作为 RPC 框架，thrift rpc 使得“在嵌入式模式和独立服务器上运行”变得容易。

## 客户端模式（连接到独立服务器）

```
 HiveConf hiveConf = new HiveConf();
    hiveConf.addResource("/Users/tzp/pppathh/hive-site.xml");

    TTransport transport = new TSocket("127.0.0.1", 10000);
    transport = PlainSaslHelper.getPlainTransport(USERNAME, PASSWORD, transport);
    TBinaryProtocol protocol = new TBinaryProtocol(transport);
    transport.open();

    ThriftCLIServiceClient cliServiceClient = new ThriftCLIServiceClient(new TCLIService.Client(protocol), hiveConf);
    SessionHandle sessionHandle = cliServiceClient.openSession(USERNAME, PASSWORD);

    OperationHandle operationHandle = cliServiceClient.executeStatement(sessionHandle, "select * from u_data_ex limit 2", null);
    RowSet results = cliServiceClient.fetchResults(operationHandle);

    for (Object[] result : results) {
        System.out.println(Arrays.asList(result));
    } 
```

## 嵌入式模式（无外部服务器）

```
 HiveConf hiveConf = new HiveConf();
    hiveConf.addResource("/Users/tzp/ppppathh/hive-site.xml");
    hiveConf.set("fs.defaultFS", "hdfs://localhost:9000");

    EmbeddedThriftBinaryCLIService service = new EmbeddedThriftBinaryCLIService();
    service.init(hiveConf);

    ICLIService icliService = service.getService();
    SessionHandle sessionHandle = icliService.openSession(USERNAME, PASSWORD, null);

    OperationHandle operationHandle = icliService.executeStatement(sessionHandle, "select * from u_data_ex limit 2", null);
    RowSet results = icliService.fetchResults(operationHandle);

    for (Object[] result : results) {
        System.out.println(Arrays.asList(result));
    } 
```

> 这个问题真的很老了，但我仍然需要一些解决方案，但是在 google/so/hive wiki 上没有任何有用的信息，所以我深入研究了源代码并找到了这些。

全部基于 Hive 3.1.2。

参考：

*   org.apache.hive.service.server.HiveServer2
*   org.apache.hive.service.cli.CLIServiceTest
*   org.apache.hive.service.cli.thrift.ThriftCLIServiceTest

# mysql - MySQL 中的错误 1449 - 替代解决方案？

> ID：11566481
> 
> 赞同：2
> 
> 时间：2012-07-19T17:47:15.050
> 
> 标签：mysql

最近，我删除了分配给我前任老板的 MySQL 用户帐户。然后，某些数据库功能（例如从他创建的表中删除记录）不起作用，并出现以下错误：

```
#1449 - There is no '*username*'@'localhost' registered 
```

现在，我添加了一个具有相同名称（和不同密码）的新用户，它工作正常，没有错误。但是，有没有办法在*没有*占位符用户帐户的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T18:31:55.210

尝试替换函数的 DEFINER

首先登录到mysql`root@localhost`

然后，替换`root@localhost`为 DEFINER

```
UPDATE mysql.proc SET definer='root@localhost'
WHERE definer = '*username*@localhost'; 
```

事实上，你可以这样查看所有的 DEFINER：

```
SELECT COUNT(1) DefinerCount,definer,type
FROM mysql.proc GROUP BY definer,type; 
```

这将向您显示每个用户拥有多少功能和过程。如果任何其他报告的 DEFINER 不再存在或无效，您可以`root@localhost`继承它们。

试试看 ！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:35:00.620

我必须删除并重新添加受影响表的[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。（我使用 phpMyAdmin 来执行此操作）。

# extjs4 - Sencha / Extjs 4 与 GeoExt 2 - 如何使用

> ID：11566492
> 
> 赞同：1
> 
> 时间：2012-07-19T17:48:02.817
> 
> 标签：extjs4, extjs

我正在研究 Sencha Architect 2 - extjs 4 我发现 GeoExt 不适用于 extjs 4。但我真的需要使用它，所以我搜索并在这里结束[https://github.com/geoext/geoext2](https://github.com/geoext/geoext2)

我正在尝试类似示例，所以我只是添加：

```
Ext.Loader.setConfig({
    enabled: true,
    disableCaching: false,
    paths: {
        GeoExt: "../geoext-2/src/GeoExt",
        // for dev use
        Ext: "http://cdn.sencha.io/ext-4.1.0-gpl/src"
        // for build purpose
        //Ext: "extjs-4.1.0/src"
    }
}); 
```

到我的 app.js 文件。但我不断收到“未定义 GeoExt”错误消息。

任何人都可以帮助我吗？

**编辑**

我找不到使用 GeoExt-2 在面板中插入地图的方法，我的文件：

应用程序.html：

```
<!DOCTYPE html>

<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>test</title>
    <link rel="stylesheet" type="text/css" href="http://extjs.cachefly.net/ext-4.0.7-commercial/resources/css/ext-all.css"/>
    <script type="text/javascript" src="http://extjs.cachefly.net/ext-4.0.7-commercial/ext-all-debug.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html> 
```

应用程序.js：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    autoCreateViewport: true,
    name: 'MyApp',
    controllers: [
        'MyController'
    ]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:46:32.090

这里有几种不同的方法，主要来自[github](https://github.com/geoext/geoext2)示例

1）您可以简单地在应用程序启动中添加地图 - [jsfiddle示例](http://jsfiddle.net/leewhitbeck/rgEyV/1/)

2）您可以创建地图视图并将其添加到视口中的面板 - [js小提琴示例2](http://jsfiddle.net/leewhitbeck/rgEyV/3/)

# c# - 将键值对列表加载到组合框中

> ID：11566493
> 
> 赞同：0
> 
> 时间：2012-07-19T17:48:06.027
> 
> 标签：c#, visual-studio-2010, key-value

我有一长串由[MP4Box生成的语言及其各自的代码 (](http://gpac.wp.mines-telecom.fr/mp4box/) [http://pastebin.com/rn4JbTtP](http://pastebin.com/rn4JbTtP) ) 。我想将此列表加载到 C# 中的某种键值存储中（如字典），以便用户能够从组合框中选择一种语言，并且程序将返回相应的语言代码。

有什么方法可以在每次运行程序时不读取文本文件的情况下完成？如果是这样，怎么做？

**更新（如此*[处](https://stackoverflow.com/questions/11566493/load-list-of-key-value-pairs-into-combo-box/11566637#comment15301347_11566637)**评论）*：**对不起，我没有清楚地解释自己。我阅读文本文件没有问题，只是当前格式需要大量解析才能输入字典。存储这些对的最佳方式是什么，以便在运行时需要最少的解析量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:58:13.917

> 有什么方法可以在每次运行程序时不读取文本文件的情况下完成？

并不真地。数据需要以某种方式加载到内存中。正如@lc[评论](https://stackoverflow.com/questions/11566493/load-list-of-key-value-pairs-into-combo-box/11566637#comment15300664_11566493)的那样，除了将字典硬编码到应用程序代码中之外，您还需要存储并阅读它。

您可以通过多种方式存储数据以供读取，但需要将其读入内存：

*   保存到本地文本文件
*   序列化到本地文件
*   使用嵌入式数据库存储数据

更新：

鉴于您想以最少的解析加载本地数据，我建议您*将*数据解析为字典后，将字典[序列化](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)到磁盘。当您从磁盘反序列化时，您将拥有一个已填充的字典实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:48:37.453

无论如何，您都必须在应用程序启动时读取该文件。一种解决方案可能是创建一个包含您的语言的 xml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Languages>
  <Language Name="English" Code="en"/>
  <Language Name="German" Code="de"/>
</Languages> 
```

你也可以有一个小类来保存语言的名称和代码，如下所示：

```
 class Language
    {
        public string Name { get; set; }
        public string Code { get; set; }
    } 
```

以及阅读所有语言的阅读方法：

```
 private static List<Language> ReadLanguageFile()
        {
            List<Language> languages = new List<Language>();
            string path = @"LanguagesFile.xml";
            XDocument xdoc = XDocument.Load(path);
            var lans = xdoc.Root.Elements("Language");
            Language lan;
            foreach (var item in lans)
            {
                lan = new Language();
                lan.Name = item.Attribute("Name").Value;
                lan.Code = item.Attribute("Code").Value;
                languages.Add(lan);
            }
            return languages;
        } 
```

然后您可以将您的组合框数据源绑定到语言列表，如下所示：

```
cmb.DataSource = ReadLanguageFile();
cmb.DisplayMember="Name";
cmb.ValueMember="Code"; 
```

现在，如果您不想为语言创建文件，您可以创建一个类来保留所有语言，如下所示：

```
public sealed class Languages
    {
        public static List<Language> GetLanguages()
        {
            return new List<Language>
            {
                new Language{Code="en",Name="English"},
                new Language{Code="de",Name="German"},
            };
        }
    } 
```

# java - org.apache.cxf.interceptor.Fault：无法发送消息。原因：java.io.IOException: IOException invoking Service: Authentication failure

> ID：11566495
> 
> 赞同：0
> 
> 时间：2012-07-19T17:48:17.937
> 
> 标签：java, cxf

当我尝试调用我的服务时出现以下错误

```
WARNING: Interceptor for {http://schemas.microsoft.com/dynamics/2008/01/services}CustomerService#{http://schemas.microsoft.com/dynamics/2008/01/services}read has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Could not send Message.
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:64)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:535)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:465)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:368)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:321)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:88)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)
    at $Proxy32.read(Unknown Source)
    at com.attunix.axclientcxf.AXTestCustomerService.ReadCustomer(AXTestCustomerService.java:210)
    at com.attunix.axclientcxf.AXTestCustomerService.Read(AXTestCustomerService.java:105)
    at com.attunix.axclientcxf.AXTestCustomerService.Read(AXTestCustomerService.java:116)
    at com.attunix.axclientcxf.TestAXClientCXF.Read(TestAXClientCXF.java:94)
    at com.attunix.axclientcxf.TestAXClientCXF.main(TestAXClientCXF.java:74)
Caused by: java.io.IOException: IOException invoking http://daxuataif1.int.fusionio.com/MicrosoftDynamicsAXAif50/customerservice.svc: Authentication failure
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.mapException(HTTPConduit.java:1431)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1416)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:649)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    ... 13 more
Caused by: java.io.IOException: Authentication failure
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1296) 
```

我验证了用户名和密码，它们似乎是正确的。我不知道为什么它会返回身份验证失败。任何线索都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T18:47:07.887

检查超时是否足够连接。将其设置为 0。

```
HTTPClientPolicy policy = new HTTPClientPolicy();
policy.setReceiveTimeout(0);
//and or 
policy.setConnectionTimeout(0); 
```

# jsf - 将方法参数传递给嵌套复合组件失败

> ID：11566496
> 
> 赞同：1
> 
> 时间：2012-07-19T17:48:23.223
> 
> 标签：jsf, methods, nested, composite

我在将方法参数传递给嵌套复合组件时遇到问题。

我有第一个组件 wose 复合：界面看起来像：

```
<composite:interface>
    <composite:attribute name="onRowEditListener" required="false" method-signature="void listener(org.primefaces.event.RowEditEvent)"/>
</composite:interface> 
```

它使用另一个具有类似界面的复合组件组件。

第一级组件是这样使用的：

```
<mynamespace:compo1 onRowEditListener=#{bean.method}"/> 
```

嵌套的是这样使用的：

```
<mynamespace:compo2 onRowEditListener=#{cc.attrs.onRowEditListener}"/> 
```

如果我插入两个控件，我得到：

*   在第一级控制中，像 org.apache.el.MethodExpressionImpl@358f0647 这样的输出，对我来说看起来不错
*   在第二（嵌套）级别控件中，输出类似于 org.apache.myfaces.view.facelets.el.LocationValueExpression@ff381f45 。

引发的异常如下所示：

```
19/07/2012 19:39:02 fr.senat.faces.exceptions.DetailedExceptionHandler INFO  [DetailedExceptionHandler.java:40] [http-8080-7] - Stack trace: javax.faces.FacesException: Exception while calling broadcast on component : {Component-Path : [Class: javax.faces.component.UIViewRoot,ViewId: /editSenateur.xhtml][Class: javax.faces.component.html.HtmlBody,Id: j_id_5][Class: org.primefaces.component.layout.Layout,Id: j_id_6][Class: org.primefaces.component.layout.LayoutUnit,Id: j_id_v][Class: org.primefaces.component.outputpanel.OutputPanel,Id: detailCommissions][Class: javax.faces.component.html.HtmlForm,Id: j_id_x][Class: org.primefaces.component.tabview.TabView,Id: tabFonctionsInternes][Class: org.primefaces.component.tabview.Tab,Id: fonctionsCommissions][Class: javax.faces.component.UINamingContainer,Id: j_id_10][Class: javax.faces.component.UIPanel,Id: j_idj_id_10__f_cc_facet][Class: org.primefaces.component.outputpanel.OutputPanel,Id: panelTabViewCommissions][Class: org.primefaces.component.tabview.TabView,Id: tabViewCommissions][Class: org.primefaces.component.tabview.Tab,Id: commissionTab][Class: org.primefaces.component.panelgrid.PanelGrid,Id: j_id_15][Class: org.primefaces.component.row.Row,Id: j_id_1b][Class: org.primefaces.component.column.Column,Id: j_id_1c][Class: javax.faces.component.UINamingContainer,Id: j_id_1d][Class: javax.faces.component.UIPanel,Id: j_idj_id_1d__f_cc_facet][Class: org.primefaces.component.datatable.DataTable,Id: sheetFonctions]} created from: /resources/sen/fonctionsCommission.xhtml at line 27 and column 162
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:430)
    at javax.faces.component.UIData.broadcast(UIData.java:1610)
    at javax.faces.component.UIData.broadcast(UIData.java:1596)
    at javax.faces.component.UIData.broadcast(UIData.java:1596)
    at javax.faces.component.UIData.broadcast(UIData.java:1596)
    at javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:1023)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:286)
    at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1360)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:752)
    at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:38)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.execute(CodiLifecycleWrapper.java:95)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at fr.senat.faces.filters.HibernateSessionConversationFilter.doFilter(HibernateSessionConversationFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.myfaces.view.facelets.el.ContextAwareELException: javax.el.ELException: java.lang.IllegalArgumentException: wrong number of arguments
    at org.apache.myfaces.view.facelets.el.ContextAwareTagMethodExpression.invoke(ContextAwareTagMethodExpression.java:108)
    at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:42)
    at org.primefaces.event.RowEditEvent.processListener(RowEditEvent.java:41)
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:74)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:406)
    ... 31 more
Caused by: javax.el.ELException: java.lang.IllegalArgumentException: wrong number of arguments
    at org.apache.el.parser.AstValue.invoke(AstValue.java:195)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at org.apache.myfaces.view.facelets.el.ValueExpressionMethodExpression.invoke(ValueExpressionMethodExpression.java:68)
    at org.apache.myfaces.view.facelets.el.ContextAwareTagMethodExpression.invoke(ContextAwareTagMethodExpression.java:96)
    ... 35 more
Caused by: java.lang.IllegalArgumentException: wrong number of arguments
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:191)
    ... 38 more 
```

看起来该方法已正确传递给第一个控件，但是当传递给第二个控件时，EL 表达式会得到一个项目符号......

我在用 ：

*   我的面孔 2.1.7
*   雄猫 6.0.33

在此先感谢您的帮助。

**更新**

我可以评估的唯一“进步”是一个kludge ...

杂牌类：

```
/**
 * 
 * @author lpenet
 * 
 *         This class is a workaround kluge. Methods passed as a parameter to a
 *         composite component then to a PrimeFaces p:ajax seems to get a bullet
 *         somewhere in the process, at least with Tomcat 6 + MyFaces
 *         2.1 + CODI 1.0.5 + OpenWebbeans 1.0.3 See :
 *         http://forum.primefaces.org/viewtopic.php?f=3&t=23558&p=72885#p72885
 * 
 *         Using this class as "componentType", one can forward the methode call.
 *
 *         Not so nice, but... works.
 * 
 */
@FacesComponent(value = "fr.senat.beans.PrimefacesListenerKludge")
public class PrimefacesListenerKludge extends UINamingContainer {

    @Override
    public String getFamily() {
        return "javax.faces.NamingContainer"; // Important! Required for
                                                // composite components.
    }

    public void forwardRowEditListener(RowEditEvent event) {
        FacesContext context = FacesContext.getCurrentInstance();
        Object listener = getAttributes().get("onRowEditListener");
        if (listener == null) {
            return;
        }
        MethodExpression ajaxEventListener = (MethodExpression) listener;
        ajaxEventListener
                .invoke(context.getELContext(), new Object[] { event });
    }
} 
```

样品用途：

```
<composite:interface componentType="fr.senat.beans.PrimefacesListenerKludge">
        ...
    <composite:attribute name="onRowEditListener" required="false"
        method-signature="void listener(org.primefaces.event.RowEditEvent)"
        default="#{cc.parent.attrs.onRowEditListener}" />
</composite:interface>
<composite:implementation>
        ...
    </composite:implementation> 
```

老实说，我不知道我当前的堆栈（PrimeFaces 4/MyFaces 2.1.13/OWB 1.2.1/Tomcat 7.0.32）是否仍然需要它，但没有时间进行测试。

# c# - asp:FormView ItemUpdating 事件未触发

> ID：11566497
> 
> 赞同：0
> 
> 时间：2012-07-19T17:48:27.390
> 
> 标签：c#, asp.net, .net, visual-studio

我目前在我的一个项目中使用 asp:formview，它是这样使用的；

```
<asp:FormView ID="formViewGalleryEdit" runat="server" DefaultMode="Edit" 
            RenderOuterTable="False" DataKeyNames="GalleryID" 
            onitemupdating="formViewGalleryEdit_ItemUpdating">
            <EditItemTemplate>
                <div class="field-group">
                    <label for="textBoxVendorName">Gallery Heading:</label>
                    <div class="field">
                        <asp:TextBox runat="server" ID="textBoxGalleryHeading" Width="90%" 
                            Text='<%# Eval("GalleryHeading").ToString() %>' />
                    </div>
                </div>
                <div class="field-group">       
                    <label for="textBoxDescription">Gallery Description:</label>
                    <div class="field">
                        <asp:TextBox runat="server" ID="textBoxDescription" Text='<%# Eval("GalleryDescription") %>' 
                            Width="90%" Columns="50" 
                            Rows="7" TextMode="MultiLine" />
                    </div>      
                </div>
                <div class="field-group inlineField">   
                    <label for="myfile">Gallery Image:</label>
                    <div class="field">
                        <asp:FileUpload ID="imageFileUpload" runat="server" />
                    </div>  
                </div>
                <br />
                <div class="field-group inlineField">   
                    <div class="field">
                        <img src='/images/gallery/<%# Eval("GalleryImage") %>' alt='<%# Eval("GalleryImage") %>' />
                    </div>  
                </div>
                <div class="field-group">       
                    <label for="textBoxDescription">Gallery Button Text:</label>
                    <div class="field">
                        <asp:TextBox runat="server" ID="textBoxButtonText" Text='<%# Eval("GalleryButtonText") %>'
                            Width="90%" />
                    </div>      
                </div>
                <div class="field-group">       
                    <label for="textBoxDescription">Gallery Button URL:</label>
                    <div class="field">
                        <asp:TextBox runat="server" ID="textBoxGalleryUrl" Text='<%# Eval("GalleryButtonUrl") %>' Width="90%" />
                    </div>      
                </div>
                <br />
                <div class="field-group">       
                    <div class="actions">   
                        <asp:Button ID="buttonUpdate" runat="server" CausesValidation="True" CommandArgument='<%# Eval("GalleryId") %>' 
                            Width="60" CommandName="Update" Text="Update" />
                        <asp:Button ID="buttonCancel" runat="server" CausesValidation="False" Width="60"
                            CommandName="Cancel" Text="Cancel" />
                    </div> <!-- .actions -->
                </div>
            </EditItemTemplate>
        </asp:FormView> 
```

现在，在这个文件后面的代码中，我正在处理它；

```
protected void formViewGalleryEdit_ItemUpdating(object sender, FormViewUpdateEventArgs e)
{
    try
    {
        string galleryId = e.CommandArgument.ToString();
        string galleryHeading = Server.HtmlEncode(((TextBox)formViewGalleryEdit.FindControl("textBoxGalleryHeading")).Text);
        string galleryDescription = ((TextBox)formViewGalleryEdit.FindControl("textBoxDescription")).Text;

        FileUpload control = (FileUpload)formViewGalleryEdit.FindControl("imageFileUpload");
        string galleryImage = control.FileName;
        string location = Server.MapPath("~/images/gallery/") + galleryImage;
        control.SaveAs(location);

        string galleryButtonText = ((TextBox)formViewGalleryEdit.FindControl("textBoxButtonText")).Text;
        string galleryUrl = ((TextBox)formViewGalleryEdit.FindControl("textBoxGalleryUrl")).Text;

        bool status = GalleryManager.UpdateGallery(galleryId, galleryHeading, galleryDescription, galleryImage,
                                                    galleryButtonText, galleryUrl);
        if (status)
        {
            literalSucess.Text = "Item Updated Successfully";
            panelScucess.Visible = true;
        }
    }
    catch (Exception ex)
    {
        literalError.Text = ex.Message;
        panelError.Visible = true;
    }

} 
```

我还插入了一个断点，但它没有触发事件。我做错了什么？感谢并感谢所有回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:35:41.047

你把所有事情都做对了 99%。您需要做的就是将您的`Button`控件更改为`LinkButton`控件，如[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.itemupdating.aspx)中所示，您就可以开始使用了。

```
<div class="actions">
    <asp:LinkButton ID="buttonUpdate" runat="server" CausesValidation="True" CommandArgument='<%# Eval("GalleryId") %>' 
                        Width="60" CommandName="Update" Text="Update" />
    <asp:LinkButton ID="buttonCancel" runat="server" CausesValidation="False" Width="60"
                        CommandName="Cancel" Text="Cancel" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T09:40:31.110

我知道这听起来很傻，但我使用以下代码解决了这个问题；

```
if(!Page.IsPostBack())
{
    // code goes here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T20:34:05.293

如果您需要在按钮上触发事件 ItemUpdating，则需要捕获按钮的单击事件。像这样的东西：

此代码在 VB 中。

```
Protected Sub buttonUpdate_Click(sender As Object, e As EventArgs)

    FormView1.UpdateItem(True)

End Sub 
```

页面看起来和以前一样，只有一个变化

```
<div class="actions">   
      <asp:Button ID="buttonUpdate" runat="server" CausesValidation="True" **OnClick="buttonUpdate_Click"** CommandArgument='<%# Eval("GalleryId") %>' Width="60" CommandName="Update" Text="Update" />
      <asp:Button ID="buttonCancel" runat="server" CausesValidation="False" Width="60" CommandName="Cancel" Text="Cancel" />
</div> <!-- .actions --> 
```

# php - 为什么做当我将鼠标悬停在选项上时，选项会跳转到不同的选项吗？所以我有一个有趣的问题。我有一个 <select>菜单，它可以按照我的意愿工作，但有一个例外。当我将鼠标悬停在任何 上时，突出显示的选项会从我悬停的选项跳到顶部值（无论是否标记为“已选择”似乎都没有区别）。当我单击它时，它会选择正确的选项，而不是突出显示的选项。它在 Firefox 中正常工作，但在 Chrome 中不能正常工作。谁能向我解释为什么它会这样，以及我可能会做什么。谢谢！& ID：11566501 赞同：0 时间：2012-07-19T17:48:39.857 标签：php, html, jquery-ui, google-chrome, jquery-mobile 回答 #1 赞同：1 时间：2012-11-13T19:30:59.443 我只在 Chrome 中遇到了完全相同的问题！ 问题：Chrome 扩展：FastestChrome - Browse Faster 6.9.7 回答 #2 赞同：1 时间：2012-07-19T18:22:53.827 您正在自行关闭选择和选项标签，试试这个看看，而且您不能为<select>标签设置值。 <select name="grade" id="grade"> <option value="4" selected>A</option> <option value="3.7">A-</option> <option value="3.4">B+</option> <option value="3">B</option> <option value="2.7">B-</option> <option value="2.4">C+</option> <option value="2">C</option> <option value="1.7">C-</option> <option value="1">D</option> <option value="0">E</option> </select> 回答 #3 赞同：0 时间：2014-07-05T15:15:04.990 安装时尝试禁用 AdBlock。这导致我在下拉菜单中出现跳跃选项。</select>

# javascript - 在javascript中删除两个indexOf之间的部分字符串

> ID：11566505
> 
> 赞同：0
> 
> 时间：2012-07-19T17:48:48.903
> 
> 标签：javascript, jquery

如何从两个之间的字符串中删除`indexOf`

我有这个[jsFiddle](http://jsfiddle.net/minagabriel/ertcp/)

这是我的代码：

```
 var x = "M 178.6491699876038 23.419570090792845 C 183.6491699876038 
23.419570090792845 186.47776067057902 30.902823043098138 190.3670728596699 
     41.19229585251793 L 194.25638504876076 51.48176866193772" ; 
  var c = x.indexOf('C') ; 
  var L = x.indexOf('L') ;
  var final = x.slice (c,L) ;
  console.log(final) ; 
```

此代码将导致返回字符串的已删除部分

**问题**`C`删除和之间的部分后如何返回原始字符串`L`

​</p>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T17:52:44.603

```
var c = x.indexOf('C') ; 
var L = x.indexOf('L') ;

var remaining = x.slice(0, c) + x.slice(L); 
```

小提琴：

[http://jsfiddle.net/ePbCP/](http://jsfiddle.net/ePbCP/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:52:51.993

只需将原始字符串的那部分替换为 nothing ：

```
var x = "M 178.6491699876038 23.419570090792845 C 183.6491699876038 23.419570090792845 186.47776067057902 30.902823043098138 190.3670728596699 41.19229585251793 L 194.25638504876076 51.48176866193772" ; 
var c = x.indexOf('C') ; 
var L = x.indexOf('L') ;

var final = x.slice (c,L) ;
console.log(x.replace(final, '')); 
```

[小提琴](http://jsfiddle.net/ertcp/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T17:54:12.330

您可以为此使用 2`substring`秒。

```
var c = x.indexOf('C') ; 
var L = x.indexOf('L') ;

var y = x.substring(0, c) + x.substring(L); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T17:52:44.403

尝试：

```
var x = "M 178.6491699876038 23.419570090792845 C 183.6491699876038 23.419570090792845 186.47776067057902 30.902823043098138 190.3670728596699 41.19229585251793 L 194.25638504876076 51.48176866193772";
var c = x.indexOf('C');
var L = x.indexOf('L');
var final = x.substring(0, c) + x.substring(L, x.length);
console.log(final); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T17:55:13.817

您可以将最终字符串替换为空字符串以获取剩余部分。

```
var remaining = x.replace(final,''); 
```

[现场演示](http://jsfiddle.net/rajaadil/ertcp/4/)

# javascript - 在原型中多次执行 Effect.Move

> ID：11566507
> 
> 赞同：0
> 
> 时间：2012-07-19T17:48:51.607
> 
> 标签：javascript, prototypejs, effects, marquee

我正在尝试重新创建 HTML marquee 标记的行为，但我正在处理这个问题，Effect.Move 只触发一次，无论应用的递归如何。

```
function MoveNoticias() {
new Effect.Move('moverlo', { x: -10, y: 0, mode: 'relative' });
    setTimeout("MoveNoticias", 10);
} 
```

任何想法为什么？我不得不说我根本不喜欢原型，我曾经使用过 Jquery，但不幸的是，在这种情况下，我需要使用原型。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:25:13.887

尝试使用**afterFinish -Event**创建一个 inifinit 循环，如下所示：

```
function MoveNoticias(){
    new Effect.Move('moverlo', {
        x:-10, y:0, mode:'relative',
        afterFinish:MoveNoticias});
} 
```

我为您设置了一个[工作示例](http://jsfiddle.net/Jn8D8/)。您的下一个问题可能是，如何将整个事情“选上”；好吧，您应该通过测量选取框已经移动了多远并最终切换方向来动态计算 x。

# git - 为以下场景配置 Git

> ID：11566509
> 
> 赞同：0
> 
> 时间：2012-07-19T17:48:58.147
> 
> 标签：git, version-control

我想为以下场景配置 Git。

我在 /etc/puppet 中安装了 Puppet。对于 /etc/puppet/modules 中的所有 Puppet 代码，我想初始化 Git 以跟踪更改，但由于默认情况下不允许任何人推送到该目录，因此会产生问题。我该怎么做才能让所有用户都可以将 Puppet 配置代码推送到 /etc/puppet/modules？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T21:14:18.780

我会说：

1.  在其他地方设置远程裸仓库，通过 SSH 或 git 协议使其可用（将其命名为 mainline）
2.  在 /etc/pupet/modules 中设置它的克隆
3.  用户应该从主线克隆并推送到主线
4.  如果你想自动更新 /etc/puppet/module - 设置 cron 作业，每 10 分钟拉一次 master 分支

更安全，更灵活，更少头痛。

# objective-c - 如何在 remoteControlledEvents 中选择下一首歌曲

> ID：11566512
> 
> 赞同：1
> 
> 时间：2012-07-19T17:49:01.080
> 
> 标签：objective-c, ios, xcode, avplayer

我正在使用`AVPlayer`可以通过双击主页按钮或技术术语来控制播放、暂停功能的地方`remoteControlledEvents`。我想知道如何实现它，这样我就可以进入`remoteControlledEvents`.

谢谢

```
-(void)remoteControlReceivedWithEvent:(UIEvent *)event {
  switch (event.subtype) {
    case UIEventSubtypeRemoteControlTogglePlayPause:
      if (avplayer.rate == 0.0) {
        [avplayer play];
      } else {
        [avplayer pause];
      }
      break;
    case UIEventSubtypeRemoteControlPlay:
      [avplayer play];
      break;
    case UIEventSubtypeRemoteControlPause:
      [avplayer pause];
      break;

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:37:44.377

`AVPlayer`用下一首歌制作一个新的并告诉它播放。

该事件是`UIEventSubtypeRemoteControlNextTrack`

```
case: UIEventSubtypeRemoteControlNextTrack:
    [avplayer pause];
    avplayer = [[AVPlayer alloc] initWithPlayerItem:/*name of item*/];
    [avplayer play];
    break; 
```

# javascript - https causes immediate abort while http is fine

> ID：11566515
> 
> 赞同：2
> 
> 时间：2012-07-19T17:49:14.813
> 
> 标签：javascript, ajax, backbone.js, https

In my code, I have something like:

```
A = Backbone.Model.extend({
  // url : "http://localhost:3000/a"
  url : "https://localhost:3000/a"
});

var a = new A();
a.save(); 
```

When I use the http url, everything is fine and dandy; when I use the https url, however, I get the following error

```
{readyState : 0, responseText : "", status : 0, statusText : ""} 
```

and firebug "net" tab shows 0 requests

Adding onto the weirdness, when I use fetch on two other models, both give "aborted" error but firebug shows requests made and failed, rather than 0 requests as above.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:02:55.800

Is your site being served from port 3000 on localhost via HTTPS?

If not, then this won't work by default. [CORS](http://www.w3.org/TR/cors/) prevents requests from being processed without extra work unless the protocol (http or https), the domain (all parts of it) and the port match.

# apache - 尝试使用 solr 索引富文档时出现延迟加载错误

> ID：11566518
> 
> 赞同：1
> 
> 时间：2012-07-19T17:49:22.583
> 
> 标签：apache, solr, apache-tika

我试图按照此页面上的教程进行操作：[http ://wiki.apache.org/solr/ExtractingRequestHandler#Sending_documents_to_Solr](http://wiki.apache.org/solr/ExtractingRequestHandler#Sending_documents_to_Solr)

但不幸的是，每当我执行以下命令时，我都会收到延迟加载错误：

```
C:\xampp\solr\exampledocs>curl "http://localhost:8983/solr/update/extract?litera
l.id=doc1&uprefix=attr_&fmap.content=attr_content&commit=true" -F "myfile=@tika.
html" 
```

这是错误：

```
<html><head><title>Apache Tomcat/7.0.29 - Error report</title><style><!--H1 {fon
t-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:
22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525
D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;backgro
und-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;col
or:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:w
hite;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;backgroun
d:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR
{color : #525D76;}--></style> </head><body><h1>HTTP Status 500 - lazy loading er
ror

org.apache.solr.common.SolrException: lazy loading error
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWra
ppedHandler(RequestHandlers.java:260)
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle
Request(RequestHandlers.java:242)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter
.java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte
r.java:260)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp
11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoin
t.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.solr.common.SolrException: Error loading class 'solr.extra
ction.ExtractingRequestHandler'
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:394)
        at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419)
        at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:455)

        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWra
ppedHandler(RequestHandlers.java:251)
        ... 20 more
Caused by: java.lang.ClassNotFoundException: solr.extraction.ExtractingRequestHa
ndler
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:378)
        ... 23 more
</h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>messag
e</b> <u>lazy loading error

org.apache.solr.common.SolrException: lazy loading error
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWra
ppedHandler(RequestHandlers.java:260)
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle
Request(RequestHandlers.java:242)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter
.java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte
r.java:260)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp
11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoin
t.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.solr.common.SolrException: Error loading class 'solr.extra
ction.ExtractingRequestHandler'
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:394)
        at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419)
        at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:455)

        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWra
ppedHandler(RequestHandlers.java:251)
        ... 20 more
Caused by: java.lang.ClassNotFoundException: solr.extraction.ExtractingRequestHa
ndler
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:378)
        ... 23 more
</u></p><p><b>description</b> <u>The server encountered an internal error (lazy
loading error

org.apache.solr.common.SolrException: lazy loading error
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWra
ppedHandler(RequestHandlers.java:260)
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle
Request(RequestHandlers.java:242)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter
.java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte
r.java:260)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp
11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoin
t.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.solr.common.SolrException: Error loading class 'solr.extra
ction.ExtractingRequestHandler'
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:394)
        at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:419)
        at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:455)

        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWra
ppedHandler(RequestHandlers.java:251)
        ... 20 more
Caused by: java.lang.ClassNotFoundException: solr.extraction.ExtractingRequestHa
ndler
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:378)
        ... 23 more
) that prevented it from fulfilling this request.</u></p><HR size="1" noshade="n
oshade"><h3>Apache Tomcat/7.0.29</h3></body></html> 
```

对于它的价值，我正在尝试在 Windows XP 机器上使用 solr 和 tika。

# logging - 如何在 Jetty 的不同文件中重定向标准错误和标准输出？

> ID：11566519
> 
> 赞同：0
> 
> 时间：2012-07-19T17:49:34.997
> 
> 标签：logging, jetty

几乎所有内容都在标题中，我用于登录码头的配置文件如下所示：

那里提供了配置文件的要点 -> [https://gist.github.com/3145564](https://gist.github.com/3145564)

我的问题是，所有内容都转到重定向 stderr 的文件、信息日志、警告日志，而没有任何内容转到重定向 sdtout 流的文件。

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:15:22.700

默认情况下，Jetty 具有粗略的日志记录，因为我们无法真正假设任何人将使用什么日志记录框架。但是我们已经设置好了，所以您需要做的就是将 slf4j-api jar 放入类路径中，我们将开始使用它，然后您可以从那里重定向您的日志记录。

有关基本信息，请参见：[http ://wiki.eclipse.org/Jetty/Feature/Jetty_Logging](http://wiki.eclipse.org/Jetty/Feature/Jetty_Logging)

你可以在这里找到一个基于 webapps 筛选日志的细粒度示例：

[http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)

因此，虽然 jetty 日志在开箱即用时看起来很粗糙，但它必须这样才能不会对任何用户日志框架造成问题，因为 jetty 以多种不同的方式使用，嵌入，作为分发，在 android 等设备上等. 我们确实有一个很好的简单方法，可以通过这个 slf4j 设置为您提供所需的所有控制。

# ios - 在 OpenGL ES 中使用 CVOpenGLESTextureCache 将纹理传递给 Uniform

> ID：11566520
> 
> 赞同：2
> 
> 时间：2012-07-19T17:49:41.617
> 
> 标签：ios, opengl-es

我正在尝试使用 CVOpenGLESTextureCache 在 iOS 5.0+ 上的 OpenGL ES 中将视频文件作为纹理应用。

我找到了 Apple 的[RosyWriter](http://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011110)示例代码，并且一直在阅读它。

我的问题是：

纹理最终是如何传递到片段着色器中的制服的？

在 RosyWriterPreviewView 类中，我一直遵循它

```
glBindTexture(CVOpenGLESTextureGetTarget(texture), 
               CVOpenGLESTextureGetName(texture)) 
```

之后指定一些纹理参数。

但是，我没有看到示例代码明确引用了纹理统一（sampler2D 视频帧）。我已经习惯的纹理发送代码看起来像：

```
GLint uniform = glGetUniformLocation(program, "u_uniformName"); 
```

随后调用实际将纹理发送到制服：

```
glUniform1i(GLint location, GLint x); 
```

所以我知道 RosyWriter 以某种方式在其片段着色器中将纹理传递给制服，但我看不出它是如何以及在何处发生的。

事实上，示例代码包含构建 OpenGL 程序的注释：

```
// we don't need to get uniform locations in this example 
```

关于为什么会这样以及如何发送纹理的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:07:29.270

在 RosyWriter 示例中，我认为他们能够在不使用制服`glUniformi()`的任何时候逃脱的原因`videoframe`是他们将输入纹理绑定到纹理单元 0。

为纹理指定统一值时，您使用的值是纹理绑定到的纹理单元。如果您不为制服设置值，我相信它应该默认为 0，因此通过将纹理绑定到单元 0，他们永远不必为`videoframe`制服设置值。它仍然会拉入附加到单元 0 的纹理。

# vba - 通过宏运行我的规则：无法选择已发送项目文件夹

> ID：11566528
> 
> 赞同：0
> 
> 时间：2012-07-19T17:50:02.337
> 
> 标签：vba, outlook, rules, inbox

我在 Outlook 中有收入电子邮件和已发布电子邮件的规则。我在网上发现以下例程适用于“收件箱”中的电子邮件，但我无法在需要时使用 GetRootFolder 选择“已发送”项目文件夹。例程如下：

```
Sub RunRules()

Dim st As Outlook.Store
Dim myRules As Outlook.rules
Dim rl As Outlook.Rule
Dim count As Integer
Dim k As Long
Dim fname As String
Dim currentcount As Integer
Dim prova As String
Dim numero As Integer
Dim prova1 As String
Dim Nrules As Integer
Dim objFolder, objNamespace, objOutlook, objFile
Set objOutlook = CreateObject("Outlook.Application")
Set objNamespace = objOutlook.GetNamespace("MAPI")
objNamespace.Logon "Default Outlook Profile", , False, False
numero = 1
' this is for the SENT Items
fname = "I"
count = 1
k = 1
 Set rl = Nothing
 Set st = Nothing
 Set myRules = Nothing
'On Error Resume Next
   ' get default store (where rules live)
  Set st = Application.Session.DefaultStore
   Application.Session.DefaultStore.GetRootFolder (olFolderSentMail)
   ' get rules
   Set myRules = st.GetRules
   For k = 1 To myRules.count ' might be 0-based, didnt check

On Error Resume Next
Set rl = Nothing
Set rl = myRules(k)
    If rl.RuleType = olRuleReceive Then         'determine if it’s an Inbox rule, if so, run it
 ' I selecto just the rules that are for the sent ITEMS
      prova = rl.Name
      prova1 = Left(prova, 1)
      If prova1 = fname Then
        rl.Execute ShowProgress:=True
         objFile.WriteLine rl.Name
         count = count + 1
          prova = ""
          prova1 = ""
     End If
End If
Next
  Set rl(count) = Nothing
  Set st = Nothing
  Set myRules = Nothing
  Set objFolder = Nothing

 End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:53:24.340

对不起，我之前没有注意到你的问题。

我没有试过你的代码。相反，我展示了我的一个例程的摘录，该例程将选定的属性移动到已发送邮件文件夹中每个邮件项目的变量中。

希望这可以帮助。

```
Dim FolderTgt As MAPIFolder
Dim HtmlBody As String
Dim InxItemCrnt As Long
Dim ReceivedTime As Date
Dim SenderEmailAddress As String
Dim SenderName As String
Dim Subject As String
Dim TextBody As String
Dim FolderTgt As MAPIFolder

Set FolderTgt = CreateObject("Outlook.Application"). _
                GetNamespace("MAPI").GetDefaultFolder(olFolderSentMail)

For InxItemCrnt = FolderTgt.Items.Count To 1 Step -1
  With FolderTgt.Items.Item(InxItemCrnt)
    If .Class = olMail Then
      ' Save selected data to variables
      ReceivedTime = .ReceivedTime
      Subject = .Subject
      SenderName = .SenderName
      SenderEmailAddress = .SenderEmailAddress
      TextBody = .Body
      HtmlBody = .HtmlBody
    End If
  End With
Next 
```

# audio - 如何解码语音输入

> ID：11566536
> 
> 赞同：5
> 
> 时间：2012-07-19T17:50:55.880
> 
> 标签：audio, machine-learning, speech-recognition, voice-recognition

我想做的是创建一个将人类语音转换为 IPA（国际音标）格式的 API。我的问题是，关于如何在原始音频波形级别解码语音的资源在哪里。我寻找了一个 API，但我发现的大部分内容都直接翻译成罗马字母。我希望在区分语音的能力方面创造一些更准确的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:02:01.703

我只想首先说这个项目比你想象的要困难和复杂得多。语音到文本处理是一个非常庞大且复杂的领域，已经进行了大量的研究。大多数解析器将内容直接发送到罗马字符的原因是因为它们的大部分处理是模糊声音与其他模糊声音的上下文的概率匹配，以猜测哪些单词一起有意义。您更有可能找到可以为您提供 Soundex 而不是 IPA 的东西。也就是说，这是一个在多个方面都已解决的问题。您最好的选择可能是 CMU 的 Sphinx 项目。

```
http://cmusphinx.sourceforge.net/wiki/start 
```

这将为您提供一个良好的开端，但您假设语音到文本的处理比实际要发达得多，并且没有简单的方法可以通过波形以任何精度将语音转换为 IPA。Sphinx 是非常模块化且完全开源的，因此它可以为您提供触手可及的巨大功能，此时您是否能够弄清楚如何使这项工作取决于您，但又一次。无论如何，这都不是一个已解决的问题。

# python - 仅检索 MySQL 中的最新行

> ID：11566537
> 
> 赞同：3
> 
> 时间：2012-07-19T17:50:57.063
> 
> 标签：python, mysql

我有一个 mysql 表，其中包含 name、perf、date_time 列。我怎样才能只检索最新的 MySQL 行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T17:52:52.783

`SELECT * FROM table ORDER BY date, time LIMIT 1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T17:53:04.020

```
...
ORDER BY `date and time` DESC
LIMIT 1 
```

请注意，这不是最近添加的行，这是列中具有最新“最新”值的`date and time`行，这是我假设您正在寻找的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T17:56:12.527

作为备选：

```
SELECT *
FROM yourtable
WHERE date_and_time = (SELECT MAX(date_and_time) FROM yourtable) 
```

这将具有捕获多行插入非常快并以相同时间戳结束的情况的优势。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T17:52:34.083

```
SELECT name,
       perf,
       date_and_time
FROM   table
ORDER  BY date_and_time DESC
LIMIT  1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T18:14:52.297

日期和时间是单独的字段吗？你能解释一下“最近的”是什么意思吗？如果日期和时间是单独的字段或不涉及用户活动，并且您的意思是“用户最近更新”，那么您可能想知道时间敏感表通常包含带有 mysql 标准时间戳的“updated_at”之类的字段，例如'1989-11-09 12:34:32'。也许您应该考虑将这样的字段引入您的架构中。您可以设置触发器来更新日期时间信息，如下所示：

```
CREATE TRIGGER mytable_update BEFORE UPDATE ON `mytable`
FOR EACH ROW SET NEW.updated_at = NOW(); 
```

当然，您可以通过上面回答的 select 语句检索最近更新的记录：

```
ORDER BY `updated_at` DESC LIMIT 1; 
```

此外，时间敏感表通常有一个字段“created_at”，该字段在插入行时带有不变的时间戳集。它通常像这样连接到触发器：

```
CREATE TRIGGER mytable_create BEFORE INSERT ON `mytable`
FOR EACH ROW SET NEW.created_at = NOW(), NEW.updated_at = NOW(); 
```

上面的第一个触发器应该反映这一点，并通过附加语句携带 created_at 信息：

```
NEW.created_at = OLD.created_at; 
```

如果您使用框架（如 Django，如您标记 Python），则可以由 ORM 处理。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-19T18:16:40.880

select top 1 * from tablename order by date_and_time DESC（对于 sql server）

select * from taablename order by date_and_time DESC 限制 1（对于 mysql）

# c - C中的外部声明和头文件

> ID：11566541
> 
> 赞同：2
> 
> 时间：2012-07-19T17:51:43.020
> 
> 标签：c, global-variables, declaration, extern

我在这里看这个问题： [如何使用 extern 在源文件之间共享变量？](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c) 跟着手册。但我仍然收到链接器错误......希望得到一些帮助和解释为什么会发生......

我有 2 个 .c 文件和一个头文件：

------检查.h----

```
#ifndef check
#define check

extern int num;

 #endif 
```

----检查.c----

```
 #include "check.h"
   #include <stdio.h>

   int func(int x, int y)
   {
int z = x+y;
return z;
   }
   void printnum()
   {
num++;
printf("%d",num);
   } 
```

----ynnynyny.c----

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <string.h>
#include "check.h"
#include "check.c"

int num = 10;
int main() 
{ 
printf("num before is : %d\n",num);
printnum();
printf("num now is : %d",num);
getchar();

return 0; 
} 
```

我不断收到这些错误：

```
1>  ynnyny.c
1>  check.c
1>  Generating Code...
1>ynnyny.obj : error LNK2005: _func already defined in check.obj
1>ynnyny.obj : error LNK2005: _printnum already defined in check.obj 
```

我写了#ifndef 的东西和extern 声明，那么问题是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T17:53:06.440

不要在 ynnynyny.c 中包含“check.c”

# ruby-on-rails - Heroku上的应用程序错误

> ID：11566543
> 
> 赞同：0
> 
> 时间：2012-07-19T17:51:55.863
> 
> 标签：ruby-on-rails, ruby

我今天将应用程序上传到 Heroku 并看到此错误：应用程序错误

应用程序发生错误，无法提供您的页面。请稍后重试。

如果您是应用程序所有者，请查看您的日志以获取详细信息。

这个应用程序在本地工作。这是我的日志。有人有什么想法吗？

```
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'

2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/engine.rb:436:in `each'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/initializable.rb:54:in `each'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
2012-07-19T15:36:53+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/actives
upport-3.2.6/lib/active_support/dependencies.rb:251:in `require': /app/app/contr
ollers/comments_controller.rb:9: syntax error, unexpected $end, expecting keywor
d_end (SyntaxError)
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.6/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.6/lib/active_support/dependencies.rb:313:in `depend_on'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-07-19T15:36:53+00:00 app[web.1]:   from config.ru:1:in `new'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
activesupport-3.2.6/lib/active_support/dependencies.rb:225:in `require_dependenc
y'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/engine.rb:438:in `block in eager_load!'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-07-19T15:36:53+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/lib/rack/adapter/loader.rb:33:in `eval'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/engine.rb:438:in `each'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/application/finisher.rb:53:in `block in <module:Finishe
r>'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/initializable.rb:30:in `run'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/engine.rb:436:in `eager_load!'
2012-07-19T15:36:53+00:00 app[web.1]:   from config.ru:3:in `require'
2012-07-19T15:36:53+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/lib/rack/adapter/loader.rb:33:in `load'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/t
hin:19:in `load'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/lib/thin/controllers/controller.rb:71:in `start'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<t
op (required)>'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/
thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-07-19T15:36:53+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/t
hin:19:in `<main>'
2012-07-19T15:36:54+00:00 heroku[web.1]: Process exited with status 1
2012-07-19T15:36:54+00:00 heroku[web.1]: State changed from starting to crashed
2012-07-19T15:36:57+00:00 heroku[router]: Error H10 (App crashed) -> GET secret-
reaches-4317.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-19T15:36:57+00:00 heroku[router]: Error H10 (App crashed) -> GET secret-
reaches-4317.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes 
```

我的控制器代码

```
class CommentsController < ApplicationController
 http_basic_authenticate_with :name => "test", :password => "test", :only => :destroy
  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])
    redirect_to post_path(@post)
  end

  def destroy
    @post = Post.find(params[:post_id])
    @comment = @post.comments.find(params[:id])
    @comment.destroy
    redirect_to post_path(@post)
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:08:41.413

根据错误，您`$end`在应该使用时使用`end`. 但是，您向我们展示的代码是正确的。所以，我相信你在 heroku 上的代码和你在电脑上的代码不一样。

尝试将您的代码更新到 github，然后再次更新到 heroku：

```
git add .
git commit -m "update"
git push
git push heroko 
```

# php - php。如何提取新数组的数组键？

> ID：11566554
> 
> 赞同：0
> 
> 时间：2012-07-19T17:53:05.830
> 
> 标签：php, arrays

我怎样才能`server_vps_de_dc1_s1`从这个数组中提取：

```
$server = array(    
    "vps" => array (        
        "de" => array (     
            "dc1" => array (                
                "s1" => array (                 
                    "name"=>    "Xen VPS 200",
                    "processor"=>   "200 MHz",
                    "memory"=>  "200 MB",
                ),                  
            ),              
        ),              
    ),              
    "dedicated" => array (      
        ...
    ),    
); 
```

构建应该看起来像这样的新数组：

```
$server_id = array(    
    "1" => "server_vps_de_dc1_s1",
    "2" => "server_vps_de_dc1_s2",
    "3" => "server_vps_de_dc2_s1",
    "4" => "server_vps_usa_dc1_s1",
    ...
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:57:44.120

你需要递归：

```
function get_keys( $array)
{
    if( !is_array( $array)) 
        return array();
    $k = key( $array);
    return array_merge( array( $k), get_keys( $array[$k]));
} 
```

你会像这样调用它：

```
$keys = get_keys( $array);
array_pop( $keys); // Get rid of the last key: 
```

你得到作为输出：

```
array(4) { [0]=> string(3) "vps" [1]=> string(2) "de" [2]=> string(3) "dc1" [3]=> string(2) "s1" } 
```

您可以通过以下方式形成新的价值观`implode()`：

```
$new_value = implode( '_', $keys); // Outputs "vps_de_dc1_s1" 
```

[演示](http://viper-7.com/oLIELj)

# android - 哪些 Android 手机运行 Android 2.3.3？

> ID：11566557
> 
> 赞同：2
> 
> 时间：2012-07-19T17:53:17.580
> 
> 标签：android, android-2.3-gingerbread

我想购买几部最常用的 Android 手机来测试我的应用程序。这令人惊讶地难以弄清楚。

[Android Dashboard](http://developer.android.com/about/dashboards/index.html)指出 2.3.3 是最常用的操作系统，但我似乎找不到任何运行它的手机......[维基百科](http://en.wikipedia.org/wiki/Comparison_of_Android_devices)似乎说只有 HTC Flyer 有它。

我可以使用 Android 2.3.3 获得哪些 Android 手机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:04:50.560

所有运行 Android 的设备都`2.3.x`使用相同的公共应用程序框架（Gingerbread，API 级别 10），因此从开发人员的角度来看，不同版本之间没有区别（除了错误修复和优化）。只要您保持更新，任何便宜的姜饼设备都应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T18:03:14.273

我有一个运行 2.3.3的[LG-P500](http://www.gsmarena.com/lg_optimus_one_p500-3516.php) （擎天柱）一年多一点。我不认为你能在市场上找到一个，而且大多数新的已经升级到 >= 3.0。我想，你可以去二手市场试试运气。

# iphone - Xcode 加载核心数据滞后

> ID：11566558
> 
> 赞同：0
> 
> 时间：2012-07-19T17:53:18.853
> 
> 标签：iphone, core-data

我在核心数据中保存了 3 个实体。我在应用程序的几个视图控制器中加载这些 - 有时从所有 3 个视图控制器中加载数据。下面是我如何加载这些数据并将其分配给一个数组。一旦它在数组中，然后我根据应用程序的当前页面进行排序、过滤、计数或我需要做的任何事情。

```
if (managedObjectContext == nil) 
{ 
    managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
}
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:managedObjectContext];
[request setEntity:entity];
[request setReturnsObjectsAsFaults:NO];
NSError *error = nil;
NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
if (mutableFetchResults == nil)
{
    // Handle the error.
    NSLog(@"mutableFetchResults == nil");
}
[self setEventsArray:mutableFetchResults]; 
```

我遇到的问题是：

*   我不喜欢有很多重复的代码——这出现在每个需要核心数据的视图控制器上。
*   从一个实体中，我正在保存图像的二进制数据，这在我加载该数据时会导致延迟

那么，有没有办法使用以下条件从核心数据加载`eventId = [NSString stringWithFormat:@"%@", currentEventId]`

或者（可能更合适）有一个单独的类，在应用程序启动时加载数据。然后我可以访问（加载的数据的）类数组以用于当前页面。然后，如果我保存、编辑或删除对象，只需重新加载数据。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:13:18.603

1.  对于您的第一个问题，您应该查看将 Ruby on Rails 的 Active Record 引入 CoreData 的 MagicalRecord [。](https://github.com/magicalpanda/MagicalRecord/)它将缩短清除您的核心数据代码。

2.  请注意，如果您的图像不小，则应将它们存储在与主实体有关系的单独实体中。这应该可以帮助您解决滞后问题，因为只有当您明确要求时，您才会通过关系加载图像。你可以[在这里](https://stackoverflow.com/questions/2090028/core-data-storing-images-iphone)看到Marcus Zarra 的答案（写了一本关于核心数据的好书）。总有一个选项是您的图像对于核心数据来说太大了。

希望能帮助到你

# c# - c#递归搜索检查文件扩展名

> ID：11566559
> 
> 赞同：0
> 
> 时间：2012-07-19T17:53:19.453
> 
> 标签：c#, file, search, recursion

我想检查我传递的目录中的文件是否具有特定的扩展名。

```
 public static bool ProcessDirectory(string targetDirectory)
 {
     // Process the list of files found in the directory.
     string[] fileEntries = System.IO.Directory.GetFiles(targetDirectory);
     foreach (string fileName in fileEntries)
         if (System.IO.Path.GetExtension(fileName).ToLower().Contains(pattern)) 
             return true;

    // Recurse into subdirectories of this directory.
    string[] subdirectoryEntries = System.IO.Directory.GetDirectories(targetDirectory);
    foreach (string subdirectory in subdirectoryEntries)
        return ProcessDirectory(subdirectory);

   return false;
  } 
```

来自：

```
bool foundPattern = false;
//recursive search - based on search pattern 
if (System.IO.File.Exists(myDirectory) && System.IO.Path.GetExtension(myDirectory).Contains(pattern))
{
     // This path is a file
     foundPattern = true;
}
else if (System.IO.Directory.Exists(myDirectory))
{
     // This path is a directory
     foundPattern = ProcessDirectory(myDirectory);
} 
```

问题是，我没有得到一些结果（假设我在搜索模式中要求扩展名为 .x 的文件，即使存在扩展名为 .xzz 的文件，我也会得到错误的结果——有时我得到正确的结果，有时我得到错误的结果）。

如果我逐步浏览它，看起来我正在查看目录并递归地进入它们并浏览文件......

但事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:07:38.767

你想做的事情可以用这个轻松完成

```
string path = @"C:\temp\";
string extension = "*.txt";
var files = Directory.GetFiles(path, extension);

//or recursivly
var files = Directory.GetFiles(path, extension, SearchOption.AllDirectories); 
```

在你的情况下：

```
public static bool ProcessDirectory(string startPath, string pattern)
{ 
    return Directory.GetFiles(startPath, pattern, SearchOption.AllDirectories).Any();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T17:59:33.470

我认为您的代码中有一个错误：

```
// Recurse into subdirectories of this directory.
string[] subdirectoryEntries = System.IO.Directory.GetDirectories(targetDirectory);
foreach (string subdirectory in subdirectoryEntries)
    return ProcessDirectory(subdirectory); 
```

应该是这样的：

```
// Recurse into subdirectories of this directory.
string[] subdirectoryEntries = System.IO.Directory.GetDirectories(targetDirectory);
foreach (string subdirectory in subdirectoryEntries)
    if (ProcessDirectory(subdirectory))
        return true; 
```

否则，您只会返回单个子目录的结果。这与您在函数开始时的循环相同。你第一次就做对了。

# javascript - 插入日期时的动态智能日期掩码

> ID：11566560
> 
> 赞同：7
> 
> 时间：2012-07-19T17:53:21.390
> 
> 标签：javascript, jquery, prototypejs

javascript 或 jQuery 中是否有一种方法可以在为键输入和复制粘贴到文本框中键入日期时动态检测和更改？

我正在尝试创建一个功能文本框，它有两个数字，例如一个月。

由于月份可以是 1 到 12 之间的数字，我想强制第一个数字为 1 或 0。

然而，我尝试做的技巧是当文本框首先获得焦点并且用户想要输入一个数字时，如果该数字是 2 - 9 我想要一个零来自动填充第一个位置，然后是 9第二个位置。

在我输入任何内容之前，此日期输入将如下所示：

```
__/__/_____ 
```

如果我输入“1”

```
1_/__/_____ 
```

如果我输入“2”应该得到

```
02/__/_____ 
```

如果我输入“22”应该得到

```
02/2_/_____ 
```

如果我输入“77”应该得到

```
07/07/_____ 
```

我会对带有代码的答案或已经执行此操作的工具的链接或以前帖子的链接非常感兴趣？

最终我想把它放在一个蒙版中，所以 7/7/2011 或 7/7/11 或 07/07/2011 将始终填充到 07/07/2011。在最终的最终版本中，我试图让年份默认为当前十年，但下降到每 10 年++--。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:14:05.050

为什么不将侦听器附加到文本框的模糊部分，而不是用户的输入。

考虑一下如果您输入“1”时的用户体验，突然间，输入开始在您正在执行的操作中添加或删除零，而您正在执行此操作？

```
var dayInput = document.getElementById("day-input");
// usually, I'd just use event-listeners, but feel free to refactor
dayInput.onblur = handleDayOrMonth;

function handleDayOrMonth () {
    var el = (this === window) ? event.srcElement : this,
        number_string = el.value;

    // checking that it's an actual number
    if (!isNaN(parseInt(number_string)) {
        if (number_string.length === 1) { el.value = "0" + number_string; }
    }
} 
```

处理年份是一样的，只是你要在它的开头添加“20”。

随意 jQuery 吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T02:47:07.147

我相信您想要的功能是由[jQuery Masked Input 插件提供的](http://digitalbush.com/projects/masked-input-plugin/)

演示：http: [//jsfiddle.net/SO_AMK/SEXAj/](http://jsfiddle.net/SO_AMK/SEXAj/)

请注意，它也只允许数字字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:48:19.973

答案在这里... jQuery[屏蔽输入插件](http://www.angelwatt.com/coding/masked_input.php#nav-example)。

# c++ - 使用 SFINAE 在 GCC 和 Clang 上给出不同的结果

> ID：11566564
> 
> 赞同：6
> 
> 时间：2012-07-19T17:53:36.227
> 
> 标签：c++, gcc, clang, sfinae

我正在学习如何利用 SFINAE 发挥我的优势。我正在尝试使用它来根据`serialize()`对象中是否存在函数来选择函数实现。

这是我用来确定类型是否定义了 serialize() 函数的代码：

```
template <typename T>
class HasSerialize {
    private:
        typedef char yes[1];
        typedef char no[2];

        template <typename C> static yes& test(char[sizeof(&C::serialize)]) ;
        template <typename C> static no& test(...);
    public:
        static const bool value = sizeof(test<T>(0)) == sizeof(yes);
}; 
```

然而，它似乎在 GCC 和 Clang 上给出了完全相反的结果。假设以下代码：

```
template<bool T>
class NVPtypeSerializer {
    public:
        template<typename C>
        static xmlChar* serialize(C value) {
            // serize() is not available
        }
};

template<>
struct NVPtypeSerializer<true> {
    public:
        template<typename T>
        static xmlChar* serialize(T value) {
            return value.serialize();
        }
}; 
```

像这样称呼它：

```
foo = NVPtypeSerializer<HasSerialize<Bar>::value >::serialize(value); 
```

类`Bar`没有该`serialize()`功能的地方。此代码在 Clang 3.1 下编译良好，但在 GCC 4.7.1 上出现以下错误：

```
error: ‘class Bar’ has no member named ‘serialize’ 
```

如果我将其更改`struct NVPtypeSerializer<true>`为`struct NVPtypeSerializer<false>`它可以在 GCC 上编译，但 Clang 会给出以下错误：

```
error: no member named 'serialize' in 'Bar' 
```

问题出在哪里？它在我的代码中吗？我希望代码尽可能可移植。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:15:42.860

这真的是代码`test(char[sizeof(&C::serialize)])`吗？请注意，接受数组的函数的声明实际上声明了一个接受指针的函数：

```
template <typename C> static yes& test(char[sizeof(&C::serialize)]) ; 
```

这实际上意味着：

```
template <typename C> static yes& test( char* ); 
```

顺便说一句，这就是使您的调用`test<C>(0)`编译的原因。我认为这不是检测函数是否存在的正确方法。谷歌如何使用 SFINAE 检测类中是否存在成员/成员函数。

（一个简单的解决方案是添加一个额外的默认参数——前提是您有启用 C++11 的编译器：

```
template <typename C, std::size_t = sizeof(&C::serialize)> 
static yes& test(int) ; 
```

)

# java - Velocity PagerTool 在我的分页中创建了不正确的链接

> ID：11566567
> 
> 赞同：0
> 
> 时间：2012-07-19T17:53:39.217
> 
> 标签：java, pagination, velocity

我正在尝试使用速度 PagerTool 为我的速度模板添加分页。我按照他们网站上的说明进行操作，甚至使用了他们的示例代码。在转发到我的模板之前，我填充了寻呼机项目并在我的控制器中设置了每页的项目数。

当我导航到该页面时，一切“看起来”都可以正常工作，但是，当我单击分页编号时，它就不起作用了。我知道我的物品进入了寻呼机，因为它正确地显示了页面上的物品。

分页是这样的：< 1 2 3 4 5 6 >

当我单击 1 时，它会刷新页面并为页面显示一组不同的值。当我点击任何大于 1 的东西时，它会中断。有任何想法吗？

我猜我要么没有正确使用链接（即使我完全按照他们所说的那样做），要么我的控制器中没有正确填充一些东西。

这是我的控制器中的内容：

```
PagerTool pager = new PagerTool();
pager.setItemsPerPage(10);
pager.setItems(myListOfItems);
request.setAttribute("pager", pager);           
request.setAttribute("new.items", myListOfItems); 
```

我使用了他们在文档中提供的示例代码：[PagerTool][1]

这是我在我的 vm 模板中使用的代码：

```
 #if( $pager.hasItems() )
   Showing $!pager.pageDescription<br>
     #set( $i = $pager.index )
     #foreach( $item in $pager.page )
       ${i}. $!item <br>
       #set( $i = $i + 1 )
     #end
     <br>
     #if ( $pager.pagesAvailable > 1 )
       #set( $pagelink = $link.self.param("show",$!pager.itemsPerPage) )
       #if( $pager.prevIndex )
           <a href="$pagelink.param('index',$!pager.prevIndex)">Prev</a>
       #end
       #foreach( $index in $pager.slip )
         #if( $index == $pager.index )
           <b>$pager.pageNumber</b>
         #else
           <a href="$pagelink.param('index',$!index)">$!pager.getPageNumber($index)</a>
         #end
       #end
       #if( $pager.nextIndex )
           <a href="$pagelink.param('index',$!pager.nextIndex)">Next</a>
       #end
     #end
   #else
   No items in list.
   #end 
```

我已经到处寻找答案，但还没有找到任何可行的方法。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:47:00.327

看起来您是在手动配置工具，而不是让 VelocityTools 来做。这很好，但是你必须调用（在java中）pager.setup(request); 在每个请求上，以便它知道您在哪个页面上以及所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T06:05:23.487

我正在使用带有 SSH 的速度和速度工具 2.0。我在使用 PagerTool 和 LinkTool 时遇到了问题。我无法生成正确的分页链接。这是我的代码：

```
 Page<User> userList = (Page<User>) userService.getUserList(user, pageInfo);
    PagerTool pager = new PagerTool();
    pager.setItemsPerPage(1);
    ArrayList list = new ArrayList();
    list.addAll(userList.getPageElements());
    pager.setItems(list);
    ServletActionContext.getRequest().setAttribute("new.items", list);
    ActionContext.getContext().put("pager", pager); 
```

我不知道如何使用 LinkTool。

# java - eclipse中java的匹配花括号之间的垂直线

> ID：11566569
> 
> 赞同：41
> 
> 时间：2012-07-19T17:53:50.870
> 
> 标签：java, eclipse, syntax, editor

我是 Eclipse IDE 的新手。
我们可以在 Eclipse 中为 Java 编辑器执行以下操作吗？

```
{
|
|
} 
```

如何在 Eclipse 中配置它以在 Java 编辑器中显示匹配的花括号之间的垂直线？是否可以？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-25T07:00:32.690

有有用的插件。尝试： [IndentGuide](http://sschaef.github.io/IndentGuide/)或 [EditBox](http://editbox.sourceforge.net/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-08-20T15:23:37.080

我可以建议的最接近的解决方案是：

1.  单击 Eclipse IDE > Window > Preferences > General > Editors > Text Editors

2.  然后单击链接“空白字符”以指定应显示的内容。

3.  然后只为选项卡启用“前导和封闭”复选框，其余的不选中。

这不是完美的解决方案，但它可能有用。

![例子](../Images/a632e6efca54dc78bab512c32ae0257e.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-19T18:02:19.190

您可以通过将光标定位在大括号（开头或结尾的）之后，在 Eclipse 中识别匹配的大括号，匹配的大括号将自动包含在一个矩形中。你不能按你说的去做。按照我所说的定位光标后，您可以按 CTRL + SHIFT + P 跳转到匹配的大括号。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-19T18:03:42.120

据我了解，这是不可能的。然而，Eclipse 确实具有帮助您使用括号的功能，并且它实际上比您正在寻找的 Notepad++ 风格更精致和用户友好。

1.  首先，它具有匹配括号下突出显示的功能`Preferences->Java->Editor`。当您的光标位于括号上时，它将突出显示匹配的括号。
2.  沿着这些相同的思路，如果您的光标在一个括号上并且您按下`ctrl + shift + p`它将跳转到匹配的括号。
3.  它具有折线功能，可以切换`Preferences->Java->Editor->Folding`为括号、注释等。
4.  在左括号或右括号后双击将突出显示该代码块中的所有内容。
5.  Eclipse 也支持自动缩进。这应该是一个关于哪块代码属于哪个括号的可视队列。

希望这可以帮助！快乐编码！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T18:54:03.563

Eclipse 的结构化编辑器（包括 Java 编辑器）提供了光标所在结构元素的突出显示。突出显示在编辑器的左边框。例如，在下面的屏幕截图中，光标位于`listIterator()`方法中，突出显示（用箭头指出）突出显示结构元素，在本例中为 Java 方法。

不幸的是，我认为无法配置该突出显示的颜色或外观。

![在此处输入图像描述](../Images/592647511283580365d32d736729ac28.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T18:02:54.950

我认为 Eclipse 中不存在此功能。

如果是这样，它很可能可以在以下位置找到：

> 窗口 > 首选项 > 常规 > 外观

或者

> 窗口 > 首选项 > 常规 > 编辑器

可能有插件可以添加此行为。（不确定我的头顶上有什么，抱歉）

你从这个特性（括号匹配或折叠）中得到什么价值？也许还有另一个内置的 Eclipse 功能可以替换您使用这些行的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T18:18:19.897

您还可以在 Eclipse 中突出显示括号 - 请参阅[http://blog.deepakazad.com/2012/03/jdt-3842-m6-new-and-noteworthy.html](http://blog.deepakazad.com/2012/03/jdt-3842-m6-new-and-noteworthy.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-27T07:44:14.590

1-转到：[https](https://marketplace.eclipse.org/content/indent-guide) ://marketplace.eclipse.org/content/indent-guide 2-您将看到一个安装图标，将其拖到正在运行的 Eclipse 工作区。3-通过以下安装向导安装它。4-重新启动您的 Eclipse。5-在您的 Eclipse IDE 中，转到：Window → Preferences → General → Editors → Text Editors → Indent Guide 6-然后启用缩进指南复选框。7-享受！

# xslt - 在 XSLT 模板中传递标签

> ID：11566574
> 
> 赞同：1
> 
> 时间：2012-07-19T17:54:22.970
> 
> 标签：xslt, xhtml

我刚开始学习 XSLT，一切正常，直到我尝试集中格式化。

这是我的问题：

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>

<document>

<code>code</code>

<code>2<exp>3</exp></code>

<text>
This is a <special>special</special> word. 2<exp>3</exp>
</text>

</document> 
```

**XSLT**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml" indent="yes" doctype-system="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" doctype-public="-//W3C//DTD XHTML 1.1//EN" encoding="utf-8"/>

<xsl:template name="times">·</xsl:template>

<xsl:template name="pow">
  <xsl:param name="exponent"/>
  <xsl:element name="sup"><xsl:value-of select="$exponent"/></xsl:element>
</xsl:template>

<xsl:template match="exp">
  <xsl:call-template name="times"/>
  <xsl:text>10</xsl:text>
  <xsl:call-template name="pow">
    <xsl:with-param name="exponent"><xsl:apply-templates/></xsl:with-param>
  </xsl:call-template>
</xsl:template>

<xsl:template name="codeword">
  <xsl:param name="word"/>
  <xsl:element name="tt">
    <xsl:value-of select="$word"/>
  </xsl:element>
</xsl:template>

<xsl:template match="special">
  <xsl:call-template name="codeword">
    <xsl:with-param name="word"><xsl:apply-templates/></xsl:with-param>
  </xsl:call-template>
</xsl:template>

<xsl:template match="document">
  <xsl:element name="html">
    <xsl:attribute name="xmlns">http://www.w3.org/1999/xhtml</xsl:attribute>
    <xsl:element name="head">
      <xsl:element name="title"><xsl:text>Title</xsl:text></xsl:element>
    </xsl:element>
    <xsl:element name="body">

      <xsl:apply-templates select="code"/>

      <xsl:apply-templates select="text"/>

    </xsl:element>
  </xsl:element>
</xsl:template>

<xsl:template match="code">
  <xsl:element name="div">
    <xsl:text>(</xsl:text>
    <xsl:call-template name="codeword">
      <xsl:with-param name="word"><xsl:apply-templates/></xsl:with-param>
    </xsl:call-template>
    <xsl:text>)</xsl:text>
  </xsl:element>
</xsl:template>

<xsl:template match="text">
  <xsl:element name="p">
    <xsl:apply-templates/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

**XHTML**（使用 xsltproc）

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Title</title>
  </head>
  <body>
    <div>(<tt>code</tt>)</div>
    <div>(<tt>2·103</tt>)</div>
    <p>
This is a <tt>special</tt> word. 2·10<sup>3</sup>
</p>
  </body>
</html> 
```

因此，我试图将源 XML 中的`<code>`和标记都转换为XHTML 中的标记。但是，如果当我在内容中添加更多标签时（例如在本例中，通过“exp”和“pow”模板），它们会在添加时被删除（如在该行中，应该是）。`<special>``<tt>``<sup>``<tt>``<tt>2·103</tt>``<tt>2·10<sup>3</sup></tt>`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:27:45.797

像往常一样，我在提出问题后不久就找到了答案（我花了一些时间才试图找到答案）。答案就[在这里](https://stackoverflow.com/q/3269583/1538701)，我必须在使用参数时使用`copy-of`而不是。`value-of`

# javascript - 使用 jquery/ajax 在另一个颜色框上使用颜色框

> ID：11566580
> 
> 赞同：0
> 
> 时间：2012-07-19T17:54:41.157
> 
> 标签：javascript, jquery, ajax, colorbox

我有一个页面，我在其中使用 id="emailfrnd"，从以下脚本中我成功实现了颜色框：

```
<script type="text/javascript">
$(document).ready(function(){
$("#emailfrnd").colorbox({
        inline: true,
        href:"#ef",
        close:"",
    opacity:0.95,
        onClosed:function(){
            //window.parent.location.reload(true);
        }
         });
 });
</script> 
```

现在新的颜色框包含一个表单，其中包含一个 ID 为“emailfrnd_submit”的发送按钮现在我已经使用 jquery 和 ajax 编写了一些验证，如果没有错误消息，我将得到另一个颜色框，代码如下：

```
if (errorMessage == '') {
    $.ajax({
        type: 'POST',
        url: root_url + '/services/services.php?method=emailfrnd',
        data: "name=" + name + "&email=" + email + "&message=" + message,
        async: true,
        success: function (data) {
            if (data == 1) {
                $("#emailfrnd_submit").colorbox({
                    inline: false,
                    close: "",
                    html: "<div style='height:230px;width:400px;display:block;'><p style='color:black;font:16px verdana;'>Your email was successfully sent.</p><br/><p style='color:gray; font:16px verdana;'>Thank you for telling your friend</p><div id='emailfrnd_sub' style='width: 50px;margin-top:30px;float: right;'><input type='submit' value='OK' name='emailfrnd_submit' id='emailfrnd_sub' class='redbut' style='float:right;position:absolute;right: 198px;margin-top: 0px;color:white;'></div></div>",
                    opacity: 0.95,
                    onClosed: function () {
                        //window.parent.location.reload(true);
                    }
                });
                //window.location.assign("../index.php");
            } else {
                alert('mail not send');
            }
        }
    });
} else {
    alert(errorMessage);
}
}); 
```

到目前为止，我成功地得到了我想要的东西，在进行验证后，根据此代码单击发送按钮，一个带有上述 html 内容的新颜色框即将出现，这里我有一个确定按钮，我想做该按钮作为此颜色框的关闭按钮。我怎样才能在这里获得确定按钮的功能？非常感谢任何人的帮助....在此先感谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:28:16.400

**您不需要 2 个颜色框来执行此操作**。
你为什么不简单地创建一个`div`哪个类，`message_content`然后根据 ajax 状态更新它的文本？
好多了。

**示例**：

**html**：

```
<div id="colorbox_content"> //@todo: change to colorbox id

    <form id="your_form">   //@todo: change according to your form id

    </form>

    <div class="message_content">

        <p class="message"></p>
        <span class="close"><a href="javascript:void(0);">Close</a></span>

    </div>

</div> 
```

**js**：

```
/**
 * Close message
 */
jQuery('#colorbox_content').on('click', '.close', function() {
    jQuery(this).closest('#message_content').slideUp();
});

/**
 * On form submit
 */
if (errorMessage == '') {
    $.ajax({
        type: 'POST',
        url: root_url + '/services/services.php?method=emailfrnd',
        data: "name=" + name + "&email=" + email + "&message=" + message,
        async: true,
        success: function (data) {
            if (data == 1) {
                var message = "Your email was successfully sent.";
                //window.location.assign("../index.php");
            } else {
                var message = "Your email was successfully sent.";
            }
            jQuery('#colorbox_content').slideDown().find('.message').text(message);
        }
    });
} else {
    alert(errorMessage);
} 
```

根据[此](https://stackoverflow.com/questions/11566580/using-colorbox-over-another-colorbox-using-jquery-ajax/11571246#comment15310468_11571246)评论更新：

如果您希望不同按钮具有相同的功能，则必须`class`对它们使用相同的功能。这就是你需要的。
[**演示**](http://jsfiddle.net/4vuDC/187/)

我将一些更改`ids`为，`classes`因此您不需要使用相同代码的 2 个事件。

这是[**las 版本**](http://jsfiddle.net/4vuDC/190/)。
您可以看到您可以存储`options`每种颜色框，然后通过参数传递它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:09:08.813

i got the answer and the fiddile shows how to do it.....::::))))) [http://jsfiddle.net/srinivaswaterdrop01/4vuDC/189/](http://jsfiddle.net/srinivaswaterdrop01/4vuDC/189/)

# iphone - 基于 .m3u8 的视频在 iOS 上仍然存在严重的缓冲问题

> ID：11566591
> 
> 赞同：2
> 
> 时间：2012-07-19T17:55:18.630
> 
> 标签：iphone, ios, ipad, streaming, video-streaming

我正在为客户端实现流式视频解决方案，目标是 iOS 设备（主要是 iPad）。

我已经将我的视频文件切成了 TS，并且我有我的随附 m3u8 文件。它们由通用网络主机托管，并由 Amazon CloudFront 提供 CDN，因此纸张速度应该没问题。

我注意到，不管怎样，iPad 在预定点（大概是一段结束，另一段开始的地方）仍然存在大量缓冲问题。

我对 TS 文件的最低比特率是 600kb/s，这对于典型的 WiFi 流媒体来说似乎已经很低了，但它仍然很难停止。

我试图弄清楚出了什么问题......我不认为这是文件托管......因为一旦它开始下载，它就会很快。我觉得也许我的 m3u8 不完整或不充分......

附带说明一下，这些视频只有 30-35 秒长，媒体分段器将它们切成 3-4 段。

有没有人见过这样的事情？

# map - 映射和反向子列表方案

> ID：11566592
> 
> 赞同：1
> 
> 时间：2012-07-19T17:55:29.630
> 
> 标签：map, scheme, reverse

我想编写一个函数来反转列表中的所有子列表（但只有顶层的子列表）。我试图弄清楚我是否可以只`filter`列出列表并`reverse`在使用之前`map`通过做做 `(filter list? (reverse '((1 2) 9 (16 5) 64)))`，但这只是反过来`((16 5) (1 2))`。我正在寻找类似的输出：`((2 1) 9 (5 16) 64))`.

我应该使用`map`and `reverse`，但我无法从那里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:55:09.587

这很简单，您只需要在尝试反转它之前询问每个项目是否是一个列表：

```
(define lst '((1 2) 9 (16 5) 64))

(map (lambda (e)
       (if (list? e) (reverse e) e))
     lst)

> '((2 1) 9 (5 16) 64) 
```

`filter`在这种情况下不起作用，因为您有兴趣处理输入列表中的*所有*元素，即使只需要反转实际列表。

# javascript - jquery 选项卡和 js 加载内容

> ID：11566593
> 
> 赞同：0
> 
> 时间：2012-07-19T17:55:29.577
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我正在尝试将 jquery ui 选项卡与 js 和 mvc3 一起使用。

```
 <div class="demo">
        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">Tab One</a></li>
                <li><a href="#tabs-2">Tab Two</a></li>
            </ul>
            <div id="tabs-1">
                <p>  </p>
            </div>
            <div id="tabs-2">
                <p>  </p>
            </div>
        </div>
   </div> 
```

文件

```
function GetTabData(xdata) {
    $.ajax({
        url: ('/Home/GetTabData'),
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: xdata }),

        success: function (result) {
            alert("OK !");
        },
        error: function () { alert("error"); }
    });
} 
```

MVC3

```
public ActionResult GetTabData(string xdata)
{
    data = fetch data and return to the calling script    
    return PartialView("_TabDataPartial", data);
} 
```

所以这个问题将是非常基本的，如何将 js GetTabData() 调用与 TabOne 和 TabTwo 绑定

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:14:43.200

尝试 ：

```
 $('a').click(function(e) { 
  e.preventDefault();   
  alert($(this).attr('href'));
 //Call GEtdata here
}); 
```

你也需要改变这个

```
 public ActionResult GetTabData(string xdata) 
```

到

```
 public ActionResult GetTabData(string id) 
```

因为你`id`在你`data`的`ajax`电话中发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:03:09.203

您可以利用 HTML5 数据属性并通过以下方式定义链接​​：

```
 <a href="#tabs-1" data-tabId="1" class="tabLink">Tab One</a> 
```

然后在您的 js 中，只需绑定 on click 事件即可执行以下操作：

```
$('.tabLink').on('click', function() {
    var id = $(this).data('tabId');
    GetTabData(id);
}); 
```

# ruby-on-rails - 即使没有加载文档，也会调用 AJAX

> ID：11566595
> 
> 赞同：1
> 
> 时间：2012-07-19T17:55:37.787
> 
> 标签：ruby-on-rails, ajax, coffeescript

我的咖啡脚本中有这段代码：

```
$('.asdasd').ready ->
  $.ajax '/splunk/100000000',
  type: 'GET'
  cache: false
  success: (html) ->
    $('.splunk_results').append html 
```

div 甚至不存在 - 但是，在我的`asdasd`控制台中，我可以看到正在调用 /splunk/10000000"。为什么会这样？

编辑：

我认为问题可能与以下事实有关. 我基本上想看看那个 div 何时存在，当它存在时，发出一个新请求并用该请求的结果填充 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:02:27.910

（针对问题编辑进行了大量编辑）

`.ready`只是文档的有效事件。 [jQuery 的文档 for`ready`](http://api.jquery.com/ready/)没有定义参数`$`is not的情况下的行为`document`。也就是说，没有什么能阻止您定义一个按照您想要的方式运行的事件！与其监听就绪事件，不如发明一个自定义事件（例如`readyForSplunk`）并在适当的时间触发它。

文档或要创建的 div 的某个更近的父级`asdasd`应该有一个代理处理程序来监听`readyForSplunk`事件。创建`asdasd`div 的 js 按钮也应该是新的 div。[`triggerHandler`](http://api.jquery.com/triggerHandler/)`('readyForSplunk')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:04:16.990

`ready`当[DOM 准备好](http://api.jquery.com/ready/)时运行。如果您只希望它在有问题的元素在页面中时运行，您可以执行以下操作：

```
_get = ->
  $.ajax '/splunk/100000000',
    type: 'GET'
    cache: false
    success: (html) ->
      $('.splunk_results').append html

$('.asdasd').each ->
  _get()
  _get = -> 
```

# python - Python用lxml下载图片

> ID：11566596
> 
> 赞同：5
> 
> 时间：2012-07-19T17:55:42.793
> 
> 标签：python, web-scraping, python-requests, lxml

我需要在与此类似的 HTML 代码中找到一张图片：

```
...
<a href="/example/1"> 
    <img id="img" src="http://example.net/example.jpg" alt="Example" />
</a>
... 
```

我正在使用 lxml 和请求。

这是代码：

```
import lxml
from lxml import html
import requests

url = 'http://www.example.com'

r = requests.get(url)
tree = lxml.html.fromstring(r.content)

img = tree.get_element_by_id("img")
f = open("image.jpg",'wb')
f.write(requests.get(img['src']).content) 
```

但我收到一个错误：

```
Traceback (most recent call last):
  File "/Users/Name/Documents/Python/Example/Script.py", line 13, in <module>
    s = requests.get(img['src'])
  File "/Library/Python/2.6/site-packages/lxml/lxml.etree.pyx", line 1052, in lxml.etree._Element.__getitem__ (src/lxml/lxml.etree.c:38272)
TypeError: 'str' object cannot be interpreted as an index 
```

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T20:47:55.117

尝试`f.write(requests.get(img.attrib['src']).content)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T22:42:44.207

```
import lxml.html
import requests

url = 'http://www.example.com/'
tree = lxml.html.parse(url)
img = tree.get_element_by_id('img')
img_url = img.attrib['src']

with open('image.jpg', 'wb') as outf:
    data = requests.get(img_url).content
    outf.write(data) 
```

# c++ - Emacs C++ 模式缩进

> ID：11566600
> 
> 赞同：2
> 
> 时间：2012-07-19T17:55:49.513
> 
> 标签：c++, emacs, indentation

> **可能的重复：**
> [使 Emacs 对缩进不那么激进](https://stackoverflow.com/questions/1330066/make-emacs-less-aggressive-about-indentation)

每当我在 Emacs 的 C++ 模式下键入并打开或关闭括号时，它都会缩进整个表达式。我不希望这种情况发生。如何关闭此功能？我可以关闭所有自动缩进功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:18:23.330

尝试：`(c-toggle-electric-state -1)`

从文档：

> c-toggle-electric-state 是 `cc-cmds.el' 中的交互式编译 Lisp 函数。
> 
> (c-toggle-electric-state & optional ARG)
> 
> 切换电动压痕功能。可选数字 ARG（如果提供）在正时打开电子压痕，在负时将其关闭，并在零或省略时切换它。

# php - php中的什么命令可以控制windows？

> ID：11566606
> 
> 赞同：0
> 
> 时间：2012-07-19T17:56:15.417
> 
> 标签：php, windows

我正在尝试通过 php 在 Windows 中进行一些修改，例如：

*   注册值
*   在用户界面中执行程序
*   ETC

你能告诉我控制 Windows 的可用命令是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:57:25.897

[`shell_exec`](http://php.net/shell-exec)和相关的功能是你正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:13:28.683

```
<?php
exec('c:\WINDOWS\system32\cmd.exe');
?> 
```

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

如果您的字符串用双引号 (") 括起来，请记住转义斜杠。

# java - JAX-WS、Axis2 和 CXF 的区别

> ID：11566609
> 
> 赞同：142
> 
> 时间：2012-07-19T17:56:27.457
> 
> 标签：java, jax-ws, cxf, axis2

有什么区别：

1.  [JAX-WS](https://jcp.org/en/jsr/detail?id=224)
2.  [轴 2](http://axis.apache.org/axis2/java/core/)
3.  [CXF](http://cxf.apache.org/)

这三个都可用于在 Java 中创建 Web 服务。
据我所知，JAX-WS 是一种*规范*，而 Axis2 和 CXF 是实现，但如果我没记错的话，Java 1.6 已经实现了 JAX-WS。

那么可以使用 Java 1.6 开发 JAX-WS Web 服务而不使用 Axis2 或 CXF 吗？那么Axis2、CXF有什么用呢？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-19T18:33:28.153

JDK 中内置的 JAX-WS 实现实际上只是基本的肥皂材料。如果您需要任何更复杂的 WS-* 事物，例如 WS-Security、WS-RM、WS-Policy 等...，您需要使用 CXF 或 Metro 或 Axis2 等替代方案之一。它还可能取决于您尝试与之集成的内容。例如，CXF 具有一流的 Spring 支持以及非常好的 OSGi 支持。

除了 JAX-WS 之外，CXF 还有其他东西。它还具有兼容的 JAX-RS 实现，并且非常支持将服务公开为 REST 和 SOAP。如果需要这种类型的东西，则具有符合 W3C 的 SOAP/JMS 实现。基本上，很多东西不能从 in-jdk JAX-WS impl 中获得。

另见：

[Apache CXF 和 Axis 之间的区别](https://stackoverflow.com/questions/1243247/difference-between-apache-cxf-and-axis/1245386#1245386)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-02T18:25:29.217

简而言之。

WSDL WS-* 与语言无关。

JAX-WS 是构建 Web 服务的 Java 标准。

[Apache CXF](http://cxf.apache.org/docs/why-cxf.html)和[Apache Axis 2](http://axis.apache.org/axis2/java/core/)是 JAX-WS 的两个实现。他们还提供 JAX-RS 实现，以便您可以构建 Restful 服务。

CXF 与 Spring 和 Camel( [camel-cxf](http://camel.apache.org/components.html) ) 有更好的集成。而且 Axis 2 似乎没有活动版本。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-02-11T11:58:40.713

我发现 CXF - 与 Spring 的集成非常容易。此外，它提供了各种功能，例如：

1.  自定义日志功能
2.  入站和出站拦截器
3.  应用级安全
4.  使用自定义故障轻松处理异常。

如需更多详细信息，如果需要，请查看此链接：

[http://predic8.com/axis2-cxf-jax-ws-comparison.htm](http://predic8.com/axis2-cxf-jax-ws-comparison.htm)

[http://www.ibm.com/developerworks/java/library/j-jws11/](http://www.ibm.com/developerworks/java/library/j-jws11/)

而且，我阅读了上面的链接，它对我很有帮助。我希望它也适用于你。

谢谢 ！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-14T07:03:33.400

Web 服务组织发布了一些指南，即 BP(Basic Profile) 1.0 和 BP(Basic Profile) 1.1。基于指南所有语言（Java / .Net）人发布规范与默认实现在java中基于BP 1.0规范是JAX-RPC和1.0规范是JAX-WS

*JAX-WS 默认实现是 RI（参考实现） 根据需求/选择我们可以更改实现（RI/AXIS-2/CXF）*

当我们使用 java 1.6 时，JDK 中的这种情况已经可用，因此不需要任何其他 jar。如果您想使用不同的实现，那么这种情况需要特定的实现 jar。

Axis-2 和 CXF 来自 Apache

# javascript - 加载事件后未设置jQuery“this-reference”

> ID：11566610
> 
> 赞同：0
> 
> 时间：2012-07-19T17:56:31.767
> 
> 标签：javascript, this

我不明白为什么函数 foo 中的“this-reference”在被加载事件调用时没有用#searchval 设置？

keyup 事件中 foo 的函数调用有效，但在 load 事件中调用不起作用，因为未设置 this-reference。

例子：

```
<body>
<form action="" method="post">
<input type="text" name="test" value="<?=$_POST['test']?>" id="searchval">
<select id="names" size="3">
<option value="1">WTF1</option>
<option value="2">WTF2</option>
<option value="3">WTF3</option>
</select>
<input type="submit">
</form>
</body>
<script type="text/javascript">

$(document).ready(function() {
    var names = $('#names option').clone();

    function foo() {
        //Change the code to $('$searchval').val(); make it work
        var val = $(this).val(); 
        $('#names').empty();
        names.filter(function(idx, el) {
            return val === '' || $(el).text().indexOf(val) >= 0;
        }).appendTo('#names');
    }
    $('#searchval').bind('keyup', foo);
    $('#searchval').load(foo());
});
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:58:10.170

**您正在使用“foo”的返回值**设置处理程序，而不是函数本身。

它应该是：

```
$('#searchval').load( foo ); 
```

当你通过时`foo()`，你首先调用了这个函数——就是`( )`这样。通过仅传递函数引用，您可以获得所需的效果。

*编辑*-在该问题之上，如评论中所述，您正尝试为永远不会收到此类事件的元素设置“加载”处理程序。您期望导致该事件的原因是什么？也许“改变”是你想要的，而不是“加载”。

*再次编辑*——如果你只是想*模拟*在“keyup”事件发生时调用“foo”，你可以做两件事：

1.  您可以使用“触发器处理程序”：

    ```
    $('#searchval').triggerHandler('keyup'); 
    ```

2.  您可以使用“呼叫”：

    ```
    foo.call($('#searchval')[0]); 
    ```

当然，在这两种情况下，你都不会得到一个像你在真实事件中得到的那样的“事件”对象，但“foo”无论如何都不关心这一点。

# .net - 如何在 .NET 中使用 GetMethod 区分泛型和非泛型签名？

> ID：11566613
> 
> 赞同：24
> 
> 时间：2012-07-19T17:56:54.810
> 
> 标签：.net, c#-4.0

假设存在如下所述的类 X，我如何获取非泛型方法的方法信息？下面的代码会抛出异常。

```
using System;

class Program {
    static void Main(string[] args) {
        var mi = Type.GetType("X").GetMethod("Y"); // Ambiguous match found.
        Console.WriteLine(mi.ToString());
    }
}

class X {
    public void Y() {
        Console.WriteLine("I want this one");
    }
    public void Y<T>() {
        Console.WriteLine("Not this one");
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-19T18:00:25.930

不要使用`GetMethod`，使用`GetMethods`，然后检查`IsGenericMethod`。

```
using System;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        var mi = Type.GetType("X").GetMethods().Where(method => method.Name == "Y"); 
        Console.WriteLine(mi.First().Name + " generic? " + mi.First().IsGenericMethod);
        Console.WriteLine(mi.Last().Name + " generic? " + mi.Last().IsGenericMethod);
    }
}

class X
{
    public void Y()
    {
        Console.WriteLine("I want this one");
    }
    public void Y<T>()
    {
        Console.WriteLine("Not this one");
    }
} 
```

作为奖励 - 一种扩展方法：

```
public static class TypeExtensions
{
    public static MethodInfo GetMethod(this Type type, string name, bool generic)
    {
        if (type == null)
        {
            throw new ArgumentNullException("type");
        }
        if (String.IsNullOrEmpty(name))
        {
            throw new ArgumentNullException("name");
        }
        return type.GetMethods()
            .FirstOrDefault(method => method.Name == name & method.IsGenericMethod == generic);
    }
} 
```

然后只是：

```
static void Main(string[] args)
{
    MethodInfo generic = Type.GetType("X").GetMethod("Y", true);
    MethodInfo nonGeneric = Type.GetType("X").GetMethod("Y", false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T12:32:04.193

根据 Konrad Morawski 的回答，我创建了一个增强的扩展方法：

```
public static MethodInfo GetMethod (this Type i_oContainingType,
                                         string i_sMethodName,
                                         BindingFlags i_enBindingFlags,
                                         Type[] i_aoArgumentType,
                                         bool i_bGeneric)
{
  if (i_oContainingType == null)
    throw new ArgumentNullException (nameof (i_oContainingType));

  var aoMethod = i_oContainingType.GetMethods (i_enBindingFlags);
  var listoMethod = new List<MethodInfo> ();
  foreach (var oMethod in aoMethod)
  {
    if (!string.Equals (oMethod.Name, i_sMethodName))
      continue;
    if (oMethod.IsGenericMethod != i_bGeneric)
      continue;
    var aoParameter = oMethod.GetParameters ();
    if (aoParameter.Length != i_aoArgumentType?.Length)
      continue;
    int iParamMatch = 0;
    for (int ixParam = 0; ixParam < aoParameter.Length; ixParam++)
    {
      if (aoParameter[ixParam].ParameterType == i_aoArgumentType[ixParam])
        iParamMatch++;
    }
    if (iParamMatch != aoParameter.Length)
      continue;
    listoMethod.Add (oMethod);
  }
  if (listoMethod.Count != 1)
  {
    string sError = "Method with Name '" + i_sMethodName + "' and BindingFlags '" + i_enBindingFlags + "' and Parameter Types '" + i_aoArgumentType?.ToString ("', '") + "'";
    if (listoMethod.Count == 0)
      throw new MissingMethodException (sError + " has no match.");
    else
      throw new AmbiguousMatchException (sError + " has " + listoMethod.Count + " matches.");
  }
  return listoMethod[0];
}

public static MethodInfo GetPrivateInstanceMethod (this Type i_oContainingType,
                                                        string i_sMethodName,
                                                        Type[] i_aoArgumentType,
                                                        bool i_bGeneric)
{
  return GetMethod (i_oContainingType, i_sMethodName, BindingFlags.NonPublic | BindingFlags.Instance, i_aoArgumentType, i_bGeneric);
}

public static MethodInfo GetPublicInstanceMethod (this Type i_oContainingType,
                                                       string i_sMethodName,
                                                       Type[] i_aoArgumentType,
                                                       bool i_bGeneric)
{
  return GetMethod (i_oContainingType, i_sMethodName, BindingFlags.Public | BindingFlags.Instance, i_aoArgumentType, i_bGeneric);
} 
```

注意：
`i_aoArgumentType.ToString (..)`是另一种扩展方法。我想你可以猜到它的作用。

# machine-learning - 文档聚类后如何在特定的集群中实现查询搜索？

> ID：11566617
> 
> 赞同：-1
> 
> 时间：2012-07-19T17:57:21.590
> 
> 标签：machine-learning, nlp, cluster-analysis

我有两个集群作为一个类

```
Cluster : class

DocumentList : List<Document>
centroidVector : Map<String,Double> 
```

现在的问题是，当查询被搜索时，它被解析为一个文件，然后被制作成一个文档对象，添加到 documentIndex 并且它的索引与其他文档一起构建。我这样做是因为它必须经过相同的过程，即标记化、词干提取等。但是现在我想在查询向量最相似的特定集群中实现查询搜索，即点积 ~ 0.5 -1。所以我必须在查询向量和集群向量之间取一个点积来做到这一点。但我不知道如何实现它，因为索引是在内存中创建的，而不是存储在数据库中。仍在进行中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:56:02.270

聚类并不意味着*搜索*（即索引等）。这是一个分析步骤，旨在在您的数据集中*找到*可能的未知结构，而不是更快地检索信息。*您有时*可以利用该结构进行更快的搜索，但随后您需要一个可以利用它的索引。

如果您想进行相似性搜索，请立即进行索引！然后尝试通过之前进行一些聚类来改进索引。

# javascript - 移除添加的事件监听器

> ID：11566626
> 
> 赞同：-3
> 
> 时间：2012-07-19T17:57:39.957
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：删除事件侦听器](https://stackoverflow.com/questions/4402287/javascript-remove-event-listener)

我正在使用以下 javascript 在我的 html 页面中添加一些侦听器。但是一旦单击该元素，我就需要删除侦听器。对此的任何想法将不胜感激。

这是侦听器的 JavaScript 代码，

```
document.addEventListener('mousemove',function(e){
    var elem = e.target || e.srcElement;
    if (prevElement!= null) {prevElement.classList.remove("className");}
    elem.classList.add("className");
    prevElement = elem;
},true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:00:25.710

您必须使用命名函数。然后，您可以使用[`removeEventListener`](https://developer.mozilla.org/en/DOM/element.removeEventListener)它来删除它：

```
function mouseMoveCallback(e) {
    // Put your code here...
}

function clickCallback(e) {
    document.removeEventListener('mousemove', mouseMoveCallback, true);
    document.removeEventListener('click', clickCallback, true);
}

document.addEventListener('mousemove', mouseMoveCallback, true);
document.addEventListener('click', clickCallback, true); 
```

# jquery - 在进一步处理之前等待动态 DOM 更新

> ID：11566631
> 
> 赞同：2
> 
> 时间：2012-07-19T17:57:52.137
> 
> 标签：jquery, jquery-callback

我有一些允许用户创作内容的 CMS 代码。我想显示在相应文本区域中键入的文本的预览（很像在 stakeoverflow 中的此处）。首次加载页面时，textarea 已被填充，并且 JavaScript 用于更新预览。预览部分的 DOM 完全更新后，将对预览部分执行进一步的后处理。

我发现了问题[jQuery/Javascript - How to wait for compatible DOM to update before execution](https://stackoverflow.com/questions/7342084/jquery-javascipt-how-to-wait-for-manipulated-dom-to-update-before-proceeding-w) of interest function ，但它的答案依赖于 setTimeout() ，我在过去发现有些问题，因为不清楚之前要暂停多少秒执行。

大约 50% 的时间，我的后期处理过早地触发了，因为 DOM 还没有完成更新。为了解决这个问题，我尝试使用 jQuery 的回调队列机制。

确保在开始后处理之前首先加载动态修改的 DOM 的最佳方法是什么？

例如，

```
// using the provided source content, update the DOM indicated by
// the destination css selector string
function updatePreview(cssSelectorDst, content){
  $(cssSelectorDst).html(content);
  console.log("preview updated");
}

// if a <ul> appears at the beginning of the content, designate it
// as a keypoints section
function updateKeypoints(cssSelectorDst){
  ...
  console.log("keypoints updated");
}

// update preview section using content from iframe (using tinyMCE)
function updateFromIframe(iframeSelector, cssSelectorSrc, cssSelectorDst){

  // gather source data
  var iframe = $(iframeSelector);
  var content = $(iframe).contents().find(cssSelectorSrc).html();

  // set up callbacks to ensure proper order and completion of actions
  var callbacks = $.Callbacks();
  callbacks.add(updatePreview);
  callbacks.add(updateKeypoints);
  callbacks.fire(cssSelectorDst, content);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:43:47.857

`.html`是同步的，它之后的代码在完成附加 html 之前不会开始执行。

这里不需要使用`$.Callbacks()`或任何排队系统。

```
// Update Preview
updatePreview();
updateKeypoints(); 
```

如果你发现这不起作用，那不是因为`.html()`还没有完成，问题出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:51:59.357

As suggested by Kevin B, the problem was that the call to html() doesn't always have data when this method is called. Eventually, it does, so polling is set up (yes, using setTimeout()); thank goodness for blocks (rather, anonymous functions) or this would not nearly be so elegant.

```
function updateFromIframe(iframeSelector, cssSelectorSrc, cssSelectorDst){
  var iframe = $(iframeSelector);
  var content = $(iframe).contents().find(cssSelectorSrc).html();

  if(content == null){
    console.log("content not yet available; trying again...");
    return setTimeout(function(){updateFromIframe(iframeSelector, cssSelectorSrc, cssSelectorDst)}, 50);
  }

  updatePreview(cssSelectorDst, content);
  updateKeypoints(cssSelectorDst, content);
} 
```

Checking the browser console, we see that it handles this circumstance just fine. Never mind the fact that the polling shouldn't be required in the first place!

```
content not yet available; trying again...
content not yet available; trying again...
content not yet available; trying again...
content not yet available; trying again...
content not yet available; trying again...

content: <ul><li>condimentum rhon ... nunc, <br><br></p>
preview updated

keypoints updated 
```

# c# - 简单的用户控件和 MVVM 模式：如何使用？

> ID：11566632
> 
> 赞同：0
> 
> 时间：2012-07-19T17:57:55.520
> 
> 标签：c#, wpf, xaml, mvvm, user-controls

请帮我

我有

```
public partial class OrderControl : UserControl
{
    private OrderHeader orderHeader;
    public Customer selectedCustomer { get; set; }
    private Customer[] allCustomers;
    public User selectedManager { get; set; }
    private User[] allManagers;

    public OrderControl()
    {
        InitializeComponent();
        DataContext = this;
    }
...
} 
```

我需要一种绑定到源的方式：

```
<ComboBox Name="CustomerComboBox" SelectedItem="{Binding selectedCustomer}"/> 
```

这是将 selectedCustomer 属性保留在 OrderControl.xaml.cs 中的最佳方法，还是我需要使用 ..,selectedCustomer,... 属性创建一些 OrderViewModel 类并在 OrderControl.xaml.cs 中保留 OrderViewModel 的实例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:02:59.753

最好创建一个 ViewModel 类，将您的属性移动到该类并使其成为`DataContext`您的`UserControl`.

此外，您的`selectedCustomer`属性只是一个常规的 .NET 属性，它需要支持 INotifyPropertyChanged 接口以促进绑定和更改通知...通常是`ViewModel`您的所有其他`ViewModel`类继承的基类将实现此接口...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:49:20.347

如果你想创建真正的用户控件，你不应该：

```
 DataContext = this; 
```

这是HB的报价

> 这是不好的做法，像这样设置 DataContext 是“从外部”不可见并且不切实际的，因为 DataContext 的继承通常是您想要和期望的

[这](https://stackoverflow.com/questions/11226843/data-binding-in-wpf-user-controls)是类似的问题和答案。

但是如果你想先用 viewmodel 做 MVVM。

来自雷切尔的引述：

> 请记住，使用 MVVM，您的 ViewModel 就是您的应用程序。View 只是一个漂亮的界面，它允许用户与您的 ViewModel 进行交互。

这意味着您应该使用所需的所有属性和命令创建适当的视图模型。从您的用户控件中删除所有代码，因为它现在只是一个视图。viewmodel 首先通过 datatemplates 连接 viewmodel 和 view。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:05:37.127

如果您实施 INotifyPropertyChanged，这将起作用。现在，组合框无法在设置属性时获取更新。请参阅[http://msdn.microsoft.com/en-us/library/ms229614.aspx](http://msdn.microsoft.com/en-us/library/ms229614.aspx)

但是，如果您希望遵循 MVVM，那么您将需要创建一个视图模型对象。

# php - 我的 mysql_fetch_array() 循环没有输出任何答案。有什么建议么？

> ID：11566633
> 
> 赞同：0
> 
> 时间：2012-07-19T17:57:59.710
> 
> 标签：php, mysql, sql, while-loop

这是我正在运行的以下代码。database.php 包含一个名为 fetch_array() 的函数。fetch_array() 在其函数中包含 mysql_fetch_array() 并返回 mysql_fetch_array() 的结果。Database.php 包含一个数据库类，其中包含其他功能。这段代码可能无法正常工作有什么原因吗？我想获取表用户中每条记录的 ID 和用户名。

```
 <?php
  require_once("database.php");
 ?>
 <html>
 <head>
 </head>
 <body>
 <?php

    global $database;
    echo "hello";
    $result = $database->query("SELECT * FROM users");

    while($row = fetch_array($result))
    {
       echo "ID: $row[id] Name: $row[username] <br />";
    }

 ?>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:00:11.373

您只是在检索`id`，而不是在检索`username`。因此，您在获取时不会得到`username`输出。

代替：

```
$result = $database->query("SELECT id FROM users;"); 
```

和：

```
$result = $database->query("SELECT id, username FROM users;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:22:19.567

您的 SELECT 查询是错误的。您目前只返回您选择的每一行的“id”列。当您尝试回显 $row[username] 时，您很可能会收到不存在数组键的警告。

要解决此问题，请更改此行：

```
$result = $database->query("SELECT id FROM users;"); 
```

至

```
$result = $database->query("SELECT id, username FROM users;"); 
```

或者，如果您想获取每一行的所有列：

```
$result = $database->query("SELECT * FROM users;"); 
```

有关更多信息，请参阅 MySQL 文档中的[SELECT](http://dev.mysql.com/doc/refman/5.0/en/select.html)参考。

# c++ - 使用 CAN 适配器接收消息

> ID：11566635
> 
> 赞同：1
> 
> 时间：2012-07-19T17:58:09.010
> 
> 标签：c++, api, message, can-bus

我正在为 Visual C++ Express 使用 CAN 适配器 API。[您可以在他们的网站上](http://www.phytec.com/products/can/pc-can-interfaces/sysusb2.html)找到有关 API 的更多信息。单击 USB-CANmodul2 硬件手册以获取我正在使用的正确 PDF 文件。这对于使用 CAN 且需要良好 API 的任何程序都很有用。

[我的代码](http://pastebin.com/JcipGK8Y)

附上一些图片来帮助描述我在做什么。我在一个编译器上运行 CAN 引导加载程序，我的解析程序在 Visual Express 上。解析程序应该从文本文件中读取并将解析的信息发送到 CAN 引导加载程序，以便它可以将其编程到其内存中。我可以很好地发送消息。问题是，当 CAN 引导加载程序收到消息时，它应该回复其他程序发送的所有内容都是正确的，但我无法弄清楚如何使用 API 在解析程序中接收消息。我基本上已经完成了他们的 PDF 文件告诉我的所有事情。

我究竟做错了什么？

调试模式下的程序图片：解析程序发送的信息，引导加载程序将其放入缓冲区。引导加载程序即将调用函数以发回一条消息说没有错误。解析程序永远不会通过轮询循环，因此它永远不会收到消息。我知道引导加载程序发送功能有效，因为我已经使用 API 进来的相同 CAN 程序对它们进行了测试。希望这些信息足以让你们了解我在做什么。

这些是我遇到问题的行：

```
 do
274\.              retMessageF = UcanReadCanMsgEx(UcanHandle, &bChannel, &rxMessage, NULL);
275\.         while(retMessageF != USBCAN_SUCCESSFUL); 
```

# c#-4.0 - 等待页面加载错误？

> ID：11566638
> 
> 赞同：0
> 
> 时间：2012-07-19T17:58:18.003
> 
> 标签：c#-4.0, selenium, webdriver

在我的 selenium webdriver 代码中，我试图让我的页面在开始查找元素并驱动它们之前等待它加载（在用户名和密码中输入文本）

我尝试使用`driver.waitforpagetoload();`但它返回了这个错误

```
Error   1   'OpenQA.Selenium.IWebDriver' does not contain a definition for 'waitforpagetoload' and no extension method 'waitforpagetoload' accepting a first argument of type 'OpenQA.Selenium.IWebDriver' could be found (are you missing a using directive or an assembly reference?) 
```

我需要添加什么类型的参考？

（用 C# 编码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:43:54.987

我发现使用它很有帮助`Thread.Sleep(# of milliseconds)`，它允许页面在继续加载到下一个元素之前加载。

例子：

```
using System;

namespace SeleniumTests
{
    [TestFixture]
    public class FireFoxTests
    {

        [Test]
        public void SomeTest()
        {
            some code;
            Thread.Sleep(2000);
            more code;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T18:24:04.557

该错误是因为 webdriver 没有 waitForPageToLoad 函数。

并且您不需要使用 webdriver 它，因为它会在每次操作后自动阻止，直到页面完全加载。更多细节在这里.. [WebDriver FAQ](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_WebDriver_fails_to_find_elements_/_Does_not_block_on_page_loa)

但是您可以有自定义等待，例如使用 WebDriverWait 等待元素出现在页面上。

# unit-testing - MSTest ClassInitialize 一次为整个班级

> ID：11566643
> 
> 赞同：8
> 
> 时间：2012-07-19T17:58:57.367
> 
> 标签：unit-testing, mstest

ClassInitialize 似乎每次测试都会被调用。我想这是因为实际上为每个测试创建了一个新类。

为什么？所有其他框架都不会这样做！

无论如何...我需要在类上执行一种方法（不是静态的）。我还需要在类的同一个实例中执行所有测试方法。

我是在没有桨的小溪上吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T22:55:33.847

`ClassInitialize`在调用任何 s 之前由 MSTest 调用一次，请参见[此处](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute%28v=vs.100%29.aspx)`TestMethod`的备注。在每个测试方法之前调用一次。MSTest 为每个调用创建一个新的测试类实例。这就是为什么是静态方法。`TestInitialize``TestMethod``ClassInitialize`

> 我需要在类上执行一种方法（不是静态的）。我还需要在类的同一个实例中执行所有测试方法。

您的意思是您需要`TestClass`在被测类（您实际测试的类）上执行一种方法吗？

在任何一种情况下，您都可以在 中拥有一个静态成员并在 中`TestClass`对其进行一次初始化`ClassInitialize`。它只会被创建一次，并且在您的测试的整个生命周期中都存在。您只能在其上调用一个方法一次。然后，您可以在每个测试方法中使用这个单一实例。

需要注意的一件事是 MSTest 可能会交错来自不同类的测试。因此，如果您有任何全局可变状态可以从多个状态访问`ClassInitialize`（或对此进行测试），则可能会发生不可预知的事情。因此，最好避免静力学。

所有方法必须在同一个实例上执行的要求是非常不寻常的。也许有一种方法可以重构您的代码以消除这种约束？

# vb.net - 检测鼠标悬停在 DataGridView 列标题上

> ID：11566647
> 
> 赞同：1
> 
> 时间：2012-07-19T17:59:07.507
> 
> 标签：vb.net, winforms, datagridview

我正在尝试使用该`DataGridView_CellMouseEnter`事件来确定鼠标是否位于列标题之一上，但我无法弄清楚。

```
Private Sub DataGridView_CellMouseEnter(sender As Object, _
                                        e As DataGridViewCellEventArgs) _
                                        Handles DataGridView.CellMouseEnter
  If (StrComp(e.ColumnIndex.ToString, "1")) Then
    Me.Cursor = Cursors.WaitCursor
  Else
    Me.Cursor = Cursors.IBeam
  End If
End Sub 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:05:02.430

RowIndex = -1 应该告诉你：

```
Private Sub DataGridView1_CellMouseEnter(ByVal sender As Object, _
                                         ByVal e As DataGridViewCellEventArgs) _
                                         Handles DataGridView1.CellMouseEnter
  If e.RowIndex = -1 And e.ColumnIndex > -1 Then
    MessageBox.Show("Over " & DataGridView1.Columns(e.ColumnIndex).HeaderText)
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:56:15.047

看看[DataGridView.HitTest 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.hittest%28v=vs.85%29.aspx)

```
Private Sub dataGridView1_MouseEnter(ByVal sender as Object, ByVal e as EventArgs) Handles dataGridView1.MouseEnter
  Dim relativeMousePosition as Point = dataGridView1.PointToClient(Cursor.Position)
  Dim hit As DataGridView.HitTestInfo = dataGridView1.HitTest(relativeMousePosition.X, relativeMousePosition.Y)
  Console.WriteLine(hit.Type.ToString())
End Sub 
```

# .net - 绑定到 ListBoxItem 的 WPF 嵌套扩展器不起作用

> ID：11566651
> 
> 赞同：2
> 
> 时间：2012-07-19T17:59:23.633
> 
> 标签：.net, wpf, binding

我试图`Expander`一次**打开一个**。我从[MSDN 论坛链接](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/a2988ae8-e7b8-4a62-a34f-b851aaf13886#expander_list)获得了一个代码。

```
<ListBox>
    <!-- all styles and templates-->
    <Expander Header="One"><!-- some content --></Expander>
    <Expander Header="Two"><!-- some other content --></Expander>
</ListBox> 
```

它**工作正常**。*一次只能打开上述扩展器之一*。

但是，如果我尝试嵌套扩展器，则较低的扩展器**不会**像上面的代码那样按需要打开和关闭。意思是如果我将内容添加到**扩展器“二”**，如下所示

```
<Expander Header="Two">
    <ListBox>
        <!-- same styles and templates as above-->
        <Expander Header="Sub-One"><!-- some content --></Expander>
        <Expander Header="Sub-Two"><!-- some other content --></Expander>
    </ListBox>
</Expander> 
```

扩展器“Sub-One”和“Sub-Two”**与** `ListBoxItem`扩展器“Two”所连接的相同

![膨胀机](../Images/d495d86e4b0b4cc4ef42b5e2cbcc97d0.png)

我想我需要对绑定进行一些更改，但无法做到。

```
<Style TargetType="{x:Type Expander}">
    <Setter Property="IsExpanded"
        Value="{Binding Path=IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}"/>
</Style> 
```

任何指导都会有很大帮助。
*注意：-我尝试过的几件事*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:21:44.170

对于样式，您可以尝试绑定到 Selector.IsSelected 附加属性，如此处所示[MSDN Selector.IsSelected](http://msdn.microsoft.com/de-de/library/system.windows.controls.primitives.selector.isselected.aspx)

# url - 使用 JQuery 获取 Twitter 个人资料图片 url

> ID：11566653
> 
> 赞同：0
> 
> 时间：2012-07-19T17:59:29.517
> 
> 标签：url, jquery, twitter, syntax-error, image

我想简单地使用 JQuery 检索 Twitter 个人资料图片的 url

为此我使用：

```
$.ajax({
    type: "GET",
    url: "https://api.twitter.com/1/users/profile_image/twitterapi.json",
    dataType: "jsonp",
    success: function(data){
        console.log('success');
    },
    error: function(data){
        console.log('error');
    } 
```

});

但我得到这个错误

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

有谁知道我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:16:00.583

> Uncaught SyntaxError: Unexpected token ILLEGAL

尝试在浏览器中打开该 URL。您将被“重定向”到其他 URL。验证通过`curl -v`并检查`Location: ...`标题。

* * *

解决方案是从 url 请求 JSONP：

[`https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true&callback=foo`](https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true)

您将从`profile_image_url`根对象的字段中获取图像 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-15T04:31:00.187

这是一个静态 URL，可以获取最新的 Twitter 个人资料图片 url。

```
 https://twitter.com/{{#twitterUserName}}/profile_image?size=normal 
```

我的推特用户屏幕名称是 rkramakrishna17

```
https://twitter.com/rkramakrishna17/profile_image?size=normal 
```

**编辑1：**

正如@juanmirocks 所建议的，我们可以通过添加 ?size=origianl 来获取原始图像来获取原始图像。

```
https://twitter.com/{{#twitterUserName}}/profile_image?size=original 
```

# sql-server-2008 - bcp：错误 = [Microsoft][SQL Server Native Client 10.0]字符串数据，右截断

> ID：11566658
> 
> 赞同：19
> 
> 时间：2012-07-19T17:59:48.803
> 
> 标签：sql-server-2008, sql-server-2008-r2, bcp

我最近在使用 bcp 时遇到了一个错误。这是错误。

> SQLState = 22001, NativeError = 0 错误 = [Microsoft][SQL Server Native Client 10.0]字符串数据，右截断

我正在尝试将数据解压缩到一个没有任何约束的临时表中，并且与数据相比，数据类型也相当大。我有大约 11 个来自不同表的文件被 bcp'd 并在解压缩错误时从其中只有一个文件压缩出来。这是我一直成功使用的命令。最近（在尝试制作当前 WH 的副本并设置流程时）我遇到了一些问题。

> bcp.exe employee_details in employee_details.dat -n -E -S "servername" -U sa -P "Password"

我尝试将命令更改为 -C -T -S ，当我手动提供格式时它起作用了。这是一个非常大且重要的数据包，我需要将其加载到我的 WH 中。
我不知道我是否在这里看到了格式文件。需要任何帮助。

谢谢

肉桂少女。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-01-06T06:45:57.463

我们在执行 BCP 时也遇到了同样的问题，结果证明是 .dat 文件中的换行符问题。

在 Notepad++ 中查看该文件，然后单击“显示所有字符”以查看换行符。

![带有换行符的文件](../Images/9c8bc093233771040cf9a634efe67296.png)

BCP 使用 -r "\r\n" 选项抛出以下错误，即使用以下命令

```
bcp dbo.Test in C:\Test.dat -c -t "|" -r "\r\n" -S "DBServerName" -T -E 
```

> “ SQLState = 22001, NativeError = 0 错误 = [Microsoft][SQL Server Native Client 10.0]字符串数据，右截断”

BCP 将文件中的所有行视为带有 -r "\n" 或 -r "\r" 选项的单行，即使用以下命令

```
bcp dbo.Test in C:\Test.dat -c -t "|" -r "\n" -S "DBServerName" -T -E 
```

**当我们在 BCP 命令中为换行符使用十六进制值 (0x0a) 时，问题已解决**

```
bcp dbo.Test in C:\Test.dat -c -t "|" -r "0x0a" -S "DBServerName" -T -E 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-17T15:40:04.410

对我们来说，我们尝试上传的文件是 Unicode 而不是 ANSI 格式。

有一个 -N 开关，但我们的表没有任何 NVARCHAR 数据。

我们刚刚将文件保存为 ANSI 格式，它可以工作，但如果您有 NVARCHAR 数据，或者您可能需要使用 -N 开关

请参阅[TechNet - 使用 Unicode 本机格式导入或导出数据](http://technet.microsoft.com/en-us/library/ms189941.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-31T18:28:06.510

bcp 右截断错误发生在可以装入单个列的数据过多时。这可能是由不正确的格式文件（如果使用了）或分隔符引起的。行终止符（Windows 有 CRLF 或 '\r\n' 而 UNIX 有 '\n'）也可能导致此错误。示例 您的格式文件包含 Windows CRLF，即 '\r\n' 作为行终止符，但文件包含 '\n' 作为行结尾。这意味着将整个文件放在 1 行（而不是 1 列）中，这会导致右截断错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-19T11:50:51.830

我也收到了截断消息。经过数小时搜索论坛并尝试建议的解决方案后，我终于开始工作了。

截断消息的原因是因为我很容易相信将列名放在格式文件中实际上很重要。前面的数字似乎指示数据的加载位置。

我的输入文件没有表中第三列的数据。所以这就是我的格式文件的样子。

```
... ","    1 Cust_Name       SQL_Latin1...
... ","    2 Cust_Ref        SQL_Latin1...
... ","    3 Cust_Amount     SQL_Latin1...
... "\r\n" 4 Cust_notes   SQL_Latin1... 
```

我的输入文件如下所示：

```
Jones,ABC123,200.67,New phone 
Smith,XYZ564,10.23,New SIM 
```

桌子看起来像

```
Cust_Name Varchar(20)
Cust_Ref  Varchar(10)
Cust_Type Varchar(3)
Cust_amount Decimal(10,2)
Cust_Notes Varchar (50)
Cust_Tel   Varchar(15)
Cust...... 
```

我假设通过在格式文件中给出列名，数据将进入表中的相应列。

然而，这有效，因为列号很重要，列名是噪音。

```
... ","    1 A       SQL_Latin1...
... ","    2 B       SQL_Latin1...
... ","    4 C       SQL_Latin1...
... "\r\n" 5 D       SQL_Latin1... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-13T09:12:10.940

在我的情况下，原因是在一个字段中写入`"|" = chr$(124)`了分隔符，在我的情况下`"|" = chr$(179)`。

MS SQL 不会在两个字符之间产生差异。我消除了`chr$(124)`然后通过 BCP 导入工作正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-16T19:41:01.850

我知道这很旧 - 但我刚刚遇到了一个我收到此错误的实例，结果发现我的一个数字字段具有更多架构允许的小数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-13T11:25:11.490

在记事本++中打开文件。转到查看选项卡->显示符号->显示所有字符。我在 .tsv 文件中也遇到了同样的问题。一个选项卡放错了位置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-23T13:51:56.290

迟到了，但仍然：就我而言，我确实得到了这个

```
SQLState = 22001, NativeError = 0
Error = [Microsoft][ODBC Driver 11 for SQL Server]String data, right truncation 
```

**问题是架构发生了变化**。目标数据库有两个新字段。一旦我安装了以前的模式，导入就成功了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-30T20:17:20.763

在花了 4 小时，进行了大量的跟踪和错误之后，我发现解决方案可以像您将数据导入到的表一样简单，该表应该具有适合您尝试导入的文件的架构。例如：就我而言。**我正在将带有667,aaa,bbb**的 .csv 导入到具有**int(4),char(2),char(2)**架构的表中， 导致字符串数据，右截断。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-12T06:56:52.817

我的 bcp 忽略了任何换行符，如 \r、\n、\r\n\、0x0d、0x0a、0x0d0x0a 等。我发现的唯一解决方案是将“真实”换行符直接包含在 bcp 命令中。我认为这是可行的，因为 csv 是在运行 bcp 的同一台服务器上生成的。当我手动将 csv 传输到 mssql 服务器时，0x0a 在 BULK INSERT 中也能正常工作。

请注意，nl1=^ 后面必须跟两个新的空行。

my_script.bat：

```
@echo off
setlocal enableDelayedExpansion

set nl=^

set cmd=bcp db_name.db_schema.my_table in stats.csv -w -t, -r "!nl!" -S my_server -U my_username -P password123
!cmd! 
```

# asp.net - GridView 中的 XmlDataSource

> ID：11566659
> 
> 赞同：0
> 
> 时间：2012-07-19T17:59:52.830
> 
> 标签：asp.net, xml, datasource

我有一个 xml 文件，其结构如下：

```
<student>
  <name>Rahul</name>
  <name>Sheela</name>
</student> 
```

我需要在网格视图中列出学生的姓名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:01:06.340

您可以在 DataSet 中加载该文件并将该 DataSet 与 GridView 绑定。

```
DataSet ds = new DataSet();
ds.ReadXml("yourfile.xml")

gridview1.DataSource = ds;
gridview1.DataBind(); 
```

如果您的数据集有多个表，您可能需要像这样绑定表

```
gridview1.DataSource = ds.Tables[0]; // First table in the dataset.
gridview1.DataSource = ds.Tables[1]; // Second table in the dataset. 
```

更改问题后

在同一个父级下具有相同名称的两个元素，它将是 Firstname、Lastname 或 RahulSheela

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:13:06.347

如果您可以修改 XML 文件的呈现方式，则可以使用此合成器：

### ASP.net 标记页面

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="xmlDataSource" 
     AutoGenerateColumns="False">
    <RowStyle BackColor="#EFF3FB" />
    <Columns>
        <asp:TemplateField>
           <ItemTemplate>
              <%# Eval("name") %>
           </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<asp:XmlDataSource ID="xmlDataSource" runat="server" DataFile="~/myxmlsource.xml" /> 
```

在这种情况下，如果可能的话，您必须修改您的 XML 文件，因为我之前一直都是这样工作的，并且在尝试了您的格式之后，它无法正常工作。也许在互联网上搜索一下会说有可能，但尚未检查。这是我使用的格式，并且非常有效：

### XML 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<students>
    <student name="Rahul" />
    <student name="Sheela" />
</students> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T23:43:06.523

为您的 xml 创建一个 XSLT 转换文件并将此文件添加到数据源（使用“configre 数据源”），这用于重新塑造您的 xml 文件，以便 gridview 可以读取它，而无需更改您的 xml结构，假设您的 xml 结构是这样的

```
 <student>
    <name>Rahul</name>
    <name>Sheela</name>
  </student> 
```

您的 XSLT 文件应如下所示

```
<xsl:stylesheet version="1.0" xmlns: xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com: xslt" exclude-result-prefixes="msxsl">
<xsl: output method="xml" indent="yes"/>
<xsl:template match ="/">
    <student>
      <xsl:apply-templates select ="//student"/>
    </student>
</xsl:template>
<xsl:template match ="//student">
    <student>
        <xsl:attribute name="name">
            <xsl:value-of select="name"/>
        </xsl:attribute>
    </student>
</xsl:template>
</xsl:stylesheet> 
```

告诉我它是否有效

# graph - JfreeChart：水平滚动图表并查看旧值

> ID：11566661
> 
> 赞同：0
> 
> 时间：2012-07-19T18:00:08.990
> 
> 标签：graph, scroll, jfreechart

> **可能重复：**
> [使用 JFreeChart 显示时间序列中的最近更改](https://stackoverflow.com/questions/5048852/using-jfreechart-to-display-recent-changes-in-a-time-series)

在询问之前，我一直在寻找有关我对 JfreeChart 的关注的信息，但我一直无法提出解决方案，如果这个问题已经发布，我很抱歉。

我编写了一个从无线传感器设备接收实时信息的应用程序（每秒从温度传感器读取*n 个读数）。*为了绘制这些信息，我使用了 JFreeChart 库，特别是 DinamicTimeSeriesCollection 类。

根据此类的功能：“此类针对实时应用程序，在这些应用程序中，我们能够以非常快速的方式附加新数据并丢弃最旧的数据（取决于您的输入数据）”（从[JfreeChart 检索：水平滚动 XYBarChart -（图表翻译和导航）](https://stackoverflow.com/questions/3231840/jfreechart-scroll-xybarchart-horizontally-chart-translation-and-navigation)），我需要的是不要丢弃已经绘制的信息。我已经看到我可以通过添加一个 JSlider 来水平滚动图表，如前面提到的 url 中所示。但是，我看不到旧值（主要是因为它们已被替换）。

我不确定我是否使用了正确的类，是否有其他库（如 JfreeChart）使绘图“变得如此简单”，或者即使有任何技巧或方法来保留旧值。

非常感谢您的时间。所有可能的帮助将不胜感激。

问候

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:41:44.973

一个好的方法是将从设备接收的值存储在 2D 列表数组（表示 x,y 坐标）中，并将这些点传递给 JFreeChart，以便在每次接收到新值时进行绘制。至于平移，您可以手动设置窗口`JFreeChart.getXYPlot().get[Domain/Range]axis.set[Upper/Lower]Bounds(double value)`

# c# - WP7 - 在所有页面上设置背景图片

> ID：11566666
> 
> 赞同：0
> 
> 时间：2012-07-19T18:00:26.707
> 
> 标签：c#, windows-phone-7, xaml

我的目标是为每个页面设置背景图片。考虑这个结构......

```
/Images/AppBackground.jpg
/App.xaml
/MainPage.xaml
/Page2.xaml 
```

我的第一次尝试是按照本网站其他地方的建议将其设置在根框架上...... ;)

**应用程序.xaml.cs**

```
ImageBrush brush = new ImageBrush
{
    ImageSource = new System.Windows.Media.Imaging.BitmapImage(new Uri("/Images/AppBackground.jpg", UriKind.Relative)),
    Opacity = 0.5d
};
this.RootFrame.Background = brush; 
```

这会给我一个错误： `A first chance exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.dll`

我试过有和没有开始`/`，试过`UriKind.Absolute`，没有`UriType`参数，都会给我同样的错误。图像`AppBackground.jpg`具有 Build Action `Content`。

下面的代码可以正常工作。

**主页.xaml**

```
<Grid x:Name="LayoutRoot">
    <Grid.Background>
        <ImageBrush ImageSource="/Images/AppBackground.jpg"></ImageBrush>
    </Grid.Background>
    ... 
```

但这不是我想要的，我不想为每一页都设置它......

有人知道我在搞砸什么吗？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:12:09.550

废话。错误的地方; 我来早了。在构造函数中，它将简单地覆盖`Background`设置...

如果我稍后执行它，它会工作得很好...... :)

```
// Code to execute when the application is launching (eg, from Start)
// This code will not execute when the application is reactivated
private void Application_Launching(object sender, LaunchingEventArgs e)
{
    ImageBrush brush = new ImageBrush
    {
        ImageSource = new System.Windows.Media.Imaging.BitmapImage(new Uri("/Images/AppBackground.jpg", UriKind.Relative)),
        Opacity = 0.5d
    };
    this.RootFrame.Background = brush;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T20:04:58.947

在 XAML 中分别为每个页面设置背景有什么问题？如果背景应该是动态的，您可以实现一个状态标志，它将告诉应用程序它处于什么状态，从而知道要加载什么壁纸。

将此与绑定到转换器的背景结合起来（将状态转换为`ImageBrush`），您就有了解决方案。

# android - 用此 Fragment 中的侦听器和 Activity 中的方法替换 Fragment

> ID：11566670
> 
> 赞同：1
> 
> 时间：2012-07-19T18:00:46.163
> 
> 标签：android, android-fragments, android-activity, static-methods

我有一个带有嵌入在 FragmentActivity 中的按钮的片段。当我单击按钮时，我希望将片段替换为另一个片段。问题是：片段是我的活动的内部静态类，方法是非静态的。我通过创建我的 Activity 类的实例解决了这个问题，但是当我单击片段内的按钮时，应用程序崩溃了。

这是代码：

```
public class Stdp extends SherlockFragmentActivity implements ActionBar.OnNavigationListener {

public static class Bottomfrag extends SherlockFragment {

    static Bottomfrag newInstance() {
        Bottomfrag f = new Bottomfrag();
        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.bottom_choose, container, false);
        View li = v.findViewById(R.id.layoutbottom);
        li.setBackgroundColor(Color.parseColor("#FFBB33"));
        View button = v.findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                Stdp t = new Stdp();
                t.addFragmentToStack();
            }
        });
        return v;
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_stdp);

    Context context = getSupportActionBar().getThemedContext();
    ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.test_array, R.layout.sherlock_spinner_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this);

    if (savedInstanceState == null) {
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        Fragment bottom = new Bottomfrag();
        ft.add(R.id.su1, bottom);
        ft.commit();
    }
}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    // TODO Auto-generated method stub
    return false;
}

public void addFragmentToStack() {
Fragment newFragment = Bottomfrag.newInstance();
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.su1, newFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_CLOSE);
    ft.addToBackStack(null);
    ft.commit();
}
} 
```

* * *

我找到了解决我的问题的方法。我唯一要做的就是将 addFragmentToStack 移动到 Bottomfrag 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:19:16.470

> 我通过创建我的 Activity 类的实例解决了这个问题。

在 Android 开发方面，实例化 an`Activity`几乎从来都不是一种解决方案……事实上，我无法想象您会想要`Activity`使用默认构造函数创建一个新的场景。

您可以引用您的静态实例`Activity`with `ActivityName.this`。

你也应该`addFragmentToStack`去`Bottomfrag`上课。

# ruby-on-rails - 使用 Rails 创建 JS 小部件

> ID：11566671
> 
> 赞同：0
> 
> 时间：2012-07-19T18:00:50.440
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序 App1，其中有一个事件部分。但现在我希望应该有一个单独的 Rails 应用程序 App2 用于事件。还有一个 JS 代码，将用于 App1 获取所有事件列表，事件从 App2 创建等。

欢迎您提出建议。

请建议我这样做的方法。

谢谢，格索尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:52:15.783

如果您在`Event`模型中使用了脚手架，`App1`那么您可以简单地访问：

`http://app1/events.json`

并使用：

```
$.getJSON('http://app1/events.json',function(data){
  $.each(data,function(k,v){
    /* Do something with each event */
  });
}); 
```

如果您没有在`Event`模型中使用脚手架，`App`那么您只需要像这样创建一个动作

```
def some_action
  @events = Event.all

  respond_to do |format|
    format.json { render json: @books }
  end
end 
```

并`http://app1/controller_name/some_action.json`在上面的例子中使用。

同样的原理也适用于创建、编辑等。只需搭建一个模型并使用默认代码来了解它的工作原理，并相应地进行更改。

# c# - 将黑白画布转换为二维数组

> ID：11566678
> 
> 赞同：0
> 
> 时间：2012-07-19T18:01:12.590
> 
> 标签：c#, wpf

我正在开发一个字符识别器应用程序，并尝试将画布图像转换为二维整数数组。尺寸为 250x250，为黑色和白色。如果像素为黑色，我希望它将数组值设置为 1。如何确定每个像素的像素颜色以填充我的数组？（我正在使用 WPF 和 C#）

谢谢，

约瑟夫

# php - 当用户更改会话变量时自动启动新会话，即更改电子邮件地址

> ID：11566680
> 
> 赞同：0
> 
> 时间：2012-07-19T18:01:27.243
> 
> 标签：php

我网站上的会话变量是用户的电子邮件地址，并且用户可以选择更改电子邮件地址，目前，当他们更改电子邮件地址时，会话变量显然会自动销毁，因此他们必须再次登录新地址，我想要一种自动将会话变量更改为新电子邮件地址的方法。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:06:32.497

您实际上只是将其重新定义为新值。

```
$_SESSION['email'] = $newEmailAddressVariable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:07:49.423

当用户更改他们的电子邮件地址时，不应销毁会话，除非您明确使用`session_destroy()`. 无论哪种方式，您都可以在更改之前获取 $_SESSION 中的当前内容，并将其分配给电子邮件地址更改后的现有会话或新会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:09:16.297

您是否使用电子邮件地址来引用当前登录的用户？

我建议您使用永远不会更改的 ID，例如数据库中的自动增量 ID。这是一种更强大的方式...

# html - 有页脚问题（重叠内容、宽度问题）。你能帮助我吗？

> ID：11566681
> 
> 赞同：0
> 
> 时间：2012-07-19T18:01:27.723
> 
> 标签：html, css, twitter-bootstrap

我正在尝试使用引导程序创建我们的团队页面，但我无法让页脚正确运行。起初它没有填满页面的宽度，现在（我不太确定我做了什么）这个问题得到了解决，但它与内容重叠：一些缩略图、文字和链接。有问题的页面是：[http ://rdtaxsavers.com/new/OurTeam.php](http://rdtaxsavers.com/new/OurTeam.php)

我的 css 文件位于 rdtaxsavers.com/new/css/bootstrap.css

您会注意到 rdtaxsavers.com 网站页脚工作正常。提前致谢！

编辑：我把它放回页脚不重叠的地方，但现在宽度问题又回来了。你会在我的 CSS 中看到我的 modal-footer 类有 width:100%; 最后，但这并不能解决问题。

编辑：这让我发疯。当我修复宽度问题时，它会重叠，当我修复重叠时，宽度会被破坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:12:06.637

我认为您将页脚放置在 Container 类中，容器类的宽度为 1170px。因此，页脚不会是 100% 的身体宽度。将页脚移出容器类。或者你必须改变容器类的宽度。

这就是你所拥有的：

```
<div class="container">
    <div class="row">...</div>
    <footer>...</footer>
</div> 
```

尝试这样做：

```
<div class="container">
    <div class="row">...</div>
</div>
<footer>...</footer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:07:09.283

尝试清除 ul.thumbnails 元素中的 float:left。

# excel - 将 Excel 公式转换为 Access 查询

> ID：11566683
> 
> 赞同：0
> 
> 时间：2012-07-19T18:01:44.280
> 
> 标签：excel, ms-access, excel-formula

有没有办法将下面的 Excel 公式转换为 Access 中的查询/标准？

```
L2 = Date
J2 = Another Date
Z1 = Todays Date 
```

我认为它正在计算两个日期之间的天数，但不确定如何在 Access 查询中执行此操作。

```
IF((AND((L2<1),(J2>1))),(NETWORKDAYS(J2,$Z$1)-1),0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:15:48.037

正如您现在可能已经收集到的那样，这个问题并没有真正的意义。`NETWORKDAYS`确实计算了两个日期之间的“整个工作日，不包括周末和假日中确定的任何日期”的数量（这里是任何日期`J2`，无论是 'Today'/ `Z1`），`IF`并使该计算取决于`AND`函数的结果为 TRUE。如果“日期”在1900 年 1 月 1 日之前且日期在 1900 年 1 月1 日之后，则`AND`函数结果为 TRUE （因为对于 Excel 1/1/1900 是涉及日期的日期 [除非有人选择1904 年日期系统]）。`L2``J2``1`

但 Excel 无法识别第 1 天之前的日期，无论是负数还是十进制数。例如，第 1.5 天是 1900 年 1 月 1 日的中午，而在相同的格式中，第 0.5 天显示为 0/1/1900。

因此，从本质上讲，`L2`这不是该公式真正使用的日期，因此我相信为什么您的问题还没有答案。但这太长了，无法放在评论中，因此我的回答是：“不。”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T21:00:42.280

设置对 Excel 的引用。

```
Option Compare Database

Private Sub Command2_Click()
    MsgBox GetNetWorkDays(#1/29/2017#, #2/8/2017#)
End Sub

Function GetNetWorkDays(startDate As Date, endDate As Date) As Integer
GetNetWorkDays = WorksheetFunction.NETWORKDAYS(startDate, endDate)
End Function 
```

将按钮放在表单上，​​然后单击按钮！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T05:09:15.387

如果您想计算天数之间的天数，则可以使用下面的内置函数“DateDiff”来解决它。Datediff("D",,) 例如。日期差异（“D”，L2，Z1）

# android - 错误：窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@4087b120

> ID：11566687
> 
> 赞同：0
> 
> 时间：2012-07-19T18:02:00.190
> 
> 标签：android, menu, video-recording

我正在尝试制作用于视频录制开始和停止的菜单按钮：

```
public void vid_Recorder() {
    try {
        mRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);;
        mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        mRecorder.setOutputFile("/mnt/sdcard/recorder.3gpp");
        mRecorder.prepare();
        mRecorder.start();
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

在这里，我创建了菜单：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.menu,menu);
    return super.onCreateOptionsMenu(menu);
}

public boolean onOptionItemSelected(MenuItem Item)
{
    switch(Item.getItemId()) {
        case R.id.menu_Start:
        {
            Toast.makeText(getApplicationContext(), "Started Recording",
                           Toast.LENGTH_LONG).show();
            vid_Recorder();
            System.out.println("Get Started");
        }
        case R.id.menu_Stop:
        {
            mRecorder.stop();
        }
    }

    return onOptionItemSelected(Item);
} 
```

但我什至没有`system.out.println`在 logcat 中得到那个声明，而不是我得到：

> 窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@406f05e8

# html - 为什么我的页面没有居中？

> ID：11566691
> 
> 赞同：2
> 
> 时间：2012-07-19T18:02:14.730
> 
> 标签：html, css

我知道这是一个新手问题，但如果你能帮我一把，告诉我我做错了什么，我会非常感激：

当我尝试使用 HTML 和 CSS 时，我决定创建一个固定大小的页面，该页面应位于屏幕中央。为此，我决定将 [body] 标签设为相对位置，并通过以下方式移动它：

```
position: absolute;
padding: 1em;
width: 960px;
height: 600px;
left: 50%;
top: 50%;
margin-left: -480px;
margin-top: -300px; 
```

悬停它并没有像预期的那样工作，这就是我得到的结果：

![从页面截取的屏幕截图](../Images/30225233605a436114df14f420cf2a2a.png)

我期待看到黄色框在水平和垂直方向上都完美居中，但我发现它稍微偏离了中心。我试图在 Safari、Firefox 和 Chrome 上加载页面，但我得到了相同的结果，因为我已经怀疑我知道这是我的错 :-)

你能帮我解释一下我做错了什么吗？非常感谢你

这是我编写的页面的完整 HTML+CSS 代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test 1</title>
    <meta charset="utf-8">
    <style>
        html, body {
            padding: 0;
            margin: 0;
        }
        html {
            background-color: red;
            width: 100%;
            min-height: 100%;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 16px;
        }
        body {
            padding: 1em;
            background-color: yellow;
            width: 960px;
            height: 600px;
            position: absolute;
            left: 50%;
            top: 50%;
            margin-left: -480px;
            margin-top: -300px;
        }
    </style>
</head>
<body>
    This is my website
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:03:52.637

那是因为填充。

如果将主体的填充设置为 0，则它可以工作（经过测试）。

如果您需要填充，请在您的身体内添加一个内部 100% 宽度的 div 并给这个内部 div 一个填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T18:04:01.527

试试这个：

**HTML**：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test 1</title>
    <meta charset="utf-8">
</head>
<body>
    This is my website
</body>
</html> 
```

**CSS**：

```
html, body {
    padding: 0;
    margin: 0;
}
html {
    background-color: red;
    width: 100%;
    min-height: 100%;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 16px;
}
body {
    padding: 1em;
    background-color: yellow;
    width: 960px;
    height: 600px;
    margin:auto;
    margin-top: -300px;
} 
```

**JsFiddle**：http: [//jsfiddle.net/qecwx/](http://jsfiddle.net/qecwx/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T18:04:57.490

`margin-left`和应该分别有 -ve的`margin-top`一半值：`width``height`

```
margin-left: /* minus half of width */
margin-top: /* minus half of height */ 
```

您需要输入适当的值。

在容器中，您还可以使用以下命令居中：

```
margin:0 auto; 
```

`width`前提是您也已经指定

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T20:44:34.383

只是搞砸了几分钟，这就是我想出的似乎符合您需求的方法：

```
body {
    padding: 1em;
    background-color: yellow;
    width: 960px;
    height: 600px;
    position: relative;
    margin: 0 auto;
    margin-top: 10%;
} 
```

我所做的只是删除了 margin-left: 并做了一个 margin: 0 auto; 对齐左侧和右侧。然后我设置 margin-top: 10%; 使顶部和底部居中。我也将定位设置为相对。希望这会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T18:11:20.480

基本上，您希望将 body 标签上的边距设置为**auto**像这样

```
 body {
        padding: 1em;
        background-color: yellow;
        width: 960px;
        height: 600px;

        margin-left: auto;
        margin-right: auto;
    } 
```

使身体垂直居中需要更多的工作。

# asp.net-mvc-3 - 如何从 WcfTestClient 访问 WF 4 接收活动

> ID：11566693
> 
> 赞同：0
> 
> 时间：2012-07-19T18:02:24.163
> 
> 标签：asp.net-mvc-3, wcf, c#-4.0, workflow-foundation-4

我的工作流程需要等待通过书签的电子邮件批准或通过接收的 WCF 批准，因此我使用了并行活动。电子邮件批准工作得很好，但我正在尝试测试 WCF，但无法弄清楚在 WCF 测试客户端中使用什么 URL 来访问工作流。

我将不胜感激任何线索，因为我对 WCF 非常陌生，并且不太确定如何解决这个问题。

![我工作流程的并行部分](../Images/c3c277f78796ff879584da238e1d63a1.png)

![在此处输入图像描述](../Images/0ee1dc2e7b3dc2e8504e65a817dab1e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:09:13.450

您正在使用工作流服务，然后您的第二个接收活动必须与您的第一个相关，并且 cancreateinstance 复选框设置为 false 并且服务合同名称与第一个相同。

当您为工作流服务生成代理时，操作方法可供客户端调用。

你可以参考这篇文章 [http://www.codeproject.com/Articles/50820/Establishing-Correlation-Between-Multiple-RECEIVE](http://www.codeproject.com/Articles/50820/Establishing-Correlation-Between-Multiple-RECEIVE)

# web - 设计的统一。是还是不是？

> ID：11566696
> 
> 赞同：1
> 
> 时间：2012-07-19T18:02:28.567
> 
> 标签：web, usability

有一个响应式设计的网站。主菜单和徽标几乎占据了移动设备上的整个第一个屏幕。网站所有者认为这不行，并希望使用类似按钮的菜单（例如在 starbucks.com 网站上的移动版）。但不适用于整个网站。仅适用于几页。

在我看来，在不同的网站页面上使用不同类型的导航是不行的，因为它会使网站访问者感到困惑。我建议要么保持原样，要么用所有页面上的新菜单替换当前菜单。我怎么能支持这一点呢？在不同的页面上使用不同的导航方法是正常的做法还是不推荐？有没有关于此事的文章？

# factory - D mixin 与工厂

> ID：11566698
> 
> 赞同：2
> 
> 时间：2012-07-19T18:02:36.597
> 
> 标签：factory, mixins, d

考虑我有以下课程：

```
/// File classes.d
class C {
    string type() { return "C"; };
}

class C1 : C {
    override string type() { return "C1"; };
}

class C2 : C {
    override string type() { return "C1"; };
} 
```

现在我想在其他地方实现一个工厂，比如：

```
/// File factory.d
module factory;
import std.functional;
import std.stdio;

void main() {
    mixin(import("classes.d"));
    auto c = cast(typeof(mixin("C1"))) Object.factory("C1");
    writeln(c.type());
} 
```

编译器（dmd 2.058）告诉我：

```
factory.d(7): Error argument C1 to typeof is not an expression 
```

我知道以下行编译得很好：

```
auto c = cast(C1) Object.factory("classes.C1"); 
```

但这需要我在编译时知道类型（C1）。我想在运行时获取类型（如字符串）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T18:14:24.067

```
mixin(`auto c = cast(typeof(C1)) Object.factory("C1");`) 
```

我不明白你的问题，我想：你想在运行时动态转换为给定的类型？这在静态类型语言中是不可能的！您可以做的是，传递您的类（或其他）`void*`并使用 switch ... case 将其转换为所需的类型（您也可以使用[`std.variant`](http://dlang.org/phobos/std_variant.html)，这可能是更好的方法，但我从未使用过它）和然后调用不同的函数（模板函数）：

```
final switch(which_type) {
    case "C1": foo(cast(C1)bar); break;
    case "C2": foo(cast(C2)bar); break;
}

void foo(T)(T a) {
} 
```

您还可以在编译时生成 switch case：

```
final switch(which_type) {
    foreach(i; TypeTuple("C1", "C2")) {
        case i: foo(mixin(`cast(` ~ i ~ `)bar`); break;
    }
} 
```

如果您只想获取类型的字符串，`typeof(bar).stringof`则会为您提供`bar`as 字符串的类型（但这在编译时已经知道）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T18:24:25.700

Mixin 是编译时的工件，只能在编译时使用。`typeof`只能在编译时使用。D 是一种静态类型语言，所有类型必须在编译时已知。

你可以有一个引用派生类实例的基类类型的引用，所以这样的事情是可能的：

```
C makeC(string type)
{
    switch(type)
    {
        case "C": return new C;
        case "C1": return new C1;
        case "C2": return new C2;
        default: throw new Exception(format("%s is not a C", tye));
    }
}

C c = makeC("C1"); 
```

还有[`std.variant`](http://dlang.org/phobos/std_variant.html)哪些可以用来保存不同的类型（它在内部使用联合）。

但是您无法决定变量在运行时的类型，因为 D 是静态类型的。

# c# - SQL 存储过程采用 2 个数组和 1 个 int ADO.NET

> ID：11566701
> 
> 赞同：-2
> 
> 时间：2012-07-19T18:02:51.003
> 
> 标签：c#, sql, sql-server-2008, ado.net

> **可能重复：**
> [按参数列表过滤 SQL 查询](https://stackoverflow.com/questions/11561465/sql-query-filtering-by-list-of-parameters)

我有一个方法 ADO.NET，它将字符串数组、名称和整数数组传递给存储过程。我可以一次做一个，但我想一次将它们全部传递..有可能吗？

使用 SQL Server 2008

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:12:38.397

听起来你想要的是一个表参数：http: [//msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

基本上，您可以构造一个 C# DataTable，并填充其中的所有值，然后将该表作为参数提供给 SQL 存储过程。

不幸的是，如果没有更多信息，我无法为您提供示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:07:56.063

代替数组，您可以将它们以逗号分隔（因此将它们作为单个字符串）发送并相应地使用它。

# python - django 哲学：何时包含模板以及何时让代码生成 html？

> ID：11566711
> 
> 赞同：1
> 
> 时间：2012-07-19T18:03:18.580
> 
> 标签：python, html, django, django-templates

使用 Django 模板时，我应该有一些模板充当“子例程”，可以这么说，还是在这些情况下我应该从我的代码中生成 HTML？

例如，我有一个包含多个名称列表的模板，我想将每个名称转换为`select`. 我是否应该有一个将`name_list`变量呈现为选择的模板，并执行以下操作：

```
#in the view:
return {'name_list_1': name_list_1, 
        'name_list_2': name_list_2, 
        'name_list_3': name_list_3}

#in the template:
{% with name_list_1 as name_list %}
  {% include "sub_name_list_select.html" %}
{% endwith %}
{% with name_list_2 as name_list %}
  {% include "sub_name_list_select.html" %}
{% endwith %}
{% with name_list_3 as name_list %}
  {% include "sub_name_list_select.html" %}
{% endwith %} 
```

或者我应该在我的代码中有一个函数`name_list_to_select_html`，它做同样的工作，并这样做：

```
return {'name_list_1_html': name_list_to_select_html(name_list_1), 
        'name_list_2_html': name_list_to_select_html(name_list_2), 
        'name_list_3_html': name_list_to_select_html(name_list_3)}

#in the template:
{{ name_list_1_html|safe }}
{{ name_list_2_html|safe }}
{{ name_list_3_html|safe }} 
```

还是这两个都错了，我的哲学完全错了？

附加问题：在速度方面，不断包含模板是否很慢？这是代码内 html 生成的奖励点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:18:08.387

通常，HTML 应该只在模板系统或直接相关的代码中生成。这使数据视图与业务和功能逻辑完全分离。我觉得这是一个适当[的关注点分离](https://en.wikipedia.org/wiki/Separation_of_concerns)。使用您的第一个解决方案。

至于性能，Django 运行这两个代码可能需要大约相同的时间。但是，如果您知道不需要在每个请求上重新生成这些代码段，它就有内置的视图和模板片段缓存。

# android - 将自定义属性传递给自定义片段着色器

> ID：11566712
> 
> 赞同：6
> 
> 时间：2012-07-19T18:03:30.080
> 
> 标签：android, opengl-es, opengl-es-2.0, shader

是否可以将自定义属性传递给片段着色器，我知道我可以将属性传递`GLES20.glVertexAttribPointer`给顶点着色器，但是我如何将浮点 [] 传递给片段着色器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T19:44:36.603

不。

如果您想将制服传递给片段着色器，您可以轻松地做到这一点（参见任何教程）。但是，如果您想要类似于 per-vertex 属性的东西，那么这样做是没有意义的。您还可以做的是将属性传递给顶点着色器，然后在顶点着色器中将它们作为变量传递给片段着色器。它们将在图元中进行插值，并作为片段着色器的输入提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:29:21.593

蒂姆的回答当然是正确的。

一种可能的解决方法是将您的`float`值存储在 2D 纹理中并将纹理坐标（和值的数量）传递给着色器。但是，如果每个顶点有大量浮点值（因为每个片段的所有纹理查找），这可能会变得非常慢。另一个问题是，如果您有很多顶点，这会导致纹理非常大。无论如何，在某些情况下，这种方法可能很有用。

# python - 将错误链接到 WTForms FieldLists 中的正确字段

> ID：11566715
> 
> 赞同：4
> 
> 时间：2012-07-19T18:03:37.987
> 
> 标签：python, ajax, wtforms, fieldlist

我正在使用 WTForm 验证我直接从 javascript 模型提交的表单（通过敲除填充）。在我的表格中，我有一个可以动态添加/删除的银行账户列表。在 python 方面，我有这样的东西：

```
class Account(Form):
    acc_name        = TextField('Account', [validators.Length(min=2, max=35)])    

class InformationForm(Form):
    account_list = FieldList(FormField(Account)) 
```

接收到的用于验证的 json 数据如下：

```
'account_list': [{'acc_name': 'aaaaa'}, {'acc_name': 'b'}]} 
```

问题是当我验证我收到这样的东西时，无法知道列表中的哪个帐户是错误的来源：

```
'account_list': [{'acc_name': [u'Field must be between 2 and 35 characters long.']} 
```

如何将错误链接到正确的帐户？

**编辑**：我最终的做法是在我的 InformationForm 类中添加了一个 getErrors 方法，该方法为每个 Account 构建了一个由唯一 Id 索引的字典，其中值是每个 Account 错误。然后我将它作为 json 返回到我的应用程序。如果有一个“自然”的解决方案，我会保持这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T19:37:54.557

FieldList 中的每个单独元素本身就是一个字段。如果 FieldList 包含一个 TextField，则每个条目都是一个 TextField。如果它包含一个 FormField，那么它就是一个 FormField（然后它包含一个带有自己的字段的表单） FieldList 条目可以通过迭代 FieldList 或访问 FieldList 的`.entries`属性来访问。

因此，不要查看`form.account_list.errors`封闭字段的错误。

因此，供您使用，如下所示：

```
{% for subfield in form.account_list %}
    <!-- subfield in this case is an instance of FormField -->
    {{ subfield.form.acc_name() %}
    {% if subfield.errors %}
        {% for error in subfield.form.acc_name.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}
    {% endif %}
{% endfor %} 
```

您可能希望将其[抽象为一个宏](http://wtforms.readthedocs.org/en/1.0.5/specific_problems.html#rendering-errors)，而不是为每个专业领域设置都这样做，如果这是您需要始终如一且经常做的事情。

# qt - 属性绑定未更新

> ID：11566716
> 
> 赞同：4
> 
> 时间：2012-07-19T18:03:39.967
> 
> 标签：qt, binding, qml, qtquick2, qtcpsocket

我在应用程序运行时不断获取数据，但是一旦我读入数据并将其存储在地图中，我在显示数据时遇到了一些麻烦。

当我尝试在 QML 中显示数据时，它只是显示为零，尽管我可以在应用程序输出中看到它正在更新。

我使用属性绑定访问 QML 中的值（我的印象是这些会导致在更改`headingSensor`时更新`carData.headingSensor`？）：

```
property int headingSensor: carData.headingSensor
Text {  text: "Heading: " + headingSensor } 
```

* * *

在我的数据类中，我有：

```
Q_PROPERTY(int headingSensor READ getHeadingSensor NOTIFY headingSensorChanged)
        int headingSensor; 
```

* * *

在我最初的 c++ 实现中：

```
 int data::getHeadingSensor(){
        return data.value(heading)[headingSensorReading];
    } 
```

* * *

它返回映射中的值，该值正在使用传入信息进行更新。

我意识到这可能不起作用，因为该属性依赖于 headingSensor 变量，尽管返回了正确的值，但该变量本身并未更新。所以，我想如果我改变它来更新headingSensor值并返回它可能会工作。

因此，在我的数据采集逻辑中，我也编写了一个更新变量的方法。

```
 data.insert(key, value);
                updateVariables();
            }
        }
    }
    void data::updateVariables(){
        headingSensor = data.value(heading)[headingSensorReading];
    }
    int data::getHeadingSensor(){
        return headingSensor;
    } 
```

虽然这导致`headingSensor`除了地图中的值之外还更新了变量，但 QML 显示中仍然没有显示正确的值。它只是显示`0`（它最初显示时的默认值，因为它还没有从传入的数据中获取值）。

所以，我想知道，如何让 QML 中显示的 sensorHeading 的值随着它的值和/或地图中的值在 C++ 中的变化而更新？我是否需要做类似的事情：

```
Connections {
    target: carData
    onSensorHeadingChanged: updateValues
} 
```

编辑：尝试这样的事情， onSensorHeadingChanged 永远不会触发。我不知道为什么，因为 sensorHeading 的值在我在应用程序输出中观察时明显变化

* * *

```
Connections{
     target: carData
     onHeadingSensorChanged: console.log("It's noting the change!")
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T21:52:50.027

It is the responsibility of the C++ element writer to emit `headingSensorChanged()` in order to cause the binding to be updated.

[This tutorial](http://qt-project.org/doc/qt-4.8/qml-extending-tutorial-index.html) is a good place to start when implementing a C++ element.

In your case you need to do something like this:

```
void data::updateVariables(){
    int sensorReading = data.value(heading)[headingSensorReading];
    if (headingSensor != sensorReading) {
        headingSensor = sensorReading;
        emit headingSensorChanged();
    }
} 
```

Note that we don't emit the change notifier unless there really is a change. This prevents needless JS evaluations, and also removes the possibility of binding loops.

# java - 通过传递活动上下文在外部类中的 requestWindowFeature()

> ID：11566718
> 
> 赞同：0
> 
> 时间：2012-07-19T18:03:43.467
> 
> 标签：java, android

我试图将大多数实用程序函数抽象化，因此我决定将它们分离到一个名为 Utils.java 的新类中（在 Android 应用程序包内）。

但是，我很难将活动上下文传递给这个助手类并在它的（助手类的方法）中运行一些系统的东西。

我在主要活动的 onCreate 中有这种情况：

```
Utils u = new Utils(this);
u.makeFullscreen(); 
```

实用程序.java：

```
package mypackagenamehere;

import android.content.Context;
import android.view.Window;
import android.view.WindowManager;

public class Utils{
    Context context;

    // Constructor  
    public Utils(Context c) {
        context = c;
    }

    public void makeFullscreen(){
        context.requestWindowFeature(Window.FEATURE_NO_TITLE);
        context.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
    }

} 
```

问题在于 makeFullscreen() 方法的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:05:30.230

试试这个

```
Utils u = new Utils(YourActivityName.this); 
```

最好这样做

```
public stactic void makeFullscreen(Context context){
        context.requestWindowFeature(Window.FEATURE_NO_TITLE);
        context.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
    } 
```

然后直接调用

```
Utils.makeFullscreen(YourActivityName.this); 
```

# java - 使用 c++ java 本机代码的 GraphicsMagick 性能问题

> ID：11566720
> 
> 赞同：1
> 
> 时间：2012-07-19T18:03:46.050
> 
> 标签：java, c++, tomcat, java-native-interface, graphicsmagick

我正在使用 GraphicsMagick C++ api 并在部署在 tomcat 上的 java web 项目中调用它，以便在运行时动态地将图像大小从某个大小调整为给定的宽度/高度。我正在使用 C++ api 的 scale() 方法。

现在当tomcat负载不大时性能正常，但是当服务器上的连接数/负载增加时，图像调整大小的性能会大大下降。甚至每次调整大小时都会花费 30 到 40 秒。尽管系统的内存、cpu 和 io 利用率看起来很正常，一点也不差。

有人可以帮我解决这个问题吗？我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:10:46.180

当我们遇到类似问题时，我遇到了这个问题。但是现在我们有一个很好的解决方案。试试 gm4java + im4java： [http ://kennethxu.blogspot.com/2013/04/integrate-java-and-graphicsmagick.html](http://kennethxu.blogspot.com/2013/04/integrate-java-and-graphicsmagick.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:39:33.127

您是否从[Graphics Magick 文档](http://www.graphicsmagick.org/convert.html)中看到了这一点？

gm convert -size 120x120 cockatoo.jpg -resize 120x120 +profile "*" thumbnail.jpg

在此示例中，“-size 120x120”向 JPEG 解码器提示图像将被缩小到 120x120，从而避免将全分辨率图像返回给 GraphicsMagick 以进行后续调整大小操作，从而使其运行得更快。'-resize 120x120' 指定输出图像的所需尺寸。它将被缩放，使其最大尺寸为 120 像素。'+profile "*"' 删除任何 ICM、EXIF、IPTC 或其他可能存在于输入中且在缩略图中不需要的配置文件。

如果您当前没有使用 size 选项，您可能会注意到很大的不同。

# javascript - 指定 jQuery 选择器引用的 HTML 页面？

> ID：11566731
> 
> 赞同：2
> 
> 时间：2012-07-19T18:04:19.580
> 
> 标签：javascript, jquery, html, jquery-selectors, css-selectors

我正在尝试编写 jQuery 代码来计算`<img>`站点上包含的元素数量。该站点由 4 个单独的 HTML 页面组成，全部位于服务器上的同一文件夹中。这些页面中只有一个“pics.html”加载了需要执行此功能的 .js 文件（pics.html 是唯一需要知道站点上有多少图像的页面）。

从 pics.html中获取`<img>`元素很容易，因为 pics.html 是加载脚本的页面：

```
var numImgs = $('img').length; 
```

...但我对如何参考不同的页面执行相同的功能感到困惑。是否可以指定选择器引用的 HTML 页面？

我试过这个，作为一个疯狂的猜测：

```
var numImgs = $('test.html:img').length; 
```

不出所料，它没有奏效。我用谷歌搜索了答案，但找不到解决方案——或者如果我确实找到了，我想我理解得不够好，无法意识到这是答案。

谢谢你的尽心帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:05:51.727

要从外部文件中选择对象，您需要使用`$.load()`.

**参考**：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:18:21.757

试试这个

```
$(document).ready(function(){
$('#myDiv').load('/remotePage.html #TargetDiv', function () {
    var elements = $('.class', this).length;
    alert(elements);
  });
}); 
```

# iphone - Cocos2d Chipmunk 重力和碰撞检测

> ID：11566734
> 
> 赞同：0
> 
> 时间：2012-07-19T18:04:30.657
> 
> 标签：iphone, cocos2d-iphone, game-physics, physics-engine

我在 Cocos2d Chipmunk 中有一个简单的动画，其中包含以下任务：

*   一个位于屏幕中央的圆形精灵，刚体类型。重心需要位于这个精灵的中心。
*   从屏幕的不同侧面（自发地超出屏幕尺寸），其他刚性圆形精灵必须落入中央精灵以填充可见的屏幕空间。
*   精灵不应相互重叠。

所以问题是：

1.  如何将重力矢量重新分配到屏幕中心？
2.  Cocos2d Chipmunk中如何实现刚体类型之间的碰撞检测？

谢谢各位同事！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:09:31.397

1.  您无法设置重心。您只能设置一个方向（所有对象都相同）。可以创建您描述的效果，但您必须自己完成工作。在每一帧中，你都必须在你的重力方向上对每个身体设置一个力或施加一个脉冲。而“常规”花栗鼠的重力应该是`(0, 0)`.

2.  请参阅有关碰撞检测的[本教程。](http://chipmunk-physics.net/tutorials/SimpleObjectiveChipmunk/)

# hadoop - 使用 hadoop + mapreduce 处理 couchdb 中的数据

> ID：11566736
> 
> 赞同：2
> 
> 时间：2012-07-19T18:04:39.593
> 
> 标签：hadoop, nosql, couchdb, mapreduce

我在 CouchDB 中有非常大量的数据，但我最近发现沙发中的 mapreduce 函数有多么严重（没有链接）。

所以我想到了使用 Hadoop 从 CouchDB 数据库运行 map reduce 查询，并希望将最终结果存储在另一个 CouchDB 数据库中？

这也太疯狂了吧？我知道我可以设置 Hbase 来执行此操作，但我不想将我的数据从 CouchDB 迁移到 Hbase。我喜欢沙发作为数据存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:30:36.843

CouchDB 中的 MapReduce 函数受限于简化结果的缓存。不必搜索受变更影响的视图，视图被设计为独立的。

这意味着如果您有复杂的 MapReduce 代码，您可以使用 CouchApp 之类的工具将函数嵌入到 MapReduce 函数中。我很难找到这方面的参考，但你是`!code`在视图中嵌入 JavaScript 函数的宏。[在 CouchDB 中使用 require() 或 // !json, !code？](https://stackoverflow.com/questions/4357533/using-require-or-json-code-in-couchdb)

通过将大部分代码放在共享函数中，并仅在不同视图中调用函数，这有助于获得链接而不链接的一些生产力优势。对于链接的性能优势，如果这就是您所追求的，那么您最好只迁移到 HBase。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:20:40.240

显然 CouchDB 应该能够[通过 Sqoop 将数据流式传输到 Hadoop](http://www.theregister.co.uk/2011/12/02/couchdb_/)，但我没有看到除该链接之外的任何其他信息。最坏的情况是，您可以编写自己的输入阅读器从 CouchDB 中读取数据，或者定期导出数据并将其放到 HDFS 上并从那里运行。

# ios - iOS 本机应用程序与 jquery mobile 一起使用

> ID：11566742
> 
> 赞同：0
> 
> 时间：2012-07-19T18:05:08.767
> 
> 标签：ios, xcode, jquery-mobile, uiwebview

我有我的原生 iOS xcode 项目，其中有一些使用 jquery mobile 和 iframe 的视图。恐怕苹果会接受它！有人可以分享他的经验吗？我的应用程序会因此被拒绝吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:09:49.057

我在这里看到有人抱怨，因为他的应用程序被拒绝并提及如下：

“这只是一个 html5 网站”或类似的东西。

拥有带有 html 内容的 webviews 本身并不坏，但你的应用程序必须提供一些有用的东西，而不是一个只有 5 个页面的“单纯”网站。

# android - TCP 客户端/服务器与多播广播

> ID：11566746
> 
> 赞同：3
> 
> 时间：2012-07-19T18:05:18.280
> 
> 标签：android, tcp, multicast, android-wifi, local-network

我正在开发一个非市场应用程序，它在 20-30 个 android 设备上运行（目标特定于具有 android 蜂窝 / ICS OS 的平板电脑）通过本地 WIFI 网络保持连接 1-2 小时，并且需要交换数据（表示命令的简单对象）。

大多数时候，一个特定的平板电脑的行为就像发送命令的服务器，而其他设备就像接收命令的客户端，但“客户端”有时也会向“服务器”发送命令。

作为这种通信需求的解决方案 - 我使用了一段时间的开源
库，它封装了 TCP 客户端/服务器协议，称为 - Kryonet。我发现它非常易于使用，并且基本上可以完成工作，尽管它有时“不稳定” - 会产生很多断开连接。**我无法承受这种断开连接**，它破坏了整个流程和用例，导致客户端丢失命令。

我正在做一些恢复逻辑，重新连接客户端并向他们发送他们错过的内容，但这对于用例来说还不够好。

最近我听说了多播广播协议，甚至发现了一个开源库调用 - JGroups，它以最佳方式实现了该协议，并公开了简单易用的接口。仍然没有尝试过，但是从知道的人那里得到了建议，说对于我的目的来说 TCP 客户端/服务器应该更好。

*   我应该使用什么最佳方法来实现我描述的行为？（不一定是我建议的两个之一）

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T19:39:18.413

尽管 JGroups 有望为您的情况提供更好的解决方案，但您可能需要进行更多试验以确定发生断开连接的原因。由于您的客户端和服务器都是平板电脑，因此还有一些其他不相关的原因：

1）如果连接没有被维护，`Service`那么默认情况下它们将非常不可靠。（请参阅[这个](https://stackoverflow.com/questions/7503997/when-why-does-my-java-singleton-instance-get-destroyed)关于在 Android 中销毁单例的问题）

2) 如果套接字尚未设置为“keepalive”，那么它们将在任意秒数后超时。

3) 您使用的设备在进入睡眠状态时可能会关闭一些持久连接。

4) 平板电脑可能正在退出 WiFi 范围，并切换到移动网络。

在许多台式机上尝试代码的网络部分，以确定问题是出在 Kryonet 还是您的代码上，或者问题出在 Android 上运行。

# objective-c - 无法从其他班级获取财产

> ID：11566750
> 
> 赞同：0
> 
> 时间：2012-07-19T18:05:24.713
> 
> 标签：objective-c, uiviewcontroller, uibutton

我有一堂课`RootViewController`，我有一个`UIBarButtonItem`声明。显示它的方法在另一个类`FirstDetailViewController`中。

我试图在另一个类中访问它`SecondDetailViewController`，但它始终为空。我用其他一些变量进行了测试，它们也为空。这是我所拥有的：

**RootViewController.h**

```
@interface RootViewController : UITableViewController <UISplitViewControllerDelegate> {

}

@property (nonatomic, retain) UIBarButtonItem *rootPopoverButtonItem;
...
@end 
```

* * *

**根视图控制器.m**

```
#import "RootViewController.h"
#import "FirstDetailViewController.h"

@implementation RootViewController

@synthesize popoverController, splitViewController, rootPopoverButtonItem;

- (void)splitViewController:(UISplitViewController*)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController:(UIPopoverController*)pc {

    NSLog(@"splitviewController will hide");

    // Keep references to the popover controller and the popover button, and tell the detail view controller to show the button.
    barButtonItem.title = @"Menu";
    self.popoverController = pc;
    self.rootPopoverButtonItem = barButtonItem;
    UIViewController <SubstitutableDetailViewController> *detailViewController = [splitViewController.viewControllers objectAtIndex:1];
    [detailViewController showRootPopoverButtonItem:rootPopoverButtonItem];
} 
```

* * *

**FirstDetailViewController.m**

```
- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem {

    NSLog(@"show root popover button item");

    // Add the popover button to the toolbar.
    NSMutableArray *itemsArray = [toolbar.items mutableCopy];
    [itemsArray insertObject:barButtonItem atIndex:0];
    [toolbar setItems:itemsArray animated:NO];
    [itemsArray release];
} 
```

* * *

**SecondDetailViewController.h**

```
 #import "RootViewController.h"

    @class RootViewController;

    @interface SecondDetailViewController : UIViewController <SubstitutableDetailViewController, UIScrollViewDelegate, UITextFieldDelegate, UITextViewDelegate> {
    ...
    }
    @property (nonatomic, retain) RootViewController *root;
    @end 
```

* * *

**SecondDetailViewController.m**

```
#import "SecondDetailViewController.h"

@implementation SecondDetailViewController

@synthesize root;

...
NSLog(@"view class : %@", [root.splitViewController class]);
[detailViewController showRootPopoverButtonItem:root.rootPopoverButtonItem];
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:08:14.117

您可能没有将 SecondDetailViewController 的“根”属性设置为要访问 UIBarButtonItem 的 RootViewController 实例。然后，您正在 SecondDetailViewController 代码中读取 RootViewController 的未初始化实例，而您没有收到错误的唯一原因是 Objective C 默默地忽略了对 nil 对象上的方法的调用（在本例中为 rootPopoverButtonItem getter 方法，`root.rootPopoverButtonItem`即的简写）。

如果您的“RootViewController”实例被称为“myRootViewController”，那么您必须在代码中的某处执行以下操作：

```
SecondDetailViewController *mySecondDetailViewController = [[SecondDetailViewController alloc] init];
mySecondDetailViewController.root = myRootViewController; 
```

然后，您将访问具有所需栏按钮的 RootViewController 副本。

# vb.net - 如何在同一个datagridview中拖放行

> ID：11566751
> 
> 赞同：5
> 
> 时间：2012-07-19T18:05:25.003
> 
> 标签：vb.net, visual-studio-2010, datagridview, drag-and-drop, datagridviewrow

在 Windows 应用程序 (Visual Studio)(VB) 中，如何将单行拖放到另一个位置以允许用户重新排序该行？我还没有找到任何有价值的例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T20:50:11.103

这是来自此 C# 答案的 vb 版本：[如何将 DataGridView 行拖放到彼此下方？](https://stackoverflow.com/a/1623968/719186)

表单类变量：

```
Private fromIndex As Integer
Private dragIndex As Integer
Private dragRect As Rectangle 
```

拖动事件：

```
Private Sub DataGridView1_DragDrop(ByVal sender As Object, _
                                   ByVal e As DragEventArgs) _
                                   Handles DataGridView1.DragDrop
  Dim p As Point = DataGridView1.PointToClient(New Point(e.X, e.Y))
  dragIndex = DataGridView1.HitTest(p.X, p.Y).RowIndex
  If (e.Effect = DragDropEffects.Move) Then
    Dim dragRow As DataGridViewRow = e.Data.GetData(GetType(DataGridViewRow))
    DataGridView1.Rows.RemoveAt(fromIndex)
    DataGridView1.Rows.Insert(dragIndex, dragRow)
  End If
End Sub

Private Sub DataGridView1_DragOver(ByVal sender As Object, _
                                   ByVal e As DragEventArgs) _
                                   Handles DataGridView1.DragOver
  e.Effect = DragDropEffects.Move
End Sub 
```

鼠标事件：

```
Private Sub DataGridView1_MouseDown(ByVal sender As Object, _
                                    ByVal e As MouseEventArgs) _
                                    Handles DataGridView1.MouseDown
  fromIndex = DataGridView1.HitTest(e.X, e.Y).RowIndex
  If fromIndex > -1 Then
    Dim dragSize As Size = SystemInformation.DragSize
    dragRect = New Rectangle(New Point(e.X - (dragSize.Width / 2), _
                                       e.Y - (dragSize.Height / 2)), _
                             dragSize)
  Else
    dragRect = Rectangle.Empty
  End If
End Sub

Private Sub DataGridView1_MouseMove(ByVal sender As Object, _
                                    ByVal e As MouseEventArgs) _
                                    Handles DataGridView1.MouseMove
  If (e.Button And MouseButtons.Left) = MouseButtons.Left Then
    If (dragRect <> Rectangle.Empty _
    AndAlso Not dragRect.Contains(e.X, e.Y)) Then
      DataGridView1.DoDragDrop(DataGridView1.Rows(fromIndex), _
                               DragDropEffects.Move)
    End If
  End If
End Sub 
```

确保将 grids`AllowDrop`属性设置为 true。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-11T06:47:10.013

**更新：**

代替

```
 If dragIndex < 0 Then dragIndex = DataGridView1.RowCount - 1 
```

改成

```
 If dragIndex > -1 Then 
      'action if not selected in the row header and blank space
 else
      'return error if selected in the column header and blank space
 end if 
```

那么当你将一行拖到“空白区域”时就会出现错误，如果你不相信我，你必须尝试一下。

最终代码（仅适用于“拖动事件”部分）是这样的：

```
 Private Sub DataGridView1_DragDrop(ByVal sender As Object, ByVal e As DragEventArgs) Handles DataGridView1.DragDrop
        Dim p As Point = DataGridView1.PointToClient(New Point(e.X, e.Y))
        dragIndex = DataGridView1.HitTest(p.X, p.Y).RowIndex
    'Determine if dragindex is valid row index       
    If dragIndex > -1 Then
        If (e.Effect = DragDropEffects.Move) Then
            Dim dragRow As DataGridViewRow = CType(e.Data.GetData(GetType(DataGridViewRow)), DataGridViewRow)
            DataGridView1.Rows.RemoveAt(fromIndex)
            DataGridView1.Rows.Insert(dragIndex, dragRow)
            'Add this line of code if you want to put selected rows to the rows that change
            DataGridView1.Rows(dragIndex).Selected = True
        End If 
       Else 'Do any message here if selected in column header and blank space. 
       End If
    End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-27T13:25:56.183

*事件GridView.DragDrop*的 1.5 改进：

1.  前 50% 的改进，为了避免描述的错误，您也可以使用

    ```
    Private Sub DgvSearchFieldCurrent_DragDrop( _
       ByVal sender As  Object, ByVal e As DragEventArgs) _
       Handles DgvSearchFieldCurrent.DragDrop

    Dim LclDgv As DataGridView = CType(sender, DataGridView)

    If dragIndex > -1 AndAlso dragIndex < LclDgv.RowCount -1 Then 
    ```

2.  二是将焦点设置到当前行和第一个单元格：

    ```
    LclDgv.Rows.Insert(dragIndex, dragRow)

    LclDgv.Rows(fromIndex).Selected = False
    LclDgv.Rows(dragIndex).Selected = True

    For Each C As DataGridViewColumn In LclDgv.Columns
      LclDgv(C.Index, fromIndex).Selected = False
    Next

    LclDgv(0, dragIndex).Selected = True 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-30T20:16:36.310

这是一个没有提到的错误的控件。

在 Windows 窗体设计器中设置`AllowUserToOrderRows`和`AllowDrop`到`True`并拖动行标题，而不是内容。

```
Imports System.ComponentModel

Public Class BetterDataGridView
    Inherits DataGridView

    <Category("Behavior"), DefaultValue(False)>
    Public Property AllowUserToOrderRows As Boolean = False

    Protected Overrides Sub OnMouseDown(e As MouseEventArgs)
        MyBase.OnMouseDown(e)

        Dim hitInfo As HitTestInfo = HitTest(e.X, e.Y)
        If AllowUserToOrderRows AndAlso
                e.Button = MouseButtons.Left AndAlso
                hitInfo.ColumnIndex = -1 AndAlso
                ValidRow(hitInfo.RowIndex) Then
            DoDragDrop(Rows(hitInfo.RowIndex), DragDropEffects.Move)
        End If
    End Sub

    Protected Overrides Sub OnDragOver(e As DragEventArgs)
        MyBase.OnDragOver(e)

        Dim dragRow As DataGridViewRow = e.Data.GetData(GetType(DataGridViewRow))
        Dim targetIndex As Integer = GetRowIndex(e)
        e.Effect = If(ValidRowDragDrop(dragRow, targetIndex),
                      DragDropEffects.Move,
                      DragDropEffects.None)
    End Sub

    Protected Overrides Sub OnDragDrop(e As DragEventArgs)
        MyBase.OnDragDrop(e)

        Dim dragRow As DataGridViewRow = e.Data.GetData(GetType(DataGridViewRow))
        Dim targetIndex As Integer = GetRowIndex(e)

        If e.Effect = DragDropEffects.Move AndAlso ValidRowDragDrop(dragRow, targetIndex) Then
            EndEdit()

            Rows.Remove(dragRow)
            Rows.Insert(targetIndex, dragRow)

            ClearSelection()
            dragRow.Selected = True
        End If
    End Sub

    Protected Function ValidRow(rowIndex As Integer) As Boolean
        Return rowIndex >= 0 AndAlso
            rowIndex < Rows.Count - If(AllowUserToAddRows, 1, 0)
    End Function

    Protected Function GetRowIndex(e As DragEventArgs) As Integer
        Dim clientPos As Point = PointToClient(New Point(e.X, e.Y))
        Return HitTest(clientPos.X, clientPos.Y).RowIndex
    End Function

    Protected Function ValidRowDragDrop(dragRow As DataGridViewRow, targetIndex As Integer) As Boolean
        Return dragRow IsNot Nothing AndAlso
            ValidRow(targetIndex) AndAlso
            targetIndex <> dragRow.Index AndAlso
            Rows.Contains(dragRow)
    End Function
End Class 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T16:03:36.290

谢谢你所做的一切，代码工作。我只得到一个错误。我解决了。

如果设置了 datagridview “启用编辑”，则在抛出行距时会收到错误消息。你可以试试。我解决了如下：

```
 Private Sub DataGridView1(ByVal sender As Object, ByVal e As DragEventArgs) Handles DataGridView1.DragDrop

    Dim p As Point = DataGridView1.PointToClient(New Point(e.X, e.Y))
                    dragIndex = DataGridView1.HitTest(p.X, p.Y).RowIndex
                    If (e.Effect = DragDropEffects.Move) Then
                        Dim dragRow As DataGridViewRow = CType(e.Data.GetData(GetType(DataGridViewRow)), DataGridViewRow)

                        If dragIndex = DataGridView1.RowCount - 1 Then '**ADD THIS AREA**
                            DataGridView1.Rows.RemoveAt(fromIndex)
                            DataGridView1.Rows.Insert(DataGridView1.RowCount - 1, dragRow)
                        Else
                            If dragIndex < 0 Then dragIndex = DataGridView1.RowCount - 2 '**this is important**
                            DataGridView1.Rows.RemoveAt(fromIndex)
                            DataGridView1.Rows.Insert(dragIndex, dragRow)
                        End If
                    End If
End Sub 
```

感谢所有其他信息

# c - 如何将不良转换 HINSTANCE 删除为 int？

> ID：11566752
> 
> 赞同：0
> 
> 时间：2012-07-19T18:05:29.110
> 
> 标签：c, winapi, gcc, casting

我正在使用`-Wbad-function-cast`标志在 gcc 上编译一个程序。gcc 显示以下警告：

`cast does not match function type`

这是警告行： `int ret = (int)`[`FindExecutable(file, NULL, result)`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776419%28v=vs.85%29.aspx)

问题是：有可能删除它吗？也许转换为另一种 Windows 数据类型，但我将其作为整数处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:10:50.063

你有没有看过 HINSTANCE 实际上是什么？（我猜它是一个指针，而不是一个 int）。所以你可能会有更好的运气铸造到一个虚空*

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx)

实例的句柄。这是内存中模块的基地址。HMODULE 和 HINSTANCE 在今天是相同的，但在 16 位 Windows 中表示不同的东西。这种类型在 WinDef.h 中声明如下： typedef HANDLE HINSTANCE;

HANDLE
对象的句柄。这种类型在 WinNT.h 中声明如下： typedef PVOID HANDLE;

指向任何类型的指针。此类型在 WinNT.h 中声明如下： typedef void *PVOID;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-12T08:27:35.590

根据[FindExecutable 文档](https://docs.microsoft.com/en-us/windows/win32/api/shellapi/nf-shellapi-findexecutablea)操作，该函数返回一个`HINSTANCE`类型值，但也返回值小于或等于 32 的整数以指示错误。将结果投射到`int`64 位 Windows 系统上会触发编译器警告。为了避免它并仍然检查错误值，您可以将其值转换为`unsigned long long`.

# cocos2d-iphone - lastTimeTargetAdded 怎么不是 0

> ID：11566758
> 
> 赞同：0
> 
> 时间：2012-07-19T18:05:55.633
> 
> 标签：cocos2d-iphone

我开始使用 Cocos2d 并且在过去的几天里一直在学习本[教程（链接是第 9 部分）。](http://www.iphonegametutorials.com/2012/03/06/how-to-build-a-tower-defense-game-for-the-iphone-part-9-menus/)在阅读源代码并试图理解它时，我到达了一个对我没有任何意义的部分。

```
-(void)gameLogic:(ccTime)dt {

   static double lastTimeTargetAdded =0;
    double now = [[NSDate date] timeIntervalSince1970];
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    if(lastTimeTargetAdded == 0 || now - lastTimeTargetAdded >= delegate.curLevel.spawnRate) {
        [self addTarget];
        lastTimeTargetAdded = now;
    }

} 
```

通过这个调用：

```
 [self schedule:@selector(gameLogic:) interval:0.2]; 
```

`lastTimeTargetAdded`每次函数运行时都会创建和设置这个事实，它怎​​么不是0？如果是这样，那有什么意义`lastTimeTargetAdded = now`呢？如果 if 语句是 OR (||) 它永远不会评估它的另一面，那为什么还要存在呢？

我非常了解该功能的作用，而不是它的作用方式。这个方法是假设根据它们的生成率生成小兵。确保波浪中的所有小兵都不会刚刚倾倒在屏幕上。而且该方法确实做得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:51:30.440

它是一个***静态***变量……第一条语句仅在第一次调用 gameLogic 时设置为 0。在每个后续调用中，lastTimeTargetAdded 具有在上一次调用中设置的值。

# java - 安全地存储重复 Web 服务调用的凭据

> ID：11566761
> 
> 赞同：1
> 
> 时间：2012-07-19T18:06:15.270
> 
> 标签：java, web-services, spring, spring-security

我正在开发一个供内部使用的 Web 应用程序，该应用程序由对另一个远程服务器的许多 Web 服务请求驱动。内部站点维护自己的会话，通过用户名/密码凭据进行身份验证，这些凭据本身由 Web 服务支持（即我们进行远程身份验证调用以验证对内部站点的登录）。Web 服务请求还需要使用这些相同的凭据进行身份验证。

我们希望这些 Web 服务请求可以保持无状态，这意味着在每个身份验证请求中都传递凭据。问题是以安全的方式记住要使用的凭据（在初始登录期间输入的凭据）。我不知道有任何真正安全的方法来存储密码以供以后重复使用 - 散列它会牺牲我们再次使用它的能力。我们能做的最好的事情就是在会话范围内对其进行编码，并希望没有恶意开发人员会尝试在线程转储或其他东西中捕获它。

我缺少更好的解决方案吗？我是否对将编码密码存储在内存中的风险过于偏执，或者我们对这个项目的方法是否存在缺陷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:33:46.083

最终我们的结论是不，在服务器上存储可以以任何方式重用的用户凭据是不安全的，因此我们不能对每个 Web 服务请求进行真正的无状态重新身份验证。我们只需要妥协并保留在用户初始登录期间启动和存储的有状态连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:52:13.060

我建议使用基于令牌的身份验证，将令牌传递给用户以进行廉价的用户验证。一种实现方式是生成一个 cookie，该 cookie 传递给用户以进行会话管理。

我没用过，但你应该看看[oauth](http://www.springsource.org/spring-security-oauth)可能是[例子](http://www.lordofthejars.com/2011/05/to-seek-out-new-life-and-new.html)

# java - 生成唯一的参考号

> ID：11566763
> 
> 赞同：2
> 
> 时间：2012-07-19T18:06:20.110
> 
> 标签：java, database, oracle, hibernate, primary-key

**技术栈**：Java 1.6、JPA (Hibernate 3)、Spring 3、Oracle 11g

我正在做一个项目，其中一个要求是给客户一个'ReferenceNumber'。

一种选择是返回行 ID，但要使其正常工作，它不能是连续的。否则，您可以猜测下一个数字等。

我可以在 Java 中生成一个数字并将其存储在单独的列中，但我会确保没有冲突。

有办法在数据库中生成这样的数字，但不确定它是否能保证唯一性。

*从数据库的角度来看，这种要求是否有最佳实践？*

## **更新 1**

当前我在 Java 中使用以下内容来生成数字：

```
 private static SecureRandom random = new SecureRandom();

    public static BigInteger getNew() {
        return new BigInteger(60, random);
    }

    public static BigInteger getNew(int numBits) {
        return new BigInteger(numBits, random);
    } 
```

## **更新 2：要求**

允许序号将允许：

1.  客户猜测下一个数字。
2.  找出两个数字之间有多少个数字（订单）。ETC

这个引用最好是一个数字，但是说一个三个字母的前缀后跟数字也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:32:52.037

如果您的表有一个序列生成的主键（例如 customer_id），那么您可以反转数字，然后将其转换为八进制表示。因此它看起来仍然像一个十进制数，但它肯定不再是连续的并且很难猜出任何范围。

如果您能找到一种方法来处理原始值中的尾随零（因为它们将成为反转数字中的前导零，因此在转换过程中将被“丢弃”），则该过程甚至是可逆的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:11:49.447

用客户缩写或名称缩写或其他东西（或创建客户时分配的 3 个字母，检查唯一性）作为数字前缀，然后只存储一个值，然后为该客户按顺序递增？这样他们就无法知道系统其余部分的订单号是多少，但他们可以自己知道，这并不重要，因为他们知道他们已经下了多少订单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:11:57.880

为什么不采用几个相关字段的 SHA1 或 MD5 哈希（比如用户名和记录创建时间等）？在许多方面，如果该策略是众所周知的，那么数据库外部的服务将能够重新创建参考编号，而无需查询数据库。

# c# - 处理 POST 后线程中止

> ID：11566765
> 
> 赞同：1
> 
> 时间：2012-07-19T18:06:23.837
> 
> 标签：c#, asp.net, multithreading

所以这个应用程序在 Visual Studio 中无缝运行，但是我为遇到错误的程序创建了一个安装程序。我想我已经确定了问题所在。当收到一个 POST 时，它会被处理，这会启动一个单独的解耦过程，该过程最终会从网页处理/关闭中中止。

程序流程是这样的

*   收到 POST `context.Request.HttpMethod == "POST"`,
*   提取并写入磁盘的相关 xml 信息，
*   `csfireEyeHandler.DonJobOnLastIp()`,
*   在后台运行的监视器会接收文件创建事件“void OnChanged”并开始运行基于 XML 文档的服务
*   `FileAdded`--> `readerRef.ReadInServices(e.FullPath, false)`。

问题是在处理 POST 后，它会导致服务因 ThreadAbortException 而中止。如果`handler.ProcessRequest(context)`在服务完成后延迟，我想是因为页面仍然打开。我无法弄清楚如何正确处理这种情况，调试起来非常困难，因为我无法在 VS 中发生错误。

```
public partial class fireEye : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        HttpContext context = Context;
        fireEyeHandler handler = new fireEyeHandler();
        handler.ProcessRequest(context);          
    }
}

public class fireEyeHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        if (context.Request.HttpMethod == "POST")
        {
            var extension = context.Request.Url.AbsolutePath.Split('/')[2].ToLower();

            var stream = context.Request.InputStream;
            var buffer = new byte[stream.Length];
            stream.Read(buffer, 0, buffer.Length);
            var xml = Encoding.UTF8.GetString(buffer);

            FileManage.WriteToFile(xml, @"C:\ECC_output\fireEye.xml");
            var csfireEyeHandler = new FireEyeService { config = extension + ".config" };

            csfireEyeHandler.Load();
            csfireEyeHandler.DonJobOnLastIp();

            context.Response.StatusCode = 202;              
        }
    }

    public bool IsReusable
    {
        get { return false; }
    }
}

public class Monitor
{
    bool monitorIsActive;
    readonly XmlRead readerRef;  // Reference to the xml reader
    readonly FileSystemWatcher watch;
    public bool monitorRunning;

    public Monitor(XmlRead reader)
    {
        watch = new FileSystemWatcher();
        readerRef = reader;

        try
        {
            watch.Path = @"C:\ECC_temp"; //directory to monitor
        }
        catch (ArgumentException ex)
        {
            Report.LogLine (ex.Message);
            return;
        }

        watch.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName;

        watch.Filter = "*.xml";
        monitorIsActive = true;

        watch.Created += OnChanged;
        watch.Deleted += OnChanged;
        watch.Renamed += OnRenamed;

        watch.EnableRaisingEvents = true;
    }

    /// <summary>
    /// Toggles on/off if a directory is being monitored
    /// </summary>
    public void ToggleMonitor()
    {
        monitorIsActive = !monitorIsActive;
        var monitorState = monitorIsActive ? "on" : "false";

        Report.LogLine ("Monitor is " + monitorState);
    }

    /// <summary>
    /// File has been added to the directory
    /// </summary>
    public bool FileAdded(FileSystemEventArgs e, XmlDocument xmlDocument)
    {
        try
        {
            var date = string.Format ("<br>\r\n**********************Report  {0:yyyy MM-dd hh:mm tt}**********************", DateTime.Now);
            Report.LogLine(date);

            readerRef.Validate(e.FullPath, false);
            readerRef.ReadInServices(e.FullPath, false);

            Report.CreateReport();
        }
        catch (Exception exception)
        {
            Report.LogLine(exception.Message + " id:6");
            Report.CreateReport();
            return true;
        }
        return true;
    }

    /// <summary>
    /// When a file is added, renamed or deleted, OnChanged is called and the appropriate action is taken
    /// </summary>
    private void OnChanged(object source, FileSystemEventArgs e)
    {
        monitorRunning = true;
        while (true)
        {
            if (e.ChangeType == WatcherChangeTypes.Created || e.ChangeType == WatcherChangeTypes.Renamed)
            {
                var xmlDocument = new XmlDocument();
                try
                {                        
                    xmlDocument.Load(e.FullPath);
                }
                catch (IOException)
                {
                    Thread.Sleep(100);
                }

                if (FileAdded(e, xmlDocument))
                {
                    break;
                }
            }

        }
        monitorRunning = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:47:56.803

根据我对您问题的解释，您不想等到文件监视器事件发生后再将响应发送给客户端。您想立即发送 200 并在后台处理。

这是 ASP.NET 中的一种反模式，因为运行时不能保证工作进程在所有正在运行的 HTTP 请求都退出时保持活动状态。从这个意义上说，ASP.NET 符合规范：它可以随时中止您的自定义线程。

如果您等到“服务处理”完成后再发送 200 作为 HTTP 响应，则更容易做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:30:39.837

除非您的应用程序知道此监视器并且知道如何检测它当前正在处理文件更改事件并且不从帖子返回，否则您无能为力。我建议不要将 Web 应用程序耦合到此监视器（您尚未解释其用途）。我建议将其从 Web 应用程序中提取出来，并将其放入某种 Windows 服务中。或者，更详细地解释为什么此 Monitor 在 Web 应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:02:44.143

第一个问题是文件一*创建*`FileSystemWatcher`就会触发，这通常是**在 ASP.NET 进程仍在编写文档的过程中**。

 ***我希望这会导致 XML 读取异常或拒绝访问异常，但不一定是`ThreadAbort`异常。`ThreadAbort`异常通常只有在有人调用时才会发生`Thread.Abort`，而你永远不应该这样做。

无论如何，您可以通过使用[`System.IO.FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream)写入文件并告诉 Windows 在写入文件时锁定它来解决此问题。

*   当您打开文件进行写入时，请指定`FileShare.None`. 这将阻止监视器尝试读取文件，直到 ASP.net 进程完成写入。

*   在您的监视器中，在打开文件时添加一个带有小睡眠的重试循环。`IOException`在文件准备好供您阅读之前，您应该反复获得拒绝访问异常（我认为这将是一个）。

如果不了解您的 csFireEyeHandler 应该做什么，我真的无能为力。您是否希望监视服务在您的 ASP.net 请求中间完成对文件的处理？这不太可能发生。

我期望的工作流程是：

```
         ASP PAGE 监控进程

     > 文件上传 |
     | |
     > 开始写入磁盘 |
     | > 尝试打开文件
     | > 无法读取文件并重试
     > 完成写入磁盘|
     | > 打开文件
     | |
     | > 开始处理文件
     > csFireEyeHandler.Load |
     > csFireEyeHandler.DonJob |
     > 返回 |
                                       |
                                       > 完成流程文件（Report.CreateReport）

```

如果实际上您需要 fireEyeHandler 来等待后台服务，有几种方法可以做到这一点……但为什么不直接在 fireEyeHandler 中处理文件呢？***

# jakarta-mail - java mail api：抛出异常说java.lang.SecurityException：访问默认会话被拒绝

> ID：11566772
> 
> 赞同：22
> 
> 时间：2012-07-19T18:06:40.637
> 
> 标签：jakarta-mail

当我尝试在我的 web 应用程序中使用 java mail api 发送邮件时，我收到了这个异常。

java.lang.SecurityException：访问默认会话被拒绝

输入来自一个 html 页面。然后它转到一个 servlet，该 servlet 最终调用一个编写邮件逻辑的 java 类

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-01T05:15:00.440

此错误文本与`Session.getDefaultInstance(props, authenticator)`对默认实例已具有不同身份验证器集的调用相关联。

如果您调用`Session.getInstance(props, authenticator)`而不是`Session.getDefaultInstance(props, authenticator)`在代码中调用，它应该会更好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-12T09:05:26.600

当我在 Webdriver 中启动 2 个测试时，我遇到了同样的错误。在第二个测试中，我得到了“java.lang.SecurityException：访问默认会话被拒绝”。

当我在每次测试中使用方法**Session.getInstance**而不是**Session.getDefaultInstance**时，错误就消失了。

# javascript - 调整整个窗口元素的大小

> ID：11566773
> 
> 赞同：0
> 
> 时间：2012-07-19T18:06:48.217
> 
> 标签：javascript, jquery, css

我正在寻找一种方法来调整我网页的整个窗口大小以适应窗口大小。所以，这样的[（](http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)看背景图片）。但是对于整个页面？

而且我不是在谈论保持字体大小或图像相同。我真的在谈论调整屏幕中所有内容的大小。因此，即使图像也会调整大小。

# php - 限制对 Zen Cart 中一页的访问

> ID：11566775
> 
> 赞同：0
> 
> 时间：2012-07-19T18:06:53.137
> 
> 标签：php, mysql, zen-cart

我有一个客户销售面向公众的衬衫，但也想通过他的网站为组织销售不面向公众的相同衬衫，例如公司衬衫等。

我想出了如何用密码保护 EZ 页面，这样公众就无法在没有代码查看的情况下访问；但是，密码保护不会渗透到我位于“目录”内的子 EZ 页面。我的问题：我不希望零售商有权查看所有其他组织的价格折扣。目前，设置了密码保护代码，一旦零售商通过密码保护EZ父页面，他们就可以访问所有组织链接。不好。有没有办法我只能限制每个零售商的 1 个页面，而他们却没有看到竞争对手获得的折扣？

我不确定这是否可以使用代码解决，或者这是一个数据库问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:26:09.393

这是一个 php 和 DB 问题。:)

您可以做的是在 EZ-Pages 下启用 php，然后根据客户 ID 进行每页限制。例如，您可以执行以下操作：

```
if ($_SESSION['customer_id'] == 24 || ($_SESSION['customers_id'] == 48)) {
 //your content here
} else {
 //not authorized message
} 
```

这将允许您仅向 ID 24 和 48 的客户显示内容。无需密码保护，这一切都由 Zen Cart 的本机代码处理。

如果您使用双重定价并且您的组织具有批发状态，您可以使用`$_SESSION['customer_whole']`

这一切都取决于你如何处理你的组织......

# actionscript-3 - Flex 4.6 检查是否创建完成

> ID：11566776
> 
> 赞同：3
> 
> 时间：2012-07-19T18:07:00.247
> 
> 标签：actionscript-3, flash, apache-flex, events, flex4

在 AS3 中，我知道我可以通过在加载的 SWF 的开头包含以下内容来检查舞台是否可以访问，例如，外部加载的 SWF：

```
if (stage) {
  this.init();
} else {
  addEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
} 
```

上述解决方案非常适合在执行这些行时检查程序是否可以访问该阶段，或者添加一个事件侦听器来侦听该阶段何时可以访问。

我试图在 Flex 4.6 的自定义组件中复制类似的情况。但是，我不是在监听舞台的存在，而是在寻找`creationComplete`组件的事件是否已被触发。

`creationComplete`对于事件是否已被触发，是否有类似的解决方案，如果还没有，请听它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:05:29.547

我只是 Windows grepped 4.6 源和 UIComponent 在初始化设置为 true 时调度创建完成事件，所以[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#initialized](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#initialized)应该可以工作.

**编辑** 响应调用初始化注释，但在步骤 9 中不会发生将初始化设置为 true 的情况，它实际上是在 UIComponent 中调度 CREATION_COMPLETE 的位置，请参阅我从 UIComponent 的 4.6 源中提取的这段代码：

```
/**
     *  A flag that determines if an object has been through all three phases
     *  of layout: commitment, measurement, and layout (provided that any were required).
     *  
     *  @langversion 3.0
     *  @playerversion Flash 9
     *  @playerversion AIR 1.1
     *  @productversion Flex 3
     */

/**
 *  @private
 */

public function set initialized(value:Boolean):void
{
    _initialized = value;

    if (value)
    {
        setVisible(_visible, true);
        dispatchEvent(new FlexEvent(FlexEvent.CREATION_COMPLETE));
    }
} 
```

如果您不相信我在 UIComponent 中按 Ctrl+Shift+T 并搜索“变量：创建”，您将获得一个注释块，该块开始分派启动事件的部分以及一些用于标记这些事件的变量已完成。INITIALIZE 事件发生在我引用的下面的不同设置器中。

```
public function set processedDescriptors(value:Boolean):void
{
    _processedDescriptors = value;

    if (value)
        dispatchEvent(new FlexEvent(FlexEvent.INITIALIZE));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:31:27.273

为什么不向组件添加一个 creationComplete 事件侦听器并在处理函数中执行逻辑？另外，您可以尝试制作一个布尔属性，例如

```
public var isInitialized:Boolean = false;

function creationCompleteHandler(e:Event):void
{
   isInitialized = true;
   //code here
} 
```

这样您就可以从外部来源检查它是否已初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T22:23:50.847

为什么不直接使用 applicationComplete 而不是 creationComplete，因为 applicationComplete 是检查阶段是否可访问时循环中的最后一个阶段？我想每个应用程序组件的creationComplete 都必须在applicationComplete 之前触发。由于某种原因，您是否尝试在应用程序准备好之前访问 creationComplete ？

我刚刚回顾了这个，我完全不确定你为什么要积极寻求更困难的解决方案。这个解决方案应该有效，我个人觉得它是正确的。当然，您可以检查 creationComplete 是否已触发，但除非您明确需要此功能，否则当您当然可以通过利用生命周期利用良好的逻辑分离时，我看不到检查 creationComplete 的意义......

# c# - 由于某种原因，不能将 XOR 运算符与两个字符一起使用，有人知道为什么吗？

> ID：11566778
> 
> 赞同：3
> 
> 时间：2012-07-19T18:07:11.820
> 
> 标签：c#, operators

是否有一些正式标准不允许在 C# 中使用两个字符的 ^ 或 XOR 函数？

```
 public char[] XORinput(char[] input, char SN)
    {
        int InputSize = input.Length;
        //initialize an output array
        char[] output = new char[InputSize];

        for (int i = 0; i < InputSize; i++)
        {

            output[i] = input[i] ^ SN;

        }

        return output;

    } 
```

无论出于何种原因，这段代码给了我这个错误，错误 1400 无法将类型“int”隐式转换为“char”。存在显式转换（您是否缺少演员表？）

这没有任何意义。

呼叫者：

```
 string num = "12345";
                char SN = Convert.ToChar(num);//serial number

                string sCommand = ("Hellow");

                char[] out = new char[sCommand.ToCharArray().Length];

                out = calculator.XORinput(sCommand.ToCharArray(), SN); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T18:11:36.440

错误不在于函数，而在于它的结果。

当你这样做时，`input[i] ^ SN;`你的结果是一个 int，你“不能将类型'int'隐式转换为'char'。

你可以像这样投射它：

```
(char)(input[i] ^ SN); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T18:14:09.497

xor 运算符（以及其他运算符）返回一个整数结果。因此，一次转换为 char 就足够了。

```
output[i] = (char)(input[i] ^ SN); 
```

在这种情况下，您不必强制转换，但在您的情况下效率较低：

```
output[i] = input[i];
output[i] ^= SN; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T18:11:16.780

如果你有一个字符，一个char，你可以将它转换成一个整数，一个int。

然后您可以使用 ^ 运算符对其执行 XOR。您目前似乎没有使用该运算符，这可能是您问题的根源。

```
 output[i] = (char)((uint)input[i] ^ (uint)SN); 
```

# multithreading - 进程VS线程：两个进程可以共享相同的共享内存吗？两个线程可以吗？

> ID：11566780
> 
> 赞同：17
> 
> 时间：2012-07-19T18:07:23.567
> 
> 标签：multithreading, process, operating-system, shared-memory

在思考了共享内存的整个概念之后，提出了一个问题：

两个进程可以共享同一个共享内存段吗？两个线程可以共享同一个共享内存吗？

想得更清楚一点后，我几乎肯定两个进程可以共享同一个共享内存段，其中第一个是父亲，第二个是儿子，这是用 a 创建的`fork()`，但是两个线程呢？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-19T18:12:59.727

> 两个进程可以共享同一个共享内存段吗？

是和不是。通常在现代操作系统中，当另一个进程从第一个[分叉](http://linux.die.net/man/2/fork)时，它们共享相同的内存空间，并在所有页面[上设置一个写时复制。](http://en.wikipedia.org/wiki/Copy-on-write)对任何读写内存页面进行的任何更新都会为该页面制作一个副本，因此将有两个副本，并且该内存页面将不再在父进程和子进程之间共享。这意味着只有只读页面或尚未写入的页面将被共享。

如果一个进程*没有*从另一个进程派生出来，那么它们通常不会共享任何内存。一个例外是，如果您正在运行同一程序的两个实例，那么它们可能会共享[代码，甚至可能共享静态数据段](http://en.wikipedia.org/wiki/Data_segment#Program_memory)，但不会共享其他页面。另一个是一些操作系统如何允许应用程序共享由多个应用程序加载的动态库的代码页。

还有[特定的内存映射调用](http://linux.die.net/man/3/mmap)来共享相同的内存段。该调用指定映射是只读的还是读写的。如何做到这一点非常依赖于操作系统。

> 两个线程可以共享同一个共享内存吗？

当然。通常，多线程进程内部的所有内存都由所有线程“共享”，除了一些相对较小的每个线程的堆栈空间。这通常是线程的定义，因为它们都在相同的内存空间中运行。

线程还增加了在与处理器/内核相关的高速内存中[缓存内存段的复杂性。](http://www.roguewave.com/portals/0/products/threadspotter/docs/2011.2/manual_html_linux/manual_html/ch_intro_coherence.html)这个缓存的内存*不是*共享的，内存页面的更新会根据同步操作刷新到中央存储中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T18:18:44.660

一般来说，进程的一个重点是防止内存被共享！在最常见的操作系统上当然可以通过共享内存段进行进程间通信，但默认情况下不存在这种机制。如果幸运的话，未能正确设置和管理共享区域可能会导致 segFault/AV，否则可能会导致 UB。

然而，属于同一进程的线程没有这种硬件内存管理保护，几乎可以共享它们喜欢的任何东西，明显的缺点是它们几乎可以破坏它们喜欢的任何东西。我从来没有真正发现这是一个大问题，尤其是。使用倾向于将指针“结构化”为对象实例的现代 OO 语言（Java、C#、Delphi）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T18:17:37.927

是的，两个进程都可以附加到共享内存段。如果不是这样，共享内存段将没有多大用处，因为这是共享内存段背后的基本思想——这就是为什么它是 IPC（进程间通信）的几种形式之一。

同一进程中的两个线程也可以都附加到共享内存段，但鉴于它们已经共享了它们所属进程的整个地址空间，因此可能没有多大意义（尽管有人可能会认为这是提出一个或多或少有效的用例的挑战）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-23T18:27:01.267

一般而言，每个进程占用一个与所有其他进程隔离的内存空间，以避免不必要的交互（包括那些可能代表安全问题的交互）。但是，通常有一种方法可以让进程共享部分内存。有时这样做是为了减少 RAM 占用（VAX/VMS 中的“已安装文件”是/曾经是这样的一个例子）。它也可以是协作进程进行通信的一种非常有效的方式。如何实现/结构化/管理共享（例如父/子）取决于特定操作系统提供的功能和在应用程序代码中实现的设计选择。

在一个进程中，每个线程都可以访问与同一进程的所有其他线程完全相同的内存空间。一个线程唯一对自己独特的是“执行上下文”，其中一部分是它的堆栈（尽管没有什么可以阻止一个线程访问或操作“属于”同一进程的另一个线程的堆栈）。

# c# - Intellisense 不在参考库上更新

> ID：11566782
> 
> 赞同：0
> 
> 时间：2012-07-19T18:07:46.500
> 
> 标签：c#, visual-studio, intellisense

我有一个引用 C# 库的 C# 应用程序，它们都在同一个解决方案中，并且是使用“添加引用/项目”选项卡添加的。

当我在库中的类中更改某些内容（添加/删除成员）时，C# 应用程序中的智能不会得到更新。一切都编译找到，但我没有看到最近添加的新成员。

我已经尝试过重建所有的东西，但没有这样做。我现在唯一的解决方法是删除引用，然后再次添加。这会更新智能感知信息。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-08T03:34:47.100

我知道这是一个非常古老的问题，但是当我搜索完全相同的问题时它出现了。我最终通过右键单击 c# 库并选择 clean 然后再次构建类库来解决问题。现在更改正在正常更新智能感知。

# c# - 这怎么能用ninject重写？

> ID：11566786
> 
> 赞同：0
> 
> 时间：2012-07-19T18:07:59.170
> 
> 标签：c#, dependency-injection, ninject

使用 Ninject 重写以下示例会是什么样子？

具体来说，您如何将武士绑定到手里剑和剑上？

（来自[https://github.com/ninject/ninject/wiki/Dependency-Injection-By-Hand](https://github.com/ninject/ninject/wiki/Dependency-Injection-By-Hand)）

```
interface IWeapon
{
    void Hit(string target);
}

class Sword : IWeapon
{
    public void Hit(string target) 
    {
        Console.WriteLine("Chopped {0} clean in half", target);
    }
}

class Shuriken : IWeapon
{
    public void Hit(string target)
    {
        Console.WriteLine("Pierced {0}'s armor", target);
    }
}

class Program
{
    public static void Main() 
    {
        var warrior1 = new Samurai(new Shuriken());
        var warrior2 = new Samurai(new Sword());
        warrior1.Attack("the evildoers");
        warrior2.Attack("the evildoers");    
       /* Output...
        * Piereced the evildoers armor.
        * Chopped the evildoers clean in half.
        */
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:21:22.370

`IWeapon`您可以在先解决后简单地重新绑定`Samurai`：

```
StandardKernel kernel = new StandardKernel();

kernel.Bind<IWeapon>().To<Sword>().Named();
Samurai samurai1 = kernel.Get<Samurai>();
samurai1.Attack("enemy");

kernel.Rebind<IWeapon>().To<Shuriken>();
Samurai samurai2 = kernel.Get<Samurai>();
samurai2.Attack("enemy"); 
```

或者，您可以使用命名绑定。首先需要重新定义`Samurai`的构造函数，`Named`在其依赖项中添加一个属性：

```
public Samurai([Named("Melee")]IWeapon weapon)
{
    this.weapon = weapon;
} 
```

然后，您还需要为绑定命名：

```
StandardKernel kernel = new StandardKernel();

kernel.Bind<IWeapon>().To<Sword>().Named("Melee");
kernel.Bind<IWeapon>().To<Shuriken>().Named("Throwable");

Samurai samurai = kernel.Get<Samurai>();
samurai.Attack("enemy"); // will use Sword 
```

确实有很多选择 - 我建议浏览@scottm 提供的链接并将它们全部检查出来。

# android - Android：我怎么知道我的位置是准确的

> ID：11566788
> 
> 赞同：0
> 
> 时间：2012-07-19T18:08:02.570
> 
> 标签：android, location

我喜欢查找当前位置。我也知道如何从`GPS`和查找位置`Network`。`GPS`比 更准确`Network`。但是当`GPS`信号很差时，我喜欢用它`Network`来获得准确的位置。

我的问题是，我如何确定哪一个给了我最准确的位置并且我的位置是准确的？我必须找出正确的位置。

你可能会建议`location.getAccuracy()`。但我不知道它的细节。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:17:04.777

[在这里](http://developer.android.com/reference/android/location/Location.html)寻找定义`getAccuracy`

至于你的问题，请通读这个[文件](http://developer.android.com/guide/topics/location/strategies.html)，它谈到了如何

ACCESS_COARSE_LOCATION = 来自 NETWORK_PROVIDER 的位置更新 ACCESS_FINE_LOCATION = 来自 GPS_PROVIDER 的位置更新

还有更多，请确保向下滚动到“保持当前的最佳估计”

# ios - MkMapView 显示蓝屏

> ID：11566789
> 
> 赞同：1
> 
> 时间：2012-07-19T18:08:11.077
> 
> 标签：ios, mkmapview

我能够成功地向用户显示他们在 MapView 上的当前位置。但是，当我转到另一个视图控制器并返回我的地图视图时，我看到一个蓝屏。为什么？

这是我的代码：

```
- (void)viewWillAppear:(BOOL)animated {

    MyManager * myManager = [MyManager sharedInstance];

    //if coming back from another screen, lets load the coordinates
    if (myManager.centerOfMap) {
        NSLog(@"myManager.centerOfMap has a value:");
        self.centerOfMap = myManager.centerOfMap;
    } 

    CLLocationCoordinate2D zoomLocation;    
    zoomLocation = *(self.centerOfMap);

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);
    MKCoordinateRegion adjustedRegion = [_mapView regionThatFits:viewRegion];                
    [_mapView setRegion:adjustedRegion animated:YES];      
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T20:42:44.790

蓝屏通常表示您指向非洲海岸外的 (0,0)。尝试打印出 centerOfMap 的坐标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:47:56.417

这一点敲响了警钟：

```
CLLocationCoordinate2D zoomLocation;
zoomLocation = *(self.centerOfMap); 
```

这大概对应

```
@property (nonatomic, assign) CLLocationCoordinate2D * centerOfMap; 
```

这意味着它现在很可能指向一个随机的堆栈位，该堆栈已被覆盖。高位字很可能在 0 和 0x4000000 之间（0 和 10 亿 - 大多数整数和内存地址都在这个范围内），这意味着您最终会得到（大约）0 和 2 之间的双精度字。

摆脱`*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:24:56.183

在你回来的时候，是 MKMapView 分配了还是在调试器中显示 nil ？

没有把握？当您回到视图控制器时，在代码中继续设置断点，然后在控制台中键入“ `po _mapView`”。看看结果。

如果它是 nil，你可能必须 Alloc/Init 它。可能发生的情况是 ARC 会自动刷新 MKMapView 以节省内存。

只是一个问题，您是否使用模态方式呈现新的视图控制器`[yourMainViewController presentViewController:newViewController animated:YES]`？

# osx-lion - Apple Script 正在取消删除文件 (Lion)，并且操作系统不断要求输入密码。有没有解决的办法。

> ID：11566790
> 
> 赞同：0
> 
> 时间：2012-07-19T18:08:15.053
> 
> 标签：osx-lion, applescript

所以昨晚在我身上发生了一件有趣的事。我试图从我的 Macbook Pro 上清除文件。

我刚刚购买了一台新的 Macbook Retina，它的硬盘驱动器比我的旧 Macbook Pro 小（我知道要哭一场）。

无论如何，我在 Finder 中找到了一大堆文件，然后我将它们全部选中并按下了旧的删除键。

如果我的 Mac 没有立即开始处理我的文件，那该死的。我没有意识到我看到了我的整个文件网络，包括我的 Dropbox 文件、家庭照片，甚至是我大学时代的一些顽皮照片（不要告诉我的好妻子）。

删除的文件总数超过 4,000 个。我差点儿哭了。

没什么大不了的，我只是去垃圾箱并取消删除，对吗？没有那么快Tonto！

我想将文件移回其原始位置。虽然 Lion 支持此功能，但它一次只允许您恢复一个文件。

有 4,000 多个文件，当我完成时，我的眼球会掉出来。

幸运的是，Apple 有人发明了 Apple Script。

其他人编写了一个脚本，该脚本将一次取消删除一个文件。

我运行脚本上床睡觉，发现它有效！！！！

在 4,000 个文件中，只有 1,700 个留在我的垃圾箱中（呜呼！！！）。

问题是剩余的文件需要我输入密码才能进行恢复。我相信这些文件是在不同的所有者下创建的。

我的问题是我该如何解决这个问题？

有没有办法进入超级骗子用户模式，这样我就不必为要取消删除的每个文件输入密码？

任何帮助是极大的赞赏。

这是苹果脚本：

```
 repeat 4173 times --or as many files you have

          tell application "Finder" to open trash --open the trash folder

          tell application "Finder" to activate

          tell application "System Events"

                    tell process "Finder"

  delay 0.2 -- adjust delay as needed

  key code 125 --move down to get focus on a file

  key down command --hold command key

  delay 0.2 -- adjust delay as needed

  key code 51 --hit delete

  key up command --release command

                    end tell

          end tell

  delay 0.2 -- adjust delay as needed

          tell application "Finder" to close every window --close everything for the next cycle

end repeat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:56:00.577

好吧，你不想回答我的问题！我会自己回答（>：P）。

无论如何，我的问题是由文件权限引起的。有些文件被锁定，我需要输入密码才能取消删除它们。

我能够使用 chmod 命令解决此问题。

干杯！！！！

# extjs - 在 ExtJs 网格中编辑一行

> ID：11566793
> 
> 赞同：0
> 
> 时间：2012-07-19T18:08:42.197
> 
> 标签：extjs

您好，我正在使用 Ext Js 开发一个项目，该项目需要在网格中编辑一行。我正在尝试使用在 Ext 的文档中找到的插件 plugins: [Ext.create ('Ext.grid.plugin.RowEditing')] 但是当我单击该行时，网格上会出现更新和取消选项，但是单元格不可编辑，有人知道发生了什么吗？

带有插件的文档中的示例是这样的：[http ://docs.sencha.com/ext-js/4-0/#!/example/restful/restful.html](http://docs.sencha.com/ext-js/4-0/#!/example/restful/restful.html)

到目前为止我的代码：

```
Ext.define('GridEditavel',{

extend : 'Ext.grid.Panel',
title: 'Grid Editavel',
store: 'GridStore',
dockedItems : [ {
    xtype : 'toolbar',
    items : [ {
        xtype: 'button',
        text : i18n['vds.botao.nova.coluna'],
        icon : Webapp.icon('add1.png'),
        iconAlign : 'top',
        handler : function() {
            var gridView = Ext.ComponentQuery.query("gridpanel")[1];
            Ext.Msg.prompt('Message', 'Enter a column number:', function(
                    btn, text) {
                if (btn == 'ok' && text != null) {
                    var column = Ext.create('Ext.grid.column.Column', {
                        text : text
                    });
                    gridView.headerCt.insert(gridView.columns.length,
                            column);
                    gridView.getView().refresh();
                } else {
                    Ext.Msg.alert('Alert', 'Enter a column number!');
                }
            });
        }
    } ]
} ],
columns: [{
    header : 'Nome',
    dataIndex : 'nome',
    flex : 0.8
}],

plugins : [ Ext.create('Ext.grid.plugin.RowEditing') ]}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:50:02.937

您需要在列中设置编辑器属性。例子：

```
columns:[{
header:'Nome',
dataIndex:'nome',
flex:0.8,
editor:'textfield'
}] 
```

您还可以为编辑器使用配置对象，如下所示：

```
columns:[{
header:'Nome',
dataIndex:'nome',
flex:0.8,
editor:{
  xtype:'combo',
  store:'somestore'
}
}] 
```

# sql - 在 oracle 中使用 getDate() 更新行时出错

> ID：11566799
> 
> 赞同：5
> 
> 时间：2012-07-19T18:09:17.563
> 
> 标签：sql, oracle, datetime, sql-update

我有一个表，其中包含一个名为 STREAM_TIME 的 DATE 类型的列。
我正在尝试将该列的所有行更新为今天的日期。使用的数据库是oracle。

我的查询：

```
update bns_bess_messages SET stream_time=getDate(); 
```

Oracle 返回此错误：

```
SQL Error: ORA-00904: "GETDATE": invalid identifier
00904\. 00000 -  "%s: invalid identifier" 
```

**如何将 STREAM_TIME 更新为今天的日期？**

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T18:13:10.897

您可以通过以下方式进行操作：

```
update bns_bess_messages set stream_time = trunc(sysdate); 
```

或者，如果您想获得确切的时间：

```
update bns_bess_messages set stream_time = sysdate; 
```

要检查您可以使用以下查询：

```
select sysdate from dual; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T18:13:36.187

getDate() 是 sql server 函数的一部分，供 oracle 使用以下之一

利用

```
select current_date
from dual;

update bns_bess_messages SET stream_time=current_date 
```

或者

内置函数 SYSDATE 返回一个包含系统当前日期和时间的 DATE 值。例如，

```
select to_char(sysdate, 'Dy DD-Mon-YYYY HH24:MI:SS') as "Current Time"
from dual;

update bns_bess_messages SET stream_time=sysdate 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T18:13:44.937

Oracle 使用`sysdate`而不是`getDate()`

```
update bns_bess_messages SET stream_time=sysdate; 
```

# php - 将一个数组中的值分配给另一个数组 PHP

> ID：11566803
> 
> 赞同：0
> 
> 时间：2012-07-19T18:09:52.027
> 
> 标签：php, arrays

如何将一个数组中的值分配给 PHP 中的另一个数组？例如，

```
$targetArray = array('a'=>'','b'=>'','c'=>'','d'=>'');  //array with empty value

$sourceArray = array('a'=>'a','c'=>'c','d'=>'d');       //array with value, but maybe not have all the keys of the target array 
```

我想看到的结果如下： $resultArray = array('a'=>'a','b'=>'','c'=>'c','d'=>'d' );

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:12:19.107

我认为您正在寻找的功能是[array_merge](http://php.net/manual/en/function.array-merge.php)。

```
$resultArray = array_merge($targetArray,$sourceArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:12:22.257

使用数组合并：

```
$merged = array_merge($targetArray, $sourceArray);
// will result array('a'=>'a','b'=>'','c'=>'c','d'=>'d'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T18:12:33.783

使用[`array_merge()`](http://php.net/array_merge)：

```
$targetArray = array('a'=>'','b'=>'','c'=>'','d'=>''); 
$sourceArray = array('a'=>'a','c'=>'c','d'=>'d');
$result = array_merge( $targetArray, $sourceArray); 
```

这[输出](http://viper-7.com/iZNq3f)：

```
array(4) {
  ["a"]=>
  string(1) "a"
  ["b"]=>
  string(0) ""
  ["c"]=>
  string(1) "c"
  ["d"]=>
  string(1) "d"
} 
```

# paypal-adaptive-payments - 是否可以更新贝宝的自适应支付灯箱显示选项？

> ID：11566807
> 
> 赞同：0
> 
> 时间：2012-07-19T18:10:14.183
> 
> 标签：paypal-adaptive-payments

我们正在使用贝宝自适应支付嵌入式解决方案，因此我们的买家可以在结账时留在网站上。我们要更改灯箱 CSS。我们该怎么做？查看 PP 自适应支付 API 文档后，我们只能找到 headerImageUrl。我们如何更改标题徽标？可以改变背景吗？

```
<form action="https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay" target="PPDGFrame"> 
<input id="type" type="hidden" name="expType" value="light">  
<input type="hidden" name="business" value="seller_1328179547_biz@complexintegrations.com">
<input type="hidden" name="shipping" value="5.00">
<input type="hidden" name="amount" value="6">
<input type="hidden" name="headerImageUrl" value="https://domainname.com/images/LOGO%20%281%29.png">
<input id="paykey" type="hidden" name="paykey" value="AP-4N0030004W852052F"> 
<input id="GetShippingAddresses" type="hidden" name="GetShippingAddresses" value="1"> 
<input type="image" src="https://www.paypal.com/en_US/i/bnr/bnr_MSPFbanner_ec2_143x32.gif" id="submitBtn" value="Pay with PayPal" style="height:22px;position:relative;top:5px;">   
</form>      
<script type="text/javascript" language="javascript">
var dgFlow = new PAYPAL.apps.DGFlow({ trigger: "submitBtn" }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:11:48.443

您不能在灯箱上执行此操作。

不幸的是，除了改变它的宽度之外，没有办法自定义它（而且你必须为此手动破解 JS。）

# c++ - QGraphicsPixmapItem 不可选择

> ID：11566808
> 
> 赞同：2
> 
> 时间：2012-07-19T18:10:16.550
> 
> 标签：c++, qt, qt4, qgraphicsitem, qgraphicsscene

我希望我的`QGraphicsPixmapItem`成为可选择的（即以更一般的方式可点击），`QGraphicScene`但事实并非如此。我实际上正在修改`Qt`'s [Diagram Scene sample](http://doc.qt.nokia.com/4.7-snapshot/graphicsview-diagramscene.html)，其中`QGraphicsItem`使用了 's 子类并且是可选择的。我感谢您的帮助。

cpp代码（部分）：

```
#include <iostream>
#include <QtGui>    
#include "overlayPixmapItem.h"

OverlayPixmapItem::OverlayPixmapItem(DiagramType diagramType, QMenu *contextMenu,
                                                   QPixmap img, QGraphicsItem *parent,
                                                   QGraphicsScene *scene)
    : QGraphicsPixmapItem(img, parent), QObject()
{
    myDiagramType = diagramType;
    myContextMenu = contextMenu;

    this->setAcceptsHoverEvents(true);
    this->setAcceptHoverEvents(true); //
    this->setAcceptedMouseButtons(Qt::LeftButton);
    this->setAcceptedMouseButtons(Qt::RightButton);
    this->acceptDrops();

    setFlag(QGraphicsItem::ItemIsMovable, true);
    setFlag(QGraphicsItem::ItemIsSelectable, true);
    this->setFlag(QGraphicsItem::ItemSendsGeometryChanges, true);
}
: 
```

标题（部分）：

```
#ifndef OVERLAYPIXMAPITEM_H
#define OVERLAYPIXMAPITEM_H

#include <QGraphicsPixmapItem>
#include <QList>
#include <QObject>

class QPixmap;
class QGraphicsItem;
class QGraphicsScene;
class QTextEdit;
class QGraphicsSceneMouseEvent;
class QMenu;
class QGraphicsSceneContextMenuEvent;
class QPainter;
class QStyleOptionGraphicsItem;
class QWidget;
class QPolygonF;

class OverlayPixmapItem : public QObject, public QGraphicsPixmapItem
{
        Q_OBJECT

    public:
        enum { Type = UserType + 15 };
        enum DiagramType { Crosshair };

        OverlayPixmapItem(DiagramType diagramType, QMenu *contextMenu,
                                 QPixmap img, QGraphicsItem *parent = 0, QGraphicsScene *scene = 0);

        DiagramType diagramType() const { return myDiagramType; }
        QPolygonF polygon() const { return myPolygon; }
        int type() const { return Type;}

    protected:
        void contextMenuEvent(QGraphicsSceneContextMenuEvent *event);
        QVariant itemChange(GraphicsItemChange change, const QVariant &value);
        void hoverEnterEvent ( QGraphicsSceneHoverEvent * event );
        void hoverLeaveEvent ( QGraphicsSceneHoverEvent * event );

    public: signals:
        void mouseHoveredOnElem(OverlayPixmapItem *i);
        void mouseHoveredOutOfElem(OverlayPixmapItem *i);

    private:
        DiagramType myDiagramType;
        QPolygonF myPolygon;
        QMenu *myContextMenu;
};
#endif // OVERLAYPIXMAPITEM_H 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:42:09.387

正如我在第一条评论中指出的那样，您调用`setAcceptedMouseButtons()`了两次方法。虽然第一个呼叫实际上设置了正确的按钮以被接受，但第二个呼叫使此设置丢失。

要接受此项目上的两个按钮，您必须以这种方式组合 Qt MouseButtons 标志：

```
item->setAcceptedMouseButtons(Qt::LeftButton|Qt::RightButton) ; 
```

# android - 在混淆的 apk 中调试混淆的 jar 文件

> ID：11566810
> 
> 赞同：1
> 
> 时间：2012-07-19T18:10:25.370
> 
> 标签：android, debugging, sdk, jar, obfuscation

假设我在单个 jar 文件中创建了一个 sdk，并且我还对其进行了混淆。

开发人员获取 jar 文件并在应用程序中使用它，然后应用程序被混淆。

现在，**问题来了：**如果应用程序因为 sdk 而崩溃，我是否有可能获取应用程序的混淆 apk 并尝试调试它，然后输入我为 sdk 创建的代码？

如果是这样，我该怎么做？另外，是否有混淆此类 sdk 的 jar 文件的最佳做法？

# php - 从本地主机连接到在线 Magento

> ID：11566816
> 
> 赞同：0
> 
> 时间：2012-07-19T18:11:03.043
> 
> 标签：php, magento

除了设置自定义 Magento API 之外，有没有办法从 localhost webapp 连接到在线 Magento 安装？更具体地说，我正在寻找一个允许我编写代码的设置

```
include('app/Mage.php');    // how does this work for online-offline connection??
$products = Mage::getModel('catalog/category')->load($category_id); 
```

在我们办公室的 localhost 上运行的 webapp 中。

如果这不合理，我是否需要直接从我的应用程序连接到 Magento 存储数据库并基本上编写自己的查询？如果是这种情况，我肯定会创建一个对数据库具有只读访问权限的新用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:54:09.323

无需连接到包含将处理它的数据库：

```
require'app/Mage.php';  

if (!Mage::isInstalled()) {
    Mage::log("Application is not installed yet, please complete install wizard first.\n",null,'fiftyone_daemon.log');
    exit;
}
Mage::app('default'); 

$products = Mage::getModel('catalog/category')->load($category_id); 
```

# css - 表单内容宽度问题

> ID：11566817
> 
> 赞同：2
> 
> 时间：2012-07-19T18:11:07.823
> 
> 标签：css

我创建了一个具有重叠虚线的联系表格。我不确定为什么要这样做。我已经设置`#form .row`好了，`100% width`所以我认为这会使其适应，但它不起作用。我该如何解决这个问题并让它适应表单？

[例子](http://webprolearner2346.zxq.net/contact-form2/index.php)

![在此处输入图像描述](../Images/b4da2557f1fb5e7a44294e6cbe94b64f.png)

**CSS**

```
 <style>
    #formWrap {
        width: 600px;
        margin-top:30px;
        margin-left:30px;
        background:#FFF;
        padding: 16px 10px 40px;

    }

    #formWrap #form {
        border-top:1px solid #EEE;
        width:700px;

    }

    #form .row {
        border-bottom:1px dotted #EEE;
        display:block;
        /*line-height:38px;*/
        overflow:auto;
        padding:24px 0px;
        width:100%;

    }

    #form .row .label {
        color: #333333;
        font-weight: bold;
        font-size: 105%;
        font-family: trebuchet, 'trebuchet ms', 'tahoma', sans-serif;
        width:140px;
        text-align:right;
        float:left;
        padding-right:10px;
        margin-right:10px;

    }

    #form .row .input {
        float:left;
        margin-right:10px;
        width:auto;
    }

    .detail {
        width: 260px;   
        font-family: trebuchet, 'trebuchet ms', 'tahoma', sans-serif;
        margin: 0;
        display:block;

    }

    #form .row .context {
        color:#999;
        font-size: 11px;
        font-style: italic;
        line-height:14px;
        font-family: trebuchet, 'trebuchet ms', 'tahoma', sans-serif;
        width:150px;
        float: left;

    }
</style> 
```

**HTML**

```
<html>
 <div class="row"> 
   <div class="label">Contact Name *</div> <!-- end .label -->
    <div class="input">
        <input type="text" id="contact_name" class="detail" name="contact_name" value="" />
                    <span class="error"></span>
    </div><!-- end .input-->
        <div class="context"> e.g. John Smith or Jane Doe</div><!-- end .context -->
  </div><!-- end .ronw -->
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:15:30.800

设置你 `#formWrap #form` 这个：

```
#formWrap #form {
    border-top:1px dotted #F00;
    width:600px;

} 
```

那应该解决它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:16:44.077

你已经明确地将边框设置为比表单宽 100px，这就是原因。

将表单的宽度调整为 formWrap 之一：

```
#formWrap {
    width: 600px;
    margin-top:30px;
    margin-left:30px;
    background:#FFF;
    padding: 16px 10px 40px;
}

#formWrap #form {
    border-top:1px solid #EEE;
    width:600px; // instead of 700
} 
```

工作示例：http: [//jsfiddle.net/dystroy/xWNrd/](http://jsfiddle.net/dystroy/xWNrd/)

# php - 版本升级后教义不起作用

> ID：11566818
> 
> 赞同：0
> 
> 时间：2012-07-19T18:11:08.390
> 
> 标签：php, annotations, doctrine-orm

我确实从数据库生成实体。这是我在更新到新版本的学说和最新版本的学说之前生成的文件：

[http://pastebin.com/g8DsUjmm](http://pastebin.com/g8DsUjmm)

你会看到，它在新注释中添加了一个额外的“ORM”。

我现在在执行说教义代码时遇到问题（异常）：

> GdCities 类不存在且无法加载 /my_path/application/third_party/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php

任何人都有任何想法，为什么会这样。在更新之前，使用旧实体和学说版本，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:02:54.873

我确实通过从所有实体的表和列名中删除“ORM\”部分来解决这个问题。不确定，如果它是一个教义错误，或者我正在以不同的方式做某事。

# cuda - 无符号短的 Cuda 原子操作

> ID：11566819
> 
> 赞同：5
> 
> 时间：2012-07-19T18:11:11.977
> 
> 标签：cuda, gpu, atomic

cuda 中是否有一些内置函数可以对 unsigned short 或 unsigned char 进行原子操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T03:38:47.147

不，没有 CUDA 原子内在函数`unsigned short`和`unsigned char`数据类型，或任何小于 32 位的数据类型。

但是，您可以将两个短字符或四个字符组合在一起，并对它们执行 32 位原子，一次处理多个（假设您的计算允许这样做）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-20T07:57:15.147

快速浏览一下[CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)应该可以回答您的问题（搜索“atomicAdd”）。

# iphone - iPad 模拟器 (5.1) 启动时显示黑屏

> ID：11566821
> 
> 赞同：1
> 
> 时间：2012-07-19T18:11:17.387
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

我目前正在制作一个 iPhone 应用程序。在 iPhone 上一切正常，没有任何错误。但是，当我尝试使用 iPad 模拟器启动它时，它会显示一个黑屏，右上角有 x2/x1。问题是该应用程序因此被Apple拒绝。我有点卡在这里，所以如果有人可以帮助我/指导我正确的方向，我将非常感激！

谢谢。

# php - Facebook API - 发布到用户墙

> ID：11566822
> 
> 赞同：0
> 
> 时间：2012-07-19T18:11:18.153
> 
> 标签：php, javascript, facebook

我正在构建一个使用 Facebook 对用户进行身份验证的小应用程序。用户通过身份验证后，他可以上传图像。上传此图片后，必须经过我们的工作人员的批准。该图像可能会在几天后获得批准。我担心的是访问令牌。一旦图像获得批准，即使是几天后，我也希望能够发布到该用户墙上。我应该考虑哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:22:30.330

Facebook 正在[删除旧的 offline_access](https://developers.facebook.com/roadmap/offline-access-removal/)权限，因此正常的访问令牌只会存在 1 或 2 小时，您将在应用设置的高级选项卡中看到“不推荐使用的 offline_access”迁移（默认启用）（删除将在[2012 年 10 月 3 日](https://developers.facebook.com/roadmap/)进行）。他们引入了一个[新的端点](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)，可以让您延长默认的短期访问令牌的生命周期。如果您想获得更多的未来证明，您可能希望现在迁移到此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:14:09.357

FB 访问令牌的当前有效期为 60 天，如果图像在 60 天后获得批准并且在此期间未授权使用，则您无法发布。

# apache-flex - 在 Flex 应用程序中实现后退

> ID：11566827
> 
> 赞同：0
> 
> 时间：2012-07-19T18:11:47.047
> 
> 标签：apache-flex, flex3

我负责显示卡片/图块的 Flex 应用程序。单击每张卡片会向服务器发送一个请求，然后 Flex 应用程序会根据服务器返回的数据呈现新卡片。现在我需要添加一个后退功能，以便在点击几下卡片后，我将能够返回到之前的请求。据我了解，我只需要保存一些发送到服务器的 URL 堆栈。需要定期后退，因此如果我正在查看卡片 X，然后单击返回，然后单击不同的图块，我可以将卡片 X 从我的数据结构中删除并忘记它。

你会推荐使用什么数据结构？有什么例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:14:55.687

使用[SWFAddress](http://www.asual.com/swfaddress/)并简单地使用浏览器的后退/前进功能。这是一个[视频教程](http://www.leebrimelow.com/?p=911)，可帮助您入门。

# c# - ToolStripMenuItem_Click(object sender, EventArgs e) - 转换回 DataGridView

> ID：11566831
> 
> 赞同：1
> 
> 时间：2012-07-19T18:11:59.197
> 
> 标签：c#, datagridview, casting, contextmenustrip, sender

我有一个带有**DataGridView控件的****WINFORM**应用程序，连接到**ContextMenuStrip**控件中。 ContextMenuStrip触发事件**实质上在****DataGridView**和**剪贴板**之间执行复制/粘贴。

 ******```
private void copyToolStripMenuItem_Click(object sender, EventArgs e)
{
  CopyClipboard();
}

private void CopyClipboard()
{
  DataObject d = myGrid.GetClipboardContent();
  Clipboard.SetDataObject(d);
}

private void pasteCtrlVToolStripMenuItem_Click(object sender, EventArgs e)
{
  PasteClipboard();
} 
```

我在我的应用程序中添加了另一个**DataGridView**并希望在它们之间共享**ContextMenuStrip**，因为根据我上面的代码，它被硬编码到我的网格**myGrid**中。

我相信修改我的代码以从**发送者投射一个新的****DataGridView**控件将是一个简单的练习：

 **```
private void copyToolStripMenuItem_Click(object sender, EventArgs e)
{
  CopyClipboard(sender);
}

private void CopyClipboard(object sender)
{
  var grid = (DataGridView)sender;
  DataObject d = grid.GetClipboardContent();
  Clipboard.SetDataObject(d);
}

private void pasteCtrlVToolStripMenuItem_Click(object sender, EventArgs e)
{
 var grid = (DataGridView)sender;
  PasteClipboard(grid);
} 
```

但当然，我发现**发件人**是**ToolStripMenuItem**。

有没有办法通过**sender**或**EventArgs e引用原始****DataViewGrid**？

 ****并且，感谢您阅读 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:23:44.340

啊，我想我明白了！

```
private void copyToolStripMenuItem_Click(object sender, EventArgs e)
{
  CopyClipboard(sender);
}

private void CopyClipboard(object sender)
{
  var grid = (DataGridView)sender;
  DataObject d = grid.GetClipboardContent();
  Clipboard.SetDataObject(d);
}

private void pasteCtrlVToolStripMenuItem_Click(object sender, EventArgs e)
{
  var item = (ToolStripMenuItem)sender;

  ToolStripMenuItem t = (ToolStripMenuItem)sender;
  ContextMenuStrip s = (ContextMenuStrip)t.Owner;

  var grid = (DataGridView)s.SourceControl;

  // Pulling the backend datatable just to enhance the example.
  // Going Live, the consumer of the "grid" will do the extraction.
  BindingSource bs = (BindingSource)grid.DataSource;
  DataTable dt = (DataTable)bs.DataSource;

  PasteClipboard(grid, dt);
} 
```

我在这里找到了解决方案：http: //discuss.joelonsoftware.com/default.asp? [dotnet.12.474610.5](http://discuss.joelonsoftware.com/default.asp?dotnet.12.474610.5)

最后根据这个线程，我想将**ToolStripMenuItem**添加为线程**标签**，但我没有代表。感谢代表将其添加到**标签**缓存中的人，以便我可以更新此踏板；希望让别人的生活，同样的问题，更容易找到这个线程！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:22:04.717

尝试

```
var grid = CType(sender, DataGridView) 
```

或者

```
var grid = CType(sender.parent, DataGridView) 
```************

# php - 如何在 dql (symfony2) 中使用 sql 数学函数

> ID：11566837
> 
> 赞同：0
> 
> 时间：2012-07-19T18:12:12.633
> 
> 标签：php, symfony, doctrine

我正在使用这个：

```
$query = $em->createQuery('select cp from Temp\TempAppBundle\Entity\ClinicProfile cp INNER JOIN cp.users u left JOIN cp.specializations s where cp.latitude is not null and cp.city = ?1 order by (sqrt(pow((radians(cp.longitude) - radians(?2))*cos(radians(cp.latitude)+radians(?3)), 2) + pow((radians(cp.latitude) - radians(?4)), 2))*6367)'); 
```

但我收到错误

```
[Syntax Error] line 0, col 172: Error: Expected end of string, got 'sqrt' 
```

我如何在 dql 中使用 sql 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:50:44.397

Doctrine dql 确实支持 SQRT 函数，但仅在 SELECT、WHERE 和 HAVING 子句中支持，因此它在出现在 ORDER BY 子句中的查询中不起作用。dql 不明确支持其他功能，POW、RADIANS 和 COS。

有一种将您自己的函数添加到 dql 语言的方法（文档提供了 MySQL FLOOR 函数的示例 - 请参阅[DQL 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/dql-doctrine-query-language.html)的第 13.5.5 节）但是从文档中不清楚这些是否也仅限于 SELECT , WHERE 和 HAVING 子句。

在这种情况下，另一种方法是使用[Doctrine Native SQL](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/native-sql.html)。

# filter - 术语过滤器的弹性搜索连字符问题

> ID：11566838
> 
> 赞同：57
> 
> 时间：2012-07-19T18:12:13.893
> 
> 标签：filter, escaping, elasticsearch, term

我有以下只有术语过滤器的弹性搜索查询。我的查询要复杂得多，但我只是想在这里说明问题。

```
{
    "filter": {
            "term": {
                    "field": "update-time"
                }
        }
} 
```

当我将连字符值传递给过滤器时，我得到零结果。但是，如果我尝试不使用未连字符的值，我会得到结果。我不确定连字符在这里是否是一个问题，但我的情况让我相信。

有没有办法逃避连字符，以便过滤器返回结果？我尝试使用从 Lucene 论坛中读到的反斜杠来转义连字符，但这并没有帮助。

此外，如果我将 GUID 值传递到这个用大括号括起来并用大括号括起来的字段中，例如 - {ASD23-34SD-DFE1-42FWW}，我是否需要将字母字符小写，是否需要转义花括号也可以吗？

谢谢

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-19T18:38:25.050

我猜您的字段已被分析，这是 elasticsearch 中字符串字段的默认设置。结果，当它被索引时，它不是作为一个术语“更新时间”索引，而是作为两个术语：“更新”和“时间”。这就是您的术语搜索找不到该术语的原因。如果您的字段将始终包含必须按原样完全匹配的值，则最好将映射中的此类字段定义为未分析。您可以通过使用新映射重新创建索引来做到这一点：

```
curl -XPUT http://localhost:9200/your-index -d '{
    "mappings" : {
        "your-type" : {
            "properties" : {
                "field" : { "type": "string", "index" : "not_analyzed" }
            }
        }
    }
}'

curl -XPUT  http://localhost:9200/your-index/your-type/1 -d '{
    "field" : "update-time"
}'

curl -XPOST http://localhost:9200/your-index/your-type/_search -d'{
    "filter": {
        "term": {
                "field": "update-time"
        }
    }
}' 
```

或者，如果您希望在基于此字段查找记录时具有一定的灵活性，您可以分析此字段并改用文本查询：

```
curl -XPOST http://localhost:9200/your-index/your-type/_search -d'{
    "query": {
        "text": {
                "field": "update-time"
        }
    }
}' 
```

请记住，如果您的字段被分析，那么该记录也将通过搜索单词“update”或单词“time”来找到。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-01-29T14:09:03.003

接受的答案不适用于弹性 6.1。我使用弹性默认在字符串字段上提供的“关键字”字段解决了它。

```
{
    "filter": {
            "term": {
                    "field.keyword": "update-time"
                }
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-14T11:13:37.553

根据[@imotov](https://stackoverflow.com/a/11567232/2306595)的回答如果您使用的是[spring-data-](https://github.com/spring-projects/spring-data-elasticsearch) elasticsearch那么您需要做的就是将您的字段标记为：

```
@Field(type = FieldType.String, index = FieldIndex.not_analyzed) 
```

代替

```
@Field(type = FieldType.String) 
```

问题是您需要删除索引并使用新映射重新实例化它。

# python - 如何做 sftp python 3？

> ID：11566843
> 
> 赞同：3
> 
> 时间：2012-07-19T18:12:27.313
> 
> 标签：python, python-3.x, sftp

我正在使用以下代码执行 sftp：#!/opt/python3/bin/python3

```
import paramiko
import sys
host = '192.168.1.2'
port = 22622
transport = paramiko.Transport((host, port))
password = "p@ssw0rd"
username = "web"
transport.connect(username = username, password = password)
sftp = paramiko.SFTPClient.from_transport(transport)
path = '/log/ERROR.LOG'
localpath = '/home/web/ERROR.LOG'
sftp.get(path, localpath)
sftp.close()
transport.close()
print ("Download done.") 
```

但输出是：

```
Traceback (most recent call last):
File "c.py", line 2, in <module>
import paramiko
ImportError: No module named paramiko 
```

Python3 没有 Paramiko 模块吗？

我必须使用什么来执行 sftp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:07:52.420

Paramiko 还没有正式支持 Python 3。我发现一个 bug 讨论它，SFTP 是问题点之一：

[https://github.com/paramiko/paramiko/issues/16](https://github.com/paramiko/paramiko/issues/16)

我推荐使用`subprocess`来运行`sftp`命令行工具。

# joomla - 为 joomla 设置 Falang 默认语言

> ID：11566851
> 
> 赞同：1
> 
> 时间：2012-07-19T18:12:59.730
> 
> 标签：joomla, joomla-extensions, joomla2.5

我有英文和西班牙文的网站。我在 Joomla 中使用 Falang 扩展，需要将西班牙语设为默认。这样当用户访问该站点时，他/她将看到西班牙语。

我能做些什么来使这成为可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-26T23:10:01.647

问题可能是由于**语言过滤器插件**配置造成的。

您必须打开：

```
Extensions -> Plugin Manager -> System - Language Filter 
```

并设置：

```
Language Selection for new Visitors: Site Language 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:37:44.647

您可以安装其他语言并从 Joomla 管理员语言管理器中选择您的默认语言。[扩展帮助](http://help.joomla.org/proxy/index.php?option=com_help&view=help&keyref=Help16%3aExtensions_Extension_Manager_Install)中的详细信息。如果您的语言无法直接从 joomla.org 获得，或者您需要额外的语言支持，请查看[JED 语言支持](http://extensions.joomla.org/extensions/languages/translations-for-joomla)。

# c# - 抓取列表的一部分 按开始和结束索引

> ID：11566857
> 
> 赞同：15
> 
> 时间：2012-07-19T18:13:15.503
> 
> 标签：c#, list

这可能吗？

例如，如果我有

```
List<Item> myList = new List<Item>;

//added 100 of Items to myList

//then I want to grab items at indices 50 - 60

List<Item> myNewList = myList.? 
```

如果不循环通过 myList，我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-19T18:15:39.380

有一个方法可以检索这些项目，List.GetRange。 [http://msdn.microsoft.com/en-us/library/21k0e39c.aspx](http://msdn.microsoft.com/en-us/library/21k0e39c.aspx)

```
List<Item> myList = new List<Item>;
myList.GetRange(50, 10); // Retrieves 10 items starting with index #50 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T18:15:29.883

```
var myNewList  = myList.Skip(50).Take(10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T18:16:26.470

[http://msdn.microsoft.com/en-us/library/bb503062.aspx](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

[http://msdn.microsoft.com/en-us/library/bb357513.aspx](http://msdn.microsoft.com/en-us/library/bb357513.aspx)

```
myList.Skip(50).Take(10) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T18:17:06.330

关于什么：

```
 List<string> myList = new List<string>();

        //added 100 of Items to myList
        for (int i=0; i<100; ++i)
        {
            myList.Add("blablabla");
        }

        //then I want to grab items at indices 50 - 60
        // Note: 50 - 60 inclusivly are actually 11 items
        List<string> myNewList = myList.GetRange(50, 11); 
```

# jquery - Infinite Scroll 完成后移除分页器

> ID：11566862
> 
> 赞同：1
> 
> 时间：2012-07-19T18:13:30.410
> 
> 标签：jquery, infinite-scroll

当我们完成演示时，我需要删除分页器[http://www.infinite-scroll.com/trigger.html](http://www.infinite-scroll.com/trigger.html)

```
 // remove the paginator when we're done.
    $(document).ajaxError(function(e,xhr,opt){
      if (xhr.status == 404) $('a#next').remove();
    }); 
```

但是这段代码不起作用。我在演示中提到过无限滚动的版本是 1.5.100504 但我在这里下载的最新版本是 2.0b2.110713 那么，有什么帮助吗？

也许这可以帮助我：

```
状态： {
    isDuringAjax：假，
    isInvalidPage：假，
    isDestroyed：假，
    isDone: false, // 当它一直通过档案时。
    暂停：假，
    当前页面：1
  },

```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:31:50.573

您的网站永远不会发回 404 http 状态代码，因此此行将永远无法工作：

```
if (xhr.status == 404) jQuery('#load-more').find('.text').html('No more posts to load.').end().delay(2000).fadeOut(); 
```

“没有更多要加载的帖子”消息来自无限滚动初始化的“finishedMsg”属性。

如果你要添加

```
finished: function() {
    if (this.options.state.isDone) {
        $('#load-more').remove();
    }
}, 
```

到配置的加载属性：

```
$container.infinitescroll({
            navSelector: '#nav-pagination-load-more',
            nextSelector: '#nav-pagination-load-more .next',
            itemSelector: '.hentry',
            loading: {
                selector: '#load-more',
                finishedMsg: 'No more posts to load.',
                img: 'http://cdn.moozpaper.com/lucidpress/wp-content/themes/lucidpress/images/loading_small.gif',
                // like so: ==============================
                finished: function() {
                    if (this.options.state.isDone) {
                        $('#load-more').remove();
                    }
                }, 
                msgText: ''
            },
            behavior: 'local'
        }, 
```

它可能应该做你需要的。很难说，因为这个版本的插件没有很好地记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:07:28.293

您也许可以在启动代码中插入它，但我只是直接编辑它。

您在哪里看到以下内容：

```
opts.loading.start = opts.loading.start || function() { 
```

添加这个 opts.loading.msg = $('');

使

```
opts.loading.start = opts.loading.start || function() {
$(opts.navSelector).hide();
opts.loading.msg = $('<div id="">'); 
```

在开发版本上它在第 155 行左右。这基本上会缩短加载框而不会破坏回调等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T11:17:38.133

您可以在finishedMsg选项中添加要执行的脚本以进行加载：

```
$container.infinitescroll({
  ...
  loading: {
    finishedMsg: "<div class='infinite-scroll-finished'>No more articles to load!</div>
                  <script type='text/javascript'> $('#infinity-start').hide(); </script>"
  ...
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-09T09:21:22.040

您可以使用`errorCallback`选项：-

```
$container.infinitescroll({
    errorCallback: function(){ 
        $('#load-more').remove()
    }
}); 
```

# javascript - 使用jQuery从隐藏字段中的字符串中删除一个值

> ID：11566865
> 
> 赞同：0
> 
> 时间：2012-07-19T18:13:41.527
> 
> 标签：javascript, jquery

我有一个隐藏字段，用于存储已为特定帖子上传的所有图像 ID。

隐藏字段 HTML 如下所示：

```
<input type="hidden" id="post_images" name="post_images" value="1,2,3,4,5" /> 
```

从帖子中删除图像时，我需要从该隐藏字段中删除它的 image_id 。因此，如果我从帖子中删除 image_id 4，则隐藏字段需要更新为`value="1,2,3,5"`

如果有更好的方法，我愿意将帖子的 image_id 存储方式更改为不同的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:20:17.120

虽然你*可以*使用这个肮脏的正则表达式：

```
$("#post_images").val(function(i, v) {
    return v.replace( new RegExp('(?=(?:^|,))(,?)' + id + '(?=(?:,|$)),?'), '$1' );
}); 
```

这是小提琴：http: [//jsfiddle.net/43hhs/](http://jsfiddle.net/43hhs/)

* * *

一种更理智的方法是使用数组拼接：

```
$("#post_images").val(function(i, v) {
    var values = v.split(','),
        i = $.inArray(id.toString(), values);

    if ( i != -1 ) {
        values.splice(i, 1);
        return values.join(',');
    }
    else {
        return v;
    }
}); 
```

这是小提琴：http: [//jsfiddle.net/khHPq/](http://jsfiddle.net/khHPq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:23:27.410

jsFiddle：http: [//jsfiddle.net/4Mwsu/15/](http://jsfiddle.net/4Mwsu/15/)

```
$(".imageRemove").click( function()
{
    $(this).hide();

    var values = $("#post_images").val().split(",");
    var newValue = "";

    for ( var i = 0 ; i < values.length ; i++ )
    {
        if ( $(this).attr("id") != values[i] )
        {
            newValue = newValue + values[i] + ",";
        }
    }

    $("#post_images").val( newValue );
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T19:03:51.773

您可以考虑改用 jQuery 的`data`方法，它可以让您存储真正的数组。如果您需要`value`在元素中传递数据，您可以在方便时来回转换，例如在`.on('submit', ...)`处理程序中。

下面的代码有点麻烦，但我认为它传达了这个想法。

```
$pi = $('#post_images');

$pi.data('values', $pi.val().split(',') );
// now .data('values') is a true JS array
console.log($pi.data('values').indexOf("3")); // 2

$pi.data('values').splice(2,1); // removes the third element
console.log($pi.data('values')); // ["1","2","4","5"]

$pi.val( $pi.data('values').join(',') );
console.log($pi.val()); // "1,2,4,5"​​​​​​​​ 
```

[http://jsfiddle.net/mblase75/vx3XL/2/](http://jsfiddle.net/mblase75/vx3XL/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T18:17:30.553

使用它，对我来说最简单的方法是将值以'，'开始和结束，然后你可以做一个

```
$("#post_images").val($("#post_images").val().replace("," + idtoremove + ",", ",") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T18:26:32.940

```
var theVals = $(':input').val().split(','); //split the values into an array
var myVal = '4'; //this should be the ID of the element you want to remove
if($.inArray(myVal, theVals)){ //is the item in the array
  index = theVals.indexOf(myVal); //if it is, then get the index position
  theVals.splice(index, 1); //starting at the index of the element in the array, remove 1 element
  $(':input').val(theVals); //update the input with the new array of IDs
}
console.log($(':input').val()); //general purpose to visualize this output 
```

[一个工作的 jsFiddle](http://jsfiddle.net/Ohgodwhy/84cGz/)

# cluster-analysis - 多层次层次聚类选择

> ID：11566867
> 
> 赞同：0
> 
> 时间：2012-07-19T18:13:48.760
> 
> 标签：cluster-analysis, mathematical-optimization, bin-packing, hierarchical-clustering

我有层次聚类树（使用链接）。每个集群在树状图中都有自己的级别，对应于该集群的成本。我有成本为 c1 的 n1 集群、成本为 c2 的 n2 集群和成本为 c3 的 n3 集群的预算。问题是使用预算选择哪个集群来覆盖所有原始项目。和 c1>c2>c3。成本为 c1 的集群显然可以用于 c2 或 c3 集群。

对于只有一个预算类别，解决方案很简单：只需从根开始，然后在每个子树中，当我们低于 c1 时添加它。如果 n1 个类别在子树之前完成，则没有解决方案。

对于两个类别，它也很简单。查找 c1 成本的所有候选者。用 c2 子集群的数量标记它们，并按降序对它们进行排序。选择具有最大标签的 c1 类别。然后选择 c2 集群。

但是对于超过 2 个类别的问题很复杂，因为对 c2 类别的排序不一定会跟踪 c3 预算。

# javascript - jQuery Banner Rotator 插件中的延迟设置不起作用

> ID：11566868
> 
> 赞同：0
> 
> 时间：2012-07-19T18:13:49.427
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用一个很棒且灵活的 jQuery 横幅旋转器，但我需要对其进行修改以从外部源加载幻灯片。我的外部源运行良好，幻灯片加载，但我似乎无法让它识别延迟设置。

基本上我修改了插件的启动方式，以便它加载我的外部内容，然后在幻灯片功能之前对其进行格式化。

```
// Grabs data from Sphere Photo Gallery and formats the HTML for jQuery Banner Rotator plugin
function sphereSlider(options) {
    $.get("PhotoGallery.aspx.htm",function(data){
        var html = '';
        $(data).find('#pg_summary img').each(function(i){
            var imgsrc = $(this).attr("src");
            html += "<li>";
            html += "<a href='"+imgsrc+"'><img src='"+imgsrc+"' border=0/></a>";
            html += "<div class='imgCaption'>";
            html += "<h1>"+$(data).find('#pg_summary .pg_title:eq('+i+')').html().replace("&nbsp;","")+"</h1>";
            html += "<a href='"+$(data).find('#pg_summary .pg_title:eq('+i+')').html().replace("&nbsp;","")+"'></a>";
            html += "<div class='slideDesc'>"+$(data).find('#pg_summary .pg_longdescriptor:eq('+i+')').html()+"</div>";
            html += "</div>";
            html += "</li>";
        });
        $('.thumbnails ul').html(html);
        $(".container").wtRotator(options);
    });
} 
```

然后在 html 中我这样调用我的函数：

```
<script type="text/javascript">
  $(document).ready(function() {
      sphereSlider({
      width:900,
      height:254,
      thumb_width:24,
        thumb_height:24,
      button_width:24,
      button_height:24,
      button_margin:5,
      auto_start:true,
      delay:5000,
      play_once:false,
      transition:"block.fade",
      transition_speed:800,
      auto_center:true,
      easing:"",
      cpanel_position:"inside",
      cpanel_align:"BR",
      timer_align:"top",
      display_thumbs:false,
      display_dbuttons:false,
      display_playbutton:false,
      display_thumbimg:false,
        display_side_buttons:true,
      display_numbers:false,
      display_timer:true,
      mouseover_select:false,
      mouseover_pause:true,
      cpanel_mouseover:false,
      text_mouseover:false,
      text_effect:"fade",
      text_sync:true,
      tooltip_type:"text",
      shuffle:false,
      block_size:75,
      vert_size:55,
      horz_size:50,
      block_delay:25,
      vstripe_delay:75,
      hstripe_delay:180     
    });
    }
  );
</script> 
```

它应该可以工作，因为所有其他设置都在工作。只是没有正确设置延迟时间。任何帮助，将不胜感激。我已将完整源代码上传到[http://www.truimage.biz/cc/rotator.zip](http://www.truimage.biz/cc/rotator.zip)以进行故障排除。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:15:17.753

您可以通过删除几个文本轻松解决此问题。

因为“js/jquery.wt-rotator.js”中有错误的注解。

从 ：

```
//Line: 1842
//set delay
//this._delay = this._$items[i].data("delay"); 
```

到 ：

```
//set delay
this._delay = this._$items[i].data("delay"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:19:45.610

我认为 $.each 函数是异步工作的，因此 Slider 是在所有图像输出到 HTML 之前创建的。

尝试使用 for insted 每个：

```
$.get("PhotoGallery.aspx.htm",function(data){
    var lbls=$(data).find('#pg_summary img');
    var html = '';
    for (var i=0; i< lbls.length; i++ ){
        var imgsrc = $(lbls[i]).attr("src");
        html += "<li>";
        html += "<a href='"+imgsrc+"'><img src='"+imgsrc+"' border=0/></a>";
        html += "<div class='imgCaption'>";
        html += "<h1>"+$(data).find('#pg_summary .pg_title:eq('+i+')').html().replace("&nbsp;","")+"</h1>";
        html += "<a href='"+$(data).find('#pg_summary .pg_title:eq('+i+')').html().replace("&nbsp;","")+"'></a>";
        html += "<div class='slideDesc'>"+$(data).find('#pg_summary .pg_longdescriptor:eq('+i+')').html()+"</div>";
        html += "</div>";
        html += "</li>";
    }
    $('.thumbnails ul').html(html);
    $(".container").wtRotator(options);
}); 
```

# eclipse - maven，eclipse和过滤器

> ID：11566869
> 
> 赞同：0
> 
> 时间：2012-07-19T18:14:01.110
> 
> 标签：eclipse, maven

我使用 Maven 来管理我的项目。

我发现**`<properties>`**标签非常有用，但这有一个问题。

当我将源代码部署到 Tomcat 时，我应该将**`/target/classes`**其放入 Deployment Assembly 以获取转换后的资源。

示例） ![在此处输入图像描述](../Images/f695726e31b8c4c6b55b68c7b7380e5a.png) 我认为以上是正确的。

* * *

![在此处输入图像描述](../Images/148dac523f12a7f7942d4aa73ee17812.png) 但我必须投入**`/target/classes/`**以获得转换后的属性。

**Spring bean 示例）**

```
<!-- Database -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.classname}" />
        <property name="defaultAutoCommit" value="${database.defaultAutoCommit}" />
        <property name="testWhileIdle" value="${database.testWhileIdle}" />
        <property name="timeBetweenEvictionRunsMillis" value="${database.timeBetweenEvictionRunsMillis}" />
        <property name="url" value="${database1.url}" />
        <property name="username" value="${database1.username}" />
        <property name="password" value="${database1.password}" />
    </bean> 
```

如果我不放，这个纯变量只是复制到 Tomcat 的 webapp 中**`/target/classes/`**

即使它有效，这也让我发疯，因为 Eclipse 有时会说**`"sources are not sychronized!"`**

* * *

**pom.xml**

```
...
    <build>
        <sourceDirectory>${basedir}/src/main/java</sourceDirectory>
        <outputDirectory>${basedir}/target/webapp/WEB-INF/classes</outputDirectory>

        <resources>
            <resource>
                <directory>${basedir}/src/main/webapp</directory>
                <targetPath>${basedir}/target/webapp</targetPath>
            </resource>
            <resource>
                <directory>${basedir}/src/main/resources</directory>
                <targetPath>${basedir}/target/webapp/WEB-INF/classes</targetPath>
                <filtering>true</filtering>
            </resource>
        </resources>

        <filters>
            <filter>${basedir}/src/main/resources/spring-common-bean-context.xml</filter>
            <filter>${basedir}/src/main/resources/byto.cyoz.properties</filter>
        </filters>
... 
```

# xcode - 横向切换为纵向

> ID：11566874
> 
> 赞同：0
> 
> 时间：2012-07-19T18:14:09.670
> 
> 标签：xcode, interface, orientation, landscape, autorotate

我是新来的，我有一个问题。我在网上搜索并找到了似乎对其他人有用的问题的答案。但不适合我。

我正在横向视图（右）中构建一个 iPad 应用程序（使用故事板的 Xcode 4.3.3）它在横向视图中启动，但是当我单击一个按钮（segue - 模态 - 默认）跳转到我的下一个视图时，应用程序跳转到纵向视图。

我已经添加了这段代码并尝试了很多品种（在这个网站上给出）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight); } 
```

- 将我的视图控制器设置为横向模式而不是推断。

- 将初始界面方向添加到我的 plist 文件中。

但无论我做什么，似乎都没有正常工作。我究竟做错了什么？

我已将我的 Xcode 文件上传到我的服务器，因此您可以自己检查我的代码。 [下载压缩包。](http://bit.ly/OviqmC)

希望大家能帮帮我，万分感谢！

市场

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:31:34.673

创建另一个类，`ViewControllerPushed`实现以下方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight); } 
```

然后将其设置为您`ViewController`在**storyboard**中推送的类。

# java - 无法使用注释更改 Hibernate 3.6.10 上的序列名称 (Oracle 10g)

> ID：11566877
> 
> 赞同：2
> 
> 时间：2012-07-19T18:14:21.973
> 
> 标签：java, spring, hibernate, oracle10g, jpa-2.0

我有一个这样注释的类：

```
@Entity
@Table(name="MYENTITY")
@SequenceGenerator(name="CODE_GEN", sequenceName="SEQ_NAME")
public class MyEntity {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO, generator="CODE_GEN")    
    @Column(name="CODE", nullable=false)
    private int code; 
```

我正在使用休眠 3.6.10 和 Oracle10gDialect。数据库是Oracle 10g。创建了一个序列：

```
CREATE SEQUENCE SCHEMA_NAME.SEQ_NAME
  START WITH 0
  MAXVALUE 999999999999999999999999999
  MINVALUE 0
  NOCYCLE
  NOCACHE
  NOORDER;
COMMIT; 
```

当我尝试持久化 MyEntity 类时，我得到：

```
Hibernate: select hibernate_sequence.nextval from dual
19-jul-2012 13:31:24 org.hibernate.util.JDBCExceptionReporter logExceptions
WARNING: SQL Error: 2289, SQLState: 42000
19-jul-2012 13:31:24 org.hibernate.util.JDBCExceptionReporter logExceptions
GRAVE: ORA-02289: sequence not exist 
```

如果我用@SequenceGenerator (sequenceName="SEQ_NAME") 声明序列名称，为什么休眠总是试图访问 hibernate_sequence？我的注释有问题吗？

我尝试了很多组合，Hibernate 总是忽略序列名称并寻找“hibernate_sequence”。顺便说一句，我使用的是 GenerationType.AUTO，因为此应用程序还必须与 SQLServer 运行。

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:26:58.517

我终于能够使用hibernate自己的注解来使用我自己的序列，因为这个版本似乎并不完全支持注解@SequenceGenerator。所以代码最终是这样的：

```
@Entity
@Table(name="MYENTITY")
@GenericGenerator(name="CODE_GEN", strategy = "native", parameters = 
                  { @Parameter(name="sequence", value="SEQ_NAME")})
public class MyEntity {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO, generator="CODE_GEN")    
    @Column(name="CODE", nullable=false)
    private int code; 
```

用@GenericGenerator 替换@SequenceGenerator 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:29:17.423

根据 JPA 规范，@SequenceGenerator 可以注释类或主键字段。我认为值得尝试将其移至现场，看看是否可行。

# sql-server-2008 - 删除多行触发器

> ID：11566879
> 
> 赞同：4
> 
> 时间：2012-07-19T18:14:28.490
> 
> 标签：sql-server-2008, tsql

下面是我的触发器：

```
ALTER TRIGGER [dbo].[trgPaxeDeleted]
   ON  [dbo].[paxe] 
   AFTER DELETE
AS 
declare
@HFflightID int,
@RFflightID int

BEGIN
        Select @HFflightID = hfFlightID, @RFflightID = rfFlightID from deleted

        -- Hinflug: flugKontingent hochsetzen --   
        UPDATE    flightdata
        SET       flightQuota = flightQuota + 1
        WHERE     (flightID = @HFflightID)

        -- Rückflug: flugKontingent hochsetzen --
        UPDATE    flightdata
        SET       flightQuota = flightQuota + 1
        WHERE     (flightID = @RFflightID)

END 
```

这适用于删除单行。但是当删除多行时，只完成一个触发操作。

我该如何改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T18:17:56.150

SQL Server 触发器为所有行触发一个触发器实例；该`deleted`表将包含所有正在更新的行，因此您不能将单个实例存储在变量中。

摆脱以下代码行：

```
Select @HFflightID = hfFlightID, @RFflightID = rfFlightID from deleted 
```

您的更新声明应如下所示：

```
UPDATE    flightdata         
SET       flightQuota = flightQuota + 1         
WHERE     flightID IN (SELECT hfFlightID FROM deleted)

UPDATE    flightdata         
SET       flightQuota = flightQuota + 1         
WHERE     flightID IN (SELECT rfFlightID FROM deleted) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:25:55.183

您可以删除多行。但是你必须放多个id。例如：

```
DELETE FROM  VisitorMaster WHERE Id=85 or Id=86 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-23T16:35:17.950

我以此示例为基础并使用主键进行删除

```
CREATE TRIGGER On_Delete 
 ON tblActivityArchive AFTER DELETE 
 AS   BEGIN 
     DELETE dbo.tblJobLinesArchive 
       FROM dbo.tblJobLinesArchive a
      INNER JOIN Deleted d ON a.ActivityRef = d.ActivityRef
END 
```

[http://www.sqlservercentral.com/Forums/Topic484314-338-1.aspx](http://www.sqlservercentral.com/Forums/Topic484314-338-1.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T19:02:25.160

删除触发器更改为

```
ALTER TRIGGER [dbo].[trgPaxeDeleted]
   ON  [dbo].[paxe] 
   AFTER DELETE
AS 
declare
@HFflightID int,
@RFflightID int

BEGIN

    SET NOCOUNT ON;     

    UPDATE    flightdata         
    SET       flightQuota = flightQuota + 1         
    WHERE     flightID IN (SELECT hfFlightID FROM deleted)

        UPDATE    flightdata         
    SET       flightQuota = flightQuota + 1         
    WHERE     flightID IN (SELECT rfFlightID FROM deleted)

END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-22T17:42:51.473

我面临同样的问题，我找到了一个简单的解决方案。

**首先，我创建了触发器表来存储已删除的列**

```
CREATE TABLE dbo.XLogs (
  Field1 varchar(30),
  Field2 varchar(30),
  Field3 varchar(30),
  Field4 varchar(30),
  Field5 varchar(2)
); 
```

**然后我创建了触发器**

```
CREATE TRIGGER dbo.TXLogs ON dbo.Table
AFTER DELETE
AS
BEGIN
   DECLARE @Id varchar(30)
   DECLARE @Field1 varchar(30)
   DECLARE @Field2 varchar(30)
   DECLARE @Field4 varchar(30)

   SELECT Id,Field1,Field2 INTO #DeletedTempTable FROM deleted

   WHILE(EXISTS(SELECT Id,Field1,Field2 FROM #DeletedTempTable))
   BEGIN
      SET @Field4 = 'Delete Row'
      SELECT TOP 1 @Id =Id , @Field1 = Field1, @Field2 = Field2 FROM #DeletedTempTable

      INSERT INTO dbo.XLogs VALUES (@Id,@Field1,@Field2,@Field4,'0')

      DELETE FROM #DeletedTempTable WHERE Id = @Id
   END
END 
```

我创建了临时表来存储我的初始结果，然后使用 while 循环遍历它们。

我选择 TOP 1 仅列出一行，读取数据并将其存储在我的日志表中，然后删除循环行，然后再次循环以获取下一行。相同的逻辑可用于更新的行，只需将 FROM 删除更改​​为 FROM 插入和其他行等

# javascript - 从 JavaScript 访问 SVG 中的 Inkscape 项目

> ID：11566882
> 
> 赞同：0
> 
> 时间：2012-07-19T18:14:37.230
> 
> 标签：javascript, svg, inkscape

我正在使用 SVG 格式的美国县地图。我没有生成这张地图。它具有 PATH 元素，例如：

```
 <path
     style="font-size:12px;fill:#d0d0d0;fill-rule:nonzero;stroke:#000000;stroke-opacity:1;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;marker-start:none;stroke-linejoin:bevel"
     d="M 445.51998,291.515 L 451.69098,290.644 L 452.25298,290.563 L 452.85298,294.444 L 453.25798,297.212 L 447.56998,298.055 L 448.71498,296.347 L 448.73698,296.297 L 448.98998,295.683 L 449.04798,295.354 L 448.86298,294.795 L 448.70098,294.58 L 446.99298,293.975 L 446.58298,293.98 L 446.24498,294.044 L 445.92498,294.134 L 445.51998,291.515"
     id="12057"
     inkscape:label="Hillsborough, FL" /> 
```

我想要做的是鼠标悬停以显示带有县名的弹出文本。在此示例中，我们看到名称保存在`inkscape:label="Hillsborough, FL"`. 我在获取此值时遇到问题。我尝试了各种版本：

```
this.label
this.inkscape.labe
... 
```

这些中的每一个都因未定义或空错误而失败。如何在 javascript 中阅读此内容？当前的系统规范是在 ASP.NET 站点上运行的 jQuery 1.7.2 和 d3js v2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:37:07.857

像这样的东西应该可以读取属性值（使用示例中元素的 ID）：

```
var myLabel = $('#12057').attr('inkscape:label'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-22T15:11:59.563

这对我有用。inkscape 属性存储为 NamedNodeMap：

```
itemClick = function( evt ) {
        var obj = evt.target;
        var label = obj.attributes['inkscape:label'].nodeValue;
        window.alert('Object: ' + obj.id + ' Clicked, Label: ' + label);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:25:55.253

您可以使用 jQuery 选择此元素，但无法操作它，这不是 jQuery 的用途，但您可以使用[Raphael.js](http://raphaeljs.com/)选择和操作该路径。
实际上我认为在 Raphael Demos Page 中有一个类似的例子。

# javascript - 如何通过 get 加载 JSON 到 CasperJS 脚本中的变量

> ID：11566884
> 
> 赞同：6
> 
> 时间：2012-07-19T18:14:43.333
> 
> 标签：javascript, testing, phantomjs, casperjs

我正在使用以下代码将一些 JSON 数据加载到我的 casperJS 脚本中的变量中：

```
var casper = require("casper").create({
    verbose: true,
    logLevel: 'debug',
    pageSettings: {
        userName: 'dev',
        password: 'devpass',
    } 
});
var baseUrl = 'http://mysite.com/';

casper.start().then(function() {
    this.open(baseUrl + 'JSON-stuff', {
        method: 'get',
        headers: {
            'Accept': 'application/json'
        }
    });
});

casper.run(function() {
    var journalJson = JSON.parse(this.getPageContent());
    require('utils').dump(journalJson);  //this returns my json stuff as expected
    this.exit();
}); 
```

这就像我想要的那样工作 - 我有我需要进行处理的 journalJson 对象。但是，我不确定如何继续我的测试。添加到 casper.run() 的其他函数不会按预期执行......例如，如果我将 casper run 函数更改为：

```
casper.run(function() {
    var journalJson = JSON.parse(this.getPageContent());
    require('utils').dump(journalJson);
    this.open(baseUrl).then(function () {
        this.assertExists('#header');
    });
    this.exit();
}); 
```

然后 phantomjs 记录请求 url，但测试从未运行。

我的问题：如何通过 get 访问 JSON，然后使用它来执行测试？我想我在这里遗漏了一些东西......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T06:18:45.990

您在可能执行回调`casper.exit()`之前调用。`then`

尝试这样的事情：

```
casper.then(function() { // <-- no more run() but then()
    var journalJson = JSON.parse(this.getPageContent());
    require('utils').dump(journalJson);
});

casper.thenOpen(baseUrl, function() {
    this.test.assertExists('#header'); // notice: this.test.assertExists, not this.assertExists
});

casper.run(function() {
    this.test.done();
}); 
```

# dynamic - 如何在 Scheme 中获取值的类型？

> ID：11566886
> 
> 赞同：22
> 
> 时间：2012-07-19T18:14:48.323
> 
> 标签：dynamic, types, scheme

我想要一个在运行时获取值类型的函数。示例使用：

```
(get-type a) 
```

其中d`a`是`define`任意的 Scheme 值。

我该怎么做呢？还是我必须自己实现这个，使用条件堆栈`boolean?`等`number?`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T18:23:36.093

在具有类似 Tiny-CLOS 的对象系统的 Scheme 实现中，您可以只使用`class-of`. 这是使用 Swindle 的 Racket 中的示例会话：

```
$ racket -I swindle
Welcome to Racket v5.2.1.
-> (class-of 42)
#<primitive-class:exact-integer>
-> (class-of #t)
#<primitive-class:boolean>
-> (class-of 'foo)
#<primitive-class:symbol>
-> (class-of "bar")
#<primitive-class:immutable-string> 
```

与使用 GOOPS 的 Guile 类似：

```
scheme@(guile-user)> ,use (oop goops)
scheme@(guile-user)> (class-of 42)
$1 = #<<class> <integer> 14d6a50>
scheme@(guile-user)> (class-of #t)
$2 = #<<class> <boolean> 14c0000>
scheme@(guile-user)> (class-of 'foo)
$3 = #<<class> <symbol> 14d3a50>
scheme@(guile-user)> (class-of "bar")
$4 = #<<class> <string> 14d3b40> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-19T18:42:42.963

在 Racket 中，您可以使用[`describe`](http://planet.racket-lang.org/display.ss?package=describe.plt&owner=williams)来自 PLaneT 的 Doug Williams 的包。它是这样工作的：

```
> (require (planet williams/describe/describe))
> (variant (λ (x) x))
'procedure
> (describe #\a)
#\a is the character whose code-point number is 97(#x61) and
general category is ’ll (letter, lowercase) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-19T22:52:00.800

这里的所有答案都很有帮助，但我认为人们忽略了解释为什么这可能很难；Scheme 标准不包括静态类型系统，因此不能说值只有一种“类型”。子类型（例如数字与浮点数）和联合类型（您为返回数字或字符串的函数提供什么类型？）中和周围的事情变得有趣。

如果您更多地描述您想要的用途，您可能会发现有更具体的答案可以为您提供更多帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-19T18:19:21.560

要检查某物的类型，只需在类型后添加一个问号，例如检查 x 是否为数字：

```
(define get-Type
  (lambda (x)
    (cond ((number? x) "Number")
          ((pair? x) "Pair")
          ((string? x) "String")
          ((list? x) "List")))) 
```

继续。

# tabs - 访问表单 - 通过列而不是行（不是第一列）制表符，也只有 > 0 的字段

> ID：11566889
> 
> 赞同：0
> 
> 时间：2012-07-19T18:14:53.460
> 
> 标签：tabs, ms-access-2007

我在访问中使用了制表符索引和制表位选项，但我想通过列而不是行来制表符。

在一个表单中，我有一个包含三列的表，第三列包含整数，并且是我想要通过制表符浏览的唯一列。我还希望仅通过列中不为零的字段进行制表符。

目前，在按下制表符时，它会遍历表单内表格每一行中的每个字段。

我将非常感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:48:29.230

您可以捕捉到关键，以下包括混合音符。

```
Private Sub Form_KeyDown(KeyCode As Integer, Shift As Integer)

If (Shift And acShiftMask) > 0 Then
    If KeyCode = 9 Then
        KeyCode = 0
        If Not Me.Recordset.BOF Then
            Me.Recordset.MovePrevious
        End If
    End If
End If

Select Case KeyCode
    Case 38
        KeyCode = 0
        If Not Me.Recordset.BOF Then
            Me.Recordset.MovePrevious
        End If
    ''Arrow down or tab
    Case 40, 9
        KeyCode = 0
        If Not Me.Recordset.EOF Then
            Me.Recordset.MoveNext
        End If
End Select
End Sub 
```

您必须将 KeyPreview 设置为 Yes。选项卡的代码是 9。

# php - MySQL - 计数内连接查询

> ID：11566893
> 
> 赞同：0
> 
> 时间：2012-07-19T18:15:08.357
> 
> 标签：php, mysql, count

我有以下查询，它可以像我想要的那样工作，除了我想返回一个伪（？）列，该列是每个属性具有的与内部连接匹配的单元数的计数。其中 p.team = u.team 和 u.deleted = '0000-00-00 00:00:00' 和 u.rates != '0'。我可以在同一个查询中执行此操作吗？

一个属性有几个单元。他们都隶属于一个“团队”（想想用户名）。

```
SELECT DISTINCT p.title, p.state, p.city, p.regionID, p.team, p.type, p.lat, p.lng, p.url_title 
        FROM Properties AS p
        INNER JOIN Units AS u ON p.team = u.team
        INNER JOIN Rates AS r ON p.team = r.team
        INNER JOIN Photos AS ph ON p.team = ph.team
        AND p.public   = '1'
        AND u.rates   != '0'
        AND p.deleted  =  '0000-00-00 00:00:00'
        AND u.deleted  =  '000-00-00 00:00:00'
        AND r.deleted  =  '000-00-00 00:00:00'
        AND ph.deleted =  '000-00-00 00:00:00'
        GROUP BY p.id
        ORDER BY p.created ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:18:33.750

由于您只有一个聚合，而且您似乎是按`Properties`行分组，这应该相对容易。你的意思是这样的（未经测试）？

```
SELECT p.title, p.state, p.city, p.regionID, p.team, p.type, p.lat, p.lng, 
       p.url_title , COUNT(u.*) AS number_of_units
FROM Properties AS p
INNER JOIN Units AS u ON p.team = u.team
INNER JOIN Rates AS r ON p.team = r.team
INNER JOIN Photos AS ph ON p.team = ph.team
AND p.public   = '1'
AND u.rates   != '0'
AND p.deleted  =  '0000-00-00 00:00:00'
AND u.deleted  =  '000-00-00 00:00:00'
AND r.deleted  =  '000-00-00 00:00:00'
AND ph.deleted =  '000-00-00 00:00:00'
GROUP BY p.id, p.title, p.state, p.city, p.regionID, p.team, p.type, p.lat, p.lng, p.url_title
ORDER BY p.created ASC 
```

根据您的意思，您可能不得不这样做`COUNT(DISTINCT(u.id))`。从你的问题很难判断。

* * *

作为参考，“硬方法”是创建一个子查询来加入以进行计数。您可能需要这样做来计算多个不相关的项目，或者按一件事分组并按另一件事计算：

```
SELECT DISTINCT p.title, p.state, p.city, p.regionID, p.team, p.type, p.lat, p.lng,
                p.url_title, uuCount.number_of_units
FROM Properties AS p
INNER JOIN Units AS u ON p.team = u.team
INNER JOIN Rates AS r ON p.team = r.team
INNER JOIN Photos AS ph ON p.team = ph.team
AND p.public   = '1'
AND u.rates   != '0'
AND p.deleted  =  '0000-00-00 00:00:00'
AND u.deleted  =  '000-00-00 00:00:00'
AND r.deleted  =  '000-00-00 00:00:00'
AND ph.deleted =  '000-00-00 00:00:00'
INNER JOIN 
(
    SELECT uu.team, COUNT(*) AS number_of_units
    FROM Units uu
    WHERE uu.deleted = '0000-00-00 00:00:00'
    AND u.rates != '0'
    GROUP BY uu.team
) AS uuCount ON p.team = uuCount.team
GROUP BY p.id
ORDER BY p.created ASC 
```

# sql - 从 select 语句中进行 Postgres 隐式类型推断

> ID：11566895
> 
> 赞同：0
> 
> 时间：2012-07-19T18:15:20.913
> 
> 标签：sql, postgresql, plpgsql, syntactic-sugar

[昨天](https://stackoverflow.com/questions/11551627/postgres-implicitly-shaped-temporary-tables-syntactic-sugar-i-am-not-aware-of)我问了一个关于 postgress 的类似问题，以及它是否可以从 select 语句的结果形状中推断出类型。

今天我想从查询中返回一个结果集，这是我发现工作的查询：

```
DROP TYPE IF EXISTS topic_result_entry CASCADE;
CREATE TYPE topic_result_entry AS
(
    id            INTEGER,  
    last_post_at  TIMESTAMP WITHOUT TIME ZONE,
    is_sticky     BOOLEAN,
    is_poll       BOOLEAN,
    has_prefix    BOOLEAN,
    prefix        CHARACTER VARYING,
    title         CHARACTER VARYING,
    post_count    INTEGER,
    started_by    INTEGER,
    started_at    TIMESTAMP WITHOUT TIME ZONE
);

CREATE OR REPLACE FUNCTION get_paginated_topics(
    forum_id_ INTEGER, category_id_ INTEGER, page_number_ INTEGER, topics_per_page_ INTEGER)
RETURNS SETOF topic_result_entry as $$
DECLARE
    zero_based_index INTEGER;
    lower_offset INTEGER;
    upper_offset INTEGER;

BEGIN                    
    zero_based_index := page_number_ -1;
    lower_offset := zero_based_index * topics_per_page_;
    upper_offset := ( (topics_per_page_ * page_number_) + 1 );               

    RETURN query
    select id,last_post_at, is_sticky, is_poll, 
           has_prefix, prefix, title,post_count, 
           started_by, started_at 
    from (
        select row_number() OVER(ORDER by last_post_at desc) as rn, * 
        from forum_topics where category_id = category_id_ and forum_id= forum_id_
    ) as foo
    where rn > lower_offset and rn < upper_offset;
END;
$$ LANGUAGE plpgsql; 
```

结果集的形状可以从select的参数列表+源表的schema定义中推断出来。

Q1。9.1 中是否有一些语法糖，如果没有，这在路线图上吗？

Q2 有没有更简洁的方式来做到这一点？

**无关**

```
select id,last_post_at, is_sticky, is_poll, 
       has_prefix, prefix, title,post_count, 
       started_by, started_at 
from (
    select row_number() OVER(ORDER by last_post_at desc) as rn, * 
    from forum_topics where category_id = 72
) as foo
where rn>0 and rn<22

QUERY PLAN  
Subquery Scan on foo  (cost=0.00..492.20 rows=28 width=60)  
  Filter: ((foo.rn > 0) AND (foo.rn < 22))  
  ->  WindowAgg  (cost=0.00..409.42 rows=5519 width=156)    
        ->  Index Scan using forum_topics_last_post_at_idx1 on forum_topics  (cost=0.00..326.63 rows=5519 width=156)    
              Filter: (category_id = 72) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:50:49.157

语法糖？我有一些给你。

如果 ...

> 结果集的形状可以从 [...]**源表的模式定义中推断出来**

...那么你可以大大简化。在 PostgreSQL 中，表定义会自动定义同名的类型。

```
 CREATE OR REPLACE FUNCTION get_paginated_topics(
    _forum_id int, _category_id int, _page_number int, _topics_per_page int)
RETURNS **SETOF forum_topics** AS
$BODY$
DECLARE
   _lower_offset  int := (_page_number - 1) * _topics_per_page;
   _upper_offset  int := _topics_per_page * _page_number + 1;
BEGIN

   RETURN QUERY
   SELECT *
   FROM   forum_topics f
   WHERE  f.category_id = category_id_
   AND    f.forum_id = forum_id_
   ORDER  BY f.last_post_at DESC
   LIMIT  _lower_offset
   OFFSET _upper_offset;

END;
$BODY$ LANGUAGE plpgsql; 
```

其他详情：

*   正如@user272735 指出的那样使用 LIMIT / OFFSET 。

    *   然后你可以使用`SELECT *`，因为你摆脱了额外的列。
*   您可以在声明时分配变量。

*   短类型名称。

*   删除了多余的括号。

*   我在查询中添加了表别名和表限定，在这种情况下这不是必需的，但是避免 plpgsql 函数中的命名冲突的良好做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:20:17.203

PostgreSQL 提供[LIMIT 和 OFFSET](http://www.postgresql.org/docs/current/static/queries-limit.html)可用于限制结果集。例如

```
select id, last_post_at, is_sticky, is_poll, 
       has_prefix, prefix, title, post_count, 
       started_by, started_at 
  from forum_topics
 where category_id = category_id_ and forum_id = forum_id_
 order by id
 limit topics_per_page_
offset (page_number_ - 1) * topics_per_page_
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:27:57.723

我不是 Postgres 特定功能的出口，但分页在 SQL 中通常有点棘手。在 ANSI SQL 中，我通常会执行 SELECT COUNT(*) FROM ... 来确定结果集的大小，然后使用游标来获取用户想要的页面。您的查询会计算每个页面的结果集的大小，这可能会变得低效。另请记住，结果集的大小可能会随着新记录的添加而改变，因此页面可能无法正确对齐。

# html - 使用百分比和浮点数强制溢出-x

> ID：11566896
> 
> 赞同：1
> 
> 时间：2012-07-19T18:15:21.663
> 
> 标签：html, css, css-float, overflow, percentage

我在容器内部有一个小结构，`<li>`我想做的是强制`overflow-x`出现而不是`overflow-y`，但我无法做到这一点，我认为这是因为属性`float`和我正在使用的百分比。

我有办法达到这个结果吗？只显示水平溢出？

这是代码：

**html**

```
 <div id="CockpitCenter">
    <ul class="CockpitContainerResult">
      <li><div class="box">Box 1</div></li>
      <li><div class="box">Box 2</div></li>
      <li><div class="box">Box 3</div></li>
      <li  style="height: 400px;">
          <div class="box" style="height: 370px;">Box 4</div>
      </li>
      <li><div class="box">Box 5</div></li>
      <li><div class="box">Box 6</div></li>
      <li><div class="box">Box 7</div></li>
   </ul>
 </div>​ 
```

和**CSS**

```
#CockpitCenter {
   height: 500px; /* set only here in jsFiddle */
   position: fixed;
   left: 0;
   border: solid 2px #ccc;
   border-bottom: none;
   overflow: auto;
}

div#CockpitCenter ul.CockpitContainerResult {
   float: left;
   width: 100%;
}

ul.CockpitContainerResult li {
   margin: 5px 0;
   height: 150px;
   width: 50%;
   float: left;
}

ul.CockpitContainerResult li:nth-child(even) {
    float: right;
}

ul.CockpitContainerResult li div.box {
    border: solid 1px #ccc;
    margin: 15px;
    border-radius: 20px;
    height: 150px;
    text-align: center;
}​ 
```

这是一个[**演示**](http://jsfiddle.net/ybJ6C/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:30:18.327

听起来你正在尝试制作一个轮播，有很多方便的 jquery 插件。无论如何，你不能使用宽度百分比来做到这一点，你必须给你的主容器一个固定的宽度，然后给内部容器（你的 ul）你想要的任何更大的宽度。您必须在 UL 上强制设置宽度，否则 LI 元素只会换行。完成后，只需在主容器中添加一个 'overflow-x: auto' ，您就应该可以上路了。

快速示例，[http://jsfiddle.net/ybJ6C/8/](http://jsfiddle.net/ybJ6C/8/)

我现在正在使用我的 ipad，并没有看到滚动条，但它确实滚动。你会注意到滚动一直持续到最后，如果你知道你想要什么，你可以用宽度调整它。如果它是动态的，那么您将需要 js 根据其中的元素为您调整宽度。我也没有正确的高度，但它足以得到这个想法。（再次从我的 ipad 执行此操作，编码不是最好的）

# xml - 在 SSIS 中将字符串转换为可呈现的 XML 格式

> ID：11566900
> 
> 赞同：0
> 
> 时间：2012-07-19T18:15:30.527
> 
> 标签：xml, sql-server-2008, ssis, pretty-print

我有以下字符串，我想将其转换为可呈现的 XML 格式。可表达的意思，适当的缩进和回车在适当的位置。出于某种原因，我似乎无法让它工作。

```
<HTML><SSISLog><PackageProperty><PackageName>Package</PackageName><PackageID>{67D67690-D437-42DB-80A2-A7FB68353E70}</PackageID></PackageProperty></SSISLog></HTML>' 
```

我可以使用 xml 任务来完成这项工作吗？任何相同的内置存储过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:37:59.557

不，XML 任务不会美化 XML。添加脚本任务并使用此答案中提供的方法[从 XmlDocument 中获取带有换行符的缩进 XML 的最简单方法是什么？](https://stackoverflow.com/questions/203528/what-is-the-simplest-way-to-get-indented-xml-with-line-breaks-from-xmldocument)

如果您不确定如何将字符串转换为 xmldoc，此答案应显示[Format XML String to Print Friendly XML String的方式](https://stackoverflow.com/questions/1123718/format-xml-string-to-print-friendly-xml-string)

# oracle - Oracle 11G - 未在 Join 上使用 PK 索引，采用全扫描

> ID：11566908
> 
> 赞同：2
> 
> 时间：2012-07-19T18:16:01.253
> 
> 标签：oracle, oracle10g, oracle11g, oracle11gr2

我知道 Oracle 有时会“判断”最好执行全表扫描而不是索引扫描，但仍处于“学习阶段”，我只是想更好地了解“何时”oracle 将确定最佳路线。例如，我有一个简单的查询：

```
Select *
  FROM GLMV_JOURNAL_LOGS JLOG 
       INNER JOIN GLMV_Transact_Details TDTL 
          ON TDTL.TR_REF_NO = JLOG.TR_REF_NO 
         AND TDTL.SCAT_KEY = JLOG.Scat_key 
         AND TDTL.CASE_KEY = JLOG.CASE_KEY 
         AND TDTL.TR_CD = JLOG.TR_CD 
       INNER JOIN FUND_DESC FDDC 
          ON FDDC.FD_DESC_ID = TDTL.FD_DESC_ID  
       INNER JOIN FD_RATES FDRT 
          ON  FDRT.FDRT_KEY = TDTL.FDRT_KEY
       INNER JOIN BEN_TYPES BNTP 
          ON BNTP.BNTP_KEY = FDRT.BNTP_KEY 
 WHERE JLOG.JRNL_CD  = '0' 
   AND JLOG.SRC_CD = '2' 
   AND JLOG.MKEY_FD_NUM <> 0 
   AND NVL(JLOG.TMOV_KEY, -1) > 0 
   AND NVL(JLOG.ORIG_SCAT_KEY, 1) = 1 
   AND TDTL.STAT_CD <> '4' 
   AND NVL(TDTL.ORIG_SCAT_KEY, 1) = 1 
```

FD_RATES 上的连接是 PK 值上的连接，我还在 GLMV_Transact_Details 上创建了一个相应的索引，认为会阻止全表扫描，但是，根据下面的解释计划，即使在我执行索引重建之后，它也不是并收集表格统计信息，结果仍然相同：

![解释计划](../Images/fe75d91412d47547fc559dedc93cd223.png)

现在，如果我进入查询并添加以下 where 子句：

```
AND  FDRT.FDRT_KEY = 100 
```

索引当然会启动，但我想我很好奇为什么它不是在进行内部连接时......有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T19:03:44.233

优化器估计 FD_RATES 上全表扫描的成本为 106。此馈入的连接的估计基数为 416，馈送该连接的其他行源也是如此。如果我们用嵌套循环替换散列连接，对每一行进行唯一索引 (PK) 查找，那么对于循环的每次迭代，成本将至少为 1，可能为 2 或 3，我们认为会有是 416 次迭代，所以这将是至少 416 的成本，可能是两倍或三倍，这比进行全表扫描的估计成本要高得多。

现在，估计可能是错误的。根据我的经验，主要要看的是计划中显示的基数。如果这些都相当准确，那么 Oracle 很有可能选择了相当有效的连接顺序和访问路径——不一定是最有效的，但很接近。

如果您想尝试强制进行索引扫描以查看其执行情况，我相信您想要的提示是：

```
Select /*+ INDEX(fdrt) */ *
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T19:59:40.960

我将忽略您的示例，并尝试回答您的 FTS 与索引问题:)

通常，使用索引的原因是为了最小化您需要读取的数据块以满足您的查询。这很大程度上取决于您的数据在表中的物理存储方式。您选择的行的百分比没有区别，而是通过使用索引而不是全表扫描可以避免多少块。例如，如果您有一个包含 3000 个块的 3000 万行的表，并且您想选择 15,000 行（或 0.5%），您应该使用索引吗？好吧，如果所有 15,000 行都在最后 200 个块中，那么索引绝对是有意义的。但是，如果查询必须从每个数据块中获取 5 行以获取 15,000 行，则全表扫描更有意义，因为无论如何您都必须接触所有块。

Cary Millsap 使用了一个很好的例子，将 Oracle 索引视为书中的索引。如果您有一本关于 oracle 的书，并且您查找“分区”，它可能会指出您在相对较小的一组页面中出现了很多事件。所以在这种情况下，使用索引是个好主意。但是，如果您查找“Row”，它的出现次数可能与“Partition”相同，但它们将分布在大多数页面中。在这种情况下，最好“全扫描”并按顺序阅读每一页，而不是在页面和索引之间来回翻转。

Oracle 在您的索引中存储有关表中数据的物理存储方式的近似值，并在确定选择哪个路径时使用该信息。显然，优化器比这更多（你可以用糟糕的统计数据或参数设置破坏它），但这应该让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:45:16.983

我没有足够的信息来提供完整的答案，但这里有一些评论：

*   我不会像你这样简单地调用 5 表连接。你能不放一张桌子吗？
*   仅当表很大时，全表扫描才不好。对于较小的表，这与基于索引的访问没有区别。
*   您可以使用提示（嵌入到注释中）来指导优化器使用某个访问路径。

# java - 如果我在 finalize 方法中保存对它的引用，对象会被 GC 吗？

> ID：11566910
> 
> 赞同：1
> 
> 时间：2012-07-19T18:16:04.110
> 
> 标签：java, android, memory, garbage-collection, finalizer

> **可能重复：**
> [在完成期间引用对象](https://stackoverflow.com/questions/1002567/reference-to-object-during-finalize)

我有一个符合垃圾收集条件的对象，但在它的`finalize`方法中，我保存了对该对象的引用，例如通过调用`arrayList.add(this)`.

对象还会被垃圾收集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:18:05.747

简短的回答是：不。长的回答是：是的。第一次调用 finalize 方法时，它会“复活”，但是，当变量再次符合 GC 条件时，将不会调用 finalize 方法，它将被 GC'ed。

# c# - 创建目录 C# 未失败但未创建文件夹

> ID：11566911
> 
> 赞同：1
> 
> 时间：2012-07-19T18:16:06.200
> 
> 标签：c#, asp.net, .net, c#-4.0, directory

> **可能重复：**
> [C# - FileStream 和创建文件夹](https://stackoverflow.com/questions/3695163/c-sharp-filestream-and-creating-folders)

我有一个输入目录，其中 XML 文件是 FTP，有一个应用程序运行，然后摄取所有这些 XML 并处理它们。最后，该文件被移动到一个文件夹，该文件夹是在另一个目录中处理它的日期创建的。这是我尝试创建的路径：

```
D:\srv\test\ftp\Processed\07-19-2012 
```

这是创建目录的代码：

```
public static bool IfExistOrCreateDirectory(string path, bool createDirIfMissing) {
    if (Directory.Exists(path)) return true;
    else if (createDirIfMissing) {
        try {
            (new FileInfo(@path)).Directory.Create();
            return true;
        }
        catch (Exception ex) { return false; }
    }
    else return false;
} 
```

此代码运行后，它不会引发异常并返回 true。但是，当我检查文件夹时，名为“07-19-2012”的文件夹不存在。

提前致谢。

PS-此代码工作正常，直到我将一些 XML 文件从服务器复制到输入文件夹中进行测试。我不能再通过代码在任何驱动器中创建目录；就好像它们是虚拟创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:20:03.023

[http://msdn.microsoft.com/en-us/library/54a0at6s.aspx](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)

```
Directory.CreateDirectory(path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:25:17.540

使用 Vlad 的解决方案，或从[http://msdn.microsoft.com/en-us/library/d869eykc](http://msdn.microsoft.com/en-us/library/d869eykc)使用：

```
(new DirectoryInfo(@path)).Directory.Create(); 
```

# ruby-on-rails - 如何显示来自 Rake 任务的类似 Rails 的输出？

> ID：11566912
> 
> 赞同：1
> 
> 时间：2012-07-19T18:16:11.353
> 
> 标签：ruby-on-rails, ruby, rake

我有一个 rake 任务，用于设置一堆符号链接，但前提是它们不存在。当前，当您运行任务时，没有输出。所以你不知道有没有发生什么事。如何通过为每个符号链接说“创建”或“跳过”来提供像 Rails 生成器一样的输出？我需要包含哪些 gems 或模块才能获得这种类型的功能？

```
# example
task :setup do
  if !File.symlink?('/example/link')
    %x{cd /example && ln -s /something link}
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:27:58.127

我可能会为此使用 Ruby 的[FileUtils ln_s](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-ln_s)功能。

```
ln_s(old, new, options = {}) 
```

> 创建一个指向旧的符号链接新的。如果 new 已经存在并且它是一个目录，则创建一个符号链接 new/old。如果 new 已经存在并且它不是目录，则引发 Errno::EEXIST。但是如果设置了 :force 选项，则覆盖新的。

```
FileUtils.ln_s '/usr/bin/ruby', '/usr/local/bin/ruby'
FileUtils.ln_s 'verylongsourcefilename.c', 'c', :force => true 
```

...

```
ln_s(list, destdir, options = {}) 
```

> 在目录中创建多个符号链接，每个链接指向列表中的项目。如果 destdir 不是目录，则引发 Errno::ENOTDIR。
> 
> 如果 destdir 不是目录，则引发 Errno::ENOTDIR。

# java - 我无法在 Windows Vista 上运行我的 JAR 文件

> ID：11566916
> 
> 赞同：1
> 
> 时间：2012-07-19T18:16:26.080
> 
> 标签：java, jar, batch-file, cmd

我最近制作了一个名为 Electronics.jar 的 .JAR 文件

（位于 C:\Java\eclipse\Java\jdk1.7.0_03\bin>Electronics.jar）

它不会运行。我已经尝试了很多不同的运行方法。我已经使用了命令

```
C:\Java\eclipse\Java\jdk1.7.0_03\bin>javaw -jar Electronics.jar 
```

在命令提示符下，我尝试了从批处理文件运行相同的命令，并尝试双击 Windows 资源管理器中的图标。后一种方法会出现一个弹出框，询问我想使用哪个程序来打开文件。我找到了 javaw.exe 文件，选择了它，并尝试用它运行它，但什么也没发生。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:19:15.113

如果您可以在 Windows 资源管理器中找到它，您可以`shift + rightClick`在空白处找到文件的位置（在 Windows 资源管理器中），然后选择`open command prompt here`并尝试执行`java Electronics.jar`

# asp.net-mvc-3 - 如何在 MVC3 Web Grid 中将每页的行值设为动态值？

> ID：11566924
> 
> 赞同：1
> 
> 时间：2012-07-19T18:16:46.330
> 
> 标签：asp.net-mvc-3, webgrid

> 你好 ..，
> 
> 谁能告诉我在 MVC3 WebGrid 中将 Dropdown 选定值分配为 rowsperpage 值的解决方案。我怎样才能做到这一点。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:32:28.590

在您的控制器中：

```
public ActionResult Index(int rowsperpage = 20)
{
    // Logic to take and skip whatever
} 
```

在您看来：

```
@using(Html.BeginForm("Index", "Home"))
{
    <select id="rowsperpage" name="rowsperpage">
        <option value="10">10</option>
        <option selected="selected" value="20">20</option>
        <option value="50">50</option>
    </select>
    <input type="submit" value="Update" />
} 
```

为了让您更好地了解使用 html 帮助程序创建下拉列表，请参阅[如何在 MVC3 中静态填充下拉列表](https://stackoverflow.com/a/10911738/985284)

# c++ - 我可以允许多个程序同时从同一个文件中读取吗？

> ID：11566930
> 
> 赞同：9
> 
> 时间：2012-07-19T18:17:12.813
> 
> 标签：c++, c, windows, file, winapi

我有一个应用程序可以读取一组数据文件并执行一些模型计算。程序本身不需要修改数据文件，所以我目前使用只读标志打开它们，如下所示：

```
FILE* file;
if(_wfopen_s(&file, fname.c_str(), L"r") == 0)
... 
```

我想让我的程序的多个实例同时运行，使用相同的数据集，但对数据执行不同的计算。我的程序都不需要修改数据文件。由于数据文件非常大，我无法制作单独的数据副本以供每个程序使用。

我假设因为我以只读权限打开文件，所以两个程序可能同时从同一个文件中读取。相反，我收到各种错误，例如“文件无法打开，因为它正在被另一个进程使用”。

由于我的开发环境是 Windows 7，[这个问题表明这可能是启用读取共享的问题](https://stackoverflow.com/a/823525/538247)。但是，该线程中的所有答案都依赖于[CreateFile](http://msdn.microsoft.com/en-us/library/aa363858(v=vs.85).aspx)，而我正在处理使用 stdio.h 编写的遗留代码。

有没有一种方法可以让多个程序使用 fopen 函数类同时从文件中读取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T18:23:55.477

如果您可以更改`fopen`例程，请尝试将`fopen`调用替换为[`_fsopen`](http://msdn.microsoft.com/en-us/library/8f30b0db%28VS.80%29.aspx), 以进行共享读/写。`_fsopen`是特定于 mscrt 的。

如果您*可以*使用`CreateFile`，并且不想重写所有旧代码以进行读/写，您还可以尝试将 a`FILE *`与 winapi 文件句柄相关联。用于[`_open_osfhandle`](http://msdn.microsoft.com/en-us/library/bdts1c9x%28v=vs.71%29.aspx)从返回的文件句柄中获取文件描述符`CreateFile`，然后用于从该文件描述符[`_fdopen`](http://msdn.microsoft.com/en-us/library/dye30d82%28v=vs.80%29.aspx)中获取一个。`FILE *`

# html - HTML 页面无法在 QWebview 中正确显示

> ID：11566931
> 
> 赞同：0
> 
> 时间：2012-07-19T18:17:24.373
> 
> 标签：html, css, qt, qwebview

我正在做一个有`QWebView`显示`HTML`文件的小软件。我的问题是我的欢迎页面显示不好。看起来![这个](../Images/4cf051096022b7cc2516733381df25e2.png)应该在中间的那些红线之间有一个图像。问题肯定是我的`HTML`和/或`CSS. So here is my`HTML`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<link href="styles/accueil.css" rel="stylesheet" type="text/css" media="screen" />
</head>

<body>

    <div class="container">

        <div class="ligne">&nbsp;</div>

    </div>

    <div class="ligne">&nbsp;</div>    
</body>
</html> 
```

我的`CSS`：

```
@charset "UTF-8";
/* CSS Document */

body{
    background-color:white;
    margin:0 auto;
    height:100%;
}

html {
    overflow-y: scroll;
    height:100%;
}

img{
    border:none;
}

.container {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -20px;
    background-image: url(../icones/accueil.jpg);
    background-repeat:no-repeat;
    background-position:center center;
}

.ligne{
    width:100%;
    height: 20px;
    background-color:#ee1b2e;
} 
```

知道我写错了什么吗？

谢谢！

- - - 编辑 - - -

只有在 XP 上才会发生……在 MAC、7 和 Vista 上，它可以找到。它应该看起来像[这样](http://jsfiddle.net/86u6G/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:20:12.360

我不确定为什么，但问题是我的图像...我需要一个 .png 图像而不是 .jpg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T14:49:01.010

我想这是当您在未安装 Qt 的计算机上使用带有 qwebview 的程序时。如果是这样，添加到程序目录文件夹 [imageformats]。只需从 Qtdir 复制它。默认情况下，Qt 支持 *.png 和 *.svg 格式，对于 *.jpg 和其他格式，windows 需要设置 dll。

# iphone - 如何将 UILongPressGestureRecognizer 添加到 UITextField？

> ID：11566933
> 
> 赞同：0
> 
> 时间：2012-07-19T18:17:34.420
> 
> 标签：iphone, objective-c, ios

我正在尝试将 UILongPressGestureRecognizer 添加到 UITextfield；但是，我似乎无法让它正常运行。我想要的是覆盖默认的长按行为（放大镜和“粘贴”选项），但也保持在文本字段中点击以输入它的能力。使用下面的代码，它仍然会打开放大镜，即使它进入`textFieldLongPressed`方法，它也永远不会有正确的状态。有任何想法吗？

```
- (void) addLongPressRecognizer: (UIView *) view
{
    UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc] init];
    [gestureRecognizer addTarget:self action:@selector(textFieldLongPressed:)];
    gestureRecognizer.delegate = self;
    [view addGestureRecognizer: gestureRecognizer];
    self.myGestureReconginzer = gestureRecognizer;
}

- (void) textFieldLongPressed:(UILongPressGestureRecognizer*)sender 
{
    if (sender.state == UIGestureRecognizerStateBegan) 
    {
        [self.delegate textFieldLongPressed:self];
    }
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if(gestureRecognizer == self.myGestureReconginzer)
    {
        //I've tried it with and without the following line
     // [self textFieldLongPressed:(UILongPressGestureRecognizer*) gestureRecognizer];
        return YES;
    }
    else if([gestureRecognizer class] == [UILongPressGestureRecognizer class])
    {
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:22:11.127

尝试将这样的内容添加到您的 UITextField 子类中：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:)) 
        return NO;
    return [super canPerformAction:action withSender:sender];
} 
```

这应该禁用粘贴选项。

# dom - 如何访问 d3 SVG 元素的数据

> ID：11566935
> 
> 赞同：7
> 
> 时间：2012-07-19T18:17:37.197
> 
> 标签：dom, svg, element, visualization, d3.js

所以我正在尝试制作我自己的 d3 完成的华丽可视化版本：

[http://mbostock.github.com/d3/talk/20111116/bundle.html](http://mbostock.github.com/d3/talk/20111116/bundle.html)

我所做的基本上是将整个图表向左移动，然后尝试在右侧显示不同的关系，因此每次将鼠标悬停在左侧的名称上时，您不仅会看到不同类型的连接改变颜色在图表中，您还可以在右侧看到这些连接的名称。

我遇到的问题是访问连接的实际名称。我是 javascript 的新手，甚至是 d3 的新手，并且在理解如何访问这些 SVG 元素的实际名称时遇到了问题 到目前为止，我只是在 console.log() 中使用两行代码进行操作：

```
var targetTest = d3.selectAll("path.link.target-" + d.key);
console.log(targetTest); 
```

在控制台中，这将为我提供我想要的所有 SVG 对象的日志，但它为我提供了每个元素的完整信息。像这样的东西：

```
0: SVGPathElement
__data__: Object
animatedNormalizedPathSegList: null
animatedPathSegList: SVGPathSegList
attributes: NamedNodeMap
baseURI: "http://localhost/mbostock-d3-    544addb/examples/bundle2/bundle.html"
childElementCount: 0
childNodes: NodeList[0]
className: SVGAnimatedString
clientHeight: 0
clientLeft: 0
clientTop: 0
clientWidth: 0
dataset: DOMStringMap
externalResourcesRequired: SVGAnimatedBoolean
farthestViewportElement: SVGSVGElement
firstChild: null
firstElementChild: null
id: ""
lastChild: null
lastElementChild: null
localName: "path"
namespaceURI: "http://www.w3.org/2000/svg"
nearestViewportElement: SVGSVGElement
nextElementSibling: SVGPathElement
nextSibling: SVGPathElement  
nodeName: "path"
nodeType: 1
nodeValue: null
normalizedPathSegList: null
offsetHeight: 0
__proto__: SVGPathElement
length: 1
parentNode: HTMLDocument
__proto__: Array[0] 
```

我试图访问的数据部分位于**数据**对象中，其中包含另外三个对象。

```
source: Object
target: Object
__proto__: Object 
```

在源对象中，（这是我要访问的）有一个名为 key 的字段，这是我要访问的字段

```
depth: 4
imports: Array[9]
key: "Interpolator"
name: "flare.animate.interpolate.Interpolator"
parent: Object
size: 8746
x: 40.62256809338521
y: 180 
```

基本上我想在这个键上调用 document.write 或类似的 $(#id).text()，但我似乎一次只能访问一个元素，AKA 我正在使用

```
var target = d3.selectAll("path.link.target-" + d.key);
var source = d3.selectAll("path.link.source-" + d.key);
var imports = source.property("__data__").target.key;
var exports = target.property("__data__").source.key; 
```

但每一个都只会给我一个名字，而不是一个完整的列表。AKA 当我将鼠标悬停在一个元素上时，即使它有多个“导入”或“导出”

```
console.log(imports) 
```

一次只会给我 1 个名字，即使我使用了 selectAll。

任何帮助将非常感激！如果问题有点复杂，我很抱歉，我试图尽可能具体，因为这是一个非常具体的问题，但我可能已经详细介绍了......如果可能的话。无论如何，先谢谢了！

艾萨克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:39:38.560

使用and变量来获取它们返回的每个值，而不仅仅是第一个值`each`。`source``target`

```
var targets = d3.selectAll("path.link.target-" + d.key);
var sources = d3.selectAll("path.link.source-" + d.key);
var imports = [];
var exports = [];
targets.each(function(d) {
  imports.push(d["source"].key);
});
sources.each(function(d) {
  exports.push(d["target"].key);
});
console.log("Imports - " + imports);
console.log("Exports - " + exports); 
```

这是一个展示它的[JSFiddle](http://jsfiddle.net/brantolsen/bJNyb/)。我将上面的代码添加到`mouseover`函数中，因为这是突出显示的地方。

`D3`方法喜欢`attr`和在幕后`style`使用`each`，所以您不必这样做，但由于您使用自定义函数来访问数据，您将需要使用`each`.

# timer - 节省时间间隔

> ID：11566939
> 
> 赞同：0
> 
> 时间：2012-07-19T18:18:03.890
> 
> 标签：timer

所以基本上我的问题是我想在某些时间间隔内保存东西。也许每 30 秒保存一次图像。问题是我不知道该怎么做。php 或 html 中是否有可以跟踪时间的函数或某些东西，以便我可以每隔 30 秒左右保存一次。还因为我的文件是一个 .tpl 文件，所以我对 html、php 和 js 选项持开放态度。我的保存功能正常，但现在我只想在某些时间间隔内保存。我的保存函数在 js 中，所以如果你的答案有某种方式让我调用这个 js 函数会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:22:29.800

你的问题很基本。在实现某些东西之前，你真的应该做一些教程或读一本书。要在 JavaScript 中每 30 秒调用一次 save()，只需执行以下操作：

```
setInterval(function () {
    save_to_server_function();
},30000); 
```

这个答案也很基本，可能不适合您的需求。这取决于很多事情。你也不想保存没有改变的东西。检查修改，然后才保存。

并为您的问题使用更多标签，例如 fe javascript、http 等。

# javascript - 任何人都可以描述范围的流程吗？

> ID：11566940
> 
> 赞同：1
> 
> 时间：2012-07-19T18:18:06.107
> 
> 标签：javascript, events, contenteditable

[http://jsfiddle.net/JonVisc/ufHBd/4/](http://jsfiddle.net/JonVisc/ufHBd/4/)

所以在 jsFiddle 中的基本步骤是：

*   单击“Hello World”上的任意位置（不突出显示）：范围为：true
*   拖动以突出显示（以突出显示'll Wor'为例：范围为：false
*   单击该突出显示范围内的任意位置：范围为：false

紧接着这一点，突出显示消失了，这是一个事件吗？基本上我需要检测突出显示的清除（并随后清除保存的范围，因为突出显示不存在）但不幸的是我不知道如何。

单击（之后不突出显示）返回 false 的预期结果，但由于我希望在上一次单击中获得该结果，所以这并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:24:43.170

实际上，结果取决于浏览器：在 Mozilla 中单击未折叠的选择时，单击事件触发时选择会折叠，但在 WebKit 中，选择仍然未折叠。

至于检测它，您的选择是有限的。最近的 WebKit 和 IE 一直回到 5.5 触发一个`selectionchange`事件`document`，这听起来像你想要的：

[http://jsfiddle.net/ufHBd/5/](http://jsfiddle.net/ufHBd/5/)

Mozilla 和 Opera 不会在常规内容中触发任何有用的与选择相关的事件，您所能做的就是处理鼠标和按键事件。此答案的评论中有更多背景知识：[https ://stackoverflow.com/a/8443541/96100](https://stackoverflow.com/a/8443541/96100)

# c# - 比较 2 个 Access(mdb) 文件

> ID：11566941
> 
> 赞同：1
> 
> 时间：2012-07-19T18:18:07.600
> 
> 标签：c#, asp.net, oracle, ms-access

我们正在处理这个项目，有时我们需要验证来自 2 个不同的 Access(mdb) 文件的数据。此验证包括基于作为“主键”的列比较这两个文件的条目，以验证其他列的值是否从文件更改为另一个。

我的同事编写了一些代码将这两个文件中的数据导入到 Oracle 表中，并使用视图中的 sql 连接进行验证。

问题是：文件有太多数据，需要 50 多分钟才能将它们加载到 Oracle 表中。

有没有更好的方法来制作这个例程？无需将所有数据导入数据库？

**编辑**

这是我们用来导入数据的代码（不是我写的）：

```
protected void InsereDadosTemp()
{
    try
    {
        String vMesAno = ReportParameter.ReportData.Parameters.Item("pMesAnoCompetencia").Value;

        Hashtable hashMesAno = new Hashtable();
        hashMesAno.Add(vMesAno, 1);
        hashMesAno.Add(MesAnterior(vMesAno), 2);

        OleDbConnection objConnOracle = new OleDbConnection(ConfigurationManager.ConnectionStrings["Main"].ToString());
        objConnOracle.Open();

        OleDbCommand objCmdPciReport = new OleDbCommand("DELETE FROM ZBRICAGEM", objConnOracle);
        objCmdPciReport.ExecuteNonQuery();

        foreach (DictionaryEntry obj in hashMesAno)
        {
            string vConnectionString = MontaConnectionString(obj.Key.ToString());

            OleDbConnection objConnAccess = new OleDbConnection(vConnectionString);

            objConnAccess.Open();

            OleDbCommand objCmdAccess = new OleDbCommand("SELECT * FROM TEST where EQUIPE NOT IN  ('ONCO', 'DERMA', 'AROMA', 'SOMA', 'IDADE', 'HORMONIO')", objConnAccess);
            OleDbDataReader reader = objCmdAccess.ExecuteReader();
            if (reader.HasRows)
            {
                objCmdPciReport = new OleDbCommand("INSERT INTO ZBRICAGEM (ID_BRICK, BRICK, SETOR, EQUIPE, NOME_POOL, BRICKS_UF, BU, ARQUIVO ) Values (" +
                                                              "BRICKS_SEQ.NEXTVAL, :p1, :p2, :p3, :p4, :p5, :p6, :p7)", objConnOracle);
                objCmdPciReport.CommandType = CommandType.Text;

                while (reader.Read())
                {
                    objCmdPciReport.Parameters.Clear();
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p1", OleDbType.VarChar, 100)).Value = reader["BRICK"];
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p2", OleDbType.VarChar, 100)).Value = reader["SETOR"];
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p3", OleDbType.VarChar, 100)).Value = reader["EQUIPE"];
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p4", OleDbType.VarChar, 100)).Value = reader["NOME_POOL"];
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p5", OleDbType.VarChar, 100)).Value = reader["BRICKS_UF"];
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p6", OleDbType.VarChar, 100)).Value = reader["BU"];
                    objCmdPciReport.Parameters.Add(new OleDbParameter(":p7", OleDbType.VarChar, 100)).Value = Path.GetFileName(objConnAccess.ConnectionString);

                    objCmdPciReport.ExecuteNonQuery();
                }
            }

            objConnAccess.Close();
        }

        objConnOracle.Close();
    }
    catch (Exception ex)
    {
        throw new Exception("Erro durante a importação de Bricagem: " + ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:42:21.210

*   在访问中打开一个.mdb
*   将另一个数据库中的表附加到打开的表（右键单击“表”窗格，选择“链接表”或以[编程](http://www.databasedev.co.uk/link-tables-macro.html)方式执行）
*   在查询选项卡中，进行新查询以进行比较 - 应该类似于您在 oracle 中所做的。您也许可以切换到 SQL 视图并粘贴相同的代码。

如果这很慢，请尝试将两个文件复制到同一个硬盘驱动器。但是，如果您不更新，则可能不必这样做。您还可以考虑以某种方式以只读模式执行查询（MSA 不会尝试锁定 .mdb，网络速度较慢）。Access 可能不如 Oracle 智能，但是，它具有自己的数据格式和简单的连接将是不错的。这将打破导入甲骨文的大门。

### 编辑

回复评论：

*感谢@FastAl，但我们不能“手动”操作 Access 文件，它们将被用户复制到网站的目录中，我们与它们交互的唯一方法是通过 C# 代码*

仍然可以利用这种方法。查询链接表将是速度的关键。

*   标准化您将复制的 2 个访问数据库的路径/文件名。要么直接将它们写为来自网络上传代码的这些名称，要么如果用户通过网络共享进行复制，只需告诉他们正确命名即可。
*   制作第三个.mdb，附加到您放置在标准化名称/位置中的数据库副本中的表格。
*   在你的 c# 程序中打开它；请参阅[http://www.connectionstrings.com/access-2007](http://www.connectionstrings.com/access-2007)或[http://www.connectionstrings.com/access](http://www.connectionstrings.com/access)。
*   从 c# 运行查询（您也可以通过 MSAccess 将它放在第三个 .mdb 中，只需将查询作为表名打开）。

确保从程序中正确关闭第三个 MDB；否则你将无法用新的数据库覆盖另外两个数据库，它们将被使用。

也可以从 c# 以编程方式链接表访问 - 我很久以前就这样做了，但已经忘记了如何。您还可以将它们链接到 oracle/SQL；不过，这可能需要执行 process.execute /.Waitforexit 并仅在这些 dbms 中运行脚本来处理它。黑客入侵。我看不到他们的“访问链接”驱动程序比访问更快；充其量他们可能只是使用“喷气发动机”dll（猜测）。

# ruby-on-rails - 图像字段不显示在活动管理表单中

> ID：11566943
> 
> 赞同：3
> 
> 时间：2012-07-19T18:18:12.007
> 
> 标签：ruby-on-rails, ruby, paperclip, activeadmin, formtastic

gem "formtastic", "~> 2.1.1" gem "activeadmin", "~> 0.4.2" gem "回形针"

照片字段不显示在活动管理表单 app/views/admin/products/_form.html.erb 中，但 app/views/products/_form.html.erb 中的相同表单在产品视图中正常工作

## > 应用程序/管理员/products.erb

`ActiveAdmin.register Product do
form :partial => "form"
end`

## app/views/admin/products/_form.html.erb

```
 <%= semantic_form_for  [:admin , @product ], :html => { :multipart => true } do |f| %>
    <%= f.semantic_errors :name , :price , :description, :category_id %>

    <%= f.inputs :new_product do%>
        <%= f.input :name %>
        <%= f.input :price %>
        <%= f.input :description %>
        <%= f.input :category_id , :as => :select , :collection => Hash[Category.all.map{|c| [c.name, c.id]}] %>
    <% end %>    

  <%= f.inputs "Product images" do %>
     <%= f.fields_for :prod_images do |p| %>

         <%= p.input :photo, :as => :file, :label => "Image",:hint => p.template.image_tag(p.object.photo.url(:thumb)) %>

         <%= p.input :_destroy, :as=>:boolean, :required => false, :label => 'Remove image' ,:hint => p.object.new_record? ? p.template.image_tag(p.object.photo.url(:thumb)) : p.template.image_tag(p.object.photo.url(:thumb)) %>

     <%end%> 
  <% end %>      

  <%= f.actions do %>
     <%= f.action :submit , :as => :button %>
  <% end %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:16:41.983

我找到了解决方案。

如果您想将回形针与 active_admin 一起使用，则无法呈现外部形式，因为它无法在其中使用 has_many 关联。我的解决方案：

```
ActiveAdmin.register Product do
  form :html => { :multipart=>true } do |f|
    f.inputs :new_product  do
      f.input :name
      f.input :price
      f.input :category
      f.input :description

      f.has_many :prod_images  do |p|
        p.input :photo, :as => :file, :label => "Image",:hint => p.template.image_tag(p.object.photo.url(:thumb)) 
        p.input :_destroy, :as=>:boolean, :required => false, :label => 'Remove image'
      end
    end

    f.buttons  
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T19:33:29.823

对于来这里寻找在活动管理员编辑/新表单中显示回形针上传图像的解决方案的人来说。

```
ActiveAdmin.register Product do

  form :html => { :enctype => "multipart/form-data" } do |f|
    f.inputs do
      f.input :title
    end

    f.inputs for: :prod_images do |product_image|
      if product_image.object.new_record?
        product_image.input :image
      else
        product_image.input :image, as: :file, hint: product_image.template.image_tag(product_image.object.image.url(:thumb))
      end
    end

    f.buttons
  end 
```

这里的关键思想是使用提示属性。

# dynamics-crm-2011 - 自定义潜在客户实体动态 CRM 2011 中的功能区

> ID：11566946
> 
> 赞同：1
> 
> 时间：2012-07-19T18:18:19.853
> 
> 标签：dynamics-crm-2011

在潜在客户表单功能区中，我在 VisualRibbonEditor 的帮助下添加了两个按钮。之后我在 VisualRibbonEditor 的帮助下删除了。但是当我看到 RibbonDiffXML 时，两个按钮仍然存在，即使它们在 Ribbon 中不可见。

这是我的问题

1.  如何删除这两个按钮条目？我必须创建一个新的解决方案吗？

2.  我想添加一个新按钮并自定义 ConvertLead 功能。如果没有 VisualRibbonEditor，我该如何手动实现，即借助解决方案文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:11:55.107

The xml is just that, xml. So if you have an element in it you no longer want, edit the xml by following these steps.

1.  Create a new solution with just the lead entity in it (or if the ribbon editor created one, you can reuse that one, it's just easier to work with less xml rather than more).
2.  Open the solution zip, find the lead entity xml file, and edit it with you're favorite xml editor, deleting the elements you no longer want/need.
3.  Save your changes back to the zip file, then import the solution.

As far as editing the ribbon, [here](http://erikpool.blogspot.com/2011/10/understanding-crm-ribbon-xml-part-1.html) is a great site to get you started:

# c# - 无法加载文件或程序集：程序集可能已被篡改，或者已延迟签名但未使用正确的私钥完全签名

> ID：11566949
> 
> 赞同：9
> 
> 时间：2012-07-19T18:18:22.913
> 
> 标签：c#, asp.net

我在我的项目中使用从源代码构建的 ASP.NET 程序集。我的项目构建成功。但是当我在调试模式下开始时，我得到了异常

无法加载文件或程序集“System.Net.Http.Formatting”或其依赖项之一。无法验证强名称签名。该程序集可能已被篡改，或者它被延迟签名但未使用正确的私钥完全签名。（来自 HRESULT 的异常：0x80131045）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:11:09.100

通过从 asp web stack odata 项目的项目文件中删除以下代码行，我能够为我的 odata dll 解决此问题。

```
<Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory),Runtime.sln))\tools\WebStack.settings.targets" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T09:02:06.700

尝试从 bin 文件夹中删除 dll 并重建您的解决方案。我不知道为什么，但这为我解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T08:27:31.767

从 Bin 和 Obj/Debug 文件夹中删除文件，解决了我的问题。

# php - xpath 只在标签中抓取 HTML 注释

> ID：11566950
> 
> 赞同：1
> 
> 时间：2012-07-19T18:18:26.093
> 
> 标签：php, html, xpath, curl, comments

我有一个登录网站的 php 脚本，然后我尝试运行 xpath 查询来获取某个标签。如果我将页面保存在本地并运行 xpath，那么一切都会很好；但是，当我登录该站点并运行 xpath 时，它只返回标记底部的 html 注释。所以 - 如果我有：

```
<html>
    <body>
        something here
        <!--comment here-->
    </body>
</html> 
```

我将我的 xpath 查询指向 //html/body，它只会返回“comment here”，没有别的。

我很困惑，从来没有见过这样的事情——有什么想法吗？

编辑：这是 curl 登录后的我的 php（成功） - 这是非常标准的：

```
$file = REDACTED;
$doc = new DOMDocument();
$doc->loadHTMLFile($file);
$xpath = new DOMXpath($doc);
$elements = $xpath->query("//html/body/div[1]");

if (!is_null($elements)) {
  foreach ($elements as $element) {
    $nodes = $element->childNodes;
    foreach ($nodes as $node) {
      $out = $node->nodeValue;
    }
  }
}

echo $out; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:27:09.943

您错误地保存了节点：

```
$out = '';
foreach ($elements as $element) {
    foreach ($element->childNodes as $node) {
        $out .= $doc->saveHTML( $node);
    }
} 
```

你原来的问题是这样的：

```
$out = $node->nodeValue; 
```

在`$out`每次迭代中不断被覆盖的地方，所以你只会得到最后一个值。上面的解决方案不断地连接节点的值，所以你会得到所有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:18:07.560

XPath 2.0 提供`comment()`了访问 XML 文件中的注释的功能。只需将此函数附加到您要从中获取评论的节点。

对于以下输入 xml 片段

```
<html>
    <body>
        something here
        <!--comment here-->
    </body>
</html> 
```

XPath 看起来像

```
/html/body/comment() 
```

这应该获取您的文本`comment here`。有关更多信息，请参阅[**此**](http://www.w3.org/TR/xpath20/#id-matching-item)。

# windows - 从批处理文件中的文件名中提取字符串的第一部分，然后在 for 循环中移动文件

> ID：11566956
> 
> 赞同：0
> 
> 时间：2012-07-19T18:19:06.590
> 
> 标签：windows, file, batch-file, delimiter

我在这里有一个批处理文件：当我按下它时，StackOverflows“代码”窗口不显示任何内容，所以希望它不会破坏它：

```
@echo off
echo Moving files to respective folders.
DIR C:\ArcConverted\adam\shapefiles\ /A:-D /B > C:\ArcConverted\adam\filelist.txt
echo File start > C:\ArcConverted\adam\output.txt
FOR /f %%a IN (C:\ArcConverted\adam\filelist.txt) DO (
    FOR /f "tokens=1 delims=_" %%b IN ('%%a') do echo A:%%a B: %%b
    IF NOT EXIST C:\ArcConverted\adam\shapefiles\%%~na\ mkdir C:\ArcConverted\adam\shapefiles\%%~na\
    echo Moving file %%a into C:\ArcConverted\adam\shapefiles\%%~na\
    move C:\ArcConverted\adam\shapefiles\%%a C:\ArcConverted\adam\shapefiles\%%~na\%%b
)
pause 
```

我在 C:\ArcConverted\adam\shapefiles 中有新的前向转换 ArcGIS shapefiles 文件，它们的文件名现在是：

*   thisthing_arc.adf
*   thisthing_tic.adf
*   thisthing_shp.shp
*   thatthing_shp.shp

... 等等。

我有 83 个这些不同的对象集，每个对象集大约有 16 个文件。我正在尝试制作一个批处理脚本（是的，它必须是批处理的），它读取文件夹中的所有文件，将其放入文件中，然后读取文件列表并为每个文件创建文件夹，如果你采取删除 _ 之后的所有内容（从转换器程序将 _ 添加到其中）。我的脚本虽然不起作用。第二个 for 循环打开每个文件并读取所有内容并打印出数十万行。我似乎无法弄清楚如何使用批处理对文件名进行字符串定界（我不关心文件中的内容）。

**概括：**

我有所有属于同一个文件夹的文件集被扔到同一个文件夹中。我正在尝试以编程方式（通过批处理）从文件名（出现在_之前的所有内容）中获取集合的名称，创建该文件夹，然后将文件移动到该文件夹​​中。随着循环的进行，任何也属于该文件夹的文件也会被移到那里。

我是否朝着正确的方向前进？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:22:43.583

你肯定走在一个好的轨道上，但是你既有一些语法错误，也有一些逻辑错误。

在您的第二个 FOR 循环中，您试图解析一个字符串，但您的代码正在执行一个命令，因为您的 IN 子句用单引号引起来。你想要双引号来表示一个字符串。

您的整个逻辑从您的第二个 FOR 循环开始。您要解析的字符串是文件名，不带扩展名。所以你的 IN 子句应该是`IN ("%%~na")`. 然后在该循​​环之后，您尝试创建名为`"%%~na"`的文件夹并将文件移动到具有新文件名的文件夹`%%b`。But`%%b`不再定义，因为它不在您的第二个循环中。实际上，您想`"%%b"`在第二个循环中创建命名文件夹并将文件移动到那里。

最后，您的 FOR /F 选项存在一些问题。第一个 FOR 将在第一个空格字符处破坏名称，这不是您想要的。当然，如果您的文件名中从来没有空格，那么这不是问题。但为什么要冒险呢？此外，默认 EOL 选项`;`将忽略任何以 . 开头的文件名`;`。再次不太可能，但为什么要冒险。文件名不能包含`:`，因此这是 EOL 的好字符。

我相信下面的代码就是你要找的。

```
@echo off
echo Moving files to respective folders.
dir C:\ArcConverted\adam\shapefiles\ /A:-D /B > C:\ArcConverted\adam\filelist.txt
echo File start > C:\ArcConverted\adam\output.txt
for /f "eol=: delims=" %%a in (C:\ArcConverted\adam\filelist.txt) do (
  for /f "eol=_ tokens=1 delims=_" %%b in ("%%a") do (
    echo A:%%a B:%%b
    if not exist "C:\ArcConverted\adam\shapefiles\%%b\" mkdir "C:\ArcConverted\adam\shapefiles\%%b\"
    echo Moving file "%%a" into "C:\ArcConverted\adam\shapefiles\%%b\"
    move "C:\ArcConverted\adam\shapefiles\%%a" "C:\ArcConverted\adam\shapefiles\%%b\"
  )
)
pause 
```

但是，我会简化代码。我认为不需要 filelist.txt 文件 - 您可以使用简单的 FOR 循环而不是写入文件并使用 FOR /F 读取它。如果您只需将目录（pushd）更改为 shapefile 根目录，代码也会变得更小更简单。

最后一件事是对您尝试移动的文件进行过滤。`"_"`如果文件名不包含字符，我认为您不想使用全名创建文件夹。所以我修改后的代码明确地`"_"`在名称中查找。

```
@echo off
setlocal
pushd "C:\ArcConverted\adam\shapefiles" || exit /b
echo Moving files to respective folders.
for %%A in ("*_*.*") do (
  for /f "eol=_ tokens=1 delims=_" %%B in ("%%~nA") do (
    if not exist "%%B\" mkdir "%%B\"
    echo Moving file "%%A" into "%%B\"
    move "%%A" "%%B\"
  )
)
pause 
```

# google-app-engine - 使用 struts2 未在 Google App Engine 中加载索引文件

> ID：11566958
> 
> 赞同：1
> 
> 时间：2012-07-19T18:19:09.583
> 
> 标签：google-app-engine, struts2, tiles, action-mapping

当我尝试访问我的 struts2 tile 应用程序时出现以下错误（在谷歌应用引擎中）

没有为`[/]`与上下文路径 [] 关联的命名空间和操作名称 [] 映射的操作。- [未知位置]

下面是堆栈跟踪

堆栈跟踪

```
There is no Action mapped for namespace [/] and action name [] associated with context path []. - [unknown location]
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:500)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    org.mortbay.jetty.Server.handle(Server.java:326)
    org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我的`web.xml`文件内容是：

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>com.sbipensioner.listener.Struts2ListenerOnGAE</listener-class>
</listener>

<listener>
    <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
</listener>

<context-param>
    <param-name>tilesDefinitions</param-name>
    <param-value>/WEB-INF/tiles.xml</param-value>
</context-param>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

我不知道为什么它`index.html`默认不加载。

请指教。

问候，穆吉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T10:29:53.793

将以下空白操作添加到“/”包命名空间中的 struts.xml 文件中，当您仅尝试访问您的 url（如 appid.app.com）时，它将显示 index.html 并且不会显示错误。通常它会添加一个空白操作，应用引擎会将空白操作重定向到您的欢迎文件。

```
 <action name="" class="com.candi.actions.Dashboard" method="noAction">
        <result name="success">index.jsp</result>
    </action> 
```

让我们进一步解释。只需通过提供空白“”作为您的操作名称来添加空白操作，并将您的结果重定向到 index.php，这将解决您的问题。

# android - 正在删除的列表视图项目后面的黑条 - android

> ID：11566962
> 
> 赞同：1
> 
> 时间：2012-07-19T18:19:28.320
> 
> 标签：android, listview

我正在通过数据库中的 dailogfragment 和通过数据库的列表视图删除项目。我能够从数据库、列表视图中删除该项目，并且能够刷新列表，并从列表视图中删除已删除的项目。

但问题是我在删除项目后立即得到某种类型的黑条（已删除项目后面的背景）：http: [//i733.photobucket.com/albums/ww331/suntuu/Capture-1.png](http://i733.photobucket.com/albums/ww331/suntuu/Capture-1.png)

在图像中，您可以看到我的默认背景是白色（theme.holo.light），但在删除此黑色背景后，最后会弹出。

当我再次执行列表视图片段时，它消失了。

我已经坚持了很长时间了。

这是我的 xml 布局文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:cacheColorHint="#00000000"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list1"
        android:cacheColorHint="#00000000"
        style="@style/AndroDev"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:dividerHeight="2dp"
        android:paddingBottom="1dp"
        android:paddingTop="1dp" />

</LinearLayout> 
```

这是我的风格/androdev：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="AndroDev" parent="@android:style/Theme.Holo.Light">
        <item name="android:background">#F7F7F7</item>

    </style>

</resources> 
```

**更新：**

从我的 listviee 中删除样式后，这个问题似乎消失了，但后来我坚持使用默认背景作为列表项背景，我想自定义。

那我怎么能实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:29:00.833

试试这个：

在包含 ListView 的主 XML 中，

只需将以下属性添加到 XML 中的 ListView：-

```
 android:cacheColorHint="#00000000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:32:24.637

我也面临同样的问题，在 Activity 中为 listview 实例添加以下行解决了它

```
 listView = (ListView)findViewById(R.id.listViewMain);
      listView.setCacheColorHint(Color.TRANSPARENT); // add this line in your code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:07:14.990

所以我已经解决了。问题在于使用我自己的样式来获取列表视图项的自定义背景，这是不对的。

因此，我使用以下方法为列表视图行实现了自定义背景： [ListView item background via custom selector](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)

# matlab - 聚类和贝叶斯分类器 Matlab

> ID：11566964
> 
> 赞同：9
> 
> 时间：2012-07-19T18:19:33.907
> 
> 标签：matlab, cluster-analysis, classification, bayesian, fuzzy-c-means

所以我正处于下一步做什么的十字路口，我开始学习并在一个复杂的数据集上应用一些机器学习算法，现在我已经做到了。我从一开始的计划就是将两个可能的分类器结合起来，试图建立一个多分类系统。

但这是我卡住的地方。我选择了一个聚类算法（模糊 C 均值）（在学习了一些 K 均值样本之后）和朴素贝叶斯作为 MCS（多分类器系统）的两个候选者。

我可以独立使用两者来对数据进行分类，但我正在努力以一种有意义的方式将两者结合起来。

例如，模糊聚类捕获了几乎所有的“蓝精灵”攻击，除了通常**一个**，我不知道为什么它没有捕获这个**奇怪的球**，但我只知道它没有。其中一个集群将受到蓝精灵攻击的支配，通常我会在其他集群中找到一个蓝精灵。这就是我遇到问题场景的地方，如果我在所有不同的攻击类型（Smurf、正常、海王星......等）上训练贝叶斯分类器并将其应用于其余集群以试图找到最后一个剩下的smurf就会有很高的误报率。

我不知道如何进行，我不想将其他攻击从训练集中剔除，但我只想训练贝叶斯分类器来发现“蓝精灵”攻击。目前它被训练去尝试发现一切，在这个过程中，我认为（不确定）准确性下降了。

所以这是我在使用朴素贝叶斯分类器时的问题，你如何让它只寻找蓝精灵并将其他一切归类为“其他”。

```
 rows = 1000;
 columns = 6;

 indX = randperm( size(fulldata,1) );
 indX = indX(1:rows)';

 data = fulldata(indX, indY)

 indX1 = randperm( size(fulldata,1) );
 indX1 = indX1(1:rows)';

%% apply normalization method to every cell
%data = zscore(data);

training_data = data;
target_class = labels(indX,:)

class  = classify(test_data,training_data, target_class, 'diaglinear')
confusionmat(target_class,class) 
```

我在想的是手动将`target_class`所有正常的流量和攻击都从 smurf 更改为**other**。然后，正如我已经知道 FCM 正确分类了除一次 smurf 攻击之外的所有攻击一样，我只需要在剩余的集群上使用朴素贝叶斯分类器。

例如：

**集群 1 = 500 次 smurf 攻击**（重复此步骤可能会将 smurf 攻击的“大多数”从 1000 个样本转移到不同的集群中，因此我必须检查或迭代集群以获得最大的大小，一旦发现我可以将其从朴素贝叶斯分类器阶段）

然后我在每个剩余的集群上测试分类器（不确定如何在 matlab 中执行循环等），所以目前我必须在处理过程中手动选择它们。

```
 clusters = 4;
    CM = colormap(jet(clusters));
    options(1) = 12.0;
    options(2) = 1000;
    options(3) = 1e-10;
    options(4) = 0;
  [~,y] = max(U);
  [centers, U, objFun] = fcm(data, clusters, options); % cluster 1000 sample data rows

training_data = newTrainingData(indX1,indY); % this is the numeric data 
test_data = fulldata(indX(y==2),:); % this is cluster 2 from the FCM phase which will be classified. 
test_class = labels(indX(y==2),:); % thanks to amro this helps the confusion matrix give an unbiased error detection rate in the confusion matrix. 
 target_class = labels(indX,:) % this is labels for the training_data, it only contains the smurf attacks while everything else is classed as other 

 class  = classify(test_data,training_data, target_class, 'diaglinear')
 confusionmat(test_class,class) 
```

然后，我对剩余的每个集群重复贝叶斯分类器，寻找那个 smurf 攻击。

我的问题是，如果它将“其他”攻击错误分类为 smurf 或找不到剩余的 smurf，会发生什么情况。

我有点迷失在更好的方法上。我正在尝试选择 smurf 攻击与“其他”攻击的良好比例，因为我不想过度拟合，这在前面的问题中已经解释[过](https://stackoverflow.com/questions/11554938/naive-classifier-matlab)。

但这将花费我一些时间，因为我还不知道如何在 matlab 中将现有标签从 neptune、back、ipsweep、wareclient 攻击更改/替换为“其他”，所以我还不能测试这个理论（将到达那里） .

所以我的问题是：

1) 有没有更好的方法来发现一个难以捉摸的蓝精灵攻击。

2）我怎样才能grep target_class（标签）用“**其他**”替换所有不是蓝精灵的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:17:31.677

我将尝试部分回答您的问题。

> 1) 有没有更好的方法来发现一个难以捉摸的蓝精灵攻击。

我建议你不要尝试这个。500 分之一。这几乎显然是过度拟合数据的情况。您的分类器不能很好地概括测试数据。

> 2）我怎样才能grep target_class（标签）用“其他”替换所有不是蓝精灵的东西

为此，请尝试以下 matlab 代码。

```
clear all;
close all;
load fisheriris
IndexOfVirginica = strcmp (species, 'virginica');
IndexOfNotVirginica = IndexOfVirginica ==0;
otherSpecies = species;
otherSpecies(IndexOfNotVirginica) = {'other'};
otherSpecies 
```

# python - python: raise child_exception, OSError: [Errno 2] 没有这样的文件或目录

> ID：11566967
> 
> 赞同：20
> 
> 时间：2012-07-19T18:19:46.010
> 
> 标签：python, popen

我使用 subprocess.popen() 函数在 python 中执行命令，如下所示：

```
omp_cmd = 'cat %s | omp -h %s -u %s -w %s -p %s -X -' %(temp_xml, self.host_IP, self.username, self.password, self.port)
xmlResult = Popen(omp_cmd, stdout=PIPE, stderr=STDOUT) 
```

在 shell 中它运行良好，没有错误，但在 python 中我得到：

```
 File "/home/project/vrm/apps/audit/models.py", line 148, in sendOMP
    xmlResult = Popen(omp_cmd, stdout=PIPE, stderr=STDOUT)
  File "/usr/local/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/local/lib/python2.7/subprocess.py", line 1228, in _execute_child
    raise child_exception
  OSError: [Errno 2] No such file or directory 
```

我搜索了错误，但没有一个能解决我的问题。有谁知道这个问题的原因是什么？谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-19T18:21:07.467

如果您要将命令作为字符串传递给`Popen`并且如果这些命令在其中有其他命令的管道，则需要使用`shell=True`关键字。

我对这个`omp`命令不是特别熟悉，但这闻起来很像对 cat 的无用使用。我认为实现这一目标的更好方法是：

```
import shlex
omp_cmd = 'omp -h %s -u %s -w %s -p %s -X %s' %(self.host_IP, self.username, self.password, self.port, temp_xml)
xmlResult = Popen(shlex.split(omp_cmd), stdout=PIPE, stderr=STDOUT) 
```

或者，如果它不是对 cat 的无用使用（您确实需要通过 stdin 输入文件），您也可以使用 subprocess 来做到这一点：

```
import shlex
omp_cmd = 'omp -h %s -u %s -w %s -p %s -X -' %(self.host_IP, self.username, self.password)
with open(temp_xml) as stdin:
    xmlResult = Popen(shlex.split(omp_cmd), stdin=stdin, stdout=PIPE, stderr=STDOUT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-19T20:57:43.660

这个错误也发生在我的 tox 脚本中，结果证明 virtualenv 是用 tox 创建的，它有一个绝对路径，长度约为 96 个字符，但每当它把你的绝对“bin/pip”路径接近大约 123 个字符时，那里是一个调用错误，OSError2。

'错误：调用失败（errno 2），OSError：[Errno 2]没有这样的文件或目录'

Python：Python 2.7.6 virtualenv：15.1.0 tox：2.9.1 pip：9.0.1 ubuntu 14.04 测试运行覆盖：django(1.8-1.11) 分别使用 py27、py35 进行测试

解决方案：我首先在安装 tox 的地方创建了我的 virtualenv（带有 abs 路径 <=（96-100）字符），克隆了我的项目以用于此 tox 安装和 virtualenv，tox 现在创建了它自己的 virtualenvs，它运行良好。

希望能帮助到你。

# x11 - 将 X11 窗口的部分标记为可拖动

> ID：11566968
> 
> 赞同：1
> 
> 时间：2012-07-19T18:19:48.583
> 
> 标签：x11, xlib, window-managers, window-management

如果我想要一个未装饰的窗口（例如，我可以自己绘制装饰），有没有办法告诉当前 X11 窗口管理器一个窗口区域应该是可拖动的并由窗口管理器管理？我对低级解决方案（Xlib、XCB 或类似）感兴趣。我也在寻找尽可能标准的解决方案。

另外，我可以将窗口区域标记为代表关闭按钮吗？

我问这个是因为如果我可以在窗口的装饰上附加额外的内容会很棒。这受到 Apple 的 OS X 的启发，其中所有装饰都是普通的旧`NSView`s，并且一些（关闭按钮等）甚至可以以记录的方式访问。添加其他内容也受到 OS X 的启发，可以右键单击与窗口相关联的文档的名称（在标题栏上）并获取文档的路径。同时，即使应用程序没有响应，窗口仍然是可移动的，因此可拖动区域必须以某种方式传递给窗口管理器（即`WindowServer`，对吗？）。

因此，如果在 X11 下有一种标准方式（或广泛的 FreeDesktop.org 扩展或其他方式）可以做到这一点，我很想知道它。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:14:50.927

没办法。

X11 甚至不知道什么是窗口管理器。ICCCM 和 Freedesktop 标准没有太大区别。他们知道窗口管理器，但不强制要求任何特定的关闭和拖动窗口的方式，或者确实有执行此类操作的能力。所以没有关闭按钮或拖动角或标题栏的官方概念，也没有用于自定义定义此类事物的 API。

# pcap - 如何使用 pcap 文件绘制数据包与秒数

> ID：11566970
> 
> 赞同：0
> 
> 时间：2012-07-19T18:19:52.787
> 
> 标签：pcap, tshark

使用 tshark 我尝试生成一个 dat 文件。以下是我用来使用 tshark 生成字段的命令：

```
$ C:\Program Files (x86)\Wireshark>tshark.exe -r "C:\swp-final-30.0.0.13.pcap"  -T
 fields -e frame.number -e frame.time  -e  eth.src -e eth.dst -e ip.src -e ip.ds
t -e ip.proto -E header=y -E separator=, -E quote=d -E occurrence=f > C:\thirty.
dat

Tshark generates the output file in this format.
409     Jul 14, 2012 17:50:19.435836000 00:04:23:b7:3e:a3       00:04:23:b7:1a:0b       20.0.0.13       30.0.0.13       6
410     Jul 14, 2012 17:50:19.436084000 00:04:23:b7:3e:a3       00:04:23:b7:1a:0b       20.0.0.13       30.0.0.13       6
411     Jul 14, 2012 17:50:19.436110000 00:04:23:b7:1a:0b       00:04:23:b7:3e:a3       30.0.0.13       20.0.0.13       6 
```

1.  我想绘制每秒数据包数的图表。如何使用上述数据计算特定流的数据包数？
2.  如何为`ip.dst== 30.0.0.13`大型 pcap 文件匹配的特定流生成日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:02:18.467

您可以从时间 0（第一个数据包的时间）开始
计算数据包的数量，直到时间增加一秒

每秒重复上述步骤，您将得到否。每秒数据包数

# facebook - FB API：创建画布

> ID：11566971
> 
> 赞同：-1
> 
> 时间：2012-07-19T18:20:02.453
> 
> 标签：facebook, facebook-graph-api, facebook-canvas

如何通过 API 创建（新）画布并将画布附加到 Facebook 页面？我在 Facebook 图表文档中找不到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:32:02.507

您可以通过向以下地址发出请求来编辑应用程序的`namespace`和`canvas_url`/属性：`secure_canvas_url``POST`

[https://graph.facebook.com/APPLICATION_ID](https://graph.facebook.com/APPLICATION_ID)

[在文档中查找](https://developers.facebook.com/docs/reference/api/application/)[对象](https://developers.facebook.com/docs/reference/api/application/)的其他信息[`Application`](https://developers.facebook.com/docs/reference/api/application/)

# java - Java GUI 自动调整大小

> ID：11566974
> 
> 赞同：2
> 
> 时间：2012-07-19T18:20:16.600
> 
> 标签：java, swing, user-interface, resize

这是绘制 GUI 的地方（注意，该类扩展了 JFrame）。

```
public Cache() {
    SubstanceColorChooserUI col = new SubstanceColorChooserUI();
    while (mode == 0);
    setResizable(false);
    setTitle("Cache");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 483, 374);
    setLocationRelativeTo(null);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(new BorderLayout());

    textField = new JTextField();
    textField.setBounds(10, 11, 328, 20);
    contentPane.add(textField);
    textField.setColumns(10);

    JButton btnLoadCache = new JButton("Load cache");
    btnLoadCache.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            try {
                String loc = textField.getText();
                if (loc.equals("")) {
                    JOptionPane.showMessageDialog(Cache.this, "Please specify a location for the cache.", "Unable to load", JOptionPane.ERROR_MESSAGE);
                    return;
                }
                if (!loc.endsWith("\\"))
                    loc = loc + "\\";
                cache = new Store(loc);
                loadImages();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(Cache.this, "Cache failed to initialize.\n" + e.getMessage(), "Unable to load", JOptionPane.ERROR_MESSAGE);
            }
        }
    });
    btnLoadCache.setBounds(351, 9, 112, 23);
    contentPane.add(btnLoadCache);

    JSplitPane splitPane = new JSplitPane();
    splitPane.setDividerLocation(150);
    splitPane.setContinuousLayout(true);
    splitPane.setBounds(10, 44, 453, 279);
    contentPane.add(splitPane);

    JPanel panellie = new JPanel();
    panellie.setLayout(new BorderLayout(0, 0));
    panel = new ImagePanel(null);

    scrollPane_1 = new JScrollPane();
    panellie.add(scrollPane_1, "Center");

    scrollPane_1.setViewportView(panel);
    splitPane.setRightComponent(panellie);

    JPanel panel_1 = new JPanel();
    splitPane.setLeftComponent(panel_1);
    panel_1.setLayout(new BorderLayout(0, 0));

    JScrollPane scrollPane = new JScrollPane();
    panel_1.add(scrollPane, BorderLayout.CENTER);

    model = new DefaultListModel<ListedImage>();
    list = new JList<ListedImage>(model);
    list.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent arg0) {
            if (arg0.getValueIsAdjusting())
                return;
            ListedImage img = list.getModel().getElementAt(list.getSelectedIndex());
            panel.setImage(img.getImage());
        }
    });
    scrollPane.setViewportView(list);

    progressBar = new JProgressBar();
    progressBar.setStringPainted(true);
    progressBar.setDoubleBuffered(true);
    progressBar.setBounds(10, 328, 453, 14);
    contentPane.add(progressBar);

} 
```

当我将 setResizeable 设置为 true 并开始将程序拖得越来越小时，我该如何做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T18:23:19.917

使用布局管理器而不是为每个组件设置边界。

它会因程序而异，您希望组件如何移动。

看看[这个](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，并尝试看看哪种布局最适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:28:56.903

**1.**您可以使用`setSize()`方法来设置您的**JFrame大小**。

**2.**您可以通过设置来选择使**JFrame的大小固定**`isResizable(false)`。

**3.**使用 NetBeans团队2005年**开发的GroupLayout，**现在免费**试用Google提供的Windows Builder Pro 。**在这里你可以选择GroupLayout，然后将你的组件拖放到JFrame中，即使你想要你也可以手动编辑GUI代码。

# ios - Sprit Sheets Vs 动画的 PNG 文件数组

> ID：11566980
> 
> 赞同：2
> 
> 时间：2012-07-19T18:20:40.020
> 
> 标签：ios, uiimageview, sprite-sheet

我通过将一组 UIImage 对象传递给下面列出的动画方法，在我的 iOS 应用程序中使用 UIImageView.animationImages 制作了很多动画。当前我的 UIImage 对象数组包含单独的 PNG 文件。我知道我可以通过使用 & 传递 Sprite Sheet 而不是传递一组单独的 PNG 文件来制作类似的动画。一个比另一个有什么优势，或者 Sprite Sheet 用于不同的目的？

```
- (void) startImageViewAnimation:(UIImageView *)imageView WithImages:(NSArray*)imageArray orBuildArrayWithImage:(NSString *)imageName duration:(CGFloat)duration repeatCount:(NSInteger)repeatCount soundFile:(NSString *)soundFile stopSoundAfterDuration:(CGFloat) stopSoundDuration
{

    if([imageName length] != 0)
    {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        UIImage *image;
        int index = 1;
        NSString *string;
        do
        {
            string = [NSString stringWithFormat:@"%@%02d.png", imageName, index++];
            image = [UIImage imageNamed:string];
            if(image)
                [array addObject:image];
        } while (image != nil);

        imageView.animationImages = array;
        [array release];
    }
    else
    {
        imageView.animationImages = imageArray;
    }
    imageView.animationDuration = duration;
    imageView.animationRepeatCount = repeatCount;
    [imageView startAnimating];

    if([soundFile length] != 0)
    {
        [self loadSoundEffectAudio:soundFile];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T09:37:06.243

精灵表仅适用于非常小的动画，其中动画的所有帧都可以放入加载到内存中的 1 个“表”中，然后使用 diff x,y 偏移来访问不同的帧数据。如果您有更长的动画或更大的动画，那么精灵表就没有任何价值。过去，角色精灵相当小，因此其中很多可以放在一张纸上，然后可以快速制作像拳击这样的短动画，因为不需要将内存从一帧交换到下一帧。除了最小的小动画之外，你不应该使用 UIImageView.animationImages ，因为它会耗尽内存并在与合理大小的中等大小动画一起使用时使你的设备崩溃。有关更好方法的更多详细信息可以在我对这个问题的回答中找到[如何在 iOS 中高效地使用图像制作动画](https://stackoverflow.com/questions/8112698/how-to-do-animations-using-images-efficiently-in-ios/8113027#8113027)

# ruby-on-rails - 从类型 Rails 中对记录进行排序

> ID：11566981
> 
> 赞同：0
> 
> 时间：2012-07-19T18:20:47.073
> 
> 标签：ruby-on-rails, ruby, sorting, haml

嗨，我试图在布局中没有控制器的情况下对输出数据进行排序，我使用 devise、formtastic 和其他一些 gem 来制作登录和用户界面

问题是我有 3 个表 Products、Carted_products 和 Users，我想在视图中按 Product_id 显示 Carted_products，我已经通过表中的记录显示它们，但我希望它对它们进行排序示例：

我有 3 个不同的订单，其中 2 个具有相同的 product_id，它们各有：

1.  数量
2.  Product_id
3.  用户身份

我可以通过模型关联中的 carted_product.product 访问价格

这是我的视图代码：

> %t 正文
> 
> > ```
> >  - if user_signed_in?
> >        - current_user.carted_products.each do |f|
> >          - @total = @total + f.carted_product_price(f.ammount, f.product.price)
> >          %tr
> >            %td.carted_name
> >              = f.product.name
> >            %td.carted_ammount
> >              = f.ammount
> >            %td.carted_price  
> >              $ 
> >              = f.carted_product_price(f.ammount, f.product.price) 
> > ```

carted_product_price 只接收产品的数量和价格并返回乘以的价格

所以它打印表中的所有行如果不同的记录形成相同的产品并不重要，我只想将它们加入到一个表行输出中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T23:08:43.480

我认为您想遍历产品，而不是购物车。就个人而言，我会将大部分逻辑转移到模型中。

```
class Product
  ...
  def carted_products_total_amount
    carted_products.inject(0) {|acc, amount| acc + amount }
  end

  def total
    carted_product_price(carted_products_total_amount, price)
  end
end 
```

然后在视图中：

```
%tbody
   - current_user.products.each do |product|
     - @total = @total + product.total
     %tr
       %td.carted_name
         = product.name
       %td.carted_amount
         = product.carted_products_total_amount
       %td.carted_price  
         $ 
         = product.total 
```

此外，“金额”的正确拼写只包含一个“m”字符。;)

# python - Python：从 EXIF 中提取西里尔文字符串

> ID：11566983
> 
> 赞同：5
> 
> 时间：2012-07-19T18:20:57.197
> 
> 标签：python, string, unicode, encoding, exif

我是 Python 的一个完整的初学者，并且想通过实践开始学习它。也就是说，我很想纠正我拥有的一大堆家庭照片中的一些 EXIF 信息。首先，我想正确地从 JPEG 文件中获取这些信息。

其中一些有一个用 EXIF 写的标题。它可以通过例如获得

```
import pyexiv2
metadata = pyexiv2.ImageMetadata(filename)
metadata.read()
title = metadata['Exif.Image.XPTitle'] 
```

我已经到了这一步。现在问题来了。一些标题包含西里尔字母。如果我这样做，`print title.human_value`我会得到例如

```
`ÐœÐ¸Ð»Ð¾Ð¹ ÐœÐ°Ð¼ÑƒÐ»Ðµ Ð¾Ñ‚ ÐœÐ°Ð¹Ð¸, 11 ÑÐ½Ð²Ð°Ñ€Ñ 1944.` 
```

而与`print title`，它是

```
<Exif.Image.XPTitle [Byte] = 28 4 56 4 59 4 62 4 57 4 32 0 28 4 48 4 60 4 67 4 59 4 53 4 32 0 62 4 66 4 32 0 28 4 48 4 57 4 56 4 44 0 32 0 49 0 49 0 32 0 79 4 61 4 50 4 48 4 64 4 79 4 32 0 49 0 57 0 52 0 52 0 46 0 0 0> 
```

我希望看到的实际字符串是

```
Милой Мамуле от Майи, 11 января 1944. 
```

这似乎是一个 unicode 问题，但是在尝试了在这里和其他地方找到的十几种不同的方法之后，我无法应对它。是否可以在控制台中看到俄语字母？我在 Windows 7（英文）上使用 python(xy)，所以我的 IDE 是 spyder2。只是默认安装，我在其中添加了 pyexiv2。蒂亚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:44:41.710

字节为 UTF-16。

在 Python 3 中：

```
>>> b = [28, 4, 56, 4, 59, 4, 62, 4, 57, 4, 32, 0, 28, 4, 48, 4, 60, 4, 67, 4, 59, 4, 53, 4, 32, 0, 62, 4, 66, 4, 32, 0, 28, 4, 48, 4, 57, 4, 56, 4, 44, 0, 32, 0, 49, 0, 49, 0, 32, 0, 79, 4, 61, 4, 50, 4, 48, 4, 64, 4, 79, 4, 32, 0, 49, 0, 57, 0, 52, 0, 52, 0, 46, 0, 0, 0]
>>> bytes(b).decode("utf-16")
'Милой Мамуле от Майи, 11 января 1944.\x00' 
```

在 Python 2 中：

```
>>> b = [28, 4, 56, 4, 59, 4, 62, 4, 57, 4, 32, 0, 28, 4, 48, 4, 60, 4, 67, 4, 59, 4, 53, 4, 32, 0, 62, 4, 66, 4, 32, 0, 28, 4, 48, 4, 57, 4, 56, 4, 44, 0, 32, 0, 49, 0, 49, 0, 32, 0, 79, 4, 61, 4, 50, 4, 48, 4, 64, 4, 79, 4, 32, 0, 49, 0, 57, 0, 52, 0, 52, 0, 46, 0, 0, 0]
>>> "".join(chr(c) for c in b).decode("utf-16")
u'\u041c\u0438\u043b\u043e\u0439 \u041c\u0430\u043c\u0443\u043b\u0435 \u043e\u04
42 \u041c\u0430\u0439\u0438, 11 \u044f\u043d\u0432\u0430\u0440\u044f 1944.\x00' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:51:22.010

我认为 title.human_value 数据采用 UTF-8 格式，已经从标题的原始 UTF-16 字节解码。

在 python shell 中，在 OSX 的终端窗口中运行：

```
>>> # this should be the same as your title.human_value:
>>> print ''.join( chr(x) for x in [208, 156, 208, 184, 208, 
              187, 208, 190, 208, 185, 32, 208, 156, 208, 
              176, 208, 188, 209, 131, 208, 187, 208, 181, 
              32, 208, 190, 209, 130, 32, 208, 156, 208, 
              176, 208, 185, 208, 184, 44, 32, 49, 49, 32, 
              209, 143, 208, 189, 208, 178, 208, 176, 209, 
              128, 209, 143, 32, 49, 57, 52, 52, 46])

Милой Мамуле от Майи, 11 января 1944. 
```

您的控制台可能不支持西里尔字符。您可以尝试将命令提示符中的字体设置为“Lucida Console”——与 cmd 默认使用的历史位图字体相比，更现代的矢量字体更有可能正确支持它。

# javascript - 如何将变量从 html 表单传递到 .js 文件？

> ID：11566984
> 
> 赞同：2
> 
> 时间：2012-07-19T18:20:59.360
> 
> 标签：javascript, html, css

这是我的代码

文件 external.js：

```
var TRange=null;

function findString (str) {
 if (parseInt(navigator.appVersion)<4) return;
 var strFound;
 if (window.find) {

  // CODE FOR BROWSERS THAT SUPPORT window.find

  strFound=self.find(str);
  if (!strFound) {
   strFound=self.find(str,0,1);
   while (self.find(str,0,1)) continue;
  }
 }
 else if (navigator.appName.indexOf("Microsoft")!=-1) {

  // EXPLORER-SPECIFIC CODE

  if (TRange!=null) {
   TRange.collapse(false);
   strFound=TRange.findText(str);
   if (strFound) TRange.select();
  }
  if (TRange==null || strFound==0) {
   TRange=self.document.body.createTextRange();
   strFound=TRange.findText(str);
   if (strFound) TRange.select();
  }
 }
 else if (navigator.appName=="Opera") {
  alert ("Opera browsers not supported, sorry...")
  return;
 }
 if (!strFound) alert ("String '"+str+"' not found!")
 return;
} 
```

文件搜索.html：

```
<html>
<head></head>
<title>Search</title>
<body>
<form name="input" action = "external.js">
Search for: <input type="text" name="keytext" /><br />
</form>
<p> You can search this text. Search the text again</p>
</body>
</html> 
```

我正在寻找一种方法来修改 HTML 文件的表单部分，以便它可以调用外部 JavaScript (external.js) 并传递参数。参数将是输入框中的文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:26:23.267

在您的 search.html 中添加对 javascript 文件的引用。像这样

```
<script src="external.js" type="text/javascript"></script> 
```

然后你可以像这样调用javascript文件中的函数

```
<input type="text" name="keytext" onClick='findString("test")'/> 
```

在这个例子中，你将把字符串“test”传递给你的函数 findString

编辑：您也可以使用其他事件`onblur`，这完全取决于您何时想要触发事件。

希望这可以帮助。

# c++ - QPainter 初始化画家并使用它

> ID：11566987
> 
> 赞同：2
> 
> 时间：2012-07-19T18:21:20.367
> 
> 标签：c++, qt-creator, qpainter

我创建了一个名为 Painter 的类，并`QPainter`在构造函数中创建了 p`QMainWindow`作为参数传递。

所以在 mainwindow.hi 中添加了：

```
protected:
    void paintEvent(QPaintEvent *e);

private:
    Ui::MainWindow *ui; // Created by the QT
    Painter* p; 
```

在 mainwindow.cpp 我添加

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    p=new Painter(this);
} 
```

和

```
void MainWindow::paintEvent(QPaintEvent *e)
{
    p->render(this);
} 
```

画家.h

```
#ifndef PAINTER_H
#define PAINTER_H
#include <QtCore>
#include <QtGui>

class Painter
{
private:
    QPainter* painter;
    bool init;

public:
    Painter(QMainWindow* m);
    ~Painter();

    void render(QMainWindow* m);
};

#endif // PAINTER_H 
```

和画家.cpp

```
#include "painter.h"

Painter::Painter(QMainWindow* m)
{
    painter=new QPainter(m);
    //init=false;
}

void Painter::render(QMainWindow* m)
{
    painter->drawLine(10, 3,123, 909);
} 
```

它没有画出任何东西。

如果我做

```
void Painter::render(QMainWindow* m)
{
    painer->begin(m);
    painter->drawLine(10, 3,123, 909);
} 
```

它渲染线并在 2-3 秒后关闭

让它发挥作用的唯一方法就是做

```
void Painter::render(QMainWindow* m)
{
    QPainter p(m);
    p.drawLine(10, 3,123, 909);
} 
```

但是在每一帧上初始化 p 似乎很愚蠢，它就是这样工作的。有一种方法可以只初始化一次屏幕或让开始工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:04:36.700

解决了

```
painter->begin(this->m);
painter->drawLine(10, 2, 1232, 1222);
painter->end(); 
```

这对我来说似乎很愚蠢，但它比在每一帧上声明它要好。如果有人有更好的主意。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T20:53:15.853

你没有使用`QPainter`它的本意。本质上， a`QPainter`是用来创建的

```
QPainter p(this); 
```

**在**绘画事件处理程序中。如果需要，您仍然可以使用指针传递画家，但如果您使用太多指向`QPainter`.

我的理解是，只有在发生绘画事件时，画家才能正确初始化，这就是为什么您的初始化`Painter::Painter(QMainWindow* m)`会产生非功能性的`QPainter`.

# validation - pos absolute jquery validationengine v2.5.5 自定义错误信息不起作用

> ID：11566991
> 
> 赞同：1
> 
> 时间：2012-07-19T18:21:29.600
> 
> 标签：validation, jquery-validate

因此，显然 pos absolute 为您提供了一种使用他的 jquery 验证引擎脚本显示自定义错误消息的方法，但我无法让它工作。根据他在[http://posabsolute.github.com/jQuery-Validation-Engine/#options/custom_error_messages](http://posabsolute.github.com/jQuery-Validation-Engine/#options/custom_error_messages)上的文档，他提供了一个如何实现的示例。为简单起见，我将其实现如下..

`$('#myform').validationEngine('attach', {'custom_error_messages' : {'#menubuttontext' : { 'required': { 'message': "This is a custom message." }}}} );`

对于以下表单域...

`<form action="" name="myform" id="myform" method="post" > <input type="text" name="menubuttontext" id="menubuttontext" class="validate[required]" data-tooltip-options="{&quot;position&quot;:&quot;right&quot;}" value="" size="10" > <input type="submit" name="submit" value="submit" < / form >`

提交上述表单时，我收到默认消息“这是必填字段”，而不是我正在尝试实现的自定义消息“这是自定义消息”。有没有人能让这个工作？我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:21:56.113

尝试这个..

```
<script>
        $(document).ready(function(){
            // binds form submission and fields to the validation engine
                $("#myform").validationEngine({
                'custom_error_messages': {
                    // Custom Error Messages for Validation Types
                    'required': {
                        'message': "your own custom message"
                    }
                }
                ,validationEventTrigger: 'submit'
            });
        }); 
    </script> 
```

“validationEventTrigger”选项将确保消息提示仅在表单提交后显示，而不是在相应输入字段的 onblur 事件期间显示。

即使我在验证引擎示例中也遇到了同样的问题。了解验证引擎如何工作的一个非常好的方法是浏览 posabsolute ValidationEngine 库包中的演示文件。

# bash - bash - 用户输入 - 变量

> ID：11566998
> 
> 赞同：0
> 
> 时间：2012-07-19T18:21:53.580
> 
> 标签：bash, if-statement, user-input

说我有类似的东西

```
if [[ "$age" = "12" ]]; then
    "$age" = "twelve"
fi 
```

这仍然返回数字本身。我怎样才能让它变成十二？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T18:24:55.217

您分配变量的语法是错误的。您不能在“=”周围有空格，并且分配的变量不应使用“$”扩展：

```
age="twelve" 
```

以下是学习基础知识和 bash 语法的良好指南：http: [//mywiki.wooledge.org/BashGuide/](http://mywiki.wooledge.org/BashGuide/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T18:24:25.013

这个应该可以的。

```
if [[ "$age" = "12" ]]; then
    age="twelve"
fi 
```

[阅读 bash 中的变量赋值。](http://tldp.org/LDP/abs/html/varassignment.html)