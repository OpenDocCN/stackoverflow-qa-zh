# StackOverflow 问答 10120000-10120999

# objective-c - iOS - 从 HTML 内容创建多页 PDF

> ID：10120000
> 
> 赞同：10
> 
> 时间：2012-04-12T08:27:35.650
> 
> 标签：objective-c, ios, pdf-generation, multipage

我有一个很长的 html 页面，想将其转换为多页 PDF 文件。

我已按照 [苹果](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html)和[此处提供的说明进行操作 - 如何](https://stackoverflow.com/a/3490719/401355)为给定的字符串内容制作多页 PDF。

但是格式化 NSString（使用一些类似的数据）比创建 html 页面要困难。我已经创建了这个 html 并在 UIWebView 中显示它。

现在我想从这个 HTML 创建一个 PDF 到一个**多页**PDF 文件。

我使用的代码可以创建单个 PDF。

```
- (void)createPDFfromUIView:(UIWebView *)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // 创建一个可变数据对象，用于使用二进制数据进行更新，例如字节数组
    NSMutableData *pdfData = [NSMutableData 数据];

    // 将 pdf 转换器指向可变数据对象和要转换的 UIView
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // 将矩形绘制到视图中，因此这由 UIGraphicsBeginPDFContextToData 捕获

    [aView.layer renderInContext:pdfContext];

    // 移除 PDF 渲染上下文
    UIGraphicsEndPDFContext();

    // 从 iOS 设备检索文档目录
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // 指示可变数据对象将其上下文写入磁盘上的文件
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
}

```

任何人都可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T13:32:32.967

我根据我发现的每一个好的建议创建了一个类。我一直在挖掘很多东西，我希望我的课程能为任何试图直接从一些 HTML 源创建多页 PDF 的人提供一些好的开始。

你会在这里找到完整的代码和一些基本的示例代码：[https ://github.com/iclems/iOS-htmltopdf](https://github.com/iclems/iOS-htmltopdf)

我遇到了和你一样的问题，我的要求是： - 完整的 PDF（真实文本，没有位图） - 智能多页（与每 X 像素切割一个全高 Web 视图相比......）

因此，我使用的解决方案非常好，因为它使用了 iOS 用来拆分页面进行打印的相同工具。

让我解释一下，我基于 Web 视图打印格式化程序设置了一个 UIPrintPageRenderer（第一个提示）：

```
UIPrintPageRenderer *render = [[UIPrintPageRenderer alloc] init];

[render addPrintFormatter:webView.viewPrintFormatter startingAtPageAtIndex:0];

CGRect printableRect = CGRectMake(self.pageMargins.left,
                              self.pageMargins.top,
                              self.pageSize.width - self.pageMargins.left - self.pageMargins.right,
                              self.pageSize.height - self.pageMargins.top - self.pageMargins.bottom);

CGRect paperRect = CGRectMake(0, 0, self.pageSize.width, self.pageSize.height);

[render setValue:[NSValue valueWithCGRect:paperRect] forKey:@"paperRect"];
[render setValue:[NSValue valueWithCGRect:printableRect] forKey:@"printableRect"];

NSData *pdfData = [render printToPDF];

[pdfData writeToFile: self.PDFpath  atomically: YES]; 
```

同时，我在 UIPrintPageRenderer 上创建了一个类别来支持：

```
-(NSData*) printToPDF
{
    [self doNotRasterizeSubviews:self.view];

    NSMutableData *pdfData = [NSMutableData data];

    UIGraphicsBeginPDFContextToData( pdfData, CGRectZero, nil );

    [self prepareForDrawingPages: NSMakeRange(0, self.numberOfPages)];

    CGRect bounds = UIGraphicsGetPDFContextBounds();

    for ( int i = 0 ; i < self.numberOfPages ; i++ )
    {
        UIGraphicsBeginPDFPage();

        [self drawPageAtIndex: i inRect: bounds];
    }

    UIGraphicsEndPDFContext();

    return pdfData;
} 
```

# iphone - ASIHTTPRequest - 从相机胶卷上传文件

> ID：10120001
> 
> 赞同：1
> 
> 时间：2012-04-12T08:27:36.730
> 
> 标签：iphone, objective-c, ios, ipad, asihttprequest

我目前需要将大文件从 iDevice 上传到服务器 API。为此，我尝试使用 ASIHTTPRequest 库，因为它自动支持在排队的块中上传大文件（在此之前，我只是一次创建了一个包含整个文件字节的 NSData 实例并将其附加到 POST 消息中，但这会导致由于 RAM 使用量过多，应用程序在较大的文件上崩溃）。

问题是当您需要上传文件并将文件添加到 HTTP Post 消息时，这是您需要使用的语法：

```
[theUploadRequest setFile:@"" forKey:@"videoupload"]; 
```

setFile 需要字符串格式的文件路径。我目前遇到的问题是，您似乎不允许简单地从不在您的应用程序沙箱中的文件中获取文件路径？因为我需要上传一个不在我的应用程序中但在标准相机胶卷之外的文件。

我试图进行这个快速测试，看看我是否可以创建一个 NSData 对象并用相机胶卷中的文件中的数据填充它，并提供这样的路径：

```
NSData *testData = [NSData dataWithContentsOfURL:theContent.defaultRepresentation.url];
NSLog(@"THE SIZE OF THE TEST DATA: %i", testData.length); 
```

请注意，“theContent”是 ALAsset 的一个实例，并且是从相机胶卷中检索到的文件。结果只是长度为0，我想这意味着你不能简单地这样做。

有没有办法解决？还是我必须以某种方式将视频文件导入应用程序的沙箱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:58:12.447

所以如果我理解正确，你想直接从相机胶卷上传东西吗？根据[文档](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/PickinganItemfromthePhotoLibrary.html)，我会说您需要的重要代码是：

```
NSString *filePath = [[info objectForKey:
                UIImagePickerControllerMediaURL] path]; 
```

信息字典被传递给您的媒体选择器的代表：

```
- (void) imagePickerController: (UIImagePickerController *) picker
        didFinishPickingMediaWithInfo: (NSDictionary *) info; 
```

然后，您应该能够`filePath`在调用`setFile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:17:34.690

看看[这里](https://stackoverflow.com/questions/4545982/getting-video-from-alasset)可能你会发现一些有用的东西。

希望这可以帮助。

编辑：对于更简单的事情，您可以使用此[答案中发布的代码位](https://stackoverflow.com/questions/8791049/get-video-nsdata-from-alasset-url-ios)

暗示您需要在上传文件之前将文件复制到某个地方，尤其是在文件很大的情况下。

# iphone - 如何使用代码更改显示名称

> ID：10120002
> 
> 赞同：2
> 
> 时间：2012-04-12T08:27:41.250
> 
> 标签：iphone, objective-c, xcode, dynamic

我想从应用程序中动态更改显示名称。有办法吗？我不想使用.plist。我想与应用程序中的 xcode 一起使用。谢谢

${PRODUCT_NAME} 我如何用代码调用这个值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T08:32:04.967

应用名称在**应用的 info.plist**文件中定义。

那进来`Main Bundle`..和`iOS does not allow anything to be written and updated in Main Bundle..`

因此，您不能以编程方式更改具有应用程序名称的应用程序 info.plist 的内容...捆绑标识符 ..etc

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T08:51:49.187

不，这是不可能的。一旦安装在 iPhone 上，Info.plist 和应用程序包中的所有内容都是只读的。

添加以下代码获取产品名称

```
NSDictionary *infoPList = [[NSBundle mainBundle] infoDictionary];
NSString *appName = [infoPList objectForKey:@"CFBundleDisplayName"]; 
```

appName 是“Bundle display name”或 Product Name 的值

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T08:31:57.660

我不相信。

您可以对其进行*本地化*——即，根据使用的语言显示不同的名称——但我认为您不能动态更改名称。这可能是一件好事......如果被滥用，它可能会变得非常混乱。

# c# - c# FTP到FileZilla Server文件名保存问题

> ID：10120006
> 
> 赞同：0
> 
> 时间：2012-04-12T08:28:17.183
> 
> 标签：c#, filezilla

每当我使用此代码时，它都会上传 jpeg，但 jpeg 名称`STOR`在服务器上没有扩展名。

关于为什么会发生这种情况或从 C# 桌面应用程序保存到 FileZilla FTP 服务器时如何更改文件名的任何想法？

这是基本代码，名称已更改以保护无辜者；）

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("username", "password");
client.BaseAddress = "ftp://mysite.com";
client.UploadFile(WebRequestMethods.Ftp.UploadFile, "C:\mypics\pic1.jpg"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:40:25.207

@sgmoore 回答了这个问题。您只需要正确使用方法：

```
client.UploadFile("pic1.jpg", "C:\mypics\pic1.jpg"); 
```

第一个参数是远程文件名，第二个是本地文件的路径。

您还可以在 .net 中尝试其他一些 ftp 客户端实现（无论如何 FTP 在 .NET 标准库中的实现很糟糕），我使用过[ftplib](http://ftplib.codeplex.com/)，它运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:55:20.940

尝试

```
client.UploadFile(remoteName, WebRequestMethods.Ftp.UploadFile , @"C:\mypics\pic1.jpg"); 
```

WebRequestMethods.Ftp.UploadFile 是一个字符串，其值恰好是 STOR，因此编译器假设您正在使用 client.UploadFile(remoteName, localName) 重载，这就是您的文件被命名为 STOR 的原因

# python - 从 NumPy 数组中删除一个值

> ID：10120008
> 
> 赞同：5
> 
> 时间：2012-04-12T08:28:28.227
> 
> 标签：python, arrays, numpy

我正在尝试仅包含 NumPy 数组中的零的所有行。例如，我想`[0,0]`从

```
n = np.array([[1,2], [0,0], [5,6]]) 
```

并留下：

```
np.array([[1,2], [5,6]]) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T08:48:15.533

要从 numpy 表中删除第二行：

```
import numpy
n = numpy.array([[1,2],[0,0],[5,6]])
new_n = numpy.delete(n, 1, axis=0) 
```

要删除仅包含 0 的行：

```
import numpy
n = numpy.array([[1,2],[0,0],[5,6]])
idxs = numpy.any(n != 0, axis=1) # index of rows with at least one non zero value
n_non_zero = n[idxs, :] # selection of the wanted rows 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T09:06:35.553

如果要删除任何只包含零的行，我能想到的最快方法是：

```
n = numpy.array([[1,2], [0,0], [5,6]])

keep_row = n.any(axis=1)  # Index of rows with at least one non-zero value
n_non_zero = n[keep_row]  # Rows to keep, only 
```

这比 Simon 的答案运行得快得多，因为`n.any()`一旦遇到任何非零值就停止检查每一行的值（在 Simon 的答案中，每行的所有元素首先与零进行比较，这会导致不必要的计算）。

* * *

这是答案的概括，如果您需要删除具有特定值的行（而不是仅删除仅包含零的行）：

```
n = numpy.array([[1,2], [0,0], [5,6]])

to_be_removed = [0, 0]  # Can be any row values: [5, 6], etc.
other_rows = (n != to_be_removed).any(axis=1)  # Rows that have at least one element that differs
n_other_rows = n[other_rows]  # New array with rows equal to to_be_removed removed. 
```

请注意，此解决方案并未完全优化：即使 的第一个元素`to_be_removed`不匹配，剩余的行元素`n`也将与 的元素进行比较`to_be_removed`（如西蒙的回答）。

我很想知道是否有一个简单有效的 NumPy 解决方案来解决删除具有特定值的行的更普遍问题。

使用[cython](http://docs.cython.org/src/quickstart/cythonize.html)循环可能是一个快速的解决方案：对于每一行，只要该行中的一个元素与`to_be_removed`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T08:49:52.087

You can use [`numpy.delete`](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.delete.html) to remove specific rows or columns.

For example:

```
n = [[1,2], [0,0], [5,6]]

np.delete(n, 1, axis=0) 
```

The output will be:

```
array([[1, 2],
       [5, 6]]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-04T04:01:46.853

根据值删除，这是一个Object。
这样做：

```
>>> n
array([[1, 2],
       [0, 0],
       [5, 6]])
>>> bl=n==[0,0]
>>> bl
array([[False, False],
       [ True,  True],
       [False, False]], dtype=bool)
>>> bl=np.any(bl,axis=1)
>>> bl
array([False,  True, False], dtype=bool)
>>> ind=np.nonzero(bl)[0]
>>> ind
array([1])
>>> np.delete(n,ind,axis=0)
array([[1, 2],
       [5, 6]]) 
```

# installation - 安装 libaio-dev 时遇到问题

> ID：10120009
> 
> 赞同：0
> 
> 时间：2012-04-12T08:28:40.643
> 
> 标签：installation, package, debian, apt

这是我得到的错误代码。我正在使用薄荷 Debian 版

apt-get 安装 libaio-dev

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following NEW packages will be installed:
  libaio-dev
0 upgraded, 1 newly installed, 0 to remove and 983 not upgraded.
18 not fully installed or removed.
N    eed to get 0 B/25.5 kB of archives.
After this operation, 143 kB of additional disk space will be used.
(Reading database ... 170878 files and directories currently installed.)
Unpacking libaio-dev (from .../libaio-dev_0.3.109-2_amd64.deb) ...
dpkg: error processing /var/cache/apt/archives/libaio-dev_0.3.109-2_amd64.deb (--unpack):
 trying to overwrite '/usr/share/man/man2/io_getevents.2.gz', which is also in package manpages-dev 3.28-1
configured to not write apport reports
                                      Processing triggers for man-db ...
Errors were encountered while processing:
 /var/cache/apt/archives/libaio-dev_0.3.109-2_amd64.deb
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:09:08.397

```
sudo apt-get remove manpages-dev
sudo apt-get install libaio-dev manpages-dev 
```

# c# - NHibernate 中的合成类

> ID：10120011
> 
> 赞同：0
> 
> 时间：2012-04-12T08:28:52.547
> 
> 标签：c#, nhibernate, nhibernate-mapping

我的数据库中有许多表，称为

```
UserMatchCriteria
UserMatchLifestyle
UserHobby 
```

现在前两个表的每个用户 ID 有一个单行条目，但第三个表可以包含 0 到 100 个条目，具体取决于用户选择的爱好。

我希望能够在 C# 代码中拥有一个名为 UserSearchDetails 的对象，它包含一个 UserMatchCriteria 对象、一个 UserMatchLifestyle 对象和一个包含零个或多个 UserHobby 对象的 IList 集合。

我的问题是我不想将用户表绑定到每次加载时都必须链接到这些表，因为这是一个很大的开销，对于用户对象的所有用例来说，我几乎永远不需要。我希望将搜索详细信息单独加载到 UserSearchDetails 对象中，该对象没有与之关联的数据库表。显然我可以使用 NHibernate 来做一些事情，比如

```
<one-to-one name=UserMatchCriteria>
<one-to-one name=UserMatchLifestyle>
<bag name=Hobbies........... /> 
```

等，但没有基表来运行初始选择，并为我提供 UserId，我不确定在什么上下文中使用这些条目。

我是否需要创建另一个名为 UserSearchDetails 的表，其中只有一个 UserId 条目，用作我的基表，然后通过 UserId 的 PK 连接到其他表？

还是有另一种方法可以实现我在这里尝试做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:06:29.437

默认情况下，引用和包是延迟加载的。你可以在用户中映射一个组件

```
<component name="UserSearchDetails">
  <many-to-one>
  <many-to-one>
  <bag>
<component> 
```

# html - 将单选按钮响应解析为数组（Express.js）

> ID：10120013
> 
> 赞同：2
> 
> 时间：2012-04-12T08:29:05.530
> 
> 标签：html, node.js, express

我设置了一系列单选按钮组，以表示问题的答案。

格式为：

你最喜欢的红色是什么颜色| 蓝色的

标记：

```
<input type="radio" name="Question_1" value="Red" id="Question_1_Red" /> 
<label for="Question_1_Red">Red</label>

<input type="radio" name="Question_1" value="Blue" id="Question_1_Blue" /> 
<label for="Question_1_Blue">Blue</label> 
```

我正在使用节点（快递）

在 req.body 中，我得到以下内容：

问题_1：“红色”，问题_2：“其他答案”，问题_3：“其他答案”

我的问题是，我怎样才能把它放到一个数组中，所以我可以像这样存储它：

[{questionID: 1, answer: "Red"}, {questionID: 2, answer: "Other Answer"}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:05:07.200

```
var newBody = [];
for (var k in req.body) {
  var m = k.match(/^Question_(\d)$/);
  if (m) {
    newBody.push({questionID: m[1], answer: req.body[k]});
  }
} 
```

# java - 在 J2ME 中拆分文本

> ID：10120014
> 
> 赞同：4
> 
> 时间：2012-04-12T08:29:05.853
> 
> 标签：java, java-me, lwuit, netbeans-7

我正在创建一个应用程序，它应该使用 get 方法从 mySql 数据库中读取文本。

一旦它从数据库中获取数据元素作为字符串，它应该拆分字符串并使用字符串创建一个列表，但是 split() 方法似乎在这里不起作用。

J2ME 说`cannot find method split()`——我该怎么办？

我的代码如下：

```
/* assuming the string (String dataString) has already
been read from the database and equals one,two three
i.e String dataString = "one,two,three"; */

String dataArray[];
String delimiter = ",";
dataArray = dataString.split(delimiter);

//continue and create a list from the array. 
```

我已经在桌面和控制台应用程序上尝试过这个，并且似乎工作得很好，但是代码不能在 j2me 应用程序中运行。有没有我应该使用的方法？我能做些什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T15:17:29.510

这是一个高速实现：

```
 public static String[] Split(String splitStr, String delimiter) {
     StringBuffer token = new StringBuffer();
     Vector tokens = new Vector();
     // split
     char[] chars = splitStr.toCharArray();
     for (int i=0; i < chars.length; i++) {
         if (delimiter.indexOf(chars[i]) != -1) {
             // we bumbed into a delimiter
             if (token.length() > 0) {
                 tokens.addElement(token.toString());
                 token.setLength(0);
             }
         } else {
             token.append(chars[i]);
         }
     }
     // don't forget the "tail"...
     if (token.length() > 0) {
         tokens.addElement(token.toString());
     }
     // convert the vector into an array
     String[] splitArray = new String[tokens.size()];
     for (int i=0; i < splitArray.length; i++) {
         splitArray[i] = (String)tokens.elementAt(i);
     }
     return splitArray;
 } 
```

# android - 在片段中使用异步任务加载器在 gridview 中显示图像时未显示动画加载器

> ID：10120016
> 
> 赞同：0
> 
> 时间：2012-04-12T08:29:09.583
> 
> 标签：android, actionbarsherlock

我正在尝试在片段内的网格视图中显示图像，并且图像是在异步任务加载器中的运行时下载的，并且我在同一片段中使用基本适配器。

现在，除了加载图像但没有显示加载器动画外，一切正常。我的 Fragment 类如下，其中包含 BaseAdapter 和 AsyncLoader

```
package friends.appModules.mainClasses;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import friends.appModules.commonClasses.Cheeses;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.AsyncTaskLoader;
import android.support.v4.content.Loader;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class PeopleNearYou extends Fragment implements     LoaderManager.LoaderCallbacks<List<Images>>{

private GridView pnuGridView;
ImageAdapter myImageAdapter;
boolean isLoadFinished = false;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.d("Where am I?", "in onActivityCreated PeopleNearYou");

    getLoaderManager().initLoader(1, null, this);
}

/* First Method call after onActivityCreated*/
@Override
public Loader<List<Images>> onCreateLoader(int id, Bundle args) {
    Log.d("Where am I?", "in onCreateLoader PeopleNearYou");
    return new PeopleNearYouLoader(getActivity());
}

@Override
/*Fourth Method Called*/
public void onLoadFinished(Loader<List<Images>> loader,
        List<Images> data) {
    Log.d("Where am I?", "in onLoadFinished PeopleNearYou");

    final Context c = this.getActivity().getApplicationContext();
    myImageAdapter = new ImageAdapter(c);

    myImageAdapter.setData(data);

    pnuGridView.setAdapter(myImageAdapter);
}

@Override
public void onLoaderReset(Loader<List<Images>> loader) {
    Log.d("Where am I?", "in onLoaderReset PeopleNearYou");
    myImageAdapter.setData(null);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Log.d("Where am I?", "in onCreateView PeopleNearYou");

    View view = inflater.inflate(R.layout.people_near_you, container, false);

    pnuGridView = (GridView) view.findViewById(R.id.gridview);
    //pnuGridView.setBackgroundColor(R.color.dark_gry_txt);
    return view;
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

public class ImageAdapter extends BaseAdapter{
    private Context mContext;
    private List<Images> finallyListCreated;

    public ImageAdapter(Context c) {
        Log.d("Where am I?", "in ImageAdapter Constructor PeopleNearYou");
        mContext = c;

        pnuGridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                Toast.makeText(mContext, "" + position, Toast.LENGTH_SHORT).show();
            }
        });
    }

    public int getCount() {
        Log.d("Where am I?", "in getCount PeopleNearYou");
        return 20;
    }

    public Object getItem(int position) {
        Log.d("Where am I?", "in getItem PeopleNearYou");
        return null;
    }

    public long getItemId(int position) {
        Log.d("Where am I?", "in getItemId PeopleNearYou");
        return 0;
    }

    public void setData(List<Images> data) {
        Log.d("Where am I ??", "in onSetData() PeopleNearYou");
        if (data != null) {
            finallyListCreated = data;
        }
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d("Where am I?", "in getView PeopleNearYou");
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
            imageView.setBackgroundColor(R.color.dark_gry_txt);
        } else {
            imageView = (ImageView) convertView;
        }

        Images item = finallyListCreated.get(position);
        imageView.setImageDrawable(item.getImageUrl());
        return imageView;
    }
}

public static class PeopleNearYouLoader extends AsyncTaskLoader<List<Images>>{

    Context loaderContext;
    List<Images> loaderImageList;

    public PeopleNearYouLoader(Context context) {
        super(context);
        Log.d("Where am I?", "in PeopleNearYouLoader Constructor PeopleNearYou");
        loaderContext = context;
    }

    @Override
    /*Third method called if there are no images in the list else Deliver Result method will be called*/
    public List<Images> loadInBackground() 
    {
        Log.d("Where am I ??", "in loadInBackground() PeopleNearYou");

        List<Images> peopleNearYouImagesList = new ArrayList<Images>(20);

        for (int i=0; i<20; i++) {
            Log.d("Where am I ??", "For loop to set Image objects PeopleNearYou");
            Images peopleNearYouImages = new Images(loadImageFromUrl(Cheeses.imageUrls[i]));
            peopleNearYouImagesList.add(peopleNearYouImages);
        }

        return peopleNearYouImagesList;
    }

    @Override
    public void onCanceled(List<Images> data) {
        super.onCanceled(data);
        onReleaseResources(data);
    }

    @Override
    public void deliverResult(List<Images> images) {
        if (isReset()) {
            if (images != null) {
                onReleaseResources(images);
            }
        }

        List<Images> oldImages = images;
        loaderImageList = images;

        if (isStarted()) {
            super.deliverResult(images);
            Log.d("Where am I ??", "in isStarted = true PeopleNearYou");
        }

        if (oldImages != null) {
            onReleaseResources(oldImages);
            Log.d("Where am I ??", "in oldImages != null PeopleNearYou");
        }
    }

    @Override
    /* Second method called*/
    protected void onStartLoading() {
        if (loaderImageList != null) {
            deliverResult(loaderImageList);
            Log.d("Where am I ??", "in onStartLoading() and list is not null");
        }
        else {
            Log.d("Where am I ??", "in onStartLoading() and list is null");
            forceLoad();
        }
    }

    @Override
    protected void onStopLoading() {
        cancelLoad();
        Log.d("Where am I ??", "in onStopLoading() PeopleNearYou");
    }

    @Override
    protected void onReset() {
        super.onReset();

        onStopLoading();

        if (loaderImageList != null) {
            onReleaseResources(loaderImageList);
            loaderImageList = null;
        }
    }

    protected void onReleaseResources(List<Images> data) {
        Log.d("Where am I ??", "in onReleaseResources() PeopleNearYou");
    }

    public Drawable loadImageFromUrl(String url) {
        InputStream inputStream;
        try {
            inputStream = new URL(url).openStream();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return Drawable.createFromStream(inputStream, "src");
    }

}
} 
```

我的gridview布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="90dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

我的代码中使用的图像类也是：

```
package friends.appModules.mainClasses;

import android.app.Application;
import android.graphics.drawable.Drawable;

public class Images extends Application{
    private Drawable imageUrl;

    public Images(Drawable imageUrl) {
        this.imageUrl = imageUrl;
    }
    public Drawable getImageUrl() {
        return imageUrl;
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:57:54.917

查看 ListFragment.setListShown() 的源代码。它完全符合您对 GridView 的要求。

# c# - WPF中的可移动用户控件

> ID：10120018
> 
> 赞同：1
> 
> 时间：2012-04-12T08:29:11.317
> 
> 标签：c#, wpf, user-controls, mouseevent, move

`UserControl`我用几个标签创建了简单的。如何实现简单的机制，允许像普通窗口一样移动整个控件（当我将它添加到 winForms 时 - 如果它有所不同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:48:44.290

你可以使用我的 Capture 类：

```
public class ClsCapture
{
    bool bCaptureMe;
    Point pLocation = new Point();

    Control dd;
    //Handles dad.MouseDown, dd.MouseDown
    private void Form1_MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        try {
            bCaptureMe = true;
            pLocation = e.GetPosition(sender);
        } catch {
        }
    }

    //Handles dad.MouseMove, dd.MouseMove
    private void Form1_MouseMove(object sender, System.Windows.Input.MouseEventArgs e)
    {
        try {

            if (bCaptureMe) {
                dd.Margin = new Thickness(dd.Margin.Left - pLocation.X + e.GetPosition(sender).X, dd.Margin.Top - pLocation.Y + e.GetPosition(sender).Y, dd.Margin.Right, dd.Margin.Bottom);

            }
        } catch {
        }
    }

    //Handles dad.MouseUp, dd.MouseUp
    private void Form1_MouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        try {
            bCaptureMe = false;
        } catch {
        }
    }

    public ClsCapture(Control pnl)
    {
        dd = pnl;
        dd.PreviewMouseLeftButtonDown += Form1_MouseDown;
        dd.PreviewMouseLeftButtonUp += Form1_MouseUp;
        dd.PreviewMouseMove += Form1_MouseMove;
    }

    public static void CaptureMe(Control pnl)
    {
        ClsCapture cc = new ClsCapture(pnl);
    }

} 
```

**用法：**

```
ClsCapture.CaptureMe(AnyControlYouWant); 
```

# javascript - Ext.DomHelper.useDom 设置为 true 不起作用

> ID：10120032
> 
> 赞同：0
> 
> 时间：2012-04-12T08:30:09.223
> 
> 标签：javascript, extjs, closures, extjs3

我正在使用 ExtJs 3.4 并具有以下代码来创建隐藏字段：

```
box.hidden = this.el.insertSibling({
    tag: 'input',
    type: 'hidden',
    value: itemVal,
    name: (this.hiddenName || this.name)
}, 'before'); 
```

但是，当`itemVal`是 json-string（或带引号字符的字符串）时，它会创建一个如下所示的元素：

```
<input type="hidden" value="[" 635f7ede-7add-415f-8461-548d17027cac.group","bbe2x:101"]"="" name="selector_account_ef8e33ca71e749dca21997f51b404e23" id="ext-gen1766"> 
```

问题在于它将 html 连接起来以提高性能。因此，在这种情况下，我想通过设置`Ext.DomHelper.useDom`为 true 来创建元素。应该很容易解决，对吧？但是检查 useDom 变量的内部代码会检查传递给`Ext.apply`function 而不是 using的私有对象`Ext.DomHelper.useDom`。因此，如果我在检查它的函数内将 Ext.DomHelper.useDom 设置为 true 并不重要，它永远不会是真的。在这里查看 ExtJs 代码：

[http://docs.sencha.com/ext-js/3-4/source/DomHelper-more.html](http://docs.sencha.com/ext-js/3-4/source/DomHelper-more.html)

```
// private
function doInsert(el, o, returnElement, pos, sibling, append){
    el = Ext.getDom(el);
    var newNode;
    if (pub.useDom) {
       ...
    } else {
       ...
    }
    return returnElement ? Ext.get(newNode, true) : newNode;
} 
```

我发现了一个已关闭的旧错误报告（[http://www.sencha.com/forum/showthread.php?76966-CLOSED-3.0.0-DomHelper-s-useDom-bug](http://www.sencha.com/forum/showthread.php?76966-CLOSED-3.0.0-DomHelper-s-useDom-bug)）但我没有了解为什么以及如何将 useDom 设置为 true。

当然，通过替换来修复它很简单，`"`但`&quot;`我想了解它。

# wcf - Datacontract 和动态返回类型 WCF

> ID：10120033
> 
> 赞同：6
> 
> 时间：2012-04-12T08:30:09.457
> 
> 标签：wcf, datacontract

我有一个`ServiceContract`返回动态类型，如下所示：

```
public dynamic LoginViaOpenId(string openIdUrl) 
```

动态返回类型可以是`DataContract`我定义的，也可以是字符串。但由于我没有在服务上使用过我`DataContract`的服务，客户对此一无所知，无法访问它。

我`DataContract`的如下所示：

```
[DataContract]
public enum OpenIdStatus
{
        [EnumMember]
        Authenticated,
        [EnumMember]
        Authenticating,
        [EnumMember]
        Cancelled,
        [EnumMember]
        Failed,
        [EnumMember]
        RedirectToLogon
 } 
```

我知道如果我有分层类型，我可以用来`KnownType`克服这个问题，但我不知道这种情况。任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T09:02:31.037

动态 DataContract 是矛盾的。DataContract 是一个预先确定且相互同意的数据结构，并且`dynamic`是一个对象，其结构不是预先确定的，因此无法达成一致，因为它可以是任何东西。

看起来您实际上并不需要返回动态数据类型，而是需要返回不同的数据类型。不同之处在于可变数据类型是一组固定数据类型中的一种，而动态数据类型是不具有预定结构的数据类型。由于您的返回值是几个已知形状之一，因此无需使用 WCF 不支持的“无形状”（或“自由形式”）动态类型。

相反，您可以让该`[OperationContract]`方法返回一个带有 a 的类型，该类型`[DataContract]`将充当具有 type 的单个数据成员的包装器对象`object`，并`[KnownType]`在包装​​器对象上使用以指定可能在包装器内返回的类型。由于一切都继承自`object`，因此已经存在层次结构。

```
[DataContract]
[KnownType(typeof(OpenIdStatus))]
[KnownType(typeof(string))]
public class ReturnValue
{
    [DataMember]
    public object Value { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:43:16.893

我认为 WCF 将在序列化/反序列化您的动态类型时遇到问题。我建议您根据定义的接口为方法返回设置合同。或者，您可以自己负责序列化并让您的服务返回一个字符串。客户端必须知道将字符串反序列化为什么类型。这里有一个类似的问题：-

[如何从 WCF HTTP 服务返回动态列表](https://stackoverflow.com/questions/5973912/how-to-return-dynamic-list-from-wcf-http-service)

# java - 如何求解二维积分？

> ID：10120034
> 
> 赞同：3
> 
> 时间：2012-04-12T08:30:14.073
> 
> 标签：java, numerical-methods, numerical

我一直在尝试为双积分实现梯形规则。我尝试了很多方法，但我无法让它正常工作。

```
static double f(double x) {
    return Math.exp(- x * x / 2);
}

// trapezoid rule
static double trapezoid(double a, double b, int N) {
    double h = (b - a) / N;
    double sum = 0.5 *  h * (f(a) + f(b));
    for (int k = 1; k < N; k++)
        sum = sum + h * f(a + h*k);
    return sum;
} 
```

我了解单变量积分的方法，但我不知道如何为 2D 积分做到这一点，例如：x + (y*y)。有人可以简要解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T16:14:08.797

如果您打算使用梯形规则，那么您可以这样做：

```
// The example function you provided.
public double f(double x, double y) {
    return x + y * y;
}

/**
 * Finds the volume under the surface described by the function f(x, y) for a <= x <= b, c <= y <= d.
 * Using xSegs number of segments across the x axis and ySegs number of segments across the y axis. 
 * @param a The lower bound of x.
 * @param b The upper bound of x.
 * @param c The lower bound of y.
 * @param d The upper bound of y.
 * @param xSegs The number of segments in the x axis.
 * @param ySegs The number of segments in the y axis.
 * @return The volume under f(x, y).
 */
public double trapezoidRule(double a, double b, double c, double d, int xSegs, int ySegs) {
    double xSegSize = (b - a) / xSegs; // length of an x segment.
    double ySegSize = (d - c) / ySegs; // length of a y segment.
    double volume = 0; // volume under the surface.

    for (int i = 0; i < xSegs; i++) {
        for (int j = 0; j < ySegs; j++) {
            double height = f(a + (xSegSize * i), c + (ySegSize * j));
            height += f(a + (xSegSize * (i + 1)), c + (ySegSize * j));
            height += f(a + (xSegSize * (i + 1)), c + (ySegSize * (j + 1)));
            height += f(a + (xSegSize * i), c + (ySegSize * (j + 1)));
            height /= 4;

            // height is the average value of the corners of the current segment.
            // We can use the average value since a box of this height has the same volume as the original segment shape.

            // Add the volume of the box to the volume.
            volume += xSegSize * ySegSize * height;
        }
    }

    return volume;
} 
```

希望这可以帮助。随意询问您对我的代码可能有的任何问题（警告：代码未经测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:51:35.157

有很多方法可以做到。

如果您已经知道 1d 的内容，则可以这样：

1.  编写一个函数 g(x)，计算 f(x,y) 上的一维积分`x`
2.  然后在 g(x) 上积分一维积分
3.  成功 ：）

这样，您基本上可以拥有任意数量的维度。虽然它的扩展性很差。对于较大的问题，可能需要使用[monte carlo 积分](https://en.wikipedia.org/wiki/Monte_Carlo_integration)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T01:27:13.780

考虑使用[DataMelt Java 程序](http://jwork.org/dmelt)`jhplot.F2D`中的类。您可以集成和可视化 2D 函数，执行以下操作：

```
f1=F2D("x*y",-1,1,-1,1) # define in a range
print f1.integral() 
```

# asp.net - 使局部视图可重用

> ID：10120036
> 
> 赞同：2
> 
> 时间：2012-04-12T08:30:19.487
> 
> 标签：asp.net, asp.net-mvc-3, razor, partial-views

假设我有一个呈现应用程序下拉列表的部分视图。在下拉列表中选择一个项目时，它会呈现另一个局部视图。

此下拉列表存在于应用程序的几个位置，但在每个页面上，选择应用程序时需要呈现不同的局部视图。有没有一种简单的方法可以使下拉列表可重复使用？即我需要根据呈现部分视图的页面设置不同的data_url。

局部视图：

```
<script type="text/javascript">
    $(function () {

        $('#ApplicationsDropdownList').change(function () {
            var url = $(this).data('url');
            var applicationId = $(this).val();
            $('#RolesForApplication').load(url, { applicationId: applicationId})
        });
    });

</script>

<div>

<label for='ApplicationsDropdownList'>Application:</label>

 @Html.DropDownListFor(
        x => x.SelectedApplicationId, 
        new SelectList(Model.Applications, "Value", "Text"),
        "-- Select Application --",
             new
             {
                 id = "ApplicationsDropdownList",
                 data_url = Url.Action("ViewRolesTableForApplication", "Index")
             }
    )   
</div> 
```

控制器：

```
 public ActionResult ViewRolesTableForApplication(string applicationId)
        {
...
 return View("_RolesTableForApplicationPartial");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:56:31.163

您可以将包含 data_url 的字符串属性添加到用于局部视图的模型中。

所以除了包含它的模型之外，`Applications`它也会有`public string DataUrl { get; set; }`。

# android - ImageView 点击最佳实践

> ID：10120047
> 
> 赞同：0
> 
> 时间：2012-04-12T08:31:34.447
> 
> 标签：android, onclick, imageview, onclicklistener

我是Andoird的新手。

就我而言，我有一个场景，当单击图像的某个部分时，它会触发 onclick 事件。我试图在触发 onTouch 时检测位置，它可以工作，但我认为这不是标准实现，那么这种情况下的最佳做法是什么？

谢谢。

这是如下代码：

imgView.setOnTouchListener((OnTouchListener) 新 OnTouchListener(){

```
public boolean onTouch(View v, MotionEvent event) { 
    if(isIn(event.getX(), event.getY(), 124,3,221,36)){ 
        ShowMemberInfo(R.string.app_m01); 
    } else if(isIn(event.getX(), event.getY(), 8,155,72,181)){
         .. 
    } 
    return true; 
} 
private boolean isIn(float x, float y, int fx, int fy, int tx, int ty) { 
    return x<tx && x > fx && y<ty && y>fy; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:43:52.033

只需`onClickListener()`为您的 ImageView 实现。

实现 onClick 事件的最简单方法是在 XML 布局中包含**`android:onClickMe="methodName"`**并`<ImageView>`在活动文件中定义该方法。

例如：

```
public void methodName(View v)
{
  ....
  ....

   // do whatever you want for click even ton imageview
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:14:38.203

尝试使用[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:24:51.457

如果要检测用户触摸的位置（相对于 ImageView 用户触摸的位置），可以从 MotionEvent 对象获取触摸点。

尝试为 ImageView 注册一个触摸事件侦听器，并在触发触摸事件时从 MotionEvent 对象的 getX() 和 getY() 方法获取触摸点位置。然后定义一个矩形区域并使用 contains() 来检查触摸点是否在该区域内。

```
ImageView img = new ImageView(this);
img.setOnTouchListener(new OnTouchListener(){

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.w("Hit test", "is hit? "+isIn(event.getX(),event.getY(),0,0,120,120));
        return false;
    }

});

private boolean isIn(float x, float y, int fx, int fy, int tx, int ty){
    return new Rect(fx,fy,tx,ty).contains((int)x,(int)y);
} 
```

希望这对您有所帮助。:)

# java - 在preparedStatement 中使用oracle 的to_date

> ID：10120048
> 
> 赞同：6
> 
> 时间：2012-04-12T08:31:38.567
> 
> 标签：java, oracle, jdbc, prepared-statement

我正在尝试使用preparedStatement 中的to_date 在oracle 数据库中输入日期，但出现错误。

代码片段：

```
sql = "select Identifier from metadata where content_cdate >=to_date(?,'dd-mm-yyyy') and content_cdate < to_date(?,'dd-mm-yyyy') and status='published' and content_mdate is null";

ps.setString(1, commonUtil.dateToString(startTime)); 
```

dateToString 方法返回如下值：2012-01-01 12:00:00

错误：

```
[Oracle][ODBC][Ora]ORA-01861: literal does not match format string 
```

请指教。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T08:35:22.950

您应该使用正确的`TO_DATE`格式掩码来匹配您的输入。

在你的情况下最有可能：`TO_DATE(?,'YYYY-MM-DD HH24:MI:SS')`

# iphone - Obj-C，Storekit restoreCompletedTransactions 返回零事务？

> ID：10120050
> 
> 赞同：15
> 
> 时间：2012-04-12T08:31:42.187
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, storekit

我在恢复已完成的交易时遇到了一些问题。

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

我添加了几个示例中提到的观察者，我尝试添加`paymentQueueRestoreCompletedTransactionsFinished`并且已经拥有`updatedTransactions`. `paymentQueueRestoreCompletedTransactionsFinished`说我有零交易。

我可以购买产品，如果我再次尝试购买，它会阻止我并说我已经使用此代码购买了该产品。

```
SKPayment *payment = [SKPayment paymentWithProductIdentifier:productIdentifier];
[[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

我想也许我的捆绑标识符有问题，但这似乎很好，如果不是，购买将无法进行。

我一直在设备和模拟器上尝试这个，但结果相同。此外，如果我使用的是英国或美国商店，也没有什么区别。

我真的很想知道为什么这对我不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T09:42:24.757

尝试这样做并检查数组计数是否也返回零？

```
- (void) checkPurchasedItems
{
   [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}//You Call This Function

//Then this delegate Function Will be fired
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
  purchasedItemIDs = [[NSMutableArray alloc] init];

  NSLog(@"received restored transactions: %i", queue.transactions.count);
  for (SKPaymentTransaction *transaction in queue.transactions)
  {
      NSString *productID = transaction.payment.productIdentifier;
      [purchasedItemIDs addObject:productID];
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:34:48.807

根据[文档](http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/SKPaymentQueue_Class/Reference/Reference.html)：

> 当您创建要在商店中销售的新产品时，您可以选择是否可以恢复该产品。

所以问题是，您的产品是否配置为允许恢复？

# java - 如何在 JSP 中设置下拉/选择的默认值？

> ID：10120063
> 
> 赞同：4
> 
> 时间：2012-04-12T08:32:48.533
> 
> 标签：java, jsp, select, input, options

我有一个字符串*eqArray*的数组列表。

我需要在我的 JSP 中使用以下内容的下拉列表中显示它：

```
<% 

    for(int count=0;count<eqArray.size();count++){ %>
            <option value="<%=eqArray.get(count)%>"><%=eqArray.get(count)%></option>  
     <%} 
%> 
```

我有一个 eqName 字符串，它是 eqArray 的一部分，默认情况下应该是选定的值。

我如何在不必检查并将第一个选项始终设置为 eqName 的情况下进行操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:47:40.307

```
<% for(int count=0; count<eqArray.size(); count++){ %>
    <option value="<%= eqArray.get(count) %>" <%= (eqArray.get(count).equals("eqName"))?"selected":"" %> ><%= eqArray.get(count) %></option>  
<%} %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T08:43:15.753

将数组中eqName元素的索引改为0，或者使用条件语句。

```
<% 
for(int count=0; count < eqArray.size(); count++){ %>
        <%if(eqArray.equals("eqName"){ %>           
            <option  selected="selected" value="<%=eqArray.get(count)%>"><%=eqArray.get(count)%></option>  
        <%} %> 
        <option value="<%=eqArray.get(count)%>"><%=eqArray.get(count)%></option>  
 <%} %> 
```

但使用 JSTL taglibs 而不是使用 scriptlet。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T09:01:46.973

您可以通过 JQuery 来完成，恕我直言，它更干净：

```
<select data-selected="${eqName}">
<% 
    for(int count=0;count<eqArray.size();count++){ %>
            <option value="<%=eqArray.get(count)%>"><%=eqArray.get(count)%></option>  
     <%} 
%>
</select> 
```

在页面末尾：

```
<script type="text/javascript">
  $("select[data-selected]").each(function() {
      var selected = $(this).data("selected");
      $("select[data-selected='" + selected + "'] option[value='" + selected + "']").attr("selected", "selected");
  })
</script> 
```

通过这种方式，您只需要在每个页面中包含 js。

顺便说一句，我建议您使用更具可读性的 JSTL 和 EL：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<select data-selected="${eqName}">
  <c:forEach items="${eqArray}" var="model">
    <option value="${model}">${model}</option>
  </c:forEach>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:07:28.770

您可以通过两种方式实现这些

*   通过使用jsp
*   " 选定="选定" >
*   通过在选择框代码的末尾使用 Javascript

    document.getElementById('selectBoxID').value=""

    而不是 selectBoxID id 使用选择框 id

# java - 使用 jquery 调用soap wsdl

> ID：10120064
> 
> 赞同：0
> 
> 时间：2012-04-12T08:32:50.283
> 
> 标签：java, javascript, jquery, web-services, jquery-ui

我有一个用java编写并使用axis2server公开的web服务。我需要使用jquery调用该服务。我的UI托管在同一台机器上，但在不同的端口（8080）中。我尝试了以下代码

```
$('#submit').click(function (event) {
    alert("success");
    var soapmessage = "<soap:Envelope xmlns:soap='http://www.w3.org/2003/05/soap-envelope' " + " xmlns:iris='http://iris.ramco.com'>";
    soapmessage += "<soap:Header/>";
    soapmessage += "<soap:Body>";
    soapmessage += "<iris:authenticateUser>";
    soapmessage += "<inputjson>                {username:'admin',password:'admin12*'}</inputjson>";
    soapmessage += "</iris:authenticateUser>";
    soapmessage += "</soap:Body>";
    soapmessage += "</soap:Envelope>";
    alert(soapmessage);
    $.ajax({
        type: 'Post',
        url: 'http://localhost:8090/axis2/services/CiRISService',
        data: soapmessage,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            alert(data);
        },
        error: function (data) {
            alert("eror" + data.d);
        }
    });
    alert("Form Submitted");
}); 
```

但我得到未定义的错误。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:34:29.327

为什么不使用 SOAP 客户端库？例如，有一个 jQuery 插件： http: [//archive.plugins.jquery.com/project/jqSOAPClient](http://archive.plugins.jquery.com/project/jqSOAPClient)

请记住，您永远不应该在没有专门的库的情况下直接调用 SOAP 方法。有太多你想不到的陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:35:59.703

您正在使用 content type `"application/json; charset=utf-8"`（和 data type `"json"`）进行soap请求。而是尝试这些

> 内容类型：“文本/xml；字符集=utf-8”
> 
> 数据类型：“xml”

编辑：虽然我同意 Shedal，但使用图书馆。

# eclipse - 如何以编程方式调用 Eclipse 清理配置文件？

> ID：10120072
> 
> 赞同：2
> 
> 时间：2012-04-12T08:34:22.010
> 
> 标签：eclipse, eclipse-jdt

有没有办法以编程方式调用特定的清理配置文件（源->清理）？

我想在 ICompilationUnits 的可迭代对象上调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:06:21.613

我查看了 中的声明`org.eclise.jdt.ui`。

相关命令 ID 是`org.eclipse.jdt.ui.edit.text.java.clean.up`，实现是`org.eclipse.jdt.internal.ui.actions.AllCleanUpsAction`. 不幸的是，这是一个内部操作，该命令不支持任何参数。

我可以看到三种可能的方法：

*   创建`AllCleanUpsAction`并调用`...run(new StructuredSelection(<compilation units>[]))`. 问题：动作是内部的，所以你可能想创建一个片段来访问它......

*   打开包导航器视图。选择与编译单元对应的适当文件。通过 执行命令 ID `IHandlerService.executeCommand("org.eclipse.jdt.ui.edit.text.java.clean.up")`。问题：包导航器已更改...您可能无法在导航器中看到所有编译单元。

*   将视图中的当前选择设置为`new StructuredSelection(<compilation units>[])`. 然后执行上面的命令。问题：我不确定命令是否正确启用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T19:41:39.770

您可以使用`RefactoringExecutionStarter.startCleanupRefactoring`which 接受一个数组`ICompilationUnits`来执行清理作为其参数之一。此方法还允许您指定`ICleanUp`要执行的 s，并允许您根据需要跳过显示清理向导。

这是一个删除不必要括号的示例：

```
ICleanUp[] cleanUps = new ICleanUp[]{new ExpressionsCleanUp(){
    @Override
    protected boolean isEnabled(String key){
        switch(key){
        case CleanUpConstants.EXPRESSIONS_USE_PARENTHESES:
        case CleanUpConstants.EXPRESSIONS_USE_PARENTHESES_NEVER:
            return true;
        case CleanUpConstants.EXPRESSIONS_USE_PARENTHESES_ALWAYS:
            return false;
        default:
            return super.isEnabled(key);
        }
    }
}};
ICompilationUnit[] icus = new ICompilationUnit[]{icu};
Shell shell = HandlerUtil.getActiveEditor(event).getSite().getShell();
try {
    RefactoringExecutionStarter.startCleanupRefactoring(
            icus, cleanUps, false, shell, false, ActionMessages.CleanUpAction_actionName);
} catch (InvocationTargetException e) {
    throw new AssertionError(e);
} 
```

# android - Eclipse 在导入现有项目时覆盖现有项目文件

> ID：10120077
> 
> 赞同：1
> 
> 时间：2012-04-12T08:34:39.207
> 
> 标签：android, eclipse, import, project

我正在从我的 git 开发一个现有项目。 `.classpath`并且`default.properties`文件在存储库中。

当我将项目导入 Eclipse 时，my`default.properties`被替换为 a `project.properties`（文件内容相同）并且 my`.classpath`被修改。

正如我所说，这些文件在存储库中，所以我的 git 状态永远不会干净。

您知道如何强制 Eclipse 使用存储库中提供的文件*而不修改它们*吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:45:18.487

`default.properties (or project.properties)`

查看SDK r14 版本的更新[日志：](http://tools.android.com/recent/buildchangesinrevision14)

> default.properties 是主项目的属性文件，包含构建平台目标和库依赖项等信息，已重命名为 project.properties

如果您的开发团队中的某个人仍在使用早于 r14 的版本，最好让他们在其工作站上升级到最新的 Android SDK 版本，因为自 r14 以来，Android SDK 在项目属性文件、库项目、外部 jar 依赖项方面发生了迅速变化结构等。如果开发者在一个团队中使用不同的 Android SDK 版本，将会使开发非常难以维护。

如果短期内没有这个选项，你应该在短期内临时创建并签入default.properties和project.properties（内容相同），以在短期内支持旧的Android版本并给其他人时间来升级他们的工作站。

* * *

`.classpath`

将 IDE 生成的文件（.classpath、.project 等）提交到源代码管理中是一种非常糟糕的做法。您是否希望从 Windows 机器生成的 .classpath 与从 Mac 机器生成的内容完全相同？您应该将 .classpath 添加到源代码管理忽略列表中，以便在您将项目提交到源代码管理时自动忽略它。

使用源代码控制系统时，不要对每一次提交考虑太多，只要您提供完整详细的注释即可。因为您对项目中的每个文件（java 源代码、属性和资源文件等）所做的每一个操作（添加、修改、删除等）都会在源代码控制中记录和跟踪，以防万一出现问题，对于一个老练的开发人员来说，跟踪更改并将项目恢复到正常状态非常容易。希望这可以帮助。

# asp.net - 从 CreateUserWizard 中删除 CompleteWizardStep？

> ID：10120081
> 
> 赞同：1
> 
> 时间：2012-04-12T08:35:00.657
> 
> 标签：asp.net, createuserwizard

我正在使用 ASP 控件 CreateUserWizard，并希望跳过显示“用户成功创建”的页面以及继续按钮。是否可以完全跳过 CompleteWizardStep？

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" FinishDestinationPageUrl="~/default.aspx">
        <WizardSteps>
        <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
        </asp:CreateUserWizardStep>
        <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
        </asp:CompleteWizardStep>
    </WizardSteps>
</asp:CreateUserWizard> 
```

我尝试完全删除 CompleteWizardStep，但这不起作用。我也尝试将 FinishDestinationPageURL 添加到 CreateUserWizard，但这并没有跳过成功页面确认。请问有什么帮助吗？

# tree - Vaadin 树表过滤

> ID：10120082
> 
> 赞同：1
> 
> 时间：2012-04-12T08:35:02.637
> 
> 标签：tree, vaadin

我将 TreeTable 与自定义数据源一起使用。我想过滤它并扩展符合特定条件的项目。但是我发现的唯一方法是`setCollapsed(itemId, collapsed)` 但是对大量项目使用这种方法会破坏性能。有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:50:47.847

您可以将 SimpleStringFilter（或您自己的 Filter 实现）添加到 treeTable 的容器（[Vaadin API](https://vaadin.com/api/)以获取更多信息）。

向容器添加过滤器将仅保留容器数据源中的匹配项（`Container.getItemsIds().size()`将返回匹配项的确切数量）。

之后，您可以使用`setCollapsed()`较少项目的方法。

问候。

# css - Firefox中的Jquery UI按钮CSS问题

> ID：10120084
> 
> 赞同：1
> 
> 时间：2012-04-12T08:35:09.670
> 
> 标签：css, firefox, google-chrome

我在此页面上使用 Firefox 11.0 [http://jqueryui.com/demos/button/](http://jqueryui.com/demos/button/) 我看到一些未对齐（垂直）按钮，如下图所示 ![在此处输入图像描述](../Images/7515037c1838cb75741e5f66ee161364.png)

在chrome中没有问题。我已经使用相同的版本设置升级了 Firefox 以进行修复安装。但这并不能解决问题。

请检查并告诉我，你是否面临这个问题..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:59:50.237

是的，Firefox 有这种行为。它默认为垂直对齐：a标签的基线，因此要修复它，您可以将样式垂直对齐：顶部应用于a标签（锚），这样它将与其他2个按钮一起显示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:45:31.197

是的，我也看到了....`overflow:hidden;`从 ui-button 类中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:02:08.207

它们是`inline-block`元素，因此默认值为**basline** .write`vertical-align: top;`在您的`ui-corner-all`. 像这样写：

```
.ui-corner-all{
 vertical-align: top;
} 
```

# c# - 忽略忽略属性

> ID：10120087
> 
> 赞同：52
> 
> 时间：2012-04-12T08:35:19.610
> 
> 标签：c#, mstest, resharper-5.1

我们有在每小时生产中自动运行的 MSTest 测试。其中一项测试标有**`[Ignore]`**属性，因为它还没有准备好在我们的生产环境中运行它。
现在我想（仅）在我的本地环境中开始该测试，因为我的本地环境已准备好进行该测试。
我尝试通过单击测试代码左侧的 ReSharper 图标或单击*单元测试会话*窗口 中的*运行选定测试*图标来运行该测试，但没有任何反应。

 *我目前通过注释掉该`[Ignore]`行来修复它。但现在我需要注意`//`在签入代码之前删除注释字符 ( )。

是否有另一种方法可以临时运行`[Ignore]`'d 测试？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-12T08:54:35.293

最近，当我遇到此类问题时，我将一个新的[构建配置](http://msdn.microsoft.com/en-us/library/kkz9kefa.aspx)添加到名为“本地开发人员调试”之类的 Visual Studio 项目中，并使用现有调试配置中的设置。然后我转到“Project -> MyProjectName Properties -> Build”，确保“Local Developer Debug”是选定的配置，并将“LOCALDEVBUILD”添加到“Conditional compliation symbols”。这允许使用预处理器指令在编译时“切换”代码：

```
#if (!LOCALDEVBUILD)
    [Ignore]
#endif 
```

不确定这是否是您要查找的内容...但它允许您根据构建的意图运行/使用特定代码（通过构建配置）...使用此方法，您可以忽略测试更多“官方”构建，但如果您愿意，仍然可以在闲暇时执行它。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-06-10T11:25:42.910

您还可以使用[测试类别](http://msdn.microsoft.com/en-us/library/dd286595.aspx)来标记您不想包含在自动化测试中的测试方法，例如

```
[TestCategory("IgnoreOnBuild")] 
```

因此不使用该`[Ignore]`属性。并将其与构建定义中的过滤器结合起来，在 Basic -> Automated Test -> Test Source -> Test Case Filter 下：

```
TestCategory!=IgnoreOnBuild 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T08:42:36.440

看起来还有其他方法可以使用 testrunco​​nfig 文件启用/禁用测试。但是，如果您使用 IgnoreAttribute，它会与代码一起编译，因此无法轻松切换。

从[文档](http://msdn.microsoft.com/en-us/library/ms182457%28v=vs.80%29.aspx)中：

> 单元测试的 Ignore 属性与测试的其他属性和源代码一起位于单元测试的源文件中。这意味着，如果您在“测试管理器”窗口中禁用单元测试，然后使用 MSTest.exe 命令行实用程序运行该测试，该测试仍会运行。但是，如果使用 Ignore 属性标记单元测试，编译程序集，然后使用 MSTest.exe 运行测试，则不会运行测试。它不会运行，因为 Ignore 属性已成为测试的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-16T14:53:38.513

正如@Lasse 提到的，可以设置`[TestCategory("DockerEnvironmentRequired")]`. 除此之外，您可以在本地 .runsettings 中设置一个过滤器，包括或排除具有指定 TestCategory 的测试。

**示例测试：**

```
[TestClass]
[TestCategory("DockerEnvironmentRequired")]
public class MyTests
{
    [TestMethod]
    public async Task XXX_ShouldSuccess()
    {
        ...
    }
} 
```

**示例外部构建环境 .runsettings：**

```
<?xml version="1.0" encoding="utf-8"?>
<RunSettings>
    <TestRunParameters>
        ...
    </TestRunParameters>
    <RunConfiguration>
        <TestCaseFilter>TestCategory!=DockerEnvironmentRequired</TestCaseFilter>
    </RunConfiguration>
</RunSettings> 
```

**在本地，您将删除 .runsettings 中的 TestCaseFilter**节点以运行它们。

**使用 CLI 替代：** dotnet test --filter TestCategory!=DockerEnvironmentRequired*

# iis-7 - IIS7 301 使用 web.config 文件重定向...（不工作）在子文件夹和文件的情况下

> ID：10120089
> 
> 赞同：1
> 
> 时间：2012-04-12T08:35:29.763
> 
> 标签：iis-7, web-config, http-status-code-301

IIS7 301 使用 web.config 文件重定向...

不工作....

```
<location path="ProductsAndServices/CustomProfessionalServices.aspx">
        <system.webServer>
            <httpRedirect enabled="true" destination="ProductsAndServices/business-video-platform.aspx" httpResponseStatus="Permanent" />
        </system.webServer>
    </location> 
```

在上面的位置标记中，我尝试使用 ASCII 代码提供路径，例如“News/PressReleases/PressReleases.aspx”，但它仍然无法正常工作。

然后我试图给文件位置它也不起作用。如下所示

```
<location path="ULNotifier.zip">
        <system.webServer>
            <httpRedirect enabled="true" destination="Support/Resources.aspx?link=Support" httpResponseStatus="Permanent" />
        </system.webServer>
    </location> 
```

但是当我尝试单页时，它的工作方式如下所示，

```
<location path="Solutions.aspx">
        <system.webServer>
            <httpRedirect enabled="true" destination="Solutions/OnlineVideoPlatform.aspx?link=Solutions" httpResponseStatus="Permanent" />
        </system.webServer>
    </location> 
```

任何人都可以解决这个问题吗？

# bash - 在 bash 中编写回车脚本

> ID：10120092
> 
> 赞同：0
> 
> 时间：2012-04-12T08:35:40.217
> 
> 标签：bash

所以通常在bash中，我会手动点击返回

```
[archlinux-64 ~]$ sudo pacman -S base-devel
pacman: /usr/lib/libcurl.so.4: no version information available (required by /usr/lib/libalpm.so.7)
:: There are 12 members in group base-devel:
:: Repository core
   1) autoconf  2) automake  3) binutils  4) bison  5) fakeroot  6) flex  7) gcc  8) libtool
   9) m4  10) make  11) patch  12) pkg-config

Enter a selection (default=all): 
```

然后在标准输出的下一个提示中键入 Y 并按回车键：

```
warning: make-3.82-4 is up to date -- reinstalling
resolving dependencies...
looking for inter-conflicts...

Targets (14): gcc-libs-4.7.0-4  libltdl-2.4.2-5  autoconf-2.68-2  automake-1.11.4-1
              binutils-2.22-5  bison-2.5-3  fakeroot-1.18.2-1  flex-2.5.35-5  gcc-4.7.0-4
              libtool-2.4.2-5  m4-1.4.16-2  make-3.82-4  patch-2.6.1-3  pkg-config-0.26-2

Total Download Size:    24.91 MiB
Total Installed Size:   104.95 MiB
Net Upgrade Size:       8.44 MiB

Proceed with installation? [Y/n] 
```

但是在完成了这个 arch linux base-devel 安装几次之后，我想直截了当，并在一行 bash 命令中使用 default 和 Y 执行以下所有操作。

我如何在一行中编写这个 bash 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:39:41.683

您可以通过传递 --noconfirm 选项来做到这一点：

```
pacman -S --noconfirm base-devel 
```

如果您想摆脱下载进度条等，您也可以将其关闭：

```
pacman -S --quiet --noprogressbar --noconfirm base-devel 
```

查看手册页：[http ://www.archlinux.org/pacman/pacman.8.html](http://www.archlinux.org/pacman/pacman.8.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:39:14.447

检查“是”命令。尝试使用类似的东西：

```
yes 'y' | my_script 
```

# html - 如何查找保存在 HTML5 WebSQL 数据库中的数据大小？

> ID：10120093
> 
> 赞同：2
> 
> 时间：2012-04-12T08:35:42.040
> 
> 标签：html, sqlite, constraints, web-sql, dml

My WebSQL 包含纯文本格式 (dataURIs) 的图像。我正在捕获照片数据并将其保存在 HTML5 WebSQL 数据库中。如何找到保存的数据大小？

当我使用 SELECT 查询来检索它时，我得到了一个太大的结果集错误：'TOO_LARGE_ERR'。

谁能帮我找到这个？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:12:24.453

将[长度](http://www.sqlite.org/lang_corefunc.html)函数与[LIMIT](http://www.sqlite.org/images/syntax/select-stmt.gif)子句一起使用：

```
SELECT length(datauris) FROM foo LIMIT 1,1 
```

**参考**

*   [HTML5 离线配额研究](http://www.html5rocks.com/en/tutorials/offline/quota-research/)

# xhtml - 如何为面包屑实现 schema.org 标记？

> ID：10120096
> 
> 赞同：30
> 
> 时间：2012-04-12T08:35:55.233
> 
> 标签：xhtml, breadcrumbs, schema.org

没有太多关于使用 schema.org 标记实现面包屑的信息。到目前为止，我可以获得两份官方文件——[一份展示](http://schema.org/docs/full_md.html)了这一点：

```
<div itemscope itemtype="http://schema.org/Property" itemid="http://schema.org/breadcrumb">
   <link itemprop="domain" href="http://schema.org/WebPage"/>
   <link itemprop="range" href="http://schema.org/Text"/>
</div> 
```

[另一个](http://schema.org/WebPage)展示了这一点：

```
<body itemscope itemtype="http://schema.org/WebPage">
  <div itemprop="breadcrumb">
    <a href="category/books.html">Books</a> >
    <a href="category/books-literature.html">Literature & Fiction</a> >
    <a href="category/books-classics">Classics</a>
  </div>
</body> 
```

这两个标记是完全不同的。它们对你有意义吗？如果他们这样做了，我如何用该标记附上以下简单的面包屑代码 - 正确的方式？

```
<body>
  <span id="breadcrumbs">
      <a rel="home" href="http://example.com">
          <span>Noob Archive</span>
      </a> » 
      <span>
          <a href="http://example.com/topic/html/">
              <span>HTML</span>
          </a> » 
          <strong>Best Practices: Markup for Setting up Breadcrumbs on Web Pages</strong>
      </span>
  </span>
</body> 
```

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-01-10T02:21:41.127

[schema.org 终于在schema.org v1.92 更新](http://schema.org/docs/releases.html#v1.92)（2014-12-11 发布）中发布了新的面包屑标记系统。[`ItemList`](http://schema.org/ItemList)新的面包屑系统是被调用的扩展[`BreadcrumbList`](http://schema.org/BreadcrumbList)。每个都`BreadcrumbList`包含多个[`ListItem`](http://schema.org/ListItem)元素。这允许每页有多个面包屑路径，将每个单独的链接分隔为单独的`ListItem`，并提供围绕整个面包屑的包装器。这应该可以满足几乎所有用例。

这是来自 schema.org 的微数据示例：

```
<ol itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="https://example.com/dresses">
    <span itemprop="name">Dresses</span></a>
    <meta itemprop="position" content="1" />
  </li>
› <li itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="https://example.com/dresses/real">
    <span itemprop="name">Real Dresses</span></a>
    <meta itemprop="position" content="2" />
  </li>
</ol> 
```

Google 最近重新设计的[结构化数据测试工具](http://www.google.com/webmasters/tools/richsnippets)可以正确解析此标记。但是，该工具的重新设计放弃了搜索预览，因此很难说 Google 将如何在 Google 搜索结果中显示带有此标记的面包屑（或者 Google 是否会使用此数据）。linter.structured-data.org也[正确](http://linter.structured-data.org/)解析了这个新标记，但正如那里所提到的，“此预览仅作为搜索引擎**可能**显示的示例显示。由每个搜索引擎提供商自行决定您的页面是否会在他们的搜索结果页面中显示为增强的搜索结果。”

[谷歌网站管理员工具](https://www.google.com/webmasters/tools/)最近增加了跟踪结构化数据被索引的能力。它不会显示搜索结果中使用了哪些结构化数据，但会显示哪些数据在哪些页面上被编入索引，并且还会显示结构化数据中的任何错误。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-23T14:41:34.877

第一个文档是定义，所以不用担心。它只是说面包屑是网页的文本属性。

[http://schema.org/WebPage](http://schema.org/WebPage)上的示例是您想要使用和理解的示例。它将面包屑片段设置为单个文本字段，显示“书籍 > 文学与小说 > 经典”。

你会这样做：

```
<body itemscope itemtype="http://schema.org/WebPage">
  <span id="breadcrumbs" itemprop="breadcrumb">
      <a rel="home" href="http://example.com">
          <span>Noob Archive</span>
      </a> » 
      <span>
          <a href="http://example.com/topic/html/">
              <span>HTML</span>
          </a> » 
          <strong>Best Practices: Markup for Setting up Breadcrumbs on Web Pages</strong>
      </span>
  </span>
</body> 
```

结果将是“Noob Archive » HTML » Best Practices: Markup for Setting up Breadcrumbs on Web Pages”。

您可以使用[http://linter.structured-data.org/](http://linter.structured-data.org/)检查您的项目属性是如何解析的，并使用[http://diveintohtml5.ep.io/extensibility.html](http://diveintohtml5.ep.io/extensibility.html)来了解有关解析规则的更多信息。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-15T15:38:24.860

@somori的**答案是不正确的**——但那是因为有关使用 microdata / schema.org 正确标记面包屑的文档广泛不正确。

每个面包屑都需要使用 itemprop 属性声明，您不能只在包含的 div 或 span 中使用 itemprop="breadcrumb" 包装它们并`itemprop="child"`在嵌套的 div 中使用。

更多信息在这里：

[http://lists.w3.org/Archives/Public/public-vocabs/2012Jan/0016.html](http://lists.w3.org/Archives/Public/public-vocabs/2012Jan/0016.html)

**这样做，让您的面包屑显示在 SERP 中：**

```
<div class="breadcrumb" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">

  <span class="breadcrumb-lead">YOU ARE HERE:</span><a title="Go to %title%." href="%link%" class="%type%" itemprop="url"><span itemprop="title">Homepage</span></a>

  <div itemprop="child" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" style="display: inline;"><a title="Go to %title%." href="%link%" class="%type%" itemprop="url"><span itemprop="title">Category One</span></a></div>

  <div itemprop="child" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" style="display: inline;"><a title="Go to %title%." href="%link%" class="%type%" itemprop="url"><span itemprop="title">Category Two</span></a></div>

</div> 
```

然后在google结构化数据测试工具中测试：

[http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-07T01:19:37.633

根据[Google Webmaster Central Help Forum](https://productforums.google.com/forum/#!topic/webmasters/XJi_yTNtgzs)的说法，专家暂时不建议使用 schema.org 面包屑标记，似乎“schema.org 面包屑结构存在某种故障”。相反，建议使用 data-vocabulary.org 面包屑标记，Google 和其他搜索引擎也可以轻松阅读该标记。

一个 data-vocabulary.org 面包屑标记示例：

```
<div>
  <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/" itemprop="url">
      <span itemprop="title">example</span>
    </a> >
  </span>  
  <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/fashion/" itemprop="url">
      <span itemprop="title">Fashion</span>
    </a> >
  </span>  
  <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/fashion/women/" itemprop="url">
      <span itemprop="title">Women</span>
    </a> >
  </span>
  <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="http://www.example.com/fashion/women/boots/" itemprop="url">
      <span itemprop="title">Boots</span>
    </a>
  </span>
</div> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-13T15:32:05.960

```
 itemscope itemtype="..."> 
```

Is invalid in an xhtml page.

The correct syntax is:

```
 itemscope="itemscope" itemtype="..."> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-08T14:29:55.910

这在 Google 的结构化数据测试工具中得到了验证

```
<nav role="navigation" class="breadcrumb" itemscope itemtype="http://schema.org/Breadcrumb">
    <ol itemscope itemtype="http://schema.org/BreadcrumbList">
      <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <a itemprop="item" href="/"><span itemprop="name">Home</span></a>
        <meta itemprop="position" content="1" />
      </li>
      <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <a itemprop="item" href="/about-us"><span itemprop="name">About Us</span></a>
        <meta itemprop="position" content="2" />
      </li>
    </ol>
</nav> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-12T07:18:20.723

设置面包屑模式会对您的网站页面的搜索点击率 (CTR) 产生巨大影响。

**以下是示例如何在您的页面上实现面包屑列表架构**

**1\. 通过 HTML**

```
<ul itemscope itemtype="http://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <a itemprop="item" href="https://organicdigital.co/"><span itemprop="name">Home</span></a>
        <meta itemprop="position" content="1" />
    </li>

    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <a itemprop="item" href="https://organicdigital.co/services/"><span itemprop="name">Services</span></a>
        <meta itemprop="position" content="2" />
    </li>

    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <a itemprop="item" href="https://organicdigital.co/services/structured-data.php"><span
                itemprop="name">Structured Data</span></a>
        <meta itemprop="position" content="3" />
    </li>
</ul> 
```

**2\. 通过 JSON-LD**

您还可以在 google 结构化数据测试工具上检查，实施的架构是无错误且正确的。

例如：[https ://search.google.com/structured-data/testing-tool?utm_campaign=devsite&utm_medium=jsonld&utm_source=breadcrumb](https://search.google.com/structured-data/testing-tool?utm_campaign=devsite&utm_medium=jsonld&utm_source=breadcrumb)

```
<html>
<head>
<title>The title of the page</title>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "name": "Books",
    "item": "https://example.com/books"
  },{
    "@type": "ListItem",
    "position": 2,
    "name": "Authors",
    "item": "https://example.com/books/authors"
  },{
    "@type": "ListItem",
    "position": 3,
    "name": "Ann Leckie",
    "item": "https://example.com/books/authors/annleckie"
  },{
    "@type": "ListItem",
    "position": 4,
    "name": "Ancillary Justice",
    "item": "https://example.com/books/authors/ancillaryjustice"
  }]
}
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-10-14T18:38:02.767

@IssaBERTHE 的回答是正确的。嗯，需要更多代表发表评论，对于使用 wordpress 的任何人，请查看此插件。您可以对其进行定制以满足您的需求并遵循谷歌标准。它具有内置的定位。

```
    可以在这里下载 ->面包屑跟踪插件

```

它确实需要一点纠正。我们需要编辑的文件是breadcrumb-trail-master\inc\breadcrumbs.php

您确实需要编辑第 213 行：

```
$breadcrumb = sprintf('<%1$s role="navigation" aria-label="%2$s" class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb">%3$s%4$s%5$s</%1$s>', 
```

我们正在删除 itemprop，所以它应该如下所示：

```
 $breadcrumb = sprintf('<%1$s role="navigation" aria-label="%2$s" class="breadcrumb-trail breadcrumbs">%3$s%4$s%5$s</%1$s>', 
```

现在向上滚动并编辑第 172 行：

```
 $breadcrumb .= '<ul class="trail-items" itemscope itemtype="http://schema.org/BreadcrumbList">'; 
```

在此处添加 itemprop：

```
 $breadcrumb .= '<ul class="trail-items" itemprop="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">'; 
```

我猜作者认为您必须将它们分解。现在检查时，它应该正确注册。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2014-04-30T12:00:54.037

schema.org 给出了以下示例：

```
<div itemprop="breadcrumb">
  <a href="category/books.html">Books</a> >
  <a href="category/books-literature.html">Literature & Fiction</a> >
  <a href="category/books-classics">Classics</a>
</div> 
```

来源： http: [//schema.org/WebPage](http://schema.org/WebPage)（示例部分，微格式选项卡）

其他资源：[http ://www.w3.org/wiki/WebSchemas/Breadcrumbs](http://www.w3.org/wiki/WebSchemas/Breadcrumbs)

# nested-forms - Rails 嵌套表单使用accepts_nested_attributes_for

> ID：10120098
> 
> 赞同：0
> 
> 时间：2012-04-12T08:35:57.333
> 
> 标签：nested-forms, ruby-on-rails-3.2

我正在按照这个 rails cast 来创建一个嵌套表单： [http ://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

我有一个带有图像的“单词”模型，在更新单词时我也想更新图像。我正在使用导轨 3.2.3。

我的问题是图像表单没有显示在页面上。

词.rb：

```
class Word < ActiveRecord::Base

  attr_accessible :name
  validates_presence_of :name

  belongs_to :category
  attr_accessible :category_id

  has_one :image
  accepts_nested_attributes_for :image, :allow_destroy => true
  attr_accessible :image_attributes

end 
```

单词/_form.html.erb：

```
<%= form_for @word, :html => {:multipart => true} do |f| %>
    <% if @word.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@word.errors.count, "error") %> prohibited this word from being saved:</h2>

          <ul>
            <% @word.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <div class="field">
      <%= f.label :category %>
      <br/>
      <%= f.collection_select(:category_id, Category.all, :id, :name) %>
      <br/>
      <%= f.label :name %>
      <br/>
      <%= f.text_field :name %>
      <br/>
      <%= image_tag @word.image.file_url(:thumb).to_s unless @word.image.nil? %>
      <%= f.fields_for :image do |builder| %>
          <br/>
          <%= builder.label :file, "Image" %>  <br/>
          <%= builder.file_field :file %>
          <%= builder.hidden_field :file_cache %>
      <% end %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
<% end %> 
```

非常感谢任何帮助，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:01:59.657

通过删除旧的“单词”条目并添加解决的问题

```
@word.build_image 
```

到 words_controller 中的“新”操作。

# iphone - 如何使用当前模式从 iphone 中的两个不同控制器调用 uiviewcontroller 类

> ID：10120100
> 
> 赞同：-1
> 
> 时间：2012-04-12T08:35:59.913
> 
> 标签：iphone, objective-c

我有两个名为 TEnterCorrectCodeController 和 TEmergencyCancelController 的控制器类。

在这两个类中都有按钮。在两个控制器类的按钮单击上，我正在调用另一个控制器类名称 TSendEmailController。但问题是，当调用 TEnterCodecontroller 的按钮单击时，它会通过 [self presentModalController] 打开 TSendEmailController，并且在单击 TsendEmail 类中存在的按钮时，我希望打开另一个类。

当点击 TEmergencyCancelController 的按钮时，它会通过 [self presentModalController] 打开 TsendEmail，当点击 TsendEmail 的按钮时，它不应该打开其他类，而是应该关闭控制器。问题是如何识别哪个类调用了 TsendEmailController 并且取决于我必须检查条件。问题是我没有使用导航控制器我正在使用 [self presentModalViewController animated:YES] 推送视图。

这是我的代码：

```
for (int  i=0; i< [self.navigationController viewControllers count]; i++) 
            {
                UIViewController *aController = [[self.navigationController view viewControllers]objectAtIndex:i];
                if ([aController isKindOfClass:[TEnterCorrectCodeController class]])
                {

                    lblAttempt.hidden = YES;
                    [self saveregisteridinplist];
                    TInstructionsController  *instructions = [[TInstructionsController alloc]init];
                    [self presentModalViewController:instructions animated:YES];
                    [instructions release];

                }
                else if ([aController isKindOfClass:[TEmergencyCancelController class]])
                {
                    lblAttempt.hidden = YES;
                    [self saveregisteridinplist];
                    [self dismissModalViewControllerAnimated:YES];

                }
            } 
```

在我编写的代码中，它没有进入 for 循环，因为我没有使用 navigationController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:48:42.367

对于确定调用了哪个类的解决方案，`TsendEmail`请`NSInteger`在`AppDelegate`. 例如。`NSInteger flag=0;`...`@property and @synthesize`它.....现在，当您调用`TSendEmail`from时`TEnterCorrectCodeController`，设置`flag`为 1......并且在`viewDidLoad of viewWillAppear`方法中，设置`flag`为 0....现在，当您在`TEmergencyCancelController`课堂上时，检查`flag`是 0 还是1 ...如果为 0 则驳回您的观点.....

您可以使用这个**概念**.... :)

# android - android中的不同分辨率

> ID：10120107
> 
> 赞同：0
> 
> 时间：2012-04-12T08:36:46.490
> 
> 标签：android, android-layout

我有两个纯文本的布局。这是代码：

```
 <EditText
            android:id="@+id/editTextName"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="26dp"
            android:layout_marginTop="56dp"
            android:hint="Förnamn"
             >

        </EditText>

        <EditText
            android:id="@+id/editTextAdress"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/editTextName"
            android:layout_below="@+id/editTextName"
            android:layout_marginTop="20dp" 
            android:hint="Gatuadress">

        </EditText> 
```

我的分辨率有问题。当我在 3,7 英寸中使用模拟器时看起来很棒，但是当我在 10.1 英寸（平板电脑）上更改时，我的纯文本非常小。我怎么能在每一个 relolution 中做到这一点，我的纯文本看起来都一样？

这是为了更好地理解的照片：

![在此处输入图像描述](../Images/954df66acb2687d60e39453488d71ce2.png)

![在此处输入图像描述](../Images/449f4ba920c2e68e362f9b0529e79c2c.png)

我想要这个纯文本在平板电脑和小屏幕的分辨率上看起来是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:39:37.127

您可以使用

```
android:textSize="15sp" 
```

要设置 textview 的文本大小，应该希望在所有设备上呈现大致相同的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:39:44.283

尝试使用 sp 设置文本大小：

```
android:textSize="20sp" 
```

本页解释了如何处理多种分辨率，以及 sp 单位是什么以及它们如何工作：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# mysql - DDL 等价

> ID：10120109
> 
> 赞同：1
> 
> 时间：2012-04-12T08:36:52.700
> 
> 标签：mysql, ddl, squeryl

有没有办法检查两个 DDL 的等价性？

为了描述这个问题，我面临：

有一个 mysql 数据库和一个基于 squeryl 的应用程序，可以使用它。`Schema.printDdl`我想检查，在应用程序启动之前（或同时）（如果有人忘记创建补丁或其他东西），数据库是否处于正确的状态（根据 DDL，由生成）。

任何想法，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:39:43.070

为此，我使用[SQLyog 。](http://www.webyog.com/en/)它有 Schema 同步工具，您也可以使用它来比较两个数据库的结构。

还有其他类似的工具，例如[TOAD for MySQL](http://www.quest.com/toad-for-mysql/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:15:33.687

您可以在 dbForge Studio for MySQL 中使用[数据库项目功能。](http://www.devart.com/dbforge/mysql/studio/database-projects.html)

1.  创建一个项目并添加现有文件（SQL 脚本）。
2.  分配数据库连接并从项目弹出菜单中单击“新模式比较”。

它将帮助您比较、查找差异并将数据库项目（在您的情况下为 SQL 脚本）与所需的数据库同步。

# java - 是否可以将 JQuery 中的 JSON 发布到在 Jersey JAVA 中获取 JSON 的服务器

> ID：10120112
> 
> 赞同：1
> 
> 时间：2012-04-12T08:37:25.270
> 
> 标签：java, jquery, ajax, json, jersey

是否可以将 JQuery 中的 JSON 发布到在 Jersey JAVA 中获取 JSON 的服务器，我正在努力解决这个问题。我有一个 ajax 使用 Jersey REST GET 将 JSON 发布到服务器，但没有任何效果，我想知道它是否是正确的方法。这是我之前关于该问题的代码的问题：

java中的代码在服务器中实现：

```
@Path("/helloworld")
public class GetData {
    @GET
    @Consumes("application/json")
    @Produces("application/json")
    public String getResource(JSONObject obj) throws IOException {

        InputStream in = (InputStream) obj.values();
        String data = IOUtils.toString(in);

        JSONObject out = (JSONObject) JSONSerializer.toJSON(data);

        String result = out.getString("name");
        return data;
    }                           
} 
```

Javascript代码：

```
<script>
    $.ajax({
        url: '/helloworld',
        type: 'POST',
        contentType: 'application/json',
        data: { json: JSON.stringify({
            name:"Bob"
        })},
        dataType: 'json'
    });
    alert("json posted!");
</script> 
```

服务器控制台中的消息：

> 2012-apr-12 10:49:51 com.sun.jersey.spi.container.ContainerRequest getEntity ALLVARLIG：Java 类 net.sf.json.JSONObject 和 Java 类型类 net.sf.json.JSONObject 的消息体阅读器，并且未找到 MIME 媒体类型 application/octet-stream。与 MIME 媒体类型兼容的注册消息体阅读器为：application/octet-stream -> com.sun.jersey.core.impl.provider.entity.ByteArrayProvider

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:03:56.290

正如 ManseUK 在评论中暗示的那样，您正在发送 POST 请求并期望 GET 处理程序接收它。要么`@GET`将处理程序中的 更改为`@POST`，要么做一些非常愚蠢的事情，比如将 POST 委托给 GET ;)

```
@POST
@Consumes("application/json")
@Produces("application/json")
public String getResourceByPost(JSONObject obj) throws IOException {
    return getResource(obj);
} 
```

# jquery-selectors - 获取正确的 dom 元素

> ID：10120113
> 
> 赞同：0
> 
> 时间：2012-04-12T08:37:32.823
> 
> 标签：jquery-selectors

我有以下 html 标记

```
<iframe id="ContentPlaceHolder1_Editor1_ctl02_ctl00" frameborder="0" style="height:       100%; width: 100%; border-width: 0px;" marginwidth="0" marginheight="0" name="ContentPlaceHolder1_Editor1_ctl02_ctl00">
<html>
  <head>
    <body>
     sa
    <br>
 </body>
</html> 
</iframe> 
```

我需要一种使用 jquery 选择器更改正文标记中的文本的方法

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:40:12.770

这篇文章可能会有所帮助

[jQuery/JavaScript：访问 iframe 的内容](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)

# javascript - 这个函数有什么作用？什么是奇怪的语法？

> ID：10120116
> 
> 赞同：1
> 
> 时间：2012-04-12T08:37:42.757
> 
> 标签：javascript

有人可以解释这段代码的作用。测试功能测试是为了什么？

```
temp = "blah"
if ( /from_url=$/.test(temp) ) {
    //do something
}

test : function(s, p) {
    s = s.nodeType == 1 ? s.value : s;

    return s == '' || new RegExp(p).test(s);
} 
```

同样在初始条件下，语法 if(/from_url=$/) 有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:43:04.953

`s = s.nodeType == 1 ? s.value : s;`如果 s.nodeType 为 1，则使用 s.value，否则使用 s。

`return s == '' || new RegExp(p).test(s);`如果它是一个空字符串，则返回 s，否则测试 s 是否在正则表达式 p 中。

`if(/from_url=$/)`是一个正在寻找的正则表达式，`from_url=`但前提是它位于最后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:41:43.337

```
/from_url=$/ 
```

是一个正则表达式，它应该转换为检查 temp 并查找它是否在字符串末尾有 'from_url=' 这个文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:40:53.867

```
/from_url=$/ 
```

是 JavaScript 中的正则表达式文字。您可以将其替换为

```
new RegExp('from_url=$') 
```

这个特定的正则表达式检查字符串是否以“ `from_url=`”字符串结尾。

# c# - 引用 .net dll + 非托管 dll

> ID：10120118
> 
> 赞同：0
> 
> 时间：2012-04-12T08:38:13.743
> 
> 标签：c#, .net, dllimport

我有一个引用.net dll（称为仪器代理）的项目（称为平台），该项目使用 DllImport（称为仪器）引用 C++ dll。仪器和它的代理总是相同的版本并且总是作为一个部署。

我需要能够在一台机器上部署多个仪器（及其代理），并且只有一个使用特定版本仪器的平台。

似乎我无法将 insturent-proxy 放置到 GAC，因为它使用 C++ DLL。我可以将仪器（及其代理）安装到特定文件夹，但如何确保该平台能够找到该 dll？

**更新。**

理论上我希望看​​到的想法是在正常开发时引用这个 dll，但能够让我的应用程序在自定义文件夹中搜索这个 dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:13:24.587

将它们保存在单独的文件夹中会很好。您可以使用自己加载正确的仪器代理程序集[`Assembly.LoadFrom`](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)。然后使用反射从该程序集中创建类的实例并进行调用：

```
Assembly assm = Assembly.LoadFrom("c:\\Versions\\Version01\\instrument-proxy.dll");
Type yourClassType = assm.GetType("YourClass");
object yourClassObj = Activator.CreateInstance(yourClassType);
object Result = yourClassType.InvokeMember("DoSomething",
                                            BindingFlags.Default | BindingFlags.InvokeMethod,
                                            null,
                                            yourClassObj,
                                            args); 
```

为避免反射调用`InvokeMember`，您可以尝试使用接口：

```
Assembly assm = Assembly.LoadFrom("c:\\Versions\\Version01\\instrument-proxy.dll");
Type yourClassType = assm.GetType("YourClass");
YourInterface interf = (YourInterface)Activator.CreateInstance(yourClassType);
interf.DoSomething(); 
```

接口需要在一个单独的程序集中，您可以从您那里引用`platform`。所有`instrument-proxies`这些都必须针对相同版本的接口程序集进行编译。

如果您的仪器代理找不到非托管的`Instrument.dll`，您可以在首次使用之前显式加载它：

```
[DllImport("kernel32.dll")]
public static extern IntPtr LoadLibrary(string dllToLoad);

IntPtr pDll = LoadLibrary(@"PathTo_Instrument.dll"); 
```

完成后释放/卸载它：

```
[DllImport("kernel32.dll")]
public static extern bool FreeLibrary(IntPtr hModule); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:09:22.853

您可以将非托管 dll 文件复制到一个文件夹，然后将该文件夹添加到系统路径变量，或者您可以将这些文件复制到 Windows\System32 ，因为该文件夹始终位于系统路径中。

要修改系统路径，请右键单击我的计算机 -> 属性 -> 高级系统设置 -> 在高级选项卡 -> 环境变量下，您需要找到路径变量，然后修改它以包含您的文件。

将文件复制到 Windows\System32 或 %systemroot% （通常为 C:\Windows）更容易，但我建议使用修改路径变量的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T10:11:16.053

对于 .Net 程序集，您可以订阅[AppDomain.AssemblyResolve](http://msdn.microsoft.com/library/system.appdomain.assemblyresolve.aspx)并在需要时使用 Assembly.LoadFrom 加载程序集（请参阅[https://stackoverflow.com/a/10120664/143503](https://stackoverflow.com/a/10120664/143503)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:59:52.110

就像 Maceij 上面建议的那样，将您的仪器部署在单独的文件夹中。但是不要使用反射来加载/实例化仪器，而是看看 MEF。

您的确切需求可能需要另一种方法来执行此操作，但我会让仪器代理`[Export]`使用以下方法与 IInstrument 工厂接口：

```
IInstrument GetInstrument( string name, int major, int minor ); 
```

然后告诉 MEF 在哪里可以找到您的仪器，并让它创建不同的工厂，然后您可以从中请求您需要的仪器。

MEF 上的 MSDN：http: [//msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

# android - 创建您自己的自定义适配器时，getView() 方法如何工作？

> ID：10120119
> 
> 赞同：106
> 
> 时间：2012-04-12T08:38:20.123
> 
> 标签：android, android-arrayadapter, android-view, layout-inflater

我的问题是：

1.  LayoutInflater 的功能到底是什么？
2.  为什么我读过的所有文章都首先检查 convertview 是否为空？当它为空时是什么意思，当它不是时又是什么意思？
3.  这个方法接受的父参数是什么？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-04-12T08:52:24.163

1：[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html)获取您的布局 XML 文件并根据其内容创建不同的视图对象。

2：适配器是为重用视图而构建的，当滚动视图以使其不再可见时，它可以用于出现的新视图之一。这个重用的 View 是`convertView`. 如果为null，则表示没有回收的View，我们必须创建一个新的，否则我们应该使用它来避免创建一个新的。

3：`parent`提供，因此您可以将视图膨胀到适当的布局参数中。

所有这些都可以用来有效地创建将出现在列表中的视图（或其他需要适配器的视图）：

```
public View getView(int position, @Nullable View convertView, ViewGroup parent){
    if (convertView == null) {
        //We must create a View:
        convertView = inflater.inflate(R.layout.my_list_item, parent, false);
    }
    //Here we can do changes to the convertView, such as set a text on a TextView 
    //or an image on an ImageView.
    return convertView;
} 
```

注意 的使用`LayoutInflater`，它`parent`可以用作它的参数，以及如何`convertView`重用。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-04-12T08:56:56.683

[`getView()`](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)Adapter 中的方法用于生成项目的 a `ListView`, `Gallery`,...视图

1.  **[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html)**用于获取您在布局 xml 中定义的 View 对象（根对象，通常为`LinearLayout`、 `FrameLayout`或`RelativeLayout`）

2.  **`convertView`**用于回收。假设您有一个列表视图，它一次只能显示 10 个项目，目前它正在显示项目 1 -> 项目 10。当您向下滚动一项时，项目 1 将超出屏幕，而项目 11 将显示. 要为项目 11 生成视图，将调用 getView() 方法， `convertView`这里是项目 1 的视图（不再需要）。所以改为为第 11 项创建一个新的 View 对象（这很昂贵），为什么不重复使用`convertView`呢？=> 我们只检查是否`convertView`为 null，如果为 null 创建新视图，否则重新使用`convertView`.

3.  **`parentView`**是 ListView 或 Gallery...，其中包含[`getView()`](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)生成的项目视图。

**注意**：你不直接调用这个方法，只需要实现它来告诉父视图如何生成项目的视图。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-12T08:42:55.130

你可以看看这个关于列表视图的视频。它来自去年的 Google IO，并且仍然是我心目中关于列表视图的最佳演练。

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

1.  它将布局（res/layout/ 文件夹中的 xml 文件）膨胀到 java 对象中，例如 LinearLayout 和其他视图。

2.  观看视频，将让您了解转换视图的最新用途，基本上它是一个等待您重用的回收视图，以避免创建新对象并减慢列表的滚动速度。

3.  允许您从适配器引用您的列表视图。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-12T09:15:00.160

> LayoutInflater 的功能到底是什么？

当您使用 XML 进行设计时，您的所有 UI 元素都只是标签和参数。在您可以使用这些 UI 元素（例如 TextView 或 LinearLayout）之前，您需要创建与这些 xml 元素对应的实际对象。这就是充气机的用途。充气机使用这些标签及其相应的参数来创建实际对象并设置所有参数。在此之后，您可以使用 findViewById() 获取对 UI 元素的引用。

> 为什么我读过的所有文章都首先检查 convertview 是否为空？当它为空时是什么意思，当它不是时又是什么意思？

这是一个有趣的。您会看到，每次绘制列表中的项目时都会调用 getView()。现在，在绘制项目之前，必须先创建它。现在 convertView 基本上是最后使用的视图来绘制一个项目。在 getView() 中，您首先膨胀 xml，然后使用 findByViewID() 来获取列表项的各种 UI 元素。当我们检查 (convertView == null) 时，我们所做的是检查一个视图是否为 null（对于第一项）然后创建它，否则，如果它已经存在，则重用它，无需再次进行膨胀过程. 使它更有效率。

在 getView() 中你一定也遇到过 ViewHolder 的概念。这使列表更有效率。我们所做的是创建一个 viewholder 并存储对我们在膨胀后获得的所有 UI 元素的引用。这样，我们可以避免调用大量的 findByViewId() 并节省大量时间。此 ViewHolder 是在 (convertView == null) 条件下创建的，并使用 setTag() 存储在 convertView 中。在 else 循环中，我们只需使用 getView() 将其取回并重用它。

> 这个方法接受的父参数是什么？

父级是一个 ViewGroup，由 getView() 创建的视图最终附加到该视图组。现在在您的情况下，这将是 ListView。

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-12T08:44:16.110

1.  布局充气器将外部 XML 膨胀/添加到当前视图。

2.  getView() 被多次调用，包括滚动时。因此，如果它已经有视图膨胀，我们不想再做一次，因为膨胀是一个代价高昂的过程..这就是为什么我们检查它是否为空然后膨胀它。

3.  父视图是您列表的单个单元格..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-12T08:45:29.947

`LayoutInflater`用于为`ListView`项目或`onCreateView`片段生成 XML 的动态视图。

`ConvertView`基本上是用来回收当前不在视图中的视图。假设您有一个可滚动的`ListView`. 在向下或向上滚动时，`convertView`给出被滚动的视图。这种重用可以节省内存。

该`getView()`方法的 parent 参数给出了对具有 listView 的父布局的引用。假设您想获取可以使用的父 XML 中任何项目的 Id：

```
ViewParent nv = parent.getParent();

while (nv != null) {

    if (View.class.isInstance(nv)) {
        final View button = ((View) nv).findViewById(R.id.remove);
        if (button != null) {
            // FOUND IT!
            // do something, then break;
            button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Log.d("Remove", "Remove clicked");

                    ((Button) button).setText("Hi");
                }
            });
        }
        break;
    }

 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-12T08:50:14.343

`getView()`方法为or Spinner的每一行创建新的`View`or 。您可以定义它或在文件夹中的文件中定义它，并可以将其引用到类 Object。`ViewGroup``Listview``View``ViewGroup``Layout XML``res/layout``Adapter`

如果您在传递给适配器的数组中有 4 个项目。`getView()`方法将为 4 行 Adaper 创建 4 个视图。

LayoutInflater 类有一个方法 inflate() 从 XML 资源布局创建视图对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-09T08:27:03.240

您还可以在 Adapter.java 文件中的 Adapter 接口中找到有关 getView 的有用信息。它说;

```
/**
 * Get a View that displays the data at the specified position in the data set. You can either
 * create a View manually or inflate it from an XML layout file. When the View is inflated, the
 * parent View (GridView, ListView...) will apply default layout parameters unless you use
 * {@link android.view.LayoutInflater#inflate(int, android.view.ViewGroup, boolean)}
 * to specify a root view and to prevent attachment to the root.
 * 
 * @param position The position of the item within the adapter's data set of the item whose view
 *        we want.
 * @param convertView The old view to reuse, if possible. Note: You should check that this view
 *        is non-null and of an appropriate type before using. If it is not possible to convert
 *        this view to display the correct data, this method can create a new view.
 *        Heterogeneous lists can specify their number of view types, so that this View is
 *        always of the right type (see {@link #getViewTypeCount()} and
 *        {@link #getItemViewType(int)}).
 * @param parent The parent that this view will eventually be attached to
 * @return A View corresponding to the data at the specified position.
 */
View getView(int position, View convertView, ViewGroup parent); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-12T20:17:15.020

**如果您想将视图传递给函数**（作为参数），您可以先定义一个元素，例如框架布局：

```
FrameLayout frameLayout = findViewById(R.id.frame_layout); 
```

然后查看元素：

```
 frameLayout.getRootView(); 
```

# c# - Linq：如何优化以表/列表为参数的请求？

> ID：10120120
> 
> 赞同：4
> 
> 时间：2012-04-12T08:38:21.950
> 
> 标签：c#, database, linq, entity-framework, join

我有一种在 Linq 中经常使用的请求：

我需要一组数据，它们的 ID（或任何其他字段）位于项目列表中。这是一个繁重的要求，因为我有很多（使用过的） Include 来加载数据。

举个例子：

我有一张桌子，有这种结构：

```
Id; Name; Age; ... 
```

这个表是几个用外键链接的表，我需要加载这些数据：汽车，公司，地址，...

现在我想检索具有特殊年龄的人的所有数据：

```
List<int> ages = new List<int>(){7,17,27,37,47,57,67,77,87};
using (MyDatabaseEntities context = new MyDatabaseEntities ())
{
   return context.Persons.Include("Car").Include("Company").Include("Address")
                 .Where(p=>ages.Contains(p.Age)).ToList();
} 
```

问题是我的印象是 Linq 不知道我的“年龄”列表不会改变，然后下载完整的人员列表，以及他们的所有数据（汽车、公司、...）然后检查每个结果，如果它有正确的年龄。

所以。

1.  我对吗？
2.  如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:59:02.953

您可以像这样使用投影：

```
using (MyDatabaseEntities context = new MyDatabaseEntities())
{
   return context.Persons
    .Where(p => ages.Contains(p.Age))
    .Select(p => new {p, p.Car, p.Company, p.Address})
    .ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:36:23.400

1.  我认为你错了：虽然你没有“枚举”你的查询（在你的情况下调用“ToList（）”之前），但你没有“下载”任何东西。但是 sql 生成的代码可能不是那么高效。

你可以尝试调试你的代码：要么是 Sql Profiler，要么只是

```
var yourQuery = context.Persons.Include("Car").Include("Company").Include("Address")
                 .Where(p=>ages.Contains(p.Age));

var HarmQuery = context.Persons
    .Where(p => ages.Contains(p.Age))
    .Select(p => new {p, p.Car, p.Company, p.Address});

return yourQuery.ToList(); 
```

在“var query”上放置一个断点，并查看生成的 sql，复制它并在您的 db 目录中尝试，并检查两者的性能。

**编辑：** 如果您只需要“链接”实体的一部分属性，则投影肯定比包含更好：

```
.Select(p => new{p, p.Car.Name, p.Company.Id, p.Address.Street, p.Address.StreetNumber) 
```

你不能用“includes”做什么，它检索包含实体的所有属性。

# jquery - 如何在悬停时制作此图像边框动画？jQuery 还是 CSS？不确定

> ID：10120121
> 
> 赞同：-4
> 
> 时间：2012-04-12T08:38:26.863
> 
> 标签：jquery, css, hover, border, animated

我在论坛上找到了这个链接，也喜欢这个效果，

[http://livedemo00.template-help.com/osc_35398/](http://livedemo00.template-help.com/osc_35398/)

在新产品链接下，当您将鼠标悬停在图像上时，会有一个快速动画的黑色边框。

我查看了css并找到了几个div，但不确定它是如何完成的，是否涉及jquery。

任何提示都会很棒。

我刚刚意识到它不能在 ie 8 上工作，但它在 Firefox 上工作。 [http://livedemo00.template-help.com/osc_35398/](http://livedemo00.template-help.com/osc_35398/)

是的，我检查了 css 并发现了多个使用小 png 图像的 div，并使用了 firebug，但它没有给我任何特定于这种效果的东西。可能是jquery，我不确定。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:31:25.390

Firebug 是一个很棒的工具，可以让你检查 dom、CSS 和 HTML。

是Java脚本吗？关闭浏览器中的 Javascript 并查看。是 CSS 吗？在几乎任何浏览器中使用 Firebug 和源代码检查。

它看起来像 Javascript。

# c# - C# 使用向上箭头键获取先前的输入

> ID：10120122
> 
> 赞同：1
> 
> 时间：2012-04-12T08:38:33.897
> 
> 标签：c#, list, keydown

Okai，假设我们有：

*   2个文本框（textBox1，textBox2）
*   1 个按钮 (button1)
*   列表 (list1)

我想要做的是将已经在 textBox1 中输入的文本存储到 list1 中，这样我就可以轻松地检索我以前的输入。当我按下按钮时，来自 textBox1 的文本将被写入 list1。这是我到目前为止的代码：

```
 private static List<string> list1 = new List<string>();

    list1.Add(textBox1.Text); // <-- On the button click event.

private void ServerInputtextboxCommand_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Up:
                foreach (var usedCommand in list1)
                {
                    textBox1.Text = usedCommand;
                }
                break;
        }
    } 
```

所以我试图用向上箭头键将我在 textBox1 中输入的文本返回到 textBox1。
我在 textBox1 中输入的文本将显示在 textBox2 中（但这与此处无关）。

感谢所有想帮助我的人，因为我不知道我做错了什么:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:11:44.600

我建议使用`Stack<T>`- 它会更容易跟踪。

然后你可以使用这样的东西：

```
public Stack<string> Undo { get; set; } // needs to be initialized before use
private void button1_Click(object sender, EventArgs e)
{
            if (string.IsNullOrEmpty(textBox1.Text))
                return;

            Undo.Push(textBox1.Text);
}

private void textBox1_KeyUp(object sender, KeyEventArgs e)
{
            if (e.KeyCode != Keys.Up)
                return;

            if (Undo.Count == 0)
                return;

            textBox2.Text = Undo.Pop();
} 
```

如果你想要一个重做选项，那么你也可以有一个重做堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:02:08.440

看起来是一个好的开始。所以我们说的是胜利形式，对吗？

您是否希望此功能仅在选择文本框时才起作用？

我假设您想要的功能有点像 Windows 命令行终端，您可以在其中按下并返回以前的命令，一次一个。您的 foreach 循环看起来会写入/覆盖文本框的所有先前内容。我认为这不是你想要的。

我建议为您的列表维护一个索引，该索引指示文本框中当前处于活动状态的元素。然后每次用户按下向上按钮时，递增该索引，以便下次按下向上按钮时，您的系统知道下一个元素的索引。如果我的假设是正确的，我认为你根本不需要循环。

更新：伪代码：

```
int index = -1;
list listy = new listy;

onButtonClick{
-add current contents to list at index + 1
}

onKEYPress{
if(listy.get(index +1 ) is not null or empty)
{
-textbox.text = listy.get(index +1 )
++ index;
}
} 
```

# user-interface - 使用 sendSynchronousRequest 调用 Web 服务时更新 UI

> ID：10120123
> 
> 赞同：0
> 
> 时间：2012-04-12T08:38:40.497
> 
> 标签：user-interface, nsurlconnection, synchronized

在我的应用程序中，我使用同步请求调用 web 服务。在每次通话之前，我都想更新我的 UILabel 以显示进度。喜欢：

```
lblTest.text=@"Downloading data XYZ";
NSData *dati = [NSURLConnection sendSynchronousRequest:richiesta returningResponse:&response error:&error];

lblTest.text=@"Downloading data ABC";
NSData *dati = [NSURLConnection sendSynchronousRequest:richiesta returningResponse:&response error:&error]; 
```

但标签文本没有改变。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:54:20.307

在搜索了很多关于这个问题之后，我得到了解决方案。

只需要启动线程，如：

```
 [NSThread detachNewThreadSelector:@selector(downloadData) toTarget:self withObject:nil]; 
```

并将标签文本更新为：

```
 [lblTest performSelectorOnMainThread:@selector(setText:) withObject:strMessage waitUntilDone:YES]; 
```

这解决了我的问题。

# javascript - 用 JS 数组表示不确定大小的 2d 空间 - 负索引？

> ID：10120126
> 
> 赞同：3
> 
> 时间：2012-04-12T08:38:45.270
> 
> 标签：javascript

我想在 2d JS 数组中表示 2d 笛卡尔坐标。2d 空间的大小不确定（也可以扩展到 -x 和 -y 空间）。这对于正 x 和 y 值很好，但是在 JS 数组中最小索引为 0 时，我无法扩展到负 x 和 y 空间。

我已经阅读了一些关于在 JS 中使用负索引的可能性的简短信息，显然这些在技术上是可行的，尽管没有得到适当的支持（例如数组函数不能正常工作）。

我敢肯定其他人一定有类似的要求，所以我想问一下——在 JS 中建模的推荐方法是什么？负数组索引是可行的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:04:53.170

你确定你需要负索引吗？通常，计算机图形的每个坐标系都从屏幕左上角的 (0/0) 开始。他们在别处画轴。

因此，有限大小的解决方案只是变换坐标。此外，您*可以*在数组上使用负索引，但最好将其称为“数组对象上的键”。如果您知道它们的局限性，则可以使用它们：

*   Array.length 仅适用于正索引。
*   因此，您不能从 0 循环到 a.length - 您必须找到另一个解决方案。（并且不要考虑for-in）。
*   因此，您需要确定循环的负开始 - 让它成为一个常量，甚至是数组对象的另一个属性（没有自动更新功能！）。

但是，你说你的空间是不确定的。问题只是没有无限的数据结构——没有编程语言。当然数组 indizes 可能会变得非常大，但你真的需要它们吗？我非常确定大小为 (2^32)^2 的二维数组只不过是对内存空间的巨大浪费——或者至少是让你的应用程序非常慢的东西。

考虑一个包含表示点的对象的一维数组可能会更好。您可以轻松地循环它，您可以有任意数量的坐标值，并且它们不需要那么多内存。

# php - SQL Delete from with sub query error

> ID：10120132
> 
> 赞同：0
> 
> 时间：2012-04-12T08:38:58.373
> 
> 标签：php, mysql, sql

晚上，我有以下 PDO 的 SQL 查询：

`DELETE FROM group_members WHERE group_id IN( SELECT * FROM groups WHERE group_owner = 1 ) AND user_id = 2`

由于某些奇怪的原因，我不断收到以下消息：

`#1241 - Operand should contain 1 column(s)`

现在; 我理解消息的含义，但我可以清楚地看到我在之后设置了一个条件，所以我不太确定发生了什么。

谢谢你的帮助！:o) 我确定这是一个菜鸟错误；)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:41:05.397

您`*`在子查询中使用，您需要选择正确的列：

```
SELECT group_id FROM groups WHERE group_owner = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:41:12.620

试试这个：

```
DELETE FROM group_members
WHERE group_id
    IN ( SELECT group_id FROM groups WHERE group_owner = 1 )
  AND
    user_id = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:47:53.173

我知道您已经有了答案，但也可以考虑使用联接而不是子查询：

```
DELETE gm.*
FROM group_members AS gm
JOIN groups g
  ON gm.group_id = g.id
WHERE gm.user_id = 2
  AND g.group_owner = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:28:38.563

试试看-

```
DELETE FROM group_members WHERE user_id = 2 and group_id IN( SELECT * FROM groups WHERE group_owner = 1 ) 
```

我没有对此进行测试，甚至不知道您想要的结果，但请尝试一下。

# java - 应该使用哪个日志级别来记录开发人员特定的日志

> ID：10120133
> 
> 赞同：2
> 
> 时间：2012-04-12T08:39:04.193
> 
> 标签：java, slf4j

应该使用哪个日志级别，是`org.slf4j.logger.Logger.trace or debug`用于记录低级别开发人员日志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:49:42.790

这是一个描述日志级别的好列表：

*   **调试** 这是最详细的日志记录级别（最大音量设置）。我通常认为 Debug 对于生产系统来说是越界的，并且仅将其用于开发和测试。我更喜欢将我的日志记录级别设置得恰到好处，这样我就有足够的信息，并努力将其记录在信息级别或更高级别。

*   **信息** 信息级别通常用于输出对系统运行和管理有用的信息。信息也将是用于记录应用程序关键区域的入口和出口点的级别。但是，您可以选择在调试级别添加更多入口和出口点，以便在开发和测试期间获得更多粒度。

*   **警告** 警告通常用于处理的“异常”或其他重要的日志事件。例如，如果您的应用程序需要配置设置，但在缺少设置的情况下具有默认设置，则应使用警告级别来记录缺少的配置设置。

*   **Error** 错误用于记录所有未处理的异常。这通常记录在应用程序边界的 catch 块中。

*   **Fatal** Fatal 保留用于特殊例外/情况，您必须快速找出这些事件。我通常不希望在应用程序开发的早期使用 Fatal。通常只有通过经验，我才能确定值得 FATAL 绰号体验的情况，特定事件是否值得晋升为 Fatal。毕竟，错误就是错误。

来自[http://thejoyofcode.com/Logging_Levels_and_how_to_use_them.aspx](http://thejoyofcode.com/Logging_Levels_and_how_to_use_them.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:46:03.117

取决于*开发人员*日志的含义。如果你的意思是调试信息，显然`DEBUG`应该使用。

人们倾向于使用`TRACE`极细粒度的日志，例如方法入口、方法出口等，如果启用，这些日志文件会乱扔垃圾。

这种方法可能会给你一个例子。

```
public String fetchMessage(long id) {
    logger.entry(id);

    logger.debug("Retrieving message from database");

    String message = this.messageService.fetchMessageById(id);

    logger.exit(message);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:04:45.837

日志对于调试和故障排除非常重要。记录所有必需的信息是件好事。但是，过多的日志记录也可能会影响性能，例如编写长 XML 消息或类似的东西。

这就是为什么有不同级别可用于记录的原因。需要为信息种类选择合适的级别。

例如，在 catch 块中有错误级别的日志。

```
catch (Exception e) {
   log.error("Exception... information.");
} 
```

一些明显的信息一直需要。
log.info("日志信息"); //基本信息-始终开启

调试级别信息
log.debug("调试值..."); //可以在需要时打开此级别。

它将避免过多的日志记录。

拇指规则：- 永远不要在日志中记录敏感信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:46:58.967

这取决于您当地的工作流程以及您的工作方式。

我们的经验法则是 INFO 始终打开，DEBUG 会在需要进行取证分析时记录在生产环境中，但 TRACE 不会记录在开发人员机器之外。

这意味着，如果您需要有可用的信息进行调查，请在调试时将其记录下来。如果没有，请将其记录在 trace 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T08:47:10.410

实际上没有“开发者日志”和“用户日志”。每个包都应该包含一些独立的 API，有**自己的概念和层**。

您所说的“开发者日志”可能是应用程序“内核”的子部分，而您所说的“用户日志”可能是“命令行”或“UI”部分。

每个包都应独立考虑，并具有自己的对象模型和业务规则。在这个宇宙中，您通常在顶层有一个“**公共”部分，它处理用例的基本步骤。**您还有一个用于扩展功能的“**受保护**”部分和一个用于满足您内部需求的“**私有”部分。**这些**层**可以以分层方式存储在不同的 * *java 包** 中。您的日志记录实践可能应该基于此层方案。

好的做法是使用诸如**java.logging**或**log4j**之类的 API ......它允许您基于包名称登录。

**INFO**应该是基本的高级步骤，这意味着在你的包**顶层的****公共**方法中发生了什么。

 ****DEBUG**应该是更细的粒度，仍然不会影响性能。

**TRACE**应该用于可能导致性能问题的非常详细的日志。请记住始终将 trace() 调用包装在 if(level==TRACE) 中，这样您就不会执行一些无用的构建消息的任务......等等。

**可以处理异常时发出**警告。****

 ****未处理异常但未导致关闭主线程时出现**ERR 。****

 ****FATAL**当我不得不终止整个过程时。

祝你好运！

雷诺******

# asp.net - EF 代码优先： InvalidOperationException 违反了多重性约束

> ID：10120137
> 
> 赞同：0
> 
> 时间：2012-04-12T08:39:11.997
> 
> 标签：asp.net, entity-framework, ef-code-first, code-first

当我尝试从我的存储库加载我的所有 CssFile 时，我得到一个多重性错误。在调试当前存在的对象时，一切似乎都很好。我试图 Include() 页面但发生了同样的错误。

```
 public CssFile FindByPage(Page page)
    {
        return cssFiles.Where(f => f.PageId == page.Id).Single();
    } 
```

> 违反了多重性约束。Page_CssFile_Target Paycento_Models.DAL.Page_CssFile的作用，多重性1或0..1。

```
 public class Page
    {
        [Key()]
        public int Id { get; set; }
        [ForeignKey("CssFile")]
        public int CssFileId { get; set; }
        public virtual CssFile CssFile { get; set; }
     }

  public class CssFile
    {
        public string FileName { get; set; }
         [Key()]
        [ForeignKey("Page")]
        public int PageId { get; set; }
        public virtual Page Page { get; set; }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:45:53.947

我认为代码应该是

```
public class Page
{
    [Key()]
    public int Id { get; set; }
    //[ForeignKey("CssFile")]
    //public int CssFileId { get; set; }
    public virtual CssFile CssFile { get; set; }
 }

public class CssFile
{
    [Key()]
    public int Id { get; set; }
    public string FileName { get; set; }

    [Required]
    [ForeignKey("Id")]
    public virtual Page Page { get; set; }
  } 
```

CssFile 中不需要“PageId”，因为关系是一对一的，并且主键将被共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:01:32.500

它与延迟加载有关，我试图重新加载已经加载的对象。不知道为什么它崩溃的细节，但设法修复它。

# sql - 我可以与 HAVING 子句一起使用的第一个聚合函数

> ID：10120145
> 
> 赞同：3
> 
> 时间：2012-04-12T08:39:38.497
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, aggregate-functions

我有一个奇怪的要求，我需要在 SQL Server 2008 R2 的存储过程中使用它。

我需要一个返回序列的第一个元素的 FIRST 聚合函数，我将使用它的 with`HAVING`子句。

让我给你举个例子：

```
DECLARE @fooTable AS TABLE(
    ID INT,
    CategoryName NVARCHAR(100),
    Name NVARCHAR(100),
    MinAllow INT,
    Price DECIMAL(18,2)
);

INSERT INTO @fooTable  VALUES(1, 'Cat1', 'Product1', 2, 112.2);
INSERT INTO @fooTable  VALUES(2, 'Cat2', 'Product2', 4, 12.34);
INSERT INTO @fooTable  VALUES(3, 'Cat1', 'Product3', 5, 233.32);
INSERT INTO @fooTable  VALUES(4, 'Cat3', 'Product4', 4, 12.43);
INSERT INTO @fooTable  VALUES(5, 'Cat3', 'Product5', 1, 13.00);

DECLARE @minAllowParam AS INT = 3;

SELECT ft.CategoryName, SUM(ft.Price) FROM @fooTable ft
GROUP BY ft.CategoryName; 
```

如您所见，我们有一个表格和一些虚拟值。在`SELECT`查询中，我们将类别组合在一起并将产品的价格相加。

此查询返回以下结果：

```
CategoryName     TotalPrice
---------------- ----------------
Cat1              345.52
Cat2              12.34
Cat3              25.43 
```

我在这里需要的是这样的：

```
SELECT ft.CategoryName, SUM(ft.Price) FROM @fooTable ft
GROUP BY ft.CategoryName
HAVING GetFIRST(MinAllow) >= @minAllowParam; 
```

在我们使用类似这样的查询的情况下，我们应该能够选择以下结果：

```
INSERT INTO @fooTable  VALUES(2, 'Cat2', 'Product2', 4, 12.34);
INSERT INTO @fooTable  VALUES(4, 'Cat3', 'Product4', 4, 12.43);
INSERT INTO @fooTable  VALUES(5, 'Cat3', 'Product5', 1, 13.00); 
```

由于`INSERT INTO @fooTable VALUES(1, 'Cat1', 'Product1', 2, 112.2);`记录是序列的第一个元素并且`MinAllow`列的值为 2，因此**Cat1**应该超出范围。另一方面，`INSERT INTO @fooTable VALUES(5, 'Cat3', 'Product5', 1, 13.00);`记录的列值为 1，`MinAllow`但它是序列的第二个元素。因此，**Cat3**是安全的，可以选择。

> 注意：`MIN`或者`MAX`不是我要找的！

我知道这个例子在逻辑上没有意义，但另一方面，我有一种情况，它完全可以，而且很难在这里解释。

有什么想法吗？

> **编辑：**
> 
> 我假设我可以通过创建 CLR 用户定义的聚合函数来实现我想要的，但如果有任何其他选择，我不想这样做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:58:02.597

怎么样

```
SELECT f1.CategoryName, SUM(f1.Price) 
FROM @fooTable AS f1
INNER JOIN (
    SELECT MinAllow, CategoryName
    FROM (
         SELECT MinAllow, CategoryName, ROW_NUMBER() OVER (PARTITION BY CategoryName ORDER BY ID) AS m
         FROM @fooTable
    ) AS f
    WHERE m = 1
) AS f2 ON f1.CategoryName = f2.CategoryName
WHERE f2.MinAllow >= @minAllowParam
GROUP BY f1.CategoryName 
```

我知道不是一个非常优雅的查询。如果我再努力一点，也许我可以稍微调整一下！

**编辑**：好的，最里面的子查询应该是不必要的。这也应该有效：

```
SELECT f1.CategoryName, SUM(f1.Price) 
FROM @fooTable AS f1
INNER JOIN (
    SELECT MinAllow, CategoryName, ROW_NUMBER() OVER (PARTITION BY CategoryName ORDER BY ID) AS m
    FROM @fooTable
) AS f2 ON f1.CategoryName = f2.CategoryName
WHERE f2.m = 1 AND f2.MinAllow >= @minAllowParam
GROUP BY f1.CategoryName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:51:48.930

**更新：**一个可读的查询：

```
SELECT ft.CategoryName, SUM(ft.Price) 
FROM fooTable ft
    cross apply
    (
       select top 1 MinAllow
         from fooTable a
        where a.CategoryName = ft.CategoryName
        order by ID
    ) a
where a.MinAllow >= @minAllowParam
GROUP BY ft.CategoryName; 
```

您可以过滤具有第一个（按 id？）MinAllow >= @minAllowParam 的类别：

```
...
inner join 
(
   select 
   -- Add columns you might need
     CategoryName,
     Price
   from
     fooTable
   inner join
   (
     -- First ID in category
     select
       min(id) id
     from
       fooTable
     group by
       CategoryName
   ) firstID
   -- Back to all columns
     ON fooTable.ID = firstID.ID
   -- but only if category sequence starts properly
    AND fooTable.MinAllow >= @minAllowParam
) a
-- Allow MinAllow categories only
  ON fooTable.CategoryName = a.CategoryName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:50:46.233

查看带有分区的 ROW_NUMBER() ：

[http://msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:56:20.647

我知道有两种方法可以实现 FIRST 聚合函数：

```
ROW_NUMBER()

(WHERE ROW_NUMBER_COLUMN = 1) 
```

> [http://msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

和

```
SELECT ...., (SELECT TOP 1 FROM ... WHERE (outer table join) ORDER BY SOMETHING) AS [FIRST]
FROM ... 
```

# html - html5rocks.com 中的 html5 幻灯片中的错误

> ID：10120153
> 
> 赞同：0
> 
> 时间：2012-04-12T08:40:05.550
> 
> 标签：html, google-chrome, cross-browser

我正在尝试将[http://studio.html5rocks.com/samples/slides/index.html](http://studio.html5rocks.com/samples/slides/index.html)用于网站。虽然它在 Firefox 中完美运行，但是当我在 chrome 中使用它时，当我按下右箭头键时，幻灯片不会向前移动。我必须先按左箭头键，然后右箭头键才起作用。我也尝试检查它的javascript，但我不知道如何修复它。是跨浏览器兼容性问题吗？此外，由于 html5rocks.com 有很多来自 Google 的人员在此做出贡献，因此示例至少应该在 Google Chrome 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:48:28.483

我认为该 URL 可能是其幻灯片模板的旧版本的位置。

这是一个没有错误的更新版本：http: [//slides.html5rocks.com/](http://slides.html5rocks.com/)

# asp.net - 母版页上的隐藏字段 - 在 ascx 控件的 vb 代码中添加值

> ID：10120155
> 
> 赞同：1
> 
> 时间：2012-04-12T08:40:12.087
> 
> 标签：asp.net, master-pages, ascx, findcontrol

我目前正在尝试设置位于母版页上的隐藏字段值。我正在尝试从位于我的子页面上的 asc.vb 文件中设置此值

ascx.vb：

```
Dim PortalReq as New HiddenField()
portalReq.ID = "portalReq"
portalReq.Value = "aaaaa"
TryCast(Me.Page.FindControl("aspnetForm"),HtmlForm).Control.Add(portalReq) 
```

当我运行此页面时，出现“对象引用未设置为对象实例”的错误

我在论坛上查看了有关此问题的信息，但似乎无法解决此问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:59:01.513

尝试使用`Me.Parent`而不是`Me.Parent.page`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:48:30.680

使用 Me.Page.Master.FindControl 而不是 Me.Page.FindControl

# jquery - rails 3 best_in_place 编辑在不刷新页面的情况下不起作用

> ID：10120160
> 
> 赞同：4
> 
> 时间：2012-04-12T08:40:50.197
> 
> 标签：jquery, ruby-on-rails, edit-in-place

我从 Bernat 的博客 rails mini tutorial 中获取了评论代码

我尝试使用他的 best_in_place gem 添加就地编辑功能。在大多数情况下，它工作正常

我的代码部署在 [http://falling-spring-3964.herokuapp.com/comments](http://falling-spring-3964.herokuapp.com/comments)

您可以在这里查看代码 [https://github.com/sunnygill/commentsapp](https://github.com/sunnygill/commentsapp)

问题：

*   我添加一条新评论。它完美地显示在页面顶部，但名称的就地编辑不起作用
*   如果我刷新页面然后在节奏编辑工作

问题：

如何在不刷新页面的情况下进行就地编辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:28:40.863

我遇到了同样的问题，我的解决方案是添加`$('.best_in_place').best_in_place();`到`create.js.erb`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T20:57:59.770

您的控制器没有响应更新方法的 JSON。修复起来非常简单：只需在更新操作中添加如下内容。

```
def update
  ...
  respond_to do |format|
    format.html { redirect_to @user}
    format.json { render json: @user }
  end
  ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T17:52:35.257

这是因为在完成 ajax 调用后，您没有将 in-line-edit javascript 插件连接到新创建的 HTML 元素（保持名称可编辑）。我试图在 Github 上查看您的源代码，但它看起来已经过时了。

# c# - C# TCP 服务器软件在 Windows 7 Pro 上的最大 TCP 客户端连接数

> ID：10120163
> 
> 赞同：6
> 
> 时间：2012-04-12T08:40:54.783
> 
> 标签：c#, windows-7, connection, tcpserver

我在我的机器上运行 TCP 服务器。我的操作系统是 Windows 7 Professional。我用 TCP 连接测试软件测试了我的服务器，我认为我的计算机不允许超过 300-400 个连接。我为 1000 个 TCP 客户端测试了我的软件，每次我的软件（或我不知道的计算机）不接受超过 300-400 个连接。

从理论上讲，PC（不是服务器 PC）的最大连接数是多少。我正在 Windows 7 PC 上开发软件，但我将在 Windows Server 上使用该软件，所以我想知道问题是我的操作系统还是我的软件。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:44:16.530

我记得有一个设置可以限制到 TCP 端口的连接数，以避免 DoS 攻击（拒绝服务）。

这是一个可以停用的设置，也许这​​是您达到的限制。

看[这里](http://smallvoid.com/article/winnt-tcpip-max-limit.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:53:25.357

这个问题似乎与可以打开的端口数量有关。默认值相当少。检查[此](http://publib.boulder.ibm.com/infocenter/cbi/v10r1m1/index.jsp?topic=/com.ibm.swg.ba.cognos.c8pp_inst.10.1.1.doc/t_orclsbssktsprts.html)链接以获取在 Windows 上增加它们的步骤

我相信的最大值是 65534

# facebook - 如何在 facebook API 上回复无效电子邮件？

> ID：10120170
> 
> 赞同：0
> 
> 时间：2012-04-12T08:41:28.173
> 
> 标签：facebook, api, email, profile

我请求 facebook api 获取用户个人资料。然后它响应了以下结果。

```
{
...
"email": "821026280500",
...
} 
```

电子邮件字段只是数字字符，是无效的电子邮件。

怎么可能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:56:12.203

从他们的[文档](http://developers.facebook.com/docs/reference/api/user/)来看，这应该是不可能的：

> **包含有效 RFC822 电子邮件地址的**字符串****

 **也许这是一个未经验证的帐户，您可以从验证参数中检查。**

# xcode - 对对象数组中的数据使用 initWithObjects

> ID：10120175
> 
> 赞同：1
> 
> 时间：2012-04-12T08:41:47.097
> 
> 标签：xcode, arrays, uipickerview

可以说我有许多对象：

```
@interface City : NSObject {
    NSString  *name;
    NSString  *country;
    int       yearFirstTimeVisited;
} 
```

它们存储在对象数组中：

```
city = [[City alloc] initWithName:@"London":@"UK",2002];
[pickerValues addObject:city];
city = [[City alloc] initWithName:@"Paris":@"France",2003];
[pickerValues addObject:city];
city = [[City alloc] initWithName:@"LA":@"USA",2003];
[pickerValues addObject:city]; 
```

现在我想将城市加载到拾取轮中。当然，我可以手动执行此操作：

```
pickerValues = [[NSMutableArray alloc] initWithObjects:@"London",@"Paris", @"LA",nil]; 
```

但这是我必须在代码中维护的两组数据的结果。我确信有更好的选择。我在网上搜索过，但找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T17:09:04.603

更好[的是，使用键值编码](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107i)。 `-[NSArray valueForKey:]`会为你做循环。

```
NSArray* pickerNames = [pickerValues valueForKey:@"name"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:52:14.680

您可以为选择器创建一个新数组。

```
NSMutableArray *pickerNames = [NSMutableArray arrayWithCapacity:[pickerValues count]];
for(City *city in pickerValues){
    [pickerNames addObject:[city name]];
} 
```

最好的做法是为您的自定义类添加前缀，`VCCity`而不仅仅是`City`. 我`VC`是从您的用户名中挑选的，但通常会从项目名称中挑选字母。

# air - 应用程序在 AIR 中启动后立即退出

> ID：10120180
> 
> 赞同：0
> 
> 时间：2012-04-12T08:42:22.210
> 
> 标签：air, adobe, flash-builder, blackberry-playbook

我刚开始使用 Adob​​e AIR 和 Adob​​e Flash Builder 4.6 为 BlackBerry PlayBook 开发

为了学习，我开始遵循[BlackBerry 的教程，](https://bdsc.webapps.blackberry.com/air/documentation/ww_air_developing/cs_using_containers_design_layout_ms_1970871_11.html)并按原样复制代码。当我运行应用程序时，它会在 PlayBook 模拟器中显示图标。但只要我点击它，黑莓标志就会在黑框中间显示大约 1 秒钟，然后消失。（即应用程序在启动后立即退出）。

知道这是为什么吗？请注意，我对 Adob​​e 产品和 PlayBook 开发完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:24:29.820

尝试单击 Flash Builder 中的“调试”按钮并仔细观察控制台中的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:54:04.397

如果您在 PlayBook 上已有调试令牌，请确保它没有过期。

# c# - 使用反射更新程序集中的嵌入式资源？

> ID：10120184
> 
> 赞同：1
> 
> 时间：2012-04-12T08:42:53.977
> 
> 标签：c#

我有一个内嵌资源的 exe 文件。我需要编写另一个应用程序来打开 exe，更新它的资源并将其保存为有效的可执行文件。（我无法重新编译它，因为运行它的机器可能没有可用的源代码）。

这是否可能以及如何（我需要一个想法或可能是一个链接，而不是要求一个完整的解决方案）？

编辑：我需要更新的程序集是 .NET 3.5 程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:58:38.417

我想您可以在程序集中添加一个新类，其中包含将操纵这些资源的嵌入式资源。然后使用反射调用操作方法。我的意思是这样的：

```
/*The program which has embedded resources*/
public static class ResourceManager
{
     public static void ChangeResource1(Base64 newResource);
     /*** Other methods***/
}

/*The program that modifies resources*/
MethodInfo[] method = typeof(ResourceManager).GetMethod(ChangeResource1);
method.Invoke(someNewData); 
```

虽然不确定它是否会起作用......

# ruby-on-rails - nginx rails send_file - 从服务器收到的重复标头

> ID：10120197
> 
> 赞同：2
> 
> 时间：2012-04-12T08:43:43.820
> 
> 标签：ruby-on-rails, google-chrome, nginx, unicorn

我已经设置了我们的 Rails 应用程序来提供文件`send_file`，因为我们不想让我们的应用程序忙于提供文件，所以我们将其与`X-Accel-Redirect`标题一起交给 Nginx。为此，我`config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect'`在我的`production.rb`文件中设置，并像这样设置我的 nginx.conf：

```
# In order to get the site running
# symlink this file to /etc/nginx/sites-enabled/production

upstream unicorn-production {
  server unix:/tmp/unicorn.sock fail_timeout=0;
}

server {
  listen 3000;
  server_name production.localhost;
  root /home/deployer/apps/production/current/public;
  access_log /var/log/nginx/production_access.log;
  rewrite_log on;

  try_files $uri/index.html $uri @unicorn;

  location ~ ^/downloads/(.*)$ {
    internal;
    alias /home/deployer/downloads/$1;
  }

  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_redirect off;
    proxy_pass http://unicorn-production;

    proxy_set_header  X-Sendfile-Type   X-Accel-Redirect;
    proxy_set_header  X-Accel-Mapping   /downloads/=/home/deployer/downloads/;

    proxy_connect_timeout 90;
    proxy_send_timeout 90;
    proxy_read_timeout 90;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

在我的控制器操作中，我执行以下操作： `send_file "/home/deployer/downloads/testfile.foo"`

.

这在理论上都应该有效，但是当我访问`mysite.com/mycontroller/download`Chrome 时告诉我`Duplicate headers received from server: Error 349 (net::ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION): Multiple Content-Disposition headers received. This is disallowed to protect against HTTP response splitting attacks.`

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:33:48.627

使用 send_data 时，可以通过将内容处置文件名括在引号中来修复此错误：

从：

```
send_data data, :type => type,
          :disposition=>"attachment; filename=#{filename}" 
```

到：

```
send_data data, :type => type,
          :disposition=>"attachment; filename='#{filename}'" 
```

我假设在使用 send_file 方法时同样适用

见：[https ://github.com/prior/prawnto/pull/16](https://github.com/prior/prawnto/pull/16)

# c# - BEGIN TRANSACTION 是否进行任何类型的行/列锁定？

> ID：10120202
> 
> 赞同：3
> 
> 时间：2012-04-12T08:43:55.300
> 
> 标签：c#, sql, sql-server, sql-server-2008, tsql

我在存储过程中使用开始事务。我有更新数据的代码：

```
UPDATE
     employee
SET
     name = @name,
     surname = @surname
WHERE
     empId = @empid; 
```

SQL Server 是否对正在更新的行或列进行任何锁定？如果不是这种情况，我将如何防止其他用户在当前更新正在进行时进行另一次更新？它不必在存储过程中，C# 也是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:54:29.677

SQL Server 确实会针对正在访问的对象发出锁定 - 就幕后发生的事情而言，锁定变得非常复杂。

对于您的特定更新语句，假设正在更新单行。

*   行：更新锁以获取更新数据的访问权限，然后在修改数据时转换为排他锁。

*   Page : Intent Update，当数据被修改时转换为 Intent Exclusive。

*   表：意图更新。

MS网站上有很多关于锁定模式的细节：http: [//msdn.microsoft.com/en-us/library/ms175519 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms175519(v=sql.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:58:36.913

默认情况下，MSSQL 为 UPDATE 语句创建一个行级锁。将被 UPDATE 语句影响的所有行都将被锁定，以便在更新发生时没有其他用户能够修改这些行。

您可以通过使用锁定提示来修改默认锁定行为：http: [//msdn.microsoft.com/en-us/library/aa213026%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa213026%28v=sql.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:53:42.037

如果这是存储过程中唯一的语句，那么它就是一个事务。请记住，每个语句都是原子的，无论是否有效，您都无需担心锁定。

# apache-camel - 骆驼路线 - 过滤文件名并设置标题值

> ID：10120203
> 
> 赞同：1
> 
> 时间：2012-04-12T08:43:55.690
> 
> 标签：apache-camel, routes

我的要求似乎很简单。我需要轮询单个目录并根据我需要的输入文件的文件名；

a) 设置标头值 b) 将消息定向到特定的 JMS 队列

我已经尝试了几种不同的方法来实现这一点，但根据文档，followng 应该可以工作.. 显然对我来说不是......

```
 <from uri="file:[some input directory]"/>

        <when>
            <simple>${file:name} contains 'new'</simple>
            <setHeader headerName="messageType">
                <constant>NEW</constant>
            </setHeader>
            <to uri="jmsbroker:queue:[queue for new items]"/>
        </when>
        <when>
            <simple>${file:name} contains 'amend'</simple>
            <setHeader headerName="messageType">
                <constant>AMEND</constant>
            </setHeader>
            <to uri="jmsbroker:queue:[queue for amended items]"/>
        </when>
        <when>
            <simple>${file:name} contains 'other'</simple>
            <setHeader headerName="messageType">
                <constant>OTHER</constant>
            </setHeader>
            <to uri="jmsbroker:queue:[queue for other]"/>
        </when>
        <otherwise>
            <bean ref="deadLetterErrorHandler"/>
        </otherwise>

    </route> 
```

非常感谢任何帮助。

问候，安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T16:28:56.333

您缺少条件（请参阅基于内容`<choice>`的[路由器文档](http://camel.apache.org/content-based-router.html)）`<when>`

此外，您的`<otherwise>`部分应该只是路由到错误队列或引发异常......

尝试这样的事情......

```
 <route>
        <from uri="file:/tmp/inbox"/>
        <choice>
            <when>
                <simple>${file:name} contains 'new'</simple>
                <setHeader headerName="messageType">
                    <constant>NEW</constant>
                </setHeader>
                <to uri="jmsbroker:queue:newItems"/>
            </when>
            <otherwise>
                <to uri="jmsbroker:queue:errorQueue"/>
            </otherwise>
        </choice>
    </route> 
```

# asp.net - .NET 的开源安全框架

> ID：10120204
> 
> 赞同：2
> 
> 时间：2012-04-12T08:44:05.937
> 
> 标签：asp.net, .net, security

是否有任何针对 ASP.NET Web 表单或 MVC 的开源安全框架？如果可能的话，我正在寻找对用户进行身份验证和授权功能的东西。请注意，我对 Membership API 不感兴趣，但我正在寻找具有类似功能的框架。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:41:54.030

我只是想我会发布我的开源身份验证框架。你没有对你的用例说太多，所以我不确定它有多合适，但我相信这是一个很好的起点，因为它是 BSD 许可的。

无论如何，我的身份验证框架称为 FSCAuth。它位于[bitbucket](https://bitbucket.org/earlz/fscauth)和 BSD 许可。

基本上，它的目标是不妨碍您，并且比 ASP.Net 的 Membership API 实现起来要简单得多。

它有一些事情要做：

1.  “无状态”身份验证系统。这意味着不需要数据库表来跟踪登录用户，因此可以轻松扩展到多个服务器。
2.  简单但细粒度的授权。一切都在代码中指定，没有任何魔法属性。
3.  开箱即用非常安全。开箱即用，它使用带有盐的 SHA256 散列。[配置BCrypt 支持](http://lastyearswishes.com/blog/view/4e2c779d4aa5d80931d7cb94)也很简单
4.  不要乱用哈希或 cookie。我尽量让你的应用程序变得不安全，这包括处理所有的哈希和 cookie。
5.  开箱即用的 HTTP 基本身份验证，其工作方式与 cookie 身份验证相同
6.  放入现有数据库很简单。它通过使用一个名为 a 的接口来工作`UserStore`。示例：[MongoDB 用户存储](http://lastyearswishes.com/blog/view/4db256c04aa5d8071307ef7a)、[SQL Server 用户存储](http://lastyearswishes.com/blog/view/4df536514aa5d847bb0e89ad)
7.  支持 .Net 2.0+ 并在 Mono 和中等信任下运行

它也有一些限制。

1.  永远不会实施 Windows/域身份验证。
2.  它只有用户和组的概念。用户组角色或类似的东西没有内置任何东西。
3.  它与 IIS 6 有一些问题（不能保护静态页面并且需要大量的配置）
4.  它的配置不使用 Web.Config （我喜欢，但有些人不喜欢）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:59:12.613

我唯一想到的是[DotNetOpenAuth](http://www.dotnetopenauth.net/)但我不知道它是否能满足您的需求。

# c++ - 我们可以使用构造函数和析构函数来代替设置和拆卸吗？

> ID：10120206
> 
> 赞同：3
> 
> 时间：2012-04-12T08:44:15.440
> 
> 标签：c++, unit-testing, cppunit

setup() 和 teardown() 与构造函数和析构函数做同样的事情。如果没有，它们有何不同？如果是，那么为什么我们不能使用构造函数和析构函数来代替它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:36:10.240

SetUp 和 tearDown 不能被构造函数和析构函数替换，因为它们在内部受到断言宏抛出的异常的保护。因此，您可以在 setUp 或 tearDown 中添加断言宏，但不能在析构函数中执行此操作，并且在构造函数中会出现一些问题。

然后 cppunit 受到 Junit 的启发，它实现了相同的概念。然后有可能用另一种 setUp/tearDown 方法替换夹具内的 setUp 和 tearDown 。

# google-maps - FusionTableLayer下的阴影可以去掉或隐藏吗？

> ID：10120209
> 
> 赞同：1
> 
> 时间：2012-04-12T08:44:35.813
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

FusionTableLayer下有一个小阴影：http: [//dl.dropbox.com/u/43127331/colbert_nation/map-simple.html](http://dl.dropbox.com/u/43127331/colbert_nation/map-simple.html) （阴影最好在浅蓝色与深蓝色重叠的地方看到。）有什么办法可以去除还是隐藏阴影？

非常感谢，玛丽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:58:20.060

看起来多边形边框颜色有问题？在[http://dl.dropbox.com/u/43127331/colbert_nation/map_module.js](http://dl.dropbox.com/u/43127331/colbert_nation/map_module.js)我看到多边形样式中的拼写错误：

stokeColor：'#ffffff'，stokeWeight：1，

应该是“stroke”，而不是“stoke”，所以这些设置没有效果。

# android - 如何确定 EditText 中的输入是否为整数？

> ID：10120212
> 
> 赞同：24
> 
> 时间：2012-04-12T08:44:54.983
> 
> 标签：android, validation, android-edittext

嗨，我是 Android 编程的新手。

我正在尝试构建一个包含`edittext`字段和`button`. 当用户输入一个整数时，按钮将引导他们进入下一个活动。但是，如果有办法检查用户输入的类型，我不会。

任何人都可以帮助我吗？非常感谢！</p>

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-11-26T12:36:39.477

从 API 级别 1 开始，Android 提供了一个辅助方法来做到这一点（无需使用正则表达式或捕获异常）：[TextUtils.isDigitsOnly(CharSequence str)](http://developer.android.com/reference/android/text/TextUtils.html#isDigitsOnly%28java.lang.CharSequence%29)

```
boolean digitsOnly = TextUtils.isDigitsOnly(editText.getText()); 
```

请注意，此方法返回**true**且字符串为空：[问题 24965](https://code.google.com/p/android/issues/detail?id=24965)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-12T08:53:15.437

**更新：**

您可以控制 EditText 只接受数字

```
<TextView 
.
.
.
android:inputType="number"
/> 
```

或以编程方式检查

在科特林

```
val number = editText123.text.toString().toIntOrNull() 
val isInteger = number != null 
```

* * *

在 Java 中

```
String text = editText123.getText().toString();
try {
   int num = Integer.parseInt(text);
   Log.i("",num+" is a number");
} catch (NumberFormatException e) {
   Log.i("",text+" is not a number");
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-12T09:34:27.677

如果您希望 EditText 只接受您无法`android:inputType="number"`在布局文件中指定的数字。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-12T08:53:41.160

您可以使用`TextWatcher`for`EditText`获取每次更改的值。`EditText`您需要在 Activity 中添加 TextWatcher 的接口。

```
 mEditText.addTextChangedListener(Your Class Name.this); 
```

在 TextWatcher 的方法中

```
 @Override
public void afterTextChanged(Editable s) {
    Log.v("Log_tag", "After TextChanged" + s.toString());

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    Log.i("Log_tag", "Before TextChanged" + s.toString());

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    Log.e("Log_tag", "ontext Changed" + s.toString());
    //you can match here s with number or integer 
             if(isNumeric( s.toString())){
                      //it is number     
               }
    }

 public static boolean isNumeric(String str)
 {
    return str.matches("-?\\d+(.\\d+)?");
  } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-27T18:10:25.663

以下代码可用于确定数字，

```
boolean isDigits = TextUtils.isDigitsOnly(edtDigits.getText().toString()); 
```

但是，由于此方法也使用空字符串返回 true，因此您可以对空字符串进行验证，如下所示，

```
public boolean isDigits(String number){ 
   if(!TextUtils.isEmpty(number)){
       return TextUtils.isDigitsOnly(number);
   }else{
       return false;
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-14T12:39:35.090

试试这个解决方案。

您需要添加属性 `android:nextFocusDown="@+id/nextedittext_id"`并 `android:singleLine="true"`在您的编辑文本中。

例如：

```
<EditText
        android:id="@+id/ed1"
        android:layout_width="200dp"
        android:nextFocusDown="@+id/ed2"
         android:singleLine="true"
        android:layout_height="wrap_content" />

 <EditText
        android:id="@+id/ed2"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:layout_below="@+id/ed1" /> 
```

并在您的活动中添加以下代码：

```
 editText1.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                String value=s.toString();
                    if(isNumeric(value)){
                        if(Integer.parseInt(value)>=100){
                            editText1.setFocusableInTouchMode(true);
                            editText1.setFocusable(false);
                        }
                }
            }

            @Override
            public void afterTextChanged(Editable s) {
            }
        });
        editText2.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                editText1.setFocusableInTouchMode(true);
                editText1.setFocusable(true);
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

            }

            @Override
            public void afterTextChanged(Editable s) {

            }
        }); 
```

isNumeric 方法同上：

```
 public static boolean isNumeric(String str)
    {
        return str.matches("-?\\d+(.\\d+)?");
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-17T21:48:20.223

我找到了一个更简洁的解决方案，它检查字符串是否是任何类型的数字，包括`integer`,或. `float``long``double`

```
import java.math.BigDecimal;

Boolean isNumber;

try {
    BigDecimal n = new BigDecimal(theStingToCheck);
    isNumber = true;
} catch (Exception e) {
    isNumber = false;
} 
```

# java - 杀死一个 java swing GUI（真的，一切都死了）

> ID：10120213
> 
> 赞同：2
> 
> 时间：2012-04-12T08:44:55.253
> 
> 标签：java, swing, resources, kill, terminate

我以编程方式启动我的 swing GUI 并存储参考。我想终止用户输入的 GUI 以优化性能。

如果我对 JFrame 进行处置，计时器和线程仍在工作。

我怎样才能简单地实现 JFrame 终止及其所有子线程和资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:58:40.267

通常，如果某些事情在 Java 中是不可能的，那是因为它不能在多个平台上移植。不允许关闭 Java SWING 事件处理程序的设计决定可能是因为某些操作系统不允许两次启动 GUI 进程。

再说一次，为什么你认为关闭这些线程很重要？问自己一个问题：是因为在调试模式下查看程序时它们会惹恼你，还是对性能有真正**可衡量**的影响？

# c# - 在 JSP 中 tag dll (usercontrol) not showing I have a control in c# now I want to use this usercontrol in JSP I have used in < Object > tag to display that dll. it executes without exception but not displaying myControl, ju 问问题 问问题 2012-04-12T08:45:10.023 227 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a control in c# now I want to use this usercontrol in JSP I have used in < Object > tag to display that dll. it executes without exception but not displaying myControl, just emboss that component space. could not print the report in reportViewer in >net how to print the report in report virewer in Asp.Net2010 (C#).My printing button is visible in IE but it doesn't shown in FireFox c#jspjsp-tags 4 0 回答 0 Related 3 java - 用 Java 打印时，来自 DB 的排序结果集未按顺序显示 0 mysql - MySQL 连接以恒定的时间间隔突然激增 1 ruby-on-rails - 突然回形针不起作用 2 regex - htaccess 特定文件夹重定向到子域 1 c# - 如何从 C# 程序修改 MS Access 数据库属性集合（不是数据！）？ 0 jekyll - 在 Jekyll 中显示 iCal 的事件 0 apache-flex - Flex 套接字策略仅在我将域设置为 * 时才有效 4 java - 字符串中 hh:mm:ss 的 Java 正则表达式匹配 1 android - android聊天应用程序，如何实时更新数据库？ 1 c# - 具有空闲条件的任务计划程序中的任务启动但从不运行 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10120216
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, jsp, jsp-tags

I have a control in c# now I want to use this usercontrol in JSP I have used in < Object > tag to display that dll. it executes without exception but not displaying myControl, just emboss that component space.

```
<OBJECT id="phoneControl" classid="phoneControl.dll#phoneControl.UserControl1" width="50%"></OBJECT> 
```

# c# - 无法在 >net 中的 reportViewer 中打印报告

> ID：10120217
> 
> 赞同：1
> 
> 时间：2012-04-12T08:45:11.413
> 
> 标签：c#, reportviewer

如何在 Asp.Net2010 (C#) 的报告 virewer 中打印报告。我的打印按钮在 IE 中可见，但在 FireFox 中不显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:48:10.790

截至 2007 年，[非 IE 浏览器无法](https://social.msdn.microsoft.com/Forums/en-US/d9f2b692-929e-4279-97f5-2ceaa55ef17e/print-search-button-not-visible-in-reportviewer-control-in-firefox?forum=sqlreportingservices)打印：

[2011 年最近的](https://web.archive.org/web/20150702203646/http://www.visualwebgui.com:80/Developers/Forums/tabid/364/forumid/56/postid/47090/scope/posts/Default.aspx)一篇文章表明情况仍然如此。

[这](https://cafalse.blogspot.com/2011/04/reportviewer-print-button-for-firefox.html)可能会提供一种解决方法。

# c# - Get HTML source code from iFrame in C#

> ID：10120220
> 
> 赞同：0
> 
> 时间：2012-04-12T08:45:25.877
> 
> 标签：c#, asp.net, iframe

I am working on iframes in ASP.NET. Below is the HTMlL code for iframe:

```
<iframe id="mainiFrame" name="mainiFrame" scrolling="auto" frameborder="2" 
            height="400px" width="500px"            
            src="" 
            runat="server"></iframe> 
```

I am able to set the source of the iframe:

```
protected void Button1_Click(object sender, EventArgs e)
    {
        mainiFrame.Attributes["src"] = "http://roboticsindia.com";  
    } 
```

How do i get the HTML source code from the iFrame?

Regards, Anil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:55:06.247

我不知道 iFrame 的 Html 源是否是属性，但是您可以这样做。

```
System.Net.WebClient wc = new System.Net.WebClient();
String s = wc.DownloadString(mainiFrame.Attributes["src"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:56:32.850

如果页面“http://roboticsindia.com”不在您的项目中，您可以尝试使用 Webclient 来获取 HTML 内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:10:54.883

我们可以设置 HTML I 框架属性如下。“testframe”是 I 框架的 id

```
this.testframe.Attributes["src"] = "http://examples.com"; 
```

# java - 关于 dropbox 的 restfull api。为什么这两个动作属于不同的种类

> ID：10120224
> 
> 赞同：0
> 
> 时间：2012-04-12T08:45:32.740
> 
> 标签：java, rest, dropbox

我看了一下 Dropbox 的所有其他 API。有两种类型：文件（put、metadata.share 等）和 opts（如 /fileops/move、/fileopt/copy 等）。但是我很困惑：为什么restore/share方法属于文件类型。因此创建文件夹属于文件操作类型？一般来说，我认为它们都是动作。为什么要遵循这样的类型？有人知道吗？提前致谢。

[https://www.dropbox.com/developers/reference/api#fileops-move](https://www.dropbox.com/developers/reference/api#fileops-move)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:02:17.350

正如文档所述：

> 文件操作
> 
> 各种fileops 调用提供了标准的文件操作。可以移动、复制或删除文件和文件夹。可以创建文件夹。

fileopts 是标准操作。像共享这样的操作不是标准的文件操作。

# javascript - javascript函数限制

> ID：10120225
> 
> 赞同：0
> 
> 时间：2012-04-12T08:45:42.773
> 
> 标签：javascript, function, limit

我有一个 javascript 函数，可以创建用于上传图像的输入字段。

我有这个代码：

```
<script type="text/javascript">
    function add_input(){ 
        var wo = document.getElementById('wo');
        var li = document.createElement('li');

        var input = document.createElement('input');
        input.type = 'file';
        input.name = 'image[]';

    li.appendChild(input);     
    li.appendChild(document.createTextNode(' '));

    var button=document.createElement('input');
        button.type = 'button';
        button.className = 'button small';
        button.onclick=function(){delete_input(this);};
        button.value = 'delete';

    li.appendChild(button);
    wo.appendChild(li);
    }

    function delete_input(feld){ 
    feld.parentNode.parentNode.removeChild(feld.parentNode);
    }
</script> 
```

现在我的问题是我想创建最多 10 个输入字段。我以前从未使用过javascript，也不知道如何限制它。

如果有人能告诉我如何意识到我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:51:52.740

修改您的脚本，使其具有：

```
<script type="text/javascript">

    var max = 10;
    var current = 0;

    function add_input(){ 
        if(current < max){
            current++;
            //...do everything in here for append
        }
    }

    function delete_input(feld){ 
        if(current > 0){
            current--;
            feld.parentNode.parentNode.removeChild(feld.parentNode);
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:01:56.320

在函数的开头，计算已经存在的项目数量，如果有 10 个则离开。我在这里使用“li”进行了计算，但您可以计算其他任何合适的值：

```
<script type="text/javascript">
function add_input(){
    var wo = document.getElementById('wo');
    var objList  = wo.getElementsByTagName('li');
    var soFar = objList.length;
    if (soFar > 9) {
        alert ("yikes");
        return;
    }
    var li = document.createElement('li');

    var input = document.createElement('input'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:09:52.450

最好根据您给出的代码定义一个全局计数器，这里是修改：

```
<script type="text/javascript">
var counter = 0;

function add_input(){ 
  if (counter >= 10) 
  return false;
  var wo = document.getElementById('wo');
  var li = document.createElement('li');

  var input = document.createElement('input');
  input.type = 'file';
  input.name = 'image[]';

  li.appendChild(input);     
  li.appendChild(document.createTextNode(' '));

  var button=document.createElement('input');
  button.type = 'button';
  button.className = 'button small';
  button.onclick=function(){delete_input(this);};
  button.value = 'delete';

  li.appendChild(button);
  wo.appendChild(li);
  counter ++;
}

function delete_input(feld){ 
  feld.parentNode.parentNode.removeChild(feld.parentNode);
  counter --;
}

</script> 
```

# javascript - 从 topic.subscribe 的回调中访问小部件

> ID：10120226
> 
> 赞同：1
> 
> 时间：2012-04-12T08:45:44.437
> 
> 标签：javascript, dojo, publish-subscribe

我正在尝试使用[此处](http://dojotoolkit.org/documentation/tutorials/1.7/events/)记录的 Dojo 的 pub/sub 主题模块。我正在订阅自定义小部件`startup()`方法内的事件，并希望在触发主题时修改小部件。

**如何从`topic.subscribe()`回调中访问小部件？**在回调内部，`this`不引用小部件；我不确定它指的是什么......该`this`对象包括`emit`和`on`功能，以及一个`declaredClass`看起来像`"uniqName_0"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:09:09.440

在widget方法内部订阅时，你想用来`dojo/_base/lang::hitch`改变回调函数的作用域，这里`this`指的是widgets实例。你有几个选择：

1.  匿名函数：

    ```
    topic.subscribe("topic/some", lang.hitch(this, function() {
        // your callback logic here
    })); 
    ```

2.  小部件的方法：

    ```
    topic.subscribe("topic/some", lang.hitch(this, "callbackMethod")); 
    ```

看看它的实际效果：http: [//jsfiddle.net/phusick/N7NGB/](http://jsfiddle.net/phusick/N7NGB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:31:56.873

小部件有一些方便的方法可以处理 phusick 所描述的问题。

在启动方法中，可以写

```
startup: function() {
  this.inherited(arguments);

  this.subscribe('topic/some', '_onTopic');
},

_onTopic: function() {
  this.something // 'this' is the widget
} 
```

小部件有其他便利方法

```
this.unsubscribe
this.connect
this.disconnect 
```

使用`subscribe`and`connect`方法时，在widget被销毁时会自动调用`unsubscribe`and方法。`disconnect`

[http://dojotoolkit.org/api/dijit/_WidgetBase](http://dojotoolkit.org/api/dijit/_WidgetBase)

# android - android canvas is not drawing Arc

> ID：10120229
> 
> 赞同：4
> 
> 时间：2012-04-12T08:45:47.263
> 
> 标签：android

I am trying to draw on canvas an arc this way :

```
canvas.drawArc(getCircleRect(), 90, 270, true, PaintCreator.createStrokePaintForArc()); 
```

.. but there is no visible effect

The bounds of the Rect getting from getCircleRect() are correct , and I can draw the rect this way (just for a test) :

```
canvas.drawRect(getCircleRect(), PaintCreator.createStrokePaintForArc()); 
```

any idea why drawRect is working and drawArc not ? thanx

* * *

```
 @Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.save();
    // not working
    canvas.drawArc(getCircleRect(), 90, 270, true, PaintCreator.createFillPaintArc());
    // working well
    canvas.drawRect(getCircleRect(), PaintCreator.createStrokePaintForArc());
    // working well
    canvas.drawCircle(x, y, RADIUS, fillPaint);
    move = false;
    canvas.restore();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:22:09.650

我不确定，但我认为你的油漆对象可能是问题所在。尝试这个

```
Paint mBgPaints = new Paint();
mBgPaints.setAntiAlias(true);
mBgPaints.setStyle(Paint.Style.FILL);
mBgPaints.setColor(Color.BLUE);
mBgPaints.setStrokeWidth(0.5f);
canvas.drawArc(getCircleRect(), 90, 270, true, mBgPaints); 
```

# c# - C# Linq query conversion for order an ObservableCollection

> ID：10120231
> 
> 赞同：1
> 
> 时间：2012-04-12T08:45:50.573
> 
> 标签：c#, vb.net, linq

I've a structure collection like this:

```
Jet     Owner   Item    Comp
AAAA    AAAA    101     2210
AAAA    AAAA    202     2220
AAAA    AAAA    301     5550
AAAA    AAAA    301     5560
AAAA    2210    101     6789
AAAA    2220    202     ABABA
AAAA    5550    301     XXXX0
AAAA    5550    301     XXXX1
AAAA    5560    301     YYYY0
AAAA    5560    301     6612
AAAA    6789    101     ZZZZZ.0
AAAA    6789    101     ZZZZZ.1
AAAA    6789    101     ZZZZZ.2
AAAA    6789    101     ZZZZZ.3
AAAA    ABABA   202     TTTTT.0
AAAA    ABABA   202     TTTTT.1
AAAA    ABABA   202     TTTTT.2
AAAA    6612    301     ZZZZZ.0
AAAA    6612    301     ZZZZZ.1
AAAA    6612    301     ZZZZZ.2
AAAA    6612    301     ZZZZZ.3
AAAB    ...     ...     ..... 
```

I need to order it for have a result like this:

```
Jet     Owner   Item     Comp
AAAA    AAAA    101      2210
AAAA    2210    101      6789
AAAA    6789    101      ZZZZZ.0
AAAA    6789    101      ZZZZZ.1
AAAA    6789    101      ZZZZZ.2
AAAA    6789    101      ZZZZZ.3
AAAA    AAAA    202      2220
AAAA    2220    202      ABABA
AAAA    ABABA   202      TTTTT.0
AAAA    ABABA   202      TTTTT.1
AAAA    ABABA   202      TTTTT.2
AAAA    AAAA    301      5550
AAAA    5550    301      XXXX0
AAAA    5550    301      XXXX1
AAAA    AAAA    301      5560
AAAA    5560    301      YYYY0
AAAA    5560    301      6612
AAAA    6612    301      ZZZZZ.0
AAAA    6612    301      ZZZZZ.1
AAAA    6612    301      ZZZZZ.2
AAAA    6612    301      ZZZZZ.3
AAAB    ...       ...      ..... 
```

I want to order by Jet, then where in the comp I find some there's in the Owner, put in the lines after the main owner of the relative component, then order by owner and in the last order by item. I've make the result with a C# linq query, but I need to have the same resul in a VB.NET linq query. The C# Linq query is:

```
 var orderedData =(from d in collection
        group d by d.Jet into g
        orderby g.Key
        from d in g
        select new[] {d}.Union(g.Where(c => c.Owner == d.Comp)) into withChildren
        from wc in withChildren
        orderby wc.Item
        select wc).Distinct(); 
```

I've tried with this in VB.NET but dosn't work:

```
Dim orderedData = (From d In collection 
              Group d By d.Jet Into Group 
              Order By Group 
              From d In Group 
              Select New withChildren With {d}.Union(gr.Where(Function(c) c.Owner = d.Comp))) 
                          from wc in withChildren
                          Order By wc.pos 
                          Select wc).Distinct
                          from wc in withChildren
                          Order By wc.pos 
                          Select wc).Distinct 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:30:08.730

试试看：

`Dim orderedData = (From withChildren In From g In From d In collectionGroup d By d.JetOrder By g.KeyFrom d In gNew () {d}.Union(g.Where(Function(c) c.Owner = d.Comp))From wc In withChildrenOrder By wc.Itemwc).Distinct()`

# c# - Closing a process that open in code

> ID：10120232
> 
> 赞同：3
> 
> 时间：2012-04-12T08:45:53.397
> 
> 标签：c#, ms-word, ms-office, word-template

I create a WordTemplate with some placeholders for field,in code I insert value in this placeholders and show it to user.

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string DocFilePath = "";
        //string FilePath = System.Windows.Forms.Application.StartupPath;
        object fileName = @"[...]\asset\word templates\FormatPeygiri1.dot";
        DocFilePath = fileName.ToString();

        FileInfo fi = new FileInfo(DocFilePath);
        if (fi.Exists)
        {
            object readOnly = false;
            object isVisible = true;

            object PaperNO = "PaperNO";
            object PaperDate = "PaperDate";
            object Peyvast = "Peyvast";

            object To = "To";
            object ShoName = "ShoName";
            object DateName = "DateName";

            Microsoft.Office.Interop.Word.Document aDoc = WordApp.Documents.Open(ref fileName, ref missing, ref readOnly,
               ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
               ref isVisible, ref isVisible, ref missing, ref missing, ref missing);

            WordApp.ActiveDocument.FormFields.get_Item(ref PaperNO).Result = TextBox_PaperNO.Text;

            string strPaperDate = string.Format("{0}/{1}/{2}", PersianDateTimeHelper.GetPersainDay(DateTimePicker_PaperDate.SelectedDate),
                                               PersianDateTimeHelper.GetPersainMonth(DateTimePicker_PaperDate.SelectedDate),
                                               PersianDateTimeHelper.GetPersainYear(DateTimePicker_PaperDate.SelectedDate));

            WordApp.ActiveDocument.FormFields.get_Item(ref PaperDate).Result = strPaperDate;

            WordApp.ActiveDocument.FormFields.get_Item(ref Peyvast).Result = TextBox_Peyvast.Text;

            WordApp.ActiveDocument.FormFields.get_Item(ref To).Result = TextBox_To.Text; ;
            WordApp.ActiveDocument.FormFields.get_Item(ref ShoName).Result = TextBox_ShoName.Text;

            string strDateName = string.Format("{0}/{1}/{2}", PersianDateTimeHelper.GetPersainDay(DateTimePicker_DateName.SelectedDate),
                                               PersianDateTimeHelper.GetPersainMonth(DateTimePicker_DateName.SelectedDate),
                                               PersianDateTimeHelper.GetPersainYear(DateTimePicker_DateName.SelectedDate));

            WordApp.ActiveDocument.FormFields.get_Item(ref DateName).Result = strDateName;

            aDoc.Activate();
            WordApp.Visible = true;
            aDoc = null;
            WordApp = null;
        }
        else
        {
            MessageBox1.Show("File Not Exist!");
        } 
```

it work good and successfully! but when a user close the Word,her Process not closed and exists in Task Manager Process list. this process name is WINWORD.exe I know that I can close process whit code [*process.Kill()*] but I don't know which process that I should to kill. if I want to kill all process with name [WINWORD.exe] all Word window closed.but I want to close specific Word window and kill process that I opened.

How to do it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:24:30.793

如果 Quit 方法无济于事（只需将 excel 对象替换为 winword 对象）：http: [//blogs.msdn.com/b/msdnforum/archive/2010/03/09/excel-does-not-quit-来自网络侧的自动化后.aspx](http://blogs.msdn.com/b/msdnforum/archive/2010/03/09/excel-does-not-quit-after-automation-from-net-side.aspx)

编辑：和核心解决方案：

```
public static class WinWordKiller
{
        [DllImport("user32.dll", EntryPoint = "GetWindowThreadProcessId", SetLastError = true,
CharSet = CharSet.Unicode, ExactSpelling = true,
CallingConvention = CallingConvention.StdCall)]
    private static extern long GetWindowThreadProcessId(long hWnd, out long lpdwProcessId);

    public static void Kill(ref Microsoft.Office.Interop.Word.Application app)
    {
        long processId = 0;
        long appHwnd = (long)app.Hwnd;

        GetWindowThreadProcessId(appHwnd, out processId);

        Process prc = Process.GetProcessById((int)processId);
        prc.Kill();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:16:12.520

为什么不将[Microsoft.Office.Interop.Word.Application.Quit](http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word.applicationclass.quit%28v=office.11%29.aspx)与您打开的应用程序 (WordApp) 一起使用？

我应该注意这样做，您**当然**应该保留您的 WordApp 引用，并且在您调用 Quit 之前不要将其无效。

# jquery - syncfusion 自动完成文本框不适用于 jquery 对话框

> ID：10120235
> 
> 赞同：1
> 
> 时间：2012-04-12T08:46:02.693
> 
> 标签：jquery, syncfusion

我在 jquery 对话框中使用同步融合自动完成 texbox。在 mvc3 实体框架中。但我在文本框中没有得到任何价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:55:37.793

出现问题的原因是 AutoComplete 建议列表的 z-index 值默认设置为 1，而 jquery 对话框控件的 z-index(default 1000) 最高，因此建议列表在对话框控件后面弹出。

请使用以下 CSS 覆盖来配置 z-index 值以解决问题。

```

   .Autocomplete_SuggestionList
     {
         z-index:2000 ！重要；
     }

```

# jquery - 如何用 dblclick 事件打开一个花哨的盒子

> ID：10120240
> 
> 赞同：3
> 
> 时间：2012-04-12T08:46:17.187
> 
> 标签：jquery, fancybox, double-click

我的问题在标题中：如何使用 dblclick 事件打开 jquery fancybox（http://www.fancybox.net/）？

提前感谢您的回复:)

编辑：我试过了，但它似乎不起作用，我真的不知道为什么：

```
$("#id").dblclick(function(){

    $("#id").fancybox({
        ...
    });
    $("#id").click(); //Trigger click to open the fancy because dblclick doesn't open the fancy
    $("#id").unbind('click.fb'); //unbind the click fancybox event

}); 
```

想法是在触发 dblclick 时处理花式框，然后触发单击以打开花式，然后取消绑定 click.fb 事件以防止在用户触发单击时打开花式框。不幸的是， unbind('click.fb') 似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:32:48.633

我不确定我是否完全明白这个问题，但试试这个：

```
$('button').dblclick( function() {
    $.fancybox({
        href: '#fancybox'
        // other options here
    });
}); 
```

无需解绑任何东西。

编辑：这是一个 jsfiddle 示例。

[http://jsfiddle.net/abqTD/3/](http://jsfiddle.net/abqTD/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T18:50:04.983

```
 $(".fbox").dblclick( function () {  $.fancybox({
   'transitionIn'  : 'elastic',
   'transitionOut' : 'elastic',
   'speedIn'   : 600,
   'speedOut'    : 200,
   'href': $(this).attr('href')
   // 'overlayShow' : false
   });
 });

...<img src="path/someimage_thumb.jpg" href="path/someimage.jpg" class="fbox"> 
```

我正在尝试做类似的事情，但在课堂上。试图将它与[jquery image picker](http://rvera.github.io/image-picker/)集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:52:13.260

试试 jQuery .trigger() 方法。这样，您应该有另一个元素，例如用于激活 fancybox 的按钮。

```
$("button").dblclick( function() {
    $("#fancybox").trigger('click');  

});

$("#fancybox").click( $(this).fancybox(){
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'speedIn'       :  600, 
        'speedOut'      :  200, 
        'overlayShow'   :  false
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:55:14.313

使用 fancybox 方法来做到这一点。

HTML

```
img src="images/sample_image.png" alt="Sample Title" class="fancybox" 
```

jQuery

```
$(document).ready(function() {
    $('.fancybox').dblclick(function() {
        var imgSrc = $(this).attr('src'),
            imgTitle = $(this).attr('alt');

        $.fancybox.open({href : imgSrc , title : imgTitle });
    });
}); 
```

希望这有帮助... ;)

# apache - 通过 Apache POI 从 Table 的 Cell 中读取图像数据

> ID：10120241
> 
> 赞同：0
> 
> 时间：2012-04-12T08:46:20.160
> 
> 标签：apache, apache-poi

我被困在一个地方，我需要立即帮助，以下是我的问题。

实际上我正在使用 Apache POI (XWPF) 来读取 word (.docx) 文档，我能够成功读取除了表格单元格内的图像之外的表格数据。由于我是这个 Api 的新手，但根据我的理解，我认为我们也可以从单元格中读取图像字节数据。

```
POIXMLDocumentPart pictureData=(POIXMLDocumentPart)imageCell.getPart();

PackageRelationship packageRelationship=pictureData.getPackageRelationship();

System.out.println("Source URI:"+packageRelationship.getSourceURI());

System.out.println("Target URI:"+packageRelationship.getTargetURI()); 
```

在上面的代码中，我可以将 Image URI 作为 Target，但我不知道如何获取 Image 的二进制数据。

任何想法的朋友...

谢谢，-贾维德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:15:54.357

首先，从表格单元格中，[获取段落列表](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFTableCell.html#getParagraphs%28%29)。接下来，从[段落](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFParagraph.html)中，获取[Runs 列表](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFParagraph.html#getRuns%28%29)。最后，从 run 中，[获取 run 中嵌入的图片列表，](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFRun.html#getEmbeddedPictures%28%29)你基本上就在那里了。

Apache Tika 中的 .docx 文本提取器展示了如何执行所有这些操作，请参阅[它的源代码](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XWPFWordExtractorDecorator.java)了解详细信息。不过，一般来说，它就像

```
for (XWPFParagraph p : cell.getParagraphs()) {
  for (XWPFRun run : p.getRuns()) {
    for (XWPFPicture pic : run.getEmbeddedPictures()) {
       byte[] pictureData = pic.getPictureData().getData();
    }
  }
} 
```

.

还有一种不太常见的将图片嵌入到 .docx 文件中的方法，这种方法使用起来更加繁琐。在 XWPFDocument 上，您可以使用[getAllPictures()](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFDocument.html#getAllPictures%28%29)和[getAllPackagePictures()](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/XWPFDocument.html#getAllPackagePictures%28%29)来追踪其他人，但这不会告诉您图片属于文件的哪个位置。

# spring-mvc - 加载servlet-context（Spring MVC）时未加载应用程序上下文

> ID：10120242
> 
> 赞同：0
> 
> 时间：2012-04-12T08:46:24.657
> 
> 标签：spring-mvc

我的问题基于我的[另一个问题](https://stackoverflow.com/questions/10115037/service-injection-into-controller-spring-mvc/10115346#comment12962029_10115346)以避免再次上传相同的文件，基本上我已经在我的应用程序上下文中自动连接了我的 Daos 和服务，但是在加载 servlet 上下文时出现以下错误

```
Apr 12, 2012 9:54:31 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Apr 12, 2012 10:04:59 AM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Apr 12, 2012 10:04:59 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Apr 12, 2012 10:05:00 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'controllerServlet': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.phumzile.acme.services.ProductService com.phumzile.acme.client.web.controller.ControllerServlet.productService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.phumzile.acme.services.ProductService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:536)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.HTMLManagerServlet.upload(HTMLManagerServlet.java:334)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:211)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.phumzile.acme.services.ProductService com.phumzile.acme.client.web.controller.ControllerServlet.productService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.phumzile.acme.services.ProductService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 56 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.phumzile.acme.services.ProductService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 58 more
Apr 12, 2012 10:05:00 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext 
```

我用 JUnit 测试了 ProductService 的接线，效果很好

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "/test-app-config.xml" })
public class ProductServiceTest {
    private ProductService productService;

    Logger logger = Logger.getLogger(this.getClass().getName());

    @Autowired
    public void setService(ProductService productService) {
        this.productService = productService;
    }

    @Test
    public void testGetProductById(){
        logger.log(Priority.INFO, "Inside bookDaoTest.testSavebook");
        Book book = new Book();
        book.setIsbn("0141326816, 9780141326818");
        book.setProductTitle("Spud - The Madness Continues");
        book.setShortDescription("Fiction - Romance");
        Price price = new Price(200.0,295.0);
        book.setProductPrice(price);
        Supplier supplier = new Supplier("Penguin");
        book.setSupplier(supplier);
        productService.saveProduct(book);
        String id = book.getProductId();
        Product product = productService.getProductById(id);
        Assert.assertTrue((product.getProductPrice().getCostPrice())==200.0);
        productService.deleteProduct(product);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:26:31.270

As you log says:

```
: No matching bean of type [com.phumzile.acme.services.ProductService] found for dependency 
```

I suppose, the problem is with this bean. Maybe you forgot to declare it in the xml?

# c# - Linq 加入 4 列表

> ID：10120243
> 
> 赞同：-6
> 
> 时间：2012-04-12T08:46:30.790
> 
> 标签：c#, linq, list, join

我有 4 个需要加入的列表

```
public class Person
{
    public int personid { get; set; }
    public string fname { get; set; }
    public string lname { get; set; }
}

public class Department
{
    public int depid { get; set; }
    public string departmentname { get; set; }
}

public class Group
{
    public int groupid { get; set; }
    public int depid { get; set; }
    public string groupname { get; set; }
}

public class UploadFile
{
    public int fileid { get; set; }
    public int personid { get; set; }
    public int groupid{ get; set; }
    public string filename { get; set; }
}

List<Person> Persons=GetPersons();
List<Department> departmentlist=getDepartments();
List<Group> grouplist=getgroups();
List<UploadFile> filelist=getFiles(); 
```

我需要一个像这样的输出：

```
fileid fname 文件名路径                         

1 个样本名 Mydoc 部门名+">"+组名

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:54:56.410

您可以使用[Zip](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：

```
List persons=GetPersons();
List departmentlist=getDepartments();
List grouplist=getgroups();
List filelist=getFiles();

var result = persons.Zip(departmentlist, (person, department) => person.fname + " " + department.departmentname)
                    .Zip(grouplist, (personAndDepartment, group) => personAndDepartment + " " + group.groupName);

// etc ... 
```

# c# - C# 强制打印作业为单工（打印机默认为双工）

> ID：10120245
> 
> 赞同：3
> 
> 时间：2012-04-12T08:46:41.397
> 
> 标签：c#, printing, duplex, simplex

**问题**
1\. 我们的客户有一台配置为双面打印的联网打印机（无法更改）。
2\. 我们必须在这台打印机上打印 A4 纸标签，但它不能处于双面模式，因为标签会绕过滚筒并弄脏。
3\. 当我们打印标签时，打印作业仍处于双面模式（通过打印到文件检查 PCL 输出来验证）。

线

```
e.PageSettings.PrinterSettings.Duplex = Duplex.Simplex; 
```

没有效果。

我们如何强制在 Simplex 中打印页面？

**我们的代码**
我们正在使用 .Net PrintDocument / PrintController 类打印到 A4 打印机，如下所示。此代码来自一个测试应用程序，该应用程序可以通过一个简单的示例重现该问题。

我们有一个自定义的 PrintDocument 类：
a) 在 OnQueryPageSettings 中设置打印设置

```
protected override void OnQueryPageSettings(QueryPageSettingsEventArgs e)
{
    // This setting has no effect
    e.PageSettings.PrinterSettings.Duplex = Duplex.Simplex;
} 
```

b) 在 OnPrintPage 方法中生成页面内容：

```
protected override void OnPrintPage(PrintPageEventArgs e)
{
    Graphics g = e.Graphics;

    int fs = 12;
    FontStyle style = FontStyle.Regular;
    Font baseFont = new Font("Arial", fs, style);

    PointF pos = new PointF(10, 10);

    g.DrawString("This is a test page", baseFont, Brushes.Black, pos);

    e.HasMorePages = false;
} 
```

为了开始这一点，我们创建了一个 PrintDocument 的实例，为其分配 StandardPrintController 并调用 Print()：

```
void DoPrint()
{
    MyPrintDocument mydoc = new MyPrintDocument();

    PrinterSettings ps = ShowPrintDialog();
    if (ps != null)
    {
        mydoc.PrinterSettings = ps;
        StandardPrintController cont = new StandardPrintController();
        mydoc.PrintController = cont;
        mydoc.Print();
    }
} 
```

谢谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:07:06.753

在 OnQueryPageSettings 上设置 PrinterSettings.Duplex 属性无效，您需要在调用 Print() 之前设置该属性。（现在我想起来似乎很明显！）

这有效：

```
void DoPrint()
{
    MyPrintDocument mydoc = new MyPrintDocument();

    PrinterSettings ps = ShowPrintDialog();
    if (ps != null)
    {
        ps.Duplex = Duplex.Simplex; // This works

        mydoc.PrinterSettings = ps;
        StandardPrintController cont = new StandardPrintController();
        mydoc.PrintController = cont;
        mydoc.Print();
    }
} 
```

# php - 检查 SMTP 邮件是否发送

> ID：10120246
> 
> 赞同：1
> 
> 时间：2012-04-12T08:46:49.790
> 
> 标签：php, email, smtp

这是我发送电子邮件的 smtp 代码：

```
function smtp_mail($from, $to, $subject, $message, $headers="", $params=array()) {
$errno = "";
$errstr = "";
$smtpConnect = fsockopen("mail2.allramhosting.com", "25", $errno, $errstr, 20);

if (!empty($smtpConnect)) {

    if ($params['use_html']) {
        $extra_headers .= "MIME-Version: 1.0\nContent-Type: text/html; charset=\"utf-8\"\nContent-Transfer-Encoding: 7bit\n";
    }
    $headers = "To: " . $to . "\nFrom: " . $from . "\nSubject: " . $subject . "\nDate: " . date('r') . "\n" . $extra_headers . $headers;

    if (substr($headers, -1) == "\n") $headers = substr($headers, 0, -1); // The last character should not be newline

    fputs($smtpConnect, "HELO networkssms.com\r\n");
    fputs($smtpConnect, "MAIL FROM: " . $from . "\r\n");
    fputs($smtpConnect, "RCPT TO: " . $to . "\r\n");
    fputs($smtpConnect, "DATA\r\n");
    fputs($smtpConnect, $headers . "\r\n\r\n");
    fputs($smtpConnect, $message . "\r\n.\r\n"); // send message and finish
    fputs($smtpConnect,"QUIT" . $newLine);
    fclose($smtpConnect);
    return true;
}
return false; 
```

}

这是smtp邮件功能的调用代码：

```
smtp_mail($from, $user_to ,$user_subject, $user_message,"MIME-Version: 1.0\nContent-Type: text/html; charset=\"utf-8\"\nContent-Transfer-Encoding: 7bit\n"); 
```

`$from,$user_to ,$user_subject, $user_message`有自己的价值观。

我想检查电子邮件是否已发送，如果未发送，我想再次发送。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:59:08.553

首先，您应该检查连接是否正常：

```
$smtpConnect = fsockopen("mail2.allramhosting.com", "25", $errno, $errstr, 20); 
```

`fsockopen``false`如果连接失败则返回。所以添加下面提到的代码

```
if (!$smptConnect) {
   echo "ERROR: $errno - $errstr".PHP_EOL;
   return false;
} else {
   // send 
   return true;
} 
```

您向 SMTP 服务器发出的每个命令都会给出一个数字响应 - 您应该在继续执行下一个命令之前检查响应是否正确 - 一旦您阅读了最后一条评论并且一切正常 - 这是确认电子邮件已发送..[见这个链接](http://www.greenend.org.uk/rjk/tech/smtpreplies.html)解释了你应该从每个命令中得到什么响应

所以例如

```
fputs($smtpConnect, "HELO networkssms.com\r\n"); 
```

应该用代码`250`来检查你可以做的事情：

```
fputs($smtpConnect, "HELO networkssms.com\r\n");
$rcode = fgets($smtpConnect, 256);
if (substr($rcode, 0, 3)!= '250') {    // check the first 3 characters ie the response code
   echo "email sending failed" . PHP_EOL;
} 
```

您需要为每个命令执行此操作 - 检查每个命令的响应代码是否符合预期。您可以创建一个简单的函数来检查每个响应

```
function check_response($smtpConnect,$expected_response) {
    $rcode = fgets($smtpConnect, 256);
    if (substr($rcode, 0, 3)!= $expected_response) {    // check the first 3 characters ie the response code
       echo "email sending failed" . PHP_EOL;
       return false;
    }
    return true;
} 
```

然后你可以这样做：

```
fputs($smtpConnect, "HELO networkssms.com\r\n");
if (!check_reponse($smptConnect,'250')) {
   return false;
} 
```

同样，您需要对发送的每个命令执行此操作。我相信你明白这个想法......

# ruby-on-rails - TinyMCE 问题

> ID：10120250
> 
> 赞同：0
> 
> 时间：2012-04-12T08:47:05.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我在 Rails 3.2.1 上使用 ruby​​。对于我的帖子格式，我想使用 TinyMCE，但我有问题。

1.  我已经安装了 tinymce gem 并重新启动了服务器。
2.  下载 tinymce 并将其放入 \myapp name\app\assets
3.  我的应用程序负责人：

    ```
    <head>
    <title>Līvu pamatskola</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <%= stylesheet_link_tag 'style' %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tag %>
    <script type="text/javascript" src="D:/Projects/Myapp name/app/assets/tinymce/jscripts/tiny_mce/tiny_mce.js" ></script>
    <script type="text/javascript" >
    tinyMCE.init({
    mode : "textareas",
    theme : "simple"   });
    </script>
    </head> 
    ```

4.  制作 /MyApp name/config/tinymce.yml 文件：

    ```
    theme_advanced_toolbar_location: top
    theme_advanced_toolbar_align: left
    theme_advanced_statusbar_location: bottom
    theme_advanced_buttons3_add:
     - tablecontrols
     - fullscreen
    plugins:
     - table
     - fullscreen 
    ```

5.  在 /MyApp 名称/app/assets/javascripts/application.js

> //= 需要 tinymce-jquery

结果我有很好的格式化面板@post 内容字段，但是在保存帖子后我可以看到带有 html 标签的文本，而不是格式化的文本。我认为安装有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:18:59.013

听起来好像您的视图会自动转义 @post 内容字段的 html 部分。

在您看来，您可以做`<%= raw @post.content %>`或`<%= @post.content.html_safe %>`

您可以阅读有关安全输出 html 的 Rails 指南[http://guides.rubyonrails.org/active_support_core_extensions.html#output-safety以及有关 raw 和 html_safe](http://guides.rubyonrails.org/active_support_core_extensions.html#output-safety) [raw 与 html_safe 与 h](https://stackoverflow.com/questions/4251284/raw-vs-html-safe-vs-h-to-unescape-html)之间的区别的 stackoverflow 帖子，以 unescape html

# iphone - Star TSp654 POS 打印机设置中的收据格式

> ID：10120252
> 
> 赞同：0
> 
> 时间：2012-04-12T08:47:32.440
> 
> 标签：iphone, thermal-printer

我已经与我的 ipad 建立了打印机连接，现在我想设置收据格式，如对齐、水平制表符、字体大小徽标设置以及收据中所需的所有内容，请任何人帮助我如何使用 POS 命令Objective-c 呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:28:13.193

Star 有一个编程手册，您可以在这里下载：http: [//www.starmicronics.com/support/Mannualfolder/linemode_cm_en.pdf](http://www.starmicronics.com/support/Mannualfolder/linemode_cm_en.pdf)

Line Mode 手册中引用的命令需要转换为字节，然后发送到打印机。您下载的 StarIO iOS SDK 包有一个名为“README_StarIO_POSPrinter_iOS_SDK.pdf”的手册。( [http://www.starmicronics.com/absolutefm/absolutefm/afmviewfaq.aspx?faqid=175](http://www.starmicronics.com/absolutefm/absolutefm/afmviewfaq.aspx?faqid=175) ) 您查看第 9-15 页了吗？StarIO 框架在这里解释。

第 13 页向您展示了如何使用字节数组写入端口，但请确保添加 StarIO.framework 并首先打开通信端口。

从手册：

```
//Set a byte array to send to the printer
//command = { A, B, C, D, Feed 3mm, Full Cut}
unsigned char command = {0x41, 0x42, 0x43, 0x44, 0x1B, 0x7A, 0x00, 0x1B, 0x64, 0x02};

Uint bytesWritten = 0;

@Try
{ 
   While(bytesWritten < (sizeof command)) 
   {
    bytesWritten += [port writePort: command : bytesWritten : sizeof command - bytesWritten];
   }
}
@Catch(PortException)
{
   //There was an error writing to the port
} 
```

还描述了如何关闭端口（确保关闭每个打开的端口）和获取打印机状态。

# blackberry - 触摸事件不起作用

> ID：10120253
> 
> 赞同：0
> 
> 时间：2012-04-12T08:47:37.657
> 
> 标签：blackberry

我正在开发一款用于触摸和打字手机的应用程序。现在在应用程序的一个屏幕中，有 3 个按钮。

在这里，如果我触摸三个按钮，它正在工作。但是，如果我触摸按钮外部，即在顶部栏中或底部栏中，则触摸事件也正在工作。假设在下面，添加更多按钮是焦点。因此，如果我在底部栏中触摸，则按钮触摸也起作用。为了解决这个问题，我写了下面的代码：

```
protected boolean touchEvent(TouchEvent event) {
    try {

        int touchXPos = event.getX(1);
        int touchYPos = event.getY(1);
        int addBtnXPos = btnAddMore.getLeft();
        int saveBtnXPos = btnSave.getLeft();
        int helpBtnXpos = btnHelp.getLeft();

        int vfmTitleTouch = m_vfmTitle.getHeight();
if(event.getEvent() == TouchEvent.CLICK)
      {
        if ((touchXPos >= addBtnXPos + 40) && (touchXPos <= (addBtnXPos + btnAddMore.getWidth() + 40)) && (touchYPos <= screenHeight -10) && (touchYPos >= (screenHeight -10 - btnAddMore.getHeight())) /*&& (touchYPos < (screenHeight-gmYPos)) */) {
            Logger.out("touchEvent", "------------------------------1");
            showPopUp();

        } else if ((touchXPos >= saveBtnXPos + 40) && (touchXPos <= (saveBtnXPos + 40 + btnSave.getWidth())) && (touchYPos <= screenHeight -10) && (touchYPos >= (screenHeight -10 - btnSave.getHeight())) /* && (touchYPos < (screenHeight-gmYPos))*/) {
            Logger.out("touchEvent", "------------------------------2");
            saveToDb();

        } else if ((touchXPos >= helpBtnXpos) && (touchXPos <= (helpBtnXpos + btnHelp.getWidth())) && (touchYPos <= (btnHelp.getTop() + btnHelp.getHeight())) && (touchYPos >= btnHelp.getTop()) /* && (touchYPos < (screenHeight-gmYPos))*/ ) {
            Logger.out("touchEvent", "------------------------------3");
            UiApplication.getUiApplication().pushScreen(new HelpScreen());

        } else if ((touchYPos <= screenHeight - hfmBtn.getHeight()) && (touchYPos >= (vfmTitleTouch))) {
            Logger.out("touchEvent", "------------------------------4");
            //Logger.out("touchEvent", "touchY::::" +touchYPos  + "Vfm Title::::" +vfmTitleTouch  + "  "+"GM Y Pos"+  gmYPos);

        } 
            return true;
        }
    } catch (Exception e) {
    }

    return super.touchEvent(event);
} 
```

但它不起作用..任何人都可以帮助我吗？触摸事件应该像复选框一样在屏幕中间工作。

谢谢..![这是屏幕截图](../Images/e8c3bdbf61d852141b25788205f200dc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:38:33.773

检查问题[BlackBerry touchEvent outside Field triggers fieldChanged](https://stackoverflow.com/questions/6398282/blackberry-touchevent-outside-field-triggers-fieldchanged)由[Paul Sylliboy](https://stackoverflow.com/a/6418301/431639)和[Arhimed](http://ttp://stackoverflow.com/a/6422582/431639)提供的答案。

我首先在评论中粘贴了这些链接，但后来将其从那里删除以共享用于杀死不需要的触摸事件的代码片段，我发现这非常有用。

```
protected boolean touchEvent(TouchEvent message) {
    int event = message.getEvent();
    // you can add other events 
    if (event == TouchEvent.CLICK || event == TouchEvent.UNCLICK) {
        // Kill all click events that happen outside any fields
        if (getFieldAtLocation(message.getX(1), message.getY(1)) == -1)         
            return true;
    }

    return super.touchEvent(message);
}

// The regular getFieldAtLocation returns wrong values in 
// open spaces in complex managers, so we override it
public int getFieldAtLocation(int x, int y) {
    XYRect rect = new XYRect();
    int index = getFieldCount() - 1;
    while (index >= 0) {
        getField(index).getExtent(rect);
        if (rect.contains(x, y))
            break;
        --index;
    }

    return index;
} 
```

# php - 如何在 TWIG 中使用转储？

> ID：10120256
> 
> 赞同：9
> 
> 时间：2012-04-12T08:47:46.030
> 
> 标签：php, symfony, twig

我简单地为模板（index.html.twig）添加：

```
{{ dump(product) }} 
```

我有错误：

```
The function "dump" does not exist in AcmeStoreBundle:Default:index.html.twig at line 2 
```

为什么此功能未启用，我该如何启用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T08:53:02.580

您需要[配置](http://symfony.com/doc/current/book/templating.html#debugging)调试扩展：

```
# app/config/config.yml
services:
    acme_hello.twig.extension.debug:
        class:        Twig_Extension_Debug
        tags:
             - { name: 'twig.extension' } 
```

根据上面提到的链接，Twig 调试默认设置为在运行 Twig 1.16+ 的 Symfony 2.5+ 中工作，并且不需要自定义服务定义。[有关更多详细信息，请参阅此答案](https://stackoverflow.com/a/26151553/3334390)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T13:36:05.330

***Symfony 2.7+ 更新：***

DebugBundle 允许将组件更好地集成到 Symfony 全栈框架中。它在 Symfony 标准版的开发和测试环境中默认启用。

检查[VarDumper 组件](http://symfony.com/doc/current/components/var_dumper.html)及其[在 Twig 上的集成](http://symfony.com/doc/current/components/var_dumper.html#debugbundle-and-twig-integration)。

***旧答案：***

我想建议一个非本地解决方案。您将需要第三方捆绑包，但最终结果会很棒！

版本改进`dump`：

1.  所有转储都有样式
2.  您可以提供最大嵌套级别以避免大对象的内存问题
3.  非常有用的助手，例如`ldd()`，这是经典的“转储死”的别名
4.  它有一个控制台转储器（例如`php app/console ladybug:dump "Symfony\Component\HttpFoundation\Request"`）
5.  它提供了与 Symfony Profiler 的集成
6.  它会自动检测 Symfony、Doctrine、Twig 和 Silex 类，并将它们链接到官方文档

这里的链接：

*   [knpbundles](http://knpbundles.com/raulfraile/LadybugBundle)
*   [github](https://github.com/raulfraile/LadybugBundle)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-05T17:41:45.447

当您像@meze 所说的那样配置它时，您可以显示所有自定义变量：

```
<h1>Variables passed to the view:</h1>
{% for key, value in _context %}
    {% if key starts with '_' %}
    {% else %}
        <pre style="background: #eee">{{ key }}</pre>
        {{ dump(value) }}
    {% endif %}
{% endfor %} 
```

您可以使用我的简单插件来方便地检查您的变量：

[树枝转储栏](https://github.com/caderek/twig-dump-bar)

# django - Passing url to django to be used as variable?

> ID：10120257
> 
> 赞同：0
> 
> 时间：2012-04-12T08:47:50.117
> 
> 标签：django, url

So when I'm trying to pass url to django views it cuts it. For example, I have a webpage which shows statistics of downloads for users sorted by download amount. Then I want to get details about some user, for example for "Yousuke Kataoka". I press the link and go to user page. Url should be and is mysite.com/user/Yousuke Kataoka, but in the webpage I see "Details for Yousuke", it kinda cuts the url. So of course I can't get any details, because the username is cut.

Here is part of urls.py:

```
(r'^user/(?P<username>[*_a-zA-Z0-9./-=]+)', 'dq2.web.usermon.views.user') 
```

And here is user.html template:

```
<html>
<head>
<title>Detailed information for {{usr}}</title>
<script src="/dq2/media/js/sorttable.js"></script>
</head>
<body>
<p>Detailed information for {{usr}}</p>
<table width="30%">
<tr><td>File Downloads (1HR)</td><td align="right">{{file_events_1h}}</td></tr>
<tr><td>File Downloads (24HR)</td><td align="right">{{file_events}}</td></tr>
<tr><td>File Downloads (7D)</td><td align="right">{{file_events_7d}}</td></tr>
<tr><td>File Downloads (30D)</td><td align="right">{{file_events_30d}}</td></tr>
<tr><td>Operations (1HR)</td><td align="right">{{op_events_1h}}</td></tr>
<tr><td>Operations (24HR)</td><td align="right">{{op_events}}</td></tr>
<tr><td>Operations (7D)</td><td align="right">{{op_events_7d}}</td></tr>
<tr><td>Operations (30D)</td><td align="right">{{op_events_30d}}</td></tr>
</table> 
```

And so on..

What should I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:50:47.843

Try adding a space in your regex. And are you sure you meant to have `/-=` in there?

# javascript - 表单字段数量向上/向下按钮，不允许负数？

> ID：10120259
> 
> 赞同：0
> 
> 时间：2012-04-12T08:48:02.287
> 
> 标签：javascript, html, input

[http://jsfiddle.net/KYDPd](http://jsfiddle.net/KYDPd)

有没有办法让最小数字为0，并且不允许用户在点击时低于0？

```
<form>
  <input type="text" name="name" value="0" />
  <input type="button" value="up" onclick="this.form.name.value++;" >
  <input type="button" value="down" onclick="this.form.name.value--;">
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:11:49.407

如果不需要单独的按钮并且 HTML5 是一个选项，你可以使用这个：

```
<form>
    <input type="number" min="0" name="name" value="0" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:54:28.527

这应该可以解决问题。在允许每个操作之前检查值是多少。还向文本输入添加了 onchange 以强制执行您的最低 0 要求。同意其他答案，尽管这应该在一个函数中。

[http://jsfiddle.net/xqV6V/1/](http://jsfiddle.net/xqV6V/1/)

```
<form>
    <input type="text" name="name" value="0" onchange="if(this.value<0){this.value=0;}" />
    <input type="button" value="up" onclick="if(this.form.name.value>=0){this.form.name.value++;}" >
    <input type="button" value="down" onclick="if(this.form.name.value>0){this.form.name.value--};">
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:53:04.783

您可能应该将此 JavaScript 放在一个[函数](http://www.w3schools.com/js/js_functions.asp)中。

```
<form>
    <input type="text" name="name" value="0" />
    <input type="button" value="up" onclick="this.form.name.value++;" >
    <input type="button" value="down" onclick="if(this.form.name.value>0)this.form.name.value--;">
</form> 
```

* * *

**带有功能的**附加答案。****

 **```
<script>

function ud_find_text(self) {
    var children = self.parentNode.getElementsByTagName('input');
    for (var i = 0; i < children.length; i++) {
        if (children[i].getAttribute('type') == 'text') {
            return children[i];
        }
    }
}

function ud_inc(self) {
    var text = ud_find_text(self);
    text.value++;
}

function ud_dec(self) {
    var text = ud_find_text(self);
    if (text.value > 0) text.value--;
}

</script>

<form>
  <input type="text" name="name" value="0" />
  <input type="button" value="up" onclick="ud_inc(this)" >
  <input type="button" value="down" onclick="ud_dec(this)">
</form> 
```**

# iphone - 替换或扩展 UIBarButtonItem 选择器

> ID：10120260
> 
> 赞同：0
> 
> 时间：2012-04-12T08:48:04.147
> 
> 标签：iphone, ios, selector, uibarbuttonitem, uitoolbar

我正在尝试制作一个`UIToolbar`处理旋转和自定义排列的自定义。当它处于纵向模式时，一些 barbuttonitem 将不可见，因此我添加了一个“更多”按钮，从中弹出一个带有这些项目的小视图。我的问题是，当我当前的方向是纵向并且当我选择一个可见的 barbuttonitem （不在 popup 中）时，如果它打开，我想关闭它。我希望弹出视图中 uibarbuttons 的 smae 行为在点击后关闭弹出窗口。

所以我试图用我自己的方式替换 UIBarButtonItem 的选择器，我在其中调用已经定义的操作，如下所示：

```
-(SEL)extendOriginal:(UIBarButtonItem *) uibb
{
  if (popup) popup.hidden = YES;
  [uibb.target performSelector:uibb.action];
  // return ??  do what ?? 
} 
```

但是如何替换原来的选择器以我的自定义 UIToolbar 作为它的目标来调用这个自定义方法？或者我怎么能用这个调用“扩展”原始选择器？对不起，如果问题很蹩脚:)

**编辑：**换句话说，我希望在点击 UIBarButtonItem 时执行 2 个具有 2 个单独目标的操作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:24:19.930

这`-(SEL)extendOriginal:(UIBarButtonItem *) uibb`没有任何意义。

我假设您正在某处设置目标和栏按钮项的操作。在那里，您可以使用一个参数`id`或`UIBarButtonItem*`作为选择器设置任何方法。

因此尝试将您的代码更改为

```
- (void)myMethod:(UIBarButtonItem *) uibb
{
  if (popup) popup.hidden = YES;

  // do cool stuff here
} 
```

并将目标设置为

```
[[UIBarButtonItem alloc] initWithTitle: @"Blabla" style: UIBarButtonItemStylePlain target: self action: @selector(myMethod:)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:42:29.717

最后，我找到了一种方法，虽然不是最漂亮的，但它确实有效。

在我在其布局方法中创建的自定义工具栏类中，`UITapGestureRecognizer`用于处理点击。我已将 设置`cancelsTouchesInView`为 false 并在

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
```

方法我只为我的工具栏的子视图返回 true。

这样每个人的原始目标和动作`UIBarButtonItem`保持不变，处理我的弹出窗口的补充代码是`UIGestureRecognizer`. 另一个问题是区分工具栏上的点击项目（点击的视图`touch.view`是一些未记录的视图，是的），最终我用一些 BOOL iVars 做到了。

我希望这会帮助有同样问题的人。

# c# - 将数据从excel导入二维数组

> ID：10120262
> 
> 赞同：0
> 
> 时间：2012-04-12T08:48:10.870
> 
> 标签：c#, excel, office-interop

这是我在 C# 中的第一个控制台应用程序项目，我正在尝试将 Excel 工作表的使用区域导入二维数组。这可能不是最有效的方法，但这是我到目前为止的代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection; 

Excel.Application excelApp = new Excel.Application();
        excelApp.Visible = true;
        string workbookPath = "C:/Users/Snuge/Desktop/CourseNumbersNoWSReg.xlsx";
        Excel.Workbook excelWorkbook = excelApp.Workbooks.Open(workbookPath,
                0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "",
                true, false, 0, true, false, false);

        // This selectes the used range of the excel workbook and enters it in
        // a two dimentional array
        try
        {
            // Get a reference to the first sheet of the workbook.
            Excel.Sheets excelSheets = excelWorkbook.Worksheets;
            string currentSheet = "Sheet1";
            Excel.Worksheet excelWorksheet = (Excel.Worksheet)excelSheets.get_Item(currentSheet);

            // write out to console for debugging
            Console.WriteLine("excelWorksheet is " + excelWorksheet);

            // Get a range of data.
            Excel.Range excelCell = (Excel.Range)excelWorksheet.get_Range("A3", Missing.Value);

            // write out to console for debugging
            Console.WriteLine("excelCell is " + excelCell);

            // write out to console for debugging
            Console.WriteLine("Creating string[,] array. . . ");
            // Retrieve the data from the range.
            Object[,] dataArray;
            // write out to console for debugging
            Console.WriteLine("String[,] array created. . . ");

            dataArray = (System.Object[,])excelCell.get_Value(Missing.Value);

            // write out to console for debugging
            Console.WriteLine("Counting rows and columns. . . ");
            // Determine the dimensions of the array.
            int iRows;
            int iCols;
            iRows = dataArray.GetUpperBound(0);
            iCols = dataArray.GetUpperBound(1);

            // write out to console for debugging
            Console.WriteLine("Printing array. . . ");
            // Print the data of the array.
            for (int rowCounter = 1; rowCounter <= iRows; rowCounter++)
            {
                // write out to console for debugging
                Console.WriteLine("row " + rowCounter);
                for (int colCounter = 1; colCounter <= iCols; colCounter++)
                {

                    // Write the next value to the console.
                    Console.WriteLine("col " + colCounter + "= " + dataArray[rowCounter, colCounter].ToString() + ", ");
                }
                // Write in a new line.
                Console.WriteLine("\n");
            }                
        }

        catch (Exception theException)
        {
            // Create error message
            String errorMessage;
            errorMessage = "Error: ";
            errorMessage = String.Concat(errorMessage, theException.Message);
            errorMessage = String.Concat(errorMessage, " Line: ");
            errorMessage = String.Concat(errorMessage, theException.Source);
            // Display error message
            MessageBox.Show(errorMessage, "Error");
        } 
```

我插入了 Console.Writeline(); 用于调试目的。正确的 Excel 工作簿打开，我在命令提示符下获得的输出是

```
excelWorksheet is System.__ComObject 
excelCell is System.__ComObject 
Creating string[,] array. . . 
String[,] array created. . . 
```

然后会弹出一个带有消息的消息框

```
"Error: Cannot convert type 'string' to object[*,*] Line: Anonymously Hosted DynamicMethods Assembly". 
```

这行代码给了我一个错误，我不知道为什么。

```
dataArray = (System.Object[,])excelCell.get_Value(Missing.Value); 
```

有人可以为我提供这个问题的解决方案吗？

此外，是否有代码在命令提示符中显示一个值而不是“System.__ComObject”？

我正在使用 Excel 2007，并添加了 Microsoft Excel 12.0 对象库参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:52:10.827

我想你可以使用

```
// This value "should" be boxed into two-dimensional array
object dataArray = excelCell.Value; 
```

或者

```
var dataArray = (object[,])excelCell.Value2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:53:28.367

错误说明了一切，它无法将字符串类型的值（显然是单元格中的数据）转换为二维数组。你为什么要这么投呢？不需要数组，然后您就可以读取单个单元格。但是，如果您的范围包含多个单元格，则返回的结果实际上将是二维数组。

然后你需要这样的东西：

```
object[,] result;
object rawData = excelCell.get_Value(Missing.Value);
if(rawData.GetType().IsArray())
{
    result = rawData;
}
else
{
    result = CreateArrayFromValue(rawData);
}

return result; 
```

当然你需要`CreateArrayFromValue`自己实现。

# c# - 如何避免贫血域并避免将数据访问类放在域类中？

> ID：10120267
> 
> 赞同：3
> 
> 时间：2012-04-12T08:48:26.860
> 
> 标签：c#, design-patterns

我正在尝试将我的业务逻辑从我的服务类和控制器中移出，并将其放在我的业务类中。

```
public interface IFoo{
  IBar CreateBar(creationParameters);
}
public class FirstFoo : IFoo{
  IBar CreateBar(creationParameters){
    return new FirstBar(creationParameter.Id);
  }
}
public interface IBar{
  void DoSomething();
}
public class FirstBar : IBar{
  FirstBar(int id){...}
  void DoSomething(){
    //well... do something
  }
}
public class SecondBar : IBar{
  FirstBar(int id){...}
  void DoSomething(){
    //well... do something else
  }
} 
```

假设我需要创建一个 SecondFoo，它需要访问数据库才能知道它必须创建一个 FirstBar 或 SecondBar，我该怎么做？我在 SecondFoo 的构造函数中注入了我的数据源？服务定位器？我将 createBar 移出 IFoo 吗？

编辑：我不是在寻找工厂模式的定义，createBar 方法可能类似于“changeBar”或“doBusinessWithBar”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:39:07.130

> 假设我需要创建一个 SecondFoo ，它需要访问数据库才能知道它必须创建一个 FirstBar 或一个 SecondBar

似乎`SecondFoo`需要某种*决策逻辑*来决定是创建 a`FirstBar`还是`SecondBar`. 该逻辑可以在*策略*接口中分解出来，其中数据库访问实现将在生产中使用。您可以通过构造函数注入策略。

```
IBar CreateBar(creationParameters) {
  if (strategy.ShouldCreateFirst(creationParameters)) {
    return new FirstBar(creationParameter.Id);     
  }  
  else {
    return new SecondBar(creationParameter.Id);     
  }
} 
```

# javascript - 从其他函数访问“this”类型的 JavaScript 变量

> ID：10120271
> 
> 赞同：0
> 
> 时间：2012-04-12T08:48:43.527
> 
> 标签：javascript, jquery, this, member-variables

我有一个事件触发，即使它在我试图访问变量的函数内部，我也会得到`Uncaught TypeError: Cannot read property '...' of undefined`. 所以，让我们说：

```
( function($) {

    $.fn.main = function() {

        this.setting = 1;

        $("#someElement").scroll( function() {

            console.debug(this.setting);

        } );

    }

} )(jQuery); 
```

我敢肯定这与时间有关，但话又说回来，我可能是错的。我应该复制`this`并公开吗？任何人？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:52:10.780

的值`this`不能固定在闭包中，因为它是`this`动态获取其值的。

尝试 ：

```
var self = this; 
```

并参考自我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:52:54.647

只需复制 `this`到另一个变量

```
( function($) {

    $.fn.main = function() {

        this.setting = 1;
        var that = this;
        $("#someElement").scroll( function() {

            console.debug(that.setting);

        } );

    }

} )(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:55:06.050

```
( function($) {

    $.fn.main = function() {

        this.setting = 1; // "this" refers to the "$.fn.main" object

        $("#someElement").scroll( function() {

            console.debug(this.setting); // "this" refers to the "$('#someElement')" object

        } );

    }

} )(jQuery); 
```

如果要使用`this`from `$.fn.main`，可以存储变量。以下将起作用：

```
( function($) {

    $.fn.main = function() {

        var that = this

        that.setting = 1; // "this.setting" would also work

        $("#someElement").scroll( function() {

            console.debug(that.setting); // You need to reference to the other "this"

        } );

    }

} )(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:18:30.600

里面的`this`滚动方法是指滚动方法。该方法必然会在 id 为“someElement”的元素的滚动事件上被调用。并且绑定对象的范围丢失了。

# java - 用 Java 漂亮地打印地图

> ID：10120273
> 
> 赞同：150
> 
> 时间：2012-04-12T08:48:51.757
> 
> 标签：java, dictionary, pretty-print

我正在寻找一种漂亮的打印`Map`.

`map.toString()`给我：`{key1=value1, key2=value2, key3=value3}`

我希望我的地图条目值有更多的自由，并且正在寻找更像这样的东西：`key1="value1", key2="value2", key3="value3"`

我写了一小段代码：

```
StringBuilder sb = new StringBuilder();
Iterator<Entry<String, String>> iter = map.entrySet().iterator();
while (iter.hasNext()) {
    Entry<String, String> entry = iter.next();
    sb.append(entry.getKey());
    sb.append('=').append('"');
    sb.append(entry.getValue());
    sb.append('"');
    if (iter.hasNext()) {
        sb.append(',').append(' ');
    }
}
return sb.toString(); 
```

但我确信有一种更优雅、更简洁的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2013-10-28T15:35:22.233

```
Arrays.toString(map.entrySet().toArray()) 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-10-15T12:03:49.220

看看 Guava 库：

```
Joiner.MapJoiner mapJoiner = Joiner.on(",").withKeyValueSeparator("=");
System.out.println(mapJoiner.join(map)); 
```

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-04-12T08:57:13.157

或者把你的逻辑放到一个整洁的小课堂上。

```
public class PrettyPrintingMap<K, V> {
    private Map<K, V> map;

    public PrettyPrintingMap(Map<K, V> map) {
        this.map = map;
    }

    public String toString() {
        StringBuilder sb = new StringBuilder();
        Iterator<Entry<K, V>> iter = map.entrySet().iterator();
        while (iter.hasNext()) {
            Entry<K, V> entry = iter.next();
            sb.append(entry.getKey());
            sb.append('=').append('"');
            sb.append(entry.getValue());
            sb.append('"');
            if (iter.hasNext()) {
                sb.append(',').append(' ');
            }
        }
        return sb.toString();

    }
} 
```

用法：

```
Map<String, String> myMap = new HashMap<String, String>();

System.out.println(new PrettyPrintingMap<String, String>(myMap)); 
```

注意：您也可以将该逻辑放入实用程序方法中。

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2014-02-19T14:17:01.847

Apache 库来救援！

```
MapUtils.debugPrint(System.out, "myMap", map); 
```

所有你需要的 Apache commons-collections 库（[项目链接](http://commons.apache.org/proper/commons-collections/)）

Maven 用户可以使用此依赖项添加库：

```
<dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
    <version>3.2.1</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-06-05T06:28:47.517

当我`org.json.JSONObject`在类路径中时，我会：

```
Map<String, Object> stats = ...;
System.out.println(new JSONObject(stats).toString(2)); 
```

（这很好地缩进了可能嵌套的列表、集合和地图）

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2015-06-11T06:48:17.337

简单易行。欢迎来到 JSON 世界。使用[谷歌的 Gson](https://github.com/google/gson)：

```
new Gson().toJson(map) 
```

具有 3 个键的地图示例：

```
{"array":[null,"Some string"],"just string":"Yo","number":999} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2017-09-14T14:31:49.137

使用 Java 8 流：

```
Map<Object, Object> map = new HashMap<>();

String content = map.entrySet()
                    .stream()
                    .map(e -> e.getKey() + "=\"" + e.getValue() + "\"")
                    .collect(Collectors.joining(", "));

System.out.println(content); 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-10-13T18:48:07.170

我更喜欢将地图转换为 JSON 字符串：

*   一个标准
*   人类可读
*   在 Sublime、VS Code 等编辑器中受支持，具有语法高亮、格式化和部分隐藏/显示
*   支持 JPath，因此编辑器可以准确报告您导航到的对象的哪一部分
*   支持对象内的嵌套复杂类型

    ```
    import com.fasterxml.jackson.core.JsonProcessingException;
    import com.fasterxml.jackson.databind.ObjectMapper;

    public static String getAsFormattedJsonString(Object object)
    {
        ObjectMapper mapper = new ObjectMapper();
        try
        {
            return mapper.writerWithDefaultPrettyPrinter().writeValueAsString(object);
        }
        catch (JsonProcessingException e)
        {
            e.printStackTrace();
        }
        return "";
    } 
    ```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-04-12T09:05:56.317

查看OpenJDK 源代码`HashMap#toString()`和其中的代码：`AbstractMap#toString()`

```
class java.util.HashMap.Entry<K,V> implements Map.Entry<K,V> {
       public final String toString() {
           return getKey() + "=" + getValue();
       }
   }
 class java.util.AbstractMap<K,V> {
     public String toString() {
         Iterator<Entry<K,V>> i = entrySet().iterator();
         if (! i.hasNext())
            return "{}";

        StringBuilder sb = new StringBuilder();
        sb.append('{');
        for (;;) {
            Entry<K,V> e = i.next();
            K key = e.getKey();
            V value = e.getValue();
            sb.append(key   == this ? "(this Map)" : key);
            sb.append('=');
            sb.append(value == this ? "(this Map)" : value);
            if (! i.hasNext())
                return sb.append('}').toString();
            sb.append(", ");
        }
    }
} 
```

因此，如果来自 OpenJDK 的人没有找到更优雅的方法来做到这一点，那就没有 :-)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-04-12T08:52:35.423

你应该能够做你想做的事：

`System.out.println(map)`例如

只要地图中的所有对象都覆盖了`toString`您将看到的方法：
`{key1=value1, key2=value2}`以有意义的方式

如果这适用于您的代码，那么重写`toString`是一个好习惯，我建议您改为这样做。

对于你的例子，你的对象是`String`s 你应该没问题。
即`System.out.println(map)`无需任何额外代码即可准确打印您需要的内容

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-01-26T19:36:00.140

```
public void printMapV2 (Map <?, ?> map) {
    StringBuilder sb = new StringBuilder(128);
    sb.append("{");
    for (Map.Entry<?,?> entry : map.entrySet()) {
        if (sb.length()>1) {
            sb.append(", ");
        }
        sb.append(entry.getKey()).append("=").append(entry.getValue());
    }
    sb.append("}");
    System.out.println(sb);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-07-04T13:57:13.470

`String result = objectMapper.writeValueAsString(map)`——就这么简单！

结果：

```
{"2019-07-04T03:00":1,"2019-07-04T04:00":1,"2019-07-04T01:00":1,"2019-07-04T02:00":1,"2019-07-04T13:00":1,"2019-07-04T06:00":1 ...} 
```

PS 将 Jackson JSON 添加到您的类路径中。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-19T09:56:04.587

从 java 8 开始，使用 Lambda 可以很容易地做到这一点：

```
yourMap.keySet().forEach(key -> {
    Object obj = yourMap.get(key);
    System.out.println( obj);
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-12T09:00:14.040

我想这样的东西会更干净，并为您提供更多的输出格式灵活性（只需更改模板）：

```
 String template = "%s=\"%s\",";
    StringBuilder sb = new StringBuilder();
    for (Entry e : map.entrySet()) {
        sb.append(String.format(template, e.getKey(), e.getValue()));
    }
    if (sb.length() > 0) {
        sb.deleteCharAt(sb.length() - 1); // Ugly way to remove the last comma
    }
    return sb.toString(); 
```

我知道必须删除最后一个逗号很难看，但我认为它比[此解决方案中](https://stackoverflow.com/questions/1818729/java-foreach-loop-for-integer-i-list)的替代方案或手动使用迭代器更干净。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-09-26T10:47:02.853

作为利用现有基础架构的快速而肮脏的解决方案，您可以将您的产品包装`uglyPrintedMap`成. `java.util.HashMap`，然后使用`toString()`.

```
uglyPrintedMap.toString(); // ugly
System.out.println( uglyPrintedMap ); // prints in an ugly manner

new HashMap<Object, Object>(jobDataMap).toString(); // pretty
System.out.println( new HashMap<Object, Object>(uglyPrintedMap) ); // prints in a pretty manner 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-09-07T08:22:46.930

没有准确回答问题，但值得一提的是 Lombodok `@ToString` [annotation](https://projectlombok.org/features/ToString)。如果您使用类进行注释，`@ToString`那么`key / value`做`System.out.println(map)`将返回一些有意义的东西。

它也适用于地图的地图，例如： `Map<MyKeyClass, Map<String, MyValueClass>>`将打印为

`{MyKeyClass(properties...)={string1=MyValuesClass(properties...), string2=MyValuesCalss(properties...),..}, ... }`

# bash - 符号链接循环中的意外 bash 自动完成行为

> ID：10120274
> 
> 赞同：5
> 
> 时间：2012-04-12T08:49:01.710
> 
> 标签：bash, autocomplete, symlink

我有以下目录结构：

```
base/
  dir/
    subdir/
    link -> ../dir 
```

现在，如果我 cd 到 dir/link 并键入：

```
cd ../subd[tab] 
```

我得到：

```
cd ../subdir[space] 
```

1.  如果自动完成失败，我会理解（因为它会规范路径并查看 base/ 而不是 dir/）。

2.  我也会理解它是否`cd ../subdir/`会以 / 结尾自动完成（因为它会解释`..`为`go up one level`并搜索到 dir/）。

但我不明白介于两者之间的实际行为。理想情况下，我希望 bash 表现得像 2.（自动完成到 cd ../subdir/）。我正在使用 Fedora 14，bash 版本 4.1.7(1)。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:47:35.480

更新：您可以自定义自动完成的程序称为`complete`.

你可以在这里找到一些很好的基本示例：*[更多关于使用 Bash Complete 命令](http://www.linuxjournal.com/content/more-using-bash-complete-command)*

根据上面的链接使用函数和脚本名称，这是一个脚本，它附加`/`到目录的符号链接......这只是一个粗略的示例，但它表明它可以完成（我没有尝试过内置`cd`...

将函数`_mycomplete_`与可执行文件关联`myfoo`

```
complete -F _mycomplete_ myfoo 
```

进入的功能`~/.bashrc`

```
function _mycomplete_()
{
    local cmd="${1##*/}"
    local word=${COMP_WORDS[COMP_CWORD]}
    local line=${COMP_LINE}
    local xpat='!*.foo'

    COMPREPLY=($(compgen -f -X "$xpat" -- "${word}"))
    if ((${#COMPREPLY[@]}==1)) ;then
       [[ -h $COMPREPLY ]] && COMPREPLY="$COMPREPLY/"
    fi
} 
```

* * *

原答案：

在命令行中，自动扩展为符号链接的主要指标显示在下表的最后一行，即。名称扩展但没有最终的`/`。

```
 on pressing TAB                                         on pressing TAB (again)  
  what happens?              meaning                        what happens?
===================      =======================     ==================================== 
Nothing is appended  1=> Multiple sub-dirs exist  => A list of possibilities is presented
                     2=> No sub-directory exists  => Nothing is appended (again)

Expands to end in /   => A uniquely matching dir  => ...as per first column (repeat)
Expands text only     => Current name is a link   => Expands to end in / 
```

在您的示例中，如果您已经将命令行设置为全名，即。`cd link`那么指标就不明显了。此外，您不会通过可能性列表知道它是一个符号链接。

为了能够到达`cd`链接的目标，您可以使用`cd -P link`, 或`set -P; cd link`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:14:05.557

稍微挖掘一下源代码后，看起来这有点复杂。实际问题是 bash 允许在工作目录中使用符号链接（请参阅 pwd -L 和 pwd -P）和 readline 无法确定匹配类型（如果它不在物理目录中）之间的混合

在 [readline/complete.c:1694](http://git.savannah.gnu.org/cgit/readline.git/tree/complete.c#n1694 "完成.c")

```
s = (nontrivial_match && rl_completion_mark_symlink_dirs == 0)
? LSTAT (filename, &finfo)
: stat (filename, &finfo); 
```

stat() 失败，因为 ../ 被理解为相对于物理路径而不是逻辑路径。readline 无法确定这是一个目录，因此不会附加最后的“/”。[这里](https://bugzilla.redhat.com/show_bug.cgi?id=650787)描述了一个非常相似的问题

所以我想我现在可以忍受现有的行为......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:59:51.643

我在 Ubuntu 中遇到了完全相同的问题。自动补全就像您的示例 #2 一样工作，但在某些时候开始按照您的描述工作。我清除并重新安装了 bash-completion 包，现在一切似乎恢复正常。不要卸载 bash！只有 bash 自动完成。

编辑

看这个：

[https://bbs.archlinux.org/viewtopic.php?id=113158](https://bbs.archlinux.org/viewtopic.php?id=113158)

# gmail - 在 postfix smtp 中继中设置发件人地址

> ID：10120276
> 
> 赞同：0
> 
> 时间：2012-04-12T08:49:16.310
> 
> 标签：gmail, postfix-mta

我在我的 Linux 机器上本地设置了 postfix，它中继到我的 gmail 帐户。[感谢http://www.howtoforge.com/postfix_relaying_through_another_mailserver](http://www.howtoforge.com/postfix_relaying_through_another_mailserver)这很好用

但是我希望能够指定发件人地址（发件人：），但我无法弄清楚我需要做什么。有谁知道我如何指定我的任何（预）配置的有效 gmail 地址？我只能找到： http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=22370](http://support.google.com/mail/bin/answer.py?hl=en&answer=22370)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:43:26.990

我确实将这个问题发布到了 debian-users 组并得到了以下答案：

> 您可以使用 -a 指定任何标题，例如
> 
> $ mail -a '来自：“我的名字”' da

[http://lists.debian.org/debian-user/2012/04/msg00993.html](http://lists.debian.org/debian-user/2012/04/msg00993.html)

效果很好

# java - 使用 pax-maven-plugin 构建时将我自己的包源添加到 pax-exam

> ID：10120277
> 
> 赞同：5
> 
> 时间：2012-04-12T08:49:27.793
> 
> 标签：java, maven, osgi, pax

我正在尝试使用[pax-maven-build](http://www.ops4j.org/projects/pax/construct/maven-pax-plugin/)构建我的 OSGI 包，同时使用[pax-exam](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)对其进行测试。它提供了一些捆绑包，我可以使用以下 pax-exam 测试配置进行测试：

```
@RunWith(JUnit4TestRunner.class)
@ExamReactorStrategy(AllConfinedStagedReactorFactory.class)
public class OSGILoaderTest {

    @Inject
    protected BundleContext bundleContext;

    @Configuration
    public Option[] config() throws MalformedURLException {

        String projectRoot = // a path to my project

        return options(
                junitBundles(),
                equinox(),
                bundle(projectRoot + "libs/org.eclipse.core.variables_3.2.500.v20110511.jar"),
                bundle(projectRoot + "libs/org.eclipse.core.contenttype_3.4.100.v20110423-0524.jar"),
                bundle(projectRoot + "libs/org.eclipse.core.expressions_3.4.300.v20110228.jar"),
                // etc...
        );
    }

    @Test
    public void getBundleContext() throws RodinDBException {
        IRodinDB rodinDB = RodinCore.getRodinDB();
        assertNotNull(rodinDB);
    }
} 
```

在这里，我可以看到我可以从我提供的 jar 中访问 IRodinDB 实例。

现在我编写了自己的包，它将使用所有预置的 jar。但我什至无法测试自己的代码，例如：

```
@Test
public void checkAccessToRodinDbTest() {
    VTGService service = null;
    assertTrue(true);
} 
```

**在编译时**给出错误：

> [错误] 无法执行目标 org.ops4j:maven-pax-plugin:1.5:testCompile (default-testCompile) : 编译失败
> 
> [错误] 找不到符号
> 
> [错误] 符号：VTGService 类

似乎测试编译看不到“src/main/java”，这与 maven-compiler-plugin 的默认行为相反。但在我的情况下，您可以看到 maven 不使用编译器插件，而是使用 maven-pax-plugin。

问题是：如何使用 pax-exam 测试我自己的捆绑包？

**更新1**

这似乎是最新版本的 maven-pax-plugin 的问题，因为[ops4j pax maven 插件中可用的基本示例](http://www.ops4j.org/projects/pax/construct/maven-pax-plugin/usage.html)（在*POM 中使用 Pax 插件*部分）似乎遇到了同样的问题。

**更新2**

根据 Dmytro 的要求，这是我的包的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://maven.apache.org/POM/4.0.0"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <parent>
        <relativePath>../poms/compiled/</relativePath>
        <groupId>fr.xlim.ssd.vtg.build</groupId>
        <artifactId>compiled-bundle-settings</artifactId>
        <version>0.1-SNAPSHOT</version>
    </parent>

    <properties>
        <bundle.symbolicName>fr.xlim.ssd.vtg.bundle</bundle.symbolicName>
        <bundle.namespace>fr.xlim.ssd.vtg.bundle</bundle.namespace>
    </properties>

    <modelVersion>4.0.0</modelVersion>
    <groupId>fr.xlim.ssd.vtg</groupId>
    <artifactId>fr.xlim.ssd.vtg.bundle</artifactId>
    <version>0.1-SNAPSHOT</version>

    <name>${bundle.symbolicName}</name>

    <packaging>bundle</packaging>

    <dependencies>

        <dependency>
            <type>pom</type>
            <groupId>${project.parent.groupId}</groupId>
            <artifactId>provision</artifactId>
            <optional>true</optional>
        </dependency>

        <!-- not needed as equinox bundle are available in provision --> 
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>osgi_R4_core</artifactId>
            <optional>true</optional>
        </dependency>

        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>osgi_R4_compendium</artifactId>
            <optional>true</optional>
        </dependency-->

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.9</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam</artifactId>
            <version>2.3.0</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-junit4</artifactId>
            <version>2.3.0</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-inject</artifactId>
            <version>2.3.0</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.ops4j.pax.url</groupId>
            <artifactId>pax-url-mvn</artifactId>
            <version>1.3.5</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-container-native</artifactId>
            <version>2.3.0</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.ops4j.pax.exam</groupId>
            <artifactId>pax-exam-link-mvn</artifactId>
            <version>2.3.0</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.0</version>
        </dependency>

        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-core</artifactId>
            <version>1.0.0</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

我不确定它是不是最优雅的解决方案，但是当我可以像在我的问题的源代码中那样导入我自己的包时，我创建了一个新的 maven 项目。

有没有一种优雅的方法可以将我自己的 java 源代码直接添加为新包以在同一个 Maven 项目中进行测试？这可能是不可能的（因为捆绑组装操作是在编译和测试之后完成的）**......**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T12:09:26.210

我使用以下设置来配置被测捆绑包。配置测试时，我使用`reference`-protocol 配置包（这是 Equinox 和 Felix 的非标准功能，请参见[此处](http://team.ops4j.org/browse/PAXURL-137)）：

```
@Configuration
public Option[] config() {

    return options(         
        bundle("reference:file:target/classes"),
        junitBundles(),
        felix()
        );
} 
```

`knopplerfish()`当您指定为环境时，测试用例也会运行。我猜这是因为 URL 是由 Pax Exam 解析的，而不是由 OSGi 运行时解析的。我使用[maven-bundle-plugin](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)来构建我的包。要使其按预期工作，您必须添加以下配置：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>2.3.7</version>
            <extensions>true</extensions>
            <executions>
                <!-- This execution makes sure that the manifest is available 
                    when the tests are executed -->
                <execution>
                    <goals>
                        <goal>manifest</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

否则，在运行测试时清单将不可用，因为默认情况下它是在`package`-phase 期间生成的。

我希望我没有忘记任何事情——如果它对你有用，请告诉我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:00:03.933

查看[PaxExam 文档](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam+Maven+Dependencies)如何使用 PaxExam 配置 Maven POM。

样品[在这里](https://github.com/ops4j/org.ops4j.pax.exam2/tree/master/itest/src/it/regression-multi)

# javascript - 在 JSP 中使用 HTML type=file 上传文件并在上传前在 javascript 中执行一些检查...

> ID：10120278
> 
> 赞同：1
> 
> 时间：2012-04-12T08:49:29.523
> 
> 标签：javascript, html, jsp

目前我们有这个代码来上传文件

```
<input id='fileBrowse' type='file' style="width:187px;height:20px" class='fileBrowse' onchange="onBrowseFile( this );" /> 
```

进行一些检查的javascript函数如下：

```
 function onBrowseFile( fb ) {
    var myFSO = new ActiveXObject("Scripting.FileSystemObject");
    var thefile = myFSO.getFile(fb.value);
    if( (thefile.size / 1000000) > maxfilesize) {
        alert( "The size of the files you have tried to drag and drop exceed the maximum allowed. Please drag no more than "+maxfilesize+" MB at a time." );
        return;
    }
    if( fb.value.indexOf( ".exe" ) > -1 ||
            fb.value.indexOf( ".asp" ) > -1 ||
            fb.value.indexOf( ".aspx" ) > -1 ||
            fb.value.indexOf( ".cab" ) > -1 ||
            fb.value.indexOf( ".com" ) > -1 ||
            fb.value.indexOf( ".dll" ) > -1 ||
            fb.value.indexOf( ".java" ) > -1) {
        alert( "The import of one or more files type are not permitted" );
        return;
    }
    document.getElementById( "txtFilePath" ).value = fb.value;
} 
```

现在的问题是我们现在使用 IE9，而 IE9 安全不允许我们在不修改安全设置或注册表的情况下使用 ActivexControl。我们不能这样做，因为我们有这个应用程序的 5000 个用户。

请建议我们还能用什么来解决这个问题。我们必须进行这些检查...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:48:10.277

为 IE9 使用 HTML 5。

```
var upload = document.getElementById('fileBrowse');

upload.onchange = function (e) {
  e.preventDefault();
  var file = upload.files[0];
  if( ( file.fileSize) > (2 * 1024*1024) ) {
        alert( "The size of the files you have tried to drag and drop exceed the maximum allowed. Please drag no more than 1 MB at a time." );
        return;
  }
  if( file.name.indexOf( ".exe" ) > -1 ||
        file.name.indexOf( ".asp" ) > -1 ||
        file.name.indexOf( ".aspx" ) > -1 ||
        file.name.indexOf( ".cab" ) > -1 ||
        file.name.indexOf( ".com" ) > -1 ||
        file.name.indexOf( ".dll" ) > -1 ||
        file.name.indexOf( ".java" ) > -1 ) {
        alert( "The import of one or more files type are not permitted" );
        return;
  }
  return false;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:58:34.487

您可以运行检查服务器端。

# android - http帖子没有通过，我不认为我缺少参数

> ID：10120280
> 
> 赞同：0
> 
> 时间：2012-04-12T08:49:35.587
> 
> 标签：android, html, forms, http-post

我需要能够在[http:///Default.aspx](http://customer.chuckwilson.com/Default.aspx)上发布表单。我已经尝试过我认为我认为需要传递的所有不同可能的参数组合，但我没有取得任何成功。

我希望能够通过 android 代码发布，但除此之外，我觉得这是我为发布的请求提出的问题。这是我尝试发布表单的代码：

```
private void Post() {
    // TODO Auto-generated method stub
    // Create a new HttpClient and Post Header

    HttpParams params = new BasicHttpParams();
    params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://customer.chuckwilson.com/Default.aspx");
    httppost.setHeader("User-Agent", "Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0");
    httppost.setHeader("Content-Type", "application/x-www-form-urlencoded");
    httppost.setHeader("Accept-Charset", "utf-8");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("__VIEWSTATE", "<state value>"));
        nameValuePairs.add(new BasicNameValuePair("__EVENTVALIDATION", "<Event validation value>"));

        nameValuePairs.add(new BasicNameValuePair("txtEmailAddress", "email@android.com"));

        nameValuePairs.add(new BasicNameValuePair("txtStreetAddress", "streetandroid"));
        nameValuePairs.add(new BasicNameValuePair("txtZipCode", "5454"));
        nameValuePairs.add(new BasicNameValuePair("txtCity", "cityandroid"));
        nameValuePairs.add(new BasicNameValuePair("CallBack", "rdCallBackYes"));
        nameValuePairs.add(new BasicNameValuePair("txtLastName", "lastandroid"));
        nameValuePairs.add(new BasicNameValuePair("phone", "(111) 111-1111"));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        Log.d(getPackageName(), "executed http post req");
        HttpEntity resEntity = response.getEntity();
        if (resEntity != null) {    
            Log.i("RESPONSE",EntityUtils.toString(resEntity));
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        Log.e(getPackageName(), "error1 in req");
        e.printStackTrace();
    } catch (IOException e) {
                // TODO Auto-generated catch block
        Log.e(getPackageName(), "error2 in req");
        e.printStackTrace();
    }
} 
```

每次我运行代码时，我得到的响应都是该表单的 html。这表明我的参数是错误的，但我真的看不出有什么问题。我希望有人能指出错误。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:27:11.550

The form in the page you link to is defined with this HTML tag:

```
<form name="form1" method="post" action="Default.aspx" id="form1" enctype="multipart/form-data"> 
```

The "enctype" means it is not using the URL-Encoded form submission that you are producing, but the MIME multipart protocol that's normally used for file uploads.

See this blog article, which shows how to use this type of form: [http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)

# android - android + ZXing 条码扫描库 - 自定义大小和方向

> ID：10120281
> 
> 赞同：5
> 
> 时间：2012-04-12T08:49:37.167
> 
> 标签：android, barcode, zxing, portrait

我已经成功使用了 ZXing 条码扫描库，但仅限于横向模式。

我还成功地将相机预览设置为纵向模式并正确显示（不拉伸），但现在条形码根本不起作用。这是我对“CameraConfigurationManager.java”上的“setDesiredCameraParameters”所做的更改，以便正确显示相机：

```
void setDesiredCameraParameters(Camera camera)
{
    Camera.Parameters parameters = camera.getParameters();
    Log.d(TAG, "Setting preview size: " + cameraResolution);
    setFlash(parameters);
    setZoom(parameters);
    camera.setDisplayOrientation(90);
    parameters.set("rotation", 90);
    parameters.setPreviewSize(cameraResolution.y, cameraResolution.x);
    camera.setParameters(parameters);
} 
```

我已经尝试了其他地方提到的一些解决方案，但要么它们不起作用，要么它们起作用但无法正确显示相机预览。示例： [如何在竖屏模式下使用 Zxing？](https://stackoverflow.com/questions/8007194/how-to-use-zxing-in-portrait-mode) [http://code.google.com/p/zxing/issues/detail?id=178#c46](http://code.google.com/p/zxing/issues/detail?id=178#c46) [https://github.com/pplante/zxing-android/issues](https://github.com/pplante/zxing-android/issues)

完成后，我还需要自定义矩形的位置和大小以进行扫描。我知道我需要更改“CameraManager.java”上的“setManualFramingRect”，但我不确定我是否正确。这是代码：

```
public void setManualFramingRect(Rect rect)
{
    if (initialized)
    {
        Point screenResolution = configManager.getScreenResolution();
        if (rect.right >= screenResolution.x)
            rect.right = screenResolution.x - 1;
        if (rect.left < 0)
            rect.left = 0;
        if (rect.bottom >= screenResolution.y)
            rect.bottom = screenResolution.y - 1;
        if (rect.top < 0)
            rect.top = 0;
        framingRect = rect;
        Log.d(TAG, "Calculated manual framing rect: " + framingRect);
        framingRectInPreview = null;
    }
    else
        _requestedFramingRect = new Rect(rect);
} 
```

当然，我已将“openDriver”更改为调用：

```
if (_requestedFramingRect != null)
    setManualFramingRect(_requestedFramingRect); 
```

请帮我。

* * *

编辑：现在我发现它在某些设备上不起作用。它一开始就崩溃了，如果你调试，你可以看到即使预览也不能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:43:31.687

不仅如此。例如，当相机方向与设备方向不同时，您需要实际“旋转”相机数据（或者，将其扫描为垂直）。并且在使用前置摄像头时，您需要考虑其旋转反转的事实。

# maven - Maven, how to disable by profiling the copying of one resource by the war plugin?

> ID：10120283
> 
> 赞同：0
> 
> 时间：2012-04-12T08:49:38.430
> 
> 标签：maven, resources

Inside a maven project with some resources configured like this :

```
<webResources>
    ....
    <resource>
        <directory>${project.build.directory}/${temp.dir}</directory>
    </resource>
</webResources> 
```

the ${temp.dir} is generated conditionally by a plugin and do not exists always. When it is not there maven of course fail with an NPE, how could I fix this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:56:38.983

我不确定我是否理解您的问题（确切地），但在我看来 Maven 配置文件可以帮助您：

[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

在您的情况下，您可能需要在属性存在时激活配置文件，如下所示：

```
<profiles>
  <profile>
    <activation>
      <property>
        <name>temp.dir</name>
      </property>
    </activation>
    ...
  </profile>
</profiles> 
```

# php - Mod Rewrite Help - hiding PHP get query

> ID：10120285
> 
> 赞同：1
> 
> 时间：2012-04-12T08:49:47.420
> 
> 标签：php, .htaccess, mod-rewrite

I'm trying to remove a PHP Get query from my domain. For example, instead of showing `example.com/?url=1234`, I'd like it to rewrite to `example.com/1234`, hiding the query but not removing it. I know this is possible and have read many tutorials on how to do this, but my code just isn't working. Here's what I'm currently trying:

```
RewriteEngine On 
RewriteCond %{QUERY_STRING} url=  
RewriteRule (.*) http://example.com/$1? [R=301] 
```

What this is doing is stripping the query entirely, instead of just removing the `?url=` segment.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:01:19.363

您正在以错误的方式思考它。重写不是客户端看到的东西，而是服务器独有的东西。

这意味着您可以使 example.com/1234 像客户端使用 example.com?url=1234 一样工作。

为此，您将使用以下行：

```
RewriteEngine On   
RewriteRule (.*) http://example.com/url=$1 [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:54:47.097

检查这个 - [htaccess 重写查询字符串](https://stackoverflow.com/questions/1231067/htaccess-rewrite-for-query-string)

和 [Htaccess 查询字符串重写](https://stackoverflow.com/questions/1337152/htaccess-querystring-rewrite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:07:29.720

您需要提取该`RewriteCond`行中查询字符串的相关部分。

```
RewriteEngine On
RewriteCond %{QUERY_STRING} url=(.*)(&|$)
RewriteRule (.*) http://example.com/$1%1? [R=301] 
```

以上将丢弃您提供的任何其他查询字符串参数（请参见下面的示例）。如果给定，它也会保留文件名。

例子：

```
http://example.com/?url=1234       ---->   http://example.com/1234
http://example.com/a/?url=1234     ---->   http://example.com/a/1234
http://example.com/?url=1234&a=b   ---->   http://example.com/1234 
```

# admob - Why different admob publisher id for android & iphone

> ID：10120286
> 
> 赞同：2
> 
> 时间：2012-04-12T08:49:50.430
> 
> 标签：admob

I created admob publisher id for android app

But when I inserted this id into my iphone app still the ads were appearing.

So if a single publisher id is working on both android & iphone then why should i create 2 different publisher id for SAME APP?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:08:48.020

使用不同的 id，admob 可以向每个设备发送适当的广告。例如：如果广告是关于一个新的 iPhone 应用程序，你不想在你的安卓设备上看到它。

如果我错了，请有人纠正......

# jquery - Same hover and focus over two aligned tables from different divs

> ID：10120289
> 
> 赞同：3
> 
> 时间：2012-04-12T08:50:01.053
> 
> 标签：jquery, html, css, wicket

I have a scrollable table with last column fixed because that column contain action buttons. On html code they looks like: two divs with a table in each div, first div contain main table and on second div I have a table with only one column on which I have added action buttons. On tables I have a hover effect when cursor pass over tr td and on focus I applied a different background in order to highlights selected registration from table. My problem is how can I have that hover and focus effect over booth tables in the same time when cursor pass over tr td because now they works independently on each table.

Please check my live example: [`http://mainpage.ueuo.com/`](http://mainpage.ueuo.com/)

thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:27:25.920

look here [http://jsfiddle.net/Ksb2W/5/](http://jsfiddle.net/Ksb2W/5/)

```
$(function(){
$('table tr td').click(function () { 
         var selected = $(this).parent(); 
         var index = selected.GetIndex();
            var parentOfRow = $(selected.parent()[0].tagName);

         //First remove the selectedRow class
        $(".selectedRow",parentOfRow).removeClass("selectedRow");
        parentOfRow.each(function(){
               $("tr:eq("+index +")",this).addClass("selectedRow");
         });
    });
$("tr").hover(function(){
     var row = $(this).GetIndex();
    $(".table").each(function(){          
          $("tr:eq("+row+")",this).addClass("hoverx");
    });
},function(){         
     var row = $(this).parent().children().index($(this));
    $(".table").each(function(){          
          $("tr:eq("+row+")",this).removeClass("hoverx");
    });
});
});

    jQuery.fn.GetIndex = function(){
        return $(this).parent().children().index($(this));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:17:23.570

我将使用这个可以修复列和行的 jQuery 插件，而不是这两个 DIV 方法：

[http://fixedheadertable.com/](http://fixedheadertable.com/)

它将使您的 HTML 更加简单和标准。

# python - python类名中的有效字符

> ID：10120295
> 
> 赞同：33
> 
> 时间：2012-04-12T08:50:16.407
> 
> 标签：python, metaprogramming

我正在动态创建 python 类，我知道并非所有字符在这种情况下都是有效的。

类库中是否有一种方法可以用来清理随机文本字符串，以便可以将其用作类名？那个或允许的字符列表将是一个很好的帮助。

* * *

**关于与标识符名称冲突的补充：**就像@Ignacio 在下面的答案中指出的那样，任何[作为标识符](http://docs.python.org/reference/lexical_analysis.html#identifiers)有效的字符都是类名中的有效字符。您甚至可以毫无问题地使用[保留字作为类名。](http://docs.python.org/reference/lexical_analysis.html#keywords)但有一个问题。如果您确实使用了保留字，您将无法像其他（非动态创建的）类一样使该类可访问（例如，通过做`globals()[my_class.__name__] = my_class`）。在这种情况下，保留字将始终优先。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-12T08:52:14.927

**蟒蛇 3**

[Python 语言参考，第 2.3 节，“标识符和关键字”](http://docs.python.org/3/reference/lexical_analysis.html#identifiers)

> Python 中标识符的语法基于 Unicode 标准附件 UAX-31，详细说明和更改如下定义；另请参阅 PEP 3131 了解更多详情。
> 
> 在 ASCII 范围内 (U+0001..U+007F)，标识符的有效字符与 Python 2.x 中的相同：大写和小写字母 A 到 Z、下划线 _ 以及除第一个字符外，数字 0 到 9。
> 
> Python 3.0 引入了 ASCII 范围之外的其他字符（参见 PEP 3131）。对于这些字符，分类使用包含在 unicodedata 模块中的 Unicode 字符数据库的版本。
> 
> 标识符的长度不受限制。案例意义重大。
> 
> ```
> identifier   ::=  xid_start xid_continue*
> id_start     ::=  <all characters in general categories Lu, Ll, Lt, Lm, Lo, Nl, the underscore, and characters with the Other_ID_Start property>
> id_continue  ::=  <all characters in id_start, plus characters in the categories Mn, Mc, Nd, Pc and others with the Other_ID_Continue property>
> xid_start    ::=  <all characters in id_start whose NFKC normalization is in "id_start xid_continue*">
> xid_continue ::=  <all characters in id_continue whose NFKC normalization is in "id_continue*"> 
> ```
> 
> 上面提到的 Unicode 类别代码代表：
> 
> *   卢——大写字母
> *   Ll - 小写字母
> *   Lt - 大写字母
> *   Lm - 修饰字母
> *   Lo - 其他字母
> *   Nl - 字母数字
> *   Mn - 非间距标记
> *   Mc - 间距组合标记
> *   Nd——十进制数
> *   Pc - 连接器标点符号
> *   Other_ID_Start - PropList.txt 中的显式字符列表以支持向后兼容性
> *   Other_ID_Continue - 同样
> 
> 所有的标识符在解析的时候都被转换成正常形式的NFKC；标识符的比较基于 NFKC。
> 
> [可在https://www.dcl.hpi.uni-potsdam.de/home/loewis/table-3131.html](https://web.archive.org/web/20191226044556/https://www.dcl.hpi.uni-potsdam.de/home/loewis/table-3131.html)找到列出 Unicode 4.1 的所有有效标识符字符的非规范 HTML 文件。

**蟒蛇2**

[Python 语言参考，第 2.3 节，“标识符和关键字”](http://docs.python.org/2/reference/lexical_analysis.html#identifiers)

> 标识符（也称为*名称*）由以下词汇定义描述：
> 
> ```
> identifier ::=  (letter|"_") (letter | digit | "_")*
> letter     ::=  lowercase | uppercase
> lowercase  ::=  "a"..."z"
> uppercase  ::=  "A"..."Z"
> digit      ::=  "0"..."9" 
> ```
> 
> 标识符的长度不受限制。案例意义重大。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-02T21:37:05.193

根据[Python 语言参考，第 2.3 节，“标识符和关键字”](https://docs.python.org/2/reference/lexical_analysis.html#identifiers)，有效的 Python 标识符定义为：

```
(letter|"_") (letter | digit | "_")* 
```

或者，在**正则表达式**中：

```
[a-zA-Z_][a-zA-Z0-9_]* 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-12T09:39:38.643

有趣的是标识符的第一个字符是特殊的。在第一个字符之后，数字 '0' 到 '9' 对标识符有效，但它们不能是第一个字符。

这是一个函数，它将返回一个给定任意随机字符串的有效标识符。以下是它的工作原理：

首先，我们用于`itr = iter(seq)`获取输入的显式迭代器。然后是第一个循环，它使用迭代器`itr`查看字符，直到找到标识符的有效第一个字符。然后它跳出那个循环并运行第二个循环，对第二个循环*使用相同的迭代器*（我们命名为`itr`）。迭代器`itr`为我们保留了位置；当第二个循环运行时，从迭代器中拉出的第一个循环的字符仍然消失。

```
def gen_valid_identifier(seq):
    # get an iterator
    itr = iter(seq)
    # pull characters until we get a legal one for first in identifer
    for ch in itr:
        if ch == '_' or ch.isalpha():
            yield ch
            break
    # pull remaining characters and yield legal ones for identifier
    for ch in itr:
        if ch == '_' or ch.isalpha() or ch.isdigit():
            yield ch

def sanitize_identifier(name):
    return ''.join(gen_valid_identifier(name)) 
```

这是一种以两种不同方式处理序列的干净且 Pythonic 的方式。对于这么简单的问题，我们可以只使用一个布尔变量来指示我们是否已经看到了第一个字符：

```
def gen_valid_identifier(seq):
    saw_first_char = False
    for ch in seq:
        if not saw_first_char and (ch == '_' or ch.isalpha()):
            saw_first_char = True 
            yield ch
        elif saw_first_char and (ch == '_' or ch.isalpha() or ch.isdigit()):
            yield ch 
```

我不像第一个版本那样喜欢这个版本。对一个字符的特殊处理现在纠缠在整个控制流程中，这将比第一个版本慢，因为它必须不断检查 的值`saw_first_char`。但这是您在大多数语言中处理控制流的方式！Python 的显式迭代器是一个很好的特性，我认为它使这段代码变得更好。

在显式迭代器上循环与让 Python 为您隐式获取迭代器一样快，并且显式迭代器允许我们拆分处理标识符不同部分的不同规则的循环。因此，显式迭代器为我们提供了运行速度更快的更简洁的代码。双赢。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-10T03:34:32.573

到目前为止，这是一个老问题，但我想添加一个关于如何在 Python 3 中执行此操作的答案，因为我已经做了一个实现。

此处记录了允许的字符：[https](https://docs.python.org/3/reference/lexical_analysis.html#identifiers) ://docs.python.org/3/reference/lexical_analysis.html#identifiers 。它们包括很多特殊字符，包括标点符号、下划线和大量外来字符。幸运的是，该`unicodedata`模块可以提供帮助。这是我的实现直接实现 Python 文档所说的内容：

```
import unicodedata

def is_valid_name(name):
    if not _is_id_start(name[0]):
        return False
    for character in name[1:]:
        if not _is_id_continue(character):
            return False
    return True #All characters are allowed.

_allowed_id_continue_categories = {"Ll", "Lm", "Lo", "Lt", "Lu", "Mc", "Mn", "Nd", "Nl", "Pc"}
_allowed_id_continue_characters = {"_", "\u00B7", "\u0387", "\u1369", "\u136A", "\u136B", "\u136C", "\u136D", "\u136E", "\u136F", "\u1370", "\u1371", "\u19DA", "\u2118", "\u212E", "\u309B", "\u309C"}
_allowed_id_start_categories = {"Ll", "Lm", "Lo", "Lt", "Lu", "Nl"}
_allowed_id_start_characters = {"_", "\u2118", "\u212E", "\u309B", "\u309C"}

def _is_id_start(character):
    return unicodedata.category(character) in _allowed_id_start_categories or character in _allowed_id_start_categories or unicodedata.category(unicodedata.normalize("NFKC", character)) in _allowed_id_start_categories or unicodedata.normalize("NFKC", character) in _allowed_id_start_characters

def _is_id_continue(character):
    return unicodedata.category(character) in _allowed_id_continue_categories or character in _allowed_id_continue_characters or unicodedata.category(unicodedata.normalize("NFKC", character)) in _allowed_id_continue_categories or unicodedata.normalize("NFKC", character) in _allowed_id_continue_characters 
```

此代码改编自 CC0 下的此处：[https](https://github.com/Ghostkeeper/Luna/blob/d69624cd0dd5648aec2139054fae4d45b634da7e/plugins/data/enumerated/enumerated_type.py#L91) ://github.com/Ghostkeeper/Luna/blob/d69624cd0dd5648aec2139054fae4d45b634da7e/plugins/data/enumerated/enumerated_type.py#L91 。它已经过很好的测试。

# cuda - 在CUDA中使用3D Texture时，为什么不需要设置Texture坐标？

> ID：10120303
> 
> 赞同：1
> 
> 时间：2012-04-12T08:50:52.603
> 
> 标签：cuda, textures

在 OpenGL 中，创建 3D Texture 后，我们总是需要绘制 GL_QUADS 等代理几何体来包含 3D Texture，并在这个函数中设置纹理坐标：glTexCoord3f。

但是，当我在 CUDA 中使用 3D 纹理时，我从来没有找到像 glTexCoord3f 这样的函数来指出纹理坐标。实际上，我们只是使用 CUDA 数组，然后将数组绑定到纹理。在此之后，我们可以使用纹理获取函数 tex3D 来获取值。

因此，我很困惑 tex3D 函数如何才能正确运行，即使我们之前从未设置过纹理坐标？？？？

谢谢回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:58:55.457

纹理坐标是`tex3D()`fetch 函数的输入参数。

更详细地说，在 OpenGL 中，当您调用`glTexCoord3f()`它时，它会指定下一个发出顶点的纹理坐标。渲染多边形的每个像素处的纹理坐标是根据多边形顶点（通常是三角形）指定的纹理坐标进行插值的。

在 CUDA 中，没有多边形或坐标插值的概念。相反，每个线程负责计算（或加载）其纹理坐标并为每次提取明确指定它们。这就是`tex3D()`进来的地方。

请注意，如果您使用 GLSL 像素着色器在 OpenGL 中对多边形进行着色，您实际上所做的事情与 CUDA 非常相似——您显式调用纹理获取函数，并传递它的坐标。这些坐标可以任意计算。不同之处在于您可以选择使用在每个像素处插值的输入坐标。（您可以将每个像素视为一个线程！）

# java - java中文本文件的字符显示

> ID：10120305
> 
> 赞同：-2
> 
> 时间：2012-04-12T08:51:13.160
> 
> 标签：java

我有一个文本文件，其中包含一行作为 a,b,a,b,a,b 并且我想将该行显示为 b,b,b,a,a,a

任何援助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:58:25.850

*   使用`BufferedReader`'`readLine()`方法从文件中读取一行。
*   使用`String`'s`split()`将行拆分为标记（在本例中为字符）。
*   `String.split()`对使用返回的数组进行排序`Arrays.sort()`（请注意，顺序将与所需的相反，因此您应该在打印时反转数组），或将数组存储到 an 中`ArrayList`并使用`Collections.sort()`并指定您自己的`Comparator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:56:34.903

根据'，'拆分文本

只需创建一个数组并继续在该数组上存储元素，以任何您想要的方式对该数组进行排序，然后打印输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:57:23.970

让我们把它分成几个步骤：

1.  打开文件
2.  从文件中读取该行
3.  将行解析为单个元素
4.  将元素添加到数据结构中
5.  对数据结构进行排序
6.  颠倒顺序
7.  通过呈现内容或创建字符串来显示数据结构

你在哪个部分有问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:59:47.213

```
public static void main( String[] args) {
        String line="a,b,a,b,a,b";
        String[] split = line.split( "," );
        Arrays.sort( split );
        for ( int i = split.length -1; i > 0 ; i--) {
            System.out.print( split[i] );
            System.out.print( "," );
        }
        System.out.print( split[0] );
    } 
```

# java - Reimport working set in Eclipse

> ID：10120307
> 
> 赞同：0
> 
> 时间：2012-04-12T08:51:21.660
> 
> 标签：java, eclipse

I accidentally clicked "remove" on a working set (I only wished to hide it).

Is there a way I can re-import the working set into Eclipse or is my code deleted?

Thanks,

David

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:54:00.320

工作集只是一个视图，如果您只是从工作集窗口中“删除”，它不会从磁盘中删除您的项目代码。如果您将工作集更改为“窗口工作集”（默认设置），您应该能够在其中看到您的项目，然后只需将它们重新分配给一个新集即可。

如果它们不存在，您可能需要从工作区目录重新导入它们。

# android - how to avoid deep sleep mode in android phone programmatically?

> ID：10120308
> 
> 赞同：3
> 
> 时间：2012-04-12T08:51:24.877
> 
> 标签：android

I have develop one android application which will talk to server 24*7 over WiFi but when phone goes to sleep mode it stops talking to server means socket is getting closed so for resolving this I added code to acquire partial wake lock in service onCreate() and release it on OnDestroy() method o service so even though phone goes to sleep mode my application can talk to the server.

Problem is: If you keep the device idle for longer period (more than 8 hours ), it stops communicating with the server and WiFi turned off. I heard about deep sleep mode of device, in this case it will shutdown CPU,WiFi etc.. so how to restrict it for getting CPU and Wifi turned off?

Please help me with some sample example.

Regards, Piks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:58:52.640

我假设您也尝试过完全唤醒锁定？

# reporting-services - 使用动态列创建报告

> ID：10120309
> 
> 赞同：2
> 
> 时间：2012-04-12T08:51:28.917
> 
> 标签：reporting-services

我有 SQL Server 2005 报告服务。我需要创建一个包含在运行时定义的列数的报告。

我有一个内容如下的数据库表：

```
Person           Date             Val
----------------------------------------------
Person1          2012-01-03       3
Person2          2012-02-11       5
Person1          2012-02-17       7
Person2          2012-01-19       2
Person2          2012-01-15       4 
```

我必须创建一个这样的报告：

```
Person           Jan 2012         Feb 2012
----------------------------------------------
Person1          3                7
Person2          6                5 
```

换句话说，对于每个人，我必须对**给定月份的所有值字段求和，**并将总和放入对应于月份的列中。在上面的示例中，2012 年 1 月的 Person2 有 6 个 - 这是值 2（2012-01-19）和 4（2012-01-15）的总和。

因此，在设计时，我不知道我的表格所涵盖的日期范围。我应该检测到它，以构建日期范围所涵盖的月份数组（上面示例中的 2012 年 1 月和 2012 年 2 月），并为每个月份添加一列。

我应该如何使用 SSRS 来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:10:20.817

在 SQL 2008 及更高版本中，解决此问题的方法发生了一些变化，因此请确保您正在查看 2005 年的参考资料（如果您正在使用该参考资料）。

在[此页面上](http://www.simple-talk.com/sql/reporting-services/beginning-sql-server-2005-reporting-services-part-2/)，查找矩阵部分。SSRS 中的矩阵旨在以最小的努力准确地解决您描述的问题。在 2008 年，矩阵和表格都是“Tablix”的变体：一个可以同时具有行组和列组的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T03:16:43.907

如果您坚持使用 Tablix，这是我已经解决的类似情况，我[如何在 SSRS 中表示未知数量的列？](https://stackoverflow.com/questions/888661/how-do-i-represent-an-unknown-number-of-columns-in-ssrs/10527254#10527254).

# jquery - How to get a list of attribute values from checked checkboxes of a certain class

> ID：10120310
> 
> 赞同：2
> 
> 时间：2012-04-12T08:51:30.717
> 
> 标签：jquery

I have some mark up like:

```
<input type="checkbox" class="fieldapprovalcheckbox" data-invoicelineid=3 />
<input type="checkbox" class="fieldapprovalcheckbox" data-invoicelineid=4 />
<input type="checkbox" class="fieldapprovalcheckbox" data-invoicelineid=5 /> 
```

Now say all these checkboxes have been checked in jquery how would I get a list of all the data-invoicelineid? ie. It should contain 3,4,5.

I wrote the following but it only gets the first one.

```
var checkedInvoiceLineIds = $(".fieldeapprovalcheckbox:checked").attr("data-invoicelineid"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T08:54:59.857

你应该使用 map()

```
var checkedInvoiceLineIds = $(".fieldeapprovalcheckbox:checked").map(function(){
        return $(this).data("invoicelineid");
}).get(); 
```

你有一个包含检查值的数组

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T08:55:08.623

```
var checkedInvoiceLineIds = [];
$(".fieldeapprovalcheckbox:checked").each(function(){
   checkedInvoiceLineIds.push($(this).data("invoicelineid"));
}); 
```

# objective-c - 更改背景位置和菜单栏半透明

> ID：10120313
> 
> 赞同：0
> 
> 时间：2012-04-12T08:51:47.607
> 
> 标签：objective-c, macos, cocoa

如何从代码更改桌面背景位置（“填充屏幕”、“适合屏幕”、“拉伸以填充屏幕”、“中心”或“平铺”之一）和菜单栏半透明（打开或关闭）？

基本上我想从“桌面和屏幕保护程序”首选项窗格中模拟类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:58:32.383

使用 AppleScript，您可以更改菜单栏的半透明：

```
tell application "System Events"
    set translucent menu bar of first desktop to false
end tell 
```

桌面图片有各种属性 - `change interval`、`picture`、`picture rotation`、`pictures folder`和`random order`- 但与背景位置无关。可能无法从代码中配置它。

* * *

使用脚本桥技术更新：

在终端中，执行：

```
sdef /System/Library/CoreServices/System\ Events.app | sdp -fh --basename SystemEvents 
```

将生成的 SystemEvents.h 添加到您的项目中。将其导入您的代码。将 ScriptingBridge 框架添加到您的目标。

然后，在您的代码中，您可以执行以下操作：

```
SystemEventsApplication* SystemEvents = [SBApplication applicationWithBundleIdentifier:@"com.apple.systemevents"];
SystemEvents.currentDesktop.translucentMenuBar = FALSE; 
```

[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/Introduction/Introduction.html)进一步了解脚本桥。

# keyboard - 如何从（辅助）UIWindow 上的 UITextView 激活键盘

> ID：10120316
> 
> 赞同：0
> 
> 时间：2012-04-12T08:51:50.467
> 
> 标签：keyboard, uitextview, uiwindow, addsubview, becomefirstresponder

我的 iPhone 应用程序（基于 Xcode 的“单视图应用程序”）有一个 UITextView（比如：myTextView），我希望用户能够编辑它。我将其设置为可编辑，一切正常（我什至不必调用 becomeFirstResponder）。

然后我将它移动到另一个 UIWindow（比如：newWindow）（在称为 self.window（单视图应用程序的）的 main/root/key 的顶部）。

但是现在，当我单击 UITextView 时，键盘不显示。

如果我这样做，一切正常：

> [myTextView setEditable:YES];
> [myTextView 成为FirstResponder]; // 丑陋...我不需要它，但我添加它以防万一...
> [self.window addSubview:newWindow];

但是键盘立即显示（因为我设置了 becomeFirstResponder），这并不好。**但是如果我删除 becomeFirstResponder 行，键盘根本**不会显示！

如果我移动上面的 [self.window addSubview:newWindow] 行，那么无论我做什么，键盘都不会被激活......

> [self.window addSubview:newWindow]; // 应该是这样的......但是，
> [myTextView setEditable:YES];
> [myTextView 成为FirstResponder]; // 即使我输入它，它也不起作用:-(

我没有尝试 [newWindow makeKeyAndVisible]。我尝试在 UITextView 上添加一个触摸委托并检测触摸（或手势），它们工作（我收到了我包含的 NSLog 消息），但同样没有键盘。我什至尝试在 newWindow 顶部添加另一个字段（主窗口）（以便在顶部有一个主窗口元素），仍然没有运气......

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:11:43.923

您不应该将 UIWindow 添加为子视图。相反，通过调用 -[UIWindow makeKeyAndVisible] 或 -[UIWindow setHidden:NO] 来显示窗口（如果您不希望它接收键事件）。

不过，您很少需要使用多个窗口。在许多情况下，只需使用普通的 UIView 添加将其添加为子视图即可。

编辑：在关于“分配给屏幕”之前，我有一个令人困惑的评论。UIWindow 有一个属性“screen”，如果你想在主屏幕之外的另一个屏幕上显示窗口，你可以分配给它。不过，您不需要关心您的用例。

# php - 将 CMS 集成到 PHP 应用程序

> ID：10120320
> 
> 赞同：0
> 
> 时间：2012-04-12T08:52:08.290
> 
> 标签：php, content-management-system

由于应用程序或遗留实现的复杂性，我有许多 PHP 应用程序（以及 PHP 以外的其他应用程序）不太适合在 CMS 之上构建。将 CMS 功能引入应用程序的好方法是什么？过去，我一直在服务器端使用 HTML 片段，这些片段包含在页面中，片段是通过 Dreamweaver 或 CushyCMS 等 HTML 工具维护的。这让我有一些管理员可以维护的内容区域。但是我对 CushyCMS（也不是独立的 DW）不太满意，因为它的功能有限。我一直在考虑使用类似的 Wordpress 来维护直接包含在服务器页面中的内容。但实际的问题是...... :)

在不使用 CMS（如 Wordpress 或类似内容）构建整个网站的情况下，获得 CMS 功能的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:05:46.743

CMS 变得复杂是有原因的——你首先添加简单的文章管理，保存到文件或 sqlite 中。然后你需要几个用户。然后是树状菜单、权限系统、文章锁定或版本控制..然后你想要更好的性能和可伸缩性，所以你迁移到真实的数据库..然后你想要像小部件或表格这样的动态数据。然后是模块化结构。一个商店模块、时事通讯等。所以你最终得到了一个只有你知道它是如何工作的复杂引擎。

因此，如果您想要一个长期可维护的 CMS，请使用现有的开源解决方案，即使它们在内部像 Wordpress 一样丑陋。您可能需要将一个集成到另一个中，这就是您需要双方都需要 API 的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:06:30.273

好吧，您可以做的事情是创建一个 CMS 扩展来处理 CMS 中的路由，然后将结果委托给底层应用程序。

举个例子，让我们考虑一下 drupal 7。在这个 CMS 中，您可以创建一个包含两个文件的文件夹：一个用于有关模块的数据，另一个用于模块的代码。

my_module/my_module.info <-模块的数据

```
name = My Module
description = A description of what your module does.
core = 7.x 
```

my_module/my_module.module <- 模块的代码

```
<?php
/**
* Respond to a drupal's URL with a callback.
*/
function my_module_menu() {
    $menu = array();
    $menu["App"] = array(
        "page callback" => "my_module_run",
        "access callback" => true,
    );
    return $menu;
}

/*
* Do the job
*/
function my_module_run() {
    ob_start();
    // Call your application by including it's index.php file or whatever
    // operation needed.....
    // Capture the result of the application.
    $result = ob_get_clean();

    // If the request is ajax, echo the result.
    if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) 
       && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
        echo $result;
    } else {
        //Otherwise, return it, so it is rendered as part of the 
        // CMS content.
        return $result;
    }
}
?> 
```

使用这个基本代码，您可以将您的应用程序“集成”到drupal，您需要做的就是将其安装为任何drupal 模块，然后转到htt://your-cool-site/App 来执行您的应用程序。

更多关于 drupal 模块创作[的信息](http://drupal.org/node/1074362)。

我希望它有帮助:)

[这](https://github.com/JeyDotC/Hirudo)是一个考虑到这一点的框架，它与drupal（6、7和8）和joomla绑定。

# objective-c - 核心图中刻度间隔的动态缩放

> ID：10120330
> 
> 赞同：0
> 
> 时间：2012-04-12T08:52:29.313
> 
> 标签：objective-c, ios, core-plot

我有一个图表，显示轴上间隔 1 天的日期`X`。这很好用，但是，刻度标签往往会**相互重叠**并使其看起来一团糟。

默认情况下，主要刻度间隔设置为`one day`。我希望它与图表的其余部分一起缩放，即当我缩小到足够的比例时，主要的刻度间隔将设置为`one week`,`one month`等。

我将如何继续实施这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T00:46:01.210

目前还没有办法自动执行此操作。最好的解决方案是使用绘图空间委托来监控绘图空间范围的变化，并根据当前范围根据需要调整标签。

# php - 当路径包含 PHP 中的空格时，scandir 或 opendir 不起作用

> ID：10120342
> 
> 赞同：3
> 
> 时间：2012-04-12T08:53:27.953
> 
> 标签：php, directory, space

当目录路径中有空间时，以下功能不起作用。例如，在以下路径中，目录名称为“Stack Overflow_files”，其中包含一个空格。

```
 $dir = '/home/mamun/workspace/barj/barj/barj/Sequence/Stack Overflow_files';
 $scanned_directory =  array_diff(scandir($dir, 0), array('..', '.')) 
```

或者

```
$dh  = opendir($dir);
while (false !== ($filename = readdir($dh))) {
         $scanned_directory[] = $filename;
} 
```

*我可以从运行ls '$dir'*的终端找到解决方案。但是php中有什么方法可以获取目录列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-19T12:47:06.027

替代解决方案

```
 $URL = str_replace("\ ","%20","../pasta1/pasta com espaco/pasta2");<br>
 $arquivos = scandir($URL);

<br>

 echo $arquiovos[0];<br>
 echo $arquiovos[1];<br> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:56:11.143

尝试用反斜杠转义空格-

```
$dir = '/home/mamun/workspace/barj/barj/barj/Sequence/Stack\ Overflow_files'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:16:56.090

试试 urlencoding。目录路径可能像

```
 $dir = '/home/mamun/workspace/barj/barj/barj/Sequence/Stack%20Overflow_files'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:20:16.173

尝试

```
$dir = urlencode('/home/mamun/workspace/barj/barj/barj/Sequence/Stack Overflow_files'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T15:44:06.110

兄弟，这是最终的解决方案

$path="/var/www/images";
$dir="带空格的文件夹";
$files=scandir("${path}/${dir}");

和宾果游戏

# ruby-on-rails - 如何将 Rails 中的 Linkedin 客户端转换为 Hash

> ID：10120344
> 
> 赞同：0
> 
> 时间：2012-04-12T08:53:29.233
> 
> 标签：ruby-on-rails, nokogiri, linkedin

我像这样创建linkedin客户端。

```
 client = LinkedIn::Client.new("3333", "rrrrrrr")
  client.authorize_from_access(session[:atoken], session[:asecret]) 
```

并获取这样的个人资料信息

```
 @profile = client.profile 
```

当我打印像“ **puts client.profile** ”这样的配置文件时，我得到以下输出

```
 #<LinkedIn::Profile:0x4a77770 @doc=#<Nokogiri::XML::Document:0x253bb64 name="document" children=[#<Nokogiri::XML::Element:0x253b9fc name="pers
on" children=[#<Nokogiri::XML::Text:0x253b87c "\n  ">, #<Nokogiri::XML::Element:0x253b84c name="first-name" children=[#<Nokogiri::XML::Text:0x
253b684 "Anthony">]>, #<Nokogiri::XML::Text:0x253b5ac "\n  ">, #<Nokogiri::XML::Element:0x253b57c name="last-name" children=[#<Nokogiri::XML::
Text:0x253b3b4 "Raj S">]>, #<Nokogiri::XML::Text:0x253b2dc "\n  ">, #<Nokogiri::XML::Element:0x253b2ac name="headline" children=[#<Nokogiri::X
ML::Text:0x253b0e4 "Senior Software Engineer at AB Innovative Software Pvt. Ltd">]>, #<Nokogiri::XML::Text:0x253b00c "\n  ">, #<Nokogiri::XML:
:Element:0x253afdc name="site-standard-profile-request" children=[#<Nokogiri::XML::Text:0x253ae14 "\n    ">, #<Nokogiri::XML::Element:0x253ade
4 name="url" children=[#<Nokogiri::XML::Text:0x253ac1c "http://www.linkedin.com/profile?viewProfile=&key=78718913&authToken=XE_V&authType=name
&trk=api*a178337*s186521*">]>, #<Nokogiri::XML::Text:0x253ab44 "\n  ">]>, #<Nokogiri::XML::Text:0x253aa6c "\n">]>]>> 
```

如何将其解析为 hasmap 或字符串？

请帮助我，因为我是 Rails 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:24:30.073

1.  获取 Nokogiri XML 文档

    ```
    xml = @profile.instance_variable_get :@doc 
    ```

2.  将 Nokogiri XML 文档转换为哈希：
    [https ://stackoverflow.com/a/10144623/405017](https://stackoverflow.com/a/10144623/405017)

如果你想要一个不同的哈希形式，那么你应该在问题中指定你想要的输出。:p 有很多方法可以将 XML 文档表示为散列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:34:37.213

1.  将配置文件转换为 xml 2\. 使用 nokogiri 进行操作

# c# - 通过代码C#在用户机器上配置IIS

> ID：10120348
> 
> 赞同：9
> 
> 时间：2012-04-12T08:53:42.910
> 
> 标签：c#, iis

我将网站配置为在 IIS 上本地运行，以便在我的机器上使用。我的桌面应用程序可以与这个本地运行的网站一起用于某些操作。

我按照以下步骤配置网站

1.  使用 IIS 管理器配置指向目录的 Web 应用程序。(C:\somefolder)：
    开始 > Internet 信息服务 (IIS) 管理器。
    展开左侧树视图并右键单击“默认网站”。
    选择“添加应用程序”。
    将“别名”设置为“sampleweb”
    单击“选择”按钮并选择“ASP.NET 4.0”应用程序池。
    将“物理路径”设置为目录 - C:\somefolder。
    单击“确定”。

2.  使用 IIS 管理器配置指向另一个目录 (C:\somefiles) 的虚拟目录。
    开始 > Internet 信息服务 (IIS) 管理器。
    展开左侧树视图并右键单击“默认网站”。
    选择“添加虚拟目录”。
    将“别名”设置为“somefiles”。
    将“物理路径”设置为目录 - C:\somefiles。
    单击“确定”。

因此，当我分发应用程序时，我希望能够在用户机器上设置本地服务器，并在 IIS 中执行上述步骤。
我已经能够设置本地服务器部分，但我对如何在用户机器上以编程方式执行上述 stesp 以使网站运行感到困惑。
有什么建议么？我上线了`Windows 7` `64 bit` `IIS7`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T09:01:41.690

看一下[`Microsoft.Web.Administration`](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.aspx)命名空间——它包含管理 IIS 各个方面的托管类，包括您正在谈论的配置。

> Microsoft.Web.Administration 命名空间包含开发人员可以用来管理 IIS 管理器的类。使用此命名空间中的类，管理员可以读取配置信息并将其写入 ApplicationHost.config、Web.config 和 Administration.config 文件。

您可以在 C# 代码或 PowerShell 中使用这些类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:07:20.767

阅读此[在 IIS 中创建站点和虚拟目录](http://msdn.microsoft.com/en-us/library/ms524896.aspx)以及此[使用 IIS 编程管理](http://msdn.microsoft.com/en-us/library/ms524732%28v=vs.90%29.aspx)我希望这会有所帮助

# actionscript - ActionScript：这怎么会失败？

> ID：10120352
> 
> 赞同：3
> 
> 时间：2012-04-12T08:53:59.993
> 
> 标签：actionscript

此代码引发错误：

```
 if (modalMessage != null && contains(modalMessage))
    {
        removeChild(modalMessage); // the error is here
        modalMessage = null;            
    } 
```

错误是：

```
[Fault] exception, information=ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller. 
```

怎么会这样？我正在检查它是否是一个孩子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:59:53.907

`contains()`如果主题是调用者的后代，将返回 true。对于间接后代，孩子的孩子等，这也将返回 true。

> 确定指定的显示对象是 DisplayObjectContainer 实例的子对象还是实例本身。搜索包括整个显示列表，包括此 DisplayObjectContainer 实例。孙子、曾孙等每个都返回真。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#contains%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#contains%28%29)

您可以检查父母：

```
if(modalMessage && modalMessage.parent && modalMessage.parent == this) 
```

或者，对于更通用的处置解决方案：

```
if(modalMessage) {
    if(modalMessage.parent) DisplayObjectContainer(modalMessage.parent).removeChild(modalMessage);
    modalMessage = null;
} 
```

# css - 为什么 DIV 右侧的区域可以点击？

> ID：10120354
> 
> 赞同：-7
> 
> 时间：2012-04-12T08:54:01.897
> 
> 标签：css, html, area, clickable

我有一个可点击的 div，但 div 右侧的区域也是可点击的。我不想要那个。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:55:24.860

可能您的 div 是`display: block`默认值。试试`display: inline-block`。

# amazon-web-services - 为什么 Amazon PHP 库的报告和提要 API 中有相同的文件？

> ID：10120366
> 
> 赞同：1
> 
> 时间：2012-04-12T08:54:57.180
> 
> 标签：amazon-web-services, amazon-mws

我已经为 FeedsAPI 和 ReportsAPI 下载了 PHP 库的新副本

我试图包含两个 api 的 client.php，因为我想调用 feed api 进行某些操作，并调用报告 api 来获取请求报告。

但是当我执行我的代码时，它说

```
PHP Fatal error:  Cannot redeclare class MarketplaceWebService_Model in /mnt/hgfs/keyur On My Mac/webs/keyur.iec.com/htdocs/vendors/AmazonAPI/ReportsAPIClass/src/MarketplaceWebService/Model.php 
```

所以我查看了这两个 api 中的所有文件和文件夹，发现文件数量相同，它们是相同的，因为我使用 Netbeans 对每个文件进行了差异，根本没有区别。

如果是这种情况，为什么会有两个具有相同文件的 API？

我正在使用 Reports API 部分客户端库 - PHP - 版本 2009-01-01 关于此库

基于 2009-01-01 API 版本。仅参考 amazon-mws-v20090901-php-2011-08-01.zip 文件。

和

Feeds API 部分客户端库 - PHP - 版本 2009-01-01 关于此库

基于 2009-01-01 API 版本。仅参考 amazon-mws-v20090901-php-2011-08-01.zip 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:25:06.440

这与 c# 版本相同。看起来它们只是放入 1 个文件中的相同代码。不知道为什么他们真的不能对所有部分都这样做。会更有意义并保持整洁。

我读过 API 基本上是亚马逊过去使用的 AMTU 的源代码，这可以解释为什么，并且在转换为不同的语言时，它们保持不变。

只有亚马逊知道他们为什么要这样做。

# facebook-graph-api - FbGraph 无效请求

> ID：10120368
> 
> 赞同：0
> 
> 时间：2012-04-12T08:55:00.543
> 
> 标签：facebook-graph-api

我阅读了 Facebook Graph API 上的文档，但对此感到困惑

[关于权限](http://developers.facebook.com/docs/authentication/permissions/)

[关于过期的访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)

我的代码如下

路线.rb

```
 match '/auth/:provider/callback' => 'services#create' 
```

services_controller.rb

```
 if service_route == 'facebook'
            omniauth['info']['email'] ? email =  omniauth['info']['email'] : email = ''
            omniauth['info']['name'] ? name =  omniauth['info']['name'] : name = ''
            omniauth['uid'] ?  uid =  omniauth['uid'] : uid = ''
            omniauth['provider'] ? provider =  omniauth['provider'] : provider = ''
            omniauth['credentials']['token'] ? session['fb_access_token'] =  omniauth['credentials']['token'] : session['fb_access_token'] = '' 
```

学生.rb

```
 def facebook
    @fb_user ||= FbGraph::User.me(self.services.find_by_provider('facebook').token)
 end 
```

文章控制器.rb

```
 def create

    @article = current_student.articles.new(params[:article])
    respond_to do |format|
        if @article.save
            format.html { redirect_to(@article, :notice => 'Το άρθρο δημιουργήθηκε επιτυχώς.') }
            format.xml  { render :xml => @article, :status => :created, :location => @article }

            current_student.facebook.feed!(
                :message => 'Hello, Facebook!',
                :name => 'My Rails 3 App with Omniauth, Devise and FB_graph') 
```

架构.rb

```
 create_table "services", :force => true do |t|
    t.integer  "student_id"
    t.string   "provider"
    t.string   "uid"
    t.string   "uname"
    t.string   "uemail"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "token 
```

最后是我在创建文章时遇到的问题

```
 FbGraph::InvalidRequest in ArticlesController#create

   OAuthException :: An active access token must be used to query information about the current user. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:12:32.367

最后代码是正确的。只缺在

服务.rb

```
 attr_accessible :provider, :uid, :uname, :uemail, :token 
```

一切都好

# jquery - 在页面加载时调用 jquery

> ID：10120370
> 
> 赞同：2
> 
> 时间：2012-04-12T08:55:06.013
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我想调用超链接的 jquery onclick。但现在每次页面加载时都会出现对话框。我使用这个例子中的 jquery [例子](http://jqueryui.com/demos/dialog/#modal-confirmation)。

```
$(function() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            width:500,
            height:140,
            modal: true,
            buttons: {
                "Confirm": function() {
                    $( this ).dialog( "close" );
                    autoGeneration();
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    }); 
```

和 HTML：

```
<div id="dialog-confirm" title="Overwrite?">    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>Will be overwrite. continue?</p> </div>

<a href="#" id="dialog-confirm" class="bigButton">AUTO GENERATION</a> 
```

我想在点击下面的链接时调用，并避免每次加载页面时调用对话框。

谢谢大家的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:57:43.110

将对话框的 autoOpten 选项设置为 false：

```
$(function() {
    $("#dialog-confirm").dialog({
        autoOpen: false
         //other options
    });
}); 
```

更改链接的 id，使其与对话框 div 的 id 不同：

```
<a href="#" id="openDialog" class="bigButton">AUTO GENERATION</a> 
```

然后只需调用`open`对话框：

```
$("#openDialog").click(function(e){
    e.preventDefault();
    $("#dialog-confirm").dialog("open");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:58:20.647

```
$(function() {
        $( "#dialog-box" ).dialog({
            autoOpen: false,
            resizable: false,
            width:500,
            height:140,
            modal: true,
            buttons: {
                "Confirm": function() {
                    $( this ).dialog( "close" );
                    autoGeneration();
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });

    $( "#dialog-confirm" ).click(function() {
        $( "#dialog-box" ).dialog( "open" );
        return false;
    });

    }); 
```

“链接”和“对话框”需要不同的 ID，因此将对话框确认更改为对话框

```
<div id="dialog-box" title="Overwrite?">    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>Will be overwrite. continue?</p> </div>

<a href="#" id="dialog-confirm" class="bigButton">AUTO GENERATION</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:58:43.330

首先`autoOpen`将对话框的属性设置为`false`在页面加载时停止打开。

```
$(function() {
    $( "#dialog-confirm" ).dialog({
        autoOpen: false,
        resizable: false,
        width:500,
        height:140,
        modal: true,
        buttons: {
            "Confirm": function() {
                $( this ).dialog( "close" );
                autoGeneration();
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });
}); 
```

然后在链接的点击处理程序中打开它：

```
$("#dialog-confirm").click(function(e) {
    e.preventDefault;
    $("#dialog-confirm").dialog('open');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:59:16.927

你应该做

```
 var dialog = $( "#dialog-confirm" ).dialog({
        autoOpen: false,
        resizable: false,
        width:500,
        height:140,
        modal: true,
        buttons: {
            "Confirm": function() {
                $( this ).dialog( "close" );
                autoGeneration();
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });
  }); 
```

和

```
$('a.bigButton').click(function(e){
    e.preventDefault();
    dialog.dialog("open");
}); 
```

# iphone - ivars 的另一个内存管理查询

> ID：10120374
> 
> 赞同：0
> 
> 时间：2012-04-12T08:55:08.960
> 
> 标签：iphone, ios, memory-management, memory-leaks

毫无疑问，有大量的信息：iOS 中的内存管理。在阅读了大量有关它的内容后，我仍然不清楚某些情况下的“最佳”实践。请我在下面的两个例子中寻求澄清......

我有一个 NSMutableArray 它充当 tableView 的数据源和一个名为 editButton 的 UIBarButtonItem 都声明如下：

```
@interface MyTableViewController : UITableViewController {

   NSMutableArray *datasourceArray;
   UIBarButtonItem *editButton;

}

@property (nonatomic, retain) NSMutableArray *datasourceArray;
@property (nonatomic, retain) UIBarButtonItem *editButton;

@end 
```

然后我合成了它们并按如下方式分配/初始化它们：

```
@implementation

@syntesize datasourceArray, editButton;

-(void)viewDidLoad {

self.datasourceArray = [self retrieveDatasourceArray];

self.editButton = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(editTable)];
[self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:editButton, nil] animated:NO];
[editButton release];

}

-(void)retrieveDatasourceArray {

NSMutableArray *datasource = [[[NSMutableArray alloc] initWithObjects @"example1", @"example2", nil] autorelease];

return datasource;

}

-(void)dealloc {

[datasourceArray release];
[editButton release];
[super dealloc];

} 
```

**问题 1：NSMutableArray**

如您所见，我已将数组的实际创建分离为不同的方法，因为有大量代码从核心数据中检索并进行排序（此问题不需要），我想将其分离出来。因此，我选择返回一个自动释放的 NSMutableArray，并将其设置为在头文件中定义的 self.datasourceArray。这是一种明智且无泄漏的实现方式吗？

**问题 2：编辑按钮**

由于我稍后需要更改 editButton 的标题和样式，因此我需要访问它，从而声明它。然后我在 viewDidLoad 方法中分配/初始化它，并将它添加到一个数组（这里没有显示其他一些按钮），然后再使用这个数组将按钮添加到导航栏。然后我释放了editButton，因为我已经分配了它并将它交给了一个数组。考虑到我的 dealloc 方法，这是必要的还是必要的，甚至是在正确的地方？

提前谢谢了

**编辑：进一步的问题3：**

在我的代码中的其他地方访问这些 ivars 时（比如调用 [datasourceArray count] 或将“编辑”按钮的标题重置为“完成”时，我是否应该使用 self.notation？

**编辑：进一步的问题4：**

在其他地方，我使用以下代码来初始化合成的 NSMutableArray。鉴于以下答案，这是否更泄漏......？

```
[self setDatasourceArray: [[NSMutableArray arrayWithArray: [self retrieveDatasourceArray]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:03:37.317

**数组的第一个点**

```
NSMutableArray *datasource = [[[NSMutableArray alloc] initWithObjects @"example1", @"example2", nil] autorelease];

return datasource; 
```

在这里你做对了**..**返回一个**自动释放**的对象..它将被变量保留，因为你将它定义为保留类型（当你这样做时`@property`）。

**编辑按钮的第二个点**

```
self.editButton = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(editTable)];

[self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:editButton, nil] animated:NO];

[editButton release]; 
```

在这里，您显然**过度释放**了对象..记住变量保留了您定义的新变量..所以编辑按钮保留了新的栏按钮项..所以释放它。一次是必要的..你在dealloc中做的..但在这里发布也会导致过度发布..解决这个问题只需删除发布行并将您的代码更新为这样

```
self.editButton = [[[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(editTable)]autorelease];
[self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:editButton, nil] animated:NO]; 
```

在这里，您会看到将要创建的新实例将被自动释放..并且它的值将由您的变量保留

# c++ - 编译 OpenCV 项目时如何禁用 TBB

> ID：10120376
> 
> 赞同：2
> 
> 时间：2012-04-12T08:55:20.643
> 
> 标签：c++, c, visual-studio, opencv, tbb

我在 VisualStudio 9 上使用 OpenCV 2.3.1，当我编译我的项目时，我有一个错误，我没有 tbb.dll。但我不需要它，因为它将来会成为一个 Android 项目。有人知道我编译时如何禁用 TBB 吗？我看过这篇文章，但似乎不太相关：s（http://stackoverflow.com/questions/7565089/how-to-disable-auto-link-for-tbb）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:01:20.443

首先，您可以使用 cmake-gui（适用于 windows）并使用以下选项禁用重新编译 opencv：`-D WITH_TBB (=OFF)`在 Windows 上，此选项可能称为`USE_TBB`. 其次，如果你只是想编译你的程序而不使用 TBB，你需要在 VS9 的编译规则中给出相同的选项。我现在不VS，所以我可以给你选项名称。

# embedded-fonts - Web 字体 mime 类型警告

> ID：10120378
> 
> 赞同：2
> 
> 时间：2012-04-12T08:55:23.233
> 
> 标签：embedded-fonts, webfonts, mime-message

我正在通过 webfonts.fonts.com 使用免费的网络字体服务，该服务由他们的服务器提供服务，并且在我的 Chrome/Safari 浏览器控制台中收到以下警告：**“资源解释为字体但使用 MIME 类型应用程序传输/八位字节流。”**

这是 JS 链接 fonts.com 指定放置在标题中：

```
<script type="text/javascript" src="http://fast.fonts.com/jsapi/f3d92ff3-2575-4cb8-a4b8-9b4c5d0376fb.js"></script> 
```

这是我正在使用的 CSS：

```
h1 { margin-bottom: 10px;font: 35px/35px 'Helvetica W01 Blk', Arial, Helvetica, sans-serif; font-weight: bold; color: #00AEEF; } 
```

我不知道警告是什么意思，我想知道，因为它只是一个警告而不是错误，是否那么关键。我已经在各种浏览器、Mac 和 PC 上测试了该网站，从表面上看，一切正常，看起来应该是这样。

任何人都可以阐明我是否做错了什么，或者即使这是否是一个问题？很高兴在必要时发布更多信息。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T13:28:03.027

忽略此警告是完全安全的。我们的服务使用“application/octet-stream”作为我们字体数据的通用 MIME 类型，因为对于各种 Web 字体格式似乎没有任何官方标准化/认可的 MIME 类型。不同实体确实对某些格式提出了一些建议，但是，使用这种通用 MIME 类型有助于我们最大限度地与支持的浏览器兼容。

如果您对服务正常运行有任何问题，请随时通过我们的支持表格发送票与我们联系：

[http://webfonts.fonts.com/en-US/ContactUs/TechnicalSupport](http://webfonts.fonts.com/en-US/ContactUs/TechnicalSupport)

# jsp - java中的电子邮件通知

> ID：10120381
> 
> 赞同：-1
> 
> 时间：2012-04-12T08:55:32.557
> 
> 标签：jsp, servlets

我正在开发升级跟踪系统。在我的应用程序中，如果某些升级的截止日期临近，我必须发送电子邮件通知（根据某些标准自动发送）。这是一个基于 Web 的应用程序。我正在使用 servlet jsp。谁能告诉我如何实现电子邮件通知的东西。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:19:01.320

您可以使用 Java Mail api 来实现这一点。按照您的代码中的这些步骤发送电子邮件。

1.  设置 SMTP 主机属性

    ```
     Properties props = System.getProperties();
      props.put("mail.smtp.host", yoursmtpServer); 
    ```

2.  获取会话

    ```
     Session session = Session.getDefaultInstance(props, null); 
    ```

3.  创建消息并设置发件人和收件人

    ```
     Message msg = new MimeMessage(session);
      msg.setFrom(new InternetAddress(from));
      msg.setRecipients(Message.RecipientType.TO,InternetAddress.parse(to, false)); 
    ```

4.  设置主题和其他详细信息，然后发送

    ```
     msg.setSubject(subject);
      msg.setText(body);
     // -- Set some other header information --
      msg.setHeader("X-Mailer", "ABCMail");
      msg.setSentDate(new Date());
     // -- Send the message --
      Transport.send(msg); 
    ```

我想它会对你有所帮助。

编辑：您可以使用 Servlet 过滤器或任何计时器来检查逻辑。

定时器逻辑。

*   使用 ScheduledThreadPoolExecutor 来实现你的计时器。
*   通过实现 Runnable 创建您的任务。
*   把你的逻辑放在你的 run()
*   timer.schedule(task, 1, TimeUnit.DAYS);

# c++ - DataGridView 类 - 错误（）

> ID：10120383
> 
> 赞同：1
> 
> 时间：2012-04-12T08:55:37.273
> 
> 标签：c++, datagridview, c++-cli

我为 processdialogkey() 创建了一个 Datagridview 类。但是我遇到了以下错误......任何人都可以帮助我......

这段代码：

```
//Header File MyDGV.h

    public ref class MyDGV : public DataGridView
    {
    protected:
        virtual bool ProcessDialogKey(System::Windows::Forms::Keys^ keyData) override;
    };

//MyDGV.CPP File
#include "StdAfx.h"
#include "MyDGV.h"

bool MyDGV::ProcessDialogKey(System::Windows::Forms::Keys^ keyData)
{
    Keys^ key = keyData & (System::Windows::Forms::Keys::KeyCode);
    if (key == System::Windows::Forms::Keys::Enter)
    {
        DataGridView::OnKeyDown(gcnew KeyEventArgs(System::Windows::Forms::Keys^ keyData));
        return true;
    }
    else
    {
        return DataGridView::ProcessDialogKey(System::Windows::Forms::Keys^ keyData);
    }
} 
```

导致以下错误：

```
Errors:
01\. warning C4490: 'override' : incorrect use of override specifier; 'MyDGV::ProcessDialogKey' does not match a base ref class method
02.error C3063: operator '&': all operands must have the same enumeration type
03.error C2275: 'System::Windows::Forms::Keys' : illegal use of this type as an expression
04.error C2275: 'System::Windows::Forms::Keys' : illegal use of this type as an expression 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:03:57.060

System::Windows::Forms::Keys 是一个枚举，因此是一个值类型（不是引用类型）。因此，要匹配要删除帽子 (^) 的基类方法的签名。一般来说，您不应该将帽子与值类型一起使用，除非您确实需要拳击行为。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)

# testing - 软件测试中的事件是什么意思？

> ID：10120385
> 
> 赞同：2
> 
> 时间：2012-04-12T08:55:39.803
> 
> 标签：testing, automation, manual-testing

软件测试中的“事件”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:34:31.547

在执行/运行测试时，您有时会发现实际结果与预期结果不同。

当实际结果与预期结果不同时，它被称为事件，但事件与错误不同，因为它是由于配置错误、数据损坏而产生的

事件是在测试期间发生的任何需要检查或审查的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:08:00.767

这听起来像是一个故意含糊不清的术语，意思是“发生了一些事情，有人需要看看”。

关键可能是，当测试（手动或自动）失败时，可能有多种原因：

*   需求已更改，测试现已过时
*   测试环境有问题
*   测试人员犯了错误或误解了测试脚本
*   配置错误
*   代码中的实际错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-23T09:23:53.750

软件测试中的事件基本上是系统表现出可疑行为的任何情况，但我们通常仅在根本原因是我们正在测试的项目中的某个问题时才将事件称为缺陷。

事件的其他原因包括测试环境的错误配置或故障、损坏的测试数据、错误的测试、无效的预期结果和测试人员错误。

这意味着表明似是而非的行为不一定是真正的缺陷的可能性。

当最初识别出事故时，应生成事故报告，其中包含一组支持信息，如：

*   事件的识别，包括唯一编号、标题、触发事件、建议的修复（如果可能）和文档（例如，屏幕转储）。
*   环境标识，包括硬件、软件、供应商、发现事件的项目和修复描述（如果有）。
*   涉及的人员的识别，包括发起人和调查员。
*   相关时间信息，例如，系统时间、CPU 时间和适当的挂起时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:58:57.570

它通常意味着“我们发现了某种缺陷或异常行为”。我不确定术语是否通用。

混乱在哪里？你被赋予了什么定义？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T12:33:59.227

测试中的“事件”是指软件的意外行为。

这也是一种错误，但它可能会或可能会被复制。

由于硬件故障，软件应用程序的外部因素，将引发此事件错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-16T13:32:05.800

测试是检查三方之间的关系

*   功能规范（缩写为 SPEC）：系统用户希望系统表现什么
*   软件（缩写为 SOFT）：系统的真实行为
*   测试用例（缩写为 TEST）：测试设计者认为系统应该表现什么。

“事件”是 SOFT 和 TEST 之间存在差异的情况的名称。如果您使用工具报告测试用例成功，那么您经常会看到事件标记为红色，非事件标记为绿色。

根据这 3 方之间的关系，可能会出现不同的事件发生情况：

1.  SOFT == SPEC 和 TEST == SPEC：这意味着 TEST == SOFT，没有发生任何事件。
2.  SOFT != SPEC 和 TEST == SPEC：这意味着 TEST != SOFT，并且发生了“事件”
3.  SOFT == SPEC 和 TEST != SPEC：这意味着 TEST != SOFT，并且发生了“事件”
4.  SOFT != SPEC and TEST != SPEC and SOFT == TEST：这意味着没有任何事件发生
5.  SOFT != SPEC and TEST != SPEC and SOFT != TEST：这意味着这是一个“事件”

看看这5种情况，我们看到

*   当“事件”发生时，可能是软件错误，测试用例错误，或两者兼而有之
*   当没有“事件”时，仍然可以是测试用例和软件都是错误的，或者它们都是“好的”（它们遵循规范）。

所以**绿色**不保证你的软件好，**红色事件**不保证你的软件不好（这里我用“好”和“坏”表示SOFT是否遵循SPEC）

# javascript - 如何获取推文的年龄？

> ID：10120386
> 
> 赞同：2
> 
> 时间：2012-04-12T08:55:45.030
> 
> 标签：javascript, twitter

我正在使用 Search API 导入一些推文并获取返回的 JSON：

```
"results": [
    {
        "created_at": "Thu, 12 Apr 2012 04:58:01 +0000",
        "from_user": "AdamHills",
        "from_user_id": 23045431,
        "from_user_id_str": "23045431",
        "from_user_name": "Adam Hills",
        "geo": null,
        "id": 190302731255287800,
        "id_str": "190302731255287808",
        "iso_language_code": "sv",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http://a0.twimg.com/profile_images/1350305654/goteborgs-rape_normal.jpg",
        "profile_image_url_https": "https://si0.twimg.com/profile_images/1350305654/goteborgs-rape_normal.jpg",
        "source": "&lt;a href=&quot;http://twitter.com/#!/download/iphone&quot; rel=&quot;nofollow&quot;&gt;Twitter for iPhone&lt;/a&gt;",
        "text": "@Adde77 Den ska finnas tillgänglig i slutet av april.",
        "to_user": "Adde77",
        "to_user_id": 99782511,
        "to_user_id_str": "99782511",
        "to_user_name": "Adde P",
        "in_reply_to_status_id": 190222715716763650,
        "in_reply_to_status_id_str": "190222715716763648"
    } 
```

我怎样才能得到那个特定推文的年龄，所以我可以`4m ago`在我的页面上打印出类似的东西？那，`created_at`字符串看起来一团糟！有没有简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:58:54.467

日期格式是标准的。

只需从中构造一个 Date 对象，然后根据需要对其进行操作。

```
var tweet_date = new Date("Thu, 12 Apr 2012 04:58:01 +0000"); 
```

# string - 标记化问题

> ID：10120402
> 
> 赞同：5
> 
> 时间：2012-04-12T08:56:40.817
> 
> 标签：string, groovy

我有

```
def testStr = 'a:*b*c*d' 
```

我想得到

```
tokens[0]=='a'
tokens[1]=='b*c*d' 
```

我试试

```
def tokens = testStr.tokenize(':*') 
```

但得到

```
tokens[0]=='a' 
tokens[1]=='b'
tokens[2]=='c'
tokens[3]=='d' 
```

我怎么能做这件事

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T09:00:13.290

`tokenize`需要一个可能的标记列表，所以它在两个`:`和`*`

您可能希望[`split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)使用正则表达式拆分（并返回 a `String[]`）：

```
def testStr = 'a:*b*c*d'

def tokens = testStr.split( /:\*/ )
assert tokens[ 0 ] == 'a'
assert tokens[ 1 ] == 'b*c*d' 
```

# webkit - 风格webkit 的角我想做的是使用“border-radius”来圆角 <select>的角。奇怪的是，webkit 浏览器显示白色背景溢出</select> 的边框。更新这里是截图和我的代码： HTML: <select class="rounded_select"><option>rounded_select</option></select> CSS: .rounded_select { border-t

> ID：10120403
> 
> 赞同：1
> 
> 时间：2012-04-12T08:56:41.403
> 
> 标签：webkit, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:07:02.467

`-webkit-appearance:none`可能会成功。

**编辑**：是的，似乎这样做：http: [//jsfiddle.net/dbxjB/](http://jsfiddle.net/dbxjB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:10:50.720

设置似乎可以解决问题`background-color`。`select`

编辑：没有。将边框设置为 1px 就可以了。例如，还有 2px 虚线。小故障。

# javascript - 使用 Ajax 实现 SearchBox

> ID：10120404
> 
> 赞同：1
> 
> 时间：2012-04-12T08:56:51.237
> 
> 标签：javascript, asp.net, ajax, ado.net, search-box

我是 ASP.NET 的新手，我正在使用 AJAX 在我的应用程序中创建一个搜索框。

例如：如果用户在文本框中输入“abc”，那么文本框将从以“abc”开头的数据库中获取数据。

但是，我看不到数据，

这是我的代码片段：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="SearchBox.aspx.cs" Inherits="SearchBox" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
<script type="text/javascript">
    function getdata()
     {

         var connection = new ActiveXObject("System.Data.SqlClient");

         var connectionstring = "Data Source=ilsql;Initial Catalog=krunal_DB;User ID=krunaldbuser;Password=krunal@2012;Provider=System.Data.SqlClient";

        connection.Open(connectionstring);
        var rs = new ActiveXObject("ADODB.Recordset");

        rs.Open("SELECT DISTINCT Scrip FROM dbo.SearchBoxData where Scrip Like '{0}%'", TextBox1.Text, connection);
        rs.MoveFirst
        while (!rs.eof) {

            document.write(rs.fields(1));
            rs.movenext;
        }

        rs.close;
        connection.close;

            var xmlhttp;
            if (str.length == 0) {
                document.getElementById("txtHint").innerHTML = "";
                return;
            }
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET", "gethint.asp?q=" + str, true);
            xmlhttp.send();

    }
</script>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TextBox1" runat="server" onkeyup="getdata()"></asp:TextBox>

    </div>
    </form>
</body>
</html> 
```

***任何帮助都将得到认可。***

**提前致谢 ！！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:01:26.130

为什么不试试 AjaxControlToolkit 的 AutoCompleteExtender。在这里找到：[演示](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

```
<ajaxToolkit:AutoCompleteExtender 
runat="server" 
ID="autoComplete1" 
TargetControlID="myTextBox"
ServiceMethod="GetCompletionList"
ServicePath="AutoComplete.asmx"
MinimumPrefixLength="2" 
CompletionInterval="1000"
EnableCaching="true"
CompletionSetCount="20" 
CompletionListCssClass="autocomplete_completionListElement" 
CompletionListItemCssClass="autocomplete_listItem" 
CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
DelimiterCharacters=";, :"
ShowOnlyCurrentWordInCompletionListItem="true">
    <Animations>
        <OnShow> ... </OnShow>
        <OnHide> ... </OnHide>
    </Animations> 
```

# windows - 如何通过 bat 或 cmd 检查程序是否以当前用户身份运行

> ID：10120410
> 
> 赞同：0
> 
> 时间：2012-04-12T08:57:15.480
> 
> 标签：windows, batch-file, cmd

我将如何查找某个版本的 Outlook 是否作为特定用户运行？

我需要检查，然后如果它没有在该登录帐户下打开它。

我已经尝试了来自网站周围的一些建议，但没有人关心登录用户

我尝试过的一些例子

```
-------------------------------
tasklist /FI "IMAGENAME eq outlook.exe" 2>NUL | find /I /N "outlook.exe">NUL
if "%ERRORLEVEL%"=="0" echo Programm is running
----------------------
tasklist /FI "IMAGENAME eq notepad.exe" /FO CSV > search.log

FOR /F %%A IN (search.log) DO IF %%~zA EQU 0 GOTO end

start notepad.exe

:end

del search.log
------------------------------------- 
```

我无法在服务器上安装任何东西，因此需要现有的 Windows 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:19:46.093

你不能像这样在你的任务列表查询中添加另一个子句吗？

```
tasklist /FI "IMAGENAME eq outlook.exe" /FI "USERNAME eq %username%" 
```

编辑

应该工作的完整脚本。

```
tasklist /FI "IMAGENAME eq outlook.exe" /FI "USERNAME eq %username%" 2>NUL | find /I /N "outlook.exe">NUL
if "%ERRORLEVEL%" == "1" start outlook.exe 
```

# jpa - JPA：Eclipselink 不尊重 em.remove()

> ID：10120411
> 
> 赞同：5
> 
> 时间：2012-04-12T08:57:17.620
> 
> 标签：jpa, glassfish, ejb, eclipselink

我需要删除一个实体并创建另一个：

```
@Stateless
public class StatelessBean {
  @PersistenceUnit(unitName = "Unit001")
  EntityManagerFactory emf;

  protected void test() {
    EntityManager em = emf.createEntityManager();
    MyObj obj1 = em.find(MyObj.class, 100);
    MyObj obj2 = new MyObj();
    obj2.setKey("the same unique key as in obj1");
    em.remove(obj1);
    // em.flush(); 
    em.persist(obj2); // works fine when flush() is uncommented
    em.close();
  }
} 
```

如果我留下`em.flush()`评论，那么我得到`com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException`（新旧对象具有相同的键值）

这种异常行为的原因可能是什么？

服务器：Glassfish 3.1.2

Eclipse 持久性服务 - 2.3.2.v20111125-r10461

持久性.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
  <persistence-unit name="Unit001">
    <jta-data-source>jdbc/Unit001DS</jta-data-source>
    <properties>
      <property name="eclipselink.logging.level" value="INFO"/>
      <property name="eclipselink.target-database" value="MySQL"/>
    </properties>
  </persistence-unit>
</persistence> 
```

连接池：

```
${ASADMIN} --port ${DOMAIN_ADMIN_PORT}  create-jdbc-connection-pool --datasourceclassname com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource --restype javax.sql.ConnectionPoolDataSource --property "User=user:Password=pass:URL=jdbc\:mysql\://${DB_ADDRESS}/db" Unit001DS
${ASADMIN} --port ${DOMAIN_ADMIN_PORT}  create-jdbc-resource --connectionpoolid Unit001DS jdbc/Unit001DS 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T09:17:17.590

原因可能是 Eclipselink 在提交期间更改了操作顺序，如[Eclipselink 文档](http://wiki.eclipse.org/Using_Advanced_Unit_of_Work_API_%28ELUG%29#Controlling_the_Order_of_Delete_Operations)中所述：

> 默认情况下，EclipseLink 在删除操作之前首先执行插入和更新操作，以确保保持引用完整性。这是首选方法。

您可以通过刷新（正如您已经发现的那样）或通过为 Eclipselink 设置特殊参数来更改此行为：

> 如果您被迫通过删除对象并插入替换来替换具有唯一约束的对象，如果插入操作发生在删除操作之前，则可能会导致约束冲突。在这种情况下，调用`setShouldPerformDeletesFirst`在插入操作之前执行删除操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:33:01.730

EclipseLink 维护和优化提交顺序以：

1 - 维护参照完整性约束：如果您插入两个相关对象（或许多对象的一个​​大互连图），则必须以非常具体且不明显的顺序插入/更新/删除它们以维护参照完整性约束。在某些情况下，甚至可能需要插入一个 shell 对象并在解决循环依赖之后更新其外键。删除必须最后发生，因为用于引用已删除对象的对象必须首先更新关系。

2 - 组操作和表访问：这避免了数据库死锁，并允许优化使用批量写入。

3 - 一致地按 id 排序更新/删除：这是可配置的，并避免潜在的数据库死锁。

如果 EclipseLink 只是盲目地按照应用程序执行操作的顺序编写操作，那么您将不得不自己管理所有这些。我真的怀疑你真的想这样做。对于您真正需要的情况，您可以使用flush()。

# iphone - 如何保存和加载绘图线 iphone SDK

> ID：10120412
> 
> 赞同：5
> 
> 时间：2012-04-12T08:57:21.797
> 
> 标签：iphone, ios

我想永久保存绘图线并加载从项目资源中保存的绘图线...！

现在我在触摸移动事件中获得 x 和 y 位置。我想将 x 和 y 位置保存在项目的本地资源中，但我不知道 ios 的经验......！

并从项目本地资源保存文件中加载保存的 x 和 y 位置..！

我想像这样在下面保存绘图线：

![在此处输入图像描述](../Images/905865cf4cd4990c62eb9b43b73ca302.png)

请任何人帮助我非常感谢......！

谢谢...！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:25:56.373

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    if(!mouseSwiped) {
        CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
        UIGraphicsBeginImageContext(ivBack.frame.size);
        [drawImage.image drawInRect:CGRectMake(0,0, self.ivBack.frame.size.width,self.ivBack.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), line);
        CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [pickColor CGColor]);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());

 NSData *dataImage=UIImagePNGRepresentation(UIGraphicsGetImageFromCurrentImageContext());
        [dataImage writeToFile:[self SavedImage:(@"1.png")] atomically:YES];
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }
} 
```

这将肯定地解决你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:04:37.477

如果要存储 x 和 y 位置，可以存储一个数组，然后使用`writeToFile`. 这将以 plist 格式将数据写入磁盘。

```
NSMutableArray *points = ...
[points writeToFile:someFileInTheBundle atomically:YES]; 
```

您还可以将绘图存储为图像并将其写入磁盘。我写的这个类别应该通过为您的绘图代码提供图像来帮助解决这个问题：[https ://github.com/kgn/BBlock/blob/master/UIImage%2BBBlock.m](https://github.com/kgn/BBlock/blob/master/UIImage%2BBBlock.m)

# jasper-reports - 它是新页面的第一行吗？

> ID：10120415
> 
> 赞同：0
> 
> 时间：2012-04-12T08:57:34.163
> 
> 标签：jasper-reports, ireport

如何在 iReport 中执行 PrintWhenExpression，仅显示相应的 TextField：

1) 第一条记录

2）新页面的第一条记录

我对内置变量有点困惑

BR

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:41:43.837

我想你想要这个：

```
$V{PAGE_COUNT}.intValue() == 1 
```

# tomcat7 - 如何显示 Apache Tomcat 7.0 控制台窗口？

> ID：10120416
> 
> 赞同：2
> 
> 时间：2012-04-12T08:57:36.667
> 
> 标签：tomcat7

我在哪里可以找到或如何显示 Tomcat 7.0 的控制台窗口？

我已经成功安装并测试了它。但是，我想查看它的控制台以获取输出信息、错误等。

我在某个论坛上发现我需要运行 startup.bat（用于 Tomcat 4.0），但我使用的是 Tomcat 7，但在其目录中没有看到任何 startup.bat，还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:47:52.840

尾 -f $CATALINA_BASE/logs/catalina.out

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T22:14:46.633

我在 Windows Server 2008 上安装了 Tomcat 7。请务必在 [tomcat-install-dir]/bin 目录中查找 start.bat 文件。

start.bat 将打开一个控制台窗口并显示最新的服务器日志（也称为“tail”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T19:13:15.850

在 apache tomcat 版本 7 上，有一个名为 bin 的文件夹，打开它然后打开 tomcat7 应用程序。它将显示控制台窗口。

# java - 如何在 Java 应用程序中禁用由另一个应用程序打开的文件的文件锁定

> ID：10120417
> 
> 赞同：2
> 
> 时间：2012-04-12T08:57:36.817
> 
> 标签：java, file, inputstream

我正在编写一个 java 应用程序，它使用 FileInputStream 每秒读取一个文件（它在一个单独的线程中的无限循环内，然后休眠 1 秒）

该文件在另一个应用程序中打开。

当我尝试将文件保存在另一个应用程序中时，我收到一条错误消息，指出该文件正在被另一个程序使用。

我阅读了 FileLock API，并在写入和读取时实现了锁定和释放：

```
FileOutputStream fos = new FileOutputStream(file);
FileLock fileLock = fos.getChannel().lock();
if (fileLock != null) {
    fos.write(fileContent);
    fileLock.release();
}
fos.close(); 
```

如何禁用 2 个应用程序正在访问的文件的文件锁定？

谢谢！！

编辑：我在 WINDOWS 7 上调试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:59:32.563

这取决于您的操作系统。我认为 Windows 是唯一支持锁的操作系统。尝试下载[解锁](http://download.cnet.com/Unlocker/3000-2248_4-10493998.html)器。我认为没有纯 Java 方法可以实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:56:32.427

确保您始终使用正确的 try-finally 惯用语释放您获得的锁。这是我在生产中的代码，我们在 Windows 7 上没有问题：

```
OutputStream os = openFile();
try {
  if (os.getChannel().tryLock() == null) return;
  ... write to the file ...
}
finally { os.close(); } // this automatically releases the lock 
```

# wcf - 数据契约还是客户端模型？

> ID：10120422
> 
> 赞同：1
> 
> 时间：2012-04-12T08:57:57.303
> 
> 标签：wcf, silverlight, bdd, datacontract

我目前正在编写一个中/大型 silverlight 应用程序。

我目前的架构如下。

在服务器端，我有使用实体框架 ORM 从现有数据库创建的实体对象。

我有 WCF 服务，其方法将代表我的实体对象的 Datacontracts 传递回客户端 silverlight 应用程序。

我的问题是在收到 silverlight 端的 Datacontract 后，我​​应该 1）将此 DataContract 用作​​我在 MVVM 中的模型 2）将 datacontract 转换为客户端模型对象以在 MVVM 中使用。

选项 1：我不确定将客户端上的 Datacontracts 视为模型是否被认为通常是不好的做法，因为它们是 ultimatley WCF 消息类型。

选项 2：此选项使我完全与服务器分离，并允许我从行为驱动方法开发我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:42:03.633

您的评估是正确的，用于 WCF 的数据合同可以被认为是数据传输对象，它是一种将数据传输到服务和从服务传输数据的方式。

另一方面，您的模型可能包含行为、业务规则和验证。所以我会选择选项2。

这也将允许您更轻松地管理服务和客户端应用程序中的更改，因为服务不会与服务的特定使用者耦合。

# java - Bloomberg Open API 真的免费并且能够获取实时市场数据吗？

> ID：10120423
> 
> 赞同：1
> 
> 时间：2012-04-12T08:57:57.960
> 
> 标签：java, bloomberg

> **可能重复：**
> [Bloomberg Open API](https://stackoverflow.com/questions/9097382/bloomberg-open-api)

根据彭博公开网站上的文件： [http ://www.openbloomberg.com/open-api/](http://www.openbloomberg.com/open-api/)

是否每个人都可以免费使用 Bloomberg Open API 且无需 Bloomberg Terminal 获取实时市场数据？

为什么我可以运行 Bloomberg 提供的示例代码“SimpleSubscriptionExample.java”？

这是一些代码：

```
String serverHost = "127.0.0.1";
int serverPort = 8194;
String serviceName = "//blp/mktdata";

SessionOptions sessionOptions = new SessionOptions();
sessionOptions.setServerHost(serverHost);
sessionOptions.setServerPort(serverPort); 
```

由于我不知道 serverHost，如何通过 Open API 访问 Bloomberg？

# ios - 静态 UITableViewCell 中的动态 UITableView

> ID：10120424
> 
> 赞同：0
> 
> 时间：2012-04-12T08:57:59.250
> 
> 标签：ios, uitableview, uistoryboard

以下设置会导致问题：

在我的故事板中，我有一个标准的表格视图控制器，其中包含一个以三个静态单元格作为内容的表格视图。其中一个单元格包含另一个表格视图，其中包含动态内容和原型单元格。表视图的委托和数据源都设置为同一个表视图控制器。在委托和数据源方法中，我确定哪个 tableview 调用了该方法并适当地处理响应。但是，如果动态表视图包含多个元素，我会得到一个`NSRangeException`with `[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]`。我无法追踪它，因为调用堆栈中没有任何我看起来熟悉的东西。我怀疑我的数据已经损坏，但是在用`NSLog`消息污染了一切之后，它似乎不是那样的，我仍然很迷茫。

这是我的代码：

```
@interface CartViewController : UITableViewController

@property (nonatomic, strong) IBOutlet UITableView* cartTableView;
@property (nonatomic, strong) IBOutlet UILabel* lblTotalPrice;
@property (nonatomic, strong) IBOutlet UITableViewCell* cellProductList;
@property (nonatomic, strong) IBOutlet UITableViewCell* cellTotalPrice;
@property (nonatomic, strong) IBOutlet UITableViewCell* cellProceedToCheckout;

@end

@implementation CartViewController

@synthesize cartTableView;
@synthesize lblTotalPrice;
@synthesize cellProductList;
@synthesize cellTotalPrice;
@synthesize cellProceedToCheckout;

// other methods ...

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    [[cartTableView layer] setCornerRadius:10];
    [cartTableView setTableFooterView:[[UIView alloc] initWithFrame:CGRectZero]];
    [cartTableView setClipsToBounds:YES];
}

- (void)viewWillAppear:(BOOL)animated
{
    [cartTableView reloadData];
    lblTotalPrice.text = [NSString stringWithFormat:@"%.2f €", [[DataStorage instance] shoppingCartTotalPrice]];
    [super viewWillAppear:animated];
}
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSString* tableName = @"unknown";
    if(tableView == cartTableView)
        tableName = @"dynamic";
    if(tableView == self.tableView)
        tableName = @"static";

    int sections = 0;

    if (tableView == self.tableView)
        sections = 3;
    if (tableView == cartTableView)
        sections = 1;

    NSLog(@"%@ sections %d", tableName, sections);
    return sections;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSString* tableName = @"unknown";
    if(tableView == cartTableView)
        tableName = @"dynamic";
    if(tableView == self.tableView)
        tableName = @"static";

    int rows = 0;

    if (tableView == self.tableView && section < 3)
        rows = 1;
    if (tableView == cartTableView && section == 0)
        rows = [[DataStorage instance] shoppingCartItemCount];

    NSLog(@"%@ rows %d", tableName, rows);
    return rows;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    float height = 44;
    if (tableView == self.tableView)
    {
        if(indexPath.section == 0)
            height = UIInterfaceOrientationIsLandscape(self.interfaceOrientation)
            ? kCellProductListHeightLandscape
            : kCellProductListHeightPortrait;
    }
    else
    {
        height = kCartItemCellHeight;
    }

    return height;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell = nil;

    NSString* tableName = @"unknown";
    if(tableView == cartTableView)
        tableName = @"dynamic";
    if(tableView == self.tableView)
        tableName = @"static";

    NSLog(@"%@ indexpath row %d section %d", tableName, indexPath.row, indexPath.section);

    if(tableView == cartTableView && indexPath.section == 0)
    {        
        ProductDefaultCell* cartItemCell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];
        if (cartItemCell == nil) {
            cartItemCell = [[ProductDefaultCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellIdentifier];
        }

        DataStorage* dataStorage = [DataStorage instance];

        ProductEntity* product = [dataStorage productFromCartAtIndex:indexPath.row];

        // set up cell data from product ...

        cell = cartItemCell;
    }
    else
    {
        switch (indexPath.section)
        {
            case 0:
                cell = cellProductList;
                break;
            case 1:
                cell = cellTotalPrice;
                break;
            case 2:
                cell = cellProceedToCheckout;
                break;
            default:
                break;
        }
    }

    NSLog(@"%@ %@", tableName, cell == nil ? @"error" : @"ok");

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString* tableName = @"unknown";
    if(tableView == cartTableView)
        tableName = @"dynamic";
    if(tableView == self.tableView)
        tableName = @"static";

    NSLog(@"%@ display row %d section %d", tableName, indexPath.row, indexPath.section);
} 
```

这是控制台输出：

```
2012-04-12 09:58:51.842 MyApp[363:fb03] dynamic sections 1
2012-04-12 09:58:51.856 MyApp[363:fb03] dynamic rows 2
2012-04-12 09:58:51.857 MyApp[363:fb03] dynamic sections 1
2012-04-12 09:58:51.857 MyApp[363:fb03] dynamic rows 2
2012-04-12 09:58:51.859 MyApp[363:fb03] static sections 3
2012-04-12 09:58:51.860 MyApp[363:fb03] static sections 3
2012-04-12 09:58:51.860 MyApp[363:fb03] static rows 1
2012-04-12 09:58:51.861 MyApp[363:fb03] static rows 1
2012-04-12 09:58:51.861 MyApp[363:fb03] static rows 1
2012-04-12 09:58:51.862 MyApp[363:fb03] static indexpath row 0 section 0
2012-04-12 09:58:51.862 MyApp[363:fb03] static ok
2012-04-12 09:58:51.863 MyApp[363:fb03] dynamic sections 1
2012-04-12 09:58:51.864 MyApp[363:fb03] dynamic rows 2
2012-04-12 09:58:51.864 MyApp[363:fb03] dynamic indexpath row 0 section 0
2012-04-12 09:58:51.978 MyApp[363:fb03] dynamic ok
2012-04-12 09:58:51.981 MyApp[363:fb03] dynamic display row 0 section 0
2012-04-12 09:58:51.991 MyApp[363:fb03] dynamic indexpath row 1 section 0
2012-04-12 09:58:52.053 MyApp[363:fb03] dynamic ok
objc[363]: EXCEPTIONS: throwing 0x6b6f670 (object 0x6b6fc20, a NSException)
objc[363]: EXCEPTIONS: searching through frame [ip=0x23d8678 sp=0xbfffc1a0] for exception 0x6b6f650
objc[363]: EXCEPTIONS: searching through frame [ip=0x23e2578 sp=0xbfffc1d0] for exception 0x6b6f650
objc[363]: EXCEPTIONS: searching through frame [ip=0x23e2673 sp=0xbfffd230] for exception 0x6b6f650
objc[363]: EXCEPTIONS: searching through frame [ip=0x23d8678 sp=0xbfffd4f0] for exception 0x6b6f650
objc[363]: EXCEPTIONS: searching through frame [ip=0x23e2578 sp=0xbfffd520] for exception 0x6b6f650
objc[363]: EXCEPTIONS: terminating
objc[363]: EXCEPTIONS: searching through frame [ip=0x1a0deed sp=0xbfffb6a0] for exception 0x6b6f650
objc[363]: EXCEPTIONS: catch(id)
objc[363]: EXCEPTIONS: unwinding through frame [ip=0x1a0deed sp=0xbfffb6a0] for exception 0x6b6f650
objc[363]: EXCEPTIONS: handling exception 0x6b6f650 at 0x1a0deff
2012-04-12 09:58:52.139 MyApp[363:fb03] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]'
*** First throw call stack:
(0x187c022 0x1a0dcd6 0x1868644 0x8a7f88 0x6b41eb 0x51c008 0x51c3ce 0x507cbd 0x5166f1 0x4bfd42 0x187de42 0x23d8679 0x23e2579 0x23e2674 0x4b9967 0x670033 0x51be26 0x51c3ce 0x507cbd 0x5166f1 0x4bfd21 0x187de42 0x23d8679 0x23e2579 0x23674f7 0x23693f6 0x23f6160 0x491f30 0x185099e 0x17e7640 0x17b34c6 0x17b2d84 0x17b2c9b 0x1c7a7d8 0x1c7a88a 0x481626 0x247d 0x23e5) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:49:35.333

我从来没有弄清楚是什么导致了这个问题，而是我将我的 TableViewCell（包含动态表的那个）子类化并让它实现必要的协议并将表视图委托和数据源分配给它，而不是视图控制器静态表视图。这工作得很好，无论如何可能是更好的设计。

这是一些示例代码：

```
@interface CellWithTableInside : UITableViewCell <UITableViewDelegate, UITableViewDataSource>

@property (nonatomic, strong) UITableView* tableViewInCell;
@property (nonatomic, strong) NSArray* cellData;

@end

@implementation CellWithTableInside

@synthesize tableViewInCell;
@synthesize cellData = _cellData;

- (void)setCellData:(NSArray *)cellData
{
    _cellData = cellData;
    [tableViewInCell reloadData];
}

- (void)setFrame:(CGRect)frame
{
    [super setFrame:frame];
    [tableViewInCell setFrame:self.bounds];
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        [self setupTableView];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self setupTableView];
    }
    return self;
}

- (void)setupTableView
{
    tableViewInCell = [[UITableView alloc] initWithFrame:self.bounds];
    [tableViewInCell setDataSource:self];
    [tableViewInCell setDelegate:self];
    [self addSubview:tableViewInCell];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.cellData.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"NestedCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.cellData objectAtIndex:indexPath.row];
    return cell;
}

@end 
```

你可以`CellWithTableInside`这样使用：

```
@interface HostingTableViewController : UITableViewController

@property (nonatomic, strong) NSArray* tableData;

@end

@implementation HostingTableViewController

@synthesize tableData;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES;
}

- (void)viewDidLoad
{
    tableData = [NSArray arrayWithObjects:
                 [NSArray arrayWithObjects:@"February", nil],
                 [NSArray arrayWithObjects:@"Apple", @"Banana", nil],
                 [NSArray arrayWithObjects:@"John", @"Peter", @"Edward", nil],
                 [NSArray arrayWithObjects:@"Yellow", @"Green", @"Red", @"Blue", nil],
                 nil];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tableData.count;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44 * [(NSArray*)[tableData objectAtIndex:indexPath.row] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellWithTableInside";
    CellWithTableInside *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CellWithTableInside alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    [cell setCellData:[tableData objectAtIndex:indexPath.row]];
    return cell;
}

@end 
```

这适用于动态或静态表视图。

# actionscript-3 - 视频缓冲是否会对慢速连接上的视频产生影响？

> ID：10120434
> 
> 赞同：0
> 
> 时间：2012-04-12T08:58:29.363
> 
> 标签：actionscript-3

这更像是一个健全性检查问题，我开始怀疑自己。

据我了解，通过 40Kb/s 连接的视频实际上没有时间加载和制作缓冲区，并且会出现“故障”，因此无论缓冲是否到位，都不会产生太大影响。

我收到有关故障视频的投诉。我无权访问为媒体提供服务的服务器，因此我在 swf 中放置了一个加载计时器，如下所示

```
averageLoadSpeed = (bytesLoaded / loadTimer.currentCount) / 1024; 
```

在 5 次测试中，有 2 次低于 50Kb/s。而且我被告知服务器也不面向媒体，而是将优先级放在其他业务任务上。这家公司的 IT 负责人一直在跟我讨论缓冲问题，以及如何解决问题。我试图解释速度太低了

（32Mb = 32768Kb / 24Kb/s = 1,365 秒 * 60 = 22 分钟）

除了维基百科关于 IO 流的解释之外，任何人都可以告诉我关于缓冲的问题。我不知道如何简单地说，我认为缓冲只是一个用户体验的补充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:13:16.393

我不知道 Flash 或 Acrionscript，但从一般的角度来看。

缓冲通常用于吸收随机减速或网络拥塞，如果正在服务的媒体的最大速度低于视频的比特率，缓冲将允许它播放一点，停止并缓冲，再播放一点。

视频编码的比特率是多少？

对于 128Kbs 比特率的 CBR 视频（无音频）的 1MB 缓冲区将需要大约 2 分钟来缓冲 @ 56Kbs 的 1 分钟视频。在播放 1 分钟的视频时，您将下载另外 30 秒的视频，然后再下载 15、7、3、1 秒。

Another example however, 1MB buffer for a CBR video (no audio) at a bit rate of 1Mbs will take approx 2mins to buffer @ 56Kbs for 7 seconds of video, in which time you might not have downloaded another seconds worth of video.

# python - 分组生成器的 Pythonic 模式

> ID：10120449
> 
> 赞同：0
> 
> 时间：2012-04-12T08:59:21.987
> 
> 标签：python, generator

我正在寻找一种编写生成器的好方法，该生成器从另一个列表/生成器/迭代中获取项目流并将它们分组。

拆分项目很容易。例如，如果我们想要获取文件的行并将它们拆分为字符：

```
def lines2chars(filename):

    with open(filename) as fh:

        for line in fh:                 # Iterate over items
            for char in line:           # Split items up
                yield char              # Yield smaller items 
```

例如，将它们分组以生成段落似乎很棘手。这就是我想出的：

```
def lines2para(filename):

    with fh as open(filename):
        paragraph = []                  # Start with an empty group

        while True:                     # Infinite loop to be ended by exception
            try:
                line = next(fh)         # Get a line
            except StopIteration as e:
                                        # If there isn't one...
                                        # do whatever necessary
                raise                   # and raise StopIteration for the caller
            else:
                paragraph.append(line)  # Add to the group of items
                if line == "\n":        # If we've got a whole group
                    yield paragraph     # yield it
                    paragraph = []      # and start a new group 
```

在我看来这并不漂亮。它使用了迭代协议的内部结构，有一个被打破的无限循环，对我来说读起来不太好。那么有没有人有更好的方法来编写这种类型的代码？

请记住，我正在寻找模式，而不是这个特定的例子。在我的情况下，我正在读取跨数据包拆分的数据包，但每个级别都类似于段落示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:03:36.770

```
import itertools as it

def lines2para(filename):
    with open(filename) as fh:
        for k, v in it.groupby(fh, key=lambda x: bool(x.strip())):
            if k:
                yield list(v) 
```

# java - 键入文本并检查故障

> ID：10120457
> 
> 赞同：0
> 
> 时间：2012-04-12T08:59:51.160
> 
> 标签：java, typing

我正在制作一个打字程序，现在我已经为我的应用程序制作了一个主页，其中包含一个 Jlist，其中包含来自数据库的练习负载。这些练习包含文本，因此通过示例

在我的 Jlist 中有练习 1，其中包含以下文字：鲁道夫出去散步。

现在，如果您选择练习 1 并选择一个确定按钮，他将移动到下一页，其中包含一个 JtextField，其中包含文本 Rudolf 出去散步，以及一个供用户键入相同内容的 JTextfield。

现在我有一个问题，我不知道怎么做，所以当用户需要输入鲁道夫时，这个词被突出显示，当用户输入例如 Pieter 时，它标记了 Pieter 这个词，因为它是错误的，必须是鲁道夫。

文本显示在字段中的类的代码：

```
package View;

import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.ScrollPaneConstants;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultHighlighter;
import javax.swing.text.Highlighter;

import Model.ExcersizeFactory;

public class StartOefeningTekst extends JFrame implements KeyListener {

        private JTextArea questionArea; //holds the file text
        private JTextArea enterArea; //holds the text user type
        private JPanel jPanel1;
        private JScrollPane enterScroll, questionScroll; //scrollpane to add textpanes

      //start and index are the starting and ending positions of current word to be typed
        private int index=0;
        private int start;

        private String invoer="";               // this will store the word that is to be typed 
        private String typedword="";            // holds the current word we are typing 

        private int totalhit=0;             // total word we have typed
        private int wronghit=0;             //number of mistakes

        private Highlighter enterHt;            //highlighter for file text
        private Highlighter questionHt;         //highlighter for type text

        private Highlighter.HighlightPainter filepainter;  
        private Highlighter.HighlightPainter textpainter;

        private boolean endfilestatus;          
        private boolean typingstartstatus;

    public StartOefeningTekst() {
       initGUI();

        setText_QuestionArea();

    }

    public void setText_QuestionArea() {

        questionArea.setText(ExcersizeFactory.getInstance().getClickedExcersize().getText());
    }

    public void underLine() {

        String str=questionArea.getText();
        if(str.length()>index){

            String space=""; // to check the occurance of  space or next line i.e. end of word
            invoer="";      // this will store the word that is to be typed 

            start=index;    //last position of previous word becomes the starting position of next word 
            //this loop runs until space or /n character comes 
            while(!space.equals("\n") && !space.equals(" ")){
                    space=""+str.charAt(index); //get character at index position
                    index++;    // increment of index i.e. next time next character will fetch
            }

            invoer=str.substring(start,index-1); // store the words to typed 

            questionArea.setCaretPosition(start); // sets the courser to current postion 

            try {
                enterHt.removeAllHighlights();          //removes all highlights added on filetext 
                enterHt.addHighlight(start, index-1, filepainter); //highlights the current word that is to be typed
            } catch (Exception e) {
                System.out.println("some problem with Highlighter "+e);
            }
            //runs the underLine function again if String sub has nothing  
            if(invoer.equals("")){
                underLine();
            }
        }//end of if (that checks the index and file text length)
        else{
            endfilestatus=true;
        //  enterArea.setEditable(false);
        }

    }//end of underline method

    // get endfilestatus
    public boolean getfilestatus(){
        return endfilestatus;
    } 

    //for checking the text is correctly typed or not
        public synchronized void check(String text){

            invoer=invoer.trim();

            //if word is not correctly typed
            if(!invoer.equals(text)){

                wronghit++; //increment in wronghit

                //add highlight to the not correctly typed word
                try {
                    questionHt.addHighlight(enterArea.getText().length()-text.length()-1, enterArea.getText().length()-1, textpainter);
                } catch (BadLocationException e) {
                    e.printStackTrace();
                }
            }

            totalhit++; //increment total hit

        }//end of check

        //backSpace function

        public synchronized void backSpace(){

            if(typedword.length()>0){
            typedword=typedword.substring(0,typedword.length()-1);
            }
            else{
                    enterArea.append(" ");
            }
        }//end of backspace function

        //key listener methods 
        public void keyPressed(KeyEvent ke){

            if(ke.getKeyChar()==' '){
                enterArea.append(" ");
            }

            typingstartstatus=true;
            //System.out.println(ke.getKeyCode());
        }

        //key listener methods
        public void keyTyped(KeyEvent ke){

            enterArea.setCaretPosition(enterArea.getText().length()); //set course position at the end 

            String ch=""+ke.getKeyChar(); //gets the currently typed character

            if((!ch.equals(" ") && !ch.equals("\n") && ke.getKeyChar()!=8 && ke.getKeyChar()!=9 && ke.getKeyChar()!=38 && ke.getKeyChar()!=39 && ke.getKeyChar()!=37 && ke.getKeyChar()!=40) || ch.equals("'") || ch.equals("(") || ch.equals("%") || ch.equals("&")){
                 typedword=typedword+ch;    
            }
            else if(ke.getKeyChar()==8){
                backSpace();    
            }

            else{

                if(typedword.length()>0){

                    check(typedword);
                    underLine();
                    typedword="";

                }
            }

            //System.out.println(ttext);

        }

        //key listener methods
        public void keyReleased(KeyEvent ke){
            //if the arrow keys are pressed 
            if(ke.getKeyCode()==37 || ke.getKeyCode()==38 || ke.getKeyCode()==39 || ke.getKeyCode()==40)
            {
                enterArea.setCaretPosition(enterArea.getText().length());
                System.out.println("released");
            }

        }

        //result of typing test
        public void result(float time, Container win){

            enterArea.setEditable(false);
            if(totalhit>0){
            JOptionPane.showInternalMessageDialog(win, "Gross Speed : "+(int)(totalhit/(time/60))+" WPM \n"
                    +"Accuracy : "+(((totalhit-wronghit)*100)/totalhit)+"%"+"\n"
                    +"Net Speed : "+(int)((totalhit-wronghit)/(time/60))+" wpm", "Your Typing Speed Result ",JOptionPane.INFORMATION_MESSAGE);

            }
            else{
                JOptionPane.showInternalMessageDialog(win, "You haven't Typed anything.");
            }

        }

        //get typing start status
        public boolean getTypingStartStatus(){
            return typingstartstatus;
        }

        public void setTypingStartStatus(boolean set ){
            typingstartstatus=set;
        }

    private void initGUI() {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

          jPanel1 = new JPanel();

        endfilestatus=false;
        typingstartstatus=false;

        //questionArea
        questionArea = new JTextArea(10,1);
        questionArea.setLineWrap(true);
        questionArea.setEditable(false);
        questionArea.setWrapStyleWord(true);
        questionArea.setFont(new Font("Arial",Font.PLAIN,17));
        questionArea.setFocusable(false);

        //file high lighter
        filepainter = new DefaultHighlighter.DefaultHighlightPainter(Color.CYAN);
        enterHt = new DefaultHighlighter();
        questionArea.setHighlighter(enterHt);
        questionScroll = new JScrollPane(questionArea);
        questionScroll.setPreferredSize(new Dimension(400,200));
        questionScroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        questionScroll.setBorder(questionScroll.getBorder());

        enterArea = new JTextArea(10,1);
        enterArea.setLineWrap(true);
        enterArea.setWrapStyleWord(true);
        enterArea.setFont(new Font("Times New Roman",Font.PLAIN,17));

        //text high lighter
        questionHt = new DefaultHighlighter();
        textpainter = new DefaultHighlighter.DefaultHighlightPainter(Color.RED);
        enterArea.setHighlighter(questionHt);

        //scroll pane for enterArea
        enterScroll = new JScrollPane(enterArea);
        enterScroll.setPreferredSize(new Dimension(400,200));
        enterScroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        enterScroll.setBorder(enterScroll.getBorder());

        //adding to the frame
        add(questionScroll);
        add(enterScroll);

        //addning keyListerner
        enterArea.addKeyListener(this);

        validate();

        //under line the current word to be typed
        underLine();

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(enterScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 594, Short.MAX_VALUE)
            .addComponent( questionScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 594, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addComponent( questionScroll, javax.swing.GroupLayout.DEFAULT_SIZE, 272, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(enterScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 220, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();

    }

} 
```

# java - Java：并行读取时比较两个字符串

> ID：10120461
> 
> 赞同：1
> 
> 时间：2012-04-12T08:59:58.573
> 
> 标签：java, string

我试图找到一种在并行读取时比较两个字符串的好方法。我想在不使用 equals 方法或类似方法的情况下这样做的原因是因为字符串不完全相同，为了更准确，我将举一个例子。

```
String s1 = "aaa\nbbb\nccc\ddd"
String s2 = "aaa\n\rbbb\n\rccc\n\rddd" 
```

当我们逐行查看时，您可以看到两个字符串具有相同的值（尽管不完全相等，因为 s2 也包含 \r ）。现在，我知道我可以使用一些删除方法来清理“\r”，但由于字符串可能非常大，我更喜欢逐行循环，一旦字符串不等于打破我的逻辑。换句话说，我更喜欢只迭代所需的行，而不是从 \r 中清除条目字符串。

编辑：我没有从文件中读取。这些是纯字符串。

有任何想法吗 ：） ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:03:20.597

既然您说字符串可能非常大，我猜您正在从文件中读取。当您使用 BufferedReader 并使用该`readLine();`方法时，您将逐行获取，没有行分隔符。现在，您可以使用`equals()`.

```
BufferedReader reader1 = ...; // depends on your source
BufferedReader reader2 = ...; // depends on your source

String line1 = null;
String line2 = null;

while ((line1 = reader1.readLine()) != null && (line2 = reader2.readLine()) != null)
{
     if (line1.equals(line2))
     {

     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:07:51.840

您可以创建两个 BufferedReader 对象，每个字符串一个，逐行读取并比较代表一行的字符串。BufferedReader.readLine() 方法会自动去除行尾字符（它们不会添加到返回的字符串中）。

BufferedReader br1 = new BufferedReader(new StringReader(s1)); 是如何创建缓冲阅读器的。

# windows - 对符号的写访问权，从 DLL 或 SO 导出

> ID：10120469
> 
> 赞同：0
> 
> 时间：2012-04-12T09:00:28.893
> 
> 标签：windows, linux, dll, shared-libraries

覆盖附加的 DLL/SO 中导出的数据是否合法？

示例（win32）：

```
t_Controller controller = (t_Controller*) GetProcAddress(SomeDLL, "Controller");
controller->Args = args; //  <--- here
controller->Run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:32:08.607

好的 - 所以你正在导出某种结构。

一旦获得指向结构的指针，从exe写入结构是否合法，完全取决于它在dll中写入结构是否合法。

即它是一个常量结构吗？如果它没有被定义为 const，那么你可以写入它。如果它被定义为 const，那么你`GetProcAddress`只是一种复杂的转换方式`const`，这将导致 - 一如既往 - 导致未定义的行为。即它可能起作用，也可能不起作用，具体取决于您的编译器实现——通常是否将在全局范围内声明的静态对象放置在只读数据部分中。

# tomcat - 如何从“ServletContext.log("Hello World!")”获取日志消息？

> ID：10120470
> 
> 赞同：3
> 
> 时间：2012-04-12T09:00:30.193
> 
> 标签：tomcat, servlets, logging

我正在使用 Tomcat v7，我想使用 ServletContext.log("Hello World!") 获取日志消息，但我无法从控制台或日志文件中获取任何日志。有人请告诉我如何配置以便我可以看到“Hello World！”吗？

（似乎它需要配置 server.xml 并添加 Logger 标签，我试过但没有看到生成日志文件。）

**感谢你的帮助。**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T14:33:56.363

[Tomcat Logging](http://wiki.apache.org/tomcat/FAQ/Logging)会告诉您有关日志记录的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T16:19:23.413

查看`tomcat/logs`目录 - 如果您没有配置不同的东西，它应该去那里。

# c - 我没有关闭管道末端的一个，有什么问题吗？

> ID：10120473
> 
> 赞同：2
> 
> 时间：2012-04-12T09:00:52.063
> 
> 标签：c, pipe

我使用管道在父进程和子进程之间进行通信。我读的书说，在父进程中，我必须关闭 pipefd [1]，但我没有这样做，没有其他任何事情发生，所以我的问题是“如果我不关闭 pipefd [1]，有什么不受控制？” 此致！

```
int pipefd[2];
if(pipe(pipefd) == -1)
{
    perror("pipe communication error");
    exit(EXIT_FAILURE);
}
int fd = fork();
if(fd < 0)
{
    perror("fork child process error");
    exit(EXIT_FAILURE);
}
if(fd != 0)//run in parent proc
{
    int a = -1;
    int i = 1;
    //close(pipefd[1]);                         ## here! ##
    while(i)
    {
        read(pipefd[0], &a, sizeof(a));
        printf("%d\n", a);
        sleep(4);
    }
}
else//run in child proc
{
    int i = 1;
    //close(pipefd[0]);                         ## here! ##
    while(i)
    {
        write(pipefd[1], &i, sizeof(i));
        i++;
        sleep(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:44:36.757

如果读取器没有关闭管道的写入端，那么当写入器进程关闭它时，它将不会收到文件结束符（因为仍然有一个文件描述符为写入端打开）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:04:15.850

好吧，关闭管道的建议是为了保护您自己：这样您的读取器进程就不会意外地写入管道，而写入器进程也不会意外地读出一些数据。所以通常它是一种防御性编程技术。

只要您不访问要关闭的管道，就不会发生任何不好的事情。

好吧，我在这里不是 100% 正确：我的陈述对于像您这样的简单程序是正确的，但是如果您打开并忘记关闭*很多*管道，那么您的程序迟早会*泄漏*它们（通常在 255 左右之后）打开管道，但 YMMV）你将无法打开一个新的。因为所有的管槽都会被泄漏的管道用完。

但是，您的程序并非如此。

但尽管如此，我还是建议关闭管道。这样，如果您错误地访问了错误的管道末端，您将收到错误消息。

# jenkins - 让 Jenkins 使用可变 SVN URL 构建多个配置

> ID：10120475
> 
> 赞同：3
> 
> 时间：2012-04-12T09:00:54.493
> 
> 标签：jenkins, multi-configuration

我想自动化我们的构建过程。

我们有 30 多种配置，每种配置都有不同的 SVN 分支。理想情况下，由于维护工作和人为错误的风险，我希望避免创建 30 个单独的 Jenkins 作业。

这就是 Jenkins 中的“多配置项目”的设计目的，但不幸的是，Jenkins 不支持在 SVN URL 中使用配置矩阵轴。

我也无法使用参数化构建进行构建，因为 Jenkins 不允许在本地结帐路径中使用变量（URL 中的变量可以正常工作，但它们最终总是会转到一个名为`${BRANCH}`(literal) 的目录。

归根结底，我希望能够签出`https://domain.ext/something/${BRANCH}/`并将其保存到`/some/path/${BRANCH}`. 如果这样做的方式能让我能够利用 Jenkins 的内置 SCM 功能（例如轮询），那就更好了。

我怎样才能让詹金斯了解我想要实现的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:50:09.447

我可以看到，有两种方法可以按照您想要的方式做某事。您可以在单个项目中添加所有分支（通过配置中的“添加位置”），将它们签出到不同的目录并“手动”找出更改的内容（或构建所有内容）。这可以与多配置事物集成，您的配置轴是不同的结帐位置，即每个配置都通过参数获得不同的工作目录。

另一种方法是不告诉 Jenkins 有关存储库的信息，而是手动触发构建（例如，通过 SVN 提交挂钩）并检查源代码作为第一个构建步骤。同样，这可以作为一个多配置项目按照上述类似的路线来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:25:52.443

我最终解决了这个问题，让 Jenkins 在如此高的级别上检查 SVN 存储库，它包含了我需要的所有分支。但这不是一个理想的解决方案，因为您在构建过程中会浪费时间在*所有东西*上运行“svn update” 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T08:04:59.720

规模较小时有一个类似的问题：必须构建具有相同配置但不同 SVN 路径的主干和分支。

第一次尝试是在结帐 URL 中使用 $SVN_BRANCH 并使用字符串参数进行设置。在手动使用时效果很好，但不适用于矩阵作业（正如 Aleksi 已经指出的那样）。我对矩阵构建所能做的就是触发参数化工作作为后续工作，这在某种程度上看起来很丑陋。

现在我最终使用了“Jobcopy Builder 插件”：我停用了我的初始工作并将其用作模板。在复制作业中，我有一个“复制作业”构建步骤，它复制停用的作业，将 $SVN_BRANCH 替换为实际的分支名称（主干或分支/some_branch）并激活这两个作业。由于我还选中了“覆盖”选项，因此在运行“复制作业”后会更新所有作业配置并保留构建历史记录。

# mysql - 如何解决和纠正此错误消息

> ID：10120479
> 
> 赞同：-3
> 
> 时间：2012-04-12T09:01:23.480
> 
> 标签：mysql

我正在尝试注册在线工作，当我保存注册信息时，这是我的信息详细信息的第 4 页，我收到此消息：（我真的不明白）

发生数据库错误

错误号：1054

“字段列表”中的未知列“craigslist_posting_marketing”

> 插入`jobseekers_skills`( `ability_to_solve_problems_quickly`, `attention_to_detail`, `email`, `gathering_information`, `google_docs`, `internet_browsing`, `learning_new_skills_rapidly`, `ms_power_point`, `ms_excel`, `ms_office`, `typing_speed`, `working_at_a_fast_pace`, `general_experience`, `general_explanation`, `speaking`, `writing`, `english_experience`, `english_explanation`, `advertising`, `blogging`, `branding`, `copywriting`, `email_marketing`, `google_adsense`, `google_adwords`, `google_webmaster`, `recording_audio`, , `seo`, `telemarketing`, `video_marketing`, `video`, `video_editing`, `marketing_experience`, `marketing_explanation`, `autoresponders`, `backing_up_mysql_database`, `drupal`, `ftp`, `google_analytics`, `html`, `joomla`, `managing_servers`, `microsoft_excel`, `web_pages`, `wordpress`, `webmaster_experience`, , , , , ,`webmaster_explanation``adobe_after_effects``corel_draw``css``dreamweaver``fireworks``flash`, `logo_design`, `maya`, `pagemaker`, `photoshop`, `videography`, `web_page_design`, `graphics_experience`, `graphics_explanation`, `ajax`, `asp_net`, `autocad`, `csharp`, `cplusplus`, `coldfusion`, `database`, `delphi`, `flex`, `java`, `javascript`, `jquery`, `opengl`, `oracle`, `perl`, `php`, `python`, `ruby`, `visual_basic`, , `programming_experience`, `programming_explanation`, `accounting`, `bookkeeping`, `budgeting_forecasting`, `business_analysis`, `business_plans`, `corporate_strategy`, `financial_analysis`, `financial_forecasting`, `financial_management`, `inventory_management`, `investment_research`, `payroll`, `peachtree`, `project_management`, `strategic_planning`, `tax_preparation`, `finance_management_experience`, `finance_management_explanation`, `customer_support`, , , , , ,`data_entry``event_planner``medical_transcription``research``telephone_handling``time_management``travel_planning`, `admin_support_experience`, `admin_support_explanation`, `craigslist_posting_marketing`, `direct_mail_marketing`, `posting_listings_online`, `prospecting`, `reo_asset_management`, `telephone_support`, `trustee_sale_tracking`, `real_estate_experience`, `real_estate_explanation`,`jobseeker_id`3', '3', '1', 'Just with Excel and the web.', '', '2', '1', '1', '1', '1', '1', '2 '、'1'、'1'、'3'、'3'、'1'、'涉足 Photoshop、摄像。'，''，'1'，'1'，'1'，'1'，'1'，'1'，'1'，'1'，'1'，'1'，'1'，' 1'、'1'、'1'、'1'、'1'、'1'、'1'、'1'、'无'、'无'、'2'、'2'、'2' , '1', '1', '1', '1', '1', '1', '1', '1', '3', '1', '1', '1', ' 1', '需要更多练习。', '', '4', '

帮助！！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:07:25.683

消息很清楚，表`craigslist_posting_marketing`中不存在`jobseekers_skills`，所以检查表的字段名称修复SQL语句并重试。

# php - HTML 表单 - 如果未输入任何内容，则用值填充输入

> ID：10120481
> 
> 赞同：0
> 
> 时间：2012-04-12T09:01:27.913
> 
> 标签：php, jquery, html, forms

我正在为需要电子邮件地址和姓氏的系统创建一个基本订阅表单（SugarCRM，以防有人感兴趣）。

**只有**当访问者没有输入他们自己的姓氏时，我才需要用*一些东西*（任何东西，没关系）填充姓氏输入值。

 **由于订阅操作是托管的（Mail Chimp），我无权访问它进行预验证，除非这可以在它传递之前发生。我正在涉足比我感到舒服的更深的 PHP 水域！这可能`jQuery`吗？

所以基本上我通过用一些东西填充值来绕过所需的姓氏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:04:33.993

检查表单提交时的姓氏，如果没有值，请`"foo"`输入：

```
$('#formId').submit(function() { // attach submit handler to the form.
    var $lastName = $('#lastName'); // get the last name element.
    if (!$lastName.val())   // if it doesn't have value.
        $lastName.val('foo'); // put foo as a value.
});​ 
```

您应该将 and 替换`formId`为`lastName`表单和姓氏元素的实际 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:08:37.723

是的，这对于 jQuery 来说肯定是可能的。只需查看 jQuery API，然后将事件注册到提交按钮，因此，该事件在提交操作之前执行。有几种可能性。

使用选择器，您可以搜索您的姓氏输入字段并读取和比较输入的值。如果需要，您可以更改输入字段的值。

只需看看[http://api.jquery.com/](http://api.jquery.com/)。在那里研究事件、选择器和操作值。例子很好地自我解释。**

# methods - cakePHP：如何在另一个控制器中使用一个控制器的动作？

> ID：10120485
> 
> 赞同：0
> 
> 时间：2012-04-12T09:01:46.333
> 
> 标签：methods, controller, cakephp-1.3

我有一个控制器（A）来管理一个对象，在控制器中我有一个方法来检查是否`$this->Auth->user(id)`允许访问该对象。
它是通过访问关联模型 ( `$this->ModelA->ModelB->...`) 来完成的。

现在，在另一个控制器 (C) 中，我需要检查相同的问题（对于某些内部逻辑）。但是，此控制器的模型与 ModelB 无关。
所以，我的问题是：如何检查它？纯 SQL 是可能的，但我更愿意避免它。

我看到的唯一方法是从另一个控制器调用该方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:10:38.407

将逻辑放入一个方法中，`AppController`以便所有控制器都可以访问它。
在该方法中，如有必要，加载模型：

```
class AppController extends Controller {

    protected function isUserAllowed() {
        if (!isset($this->TheModel)) {
            $this->loadModel('TheModel');
        }

        ...
    }

} 
```

# php - 教义 2\. 如何计算 querybuilder 中两个日期时间字段之间的差异

> ID：10120491
> 
> 赞同：0
> 
> 时间：2012-04-12T09:01:57.550
> 
> 标签：php, doctrine-orm, dql

我必须下表：

```
Registration
    id int
    created datetime

Activity
    id int
    startdate datetime 
```

现在我想将此条件添加到我的 SQL 查询中：

```
(Registration.created + 7 days) <= Activity.startdate 
```

我如何在教义 2 中做到这一点？我更喜欢独立于数据库的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:03:30.143

DATE_SUB 是解决方案。我将它与学说 2.1 一起使用。

```
$EntityManager->createQueryBuilder()->expr()->gte("r.created", "DATE_SUB(a.startDate, 7, 'day')") 
```

# ip - 为什么IP数据包中有填充？

> ID：10120492
> 
> 赞同：4
> 
> 时间：2012-04-12T09:02:00.473
> 
> 标签：ip, padding, packet

我做了一些回顾，但我无法弄清楚 IP 数据包中的填充是什么？

![在此处输入图像描述](../Images/67924ff380a9a755cedc480eee215278.png)

图取自[这里](http://www.freesoft.org/CIE/Course/Section3/7.htm)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T09:06:05.430

'options' 字段是可变长度的，填充字段用于使数据包头长度为 32 位的倍数

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T16:12:37.903

填充基本上用于确保 IP 数据包标头的长度是 32 位的倍数。由于 IP 标头中选项字段的长度不同，因此需要它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T09:04:19.050

从该页面：

> Internet 标头填充用于确保 Internet 标头以 32 位边界结束。填充为零。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-05T04:21:45.647

如果包含一个或多个选项，并且用于它们的位数不是 32 的倍数，则添加足够的零位以将标头“填充”​​为 32 位（4 字节）的倍数。

# facebook-javascript-sdk - Facebook javascript SDK - 无法发布分数

> ID：10120500
> 
> 赞同：0
> 
> 时间：2012-04-12T09:03:02.717
> 
> 标签：facebook-javascript-sdk

我正在使用 Javascript SDK 将分数发布到 FB，但它给了我错误（{error:{message:"(#15) 此方法必须使用应用程序 access_token 调用。", type:"OAuthException", code:15 }}) ：

我正在使用来自以下的 accessToken：

```
 FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        // the user is logged in and has authenticated your
        // app, and response.authResponse supplies
        // the user's ID, a valid access token, a signed
        // request, and the time the access token 
        // and signed request each expire
        uid = response.authResponse.userID;
        accessToken = response.authResponse.accessToken; 
```

我用来发布分数的功能如下：

```
 FB.api("uid/scores", 'post', {score: scoredata, access_token: accessToken },
            function(response) 
        {
           if (!response || response.error) {
              console.error(response);
           } else {
              console.log(response);
           }
        }); 
```

由于 fb 特别缺少 JAvascript 的文档，任何人都可以给出想法。

雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:07:52.140

这是因为分数应该作为应用程序而不是用户发布。

您尝试做的事情应该使用[Application`access_token`](http://developers.facebook.com/docs/authentication/applications/)并从服务器端（不是浏览器中的 JavaScript）完成，这样您的应用程序机密就不会被泄露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T19:14:35.123

对于使用用户访问令牌在 Facebook 游戏上发布分数，您不再需要在此调用中传递访问令牌，它也可以工作，但不是必需的。您的代码上的错误是 FB.api 必须在我之前的 ' 之后使用 / 调用，我认为您需要使用 ME 而不是 user id 。

```
 FB.api('/me/scores/', 'post', { scores: score }, function(response) {
    if( response.error ) {
      console.error('Failed',response);
    } else {
      console.log('Posted', response);
               }    
  }); 
```

您需要 publish_actions 权限才能发布，**这将始终设置新的得分值**，仅适用于高分，如果您编写代码..获取用户得分，使用 user_game_activities 并使用 JavaScript 比较值，然后在新值更大时发布。

您还可以使用 App Token 设置高分，使用非常不同的调用。我一直在用它来保存老虎机游戏中的用户积分，我发现它可以多次保存和获取分数，以在两个或多个游戏会话之间保持更新和保存。我也有实时的 Facebook 游戏分数排行榜，它也可以在没有应用访问令牌的情况下工作，因为它是相对的，并且只显示你朋友的分数。

我就是这样做的，我喜欢它，Facebook 平台很棒。

[![实时 Facebook 游戏得分排行榜](../Images/c4d754c7f647d2197c02b94f09c8acd6.png)](https://i.stack.imgur.com/3KmcV.png)

# php - Symfony 2 + ajax 类似 Twitter 的加载更多内容

> ID：10120501
> 
> 赞同：3
> 
> 时间：2012-04-12T09:03:08.067
> 
> 标签：php, jquery, ajax, symfony

我正在创建一个页面，我可以在首页上加载更多“新闻”。现在有 4 个“新闻”，当我按下按钮加载更多时，它应该加载 4 个新新闻。

我知道如何使用普通的 php 和 ajax 来做到这一点。但我不知道如何用 Symfony 2 做到这一点。

使用此站点，代码示例作为源，[http://www.9lessons.info/2009/12/twitter-style-load-more-results-with.html](http://www.9lessons.info/2009/12/twitter-style-load-more-results-with.html)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:58:32.143

创建一个单独的路由以获取更多新闻，例如`news/get/[index]`，然后您的控制器从数据库中获取新闻对象并输出为 json 格式，例如，

```
public function yourControllerAction(){
  $news = //objects fetched from db

  //set json header
  $response = new Response();
  $response->headers->set('Content-Type', 'application/json');
  $response->setContent(json_encode($news);
  return $response;
} 
```

然后在您的页面中，您可以使用原始 javascript 或 javascript 模板引擎（如`mustache`. 您还可以检查[JMSSerializerBundle](http://jmsyst.com/bundles/JMSSerializerBundle/master/usage)以微调 json 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:14:58.423

您最简单的方法是使用嵌入式控制器： [http ://symfony.com/doc/current/book/templating.html#embedding-controllers](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

给它一个默认为 0 或类似的值（我建议使用新闻 id）。然后，如果新闻 id 为 0，嵌入式控制器会加载最新的 4 条新闻，或者会加载您提供的 id 之后的下 4 条新闻，这将是您显示的最后一条新闻的 id。

没有代码重复。

# visual-studio-2010 - 如何折叠 Visual Studio 中的所有类大纲

> ID：10120502
> 
> 赞同：50
> 
> 时间：2012-04-12T09:03:11.030
> 
> 标签：visual-studio-2010, keyboard-shortcuts

**`Ctrl`++`M`非常`O`**适合折叠一个类中的所有方法，但是我很难找到一种方法来折叠整个文件中的所有类大纲。

有人可能会问 - 为什么一个文件中有很多类？这是因为我使用的是 MSpec，而类是我的测试，所以我有数十个类的文件。为了了解正在发生的事情，我经常不得不一个一个地折叠类，但这并不是很有效。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-19T14:05:09.197

哈 - 好吧，显然我只需要提供赏金就可以在几分钟后找到答案。

`Ctrl``M`,`Ctrl``L`将切换所有大纲。如果文件中的任何内容被折叠，第一次调用它将展开所有内容，*然后*再次调用它将折叠所有内容。这也会折叠命名空间，这是一个小小的不便，但我称之为进步。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-10-15T18:09:21.043

公认的答案是迂回的做法。

您正在寻找`Ctrl`+ `M`, `A`，它会全部折叠。

正如[杰伊提到](https://stackoverflow.com/a/10229812/84873)的那样，`Ctrl`+展开所有，但如果已经展开，则全部折叠 `M`。`L`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-10T13:27:43.770

实际上，我发现使用起来更方便`Ctrl``M`，`Ctrl``M` **并指定范围**：

*   要折叠文件中的所有内容，请按：***`Ctrl``A`***和`Ctrl``M`, `Ctrl``M`。
*   要仅折叠几个部分，我按：***`shift``PgUp`***/***`PgDn`***或***`shift``MouseClick`***然后`Ctrl``M`, `Ctrl``M`。

**这将像 一样**切换**`Ctrl``M`，`Ctrl``L` **但您决定范围！****

 **在单个方法/工作区之前和之后的所有内容中折叠多个对象初始化器非常方便。还扩展了几个相关的全属性/区域/函数/foreach。**

# .net - 找到 PowerPoint SpellChecker 错误的根源 - 现在，如何使用 VBA 修复文件？

> ID：10120503
> 
> 赞同：1
> 
> 时间：2012-04-12T09:03:12.670
> 
> 标签：.net, vb.net, vba, powerpoint

在 PowerPoint（至少 2007 年，但可能还有其他）中，它拒绝对某些形状的“某些”文本进行拼写检查。

我认为这是形状的类型，所以改变了它们，这并没有解决它。所以我做了一些实验，将我所谓的“受感染”文本移动到几个框中，并看到它以某种方式附加到文本上。

获取一个包含已知感染和未感染部分的非常简单的文件，我将 .pptx 转换为 .zip 并打开 .\ppt\slides\slide1.xml

此处不进行拼写检查的文本附有：

`<a:rPr noProof="1" ...`

拼写没问题的文本，或在封闭内按下“忽略”的文本：

`<a:rPr dirty="0" smtClean="0" ...`

和拼写错误的文本，发现：

`<a:rPr dirty="0" smtClean="0" err="1" ...`

我找到并删除了文件中的所有 noProof="1"，将其退回给柜台并打开了演示文稿。并且按照我的预期进行所有拼写检查，找到所有框中的所有错误，而不会损坏文件。

保存后，我重新打开了silde1.xml，发现`dirty="0" smtClean="0"`还是`dirty="0" smtClean="0" err="1"`在正确的地方。

现在的问题是，我如何使用这些新发现的知识来修复文件，而无需手动提取所有 slide#.xml 文件，在文本编辑器中打开它们并使用“替换”来修复它们？

提取过程可以自动化，但如果可以从 PowerPoint 中的 VBA 进行，那就更容易了。

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:53:29.927

我知道您要求提供有关 PowerPoint 的具体答案，而不是在“某些”区域进行拼写检查。

我想向您推荐一个我使用的名为 Spell Check Anywhere 的程序。它将拼写检查添加到所有 Windows 程序，包括 PowerPoint。因此，您将能够在任何 Windows 程序中进行拼写检查，无论您在何处键入。

拼写检查质量非常高，单词建议比 Word 提供的要好得多。

它还带有快速打字功能。

因此，当您正在寻找 PowerPoint 的解决方案时，该程序将为您提供一个解决您的整个拼写检查需求的解决方案。

谢谢，托默

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T09:48:19.437

很好的发现。不确定是否有办法通过 VBA API 做到这一点。但是您应该能够使用 OpenXML API 来做到这一点。这可能需要编码为 .net 项目。

[http://www.microsoft.com/download/en/details.aspx?id=5124](http://www.microsoft.com/download/en/details.aspx?id=5124)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:42:59.827

我终于找到了一种方法来使用脚本（至少是过程的一部分）使用`powershell`.

1.  `.pptx`将文件重命名为`.zip`
2.  导航`\ppt\slides`
3.  提取`slide*.xml`文件
4.  跑`Windows Powershell`
5.  导航包含提取的 xml 文件的文件夹
6.  粘贴以下代码：

    `$configFiles=get-childitem . *.xml -rec`

    `foreach ($file in $configFiles) { (Get-Content $file.PSPath) | Foreach-Object {$_ -replace ' noProof="1"', ''} | Set-Content $file.PSPath }`

7.  将`xml`文件放回 zip 文件中

8.  `.zip`将文件重命名为`.pptx`,
9.  结果：`Powerpoint`拼写检查正确的文件。

# java - 访问 html 页面中具有未知数量表的所有表

> ID：10120504
> 
> 赞同：-2
> 
> 时间：2012-04-12T09:03:13.343
> 
> 标签：java, htmlunit

我想访问具有未知数量表的网页中迭代的所有表。我写了这段代码

```
import java.io.*; 
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlTable;
import com.gargoylesoftware.htmlunit.html.HtmlTableRow;
import com.gargoylesoftware.htmlunit.html.*;
import com.gargoylesoftware.htmlunit.WebClient;

public class test {

public static void main(String[] args) throws Exception {

            WebClient client = new WebClient();
            HtmlPage currentPage = client.getPage("http://www.mysite.com");
            client.waitForBackgroundJavaScript(10000);
            FileWriter fstream = new FileWriter("index.txt");
        BufferedWriter out = new BufferedWriter(fstream);

        for (int i=0;i<2;i++){
         final HtmlTable table =(HtmlTable)    currentPage.getByXPath("//table").get(i);
         for (final HtmlTableRow row : table.getRows()) {
                for (final HtmlTableCell cell : row.getCells()) {
                out.write(cell.asText()+',');
                }
         out.write('\n');
    }
}

out.close();
    client.closeAllWindows();

}
} 
```

我试过检查条件：

```
 while(currentPage.getByXPath("//table")){....} 
```

但不被接受。什么是正确的检查条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:15:14.053

htmlunit.html.HtmlPage 有一个方法 getElementsByTagName(String tagName)

您可以在其中将“table”的标记名传递给它。然后用粗略的伪代码获取它返回的长度：

```
var x = getElementsByTagName("table");
var nTables = x.length 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-19T10:35:37.403

首先获取 HTML 表格行列表。然后获取 HTMLTable 列的列表并使用 for 循环和迭代 table.and 检查条件你想要什么

```
List<HtmlTableRow> tableRows = table.getRows(); 
```

我得到第 0 行，因为我想检查表头，如果你想你可以随意改变

```
List<HtmlTableCell> tableColumns = table.getRow(0).getCells();

for (int row = 0; row < tableRows.size(); row++)
{
    for (int column = 0; column < tableColumns.size(); column++)
    {
        if (tableColumns.get(column).asText().equalsIgnoreCase("check your condition"))
        {
            // do what you want 
        } 
    }
} 
```

# python - 如何使用 Python 从多部分 HTTP 响应（OGC WCS 服务）中获取文件

> ID：10120507
> 
> 赞同：3
> 
> 时间：2012-04-12T09:03:36.210
> 
> 标签：python, multipart, multipartform-data

我正在从 OGC WCS 服务中检索作为 socket._fileobject (fo) 的多部分结果，其中 fo.read() 结果如下所示：

```
--wcs
Content-Type: text/xml
Content-ID: wcs.xml

<?xml version="1.0" encoding="UTF-8"?>
<Coverages
     xmlns="http://www.opengis.net/wcs/1.1"
     xmlns:ows="http://www.opengis.net/ows"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.opengis.net/ows/1.1 ../owsCoverages.xsd">
  <Coverage>
    <Reference xlink:href="cid:coverage/out.tif"/>
  </Coverage>
</Coverages>
--wcs
Content-Type: image/tiff
Content-Description: coverage data
Content-Transfer-Encoding: binary
Content-ID: coverage/out.tif
Content-Disposition: INLINE
(a lot of binary data)--wcs-- 
```

我需要将它的二进制部分保存到文件（out.tif）中。您能否向我推荐一些 Python 库来使用它并写出一个使用示例？

谢谢！

# c# - 识别控件以设置权限的好方法是什么？

> ID：10120513
> 
> 赞同：1
> 
> 时间：2012-04-12T09:03:51.843
> 
> 标签：c#, winforms, architecture, permissions

我需要实现权限。必须可以根据用户的权限使控件和表单（中）可见。

因此，我需要一种方法来识别要为其设置权限的控件。该应用程序有点大并且仍在增长。所以，我申请权限的方式必须灵活。

我考虑过给控件一个全名，比如：namespace.formName.nameOfControl。但我不喜欢这个，因为它太脆弱了。当名称（空间）改变时，我也需要改变身份，我不想要这个，我和同事忘记更新这个的机会很大。

所以我的问题是，你认为什么是识别控件的好方法？有一个后台供管理员设置权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:14:52.320

我建议所有可用的控件都必须实现一个定义的接口，比如“IAccessControled”，在那里你可以定义一个“PermissionKey”

由于此名称属于接口，因此它独立于控件具有的其他属性（例如显式接口实现）

然后您可以扫描所有 IAccessControled 控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:52:47.443

Boas Enkler 的回答是为诸如 Command 或 User Created 类设置权限的好方法。但是，正如您所提到的，它需要包装每个基本控件来管理它们的权限。

我推荐的方法是创建一个自定义控件来实现`IExtenderProvider`. 这`IExtenderProvider`只是让您将自定义添加`Propreties`到窗体上的控件。所以你可以添加一个“PermissionRequired”属性，你可以在设计你的 WinForm 时设置它。

我还没有找到一些真正让我满意的教程，但那些是我找到的最好的教程：[.NET IExtenderProvider (C#)](https://stackoverflow.com/questions/182748/net-iextenderprovider-c/182761#182761)

# asp.net - Ext.Net RadioGroup CheckedItems 始终为空

> ID：10120514
> 
> 赞同：1
> 
> 时间：2012-04-12T09:03:53.620
> 
> 标签：asp.net, .net, extjs, ext.net

我看到来自 Ext.Net 2.0 的奇怪行为： RadioGroup.CheckedItems 在我的更改处理程序回调中始终为零。在 RadioGroup1.CheckedItems 下面的代码中，检查后始终为零。我在做什么错/我该如何解决这个问题？

```
[DirectMethod]
public void TxtVisibility()
{
    foreach (var item in RadioGroup1.CheckedItems)
    {
        if (item.ID == "rdHourly")
        {
            txtPerHour.Hidden = false;
            txtAtTime.Hidden = true;
        }
        else if (item.ID == "rdAtHourly")
        {
            txtPerHour.Hidden = true;
            txtAtTime.Hidden = false;
        }
    }  
} 
```

我的调用代码：

```
<ext:RadioGroup ID="RadioGroup1" 
                runat="server" 
                FieldLabel="" 
                ColumnsNumber="1">
    <Items>
        <ext:Radio ID="rdHourly" FieldLabel="IsEveryPerHour"
                   Name="IsEveryPerHour" runat="server"
                   BoxLabel="Per Hour(s)" Padding="10">
        </ext:Radio>
        <ext:Radio ID="rdAtHourly" FieldLabel="IsAtHour"
                   Name="IsAtHour" runat="server"
                   BoxLabel="At" Padding="10">
       </ext:Radio>
    </Items>
    <Listeners>
         <Change Handler="App.direct.TxtVisibility();" ></Change>
    </Listeners>
</ext:RadioGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:16:07.330

我刚刚在 Ext.NET 论坛上回答了这个完全相同的问题，然后来到 Stack 看看今天有什么新内容......并找到了这个问题。

[http://forums.ext.net/showthread.php?18364](http://forums.ext.net/showthread.php?18364)

您可能需要等待下一个 Ext.NET v2 版本。您的示例似乎与最新的源一起工作正常。上面的链接中有一个完整的工作示例。

# c# - 使用 C# 代码在运行时将图像按钮图标颜色更改为灰度

> ID：10120516
> 
> 赞同：1
> 
> 时间：2012-04-12T09:03:57.660
> 
> 标签：c#

我们正在使用 WPF 开发一个 erp 应用程序，目前仍处于初始阶段。

我需要知道如何在运行时使用特定子窗口实例的 C# 代码将 .png 或 .jpg 图标的颜色更改为灰度。

例如，窗口处理编辑操作应该禁用保存图像按钮并转为灰度。

非常感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T09:06:42.063

我使用这种扩展方法将图像转换为灰度：

```
public static Image MakeGrayscale(this Image original)
{
    Image newBitmap = new Bitmap(original.Width, original.Height);
    Graphics g = Graphics.FromImage(newBitmap);
    ColorMatrix colorMatrix = new ColorMatrix(
        new float[][] 
        {
            new float[] {0.299f, 0.299f, 0.299f, 0, 0},
            new float[] {0.587f, 0.587f, 0.587f, 0, 0},
            new float[] {.114f, .114f, .114f, 0, 0},
            new float[] {0, 0, 0, 1, 0},
            new float[] {0, 0, 0, 0, 1}
        });

    ImageAttributes attributes = new ImageAttributes();
    attributes.SetColorMatrix(colorMatrix);
    g.DrawImage(
        original, 
        new Rectangle(0, 0, original.Width, original.Height),
        0, 0, original.Width, original.Height, 
        GraphicsUnit.Pixel, attributes);

    g.Dispose();
    return newBitmap;
} 
```

# python - 使用 PASSWORD_HASHERS 为 unittest 用户创建一个简单的密码

> ID：10120518
> 
> 赞同：12
> 
> 时间：2012-04-12T09:04:12.513
> 
> 标签：python, django, django-testing

在 django 1.2.5 之前，我可以使用以下代码创建一个用户进行测试，然后登录：

```
class TestSomeLoginRequiredView(TestCase):
    urls = 'sonloop.tests.test_urls'

    def setUp(self):
        self.user = User.objects.create(username='testuser',password='some_password')

    def test_the_view(self):
        response = self.client.get('/test_view_url/')
        self.assertEqual(response.status_code,401)

        self.client.login(username='testuser',password='some_password')
        response = self.client.get('/test_view_url/')
        self.assertEqual(response.status_code,200) 
```

现在在 django 1.4 中使用相同的代码不再起作用：

> ValueError：未知密码散列算法“some_password”。您是否在 PASSWORD_HASHERS 设置中指定了它？

我知道这与新的密码哈希系统有关。我不使用 PASSWORD_HASHERS 设置，所以 Django 应该使用一些默认值。

Django 文档现在关于如何实现类似的东西非常稀少。在测试部分没有任何改变。从关于创建密码和如何散列密码的部分，我可以看到我可能会创建一个这样的密码：

```
self.user = User.objects.create(username='testuser')
self.user.set_password('some_password') 
```

但这只会在第一行引发这种感觉（在创建用户时，而不是在分配密码时）：

> ValueError：未知密码散列算法''。您是否在 PASSWORD_HASHERS 设置中指定了它？

这是 django 不接受空密码的一些问题，所以我将其更改为：

```
self.user = User.objects.create(username='testuser',password='!')
self.user.set_password('some_password') 
```

然后尝试像这样登录用户：

```
login = self.client.login(username='testuser',password='some_password')
self.assertTrue(login) 
```

现在让人叹了`AssertionError: False is not True`口气——我几乎预料到……

我现在的问题是：如何使用密码创建用户，并使用 django 测试客户端登录该用户？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T09:12:27.873

```
self.user = User.objects.create(username='testuser',password='!')
self.user.set_password('some_password')
self.user.save() # <--- You need this ;) 
```

或者：[从这里](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.UserManager.create_user)

```
self.user = User.objects.create_user(username='user', email='email@example.com', password='pass') 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-12T09:20:56.827

在寻找解决方案时，我发现了另外一件可行的方法，尽管我很可能会使用 Thomas User.objects.create_user 解决方案，因为这真的很简单。

但不管它值多少钱，这就是我想出的：

```
from django.contrib.auth.hashers import make_password

pwd = make_password('some_password')
self.user = User.objects.create(username='testuser', password = pwd) 
```

工作也很好。

* * *

正如我刚刚发现的那样，这在手动创建固定装置时非常有用。当您创建一个用于测试的夹具时，您可能想要一个像这样的用户：

> 用户名：user_01 密码：password_01

但是我怎么知道 password_01 被散列后的样子？该散列值必须存储在夹具中以进行测试，而 make_password 正是这样做的：它从密码创建密码散列。只需将返回值写入`make_password('password_01')`夹具即可。

# security - 如果由有效 CA 认证的站点破坏了安全性怎么办？

> ID：10120520
> 
> 赞同：0
> 
> 时间：2012-04-12T09:04:14.040
> 
> 标签：security, authentication, certificate, ssl-certificate, certificate-authority

我正在研究网络安全主题，只是想知道如果您的财务、信用卡或私人信息被具有某些认证机构有效印章的网站滥用或损害怎么办？

1.  除了吊销证书之外，CA 是否对违规实体采取任何法律行动？

2.  CA 如何知道任何违规行为？

3.  CA 是否对其认证的实体进行任何审计？或者这不是他们在工作中的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:44:05.640

证书颁发机构有一项主要工作 - > 他们接收证书请求，验证请求某个证书的人是否实际获得了该名称的授权（如果我想要 examplesite.com 证书，我是否拥有 examplesite.com？），然后发出将其交给授权方。而已。

# jquery - jQuery 验证因第二个错误而失败

> ID：10120523
> 
> 赞同：0
> 
> 时间：2012-04-12T09:04:23.920
> 
> 标签：jquery, css, jquery-validate

**问题图片：** [http ://tinypic.com/view.php?pic=2duwlsp&s=5](http://tinypic.com/view.php?pic=2duwlsp&s=5)

**问题描述：** 我有一个“工作”的 jQuery 表单验证，除了一个视觉错误。当您第一次导致验证错误时，一切都会按原样显示。但是如果你修复了错误，然后重新导致错误，图像不会在第二次出现。

有关问题的图片，请参见上面的屏幕截图。

**我的代码：**

```
 <script type="text/javascript">
    $(document).ready(function(){
      $('#signupform').validate({
           wrapper: 'span class="error"',
           meta: 'validate', 
           highlight: function(element, errorClass, validClass) {
               if (element.type === 'radio') {
                      this.findByName(element.name).addClass(errorClass).removeClass(validClass);
              } else {
                      $(element).addClass(errorClass).removeClass(validClass);
               }

              // Show icon in parent element
              var error = $(element).parent().find('span.error');

              error.siblings('.icon').hide(0, function() {
                error.show();
              });
            },

             unhighlight: function(element, errorClass, validClass) {
              if (element.type === 'radio') {
                this.findByName(element.name).removeClass(errorClass).addClass(validClass);
              } else {
                $(element).removeClass(errorClass).addClass(validClass);
              }

              // Hide icon in parent element
              $(element).parent().find('span.error').hide(0, function() {
                $(element).parent().find('span.valid').fadeIn(200);
              });
            },
            "rules":{"username":{"required":true,"remote":{"url":"http:\/\/localhost\/welcome\/remote","type":"post"}}},"onkeyup":false});
             });
 </script> 
```

**我尝试过的：**我尝试过查看高亮和非高亮功能。我的“猜测”是错误在“取消突出显示”部分，因为它只发生在第二个错误之后（即突出显示，取消突出显示，突出显示->错误）

所以也许我正在删除我不应该删除的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:18:42.703

解决了。改变

```
 // Show icon in parent element
          var error = $(element).parent().find('span.error');

          error.siblings('.icon').hide(0, function() {
            error.show();
          }); 
```

至

```
 // Show icon in parent element
          var error = $(element).parent().find('span.error');

            error.show();
          }, 
```

# c# - 检测 Microsoft 功能区中的活动选项卡是否已更改

> ID：10120525
> 
> 赞同：0
> 
> 时间：2012-04-12T09:04:30.253
> 
> 标签：c#, wpf, xaml, ribbon

我想知道，哪个选项卡是 Microsoft 功能区中的活动选项卡，以相应地更改内容呈现。

我怎样才能做到这一点？

这是我想出的：

```
 public MainWindow()
    {
        InitializeComponent();

        // Insert code required on object creation below this point.
        new Thread(() =>
        {
            int lastIndex = int.MinValue;

            while (true)
            {
                Thread.Sleep(100);

                int newIndex = -1;
                this.Dispatcher.Invoke(DispatcherPriority.Normal,
                    new Action(() =>
                    {
                        newIndex = Ribbon.SelectedIndex;
                    }));

                if (newIndex != lastIndex)
                {
                    lastIndex = newIndex;
                    var index = lastIndex;
                    this.Dispatcher.BeginInvoke(DispatcherPriority.Normal, (ThreadStart) (() =>OnCurrentTabChanged(index)));
                }
        }){ IsBackground=true}.Start();
    }

    void OnCurrentTabChanged(int tabIndex)
    {

    } 
```

但必须有更好的方法来做到这一点。在那儿？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:33:48.663

Ribbon 继承自 ItemsControl，因此如果绑定到 SelectedItem 属性，您将收到有关当前 Tab 更改的通知。

# android-ndk - 是否有从 ndk-build 输出程序集的选项？

> ID：10120530
> 
> 赞同：1
> 
> 时间：2012-04-12T09:04:43.650
> 
> 标签：android-ndk

我想知道是否有任何选项可以从 ndk-build 输出程序集？我尝试在 LOCAL_CFLAGS 中放入 -save-temp 但未能构建。它告诉我这是一个无法识别的选项。想知道谷歌是否像这个链接中声称的那样在 i686-android-linux 中删除了它[http://code.google.com/p/vs-android/issues/detail?id=47](http://code.google.com/p/vs-android/issues/detail?id=47)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-08T12:25:26.483

我发现有两种方法可以做到这一点。

```
LOCAL_CFLAGS += -save-temps 
```

注意单个破折号和拼写（不是问题中提到的 save-temp ）。这些文件被保存到构建的工作目录，通常是顶级项目文件夹。虽然这使得文件更容易找到，但如果您在不同的文件夹中有多个同名文件，或者您正在为多个 ABI 构建（尽管您可以在 Application.mk 中限制），您可能会遇到问题。

另一种方法使用 LOCAL_FILTER_ASM，它将程序集文件放置在目标文件旁边，这与源目录布局相匹配，并对不同的 ABI 使用不同的路径作为目标。

```
LOCAL_FILTER_ASM := cp 
```

设置此变量会使 NDK 构建输出首先转换为汇编，然后运行命令以“过滤”编译器的汇编输出，然后汇编过滤后的输出。您需要将其设置为一个命令，该命令接受代表源路径和目标路径的两个参数。值得庆幸的是，该`cp`命令已经接受源路径和目标路径，因此可以直接用作无操作过滤器。

构建后，您可以在 obj/local/[abi]/objs/[module]/__/path-to-file.s 中找到您的程序集文件

由于使用了 LOCAL_FILTER_ASM 功能，还会有另一个扩展名为“.filtered.s”的文件副本，但这不会造成任何伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:44:55.387

粗略的解决方法：将 -S 放入 LOCAL_CFLAGS；运行然后 ndk-build 将失败，但检查在 ./obj/local/armeabi/objs-debug/ 创建的 .o 文件，您可能会发现它包含程序集:-)

# javascript - 绘制贝塞尔线的最佳方法

> ID：10120533
> 
> 赞同：1
> 
> 时间：2012-04-12T09:04:51.077
> 
> 标签：javascript, flash, html, canvas, svg

我有一个设计难题。

想象一下新的 Facebook 时间线，上面附有许多按时间顺序排列的帖子。但是，我需要制作一条*随机*曲线，而不是一条直线，并将内容放在它上面，如下所示： ![在此处输入图像描述](../Images/9604e05c5e67756efc361b7d55b144fa.png)

复杂性的出现是因为随着用户滚动加载更多帖子（facebook/google 图像样式），所以这条线几乎是无穷无尽的。

据我所知，我的选择是：

1.  SVG - 旧浏览器的支持不佳
2.  Flash 层 - 嵌入会很大并导致性能问题
3.  画布 - 再次，画布会很大，可能会导致性能问题

**问题**

是否有任何跨浏览器 gfx 库可以做到这一点，最好支持 IE7/8？还是有一种更聪明的方法可以做到这一点，而我可能会忽略它？

**编辑：回答** 见下文，拉斐尔被证明是我发现的最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:05:31.753

通过[Raphaël](http://raphaeljs.com/)使用 SVG - 它支持 IE6+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T21:58:41.547

还要研究 Catmull Rom 曲线

[http://www.irunmywebsite.com/raphael/additionalhelp.php?v=2&q=catmullromspline](http://www.irunmywebsite.com/raphael/additionalhelp.php?v=2&q=catmullromspline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:03:44.990

如果放置是可预测的和静态的，您可以使用预渲染曲线段作为常规背景。它适用于所有事情，并且很容易实现。

如果你想变得花哨，你可以存储每个曲线段所需的平移，并随机选择那些让你保持在设定宽度内的平移。

# c# - 检查内部异常的类型

> ID：10120534
> 
> 赞同：19
> 
> 时间：2012-04-12T09:04:52.077
> 
> 标签：c#

在我的代码中，我遇到了`System.Reflection.TargetInvocationException`抛出 a 的情况。在一种特定情况下，我知道我想如何处理根异常，但我想抛出所有其他异常。我可以想到两种方法，但我不确定哪种方法更好。

1.

```
try
{
    //code
}
catch (System.Reflection.TargetInvocationException ex)
{
    if (typeof(ex.InnerException) == typeof(SpecificException))
    {
        //fix
    }
    else
    {
        throw ex.Innerexception;
    }
} 
```

2.

```
try
{
    //code
}
catch (System.Reflection.TargetInvocationException ex)
{
    try
    {
        throw ex.InnerException;
    }
    catch (SpecificException exSpecific)
    {
        //fix
    }
} 
```

我知道抛出异常通常很慢，所以我觉得第一种方法可能会更快。或者，有没有我没有想到的更好的方法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-12T09:20:22.363

您提出的每个解决方案都有自己的问题。

第一种方法检查内部异常的类型是否*正是*您所期望的类型。这意味着派生类型将不匹配，这可能不是您想要的。

正如 Dan Puzey 所提到的，第二种方法用当前堆栈位置覆盖内部异常的堆栈跟踪。销毁堆栈跟踪可能会破坏您修复错误所需的一条线索。

解决方案基本上是 DarkGray 发布的，有尼克的建议和我自己的附加建议（在 中`else`）：

```
try 
{ 
    // Do something
} 
catch (TargetInvocationException ex) 
{ 
    if (ex.InnerException is SpecificException) 
    { 
        // Handle SpecificException
    }
    else if (ex.InnerException is SomeOtherSpecificException)
    {
        // Handle SomeOtherSpecificException
    }
    else 
    { 
        throw;    // Always rethrow exceptions you don't know how to handle.
    } 
} 
```

如果你想重新抛出一个你无法处理的异常，不要`throw ex;`因为这会覆盖堆栈跟踪。而是使用`throw;`which 保留堆栈跟踪。它的基本意思是“我实际上并不想输入这个`catch`子句，假装我从未发现异常”。

**更新： C# 6.0 通过***Exception Filters*提供了更好的语法：

```
try
{
    // Do something
}
catch (TargetInvocationException ex) when (ex.InnerException is SpecificException)
{
    // Handle SpecificException
}
catch (TargetInvocationException ex) when (ex.InnerException is SomeOtherSpecificException)
{
    // Handle SomeOtherSpecificException
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:12:46.097

您的#2 绝对是一个有趣的解决方案！

不过，您确实需要小心：当它第一次*被捕获*`TargetInvocationException`时，它通常会被另一个组件抛出。如果您要销毁它包含的某些信息（例如堆栈跟踪），因为您要从不同的位置重新抛出它。 *`InnerException``throw ex.InnerException`*

 *所以在你提出的两个中，我肯定会建议使用#1。我不知道您所拥有的结构中的替代方案。但是，InnerException 最初会在其他地方抛出 - 值得研究是否有更优雅的地方来处理这个失败，更接近抛出异常的地方。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T09:09:23.570

```
try 
{ 
    //code 
} 
catch (System.Reflection.TargetInvocationException ex) 
{ 
    if (ex.InnerException is SpecificException) 
    { 
        //fix 
    } 
    else 
    { 
        throw ex.InnerException; 
    } 
} 
```

或者

```
try 
{ 
    //code 
} 
catch (System.Reflection.TargetInvocationException ex) 
{ 
    SpecificException spExc = ex.InnerException as SpecificException;
    if (spExc != null) 
    { 
        bla-bla spExc 
    } 
    else 
    { 
        throw ex.InnerException; 
    } 
} 
```

或者

```
try 
{ 
    //code 
} 
catch (System.Reflection.TargetInvocationException ex) 
{ 
    if (ex.InnerException.GetType() == typeof(SpecificException)) 
    { 
        //fix 
    } 
    else 
    { 
        throw ex.InnerException; 
    } 
} 
```*

# file - SQLCMD 使用 -o 追加文件

> ID：10120536
> 
> 赞同：2
> 
> 时间：2012-04-12T09:05:01.387
> 
> 标签：file, unicode, append, sqlcmd

我正在使用 sqlcmd 使用 -o 运算符将查询写入文件。我想将多个文字附加到同一个文件中，但是使用 >> 不会生成 unicode 文件并会产生特殊字符的问题......

运算符 >> 正确附加文件，但我需要 -o -u 来获取正确的字符。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T10:23:50.027

命令行选项`-f 65001`使用代码页 65001 将文件格式更改为 Unicode（带签名的 UTF-8）。

# visual-studio-2010 - DefaultWorkItem 不允许组中的分配给

> ID：10120538
> 
> 赞同：0
> 
> 时间：2012-04-12T09:05:11.097
> 
> 标签：visual-studio-2010

我使用 TFS Power Tools 创建了一个新的流程模板。我添加了一个组 [project]\Developers。我更改了任务类型的类型定义，以便“分配给”现在有 2 条规则：

1.  允许现有值
2.  ALLOWEDVALUES ([project]\Developers in list)

现在，当我创建默认工作项并打开“分配给”组合时，它会显示“$$PROJECTNAME$$\Developers。如果我选​​择此选项，请上传模板并尝试创建团队项目，助手会出现以下错误：

> TF26214: 无法保存工作项。有错误的字段：分配给
> 
> TF237086: 无法保存工作项，因为至少一个字段包含不允许的值。

如果我删除了默认工作项，则成功创建了团队项目，我可以使用 Assinged To 中的 Developers-group 手动添加一个新工作项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:28:18.503

[在这个问题之后看到你的这个问题](https://stackoverflow.com/questions/10174068/resolve-users-group-membership-in-assignedto-on-work-item-queries/10216714#10216714)我并不感到惊讶

答案仍然相同：您不能将组用于“分配给”字段。

# c# - 在 DataTable 上使用通用列表会导致更少的性能开销吗？

> ID：10120540
> 
> 赞同：2
> 
> 时间：2012-04-12T09:05:18.863
> 
> 标签：c#, asp.net, datatable, generic-list

我是通用列表的忠实粉丝，并且在我从事的任何项目中都使用它们。但我目前正在处理由外部方编写的另一个项目，发现页面加载速度很慢。在某些情况下，页面加载只需 2 秒多一点。

通过初步调查，大多数页面都散布着大量的数据表，这些数据表存储了 1000 多行数据。我原以为声明和设置 DataTable 列会增加开销。

现在我只是质疑如果我要使用通用列表 (List) 并使用 LINQ 过滤所需数据，性能滞后可能会减少。

我知道可能还有其他问题会导致页面加载缓慢，但看到通过 DataTables 处理大量数据似乎有点过头了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:08:27.647

如果有*几个* `DataTable`对象，每个对象都有数千行，那么这些对象是否会在每个页面获取时填充？如果是这样，我并不感到惊讶它需要一段时间 - 并且简单地使用列表不会有帮助，因为我预计瓶颈会在多个查询中获取大量数据。IMO，在那里创建 a 的开销`DataTable`可能微不足道。（我通常也更喜欢使用列表等，但出于清洁原因而不是性能。）

当然，您应该真正*分析*慢速页面以找出瓶颈所在，而不是猜测。如果这是一个 MVC 项目，请查看[MiniProfiler](http://miniprofiler.com/)。

# asp.net-mvc-3 - 在服务器端检测 MVC3 中的客户端方向

> ID：10120541
> 
> 赞同：0
> 
> 时间：2012-04-12T09:05:24.930
> 
> 标签：asp.net-mvc-3

在 CSS 中，您可以在客户端（IPhone，...）更改其方向时修改您的类

@media 仅屏幕和（方向：纵向）

有没有办法检测 MVC3 应用程序中的这种变化？

我正在搜索请求参数或标头值，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:08:49.097

MVC 站点背后的代码是服务器端的，显示的方向是客户端的问题。HTTP 标头中不会有任何关于屏幕方向的信息，因为它们是从服务器发送到客户端的。因此，服务器无法知道有关客户端显示的任何信息，因此仅使用 MVC 是不可能的。

正如您所说，唯一可用的方法是[javascript](https://stackoverflow.com/questions/4917664/detect-viewport-orientation-if-orientation-is-portrait-display-alert-message-ad)或[CSS 媒体查询](https://stackoverflow.com/questions/5719077/css-orientation-media-query)。

# javascript - 如何在 Asp.net 中使用 java 脚本将参数传递到同一页面

> ID：10120543
> 
> 赞同：4
> 
> 时间：2012-04-12T09:05:45.320
> 
> 标签：javascript, asp.net

如何在 Asp.net 中使用 java 脚本将参数传递到同一页面

`top.location.href = '/IFGE/DeleteAllPrice/' + id;`

可以很好地重定向到其他页面，但不能用于重定向到同一页面

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:11:56.800

```
window.location.href = window.location.href + "?ID=" + someid ; 
```

您需要附加 window.location.href

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:12:02.960

如果我理解正确，您是否尝试刷新/重新加载页面？

尝试其中之一：

*   window.location.reload();
*   历史.go(0);
*   window.location.href=window.location.href;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-20T20:27:32.803

如果页面 url 已经有“？”怎么办？或包含一些参数。所选答案将导致 URL 格式错误，因为它只是附加到一些现有查询。改为这样做；

```
window.location.href = window.location.href.split("?")[0] + "?ID=" + someid ; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T09:25:53.860

Its better to Use AJAX with http - Post method, and post parameter to the Server.

Something like: (Do Not copy and paste below code. Please research more on this procedure)

```
var myObject = new Object();
myObject.FirstName = "david";
myObject.LastName = "Jones";
XmlHttpRequest vXHRequest = new XmlHttpRequest();
..
..
..
vXHRequest.send(myObject); 
```

in asp.net aspx page page_load,

```
Dictionart dict = JavaScriptSerializer.DeSerialize<Dictionary>(Request.Params["myObject"]); 
```

# android - 检测Android中的重叠路径

> ID：10120550
> 
> 赞同：6
> 
> 时间：2012-04-12T09:06:07.677
> 
> 标签：android

![在此处输入图像描述](../Images/b223d39b091422dfcb3aa776e920a447.png)我想知道是否有某种方法可以检测当前绘制的路径是否接触/跨越现有路径。现有路径要么是绘制的，要么是背景图像的一部分。如果在当前路径完全绘制*后*我能够找到它，这也会有所帮助。在最坏的情况下，我可以逐像素检查两条路径是否接触吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:10:25.973

您可以将线条保存在列表中，然后检查您正在绘制的线条与列表中的每条线条是否相交。您会在 stackoverflow 上找到很多关于如何检测线交点的答案。

```
 ArrayList<Pair<Pair<Integer,Integer>,Pair<Integer,Integer>>> lineList = new ArrayList<Pair<Pair<Integer, Integer>, Pair<Integer, Integer>>>();

    // add all your lines to the list
    // lineList.add(line);

    // handle the last line
    int startX = 10;
    int startY = 20;
    int endX = 40;
    int endY = 50;

    Pair<Integer,Integer> lineStart = new Pair<Integer, Integer>(startX, startY);
    Pair<Integer,Integer> lineEnd = new Pair<Integer, Integer>(startX, startY);
    Pair<Pair<Integer,Integer>,Pair<Integer,Integer>> lastLine = new Pair<Pair<Integer, Integer>, Pair<Integer, Integer>>(lineStart, lineEnd);

    for(Pair<Pair<Integer,Integer>,Pair<Integer,Integer>> l: lineList){
        // if "lastLine" intersects "l" do you stuff
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:14:46.027

使用路径来定义线条，然后将 android.graphics.Region 设置为该路径。稍后检查所有区域是否相交

```
region1.op(region2, Op.INTERSECT); 
```

# c++ - 从lua返回一个没有全局的表到C

> ID：10120552
> 
> 赞同：3
> 
> 时间：2012-04-12T09:06:26.367
> 
> 标签：c++, variables, lua, global, lua-table

我在 C 中有一个名为 GetParameter 的方法。我想从 Lua 中使用它。这个方法将再次向 Lua 返回一些值。

我在 C 中构建表格的方式是最常见的方式：

```
lua_newtable(L);
for (int i = 0; i < parameters; i++)
{
    lua_pushnumber(L,i);
    lua_pushstring(L,myParameter);
    lua_settable(L,-3);
} 
```

在我见过的所有示例中，在此之后，您必须使用 lua setGlobal 设置结果表：

```
 //set name for the result
 lua_setglobal(ptLuaState, "resultTable"); 
```

使用这种方法，我可以访问 lua 中的结果表，如下所示：

```
GetParameter("V111","V111Parameter")
printTable(resultTable); 
```

这样做一切都很顺利，但是，还有另一种方法可以在不使用 setglobal 的情况下做到这一点？我试图做类似的事情：

```
local mytable=GetParameter("V111","V111Parameter"); 
```

但不起作用。使用全局变量更好？如何在不设置 setglobal 的情况下获取结果表？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:25:18.650

不要调用 setglobal 并从 C 函数返回 1。这告诉 lua 您的函数有 1 个返回值，并且您的最后一个示例将起作用。

# c# - 移动锁定的文件

> ID：10120559
> 
> 赞同：1
> 
> 时间：2012-04-12T09:06:46.943
> 
> 标签：c#

我正在尝试移动（File.Move）锁定的 .dll 文件以执行应用程序更新。File.Move 方法无异常执行。但是文件没有移动。我的意思是在执行 File.Move 方法后，我有同一个文件的两个副本：在目标文件夹和源文件夹中。这是代码:)

```
File.Move(fileName, newFileName); 
```

有人可以解释这个原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T09:11:35.070

File.Move 跨卷按顺序执行两个操作：

1.  文件复制
2.  文件删除

似乎第一个成功，第二个默默地失败了。结果如预期。

请注意：http: [//msdn.microsoft.com/en-us/library/system.io.file.move.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)

> 如果您尝试跨磁盘卷移动文件并且该文件正在使用中，则该文件将复制到目标但不会从源中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:12:19.810

通常在这种情况下，您要么有一个不需要任何应用程序 DLL 的单独更新过程，因此您生成更新程序，它可以移动它喜欢的所有内容、执行更新并重新启动应用程序。

或者，像安装程序一样，您将文件更改提交到下次重新启动时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:13:53.903

`File.Move`方法将首先将文件复制`fileName`到文件' `newFileName`'。第一步成功后，它将删除文件“ `fileName`”。

现在，如果文件 ' `fileName`' 已经打开/锁定，它将无法删除该文件。

# ruby - 如何使用 Ruby 1.9.3 在 Aptana 3 中获得调试支持？

> ID：10120560
> 
> 赞同：4
> 
> 时间：2012-04-12T09:06:46.847
> 
> 标签：ruby, aptana, aptana3, ruby-1.9.3, ruby-debug

我正在使用以下配置运行：

*   Windows XP 媒体中心版 SP3

*   Aptana Studio 3，构建：3.0.9.201202141038

*   ruby 1.9.3p125 (2012-02-16) [i386-mingw32]（从 ruby​​installer-1.9.3-p125.exe 安装）

*   DevKit（从 DevKit-tdm-32-4.5.2-20111229-1559-sfx-4-20-6.exe 安装）

*   RubyGems 1.8.21

我无法安装 ruby​​-debug（即使在检查了[https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-gems_fails_comspec_autorun](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-gems_fails_comspec_autorun)中指定的 COMSPEC 和 AutoRun以解决“错误：无法构建 gem 原生扩展”）但随后被指向[http://rubygems.org/gems/debugger](http://rubygems.org/gems/debugger)，它安装成功。

不幸的是，Aptana 仍然需要 ruby​​-debug！

有人可以建议我如何进行排序吗？

谢谢。

* * *

好的，所以我被引导到 linecache19-0.5.13-4-20-6.gem 和 ruby​​-debug-base19-0.11.26-4-20-6.gem。从保存下载的 gem 的目录中成功下载并安装了 linecache，但使用 ruby​​-debug-base 没有成功。然后发现建议的细节：

```
> gem install ruby-debug-base19-0.11.26-4-20-6.gem -- --with-ruby-include=C:\Ruby193\include\ruby-1.9.1\ruby-1.9.3-p125 
```

我不得不承认我对 gem 知之甚少，以至于我不知道为什么会这样，或者空的“--”应该完成什么，但它确实起作用了：

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
Successfully installed ruby-debug-base19-0.11.26
1 gem installed
Installing ri documentation for ruby-debug-base19-0.11.26...
Installing RDoc documentation for ruby-debug-base19-0.11.26... 
```

Aptana 仍然抱怨缺少 ruby​​-debug-ide，所以：

```
> gem install ruby-debug-ide19
Fetching: ruby-debug-ide19-0.4.12.gem (100%)
Successfully installed ruby-debug-ide19-0.4.12
1 gem installed
Installing ri documentation for ruby-debug-ide19-0.4.12...
Installing RDoc documentation for ruby-debug-ide19-0.4.12... 
```

万岁！除了...

Aptana 现在失败了：

> 在“启动 YANG.rb”期间发生内部错误。
> 无法连接到端口 3818 上的调试器

所以我然后尝试：

```
>gem install ruby-debug19
Fetching: ruby-debug19-0.11.6.gem (100%)
Successfully installed ruby-debug19-0.11.6
1 gem installed
Installing ri documentation for ruby-debug19-0.11.6...
Installing RDoc documentation for ruby-debug19-0.11.6... 
```

唯一的区别是每次我尝试调试时报告的端口号都会发生变化。我跑了

```
>netstat -a 
```

并且每次在调试运行之后才会列出新端口，例如

```
Proto  Local Address          Foreign Address        State
TCP    THE-BEAST:3818         THE-BEAST:0            LISTENING 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T20:49:25.317

我已经下载并运行了一次rubymine(4.0.3)的调试模式。

当您激活调试模式时，ruby-debug-ide 已正确安装。我不得不取消一次挂起的进程并再次启动调试模式。

所以现在一切都在使用 Aptana。

[（我使用http://railsinstaller.org](http://railsinstaller.org)安装了 rails并且使用的是 Windows 7（64 位），但我认为这无关紧要）。

根据 RubyMine 的日志，这里是安装的 gem：（我猜顺序很重要，但我不确定）。

*   安装的gem：ruby-debug-ide-0.4.17.beta9.gem
*   安装的gem：ruby-debug-base19x-0.11.30.pre10.gem
*   安装的gem：linecache19-0.5.13.gem

我在没有 RubyMine 的情况下重新检查了以下命令：

> gem install ruby​​-debug-ide --pre
> 
> 宝石安装 ruby​​-debug-base19x --pre

# emacs - Emacs 备忘单？

> ID：10120565
> 
> 赞同：2
> 
> 时间：2012-04-12T09:07:16.600
> 
> 标签：emacs, elisp

我想为 Emacs 做一个参考表。我有几个问题：

*   Emacs 上是否有任何明确的备忘单可供参考？

*   如果没有，我怎样才能自己制作它，它应该是什么样子？

    例如，它应该是纯文本、PDF、信息文件、.org 文件还是 elisp 代码？

*   你会在其中包括什么？

    常用命令、如何使用文档、常用术语、惯用技巧、最佳实践和漂亮技巧、常见错误和常见问题解答，也许是 elisp 基础知识？

*   如何将其与 Emacs 集成并使其尽可能易于调用？

    由于备忘单是 Emacs 手册的密集替代品，因此它应该比手册更容易查阅。

欢迎任何想法和想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T14:54:08.140

Emacs 手册很好，但它并不以简洁而著称，而这正是你（和我！）想要的。

搜索范围很广，这是我找到的关于 emacs 的最好和最全面的备忘单：[http ://www.ast.cam.ac.uk/~vasily/idl/emacs_commands_list.html](http://www.ast.cam.ac.uk/~vasily/idl/emacs_commands_list.html)

它有点长，可能包含一些不相关的部分，但总的来说是一个很好的参考。

您的备忘单将非常受欢迎，因为自 2002 年以来此表在撰写本文时尚未更新，但我认为这是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:56:14.737

前段时间我正在为自己寻找一份备忘单，但我没有找到一个令我满意的。这可能是由于问题的性质。

我必须适应的第一件事是迷你缓冲区（emacs 窗口的底线）。

正如@Shep 已经提到的，Emacs 有一个很好的自文档。最有用的可能是在开始时`C-h f`（即按 Crtl-h 然后按 f）。这将提示您输入函数名称（以我的拙见，emacs 函数名称的命名非常好）。您可以使用星号 ( `*`) 作为通配符。

另一个很好的查找方法是`C-h a`，它会提示您输入单词或正则表达式。

此外值得注意的是，它`M-x`使您能够（几乎）调用 emacs 必须提供的任何功能。所以，如果你忘记了一个键绑定，但记住了函数名，那么`M-x functionname <RET>`就会调用这个函数。

同样值得注意的是，emacs 已经有一种备忘单功能：`C-h b`，它列出了所有当前分配的键绑定（当然可能不是您想要的顺序）。

然后当然是打开和保存文件。复制和粘贴（*复制*和*剪切*）。导航命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:19:52.490

堆栈溢出可能是参考基本语法的最佳起点，请参阅[这篇文章](https://stackoverflow.com/questions/559634/emacs-lisp-function-guide)。

Emacs 应该是“自我记录的”。在 emacs 中，您有：

*   `C-h k`告诉你钥匙的作用，
*   `C-h f`对于函数
*   `C-h v`对于变量

这是一个很好的起点。

# java - 如果我可以扩展 Java 枚举，我会做 X

> ID：10120568
> 
> 赞同：3
> 
> 时间：2012-04-12T09:07:36.227
> 
> 标签：java, jakarta-ee, enums

我有一个旨在用于**未来内部身份验证库**的类（我知道已经有这样的现有库）。因此，为了让开发人员**在未来的许多项目中使用它以利用这个库****尽可能简单，**我想到他们定义了一个带有角色的枚举，简单的例子，角色 sysadmin：

 **```
// Not a project specific class, but Auth is intended to be part of the library
class Auth {

        public static enum AUTH_ROLE {
            sysadmin( new Rule(AdminController.class, "*") );

            private String name;

            AUTH_ROLE() {
                name = this.name();
                Roles.add( name );
            }
            AUTH_ROLE(String name) {
                this.name = name;
                Roles.add( name );
            }

            AUTH_ROLE(Rule rule) {
                name = this.name();
                Roles.add( name, rule );
            }
            AUTH_ROLE(String name, Rule rule) {
                this.name = name;
                Roles.add( name, rule );
            }
            public String getName() {
                return name;
            }
        }

        public boolean hasRole(AUTH_ROLE role) {

            String[] usersRoles = getLoggedInUsersRoles();

            for ( String userRole : usersRoles ) {
                if ( role.getName().equals(userRole) )
                    return true;
            }

            return false;
        }

    } 
```

**现在**，如您所见，**枚举 AUTH_ROLE**当前**定义** 在**应该**是非**项目**特定的类中，**但 Auth 类**应该是**许多项目要使用**的库的一部分。

 *******问题是，在当前的设计中，我不得不在同一个类 Auth 中定义**角色及其规则**，以便定义方法 hasRole ( AUTH_ROLE ...) ...

我想做的是让这个枚举及其中的所有当前逻辑为**所有项目定义****一次**，并允许新项目中的开发人员能够**简单地**定义角色及其规则。

 ****我认为存在的问题是您不能在 Java 中扩展枚举，因此枚举逻辑中的所有内容（虽然简单，但不是重点！）实际上必须为每个新项目重复，并且可能实现库中提供的接口.

如果可以扩展，那么一个新的枚举将能够简单地定义这些角色，即：

```
public enum AUTH_ROLE extends authlibrary.Auth.AUTH_ROLE {
    sysadmin( new Rule(AdminController.class, "*") );
} 
```

正如我刚才提到的，**另一个选项是为枚举****定义一个**要实现的接口，尽管您可以理解**我们最终****为每个新项目**都有一个实现，就像复制和粘贴一样简单。

我对在调用方法之前来回**将内容转换为字符串或数字不感兴趣，什么不是......这个问题****不是**关于如何**规避***语言*的限制**，而只是同意/接受这是一个限制，否则会导致代码更清晰。

那么，在这种特殊情况下，是否有人同意这一点，扩展/包括另一个枚举会是有益的，这会导致更少的代码？

附言。我可能是个白痴，所以我想保留自称白痴的权利：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T09:19:05.620

问问自己这个问题：为什么需要将其作为枚举？如果您的代码没有处理预定义的、已知的一组永远无法扩展的项目，那么您所拥有的根本不适合枚举，您最好使用扩展预定义基的单例对象班级。

如果你没有使用枚举的有用特性——内置的字符串/序数转换的东西——为什么要使用它们呢？而那些有用的功能在您描述的情况下无法工作，因为它们需要生成需要知道所有枚举值名称的代码，而现在这不可能发生。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T09:10:24.617

我看不出这会有什么价值。我不认为继承或扩展总是答案。如果枚举需要更多值，请添加它们。我不同意代码更干净，或者这代表了语言的严重限制。*************

# javascript - 当用户将鼠标拖到浏览器窗口外并在那里释放时如何获得通知？

> ID：10120569
> 
> 赞同：0
> 
> 时间：2012-04-12T09:07:37.740
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

最好展示一个工作示例：

JQuery 滑块具有我想要的功能。当您单击滑块手柄并按下鼠标按钮时，将鼠标移到当前浏览器窗口之外，滑块手柄仍处于选中状态。当您在窗口外释放鼠标时，它会收到通知并被取消选中：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

现在我想知道当鼠标在浏览器窗口之外释放时如何通知控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:17:49.667

你可以尝试类似的东西

```
$('#slider').mouseup(function(){    considering #slider is the id of the slider element
    $(this).mouseout(function(){
        //do something
    })
}) 
```

这能解决您的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:07:31.233

我找到了答案：鼠标事件需要关联`window`而不是单个元素。

# windows-phone-7 - 如何在列表框中找到特定的堆栈面板并将超链接按钮动态添加到该堆栈面板？

> ID：10120572
> 
> 赞同：0
> 
> 时间：2012-04-12T09:07:43.357
> 
> 标签：windows-phone-7

我想知道如何在列表框中找到特定的堆栈面板，并希望从 c# 代码隐藏动态地将超链接按钮添加到该堆栈面板（位于列表框内）。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:36:05.310

使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)类遍历 ListBox 内的项目层次结构，直到找到具有匹配名称的 StackPanel。这是[一个示例问题](https://stackoverflow.com/questions/6439518/using-visualtreehelper-on-listbox-cant-get-listboxitems)，请查看代码片段的已接受答案。

至于动态添加项目，[这个问题](https://stackoverflow.com/questions/3893928/silverlight-4-dynamically-add-a-hyperlinkbutton-to-a-stackpanel)涵盖了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:41:12.443

你也可以像这样找到

```
ListBoxItem selItem = (ListBoxItem)(listboxWeight.ItemContainerGenerator.ContainerFromIndex(listboxWeight.SelectedIndex));

StackPanel weightpanel = (StackPanel)selItem.Content;

var panel1 = weightpanel.Children[0] as HyperlinkButton; 
```

# android - Android 自定义 XML 解析器无法解析 android 命名空间

> ID：10120579
> 
> 赞同：5
> 
> 时间：2012-04-12T09:08:10.733
> 
> 标签：android, string, xml-namespaces, xmlpullparser

我想获得使用 XmlResourceParser 解析自定义 android 标签的正确方法。我正在使用带有 android 插件的 Eclipse 3.6，我希望`name`使用`strings.xml`.

这是文件夹`index.xml`中正在解析的内容。`res/xml/`

```
<?xml version="1.0" encoding="utf-8"?>
<Index xmlns:android="http://schemas.android.com/apk/res/android">
<Sheet
    shortName="o_2sq"
    android:name="@string/o_2sq"
    instructions=""
/>
</Index> 
```

这是文件夹`strings.xml`中的`res/values/`文件

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="o_2sq">Organize two squares</string>
</resources> 
```

`index.xml`以及使用 XmlResourceParser解析第一个的代码片段：

```
String name = xpp.getAttributeValue(null, "android:name");
String shortName = xpp.getAttributeValue(null, "shortName"); 
```

变量`name`包含`null`，但`shortName`包含`"o_2sq"`。我也尝试了以下但没有成功：

```
String name = xpp.getAttributeValue("android", "name"); 
```

编写句子以使变量名称包含的正确方法是什么`"Organize two squares"`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:21:09.457

试试这个：

```
String name = xpp.getAttributeValue("http://schemas.android.com/apk/res/android", "name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:49:07.183

我发现克服这个问题的最佳解决方案。

```
String s = xpp.getAttributeValue("http://schemas.android.com/apk/res/android", "name");
String name = null;
if(s != null && s.length() > 1 && s.charAt(0) == '@') {
  int id = Integer.parseInt(s.substring(1));
  name = getString(id);
} else {
  name = "";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-30T11:55:54.950

```
final String NAMESPACE_ANDROID = "http://schemas.android.com/apk/res/android";
final int VALUE_NOT_SET = -1;
int resId = parser.getAttributeResourceValue(NAMESPACE_ANDROID, "name", VALUE_NOT_SET);
String value = null;
if (VALUE_NOT_SET != resId) {
    value = context.getString(resId);
} 
```

我认为上面的代码可以帮助你。

# javascript - HTMLCollection 对象扩展？

> ID：10120581
> 
> 赞同：3
> 
> 时间：2012-04-12T09:08:13.527
> 
> 标签：javascript, dom

我发现 HTMLOptionsCollection 对象继承了 HTMLCollection 的属性和方法。

```
HTMLOptionsCollections->HTMLCollection->Object->null 
```

是否有任何其他类型也继承 HTMLCollection？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:19:43.190

您会在 HTML5 规范中找到应该从 HTMLCollection 继承的其他 DOM 接口：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#collections-0](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#collections-0)

但是，这些对象不一定在当前浏览器中实际实现。

# javascript - 禁用文本区域javascript中的多个空格

> ID：10120585
> 
> 赞同：0
> 
> 时间：2012-04-12T09:08:31.030
> 
> 标签：javascript

为了避免在文本区域中输入多个空格，我正在调用一个函数 on `onCLick`， on keyup 并编写下面的代码

```
var val = document.getelemntByID('trmp');
val.value = val .value.replace(/ +(?= )/g,''); 
```

这在 Firefox 中运行良好，在 IE7 中运行良好，但会导致一些其他问题，例如选择一个单词并删除它会删除整个文本区域内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:51:02.680

我建议不要一直重写 textarea 的值，因为它可能是错误的。如果前一个字符是空格，只需禁用输入空间：

```
$(function(){
    var $tA=$('#temp');
    $tA.keydown(function(e){
        var cursorPos = getCursorPosition($tA.get(0));
        if(e.which === 32 && cursorPos > 0 && $tA.val()[cursorPos-1] === ' '){
           return false;            
        }
    });
});

getCursorPosition = function(el) {
        var pos = 0;
        // IE Support
        if (document.selection) {
            el.focus();
            var Sel = document.selection.createRange();
            var SelLength = document.selection.createRange().text.length;
            Sel.moveStart('character', -el.value.length);
            pos = Sel.text.length - SelLength;
        }
        // Firefox support
        else if (el.selectionStart || el.selectionStart == '0')
            pos = el.selectionStart;

        return pos;
    } 
```

[​http://jsfiddle.net/y6unN/2/](http://jsfiddle.net/y6unN/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:52:34.037

仅将正则表达式用于空格。添加键码条件。

检查这个小提琴[http://jsfiddle.net/hikki/FNJmE/](http://jsfiddle.net/hikki/FNJmE/)

# eclipse - 多模块中的ear：构建路径指定执行环境J2SE-1.4

> ID：10120587
> 
> 赞同：0
> 
> 时间：2012-04-12T09:08:34.633
> 
> 标签：eclipse, maven, ear

我有一个多模块 Maven 项目。当我将它导入 eclipse helios 时，我得到了正确的 JRE 1.6 用于战争和 ejb 模块。但是耳模块的默认 1.4。

以下是在根 pom 中指定的

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>          
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
        </configuration>
    </plugin>
</plugins> 
```

我需要添加什么来获得 1.6 的耳模块？

（这是[警告的变体 - 构建路径指定执行环境 J2SE-1.4](https://stackoverflow.com/questions/3138384/java-warning-build-path-specifies-execution-environment-j2se-1-4)，它具有除 ear-packaging 之外的正确解决方案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:17:59.370

更新

*   m2e（Eclipse 的 Maven 集成）到至少 1.0.2
*   m2e-wtp（用于 WTP 的 Maven 集成）到至少 0.15.2

（正如 Michal Kalinowski 在上面指出的那样。）

# emacs - 如何在 Emacs 中获得 compose key 工作？

> ID：10120590
> 
> 赞同：5
> 
> 时间：2012-04-12T09:08:42.090
> 
> 标签：emacs

我正在使用带有 emacs23 的 Debian 测试（wheezy）。我将撰写键映射到正确的 Windows 键（Multi_key）。compose 键在 shell 中有效，但在 emacs 中无效。我如何告诉emacs尊重它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T13:51:58.270

我沉迷于 compose 键，并且在开发 Emacs 时使用 Debian，所以如果 compose 键在您的情况下不起作用，这是一个奇怪的错误。请通过 Mx report-emacs-bug 报告它，提供尽可能多的详细信息，以便我们尝试重现它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T18:44:59.847

根据我的电子邮件，[Stefan](https://stackoverflow.com/users/1283394/stefan)推测，我的自定义 ~/.XCompose 文件中缺少 'include "%L"' 行：

> IOW 我的水晶球告诉我您的 .XCompose 文件缺少“包含“%L””，因此它会覆盖默认值而不是扩展它。而且你在 Iceweasel 中没有注意到它，因为你没有设置 envvar GTK_IM_MODULE=xim，所以这些应用程序实际上并没有使用你的 .XCompose 文件。

将 include "%L" 添加到我的 ~/.XCompose 解决了这个问题。（实际上我是去安装[Kragen 著名的 .XCompose 文件](https://github.com/kragen/xcompose)，而不是我自制的。）

# php - Eclipse中的PHPUnit

> ID：10120594
> 
> 赞同：1
> 
> 时间：2012-04-12T09:08:48.797
> 
> 标签：php, eclipse, phpunit

在eclipse indigo（zend php build）中遇到了PHPUnit的麻烦。

找到[了这篇文章](https://stackoverflow.com/questions/903769/how-do-you-add-a-php-framework-to-code-completion-assist-in-eclipse-pdt-and-can)，但我一生都无法获得代码辅助工作。

尝试将包含路径添加到项目，将库添加到全局首选项及其组合。

非常感谢任何提示。

# java - 如何将 Comparator 类用于对象的双重数据标记？

> ID：10120596
> 
> 赞同：0
> 
> 时间：2012-04-12T09:08:59.267
> 
> 标签：java, comparison, comparator, comparable

我想订购充满 myClass 的矢量，如下所示：

```
class MyClass
{

double distance;
String name;

 public void MyClass()
 {}

} 
```

然后我的向量是关于：

```
MyVector<MyClass>myVector = new MyVector<MyClass>();

MyVector.add(myClass1);
MyVector.add(myClass2);
MyVector.add(myClass3);
//Etc.... 
```

我想按**距离**数据标签对我的矢量元素进行排序。我尝试使用比较器类，但失败了，请有人可以为我实现一个适用于这种情况的比较器类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:12:35.740

你是这样做的吗？好吧，请注意有一些变化。

```
List<MyClass> myVector = new Vector<MyClass>();

myVector.add(myClass1);
myVector.add(myClass2);
myVector.add(myclass3);

Collections.sort(myVector, new Comparator<MyClass>() {
    public int compare(MyClass one, MyClass two) {
        return Double.valueOf(one.getDistance()).compareTo(two.getDistance());
    }
}); 
```

1.  `List`在分配的左侧使用 a ，因为您应该始终针对接口进行编程。
2.  我已将 getter 和 setter 方法添加到您的`MyClass`.

然而，另一种选择是让你的班级`Comparable`.

```
class MyClass implements Comparable<MyClass> {
    private double distance;
    private String name;

    @Override
    public int compareTo(MyClass other) {
        return Double.valueOf(this.distance).compareTo(other.distance);
    }

    ...
    getters and setters
    ...
} 
```

然后你可以简单地写`Collections.sort(myVector)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:17:09.400

比较器很容易实现。它会是这样的：

```
public class MyComparator implements Comparator<MyClass> {

public int compare(MyClass o1, MyClass o2) { 

if(o1.getDistance() > o2.getDistance()) {
return 1;
} else if(o1.getDistance() < o2.getDistance()) { 
return -1;
}

//they are equal 
return 0;

}
} 
```

然后，您只需执行以下操作：

```
Collection.sort(myVector, new MyComparator()); 
```

你有你的矢量排序:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:29:48.850

您可以在类中定义比较器类，`MyClass`如下所示：

```
public static class Comp implements Comparator<MyClass> {
    public int compareTo(MyClass v1, MyClass v2) {
        if (v1.distance < v2.distance) {
            return -1;
        } else {
            return v1.distance > v2.distance ? 1 : 0;
        }
    }
} 
```

然后您可以简单地使用以下命令对其进行排序：

`Collections.sort(myVector, new MyClass.Comp());`

# c# - MVC 模型属性

> ID：10120598
> 
> 赞同：2
> 
> 时间：2012-04-12T09:09:04.010
> 
> 标签：c#, asp.net-mvc, model-binding

我的最终问题是——模型绑定器应该填充**所有**模型，还是只填充正在发布的位，让控制器填充其余部分？

例如，我在我的系统中添加一个产品，我希望用户在表单上选择新产品将出现在哪些站点上。因此，在我的模型中，我想填充一个名为“AllAvailableSites”的集合，以呈现供用户选择的复选框。我还需要在帖子上使用任何选定的站点填充模型，以防表单无法验证，并且我需要表示显示初始选择的表单。看来我应该让模型绑定器在模型上设置所选站点，并且（在控制器方法中）我在模型上设置“AllAvailableSites”。听起来对吗？在模型绑定器中设置所有内容似乎更有效，但有人认为这不太正确。

我很感激任何建议；不得不说，网上所有的MVC模型绑定帮助好像都举了很简单的例子，没什么复杂的。

另外，我真的需要方法的 GET 和 POST 版本吗？他们不能只采用相同的视图模型吗？然后我检查我的模型绑定器是否是 GET/POST，并相应地填充所有模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:21:50.057

你的初步结论是正确的。模型绑定器应该只关心创建模型的实例并使用它在操作上下文中可用的值（例如，发布值）填充其属性，然后执行验证。然后，您的控制器负责填充视图所需的任何其他值，例如您的可用站点列表。

我不完全确定您需要单独的 GET/POST 方法是什么意思。如果您正在保存或创建模型的实例，则应该发布，因此 GET 部分似乎无关紧要。除非你的意思是：

```
[HttpGet, ActionName("Edit")]
public ActionResult Edit(MyModel model)
{
   return View(model);
}

[HttpPost, ActionName("Edit")]
public ActionResult SaveEdit(MyModel model)
{
   // validate and save, then
   return View(model);
} 
```

也许您想知道是否可以将它们组合到一个操作中，然后确定他们是否正在查看编辑表单或在操作中发布编辑表单的结果。我强烈建议您不要这样做。有多种原因，但让我们保持不变；不要这样做。

# excel - Excel VBA：将项目从一个数组移动到另一个数组

> ID：10120606
> 
> 赞同：3
> 
> 时间：2012-04-12T09:09:23.963
> 
> 标签：excel, vba

我正在尝试使用绑定到范围的列表框来加速旨在将人力资源分配到位置的应用程序。这很好用——丑陋的部分是使用查找、复制和粘贴将项目从一个数据范围移动到一个或多个范围。

当我从 web 服务检索数据时，我可以通过使用函数将数组打印到范围来获得极快的速度，但我还不知道如何替换查找/剪切/粘贴逻辑。

我现在更新了我以前的帖子，包括我最近的尝试。以一种现在可以按预期工作的方式，但它肯定看起来并不聪明：

### 更新样本

范围看起来像这样（Col BE 中的数据不相关，A 包含密钥）。Day0_lbUsers 是 A1:E5，Day1_lbUsers 是 A28:E30。

```
 A       B       C       D       E
1       15      Foo     Bar     Bas     Nono
2       18      Foo     Bar     Bas     Nono
3       19      Foo     Bar     Bas     Nono
4       196     Foo     Bar     Bas     Nono
5       33      Foo     Bar     Bas     Nono
...
28      32      Foo     Bar     Bas     Nono
29      46      Foo     Bar     Bas     Nono
30      52      Foo     Bar     Bas     Nono 
```

在此示例中，我想将键为 18 的行从 Day0_lbUsers 移动到 Day1_lbUsers。在示例中，我对源代码进行了硬编码，并且没有写回范围，但这不是难点。我很感兴趣是否有更好的方法来传输数组内容。

```
Sub TestRemoveFromArray()
    Dim vSourceArray() As Variant ' source
    Dim vNewSourceArray() As Variant ' source, one key removed
    Dim vTargetArray() As Variant ' target
    Dim vNewTargetArray() As Variant ' target, one item added
    Dim rowSearch As Long, row As Long, col As Long, search As Long, blnFound As Boolean
    search = 18
    vSourceArray = shData.Names("Day0_lbUsers").RefersToRange.Value2 ' 27 rows, 5 columns, key in col 1

    ' loop source to find the row that contains the search key
    For rowSearch = LBound(vSourceArray) To UBound(vSourceArray)
        ' look into col 1 for the key
        If vSourceArray(rowSearch, 1) = search Then
            blnFound = True
            Exit For
        End If
    Next rowSearch

    If Not blnFound Then
        Exit Sub
    End If
    ' we've found the row, so let's get the target
    vTargetArray = shData.Names("Day1_lbUsers").RefersToRange.Value2
    ' a1 needs to be 1 short of a, b1 must be b +1
    ReDim vNewSourceArray(LBound(vSourceArray) To UBound(vSourceArray) - 1, 1 To 5)
    ReDim vNewTargetArray(LBound(vTargetArray) To UBound(vTargetArray) + 1, 1 To 5)

    ' copy original target to new target
    For row = LBound(vTargetArray) To UBound(vTargetArray)
        For col = LBound(vTargetArray, 2) To UBound(vTargetArray, 2)
            vNewTargetArray(row, col) = vTargetArray(row, col)
        Next col
    Next row
    ' reset blnFound
    blnFound = False
    For row = LBound(vSourceArray) To UBound(vSourceArray)
        If row = rowSearch Then
            For col = LBound(vSourceArray, 2) To UBound(vSourceArray, 2)
                vNewTargetArray(UBound(vNewTargetArray), col) = vSourceArray(row, col)
            Next col
            blnFound = True
        Else
            For col = LBound(vSourceArray, 2) To UBound(vSourceArray, 2)
                ' if blnFound was found before, write to the key -1
                vNewSourceArray(IIf(blnFound, row - 1, row), col) = vSourceArray(row, col)
            Next col
        End If
NextRow:
    Next row

    'assign new arrays (return later)
    vSourceArray = vNewSourceArray
    Erase vNewSourceArray
    vTargetArray = vNewTargetArray
    Erase vNewTargetArray

End Sub 
```

### 原帖，已过时

所有数据范围都具有相同的列数 (5) 并被命名。这就是我到目前为止所拥有的；在某些时候，我不得不停止编程并改用伪代码来说明。源和目标数组是用例如创建的

```
vSourceArray = shData.Names("Day0_A").RefersToRange.Value2 ' (1 to 27, 1 to 5)

Private Function MoveUserId(ByRef vSourceArray() As Variant, ByRef vTargetArray() As Variant, lngUserId As Long) As Boolean
    Dim lSearchKey As Long, blnFound As Boolean, col As Long
    Dim vTempArray() As Variant, vRow() As Variant
    For lSearchKey = LBound(vSourceArray) To UBound(vSourceArray)
        If vSourceArray(lSearchKey, 1) = lngUserId Then
            blnFound = True
            Exit For
        End If
    Next lSearchKey
    If blnFound = False Then
        MoveUserId = False
        Exit Function
    End If
    ' extract the row found
    ReDim vRow(1 To 1) As Variant
    vRow(1) = Application.WorksheetFunction.index(vSourceArray, lSearchKey)
    ' now, add an item to targetarray and populate using a function from http://www.cpearson.com
    vTargetArray = CombineTwoDArrays(vTargetArray, vRow) ' does not work

    ' now delete the key in source array
    ' help!  
End Function 
```

除了搜索功能之外，这实际上不起作用。首先是提取一行并将其复制到一个新的、重新调整尺寸的目标数组中。最简单的方法是将目标重新调整为元素 + 1；然后执行类似（伪代码）的操作，将其推到最后：

```
vTargetArray(addedIndex) = vSourceArray(searchIndex) 
```

第二件看起来不太容易的事情是删除一个密钥，但我还没有对网络资源进行过太多调查。

如果你能给我看灯，我将不胜感激。在此先感谢，斯特凡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:30:43.257

我们不需要临时数组来进行组合，但由于您使用的是临时数组`vRow`，所以让我也用一个来说明它是如何工作的:) 请参阅此示例

```
Sub Sample()
    Dim Ar1(), Ar2(), Ar3()
    Dim i As Integer

    Ar1() = Array("A", "B", "C", "D")
    Ar2() = Array("1", "2", "3", "4")

    ReDim Preserve Ar3(1)

    Ar3(1) = Ar1(1)

    'Debug.Print "Ar3 >> "; Ar3(1)

    ReDim Preserve Ar2(UBound(Ar2) + 1)

    Ar2(UBound(Ar2)) = Ar3(1)

    For i = 0 To UBound(Ar2)
        Debug.Print "Ar2 >> "; Ar2(i)
    Next i
End Sub 
```

高温高压

![在此处输入图像描述](../Images/3e08af4c48e56d00e7e101d5a651cb8c.png)

**跟进**

> > > 如果您想尝试一下，可以将一些数据放入例如 Sheet1 A1:E5 和 A6:E8 左右，并创建 vSourceArray = range("A1:E5").Value2 和 vTargetArray() = Range( "A6:E8").Value2 并尝试在两者之间移动数据。这为您提供了与我拥有的类似的数组。– 外部使用 1 小时前

我按照你的建议做了，但采取了稍微不同的方式来实现你想要的。也出于测试目的，如下面的代码中所评论的，我将`lSearchKey`其视为 2

**代码**：

```
Option Explicit

Sub Sample()
    Dim Ar1() As String, Ar2() As String, Ar3() As String
    Dim Rng1 As Range, Rng2 As Range
    Dim ws As Worksheet
    Dim i As Long, j As Long

    Set ws = Sheets("Sheet1")

    With ws
        Set Rng1 = .Range("A1:E5")
        Set Rng2 = .Range("A6:E8")

        '~~> Redim Ar2 and Ar3 arrays
        ReDim Ar2(Rng2.Rows.Count, Rng2.Columns.Count)
        ReDim Ar3(0, Rng2.Columns.Count)

        '~~> Store Range 2 in Ar2
        For i = 0 To Rng2.Rows.Count - 1
            For j = 0 To Rng2.Columns.Count - 1
                Ar2(i, j) = Rng2.Cells(i + 1, j + 1)
                'Debug.Print Ar2(i, j)
            Next j
        Next i

        '~~> Manually setting the Search Key for testing purpose
        Dim lSearchKey As Long
        lSearchKey = 2

        '~~> Adding the relevant data from Ar2 to Ar3
        For i = 0 To Rng2.Columns.Count - 1
            Ar3(0, i) = Ar2(lSearchKey - 1, i)
            'Debug.Print Ar3(1, i)
        Next

        '~~> Redim the 1st Array
        ReDim Preserve Ar1(Rng1.Rows.Count, Rng1.Columns.Count)

        '~~> Store Range 1 in Ar1
        For i = 0 To Rng1.Rows.Count - 1
            For j = 0 To Rng1.Columns.Count - 1
                Ar1(i, j) = Rng1.Cells(i + 1, j + 1)
                'Debug.Print Ar1(i, j)
            Next j
        Next i

        '~~> Store the Ar3 into Ar1
        For i = 0 To Rng2.Columns.Count - 1
            Ar1(UBound(Ar1), i) = Ar3(0, i)
            Debug.Print ">>"; Ar1(UBound(Ar1), i)
        Next i
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/6d18de0205a05731de517369ad69af01.png)

# jquery - jquery.datepicker后如何去掉错误提示

> ID：10120607
> 
> 赞同：2
> 
> 时间：2012-04-12T09:09:28.113
> 
> 标签：jquery, validation, datetime

我有一个输入，就像`<input name="begin_time" />,<input name="end_time" />`我使用 jquery.datepicker 和 jquery-ui-timepicker-addon.js 来获取日期时间一样。

```
$('input[name=begin_time]').datetimepicker({
        minDate : 0,
        stepMinute : 5,
        beforeShow : function (input, inst) {},
        onClose : function (dateText, inst) {
            var endDateTextBox = $('input[name=end_time]');
            var beginDateTextBox = $('input[name=begin_time]');
            var testStartDate = new Date(dateText);
            if (endDateTextBox.val() != '') {
                var testEndDate = new Date(endDateTextBox.val());
                if (testStartDate > testEndDate)
                    endDateTextBox.val(dateText);
            } else {
                endDateTextBox.val(dateText);
            }
        },
        onSelect : function (selectedDateTime) {
            var start = $(this).datetimepicker('getDate');
            $('input[name=end_time]').datetimepicker('option', 'minDate', new Date(start.getTime()));
        }
    });
    $('input[name=end_time]').datetimepicker({
        onClose : function (dateText, inst) {
            var startDateTextBox = $('input[name=begin_time]');
            if (startDateTextBox.val() != '') {
                var testStartDate = new Date(startDateTextBox.val());
                var testEndDate = new Date(dateText);
                if (testStartDate > testEndDate)
                    startDateTextBox.val(dateText);
            } else {
                startDateTextBox.val(dateText);
            }
        },
        stepMinute : 5,
        onSelect : function (selectedDateTime) {
            var end = $(this).datetimepicker('getDate');
            $('input[name=begin_time]').datetimepicker('option', 'maxDate', new Date(end.getTime()));
        }
    }); 
```

我还使用 jquery.validate.js 来验证输入，并在提交表单之前确保它是必需的。

```
$('#form').validate({
    rules : {
        begin_time : 'required',
                end_time : 'required'
    },
    messages : {
        begin_time : 'The  start time can\' be empty',
                end_time : 'The event end time can\' be empty'
    }
}) 
```

当用户没有填写任何内容时，我提交，然后出现消息（这是正确的）。

但是当我拿起日期时间时，错误提示仍然没有消失。我想让它消失。

谁能给我一个建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:56:21.590

这对我有用：

```
$("#dateFieldID").change(function () {
    $('#formID').validate({
        required: true,
        date: true
    }).element('#dateFieldID');
}); 
```

向每个日期选择器输入字段添加**更改**事件，然后验证为我删除了该字段。我在 Firefox 17、IE 7+、Safari 6 和 Chrome v.23 中对此进行了测试。我看过其他帖子，其中开发人员建议挂钩到 JQuery UI DatePicker onClose 事件，然后在调度 onClose 事件时将焦点设置回日期字段。这确实*有效*，但是，在 IE 中，DatePicker 对话框不会隐藏。此外，错误消息仅在日期字段失去焦点后才消失 - 这与其他字段不一致。这对我有用。

我希望这可以帮助别人。这似乎运作良好 - 至少对我来说;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:57:42.063

您可以使用`focusCleanup`摆脱任何错误类和消息。

```
$(".selector").validate({
   focusCleanup: true
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-28T00:15:54.553

当时这里的解决方案对我不起作用。当从日期选择器中选择日期时，添加下面的 onSelect 以验证日期字段的工作是什么：

```
$("#dateFieldID").datepick({
    dateFormat: 'dd/mm/yyyy',
    changeMonth: true,
    changeYear: true,
    maxDate: 0,
    onSelect: function () {
        $("#dateFieldID").valid();
    }
}); 
```

# c++ - c ++测试double是否为#INF

> ID：10120609
> 
> 赞同：1
> 
> 时间：2012-04-12T09:09:41.920
> 
> 标签：c++, double, nan

`double`当某个值为 a`NaN`或 an时，我想隔离行为`#INF`。为了检测 a `NaN`，我测试

```
doubleVal != doubleVal 
```

一个`#INF`呢？`doubleVal`当是时，这个测试是否正确`#INF`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:15:02.790

`1.`一旦你确定不是乘以如何`NaN`？

[http://ideone.com/97FNu](http://ideone.com/97FNu)

您也可以使用[`isinf`](http://pubs.opengroup.org/onlinepubs/007904875/functions/isinf.html)and [`isnan`](http://pubs.opengroup.org/onlinepubs/007904875/functions/isnan.html)，但根据它们的实现可能会产生一些开销。

第三种选择是使用 C 最大值宏（或等效的`std::numeric_limits`）：

```
 bool is_inf_or_nan(double x) 
{
    return !(x <= DBL_MAX && x >= -DBL_MAX); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:11:17.240

如果您不使用 c++11，那么您需要`<boost/math/special_functions/fpclassify.hpp>`代替`<cmath>`, 并进行相应的命名空间更改。

```
#include <cmath> // or <boost/math/special_functions/fpclassify.hpp>
// ...

    if(isinf(num)){
        // ...
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T09:14:41.823

Boost 中还有一个[仅包含标头的库](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/utils/fpclass.html)，它具有处理浮点数据类型的简洁工具

```
#include <boost/math/special_functions/fpclassify.hpp> 
```

您将获得以下功能：

```
template <class T> bool isfinite(T z);
template <class T> bool isinf(T t);
template <class T> bool isnan(T t);
template <class T> bool isnormal(T t); 
```

# java - Java MVC 对控制器如何交互和传递值的困惑

> ID：10120610
> 
> 赞同：1
> 
> 时间：2012-04-12T09:09:49.610
> 
> 标签：java, model-view-controller, view, controller, listener

我正在为一项课程工作制作二十一点游戏，我大致了解 mvc 的工作原理，因为模型保存数据，视图是 gui，控制器是你的听众，但是当听众意味着我会感到困惑分开，然后放在同一个类中。我也无法从其他面板访问部件，例如，当我单击单独面板中的扭曲/点击按钮时，我想在一侧更新卡值总列表，但这是我能够访问的唯一方法这是通过使我知道是错误的列表公开静态。

# playframework - 如何在 Playframework 1.24 上禁用检查上下字符验证码

> ID：10120612
> 
> 赞同：0
> 
> 时间：2012-04-12T09:09:52.887
> 
> 标签：playframework

如何更改游戏框架工作的模块验证码以禁用检查字符上下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:46:29.177

在 Play 框架 1.2.4 中，验证码功能不在模块中，而是内置在框架核心中（在类[Images.Captcha](http://www.playframework.org/documentation/api/1.2.4/play/libs/Images.Captcha.html)中）。

由于您没有共享任何代码，因此无法知道到目前为止您是如何实现验证码验证的，但我们假设您遵循了[Play 框架文档的教程](http://www.playframework.org/documentation/1.2.4/guide5)。在这种情况下，实际验证（用户输入的值是否与验证码值匹配）根本不会在框架内进行，而是留给您实现。

如果是这种情况，您需要做的就是使用`equalsIgnoreCase`比较而不是`equals`.

# android - 删除我选择的 sd 卡上的文件

> ID：10120613
> 
> 赞同：0
> 
> 时间：2012-04-12T09:09:53.833
> 
> 标签：android, parameters, sd-card, delete-file

我有这段代码可以删除我之前创建的文件夹下的特定文件“pass”，我想要的是删除用户单击的任何文件，而不是这个特定文件“myfile”

```
 public void function1(int id){  
                Toast.makeText(this, "function 1 called", Toast.LENGTH_SHORT).show();  
                String fileName = Environment.getExternalStorageDirectory() +"/pass/myfile.pdf"; 
                File myFile = new File(fileName);
                if(myFile.exists())
                    myFile.delete(); 
```

我一直在尝试将参数从另一个类传递给这个类，但它不起作用

```
file_name = getIntent().getStringExtra("fileName");
String fileName = Environment.getExternalStorageDirectory() +"/pass/"+file_name; 
                    File myFile = new File(fileName);
                    if(myFile.exists())
                        myFile.delete(); 
```

此类传递文件名

```
 if (position == 0) { 
 // pass parameters file name & file url 
 Intent s = new Intent(getApplicationContext(),PDFListActivity.class);  
 s.putExtra("fileName","myfile.pdf"); 
    startActivity(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:23:47.670

从你的第一堂课（活动）你是这样的:::

```
Intent i = new Intent(thisActivity.this,NextActivity.class);
i.putExtra("filename",fileName);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:25:19.567

你有没有尝试过

`String fileName = Environment.getExternalStorageDirectory().getAbsolutePath() + "/pass/" + file_name;`

As`getAbsolutePath()`返回根目录的绝对路径。

还获取用于查找文件的字符串的日志输出，并检查它们在两个实例中是否相同

# c# - 更新面板的问题

> ID：10120618
> 
> 赞同：0
> 
> 时间：2012-04-12T09:10:05.587
> 
> 标签：c#, asp.net, .net

我有一个问题，例如，当我删除一个项目时，它会从数据库中删除，做好 bindGridView()，但不要刷新屏幕......我做错了什么？

另一个问题是，例如，当我删除一个项目时，我想显示一条成功消息，但更新面板也没有刷新..

是同样的问题这是我的代码：

```
<asp:UpdatePanel ID="UpdatePanelListaUsers" runat="server" UpdateMode="Always">
                            <ContentTemplate>
                                <asp:GridView ID="gridviewListUsers" runat="server" AutoGenerateColumns="false" OnRowCreated="OnRowCreated"
                                AllowPaging="True" AllowSorting="True" OnSorting="OnSort" DataKeyNames="Id" PageSize="2"
                                CssClass="cssTable" BorderWidth="0" Width="900px" AlternatingRowStyle-CssClass="alternate-row"
                                OnRowCommand="gridviewListUsers_RowCommand" 
                                EmptyDataText="Não existe utilizadores..." 
                                    onpageindexchanging="gridviewListUsers_PageIndexChanging">
                                <PagerStyle HorizontalAlign="Right" Font-Bold="true" Font-Size="X-Large" ForeColor="black" />
                                <PagerSettings Mode="Numeric" />
                                <Columns>
                                    <asp:BoundField HeaderStyle-CssClass="table-header-repeat line-left minwidth-1" HeaderText="Nome"
                                        DataField="Name" SortExpression="Name" />
                                    <asp:BoundField HeaderStyle-CssClass="table-header-repeat line-left minwidth-1" HeaderText="Username"
                                        DataField="Username" SortExpression="Username" />
                                    <asp:BoundField HeaderStyle-CssClass="table-header-repeat line-left" HeaderText="Email"
                                        DataField="Email" SortExpression="Email" />
                                    <asp:TemplateField ItemStyle-CssClass="options-width" HeaderStyle-CssClass="table-header-options line-left">
                                        <HeaderTemplate>
                                            <a href="">Opções</a></HeaderTemplate>
                                        <ItemTemplate>
                                            <asp:LinkButton ID="lnkEdit" CommandArgument='<%# ((GridViewRow) Container).RowIndex %>' CssClass="icon-1 info-tooltip"
                                                CommandName="edit" ToolTip="Editar" runat="server"></asp:LinkButton>
                                            <asp:LinkButton ID="lnkDelete" CommandArgument='<%# ((GridViewRow) Container).RowIndex %>' CssClass="icon-2 info-tooltip"
                                                CommandName="delete" ToolTip="Remover" runat="server"></asp:LinkButton>
                                        </ItemTemplate>
                                    </asp:TemplateField>
                                </Columns>
                            </asp:GridView>
                            </ContentTemplate>
                            </asp:UpdatePanel> 
```

和

```
<asp:UpdatePanel ID="UpdatePanelMensagens" runat="server" UpdateMode="Always">
                            <ContentTemplate>
                            <asp:Panel ID="pnlMessageRed" Visible="false" runat="server">
                                <!--  start message-red -->
                                <div id="message-red">
                                    <table border="0" width="100%" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <td class="red-left">
                                                Erro. Ficou gravado a informação do erro, tente novamente
                                            </td>
                                            <td class="red-right">
                                                <a class="close-red">
                                                    <img src="../images/table/icon_close_red.gif" alt="" /></a>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <!--  end message-red -->
                            </asp:Panel>
                            <asp:Panel ID="pnlMessageBlue" Visible="false" runat="server">
                                <!--  start message-blue -->
                                <div id="message-blue">
                                    <table border="0" width="100%" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <td class="blue-left">
                                                <asp:Label ID="lblSucesso" runat="server"></asp:Label>
                                            </td>
                                            <td class="blue-right">
                                                <a class="close-blue">
                                                    <img src="../images/table/icon_close_blue.gif" alt="" /></a>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <!--  end message-blue -->
                            </asp:Panel>
                            </ContentTemplate>
                            </asp:UpdatePanel> 
```

这是gridview代码

```
private void bindGridView()
    {
        String strSort = String.Empty;
        if (null != m_strSortExp &&
            String.Empty != m_strSortExp)
        {
            strSort = String.Format("{0} {1}", m_strSortExp, (m_SortDirection == SortDirection.Descending) ? "DESC" : "ASC");
        }
        DataView dv = new DataView(m_dsUsers.Tables[0], String.Empty, strSort, DataViewRowState.CurrentRows);
        gridviewListUsers.DataSource = dv;
        gridviewListUsers.DataBind();
        UpdatePanelListaUsers.Update();
    }

protected void OnSort(object sender, GridViewSortEventArgs e)
    {
        // There seems to be a bug in GridView sorting implementation. Value of
        // SortDirection is always set to "Ascending". Now we will have to play
        // little trick here to switch the direction ourselves.
        if (String.Empty != m_strSortExp)
        {
            if (String.Compare(e.SortExpression, m_strSortExp, true) == 0)
            {
                m_SortDirection =
                    (m_SortDirection == SortDirection.Ascending) ? SortDirection.Descending : SortDirection.Ascending;
            }
        }
        ViewState["_Direction_"] = m_SortDirection;
        ViewState["_SortExp_"] = m_strSortExp = e.SortExpression;
        this.bindGridView();
    }

    void AddSortImage(GridViewRow headerRow)
    {
        Int32 iCol = GetSortColumnIndex(m_strSortExp);
        if (-1 == iCol)
        {
            return;
        }
        // Create the sorting image based on the sort direction.
        Image sortImage = new Image();
        if (SortDirection.Ascending == m_SortDirection)
        {
            sortImage.ImageUrl = "~/images/table/dwn.gif";
            sortImage.AlternateText = "Ordem Ascendente";
        }
        else
        {
            sortImage.ImageUrl = "~/images/table/up.gif";
            sortImage.AlternateText = "Ordem Descendente";
        }

        // Add the image to the appropriate header cell.
        headerRow.Cells[iCol].Controls.Add(sortImage);
    }

    // This is a helper method used to determine the index of the
    // column being sorted. If no column is being sorted, -1 is returned.
    int GetSortColumnIndex(String strCol)
    {
        foreach (DataControlField field in gridviewListUsers.Columns)
        {
            if (field.SortExpression == strCol)
            {
                return gridviewListUsers.Columns.IndexOf(field);
            }
        }

        return -1;
    }

    protected void gridviewListUsers_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "delete")
        {
            try
            {
                //obter o id
                int index = int.Parse((string)e.CommandArgument);
                string key = gridviewListUsers.DataKeys[index]["Id"].ToString();

                //apagar o utilizador
                Project_BLL.Users.RemoveUser(Convert.ToInt32(key));

                //mensagem de sucesso
                pnlMessageRed.Visible = false;
                pnlMessageBlue.Visible = true;
                lblSucesso.Text = "Utilizador adicionado com sucesso. A reencaminhar...";

                //força o update dos users, e nao da cache
                bindGridView();

                GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
                LinkButton lb = (LinkButton)row.FindControl("lnkDelete");
                if (lb != null)
                {
                    ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(lb);
                }

                ScriptManager.RegisterStartupScript(this, this.GetType(), "alertUser", "alert('deleted');", true);

            }
            catch (Exception er)
            {
                pnlMessageRed.Visible = true;
                pnlMessageBlue.Visible = false;
            }
        }

        else if (e.CommandName == "edit")
        {
            try
            {
                int index = int.Parse((string)e.CommandArgument);
                string key = gridviewListUsers.DataKeys[index]["Id"].ToString();

                Response.Redirect("EditarUtilizador.aspx?id=" + key);
            }
            catch (Exception)
            {
                pnlMessageRed.Visible = true;
                pnlMessageBlue.Visible = false;
            }
        }

    }

    protected void gridviewListUsers_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        gridviewListUsers.PageIndex = e.NewPageIndex;
        gridviewListUsers.SelectedIndex = -1;
        bindGridView(); // Call bind here
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:15:28.837

第二个问题：从后面的代码注册脚本

```
protected void gridviewListUsers_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "delete")
        {
            //your code
            ScriptManager.RegisterStartupScript(this, this.GetType(), "alertUser", "alert('deleted');", true);
        }
    } 
```

正如你确定你的循环进入 CommandName="delete" 那么javascript alert 方法肯定应该调用。

第一个问题：在 UpdatePanel 中设置 UpdateMode="Conditional" 并在后面的代码中使用以下方法：

```
public UpdatePanelUpdateMode UpdateMode
{
    get { return this.UpdatePanelListaUsers.UpdateMode; }
    set { this.UpdatePanelListaUsers.UpdateMode = value; }
}
public void Update()
{
    this.UpdatePanelListaUsers.Update();
    //your girdview bind method.
    bindGridView()
} 
```

现在只需在您想要刷新更新面板的任何地方调用 bindGridView() 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:37:17.787

只需将 CommandName 更改为 myEdit 和 myDelete（就像 Ashwini Verma 之前建议的那样），现在它可以工作了。

然后我用谷歌搜索找到原因，似乎这些词是保留的

[http://www.mindfiresolutions.com/Issue-with-OnRowCommand-event-of-GridView-while-using-reserve-words-in-CommandName-property-935.php](http://www.mindfiresolutions.com/Issue-with-OnRowCommand-event-of-GridView-while-using-reserve-words-in-CommandName-property-935.php)

# flurry - Flurry iPhone SDK 中的 Flurry Analytics、Flurry AppCircle、Flurry Clips

> ID：10120619
> 
> 赞同：2
> 
> 时间：2012-04-12T09:10:21.860
> 
> 标签：flurry

谁能给我发一份由 AppCircle 和 Clips 组成的 Flurry SDK。

在[dev.flurry.com 上](http://dev.flurry.com)，我下载了 flurry SDK 3.0.9。

从这些我也没有得到***FlurryClips.h***文件和库文件。那么如何播放剪辑呢？谁能帮帮我吗。

如果有任何SDK，请转发给我。

谢谢，尼基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:30:21.983

我最近遇到了同样的问题，我写信给 Flurry 支持：support@flurry.com，第二天他们给我发了无处不在的 SDK（第 4 版），其中包含剪辑、分析和所有东西。

我不知道为什么他们不只是共享这个 SDK 以供公众访问，虽然......

# c++ - 从weak_ptrs 列表中删除项目

> ID：10120623
> 
> 赞同：9
> 
> 时间：2012-04-12T09:10:41.483
> 
> 标签：c++, pointers

我有一个weak_ptrs 列表，用于跟踪对象。在某个时刻，我想从列表中删除一个给定 shared_ptr 或 weak_ptr 的项目。

```
#include <list>

int main()
{
typedef std::list< std::weak_ptr<int> > intList;

std::shared_ptr<int> sp(new int(5));
std::weak_ptr<int> wp(sp);

intList myList;
myList.push_back(sp);

//myList.remove(sp);
//myList.remove(wp);
} 
```

但是，当我取消注释上述行时，程序将不会构建：

```
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\list(1194): error C2678: binary '==' : no operator found which takes a left-hand operand of type 'std::tr1::weak_ptr<_Ty>' (or there is no acceptable conversion) 
```

如何从给定 shared_ptr 或 weak_ptr 的列表中删除项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T09:24:52.100

弱指针没有 operator== 。您可以比较您的 weak_ptrs 指向的 shared_ptrs。
比如像这样。

```
myList.remove_if([wp](std::weak_ptr<int> p){
    std::shared_ptr<int> swp = wp.lock();
    std::shared_ptr<int> sp = p.lock();
    if(swp && sp)
        return swp == sp;
    return false;
}); 
```

# asp.net-mvc-3 - MVC 3 中的 Lambda 表达式

> ID：10120632
> 
> 赞同：0
> 
> 时间：2012-04-12T09:11:17.797
> 
> 标签：asp.net-mvc-3, linq, lambda, abstract-class

我正在尝试使用 MVC3 构建网上商店。我正在使用 EF，并且我有一个接口来处理我的实体上下文：

```
public interface IBaseRepository<T> where T : class, IBase, new()
{
    IQueryable<T> Get();
} 
```

和一个使用此接口的抽象类：

```
 public abstract class BaseRepository<T> : 
       IBaseRepository<T> where T : class, IBase, new()
{
    protected abstract ObjectSet<T> EntitySet { get; }

    public virtual IQueryable<T> Get()
    {
        return from obj in EntitySet select obj;
    }
} 
```

所以我可以使用这个解决方案来处理我的数据库（SQL）中的不同表。我还不能发图片。所以我将尝试描述我的数据库：

**[产品] - [CategoryProduct(ProductID,CategoryID)] - [Category(ShortName)]**

1.  表产品
2.  具有字段 ShortName 的表类别
3.  表 CategoryProduct 与字段 ProductID,CategoryID 建立多对多链接。

*（我们离问题越来越近了......）*

我有一个方法，它从表“Category”中获取“ShortName”（“repository”是仅用于一个表的 dbcontext - “Category”）并且我需要在我的视图中返回 IEnumerable<> 的产品：

```
public ActionResult GetProductInCategory(string shortName)
{
       IEnumerable<Product> = repository.Get()......
        return View();
} 
```

所以这就是问题所在：我需要使用 lambda 进行查询以从这 3 个表中获取产品，但我不明白如何做到这一点。

我不能使用 linq，因为我只能直接访问整个数据库中的一个表。

很抱歉解释不好，如果您对建筑有任何疑问以获得整体观点，我会尽力回答您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:32:06.090

我假设/猜测您使用的`EntitySet`是 EntityFramework 并且您在**实体类中有这个结构**

```
Category
+ShortName
+EntityCollection<CategoryProduct> CategoryProduct

CategoryProduct
+Product 
```

所以你可以在你的 linq 查询中这样做：

```
BaseRepository<Category> repository = //get your CATEGORY repository
IEnumerable<Product> = repository.Get().Where(c=> c.ShortName == shortName)
                                       .SelectMany(cp => cp.CategoryProduct)
                                       .Select(p => p.Product).ToList(); 
```

# python - 用python创建word文件（.doc）

> ID：10120633
> 
> 赞同：3
> 
> 时间：2012-04-12T09:11:20.030
> 
> 标签：python, ms-word

我必须在不使用 OpenOffice 等外部程序或使用 Jasper 的 java 等嵌入式语言的情况下从 python 生成 2003 兼容的 doc 文件，但我还没有找到方法。创建一个 docx 非常简单，并且没有问题，但是 doc 文件是另一个历史。作为一种替代解决方案，我尝试生成一个 rtf 文件，但是 unicode 不兼容（有一个库可以解决这个问题）和缺乏功能不允许我走得更远并满足我的需求。有什么建议或解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:16:12.007

一个谷歌`python generate word document`导致很多好的结果。似乎[py docx](https://github.com/mikemaccana/python-docx)或[win32com.client](http://win32com.goermezer.de/content/view/173/284/)都是有用的库。

要使用 Word 2003 读取 docx 文件，[您必须安装一个插件](http://office.microsoft.com/en-us/word-help/open-a-word-2007-document-in-an-earlier-version-of-word-HA010044473.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:07:53.893

因为它是一种二进制格式，所以您几乎没有选择。 [JODReports](http://jodreports.sourceforge.net/)或[Docmosis](http://www.docmosis.com)可能都位于 OpenOffice 之上，因此可以生成真正的 doc 格式文件。如果这样可以提高性能，您应该能够从 Python 运行，也可以选择桥接到 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:48:17.813

您可以先生成 HTML，然后自动化[pandoc](http://johnmacfarlane.net/pandoc/)以将其转换为 ODT。然后，使用[PyUNO](http://wiki.services.openoffice.org/wiki/PyUNO_bridge)桥，将其转换为 Doc。这是一个很长的链条，但我没有找到更好的方法。也看看[http://wiki.services.openoffice.org/wiki/Python](http://wiki.services.openoffice.org/wiki/Python)。

在我看来，.doc 文件的规范是一团糟，直接用 python 生成它并不容易。尽管已经有一些 Python 库尝试编写 doc 文件，但它们还处于非常早期的阶段，可能无法为您服务......

# jquery-mobile - 在标题右侧添加按钮

> ID：10120634
> 
> 赞同：11
> 
> 时间：2012-04-12T09:11:26.020
> 
> 标签：jquery-mobile

我想在 jQuery mobile 的标题右侧添加一个图标按钮。我在自动左定位时遇到问题。

这是我的标题：

```
<div data-role="header" data-position="inline">
     <h1>Resultaten</h1>
     <a href="#Home" data-role="button" data-icon="home" data-iconshadow="false"
        data-direction="reverse" onclick="empty()" data-transition="slide"
        data-iconpos="notext">home</a>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T10:34:37.413

使用`class="ui-btn-right"`或添加一个`ui-btn-right`类`<a>`

```
<div data-role="header" data-position="inline">
     <h1>Resultaten</h1>
     <a href="#Home" data-role="button" data-icon="home" data-iconshadow="false"
        data-direction="reverse" onclick="empty()" data-transition="slide"
        data-iconpos="notext"  class="ui-btn-right">home</a>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T04:58:14.217

如果您有多个要向右对齐的按钮，使用`class="ui-btn-right"`in`<a>`会将所有按钮放在彼此的顶部。相反，您可以在它周围包裹一个 div 并向右浮动。

```
<div data-role="header" data-position="inline">
    <h1>Resultaten</h1>
    <div style="float:right;">
        <a href="#Home" data-role="button" data-icon="home" data-iconshadow="false"
        data-direction="reverse" onclick="empty()" data-transition="slide"
        data-iconpos="notext"  class="ui-btn-right">btn 1</a>
        <a href="#Home" data-role="button" data-icon="home" data-iconshadow="false"
        data-direction="reverse" onclick="empty()" data-transition="slide"
        data-iconpos="notext"  class="ui-btn-right">btn 2</a>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-06T12:24:58.923

jQuery Mobile ver 1.2+ 中有一个 data 属性，你可以使用`data-iconpos="right"`.

```
<a href="#Home" data-role="button" data-icon="home" data-iconpos="right" data-iconshadow="false"
    data-direction="reverse" onclick="empty()" data-transition="slide"
    data-iconpos="notext">home</a> 
```

[官方文档](http://demos.jquerymobile.com/1.2.1/docs/buttons/buttons-icons.html)

# java - 无法让 NetBeans 访问 Java 中的“FigurePanel”

> ID：10120641
> 
> 赞同：0
> 
> 时间：2012-04-12T09:11:52.743
> 
> 标签：java, awt

当谈到 Java 时，我是一个初学者，我正在按照书中的说明进行操作。我将使用以下代码创建一个 FigurePanel：

```
 import java.awt.*;
 import javax.swing.*;

 public class TestFigurePanel extends JFrame{
    public TestFigurePanel() {
         setLayout(new GridLayout(2, 3, 5, 5));
         add(new FigurePanel(FigurePanel.LINE));
    }
} 
```

但是在“add(new FigurePanel(FigurePanel.LINE));” 我收到以下错误：

“找不到标志：

符号：类 FigurePanel

类：TestFigurePanel"

如果有人告诉我是什么导致了这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:23:30.850

在你的包中添加这个类：

```
import java.awt.*;

import javax.swing.JPanel;

public class FigurePanel extends JPanel {

// Define constants
public static final int LINE = 1;

public static final int RECTANGLE = 2;

public static final int ROUND_RECTANGLE = 3;

public static final int OVAL = 4;

private int type = 1;

private boolean filled;

/** Construct a default FigurePanel */

public FigurePanel() {

}

/** Construct a FigurePanel with the specified type */

public FigurePanel(int type) {

this.type = type;

}

/** Construct a FigurePanel with the specified type and filled */

public FigurePanel(int type, boolean filled) {

this.type = type;

this.filled = filled;

}

/** Draw a figure on the panel */

public void paintComponent(Graphics g) {

super.paintComponent(g);

// Get the appropriate size for the figure
int width = getSize().width;

int height = getSize().height;

switch (type) {

  case LINE: // Display two cross lines
    g.setColor(Color.BLACK);

    g.drawLine(10, 10, width - 10, height - 10);

    g.drawLine(width - 10, 10, 10, height - 10);

    break;

  case RECTANGLE: // Display a rectangle
    g.setColor(Color.BLUE);

    if (filled)

      g.fillRect((int)(0.1 * width), (int)(0.1 * height),

        (int)(0.8 * width), (int)(0.8 * height));

    else

      g.drawRect((int)(0.1 * width), (int)(0.1 * height),

        (int)(0.8 * width), (int)(0.8 * height));

    break;

  case ROUND_RECTANGLE: // Display a round-cornered rectangle
    g.setColor(Color.RED);

    if (filled)

      g.fillRoundRect((int)(0.1 * width), (int)(0.1 * height),

        (int)(0.8 * width), (int)(0.8 * height), 20, 20);

    else

      g.drawRoundRect((int)(0.1 * width), (int)(0.1 * height),

        (int)(0.8 * width), (int)(0.8 * height), 20, 20);

    break;

  case OVAL: // Display an oval
    g.setColor(Color.BLACK);

    if (filled)

      g.fillOval((int)(0.1 * width), (int)(0.1 * height),

        (int)(0.8 * width), (int)(0.8 * height));

    else

      g.drawOval((int)(0.1 * width), (int)(0.1 * height),

        (int)(0.8 * width), (int)(0.8 * height));

}

}

  /** Set a new figure type */

  public void setType(int type) {

  this.type = type;

  repaint();

}

/** Return figure type */

public int getType() {

return type;

}

/** Set a new filled property */

public void setFilled(boolean filled) {

  this.filled = filled;

  repaint();

}

/** Check if the figure is filled */

public boolean isFilled() {

return filled;

}

/** Specify preferred size */

public Dimension getPreferredSize() {

return new Dimension(80, 80);

}

} 
```

# php - php DateTime createFromFormat 功能

> ID：10120643
> 
> 赞同：9
> 
> 时间：2012-04-12T09:12:02.920
> 
> 标签：php, datetime

嗨，我似乎无法让 datetime 方法按预期工作？我可能做错了什么？

```
// Passes OK 
$dateTime = DateTime::createFromFormat('d/m/Y', '12/12/2012' );
var_dump($dateTime);

// should fail but returns  - 2016-09-25 
$dateTime = DateTime::createFromFormat('d/m/Y', '56/56/2012' );
var_dump($dateTime);

// correctly returns False 
$dateTime = DateTime::createFromFormat('d/m/Y', '56/56/fail' );
var_dump($dateTime);

// should fail but returns 2019-08-29 09:58:10
$dateTime = DateTime::createFromFormat('m/d/Y', '90/90/2012' );
var_dump($dateTime); 
```

![在此处输入图像描述](../Images/26eee374c93a6d05392ec9a65cfd06de.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-12T09:17:14.863

问题`DateTime::createFromFormat`在于它可以识别**两种**意外输入：一种会产生错误，一种会产生警告。

输入如`'56/56/fail'`产生错误，所以`false`返回，一切都很好。但是，`'56/56/2012'`给出的不是错误而是警告，实际上被解析为 2012 年第 56 个月的第 56 天。由于 2012 年没有 56 个月，PHP 在内部将其更改为 2016 + 8 个月 = 2016 年 8 月。从那个月开始没有 56 天，我们对 2016 年 9 月 + (56 - 31) 天 = 2016 年 9 月 25 日有另一个补偿。所以虽然出乎意料，但这实际上是正确的。

如果要禁止这种自动调整，则必须包装`DateTime`工厂方法并[`DateTime::getLastErrors`](http://php.net/manual/en/datetime.getlasterrors.php)用作参考：

```
$dateTime = DateTime::createFromFormat('d/m/Y', '56/56/2012');
$errors = DateTime::getLastErrors();
if (!empty($errors['warning_count'])) {
    echo "Strictly speaking, that date was invalid!\n";
} 
```

**[看到它在行动](http://codepad.viper-7.com/QFIWab)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:19:50.460

PHP 是一头奇怪的野兽（至少可以这么说）。`56/56/2012`导致所有额外的月份和日期都被添加到日期中，直到它变得正确（只有上帝知道这背后的逻辑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:16:23.770

实际上这是正确的：例如，如果您使用 2012/04/31（无效日期）创建日期，PHP 将返回 2012/05/01（5 月的第一天）！

这是在幕后完成的

# forms - 在 Symfony2 中使用嵌入式表单

> ID：10120645
> 
> 赞同：0
> 
> 时间：2012-04-12T09:12:03.540
> 
> 标签：forms, database-design, symfony, doctrine-orm, embedding

我在 Symfony2 中嵌入表单时遇到问题。我可能在技术上做错了什么，但也许我犯的错误是在 db-setup 级别上，并且首先不需要嵌入表单。在我展示代码之前，让我们首先关注这一点。

我制作了两个实体：V 和 O。它们都代表位置，但指的是不同类型的位置。通过 ref-id，它们各自引用一个实体地址。多个 V 可以引用同一个地址，多个 O 可以引用同一个地址，甚至在同一个地址上可能有一个 V 和一个 O。显示 V、O 和地址工作（控制器和路由工作）。创建或编辑地址也可以正常工作；我创建了一个名为 AddressType 的表单类型，它也可以渲染和工作。

V 和 O 也有 formTypes：VType 和 OType。他们有自己的 Twig 模板、路由、控制器操作等。

现在我希望用户能够在表单中输入新的 V，其中还有可用于输入新地址的字段。所以我不希望用户从某种列表中选择一个已经存在的地址（但是我得到了这个工作），但我希望他们能够添加一个新地址。如果该地址已经存在于 db 表“Addresses”中（这很有可能），Symfony2 应该引用该现有地址，而不是再次创建相同的地址。

现在我的问题是，我没有成功呈现嵌入在 V 或 O 表单中的地址表单 (AddressType)。基本上，我希望将 AddressType 表单呈现为 V 或 O 表单的一部分。这可能吗？

但是，很可能是我的 db-setup 不好，我不应该将 Address 设为单独的实体（和 db 表），但我应该将其设为实体 V 和 O 的一部分。这也可以解决我猜是问题，但这是一种好习惯吗？

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:26:13.587

我有类似的问题。这是一种复杂的形式，可能不太容易做到。最好的方法是制作自定义表单类型甚至是原始表单（我更喜欢），并直接使用 Request 类编写为您处理此表单的控制器操作。然后，您可以使用 ConstraintCollections 验证您的输入，并直接使用您的类和 Doctrine 的 EntityManager 组合您的实体。

这个链接可能会变得有用 - 或者至少在验证非对象方面帮助了我很多： [http ://www.ricardclau.com/2011/11/how-to-use-symfony2-validator-component-without-forms-实体和数据数组/](http://www.ricardclau.com/2011/11/how-to-use-symfony2-validator-component-without-forms-entities-and-data-arrays/)

所以基本上你必须在这里写代码。

# regex - 使用正则表达式在 Visual Studio 中进行全局查找和替换

> ID：10120646
> 
> 赞同：0
> 
> 时间：2012-04-12T09:12:08.610
> 
> 标签：regex, visual-studio, replace

在我的项目中，我想将 CssClass 添加到所有没有 CssClass 属性的 asp:Buttons。如何使用正则表达式搜索和替换所有？

搜索并替换这个

```
<asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="buttonSearch_Click" /> 
```

进入以下

```
<asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="buttonSearch_Click"  CssClass="button-default" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:56:33.380

好的，我自己解决。

Ctrl+Shift+H

找什么

```
{\<asp\:Button(:b+<:w>=:q(\n)*)*}{(:b)*/*\>} 
```

用。。。来代替

```
\1 CssClass="button-default" \2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:15:48.833

在整个项目中搜索`<asp:Button`并替换它。`<asp:Button CssClass="button-default"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:33:34.540

您不能使用“常规” VS 查找/替换正则表达式来做到这一点，因为它们不支持[环视断言](http://www.regular-expressions.info/lookaround.html)。

不过，您可以使用特殊的[插件](http://visualstudiogallery.msdn.microsoft.com/a41d37d0-4b42-43fe-a9ec-4c2eb22bfaeb/)来完成。它被称为正则表达式边距并支持 .NET 样式的正则表达式：

![截屏](../Images/50c3417f7532bef605134172ac16428a.png)

搜索

```
<asp:Button\b(?![^<>]*\bCssClass)([^<>]*)/> 
```

并将所有替换为

```
<asp:Button\1 CssClass="button-default" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-02T11:53:31.340

似乎 Visual Studio 现在支持使用正则表达式查找和替换： *[https ://docs.microsoft.com/en-us/visualstudio/ide/using-regular-expressions-in-visual-studio?view=vs-2019#捕获组和替换模式](https://docs.microsoft.com/en-us/visualstudio/ide/using-regular-expressions-in-visual-studio?view=vs-2019#capture-groups-and-replacement-patterns)*

微软说

> Visual Studio 使用 .NET 正则表达式来查找和替换文本。

在查找和替换界面中使用正则表达式之前，您只需确保按下“正则表达式”按钮（按钮包含如下符号：.*）： [![这](../Images/28dabb92303b5121fd30431dc95ecb9e.png)](https://i.stack.imgur.com/Xh9MP.png)

注意：如图，在查找替换界面也可以按Alt+E启用正则表达式！

[您可以在此处](https://docs.microsoft.com/en-us/visualstudio/ide/using-regular-expressions-in-visual-studio?view=vs-2019)找到有关正则表达式和查找和替换功能的更多信息

# ruby-on-rails - 如何在 Rails 应用程序中显示多行？

> ID：10120652
> 
> 赞同：0
> 
> 时间：2012-04-12T09:12:32.883
> 
> 标签：ruby-on-rails

我正在编写一个 Rails 博客应用程序，当我创建一个新博客时，我在 textarea 中输入内容（多行）并使用字符串将其保存到数据库中。但是当我显示它时，文本显示在一行中。如果我想纠正这个问题，我应该怎么做？我应该在控制器中用 <br> 替换每个'\n'，还是有更好的想法？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:15:36.907

simple_format 字符串助手可能对您有所帮助。

`<%= simple_format(@blog.body) %>`

# css - drupal，OM Maximenu 用相同的 css 类包装所有内容 div

> ID：10120654
> 
> 赞同：0
> 
> 时间：2012-04-12T09:12:43.630
> 
> 标签：css, drupal

我在运行drupal 7 的测试站点上使用OM Maximenu。我让Maximenu 运行，几个迷你面板在主导航菜单中显示为下拉菜单。

问题是所有下拉 div 都被赋予相同的类，并且没有一个有 ID。每个都有类：.om-maximenu-content。我可以将一个样式设置为固定宽度并与页面对齐，但是其他的将偏移相同的数量。我一次又一次地查看了所有的 Maximenu 设置，但没有运气。有没有其他人遇到过这个问题？

另一个问题是：为什么 Maximenu 会在内容 div 周围生成这么多空 div？为什么它总是将内容放在 om-maximenu-middle-right div 中？

我希望这是足够的信息。我想任何能回答这个问题的人都会熟悉 Maximenu 并且不需要查看我的代码。有很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:40:49.023

**原来答案是深度选择器和 .tpl 文件编辑。**

# android - 使用 Intent 和 SetClassName 启动 Activity

> ID：10120655
> 
> 赞同：1
> 
> 时间：2012-04-12T09:12:43.840
> 
> 标签：android, android-activity, android-intent

我正在使用以下代码移动到另一个 Activity ：

```
Intent intent = new Intent();  
String test = "Navigate";  
intent.setClassName(this.context,test);  
intent.putExtra("params", params);  
((Activity) context).startActivity(intent); 
```

但我无法启动导航活动。不会抛出异常。同样，以下代码工作正常：

```
Intent intent = new Intent(this.context,Navigate.class);  
intent.putExtra("params", params); 
((Activity) context).startActivity(intent); 
```

请告诉我是否有任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:15:57.623

您需要完整的类名，包括包：

```
String test = "your.package.here.Navigate"; 
```

（以及 Manifest 中定义的 Activity，但您可以从它开始，`Navigate.class`我假设您已经这样做了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:25:56.553

我会使用更明确的构造函数：[`Intent (Context packageContext, Class<?> cls)`](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context,%20java.lang.Class%3C?%3E%29). 从文档：

> [...] 这提供了一种方便的方法来创建意图执行硬编码类名的意图，而不是依赖系统为您找到合适的类 [...]

此构造函数在内部调用`setComponent()`- 方法，您使用的 - 方法也会调用该`setClassName()`方法。但是使用构造函数可以节省代码行并使代码更具可读性：

```
Intent i = new Intent(this, Navigate.class);
intent.putExtra("params", params);
this.startActivity(i); 
```

请注意，使用`this`仅在 中时以这种方式工作`Activity`，因为活动类扩展了 -`Context`类。

将包和类名硬编码为字符串的另一个优点是，当你将一个类移动到另一个包（或重命名一个包）时，你会得到编译时错误，而不是运行时错误。

此外，要使其正常工作，您需要在 Android Manifest 中注册 Activity。

# vb.net - 使用 VB.NET 将项目添加到功能区下拉列表

> ID：10120661
> 
> 赞同：5
> 
> 时间：2012-04-12T09:13:00.347
> 
> 标签：vb.net, excel, drop-down-menu, vsto, ribbon

我是开发 Excel VSTO 解决方案的新手，需要一些关于如何将更多项目添加到功能区上的下拉控件的帮助。

到目前为止，我已经能够手动创建许多项目，然后使用更改这些项目的标签

```
Globals.Ribbons.Ribbon1.DropDown1.Items(i).Label 
```

此外，我发现有些人建议使用它来向下拉控件添加更多项目。但我很难理解如何使用它。

```
Globals.Factory.GetRibbonFactory.CreateRibbonComboBox.Items.Add 
```

我想看看其他人是如何做到的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T14:22:35.323

看起来你在正确的轨道上。你需要先使用工厂新建一个`RibbonDropDownItem`，给新控件加上你想要的标签，然后再将控件添加到父控件中`ComboBox`。

```
RibbonDropDownItem rdi = 
    Globals.Factory.GetRibbonFactory().CreateRibbonDropDownItem();
rdi.Label = "My Label";
Globals.Ribbons.Ribbon1.DropDown1.Items.Add(rdi); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-04T07:16:51.400

太棒了，根据我的需要，我使用：

```
dim rdi as RibbonDropDownItem
rdi = Globals.Factory.GetRibbonFactory().CreateRibbonDropDownItem()
rdi.label = "myList"
Globals.Ribbon.Tab.DDlist.Item.Add(rdi) 
```

现在，我需要使用一个字符串数组作为 DropDownItem 的标签。

# java - 命名和初始化数组中的对象

> ID：10120662
> 
> 赞同：0
> 
> 时间：2012-04-12T09:13:07.347
> 
> 标签：java, arrays, loops, for-loop, naming

现在，我正在编写一个简单的图形程序。在其中我有一个名为 m_ball 的数组。

现在，m_ball 应该包含多达 20 个 Ball 类的实例。

现在我通过以下代码执行此操作 =

```
 Ball m_activeBall0 = new Ball();
        Ball m_activeBall1 = new Ball();
        Ball m_activeBall2 = new Ball();
ect...
        m_ball[1] = m_activeBall0;
        m_ball[2] = m_activeBall1;
        m_ball[3] = m_activeBall2;
ect... 
```

现在这一切都很好。但是在 for 循环中做这件事是不可能的。像这样的东西=

```
 for(int i = 0; i <m_ball.length;i++) {
            Ball m_activeBall[i] = new Ball();
            m_ball[i] = m_activeBall[i];
        } 
```

还是我丢了？

我似乎无法找到一种方法来做到这一点。

我尝试了谷歌，但似乎无法找到答案。

哦..是的。忘记添加了。它的Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:20:26.387

您可以使用`for`循环：

```
for (int i = 0; i < m_ball.length; i++)
{
     m_activeBall[i] = new Ball();
     m_ball[i]       = m_activeBall[i];
} 
```

顺便提一下`Arrays.copyOf()`。如果`m_activeBall`在其他地方创建，您可以复制它：

```
Ball[] copy = Arrays.copyOf(m_activeBall, m_activeBall.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:19:31.050

```
Ball[] m_ball = new Ball[20];

for(int i = 0; i < m_ball.Length; i++)
{
   m_ball[i] = new Ball();
} 
```

我用 C# 编写了这个，但我很确定它与 Java 相同。干杯。:)

# c# - 在winforms应用程序中确定像素的颜色

> ID：10120665
> 
> 赞同：3
> 
> 时间：2012-04-12T09:13:29.590
> 
> 标签：c#, winforms, graphics, 2d

我希望能够在屏幕上的某个点确定 winform 的背景颜色，因此我可以根据该特定颜色采取一些措施。可悲的是 System.Drawing 库似乎没有指定一种方法让我能够这样做。

那么我应该如何确定某个点的颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:21:20.053

**使用它：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Drawing;

namespace ColorUnderCursor
{
    class CursorColor
    {
        [DllImport("gdi32")]
        public static extern uint GetPixel(IntPtr hDC, int XPos, int YPos);

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        public static extern bool GetCursorPos(out POINT pt);

        [DllImport("User32.dll", CharSet = CharSet.Auto)]
        public static extern IntPtr GetWindowDC(IntPtr hWnd);

        /// <summary> 
        /// Gets the System.Drawing.Color from under the mouse cursor. 
        /// </summary> 
        /// <returns>The color value.</returns> 
        public static Color Get()
        {
            IntPtr dc = GetWindowDC(IntPtr.Zero);

            POINT p;
            GetCursorPos(out p);

            long color = GetPixel(dc, p.X, p.Y);
            Color cc = Color.FromArgb((int)color);
            return Color.FromArgb(cc.B, cc.G, cc.R);
        }
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int X;
        public int Y;
        public POINT(int x, int y)
        {
            X = x;
            Y = y;
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T09:21:17.123

假设您想远离 Win32 API，您可以使用`Graphics.CopyFromScreen()`将屏幕内容绘制到`Bitmap`对象上。从那里，您只需要使用`Bitmap.GetPixel()`来检索`Color`具有正确颜色的对象。

以下是一些可用于检索完整桌面的代码（适用于多台显示器）：

```
public Image GetScreenshot()
{
    int screenWidth = Convert.ToInt32(System.Windows.SystemParameters.VirtualScreenWidth);
    int screenHeight = Convert.ToInt32(SystemParameters.VirtualScreenHeight);
    int screenLeft = Convert.ToInt32(SystemParameters.VirtualScreenLeft);
    int screenTop = Convert.ToInt32(SystemParameters.VirtualScreenTop);

    Image imgScreen = new Bitmap(screenWidth, screenHeight);
    using (Bitmap bmp = new Bitmap(screenWidth, screenHeight, PixelFormat.Format32bppArgb))
    using (Graphics g = Graphics.FromImage(bmp))
    using (Graphics gr = Graphics.FromImage(imgScreen))
    {
        g.CopyFromScreen(screenLeft, screenTop, 0, 0, new Size(screenWidth, screenHeight));
        gr.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
        gr.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        gr.DrawImage(bmp, new Rectangle(0, 0, screenWidth, screenHeight));
    }

    return imgScreen;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T09:43:17.083

这与已经提供的其他答案略有不同，因为您只声明要确定“颜色”，但没有明确声明您需要 RGB 值。

这种区分是必要的，因为颜色可能存在人眼无法察觉的变化。例如，假设您对检测颜色“蓝色”感兴趣。值 (5, 5, 240) 和 (10, 10, 255) 与 (0, 0, 255) 仅有非常细微的不同。事实上，差异是如此微妙，以至于您需要并排比较颜色样本才能将它们区分开来，即便如此，这也取决于显示器的质量。它们在我的桌面显示器上略有不同，但在我的笔记本电脑上却无法区分。长话短说，RGB 值是确定颜色的不好方法。

有许多方法可以帮助计算颜色之间的差异，最常见的是 Delta-E 方法。但是，如果您只想要一种快速而肮脏的方法，这可能会过头了。将 RGB 空间转换为 HSV 并使用色调的差异来确定颜色。修改阿门的例子，你得到以下内容：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Drawing;

class CursorHue
    {
        [DllImport("gdi32")]
        public static extern uint GetPixel(IntPtr hDC, int XPos, int YPos);

        public static float GetHue(Point p)
        {           
            long color = GetPixel(dc, p.X, p.Y);
            Color cc = Color.FromArgb((int)color);
            return cc.GetHue();
        }
    } 
```

纯蓝色的色调值为 240。前面的示例 (5, 5, 240) 和 (10, 10, 255) 的色调均为 240。这是个好消息，因为这意味着色调是一个相当宽容的度量RGB 差异，并且差异也可以快速计算（即只取色调值的绝对差异）。在这一点上，我们还应该引入另一个参数来控制可接受的色差容差。15 度的色调容差将使系统相当稳健。

这是比较两种颜色以确定它们是否*相似的示例代码*

```
public static bool AreSimilar(Color c1, Color c2, float tolerance = 15f)
{
  return Math.Abs(c1.GetHue() - c2.GetHue() <= tolerance;
} 
```

如需更深入地解释其工作原理，请参阅这篇关于 HSV 颜色空间的Wikipedia[文章。](http://en.wikipedia.org/wiki/HSV_color_space)

# windows-7 - 如何在 Windows 7 应用程序中弹出最近的文件

> ID：10120666
> 
> 赞同：0
> 
> 时间：2012-04-12T09:13:37.423
> 
> 标签：windows-7

在 Windows 7 中，记事本和类似的微软应用程序可以弹出最近使用的文件列表。我可以让我的应用程序具有类似的功能吗？如果可能的话，我需要做什么？

:塞班

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T22:01:36.333

将列表保存在文件中，例如二进制文件所在的目录中，并在用户请求时解析它。

# java - GridLayout 没有调整大小以适应组件

> ID：10120667
> 
> 赞同：1
> 
> 时间：2012-04-12T09:13:41.370
> 
> 标签：java, swing, layout, grid-layout

网格布局有两列，每边都有 50% 的空间，不管组件的实际大小是多少。SetPreferedSize 似乎也不起作用 - 但我不应该需要它，这应该自动完成，对吧？

![在此处输入图像描述](../Images/3a2bfa29fc57ce99b72b904169328c97.png)

我可以调整第一行的宽度以适应“SomeOtherLongText3：”吗？

SSCCE：

```
package test;

import java.awt.*;
import javax.swing.*;

public class test {

    public static void main(String[] args) {
        JFrame frame = new JFrame();

        JPanel detailsPanel = new JPanel();
        detailsPanel.setLayout(new GridLayout(0, 2, 15, 0));

        // Add to left side (WEST)
        frame.add(detailsPanel, BorderLayout.WEST);

        // Add some labels:
        detailsPanel.add(getLabel("Some text:"));
        detailsPanel.add(new JLabel("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc id mauris "));

        detailsPanel.add(getLabel("Some text 2:"));
        detailsPanel.add(new JLabel("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc id mauris "));

        detailsPanel.add(getLabel("Some other text 3:"));
        detailsPanel.add(new JLabel("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc id mauris "));

        frame.setSize(new Dimension(900, 100));
        frame.setVisible(true);
        frame.pack();
    }

    public static JLabel getLabel(String text)
    {
        JLabel lbl = new JLabel(text);
        lbl.setHorizontalAlignment(SwingConstants.TRAILING);
        return lbl;
    }

} 
```

此外，另一个问题是您可以重新调整窗口大小来剪切文本： ![在此处输入图像描述](../Images/be3647dfa0a46c6228b9c07e56dd495d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:39:02.887

## 布局策略

1.  将 2 个单列`GridLayout`实例放在 a 的`WEST`(labels) 和`CENTER`(values) 中`BorderLayout`。将外部面板添加到`WEST`父级或父级..
2.  使用`GroupLayout`. 这可能会更好，因为您可以使用 HTML/CSS 来限制值的宽度并将它们强制为多行。

# c# - 在静态方法中调用非静态 GetType()？

> ID：10120669
> 
> 赞同：1
> 
> 时间：2012-04-12T09:13:50.327
> 
> 标签：c#, .net, types, typeof, gettype

> **可能重复：**
> [.NET：在其静态方法中确定“this”类的类型](https://stackoverflow.com/questions/2081612/net-determine-the-type-of-this-class-in-its-static-method)

您好，有什么方法可以`GetType()`在非静态类中调用非静态而不使用`typeof()`？

这是我正在处理的代码示例。

```
private static ISession GetOrCreate(ISessionFactory factory)
{
    if (HttpContext.Current!=null)
    {
        ISession session = GetExistingWebSession();
        if (session == null)
        {
            session = OpenSessionAndAddToContext(factory);
        }
        else if (!session.IsOpen)
        {
            session = OpenSessionAndAddToContext(factory);
        }            return session;
    }
}

private ISession GetExistingWebSession()
{
    return HttpContext.Current.Items[GetType().FullName] as ISession;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:19:25.050

您不能像这样从静态方法调用实例方法。这根本没有意义。

在 MSDN 上阅读有关静态和实例方法的更多信息：

*   [静态类和静态类成员（C# 编程指南）](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx)
*   [10.2.5 静态和实例成员](http://msdn.microsoft.com/en-us/library/aa645629%28v=vs.71%29.aspx)

有什么问题`typeof()`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:23:08.310

`typeof()`是一种编译时方法。您将其称为针对特定类型的。

`GetType()`是一种运行时方法。您针对特定实例调用它。如果类（类型）是静态的，则无法获取其实例，因此调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:26:23.003

Yes you can call the GetType method from with `GetExistingWebSession` as it is a non static method.

However your problem is actually that you cannot call GetExistingWebSession from within `GetOrCreate`

You need some method to create an instance of your class that you can then use.

e.g.

```
MyClass c=new MyClass();
ISession session = c.GetExistingWebSession(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:21:59.573

无论类是静态的还是非静态的，都不能在静态方法中使用“this”。为什么不想使用 typeof？在这种情况下这是完全合理的，因为您总是知道静态方法中的包含类。使用 GetType() 的唯一原因是有可能在派生类中调用它。

# ruby-on-rails - Rails - 从查询中探索数据

> ID：10120674
> 
> 赞同：0
> 
> 时间：2012-04-12T09:14:07.053
> 
> 标签：ruby-on-rails, ruby

简单的问题。

有没有办法查看从 Rails 中的查询接收到的所有数据？

例子：

```
@persons = Person.find(:all) 
```

有没有办法查看来自@person 的所有数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:32:07.820

```
require 'pp'

pp @persons = Person.find(:all) 
```

或者

```
puts @persons = Person.find(:all).inspect 
```

还要看看 gem unroller，它在调试方面很棒，看看

```
http://unroller.rubyforge.org/ 
```

有关调试 ActiveRecord 的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:22:35.453

尝试这个：

pp @persons

你也可以安装这个很棒的 gem：[https](https://github.com/michaeldv/awesome_print) ://github.com/michaeldv/awesome_print并使用 ap 代替。在这种情况下：

ap @persons

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:19:31.287

打开你的外壳。输入：

```
rails c 
```

接着

```
p = Person.find(:all) 
```

你应该看到所有的数据。Rails 控制台多次帮助我检查数据。

或者

“加入数据”是什么意思？如果您只想查看数据，可以使用数据库浏览器，例如 SQL Database Browser for sqlite

# c - ANTLR3：在解析时动态隐藏/取消隐藏某些标记

> ID：10120679
> 
> 赞同：1
> 
> 时间：2012-04-12T09:14:28.607
> 
> 标签：c, antlr, grammar, antlr3, channels

我正在使用 ANTLR3（C 运行时）来解析文本文件：问题是我通常想识别换行符，但在语法中的某些点我想忽略它们。

我的第一种方法是从语法中动态设置一个布尔值，该值在词法分析器规则中用于 NEWLINE 以将其通道设置为 HIDDEN 或 DEFAULT。

这不起作用，因为 ANTLR3 首先对所有标记进行词法分析并构建标记流，然后语法遍历流。

现在我想知道是否可以动态地（使用解析器语法谓词）告诉令牌流开始/停止侦听特定令牌通道，除了像这样的默认通道：

```
NEWLINE: ('\r'? '\n')+ {$channel=CH_WSPACE;}

expr
@init {
INPUT.disableChannel(CH_WSPACE);
}
@after {
INPUT.enableChannel(CH_WSPACE);
}  : 
...rhs of the rule....
; 
```

我需要编写自己的 TokenStream 吗？有没有更好的方法来解决我的问题？

提前非常感谢！

# php - HTML 邮件在 Apple 移动设备上导致“无内容”

> ID：10120686
> 
> 赞同：3
> 
> 时间：2012-04-12T09:15:01.913
> 
> 标签：php, ios

我正在通过 PHP-mail() 发送 HTML 邮件。内容是一些 div 容器和一些外部图像。

在 iPhone 和 iPad 等 Apple 移动设备上，无法阅读邮件内容，而是显示“此邮件没有内容”的消息。有趣的是，在邮件应用程序的预览窗格中，我可以看到邮件的前几个字。所以内容就在那里，至少在某种程度上是这样。在 Google webmailer 中阅读同一封邮件时一切正常。

你能帮我吗？

编辑：根据要求，这是来源。$mail 具有 HTML-mailbody 作为值。

```
 $id = md5(uniqid(time()));
    $header= "From: Mailer <info@domain.com>\n";
    $header.= "Content-Type: multipart/mixed; boundary=".$id."\n";
    $header.= "This is a multi-part message in MIME format\n";
    $header.= "--".$id."\n";
    $header.= "MIME-Version: 1.0\n";
    $header.= "Content-type: text/html; charset=iso-8859-1\n";
    $header.= "Content-Transfer-Encoding: 8bit\n";
    $header.= $mail."\n";
    $header.= "--".$id."--";

    $betreff = mb_encode_mimeheader("subject", "UTF-8");

    mail($mailaddress, $betreff, $mail, $header); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T05:35:59.283

您的内容之前需要一个空行。在上面的示例中，它应该是：

“内容传输编码：8 位\n\n”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T18:08:00.343

有一个类似的问题，我一直在研究。就我而言，问题是视图的顺序。我的和你的有点不同，有“text/html”和“text/plain”。

如果首先将“text/html”视图添加到消息中，则该消息将在预览窗格中可见，但在主电子邮件窗格中不可见，并且“text/plain”部分将在主电子邮件窗格中可见（但由于测试电子邮件没有纯文本部分，我们收到的是无内容消息）。交换消息的“text/plain”和“text/html”部分，因此 HTML 在纯文本部分之后添加到消息中，并且电子邮件的 HTML 部分在 IOS 邮件应用程序中变得可读。

# asp.net - 粗体和下划线下拉列表菜单项 asp.net

> ID：10120689
> 
> 赞同：1
> 
> 时间：2012-04-12T09:15:07.813
> 
> 标签：asp.net, drop-down-menu, bold, underline

我有一个问题要问。我的应用程序中有一个下拉列表。但是下拉列表填充了层次结构格式。请c图片

![在此处输入图像描述](../Images/c52f0afd2feb852ceda858f08d9aef61.png)

如上图。我如何加粗和下划线父菜单项，例如**Men**、**Lady**和**NA**另一方面，父项也不允许选择。

这是我的编码

```
 private void createDDLCategory()
    {
        ddlCategory.AppendDataBoundItems = true;
        ddlCategory.Items.Insert(0, new ListItem("All","A"));
        ddlCategory.SelectedIndex = 0;

        var ddl1 = dropdownlist.ddlCategoryWithoutGroup();
        foreach (var value in ddl1)
        {
            if (value.P_CATEGORY_ID == null)
            {

                this.ddlCategory.Items.Add(new ListItem(value.CATEGORY_NAME, value.CATEGORY_ID.ToString()));
                this.ddlCategory.Items.FindByValue(value.CATEGORY_ID.ToString()).Selected = false;

                this.ddlCategory.Items.FindByValue(value.CATEGORY_ID.ToString()).Attributes.Add("disabled", "true");
                this.ddlCategory.Items.FindByValue(value.CATEGORY_ID.ToString()).Attributes.Add("style", "font-weight:bold;");

                foreach (var valueChild in ddl1)
                {

                    if (valueChild.P_CATEGORY_ID == value.CATEGORY_ID)
                        this.ddlCategory.Items.Add(new ListItem("&nbsp;&nbsp;&nbsp;" + valueChild.CATEGORY_NAME, valueChild.CATEGORY_ID.ToString()));
                }
            }
        }

        foreach (ListItem item in ddlCategory.Items)
        {
            item.Text = HttpUtility.HtmlDecode(item.Text);

        }

    } 
```

感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:19:26.713

您是否尝试过这种方式：

```
ddlCategory.Items.FindByValue("0").Attributes.Add("style", "font-weight:bolder") 
```

MSDN 提到只有少数样式属性适用于 IE。

[http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnaspp/html/controlscrashcourse-deriving.asp](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnaspp/html/controlscrashcourse-deriving.asp)

# javascript - 如何在即时函数中使用“this”

> ID：10120691
> 
> 赞同：4
> 
> 时间：2012-04-12T09:15:13.233
> 
> 标签：javascript, unobtrusive-javascript

我试图将我的代码封装在一个即时函数中，稍后将通过全局变量 x 访问该函数，并像一个“模块”一样工作。

**代码：**

```
var x = (function () {

    console.log(x); // undefined
    console.log(this); // undefined

})(); 
```

但我不明白为什么我不能`this`用来指代函数本身。

**编辑：**

立即函数在**严格模式下**的另一个函数内( `"use strict"`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:29:50.850

当一个函数在一个函数中执行，或者作为回调传递给另一个在[严格模式下处理的函数时，会发生一件有趣的事情](https://developer.mozilla.org/en/JavaScript/Strict_mode)

[这是一个演示](http://jsfiddle.net/vzS8f/)，并观看控制台

```
function foo(){
    'use strict';

    (function(){
        //undefined in strict mode
        console.log('in foo, this is: '+this);  
    }());

}

function bar(){

    (function(){
        //DOMWindow when NOT in strict mode
        console.log('in bar, this is: '+this); 
    }());

}

foo();
bar();​ 
```

因此，如果该代码在另一个处于严格模式的函数中作为回调执行，`this`则不会引用 global `window`，而是`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:17:32.507

您不能使用“this”来引用函数本身。“this”指向对象内部的对象实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:17:33.707

`this`是函数所有者。而不是函数本身。

顺便说一句，您报告的输出不正确：

```
console.log(this); // DOMWindow 
```

[**演示**](http://jsfiddle.net/vrQbS/1/)

那是因为 的所有者`immediate function`是 Global-Object - `window`。

正如评论的那样，`this`并不总是必须是`DOMWindow`对象，但它仍然永远不可能`undefined`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:20:28.403

自执行函数（立即函数）仅在运行时提供执行上下文。x 将始终未定义，因为在您的代码中，它被分配了立即函数的结果，并且因为它没有返回任何 x 未定义。

这不应该是未定义的，在匿名函数中它将引用 DOMWindow 对象，您看到的未定义只是匿名函数的结果。

如果您想要“模块”或类似行为的类，那么只需

```
var x = function() {
console.log(x, this);
}; 
```

会像创建 xa 构造函数那样做，然后您可以使用要使用原型属性继承的属性来扩展对象。

```
x.prototype.foo = function() {

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T09:29:31.877

你不应该`this`在立即匿名函数中使用，它没有意义。`this`建议稍后使用创建的对象，并且立即函数具有相反的目的 - 在执行后立即销毁它的命名空间。在您的示例`this`中，应指全局对象 window。

# c# - C#搜索文本文件，返回包含一个单词的所有行

> ID：10120693
> 
> 赞同：5
> 
> 时间：2012-04-12T09:15:18.333
> 
> 标签：c#, winforms, full-text-search

我需要帮助我在实习期间建立的一个项目。这个想法是检查用户在任何 PC 上登录的频率。当用户登录时，该信息会记录在一个文本文件中，就像这种格式。

```
01-01-2011 16:47:10-002481C218B0-WS3092-Chsbe (XP-D790PRO1) 
```

现在我需要搜索文本文件并（例如）在文本文件中搜索用户 Chsbe 的所有登录日期。

到目前为止我的代码：

```
private void btnZoek_Click(object sender, EventArgs e)
        {
            int counter = 0; string line;  
            // Read the file and display it line by line. 
            System.IO.StreamReader file = new System.IO.StreamReader("c:\\log.txt"); 
            while((line = file.ReadLine()) != null)
            {     if ( line.Contains(txtZoek.Text) )     
            {
                txtResult.Text = line.ToString();                
            }     

            }  
            file.Close(); 
        } 
```

我的问题是，如何将包含搜索项的日志中的所有字符串返回到 txtResult？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T09:21:50.647

你已经做得很好了。唯一的错误是写入文本框的最后一行会覆盖前一行。
您需要使用 StringBuilder 和`using`围绕一次性 Stream 的语句，如下所示：

```
private void btnZoek_Click(object sender, EventArgs e)         
{             
    int counter = 0; string line;               
    StringBuilder sb = new StringBuilder();

    // Read the file and display it line by line.              
    using(System.IO.StreamReader file = new System.IO.StreamReader("c:\\log.txt"))
    {
       while((line = file.ReadLine()) != null)             
       {     
         if ( line.Contains(txtZoek.Text) )                  
         {          
              // This append the text and a newline into the StringBuilder buffer       
              sb.AppendLine(line.ToString());
         }                   
      }               
   }
   txtResult.Text = sb.ToString();
} 
```

当然，您的 txtResult 应该将属性 MultiLine 设置为 true，否则您将无法看到输出。
请记住，这`using`是处理这种情况的更好方法，因为它还会自动处理意外的文件异常，注意正确关闭您的 Stream

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:18:58.057

例如，使用richtextbox 或使用多行属性

```
private void btnZoek_Click(object sender, EventArgs e)
    {
        int counter = 0; string line;  
        // Read the file and display it line by line. 
        System.IO.StreamReader file = new System.IO.StreamReader("c:\\log.txt"); 
        while((line = file.ReadLine()) != null)
        {     if ( line.Contains(txtZoek.Text) )     
        {
            richtextbox1.Text += "\n" + line.ToString();
            txtresult.Text += "\n" + line.ToString();
        }     

        }  
        file.Close(); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:20:45.797

定义一个列表

列出 yourList = new List();

替换 Line txtResult.Text = line.ToString();
通过 yourList.Add(line);

在列表“yourList”中，你得到了包含用户的所有行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:21:08.950

类似下面的内容可能会帮助您开始使用正则表达式：

```
string pattern = "Chsbe"; 
Regex rx = new Regex(pattern, RegexOptions.IgnoreCase); 
MatchCollection mc = rx.Matches(inputText); 

foreach (Match m in mc) 
{ 
    Console.WriteLine(m.Value); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T09:22:08.680

```
private void btnZoek_Click(object sender, EventArgs e)
{
    int counter = 0; string line;  
    StringBuilder str = new StringBuilder();
    // Read the file and display it line by line. 
    System.IO.StreamReader file = new System.IO.StreamReader("c:\\log.txt"); 
    while((line = file.ReadLine()) != null)
    {
        if (line.Contains(txtZoek.Text))     
        {
            str.Append(line.ToString());                
        }     
    }  
    file.Close(); 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T09:22:29.980

也许这样的事情会奏效。

```
 private void btnZoek_Click(object sender, EventArgs e)
    {
        int counter = 0; string line;  
        // Read the file and display it line by line. 
        System.IO.StreamReader file = new System.IO.StreamReader("c:\\log.txt"); 
        while((line = file.ReadLine()) != null)
        {     if ( line.Contains(txtZoek.Text) )     
        {
            txtResult.Text = txtResult.Text + Environment.Newline + line.ToString();                
        }     

        }  
        file.Close(); 
    } 
```

这将是我的版本：

```
 private void btnZoek_Click(object sender, EventArgs e)
    {
        try
        {
            int counter = 0;
            string line;
            List<String> LinesFound = new List<string>();

            // Read the file and display it line by line. 
            System.IO.StreamReader file = new System.IO.StreamReader("c:\\log.txt");

            while ((line = file.ReadLine()) != null)
            {
                if (line.Contains(txtZoek.Text))
                {
                    LinesFound.Add(line);
                }

            }
            file.Close();

            foreach (string Line in LinesFound)
            {
                txtResult.Text = txtResult.Text + Line + Environment.NewLine;
            }
        }
        catch (Exception)
        {
            MessageBox.Show("Error in btnZoek_Click");
        }
    } 
```

如果列表真的很长，我会使用 StringBuilder 创建结果字符串作为性能加速。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-13T08:28:50.217

尝试更改此行->

```
txtResult.Text = line.ToString(); 
```

到：

```
txtResult.Text += line.ToString(); 
```

# vbscript - 从 TXT 文件中将字符串从位置 X 提取到位置 Y

> ID：10120694
> 
> 赞同：0
> 
> 时间：2012-04-12T09:15:20.527
> 
> 标签：vbscript

选择“显示图片”以显示嵌入的图片。显示图片

我有很多 txt 文件，我需要从中提取数据以插入 SQL DB

这些文件如下所示：

“描述用户时间字段”

“------------- ------ ---------- ------------”

“XXXX YY01 12:01:01 样本”

它就像某种列，规则只是每列的位置和长度，由每列标题描述下方的那些行 (-----) 确定

我需要从每行从位置 X 到 Y 提取字符串，并可能将其写入另一个文件或某处（这并不难）

我需要一个代码来解析该txt中的每一行并为txt中的每一行从位置x返回字符串到位置Y

我怎么能在 vbscript 或 C++/#... 或 powershell 中做到这一点，最后我会做一些 exe 或批处理来自动提取它

任何帮助将不胜感激，因为我对编码不是很熟悉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:27:51.963

这是一个简单的 vbscript 例程，它使用分隔符来分割

```
const ForWriting = 2, ForReading = 1
set oFso = CreateObject("Scripting.FileSystemObject")
set oInFile = oFso.OpenTextFile(sFilenameIn, ForReading)
do While oInFile.AtEndOfStream <> True
    sLine = oInFile.readline 'skip the first tow lines or use a condition to check for content
    sLine = oInFile.readline
    sLine = oInFile.readline
    a = split(sLine," ") 'here the delimiter is a space, parse line in array
    field1 = a(1) 'YY01 for the first data line
    field2 = a(2) '12:01:01 for the first data line
    'do something with the data
loop 
```

如果您不能使用分隔符，请使用类似

```
field1 = mid(sLine, 6, 4) 'YY01 for the first data line 
```

# java - 使用 Java HTML 解析器检索框架源代码？

> ID：10120696
> 
> 赞同：0
> 
> 时间：2012-04-12T09:15:22.507
> 
> 标签：java, html-parsing

我查看了一些 Java HtmlParser（Jericho、HtmlCLeaner、...），但找不到在检索页面时将 html 框架标记替换为实际源代码的功能。

有谁知道这样做的任何解析器？

回答：

像Phani表示我需要一个Html Scraper（不是解析器，更清洁）

[HtmlUnit](http://htmlunit.sourceforge.net/)似乎可以解决问题：http: [//htmlunit.sourceforge.net/frame-howto.html](http://htmlunit.sourceforge.net/frame-howto.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:43:26.240

从您的用例来看，您需要刮板而不是清洁器。

清洁剂——通常是脏的、形状不良的，不适合进一步加工。对于此类文档的任何严重消费，首先需要清理混乱，并为标签、属性和普通文本排序。

Scraper - 以编程方式阅读页面并编辑 html 页面。

[http://sourceforge.net/projects/htmlscraper/](http://sourceforge.net/projects/htmlscraper/)

# javascript - jQuery Mobile 在 iPhone 3GS 上的超慢性能

> ID：10120697
> 
> 赞同：1
> 
> 时间：2012-04-12T09:15:28.657
> 
> 标签：javascript, iphone, performance, mobile, jquery-mobile

嗨，我有一个带有标题、内容窗格和大约 120 个列表项的页面。基本上，这在带有 ios5 的 iphone 3gs 上执行得如此缓慢和错误。

以下是它的一些作用：

1.  在上面那个页面之前有一个登录页面，要到达微调器旋转上方的那个页面，然后停止旋转并冻结，然后屏幕变灰大约一两秒，然后显示上面的页面（并且我在本地托管网站在服务器上）。

2.  页面加载后，向下滚动会很犹豫，每次滚动都会停止然后开始，它非常生涩，直到我一直向下滚动一次，然后它会好一点。向下滚动页面时，通常会以棋盘格背景完全空白......

3.  轻按上述列表中的任何项目大约需要 3 秒钟才能亮起蓝色，然后再需要几秒钟才能真正转到下一页（与微调器相同的冻结问题）。

4.  一旦下一页加载它的内容与上面的页面混合在一起，所以它们就像在彼此之上，它需要一秒钟才能消失。

如您所见，这是一次可怕的经历。我公司有很多3gs手机，有什么办法可以提高性能吗？

编辑1：

这是完整的页面代码： http: [//pastebin.com/VLXyeCty](http://pastebin.com/VLXyeCty)

custom.css 包含 1 种样式来修复最新 jqm 中的气泡位置：

```
.ui-li-has-alt .ui-li-count {
    right: 67px !important;
} 
```

# iphone - 在 iPhone 中更改 UISegmentedControl 的文本大小

> ID：10120699
> 
> 赞同：-1
> 
> 时间：2012-04-12T09:15:36.377
> 
> 标签：iphone, objective-c, ios, xcode, ipad

> **可能重复：**
> [更改 UISegmentedControl](https://stackoverflow.com/questions/2280391/change-font-size-of-uisegmentedcontrol)
> [的字体大小 如何更改 UISegmentedControl 文本的字体大小？](https://stackoverflow.com/questions/3493801/how-to-change-the-font-size-of-uisegmentedcontrol-text)

如何更改分段控件的文本大小？

任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T10:25:20.277

> **注意：**这仅适用于**iOS5+。**

```
UIFont *font = [UIFont boldSystemFontOfSize:12.0f];
NSDictionary *attributes = [NSDictionary dictionaryWithObject:font
                                                       forKey:UITextAttributeFont];
[segmentedControl setTitleTextAttributes:attributes 
                                forState:UIControlStateNormal]; 
```

# asp.net - 安装在服务器上时渲染 ASP.NET 应用程序（asp:Menu 和 Ajax 不工作）

> ID：10120701
> 
> 赞同：0
> 
> 时间：2012-04-12T09:15:37.517
> 
> 标签：asp.net, iis-7, asp.net-ajax

我使用 AJAX 控制工具包在 .NET 4.0 中开发了一个 ASP.NET 网站，它在我的本地 IIS 上运行良好，但是当我将它安装在生产服务器上时（它是带有 IIS 7 的 Windows Server 2008）它没有正确渲染（在任何浏览器中）...我有一个 asp 菜单，它没有按应有的方式渲染（选项在鼠标悬停时不显示，它是垂直的，应该是水平的）并且 AJAX 控件都不起作用（更新面板和模态弹出窗口）...我一直在尝试一切，但到目前为止我还没有运气，所以如果你们有任何想法，请帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:35:14.263

听起来您有一些参考路径问题。启动 Fiddler（或 Firebug、IE 开发工具等）并查看在尝试加载 JS 或 CSS 文件时是否收到任何 404 错误。

# shell - 焦油混淆的退出状态

> ID：10120702
> 
> 赞同：2
> 
> 时间：2012-04-12T09:15:43.660
> 
> 标签：shell, tar, suse, exitstatus

我正在使用 ksh

dummpy_file 不存在。查找 tar 的退出状态

SUSE10 / tar 版本 GNU 1.15.1

```
>gunzip -d dummpy_file | tar xvf -
gunzip : dummpy_file: No such file or directory
>echo $?
>0 
```

SUSE11 / tar 版本 GNU 1.20

```
>gunzip -d dummpy_file | tar xvf -
gunzip : dummpy_file No such file or directory   
tar : This does not look tar archive  
tar: Error exit delayed from previous errors  
>echo $?   
>2 
```

不同的 tar 版本是否会导致行为差异？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:34:58.533

是的，`tar`1.19[修复](http://www.gnu.org/software/tar/#releases)了以下错误：

```
Recognition of broken archives.
When supplied an archive smaller than 512 bytes in reading mode (-x, -t), previous tar
versions silently ignored it, exiting with code 0\. It is fixed. Tar now issues the
following diagnostic message: This does not look like a tar archive, and exits with code 2." 
```

当`gunzip`管道开始处的程序找不到它应该解包的文件时，它会退出并向其标准输出发出 0 字节。旧`tar`版本的行为就像 0 字节是正确的 tar 存档一样，因此没有错误消息。

# php - Facebook 扩展访问令牌不起作用 - 但一切似乎都很好（？）

> ID：10120704
> 
> 赞同：0
> 
> 时间：2012-04-12T09:15:49.700
> 
> 标签：php, facebook, oauth-2.0, access-token

我尝试从服务器端请求中获取 60 天的 facebook 访问令牌。用户登录后，我通过 Facebook SDK 中的 getAccessToken() 函数检查访问令牌，然后使用我在此处某处找到的 getExtendedAccessToken()：[How to extend access token validation since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation) to ask for 60 days access token：

```
 public function getExtendedAccessToken() {

        try {
        // need to circumvent json_decode by calling _oauthRequest
        // directly, since response isn't JSON format.
        $access_token_response =
            $this->_oauthRequest(
                $this->getUrl('graph', '/oauth/access_token'),
                    $params = array(    'client_id' => $this->getAppId(),
                                'client_secret' => $this->getApiSecret(),
                                'grant_type'=>'fb_exchange_token',
                                'fb_exchange_token'=>$this->getAccessToken(),
                 ));

        } catch (FacebookApiException $e) {
        // most likely that user very recently revoked authorization.
        // In any event, we don't have an access token, so say so.
              return false;
        }

        if (empty($access_token_response)) {
             return false;
        }

        $response_params = array();
        parse_str($access_token_response, $response_params);
        if (!isset($response_params['access_token'])) {
            return false;
        }

        return $response_params['access_token'];
        } 
```

不幸的是，它仍然无法工作我的访问令牌在 2 小时后过期，所以我也尝试了这个：

```
 public function getSimpleExtendedAccessToken(){

    $request = 'https://graph.facebook.com/oauth/access_token?
                client_id='. $this->getAppId(). 
                '&client_secret=' .$this->getApiSecret(). 
                '&grant_type=fb_exchange_token
                &fb_exchange_token=' .$this->getAccessToken();

    $response = file_get_contents($request);
    $params = null;
    parse_str($response, $params);
    return $params['access_token'];
} 
```

而这个也在2小时后过期。但是，当我`$params`在第二个函数中检查数组内部的内容时，上面写着：

> 数组（[access_token] => AAAFM5sO7[...] [expires] => 4897）

（那部分：“ `AAAFM5sO7[...]`”当然是我的访问令牌号）

我收到的所有访问令牌都是相同的：第一个来自`getAccessToken()`，第二个来自`getExtendedAccessToken()`，第三个来自`getSimpleExtendedAccessToken()`。

当然，当我越来越多地要求扩展访问令牌时，到期号不会更新，但它会倒计时，从 Facebook 文档的角度来看，这是正确的，因为您不能每次都要求新的访问令牌分钟，但为什么我无法获得 60 天的访问令牌？

谁能帮助我，因为我有点困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:31:01.540

我对自己的问题有部分答案。我尝试接收自己的扩展访问令牌（并且我是应用程序的所有者），因此 Facebook 没有给我扩展令牌，但是当我尝试使用其他令牌时，我会收到常规的 60 天访问令牌。

# menu - 如何在 Orchard CMS 中制作多个菜单

> ID：10120705
> 
> 赞同：1
> 
> 时间：2012-04-12T09:15:52.490
> 
> 标签：menu, orchardcms

我想在 Orchard 1.4 的某些页面上制作基于内容的子导航，但我不知道如何。我可以通过使用高级菜单模块或任何其他模块来实现这一点吗？或者有没有办法在没有模块的情况下完成这项工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:27:11.920

你需要一个模块。（一些随机的文字让我很开心）

# grails - 如何更改grails中的主键列？

> ID：10120708
> 
> 赞同：10
> 
> 时间：2012-04-12T09:15:58.810
> 
> 标签：grails, grails-orm

我有一个具有整数变量“代码”的域类。我的要求是为该域创建“代码”主键列，并自动递增并从为该 doamin.thnks 创建的表中删除默认的“id”列

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T09:27:37.540

用这个 ：

```
static mapping = {
id name: 'code'
} 
```

更多信息在这里： http: [//grails.org/doc/2.0.x/ref/Database%20Mapping/id.html](http://grails.org/doc/2.0.x/ref/Database%20Mapping/id.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T09:30:47.603

默认情况下，Grails 中的域类使用合理的默认值指定它们映射到数据库的方式。您可以使用 ORM 映射 DSL 自定义这些。

自定义域类标识符的生成方式`id`。有关 id 的信息，请参阅[Grails 文档](http://grails.org/doc/latest/ref/Database%20Mapping/id.html)。

```
static mapping = {
    id column: 'code', type: 'integer'
} 
```

# java - printStackTrace() 和 toString() 之间的区别

> ID：10120709
> 
> 赞同：64
> 
> 时间：2012-04-12T09:15:59.870
> 
> 标签：java

我很好奇 printStackTrace() 和 toString() 之间有什么区别。乍一看，他们**似乎**在做同样的事情。

代码：

```
try {
// Some code
} catch (Exception e)
   e.printStackTrace();
   // OR
   e.toString()
} 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-12T09:16:26.767

不，有一个重要的区别！使用 toString，您只有异常的类型和错误消息。使用 printStackTrace() 可以获得异常的整个堆栈跟踪，这对调试非常有帮助。

System.out.println(toString()) 的示例：

```
java.io.FileNotFoundException: yourFile.txt (The system cannot find the file specified) 
```

printStackTrace() 示例：

```
java.io.FileNotFoundException: yourFile.txt (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.(FileInputStream.java:106)
at java.io.FileReader.(FileReader.java:55)
at ReadFromFile.main(ReadFromFile.java:14) 
```

要制作整个堆栈跟踪的字符串，我通常使用这种方法：

```
public static String exceptionStacktraceToString(Exception e)
{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(baos);
    e.printStackTrace(ps);
    ps.close();
    return baos.toString();
} 
```

另请注意，简单地调用`toString()`只是返回一个字符串，并且不会打印任何内容。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-04-13T08:24:14.890

要将 StackTrace 转换为 String，我使用的更短的实现是：

```
public static String exceptionStacktraceToString(Exception e)
{
    return Arrays.toString(e.getStackTrace());
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-12T09:17:49.897

不，有很大的不同。如果您*只是*调用`toString`，它*不会打印任何东西*- 它只会*返回*一个字符串。一个 catch 块`e.toString();`是没用的。（正如 Martijn 所指出的，还有堆栈跟踪的问题。）

不过，我个人不会使用任何一种——我会使用一个日志库（log4j、java.util.logging 等），它将`Throwable`自身作为参数，并将有用地格式化它——包括堆栈跟踪，可能会被截断以避免重复.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-13T00:15:09.327

我认为您想获得 的输出`Throwable.printStackTrace()`，就像我一直在寻找的那样。我检查了 Java 源代码并将 a 放在一起，`String`而不是写入`PrintStream`. 它比@MartijnCourteaux 解决方案更全面，但对我来说有点像黑客。

至于您的答案，您实际上可以看到这`Throwable.toString()`只是以下内容的一部分`Throwable.printStackTrace()`：

```
public static String getStackTraceString(Throwable e) {
    return getStackTraceString(e, "");
}

private static String getStackTraceString(Throwable e, String indent) {
    StringBuilder sb = new StringBuilder();
    sb.append(e.toString());
    sb.append("\n");

    StackTraceElement[] stack = e.getStackTrace();
    if (stack != null) {
        for (StackTraceElement stackTraceElement : stack) {
            sb.append(indent);
            sb.append("\tat ");
            sb.append(stackTraceElement.toString());
            sb.append("\n");
        }
    }

    Throwable[] suppressedExceptions = e.getSuppressed();
    // Print suppressed exceptions indented one level deeper.
    if (suppressedExceptions != null) {
        for (Throwable throwable : suppressedExceptions) {
            sb.append(indent);
            sb.append("\tSuppressed: ");
            sb.append(getStackTraceString(throwable, indent + "\t"));
        }
    }

    Throwable cause = e.getCause();
    if (cause != null) {
        sb.append(indent);
        sb.append("Caused by: ");
        sb.append(getStackTraceString(cause, indent));
    }

    return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T09:18:14.160

`toString ()`在引发异常时给出异常类的名称，并`printStackTrace ()`给出在应用程序中引发异常时所在的方法执行的条目层次结构。

对于代码

```
 try 
    {
        List<String>  n =new ArrayList<String>();
        String i = n.get(3); 
    }catch (Exception e) {
        e.printStackTrace();
    }
   } 
```

`e.printStackTrace()`会给

```
java.lang.IndexOutOfBoundsException: Index: 3, Size: 0
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at com.o2.business.util.Trial.test(CommonUtilsTest.java:866) 
```

正如乔恩在回答中所写的那样，虽然`e.toString()`不会打印任何内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-24T02:51:01.317

这是我用于完整堆栈跟踪的`String`

```
public static @NotNull String toString(@NotNull Throwable e) {
    StringWriter sw = new StringWriter();
    e.printStackTrace(new PrintWriter(sw));
    return sw.toString();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-20T11:05:41.787

有一个名为 MgntUtils 的开源 java 库（由我编写），它提供了几种方法，允许您将堆栈跟踪提取为字符串以及可选地基于参数包前缀进行过滤。[有关方法public static java.lang.String getStacktrace(java.lang.Throwable e, boolean cutTBS, java.lang.String relatedPackage)](https://appdoc.app/artifact/com.github.michaelgantman/MgntUtils/1.5.0.2/com/mgnt/utils/TextUtils.html#getStacktrace(java.lang.Throwable,%20boolean,%20java.lang.String))请参阅 javadoc 该库可在[Maven Central](https://search.maven.org/search?q=g:com.github.michaelgantman%20AND%20a:MgntUtils&core=gav)和[Github获得](https://github.com/michaelgantman/Mgnt/releases)

# inheritance - 继承 - 处理基类中的子特定代码

> ID：10120710
> 
> 赞同：1
> 
> 时间：2012-04-12T09:16:08.323
> 
> 标签：inheritance, parent-child

我们有一个父类——平台。所有具体的设备类都继承自这个父类——Device1、Device2、……DeviceN。

根据设备输入，我们创建相应设备类的对象并相应地工作。

我在这段代码中观察到的几件事是基类（平台类）中设备特定行为的处理。例子，

```
function doSomething
{
    initiateSomething();
    .
    if ($base->getPlatform() eq 'Device1')
    {
        ........
    }
    startSomething();
    doneSomething();
} 
```

这种类型的条件设备特定代码分布在父类的各个位置。此代码特定于 Device1，不适用于其他设备。我想把这个设备特定的代码作为一个函数放在 Device1 类中并在这里调用它，但这也没有用。因为这个功能只对Device1实现，所以对其他设备运行这个代码会失败。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:41:50.127

您可以通过为函数的前/后调用设置特定的钩子来实现这一点：

```
function doSomething
{
    initiateSomething();
    .
    preDoSomething();
    startSomething();
    doneSomething();
}

BaseDevice
{
    preDoSomething(){/+no-op+/}
}

Device1
{
    preDoSomething()
    {
      ........
    }
} 
```

# c# - C# HTTP Post 并在获取正文之前只读响应的标头

> ID：10120713
> 
> 赞同：3
> 
> 时间：2012-04-12T09:16:22.157
> 
> 标签：c#, .net, http, post, http-headers

我正在做这样的事情：

```
 var httpWebRequest = WebRequest.Create(context.Url) as HttpWebRequest;
 httpWebRequest.Method = "POST"
 ... (set all the stuff)
 ... (get request stream and post data)

 //Get response
 var httpWebResponse = httpWebRequest.GetResponse() as HttpWebResponse;

 ... (Inspect Headers)

 //Get response stream and read body
 var responseStream = httpWebRequest.GetResponseStream(); 
```

根据我的谦虚期望，我认为调用 GetResponse() 只会获取标题，而当我开始从响应流中读取时，会实际下载正文。实际发生的是，当我调用 GetResponseStream() 并读取它时，数​​据已经可用。响应是普通的 HTML 页面。我相信分块数据效果很好。

所以我的问题是，那里到底发生了什么以及如何在获取正文内容之前仅从 http 帖子中获取标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:28:40.270

使用 GET 或 POST 请求，服务器将发送所有响应数据，而不会在传输中分离标头和“正文”。要仅获取标头，请将 httpWebRequest.Method 设置为“HEAD”并使用 httpWebResponse.Headers ( [http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.headers.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.headers.aspx) ) 收集标头数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T20:16:05.367

添加一些代码：

```
 url = "some web string"
 uri = new UriBuilder(url).Uri;
 request = WebRequest.Create(this.uri);
 request.Method = "HEAD";
 response = request.GetResponse();
 response.Close(); 
```

现在我们只得到了标题。整洁的！访问如：

```
for (int i = 0; i < response.Headers.Count; ++i) {
    Console.WriteLine("\n Header Name:{0}, Value :{1}", response.Headers.Keys[i], response.Headers[i]); 
} 
```

不幸的是，似乎没有办法直接查找特定的标头名称。所以你必须使用一些检查所有键的包装函数。

**编辑：**显然，执行内容类型。你可以用`response.ContentType`.

# .net - 获取单例实例

> ID：10120719
> 
> 赞同：2
> 
> 时间：2012-04-12T09:16:46.767
> 
> 标签：.net, dependency-injection, ninject, ioc-container

我正在测试 Ninject 并试图了解如何将存储库注入单例类。下面是工作存储库和单例类示例......

```
public interface ITestRepository
{
   void TestRepositoryMethod();
}

public class TestRepository:ITestRepository
{
    public void TestRepositoryMethod()
    {

    }
}

public class TestSingletonInjectionClass
{
    private readonly ITestRepository _repository;

    public TestSingletonInjectionClass(
        ITestRepository repository)
    {
        _repository = repository;
    }

    public void TestMethod()
    {

    }
} 
```

成功通过的测试方法

```
[TestMethod]
public void SimpleTestSingleton()
{
    using (IKernel kernel = new StandardKernel())
    {
        kernel.Bind<ITestRepository>().To<TestRepository>();
        var testSingletonInjectionClass = 
            kernel.Get<TestSingletonInjectionClass>();\

        Assert.IsNotNull(testSingletonInjectionClass);
    }
} 
```

我有两个问题

**1.**这是获取单例类实例的正确方法吗？

```
 kernel.Get<TestSingletonInjectionClass>() 
```

**2.**如何从应用代码中获取单例实例类。在测试方法中，我创建 Ninject Kernel 并访问 Get 方法。如何访问ninject内核表单代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T15:04:54.677

您必须将类配置为单例：

```
kernel.Bind<TestSingletonInjectionClass>().ToSelf().InSingletonScope(); 
```

在实现中，您可以通过将其传递给消费类的构造函数来获取它。

```
public class Foo
{
    public Foo(TestSingletonInjectionClass testSingletonInjectionClass)
    {
        this.testSingletonInjectionClass = testSingletonInjectionClass;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:18:24.170

正如您在 ninject 文档 (https://github.com/ninject/ninject/wiki/Object-Scopes) 上所读到的，“InSingletonScope”创建了一种“单例生活方式”，而不是传统的单例。文档说：

“只会创建该类型的一个实例，并且为每个后续请求返回相同的实例。”

这意味着您将只有一个实例 x 容器。如果有人使用另一个容器，将获得另一个实例。

# ruby-on-rails - 为 Ruby on Rails 项目生成 emacs 标签文件

> ID：10120720
> 
> 赞同：18
> 
> 时间：2012-04-12T09:16:47.200
> 
> 标签：ruby-on-rails, ruby, emacs, rvm, ctags

我正在使用以下命令为我的 Ruby on Rails 项目生成 emacs 的标签文件：

```
ctags -f TAGS --extra=-f --languages=-javascript --exclude=.git --exclude=log -e -R . $(rvm gemdir)/gems/ 
```

当我尝试查找标签（使用 M-.）时，一些标签工作正常，但对于许多其他标签，我会收到如下错误：

```
tag-find-file-of-tag-noselect: File /Users/simao/Documents/sp/ofe/° ¡ not found

etags-goto-tag-location: Rerun etags: `^class Tools::FilteringSteps' not found in /Users/simao/Documents/sp/ofe/lib/geo_db.rb 
```

您如何使用 emacs 为您的 RoR 项目生成标签？你以前见过这个问题吗？

这是的输出`ctags --version`

```
Exuberant Ctags 5.8, Copyright (C) 1996-2009 Darren Hiebert
Compiled: Mar  9 2012, 15:47:35
Addresses: <dhiebert@users.sourceforge.net>, http://ctags.sourceforge.net
Optional compiled features: +wildcards, +regex 
```

我的emacs版本：

```
GNU Emacs 24.0.95.1 (x86_64-apple-darwin, NS apple-appkit-1038.36) of 2012-04-02 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-12T10:57:00.070

耶耶耶。;-)

你为什么会关心一开始**就不使用 ctags**呢？Ctags 是一个很棒的项目，它确实支持许多（如 50 种）语言。但是对 Ruby 的支持很弱，解析器状态不好，4 年没换过。

*   Ctags 不处理：模块 A::B
*   Ctags 不标记（至少部分）运算符方法，例如 ==
*   Ctags 不支持限定标签，-type=+
*   Ctags 不输出常量或属性的标签。

不幸的是，所有其他（我发现 2 个）Ruby ctags 生成器要么已经过时（不支持 Ruby 1.9+），要么非常慢。但是有一个解决方案！它被称为**ripper-tags**。[https://github.com/tmm1/ripper-tags](https://github.com/tmm1/ripper-tags)

```
gem install ripper-tags
cd your_project/
ripper-tags -R # for vim
ripper-tags -R -f TAGS # for emacs 
```

该项目利用称为 Ripper 的内置 Ruby 解析器 API。它速度很快，并且按预期工作。它几乎与 ctags 一样快，但提供最准确的结果。警告：它不支持 Ruby 1.8。

如果您喜欢 ripper-tags 并且希望在安装 gem 时自动生成所有标签，您可以查看我的**gem-ripper-tags**。不幸的是，它目前不支持 Emacs（已接受补丁 - 很容易做到）。更多信息：[https ://github.com/lzap/gem-ripper-tags](https://github.com/lzap/gem-ripper-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:27:55.667

如果您使用 Git，我建议您按照 Effortless CTags 中的此设置在执行 git 操作时自动构建您的标签文件：

[http://tbagery.com/2011/08/08/effortless-ctags-with-git.html](http://tbaggery.com/2011/08/08/effortless-ctags-with-git.html)

即使您不使用 Git，您也可以尝试他的命令来构建 CTag：

```
ctags --tag-relative -Rf.git/tags.$$ --exclude=.git --languages=-javascript,sql 
```

另外，我建议您为 bundle install 设置一个别名以指定路径，以便将 gem 捆绑到项目的子目录中，例如：

```
alias bi='bundle install --path vendor' 
```

（注意：一定要 .gitignore 那个目录）。这将允许您直接跳转到每个 gem 的源代码，并防止您的标记文件因系统中的所有 gem 而变得臃肿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:48:26.343

这似乎是相关的：

*   [http://lists.gnu.org/archive/html/bug-gnu-emacs/2011-11/msg00079.html](http://lists.gnu.org/archive/html/bug-gnu-emacs/2011-11/msg00079.html)
*   [http://lists.gnu.org/archive/html/bug-gnu-emacs/2012-03/msg00550.html](http://lists.gnu.org/archive/html/bug-gnu-emacs/2012-03/msg00550.html)

特别注意第二个链接中的注释，表明这个 bug 自 Emacs 22 以来就存在。

假设您没有运行 Emacs 24，听起来您应该将该补丁应用于 etags.el（和字节重新编译）。

（如果您使用的是包含此错误的 Emacs 24 版本，您显然应该更新到最新的预测试版本。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T12:14:19.523

我使用[rtags](https://rubygems.org/gems/rtags)。对我来说，Ruby 比[ctags](http://ctags.sourceforge.net/)效果更好。

# delphi - 从 gprs 调制解调器接收短信

> ID：10120724
> 
> 赞同：2
> 
> 时间：2012-04-12T09:17:13.203
> 
> 标签：delphi, sms, gprs

我已将华为 Gprs 调制解调器连接到我的计算机。我想通过我的 delphi 应用程序接收发送到此设备的短信。

我不知道我该怎么做才能有人指出我正确的方向

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:04:44.003

使用 ComPort 或类似的库连接到调制解调器，然后使用这些扩展的 Hayes 命令：

要输入 PIN 码：

```
AT+CPIN=<pin_code> 
```

使用文本模式而不是 PDU

```
AT+CMGF=1 
```

要开始实时接收短信而不进行轮询并保存到 SIM 卡：

```
AT+CNMI=1,2,0,1,1 
```

要发送短信：

```
AT+CMGS="<recipient>"
Message body.<char #27> 
```

这可能足以让您入门，如果您想要更多功能，您应该真正学习 PDU 语法，它非常强大。

你也可以参考我几年前写的一个简单的短信网关： [SmsManager.pas](http://dl.dropbox.com/u/2955838/smsmanage.pas)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T19:39:00.023

10 年前我写了一个成熟的商业短信网关。所以我想我可以帮助你:)

您需要熟悉短信的 PDU 编码，因为这将为您提供最大的灵活性。为了更好地理解 PDU 编码，我建议您访问[此站点](http://www.dreamfabric.com/sms/)。从调制解调器手册开始阅读有关调制解调器支持的 AT 命令集也非常有用。大多数命令是通用的，并且所有调制解调器品牌都支持。

以下是一些帮助您入门的命令：

```
AT+CMGS : to send an sms
AT+CMGR : to read an sms
AT+CMGD : to delete an sms from the mobile 
```

如果您想了解如何与调制解调器通信、解码/编码消息、转换字符集等，我建议您查看 ( [kannel sms gateway](http://www.kannel.org) ) 的源代码。（提示：在文件夹 gw\smsc 下搜索文件 smsc_at.c）。代码是用 c 编写的，但应该不难理解（不过，欢迎了解一点 C 知识）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T09:19:20.463

您将需要通过串行端口使用 AT 命令与调制解调器进行通信（物理/在 USB 的情况下为模拟）。您可以搜索类似的程序以及您需要发出哪些 AT 命令来阅读消息。

# jquery - 是否可以在 jQuery 中绑定图像更改事件

> ID：10120733
> 
> 赞同：0
> 
> 时间：2012-04-12T09:17:35.237
> 
> 标签：jquery

我的页面上有图像。对于图像更改，我正在使用 ajax。我有 dataTable ，其中每一行都有一个图像和一个（锚）元素。我正在制作一个脚本，我试图在其中迭代表格的每一行，如果每一行上的图像源属性包含子字符串“no-preview.jpg”，则隐藏该行的 a(anchor) 元素. 美好的。但问题是当我的页面加载时脚本运行并隐藏所有删除链接，但是当我选择使用 ajax 更新的图像和图像时，由于 ajax，脚本不会运行。

现在我想问一下是否有任何与图像有关的事件可以用来监听图像变化。那就是每当我的图像 scr 属性发生变化时，该事件就会在 jQuery 中触发。可能是我必须委派活动。

## **编辑**

```
var saarcImages = $("#SaarcImage #saarcImagesTable tr").each(function(index){

    var $tr = $(this);
    var $image = $tr.find("img");

    if ($image.length != 0) {   //Image exist

        var imageSource = $image.attr("src");       
        var contains = imageSource.indexOf("no-preview.jpg") >= 0; // true
        if (contains) {

            $tr.find("a").fadeOut("slow");

        } else {

            $tr.find("a").fadeIn("slow");

        }
    }
}); //end of .each() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:29:02.330

你至少有两个选择：

*   监听`load`图像上的事件，每次加载图像时都应该调用它，
*   创建您自己的事件（例如`imagechange`，最好命名空间为 like `imagechange.mymodule`）并在每次使用 jQuery`.trigger()`函数更改图像后触发它 - 它会调用适当的事件处理程序（如果您附加它），

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:27:03.423

Maybe you are looking for something like this:

```
//YOUR AJAX CALL TO RETRIEVE IMAGE
$.post('yourURLhere',{myVar : myValue}, function(info) {

          //WAIT FOR IMAGE TO LOAD
          $('img[title="item_picture"]').load(function() {
                    //DO SOMETHING HERE ONCE IMAGE IS LOADED
          }); 

}); 
```

# android - Android上的Temple Run根据USB连接将数据存储在不同的位置

> ID：10120734
> 
> 赞同：0
> 
> 时间：2012-04-12T09:17:38.343
> 
> 标签：android

当我在 Android 上玩 Temple Run 时，该应用程序将数据存储在某个地方。如果我启用 USB 连接然后尝试玩游戏，该应用程序现在会将这些信息存储在一个全新的位置，这样我之前的信息就不再可见了。只有当我禁用 USB 连接时，才会使用以前的数据。

换句话说，如果安装了 SD 卡，我将作为一个全新的用户开始，并且只有在卸载 SD 卡时才能恢复我的旧状态。

这是一个什么样的存储？为什么我挂载 SD 卡时看不到它？换手机和保留SD卡时可以保留数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:21:19.287

他们可能会检查 SD 卡是否可用，如果没有，则使用内部存储。
当您安装 SD 卡时，应用程序无法访问它，因此它切换到内部存储，您没有任何保存的游戏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:21:26.827

听起来它必须将其存储在 SD 卡上，当您将手机插入 USB 端口时，它会将 SD 卡安装到您的计算机上，不允许从您的游戏中访问它......所以游戏将回退到内部存储（在电话）。

当您插入手机时，它将默认安装 SD 卡，将其更改为“Just Charge”并尝试玩游戏。

# c++ - 用 boost 精神分离 AST 的创建和计算

> ID：10120735
> 
> 赞同：0
> 
> 时间：2012-04-12T09:17:41.807
> 
> 标签：c++, boost, syntax, tree, calculator

我尝试构建一个非常简单的计算器，支持 x,y,+,-,*,/(,)。这个想法很简单：

1.  从输入字符串构建语法树（可能是：“x+3y”）
2.  对于给定的 x,y，通过解析语法树并为 x 和 y 插入整数来计算结果。

使用 boost 1.46，您可以使用 parse_phrase() 轻松地同时完成这两个步骤。但是，我必须执行步骤 2 一百万次，而解析不会改变。所以我想把它分开（就像经典精神版本中常见的那样）。我怎样才能做到这一点？（请注意：boost 1.46 还没有 utree 数据结构）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:25:12.887

与此同时，我得到了解决方案。这很简单，请查看[此处链接的 boost 文档](http://www.boost.org/doc/libs/1_46_1/libs/spirit/example/qi/calc2_ast.cpp)。

main() 函数包含以下代码：

```
expression_ast ast;
ast_print printer;
bool r = phrase_parse(iter, end, calc, space, ast);

if (r && iter == end)
{
    // [...]
    printer(ast);
    // [...]
} 
```

boost 中实际上有多个phrase_parse() 函数。[如boost docs 中](http://www.boost.org/doc/libs/1_46_0/libs/spirit/doc/html/spirit/qi/tutorials/number_list_attribute___one_more__with_style.html)所述，phrase_parse 的变体没有和“phrase_parse 的变体[s] 带有一个附加参数：解析器的属性。” 。在上面的代码中，`ast`是解析器的属性；`printer`然后评估 ast。

如果我们想从外部评估具有不同值的打印机，我们将在每次调用`printer(ast)`.

1.46 的注意事项：`boost::utree`还没有。但是，此示例中的 AST 是全功能的替代品。

# javascript - (function() 在这个特定的代码段中是什么意思？

> ID：10120742
> 
> 赞同：2
> 
> 时间：2012-04-12T09:18:02.273
> 
> 标签：javascript, ajax, mozilla

我正在（重新）从[https://developer.mozilla.org/en/AJAX/Getting_Started](https://developer.mozilla.org/en/AJAX/Getting_Started)上的 Mozilla 站点学习 Ajax ，我面临着这段代码：

```
(function () {
    var httpRequest;
    document.getElementById("ajaxButton").onclick = function () {
        makeRequest('test.html');
    };

    function makeRequest(url) {
        if (window.XMLHttpRequest) { // Mozilla, Safari, ...
            httpRequest = new XMLHttpRequest();
        } else if (window.ActiveXObject) { // IE
            try {
                httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {}
            }
        }

        if (!httpRequest) {
            alert('Giving up :( Cannot create an XMLHTTP instance');
            return false;
        }
        httpRequest.onreadystatechange = alertContents;
        httpRequest.open('GET', url);
        httpRequest.send();
    }

    function alertContents() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                alert(httpRequest.responseText);
            } else {
                alert('There was a problem with the request.');
            }
        }
    }
} //missing closing bracket added by bwalton 5/11/11\.   )(); 
```

虽然我设法理解了代码并让它工作，但直到我剥离了顶部的“（function（）{”部分和这段代码段末尾的所有结束括号。问题是我没有了解“（函数{”的目的，而FF似乎也没有。（在我剥离“（函数{”部分之前，它不会将此段识别为Javascript。有人知道这段代码的目的吗？）我知道我也在某个地方看到过它，这次我想知道它的确切含义。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T09:20:28.917

这：

```
(function() {
    ...
})(); 
```

创建一个函数并立即使用它自己的作用域调用它。一个常见的术语是 IIFE——“立即调用的函数表达式”。

在这种情况下，您无意中合并了最后两行，因此提到的单行注释`bwalton`通过删除尾随`) ();`.

没有尾随`()` 你有一个函数引用，但它没有被调用。

修复代码副本所需要做的就是在`bwalton 5/11/11.`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:20:51.067

`(function() { /* code here */ })();`创建一个匿名函数并就地执行它。目的之一是创建本地范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:22:10.427

你看到了吗 ()();

这是附加到某个值的调用括号。现在。

```
(function(){}); 
```

是一个函数，括号下封闭的匿名函数。全部加起来。

```
(function(){}) (); 
```

对括号中的函数的调用。惊人的！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:28:35.763

如上所述，这是一个闭包，有关闭包的更多信息，请参阅链接[http://jibbering.com/faq/notes/closures/](http://jibbering.com/faq/notes/closures/)

# c# - BackgroundTransferService Ram 问题

> ID：10120744
> 
> 赞同：1
> 
> 时间：2012-04-12T09:18:07.530
> 
> 标签：c#, windows-phone-7

我对 BackgroundTransferRequest RAM 效率有些怀疑，或者更可能是我遗漏了一些东西。

BackgroundTransferRequest 应该初始化一个 Web 请求（默认为 GET），然后将响应存储到由 DownloadLocation 指定的 IsolatedStorage，因此我们不应该打开任何包含结果的流，我们只有在 IsolatedStorage 中的物理文件。

简单、轻松、高效。

那么，为什么在 200 次成功下载后我仍然有 42k 占用的内存？

当然，如果我重新启动应用程序，我有 1k 占用的 ram 并且以前下载的文件仍然在独立存储上，所以我们可能在 BackgroundTransferRequest 上有一些东西占用了 ram 并且永远不会释放它，尽管有 dispose 调用。

如果我做错了什么，请纠正我。

您可以在下面看到用于添加和删除传输的代码片段。

**初始化传输**

```
 BackgroundTransferRequest transferRequest = new BackgroundTransferRequest(transfer.TransferUri);
                transfer.RequestId = transferRequest.RequestId;
                transferRequest.DownloadLocation = transfer.DestinationUri;
                transferRequest.TransferPreferences = TransferPreferences.AllowCellularAndBattery;
                BackgroundTransferService.Add(transferRequest); 
```

**完成后，删除转移**

```
 BackgroundTransferRequest transferToRemove = BackgroundTransferService.Find(transferID);
                if (transferToRemove != null)
                {
                    BackgroundTransferService.Remove(transferToRemove);
                    transferToRemove.Dispose();
                    transferToRemove = null;
                } 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T17:09:55.167

使用 BackgroundTransferService 类时，您必须非常小心对 BackgroundTransferRequest 对象的引用以避免内存泄漏。

```
_BackgroundRequests = BackgroundTransferService.Requests; 
```

先前的分配将创建对 BackgroundTransferRequest 对象的新引用，因此您应该始终处理现有的引用以避免内存泄漏。

如果在您的代码中保留对 BackgroundTransferService.Requests 列表的本地引用，则在使用 Requests 属性时应始终处理旧引用。

```
foreach(var Request in _BackgroundRequests)
{
    Request.Dispose();
}

_BackgroundRequests = BackgroundTransferService.Requests; 
```

由于 BackgroundTransferService 最多允许 5 个 BackgroundTransferRequest 对象排队，因此可以尝试使用 BackgroundTransferService.Requests 列表中的 Count() 方法。

请记住，这将创建新的引用并可能导致内存泄漏。最好的解决方案是保留当前排队传输的内部计数器，或者从不关心排队传输的数量，并在排队的请求过多时处理服务抛出的异常。

最后，一旦BackgroundTransferRequest 对象完成（成功与否），就应该处理它们，但您已经这样做了。

# android - 将字符串转换为日期不起作用

> ID：10120746
> 
> 赞同：0
> 
> 时间：2012-04-12T09:18:14.953
> 
> 标签：android, simpledateformat

```
String date="12/20/20102";
        SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");           
             Date today;
            try {
                today = df.parse(date.trim());
              Log.e("Error", "Correct");
            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block
                Log.e("Error", "InCorrect");
            } 
```

我无法纠正这个问题。我总是得到这个转换，如果我给出一个不正确的日期字符串，它也不会在异常中捕获。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:20:29.870

`String date="12/2/2012"`应该是`String date="12/02/2012"`。应该有前导零。
前任。

```
int month = 3;
int dayOfMonth = 4;
int year = 2012;

String date = String.format("%02d",dayOfMonth)+"/"
             + String.format("%02d",month)+"/" 
             + year; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:31:56.460

试试这个方法

```
 String s_date="12/1/2006";
 Date date = null ; 
 DateFormat formatter= new SimpleDateFormat("dd/MM/yyyy");
 date = (Date)formatter.parse(s_date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:36:48.480

您的字符串输入是：

```
String date="12/20/20102";
SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy"); 
```

两个错误：

1.  字符串日期 = "12/20/ **20122** "; // 它应该是“2012 年 12 月 20**日**”

2.  您的字符串输入采用**MM/dd/yyyy**格式，而您尝试以**dd/MM/yyyy**格式进行解析。更改您的字符串输入格式 (20/12/2012) 或将格式化程序更改为 (MM/dd/yyyy)。

**编辑**

这是用于验证**dd/MM/yyyy**格式的用户输入日期的示例代码。

```
String str = txt.getText().toString();

            try{
            String tmp[] = str.split("/");
            int day = Integer.parseInt(tmp[0]);
            int month = Integer.parseInt(tmp[1]);
            int year = Integer.parseInt(tmp[2]);

                if(!(day > 31) && !(month > 12) && (tmp[2].length() == 4) )
                {
                    // Verified date....
                }
                else
                {
                    Toast.makeText(getBaseContext(), "Please enter date in correct format. (dd/MM/yyy)", Toast.LENGTH_SHORT).show();
                }
            }
            catch (Exception e) {
                Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_SHORT).show();
            } 
```

注意：闰年和二月逻辑未实现。

对所有可用条件进行全面验证。 [http://www.mkyong.com/regular-expressions/how-to-validate-date-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-date-with-regular-expression/)

如果它对您有帮助，请不要忘记接受这一点。

谢谢...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T09:27:59.740

在您的代码中，您有 String date="12/20/20102";

这是正确的还是必须是正确的

```
String date="12/20/2012"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T11:42:45.493

您想要验证用户输入的日期。

你的代码是。

```
String date="12/20/20102";
    SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");           
         Date today;
        try {
            today = df.parse(date.trim());
          Log.e("Error", "Correct");
        } catch (java.text.ParseException e) {
            // TODO Auto-generated catch block
            Log.e("Error", "InCorrect");
        } 
```

我知道这不会有任何异常。但是如果您输入**20102**这不会将年份设置为**2012**。所以在上面的代码检查条件之后..

```
 if(!(df.format(today).equals(date))){
                 Log.e("Error", "InCorrect Date");
           } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T10:47:48.707

如果我没记错，您正在检查用户输入的日期是写入还是错误。然后使用以下方法进行检查。

```
private boolean convertStringToDate(String date){
        SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");           
        Date today = null;
        try {
            today = df.parse(date.trim());
            Log.e("Error", "Correct");
        } catch (java.text.ParseException e) {
            // TODO Auto-generated catch block
            Log.e("Error", "InCorrect");
            return false;
        }       
        return true;//if every thing is write
    } 
```

从您的代码中，您可以按如下方式使用它

```
boolean isValidDate = convertStringToDate("12/20/20102"); 
```

# php - 使用 Zend 框架阅读 gmail

> ID：10120747
> 
> 赞同：3
> 
> 时间：2012-04-12T09:18:21.820
> 
> 标签：php, zend-framework, email

我尝试使用 Zend 框架从 gmail 应用程序帐户读取邮件。我刚刚将 Zend Framework 目录传输到我的服务器（路径：/Zend/library/）。

如何加载 Zend Framework 和 Mail 模块？以及如何进一步阅读邮件？

我试过以下没有结果：

```
$path = 'Zend/library/';
set_include_path(get_include_path() . PATH_SEPARATOR . $path); 
```

我相信阅读收件箱的语法类似于：

```
$mail = new Zend_Mail_Storage_Imap(array('host' => 'imap.gmail.com', 'user' => "name@domain.com", 'password' => "mypassword", 'ssl' => 'SSL')); 
```

**编辑**

以下代码有效：

```
$path = 'Zend/library/';
set_include_path(get_include_path() . PATH_SEPARATOR . $path);

require_once 'Zend/Loader/Autoloader.php';
Zend_Loader_Autoloader::getInstance();

$mail = new Zend_Mail_Storage_Imap(array('host'     => 'imap.gmail.com',
                                         'user'     => 'mail@domain.com',
                                         'password' => 'password',
                                         'ssl'      => 'SSL'));
echo $mail->countMessages();` 
```

...但是当我尝试回显未读电子邮件时：

```
echo "Unread mails:\n";
foreach ($mail as $message) {
    if ($message->hasFlag(Zend_Mail_Storage::FLAG_SEEN)) {
        continue;
    }
    // mark recent/new mails
    if ($message->hasFlag(Zend_Mail_Storage::FLAG_RECENT)) {
        echo '! ';
    } else {
        echo '  ';
    }
    echo $message->subject . "\n";
} 
```

我收到以下消息：

```
Fatal error: Uncaught exception 'Zend_Mail_Storage_Exception' with message 'cannot login, user or password wrong' in /var/www/zvinx.dk/test/Zend/library/Zend/Mail/Storage/Imap.php:279 Stack trace: #0 /var/www/zvinx.dk/test/gmail.php(11): Zend_Mail_Storage_Imap->__construct(Array) #1 {main} thrown in /var/www/zvinx.dk/test/Zend/library/Zend/Mail/Storage/Imap.php on line 279 
```

它说用户名或密码错误，这很奇怪，因为我没有从它工作时更改它......这个错误是怎么发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:22:21.083

gmail 设置有点棘手。尝试：

```
$mail = new Zend_Mail_Storage_Imap(array('host'     => 'imap.gmail.com',
                                         'user'     => 'mail@domain.com',
                                         'port'     => '993',
                                         'password' => 'password',
                                         'ssl'      => 'tls',
                                         'auth'     => 'login'
                                          )); 
```

注意：gmail 使用的 SSL/TLS 协议显然与标准 SSL 不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:21:51.507

你真的不认为你可以在不阅读/学习框架基础知识的情况下开始使用 Zend 框架吗？至少看一下如何使用具有自动加载功能的框架的[快速入门，然后深入了解](http://framework.zend.com/manual/en/learning.quickstart.intro.html)[Zend_Mail 文档](http://framework.zend.com/manual/en/zend.mail.html)，更具体地说，是“[阅读邮件消息](http://framework.zend.com/manual/en/zend.mail.read.html)”部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T15:27:29.390

我使用登录设置通过 IMAP 阅读电子邮件并转储附件

```
public function imapAction()
{
    $config = array('host'=> 'imap.gmail.com', 
        'user' => 'xx',
        'password' => 'xx',
        'ssl' => 'SSL',
        'port' => 993);//995 pop, imap 993

    $mail = new Zend_Mail_Storage_Imap($config);
    $maxMessage = $mail->countMessages();
    $this->logger->info($maxMessage);

    for ($i = $maxMessage; $i <= $maxMessage; $i++)
    {
        $message = $mail->getMessage($i);
        $this->logger->info($i.'Mail from '.$message->from.':'.$message->subject);

        if($message->isMultipart())
        {
            $this->logger->info("has attachments");
            $part = $message->getPart(2);

            $cnt_typ = explode(";" , $part->contentType);
            $name    = explode("=",$cnt_typ[1]);
            $filename   = $name[1];//It is the file name of the attachement in browser
            //This for avoiding " from the file name when sent from yahoomail
            $filename   = str_replace('"'," ",$filename);
            $this->logger->info($filename);

            $attachment = base64_decode($part->getContent());
            $fhandle = fopen($filename, 'w');
            fwrite($fhandle, $attachment);
            fclose($fhandle);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-09T10:04:38.390

我有同样的问题，这个指令对我有帮助。

1.  退出所有正在访问受影响的 Gmail 帐户的邮件客户端。这意味着 iPhone 上的邮件应用程序以及您从计算机访问 Gmail 的任何其他地方。

2.  打开浏览器并导航到此页面：[http ://www.google.com/accounts/DisplayUnlockCaptcha](http://www.google.com/accounts/DisplayUnlockCaptcha)

3.  输入您的完整 Gmail 地址、密码并输入您在图片中看到的字符。触摸解锁按钮以验证您的帐户。

4.  尝试使用 Zend 框架从 gmail 应用程序帐户读取邮件。您的 Gmail 访问权限应该会恢复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-15T14:43:39.670

如果您遇到此错误并且您 100% 确定您提供的密码可能来自您在 Google 帐户上设置的 2 因素身份验证。

[谷歌帮助](https://support.google.com/mail/answer/7126229?hl=en)给出了在这种情况下该怎么做的指示。我设法通过在我的情况下生成[AppPassword来访问我的帐户](https://support.google.com/accounts/answer/185833)

# javascript - 如何从 Chrome 扩展程序中显示文件另存为对话框？

> ID：10120750
> 
> 赞同：0
> 
> 时间：2012-04-12T09:18:30.417
> 
> 标签：javascript, jquery, plugins, google-chrome-extension, npapi

我正在为 Google Chrome 创建一个扩展，将网页转换为 PDF 文件。从 JavaScript 后台页面，URL、DOM 和路径被传递到 NPAPI DLL，转换发生的地方。目前，路径是硬编码的。我想在扩展中添加一个 File Saveas 对话框，并从中获取路径和文件名，并将其传递给 NPAPI DLL。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:20:34.483

如果您只是要将它传递给 NPAPI dll，为什么要在扩展中执行文件另存为对话框？如果是我，我只会让 NPAPI dll 弹出保存对话框。

# android - 上下文菜单无法正常工作

> ID：10120752
> 
> 赞同：0
> 
> 时间：2012-04-12T09:18:39.757
> 
> 标签：android

请看下面的代码......我正在创建一个上下文菜单并实现该方法`onContextItemSelected`，但问题是当我按下回复项时......删除案例上的对话框也会出现并且活动也开始两次。 ..表示所有案例都执行...删除回复和转发案例...发生了什么问题请帮忙

```
@Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        switch(item.getItemId())
        {
    case R.id.reply:
    {
            Intent i = new Intent();
             String s2 = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                    .getString(2);
             i.putExtra("number", s2);
        //   Log.v("number", s2);
             i.setClass(this, CreateMessage.class);
            // i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
             startActivity(i);

    }   
        case R.id.delete:
        {

        final String s = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                        .getString(1);

              dba = new DBAdapter(this);

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage("Are you sure you want to delete?")
                       .setCancelable(false)
                       .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int id) {
                            //   Log.v("", "You Clicked " + s);             

                            dba.delete("messages", "id=?", new String[] { s });
                            populate();
                            dba.close();
                           }
                       })
                       .setNegativeButton("No", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int id) {
                                dialog.cancel();
                           }
                       });
                AlertDialog alert = builder.create();
                alert.show();
        }

        case R.id.forward:
        {
            Intent i = new Intent();
            String s3 = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                    .getString(4);
        //  Log.v("message", s3);
            i.putExtra("message", s3);
            i.setClass(this, CreateMessage.class);
            startActivity(i);
        }
default:

        return super.onContextItemSelected(item);
        }
    } 
```

这是logcat中显示的来自logcat的错误...

```
03-30 09:13:28.439: E/WindowManager(2273): Activity sms.app.Displayer has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eb95c8 that was originally added here 
```

sms.app.Displayer 是我在其中实现上下文菜单的类。

这是上下文菜单文件的代码..

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/reply" android:title="Reply"></item><item
        android:id="@+id/forward"
        android:title="Forward">
    </item>
    <item android:id="@+id/delete" android:title="Delete Message">
    </item>

</menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:19:59.103

在你的案例陈述之后添加休息

编辑：由于您错过了休息时间，因此您陷入了以下案例块。要么为你的 case 语句添加中断（并稍后处理返回值），要么直接添加 return true 而不是中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:37:31.703

检查此代码后，您的 onContextItemSelected 方法会发生细微变化::

```
@Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        switch(item.getItemId()){
        case R.id.reply:
            Intent i = new Intent();
            String s2 = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                    .getString(2);
            i.putExtra("number", s2);
            //   Log.v("number", s2);
            i.setClass(this, CreateMessage.class);
            // i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);
            break;
        case R.id.delete:   

            final String s = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                    .getString(1);

            dba = new DBAdapter(this);

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to delete?")
            .setCancelable(false)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    //   Log.v("", "You Clicked " + s);             

                    dba.delete("messages", "id=?", new String[] { s });
                    populate();
                    dba.close();
                }
            })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            AlertDialog alert = builder.create();
            alert.show();
        break;

        case R.id.forward:
            Intent i = new Intent();
            String s3 = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                    .getString(4);
            //  Log.v("message", s3);
            i.putExtra("message", s3);
            i.setClass(this, CreateMessage.class);
            startActivity(i);
        break;
        }
        return true;
    } 
```

# c# - 2个ajax弹出日历之间的区别

> ID：10120759
> 
> 赞同：0
> 
> 时间：2012-04-12T09:19:10.833
> 
> 标签：c#, asp.net

我有 2 个带有 2 个 ajax 日历的文本框。一个是开始日期，另一个是结束日期。我试图找出他们之间的日子，但我似乎无法做到这一点。这就是我的做法：

```
string a = txt1.Text;
        string b = txt2.Text;

        DateTime data1 = Convert.ToDateTime(a);
        DateTime data2 = Convert.ToDateTime(b);

        TimeSpan span = data2 - data1;

        int zile = Convert.ToInt32(Math.Ceiling(span.TotalDays));

        label.Text = span.ToString(); 
```

我文本框中的日期采用以下格式：2012 年 4 月 4 日和 2012 年 4 月 5 日。这应该是一天的差异，但是当我运行此代码时，它会显示 30 天，因为它被解释为一个月。我该如何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:33:15.027

这对我有用，刚刚测试过。

```
using System;

namespace DaySpan
{
    class Program
    {
        static void Main(string[] args)
        {

            DateTime startDate = DateTime.Parse("03.04.2012");
            DateTime endDate = DateTime.Parse("06.04.2012");

            Console.WriteLine(startDate.ToString());
            Console.WriteLine(endDate.ToString());

            Console.WriteLine("--------------------------------");
            Console.WriteLine("Calculate dayspan:");

            TimeSpan span = endDate - startDate;

            Console.WriteLine("Span: " + span.TotalDays);

            Console.ReadLine();

        }
    } 
} 
```

编辑：这可能是日期时间解析和语言环境的顶级帖子中提到的问题。但是，这对于我的语言环境（挪威语）是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:22:43.020

这个结果不是表示 92 天 0 小时 0 分钟 0 秒吗？我想我看不到这里的问题。

编辑 - 如果您希望它只为您提供 days 属性，请查看[此 SO 帖子](https://stackoverflow.com/questions/842057/how-do-i-convert-a-timespan-to-a-formatted-string)

# javascript - 如何在不使用用户脚本中的警报的情况下记录信息

> ID：10120761
> 
> 赞同：0
> 
> 时间：2012-04-12T09:19:24.317
> 
> 标签：javascript, userscripts

我有一个用户脚本，它跟踪网页 javascript 中所有动态创建的标签。这里的问题是目前我正在使用警报框来显示输出。alert() 的问题在于它可能非常突兀。对于每个警报，您需要单击“确定”按钮继续，这会浪费您的时间。所以我想要一种替代方法，例如警报框以外的日志文件。我怎样才能做到这一点。

我被限制使用 console.log

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:12:48.113

我会使用某种静态放置在您的页面上的控制台元素，如有必要，可以将其隐藏。看到这个[jsFiddle](http://jsfiddle.net/MhhRp/)。

HTML：

```
<div id="console">
  <div class="header">
     Console
     <span class="expand" onclick="toggleConsole();">+</span>
  </div>
  <div class="content" style="display: none;"></div>
</div> 
```

CSS：

```
#console {
    position: fixed;
    right: 0px;
    bottom: 0px;
    width: 300px;
    border: solid 1px #dddddd;
}
#console .header {
    background-color: #ededed;
    border: solid 1px #dddddd;
}
#console .header .expand {
    padding-right: 5px;
    float: right;
    cursor: pointer;
}
#console .content {
    overflow: auto;
    background-color: #F9F9F0;
    width: 100%;
    height: 180px;
} 
```

Javascript：

```
function log(text) {
    var consoleContent = document.getElementById('console')
        .getElementsByClassName('content')[0];
    var line = document.createElement('div');
    line.className = 'consoleLine';
    line.innerHTML = text;
    consoleContent.appendChild(line);
}

function toggleConsole() {
    var content = document.getElementById('console')
        .getElementsByClassName('content')[0];
    if (content.style.display === "none") {
        content.style.display = "block";
        document.getElementById('console')
            .getElementsByClassName('expand')[0].innerHTML = "-";
    } else {
        content.style.display = "none";
        document.getElementById('console')
            .getElementsByClassName('expand')[0].innerHTML = "+";
    }
}

document.onload = function() {
    document.getElementById('console')
        .getElementsByClassName('expand')[0].onclick = toggleConsole;
}; 
```

用于`log("some text");`输出到您的控制台！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:22:43.030

将 firefox 附加组件安装到您的 Mozilla（如果您正在使用）和以下代码：

```
console.log("test"+your_variable); 
```

所以上面的代码将在控制台中显示所有日志。如果 IE 按 F12 并检查控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:29:37.883

如果普通用户应该能够看到它，使用控制台并不是一种非常人性化的方式。

在您的网页上定义一个空间（`<div>`可能很方便）您希望信息所在的位置，然后使用 javascript（或 jQuery）将消息添加到该空间以修改 DOM：

HTML：

```
<div id='logmessages'>Log messages:</div> 
```

JavaScript

```
function log(yourMsg) {
document.getElementByID('logmessages').innerHTML() += yourMsg;
} 
```

允许用户使用按钮或其他方式显示/隐藏 div 可能很友好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:29:16.607

在页面的顶部、底部或角落创建一个固定的 div，设置宽度/高度和溢出自动，然后在其中插入日志条目。

# google-app-engine - 两个具有独立数据库的 appengine 客户端

> ID：10120771
> 
> 赞同：1
> 
> 时间：2012-04-12T09:19:50.490
> 
> 标签：google-app-engine

如何在本地使用不同的数据库运行两个 appengine 客户端（同一个应用程序）？实现这一目标的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:09:23.870

您可以设置`--datastore_path=` [本地开发服务器的命令行参数](https://developers.google.com/appengine/docs/python/tools/devserver#Command_Line_Arguments)。更改路径以具有不同的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:20:13.327

您还可以使用 GAE 命名空间。

# c++ - c ++ unicode编写不起作用

> ID：10120775
> 
> 赞同：1
> 
> 时间：2012-04-12T09:20:08.213
> 
> 标签：c++, unicode

我正在尝试通过 wfstream 在文件中写入一些俄语 unicode 文本。以下代码已用于它。

```
wfstream myfile;
locale AvailLocale("Russian");

myfile.imbue(AvailLocale);

myfile.open(L"d:\\example.txt",ios::out);
if (myfile.is_open()) 
{ 
    myfile << L"доброе утро" <<endl;
} 

myfile.flush();
myfile.close(); 
```

通过执行此代码将无法识别的内容写入文件，我使用的是 VS 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:23:01.253

我不太了解在 C++ 中注入语言环境，但也许它不起作用，因为您正在尝试使用希腊语言环境编写西里尔字符？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:08:39.673

如果您`std::locale("Russian")`使用 VS2008，文件将被编码为“西里尔文 (Windows)”（而不是某些 Unicode 格式）。例如，如果您使用 Internet Explorer 打开它并将编码更改为西里尔文 (Windows)，则字符变得可见。

以某种 Unicode 格式存储文件更为常见。

当我使用：

```
const std::locale AvailLocale
      = std::locale(std::locale("Russian"), new std::codecvt_utf8<wchar_t>()); 
```

将其存储为 UTF-8 并在记事本中将文件作为 UTF-8 文件打开。它看到 доброе утро

同样，您可以使用 codecvt_utf16 或其他一些编码方案来编码 unicode 字符。

codecvt_utf8 特定于 C++11。

或者，您可以使用 boost： http: [//www.boost.org/doc/libs/1_46_0/libs/serialization/doc/codecvt.html](http://www.boost.org/doc/libs/1_46_0/libs/serialization/doc/codecvt.html) 或者自己实现类似的东西（通过查看[http://www.boost.org/ doc/libs/1_40_0/boost/detail/utf8_codecvt_facet.hpp](http://www.boost.org/doc/libs/1_40_0/boost/detail/utf8_codecvt_facet.hpp)它似乎并不复杂）。

或者这个库：[http ://utfcpp.sourceforge.net/](http://utfcpp.sourceforge.net/)

# javascript - 谷歌地图 API v2

> ID：10120776
> 
> 赞同：0
> 
> 时间：2012-04-12T09:20:13.520
> 
> 标签：javascript, asp.net

我在调用 gdrirection.load() 时遇到问题，如果我指定了它会起作用的值，但如果我通过文本框传递它们它就不起作用。这是我的代码

```
var map;
    var directionsPanel;
    var directions;
function initialize() {

        if (GBrowserIsCompatible()) {
            map = new GMap2(document.getElementById("map"));
            map.setCenter(new GLatLng(24.7116667, 46.7241667), 12);
            map.setUIToDefault();
            var txtAddress = document.getElementById('txtAddress').value;
            var TextBox1 = document.getElementById('TextBox1').value;
            directions = new GDirections(map, directionsPanel);
            directions.load("from: 'TextBox1' to: 'txtAddress'");        
        } 
    }
<body onload=initialize()>

            <asp:TextBox ID="txtAddress" runat="server" Visible="true" />
            <input type="button" value="direction" onclick="initialize();" title="direction"  />
            <asp:TextBox ID="TextBox1" runat="server" Visible="true"></asp:TextBox>` 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:34:46.063

在您的代码中，您是`TextBox1`从地址和`txtAddress`地址传递的。所以谷歌无法理解这两个地址。使用以下代码从文本框中传递值：

```
directions.load("from: "+TextBox1+" to: "+txtAddress+""); 
```

这个可以正常工作。希望这可以帮助你:-)

# facebook - 检测用户是否退出 Facebook

> ID：10120779
> 
> 赞同：-1
> 
> 时间：2012-04-12T09:20:24.860
> 
> 标签：facebook, node.js, facebook-oauth

我有一个[Node.js](http://en.wikipedia.org/wiki/Node.js) Web 应用程序，它使用 Facebook [OAuth](http://en.wikipedia.org/wiki/OAuth) 2.0 使用[everyauth](https://github.com/bnoguchi/everyauth)注册/登录/注销用户。

我在我的 Facebook 应用程序上启用了离线访问的弃用，所以现在我收到了大约两个月后过期的令牌，或者当用户更改她的密码时，或者当她删除应用程序时，**但不是在她注销 Facebook 时**

我的应用程序嵌入到多个网站的 iframe 中，用于将更新推送到用户的 Facebook 时间线。

假设我在站点 A 和站点 B 上安装了我的应用程序。如果用户 X 在 A 上登录我的应用程序，他也会在 B 上登录我的应用程序，因为 iframe 保留了会话。

**问题**

如果用户 X 退出 Facebook，那么在安装了我的应用程序的站点上使用同一台计算机的其他任何人都将代表 X 推送更新。

**有没有办法在推送更新之前确定 X 是否仍然登录 Facebook？**

换句话说，我需要类似于 Facebook 的 JavaScript SDK [FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)的东西，但在**Node.js**的服务器端。最好的办法是调用[Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)，但我找不到合适的[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)。

**不完美的解决方案：**

最后，我选择了评论中描述的@NitzanTomer 的解决方案。我使用 JavaScript [SDK](http://en.wikipedia.org/wiki/Software_development_kit)及其`FB.getLoginStatus`方法来检查我的应用程序的当前用户是否仍然在 Facebook 上登录。这远非理想：它适用于我的情况，因为我在 iframe 中运行 JavaScript 代码，因此相对受到[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)攻击的保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:26:52.210

您可以使用 FB.getLoginStatus 来检查用户是否连接到 Facebook： [https ://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T14:13:27.237

amachang 在 facebook-node-sdk 中没有 getLoginStaus 函数，但您可以使用 getLoginStatusUrl 函数：[facebook-node-sdk](https://github.com/amachang/facebook-node-sdk/blob/master/lib/basefacebook.js#L398)

如果返回值是您分配给 ok_session 属性的 url，则用户已登录。但是，您无法确定授予您的应用程序的权限

# version-control - 何时在 RTC 源代码控制中的流中使用多个组件

> ID：10120788
> 
> 赞同：4
> 
> 时间：2012-04-12T09:20:49.147
> 
> 标签：version-control, clearcase, rtc

在我看来，RTC 源代码控制组件是文件和文件夹的逻辑分组。

何时应在 RTC 源代码控制的流中使用多个组件？

**方法 1：**
我有多个 java(Eclipse) 项目，但我将这些项目添加到单个流中的一个组件中。这些项目被打包到一个部署文件中。

**方法 2：**
每个 java 项目都被添加到流中自己的组件中，因此流将包含多个组件 - 每个 java 项目一个组件。

使用一种方法比另一种方法有优点/缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:34:28.443

[RTC 组件实际上与ClearCase UCM 组件](https://stackoverflow.com/questions/1764329/clearcase-ucm-best-practices-using-components/1766662#1766662)具有相同的含义。

使用多个组件时，目标是将大量文件划分为连贯且符合逻辑的子集，从而更易于识别和管理。

> 组件示例：
> 
> *   应用程序（或应用程序的自治部分）
> *   技术图书馆
> *   一组打包的文件（用于发布）

*注意：在 RTC 中，您可以在另一个*项目区域中重用一个组件（在一个项目区域中定义）（前提是两个 PA 在同一个 Jazz 服务器上）。

一个 Java 项目可以表示为一个组件，但某些 Java 项目可以被视为多个组件（一个用于业务逻辑，一个用于数据库逻辑，等等）

定义组件时的主要标准是：
它会按照自己的节奏发展吗？您可以修改它而无需修改另一个组件吗？
（如果不是，这可能意味着这两组文件紧密相连，并且可能被视为一个组件）。

从那里，您必须决定是要查看一个 Stream 上的所有组件（系统方法，每个组件都是可写的），还是每个流只查看一个或两个组件（取决于交付 - dll、jar ...... - 由其他组件）：组件方法。
首先，坚持系统方法，一开始更简单。

# java - 在 AsyncTask 中使用回调函数时出现 NullpointerException

> ID：10120791
> 
> 赞同：2
> 
> 时间：2012-04-12T09:20:59.993
> 
> 标签：java, android, callback, nullpointerexception, android-asynctask

有 2 个类和 1 个接口：类 1 = LoginPage，类 2 = SyncData 和接口 = AsyncTaskCompleteListener。

Class 1 使用 Class 2 与服务器同步信息。Class 2 在 onPostExecute 方法中发布结果信息后，将使用 Interface 回调方法将结果信息发送到 Class 1。当我尝试使用回调方法时，我看到以下错误：

```
04-12 11:06:43.715: W/dalvikvm(24941): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
04-12 11:06:43.720: E/AndroidRuntime(24941): FATAL EXCEPTION: main
04-12 11:06:43.720: E/AndroidRuntime(24941): java.lang.NullPointerException
04-12 11:06:43.720: E/AndroidRuntime(24941):    at com.on_d_mand.live_evenementen.SyncData.onPostExecute(SyncData.java:101)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at com.on_d_mand.live_evenementen.SyncData.onPostExecute(SyncData.java:1)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at android.os.AsyncTask.finish(AsyncTask.java:417)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at android.os.Looper.loop(Looper.java:130)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at android.app.ActivityThread.main(ActivityThread.java:3691)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at java.lang.reflect.Method.invokeNative(Native Method)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at java.lang.reflect.Method.invoke(Method.java:507)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
04-12 11:06:43.720: E/AndroidRuntime(24941):    at dalvik.system.NativeStart.main(Native Method) 
```

第 1 类 onTaskComplete 方法示例：

```
public void onTaskComplete(String result) {
    //perform action after receiving the information
    Toast.makeText(this, result, Toast.LENGTH_LONG).show(); 
} 
```

第 2 类 onPostExecute 方法示例：

```
public void onPostExecute(String RESULT) {

    if(dialog.isShowing()){
        dialog.dismiss();
    }

    callback.onTaskComplete(RESULT);

} 
```

第 3 类：

```
package com.on_d_mand.live_evenementen;

public interface AsyncTaskCompleteListener<T> {
    public void onTaskComplete(T result);
} 
```

有谁知道我在这里做错了什么？我希望类和接口不要太复杂。

**编辑**

这个问题的解决方案是在 Class 2 构造函数中初始化回调对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:52:07.923

您需要在创建“SyncData”类时传递对实现侦听器的对象的引用。据推测，目前在您的 LoginPage 中，您的内容如下所示：

```
 new SyncData().execute(); 
```

您需要将其更改为：

```
 new SyncData(this).execute(); 
```

并向 SyncData 添加一个构造函数：

```
 public SyncData(AsyncTaskCompleteListener<String> callback)
 {
      this.callback = callback;
 } 
```

如果您已经有 SyncData 的构造函数，则需要将参数和代码添加到现有构造函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:22:02.597

您的对话对象可能会`null`改为

```
if(dialog.isShowing()){
        dialog.dismiss(); 
```

尝试

```
if(dialog!=null){
        dialog.dismiss(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T09:33:33.933

```
 public void onPostExecute(String RESULT) {

        if(dialog.isShowing()){
            dialog.dismiss();
        }

        callback.onTaskComplete(RESULT); //make sure callback is not null

// and proper null check is required in onTaskComplete in case RESULT is null

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:36:46.123

对话框为空或回调为空。

看看行号，你就会知道它是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T09:43:41.590

试试这个代码:::

```
public void onTaskComplete(String result) {
        runOnUiThread(new Runnable() {          
            public void run() {
                // TODO Auto-generated method stub
                //perform action after receiving the information
                Toast.makeText(getApplicationContext(), result, Toast.LENGTH_LONG).show(); 
            }
        });
        } 
```

# iphone - 如何获取字典值计数的数组

> ID：10120794
> 
> 赞同：0
> 
> 时间：2012-04-12T09:21:09.057
> 
> 标签：iphone

我有一个字典键值对数组，但无法获取字典计数数组。它显示不兼容的整数到指针转换 NSsting ..

这是我的源代码

```
NSString *mCnt = [[gluClkDetailArray valueForKey:@"clkIndependentItem"] count];
NSLog(@"COUNT: %@", mCnt); 
```

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:22:53.067

count 返回纯整数类型，而不是 NSString 对象。

```
NSInteger *mCnt = [[gluClkDetailArray valueForKey:@"clkIndependentItem"] count];
NSLog(@"COUNT: %d", mCnt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:12:27.300

尝试这个：

```
NSInteger *anyInt = [[YourLovelyArray valueForKey:@"YourSweetyKey"] count];
NSLog(@"COUNT: %d", anyInt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:23:19.337

```
NSInteger mCnt = [[gluClkDetailArray valueForKey:@"clkIndependentItem"] count];
NSLog(@"Count is: %d", mCnt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T09:45:25.257

```
NSInteger *integ = [[yourArray valueForKey:@"keyvalue"] count];
NSLog(@"COUNT: %d", integ); 
```

这样做:)

# java - 是否有任何 EJB 迁移工具可用于将 EJB 2.1 迁移到 EJB 3.x

> ID：10120804
> 
> 赞同：5
> 
> 时间：2012-04-12T09:21:44.920
> 
> 标签：java, ejb, ejb-3.0, ejb-3.1, ejb-2.x

可能是最好的方法是手动进行。但是在一个大型项目中，您需要一些工具来帮助您。正是这个想法让我搜索了一个工具。

是否有任何 EJB 迁移工具可用于将 EJB 2.0 迁移到 3.x。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T05:20:00.177

它只开发了很短的时间，但有一段时间我们确实有一个 eclipse 插件，它可以读取 ejb-jar.xml 文件，然后更新源代码并插入注释。

编写它的人（Jonathan Gallimore）已经使用了几次，之后可能还会使用一两次。至少当时它确实奏效了，如果你不害怕卷起袖子，它可以为你节省数周的时间。

*   [http://svn.apache.org/repos/asf/openejb/trunk/openejb-eclipse-plugin/README.txt](http://svn.apache.org/repos/asf/openejb/trunk/openejb-eclipse-plugin/README.txt)
*   [http://www.apache.org/dist/openejb/eclipse-plugin/](http://www.apache.org/dist/openejb/eclipse-plugin/)

虽然我没有亲自使用它，但我确实监督了它的开发。长话短说，所有注释都有 xml 版本（100% 阵容）。EJB 容器必须有效地读取 xml，然后用注释数据填补空白。xml 数据胜过注解数据，因此这个处理基本上是将注解转换为 xml 的行为。我们采用了 OpenEJB 的注解/xml 处理代码并将其翻转过来，而不是将注解转换为 xml，而是将 xml 转换为注解——然后可以通过 eclipse API 轻松地将注解插入回源代码中。

如果它运行，它应该运行良好并且不应该改变你的应用程序的逻辑。只需对描述符数据进行 xml->annotation 转换。

您仍将拥有 EJB 2.x 视图，但它们将以注释形式在您的代码中进行配置。

不过，在做类似的事情之前，我会使用另一个问题中提到的 EJBContainer API 针对 EJB 2.x 代码设置单元测试。然后使用转换工具。然后重构出 EJB 2.x 视图，因为您不必总是弄乱 xml。

所以基本上：

*   为现有代码添加测试
*   使用 xml->annotation Eclipse 插件进行转换（运行测试）
*   将 EJB 2.x 视图重构为 EJB 3.x @Local 或 @LocalBean 视图（运行测试）

沿着这条路走，您应该会愉快地从 EJB 2.x 过渡到 3.x。好吧，至少和这份工作一样幸福:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:16:15.650

是的，IntelliJ EJB 重构工具： http: [//www.jetbrains.com/idea/webhelp/migrating-to-ejb-3-0.html](http://www.jetbrains.com/idea/webhelp/migrating-to-ejb-3-0.html)

但我确信这不是唯一的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:27:53.220

没有这样的，下面的链接提供了对代码库潜在变化的洞察。[EJB2-EJB3 迁移](http://www.javaworld.com/javaworld/jw-08-2006/jw-0814-ejb.html?page=4)

[Java.net 文章](http://today.java.net/pub/a/today/2007/01.23/migrating-from-ejb2x-to-ejb30.html#migrating-from-ejb-2x-to-ejb-30)

# excel - 计算Excel中的选择行

> ID：10120814
> 
> 赞同：0
> 
> 时间：2012-04-12T09:22:12.100
> 
> 标签：excel

*   我有一大组`Excel`行，中间有空行。
*   所以我想把空行算作组。
*   将每个组计数放在行之上，然后删除所有空行。

前任。

*   数据行。
*   数据行。我想计算下面的所有空行。放在该行的单元格上 (3)
*   空的 。
*   空的 。
*   空的 。
*   数据行。
*   数据行。
*   数据行。
*   数据行。(2)。
*   空行。
*   空行。
*   数据行。(4)
*   空的。
*   空的。
*   空的。
*   空的。
*   .
*   .
*   .
*   .
*   ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T09:25:58.903

假设您的数据位于电子表格的 A 列（从单元格 A1 开始），并且您想计算空格并删除行，如下所示：

```
 Col A    Col B                          Col A      Col B
1     AAA                                     AAA        2
2                                             BBB        1
3                                             CCC        0
4     BBB                                     DDD        2
5                          ---- Output --->   EEE
6     CCC
7     DDD
8
9
10    EEE 
```

以下代码将实现该结果：

```
Sub CountEmptyRows()
    Dim lastRow As Long, rw As Long, count As Integer

    lastRow = Range("A65536").End(xlUp).Row - 1
    count = 0

    For rw = lastRow To 1 Step -1
        If IsEmpty(Cells(rw, 1)) Then //If cell is empty increment the count and delete the row
            count = count + 1
            Cells(rw, 1).EntireRow.Delete
        Else
            Cells(rw, 2) = count //Display emtpy row count and then reset counter
            count = 0
        End If
    Next rw
End Sub 
```

# windows - 带有 Windows phone SDK 7.0 版的数据库

> ID：10120821
> 
> 赞同：0
> 
> 时间：2012-04-12T09:22:45.173
> 
> 标签：windows, windows-phone-7, sqlite, sql-server-ce

我正在开发一个 Windows phone7 应用程序，需要将一些信息存储在轻量级关系数据库中（如 Android 和 Iphone 中的 SQLite DB）。

我搜索并找到了 SQL CE，但意识到如果我是正确的，它只适用于 windows phone OS 7.1 版。由于我的目标版本是 windows phone OS 7.0，我必须使用任何第三方数据库吗？

如果有人可以根据经验和任何参考/好的教程或任何想法提出最佳工作解决方案，将非常感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:41:05.213

通过使用 Linq to SQL，您可以在 Windows Phone 中获得数据库支持；[请查看Windows Phone 代码示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)中的“本地数据库示例”以获得有关如何使用它的良好演示。

# iphone - 多个手势似乎不起作用（*CustomGestureRecognizer 和 UILongPressGestureRecognizer）

> ID：10120825
> 
> 赞同：0
> 
> 时间：2012-04-12T09:23:05.013
> 
> 标签：iphone, ios, ipad, uigesturerecognizer

我制作了一个自定义手势识别器，并将其添加到我的 customView 中。自定义手势是 UIPanGestureRecognizer 的子类。

我添加的另一个手势是 LongPressGestureRecognizer

```
 CustomGestureRecognizer *pan;
                pan = [[CustomGestureRecognizer alloc] initWithTarget:[self viewController] action:@selector(dragImage:)];
                [pan setDirection:DirectionPangestureRecognizerVertical];
                [pan setMinimumNumberOfTouches:1];
                [pan setMaximumNumberOfTouches:1];
                [custom addSubview:custom.imageView];
                [custom addGestureRecognizer:pan];
                [pan release];

                UILongPressGestureRecognizer *highLight = [[UILongPressGestureRecognizer alloc] initWithTarget:[self viewController] 
                                                                                            action:@selector(highlightImage:)];
                [highLight setDelaysTouchesBegan:0.1];
                [tempView addGestureRecognizer:highLight];
                [highLight release]; 
```

我也实施了

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if (![gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]] && ![otherGestureRecognizer isKindOfClass:[UITapGestureRecognizer class]]) 
    {
        return YES;
    }
    return YES;
} 
```

我是我的 [self viewController] 和 self 类，但我仍然没有让手势同时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:25:27.947

您忘记设置手势识别器的代表......永远不会调用该方法。

# css - 需要 CSS 帮助吗？需要下拉显示在下方

> ID：10120826
> 
> 赞同：0
> 
> 时间：2012-04-12T09:23:05.860
> 
> 标签：css, drop-down-menu

我有一个导航栏（上面写着“关于我们”、“寻求帮助”、“支持我们”、“培训”、“为我们工作”），鼠标悬停时会显示该特定标题的下拉菜单。下拉列表显示在以下 div 的“顶部”……这正是我想要的。

问题是尽管我希望鼠标悬停时显示的下拉 div 与包含“关于我们”、“寻求帮助”等的 div 底部完全对齐，而目前它没有。

关于我如何做到这一点的任何想法？

顺便说一句，我正在使用蓝图框架和 jquery ...

```
<style type="text/css" media="screen">
<!--
    BODY {
    font: .72em Candara, "Trebuchet MS", verdana, arial, sans-serif; 
    font-size: 86%;
    background:  url(./images/body-bg.jpg) repeat-y scroll center top #eae9e7;}

h2 {
    color: #262161;
    margin-bottom: 5px; 
}

h3 {
        color:white; 
        padding:5px; 
        margin-bottom:0;
        border-radius: 5px 5px 0px 0px; 
        -moz-border-radius: 5px 5px 0px 0px; 
        -webkit-border-radius: 5px 5px 0px 0px; 
    }

#tabH {margin-bottom:10px;} 

 div.tabs > div h2 {
        margin-top: 0;
    }

div.tabs > a  {
        text-decoration:none;
    }

#topnav li {
    list-style:none;
    }

.navhead {
    width:135px;
    padding:3px;
    margin-right:2px;
    float:left;
    border-radius: 5px 5px 0px 0px; 
    -moz-border-radius: 5px 5px 0px 0px; 
    -webkit-border-radius: 5px 5px 0px 0px; 
    background-color: #F3F3F4;
    border-top: 1px silver solid;
    border-right: 1px silver solid;         
    }

.navhead a
    {
        font-size:1.2em;
        text-decoration:none;
    }

    .navheadhover   {
        background: #262161;
        color: white;
    }

    .navcontent {
        background-color:white; 
        border: 1px solid #262161;
        padding: 3px;
        position:absolute;
    }

    .navcontent p, headTxt p {padding:5px;}

    #headline {
        margin-bottom:20px;
    }

    .blue-bg {
        background-color:#262161;   
        }           

#footer {
    clear:both;
    background: url(./images/footer.jpg) no-repeat scroll 0 0;
    background:  url(./images/body-bg.jpg) repeat-y scroll center top #eae9e7;      
    }
-->
</style>
    <script>
    $(document).ready(function() 
    {
        var navContainers = $('.navcontent');
        navContainers.hide();

       $('div.tabs a').mouseover(function () 
            {
                var myhash=$(this).attr('hash');
                console.log ('hash = '  + myhash);              
                navContainers.hide();
                navContainers.filter(this.hash).show();
                $('.navhead').removeClass('navheadhover');  
                $(this.parentNode).addClass('navheadhover');    
                return false;
            }) 

        $('.navcontent, .navigation-container').mouseleave(function () 
            {
                $('.navhead').removeClass('navheadhover');  
                navContainers.hide();
                return false;
            }) 
    });
</script> 
```

这是html：

```
<script type="text/javascript" src="jquery152.js"></script>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>Tabs</title>
    </head>
    <body class="container">
    <div class=span-24>
    <BR>
    <div id=logo class='span-4'>
        <img src="./images/CANFull10.jpg">
    </div>
    <div id=tabH class="tabs span-20 last navigation-container">
        <br><br>
        <ul id=topnav class="right">
            <li class='navhead'><a href="#first" id=mark>About Us</a><br>What we do & how you can help.</li>
            <li class='navhead'><a href="#second" id=services>Looking For Help</a><br>Find a service to help you.</li>
            <li class='navhead'><a href="#third" id=otherstuff>Support Us</a><br>More here. Second line of text</li>
            <li class='navhead'><a href="#fourth" id=otherstuff>Training</a><br>See our courses. more text here.</li>
            <li class='navhead'><a href="#fifth" id=otherstuff>Work for Us</a><br>See what we offer. more text here.</li>
        </ul>

            <div id="first" class="navcontent span-20">
                <h2>About Us</h2>
                    <p> Some text here maybe followed by some links</p>
                    <ul>
                        <li>Link One</li>
                        <li>Link Two</li>
                        <li>Link Three</li>
                    </ul>
            </div>
            <div id="second" class="navcontent span-20">
                <h2>Looking for Help</h2>
                    <p>Eastman Kodak, the company that invented the hand-held camera, has filed for bankruptcy protection. The move gives the company time to reorganise itself without facing its creditors, and Kodak said that it would mean business as normal for customers. The company has recently moved away from cameras to refocus on making printers to stem falling profits. The 133-year-old firm has struggled to keep up with competitors who were quicker to adapt to the digital era. Announcing the move to seek bankruptcy protection, Antonio M Perez, Kodak's chairman and chief executive, said: "The board of directors and the entire senior management team unanimously believe that this is a necessary step and the right thing to do for the future of Kodak."         </p>
            </div>
            <div id="third" class="navcontent span-20">
                <h2>Support Us</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis ostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div id="fourth" class="navcontent span-20">
                <h2>Training</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis ostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div id="fifth" class="navcontent span-20">
                <h2>Work for Us</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis ostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>              

    </div>
    </div>
    <div id=headline class="span-24">
    <div class='span-16'>
        <img src="./images/place.jpg" alt="CAN is a one of the Best Companies to work for." title="CAN is a one of the Best Companies to work for.">
    </div>
    <div class='span-8 last' >
        <h3 class=blue-bg>One of the best!</h3>
        <p>Being a best company goes beyond the bottom line. <br><br>
        It's about excelling in every area throughout the workplace and an organisation's commitment to its most important assets - its workforce.<br><br>
        Focusing on employees brings real benefits such as, improved workplace engagement, better staff retention.</p>
    </div>
    </div>

    <div id=footer class='span-24'>
<div class='span-12'>Footer</div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:30:48.730

我认为[这](http://jsfiddle.net/5R3K6/1/)就是你所需要的。

尝试设置`max-height`和`overflow`导航内容。

# android - 无法在项目单击侦听器上获取 gridView

> ID：10120833
> 
> 赞同：3
> 
> 时间：2012-04-12T09:23:26.230
> 
> 标签：android, gridview, fragment, onitemclicklistener

我无法在 Fragment 中获取 gridView 的 setOnItemClickListener。可能是什么问题？

这是我的代码::

```
 public class MainMenuFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // Inflate the layout for this fragment

        View view = inflater.inflate(R.layout.main_menu_fragment, container, false);

        itemsGridViewObj = (GridView) view.findViewById(R.id.itemsGridView);

        itemsGridViewObj.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {

                Log.d(TAG, "--> onItemClick listener...");      // Can not getting this method.
                /*if(position == 1) {
                    FruitMenuFragment fruitMenuFragment = new FruitMenuFragment();
                    fragmentTransaction.replace(android.R.id.content, fruitMenuFragment);
                    fragmentTransaction.commit();
                }*/
            }
        });

        return view;
    }
}` 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T03:30:55.910

您可能需要在 ButtonView 中设置以下内容。android:focusable="false" android:focusableInTouchMode="false"

请参阅[将 CheckBox 添加到列表行会丢失我的 onItemClick 事件？](https://stackoverflow.com/questions/5374011/adding-checkbox-to-list-row-loses-my-onitemclick-events)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:49:30.637

当使用片段时，视图的初始化发生在两个阶段。

视图仅在 onCreateView 方法之后膨胀（因此可访问）。此方法仅用于膨胀视图并将其返回到 Fragment。

因此，任何与查找视图和设置 onClickListeners 相关的逻辑都应该在 onActivityCreated() 函数中完成，因为这是您可以访问膨胀视图的第一个点。

[在http://developer.android.com/reference/android/app/Fragment.html#Lifecycle](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle)查看 Google 文档

以下是您调整后的代码以符合我上面描述的内容：

```
public class MainMenuFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
// Inflate the layout for this fragment

    return inflater.inflate(R.layout.main_menu_fragment, container, false);     
}

@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState); 

    GridView itemsGridViewObj = (GridView) findViewById(R.id.itemsGridView);

    itemsGridViewObj.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long arg3) {

        Log.d(TAG, "--> onItemClick listener..."); // You should see this now
        /*if(position == 1) {
            FruitMenuFragment fruitMenuFragment = new FruitMenuFragment();
            fragmentTransaction.replace(android.R.id.content, fruitMenuFragment);
            fragmentTransaction.commit();
        }*/
    }});
}
} 
```

# javascript - 如何使用Javascript从Gridview中的文本框中获取文本值

> ID：10120834
> 
> 赞同：3
> 
> 时间：2012-04-12T09:23:28.103
> 
> 标签：javascript, asp.net, gridview

大家好，我已经编写了以下脚本来获取其中的值`textbox`，`GridView`但是我得到了一些值，因为`NaN`有人可以告诉我哪里出错了

这是我的示例脚本

```
var grid = document.getElementById("<%=grdInvoice.ClientID%>");
            var inputs = grid.getElementsByTagName("input");
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].type == "text") {
                    if (inputs[i].name.indexOf("txtAmount").value != "") {
                        alert("Not Null");
                        amnt = parseInt(inputs[i].name.indexOf("txtAmount").value);
                        alert(amnt.toString()); // Getting Nan here
                        //var v = document.getElementById('<%= lblTotal.ClientID %>').value;
                    }
                }
            } 
```

我的网格如下

```
 ddl    Quantity  desc     Rate    Amount
        1         d        10      10
        2         d        20      40 
```

像这样一些空行也将在那里我需要总结`Amount`和显示

我的网格视图

```
<asp:GridView ID="grdInvoice" runat="server" AutoGenerateColumns="False" GridLines="None"
                        Width="650px" CellPadding="2" CellSpacing="1" ForeColor="#333333" CssClass="inv_grid_data"
                        OnSelectedIndexChanged="grdInvoice_SelectedIndexChanged" OnSelectedIndexChanging="grdInvoice_SelectedIndexChanging"
                        Style="font-family: verdana; font-size: 9px;">
                        <RowStyle BackColor="#f1f1f2" ForeColor="#333333" BorderColor="#333333" BorderStyle="Solid"
                            BorderWidth="1px" />
                        <HeaderStyle CssClass="inv_grid_hed" BackColor="#f2f2f2" ForeColor="black" Font-Names="Verdana,Arial,Helvetica,sans-serif"
                            Font-Size="9px" Height="15px" Font-Bold="false" />
                        <AlternatingRowStyle CssClass="tr2" BackColor="White" ForeColor="#284775" />
                        <Columns>
                            <asp:TemplateField HeaderText="Item Name" HeaderStyle-Width="140">
                                <ItemTemplate>
                                    <asp:DropDownList ID="ddlItems" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ddlItems_SelectedIndexChanged"
                                        DataTextField="LineItemName" DataValueField="LineItemName" CssClass="txt_box_ssm_drop"
                                        Width="100%" Font-Names="Verdana,Arial,Helvetica,sans-serif" Font-Size="12px">
                                    </asp:DropDownList>
                                </ItemTemplate>
                                <HeaderStyle Width="180px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Quantity">
                                <ItemTemplate>
                                    <asp:TextBox ID="txtQuantity" CssClass="txt_box_ssm_big" runat="server" Width="100%"></asp:TextBox>
                                </ItemTemplate>
                                <HeaderStyle Width="100px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Description">
                                <ItemTemplate>
                                    <asp:TextBox ID="txtDescription" CssClass="txt_box_ssm_big" runat="server" Width="100%"></asp:TextBox>
                                </ItemTemplate>
                                <%--<ItemStyle Height="11px" Width="100px" /> --%>
                                <HeaderStyle Width="260px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Rate">
                                <ItemTemplate>
                                    <asp:TextBox ID="txtRate" ReadOnly="true" CssClass="txt_box_ssm_big" runat="server"
                                        Width="100%"></asp:TextBox>
                                </ItemTemplate>
                                <HeaderStyle Width="100px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Amount">
                                <ItemTemplate>
                                    <asp:TextBox ID="txtAmount" runat="server" CssClass="txt_box_ssm_big" Width="100%"></asp:TextBox>
                                    <%--<asp:Label ID="lblamount" runat="server" Text='<%# Eval("Amount") %>'/>--%>
                                </ItemTemplate>
                                <HeaderStyle Width="100px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Delete">
                                <ItemTemplate>
                                    <%--<asp:ImageButton ID="ImageButton2" runat="server" ImageUrl="~/images/icon_delete.gif" OnClick="RowDelete_Click" OnClientClick="msg('Can you get there from here?','This is a Title')"/>--%>
                                    <asp:ImageButton ID="RowDelete" runat="server" ImageUrl="~/images/icon_delete.gif"
                                        OnClick="RowDelete_Click" OnClientClick="return showConfirm()" Style="margin-left: 15px;" />
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:CommandField ShowSelectButton="true" ButtonType="image" SelectImageUrl="~/Invoiceimages/Copy-32(1).png"
                                SelectText="Copy" HeaderText="Copy" />
                        </Columns>
                        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                        <EditRowStyle BackColor="#999999" />
                    </asp:GridView> 
```

我的原始脚本最初我将根据用户数量在网格视图中添加 AMount 之后我想将网格中的总金额显示到标签

```
<script type="text/javascript">
        function multiplication(txtQuantity, txtRate, txtAmount) {
            var weight = document.getElementById(txtQuantity).value;
            var rate = document.getElementById(txtRate).value;
            document.getElementById(txtAmount).value = weight * rate;
            var amnt = 0;
//            var Grid_Table = document.getElementById('<%= grdInvoice.ClientID %>');
//            for (var row = 1; row < Grid_Table.rows.length; row++) {

//                var qty = 0;

//                for (var col = 0; col < Grid_Table.rows[row].cells.length; col++) {

//                    var cellcollectin = Grid_Table.rows[row].cells[col];

//                    for (var j = 0; j < cellcollectin.childNodes.length; j++) {

//                        if (cellcollectin.childNodes[j].type == "text") {

//                            if (cellcollectin.childNodes[j].name.indexOf("txtAmount") > 1) {
//                                if (cellcollectin.childNodes[j].value != "") {
//                                    qty = parseInt(cellcollectin.childNodes[j].value);
//                                    amnt = amnt + qty;
//                                }
//                            }
//                        }
//                    }
//                }
//            }
                        var grid = document.getElementById("<%=grdInvoice.ClientID%>");
                        var inputs = grid.getElementsByTagName("input");
                        for (var i = 0; i < inputs.length; i++) {
                            if (inputs[i].type == "text") {
                                if (inputs[i].name.indexOf("txtAmount").value != "") {
                                    alert("Not Null");
                                    amnt = grid.rows[i].cells[1].childNodes[0].value;
                                    //amnt = parseInt(inputs[i].name.indexOf("txtAmount").value);
                                    alert(amnt.toString());
                                    //var v = document.getElementById('<%= lblTotal.ClientID %>').value;
                                }
                            }
                        }
            document.getElementById('<%= lblTotal.ClientID %>').innerHtml = amnt.toString();
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T16:28:27.757

毕竟这里是解决方案

```
<script type="text/javascript">
    function multiplication(txtQuantity, txtRate, txtAmount) {
        var col1;
        var totalcol1 = 0;
        var weight = document.getElementById(txtQuantity).value;
        var rate = document.getElementById(txtRate).value;
        document.getElementById(txtAmount).value = weight * rate;
        var grid = document.getElementById('<%=grdInvoice.ClientID %>');

        for (i = 0; i < grid.rows.length; i++) {
            col1 = grid.rows[i].cells[4];
            //col2 = grid.rows[i].cells[1];

            for (j = 0; j < col1.childNodes.length; j++) {
                if (col1.childNodes[j].type == "text") {
                    if (!isNaN(col1.childNodes[j].value) && col1.childNodes[j].value != "") {
                        totalcol1 += parseInt(col1.childNodes[j].value)
                    }
                }
            }
        }
        document.getElementById('<%= lblTotal.ClientID %>').innerHTML = totalcol1.toFixed(2).toString();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:41:31.497

您的代码存在问题，Javascript`indexOf()`要么返回 -1 要么返回正整数，`value`是输入文本框的属性，与`indexOf()`.

用这个替换你的代码：

```
 var grid = document.getElementById("<%=grdInvoice.ClientID%>");
    var inputs = grid.getElementsByTagName("input");
    for (var i = 0; i < inputs.length; i++) {
        if (inputs[i].type == "text") {
            if (inputs[i].name == "txtAmount" || inputs[i].id == "txtAmount") {
                amnt = parseInt(inputs[i].value);
                alert(amnt.toString());
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:15:23.493

我认为您使用的方法是错误的。最好使用以下内容：

```
var inputs = grid.getElementsByTagName("input");
var grid = document.getElementById('<%= grdInvoice.ClientID %>');

for (var i = 0; i < inputs.length; i++) {
    if (inputs[i].type == "text") {         
        amnt = parseInt(grid.rows[i].cells[2].childNodes[0].value;);
        alert(amnt.toString()); // Getting Nan here
        //var v = document.getElementById('<%= lblTotal.ClientID %>').value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-03T10:38:09.480

网格视图内的文本

```
 <asp:GridView ID ="grvAddItems" runat="server">
<asp:TemplateField HeaderText="Quantity">
            <ItemTemplate>
                <asp:TextBox CssClass="field-text1"  Width="70 px" ID="txtQuantity" runat="server" TextMode="Number"  onblur="findcontrol()"></asp:TextBox>
            </ItemTemplate>
            </asp:TemplateField>
</asp:GridView> 
```

Javascript代码

```
 function findcontrol()
      {
          var textBoxQuantity = document.getElementsByClassName("field-text1");
for (var i = 0; i < textBoxQuantity.length; i++) {
              findvalue(textBoxQuantity[i].id);
          }
      }
function findvalue()
{
var Quantity = document.getElementById(quantity).value;
if (Number(Quantity) > 0){
// your calculations here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T09:10:08.110

我认为这将很容易读取网格视图数据

```
function StatusValidation() {
var rowCount = <%=gvRoomStatus.Rows.Count%>; // set your grid view name
for (var i = 0; i < rowCount; i++) {
var checkBoxes = $("#ContentPlaceHolder1_gvRoomStatus_chkIsSavePermission_" +i).is(":checked");
if (checkBoxes == true) {
count++;
var ddlHKRoomStatus = $("#ContentPlaceHolder1_gvRoomStatus_ddlHKRoomStatus_" + i).val();
var fromDate = $("#ContentPlaceHolder1_gvRoomStatus_txtFromDate_" + i).val();
var fromTime = $("#ContentPlaceHolder1_gvRoomStatus_txtFromTime_" + i).val();
var toDate = $("#ContentPlaceHolder1_gvRoomStatus_txtToDate_" + i).val();
var toTime = $("#ContentPlaceHolder1_gvRoomStatus_txtToTime_" + i).val();
var reason = $("#ContentPlaceHolder1_gvRoomStatus_txtReason_" + i).val();
  if (ddlHKRoomStatus == "3" || ddlHKRoomStatus == "4") {
       if (fromDate == "") {
       toastr.warning("Please provide From Date");
       $("#ContentPlaceHolder1_gvRoomStatus_txtFromDate_" + i).focus();
       return false;
                            }
                            else if (fromTime == "") {
                                toastr.warning("Please provide From Time");
                                $("#ContentPlaceHolder1_gvRoomStatus_txtFromTime_" + i).focus();
                                return false;
                            }
                            else if (toDate == "") {
                                toastr.warning("Please provide To Date");
                                $("#ContentPlaceHolder1_gvRoomStatus_txtToDate_" + i).focus();
                                return false;
                            }
                            else if (toTime == "") {
                                toastr.warning("Please provide To Time");
                                $("#ContentPlaceHolder1_gvRoomStatus_txtToTime_" + i).focus();
                                return false;
                            }
                            else if (reason == "") {
                                toastr.warning("Please provide a valid reason");
                                $("#ContentPlaceHolder1_gvRoomStatus_txtReason_" +i).focus();
                                return false;
                            }
                        }

                    }
}

<!-- begin snippet: js hide: false console: true babel: false -->
```

# javascript - Chrome 中 coffee-script.js 的“不允许加载本地资源”

> ID：10120836
> 
> 赞同：0
> 
> 时间：2012-04-12T09:23:37.607
> 
> 标签：javascript, google-chrome, coffeescript

有一些替代方法，例如 put is online 或使用 Firefox 进行调试，
但我想知道是否有一种方法可以`.js`在 Chrome 上加载该库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:31:38.007

问题：

```
<script src='file:/home/chen/code/home/git/docview/libs/coffee-script.js'></script> 
```

为什么：

```
"Only local script and and object resources are loaded" 
```

解决方案：您需要将 coffee-script.js 文件包含在包文件夹中并从那里访问它。

来源：[http ://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html#H2-0](http://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html#H2-0)

# php - 计数 + / - 复选框单击和取消单击

> ID：10120838
> 
> 赞同：0
> 
> 时间：2012-04-12T09:23:48.590
> 
> 标签：php, javascript, jquery

当用户单击复选框时，计数器#counter +1，这很好，但是当他取消选中时，对于同一个复选框，它不会 -1。当他们单击特定复选框和取消选中 -1 时，我想 +1。

--JS--

```
$('.CheckBox').toggle(function(){
    $('#Counter').html('( '+i+' Selected )');
    i++;
}, function() {

    $('#Counter').html('( '+i+' Selected )');
    i--;
}); 
```

---PHP---

```
do { ?>

<div style="position:relative; width:100%; height:20px; background-color:#FF5300;" class="CheckBox" id="<?php echo $row_EX['x1']; ?>">

<input type="checkbox" name="<?php echo $row_EX['x2']; ?>" value="<?php echo $row_EX['x3']; ?>" style="cursor:pointer; ">

<span style="position:relative; top:-2px; font-family:arial; color:#000; font-size:12px;"><?php echo $row_EX['lx4']; ?></span>

</div>

<div style="height:1px; width:1px;"></div>
<?php } while ($row_EX = mysql_fetch_assoc($EY)); ?>    

<span style="position:relative; left:10px; top:6px; font-family:arial; font-size:16px;" id="counter">(0 Selected)</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:31:00.117

尝试不同的方法：

```
$('.CheckBox').change(function(){

  var n_checkboxes_checked = $('.CheckBox:checked').length;
  $('#Counter').html(n_checkboxes_checked + ' Selected');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:31:09.460

```
$('.CheckBox').change(function() {
  if (this.checked) {
    i++;
  } else {
    i--;
  }
  $('#Counter').html('( '+i+' Selected )');
}); 
```

`var i = 0;`确保在页面加载时进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:29:57.627

您没有任何处理单击此处复选框的代码。`.toggle`在 jquery 中只处理隐藏/显示元素。

更新。我认为您不需要`.checkbox`像其他人建议的那样遍历所有元素..而且您不需要全局变量`i`。取而代之的是

```
$('.CheckBox input').click(function(){
    $('#Counter').html('( '+$('.CheckBox input:checked').length()+' Selected )');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:30:54.357

在它说的jQuery文档中......

```
 Description: Bind two or more handlers to the matched elements, to be executed on alternate clicks.

.toggle( handler(eventObject), handler(eventObject) [, handler(eventObject)] )
handler(eventObject)A function to execute every even time the element is clicked.
handler(eventObject)A function to execute every odd time the element is clicked. 
```

所以它与选中/取消选中无关

这样做

```
$('.CheckBox').click(function(){
    if($(this).attr('checked')){
        $('#Counter').html('( '+i+' Selected )');
        i++;
    }else{
        $('#Counter').html('( '+i+' Selected )');
        i--;    
    }
} 
```

是的，点击而不是切换……我错过了，你应该改用 attr

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T09:33:52.563

jsFiddle 演示：http: [//jsfiddle.net/ENxnK/2](http://jsfiddle.net/ENxnK/2)

使用 change()，而不是 toggle()

```
var i = 0;
$('.CheckBox').change(function() {
    if ( $(this).attr('checked') ) {
        i++;
    } else {
        i--;
    }

    $('#Counter').html('( ' + i + ' Selected )');
}); 
```

​</p>

# windows - 验证指定驱动器及其子文件夹中是否存在文件？

> ID：10120839
> 
> 赞同：0
> 
> 时间：2012-04-12T09:23:49.853
> 
> 标签：windows, cmd

我正在使用 Windows 操作系统。我试图找出目录中是否存在特定文件。目前我正在使用以下命令。

```
d:\> c:\Desktop\some.exe 
```

但问题是上述命令无法在 d 驱动器的子文件夹中验证。我如何编写命令以查看子文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:47:31.883

您可以使用此命令获取子目录中所有文件的列表

```
dir "yourfilename.ext" /s /b 
```

如果你想知道你的文件“yourfilename.ext”出现了多少次，那么你可以扩展前面的命令

```
dir "yourfilename.ext" /s /b | find /C "yourfilename.ext" 
```

# android - 创建具有自定义相框的自定义 Imageview 组件

> ID：10120840
> 
> 赞同：0
> 
> 时间：2012-04-12T09:23:59.133
> 
> 标签：android, imageview, android-canvas, custom-component

我想构建一个自定义组件（我猜是从 ImageView 扩展），它在用户指定的框架内显示图像（框架是自定义图像），内圆角（Pinterest 用户图标之类）。

我开始寻找如何组合两个位图，但这是一件困难的事情，所以我想知道是否有一些开源组件/教程可以更好地理解如何实现它。

框架图片是一个九块png（我不明白如何将其正确加载和缩放为位图）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:29:15.690

你检查过[这个](http://nextlevelandroid.com/?p=78?)

似乎它可以完成这项工作，尽管我不确定如何实施。

# asp.net-mvc - 如何选择下拉列表值并在 mvc3 中显示？

> ID：10120841
> 
> 赞同：2
> 
> 时间：2012-04-12T09:24:06.310
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我有一个 MVC3 Web 应用程序。在`index.cshtml`我有两个下拉列表。当我从这些列表中选择时，我需要单击一个`next`按钮，并且我想显示选定的值。我怎样才能做到这一点？

*家庭控制器.cs*

```
DataRepository objRepository = new DataRepository();

public ActionResult Index()
{
    ViewModel objViewModel = new ViewModel();
    objViewModel.ID = objRepository.GetPricingSecurityID();
    objViewModel.ddlId = objRepository.GetCUSIP();
    return View(objViewModel);
} 
```

*视图模型.cs*

```
public class ViewModel
{
    //DDL ID
    [Required(ErrorMessage = "Please select a PricingSecurityID")]
    public List<SelectListItem> ddlId { get; set; }

    //DropDownList Values
    [Required(ErrorMessage = "Please select a PricingSecurityID")]
    public List<SelectListItem> ID { get; set; }
} 
```

*索引.cshtml*

```
<div class="editor-label">
    @Html.Label("Pricing SecurityID")
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.ID,
        new SelectList(Model.ID, "Value", "Text"),
        "-- Select category --"
    )
    @Html.ValidationMessageFor(model => model.ID)
</div>

<div class="editor-label">
    @Html.Label("CUSIP ID")
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.ddlId,
        new SelectList(Model.ddlId, "Value", "Text"),
        "-- Select category --"
    )
    @Html.ValidationMessageFor(model => model.ddlId)
</div>
<p>
    <input type="submit" value="Next" />
</p> 
```

如何显示选定的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:38:23.000

如果您的要求是构建某种向导，则需要一种在步骤之间维护状态的方法。

ViewBag 对此没有好处，因为您应该在每个向导步骤中遵循 PRG（发布/重定向/获取）模式。

TempData 可用于在步骤之间向前导航，但如果用户返回或直接导航到某个步骤，则会失败。

因此，您需要寿命更长的东西。ASP.NET Session 对象或数据库都是很好的候选对象。

这是一个例子：

```
public class WizardController : Controller
{
    public ActionResult Step1()
    {
        var session = GetWizardSession();

        if (session.Step1 == null)
        {
            session.Step1 = new Step1View
            {
                PricingSecurityIds = new SelectList(new[] { 1, 2, 3, 4, 5 }),
                SomeOtherIds = new SelectList(new[] { 1, 2, 3, 4, 5 })
            };
        }

        return View(session.Step1);
    }

    [HttpPost]
    public ActionResult Step1(Step1View cmd)
    {
        var session = GetWizardSession();

        // save the wizard state
        session.Step1.SelectedPricingSecurityId = cmd.SelectedPricingSecurityId;
        session.Step1.SelectedSomeOtherId = cmd.SelectedSomeOtherId;

        // now onto step 2
        session.Step2 = new Step2View
        {
            PricingSecurityId = cmd.SelectedPricingSecurityId,
            SomeOtherId = cmd.SelectedSomeOtherId,
            Name = "John Smith"
        };

        return RedirectToAction("step2");
    }

    public ActionResult Step2()
    {

        return View(GetWizardSession().Step2);
    }

    public WizardSession GetWizardSession()
    {
        var session = Session["wizardsession"];

        if (session == null)
        {
            session = new WizardSession();
            Session["wizardsession"] = session;
        }

        return session as WizardSession;
    }
}

public class Step1View
{
    public SelectList PricingSecurityIds { get; set; }
    public SelectList SomeOtherIds { get; set; }
    public int SelectedPricingSecurityId { get; set; }
    public int SelectedSomeOtherId { get; set; }
}

public class Step2View
{
    public int PricingSecurityId { get; set; }
    public int SomeOtherId { get; set; }
    public string Name { get; set; }
}

public class WizardSession
{
    public Step1View Step1 { get; set; }
    public Step2View Step2 { get; set; }
} 
```

*   在第 1**步**中，我们调用`GetWizardSession`. 这会从 ASP.NET 返回一个对象，`Session`其中包含我们为向导中的每个步骤收集的所有信息。在这个例子中，我们只是为每个步骤（即`session.Step1`）存储 ViewModel。
*   我们检查会话中是否存在 Step1，如果不存在则创建它。然后我们将 Step1 模型传递给我们的视图。
*   当用户提交表单时，我们会更新`session.Step1`. 这确保如果用户导航回 /step1，我们“记住”他们的值。**然后我们为Step2**构建模型并将其保存在会话中。
*   当我们导航到 /step2 时，我们假设会话中存在模型（因为它们应该从 step1 到这里）所以我们只返回`return View(GetWizardSession().Step2);`

观点：

### 第1步

```
@model MvcWizardDemo.Controllers.Step1View

@{
    ViewBag.Title = "Step1";
}

<h2>Step1</h2>

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    @using (Html.BeginForm()) {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Step1View</legend>
            <div class="editor-label">
                @Html.LabelFor(m => m.PricingSecurityIds)
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(m => m.SelectedPricingSecurityId, Model.PricingSecurityIds)
                @Html.ValidationMessageFor(m => m.PricingSecurityIds)
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.SomeOtherIds)
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(m => m.SelectedSomeOtherId, Model.SomeOtherIds)
                @Html.ValidationMessageFor(m => m.SomeOtherIds)
            </div>
            <p>
                <input type="submit" value="Next" />
            </p>
        </fieldset>
    } 
```

### 第2步

```
@model MvcWizardDemo.Controllers.Step2View

@{
    ViewBag.Title = "Step2";
}

<h2>Step2</h2>

Hi, @Model.Name you selected the following values in the previous step:

<p>
    <strong>Security Id:</strong> @Model.PricingSecurityId
</p>

<p>
    <strong>Some other Id:</strong> @Model.SomeOtherId
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:48:18.313

试试这个它应该工作：

```
[HttpPost]    
public ActionResult Index(ViewModel model)
{
    // put what you want to show

} 
```

# ruby-on-rails - 更改控制器中的任何内容并发生路由错误，但重新启动服务器后可以恢复

> ID：10120844
> 
> 赞同：0
> 
> 时间：2012-04-12T09:24:28.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我有这个奇怪的错误。启动服务器时一切正常。

我浏览`http://lvh.me:3000/admin/topics`并正确显示

然后，当我更改*任何*控制器中的*任何*内容（甚至只是添加空行）时，rails 会说：

```
Routing Error
uninitialized constant Admin::TopicsController::Topic 
```

我刷新它，它会显示：

```
NoMethodError in Admin/topics#index
Showing /Users/john/Code/v2/app/views/admin/topics/index.html.erb where line #12 raised:
undefined method `each' for nil:NilClass 
```

然后当我重新启动服务器时，一切又正常了。如果我更改控制器中的任何内容，那么它将再次发生。

它只发生在这个 url 下。

我的路线是：

```
 namespace :admin do
    resources :topics do
      resources :comments, :controller => "topic/comments"
    end
    resources :attachments
  end 
```

相关的控制器是：

```
app/controllers/admin/topics_controller.rb
app/controllers/admin/topic/comments_controller.rb 
```

真的很奇怪，它在第一次正常工作，但如果控制器被更改（即使添加空行）就会中断。可能是评论控制器在主题文件夹下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:29:43.627

我认为您违反了 Rails 约定，即`X::Y::Z`应该在以 结尾的路径上找到非 gem 类`x/y/z.rb`，反之亦然。您可能应该只命名该控制器`TopicCommentsController`并将其放入`app/controllers/admin/topic_comments_controller.rb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:40:46.233

我将文件夹名称从更改`topic`为`topics`，问题消失了。不知道为什么，但这可能是惯例被推到了边缘。

# java - 从 JFrame 中删除标题栏后保留边框

> ID：10120847
> 
> 赞同：0
> 
> 时间：2012-04-12T09:24:46.560
> 
> 标签：java, swing, user-interface, jframe

我想从 JFrame 中删除标题栏，所以我在那个 JFrame 上调用 setUndecorated(true)，但我想在那个 JFrame 上保留边框（漂亮的渐变），当装饰打开时会出现？我可以这样做吗？像获取 LookAndFeel 默认的边框实例或自己制作渐变边框之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:38:00.617

默认的系统 LookAndFeel 窗口边框由系统绘制，而不是 Java，因此无法单独从窗口中删除标题栏。您唯一能做的就是取消装饰您的窗口并自己绘制边框（是的，要完全复制系统边框，您将不得不付出很多努力）。

也许类似的东西可以在[SWT](http://www.eclipse.org/swt/)中使用，但要使用它，你将不得不放弃标准的 Swing。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:28:57.157

您可以通过创建 a`JPanel`并为其设置边框，然后将面板设置为框架的内容来直观地完成此操作。

```
public class Undecorated {

  public static void main(String[] args) {
    JFrame frame = new JFrame();

    JPanel borderedPanel = new JPanel();

    //Use any border you want, eg a nice blue one
    borderedPanel.setBorder(BorderFactory.createMatteBorder(5, 5, 5, 5, Color.BLUE));

    frame.setContentPane(borderedPanel);
    frame.setUndecorated(true);
    frame.setSize(new Dimension(200, 200));
    frame.setVisible(true);
  }

} 
```

# ibm-mq - WebSphere MQ 可以直接传输文件（例如 *.txt）吗？

> ID：10120848
> 
> 赞同：5
> 
> 时间：2012-04-12T09:24:48.823
> 
> 标签：ibm-mq

我是 WebSphere MQ 的新手，我正在尝试使用 c# 代码将文件作为消息通过 WebSphere MQ 移动。WebSphere MQ 可以直接传输文件（例如 *.txt）吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:57:41.163

WebSphere MQ File Transfer Edition (FTE) 是构建在 WebSphere MQ 之上的用于传输文件的产品。传输文件不需要编码。您可以通过命令和 MQ Explorer 配置文件传输。您还可以通过脚本启动文件传输。

通读这篇 developerWorks[文章](http://www.ibm.com/developerworks/websphere/library/techarticles/1003_phillips/1003_phillips.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T13:34:00.937

不，基本 WebSphere MQ 不直接传输文件。移动文件的语义包括文件名、目录路径、跨不同类型文件系统的名称转换（即 UNIX 文件树与 z/OS 分区数据集）。消息传递使用特定于队列和主题的语义，这些语义与文件的语义截然不同。

因此，基本 WMQ 不会尝试将文件语义作为其核心功能的一部分。[WebSphere MQ File Transfer Edition](http://ibm.co/WMQFTE)和[IBM Sterling Connect:Direct](http://ibm.co/INdXGf)提供了该功能。在 FTE 的情况下，托管文件传输本身就构建在 WebSphere MQ 之上。

许多人过去编写了使用消息传递来移动文件的解决方案，无论是 WebSphere MQ 还是其他传输提供程序。事实证明，以稳健的方式这样做是一项不平凡的任务。以下是一些问题：

*   如果您将每个文件都设为一条消息，则消息大小会有很大差异。调整消息传递引擎以同时处理非常大和非常小的消息是非常困难的。
*   如果您将文件分成块，那么您可以调整块大小以获得最佳消息传递性能，但现在您必须处理序列保存和丢失消息的重新发送。
*   是否附加、替换或重命名具有相同名称的目标文件的一般问题。
*   如何以事务方式使文件在目的地可用的一般问题。您不希望收件人抓取半个文件。
*   文件完整性（FTE 对文件进行哈希处理以确保它在传输过程中不会被更改）。

这些是以通用方式执行此操作的问题的示例。但是，如果您只需要一次性的点对点解决方案，请查看[SupportPac MA01](http://ibm.co/SupptPacMA01)，Q 程序。它将获取文件并一次将一行放入消息中，或者将整个文件变成一条消息。它也可以用作管道，因此可以有两个 Q 实例，其中一个将消息传递到队列，另一个检索它们。

# java - JSoup.connect 抛出 403 错误，而 apache.httpclient 能够获取内容

> ID：10120849
> 
> 赞同：19
> 
> 时间：2012-04-12T09:24:49.523
> 
> 标签：java, html-parsing, jsoup

我正在尝试解析任何给定页面的 HTML 转储。我使用了[HTML Parser](http://htmlparser.sourceforge.net/)，还尝试[了 JSoup](http://jsoup.org/cookbook/extracting-data/dom-navigation)进行解析。

我在 Jsoup 中找到了有用的函数，但在调用时出现 403 错误`Document doc = Jsoup.connect(url).get();`

我尝试了 HTTPClient，以获取 html 转储，并且对于相同的 url 是成功的。

为什么 JSoup 为从 commons http 客户端提供内容的同一 URL 提供 403？难道我做错了什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-13T07:12:50.087

工作解决方案如下（感谢 Angelo Neuschitzer 提醒将其作为解决方案）：

```
Document doc = Jsoup.connect(url).userAgent("Mozilla").get();
Elements links = doc.getElementsByTag(HTML.Tag.CITE.toString);
for (Element link : links) {
            String linkText = link.text();
            System.out.println(linkText);
} 
```

所以，**userAgent 成功**了:)

# ios - 自定义 UIPickerView

> ID：10120854
> 
> 赞同：0
> 
> 时间：2012-04-12T09:25:05.623
> 
> 标签：ios, uipickerview

我正在尝试创建自定义 UIPickerView，如下所示..：

[http://img824.imageshack.us/img824/3015/pickercustom.png](http://img824.imageshack.us/img824/3015/pickercustom.png)

示例：从“8h15”到“12h15”

我对这个概念完全视而不见。

请帮助我...任何想法，想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:31:08.257

请参阅[UIPickerView 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html#//apple_ref/occ/cl/UIPickerView)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:31:21.207

它可能不是 DatePicker，它可能是这样配置的 UIPickerView 的一个实例：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:32:12.703

使用 UIDatePicker 无法做到这一点。请改用[PickerView](https://developer.apple.com/documentation/uikit/uipickerview)。您可以连续显示“8h15”到“12h15”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:33:35.017

您可以将 UIPickerView 控件与 3 个段一起使用。在每个段上填充预定义数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T09:37:10.327

您将不得不自定义 UIPickerView。为了选择小时，您应该创建两个具有您想要的值/标题的数组。

```
 UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(22, 170, 275, 217)];
    pickerView.delegate = self;
    pickerView.dataSource = self;
    pickerView.showsSelectionIndicator = YES;
    pickerView.opaque = NO;
    [self.view addSubview:pickerView];
    [pickerView release]; 
```

在委托方法中

```
 - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {

return 3;
    }

   - (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:    (NSInteger)component {
NSInteger count =   0;
switch (component) {
    case 0:
        count   =   [arrayHours1 count];
        break;
            case 1:
                    count   =       1;
    case 2:
        count   =   [arrayHours2 count];
        break;
}
return count;
    }

    - (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
NSString *title =   @"";
switch (component) {
    case 0:
        title =  [arrayHours1 objectAtIndex:row];
        break;
    case 2:
        title   =   [arrayHours2 objectAtIndex:row];
        break;
}
return title;

    } 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T09:51:09.197

你可以检查一下：-

代码在这里

NSDate *选择 = datePickerView 。日期;

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc]init];

        [formatter setDateFormat:@"yyyy-MM-dd"];

        //[formatter setDateFormat:@"dd-MM-yyyy"];

        NSString *weekday = [formatter stringFromDate:choosen];

        invoiveDateTxtFld.text = [[NSString alloc] initWithFormat:@"%@", weekday]; 
```

# primefaces - 如何更新dataTable的过滤器 - Primefaces

> ID：10120855
> 
> 赞同：0
> 
> 时间：2012-04-12T09:25:06.820
> 
> 标签：primefaces

我有一个可编辑的数据表。

列的过滤器绑定到 selectItem 类型的数组。

由于数据表是可编辑的，因此可以更新值。要求是在相应列中的值更改时更新过滤器。

我可以通过重新渲染数据表来达到同样的效果。

当列中的任何值发生更改而不重新呈现数据表时，是否可以更新过滤器？

谢谢， 希哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:28:46.957

我通过 javascript 操作过滤器实现了同样的效果。

过滤器的id生成为：_filter

```
<select id="columnId_filter"></select> 
```

这是我们可以操纵选项的方式：

```
var selectexample = document.getElementById("columnId_filter");
selectexample.options[select.options.length] = new Option('Text 1', 'Value1'); 
```

# http - 使用 HTTP 请求的连接速度

> ID：10120857
> 
> 赞同：0
> 
> 时间：2012-04-12T09:25:11.797
> 
> 标签：http, tcp, webserver

我们正在制作一个涉及服务器（tomcat、apache、linux）和多个移动客户端（Android、iPhone、Windows、Nokia J2ME）的应用程序。

通常客户端和服务器将使用http进行通信。

我想从它发出的http请求中知道客户端的下载和上传速度。

理想情况下，我不想上传文件并下载文件以达到这些速度。我假设在 HTTP 协议级别可能有一些东西可以给我这个，或者网络的某个较低层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:45:21.077

像那么简单就好了。

即使网络的带宽[和延迟](http://calendar.perfplanet.com/2010/know-your-enemy-latency/)定义得很好，实际吞吐量也会受到拥塞窗口和端点在哪里建立慢启动阈值的限制。这些可能会影响吞吐量 20 倍或更多。

HTTP 中没有任何内容可以为这些提供指标。一些 TCP 堆栈将公开有关吞吐量的有限信息（由[iftop](http://www.ex-parrot.com/pdw/iftop/)、[iptraf](http://iptraf.seul.org/techinfo.html)使用）。

但是，如果您真的想收集有关 HTTP 吞吐量的有用指标，那么您需要开始通过网络推送数据 - 看看[yahoo boomerang](https://github.com/yahoo/boomerang)的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:46:58.467

我见过一些可以被动执行此操作的真实用户监控 (RUM) 工具（它们从数据中心服务器前面的 SPAN 端口或网络 TAP 获取馈送）

可能有多种方法可以将它们产生的数据集成到您的应用程序中，但我不确定这是否容易，或者考虑到延迟和带宽可以在移动网络上“动态”改变如此准确的方式，我不确定。

我想真正要关注的是应用程序的设计，有多少数据通过网络传输，如何最小化它等等。

需要考虑的另一件事是您是否可以提供一种解决方案，允许将某些应用程序托管在电信公司的 POP 中（一些电信公司将其所有塔楼路由回中央POP，其他电信公司有多个POP）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:55:21.397

HTTP 不处理连接速度。虽然我可以想象一些涉及一些 HTTP（反向）代理的解决方案，该代理估计连接速度并设置自定义标头以传递此信息。您还需要将不同连接的统计信息与特定客户端相关联。我还没有看到一个现成的解决方案。

另请注意

1.  网络流量可以被缓冲或整形，因此下载速度可能取决于传输的数据量或先前的网络负载。所以即使下载文件也不准确。
2.  传输的数据量取决于协议级别（包裹在 HTTP 中的有效负载，包裹在 gzip 中，包裹在 TLS 包裹的 TCP 中）。你想测量哪一个？或者你想用这个测量的速度实现什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:29:40.410

如果 http 连接先到 Apache 服务器，您可以使用 Apache Bench 进行各种负载测试。它带有 apache，可以通过以下方式调用。

假设我们想看看 Yahoo 处理 100 个请求的速度有多快，最多同时运行 10 个请求：

```
ab -n 100 -c 10 http://www.yahoo.com/ 
```

# css - IE8 :after, :before 不透明度错误

> ID：10120859
> 
> 赞同：3
> 
> 时间：2012-04-12T09:25:14.673
> 
> 标签：css, internet-explorer-8, opacity, pseudo-element

在 Internet Explorer 8 中，伪元素似乎不支持不透明度：

例子：

```
# div:after  {
   content: '';
   background: red url('pattern.png') no-repeat left top;
   position: absolute;
   top: 0;
   left: 0;
   height: 300px;
   width: 300px;
   opacity: 0.10;
   filter: alpha(opacity=10);
} 
```

有谁知道我该如何解决这个问题，所以我有不透明度为 0.10 的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:10:21.233

该`filter`属性仅适用于 IE5-7，要支持 IE8 中的不透明度，您必须使用以下内容：

```
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=10)"; 
```

[从跨浏览器不透明度的“CSS-Tricks”中查看此代码片段](http://css-tricks.com/snippets/css/cross-browser-opacity/)的完整参考。

# node.js - 如何在 mocha 中使用文件上传进行单元测试

> ID：10120866
> 
> 赞同：33
> 
> 时间：2012-04-12T09:25:42.377
> 
> 标签：node.js, express

我有一个基于 Express.js 的应用程序，我想测试文件上传功能。我正在尝试重现解析为 req.files 的对象（使用 express.bodyParser 中间件时）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-10-02T23:55:19.790

这是一个示例，说明如何使用[supertest](https://github.com/visionmedia/supertest)模块进行操作。

```
var should = require('should'),
    supertest = require('supertest');
var request = supertest('localhost:3000');

describe('upload', function() {
    it('a file', function(done) {
       request.post('/your/endpoint')
              .field('extra_info', '{"in":"case you want to send json along with your file"}')
              .attach('image', 'path/to/file.jpg')
              .end(function(err, res) {
                  res.should.have.status(200); // 'success' status
                  done();
              });
    });
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-17T20:10:20.203

您可以直接在 Mocha 中执行此操作，但这有点棘手。这是发布图像的示例：

```
var filename = 'x.png'
  , boundary = Math.random()

request(app)
  .post('/g/' + myDraftGallery._id)
  .set('Content-Type', 'multipart/form-data; boundary=' + boundary)
  .write('--' + boundary + '\r\n')
  .write('Content-Disposition: form-data; name="image"; filename="'+filename+'"\r\n')
  .write('Content-Type: image/png\r\n')
  .write('\r\n')
  .write(fs.readFileSync('test/'+filename))
  .write('\r\n--' + boundary + '--')
  .end(function(res){
    res.should.have.status(200)
    done()
  }) 
```

Content-Disposition的*name*参数是您的文件可以通过 req.files 访问的内容（我的示例是 req.files.image）您还可以使用这样的数组值：name="images[]" 和您的文件(s) 将通过数组获得，例如：req.files.images[0]

此外，如果你还没有使用它，你应该看看这个（让 mocha/express 测试更容易一点）： [https ://github.com/visionmedia/express/blob/master/test/support/http .js](https://github.com/visionmedia/express/blob/master/test/support/http.js)

**编辑**：由于 express 3-beta5，express 使用 supertest。要查看旧的 http.js 代码，请看这里：[https](https://github.com/visionmedia/express/blob/3.0.0beta4/test/support/http.js) ://github.com/visionmedia/express/blob/3.0.0beta4/test/support/http.js 或者简单地转到 supertest..

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-05T10:13:35.437

```
var expect = require('expect.js');
supertest = require('supertest');
var request = supertest('localhost:3000');

describe('create album', function () {
    it('valid ', function (done) {
        request.post('/albums')
            .set('Authorization', 'Token eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.IjkxMTg3NTk1ODg2MCI.gq32xfcOhv5AiZXJup5al1DGG0piyGWnrjZ5NouauCU')
            .field('Content-Type', 'multipart/form-data')
            .field('name', 'moni')
            .field('description', 'Nature+Pics')
            .field('caption', 'nature')
            .field('contacts', '["' + 911354971564 + '","' + 919092888819 + '"]')
            .field('dimensions', '{"photo1":{"height": 10, "width": 10}, "photo2":{"height": 20, "width": 20}, "photo3":{"height": 20, "width": 20}, "photo4":{"height": 20, "width": 20}, "photo5":{"height": 20, "width": 20}}')
            .attach('photo1', '/home/monica/Desktop/pic/1.jpeg')
            .attach('photo2', '/home/monica/Desktop/pic/2.jpeg')
            .attach('photo3', '/home/monica/Desktop/pic/3.jpeg')
            .attach('photo4', '/home/monica/Desktop/pic/4.jpeg')
            .attach('photo5', '/home/monica/Desktop/pic/5.jpeg')
            .end(function (err, res) {
            if (err) {
                console.log(err);
            } else expect(res.status).to.equal(200);
            done();
        });
    });

}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-13T14:53:40.957

将 attach('image') 更改为 attach('file') 将解决 req.files.file 未定义的问题。

```
var should = require('should'),
    supertest = require('supertest');
var request = supertest('localhost:3000');

describe('upload', function() {
    it('a file', function(done) {
       request.post('/your/endpoint')
              .field({field1: 'xxx', field2: 'yyy'})
              .attach('file', 'path/to/file.jpg')
              .end(function(err, res) {
                  res.should.have.status(200) // 'success' status
                  done()
              });
    });
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-01T12:49:38.890

TJ 刚刚发现了这个模块：[https](https://github.com/visionmedia/supertest) ://github.com/visionmedia/supertest 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T14:20:58.660

您可以尝试使用zombie.js [https://github.com/assaf/zombie](https://github.com/assaf/zombie)，它会创建一个虚拟浏览器来测试基本功能。它可以将文件附加到特定的输入字段并支持 cookie 和会话

相关要点：[https ://gist.github.com/764536](https://gist.github.com/764536)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-08T23:13:45.677

如果使用[请求承诺](https://github.com/request/request-promise)，您可以简单地执行此操作，发送 formData 内置在其中：

```
 var options = {
      method: 'POST',
      uri: base + '/api/image/upload',
      formData: {
        someField: 'someValue',
        anotherField: 'anotherValue',
        file: {
          // path to image
          value: fs.createReadStream('./testImg.png'),
          options: {
            filename: 'testImg.png',
            contentType: 'image/png'
          }
        }
      }
    };
    let resp;
    try {
      resp = await request.post(options);
      body = JSON.parse(resp);
    } catch (e) {
      console.log(e);
      resp = e.response;
      code = resp.statusCode;
      body = JSON.parse(resp.body);
    }
    // access what is returned here, check what needs to be
    assert.equal(code, 200, 'Status: ' + code + ': ' + body.error);
    assert.equal(body.success, true);
    assert.exists(body.image); 
```

# android - setText(getString(R.strings.whatever) or setText(R.strings.whatever)?

> ID：10120867
> 
> 赞同：6
> 
> 时间：2012-04-12T09:25:45.667
> 
> 标签：android

Both work, obviously if you start concatenating you'll need get string in order to avoid displaying an int.

Question: which is the most 'elegant' or 'recommended' to use?

Thank you

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T09:28:17.847

第二种方法更优雅，因为在内部，`TextView`（或其他`View`类）将完成获取指定资源的字符串的工作。

让组件做内部工作总是首选。此外，它更短且更具可读性。

* * *

关于我谈到的内部结构：如果你看一下 Android 的源代码，你可以看到`setText(int)`-method 的`TextView` [实现是这样](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/TextView.java#TextView.setText%28int%29)的：

```
public final void setText(int resid) {
  setText(getContext().getResources().getText(resid));
} 
```

因此，它在内部使用`Context`-class 从资源 ID 中获取字符串。现在，如果您查看`getText()`-method（也来自`Context`-class），您会发现它[的实现方式相同](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/content/Context.java#Context.getString%28int%29)：

```
public final String getString(int resId) {
  return getResources().getString(resId);
} 
```

因此，出于性能或可靠性的原因，它没有任何区别。不过，它更短且更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:32:27.527

好吧，由于 API 提供了一种传递资源字符串 ID 的方法，因此更喜欢使用它似乎是合乎逻辑的。您实际上可以检查 setText(resourceid) 的工作情况以了解幕后情况，但绝对推荐使用 setText(R.strings.whatever)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T14:15:50.510

你可以加

```
yourEditText.setText(getResources().getString(R.string.mytext)); 
```

因为您需要在获取字符串后获取资源上下文。

# css - Why doesn't css allow elements to change size to fill the screen?

> ID：10120868
> 
> 赞同：0
> 
> 时间：2012-04-12T09:25:46.383
> 
> 标签：css

I previously asked the following question on stack overflow: [create a scroll bar in a sidebar](https://stackoverflow.com/questions/10105160/create-a-scroll-bar-in-a-sidebar/)

here basically I am trying to create a sidebar. And in that sidebar, I want a header of unknown size and a footer of unknown size. And between the footer and header of the sidebar, I want a scrolling div containing a a long list of things. In the question above I was asking how to use css to make the scrolling div fill the space between the header and footer.

I got a lot of answers saying things like: "How can a selector know the height of another element? It is not what CSS are for."

Now my question is, why can't you do this is css? Why doesn't css allow you to set two divs to take up as much space as they need, and the div in-between fill the rest of the space? Is this not a common problem that needs to be solved?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:45:04.460

您**可以**在 CSS 中执行此操作，只是没有您希望的那样受支持。使用 CSS`calc`函数，您可以按照您描述的方式分配动态值。

您`overflow: hidden`将从#sidebar 中删除，并在#main 中使用calc 函数指定高度，类似于：

`height: calc(100% - 30px);`

最大的缺点`calc`是并非所有浏览器都支持，最重要的是当前稳定版本的 Chrome。但是，它在 Chrome 19 中可用（因此很快就会可用）在 webkit 前缀下。同样，它在 Firefox 上位于 moz 前缀下。IE9 也支持它。

示例：http: [//jsfiddle.net/XGyHP/](http://jsfiddle.net/XGyHP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:42:35.363

是的，这是一个常见问题，据我所知，这在 CSS 未来版本的规范中。至于为什么会这样，我说不上来。

奇怪的是，表知道如何做到这一点（[http://jsfiddle.net/45YJE/](http://jsfiddle.net/45YJE/)）所以可能甚至没有技术原因为什么这不应该与 div 一起使用。你只需要学会忍受它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T14:08:16.683

[这](http://jsfiddle.net/nathggns/e3ukC/)对你怎么样？我很确定它也适用于所有浏览器。

# ruby-on-rails - Rails 3 only update serialized attribute when changed

> ID：10120869
> 
> 赞同：3
> 
> 时间：2012-04-12T09:25:48.097
> 
> 标签：ruby-on-rails, serialization

Using Rails 3 I have a number of model containing serialized attributes. To perform the serialization I'm currently using 3 different techniques - the [serialize method](http://api.rubyonrails.org/classes/ActiveRecord/Base.html); [activerecord store](http://api.rubyonrails.org/classes/ActiveRecord/Store.html); and [store configurable gem](https://github.com/metaskills/store_configurable).

In all cases, when I save a model instance the serialized attribute is updated even if the content is unchanged. This was a surprising discovery particularly when using the store configurable gem as the readme states:

"StoreConfigurable is smart enough to let your parent object know when it changes. It is not dumb either. It will only trigger changes if the values you set are different, are new, or change the configs state."

Am I missing a trick here or if this is the expected behaviour is there a way to override it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:33:30.973

根据[此答案](https://stackoverflow.com/questions/7841559/ruby-on-rails-triggers-update-on-serialized-attribute-every-time#answer-7842178)，始终保存序列化列的模型是预期的行为。

我还没有尝试过“存储可配置的 gem”，但听起来它*应该*足够聪明，可以检测到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T13:37:51.410

我有类似的问题，所以在更新之前我正在重置所有值并让新值输入。

# ssh - Where does VISA go on the OSI stack?

> ID：10120871
> 
> 赞同：4
> 
> 时间：2012-04-12T09:25:50.537
> 
> 标签：ssh, visa, osi

I am looking at putting together a communications protocol for an embedded application, but I don't know much about high-level communications such as TCP/IP, etc. I'm more used to dealing with bits and bytes on [I²C](http://en.wikipedia.org/wiki/I%C2%B2C) and [SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus), etc.

Someone has suggested that I use a [VISA](http://en.wikipedia.org/wiki/Virtual_Instrument_Software_Architecture) (virtual instrument software architecture) I/O API with [SCPI](https://en.wikipedia.org/wiki/Standard_Commands_for_Programmable_Instruments) (standard commands for programmable instruments) command syntax. What layer would these sit at on the OSI model? I'm thinking VISA would be application and SCPI presentation?

Someone else has suggested using SSH, again as I'm not sure what layer VISA/SCPI sits at, I don't know how SSH would affect the design.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:32:46.537

由于您基本上只是使用网络在硬件 API 和应用程序之间传递数据，因此您位于 OSI 堆栈的第 7 层（应用程序）。

# ios - Best mobile framework to build an iPhone app for a non mobile-dev?

> ID：10120872
> 
> 赞同：0
> 
> 时间：2012-04-12T09:25:52.207
> 
> 标签：ios, mobile

I'm a php dev, and i want to port my web application first on the iPhone.

The application is like a job board. The simple mobile app will have to (with my web-app API) :

*   Auth users
*   Browse job offers through categories
*   Filter/Search job categories
*   Send / Read private messages

I never used Java / Objective-C that's why i want to know if you can recommand me a framework (or not) that could do the trick without the need for me to learn 3 months before starting to code the application.

Which direction should I take ?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:40:32.090

大概你想要一个原生应用程序，这样你就可以部署到 AppStore 并赚取一些现金？;)

您可以创建 HTML 应用程序并将它们本地包装，这样您就可以利用您现有的技能。有多种方法可以做到这一点，甚至还有一些工具可以帮助您使用本机包装器。但是对于初学者来说，看看PhoneGap：

[http://phonegap.com/](http://phonegap.com/)

# ios5 - iOS5 Storyboard: Reuse Custom UITableViewCell in multiple UITableViewControllers

> ID：10120879
> 
> 赞同：13
> 
> 时间：2012-04-12T09:25:59.677
> 
> 标签：ios5, storyboard, uitableview

Using a dynamic, custom cell prototype that I design in, say, **UITableViewController A** (in Interface Builder/Storyboard), works really well with dequeuing the cell (through its identifier, **cellA**) and such in cellForRow... I use a custom class (UITableViewCell subclass, let's name it **MyCustomCell**) to link up the labels and image thumb and it works all pretty well and straight forward in my **UITableViewController A**.

Now I create a **UITableViewController B** (in Storyboard), which happens to have the exact same design/functionality for its custom cells (dynamic cells). So I switch the class of these cells to the **MyCustomCell** and give it a new identifier, **cellB**.

In **UITableViewController B**, I dequeue the cell in cellForRow... and use the new identifier **cellB**. Note: Using **cellA** here leads to a crash, more or less obviously.

But when the table view shows up, while running the app, the **UITableViewController A** works just fine, and the almost identical **UITableViewController B** does not work (empty cells).

In Storyboard, it looks sort of off a bit, because the custom cell is designable within the **UITableViewController A** but in **UITableViewController B**, it's just a simple, plain cell. Despite the class associated to **MyCustomCell**.

How would one avoid copy&pasting these cells to the other controller (and therefore heavily going back and forth between copies when making design changes) – and rather just properly re-use it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:02:04.273

你在做什么是正确的。我不知道为什么它不起作用，重新加载tableview可能有问题；检查您的数据源和数据源方法。

```
- (NSInteger) tableView:(UITableView *) tableView numberOfRowsInSection:(NSInteger) section 
```

而你可以做的是：拖动一个

> 视图控制器

然后拖一个

> 表视图

让它充满活力，做你之前做过的事情；当我自己这样做时，它对我来说效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:48:44.507

说 Cell 来自您的自定义类并不意味着它的“设计”相同。您真正尝试在这里实现的（以及我正在寻找的）是一些“包含”单元格之王，但我认为这仅适用于 iOS 6 中的 ContainerViewController。另一种选择是对那个 Cell 使用 XIB——它应该同样好用，但是你会失去在 Storyboard 中进行概览的好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:15:34.817

我有一个类似的问题，我创建了一个自定义单元格，里面有一个 uitextfield。它在第一个 tableview 中运行良好，但在第二个中运行良好。我发现文本字段的委托未连接到自定义单元格。我通过从文本字段代表出口连接回文本字段来连接故事板中的两者。

# ruby-on-rails-3 - 调用attribute_foo=(bar)，调用自定义代码，改变bar

> ID：10120880
> 
> 赞同：0
> 
> 时间：2012-04-12T09:26:01.280
> 
> 标签：ruby-on-rails-3, attributes, decorator

出于某种原因，一段简单[的装饰器代码](https://github.com/radar/spree_localize/blob/master/app/models/spree/variant_decorator.rb#L1)在我的生产机器上失败了，但在开发[1] 上运行良好。

我把它弄傻了，发现以下是最简单的失败部分：

```
Spree::Variant.class_eval do
  def price=(value)
    self.price = normalize_number(value)
  end
end 
```

失败了`SystemStackError (stack level too deep):`

调试告诉我，确实，该函数一直被调用。self.price= 调用价格=。

解决这个问题的常用 Rails/Ruby 模式是什么？我想要的是：

当`attribute_foo=(bar)`被调用时，将其委托给我的自定义代码，在那里我可以通过`bar`一小段自定义代码运行传递的代码。然后将其分配`bar`给attribute_foo。

[1]：唯一的区别是 Ruby 补丁版本和生产机器有 64 位版本的事实，而 dev: 上是 32 位版本`ruby 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux]`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:27:21.383

解决方案很简单：只需使用[`write_attribute`](http://apidock.com/rails/ActiveRecord/AttributeMethods/Write/write_attribute).

Spree::Variant.class_eval do def price=(value) write_attribute(:price, bar(value)) end end

# ruby-on-rails - How to resize image before_save with dragonfly?

> ID：10120881
> 
> 赞同：5
> 
> 时间：2012-04-12T09:26:10.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dragonfly-gem

In my model i have:

```
attr_accessible :photo
image_accessor :photo
before_save :resize_image

def resize_image
  self.photo = self.photo.process(:resize, '40x40')
end 
```

but after save it removes my photo_uid from record in database (or doesnt write photo_uid at all)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T09:47:37.767

呵呵，我发现：

```
image_accessor :photo do
   after_assign :resize_image
end

def resize_image
   photo.process!(:resize, '1000x650>')
end 
```

# arrays - Acessing inner element of json array from mapreduce

> ID：10120885
> 
> 赞同：1
> 
> 时间：2012-04-12T09:26:30.737
> 
> 标签：arrays, json, mongodb, mapreduce

My sample Json object is as follows

```
{
    "numRecommenders": 0,
    "publicProfileUrl": "http://www.linkedin.com/pub/heena-vyas/16/786/826",
    "positions": {
        "total": 1,
        "positionList": [
            {
                "id": "91286566",
                "title": "senior executive",
                "company": {
                    "name": "Reliance",
                    "industry": "Oil & Energy",
                    "type": "Public Company",
                    "size": "10,001+ employees"
                },
                "isCurrent": true
            }
        ]
    }, 
```

My mapreduce function is give below:

```
String map = "function() {"
                 +"for (index in this.positions.positionList) {"
                        +"emit(this.positions.positionList[index].company.name, {count: 1});"
                   +"}}";

        String reduce = "function(key, values) {" + "var sum = 0;"
                + "values.forEach(function(value) {" + "sum += value['count'];"
                + "});" + "return {count: sum};" + "};";

        MapReduceCommand mapReduceCommand = new MapReduceCommand(
                mongoCollection, map, reduce.toString(), null,
                MapReduceCommand.OutputType.INLINE, null);

        MapReduceOutput out = mongoCollection.mapReduce(mapReduceCommand); 
```

But current I'm working with 1.5 million objects from mongoDb.

## I'm getting the following exception..

Exception in thread "main" com.mongodb.CommandResult$CommandFailure: command failed [command failed [mapreduce] { "assertion" : "too much data for in memory map/reduce" , "assertionCode" : 13604 , "errmsg" : "db assertion failure" , "ok" : 0.0} at com.mongodb.CommandResult.getException(CommandResult.java:70) at com.mongodb.CommandResult.throwOnError(CommandResult.java:116) at com.mongodb.DBCollection.mapReduce(DBCollection.java:961) at com.mongo.dboperations.MongoStorage.runGroupCommand(MongoStorage.java:126)

## at com.mongo.dboperations.MongoStorage.main(MongoStorage.java:218)

How to resolve this exception?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:24:27.020

MongoDB 中 map/reduce 的内联输出是最快的选项，前提是您的输出符合 16 MB 的限制。除此之外，您必须输出到集合。

# flexslider - resetting flexslider on element click

> ID：10120888
> 
> 赞同：2
> 
> 时间：2012-04-12T09:26:40.633
> 
> 标签：flexslider

I am currently building a site which utilises multiple flexsliders. The concept is that when the user clicks a specific button, it shows a flexslider with featured content relevant to the button pressed, which is all pretty simple stuff.

The problem i am having is at the moment, the flexsliders are firing on the click of a button, however whenever a user clicks on a different button, the slider is not reset.

I want to try and make the slider reset to slide 0 on each button click. I have tried using .stop() and some of the callback features within the plugin, but i have had no luck as of yet. Was wondering if anybody else had ever faced this before? (and won..)

the code in the footer.php is pretty standard issue at the moment:

```
 $('.button').click(function() {
    $('.flexslider').flexslider({ 
        controlNav: true,
        directionNav: false,
        slideToStart: 0,  
        pauseOnHover: true,  
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-15T23:47:19.650

我知道这个问题发布已经很久了，但它可能会对某人有所帮助。

我实际上面临同样的问题。经过一番摸索后，我设法使用以下代码使其工作：

```
// Catch the flexslider context
var slider = $(".flexslider").data("flexslider");

// Unset the animating flag so we can move back to the first slide quickly      
slider.animating = false;

// Move to the first slide and stop the slideshow there
slider.flexAnimate(0, true, true); 
```

如果您想在第一张幻灯片返回，但不希望动画停止，只需将最后一行替换为`slider.flexAnimate(0);`

我相信该`slider.stop()`方法不会取消设置`animating`标志。在我看来应该是，因为这个标志在`flexAnimate()`函数中用于检查是否实际滑动。如果标志设置为`false`，则`flexAnimate()`函数将突然返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T09:01:52.823

在 flexslider 的第 1056 行使用新的 api，例如 ' startAt: 0,
//Integer: 滑块应该开始的幻灯片。数组表示法（0 = 第一张幻灯片）'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:27:23.157

认为答案可能在于启动回调函数。尝试这样的事情（未经测试）

```
$('.button').click(function() {
   $('.flexslider').flexslider({ 
        controlNav: true,
        directionNav: false,
        slideToStart: 0,  
        pauseOnHover: true,
        start: function(slider) {
            if (slider.currentSlide != 0) {
                slider.flexAnimate(0)//move the slider to the first slide (Unless the slider is also already on the first slide);
            }
        }
   });
}); 
```

# android - Android - Making a Menu Bar appear after clicking in a list

> ID：10120889
> 
> 赞同：1
> 
> 时间：2012-04-12T09:26:54.500
> 
> 标签：android, click, menubar

So, im developing a mobile app and I ve this doubt that I hope someone can solve. I have a List with projects. What I want is, when I click in one of the projects, I dont want to go to another page, I just want to see like a toolbar right under the project I just clicked. My idea is to follow basically the same concept like the app Any.Do .

[Here](http://www.google.com/imgres?um=1&hl=pt-PT&sa=N&biw=1366&bih=643&tbm=isch&tbnid=9RPbcZMzBhS6RM:&imgrefurl=http://android.appstorm.net/reviews/productivity-reviews/any-do-helps-you-make-things-happen/&docid=lksoRGUDWLOCvM&imgurl=http://android.appstorm.net/wp-content/uploads/2011/11/AnyDO2.jpg&w=800&h=1280&ei=x56GT8TiF4SmhAf87cDRCA&zoom=1&iact=hc&vpx=402&vpy=107&dur=617&hovh=284&hovw=177&tx=106&ty=174&sig=111827409133443286618&page=1&tbnh=139&tbnw=100&start=0&ndsp=22&ved=1t:429,r:1,s:0,i:68) it is what I would like to do.

I would appreciate if someone could help me on this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:33:29.927

查看[GreenDroid](http://greendroid.cyrilmottier.com/reference/greendroid/widget/QuickActionBar.html)项目中的[QuickActionBar](http://greendroid.cyrilmottier.com/)。

Cyril 创建了一个 GDCalog 示例应用程序（[可从市场获得](https://play.google.com/store/apps/details?id=com.cyrilmottier.android.gdcatalog)），它也[具有此功能 (src)](https://github.com/cyrilmottier/GreenDroid/blob/master/GDCatalog/src/com/cyrilmottier/android/gdcatalog/QuickActionActivity.java)。

# c# - .Net switching control suits

> ID：10120892
> 
> 赞同：1
> 
> 时间：2012-04-12T09:27:11.097
> 
> 标签：c#, winforms, telerik, syncfusion

I have developed a windows form project using Telerik controls. Now for some reason I've to switch to Syncfusion controls. What is the best way to switch to new controls? Do I have to drag and drop all the stuff again..?? Or is there a any other option which may be less time consuming.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:32:58.597

这非常耗时。这不仅仅是改变控制的问题。可能它们在事件、成本方面完全不同，在功能方面更糟。您将需要测试所有代码并可能重写 UI 交互方法。
如果你真的需要这样做，花点时间，使用版本控制系统为新版本创建一个分支，同时保持对旧版本的支持，仍然使用 Telerik 控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:32:43.897

You could just change the references in your `*.Designer.cs` files, but you'll probably run into errors when the Designer file attempts to assign properties that have existed in the Telerik controls and don't exist in the Syncfusion ones.

This approach will probably be less work than remaking every form, but it'll still take some time.

# string - jquery $.ajax 函数返回的数据无法解析为 json

> ID：10120904
> 
> 赞同：1
> 
> 时间：2012-04-12T09:28:02.760
> 
> 标签：string, json, jquery

我有一个名为“config.json”的文件

```
{
    "book": {
        "config": {
            "uuid": "81393fe88f7c4e5a98070905790b39e1",
            "type": "fullscreen",
            "size": "1024,768"
                  }
             }
} 
```

然后我使用 $.ajax 来读取这个文件，

```
 $.ajax({
        url:...,
        data:{...},
        type:"get",
        dataType:'json',
        success:function(data, textStatus){
            console.log(data);
        }
    }) 
```

但数据返回是字符串格式，如：

```
"{\n "book": {\n ... }\n }\n }\n}" 
```

然后我想把数据解析成json，但是所有的解析函数都不起作用，

```
var obj=$.parseJSON(data); 
```

但结果是“空”

然后我想使用“jquery.json-2.3.js”

```
console.log(data.toJSON()); 
```

但结果是`data.toJSON is not a function`

我该如何解决这个问题？将字符串解析为 json

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:40:14.880

如果您指定 dataType 调用，jQuery 会自动解析响应

```
var obj=$.parseJSON(data); 
```

返回错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:37:06.100

`dataType: 'json'`如果（假设它是有效的 JSON 格式，您上面的数据就是），jQuery 会自动将 JSON 评估为对象。所以重新评估一个对象到另一个对象没有任何意义。

如果您想要来自服务器的 JSON 字符串，只需设置`dataType`为`html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:33:26.687

你可以试试*JSON.parse(data)*吗？

我认为，通过用空字符串替换来摆脱 \n 也会有所帮助。

# java - 程序结束后来自 Runtime.getRuntime().exec 的控制台？

> ID：10120905
> 
> 赞同：1
> 
> 时间：2012-04-12T09:28:14.610
> 
> 标签：java, unix, ubuntu, runtime.exec

我正在为我的小程序构建一个重启器。

基本思想是使用 运行一个进程`Runtime.getRuntime().exec`，执行程序本身，然后运行`System.exit(0);`

这是重新启动的代码：

```
Runtime.getRuntime().addShutdownHook(new Thread() {
    @Override
    public void run() {
        try {
            Runtime.getRuntime().exec(strList);  
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
});

// exit
System.exit(0); 
```

`strList`类似的`String[]`东西在哪里：

```
 {"/bin/bash","-c","java -jar path/to.jar"} 
```

不用担心操作系统的可移植性，该程序将专门在 Ubuntu 上运行。

程序重新启动正常，或者至少有一个新进程正在运行（并在一段时间后继续自行重新启动）

问题是重新启动后我松开了控制台，所以我不知道程序实际发生了什么。

**有什么方法可以在“同一个窗口”中启动新进程或以任何方式访问它（也许通过使用屏幕？）？**

# optimization - 用多个最大值最大化mathematica

> ID：10120906
> 
> 赞同：1
> 
> 时间：2012-04-12T09:28:15.390
> 
> 标签：optimization, wolfram-mathematica, maximization

我正在尝试计算一个变量的某个函数的最大值（像这样：）![阴谋](../Images/ba362c355f73ebb1254a258539eda396.png)

（它是从非平凡的卷积计算出来的，所以，不，我没有它的表达式）

使用命令：

NMaximize[{f[x], 0 < x < 1}, x, AccuracyGoal -> 4, PrecisionGoal -> 4]

（我不担心超精度，粗略估计10^-4就够了）

结果是 x* = 0.55，这不是应该的。（即，它正在选择第三个峰值）。

有没有办法告诉mathematica 从x = 0 计数时全局最大值是第一个（我知道这总是正确的），或者用更好的方法进行mathematica 搜索？（注意，我不想要刺激退火方法之类的东西；每次评估都非常昂贵！）

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:13:00.253

尝试使用一个或一些类似`FindMaximum`的小值的起点。`0`

# vmware - VMWARE 分离的快照磁盘磁盘文件现在将不起作用

> ID：10120915
> 
> 赞同：1
> 
> 时间：2012-04-12T09:28:43.720
> 
> 标签：vmware, virtual-machine, snapshot

我最终遇到了一个问题，我将虚拟磁盘文件移动到另一个数据存储，因为快照填满了现有的数据存储，以至于虚拟机无法启动。

我现在处于虚拟磁盘无法启动的情况下，显示消息“无法打开此虚拟磁盘的父级”我无法下载或移动该位置，因为它出错了。在我们的示例中，我可以恢复或展平一个虚拟磁盘文件吗？它被称为“bird-serve-000002.vmkd”

任何建议或指导表示赞赏。

感谢您的时间

安德鲁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:00:39.547

每个快照文件是两个实际文件：一个小的 .vmdk 和一个较大的 -delta.vmdk。纯 .vmdk 是一个文本文件。如果你打开那个文件，你会发现它有一个指向它的父文件的路径——这是被破坏的链接。您必须重新调整链接以指向父级（无论它去了哪里）才能让它再次工作。

完成此操作后，您可以展平或 Storage vMotion 周围的任何磁盘文件。只是不要手动移动它们，否则您将再次断开链接！

# machine-learning - 如何为国家及其首都制作分类器（TrainingSet）？

> ID：10120917
> 
> 赞同：0
> 
> 时间：2012-04-12T09:28:46.247
> 
> 标签：machine-learning, classification, training-data

我想检测一个句子是否包含国家名称或首都（即埃及、开罗、美国、华盛顿、印度、新德里、Kewit、Trablos、巴黎等）我想制作一个包含所有国家名称的文件，它是大写并对该文件进行二进制搜索以查看是否有任何匹配，任何关于如何准备好（分类器）进行二进制搜索或对数据文件进行任何类型搜索的想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:47:09.703

我知道国家和 itz 首都的列表，还有更多信息可用，但它是 sql 数据库文件。[http://www.joombah.com/downloads/view.download/23](http://www.joombah.com/downloads/view.download/23)

希望这个数据库可以帮助您解决问题

# php - zues Web 服务器上的 url 重写问题

> ID：10120921
> 
> 赞同：0
> 
> 时间：2012-04-12T09:29:11.933
> 
> 标签：php, url-rewriting

**背景**

我一直在为客户开发一个简单的内容管理系统，该系统允许他们为他们的移动应用程序管理新闻文章。现在系统是在本地开发服务器上编写的，运行 LAMP 和 php 版本 5。

现在我的客户正在使用他们的托管服务提供商提供的完全不同的平台（Zues Web 服务器）（我说完全不同，因为我之前对系统没有任何了解，它们可能没有太大不同，但对我来说感觉那样）在我第一次尝试将系统迁移到他们的服务器后，我遇到了一些问题，第一个是他们运行 php 版本 4 的地方，我设法说服他们升级到他们现在已经完成的 php 5。

但是我遇到的另一个问题是 Zues 处理脚本的方式，因为 Apache 有一个 .htaccess 文件可以让你做很多事情，Zues 似乎更喜欢使用单独的脚本文件来处理诸如 url 重写之类的事情。

-

**问题**

所以我的问题是，我不确定如何正确重写一组 .htaccess url-rewriting 规则以正确使用 Zues，遵循一些教程（很难找到适合 zues 的深入教程，或者至少它已经用于我）我有一个基本的 rewrite.script，它适用于某些页面，但不是全部。

在我的应用程序中有两个主要部分不起作用，除了 mysql 查询和表单中的一些不同元素之外，这两个部分几乎相同，所以我只讨论一个，新闻部分。

用户可以单击新闻部分，然后该部分将检查用户是否指定了他们想要查看的页码。如果他们没有，它将通过将他们重定向到为他们设置一个，`/news/1/`当用户查看新闻部分时，还有 2 个部分，已发布和未发布的新闻，当用户单击他们想要访问的区域时，URL 将设置为`/news/published`或`news/unpublished`然后页面会将此值设置为会话变量并将页面重置为`/news/1/`

这似乎是我的问题所在，我认为它与页面的正则表达式有关，因为无论我在新闻中转到哪个页面，它都将页面 url 设置为`news/1/`然后 firefox 返回错误：

```
Firefox has detected that the server is redirecting the request for this address in a way that will never complete. 
```

所以我的主要猜测是，不是将say重定向`/news/create/`到页面，而是`news_create.php`将其重定向到`news_view.php`页面，但即使是这种情况，我仍然不明白为什么在apache服务器上它加载正常，而在Zues上它返回该错误。

有谁知道我做错了什么以及我需要改变什么来解决它？

-

**代码**

*原始.htaccess*

```
#Enable URL rewriting.
RewriteEngine on
RewriteRule ^dashboard/?$ dashboard.php [L]

RewriteRule ^account/login/?$ account_login.php [L]
RewriteRule ^account/logout/?$ account_logout.php [L]
RewriteRule ^account/settings/?$ account_settings.php [L]
RewriteRule ^account/retrieve/?$ account_retrieve.php [L]
RewriteRule ^account/retrieve/([A-Z0-9_]+)/?$ account_retrieve.php?recovery_code=$1 [L]

RewriteRule ^news/?$ news_view.php [L]
RewriteRule ^news/create/?$ news_create.php [L]
RewriteRule ^news/modify/?$ news_modify.php [L]
RewriteRule ^news/modify/([0-9]+)/?$ news_modify.php?id=$1 [L]
RewriteRule ^news/delete/([0-9]+)/?$ news_view.php?delete=$1 [L]
RewriteRule ^news/([a-z]+)/?$ news_view.php?view=$1 [L]
RewriteRule ^news/([0-9]+)/?$ news_view.php?page=$1 [L]

RewriteRule ^information/?$ information_view.php [L]
RewriteRule ^information/create/?$ information_create.php [L]
RewriteRule ^information/categories/?$ information_categories.php [L]
RewriteRule ^information/modify/?$ information_modify.php [L]
RewriteRule ^information/modify/([0-9]+)/?$ information_modify.php?id=$1 [L]
RewriteRule ^information/delete/([0-9]+)/?$ information_view.php?delete=$1 [L]
RewriteRule ^information/([a-z]+)/?$ information_view.php?view=$1 [L]
RewriteRule ^information/([0-9]+)/?$ information_view.php?page=$1 [L]

RewriteRule ^json/get/([a-z]+)/?$ json_call.php?get_article_type=$1 [L] 
```

*新的重写脚本*

```
match URL into $ with ^/dashboard/
if matched 
    set URL=/dashboard.php
    goto END
endif

match URL into $ with ^/account/login/
if matched 
    set URL=/account_login.php
    goto END
endif

match URL into $ with ^/account/logout/
if matched 
    set URL=/account_logout.php
    goto END
endif

match URL into $ with ^/account/settings/
if matched 
    set URL=/account_settings.php
    goto END
endif

match URL into $ with ^/account/retrieve/
if matched 
    set URL=/account_retrieve.php
    goto END
endif

match URL into $ with ^/account/retrieve/([A-Z0-9_]+)/
if matched 
    set URL=/account_retrieve.php?recovery_code=$1
    goto END
endif

match URL into $ with ^/news/
if matched 
    set URL=/news_view.php
    goto END
endif

match URL into $ with ^/news/create/
if matched 
    set URL=/news_create.php
    goto END
endif

match URL into $ with ^/news/modify/
if matched 
    set URL=/news_modify.php
    goto END
endif

match URL into $ with ^/news/modify/([0-9]+)/
if matched 
    set URL=/news_modify.php?id=$1
    goto END
endif

match URL into $ with ^/news/delete/([0-9]+)/
if matched 
    set URL=/news_view.php?delete=$1
    goto END
endif

match URL into $ with ^/news/([a-z]+)/
if matched 
    set URL=/news_view.php?view=$1
    goto END
endif

match URL into $ with ^/news/([0-9]+)/
if matched 
    set URL=/news_view.php?page=$1
    goto END
endif

match URL into $ with ^/information/
if matched 
    set URL=/information_view.php
    goto END
endif

match URL into $ with ^/information/create/
if matched 
    set URL=/information_create.php
    goto END
endif

match URL into $ with ^/information/categories/
if matched 
    set URL=/information_categories.php
    goto END
endif

match URL into $ with ^/information/modify/
if matched 
    set URL=/information_modify.php
    goto END
endif

match URL into $ with ^/information/modify/([0-9]+)/
if matched 
    set URL=/information_modify.php?id=$1
    goto END
endif

match URL into $ with ^/information/delete/([0-9]+)/
if matched 
    set URL=/information_view.php?delete=$1
    goto END
endif

match URL into $ with ^/information/([a-z]+)/
if matched 
    set URL=/information_view.php?view=$1
    goto END
endif

match URL into $ with ^/information/([0-9]+)/
if matched 
    set URL=/information_view.php?page=$1
    goto END
endif

match URL into $ with ^/json/get/([a-z]+)/
if matched 
    set URL=/json_call.php?get_article_type=$1
    goto END
endif 
```

*来自 news_view.php 的相关代码*

```
<?php

    //Require the configuration file.
    require('_configuration.php');

    //Establish a database connection.
    $connection->establish();

    //Check that the user is logged in.
    $account->check_login_state();

    //Check what view is selected and assign a view.
    if($_GET['view']) {
        if($_GET['view'] == 'pending') {
            $_SESSION[$G_instance_name]['view']['news'] = 'pending';
            header('location: /news/');
            die;
        } else {
            $_SESSION[$G_instance_name]['view']['news'] = 'published';
            header('location: /news/');
            die;
        }
    } else if(!isset($_SESSION[$G_instance_name]['view']['news']) or empty($_SESSION[$G_instance_name]['view']['news'])) {
        $_SESSION[$G_instance_name]['view']['news'] = 'published';
        header('location: /news/');
        die;
    }

    //Check if the modify article is still set and unset it.
    if(!empty($_SESSION[$G_instance_name]['modify']['news'])) {
        unset($_SESSION[$G_instance_name]['modify']['news']);
    }

    //Check if the user has attempted to delete an article.
    if(isset($_GET['delete'])) {
        $operation->article->delete($_GET['delete']);
    }

    //Check if the user is on a page, if note set the page to 1 as default.
    if(!isset($_GET['page']) or empty($_GET['page'])) {
        header('location: /news/1/');
        die;
    }

    //Get all news articles.
    $news_article = $operation->pagition->gather_article_data('news');

?> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:59:22.110

想通了，我`$`在每条比赛线的末尾都错过了一个。

```
match URL into $ with ^/account/login/ 
```

应该是

```
match URL into $ with ^/account/login/$ 
```

# python - python鼻子xunit报告文件为空

> ID：10120923
> 
> 赞同：6
> 
> 时间：2012-04-12T09:29:14.657
> 
> 标签：python, jenkins, nose, xunit

我在进行鼻子测试并在 Jenkins 中获得结果时遇到问题。

该作业有一个这样的 shell 脚本：

```
. /var/lib/jenkins/envs/itravel/bin/activate
python api/manage.py syncdb --noinput
DJANGO_SETTINGS_MODULE=ci_settings nosetests --verbosity=0 --processes=1 --with-xunit --xunit-file=nosetests.xml
deactivate 
```

部分测试套件使用 django_nose.NoseTestSuiteRunner 运行。

运行所有测试并创建生成的 nosetests.xml 文件，但似乎没有填充测试结果：

```
<?xml version="1.0" encoding="UTF-8"?><testsuite name="nosetests" tests="0" errors="0" failures="0" skip="0"></testsuite> 
```

我注意到在`import Error`失败时文件充满了一个错误，但除此之外，什么都没有......

任何的想法？测试方面有什么特别的事情要做吗？有什么要设置的属性吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T19:05:55.110

据我所知，该`--processes`选项与`--with-xunit`. 当您要求鼻子测试与流程插件一起运行时，测试将在指定数量的子流程中运行。xunit 插件不知道如何将结果收集到 xml 文件中。

只需删除该`--processes`选项，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-17T18:11:19.067

自 2011 年以来， Nose 一直有一个[开放且未解决的 GitHub 问题](https://github.com/nose-devs/nose/issues/2)。正如@sti 所说，如果你不使用`--processes`. 对于其他所有人，请考虑改用[Ignas/nose_xunitmp](https://github.com/Ignas/nose_xunitmp)：

```
pip install nose_xunitmp
nosetests --with-xunitmp
nosetests --xunitmp-file results.xml 
```

# php - MAMP - 现有的 Apache 和 PHP

> ID：10120926
> 
> 赞同：3
> 
> 时间：2012-04-12T09:29:19.273
> 
> 标签：php, apache, mamp

我对 Mac OS 和 MAMP 都很陌生。

因此，Mac OS X 预装了 Apache Web 服务器、PHP 等。我有一个关于安装 MAMP 的问题：

与 MAMP 一起安装的 PHP、Apache 等会取代预加载的吗？或者，MAMP 会安装每个实例的第二个实例吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:35:27.350

MAMP 是独立的，将代替预安装的 Apache 运行。您必须在系统设置中禁用“Web 共享”功能才能禁用内置的 Apache 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:33:13.653

不，它不会取代任何东西。MAMP 是完全独立的。所有文件都位于 /Applications/MAMP 文件夹中，而 Apache 服务器在不同的端口上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T06:32:58.863

MAMP 是独立的。它不会取代 Apache、Mysql 或计算机中的任何其他东西或任何原始设置。它从具有不同端口号的自己的文件夹中运行这些服务。MAC OS 中原始安装的 Apache 将继续在默认端口上运行，即

原始 Apache 安装将继续运行 `localhost:80`

Mamp 会在 8888 端口上安装服务，8889 用于 apache、mysql。新的 MAMP Apache 安装将在

```
localhost:8888 
```

从 MAMP 中卸载这些服务很简单，就像从应用程序中删除 MAMP 文件夹一样

# xamarin.ios - Monotouch中的UIDatePicker

> ID：10120933
> 
> 赞同：0
> 
> 时间：2012-04-12T09:29:54.033
> 
> 标签：xamarin.ios, uidatepicker

我创建了一个可滚动的 UIDatePicker UI，但无法在 UITextField 中选择和显示。任何人都可以帮助我如何在 Monotouch 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:37:28.413

[在此处](https://github.com/xamarin/monotouch-samples)下载 MonoTouch 示例并查看 MonoCatalog-MonoDevelop 示例。它有你所需要的。

# authentication - Websphere 预登录到 j_security_check

> ID：10120935
> 
> 赞同：0
> 
> 时间：2012-04-12T09:30:00.273
> 
> 标签：authentication, servlets, websphere, servlet-filters, j-security-check

我正在使用带有 j_security_check 的 Websphere，并且我有一个带有机密和 SSL 设置的有效登录过滤器。由于一些复杂的要求，我需要在执行 j_security_check 之前处理 j_username 变量。

从[此处找到的答案](https://stackoverflow.com/questions/8678584/prelogin-filter-before-j-security-check)之一，据说无法进行此登录前处理。但是，我注意到之前的提问者使用的是 Tomcat，而我使用的是 Websphere。我发现这里有解决我的问题的方法[，](http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.base.doc%2Finfo%2Faes%2Fae%2Ftsec_servlet.html)但似乎每次我尝试登录时，都会收到“网站无法显示页面。网站出现编程错误”。

我尝试通过检查语法是否正确来进行故障排除。发现了一些不一致的地方，并尽我所能纠正它们。但是，我仍然不断收到同样的错误。

有人能把我扔到正确的方向吗？我可以提供更多信息，但它们大多类似于第二个链接。唯一受保护的文件夹位于 \protected\ 中，而 .java servlet 位于 \WEB-INF\classes 中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T03:56:45.230

如果有人感兴趣，结果在这里：

对于 \WEB-INF\web.xml

```
<filter id="Filter_1">
    <filter-name>LoginFilter</filter-name>
    <filter-class>com.myloginfilter.MyLoginFilter</filter-class>
    <description>Performs pre-login operation</description>
</filter>
<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/j_security_check</url-pattern>
</filter-mapping> 
```

对于 \WEB-INF\classes\com\myloginfilter\MyLoginFilter.class

```
 public class MyLoginFilter implements Filter {

    protected FilterConfig filterConfig;

    public void init(FilterConfig filterConfig) throws ServletException {
       this.filterConfig = filterConfig;
    }

    public void destroy() {
       this.filterConfig = null;
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws java.io.IOException, ServletException {
        chain.doFilter(new MyRequestWrapper((HttpServletRequest) request), response);
    }

    public static class MyRequestWrapper extends HttpServletRequestWrapper {

        public MyRequestWrapper(HttpServletRequest request) {
            super(request);
        }

        @Override
        public String getParameter(String name) {
            String username= getRequest().getParameter("j_username");

            if ("j_password".equals(name) && "admin".equals(username)) {
                username = "administrator";
                return username;
            }
            return super.getParameter(name);
        }
    }
} 
```

要编译它，请使用 Javac 和以下命令：

```
javac -cp servlet-api-2.3.jar MyLoginFilter.class 
```

# c# - 从后台线程更新 UI

> ID：10120936
> 
> 赞同：1
> 
> 时间：2012-04-12T09:30:04.760
> 
> 标签：c#, winforms, multithreading, .net-3.5, invocation

关于从后台线程更新的另一个问题。

切入正题：在应用程序中，后台线程需要更新 UI。我考虑过使用中间集合来缓冲消息并有一个计时器来显示它们。目前我们正在尝试一种最简单的方法。

代码尝试#1：

```
void foo(string status)
{
    if (this.InvokeRequired)
    {
        BeginInvoke(new MethodInvoker(delegate()
        {
            InsertStatusMessage(status);
        }));

    }
    else
    {
        InsertStatusMessage(status);
    }  
} 
```

这似乎有一些缺陷。Msdn 指出，如果尚未创建窗口句柄（在我看来不可用），它`InvokeRequired`也会返回。`false`所以代码应该是：

```
void foo(string status)
{
    if (this.InvokeRequired)
    {
        BeginInvoke(new MethodInvoker(delegate()
        {
            InsertStatusMessage(status);
        }));

        // wait until status is set
        EndInvoke(result);
    }
    else if(this.IsHandleCreated)
    {
        InsertStatusMessage(status);
    }
    else
    {
        _logger.Error("Could not update status");
    } 
} 
```

上面的代码也以某种方式抛出（出于未知且未复制的原因）。我们使用 DevExpress，这是未处理的异常消息（没有任何信息，也没有关于错误发生的原因/位置的任何线索）：

> System.NullReferenceException：对象引用未设置为 DevExpress.Utils.Text.TextUtils.GetFontAscentHeight(Graphics g, Font font) 中的 DevExpress.Utils.Text.FontsCache.GetFontCacheByFont(Graphics graphics, Font font) 中的对象实例.XtraEditors.ViewInfo.BaseEditViewInfo.GetTextAscentHeight() 在 DevExpress.XtraEditors.ViewInfo.TextEditViewInfo.CalcTextBaseline(Graphics g) 在 DevExpress.XtraEditors.ViewInfo.BaseControlViewInfo.ReCalcViewInfo(Graphics g, MouseButtons buttons, Point mousePosition, Rectangle bounds) 在 DevExpress. DevExpress.XtraGrid.Views.Grid.ViewInfo.GridViewInfo.CreateCellEditViewInfo(GridCellInfo cell, Boolean calc,Boolean allowCache) 在 DevExpress.XtraGrid.Views.Grid.ViewInfo.GridViewInfo.RequestCellEditViewInfo(GridCellInfo cell) 在 DevExpress.XtraGrid.Views.Grid.Drawing.GridPainter.DrawRegularRowCell(GridViewDrawArgs e, GridCellInfo ci) 在 DevExpress.XtraGrid.Views.Grid .Drawing.GridPainter.DrawRegularRow(GridViewDrawArgs e, GridDataRowInfo ri) 在 DevExpress.XtraGrid.Views.Grid.Drawing.GridPainter.DrawRow(GridViewDrawArgs e, GridRowInfo ri) 在 DevExpress.XtraGrid.Views.Grid.Drawing.GridPainter.DrawRows(GridViewDrawArgs e) 在 DevExpress.XtraGrid.Views.Grid.Drawing.GridPainter.DrawContents(GridViewDrawArgs e) 在 DevExpress.XtraGrid.Views.Grid.Drawing.GridPainter.Draw(ViewDrawArgs ee) 在 DevExpress.XtraGrid.Views.Base.BaseView.Draw (GraphicsCache e) 在 DevExpress.XtraGrid.GridControl 中。OnPaint(PaintEventArgs e)
> 在 System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer, Boolean disposeEventArgs) 在 System.Windows.Forms.Control.WmPaint(Message& m) 在 System.Windows.Forms.Control.WndProc(Message& m) 在 DevExpress .XtraEditors.Container.EditorContainer.WndProc(Message& m)
> 在 DevExpress.XtraGrid.GridControl.WndProc(Message& m) 在 System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
> 在 System.Windows.Forms.NativeWindow.Callback (IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

我想使用`Begin/End Invoke`而不是`Invoke`因为它需要更少的东西（方法委托）并且更具可读性。

我错过了什么，如何安全地进行线程调用？我只想在列表框中添加一条消息。我真的不在乎调用线程是否会等待几毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:53:25.970

您可以使用“MethodInvoker”直接调用“Invoke”。

```
void foo(string status)
{
    Invoke(new MethodInvoker(() => {InsertStatusMessage(status);}));
} 
```

我也将它与 DevExpress 控件一起使用（尤其是在一个表单上异步更新多个 Xtragrid 上的数据源）。

有关 MethodInvoker 的更多信息，有一篇[很棒的帖子](http://timl.net/2008/01/begininvoke-methodinvoker-and-anonymous.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T09:32:14.313

```
class Test : Form
{
        delegate void FooCallback(string status);

        public Test()
        {
        }

        private void foo(string status)
        {
            if (this.InvokeRequired == true)
            {
                FooCallback = new FooCallback(foo);
                this.Invoke
                    (d, status);

            }
            else
            {
              //Do Things

            }
        }     
} 
```

使用 MethodInvoker 会花费很多性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T08:46:50.103

我已经对应用逻辑进行了逆向工程，并且在所有情况下，有一个共同因素是导致错误的原因：

1.  你调用的对象是空的。
2.  对象当前正在其他地方使用。

错误是引入

```
DevExpress.Utils.Text.FontsCache.GetFontCacheByFont(Graphics graphics, Font font) 
```

此类在线程之间共享 windows 字体，这是严格禁止的。GDI 资源的 Windows 使用，在绘制消息处理期间以及类似的东西

```
DevExpress.Utils.Text.TextUtils.GetStringSize(Graphics g, String text, 
    Font font, StringFormat stringFormat, Int32 maxWidth, Int32 maxHeight, 
    IWordBreakProvider wordBreakProvider, Boolean& isCropped) 
```

仅限于创建 GDI 资源的线程。换句话说：

> 只有创建了字体或窗口的线程可以使用它，所有其他线程都不允许向这些窗口发送窗口绘制消息。

测量窗口中字体的大小也是某种类型的绘制动作（虽然不可见，因为只返回绘制文本的大小）。

解决方案（DevExpress 只应实现两者之一）：

1.  该类`Text.FontsCache`必须将 current-thread-ID 添加到用于将创建的字体存储在缓存中的 ID。
2.  每个线程都必须创建自己的类实例`Text.FontsCache`。

# java - JScrollPane 未显示在继承的 JPanel 上

> ID：10120937
> 
> 赞同：1
> 
> 时间：2012-04-12T09:30:05.323
> 
> 标签：java, swing, jpanel, jlist

我有一个扩展 JPanel 的类。下面的代码：

```
public class Test extends JPanel implements Testnterface {
    private JScrollPane listScroller;

    DefaultListModel model;
    private JList requestList;    
    public Test() {

        String title = "Stackoverflow Question";
        setBorder(BorderFactory.createTitledBorder(title));
        model = new DefaultListModel();
     requestList = new JList(); // create a list
        listScroller = new JScrollPane(requestList); // create a scrollbar to the list
        listScroller.setPreferredSize(new Dimension(250, 80));

        setLayout(null);
        add(listScroller); // even though I add the scrollPane, nothing is displayed   
    }
 } 
```

我更新了代码。即使我添加了它，我似乎也无法让我的 JScrollPane 显示在我的 JPanel 上。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:37:04.683

我遇到了同样的问题，并通过用 JPanel 包装滚动窗格来解决它：

```
final JScrollPane jScrollPane = new JScrollPane(list,
     JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
     JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

final JPanel panel = new JPanel(new BorderLayout(BORDER_SIZE, BORDER_SIZE));
panel.setBorder(BorderFactory.createEmptyBorder(BORDER_SIZE, BORDER_SIZE, 
      BORDER_SIZE, BORDER_SIZE));

panel.add(jScrollPane); 
```

# objective-c - NSFetchRequest 的 NSSortDescriptor 在上下文保存后不起作用

> ID：10120938
> 
> 赞同：5
> 
> 时间：2012-04-12T09:30:15.267
> 
> 标签：objective-c, ios, core-data, magicalrecord

我正在 GCD 调度队列中对 NSManagedObjectContext 进行操作，定义如下：

```
- (NSManagedObjectContext *)backgroundContext
{
    if (backgroundContext == nil) {
        self.backgroundContext = [NSManagedObjectContext MR_contextThatNotifiesDefaultContextOnMainThread];
    }
    return backgroundContext;
} 
```

`MR_contextThatNotifiesDefaultContextOnMainThread`是来自[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)的方法：

```
NSManagedObjectContext *context = [[self alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[context setParentContext:[NSManagedObjectContext MR_defaultContext]];
return context; 
```

在获取我的对象并给他们正确的队列位置后，我记录它们并且顺序是正确的。但是，第二个日志似乎是完全随机的，排序描述符显然不起作用。

我已将问题范围缩小到`[self.backgroundContext save:&error]`. 保存背景上下文后，排序描述符被破坏。

```
dispatch_group_async(backgroundGroup, backgroundQueue, ^{
    // ...

    for (FooObject *obj in fetchedObjects) {
        // ...
        obj.queuePosition = [NSNumber numberWithInteger:newQueuePosition++];
    }

    NSFetchRequest *f = [NSFetchRequest fetchRequestWithEntityName:[FooObject entityName]];
    f.predicate = [NSPredicate predicateWithFormat:@"queuePosition > 0"];
    f.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"queuePosition" ascending:YES]];
    NSArray *queuedObjects = [self.backgroundContext executeFetchRequest:f error:nil];
    for (FooObject *obj in queuedObjects) {
        DLog(@"%@ %@", obj.queuePosition, obj.title);
    }

    if ([self.backgroundContext hasChanges]) {
        DLog(@"Changes");
        NSError *error = nil;
        if ([self.backgroundContext save:&error] == NO) {
            DLog(@"Error: %@", error);
        }
    }

    queuedObjects = [self.backgroundContext executeFetchRequest:f error:nil];
    for (FooObject *obj in queuedObjects) {
        DLog(@"%@ %@", obj.queuePosition, obj.title);
    }

}); 
```

我不知道为什么排序描述符不起作用，任何核心数据专家都想帮忙吗？

**更新：**

这个问题在 iOS 4 上不会出现。我认为原因在于线程隔离和私有队列模式之间的差异。MagicalRecord 自动使用似乎表现不同的新并发模式。

**更新 2：**

通过添加背景上下文的保存解决了该问题：

```
if ([[NSManagedObjectContext MR_contextForCurrentThread] hasChanges]) {
    DLog(@"Changes");
    NSError *error = nil;
    if ([[NSManagedObjectContext MR_contextForCurrentThread] save:&error] == NO) {
        DLog(@"Error: %@", error);
    } else {
        NSManagedObjectContext *parent = [NSManagedObjectContext MR_contextForCurrentThread].parentContext;
        [parent performBlockAndWait:^{
            NSError *error = nil;
            if ([parent save:&error] == NO) {
                DLog(@"Error saving parent context: %@", error);
            }
        }];
    }
} 
```

**更新 3：**

MagicalRecord 提供了一种递归保存上下文的方法，现在我的代码如下所示：

```
if ([[NSManagedObjectContext MR_contextForCurrentThread] hasChanges]) {
    DLog(@"Changes");
    [[NSManagedObjectContext MR_contextForCurrentThread] MR_saveWithErrorHandler:^(NSError *error) {
        DLog(@"Error saving context: %@", error);
    }];
} 
```

很惭愧我一开始没有使用它...

但是，我不知道*为什么*这会有所帮助，并且很想得到解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T10:59:31.027

我会尝试发表评论，因为我写了 MagicalRecord。

因此，在 iOS5 上，MagicalRecord 被设置为尝试使用多个托管对象上下文的新 Private Queue 方法。这意味着子上下文中的保存只会将保存推送到父上下文。只有当没有更多父母的父母保存时，保存才会持续到它的商店。这可能是您的 MagicalRecord 版本中发生的情况。

MagicalRecord 已尝试在以后的版本中为您处理此问题。也就是说，它会尝试在私有队列模式和线程隔离模式之间进行选择。正如你所发现的，这不太好。为 iOS4 和 iOS5 编写代码（无需复杂的预处理器规则等）的唯一真正兼容的方法是使用经典的线程隔离模式。来自 1.8.3 标签的 MagicalRecord 支持这一点，并且应该适用于两者。从 2.0 开始，从这里开始将只有私人队列。

而且，如果您查看 MR_save 方法，您会发现它还在为您执行 hasChanges 检查（这也可能是不需要的，因为 Core Data 内部也可以处理它）。无论如何，您应该编写和维护更少的代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:23:58.137

原始设置不起作用的实际根本原因是在父上下文尚未保存到存储时从具有排序描述符的子上下文中获取时出现 Apple 错误：

[NSSortdescriptor 对从 NSManagedContext 获取结果无效](https://stackoverflow.com/questions/10253817/nssortdescriptor-ineffective-on-fetch-result-from-nsmanagedcontext)

如果有任何方法可以避免嵌套上下文，请避免使用它们，因为它们仍然非常错误，并且您可能会对假定的性能提升感到失望，参见。也： [http ://wbyoung.tumblr.com/post/27851725562/core-data-growth-pains](http://wbyoung.tumblr.com/post/27851725562/core-data-growing-pains)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T10:02:17.100

由于 CoreData 不是一个安全线程框架并且对于每个线程（操作队列），核心数据使用不同的上下文。请参考以下优秀的写作

[http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/](http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/)

# c# - 在数组中找到最接近的值

> ID：10120944
> 
> 赞同：37
> 
> 时间：2012-04-12T09:30:53.097
> 
> 标签：c#, arrays, find

```
int[] array = new int[5]{5,7,8,15,20};

int TargetNumber = 13; 
```

对于目标数字，我想在数组中找到最接近的数字。例如，当目标数字是 13 时，上面数组中最接近它的数字是 15。我将如何在 C# 中以编程方式完成该操作？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-12T09:32:37.217

编辑：已调整以下查询以转换为使用`long`算术，以避免溢出问题。

我可能会使用[MoreLINQ](https://www.nuget.org/packages/morelinq/)的`MinBy`方法：

```
var nearest = array.MinBy(x => Math.Abs((long) x - targetNumber)); 
```

或者你*可以*只使用：

```
var nearest = array.OrderBy(x => Math.Abs((long) x - targetNumber)).First(); 
```

...但这将对整个集合进行排序，而您确实不需要。*诚然，对于一个小*数组来说，这不会有太大的不同......但与描述你*实际*尝试做的事情相比，它感觉不太正确：根据某个函数找到具有最小值的元素。

请注意，如果数组为空，这两种方法都会失败，因此您应该先检查一下。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-12T09:32:46.110

如果您使用的是 .Net 3.5 或更高版本，LINQ 可以在这里为您提供帮助：

```
var closest = array.OrderBy(v => Math.Abs((long)v - targetNumber)).First(); 
```

或者，您可以编写自己的扩展方法：

```
public static int ClosestTo(this IEnumerable<int> collection, int target)
{
    // NB Method will return int.MaxValue for a sequence containing no elements.
    // Apply any defensive coding here as necessary.
    var closest = int.MaxValue;
    var minDifference = int.MaxValue;
    foreach (var element in collection)
    {
        var difference = Math.Abs((long)element - target);
        if (minDifference > difference)
        {
            minDifference = (int)difference;
            closest = element;
        }
    }

    return closest;
} 
```

可以这样使用：

```
var closest = array.ClosestTo(targetNumber); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-15T22:21:38.450

Jon 和 Rich 都用`MinBy`和给出了很好的答案`ClosestTo`。`OrderBy`但是，如果您的意图是找到单个元素，我永远不会推荐使用。对于这类任务来说，效率太低了。这只是工作的错误工具。

这是一种性能略优于 MinBy 的技术，已包含在 .NET 框架中，但不如 MinBy 优雅：[`Aggregate`](http://msdn.microsoft.com/en-us/library/bb548651.aspx)

```
var nearest = array.Aggregate((current, next) => Math.Abs((long)current - targetNumber) < Math.Abs((long)next - targetNumber) ? current : next); 
```

正如我所说，不像乔恩的方法那样优雅，但可行。

在我的电脑上的表现：

1.  For(each) 循环 = 最快
2.  聚合 = 比循环慢 2.5 倍
3.  MinBy = 比循环慢 3.5 倍
4.  OrderBy = 比循环慢 12 倍

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-08T15:00:54.280

几年前，我在 Math.NET Numerics [https://numerics.mathdotnet.com/](https://numerics.mathdotnet.com/)中发现了这种非常性感的方法，它与数组中的 BinarySearch 一起使用。这对准备插值和工作到 .Net 2.0 很有帮助：

```
public static int LeftSegmentIndex(double[] array, double t)
{
    int index = Array.BinarySearch(array, t);
    if (index < 0)
    {
        index = ~index - 1;
    }
    return Math.Min(Math.Max(index, 0), array.Length - 2);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-23T21:37:09.897

如果您需要找到最接近平均值的值

## 非常开放的风格

```
public static double Miidi(double[] list)
{
    bool isEmpty = !list.Any();
    if (isEmpty)
    {
        return 0;
    }
    else
    {
        double avg = list.Average();
        double closest = 100;
        double shortest = 100;
        {
            for ( int i = 0; i < list.Length; i++)
            {
                double lgth = list[i] - avg;
                if (lgth < 0)
                {
                    lgth = lgth - (2 * lgth);
                }
                else
                    lgth = list[i] - avg;

                if (lgth < shortest)
                {
                    shortest = lgth;
                    closest = list[i];
                }
            }
        }

        return closest;
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-07T07:38:51.423

性能方面的自定义代码将更有用。

```
public static int FindNearest(int targetNumber, IEnumerable<int> collection) {
    var results = collection.ToArray();
    int nearestValue;
    if (results.Any(ab => ab == targetNumber))
        nearestValue = results.FirstOrDefault(i => i == targetNumber);
    else{
        int greaterThanTarget = 0;
        int lessThanTarget = 0;
        if (results.Any(ab => ab > targetNumber)) {
            greaterThanTarget = results.Where(i => i > targetNumber).Min();
        }
        if (results.Any(ab => ab < targetNumber)) {
            lessThanTarget = results.Where(i => i < targetNumber).Max();
        }

        if (lessThanTarget == 0) {
            nearestValue = greaterThanTarget;
        }
        else if (greaterThanTarget == 0) {
            nearestValue = lessThanTarget;
        }
        else if (targetNumber - lessThanTarget < greaterThanTarget - targetNumber) {
            nearestValue = lessThanTarget;
        }
        else {
            nearestValue = greaterThanTarget;
        }
    }
    return nearestValue;
} 
```

# biztalk - 如果其他编排获得特定值，则启动编排

> ID：10120947
> 
> 赞同：0
> 
> 时间：2012-04-12T09:31:02.140
> 
> 标签：biztalk, biztalk-2010

我想做一个接收特定消息的主编排，并且在此消息中具有特定值，主编排可以调用另一个编排（具有调用编排形状），该编排接收具有接收形状的不同消息并执行其他功能

注意：主要编排和另一个编排通常在同一个项目中，我如何才能继续进行 2 个编排，每个编排都有一个接收形状

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:38:46.497

我觉得你走错了方向，你能做的就是这样。

1.  创建一个主编排，并从消息框接收消息（您的特定）。
2.  在您的编排中，检查您要检查的值。
3.  当需要将消息传递给另一个编排时，您不调用编排方向。创建一条新消息，使用映射，将您收到的消息传输到另一个编排正在侦听的消息。
4.  将消息发布回消息框。

这样就不需要直接调用编排了。BizTalk 将帮助您安排消息并将消息传递给您要调用的业务流程。

或者您可以使用仅消息解决方案，这意味着您根本不需要主编排，您可以在接收位置设置过滤器，然后使用地图传输消息。

# asp.net - .net 会话清除 php 会话

> ID：10120951
> 
> 赞同：2
> 
> 时间：2012-04-12T09:31:25.820
> 
> 标签：asp.net, iis-7, php, asp.net-session

我在一个.net 会话似乎正在清除 php 会话的网站上有一个非常奇怪的情况。

当用户登录该站点时，会创建 .net 会话，然后代码会调用一个设置 php 会话的 php 页面。此设置已在许多站点上运行，但是正在开发的新站点将无法正常工作。

如果直接设置 php 会话，则它可以工作，但是当创建 .net 会话时，会删除 php 会话。

该网站在 IIS7 上运行。

编码：

VB

```
Session("username") = "username" 
```

php

```
session_start();
$_SESSION['username'] = "username"; 
```

然后我检查另一个页面

```
if ( isset($_SESSION['username'] )) 
```

代码中没有其他内容可以清除任何会话。有没有人经历过这个？在 IIS7 中是否有可能导致此问题的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:07:18.130

好的，几个简单的问题：

*   您在同一个 IIS7 服务器上使用相同的域名同时运行 PHP 和 ASP.net 代码？
*   通过“然后代码然后调用设置 php 会话的 php 页面”是指将浏览器重定向到 php 页面吗？

会话通常通过 cookie 工作，因此一个好的起点是在每个步骤之后查看浏览器 cookie。我希望看到两个 cookie - 一个用于 asp.net 会话，另一个用于 php 会话。

# php - 脚本的第二个实例运行与第一个完全相同的代码

> ID：10120952
> 
> 赞同：0
> 
> 时间：2012-04-12T09:31:26.243
> 
> 标签：php

该脚本应该使用文件锁等写入日志文件，以确保同时运行的脚本没有任何读/写并发症。我从 php.net 上的某个人那里得到了它。当我尝试同时运行它两次时，我注意到它完全忽略了锁定文件。但是，当我连续运行它们时，锁定文件工作得很好。

这没有任何意义。该脚本仅检查文件是否存在，并据此采取行动。另一个脚本是否正在运行，根本不应该影响它。我仔细检查以确保在这两种情况下都创建了锁定文件；它是。

所以我开始做一些测试。

第一个实例从`11:21:00`输出开始：

```
Started at: 2012-04-12 11:21:00 
Checking if weblog/20120412test.txt.1.wlock exists
Got lock: weblog/20120412test.txt.1.wlock
log file not exists, make new
log file was either appended to or create anew
Wrote: 2012-04-12 11:21:00 xx.xx.xx.xxx "testmsg" 
1 
```

第二个实例从`11:21:03`输出开始：

```
Started at: 2012-04-12 11:21:00 
Checking if weblog/20120412test.txt.1.wlock exists
Got lock: weblog/20120412test.txt.1.wlock
log file not exists, make new
log file was either appended to or create anew
Wrote: 2012-04-12 11:21:00 xx.xx.xx.xxx "testmsg" 
1 
```

所以这里有两件事是错误的。时间戳和脚本说锁定文件的事实不存在，即使它肯定存在。

几乎就像脚本的第二个实例只是输出第一个实例所做的一样。

```
<?php
function Weblog_debug($input)
{
    echo $input."<br/>";
}
function Weblog($directory, $logfile, $message)
{
    // Created 15 september 2010: Mirco Babin
    $curtime = time();

    $startedat = date('Y-m-d',$curtime) . "\t" . date('H:i:s', $curtime) .  "\t";
    Weblog_debug("Started at: $startedat");

    $logfile = date('Ymd',$curtime) . $logfile;

    //Set directory correctly
    if (!isset($directory) || $directory === false)
    $directory = './';
    if (substr($directory,-1) !== '/')
    $directory = $directory . '/';

    $count = 1;
    while(1)
    {
        //*dir*/*file*.*count*
        $logfilename = $directory . $logfile . '.' . $count;

        //*dir*/*file*.*count*.lock
        $lockfile = $logfilename . '.wlock';
        $lockhandle = false;
        Weblog_debug("Checking if $lockfile exists");
        if (!file_exists($lockfile))
        {
            $lockhandle = @fopen($lockfile, 'xb'); //lock handle true if lock file opened
            Weblog_debug("Got lock: $lockfile");
        }
        if ($lockhandle !== false) break; //break loop if we got lock

        $count++;
        if ($count > 100) return false;
    }

    //log file exists, append
    if (file_exists($logfilename))
    {
        Weblog_debug("log file exists, append");
        $created   = false;
        $loghandle = @fopen($logfilename, 'ab');
    }
    //log file not exists, make new
    else
    {
        Weblog_debug("log file not exists, make new");
        $loghandle = @fopen($logfilename, 'xb');
        if ($loghandle !== false) //Did we make it?
        {
            $created = true;

            $str = '#version: 1.0' . "\r\n" .
            '#Fields: date time c-ip x-msg' . "\r\n";
            fwrite($loghandle,$str);
        }
    }

    //was log file either appended to or create anew?
    if ($loghandle !== false)
    {
        Weblog_debug("log file was either appended to or create anew");
        $str = date('Y-m-d',$curtime) . "\t" . 
        date('H:i:s', $curtime) .  "\t" .
        (isset($_SERVER['REMOTE_ADDR']) ? $_SERVER['REMOTE_ADDR'] : '-') . "\t" .
        '"' . str_replace('"', '""', $message) . '"' . "\r\n";
        fwrite($loghandle,$str);

        Weblog_debug("Wrote: $str");

        fclose($loghandle);
        //Only chmod if new file
        if ($created) chmod($logfilename,0644); // Read and write for owner, read for everybody else

        $result = true;
    }
    else
    {
        Weblog_debug("log file was not appended to or create anew");
        $result = false;
    }

    /**
    Sleep & disable unlinking of lock file, both for testing purposes.
    */
    //Sleep for 10sec to allow other instance(s) of script to run while this one still in progress.
    sleep(10);
    //fclose($lockhandle);
    //@unlink($lockfile);

    return $result;
}

echo Weblog("weblog", "test.txt", "testmsg");
?> 
```

**更新：**

这是一个仅显示时间戳的简单脚本。我在不同的主机上尝试过，所以我认为这不是我的服务器的问题；

```
<?php
function Weblog_debug($input)
{
    echo $input."<br/>";
}
$curtime = time();
$startedat = date('Y-m-d',$curtime) . "\t" . date('H:i:s', $curtime) .  "\t";
Weblog_debug("Started at: $startedat");

$timediff = time() - $curtime;
while($timediff < 5)
{
    $timediff = time() - $curtime;
}

Weblog_debug("OK");
?> 
```

同样，如果我在第一个脚本在 while 循环中时启动脚本的第二个实例，则第二个脚本将声明它与第一个脚本同时启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:34:53.010

我自己都不敢相信，但事实证明这只是 Opera 中的一个“功能”。该脚本在 Firefox 中按预期工作。我有点希望在我全力以赴之前测试一下，但是你去吧。

# android - 从无线路由器接收android中的UDP数据包

> ID：10120956
> 
> 赞同：0
> 
> 时间：2012-04-12T09:31:39.443
> 
> 标签：android, eclipse, udp, wireless

我正在尝试从我的 android 手机中的 wifi 路由器接收 UDP 数据包，手机无线连接到 wifi 路由器。我应该在android中编写一个客户端来简单地从特定端口接收该UDP数据包吗？如何确保收到数据？

# c# - 如何为我的应用程序实现触摸事件？

> ID：10120957
> 
> 赞同：0
> 
> 时间：2012-04-12T09:31:44.897
> 
> 标签：c#, winforms, events, testing, touch

我想在我的 Win-Form 应用程序中实现触摸事件。按钮、列表、组合框和复选框的触摸事件。知道如何实施吗？我找不到任何相同的资源。

我只是希望我的应用程序与触摸屏平板电脑完全兼容。我使用 .NET 3.5 并没有看到任何相关的事件处理程序。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T10:10:42.780

我认为你错过了一些东西。

如果在平板电脑上运行获胜表格，我认为您正在寻找的“触摸”事件实际上是“单击”。

处理 OnClick 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:36:02.950

您可以通过使用 Selecting 事件处理程序或相应的控件来做到这一点

# java - 获取序列化 java.util.HashMap 的值

> ID：10120959
> 
> 赞同：0
> 
> 时间：2012-04-12T09:31:52.593
> 
> 标签：java, serialization

我正在使用 Code First 方法来创建我的 SOAP 操作。为了创建 WSDL 和 XSD，我使用 Glassfish 的 METRO。我的一种方法（服务器端）返回`java.util.HashMap<String, String>`. 我注意到在生成客户端 Web 服务后，AXIS 创建了一个名为 : 的类 `public class HashMap extends mypack.ws.AbstractMap implements java.io.Serializable`。

所以问题是如何操作这个类来获取它的对象值。

PS：我找到了关键字`transient`，但我认为使用（生成 a `nullpointerexception`）不是一个好主意。

谢谢

编辑：在这里我分享我的 WSDL 文件：

```
 <?xml version='1.0' encoding='UTF-8'?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2-hudson-740-. --><!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2-hudson-740-. -->
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ws.rnm.company.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://ws.rnm.company.com/" name="WebService">
    <types>
        <xsd:schema>
            <xsd:import namespace="http://ws.rnm.company.com/" schemaLocation="http://localhost:8080/RNM/WebService?xsd=1" />
        </xsd:schema>
    </types>
    <message name="getSettingsAndData">
        <part name="parameters" element="tns:getSettingsAndData" />
    </message>
    <message name="getSettingsAndDataResponse">
        <part name="parameters" element="tns:getSettingsAndDataResponse" />
    </message>
    <portType name="WebService">
        <operation name="getSettingsAndData">
            <input wsam:Action="http://ws.rnm.company.com/WebService/getSettingsAndDataRequest" message="tns:getSettingsAndData" />
            <output wsam:Action="http://ws.rnm.company.com/WebService/getSettingsAndDataResponse" message="tns:getSettingsAndDataResponse" />
        </operation>
    </portType>
    <binding name="WebServicePortBinding" type="tns:WebService">
        <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
        <operation name="getSettingsAndData">
            <soap:operation soapAction="" />
            <input>
                <soap:body use="literal" />
            </input>
            <output>
                <soap:body use="literal" />
            </output>
        </operation>
    </binding>
    <service name="WebService">
        <port name="WebServicePort" binding="tns:WebServicePortBinding">
            <soap:address location="http://localhost:8080/RNM/WebService" />
        </port>
    </service>
</definitions> 
```

# firefox - 绝对定位在 Chrome 和 IE 中运行良好，但在 FF 中不行

> ID：10120960
> 
> 赞同：2
> 
> 时间：2012-04-12T09:31:53.620
> 
> 标签：firefox, css-position

我正在尝试将表格单元格中 div 的位置（具有相对位置）设置为绝对位置，它在 Chrome 和 IE 中效果很好，但在 FF 中，它似乎只是相对于整个身体定位为绝对位置。

我试图让我的 div 显示在单元格的左上角（该链接仅用于在我的代码中定位另一个元素，但它应该位于单元格的右上角）。但是在 FF 中，div 显示在整个屏幕的左上角，并且（由 the 定位的元素）链接显示在整个屏幕的右上角。

以下是相关代码：

```
<TD ID="EVENT" style="position:relative;">
<a href="#" id="Menu" style="position:absolute;top:0;right:0;"></a>
    <div id="detail" style="position:absolute;top:0;left:0;width:100%;z-index:10;">
    content
</div>
</TD> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:33:37.227

我不确定这是否与问题有关，但您的表格单元格中缺少引号：

```
<TD ID="EVENT style="position:relative;"> 
```

应该读：

```
<TD ID="EVENT" style="position:relative;"> 
```

这种事情过去曾给我造成过问题，尽管如果在其他浏览器中没问题，那可能不会导致问题。

编辑：尝试在表格单元格内使用容器 div。

```
 <TD ID="EVENT">

      <div id="container" style="position:relative;">

        <a href="#" id="Menu" style="position:absolute;top:0;right:0;"></a>
        <div id="detail" style="position:absolute;top:0;left:0;width:100%;z-index:10;">
        content
        </div>

      </div>

    </TD> 
```

# iphone - 结合 UIView 动画块和 OpenGL ES 渲染

> ID：10120962
> 
> 赞同：8
> 
> 时间：2012-04-12T09:31:54.683
> 
> 标签：iphone, animation, opengl-es, uikit, quartz-graphics

我正在开发一个 iP* 游戏，我同时使用 UIKit 和 OpenGL ES 2.0。UIKit 元素在 OpenGL 视图上呈现并占用大量（任意）屏幕空间。我必须承认，Apple 做得非常出色，游戏的帧率始终是 60 FPS。

为了得出这个结论，我对性能进行了许多测试：

1.  我在 OpenGL 视图上添加了许多静态（不移动）的 UIView——好的！
2.  我使用自定义代码对相同的 UIViews 进行了动画处理（在我的游戏的 drawFrame 方法中修改了 center 属性）——好的！
3.  我在 UIViews 下添加了许多 OpenGL ES 元素——好的！
4.  我在 UIViews 下添加了许多移动的 OpenGL ES 元素——好的！

所以，现在我想利用 Core Animation Framework 来为 UIKit 元素设置动画。我利用

```
[UIView animateWithDuration:delay:options:animations:completion:] 
```

为了执行动画（我的目标是 iOS 4 或更高版本）。

现在的问题是帧速率有这种**奇怪**的行为：有时我得到 60 fps 的**许多**UIKit 动画元素（30 个元素对我来说是可以的），有时帧速率明显低于 60 fps，即使使用**单个**动画 UIKit元素，但我无法用仪器测量它！让我解释一下：当我打开 Instruments 并监控核心动画和/或 OpenGL 驱动程序时，我总是得到 60 fps。**但**很明显，情况并非如此，我可以用肉眼看到 OpenGL 动画的移动速度比顶部相应的 UIKit 动画慢得多。如果我从视图中删除 UIKit 元素，则帧速率会恢复正常。当用户在玩游戏时改变设备的音量时，在任何 OpenGL ES 游戏中都会发生与我在这里描述的情况类似的情况。当显示当前音量的透明视图开始淡出并直到它完全淡出时，帧速率急剧下降，但在仪器中（我也做过这个测试）它卡在 60 fps！

所以，总结一下：有时我会得到真正的 60 fps 的块动画，跑步时没有起伏，有时我会得到假的 60 fps，没有起伏。

你有什么解决办法吗？所有测试均在装有 iOS 5.1 的 iPad 2 和 iPhone 3GS 上进行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T13:51:24.223

我设法解决了这个问题，现在我可以在我的 OpenGL 游戏中组合基于 UIView 块/核心的动画，而不会出现任何性能下降。

解决方案非常简单：

1.  对于您希望在 OpenGL 应用程序中使用的每个 UIView，将其边界、中心和变换属性保留在您的 OpenGL 屏幕坐标系中（例如，创建以下属性：GLBounds、GLCenter、GLTranform）并在您更改相应 UIView 之一时相应地更新它们特性。
2.  当你开始游戏时，加载 UIViews 但将它们设置为**hidden**。因此，UIKit**不会**在 OpenGL 视图之上绘制（这样完全消除了丢帧问题）。而是使用您在步骤 1 中创建的 GL* 属性并使用相应的纹理（图像/颜色）自己绘制 UIView您用于每个 UIView）。
3.  使用块/核心动画为**隐藏**的UIViews 属性（边界、中心和变换）设置动画，具体取决于您想要实现的动画（这反过来会更新您的 GL* 属性），并在您的 OpenGL 绘制方法中使用 GL* 属性来绘制 UIViews ！要在 UIView 动画（并更新 GL* 属性）时获取边界、居中和变换的实际值，请使用它的 presentationLayer 属性。

最好的，

# ruby-on-rails - 翻译 Recaptcha 错误消息的正确翻译标签是什么

> ID：10120970
> 
> 赞同：1
> 
> 时间：2012-04-12T09:32:09.537
> 
> 标签：ruby-on-rails, recaptcha, i18n-gem

目前我正在开发一个应用程序。我的用户注册使用 recaptcha 插件。当验证码错误时，应用程序会收到错误：

*   不正确的验证码溶胶

如何用 翻译此消息`I18n.t`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:12:25.487

Recaptcha v0.3.4 不翻译错误：[https ://github.com/ambethia/recaptcha/blob/043cec2b64646ec270f2b30cfc55da661145e3ae/lib/recaptcha/verify.rb](https://github.com/ambethia/recaptcha/blob/043cec2b64646ec270f2b30cfc55da661145e3ae/lib/recaptcha/verify.rb)

这是在 master 分支中修复的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:44:33.823

嗯

[我在Recaptcha](http://ambethia.com/recaptcha/rdoc/)文档页面找到了翻译此消息的解决方案。

verify_recaptcha 方法提供 :message 选项，但这对我不起作用。

```
respond_to do |format|
  if verify_recaptcha(:model => @post, :message => 'Oh! It's error with reCAPTCHA!') && @post.save
  # ...
   else
  # ...
  end
end 
```

我覆盖了闪存消息。（[感谢斯洛博丹](https://stackoverflow.com/questions/3553451/recaptcha-plugin-for-rails)）

```
respond_to do |format|
 if verify_recaptcha
  # ...
 else
   flash[:recaptcha_error] = I18n.t("defaults.recaptcha")
   # ...
 end
end 
```

# javascript - 获取 eBay 搜索建议

> ID：10120973
> 
> 赞同：1
> 
> 时间：2012-04-12T09:32:24.033
> 
> 标签：javascript, jquery, ebay-api

我正在尝试获取 eBay 建议值，以针对给定关键字进行搜索。可以在**[此处](http://jsfiddle.net/Qye2Z/1/)**找到原型。谁能帮我找出代码中的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:39:26.100

问题是由于同源策略造成的 - 您不能对当前域以外的任何域进行 AJAX 调用，除非请求的格式是 JSONP。

解决方法是在您的域中使用服务器端代理（例如在[此示例](http://forum.jquery.com/topic/jquery-ajax-and-xml-issues-no-element-found)中）来获取 XML 文件，然后让您的 jQuery 加载该文件。

# python - Python函数中的默认参数在哪里

> ID：10120974
> 
> 赞同：7
> 
> 时间：2012-04-12T09:32:24.957
> 
> 标签：python

我想很多人都看过python接收默认参数的函数。例如：

```
def foo(a=[]):
    a.append(3)
    return a 
```

如果我们使用 foo() 调用此函数，则每次调用后输出都会附加整数“3”。

定义此函数时，会在当前环境中定义一个名为 'foo' 的函数对象，同时也会评估默认参数值。每次在没有参数的情况下调用函数时，评估的参数值将根据代码更改。

我的问题是，**这个评估参数在哪里存在？** **调用函数时是在函数对象中还是在方法对象中？** 由于python中的一切都是一个对象，因此必须有一些地方来保存'a'-->已评估参数的名称->值绑定。我是不是在想这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T10:03:50.130

正如其他人已经说过的，默认值存储在函数对象中。

例如，在 CPython 中，您可以这样做：

```
>>> def f(a=[]):
...     pass
...
>>> f.func_defaults
([],)
>>> f.func_code.co_varnames
('a',)
>>> 
```

但是，`co_varnames`可能包含多个 args 的名称，因此它需要进一步处理，并且这些属性甚至可能在其他 Python 实现中不存在。因此，您应该使用该`inspect`模块来代替您处理所有实现细节：

```
>>> import inspect
>>> spec = inspect.getargspec(f)
>>> spec
ArgSpec(args=['a'], varargs=None, keywords=None, defaults=([],))
>>> 
```

这`ArgSpec`是一个命名元组，因此您可以将所有值作为属性访问：

```
>>> spec.args
['a']
>>> spec.defaults
([],)
>>> 
```

正如[文档](http://docs.python.org/library/inspect.html)所说，`defaults`元组始终对应于来自`args`. 这为您提供了映射。

要创建一个 dict 你可以这样做：

```
>>> dict(zip(spec.args[-len(spec.defaults):], spec.defaults))
{'a': []}
>>> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T09:36:52.683

它附加到函数对象，请参阅`foo.func_defaults`：

```
>>> foo()
>>> foo.func_defaults
([3],)
>>> foo()
>>> foo.func_defaults
([3, 3],) 
```

如果您想获得 on 的映射`a`，`[]`您可以访问`foo.func_code`：

```
defaults = foo.func_defaults
# the args are locals in the beginning:
args = foo.func_code.co_varnames[:foo.func_code.co_argcount] 
def_args = args[-len(defaults):]  # the args with defaults are in the end
print dict(zip(def_args, defaults)) # {'a': []} 
```

（但是，显然，牦牛的版本更好。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T09:37:39.363

它在函数对象中，在`func_defaults`：

```
def f(a=[]): a.append(3)

print f.func_defaults # ([],)

f()

print f.func_defaults # ([3],) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T09:37:44.567

它存储在`func_defaults`函数对象的属性中。

```
>>> foo.func_defaults
([],)
>>> foo()
([3],) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T14:31:01.883

我发现了一个有趣的情况：在 python 2.5.2 版本中，尝试函数 'foo()'

```
>>> foo()
[1]
>>> foo()
[1]
>>> foo()
[1] 
```

因为被调用的函数的对象不同：

```
>>> id(foo())
4336826757314657360
>>> id(foo())
4336826757314657008
>>> id(foo())
4336826757314683160 
```

在 2.7.2 版本中：

```
>>> foo()
[1]
>>> foo()
[1, 1]
>>> foo()
[1, 1, 1] 
```

在这种情况下，每次调用函数时对象都是相同的：

```
>>> id(foo())
29250192
>>> id(foo())
29250192
>>> id(foo())
29250192 
```

是不是版本不同的问题？

# svg - 如何保存由 raphael 生成的 svg

> ID：10120975
> 
> 赞同：17
> 
> 时间：2012-04-12T09:32:26.853
> 
> 标签：svg, raphael

有没有办法将 raphael 生成的 SVG 保存为 svg 文件。请注意，它只需要在 chrome 中工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T20:51:09.427

我想出了一个使用[Raphael.Export](https://github.com/ElbertF/Raphael.Export)的解决方案，它为我提供了一个有效的 svg/xml 字符串（我无法从包含 svg 的 DOM 对象的 innerHTML 中简单地获得的东西）和 Blobbuilder 来创建一个 url一个链接，我将在最后触发单击事件以保存文件。

```
svgString = @paper.toSVG();
a = document.createElement('a');
a.download = 'mySvg.svg';
a.type = 'image/svg+xml';
bb = new(window.BlobBuilder || WebKitBlobBuilder);
bb.append(svgString);
blob = bb.getBlob('image/svg+xml');
a.href = (window.URL || webkitURL).createObjectURL(blob);
a.click(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-06T21:40:23.333

正如[stef 评论](https://stackoverflow.com/questions/10120975/how-to-save-an-svg-generated-by-raphael#comment26159720_10217760)的那样，BlobBuilder API 已被弃用。相反，[请使用 Blob API](https://developer.mozilla.org/en-US/docs/Web/API/Blob#Blob_constructor_example_usage)。

在[Andreas 的回答的](https://stackoverflow.com/a/10217760/1655552)基础上，这是我快速让它工作的方法：

```
svgString = r.toSVG();
a = document.createElement('a');
a.download = 'mySvg.svg';
a.type = 'image/svg+xml';
blob = new Blob([svgString], {"type": "image/svg+xml"});
a.href = (window.URL || webkitURL).createObjectURL(blob);
a.click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T11:16:23.673

如果不想使用 Rapahel.Export，可以直接从 dom 中获取 svg，如下所示：

```
var svgString = document.getElementById('holder').innerHTML;
a = document.createElement('a');
a.download = 'mySvg.svg';
a.type = 'image/svg+xml';
blob = new Blob([svgString], {"type": "image/svg+xml"});
a.href = (window.URL || webkitURL).createObjectURL(blob);
a.click(); 
```

" **holder** " 是加载 Raphael 的 div 的 id：r = Raphael("holder"); 请注意，我认为它不适用于不处理 svg 的旧浏览器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-01T09:16:08.897

至少对于简单的情况，我们可以使用写入 Raphael 绘图的 div（通常是“画布”）并从中下载 innerhtml。首先，我们需要一个 javascript 函数来复制 div 的内容并创建一个下载链接（这个函数来自另一个页面，不是我的作品）：

```
<script>
function downloadInnerHtml(filename, divId, mimeType) {
var elHtml = document.getElementById(divId).innerHTML;
console.log(elHtml); //useful for troubleshooting
var link = document.createElement('a');
mimeType = mimeType || 'text/plain';
link.setAttribute('download', filename);
link.setAttribute('href', 'data:' + mimeType + ';charset=utf-8,' + encodeURIComponent(elHtml));
link.click(); 
}
</script> 
```

二、我们需要页面上有一个按钮来运行功能

```
<button onclick="downloadInnerHtml('raphaelplot.svg', 'canvas','text/html')">save plot as svg</button> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T18:00:40.683

对于保存 blob 的部分，我建议 [https://github.com/eligrey/FileSaver.js/](https://github.com/eligrey/FileSaver.js/)

或[https://www.npmjs.com/package/angular-file-saver](https://www.npmjs.com/package/angular-file-saver)如果您使用的是 AngularJs

# android - 当图像 url 在 android 中为空时如何使用备用图像 url？

> ID：10120977
> 
> 赞同：0
> 
> 时间：2012-04-12T09:32:28.573
> 
> 标签：android, json, image, image-processing, alternate

在这里，我正在显示通过解析 JSON 获取图像 url 的图像。
到目前为止它工作正常。
这是代码：

```
ImageView iconImageView = (ImageView) convertView
                .findViewById(R.id.listicon);
//TAG_IMAGE is tag name of image url which i got from parsing JSON
String imageUrl = (String) data.get(TAG_IMAGE);
        try {

                Drawable image = ImageOperations(getApplicationContext(),
                        imageUrl);
                iconImageView.setImageDrawable(image);

            } catch (Exception ex) {
                ex.printStackTrace();
            } 
```

如果 imageUrl 为空，我想显示替代图像 url。
我怎样才能做到这一点 ？？我试过下面的代码，但它没有在下面的代码中显示备用图像，即 testUrl。即使它也不会`System.out.println("image empty and showing alternate image");`在 logcat 中打印。

**自行解决：** 对我有用的正确代码是：

```
String imageUrl = (String) data.get(TAG_IMAGE);

if (imageUrl.equals("") ) {

            System.out.println("image empty");
            String rUrl = "http://www.windypress.com/mediakit/moon/icon/moon-icon-full-72.png";
            try {

                Drawable image2 = ImageOperations(getApplicationContext(),
                        rUrl);
                iconImageView.setImageDrawable(image2);

            } catch (Exception ex) {
                ex.printStackTrace();
            }

        } else {
            System.out.println("has image");
            try {

                Drawable image1 = ImageOperations(getApplicationContext(),
                        imageUrl);
                iconImageView.setImageDrawable(image1);

            } catch (Exception ex) {
                ex.printStackTrace();
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:48:11.023

检查前打印您的`imageUrl`。`imageUrl`不为空。它可能为空但不为空。检查`imageUrl.length() > 0`

# extjs - ExtJS4 # 标签

> ID：10120980
> 
> 赞同：0
> 
> 时间：2012-04-12T09:32:42.617
> 
> 标签：extjs, extjs4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:58:29.557

获得 HTMLDivElement 后，例如 coolElement，您可以尝试以下操作：

```
    coolElement.attributes['name'] 

```

和

```
    coolElement.attributes['action']。

```

如果属性存在，您可以使用 nodeValue 获取值

```
    coolElement.attributes['attribute_name'].nodeValue

```

# android - ActionabrSherlock and Fragments

> ID：10120987
> 
> 赞同：1
> 
> 时间：2012-04-12T09:33:11.397
> 
> 标签：android, android-fragments, actionbarsherlock

我没有让我的片段工作...... :-(

我的活动：

```
public class Test extends SherlockActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setTitle(R.string.title);
//      actionBar.setDisplayShowTitleEnabled(false);
//

    actionBar.setDisplayShowHomeEnabled(false);

    Tab tab = actionBar.newTab().setText(dayName(Calendar.MONDAY))
            .setTabListener(new WeekDayTabListener(getApplicationContext()));
    actionBar.addTab(tab);

    ...

    tab = actionBar.newTab().setText(dayName(Calendar.SUNDAY))
            .setTabListener(new WeekDayTabListener(getApplicationContext()));
    actionBar.addTab(tab);
}

public static class WeekDayTabListener implements TabListener {

    private Context context;

    public WeekDayTabListener(Context context) {
        this.context = context;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Tools.longToast(tab.getText().toString(), this.context);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

}

我的xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

   <fragment
        android:id="@+id/weekDayFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.test.fragment.DayFragment" >
    </fragment>

</LinearLayout> 
```

最后是我的片段：

```
import com.actionbarsherlock.app.SherlockFragment;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.TextView;

public class DayFragment extends SherlockFragment { 
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        Context c = getActivity().getApplicationContext();
        LinearLayout l = new LinearLayout(c);
        TextView tv = new TextView(c);
        tv.setText("foo");
        l.addView(tv);

        return l;
    }
} 
```

如果我执行，我会得到以下异常：

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.fragment/com.test.fragment.Test}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment 
```

因此，如果我注释掉部分没有错误 - 但路径是正确的，那我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T03:45:49.287

您的类 Test 需要扩展`SherlockFragmentActivity`not `SherlockActivity`：

```
class Test extends SherlockFragmentActivity{
    ...    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:02:09.087

在您的片段`onCreateView()`方法中，您需要对布局进行膨胀。

例如

```
.....
myInflater = inflater;
TextView tv;
tv = inflater.inflate(R.layout.your_fragment_layout_here);
..... 
```

然后，您可以从这里将线性布局添加到您的视图中。

请注意，这只是伪代码，您必须尝试使用​​语法才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:02:50.580

尝试`android:name="com.test.fragment.DayFragment"`而不是`class="com.test.fragment.DayFragment"`在您的 xml 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T17:27:10.500

啊……

在浪费**了三个小时**试图将我的（包）名称更改为任何内容之后，一遍又一遍地阅读初学者教程来夸大不同的视图非常简单：

删除**android:layout_marginTop="?android:attr/actionBarSize"**完成了这项工作......

# javascript - 复合控件渲染后调用javascript函数

> ID：10120990
> 
> 赞同：0
> 
> 时间：2012-04-12T09:33:22.877
> 
> 标签：javascript, asp.net, composite-controls, asp.net-customcontrol

复合控件渲染后有什么方法可以调用javascript函数。我需要在图像控件的顶部放置四个可移动的锚点。我计划使用 html Img 控件来实现锚点。我已经嵌入了一个 javascript 资源，但我无法在图像控件上绘制锚点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:28:01.770

不，你不能用 javascript 来做到这一点。但你可以在背景代码中使用覆盖渲染来做到这一点。

像这样：

受保护的覆盖子渲染（ByVal writer As System.Web.UI.HtmlTextWriter）

```
 'you can composite control rendering here.

    MyBase.Render(writer) 
```

结束子

# php - 在不使用重定向的情况下通过 Google 进行身份验证

> ID：10120997
> 
> 赞同：0
> 
> 时间：2012-04-12T09:33:41.860
> 
> 标签：php, codeigniter, oauth, google-api

我一直在通过 php 中的 Google Identity 工具包实现 OAuth 登录。我已经获得了经过身份验证的会话、用户数据、ID、照片等，这似乎或多或少都可以正常工作。

但是，我希望能够使用不依赖于用户浏览器重定向的方法登录（考虑应用程序的远程 API），但对于如何实现这一点有点迷失。

想象一个类似的请求：

```
$details = new stdClass();

$details->secret        = $config->secret;
$details->client_id     = $config->client_id;
$details->app_name  = 'my awesome oauth app';

$details->login              = array();
$details->login['email']     = 'some google account email @ example.com';
$details->login['password'] = '1234'; 

$token = $this->do_auth($details);

if($token) {
    // do stuff, setup cookies, insert token in session table etc
} 
```

我正在使用 CodeIgniter。有没有图书馆可以做到这一点..？我已经看到 android 应用程序使用自定义登录表单做类似的事情，所以我猜它可以在 php 中实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:59:35.690

您必须重定向，这是 OAuth 工作方式的核心要素，没有办法解决这个问题。这就是为什么有一个 redirect_uri 参数。

不过，您只需执行一次：当用户登录并且您正在请求访问令牌时。之后，您只需使用 curl 来请求您的数据。

# java - 如何用限制内存计算字符串 num？

> ID：10120998
> 
> 赞同：12
> 
> 时间：2012-04-12T09:33:44.993
> 
> 标签：java, algorithm

任务是计算输入文件中的单词数。

输入文件是每行8个字符，有10M行，例如：

```
aaaaaaaa  
bbbbbbbb  
aaaaaaaa  
abcabcab  
bbbbbbbb  
... 
```

输出是：

```
aaaaaaaa 2  
abcabcab 1  
bbbbbbbb 2  
... 
```

如果我将所有单词加载到内存中，将需要 80MB 内存，但在 os 系统中只有 60MB，我可以将其用于此任务。那么我该如何解决这个问题呢？

我的算法是使用`map<String,Integer>`，但是 jvm 在线程“main”java.lang.OutOfMemoryError: Java heap space 中抛出异常。例如，我知道我可以通过设置 -Xmx1024m 来解决这个问题，但我想使用更少的内存来解决它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T09:45:09.483

我相信最强大的解决方案是使用磁盘空间。

例如，您可以使用对大文件（使用磁盘空间）进行排序的算法，对另一个文件中的文件进行排序，然后计算相同单词的连续出现次数。

我相信这篇[文章](http://www.codeodor.com/index.cfm/2007/5/14/Re-Sorting-really-BIG-files---the-Java-source-code/1208)可以帮助到你。或者自己搜索一些关于[外部排序](http://en.wikipedia.org/wiki/External_sorting)的东西。

**更新 1**

或者正如*@jordeu*建议的那样，您可以使用 Java 嵌入式数据库库：如 H2、JavaDB 或类似库。

**更新 2**

我想到了另一种可能的解决方案，使用[Prefix Tree](http://en.wikipedia.org/wiki/Prefix_tree)。但是我还是更喜欢第一个，因为我不是他们的专家。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T09:37:50.550

一次读一行，然后有一个例如`HashMap<String,Integer>` 你把你的单词作为键和计数作为整数的地方。

如果存在键，则增加计数。否则将键添加到地图中，计数为 1。

无需将整个文件保存在内存中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T09:36:56.977

我猜你的意思是*不同*单词的数量是吗？

因此，显而易见的方法是将每个不同的单词（有关的独特信息）存储为映射中的键，其中值是关联的计数器。根据预期有多少不同的单词，存储所有这些单词甚至可能适合您的记忆，但在所有单词都不同的最坏情况下，情况并非如此。

为了减少内存需求，您可以计算单词的校验和并将其存储，而不是单词本身。存储例如 4 字节校验和而不是 8 字符字（需要至少 9 个字节来存储）需要 40M 而不是 90M。另外，每个单词也需要一个计数器。根据特定单词的预期出现次数，您可以使用 2 个字节（最多出现 65535 次），这需要最多 60M 的内存来存储 10M 个不同的单词。

### 更新

当然，校验和可以通过多种不同的方式来计算，它可以是无损的，也可以是无损的。这也很大程度上取决于单词中使用的字符集。例如，如果只使用小写的标准 ASCII 字符（如上例所示），我们在每个位置有 26 个不同的字符。因此，每个字符都可以无损编码为 5 位。因此 8 个字符适合 5 个字节，这比限制多一点，但*可能*足够密集，具体取决于具体情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T09:57:40.337

使用[H2 数据库引擎](http://www.h2database.com/)，如果需要，它可以在磁盘或内存上工作。它有一个非常好的性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T09:59:11.707

我不擅长解释理论答案，但我们开始......

我对你的问题做了一个假设，因为它并不完全清楚。

*   用于存储所有不同单词的内存为 80MB（整个文件更大）。
*   单词可能包含非 ascii 字符（因此我们只是将数据视为原始字节）。

读取文件两次就足够了，每次存储约 40MB 的不同单词。

```
//  Loop over the file and for each word:
//
//      Compute a hash of the word. 
//      Convert the hash to a number by some means (skip if possible).
//      If the number is odd then skip to the next word. 
//      Use conventional means to store the distinct word. 
//
//  Do something with all the distinct words. 
```

`even`然后使用代替第二次重复上述操作`odd`。

然后你把任务分成了2个，可以分别做。第一组中的任何单词都不会出现在第二组中。

散列是必要的，因为这些词（理论上）可能都以相同的字母结尾。

该解决方案可以扩展为使用不同的内存限制。我们可以使用 . 将单词分成 X 组，而不是只说奇数/偶数`number MOD X`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T09:40:32.963

我会为每个单词创建一个 SHA-1，然后将这些数字存储在一个集合中。然后，当然，在读取数字时，检查 Set 是否存在 [（并非完全必要，因为 Set 根据定义是唯一的，因此您也可以“添加”其 SHA-1 数字）]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T09:46:24.273

根据单词的构建类型，您可以为此系统选择：

如果它可能包含大写和小写字母的任何字符，您将有 (26*2)^8 组合，即 281474976710656。这个数字可以适合长数据类型。

因此计算字符串的校验和，如下所示：

```
public static long checksum(String str)
{
    String tokes = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    long checksum = 0;

    for (int i = 0; i < str.length(); ++i)
    {
        int c = tokens.indexOf(str.charAt(i));

        checksum *= tokens.length();
        checksum += c;
    }

    return checksum;
} 
```

这将使每个字占用的内存减少超过 8 个字节。一个字符串是一个数组`char`，每个字符在 Java 2 字节中。因此，8 个字符 = 16 个字节。但是 string 类包含的数据不仅仅是 char 数组，它还包含一些用于大小和偏移量的整数，即每个 int 4 个字节。不要忘记指向字符串和字符数组的内存指针。因此，原始估计让我认为这将减少每个单词 28 个字节。

因此，每个字 8 个字节，而您有 10 000 000 个字，则为 76 MB。这是你的第一个错误估计，因为你忘记了我注意到的所有事情。所以这意味着即使这种方法也行不通。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-12T10:00:44.843

如果您可以先对文件进行排序（例如，在 Unix 上使用内存高效的“排序”实用程序），那么这很容易。您只需读取已排序的项目，边走边计算相邻的重复项，然后立即将总数写入新文件。

如果您需要使用 Java 进行排序，这篇文章可能会有所帮助：

[http://www.codeodor.com/index.cfm/2007/5/10/Sorting-really-BIG-files/1194](http://www.codeodor.com/index.cfm/2007/5/10/Sorting-really-BIG-files/1194)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-12T10:03:09.567

您可以将每个 8 字节的字转换为 a`long`并使用`TLongIntHashMap`，这比`Map<String, Integer>`or更有效`Map<Long, Integer>`

如果您只需要可以使用的不同单词`TLongHashSet`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-12T10:18:13.360

您可以通过多次读取文件来使用常量内存。

基本思路：

将文件视为 n 个分区 p_1...p_n，调整大小以便您可以将每个分区加载到 ram 中。

1.  将 p_i 加载到 Map 结构中，扫描整个文件并仅跟踪 p_i 元素的计数（参见 Heiko Rupp 的答案）
2.  如果我们在 j 小于 i 的分区 p_j 中遇到相同的值，则删除元素
3.  Map 中元素的输出结果计数
4.  清除地图，对所有 p_1...p_n 重复

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-12T11:05:01.207

与任何优化一样，需要权衡取舍。在您的情况下，您可以使用更少的内存来执行相同的任务，但这是以增加运行时间为代价的。

您的稀缺资源是内存，因此您无法将单词存储在 RAM 中。

您可以使用哈希而不是其他帖子提到的单词，但是如果您的文件变大，这不是解决方案，因为在某些时候您会再次遇到同样的问题。

是的，您可以使用外部 Web 服务器来处理文件并为您的客户端应用程序完成工作，但是阅读您的问题，您似乎想在一个（您的应用程序）中完成所有事情。

所以我的建议是遍历文件，并且对于每个单词：

*   如果第一次找到该单词，则将该字符串与整数值 1 一起写入结果文件。
*   如果之前处理过这个词（它将出现在结果文件中），则增加记录值。

无论输入文件的行数或单词的长度如何，此解决方案都可以很好地扩展*。

您可以优化在输出文件中进行写入的方式，以便更快地进行搜索，但上述基本版本就足够了。

编辑：
*它可以很好地扩展，直到您用完磁盘空间 XD。所以前提条件是有一个至少有 2N 字节可用空间的磁盘，其中 N 是输入文件的大小（以字节为单位）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-04-12T12:01:06.643

可能的解决方案：

1.  使用文件排序，然后只计算每个值的后续出现。
2.  将文件加载到数据库中并使用如下计数语句：`select value, count(*) from table group by value`