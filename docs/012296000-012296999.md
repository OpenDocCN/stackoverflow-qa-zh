# StackOverflow 问答 12296000-12296999

# c# - 从列表中排除第一个索引项并将其余项绑定到列表框

> ID：12296001
> 
> 赞同：0
> 
> 时间：2012-09-06T08:30:10.327
> 
> 标签：c#, windows-phone-7

我有一个`ObservableCollection<>`图像（字节）和标题（字符串）。我希望它绑定到两个不同的 GRID：GridA 和 GridB。在 GridA 中，我有一个图像控件，我想将集合的 index[0] 中的图像绑定到该控件，而在 GridB 中，有一个图像列表框，我想要集合中的剩余项目，即不包括 index[0] .

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:48:32.767

我会在 ViewModel 上创建单独的属性，其中包含您想要的内容并将每个网格绑定到它们。
就像是：

```
public Image GridAContent
{
    get
    {
        return this.Items.First();
    }
}

public ObservableCollection<Image> GridBContent
{
    get
    {
        return this.Items.Skip(1);
    }
} 
```

假设您当前的可观察集合被称为`Items`.

# java - hibernate 的 hibernate.cache.use_structured_entries 能做什么？

> ID：12296004
> 
> 赞同：4
> 
> 时间：2012-09-06T08:30:19.763
> 
> 标签：java, hibernate, caching

```
<property name="hibernate.cache.use_structured_entries">true</property> 
```

它能做什么？我不知道？请举个例子！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T08:39:10.657

从[Hibernate Docs - 第 3 章。配置](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-optional)：

> 强制 Hibernate 以更人性化的格式将数据存储在二级缓存中。例如真|假

它指定条目是否将以可读格式写入 L2 缓存中。如果您打算浏览缓存，您可能应该打开它。

来自[Hibernate Docs - 第 19 章。提高性能](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-sessioncache)：

> 要浏览二级缓存区域的内容或查询缓存区域，请使用 Statistics *API*：
> `hibernate.generate_statistics = true`
> `hibernate.cache.use_structured_entries = true`

将参数设置为将在[L2 缓存](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache)`true`中产生一些开销。看起来，它不能在集群环境中关闭，因为在这种情况下需要开销来重新水化实体。

您可能会发现以下博客文章对这个问题特别有帮助：[Hibernate Wars: The Query Cache Strikes Back](http://darren.oldag.net/2009/05/hibernate-wars-query-cache-strikes-back.html)，特别是*Bonus：L2 Cache Reduction*部分。

# python - python中的非中断空格

> ID：12296010
> 
> 赞同：5
> 
> 时间：2012-09-06T08:30:37.087
> 
> 标签：python

为什么 python 不删除非中断空格，`.strip(' ')`而是`.split(' ')`在字符上拆分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:36:46.800

首先，这些函数执行两个不同的任务：

```
'      foo    bar    '.split() is ['foo','bar']
#a list of substrings without any white space (Note the default is the look for whitespace - see below)
'      foo    bar    '.strip() is 'foo    bar'
#the string without the beginning and end whitespace 
```

.

当`strip(' ')`只使用开头和结尾的**空格**`strip()`时，虽然非常相似但并不完全相同，例如 tab`\t`是空格但不是空格：

```
'   \t   foo   bar  '. strip()    is 'foo   bar'
'   \t   foo   bar  '. strip(' ') is '\t   foo   bar' 
```

使用`split(' ')`它时，将字符串“拆分”为**每个**空格的列表，与`split()`将字符串拆分为**每个**“空白”的列表相比。考虑`'foo bar'`（在 foo 和 bar 之间有两个空格）。

```
'foo  bar'.split()    is ['foo', 'bar']
#Two spaces count as only one "whitespace"
'foo  bar'.split(' ') is ['foo', '', 'bar']
#Two spaces split the list into THREE (seperating an empty string) 
```

*微妙之处在于两个空格或几个空格和制表符被视为“**一个**空格”。*

# ajax - 使用 Yii CHtml::ClientChange 使用表单输入事件更新页面元素

> ID：12296015
> 
> 赞同：1
> 
> 时间：2012-09-06T08:30:54.560
> 
> 标签：ajax, input, yii

我想用 Yii 框架升级我当前的网站。

在我的应用程序的注册表单中，当用户键入 ID 时，有一个 ajax 验证过程，同时让用户知道请求的 ID 是否可用。目前它适用于文本输入的 onChange 属性。

我想要一个代码示例，其中任何人都使用 CHtml::ClientChange 和 Form Builder 对 Yii 框架进行了相同类型的工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:27:35.847

你应该学习 Yii 的[博客教程](http://www.yiiframework.com/doc/blog/)，它逐步解释了 Yii 的工作原理，并且它还具有表单的 ajax 验证。

# oauth - 如何验证资源服务器的 OAuth 2.0 访问令牌？

> ID：12296017
> 
> 赞同：181
> 
> 时间：2012-09-06T08:31:03.680
> 
> 标签：oauth, oauth-2.0

当客户端请求资源服务器获取具有 OAuth 2.0 访问令牌的受保护资源时，该服务器如何验证令牌？OAuth 2.0 刷新令牌协议？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-11-15T20:39:47.497

## 谷歌方式

[Google Oauth2 令牌验证](https://developers.google.com/accounts/docs/OAuth2UserAgent#validatetoken)

要求：

```
https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=1/fFBGRNJru1FQd44AzqT3Zg 
```

回应：

```
{
  "audience":"8819981768.apps.googleusercontent.com",
  "user_id":"123456789",
  "scope":"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",
  "expires_in":436
} 
```

## 微软方式

[Microsoft - Oauth2 检查授权](https://jwt.ms)

## Github方式

[Github - Oauth2 检查授权](http://developer.github.com/v3/oauth/#check-an-authorization)

要求：

```
GET /applications/:client_id/tokens/:access_token 
```

回应：

```
{
  "id": 1,
  "url": "https://api.github.com/authorizations/1",
  "scopes": [
    "public_repo"
  ],
  "token": "abc123",
  "app": {
    "url": "http://my-github-app.com",
    "name": "my github app",
    "client_id": "abcde12345fghij67890"
  },
  "note": "optional note",
  "note_url": "http://optional/note/url",
  "updated_at": "2011-09-06T20:39:23Z",
  "created_at": "2011-09-06T17:26:27Z",
  "user": {
    "login": "octocat",
    "id": 1,
    "avatar_url": "https://github.com/images/error/octocat_happy.gif",
    "gravatar_id": "somehexcode",
    "url": "https://api.github.com/users/octocat"
  }
} 
```

## 亚马逊方式

[Login With Amazon - 开发人员指南（2015 年 12 月，第 21 页）](https://images-na.ssl-images-amazon.com/images/G/01/lwa/dev/docs/website-developer-guide._TTH_.pdf)

要求 ：

```
https://api.amazon.com/auth/O2/tokeninfo?access_token=Atza|IQEBLjAsAhRmHjNgHpi0U-Dme37rR6CuUpSR... 
```

回复 ：

```
HTTP/l.l 200 OK
Date: Fri, 3l May 20l3 23:22:l0 GMT 
x-amzn-RequestId: eb5be423-ca48-lle2-84ad-5775f45l4b09 
Content-Type: application/json 
Content-Length: 247 

{ 
  "iss":"https://www.amazon.com", 
  "user_id": "amznl.account.K2LI23KL2LK2", 
  "aud": "amznl.oa2-client.ASFWDFBRN", 
  "app_id": "amznl.application.436457DFHDH", 
  "exp": 3597, 
  "iat": l3ll280970
} 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-09-06T19:20:57.237

**2015 年 11 月更新：**根据下面的 Hans Z. - 这现在确实被定义为[RFC 7662](https://www.rfc-editor.org/rfc/rfc7662)的一部分。

**原始答案：** OAuth 2.0 规范 ( [RFC 6749](https://www.rfc-editor.org/rfc/rfc6749) ) 没有明确定义资源服务器 (RS) 和授权服务器 (AS) 之间用于访问令牌 (AT) 验证的交互。这实际上取决于 AS 的令牌格式/策略 - 一些令牌是自包含的（例如[JSON Web 令牌](https://www.rfc-editor.org/rfc/rfc7519)），而其他令牌可能类似于会话 cookie，因为它们只是引用保存在 AS 的服务器端的信息。

OAuth 工作组中已经[讨论了一些关于](http://www.ietf.org/mail-archive/web/oauth/current/msg08607.html)为 RS 与 AS 通信以进行 AT 验证创建标准方式的讨论。我的公司（Ping Identity）为我们的商业 OAuth AS（PingFederate）提出了一种这样的方法： https: [//support.pingidentity.com/s/document-item?](https://support.pingidentity.com/s/document-item?bundleId=pingfederate-93&topicId=lzn1564003025072.html#lzn1564003025072__section_N10578_N1002A_N10001) bundleId=pingfederate-93&topicId=lzn1564003025072.html#lzn1564003025072__section_N10578_N1002A_N10001 。它为此使用基于 REST 的交互，这与 OAuth 2.0 非常互补。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-01-20T14:47:04.793

@Scott T. 回答的更新：用于令牌验证的资源服务器和授权服务器之间的接口于 2015 年 10 月在 IETF RFC 7662 中标准化，请参阅：[https](https://www.rfc-editor.org/rfc/rfc7662) ://www.rfc-editor.org/rfc/rfc7662 。示例验证调用如下所示：

```
POST /introspect HTTP/1.1
Host: server.example.com
Accept: application/json
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer 23410913-abewfq.123483

token=2YotnFZFEjr1zCsicMWpAA 
```

和示例响应：

```
HTTP/1.1 200 OK
Content-Type: application/json

{
  "active": true,
  "client_id": "l238j323ds-23ij4",
  "username": "jdoe",
  "scope": "read write dolphin",
  "sub": "Z5O3upPC88QrAjx00dis",
  "aud": "https://protected.example.net/resource",
  "iss": "https://server.example.com/",
  "exp": 1419356238,
  "iat": 1419350238,
  "extension_field": "twenty-seven"
} 
```

当然，供应商和产品的采用必须随着时间的推移而发生。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-08-30T11:47:28.563

OAuth 2.0 规范没有定义该部分。但可能有几个选择：

1.  当资源服务器在 Authz Header 中获取令牌时，它会调用 Authz 服务器上的 validate/introspect API 来验证令牌。在这里，Authz 服务器可能会通过使用 DB Store 或验证签名和某些属性来验证它。作为响应的一部分，它解码令牌并发送令牌的实际数据以及剩余的到期时间。

2.  Authz Server 可以使用私钥对令牌进行加密/签名，然后可以将 publickey/cert 提供给资源服务器。当资源服务器获取令牌时，它要么解密/验证签名以验证令牌。取出内容并处理令牌。然后它可以提供访问或拒绝。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-01T12:04:47.390

OAuth v2 规范表明：

> 访问令牌属性和用于访问受保护资源的方法超出了本规范的范围，由配套规范定义。

我的授权服务器有一个 Web 服务 (SOAP) 端点，允许资源服务器知道 access_token 是否有效。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-05-10T11:11:58.997

## 2021 年更新的答案

通常不建议您自行推出 OAuth 2 / OIDC 实施的任何部分，尤其是现在令牌自省是[标准的一部分](https://datatracker.ietf.org/doc/html/rfc7662)。就像尝试推出自己的加密库一样，使用如此复杂的规范很容易犯严重错误。

这是实施 OAuth 2 的其他语言的推荐库[列表。](https://oauth.net/code/)[这是另一个](https://openid.net/developers/certified/)已通过 OpenID 基金会认证的库；其中许多库也实现了 OAuth 2。

如果您在 .NET 中并使用 IdentityServer 库（2.2 版及更高版本），则[自省端点](https://docs.identityserver.io/en/latest/endpoints/introspection.html)完全可以完成此操作。它作为[发现文档](https://docs.identityserver.io/en/latest/endpoints/discovery.html)（也是[标准](https://openid.net/specs/openid-connect-discovery-1_0.html)）的一部分发布，并且是资源服务器可以验证访问令牌的端点。

如果您已经走到了这一步，但您仍然*真的*想自己动手，请从[较大的图书馆如何做到这一点中获得](https://github.com/IdentityServer/IdentityServer4/blob/main/src/IdentityServer4/src/Endpoints/IntrospectionEndpoint.cs)一些技巧。

# python - 将数组转换为python标量

> ID：12296021
> 
> 赞同：2
> 
> 时间：2012-09-06T08:31:14.927
> 
> 标签：python

我需要很大的帮助，请查看以下代码：

```
import.math

dose =20.0
a = [[[2,3,4],[5,8,9],[12,56,32]]
     [[25,36,45][21,65,987][21,58,89]]
     [[78,21,98],[54,36,78],[23,12,36]]]
PAC = math.exp(-dose*a) 
```

这是我想做的。但是我得到的错误是

```
TypeError: only length-1 arrays can be converted to Python scalars 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T08:38:42.260

如果您想对数组执行数学运算（无论它们的尺寸如何......），您应该真正考虑使用专为此设计的[NumPy 。](http://numpy.scipy.org/)在您的情况下，相应的 NumPy 命令将是：

```
PAC = numpy.exp(-dose*np.array(a)) 
```

如果 NumPy 不是一个选项，你将不得不循环每个元素`a`，计算你的`math.exp`，将结果存储在一个列表中......真的很麻烦而且效率低下。这是因为`math`当您传递一个（列表）列表时，这些函数需要一个标量作为输入（正如异常告诉您的那样）。但是，您可以将所有循环组合在一个列表推导中：

```
PAC = [[[math.exp(-dose*j) for j in elem] for elem in row] for row in a] 
```

但再一次，我强烈推荐 NumPy。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:50:20.040

你真的应该为此使用 NumPy。以下是使用嵌套循环的方法：

```
>>> for item in a:
...     for sub in item:
...         for idx, number in enumerate(sub): 
...             print number, math.exp(-dose*number)
...             sub[idx] = math.exp(-dose*number) 
```

使用`append`很慢，因为每次你复制前一个数组并将新项目堆叠到它。使用枚举，就地更改数字。如果您想保留 a 的副本，请执行以下操作：

```
 acopy = a[:] 
```

如果你没有太多的数字，并且 NumPy 是一个过度杀戮，那么使用列表推导可以更快地完成上述操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:44:48.980

如果您愿意，将数组的每个元素乘以 -dose 然后将 math.exp 应用于结果，您需要一个循环：

```
new_a = []
for subarray in a:
    new_sub_array = []
    for element in sub_array:
        new_element = math.exp(-dose*element)
        new_sub_array.append(new_element)
    new_a.append(new_sub_array) 
```

或者，如果您有数学实验室背景，您可以查询[numpy](http://numpy.org)，它可以对数组进行转换。

# javascript - HtmlBox（jquery插件）在ajax调用中不起作用

> ID：12296025
> 
> 赞同：0
> 
> 时间：2012-09-06T08:31:27.673
> 
> 标签：javascript, asp.net-mvc-3, jquery-plugins, razor

我正在使用带有 MVC 的 .net 框架 4.0。

我在我的页面中包含了 HTMLBox（jquery 插件），因为我需要一个 WYSWYG 编辑器来控制我的文本区域控件。

我有一个名为 Instruction 的局部视图，其中我将 Textarea 控件声明为：

```
@Html.TextAreaFor(model => model.Instruction, new {@cols = 80, @rows = 10 }) 
```

在 Ajax 调用中，我在页面上填充了这个 Partial 视图。像这样：

```
 function EditInstruction(progId) 
    {
            var getUserUrl = '@Url.Action("")';
            var courseType =  $('input:radio[name=CourseType]:checked').val();
            var acadYr = $("#AcadYear").val();
            var sem = $("#Sem").val();

            $.ajax({
                url: '@Url.Action("EditInstruction", "CustomizeInstructionsAndCheckList")',
                data: { progId: progId, acadYr: acadYr, sem: sem, courseType: courseType },
                cache: false,
                type: "get",
                // callback handler that will be called on success
                success: function (response, textStatus, jqXHR) {

               $("#PartailLoadForCheckList").html($(response));  
               callAjaxCallsForCascade(getUserUrl.toString());
               TextEditorForDisplay();

                },
                // callback handler that will be called on error
                error: function (jqXHR, textStatus, errorThrown) {

                },
                // callback handler that will be called on completion
                // which means, either on success or error
                complete: function () {

                }
            });
        }

 This is the code for TextEditorForDisplay(), where I initialize my HtmlBox

 function TextEditorForDisplay() {

        mybox = $("#Instruction").htmlbox({
       toolbars:[
        [
        // Cut, Copy, Paste
        "separator","cut","copy","paste",
        // Undo, Redo
        "separator","undo","redo",
        // Bold, Italic, Underline, Strikethrough, Sup, Sub
        "separator","bold","italic","underline","strike","sup","sub",
        // Left, Right, Center, Justify
        "separator","justify","left","center","right",
        // Ordered List, Unordered List, Indent, Outdent
        "separator","ol","ul","indent","outdent",
        // Hyperlink, Remove Hyperlink, Image
        "separator","link","unlink","image"     
        ],
        [// Show code
        "separator","code",
        // Formats, Font size, Font family, Font color, Font, Background
        "separator","formats","fontsize","fontfamily",
        "separator","fontcolor","highlight",
        ]
        ],
        icons: 'default',
        skin: 'blue',
        success: function () { alert("Successfully posted"); },
        error: function () { alert("Error posting"); }
        });

    }
The problem I face is that, the HtmlBox works only when it is Loaded first and does not work for the subsequent ajax calls. 
```

这是我得到的错误：`TypeError: d.iframe.contentWindow is null`

谁可以帮我这个事？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:43:21.350

[**TinyMCE.MVC**](http://nuget.org/packages/TinyMCE.MVC)

TinyMCE HTML 文本编辑器的 MVC 部分编辑器模板

> **PM> 安装包 TinyMCE.MVC**

```
[UIHint("tinymce_jquery_full"), AllowHtml]
public string Instruction { get; set; } 
```

# ninject - 无法在 VS2012 中安装某些 Nuget 包 - 似乎是网络问题

> ID：12296028
> 
> 赞同：2
> 
> 时间：2012-09-06T08:31:36.587
> 
> 标签：ninject, visual-studio-2012, nuget, firewall, nlog

我已经安装了 VS2012 并且在安装某些 Nuget 包时遇到了一些问题。

当我创建一个新的 MVC4 项目时，所有默认包似乎都安装好了。

我可以添加一些包 - 例如 ELMAH，但是当我尝试安装一些包时，它不会拥有它并且我卡住了。

我得到的错误信息是：

无法从传输连接读取数据：现有连接被远程主机强行关闭。

我尝试了一些不同的 Nuget 资源：

[https://nuget.org/api/v2/](https://nuget.org/api/v2/) http://packages.nuget.org/v1/FeedService.svc/

我特别遇到问题的包是 Ninject、Ninject.MVC3 和 NLog

更新：

我已经使用包管理器 GUI 进行这些测试。控制台也不起作用。

我使用 fiddler 来检查网络流量，但似乎在以下点出现问题：

连接 az320820.vo.msecnd.net:443 HTTP/1.1

为 az320820.vo.msecnd.net:443 设置了一个隧道，然后一旦建立，就会沿隧道进行以下调用：

GET /packages/Newtonsoft.Json.4.5.8.nupkg HTTP/1.0 这就是一切都停止的地方，直到它超时之前什么都不会发生。

网络名称的 DNS 解析都解析了两个站点上的相同 IP。

我可以远程登录到端口 443 上的 DNS 名称。

在 codeplex 上存在一些类似的旧问题，其中未找到网络名称，但在这里一切正常。它在包裹被请求通过隧道时，事情就停止了。

*   进一步更新

如果我在笔记本电脑的浏览器中输入此 URL：http: [//az320820.vo.msecnd.net/packages/NHibernate.3.3.1.4000.nupkg](http://az320820.vo.msecnd.net/packages/NHibernate.3.3.1.4000.nupkg)这是 nhibernate 的包，该 URL 是未知的。但是，如果我在同一网络上的其他机器上尝试它（都具有相同的 DHCP 设置），那么它就可以工作。所以它指出我的机器有问题。但是，如果我将笔记本电脑放在另一个网络上，它可以正常下载！

它让我对问题可能是什么感到完全困惑。

还有一点是该链接可以在另一台 PC 上运行（在浏览器中），但在 VS2010 中该包不会通过 Nuget 下载。

任何人都可以帮助或给我任何指示，因为我现在正在拔头发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:49:33.000

看来这是一个（本地？）网络问题。

需要应用正常的网络诊断。

记住从本地办公室代理到您之间某处的路由问题的任何`nuget.org`事情，即使您自己的机器很好，也可能会破坏事情。

# objective-c - 在 tableview 中无法使用 pushViewController 打开 detailview 屏幕

> ID：12296033
> 
> 赞同：0
> 
> 时间：2012-09-06T08:32:02.803
> 
> 标签：objective-c, ios, uitableview, pushviewcontroller

我的项目中有一个标签栏，每个标签栏都有一个表格视图。单击表格视图中的一行时，我想打开一个详细信息屏幕，如下所示。但什么也没有发生。我在哪里做错了。我应该如何建立一个逻辑。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
DetailScreen *detail = [[DetailScreen alloc] initWithNibName:@"DetailScreen" bundle:nil];
 [self.navigationController pushViewController:detail animated:YES];
[detail release]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:45:35.653

单击单元格时没有发生任何事情的原因有很多。

*   在这个方法中设置一个断点。它甚至被调用了吗？
*   App在断点处停止`po detail`后，初始化实例后进入控制台类型。确保它不是（空）
*   还可以尝试键入`po [self navigationController]`以检查导航控制器是否存在。

您可能没有导航控制器。你是如何创建标签栏控制器的？在界面生成器中还是通过 AppDelegate`didFinishLaunchingWithOptions:`方法中的代码？

你做过吗？

```
 YourViewController *yourVC = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:yourVC];

    self.tabBarController.viewControllers = [NSArray arrayWithObjects:navigationController, nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:12:48.477

尝试这个，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
     DetailScreen *detail = [[DetailScreen alloc] init];
     [self.navigationController pushViewController:detail animated:YES];
     [detail release];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:31:12.490

我猜你没有导航控制器所以

```
[self.navigationController pushViewController:detail animated:YES]; 
```

不管用。

利用

```
[self.view addSubview:detail.view] 
```

或者

```
[self presentModalViewController:detail animated:YES]; 
```

反而

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:52:28.517

将您的视图控制器（包含控制器的表视图）添加到导航控制器中，然后开始使用

```
DetailScreen *detail = [[DetailScreen alloc] initWithNibName:@"DetailScreen" bundle:nil];
    [self.navigationController pushViewController:detail animated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:44:15.753

如果您的项目是基于**UITabBarViewController**的应用程序，我认为您不能使用 pushViewController 导航到另一个视图，除非您的项目中有**navigationController**。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-06T08:40:03.957

```
[self.navigationController pushViewController:detail animated:YES]; 
```

而是将您的详细推送代码移动到另一个方法并调用：

```
[self performSelector:@selector(myMethod:) withObject:nil] 
```

# vsto - VSTO 4.0之后的新版本

> ID：12296047
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:32:55.080
> 
> 标签：vsto, ms-office

您对新 Office 2012 的 VSTO 的未来有所了解吗？是否有一些关于新 VSTO 可以提供什么以及 VSTO 是否不是死胡同的传言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:53:52.517

[http://social.msdn.microsoft.com/Forums/en-US/officedevpreview/thread/7c928b03-82a7-4399-bac2-d7fe6154fc5f](http://social.msdn.microsoft.com/Forums/en-US/officedevpreview/thread/7c928b03-82a7-4399-bac2-d7fe6154fc5f)

# php - 如何在php中启用和禁用链接

> ID：12296052
> 
> 赞同：-2
> 
> 时间：2012-09-06T08:33:04.007
> 
> 标签：php, disable-link

我正在尝试创建一个 if 语句来启用和禁用 href 链接中的用户帐户，但如果查询返回活动 = 1，我希望链接显示禁用，如果查询返回 0，则启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:36:18.103

试试这个：-

```
$link = '';
if($status == 1)
{
    $link ='<a href="">Profile</a>';
}

echo $link; 
```

**更新**

```
function member_enable(){
    $command = mysql_query("SELECT COUNT(member_id) FROM members WHERE active= 1");
    $num_rows = mysql_num_rows($command);

    return $num_rows; 
} 

$status  = member_enable();
if($status >= 1)
{
    echo "<a href='enable_member.php?enab=". urlencode($result['member_id'])."' class=\"button-small blue text_upper round\">Enable</a>";

}else{

    echo "<a href='disable_member.php?deac=" . urlencode($result['member_id'])."' class=\"button-small blue text_upper round\">Deactivate</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:40:54.910

非常不清楚你到底想要什么。您应该更清楚地重写问题并提供更多细节。

不过，猜测一下，这就是你要找的吗？

```
 $queryRes = member_enable(); // assuming this returns 1 or 0
 if($queryRes == 0) {
     echo "<a href='enable_member.php?enab=". urlencode($result['member_id'])."' class=\"button-small blue text_upper round\">Enable</a>";
 } else {
     echo "<a href='disable_member.php?deac=" . urlencode($result['member_id'])."' class=\"button-small blue text_upper round\">Deactivate</a>"; 
 } 
```

**更新 1**已编辑以包含您在上面发布的代码。将 return 语句添加到您的 member_enable 函数以返回上述答案中提到的行数

**更新 2** 听起来您只需要在页面加载时从数据库中检索相关字段，循环通过它们打印出信息和链接，然后，当按下禁用/启用链接时，加载启用/禁用脚本帐户，然后将管理员返回到用户管理页面。通过重新加载管理页面，链接将更改为适当的文本，因为它将使用更新的数据库值。

# c# - 处理将可变长度结果返回到固定缓冲区的方法的最有效方法是什么？

> ID：12296053
> 
> 赞同：3
> 
> 时间：2012-09-06T08:33:04.863
> 
> 标签：c#, .net

我正在使用 c# 4.0，我经常在 .NET 公共库或其他库中遇到一个方法，该方法具有如下签名（例如[Socket.Receive](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receive.aspx)、[Stream.Read](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)等）

```
int DoSomethingSuperClever(byte[] buffer, int offset, int count) 
```

目的始终是您将它传递到缓冲区中，并将该缓冲区填充到您在 count 参数中指定的最大字节数（从给定的偏移量），并准确返回它真正设法填充的字节数。

这是我处理这种情况的超级天真的方式：

```
var data = new byte[0];
var buffer = new byte[1024];
int read;

while ((read = something.DoSomethingSuperClever(buffer,
                                                0,
                                                buffer.Length)) > 0)
{
    int origLength = data.Length;
    var temp = new byte[origLength + read];
    Array.Copy(data, temp, data.Length);
    Array.Copy(buffer, 0, temp, origLength, read);
    data = temp;
}

return data; 
```

我认为这很垃圾，因为所有的数组创建，但至少我认为它正确地完成了工作。

我想知道有一个`List<byte>`, 添加到它然后在最后做[ToArray](http://msdn.microsoft.com/en-us/library/bb298736.aspx) ......

当然，我不能只调用[AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.80%29.aspx%5D)，因为如果 read 小于缓冲区的长度，我会附加垃圾（因为[AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.80%29.aspx%5D)不接受长度参数，它总是会添加整个集合）。所以我认为采用这种方法我最终会得到一个 for 循环和加载[Add](http://msdn.microsoft.com/en-US/library/3wcytfd1%28v=vs.80%29)调用，但肯定比数组副本更糟糕，不是吗？

那么，专家们，我应该处理这些类型的呼叫的最有效方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:40:14.440

> 那么，专家们，我应该处理这些类型的呼叫的最有效方法是什么？

一种*简单*的方法是一次将其全部写入`MemoryStream`一个块，然后使用[`MemoryStream.ToArray`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx). 让它处理缓冲区大小调整等。

```
MemoryStream ms = new MemoryStream();
while ((read = something.DoSomethingSuperClever(buffer, 0, buffer.Length)) > 0)
{
    ms.Write(buffer, 0, read);
}
return ms.ToArray(); 
```

（顺便说一下，我通常会有比 1K 更大的缓冲区。显然这取决于您的用例，但我通常默认为 8、16 或 32K。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:41:34.380

我会使用 a`MemoryStream`而不是 a `byte[]`：

```
var data = new MemoryStream();
var buffer = new byte[1024];
int read = 0;

while ((read = something.DoSomethingSuperClever(buffer,
                                                0,
                                                buffer.Length) > 0)
{
    data.Write(buffer, 0, read);
}

return data.ToArray(); 
```

根据`something`对象的来源，您可能希望调整缓冲区大小以提高效率。

# android - 缩放和捏合时的Android绘制路径

> ID：12296056
> 
> 赞同：2
> 
> 时间：2012-09-06T08:33:11.343
> 
> 标签：android, path, matrix, bitmap

我正在绘制位图并尝试使用 Canvas 对其进行一些绘制。对于绘图，每当用户在其表面上绘制某些东西时，我都会添加路径。我已经在位图上实现了捏缩放和拖动功能，但是当用户缩放位图并在其上绘制一些东西时，路径无法正确绘制。我正在使用 Matrix 进行缩放和拖动功能。我的问题是使用带有矩阵的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:10:44.637

This is a working example where you can see how to implement a draggable and zoomable Path:

MainActivity

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class DrawActivity extends Activity {

        DrawView drawView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Set full screen view
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                 WindowManager.LayoutParams.FLAG_FULLSCREEN);
            requestWindowFeature(Window.FEATURE_NO_TITLE);

            drawView = new DrawView(DrawActivity.this);

            setContentView(drawView);
        }    
} 
```

DrawView

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.DisplayMetrics;
import android.view.Display;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.view.WindowManager;

public class DrawView extends View {

    Context ctx;

    static final String TAG = "DrawView";

    Paint paint = new Paint();

    //These two constants specify the minimum and maximum zoom
    private static float MIN_ZOOM = 3f;
    private static float MAX_ZOOM = 10f;

    private float scaleFactor = 3.f;
    private ScaleGestureDetector detector;

    //These two variables keep track of the X and Y coordinate of the finger when it first
    //touches the screen
    private float startX = 0f;
    private float startY = 0f;

    //These two variables keep track of the amount we need to translate the canvas along the X
    //and the Y coordinate
    private float translateX = 0f;
    private float translateY = 0f;

    //These two variables keep track of the amount we translated the X and Y coordinates, the last time we
    //panned.
    private float previousTranslateX = 0f;
    private float previousTranslateY = 0f; 

    private boolean dragged = false;

// Used for set first translate to a quarter of screen
    private float displayWidth;
    private float displayHeight;

    public DrawView(Context context)
    {
        super(context);

        ctx = context;

        WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();

        DisplayMetrics metrics = new DisplayMetrics();

        display.getMetrics(metrics);

        displayWidth = metrics.widthPixels;
        displayHeight = metrics.heightPixels;

        translateX = displayWidth/4;
        translateY = displayHeight/4; 

        previousTranslateX = displayWidth/4;
        previousTranslateY = displayHeight/4;

        detector = new ScaleGestureDetector(context, new ScaleListener());

        setFocusable(true);
        setFocusableInTouchMode(true);       

// Path's color
        paint.setColor(Color.GRAY);
        paint.setAntiAlias(false); 
    }

    @Override
    public void onDraw(Canvas canvas) {     
        super.onDraw(canvas);

        canvas.save();

        //We're going to scale the X and Y coordinates by the same amount
        canvas.scale(scaleFactor, scaleFactor, 0, 0);

        //We need to divide by the scale factor here, otherwise we end up with excessive panning based on our zoom level
        //because the translation amount also gets scaled according to how much we've zoomed into the canvas.
        canvas.translate((translateX) / scaleFactor, (translateY) / scaleFactor);

        canvas.drawRect(0, 0, 100, 100, paint);

        canvas.restore(); 

    }   

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        switch (event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:

// First finger is on screen

            //We assign the current X and Y coordinate of the finger to startX and startY minus the previously translated
            //amount for each coordinates This works even when we are translating the first time because the initial
            //values for these two variables is zero.
            startX = event.getX() - previousTranslateX;
            startY = event.getY() - previousTranslateY;
            break;

        case MotionEvent.ACTION_MOVE:

// first finger is moving on screen  
// update translation value to apply on Path

            translateX = event.getX() - startX;
            translateY = event.getY() - startY;             

            break;

        case MotionEvent.ACTION_UP:

// No more fingers on screen

            // All fingers went up, so let's save the value of translateX and translateY into previousTranslateX and
            //previousTranslate
            previousTranslateX = translateX;
            previousTranslateY = translateY;
            break;

// All touch events are sended to ScaleListener
        detector.onTouchEvent(event);

        return true;
    }   

    class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

        @Override
        public boolean onScale(ScaleGestureDetector detector) {

            scaleFactor *= detector.getScaleFactor();
            scaleFactor = Math.max(MIN_ZOOM, Math.min(scaleFactor, MAX_ZOOM));

            invalidate();
            return true;
        }   
    }
} 
```

# java - 从 Tomcat 中运行的 web 应用程序写入 Socket 时出现 NullPointerException

> ID：12296058
> 
> 赞同：0
> 
> 时间：2012-09-06T08:33:16.530
> 
> 标签：java, sockets, tomcat, ssl, concurrency

我在写入套接字时遇到了这个奇怪的问题。该应用程序是在 Tomcat 5.5 下运行的 webapp。有问题的功能是从 servlet 获取请求，进行一些处理并通过 SSLSocket 将该请求发送到外部系统。

这是我的 MessageProcessor 类：

```
public class MessageProcessor {

    private final int socketTimeout;
    private final int threadTimeout;

    private final ExecutorService executor = Executors.newCachedThreadPool();

    private static class Holder {
        static MessageProcessor instance = new MessageProcessor();
    }

    public static MessageProcessor instance() {
        return Holder.instance;
    }
    static {
        instance();
    }

    private MessageProcessor() {
        socketTimeout = /*get from property*/
                threadTimeout = /*get from property*/

                    //Setting Java SSL details
                    System.setProperty("javax.net.ssl.trustStore") /*from property*/;
        System.setProperty("javax.net.ssl.trustStorePassword") /*from property*/;

        socketFactory = SSLSocketFactory.getDefault();
    }

    public String submit(String msg) {
        Worker worker = new Worker(msg);
        try {
            return executor.submit(worker).get(threadTimeout,
                                               TimeUnit.MILLISECONDS);
        } catch (Exception e) {
            e.printStackTrade();
        }
        return "";
    }

    public String submitDirect(String msg) throws Exception {
        Worker worker = new Worker(msg);
        return worker.call();
    }

    class Worker implements Callable<String> {
        private String message;

        public Worker(String requestMsg) {
            this.message = requestMsg;
        }

        public String call() throws Exception {

            socket = socketFactory.createSocket();

            StringBuilder responseSb = new StringBuilder();
            StringBuilder frameMarkerSb = new StringBuilder();
            BufferedWriter socketWriter = null;
            BufferedReader socketReader = null;

            try {

                socketWriter =
                        new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
                socketWriter.write(message);
                socketWriter.flush();

                socketReader =
                        new BufferedReader(new InputStreamReader(socket.getInputStream(),
                                                                 "UTF-8"));
                /* do something else */
                /* receive response */

            } catch (InterruptedIOException e) {
                //Error handling
            } catch (Exception e) {
                //Error handling
            } finally {
                socketWriter.close();
                socketReader.close();
                socket.close();
            }
            return response;
        }
    }
} 
```

我以这种方式在 servlet 中向这个 MessageProcessor 提交消息：

```
protected void doPost(HttpServletRequest req,
                      HttpServletResponse resp) throws ServletException,
                                                       IOException {

    String requestStr = req.getParameter("data");
    String responseStr = "";

    try {
        responseStr =
                MessageProcessor.instance().submit(requestStr.trim());
        responseStr =
                MessageProcessor.instance().submitDirect(requestStr.trim());
    } catch (Exception e) {
        //Error handling
    }
    resp.setContentType("text/HTML");

    resp.getWriter().write(responseStr);
} 
```

问题在于提交（）。在 submit() 中，任务被提交到一个缓存的线程池，它会抛出这个异常。在 socketWriter.flush() 处抛出异常。

```
 2012-09-06 13:17:36,007 [http-8080-1] ERROR processor.MessageProcessor - Error submitting new task
    java.util.concurrent.ExecutionException: java.lang.NullPointerException
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
    at java.util.concurrent.FutureTask.get(FutureTask.java:91)
    at com.scb.race.bridge.processor.MessageProcessor.submit(MessageProcessor.java:70)
    at com.scb.race.bridge.servlet.CheckServlet.doPost(CreditCheckServlet.java:31)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at  org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:843)
    at   org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:679)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1303)
    at java.lang.Thread.run(Thread.java:619)
    Caused by: java.lang.NullPointerException
    at com.scb.race.bridge.processor.MessageProcessor$MessageWorker.call(MessageProcessor.java:140)
    at com.scb.race.bridge.processor.MessageProcessor$MessageWorker.call(MessageProcessor.java:78)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 
```

如果我使用submitDirect()，直接调用call()方法，不提交到线程池，效果很好。

当我在 JUnit 中测试该类时没有问题。它只发生在Tomcat中。

如果有人能对此有所了解，我将不胜感激。对不起，如果我在这里放了很多代码。这让我发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:01:26.557

```
public String submitDirect(String pdcRequestStr) throws Exception {
    Worker worker = new Worker(msg);
    return worker.call();
} 
```

将新 Worker(msg) 更改为新 Worker(pdcRequestStr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:08:43.587

我想我已经找到了问题的原因，看起来像是来自这条线：

```
socketFactory = SSLSocketFactory.getDefault(); 
```

将 SocketFactory 放入线程局部变量后，它工作正常。

```
socketFactory = new ThreadLocal<SocketFactory>(){;
    protected SocketFactory initialValue() {
        return SSLSocketFactory.getDefault();
    }
}; 
```

所以我的结论是 SSLSocketFactory 不是线程安全的。不过，我还没有找到任何官方文档来支持这一点。

# ant - ant-contrib 不再被识别

> ID：12296060
> 
> 赞同：1
> 
> 时间：2012-09-06T08:33:23.350
> 
> 标签：ant

Ant 不再能够找到 ant 贡献，我很困惑，因为我不记得在机器上进行任何更改。

```
$ ant -f ./build-ivy.xml 
Buildfile: ./build-ivy.xml
  [taskdef] Could not load definitions from resource net/sf/antcontrib/antlib.xml. It could not be found.

BUILD FAILED
/var/lib/jenkins/jobs/Lakshmi-MySQL/workspace/build-ivy.xml:41: Problem: failed to create task or type antlib:org.apache.ivy.ant:settings
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration. 
Action: Check that the implementing library exists in one of:
        -/usr/share/ant/lib
        -/var/lib/jenkins/.ant/lib
        -a directory added on the command line with the -lib argument 
```

现在 ant-contrib jar 文件（和以前一样）在`/var/lib/jenkins/.ant/lib`其中并且可供用户读取

```
$ ls -l /var/lib/jenkins/.ant/lib/ant-contrib-1.0b3.jar
-rw-r--r-- 1 jenkins root 224277 Jun 29 09:24 /var/lib/jenkins/.ant/lib/ant-contrib-1.0b3.jar
$ jar tf /var/lib/jenkins/.ant/lib/ant-contrib-1.0b3.jar | head -n 3
META-INF/
META-INF/MANIFEST.MF
net/ 
```

**编辑**

使用 strace 检查：ant**正在**读取文件：

```
...
[pid 10400] stat("/var/lib/jenkins/.ant/lib/ant-contrib-1.0b3.jar", {st_mode=S_IFREG|0644, st_size=224277, ...}) = 0
[pid 10400] stat("/var/lib/jenkins/.ant/lib/ant-contrib-1.0b3.jar", {st_mode=S_IFREG|0644, st_size=224277, ...}) = 0
[pid 10400] open("/var/lib/jenkins/.ant/lib/ant-contrib-1.0b3.jar", O_RDONLY) = 15
[pid 10400] fstat(15, {st_mode=S_IFREG|0644, st_size=224277, ...}) = 0
[pid 10400] fcntl(15, F_GETFD)          = 0
[pid 10400] fcntl(15, F_SETFD, FD_CLOEXEC) = 0
[pid 10400] lseek(15, 0, SEEK_END)      = 224277
[pid 10400] lseek(15, 224149, SEEK_SET) = 224149
[pid 10400] read(15, "ls/Walls.classPK\1\2\24\3\n\0\0\0\10\0\323]b5\362j"..., 128) = 128
[pid 10400] mmap(NULL, 19477, PROT_READ, MAP_SHARED, 15, 0x32000) = 0x7fb234002000
[pid 10400] lseek(15, 43, SEEK_SET)     = 43
[pid 10400] read(15, "PK\3\4\n\0\0\0\10\0\322]b5\214\246\227\251\206\0\0\0\240\0\0\0\24\0\0\0", 30) = 30
[pid 10400] lseek(15, 93, SEEK_SET)     = 93
[pid 10400] read(15, "M\215\261\16\203 \24Ew\22\376\341\215\355\0>\264\222\224M;upj\323\265A\304\224\244\240\1"..., 134) = 134
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:41:33.593

`ANT_HOME`未设置这会导致`ant`ant 1.8.4 安装中的脚本执行默认的 ant 1.7.1 二进制文件（不适用于 ant-contrib）

设置`ANT_HOME`为 ant 1.8.4 安装后，一切都按预期工作。

# jpa - 无法使用 spring 3.1 使 JTA 在 jboss AS7.1 上工作

> ID：12296062
> 
> 赞同：1
> 
> 时间：2012-09-06T08:33:44.067
> 
> 标签：jpa, jboss7.x, jta, spring-3, spring-data-jpa

我们正在尝试配置一个 Spring 应用程序来处理 JTA 事务。并不是说它失败了，而是我们尝试的一切都只是进行选择并忽略了我们的持久性操作。

正如您在以下日志中看到的，即使保存语句运行，也没有插入语句，也没有异常，也没有错误/警告日志

服务器日志

```
DEBUG [xxxx.xxxx.persistence] (http--0.0.0.0-8080-1) execute $Proxy363.save(whatever.core.entities.XxxAssignedTime@51a8c542)
DEBUG [org.springframework.data.repository.core.support.TransactionalRepositoryProxyPostProcessor$CustomAnnotationTransactionAttributeSource] (http--0.0.0.0-8080-1) Adding transactional method 'save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] (http--0.0.0.0-8080-1) Returning cached instance of singleton bean 'transactionManager'
DEBUG [org.springframework.transaction.jta.JtaTransactionManager] (http--0.0.0.0-8080-1) Participating in existing transaction
INFO  [xxxx.xxxx.impl.BpmnUserBusinessImpl] (http--0.0.0.0-8080-1) Last Assigned Time Updated to *******, Thu Sep 06 15:48:48 ICT 2012 
```

就像认为应用程序服务器认为一切正常。而如果您检查表，则没有进行插入或更新。

我们打算与 spring 应用程序一起使用的数据源已被运行在同一应用程序服务器中的 Java EE war 应用程序成功地用于 JTA 事务。

由于我们不知道问题可能出在哪里，我想把它放在完整的上下文中。

*   春季 3.1.2-RELEASE
*   休眠 4.1.5.Final
*   spring-data-jpa 1.1.1.Final
*   阿帕奇轴1.4
*   jboss AS7.1
*   数据库：甲骨文 10g

我们一直在尝试各种疯狂的配置以使其正常工作，所以我将在这里复制最简单的配置。

独立的.xml

```
<datasource jta="true" jndi-name="java:jboss/datasources/EngineDS" pool-name="EngineDS" enabled="true" use-java-context="true" use-ccm="true">
    <connection-url>jdbc:oracle:thin:@server:port:****</connection-url>
    <driver>oracle</driver>
    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
    <pool>
        <min-pool-size>10</min-pool-size>
        <max-pool-size>100</max-pool-size>
        <prefill>true</prefill>
    </pool>
    <security>
        <user-name>****</user-name>
        <password>****</password>
    </security>
    <statement>
        <prepared-statement-cache-size>32</prepared-statement-cache-size>
        <share-prepared-statements>true</share-prepared-statements>
    </statement>
</datasource>
<drivers>
    <driver name="oracle" module="com.oracle.ojdbc6">
        <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
    </driver>
</drivers> 
```

web.xml

```
[...]
<resource-ref id="DS">
 <res-ref-name>EngineDS</res-ref-name>
 <res-type>javax.sql.DataSource</res-type>
 <res-auth>Container</res-auth>
 <res-sharing-scope>Shareable</res-sharing-scope>
 <mapped-name>java:jboss/datasources/EngineDS</mapped-name>
</resource-ref>
[...] 
```

spring-jpa-config.xml

```
<jpa:repositories base-package="whatever.core.repositories" />
<jee:jndi-lookup id="dataSource" jndi-name="EngineDS" cache="true" resource-ref="true" expected-type="javax.sql.DataSource"/>
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
<property name="packagesToScan" value="whatever.core.entities" />
<property name="jpaVendorAdapter">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="showSql" value="${hibernate.show_sql}" />
    <property name="generateDdl" value="${jpa.generateDdl}" />
    <property name="databasePlatform" value="${jpa.dialect}" />
    </bean>
    </property>
 </bean>

 <tx:annotation-driven />
 <tx:jta-transaction-manager />

 <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>
 <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/> 
```

过去我们制作了 jboss AS5/Spring 3.0 应用程序来处理 JTA 事务，所以这不是我第一次这样做，我们一直在寻找我能找到的所有可能的博客和开源项目。然而，在我的应用程序中，任何似乎对每个人都顺利运行的东西似乎都被忽略了。我确信应该是我们在某个地方遗漏了一些非常愚蠢的东西，但到目前为止我们已经尝试了 70 多种不同的配置，但似乎没有一个能做一个简单的插入，否则在不尝试 JTA 时可以正常工作。

（我们使用轴 1.4 的事实可能相关或不相关，但我想告诉您，因为我们的应用程序仅在 Web 服务调用后触发操作）。在这一点上，我们开始相信配置超自然活动......

任何线索任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:09:14.607

事实证明，由于我使用的是`org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean`.

要拥有 JTA，我应该查找 JBoss 容器管理的实体管理器`spring-jpa.config.xml`：

```
<!-- lookup the container-managed JPA-EMF --> 
<!-- the JNDI name is specified in META-INF/persistence.xml --> 
<!-- SEE: https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-BindingEntityManagerFactorytoJNDI --> 
<jee:jndi-lookup id="defaultPu" jndi-name="java:jboss/defaultPu" /> 
```

在`META-INF/persistence.xml`您将实体管理器工厂绑定到 JNDI 中：

```
<!-- bind the EMF in JNDI --> 
<property name="jboss.entity.manager.factory.jndi.name" value="java:jboss/defaultPu" /> 
```

所以，我让 Jboss 引导 JPA，这样 JTA 事务就可以工作了！

# .net - 有没有办法让 DataSet 自动感知数据库的变化？

> ID：12296063
> 
> 赞同：0
> 
> 时间：2012-09-06T08:33:44.800
> 
> 标签：.net, dataset

我从数据库中提取了大约 10,000 条记录并填充了 DataSet。如果有人更改数据库，我希望 DataSet 自动更新。

.NET 中是否有任何内置功能可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:37:08.607

您可以看一下[`SqlCacheDependency`](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)，它在存储在 ASP.NET 应用程序的 Cache 对象中的项目与特定的 SQL Server 数据库表或 SQL Server 2005 查询的结果之间建立了关系

# c# - 软删除休眠

> ID：12296076
> 
> 赞同：3
> 
> 时间：2012-09-06T08:34:39.810
> 
> 标签：c#, nhibernate, nhibernate-3, soft-delete

我想对我的数据库表进行软删除...我已经应用了以下语句（如此处所述[http://nhibernate.info/blog/2008/09/06/soft-deletes.html](http://nhibernate.info/blog/2008/09/06/soft-deletes.html)和很多问题关于 SO）。Fattura 是我要应用逻辑删除的表（没有触发器）

**Fattura.hbm.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Paggentola.Gestionale.DL.Model"   namespace="Paggentola.Gestionale.DL.Model">
  <class name="Fattura" table="Fattura"  where="Cancellato=0">
    <id name="Id_Fattura" column="Id_Fattura">
      <generator class="native" />
    </id>
    <property name="Tipo_Fattura" column="Tipo_Fattura" />
    <property name="Cancellato" column="Cancellato" />
  </class>
</hibernate-mapping> 
```

**Fattura.cs** - 模型对象

```
using System;

namespace ModelObject
{
    public class Fattura : ISoftDeletable
    {
        public virtual int Id_Fattura { get; set; }     
        public virtual Int16 Id_Tipo_Fattura { get; set; }          
        public virtual Int16 Cancellato { get; set; }
    }
} 
```

**删除事件监听器**

```
 public class MyDeleteEventListener : DefaultDeleteEventListener
    {
        protected override void DeleteEntity(IEventSource session, object entity,
            EntityEntry entityEntry, bool isCascadeDeleteEnabled,
            IEntityPersister persister, ISet transientEntities)
        {
            if (entity is ISoftDeletable)
            {
                var e = (ISoftDeletable)entity;
                e.Cancellato = 1;

                CascadeBeforeDelete(session, persister, entity, entityEntry, transientEntities);
                CascadeAfterDelete(session, persister, entity, transientEntities);

            }
            else
            {
                base.DeleteEntity(session, entity, entityEntry, isCascadeDeleteEnabled,
                                  persister, transientEntities);
            }
        }
    } 
```

以这种方式配置

```
configuration.SetListener(ListenerType.Delete, new MyDeleteEventListener()); 
```

事件触发但它没有设置 Cancelato =1。这是我的删除命令

```
 public void Delete(T entity)
    {
        NHibernateSession.Delete(entity);

        NHibernateSession.Flush();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:54:48.417

我的映射文件有错误。财产

```
 <property name="Cancellato" column="Cancellato" /> 
```

在我的数据库列中没有相同的名称。这样就不会更新了。我只是不明白为什么在运行时没有错误......

我设置了相同的名称并且工作正常。

# android - Android 寻呼机适配器

> ID：12296077
> 
> 赞同：1
> 
> 时间：2012-09-06T08:34:42.823
> 
> 标签：android, fragmentpageradapter, android-pageradapter

我按照[此链接](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/) 在 Android 上制作了一个故事应用程序，但问题是该应用程序在滑动 3 或 4 次视图后崩溃（我正在测试 5 页，但故事包含 13 页）。
当知道 pagerAdapter 类中的 destroyItem() 方法被覆盖时，视图不会从内存中移动。
请我需要帮助。谢谢

# perforce - 如何删除带有待处理更改列表的 perforce 客户端

> ID：12296080
> 
> 赞同：43
> 
> 时间：2012-09-06T08:34:49.097
> 
> 标签：perforce

**我在perforce**中有一个工作区，在其中我将一些文件标记为删除。现在我想强行删除该工作区。

但我没有管理员权限。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-06T13:46:46.840

运行`p4 opened`以查看所有打开的文件并运行`p4 revert`以恢复它们。

然后运行`p4 changes -c your-client-name -s pending`以查看所有待处理的更改列表。由于在第一步中您还原了所有打开的文件，因此这些更改列表将全部为空。运行`p4 change -d change-number`以删除每个空的挂起更改列表。

然后您可以运行`p4 client -d`以删除您的客户端。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-02-14T10:01:59.790

为什么在 P4V 中只有 11 次点击，通过任意序列的菜单项。

1.  右键单击更改列表
2.  删除搁置的文件
3.  '是的'
4.  右键单击更改列表
5.  删除所有作业
6.  右键单击更改列表
7.  还原文件
8.  '恢复'
9.  右键单击更改列表
10.  删除挂起的更改列表
11.  '是的'

让我们把 Perforce 送到可用性学校。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-03-31T10:59:55.943

这是删除 Perforce 客户端的可编写脚本的过程。小心使用：这会删除您在客户端上进行的所有工作！

1.  还原此客户端上所有更改的文件。

    ```
    p4 -c $CLIENT revert -k //... 
    ```

    请注意该`-k`选项的使用，它“在服务器元数据中将文件标记为已恢复，而不更改客户端工作区中的文件”。由于我们稍后将删除客户端，因此我们不关心更新客户端工作区。如果您打开了许多文件，这会加快速度。

2.  从与客户端关联的挂起更改中删除所有搁置的文件。

    ```
    p4 changes -s shelved -c $CLIENT | cut -d' ' -f2 |
    while read CHANGE; do p4 shelve -c $CHANGE -d //...; done 
    ```

    如果你从不使用`p4 shelve`你可以省略这一步。

3.  与客户端关联的所有未决更改现在都是空的。删除它们。

    ```
    p4 changes -s pending -c $CLIENT | cut -d' ' -f2 | p4 -b 1 -x - change -d 
    ```

4.  现在没有与客户端关联的未决更改。删除客户端。

    ```
    p4 client -d $CLIENT 
    ```

（这个过程应该会容易得多！特别是，我们似乎没有充分的理由在删除客户端之前必须删除与客户端关联的搁置文件。如果您发现自己在这方面遇到困难，请联系 Perforce 支持并建议这样做变得更简单了。）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-04T13:15:07.070

这是我为清空默认更改集所做的操作，其中有很多文件已签出以进行编辑：

```
 p4 opened | sed 's/#.*$//g' |  xargs -iF p4 revert F 
```

这将从生成的文件名中切断注释部分，并将文件名通过`p4 opened`管道传输到`p4 revert`. 在那之后，我没有任何悬而未决的东西，也没有`p4 changes -c my-client-name -s pending`产生任何东西。如果你有一个巨大的变化集，这将需要一段时间。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-04T06:48:41.983

编写了这个名为**[p4-delete-client](https://github.com/arnonzilca/p4u/blob/master/p4-delete-client)**的脚本来删除一个 p4 客户端（它有更改列表和其他问题）。
它具有以下特点：

*   自动删除更改列表（恢复挂起和删除搁置）
*   修复主机名（如果与创建客户端的主机名不同）
*   如果锁定，则解锁客户端
*   删除客户端
*   删除关联文件（可以配置为不来自参数）

> 请注意，该脚本依赖于[repo](https://github.com/arnonzilca/p4u)中的其他脚本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-25T11:30:16.333

尝试这些步骤：

1.  1.右键单击更改列表

2.  选择“更改所有权”

3.  在工作区框中选择已经存在的工作区，然后单击确定

4.  右键单击更改列表并选择删除，然后确定。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-27T06:33:49.067

在删除更改列表之前，需要还原所有文件。

通过 p4v（版本 2013.4）的两个步骤：

1.  还原所有文件。

    `Right click the pending changelist, and then choose "Revert Files"`

2.  删除更改列表。

    `Right click the changelist, and then choose "Delete Pending Changelist 'XXXXXX'"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-28T03:35:24.783

这对我在 P4V 中重置默认更改列表有用：

1.  右键单击默认更改列表并选择“编辑挂起的更改列表'默认'”

2.  单击右下角的按钮“另存为编号的更改列表”

3.  右键单击新的更改列表并选择“删除更改列表 XXX”

您还可以右键单击新的更改列表以还原文件以执行您需要执行的任何操作，这在默认更改列表中不可用。

# php - 想要删除表 PHP 中数据库中的用户

> ID：12296086
> 
> 赞同：0
> 
> 时间：2012-09-06T08:35:25.820
> 
> 标签：php, javascript, mysql, html

我有一个表格，里面装满了我的数据库中的数据，我希望它旁边有一个按钮，供每个特定用户删除该用户。但我该怎么做？

这是代码：

```
<?php               
    include '../includes/db_connect.php';

    $sql = "SELECT * FROM `users`";
    $result = mysql_query($sql, $connection) or die ("Failed to excecute the query $sql on $connection");
?>
<table border=1>
    <tr>
        <th>
        Access lvl
        </th>
        <th>
        Username
        </th>
        <th>
        Email
        </th>
    </tr>
<?php
    while($row = mysql_fetch_array($result))
    {
        echo "</td><td>";
        echo $row['access'];
        echo "</td><td>";
        echo $row['username'];
        echo "</td><td>";
        echo $row['email'];
        echo "</td></tr>";
    }
    echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:51:13.003

我经常这样做，并为此使用 jQuery。我使用以下内容：

HTML：

```
<table>
....
<tr>
    <td><span class="delete">Delete me!</span></td>
</tr>
</table> 
```

jQuery：

```
$(document).on("click", ".delete", function(event)
{
    var sData = "?id=" + $(this).data("id");
    $.ajax({
        url: "pages/delete_script.php",
        type: "POST",
        data: sData,
        success: function(sResult)
        {
            // Process the data you got back from the delete script
            // For example removing the row if successfully deleted:
            if(sResult == "OK")
            {
                $(this).closest("tr").remove();
            }
        },
        statusCode: 
        {
            404: function() 
            {
                alert("page not found");
            }
        }
    });
}); 
```

`on()`用于动态元素（我在该页面上使用 AJAX 进行所有操作）。然后我将需要发送的数据以正确的格式放入并执行 AJAX 请求。在 PHP 文件中可能是这样的：

```
if($_SERVER['REQUEST_METHOD'] == "POST")
{
    if(isset($_POST['id'])
    {
        mysql_query(
            sprintf('DELETE FROM `table` WHERE `id` = %d', $_POST['id'])
        );
    }
} 
```

当然，建议使用更多检查以确保删除正确的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:38:35.610

让按钮重定向到如下网址：example.com/user.php?delete=[id]

并用 $row['id'] 填充 [id]。现在，当您捕获参数 $_GET['delete'] 时，您将获得一个 ID。现在您可以简单地将其放入 MYSQL 中的 DELETE 函数中。

笔记：

*   确保您为此操作设置了安全级别
*   确保您不允许在此 GET 中使用字符串
*   确保使用 mysql_real_escape_string() ！<- 最重要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:04:14.437

我会将其移至 AJAX 函数，通过 onClick 或 data-id="" 将变量传递给 JavaScript 函数并使用 jquery $('element').data('id'); 收集 id 并将其发送到另一个静态 php 文件。

在那里，您需要在将任何用户数据提交到 SQL 之前检查并清理已传递给文件的数据，如前所述：

*   使用 post 作为 AJAX 方法
*   filter_var($var, FILTER_VALIDATE_INT)
*   mysql_real_escape_string

这对于用户体验来说会感觉更好，并且还消除了蜘蛛触发动作的一些风险。如果您对安全性不感兴趣，人们仍然可以破解它，但这会使它变得更难，并且如果您向 SQL 添加状态列而不是删除行，您只需更改其状态，您就可以轻松地将数据如果您被黑客入侵，请返回。

# mysql - Laravel Eloquent 2 中的 created_at 和 modified_at 应该使用什么类型的列？

> ID：12296087
> 
> 赞同：28
> 
> 时间：2012-09-06T08:35:28.890
> 
> 标签：mysql, datetime, int, laravel, eloquent

我应该使用 DATETEIME 吗？还是INT？

谢谢！

编辑：我专门针对

```
public static $timestamps = true; 
```

在 Eloquent 模型中设置的标志。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T08:42:16.983

Laravel 只支持`datetime`他们的时间戳。

[https://github.com/laravel/laravel/pull/769](https://github.com/laravel/laravel/pull/769)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-11T00:30:39.633

就像更新一样：[Mich 的答案](https://stackoverflow.com/a/12296190/2099674)对 Laravel 3 及以下版本仍然有效，

但从 Laravel 4 开始，它切换到和的支撑`timestamp`柱。`created_at``updated_at`

[这是 GitHub 上的一个相关问题](https://github.com/laravel/framework/issues/2696)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-17T14:09:09.347

Laravel 5 默认是 TIMESTAMP

# c# - 如何检查字符串是否包含列表的任何元素 ?

> ID：12296089
> 
> 赞同：15
> 
> 时间：2012-09-06T08:35:37.053
> 
> 标签：c#, string, list, contains

我有一个 if 语句，我想检查一个字符串是否包含 a 的任何项目`list<string>`。

```
if (str.Contains(list2.Any()) && str.Contains(ddl_language.SelectedValue))
{
    lstpdfList.Items.Add(str);
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-06T08:37:20.710

正确的公式是

```
list2.Any(s => str.Contains(s)) 
```

这被读作“确实包括任何包含？`list2`的字符串”。`s``str``s`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:38:37.437

你可以使用这个：

```
if (myList.Any(x => mystring.Contains(x)))
    // .... 
```

# php - 将 PHP 变量传递给 javascript src

> ID：12296090
> 
> 赞同：-2
> 
> 时间：2012-09-06T08:35:45.093
> 
> 标签：php, javascript, variables

好的，所以我有一个 php 变量来存储：

```
http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback 
```

这工作正常，我想做以下事情：

```
<script type="text/javascript" src="<?php echo $string; ?>"></script> 
```

但这似乎不起作用

谢谢你的帮助

编辑：这是我的代码，尝试了以下所有 3 个答案但没有奏效： http: [//pastebin.com/xYKW8TTd](http://pastebin.com/xYKW8TTd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:40:42.087

这似乎按预期工作：

```
<?php

    $string="http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback";

?>

<script type="text/javascript" src="<?php echo $string; ?>"></script> 
```

输出：

```
<script type="text/javascript" src="http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback"></script> 
```

编辑：在您的 pastebin 源代码中，您似乎有：

```
$string = "http://gdata.youtube.com/feeds/api/videos/" . $id ."?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback"; 
```

其中包含`&amp;`将`&`停止链接工作的位置。这是 pastebin 所做的事情还是在您的原始代码中？

您不能将 HTML 代码发送到 URL 窗口并期望它像在 HTML 正文中一样工作。

以下代码（刚刚编辑`$id`，因为我没有在 GET 中放入任何内容，修改后的`&`符号给出：

```
<html>
<head>
<?php
    //$id = $_GET['id'];
    $id=0;
    $string = "http://gdata.youtube.com/feeds/api/videos/" . $id ."?v=2&alt=json-in-script&callback=youtubeFeedCallback";
?>

<title></title>
</head>
<body>
<?php echo $string; ?><br>
<script type="text/javascript" src="<?php echo $string; ?>"></script> 
```

有以下输出：

```
<title></title>
</head>
<body>
http://gdata.youtube.com/feeds/api/videos/0?v=2&alt=json-in-script&callback=youtubeFeedCallback<br>
<script type="text/javascript" src="http://gdata.youtube.com/feeds/api/videos/0?v=2&alt=json-in-script&callback=youtubeFeedCallback"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:39:20.890

试试这个：-

```
<?php
$str = 'http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback';
?>
<script type="text/javascript" src="<?php echo $str; ?>"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:39:29.213

```
<?php
$string = 'http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback';
?>

<script type="text/javascript" src="<?=$string;?>"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:39:58.297

试试这个：

```
echo "<script type=\"text/javascript\" src=\"".$string"\"></script>\n"; 
```

如果这“不起作用”，则字符串常量中有一些错误会导致 javascript 错误。

请提供更多信息，例如生成的源代码或确切的浏览器错误。

**更新：**

@user1641732：根据马汉的评论。您包括 JSON 对象，而不是 javascript。您要实现什么？您了解 JSON 对象和 javscript 代码之间的区别吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:55:00.373

你为什么要这样做？Surly 从 YouTube 检索数据的最佳方法是执行 php cUrl 请求并对其 json 数据进行解码，或者，如果您确实需要，您可以使用 file_put_contents 或 fopen 将内容保存到文件中。

这是一个 cUrl 示例，添加您自己的 $url 变量：

```
// get the data via curl
$ch = curl_init();
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_ENCODING, "" );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $ch, CURLOPT_CONNECTTIMEOUT, 10 );
curl_setopt( $ch, CURLOPT_TIMEOUT, 10 );
$rsp = json_decode(curl_exec($ch));
curl_close($ch); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T09:59:43.047

```
<?php
$string = "http://gdata.youtube.com/feeds/api/videos/gzDS-Kfd5XQ?v=2&alt=json-in-script&callback=youtubeFeedCallback";
?>

<script type="text/javascript" src="<?php echo $string; ?>"></script> 
```

# sql-server-2008 - 根据属性值从 SQL Server 2008 r2 表列中删除 xml 节点

> ID：12296091
> 
> 赞同：1
> 
> 时间：2012-09-06T08:35:57.640
> 
> 标签：sql-server-2008, attributes, xquery, xquery-sql

我有一个xml结构如下

```
<DifficultyRule xmlns="urn:gjensidige:processguide:201201">
 <Id>fc39f423-05c0-4de9-ae46-12fe3c0c279b</Id>
 <Code>5595e558-7d10-4767-86dc-5d16f24b8151_Code</Code>
 <Author />
 <Updated>9/5/2012</Updated>
 <Sequence>0</Sequence>
 <FromControls>
 <Control>
  <Code>oiuyui</Code>
  <Id>70579cbe-c0b5-4b49-a7b8-6201af388f59</Id>
  <FilterValues>
     <FilterValue xmlns:p5="urn:gjensidige:processguide:201201" p5:Id="b897f3ac-b40f-4b96-b438-eb156a26457e" p5:Code="e" p5:LookupId="3fa26ce7-4031-4e41-92cb-50d8ce56d262" />
   </FilterValues>
 </Control>
</FromControls>
<DifficultyCode>Red</DifficultyCode>
</DifficultyRule> 
```

我正在尝试删除 xpath 中的 FilterValue 节点

```
/qn:DifficultyRule/qn:FromControls/qn:Control/qn:FilterValues/qn:FilterValue 
```

基于`p5:Id`属性的值，但我对为什么节点没有被删除感到困惑。

下面是我正在使用的脚本：

```
declare @lookupvalueId varchar(50)
declare @ruleId varchar(50)

set @lookupvalueId = 'b897f3ac-b40f-4b96-b438-eb156a26457e'
set @ruleId = 'fc39f423-05c0-4de9-ae46-12fe3c0c279b'

;WITH XMLNAMESPACES ('urn:gjensidige:processguide:201201' as qn)
update pdr_processdefinitionrule
set PDR_RuleXml.modify('delete (/qn:DifficultyRule/qn:FromControls/qn:Control/qn:FilterValues/qn:FilterValue[@Id=sql:variable("@lookupvalueId")])')
where pdr_guid = @ruleId 
```

我错过了什么？任何指导将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:42:14.377

好吧，由于您的 XML 属性`id`是带有前缀的 XML 命名空间，因此`p5`您还必须在代码中声明并使用第二个 XML 命名空间：

```
declare @lookupvalueId varchar(50)
declare @ruleId varchar(50)

set @lookupvalueId = 'b897f3ac-b40f-4b96-b438-eb156a26457e'
set @ruleId = 'fc39f423-05c0-4de9-ae46-12fe3c0c279b'

;WITH XMLNAMESPACES ('urn:gjensidige:processguide:201201' as qn,
                     'urn:gjensidige:processguide:201201' as p5)
update 
    pdr_processdefinitionrule
set 
    PDR_RuleXml.modify('delete (/qn:DifficultyRule/qn:FromControls/qn:Control/qn:FilterValues/qn:FilterValue[@p5:Id=sql:variable("@lookupvalueId")])')
where 
    pdr_guid = @ruleId 
```

看到第二个 XML 命名空间定义了`p5`吗？`qn:FilterValue[@p5:Id=sql:variable("@lookupvalueId")]`看到表达式中那个 XML 命名空间的使用了吗？

# android - textview 中的 Html：框架布局滚动和图像查看的问题

> ID：12296099
> 
> 赞同：1
> 
> 时间：2012-09-06T08:36:26.833
> 
> 标签：android, textview

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<TextView
    android:id="@+id/htmlText"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="#FFCC00" />

</FrameLayout> 
```

如果我这样设置 textview 的文本：

```
setText(Html.fromHtml(htmlString)); 
```

滚动不起作用。此外，如果在 html 中有一个 img 标签，则不会查看图像..为什么？

**编辑：**

我切换到网络视图：

```
WebView view = (WebView)findViewById(R.id.newsView);
view.loadData(htmlString,"text/html","UTF-8"); 
```

现在我解决了这些问题，但我还有其他问题：

1）如何设置透明背景以便我可以看到我的应用程序？

2）如何设置前景文本颜色，以便再次看到我的应用程序的颜色？

3）如果有一个img标签图像不适合视图，导致水平滚动。相反，文本完美填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:43:02.303

如果要显示 HTML 内容，请使用[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html). [`TextView`](http://developer.android.com/reference/android/widget/TextView.html)仅支持有限的 HTML 标记集 - 主要用于格式化文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T16:20:51.990

您可以将 ScrollView 用于 textView，它会变为可滚动的。然后使用

```
htmlText.setText(Html.fromHtml(htmlString));

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true" >

        <TextView
            android:id="@+id/htmlText"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

    </ScrollView>
</RelativeLayout > 
```

# fonts - 在 dompdf 中添加新字体

> ID：12296101
> 
> 赞同：5
> 
> 时间：2012-09-06T08:36:38.013
> 
> 标签：fonts, dompdf

要在 DOMPdf 中添加新字体 Arvo，我更新了文件 dompdf_font_family_cache.dist 并添加了以下代码 -

```
'arvo' => 
array (
  'normal' => DOMPDF_FONT_DIR . 'Arvo-Regular',
  'bold' => DOMPDF_FONT_DIR . 'Arvo-Bold',
  'italic' => DOMPDF_FONT_DIR . 'Arvo-Italic',
  'bold_italic' => DOMPDF_FONT_DIR . 'Arvo-BoldItalic',
), 
```

我在 lib/fonts 目录中包含字体文件我在 html 中添加了样式表 -

```
font-family: arvo; 
```

但是结果pdf中没有添加新字体。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T05:24:45.373

您应该使用 load_font.php 或（在 dompdf 0.6.0 beta 3 中）位于 www/fonts.php 的基于 Web 的安装程序，而不是手动修改 dompdf_font_family_cache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T12:06:00.307

对于带有 WAMP/XAMPP 等的窗口...

1.  Windows 命令提示符 (Win+R-> cmd)
2.  转到 C:\wamp\www\dompdf
3.  将所需字体复制到该文件夹
4.  类型（示例）

C:\wamp\www\bin\php\php5.4.3\php.exe load_font_php consola consola.ttf

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-16T02:56:03.643

就我而言，我解决了它：

1.  从这里安装 load_font.php：[https ://github.com/dompdf/utils/blob/master/load_font.php](https://github.com/dompdf/utils/blob/master/load_font.php)

    1.1。从项目的根文件夹中创建一个新文件并保存。

    1.2\. 接下来，在命令行中运行此行：`php load_font.php FONTNAME FONTPATH/fonts/EXAMPLEFONT.ttf`

2.  搜索并打开文件 dompdf_font_family_cache.php 并以这种方式更新您的文件（例如）：

    ```
    'poppins' => 
    array(

    'normal' => $rootDir . '\lib\fonts\Poppins-Light_0',

    ), 
    ```

3.  转到您的 PDF 并使用您的字体。

这几个步骤也许可以解决问题。:)

# ruby - 为 sinatra 身份验证选择不同的布局文件

> ID：12296105
> 
> 赞同：1
> 
> 时间：2012-09-06T08:36:58.250
> 
> 标签：ruby, authentication, views, sinatra, haml

`sinatra-authentication`期望 a`layout.haml`用于其预滚动的身份验证视图。

如何指定`sinatra-authentication`可以使用（例如`auth_layout.haml`）的不同布局模板，以便我可以保留`layout.haml`我的应用程序的视图？

我目前对此并不理想的方法是：

*   允许`sinatra-authentication`使用标准`layout.haml`
*   `std_layout.haml`在应用程序的所有其他部分显式使用另一个布局文件（例如）

例如

```
...
erb :home_page, :layout => :std_layout
... 
```

我更喜欢反过来:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:24:31.820

您可以阅读[Layout Engines](http://www.sinatrarb.com/blog)或简单地尝试：

```
get '/login' do
  haml :login, layout: auth_layout
end 
```

EDIT-1：您的评论是好的`layout: auth_layout`是 ruby​​ 1.9 语法`:layout => auth_layout`是 1.9 之前使用的语法

如果你在谈论[这个 sinatra-authentication](https://github.com/maxjustus/sinatra-authentication)，你必须破解[这个文件](https://github.com/maxjustus/sinatra-authentication/blob/master/lib/sinatra-authentication.rb)`app.get '/login/?'`关于 (Module::Helpers#use_layout?)的 方法。

EDIT-2：我想覆盖`use_layout?`方法会帮助你，也许像

```
Module Sinatra
  Module Helpers
    def use_layout?
       request.xhr? ? false : :auth_layout
    end
  end
end 
```

# lotusscript - 在 lotusscript 中使用评估

> ID：12296107
> 
> 赞同：0
> 
> 时间：2012-09-06T08:37:06.100
> 
> 标签：lotusscript, evaluate

我尝试使用 Lotus Script 获取当前用户角色。我正在使用“评估”方法来获取它，以便我可以与公式语言一起使用。下面是代码

```
Dim test as Variant 

test = Evaluate("@UserRoles")       

If  test = "[Administrator]" Then                   
     Print "admin"
Else
     Print "Not admin"
End If 
```

但是，当我尝试运行代码时，我收到此错误：“方法 CheckOperand 中的类型不匹配：发现未知，预期未知”

Lotus Script 方面的专家可以给我您的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:30:27.773

Evaluate 正在返回一个数组，因此您需要相应地执行检查。

```
Dim roles as Variant 
roles = Evaluate("@UserRoles") 
Forall r in roles
    If r = "[Administrator]" Then
        Print "Admin"
    End If
End ForAll 
```

# android - 无论数据是否来自网络服务，都不想停止用户与应用程序的交互

> ID：12296108
> 
> 赞同：0
> 
> 时间：2012-09-06T08:37:07.100
> 
> 标签：android, parsing, listview

我有一个应用程序，我在其中调用了 web 服务并在解析后在 listview 中设置数据。

现在我已经设置了进度对话框，直到列表视图中的数据集。现在，无论解析是否完成，我都想返回上一个屏幕。

所以总的来说，我不希望用户在同一个屏幕上等待数据到达并设置。

希望我很清楚。

任何片段或指南都会对我很有帮助。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:40:26.843

如果您希望加载独立于包含 ListView 的 Activity 的生命周期来完成，那么您可能需要实现一个[Service](http://developer.android.com/guide/components/services.html)。

该服务将负责从服务器加载数据，将其存储（例如在应用程序数据库中）并可能在加载完成时通知 ListView（如果它当前可见）。

另一方面，当您的 ListView 显示时，您应该检查数据库中的数据是否可用，如果尚未准备好，则显示您的加载微调器。

在您的情况下，[IntentService](http://developer.android.com/reference/android/app/IntentService.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:40:56.127

我认为您需要在后台为您的所有工作创建一个新线程 .. 而 UI 处理程序（线程）在用户等待时为用户做一些不同的事情。查看[http://developer.android.com/reference/java/lang/Thread.html](http://developer.android.com/reference/java/lang/Thread.html) .. 可能会发现它很有用

# sencha-touch - 如何更改 PICTO 的颜色

> ID：12296114
> 
> 赞同：1
> 
> 时间：2012-09-06T08:37:17.023
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用 Sencha Touch 2，我在按钮中声明了 PICTO，此时 picto 显示为黑色。我想把它改成白色。

我该怎么做？

```
{
    xtype: 'button',              
    text: 'Settings',
    itemId: 'settingsButton',
    align: 'right',
    iconMask: true,
    iconCls: 'settings9'
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:01:42.770

如果您查看包含 picto 的按钮的 HTML，它看起来像这样：

![在此处输入图像描述](../Images/9b9947245adec6218bbd8470fdfa5867.png)

如果您单击CSS 类`span`，`x-icon-mask`您可以看到图标的颜色设置如下：

![在此处输入图像描述](../Images/96c032aabc5131f04605acfc7416ef64.png)

因此，您所要做的就是为您的按钮添加一个 CSS 类（例如：cls: 'myBtn'），然后将以下内容添加到您的 CSS 文件中：

```
.myBtn .x-icon-mask {
  background-color: #123456
  background-image:none;
} 
```

希望这有帮助

# mysql - 如何使用迭代对（非标准）mysql数据进行排序？

> ID：12296115
> 
> 赞同：0
> 
> 时间：2012-09-06T08:37:17.740
> 
> 标签：mysql

我有数据列：

```
id  name  type  number
 1   n1    t1    num1
 2   n2    t1    num2
 3   n3    t1    num3
 4   n10   t1    num10

 5   n4    t2    num4
 6   n5    t2    num5
 7   n6    t2    num6

 8   n7    t3    num7
 9   n8    t3    num8
 10  n9    t3    num9 
```

我应该运行哪个选择来获得这个结果？

```
id  name  type  number
 1   n1    t1    num1
 5   n4    t2    num4
 8   n7    t3    num7

 2   n2    t1    num2
 6   n5    t2    num5
 9   n8    t3    num8

 3   n3    t1    num3
 7   n6    t2    num6
 10  n9    t3    num9

 4   n10   t1    num10 
```

我想这可能是使用过程的正确方法，但是否可以在简单查询中对其进行排序？

**Update1：** ​​名称、类型和编号列是独立的。正如您在结果示例中看到的那样，我需要按类型对其进行排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:52:29.230

```
 SELECT x.id,x.name,x.type,x.number
  FROM (SELECT t.id,
               t.name,t.type,t.number,
               CASE
                 WHEN @type != t.type THEN @rownum := 0
                 WHEN @type = t.type THEN @rownum := @rownum + 1
                 ELSE @rownum 
               END AS rank,
               @type := t.type
          FROM  scores t,
               (SELECT @rownum := 0, @type)var
      ORDER BY t.type)  x
ORDER BY x.rank, x.type 
```

[SQL 小提琴在这里](http://sqlfiddle.com/#!2/2417a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:14:09.047

```
select name, type, number
from (
   select t1.name, t1.type, t1.number, count(*) as typeSubIndex
   from mytable t1
   join mytable t2 on t1.type = t2.type
   where t1.id >= t2.id
   group by t1.name, t1.type, t1.number
) order by typeSubIndex, type 
```

说明： - 在同一类型列上将您的表与自身连接起来，并带有一个名为 typeSubIndex 的额外列，该列是每个类型在其自己的组中的顺序：

```
name type number typeSubIndex
n1   t1   num1   1
n2   t1   num2   2
n3   t1   num3   3
n10  t1   num10  4
n4   t2   num4   1
n5   t2   num5   2
n6   t2   num6   3
n7   t3   num7   1
n8   t3   num8   2
n9   t3   num9   3 
```

然后它只是先按 typeSubIndex 排序这个结果，然后按类型排序。

# c# - 多点按钮控制

> ID：12296122
> 
> 赞同：0
> 
> 时间：2012-09-06T08:37:53.800
> 
> 标签：c#, wpf

我正在尝试编写一个从`System.Windows.Controls.Button`类继承并对 MultipointMouse 事件（Microsoft Multipoint SDK）做出反应的 Button 控件。但由于某些原因，鼠标事件在类中无法识别。任何帮助都会很棒，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:44:18.870

我在 SDK 本身中找到了 MultipointButton 的实现。所以，不需要显式实现:)

# javascript - Safari 中 Range setEndAfter 函数的有效节点类型是什么？

> ID：12296124
> 
> 赞同：0
> 
> 时间：2012-09-06T08:37:56.423
> 
> 标签：javascript, dom

我正在编写一个模块，它应该允许用户选择 HTML 文档的一部分。为了让内部工作正常，我将`Range`选择扩展为有效的 HTML 片段。

对于 B 是 AI 的后代的情况，找到 B 的祖先，它是 A 的孩子，并希望使用 setEndAfter 将范围设置为在该节点之后结束。这就是我现在所拥有的：

```
var closestChild = function (node, descendant) {
    var parent;
    if (descendant.parentElement) {
        parent = descendant.parentElement;
        if ( node === parent ) {
            return descendant;
        }
        return closestChild(node, parent);
    }
    return false;
}

var legalRange = function (range) {
        var newRange = range.cloneRange(),
            child;
        if (range.startContainer === range.endContainer) {
            return newRange;
        }
        child = closestChild(range.startContainer.parentElement, range.endContainer.parentElement);
        if (child) {
            newRange.setEndAfter(child);
            return newRange;
        } 
        return null;
}; 
```

`INVALID_NODE_TYPE_ERR: DOM Range Exception 2`但是当我尝试设置终点时，这会引发 。我也尝试使用 parentNode 而不是 parentElement 并引发相同的异常。如果我使用 setEnd()，这不是问题。我应该传递什么类型的节点来执行此操作。

PS：事实证明，代码在 FireFox 中有效，所以我现在的问题是 Safari 和 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:23:30.190

我找到了解决方案。当我设置我的测试用例时，我没有将元素添加到文档中。如果节点不是文档的一部分，Chrome 和 Safari 在使用 setEndAfter 时似乎将节点视为无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T15:00:48.027

正如 Eivind 所回答的，问题在于用于设置范围位置的节点未附加到文档。因此，一种解决方案是在设置范围位置之前附加它。

如果由于某种原因无法将节点附加到 DOM，另一种解决方案是使用`setStart()`and`setEnd()`代替。

```
// Instead of `range.setStartBefore(node)`
var parent = node.parent;
range.setStart(parent, Array.from(parent.childNodes).indexOf(node))

// Instead of `range.setStartAfter(node)`
var parent = node.parent;
range.setStart(parent, Array.from(parent.childNodes).indexOf(node) + 1)

// Instead of `range.setEndBefore(node)`
var parent = node.parent;
range.setEnd(parent, Array.from(parent.childNodes).indexOf(node))

// Instead of `range.setEndAfter(node)`
var parent = node.parent;
range.setEnd(parent, Array.from(parent.childNodes).indexOf(node) + 1) 
```

注意：`Array.from(arrayLike)`在 Internet Explorer <= 11 中不支持。使用`Array.prototype.slice.call(arrayLike)`而不是您需要 IE 支持。

# c# - 在组合框中搜索

> ID：12296135
> 
> 赞同：0
> 
> 时间：2012-09-06T08:38:47.613
> 
> 标签：c#, visual-studio-2010

我正在做一个项目，我希望当我在组合框中按“a”时，对应的从“a”开始的单词会显示到组合框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:50:14.653

试试这个：

```
 comboBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
        comboBox1.AutoCompleteSource = AutoCompleteSource.ListItems; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:51:32.547

您正在寻找自动过滤器组合框。 [这里](http://weblogs.asp.net/okloeten/archive/2007/11/12/5088649.aspx), [这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e52796d1-d58a-438b-aba1-59844d24f419) 和[这里](http://dotbay.blogspot.de/2009/04/building-filtered-combobox-for-wpf.html)

# c++ - new MyClass 和 new MyClass() 有什么区别

> ID：12296136
> 
> 赞同：1
> 
> 时间：2012-09-06T08:38:50.447
> 
> 标签：c++, class

> **可能重复：**
> [A* pA = 新 A 之间的差异；和 A* pA = 新 A();](https://stackoverflow.com/questions/1581763/difference-between-a-pa-new-a-and-a-pa-new-a)
> [变量初始化（指针和值）](https://stackoverflow.com/questions/7961015/variable-initialization-pointer-and-value)

假设`MyClass`有一个默认构造函数，有什么区别

```
MyClass *mc = new MyClass; 
```

和

```
MyClass *mc = new MyClass(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T08:39:52.520

> 假设 MyClass 有一个默认构造函数

代码中有 2 个额外字符。

如果该类是 POD 类型（不是您的情况），则后者将执行**value-initialization**。

# facebook - 通过直接链接到创建的帖子重定向 facebook 的提要对话框

> ID：12296137
> 
> 赞同：1
> 
> 时间：2012-09-06T08:38:53.427
> 
> 标签：facebook, redirect, hyperlink

我正在尝试使用 facebook 提供的直接链接在我的墙上发布一些东西。帖子成功出现在我的墙上。但是，我似乎找不到一个好方法来向用户提供有关成功操作的反馈。我可以创建一个网页，上面写着“成功”或类似的内容，但**我真的想在发布后显示该帖子。**

在[facebook 开发人员参考中](http://developers.facebook.com/docs/reference/dialogs/feed/)，它说在成功发布后它会在重定向链接中放置一个“post id”，但是应该`redirect_uri`使用它什么呢？

```
http://www.facebook.com/dialog/feed?app_id=123050457758183&
link=http://developers.facebook.com/docs/reference/dialogs/&
picture=http://fbrell.com/f8.jpg&
name=Facebook%20Dialogs&
caption=Reference%20Documentation&
description=Using%20Dialogs%20to%20interact%20with%20users.&
redirect_uri=http://www.facebook.com 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:54:23.170

`redirect_uri` should point to your page where you will parse the `post_id` parameter out of URL arguments and do whatever you want, like redirect to the created post.

You may also want to use [`FB.ui({method:'feed'/*...*/}, callback)`](https://developers.facebook.com/docs/reference/javascript/FB.ui/) of JS-SDK to do all the work for you, so you'll be able to pick `post_id` in `FB.ui` callback instead of manually creating Feed Dialog URL and passing `redirect_uri`.

# java - 如何在 Java 中使用链表实现 MergeSort？

> ID：12296138
> 
> 赞同：-2
> 
> 时间：2012-09-06T08:38:53.513
> 
> 标签：java, sorting, merge, linked-list

如何使用下面的实现在 Java 中使用 Linked List 实现“MergeSort”？这是我对链表的实现：

```
public class LinkedList {
    Node tail;

    public LinkedList() {
        tail = null;
    }

    public LinkedList(Object value) {
        tail = new Node(value);
        tail.setNext(tail);
    }

    public void purge() {
        tail = null;
    }

    public Object getFirst() {
        Node rigby = tail.getNext();
        return rigby.getValue();
    }

    public Object getLast() {
        return tail.getValue();
    }

    public boolean isEmpty() {
        return (tail == null);
    }

    public void assign(LinkedList list) {
        if (list.isEmpty())
            tail = null;
        else {
            this.append(list.tail.getNext().getValue());

            Node tmp = list.tail.getNext();
            while (tmp != list.tail) {
                tmp = tmp.getNext();
                this.append(tmp.getValue());
            }
        }
    }

    public void append(Object value) {
        if (this.isEmpty()) {
            tail = new Node(value);
            tail.setNext(tail);
        } else {
            Node tmp = new Node(value);
            tmp.setNext(tail.getNext());
            tail.setNext(tmp);
            tail = tmp;
        }
    }

    public void prepend(Object value) {
        if (this.isEmpty()) {
            tail = new Node(value);
            tail.setNext(tail);
        } else {
            Node tmp = new Node(value);
            tmp.setNext(tail.getNext());
            tail.setNext(tmp);
        }
    }

    public boolean equals(LinkedList list) {
        if (this != list) {
            // temp variables
            Node mordecai = tail.getNext();
            Node rigby = list.tail.getNext();
            // previouses
            Node prev = tail;
            Node prev2 = list.tail;
            while (true) {
                if (mordecai.getValue().getClass().getName() == "Node") {
                    if (!mordecai.getValue().equals(rigby.getValue()))
                        return false;
                } else {
                    if (!mordecai.getValue().toString().equals(rigby.getValue().toString()))
                        return false;
                }
                prev = mordecai;
                mordecai = mordecai.getNext();
                prev2 = rigby;
                rigby = rigby.getNext();

                if ((prev == tail) && (prev2 == list.tail))
                    return true;
                if ((prev == tail) || (prev2 == list.tail))
                    return false;
            }

        }
        return true;
    }

    public void extract(Object value) {
        if (!this.isEmpty()) {
            Node tmp = tail.getNext();
            Node prev = tail;
            while (true) {
                if (tmp.getValue().equals(value)) {
                    prev.setNext(tmp.getNext());
                    break;
                }
                prev = tmp;
                tmp = tmp.getNext();

                if (prev == tail)
                    break;
            }
        }
    }

    public String toString() {
        if (this.isEmpty()) {
            return null;
        } else {
            String str = "";
            Node tmp = tail.getNext();
            str += tmp.getValue().toString();
            while (tmp != tail) {
                str += "  ->  ";
                tmp = tmp.getNext();
                str += tmp.getValue().toString();
            }
            return str;
        }
    }

    class Node {
        Object data;
        Node next;

        public Node(Object value) {
            data = value;
        }

        public Node(Object value, Node pointer) {
            data = value;
            next = pointer;
        }

        public Object getValue() {
            return data;
        }

        public void setValue(Object value) {
            data = value;
        }

        public Node getNext() {
            return next;
        }

        public void setNext(Node pointer) {
            next = pointer;
        }

        public boolean equals(Node var) {
            if (next.equals(var.next)) {
                if (data.getClass().getName() == "Node") {
                    if (data.equals(var.data))
                        return true;
                } else {
                    if (data.toString().equals(var.data.toString()))
                        return false;
                }

            }
            return false;
        }
    }
} 
```

我不能正面或反面，分析让我偏头痛。我需要这方面的帮助。我已经搜索过，我只找到了一个 Array 实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:42:30.540

`Collections.sort()``merge sort`在java中是一个

```
 public static <T> void sort(List<T> list,
                        Comparator<? super T> c) 
```

Java 文档

> 排序算法是经过修改的合并排序（如果低子列表中的最高元素小于高子列表中的最低元素，则忽略合并）。该算法提供有保证的 n log(n) 性能。指定的列表必须是可修改的，但不必调整大小。这个实现将指定的列表转储到一个数组中，对数组进行排序，并遍历列表，从数组中的相应位置重置每个元素。这避免了由于尝试对链表进行排序而导致的 n2 log(n) 性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:01:02.333

如果您从解决方案的抽象描述开始工作，您以后的课程作业会做得更好；) [http://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)

# c# - 为什么弹出窗口再次要求提供用户凭据？

> ID：12296146
> 
> 赞同：0
> 
> 时间：2012-09-06T08:39:14.980
> 
> 标签：c#, javascript, asp.net, authentication, popup

这就是我使用 javascript 从 C# 调用弹出窗口的方式：

```
ScriptManager.RegisterClientScriptBlock(UpdatePanelReportViewer, UpdatePanelReportViewer.GetType(), "jscript" + i.ToString(), "window.open('" + pageUrl + "','_blank','status=0,toolbar=0,height=620,width=680')", true); 
```

一切正常，除了第一次，因为弹出窗口没有打开请求的 url。相反，它被重定向到登录页面。如果用户正确登录，那么它将转到最初请求的 url。

为什么会这样？

我怎样才能避免这种情况？

**更新**：这就是我构建请求的 pageUrl 的方式：

```
string pageUrl = Request.Url.Scheme;
pageUrl += "://";
pageUrl += Request.Url.Authority;
pageUrl += Request.Url.AbsolutePath; 
```

# facebook - Spotify App - Facebook Auth 注销程序

> ID：12296150
> 
> 赞同：1
> 
> 时间：2012-09-06T08:39:30.260
> 
> 标签：facebook, oauth, spotify

在 Spotify 应用程序的 API 文档中，有一个[通过 Facebook 进行身份验证](https://developer.spotify.com/technologies/apps/docs/beta/09321954e7.html)的模块- 现在我尝试找到一种从 Facebook 注销的方法，但找不到任何有关正确程序的文档。Facebook Javascript SDK`FB.logout()`为此提供了一种注销方法——Spotify API 怎么样？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:30:33.450

为了注销，您需要向 Facebook 的注销 URL 发出 GET 请求，目前该 URL 为[https://www.facebook.com/logout.php](https://www.facebook.com/logout.php)，并传递两个参数：

*   `access_token`：它是 Facebook 在请求访问用户帐户时提供的访问令牌。
*   `next`：这是一个必须是在 Facebook 的应用程序配置文件中设置的域 URL 的一部分的 URL。

通过对该 URL 进行 AJAX 调用来执行注销。如果成功，`next`我将重定向到 URL。否则，将重定向到[http://www.facebook.com/home.php](http://www.facebook.com/home.php)（例如，如果`next`URL 不属于注册的应用程序域）。

您可以阅读该 AJAX 调用的响应并检查您获得的内容是否来自您的`next`URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:58:44.207

您需要使用 Facebook API - 如果您查看文档，您会发现这`auth.authenticateWithFacebook`只是`auth.showAuthenticationDialog`. 它实际上根本不与 Facebook 的“正确”API 交互——它只加载 Facebook 的登录页面并在用户登录时给你一个回调。

# c# - 如何使用 asp.net C# 将验证放入动态 html 表中

> ID：12296151
> 
> 赞同：0
> 
> 时间：2012-09-06T08:39:31.213
> 
> 标签：c#, asp.net, htmlcontrols

如何使用 asp.net C# 将验证放入动态 html 表中？? 我想要 RequireField 和其他一些带有此代码的验证器。. protected void Page_Load(object sender, EventArgs e) { if (!IsPostBack) { HtmlTable dtbl = new HtmlTable(); dtbl.Border = 5;

```
 dtbl.BorderColor = "black";
        dtbl.CellPadding = 6;
        dtbl.CellSpacing = 1;
        HtmlTableRow row1;
        for (int i = 0; i <= 2; i++)
        {
            row1 = new HtmlTableRow();
            row1.BgColor = "Orange";

            if (i == 0)
            {
                HtmlTableCell cell;
                for (int j = 1; j <= 4; j++)
                {
                    cell = new HtmlTableCell();
                    cell.Align = "center";
                    switch (j)
                    {
                        case 1:
                            Label l1 = new Label();
                            l1.Text = "Name";
                            l1.ForeColor = Color.White;
                            cell.Controls.Add(l1);
                            break;

                        case 2:
                            Label l2 = new Label();
                            l2.Text = "Age";
                            l2.ForeColor = Color.White;
                            cell.Controls.Add(l2);
                            break;

                        case 3:
                            Label l3 = new Label();
                            l3.Text = "Gender";
                            l3.ForeColor = Color.White;
                            cell.Controls.Add(l3);
                            break;

                        case 4:
                            Label l4 = new Label();
                            l4.Text = "EmailId";
                            l4.ForeColor = Color.White;
                            cell.Controls.Add(l4);
                            break;
                    }
                    row1.Controls.Add(cell);
                }

            }
            if (i == 1)
            {
                HtmlTableCell cell;
                for (int j = 1; j <= 4; j++)
                {
                    cell = new HtmlTableCell();
                    cell.Align = "center";
                    switch (j)
                    {
                        case 1:
                            TextBox t1 = new TextBox();
                            t1.ID = "txtName";
                            t1.ForeColor = Color.Green;
                            cell.Controls.Add(t1);
                            break;

                        case 2:
                            TextBox t2 = new TextBox();
                            t2.ID = "txtAge";
                            t2.ForeColor = Color.Green;
                            cell.Controls.Add(t2);
                            break;

                        case 3:
                            RadioButtonList rbl1 = new RadioButtonList();
                            rbl1.ID = "rbl";
                            rbl1.RepeatDirection = RepeatDirection.Horizontal;
                            rbl1.Items.Add(new ListItem("Male","Male"));
                            rbl1.Items.Add(new ListItem("Female", "Female"));
                            cell.Controls.Add(rbl1);

                            break;

                        case 4:
                            TextBox t4 = new TextBox();
                            t4.ID = "txtEmail";
                            t4.ForeColor = Color.Green;
                            cell.Controls.Add(t4);
                            break;
                    }
                    row1.Controls.Add(cell);
                }
            }
            if (i == 2)
            {
                HtmlTableCell cell = new HtmlTableCell();
                cell.ColSpan = 4;
                Button b1 = new Button();
                cell.Align = "center";
                b1.Style.Add(HtmlTextWriterStyle.BackgroundColor,"Green");
                b1.Style.Add(HtmlTextWriterStyle.Color, "White");
                b1.Style.Add(HtmlTextWriterStyle.BorderStyle, "solid");
                b1.Style.Add(HtmlTextWriterStyle.BorderColor, "White");
                b1.Style.Add(HtmlTextWriterStyle.Height, "25px");
                b1.Style.Add(HtmlTextWriterStyle.Width, "100px");
                b1.ID = "btnSubmit";
                b1.Text = "Submit";
                b1.Click+=new System.EventHandler()
                cell.Controls.Add(b1);
                row1.Controls.Add(cell);
            }
            dtbl.Controls.Add(row1);

        }

        form1.Controls.Add(dtbl);
        Page.Controls.Add(form1);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:42:17.060

创建一个`RequiredFieldValidator`控件，将`ControlToValidate`属性设置为要验证的控件的 ID，然后将新的 Validator 控件添加到表格单元格中。

```
RequiredFieldValidator req = new RequiredFieldValidator();
req.ControlToValidate = txtEmail.ID;
// set additional properties here
cell.Controls.Add(req); 
```

# c# - MonoTouch - 来自 Pointer 的 CGImage 崩溃应用程序 - iPhone

> ID：12296153
> 
> 赞同：3
> 
> 时间：2012-09-06T08:39:41.680
> 
> 标签：c#, ios, pointers, xamarin.ios, cgimage

我有一种方法用于创建单个大位图，然后用较小的平铺图像填充该位图：

```
private CGBitmapContext ExtractWriteableBitmap( RGBPaletteRecord rgbPalette, double dpi, ChartIndexFile indexFile, RasterChartFile chartFile )
        {
            //CGBitmapContext bitmapImage = null;
            TileRecord tile;

            // calc the number of tiles in each plane
            int tileCountX = indexFile.TileIndexRecords.Max(ti => ti.X);
            int tileCountY = indexFile.TileIndexRecords.Max(ti => ti.Y);

            // create the big picture
            int pixelWidth = (tileCountX + 1) * TileRecord.PixelWidth;
            int pixelHeight = (tileCountY + 1) * TileRecord.PixelHight;

            int intDPI = Convert.ToInt32(dpi);
            intDPI = 8;

            byte[] sourceArray;
            RectangleF sourceRect;

            // create the big picture 
            CGBitmapContext bitmapImage = new CGBitmapContext(IntPtr.Zero, pixelWidth, pixelHeight, intDPI, pixelWidth * 4, CGColorSpace.CreateDeviceRGB(), CGImageAlphaInfo.PremultipliedFirst);

            //copy the tiles into the big picture
            int index = 0;
            foreach (TileIndexRecord tileIndexRecord in indexFile.TileIndexRecords)
            {
                // get the tile record
                tile = chartFile.TileRecords[index];

                // extract the byte array for the given palette
                sourceArray = tile.GetBytes(rgbPalette);

                unsafe {
                    IntPtr unmanagedPointer = Marshal.AllocHGlobal(sourceArray.Length);
                    Marshal.Copy(sourceArray, 0, unmanagedPointer, sourceArray.Length);
                    // Call unmanaged code
                    CGImage image = new CGImage(unmanagedPointer);

                    Marshal.FreeHGlobal(unmanagedPointer);
                }

                sourceRect = new RectangleF(0, 0, TileRecord.PixelWidth, TileRecord.PixelHight); 

                bitmapImage.DrawImage(new RectangleF(0,0,128,128),image);

                // copy the tile image into the big picture
                //bitmapImage.WritePixels(sourceRect, sourceArray, TileRecord.Stride, (tileIndexRecord.X * TileRecord.PixelWidth), (tileIndexRecord.Y * TileRecord.PixelHight));

                // increment the index
                index++;
            }
            return bitmapImage;
        } 
```

我遇到的问题是这条线：

```
CGImage image = new CGImage(unmanagedPointer); 
```

当这条线运行时，我得到以下堆栈跟踪：

```
at (wrapper managed-to-native) MonoTouch.CoreGraphics.CGImage.CGImageRetain (intptr) <IL 0x00023, 0xffffffff>
  at MonoTouch.CoreGraphics.CGImage..ctor (intptr,bool) [0x00013] in /Developer/MonoTouch/Source/monotouch/src/shared/CoreGraphics/CGImage.cs:104
  at MonoTouch.CoreGraphics.CGImage..ctor (intptr) <IL 0x00003, 0x0002b>
  at Jargoon.Data.Arcs.Loader.ExtractWriteableBitmap (Jargoon.Data.Arcs.Records.RGBPaletteRecord,double,Jargoon.Data.Arcs.Raschts.ChartIndexFile,Jargoon.Data.Arcs.Raschts.RasterChartFile) [0x000db] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/Loader.cs:587
  at Jargoon.Data.Arcs.Loader.GetHiResImage (Jargoon.Data.Arcs.Records.RGBPaletteRecord) [0x00000] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/Loader.cs:362
  at ARCSViewer.ARCSViewerViewController.ViewDidLoad () [0x0001c] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/ARCSViewerViewController.cs:36
  at (wrapper runtime-invoke) object.runtime_invoke_void__this__ (object,intptr,intptr,intptr) <IL 0x0004e, 0xffffffff>
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
  at ARCSViewer.Application.Main (string[]) [0x00000] in /Users/jacknutkins/Desktop/Jargoon/ARCSViewer/ARCSViewer/Main.cs:17
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff> 
```

如果我设置断点并单步执行代码，当我到达问题行时，变量具有以下状态（**注意：**此错误发生在第一次迭代中）：

```
unmanagedPointer - 0xa25e00 - System.IntPtr
sourceArray - {byte[49152]} - byte[] 
```

在进一步检查变量时，它们似乎被正确填充。

谁能解释这里发生了什么？

我是 MonoTouch 开发的新手，但我有 iOS 和 Objective-C 的经验，所以如果您需要更多信息，请告诉我。

提前致谢，

泰辛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:30:27.857

构造`CGImage (IntPtr)`函数用于为现有的 ObjectiveC CGImage 创建托管包装器，而不是用于从位图数据创建它。

我相信你想做这样的事情：

```
using (var provider = new CGDataProvider (sourceArray)) {
    using (var image = new CGImage (width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpace, bitmapFlags, provider, null, false, intent)) {
        bitmapImage.Draw (new RectangleF(0,0,128,128),image);
    }
} 
```

# css - 行为：filename.htc 不工作

> ID：12296154
> 
> 赞同：0
> 
> 时间：2012-09-06T08:39:46.797
> 
> 标签：css, internet-explorer-8

[http://fetchak.com/ie-css3/](http://fetchak.com/ie-css3/)

这是显示在所有 ie 版本中工作的框阴影和边框半径的链接。但是当我做同样的事情时它不会工作。这是小提琴：

[http://jsfiddle.net/harmeet_jaipur/H9GqS/](http://jsfiddle.net/harmeet_jaipur/H9GqS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:03:58.227

HTC 是一个早已死去的技术，我不建议去那里。如果您需要支持较旧的 IE 版本，要么干脆不要在这些浏览器中放置阴影，因为它最终只是化妆品，或者使用 IE 特定的过滤器：

```
 progid:DXImageTransform.Microsoft.Shadow(Color=#eeeeee, Strength=15, Direction=90), 
```

看这里：

[http://www.useragentman.com/blog/2011/08/24/how-to-simulate-css3-box-shadow-in-ie7-8-without-javascript/](http://www.useragentman.com/blog/2011/08/24/how-to-simulate-css3-box-shadow-in-ie7-8-without-javascript/)

# php - 密码 PHP 使用哪种哈希算法

> ID：12296155
> 
> 赞同：0
> 
> 时间：2012-09-06T08:39:50.057
> 
> 标签：php, encryption, passwords

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

对于php文件中密码的加密，我想改成***sha256***或者***md5***，而不是使用***sha1***，因为*我*去网上研究，他们说***sha1***不是那么安全。

如何更改*php*文件？

```
<?php

class DB_Functions {

private $db;

//put your code here
// constructor
function __construct() {
    require_once 'DB_Connect.php';
    // connecting to database
    $this->db = new DB_Connect();
    $this->db->connect();
}

// destructor
function __destruct() {

}

/**
 * Storing new user
 * returns user details
 */
public function storeUser($name, $nric, $email, $license, $address, $postal_code, $password) {
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO users(name, nric, email, license, address, postal_code, encrypted_password, salt, created_at) VALUES('$name', '$nric', '$email', '$license', '$address', '$postal_code', '$encrypted_password', '$salt', NOW())");
    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
}

/**
 * Get user by nric and password
 */
public function getUserByNricAndPassword($nric, $password) {
    $result = mysql_query("SELECT * FROM users WHERE nric = '$nric'") or die(mysql_error());
    // check for result 
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        $result = mysql_fetch_array($result);
        $salt = $result['salt'];
        $encrypted_password = $result['encrypted_password'];
        $hash = $this->checkhashSSHA($salt, $password);
        // check for password equality
        if ($encrypted_password == $hash) {
            // user authentication details are correct
            return $result;
        }
    } else {
        // user not found
        return false;
    }
}

/**
 * Check user is existed or not
 */
public function isUserExisted($nric) {
    $result = mysql_query("SELECT nric from users WHERE nric = '$nric'");
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        // user existed 
        return true;
    } else {
        // user not existed
        return false;
    }
}

/**
 * Encrypting password
 * @param password
 * returns salt and encrypted password
 */
public function hashSSHA($password) {

    $salt = sha1(rand()); //algorithm hash
    $salt = substr($salt, 0, 10);
    $encrypted = base64_encode(sha1($password . $salt, true) . $salt);
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

/**
 * Decrypting password
 * @param salt, password
 * returns hash string
 */
public function checkhashSSHA($salt, $password) {

    $hash = base64_encode(sha1($password . $salt, true) . $salt);

    return $hash;
}

}

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T08:55:38.110

散列密码的最安全方法是使用[BCrpyt](http://en.wikipedia.org/wiki/Bcrypt)
MD5，SHA1，SHA256 被认为是不安全的。

有关此问题的更多信息，请参阅有关安全性的帖子： [https ://security.stackexchange.com/questions/211/how-to-securely-hash-passwords](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)

要实现 BCrpyt 密码散列，请参阅：[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:29:21.077

BCrypt 是在 PHP 中加密您的密码时要走的路。以下是一些可以帮助您的代码：

```
<?php
/*
By Marco Arment <me@marco.org>.
This code is released in the public domain.

THERE IS ABSOLUTELY NO WARRANTY.

Usage example:

// In a registration or password-change form:
$hash_for_user = Bcrypt::hash($_POST['password']);

// In a login form:
$is_correct = Bcrypt::check($_POST['password'], $stored_hash_for_user);

// In a login form when migrating entries gradually from a legacy SHA-1 hash:
$is_correct = Bcrypt::check(
$_POST['password'],
$stored_hash_for_user,
function($password, $hash) { return $hash == sha1($password); }
);
if ($is_correct && Bcrypt::is_legacy_hash($stored_hash_for_user)) {
$user->store_new_hash(Bcrypt::hash($_POST['password']));
}

*/

class Bcrypt
{
    const DEFAULT_WORK_FACTOR = 8;

    public static function hash($password, $work_factor = 0)
    {
        if (version_compare(PHP_VERSION, '5.3') < 0) throw new Exception('Bcrypt requires PHP 5.3 or above');

        if (! function_exists('openssl_random_pseudo_bytes')) {
            throw new Exception('Bcrypt requires openssl PHP extension');
        }

        if ($work_factor < 4 || $work_factor > 31) $work_factor = self::DEFAULT_WORK_FACTOR;
        $salt =
            '$2a$' . str_pad($work_factor, 2, '0', STR_PAD_LEFT) . '$' .
            substr(
                strtr(base64_encode(openssl_random_pseudo_bytes(16)), '+', '.'),
                0, 22
            )
        ;
        return crypt($password, $salt);
    }

    public static function check($password, $stored_hash, $legacy_handler = NULL)
    {
        if (version_compare(PHP_VERSION, '5.3') < 0) throw new Exception('Bcrypt requires PHP 5.3 or above');

        if (self::is_legacy_hash($stored_hash)) {
            if ($legacy_handler) return call_user_func($legacy_handler, $password, $stored_hash);
            else throw new Exception('Unsupported hash format');
        }

        return crypt($password, $stored_hash) == $stored_hash;
    }

    public static function is_legacy_hash($hash) { return substr($hash, 0, 4) != '$2a$'; }
}

// =============================================================================
// Or, if you don't want the class structure and just want standalone functions:
// =============================================================================

function bcrypt_hash($password, $work_factor = 8)
{
    if (version_compare(PHP_VERSION, '5.3') < 0) throw new Exception('Bcrypt requires PHP 5.3 or above');

    if (! function_exists('openssl_random_pseudo_bytes')) {
        throw new Exception('Bcrypt requires openssl PHP extension');
    }

    if ($work_factor < 4 || $work_factor > 31) $work_factor = 8;
    $salt =
        '$2a$' . str_pad($work_factor, 2, '0', STR_PAD_LEFT) . '$' .
        substr(
            strtr(base64_encode(openssl_random_pseudo_bytes(16)), '+', '.'),
            0, 22
        )
    ;
    return crypt($password, $salt);
}

function bcrypt_check($password, $stored_hash, $legacy_handler = NULL)
{
    if (version_compare(PHP_VERSION, '5.3') < 0) throw new Exception('Bcrypt requires PHP 5.3 or above');

    if (bcrypt_is_legacy_hash($stored_hash)) {
        if ($legacy_handler) return call_user_func($legacy_handler, $password, $stored_hash);
        else throw new Exception('Unsupported hash format');
    }

    return crypt($password, $stored_hash) == $stored_hash;
}

function bcrypt_is_legacy_hash($hash) { return substr($hash, 0, 4) != '$2a$'; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:44:53.000

**不要花*太多*时间玩弄不同的哈希算法和您自己的完美存储方式**。很可能*你*在这里犯了一些错误，最好的散列算法也救*不了你。*

我强烈建议人们**坚持使用标准库**。无论如何，它们都有很好的功能**供主机系统使用**。这尤其意味着该`crypt`功能，它可能被操作系统的各个部分大量使用。

现在有些人一提到我就会心脏病发作`crypt`。这很好，因为这意味着他们只是在重复原始 UNIX 时代的信息，并没有太多了解。*现代* `crypt`可以做的远不止这些`DES`。只是不要将它与`DES`.

这是`crypt`我的 Linux 系统上手册页的一部分（但 BSD 也支持）。所有这些都应该在 PHP 中直接可用：

```
 ID  | Method
          ---------------------------------------------------------
          1   | MD5
          2a  | Blowfish (not in mainline glibc; added in some
              | Linux distributions)
          5   | SHA-256 (since glibc 2.7)
          6   | SHA-512 (since glibc 2.7)

   So   $5$salt$encrypted   is   an   SHA-256   encoded    password    and
   $6$salt$encrypted is an SHA-512 encoded one.

   "salt" stands for the up to 16 characters following "$id$" in the salt.
   The encrypted part of the password string is the actual computed  pass-
   word.  The size of this string is fixed:

   MD5     | 22 characters
   SHA-256 | 43 characters
   SHA-512 | 86 characters 
```

**您从使用此方案中获得**的巨大好处是，您实际上可以在您的系统中使用*不同*的方案。

假设您有一些用户在您仍在使用`MD5`. 但是，任何*新*密码都应使用`SHA-256`. 也许几年后，您想*慢慢迁移*到另一个标准，也许是`Bcrypt`. 没问题。它只需要一个新的ID。*您拥有的所有*标准软件可能都支持这些哈希值。需要它们作为 unix 登录名吗？没问题。Apache HTTP 身份验证？没问题。因为它使用的是操作系统标准。

并且在验证时，它将针对上次设置密码时使用的方案进行测试。所以它是**向后兼容**的，也是**向前兼容**的。

如果你想*迁移到一个新的方案*，比如`SHA-3`当它退出时，你可以*将默认哈希更改为最新的*，然后要求用户设置一个新密码，并在某个时候禁用所有具有旧哈希 ID 的密码. 将 ID 与哈希一起存储是很有意义*的*。

使用 SHA-256 方案所需要做的就是生成一个具有该方案的 Hash `$5$<16-chars-of-salt>$`。如果您想要 SHA-512，请使用`$6$<16-chars-of-salt>$`.

这是非常简单的代码：

```
crypt("Hello",'$6$CygnieHyitJoconf$') 
```

会产生

```
$6$CygnieHyitJoconf$vkGJm.nLrFhyWHhNTvOh9fH/k7y6k.8ed.N7TqwT93hPMPfAOUsrRiO3MmQB5xTm1XDCVlW2zwyzU48epp8pY/ 
```

正确加盐的 SHA-512 密码哈希。**不要重新发明轮子。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:46:32.843

您可以使用

```
$encrypted = base64_encode(hash('sha256',$password . $salt)); 
```

代替

```
$encrypted = base64_encode(sha1($password . $salt, true)); 
```

在功能上

```
hashSSHA 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:47:55.780

您可以将散列函数更改为 sha256、md5 或其他任何值，但如果您的数据库已经填充了 sha1 散列密码，则它不会很好地工作。在这种情况下，如果不丢弃遗留数据，就无法更改哈希函数。

# ruby-on-rails-3 - 在 Rails 中创建“编辑电子邮件地址”功能

> ID：12296168
> 
> 赞同：0
> 
> 时间：2012-09-06T08:40:34.427
> 
> 标签：ruby-on-rails-3

我正在研究 Rails 框架，并希望为用户创建“编辑电子邮件地址”功能，以便用户可以轻松更改其电子邮件地址。但我不知道如何创建该功能。请给出一些想法。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:44:38.480

为具有电子邮件作为其字段的模型创建一个“crud”控制器。您可以以“编辑”形式编辑电子邮件。见 [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

# android - 如何在“多行”MultiAutoCompleteTextView 上显示建议？

> ID：12296173
> 
> 赞同：5
> 
> 时间：2012-09-06T08:40:50.810
> 
> 标签：android

有人可以告诉我如何在“多行”MultiAutoCompleteTextView 上显示建议。我去了 API 参考[Here](http://developer.android.com/reference/android/widget/MultiAutoCompleteTextView.html)。

我尝试了该示例并且自动完成工作得很好，除非当我转到下一行时，我不再看到建议。

我有一个定义我的 MultiAutoCompleteTextView 的 xml，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<MultiAutoCompleteTextView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/html"
        android:focusable="true"
        android:gravity="top"
        android:background="@null"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:paddingBottom="5dp"
        android:singleLine="false"
        android:completionThreshold="1"
        android:textSize="14dp"
        android:scrollHorizontally="true"
        android:focusableInTouchMode="true" /> 
```

我的代码是这样的：（从参考中得到）

```
 MultiAutoCompleteTextView editor = (MultiAutoCompleteTextView) LayoutInflater.from(getApplicationContext()).inflate(R.layout.editor, null);

   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, COUNTRIES);
   editor.setAdapter(adapter);
   editor.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer()); 
```

因为我在 MultiAutoCompleteTextView xml 上将 singleLine 设置为 false。当我按回车键转到下一行时，这些建议不会显示。

谁可以帮我这个事。有没有办法可以根据自己的喜好覆盖建议面板？还有没有办法定位面板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-24T06:33:03.517

```
android:inputType="textMultiLine" 
```

“普通文本键盘，允许用户输入包含换行符（回车）的长字符串。”

[http://developer.android.com/guide/topics/ui/controls/text.html](http://developer.android.com/guide/topics/ui/controls/text.html)

# jquery - VideoJS：暂停 5 秒后执行功能

> ID：12296178
> 
> 赞同：0
> 
> 时间：2012-09-06T08:41:08.933
> 
> 标签：jquery, video, count, setinterval, clearinterval

**HTML：**

```
<video id="player" class="video-js vjs-default-skin" controls
  preload="auto" width="400" height="264"
  data-setup="{}">
  <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4'>
  <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm'>
</video>

<a href="#">Click to play video</a>    
<br>
<code></code> 
```

**JS：**

```
var player = _V_("player");
var pasue_check = false;

$("a").click(function() {
  player_play();
});

function player_play() {
$("#player").fadeIn();
$("a").fadeOut();

player.ready(function(){
player.play().addEvent("ended",player_ended);
player.addEvent("pause",player_pause);
player.play().addEvent("play",player_resume);
});

}

function player_ended() {
$("#player").fadeOut();
$("a").fadeIn();

    if(pasue_check== true) {
     clearInterval(countInterval);
     pasue_check = false;
    }
    pasue_check = false;
}

function player_pause() {
    count = 1;

    countInterval = setInterval(function() {
        $("code").html(count);
         pasue_check = true;
        if (count==5) {
            player_ended();
        }
         count++
    }, 1000);

}

function player_resume() {
   if(pasue_check== true) {
     clearInterval(countInterval);
     pasue_check = false;
    }
} 
```

现场测试：http: [//jsfiddle.net/973gT/](http://jsfiddle.net/973gT/)

我尝试使用 setInterval 和 clearInterval ，但是当我计数和暂停计数时它的效果并不好。

有时它会像 2-4-6 一样计数......或无法清除间隔

有人可以帮助我吗，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:50:00.207

`player.ready`里面添加了监听器，`player_play`也就是说第二次按下播放，所有的事件监听器都会重新绑定一次。正因为如此，`player_pause`两次暂停事件都绑定了两次，所以在第二次暂停之后开始了两个间隔。

如果您提取`player.ready`要添加的侦听器`DOMReady`而不是 at each `player_play`，您将摆脱这个问题。

[演示](http://jsfiddle.net/HQ27U/)

另一个问题是您在`pasue_check`间隔内将（拼写错误，但至少始终如此）设置为 true 。你最好在间隔之前设置它，因为就像现在一样，从点击暂停按钮开始会有一秒钟的延迟，直到它`pasue_check`为真。如果在该秒过去之前单击恢复，则`clearInterval`不会执行。因此，也将其移出区间。

[演示](http://jsfiddle.net/4QZHU/)

您的视频自动播放的原因是您正在调用`.play()`. `player.ready`如果那不是您想要的，请删除它。

[演示](http://jsfiddle.net/nnvCd/)

# facebook - 使用多个域登录 Facebook

> ID：12296180
> 
> 赞同：31
> 
> 时间：2012-09-06T08:41:20.107
> 
> 标签：facebook

我知道 facebook 允许我为我的应用程序指定多个域。 ![我可以指定多个应用程序域](../Images/c60718f672c8f03b786caa021bccda6a.png)

但在“使用 Facebook 登录的网站”中，我只能指定一个网址。 ![我只能指定一个站点 URL](../Images/c6376c44be4220521889928168cf13b1.png)

我是否可以使用同一个 App 对 domain.se、domain.dk 和 domain.net 上的用户进行身份验证？还是应该为每个域创建一个应用程序？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-02-03T22:21:55.353

**技术上**可以在多个域上使用Facebook **Connect**，但有一些限制（最多 5 个域）。

因此，执行此操作的关键是在您的应用设置下的“应用域”字段中**添加****所有域。**

 **![在此处输入图像描述](../Images/ef452075a0ab5f75fdf69fdacbaff086.png)

但是，**问题**是 Facebook 只允许您添加从 Canvas URL 或站点或页面标签 URL 派生的域，因此如果您尝试输入其他任何内容，则会收到如下所示的错误：

![在此处输入图像描述](../Images/f4c04148a463f1e07ca87a516dfc5d75.png)

**解决方案**是使用**添加平台按钮****在 Facebook**、**网站**和**Facebook 选项卡**上创建应用程序，然后输入指向您其他域的 URL。这是我的意思的一个例子：

 **![在此处输入图像描述](../Images/7f6d99015d25a752457ccc7120896bdc.png)

如果您为每个字段使用**唯一域**，则最多可以使用 5 个不同的域。我已经用最多 3 个域测试了这种技术，但我认为它应该适用于所有 5 个域。

注意：Facebook 管理员功能会不时更改，因此所有这些都可能会发生变化

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T09:39:17.370

只要您`App Domains`在应用程序设置中列出了所有所需的设置，您就应该能够在其中任何一个上对用户进行身份验证。

~~“使用 Facebook 登录的网站”实际上仅用作指向您的网站/应用程序的链接。~~

**更新 2（2016 年 7 月）：**

> 应用程序域必须与 Secure Canvas URL、移动站点 URL、Unity 二进制 URL、站点 URL 或安全页面选项卡 URL 的域匹配。

**更新（2013 年 12 月）：**
在撰写原始答案时，可以在应用程序设置中列出任何域，但从那时起，应用程序设置的 UI（以及处理应用程序域的方式）至少更改了几次，**在在某些时候，您只能列出从应用程序的画布页面之一派生的域**。

截至**2013 年 12 月**，可以（**再次**）列出不是从应用程序画布 URL 派生的域。

![应用程序域设置](../Images/754a4243c0c244c99e016f28f996400c.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-19T21:53:40.973

假设您的域由同一个 Web 服务器提供服务并且您可以访问该 Web 服务器，您可以使用手动登录过程： [https ://developers.facebook.com/docs/facebook-login/manually-build-a- login-flow](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow)从任意多个域登录。

假设您的域是 site1.com,site2.com.... 而不是使用 Facebook javascript API，您只需在每个站点上放置一个普通的使用 Facebook 登录按钮，该按钮会将浏览器重定向到 Facebook 登录页面，如所述在上面的文章中。在状态变量中，您可以指定一个代码，该代码指示您的哪些站点正在请求登录。在重定向中，您将使用您分配给您的网络服务器的单个服务域（例如 fb.mywebserver.com），并且您在 facebook 登录设置页面中将其指定为经过验证的重定向 url。所有站点都会重定向到同一个 url，避免了支持多个域的问题。

用户登录后，浏览器将重定向到 fb.mywebserver.com 并将状态传递给它，该状态告诉您哪个站点正在请求登录以及您可以在后端使用该代码使用 Facebook 检索用户信息图形 API。您将此信息与 uid 一起存储在您的数据存储中，然后使用状态中的信息，您重定向到适当的站点，包括指示 Facebook 登录的参数（例如 site1.com?fbc={some uid}）。浏览器会乖乖地调用 site1.com?fbc... 您的 Web 服务器将收到此请求并检测 fbc 参数，该参数告诉它将相应的 Facebook 登录用户与该站点相关联。然后，它可以使用 uid 检索登录的用户信息，例如，为该用户返回一个会话 cookie 以及页面。

从用户的角度来看，他们按下“使用 Facebook 登录”按钮，被重定向到他们登录的 Facebook 登录页面，然后在登录状态下被重定向回您的站点。不如登录弹出窗口那么好，但可能可以接受。

谷歌登录也可以使用类似的过程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-06T02:40:17.327

我发现在开发/生产场景中做的最好的事情是添加一个“测试应用程序”，然后为您的开发网站添加一个平台 - 因为如果您使用它，您必须提供“页面标签 url”的位置一个平台。

如果您需要申请状态或权限审查，Facebook 要求您的“页面 url”是实时/可访问的。

这让我了解了“登录开发”/“登录生产”场景。****

# java - 更改连接类型时未列出 HTC 设备

> ID：12296185
> 
> 赞同：0
> 
> 时间：2012-09-06T08:41:59.430
> 
> 标签：java, android

我正在使用 HTC 野火进行 android 开发。我有一个小小的疑问。当我们尝试使用设备在 eclipse 上运行应用程序时，连接类型是否重要。对我来说，在运行配置中，仅当连接类型是磁盘驱动器时才会显示设备。如果我选择 Internet pass through 那么它不会显示。这些天来，在我看来，连接类型并不重要。我相信它应该通过启用调试选项来工作。我应该更改任何其他设置以使其出现在 Eclipse 的设备列表中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T03:37:58.663

连接类型需要设置为仅收费。

# php - 所有的 FB.api 突然无法在我的应用程序上运行

> ID：12296187
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:42:06.873
> 
> 标签：php, facebook

我的应用程序在这几天内运行良好。但它突然因任何修改而下降。我正在尝试测试 FB.api 功能，例如 FB.login, FB.api('me/........')，它也没有任何回复。以下是我的原始代码。有关于 FB.api 的更新吗？

```
 <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript">
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <script type="text/javascript">
        window.fbAsyncInit = function() {
            FB.init({
                appId  : '<?php echo AppInfo::appID(); ?>',
                status : true,
                cookie : true, 
                frictionlessRequests: true
            });

            FB.Canvas.setAutoResize();

            FB.getLoginStatus(function(response) {
                FB.Canvas.scrollTo(0,0);

                $('area').click(function() {
                FB.login(function(response) {
                        if (response.authResponse) {
                            FB.api('/me/permissions?access_token=' + response.authResponse.accessToken, function(response) {
                                alert("abc:" + response.authResponse.accessToken);

                                if (response.data[0].publish_stream == undefined) {
                                    return;
                                }

                                if (response.data[0].publish_stream == 1) {
                                    window.location.href = "like.php";
                                }
                            });
                        }
                    }, {scope: 'email,user_likes,publish_stream'});

                    return false;
                });
            });/**/
        };
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:47:44.623

您错过`FB.Canvas.setAutoResize()`了 Facebook JS-SDK 中方法的弃用，使用它会导致错误并破坏您的代码。

在您的情况下，调用 to 后没有任何内容`FB.Canvas.setAutoResize()`被执行。

您应该[`FB.Canvas.setAutoGrow()`](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)改用并观看[开发人员博客](https://developers.facebook.com/blog/)和[开发人员路线图](https://developers.facebook.com/roadmap/)以了解更改...

**专业提示**：始终，但始终检查您的错误控制台，错误消息和异常是您的朋友！

# c++ - 来自多个类的虚拟事件处理程序：多重继承或组合？

> ID：12296188
> 
> 赞同：2
> 
> 时间：2012-09-06T08:42:11.590
> 
> 标签：c++, oop, event-handling, multiple-inheritance, composition

我的团队编写了几个通过纯虚拟回调实现事件处理的 C++ 类——例如，当从另一个进程接收到消息时，处理 IPC 消息传递的基类调用它自己的纯虚函数，派生类处理事件覆盖该功能。基类知道事件已经发生；派生类知道如何处理它。

我现在想将这些基类提供的功能组合到更高级别的类中，例如，当消息从另一个进程到达时，我的新类可以使用类似的事件驱动网络类通过其网络连接转发它. 看起来我有两个选择：

*   (1) 组合：从每个事件处理基类派生类，并将这些派生类的对象作为成员添加到我的新类中，或者：

*   (2) 多重继承：使我的新类成为所有事件处理基类的派生类。

我已经尝试过（1）和（2），但我对我的实现都不满意。

还有一个额外的复杂性：一些基类是使用初始化和关闭方法而不是使用构造函数和析构函数编写的，当然这些方法在每个类中具有相同的名称。所以多重继承会导致函数名不明确。可以通过`using`声明和/或显式范围解决，但不是我见过的最易于维护的东西。

即使没有这个问题，使用多重继承并覆盖几个基类中的每一个的每个纯虚函数都会使我的新类变得非常大，接近“上帝对象”。随着需求的变化（阅读：“随着需求的增加”），这不会很好地扩展。

另一方面，使用单独的派生类并将它们添加为我的新类的成员意味着我必须在每个派生类上编写大量方法以在它们之间交换信息。这感觉很像“getter and setter”——没有那么糟糕，但是有很多“从那个类中获取这些信息并将其交给这个类”，这给人一种效率低下的感觉——很多额外的方法，很多额外的读取和写入，并且类必须对彼此的逻辑了解很多，这感觉不对。我认为一个成熟的发布和订阅模型将是矫枉过正，但我​​还没有找到一个简单的替代方案。

如果我使用组合，也会有很多重复的数据。例如，如果我的班级的状态取决于其网络连接是否已启动并正在运行，那么我必须在受此影响的每个班级中都有一个状态标志，或者让每个班级在每次需要做出决定时都向网络班级查询其状态做出来。如果我只有一个多重继承类，我可以只使用我类中的任何代码都可以访问的标志。

那么，多重继承、组合，或者完全是别的什么？是否有关于如何最好地处理这种事情的一般经验法则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:12:48.003

根据您的描述，我认为您已经采用了“模板方法”样式的方法，其中基础确实可以工作，然后调用派生类实现的纯虚拟，而不是几乎相同的“回调接口”方法，除了纯虚方法位于一个完全独立的接口上，该接口作为构造函数的参数传递给“基”。我个人更喜欢后者，因为当需要将对象连接在一起并构建更高级别的对象时，我发现它更加灵活。

我倾向于使用实现组合对象所需的回调接口的组合类进行组合，然后可能在更高级别以类似的风格再次组合。

然后，您可以通过让组合对象实现回调接口并将它们传递给其构造函数中的“组合”对象来决定组合是否合适，或者您可以在其自己的对象中实现回调接口，可能使用更简单和更精确的回调您的组合对象实现的接口，并组合“基础对象”和“回调实现对象”......

就我个人而言，我不会使用“抽象事件处理”接口，因为我更喜欢我的代码明确和清晰，即使这会导致它稍微不那么通用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:07:43.830

我并不完全清楚你的新类试图实现什么，但听起来你实际上必须在某个地方为所有这些抽象事件类提供一个新的实现。

就个人而言，我会为作曲而丰满。多重继承很快就变成了一场噩梦，特别是当事情必须改变时，组合保持现有的关注点分离。

您声明每个派生对象都必须与网络类进行通信，但是您可以尝试将其减少到最低限度。例如，每个派生事件对象纯粹负责将事件信息打包成某种通用数据包，然后将该数据包传递给网络类进行发送？

如果不确切知道你的新类在做什么，很难评论或建议更好的模式，但是我编码的越多，我就越学会同意古老的格言“喜欢组合而不是继承”

# ruby-on-rails - Rails：正在开发中用于调优的 SQL_NO_CACHE

> ID：12296193
> 
> 赞同：4
> 
> 时间：2012-09-06T08:42:35.267
> 
> 标签：ruby-on-rails, activerecord, mysql2

什么是让活动记录在开发环境中的所有查询中使用 SQL_NO_CACHE 的简单方法？

我想针对最坏情况的加载时间优化语句。希望这样做是有意义的，但是我在第一页命中时得到非常慢的查询，下一次所有查询都非常快，因为服务器应该缓存它们。

我正在使用带有 rails 3.2.3 的 mysql2 gem 0.3.11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:19:41.813

因为我不想编辑数百个查询，所以我在应用程序控制器中放置了一个前置过滤器，如下所示：

```
def disable_sql_query_cache_in_development
  if Rails.env == "development"
    Rails.logger.warn Utils.yellow "ApplicationController.disable_sql_query_cache_in_development", "Query cache will be reset for worst case performance tuning"
    #ActiveRecord::Base.connection.execute("SET SESSION query_cache_type = OFF")
    ActiveRecord::Base.connection.execute("RESET QUERY CACHE")
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:54:43.220

使用常规的 rails find 你可以把它塞进去：

2.3.5：

```
User.find(:all, :select => "SQL_NO_CACHE *", :conditions=>"id = 1234") 
```

3+

```
User.where(:id => 10).select("SQL_NO_CACHE *") 
```

# android - 在 *native* Android 中从/到 JSON 解析“ANY”对象

> ID：12296197
> 
> 赞同：0
> 
> 时间：2012-09-06T08:42:44.363
> 
> 标签：android, json, parsing, reflection

我已经阅读了几十篇文章（这里和其他地方），要求从/到 JSON 进行解析，并且大多数人为每个类编写了他们独有的解析器。通常的答案是使用 GSON 或其他库，但由于 android 本身支持 JSON，我看不到使用第三方库的意义。

因此，我专门使用 Android JDK 库制作了自己的通用 JSONParser。它适用于具有以下字段的任何类：原始类型、字符串、一维数组或其他类。现在的问题是处理更多维度的数组。我是一个使用反射和 JSON 的菜鸟，所以也许我误解了一些东西。

您必须指定要转换 JSON 字符串的类。然后它基本上遍历类中的所有字段，并在 JSON 中搜索具有相同名称的字段。**这仅适用于公共方法**（现在对我来说这不是一个难题，但如果有人有改进它的想法，我也会很感激）。

当我有一个数组数组时，我的问题就出现了，我尝试了几种方法，但我无法找到处理 n 维数组的解决方案。这是我的数组方法，“TO-DO”部分是我不知道的部分。我试过使用注释行，但失败了。可能在两个方向上都是同一个问题，但我现在担心解码 JSON。

```
 Everything solved!! Go to comments 
```

我认为它可能对更多人有用，所以我在这里上传了整个代码。 [http://pastebin.com/X7CmaxNf](http://pastebin.com/X7CmaxNf)

*从public static Object populateObjectFromJSON(Class classname, JSONObject js) {}*第 65 行调用方法 insertArrayFromJSON() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:55:53.803

我终于自己解决了这个问题。从昨天开始我就被困住了，因为我错误地面临数组问题，但后来我改变了方法，以正确的方式递归地攻击它。在 pastebin 中是整个代码（我不在这里发布，因为它有 200 行）。随意使用它，如果有人有改进它的想法，请告诉我！

[http://pastebin.com/Jtf2SLDu](http://pastebin.com/Jtf2SLDu)

要点是正确使用 Array.set()、Array.newInstance() 和 Array.get() 方法。如果有人想看，这是在第 110-125 行。

为了访问受保护的和私有的方法，我在这个网站上找到了解决方案。所以现在它适用于任何具有任何公共/受保护/私有字段的类。[http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html)

我已经以一种方式，您可以在解析之前设置所需的隐私。

# grails - 数据从数据库中消失？

> ID：12296201
> 
> 赞同：0
> 
> 时间：2012-09-06T08:43:22.320
> 
> 标签：grails

我正在运行一个 grails 应用程序，并且收到了我可能遇到过的最奇怪的错误。模型中的一个“字段”获得了无缘无故消失的数据。

我的项目中有两个模型或域类，设置如下：

```
class Insertion {

String title
Date insertDate

static hasMany = Dataholder

  static constraints = {
    title(unique: true)
  }
}

class Dataholder {

    String product
    int somenumber
    int somenumber2
    int somenumber3
    Date startDate
    Date endDate
    List<String> somedatalist
    Insertion insertions

    static belongsTo = Insertion

    static constraints = {
    }
} 
```

“插入”类代表用户每次可能输入一堆数据持有者。数据持有者代表该特定产品的所有数据。重要的是要知道消失的数据包含在 Dataholder 模型中，**唯一**消失的数据是`somedatalist`.

当我插入数据并保存它时，这是完全令人困惑的魔法。一切顺利：

```
if (!errors) {

            dataholderValidator.each {
                it.insertion = insertion
                it.save()
            }

        def results = Dataholder.findAllByInsertion(insertion) 
```

我做了一些验证并将数据应用到每个 Dataholder，然后如果一切顺利，`if(!errors)`我将插入添加到每个对象。完成后，我保存每个对象，将数据保存到数据库中。您可能认为这里出了问题，但请等待并感到惊讶。

保存后，我通过使用插入从数据库中获取所有数据持有者（因为我想确保在将数据打印给用户之前已保存数据）。这是奇怪的部分开始的地方，我得到的是正确的数据：

```
results.each {
                it.somedatalist.each { it2 ->
                    if(!weekdays.contains(it2))
                        weekdays.add(it2)
                }
            } 
```

使用数据列表中的所有唯一项填充数组。然后将其打印到视图中，瞧：

![具有正确数据的视图](../Images/a9a9f019e5af58d222824e75b43a3ba3.png)

现在，我们只需等待用户确认视图中的所有数据，当他或她单击确认按钮时，插入标题会随 post 一起发送到函数，该函数将检索数据，令我惊讶的是，`somedatalist`它是 null。

这是检索数据的功能：

```
 def result = Insertion.findByTitle(insertionTitle)

    def results = Dataholder.findAllByInsertions(result) 
```

`results`当在我可以肯定地确认每个`Dataholder`包含正确的正确数据之后放置一个断点时，除了`somedatalist`等于`null`.

我试图通过使用插入标题而不是仅使用对象来获取上面的数据，并且效果很好。我不明白为什么数据会在一秒钟内填充到数据库中，以及某些东西怎么会消失？

**测试：**

```
void testSaveDataholder() {
        Insertions insertion = new Insertion(title: 'adadad', insertDate: new Date())
        insertion.save()
        assert Insertion.all.size() == 1
        Dataholder ed = new Dataholder(product:  'abc123', somenumber:  123, somenumber2: 13, startDate: new Date(), endDate: new Date(), somedatalist: ['TI'], insertions:  insertion)
        ed.save()
        assert Dataholder.all.size() == 1
        assert Dataholder.all.first().somedatalist.size() == 1
        assert Dataholder.all.first().insertions.title == 'adadad'
        assert Insertion.findAllByTitle('adadad').size() == 1
        assert Dataholder.findAllByInsertions(Insertion.all.first()).size() == 1
    } 
```

这个测试全部返回 true，我使用的是 Grails 2.1。

**编辑**：我正在使用带有“更新”的内存数据库作为配置。所以我无法真正查看数据。但它应该在那里。

请用你的睿智建议和更好的智慧帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:58:02.403

它刚刚浮现在我的脑海。将对象集合保存到单列中会破坏第一范式，因此这不是正确的方法。我立即在 JIRA 中搜索了一个问题：

[http://jira.grails.org/browse/GRAILS-1023](http://jira.grails.org/browse/GRAILS-1023)

正确的方法是创建一个具有单个 String 属性的新域类并使用标准的一对多关系。

# jquery - jQuery Mobile 中的粘性列表分隔符？

> ID：12296204
> 
> 赞同：4
> 
> 时间：2012-09-06T08:43:32.007
> 
> 标签：jquery, jquery-mobile

有没有办法让 jQuery Mobile 列表分隔符标题固定/粘在页面顶部，直到下一个字母或列表分隔符出现并取而代之？

我已经发现了这样的东西：[https://github.com/jquery/jquery-mobile/blob/master/experiments/scrollview/lists-divider.html](https://github.com/jquery/jquery-mobile/blob/master/experiments/scrollview/lists-divider.html) 但是演示不起作用，当我实现了这段代码时，它也不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:24:24.567

我正在寻找一个插件来做同样的事情，也适用于 jquery.mobile 上的列表分隔符。找到[Sticky 插件](http://labs.anthonygarand.com/sticky "粘性插件")。

它在 firefox 上运行良好，但在 Chrome 或 Safari 浏览器上，分隔符不会粘在顶部，这可能是因为 jquery mobile 创建的复杂菜单结构。会试着弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:24:00.593

[你可以在 GitHub 上](http://github.com/teamdf/jquery-list/)使用这个jQuery 插件。还有一篇关于它的[展示文章，将其显示为 iOS 联系人应用程序。](http://www.teamdf.com/web/showcasing-jquery-list-with-a-fake-iphone/147/)

该插件允许您选择您喜欢的任何选择器作为标题。[有关详细信息，](http://opensource.teamdf.com/list/examples/demo-australia.html)请参阅此示例。

# java - 我可以创建“复杂”渐变以在 swing(x) 组件上实现阴影吗

> ID：12296205
> 
> 赞同：1
> 
> 时间：2012-09-06T08:43:34.817
> 
> 标签：java, swing, gradient, java-2d, swingx

我想在我的 JComponent 周围创建阴影效果，尤其是在我的 JTextField 周围（JXTextField 因为我使用 SwingX api）。

我已经知道`DropShadowBorder`SwingX 的课程，但这并不是我想要实现的。我决定自己用圆角矩形和渐变来做。

我的想法是创建一个圆角矩形，对其应用渐变，然后使用给定的偏移量在该矩形顶部绘制组件以创建阴影效果。

问题是我只知道允许我指定渐变的起点和终点的 GradientPaint 类。除非我错了，否则我认为我无法实现这种渐变效果，我认为我需要一个从中心开始然后向边缘渐变的渐变。有没有办法用实际的 API 做这样的渐变，还是我需要自己写？

谢谢。

编辑：这是做一个看起来像这样的文本字段：![在此处输入图像描述](../Images/7d820dcf93162f0f4d950ee6e3411fba.png)

底部的阴影比左右两侧的阴影更重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:23:04.067

没有简单的方法可以准确地实现您想要的。

要创建这种阴影的精确效果，您必须做几件事：

1.  在单独的图像上绘制一个黑色/灰色（阴影的颜色）圆形矩形，该图像的大小与组件大小相加，并在两侧增加一些额外的间距
2.  模糊该图像以从扁平圆角矩形创建阴影
3.  通过使用您自己的 UI 或仅替换字段的 paintComponent 方法在字段下渲染该图像

让我再解释一下每个步骤：

1.  您需要一个单独的图像，以便背景/组件不会与阴影一起模糊。另外，您不能将任何过滤器直接应用于图形 - 您需要一个图像。
2.  你可以在这里阅读如何模糊的很好的解释：[http ://www.jhlabs.com/ip/blurring.html](http://www.jhlabs.com/ip/blurring.html)
3.  您需要在组件本身之前放置（绘制）阴影图像，这可以通过两种方式进行：将其绘制在包含该字段的面板/容器上或替换该字段的 paintComponent 方法或 UI 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:57:36.937

如果你需要径向渐变，有一个：RadialGradientPaint

[http://docs.oracle.com/javase/6/docs/api/java/awt/RadialGradientPaint.html](http://docs.oracle.com/javase/6/docs/api/java/awt/RadialGradientPaint.html)

（您在此处指定中心点和半径）

顺便说一句，DropShadowBorder 有什么问题？（它与您想要的非常相似，您可以随时获取源代码并对其进行修改）

# objective-c - 带有自动隐藏滚动条的 NSScrollview 会在滚动条被隐藏时发出通知

> ID：12296208
> 
> 赞同：1
> 
> 时间：2012-09-06T08:43:44.033
> 
> 标签：objective-c, macos, cocoa, appkit, nsscrollview

当滚动条可见或不可见时是否可以获得通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:30:42.473

我假设您指的是将动态数据量放在滚动视图中，其中有时它有一个滚动条，有时它没有。

可以通知您使用此属性“hasVerticalScroller”。

一旦您决定何时检查此值，您可以使用 NSNotification 来广播此消息。

# ember.js - 使用 ember-data 处理 GET /models 返回的部分或摘要对象列表

> ID：12296210
> 
> 赞同：6
> 
> 时间：2012-09-06T08:44:03.550
> 
> 标签：ember.js, ember-data

对于资源帖子，
如何处理以下情况。

GET /posts 返回仅包含摘要的数组（即标题、commentCount），
但 GET /post/:id 返回完整对象。（即标题、内容、评论：[comment1，comment2]）

当应用程序加载时，屏幕上可以看到帖子列表，我正在调用**App.Post.find()**来获取所有帖子。
当点击一个项目时，如果我尝试使用**App.Post.find(1)**加载，它会返回缓存的数据项目。一种方法是从服务器强制加载完整的 Post。

**编辑**
发现相关问题：[https](https://github.com/emberjs/data/issues/51)
://github.com/emberjs/data/issues/51 我知道它支持 REST 的语义不正确。
但是另一个用例：记录可能已经在服务器上更新，我想刷新它，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T17:34:21.763

您可以使用模型的`.reload()`方法从适配器重新获取它。因此，在您获取陈旧数据的路线中，而不是返回`this.store.find('post', 1)`，返回`this.store.find('post', 1).reload()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-16T05:57:15.090

[https://github.com/BookingSync/ember-data-partial-model](https://github.com/BookingSync/ember-data-partial-model)就是为了解决这个确切的问题。

# objective-c - 不同坐标系的OpenGL纹理映射

> ID：12296212
> 
> 赞同：0
> 
> 时间：2012-09-06T08:44:13.583
> 
> 标签：objective-c, opengl, box2d, texture-mapping, quartz-composer

![在此处输入图像描述](../Images/cb3ad5a058b59270ca7138fde40ad031.png)

我已经问过一个关于纹理映射的问题，这两个是相关的（[这个问题](https://stackoverflow.com/questions/9976013/box2d-opengl-one-texture-mapped-on-many-vertices/)）。

我正在使用 Quartz Composer，它似乎对纹理有点特殊......

我有一个复杂的多边形，我在特定的坐标系中进行**三角剖分（x 上的 -1 -> 1 | -0.75 -> y 上的 0.75）。**我在这个坐标系中获得了一个三角形顶点数组（左侧图片上的三角形 1 到 6）。

然后我分别渲染每个多边形（这是我的程序所必需的），方法是在它的顶点上应用一个缩放函数，从这个坐标系到 OpenGL 一个（0\. -> 1.）。在这里，即使对于 0->1 范围，这有点愚蠢：

```
return (((1\. - 0.) * (**myVertexXorY** - minTriangleBound)) / (maxTriangleBound - minTriangleBound)) + 0.; 
```

但我希望在这些三角形上对**一张**图像进行纹理处理（如上图所示）。因此，我首先获取整个多边形边界（右图中的 1），然后是三角形边界（右图中的 2）。我将 1 缩放到以像素为单位的图片坐标（右侧图片上的 3），然后我得到以**像素**为单位的三角形边界（2）。

它为我提供了使用 Quartz 在 OpenGL 中锁定纹理的界限：

```
NSRect myBounds = NSMakeRect(originXinPixels, originYinPixels, widthForTheTriangle, heightForTheTriangle); 
```

我锁定了我的纹理

```
[myImage lockTextureRepresentationWithColorSpace:space forBounds:myBounds]; 
```

然后，使用 OpenGL：

```
for (int32 i = 0; i < vertexCount; ++i)
                    {
                        verts[i] = myTriangle.vertices[i];

                        texcoord[0] = [self myScaleFunctionFor:XinQuartzCoordinateSystem From:0 To:1]
                        texcoord[1] = [self myScaleFunctionFor:YinQuartzCoordinateSystem From:0 To:1]

                        glTexCoord2fv(texcoord);

                    } 
```

我得到了你所看到的：有时图像的某些部分是合适的，有时不是（嗯，事实上，对于这个特定的多边形，它根本不合适......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:32:01.357

我不确定我是否确实理解了您的问题，但是：

是什么阻碍了您直接提供与源图片的拓扑相匹配的纹理坐标？这比尝试找到一些以正确方式移动图片的每个三角形线性映射要容易得多。

# python - 使用库（命名空间包）进行 Python 日志记录

> ID：12296214
> 
> 赞同：0
> 
> 时间：2012-09-06T08:44:27.530
> 
> 标签：python, logging

我的项目由许多命名空间包组成，我想为它们正确设置日志记录：它们旨在被其他“前端”用作库。

假设我有这种情况，对于包 foo.xyz：

```
 foo/
      __init__.py
      xyz/
          __init__.py
         bar.py
         baz.py 
```

我的想法是保留生成日志的位置的信息，例如在 bar.py 中

```
import logging
log = logging.getLogger(__name__)
log.addHandler(logging.NullHandler()) # Python 2.7
log.setLevel(....) 
```

但是我不确定如何从前端（从不同的包中导入几个位）调用它以轻松显示所有内容。例如，我正在使用 foo.abc 和 foo.xyz，按照上面的设置进行日志记录。我想使用传播，但目前这不起作用：

```
from foo.xyz import bar
from foo.abc import baz

log = logging.getLogger()
log.addHandler(logging.StreamHandler())
log.setLevel(logging.DEBUG)

do_my_stuff() 
```

但是，库的记录器不会生成任何输出。我究竟做错了什么？

编辑：到目前为止，如果我得到与父模块的命名空间相对应的记录器，我可以获得输出：

```
log = logging.getLogger("foo.xyz") 
```

但是，我试图在一次调用中获取所有内容：我想知道我是否可以这样做，因为正如我之前所写的，这组包使用命名空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:32:20.553

您不需要将 a 添加`NullHandler`到所有子包`foo`- 您只需将 NullHandler 添加到`foo`记录器，这可以在`foo/__init__.py`.

仅添加到库代码中以处理使用`NullHandler`库但使用应用程序未配置日志记录的情况。Thomas Vander Stichele 错误地指出添加 a`NullHandler`会导致消息被丢弃。

在您的应用程序中，您可以根据需要配置日志记录 - 任何处理程序、级别等。级别设置不应该（通常）在模块本身中完成，而是在某个中心位置完成，通常与此类似地调用：

```
if __name__ == '__main__':
    configure_logging() # whatever configuration you need to do
    main() 
```

这允许在不打印日志的情况下使用 REPL（除了`WARNING`或以上），而在应用程序运行时会发生日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:52:47.067

如果从 bar.py 中删除 addHandler 和 setLevel 会发生什么？我不明白为什么您希望您的程序包实际进行日志记录而不是生成日志消息，并且 NullHandler 听起来它会一起丢弃您的消息。

# linux - 在嵌入式系统上运行 Qt Helloworld 时出现分段错误

> ID：12296217
> 
> 赞同：1
> 
> 时间：2012-09-06T08:44:32.710
> 
> 标签：linux, qt, filesystems, embedded, arm

**我为ARM**交叉编译了一个`Helloworld`可执行文件。它在我朋友的开发板上运行良好，但在我的板上因**“分段错误”**而失败。两块板在硬件和软件上都略有不同。

 ****我的问题是，如何在我的板上调试？调试这么简单的程序相对容易吗？这是否表明可执行文件没有问题，问题很可能出在我的板的文件系统上？

下面是代码：

```
#include <QApplication>
#include <QPushButton>

int main(int argc, char *argv[])
{
QApplication app(argc, argv);

QPushButton hello("Hello world");
hello.resize(100, 30);

hello.show();
return app.exec();
} 
```

可执行文件由以下命令生成：

```
qmake -project
qmake
make 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:31:33.527

很可能 gdb 被移植到在 ARM 目标上运行，但如果缺少它或为了便于调试，您应该使用 gdb 远程调试。 [http://sourceware.org/gdb/onlinedocs/gdb/Remote-Debugging.html#Remote-Debugging](http://sourceware.org/gdb/onlinedocs/gdb/Remote-Debugging.html#Remote-Debugging)

Gdbserver 是应用程序应该在目标上运行。以下是演示如何使用它。（从维基百科复制）

目标设置：

```
remote$ gdbserver :2345 hello_world
Process hello_world created; pid = 2509
Listening on port 2345 
```

主机设置：

```
local$ gdb -q hello_world
Reading symbols from /home/user/hello_world...done.
(gdb) target remote 192.168.0.11:2345
Remote debugging using 192.168.0.11:2345
0x002f3850 in ?? () from /lib/ld-linux.so.2
(gdb) continue
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0x08048414 in main () at hello_world.c:10
10              printf("x[%d] = %g\n", i, x[i]);
(gdb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:28:15.780

因此，您在 LD_LIBRARY_PATH 之后提到您的问题已解决。在设置 LD_LIBRARY_PATH 之前，如果您的应用程序给出错误找不到 libQt，那么这意味着您没有 Qt，但是您的应用程序给出了这个 Seg Fault，这意味着您有库但不是正确的库，所以我们可以说您有多个安装Qt 在您的文件系统上。

您现在指向的一个已为您当前的硬件正确编译，但另一个未为您的硬件编译，导致 Segfault 并且此安装位于您的库搜索路径中。

可以从下面确定此段故障的一个可能原因。

以下是一些 CFLAGS，如果没有为任何特定硬件正确设置，编译的应用程序/库会在运行时导致 Seg 错误。

-march -mtune -mfpu

因此，如果您的二进制/库是使用 say -march=armv5a 编译的，并且您在 ARM9 上运行它，那么它将像这样崩溃。

另请注意，并非所有应用程序都使用这些标志，通常这些标志是优化标志并由基本系统库（即 Qt、Glib、bison、Gtk 等....）使用。

即使您编写了一个简单的基于 C 的 hello world 应用程序并且您的 glibc 没有针对您的硬件进行编译，您也会遇到 Seg 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T13:58:14.983

**作者回复：**

造成这种“分段故障”的原因，恰恰是板子的软件差异。具体来说，环境变量 LD_LIBRARY_PATH 是在故障板中预定义的。我通过命令添加了我的路径

```
export LD_LIBRARY_PATH=$LD_LIBRARAY_PATH:/my/qt/path 
```

因此，预定义的路径导致了问题（仍然不知道以什么方式）。

如果我将命令更改为

```
export LD_LIBRARY_PATH=/my/qt/path 
```

可执行文件有效。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-06T13:52:35.337

作为一般规则，您不应该创建从`QObject`堆栈上派生的对象，因为 QMetaObject 系统管理具有父子关系的对象的生命周期，因此会冒着`free()`堆栈内存的风险。****

# android - 在 android 应用程序中存储大型结构化文本

> ID：12296220
> 
> 赞同：4
> 
> 时间：2012-09-06T08:44:35.660
> 
> 标签：android, xml, string, sqlite, text

存储一些结构化文本最合适的方式是什么？文本将是“书籍”的集合。每本书包含一个文章集合，每篇文章都有一个标题和一个正文。

我能想到的方法是：

1.  使用 sqlite 创建数据库

2.  在 assets 中写一个 xml 文件

3.  将它们放入 res/value/string

4.  使用java字符串

哪种方法最适合我的情况？除了上面列出的方法之外，还有更好的方法吗？

提前致谢。

==========================

编辑：是的，数据可以看作是静态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:48:43.867

`res/assets`如果您的数据是静态的（它不会改变），那么XML 或您喜欢的任何其他格式是首选方式。

例如，如果你想处理从 webapp 收集的动态数据，那么你应该使用内置的 SQLite 数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:49:56.560

如果您正在寻找持久存储，那么我建议您使用小型 SQLite 数据库。您也可以将它存储在 XML 文档中，然后使用 ContentProvider 来抽象您对书籍的访问，但是您必须自己编写 I/O 和 XML 解析操作。

# javascript - Backbone.js：一次请求加载多个集合

> ID：12296221
> 
> 赞同：1
> 
> 时间：2012-09-06T08:44:37.780
> 
> 标签：javascript, backbone.js

此时我的代码分别获取每个集合，但考虑到相同的请求是一起发出的，我希望它在一个请求中加载集合。

如果我要合并所有，这就是我的请求响应的样子：

```
[{id: 5, milestoneName: 'some milestone', tasks: [{id: 1, taskName: 'first task', dueDate: 'Jan 15'}, {id: 2, taskName: 'second task', dueDate: ''}]},{id: 6, milestoneName: 'some other milestone', tasks: [{id: 3, taskName: 'third task', dueDate: 'Jan 16'}, {id: 4, taskName: 'fourth task', dueDate: ''}]}] 
```

基本上，有包含任务的里程碑。此时里程碑集合获取里程碑，当它们被获取时，任务集合（每个里程碑的）被初始化并获取任务。这可能需要相当长的时间（2-3 秒，这很明显）。如果我可以在一个请求中加载它们，一切都会更快。

```
milestoneModel = Backbone.Model.extend({});

milestoneCollection = Backbone.Collection.extend({
  url: 'http://some-url',
  model: milestoneModel
});

taskModel = Backbone.Model.extend();

taskCollection = Backbone.Collection.extend({
  url: 'http://task-url',
  model: taskModel
}); 
```

我希望 taskCollection 成为 each 的一部分，`milestoneModel`并在此请求响应到达后立即重置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:03:53.793

啊。嵌套模型并获取所有内容。:-) 基本上，让您的服务器准确发送您发送的内容。您的嵌套任务集合的 JSON 结构可以正常工作。这就是你要做的。

在您的里程碑模型中，您修改解析以查找属性，`tasks`然后相应地处理它。例如：

```
parse: function(response) {
    if (_.has(response, 'tasks')) {
        if (this.tasks) {  // Check if this model has a tasks collection already defined
            this.tasks.reset(response.tasks); // It does, so reset it with data
        } else {
            this.tasks = new taskCollection(response.tasks); // It doesn't, so create one
        }
        delete response.tasks;
        // Don't forget to delete tasks from response or it will be passed onto the model
        // set and appear in your attributes
    }
    return response;  // Do pass on all the other attributes that belong to the model
} 
```

这假设您希望 taskCollection 作为 Milestone 模型的属性而不是属性。它基本上检查任务数组是否作为响应的属性存在，如果有，我们检查模型对象是否已经定义了任务集合。如果是，请使用数据重置集合。如果没有，请使用数据创建集合。

还有一件事。我不确定你是否必须这样做。但我认为，当您`fetch()`收藏 Milestones 时，您可能必须传递一个 option `parse:true`。我有点忘记你什么时候需要这样做，或者这是否是以前 Backbone 的遗物。尝试在您的解析中放置一个 console.log() 以检查您的 Milestone 模型是否正确解析响应。如果不是，请尝试传递该`parse:true`选项。

# c - 使用递归将二叉搜索树转换为双向链表

> ID：12296228
> 
> 赞同：3
> 
> 时间：2012-09-06T08:44:53.070
> 
> 标签：c, algorithm, list, binary-search-tree

如标题中所述，我有一个二叉搜索树。我想使用递归将其转换为排序的双重链接列表。

我的代码

```
 for each node in tree
   find max of left sub-tree and assign its right to present node ,present node left to max 
   find min of right sub-tree and assign its left to present node ,present node right to max 
   and now recursively do same thing to other nodes in BST . 
```

但是这个解决方案效率不高，因为它不止一次地到达每个节点。在我寻求优化代码的过程中，我从谷歌[greatTreeList sollution](http://cslibrary.stanford.edu/109/TreeListRecursion.html)获得了一个链接。我在[SO](https://stackoverflow.com/questions/11511898/converting-a-binary-search-tree-to-doubly-linked-list)中搜索了相同的解决方案，并且对我有用。我不明白解决方案的`append function`内容，因为它包含代码

```
join(alast,b)
join(blast,a) 
```

对于按以下顺序插入节点的树 10,5,9,6,8,7,12,11,13,14

谁能解释一下如何加入（最后，b）加入（爆炸，a）

在每个递归调用中链接节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:08:12.150

为了将二叉搜索树转换为排序的双向链表，通常执行中序深度优先遍历，沿着遍历构建列表。

尝试编写执行中序深度优先遍历并按排序顺序*打印*二叉树项目的代码。从那里，应该很容易完成你的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:15:23.453

我认为您过度考虑了这实际上非常简单的任务-按顺序从二叉树中提取数据就像进行深度优先遍历一样简单-这是二叉树的要点，它非常有效地为您提供了排序中的元素命令。

所以你需要做的是树的标准深度优先遍历，每次你找到一个节点时将它添加到你的链表中。

这个顺序深度优先递归是相当简单的伪代码：

```
Traverse(Node N)
  Traverse(N.left);
  Add N to the linked list
  Traverse(N.right); 
```

我建议您在示例中手动尝试此操作，以便了解它是如何工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T11:48:00.213

扩展元素的答案

```
Traverse(Node N)
  Traverse(N.left);
  Add N to the linked list
  Traverse(N.right); 
```

要将 N 添加到链表中，

你的链表类或数据结构应该有一个 append() 方法或类似的方法。

发挥你的想象力，但像这样：

```
def append(N):
    new_tail = node(val=N, prev=self.tail, next=None)
    self.tail.next = new_tail
    self.tail = new_tail 
```

当然，您还需要在第一次追加时添加 self.head = self.tail。

# c# - 如何清除 FileDialog 的下拉历史记录？

> ID：12296229
> 
> 赞同：1
> 
> 时间：2012-09-06T08:44:57.453
> 
> 标签：c#, drop-down-menu, history, openfiledialog, savefiledialog

似乎我的应用程序正在记住以前保存/打开的文件。如何清除最近的历史记录并防止应用程序将来跟踪保存/打开的文件？

我希望能够从应用程序中执行此操作，而无需客户参与。

*我想该信息已保存到注册表中。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:36:20.027

[最近打开的文件在哪里](http://blog.iordanov.info/?p=89)

然后删除它们：[如何在 C# 中删除注册表值](https://stackoverflow.com/questions/531151/how-to-delete-registry-value-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T12:46:48.010

只是：openfiledialog.FileName = "";

# php - Xpath 获取特定属性值

> ID：12296230
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:45:05.470
> 
> 标签：php, arrays, xml, xpath

我得到了这个 XML：

```
 <shipping_line>
                <article id="960382" quantity="500" />
                <article id="960560" quantity="150" />
                <article id="960426" quantity="250" />
                <article id="1177" quantity="100" >
                    <product>5500070000126273</product>
                    <product>5500070000126264</product>
                    <product>5500070000126255</product>
                    <product>5500070000126246</product>
                    <product>5500070000126237</product>
                </article>
            </shipping_line> 
```

我访问文章元素`atributes`id，`quantity`如下所示：

```
$atrs = $xml->xpath('//article[not(node())]/@quantity | //article[not(node())]/@id'); 
```

现在我想访问我制作的 foreach 的 2 个值，如下所示：

```
 foreach ($atrs as $id => $val ) {

                error_log(print_r($val , true));

            } 
```

我的错误日志显示了这一点：

```
 SimpleXMLElement Object\n(\n    [@attributes] => Array\n        (\n            [id] => 960382\n        )\n\n)\n
 SimpleXMLElement Object\n(\n    [@attributes] => Array\n        (\n            [quantity] => 500\n        )\n\n)\n
 SimpleXMLElement Object\n(\n    [@attributes] => Array\n        (\n            [id] => 960560\n        )\n\n)\n
 SimpleXMLElement Object\n(\n    [@attributes] => Array\n        (\n            [quantity] => 150\n        )\n\n)\n
 SimpleXMLElement Object\n(\n    [@attributes] => Array\n        (\n            [id] => 960426\n        )\n\n)\n
 SimpleXMLElement Object\n(\n    [@attributes] => Array\n        (\n            [quantity] => 250\n        )\n\n)\n 
```

我如何访问这两个值，以便我可以使用类似的函数 `someFunctionUsing2Values($article_no , $quantity)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:55:33.987

这是我的做法：

```
$xml = new SimpleXMLElement('
<shipping_line>
    <article id="960382" quantity="500" />
    <article id="960560" quantity="150" />
    <article id="960426" quantity="250" />
    <article id="1177" quantity="100" >
        <product>5500070000126273</product>
        <product>5500070000126264</product>
        <product>5500070000126255</product>
        <product>5500070000126246</product>
        <product>5500070000126237</product>
    </article>
</shipping_line>');

$nodes = $xml->xpath('//article[not(node())]');
foreach ($nodes as $node)
{
    fn($node['id'], $node['quantity']);
}

function fn($id, $quantity)
{
    echo "$id -> $quantity<br>";
} 
```

# web-services - API 和 Web 服务有什么区别？

> ID：12296231
> 
> 赞同：-2
> 
> 时间：2012-09-06T08:45:07.797
> 
> 标签：web-services, api

谁能给我一些例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T08:47:09.473

Web 服务将公开一个 API。

并非所有 API 都是 Web 服务 - 任何库都会有 API。

API 是一段代码的公共接口——它是您可以从代码中调用的接口。它*可能*是 Web 服务，但也可能是 JavaScript 库、为您的平台编译的库（例如 .NET 程序集、java JAR、PE DLL 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:48:30.770

API 更像是一个抽象概念，它是您的应用程序的编程接口，可以通过多种方法和技术实现。Webservice 是使用 SOAP 和 HTTP 技术的这种概念的特殊实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:54:49.817

API 是代表应用程序编程接口的首字母缩写词，因此它可用于描述您可以在另一个软件中使用以开发应用程序或其一部分的任何软件。例如，允许您打开文件并读取其内容的库/模块/类是一个 API：您不知道它是如何工作的，但您可以在您的软件中使用它来实现可能的复杂目标。

Web 服务通常是能够响应 Web 请求的远程软件，它提供某种功能。通常该词用于表示 SOAP Web 服务，但 RESTful 应用程序也是一种 Web 服务。从广义上讲，任何网站都是它们提供的 Web 服务`a service over the web`，但通常我们不将它们视为该类别，因为我们指的是机器对机器的交互。

现在，如果您认为您的应用程序可以使用 Web 服务来提供部分应用程序逻辑，那么 Web 服务**就是**一种 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:45:14.460

它们是同一回事，Web Service 是一种通过 Web 访问的特定类型的 API。

Facebook - 提供 Web 服务/API

Twitter - 提供 Web 服务/API

Windows - 提供 API

“应用程序编程接口”最初用于描述系统软件（Windows）提供的供应用程序（word、Microsoft Paint 等）使用的接口。从那时起，API 一词已经演变为几乎涵盖任何软件接口。

Web 服务是通过 Web 访问的软件界面。

通过 Web 访问的 IMO API 只能称为 Web 服务，但是大众已经开始称它们为 API - 所以它就是这样。

我在这里写了更多关于 API 的信息：[http ://www.woodstitch.com/resources/what-is-an-api.php](http://www.woodstitch.com/resources/what-is-an-api.php)

# delphi - 如何通过调用 DLL 函数来调试特权指令错误？

> ID：12296234
> 
> 赞同：1
> 
> 时间：2012-09-06T08:45:23.953
> 
> 标签：delphi, debugging, dll

我为我们无法控制的第 3 方 DLL 定义了以下函数：

```
const
  DLL = 'Qarapea.dll';

function QARapid_Open(IniFile: shortstring; Section: shortstring): integer; stdcall; external DLL;
procedure QARapid_EndSearch(); stdcall; external DLL;
function QARapid_Count: integer; stdcall; external DLL;
function QARapid_Search(vs: shortstring): integer; stdcall; external DLL;
function QARapid_FormatAddr(ItemNumber: integer; Buffer: PAnsiChar; BufferSize: integer):     integer; stdcall; external DLL;
procedure QARapid_Close; stdcall; external DLL; 
```

我通过以下方式调用函数：

```
procedure TFormMain.ButtonStaticLookupClick(Sender: TObject);
var
  Res: integer;
  ACode: shortstring;
  IniFile, Section: shortstring;
begin
  try
    ACode := PrepareCode(EditCode.Text);
    IniFile := ExtractFilePath(ParamStr(0)) + 'DllIni.ini';
    Section := 'Default';
    QARapid_Open(IniFile, Section);
    try
      Res := QARapid_Search(ACode);
      Res := QARapid_Count;

    finally
      QARapid_Close;
    end;

  Except on E: Exception do
    MessageDlg(E.Message, mtError, [mbOK], 0);
  end;
end; 
```

在我调用该函数之前，一切似乎都很好`QARapid_Count`，当我收到以下错误时：

> QAS.exe 出现错误消息：0x0012eff4 处的特权指令。进程停止。使用 step 或 run 继续。

我不知道从哪里开始寻找故障，因为 CPU 调试窗口已打开。

怎样才能追查到底出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:48:29.370

阅读[QuickAddress Rapid API 指南](http://www.qas.com/uk/downloads/pdf/support/v3/manuals/rapid/api_rap.pdf)，然后相应地修复您的 Delphi 导入。

# include - Yii 导入或包含

> ID：12296235
> 
> 赞同：10
> 
> 时间：2012-09-06T08:45:31.883
> 
> 标签：include, yii, autoload

我遇到了关于导入 php 文件的问题。

为什么这样有效：

```
include( Yii::getPathOfAlias( 'ext.payu.payU').'.php' ); 
```

但那不是：

```
Yii::import( 'ext.payu.payU'); 
```

?

文件payU.php：

```
include_once( dirname(__FILE__) . "/sdk/openpayu.php"); //this is a valid path
class payU{ } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T09:45:27.310

尝试这样做，`Yii::import('ext.payu.payU', true)`因为默认的单参数`Yii::import()`函数调用意味着：

> `require()`嘿，只需将此路径添加到已知别名列表中，现在不要这样做

你必须这样做`new payU()`才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-07T17:16:38.700

导入的工作方式如下：打开目录并在 php 文件中加载类；条件：类名与文件名无关。

而是 Include ，将所有类加载到 php 文件中

# x86 - 在 C 中为 x86 使用内联汇编的好处？

> ID：12296237
> 
> 赞同：2
> 
> 时间：2012-09-06T08:45:32.727
> 
> 标签：x86, inline-assembly

我对“何时使用 ASM？”这一主题进行了一些谷歌搜索研究。并找到了一些有用的信息。当然，人们提到了广泛的应用领域：HL 代码的大小和速度优化、引导加载程序、嵌入式系统、驱动程序开发、逆向工程等。

现在，我想问一下，在英特尔处理器 (x86) 上使用普通 C 编译器（比如 gcc）无法完成（或非常无效）的 ASM 可以实现什么？

我听说过：

*   实现互斥锁 - 需要直接的 CPU 支持（例如`lock`，，`xchg`）
*   花哨的位操作 - 找到最高/最低位设置为 1 ( `bsf`, `bsr`)，测试一位是否为 1 ( `bt`, `bts`...)，旋转一个值 ( `ror`, `rol`)
*   中断屏蔽 ( `sti`, `cli`)
*   访问特定于 CPU 的信息 ( `cpuid`)

有些人建议在 ASM 中重写标准内存函数（例如 memcpy()）。我认为现在的编译器已经以最佳方式实现了这些操作，但也许我错了？

有人还提到了我不明白的 int/float 转换。我的意思是手动执行这种转换是否也更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:57:09.997

使用编译器不支持的 CPU 架构优势。当您的编译器不足以执行`vectorizations`计算以获得更好的性能时，您也可以使用汇编。考虑在支持 AVX 的 CPU 中使用一条指令进行 32 个字符计算。

*   对设备驱动程序进行直接硬件访问。
*   现场优化速度关键部分的代码。
*   自由使用类结构和元素
*   基于arch.，[使用xmm-ymm 寄存器进行EAX、EBX、...的push 和pop 操作](https://stackoverflow.com/questions/11630571/is-it-safe-to-use-xmm-registers-to-save-the-general-purpose-ones)减少了函数开销。
*   将长 NOP 序列作为可编辑区域（用于自编辑）

# apache-flex - jenkins 服务器上的 flexunit --- ant 无法无错误地构建

> ID：12296239
> 
> 赞同：2
> 
> 时间：2012-09-06T08:45:44.717
> 
> 标签：apache-flex, jenkins, ant, flexunit

我已经在我的 jenkins 中安装了 vncserver、flex sdk 4.6 和 xvnc 插件。

不知道我还需要做什么。

这是我来自詹金斯的最后一条构建错误消息

```
Building in workspace <http://example.com:8080/job/flexproject%20develop/ws/>
Checkout:flexproject develop / <http://example.com:8080/job/flexproject%20develop/ws/> - hudson.remoting.LocalChannel@78da5318
Using strategy: Default
Last Built Revision: Revision 6eca1f87e583b1b7a99825ff075f2e4e4f3b87ea (origin/develop)
Fetching changes from 1 remote Git repository
Fetching upstream changes from git@github.com:simkimsia/STORYBOT.git
Commencing build of Revision 6eca1f87e583b1b7a99825ff075f2e4e4f3b87ea (origin/develop)
Checking out Revision 6eca1f87e583b1b7a99825ff075f2e4e4f3b87ea (origin/develop)
Starting xvnc
[flexproject develop] $ vncserver :16

New 'web1:16 (jenkins)' desktop is web1:16

Starting applications specified in /var/lib/jenkins/.vnc/xstartup
Log file is /var/lib/jenkins/.vnc/web1:16.log

[flexproject develop] $ ant
Buildfile: <http://example.com:8080/job/flexproject%20develop/ws/build.xml>
  [taskdef] Could not load definitions from resource flexTasks.tasks. It could not be found.

clean-all:
   [delete] Deleting <http://example.com:8080/job/flexproject%20develop/ws/build/output/unit/generated-flexunit-config.xml>
   [delete] Deleting <http://example.com:8080/job/flexproject%20develop/ws/build/output/unit>
   [delete] Deleting <http://example.com:8080/job/flexproject%20develop/ws/build/output/report/flexunit>
   [delete] Deleting <http://example.com:8080/job/flexproject%20develop/ws/build/output/report>

clean:
     [echo] Storybot :: clean finished.

test-air:
     [copy] Copying 1 file to <http://example.com:8080/job/flexproject%20develop/ws/build/output/unit>
     [echo] run-flexunit :: setting FLEX_HOME to ${env.FLEX_HOME}
    [mkdir] Created dir: <http://example.com:8080/job/flexproject%20develop/ws/build/output/report/flexunit>

BUILD FAILED
<http://example.com:8080/job/flexproject%20develop/ws/buildsupport/target/test-air.xml>:4: The following error occurred while executing this line:
<http://example.com:8080/job/flexproject%20develop/ws/buildsupport/base/base-macros.xml>:212: The following error occurred while executing this line:
<http://example.com:8080/job/flexproject%20develop/ws/buildsupport/base/base-macros.xml>:174: Please specify, or verify the location for, the FLEX_HOME property.  It is required when testing with 'air' as the player or when using the 'testSource' element.  It should point to the installation directory for a Flex SDK.

Total time: 2 seconds
Build step 'Invoke Ant' marked build as failure
Terminating xvnc.
$ vncserver -kill :16
Killing Xvnc4 process ID 28784
Recording test results 
```

在我的工作区项目中，我运行了 ant build.xml

我明白了

```
jenkins@web1:~/workspace/flexproject$ ant build.xml
Buildfile: /var/lib/jenkins/workspace/flexproject/build.xml
  [taskdef] Could not load definitions from resource flexTasks.tasks. It could not be found.

BUILD FAILED
Target "build.xml" does not exist in the project "flexproject". 

Total time: 2 seconds 
```

当我运行 ant 时在同一个文件夹中

我明白了

```
Buildfile: /var/lib/jenkins/workspace/flexproject/build.xml
  [taskdef] Could not load definitions from resource flexTasks.tasks. It could not be found.

clean-all:
   [delete] Deleting /var/lib/jenkins/workspace/flexproject/build/output/unit/generated-flexunit-config.xml
   [delete] Deleting /var/lib/jenkins/workspace/flexproject/build/output/unit
   [delete] Deleting /var/lib/jenkins/workspace/flexproject/build/output/report/flexunit
   [delete] Deleting /var/lib/jenkins/workspace/flexproject/build/output/report

clean:
     [echo] Storybot :: clean finished.

test-air:
     [copy] Copying 1 file to /var/lib/jenkins/workspace/flexproject/build/output/unit
     [echo] run-flexunit :: setting FLEX_HOME to /opt/flex
    [mkdir] Created dir: /var/lib/jenkins/workspace/flexproject/build/output/report/flexunit

BUILD FAILED
/var/lib/jenkins/workspace/flexproject/buildsupport/target/test-air.xml:4: The following error occurred while executing this line:
/var/lib/jenkins/workspace/flexproject/buildsupport/base/base-macros.xml:212: The following error occurred while executing this line:
/var/lib/jenkins/workspace/flexproject/buildsupport/base/base-macros.xml:174: Could not create test runner from template. 
```

请指教。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:21:57.820

```
Could not load definitions from resource flexTasks.task 
```

您错过了正确设置`flex4.6`目录（`lib/*.jar`内部）路径的提示。

# json - WCF 数据服务 ODATA 使用 JSONP 引发错误

> ID：12296241
> 
> 赞同：0
> 
> 时间：2012-09-06T08:45:51.243
> 
> 标签：json, jsonp, wcf-data-services, odata

好的，我有一个本地托管的 WCF ODATA 服务用于测试目的。然后我有一个 Kendo Grid 尝试使用为 ODATA 配置的 Kendo 数据源查询服务，就像演示一样！

在部署的服务上，我还实现了大家都在谈论的“JSONPSupportBehavior”属性和类！

我仍然在 Fiddler 中得到这个：找不到与请求可接受的 MIME 类型匹配的受支持的 MIME 类型。支持的类型 'application/atom+xml;type=feed, application/atom+xml, application/json;odata=verbose' 不匹配任何可接受的 MIME 类型 'application/json'

这是现在的 IIS 问题还是其他问题？这真让我抓狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:14:25.407

这是在 WCF 数据服务版本中所做的更改。为了返回 JSON 响应（或 JSONP），您需要发送带有值 application/json;odata=verbose 的 Accept 标头。纯“application/json”现在保留给即将到来的 JSON Light 格式。有关更多详细信息，请参阅[http://blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds-5-0.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds-5-0.aspx)。

# javascript - onclick 事件不会在 firefox 或 chrome 中触发

> ID：12296244
> 
> 赞同：0
> 
> 时间：2012-09-06T08:45:55.263
> 
> 标签：javascript, jquery, asp.net, onclick

我正在用 jQuery 编写一些 javascript，以便在我的 asp.net 页面中单击 img 时触发。

img 声明如下：

```
<img id="zoomIn" alt="Zoom In" src="/Images/Plus.png" onclick="zoomIn();" /> 
```

.js 文件功能是：

```
function zoomIn() {
    zoomLevel += 1;
    showMapImage();
}

function showMapImage() {
    //show the location map
    var img_url = "http://maps.google.com/maps/api/staticmap?center=" + $asp("lblCoordinates").html() + "&size=200x150&sensor=false&zoom=" + zoomLevel + "&markers=color:green%7C" + $asp("lblCoordinates").html();
    $("#imgMap").attr('src', img_url);
}

function $asp(serverID) {
    return $("[id$='" + serverID + "']");
} 
```

这在 IE 中运行良好，但在 Chrome 或 Firefox 中运行良好，这让我认为某处有一些我无法发现的简单错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:05:29.313

既然你已经使用过 jQuery，你可以使用

```
$('#zoomIn').click(zoomIn); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:11:56.307

您的页面包含两个具有相同 name\id 的元素：`IMG`具有 ID 属性的 HTML 元素和具有 name的*`"zoomIn"`*javascript 。*`function`**`zoomIn`*

尝试重命名`function zoomIn`或`IMG#zoomIn`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T08:51:38.240

将其包裹在锚标记内并相应地设置样式。

```
<a href="#" onclick="zoomIn();">
    <img id="zoomIn" alt="Zoom In" src="/Images/Plus.png" />
</a> 
```

[http://jsfiddle.net/H57Vg/5/](http://jsfiddle.net/H57Vg/5/)

# jquery-ui - jquery-ui 对话框在点击时滚动到页面底部

> ID：12296248
> 
> 赞同：5
> 
> 时间：2012-09-06T08:46:12.300
> 
> 标签：jquery-ui, scroll, jquery-ui-dialog

我有一个 asp.net 页面，上面有很多东西，它在 jquery 对话框 iframe 中打开另一个页面。对话框由以下打开

```
<a onclick="OpenDialog(params);return false;">click to open dialog<a/>

function OpenDialog(params){
    var url ='Detail.aspx?params;
    $('#frmDialog').attr('src', url);
    $( "#dialog-modal" ).dialog({
        height: 500,
        width: 950,
        title: 'Details',
        modal: true,
        close: function(a,b){refreshPage();}
    });
    return false;
} 
```

除了**单击链接外，**一切都工作得很好法郎

使用 jquery：1.8.0 用户界面：1.8.23

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:07:37.800

最后编辑 jquery-ui css 并将**绝对**定位更改为**固定**.. 符合我的目的。

```
.ui-dialog { position: absolute; padding: .2em; width: 300px; overflow: hidden; } 
```

至

```
.ui-dialog { position: fixed; padding: .2em; width: 300px; overflow: hidden; } 
```

# git - git pull --rebase 将提交者名称更改为我的名字

> ID：12296255
> 
> 赞同：1
> 
> 时间：2012-09-06T08:46:55.253
> 
> 标签：git, rebase, git-rebase

建议我使用 git pull --rebase 以避免 git 在从远程存储库中提取更改时添加的自动合并消息。

这样做时，我看到在 rebase 期间应用在我的存储库上的提交被添加，就好像它们是由我提交的，而不是由原始提交者提交的。

这是标准行为吗？还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:03:06.123

这里没有错：`git rebase`创建新的提交，因为它们有不同的祖先和可能不同的内容，而这些新的提交是由你创建的。

然而，Git 区分了提交名称和日期，以及*作者*姓名和日期，后者是原始提交的名称和日期。

# .net - 如何将控件发送回并在此处冻结？

> ID：12296257
> 
> 赞同：0
> 
> 时间：2012-09-06T08:47:04.987
> 
> 标签：.net, winforms, z-order

我想将控件发送到其容器的背面。无论从同一个容器中创建和删除其他一些控件，我都不希望这个控件失去它的位置。

我没有更好的方法来实现这一点：

```
// Force this control to stay back 
private void panel1_ControlAdded(object sender, ControlEventArgs e) 
{
    pictureBox1.SendToBack(); 
} 
```

这对我来说看起来有点过分了。这是实现这一目标的更好方法吗？

**编辑：**

有人告诉我，controls.add 默认将控件放在前面。我无法重现这种行为，或者我在某处错过了重点。这是我尝试过的：

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication4
{
    public partial class Form1 : Form
    {
        System.Windows.Forms.Button button1;

        public Form1() { InitializeComponent(); }

        void InitializeComponent()
        {
            this.button1 = new System.Windows.Forms.Button();
            this.pictureBox1 = new System.Windows.Forms.PictureBox();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
            this.SuspendLayout();
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(225, 182);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(139, 39);
            this.button1.TabIndex = 0;
            this.button1.Text = "button1";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // pictureBox1
            // 
            this.pictureBox1.Image = global::WindowsFormsApplication4.Properties.Resources.Tulips;
            this.pictureBox1.Location = new System.Drawing.Point(36, 26);
            this.pictureBox1.Name = "pictureBox1";
            this.pictureBox1.Size = new System.Drawing.Size(299, 175);
            this.pictureBox1.SizeMode = System.Windows.Forms.PictureBoxSizeMode.StretchImage;
            this.pictureBox1.TabIndex = 1;
            this.pictureBox1.TabStop = false;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(376, 233);
            this.Controls.Add(this.button1);
            this.Controls.Add(this.pictureBox1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.Load += new System.EventHandler(this.Form1_Load);
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
            this.ResumeLayout(false);

        }

        private PictureBox pictureBox1;

        Point xy;

        // Add a button or anything else
        private void button1_Click(object sender, EventArgs e)
        {
            var ctl = new Button();
            ctl.Location = xy;

            this.Controls.Add(ctl);

            xy.Offset(10, 10);
        }

        // First of all, send the picture box to back
        private void Form1_Load(object sender, EventArgs e)
        {
            pictureBox1.SendToBack();
        }
    }
} 
```

因此，您可以注意到，当我多次点击 button1 时，新添加的按钮（可以用文本框替换...）位于已在 Load 事件中发送回的图片框*后面。*所以我绝对不能依赖 Control.Add 假定的默认行为。

![在此处输入图像描述](../Images/a0ab4e10e5187a3f5492d7dee0221d64.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:14:50.717

由于经过几天的测试，这个技巧似乎做得很好，我觉得没有必要进一步挖掘。

```
// Force this control to stay back  
private void panel1_ControlAdded(object sender, ControlEventArgs e)  
{ 
    pictureBox1.SendToBack();  
} 
```

但是，我仍然想知道为什么 Control.Add 没有按应有的方式行事。

# mysql - MySQL查询优化LIKE term% ORDER BY int

> ID：12296258
> 
> 赞同：3
> 
> 时间：2012-09-06T08:47:05.887
> 
> 标签：mysql, indexing, query-optimization

我的问题是关于在使用前缀匹配时处理与 int COLUMN 结合的 VARCHAR 上的 MySQL 索引。例如，如果我有这样的查询：

```
SELECT * FROM tbl WHERE name LIKE 'query%' ORDER BY weight DESC LIMIT 5 
```

考虑到我有一个索引一个名称-> 权重，该索引是否需要找到前缀的所有外观，`query`然后是 ORDER BY，或者即使使用前缀匹配 (%)，他是否也保持交叉计算索引。我对此感到困扰，因为对于流行的名称（例如 query=john），我可能会发现自己搜索 john 的所有外观很长时间，这将使限制变得无用，并且查询变得缓慢，因为我正在处理有一个大数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:18:42.830

您问了另一个问题“创建一个最适合通过 4000 万个名称进行通配符搜索的索引”。好的，你有 4000 万条记录。

现在考虑以下公式：

```
x = COUNT(DISTINCT values in a column) / COUNT(values in a column) 
```

列上的索引更好，越接近`x`1。如果为 1，则所有值都是不同的，没有重复，因此索引非常快。

现在您正在寻找“john%”。那是4个字母和一个开放式结尾。哪些字母并不重要，您的数据库必须处理 26*26*26*26=456976 个不同的值。把它放在上面的公式和你的 4000 万条记录中。你得到一个`x`0,0114244。

我不知道阈值是多少，但 IIRC 是 0,1 什么的。因此，如果您`x`高于 0,1，则使用索引，如果低于，则不使用。

为什么呢？使用索引甚至会减慢速度，导致您的数据库必须查看索引，在该索引中查看物理硬盘驱动器上哪个位置的相应记录，然后获取该记录。因此，当 x 低于 10% 时，只进行全表扫描会更快。

总结一下：像你这样只用一个弱索引过滤 4000 万条记录是毫无用处的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:21:26.420

假设它`'query'`的长度等于或短于 的索引前缀`name`：

1.  届时将对 on 上的复合`BTREE`索引`(name, weight)`进行排序。从概念上讲：`name``weight`

    ```
    +---------+--------+---------+
    | 姓名(7) | 重量 | 地址 |
    +---------+--------+---------+
    | 查询aa | 500 | 0x1.... |
    | 查询aa | 500 | 0xe.... |
    | 查询aa | 498 | 0x8.... |
    | 查询aa | 491 | 0xb.... |
    | 查询aa | 第486章 0xc.... |
    | 查询aa | 430 | 0x3.... |
    | 可查询 | 600 | 0x2.... |
    | 可查询 | 第592章 0x7.... |
    | 可查询 | 550 | 0x4.... |
    | 可查询 | 321 | 0xa.... |
    | 可查询 | 321 | 0x6.... |
    | 可查询 | 304 | 0x9.... |
    | 可查询 | 297 | 0x5.... |
    | 查询bc | 800 | 0xd.... |
    : : : :

    ```

2.  MySQL 可以非常快速地遍历这样的索引，以找到过滤器定义的范围内每个索引前缀的前 5 个权重`name LIKE 'query%'`（我不确定它是否执行此步骤，但如果它没有执行，我会感到惊讶）：

    ```
    +---------+--------+---------+
    | 姓名(7) | 重量 | 地址 |
    +---------+--------+---------+
    | 查询aa | 500 | 0x1.... |
    | 查询aa | 500 | 0xe.... |
    | 查询aa | 498 | 0x8.... |
    | 查询aa | 491 | 0xb.... |
    | 查询aa | 第486章 0xc.... |
    | 可查询 | 600 | 0x2.... |
    | 可查询 | 第592章 0x7.... |
    | 可查询 | 550 | 0x4.... |
    | 可查询 | 321 | 0xa.... |
    | 可查询 | 321 | 0x6.... |
    | 查询bc | 800 | 0xd.... |
    : : : :

    ```

3.  此时，MySQL 必须对结果执行文件排序：

    ```
    +---------+--------+---------+
    | 姓名(7) | 重量 | 地址 |
    +---------+--------+---------+
    | 查询bc | 800 | 0xd.... |
    | 可查询 | 600 | 0x2.... |
    | 可查询 | 第592章 0x7.... |
    | 可查询 | 550 | 0x4.... |
    | 查询aa | 500 | 0x1.... |
    | 查询aa | 500 | 0xe.... |
    | 查询aa | 498 | 0x8.... |
    | 查询aa | 491 | 0xb.... |
    | 查询aa | 第486章 0xc.... |
    | 可查询 | 321 | 0xa.... |
    | 可查询 | 321 | 0x6.... |
    : : : :

    ```

4.  只有这样它才能使用前 5 个结果从表中获取相关记录：

    ```
    +---------+--------+---------+
    | 姓名(7) | 重量 | 地址 |
    +---------+--------+---------+
    | 查询bc | 800 | 0xd.... | --> 从表中获取
    | 可查询 | 600 | 0x2.... | --> 从表中获取
    | 可查询 | 第592章 0x7.... | --> 从表中获取
    | 可查询 | 550 | 0x4.... | --> 从表中获取
    | 查询aa | 500 | 0x1.... | --> 从表中获取
    +---------+--------+---------+

    ```

如果`'query'`比的索引前缀长*，*`name`那么 MySQL 必须在上面的步骤 1 中对表执行查找，以便充分过滤随后排序的记录。

# git - 当该文件夹中已经存在 .gitignore 时如何添加文件？

> ID：12296261
> 
> 赞同：0
> 
> 时间：2012-09-06T08:47:14.533
> 
> 标签：git, gitignore

正如我被告知的那样，git 无法识别文件夹*本身*。为了让文件夹在 repo 上，而不是里面的文件，我们确实在该文件夹内创建了一个 .gitignore 文件，其中包含以下内容：

```
# Ignore everything in this directory
*
# Except this file
!.gitignore 
```

然而，在那个目录中，我们现在需要添加一个应该被 git 跟踪的新文件。

我们该如何进行？

我们应该按照以下顺序执行步骤吗？

1.  改成：

    ```
    # Ignore everything in this directory
    *
    # Except this file
    !.gitignore
    !mynewfile.php 
    ```

2.  `git add mynewfile.php`

3.  `git commit -a -m "added new file inside specific folder"`

4.  `git push`（以便我的远程集线器知道这一点并与主服务器同步，以便所有人保持平等）。

或者，我们应该采取不同的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:55:56.110

您建议的步骤是可以的，但是步骤 1) 是不需要的，因为不需要更改您的`.gitignore`文件，只需添加`--force`标志并提交即可。

列出文件`.gitignore`告诉 git 它们是不被跟踪的，但它不会阻止你跟踪它们。它仅适用于未跟踪的文件，在其中列出已跟踪的文件并没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:31:48.720

`git add -f the_ignored_file`

允许您添加忽略的文件。

# uitextview - 文本开始编辑后 UITextView 手势点击识别器不起作用

> ID：12296262
> 
> 赞同：2
> 
> 时间：2012-09-06T08:47:20.013
> 
> 标签：uitextview, uigesturerecognizer, tap

我正在设置一个带有点击手势识别器的 UITextView，以便在点击 textView 后我可以做各种事情。一方面，我希望文本视图在被点击后成为“选定”视图，如下所示：

```
selectedTextView = (UITextView *)recognizer.view; 
```

它可以工作，除了在文本视图进入文本编辑模式、陶醉键盘并允许文本编辑之后，此后我的自定义点击手势识别器不再工作。

有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:10:31.060

您可能只需要返回`YES`以`-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer`获取您的识别器。

~~看起来，当`UITextView`变成`firstResponder`（键盘出现）时，Apple 的代码会从 中删除所有手势识别器`UIView`。`UITextViewDelegate`您可以在's中再次添加您的识别器`–textViewDidBeginEditing:`。辞职时似乎也删除了识别器，`firstResponder`因此您还必须将其添加到`-textViewDidEndEnding:`~~

s也是如此`UITextField`。

# objective-c - 在 NSXMLParser 委托方法中解码百分比转义字符串

> ID：12296263
> 
> 赞同：1
> 
> 时间：2012-09-06T08:47:20.193
> 
> 标签：objective-c, ios, escaping, nsxmlparser

我正在从服务器数据中获取 UTF8 编码数据，`Less%20than%20100`但我需要这些数据`Less than 100`（解码格式），我的 NSXMLParsing 委托方法就像

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict {
if([elementName isEqualToString:@"option"]) {

            dict = [[NSMutableDictionary alloc]init];
            [dict setValue:[attributeDict objectForKey:@"text"] forKey:@"text"];/* Here itself i need to decode & save in to my dict */
} 
```

如何解码这些数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:52:39.390

解码 xml 后，使用以下`stringByReplacingPercentEscapesUsingEncoding:`方法`NSString`：

```
NSString *decoded = [text stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

请参阅[此处的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

# ios - 更改 iTunes Connect 中的应用程序名称是否会使旧名称可供其他开发人员使用？

> ID：12296264
> 
> 赞同：0
> 
> 时间：2012-09-06T08:47:22.503
> 
> 标签：ios, app-store-connect

我不小心使用了某人的商标作为我的应用名称。我将上传一个新的二进制文件并在 iTunes 连接中更改名称。旧名称现在是否可供其他开发人员使用？因为我想帮助商标所有者将名称注册到他的开发者帐户中，以获取全新的应用程序。

从我将已上传的应用程序以新名称发布到应用程序商店与其他人可以使用该名称之间的时间范围是多长时间？也许介于“开发者发布”和“准备出售”之间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T19:01:55.833

是的。我不知道是否有任何已发布的文档，但您可以通过更改名称自行验证，然后创建一个新的测试应用程序，看看它是否允许您选择以前的名称。

# regex - 用正则表达式替换字符串

> ID：12296265
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:47:26.280
> 
> 标签：regex

我想仅使用正则表达式替换文本的一部分。我想用三颗星替换密码字符串。我不想使用 C# Regex.Replace 等。我想通过正则表达式来做。可能吗？

（原文）密码：12345

（修改后的文本）密码：* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:33:20.877

如果您绝对想在 Regex 中执行此操作（这不是很聪明），您可以将`.`（任何字符）替换为`*`：

```
string passwordString = Regex.Replace("MyPassword", ".", "*");
Console.WriteLine(passwordString); 
```

相反，您应该这样做：

```
string password = "MyPassword";
string passwordString = "";
for (int i = 0; i < password.Length; i++) {
    passwordString += "*";
}
Console.WriteLine(passwordString); 
```

# sql-server - 在 MSSQL Management Studio 中自动将 GRANT EXECUTE 添加到 Drop&Create 脚本

> ID：12296269
> 
> 赞同：2
> 
> 时间：2012-09-06T08:47:41.753
> 
> 标签：sql-server, sql-server-2008

MSSQL 中有一个上下文菜单 - 脚本存储过程为 -> DROP 和 CREATE

但是当我生成过程时，它不包含现有的 GRANT EXECUTE 角色。如何添加（自动！）它来生成脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:04:54.793

在 SSMS 中，转到工具、选项、SQL Server 对象资源管理器、脚本，然后在对象脚本选项部分中，将脚本权限更改为 True。

# c# - 如何在 C# 中运行多个任务？

> ID：12296271
> 
> 赞同：4
> 
> 时间：2012-09-06T08:47:43.863
> 
> 标签：c#, parallel-processing, task

如何修改以下代码并使其同时运行多个任务？

```
foreach (SyndicationItem item in CurrentFeed.Items)
{
    if (m_bDownloadInterrupted)
    break;

    await Task.Run( async () =>
    {
        // do some downloading and processing work here
        await DoSomethingAsync();
    }
} 
```

我还需要中断并停止该过程。因为我的 DoSomethingAsync 方法读取标签（一个全局布尔值）来停止进程。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T08:49:41.870

不，这不会同时运行它们 - 您正在*等待*每个完成，然后再开始下一个。

您可以将每次`Task.Run`调用的结果放入一个集合中，然后*在*启动它们之后等待。[`Task.WhenAll`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.whenall.aspx)

 *（很遗憾`Parallel.ForEach`没有返回`Task`您可以等待的结果。可能有一个对异步更友好的版本......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:58:42.173

这将同时处理这些项目。

```
 Parallel.ForEach(CurrentFeed.Items, DoSomethingAsync) 
```

为了能够取消，您可能需要一个 CancellationToken。

```
 CancellationTokenSource cts = new CancellationTokenSource();
  ParallelOptions po = new ParallelOptions();
  po.CancellationToken = cts.Token;

  // Add the ParallelOptions with the token to the ForEach call
  Parallel.ForEach(CurrentFeed.Items,po ,DoSomethingAsync)

  // set cancel on the token somewhere in the workers to make the loop stop
  cts.Cancel(); 
```

有关详细信息，请参阅（以及其他来源）[http://msdn.microsoft.com/en-us/library/ee256691.aspx](http://msdn.microsoft.com/en-us/library/ee256691.aspx)*

# jquery - jquery 匿名函数第 2 部分

> ID：12296272
> 
> 赞同：0
> 
> 时间：2012-09-06T08:47:45.510
> 
> 标签：jquery, function

我有以下代码，我在 safari 中获得了一个“匿名函数”功能......有人能解释一下吗？

```
$(document).ready(function(){
    $('ul.nav').toggleClass('dropmenu');
    $('.nav_menu > ul').dropmenu({
        effect : 'slide',
        speed : 250,
        timeout : 0,
     });
 }); 
```

它似乎指向`timeout :0`,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:50:54.193

您的代码中有错误。后面的尾随`,`（逗号）`timeout : 0`

匿名函数在您的示例的第一行代码中启动

```
$(document).ready(function() { //<-- anonymous function
    $('ul.nav').toggleClass('dropmenu');

    $('.nav_menu > ul').dropmenu({
        effect: 'slide',
        speed: 250,
        timeout: 0
    });
});​ 
```

具有大量匿名函数的堆栈跟踪可能难以跟踪，可能值得多敲几下键来命名您的函数

```
$(document).ready(function showDropMenu() {
    $('ul.nav').toggleClass('dropmenu');

    $('.nav_menu > ul').dropmenu({
        effect: 'slide',
        speed: 250,
        timeout: 0
    });
});​ 
```

这样调试器将能够使用函数的名称，而不是简单的“匿名函数”

在最外层的函数中写`"use strict";`为第一行可能也是一个好主意。这将告诉解释器在某些常见错误上失败，使您更容易调试

# r - 在R中找到两个数据帧之间的公共ID

> ID：12296279
> 
> 赞同：3
> 
> 时间：2012-09-06T08:48:16.563
> 
> 标签：r, dataframe

有以下数据框：

```
id1<-c(1,2,3,4,5)
spent<-c(10,20,30,40,50)
id2<-c(1,3,4)
x<-c(1,2,2)
df1<-data.frame(id1,spent)
df2<-data.frame(id2,x) 
```

我需要找到`df1`其中也存在的 id，`df2`并将它们的所有信息导出到一个新的数据框（比如说`df3`）。在此基础上`df3`应如下所示：

```
 id1     spent
   1         10
   3         30
   4         40 
```

如果您能帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T08:52:51.510

使用`merge`see`?merge`获取有关`by.x`和`by.y`参数的信息

```
merge(df1, df2, by.x="id1", by.y="id2")[,-3] # this is the desired output you showed
  id1 spent
1   1    10
2   3    30
3   4    40

merge(df1, df2, by.x="id1", by.y="id2") # this is with "all their information"
  id1 spent x
1   1    10 1
2   3    30 2
3   4    40 2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T10:27:11.693

您可以使用该包，如果您要合并很多 ID `data.table`，它可能比使用更快。`merge`例如，

```
library(data.table)

dt1 <- data.table(id1, spent, key = "id1")

dt1[J(unique(df2$id2))]
#    id1 spent
# 1:   1    10
# 2:   3    30
# 3:   4    40 
```

nb`unique`也可能不是必需的，但我将其包括在内，以防真实数据包含重复`id2`的 s。

**编辑**是必要的`J()`，另请参阅 Matthew Dowle 的评论。

# objective-c - 从 NSDictionary 中提取数字

> ID：12296280
> 
> 赞同：0
> 
> 时间：2012-09-06T08:48:26.837
> 
> 标签：objective-c, nsdictionary

我正在使用 NSNmuber- `number`（用于警报）设置字典：

```
#define kTimerNameKey @"kTimerNameKey"
 NSDictionary *userInfo = [NSDictionary dictionaryWithObject:number forKey:kTimerNameKey]; 
```

当我收到代表通知时，我有这个：

```
NSDictionary *userInfo = notification.userInfo; 
```

我可以记录它，看看它没问题。

我的问题是，我如何从中提取`userInfo`钥匙的号码？如果我使用`objectForKey:kTimerNameKey`，他不知道这个键（它在另一个类中）

所以，从 userInfo 中提取代表的数字是我的问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:55:42.263

```
for (NSString* key in userInfo)
{
    int value = [[userInfo objectForKey:key] intValue];
} 
```

或将密钥传递给另一个班级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:52:16.667

尝试将此类转换为 int，例如 [[userinfo objectForKey:kTimerNameKey] intValue];

希望它有效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:55:39.993

难道你不能只包含 kTimerNameKey 定义的 #import "YourOtherClass.h" 吗？

否则，如果您使用 NSNotification 发布通知，则可以传递数字的值：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"notif_sendNumber" Object:myNumber]; 
```

然后在你的接收班，你可以去：

```
-(void)myReceivingMethod:(NSNotification *)notification
{
    NSNumber *receivedNumber = (NSNumber *)[notification object];
} 
```

# javascript - 使用正则表达式选择圆括号内的内容

> ID：12296290
> 
> 赞同：1
> 
> 时间：2012-09-06T08:48:51.547
> 
> 标签：javascript, regex

我正在尝试将内容放入圆形支架中，

例如..如果我们有类似的内容`var str="test exp (content needed)"`

我正在尝试将 str 值设为“需要的内容”；如何使用正则表达式实现它？如果字符串不止一次出现圆括号，我想看看情况`var str="test exp (content needed) test (tst)"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:51:03.997

尝试这个：

```
var m = /\(([^)]*)\)/.exec(str);
str = m[1]; 
```

请注意：请记住，对于简单的情况，最好使用常规字符串方法，例如`indexOf`and `substring`，因为它们通常更快，更清晰。例如：

```
var i1 = str.indexOf("("), i2 = str.indexOf(")");
str = str.substring(i1, i2); 
```

如果你想匹配括号之间的所有序列，你可以试试这个：

```
var m = str.match(/\([^)]*\)/g); 
```

现在`m`包含括号之间的所有内容，*包括*括号。如果您只想获取内部内容，请尝试以下操作：

```
m = m.map(function(match) {return match.slice(1, -1);}); 
```

请记住，这不适用于 IE8 和更早版本，因为它不支持`map`数组的方法。要么使用 polyfill，要么使用经典`for`循环。

# reporting-services - SSRS 页脚中的索引表

> ID：12296294
> 
> 赞同：2
> 
> 时间：2012-09-06T08:49:09.510
> 
> 标签：reporting-services, ssrs-2008

我正在构建一个 SSRS 报告，我想要一个索引表来显示由表完成的每个组的页面索引，在报告的页脚中，因为我的报告中有很多页面，但是 SSRS 2008 不允许访问正文部分中的页码，以便将其传递到页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:15:48.040

您可以通过代码获取。首先添加一个包含要索引的组标题的文本框，然后转到报告->报告属性->代码并添加以下代码：

Dim groupNo As Integer = 1 Dim sw As System.IO.StreamWriter Dim max As Integer = 0 Dim text As String = ""

```
Public Function GetGroupPageNumber(ByVal groupName As String, ByVal pagenumber As Integer) As Object

    If Not String.IsNullOrEmpty(groupName) Then

        text += groupName
        max = groupName.Length

        While (max < 50)
            text += " "
            max += 1
        End While

        Dim index As Integer
        For index = 0 To 20
            text += " "
        Next index

        text += pagenumber.ToString() & vbCrLf

    End If

    Return text

End Function 
```

在页脚部分添加将显示索引表并执行代码并将报告标题和页码传递给它的文本框： Code.GetGroupPageNumber(ReportItems!ReportTitle.Value,Globals!PageNumber)

# java - 拆分二进制文件并向每个块添加数据？

> ID：12296295
> 
> 赞同：0
> 
> 时间：2012-09-06T08:49:09.990
> 
> 标签：java, file, binding, split

我必须在一个项目中工作，我必须将二进制文件转换为自定义文件格式，这需要拆分文件，向其中添加一些数据，然后将其重新打包到新文件中。

例如

我有一个 1 MB 的文件，我必须将其拆分为固定长度的块，然后添加一些数据作为标题。之后，整个文件将被重新打包成一个新文件。

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:48:36.700

首先，您使用[DataInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)将 x 字节的块读取到单个字节数组中，其中 x 是您的块大小。我建议将这些字节数组存储在[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)中。

然后创建一个[DataOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html)来创建新文件。

最后，您使用 for 循环遍历您的 ArrayList，并将数组的内容写入 DataOutputStream，之前或之后是您需要为每个块添加的其他数据。

我希望我能帮助你。当有什么不清楚的时候，随时问。

# eclipse - 使用 RAD(Eclipse) + Commerce + WebSphere 确定本地发布位置

> ID：12296298
> 
> 赞同：1
> 
> 时间：2012-09-06T08:49:16.027
> 
> 标签：eclipse, websphere, rad, websphere-commerce, wcs

我是 websphere 的新手，想从 RAD 中找到一些部署到我的本地服务器上的 jsp。我怎么知道那个位置是什么？应用程序部署到 websphere 上的哪个文件夹？

**编辑：**我认为查看 Eclipse 的“服务器”配置的一些标准方法将帮助我解决这个问题。考虑“http://stackoverflow.com/q/3515089/977087”和“http://stackoverflow.com/q/1012378/977087”。所以这是一个可能的重复。

还需要确保不存在任何项目/工作区部署脚本（RAD 中的 WebSphere Commerce 项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:52:57.507

您是在寻找原始 JSP 还是编译后的 JSP？

后者有时对调试很有用，可以在 WAS 配置文件目录下找到`<wasprofiledir>/temp/<hostname>/<server>/<app>/...`

# c# - 代理、包装器或外观类之间有什么区别

> ID：12296299
> 
> 赞同：70
> 
> 时间：2012-09-06T08:49:23.017
> 
> 标签：c#, .net, design-patterns

代理、包装器或外观类之间有什么区别

它们对我来说似乎都是一样的，它们采用一个实现，封装它，然后在调用封装对象方法的包装器/代理/外观类上调用方法。

请通过示例说明它们为何不同。

谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-06T09:00:49.930

区别主要在于意图。最终，他们都会“采取实施并包装它”，但传达差异很重要。

包装器模式（又名适配器模式）采用一个接口并将其适配到另一个接口。

```
interface A { void Foo(); }
interface B { void Bar(); }

class AAdapter : B { 
   private A a;
   public AAdapter(A a) { this.a = a; }

   void Bar() {
      a.Foo(); // just pretend foo and bar do the same thing
   } 
} 
```

代理实现一个接口的目的是提供对其他东西（通常是大东西）的访问。一个很好的例子是远程过程调用。

```
interface PiCalculator {
    double CalculatePi();
}

class Ec2PiCalculatorProxy : PiCalculator {
    public double CalculatePi() {
       // Fire up 10000 of computers in the cloud and calculate PI
    }
} 
```

我们称它为代理而不是包装器，以传达它正在通过隧道连接到另一个组件以实现结果。我认为这与适配器模式不同，因为那是关于转换接口的。

外观不同，因为它将多个类的协作隐藏在更简单的接口或类后面。

```
class Facade {
  private A a;
  private B b;

  // Provides an interface to A and B by delegating to these members  

  public void DoSomethingWithAAndB() {
    MagicToken x = a.DoSomethingAndGetAResult();
    b.DoSomethingWithMagic(x);
  } 
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-06T08:58:42.710

如您所见，许多设计模式具有相同的结构。

不同之处在于它们存在的原因——它们存在的*原因*。

代理在那里充当代表远程对象的本地对象。

包装器用于包装现有对象以扩展/更改其行为。

外观的存在是为了简化复杂的 API 并改为公开一个简单的 API。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-06T12:10:06.757

AFAIK 没有称为包装器的模式。似乎更像是一种行为模式的通用定义。

**正面**

不要包装一个类，而是几个。目的是使复杂的 API 更易于使用。.NET 示例是`WebClient`使用`HttpWebRequest`/`HttpWebResponse`

**代理人**

代理充当原始对象，但包含其他逻辑，例如处理连接或完成后清理资源。

如果您使用 WCF，您可以通过提供 WCF 服务接口来生成客户端代理。

**附加模式**

还有一些模式也是“包装器”：

*   适配器
*   装饰器

# javascript - 在 Backbone.js 中将变量分配给窗口对象

> ID：12296302
> 
> 赞同：4
> 
> 时间：2012-09-06T08:49:35.777
> 
> 标签：javascript, backbone.js, requirejs

我正在开发一个大型 Backbone.js 应用程序。代码是模块化结构的，使用`require.js`. 现在我看到很多主干代码和教程这样做：

```
window.app = ( window.app || {} ); 
```

在他们将模型定义和 Collection 实例分配给该全局对象之后，如下所示：

```
Task = Backbone.Model.extend({ /*...*/ });
Tasks = Backbone.Collection.extend({ /*...*/ }); 

window.app.Task = Task;
window.app.Tasks = new Tasks();
// do this with all your models and collections 
```

我喜欢这种方法，因为它很简单，而且不必处理在何时何地实例化一个集合。但是，首先使用将代码分成微小的位，然后将所有代码一起分配给全局变量，这似乎是错误的`require.js`（除了全局变量在javascript中通常是不好的代码样式）。

那么您对此有何看法，这种方法的优缺点是什么，您如何处理 Backbone 中的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T06:50:24.003

首先，污染全局名称空间并不是什么大问题，因为您可以将所有模型包装在自己的名称空间中：

```
app = (app || {} );
app.Task = Backbone.Model.extend({ /*...*/ });
app.Tasks = Backbone.Collection.extend({ Model:app.Zask }); 
```

当涉及到 requirejs 时，它取决于您项目的大小。我认为对于较小的项目，你可以不用。使用 requirejs 的好处不是防止命名空间污染，而是更好的可维护性，因为您总是可以看到模块的依赖关系。您可以编写更好的单元测试，因为您可以测试一个模块并[模拟出它的所有依赖项](https://stackoverflow.com/questions/11439540/how-can-i-mock-dependencies-for-unit-testing-in-requirejs/11695463#11695463)。因此，我们将一个大型 Backbone 应用程序从上述示例的结构重建为如下所示：

**模型/Task.js**

```
define(function () {
  return Backbone.Model.extend({ /*...*/ });
}); 
```

**集合/Tasks.js**

```
define([models/Task], function (Task) {
  return Backbone.Collection.extend({ Model:app.Task }); 
}); 
```

**应用程序.js**

```
define([collections/Tasks], function (Tasks) {
  var tasks = new Tasks();
  tasks.fetch();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:57:57.423

我不同意全局变量在 javascript 中不好。大多数语言都需要全局变量。导入某些内容后，您需要能够引用它。类似 Java 的语言只是把所有的类名扔到一个巨大的全局堆上；但你从来没有意识到这是因为在那些语言中类（类名、类引用）不是变量。

在 javascript 中，类（或假装模仿类）只是分配给变量的对象。因此，您可以确保可以在代码的其他部分引用它们。

现在，实际上在您的示例中，您将模型定义和集合实例（可能是单例）分配给全局范围。对于模型定义，我会说这是正确且唯一的方法（也许添加一些命名空间，例如`window.app.model.Task = Task`）。在第二种情况下，纯粹主义者的观点可能是它不是那么好。我宁愿做类似的事情`window.app.collection.Tasks = Tasks`，然后定义一个静态方法`Tasks.getinstance()`，它返回单例。或者，不太好的（但更少的编码）也将把你的单例放在全局范围内`window.app.singletons.Tasks = Tasks()`。

最后，确保（我相信你已经做到了）所有这些都在适当的范围内。此代码（在浏览器中运行）还将使 Task 和 Tasks 成为全局对象。将整个事情包装在一个函数中，然后使用`var`

```
(function (app) {
  var Task = Backbone.Model.extend({ /*....*/ }),
  Tasks = Backbone.Collection.extend({ /*....*/ }, {
    getInstance: function () {
      if (!this.instance) {
        this.instance = new Tasks();
      }
      return this.instance;
    }
  });

  if (!app.models) {
    app.models = {};
  }
  if (!app.collections) {
    app.collections = {};
  }

  app.models.Task = Task;
  app.collections.Tasks = Tasks;
}(window.app)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T05:41:09.797

我个人不会污染与 AMD 解决方案类似的全局命名空间。这是一篇关于[跨 AMD 模块共享资源](https://stackoverflow.com/questions/8842223/share-resources-across-different-amd-modules)的帖子，这基本上是您想要做的，但有一个模型和集合。

[此外，在本期](https://github.com/addyosmani/aura/issues/91)Backbone Aura 框架的底部，有一个数据模块的实现，它对集合和模型进行命名空间以供检索。前几天我刚刚在我的应用程序中遇到了这个问题，这就是我计划实施的。

# ruby - 在 `puts()` 参数中删除变量后的换行符

> ID：12296305
> 
> 赞同：2
> 
> 时间：2012-09-06T08:49:42.360
> 
> 标签：ruby, syntax, newline, put

当我执行

```
print("Enter your name: ")
name=gets
puts("\tHello, #{name}.") 
```

，我得到：

```
 Hello, Fohsap
. 
```

如何将句点 (.) 移到第一行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T08:59:05.003

`gets`将在返回的字符串中包含换行符。要删除它，您可以使用`gets.chomp`.

# json - JQuery UI 选项卡没有将 JSON 发送到我的控制器

> ID：12296306
> 
> 赞同：0
> 
> 时间：2012-09-06T08:49:43.280
> 
> 标签：json, asp.net-mvc-3, jquery-ui, jquery, jquery-tabs

我一直在搞乱 Jquery UI 选项卡并通过 AJAX 加载内容..

我尝试了 Jquery 网站上的示例，效果很好（如预期的那样），然后我想尝试将数据发送到我的 MVC 控制器，看起来像这样......

```
 public ActionResult AjaxTab(string stringtest)
    {
        return View();
    } 
```

和我的看法...

```
<div class="demo">
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Preloaded</a></li>
        <li><a href="@Url.Action("AjaxTab", "Home")">Tab 1</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
</div> 
```

和我的jQuery ...

```
<script type="text/javascript">
$(function () {
    $("#tabs").tabs({
        ajaxOptions: {
            data: {stringtest: "hello"},
            error: function (xhr, status, index, anchor) {
                $(anchor.hash).html(
                    "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo.");
            }
        }
    });

}); 
```

再次正常工作:)，然后我想创建并传递一个JSON对象，我已经尝试了我能想到的一切，但它不会发送它:(

这是我尝试的最后一件事......

查看 - 相同

控制器...

```
public ActionResult AjaxTab(JsonTest jsonTest) 
```

创建了新类...

```
 public class JsonTest
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }        
} 
```

和jQuery ...

```
<script type="text/javascript">
var json  =  {"jsonTest": { Id:1 , Name:"Daz", Description:"blah blah blah" }};
$(function () {
    $("#tabs").tabs({
        ajaxOptions: {
            data: JSON.stringify(json),
            error: function (xhr, status, index, anchor) {
                $(anchor.hash).html(
                    "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo.");
            }
        }
    });
}); 
```

这次我没有得到 jsonTest :(

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:23:13.523

[快速查看](http://theycallmemrjames.blogspot.ca/2010/05/aspnet-mvc-and-jquery-part-4-advanced.html)模型绑定和ajax请求的“传统”标志。这可能会导致 JSON 对象的反序列化被炸毁。

要验证这一点，请在控制器中设置断点并检查您的 Request 对象。我打赌 10 比 1 的数据是传入的，但由于数组/对象格式，它没有得到正确的反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:47:28.043

这是我的 B 计划

我所做的不是使用选项卡来执行页面的 AJAX 加载，而是捕获该选项卡的选择事件，然后执行 ajax 发布（如下所示）

```
 $("#tabs").tabs({
        select: function(event, ui) {

            if (ui.index == 1) {
                var json  =  {"jsonTest": { Id:1 , Name:"Daz", Description:"blah blah blah" }};

                $.ajax({
                    url: '@Url.Action("AjaxTab", "Home")',
                    type: 'POST',
                    data: JSON.stringify(json),
                    contentType: 'application/json; charset=utf-8', 
```

这似乎工作正常..

# linux - 没有shebang线的Shell脚本可以正常工作吗？为什么？

> ID：12296308
> 
> 赞同：33
> 
> 时间：2012-09-06T08:49:47.880
> 
> 标签：linux, perl, bash, shell, unix

我正在编写一个简单的 shell 脚本，发现我的 shell 脚本不需要 shebang 行

```
#!/bin/sh 
```

如果我为我的脚本授予执行权限并使用`./myscript.sh`. 它运行良好。

我正在使用`bash`shell，`/bin/sh`实际上是指向`bash`.

```
lrwxrwxrwx 1 root root /bin/sh -> bash 
```

我知道 shebang 行用于告诉 shell 哪个解释器用于脚本的其余部分。

如果我错过了 perl 中的 shebang 行，请授予执行权限并运行`./myscript.pl`，它不起作用。

这里到底发生了什么？如果我使用`./`，什么时候真正需要 shebang 线？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-06T09:16:11.167

您输入的父外壳程序`./myscript.sh`首先尝试了`execve`它，如果存在的话，shebang 行将在其中生效。当这工作时，父级不知道脚本和 ELF 之间的区别，因为内核会处理它。

`execve`失败了，所以一个古老的 unix 兼容性功能，早于 shebang 行的存在，就被激活了。它猜测具有执行权限但未被内核识别为有效可执行文件的文件一定是shell脚本。

**通常父 shell 猜测脚本是为同一个 shell 编写的（最小的 Bourne-like shell 使用 运行脚本`/bin/sh`，bash 将其作为 bash 子进程运行），** csh 基于第一个字符进行一些更复杂的猜测，因为它也早于 shebang并且它需要与 Bourne shell 共存）。

当您知道这些猜测是错误的（例如使用 shebang is `#!/usr/bin/perl`），或者当您不相信猜测能够始终如一地工作，或者当脚本需要由不是的父进程运行时，您需要一个 shebang 行壳本身。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-06T08:51:51.193

*文件中*需要 shebang 行，并且仅当它打算作为可执行文件运行时（与`sh file.sh`调用相反。脚本实际上不需要它，它是让系统知道如何找到解释器。

*编辑*：很抱歉误读了这个问题。如果 shebang 行丢失或无法识别，`/bin/sh`则使用。但我更喜欢明确解释解释器。

请注意，这种行为不是通用的，IIRC，只有一些`exec*`家庭功能可以这样做（更不用说不同的平台），所以这是在这里明确的另一个原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T09:24:43.687

POSIX（单一 UNIX 规范 4）标准没有帮助：

*如果 shell 命令文件的第一行以字符“#!”开头 ，结果未指定。*

因此，标准意味着如果您没有 #! 那么它应该运行一个 POSIX shell。但是现代 shell 不符合 POSIX。旧的 Korn Shell 88 (ksh88) 运行 Bourne shell（接近 POSIX shell），没有 #! 行，但 ksh93 打破了这一点，Bash 也是如此。使用 ksh93 和 Bash，如果没有 #! 线存在。

尽管流行的观点，Bash 和 Korn shell 不同。当你编写一个 shell 脚本时，你永远无法确定你将从哪个 shell 运行，或者即使它会从另一个 shell 运行（大多数编程语言可以运行其他程序）。一旦你使用了 Bourne/POSIX 语法之外的东西，你就会被淹没。

始终使用 #! 线，不要让它碰运气。

# android - 使用 SQLite 在 Android 上的自动完成功能

> ID：12296311
> 
> 赞同：0
> 
> 时间：2012-09-06T08:50:01.020
> 
> 标签：android, sqlite, autocomplete

我正在尝试开发一个简单的字典。字典包含大约十万个条目。当用户在文本框中键入时，我想在列表中显示自动完成。我在 SQLite 中尝试了 LIKE 运算符，但它太慢了。我听说过类似全文搜索的东西。但是我不确定它是否适合我的需要。

为了可视化我想要实现的目标，这里是 Android 词典[Advanced English & Thesaurus](https://play.google.com/store/apps/details?id=com.mobisystems.msdict.embedded.wireless.wordnet)的截图：

![在此处输入图像描述](../Images/13f89003d3c9f0533691d65aad9ee9db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:49:08.703

这当然是可能的；你想使用一个[`AutoCompleteTextView`](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html). 如果您进行搜索，有几个关于如何使用它的好教程。

# operators - java中如何根据掩码增加一个ipv6地址？

> ID：12296312
> 
> 赞同：0
> 
> 时间：2012-09-06T08:50:02.087
> 
> 标签：operators, inetaddress

我正在尝试根据掩码增加 ipv6 地址。当有 F 代替增量时，我遇到了问题。任何人都可以检查一下吗

```
public String IncrementIPV6ForPrefixLength (String IPv6String, int times) throws UnknownHostException
{

    int result , carry = 0, i;
    int bits;

    int mask=0;
    int index=IPv6String.indexOf("/");
    mask=Integer.parseInt(IPv6String.substring(index+1, IPv6String.length()));
    IPv6String=IPv6String.substring(0, index);

    InetAddress iaddr=InetAddress.getByName(IPv6String);
    byte[] IPv6Arr=iaddr.getAddress();
    if(mask > 128 || mask < 0)
        return null;

    i = mask/8;
    bits = mask%8;

    if(bits>0)
    {
        result = ((int)(IPv6Arr[i]>>(8-bits))) + times;
        IPv6Arr[i] =(byte) ((result << (8-bits)) | (IPv6Arr[i] & (0xff >> (bits))));
        carry = (result << (8-bits))/256;
        times /= 256;
    }
    i--;

    for(;i>=0;i--)
    {
        result = ((int)IPv6Arr[i]) + ((times + carry)& 0xFF);
        IPv6Arr[i] = (byte)(result % 256);
        carry = result / 256;
        if(carry == 0)
        {
            iaddr=InetAddress.getByAddress(IPv6Arr);
            String s=iaddr.toString();
            if(s.indexOf('/') != -1){
                s = s.substring(1, s.length()).toUpperCase();
            }
            StringBuffer buff =new StringBuffer("");
            String[] ss = s.split(":");
            for(int k=0;k<ss.length;k++){
                int Differ = 4 - ss[k].length();
                for(int j = 0; j<Differ;j++){
                    buff.append("0");
                }
                buff.append(ss[k]);
                if(k!=7)buff=buff.append(":");
            }
            return buff.toString()+"/"+mask;
        }
        times /= 256;
    }
    return null;
} 
```

像这样输入：

```
FD34:4FB7:FFFF:A13F:1325:2252:1525:325F/48
FD34:41B7:FFFF::/48
FD34:4FBF:F400:A13E:1325:2252:1525:3256/35 
```

如果递增 1，则输出如下

```
FD34:4FB8:0000:A13F:1325:2252:1525:325F/48
FD34:41B8:0000::/48
FD34:4FC0:0400:A13E:1325:2252:1525:3256/35 
```

如果增加 2

```
FD34:4FB8:0001:A13F:1325:2252:1525:325F/48
FD34:41B8:0001::/48
FD34:4FC0:1400:A13E:1325:2252:1525:3256/35 
```

你能找到我做错的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:29:31.187

忽略发布的代码，尝试将操作建模为对 IPv6 地址实际为 128 位数字的直接数字操作。转换为`BigInteger`并使用`BigInteger.add`.

# c++ - 如何在 C++ 中访问 c li 类？

> ID：12296316
> 
> 赞同：1
> 
> 时间：2012-09-06T08:50:19.073
> 
> 标签：c++, crystal-reports, command-line-interface

我需要用纯 C++ 代码创建一个 cli 类的新对象。

我是cli新手，请帮忙

我的cli类：

```
using namespace System;
using namespace System::Windows::Forms;
using namespace CrystalDecisions::Shared;
using namespace CrystalDecisions::CrystalReports::Engine;
using namespace CrystalDecisions::Windows::Forms;

namespace  CrystalRapport {
    // This is the main form that will hold the viewer control.  
    ref class ViewForm : public System::Windows::Forms::Form
    {
    private:
        //Declare the Viewer Control, Report Document, and other
        //objects needed to set the connection information.
    public:
        ViewForm()..
        void InitForm()..
        //This function initializes the form and adds the viewer to the form.
        void ViewForm_Load(System::Object^ sender, System::EventArgs^ e)..
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:53:07.003

[`gcnew`](http://msdn.microsoft.com/en-us/library/te3ecsc8%28v=vs.100%29.aspx)如果要在 CLI C++ 中创建 .NET 对象，则需要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:14:11.163

```
ref class Student
{
    ...
};

...

Student^ student = gcnew Student();
student->SelectSubject("Math", 97); 
```

参考： http: [//www.codeproject.com/Articles/17787/C-CLI-in-Action-Instantiating-CLI-classes](http://www.codeproject.com/Articles/17787/C-CLI-in-Action-Instantiating-CLI-classes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:00:17.447

我找到了一个例子。在本机 C++ 应用程序中使用 .NET 程序集

[http://msdn.microsoft.com/en-us/vstudio/bb892742.aspx](http://msdn.microsoft.com/en-us/vstudio/bb892742.aspx)

如果您创建 C# Crystal Reports 项目，则可以使用此示例。（有一些变化）

# java - 解析里面有几个protobuf的java InputStream

> ID：12296317
> 
> 赞同：2
> 
> 时间：2012-09-06T08:50:20.263
> 
> 标签：java, parsing, inputstream, protocol-buffers, netty

传入消息的格式

*   第一个字节是固定的
*   protobuf 消息作为标头（9 个字节）
*   内容角色中的 protobuf 消息（4 个字节）

为了灵活性，我在一个网络数据包中实现了两个 protobuf 消息。

这就是我试图解析消息的方式：

```
ByteArrayInputStream is = new ByteArrayInputStream(buf.array());
System.out.println(is.available());
is.skip(1);
System.out.println(is.available());

MessageHeader header = MessageHeader.parseFrom(is);
System.out.println(is.available()); 
```

输出是

*   14
*   13
*   0

所以问题是 parseFrom 尝试读取 inputStream 直到结束，并且一旦完成第一次 protobuf 读取就不会停止。

解析具有这种格式的消息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T06:48:29.820

当我从现在开始写入和解析时，我使用`writeDelimitedTo`并且`parseDelimitedFrom`它可以工作。

# regex - 使用正则表达式仅匹配 5xx

> ID：12296319
> 
> 赞同：3
> 
> 时间：2012-09-06T08:50:25.813
> 
> 标签：regex, bash, grep

我想找到介于 500-599 之间的所有数字。我对正则表达式很陌生，我想出了这个：

```
5[0-9][0-9]+ 
```

这工作正常，匹配`566,577,500`. 但它也匹配`6578`。这是我不想要的。

### 编辑：

这是我的文件内容：

```
asd 554
sad
sads

dsa

456

sa
d

dsa
asda
d500
521
519 asdasd
524 asdasdsdsadsdasd sadsadsadasdsd asdsa dsa dsadsad sad asdas dsa sad sad asds a 543 
```

正如许多人建议的那样，我尝试过：

```
grep "^5[0-9]{2}$" test 
```

这根本没有找到任何数字！

我如何对此施加约束？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T08:56:27.440

如果您只想在一行上匹配 5xx **，**而不是在**5xx**作为**x5xx**的一部分出现时，

```
^5\d{2}$ 
```

> \d = 数字
> 
> ^ = 行首
> 
> $ = 行尾

**编辑：**

`\s*5\d{2}\s`是你应该使用的。匹配 5xx 两侧的空格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T09:18:44.603

`grep`最简单的方法是使用只`-w`匹配整个单词：

```
grep --color=always -w "5[0-9][0-9]" test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:54:11.600

删除 + 号：

```
5[0-9][0-9] 
```

这将匹配 "5" 后接两个数字，仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-13T12:02:23.517

您必须更准确地描述您希望使用 6578 发生什么？如果你想要输出中的 578（因为在“6”之后有一个*字符序列*匹配你的格式 5xx）你可以简单地做

```
grep -o "5[0-9][0-9]" 
```

请注意，与其他答案不同，`-o`如果需要，该标志会从一行中发出多个数字。

另一方面，如果要匹配格式为 5xx 的*单词*，也可以添加`-w`标志：

```
grep -o -w "5[0-9][0-9]" 
```

对于更复杂的匹配规则，您希望使用`-E`标志，并可能使用更复杂的正则表达式。

# javascript - 多个 DIV 上的 Javascript

> ID：12296321
> 
> 赞同：0
> 
> 时间：2012-09-06T08:50:29.833
> 
> 标签：javascript, show-hide

我正在使用具有显示/隐藏 Javascript 的 Wordpress 主题（Incipiens）在联系页面[http://demo.themedev.me/wordpress_themes/incipiens/contact-us/上显示地图](http://demo.themedev.me/wordpress_themes/incipiens/contact-us/)

我想在一个页面上多次使用这个功能来显示/隐藏画廊。

```
<div class="map">
<div class="map_top">                        
<hr class="toolbox toolbox1">
</div>
<hr class="vertical_sep0">
<a class="show_map" href="javascript:void(0)"></a>
<div class="map_container"><div class="thismap"><iframe>........</iframe></div>
</div> 
```

我有这个工作，但对 js 的调用会打开所有 div。因此，我在每个画廊周围放置了一个唯一的 div id，并稍微更改了 javscript...

```
<div class="map">
<div class="map_top">                        
<hr class="toolbox toolbox1">                        
</div>
<hr class="vertical_sep0">
<a href="javascript:unhide('silestone')" class="show_map"></a>
<div id="silestone">
<div class="map_container">
[show_gallery width="124" height="124" galleryid="527"][/show_gallery]
</div>
</div>  
</div> 
```

它可以工作，但很奇怪，有时打开正确的，有时打开错误的......不知道我做错了什么，我应该只有一个包含所有 div 的 ID 的 javascript 调用吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:58:17.750

由于您没有显示用于切换的实际脚本，我假设您的意思是这样的（取自页面） -

```
function (){
    $(this).toggleClass('hide_map');
    $('.map_container').slideToggle(400);
} 
```

我会将其更改为-

```
function unhide(id){
    $(this).toggleClass('hide_map');
    $('#' + id).find('.map_container').slideToggle(400);
} 
```

那样有用吗？

# java - Jackson JsonNode 转换 - 浮点精度问题

> ID：12296324
> 
> 赞同：3
> 
> 时间：2012-09-06T08:50:38.833
> 
> 标签：java, json, serialization, jackson

我需要将一个对象转换为 JsonNode 因为我需要在返回它之前操作生成的 Json。

```
ObjectMapper mapper = new ObjectMapper();

Float f = 1.4f;
JsonNode node = mapper.convertValue(f, JsonNode.class) 
```

问题是，它`node`包含 1.399999976158142 而不是 1.4。即使我序列化为`node`JSON ......

```
String output = mapper.writeValueAsString(node); 
```

..`output`是 1.399999976158142

如果我只使用 writeValueAsString，结果是正确的。

# ruby-on-rails - Ruby on Rails 控制器方法分开？

> ID：12296325
> 
> 赞同：0
> 
> 时间：2012-09-06T08:50:48.147
> 
> 标签：ruby-on-rails, ruby, model-view-controller, methods, controller

只是为了接受教育，我想知道为 GET 和 POST 操作使用一个控制器方法是否是一种好习惯，例如`def signup ... end`，它将显示一个表单，如果`request.post?`为真 - 然后执行所有业务逻辑等等。这是什么好方法，还是我应该将这些方法彼此分开？

谢谢指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:05:35.880

我认为为发布请求定义单独的操作会更好。您显然可以在同一个操作中完成它，但是如果您要在 sign_up 操作中编写一个大的 if..else 块，您不妨使用另一个操作。如果您缺少名称，则可以将其称为 create :P 。它使代码更具逻辑性和可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:59:36.033

无论哪种方式，代码组织几乎没有区别。

使用单独的方法，它看起来像：

```
def signup_create
  # create here
end
def signup_new
  # render here
end 
```

使用相同的方法，它看起来像：

```
def signup
  if request.post?
    # create here
  else
    # render here
  end
end 
```

看起来他们俩都组织得很好。选择你喜欢的。如果它们是默认的 CRUD 方法，那么单独的方法很好，因为已经想到了单独的名称（例如`new`vs `create`，`edit`vs `update`）。

如果它们不是 CRUD 或页面上的额外表单，并且您只能为它想一个名称（如`signup`），请随意重载名称并使用相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:14:51.947

我认为，如果您正在使用（或将要使用）基于方法的授权（例如 cancan），则针对不同请求的单独操作会更好。

# python - Python 关于检查 Google 搜索 URL 的内容循环问题

> ID：12296327
> 
> 赞同：0
> 
> 时间：2012-09-06T08:50:53.997
> 
> 标签：python, urllib2

```
# -*- coding: utf-8 -*-

import re
import csv
import urllib
import urllib2
import BeautifulSoup
Filter = [' ab1',' ab2',' dc4',....]
urllists = ['myurl1','myurl2','myurl3',...]
csvfile = file('csv_test.csv','wb')
writer = csv.writer(csvfile)
writer.writerow(['keyword','url'])
for eachUrl in urllists:
    for kword in Filter:
        keyword = "site:" + urllib.quote_plus(eachUrl) + kword
        safeKeyword = urllib.quote_plus(keyword)
        fullQuery = 'http://www.google.com/search?sourceid=chrome&client=ubuntu&channel=cs&    ie=UTF-8&q=' + safeKeyword

        req = urllib2.Request(fullQuery, headers = {'User-Agent': 'Mozilla/15.0 (X11; Linux x86_64) AppleWebKit/535.11 (KHTML, like Gecko) Ubuntu/12.04 Chrome/21.0.118083 Safari/535.11'})
        html = urllib2.urlopen(req).read()

        soup = BeautifulSoup.BeautifulSoup(html, fromEncoding = 'utf8')

        resultURLList = [t.a['href'] for t in soup.findAll('h3', {'class':'r'})]

        if resultURLList:
            for l in resultURLList:
                needCheckHtml = urllib2.urlopen(l).read()
                if needCheckHtml:
                    x = re.compile(r"\b" + kword + r"\b")
                    p = x.search(needCheckHtml)
                    if p:
                        data = [kword, l]
                        writer.writerow(data)

        else:
            print '%s: No Results' % kword
csvfile.close() 
```

在google searchresults上显示一个关于检查url的简单脚本，打开它，检查并匹配list Filter use re中的关键字，上面的代码可能会导致一些错误，例如，HTTPERROR，URLError，但我不知道如何修复并改进代码，有人可以帮我吗？请.. 如果遇到一些谷歌拒绝，想使用 os.system("rasdial name user code") 重新连接 PPPOE 并更改 IP，那么如何修复此代码非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:07:35.233

I'm not sure how much this helps, but there is a search API that you can use without Google blocking your request and without the need to change your IP address; although there are some restrictions here as well.

```
http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=AnT4i

{"responseData": {"results":[{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://www.ncbi.nlm.nih.gov/pubmed/11526138","url":"http://www.ncbi.nlm.nih.gov/pubmed/11526138","visibleUrl":"www.ncbi.nlm.nih.gov","cacheUrl":"","title":"Identification of aminoglycoside-modifying enzymes by susceptibility \u003cb\u003e...\u003c/b\u003e","titleNoFormatting":"Identification of aminoglycoside-modifying enzymes by susceptibility ...","content":"In 381 Japanese MRSA isolates, the \u003cb\u003eant(4\u0026#39;)-I\u003c/b\u003e, aac(6\u0026#39;)-aph(2\u0026quot;), and aph(3\u0026#39;)-III   genes \u003cb\u003e...\u003c/b\u003e Isolates with only the \u003cb\u003eant(4\u0026#39;)-I\u003c/b\u003e gene had coagulase type II or III, but   isolates \u003cb\u003e...\u003c/b\u003e"},{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://www.ncbi.nlm.nih.gov/pubmed/1047990","url":"http://www.ncbi.nlm.nih.gov/pubmed/1047990","visibleUrl":"www.ncbi.nlm.nih.gov","cacheUrl":"","title":"[\u003cb\u003eANT(4\u0026#39;)I\u003c/b\u003e: a new aminoglycoside nucleotidyltransferase found in \u003cb\u003e...\u003c/b\u003e","titleNoFormatting":"[ANT(4\u0026#39;)I: a new aminoglycoside nucleotidyltransferase found in ...","content":"[\u003cb\u003eANT(4\u0026#39;)I\u003c/b\u003e: a new aminoglycoside nucleotidyltransferase found in \u0026quot;staphylococcus   aureus\u0026quot; (author\u0026#39;s transl)]. [Article in French]. Le Goffic F, Baca B, Soussy CJ, \u003cb\u003e...\u003c/b\u003e"},{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://jcm.asm.org/content/27/11/2535","url":"http://jcm.asm.org/content/27/11/2535","visibleUrl":"jcm.asm.org","cacheUrl":"","title":"Use of plasmid analysis and determination of aminoglycoside \u003cb\u003e...\u003c/b\u003e","titleNoFormatting":"Use of plasmid analysis and determination of aminoglycoside ...","content":"Aminoglycoside resistance pattern determinations revealed the presence of the   \u003cb\u003eANT(4\u0026#39;)-I\u003c/b\u003e enzyme (aminoglycoside 4\u0026#39; adenyltransferase) in all group 1 isolates \u003cb\u003e...\u003c/b\u003e"},{"GsearchResultClass":"GwebSearch","unescapedUrl":"http://ukpmc.ac.uk/articles/PMC88306","url":"http://ukpmc.ac.uk/articles/PMC88306","visibleUrl":"ukpmc.ac.uk","cacheUrl":"","title":"Identification of Aminoglycoside-Modifying Enzymes by \u003cb\u003e...\u003c/b\u003e","titleNoFormatting":"Identification of Aminoglycoside-Modifying Enzymes by ...","content":"The technique used three sets of primers delineating specific DNA fragments of   the aph(3\u0026#39;)-III, \u003cb\u003eant(4\u0026#39;)-I\u003c/b\u003e, and aac(6\u0026#39;)-aph(2\u0026quot;) genes, which influence the MICs of \u003cb\u003e...\u003c/b\u003e"}],"cursor":{"resultCount":"342","pages":[{"start":"0","label":1},{"start":"4","label":2},{"start":"8","label":3},{"start":"12","label":4},{"start":"16","label":5},{"start":"20","label":6},{"start":"24","label":7},{"start":"28","label":8}],"estimatedResultCount":"342","currentPageIndex":0,"moreResultsUrl":"http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8\u0026source\u003duds\u0026start\u003d0\u0026hl\u003den\u0026q\u003dAnT4i","searchResultTime":"0.25"}}, "responseDetails": null, "responseStatus": 200} 
```

see [http://googlesystem.blogspot.hu/2008/04/google-search-rest-api.html](http://googlesystem.blogspot.hu/2008/04/google-search-rest-api.html)

# sql - 我是否需要设置一个只有几个可能值的列作为 tSQL 的索引？

> ID：12296328
> 
> 赞同：1
> 
> 时间：2012-09-06T08:50:54.767
> 
> 标签：sql, sql-server, tsql, select, indexing

我正在创建一个可能包含数百万条记录的 SQL Server 2008 数据库，我想知道是否需要将以下内容定义为索引：

1.  可能只包含 0 和 1 的 TINYINT 列？

2.  TINYINT 列可能仅包含：0、5 和 6？

PS。这两个列都将在 WHERE 子句中用于选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:57:46.173

不，基本上不会单独使用这些列上的索引。

但是这种低选择性键非常适合组合键，作为索引中最左边的列。例如，说`TINYINT (0,1)`（为什么不使用[`bit`](http://msdn.microsoft.com/en-gb/library/ms177603.aspx)btw？）是`deleted`列。您经常查询以 . 为谓词`WHERE deleted=0 AND ...`。将此添加为聚集索引中最左边的列通常是正确的方法。或者，如果谓词是，比如说，`WHERE name = '...' AND deleted=0`你应该做一个非聚集的`index on (deleted, name)`。

另一种选择是使用[过滤索引](http://technet.microsoft.com/en-us/library/cc280372.aspx)：`create index .. on (name) where (deleted=0)`但这并不涵盖*您*对`deleted=1`.

对于具有很少不同值的列（例如`type`列）也是如此。同样，使其成为复合索引中最左边的键通常很有意义。

请注意，如果您在索引中添加一个低选择性键作为最左边的键，并且您*没有*在谓词中指定此列（例如，不`WHERE name='...'`添加任何条件`deleted`），则无法使用索引，只能使用索引`on (name)`（或`on (name, ...)`) 可以使用，即。`name`最左边的键在哪里。

为什么不把它设为最右边的键？例如。`index on (name, deleted)`? 因为通常没有任何好处，只有当您想强制执行唯一约束时。只有 0 或 1 可供选择，一个`index on (name)`或一个`index on (name, deleted)`基本上提供相同的性能（如果它们可以使用的话）。将低选择性键放在左侧可启用某些范围扫描方案（例如`WHERE type=5`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:53:21.403

这不是一个好主意，因为索引的选择性会很低，并且因此而不是“加速”，这可能是一个缺点。

**具有相同值的行越少，索引的选择性越好**

在其他一些情况下，甚至全表扫描也可能更有效。

假设：您有 100 万行。那么第一个索引的选择性为：

（*选择性=不同的值/行）*

```
2 / 1.000.000 = 0,000002 
```

在另一种情况下：

```
3 / 1.000.000 = 0,000003 
```

**这些值非常低！**

或者以不同的方式：

估计选择性比 =（TotalRows / Distinct values）/ TotalRows * 100 = 1/Distinc 值 * 100。

在第一种情况下为 50%，在第二种情况下为 33%。

Sql server 的优化器不使用这个比率大于 15% 的索引。

（我的计算是一个简单的估计，但你可以在[MSDN](http://msdn.microsoft.com/en-us/library/ms174384%28v=sql.105%29.aspx)中找到统计信息）

# jquery - 在jQuery中删除父div的类

> ID：12296329
> 
> 赞同：1
> 
> 时间：2012-09-06T08:51:03.117
> 
> 标签：jquery, css

我的`<div>`结构如下：

```
<div class="fc-event-inner fc-event-skin">
    <span class="fc-event-title">
        <div class="removeBackGround"></div>
    </span>
</div> 
```

那么，使用 jQuery 如何使用“removeBackGround”类查找和删除父类（fc-event-inner fc-event-skin）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:53:32.117

像这样：

```
$('.removeBackGround').parents('.fc-event-inner,.fc-event-skin').removeClass('fc-event-inner fc-event-skin'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:52:34.783

为了删除类，请使用以下代码：

```
$(".removeBackGround")
    .closest("div")
    .removeClass("fc-event-inner fc-event-skin"); 
```

检查[`closest()`](http://api.jquery.com/closest/)和[`removeClass()`](http://api.jquery.com/removeClass/)方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T08:54:06.617

尝试这个

```
$('.removeBackGround').closest('.fc-event-inner fc-event-skin').remove(); 
```

或者你可以用这个

```
$('.removeBackGround').parents('.fc-event-inner,.fc-event-skin').removeClass('fc-event-inner fc-event-skin'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T08:52:29.353

如果您不知道它有多少级，请使用`.closest()`

```
$('.removeBackGround').closest('.fc-event-skin').removeClass('fc-event-inner fc-event-skin'); 
```

如果您知道它总是向上两个级别，则可以链接父母：

```
$('.removeBackGround').parent().parent().removeClass('fc-event-inner fc-event-skin'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T09:23:41.190

***try this***

```
$('.removeBackGround').parentsUntil('.fc-event-inner.fc-event-skin').parent().attr('class',''); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T08:52:19.323

嗨，现在已经习惯了

```
$('p').removeClass('myClass yourClass') 
```

更多信息***[链接](http://api.jquery.com/removeClass/)***

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T14:44:03.207

有很多选择可以做到这一点。但，

```
$(".removeBackGround").closest('div.fc-event-inner,div.fc-event-skin').removeClass("fc-event-inner fc-event-skin"); 
```

效果最好。

# javascript - Javascript 中十进制输入的正则表达式，小数点前有 1 到 3 位，小数点后有 1 到 3 位

> ID：12296334
> 
> 赞同：0
> 
> 时间：2012-09-06T08:51:10.877
> 
> 标签：javascript, regex, string, match

我想创建一个 Javascript 正则表达式，它接受

123、123.123、12.34、1.324

但不应该接受

1246、1234.45、1.2364

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:55:18.277

试试这个正则表达式：

```
/^[0-9]{1,3}(\.[0-9]{1,3})?$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:57:42.400

试试这个：

`/^(0|[1-9]\d?\d?)(\.\d{1,3})?$/`

我假设“00”或“01.234”不应该是有效的。如果应该，请使用其他答案。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:56:56.533

尝试这个

```
/^\d{1,3}(\.\d{1,3})?$/ 
```

# c# - C#对字符串数组进行排序

> ID：12296338
> 
> 赞同：-7
> 
> 时间：2012-09-06T08:51:12.983
> 
> 标签：c#, arrays, string, sorted

我需要对一个字符串数组进行排序，如下所示。

```
<MP:F> SG10.01,"SG1 ANTA H 2300 MHz Mod",#.##," dB",LIM,23.00,34.00
<DATA> GEN_FREQ,2300e6,,MESSAGE,"Action: Connect the external PM power sensor to ANT A via N->7/16 adapter.",,DELAY,1000,,PICTURE,ANTA_PM.JPG
<MP:F> SG10.02,"SG1 to ANTA H 2302.5 MHz Mod",#.##," dB",LIM,23.00,34.00<DATA> GEN_FREQ,2302.5e6
<MP:F> SG10.03,"SG1 to ANTA H 2305.0 MHz Mod",#.##," dB",LIM,23.00,34.00<DATA> GEN_FREQ,2305.0e6
<MP:F> SG10.04,"SG1 to ANTA H 2380 MHz Mod",#.##," dB",LIM,23.00,34.00<DATA> GEN_FREQ,2380e6
<MP:F> SG10.05,"SG1 to ANTA H 2385 MHz Mod",#.##," dB",LIM,23.00,34.00<DATA> GEN_FREQ,2385e6
<MP:F> SG10.06,"SG1 to ANTA H 2390 MHz Mod",#.##," dB",LIM,23.00,34.00<DATA> GEN_FREQ,2390e6
<MP:F> SG10.07,"SG1 to ANTA H 2392.5 MHz Mod",#.##," dB",LIM,23.00,34.00<DATA> GEN_FREQ,2392.5e6 
```

排序是按照频点的编号排序的，排序完成后会重新排列索引号吗？

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:00:31.820

我建议如下：

*   将每一行解析成相应的数据结构（结构或对象，你喜欢）
*   将每个对象插入`List<T>`
*   在想要的字段上使用 LINQ 对列表进行排序
*   将有序的值输出到数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:59:32.380

1.  编写一个例程[从每个记录中解析所需的排序条件](https://stackoverflow.com/questions/2760197/string-parsing-in-c-sharp)（频率点），
2.  创建一个[字典](http://www.dotnetperls.com/dictionary)，一方面你得到解析的**频率点**，另一方面得到整个字符串，
3.  根据 GEN_FREQ[对 Dictionary 进行排序，并以新的顺序重新排列所有字符串。](https://stackoverflow.com/questions/289/how-do-you-sort-a-c-sharp-dictionary-by-value)

# c# - 创建新对象时覆盖

> ID：12296341
> 
> 赞同：0
> 
> 时间：2012-09-06T08:51:28.027
> 
> 标签：c#, .net

我可以在 C# 中做这样的事情吗？

```
Calculator calculator = new Calculator()
{
    protected override int ValueOfK() 
    {
        return 1;
    }
}; 
```

如果是这样，你怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:55:22.277

为了覆盖一个方法，您需要继承`Calculator`并覆盖`ValueOfK`继承类中的方法（前提是它被声明为`virtual`in `Calculator`）。

没有其他机制可以覆盖 C# 中的方法。

```
public Calculator
{
    protected virtual int ValueOfK() 
    {
        return 2;
    }
}

public NewKCalculator : Calculator
{
    protected override int ValueOfK() 
    {
        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:54:27.893

不，这不是`JavaScript`. 您不能在运行时*将*方法附加到已定义的类型。

*您*可以使用[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)在. 但是，基本上，我建议避免这种情况。如果可能的话，最好修改架构，然后使用动态的东西。让我们继续受益于静态类型语言的优点。*`C#`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:08:31.750

You can use extension method (**EDIT**: if the `Calculator` does not implement `ValueOfK()`) (More info : [MSDN](http://msdn.microsoft.com/en-us/library/bb383977.aspx) )

```
 Calculator calc = new Calculator();
 int val=calc.ValueOfK(); 
```

Extension:

```
public static class MyExtension
{
    public static int ValueOfK(this Calculator calc)
    {
        return 1;
    }
} 
```

**EDIT:**

Otherwise as **Oded** mentioned already you need to inherit from `Calculator` and override the `ValueOfK`. If the method is `non-virtual` or `static` you need to use `new` keyword:

```
public class Calculator
{
    protected int ValueOfK()
    {
        return 0;
    }
}

public class BetterCalculator : Calculator
{
    protected new int ValueOfK()
    {
        return 1;
    }
} 
```*

# postgresql - Squeryl 和 PGObjects

> ID：12296345
> 
> 赞同：0
> 
> 时间：2012-09-06T08:51:43.097
> 
> 标签：postgresql, scala, squeryl

我面临一个非常难以解决的问题......我有一个使用大量 postgresql 枚举的现有数据库。

现在......我真的不知道如何用 postgresql 检索这些字段。有没有人设法做这样的事情？

我试图将它们作为字符串检索，但它没有用......而且将它们作为 Int 也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:04:54.357

通常，ORM 和查询生成器对枚举和其他特定于数据库的功能的支持非常差。

在问题表上创建一个可更新视图将枚举转换为它们的`text`形式可能很有用，因此查询生成器只看到一个`text`列，但枚举是存储在数据库中的内容。然后，您针对这些视图编写查询。

我越来越认为 PgJDBC 需要一个使枚举作为字符串发送和接收的选项，因为很多工具都被枚举对象弄糊涂了。

# java - Java 函数需要获取特定文本并将其更改为 url

> ID：12296346
> 
> 赞同：1
> 
> 时间：2012-09-06T08:51:42.963
> 
> 标签：java

我需要一个 Java 代码来获取此文本“ text1 [example1]http://example1.com [example2]http://example2.com text2 ....”并将其返回如下：

```
text1 <a target='_blank' href='http://example1.com'>example1</a> <a target='_blank' href='http://example2.com'>example2</a> text2 
```

我的意思是每当它在文本中找到此模式 [example2]http://example2.com 并将其放入 html 超链接中。请帮助..我到目前为止所做的但它不起作用

```
 ViolationTableItem item = new ViolationTableItem(m_violation);
    String dataSource = "";
     String copyDataSource="";
    try {
        dataSource = item.getUi().getViolation().getBlackListEntries()
                .getDataSources();

        Matcher matcher = Pattern.compile(
                "(\\[.*?\\])(.*://[^<>[:space:]]+[[:alnum:]/])").matcher(
                dataSource);

        while (matcher.find()) {

            String matchedLink = matcher.group();

            Matcher nameMatcher = Pattern.compile("\\[.*?\\]").matcher(
                    matchedLink);
            String nameMatched = "";
            String nameMatched2 = "";
            String linkableText = "";
            String[] tst = matchedLink.split("\\[.*?\\]");
            for (int i = 1; i < tst.length; i++) {
                if (nameMatcher.find()) {
                    nameMatched = nameMatcher.group();
                    // System.out.println(nameMatched);
                    nameMatched2 = matchedLink.replace(nameMatched, "");
                    // System.out.println(nameMatched2);

                }
                if (tst[i] != null && !tst[i].equals("")) {
                    linkableText = "<a target='_blank' href='"
                            + tst[i]
                            + "'>"
                            + nameMatched.replaceAll("\\[", "").replaceAll(
                                    "\\]", "") + "</a>";
                    copyDataSource += dataSource.replace(matchedLink,
                            linkableText) + " ";
                }
            }

        }
    } catch (Exception ne){
        return copyDataSource;
    }
    return copyDataSource; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:59:28.900

您可以通过以下方式轻松做到这一点[`String.replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String text = " text1 [example1]http://example1.com [example2]http://example2.com text2 ....";
String link = "<a target='_blank' href='$2'>$1</a>";
String newText = text.replaceAll("\\[(.*?)\\](.*?)(?=\\s)", link);
System.out.println(newText); 
```

印刷

```
text1 <a target='_blank' href='http://example1.com'>example1</a> <a target='_blank' href='http://example2.com'>example2</a> text2 .... 
```

正则表达式查找一对括号，捕获内部和之后的所有内容，直到下一个空格，并将其替换为链接字符串。
`$1`并`$2`用于查找在第一个和第二个括号中捕获的内容。

如果您不希望它匹配任何括号，例如只匹配后面的括号，`http://`只需将第二个更改`(.*?)`为`(http://.*?)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:11:06.030

与其手动解析 URL，不如尝试使用类似[jsoup的 URL 解析器库](http://jsoup.org/)

# entity-framework - 不存在数据库时，InsertHistoryOperation 抛出 InvalidOperationException

> ID：12296347
> 
> 赞同：0
> 
> 时间：2012-09-06T08:51:46.773
> 
> 标签：entity-framework

我在使用 EntityFramework 5.0 时遇到了大麻烦。将我们项目中的 EF 从 EF4.2 更新到 EF5.0 之后。在初始化数据库期间，框架在 InsertHistoryOperation 的 TypeInitializer 中抛出 InvalidOperationExceptions。（在 InnerException 中它说：“列表不包含任何元素”）。

我尝试使用 DropCreateAlwaysInitializer 以及 DropWhenModelChanges。我们不需要迁移功能（当然，最好有，但不推荐）。有没有办法禁用迁移功能，这样就不会引发异常。或者有人可以给我一个提示我做错了什么吗？

该模型非常复杂，因此我认为将其发布在这里并不是很有用。

最好的问候，克里斯

我尝试使用 .Net4.0 和 .Net4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:26:34.563

好，我知道了。

问题是，如果您将 EntityFramework 自 V5.0 合并到（例如数据层程序集）或从合并程序集中使用它，则它无法正常工作。（ILMerge）。

# java - 映射的休眠映射，其中键是复杂值的一部分

> ID：12296356
> 
> 赞同：2
> 
> 时间：2012-09-06T08:52:17.147
> 
> 标签：java, hibernate

我必须创建复杂的休眠映射。以下简化示例解释了我的问题。

我有两个实体：

```
public class Work {

  private WorkType type;
  private Set<Workers>;
  ...
}

public class Worker {

  private Map<WorkType,Work>;
  ...
} 
```

我有 3 张桌子：

```
t_works columns: id, type,...
t_workers columns: id,...
t_work_worker columns: worker_id, work_id. 
```

我想用 hibernate 映射地图，而不将类型值复制到 t_work_worker。这里的问题是映射键（WorkType）是映射值（Work）的一部分。

我的休眠 hbm：

```
<typedef class="org.hibernate.type.EnumType" name="workType">
   <param name="enumClass">myPackage.WorkType</param> 
   <param name="type">12</param> 
</typedef>

<class name="work" table="T_WORKS">
    <property name="type" type="workType" column="type"/>
    <set name="workers" table="T_WORK_WORKER" inverse="true" lazy="false" cascade="none">
        <key column="WORK_ID" />
        <many-to-many column="WORKER_ID"class="myPackage.Worker"/>
    </set>
</class>

<class name="Worker" table="T_WORKERS">
    <map name="channels" table="T_WORK_WORKER" lazy="false" cascade="all">
       <key column="WORKER_ID" />                        
       <map-key formula="(select w.TYPE from t_works w where w.ID=WORK_ID)"type="workType"/>
       <many-to-many column="WORK_ID" class="myPackage.Work"/>
    </map>
</class> 
```

此映射有效，但需要额外的 select 语句（请参阅`formula`属性）。我想知道是否有办法将工作类型映射为键，而不使用“公式”并且不将类型列添加到关系表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:25:32.913

正如你所说，你的部分问题是你有一个循环引用。这通常不是一个好主意，因此您可能需要考虑一种替代结构。你真的需要循环引用吗？为什么工人需要有工作类型和工作的地图？我可能会在另一个班级中建立工人和工作之间的联系，所以你不需要循环引用。

# iphone - 缩小地图视图中的位置

> ID：12296357
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:52:17.770
> 
> 标签：iphone, cocoa-touch, mkmapview

我有**MapView**，在其中我在钦奈地区添加了一些 5 注释。我想在 MapView 开始加载后立即缩小钦奈，以便注释清晰可见。在 viewDidLoad 中：

```
CLLocationCoordinate2D location6;
    location6.latitude=12.9758;
    location6.longitude=80.2205;
    MapAnnotation *ann6=[[MapAnnotation alloc]initWithTitle:@"Chennai-Velacherry" andCoordinate:location6];
    [mapView addAnnotation:ann6];

     CLLocationCoordinate2D centerlocation;
    centerlocation.longitude=13.0810;
    centerlocation.longitude=80.2740;

    [mapView setCenterCoordinate:centerlocation animated:NO];
     [self.view addSubview:mapView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:03:37.133

您不能有一组预定义的缩放级别。相反，您可以设置`MKMapView`using的可见区域`MKCoordinateRegion`。[此处](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)提供示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:08:07.970

You can do that like this:

Create a function like :

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mv {

CLLocationCoordinate2D topLeftCoord;

topLeftCoord.latitude = -90;

topLeftCoord.longitude = 180;

CLLocationCoordinate2D bottomRightCoord;
bottomRightCoord.latitude = 90;
bottomRightCoord.longitude = -180;

for(MKAnnotations* annotation in mv.annotations)
{
   topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
   topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

   bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
   bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
}

MKCoordinateRegion region;
region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1; // Add a little extra space on the sides
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1; // Add a little extra space on the sides

region = [mv regionThatFits:region];
[mv setRegion:region animated:YES];

} 
```

And call this function in viewDidLoad after all the pins are plotted

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:09:07.733

Try this

```
#define kMAPSPAN 1600

MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 1*kMAPSPAN, 1*kMAPSPAN);
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:viewRegion];
[_mapView setRegion:adjustedRegion animated:YES]; 
```

mapView is your MKMapView object and kMAPSPAN can be set according to your need and zoomLocation is your coordinate2D location for chennai

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:14:28.383

用这个，

```
 MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
        region.center.latitude = [currentPlace.latitude doubleValue];
        region.center.longitude = [currentPlace.longitude doubleValue];
        region.span.longitudeDelta = 0.03f; 
        region.span.latitudeDelta = 0.03f;
        [mapView setRegion:region animated:YES]; 
        [mapView setDelegate:self];
        mapView.zoomEnabled = YES;
        mapView.scrollEnabled = NO; 
```

这些会改变你的缩放级别，

```
 region.span.longitudeDelta = 0.03f; 
        region.span.latitudeDelta = 0.03f; 
```

# asp.net-mvc - 如何加快 ASP MVC 站点响应时间

> ID：12296360
> 
> 赞同：0
> 
> 时间：2012-09-06T08:52:23.807
> 
> 标签：asp.net-mvc

当我在本地或在同一个 LAN 中运行我的 ASP MVC 站点时，响应时间是即时的。然而，在生产中，响应时间相当慢（每个请求 2-3 秒）。当我使用远程桌面连接到服务器并在本地运行站点时 - 响应时间非常好。

对于同一服务器上的其他站点，响应时间很好。

可以做些什么来加快 ASP MVC 站点响应时间？

（我想有几个因素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:07:42.843

It sounds like it's not your code but your web host that's the issue.

[Glimpse](http://getglimpse.com/) and [Fiddler](http://www.fiddler2.com/fiddler2/) might show an issue, but it's probably worth working through the points in [Muhammad Akhtar's SO post](https://stackoverflow.com/questions/1340218/asp-net-website-slow-performance-on-production-server) first. It looks like the final solution in that post was to upgrade the production server's processor.

# jquery - 仅附加一次自动完成元素

> ID：12296362
> 
> 赞同：0
> 
> 时间：2012-09-06T08:52:28.423
> 
> 标签：jquery, jquery-ui, autocomplete

我的自动完成脚本有问题。除了 IE8，它在任何地方都可以正常工作。当列表很大时，整个页面变得无响应，并且在 IE8 中 CPU 使用率上升到几乎 100%。

```
_renderItem = function(ul, item) {
        var html = "";
        if (item.NoDataFound) {
            html = "No data found";
        } else {
            if (textField.val() != "") {
                html = item.DisplayName.replace(new RegExp("(" + preg_quote(textField.val()) + ")", 'gi'), "<strong>$1</strong>"); // suggest message & Highlight matching part
            } else {
                html = item.DisplayName;
            }
        }
        return $("<li><a>" + html + "</a></li>")
            .data("item.autocomplete", item)
            .appendTo(ul);
    }; 
```

问题可能是 appendTo(ul) 行，它将每个项目单独附加到 ul 。例如，当到达最后一个元素时，我可以以某种方式仅将整个列表附加一次吗？

# haskell - 如果我们可以禁用功能，错误消息会改善吗？

> ID：12296365
> 
> 赞同：17
> 
> 时间：2012-09-06T08:52:31.980
> 
> 标签：haskell, types, compiler-errors

受此[reddit 讨论](http://www.reddit.com/r/haskell/comments/zemfe/ten_things_you_should_know_about_haskell_syntax/)的启发，我想知道在理解错误消息时，以“Dr Scheme”式的方法来帮助初学者是否存在任何技术障碍。一个典型的例子是臭名昭著的

```
Prelude> 1 "doesn't"

<interactive>:3:1:
    No instance for (Num ([Char] -> t0))
      arising from the literal `1'
    Possible fix: add an instance declaration for (Num ([Char] -> t0))
    In the expression: 1
    In the expression: 1 "doesn't"
    In an equation for `it': it = 1 "doesn't" 
```

*假设我们要做出程序员不会声明新实例*的本地假设。确实，在 Haskell 中仅通过 仅与前奏类进行交互可以获得很长的路要走`deriving`，所以这个假设对于初学者来说并不是不切实际的。在这样的假设下，上述错误消息将是题外话。我们可以改进它吗？我们可能仍然需要弄清楚要对 的类型说多少`1`，但我们肯定可以更直接地解决这个问题。

是否有其他机会根据现实的简化假设重新构建错误消息？请注意，我是在问一个关于根据程序员经验模型更改错误消息文本的问题：我没有在本地考虑对哪些代码被认为是错误的任何更改（例如，假设初学者将在专业领域使用重载的东西类型，消除歧义）。

一个后续的想法：假设一个“配置文件”对学生进行建模，现有错误消息的文本是否包含足够的信息来支持这种转换？也就是说，一个有进取心的黑客能否在`ghci`不打扰总部忙碌的人们的情况下实施一个可理解性增强的后处理器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T14:35:41.087

我不相信为了错误消息而忽略某些功能会有所帮助。

一方面，初学者遇到的错误真的和其他人*有那么大的*不同吗？仅仅因为我知道如何解释“这个显然不是数字类型的荒谬事物的无 Num 实例”错误并不意味着我不会更欣赏 GHC 更清楚地指出我做了什么愚蠢的事情来挑起这样的消息。

我建议初学者或专家编写实例或任何其他类型的“高级”代码的情况差别很小。然而，初学者在这种情况下编码的频率要低得多，包括“从不”的下限。

如果有人希望将初学者与语言的神秘角落隔离开来，那么请确保他们根本不会遇到它们。例如 (ha, ha)，当第一次引入语言时，有一个论点是要完全避免类型类。

我想不出任何对初学者更友好的错误消息，只要它不丢弃信息，对其他人也不会更愉快。

> *假设我们要做出程序员不会声明新实例*的本地假设。

 *假设我们假设程序员不会声明类和/或类型由 Haskell 报告定义的*孤儿实例。*这个假设对于初学者来说是最现实的，事实上，作为一般规则似乎是合理的。

在极少数情况下，由于编译器错误而添加这样的实例是合理的。除了匿名作家 monad 的明显和令人讨厌的例外（除非自从我上次检查以来已经补救）标准类*和*类型的孤儿实例似乎极不可能，并且只有当库意外忽略了一些时才会出现其中一个或另一个实例， or 已经陈旧且尘土飞扬，足以早于诸如`Applicative`or之类的东西的流行`Foldable`。在任何情况下，任何*确实*想要这样一个实例的人都可以安全地假设他们知道他们做得足够好来解释 GHC 的错误消息，无论它可能是什么。

但是关于那个特定的例子就足够了。

> 是否有其他机会根据现实的简化假设重新构建错误消息？

很有可能，但我们也远未耗尽现实复杂假设的空间！

上述关于实例的题外话的要点是，通过使用编译器已经可用的信息和检查更大上下文的启发式方法（例如，在定义某些事物的地方，将上述示例与非孤立实例区分开来），可以改进错误消息一般来说。

> 一个后续的想法：假设一个“配置文件”对学生进行建模，现有错误消息的文本是否包含足够的信息来支持这种转换？

除了在最简单和最令人震惊的情况下，我真的看不出这个效果很好，你给出的例子是一个值得注意的例子。它可以改写现有的错误风格，但初学者将从现有消息可能不包含的更详细/明确的信息中受益最多。

考虑另外两个长期困扰初学者的错误消息：关于匹配“刚性类型变量”的抱怨，以及关于“无限类型”的抱怨。改写可能会在一定程度上改善这些问题，但如果没有在每条错误消息中包含关于多态性的教程，它不会对初学者修复他们的代码有太大帮助，除非您可以解释相关的表达式并输入足够好的内容以具体说明原因。

连同检查源代码，“翻译器”可能有一些腿，但我怀疑直接修改 GHC 将很快成为最简单的途径。生成错误消息将是一个有趣的扩展点，但我认为这不能通过 GHC 现有的插件基础设施来完成。

* * *

我预计，最大的障碍不是实施。相反，这是决定哪种启发式方法可以改善错误消息，而不是相反。没有客观数据的基础，这是一个容易出错（哈哈）的猜谜游戏。对 Haskell 程序员（主要是中级或新手）遇到的错误进行大量调查会非常有趣，最重要的是，他们为解决问题做了哪些实际*更改。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T09:04:26.893

我相信 Haskell 的 [Helium](http://www.cs.uu.nl/wiki/Helium)子集就是这样做的一个尝试。我已经很久没有尝试过了，但是 IIRC，它产生的错误信息比 GHC 好得多。*

# glsl - 基于可变权重计算线性高斯模糊的偏移量

> ID：12296372
> 
> 赞同：3
> 
> 时间：2012-09-06T08:52:45.330
> 
> 标签：glsl, blur, gaussian, sampling

我最近一直在研究通过使用线性采样方法而不是离散方法来优化高斯模糊着色器。

我读了一篇内容丰富的文章：

[线性采样的高效高斯模糊](http://rastergrid.com/blog/2010/09/efficient-gaussian-blur-with-linear-sampling/)

> 在两个纹理像素合并的情况下，我们必须调整坐标，使确定的坐标到纹理像素#1 中心的距离应该等于纹理像素#2 的权重除以两个权重的总和。在相同的样式中，确定的坐标到 texel #2 中心的距离应该等于 texel #1 的权重除以两个权重的总和。

虽然我理解这背后的逻辑，但我不确定他们是如何得出给定权重的偏移数字的。是否有人愿意为我提供更多的信息，并解释如何在给定统一的权重变量的情况下计算正确的偏移量？

关于非硬编码偏移量，我发现另一篇文章推荐了一种计算偏移量的方法，但是没有针对可变数量的样本发布解决方案。我怎么能做到这一点？

```
vec2 offsets[3];
offsets[0] = vec2(0.0, 0.0);

offsets[1] = vec2(dFdx(gl_TexCoord[0].s), dFdy(gl_TexCoord[0].t));

offsets[2] = offsets[1] + offsets[1]; 
```

![片段偏移](../Images/d6e1195399ed5c6eeacb5788ae1de009.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:39:48.270

我刚看到同一篇文章，发现它也非常有用。其中给出了计算权重和偏移量的公式：

[![公式](../Images/1db4a0f2b111a3f419a5bd5f84f77bbb.png)](https://i.stack.imgur.com/uAYiw.png)
[（来源：[rastergrid.com](http://www.rastergrid.com/blog/wp-content/uploads/2010/09/equation.png)）]

作者通过使用帕斯卡三角形中的第 12 行得出了权重。因此，例如，第二个偏移量通过以下方式计算：

```
1.3846153846 = (1 * 792 + 2 * 495) / (792 + 495) 
```

第二个权重计算如下：

```
0.1945945946 = (792 + 495) / 4070 
```

我不确定计算给定统一权重变量的偏移量是什么意思，但如果有帮助，我在这篇文章的末尾包含了一个 C++ 程序，它输出帕斯卡三角形中任意行的偏移量和权重。

如果我了解您关于非硬编码偏移量的问题，那么您希望能够在 GLSL 中即时计算偏移量吗？您可以通过移植下面的程序来做到这一点，但您仍然需要对二项式系数进行硬编码，或者还需要即时计算这些系数。然而，这将是昂贵的，因为它必须为每个像素完成。我认为更好的选择是预先计算 C（或您正在使用的任何编程语言）中的偏移量和权重，然后将它们绑定到 GLSL 中的统一数组值。这是我的意思的GLSL片段：

```
 uniform float offset[5];
    uniform float weight[5];"
    uniform int numOffsets; 
```

您需要将“5”替换为您计划使用的最大偏移量/权重，并将 numOffsets 设置为您用于特定操作的数字。

这是输出权重和偏移量的程序。“coeffs”应替换为帕斯卡表中所需行的二项式系数。这里包括的一个来自第 22 行

```
#include <iostream>
#include <vector>

using namespace std;

int main(int argc, char* argv[])
{
  float coeffs[] = { 705432, 646646, 497420, 319770, 170544, 74613, 26334, 7315, 1540, 231 };
  double total = coeffs[0];
  for (int i = 1; i < sizeof(coeffs) / sizeof(float); i++)
    {
      total += 2 * coeffs[i];
    }
  vector<float> offsets;
  vector<float> weights;

  offsets.push_back(0);
  weights.push_back(coeffs[0] / total);

  for (int i = 1;  i <= (sizeof(coeffs) / sizeof(float) - 1) / 2; i++) 
    {
      int index = (i - 1) * 2 + 1;
      float weight = coeffs[index] + coeffs[index + 1]; 
      offsets.push_back((coeffs[index] * index + coeffs[index + 1] * (index + 1)) /  weight);
      weights.push_back(weight / total);
    }

  for (int i = 0; i < offsets.size(); i++)
    {
      cout << offsets[i] << ", ";
    }
  cout << "\n";

  for (int i = 0; i < weights.size(); i++)
    {
      cout << weights[i] << ", ";
    }
  cout << "\n";
} 
```

# java - 在第 n 个字符处拆分字符串保留字

> ID：12296374
> 
> 赞同：2
> 
> 时间：2012-09-06T08:52:50.220
> 
> 标签：java, regex, split

扩展这个[答案](https://stackoverflow.com/a/12295805/487524)，使用这个正则表达式`(?<=\\G.{" + count + "})`；我还想修改表达式以*不在*中间拆分单词。

**例子：**

```
String string = "Hello I would like to split this string preserving these words"; 
```

如果我想分成 10 个字符，它看起来像这样：

> [Hello I wo, uld like t, o split th, is string , preserve, these wor, ds]

**问题：**

这甚至可以使用 only `regex`，还是需要词法分析器或其他一些字符串操作？

**更新**

这就是我想用它的：

```
+ --------------------------------------------JVM 信息---- -------------------------------------------------- +
 | sun.boot.class.path : C:\Program Files\Java\jdk1.6.0_33\jre\lib\resources.jar;C:\Program Files\Java\ |
 | jdk1.6.0_33\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_33\jre\lib\sunrsasig |
 | n.jar;C:\Program Files\Java\jdk1.6.0_33\jre\lib\jsse.jar;C:\Program Files\Java |
 | \jdk1.6.0_33\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_33\jre\lib\charset |
 | s.jar;C:\Program Files\Java\jdk1.6.0_33\jre\lib\modules\jdk.boot.jar;C:\Progra |
 | m 文件\Java\jdk1.6.0_33\jre\classes |
 + -------------------------------------------------- -------------------------------------------------- - +

```

它周围的框有字符限制减去键宽度，但这看起来不太好。这个例子也不是唯一的用例，我用那个框来处理多种类型的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-14T22:19:47.723

我已经看过这个问题，但这些回复都没有真正说服我！这是我的版本。很有可能可以改进。

```
public static String[] splitPresenvingWords(String text, int length) {
    return text.replaceAll("(?:\\s*)(.{1,"+ length +"})(?:\\s+|\\s*$)", "$1\n").split("\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:41:00.453

“中间不拆分单词”没有定义在“不拆分”的情况下应该发生什么。

给定分割长度为 10 和字符串：

```
Hello I would like to split this string preserving these words 
```

如果要在一个单词后立即拆分，则生成列表：

```
Hello I would, like to split, this string, preserving, these words 
```

您可以通过使用普通匹配来完成各种棘手的“拆分”。

只需匹配此表达式的所有出现：

```
(?s)\G.{10,}?\b 
```

（`(?s)`用于打开`DOTALL`标志。）

在 Perl 中它就像 一样简单`@array = $str =~ /\G.{10,}?\b/gs`，但 Java 似乎缺少返回所有匹配项的快速函数，因此您可能必须使用匹配器并将结果推送到数组/列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:10:18.163

没有正则表达式，但它似乎工作：

```
List<String> parts = new ArrayList<String>();
while (true) {
    // look for space to the left of n-th character
    int index = string.lastIndexOf(" ", n);
    if (index == -1) {
        // no space to the left (very long word) -> next space to the right
        // change this to 'index = n' to break words in this case
        index = string.indexOf(" ", n);
    }
    if (index == -1) {
        break;
    }
    parts.add(string.substring(0,  index));
    string = string.substring(index+1);
}
parts.add(string); 
```

这将首先查看第 n 个字符的左侧是否有空格。在这种情况下，字符串在那里被分割。否则，它会寻找右边的下一个空格。或者，您可以在这种情况下打破这个词。

# php - 如何用 Yii 隐藏 cgridview 过滤器？

> ID：12296381
> 
> 赞同：2
> 
> 时间：2012-09-06T08:53:25.553
> 
> 标签：php, yii

问：如何在 CGridView 中隐藏列？

状态：我按照 yii 论坛的帖子隐藏了[这里](http://www.yiiframework.com/forum/index.php/topic/13635-how-to-hide-a-column-in-cgridview/)和[这里](http://www.yiiframework.com/forum/index.php?/topic/13589-hidden-values-in-cgridview/)的列。但在我的网格视图中，右栏没有隐藏。它显示为空白。

这是我的视图代码

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'acc-recei-grid',
    'dataProvider'=>$model->search_arlist(),
    'filter'=>$model,
    'columns'=>array(
        array('name' => 'acc_category_id',
               'value'=>'(isset($data->acccategories->name)) ? CHtml::encode($data->acccategories->name) :""',
               'filter'=>CHtml::listData($acccategory, 'id', 'name'),
        ),
        //'customer_id',
        //'date',
        array('name' => 'job_id',
               'value'=>'(isset($data->jobs->name)) ? CHtml::encode($data->jobs->name) :""',
               //'filter'=>CHtml::listData($job, 'id', 'name'),
        ),

        array(
            'class'=>'CButtonColumn',
            'template'=>'{select}',
            'buttons'=>array
            (
                'select' => array
                (
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/icon_select.gif',
                    'options'=>array('style'=>'width:10px; border:none'),
                    'click'=>'function(){
                        var itemID = $(this).parents(\'tr\').find(\'.recei-id\').text();
                        $("#AccPaymentRecei_acc_recei_id").val(itemID); 
                        $("#accreceilist").dialog("close");

                    }',
                ),      
            ),
        ),
        array(
            'type'=>'raw',
            'value'=>'$data->id',
            //'filter'=>array('style'=>'visible:none'), 
            'headerHtmlOptions'=>array('style'=>'width:0px; display:none; border:none; textdecoration:none'),
            'htmlOptions'=>array('style'=>'display:none; border:none;', 'class'=>'recei-id'),  
            'header'=>false,
            'filter'=>false,
        ),
    ),
)); ?> 
```

但网格视图显示如下

![在此处输入图像描述](../Images/992086279d35714fca44032f42846ea6.png)

====== 更新

```
<div id="acc-recei-grid" class="grid-view">
<div class="summary">Displaying 1-1 of 1 result(s).</div>
<table class="items">
<thead>
<tr>
<th id="acc-recei-grid_c0"><a href="/mmaig_ceo/ceo-control-system/accRecei/Accreceilist?AccRecei_sort=acc_category_id">Acc Category</a></th><th id="acc-recei-grid_c1"><a href="/mmaig_ceo/ceo-control-system/accRecei/Accreceilist?AccRecei_sort=job_id">Job</a></th><th class="button-column" id="acc-recei-grid_c2">&nbsp;</th><th style="width:0px; display:none; border:none; textdecoration:none" id="acc-recei-grid_c3">&nbsp;</th></tr>
<tr class="filters">
<td><select name="AccRecei[acc_category_id]">
<option value=""></option>
<option value="1">asdfasdf</option>
</select></td><td><input name="AccRecei[job_id]" type="text" maxlength="11" /></td><td>&nbsp;</td><td>&nbsp;</td></tr>
</thead>
<tbody>
<tr class="odd"><td>asdfasdf</td><td>asdf</td><td class="button-column"><a style="width:10px; border:none" class="select" title="select" href="#"><img src="/mmaig_ceo/ceo-control-system/protected/assets/images/gridview/icon_select.gif" alt="select" /></a></td><td style="display:none; border:none;" class="recei-id">1</td></tr>
</tbody>
</table>
<div class="keys" style="display:none" title="/mmaig_ceo/ceo-control-system/AccRecei/Accreceilist"><span>1</span></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:41:10.177

对于您的特定示例，您可以使用纯 css：

```
#acc-recei-grid td:last-child, #acc-recei-grid th:last-child {display: none} 
```

但是有比使用隐藏列更好的方法在 javascript 中获取模型 ID：

```
$('.yourButtonColumnCssClass').live('click', function() {
    var id = $.fn.yiiGridView.getKey(
        'acc_category_id',
        $(this).closest('tr').prevAll().length 
    );
    $("#AccPaymentRecei_acc_recei_id").val(id); 
    $("#accreceilist").dialog("close");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:44:12.603

我猜过滤器`<td>`仍在显示，这就是为什么您仍在显示该列的原因。有关于扩展 CGridColumn 以便能够在此处的过滤器行上设置 htmloptions 的文档。

[http://www.yiiframework.com/forum/index.php/topic/20693-cgridcolumnfilterhtmloptions-missing-property/](http://www.yiiframework.com/forum/index.php/topic/20693-cgridcolumnfilterhtmloptions-missing-property/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:10:39.240

在您的模型中，您可以将函数定义为：

```
function getCategoryTextWithId()
{
  return "<span  style='display:none'>$this->id</span>" . ...
} 
```

然后在 CGridView 的列定义中，您可以像调用任何其他属性一样调用此函数。

您可以重用表达式，并避免呈现额外的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:55:33.700

尝试将 'filterPosition'=>'none' 和 'pager'=>array('header'=>'') 添加到 CGridView Widget 属性，如下所示：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'model-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'ajaxUpdate'=>false,
'filterPosition'=>'none',
'template'=>'{items}{summary}{pager}',
'pager'=>array('header'=>''),
'columns'=>array(
    'id',
    'name',
    'description',
    array(
        'class'=>'IButtonColumn',
    ),
),
)); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T09:22:20.723

**1.在CGridview中隐藏过滤器**

.items tr.filters{ 显示：无；}

**2.隐藏“高级搜索”链接**

a.search-button{ 显示：无；}

**3\. 在 CGridview 中隐藏摘要（例如显示 13 个结果中的 1-10 个。）**

.grid-view .summary{ 显示：无；}

# jquery - 实时链接中的 jquery 和样式

> ID：12296387
> 
> 赞同：0
> 
> 时间：2012-09-06T08:53:50.353
> 
> 标签：jquery, ajax, wordpress

我在尝试使用 WordPress 和实时链接时遇到了一些麻烦。

让我解释 ：

我在名为的类别中有此链接：

```
<a href="p?32" id="control">event 32</a> 
```

事件 32 由以下代码管理：

```
 $.ajaxSetup({cache:false});

  $('#control').click(function(){
    var post_id = $(this).attr('href')

    $('#calendar').animate({top:'-99em'},400,
      function(){
        $(this).hide();
        $('#theEvent').fadeIn(400);
        $('#theEvent').html('<div class="loading"></div>');
        $('#theEvent').load(post_id);
      });
    return false;

  }); 
```

这很完美，这首单曲的内容如下所示：

这是single.php：

```
<div class="space"></div>
<div class="clearfix">

    <?php the_post(); ?>
    <div class="descritpion">
        <h2><?php the_title(); ?></h2>
        <span><?php the_author(); ?></span>
        <?php the_content(); ?>
        <div class="center">
     <a href=# id="prev">Prev</a>
     <a href=# id="next">Next</a>
   </div>
 </div>

 <div class="gallery" >
  <a href="/#fourth" id="close" class="close">X</a>

  <div id="slideShow">
    <?php the_gallery(); ?>

  </div> 
```

该函数`the_gallery()`只是一个带有链接的图像循环：`<a rel="fancybox"><img/></a>`

> 编辑：06.09.12

图库功能与[附件插件一起使用](http://wordpress.org/extend/plugins/attachments/)

```
function the_gallery() {

    $attachments = attachments_get_attachments();
    $total_attachments = count($attachments);

    if( $total_attachments > 0 )
    {
        for ($i=0; $i < $total_attachments; $i++)

        {
            $url =  wp_get_attachment_image( $attachments[$i]['id'],
                'bullet-event');
            $lrgurl = wp_get_attachment_image_src( $attachments[$i]['id'], 'large' );

            echo '

            <a href="'.$lrgurl[0].'"
            rel="#overlay" title="'.$attachments[$i]['title'].'">
            ' . $url . '
            </a> ';

        }
    }

} 
```

单个 .php 中的 jquery 是：

```
var wrapEveryN = function(n, elements, wrapper) {
    for (var i=0; i< elements.length; i+=n) {
        elements.slice(i,i+n).wrapAll(wrapper);
    }
}

wrapEveryN( 12, $("#slideShow a"), '<div></div>' );

$('#slideShow').cycle({
    fx:     'scrollLeft'
}); 
```

问题来了，在单曲中我必须管理一个图片库（循环）一个fancybox和样式......唯一正确显示的是样式但我不知道为什么js不起作用：

我的所有代码和插件都在`plugins.php`&`main.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:06:47.897

我假设您的 js 代码处于就绪块中，因此不会执行 2 次。

试试这个例如：

```
$('#theEvent').load(post_id, function(){
  wrapEveryN( 12, $("#slideShow a"), '<div></div>' );

  $('#slideShow').cycle({
    fx: 'scrollLeft';
  });
}); 
```

PS：你应该只加载[页面片段](http://api.jquery.com/load/)

# php - 从 HTML 中提取文本

> ID：12296388
> 
> 赞同：-2
> 
> 时间：2012-09-06T08:53:51.170
> 
> 标签：php, parsing

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我正在尝试从 HTML 页面中提取一些文件夹名称，HTML 的源代码如下所示..

```
<li><a href="/"> Parent Directory</a></li>
<li><a href=".ftpquota"> .ftpquota</a></li>
<li><a href="Folder%201/"> Folder 1/</a></li>
<li><a href="Floder%202/"> Folder 2/</a></li>
<li><a href="Folder%20N/"> Folder N/</a></li> 
```

到目前为止，我创建的内容可以提取一些文件夹，但无法正确提取。

这是我所做的..

```
<?php

    $url = "URL";
    $page_data = file_get_contents($url);
    $search_pattern = "<li><a href=";
    $position = 0;

    while($position = strpos($page_data,$search_pattern, $position+strlen($search_pattern)))
    {
        //$pos2 = strpos($page_data, "\"> ", $position);
        //echo $position . " - " . $pos2 . " = " . ($pos2-$position) . "<br />";
        $str = substr($page_data,$position+strlen($search_pattern)+1, $pos2-$position);
        echo "<pre>" . $position . " || " . $str . "\n</pre>";
    }

?> 
```

每个文件夹都包含一些我将使用的文件，`copy()`因为我使用的是 Windows，所以我没有`wget`.

我在这里做错了什么？

这是我的输出：

```
156 || /"> Parent Directory
.ftpquota

Folder 1/

Folder 2/

Folder N/ 
```

但我真正需要的是：

```
Folder 1
Folder 2
Folder N 
```

因为稍后，我将遍历文件夹并复制文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:58:40.337

使用[DOMDocument](http://uk.php.net/DOMDOcument)和[DOMXPath](http://uk.php.net/DOMXPath) _`HTML`

```
$string = '<li><a href="/"> Parent Directory</a></li>
<li><a href=".ftpquota"> .ftpquota</a></li>
<li><a href="Folder%201/"> Folder 1/</a></li>
<li><a href="Floder%202/"> Folder 2/</a></li>
<li><a href="Folder%20N/"> Folder N/</a></li>
<li><a href="file.bin"> file.bin</a></li>';

$html = new DOMDocument(); 
$html->loadHTML($string);
$xpath = new DOMXPath($html);
$filtered = $xpath->query("//a/@href");

foreach($filtered as $one){
    if(strlen($one->nodeValue) > 1) {
        echo urldecode($one->nodeValue)."\n";
    }
} 
```

[键盘示例](http://codepad.org/eeVbpAaj)

# linux - linux cpu使用率

> ID：12296392
> 
> 赞同：3
> 
> 时间：2012-09-06T08:54:09.893
> 
> 标签：linux

我正在研究 unix。我想知道进程的当前 cpu 使用情况。我知道 ps 给出了进程启动之前使用的 CPU 的平均值——这不是当前的使用情况。

有没有办法只打印 top 命令中的 cpu 而没有 10 个以上的参数和标题？我知道如何使用 awk 来做到这一点——这不是我想要的方式。

```
top  -p 20705 -bc -n 1  | tail -n 2 | awk '{ print $9}' | head -n 1 
```

如果有另一种简单的方法可以做到这一点，而不是阅读 /proc/stat...

如果有一种简单的方法可以从 c++ 中做到这一点，那也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:03:25.790

您很可能需要阅读`/proc/stat`，但是，[这是一篇有趣的 C 代码文章](http://brokestream.com/procstat.html)，可能会对您有所帮助。要了解和使用程序的输出，您应该这样做`man 5 proc`。这是[源代码](http://brokestream.com/procstat.c)。

最重要的是，你需要阅读`/proc/stat`才能做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:37:24.533

查看 pid 为 24556 的进程的 cpu 使用情况

```
ps -p 24556 -o \%cpu= 
```

查看名为 syslogd 的进程的内存使用情况

```
ps -C syslogd -o \%mem= 
```

# java - 在 VMware 中使用 Windows-Server(2003/2008) 在 Java 中测试 LDAP 应用程序

> ID：12296394
> 
> 赞同：0
> 
> 时间：2012-09-06T08:54:13.697
> 
> 标签：java, ldap, windows-server-2008, vmware, windows-server-2003

我在 java 中为 LDAP 服务器（尤其是 Microsoft AD）制作了一个客户端应用程序，我的客户端应用程序将根据条目/基本 DN、搜索范围获取属性（将显示）。我已经制作了这个应用程序在网景和我的本地系统中（Windows 7）。

现在我测试这个应用程序的计划：

*   `First,I have installed VMware-Workstation(8.0.0 build-471780),then I'll installed Windows Server(2003 or 2008) iso image through VMware.`
*   `Next(will it be possible) to apply Microsoft AD services through this Windows Server version.`

我不想在其他系统中安装服务器版本进行测试。如果我的方法有误，请随时建议/评论此过程或纠正我 - 为最佳测试方法提供输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:03:39.023

当然，只要您有足够的资源，Windows 服务器（和 AD）并不介意它在哪里运行。在 VMware 中安装服务器，然后配置 AD。

# asp.net - 如何使用图像按钮重定向到另一个 aspx 页面？

> ID：12296403
> 
> 赞同：2
> 
> 时间：2012-09-06T08:54:49.003
> 
> 标签：asp.net, asp.net-mvc-4

我已经在我的一个 mvc 4 aspx 应用程序中放置了一个图像。现在我无法重定向到另一个 aspx 页面假设“video.aspx”。使用该图像作为按钮..

请帮我..

这是我的图像代码：-

```
 <img src="../../Content/myimages/arrow_img11.png" id="videopg"  style=" padding:0px; margin:50px 0px 0px 80px; position:absolute; width:40px; height:32px; z-index:5;"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:01:02.887

只需添加 onclick、onMouseDown、onMouseUP 中的任何一个：

```
<img src="../../Content/myimages/arrow_img11.png" id="videopg"  style=" padding:0px; margin:50px 0px 0px 80px; position:absolute; width:40px; height:32px; z-index:5;" onclick="window.location.href('http://www.google.de');" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:08:11.807

需要添加javascript函数如下

```
<img src="../../Content/myimages/arrow_img11.png" id="videopg" onclick="javascript:GotoPage();"  style=" padding:0px; margin:50px 0px 0px 80px; position:absolute; width:40px; height:32px; z-index:5;"  /> 
```

在 html head 部分使用下面的 JS 代码

```
 <script type="text/javascript" language="javascript">
    function GotoPage() {

        window.open("video.aspx", "_blank", "", ""); 
    }

</script> 
```

快乐的编码...

# c# - 很多复选框时出现 InvalidOperationException？

> ID：12296406
> 
> 赞同：0
> 
> 时间：2012-09-06T08:55:00.200
> 
> 标签：c#, asp.net, asp.net-mvc, iis

我有一个表单，它允许用户更改两种对象之间的依赖关系。

我有一个包含 30 个元素的集合，对于这 30 个元素中的每一个，我都可以选择另一个集合的 26 个元素中的一个、几个或全部。所以这基本上意味着我有类似 30*26 的复选框（复杂但由于业务逻辑而复杂）。而且我可能在同一页面上多次出现这种情况，所以我想我可能有 1100 多个元素。

它基本上存储在这个模型中：

```
public class VarDependency{
   public int Id { get; set; }
   public String Name { get; set; }
   public List<ValueDependency> Values { get; set; }
}

public class ValueDependency{
   public int Id { get; set; }
   public String Name{ get; set; }
   public List<AvailableValue> Triggers { get; set; }
}

public class AvailableValue{
   public bool IsSelected { get; set; }
   public String Text { get; set; }
   public int Value { get; set; }
} 
```

在视图中，我基本上有两个循环。对于每个可用的值，我都有一个 LabelFor（基于 Text 属性）、一个复选框（基于 IsSelected）和一个隐藏字段（基于 Value）。

当我没有那么多元素（比如 15*15）时，一切正常。我在控制器中接收数据并且可以处理它们，但我不知道为什么，如果我得到更多元素，我会很快得到一个异常，甚至在它到达控制器之前：

**System.InvalidOperationException 由于对象的当前状态，操作无效。**

```
System.Web.HttpException (0x80004005): The URL-encoded form data is not valid. ---> System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at System.Web.HttpValueCollection.ThrowIfMaxHttpCollectionKeysExceeded()
   at System.Web.HttpValueCollection.FillFromEncodedBytes(Byte[] bytes, Encoding encoding)
   at System.Web.HttpRequest.FillInFormCollection()
   at System.Web.HttpRequest.FillInFormCollection()
   at System.Web.HttpRequest.get_Form()
   at Microsoft.Web.Infrastructure.DynamicValidationHelper.ValidationUtility.CollectionReplacer.<>c__DisplayClass8.<MakeCollectionsLazy>b__2()
   at Microsoft.Web.Infrastructure.DynamicValidationHelper.ValidationUtility.CollectionReplacer.<>c__DisplayClass12.<ReplaceCollection>b__e()
   at Microsoft.Web.Infrastructure.DynamicValidationHelper.ValidationUtility.CollectionReplacer.<>c__DisplayClass12.<ReplaceCollection>b__11()
   at Microsoft.Web.Infrastructure.DynamicValidationHelper.DeferredCountArrayList.get_Count()
   at System.Collections.Specialized.NameObjectCollectionBase.get_Count()
   at System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, RequestValidationSource requestCollection)
   at System.Web.HttpRequest.get_Form()
   at System.Web.HttpRequestWrapper.get_Form()
   at System.Web.Mvc.HttpRequestExtensions.GetHttpMethodOverride(HttpRequestBase request)
   at System.Web.Mvc.AcceptVerbsAttribute.IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
   at System.Web.Mvc.HttpPostAttribute.IsValidForRequest(ControllerContext controllerContext, MethodInfo methodInfo)
   at System.Web.Mvc.ActionMethodSelector.<>c__DisplayClass11.<RunSelectionFilters>b__d(ActionMethodSelectorAttribute attr)
   at System.Linq.Enumerable.All[TSource](IEnumerable`1 source, Func`2 predicate)
   at System.Web.Mvc.ActionMethodSelector.RunSelectionFilters(ControllerContext controllerContext, List`1 methodInfos)
   at System.Web.Mvc.ActionMethodSelector.FindActionMethod(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.ReflectedControllerDescriptor.FindAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.ControllerActionInvoker.FindAction(ControllerContext controllerContext, ControllerDescriptor controllerDescriptor, String actionName)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

即使在 Visual Studio 的调试模式下，我也不会抛出异常。

我找不到有关如何解决此问题的任何线索，因此非常感谢任何帮助，当我们对版本进行一些测试时会出现问题：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:22:01.523

我认为这可能是由于最近引入了一个页面可以拥有的默认最大控件数。您可以在 web.config 中更改它 看看这个问题：

[ASP.NET MS11-100：如何更改发布表单值的最大数量限制？](https://stackoverflow.com/q/8684049/87609)

# linux - 如何将 libacl 用于 udev？

> ID：12296408
> 
> 赞同：1
> 
> 时间：2012-09-06T08:55:09.807
> 
> 标签：linux, linux-kernel, udev

我尝试安装udev，但这需要libacl。问题是如何安装/包含 libacl？我认为下载它并将其放入 /lib 目录就足够了。但不是。

一种替代方法是在 udev 配置中禁用 libacl。以下是 READ ME 中的相应文本：

```
 - Some udev extras have external dependencies like:
      libacl, libglib2, libusb, usbutils, pciutils, and gperf.
    All these extras can be disabled with configure options. 
```

但我不知道如何禁用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:42:06.113

1）不，这还不够。你不能使用你的包管理器来安装这个库（开发头文件通常包含在带有`-dev`后缀的包中）吗？

2) 在没有 libacl的情况下将`--disable-udev_acl`标志传递给`configure`脚本：

```
./configure --disable-udev_acl ... 
```

如果您想重建 debian 包：`debian/rules`在编辑器中打开文件并将`--enable-udev_acl`选项（在`CONFFLAGS_deb`部分中找到）更改为`--disable-udev_acl`并正常重建包。

# html - 如何显示多个 Canvas？

> ID：12296410
> 
> 赞同：1
> 
> 时间：2012-09-06T08:55:16.897
> 
> 标签：html, canvas

目前我希望能够显示多个画布。我的问题是我只能在 Google Chrome 中显示一个。在 FF 中，它向我展示了第一个画布和阴影，以及来自第二个画布的仅阴影。

这是一个示例[http://jsfiddle.net/ktVsF/](http://jsfiddle.net/ktVsF/)

虫子？还是编码不好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:23:04.187

问题是由于您没有定义`<canvas>`元素的高度和宽度属性。

根据 HTML 规范，“canvas 元素有两个属性来控制坐标空间的大小：宽度和高度。这些属性在指定时必须具有有效的非负整数值。解析非负数的规则整数必须用于获取其数值。如果缺少某个属性，或者如果解析其值返回错误，则必须使用默认值。宽度属性默认为 300，高度属性默认为 150。

因此，您的默认宽度和高度设置为 300 和 150，并且由于矩形中的顶部、左侧、底部、右侧属性，它超出了画布大小。

将其显式设置为更大的宽度和高度，您将看到您的矩形。

# html - 如何禁用 HTML 文本框焦点和该文本框值应提交

> ID：12296414
> 
> 赞同：4
> 
> 时间：2012-09-06T08:55:29.967
> 
> 标签：html, readonly, disabled-control

我正在处理表格

我用 ReadOnly

重点是是否有任何数据正在提交但无法编辑该文本框数据。

我在没有焦点的情况下使用禁用，没有编辑，但文本框值没有提交。

如何以我的形式解决这个问题

id 数量 价格 折扣 总计

输入 ID 后，ID 将自动聚焦价格和折扣文本框将自动填充表单 DB

当我输入数量时，下一个重点应该是折扣 - 我无法做到这一点，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T08:38:58.643

朋友们不知道它是如何工作的，但我的问题部分解决了我这样使用

* * *

```
<input type="text" readonly="readonly" onfocus="this.blur();" /> 
```

没有在我的页面中使用任何 JS，但文本框没有显示在焦点上

请在不使用 JS 的情况下提供更好的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-02T05:59:57.673

伙计，我通过将“onfocus”功能放在下一个输入上来做到这一点（然后TAB也会起作用）

```
function focarProximo() {
    var tipoSanguineo = window.document.getElementById('tipoSanguineo');
    tipoSanguineo.focus();
}
```

```
<input type="text" id="id" name="id" onfocus="focarProximo();">
<br>
<input type="text" id="tipoSanguineo" name="tipoSanguineo" placeholder="Tipo Sanguineo" required="required"> 
```

# django - 如何登录？带有 ApiKeyAuthentication 的 Django TastyPie 实际身份验证过程

> ID：12296416
> 
> 赞同：6
> 
> 时间：2012-09-06T08:55:37.613
> 
> 标签：django, authentication, login, tastypie

我有一个通过 TastyPie 与 Django 通信的 Adob​​e Air 移动应用程序。要使用该应用程序，人们必须先注册。因此，他们必须提供他们的电子邮件和密码。之后，他们将能够“登录”。我认为最好的办法是在输入成功的用户名/密码组合后，将 api-key 发送回移动应用程序并将其缓存，这样用户就“登录”了。

如果您认为注册和“登录”用户有更好的方法，请告诉我。

在 Django 内部，我有一个 UserRessource 类，用于在通过 POST 发送数据时注册新用户：

```
class UserResource(ModelResource):
    class Meta:
        allowed_methods = ['get', 'post']
        queryset = User.objects.all()
        resource_name = 'auth'
        authentication = Authentication()
        authorization = Authorization()
        fields = ['username', 'email']

    def obj_create(self, bundle, request=None, **kwargs):
        username, email, password = bundle.data['username'], bundle.data['password'], bundle.data['password'], 
        try:
            bundle.obj = User.objects.create_user(username, email, password)
        except IntegrityError:
            raise BadRequest('That username already exists')
        return bundle 
```

这很好用。

但现在我正在为实际的登录过程而苦苦挣扎。在我看来，最好通过 GET（和 https）将用户名和密码发送到此资源，如果这些是有效的，则返回用户 api 密钥。但这可能吗？它干净吗？如果您向该资源发送 GET 请求，通常 TastyPie 会显示数据库中当前的所有用户。但我不需要那些数据，所以我可以以某种方式覆盖它。我已经检查了[http://django-tastypie.readthedocs.org/en/v0.9.9/resources.html](http://django-tastypie.readthedocs.org/en/v0.9.9/resources.html)但我没有让它工作。甚至有可能覆盖该行为吗？

所以实际的问题是**使用 ApiKeyAuthentication“登录”用户的最佳方式是什么？** 我**的方法是正确和干净的还是你有更好的方法？****你有这个案例的例子吗**？

 **提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T21:58:49.620

我使用的是 BasicAuth，所以可能会略有不同。但我的解决方案基本上是一个需要身份验证的空资源。如果身份验证成功，服务将返回响应代码 200 和经过身份验证的用户，我会覆盖 obj_get_list 并将经过身份验证的用户填入其中。如果凭据错误，服务将返回响应代码 401。

```
 class LoginResource(ModelResource):
        class Meta:
            allowed_methods = ['get']
            resource_name = 'login'
            include_resource_uri = False
            object_class = User
            authentication = BasicAuthentication()
            authorization = DjangoAuthorization()

        def obj_get_list(self, bundle, **kwargs):
            return [bundle.request.user] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:00:57.170

好的，我将尝试解释我对该主题的看法：

首先，我的美味派页面上的 UserResource 示例有一个重要问题：用户对象不应在任何时候呈现给单个用户，它们应该能够看到他们是自己的“个人资料”或其他任何东西，但从不浏览和查看其他人。当然，这可以通过清除该资源的主要“列表视图”并将 APIKeyAuth 应用于各个配置文件来使用 UserResource 来完成，但我仍然不喜欢 UserResource 的想法。

在开发 API 时的第二种形式（例如使用美味派），APIKey 是实际的“密码”，因此应请求发送的不是用户名和密码，而是用户名和 APIKey，它是通过其他方式获得的（通常是电子邮件或某种基于网站的 UI）。建议通过授权标头而不是在 GET 参数中发送它们。

第三，当我们谈论 API 时，没有登录之类的东西——至少在 RESTFULL API 中没有——它在某种意义上是无连接的，所以你实际上要在每个请求中发送 Authorization 标头。至于问题，是的，您可以覆盖数据。查看 Tastypie 文档中的水合物/脱水循环，以了解它如何呈现内容，如果您有更多问题，请继续提问。**

# javascript - jquery remove 从另一个元素中删除

> ID：12296421
> 
> 赞同：1
> 
> 时间：2012-09-06T08:56:18.823
> 
> 标签：javascript, jquery

根据[here](http://api.jquery.com/remove/)，jquery的删除功能应该像这样工作..

```
$('div').remove('selector'); 
```

我[在这个例子中](http://jsfiddle.net/qwXSw/)尝试。

*HTML：*

```
<div class="wrapper">
    <p class="unwanted">This should be removed</p>
    <p class="retained">This will remain</p>
</div>​ 
```

*JavaScript：*

```
jQuery(document).ready(function($) {
    $('div').remove('p.unwanted'); //not working
    //$('p.unwanted').remove(); //this works
}); 
```

它不工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:58:05.017

您误解了文档的内容。它不是寻找与选择器匹配的匹配元素的后代元素，它只是将已经匹配的元素集过滤到与选择器匹配的元素，然后删除它们。

如果你有这个 HTML：

```
<div class="wanted">Some text</div>
<div class="wanted">Some more text</div>
<div class="unwanted">Some unwanted text</div> 
```

然后执行这个jQuery：

```
$('div').remove('.unwanted'); 
```

那么它只会删除第三个`<div>`（上面有`unwanted`类的那个），因为它首先选择*所有* `<div>`元素，然后只删除那些与选择器匹配的元素。

[示例 jsFiddle](http://jsfiddle.net/8kmww/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:01:26.610

您正在尝试删除既是 div 又是 p.unwanted 的东西。remove() 中的过滤器应用于当前节点集，在本例中为所有 div 元素。

改用子集：

```
$('div').children().remove('p.unwanted'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:57:47.293

您应该使用以下内容：

```
$('p').remove('.unwanted'); 
```

参数`remove`作为过滤器起作用。因此，在这里，您首先选择所有`<p>`元素，然后*仅*删除具有 class 的元素`unwanted`。

**演示：http:** [//jsfiddle.net/qwXSw/1/](http://jsfiddle.net/qwXSw/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:06:58.330

试试这个

```
 $(document).ready(function() {
    $('div').find('p.unwanted').attr('class', '');
}); 
```

# excel - 用户不活动后更改显示的工作表

> ID：12296422
> 
> 赞同：0
> 
> 时间：2012-09-06T08:56:22.400
> 
> 标签：excel, vba

我正在尝试创建一段代码，在一段时间不活动后链接到某个工作表，我的意思是不活动不是在工作表之间切换，所以当有人点击被视为活动的工作表时，但只要它在同一张纸上已经有一段时间了

这是我在 ThisWorkbook 中的代码

```
Private nTime As Date

Const proc As String = "SelectIndex"

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Source As Range)

    Call SetTimer

End Sub

Private Sub SetTimer()

    If nTime <> 0 Then

    Call Application.OnTime(EarliestTime:=nTime, Procedure:=proc, Schedule:=False)

    End If

    nTime = Now + TimeValue("00:00:05")

    Application.OnTime nTime, Procedure:=proc

End Sub 
```

这适用于输入数据，当有人长时间没有输入数据时它会进入我的工作表，但如果有人没有切换工作表，我希望它这样做，因为无论如何没有人有权输入数据，只需查看工作表。

它也只能工作一次，当您取消演示并再次尝试时，我收到错误

> “运行时错误'1004'对象'_应用程序'的方法'OnTime'失败”

只需克服这两个问题，如果有人可以帮助 J，我将不胜感激

有关信息，该过程`SelectIndex`只是一个切换到工作表 1 的宏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:32:43.023

如果我正确理解了这个问题，您可以在`Sheet_Activate`事件中触发计时器：

```
Private Sub Workbook_SheetActivate(ByVal Sh As Object)
    Call SetTimer   
End Sub 
```

# jquery - 当 jQuery 事件表达式中有一个点时，它意味着什么

> ID：12296431
> 
> 赞同：29
> 
> 时间：2012-09-06T08:56:53.947
> 
> 标签：jquery, events

我正在阅读一个 jQuery 插件，发现了一个奇怪的事件（至少对我来说）表达式，如下所示：

```
$(this).find('ul:first').bind('scroll.sticky', function(e) {
    //some code;
}); 
```

问题是“.sticky”是什么意思？我只知道“滚动”部分。我试图搜索 jQuery 文档但没有找到任何东西。你能指出我正确的页面吗？

非常感谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-06T09:00:01.653

这些是*命名空间事件*。

参考：[https ://api.jquery.com/event.namespace/](https://api.jquery.com/event.namespace/)

# javascript - jQuery删除图像

> ID：12296432
> 
> 赞同：5
> 
> 时间：2012-09-06T08:56:55.727
> 
> 标签：javascript, jquery

我的总体问题是延迟加载图像。我已经到了仅在图像出现在屏幕上时才加载图像的地步。我需要删除不在屏幕上的图像。

我想

```
$(image).removeAttr("src") 
```

会这样做，它会正确地删除 src，但它不会从屏幕上清除图像，也不会用 alt 中的内容替换它。

如何使它删除图像？注意，我不想删除 img 标签（我以后需要它），只是从屏幕上清除图像。

其他可能相关的代码（尽管我不知道为什么）-

```
updateCarImages:=>
    imagesOnScreen = $(@el).find(".carImageClass:onScreen")
    imagesOffScreen = _.without(cachedImagesOnScreen,imagesOnScreen)
    for image in imagesOnScreen
      imgSrc = $(image).attr("src")
      if (!imgSrc)
        id = $(image).data("tooltip-id")
        console.log(id)
        result = resultsStore.get(id+"")
        console.log(result)
        $(image).attr("src", result.get("carImageUrl"))
    console.log(imagesOffScreen)
    for image in imagesOffScreen
      $(image).removeAttr("src") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:22:46.323

如果您正在尝试清除内存（我认为这将是删除不可见图像的唯一原因），那么您就可以搭便车了。

没有万无一失的方法可以强制浏览器这样做。浏览器调用垃圾收集器的唯一方法是达到一定的内存限制，然后提示收集器应该首先采取什么。

将节点移动到 bin 并清空它被认为是一种好方法：

```
var $trash = $('<div>').hide().appendTo('body');

var waste = function(node) {
    $trash.append(node).html('');
} 
```

用空的 GIF 替换源可能会很幸运：

```
$(image).attr('src','data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAA‌​LAAAAAABAAEAAAICRAEAOw%3D%3D'); 
```

这也将使节点和图像宽度/高度保持在原位。

但我高度怀疑这是否会在您的情况下带来任何性能提升，最好的办法是不要给浏览器带来太多数据压力。

适用于 iPad 的 iOS（尤其是 4.x 版）以内存限制低而著称，如果您留下太多 IMG 节点，很容易崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:58:17.980

如果您的问题是性能，那么您可以使用预先存在的延迟加载 jQuery 插件。重新发明轮子是没有意义的。

[http://www.appelsiini.net/2012/lazyload-170](http://www.appelsiini.net/2012/lazyload-170)

* * *

或者，如果您不想使用此插件，您可以将`src`值存储在`data-*`属性中，并且仅`src`在您希望显示它时附加它。

**隐藏时**：

```
$(image).data("src", $(image).attr("src"));
$(image).removeAttr("src");
$(image).hide(); 
```

**显示时**：

```
$(image).attr("src", $(image).data("src"));
$(image).show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T08:59:24.130

要**隐藏**图像：

```
$(image).hide(); 
```

这将`style="display:none;"`在图像上设置并使其不出现

* * *

要**删除**图像：

```
$(image).remove(); 
```

这将从 DOM 中物理删除它，因此它不再存在

* * *

**混合**方法（将图像留在 DOM 中并允许您稍后更改）

```
//Remove the SRC and hide the image
$(image).removeAttr("src").hide();

//Then when you want to change to a new image
$(image).attr("src", "iamge.gif").show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:03:44.070

如果您想隐藏图像，但在占用空间且不影响容器滚动条的情况下将其保持在原位，请使用`visibility: hidden`样式：

```
$(image).css('visibility', 'hidden'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T08:59:28.293

您可以简单地隐藏图像。如果你不想去那里，你可以创建一个 1px 的图像，然后：

```
$(image).attr('src', '1px.png'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-10T06:28:22.417

您可以简单地从此代码中删除图像。我试过了。

```
$('.img2').dblclick(function()
{
    $(".img2").removeAttr('src');
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-04T18:29:22.977

以下代码显示了我如何能够删除图像源

```
 var image_holder = $("#preview-image-holder");
 image_holder.empty(); 
```

# android - Eclipse在开发android应用程序时冻结了很多，也是模拟器

> ID：12296437
> 
> 赞同：0
> 
> 时间：2012-09-06T08:57:40.687
> 
> 标签：android, eclipse, ubuntu

在 Ubuntu 上使用 Eclipse“Juno”和 Android 开发工具包工作时，它冻结了很多，我应该等待大约 40 秒才能恢复。这是为什么 ？？

当我构建项目，在布局或视图中做一些事情，提交到 git repo，运行模拟器时它会冻结（它冻结了一段时间没有写入 logcat 条目，然后我一次得到所有消息）和许多其他情况。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:01:24.307

试着给你的日食更多的记忆。在你的eclipse安装文件夹`eclipse.ini`下的文件`-vmargs`选项下：

```
-Xms256m
-Xmx1024m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T10:22:44.843

如果上述过程对您不起作用，请尝试一次

如果您遇到此问题，那么在 eclipse 中您应该能够看到一个包含数百或数千个文本文件的目录。Eclipse 将尝试处理它们。要告诉它不要这样做，请右键单击项目，然后单击属性 -> 资源 -> 资源过滤器。添加名称与文件夹名称匹配的全部排除规则。您可能还想对任何 .svn 文件夹等执行此操作。

[我在Recurring eclipse hang](https://stackoverflow.com/questions/8902338/recurring-eclipse-hanging)中找到了这个答案

# scorm - SCORM - 设置为只读模式

> ID：12296445
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:11.960
> 
> 标签：scorm, scorm2004

我们已经实现了基于基本 Web 播放器的简单 LMS，它是 SharePoint 学习工具包的一部分。现在我们正在寻找能够将 SCORM 设置为只读的方法，例如用于教师审查或家长。

是否有任何 SCORM 数据模型选项或可以设置为禁用其内容进行编辑的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:45:04.157

> 您不只是开发 SCORM API

我一直在开发 LMS-RTE 和 SCO 大约一年的时间不断改进和扩展。我了解到的一个典型事实是，几乎每个人都做得很糟糕。

SCORM 标准充其量是有点松散...... SCO <-> RTE 交互中存在的任何功能都必须在双方镜像。如果 LMS 供应商广告审查功能，每个 SCO 也必须实施它。没有办法从 LMS 端强制 SCO 的行为，因为有太多字段是可选的。更糟糕的是，无法自动检查 SCO 并确定是否使用了某个字段以及 SCO 是否按预期运行。

所以理论上 cmi.mode 预设审查应该可以解决问题，但我遇到的几乎每个内容供应商都忽略了这个设置。我认为你能从这里得到的一切都是答案：是的，这是可能的，但前提是 SCO 支持此功能。

我个人发现 SCO <-> RTE 通信的日志记录是确定 SCO 可能具有的行为的最佳解决方案。如果您将所有 get 和所有 set 请求记录到不同的日志中，并且记录 SCO 触及的属性，您将了解 SCO 可以做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:49:17.957

我认为您可以使用 cmi.mode 数据模型元素。请您再解释一下好吗？

# html - 将 div 放在 flash 对象上方

> ID：12296446
> 
> 赞同：4
> 
> 时间：2012-09-06T08:58:13.930
> 
> 标签：html, css

我试图将 div 菜单放在对象标签上方，但仍位于对象标签下方，以任何方式将其置于 flash 上方。

```
 <div>
<div class='menu'>menu</div>
<object width="400" height="40"

classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0">
<param nastatime="SRC" value="bookmark.swf">
<embed src="bookmark.swf" width="400" height="40"></embed>
</object>
</div>
<style>
#menu{
width: 100%;
clear: both;
float: left;
position: relative;
background: red;
z-index: 1111111;
}

object{
float: left;
position: absolute;
z-index: -13;
}
</style> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T09:04:27.407

嵌入内容时，您需要查看 Flash 的**wmode**参数。默认设置`wmode`是`"window"`将内容置于其他所有内容之上。将其设置为`"opaque"`或`"transparent"`允许正确分层。

有关详细信息，请参阅[http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:00:31.523

您正在使用类作为菜单，但在 css 中有 #，将其替换为 .Try this css

```
 <div class="main">
<div class="menu">menu</div>
<div class="fobject"><object width="400" height="40"

classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0">
<param nastatime="SRC" value="bookmark.swf">
<embed src="bookmark.swf" width="400" height="40"></embed>
</object>
    </div>
</div>​​​​​​​​​​​

    .main{
 position:relative   
}
.menu{
width: 100%;
clear: both;
float: left;
position: relative;
background: red;
z-index: 100;
}

.fobject{
float: left;
position: relative;
z-index: 10;
}​ 
```

# linux - HornetQ 活锁问题

> ID：12296449
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:18.557
> 
> 标签：linux, jakarta-ee, hornetq

我正在开发一个`HornetQ`用作消息服务器的应用程序。在`HornetQ`启动时，我总是收到与 HornetQ 实时锁定相关的错误。

我对这个特定问题进行了研究，但无法得出相同的结论。

此错误的堆栈跟踪如下所示。

```
[main] 21:09:09,516 INFO [org.hornetq.integration.bootstrap.HornetQBootstrapServer]
Starting HornetQ Server
[main] 21:09:11,208 WARNING [org.hornetq.core.deployers.impl.FileConfigurationParser]  
AIO wasn't located on this platform, it will fall back to using pure Java NIO. If your  
platform is Linux, install LibAIO to enable the AIO journal
[main] 21:09:11,283 INFO [org.hornetq.core.server.impl.HornetQServerImpl]  live server      
is starting with configuration HornetQ Configuration   
clustered=false,backup=false,sharedStore=true,journalDirectory=data/journal,bindingsDirecto     
ry=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
[main] 21:09:11,284 INFO [org.hornetq.core.server.impl.HornetQServerImpl]  Waiting to     
 obtain live lock 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:16:37.353

这是日志中的最后一条记录吗？我只看到一个与 libAIO 相关的警告，但它应该可以在没有它的情况下使用 java NIO。

# php - 我如何并排显示这些列

> ID：12296450
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:23.753
> 
> 标签：php

我在这里遇到了一些问题。基本上，我想比较列。所以我获取了对象，比较结果正如预期的那样出现。但是，在我添加 fetch_array 以查看当前表希望比较值出现在比较值旁边之后，它不再返回比较值。有什么办法可以运行比较代码并让它出现在表格中？我尝试了一个查询，但它只适用于 MySQL 而不是 PHP。

```
$query = "SELECT * FROM system_audit"; $result = mysql_query($query) or die(mysql_error());

echo " ID Type Setting Value ";

while($row = mysql_fetch_array($result)) { 

   echo  $row['ID']; 
   echo  $row['Type']; 
   echo  $row['Setting']; 
   echo  $row['Value'];       
}  

while ($row = mysql_fetch_object($result)) { 
    if($row->Setting != $row->Value) { 

        echo "X";
    } else { 
        echo "O"; 

    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:08:29.933

Your code contains a lot of echo's that have no use. I would suggest learning PHP a bit more.

Your compare is wrong, this should work :

```
$query = "SELECT * FROM system_audit"; 
$result = mysql_query($query) or die(mysql_error());

echo " ID Type Setting Value ";

while($row = mysql_fetch_array($result)) { 
   echo $row['ID'] . "<br>"; 
   echo $row['Type'] . "<br>"; 
   echo $row['Setting'] . "<br>"; 
   echo $row['Value'] . "<br>"; 

   if($row['Setting'] != $row['Value']) { 
        echo "X" . "<br>";
    } 
    else { 
        echo "O" . "<br>";
} 
echo "<br>"; 
```

# ios - 在 iOS 上，如果我们真的想做 initWithCenterAndSize，那么设置子视图的最佳方式是什么？

> ID：12296451
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:25.037
> 
> 标签：ios, objective-c, uiview

例如，如果我们要在主视图上绘制一个 100 x 100 像素的圆圈，覆盖 iPad 上的整个屏幕，则不要使用`initWithFrame`以下 2 个步骤`viewDidLoad`：

```
UINodeView *nodeView = [[UINodeView alloc] initWithFrame:
                               CGRectMake(x, y, NSNodeWidth, NSNodeHeight)];
nodeView.center = CGPointMake(x, y); 
```

因为`x`和`y`更优雅地`self.view.bounds.size.width / 2`将圆水平居中，而不是`self.view.bounds.size.width / 2 - NSNodeWidth / 2`. 是先按`init`帧，然后重置中心的好方法，还是有更好的方法，如果有`initWithCenterAndSize`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:04:42.450

这是一个很好的方法:)

我会先生成定位框架以避免额外的方法调用，但这只是个人喜好问题:)

如果你在你的应用程序中大量使用这个，你可以在 UIView 上创建一个实现这个的类别（警告，未经测试的代码:)

```
- (id)initWithCenter:(CGPoint)point size:(CGSize)size {
    CGRect frame = CGRectMake(point.x-size.width/2,
                              point.y-size.height/2, 
                              size.width,
                              size.height);
    return [self initWithFrame:frame];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:10:06.680

我通常这样做：

```
UINodeView *nodeView = [[UINodeView alloc] initWithFrame:
                           CGRectMake(0, 0, NSNodeWidth, NSNodeHeight)];
nodeView.center = CGPointMake(x, y); 
```

它看起来漂亮而清晰。

# java - Java注解递归依赖

> ID：12296452
> 
> 赞同：3
> 
> 时间：2012-09-06T08:58:27.067
> 
> 标签：java, recursion, annotations

我正在尝试在注释中创建一些信息树结构。经过一些尝试和帮助（请参阅[Java 注释中的类型层次结构](https://stackoverflow.com/questions/12294247/type-hierarchy-in-java-annotations)），我转向了以下模型。

```
@interface Node {
  LogicalExpression logicalExpression() default LogicalExpression.AND;
  Attribute[] attributes() default {};
  Node[] nodes() default {};
} 
```

这个节点应该允许我定义一级条件树。logicalExpression 中的值定义子节点（属性和另一个节点）之间的关系。问题是注释不允许递归依赖：

```
Cycle detected: the annotation type Node cannot contain attributes of the annotation type itself 
```

即使我将一些 NodeList 注释放入 Node 并且 NodeList 包含节点列表，循环依赖也会再次被识别。

```
@interface NodeList {
  Node[] nodes();
}

@interface Node {
  LogicalExpression logicalExpression() default LogicalExpression.AND;
  Attribute[] attributes() default {};
  NodeList nodes() default EmptyList;
} 
```

循环注释定义有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:06:28.437

这是因为这个[错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6264216)。

并且[注释的继承、多态性、“循环检测”限制是……](https://forums.oracle.com/forums/thread.jspa?messageID=4825763)线程讨论它。

您可以创建如下所示的内容

```
@interface NodeInfo {
    LogicalExpression logicalExpression() default LogicalExpression.AND;
    Attribute[] attributes() default {};
}

@interface Node {
    NodeInfo[] nodes() default {};
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-30T12:34:49.993

由于上述 Java 中的限制，您无法定义无限递归定义。但是你可以支持一些固定深度的结构，感觉就像递归的结构（直到你达到深度限制）

这是深度为 3 的布尔表达式语言的示例：

```
public @interface Expression {
    public Term value () default @Term;
    public And and () default @And;
    public Or or () default @Or;
} 
```

为每个级别定义“与”操作：

```
public @interface And {
    public boolean not () default false;

    public Term[] value () default {};

    public Or1[] or1 () default {};
    public Or2[] or2 () default {};

    public And1[] and1 () default {};
    public And2[] and2 () default {};
}

public @interface And1 {
    public boolean not () default false;

    public Term[] value () default {};

    public Or2[] or2 () default {};

    public And2[] and2 () default {};
}

public @interface And2 {
    public boolean not () default false;
    public Term[] value () default {};
} 
```

为每个级别定义“或”操作：

```
public @interface Or {
    public boolean not () default false;

    public Term[] value() default {};

    public Or1[] or1 () default {};
    public Or2[] or2 () default {};

    public And1[] and1 () default {};
    public And2[] and2 () default {};
}

public @interface Or1 {
    public boolean not () default false;

    public Term[] value () default {};

    public Or2[] or2 () default {};

    public And2[] and2 () default {};
}

public @interface Or2 {
    public boolean not () default false;
    public Term[] value () default {};
} 
```

现在我们可以像这样使用它：

```
@Expression(@Term("a"))
class A{}

// a or b
@Expression(or=@Or({@Term("a"), @Term("b")}))
class B{}

// a or (not(b and c))
@Expression(or=@Or(
    value=@Term("a"),
    and1=@And1(not=true, value={
        @Term("b"),
        @Term("b")
    })
))
class B{} 
```

如您所见，这个想法是在每次添加嵌套表达式时增加运算符注释的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T15:54:59.167

我知道我来晚了，但今天我不得不解决同样的问题，我发现这个问题没有真正的解决方案或解决方法。

但是，我设法使用以下结构“代理”递归：

```
@Inherited
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@interface Expression
{
    Node value();

    SubExpression[] subExpressions() default {};
}

@Retention(RetentionPolicy.RUNTIME)
@interface SubExpression
{
    String id();

    String operator();

    Node[] nodes();
}

@Retention(RetentionPolicy.RUNTIME)
@interface Node
{
    String subExpression() default "";

    String name() default "";

    String value() default "";
}

@Expression(
    value = @Node(subExpression = "1"),
    subExpressions = {
        @SubExpression(id = "1", operator = "AND",
            nodes = {
                @Node(name = "responsible", value = "foo"),
                @Node(subExpression = "2")
            }),
        @SubExpression(id = "2", operator = "OR",
            nodes = {
                @Node(name = "status", value = "closed"),
                @Node(name = "visibility", value = "public")
            }),
    })
public class TestAnnotationRecursion
{
    public static void main(String[] args)
    {
        Expression expression = TestAnnotationRecursion.class.getAnnotation(Expression.class);

        Map<String, SubExpression> subExpressionMap = Arrays.stream(expression.subExpressions())
            .collect(Collectors.toMap(x -> x.id(), x -> x));

        String result = parseNode(expression.value(), subExpressionMap);

        System.out.println(result);
    }

    public static String parseNode(Node node, Map<String, SubExpression> subExpressionMap)
    {
        String subExpressionId = node.subExpression();
        if(subExpressionId.isEmpty())
        {
            return node.name() + " = '" + node.value() + "'";
        }

        SubExpression subExpression = subExpressionMap.get(subExpressionId);

        return Arrays.stream(subExpression.nodes())
            .map(n -> parseNode(n, subExpressionMap))
            .collect(Collectors.joining(" " + subExpression.operator() + " ", "(", ")"));
    }
} 
```

这评估为：

```
(responsible = 'foo' AND (status = 'closed' OR visibility = 'public')) 
```

尽管它的可读性值得怀疑，但我认为这是在不允许显式递归时我们可以实现的最佳折衷方案。

# markdown - 如何使用 Redcarpet 和 Markdown 渲染表格

> ID：12296453
> 
> 赞同：17
> 
> 时间：2012-09-06T08:58:26.563
> 
> 标签：markdown, redcarpet

我正在尝试使用 Redcarpet 渲染这样的表格

```
| header 1 | header 2 |
| -------- | -------- |
| cell 1   | cell 2   |
| cell 3   | cell 4   | 
```

但它不起作用。

是否可以使用 Redcarpet 渲染表格？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-13T14:25:52.987

是的，您可以呈现这样的表格，但您必须启用该`:tables`选项。

```
require 'redcarpet'
markdown = Redcarpet::Markdown.new(Redcarpet::Render::HTML, :tables => true)

text = <<END
| header 1 | header 2 |
| -------- | -------- |
| cell 1   | cell 2   |
| cell 3   | cell 4   |
END

puts markdown.render(text) 
```

输出：

```
<table><thead>
<tr>
<th>header 1</th>
<th>header 2</th>
</tr>
</thead><tbody>
<tr>
<td>cell 1</td>
<td>cell 2</td>
</tr>
<tr>
<td>cell 3</td>
<td>cell 4</td>
</tr>
</tbody></table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-04T16:08:07.580

表格格式的公认答案很棒。尝试将其添加为评论会丢失格式。然而，将其添加为答案也有些问题。

无论如何...这是对有关使用带有 haml 的降价表选项的问题的回应（在 Rails 的上下文中）。

application_helper.rb

```
 def markdown(content)
    return '' unless content.present?
    @options ||= {
        autolink: true,
        space_after_headers: true,
        fenced_code_blocks: true,
        underline: true,
        highlight: true,
        footnotes: true,
        tables: true,
        link_attributes: {rel: 'nofollow', target: "_blank"}
    }
    @markdown ||= Redcarpet::Markdown.new(Redcarpet::Render::HTML, @options)
    @markdown.render(content).html_safe
  end 
```

然后在一个视图中（views/product_lines/show.html.haml）：

```
= markdown(product_line.description) 
```

# ios - 在不使用 Interface Builder 的情况下将 mapview 或任何其他视图添加到 Master-Detail View 应用程序的 detailViewController

> ID：12296454
> 
> 赞同：1
> 
> 时间：2012-09-06T08:58:27.707
> 
> 标签：ios, uisplitviewcontroller

如何将地图视图或 web 视图添加到主从视图应用程序的详细视图？

我使用以下代码创建了地图视图...

```
- (void)setDetailItem:(id)newDetailItem
{
if (_detailItem != newDetailItem) {
    [_detailItem release];
    _detailItem = [newDetailItem retain];

    // Update the view.

    //CREATE MAPVIEW
    mView = [[MKMapView alloc] initWithFrame:self.view.bounds];
    mView.mapType = MKMapTypeHybrid;

    CLLocationCoordinate2D coord = { 61.2180556, -149.9002778};
    MKCoordinateSpan span = {0.2, 0.2};
    MKCoordinateRegion region = {coord, span};

    [mView setRegion:region];

    //MAPVIEW CREATED

    [self configureView];

   } 
```

现在，我使用以下代码在详细视图中显示它：

```
- (void)configureView
{
// Update the user interface for the detail item.

if (self.detailItem) {
    [self.view addSubview:mView];
    }

} 
```

但这不是在详细视图中加载地图视图。

我想通过代码实现这一点，而不是使用 Interface Builder 来删除地图视图，然后将其与 IBOutlet 链接。

我想下面的代码行应该有帮助。

```
[self.view addSubview:mView]; 
```

# jquery - 始终使用 ajax 请求/发布发送某些值

> ID：12296456
> 
> 赞同：1
> 
> 时间：2012-09-06T08:58:40.913
> 
> 标签：jquery, ajax

我正在构建一个显示用户列表的系统，并在选择用户时请求某种形式的密码。这些值保存在页面上的隐藏字段中，并且需要作为身份验证的形式与每个请求一起发送。（我知道其中存在 MITM 漏洞，但它是一个非常低调的系统，因此安全性不是一个大问题）。

现在我需要在每个请求中发送这些值，以验证当前“登录”的用户。我想通过 自动化这个，`ajaxSetup`但是我遇到了一些问题。

我的第一次尝试是：

```
init_user_auth: function(){
    $.ajaxSetup({
        data: {
            'user'    : site_user.selected_user_id(),
            'passcode': site_user.selected_user_pc(),
            'barcode' : site_user.selected_user_bc()
        }
    });
}, 
```

但是，正如我应该知道的那样，这会在调用时读取一次值`ajaxSetup`，并且永远不会重新读取它们。我需要的是一种在每次进行 ajax 调用时实际调用函数的方法。

我目前正在尝试了解这里发生了什么：[https](https://groups.google.com/forum/?fromgroups=#!topic/jquery-dev/OBcEfgvTJ9I) ://groups.google.com/forum/?fromgroups=#!topic /jquery-dev/OBcEfgvTJ9I，但是通过火焰战和那里发生的非常低级的事情，我不确定我知道发生了什么。

这是继续的方式，还是我应该面对事实并手动将登录信息添加到每个 ajax 调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:15:41.253

如果我猜对了，请查看此示例代码，它会为每个 ajax 请求添加某些值，

```
(function ($) {
    var _ajax = $.ajax,
    A = $.ajax = function(options) {                    
        if (typeof options.data == 'object') {                      
            $.extend( options.data, A.data );
        } else if (typeof options.data == 'string' && options.data.length > 0) {
            for (var key in A.data) {
                options.data += '&' + encodeURIComponent(key) + '=' + encodeURIComponent(A.data[key]);
            }
        } else {
            options.data = A.data;
        }
        return _ajax(options);
    };
})(jQuery); 
```

你这样称呼它：

```
$.ajax.data = { "user": 10, "pass" : 20 }; //params that always need to be passed 
```

然后ajax调用，

```
$.ajax({
    type: "POST",
    url: "http://localhost/blg/crl_chk.php",
    data : { "first" : 1},  //now those params will be added wit this
    success: function(resp) {
    console.log( resp );
    }
}); 
```

如果您`$.ajax`在没有数据的情况下调用，这些参数将被传递。

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:15:05.593

似乎只有在将 Ajax 设置对象与您的存根合并时，才会调用您想要调用的函数。（大概在第一个ajax请求期间）

你可以做的是让你的数据对象引用全局变量而不是函数。

“但那不会在`$.ajax()`你说的每次调用时调用函数吗？

只需在`.ajaxSend()`or处调用您的函数`.ajaxStart()`并让它们更新全局变量！

[http://api.jquery.com/ajaxSend/](http://api.jquery.com/ajaxSend/)

[http://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)

# excel - 每次使用循环将列中的每个单元格复制到新工作表中的特定单元格

> ID：12296462
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:48.620
> 
> 标签：excel, copy-paste, vba

我寻求您的帮助，将第一个工作表（D 列）中的单元格值复制到 16 个现有工作表中的指定单元格位置

我想
在 sheet1 到 sheet2 中的 D2 中的值（G5）

表 1 到表 3 中的 D3 (G5)

D4 在 sheet1 到 sheet4 (G5)

依此类推，直到 D16 被复制到 sheet16 的 G5

我是新手，我查看了几个答案并尝试自己解决，但是....什么也没发生

```
Sub latitude()
Dim WS_Count As Integer
Dim I As Integer
WS_Count = ActiveWorkbook.Worksheets.Count
For I = 1 To WS_Count
Do Until IsEmpty(ActiveCell)
Sheets("Calculations").Select
Range("d2").Copy
    ActiveCell.Offset(1, 0).Select
'at this point i want it to copy "D3" on next loop
ActiveSheet.Range("G5").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Loop
ActiveSheet.Next.Select
' and because the "Sheets("Calculations").Select" above takes it to the first sheet the whole script is a waste till now
Next I
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:29:50.983

试试这个。

```
Option Explicit
Sub Copy_to_G5()
    Dim sht1 As Worksheet, ws As Worksheet
    Dim i As Integer
    Dim shtname As String

    With Application
        .DisplayAlerts = False
        .ScreenUpdating = False
    End With

    Set sht1 = Sheets("Sheet1")
    i = 2
    Do Until i = 17
        shtname = "Sheet" & i
        sht1.Cells(i, 4).Copy
        Sheets(shtname).Range("G5").PasteSpecial
    i = i + 1
    Loop

    With Application
        .DisplayAlerts = True
        .ScreenUpdating = True
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:54:21.123

Alistairs 的尝试很好，但是我不会使用`shtname = "Sheet" & i`，而是尝试以下解决方案并考虑对其进行防弹处理（工作表的存在）；）

```
Sub Copy_to_G5()
    Dim i As Integer

    With Application
        .DisplayAlerts = False
        .ScreenUpdating = False
    End With

    i = 2
    Do Until i = 17
        With ThisWorkbook
        .Worksheets(1).Cells(i, 4).Copy
        .Worksheets(i).Range("G5").PasteSpecial
        End With
    i = i + 1
    Loop

    With Application
        .DisplayAlerts = True
        .ScreenUpdating = True
    End With
End Sub 
```

# javascript - 将监听器 OnReady 添加到 extjs ComboBox

> ID：12296463
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:51.990
> 
> 标签：javascript, ajax, combobox, extjs4.1, onready

无论如何，只有在组合框准备好时才执行功能？

我遇到了麻烦，因为在 Ext.OnReady 结束时，有时组合似乎还没有准备好，并且调用一个函数来用 ajax 调用填充它的值会导致很多麻烦。

我正在寻找一种正确的方法来做到这一点，而不是

```
setTimeout(function(){myDataFiller();},300);
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T00:03:58.227

尝试这个：

```
var combo = new Ext.form.field.ComboBox({
    /* config settings, blah blah blah */
    listeners: {
        afterrender: {
            single: true,
            fn: function(combobox){
                Ext.Ajax.request({
                    /* request settings */
                    success: function(data){
                        var value;
                        /* process your data response */
                        combobox.setValue(value);
                    }
                });
            }
        }
    }
}); 
```

或者，如果您已经从 Ajax 请求中获得了值，则可以直接在`afterrender`函数中设置该值。注意`single: true`上面的使用。这意味着该函数只会执行一次，因此如果某些事情导致您的组合框重新呈现，您最终不会错误地重置该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:27:13.613

看来这是基于cpu的渲染问题。

我在 Intel Core 2 Duo 上做了一些测试，我可以重现错误。之后我尝试了i7 cpu，一切都很好。

# django - 将所有已完成的订单移至页面底部

> ID：12296464
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:53.487
> 
> 标签：django, e-commerce

我正在用 django 建立一个电子商务网站。

我正在创建处理订单的页面。

我想这样当一个项目“交付”时，该订单将位于列表的底部。

![在此处输入图像描述](../Images/e90af8c1785a5e61f242db6ef467a0f4.png)

views.py def 订单（请求，小时）：

```
 #changes status of order from submitted to shipped
    if request.method == 'POST':

        SUBMITTED = 1
        PROCESSED = 2
        SHIPPED = 3
        CANCELLED = 4

        order_id = request.POST['order_id']
        this_order = Order.objects.get(pk=order_id)

        if this_order.status == SUBMITTED or this_order.status == PROCESSED:
            this_order.status = SHIPPED

        elif this_order.status == SHIPPED:
            this_order.status = SUBMITTED

        this_order.save()

        return HttpResponseRedirect('/orders/' + hour)

    #Get all orders from the past 24 hours
    tz=pytz.timezone('America/Los_Angeles')
    now_nonaware = datetime.datetime.now()
    now = timezone.make_aware(now_nonaware,tz)

    orders = Order.objects.filter(date__range=[now - datetime.timedelta(hours=20), now]).filter(time=hour)

    #get all orders from every college drop
    revelle_orders = orders.filter(location = "revelle")
    muir_orders = orders.filter(location = "muir")
    marshall_orders = orders.filter(location = "marshall")
    erc_orders = orders.filter(location = "erc")
    warren_orders = orders.filter(location = "warren")
    sixth_orders = orders.filter(location = "sixth")

    orderlocations = {"revelle": revelle_orders, "muir" : muir_orders, "marshall" : marshall_orders,
                        "erc": erc_orders, "warren": warren_orders, "sixth": sixth_orders}
    orders_dict = {"orderlocations" : orderlocations, "hour": hour}
    return render_to_response('orders.html', orders_dict, context_instance=RequestContext(request)) 
```

HTML：

```
Order page for {{hour}}
</br>
</br>
{% for location, orders in orderlocations.items %}

    {% if orders %}
        {{ location|capfirst }}
        <table>
            <tr>
                <td>#</td>
                <td>Name</td>
                <td>Email</td>
                <td>Order</td>
                <td>Delivered</td>
                <td>Phone</td>

            </tr>

            {% for ord in orders %}
                {% for food in ord.orderitem_set.all %}

                <tr>
                    {% if forloop.counter == 1 %}
                        <td>{{forloop.parentloop.counter}}</td>
                        <td>{{ord.full_name}}</td>
                        <td>{{ord.email}}</td>

                    {% else %}
                        <td colspan="3"></td>
                    {% endif %}

                        <td>{{food.name}} (x{{food.quantity}})</td>

                    {% if forloop.counter == 1 %} 

                    <td>
                            <form action="" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="order_id" value="{{ ord.pk }}"/>
                                <input type="hidden" name="action=" value="toggledelivery"/>
                                <button type="submit">{% ifnotequal 3 ord.status %} Not {% endifnotequal %}Delivered</button>
                            </form>
                    </td>

                    <td>{{ord.phone}}</td>
                    {% endif %}        

                </tr>
                {% endfor %}
            {% endfor %}

        </table>  
    </br>
    </br>
    {% endif %}

{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:25:25.510

这听起来像是对类中的元选项进行[模型排序的工作。](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)

例如，在您的模型类中添加一个名为 Meta 的子类：

```
class MyModel(models.Model):
    # model fields here...

    class Meta:
        ordering = ['status'] 
```

您可以`-`在状态前添加一个以降序排序。您还可以将多个字段链接在一起进行排序：

```
class Meta:
    ordering = ['status', '-order_date'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:38:41.150

嗯，因为有这个部分

```
 <button type="submit">{% ifnotequal 3 ord.status %} Not {% endifnotequal %}Delivered</button> 
```

在您的订单视图中可能是这样的？

```
orders = Order.objects.filter(date__range=[now - datetime.timedelta(hours=20), now]).filter(time=hour).extra({"is_completed_order": "status == 3"}).order_by('is_completed_order') 
```

例如计算一个额外的 is_completed_order 布尔字段并对其进行排序

# android - 滑动页面时如何播放短音？

> ID：12296465
> 
> 赞同：3
> 
> 时间：2012-09-06T08:58:54.070
> 
> 标签：android, android-viewpager, android-mediaplayer, fragmentpageradapter

我对 ViewPager 有疑问，无法在此站点或通过 Google 搜索找到答案。
滑动页面时如何播放短音？
如何更改我的代码，我想添加 mediaplayer/Play sound 。（原始文件夹中的声音）
谢谢，

```
@Override
public void onCreate(Bundle savedInstanceState) {    
super.onCreate(savedInstanceState);    
setContentView(R.layout.main);     
MyPagerAdapter adapter = new MyPagerAdapter();   
ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);    
myPager.setAdapter(adapter);    
myPager.setCurrentItem(2);
}

private class MyPagerAdapter extends PagerAdapter { 

        public int getCount() { 
                return 5; 
        } 

        public Object instantiateItem(View collection, int position) { 

                LayoutInflater inflater = (LayoutInflater) collection.getContext() 
                                .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 

                int resId = 0; 
                switch (position) { 
                case 0: 
                        resId = R.layout.farleft; 
                        break; 
                case 1: 
                        resId = R.layout.left; 
                        break; 
                case 2: 
                        resId = R.layout.middle; 
                        break; 
                case 3: 
                        resId = R.layout.right; 
                        break; 
                case 4: 
                        resId = R.layout.farright; 
                        break; 
                } 

                View view = inflater.inflate(resId, null); 

                ((ViewPager) collection).addView(view, 0); 

                return view; 
        } 
        @Override 
        public void destroyItem(View arg0, int arg1, Object arg2) { 
                ((ViewPager) arg0).removeView((View) arg2); 
         } 

        @Override 
        public boolean isViewFromObject(View arg0, Object arg1) { 
                return arg0 == ((View) arg1); 
         } 

        @Override 
        public Parcelable saveState() { 
                // TODO Auto-generated method stub 
                return null; 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:33:29.373

一个例子：

```
private static final int rId = R.raw.sound;
private int sid=-1;
private boolean loaded = false;
SoundPool soundPool;

private SoundPool.OnLoadCompleteListener listener = 
new SoundPool.OnLoadCompleteListener(){
@Override
public void onLoadComplete(SoundPool soundPool, int sid, int status){ // could check status value here also
  if (this.sid == sid) {
    this.loaded = true;
  }
}
};

public void initSound() {
  soundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 100);
  soundPool.setOnLoadCompleteListener(listener);
  this.sid = soundPool.load(getApplicationContext(), rId, 1); 
}

public void SoundPlay() {
  new Thread(new Runnable() {
    @Override
    public void run() {
      if (loaded) {
      soundPool.play(this.sid, 1.0, 1.0, 1, 0, 1f);     
        }
  }).start();
} 
```

因此，您将添加一个构造函数，例如：

```
MyPagerAdapter() {
  initSound();
} 
```

并使用 SoundPlay() 在 instantiateItem() 中每次播放；

我没有按原样测试上面的代码，但在我自己的东西中使用了类似的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:13:26.747

使用[声音池](http://developer.android.com/reference/android/media/SoundPool.html)。它专为播放短声音而设计（尤其是在游戏、多媒体应用程序中）。

这是一个教程 - [http://content.gpwiki.org/index.php/Android:Playing_Sound_Effects_With_SoundPool](http://content.gpwiki.org/index.php/Android:Playing_Sound_Effects_With_SoundPool)

# python - django-evolution 不适用于 django.contrib.gis.db.backends.postgis

> ID：12296466
> 
> 赞同：0
> 
> 时间：2012-09-06T08:58:57.357
> 
> 标签：python, django, postgis, geodjango, django-evolution

我无法为我的 GeoDjango 项目运行“./manage.py Evolution --hint --execute”。它退出并出现错误：

```
File "/home/viktor/.virtualenvs/senv/lib/python2.6/site-packages/django_evolution-0.6.7-py2.6.egg/django_evolution/db/__init__.py", line 18, in     __init__
module = __import__('.'.join(module_name),{},{},[''])
ImportError: No module named django.contrib.gis.db.backends.postgis 
```

这是突变提示：

```
from django_evolution.mutations import AddField, DeleteField
from django.contrib.gis.db.models.fields import PointField

MUTATIONS = [
    AddField('Geodata', 'position_real', PointField, initial=<<USER VALUE REQUIRED>>),
    AddField('Geodata', 'position', PointField, initial=<<USER VALUE REQUIRED>>),
    DeleteField('Geodata', 'real_lat'),
    DeleteField('Geodata', 'lat'),
    DeleteField('Geodata', 'lng'),
    DeleteField('Geodata', 'real_lng')
]
#----------------------
Trial evolution successful. 
```

但是，使用 *backends.postgis 数据库引擎的 Web 应用程序运行良好。这似乎只是一个 django-evolution 问题。

有什么想法可以让进化发挥作用吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:39:07.900

我只是通过添加`DATABASE_ENGINE = "postgresql"`我的`settings.py`.

查看使用此变量的代码`site-packages/django_evolution-0.6.0-py2.7.egg/tests/utils.py`（您的路径可能会略有不同），`utils.py`将根据数据库调用`django_evolution-0.6.0-py2.7.egg/django_evolution/db`. 然后查看`postgresql.py`db 目录中的文件，它似乎是一个简短的脚本，它针对您的数据库实现运行一些基本测试。由于 postgis 后端与开箱即用的 postgres 不太可能有显着不同，我相信使用 postgresql 作为您的`DATABASE_ENGINE`值是安全的。

# http - : 导致 406 不可接受

> ID：12296468
> 
> 赞同：2
> 
> 时间：2012-09-06T08:58:59.370
> 
> 标签：http, http-status-code-406

我`406 Not Acceptable`上车：

```
/process.php?return=http://blog 
```

但不在：

```
/process.php?return=http//blog 
```

唯一的区别是`:`

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:00:55.423

你需要`%3A`像这样转义冒号：

```
/process.php?return=http%3A//blog 
```

根据您对 URL 所做的操作，您可能还会发现转义斜杠`%2F`是个好主意：

```
/process.php?return=http%3A%2F%2Fblog 
```

有关更多信息，请参阅此处的“保留字符”：http: [//www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)。

# javascript - 当内部有一个带有zepto的iframe时，touchend的触发器可能会导致错误

> ID：12296474
> 
> 赞同：1
> 
> 时间：2012-09-06T08:59:17.340
> 
> 标签：javascript, iframe, zepto

我已经在[http://jsfiddle.net/57dZQ/上制作了一套西装](http://jsfiddle.net/57dZQ/)

zepto.js:1340 中“touchend”的回调似乎执行了两次

要重现此问题，您需要打开 chrome 开发人员工具的“模拟触摸事件”

然后打开[http://jsfiddle.net/57dZQ/](http://jsfiddle.net/57dZQ/)

稍等片刻，点击src为'zeptojs.com'的iframe，你会看到一些错误日志'Uncaught TypeError: Cannot call method 'trigger' of undefined'

# java - 太多 SQL 变量和 NOT IN 子句

> ID：12296481
> 
> 赞同：4
> 
> 时间：2012-09-06T08:59:30.077
> 
> 标签：java, android, sql, sqlite

我有一个包含 id 集合（sqlite Android）的表，以及我想要保留的 id 集合。

然后如果 toRetain = [1,2,3,4] 我创建一个执行：

```
DELETE FROM my_items WHERE _id NOT IN (1,2,3,4); 
```

但是如果要保留的项目的长度非常长，SQL 引擎会抛出异常：**“too many SQL variables”**。由于该子句不在，我不能以较小的步骤进行。

我该如何解决？

我认为一种解决方案是将所有 id 插入临时表中，然后执行：

```
DELETE FROM my_items WHERE _id NOT IN (SELECT_id FROM items_to_delete); 
```

该解决方案是否正确有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T09:04:34.797

我认为创建一个临时表或表变量，然后插入所有要保留的 ID。然后通过将此临时或表变量加入主表来从主表中删除。

在这里我建议创建一个索引，如果你使用临时表也使用 NOT IN 的内连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:11:45.213

当您对查询中的值进行硬编码时，Android 不喜欢它，请尝试

```
db.delete("my_items", "_id NOT IN (?, ?, ?, ?)", String[] {"1", "2", "3", "4"}); 
```

或者，如果您使用 ContentProvider，则：

```
getContentResolver().delete("content://uri/to/my/items", "_id NOT IN (?, ?, ?, ?)", String[] {"1", "2", "3", "4"}) 
```

# websphere - WebSphere 技术堆栈与 Oracle WebLogic 堆栈

> ID：12296482
> 
> 赞同：2
> 
> 时间：2012-09-06T08:59:31.287
> 
> 标签：websphere, weblogic, ibm-mq

我们目前拥有以下技术栈，我们对此非常满意：

```
IBM Edge Servers
IBM HTTP Server
WebSphere Application Servers 6.1 (EOL Sep 31st)
WebSphere MQ Series
Oracle Database + Some DB2 databases. 
```

我们的组织即将与 Oracle 签署公司范围内的无限许可协议，我们想知道我们的 Web 应用程序堆栈对我们的好处。那么作为一个非 Oracle 的家伙，这个设置的非 IBM 堆栈是什么？

```
Does Oracle provide an equiv edge server
Apache HTTP Server?
WebLogic Application Server 10.3
Messaging Backbone? 
Oracle Databases. 
```

谢谢

# c# - 如何从 C# 连接到 HyperSQL DB

> ID：12296487
> 
> 赞同：0
> 
> 时间：2012-09-06T08:59:39.807
> 
> 标签：c#, .net-2.0, hsqldb

我们正在寻找具有所需功能的内存数据库：

> *   客户端/服务器模式
> *   支持SQL、存储过程
> *   可以在“内存中”模式下运行
> *   轻便快速
> *   自由的
> *   可以从 C# 连接

HSQLDB 满足我们所有的要求。但是我们在最后一个选项上遇到了麻烦。我们找不到任何从 C# 连接到该数据库的组件。请向我们推荐可以满足我们所有要求的良好连接组件或其他数据库。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:08:37.883

存在 HSQLDB 2.x 到 C# 的翻译，其中包含一些与 MS 平台相关的增强功能。主网站似乎已经消失，但博客仍然存在：

[http://blog.effiproz.com/](http://blog.effiproz.com/)

# perl - Perl File::Fetch 失败，因为 URL 没有文件部分

> ID：12296489
> 
> 赞同：5
> 
> 时间：2012-09-06T08:59:41.747
> 
> 标签：perl, download

我正在运行一个从数据库中提取 URL 并执行 file::fetch() 的脚本。据我了解， file::fetch() 仅在 URL 中确实有要下载的文件时才有效。

但是，在我的数据库中，偶尔会出现没有要获取文件的 URL。那么，是否有任何模块可以用来检查我正在尝试执行 file::fetch() 的 URL 中是否存在文件？

我的脚本中有一行

```
my $uri_handle = File::Fetch->new(uri => $url); 
```

其中 $url 可能类似于`http://asiaone.com`没有实际获取的文件。

我得到这个错误，我拼命试图避免，因为还有其他 URL 主要包含要获取的文件。

```
Use of uninitialized value $path in pattern match (m//) at C:/Perl/lib/File/Spec/Unix.pm line 267.
Use of uninitialized value in string eq at C:/Perl/lib/File/Fetch.pm line 395.
Hostname required when fetching from 'http' at C:\test\multihashtest2.pl line 100 thread 2 
```

如何格式化我的正则表达式以检查文件，或者是否有我可以使用的模块来促进这一点？

合法的 URL 如下所示

```
http://the.earth.li/~sgtatham/putty/latest/x86/puttytel.exe 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:24:34.857

从[File::Fetch 的手册中](http://search.cpan.org/~bingos/File-Fetch-0.36/lib/File/Fetch.pm)有这个标志[$File::Fetch::WARN](http://search.cpan.org/~bingos/File-Fetch-0.36/lib/File/Fetch.pm#$File::Fetch::WARN)，您可以设置它`false`以消除错误：

> 此变量控制 File::Fetch 内部遇到的错误是否应该被 carp'd 处理。
> 
> 设置为 false 以使警告静音。手动检查 error() 方法的输出，看看出了什么问题。
> 
> 默认为真。

# mysql - 如何将逻辑析取 OR SQL 查询更改为结合 AND 以匹配列表中的所有输入参数？

> ID：12296490
> 
> 赞同：1
> 
> 时间：2012-09-06T08:59:41.743
> 
> 标签：mysql, sql

我希望标题以某种方式有意义。

我在数据库中有 3 个表。第一个保存**`product_variant`**记录，第二个保存**`label`**记录，第三个是**`ref`**中间的表。

*   `product_variant`: (id, productId, serviceProviderId)。
*   `label`：（ID，标签）。
*   `product_variant_label_ref`: (label_id,variant_id)。

我的查询的输入参数是：`productType`和`serviceProviderId`标签集，我的目标是`product_variant`根据输入参数选择表中的行。

这是我在休眠 xml 文件中的查询：

```
 SELECT v.*
 FROM product_variant v
     INNER JOIN product_variant_label_ref r ON v.id = r.variant_id
     INNER JOIN product_product p ON p.productType = :productType
     INNER JOIN product_label l ON l.id = r.label_id
     WHERE v.product_id = p.id
        AND v.serviceprovider_id = :serviceProviderId
        AND l.label in (:labels) 
```

问题是，对于`IN`运算符，我得到了析取`OR`选择，而我想要`AND`介于两者之间。如果我指定不同的标签作为输入，我只想要那些`product_variant`通过 ref 表与所有标签有关系的行。如果输入标签之一不属于 any `product_variant`，则查询不应返回任何内容。谁能帮我改变我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:12:58.907

您需要计算每个产品返回的行数，并将其与标签参数中的项目数相匹配

例如，如果您的标签参数中有 3 个标签...

```
 SELECT v.id
 FROM product_variant v 
     INNER JOIN product_variant_label_ref r ON v.id = r.variant_id 
     INNER JOIN product_product p ON p.productType = :productType 
     INNER JOIN product_label l ON l.id = r.label_id 
     WHERE v.product_id = p.id 
        AND v.serviceprovider_id = :serviceProviderId 
        AND l.label in (:labels) 
 GROUP BY v.id
 HAVING COUNT(DISTINCT l.id) = 3 -- ie: Length of labels 
```

# python - Django邮件发送错误

> ID：12296491
> 
> 赞同：0
> 
> 时间：2012-09-06T08:59:43.503
> 
> 标签：python, django, django-mailer

我有单独的 django 项目和一个 python 脚本文件。脚本文件将不依赖于项目（在不同的路径中可用）。

脚本文件会生成一些数据，需要给相应的用户发送邮件。在这种情况下，我正在尝试使用 django 邮件：-

```
from django.core.mail import EmailMessage, SMTPConnection 
```

我在我的 python 脚本文件中启用了 django 环境，并将 sys.path 添加到我的 django 项目设置中（所以我可以使用 django 邮件）。

```
# setting a django environment
os.environ['DJANGO_SETTINGS_MODULE'] = "settings"
sys.path = sys.path + [PROJECT_PATH] 
```

并且在我的脚本中添加了邮件配置代码：-

```
EMAIL_HOST              = 'smtp.gmail.com'
EMAIL_PORT              = 587
EMAIL_HOST_USER         = 'xxxx@gmail.com'
EMAIL_HOST_PASSWORD     = 'xxx'
EMAIL_BACKEND           = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_USE_TLS           = True 
```

毕竟这封邮件不能正常工作。因为上述参数不在设置文件中（实际问题是如果我在设置中添加了这个“EMAIL_USE_TLS”参数本身意味着它可以正常工作从我的脚本文件中获取的其他参数。

**我的问题是为什么“EMAIL_USE_TLS”这个参数不像其他参数那样从我的脚本文件中获取？**

或者

**是否需要在设置文件中指定一个“EMAIL_USE_TLS”？**

如果我没有在设置中指定 EMAIL_USE_TLS = True 意味着得到以下错误：-

```
SMTP AUTH extension not supported by server 
```

请任何人就此提出建议。

# c# - C# & .NET 检查数据库连接

> ID：12296492
> 
> 赞同：1
> 
> 时间：2012-09-06T08:59:44.523
> 
> 标签：c#, oracle, oledb

我想检查数据库连接的可用性，以便我可以将我的应用程序置于特定模式；在线模式和离线模式。

为此，我尝试打开一个 OleDB 连接（数据库是 Oracle），如果成功，应用程序将以在线模式运行。但是，如果数据库关闭，打开连接只能在特定时间后因超时关闭。

有没有特定的方法可以做到这一点而不必等待超时？或者，也许，指定超时间隔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:15:55.643

没有其他方法可以连接到数据库服务。

但是，您可以在打开 Connection 实例之前修改**ConnectionTimeout**属性以调整您想要等待的时间。

另一方面，您始终可以从离线模式开始，异步进行连接检查，并在检查成功后更改应用程序行为。

# sql - 存储过程中的动态选择查询？

> ID：12296493
> 
> 赞同：-2
> 
> 时间：2012-09-06T08:59:53.043
> 
> 标签：sql

我的网络表单包含一些复选框。如果选中了特定的复选框，请将列名添加到 sp 的选择查询中。假设有 4 个复选框，如 chklname、chkfname、chkcity、chkmobile。如果我检查 chklname 和 chkfname，我的查询将是：

```
SELECT LastName,FirstName FROM table1 
```

sp怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:30:36.303

```
CREATE PROCEDURE ProcName
    @chklname bit,
    @chkfname bit,
    @chkcity bit,
    @chkmobile bit
AS
BEGIN
SET NOCOUNT ON;

    --Only execute the statement if at least one of the checkboxes are set
    if @chklname = 1 or @chkfname = 1 or @chkcity =1 or @chkmobile =1 
        begin
        declare @sqlcommand nvarchar(max) 

        set @sqlcommand = N'Select '

        if @chklname = 1
            set @sqlcommand += N'FirstName '

        if @chkfname = 1
        begin
            if len(@sqlcommand) > 1
                set @sqlcommand += N','
            set @sqlcommand += N'LastName '
        end
        if @chkcity = 1
        begin
            if len(@sqlcommand) > 1
                set @sqlcommand += N','
            set @sqlcommand += N'City '
        end
        if @chkmobile = 1
        begin
            if len(@sqlcommand) > 1
                set @sqlcommand += N','
            set @sqlcommand += N'Mobile '
        end

        set @sqlcommand += N' FROM table1'

        exec sp_executesql @statement = @sqlcommand

    end
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:20:51.553

您可以在这里做的最好的事情是通过前端代码处理要包含在 select 中的列名的数量。

例如，在 4 个复选框中，使用仅选择 2 个 fname 和 lname 复选框。

所以前端在形成sql select语句之前，可以判断哪个复选框被用户选中，哪个没有被选中。在此基础上可以形成正确的select语句。

# memory - 使用 stringbuilder 和递归时的 Stackoverflow 错误

> ID：12296497
> 
> 赞同：0
> 
> 时间：2012-09-06T09:00:04.110
> 
> 标签：memory, recursion, stack, stringbuilder

随着递归的进行，如何清理堆栈内存？我不需要存储的第一个字符串，只说后半部分。那么是否可以清除未使用的字符串以提供更多可用的堆栈内存？我试过垃圾收集器，没有运气。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:04:42.753

Stackoverflow 发生是因为您的递归太深，您无法清理这部分内存，您需要考虑如何避免如此深的递归或完全跳过它。

# hibernate - 在一个休眠查询中更新多个列？

> ID：12296499
> 
> 赞同：15
> 
> 时间：2012-09-06T09:00:09.853
> 
> 标签：hibernate, nhibernate, hql

我有以下 HQL：

```
String hql = "UPDATE Buchung as b " +
             "set STORNO = :Storno " +
             "where ID = :BuchungID"; 
```

是否可以在 HQL 中更新多于一列？例如：

```
String hql = "UPDATE Buchung as b " +
              "set STORNO = :Storno " +
              "set NAME = :Name " +
               ......  
              "where ID = :BuchungID"; 
```

我知道如何在 MSSQL 中做到这一点，但我不知道如何在 Hibernate 中做到这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-06T09:02:51.660

在这种情况下，HQL 与 SQL 没有什么不同。只需使用逗号分隔列：

```
String hql = "UPDATE Buchung as b set " +
          "STORNO = :Storno," +
          "NAME = :Name " +
           ......  
          "where ID = :BuchungID"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:03:39.307

语法类似于 SQL 语法，但使用映射字段/属性而不是列：

```
update Buchung set storNo = :storno, name = :name where id = :buchungID 
```

请注意，如果目标是修改单个实体实例，您最好这样做

```
Buchung b = (Buchung) session.get(Buchung.class, buchungId);
b.setStorNo(newStorno);
b.setName(newName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T07:26:48.693

```
 String hql = "UPDATE Buchung as b set " +
          "STORNO = :Storno," +
          "NAME = :Name " +
           ......  
          "where ID = :BuchungID";

Query qr = session.createSQLQuery(hql);

qr.setParameter("Storno","sto_value");

qr.setParameter("Name","name_value");

...

qr.executeUpdate(); 
```

正常情况下，您必须有“事务”才能运行查询

```
 Transaction transaction = null;
transaction = session.begintransaction();
...
transaction.commit(); 
```

# iphone - 如何在 iPhone 中访问相机以及如何将图片保存到自定义相册。？

> ID：12296503
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:00:22.357
> 
> 标签：iphone, ios5, uiimagepickercontroller

我是新手`iOS`，我想访问相机拍照。并将这些图片保存到自定义照片库中。通过谷歌搜索，我知道我想使用其中一个`UIImagePickerController`或`AVFoundation`框架。如何访问相机并将图片保存到自定义照片库中`UIImagePickerController`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:19:38.820

```
-(IBAction)camaraBtnPress:(id)sender
{
    imagePickerController = [[UIImagePickerController alloc]init];
    imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePickerController.delegate = self;
    [self presentModalViewController:imagePickerController animated:YES];
}
-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [imagePickerController dismissModalViewControllerAnimated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingImage:(UIImage *)image
                  editingInfo:(NSDictionary *)editingInfo
{
    [imagePickerController dismissModalViewControllerAnimated:YES];

    //to save in library
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
} 
```

并按照此[链接](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)将照片保存在自定义相册中

# html - 如何在较小的屏幕尺寸上显示表格数据

> ID：12296505
> 
> 赞同：1
> 
> 时间：2012-09-06T09:00:30.170
> 
> 标签：html, mobile, html-table

我正在开发一个当前宽度固定的网站，并将其转换为响应式布局。

该网站包含一些我无法摆脱的表格，因为其中包含的信息绝对是表格数据

我遇到的问题是，当您缩小屏幕尺寸时，表格只会缩小到某个点，然后每个内容中的内容量`<td>`将不允许表格进一步缩小，因此需要用户必须放大这些特定页面。

现在，我想也许我可以将表格去掉，以换取更小的屏幕尺寸，并启用一个功能，允许用户下载这些表格中包含的信息，比如`pdf`. 但我一直在设计/开发的原则是所有用户都应该获得与其屏幕尺寸无关的相同体验，即不删除较小屏幕尺寸的内容。

有没有人有任何建议或示例说明在哪些地方可以很好地为较小的屏幕实现表格？

# android - 我可以跟踪哪些关键字引导用户在 Google Play 上找到我的应用吗？

> ID：12296512
> 
> 赞同：6
> 
> 时间：2012-09-06T09:00:49.367
> 
> 标签：android, google-play

我知道我可以向 Google Play URL 添加引用参数以跟踪来自特定来源的下载，但我可以跟踪用户使用哪些关键字搜索在 Google Play 上找到我的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:20:21.863

在 Google Play（即 Android Market）之前，我在引荐来源网址中接收到所有相关信息，以帮助我了解我的应用是如何被发现的。

它可能是关键字、顶部、类似的应用程序等。它真的非常有用。

从 Google Play 开始，我再也没有收到任何东西。我得到的唯一推荐人是我在做一些活动时手动设置的。我花了很多时间试图了解原因，但 Google Play 似乎不再发送此信息。然而，对我来说没有意义。

但是，您会从 Google 搜索引擎获得用户如何在 Google Play 上找到您的应用程序的关键字（如果他们点击“在我的手机上安装”按钮）。
**推荐人示例** `utm_source=google&utm_medium=organic&utm_term=my+keyword`
（如果用户使用 https Google 搜索，则不起作用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:05:03.847

不完全是，因为您的应用是由您定义的关键字找到的。

-> 如果您销售基于导航的应用程序，您可以输入“导航”。因此它出现在关键字导航下，在这种情况下，结果将是相关的。

如果他们打开与您的应用相关的应用，您会对第一个可能完全不同的关键字感兴趣吗？

-> 如果有关键字“儿童”的应用程序，他们打开它，然后 Google Play 推荐其他有儿童的东西，他们打开它。然后，第二个应用程序，也有关键字 children 可以有一个标签“导航”。然后 Google Play 可以推荐您的应用。我不相信标签“孩子”会是你关心的:-)

# qt - 向 QDomNodeList 添加节点

> ID：12296515
> 
> 赞同：3
> 
> 时间：2012-09-06T09:00:57.020
> 
> 标签：qt, qt4

我有一个空 QDomNodeList (list1) 和另一个 (list2)，其中包含节点 A 的直接子节点，如上面 XM1 中所述。

```
<A>
    <P></P>
    <P></P>
    <Q>
       <P></P>
    </Q>
</A> 
```

现在我只想将那些名为 Q 的节点从 list2 复制到 listq。

我无法将节点从 list2 复制到 list1。

```
QDomNodeList list1,list2;
list2 = a.childNodes(); // copying child nodes of a tag in list 2 

for(int i = 0 ; i < list2.count() ; i++)
{
    if(list2.at(i).nodeName() == "Q")
    {
        cout<<"i : "<<i<<endl;
        // Appending is giving error "Calling appendChild() on a null node does nothing"
        list1.at(i).appendChild(list2.at(i));
    }
}
cout<<"No of Q : "<<list1.count()<<endl; 
```

我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:38:46.710

`list1.at(i)`将返回一个默认构造的节点，因为您的列表为空，因此它将是一个空节点。这就是错误的来源。

您需要创建临时`QDomDocument`来存储所需的节点。

```
QDomDocument temporary("tempDoc");
QDomNodeList list1,list2;
list2 = a.childNodes();
// copying child nodes of a tag in list 2 
for(int i = 0 ; i < list2.count() ; i++)
{
    if(list2.at(i).nodeName() == "Q")
    {
        cout<<"i : "<<i<<endl;
        temporary.appendChild(temporary.importNode(list2.at(i), true));
    }
}
list1 = temporary.childNodes();
cout<<"No of Q : "<<list1.count()<<endl; 
```

# c++ - 如何将几个 stl 列表复制到一个但仅具有某些属性

> ID：12296518
> 
> 赞同：0
> 
> 时间：2012-09-06T09:01:17.400
> 
> 标签：c++, stl, c++03

我有几个指向自定义类的指针列表（类是具有基本数据的简单 Person）。如何将所有列表中的指针（浅拷贝）复制到一个新列表，但仅限来自波特兰（城市==波特兰）的人员？我正在使用 STL 中的列表（列表）。我不能使用 C++11。

```
class Person{
public:
long id;
string name;
string last_name;
string city

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:04:29.563

在 C++11 中，您应该使用`copy_if`and 一个 lambda：

```
std::list<Person*> src, dst;

std::copy_if(src.cbegin(), src.cend(), std::back_inserter(dst),
             [](Person * p) -> bool { return p->city == "Portland"; }); 
```

如果您有一个较旧的平台（没有 lambdas 或`copy_if`），则必须手动拼写循环：

```
for (std::list<Person*>::const_iterator it = src.begin(), e = src.end(); it != e; ++it)
{
    if ((*it)->city == "Portland") { dst.push_back(*it); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:07:07.227

For example in C++03.

```
struct PersonComparerByCity : public std::unary_function<Person*, bool>
{
   PersonComparerByCity(const std::string& c):city(c) { }
   result_type operator() (argument_type arg) const 
   { return arg && arg->city == city; }
private:
   std::string city;
};

std::list<Person*> p;
std::list<Person*> result;
std::remove_copy_if(p.begin(), p.end(), std::back_inserter(result), 
std::not1(PersonComparerByCity("Portland"))); 
```

[http://liveworkspace.org/code/a8e36e63b1f9924281768d90f7a090da](http://liveworkspace.org/code/a8e36e63b1f9924281768d90f7a090da)

# c# - 如何处理javascript Web应用程序在c#中抛出的异常？

> ID：12296519
> 
> 赞同：2
> 
> 时间：2012-09-06T09:01:18.757
> 
> 标签：c#, javascript, exception

我正在开发一个使用 html5 和 javascript 构建客户端的 Web 应用程序，总体上使用 dojo 框架（我正在使用 xhr.post 函数与服务器通信）。服务器端是 c# 中的 asmx 服务。

问题来了：当我的服务的 web 方法抛出异常时：

```
 try
        {
            throw new Exception("TEST");
        }
        catch (Exception ex)
        {
            throw ex;
            // TODO: send some info to the client about the error
        } 
```

客户端意识到发生错误并触发错误回调函数：

```
 deferred = xhr.post({
            url: that.config.urlService,
            handleAs: that.config.handleAs,
            contentType: that.config.contentType,
            postData: that.config.parameters
        });

        deferred.then(function (res) {
            that.success(res);
        },
            function (err) {
                 if (that.config.callbackFail) {
                     that.config.callbackFail(err, that.config.parameters);
                 }
            }
        ); 
```

但是在 'err' 参数中我没有异常信息，我有消息：

> 'NetworkError：500 内部服务器错误 - http://.../Services/Applications/Metrawa/ServiceManagement/WSJob.asmx/Filter'

并使用firebug检查对服务器的调用，在响应选项卡中我可以看到奇怪的字符，比如异常没有被序列化。

我想要的是在 javascript 中获取异常信息。我已经搜索了一些关于此的信息，比如创建一个自己的可序列化异常类，但它也不起作用。有什么解决办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:05:42.927

您可以选择在您的服务器端代码中处理异常并将其以 JSON、XML 甚至字符串的形式发送回——即您的客户端可以理解的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:14:13.907

我会捕获异常服务器端并始终返回具有“结果”属性的有效对象：

例如 res.Result （如“OK”或“ERR”等并在客户端处理）

# javascript - 周视图中的完整日历更改日期格式

> ID：12296525
> 
> 赞同：17
> 
> 时间：2012-09-06T09:01:34.760
> 
> 标签：javascript, jquery, fullcalendar

我在我的项目中使用 jQuery 的 FullCalendar 插件。在 fullCalendar 周视图中，我可以看到一行显示以下格式的日期：-

`Sunday 9/6`, `Monday 9/7`,`Tuesday 9/8`等等...

实际上，我希望颠倒 to 的`month/day`位置`day/month`。

我该如何初始化设置？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-06T16:07:30.777

您需要使用该`columnFormat`选项来自定义它。

```
columnFormat: {
            month: 'ddd',
            week: 'ddd d/M',
            day: 'dddd d/M'
        } 
```

表现在这个[小提琴](http://jsfiddle.net/100thGear/RkWEB/)上。让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:36:12.130

查看`title_format`fullcalendar 文档中的选项：http://arshaw.com/fullcalendar/docs/text/titleFormat/[并](http://arshaw.com/fullcalendar/docs/text/titleFormat/)在 fullcalendar 选项中设置所需的格式。

您还可以[在此处](http://arshaw.com/fullcalendar/docs/views/View_Option_Hash/)查找所有日历视图的格式选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-21T21:42:48.987

对于那些使用 FullCalendar v3 的人
来说，配置似乎发生了变化。

您可以使用 columnHeader 格式、文本或 Html 属性
如这个非常好的文档中所述：
[https ://fullcalendar.io/docs/date-display](https://fullcalendar.io/docs/date-display)

并将它们应用于以下不同的视图：
[https ://fullcalendar.io/docs/view-specific-options](https://fullcalendar.io/docs/view-specific-options)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-21T12:07:41.267

您可以使用任何类型的日期格式`moment`，这适用于 fullcalendar `V5 (Version 5)`。
这是全日历配置选项。

```
dayHeaderFormat: this.dayHeaderFormatUsingMoment, 
```

这是javascript函数。

```
dayHeaderFormatUsingMoment(info) {
    return moment(info.date.marker).format("ddd, DD/MM/YYYY"); //output : Tue, 21/07/2020
} 
```

# javascript - SetTimeOut 函数无法重置表格中的每个单元格颜色

> ID：12296529
> 
> 赞同：0
> 
> 时间：2012-09-06T09:01:44.087
> 
> 标签：javascript, javascript-events

嘿伙计们，我有两个 html 表。所有单元格值都在 3 秒内按间隔更改。而且当一个单元格发生变化时，它会根据在前一个周期中设置的单元格值设置它的背景颜色。同时，为单元格设置了一个 settimeout 功能，以在 2 秒后重置背景颜色。

> 我的问题是每 2 秒我需要重置单元格的颜色，但 setTimeout 函数仅适用于最后一个单元格。

**注意：在我的应用程序中，每个单元格都在更改其自己的周期，因此重置单元格的颜色必须为其所有者（单元格）工作。不在同一时间。**

我在[JsFiddle](http://jsfiddle.net/afacanerman/7FXtL/4/)创建了一个示例。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:07:11.797

这是一个经典的“闭环”问题。您已经尝试创建另一个内部闭包以包含本地上下文，但您错过了参数（并使用 == 分配而不是比较）

编辑：下次请在帖子中包含您的代码，而不仅仅是在 jsfiddle 中，这样这篇文章就可以在没有外部参考的情况下独立存在

```
 _cellColorTimeouts[obj] = setTimeout((function(_cell, _obj) {
                return function() {
                    debugger;
                    _cell.css({
                        "background-color":"white",
                        "color":"black"
                    });

                    _cellColorTimeouts[_obj] = null;
                    clearTimeout(_cellColorTimeouts[_obj]);
                };
            })(cell,obj), 2000); 
```

EDIT3：看到这个小提琴：http: [//jsfiddle.net/7FXtL/10/](http://jsfiddle.net/7FXtL/10/)

# ios - iOS sort CoreData Result - 一种父子关系

> ID：12296530
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:01:48.043
> 
> 标签：ios, sorting, core-data, uipickerview

我有点困在这里有一个简单的问题：

我有对象（通过休息来）与 coredata 一起存储在本地。在 coredata 实体中，我具有以下属性：

*   猫ID（int16）
*   父 ID (int16)
*   标题（字符串）

这是为了有一个简单的类别列表，用户可以稍后在应用程序的 pickerView 中从中选择。字段 catID 是标识每个类别的唯一 ID。parentID 保存主类别的 catID。如果 parentID = 0，则该类别是主类别（根级别）。

我需要在选择器视图中加载类别列表以供用户选择。PickerView 中的列表应显示如下：

```
MainCategory 1
MainCategory 2
    SubCategory 2.1
    SubCategory 2.2
MainCategory 3
MainCategory 4
    SubCategory 4.1 
```

我如何将所有类别加载为比方说 NSArray 中的对象并以正确的方式对类别进行排序？级别 2 上的类别（其中 parentID ！= 0）必须出现在 NSArray 中的主类别之后，才能在 pickerView 中正确显示。从技术上讲，类别和子类别是相同类型的对象。只有属性`parentID`告诉对象是类别还是子类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:46:25.403

您需要查看 Coredata 是什么 - 对象图管理器 - 而不是数据库。

我个人的选择是创建一个指向实体本身的关系（及其对应的逆）。

所以你有一个`Category`实体，一个`childCategories`一对多的关系和一个`parentCategory`一对一的关系作为它的逆。

这样您就可以正常创建类别并建立适当的连接，即

```
Category *childCat = ...
Category *parentCat = ...
childCat.parentCategory = parentCat; 
```

然后获取只是决定你想怎么做的问题。您可以获取所有`Category`没有父母的实体（即它们是主类别），然后对于每个主类别，遍历关系以找到`childCategories`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:25:36.167

你能扩展一下你的问题吗？

我不知道这是否是您想要的，但是要对 NSSet 进行排序，您可以这样做

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"theKeyToOrder" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];   

NSArray * sortedArray = [TheCoreDataResultNSSet sortedArrayUsingDescriptors:sortDescriptors]; 
```

编辑：

您可以创建一个 NSMutableArray 并添加元素。

像这样的东西：

```
NSMutableArray * sortedArray = [[NSMutableArray alloc]init];
 for (parentCategory in parentCategories) {
    [sortedArray addObject:parentCategory];
        for (child in parentCategory){
            [sortedArray addObject:child];
        }
} 
```

您只需要一个包含 parentCategories 的 CoreData 结果，然后使用子/父关系添加子项。

EDIT2：抱歉，我没有看到您没有父/子关系，我认为您应该更改关系的 parentID。反正你可以照我说的做，只取父母，然后在for里面，取parentID为当前Category的category

# php - Db_NoRecordExists 错误消息被 ->addErrorMessage() 覆盖

> ID：12296533
> 
> 赞同：0
> 
> 时间：2012-09-06T09:02:04.733
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我的`Db_NoRecordExists` 消息被 覆盖`addErrorMessage`。
代码：

```
$emailaddress = new Zend_Form_Element_Text('EmailAddress');
$emailaddress->setRequired(true)
             ->setAttrib('size', '30')
             ->addFilters(array('StringTrim', 'StripTags'))
             ->addValidator('EmailAddress',TRUE)
             ->setDecorators($decorators)
             ->addErrorMessage('Please Enter Va`enter code here`lid Values.')
             ->setAttrib('MaxLength',100)
             ->setAttrib('onkeyup','setUserName()')
             ->setAttrib('onkeypress','setUserName()')
             ->setAttrib('onfocus','setUserName()')
             ->setAttrib('onchange','setUserName()')
             ->setAttrib('Maxlength', '100');

$emailaddress ->class="textbox"; 
```

和

```
public function isValid($data)
{
    $this->getElement('EmailAddress')
         ->addValidator('Db_NoRecordExists', false, array(
             'table'=>'puntermaster',
             'field' => 'EmailAddress',
             'messages' => array(Zend_Validate_Db_Abstract::ERROR_RECORD_FOUND => 'A user with email address already exists'),
             'exclude' => array( 'field' => 'Sno', 'value' => $data['Sno'])
         ), TRUE);

   return parent::isValid($data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:47:52.187

如果您使用`addErrorMessage()`or将自定义错误消息添加到表单元素`addErrorMessages()`并且其中一个验证器验证失败，*则将使用自定义错误消息而不是验证器特定错误消息*。

仅`addErrorMessage`当您要覆盖表单元素的所有验证器错误消息时才使用。

另一个用途`addErrorMessage`是在您验证表单元素并希望添加稍后检索的自定义消息后调用它`getErrorMessages()`。

# java - Java EE 中的文件夹访问

> ID：12296534
> 
> 赞同：3
> 
> 时间：2012-09-06T09:02:14.993
> 
> 标签：java, jakarta-ee

我需要`allCommonPageLink.jsp`从另一个名为的页面访问一个页面`add_edit.jsp`

![文件夹结构](../Images/5e7cd206c43b2196a41a806afcfe0a84.png)

我已经做好了`<%@ include file="/plan/common/allCommonPageLink.jsp" %>`

错误`/WEB-INF/ViewPages/plan/add_edit.jsp (line: 8, column: 42) File "/plan/common/allCommonPageLink.jsp" not found`

> 新问题:: 如何从托盘.jsp 和 add_edit.jsp 访问图像表单图像文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:03:26.243

做了

```
<%@ include file="WEB-INF/common/allCommonPageLink.jsp" %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T09:04:54.687

该文件`allCommonPageLink.jsp`不在`plan`文件夹下，请修复他的路径并重试，希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T09:06:28.770

你应该使用

```
<%@ include file="../../common/allCommonPageLink.jsp" %> 
```

使用 ../ 会将您带回到您现在所在的上一个目录。

如果您的页面是 web-inf/viewpages/plan/page.html 这意味着您的工作目录是计划的。调用 ../ 将带您查看页面。调用另一个 ../ 会将您带到 web-inf。并且从 web-inf 您可以通过访问 common/anotherpage.jsp 来访问该文件

您可以阅读[https://www.owasp.org/index.php/Path_Traversal](https://www.owasp.org/index.php/Path_Traversal)了解更多信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T09:10:53.327

这将起作用

```
<%@ include file="common/allCommonPageLink.jsp" %> 
```

或者

您必须返回两个文件夹**plan**和**viewPages**才能访问该文件中的此文件夹，这样这对您有用

```
 <%@ include file="../../common/allCommonPageLink.jsp" %> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-06T09:15:52.223

您可以使用

`<%@ include file="../../common/allCommonPageLink.jsp" %>`

当您添加`../`它时，它将引用其父文件夹或目录。

# powershell - Powershell 中奇怪的命令行行为

> ID：12296536
> 
> 赞同：3
> 
> 时间：2012-09-06T09:02:31.427
> 
> 标签：powershell, command-line, command-line-arguments

考虑以下 powershell 脚本：

```
Write-Host "Foo"

if($true)
{
    Write-Host "Bar"
    throw ("the matrix has a bug")
} 
```

文件保存到 c:\test.ps1

这是调用，在带有结果的 cmd 窗口中：

```
C:\>powershell.exe -NonInteractive -Command - <c:\test.ps1
Foo

C:\> 
```

`}`但是，如果我在结果如预期之后添加 2 个换行符：

```
Write-Host "Foo"

if($true)
{
    Write-Host "Bar"
    throw ("the matrix has a bug")
}
<linebreak here>
<linebreak here> 
```

相同的调用，结果如下：

```
C:\>powershell.exe -NonInteractive -Command - <c:\test.ps1
Foo
Bar
the matrix has a bug
At line:4 char:7
+     throw <<<<  ("the matrix has a bug")
    + CategoryInfo          : OperationStopped: (the matrix has a bug:String)
   [], RuntimeException
    + FullyQualifiedErrorId : the matrix has a bug

C:\> 
```

正如预期的那样

看来`<`命令行中的每行将每行写入powershell的控制台。所以想，好吧，可能是 CMD 没有读取所有行，但我编写了一个小型 C# 应用程序，它读取控制台并打印它，它读取行就好了。

这是 C# 代码：

```
using System;

namespace PrintArgs
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            foreach (string arg in args)
            {
                Console.WriteLine("----- ARG start");
                Console.WriteLine(arg);
                Console.WriteLine("----- ARG stop");
            }

            string line;
            do
            {
                line = Console.ReadLine();
                if (line != null)
                {
                    Console.WriteLine(line);
                }
            }
            while (line != null);
        }
    }
} 
```

调用它（所以基本上将 PrintArgs.exe 放在我的 C 驱动器上，并使用相同的命令调用它，使用没有换行符的 test.ps1 **）**会产生以下结果：

```
C:\>printargs.exe -NonInteractive -Command - <c:\test.ps1
----- ARG start
-NonInteractive
----- ARG stop
----- ARG start
-Command
----- ARG stop
----- ARG start
-
----- ARG stop
Write-Host "Foo"

if($true)
{
        Write-Host "Bar"
        throw ("the matrix has a bug")
}

C:\> 
```

有人可以帮我吗？（对不起，很长的帖子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:53:11.857

如果您省略“<”I/O 重定向，它会起作用。

```
C:\>powershell.exe -NonInteractive c:\test.ps1 
```

# c# - 实施自定义 Microsoft 同步

> ID：12296537
> 
> 赞同：0
> 
> 时间：2012-09-06T09:02:35.607
> 
> 标签：c#, .net, microsoft-sync-framework

如何使用同步框架将表与某些过滤器同步？

例如：我只想`UserId=n`为特定用户同步记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:14:29.543

开箱即用支持过滤，您应该查看文档：

[演练：定义过滤范围和供应服务器数据库](http://msdn.microsoft.com/en-us/library/ff928601.aspx)

[演练：供应具有过滤范围的客户端数据库](http://msdn.microsoft.com/en-us/library/ff928642.aspx)

[演练：为筛选的范围执行同步 [SQL Express]](http://msdn.microsoft.com/en-us/library/ff928759.aspx)

如果您使用本地数据库缓存向导或较旧的同步提供程序：

[如何：过滤行和列](http://msdn.microsoft.com/en-us/library/bb726003)

# c# - c#中进程之间的安全连接

> ID：12296542
> 
> 赞同：0
> 
> 时间：2012-09-06T09:02:49.083
> 
> 标签：c#, visual-studio-2010, connection, communication, process

我是 C# 新手，也是 Stackoverflow.com 的新手 :)

我在 VS2010 的解决方案中有 2 个项目，第一个是父级：基于 C# WPF 构建的主应用程序。另一个是 Child: Built on C# WinForm。这两个应用程序将在同一台计算机上运行（感谢 Vignesh Natraj 帮助我完善问题）。

我正在寻找在两者之间进行通信的最佳方式，有 2 个功能对我的应用程序非常重要：

1.  快速沟通。原因：他们的意志将是海量数据和高频率。（类似于 1 到 100 个字符串/布尔值/整数的“数据引用”，持续 1 秒）

2.  高度安全。2个原因：

    一种。如果某些黑客能够以某种方式获取这些数据，我的应用程序就会被破解。

    湾。如果某些黑客可以阻止 2 个进程之间的通信 - 我的应用程序也将被破解。

我在谷歌上找了很多方法，比如：SOAP/匿名管道/WCF……等等……但我真的只知道名字:)而且我不知道从哪里开始……

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:05:27.927

您可以为此使用[命名管道](http://msdn.microsoft.com/en-us/library/bb546085.aspx)，这非常快。

为了安全起见，您可以在发送数据之前使用 .Net 中可用的任何内置加密算法对数据进行加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:20:51.443

这两个应用程序会在同一台计算机上运行吗？如果没有，同一个网络？你想让它在互联网上工作吗？
在可扩展性方面，我建议您研究 WCF，因为它为您提供了多种选择
，并且将来您可以更改配置文件中的绑定并支持不同的环境。
WCF 支持命名管道、MSMQ、具有消息和传输安全性的安全 http 绑定。

# .net - Wcf 流式反序列化异常

> ID：12296548
> 
> 赞同：3
> 
> 时间：2012-09-06T09:03:09.027
> 
> 标签：.net, wcf, serialization, exception-handling, streaming

在 wcf 中使用流模式时，我遇到了一个非常奇怪的问题。这是我的服务器和客户端配置。

服务器配置：

```
<system.serviceModel>
    <services>
      <service name="eTreasury.ServiceModel.ServiceImplimentation.BackOfficeService" 
               behaviorConfiguration="ServiceBehavior">
        <endpoint name="streamed"
                  address="/streamed"
                  binding="customBinding"
                  bindingConfiguration="BinaryHttpBindingStreamedConfig"
                  contract="eTreasury.ServiceModel.ServiceContracts.IBackOfficeService"
                  behaviorConfiguration="EndpointBehavior"/>
      </service>
    </services>
    <bindings>
      <customBinding>
        <binding name="BinaryHttpBindingStreamedConfig"
                 openTimeout="00:02:00"
                 receiveTimeout="00:02:00"
                 sendTimeout="00:02:00"
                 closeTimeout="00:02:00">
          <binaryMessageEncoding maxReadPoolSize="2147483647"
                                 maxWritePoolSize="2147483647"
                                 maxSessionSize="2147483647">
            <readerQuotas maxArrayLength="2147483647"
                          maxDepth="1024"
                          maxBytesPerRead="2147483647"
                          maxNameTableCharCount="2147483647"
                          maxStringContentLength="2147483647"/>
          </binaryMessageEncoding>
          <httpTransport maxBufferPoolSize="2147483647"
                          maxBufferSize="2147483647"
                          maxReceivedMessageSize="2147483647"
                          transferMode="StreamedResponse"/>
        </binding>
      </customBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="ClientBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
</system.serviceModel> 
```

客户端配置：

```
<system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="BinaryHttpBindingStreamedConfig" closeTimeout="00:05:00"
          openTimeout="00:05:00" receiveTimeout="00:05:00" sendTimeout="00:05:00">
          <binaryMessageEncoding />
          <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647"
            transferMode="StreamedResponse" />
        </binding>
      </customBinding>
    </bindings>
<client>
      <endpoint address="http://localhost:2408/BackOfficeService.svc/streamed"
        binding="customBinding" bindingConfiguration="BinaryHttpBindingStreamedConfig" contract="BackOfficeServiceClient.IBackOfficeService"
        name="BackOfficeStreamedService" />
      </client>
   </system.serviceModel> 
```

在 200Mb 数据上，Google Chrome、Firefox、Opera 一切正常。问题仅出现在 Internet Explorer 中。

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://tempuri.org/:LoadOrdersResult](http://tempuri.org/:LoadOrdersResult)时出错。InnerException 消息是“反序列化 System.Collections.ObjectModel.ObservableCollection 类型的对象时出错”1[[eTreasury.DataModel.BusinessObjects.OrderListItemForBack, eTreasury.SilverlightDataModel, Version=1.0.0.19815, Culture=neutral, PublicKeyToken=null ]]。文件意外结束。以下元素未关闭：CreatedDate、OrderListItemForBack、LoadOrdersResult、LoadOrdersResponse、Body、Envelope.'。有关详细信息，请参阅 InnerException

# java - Java - null instanceof Object 评估为真和假

> ID：12296554
> 
> 赞同：51
> 
> 时间：2012-09-06T09:03:34.763
> 
> 标签：java, instanceof

当我编译并运行这段代码时：

```
public class Testing {
    public static void main(String... args) {
        Object obj = null;
        if (obj instanceof Object) {
            System.out.println("returned true"); 
        } else {
            System.out.println("returned false"); 
        }
        System.out.println(" " + obj instanceof Object);
    }
} 
```

我在命令行上得到这个：

```
C:\Users\xxxxxx\Desktop>java Testing
returned false
true 
```

“null instanceof someType”不应​​该总是返回false吗？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-06T09:04:42.033

这：

```
" " + obj instanceof Object 
```

被评估为：

```
(" " + obj ) instanceof Object 
```

并且`" " + obj`确实是一个非空字符串，它是`Object`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:06:34.823

在 last`System.out.println`中，首先计算结果，然后检查`" " + obj`结果，即 a并打印结果。`String``instanceof Object`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:13:09.540

In (" " + obj) 是首先被评估的部分，因此括号后不再为空。所以它是Object的实例。

另请参阅以下链接，以便您的概念清晰。

> [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

# msbuild - TFS/MSBuild 将变更集编号添加到 Web.Config

> ID：12296561
> 
> 赞同：3
> 
> 时间：2012-09-06T09:03:43.887
> 
> 标签：msbuild, tfsbuild

有谁知道将构建的变更集编号（在 TFS 2012 中）添加到正在构建的网站的 web.config 的好解决方案？

我们不希望它作为汇编版本的一部分，而是作为一个完全独立的条目。

谢谢，
基龙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:20:46.423

您必须将自定义工作流活动添加到构建过程模板才能执行此操作。

Ewald Hofman 有一个关于如何做到这一点的精彩[博客系列。](http://www.ewaldhofman.nl/post/2010/04/20/Customize-Team-Build-2010-e28093-Part-1-Introduction.aspx)第 5 部分有一个关于编辑程序集版本的教程，您可以将其用作模板，但可以编辑您的 web.config。

`BuildDetail.SourceGetVersion`您应该在：属性中找到变更集 ID 。

**注意**这是 TFS 2012，默认情况下您可能会启用本地工作区，因此您不需要在文件上摆弄只读标志。

# python - 如何使用python用excel绘制图表？

> ID：12296563
> 
> 赞同：0
> 
> 时间：2012-09-06T09:03:49.273
> 
> 标签：python, excel, win32com

您好我打算用 xlsx 文件中的数据绘制图表。为了保持风格，我必须在excel中绘制它。我找到了一个名为win32com的包，它可以支持在win32平台上用python操作excel文件，但是我不知道doc在哪里......

另一个类似的问题是如何更改单元格的样式，例如字体、背景颜色？因此，也许我只想知道文档，您知道如何钓鱼比钓鱼更有用....举个例子更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-22T07:39:56.667

勾选这个lib，这里几乎可以生成原生的excel图。

[xlsxwriter 折线图示例](http://xlsxwriter.readthedocs.org/en/latest/example_chart_line.html)

这里唯一的问题是您无法更新已经存在的工作表，这意味着您可以修改工作表，使用此库您可以创建所有大多数图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:34:12.200

据我所知，win32com 的文档几乎不存在。但是，我使用以下方法来理解命令。

1.  MS-Excel

    在 Excel 中，记录您打算执行的任何操作的宏，例如绘制图表。然后转到宏菜单并使用查看宏来获取底层命令。通常，使用的命令会引导您找到需要使用的 python 中的相应命令。

2.  蟒蛇

    您可以使用 pythonwin 浏览底层 win32com 定义的对象（在您的情况下为 Microsoft Excel 对象）。在 pythonwin（可以`\Lib\site-packages\pythonwin\`在您的 python 安装中找到）中，转到工具 -> COM Makepy Utility，选择所需的库（在本例中为 Microsoft Excel 14.0 对象库），然后按确定。然后当该过程完成后，转到工具 -> COM 浏览器并在注册库下打开所需的库。记下身份证号码。因为这将对应于源文件。您可以在 COM 浏览器中浏览库的各种组件。

3.  资源

    转到`\Lib\site-packages\win32com\`您的 python 安装文件夹。运行 makepy.py 并选择所需的库。之后，库的源文件可以在`\Lib\site-packages\win32com\gen_py`. 它是具有古怪名称的文件之一。该名称对应于 Pythonwin 中的名称。打开文件，然后搜索您在 Excel 宏中看到的命令。（#2 和#3 可能是多余的，我不确定）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:55:00.330

```
import win32com.client as w32

oe = w32.Dispatch("Excel.Application")
ow = oe.Workbooks.Add()
osh = ow.Sheets(1)
osh.Select()
osh.Activate()
osh.Cells(1,1).Font.Bold = True # set A1 to bold
osh.Range("A1").Interior.Color = RGB(255,0,0) # set to red background color 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T11:51:01.527

AFAIK，win32com 是[Microsoft 的 COM 技术](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680573%28v=vs.85%29.aspx)的接口，因此您必须在此处查找有关哪些对象和方法可用于不同的支持 COM 的应用程序的说明。如果您不从一个空的电子表格开始并尝试从头开始使用 win32com 创建所有内容，而是在 Excel 中创建一个只需要填写实际数据的模板，那么您的任务可能会更容易。实际上，因为 Excel 可以使用 ODBC 数据来源，也许数据库是一个更好的接口？

# c++ - 创建对话框时 MFC 应用程序在 VS 外部崩溃

> ID：12296564
> 
> 赞同：1
> 
> 时间：2012-09-06T09:03:49.930
> 
> 标签：c++, visual-studio-2010, mfc

我的应用程序在从 Visual Studio 内部运行时运行良好，但如果我使用 EXE 文件运行它会崩溃。[调试exe]

当应用程序到达这行代码时，问题就出现了：

```
 nmax=2*(nrows+rows);
            create_progrcntl(L"Processing please wait"); // Crashes here
            pgr->m_pgr.SetRange32(1,nmax);
            pgr->m_pgr.SetStep(1); 
```

函数 create_progresscntl 是：

```
 void import::create_progrcntl(CString header)
{

 pgr = new CPgr;
 pgr->Create(IDD_PROGRESS,this);
 pgr->SetWindowTextW(header);
    pgr->ShowWindow(SW_SHOW);    
} 
```

我在其他几个地方也使用了这个函数，它不会导致任何错误。它只是因为`import::processENSAT_MasterSlave()`它崩溃的功能。

它在 VS 内部运行良好，但如果我在外部运行 EXE 则会崩溃。

我将该进程附加到 VS 调试器。这是我的调用堆栈，就在崩溃之后：

```
 ntdll.dll!7729e3be()     
   [Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll]  
   ntdll.dll!7729e023()     
   kernel32.dll!751914dd()  
   msvcr100d.dll!_free_base(void * pBlock)  Line 50 + 0x13 bytes    
   msvcr100d.dll!_free_dbg_nolock(void * pUserData, int nBlockUse)  Line 1431 + 0x9 bytes   C++
   msvcr100d.dll!_free_dbg(void * pUserData, int nBlockUse)  Line 1265 + 0xd bytes  C++
   mfc100ud.dll!operator delete(void * p)  Line 347 + 0xc bytes C++
   mfc100ud.dll!operator delete[](void * p)  Line 360 + 0x9 bytes   C++
   mfc100ud.dll!COccManager::PostCreateDialog(_AFX_OCC_DIALOG_INFO * pDlgInfo)  Line 239 + 0x12 bytes   C++
   mfc100ud.dll!CWnd::CreateDlgIndirect(const DLGTEMPLATE * lpDialogTemplate, CWnd * pParentWnd, HINSTANCE__ * hInst)  Line 413 C++
   mfc100ud.dll!CDialog::CreateIndirect(const DLGTEMPLATE * lpDialogTemplate, CWnd * pParentWnd, void * lpDialogInit, HINSTANCE__ * hInst)  Line 263    C++
   mfc100ud.dll!CDialog::CreateIndirect(void * hDialogTemplate, CWnd * pParentWnd, HINSTANCE__ * hInst)  Line 240 + 0x16 bytes  C++
   mfc100ud.dll!CDialog::Create(const wchar_t * lpszTemplateName, CWnd * pParentWnd)  Line 222 + 0x14 bytes C++
   mfc100ud.dll!CDialog::Create(unsigned int nIDTemplate, CWnd * pParentWnd)  Line 673 + 0x1a bytes C++
   Sar_CCD.exe!import::create_progrcntl(ATL::CStringT<wchar_t,StrTraitMFC_DLL<wchar_t,ATL::ChTraitsCRT<wchar_t> > > header)  Line 370 + 0x27 bytes  
   Sar_CCD.exe!import::processENSAT_MasterSlave()  Line 1760    
   Sar_CCD.exe!import::Select_process_func()  Line 2758 
   Sar_CCD.exe!import::OnBnClickedBtnProcess()  Line 340 
```

完整代码： [http ://sharetext.org/ZKKp](http://sharetext.org/ZKKp)

* * *

已解决： buf 被初始化为`buf=new char[6];`. 后来 21 个字节被读入其中。非常感谢@atzz

# c# - .Net Workflows：隐藏活动的属性

> ID：12296566
> 
> 赞同：0
> 
> 时间：2012-09-06T09:03:54.630
> 
> 标签：c#, workflow-foundation, workflow-activity, .net

我使用带有自定义活动的工作流：

公共类 isOkActivity : System.Workflow.ComponentModel.Activity

这是我的一些活动的基本类型。

在我的工作流程的设计器视图中，所有公共属性都会显示（并执行）。

其中一个属性执行一些繁重的数据库过程，我不想每次在工作流中工作时都执行这些过程。

有没有办法为设计师隐藏该属性？

![在此处输入图像描述](../Images/de1886539617fa466215566601bf62b9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:05:28.027

是的，有一种方法：将该属性更改为方法。如果它做了一些繁重的数据库工作，它不应该是一个属性，因为属性本​​质上应该是轻量级的。

如果您不想这样做，如果您处于设计模式，至少可以使用以下命令停止数据库查询[`Activity.DesignMode`](http://msdn.microsoft.com/en-us/library/system.workflow.componentmodel.dependencyobject.designmode.aspx)：

```
public bool CanRun
{
    get
    {
        if(DesignMode)
            return false;

        // your database stuff
    }
} 
```

# android - 触发/解析推送通知图标

> ID：12296571
> 
> 赞同：2
> 
> 时间：2012-09-06T09:04:02.737
> 
> 标签：android, trigger.io

如何自定义 Trigger.io 应用程序上的推送通知图标？

我目前正在Android上进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:24:34.547

我假设您的意思是您希望更改应用程序图标徽章，因为 Parse 推送通知使用“徽章”数据进行了更改，如其文档中所述： [https ://parse.com/docs/rest ＃推](https://parse.com/docs/rest#push)

目前没有 Forge API 可以做到这一点，但我们将它添加到平台是有意义的。我已经为它提出了一张票，当它准备好时会在这里报告。

作为目前的解决方法，您可以触发另一个推送通知，将“徽章”值从您的应用程序中设置为空字符串 - 您必须为每个唯一安装创建一个频道才能执行此操作。不理想，但它应该工作。

# jquery - IE9 中的 CSS 完全搞砸了

> ID：12296581
> 
> 赞同：0
> 
> 时间：2012-09-06T09:04:32.987
> 
> 标签：jquery, html, css, wordpress, internet-explorer

> **可能重复：**
> [为什么我的 CSS 在 IE9 中不能正确显示？](https://stackoverflow.com/questions/12298807/why-does-my-css-not-appear-correctly-in-ie9)

好的，这是一个真正的强硬派。

我有一个 WordPress 网站，一切都很顺利，直到今天早上我对我的主页做了一点改动，现在 CSS 被 IE9 搞砸了。

我立即撤消了我的更改，但它仍然一团糟，这让我感到非常困惑。

奇怪的事情主要是：

*   盒子阴影不工作
*   位于图像 div 之上的文本 div 现在不透明
*   我在主页上的主图像上的顶部填充搞砸了
*   一些 div 浮动不起作用（改为居中）
*   jQuery不适用于搜索框

这是页面的渲染 html（它是我工作的内部站点，因此无法访问）：

```
<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>NA-net | NA&#039;s Communication Network</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://121.6.3.287/na_comm_new/wp-content/themes/twentyeleven-child/style.css" />
<link rel="pingback" href="http://121.6.3.287/na_comm_new/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://121.6.3.287/na_comm_new/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->
<meta name='robots' content='noindex,nofollow' />
<link rel="alternate" type="application/rss+xml" title="NA-net &raquo; Feed" href="http://121.6.3.287/na_comm_new/?feed=rss2" />
<link rel="alternate" type="application/rss+xml" title="NA-net &raquo; Comments Feed" href="http://121.6.3.287/na_comm_new/?feed=comments-rss2" />
<link rel='stylesheet' id='wp_sidebarlogin_css_styles-css'  href='http://121.6.3.287/na_comm_new/wp-content/plugins/sidebar-login/style.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='bbp-default-bbpress-css'  href='http://121.6.3.287/na_comm_new/wp-content/plugins/bbpress/bbp-theme-compat/css/bbpress.css?ver=2.1.2' type='text/css' media='screen' />
<link rel='stylesheet' id='slider-css'  href='http://121.6.3.287/na_comm_new/wp-content/plugins/easing-slider/css/slider.css?ver=1.2' type='text/css' media='all' />
<script type='text/javascript' src='http://121.6.3.287/na_comm_new/wp-content/plugins/easing-slider/js/jquery.js?ver=1.4.2'></script>
<script type='text/javascript' src='http://121.6.3.287/na_comm_new/wp-content/plugins/sidebar-login/js/blockui.js?ver=1.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var sidebar_login_params = {"ajax_url":"http:\/\/121.6.3.287\/na_comm_new\/wp-admin\/admin-ajax.php","login_nonce":"bae0e08e3a"};
/* ]]> */
</script>
<script type='text/javascript' src='http://121.6.3.287/na_comm_new/wp-content/plugins/sidebar-login/js/sidebar-login.js?ver=1.0'></script>
<script type='text/javascript' src='http://121.6.3.287/na_comm_new/wp-includes/js/comment-reply.js?ver=3.4.1'></script>
<script type='text/javascript' src='http://121.6.3.287/na_comm_new/wp-content/plugins/easing-slider/js/jquery.easing.js?ver=1.3'></script>
<script type='text/javascript' src='http://121.6.3.287/na_comm_new/wp-content/plugins/easing-slider/js/script.js?ver=1.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://121.6.3.287/na_comm_new/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://121.6.3.287/na_comm_new/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Calendar' href='http://121.6.3.287/na_comm_new/?page_id=2876' />
<link rel='next' title='Login' href='http://121.6.3.287/na_comm_new/?page_id=2919' />
<meta name="generator" content="WordPress 3.4.1" />
<link rel='canonical' href='http://121.6.3.287/na_comm_new/' />

        <script type="text/javascript" charset="utf-8">
            /* <![CDATA[ */
            var ajaxurl = 'http://121.6.3.287/na_comm_new/wp-admin/admin-ajax.php';

                        /* ]]> */
        </script>

<!-- Start of Easing Slider -->
<style type="text/css">ul.lof-navigator li{background: url(http://121.6.3.287/na_comm_new/wp-content/plugins/easing-slider/images/pagination.png) 0 0 no-repeat;} ul.lof-navigator li.active{background: url(http://121.6.3.287/na_comm_new/wp-content/plugins/easing-slider/images/pagination_current.png) 0 0 no-repeat;}
.lof-opacity{width:1000px;height:px;}
.lof-opacity li{width:1000px;height:px;}
</style>

<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready( function($){    
    var buttons = { previous:$('#lofslidecontent45 .lof-previous') , next:$('#lofslidecontent45 .lof-next') };
    $obj = $('#lofslidecontent45')
    .lofJSidernews( { interval : 8000,
    easing : 'easeInOutExpo',
    duration : 1200,
    auto : true,
    maxItemDisplay : 10,
    startItem:0,
    navPosition     : 'horizontal', // horizontal
    navigatorHeight : 15,
    navigatorWidth  : 25,
    buttons : buttons,
    mainWidth:1000} );  
});</script>
<!-- End of Easing Slider -->

<link rel="stylesheet" href="http://121.6.3.287/na_comm_new/wp-content/plugins/my-calendar/styles/refresh.css" type="text/css" media="all" />

<style type="text/css">
<!--
.mcjs .mc-main .details, .mcjs .mc-main .calendar-events { display: none; }
/* Styles by My Calendar - Joseph C Dolson http://www.joedolson.com/ */

.mc-event-visible {
display: block!important;
}
-->
</style>
<script type='text/javascript'>
jQuery('html').addClass('mcjs');
jQuery(document).ready(function($) { $('html').removeClass('mcjs') });
jQuery.noConflict();
</script>
<link rel='stylesheet' id='wop-css'  href='http://121.6.3.287/na_comm_new/wp-content/plugins/widgets-on-pages/wop.css' type='text/css' media='all' /></head>

<body class="home page page-id-2883 page-template page-template-welcome-page-php single-author singular two-column right-sidebar">
<div id="page" class="hfeed">
    <header id="branding" role="banner">
            <hgroup>
                <div id="title">
                    <a href="/na_comm_new"><img src="wp-content/themes/twentyeleven-child/images/logo-NAnet3.png"/></a>
                </div>
                <!-- <h1 id="site-title"><span><a href="http://121.6.3.287/na_comm_new/" title="NA-net" rel="home">NA-net</a></span></h1>
                <h2 id="site-description">NA&#039;s Communication Network</h2> -->

            </hgroup>

                                <form method="get" id="searchform" action="http://121.6.3.287/na_comm_new/">
        <label for="s" class="assistive-text">Search</label>
        <input type="text" class="field" name="s" id="s" placeholder="Search" />
        <input type="submit" class="submit" name="submit" id="searchsubmit" value="Search" />
    </form>

            <nav id="access" role="navigation">
                <h3 class="assistive-text">Main menu</h3>
                                <div class="skip-link"><a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
                                <div class="menu-boxes-container"><ul id="menu-boxes" class="menu"><li id="menu-item-2907" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-2883 current_page_item menu-item-2907"><a href="http://121.6.3.287/na_comm_new/">Home</a></li>
<li id="menu-item-2908" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2908"><a href="http://121.6.3.287/na_comm_new/?page_id=2876">Calendar</a></li>
<li id="menu-item-3125" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3125"><a href="http://121.6.3.287/na_comm_new/?cat=10">DDG&#8217;s Corner</a></li>
<li id="menu-item-3037" class="no-link menu-item menu-item-type-custom menu-item-object-custom menu-item-3037"><a href="#">Events</a>
<ul class="sub-menu">
    <li id="menu-item-3121" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3121"><a href="http://121.6.3.287/na_comm_new/?cat=11">Departmental Meeting</a></li>
    <li id="menu-item-3025" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3025"><a href="http://121.6.3.287/na_comm_new/?page_id=2236">Departmental Meeting</a></li>
    <li id="menu-item-3122" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3122"><a href="http://121.6.3.287/na_comm_new/?cat=12">Induction Briefing</a></li>
    <li id="menu-item-3022" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3022"><a href="http://121.6.3.287/na_comm_new/?page_id=3014">Induction Briefing</a></li>
    <li id="menu-item-3124" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3124"><a href="http://121.6.3.287/na_comm_new/?cat=13">Thematic Seminars</a></li>
    <li id="menu-item-3024" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3024"><a href="http://121.6.3.287/na_comm_new/?page_id=3010">Thematic Seminars</a></li>
    <li id="menu-item-3123" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3123"><a href="http://121.6.3.287/na_comm_new/?cat=14">Presentation Skills</a></li>
    <li id="menu-item-3023" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3023"><a href="http://121.6.3.287/na_comm_new/?page_id=3012">Presentation Skills</a></li>
</ul>
</li>
<li id="menu-item-2903" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2903"><a href="http://121.6.3.287/na_comm_new/?forum=na-forum">Forum</a></li>
<li id="menu-item-3126" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3126"><a href="http://121.6.3.287/na_comm_new/?cat=9">Blog</a></li>
<li id="menu-item-3186" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3186"><a href="http://121.6.3.287/na_comm_new/?page_id=3184"></a></li>
<li id="menu-item-3195" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3195"><a href="http://121.6.3.287/na_comm_new/?page_id=3193"></a></li>
</ul></div>         </nav><!-- #access -->
    </header><!-- #branding -->

    <div id="main">

    <div id="welcome-text">
            <h1 id="welcome-message-h1">Don't miss the upcoming NA Presentation Skills Brown-Bag Lunch</h1>
            <br>
            <br>
            <p id="welcome-message-body">Thursday, 30 August, 12:30-14:30 in room A2311</p>
            <br>
            <p id="welcome-message-body">Come share your experiences or test a presentation you have prepared with your colleagues.</p>
    </div>
    <div id="welcome-image">
    </div>

    </div><!-- #main -->

    <footer id="colophon" role="contentinfo">

            <div id="footer-stuff">
                <p class="main-links">
                    <a class="nav-twitter" href="https://twitter.com/"><img src="wp-content/themes/twentyeleven-child/images/twitter-bird-light-bgs-small.png"></a> 

                    <a class="black-links" href="http://www.google.com"><img src="wp-content/themes/twentyeleven-child/images/NA white logo-small-03.png"></a>
                </p>
            </div>
    </footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript'>

jQuery(document).ready(function($) {
  $(".calendar-event").children().not(".event-title").hide();
  $(".calendar-event .event-title").live("click",
     function(e) {
         e.preventDefault(); // remove line if you are using a link in the event title
     $(this).parent().children().not(".event-title").toggle();
     });
  $(".calendar-event .close").live("click",
     function(e) {
         e.preventDefault();
     $(this).parent().toggle();
     });
});
jQuery(document).ready(function($) {
  $("li.mc-events").children().not(".event-date").hide();
  $("li.current-day").children().show();
  $(".event-date").live("click",
     function(e) {
     e.preventDefault();
     $(this).parent().children().not(".event-date").toggle();
     });
});
jQuery(document).ready(function($) {
  $(".mini .has-events").children().not(".trigger").hide();
  $(".mini .has-events .trigger").live("click",
     function(e) {
     e.preventDefault();     
     $(this).parent().children().not(".trigger").toggle(); 
     });
  $(".mini-event .close").live("click",
     function(e) {
         e.preventDefault();
     $(this).parent().parent().parent().toggle();
     });
});</script>
</body>
</html> 
```

这是混乱的图像和文本的 CSS：

```
#welcome-image { 
    margin-top: -26px;
    margin-bottom: -8px;
    background-image: url("images/welcome-image6.jpg");
    height: 500px;
}

#welcome-text {
    padding: 15px;
    float: right;   
    width: 290px;
}

#welcome-message-h1 {
    color: #fafafa;
    font-size: 24px;
    font-weight: 600;
}
#welcome-message-body {
    color: #FAFAFA;
    font-size: 21px;
    font-weight: normal;
} 
```

这是之前和之后的图像：

前：

![在此处输入图像描述](../Images/2930a5f4c26616af2ffaab8f52d27f30.png)

后：

![在此处输入图像描述](../Images/a2dfc8751e75424a6d7bad3e1379506f.png)

所有其他浏览器工作正常，我已经测试以确保它也不会以怪癖模式呈现。

任何想法都会非常感激。

# python - Python 正确解析 CSV

> ID：12296585
> 
> 赞同：26
> 
> 时间：2012-09-06T09:04:41.630
> 
> 标签：python, parsing, csv

我对 Python 很陌生。我想解析一个 csv 文件，以便它能够识别引用的值 - 例如

> 1997年，福特，E350，“超豪华卡车”

应该拆分为

> （“1997”、“福特”、“E350”、“超级豪华卡车”）

并不是

> ('1997', '福特', 'E350', '"超级', '豪华卡车"')

如果我使用类似`str.split(,)`.

我该怎么做呢？最好将这些值存储在数组或其他数据结构中吗？因为在我从 csv 中获取这些值之后，我希望能够轻松选择，可以说任意两列并将其存储为另一个数组或其他一些数据结构。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T09:21:51.613

您应该使用该`csv`模块：

```
import csv
reader = csv.reader(['1997,Ford,E350,"Super, luxurious truck"'], skipinitialspace=True)
for r in reader:
    print r 
```

输出：

```
['1997', 'Ford', 'E350', 'Super, luxurious truck'] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-10T16:45:11.623

以下方法完美运行

```
d = {}
d['column1name'] = []
d['column2name'] = []
d['column3name'] = []

dictReader = csv.DictReader(open('filename.csv', 'rb'), fieldnames = ['column1name', 'column2name', 'column3name'], delimiter = ',', quotechar = '"')

for row in dictReader:
    for key in row:
        d[key].append(row[key]) 
```

列存储在字典中，列名作为键。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T09:51:06.347

您必须将双引号定义为`quotechar`语句中的内容`csv.reader()`：

```
>>> with open(r'<path_to_csv_test_file>') as csv_file:
...     reader = csv.reader(csv_file, delimiter=',', quotechar='"')
...     print(reader.next())
... 
['1997', 'Ford', 'E350', 'Super, luxurious truck']
>>> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-12T13:18:46.537

如果您不想使用 CSV 模块，则需要使用正则表达式。试试这个：

```
import re
regex = ",(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)"
string = '1997,Ford,E350,"Super, luxurious truck"'
array = re.split(regex, string)

print(array[3])
"Super, luxurious truck" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-08T09:19:33.117

csv.py 模块可能很好 - 但如果您想查看和/或控制它的工作方式，这里有一个基于协程的小型 Python 解决方案：

```
def csv_parser(delimiter=','):
    field = []
    while True:
        char = (yield(''.join(field)))
        field = []

        leading_whitespace = []    
        while char and char == ' ':
            leading_whitespace.append(char)
            char = (yield)

        if char == '"' or char == "'":
            suround = char
            char = (yield)
            while True:
                if char == suround:
                    char = (yield)
                    if not char == suround:
                        break

                field.append(char)
                char = (yield)

            while not char == delimiter:
                if char == None:
                    (yield(''.join(field)))
                char = (yield)
        else:
            field = leading_whitespace
            while not char == delimiter:
                if char == None:
                    (yield(''.join(field)))
                field.append(char)
                char = (yield)

def parse_csv(csv_text):
    processor = csv_parser()
    processor.next() # start the processor coroutine

    split_result = []
    for c in list(csv_text) + [None]:
        emit = processor.send(c)
        if emit:
            split_result.append(emit)

    return split_result

print parse_csv('1997,Ford,E350,"Super, luxurious truck"') 
```

在 python 2.7 上测试

# android - Android 服务、活动和应用程序

> ID：12296591
> 
> 赞同：0
> 
> 时间：2012-09-06T09:05:01.287
> 
> 标签：android, android-context

默认情况下，服务和活动共享同一个进程，应用程序上下文是一个可以在这两个隔离类之间共享内容的类，这是真的吗？将应用程序对象用作共享的全局状态持有者是一种好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:16:59.377

为什么不。您的应用程序对象可以比服务器或活动更有效，因此从技术上讲，充当连接所有应用程序元素的“集线器”是完全可以的。当然，您应该使用持久存储来备份它，以防整个应用程序被杀死，但总的来说：“是的”。

# android - 在我的活动 Android 中显示外部活动

> ID：12296600
> 
> 赞同：0
> 
> 时间：2012-09-06T09:05:28.483
> 
> 标签：android

我有一个文件浏览器应用程序，其中有两个选项。打开并发送电子邮件。

单击打开时，如果可用，它会使用外部应用程序打开文件。

单击电子邮件时，它会启动 Intent.ACTION_SEND_MULTIPLE 活动以发送电子邮件。

我想要的是当用户单击电子邮件时，首先查看文件并显示外部活动发送按钮。

是否可以将外部活动添加到我自己的具有发送按钮的活动中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:22:56.000

也许，您可以在您的应用程序中实现“[共享](https://stackoverflow.com/questions/5646104/how-to-implement-the-share-function-of-a-android-app)”功能。这不完全是您想要的，但您不能从您的应用程序添加到外部应用程序按钮（这是真正的安全违规）。因此，您可以实现“共享”功能，如果外部应用程序具有此按钮（共享），您的应用程序将被添加到列表中。

# standards - 理解标准毫升定义的必备知识

> ID：12296605
> 
> 赞同：1
> 
> 时间：2012-09-06T09:05:50.687
> 
> 标签：standards, definition, sml

谁能告诉我标准 ML 的定义中的背景理论是什么，发现非常有趣和漂亮，我确实学了一些 sml，但我想要更多，但不知道如何开始（理解 TDSML）

提前 3 倍

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:30:08.647

对于旧版本的定义（SML'90），实际上有一本名为“标准机器学习评论”的单独书，解释了如何解释定义。SML'90 定义和评论都早已绝版，但幸运的是，可以[免费获得 PDF](http://www.itu.dk/people/tofte/publ/1990sml/1990sml.html)。

SML'90 定义与 SML'97 有一些不同，特别是在模块系统方面。总的来说，它更复杂。但是大部分注释应该仍然适用，如果您同时拥有两个版本，应该不难找出仍然相关的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T11:46:24.920

这是我的想法：为了理解标准机器学习的定义中使用的方法，你应该对以下内容有一些基本的了解：

*   [集合论](http://en.wikipedia.org/wiki/Set_theory)
*   [职能](http://en.wikipedia.org/wiki/Function_%28mathematics%29)
*   [一阶逻辑](http://en.wikipedia.org/wiki/First-order_logic)
*   [类型论](http://en.wikipedia.org/wiki/Type_theory)

此外，您应该能够阅读和理解本书广泛使用的[推理规则](http://en.wikipedia.org/wiki/Inference_rules)。

# php - 81 端口上的 PHP 卷曲

> ID：12296606
> 
> 赞同：5
> 
> 时间：2012-09-06T09:05:53.777
> 
> 标签：php, curl, xampp, port

我使用 XAMPP 在端口 80 和端口 81 上本地设置了 2 个 Apache 服务器。我可以通过我的浏览器成功访问它们。目前该 URL 可在以下位置访问

```
http://27.4.198.225/ncmsl/check.php 
```

和

```
http://27.4.198.225:81/ncmsl/check.php. 
```

当我尝试为他们编写一个简单的 curl 代码时

```
$ch=curl_init();                    
$url = "http://27.4.198.225/ncmsl/check.php";
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
curl_setopt($ch, CURLOPT_URL, $url);
curl_exec($ch);
curl_close($ch); 
```

它适用于端口 80 的服务器，但不适用于端口 81 的服务器，即

```
$ch=curl_init();                    
$url = "http://27.4.198.225:81/ncmsl/check.php";
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
curl_setopt($ch, CURLOPT_URL, $url);
curl_exec($ch);
curl_close($ch); 
```

可能的原因是什么？我试过使用 CURLOPT_PORT 但这也不起作用

这些 URL 是 LIVE URL。任何人都可以检查他们是否能够在自己的网络上使用自己的 CURL 代码成功访问它们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T09:13:26.527

尝试这个

```
curl_setopt ($ch, CURLOPT_PORT , 81); 
```

**更新代码：-**

看到这个网址：- [php curl 问题](https://stackoverflow.com/questions/1933505/php-curl-problem)

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_URL, 'http://27.4.198.225:81/ncmsl/check.php');
$store = curl_exec ($ch);
echo substr($store, 1);
curl_close ($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T22:48:39.213

尝试这个：

```
curl_setopt($ch, CURLOPT_PORT, $_SERVER['SERVER_PORT']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:11:11.210

Take a look at **CURLOPT_PORT** in the manual for [curl_setopt()](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:13:18.290

使用这个指定端口，

```
curl_setopt($ch, CURLOPT_PORT, 81); 
```

# grep - 如何用几行获取 grep 命令输出？

> ID：12296607
> 
> 赞同：-3
> 
> 时间：2012-09-06T09:06:06.667
> 
> 标签：grep

现在我正在使用下一个命令来获取包含“random_string”的列表文件：

```
grep -l random_string *.txt 
```

我不仅想获得文件名，还想获得输入之后（并且可能是之前）的几行。

所以我想要这样的输出：

```
file1.txt
    random_string
    ....
    ....
    random_string
    ....
    ....
file2.txt
    .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:03:38.523

那么好吧。我知道了。

只需要将 -l 选项替换为 -A 或 -B 或 -C（它用于 A 和 B 的结果）。

```
grep --after-context=10 some_string *.py 
```

# c# - Outlook 不理解我的 ical 文件

> ID：12296616
> 
> 赞同：1
> 
> 时间：2012-09-06T09:06:49.670
> 
> 标签：c#, asp.net-mvc-3, outlook, icalendar

我正在尝试在我的 MVC3 网站上创建用户可以订阅的 iCalendar 提要。我使用 DDay.ical 库成功创建了 ical 文件。当我从网站下载 ical 文件并用 Outlook 打开它时，它可以正常打开。但是，当我尝试通过右键单击日历列表并选择 Outlook 来订阅它时

> 添加日历 => 来自互联网...

并输入 ical 文件的 url，它告诉我该文件不是有效的互联网日历文件。

这里发生了什么？任何人都可以帮我解决这个问题吗？

我的 ical 文件如下所示：

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
PRODID:mywebsite
BEGIN:VEVENT
DTEND:20120907T120000
DTSTAMP:20120906T110251
DTSTART:20120907T080000
SEQUENCE:0
STATUS:Confirmed
SUMMARY:Nanosurf easyScan 2 STM
UID:170ee5f7-0b22-4b64-adae-dfaff0277e96
END:VEVENT
BEGIN:VEVENT
DTEND:20120810T120000
DTSTAMP:20120906T110251
DTSTART:20120810T090000
SEQUENCE:0
STATUS:Confirmed
SUMMARY:Nanosurf easyScan 2 STM
UID:2a7e4445-1fe5-4224-b4b3-61e33785e181
END:VEVENT
BEGIN:VEVENT
DTEND:20120814T130000
DTSTAMP:20120906T110251
DTSTART:20120814T090000
SEQUENCE:0
STATUS:Confirmed
SUMMARY:Nanosurf easyScan 2 STM
UID:ee1535a6-e971-4a92-a06a-5d10d414cf07
END:VEVENT
END:VCALENDAR 
```

首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:53:55.647

每条线后面都有一个空格。

[http://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)

# php - PHP函数返回字符串

> ID：12296624
> 
> 赞同：10
> 
> 时间：2012-09-06T09:07:22.680
> 
> 标签：php, string, function

我对 PHP 相当陌生。我有一个检查价格成本的功能。我想从此函数返回变量以供全局使用：

```
<?
function getDeliveryPrice($qew){
    if ($qew=="1"){
        $deliveryPrice="60";
    } else {
        $deliveryPrice="20";
    }
    return $deliveryPrice;                          
}
// Assuming these two next lines are on external pages..
getDeliveryPrice(12);
echo $deliveryPrice; // It should return 20

?> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T09:08:27.163

您应该简单地将返回值存储在一个变量中：

```
$deliveryPrice = getDeliveryPrice(12);
echo $deliveryPrice; // will print 20 
```

`$deliveryPrice`上面的变量是与函数内部*不同*的变量`$deliveryPrice`。由于[变量范围](http://php.net/manual/en/language.variables.scope.php)，后者在函数外部不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:09:19.720

```
<?
function getDeliveryPrice($qew){
    if ($qew=="1"){
        $deliveryPrice="60";
    } else {
        $deliveryPrice="20";
    }
    return $deliveryPrice;                          
}

$price = getDeliveryPrice(12);
echo $price;

?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T09:12:26.773

```
<?php
function getDeliveryPrice($qew){
   global $deliveryPrice;
    if ($qew=="1"){
        $deliveryPrice="60";
    } else {
        $deliveryPrice="20";
    }
    //return $deliveryPrice;                          
}
// Assuming these two next lines are on external pages..
getDeliveryPrice(12);
echo $deliveryPrice; // It should return 20

?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T09:23:44.233

正如一些人所说，尝试为此使用类。

```
class myClass
{
    private $delivery_price;

    public function setDeliveryPrice($qew = 0)
    {
        if ($qew == "1") {
            $this->delivery_price = "60";
        } else {
            $this->delivery_price = "20";
        }
    }

    public function getDeliveryPrice()
    {
        return $this->delivery_price;
    }
} 
```

现在，要使用它，只需初始化类并执行您需要的操作：

```
$myClass = new myClass();
$myClass->setDeliveryPrice(1);

echo $myClass->getDeliveryPrice(); 
```

# vb.net - 选择多个列时LinqToSQL联合转换错误（无法将...的DataQuery转换为...的IEnumerable）

> ID：12296626
> 
> 赞同：0
> 
> 时间：2012-09-06T09:07:39.783
> 
> 标签：vb.net, linq, linq-to-sql, union

执行以下代码时出现运行时错误：(vb.net)

```
dim q = (From x in db.T1
         select x.F11, x.F12).Union( _
        (From y in db.T2
         select y.F21, y.F22) 
```

F11和F21同类型；F21 和 F22 具有相同的类型。

运行时错误指出“无法从 DataQuery（匿名类型（...））转换为 iEnumerable（匿名类型...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:26:14.687

`Union`匿名类型应该可以工作。编译器足够智能，可以将两个匿名类型相同。仔细检查您在两个表数据库中的字段类型，它们应该完全相同

您可以在同一张桌子上尝试联合以查看此内容

```
(From x in db.T1
         select FIRST=x.F11, SECOND=x.F21).Union( _
        (From y in db.T1
         select FIRST=y.F11, SECOND=y.F21) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:27:13.827

我现在明白在**Union**中允许使用**匿名**类型**IS**。 - 您只需要确保联合查询中的字段*名称***和***类型*相同，如示例中所示：

 ******```
dim q = (From x in db.T1
         Select FIRST = x.F11, LAST = x.F12).Union _
        (From y in db.T2
         Select FIRST = y.F21, LAST = y.F22) 
```

F11和F21同类型；F12、F22同类型******

# css - Need hack for ie9 only

> ID：12296628
> 
> 赞同：10
> 
> 时间：2012-09-06T09:07:42.520
> 
> 标签：css, internet-explorer-9, css-hack

Is there a hack to target IE9 only? I am facing a problem in IE9 only, other browsers are working fine. I am using `\9`, but it is effecting IE8 as well.

I don't want to use conditional comments.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T09:10:14.733

你可以用这个`:root #element { color:pink \0/IE9; } /* IE9 + IE10pp4 */`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-27T03:51:39.143

我想出了一个媒体查询也可以做到这一点。它仅指定 IE9。

```
@media all and (min-width:0\0) and (min-resolution:.001dpcm)
{
    #div { color:red; }
} 
```

我已经解决的其他问题，包括 msie 9+ 媒体查询在我的 github 页面上：[https](https://github.com/jeffclayton/css_hack_testing) ://github.com/jeffclayton/css_hack_testing - 其中大部分我已发送到 browserhacks.com 以供包含。

*2017 更新*：为了看到它的工作，我在这里创建了一个实时测试页面，以及我在[http://browserstrangeness.bitbucket.io/css_hacks.html](http://browserstrangeness.bitbucket.io/css_hacks.html)和 MIRROR 上工作的许多其他页面：http: [//browserstrangeness.github.io/css_hacks .html](http://browserstrangeness.github.io/css_hacks.html)

请注意，当您将代码复制到自己的站点时，它是 min-width:0\0（零反斜杠零）。不要与 min-width:0 （只是一个零）混淆，它不能将 IE9 与其他浏览器区分开来。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T09:10:44.010

There is another way!

```
:root #div { background: #fff \0/IE9; }  /* IE9 */ 
```

Use the `:root` psuedo selector. This works because the `@media all and (min-width:0)` part as been removed in favor of this method in IE9\.

Be aware though, that this is not a safe method as it doesn't work on all selectors. The best thing to use is conditional comments, it is the safest, easiest and best way to target different versions of Internet Explorer except IE10 which has dropped the support for conditional comments.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T15:16:33.850

在我的 IE9 模拟器中，列出的解决方案都不起作用。唯一能让我们正确调整大小的技巧，例如，IE9 中的复选框是：

```
/* IE9 */
:root input#my-checkbox {
    width:20px !important \ ;
    height:20px !important \ ;
    box-sizing:content-box !important \ ;
} 
```

我**不知道**这是否也会影响 IE8 或 IE10 等，但无论如何我们都有条件单独处理这些。

希望这可以帮助某人。

# android - List View not scrollable

> ID：12296631
> 
> 赞同：0
> 
> 时间：2012-09-06T09:07:50.747
> 
> 标签：android

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="600dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" >

            <include
                android:id="@+id/include1"
                android:layout_width="fill_parent"
                android:layout_height="70dp"
                layout="@layout/header_history" >
            </include>

            <ListView
                android:id="@android:id/list"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:cacheColorHint="#00000000"
                android:divider="@android:color/black"
                android:dividerHeight="1.0sp"
                android:textColor="#000000" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

header_history

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/button" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="70dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/button"
        android:gravity="left|center_vertical"
        android:text="   History"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white"
        android:textSize="24sp"
        android:textStyle="bold" />

</RelativeLayout> 
```

I am trying to make my list view scrollable but it has become scrollable but I am unable to find the details of the list view. Please help me for the same. Friends,I have updated the header_history file also.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:10:15.483

我只回答了一个类似的问题。在这里，我向您解释为什么它不滚动？

只需从布局中删除 ScrollView。并且，将 LinearLayout 设为父级。并且，尝试运行您的应用程序。它将滚动列表。

因为 ListView 类实现了它自己的滚动并且它只是不接收手势，因为它们都由父 ScrollView 处理，我强烈建议您以某种方式简化您的布局。例如，您可以将希望滚动到 ListView 的视图添加为页眉或页脚。

看看[这个](https://stackoverflow.com/a/6211286/940096)

查看我现有的[答案](https://stackoverflow.com/a/12276187/940096)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:10:59.320

You shouldn't put a ListView inside a ScrollView because the ListView class implements its own scrolling and it just doesn't receive gestures because they all are handled by the parent ScrollView.

**Make TextView Scrollable.**

Just set the

```
android:maxLines = "AN_INTEGER"

android:scrollbars = "vertical" 
```

properties of your TextView in your layout's xml file.

Then use:

```
yourTextView.setMovementMethod(new ScrollingMovementMethod()) 
```

in your code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:15:08.740

问题是您将 a`ListView`放入了`ScrollView`. Android API 说你永远不应该把一个可滚动的元素放在另一个可滚动的元素中。

如果您无论如何都需要这样做，您可以通过继承`ListView`并覆盖该`onMeasure()`方法来解决问题。

*   [如何在不折叠的情况下将 ListView 放入 ScrollView？](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing)
*   [http://nex-otaku-en.blogspot.de/2010/12/android-put-listview-in-scrollview.html](http://nex-otaku-en.blogspot.de/2010/12/android-put-listview-in-scrollview.html)

编辑：您使用以下代码创建一个完全展开的列表。另外值得注意的是，由于性能原因，这对于大型列表来说可能是一个可怕的想法。

```
public class FullExpandedListView extends ListView {

    public FullExpandedListView(Context context) {
        super(context);
    }

    @Override
    protected void onMeasure(int a, int b) {
        super.onMeasure(a, b);

        setListViewHeightBasedOnChildren();
    }

    private void setListViewHeightBasedOnChildren() {

        SwfListAdapter listAdapter = (SwfListAdapter) getAdapter();

        if (listAdapter == null) {

            return;
        }

        int totalHeight = 0;
        int desiredWidth = MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST);

        for (int i = 0; i < listAdapter.getCount(); i++) {

            View listItem = listAdapter.getView(i, null, listControl);
            listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listControl.getLayoutParams();
        params.height = totalHeight + (listControl.getDividerHeight() * (listAdapter.getCount() - 1));
        setLayoutParams(params);
    }
} 
```

# hibernate - Hibernate Model class and DAO

> ID：12296633
> 
> 赞同：0
> 
> 时间：2012-09-06T09:07:59.343
> 
> 标签：hibernate, hibernate-mapping, hibernate3

I have a simple question and I hope I can find answer here! Can we mix hibernate model and DAO in same class? Is there a design Pattern which specify this?

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:33:05.303

我认为您指的是[ActiveRecord](http://martinfowler.com/eaaCatalog/activeRecord.html)模式，模型类具有 save()、get() 等方法。这种模式在 Django 和 Ruby n' Rails 等框架中实现。Hibernate 使用[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)模式代替。

# tsql - crystal report, tsql

> ID：12296634
> 
> 赞同：2
> 
> 时间：2012-09-06T09:08:01.993
> 
> 标签：tsql, crystal-reports

I am working on crystal report with backend as sql server 2005. Report is used to display tenant details with a flat in which he is residing. On filter screen i have filter Sort By tenant or unit.

When I sort by tenant, details appear as shown below,

```
Tenant name   tenant_unit tenant_rent
A             160         1000
              180         1000
B             170         2000 
```

When sort by Unit, details appear as shown below,

```
Tenant name   tenant unit tenant rent
A             160         1000
B             170         2000
A             180         1000 
```

My question is, Is there any way to bring details in one line instead of two lines when sorting by unit?

FYI: On crystal I have group of tenant with sort order original.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:03:34.160

我想我现在看到了你想要的，如果你想在一行上显示单个租户的详细信息，那么你需要的是一个组：

```
Tenant name   tenant_rent
A             2000
B             2000 
```

为此，您可以在租户上添加一个组（在报告 > 组专家下），然后右键单击tenant_rent 字段并转到插入 > 摘要，然后将位置设置为“组 1”。

# java - 是否可以让空的 RequestParam 值使用 defaultValue？

> ID：12296642
> 
> 赞同：144
> 
> 时间：2012-09-06T09:08:24.397
> 
> 标签：java, spring, spring-mvc

如果我有一个类似于以下的请求映射：

```
@RequestMapping(value = "/test", method = RequestMethod.POST)
@ResponseBody
public void test(@RequestParam(value = "i", defaultValue = "10") int i) {
} 
```

然后使用以下命令调用此请求：

```
http://example.com/test?i= 
```

我收到错误消息

> 无法将“java.lang.String”类型的值转换为“int”类型；嵌套异常是 java.lang.NumberFormatException: For input string: ""'

我可以通过阻止 javascript 客户端发送空参数或通过接受字符串值并仅在未发现它们为空时才解析来解决此问题。

**更新**：更高版本的 spring 现在实现了最初想要的行为。

我刚刚在春季 4.3.5 中对此进行了测试，发现现在的行为实际上会将 null 值转换为默认值而无需提高 a `NumberFormatException`，因此；我原来的映射现在工作正常。

我不确定这种行为改变是哪个版本的 spring。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-09-22T00:18:44.957

您可以将 @RequestParam 类型更改为 Integer 并使其不需要。这将使您的请求成功，但它将为空。您可以在控制器方法中将其显式设置为默认值：

```
@RequestMapping(value = "/test", method = RequestMethod.POST)
@ResponseBody
public void test(@RequestParam(value = "i", required=false) Integer i) {
    if(i == null) {
        i = 10;
    }
    // ...
} 
```

我已经从上面的示例中删除了 defaultValue，但是如果您希望收到根本没有设置的请求，则可能需要包含它：

```
http://example.com/test 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2014-02-20T08:40:02.803

您可以通过设置默认值来保留原始类型，在您的情况下只需添加**“required = false”**属性：

```
@RequestParam(value = "i", required = false, defaultValue = "10") int i 
```

PS Spring文档中的此页面可能有用： [Annotation Type RequestParam](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-02-19T09:38:24.987

您可以设置 RequestParam，使用通用类 Integer 而不是 int，它将解决您的问题。

```
 @RequestParam(value= "i", defaultValue = "20") Integer i 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-25T11:16:56.007

您可以使用`@Nullable`默认值。

```
@Nullable @RequestParam(value = "i", defaultValue = "10") Integer i 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-19T05:05:06.757

你也可以做这样的事情 -

```
 @RequestParam(value= "i", defaultValue = "20") Optional<Integer> i 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-01T09:16:56.323

这在 2013 年被认为是一个错误：[https ://jira.spring.io/browse/SPR-10180](https://jira.spring.io/browse/SPR-10180)

并在 3.2.2 版中修复。之后的任何版本都不应出现问题，并且您的代码应该可以正常工作。

# dynamic-reports - 线程“主”java.lang.NoSuchMethodError 中的异常：net.sf.jasperreports.engine.design.JasperDesign.setIgnorePagination(Z)V

> ID：12296646
> 
> 赞同：0
> 
> 时间：2012-09-06T09:08:32.333
> 
> 标签：dynamic-reports

我是[dynamicreports](http://dynamicreports.sourceforge.net/examples/datafilterreport.html)的新手，可以在链接中找到该示例，但它给了我以下异常。

请帮我找出问题所在。

线程“主”java.lang.NoSuchMethodError 中的异常：net.sf.jasperreports.engine.design.JasperDesign.setIgnorePagination(Z)V

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:00:48.487

您必须确保您使用的是正确版本的库。 [http://dynamicreports.sourceforge.net/requirements.html](http://dynamicreports.sourceforge.net/requirements.html)

在您的情况下，您对 jasperreports 有错误。使用 DynamicReports 3.0.2，jasperreports 正确版本为 4.7.0 或以上

# ruby-on-rails - How to manage a project on ruby on rails 2.3?

> ID：12296647
> 
> 赞同：1
> 
> 时间：2012-09-06T09:08:40.700
> 
> 标签：ruby-on-rails, project-management, ruby-on-rails-2

I have a large ruby on rails 2.3 which was now a disaster because of the slowness and many bugs. I'm the only programmer and every day I've done debugging and tearing my hair off because of this. The users are already using the product but so many bugs and data are scattered.

I was employed without prior knowledge of project development and management. Now I'm suffering of having more overtime and a crisis on my codes to be fixed.

And also I've created this app while learning rails so there are codes there that became stranger to me.

What should I do? What are your suggestions? What books do I need to read about more?

Please I need some help.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:26:01.130

我很乐意推荐你升级到 Rails 3。特别是因为有许多新特性并且有些东西被简化了，而且它会简化未来的可维护性。

然而，不幸的是，鉴于您手头已经有更多，我犹豫（或者更确切地说不能）实际推荐它。

在这种情况下，您能做的最好的事情就是开始编写测试。如果有这么多错误，我不得不假设您没有测试或您的测试套件不完整。测试将帮助您确信当您尝试修复其他东西时不会破坏任何东西。

默认的 Rails 测试框架可以在[Ruby on Rails 指南](http://guides.rubyonrails.org/testing.html)中找到。话虽如此，很多人更喜欢[RSpec](https://github.com/rspec/rspec-rails)测试框架。默认的 Rails 测试框架确实存在缺点（尤其是固定装置的脆弱性 - 尝试获取[工厂 gem](https://www.ruby-toolbox.com/categories/rails_fixture_replacement)，以及其他功能，例如模拟和期望，以及嵌套上下文）。

您应该阅读测试框架，并尝试一下。然而，尽早选择一个测试框架，然后开始测试一切！

也许当你对你的测试套件更有信心并修复了最重要的错误时，你应该更多地考虑升级 Rails 的路径——因为所有的 gem 都会继续前进，并逐渐放弃对 Rails 2.3 的支持，这意味着你将使用越来越旧的宝石，可能不再得到很好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:52:46.240

> 据我了解，您正在寻求项目管理技巧和工具，以帮助您控制 Rails 项目。

我相信你需要做的第一件事是稳定项目。为此，您需要最小化错误并绘制所需工作的图表。

我看到了两种互补的方法：

*   使用任务/错误跟踪工具
*   开始使用黄瓜进行测试

### 任务/错误跟踪

这非常重要，因为您将需要某种列出所有错误的列表。

有时用户发现了一个 bug，突然你不得不放弃一切，因为在那一刻，那个 bug 是有史以来最重要的 bug，需要立即解决。但是，如果您直接问他们这是否意味着您正在修复的错误或多或少重要，那么答案可能会有所不同。

因此，如果有一种明确的方法可以让用户参与该决策过程，对您有利。如果有一个共享的错误列表，用户还可以关注当前状态（您正在处理的内容），他们可以指示/选择哪些错误对他们更重要。

其次：列出项目（工作/任务/突出的错误/...）也将帮助您规划工作。

某种错误跟踪有很多选择，但一些简单/实用/免费的建议是

*   结帐
*   使用来自 github 的问题

跟踪错误/任务将使您感觉您获得了对项目的控制权，此外：它还将使您的客户更容易看到这一点。

### 黄瓜

在修复 bug 时，总是存在引入新 bug 的危险，尤其是在最初不是您自己的项目中。

在一个几乎没有测试的项目中，我总是建议从黄瓜开始。黄瓜有几个优点：

*   它从外部测试您的应用程序/网站：无需完全理解代码，您只需要知道应用程序应该做什么。如果我点击这个链接，它应该带我到那个页面。
*   用 cucumber 编写测试真的很容易，而且你很快就能得到测试覆盖
*   作为奖励，你`test-code`是可读的，你可以向你的客户/用户展示，他们实际上会理解测试所涵盖的内容（并且可以纠正/改进它）。

### 升级还是不升级？

我个人认为您的第一步应该是稳定项目并最小化/删除所有错误。虽然升级到 Rails 3 将是一个巨大的改进，但这并不是一个简单的过程。有很好的指导方针，但如果你现在这样做，你将不知道升级期间是否引入了错误，或者之前存在。首先按顺序获得您的代码质量，然后进行升级。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:38:55.060

实际上，您要问的问题完全取决于清理整个项目需要进行多少重构。**如果您有足够的时间**将其彻底清理干净。我建议以下步骤：

*   **准备**
    *   获取整个项目的可视化。什么是必需的，什么不是必需的。
    *   正确定义您的资源和它们之间的关系。
    *   使用正确的**RESTful 路由**。
    *   确定测试工具和框架，如,`cucumber`等。`rspec``factory girl`
*   **行动计划**
    *   决定（如果可能，作为一个团队）所需的**最小**或**必要**更改是什么。
    *   隔离不同组中的所有组件，以便可以单独重构每个组。较小的组是优选的。
    *   决定测试用例。
    *   将任务分解成尽可能小的尺寸。
    *   确保将测试覆盖率保持在 90% 以上。

对于一个由 4 名成员组成的团队的中等规模项目，此过程大约需要 4-5 个月。

如果您有任何具体的困惑，请告诉我们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:59:23.030

不幸的是，您当前的解决方案没有快速解决方案。如果您认真考虑升级，如果您还没有编写测试，则需要时间来填补缺失的测试，在 Rails 3 之上选择测试框架，并在您准备好翻转时制定必要的数据迁移开关。

另一种选择是继续使用 Rails 2.x，虽然支持途径会更加有限，但这并不是完全不可理解的。您仍然需要将测试作为第一要务，并了解现有应用程序中存在的各种细微差别。

对于您的场景（几乎没有经验的单人球拍），我认为坚持您所拥有的并将可测试性提高到您认为值得升级的程度，这将是谨慎的行动。无论您将采取哪种行动，都准备好在中短期内投入大量工作（但这就是积累技术债务的情况）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T09:59:44.573

阅读内容：[http](http://guides.rubyonrails.org/v2.3.11/) ://guides.rubyonrails.org/v2.3.11/从有关调试和性能测试的章节开始。

暂时忘记升级到 Rails 3，此时它只会引入更多的错误，并且可能会给遗留的 gem 和插件带来很多问题。并且不要忘记您需要 ruby​​ 1.9 才能升级到 rails 3 - 又是一批问题。

*正如ronalchn 所*建议的，添加测试是个好主意。我建议从单元测试开始。您可能需要大量重写代码才能使其可测试。（换句话说，与其尝试测试以适应当前的遗留代码，不如重构代码以使其可测试。）

# delphi - 集中式数据库服务器的桌面应用程序

> ID：12296650
> 
> 赞同：0
> 
> 时间：2012-09-06T09:08:45.963
> 
> 标签：delphi, delphi-5

我计划使用 Delphi 5 创建一个与库相关的桌面应用程序，为此将在一个地方保存一个数据库，并且该应用程序将安装在不同城市的不同地方。

在这里，我的疑问是使用Delphi 5，是否有可能安装在不同城市的该应用程序的所有实例都可以访问一个集中式数据库？如果是，那怎么办？

如果有人有任何其他想法，请随时分享。因为我只熟悉桌面应用程序开发，这就是我问应用程序的这些不同实例如何只能访问一个集中式数据库的原因？

因此，所有的屏幕和编码都将使用 Delphi 5 完成，而且它将是一个桌面应用程序，不同之处在于数据库访问将来自不同的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:27:38.990

这取决于后端数据库技术。通过“桌面应用程序开发”你可能是指 ISAM 数据库，如 Paradox、DBF 系列等。

如果是这样，那么您应该快速了解 SQL，它的概念，ACID 原理等。我相信有很多关于 SQL 的英文书籍，特别是 SQL with Delphi 链接。对于盯着你可以尝试类似[http://www.firebirdsql.org/en/books/](http://www.firebirdsql.org/en/books/)，但基本上你必须涵盖三个领域：

*   SQL 概述、原则、模式等
*   Delphi wrt SQL 设计的详细信息。
*   有关所选数据库服务器的详细信息，包括将其连接到 Delphi 的组件、错误、陷阱等

我认为你很难在一本书中找到所有这些，并且必须得到两三个。

然后，您将在客户端和服务器之间建立网络连接。这分为两个问题。

1.  如何找到服务器
2.  如何连接到它

VPN 是可靠的解决方案，您可以尝试 Windows 内置的方法，或者像 TeamViewer、Comodo、Hamachi 等更简单的方法，但这会使您的整个服务器计算机暴露给您的客户。

您最好不要找到功能齐全的网络，而是要连接数据库服务器客户端的隧道，仅此而已。在俄罗斯社区，Firebird/Interbase 系列的经典解决方案是[http://sf.net/projects/zebedee](http://sf.net/projects/zebedee) for Windows。对于 Linux，通常使用 SSH。如果你用谷歌搜索“隧道”并且你选择了数据库服务器，你可能会找到很多英文的常见问题解答。

# css - 在左上角浮动 div 而不将其放在第一行

> ID：12296651
> 
> 赞同：2
> 
> 时间：2012-09-06T09:08:52.103
> 
> 标签：css, html, semantic-markup

看到这个小提琴：http: [//jsfiddle.net/LGVKm/1/](http://jsfiddle.net/LGVKm/1/)

出于语义和 SEO 原因（并且因为我更喜欢它），我想在文档流中的内容之后放置搁置元素。但我希望旁边从文本向左浮动，在顶部。有什么方法可以使用 css 实现这一点？尝试了很多。

我总是可以在文本 div 之前将其放在一边，但这会将其放在重要内容之前。我不想要。或者我应该放弃我的骄傲，走简单的路线。这对搜索引擎有影响吗？我想aside元素的优先级较低......坚果不知道蜘蛛是如何感知html5的......

还有一个语义方面的问题：我怀疑是否使用文章标签作为内容，但我不确定。它不像它会被分发。可以替换文章的部分，但部分在我看来更有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:47:10.520

有一个 CSS3 解决方案可能会对您有所帮助。为此，您可以使用**灵活**的属性。

```
.parent{
    display: -moz-box;
    display: -webkit-box;
    display: box;
    -moz-box-orient: horizontal;
    -webkit-box-orient: horizontal;
    box-orient: horizontal;
    -moz-box-direction: reverse;
    -webkit-box-direction: reverse;
    box-direction: reverse;
}
.parent div { 
    border: 1px solid blue;
    -moz-box-flex: 2;
    -webkit-box-flex: 2;
    box-flex: 2;
}
aside {
    width: 4em; 
    border: 1px solid red;
    -moz-box-flex: 1;
    -webkit-box-flex: 1;
    box-flex: 1;
} 
```

检查这个[http://jsfiddle.net/LGVKm/26/](http://jsfiddle.net/LGVKm/26/)

阅读此[https://hacks.mozilla.org/2010/04/the-css-3-flexible-box-model/](https://hacks.mozilla.org/2010/04/the-css-3-flexible-box-model/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:17:47.230

尝试添加类似：

```
float:right; width: 70% 
```

到`div`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:29:44.343

[http://jsfiddle.net/LGVKm/10/](http://jsfiddle.net/LGVKm/10/)试试这个。你会得到你的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:10:46.877

只要您定义它们的宽度并拥有一个具有定义宽度的容器，就可以向左/向右浮动元素。我改变了你的[jsfiddle](http://jsfiddle.net/LGVKm/29/)以反映我的意思。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:15:53.273

## 布局

根据整体结构（如导航或网页标题），您可以使用绝对定位。我认为它可能在这里工作（`relative;`对于容器，`absolute`对于其中一列和`margin`另一列）。

该`float:right;`方法也可以。如果您不喜欢调整大小的行为，您可以查看 CSS [Media Queries](http://www.w3.org/TR/css3-mediaqueries/)，以便在视口更改时调整布局。

* * *

## `article`还是`section`？

> 还有一个语义方面的问题：我怀疑是否使用文章标签作为内容，但我不确定。它不像它会被分发。可以替换文章的部分，但部分在我看来更有意义。

`article`如果该内容（在“我们的工作”范围内）是一个连贯的文本，可以单独阅读，那将是正确的选择。

它是否*要*分发并不重要，重要的是它是否*可以*典型地分发而不会失去其意义。

如果它是页面上唯一的内容（= 主要内容），`article`大多数情况下将是正确的选择。仅当顶层没有其他分段元素（如`nav`or ）时，才不应使用单独的，而应直接使用。`aside``article``body`

* * *

## 其他一些注意事项：

您可以（并且我认为您应该）将两个“Sub”块包含在显式`section`元素中

你可以（我认为你应该）给出`aside`一个明确的标题。如果设计中不需要它，请将其隐藏（以便屏幕阅读器仍能阅读）。

仅在与[定义](http://www.w3.org/TR/html5/the-figure-element.html#the-figure-element)`figure`匹配时使用。不要将它用于需要带有标题的图像的*所有情况。*

 *目前，您与（或者，如果您愿意）`aside`“相关” 。这是故意的吗？否则，您应该将其添加为后代（因此它将与整个网页“相关”）。`section``article``body`*

# c# - Handling the SHDocVw Window.closing event to close a form in C#

> ID：12296652
> 
> 赞同：2
> 
> 时间：2012-09-06T09:08:53.080
> 
> 标签：c#, .net, shdocvw

With a lot of digging I have managed to share session between my 2 forms with the SHDocVw.dll. I have a Main form and a Popup form, each contain a WebBrowser control.

My question is : how can I handle the window.close javascript event to close the popup form ?

I think I have the correct syntax but I can't make it happen.

Main Form (webbrowser Navigator) :

```
 SHDocVw.WebBrowser nativeBrowser;
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        nativeBrowser = (SHDocVw.WebBrowser)Navigator.ActiveXInstance;
        nativeBrowser.NewWindow2 += nativeBrowser_NewWindow2;
    }

    protected override void OnFormClosing(FormClosingEventArgs e)
    {
        nativeBrowser.NewWindow2 -= nativeBrowser_NewWindow2;
        base.OnFormClosing(e);
    }

    void nativeBrowser_NewWindow2(ref object ppDisp, ref bool Cancel)
    {
        var popup = new Form3();
        popup.Show(this);
        ppDisp = popup.webBrowser1.ActiveXInstance;
    } 
```

Popup form

```
public Form3()
    {
        InitializeComponent();         
    }

    public WebBrowser Browser
    {
        get { return webBrowser1; }
    } 
```

I think I have to add something like this to the popup code :

```
SHDocVw.WebBrowser nativeBrowser;

protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    nativeBrowser = (SHDocVw.WebBrowser)webBrowser1.ActiveXInstance;
    nativeBrowser.WindowClosing += nativeBrowser_closing;
}

protected void nativeBrowser_closing(bool IsChildWindow, ref bool Cancel)
{
    this.Close();
} 
```

But when I declare the `SHDocVw.WebBrowser nativeBrowser` it opens a new IE instance instead of binding to the current one.

Can someone help me please :) ?

# wpf - 将样式应用于 ListBoxItem 而不影响内部的 ComboboxItem

> ID：12296654
> 
> 赞同：3
> 
> 时间：2012-09-06T09:09:10.240
> 
> 标签：wpf, xaml, styles, listboxitem

我有一个`ListBox`使用`DataTemplate`. 单曲`ListBoxItems`显示为 a`TextBlock`和 a `ComboBox`。我现在想将 Style 用于 the`ListBoxItems`而不将其用于 inner 的项目`ComboBoxes`。不幸的是，`ComboBoxItem`继承`ListBoxItem`似乎使这成为不可能。或者我在这里错过了什么？

```
<ListBox Grid.Row="1" Grid.Column="1" Name="comboBoxI" Margin="2"
                ItemsSource="{Binding SomeCollection}" IsSynchronizedWithCurrentItem="True">
    <ListBox.Resources>
        <Style TargetType="ListBoxItem">
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>
            </Style.Resources>
        </Style>
    </ListBox.Resources>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Name}" Width="320" Padding="1,1,1,1" 
                        <TextBlock.ToolTip>
                            <ToolTip Content="{Binding Path=Description}"/>
                        </TextBlock.ToolTip>
                </TextBlock>
                <ComboBox ItemsSource="{Binding SomeOtherCollection}" IsSynchronizedWithCurrentItem="True"
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding CreationInfo}" Width="Auto" Padding="1,1,1,1">
                                <TextBlock.ToolTip>
                                    <ToolTip Content="{Binding Path=Description}"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我还尝试为 添加另一种样式`ComboBoxItem`，但在这种情况下，我不知道如何将颜色重置为默认值。

感谢您的任何建议！

亨德里克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:35:36.367

也许有更好的解决方案。但正如您提到的，您可以恢复默认颜色：

```
<Style TargetType="ComboBoxItem">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="{x:Static SystemColors.HighlightColor}"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="{x:Static SystemColors.HighlightTextColor}"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{x:Static SystemColors.ControlColor}"/>
    </Style.Resources>
</Style> 
```

**评论**

不幸的是，仅将`ListBoxItem`样式应用于此将不起作用，因为您更改了对所有内部控件有效而不是属性的系统画笔。`ListBox``ListBox.ItemContainerStyle``ListBoxItem`

# ios - 试图继承 CCMenuItemImage

> ID：12296659
> 
> 赞同：0
> 
> 时间：2012-09-06T09:09:38.473
> 
> 标签：ios, cocos2d-iphone

我用这个 init 方法子类化 CCMenuItemImage

```
-(id)initWithChildren:(id)targetedApplication {
    if(self = [super initFromNormalImage:@"Answer_Box.png" selectedImage:@"Answer_Box.png" disabledImage:@"Answer_Box.png" target:targetedApplication selector:@selector(answerButtonTapped:)] ) {
            NSLog(@"Yes?");
            return self;
    }
    return self;

}
-(void)answerButtonTapped:(id)stuff {
    NSLog(@"Answer Button Tapped");
} 
```

并且每次在控制台中出现此错误时都会崩溃

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSInvocation invocationWithMethodSignature:]: method signature argument cannot be nil' 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:16:03.747

-answerButtonTapped 是targetedApplication 的一种方法吗？应该是那个。该错误表示目标中没有这样的功能。或者你可以传递“self”而不是“targetApplication”

# java - 如何在 jfreechart 中为 z 值创建描述？

> ID：12296660
> 
> 赞同：1
> 
> 时间：2012-09-06T09:09:37.680
> 
> 标签：java, jfreechart

我承认上面的问题可能很难理解，所以让我们从头开始。
我创建了 3d 框图，值 x,y 用点表示，z 值用颜色表示。
现在，我需要在某处描述颜色代表哪个值，我在 jfreechart 示例之一中看到了类似的东西。所以我知道我可能已经完成了。如果有人做过类似的事情，你能给我提示如何实现吗？它是图表的一部分，还是第二个图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:13:02.987

可以通过将[PaintScale](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/PaintScale.html)实现之一添加到图表来完成类似的操作。

# apache - 如何在apache中将一个url后缀更改为另一个？

> ID：12296661
> 
> 赞同：0
> 
> 时间：2012-09-06T09:09:41.087
> 
> 标签：apache, apache2

我希望我能足够清楚地解释这一点，但如果不让我知道，我会尽力澄清。

我需要将 apache 配置为从一个 url 重定向到另一个，例如 mySite.com/ **maven2**应该重定向到 mySite.com/ **content/maven2**。你知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:31:14.990

看看[Redirect](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirect) Apache 指令。

```
Redirect /maven2 http://example.com/content/maven2 
```

您可以在 .htaccess 或 httpd.conf 中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:16:41.160

在 php 中，你可以这样做：

```
header("LOCATION: mySite.com/content/maven2"); 
```

或者您可以使用元刷新...

# c++ - 难以理解 free() 的行为

> ID：12296663
> 
> 赞同：3
> 
> 时间：2012-09-06T09:09:53.233
> 
> 标签：c++, c, visual-studio-2010, malloc, free

```
int main()
{
    int *ptr, **ptr1;
    ptr = (int*)malloc(sizeof(int));
    ptr1 = (int**)malloc(sizeof(int));
    free(ptr);
    *ptr = 12345;
    ptr1 = &ptr;

    //free(ptr);
    //**ptr1 = 23456;
    printf("%d \n", **ptr1);
    system("pause");
    return 0;
} 
```

当内存已经存在时，如何`*ptr`存储值？所以，现在 应该指向. 为什么会这样？`12345``freed``ptr``garbage`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T09:12:57.117

这段代码在很多层面上都是非常错误的。

1.  [不要](https://stackoverflow.com/a/605858/28169)从`malloc()`C中转换返回值。
2.  您分配了错误的尺寸；`ptr1`需要`sizeof *ptr1`，没有`sizeof (int)`。是指针！
3.  请记住，这`malloc()`可能会失败。使用前检查返回值。
4.  完成后不要（只是**不要**）访问内存`free()`。未定义的行为。

另外，请注意，当您调用它时，*指针本身*`free()`并没有被破坏；消失的是指针所指的内存。因此，如果您愿意，您仍然可以将指针的位值存储在指针本身中。但是，很少有需要这样做的情况，并且在/如果您检查这些位时应小心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T09:13:06.017

指针被释放，但它仍然指向它在分配时所做的任何事情。这样做被认为是严重的编程错误。但是运行时环境（通常）不会帮助识别或纠正此类错误。

不要将枪指向自己并扣动扳机！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T09:10:43.577

That's undefined behavior, anything can happen.

```
free(ptr);
*ptr = 12345; 
```

Is illegal. It can crash or, if you're unlucky, it can appear to work, potentially hiding the problem until the software is shipped to a nuclear power plant. Although, if you're writing code like this, you're probably not working for such companies. :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:36:48.350

您似乎不了解未定义的行为。基本上，行为是未定义的。它可以做任何事情，包括（但不限于）以下内容：

1.  碰撞
2.  做你错误地期望它做的事情
3.  做你告诉它做的事，但不会产生错误
4.  在您的控制台上开始俄罗斯方块游戏
5.  重新格式化你的硬盘

通常（在大多数系统上）访问释放的内存可能看起来好像它已经工作了，同时随机破坏程序的其他部分认为它拥有的数据（取决于释放后是否有分配）。

试图定义未定义的行为会让你一无所获。最好不要一开始就这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T09:20:01.870

free() 释放 *ptr 指向的内存，但不会更改 *ptr 的值，因此如果该值不与其他任何内容冲突，它仍然可以工作，但内存可能由另一个进程随机分配。常见的做法是做free(ptr)；ptr = NULL 以避免在没有另一个 malloc 调用的情况下意外重用内存。

# intellij-idea - 跳转到 Intellij 中的下一个错误文件

> ID：12296664
> 
> 赞同：31
> 
> 时间：2012-09-06T09:09:56.430
> 
> 标签：intellij-idea, keyboard-shortcuts

我正在寻找在 IntelliJ 中的错误之间导航的任何方法。

我知道如何跳入一个文件。而且我找到了一堆宏、编辑器扩展等插件来扩展功能，但在这些情况下似乎没有什么可以帮助我：

我从基类中删除方法。
我点击了重建，太好了，现在 20 个文件出现了预期的错误。

现在我必须手动单击 make info 中的红色错误以打开文件，或单击项目树中的文件（标记为红色）以打开错误文件。一旦进入文件很容易，F2，一些ALT + ENTER，固定。

所以任何方式跳转到下一个错误文件。
或通过键盘在（未打开）文件之间导航的任何方式。例如，在树结构中打开下一个文件等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-09-22T16:05:08.543

对于 IntelliJ 2017.2.2，`F2`默认情况下映射到“下一个突出显示的错误”。确保首先**关注项目编辑器**。同样， `Shift`+`F2`映射到“上一个突出显示的错误”。其他答案中提到的映射不起作用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-17T04:16:32.253

我在 WindowsXP 上，我使用`Ctrl`+ `Alt`+`↓</kbd> to navigate through the messages in the Make window - does this do what you want?`

不过，关于这一点的一件事是，它实际上是在浏览“消息”而不仅仅是错误 - 所以如果你的项目中有很多警告，那可能会妨碍你。我只是注意到有一个“隐藏警告”按钮，所以这可能会有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-30T23:08:33.330

在 Mac 上是：⌥ + ⌘ + ↓（或 ↑ 表示上一个）

（感谢@Shorn 对 Windows 的回答，在文档中找到了这一点。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-07T08:49:24.617

如果切换到项目编辑器 ( `Alt`+ `1`) 然后按下`F2`它会跳转到下一个出现错误的文件。

# codeigniter - 我们如何授予用户在 phpmyadmin(cPanel) 中创建数据库的权限？

> ID：12296665
> 
> 赞同：0
> 
> 时间：2012-09-06T09:09:57.807
> 
> 标签：codeigniter, phpmyadmin, cpanel, mysql-error-1044

我有一个数据库和一个通过 cpanel 创建的用户（我已将该用户添加到该数据库，并且我能够使用该用户及其密码访问该数据库。我已通过 cPanel 授予该用户所有权限（通过单击cpanel 中“当前数据库”表中的用户名并单击所有权限复选框）。

在我的应用程序（使用 PHP-Codeigniter 框架创建）中，我想根据用户的要求在该数据库中创建新的数据库和表。为此，我使用 Codeigniter dbforge 类来创建数据库和其中的表。

```
$this->load->dbforge();
       if ($this->dbforge->create_database($database_name)){

            $config['hostname'] = "localhost";
            $config['username'] = "user_name";
            $config['password'] = "users_password";
            $config['database'] = $database_name;
            $config['dbdriver'] = "mysql";
            $config['dbprefix'] = "";
            $config['pconnect'] = TRUE;
            $config['db_debug'] = TRUE;
            $config['cache_on'] = FALSE;
            $config['cachedir'] = "";
            $config['char_set'] = "utf8";
            $config['dbcollat'] = "utf8_general_ci";
            $config['swap_pre'] = '';
            $config['autoinit'] = TRUE;
            $config['stricton'] = FALSE;

            $db_new=$this->load->database($config,TRUE);

            $this->db=$db_new;
            $this->load->dbforge();
            $fields=array(
               'id'=>array('type'=>'INT','auto_increment'=>TRUE,'constraint'=>'5'),
               'first_name'=>array('type'=>'VARCHAR','constraint'=>'60'),
               'last_name'=>array('type'=>'VARCHAR','constraint'=>'60','null' => TRUE),
              );

            $this->dbforge->add_field($fields);
            $this->dbforge->add_key('id',TRUE);
            $this->dbforge->create_table('clients');

        } 
```

在上面的代码中，我首先创建一个数据库，然后将该数据库加载为当前数据库。此代码在本地主机 WAMP 服务器中完美运行，但是当我将其上传到服务器然后尝试创建数据库时，它会出现以下错误

```
Error No 1044: Access denied for user 'username'@'localhost' to database 'database_name' 
```

导致 thr 错误的代码行是

```
if ($this->dbforge->create_database($database_name)){ 
```

****在上面代码中显示的数据库配置设置中，“用户名”和“密码”作为已经存在的数据库（通过 cPanel 创建）的用户名和密码给出****。是这个问题吗……？** .

我们正在尝试创建新数据库的当前用户拥有所有可用的权限。但在那个 'CREATE DATABASE' 特权不存在。

对于数据库命名，我在数据库名称中使用了“ *prefix_* ”（CPanel 数据库命名格式）

如何使用 dbforge 类创建数据库并使用现有用户访问该数据库...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:43:41.030

先尝试创建超级用户

```
mysql > GRANT ALL PRIVILEGES on databasename.* TO "username"@"localhost" IDENTIFIED BY "password"; 
```

# git - SSH登录：A可以登录B，但是B登录A需要密码？

> ID：12296676
> 
> 赞同：1
> 
> 时间：2012-09-06T09:10:21.040
> 
> 标签：git, ssh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:50:27.767

```
debug3: send_pubkey_test 
debug2: we sent a publickey packet, wait for reply 
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /home/git/.ssh/id_dsa 
debug3: no such identity: /home/git/.ssh/id_dsa 
```

**没有这样的身份 - 就是这样**

[http://inderpreetsingh.com/2011/08/04/ssh-privatepublic-key-auth-not-working/](http://inderpreetsingh.com/2011/08/04/ssh-privatepublic-key-auth-not-working/)

[http://www.cyberciti.biz/faq/ssh-password-less-login-with-dsa-publickey-authentication/](http://www.cyberciti.biz/faq/ssh-password-less-login-with-dsa-publickey-authentication/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T11:43:04.030

在一个终端中，在 A 上，在更高端口上以调试模式启动 sshd 服务器：

```
/usr/sbin/sshd -d -e -p1234 
```

然后，在另一个终端，从 B，连接到

```
ssh -p 1234 192.168.16.14 
```

sshd 的日志将打印在屏幕上，您很可能会看到它不起作用的原因。

# java - 数据类型的 Junit 测试

> ID：12296680
> 
> 赞同：1
> 
> 时间：2012-09-06T09:10:41.470
> 
> 标签：java, unit-testing, junit

我在学校，即将学习如何使用 Junit 测试。

我的问题是：

如果我有一个方法并且我想知道这个方法是否返回一个整数或不将如何做到这一点？是否有允许我检查输出数据类型的断言？

希望有人能够帮助我

最好的祝福

马克·拉斯穆森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:12:12.393

数据类型由编译器*静态*声明和断言，例如

```
public int getValue() { ... } 
```

将始终返回一个 int。尝试以其他方式执行将导致编译错误。因此，我不希望您使用 JUnit 之类的框架，因为它会测试运行代码的输出。

可以想象，您可能会返回一个可能是整数的对象（除其他外），例如

```
public Object getValue() {
   // could be a Long instead...
   return new Integer(3);
} 
```

您*可以*使用`assertTrue()`/进行检查`instanceof`。但是，以上不是很好的编程实践！如果您要返回一个类型，您应该能够在不知道特定子类的情况下多态地对其进行操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T09:16:39.120

您可以使用以下命令检查任何内容：

```
assertTrue(boolean condition) 
```

在一个方法返回一个对象的情况下，你需要检查它的类型，你可以使用类似的东西：

```
asserttrue(o is int); 
```

# android - android webview contents not selectable

> ID：12296683
> 
> 赞同：5
> 
> 时间：2012-09-06T09:10:46.233
> 
> 标签：android, webview, android-webview, selectable

I have a webView. WebView shows html with text, images, buttons etc.
I want to make few things.

1) That user can not select text in webView

2) The same behavior of click and long click by button.

I made next things for resolve my problems: First of all, I added to html page style:

```
body {
     ...
     -webkit-user-select: none;
     -webkit-touch-callout: none;
     ...
} 
```

But it didn't help me. This solution didn't work on all androids.
So I tried to add touch listener to webView.

Code of listener:

```
webView.setOnTouchListener(new OnTouchListener() {

    private float prevX;
    private float prevY;

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        boolean handled = true;
        if (MotionEvent.ACTION_DOWN == event.getAction()) {
            prevX = event.getX();
            prevY = event.getY();
        } else if (MotionEvent.ACTION_UP == event.getAction()) {
            if (Math.abs(event.getX() - prevX) < 50
                    && Math.abs(event.getY() - prevY) < 50) {
                handled = (event.getEventTime() - event
                        .getDownTime()) > 200;
            }
        }

        Log.d("-------------------------------------------------", ""+handled);

        return handled;
    }

}); 
```

But this didn't work either, may be I made something wrong? After that I tried to add long click listener:

```
webView.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        v.performClick();
        return true;
    }
}); 
```

This solution solves only the first problem.

So, where did I go wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T06:12:41.050

尝试使用 `addJavascriptInterface();`WebView。创建一个Activity的内部类。该类是 android 和 Your Jscript 之间的接口。为此，您必须使用 Jscript。

# sql-server-2008 - TimeSpan calculation based on login status in T-SQL

> ID：12296688
> 
> 赞同：0
> 
> 时间：2012-09-06T09:11:04.643
> 
> 标签：sql-server-2008, tsql

I have a temporary table whose structure is a below.

```
create table #temptime
(
   logtime datetime,
   [status] varchar(3)
) 
```

As you can see from above , I have logintime and status. I need to partition this table based on status , ordered by date. I will need to calculate time span between these two created partition and consolidate to find how long user is in the premise.

For example let's say we have 4 records

```
Partition based on status IN        Partition based in status OUT

8:45 AM                                 10:45 AM
11:00 AM                                15:00 PM 
```

Now program should find time span

```
10:45 AM - 8:45 AM = 2 Hours + 11:00 Am - 15:00 PM = 4 Hours 
```

Whats the best way to accomplish this task?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:28:54.417

尝试这个：

```
;with cte_IN as (select logtime,ROW_NUMBER() 
                       over (partition by [status] order by logtime) row_num
from #temptime
where [status]='IN'),
cte_OUT as (select logtime,ROW_NUMBER() 
                        over (partition by [status] order by logtime) row_num
from #temptime
where [status]='OUT')
select i.logtime,O.logtime,DATEDIFF(MI,i.logtime,O.logtime)/60.0 as 'hours'
from cte_IN I
join cte_OUT O
on I.row_num=O.row_num 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/875fe/2)

# backbone.js - Backbone.js 如何将 el 设置为特定的 div id

> ID：12296690
> 
> 赞同：3
> 
> 时间：2012-09-06T09:11:08.697
> 
> 标签：backbone.js

我对 Backbone View 的理解是，每个需要展示模型数据的 html 元素本身都可以是一个 View。

我希望创建链接到特定 div 的视图以显示模型数据。我的问题是，如果我对 el 使用除“body”之外的任何其他内容，则代码将不起作用。

以下代码不起作用：

[http://jsfiddle.net/GhaPF/9/](http://jsfiddle.net/GhaPF/9/)

```
$(document).ready(function() {

var ToDo = Backbone.Model.extend({
    defaults: { "date": "today",
                "task": ""
            },
    initialize: function() {}
});

var ToDoList = Backbone.Collection.extend({
    model: ToDo
});

var ToDoListView = Backbone.View.extend({
    el: "#view1",
    initialize: function(myTodoList) {
        this.todolist = myTodoList;
        this.todolist.bind('add', this.render, this);
    },
    render: function() {
        text = this.todolist.toJSON();
        string = JSON.stringify(text);
        $(this.el).append(string);
        return this;
    },
    events: {
        "keypress #new-todo":  "createOnEnter"
    },
    createOnEnter: function(e) {
      if (e.keyCode != 13) return;
      if (!$("#new-todo").val()) return;
      this.todolist.add({"task": $("#new-todo").val()});
      $("#new-todo").val('');
    }
});

$("#new-todo").focus();
var todolist = new ToDoList();
var myToDoListView = new ToDoListView(todolist); 
```

}); ​</p>

但是，如果我将 'body' 用于 el，它会按我的意愿工作。

如何将 el 设置为特定的 div ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T11:04:55.467

解决方案 [http://jsfiddle.net/r3F8q/](http://jsfiddle.net/r3F8q/)

你也可以`this.setElement('#body1')`在渲染中使用

```
<div id="view-container">
    <input id="new-todo" placeholder="text">
    <div id="view1"></div>
    <div id="view2"></div>
</div> 
```

​</p>

```
$(document).ready(function() {

var ToDo = Backbone.Model.extend({
    defaults: { "date": "today",
                "task": ""
            },
    initialize: function() {}
});

var ToDoList = Backbone.Collection.extend({
    model: ToDo
});

var ToDoListView = Backbone.View.extend({
    el: "#view-container",
    initialize: function(myTodoList) {
        this.todolist = myTodoList;
        this.todolist.bind('add', this.render, this);
    },
    render: function() {
        text = this.todolist.toJSON();
        string = JSON.stringify(text);
        this.$el.find('#view1').append(string);
        return this;
    },
    events: {
        "keypress #new-todo":  "createOnEnter"
    },
    createOnEnter: function(e) {
      if (e.keyCode != 13) return;
      if (!$("#new-todo").val()) return;
      this.todolist.add({"task": $("#new-todo").val()});
      $("#new-todo").val('');
    }
});

$("#new-todo").focus();
var todolist = new ToDoList();
var myToDoListView = new ToDoListView(todolist);
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:02:33.747

当您使用“#view1”时

```
"keypress #new-todo":  "createOnEnter" 
```

未绑定，因为#new-todo 不在“#view1”中。检查[API](http://backbonejs.org/#View-delegateEvents)。

# ruby-on-rails - make the comment(in the rails guide exmple) editable

> ID：12296691
> 
> 赞同：0
> 
> 时间：2012-09-06T09:11:10.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

I am learning rails by following the rails 3 guide.

The blog application have ran now,however I want to make the comment editable,and make the update ,create form both in the post show page. so I make the following modifiation:

post.show.htm.erb:

```
<h2>Comments</h2>
<% @post.comments.each do |comment| %>
  <tr>
    <td><%= comment.commenter %></td>
    <td><%= comment.body %></td>
    <td><%= link_to 'Edit', edit_post_comment_path(@post,comment) %></td>
    <td><%= link_to 'Destroy', post_comment_path(@post,comment), confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<h2>Add a comment:</h2>

#here,I can not set the form_for property.
<%= form_for([@post,@comment],:url=>post_comment_path) do |f| %>
  <div class="field">
    <%= f.label :commenter %><br />
    <%= f.text_field :commenter %>
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

The controller controller:

```
class CommentsController < ApplicationController
  # GET /posts/1/comments/1/edit
  def edit
    #render json: params
    @post=Post.find(params[:post_id])
    @comments=Comment.all
    @comment = Comment.find(params[:id])
    render "/posts/show"
  end

  #other action omitted

  def show
    # I donot know what to do here
  end
end 
```

However I can not access the link:

```
http://localhost:3000/posts/1 
```

I get the error:

```
No route matches {:action=>"show", :controller=>"comments"} 
```

In fact,as you can see I have the show action in CommentController.

And,I wonder why it will access the comments#show action?

This is my routes:

```
 post_comments GET    /posts/:post_id/comments(.:format)          comments#index
                  POST   /posts/:post_id/comments(.:format)          comments#create
 new_post_comment GET    /posts/:post_id/comments/new(.:format)      comments#new
edit_post_comment GET    /posts/:post_id/comments/:id/edit(.:format) comments#edit
     post_comment GET    /posts/:post_id/comments/:id(.:format)      comments#show
                  PUT    /posts/:post_id/comments/:id(.:format)      comments#update
                  DELETE /posts/:post_id/comments/:id(.:format)      comments#destroy
            posts GET    /posts(.:format)                            posts#index
                  POST   /posts(.:format)                            posts#create
         new_post GET    /posts/new(.:format)                        posts#new
        edit_post GET    /posts/:id/edit(.:format)                   posts#edit
             post GET    /posts/:id(.:format)                        posts#show
                  PUT    /posts/:id(.:format)                        posts#update
                  DELETE /posts/:id(.:format)                        posts#destroy
       home_index GET    /home/index(.:format)                       home#index
             root        /                                           home#index 
```

The `/posts/:id` will trigger `posts#show`. why `comments#show`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:31:04.757

如果您需要编辑帖子，请添加

```
def edit
  @post = Post.find(params[:id])
end

def update
  @post = Post.find(params[:id])
  if @post.update_attributes(params[:post])
    redirect_to some_path and return
  end
  render 'edit' #error
end 
```

编辑表单应向服务器发送 PUT 请求。rails 使用路由文件将 url 和请求（如 GET/POST/PUT/DELETE）映射到控制器操作。

这里

```
PUT    /posts/:id(.:format)                        posts#update 
```

请求是 PUT，控制器是 PostsController，动作是更新。

还，

```
post GET    /posts/:id(.:format)                        posts#show 
```

如果它的 POST/PUT/DELETE，你需要从表单传递 http 请求。你可以这样做'编辑'

```
<%= form_for([@post,@comment],:url=>post_comment_path, :method => :put) do |f| %> 
```

映射到 PostsController 的显示请求。格式默认为 html。有关更多信息，请详细查看服务器日志。

# haskell - (++) 的性能与惰性求值

> ID：12296694
> 
> 赞同：16
> 
> 时间：2012-09-06T09:11:23.207
> 
> 标签：haskell, concatenation, lazy-evaluation

我一直在想这个很多，我还没有找到令人满意的答案。

为什么`(++)`“贵”？在惰性求值下，我们不会求值这样的表达式

```
xs ++ ys 
```

在必要之前，即使那样，我们也只会在需要*时*评估我们需要的部分。

有人可以解释我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T09:40:48.600

如果您访问整个结果列表，惰性求值将不会保存任何计算。它只会延迟它，直到您需要每个特定元素，但最后，您必须计算相同的东西。

如果您遍历连接列表`xs ++ ys`，访问第一部分 ( `xs`) 的每个元素会增加一些恒定开销，检查是否`xs`已花费。

`++`因此，如果您关联到左侧或右侧，则会产生很大的不同。

*   如果您将长度列表与左侧相关联，`n`那么`k`访问**每个**`(..(xs1 ++ xs2) ... ) ++ xsn`第一个`k`元素将花费`O(n)`时间，访问每个下一个元素将`k`花费`O(n-1)`等等。因此遍历整个列表将花费`O(k n^2)`. 你可以检查一下

    ```
    sum $ foldl (++) [] (replicate 100000 [1]) 
    ```

    需要*很*长时间。

*   如果您`n`将长度列表`k`与**右侧**相关联，那么您`xs1 ++ ( ..(xsn_1 ++ xsn) .. )`将只获得每个元素的恒定开销，因此遍历整个列表将只是`O(k n)`. 你可以检查一下

    ```
    sum $ foldr (++) [] (replicate 100000 [1]) 
    ```

    是很合理的。

* * *

**编辑：**这只是隐藏在背后的魔法`ShowS`。如果您将每个字符串转换`xs`为 `showString xs :: String -> String`(`showString`只是 的别名`(++)`) 并组合这些函数，那么无论您如何关联它们的组合，最后它们都会从右到左应用——这正是我们获得线性时间复杂度所需要的。（这仅仅是因为`(f . g) x`is `f (g x)`。）

您可以检查两者

```
length $ (foldl (.) id (replicate 1000000 (showString "x"))) "" 
```

和

```
length $ (foldr (.) id (replicate 1000000 (showString "x"))) "" 
```

在合理的时间内运行（`foldr`更快一点，因为从右侧组合函数时开销较小，但两者在元素数量上都是线性的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T09:49:08.900

它本身并不太贵，当你开始*从左到右*`++`组合很多时就会出现问题：这样的链被评估为

 *```
 ( ([1,2] ++ [3,4]) ++ [5,6] ) ++ [7,8]
≡ let a = ([1,2] ++ [3,4]) ++ [5,6]
        ≡ let b = [1,2] ++ [3,4]
                ≡ let c = [1,2]
                  in  head c : tail c ++ [3,4]
                    ≡ 1 : [2] ++ [3,4]
                    ≡ 1 : 2 : [] ++ [3,4]
                    ≡ 1 : 2 : [3,4]
                    ≡ [1,2,3,4]
          in  head b : tail b ++ [5,6]
            ≡ 1 : [2,3,4] ++ [5,6]
            ≡ 1:2 : [3,4] ++ [5,6]
            ≡ 1:2:3 : [4] ++ [5,6]
            ≡ 1:2:3:4 : [] ++ [5,6]
            ≡ 1:2:3:4:[5,6]
            ≡ [1,2,3,4,5,6]
  in head a : tail a ++ [7,8]
   ≡ 1 : [2,3,4,5,6] ++ [7,8]
   ≡ 1:2 : [3,4,5,6] ++ [7,8]
   ≡ 1:2:3 : [4,5,6] ++ [7,8]
   ≡ 1:2:3:4 : [5,6] ++ [7,8]
   ≡ 1:2:3:4:5 : [6] ++ [7,8]
   ≡ 1:2:3:4:5:6 : [] ++ [7,8]
   ≡ 1:2:3:4:5:6 : [7,8]
   ≡ [1,2,3,4,5,6,7,8] 
```

您可以清楚地看到二次复杂度。即使您只想评估第*n*个元素，您仍然必须挖掘*所有*这些`let`s。这就是为什么`++`is `infixr`, for`[1,2] ++ ( [3,4] ++ ([5,6] ++ [7,8]) )`实际上效率更高。但是如果你在设计一个简单的序列化器时不小心，你可能很容易得到一个像上面这样的链。这是初学者被警告的主要原因`++`。

除此之外，`Prelude.++`与例如操作相比它很慢，`Bytestring`原因很简单，它通过遍历链表来工作，链表总是有次优的缓存使用等，但这不是问题；这会阻止您获得类似 C 的性能，但仅使用普通列表`++`就可以正确编写程序，并且仍然可以轻松地与用 Python 编写的类似程序相媲美。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T10:00:54.750

我想在 Petr 的回答中添加一两件事。

正如他所指出的，在开头重复附加列表非常便宜，而附加到底部则不然。只要您使用haskell 的列表，这是正确的。但是，在某些情况下您必须附加到末尾（例如，您正在构建要打印的字符串）。使用常规列表，您必须处理他的回答中提到的二次复杂性，但在这些情况下有一种更好的解决方案：[差异列表](http://book.realworldhaskell.org/read/data-structures.html#data.dlist)（另请参阅[我](https://stackoverflow.com/questions/11329660/efficient-list-append-prepend-through-function-composition)关于该主题的问题）。

长话短说，通过将列表描述为函数的组合而不是较短列表的串联，您可以在恒定时间内通过组合函数在差异列表的开头或结尾附加列表或单个元素。完成后，您可以在线性时间内（以元素数量）提取常规列表。*

# flash - OpenLaszlo 的双运行时方法（HTML5 和 Flash/SWF）是否仍然有效？

> ID：12296700
> 
> 赞同：7
> 
> 时间：2012-09-06T09:11:56.257
> 
> 标签：flash, html, runtime, openlaszlo, lzx

OpenLaszlo 是 - 据我所知 - 唯一具有以下功能的富 Internet 应用程序平台：

*   基于声明性 XML 的用户界面语言（类似于 Mozilla 的 XUL）称为 LZX。
*   将 LZX 交叉编译为 JavaScript 或 ActionScript 3（因此支持两个运行时）。
*   能够仅使用 XML 和 JavaScript 或 JavaScript 开发组件；所有组件都由 OpenLaszlo 呈现，因此它们在浏览器和设备上看起来都是一样的。
*   查看跨运行时工作的系统、键盘和鼠标管理。
*   组件可以用 LZX (XML + JavaScript) 编写，也可以仅用 JavaScript 编写
*   XML 数据集支持基于 XPath 的组件到数据集元素的映射。
*   支持多种预定义布局的布局引擎；开发人员可以轻松实现自定义布局。
*   在 XML 属性中使用简单语法对约束的强大支持：$once{JavaScript 表达式} 或 $always{JavaScript 表达式}。
*   内置调试器（开发人员控制台）在两个运行时中工作。

我还没有见过任何更现代的 JavaScript 框架，它可以像 OpenLaszlo 一样简单地创建 HTML5 应用程序 - 唯一的缺点是当前随 OpenLaszlo 提供的组件集看起来有点像 90 年代的 Mac OS。

但是，将应用程序部署为 HTML5/JavaScript 应用程序和 Adob​​e Flash 应用程序（可以选择创建基于 Adob​​e AIR 的移动应用程序，尽管该功能并未直接内置到 OpenLaszlo 服务器中）的方法的有效性如何？我听说 Adob​​e 试图用 FalconJS 编译器原型做类似的事情（有关更多信息，请参阅此[Adob​​e 视频 Open Discussion about Falcon and FalconJS](http://tv.adobe.com/watch/flex-community-summit-december-2011/open-discussion-about-falcon-and-falconjs/)），但他们停止了努力。FalconJS 概念验证的代码将作为 Apache Flex 项目的一部分贡献给 Apache 基金会，但是

令人惊讶的是，在 OpenLaszlo 展示部分中没有一个应用程序同时使用这两种运行时：[http ://www.openlaszlo.org/showcase](http://www.openlaszlo.org/showcase)

在[一篇 2007 年的旧 Ajaxian 文章中，](http://ajaxian.com/archives/laszlo-webtop)我读到 Laszlo Webtop 的“最终版本将支持 OpenLaszlo 4，这意味着同时支持 Ajax 和 Flash 应用程序”。但是 Laszlo Webtop 演示站点[http://gowebtop.com/webtop/](http://gowebtop.com/webtop/)只有基于 Flash 的 Webtop 版本。我在[Stackoverflow 讨论](https://stackoverflow.com/questions/12089808/which-openlaszlo-version-should-i-use-for-new-projects-and-when-migrating-applic)中[读到 Gliffy](http://www.gliffy.com) - 我所知道的最令人印象深刻的 OpenLaszlo 应用程序之一 - 已使用 JavaScript 重新构建，而不是利用 OpenLaszlo 的双运行时功能。

是否有任何其他同时部署为 HTML5/DHTML 和 Flash 的大型 OpenLaszlo 应用程序，这些应用程序可能未在 OpenLaszlo.org 网站上列出？即使 Flash 不再那么流行，它仍然是许多用例（音频会议、浏览器中的 3d、GPU 加速视频播放等）的相关技术。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T20:45:06.700

我在 2004 年开始使用 OpenLaszlo，当时我认为没有更好的免费开源 RIA 工具可以满足我的需求。

我的应用程序目前利用 SWF 和 JavaScript 运行时。因此，仅仅因为它们不在现已死去的 Laszlo 展示中并不意味着没有大型应用程序利用这两种运行时。我已经在我的应用程序上工作了 7 年。相比之下，Gliffy 是一个修补玩具，恕我直言……我还没有找到任何比我的更复杂的 OL 应用程序。并不意味着他们不在那里，但如果他们在，我还没有看到他们。

我的应用程序仅使用一个或另一个运行时是不可行的。所以对我来说，拥有两个运行时是必不可少的。HTML5 对于某些事情来说太慢了，而 SWF10 提供了最一致的跨浏览器体验。

Haxe 不是 OL 替代品，这是肯定的。对我来说，OL 的价值在于从约束、基于实例的编程以及将数据绑定到视图的简易性中获得的生产力提升。我无法使用任何其他工具自行构建我的产品。我看着远方。随着 OL 的衰落，现在几乎死了，我也在继续寻找。OL 的 HTML5 运行时在最新的 IE 版本中无法运行，这很糟糕……但可以通过 IE7 仿真模式或 Chrome 框架插件运行（由于 IE 糟糕的 JavaScript 引擎，这实际上是必不可少的）。

您是否需要这两个运行时取决于您的项目。虽然编译器制造商认为能够同时发出 SWF 和 HTML5 运行时是可取的可能没有意义，但由于 OL 多年来一直能够做到这一点，现在有一些像我这样的系统正在利用这一点能力。

例如，我的系统被用于不允许 Flash 插件的军事机密网络……所以对于那些安装，我必须依赖 HTML5。当不在机密网络上运行时，我的系统会在有利的情况下利用 SWF 运行时的运行时性能和其他功能。混合方法对我来说至关重要。如果我有一个仅限 SWF 的应用程序，则不允许在机密网络上使用它，但如果它是仅限 HTML5 的应用程序部分，由于浏览器的限制，它的表现将不那么出色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:47:11.747

我将首先警告这一点，这不会是一个完整的答案。但是，希望其中一些信息对您有用。

我最近查看了 OpenLaszlo 与 Stackoverflow 上的另一个问题有关，在我看来，它具有一个垂死项目的所有特征（审查时，Raju 在评论中提供了证据）[。](http://mail-archives.apache.org/mod_mbox/incubator-openmeetings-dev/201208.mbox/%3CCACeMiA8veBa5_aY4VQBLRZmbu6CsU9s_qDKGh7ecwruvgMRu1A@mail.gmail.com%3E)

关于 Gliffy，[这篇文章](http://blogs.atlassian.com/2012/04/how-gliffy-is-managing-the-risk-of-re-writing-their-product-in-html5/)提供了一些关于他们放弃 OpenLaszlo 的理由的见解。他们特别提到了编译时间的问题以及这对他们的开发时间的影响。

它绝对不会勾选你所有的框（具体来说，我不相信有对基于 XML 的声明性 UI 语言的支持），但[Haxe](http://haxe.org/) / [NME](http://www.haxenme.org/)似乎满足了你能够编译为 Flash 和 HTML5 的核心要求.

公平披露，我实际上并没有使用它，但我一直听到关于它的好消息（我刚刚参加了一个创意发展会议，在那里我听到至少有 2 位演讲者对此赞不绝口）。它本质上是 ActionScript 3.0 减去主要的烦恼和主要的遗漏（例如抽象类）。因此，如果您已经了解 ActionScript 3.0，那么它应该很容易上手，并且使用任何一种方式都可以带来愉快的体验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T23:11:57.370

即使在 2012 年，Web 开发人员仍然面临[Laszlo在公司最初创建](http://www.laszlosystems.com)[OpenLaszlo](http://www.openlaszlo.org)时试图解决的问题。10 年前，Flash 是唯一的跨浏览器技术，可为 97% 的安装了插件的桌面浏览器提供像素完美的渲染。
JavaScript 引擎、HTML 和 CSS 现在可以提供更多功能：音频和视频播放、嵌入字体、基于 CSS 的动画、硬件加速的内容渲染、绘图 API、最近在某些浏览器（Chrome、Firefox 和 Opera）中的视频会议支持基于WebRTC）。现代浏览器提供几乎与 Flash 相同的功能，但仍有一定比例的用户使用比 IE9 更早版本的 Internet Explorer 浏览网页。
面向消费者或商业应用的要求仍然不同：许多企业

**跨浏览器应用程序开发**
如果您了解浏览器之间的 API 和差异，您可以轻松实现基于开放标准的 Flash 的 80-90%。但是您仍然依赖于开发人员的专业知识，使用 Flash，您有一个 ActionScript API，您可以在所有浏览器中使用它（至少对于 Windows 和 OS X，Linux 有一些限制并且没有得到很好的支持）。

**LZX 语言与纯 JavaScript**
LZX 仍然是一种出色的语言，可以使用已建立的开发方法构建出色的 UI。LZX 已经发展了很多：CSS 支持、mixins、支持用 JavaScript 而非 XML 编码类、将 ActionScript 3 代码嵌入到语言中是一些新功能。
6 年前 - 在 LZX 创建很久之后 - 许多开发人员不知道如何编写好的 JavaScript 代码。基于原型的开发模型没有很好的文档记录，开发人员倾向于使用 Java/OOP 之类的 JavaScript - 导致代码很糟糕。甚至在 2012 年，市场上有许多关于 JavaScript 的好书和数百万兴奋的 JavaScript 开发人员，使用纯 JavaScript 构建复杂的接口并不是一件容易的事。[像CoffeeScript](http://coffeescript.org/)这样的交叉编译到 JavaScript 的语言的流行是有原因的。
大量使用 OpenLaszlo 的 LZX 语言并转而使用 jQuery 或 Prototype 等 JavaScript 框架的开发人员抱怨需要多少代码才能使用数据集、数据绑定、复制和复制几行 LZX 代码来完成。布局系统。许多转向 HTML5/JavaScript 开发的 Flex 开发人员抱怨同样的事情。因此，拥有 LZX 的强大功能并能够交叉编译为 SWF 和 JavaScript 仍然是非常有价值的东西。

**OpenLaszlo 和[Adob​​e AIR SDK](http://vimeo.com/14014507)**
使用基于 ActionScript 3 的 SWF10/11 运行时，任何 OpenLaszlo 应用程序都可以轻松地编译成 Adob​​e AIR for Android 或 iOS 应用程序。查看我在 2010 年创建的此视频，其中显示了[将 OpenLaszlo 应用程序编译为 AIR for Android 应用程序的 Apache Ant 脚本](http://vimeo.com/14014507)并将应用程序部署到手机。该工作流程适用于 OpenLaszlo 5.0 的最新（未发布）版本。缺少的是，目前没有针对 OpenLaszlo 的移动和触控优化的组件集。但是，如果活跃的社区成员愿意为这样的项目做出贡献，那么创建这样的组件集不会有太多的工作。这意味着，您可以使用 LZX 在现代智能手机和平板电脑上开发性能良好的移动应用程序，而无需学习用于 Android 开发的 Objective C 或 Java。[Haxe](http://haxe.org/)是另一个开源项目，它大量使用交叉编译来针对更多的运行时：JavaScript、Flash、NekoVM、PHP、C++、C# 和 Java。

**双重运行时和交叉编译以获得更好的用户体验**
在过去几年中，有许多技术使移动应用程序开发人员能够以一种语言编写应用程序，并在其他移动平台上交叉编译代码。您可以对 OpenLaszlo 执行相同的操作，并且由于模块化架构（用 LZX 编写的组件、用 LaszloScript/JavaScript 编写的 LFC、用运行时特定语言编写的内核，例如 ActionScript3），您可以轻松添加其他运行时。但在我看来，使用 LZX 之类的语言并交叉编译为 JavaScript、ActionScript 3 或其他语言或 VM 有一个更重要的原因。它与创建令人惊叹的视觉效果和独特的用户体验的能力有关，这是由 LZX 实现的，而纯 JavaScript 开发很难实现。
Laszlo Systems 和 David Temkin（Laszlo 的前首席执行官兼首席技术官）建立了[电影用户体验](http://www.ultrasaurus.com/sarahblog/2008/03/origins-of-the-cinematic-user-experience/)一词：

> 电影般的用户体验首先传达了你不仅仅是在看你在互动——它的“用户体验”部分。我们认为电影是一个有趣的术语，它带有非技术性的旋转。当非技术人员看到它时，他们立即明白这是一个完全不同类型的产品类别，但业内人士会看到它并说屏幕上的东西正在移动，也许你有不同的技术架构......</ p>

OpenLaszlo 和 LZX 的目标之一是通过为 UI 工程师提供 API 和编程语言 (LZX) 中的工具来准确再现 UX 设计师使用 Flash 创作等工具创建的体验，从而实现这种电影用户体验的创建工具。

[这是一本关于 iOS 应用程序开发的书](http://www.scribd.com/doc/89801852/17/Creating-a-Cinematic-User-Experience)的引述，表明其他公司看到了这种方法的价值：

> Apple 工程师在谈论漂亮的用户界面时喜欢谈论的概念之一是“电影用户体验”的概念。电影用户体验本质上是一个看起来像好莱坞电影的用户界面。它看起来充满未来感且流畅，它使用动画来增强使用物理对象的感觉。
> Apple 用户界面设计师专门为您提供了一组工具，使您能够构建这些类型的电影用户界面。Core Animation 之类的工具使您能够构建用户界面，这些用户界面涉及从屏幕外滑入而不仅仅是出现的元素，以及以几乎物理重量滚动的元素

LZX 和交叉编译器为我们提供了创建这种特殊用户体验的工具。你可以用 JavaScript 做同样的事情，但它会更多的代码，而且可能更难。一个很好的例子是在 DHTML 中运行的第一个 OpenLaszlo 应用程序，[LzPix 演示](http://www.openlaszlo.org/lps_demos/demos/lzpix/app.lzx?lzr=dhtml)：[创建于 2006 年](http://weblog.openlaszlo.org/archives/2006/03/openlaszlo-goes-dhtml/)，它仍然是一个令人惊叹的 UI - 我还没有看到使用 JavaScript 框架构建的任何类似的东西。

**双运行时仍然有效**
是的，双运行时方法仍然有效。展示中应该有更多使用 DHTML 运行时的应用程序，我不知道为什么不是这样。OpenLaszlo 没有针对 iPad 或平板电脑进行优化这一事实绝对是一个劣势，但 DHTML 运行时可以针对 iOS 和 Android 进行优化。如果桌面浏览器的怪癖被删除，将创建一个针对移动浏览器优化的新组件集（使用 HTML 画布和 CSS2/3 呈现组件），您将拥有适用于 OpenLaszlo 的可靠移动运行时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T00:32:37.553

我们在 2006 年选择了 OpenLaszlo 来实现我们的在线视频编辑应用程序 (http://www.sarolta.tv/web/sarolta-tools/template-editor.html)，这是在两次尝试使用不同平台创建它之后。

第一次失败的尝试是使用 DHTML，但是在纯 JavaScript+HTML 中执行此操作的复杂性以及使代码在不同浏览器中工作方式不同的浏览器怪癖阻止了该尝试的成功完成。

第二次尝试是使用纯 Adob​​e Flash，但 Flash 面向时间线的特性对开发人员来说是一个陌生的概念，这使得他们很难创造出想要的东西。

最后，选择了 OpenLaszlo，它是 XML 和 JavaScript 的直观组合，任何对 OO 编程和 Web 设计有一点经验的人都可以轻松上手，在 Flash 中构建复杂的应用程序。那时 OpenLaszlo 只支持 Flash，但每个操作系统上的每个浏览器都支持 Flash。我们喜欢 Flash 是跨平台的，因为代码在每个浏览器中都以相同的方式运行，而基于 JavaScript 的 DHTML 应用程序并非如此。当时 97% 以上的系统都支持 Flash，因此用户也无需安装任何软件，我们的应用程序就可以在他们的系统上运行。

作为一家员工数量有限的初创公司，构建和维护用于不同浏览器和操作系统的应用程序的多个版本的资源并不存在，OpenLaszlo 在当时解决了这个问题。

当 OpenLaszlo 添加 DHTML 运行时以及听说 IBM 正在为 OpenLaszlo 开发（现已放弃的）Java 运行时时，我们很高兴，因为这意味着我们的代码将与新兴的移动市场和其他设备兼容。不幸的是，自 2010 年 10 月以来，在 Laszlo 系统上工作的任何官方 OpenLaszlo 开发人员都没有做太多的工作，因此 DHTML/HTML5 运行时从那时起没有任何改进。

我确实认为，即使在今天，一次写入随处运行的方法仍然非常受欢迎。被迫处理使您的应用程序在不同系统上以不同方式工作的浏览器和操作系统怪癖是一件令人讨厌的事情，并且需要大量的维护时间。我认为 JQuery 尤其是 JQuery mobile 在今天如此受欢迎的原因是因为它被设计为跨平台的，它可以为您无形地处理浏览器/操作系统的怪癖，因此您不必担心它。JQuery mobile 支持几乎所有平台：

[http://jquerymobile.com/gbs/](http://jquerymobile.com/gbs/)

所以，我认为，OpenLaszlo 的双运行时仍然有效，但也许问题是 OpenLaszlo 在近两年没有任何正式发布的情况下是否仍然有效，而其他 JavaScript 框架正在不断改进和发展以取代对它的需求。

# git - git log 命令在 chroot 中不打印任何内容

> ID：12296701
> 
> 赞同：2
> 
> 时间：2012-09-06T09:12:00.630
> 
> 标签：git, debian, chroot, jail

我使用脚本 make_chroot_jail.sh 制作了 chroot 监狱，然后通过复制 /usr/bin/git*、这些二进制文件需要的所有库和 /usr/share/git-core 添加了 git，现在我可以初始化、克隆提交、推送等在监狱里，但是当我输入 git log 时它什么也没打印（有人可以帮我或说在哪里寻找吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:07:25.747

在构建 chroot 时，尝试运行命令`strace -f`并查找异常失败的系统调用、丢失的文件等`strace -f <command> 2>&1 |grep ...`是你的朋友。

不用说，用复杂的软件构建 chroot 不适合胆小的人……

# javascript - 遍历给定类中的所有类

> ID：12296703
> 
> 赞同：1
> 
> 时间：2012-09-06T09:12:10.093
> 
> 标签：javascript, jquery, each

```
<div class="contain_questions">
    <div class="question">
        <div class="question_text">First question</div>
        <div class="question_mandatory">1</div>

        <div class="options">
            <div class="option"><div class="option_name">a</div><div class="option_value">1</div></div>
            <div class="option"><div class="option_name">b</div><div class="option_value">2</div></div>
            <div class="option"><div class="option_name">c</div><div class="option_value">3</div></div>
        </div>

        <a href="" class="add_another_option">add_another_option</a>
    </div>

    .
    . // many more div.question ...
    .

    <input type="button" value="submit_questions" />
</div> 
```

您如何为每个问题的外部 .each() 中的每个 div.option 使用 .each() ？我的外部 .each() 工作正常，它遍历所有 div.question 并将 question_text 等推送到一个数组中，但是我似乎无法针对每个问题中的选项容器，以便同时推送每个问题的所有选项问题进入数组。

此外，是否可以使用 .each() 函数定位 DOM 的子集，或者是否有其他方法可以遍历给定类中的所有类？

多谢你们..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:14:18.790

就这么简单：

```
$(".question").each(function() {
    ...
    $(this).find(".option").each(function() {
        ...
    });
}); 
```

因此，您的代码可能如下所示：

```
var questions = [];
$(".question").each(function() {
    var obj = {
        name : $(this).find(".question_text").text(),
        options : []
    };

    $(this).find(".option").each(function() {
        obj.options.push({
            name : $(this).find(".option_name").text(),
            value : $(this).find(".option_value").text()
        });
    });

    questions.push(obj);
});

console.log(questions); 
```

# mod-rewrite - Mod Rewrite 不会将子域重定向到新的 URL 格式

> ID：12296704
> 
> 赞同：0
> 
> 时间：2012-09-06T09:12:11.303
> 
> 标签：mod-rewrite, redirect, subdomain

我正在将我的所有子域更改为单个域。但是，为了不丢失我所有的 SEO，我需要做一些 301 重定向。我的问题是我有大约 10.000 个子域（这是一个关于城市的网站，每个城市都是一个子域），所以我需要制定一个通用的重写规则来创建新的 URL（否则我的 htaccess 会太大）。

我自己尝试过，但由于某种原因，它正在做它想做的事情（所以我想我做错了什么）。这是我的代码：

```
 RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com/b/^(.*)
 RewriteRule ^(.*) http://domain.com/city/$1/b/$2 [R=301,L]

 RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com
 RewriteRule ^(.*) http://domain.com/?multi_city=$1 [R=301,L] 
```

这就是这两条规则所发生的情况。

```
city.domain.com --> domain.com/?multi_city=/
city.domain.com/b/place --> domain.com/?multi_city=/b/place 
```

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:12:02.330

所以，经过几个小时，我终于把它修好了：

```
RewriteCond %{HTTP_HOST} ^(.+)\.mydomain\.(.*)
RewriteCond %{REQUEST_URI}   ^/b
RewriteRule ^(.*)$ http://mydomain.%2/city/%1/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(.+)\.mydomain\.(.*)
RewriteCond %{REQUEST_URI}   ^/event
RewriteRule ^(.*)$ http://mydomain.%2/city/%1/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(.+)\.mydomain\.com
RewriteRule ^(.*)$ http://mydomain.com/?multi_city=%1 [R=301,L] 
```

这样我可以首先重定向地点和事件，如果 URL 不是该格式，那么它将转到不同格式的 URL。这可能不是最有效的解决方案，但它对我有用。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:36:19.073

我认为第一个 RewriteCond 是错误的：

```
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com/b/^(.*) 
```

'^' 符号表示字符串开始，它不是组的一部分，所以我认为你会尝试：

```
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com/b/(.*) 
```

也许，它会更好：

```
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com/b/([a-zA-Z0-9\-]+) 
```

我是在没有测试的情况下做的，如果它不起作用我会在稍后进行测试，我会回答你。

# c# - 试图在 ASP.NET 中添加文字，但由于它包含代码而不允许这样做？

> ID：12296707
> 
> 赞同：0
> 
> 时间：2012-09-06T09:12:18.970
> 
> 标签：c#, asp.net, asp.net-4.0, literals

这是我的代码：

```
Page.Header.Controls.Add(new LiteralControl("<link rel=\"stylesheet\" href=\"" + Urls.FindCSS("jquery-modalpopup.css") + "\" type=\"text/css\" />")); 
```

我是 ASP.NET 和使用 Literals 的新手，但从我读到的内容来看，这应该是有效的，但我在运行时得到了这个异常：
`The Controls collection cannot be modified because the control contains code blocks (i.e. <% ... %>).`

我当然搜索了类似的问题，但`use <%#`解决方案又名数据绑定对我不起作用。

如果您有任何解决方案或建议，我正在倾听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:14:58.960

您需要`<% ... %>`从标题中删除并改用另一个文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:43:42.403

您也可以尝试使用

```
Page.ClientScript.RegisterClientScriptInclude("jquery-modalpopup",
    Urls.FindCSS("jquery-modalpopup.css")); 
```

而不是通过文字添加 j-script 包含，从而避免调用`Controls.Add`.

抱歉，我刚刚发现这并没有在标题中添加脚本，它可能仍然有帮助。

# java - Criteria API：在 char 列上使用 GreaterThan

> ID：12296708
> 
> 赞同：0
> 
> 时间：2012-09-06T09:12:19.923
> 
> 标签：java, jpa-2.0

我必须重建一个查询，除了一行一切正常。

这是sql中的行：

```
... 
AND someId > '0'
... 
```

someId 是一个字符字段，主要包含数字，但有时包含尾随字符。我的标准部分看起来像这样：

```
cb.greaterThan(myClass.get(MyClass_.someId), 0) 
```

这导致

```
... 
AND someId > 0 
... 
```

（关于缺少的'）

这搞砸了查询，因为我不能在字符列上使用大于。

我需要的是所有一些仅由数字组成且不包含任何字母的 ID。

我尝试添加一个

```
cb.function("isNumeric", Boolean.class, myClass.get(MyClass_.someId)) 
```

到我的 where 子句，但 cb.and 不喜欢那样。:)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:26:51.610

回答我自己：

我调整了 isNumeric-thing 到这个

```
c.equal(cb.function("isNumeric", Boolean.class, myClass.get(MyClass_.someId)), 1) 
```

这很好用。

# python - 用 Python 解析 Erlang 配置文件

> ID：12296712
> 
> 赞同：4
> 
> 时间：2012-09-06T09:12:29.490
> 
> 标签：python, parsing, erlang

我想在 python 中解析一个 erlang 配置文件。有它的模块吗？该配置文件包含；

```
[{webmachine, [
 {bind_address, "12.34.56.78"},
 {port, 12345},
 {document_root, "foo/bar"}
]}]. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:26:56.113

未经测试且有点粗糙，但在您的示例中“有效”

```
import re
from ast import literal_eval

input_string = """
[{webmachine, [ 
 {bind_address, "12.34.56.78"}, 
 {port, 12345}, 
 {document_root, "foo/bar"} 
]}]
"""

# make string somewhat more compatible with Python syntax:
compat = re.sub('([a-zA-Z].*?),', r'"\1":', input_string)

# evaluate as literal, see what we get
res = literal_eval(compat)

[{'webmachine': [{'bind_address': '12.34.56.78'}, {'port': 12345},
{'document_root': 'foo/bar'}]}] 
```

然后，您可以将字典列表“汇总”为一个简单的`dict`，例如：

```
dict(d.items()[0] for d in res[0]['webmachine'])

{'bind_address': '12.34.56.78', 'port': 12345, 'document_root':
'foo/bar'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-10T14:52:17.637

您可以使用 etf 库在 python [https://github.com/machinezone/python_etf中解析 erlang 术语](https://github.com/machinezone/python_etf)

# android - 从 sdcard 扫描图像并在视图中显示

> ID：12296718
> 
> 赞同：-4
> 
> 时间：2012-09-06T09:12:55.820
> 
> 标签：android

我正在开发一个简单的应用程序，其中包括从 sd 卡中获取图像并将其显示在 gridview 中。请给我一个从 sd 卡中获取图像的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:43:46.817

检查它可能对你有帮助的链接[http://mobile.dzone.com/news/displaying-images-sd-card](http://mobile.dzone.com/news/displaying-images-sd-card)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:21:09.443

实现 FileNameFilter 过滤文件名。这是一个示例[http://www.java-samples.com/showtutorial.php?tutorialid=384](http://www.java-samples.com/showtutorial.php?tutorialid=384)

我认为这应该可以解决问题

# c - 在套接字编程中选择

> ID：12296729
> 
> 赞同：0
> 
> 时间：2012-09-06T09:13:41.757
> 
> 标签：c, sockets, client-server

使用 select() 函数有什么用吗？

根据我的（小）经验，我倾向于相信线程就足够了。

所以我想知道，对于还不了解线程的人来说，select() 只是一个教学工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:19:26.857

考虑以下示例。您有一个中等繁忙的 Web 服务器，连接数大约为 100K。您没有使用`select`或类似的东西，因此每个连接都有一个线程，这意味着 100K 线程很快就会成为一个问题。

即使你调整你的系统直到它允许这样的怪物，大多数线程只会在套接字上等待。**如果有一种机制可以在套接字变得有趣时通知您，**那不是更好吗？

换句话说，线程和`select`类似机制是互补的。你只是不能用`threads`简单的东西来代替`select`：监控文件描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:22:17.980

到目前为止，单线程轮询更易于使用、实现和（最重要的是）*理解*。并发编程为您的项目增加了巨大的智力成本：同步数据很棘手且容易出错，锁定会带来许多错误机会，无锁数据结构会导致性能下降，并且程序流变得难以在心理上可视化（或“序列化”）也许）。

相比之下，单线程轮询（可能使用`epoll`/`kqueue`而不是`select`）通常会为您提供非常好的性能（当然取决于您为响应数据所做的确切操作），同时保持直截了当。

特别是在 Linux 中，您可以拥有 timerfds、eventfds、signalfds 和 inotify-fds，以及嵌套的 epoll-fds，它们都位于您的轮询集中，为您提供了一种非常统一的方式来处理各种“异步”事件. 如果最终您需要更高的性能，您可以通过同时运行多个轮询器来获得单点并行性，并且大部分数据同步由内核*为您*完成，它保证在准备就绪时只有一个线程接收成功的轮询.

# jquery - 使用 jquery 在移动设备中播放 Vimeo 视频

> ID：12296730
> 
> 赞同：0
> 
> 时间：2012-09-06T09:13:44.657
> 
> 标签：jquery, html, vimeo

我正在做一个项目，我必须播放 Vimeo 视频，并且我更喜欢使用[PrettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)库。

当我打开 Vimeo 视频时出现问题，然后它会生成错误“加载页面错误”，然后视频播放流畅而没有任何错误。我想迎合这种情况。

我调查这是因为 Jquery（版本 1.6.2）参考和 Jquerymobile 参考。

有什么帮助吗？我被它困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:00:58.450

这就是我的解决方案所做的：通过 jQuery，它检测移动设备，并通过指向手机 Vimeo 网站的适当链接替换嵌入式 Vimeo 视频播放器。

**1 - 检测手机**

我刚刚从 Detect Mobile Browsers (dotcom) 下载了一个 jQuery 脚本，并在加载 jQuery 之后将其添加到我的网站。

```
<script language="javascript" type="text/javascript"
  src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
<script language="javascript" type="text/javascript" src="[path]/detectmobilebrowser.js"></script> 
```

该脚本将创建一个新属性 ，`jQuery.browser.mobile`如果浏览器是移动设备，则该属性为真。

**2 - 通过指向 Vimeo for Mobile 的适当链接替换所有 Vimeo iFrame，指向正确的视频。**

这是代码。只需将其放入 jQuery 的 ready 函数中即可。如果您愿意，您也可以将它放在一个函数中并在需要时触发该函数。

```
if (jQuery.browser.mobile == true) {
$('iframe').each(function() {
if ($(this).attr('src').indexOf('http://player.vimeo.com') != -1) {
var videoiFrame;
videoiFrame = {
height : $(this).height(),
width: $(this).width(),
src : $(this).attr('src')
}
// Find video code
var videoCode = videoiFrame.src.split('?');
videoCode = videoCode[0];
videoCode = videoCode.split('/');
videoCode = videoCode[(videoCode.length -1)];
// videoCode found, now replace iFrame
$(this).before('<a class="mobile-video"
  style="width: '+ videoiFrame.width +'px ; height: '+ videoiFrame.height+'px;
    line-height: '+ videoiFrame.height+'px;"
  href="http://www.vimeo.com/m/'+ videoCode + '"></a>');
$(this).remove();
}
});
} 
```

就是这样。在诺基亚 Lumia 800 上测试成功（没有 Flash，就像 iphone）

# android - 如何在自定义适配器类中创建弹出窗口？

> ID：12296734
> 
> 赞同：0
> 
> 时间：2012-09-06T09:13:55.330
> 
> 标签：android, android-arrayadapter, popupwindow

我搜索了很多网站来创建弹出窗口，但我没有找到在自定义适配器类中创建弹出窗口的正确解决方案，我发现仅用于在 Activity 类中创建弹出窗口。

我的问题是我正在使用自定义适配器类扩展 ArrayAdapter，因为我在 row.xml 文件中有一个适用于 ArrayList 的 TextView。当我单击该文本视图时，我想在光标点位置显示弹出窗口。

这是我的代码：

```
Clockin_Adapter adap = new Clockin_Adapter(getApplicationContext(), R.layout.group_clkin_row, result);
            clockin.setAdapter(adap);

public static class Clockin_Adapter extends ArrayAdapter<DataItem> {

        ArrayList<DataItem> items;
        Context con;
        int[] buttonStates;
        Time t ;

        public Clockin_Adapter(Context context, int textViewResourceId, ArrayList<DataItem> objects) {
            super(context, textViewResourceId, objects);
            this.con = context;
            this.items = objects;

            buttonStates=new int[objects.size()];
            for(int i=0;i<objects.size();i++)
            {
            buttonStates[i]=0;
            }
        }
        @Override
        public int getCount() {         

             if(employeeList==null){
                    return 0;
                }
                else{
                    return employeeList.length;
                }

        }

        @Override
        public long getItemId(int position) {           
            return 0;
        }
        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {

            View row = convertView;
            final ViewHolder holder;
            if (convertView == null) {
            row = LayoutInflater.from(parent.getContext()).inflate(R.layout.group_clkin_row, null);
            holder=new ViewHolder();
            } else {
                //code

                }

            }

                holder.name = (TextView)row.findViewById(R.id.group_name);

                holder.name.setText(item.getName());
                holder.name.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        //Need PopUp window Here

                    }
                });

static class ViewHolder {
        TextView name;
        TextView time;

        }

please give me solution.

Thanks in advanced. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:27:25.060

自定义浮动窗口：

你可以`dialog.setContentView(R.layout.custom);`改成`dialog.setView(//your view);`

```
final Dialog dialog = new Dialog(con);
            dialog.setContentView(R.layout.custom);
            dialog.setTitle("Title..."); 
```

# r - 检查一列是否有一个值，如果正确，它旁边的列是否正确

> ID：12296737
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:14:09.227
> 
> 标签：r, parameters

我想知道如何制作一些东西来检查[数据中的 Lair 列](https://www.dropbox.com/s/cemo1b8mzgfhria/japansegment%20data.csv)

低于或高于某个阈值可以说低于 0.5 称为 LOH en 高于称为不平衡。所以调用 LOH 和 INBALANCE 应该写在一个新的列中。我尝试了以下代码。

```
detection<-function(assay,method,thres){
  if(method=="threshold"){
    idx<-ifelse(segmenten["intensity"]<1.1000000 & segmenten["intensity"]>0.900000 & segmenten["Lair"]>thres,TRUE,FALSE)
  }
  if(method=="cnloh"){
    idx<-ifelse(segmenten["intensity"]<1.1000000 & segmenten["intensity"]>0.900000 & segmenten["Lair"]<thres,TRUE,FALSE)
  }
  if(method=="gain"){
    idx<-ifelse(segmenten["intensity"]>1.1000000 & segmenten["Lair"]<thres,TRUE,FALSE)
  }
  if(method=="loss"){
    idx<-ifelse(segmenten["intensity"]<0.900000 & segmenten["Lair"]<thres,TRUE,FALSE)
  }
  if(method=="bloss"){
    idx<-ifelse(segmenten["intensity"]<0.900000 & segmenten["Lair"]>thres,TRUE,FALSE)
  }
  if(method=="bgain"){
    idx<-ifelse(segmenten["intensity"]>1.100000 & segmenten["Lair"]>thres,TRUE,FALSE)
  }
  return(idx)
} 
```

在这部分之后，下一步是将函数中的数据写入现有表。任何人都有一个想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:15:27.590

由于您想要的结果不够清楚，我做了一些假设并写了一些可能有用或无用的东西。

首先，在您的函数内部有一个未定义的对象 segmenten，我想这是作为输入提供的数据集，然后您使用 ifelse 并且返回结果是`TRUE`or`FALSE`但您想要或者`LOH`满足`INBALANCE`某些条件时。

您想要`INBALANCE`何时`... & segmenten["Lair"]>thres`和`LOH`其他方式（这里`...`是指条件的另一部分）这将给出一个向量，但是您希望它在主数据集中作为附加列，不是吗？因此，也许这可能是您改进代码的新起点。

```
detection <- function(assay, method=c('threshold', 'cnloh', 'gain', 'loss', 'bloss', 'bgain'),
                    thres=0.5){
  x <- assay
  idx <- switch(match.arg(method),
         threshold = ifelse(x["intensity"]<1.1 & x["intensity"]>0.9 & x["Lair"]>thres, 'INBALANCE', 'LOH'),
         cnloh     = ifelse(x["intensity"]<1.1 & x["intensity"]>0.9 & x["Lair"]<thres, 'LOH', 'INBALANCE'),
         gain      = ifelse(x["intensity"]>1.1 & x["Lair"]<thres, 'LOH', 'INBALANCE'),
         loss      = ifelse(x["intensity"]<0.9 & x["Lair"]<thres,'LOH', 'INBALANCE'),
         bloss     = ifelse(x["intensity"]<0.9 & x["Lair"]>thres, 'INBALANCE', 'LOH'),
         bgain     = ifelse(x["intensity"]>1.1 & x["Lair"]>thres, 'INBALANCE', 'LOH'))

  colnames(idx) <- 'Checking'
  return(cbind(x, as.data.frame(idx)))
  } 
```

例子：

```
Data <- read.csv("japansegment data.csv", header=T)

result <- detection(Data, method='threshold', thres=0.5) # 'threshold' is the default value for method
head(result)
       SNP_NAME x0 x1 y pos.start   pos.end chrom count copynumber intensity allele.B   Lair uncertain sample_id
1 SNP_A-1656705  0  0 0    836727  27933161     1   230          2    1.0783        1 0.9218     FALSE GSM288035
2 SNP_A-1677548  0  0 0  28244579 246860994     1  4408          2    0.9827        1 0.9236     FALSE GSM288035
3 SNP_A-1669537  0  0 0    100819 159783145     2  3480          2    0.9806        1 0.9193     FALSE GSM288035
4 SNP_A-1758569  0  0 0 159783255 159791136     2     5          2    1.7244        1 0.9665     FALSE GSM288035
5 SNP_A-1662168  0  0 0 159817465 168664268     2   250          2    0.9786        1 0.9197     FALSE GSM288035
6 SNP_A-1723506  0  0 0 168721411 168721920     2     2          2    1.8027       -4     NA     FALSE GSM288035
   Checking
1 INBALANCE
2 INBALANCE
3 INBALANCE
4       LOH
5 INBALANCE
6       LOH 
```

使用`match.arg`和`switch`函数将帮助您避免大量`if`语句。

# javascript - 三.js改材质

> ID：12296738
> 
> 赞同：1
> 
> 时间：2012-09-06T09:14:09.600
> 
> 标签：javascript, three.js

我尝试使用键盘上的数字选择我的几何图形，如下所示：

```
if(keyboard.pressed("1")){
   obj = torus;
} 
```

所以我可以显示/不显示它们：

```
if(keyboard.pressed("a")){
   THREE.SceneUtils.traverseHierarchy( obj, function ( obj ) { obj.visible = false; } );
} 
```

我想更改该“选定几何”的材料（或颜色），以便我可以看到哪个被选中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:43:52.673

```
obj.material.color.setHex( 0xffff00 ); 
```

# gwt - GWT：将自定义位置添加到自动完成结果列表中

> ID：12296743
> 
> 赞同：1
> 
> 时间：2012-09-06T09:14:22.213
> 
> 标签：gwt, google-maps-api-3, autocomplete

I am trying to add a list of strings to the autocomplete values returned to the autcomplete Text bar when these values are selected i must process them locally before retrieving information from the google servers.

这是将 AutoComplete 实体绑定到自动文本字段的代码。

```
final AutoCompleteOptions options = new AutoCompleteOptions();
options.setTypes(Arrays.asList(new String[] { "geocode" }));
final AutoComplete autoComplete = new AutoComplete(this.auto.getElement(), options);
autoComplete.bindTo("bounds", (com.google.gwt.maps.client.Map) this.mapWidget.getMap()); 
```

有任何想法吗？

# jquery - jQuery 切换 div 和切换类

> ID：12296745
> 
> 赞同：1
> 
> 时间：2012-09-06T09:14:29.990
> 
> 标签：jquery, toggle

我有一个侧面导航，用户可以在其中单击一个链接，然后切换一个带有该部分选项的面板。我目前的问题是，当用户单击同一链接以隐藏面板时，我需要能够删除该类。

现在，“活动”状态正在链接上。当您从一个链接点击到另一个链接时它工作正常，但如果有人希望隐藏菜单，我喜欢它也删除“活动”状态。“活动”类在菜单上以青色突出显示。

**jsFiddle：http:** [//jsfiddle.net/visualdecree/4A23Z/11/](http://jsfiddle.net/visualdecree/4A23Z/11/)

**jQuery：**

```
$(".sn a").on('click',function(){

    var panID = $("#" + $(this).data('panel') );

    $("div[id*='sn-pan-']")
    .stop()
    .hide({slide:'toggle'}, 400);

    $(panID)
    .css({'left' : '100px','overflow':'visible'})
    .stop()
    .animate({width:'toggle'}, 400)
});

$('.sn').click(function(){
    $('ul.sidenav li').removeClass('active');                    
    $(this).stop(true,true).addClass("active");
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:22:54.640

您可以从 removeClass 函数中排除单击的项目，并像这样切换它

**从下面提供的 jsFiddle 更改。**

```
$('.sn').click(function(e) {
    $('ul.sidenav li').not(this).removeClass('active');
    $(this).stop(true, true).toggleClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:24:30.707

您可以检查链接是否具有活动类，并且仅在尚未活动的情况下添加此类：

```
$('.sn').click(function(){
   var isActive $(this).hasClass('active');
   $('ul.sidenav li').removeClass('active');

   $(this).stop(true,true);
   if(!isActive){
       $(this).addClass("active");
   }
}); 
```

[工作小提琴](http://jsfiddle.net/4A23Z/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:34:11.810

或者只是切换活动类

```
 $('.sn').click(function(){
     $(this).toggleClass("active");
 });​ 
```

# java - 使用 GWT 的访客设计模式

> ID：12296747
> 
> 赞同：1
> 
> 时间：2012-09-06T09:14:33.593
> 
> 标签：java, gwt, visitor-pattern, proxy-pattern

我有一个想法，它是这样的：

1.  在服务端解析文件。
2.  根据文件内容创建操作列表。
3.  将操作列表传递给客户端。
4.  让客户根据列表中的项目定义和执行操作。

与访问者模式一样，我们有一个用于操作的类，并且所有操作都继承了 Action 接口。然后，客户将实施访问者。在Java中它会是这样的：

```
public interface Action {
    void act(Visitor visitor);
}

public class PerfectAction implements Action {
    void act(Visitor visitor) {
         visitor.bePerfect();
    }
}

public class VisibleAction implements Action {
    void act(Visitor visitor) {
         visitor.beVisible();
    }
}

public interface Visitor {
    void bePerfect();
    void beVisible();
} 
```

**问题**
我无法为 Action 和 Visitor 接口创建代理类。它们不包含 setter 和/或 getter。此外，它们不包含任何数据。是否可以将有关应在访问者对象上调用哪种方法的知识从服务传递到客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:10:03.563

请求工厂只能移动*数据*（`EntityProxy`和/或`ValueProxy`），并要求服务器代表客户端做事（`RequestContext`）。

要传输*动作*，客户端和服务器首先需要共享可以执行的那些动作的知识。

然后你有两个解决方案：

*   迁移到 GWT-RPC
*   因为客户端无论如何都必须预先知道所有可能的动作，创建一个枚举或其他任何东西来识别每个动作，并将这些标识符传输给客户端，客户端会将它们映射回要执行的具体动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:24:35.873

我认为这不是您实现访问者模式的方式。我会做这样的事情

```
public interface ActionVisitor {
  void visit(VisibleAction va);
  void visit(PerfrectAction pa);
}

public class PerfectAction implements Action {
    void act(Visitor visitor) {
       visitor.visit(this);
    }
}

public class VisibleAction implements Action {
    void act(Visitor visitor) {
        visitor.visit(this);
    }
} 
```

然后，我将定义执行适当操作的访问者的实现。

以这种方式定义它很重要，这样访问者所做的事情的逻辑就在类之外。在此之前，每个实现都有不同的访问者实现，因此更难改变行为。

我认为这将解决您的问题，因为现在做什么的逻辑已外部化给访问者。

# cuda - 设备查询（CUDA）上的分段错误

> ID：12296749
> 
> 赞同：0
> 
> 时间：2012-09-06T09:14:38.273
> 
> 标签：cuda

当我从 CUDA SDK 运行 devicequey 时，出现分段错误错误：

```
[deviceQuery] starting...

./deviceQuery Starting...

 CUDA Device Query (Runtime API) version (CUDART static linking)

Found 1 CUDA Capable device(s)

Device 0: "GeForce GTX 560 Ti"
  CUDA Driver Version / Runtime Version          4.2 / 4.0
  CUDA Capability Major/Minor version number:    2.1
  Total amount of global memory:                 1024 MBytes (1073283072 bytes)
  ( 0) Multiprocessors x ( 48) CUDA Cores/MP:    0 CUDA Cores
  GPU Clock rate:                                1660 MHz (1.66 GHz)
  Memory Clock rate:                             2004 Mhz
  Memory Bus Width:                              256-bit
  L2 Cache Size:                                 524288 bytes
  Max Texture Dimension Size (x,y,z)             1D=(65535), 2D=(2048,2048), 3D=(0,512,0)
  Max Layered Texture Size (dim) x layers        1D=(0) x 1, 2D=(0,0) x 0
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per multiprocessor:  32653
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes
  Concurrent copy and execution:                 Yes with 1559316080 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   Yes
  Alignment requirement for Surfaces:            No
  Device has ECC support enabled:                Yes
  Device is using TCC driver mode:               Yes
  Device supports Unified Addressing (UVA):      Yes
  Device PCI Bus ID / PCI location ID:           1570935040 / 32653
  Compute Mode:
Segmentation fault 
```

其他示例如何正常工作。甚至 devicequeryDrv 编译正确。

我也得到了smokeParticle示例的浮点异常

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:35:18.690

> CUDA 驱动程序版本/运行时版本 4.2/4.0

看起来您的 CUDA 驱动程序和运行时版本不同。当两者相同时，你会得到 seqfault 吗？尝试重新安装 4.2 并确保所有工具都指向正确的工具包版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:07:25.773

请检查您的驱动程序是否是更新/正确的驱动程序 - [http://developer.nvidia.com/cuda/cuda-downloads](http://developer.nvidia.com/cuda/cuda-downloads...you) ...您可以通过在此页面上提供您的 GPU 信息来找到正确的驱动程序 - [http://www .nvidia.com/Download/index.aspx?lang=en-us](http://www.nvidia.com/Download/index.aspx?lang=en-us)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:31:21.103

我不知道发生了什么，但是当我使用[cula](http://www.culatools.com/forums/viewtopic.php?f=15&t=1044)的最新版本时，我得到了相同版本的 cuda 运行时和驱动程序，但是当我降级到像 r12 这样的旧版本时，它会自动降级我的 cuda 运行时版本并导致得到错误。我测试了三遍（升级，降级）。我不知道这是可能的/

# c# - 如何更新在 DbContext 之外修改的实体？

> ID：12296751
> 
> 赞同：15
> 
> 时间：2012-09-06T09:14:45.483
> 
> 标签：c#, entity-framework, entity-framework-4, code-first

如果实体在 DbContext 之外更改（是一个分离的实体），我在更新实体时会遇到一个小问题。如果我附加修改后的实体，它的状态不会被修改。

我的代码如下所示：

```
var specificationToSave = GetSpecificationFromTmpStore(userSessionGuid);
using (var context = DataContextFactory.GetDataContext())
{
    // this works for update, if I change the values inside the context while debugging
    // but it breaks with new entities
    context.Specifications.Attach(specificationToSave);

    // this works for insert new entities, modified entities will be saved as new entities
    context.Specifications.Add((specificationToSave);)
    context.SaveChanges();
} 
```

我知道 NHibernate 和它的方法 SaveOrUpdate。NHibernate 根据值决定是否更新或插入实体。

使用 EF 4.x 和在 DbContext 之外修改的实体执行此操作的最佳实践是什么？如何告诉 EF 该实体处于修改状态？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-06T09:17:01.427

如果您`Attach`在已更改的实体上使用该方法，您还需要在附加实体后告诉 EF 该实体已[修改](http://msdn.microsoft.com/en-us/data/jj592676.aspx)。

```
context.Specifications.Attach(entity);
context.Entry(entity).State = EntityState.Modified;
context.SaveChanges(); 
```

另一种方法是获取（带跟踪），然后更新字段并保存：

```
var entity = context.Specifications.First(s => s.Id == 1234);
entity.Name = "Foo";
... other changes here
context.SaveChanges(); 
```

另一种选择是在重新附加实体*后*对其进行更改，例如[按照此处](https://stackoverflow.com/questions/8393532/mvc3-with-ef-4-1-and-entitystate-modified)

```
context.Specifications.Attach(entity);
entity.Name = "Foo";
... other changes here
context.SaveChanges(); 
```

**编辑**

您可以将泛型与 DbSet（类或方法）一起使用，如下所示：

```
public void Update<TEntity>(TEntity entity)
{
    DbContext.Set<TEntity>().Attach(entity);
    DbContext.Entry(entity).State = EntityState.Modified;
    DbContext.SaveChanges();
 } 
```

**编辑：用于更新分离的父/子图**

对于效率和性能不重要的简单/浅层父子关系的更新，简单地删除所有旧子并重新插入新子是一个简单（虽然丑陋）的解决方案。

但是，对于更高效的场景，我们需要遍历图，检测更改，然后添加新插入的、更新现有的、忽略未更改的以及从`Context`.

Slauma[在这里](https://stackoverflow.com/a/7969372/314291)展示了一个很好的例子。

您可能想看看使用[GraphDiff](https://www.nuget.org/packages/RefactorThis.GraphDiff/)，它可以为您完成所有这些工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T15:58:26.217

对于断开连接的实体，我找到了这个[解决方案](https://docs.microsoft.com/en-us/ef/core/saving/disconnected-entities#saving-single-entities)。

要查找现有实体的更改：

```
var existing = context.Find<Item>(1);
if (existing != null) 
{ 
   context.Entry(existing).CurrentValues.SetValues(changed);
} 
```

它的 EntityState 将在`Modified`之后，但仅在有实际变化的地方。

我在单元/集成测试中所做的完整示例：

```
await using var context1 = new MyContext(new DbContextOptionsBuilder().UseSqlite("Data Source=demo.db").Options);
await context1.Database.EnsureDeletedAsync();
await context1.Database.EnsureCreatedAsync();

await context1.Items.AddAsync(new Item
{
    Id = 1,
    Name = "Something to start with"
});

await context1.SaveChangesAsync();

await using var context2 = new MyContext(new DbContextOptionsBuilder().UseSqlite("Data Source=demo.db").Options);
var existing = context2.Find<Item>(1);

var entry = context2.Entry(existing);
entry.CurrentValues.SetValues(new Item
{
    Id = 1,
    Name = "Something to start with"
});
entry.State.Should().Be(EntityState.Unchanged);

entry.CurrentValues.SetValues(new Item
{
    Id = 1,
    Name = "Updated now."
});
entry.State.Should().Be(EntityState.Modified); 
```

使用[Microsoft.EntityFrameworkCore.Sqlite](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Sqlite/)和[FluentAssertions](https://www.nuget.org/packages/FluentAssertions/)。

# c# - 为什么 GC System.Threading.OverlappedData 需要这么长时间？

> ID：12296752
> 
> 赞同：17
> 
> 时间：2012-09-06T09:14:48.073
> 
> 标签：c#, memory-leaks, garbage-collection, asyncsocket

我正在通过内存分析器运行我的应用程序以检查泄漏。事情似乎还不错，但是我得到了很多 OverlappedData，它们似乎在终结器队列中徘徊，几乎什么也没做。它们是重叠 IO 的结果，该重叠 IO 已通过关闭`NetworkStream`连接任一端的底层而被取消。

网络流本身被处理。没有`NetworkStream`任何地方的实时实例。

通常，它们植根于一种叫做`OverlappedDataCacheLine`.I`EndRead`的东西，我做的第一件事就是在回调中调用，所以没有`BeginRead`对应的`EndRead`.

这是一个非常典型的外观，表明谁将其与工具隔离

![OverlappedData 正在帮助](../Images/f6758297543bddebdead964ad4255204.png)

最后，它*确实*得到了 GC，但它需要很长时间 - 当我开始大约一千个流时，大约需要半个小时才能杀死所有东西，将它们放入异步调用`BeginRead`并在大约一分钟后关闭它们。

该程序在某种程度上针对端口 80 上的网络服务器重现了该问题。任何网络服务器都可以。

```
using System;
using System.Collections.Generic;
using System.Net.Sockets;
using System.Threading;

class Program
{
    static void Main(string[] args)
    {
        var clients = new List<TcpClient>();
        for (int i = 0; i < 1000; ++i) {
            var client = new TcpClient();
            clients.Add(client);

            client.BeginConnect("localhost", 80, connectResult =>
                {
                    client.EndConnect(connectResult);

                    var stream = client.GetStream();
                    stream.BeginRead(new byte[1000], 0, 1000, result =>
                        {
                            try
                            {
                                stream.EndRead(result);
                                Console.WriteLine("Finished (should not happen)");
                            }
                            catch
                            {
                                // Expect to find an IO exception here
                                Console.WriteLine("Faulted");                               
                            }
                        }, stream);     
                }, client);             
        }

        Thread.Sleep(10000); // Make sure everything has time to connect

        foreach (var tcpClient in clients)
        {
            tcpClient.GetStream().Close();
            tcpClient.Close();
        }
        clients.Clear(); // Make sure the entire list can be GC'd

        Thread.Sleep(Timeout.Infinite); // Wait forever. See in profiler to see the overlapped IO take forever to go away
    }
} 
```

当然，这个程序不需要永远清理一千个`OverlappedData`，因为它比真正的应用程序小得多，但它确实需要一段时间才能完成它。当我运行我的真实东西而不是这个测试应用程序时，我会收到关于卡住的终结器的警告。它在我的应用程序中没有做太多，只是尝试关闭可能尚未关闭的所有内容，并确保在任何地方都没有保留对任何内容的引用。

`Dispose()`如果我打电话或`Close()`在客户端上，它似乎根本不重要而且它是流。结果是一样的。

关于为什么会发生这种情况以及如何避免这种情况的任何线索？CLR 对我很聪明，并保持这些固定的内存块完好无损以准备新的调用？为什么终结器的完成速度如此之慢？

**更新**在通过在 F5 键上放一杯水并喝杯咖啡进行了一些非常愚蠢的负载测试之后，似乎有什么东西会在压力下触发更完整的 GC 来收集这些东西。所以实际上*似乎*没有真正的问题，但仍然很高兴知道这里实际发生了什么以及为什么收集这个对象比其他对象慢得多，如果这可能在后期阶段成为碎片化的问题记忆之类的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T13:23:51.763

好的，现在似乎很清楚发生了什么。垃圾回收仅在您分配内存时发生。它需要至少 2 MB 的分配空间，这是触发 GC 的第 0 代 GC 堆的典型初始大小。换句话说，一个什么都不做的程序永远不会运行 GC，你会看到任何尚未在堆中收集的对象很长时间都没有被内存分析器收集。

这是对您所描述内容的一个很好的解释。终止所有连接后，您的程序不再需要执行任何操作。因此，如果有内存，则不会分配太多，因此不会触发集合。如果您的探查器未显示集合，那么您可以使用 Perfmon.exe 查看它们。否则这根本不是问题，只是垃圾收集器工作方式的副作用。

只有当您有明确的证据表明程序存在资源消耗问题时才担心泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:47:14.457

尝试获取客户端`AsyncResult`以排除任何 lambda 闭包问题。

`TcpClient t = (TcpClient)connectResult.AsyncState;`

另外，您不应该在完成处理`EndConnect` *后*打电话吗？

# postgresql - Postgres如何评估从查询到函数中变量的表达式

> ID：12296758
> 
> 赞同：0
> 
> 时间：2012-09-06T09:15:04.257
> 
> 标签：postgresql, dynamic, execute, plpgsql, evaluation

我希望能够获取从表中查询名称的函数变量的值

编辑显示查询表而不是从静态值查询：

```
 create table __test__
(
_col text
);
insert into __test__
(_col)
values('_a');

   create or replace function __test() 
    returns void
    language 'plpgsql' as
    $$
    declare
      _r record;
      _a int;
      _b int;
      _sql text;
    begin

      _a = 1;
      _b = 0;

      for _r in select _col as _nam from __test__ a loop
      -- query returns one row valued "_a"
        _sql = 'select ' || _r._nam ;
        execute _sql into _b;
      end loop;

      raise info 'value of _b %', _b;

    end;
    $$;
select __test() 
```

当函数执行时，_b = 1。有可能吗？

同样的错误...

```
ERROR:  column "_a" does not exist
LINE 1: select _a
               ^
QUERY:  select _a
CONTEXT:  PL/pgSQL function "__test" line 15 at EXECUTE statement 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:14:50.340

让我们尝试**重新构建问题**：您所追求的将是[Perl eval()](http://perldoc.perl.org/functions/eval.html) 函数的等价物，它能够执行动态生成的代码段，“*任何外部词法变量都对其可见*”。在您的示例中，变量为`_a`，但正如您从错误消息中看到的那样，它不能由动态 SQL 语句进行插值。原因是 SQL 解释器对当前的 pl/pgsql 变量没有可见性，甚至不知道这些变量存在。它们仅限于 pl/pgsql。

这里需要的是上下文感知动态生成的 pl/pgsql 语句，但是这种语言没有这个特性。如果没有此功能，是否可以找到实现结果的技巧是值得怀疑的。尽管它能够很好地与 SQL 交互，但它是一种相当静态的语言。

另一方面，这对于 pl/perl 来说是没有问题的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T12:19:48.397

您可以创建一个临时表，在其中插入变量名称和值，然后对其执行选择。打扫完就行了。我以前使用过类似的方法。它工作正常。不过，它确实有额外的开销。

编辑：添加示例

```
CREATE FUNCTION switch (in_var text) RETURNS text
LANGUAGE PLPGSQL VOLATILE AS $$

declare t_test text;
    switch_vals text[];

BEGIN

   CREATE TEMPORARY TABLE switch_values (var text, value text);

   EXECUTE $e$ INSERT INTO switch_values VALUES 
       ('a', '1'), ('b', '2'), ('c', '3') $e$;

   EXECUTE $e$ SELECT value FROM switch_values WHERE var = $e$ || quote_literal(in_var)
       INTO t_test;

   DROP TABLE switch_values;

   RETURN t_test;

END; $$; 

postgres=# select switch('a');
  switch 
 --------
   1
 (1 row) 
```

# iphone - 如何在目标 c 中获取设备模型？

> ID：12296760
> 
> 赞同：1
> 
> 时间：2012-09-06T09:15:10.853
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，该应用程序具有显示“设备名称”、“版本”、“型号”等设备详细信息的功能。我能够获得我需要但无法获得的所有其他东西获取具体的“模型”。目前我正在获取“iPad 3G”，但我希望它为 MC705LL（iPad 3G）。

有没有可能获得上述信息的方法？

# java - Eclipse Java：根据构建配置定义最终变量

> ID：12296762
> 
> 赞同：3
> 
> 时间：2012-09-06T09:15:25.803
> 
> 标签：java, android, eclipse, debugging, build-process

我想要一个`final`变量，`true`当我运行我的项目的调试版本时，`false`当我运行运行版本时。我知道我可以通过构建配置来做到这一点，但不知道如何在 Eclipse 中进行设置。Stack Exchange 上似乎没有任何关于具体定义变量的教程或问题。

我在 Eclipse Classic 4.2 中编译 Java，使用 ADT 插件创建一个 Android 应用程序。

* * *

编辑：根据@Xavi，我设置了以下内容：

```
 try {
        String line = null;
        java.lang.Process p = Runtime.getRuntime().exec("getprop debugging");
        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while ((line = input.readLine()) != null) {
            Log.d("Property:", line); //<-- Parse data here.
        }
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

在 Debug Configurations 窗口的 Target 选项卡的“Additional Emulator Command Line Options”字段中，我输入了：

```
-prop debugging=true 
```

不幸的是，这看起来只适用于模拟器模式。在我的手机上运行时它不会打印任何内容。（它在模拟器上运行良好。）

* * *

编辑：根据@Sharks，我发现了一些似乎相关的链接，但我不知道如何将它们应用于我的情况：

*   [Android - 使用 ant 创建更改配置值的构建配置](https://stackoverflow.com/questions/5032078/android-use-ant-to-create-build-configurations-that-change-configuration-value)
*   [http://www.bonobolabs.com/fuck-the-android-build-process/](http://www.bonobolabs.com/fuck-the-android-build-process/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:49:40.210

如果您使用 ADT 在 Eclipse 中工作，那么您可以检查 variable `BuildConfig.DEBUG`。它是自动生成的并放置在`gen/<package>/BuildConfig.java`：

```
if (BuildConfig.DEBUG) {
   variable = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:17:35.803

除了@Yury's answer之外，您还可以`-prop debugging=true`在*Additional Emulator Command Line Options*中使用并在运行时通过以下方式检查它`Runtime.getRuntime().exec("getprop debugging")`

![调试配置截图](../Images/84bb108b2e83e166a174955669c5b330.png)

此外，您可能会发现以下问题很有用：[Android：发布和测试模式？](https://stackoverflow.com/q/11661547/851811)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:01:07.773

好的，因为命令行参数对你不起作用；Eclipse 不适合你，所以为什么不试试这样的东西

*   在您的 APK 资产中放置一个配置文件。
*   在变量赋值之前读取静态块中的文件
*   根据您在文件中读取的内容分配您的调试值...

    ```
    private ByteArrayOutputStream getAssetFileAsByteArrayOutputStream(String filename)
    {
    AssetManager assetManager = this.getAssets();
    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();//  OutputStream(helper);
    try
    {
        final InputStream assetFile = assetManager.open(filename, AssetManager.ACCESS_RANDOM);
        byte readBuffer[] = new byte[1024 * 64];    //64kB
        int byteCount;
        while ((byteCount = assetFile.read(readBuffer)) > 0)
            byteStream.write(readBuffer, 0, byteCount);
        byteStream.flush();
        //          copiedFileStream.close();
    } catch (IOException e)
    {
    }
    return byteStream;
    } 
    ```

然后在初始化最终（const）值之前，要么放置一个静态块

```
 static 
  {
       //read file
       //get the value you want
  }
  public final static Variable myVar = valFromFile ? "DEBUG" : "NORMAL"; 
```

或者只是将 finalized 变量的初始化移动到构造函数，您可以在那里初始化 final vars。

# android - 如果获取的进程被杀死，部分唤醒锁会发生什么？

> ID：12296767
> 
> 赞同：3
> 
> 时间：2012-09-06T09:15:34.677
> 
> 标签：android, android-wake-lock

如果进程在被杀死之前没有释放，它会自动释放吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T09:31:31.673

如果进程被杀死，唤醒锁将被释放。您可以通过以下方法检查

获取唤醒锁，然后运行

```
 adb shell dumpsys power 
```

从ddms杀死进程。再次运行 dumpsys power

您可以看到 mlocks.size 回到 0。

# wordpress - 仅在 Wordpress 中查询类别并显示帖子的标题

> ID：12296768
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:15:35.577
> 
> 标签：wordpress, post, categories

查询类别帖子并仅显示帖子的标题，我想要代码。请。假设，类别 ID 是 50 .. 所以我会看到类别 50 下的帖子标题。（Wordpress）谢谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:43:15.020

根据您在评论中的代码，您的问题是您遗漏了 WordPress 循环 - 请查看此链接中的代码；

[http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

给出的示例与您的任务非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T10:27:02.597

在 WordPress 查询中，您需要循环调用标题/内容函数等，例如：

```
<?php
query_posts( 'cat=51&showposts=5' );
// the Loop
while (have_posts()) : the_post();
    the_title('<h3>', '</h3>');
endwhile;
?> 
```

# javascript - 类似于 HTML 命令行的文本框

> ID：12296769
> 
> 赞同：2
> 
> 时间：2012-09-06T09:15:39.827
> 
> 标签：javascript, jquery

我正在尝试制作一个使用自定义语法执行自定义命令的文本框，它是为了教孩子们如何编程。

一个简单的例子是，如果用户写了一个`$`符号，程序会通过消息发出警报（您现​​在正在写一个变量名），如果他在同一个文本框中添加`!=`了警报，则表示不相等，等等。

现在我正在使用 jQuery`KeyUp`事件，通过运行几个正则表达式测试并在每次测试时发出警报框警报。

我想问是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:23:09.350

对于一个非常简单的解决方案，为什么不直接使用 node.js REPL 或浏览器控制台？

然而，在许多地方，这是在一个成熟的教学场所完成的。看看这个，例如： [Rails for Zombies](http://railsforzombies.org/levels/1/challenges/1)

# blackberry - 开发 BlackBerry OS6 需要哪个版本的 Blackberry JRE

> ID：12296770
> 
> 赞同：3
> 
> 时间：2012-09-06T09:15:43.953
> 
> 标签：blackberry, java-me, java

我下载了用于 BlackBerry 的 Eclipse 插件，默认情况下它具有 BlackBerry OS 7 运行时。我需要针对 BlackBerry OS 6 和 OS 7 设备。这也适用于 BlackBerry OS 6，还是我需要更改 JRE？如果我需要更改 JRE，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T09:45:35.900

您已经下载的内容可以用于为 BlackBerry OS 7 进行开发。但是，如果**还**需要为 OS 6 设备进行开发，您也应该安装 OS 6.0 插件 SDK。

目前，[这个 blackberry.com 页面描述了您需要遵循的一般流程](https://developer.blackberry.com/java/download/eclipse)：

1.  在 Eclipse 中，选择**Help -> Install New Software**。
2.  然后单击**添加...**按钮以添加新的软件更新站点，如果 BlackBerry 站点尚不可用于**Work with**。
3.  输入 BlackBerry 站点的 URL（对于 OS X为[http://www.blackberry.com/go/eclipseUpdate/mac/java](http://www.blackberry.com/go/eclipseUpdate/mac/java)，对于 Windows为[http://www.blackberry.com/developers/jar/win/java ）](http://www.blackberry.com/developers/jar/win/java)
4.  如果您随后选择 BlackBerry 更新站点，您应该会看到名为**BlackBerry Java Plug-In Category**的更新类别或类似名称。展开它，您应该能够安装 7.1、7.0、6.0 或 5.0 SDK。

![在此处输入图像描述](../Images/d7d0dd2db25a922f53282471b10774e1.png)

安装您可能希望将其设备作为应用程序*最低版本的所有 SDK。*在 Windows 上，选择特定的 JRE 版本还会为您提供至少一个运行该版本 BlackBerry 智能手机软件的模拟器（但 Mac OS X SDK 不支持模拟器）。

一旦你有了一个 BlackBerry Eclipse 项目，你就可以选择你构建的 SDK 版本。这将是应用程序支持的*最低*版本。

1.  右键单击Eclipse **Package Explorer中的****Project**，然后选择**Properties**。
*****   在那里，您可以看到**Java Build Path**属性，这些属性指定了您所针对的最低 JRE (OS) 版本。*   然后，在**Libraries**选项卡上，您可以**删除当前的 JRE (OS) 版本，并通过依次选择****Add Library**和**JRE System Library**将其替换为另一个版本。*   选择**备用 JRE**，您应该能够从您在这些说明的前几个步骤中安装的插件的任何 JRE 版本中进行选择。****

 ****就这样！****

# c - qsort 用于结构数组

> ID：12296773
> 
> 赞同：2
> 
> 时间：2012-09-06T09:15:51.177
> 
> 标签：c, qsort

我尝试对下面的结构进行排序，目的是对其错误率进行排序，同时保留 sid 和 did 的信息。虽然没有编译错误，但我在运行时遇到了段错误。我想知道哪里出了问题......

```
#include <stdio.h>
#include <stdlib.h>

struct linkdata {
    int sid;
    int did;
    double err;
};
typedef struct linkdata LD;
typedef int (*qsort_func_t)(const void *, const void *);

static int compareByErr (const void * a, const void * b)
{
    fprintf(stderr, "aerr=%.3f, berr=%.3f\n", (*(LD**)a)->err, (*(LD**)b)->err);
    int aerr = (*(LD**)a)->err;
    int berr = (*(LD**)b)->err;

    return aerr - berr;
}

int main() {

    int idx;
    int numnode;
    struct linkdata* perr;
    qsort_func_t qsort_func = compareByErr;

    numnode = 3;
    perr = (LD*) malloc (numnode*numnode*sizeof(LD));

    perr[0].sid = 0; perr[0].did = 1; perr[0].err = 0.642; 
    perr[1].sid = 0; perr[1].did = 2; perr[1].err = 0.236; 
    perr[2].sid = 0; perr[2].did = 3; perr[2].err = 0.946;
    idx = 3;

    qsort(perr, idx, sizeof(perr), compareByErr);

    int i;
    for (i=0; i<idx; i++){
       fprintf(stderr,"err[%d][%d] = %.3f\n", perr[i].sid, perr[i].did, perr[i].err);            
    }

    free(perr); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:24:29.847

您的比较函数期望对指向结构的指针数组进行排序，但您没有这样做。其他答案涵盖了这个问题。

他们没有提到的是你也在使用错误`sizeof`的排序。由于数组是结构体数组，你必须告诉 qsort 一个成员的大小就是一个结构体的大小。更改`sizeof perr`为`sizeof *perr`

此外，在比较它们之前将浮点数转换为整数会导致它们都相等，因为它们都为零......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:20:29.617

代码中有很多错误。

## 1\. compareByErr

函数的`a`和`b`参数`compareByErr`是 的对象`LD*`，而不是`LD**`。你做了一个不必要的取消引用。尝试将该功能更改为：

```
static int compareByErr (const void * a, const void * b)
{
    fprintf(stderr, "aerr=%.3f, berr=%.3f\n", ((LD*)a)->err, ((LD*)b)->err);
    int aerr = ((LD*)a)->err;
    int berr = ((LD*)b)->err;

    return aerr - berr;
} 
```

## 2\. compareByErr

还有另一个问题，您隐式地将 转换`double`为`int`. 由于所有这些“错误”都是 0.???，它们都将被截断为 0。使整个数组未排序。将其更改为：

```
 double aerr = ((LD*)a)->err;
    double berr = ((LD*)b)->err;

    return aerr < berr ? -1 : aerr > berr ? 1 : 0; 
```

## 3.malloc

您正在分配 3 个²个节点，但只需要 3 个。将其更改为

```
perr = (LD*) malloc (numnode * sizeof(LD)); 
```

## 4\. qsort

第三个参数是数组中每个元素的大小，`sizeof(perr)`而不仅仅是指针的大小（4 个字节）。将该行更改为：

```
qsort(perr, idx, sizeof(*perr), compareByErr);
//                      ^ 
```

实际获得元素大小。

`idx`似乎没有必要。你可以在`numnode`这里使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:20:45.420

您错误地处理了比较器回调的参数。

这个：

```
fprintf(stderr, "aerr=%.3f, berr=%.3f\n", (*(LD**)a)->err, (*(LD**)b)->err); 
```

应该：

```
{
  const LD *lda = a, *ldb = b;

  fprintf(stderr, "aerr=%.3f, berr=%.3f\n", lda->err, ldb->err);
  /* ... */
} 
```

当然，您不必*引入*适当类型的新变量，但它会使后续代码变得容易得多。我总是这样做。

此外，这：

```
int aerr = (*(LD**)a)->err;
int berr = (*(LD**)b)->err;

return aerr - berr; 
```

非常简洁，但它可以隐藏有点可怕的整数溢出问题。我会推荐：

```
return (a->err < b->err) ? -1 : a->err > b->err; 
```

这使用显式文字来生成`-1`值，同时依赖于为其他两种情况生成 0 或 1 的比较。

# php - MYSQL在PHP代码中设置时区

> ID：12296780
> 
> 赞同：6
> 
> 时间：2012-09-06T09:16:05.027
> 
> 标签：php, mysql, timezone

如何将 MYSQL TIMEZONE 更改为 GMT 格式，如 PHP 中的此函数：/ *SET GMT TIMEZONE* /date_default_timezone_set('Etc/GMT');

我的数据库类在这里：

```
class DB {
    private static $instance;
    private $MySQLi;

    private function __construct(array $dbOptions){

        $this->MySQLi = @ new mysqli(   $dbOptions['db_host'],
                                        $dbOptions['db_user'],
                                        $dbOptions['db_pass'],
                                        $dbOptions['db_name'] );

        if (mysqli_connect_errno()) {
            throw new Exception('Database error.');
        }

        $this->MySQLi->set_charset("utf8");
    }

    public static function init(array $dbOptions){
        if(self::$instance instanceof self){
            return false;
        }

        self::$instance = new self($dbOptions);
    }

    public static function getMySQLiObject(){
        return self::$instance->MySQLi;
    }

    public static function query($q){
        return self::$instance->MySQLi->query($q);
    }

    public static function prepare($q){
        return self::$instance->MySQLi->prepare($q);
    }

    public static function esc($str){
        return self::$instance->MySQLi->real_escape_string(htmlspecialchars($str));
    }

} 
```

我在其他文件中的查询是这样的：

```
DB::query('UPDATE `calendar_data` SET `data` = "'.DB::esc(json_encode($array)).'", `upcoming_time` = "'.date('Y-m-d H:i:s', $upcoming).'", `time_now` = NOW() WHERE `id` = "1"'); 
```

我应该在哪里将查询插入到类中以运行一次？

谢谢！

```
$this->MySQLi->set_charset("utf8");
$this->MySQLi->query("SET timezone = 'GMT'"); 
```

*   不工作。如果我使用 NOW()，则插入服务器时间 (GMT-4)。哪里有问题？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T09:57:16.337

Try the following:

```
$this->MySQLi->query("SET time_zone = '+0:00'"); 
```

Using named timezones will only work if the time zone information tables in the MySQL database have been created and populated.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T09:26:10.270

写完之后：

```
$this->MySQLi->set_charset("utf8"); 
```

还要写这个：

```
$this->MySQLi->query("SET timezone = 'GMT'"); 
```

此时区设置将应用于该连接上发送的所有未来查询。

此外，请确保您已在 mysql 数据库中设置区域表。

[http://dev.mysql.com/doc/refman/5.5/en/mysql-tzinfo-to-sql.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-tzinfo-to-sql.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T13:38:31.230

从手册；

> 每个连接时区。每个连接的客户端都有自己的时区设置，由会话 time_zone 变量给出。最初，会话变量从全局 time_zone 变量中获取其值，但客户端可以使用以下语句更改自己的时区：

```
mysql> SET time_zone = timezone; 
```

所以一定是这样的；

```
$this->MySQLi->query("SET time_zone = 'GMT'"); 
```

[http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)
[http://dev.mysql.com/doc/refman/5.5/en//server-system-variables .html#sysvar_time_zone](http://dev.mysql.com/doc/refman/5.5/en//server-system-variables.html#sysvar_time_zone)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T09:26:27.617

MySQL 具有广泛的[时区支持](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)。您可以在服务器级别、每个连接甚至每个查询上设置它。我认为在 __construct 中执行 'SET time_zone = xxx' 对你来说已经足够了。

# wpf - 如何在 DataGrid 的 DataGridComboBoxColumn 中绑定 ObservableCollection？

> ID：12296784
> 
> 赞同：0
> 
> 时间：2012-09-06T09:16:16.020
> 
> 标签：wpf, xaml, data-binding

我已经将 ListCollectionView 作为“ListCollectionView1”提供给 Grid 和 inGrid，我使用了 DataGrid。“ListCollectionView1”包含两个可观察的集合。“ObservableCollection1” DataGrid 和另一个可观察集合作为“ObservableCollection2”，它在“ObservableCollection1”可观察集合中作为 Itemsource 到 DataGridComboBoxColumn 。并且作为 SelectedValueBinding 我使用 Property as "a" from "ObservableCollection1" 但我没有得到 DataGridComboBoxColumn 中的值

```
 <Grid DockPanel.Dock="Bottom" DataContext="{Binding ListCollectionView1>
<DataGrid 
                                ColumnWidth="130"
                                CanUserAddRows="True"
                                AutoGenerateColumns="False"
                                ItemContainerStyle="{StaticResource DataGridRowContentStyle}"
                                ItemsSource="{Binding ObservableCollection1 }" 
                                CanUserDeleteRows="False">
                        <DataGridComboBoxColumn Header="Labour" ItemsSource="{Binding Path=ObservableCollection2 , RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"  SelectedValueBinding="{Binding Id}" SelectedValuePath="Id" DisplayMemberPath="Id" HeaderStyle="{StaticResource DataGridHeaderStyle}"/>
</DataGrid>
</Grid> 
```

在我的 viewModel 可观察集合和 listcollectionview 是

```
private ListCollectionView _ListCollectionView1;
        public ListCollectionView ListCollectionView1
        {
            get { return _ListCollectionView1; }
            set
            {
                this._ListCollectionView1= value;
                OnPropertyChanged("ListCollectionView1");
            }
        }

public ObservableCollection<Model_ObservableCollection1> ModelObservableCollection1
        {
            get { return new ObservableCollection<Model_ObservableCollection1>(ViewModel.AllDataCollactions.AllTransactionsDetails.Where(s => s.TransactionsID.Equals(TransactionsID))); }
        }
        public ObservableCollection<Model_ObservableCollection2> Model_ObservableCollection1
        {
            get { return new ObservableCollection<Model_ObservableCollection1>(ViewModel.AllDataCollactions.AllTransactionsDetails.Where(s => s.TransactionsID.Equals(TransactionsID) && s.IsJama)); }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:52:26.620

尝试这个。

```
 <DataGrid x:Name="testGrid" AutoGenerateColumns="True" ItemsSource="{Binding ObservableCollection}" >
        <DataGrid.Columns>
            <DataGridComboBoxColumn Header="Labour"  DisplayMemberPath="test">
                <DataGridComboBoxColumn.ElementStyle>
                    <Style TargetType="{x:Type ComboBox}">
                        <Setter Property="ItemsSource" Value="{Binding Path=DataContext.ObservableCollection2 , RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
                    </Style>
                </DataGridComboBoxColumn.ElementStyle>
                <DataGridComboBoxColumn.EditingElementStyle>
                    <Style TargetType="{x:Type ComboBox}">
                        <Setter Property="ItemsSource" Value="{Binding Path=DataContext.ObservableCollection2, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" />
                    </Style>
                </DataGridComboBoxColumn.EditingElementStyle>
            </DataGridComboBoxColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

在您的样式绑定中添加**DataContext**而不仅仅是属性名称。您只是在设置没有意义的 ColumnBoxHeader 的 ItemsSource 。它不知道如何在控件的子项中填充 ComboBox。

# android - 背后的原因是什么 DEV_ACTION_ERROR 安卓日志

> ID：12296785
> 
> 赞同：3
> 
> 时间：2012-09-06T09:16:24.230
> 
> 标签：android, android-webview, android-logcat

我的应用程序正在使用 Web 视图，并且一切正常（没有强制关闭，没有可见的错误），但是在 log cat 中，我得到了无限且连续的日志。

```
09-06 09:05:27.464: I/GATE(3471): <GATE-M>DEV_ACTION_ERROR</GATE-M> 
```

我的 Web 视图呈现一个位于资产文件夹中的本地 html 文件。从 Android 本机代码中，我将一些字符串发送到 webview 以调用 java 脚本函数。
由于无限的日志，我无法看到我的自定义日志消息。

任何人都可以告诉我原因，如果我做错了什么可以消除。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T10:52:46.323

我正在使用来自服务器的 Url 加载 WebView。在我的情况下，它不是 html 文件。只需检查来自服务器的输入流。如果有任何内容，则设置 webview，否则不设置。

# rabbitmq - MassTransit 为 RabbitMQ 添加了什么？

> ID：12296787
> 
> 赞同：44
> 
> 时间：2012-09-06T09:16:30.393
> 
> 标签：rabbitmq, masstransit

[与直接在RabbitMQ](http://www.rabbitmq.com/)之上构建相比，在[MassTransit](http://masstransit-project.com/)之上构建有什么好处？

我相信 MassTransit 提供的一个好处是“类型”交换（按接口/类型发布订阅），因此与消息内容是非结构化文本/blob 的普通 RabbitMQ 交换相比，消息的内容是结构化的。

MassTransit 还提供哪些其他好处？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-06T21:14:32.243

MT 在仅使用 RabbitMQ 之上添加的内容：

*   多线程并发消费者
*   消息序列化，包括接口和版本控制
*   自动交换绑定，发布约定
*   Sagas，包括通过 NHibernate 的持久状态
*   服务的性能计数器
*   消息头
*   故障处理

这些只是少数，有些比其他更重要。总线托管您的消费者、处理程序、sagas 并管理所有线程这一事实可能是最大的优势，并且您可以在同一进程中托管多个总线这一事实。

序列化是下一个最大的好处，因为这可能很难弄清楚，并且获得一个基于接口的消息契约，并自动反序列化为类型（包括动态支持的接口类型）是巨大的。发布实现多个接口的单个​​类，并看到所有感兴趣的消费者异步获取他们的消息，这在生产中非常棒，因为可以将新接口添加到生产者并且下层消费者不受影响。

这些只是一些，您可以[查看文档](https://masstransit-project.com/usage/transports/)以获取更多信息，或者提供真正古老的[.NET Rocks！播客](http://www.dotnetrocks.com/default.aspx?showNum=798)听听你的一些相关内容。

[更新：现在YouTube 上](https://youtube.com/playlist?list=PLx8uyNNs1ri2MBx6BjPum5j9_MMdIfM9C)有一个完整的系列报道 MassTransit。

# php - PHP - $_GET 被服务器缓存

> ID：12296791
> 
> 赞同：1
> 
> 时间：2012-09-06T09:16:40.663
> 
> 标签：php, caching, get

看到我的第一个问题得到了很好的回答，我寄予厚望，所以我会尽我所能，但如果您需要更多信息，请大声喊叫。

我有一个我建立的网站，在我们使用的所有不同的测试服务器上都可以正常工作，但现在在客户端的服务器上，并且出现了一个小错误，在四处搜索后我明白它为什么这样做，但不确定修复它的最佳方法。

基本上在其中一个页面上，我有一个 php if 语句来确定查询字符串是否存在，这段代码如下

```
<?php if (isset($_GET['area'])) { ?>
    <script type="text/javascript">
        $(function() {
            setTimeout(function() {
                $('#<?php echo $_GET['area']; ?>-popup').click();
            }, 500);
        });
    </script>
<?php } ?> 
```

在我的服务器上一切正常，但是在客户端上 this`isset($_GET['area'])`总是 return `true`。它所做的是，当您使用添加 的链接进入页面时`?area=test`，服务器正在存储此值，并且每当我返回此页面时，它认为这`GET`是真的然后执行弹出窗口，即使有没有查询字符串。

非常烦人，我可能正在考虑清除会话，但它似乎有点矫枉过正，是否有一个未设置的`$_GET`函数可以在检查查询字符串是否存在之前执行。

希望这是有道理的，我以前从未做过这样的事情，服务器存储`$_GET`S似乎很疯狂。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:20:41.893

`$_GET`据我所知，没有缓存。

此外，通常您会设置一个随机`GET`值以避免服务器缓存，例如`?seed=123131153131`

您确定在显示页面时发送给 Php 的请求吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:21:55.153

这是不可能的。如果 'parameter' 不在 url 中，则没有 $_GET['parameter']。如果 isset() 返回 true，则它存在于 url 中。

浏览器缓存带有 get 参数的 url，或者您在其他地方“欺骗”该参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:24:04.967

`$_GET`不会被缓存。

但是，我可以想象你在某个地方用一个`=`.

就像是;

```
if ($_GET['area'] = 'test') 
```

这将设置它，并使其成为现实。因此，您将永远拥有它（`if()`在这种情况下也是如此

# glassfish-3 - 如何将 glassfish 服务器的设置导出到另一个 glassfish 服务器？

> ID：12296797
> 
> 赞同：5
> 
> 时间：2012-09-06T09:17:12.523
> 
> 标签：glassfish-3

如何将 glassfish 服务器的所有配置保存到另一个 glassfish 服务器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T10:51:18.880

看到这个问题：[GlassFish v3 - 设置的可移植性](https://stackoverflow.com/questions/3857783/glassfish-v3-portability-of-settings)

glassfish\domains\\config\ 目录中的 domain.xml 包含有关服务器的资源、队列信息。

# java - 无法启动 java web start

> ID：12296800
> 
> 赞同：0
> 
> 时间：2012-09-06T09:17:25.273
> 
> 标签：java, java-7, java-web-start

我在 Windows 7 下输入`javaws url_of_jnlp`了 CMD，但出现以下错误：-

```
CouldNotLoadArgumentException[ Could not load file/URL specified: url_of_jnlp]
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main.access$000(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722) 
```

我注意到了这个问题，因为我需要 java web start 才能运行应用程序，但是当我厌倦了运行这个应用程序时，我会被要求保存一个名为 webstart.jnlp 的文件，而不是自动启动 java web start。

那么可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:47:02.283

您需要替换`url_of_jnlp`为应用程序的 jnlp 文件的实际 url。

这将不起作用：`javaws url_of_jnlp`

这将起作用：`javaws "C:\..[Path to folder]..\My_Application.jnlp"`

你真的应该自己找到这个信息，它可以在这个页面的底部找到： [http ://www.java.com/en/download/faq/java_webstart.xml](http://www.java.com/en/download/faq/java_webstart.xml)

有关 javaws 命令行选项的信息，请参阅此页面：http: [//docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/javaws.html](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/javaws.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:38:15.210

检查以下链接以确保您的设置中的一切都完美无缺。

[常见的 Java Web Start 问题](http://enos.itcollege.ee/~jpoial/docs/tutorial/deployment/webstart/problems.html)

[部署 Java Web Start 应用程序](http://enos.itcollege.ee/~jpoial/docs/tutorial/deployment/webstart/deploying.html)

希望能帮助到你。

# iphone - 将 iphone 应用程序转换为 iPad

> ID：12296805
> 
> 赞同：4
> 
> 时间：2012-09-06T09:17:55.897
> 
> 标签：iphone, ios, ipad

我刚刚在 iPhone 中完成了一个应用程序，现在我想为 iPhone 和 iPad 创建相同的应用程序。

我是 iPhone 的新手，所以不知道具体该怎么做？

1）创建新项目并选择通用选项，然后复制粘贴所有代码

2）为两者修改此应用程序。

如何为 iPad 添加 xib？

![在此处输入图像描述](../Images/833ce16694d66c922ebc9f1e4159a768.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:27:53.513

当您想要转换时，也许[这篇博文可以让您快速了解一下。](http://iphonedevelopment.blogspot.de/2010/04/converting-iphone-apps-to-universal.html)否则，您当然可以创建一个新项目并复制您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:21:57.227

你是对的，

1.  选择**通用**选项。

2.  将代码从现有 iPhone 项目转移到新项目。现在，

3.  为 iPad制作**xib**文件，并建立连接 (IBOutlets)。

4.  无论您在哪里需要特定于平台的功能（例如，用于 iPad 的 Popover、Split ViewController 等），都可以放置一个`IF`语句来处理设备特定的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:54:53.880

Select View From User Interface Option after that choose iPad from Device Family. This will create Xib for iPad.And then in Files Owner connect your class.

# objective-c - 带有 png 覆盖的 xCode 视频播放器

> ID：12296807
> 
> 赞同：0
> 
> 时间：2012-09-06T09:18:27.290
> 
> 标签：objective-c, ios, xcode

我是 iOS 开发的新手。我想问你如何才能播放带有图像叠加的视频。我想要做的是播放一些 mp4 文件，并在其顶部放置一些用户可以更改的 png 文件（视频顶部的 UIimageview）。在 android 开发中，我使用“媒体视图”并且可以以任何我不会的方式控制它。在 xCode 类似视图中未找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:32:25.907

看看[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)。您可以使用与任何其他 UIView 相同的视图。

# asp.net - 需要帮助开发 SQL 查询

> ID：12296808
> 
> 赞同：0
> 
> 时间：2012-09-06T09:18:31.597
> 
> 标签：asp.net, sql, security, sdf

我正在尝试开发一个 SQL 查询来帮助我从基于 ASP.NET 的网站中提取一些数据。我正在使用 WebMatrix 在基于 ASP.NET 的网站上开发 SQL 紧凑型数据库 (sdf)。

我正在尝试在我的网站中实现代码来每月对数据库进行春季大扫除。我需要删除那些由用户创建但从未激活的帐户。因此，为了释放用户 ID 并管理数据库大小，我想我会在数据库上运行一个查询，以获取那些尚未得到用户确认且创建日期已过 20 天的帐户。

数据库结构是我的用户表称为“用户”。它有一个用户 ID（自动编号）、电子邮件、全名等字段。

由 ASP 的 WebSecurity 创建的表称为“webpages_Membership”。有UserID（自动编号）、CreationDate、IsConfirmed（账户是否已激活）等字段。

我不擅长开发 SQL 查询。我面临的问题是，当使用参数设置为 DeleteAllRecords 的 Membership.DeleteUser 方法删除用户时，它会删除用户表中相关用户的行，而在自己的表“webpages_Membership”中什么也不做。当用户尝试登录时，它只是检查电子邮件（用户 ID）是否存在于我的用户表中。因此，从长远来看，“webpages_Membership”中出现的帐户在“Users”表中不存在，因为它们已被删除。熟悉 WbeSecurity 行为的人一定都经历过以上这一切。

我正在尝试开发一个查询来查找“webpages_Membership”表，让我得到那些 IsConfirmed 字段设置为 False 的行（意味着那些帐户尚未激活），并确保“webpages_Membership”中的 UserID 字段也存在于“用户”表（这将确保帐户之前没有被删除）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:39:53.437

```
select wm.* from webpages_Membership wm inner join Users u
on wm.UserID = u.UserID 
Where wm.IsConfirmed = 'false'
and DATEADD(dd,20,wm.CreationDate) <= getdate() 
```

# ios - iOS：电话号码拨号不起作用

> ID：12296809
> 
> 赞同：9
> 
> 时间：2012-09-06T09:18:40.910
> 
> 标签：ios

我正在构建一个应用程序，让您可以从荷兰呼叫不同的服务中心。问题是其中一些具有不同的商业格式（如 0800-xxxx）并且设备无法拨打电话。代码如下所示：

```
if ([[UIApplication sharedApplication] canOpenURL:phoneURL]) {
    [[UIApplication sharedApplication] openURL:phoneURL];
} 
```

无论格式如何，您是否知道如何格式化号码或拨打电话？

编辑：这就是 phoneNumber 的创建方式：

```
NSString *phoneNumberString = phoneNumber; // dynamically assigned
NSString *phoneURLString = [NSString stringWithFormat:@"telprompt:%@", phoneNumberString];
NSURL *phoneURL = [NSURL URLWithString:phoneURLString]; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-10T14:22:10.017

我使用了这段代码并且它有效：

```
NSString *cleanedString = [[phoneNumber componentsSeparatedByCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] invertedSet]] componentsJoinedByString:@""];
NSString *escapedPhoneNumber = [cleanedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *phoneURLString = [NSString stringWithFormat:@"telprompt:%@", escapedPhoneNumber];
NSURL *phoneURL = [NSURL URLWithString:phoneURLString];

if ([[UIApplication sharedApplication] canOpenURL:phoneURL]) {
    [[UIApplication sharedApplication] openURL:phoneURL];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:19:37.590

```
NSString *strm = (NSString *) CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)mob, NULL, CFSTR(":/?#[]@!$&’()*+,;="), kCFStringEncodingUTF8);
NSString *strMob = [[NSString alloc] initWithFormat:@"tel://%@",strm];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:strMob]]; 
```

试试这个代码。这适用于任何格式。它将转换为完美的调用 URL。

# java - 如何覆盖现有的 java 库或指定要使用的确切版本

> ID：12296814
> 
> 赞同：1
> 
> 时间：2012-09-06T09:18:46.080
> 
> 标签：java, weblogic, oracle-adf, webcenter

我正在使用 ADF 框架和 webcenter 套件 11.1.1.5，它恰好捆绑了 Apache POI 库版本 3.5。但是，当前项目至少需要 3.7，甚至是该库的最新版本。

我有 weblogic 服务器，带有预部署的 webcenter 应用程序和所有必需的库。

如果我将 Apache POI 库版本 3.8 捆绑在我的项目中，它会一起部署，但应用程序仍使用版本 3.5。

Webcenter 库部署较早，我无法更改此行为。除了在我的项目中包含 Apache POI 的源之外，有没有办法至少为我的应用程序覆盖它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:27:54.103

我不确定 weblogic 中的情况如何，但我可以建议您查看类加载器配置。据我记得在部署 Web 应用程序时有某种类加载器顺序配置。一般来说，你应该要求它先使用应用程序级别的类路径，然后再使用应用程序服务器库类。打开 weblogic 管理控制台并尝试查找此配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:26:10.343

您可以尝试查看 weblogic-application.xml 文件（放入 META-INF）。在此文件中，可以指定应从应用程序库文件夹而不是从 weblogic 加载哪些类。

例子：

`<wls:prefer-application-packages> <wls:package-name>org.apache.log4j.*</wls:package-name> </wls:prefer-application-packages>`

（这将从应用程序库加载 log4j，而不是 weblogic log4j 库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:19:55.917

AlexR 指出了正确的方法，实际上有几个解决这个问题的方法。1\. 将 POI 库安装到 $DOMAIN_HOME/lib/ 并重新启动服务器。这是系统类路径，如果您没有配置，否则它将覆盖其他来源。此解决方案很简单，但不适用于所有情况。2\. 第二种解决方案是使用过滤类加载器功能，这会将标准查找从系统->应用程序->web 更改为过滤->应用程序->web。更多详细信息，请访问[https://blogs.oracle.com/jamesbayer/entry/sharing_a_class_with_a](https://blogs.oracle.com/jamesbayer/entry/sharing_a_class_with_a)

简而言之，您可以使用 adminserver:port:/wls-cat（类加载器分析工具）来识别可能的类冲突并检查当前的类加载器配置，然后使用收集到的信息添加到应用程序中的 weblogic-application.xml 以启用过滤类加载器特征。例如，您可以在过滤器中添加：“org.apache.poi.*”，使类加载器首先检查您的应用程序库。并且此配置将仅影响当前应用程序，因此您不会破坏可能需要旧/不同版本的旧库的其他应用程序。

# google-analytics - 使用 Google Analytics Custom Var 跟踪查看次数

> ID：12296816
> 
> 赞同：1
> 
> 时间：2012-09-06T09:19:17.040
> 
> 标签：google-analytics

我在我的网站中添加了一个自定义变量，以尝试跟踪查看内容的时间。但是，它似乎没有正确跟踪。代码如下所示：

```
_gaq.push(['_setCustomVar',1,'contentView','42',3]); 
```

并在 trackPageView 之前设置，如下所示（帐户已删除）：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-0000000-0']);
_gaq.push(['_setDomainName', 'domain.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_setCustomVar',1,'contentView','42',3]);
_gaq.push(['_trackPageview']); 
```

现在显示此代码的页面昨天被查看了 275 次（我可以通过搜索 URL 来判断）。但是自定义变量仅在“自定义>自定义变量”下出现 15 次，在“访问开始”标题下。

大概这意味着访问在该页面上开始（登陆）了 15 次，但我并不真正关心这一点。我想知道该内容总共被查看了多少次。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:56:28.440

当您在页面范围（范围 3）上处理自定义变量时，自定义变量的默认报告没有多大意义。

您应该创建一个自定义报告，以查看具有 Pageviews 和 Unique Pageviews 作为指标的自定义 Var。比您看到的数据要多。

# asp.net - 什么情况下objectdatasource对象会多次调用selectmethod？

> ID：12296819
> 
> 赞同：0
> 
> 时间：2012-09-06T09:19:23.390
> 
> 标签：asp.net, gridview, sharepoint-2010, objectdatasource

我正在使用带有 SPGridView（基于 GridView 的 SharePoint 控件）的 ObjectDataSource，并查看日志，SelectMethod 被调用了 9 次 - 这比它真正需要的要多 8 倍。

我想知道是否有人确切地知道 ObjectDataSource 对象在什么条件下会调用 Select 方法，或者要检查的一大堆事情/关于优化它的任何建议？它是 DataBound 那么这是否意味着它完全取决于 SPGridView？

我知道 selectcountmethod 调用它一次（[根据这个 SO answer](https://stackoverflow.com/a/4343632/167018)），但我不太明白为什么它需要调用 select 方法这么多次。我是否在错误的步骤绑定？在错误的步骤初始化？我还启用了分页、排序和过滤...任何提示都会很棒:)

编辑：我在事件中添加了一些日志记录代码，看起来 GridView 上的 DataBinding 事件被多次命中，那么这是否意味着 SPGridView 在内部多次调用 DataBind() ？我调用的唯一 DataBind() 是在用户控件中的 Render 事件上，该事件仅引发一次。

记录跟踪：

```
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
...
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
....
GridView_RowDataBound
ODS_Selecting
ODS_ObjCreating
ODS_Selecting
Gridview_DataBinding
GridView_RowDataBound
....
GridView_RowDataBound 
```

而且，这里有一大段代码！

.ascx：

```
<SharePoint:SPGridView ID="appGridView" DataSourceID="appODS" AutoGenerateColumns="false" 
AllowPaging="true" PageSize="10" AllowSorting="true"
AllowFiltering="true" FilterDataFields=",,,,TimeElapsed,,," FilteredDataSourcePropertyName="FilterExpression" FilteredDataSourcePropertyFormat="{1} = '{0}'"
runat="server" />
<wc:ObjectDataSource ID="appODS" runat="server" />
<SharePoint:SPGridViewPager ID="appGridViewPager" runat="server" GridViewId="appGridView" /> 
```

.ascx.cs：

公共部分类 MyUserControl：UserControl {

```
 //http://www.reversealchemy.net/blog/2009/05/01/building-a-spgridview-control-part-1-introducing-the-spgridview/
    //http://www.reversealchemy.net/2009/05/24/building-a-spgridview-control-part-2-filtering/

    protected override void OnInit(EventArgs e)
    {
        appODS.EnablePaging = true;
        appODS.SelectMethod = "GetMyDataTable";
        appODS.SelectCountMethod = "GetMyDataTableCount";
        appODS.StartRowIndexParameterName = "rowStart";
        appODS.MaximumRowsParameterName = "rowCount";

        appODS.SelectParameters.Add(new Parameter { Name = "myParam", DefaultValue = "test" });  
        appODS.TypeName = this.GetType().AssemblyQualifiedName;
        appODS.ObjectCreating += new ObjectDataSourceObjectEventHandler(appODS_ObjectCreating);

        appGridView.RowDataBound += new GridViewRowEventHandler(appGridView_RowDataBound);
        appODS.Filtering += new ObjectDataSourceFilteringEventHandler(appODS_Filtering);
        appGridView.Sorting += new GridViewSortEventHandler(appGridView_Sorting);
    }

    //https://stackoverflow.com/questions/1351578/spgridview-data-and-correct-method-of-ensuring-data-is-safe
    protected override void OnPreRender(EventArgs e)
    {
        if (!string.IsNullOrEmpty(appODS.FilterExpression))
        {
            appODS.FilterExpression = string.Format(
                appGridView.FilteredDataSourcePropertyFormat,
                appGridView.FilterFieldValue.Replace("'", "''"),
                appGridView.FilterFieldName
                );
        }

        base.OnPreRender(e);
    }

    private void appODS_ObjectCreating(object sender, ObjectDataSourceEventArgs e)
    {
        e.ObjectInstance = this;
    }

    protected sealed override void Render(HtmlTextWriter writer)
    {
        GenerateColumns();
        appGridView.DataBind();
        base.Render(writer);
    }

    public DataTable GetMyDataTable(string myParam, int rowStart, int rowCount)
    {
        DataTable dt = new DataTable();

        dt.Columns.Add("ID", typeof(Int32));
        // more columns here 
        dt.Columns.Add("TestColumn", typeof(decimal));

        List<Stuff> things = svc.GetStuff();

        foreach (Stuff thing in things)
        {
            dt.Rows.Add(
                thing.Blah, thing.Blah2);
        }

        return dt;
    }

    public int GetMyDataTableCount(string myParam)
    {
        return 10003; //faked out for now           
    }

    private void GenerateColumns()
    {
        BoundField column = new BoundField();
        column.DataField = "ID";
        column.SortExpression = "ID";
        column.HeaderText = "ID";            
        appGridView.Columns.Add(column);

        //more

        column = new BoundField();
        column.DataField = "TestColumn";
        column.SortExpression = "TestColumn";
        column.HeaderText = "TestColumn";
        appGridView.Columns.Add(column);

    }

    ////filtering
    protected sealed override void LoadViewState(object savedState)
    {
        base.LoadViewState(savedState);

        if (Context.Request.Form["__EVENTARGUMENT"] != null &&
             Context.Request.Form["__EVENTARGUMENT"].EndsWith("__ClearFilter__"))
        {
            // Clear FilterExpression
            ViewState.Remove("FilterExpression");
        }
    }

    private void appODS_Filtering(object sender, ObjectDataSourceFilteringEventArgs e)
    {
        ViewState["FilterExpression"] = ((ObjectDataSourceView)sender).FilterExpression;
    }

    private void appGridView_Sorting(object sender, GridViewSortEventArgs e)
    {
        if (ViewState["FilterExpression"] != null)
        {
            appODS.FilterExpression = (string)ViewState["FilterExpression"];
        }
    }

    private void appGridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (sender == null || e.Row.RowType != DataControlRowType.Header)
        {
            return;
        }

        SPGridView grid = sender as SPGridView;

        if (String.IsNullOrEmpty(grid.FilterFieldName))
        {
            return;
        }

        // Show icon on filtered column
        for (int i = 0; i < grid.Columns.Count; i++)
        {
            DataControlField field = grid.Columns[i];

            if (field.SortExpression == grid.FilterFieldName)
            {
                Image filterIcon = new Image();
                filterIcon.ImageUrl = "/_layouts/images/filter.gif";
                filterIcon.Style[HtmlTextWriterStyle.MarginLeft] = "2px";

                // If we simply add the image to the header cell it will
                // be placed in front of the title, which is not how it
                // looks in standard SharePoint. We fix this by the code
                // below.
                Literal headerText = new Literal();
                headerText.Text = field.HeaderText;

                PlaceHolder panel = new PlaceHolder();
                panel.Controls.Add(headerText);
                panel.Controls.Add(filterIcon);

                e.Row.Cells[i].Controls[0].Controls.Add(panel);

                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:15:04.840

我最终通过抽出反射器并进行更多挖掘来解决它 - 结果我什至不需要在 Render 方法中调用 .DataBind() ，因为 SPGridView 继承自[BaseDataBoundControl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.ensuredatabound.aspx)，这确保在必要时调用 DataBind - 根据我在 MSDN 上的理解，它被称为 OnPreRender。

事实证明，通过在 Render 事件（appGridView.Columns.Add(column);）中生成列，每次我修改 appGridView 时，DataBind() 方法都会再次被调用 - 所以 Render 事件为时已晚设置gridview Columns，因为到那个阶段它期望一切都已经完成并且每次我添加一个新的时它都必须“重新绑定”才能获取数据。

[这是一个巨大的性能问题，如果您遵循此处关于如何使用 ObjectDataSource 设置 SPGridView](http://www.reversealchemy.net/blog/2009/05/01/building-a-spgridview-control-part-1-introducing-the-spgridview/)的其他不错的示例，您应该注意这一点。

# xml - Worldpay 直接 XML

> ID：12296823
> 
> 赞同：4
> 
> 时间：2012-09-06T09:19:42.177
> 
> 标签：xml, worldpay

当我将 XML 提交到[https://secure-test.WorldPay.com/jsp/merchant/xml/paymentService.jsp](https://secure-test.WorldPay.com/jsp/merchant/xml/paymentService.jsp)时：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?> <!DOCTYPE paymentService PUBLIC "-//WorldPay/DTD WorldPay PaymentService v1//EN" "http://dtd.worldpay.com/paymentService_v1.dtd"><paymentService version="1.4" merchantCode="WPACC48193806"> <submit> <order orderCode="AU-1746976-13714703"> <description>Personalised Working Holiday Guide to Australia/Working Holiday, Account No. AU-13714703</description> <amount value="3000" currencyCode="GBP" exponent="2"/> <paymentDetails> <VISA-SSL> <cardNumber>4917610000000000</cardNumber> <expiryDate> <date month="5" year="2022"/> </expiryDate> <cardHolderName>Nguyen Quang</cardHolderName> <cvc>234</cvc> <cardAddress> <address> <street>abc,abc,abnc</street> <postalCode>1000</postalCode> <city>323.84</city> <countryCode>GB</countryCode> <telephoneNumber>+44</telephoneNumber> </address> </cardAddress> </VISA-SSL> <session shopperIPAddress="164.194.163.93" id="186002" /> </paymentDetails> <shopper> <shopperEmailAddress>quang021@ekabiz.vn</shopperEmailAddress> <browser> <acceptHeader>text/html</acceptHeader> <userAgentHeader>Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; MS-RTC LM 8; .NET4.0C; .NET4.0E)</userAgentHeader> </browser> </shopper> </order> </submit> </paymentService> 
```

当我运行它时，这是输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE paymentService PUBLIC "-//WorldPay//DTD WorldPay PaymentService v1//EN"
                                "http://dtd.worldpay.com/paymentService_v1.dtd">
<paymentService version="1.4" merchantCode="WPACC48193806"><reply><orderStatus orderCode="AU-1746976-13714703"><error code="7"><![CDATA[Payment Method VISA_CREDIT-SSL is unknown; The Payment Method is not available.]]></error></orderStatus></reply></paymentService> 
```

文档说要将您的 IP 地址添加到您的 Worldpay 帐户中，我认为我这样做是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-25T16:42:45.897

我赞成的老问题是因为我有同样的问题，对我们来说，问题是针对 WorldPay 帐户的最大交易价值。如果您的交易价值超过此值，它也会返回上述错误。默认为 2,500 英镑，但可以通过联系 WorldPay 来增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:29:53.443

我认为在您的 Worldpay 管理部分中，您可以指定您接受哪些卡。您似乎已将支付网关配置为不接受 VISA 信用卡。我建议检查一下然后尝试。

# javascript - Wso2 JAGGERY 出版商

> ID：12296825
> 
> 赞同：0
> 
> 时间：2012-09-06T09:19:50.553
> 
> 标签：javascript, wso2, wso2carbon, javascript-framework, jaggery-js

我想对我的发布者信息页面进行一些修改：

当我去浏览>API信息>用户

我想在侧面展示那个api的用法，比如

* * *

**名称 - 订阅日期 - 使用**

## 用户 - 2012-09-06 10:05:00.085 - 12

我应该修改什么文件来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:52:31.910

api-info 页面模板位于

站点/主题/fancy/templates/api/api-info/template.jag [1]

[1] [https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/api-store-web/src/site/themes/fancy/templates/api/api -info/template.jag](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/api-store-web/src/site/themes/fancy/templates/api/api-info/template.jag)

问候，/女娲

# c# - 在 Silverlight 中使用图像作为按钮。为什么我的 mouseOver 方法不起作用？

> ID：12296826
> 
> 赞同：0
> 
> 时间：2012-09-06T09:19:53.957
> 
> 标签：c#, silverlight, xaml, button, storyboard

我想使用图像在 Silverlight 中创建一个具有基本效果的按钮，以使按钮看起来可点击。我创建了一个 .png 图标并编写了一些代码，以使该图像在情节提要中的鼠标悬停时稍大一些。这是我第一次尝试做这样的事情，所以我假设我遗漏了对其中一个静态资源的简单调用。我错过了什么？：

```
<Style TargetType="Button"
                 x:Key="styleA">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid x:Name="RootElement"
                            Background="Transparent">
                            <Grid.Resources>
                                <Storyboard x:Key="MouseOver State">
                                    <DoubleAnimation Storyboard.TargetName="buttonScale"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="1.2"
                                                Duration="00:00:00.25"/>
                                    <DoubleAnimation Storyboard.TargetName="buttonScale"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="1.2"
                                                Duration="00:00:00.25" />
                                </Storyboard>

                                <Storyboard x:Key="Normal State">
                                    <DoubleAnimation Storyboard.TargetName="buttonScale"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="1"
                                                Duration="00:00:00.25" />
                                    <DoubleAnimation Storyboard.TargetName="buttonScale"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="1"
                                                Duration="00:00:00.25" />
                                </Storyboard>

                                <Storyboard x:Key="Pressed State">
                                    <DoubleAnimation Storyboard.TargetName="buttonScale"
                                                Storyboard.TargetProperty="ScaleX"
                                                To="1.4"
                                                Duration="00:00:00.25" />
                                    <DoubleAnimation Storyboard.TargetName="buttonScale"
                                                Storyboard.TargetProperty="ScaleY"
                                                To="1.4"
                                                Duration="00:00:00.25" />
                                </Storyboard>

                            </Grid.Resources>
                            <ContentPresenter Content="{TemplateBinding Content}"
                                           RenderTransformOrigin="0.5,0.5">
                                <ContentPresenter.RenderTransform>
                                    <ScaleTransform x:Name="buttonScale" />
                                </ContentPresenter.RenderTransform>
                            </ContentPresenter>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>

            </Setter>
        </Style> 
```

如您所见，一个足够简单的故事板。现在，当我实现我的按钮时，什么也没有发生。我究竟做错了什么？这是我创建按钮的代码：

```
 <StackPanel>
        <Button Width="50"
           x:Name="Test"
           Style="{StaticResource styleA}">
            <StackPanel Orientation="Vertical">
                <Image Source="test.png" />
                <TextBlock Text="Please get bigger" />
            </StackPanel>
        </Button>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:27:35.633

你看过[按钮样式和模板](http://msdn.microsoft.com/en-us/library/cc278069%28v=vs.95%29.aspx)吗？您需要将这些情节提要放在 a`VisualStateManager.VisualStateGroups`中，如下所示：

```
<ControlTemplate TargetType="Button">
    <Grid x:Name="RootElement" Background="Transparent">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="MouseOver">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="buttonScale" Storyboard.TargetProperty="ScaleX" To="1.2" Duration="00:00:00.25"/>
                        <DoubleAnimation Storyboard.TargetName="buttonScale" Storyboard.TargetProperty="ScaleY" To="1.2" Duration="00:00:00.25" />
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="buttonScale" Storyboard.TargetProperty="ScaleX" To="1.4" Duration="00:00:00.25" />
                        <DoubleAnimation Storyboard.TargetName="buttonScale" Storyboard.TargetProperty="ScaleY" To="1.4" Duration="00:00:00.25" />
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Normal"/>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <ContentPresenter Content="{TemplateBinding Content}" RenderTransformOrigin="0.5,0.5">
            <ContentPresenter.RenderTransform>
                <ScaleTransform x:Name="buttonScale" />
            </ContentPresenter.RenderTransform>
        </ContentPresenter>
    </Grid>
</ControlTemplate> 
```

# c# - 如何使用 SQL Server 为 C# Windows 应用程序创建安装包

> ID：12296830
> 
> 赞同：0
> 
> 时间：2012-09-06T09:20:02.737
> 
> 标签：c#, visual-studio-2010, sql-server-2008, installation

我想使用 C# 和 SQL server 2008 开发一个 Windows 数据驱动应用程序。但是我不知道在开发完整的应用程序之后如何创建设置文件（注意：我知道如何使用 Visual Studio 创建设置。但是这样安装文件不包括 SQL Server 代理，也可能是 .Net 框架），其中包含所有必需的程序集和文件，包括 SQL Server 和 .Net 框架。

意味着我想要安装的安装文件：

1.  Windows 应用程序
2.  .Net 框架
3.  仅用于连接的 SQL 服务器

另一个问题是如何解决连接字符串的问题，因为在安装 SQL Server 时，实例名称可能是用户特定的，这意味着它可能与我的 app.config 文件连接字符串数据源名称不同。

请建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:51:29.437

我正在使用 install shield，它允许您使用用户看不到的一些参数自定义 sql server 设置，正在使用的是

```
/ACTION=Install /FEATURES=SQLENGINE /INSTANCENAME=SQLEXPRESS /SQLSVCACCOUNT="NT AUTHORITY\SYSTEM"  /ADDCURRENTUSERASSQLADMIN=True 
```

您可以指定所有实例名称....，您也可以通过添加来进行后台设​​置`/q`，更多参数请参见[http://msdn.microsoft.com/en-us/library/ms144259(v=sql.100) .aspx](http://msdn.microsoft.com/en-us/library/ms144259(v=sql.100).aspx)

![在此处输入图像描述](../Images/75bfd7285d2df5097e80aa6342cca3c7.png)

# wcf - 使用 ref 和 out 参数动态调用 WCF 服务

> ID：12296832
> 
> 赞同：0
> 
> 时间：2012-09-06T09:20:12.757
> 
> 标签：wcf, dynamic

我浏览了以下参考资料，发现可以动态调用 WCF 服务。但是，我无法调用接受参数作为**ref**和**out**的服务（方法） 。

[在没有合约接口的情况下从客户端调用 WCF 服务](http://www.codeproject.com/Articles/328552/Calling-a-WCF-service-from-a-client-without-having#)

[使用 WCF 进行动态编程](http://blogs.msdn.com/b/vipulmodi/archive/2006/11/16/dynamic-programming-with-wcf.aspx)

[动态调用 Web 服务...这次使用 WCF](http://blogs.msdn.com/b/kaevans/archive/2009/01/20/dynamically-invoking-web-services-with-wcf-this-time.aspx)

[在不添加服务引用的情况下调用 WCF 服务。](http://mstecharchitect.blogspot.com/2009/01/invoking-wcf-service-without-service.html)

有没有办法用**ref**和**out**参数进行这样的调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:33:00.217

[在不添加服务引用的情况下调用 WCF 服务。](http://mstecharchitect.blogspot.com/2009/01/invoking-wcf-service-without-service.html)如果我知道合同，工作会更好。所以我首先添加了网络引用，将生成的代理复制到实际项目中，然后删除了网络引用，并简单地将方法称为

```
 BasicHttpBinding binding = new BasicHttpBinding();
            EndpointAddress epAddr = new EndpointAddress("http://192.168.0.233/GMS/GMSService.svc");
            GMSContract.IGMSService _interface = ChannelFactory<GMSContract.IGMSService>.CreateChannel(binding, epAddr);         
...
            bool r = _interface.MyGMSMethod(..., ref ..., out ..., out ...); 
```

# mysql - 执行准备好的语句时过程静默终止

> ID：12296833
> 
> 赞同：3
> 
> 时间：2012-09-06T09:20:13.173
> 
> 标签：mysql, stored-procedures, prepared-statement

## 问题

我有一个存储过程：

```
CREATE PROCEDURE `ProblematicProcedure` (IN dbName varchar(50), IN tableId INT)
    MODIFIES SQL DATA
BEGIN
    DROP VIEW IF EXISTS v1;
    DROP VIEW IF EXISTS v2;

    CALL ExecuteSql(CONCAT("CREATE VIEW v1 AS SELECT * FROM ",dbName,".my_table;"));
    CALL ExecuteSql(CONCAT("CREATE VIEW v2 AS SELECT * FROM ",dbName,".table_",tableId,";"));

    ... 
```

当直接从命令行或 Navicat 或 HeidiSql 等客户端调用时，它**运行良好**：

```
CALL ProblematicProcedure("my_schema",1); 
```

但是，如果使用上面完全相同的行**从自定义 Apache 模块**调用，它会在第一次调用时**崩溃。**`ExecuteSql`当从 Apache 模块调用时，我必须让它工作并且找不到崩溃的原因。

## `ExecuteSql`定义

```
CREATE PROCEDURE ExecuteSql (IN sql_str TEXT)
BEGIN
    SET @query = sql_str;
    PREPARE stm FROM @query;
    EXECUTE stm;
    DEALLOCATE PREPARE stm;
END 
```

## 我试过什么？

*   换了两个`ExecuteSql`电话。
*   内联`ExecuteSql`调用。
*   删除's 并使用带有硬编码和值`ExecuteSql`的直接 SQL 语句。`dbName``tableId`
*   创建没有`MODIFIES SQL DATA`.
*   授予`CREATE VIEW`特权：`GRANT ALL ON *.* TO 'myuser'@'%';`

**注意：**我在行之间添加了简单的插入语句以查找崩溃的位置。所以，我确信它总是在第一次`ExecuteSql`通话时崩溃。

## 问题

**这次崩溃的原因是什么？**

**更新**：最后，我设法找到错误代码：

> **错误 1312：**过程无法在给定的上下文中返回结果集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:35:44.257

# 解决方案

连接时使用**`CLIENT_MULTI_STATEMENTS`**标志：

```
mysql_real_connect(conn, host, user, pass, db, 0, NULL, CLIENT_MULTI_STATEMENTS); 
```

* * *

# 为什么会这样？

调用存储过程意味着执行多个语句。所以，我需要指定我可以一次执行多个语句。因此，我在客户端（*在我的 Apache 模块中*）使用 MySql C API 函数，我需要**`CLIENT_MULTI_STATEMENTS`**在连接时指定标志：

```
mysql_real_connect(conn, host, user, pass, db, 0, NULL, CLIENT_MULTI_STATEMENTS); 
```

或者稍后设置：

```
mysql_set_server_option(MYSQL_OPTION_MULTI_STATEMENTS_ON); 
```

我从**[多语句执行的 C API 处理](http://www.cs.duke.edu/csl/docs/mysql-refman/apis.html#c-api-multiple-queries)**页面中学到了这些。

* * *

# 我是如何调试的？

调试存储过程并不容易。我使用了传统的日志表方法，但在查找错误代码方面表现得有些激进。

**首先**，定义了两个变量来保存发生错误的代码和消息：

```
DECLARE E INT  DEFAULT 0;    -- error code
DECLARE M TEXT DEFAULT NULL; -- error message 
```

**然后，为**[客户端](http://dev.mysql.com/doc/refman/5.5/en/error-messages-client.html)和[服务器](http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html)错误定义了可能的错误代码和消息（[**此处为完整列表**](https://gist.github.com/3656288)）：

```
DECLARE CONTINUE HANDLER FOR 1000 SET E='1000', M="hashchk";
DECLARE CONTINUE HANDLER FOR 1001 SET E='1001', M="isamchk";
...
...
DECLARE CONTINUE HANDLER FOR 1312 SET E='1312', M="PROCEDURE %s can't return a result set in the given context";
...
...
DECLARE CONTINUE HANDLER FOR 1638 SET E='1638', M="Non-ASCII separator arguments are not fully supported";
DECLARE CONTINUE HANDLER FOR 1639 SET E='1639', M="debug sync point wait timed out";
DECLARE CONTINUE HANDLER FOR 1640 SET E='1640', M="debug sync point hit limit reached";
...
...
DECLARE CONTINUE HANDLER FOR 2057 SET E='2057', M="The number of columns in the result set differs from the number of bound buffers. You must reset the statement, rebind the result set columns, and execute the statement again"; 
```

**最后**，将日志放在关键点：

```
IF E> 0 THEN
    CALL WriteLog(CONCAT("Error ", E, ": ", M));
END IF; 
```

`WriteLog`是另一个只插入日志表的过程。这种方法给了我错误代码（`1312`），然后一些谷歌搜索工作。

# c# - 传递方法的签名并在另一个相同类型的对象上调用它

> ID：12296834
> 
> 赞同：0
> 
> 时间：2012-09-06T09:20:23.890
> 
> 标签：c#, methods, delegates

我想传递一个方法并存储它。假设该方法采用一个 int 并返回 void。我会将它包装在 Action< int > 中。

现在，有没有一种方法可以调用该方法，但不是调用它源自的对象，而是同一类的不同实例？

比这更具体有点困难，但请询问是否有任何令人困惑的地方，我会再试一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:23:15.687

> 现在，有没有一种方法可以调用该方法，但不是调用它源自的对象，而是同一类的不同实例？

编辑：好的，忽略我的第一次尝试。我以为你在谈论不同的*课程*。

听起来您实际上应该将方法包装在一个`Action<object, int>`（或更强类型的版本）中。

或者，您可以使用以下方法创建新委托：

```
Action<int> newAction = (Action<int>) Delegate.CreateDelegate(typeof(Action<int>),
                                          newTarget,
                                          oldAction.Method); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:22:53.203

您可以使用采用参数类型的[Type.GetMethod 重载。](http://msdn.microsoft.com/en-us/library/6hy0h0z1.aspx)这使您可以使用指定的参数类型获得确切的方法。

# mediawiki - 我们可以直接将图像复制到 MediaWiki 图像文件夹吗？

> ID：12296835
> 
> 赞同：0
> 
> 时间：2012-09-06T09:20:25.823
> 
> 标签：mediawiki

我正在为 MediaWiki (XAMPP) 运行本地主机网络服务器。

通常，上传特殊页面用于上传图像。这些图像存储在 WIKI_HOME/images 文件夹中，并且在数据库中插入了一些记录。

我在本地机器上使用这个 wiki 并且仅供我自己使用。我需要速度，所以我尝试将图像复制到 WIKI_HOME/images 而不是使用上传扩展上传它。但它没有出现在 wiki 中。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:49:09.970

[您可以使用UploadLocal 扩展](http://www.mediawiki.org/wiki/Extension%3aUploadLocal)或[importImages.php 脚本](http://www.mediawiki.org/wiki/Manual%3aImportImages.php)从本地服务器批量上传图像。您可以设置 importImages.php 以定期运行以导入特定文件夹中的任何图像。

# arrays - Python 新手 - 超级简单的东西！（阅读清单等）

> ID：12296837
> 
> 赞同：0
> 
> 时间：2012-09-06T09:20:27.680
> 
> 标签：arrays, list, loops, for-loop, while-loop

我是 Python 新手，我想制作一个程序，要求用户输入 3 个字母和一个字符串。然后它将打印出以三个字母开头的字符串的所有字母...例如

```
Three letters: ABC
Text: A beautiful caterpillar crossed the great bridge owned by anthony bishop canister
A beautiful caterpillar
anthony bishop canister 
```

我的代码目前...

```
ipt1 = raw_input("Three letters: ") ## Asks for three letters
ipt2 = raw_input("Text: ") ## Asks for text
ipt1_split = ipt1.split() ## Converts three letters to list
ipt2_split = ipt2.split() ## Converts text to list 
```

我不知道在此之后该怎么做，我不确定这是否可以使用 python，如果有人可以为我完成代码，那就太好了，我正在考虑制作一个 foo 循环扫描文本并不确定之后要做什么。任何帮助将不胜感激。顺便说一句，这是使用 Python。

我正在写一本书，出于特定原因，这将在此过程中有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:42:49.943

您必须遍历所有单词，然后遍历所有字母，然后检查单词是否以字母开头，如下所示：

```
ipt1 = raw_input("Three letters: ") ## Asks for three letters
ipt2 = raw_input("Text: ") ## Asks for text
ipt1_split = ipt1.split() ## Converts three letters to list
ipt2_split = ipt2.split() ## Converts text to list

for word in ipt2_split:
    for letter in ipt1_split:
        if word.startswith(letter):
            print word 
```

# html - Magento - container1 和 container2 的拆分选项

> ID：12296845
> 
> 赞同：6
> 
> 时间：2012-09-06T09:20:47.357
> 
> 标签：html, magento, magento-1.7, php

在默认布局中，选项和添加到购物车按钮由

```
<?php echo $this->getChildChildHtml('container1', '', true, true) ?> 
```

我想将可配置选项从添加到购物车和数量字段中拆分出来，以将它们显示在我布局中的不同位置。有什么想法或准备好使用的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-10T16:02:02.420

你可以很容易地拆分它（但我花了很多时间来找到它:)） - 如果你查看**公共函数 getChildChildHtml的****app/code/core/Mage/Core/Block/Abstract.php**到 PHPDoc ，你会看到第二个参数确定了子块名称。因此，您可以在价格块渲染之前先调用

 **```
<?php echo $this->getChildChildHtml('container1', 'product.info.options.wrapper', true, true) ?> 
```

并在价格块呈现后，调用

```
<?php echo $this->getChildChildHtml('container1', 'product.info.options.wrapper.bottom', true, true) ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T23:22:14.713

虽然您的最终解决方案将取决于这些块需要在布局中移动/插入的位置，但您绝对可以将“添加到购物车”`product.info.options.wrapper.bottom`从可配置选项中分离出来，`product.info.container1`或者`product.info.container2`像这样：

```
<catalog_product_view>
    <reference name="product.info.container1">
        <action method="unsetChild"><name>product.info.options.wrapper.bottom</name></action>
    </reference>
    <reference name="product.info.container2">
        <action method="unsetChild"><name>product.info.options.wrapper.bottom</name></action>
    </reference>
</catalog_product_view> 
```

然后单独显示“添加到购物车”按钮的最简单方法是注释掉`catalog/product/view.phtml`允许显示`product.info.addtocart`块的条件，无论产品是否具有选项：

```
<?php if (!$this->hasOptions()): // Remove this condition ?>
    <div class="add-to-box">
        <?php if($_product->isSaleable()): ?>
            <?php echo $this->getChildHtml('addtocart') ?>

            ...

        <?php endif; ?>
    </div>

    ...

<?php endif; ?> 
```

希望这可以帮助您了解这些块的结构。可能有用的其他资源：

*   [Magento 产品视图页面中的 container1 和 container2 是什么？](https://magento.stackexchange.com/q/9271/20131)
*   [如何纯粹通过 local.xml 移动面包屑块？](https://magento.stackexchange.com/q/3637/20131)**

# apache - .htaccess 正则表达式 url 重定向

> ID：12296846
> 
> 赞同：4
> 
> 时间：2012-09-06T09:20:48.073
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我正在寻找 .htaccess 文件的正则表达式，我可以在其中将一个 URL 重定向到另一个。

URL1：/dir/an-article-title- **222**

URL2: /dir/ **222** /an-article-title

我希望将 URL1 到 301 重定向到 URL2。

在高级语言中，我想我想告诉 .htaccess ：

1.  取最后一个破折号 (-) 后的数字
2.  将这些数字放在文章名称之前，并带有斜杠，即 222/
3.  从文章名称中删除最后一个破折号和数字

欢迎任何想法，建议，代码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:38:34.750

尝试使用此规则：

```
RewriteEngine on
RewriteRule ^dir/([^/]+)-([0-9]+)$ /dir/$2/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:30:51.793

> > 重写规则 ^/dir/([\w\d-]*)-([\d]+)$/ /dir/$2/$1 [L,R=301]

试试这个，记住这个正则表达式**的文章标题**允许 az、0-9 和 -，对于更多字符编辑部分**[\w\d-]**

# javascript - 正在寻找一种跨移动浏览器兼容的方式从内置麦克风录制？

> ID：12296850
> 
> 赞同：0
> 
> 时间：2012-09-06T09:20:51.160
> 
> 标签：javascript, html, audio, microphone, mobile-browser

我想制作一个非常简单的网络应用程序，它从手机的麦克风中获取音频信号，并尽可能接近实时地改变页面上的一些简单图形。

我希望该应用程序是基于网络的（而不是 iOS/Android 应用程序），以便用户可以更快地被引导到页面。（即转到 sh.ort/url 并立即启动网络应用程序）

这目前可能吗？

我不确定网络音频 API 的支持程度，或者一些更现代的 HTML5 功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:26:43.517

这为您提供了有关如何通过 HTML5 API 录制音频的精彩教程：http: [//www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

不幸的是，正如本文所见，Apple 尚不支持任何 API：[Mobile Safari Audio Recording from Microphone](https://stackoverflow.com/questions/6296705/mobile-safari-audio-recording-from-microphone)

# asp.net - 如何在 ASP.NET 中向部分类添加数据注释？

> ID：12296851
> 
> 赞同：2
> 
> 时间：2012-09-06T09:20:51.147
> 
> 标签：asp.net, vb.net, data-annotations

这是我的课：

```
Imports System.ComponentModel.DataAnnotations

Public Class Class1
Public Property id As Integer

<Required(ErrorMessage:="First Name is required.")> _
<Display(Name:="fname")> _
<MaxLength(10)> _
Public Property fname As String

<Required(ErrorMessage:="Last Name is required.")> _
<Display(Name:="lname")> _
<MaxLength(12)> _
Public Property lname As String

<Range(100000, 1200000)>
Public Property salary As Decimal
End Class 
```

是否可以在 ASP.NET WebForms 的部分类中使用数据注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:26:52.080

您需要使用完整的 MVC 架构。这是您的模型，您可以将其作为参数传递给局部视图。

MVC 和部分视图上有很多教程 - 试试这个[http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)或任何官方 MVC 教程

Stack Overflow 上也有很多例子。

祝你好运

# android - 如何在 Libgdx 中绘制中心渐变

> ID：12296853
> 
> 赞同：2
> 
> 时间：2012-09-06T09:21:11.977
> 
> 标签：android, opengl-es, libgdx

如何在android的Libgdx中绘制中心渐变

以下效果

![在此处输入图像描述](../Images/07d34a4862e216e5aa0abf366cced951.png)

我没有熟练使用 Libgdx 的 OpenGL ......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:42:25.253

可能最好的方法是使用透明的 PNG 并从代码上的 Texture 或 TextureAtlas 加载纹理。之后，调整位置（setPosition）和比例（setScale），您将在屏幕上获得类似的效果。

您可以创建圆形、矩形......但渐变。我不这么认为。检查 libGDX 维基。

# c# - 字符串中的子字符串值

> ID：12296854
> 
> 赞同：2
> 
> 时间：2012-09-06T09:21:14.030
> 
> 标签：c#, regex, string, linq

我有一个包含 `[l=9;f=0;r=5;p=2]`. 有可能不止一个：`[l=9;f=0;r=5;p=2],[l=9;f=0;r=6;p=2]`。

我想得到`List`的`Tuple<int,int,int>`，在哪里`item1 = value of l, item2= value of r, item3=value of p`。这样做的最佳方法是什么？
我的代码：

```
 // split string
    var splittedFormatedSeats = Regex.Matches(formatSeats, @"\[.+?\]")
                            .Cast<Match>()
                            .Select(m => m.Value)
                            .ToList();

     IList<Tuple<int,int,int>> fullSeat = new List<Tuple<int, int, int>>();
       foreach (var splittedFormatedSeat in splittedFormatedSeats)
       {

          ...
       } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:33:38.190

我会采取另一种策略。首先，拆分字符串的子组件

```
var components = formatSeats.Split(','); 
```

这将为您提供一个字符串数组。这将更有效地解析小块字符串而不是大字符串。

然后，您可以使用 a`Regex`来提取值或像这样的简单代码：

```
foreach(var component in components)
{
    var parts = component.Trim("[]".ToCharArray()).Split(';');

}

var results = from component in components
              let c = component.Trim("[]".ToCharArray())
                               .Split(';')
                               .Select(c=>int.Parse(c.SubString(2))
              select new { l = c[0], f=c[1], r=c[2], p = c[3] }; 
```

这将产生一个匿名类型的枚举。

```
foreach(var x in results)
{
    Console.WriteLine("{0} / {1} / {2} / {3}", x.l, x.f, x.r, x.p);
} 
```

如果您实际上需要`Tuple`简单地将代码更改为：

```
var results = from component in components
              let c = component.Trim("[]".ToCharArray())
                               .Split(';')
                               .Select(c=>int.Parse(c.SubString(2))
              select new Tuple<int,int,int,int>{ l = c[0], f=c[1], r=c[2], p = c[3] }; 
```

但是，我主张编写一个小结构来简化代码并提高其可读性。

```
public struct MyValue
{
     private readonly int m_L; 
     public int L { get {return m_L; } }

     private readonly int m_F; 
     public int F { get {return m_F; } }

     private readonly int m_R; 
     public int R { get {return m_R; } }

     private readonly int m_P; 
     public int P { get {return m_P; } }

     public MyValue(int l, int f, int r, int p)
     {
         m_L = l;
         m_F = f;
         m_R = r;
         m_P = p;
     }
}
....

var results = from component in components
          let c = component.Trim("[]".ToCharArray())
                           .Split(';')
                           .Select(c=>int.Parse(c.SubString(2))
          select new MyValue(c[0],c[1],c[2],c[3]); 
```

最后，如果字符串总是有这种形式，你可以避免使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:38:02.413

```
 string formattedString = "[l=9;f=0;r=5;p=2],[l=9;f=0;r=6;p=2]";
        var splitString = formattedString.Split(',')
                                    .Select(p => p.Trim(new char[]{'[',']',' '}));

        List<Tuple<int, int, int, int>> tupleList = new List<Tuple<int, int, int, int>>();
        foreach (var item in splitString)
        {
            int[] finalSplit = item.Split(';').Select(p => 
                                                      Convert.ToInt32(p.Substring(p.LastIndexOf('=')+1).Trim())
                                                      ).ToArray();
            tupleList.Add(new Tuple<int, int, int, int>(finalSplit[0], finalSplit[1],
                                    finalSplit[2], finalSplit[3]));
        } 
```

这将拆分 l、f、r 和 p 的值并将它们添加到元组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:35:10.333

您的内部字符串的格式是否始终相同？每个变量（l、f、r 和 p）是否总是一个数字值？

如果是这样，您可以将它们子串出来。

```
foreach(var splittedFormatedSeat  in splittedFormatedSeats)
{
    int x, y, z;
    string s = splittedFormatedSeat .ToString();
    if(int.TryParse(s[3].ToString(), out x) &&
       int.TryParse(s[11].ToString(), out y) &&
       int.TryParse(s[15].ToString(), out z))
       fullSeat.Add(new Tuple<int,int,int>(x,y,z));
} 
```

# android - drainQueueLocked：SurfaceTexture 已被废弃

> ID：12296855
> 
> 赞同：1
> 
> 时间：2012-09-06T09:21:18.480
> 
> 标签：android, database

> drainQueueLocked：SurfaceTexture 已被废弃

单击主要活动上的搜索按钮并输入详细信息时出现此错误

> （itemdetails.java 活动）

从数据库中检索到的项目。有时我根本没有得到这个错误。
我有时也会遇到安全错误，但我想这是另一个问题。

# python - Python matplotlib 线框失真

> ID：12296856
> 
> 赞同：3
> 
> 时间：2012-09-06T09:21:18.867
> 
> 标签：python, matplotlib, plot, geometry, wireframe

我正在尝试使用 matplotlib 创建一个由多个线框球体组成的图。[我在这里](https://stackoverflow.com/questions/11140163/python-matplotlib-plotting-a-3d-cube-a-sphere-and-a-vector)找到了一个代码片段来绘制一个这样的球体，所以我认为只需多次调用 plot_wireframe 就可以很容易地将其扩展到多个球体。我错了。这是一个代码片段：

```
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
u, v = np.mgrid[0:2*np.pi:20j, 0:np.pi:10j]
x=np.cos(u)*np.sin(v)
y=np.sin(u)*np.sin(v)
z=np.cos(v)
fig = plt.figure(figsize=(8,6))
ax = fig.gca(projection='3d')
ax.plot_wireframe(x*3.+5., y*3., z*3.,linewidths=.2)
ax.view_init(azim=30,elev=40)
ax.set_aspect("equal")
plt.show()
fig = plt.figure(figsize=(8,6))
ax = fig.gca(projection='3d')
ax.plot_wireframe(x*3.+5., y*3., z*3.,linewidths=.2)
spheres = [ [0,0,0,1], [3,0,0,1.6] ]
for v in spheres:
    ax.plot_wireframe(x*v[3]+v[0], y*v[3]+v[1], z*v[3]+v[2],linewidths=.2)
ax.view_init(azim=30,elev=40)
ax.set_aspect("equal")
plt.show() 
```

如果您运行该代码，第一个图将显示一个漂亮的球体，而在第二个图中，所有球体都被扭曲和移动。我搜索以确保可以在同一轴上多次调用 plot_wireframe 但找不到任何东西。另外，我是 Python 菜鸟，但我不认为我做错了什么。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:51:39.320

简短回答：手动调整轴限制：

```
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
u, v = np.mgrid[0:2*np.pi:20j, 0:np.pi:10j]
x=np.cos(u)*np.sin(v)
y=np.sin(u)*np.sin(v)
z=np.cos(v)

# I'm not sure what was this for.  
'''
fig = plt.figure(figsize=(8,6))
ax = fig.gca(projection='3d')
ax.plot_wireframe(x*3.+5., y*3., z*3.,linewidths=.2)
ax.view_init(azim=30,elev=40)
ax.set_aspect("equal")

plt.show()
'''

fig = plt.figure(figsize=(8,6))
ax = fig.gca(projection='3d')

ax.plot_wireframe(x*3.+5., y*3., z*3.,linewidths=.2)
spheres = [ [0,0,0,1], [3,0,0,1.6] ]
for v in spheres:
    ax.plot_wireframe(x*v[3]+v[0], y*v[3]+v[1], z*v[3]+v[2],linewidths=.2)
ax.view_init(azim=30,elev=40)

ax.set_xlim([0,7])   # Like so. 
ax.set_ylim([-3,3]) 
ax.set_zlim([-3,3]) 

ax.set_aspect("equal")
plt.show() 
```

# asp.net-mvc - 如何在mvc中过滤性别

> ID：12296859
> 
> 赞同：0
> 
> 时间：2012-09-06T09:21:26.900
> 
> 标签：asp.net-mvc

我想过滤性别。我调用了这个过滤器的所有函数。但它不值得。我想知道性别过滤器的确切调用函数是什么。在一个页面中，有 2 个选项。一种是男性和女性。如果单击 Male 它仅过滤 Male 的。但是在这里，如果我单击男性意味着它会显示男性和女性等成员的总数。

我在存储库中的代码

```
 public IQueryable<Candidate> GetCandidates(string what,string location, string gender)
       {  
        int Gender;
        bool genderSpecified = int.TryParse(gender, out Gender);

          (string.IsNullOrEmpty(gender)||
          ((candidate.Gender.HasValue))) &&
           orderby candidate.createddate ascending
           select candidate);
            } 
```

//在控制器中

```
 IQueryable<Candidate> candidates = _repository.GetCandidates(what, where,  gender);
        ViewData["Filters"] = filters;
        return GetPaginatedCandidates(page, candidates); 
```

这是我的代码。但它没有正确过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:10:41.280

让我们做一些假设，直到问题被更新并从那里开始......使用 EntityFramework、名为“Candidate”的实体、名为“Candiates”的 DbSet 和名为“DataContext”的 EntityFramework 数据上下文定义。

```
public IQueryable<Candidate> GetCandiates(string what, string location, string gender)
{
   return from item in DataContext.Candidates
       where (item.Gender.HasValue && item.Gender == int.parse(gender))
                           || (!item.Gender.HasValue)
       order by item.createddate ascending
       select item;
} 
```

这应该给你一个想法。我没有在 Visual Studio 中启动它，但要检查它是否有效，因为需要设置太多的基础。希望能帮助到你。

# c# - 如何简化我的请求代码？

> ID：12296865
> 
> 赞同：0
> 
> 时间：2012-09-06T09:21:54.267
> 
> 标签：c#, asp.net, entity-framework, ienumerable, html.dropdownlistfor

我使用这部分代码从我的数据库中获取信息，使用实体框架，并将所有信息添加到 IEnumerable 属性中，最后用于显示 DropDownListFor。我需要多次使用这种代码，所以我想让它在一开始就变得最强大。

```
public IEnumerable<SelectListItem> Functions { get
    {
        List<SelectListItem> result = new List<SelectListItem>();
        using (followupconsultantEntities dataModel = new followupconsultantEntities())
        {
            var myEvents = from e in dataModel.functions
                           select e;
            foreach (var function in myEvents)
            {
                SelectListItem myList = new SelectListItem
                                            {
                                                Value = function.ID_Function.ToString(CultureInfo.InvariantCulture),
                                                Text = function.FU_Name
                                            };
                result.Add(myList);
            }
        }
        return result;
    } } 
```

感谢帮助

风景：

```
<div class="editor-field">
<%: Html.DropDownListFor(m => m.SelectedFunction,Model.Functions) %>
</div> 
```

有关信息，我的控制器：

```
public ActionResult Register()
    {
        ViewData["PasswordLength"] = MembershipService.MinPasswordLength;
        return View(new RegisterModel());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:25:41.723

开始使用**[System.Web.Mvc.SelectList](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.108%29.aspx)**。

```
public IEnumerable<SelectListItem> Functions { get
{
    using (followupconsultantEntities dataModel = new followupconsultantEntities())
    {
        return new SelectList(dataModel.functions.ToArray(), "ID_Function", "FU_Name");
    }
} 
```

还要考虑**[AutoMapper](http://automapper.org)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:09:01.137

试试这个。在此代码中，您不会从不需要的数据库数据中获取。

```
public IEnumerable<SelectListItem> Functions { get
{
    using (followupconsultantEntities dataModel = new followupconsultantEntities())
    {
        return new SelectList(dataModel.functions.Select(f=>
               new 
               {
                   Value = function.ID_Function.ToString(CultureInfo.InvariantCulture),
                   Text = function.FU_Name
               })
               .ToArray(), "Value", "Text");
   } 
```

}

# c# - 使用规则引擎改进包含大量条件的用户信誉计算方法

> ID：12296867
> 
> 赞同：0
> 
> 时间：2012-09-06T09:21:57.480
> 
> 标签：c#

我有一种基于许多嵌套条件来计算用户声誉的方法，代码有效，但不是很优雅，声誉是根据一些规则给出的，所以我认为使用规则引擎可以解决问题，但据我所知如果满足条件，规则引擎将返回 TRUE，否则返回 False。在我的情况下，我需要评估两个对象 User 和 Entries 集合，并知道条件为真多少次才能计算获得的积分。

有什么改进算法的想法吗？

```
 /// <summary>
    /// Calculates and updates the user reputation.
    /// </summary>
    /// <param name="user">The user</param>
    public void UpdateReputation(User user)
    {
        user.UserReputations.ToList()
            .ForEach(r => this.UnitOfWork.UserReputations.Delete(r));

        foreach (Entry entry in user.Entries)
        {
            user.UserReputations.Add(new UserReputation()
            {
                Points = 25,
                DateCreated = entry.DateCreated,
                ContentInfo = entry,
                User = user,
                Verb = (int)UserReputationVerbType.EntryPublished
            });

            foreach (Vote vote in entry.Votes)
            {
                if (vote.Positive)
                {
                    user.UserReputations.Add(new UserReputation()
                    {
                        Points = 2,
                        DateCreated = vote.DateCreated,
                        ContentInfo = vote.ContentInfo,
                        User = user,
                        Verb = (int)UserReputationVerbType.UserEntryVotedUp
                    });
                }
                else
                {
                    user.UserReputations.Add(new UserReputation()
                    {
                        Points = -1,
                        DateCreated = vote.DateCreated,
                        ContentInfo = vote.ContentInfo,
                        User = user,
                        Verb = (int)UserReputationVerbType.UserEntryVotedDown
                    });
                }
            }

            foreach (Favourite favouriteEntry in entry.Favourite)
            {
                user.UserReputations.Add(new UserReputation()
                {
                    Points = 5,
                    DateCreated = favouriteEntry.DateCreated,
                    ContentInfo = favouriteEntry.Entry,
                    User = user,
                    Verb = (int)UserReputationVerbType.UserEntryFavourited
                });
            }
        }

        foreach (Favourite favouriteEntry in user.Favourite)
        {
            user.UserReputations.Add(new UserReputation()
            {
                Points = 2,
                DateCreated = favouriteEntry.DateCreated,
                ContentInfo = favouriteEntry.Entry,
                User = user,
                Verb = (int)UserReputationVerbType.EntryFavourited
            });
        }

   (a lot of conditions ...) 
```

# sql-server - 用于树视图控件的 TSQL 查询并从 xml 文件中删除空元素

> ID：12296869
> 
> 赞同：1
> 
> 时间：2012-09-06T09:22:02.050
> 
> 标签：sql-server, tsql, treeview, xquery

查询树视图控件，有时包含由于控件的数据绑定而引发异常的空元素（当元素中没有属性时）文本值设置为“GrandChildOfFirstRow”

我确实通过 xquery 在我的查询中摆脱了它们，但是有没有另一种方法可以做到这一点，或者有一种更好的更聪明的方法来摆脱那些空元素，（我需要左外连接来获得这个查询的正确记录）或者是可以将 xquery 代码组合成更短的代码：

询问：

```
 declare @x as xml
     set @x =
    (
    SELECT distinct  
    Table1.AssetObjID, Table1.Asset_ID , Table1.FromLR, Table1.AssetType + ', ' + Table1.StreetName + ', ' +  Table1.FromMunicNo   as FirstRow,
    Table2.ACIObjID ,Table2.PAssetObjID, Table2.Feature_ID + ', ' + Table2.FeatureName   AS ChildOfFirstRow,
    Table3.ITMObjID  ,Table3.Item_ID + ',' + Table3.[DESC] as GrandChildOfFirstRow
    FROM  Table1 left outer join 
    Table2 ON Table1.AssetObjID = Table2.PAssetObjID left outer join 
    Table3 ON Table1.AssetObjID = Table3.AssetObjID AND Table2.ACIObjID = Table3.ACIObjID
    where Table1.AssetType ='xxxx' 

    for xml auto,root('xml')
    )    

--what it does is it only grabs one empty element and deletes only occurrences of that           

--specific element for the whole file 
--so If I have 2 or more elements which are empty in an xml file 
--I will have to repeat that code each time

    SET @x.modify('delete //*[not(node()) and not(./@*)]')
    SET @x.modify('delete //*[not(node()) and not(./@*)]') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:15:23.607

您可以使用`for xml path()`和构建具有相关子查询的嵌套级别。

```
select Table1.AssetObjID as "@AssetObjID",
       Table1.Asset_ID as "@Asset_ID",
       Table1.FromLR as "@FromLR",
       Table1.AssetType + ', ' + Table1.StreetName + ', ' +  Table1.FromMunicNo   as "@FirstRow",
       (
       select Table2.ACIObjID as "@ACIObjID",
              Table2.PAssetObjID as "@PAssetObjID",
              Table2.Feature_ID + ', ' + Table2.FeatureName   AS "@ChildOfFirstRow",
              (
              select Table3.ITMObjID as "@ITMObjID",
                     Table3.Item_ID + ',' + Table3.[DESC] as "@GrandChildOfFirstRow"
              from Table3
              where Table1.AssetObjID = Table3.AssetObjID and 
                    Table2.ACIObjID = Table3.ACIObjID
              for xml path('Table3'), type
              )
       from Table2
       where Table1.AssetObjID = Table2.PAssetObjID
       for xml path('Table2'), type
       )
from Table1
where Table1.AssetType = 'xxxx'
for xml path('Table1'), root('xml') 
```

# sql - 如何确定在 INSERT 中导致重复输入错误的表行？

> ID：12296870
> 
> 赞同：1
> 
> 时间：2012-09-06T09:22:02.893
> 
> 标签：sql, sql-server, sql-server-2005, error-handling, foreign-key-relationship

*当我得到很多试图帮助我解决错误的答案时：我最感兴趣的是**一种进行错误处理和检测表行创建错误**的方法，而不是解决我只用来说明什么的实际问题在存储过程中编码。*

* * *

我正在为表中缺少的条目在存储过程中执行 SQL 插入语句：

```
INSERT INTO dbo.t1
                      (col1, col2, col3, col4, col5)
    SELECT DISTINCT col1, col2, col3, col4, col5
    FROM         dbo.t2
    WHERE     (NOT EXISTS
                          (SELECT     col1, col2, col3, col4, col5
                            FROM      t1 AS Table_1
                            WHERE     (col1 = t2.col1) AND 
                                      (col2 = t2.col2) AND
                                      (col3 = t2.col3) AND
                                      (col4 = t2.col4) AND
                                      (col5 = t2.col5))) AND
                                       col2 = 'VALUE' 
```

t1.col1 + t1.col2 和 t1.col3 + t1.col4 与另一个表 t3.col1 + t3.col2 具有外键关系

存储过程未能完成抛出外键关系已被违反的错误消息；即 t3 中缺少一些条目：

> 消息 547，级别 16，状态 0 [...] INSERT 语句与 FOREIGN-KEY [..] 冲突

**我想知道的是 t2 的 TABLE ROW 导致错误**，最好是该行中的值。我在 Google 上搜索了很多关于 SQL 错误处理的信息，但只找到了提供引发错误的编码行的示例——这对我来说是无用的信息......

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:30:58.660

该错误非常明显，它看起来像是您试图在具有 FK 约束的列中插入一个值，该值在引用表的主键列中找不到。

从您发布的查询中，您尝试插入`dbo.t2`第一个表中不存在的所有值。然后，您可以使用[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)运算符仅插入在`col1, col2, col3, col4, col5`中找到的值，这些值在以下`dbo.t2`内容中不存在`dbo.t1`：

```
INSERT INTO dbo.t1
                  (col1, col2, col3, col4, col5)
SELECT * FROM
(
    SELECT col1, col2, col3, col4, col5
    FROM         dbo.t2
    EXCEPT 
    col1, col2, col3, col4, col5
    FROM         dbo.t1
) 
```

这样，您将保证仅`dbo.t1`插入不存在的行。

如果您想获取导致重复条目的数据，您可以使用`INTERSECT`来获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:30:48.617

```
INSERT INTO dbo.t1(col1, col2, col3, col4, col5)
SELECT DISTINCT col1, col2, col3, col4, col5
FROM dbo.t2 left join dbo.t1
on t2.col1=t1.col1 and
   t2.col2=t1.col2 and
   t2.col3=t1.col3 and
   t2.col4=t1.col4 and
   t2.col5=t1.col5 
where t1.col1 is null and t1.col2 is null and t1.col3 is null and t1.col4 is null and t1.col5 is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:32:03.820

我认为有可能，`t2`您的行中的值不存在于`t3`. （这就是违反引用的原因。）

确保它`t2`只有存在于`t3`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:33:22.383

您可以尝试在数据上使用**INNER JOIN**来删除违规行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T09:35:08.300

尝试使用**NOT IN**

```
 INSERT INTO TABLE_2  
 (id, name) SELECT t1.id,  t1.name   
  FROM TABLE_1 t1  WHERE t1.id NOT IN (SELECT id                        FROM TABLE_2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T10:00:36.103

```
SELECT column1, column2, column3
FROM Table2 T2
LEFT JOIN  Table1 T1 ON T1.col1 = T2.column1 and T1.col2 = T2.column2 and T1.col3=T2.column3
WHERE T1.col1 IS NULL and T1.col2 IS NULL and T1.col3 IS NULL 
```

# java - 微调器值是动态变化的，取决于数据库

> ID：12296872
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:22:12.847
> 
> 标签：java, android, sharedpreferences

嗨，我必须开发一个应用程序..在这里我必须更新我的 mysql 数据库中的微调器值..

例如：![地位](../Images/b67d80f05bf0a279d628f028d5ed4fcc.png)....这里我必须第一次运行应用程序总是只显示 Q..这里我必须在我必须运行应用程序后将状态 Q 更新为 C 意味着自动显示状态 C....如何我可以开发这个吗？为什么总是显示 Q...我如何在此处管理代码。这里我使用了下面的代码。

```
 private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();

    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

} 
```

我该如何开发这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:33:54.827

我不知道它到底是你想要的。我是如何管理这个的，而不是保存选定的项目，只获取 selectedItemPosition

```
int selectedIndex = spinner.getSelectedItemPosition(); 
```

当你想从数据库设置微调项时，只需获取索引，比如说

```
int SavedIndex = FetchSavedSpinnerIndex(); 
```

现在将您的微调器的项目设置为

```
spinner.setSelection(SavedIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:20:12.603

```
if(list.contains(DATABASE.FETCH()))
   spinner.setSelection(list.indexOf(DATABASE.FETCH())); 
```

DATABASE.FETCH() 是您从数据库中获取数据 (C) 的方法。

# silverlight - Silverlight WriteableBitmap 未正确转换自定义字体

> ID：12296887
> 
> 赞同：1
> 
> 时间：2012-09-06T09:23:03.630
> 
> 标签：silverlight, canvas, embedded-fonts, writeablebitmap

我们使用自定义字体来表示我们在图表上绘制的道路标志和形状。

最初，我将所有内容绘制到画布上，效果很好，但水平滚动很慢。

然后我通过使用 WriteableBitmap 将画布转换为图像来解决滚动问题，如下所示：

```
#if SILVERLIGHT
    ImageSource ConvertCanvas(Canvas canvas) {

        WriteableBitmap Source = new WriteableBitmap(canvas, /* transform = */ null);

        Source.Invalidate();

        return Source;
    }
#endif 
```

这种转换对画布上的大多数元素都适用，除了使用自定义字体的 TextBlocks。

因此，我得到的不是正确的“自定义字体”图像（字符），而是正常的 Arial 字符，例如“p”、“q”等……

如果我再次显示画布而不是转换后的图像，那么我可以确认自定义字体可以正常工作并正确呈现文本块，所以它似乎不是加载问题......

请帮助或提供一些我可以调查的指示...

先感谢您

编辑：

好的，我在[这里](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/abbbf3c1-7970-46f9-9560-661965ae33ed/)找到了一个解决方案，它可以归结为 1\. 在进行转换之前创建一个使用该字体的隐藏文本块，或者 2\. 创建一个 FontSource。

我使用了第一个，因为它现在更简单。

在控件内部，我添加了以下内容：

```
void Grid_Loaded(object sender, RoutedEventArgs e) {
#if SILVERLIGHT
        Grid Grid = (Grid)sender;
        AddFontLoaderTextBox(Grid, "Signs Road Features");
        AddFontLoaderTextBox(Grid, "Signs G Old");
        AddFontLoaderTextBox(Grid, "Signs G");
        AddFontLoaderTextBox(Grid, "Signs G1");
        AddFontLoaderTextBox(Grid, "Signs G2");
        AddFontLoaderTextBox(Grid, "Signs G3");
        AddFontLoaderTextBox(Grid, "Signs Info");
        AddFontLoaderTextBox(Grid, "Signs Regulatory");
        AddFontLoaderTextBox(Grid, "Signs Regulatory1");
        AddFontLoaderTextBox(Grid, "Road Manager");
        AddFontLoaderTextBox(Grid, "Signs Temporary");
        AddFontLoaderTextBox(Grid, "Road Manager");
        AddFontLoaderTextBox(Grid, "Signs Warning");
        AddFontLoaderTextBox(Grid, "Signs Warning1");
#endif
    }

#if SILVERLIGHT
    void AddFontLoaderTextBox(Grid Grid, string fontName) {

        TextBlock TextBlock = new TextBlock();
        TextBlock.FontFamily = new FontFamily(string.Format(
            "pack://application:,,,/ITIS.Controls.LinearViewer.Silverlight;component/Fonts/{0}.ttf#{0}", fontName));
        TextBlock.Opacity = 0; /* hide the text block, we only load it for the font to be cached */
        Grid.SetRowSpan(TextBlock, 3); /* just to ensure the text block doesn't affect the size of the first row */
        Grid.Children.Insert(0, TextBlock); /* keep underneath other children */
    }
#endif 
```

# c++ - Is there anytthing different with the size() and length() of std::string

> ID：12296896
> 
> 赞同：2
> 
> 时间：2012-09-06T09:23:31.393
> 
> 标签：c++, string

> **Possible Duplicate:**
> [std::string length() and size() member functions](https://stackoverflow.com/questions/905479/stdstring-length-and-size-member-functions)

In my opinion size() and length() both mean the length of characters stored in the string.Is there anyting different with them.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:25:13.840

不，它们是相同的。参见 C++11、21.4.4/3：

> `size_type length() const noexcept;`
> 
> 回报：`size()`。

# java - 单击时如何更改链接颜色（Struts2 jquery 链接）？

> ID：12296903
> 
> 赞同：0
> 
> 时间：2012-09-06T09:24:04.343
> 
> 标签：java, jquery, html, struts2, struts2-jquery

我在我的应用程序中使用 struts2-jquery-plugin-3.2.1。我正在使用链接，现在我想更改所选链接的颜色。请分享您的想法。先感谢您。

```
<s:url id="ajax" action="OpenCustomAddedRoutines1" escapeAmp="false">
           <s:param name="rid" value="routineId"></s:param>
           <s:param name="DayCount" value="dayCount"></s:param>
</s:url>
<sj:a href="%{ajax}" button="true" targets="buttonDiv"></sj:a> 
```

# ios - 附件ButtonTappedForRowWithIndexPath：没有被调用

> ID：12296904
> 
> 赞同：35
> 
> 时间：2012-09-06T09:24:11.580
> 
> 标签：ios, objective-c, uitableview, accessoryview

我正在创建一个使用数组填充的详细信息披露按钮。但是，在我的类中没有调用 accessoryButtonTappedForRowWithIndexPath: 函数。它是一个`TableviewDelegate`和`TableviewDatasource`委托。

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"reaching accessoryButtonTappedForRowWithIndexPath:");
    [self performSegueWithIdentifier:@"modaltodetails" sender:[self.eventsTable cellForRowAtIndexPath:indexPath]];
} 
```

NSLog 没有打印到控制台，这让我相信该函数没有被调用......这当然是当我在单元格上选择时。下面的屏幕截图显示了我如何设置单元格。

![在此处输入图像描述](../Images/b9ae75bf7dc01926120ef3111e4c6ec9.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-10T01:14:15.813

该文档说，[`tableView:accessoryButtonTappedForRowWithIndexPath:`](https://developer.apple.com/documentation/uikit/uitableviewdelegate/1614996-tableview)当为 at 处的行设置辅助视图时，不会调用该方法`indexPath`。该方法仅在`accessoryView`属性为时调用，`nil`并且在使用并将`accessoryType`属性设置为显示内置附件视图时调用。

据我了解，`accessoryView`并且`accessoryType`是互斥的。使用`accessoryType`时，系统会`tableView:accessoryButtonTappedForRowWithIndexPath:`按预期调用，但其他情况需要您自己处理。

Apple 执行此操作的方式显示在`Accessory`SDK 的示例项目中。在`cellForRowAtIndexPath`dataSource 委托的方法中，他们将目标/操作设置为自定义附件按钮。由于无法将 传递`indexPath`给动作，因此他们调用辅助方法来检索相应`indexPath`的并将结果传递给委托方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    ...

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    ...

    // set the button's target to this table view controller so we can interpret touch events and map that to a NSIndexSet
    [button addTarget:self action:@selector(checkButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside];
    ...
    cell.accessoryView = button;

    return cell;
}

- (void)checkButtonTapped:(id)sender event:(id)event{
    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self.tableView];
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint: currentTouchPosition];
    if (indexPath != nil){
        [self tableView: self.tableView accessoryButtonTappedForRowWithIndexPath: indexPath];
    }
} 
```

出于某种原因，您的设置似乎属于附件视图案例。您是否尝试过设置`accessoryType`with 代码而不是使用 Interface Builder ？

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-01-07T03:20:50.080

这似乎非常相关......

**披露指示器**：当此元素存在时，用户知道他们可以点击行中的任意位置以查看层次结构中的下一级或与列表项关联的选项。选择行在另一个列表的显示中，在一行中使用公开指示符。不要使用披露指标来透露有关列表项的详细信息；相反，为此目的使用详细信息披露按钮。

**详细信息披露按钮**：用户点击此元素可查看有关列表项的详细信息。（请注意，您可以在除表视图之外的视图中使用此元素，以显示有关某些内容的其他详细信息；有关更多信息，请参阅“详细信息披露按钮”。）在表视图中，使用一行中的详细信息披露按钮来显示有关某事的详细信息列表项。请注意，与披露指示器不同，详细信息披露按钮可以执行与选择行分开的操作。例如，在电话收藏夹中，点击该行会向联系人发起呼叫；点击行中的详细信息披露按钮可显示有关联系人的更多信息。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-03-08T22:23:48.623

将最佳答案转换为 Swift 3：

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    ...
    let unseletcedImage = UIImage(named: "<imagename>")
    let seletcedImage = UIImage(named: "<imagename>")
    let button = UIButton(type: .custom)
    // match the button's size with the image size
    let frame = CGRect(x: CGFloat(0.0), y: CGFloat(0.0), width: CGFloat((unseletcedImage?.size.width)!), height: CGFloat((unseletcedImage?.size.height)!))
    button.frame = frame
    button.setBackgroundImage(unseletcedImage, for: .normal)
    button.setBackgroundImage(seletcedImage, for: .selected)
    cell?.accessoryView = button
    let action = #selector(checkButtonTapped(sender:event:))
    (cell?.accessoryView as? UIButton)?.addTarget(self, action: action, for: .touchUpInside)
    ....
    return cell!

}

@objc func checkButtonTapped(sender: UIButton?, event: UIEvent) {
    let touches = event.allTouches
    let touch = touches!.first
    guard let touchPosition = touch?.location(in: self.tableView) else {
        return
    }
    if let indexPath = tableView.indexPathForRow(at: touchPosition) {
        tableView(self.tableView, accessoryButtonTappedForRowWith: indexPath)
    }
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-07T10:02:27.210

根据 UITableViewCellAccessoryType 的文档，这是预期的行为：

```
typedef enum : NSInteger {    
UITableViewCellAccessoryNone,   
UITableViewCellAccessoryDisclosureIndicator,   
UITableViewCellAccessoryDetailDisclosureButton,   
UITableViewCellAccessoryCheckmark,   
UITableViewCellAccessoryDetailButton } UITableViewCellAccessoryType; 
```

> 常量 UITableViewCellAccessoryNone 该单元格没有任何附件视图。这是默认值。
> 
> UITableViewCellAccessoryDisclosureIndicator 该单元格有一个形状像人字形的附件控件。此控件表示点击单元格会触发推送操作。该控件**不跟踪**触摸。
> 
> UITableViewCellAccessoryDe​​tailDisclosureButton 该单元格有一个信息按钮和一个人字形图像作为内容。此控件指示点击单元格允许用户配置单元格的内容。控制**轨道**触摸。
> 
> UITableViewCellAccessoryCheckmark 该单元格的右侧有一个复选标记。此控件**不跟踪**触摸。表视图的委托可以在其 tableView:didSelectRowAtIndexPath: 方法中管理某一行中的复选标记（可能将复选标记限制为该部分的一行）。
> 
> UITableViewCellAccessoryDe​​tailButton 该单元格有一个没有 V 形的信息按钮。此控件表示点击单元格会显示有关单元格内容的附加信息。控制 **轨道**触摸。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-06T09:57:26.680

您是否只是单击单元格以选择它，还是您实际上单击了单元格上的附件按钮指示器？从你的问题看不清楚。

`accessoryButtonTappedForRowWithIndexPath`当您单击单元格内的按钮图标时适用，而不是当您选择单元格时。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-10T20:57:26.723

画的很到位。

如果您在 Storyboard 中更改为“DetailDisclosure”，则该方法将触发。(xCode 4.6 DP3)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-25T00:25:53.007

这是使用情节提要处理披露按钮的另一种方法。您应该单击表格视图单元格并转到 Connections Inspector。有一个名为 Triggered Segues 的部分，您可以从选择线拖动到您想要 segue 的 UIViewController。segue 将自动发生，您可以捕获 prepareForSegue 以在它发生时捕获通知。
永远不会为显示按钮调用函数 accessoryButtonTappedForRowWithIndexPath。它只被调用详细的披露按钮。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-25T20:54:10.417

当点击详细信息披露按钮时，我的 tableView`accessoryButtonTappedForRowWithIndexPath(…)`没有被调用。我最终发现问题只是没有设置 tableView 委托：

`self.tableView.delegate = self`

# tsql - T-sql 脚本中 $（美元符号）的转义序列

> ID：12296905
> 
> 赞同：3
> 
> 时间：2012-09-06T09:24:15.840
> 
> 标签：tsql, powershell

我正在运行一个从 powershell 脚本调用的 T-SQL 脚本，该脚本包含一个文本行，其中包含一个包含 $(MV) 的序列。

当我运行脚本时，我收到错误“'MV' scripting variable not defined”。我认为这是因为它将 $(MV) 字符串解释为变量而不是文本字符串的一部分。

如何将美元符号写为转义序列？这可能在字符串中吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T14:00:55.233

[您是否使用sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)执行脚本？它将解释 $(variablename) 并尝试扩展它。

您可以使用 -x 命令行选项禁用此功能。

哦，如果您使用[Invoke-Sqlcmd](http://technet.microsoft.com/en-us/library/cc281720.aspx)，您可以使用 -DisableVariables 参数。

我假设您不想完成 sqlcmd 变量替换。如果您只是试图让 $ 通过 Powershell，请使用反引号 (`$)，就像在另一个建议中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:57:19.473

您可以使用反引号字符在 PowerShell 中转义 $ 符号：

```
`$ 
```

# jsonp - 那么，JSONP 还是 CORS？

> ID：12296910
> 
> 赞同：112
> 
> 时间：2012-09-06T09:24:34.873
> 
> 标签：jsonp, cors, asp.net-web-api

我的 WebAPI 部署在*Intranet*环境中。这意味着*安全*不是我关心的问题。

似乎 CORS对客户端*更友好，**更容易实现*。

我可能遗漏的任何其他问题？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-09-06T23:02:02.747

这是一个相当广泛的问题，并且可以保证一个 wiki 本身。google 上也有很多关于这两者的信息，但我想我可以找到几个关键点。

*   如果您的服务器需要只读 ajax 接口，并且需要支持 IE<=9、Opera<12 或 Firefox<3.5 或各种其他较旧或不知名的浏览器，CORS 已淘汰，请使用 JSONP。IE8 和 IE9 sorta 支持 CORS 但有问题，请参阅下面第一条评论中的链接。
*   另一方面，如果您的 Web API 是读/写的（例如完整的 REST 或只是 POST/GET）而不是只读的（即 GET），那么 JSONP 就不行了。使用 CORS。**JSONP 本质上是只读的。**

如果这些都不是问题，我会选择你最容易或最熟悉的东西。如果是折腾，请尝试 CORS，因为它是更“现代”的解决方案，而 JSONP 更像是一种 hack，将数据转换为脚本以绕过跨域限制。然而，CORS 通常需要更多的服务器端配置。

如果您使用 jQuery，我不确定您从哪里想到 CORS“对客户端**更友好且更****易于实现**”。请参阅[https://gist.github.com/3131951](https://gist.github.com/3131951)。jQuery 抽象了 JsonP 的细节，并且根据您使用的技术，在您的服务器端实现 CORS 实际上可能有些棘手。

我最近开发了一个 Web 应用程序，使用 jquery 和 backbone.js，它从我们控制的各种跨域 Web 服务中读取，最终使用 Json-P 而不是 CORS，因为我们需要支持 IE7，而且它在服务器端（我们使用 DjangoRestFramework 运行 Django），与客户端的 jquery 几乎相同。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-15T18:33:48.357

你很准。如果您不必支持旧版浏览器（6 年前发布的浏览器），我肯定会选择 CORS。

CORS 更容易实现，因为如果您的 API 尚不支持 JSONP 或 CORS，则添加一些静态标头比修改响应正文更容易。

使用 CORS 缓存请求也更容易。即使使用 memcached 内容，每个 JSONP 请求也需要是动态的。

JSONP 仍然是一个脚本标签，所以不管它是什么都会引起某种程度的同步行为。CORS 不会。

JSONP 只能是 GET。与 CORS 一样，您可以使用任何方法。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-25T18:05:42.890

最后但同样重要的是，如果您使用的是 jQuery **v1.x**，请考虑在某些常见情况下（例如网络错误），仍然不会为 JSONP 请求调用`error`和`complete`（或更好的`fail`和）处理程序。`always`当然有解决方法（超时设置，jQuery-JSONP 插件），但我发现 CORS 不那么烦人，特别是当跨域请求仅来自移动设备（即混合应用程序）时，因此您不需要支持不幸的浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-03T20:05:44.480

根据 Spring 文档，JSONP 是一种 hack，而不是跨域资源共享的正确解决方案。因此，如果您不关心安全性，那么只需检查您服务器上的域来源并添加 Access-Control-Allow-Origin 响应标头。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-11-19T21:26:04.410

我们的 Web API 无法在带有 Windows 身份验证的 Safari (iOS 9.1) 上运行。它适用于 Safari + iOS 8.4。当我们更改为 JSONP 时，Safari 又开始工作了。检查[此链接](https://blog.algolia.com/jsonp-still-mandatory/)以获取更多信息。

# c# - 正则表达式匹配一个可选的结尾并且更喜欢这样做

> ID：12296913
> 
> 赞同：0
> 
> 时间：2012-09-06T09:24:36.887
> 
> 标签：c#, regex

我对正则表达式不熟悉，并希望匹配这两行：

```
#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
    "#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)\r\n" 
```

到目前为止，我有这个：

```
(\\s+)?(\")?(#)(if\\s+!defined\\(AFX_RESOURCE_DLL\\)\\s+\\|\\|\\s+defined\\()(\\w+)(\\)) 
```

但是，最后一部分给我带来了麻烦：

```
\r\n" 
```

我可以匹配它并使其成为可选的，没问题，这样：

```
(\\r\\n") 
```

但是，如果它在那里，我希望将它捕获在一个组中（我认为我需要贪婪）到目前为止，我所有的尝试都导致它不匹配，因为它是可选的。

我可以强制正则表达式引擎继续搜索，即使它在那里，我可以得到一个捕获组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:33:29.417

你想要这样的东西：

```
string pattern = @"(?<=#if\s+!\s*defined\s*\(\s*AFX_RESOURCE_DLL\s*\)\s*\|\|\s*defined\s*\(\s*)\w+(?=\s*\))";
string result = Regex.Replace(s, pattern, match => Hash(match.Value)); 
```

这给出了这样的输出：

```
#if !defined(AFX_RESOURCE_DLL) || defined(QUZYX1RBUkdfRU5V)
   "#if !defined(AFX_RESOURCE_DLL) || defined(QUZYX1RBUkdfRU5V)\r\n" 
```

正则表达式有点难看，但那是因为我允许更多空间。一般包括：

```
(?<=...) #A positive lookbehind with text that must appear before the match
\w+      #Text to replace
(?=...)  #A positive lookahead with text that must appear after the match 
```

# ios5 - 如何将自定义 NSObject 复制到 NSMutableArray

> ID：12296920
> 
> 赞同：0
> 
> 时间：2012-09-06T09:24:52.783
> 
> 标签：ios5, nsmutablearray, nsobject

```
NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:responseData 

                      options:kNilOptions
                      error:&error];
NSArray* users = [json objectForKey:@"Users"];
NSEnumerator* enumerator = [users objectEnumerator];
id element;
NSMutableArray *results;
Result *fetchedResults;
while(element = [enumerator nextObject]) {

   // fetchedResults = [[Result alloc] init]; // i have tried commenting/uncommenting
    fetchedResults.name = (NSString *)[[element objectForKey:@"User"] objectForKey:@"name"];
    fetchedResults.email = (NSString *)[[element objectForKey:@"User"] objectForKey:@"name"];
    NSLog(@"%@", fetchedResults.name);
    [results addObject:fetchedResults];

    NSLog(@"%@", (NSString *)[[element objectForKey:@"User"] objectForKey:@"name"]); // this returns valid dump

}
NSLog(@"%d", [results count]); // returns 0 
```

我不明白这里有什么问题。我搜索了许多教程和资源，似乎没有发现这里有什么问题。

编辑：

```
NSLog(@"%@", fetchedResults.name); // dumps null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:27:55.540

您忘记分配结果数组`NSMutableArray *results = [[NSMutableArray alloc] init]`，这应该会有所帮助。

```
NSDictionary* json = [NSJSONSerialization
                  JSONObjectWithData:responseData 
                  options:kNilOptions
                  error:&error];
NSArray* users = [json objectForKey:@"Users"];
NSMutableArray *results = [[NSMutableArray alloc] init];

for (id object in users) {
    Result *fetchedResults = [[Result alloc] init];
    fetchedResults.name = (NSString *)[[element objectForKey:@"User"] objectForKey:@"name"];
    fetchedResults.email = (NSString *)[[element objectForKey:@"User"] objectForKey:@"name"];
    NSLog(@"%@", fetchedResults.name);
    [results addObject:fetchedResults];
}

NSLog(@"%@", (NSString *)[[element objectForKey:@"User"] objectForKey:@"name"]);
}

NSLog(@"%d", [results count]); // returns 0 
```

# regex - 正则表达式采用整行而不是确切的单词

> ID：12296921
> 
> 赞同：0
> 
> 时间：2012-09-06T09:24:57.897
> 
> 标签：regex, vba

我正在尝试匹配文本中不同项目的列表。我创建了一个正则表达式，但它匹配整个字符串而不是每个单独的项目。

这是我当前的正则表达式：

```
\[[a-zA-Z]\](.*)\. {1} 
```

我的测试文本：

```
[step 1] test blahblah blah [A] test item 1\. [B] test item 2\. 
```

当前的正则表达式匹配：

[A] 测试项目 1。 [B] 测试项目 2。

在 1 个字符串而不是 2 个匹配项中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:27:09.753

我认为你想要有非贪婪的行为：

```
\[[a-zA-Z]\](.*?)\. {1} 
```

请注意问号 ( `?`)。它表示在它之前的表达式应该尽可能少地匹配以填充表达式。基本上，它使它在第一个点之前*而*不是*最后*一个点之前停止。

[证明](http://regexr.com?322ff)

# c# - 以编程方式从 Microsoft Word 功能区中删除组

> ID：12296925
> 
> 赞同：5
> 
> 时间：2012-09-06T09:25:22.520
> 
> 标签：c#, ms-word, vsto

我已经创建了一个 Microsoft Word Office 2010 VSTO 加载项，并且正在寻找一种在加载项启动时以编程方式从功能区中删除特定组的方法。在稍后阶段，用户应该能够使用 Word 中的自定义功能区功能重新添加此组：

![在此处输入图像描述](../Images/3d95c894e4fe4d05f58b00440f12e9f1.png)

有切换组**可见性**的功能，但如果我这样做尝试使用自定义功能区再次使组可见失败：

```
groupName.Visible = false; 
```

我在这个主题上搜索了很多，但找不到任何关于删除功能区组的有用信息，任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:17:49.163

在 VSTO 加载项中添加和删除组似乎是为 Microsoft Word 的内部工作保留的。可以在[此处找到有关此主题的更多信息](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/63e5a99d-ff24-48a9-b56c-a9e962654b58)

接近我正在寻找的唯一解决方案是在功能区（切换按钮或复选框）上设置一个控件，该控件设置组的可见性

# asp.net - 登录验证和重定向

> ID：12296927
> 
> 赞同：0
> 
> 时间：2012-09-06T09:25:29.333
> 
> 标签：asp.net, sql-server, c#-2.0

我正在尝试在 ASP.net 2.0 Web 应用程序中使用 C# 2005 实现登录验证。SQL Server 数据库包含一个名为“UserList”的表，其中包含 LoginId、Password 和 Role 列。登录网络表单应验证登录 ID 和密码，并根据分配给该用户/访问者的角色应重定向到具有预定义菜单选项的特定网络表单。该角色可能是 Admin、DEO、Accounts 或 Member。我应该如何实施？我尝试了以下方法：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
    {
        try
        {
            string uname = Login1.UserName.Trim(); 
            string password = Login1.Password.Trim(); 

            int flag = AuthenticateUser(uname, password);

            if (flag == 1)
            {
                e.Authenticated = true;
                Login1.DestinationPageUrl = "~/MenuAdmin.aspx";
            }
            else if (flag == 2)
            {
                e.Authenticated = true;
                Login1.DestinationPageUrl = "~/MenuDEO.aspx";
            }
            else if (flag == 3)
            {
                e.Authenticated = true;
                Login1.DestinationPageUrl = "~/MenuAccts.aspx";
            }
            else if (flag == 4)
            {
                e.Authenticated = true;
                Login1.DestinationPageUrl = "~/MenuMember.aspx";
            }
            else
            {
                e.Authenticated = false;
            }
        }

        catch (Exception)
        {
            e.Authenticated = false;
        }
    }

private int AuthenticateUser(string uname, string password)
    {
        int bflag = 0;
        string connString = ConfigurationManager.ConnectionStrings["LoginDemoConnString"].ConnectionString;
        string strSQL = "Select * FROM UserList where ULoginId ='" + uname + "' AND UPassword ='" + password + "'";

        DataTable dt = new DataTable();
        SqlConnection m_conn;
        SqlDataAdapter m_dataAdapter;

        try
        {
            m_conn = new SqlConnection(connString);
            m_conn.Open();
            m_dataAdapter = new SqlDataAdapter(strSQL, m_conn);
            m_dataAdapter.Fill(dt);
            m_conn.Close();
        }

        catch (Exception ex)
        {
            dt = null;
        }

        finally
        {
            //m_conn.Close();
        }

        if (dt.Rows.Count > 0)
        {
            if (dt.Rows[0][3].ToString() == "Administrator")
                bflag = 1;
            else if (dt.Rows[0][3].ToString() == "DEO")
                bflag = 2;
            else if (dt.Rows[0][3].ToString() == "Accts")
                bflag = 3;
            else
                bflag = 4;
        }
        return bflag;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:49:13.103

首先我猜想sql表中的每个角色都有id，所以你可以去掉AuthenticateUser中的ifs，只返回id。或者，您也可以返回实际角色，然后在 Login1_Authenticate 函数中对这些数据执行一些操作。现在你也可以去掉 Login1_Authenticate 函数中的 ifs，如果你将使用键是角色和值是 pageURL 的字典，所以你可以写这样的东西：

```
 int flag = AuthenticateUser();
    Login1.DestinationPageUrl = roles.ElementAt(flag).Value; 
```

# gwt - Maven 测试阶段的 GWT 客户端日志记录

> ID：12296929
> 
> 赞同：0
> 
> 时间：2012-09-06T09:25:39.757
> 
> 标签：gwt, maven, maven-3, gwt-maven-plugin

我正在编写一个`GWT`库，并且正在尝试使用 GWT 的`Logging`功能。

我的 Maven 构建触发了一些`GWTTestCases`测试我的库。

是否可以拥有和配置我的库的日志记录输出？这样我就可以在该`test`阶段看到日志记录。

我实际拥有的，但它不起作用：

`.gwt.xml`文件：

```
<inherits name="com.google.gwt.logging.Logging"/>
<set-property name="gwt.logging.enabled" value="TRUE"/>
<set-property name="gwt.logging.logLevel" value="ALL"/>
<set-property name="gwt.logging.systemHandler" value="ENABLED"/>
<set-property name="gwt.logging.developmentModeHandler" value="ENABLED"/>
<set-property name="gwt.logging.consoleHandler" value="ENABLED"/> 
```

在java代码中：

```
private final static Logger logger = Logger.getLogger("xxx.client.Fusion"); 
```

...

```
logger.info("Test");
logger.finer("Test"); 
```

我还尝试设置`logLevel`.`gwt-maven-plugin`

我错过了什么？

**编辑**

我将`logging.properties`文件放在`src/main/webapp/WEB-INF`. 为了测试，这个文件只包含：

```
.level = ALL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:56:11.193

我没有做到这样的事情。

当我尝试使用 GWTTestCase 传递到 logging.properties 文件的路径时，`-Djava.util.logging.config.file`我收到一个错误。

所以，恕我直言，这通常不是一个好的用法`logging`。因此，不推荐这种用法。

对于坚持这样做的人，我应该建议看看`gwt-log`。

# java - Java：关于可运行的帮助

> ID：12296933
> 
> 赞同：0
> 
> 时间：2012-09-06T09:25:55.607
> 
> 标签：java, android, runnable

我是 Java 编程新手，我想知道以下代码的作用：它是否每 1000 毫秒不间断地执行 setUp 函数？

```
handler.postDelayed(new Runnable() {
            public void run() {
                setUp();
            }
            }, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:27:37.633

不，它将以 1000 毫秒的延迟运行它。

此外，这看起来像 android ;) 如果您想每秒接到一个电话，请改用 TimerTask。[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:28:09.893

不，它只会在 1000 毫秒后运行一次。如[文档](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)中所述：

> 使 Runnable r 添加到消息队列中，在经过指定的时间后运行。可运行对象将在附加此处理程序的线程上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:27:52.000

[postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)的JavaDoc如下，所以它会在之后执行`1000ms`

> public final boolean postDelayed (Runnable r, long delayMillis) 自：API 级别 1
> 
> 使 Runnable r 添加到消息队列中，在经过指定的时间后运行。可运行对象将在附加此处理程序的线程上运行。参数
> 
> r 将被执行的 Runnable。
> 
> delayMillis 执行 Runnable 之前的延迟（以毫秒为单位）。

# asp.net - 即时创建 Zip 文件并使其可在 ASP.NET 中下载

> ID：12296939
> 
> 赞同：0
> 
> 时间：2012-09-06T09:26:06.213
> 
> 标签：asp.net, zip, on-the-fly

我有一个**ASP.NET Web 窗体**应用程序。一旦用户单击**下载链接**，我需要即时创建几个**XML****文件**，压缩它们并通过下载对话框提示用户。

 **我已经制作了下载单个 XML 文件的功能，它可以正常工作。**download.aspx**文件中的链接是：

```
<asp:HyperLink ID="hlDownload" Text="Download" NavigateUrl='<%# String.Format("GetFile.aspx?LicenseGuid={0}", Eval("ProductId")) %>' runat="server"></asp:HyperLink> 
```

**GetFile.aspx**代码后面的函数：

```
Dim xmlFile = _productServices.GetXMLFilePerProductId(ProductId)
Dim xdoc As XmlDocument = New XmlDocument()
xdoc.LoadXml(xmlFile)

Response.Clear()
Response.ContentType = "text/xml"
Response.ContentEncoding = System.Text.Encoding.UTF8
Response.AddHeader("Content-Disposition", "attachment; filename=some_name.xml")

xdoc.Save(Response.Output)
Response.End() 
```

如何动态创建一个 ZIP 文件并打包几个 XML 文件，这些文件也是动态创建的？

PS：欢迎使用 C# 和 VB.NET 的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:28:48.317

您可以使用 CodeFluent Entities Runtime Client 包的 ZipFile 类： [链接在这里](http://blog.codefluententities.com/2012/08/24/exploring-the-codefluent-runtime-zipfile/)

该库仅允许使用流，这意味着您没有在文件系统上创建临时文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:33:23.597

如果您愿意，可以使用 .net GZip 或 Deflate 流，并可以开发自己的解决方案，或者更好的选择是使用托管代码的[SharpZip .net 库](http://www.icsharpcode.net/OpenSource/SharpZipLib/Download.aspx)。**

# c# - WCF 协议错误。我错过了什么？

> ID：12296943
> 
> 赞同：0
> 
> 时间：2012-09-06T09:26:18.037
> 
> 标签：c#, wcf, soap

我已经构建了一个可以在标准设置下正常工作的 WCF 服务，但后来我决定尝试实现一个 SOAP 1.2 绑定。自从对 web.config 和客户端代码进行更改后，我现在发现我遇到了协议异常，我不知道为什么或什么原因导致它。请在下面查看我的代码。配置对我来说是正确的，所以我只能猜测客户端代码中存在问题。任何想法都非常受欢迎：

**web.config**

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="Namespace.ServiceName" behaviorConfiguration="EToNServiceBehavior">
        <endpoint name="EToNSoap12" address=""
                  binding="customBinding" bindingConfiguration="soap12"
                  bindingNamespace="http://www.wrcplc.co.uk/Schemas/ETON"
                  contract="Namespace.IInterfaceName" />
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="EToNServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <customBinding>
        <binding name="soap12">
          <textMessageEncoding messageVersion="Soap12" />
          <httpTransport />
        </binding>
      </customBinding>
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

**界面**

```
namespace TheNamespace
{
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Web;

/// <summary>
/// An interface to describe the contract offered by a class of this type.
/// </summary>
[ServiceContract]
public interface IInterfaceName
    {
    /// <summary>
    /// A method to receive an EtoN notice
    /// </summary>
    /// <param name="message">The EtoN message</param>
    [OperationContract (Name = "StoreNotice")]
    [WebInvoke (Method = "POST", UriTemplate = "StoreNotice")]
    Message StoreNotice (Message message);
    }
} 
```

**客户代码**

```
public string CallPostMethod()
    {
        const string action = "StoreNotice";

        TestNotice testNotice = new TestNotice();

        const string url = "http://myIp:myPort/ServiceName.svc/StoreNotice";

        string contentType = String.Format("application/soap+xml; charset=utf-8; action=\"{0}\"", action);
        string xmlString = CreateSoapMessage(url, action, testNotice.NoticeText);

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

        ASCIIEncoding encoding = new ASCIIEncoding();

        byte[] bytesToSend = encoding.GetBytes(xmlString);

        request.Method = "POST";
        request.ContentLength = bytesToSend.Length;
        request.ContentType = contentType;

        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(bytesToSend, 0, bytesToSend.Length);
            requestStream.Close();
        }

        string responseFromServer;

        try
        {
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            using (Stream dataStream = response.GetResponseStream())
        {
            using (StreamReader reader = new StreamReader(dataStream))
            {
                responseFromServer = reader.ReadToEnd();
            }
            dataStream.Close();
        }

        XDocument document = XDocument.Parse(responseFromServer); 

            return document.ToString();
        }
        catch(WebException e)
            {
            throw e;
            }
    }

    protected string CreateSoapMessage(string url, string action, string messageContent)
    {
        return String.Format(@"<?xml version=""1.0"" encoding=""utf-8""?>
        <soap12:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""    xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap12=""http://www.w3.org/2003/05/soap-envelope"">
            <soap12:Body>
            {0}
            </soap12:Body>
        </soap12:Envelope>", messageContent, action, url);
    } 
```

**编辑**

通过使用跟踪查看器，我得到了以下信息：

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To 'http://localhost:56919/TmaNoticeToClusteredEntityWcfService.svc/StoreNotice' 的消息。检查发送方和接收方的 EndpointAddresses 是否一致。

我的代码会产生什么问题？在我看来没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:53:11.237

如果客户端是 .Net 应用程序，您可以创建服务代理来调用它，如下所示。

```
Proxy.ServiceClient client = new Proxy.ServiceClient();
client.StoreNotice(GetMessage()); 
```

方法 GetMessage()

```
 public static Message GetMessage()
        {
            //create an XML reader from the input XML
            XmlReader reader = XmlReader.Create(new MemoryStream(Encoding.Default.GetBytes(CreateSoapMessage("http://localhost:8732/Design_Time_Addresses/WCFCustomEndpointService/Service1/", "http://tempuri.org/IService1/StoreNotice", "content"))));

            //create a WCF message from the XML reader
            Message inputMessge = Message.CreateMessage(MessageVersion.Soap12, "http://tempuri.org/IService1/StoreNotice", reader);

            return inputMessge;
        } 
```

您的方法 CreateSoapMessage 的副本

```
 protected static string CreateSoapMessage(string url, string action, string messageContent)
        {
            return String.Format(@"<?xml version=""1.0"" encoding=""utf-8""?><soap12:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap12=""http://www.w3.org/2003/05/soap-envelope""><soap12:Body>{0}</soap12:Body></soap12:Envelope>", messageContent, action, url);
        } 
```

# c# - 来自 aspx 页面的全局函数

> ID：12296947
> 
> 赞同：0
> 
> 时间：2012-09-06T09:26:30.300
> 
> 标签：c#, asp.net

我`Static1Url`在 .cs 中有一个函数，它可以预先挂起一个 URL 字符串：

```
namespace Website2012
{
    public static class GlobalSiteFunctions
    {

        /// <summary>Returns a formatted URL mapping to Static1 on a CDN.</summary>
        /// <param name="url">The URL to be formatted.</param>
        /// <returns>Formatted string.</returns>
        public static string Static1Url(string url)
        {
            return string.Format("{0}{1}", ConfigurationManager.AppSettings["Static1CDNUrl"], url);
        }
    }
} 
```

我希望能够从这样的 aspx 页面访问它：

```
<p>This is the complete URL: <%= Static1Url("my-file-name.jpg") %></p> 
```

目前，为了能够做到这一点，我必须使用以下代码：

```
<p>This is the complete URL: <%= Website2012.GlobalSiteFunctions.Static1Url("my-file-name.jpg") %></p> 
```

如果我在页面顶部添加一个 Import 语句 ( `<%@ Import Namespace="Website2012" %>`)，那么我现在可以使用以下内容：

```
<p>This is the complete URL: <%= GlobalSiteFunctions.Static1Url("my-file-name.jpg") %></p> 
```

叫我懒惰，但我更喜欢更简单的解决方案，最好是在页面顶部不涉及 Import 的解决方案，但这并不意味着我必须使用冗长的函数调用。这可能吗？

**编辑（为了 Imran Balouch 的利益）**

我想出了这个处理多种页面类型的想法，这是一个好的做法：

```
public class MyPage : System.Web.UI.Page
{
    public static bool Test()
    {
        return Functions.Test();
    }
}

public class MyUserControl : System.Web.UI.UserControl
{
    public static bool Test()
    {
        return Functions.Test();
    }
}

private class Functions
{
    public static bool Test()
    {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:28:21.443

不，这不对。您至少需要类名才能访问静态方法（如果您包含上面的命名空间）。如果您不包含命名空间，那么您必须像示例中那样通过命名空间访问它。

```
Website2012.GlobalSiteFunctions.Static1Url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-22T16:32:47.917

我认为答案是“是”和“否”，具体取决于您真正想要什么。我有两个考虑。我建议在问题中提出的情况下反对第一个，但这对于非常相似的情况很有用，并且这个第一个选项确实更直接地回答了*所问*的问题，但我相信第二个是我认为的更好的答案是真的很想要。

1：您*可以*在 System.Web.UI.Page 上使用扩展方法，以便您可以通过以下方式调用您的方法：`this.Static1Url(...)`。您的扩展方法看起来像这样：

```
public static string Static1Url(this System.Web.UI.Page p, string url)
{   return string.Format("{0}{1}", ConfigurationManager.AppSettings["Static1CDNUrl"], url);
} 
```

但是因为您没有`p`在您的方法中使用该变量，并且它实际上不是扩展方法的预期用途，所以我建议不要使用这种用法。我将这种使用称为“slop”。但是我使用它的一个好方法是这个扩展方法：

```
 public static string RequestFQ(this System.Web.UI.Page p, string key, string valueForNullResult = "?")
    {   string v = p.Request.Form[key] ?? p.Request.QueryString[key];
        if (v == valueForNullResult) { v = null; }
        return v;
    } // public string RequestFQ(this System.Web.UI.Page p, string key, string valueForNullResult = "?") 
```

集合需要Page实例，所以这个`Request`例子非常适用。从网页内部调用它很简单：`this.RequestFQ("myKey");`.

现在我认为是你最好的解决方案：

2：在我看来，你真正的问题是你把你的电话改成了一个更短的名字，这样你就没有冗长的'GlobalSiteFunctions.Static1Url()'。我提醒您（或启发您了解这一事实），一个语句`using`可以重命名您的长类名，因此`Website2012.GlobalSiteFunctions.Static1Url(...)`可以使用诸如.`g.Static1Url(...)``using``using g = Website2012.GlobalSiteFunctions;`

因此，您的问题专门询问您是否可以避免 OOP 设计，从技术上讲，不，您不能。但是您可以通过我提供的第二个选项来缩短调用方法所需的字符长度。在我看来，这确实是您想要的。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:30:21.897

我想到的解决方案是覆盖页面类，并在那个被覆盖的页面类中，写下你的函数并从派生类继承你的每一页，这样你就可以在不使用 import 语句的情况下使用它。

```
public class MyPage : System.Web.UI.Page
{
    protected string Static1Url(string url)
    {
        return string.Format("{0}{1}", ConfigurationManager.AppSettings["Static1CDNUrl"], url);
    }
} 
```

比你的页面必须是这样的：

```
public partial class YourPage : MyPage
{

} 
```

你可以像这样使用它：

```
<p>This is the complete URL: <%= base.Static1Url("my-file-name.jpg") %></p> 
```

# javascript - Internet Explorer 中 HTMLObjectCollection 的长度不正确

> ID：12296960
> 
> 赞同：1
> 
> 时间：2012-09-06T09:27:17.710
> 
> 标签：javascript

我在具有相同名称的表中的不同行中有三个单元格。例如

```
<td name = "x"> 
```

存在于 3 个不同的行中。

我正在使用 document.getElementsByName() 来获取这些单元格的集合并尝试计算该集合的长度。例如

```
var obj = doucment.getElementsByName("X");
  var length = obj.length; 
```

此代码在 Google Chrome 中运行良好，但在 IE 中长度返回为 0（零）。

谁能告诉我如何在 IE 中解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:30:14.150

我不认为 name 是 TD 元素的有效属性，它应该用于 Form 元素。

改用类。

```
<td class="whatever"> 
```

和：

```
document.getElementsByClassName("whatever").length 
```

如果您需要使用多个类，这也支持：

```
<td class="whatever whatever2 allwhatevers"> 
```

# c# - 从多个 *.resx 文件访问和读取数据

> ID：12296961
> 
> 赞同：0
> 
> 时间：2012-09-06T09:27:18.757
> 
> 标签：c#, .net, resx

我是 C# .NET 的新手。

我需要从本地文件夹访问 *.resx 文件，然后从每个 *.resx 文件中检索数据。我正在为此创建一个 Windows 应用程序。

因此，首先，一旦我给出了该文件夹的路径，它就会在那里找到文件，但是现在，我如何读取这些文件并将数据从它们获取到 RAM 上的临时数据库中。

私人无效按钮BrowseSource1_Click（对象发送者，EventArgs e）

{

```
 FolderBrowserDialog selectPathDialog = new FolderBrowserDialog();
        if (selectPathDialog.ShowDialog() == DialogResult.OK)
        {
            DirectoryInfo di = new DirectoryInfo(selectPathDialog.SelectedPath);
            FileInfo[] RESXFiles = di.GetFiles("*.resx");

            if (RESXFiles.Length == 0)
            {

                UpdateStatus("No RESX files found in this directory. Please check the folder/path again.");
            }
            else
            {

                UpdateStatus("Total " + RESXFiles.Length + " RESX files found in this directory.);
                textBoxSource1.Text = selectPathDialog.SelectedPath;

            }
        }
        else
        {
            UpdateStatus("Missing directory! Please try again.");
        }
    } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:28:17.730

为此使用[ResXResourceReader 类](http://msdn.microsoft.com/en-us/library/system.resources.resxresourcereader.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:34:01.520

```
// Gets the value of associated with key "MyKey" from the local resource file for a given culture ("~/MyPage.aspx.en.resx") or from the default one ("~/MyPage.aspx.resx")
object keyValue = HttpContext.GetLocalResourceObject("~/MyPage.aspx", "MyKey", culture); 
```

使用这样的东西

对于 Windows，此链接可能对您有用

> [http://www.c-sharpcorner.com/uploadfile/yougerthen/handle-resource-files-read-and-write-into-a-resx-file-programmatically-part-iii/](http://www.c-sharpcorner.com/uploadfile/yougerthen/handle-resource-files-read-and-write-into-a-resx-file-programmatically-part-iii/)

# mongodb - Mongodb聚合：如何仅返回数组的匹配元素

> ID：12296963
> 
> 赞同：11
> 
> 时间：2012-09-06T09:27:26.837
> 
> 标签：mongodb, aggregation-framework

在我的 mongoDB 书籍收藏中，我的文档结构如下：

```
/* 0 */
{
  "_id" : ObjectId("50485b89b30f1ea69110ff4c"),

  "publisher" : {
    "$ref" : "boohya",
    "$id" : "foo"
  },
  "displayName" : "Paris Nightlife",
  "catalogDescription" : "Some desc goes here",
  "languageCode" : "en",
  "rating" : 0,
  "status" : "LIVE",
  "thumbnailId" : ObjectId("50485b89b30f1ea69110ff4b"),
  "indexTokens" : ["Nightlife", "Paris"]
} 
```

我执行以下正则表达式查询以查找具有一个以 "Par" 开头的 indexToken 的所有文档：

```
{ "indexTokens" : { "$regex" : "^Par" , "$options" : "i"}} 
```

如果我只选择要返回的 indexTokens 字段，如下所示：

```
{ "indexTokens" : 1} 
```

生成的 DBObject 是

```
{ "_id" : { "$oid" : "50485b89b30f1ea69110ff4c"} , "indexTokens" : [ "Nightlife" , "Paris"]} 
```

我想得到的只是与正则表达式匹配的令牌/标签（此时我不关心检索文档，我也不需要匹配文档的所有标签）

这是在 MongoDB v2.2 下发布的新聚合框架的情况。?

如果是，我该如何修改我的查询，以便实际结果如下所示：

{ "indexTokens" : ["Paris", "Paradise River", "Parma" 等 ....]}

额外的问题（你有 codez）：我如何使用 Java 驱动程序来做到这一点？

现在我的java看起来像：

```
DBObject query = new BasicDBObject("indexTokens", java.util.regex.Pattern.compile("^"+filter+"", Pattern.CASE_INSENSITIVE));
    BasicDBObject fields = new BasicDBObject("indexTokens",1);
    DBCursor curs = getCollection()
                    .find(query, fields)
                    .sort( new BasicDBObject( "indexTokens" , 1 ))
                    .limit(maxSuggestionCount); 
```

谢谢 ：）

编辑：

根据您的回答，我修改了我的 JAVA 代码，如下所示：

```
BasicDBObject cmdBody = new BasicDBObject("aggregate", "Book"); 
    ArrayList<BasicDBObject> pipeline = new ArrayList<BasicDBObject>(); 

    BasicDBObject match = new BasicDBObject("$match", new BasicDBObject("indexTokens", java.util.regex.Pattern.compile("^"+titleFilter+"", Pattern.CASE_INSENSITIVE)));
    BasicDBObject unwind = new BasicDBObject("$unwind", "$indexTokens");
    BasicDBObject match2 = new BasicDBObject("$match", new BasicDBObject("indexTokens", java.util.regex.Pattern.compile("^"+titleFilter+"", Pattern.CASE_INSENSITIVE)));
    BasicDBObject groupFilters = new BasicDBObject("_id",null);
    groupFilters.append("indexTokens", new BasicDBObject( "$push", "$indexTokens"));
    BasicDBObject group = new BasicDBObject("$group", groupFilters);

    pipeline.add(match);
    pipeline.add(unwind);
    pipeline.add(match2);
    pipeline.add(group);

    cmdBody.put("pipeline", pipeline); 

    CommandResult res = getCollection().getDB().command(cmdBody);
    System.out.println(res); 
```

哪个输出

```
{ "result" : [ { "_id" :  null  , "indexTokens" : [ "Paris"]}] , "ok" : 1.0} 
```

这是天才！

非常感谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T10:43:42.343

您可以使用 2.2 聚合框架来执行此操作。像这样的东西；

```
db.books.runCommand("aggregate", {
    pipeline: [
        {   // find docs that contain Par*
            $match: { "indexTokens" : { "$regex" : "^Par" , "$options" : "i"}},
        },
        {   // create a doc with a single array elemm for each indexToken entry
            $unwind: "$indexTokens" 
        },
        {   // now produce a list of index tokens
            $group: {
                _id: "$indexTokens",
            },
        },
    ],
}) 
```

或者，如果您真的想要没有文档的数组，这可能更接近您所追求的；

```
db.books.runCommand("aggregate", {
    pipeline: [
        {   // find docs that contain Par*
            $match: { "indexTokens" : { "$regex" : "^Par" , "$options" : "i"}},
        },
        {   // create a doc with a single array elemm for each indexToken entry
            $unwind: "$indexTokens" 
        },
        {   // now throw out any unwind's that DON'T contain Par*
            $match: { "indexTokens": { "$regex": "^Par", "$options": "i" } },
        },
        {   // now produce the list of index tokens
            $group: {
                _id: null,
                indexTokens: { $push: "$indexTokens" },
            },
        },
    ],
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T13:51:58.307

基于 cirrus 的响应，我建议`$unwind`首先避免多余的`$match`. 就像是：

```
db.books.aggregate(
    {$unwind:"$indexTokens"},
    {$match:{indexTokens:/^Par/}},
    {$group:{_id:null,indexTokens:{$push:"$indexTokens"}}
}) 
```

你如何在 Java 中做到这一点？可以使用[`DBCollection.aggregate(...)`](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#aggregate%28com.mongodb.DBObject,%20com.mongodb.DBObject...%29)MongoDB v2.9.0驱动的方法。每个管道运营商，例如。`$unwind`或`$match`, 对应于一个`DBObject`对象。

# blackberry - 在黑莓上显示 gif 图像 url

> ID：12296964
> 
> 赞同：0
> 
> 时间：2012-09-06T09:27:28.757
> 
> 标签：blackberry

我使用 BrowserField 显示网址。

```
String url ="http://www.wfaa.com/templates/mobile_indv_images?cpath=http://belo.bimedia.net/WFAA/weather/animated-loops/ssite/640x480/collin.gif" 
```

我的代码在这里，

```
 BrowserFieldConfig config = new BrowserFieldConfig();
        String userAgent = "BlackBerry" + DeviceInfo.getDeviceName() + "/" +    DeviceInfo.getSoftwareVersion() +" Profile/" + System.getProperty("microedition.profiles") +" Configuration/" + System.getProperty( "microedition.configuration") + " VendorID/" + Branding.getVendorId();
        config.setProperty(BrowserFieldConfig.USER_AGENT, userAgent);
        config.setProperty(BrowserFieldConfig.ALLOW_CS_XHR, Boolean.TRUE);
        config.setProperty(BrowserFieldConfig.ENABLE_GEARS, Boolean.TRUE);
        config.setProperty(BrowserFieldConfig.NAVIGATION_MODE, BrowserFieldConfig.NAVIGATION_MODE_POINTER);
        config.setProperty(BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE);    
        config.setProperty(BrowserFieldConfig.ENABLE_COOKIES,Boolean.TRUE);
        config.setProperty(BrowserFieldConfig.USER_SCALABLE, Boolean.TRUE);

        myBrowserField = new BrowserField(config);
        myBrowserField.requestContent(url); 
```

它在 9800 上工作，但是当我在 9930 模拟器上检查时，gif 图像没有加载浏览器字段。

有时它显示，有时它没有显示在 9930 设备（操作系统版本 7）上。为什么会发生。如何在 9930 设备上显示 gif 图像 url。

# wcf - WCF Silverlight 游戏大厅

> ID：12296967
> 
> 赞同：1
> 
> 时间：2012-09-06T09:27:43.203
> 
> 标签：wcf, silverlight

我正在尝试使用 Silverlight 和 WCF Duplex 创建一个回合制游戏。但我只能做一个登录页面。我被困住了，您的所有建议/帮助将不胜感激。

我对我的架构有一些疑问。

1.  这是在 IIS 上托管我的（WCF 轮询双工）GameService 的好方法，还是我应该制作一个控制台应用程序并提供这些方法？

2.  我在主页中调用了 2 个方法。第一个 LoginAsync 并且一旦第一个完成，我将调用第二个 GetLoggedInPlayersAsync。但是我遇到了我无法弄清楚的错误。

这是我到目前为止所拥有的

```
[ServiceContract(Namespace="", CallbackContract=typeof(IGameClient), SessionMode=SessionMode.Required)]
// [DeliveryRequirements(RequireOrderedDelivery=true)]
public interface IGameService
{
    [OperationContract(IsInitiating=true)]
    bool Login(Player player);

    [OperationContract(IsInitiating=false)]
    void Logout();

    [OperationContract]
    IEnumerable<Player> GetLoggedInPlayers();
}  

public interface IGameClient
{
    [OperationContract(IsOneWay=true)]
    void NotifyNewUserConnected(Player player);
}

    public Home()
    {
        InitializeComponent();

        client = Helpers.Extensions.GetGameServiceClient();
        this.Loaded += new RoutedEventHandler(Home_Loaded);

        client.GetLoggedInPlayersCompleted += new EventHandler<GetLoggedInPlayersCompletedEventArgs>(client_GetLoggedInPlayersCompleted);
        client.NotifyNewUserConnectedReceived += new EventHandler<NotifyNewUserConnectedReceivedEventArgs>(client_NotifyNewUserConnectedReceived);
        client.LoginCompleted += new EventHandler<LoginCompletedEventArgs>(client_LoginCompleted);

    }

    void Home_Loaded(object sender, RoutedEventArgs e)
    {

        // get the player
        if (Player == null)
        {
            SignInWindow window = new SignInWindow();
            window.Show();

            Player = new Player
            {
                PlayerName = window.txtName.Text
            };

            window.Closed += new EventHandler(window_Closed);

        }
    } 
```

# google-bigquery - 异步批处理查询是否也受到最大响应大小的限制？

> ID：12296975
> 
> 赞同：0
> 
> 时间：2012-09-06T09:27:56.633
> 
> 标签：google-bigquery

我打算运行批处理查询以修改某些字段值并将结果插入另一个表中。举个例子：

```
bq --nosync query --batch --destination_table=datasetId.anotherTable "SELECT field0+1, field1, field2 FROM datasetId.someTable" 
```

但我得到这个错误：

```
Job Type    State      Start Time      Duration   Bytes Processed  
---------- --------- ----------------- ---------- ----------------- 
query      FAILURE   06 Sep 11:09:58   0:00:04                     

Errors encountered during job execution. Response too large to return. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:20:51.307

是的，目前批量查询对响应大小的限制与非批量查询相同。

但是，您可以使用 --allow_large_results 标志并为具有较大结果大小的查询设置目标表。

# java - 如果使用混淆，为什么使用反射对私有方法进行单元测试会失败？

> ID：12296980
> 
> 赞同：3
> 
> 时间：2012-09-06T09:28:37.383
> 
> 标签：java, unit-testing, junit

我已经通过[这个关于单元测试私有方法和字段的](https://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit?lq=1)问题，[这个答案](https://stackoverflow.com/a/34658/1527084)说它可以通过反射机制来完成。但是[有](https://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit/34658#comment2146296_34658)评论说如果被混淆会惨败。为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T09:31:10.110

混淆的工作原理是用难以阅读的名称替换符号名称（方法、字段 ..）。所以在反编译后你得到一个java文件，你得到一个真正无用的java代码。

方法名称会更改，因此通过反射查找将不起作用。（除非测试代码使用带有混淆方法名称的反射——这不是一件容易的事）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T09:31:11.183

混淆可以将私有方法重命名为它喜欢的任何名称（它不能用公共方法来做，因为其他包可能依赖它）。

反射的危险在于你有一个代表方法名的字符串；混淆器无法检测到这个字符串引用了一个私有方法，所以它可以自由地重命名它认为合适的方法。

# c++ - C++ Uint8 数据类型转换为 const char* 数据类型

> ID：12296984
> 
> 赞同：2
> 
> 时间：2012-09-06T09:29:05.460
> 
> 标签：c++, type-conversion

我需要这种转换，因为我正在使用库并希望保留它们的定义，但必须让它们一起工作。

所以我有

```
functionX(uint8 *src, uint16 nSrcLen){
  write(src);
}

write(const char msg){} 
```

感谢您的帮助；）

**编辑：**附加信息

如果可能的话，functionX 和 write 应该保持这种状态。然而，不管怎样，我对*更好*的解决方案很感兴趣。

*src*将携带空字节

**编辑：**写，它曾经是如何使用的

```
std::string hex_chars;
std::getline(std::cin, hex_chars);
std::istringstream hex_chars_stream(hex_chars);

unsigned int ch;
while (hex_chars_stream >> std::hex >> ch)
{
 write(ch);
} 
```

现在，不再需要十六进制转换，但我想仍然需要使用这个流构造

**编辑：**当前解决方案

```
for(uint16 i = 0; i < nSrcLen; i++)
{
    write(reinterpret_cast<unsigned char*>(src)[i]);
    //printf("%d",reinterpret_cast<unsigned char*>(src)[i]);    
} 
```

现在为我工作-谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T09:34:00.440

要转换指针类型，您只需要将指针从一种类型转换为另一种类型。

例如，

```
uint8 *uint8_pointer = ?;

// C style cast
const char *char_pointer = (char*)uint8_pointer;

// newer C++ style cast syntax
const char *char_pointer2 = reinterpret_cast<char*>(uint8_pointer); 
```

你也可以反过来做：

```
char *char_pointer = ?;
uint8 *uint8_pointer = reinterpret_cast<uint8*>(char_pointer); 
```

对于您的功能，您可以使用：

```
functionX(uint8 *src, uint16 nSrcLen){
  write(reinterpret_cast<char*>(src));
}
void write(const char* msg); 
```

# css - CSS覆盖不起作用？

> ID：12296987
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:12.533
> 
> 标签：css, jquery-mobile, tabs

我有三个在单击时会更改样式的选项卡。`class="active"`为选项卡提供与选项卡内容相同的背景，同时`class="inactive"`具有另一种颜色。

我的问题是选项卡上的文本，CSS 有点奇怪。默认状态`class="active"`看起来应该是这样，而非活动选项卡带有下划线，即使我的 CSS 说`text-decoration: none !important;`并且单击的活动选项卡文本变得格外粗体（或者可能是阴影）。

请看我的小提琴：http: [//jsfiddle.net/m8wQM/170/](http://jsfiddle.net/m8wQM/170/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:36:31.177

您需要为您的标签显式设置`text-decoration: none;`声明：`a`

```
.ui-btn {
     text-decoration: none; /*nope, no need for !important*/
} 
```

这是您的演示的一个小工作版本：[little link](http://jsfiddle.net/glee/m8wQM/178/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:35:04.020

刚刚添加了一些 css 并且它的工作良好。

```
#navbar ul li a
{
  text-decoration: none !important;  
  text-shadow: none !important;
} 
```

（`text-decoration`从活动和非活动中删除，因为您在任何情况下都不想要它）

看看这个：[**小提琴**](http://jsfiddle.net/m8wQM/179/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:36:24.640

试试这个..

```
#navbar ul li a {
    text-decoration: none;
} 
```

:D

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:37:20.560

```
.ui-btn {text-decoration: none;} 
```

无需添加 !important

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T09:42:50.660

您无法覆盖它的原因是 CSS 值的计算方式。

CSS 计算是否覆盖的方式由选择器组成。

```
 1\. ID: 100 points.
 2\. Class: 10 points.
 3\. Tag name: 1 point. 
```

为了覆盖 css 规则，选择器的计算值必须高于前一个。

例子：

```
<div id="id" class="class"></div>

#id { background: blue; } - 100 point rule.
.class { background: red; } - 10 point rule. 
```

上面的 div 将保持蓝色，因为 id 的选择器要高得多。

为了推动更改，您可以添加 !important 标记，或确保 .class 规则获得更高的分数等，方法是添加：

```
#parent .class { background: red; } - 110 point rule. 
```

# c# - 如何判断设备何时连接和断开网络？

> ID：12296988
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:12.080
> 
> 标签：c#, networking, snmp, router, arp

我希望能够根据我的手机 (wifi) 的 wifi 网络存在来武装/解除我的监控软件 (开源 - ispy)。不知何故，我需要 ispy 来检测手机已连接到无线网络以解除系统，然后还检测到它已断开连接，以便它可以重新武装它。

我一直在阅读有关 SNMP 的信息（我无法开始工作 - 我在 udp 端口​​ 161 上设置了一个侦听器，并将陷阱管理器设置为指向我的电脑，它除了初始的“0”之外什么都不发送?”）和 ARP（我已经能够开始工作，但它似乎缓存在我的本地 PC 上，并且绝对不会实时更新）。

我宁愿找到一个解决方案，它依赖于来自路由器的通知（最好不是 UPNP，因为我发现它很容易崩溃）或通过一些网络数据包嗅探，而不是通过不断轮询路由器以获取连接设备的列表. c# 中的任何示例都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:06:51.040

当设备连接时，它会广播 DHCP 请求，这些请求应该对连接到路由器的每个设备都是可见的（它不太可能仅仅因为内部端口会响应它而在无线上压缩重新广播）。

断开连接更加困难，因为当设备离开时您将一无所获。您必须不断轮询它并注意它何时不再响应。当然，您可以只针对特定于手机的内容广播民意调查，并仅使用它来了解它何时到达和离开。

有一个名为“blueproximity”的程序可以使用蓝牙进行类似的操作。这可能不是您想要解决的问题，但您可以查看它的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:00:27.413

You didn't mention it but since you talked about ARP I suppose device is under DHCP so we have to work with MAC address. That said why don't you use [Nmap](http://nmap.org/)? It is free, simple and already includes an XML output that can be easily parsed with C#. I actually did this, only I don't have code on this computer right now :/

# iphone - UIActivityIndi catorView 不会在 iphone 应用程序中停止

> ID：12296990
> 
> 赞同：3
> 
> 时间：2012-09-06T09:29:14.977
> 
> 标签：iphone, uiactivityindicatorview

我在 iphone 应用程序中使用 UIActivityIndi​​catorView 但它没有停止它的动画没有停止。我正在自我上传方法中将数据上传到服务器

查看是否加载方法

```
 - (void)viewDidLoad {

    self.navigationController.navigationBarHidden=YES;

   CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

   activityImageView.hidden=YES;
       activityView.hidden=YES;
   int mytestcount=appDelegate.rowCount;

   NSString*test=[NSString stringWithFormat:@"%d",mytestcount];

  if ([test isEqualToString:@"0"]) {

    NSLog(@" No dta ot upload %d",mytestcount);

  }

 else {

    [NSThread detachNewThreadSelector:@selector(startActivity:) toTarget:self withObject:nil];

       [self uploadData];

    }

  [super viewDidLoad];

[self stopData];    

} 
```

动画停止方法

```
 -(void)stopData{

[activityView stopAnimating];
activityView.hidden=YES;

activityImageView.hidden=YES;

   } 
```

启动动画方法

```
 -(void)startActivity:(id)sender
   {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    activityImageView.hidden=NO;
    activityView.hidden=NO;

   [activityView startAnimating];
   [pool release];

  } 
```

上传数据方法

```
 -(void)uploadData{

CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

for (int i=0; i<appDelegate.coffeeArray.count; i++) {

    Coffee*coffeeObj=[appDelegate.coffeeArray objectAtIndex:i];

    int mynumber=coffeeObj.participant_Id;
    NSString*question_id=coffeeObj.question_Id;
    NSString*answer_text=coffeeObj.answer_text;
    NSString*answer_option=coffeeObj.answer_option;

    NSString *post =[[NSString alloc] initWithFormat:@"participant_id=%d&question_id=%@&answer_text=%@&answer_option=%@",mynumber,question_id,answer_text,answer_option];

    NSLog(post);
    NSURL *url=[NSURL URLWithString:@"http://celeritas-solutions.com/emrapp/SyncSurveyTest.php"];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
    [request setURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"%@",data);

     }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:31:47.347

你没有放`[activityView stopAnimating];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:32:52.340

活动.h

//在h文件中声明Activity指标，在Xib中添加Activity指标并连接

`IBOutlet UIActivityIndicatorView *activity;`

活动.m

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    [self startActivity];
}

-(void)startActivity{

    activity.hidden=NO;

    [activity startAnimating];
    [self uploadData];
    [self stopData];

}

-(void)uploadData
{
    NSLog(@"Uploading...");
}

-(void)stopData
{
    [activity stopAnimating];
    activity.hidden=YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:45:33.490

您需要为活动指示器启用属性 hidesWhenStopped

# php - 将文件转换为 blob 以保存在数据库中

> ID：12296991
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:19.750
> 
> 标签：php, mysql, blob

我有一个我们目前正在更新的旧用户网站。该站点的用户之前已经上传了存储在目录中的个人资料图片。我现在想将这些个人资料图像保留在数据库中，（易于备份所有数据）但在弄清楚如何做到这一点时遇到了麻烦。

有很多教程都在谈论从刚刚上传的文件中执行此操作并使用 tmp 名称等，但是如何使用已经上传的文件重新创建？

我研究了 `$data = file_get_contents($filename);` 似乎创建了一个二进制文件，但似乎没有保存在数据库中：

```
mysql_query("UPDATE profiles SET company_logo = mysql_real_escape_string('".$data."') WHERE id = 1 ") or die(mysql_error()); 
```

****更新**** 所以在研究了更多之后，我想我会和大多数人一起去保存图像，因为它们已经是......在文件夹中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:37:07.340

将图像存储在数据库中通常是个坏主意。

最好将图像存储在文件中，并在字段或表中保留参考。

但是，如果要存储它们，则必须将它们存储为 BLOB（Binairy Large OBject）。在 BLOB 字段上，不进行字符转换。当您存储它们时，您必须完全按照文件内容存储它们。所以删除`mysql_real_escape string`，因为它会弄乱你的二进制数据。

# c# - 如何衡量 MVC 网站的性能？

> ID：12296993
> 
> 赞同：3
> 
> 时间：2012-09-06T09:29:22.123
> 
> 标签：c#, asp.net-mvc, performance, nhibernate

我们的 MVC 网站非常慢，我想知道如何找到瓶颈。我使用 FireBug，我看到请求在服务器上需要 15 秒。当我点击刷新时，大约需要 3 秒。我想知道这怎么可能。是什么导致了 12 秒？

另外，我认为 3 秒也太长了，因为我请求的页面显示了 25 条记录（来自数据库）、一个菜单和一些用户信息。

我使用了 NHibernate 分析器，我没有看到任何需要很长时间执行的查询。都是几毫秒。

眼镜：

*   该站点是使用 MVC 2 构建的
*   我们使用 Ninject
*   我们使用 NHibernate
*   .NET 3.5
*   我们使用了很多 html.RenderPartial()
*   SQL Server 速成
*   Log4Net

我希望有人可以帮助我找到瓶颈。我不知道我可以尝试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:31:01.683

使用 Visual Studio 探查器：

[http://www.slideshare.net/AbhijitJana1/tune-your-aspnet-application-using-visual-std](http://www.slideshare.net/AbhijitJana1/tune-your-aspnet-application-using-visual-std) http://msdn.microsoft.com/en-us/magazine/cc337887.aspx [http://www. youtube.com/watch?v=Mcs9VqreEps](http://www.youtube.com/watch?v=Mcs9VqreEps)

更新（反映评论说 OP 有没有分析功能的 VS）：

您可以使用 EQATEC .NET 分析器，免费供个人使用：

[http://www.eqatec.com/tools/profiler/](http://www.eqatec.com/tools/profiler/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:39:57.953

您可以尝试像 Scott Hanselman 在这里解释的 mvc-mini-profiler： [http ://www.hanselman.com/blog/NuGetPackageOfTheWeek9ASPNETMiniProfilerFromStackExchangeRocksYourWorld.aspx](http://www.hanselman.com/blog/NuGetPackageOfTheWeek9ASPNETMiniProfilerFromStackExchangeRocksYourWorld.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:38:07.017

您可以查看[MVC mini Profiler](http://code.google.com/p/mvc-mini-profiler/)，这可能对您有用。

# sql-server - SQL Server 2008 R2 逗号分隔字段 vs 新表，优缺点？

> ID：12296998
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:37.553
> 
> 标签：sql-server, database-design

我需要记录根据发票支付的款项。我有一个带有几个字段的付款表。我需要存储在特定付款中使用的发票。付款到发票的关系是一对多。我无法改变这一点。我是创建一个字段来存储用逗号分隔的发票，还是创建一个新表来存储这些发票？

注意：当我说发票时，我只是指发票号（它是唯一标识符）。

两种方法的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:32:07.923

除了根本没有被规范化（甚至没有[1NF](http://en.wikipedia.org/wiki/Normal_form)指出属性（列）需要具有*不同的*值，即不是多个），还有很多关于“逗号分隔字段”的索引、连接、查询等问题.

简而言之 - 您创建一个新表来存储这些发票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:34:58.093

我的建议是使用单独的表格并参考关键列。优点是

1.  查询方便
2.  性能改进
3.  索引创建
4.  易于阅读和更多...

有关更多详细信息，请阅读 - 标准化。