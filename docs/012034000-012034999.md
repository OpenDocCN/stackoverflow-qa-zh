# StackOverflow 问答 12034000-12034999

# cordova - 更改 PhoneGap 文件系统根路径

> ID：12034002
> 
> 赞同：0
> 
> 时间：2012-08-20T07:52:10.113
> 
> 标签：cordova, marmalade

我想知道是否有任何方法可以更改 PhoneGap 的 fileSystem 对象？

我目前正在使用 Web Marmalade（其中包括修改后的 PhoneGap），window.requestFileSystem(LocalFileSystem.PERSISTENT...) 在我的 Android 手机上返回“wm”，而不是“/mnt/sdcard”之类的东西。这会导致问题，因为我无法写入 /mnt/sdcard - 会出现安全错误，很可能是因为 /mnt/sdcard 不是根文件系统“wm”的一部分。

所以我只是想知道是否有一种简单的方法来更改这个文件系统？我试过类似的东西：

```
var root = new DirectoryEntry('myroot', '/mnt/sdcard');
var fileSystem = new FileSystem('myfs', root); 
```

但这似乎没有帮助：

```
alert('fileSystem.root.fullPath: ' + fileSystem.root.fullPath);  //returns "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:11:25.947

你可以这样做：

```
var myRoot = null;
function myRoot() {
    window.resolveLocalFileSystemURI("/mnt/sdcard", function(dirEntry) {
      myRoot = dirEntry;
    });
} 
```

获取一个代表 /mnt/sdcard 的 DirectoryEntry 对象，并从中执行 File API 操作。

# php - 使用 php webdriver 脚本测试 jquery 自动完成功能

> ID：12034004
> 
> 赞同：0
> 
> 时间：2012-08-20T07:52:25.420
> 
> 标签：php, webdriver, jquery-autocomplete

请帮助我使用 php webdriver 脚本测试 jquery 自动完成小部件。我是 webdriver 脚本的新手。

# 这是我的代码

```
require_once "./phpwebdriver/WebDriver.php";
require_once "./phpwebdriver/LocatorStrategy.php";
$webdriver = new WebDriver("127.0.0.1", "4444");
$webdriver->connect("chrome");
$webdriver->get("http://URL_TO_WEBSITE"); 
$webdriver->typeKeys("ELEMENT_ID_TO_FIND", "a");
for ((int) $second = 0;; $second++) {
    if ($second >= 60) fail("timeout");
    try { if ($webdriver.isTextPresent("apple")) break; } catch (Exception e) {}
    Thread.sleep(1000);
}
$webdriver->mouseOver("/html/body/ul/li/a[. = \"apple\"]");
$webdriver->click("/html/body/ul/li/a[. = \"apple\"]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:22:58.023

使用 WebDriverWait 类。为我解决了同样的问题。

C#中的解决方案

```
 driver.FindElement(By.Id("ajaxTextBox")).SendKeys(searchString);
    WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
    wait.Until(x => x.FindElement(By.ClassName("li-menu-item"))); 
```

# wordpress - Wordpress 自定义帖子类型 - 404

> ID：12034006
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:52:35.493
> 
> 标签：wordpress, http-status-code-404, custom-post-type

我知道很多人会对此投反对票，但无论如何我都会问，因为这是一个合法的问题，没有其他答案有帮助。我将首先显示代码然后询问。

```
<?php

    add_action('init', 'items_register');
    add_action("admin_init", "admin_init");
    add_action('save_post', 'save_details');

    function save_details(){
        global $post;
        update_post_meta($post->ID, "shelf_image", $_POST["shelf_image"]);
    }

    function items_register() {

        $__Test_items_labels = array(
            'name' => _x('Test items', 'post type general name'),
            'sinTestlar_name' => _x('item Item', 'post type sinTestlar name'),
            'add_new' => _x('Add New item', 'item item'),
            'add_new_item' => __('Add New item Item'),
            'edit_item' => __('Edit item Item'),
            'new_item' => __('New item Item'),
            'view_item' => __('View item Item'),
            'search_items' => __('Search items'),
            'not_found' =>  __('Nothing found'),
            'not_found_in_trash' => __('Nothing found in Trash'),
            'parent_item_colon' => ''
        );

        $__Test_items_args = array(
            'labels' => $__Test_items_labels,
            'public' => true,
            'publicly_queryable' => true,
            'show_ui' => true,
            'query_var' => true,
            'rewrite' => array( 'slug' => 'our_items', 'with_front' => false ),
            'show_in_menu' => 'edit.php?post_type=page',
            'capability_type' => array('page','post'),
            'hierarchical' => true,
            'supports' => array('title','editor','thumbnail','post_attributes')
          ); 

          $__Test_items_cat_labels = array(
            'name' => _x('Test items Categories', 'post type general name'),
            'sinTestlar_name' => _x('items Category Item', 'post type sinTestlar name'),
            'add_new' => _x('Add New item Category', 'category item'),
            'add_new_item' => __('Add New item Category'),
            'edit_item' => __('Edit item Category'),
            'new_item' => __('New item Category'),
            'view_item' => __('View item Category'),
            'search_items' => __('Search item Categories'),
            'not_found' =>  __('Nothing found'),
            'not_found_in_trash' => __('Nothing found in Trash'),
            'parent_item_colon' => ''
        );

        $__Test_items_cat_args = array(
            'labels' => $__Test_items_cat_labels,
            'public' => true,
            'publicly_queryable' => true,
            'show_ui' => true,
            'query_var' => true,
            'menu_icon' => 'http://cdn1.iconfinder.com/data/icons/ledicons/cake.png',
            'rewrite' => array( 'slug' => 'our_items', 'with_front' => false ),
            'show_in_menu' => 'edit.php?post_type=page',
            'capability_type' => 'page',
            'hierarchical' => true,
            'supports' => array('title','editor','thumbnail','post_attributes')
        );  

        register_post_type( 'item' , $__Test_items_args );
        register_post_type( 'item_category' , $__Test_items_cat_args );
        flush_rewrite_rules( false );

    }

    function admin_init(){
        add_meta_box("item_parent_meta", "Test item Category", "item_catagory_parent", "item", "side", "low");
    }

    function item_catagory_parent(){
        global $post;
        $args = array( 'post_type' => 'item_category', 'posts_per_page' => 10 );
        $loop = new WP_Query( $args );
        echo '<select name="parent_id" id="parent_id" style="width:100%;">';
        echo '  <option value="">(no parent)</option>';
        foreach( $loop->posts as $key => $obj ) {
            if( $obj->post_status === 'publish' )
                echo '<option ' . ( (int)$post->post_parent === (int)$obj->ID ? 'selected="selected"' : '' ) . ' class="level-0" value="' . $obj->ID . '">' . $obj->post_title . '</option>';
        }
        echo '</select>';
    }

?> 
```

我不完全理解并且需要问这个问题的原因是因为它在一种情况下有效，但在另一种情况下无效。

以上注册了 2 种帖子类型，一种是类别，一种是子类别。

例如：

[http://www.the-tack-shop.co.uk/our_items/dsfdfd/](http://www.the-tack-shop.co.uk/our_items/dsfdfd/)

作品

[http://www.the-tack-shop.co.uk/our_items/dsfdfd/fggfdg/](http://www.the-tack-shop.co.uk/our_items/dsfdfd/fggfdg/)

返回 404。

在注册帖子类型时，它们几乎都有相同的参数。您可能还会注意到，我在一个元框中添加了一个复制父下拉列表的元框，该下拉列表确实正确设置了父帖子....

有谁知道为什么第二个不起作用？（请注意flush_rewite_rule，转到永久链接页面不起作用）。

希望有人能帮忙，

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:44:54.383

您可以尝试进入永久链接部分并再次保存！它对我有用

# java - 使用 glassfish、oracle 数据库和 eclipse 进行休眠

> ID：12034008
> 
> 赞同：-3
> 
> 时间：2012-08-20T07:53:05.547
> 
> 标签：java, eclipse, hibernate, glassfish-3

我正在学习`hibernate`，我正在使用`eclipse`IDE 并将`glassfish 3`用作我的应用服务器，最后但并非最不重要`Oracle 10g`的是我将连接到的数据库。

有人可以使用休眠和 Oracle 数据库 jar 所需的 jar 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:59:54.867

那么对于休眠，你应该在你的 POM 中包含以下内容。我真的建议您使用 Maven 之类的东西来构建您的项目。[如果您现在不能，请在http://mvnrepository.com/](http://mvnrepository.com/)上搜索依赖项，这至少会告诉您所需的 jars 并提供下载链接。

```
 <!-- Hibernate for ORM -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>

    <!-- Hibernate uses this for auditing -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-envers</artifactId>
        <version>${evers.version}</version>
    </dependency> 
```

我用

```
 <hibernate.version>4.1.0.Final</hibernate.version>
    <evers.version>4.1.0.Final</evers.version> 
```

对于两个版本。仅当您需要审核时才真正需要 Envers（这非常好）。对于 Oracle，这应该有效：

```
 <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc6</artifactId>
        <version>11.1.0.7.0</version>
    </dependency> 
```

不确定 10g 的正确版本是什么。另外，我对 glassfish 不熟悉，但是上面的两个应该可以帮助您。使用上面的链接找到您需要的合适的罐子。祝你冬眠好运......当它起作用时，它是继切片奶酪之后的下一件大事，如果它打破......好吧，它是地狱的产物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:29:21.973

您需要为您的项目添加 hibernate jar 和 oracle jdbc jar。这里是下载此 jar 的链接。

*   [休眠下载](http://www.hibernate.org/downloads)
*   [Oracle JDBC 下载](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)

# file-io - 使用 MPI 写入单个文件

> ID：12034009
> 
> 赞同：1
> 
> 时间：2012-08-20T07:53:08.370
> 
> 标签：file-io, mpi

我正在使用 MPI，我需要在单个文件上写入。对于一个最小的例子，我正在考虑这里提出的一个： [使用 mpi 将矩阵写入单个 txt 文件，](https://stackoverflow.com/questions/9777828/writing-a-matrix-into-a-single-txt-file-with-mpi) 其结果类似于我正在寻找的结果。但是我希望有这样的输出：

```
P2  
10 10  
0.000    0.000    0.000    0.000    0.000    0.000    0.000    0.000    0.000    0.000  
0.000    0.000    0.000    0.000    0.000    0.000    0.000    0.000    0.000    0.000  
1.000    1.000    1.000    1.000    1.000    1.000    1.000    1.000    1.000    1.000  
1.000    1.000    1.000    1.000    1.000    1.000    1.000    1.000    1.000    1.000  
2.000    2.000    2.000    2.000    2.000    2.000    2.000    2.000    2.000    2.000  
2.000    2.000    2.000    2.000    2.000    2.000    2.000    2.000    2.000    2.000  
3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000  
3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000  
3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000  
3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000    3.000 
```

其中 P2 是任意字符串，10 10 是指行数和列数。我想这个字符应该只由一个进程编写，但我无法处理这个问题。

# facebook - 使用 CodeIgniter dx-auth 连接 fb/gmail/yahoo/openid

> ID：12034010
> 
> 赞同：2
> 
> 时间：2012-08-20T07:53:12.787
> 
> 标签：facebook, codeigniter, openid

有人对如何为此库添加 Facebook Connect 功能有任何建议吗？我应该深入研究源代码并添加自己的功能，还是有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:09:27.037

我已经通过结合 dx_auth 和 a3m 来解决这个问题。该解决方案涉及调整 a3m 以使用 dx_auth 表。

# javascript - 拉伸 div 但不是整个页面

> ID：12034012
> 
> 赞同：1
> 
> 时间：2012-08-20T07:53:34.780
> 
> 标签：javascript, jquery, css

我有一个动态高度的框架。
其中，我有 3 个部分，其中之一是内容部分。

我想将内容的边缘固定到与框架的恒定距离。

这是[重现该问题的小提琴](http://jsfiddle.net/BV5Z6/2/)。我在小提琴中使用 jquery-ui-dialog 只是因为它在重现问题时更容易使用。该解决方案不能涉及 jquery-ui-dialog 特定代码。它可以使用 jquery 和 jquery-ui。

如果存在 CSS 解决方案，则更可取。

![在此处输入图像描述](../Images/8c749865fb226378e59cc513f494a5da.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:04:02.823

定位元素更容易解决您描述的问题。例如，您可以使用`position:absoulte`. 然后使用`top`, `right`, `bottom`&`left`属性，您可以将元素放置在需要的位置。这是一个示例css：

```
#content {
    border: 1px solid blue;
    bottom: 34px;
    top: 34px;
    left:10px;
    right:10px;
    position: absolute;
}
#footer {
    border: 1px solid green;
    bottom: 10px;
    left:10px;
    right:10px;
    position: absolute;
} 
```

**演示：http:** [//jsfiddle.net/BV5Z6/4/](http://jsfiddle.net/BV5Z6/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:26:07.647

您需要应用“ **alsoResize** ”选项...然后，您的内容将与容器同时增长。

引用：

```
Resize these elements synchronous when resizing.

Code examples

Initialize a resizable with the alsoResize option specified.
$( ".selector" ).resizable({ alsoResize: ".other" });
Get or set the alsoResize option, after init.
//getter
var alsoResize = $( ".selector" ).resizable( "option", "alsoResize" );
//setter
$( ".selector" ).resizable( "option", "alsoResize", ".other" ); 
```

来源：[jQuery UI - Resizable option-alsoResize](http://jqueryui.com/demos/resizable/#option-alsoResize)

# python - 有没有办法使用 Selenium Webdriver (firefox) 记录 http 请求/响应？

> ID：12034013
> 
> 赞同：3
> 
> 时间：2012-08-20T07:53:59.353
> 
> 标签：python, selenium, webdriver

有没有办法使用 Selenium Webdriver (firefox) 记录 http 请求/响应？

我想可以通过代理驱动网络流量并记录它，但也许有更简单的“内部”硒解决方案？

在#selenium 频道上问了这个问题：

> > > **你需要代理它来捕获请求**

所以，看起来是为它设置代理的唯一方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:30:41.603

不，WebDriver 没有任何方法来检查或修改浏览器和网站之间发生的 HTTP 流量。您已经从 Selenium IRC 频道（甚至可能来自 Selenium 提交者）获得的信息是正确的。代理是这里的正确方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-22T08:31:50.827

现在是 2021 年，答案是：**是**。

你可以使用新的库： [selenium-wire](https://github.com/wkeeling/selenium-wire)

# 如何使用`selenium-wire`

## 安装

`pip install selenium-wire`

## 更改代码

从改变

```
from selenium import webdriver 
```

到

```
from seleniumwire import webdriver 
```

## 添加您的代码

之后`driver.get(yourUrl)`，添加：

```
# Access requests via the `requests` attribute
for request in driver.requests:
    if request.response:
        print(
            request.url,
            request.response.status_code,
            request.response.headers['Content-Type']
        ) 
```

可以得到你的预期`request`和`response`。

# android - 如何在 Java 项目中的每个函数上填充 log/println 调用？

> ID：12034016
> 
> 赞同：1
> 
> 时间：2012-08-20T07:54:05.687
> 
> 标签：android, eclipse

我即将启动一个 android 项目，目前正在查看一些来自互联网的示例代码。然而，有时很难分辨哪些类正在处理哪些功能。

所以我开始填充：

```
Log.d(LogUtils.DEBUG_TAG + getClass().getName(), new Exception().getStackTrace()[0].getMethodName() + " starts."); 
```

到每一个功能。

我只是想知道是否有一种快速的方法可以将此语句自动填充到项目中的每个函数中？

谢谢vm，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:07:01.843

我正在将此代码用于日志。它会自动为您提供有关调用它的类和方法名称的信息。

```
public static void log(final String msg)
{

    final Throwable t = new Throwable();
    final StackTraceElement[] elements = t.getStackTrace();

    final String callerClassName = elements[1].getFileName();
    final String callerMethodName = elements[1].getMethodName();

   String TAG = "[" + callerClassName + "]";

   Log.d(TAG, "[" + callerMethodName + "] " + msg);

} 
```

这是示例：

```
log("Hello World"); 
```

给你：

```
[MainActivity.java] [onCreate] Hello World 
```

现在您看到该方法是从**MainActivity.java**文件中使用**onCreate**方法调用的。

> 我只是想知道是否有一种快速的方法可以将此语句自动填充到项目中的每个函数中？

不，您需要手动添加它。但是，您可以在我上面的方法中使用布尔变量来打开/关闭日志。

完整的源代码可以在[这里](https://bitbucket.org/dmytrodanylyk/android-library/src/92f1821bc6fc/src/com/dd/utils/log/L.java)找到。

# java - 在scala中访问java基类的静态成员

> ID：12034017
> 
> 赞同：6
> 
> 时间：2012-08-20T07:54:07.257
> 
> 标签：java, scala, inheritance, static, scala-java-interop

我有一些用Java编写的代码。对于新课程，我计划用 Scala 编写。我在访问基类的受保护静态成员时遇到问题。这是示例代码：

*Java代码：*

```
class Base{
    protected static int count = 20;
} 
```

*斯卡拉代码：*

```
class Derived extends Base{
    println(count);
} 
```

对此有何建议？我怎么能在不修改现有基类的情况下解决这个问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:02:56.530

这在 Scala 中是不可能的。由于 Scala 没有表示`static`您不能访问`protected static`父类的成员。这是一个[已知的限制](http://www.scala-lang.org/faq/4#4n1381)。

解决方法是执行以下操作：

```
// Java
public class BaseStatic extends Base {
  protected int getCount() { return Base.count; }
  protected void setCount(int c) { Base.count = c; }
} 
```

现在您可以从这个新类继承并通过 getter/setter 方法访问静态成员：

```
// Scala
class Derived extends BaseStatic {
  println(getCount());
} 
```

这很难看——但如果你真的想使用`protected static`成员，那么这就是你必须做的。

# actionscript-3 - AS3：沿两个圆的公切线画一条线

> ID：12034019
> 
> 赞同：3
> 
> 时间：2012-08-20T07:54:17.497
> 
> 标签：actionscript-3, math, geometry

**我得到** 的是舞台上的两个圆圈，circ1 和 circ2。circ1 的半径为 60，circ2 的半径为 30。

circ2 可以在播放时在舞台周围拖动。

**我想要** 的是通过它们共同的外切线连接圆的两条线。这是为了把一张旧海报变成一个互动的乐趣盒。这是[海报的链接](http://2.bp.blogspot.com/_COwnPIDsWS4/R9YLLPtJ8iI/AAAAAAAAAJI/xYiWvOPP9Nk/s1600/hermann+eidenbenz+-+poter+for+%27werkbund+idea+and+werkbund+work.gif)，它可能会帮助您理解我的意思（尽管现在我只担心两个圈子自己）。

**问题：** 我知道如何用笔和纸找到共同的切线，但是当我试图设想如何用 Flash 可能理解的术语来表达这一点时，我的大脑就崩溃了。我不知道如何使用 ActionScript 来实现这一点。

**我已经尝试过：** 我环顾四周，[这是我能找到的最接近我](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Tangents_between_two_circles)想要实现的目标（示例应用程序可在页面底部下载）。唯一的区别是这包括我不需要的内部切线。

不幸的是，这个源代码是用 Java 编写的，尽管我尽了最大的努力，但我对移植到 AS3 的理解还不够。

到目前为止，我自己设法实现的只是为每个圆的中心定义点，然后意识到我无法为变量制作快速求解方程。然后我花了几个小时谷歌搜索试图弄清楚如何从这里开始。

任何帮助将不胜感激，这是本周末到期的学校项目的工作。我可能已经咬得比我能在这里咀嚼的多，但现在回头已经太迟了。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:34:53.840

```
function DrawTangents(p1 : Point, r1 : Number, p2 : Point, r2 : Number) : void {
    var dx = p2.x - p1.x;
    var dy = p2.y - p1.y;
    var dist = Math.sqrt(dx*dx + dy*dy);

    this.graphics.drawCircle(p1.x, p1.y, r1);
    this.graphics.drawCircle(p2.x, p2.y, r2);

    if (dist <= Math.abs(r2 - r1)) {
        // The circles are coinciding. There are no valid tangents.
        return;
    }

    // Rotation from the x-axis.
    var angle1 = Math.atan2(dy, dx);

    // Relative angle of the normals. This is equal for both circles.
    var angle2 = Math.acos((r1 - r2)/dist);

    this.graphics.moveTo(p1.x + r1 * Math.cos(angle1 + angle2),
                         p1.y + r1 * Math.sin(angle1 + angle2));
    this.graphics.lineTo(p2.x + r2 * Math.cos(angle1 + angle2),
                         p2.y + r2 * Math.sin(angle1 + angle2));

    this.graphics.moveTo(p1.x + r1 * Math.cos(angle1 - angle2),
                         p1.y + r1 * Math.sin(angle1 - angle2));
    this.graphics.lineTo(p2.x + r2 * Math.cos(angle1 - angle2),
                         p2.y + r2 * Math.sin(angle1 - angle2));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:59:46.393

这是您为两个圆圈描述的工作代码 - 假设两个圆圈大小相同。否则它是一个近似值，因为它假设切点将在垂直于连接圆心的直线上。

```
var point1 : Point = new Point(100, 100);
var point2 : Point = new Point(300, 50);
var radius1 : int = 60;
var radius2 : int = 30;

// if you draw a line from the first circle origo to
// the second origo, this is the angle of that line
var ang : Number = Math.atan2(point2.y - point1.y, point2.x - point1.x);

// find the first point on the circumference that is orthogonal
// to the line intersecting the two circle origos
var start1 : Point = new Point(point1.x + Math.cos(ang + Math.PI / 2) * radius1, 
                               point1.y + Math.sin(ang + Math.PI/2)* radius1);
var end1 : Point = new Point(point2.x + Math.cos(ang + Math.PI / 2) * radius2, 
                             point2.y + Math.sin(ang + Math.PI/2)* radius2);

// find the second point on the circumference that is orthogonal
// to the line intersecting the two circle origos
var start2 : Point = new Point(point1.x + Math.cos(ang - Math.PI / 2) * radius1, 
                               point1.y + Math.sin(ang - Math.PI/2)* radius1);
var end2 : Point = new Point(point2.x + Math.cos(ang - Math.PI / 2) * radius2,
                             point2.y + Math.sin(ang - Math.PI/2)* radius2);

// draw everything on the stage
this.graphics.lineStyle(1, 0x0);
this.graphics.drawCircle(point1.x, point1.y, radius1);
this.graphics.drawCircle(point2.x, point2.y, radius2);

this.graphics.moveTo(start1.x, start1.y);
this.graphics.lineTo(end1.x, end1.y);

this.graphics.moveTo(start2.x, start2.y);
this.graphics.lineTo(end2.x, end2.y); 
```

# java - 用于在 web 应用程序中引导方法的启动时加载 Servlet 的替代方案

> ID：12034026
> 
> 赞同：0
> 
> 时间：2012-08-20T07:54:36.070
> 
> 标签：java, scala, web-applications

我正在寻找一个简单的库，用于在启动时在我的 webapp 中引导代码。

我知道这可以通过设置一个启动时加载参数的 servlet 来完成。但我想要更干净、更简单的东西。像注释一样简单的东西，我可以把它放在我的 java 或 scala 方法中。

```
@Boot
def myBootMethod() = {} 
```

我也不想要像 spring 等重量级的库，它的功能远不止于此。我只是想引导一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:58:05.997

您可以实现 ServletContextListener 并在 web.xml 中配置它或使用适当的注释。

在 ServletContextListener 中，可以实现两种方法：

`public void contextInitialized(ServletContextEvent e)`在部署 Web 应用程序时调用。

`public void contextDestroyed(ServletContextEvent e)`在取消部署 Web 应用程序时调用。请注意，如果 servlet 容器以非常规方式停止，则可能不会调用此方法。

# jquery - AJAX：使用组合框自动选择

> ID：12034028
> 
> 赞同：0
> 
> 时间：2012-08-20T07:54:42.753
> 
> 标签：jquery

我正在组合框中填充列表，例如

![在此处输入图像描述](../Images/6c7ed0e479a5fc96cc0d94644c2baf52.png)

这是我在文本框中调用**onkeyup**的函数：

```
function findword(id, comptext){

        if(comptext.value != ''){
            for (i=0;i<id.options.length;i++){
                id.options[i].selected = false;
            }

            var sc=comptext.value;
            var r, re;
            re = /\(/i;
            r = sc.replace(re, "\\(");
            sc=r;
            re = /\)/i;
            r = sc.replace(re, "\\)");
            sc=r;
            re = /\./i;
            r = sc.replace(re, "\\.");
            sc=r;
            re = /\+/i;
            r = sc.replace(re, "\\+");
            sc=r;
            re = /\?/i;
            r = sc.replace(re, "\\?");
            sc=r;
            var cmplength=sc.length;
            var rex=RegExp(sc, "gi");
            for (i=0;i<id.options.length;i++){
                var sts=id.options[i].text.substring(0,cmplength);
                var result=sts.search(rex);
                if(result>-1){
                    id.options[i].selected = true;
                }
            }
        }else{
            for (i=0;i<id.options.length;i++){
                id.options[i].selected = false;
            }
        }
    } 
```

**使用此功能，我可以选择所有以文本框中**指定输入开头的值，假设我输入**api**它选择所有以**api**开头的值，但如果我输入**颜色**它什么也不做。

现在请查看上述功能并指出我还需要添加哪些检查以及我应该在哪里添加这些检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:31:29.963

好吧，我自己修好了

```
function findword(id, comptext){

        if(comptext.value != ''){
            var srcit = comptext.value;

            for (i=0;i<id.options.length;i++){
                id.options[i].selected = false;
            }

            var patt = new RegExp(srcit, 'i');

            for (i=0;i<id.options.length;i++){

                var result = patt.exec(id.options[i].text);
                if(result != null){
                    id.options[i].selected = true;
                }
            }
        }else{
            for (i=0;i<id.options.length;i++){
                id.options[i].selected = false;
            }
        }
    } 
```

[http://www.w3schools.com/js/js_obj_regexp.asp](http://www.w3schools.com/js/js_obj_regexp.asp)

# c++ - EOF 进入无限循环

> ID：12034032
> 
> 赞同：0
> 
> 时间：2012-08-20T07:54:59.143
> 
> 标签：c++, c, linux, file

我正在从一个文件中寻找和唤醒一些文本并将其写入另一个文件。

当我试图打开并读取 log_2 来做某事时，如果 grep 返回了一些字符串，它可以正常工作。

但是，如果 grep 本身*返回任何东西*，我的代码将进入无限循环。我尝试打印循环中正在读取的字符，它会无限打印一个'ÿ'。

```
system("egrep 'Security = |State = ' log.txt > log_1.txt");
system("awk -F ' Security = | State = { Interface=' '{print $2}' log_1.txt > log_2.txt ");

// The exact strings to be greped and awked are different. Cant write them here.    

FILE *pReadFile;
char cTemp;

pReadFile=fopen ( "log_2.txt" , "r+");

if (pReadFile==NULL )
{
    std::cout << ("Error opening Config file");
    fclose(pReadFile);
    return ;
}

cTemp = fgetc (pReadFile);

if(cTemp == EOF)    
return ; 

while( cTemp != EOF )
{
      // Do Something

      cTemp = fgetc (pReadFile);
} 
```

有人可以解释吗？

* * *

只是为了以防万一有人遇到类似问题，此代码在基于英特尔的 Ubuntu 系统上运行良好，但带有 Ubuntu 的飞思卡尔系统会导致问题。所以要小心，并始终使用 int 以确保安全。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T07:55:39.260

`EOF`是一个`int`不是一个`char`。

```
char cTemp; 
```

应该：

```
int Temp; 
```

看这里的解释：

[http://c-faq.com/stdio/getcharc.html](http://c-faq.com/stdio/getcharc.html)

# ios - 返回 NSDictionary - 好的程序设计？

> ID：12034034
> 
> 赞同：2
> 
> 时间：2012-08-20T07:55:08.300
> 
> 标签：ios, nsdictionary

所以我的类中有几个方法返回 NSDictionary 有响应。问题是，返回 NSDictionary 并不能真正告诉您字典的内容。

我觉得好像另一个编程想要使用我的类，他/她会发现很难准确理解特定方法返回的信息类型。

我的问题是：这被认为是糟糕的编程设计吗？类应该是不言自明和可重用的。

或者这被认为是可以的，因为您可以确定字典包含哪些键，并且只要键具有足够的描述性，它应该是不言自明的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:38:25.217

我会说答案是：它取决于

如果您在整个项目中使用字典而不是对象，这是一个糟糕的设计。如果您仅在某些特定情况下使用它们，例如设置列表或类似情况，则可能没问题。

如果此代码将被其他人使用，请确保将其记录在某个地方，以便人们知道他们将从那里得到什么，并了解字典实际代表什么。

（我曾经在一个项目中工作，其中每个项目都是字典，现在是真正的文档，所以了解字典中内容的唯一方法是进入调试模式，设置断点并在调试器中查看值。你不想这样做对人民。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:50:48.607

如果它是一个具体的、重复出现的数据表示，那么您真的应该考虑使用一个类来表示这些数据。

> 这被认为是糟糕的编程设计吗？

它可以是，或者在某些情况下字典可能是最好的解决方案。这实际上取决于您返回的数据，以及它如何影响客户端。如果您可以通过创建一个类来表示这些数据来简化程序（在大图中），那么字典肯定是错误的解决方案。

一个典型的迹象是客户端在接收您的数据时所经历的噪音——他们是否需要在整个地方进行一堆动态密钥和类型测试？那么如果你的程序被表示为一个适当的类，那么它可能是一个很好的候选者，它可以被简化并且更容易维护。

# mysql - 我们不能使用 getString() 从 mysql 数据库中获取日期字段类型吗

> ID：12034045
> 
> 赞同：1
> 
> 时间：2012-08-20T07:56:01.977
> 
> 标签：mysql, jdbc

在 mysql 数据库中，我有一个名为type`"date"`的字段。`date`当我尝试使用java检索`"date"`字段中的值时，出现异常，如下所示：`getString()`

`java.sql.SQLException: Value '0000-00-00' can not be represented as java.sql.Date`

我们不能用它`getString()`来获取日期类型值吗？还是名称“日期”与日期字段类型冲突？还是有其他问题？

`Desc author`

```
Field   Type    Null    Default

date    date    YES     NULL 
```

我只是好奇这个，仅此而已。作为解决方案，我尝试转换`"date"`using`DATE_FORMAT(date, '%d %m %Y') as dt`并且它有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:59:12.757

在 java 中，当您尝试从 a 获取日期时`ResultSet`，您需要使用`getDate`而不是`getString`.

**[来源链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html)**

`getString`能够解决这个问题`DATE_FORMAT(date, '%d %m %Y')`，因为它现在是字符串格式。

# actionscript-3 - 在 AS3 中，如何将 vector2D 设为编译时常量？

> ID：12034048
> 
> 赞同：0
> 
> 时间：2012-08-20T07:56:16.933
> 
> 标签：actionscript-3

我在我正在处理的脚本中使用 vector2D 属性/方法/组件，它显示为蓝色，好像它是合法的 AS3 组件，但是，当我测试代码时，我收到错误 #1046。

是否有某种“flash.display ...”行可以让程序识别vector2D？很遗憾，我似乎无法从 Flash 网站得到直接的答案。

或者，是否有任何关于在 AS3 中实现 SAT（轴分离定理）碰撞的好的教程或链接？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:21:47.163

据我所知，没有这样的课程。但是有一个 Point 类，它是一个 2d 向量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:23:14.587

如果您从事物理方面的工作，您可能会考虑使用（至少部分）Box2d

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:03:37.570

[Play Chilla](http://www.playchilla.com/vector-2d-for-as3)对 2D 向量有很好的实现，[Grant Skinner 的](http://gskinner.com/blog/archives/2008/01/source_code_see.html)实现也很不错。

有关 SAT 算法的教程，请查看[flash 游戏 N 的实现](http://www.metanetsoftware.com/technique.html)或[这个更静态的教程](http://www.sevenson.com.au/actionscript/sat/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T15:12:12.187

简单地用谷歌搜索[as3 分离轴定理](https://www.google.co.uk/search?q=as3%20separation%20axis%20theorem&sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8)应该会有所帮助。[Polygonal 博客文章](http://lab.polygonal.de/?p=225) 看起来很方便（速度很快，并且有很好的参考）。

默认情况下，as3 提供[Point](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Point.html)和[Vector3D](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Vector3D.html)类（如果有帮助）。点有点有限，但 Vector3D 支持典型的矢量运算（如点和叉积）。

# ios - 在 didSelectRowAtIndexPath 中使用“单元格”

> ID：12034049
> 
> 赞同：-1
> 
> 时间：2012-08-20T07:56:23.530
> 
> 标签：ios, uitableview

我可以在 CellForRowAtIndexPath 中使用“cell.text”，但是当我尝试在 didSelectRowAtIndexPath 中使用它时，它会显示未声明的“cell”

我是否必须再次声明或如何解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:04:05.573

在`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;`回调中，您只是没有任何`cell`参考。您可以通过`- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath;`例行程序获得它，如下所示：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
    //whatever you want to do with the cell
} 
```

但无论如何，正如您之前创建的单元格一样，您应该能够从`indexPath`. 像这样的东西：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSInteger row = indexPath.row;
    SomeDataObject* object = [someDataArray objectAtIndex:row];
    //whatever you want to do with the data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:03:36.207

应该没有真正需要尝试访问`didSelectRowAtIndexPath`. 您很可能将用于填充表数据的数据存储在一个`array`或类似文件中，因此您应该能够`array`使用 indexPath 变量从该数据中访问它（例如`[indexPath row]`，您可能需要`[indexPath section]`根据您的设置考虑）。

# android - 开始新的活动 android app dev

> ID：12034050
> 
> 赞同：0
> 
> 时间：2012-08-20T07:56:28.157
> 
> 标签：android, eclipse, android-intent, android-activity

我是android开发的新手。按下图像按钮后，我一直在尝试开始新的活动。但是当我尝试在模拟器中运行它时，我总是得到一个错误：“ *AppName*已停止”。

这是我的代码： 图片按钮：

```
 <ImageButton
        android:id="@+id/FirstAidButton"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_toLeftOf="@+id/BodyMassIndex"
        android:background="@null"
        android:contentDescription="@string/firstaid"
        android:src="@drawable/firstaid" 
        android:onClick="fatTutorial" /> 
```

爪哇：

```
public void fatTutorial(View view) {
        Intent intent = new Intent(this, FirstAidTutorial.class);

        startActivity(intent);
    } 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="dr.droid"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/drdroid"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Home"
        android:label="@string/title_activity_home" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
   <activity android:label="@string/title_text" android:name="dr.droid.FirstAidTutorial"/>

   </application>

</manifest> 
```

接收类（FirstAidTutorial）：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        Intent intent = getIntent();
    } 
```

日志猫：

```
 08-20 18:13:28.428: E/Trace(633): error opening trace file: No such file or directory (2)
08-20 18:13:28.898: D/dalvikvm(633): GC_FOR_ALLOC freed 256K, 4% free 8140K/8455K, paused 66ms, total 71ms
08-20 18:13:29.008: D/dalvikvm(633): GC_FOR_ALLOC freed 194K, 5% free 8254K/8647K, paused 40ms, total 41ms
08-20 18:13:29.619: I/Choreographer(633): Skipped 81 frames!  The application may be doing too much work on its main thread.
08-20 18:13:29.738: D/gralloc_goldfish(633): Emulator without GPU emulation detected.
08-20 18:13:32.068: D/AndroidRuntime(633): Shutting down VM
08-20 18:13:32.098: W/dalvikvm(633): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-20 18:13:32.388: E/AndroidRuntime(633): FATAL EXCEPTION: main
08-20 18:13:32.388: E/AndroidRuntime(633): java.lang.RuntimeException: Unable to start activity ComponentInfo{dr.droid/dr.droid.FirstAidTutorial}: android.view.InflateException: Binary XML file line #8: Error inflating class <unknown>
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.os.Looper.loop(Looper.java:137)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-20 18:13:32.388: E/AndroidRuntime(633):  at java.lang.reflect.Method.invokeNative(Native Method)
08-20 18:13:32.388: E/AndroidRuntime(633):  at java.lang.reflect.Method.invoke(Method.java:511)
08-20 18:13:32.388: E/AndroidRuntime(633):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-20 18:13:32.388: E/AndroidRuntime(633):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-20 18:13:32.388: E/AndroidRuntime(633):  at dalvik.system.NativeStart.main(Native Method)
08-20 18:13:32.388: E/AndroidRuntime(633): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class <unknown>
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
08-20 18:13:32.388: E/AndroidRuntime(633):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-20 18:13:32.388: E/AndroidRuntime(633):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.Activity.setContentView(Activity.java:1867)
08-20 18:13:32.388: E/AndroidRuntime(633):  at dr.droid.FirstAidTutorial.onCreate(FirstAidTutorial.java:13)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.Activity.performCreate(Activity.java:5008)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-20 18:13:32.388: E/AndroidRuntime(633):  ... 11 more
08-20 18:13:32.388: E/AndroidRuntime(633): Caused by: java.lang.reflect.InvocationTargetException
08-20 18:13:32.388: E/AndroidRuntime(633):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-20 18:13:32.388: E/AndroidRuntime(633):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
08-20 18:13:32.388: E/AndroidRuntime(633):  ... 24 more
08-20 18:13:32.388: E/AndroidRuntime(633): Caused by: android.content.res.Resources$NotFoundException: Resource is not a ColorStateList (color or path): TypedValue{t=0x1/d=0x7f060000 a=-1 r=0x7f060000}
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.content.res.Resources.loadColorStateList(Resources.java:2035)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.widget.TextView.<init>(TextView.java:772)
08-20 18:13:32.388: E/AndroidRuntime(633):  at android.widget.TextView.<init>(TextView.java:442)
08-20 18:13:32.388: E/AndroidRuntime(633):  ... 27 more 
```

急救教程.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="10dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/AnimalBite"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="@string/animalbite"
        android:textColor="#CC0000"
        android:textColorHint="@style/AppTheme"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/ChokingInfant"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="@string/chokinginfant"
        android:textColor="#CC0000"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/ChokingChild"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="@string/chokingchild"
        android:textColor="#CC0000"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/ChokingAdult"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="@string/chokingadult"
        android:textColor="#CC0000"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/Convulsion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="@string/convulsion"
        android:textColor="#CC0000"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/CPRAdult"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/cpradult"
        android:padding="5dp"
        android:textColor="#CC0000"
        android:textSize="25dp" />
    <TextView
        android:id="@+id/CPRInfant"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/cprinfants"
        android:padding="5dp"
        android:textColor="#CC0000"
        android:textSize="25dp" />
    <TextView
        android:id="@+id/HeimlichManeuver"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/heimlichmaneuver"
        android:padding="5dp"
        android:textColor="#CC0000"
        android:textSize="25dp" />
    <TextView
        android:id="@+id/MinorBurn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/minorburn"
        android:padding="5dp"
        android:textColor="#CC0000"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/MinorCut"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/minorcut"
        android:padding="5dp"   
        android:textColor="#CC0000"
        android:textSize="25dp" />

</LinearLayout> 
```

有任何想法吗？而且，我如何为该新活动创建一个 xml，以便我可以将设计/布局放入其中。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T07:57:50.423

在清单文件中声明`FirstAidTutorial`Activity。

```
<activity android:label="@string/title_text" android:name=".FirstAidTutorial"/> 
```

> 如何为该新活动创建一个 xml，以便我可以将设计/布局放入其中。

首先在 res -> layout 文件夹中创建一个 xml 文件，然后在 FirstAidTutorial Activity 中使用`setContentView(R.layout.yourlayout);`.

```
public class FirstAidTutorial extends Activity {

    @Override
    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);

        setContentView(R.layout.yourlayout);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T06:47:23.543

像这样在清单中声明 FirstAidTutorial。您的包裹应以“com”开头。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.dr.droid"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="15" />

<application
android:icon="@drawable/drdroid"
android:label="@string/app_name"
android:theme="@style/AppTheme" >

 <activity
    android:name=".Home"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity
    android:name=".FirstAidTutorial"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>

   </application> 
```

# hibernate - 如何在 Hibernate 中保存多个实体？

> ID：12034055
> 
> 赞同：5
> 
> 时间：2012-08-20T07:57:12.723
> 
> 标签：hibernate, jpa

在我的 Java Web 应用程序中，我想一次保存每 100 个保存实体实例，最好的方法是什么？我必须尊重一些时间限制，持久化操作应该很快。我有比其他方法更快的方法吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T08:18:18.503

基本上你正在寻找的是使用 JPA 批量插入数据库。这些主题已经提出，这些将帮助您：

*   [JPA/Hibernate 批量（批量）插入](https://stackoverflow.com/questions/2773302/jpa-hibernate-bulkbatch-insert)
*   [使用 JPA/EJB3 进行批量插入](https://stackoverflow.com/questions/448181/batch-inserts-with-jpa-ejb3)

# 概括

*   **使用 Hibernate 的批量插入。**Hiberate 提供了[批量插入和更新](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch15.html)实体的方法。

*   **禁用自动 ID 生成。** 如果您自动生成 id，Hibernate 会为每个实体执行查询以生成主键。

# 观点

基本上我认为禁用自动 ID 生成是一个坏主意。您可以采用 Hibernate 的大部分批处理方法，但这不会为您节省太多性能。

完成此操作后，我建议您在应用程序的其他层中寻找优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T11:14:28.210

如果您使用与 Spring 集成的 Hibernate，则可以使用`HibernateTemplate#saveOrUpdateAll`

```
 mHibernateTemplate.saveOrUpdateAll(entities); 
```

# ios - 如何使用 Core Data 和 AFIncrementalStore 将数据发布到服务器？

> ID：12034056
> 
> 赞同：0
> 
> 时间：2012-08-20T07:57:14.620
> 
> 标签：ios, core-data, afnetworking

我刚刚开始使用很棒的[**AFIncrementalStore**](https://github.com/AFNetworking/AFIncrementalStore)并设法运行一个基本的 iOS 应用程序，该应用程序显示来自服务器的数据（JSON 格式）显示在 UITableView 中。

但是如何将数据发布到同一个（RESTful）服务器？只需创建一个新`NSManagedObject`实例并将属性保存到其中即可将数据保存到本地 Core Data 存储中，但不会将任何内容发布到服务器。

AFIncrementalStore[自述文件](https://github.com/AFNetworking/AFIncrementalStore)在“后续步骤”部分中提到了“POST 到服务器”，但有人可能已经找到了办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:20:15.320

如果它列在“下一步”下，并且没有人提交包含实现的拉取请求，那么很可能还没有人实现它。因此，您的选择是：

1.  阅读 NSIncrementalStore 文档并更新 AFIncrementalStore 代码以支持 POST-to-server，或者
2.  等别人去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:59:47.643

Heroku 现在有一个关于使用 AFIncrementalStore 和 Core Data Buildpack 构建待办事项应用程序的教程，包括列出和发布新数据：

[https://devcenter.heroku.com/articles/ios-core-data-buildpack-app](https://devcenter.heroku.com/articles/ios-core-data-buildpack-app)

# sql - 如何在 EXEC 中输出选项卡 [CHAR(9)]

> ID：12034057
> 
> 赞同：5
> 
> 时间：2012-08-20T07:57:21.770
> 
> 标签：sql, sql-server, tsql

我知道我可以做到以下几点：

```
DECLARE @Tab CHAR(1)
SET @Tab = CHAR(9)
EXEC('xp_cmdshell ''echo ' + @Tab + 'Some text>> C:\test.txt'', NO_OUTPUT') 
```

但是有没有办法在 1 行中做到这一点？即不需要声明和设置tab，直接在`EXEC`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:33:19.057

在一行中，但不删除声明。EXEC 和 sp_executesql 不允许在命令或参数中使用函数调用。因此，您需要声明一个字符串变量以在命令中插入 CHAR(9)：

```
exec('DECLARE @str varCHAR(200);
      set @str = ''xp_cmdshell ''''echo '' + CHAR(9) + ''Some text>> C:\test.txt'''', NO_OUTPUT'';
      EXEC(@str)'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:09:48.360

试试这个：

```
 declare @str varchar(500)= 'xp_cmdshell ''echo '+ char(9)+' Some text>>
   C:\test.txt'', NO_OUTPUT'
exec(@str) 
```

# c# - 在访问和修改父表单值方面需要帮助

> ID：12034065
> 
> 赞同：-2
> 
> 时间：2012-08-20T07:57:58.327
> 
> 标签：c#, .net, winforms, windows-applications

我在 Form1 中有 1 个标签。

现在我在 Form2 中执行一些操作。（我的 form1 已经打开）

现在我想通过 Form2 的一些方法来更新 Form1 的标签。

```
 Form1 frm=new Form1();
        Label label = frm.label1;
        MethodInvoker action = () => label.Text = "Finished";
        label.BeginInvoke(action); 
```

这是我在form1中编写的代码。但我收到以下异常：“在创建窗口句柄之前，无法在控件上调用 Invoke 或 BeginInvoke。”

那么解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:06:20.297

这是你`Form2?`和你说的代码`Form1`已经打开了？您不会以`Form1`这种方式访问​​，因为您正在创建一个新表单，而不是使用现有表单。

您收到此错误是因为您尚未显示表单，因此它没有`Handle`. 我认为，您可以在显示窗口之前强制使用句柄`CreateHandle`，但在这种情况下，这不是您的解决方案。

是`Form2`模态形式吗？然后，您可以将新标签文本公开为 的属性`Form2`并使用`Form1`.

`Form1`：

```
Form2 frm = new Form2();
frm.ShowDialog();
Label1.Text = frm.NewLabelText; 
```

`Form2`：

```
public string NewLabelText
{
   get { return this.myMethodToGetLabelText(); }
} 
```

如果表单不是模态的并且应该更新您最好的选择可能是使用`delegates`

# java - Felix 如何使用 FrameworkWiring.getDependencyClosure

> ID：12034070
> 
> 赞同：1
> 
> 时间：2012-08-20T07:58:28.727
> 
> 标签：java, osgi, bundle, apache-felix

我正在尝试为每个捆绑包获取依赖项。在这篇[SO 帖子](https://stackoverflow.com/questions/11986935/felix-how-to-get-list-of-all-dependent-bundles-from-the-updated-bundle)中，我被建议使用`FrameworkWiring.getDependencyClosure`，但我不明白如何初始化类，`FrameworkWiring.getDependencyClosure`- 它是接口。felix 中有这个接口的实现吗？

第二个问题：我发现

```
BundleWiringImpl getRequirements(null); 
```

但我无法初始化

```
BundleWiringImpl testObject = new BundleWiringImpl(); 
```

NetBeans 显示错误：

```
constructor BundleWiringImpl in class BundleWiringImpl cannot be applied to given types;
  required: Logger,Map,StatefulResolver,BundleRevisionImpl,List<BundleRevision>,List<BundleWire>,Map<String,BundleRevision>,Map<String,List<BundleRevision>>
  found: no arguments
  reason: actual and formal argument lists differ in length 
```

如何获得部门？:) 可能有其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:44:43.613

叹。您是否阅读了FrameworkWiring 类型的[javadoc ？](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/wiring/FrameworkWiring.html)

`The framework wiring object for the framework can be obtained by calling bundle.adapt(FrameworkWiring.class) on the system bundle. Only the system bundle can be adapted to a FrameworkWiring object.`

# android - 如何从android中的ArrayList中检索值

> ID：12034072
> 
> 赞同：1
> 
> 时间：2012-08-20T07:58:33.617
> 
> 标签：android, json, arraylist

我正在尝试从 a 中检索值，`json api`然后在 listView 中显示。包含 3 个元素，`listView`我也在实现`onItemClickListner()`，当单击一个项目时，它将显示与该项目相关的详细视图。我正在使用 an`ArrayList`来存储所有`json`值。现在我想从中检索一个值，`ArrayList`以便`OnClickListner()`获取该值，并从该值显示详细视图。

我正在使用 AsyncTask 检索所有 json 值

```
@Override
protected String doInBackground(String... DATA) {
if(rqst_type.equals("top5"))
    {
        String url = DATA[1];
        JsonParser jParser = new JsonParser();
        JSONObject json = jParser.getJSONfromUrl(url);
        try
        {
            JSONArray top5 = json.getJSONArray(TAG_TOP5);
            public static ArrayList<HashMap<String, String>> top5List = new ArrayList<HashMap<String, String>>();
            top5List.clear();
            for(int i=0; i<top5.length(); i++)
            {
                Log.v(TAG_LOG, "Value of i: "+String.valueOf(i));
                JSONObject t = top5.getJSONObject(i);
                course_id = t.getString(TAG_CRSID);
                created_date = t.getString(TAG_CRTDATE);
                golfcourse_name = t.getString(TAG_GLFCRSNAME);
                facilities = t.getString(TAG_FCLTY);
                holes = t.getString(TAG_HOLES);

                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_CRSID, course_id);
                map.put(TAG_CRTDATE, created_date);
                map.put(TAG_GLFCRSNAME, golfcourse_name);
                map.put(TAG_FCLTY, facilities);
                map.put(TAG_HOLES, holes);

                top5List.add(map);
                Log.v(LoadingScreen.TAG_LOG, "top5List: "+String.valueOf(top5List));
            }
        }
        catch(JSONException e)
        {
            Log.v(TAG_LOG, String.valueOf(e));
        }
}

protected void onPostExecute(String result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);
    if(rqst_type.equals("top5"))
    {
        Intent in = new Intent(context, MyTop5.class);
        in.putExtra(TAG_CRSID, course_id);
        in.putExtra(TAG_CRTDATE, created_date);
        in.putExtra(TAG_GLFCRSNAME, golfcourse_name);
        in.putExtra(TAG_FCLTY, facilities);
        in.putExtra(TAG_HOLES, holes);
        Log.v(TAG_LOG, "Valuse to MyTop5: "+course_id+" "+created_date+" "+golfcourse_name+" "+
                facilities+" "+holes);
        context.startActivity(in);
    } 
```

这是我要显示列表的文件和`onItenClickListner()`..

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_top5);

    Intent in = getIntent();
    golfcourse_name = in.getStringExtra(TAG_GLFCRSNAME);
    course_id = in.getStringExtra(TAG_CRSID);
    created_date = in.getStringExtra(TAG_CRTDATE);
    facilities = in.getStringExtra(TAG_FCLTY);
    holes = in.getStringExtra(TAG_HOLES);
    Log.v(LoadingScreen.TAG_LOG, "course id: "+String.valueOf(course_id));
    ListAdapter adapter = new SimpleAdapter(this, LoadingScreen.top5List, R.layout.top5_list,
            new String[] { TAG_GLFCRSNAME, TAG_CRSID, TAG_CRTDATE, TAG_FCLTY, TAG_HOLES },
            new int[] { R.id.top_golfname, R.id.top_courseid, R.id.top_createdate, R.id.top_fclty, R.id.top_holes });

    setListAdapter(adapter);
    Log.v(LoadingScreen.TAG_LOG, "course id: "+String.valueOf(course_id));
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            String url = "http://mygogolfteetime.com/iphone/viewdeal/127";
            new LoadingScreen(MyTop5.this).execute("view_detail", url);
        }
    });
} 
```

在给定的 URL 中，我想将 127 更改为存储在`top5List`.

```
String url = "http://mygogolfteetime.com/iphone/viewdeal/127"; 
```

我试图在 中找到`top5List`的值是“ `course_id`”的值

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:25:49.050

```
top5List.get(your position).get(your Key); 
```

使用此代码，您可以找到要更改的值。

# java - 如何通过列名获取/设置 JTable 的单元格值

> ID：12034073
> 
> 赞同：0
> 
> 时间：2012-08-20T07:58:39.580
> 
> 标签：java, swing, jtable

是否可以通过列名获取或设置 JTable 的单元格值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T08:12:03.757

在 JTable 中没有找到内置方法，但是这个怎么样：

```
private int getColumnByName(JTable table, String name) {
    for (int i = 0; i < table.getColumnCount(); ++i)
        if (table.getColumnName(i).equals(name))
            return i;
    return -1;
} 
```

然后您可以使用以下设置和获取单元格值：

```
table.setValueAt(value, rowIndex, getColumnByName(table, colName));

table.getValueAt(rowIndex, getColumnByName(table, colName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:08:00.413

可以从JTable的getColumn方法中得到一个TableColumn，使用列名作为标识；并得到它的modelIndex....

但如果你的桌子有排序；然后你需要做翻译。

我建议在 tableModel 中为您的表实现您需要的内容。

# asp.net - 如何提高 ASP.NET MVC3 app 数据查询性能？

> ID：12034081
> 
> 赞同：2
> 
> 时间：2012-08-20T07:58:59.803
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, linq-to-sql

有一个基于 ASP.NET MVC3 的图书管理系统 Web 应用程序。**当点击图书索引页面时，数据查询很慢，用户需要等待几秒钟才能响应**。BookController 中 Action Index 的代码如下：

```
 public ViewResult Index(string sortOrder, int? page)
    {
        ViewBag.NameSortParam = string.IsNullOrEmpty(sortOrder) ? "desc" : "";
        ViewBag.CurrentSort = sortOrder;

        BookModel books = from b in db.Books select b; // db = new BookContext();
        switch (sortOrder) {
            case "desc":
                books = books.OrderByDescending(b => b.Name);
                break;
            default:
                books = books.OrderBy(b => b.Name);
                break;
        }
        int pageSize = 15;
        int pageNumber = (page ?? 1);

        return View(books.ToPagedList(pageNumber, pageSize));
    } 
```

**在我看来，慢的主要原因是服务器直到所有数据都准备好才响应客户端**。这个过程需要很多时间。

不知道怎么解决这个问题，请问有什么方法可以提高这种情况下的数据查询性能吗？谢谢！

***更新***：后端数据库是 SQL Server Compact Edition 4.0

**更新** 我在下面更新了我的逻辑代码，`orderby`用于之前`skip`和`take`语句。一切顺利。谢谢大家的帮助。

```
books = (from b in db.Books
                       orderby b.Name descending
                       select b)
                       .Skip((page - 1) * pageSize)
                       .Take(pageSize)
                       .ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:11:07.127

您正在加载所有书籍，然后将数据集过滤为您需要的数据（通过使用`ToPagedList`）。更改您的查询并使用`Skip`and`Take`方法而不是`ToPagedList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:10:50.093

将索引放在 Books.Name 列上（包含列：包括列表中需要的那些），在 C# 端查询仅需要您的字段：

```
books.Select(x => new {
                       x.Name,
                       x.Author,
                       x.Description,
                       x.ID }).ToPagedList(/*....*/)./*...*/) 
```

我会照顾 ToPagedList 的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:35:01.770

在方法上使用 OutputCaching，由两个参数变化。[此处详细](http://www.codeguru.com/csharp/article.php/c18745/ASPNET-MVC3-Caching.htm)介绍了这方面的概述。

```
[OutputCache(Duration=60,VaryByParam="sortOrder;page;")]
public ViewResult Index(string sortOrder, int? page) 
```

# ios - 是否可以在没有 iTunes 或 App Store 的情况下安装 iOS 应用程序？

> ID：12034082
> 
> 赞同：1
> 
> 时间：2012-08-20T07:59:05.827
> 
> 标签：ios, xcode, ad-hoc-distribution

我为一家公司编写了一个应用程序，并希望在他们的 iPad 上安装该应用程序，而无需将该应用程序提交到 App Store，因为它只是这家公司的商业应用程序。如果不将每台 iPad 连接到我的 MacBook 并在其上放置开发人员证书，这是否可能。

还有其他方法吗？使用 URL 链接或 QR 码（链接到此 url）怎么样？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:09:54.913

您的问题是关于在没有 iTunes 和 Apple App Store 的情况下安装应用程序。这完全有可能并得到 Apple 的支持，但您仍然受制于您的开发者帐户只能为 100 台设备构建签名二进制文件以仅用于*测试目的*。

您可以通过[hockeyapp.net](http://hockeyapp.net)和[testflightapp.com](http://testflightapp.com)（免费）等服务以无线方式分发您的应用程序，但这些服务只是与 iOS 系统通过无线方式安装签名二进制文件的能力挂钩，这从 iOS4 开始就成为可能。有几个开源项目提供了基本的 HTML 和 Javascript/元标记，以便在网络上安装签名的二进制文件 - [iOS Beta Builder就是其中之一](https://github.com/HunterHillegas/iOS-BetaBuilder)

如果您正在为客户创建企业应用程序（将存在于生产环境中，而不仅仅是开发环境中），那么为您的客户提供不会过期的应用程序的唯一合法方法是使用[Enterprise Developer Account](https://developer.apple.com/programs/ios/enterprise/)。企业帐户没有设备限制，但您使用企业证书签署的应用程序每次启动时都会向 Apple 发送电话，并且严格只允许单个公司及其当前员工使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T08:28:33.910

这是因为苹果收取了所有付款的 30%，不是吗？

我看到的唯一方法是创建通常的网站，该网站无需安装即可通过浏览器运行

# android - 使用 SQLite 和 Phonegap 的 Android 离线应用程序

> ID：12034088
> 
> 赞同：0
> 
> 时间：2012-08-20T07:59:27.023
> 
> 标签：android, sqlite, cordova

我使用 html / javascript / sqlite / phonegap 开发离线应用程序来列出 sqlite 数据库中的数据。我可以使用 wiki.phonegap 从单个表中检索数据

我发现了很多关于创建多个表的文章/答案，但不是从多个表中检索数据

请帮助我使用一些示例代码从多个表中检索数据

问候，张杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:43:57.417

使用这个：`< html manifest="cache.manifest">`而不是`<html>`. 并在名为 . 的同一目录中创建一个新文件`cache.manifest`。

该文件的内容应如下所示：`CACHE MANIFEST ## Required First Line index.html blabla.png`

# ios - 当我使用 prepareForSegue 将值传递给目标控制器时，存在一些问题

> ID：12034093
> 
> 赞同：6
> 
> 时间：2012-08-20T08:00:00.137
> 
> 标签：ios, uinavigationcontroller, storyboard, uistoryboardsegue

首先，我使用故事板创建两个 uiviewcontroller：*firstviewcontroller*和*secondviewcontroller*。并使用 xcode 将*uinavigationcontroller*嵌入到*secondviewcontroller 中***（编辑器 --> 嵌入 --> 导航控制器）**。然后，我还想使用 segue 将值从第一个传递到第二个。有代码：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"passValue"])
    {
        secondViewController *saveViewController = [segue destinationViewController];
        [saveViewController setValue:data forKey:@"data"];
    }
} 
```

但是会报错，日志是： ***Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key data.'***

但是，当我删除使用Xcode插入的导航控制器并通过代码定义导航栏时，这个问题就会消失。我猜原因是真正的 destinationViewController 是*navigationcontroller*而不是*secondviewcontroller*。那么如果我想保留Xcode嵌入的导航控制器，如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T08:49:21.303

你是对的，*destinationViewController*将是你嵌入*secondViewController的**UINavigationController*。也许试试：

 *```
secondViewController *saveViewController = [[segue destinationViewController] topViewController]; 
```*

# php - 在 PHP 中使用正则表达式获取 SQL 查询的 SELECT 块

> ID：12034100
> 
> 赞同：1
> 
> 时间：2012-08-20T08:00:57.013
> 
> 标签：php, regex

我想获取 SQL 查询的 SELECT 块，而我在想的是获取单词 SELECT 和 FROM 之间的文本。我应该使用什么正则表达式？

是否可以以相同的方式提取 FROM、WHERE 和 JOIN 块？

**更新**

我不能使用[http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)因为它是为 MySQL 构建的，而我的 MSSQL 查询会破坏它。我已经搜索了很多 MSSQL 解析器，但找不到现成的解决方案，所以我能想到的唯一方法是自己使用正则表达式解析 SQL，并按照选择块位于 SELECT 和 FROM 之间的原则工作关键词。

**例子**

对于查询

```
SELECT STRAIGHT_JOIN a,b,c 
FROM some_table an_alias
WHERE d > 5; 
```

我想要这样的东西被退回：

```
$result['SELECT'] => 'STRAIGHT_JOIN a,b,c';
$result['FROM'] => 'some_table an_alias';
$result['WHERE'] => 'd>5'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:04:16.423

您可以使用 SQL 解析器库为您执行此操作。

签出这个项目[http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)

样本输入：

```
SELECT STRAIGHT_JOIN a,b,c 
  from some_table an_alias
 WHERE d > 5; 
```

样本输出：

```
Array
( 
[OPTIONS] => Array
    (
        [0] => STRAIGHT_JOIN
    )       

[SELECT] => Array
    (
        [0] => Array
            (
                [expr_type] => colref
                [base_expr] => a
                [sub_tree] => 
                [alias] => `a`
            )

        [1] => Array
            (
                [expr_type] => colref
                [base_expr] => b
                [sub_tree] => 
                [alias] => `b`
            )

        [2] => Array
            (
                [expr_type] => colref
                [base_expr] => c
                [sub_tree] => 
                [alias] => `c`
            )

    )

[FROM] => Array
    (
        [0] => Array
            (
                [table] => some_table
                [alias] => an_alias
                [join_type] => JOIN
                [ref_type] => 
                [ref_clause] => 
                [base_expr] => 
                [sub_tree] => 
            )

    )

[WHERE] => Array
    (
        [0] => Array
            (
                [expr_type] => colref
                [base_expr] => d
                [sub_tree] => 
            )

        [1] => Array
            (
                [expr_type] => operator
                [base_expr] => >
                [sub_tree] => 
            )

        [2] => Array
            (
                [expr_type] => const
                [base_expr] => 5
                [sub_tree] => 
            )

    )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:03:57.533

看看这个链接：

[http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)

```
Example Output

Example Query

SELECT STRAIGHT_JOIN a,b,c 
  from some_table an_alias
 WHERE d > 5;

Example Output (via print_r)

Array
( 
    [OPTIONS] => Array
        (
            [0] => STRAIGHT_JOIN
        )       

    [SELECT] => Array
        (
            [0] => Array
                (
                    [expr_type] => colref
                    [base_expr] => a
                    [sub_tree] => 
                    [alias] => `a`
                )

            [1] => Array
                (
                    [expr_type] => colref
                    [base_expr] => b
                    [sub_tree] => 
                    [alias] => `b`
                )

            [2] => Array
                (
                    [expr_type] => colref
                    [base_expr] => c
                    [sub_tree] => 
                    [alias] => `c`
                )

        )

    [FROM] => Array
        (
            [0] => Array
                (
                    [table] => some_table
                    [alias] => an_alias
                    [join_type] => JOIN
                    [ref_type] => 
                    [ref_clause] => 
                    [base_expr] => 
                    [sub_tree] => 
                )

        )

    [WHERE] => Array
        (
            [0] => Array
                (
                    [expr_type] => colref
                    [base_expr] => d
                    [sub_tree] => 
                )

            [1] => Array
                (
                    [expr_type] => operator
                    [base_expr] => >
                    [sub_tree] => 
                )

            [2] => Array
                (
                    [expr_type] => const
                    [base_expr] => 5
                    [sub_tree] => 
                )

        )

) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T08:04:16.353

```
$matches = array();
$sql = 'SELECT STRAIGHT_JOIN a,b,c FROM some_table an_alias WHERE d > 5;';
preg_match_all('/SELECT(.+?)FROM(.+?)(?:JOIN(.+?))*WHERE(.+)/gis', $sql, $matches); 
```

会产生：

```
[0] => Array
    (
        [0] => SELECT STRAIGHT_JOIN a,b,c FROM some_table an_alias WHERE d > 5;
    )

[1] => Array
    (
        [0] =>  STRAIGHT_JOIN a,b,c 
    )

[2] => Array
    (
        [0] =>  some_table an_alias 
    )

[3] => Array
    (
        [0] => 
    )

[4] => Array
    (
        [0] =>  d > 5;
    ) 
```

# c++ - 为什么没有替换预处理器指令？

> ID：12034102
> 
> 赞同：3
> 
> 时间：2012-08-20T08:01:09.973
> 
> 标签：c++, c-preprocessor

定义预处理器指令的格式是：

```
#ifndef  SIZE
#define SIZE 10
int hello[SIZE];
#endif 
```

但是当我查看以下代码时，预处理器指令无法替代：

```
#ifndef CREDIT_CARD_H                    // Avoid repeated expansion
#define CREDIT_CARD_H

#include <string>                        // Provides string
#include <iostream>                      // Provides ostream

class CreditCard
{
    public:
        CreditCard(const std::string& no,    // Constructor
                   const std::string& nm, int lim, double bal = 0);

        // Accessor functions
        std::string    getNumber()const    { return number; }
        std::string    getName() const     { return name; }
        double         getBalance() const  { return balance; }
        int            getLimit() const    { return limit; }

        bool chargeIt(double price);       // Make a charge
        void makePayment(double payment);  // Make a payment

    private:                               // Private member data
        std::string    number;             // Credit card number
        std::string name;                  // Card owner's name
        int            limit;              // Credit limit
        double        balance;             // Credit card balance
};

std::ostream& operator<<(std::ostream& out, const CreditCard& c);
#endif 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:03:07.117

您可以说`#define FOO`，这意味着这`#ifdef FOO`将是真实的，但`FOO`没有任何替换文本。这对于像包含守卫这样的条件检查非常有用。

它对于特定于平台的扩展也很有用，在一般情况下您希望为空：

```
#ifdef WIN32
#  define API __declspec(dllexport)
#else
#  define API
#endif

API void foo(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:04:06.203

该类型的指令根据条件粘贴到文件中：

```
#ifndef  SIZE

//whatever

#endif 
```

**仅当**未定义时，编译器才能看到`#ifndef`和之间的任何内容。`#endif` **`SIZE`**

 **第二段代码也是如此：

```
#ifndef CREDIT_CARD_H                   // avoid repeated expansion
#define CREDIT_CARD_H

//....

#endif 
```

`CREDIT_CARD_H`只有事先没有定义类定义和包含才会被看到。这称为**包含防护。**

您不必将宏定义为某种东西，您可以说`#ifdef SIZE`没有实际“设置”任何东西的大小，只需定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:31:20.143

这是一个**包含保护**，以确保文件只被包含一次。

```
#include "CreditCard.h"
#include "CreditCard.h" 
```

第二次包含 CREDIT_CARD_H 已经定义，因此它会跳过整个定义。

现在你会像这样直接包含一个文件两次，但是一个包含文件包含另一个文件是很常见的，这会阻止任何重复定义的发生。

*实际值从未使用过，只是现在已定义*的事实

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T14:44:06.393

我想你正在寻找的是`#pragma once`

[https://en.wikipedia.org/wiki/Pragma_once](https://en.wikipedia.org/wiki/Pragma_once)***

# c - pthread_create 和套接字描述符不同步

> ID：12034103
> 
> 赞同：0
> 
> 时间：2012-08-20T08:01:21.497
> 
> 标签：c, sockets, pthreads

```
 main() {
    unsigned int newfd;
    ...
    .....
    while (1) {        
      printf("Waiting for connection\n");
      addrlen = sizeof (clientaddr);
      if ((newfd = accept(listener, (struct sockaddr *) &clientaddr, &addrlen)) < 0) {
          perror("Server-accept() error lol!");
          break;
      }
      printf("New connection from %s on socket %u\n", inet_ntoa(clientaddr.sin_addr), newfd);
      pthread_create(&threads[i++], NULL, (void*)fileTransfer_Worker, &newfd); 
      sleep(1);
   } 
```

}

```
void* fileTransfer_Worker(void *desc) {
     unsigned int sock = *(unsigned int *) desc;
     printf("Waiting for data in sock %d %u\n", sock, pthread_self());
} 
```

输出

```
Waiting for connection
New connection from 192.168.4.57 on socket 4
Waiting for connection
New connection from 192.168.4.57 on socket 5
Waiting for connection
Waiting for data in sock 4 3076578160
Waiting for data in sock 5 3068189552
New connection from 192.168.4.57 on socket 6
Waiting for connection
Waiting for data in sock 6 3059800944
New connection from 192.168.4.57 on socket 7
Waiting for connection
New connection from 192.168.4.57 on socket 8
Waiting for connection
New connection from 192.168.4.57 on socket 9
Waiting for connection
Waiting for data in sock 8 3051412336
New connection from 192.168.4.57 on socket 10
Waiting for data in sock 9 3034635120
Waiting for data in sock 10 3043023728
Waiting for connection
New connection from 192.168.4.57 on socket 11
Waiting for connection
New connection from 192.168.4.57 on socket 12
Waiting for connection
New connection from 192.168.4.57 on socket 13
Waiting for connection
Waiting for data in sock 13 3001080688
Waiting for data in sock 13 3026246512
Waiting for data in sock 13 3017857904
Waiting for data in sock 13 3009469296 
```

如果查看输出，您会注意到 sock 13 显示了 4 次，实际上应该是套接字 7、11、12 和 13。

每次我同时调用更多客户端连接时，行为都会发生变化。

如果我在 pthread_create() 之后添加 sleep(1)，那么我能够看到预期的行为。pthread_create 之后的睡眠是必须的吗？或者如何在不使用睡眠的情况下解决此问题？

帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:03:46.150

> ```
> pthread_create(&threads[i++], NULL, (void*)fileTransfer_Worker, &newfd);
>                                                                 ^^^^^^ 
> ```

问题是您将局部变量的地址传递给`pthread_create`. 当线程开始使用它时，**`main`可能已经改变了它**。因此，如果描述符是`10`在您调用`pthread_create`时，那么当线程实际开始使用时`main`已经有机会更改它。

您至少有 2 个选项可以解决此问题：

*   为每个线程传递一个单独的对象（可能是你的一个`malloc`）
*   在参数中填充整数，就好像它是 a 一样`void *`，然后`int`在线程函数中转换回

尽管第二种选择被广泛使用，但它也是不可移植的。

# ruby-on-rails - Rails 如何在一个查询中执行多个语句？

> ID：12034104
> 
> 赞同：13
> 
> 时间：2012-08-20T08:01:23.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql, activerecord

我正在将 Ruby on Rails 与 ActiveRecord 和 PostgreSQL 一起使用。

如何执行多个 sql 查询？

我需要它来运行自定义迁移脚本，例如：

```
Foo.connection.execute <<-SQL.split(';').map(&:strip).join
 delete from metadata where record_type = 'Foo';
 TRUNCATE table1 RESTART IDENTITY;
 TRUNCATE table2 RESTART IDENTITY;
 delete from schema_migrations where version > '20120806120823';
SQL 
```

我不接受来自用户的数据，所以我不担心 sql-injection。

[`CLIENT_MULTI_STATEMENTS`](http://dev.mysql.com/doc/refman/5.1/en/mysql-real-connect.html)可能是在 MySQL 中的东西？

来自 MySQL/PHP 文档：

> **CLIENT_MULTI_STATEMENTS**：告诉服务器客户端可以在一个字符串中发送多个语句（用“;”分隔）。如果未设置此标志，则禁用多语句执行。有关此标志的更多信息，请参阅此表后面的注释。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T12:59:43.830

它应该与 PostgreSQL 一起工作，用 pg gem 和 rails 3.2 检查：

```
class Multitest < ActiveRecord::Migration
  def up
    execute <<-SQL
      create table x(id serial primary key);
      create table y(id serial primary key, i integer);
    SQL
  end

  def down
  end
end 
```

顺便说一句，`schema_migrations`直接操作看起来很奇怪。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-24T04:59:41.103

对于 mysql

```
queries = File.read("/where/is/myqueries.sql")
# or
queries = <<-SQL
 TRUNCATE table1 RESTART IDENTITY;
 TRUNCATE table2 RESTART IDENTITY;
 delete from schema_migrations where version > '20120806120823';
SQL

queries.split(';').map(&:strip).each do |query| 
  execute(query)
end 
```

你可能也想看看这个问题： [Invoking a large set of SQL from a Rails 4 application](https://stackoverflow.com/questions/24395618/invoking-a-large-set-of-sql-from-a-rails-4-application)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-26T11:47:00.140

是的，您需要`CLIENT_MULTI_STATEMENTS`：

在`database.yml`：

```
development:
  adapter: mysql2
  database: project_development
  flags:
    - MULTI_STATEMENTS 
```

然后在您的代码中：

```
connection.execute(multistatement_query)
# Hack for mysql2 adapter to be able query again after executing multistatement_query
connection.raw_connection.store_result while connection.raw_connection.next_result 
```

有关详细信息，请参阅[https://stackoverflow.com/a/11246837/338859](https://stackoverflow.com/a/11246837/338859)

# android - 如果号码为 UNKNOWN，则 CallLog.Calls.CACHED_NAME 问题

> ID：12034112
> 
> 赞同：0
> 
> 时间：2012-08-20T08:02:19.027
> 
> 标签：android, android-contacts

我正在处理 android 设备的最近通话列表，但我遇到了**CallLog.Calls.CACHED_NAME的一个问题**

最近通话可能有两种情况，该号码可以在联系人列表名称中，也可以是未知的。因此，如果联系人中存在姓名，那么它将显示在**CallLog.Calls.CACHED_NAME**中，但如果它是未知号码，那么它将给出什么值？

因为如果我比较，如果**缓存的名称**为空，那么我将数字作为名称，但在模拟器中它工作正常，但是当我将它安装在**三星 Galaxy ACE DUOS**中时，如果最近的呼叫有未知号码，那么它会崩溃。

例如，最近通话是**ABC : 888-888-8888**，**XYZ : 999-999-9999** 那么它会正常工作。

但如果它是**NO NAME : 444-444-4444** 那么它会崩溃。

任何人都可以告诉这个问题可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:26:41.340

当我试图从没有名字的通话记录中获取电话号码时，我遇到了同样的问题。`CallLog.Calls.CACHED_NAME`没有返回任何值，甚至为null 。过了一会儿，我通过 bilding 这个光标解决了这个问题：

```
Cursor c1 = SetStatsView.this.managedQuery(CallLog.Calls.CONTENT_URI, 
                                           new String[]{CallLog.Calls.CACHED_NAME,  
                                           CallLog.Calls.NUMBER, CallLog.Calls.DATE}, 
                                    CallLog.Calls.CACHED_NAME+" is null", null, null); 
```

它只返回没有联系人姓名的号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T23:59:48.160

如前所述，我已经按照以下方式完成了这项工作。您不需要创建新查询，只需使用条件来处理空值，请参见下面的代码

```
Cursor mCursor = managedQuery(CallLog.Calls.CONTENT_URI, null, null,null,null);
String Name;
List<String>NameHolder=new ArrayList<String>();
int nameValue=mCursor.getColumnIndex(CallLog.Calls.CACHED_NAME);
 while (mCursor.moveToNext()){
             String name=mCursor.getString(nameValue);
                   if(name==null){
                       Name="Unknown";
                       NameHolder.add(Name);
                                 }
                       else {
                           Name=name;
                           NameHolder.add(Name);                                 
                             }
                 } 
```

# c# - 如何从作为具有最低数值的字符串的对象列表中获取属性

> ID：12034118
> 
> 赞同：1
> 
> 时间：2012-08-20T08:02:48.100
> 
> 标签：c#, linq, list

假设我有一份人员名单：

```
Var people = new List<Person>(); 
```

在哪里

```
Public class Person {
Public string ReferenceString { get; set; }
} 
```

参考字符串是一串数字，所以我的列表中可能有；

```
Var person1 = new Person { ReferenceString = "12" };
Var person2  = new Person { ReferenceString = "11" };
Var person3 = new Person { ReferenceString = "14" }; 
```

我想要做的是以某种方式取回具有最低数值的参考字符串，在这种情况下是“11”。所以我猜它需要在线上的某个地方转换为 int 并且正在按照以下方式工作：

```
people.Where(x => Int32.Parse(x.ReferenceString)); 
```

虽然不知道如何进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:13:40.173

您需要将其转换为 int，按该值排序并取第一个（最低）：

```
Person lowPerson = people.OrderBy(p => int.Parse(p.ReferenceString)).First(); 
```

如果您只想要最低值：

```
int lowest = people.Min(p => int.Parse(p.ReferenceString)); 
```

但是您应该首先考虑将其存储为 int 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:19:11.940

您可以使用[MoreLinq 的 MinBy 方法](http://code.google.com/p/morelinq/source/browse/MoreLinq/MinBy.cs)找到具有最小值的人，而不必对所有人员进行排序，如果您的人员数量过多，这将是低效的。

```
Person lowPerson = people.MinBy(p => int.Parse(p.ReferenceString)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:06:36.363

## 您的代码将给出错误，因为`ReferenceString`它是字符串并且您正在为其分配整数值。

既然你说你不能改变数据类型，你可以做

```
Var person1 = new Person { ReferenceString = "12" };
Var person2  = new Person { ReferenceString = '11" };
Var person3 = new Person { ReferenceString = "14" }; 
```

在这种情况下使用

```
var min = people.Min(x => Convert.ToInt32(x.ReferenceString)); 
```

如果您想找出哪些人员有最小 ReferenceString，您可以这样做。

```
var result = people.Where(x => x.ReferenceString == min.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:11:11.543

我会让它`ReferenceString`好像`ReferenceInteger`在存储数字。然后，您可以使用 Min 方法并获取记录。像这样：

```
var person1 = new Person { ReferenceString = 12 };
            var person2 = new Person { ReferenceString = 11 };
            var person3 = new Person { ReferenceString = 14 };

            var people = new List<Person>();
            people.Add(person1);
            people.Add(person3);
            people.Add(person2);

            var returnValues = people.Where(x => x.ReferenceString == people.Min(y => y.ReferenceString)); 
```

这里 ReferenceString 是整数类型。考虑相应地重命名该属性。

# linq - 使用 LINQ 返回列表

> ID：12034122
> 
> 赞同：-6
> 
> 时间：2012-08-20T08:02:56.187
> 
> 标签：linq, list

我想使用 LINQ 查询返回存储在数据库中的对象列表。

我尝试了以下

```
public BO.Hotel getHotels()
{
    TripBagEntities db = new TripBagEntities();

    var hotels = (from m in db.HotelEntities
                  where m.id < 10
                  select m).ToList().First();

    return Mapper.ToHotelObject(hotels);
} 
```

这仅返回列表中的第一项。如何返回整个列表？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:10:23.353

首先，根据评论，您应该准确了解现有代码的每一行首先做什么。（您还应该尝试遵循 .NET 命名约定。）如果您猜测代码的哪一部分做了什么，最好阅读针对您正在使用的 LINQ 提供程序的好教程（实体框架？）。

我们真的不知道是什么`Mapper.ToHotelObject`，或者是否已经有一种方法可以转换整个序列。这应该可以工作：

```
public List<BO.Hotel> GetHotels()
{
    // Note: you may want a using statement here...
    TripBagEntities db = new TripBagEntities();
    var hotels = db.HotelEntities
                   .Where(m => m.id < 10)
                   .AsEnumerable()
                   .Select(Mapper.ToHotelObject)
                   .ToList();
} 
```

或者如果方法组转换不起作用：

```
public List<BO.Hotel> GetHotels()
{
    // Note: you may want a using statement here...
    TripBagEntities db = new TripBagEntities();
    var hotels = db.HotelEntities
                   .Where(m => m.id < 10)
                   .AsEnumerable()
                   .Select(m => Mapper.ToHotelObject(m))
                   .ToList();
} 
```

请注意，我对整个查询使用了“点表示法”，因为当您使用`AsEnumerable`and之类的东西时，它使生活变得更简单`ToList`，而且您的查询表达式并不复杂。

该`AsEnumerable`调用将查询“转换”为 LINQ to Objects，因此查询到 SQL 的转换部分不需要尝试转换`Mapper.ToHotelObject`为 SQL，我认为这会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:05:01.610

您需要让您的函数返回`List<BO.Hotel>`而不是酒店，并相应地调整您的查询和 Mapper 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:05:22.247

```
public List<BO.Hotel> getHotels()
    {
        TripBagEntities db = new TripBagEntities();
        return (from m in db.HotelEntities
                     where m.id < 10
                      select Mapper.ToHotelObject(m)).ToList();
    } 
```

# java - 停止方法执行，直到另一个活动完成

> ID：12034123
> 
> 赞同：4
> 
> 时间：2012-08-20T08:03:04.880
> 
> 标签：java, android

祝大家有美好的一天！

我需要停止方法执行，直到另一个活动结束。目前我正在尝试以这种方式进行操作：

```
 private boolean isPausedWhileSplash;

public void showSplashWorldChangeAd(String oldWorldName, String newWorldName) {
    overridePendingTransition(R.anim.fade_in, R.anim.fade_out);
    Intent intent = new Intent(this, SplashScreen.class);
    intent.putExtra(SplashScreen.MSG_STRING_KEY, oldWorldName + " -> "
            + newWorldName);
    intent.putExtra(SplashScreen.OLD_WORLD, oldWorldName);
    intent.putExtra(SplashScreen.NEW_WORLD, newWorldName);
    startActivityForResult(intent, RESULT_OK);
    isPausedWhileSplash = true;
    while (isPausedWhileSplash) {
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    isPausedWhileSplash = false;
} 
```

但它不起作用。

你能帮助我吗？

谢谢！

**UPD：**也许有什么方法可以阻止视图绘制？因为我现在需要的只是延迟调用方法，这将重绘这个活动的视图。现在我在启动画面之前绘制了新世界，显示了世界变化，这看起来不太好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:12:23.693

我有点赶时间，所以这是一个通用的答案：

```
public class MonitorObject{
}

public class MyWaitNotify{

  MonitorObject myMonitorObject = new MonitorObject(); //To be used for synch

  public void doWait(){
    synchronized(myMonitorObject){
      try{
        myMonitorObject.wait(); // Wait until the notify method is called by another thread
      } catch(InterruptedException e){...}
    }
  }

  public void doNotify(){ //Notify waiting threads that they can continue
    synchronized(myMonitorObject){
      myMonitorObject.notify();
    }
  }
} 
```

如果您到那时还没有解决方案，我会在今天下午回来为您提供一个工作示例...

[这篇文章](http://tutorials.jenkov.com/java-concurrency/thread-signaling.html)应该让你开始

**编辑：** [本文](http://www.aviyehuda.com/blog/2010/12/20/android-multithreading-in-a-ui-environment/)演示了其他方法，所有这些方法都应该是对您当前解决方案的改进。它向您介绍如何从不同线程中的事件更新 UI，以及各种解决方案的好处/成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:24:33.310

我猜你正在尝试做这样的事情：

```
public void showSplashWorldChangeAd(String oldWorldName, String newWorldName){
    /* You have done some initialization work */
    startActivityForResult(intent, RESULT_OK);
    /* This is what you want to do after the activity returns */
    afterActivityReturns();
} 
```

那为什么不这样进行呢？

```
public void showSplashWorldChangeAd(String oldWorldName, String newWorldName){
        /* You have done some initialization task here*/
        startActivityForResult(intent, RESULT_OK);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        /* This is what you want to do after the activity finishes */
        afterActivityReturns();
    } 
```

但是如果你真的想`showSplashWorldChangeAd`因为某种原因停止这个方法，你需要锁和钥匙（正如 Basic 所说）。

# html - 将样式应用于除特定 div 中的所有元素

> ID：12034127
> 
> 赞同：1
> 
> 时间：2012-08-20T08:03:25.357
> 
> 标签：html, css

我想将样式应用于不在#mydiv div 元素中的所有输入元素。

```
input[type="text"], 
input[type="password"]:not(:in(#mydiv)) /* something like this */
{
    border: 1px solid #ccc;
    padding: 1px;
    color: #444; 
    min-width: 70px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:07:05.973

使用 css 不可能做到这一点（无论如何使用今天的浏览器）。

但是你可以反过来做：

```
input[type="text"], input[type="password"] {
  border: 1px solid #ccc;
  padding: 1px;
  color: #444; 
  min-width: 70px;
}

#mydiv input[type="text"], #mydiv input[type="password"] {
  border: none;
  padding: 0px;
  color: inherit;
  min-wdith: 0px;
} 
```

您将样式应用于所有内容，然后将反转样式添加到特殊 div 内的所有样式中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:06:00.010

CSS2 没有 not in 子句

你的解决方案是给他们一个特定的类

```
input.my_class {
  ...
} 
```

CSS3 有[`:not()`](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/)但它不遍历父级。

# android - 将 Visual C/C++ 移植到 Android

> ID：12034132
> 
> 赞同：2
> 
> 时间：2012-08-20T08:03:43.927
> 
> 标签：android, visual-c++, android-ndk, porting

在我最近开始的实习（我正在学习计算机科学）中，我必须将一个有点大的现有项目移植到 Android。它是一个 Visual C/C++ 项目，最终应该使用 NDK 在 Android 上运行。问题是我对移植软件一无所知，因为这不在我的研究中......

我有几天的时间来了解我将要处理的项目。

关于复杂性的几句话：它是一个 Visual Studio 解决方案，由 28 个项目组成，其中大多数都是大...

现在我需要开发一个将其移植到 Android 的概念，这就是我写这篇文章的原因。我完全不知道从哪里开始，也不知道如何找到移植它的概念。我尝试在网上搜索一些东西或一些关于此的书籍，但我一无所获。

我当然知道，基本上我必须删除 Visual/Windows 特定的所有内容，并用适当的 Android/Linux 函数替换它，或者如果 Android 上没有相应的内容，则实施新的东西。

但是由于这个项目有点庞大，我不能只是尝试用正确的编译器编译它并处理错误消息，这将导致无处可去，我猜......

所以现在我的实际问题是：是否有人对此或类似的事情有经验，并且可以提供一些提示如何开始？正如我所说，我首先需要一个概念。关于如何开始和处理移植这种规模的软件项目的更一般的东西也非常受欢迎，因为我对此一无所知......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:22:59.130

你没有告诉项目的源代码大小（有多少几千行源代码）。

如果代码量足够大（例如至少 100 [KLOC](http://en.wikipedia.org/wiki/Source_lines_of_code)），您可以考虑自定义 GCC 编译器（假设是最近的 4.6 或 4.7 版本），可能使用[MELT](http://gcc-melt.org/)（扩展 GCC 的高级域特定语言），或者痛苦地编码在*C*中是一个 GCC 插件。这种 GCC 定制方法仅适用于大型代码库（您需要几天时间来掌握 GCC 内部知识）。

另一方面，许多设计良好的应用程序可能已将其操作系统功能封装在定义良好的接口和库中。您可能会考虑将您的应用程序移植到 Qt 或其他一些跨平台库。

我们需要有关您的项目的更多详细信息，以便为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:14:26.390

我认为你以错误的方式处理整个问题。有几种工具可让您将 C# 和可视化 C++ 以及其他可视化语言从其受人尊敬的 IDE 编译到 android 平台。例如[， android 有 mono](http://xamarin.com/monoforandroid)。Mono 是一个 Visual Studio 插件，可帮助您使用 Visual Studio 和 .net 技术创建 android 项目。我认为您应该将研究重点放在这样的工具上，因为手动更改所有代码几乎是不可能的并且太耗时了。[这](http://www.brutaldev.com/post/2011/01/15/Android-applications-in-C-using-Visual-Studio.aspx)是一个页面，可帮助您开始使用适用于 android 的 mono。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:36:38.523

请参阅此答案[Android NDK with Visual Studio](https://stackoverflow.com/questions/4056606/android-ndk-with-visual-studio)。我个人不使用它，但这似乎是解决您问题的好方法。和你一样，过去我们不得不将一个大型的 Visual C++ 库项目移植到 Android，我们是这样进行的：

1.  尝试编译主库界面（通过创建相对的Android.mk）
2.  通过使用链接错误，您应该猜测要编译的其他项目并为它们创建 mks
3.  循环直到没有更多的链接错误。

# sql - 如何在 SQL Server 存储过程中使用 WHERE id IN (@a_varchar_variable)？

> ID：12034134
> 
> 赞同：1
> 
> 时间：2012-08-20T08:03:50.490
> 
> 标签：sql, sql-server-2008, stored-procedures

在我的表`id`列的数据类型是`int`.

我有一个要选择的项目 ID 列表。

所以，这是我的一些代码：

```
DECLARE @user_list
SELECT @user_list=(
SELECT user_list
FROM sometable
WHERE rowNum=xxx
);
SELECT *
FROM anotherTable
WHERE user_id IN(@user_list) 
```

但它不起作用，错误消息如下：

> *无法将 varchar 转换为 int*

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T08:14:01.967

您可以创建一个拆分功能，并在您需要时使用。

```
CREATE FUNCTION [dbo].[Split]
(   
    @List nvarchar(max),
    @SplitOn nvarchar(1)
)
RETURNS @RtnValue table (
    Id int identity(1,1),
    Value nvarchar(max)
)
AS
BEGIN
    While (Charindex(@SplitOn,@List)>0)
    Begin 
        Insert Into @RtnValue (value)
        Select 
            Value = ltrim(rtrim(Substring(@List,1,Charindex(@SplitOn,@List)-1))) 
        Set @List = Substring(@List,Charindex(@SplitOn,@List)+len(@SplitOn),len(@List))
    End 

    Insert Into @RtnValue (Value)
    Select Value = ltrim(rtrim(@List))

    Return
END 
```

之后，您可以在查询中调用该函数，如下所示。

```
SELECT * FROM anotherTable WHERE user_id IN(dbo.split(@user_list,',')) 
```

否则，您必须使用动态查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:05:47.707

你可以使用动态sql

```
exec('
SELECT *
FROM anotherTable
WHERE user_id IN('+@user_list+')') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:07:46.117

如果你创建`@user_list`一个表变量，你可以像任何其他表一样加入或过滤它

```
 declare @user_list table (id int)
 insert @user_list(id)
 SELECT user_list 
 FROM sometable 
 WHERE rowNum=xxx 

 SELECT * 
 FROM anotherTable 
 WHERE user_id IN(select Id from @user_list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:08:47.223

只需使用一个表变量，它允许您将普通单词添加到变量中：

```
DECLARE @user_list AS TABLE (user_id int NOT NULL);

INSERT @user_list
SELECT user_list
FROM sometable
WHERE rowNum=xxx;

SELECT *
FROM anotherTable
WHERE user_id IN (SELECT user_id FROM @user_list) 
```

# json - JSON 忽略数据映射之外的字段

> ID：12034136
> 
> 赞同：0
> 
> 时间：2012-08-20T08:04:01.223
> 
> 标签：json, jackson

我得到了一些回应：

```
var xxx_api = { "user" : {
   "name":"satishpandey",
   "sites":[
        {
            "name":"SEO Product",
            "url":"http://www.xxx.com/"
        }   ]
}}; 
```

我想排除所有在 json 数据之外的字符串。

`var xxx_api`并且`;`需要排除。

杰克逊有什么东西可以排除这些字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:50:13.197

我没有找到任何解决方案`jackson`。现在我正在使用`String.substring()`方法来获得所需的结果。

```
StringBuilder stringBuilder = new StringBuilder(jsonString);
stringBuilder.replace(0, stringBuilder.indexOf("{"), "");
stringBuilder.replace(stringBuilder.lastIndexOf("}") + 1, stringBuilder.length(), ""); 
```

它对我来说非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:01:15.613

假设您在 get/post（类似restful）方法中使用它，这可能与您正在使用的 web 服务方法的标头有关。我正在使用 REST，我能够指定我想要接收这样的 json 输入的格式

```
@POST
@Path("/post")
@Consumes(MediaType.APPLICATION_JSON)
public Response myMethod(@FormParam("post") String jsonInput){
    // ...
    // use jsonInput 
    mapper.readValue(jsonInput, ...);
    // ...
} 
```

考虑到这一点，我猜写入 var `jsonInput`（在标题中）的输入将是

```
 { "user" : {
          "name":"satishpandey",
          "sites":[
               {
                   "name":"SEO Product",
                   "url":"http://www.xxx.com/"
               }   ]
    }}; 
```

# clojure - 如何在关联后获取 clojure 数组映射以维护插入顺序？

> ID：12034142
> 
> 赞同：7
> 
> 时间：2012-08-20T08:04:23.820
> 
> 标签：clojure, hashmap, array-map

我有一个`array-map`我正在`assoc`将一些价值观融入其中。在一定大小之后，返回的值是 a`PersistentHashMap`而不是原来的`PersistentArrayMap`。我在一些网站上读到过这种行为。有没有办法强制插入顺序甚至在之后`assoc`？

我确实有一个单独的函数，它将采用一个`ash-map`和一个键向量，并`array-map`按此顺序返回一个带有键的“新鲜”，但这意味着对于每个 assoc，我必须首先提取键，cons/conj 新键到向量，然后创建一个新的数组映射。看起来很笨拙，即使写在一个单独的函数中。

即使在大（> 10，但< 50）键数组映射上，是否有更直接的语言支持方式来保持插入顺序？

如果相关，我使用数组映射列表作为 incanter 数据集的数据，然后输出到 excel。save-xls 函数保持键/列的顺序。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T08:09:04.697

您可以使用有序地图：[https ://github.com/flatland/ordered](https://github.com/flatland/ordered)

# android - 如何在Android中为按钮设置背景图像？

> ID：12034151
> 
> 赞同：7
> 
> 时间：2012-08-20T08:05:40.610
> 
> 标签：android, button, background, drawable

我在drawable-mdpi中导入了一张图片，然后从按钮实现了图片，但是出现了错误`no resource found here`。我该如何解决这个问题？

我试过这个：

主要的.xml

```
 <Button
        android:id="@+id/imageButtonSelector"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable-mdpi/button_focused_orange"/> 
```

![在此处输入图像描述](../Images/622307fd426f85412cd4f88978f81557.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T08:10:37.797

所有可绘制对象都在一个资源名称下编译，即`drawable`. Android 会根据屏幕大小自动选择从哪个文件夹获取可绘制对象，因此您无需特别指出。此外，硬编码 Android 以使用来自特定文件夹类型的资源，这违背了让 Android 选择多个文件夹的目的。要解决此问题，只需更改：

```
 android:background="@drawable-mdbi/button_focused_orange"/> 
```

到

```
 android:background="@drawable/button_focused_orange"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T08:07:13.590

应该`@drawable/button_focused_orange`

不是`@drawable-mdpi/button_focused_orange`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:10:19.437

尝试清理并重建您的项目。如果您使用的是 Eclipse，您可以通过单击*项目*->*清理*然后*项目*->*构建项目来执行此操作*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T22:37:57.577

您不必提及 -mdpi 来添加背景图像，只需使用 drawable 即可。这是您修改后的代码。试试这个。

```
<Button
    android:id="@+id/imageButtonSelector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/button_focused_orange"/> 
```

# excel - 使用 R 的实时股市数据

> ID：12034152
> 
> 赞同：-4
> 
> 时间：2012-08-20T08:05:43.653
> 
> 标签：excel, r, xts, algorithmic-trading

我在 R 上开发了一个相当的交易策略，我想用**实时市场数据**来实施它。

一种解决方案是使用 RExcel。在这种情况下，我会将 Excel 与 Bloomberg 链接以获取真实的市场数据并将 Excel 插入 R（RBloomberg 包不再工作）。理想情况下，我想在 R 上运行所有计算，然后将结果输出到 Excel 电子表格上，以实时遵循该策略。不幸的是，IT 政策不允许我安装 RExcel。

另一种解决方案是使用 IBrockers，但该软件包在我的计算机上不起作用。

这是我的问题：**是否有任何替代 RExcel 的方法可以将 R 插入实时市场数据？我想要一个可以像 Excel 单元格与 Bloomberg 一样自动刷新的 R 对象**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:23:34.120

当然总是有谷歌，它可以给你以下答案：

您可以尝试将 excel 文件读入 R 的软件包[的手册。提到了 RExcel 的许多替代品。](http://cran.r-project.org/doc/manuals/R-data.html#Reading-Excel-spreadsheets)

您还拥有`quantmod`允许您将股票信息从 yahoo Finance 直接导入 R 的软件包，如[本问题](https://stats.stackexchange.com/questions/8407/import-stock-price-from-yahoo-finance-into-r)所述。它带有一个很好的[手册](http://cran.r-project.org/web/packages/quantmod/quantmod.pdf)，有一个解释一些细节的 youtube 视频，你也有一个关于它的 RBloggers 条目。我把谷歌搜索留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:31:08.257

**您可以使用Yahoo Finance API**读取数据。

您需要做的就是使用`read.csv()`请求的输出：
`http://download.finance.yahoo.com/d/quotes.csv?f=snl1&s=AAPL,GOOG`

报价延迟 15 分钟（您可以免费做的最好的）并且每 15 秒更新一次。

如需进一步使用，请参阅： Stackoverflow 上的[Yahoo Finance Managed](http://code.google.com/p/yahoo-finance-managed/wiki/CSVAPI)和[Yahoo Finance Tag](https://stackoverflow.com/questions/tagged/yahoo-finance)。

# c# - 如何在 C#.net 中读取 POSTED Json 数据？

> ID：12034163
> 
> 赞同：3
> 
> 时间：2012-08-20T08:06:38.440
> 
> 标签：c#, jquery, json

我想在我的 c#.net 应用程序中读取以 JSON 格式发布的数据？我对这种 JSON 和 POST 方法很陌生？

谁能帮帮我吗？我正在从第 1 页发布数据。到其他 page2（在我的情况下为 smsstaus.aspx）进行测试。我想在 Page2 的 PageLoad 中读取 JSON 发布的数据。

示例代码......

```
 function SendSMSStatus() {
    $.ajax({
        type: "POST",
        url: "myurl/smsstatus.aspx",
        data: '{"SmsSid":"' + $("#<%= txtSmsSid.ClientID%>").val() + '","SmsStaus":"' + $("#<%= txtSmsStaus.ClientID%>").val() + '"}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            alert('update the db here');

        },
        error: function () { }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:23:04.680

您可以在 smsstatus.aspx 中定义一个*WebMethod*（例如 SendStatus）一个实现可能看起来像这样（从我的脑海中）

```
[WebMethod] 
public static void SendStatus(string sid, string status) 
{ 
    // retrieve status
} 
```

现在您可以创建一个使用此方法的请求，如下所示：

```
 function SendSMSStatus() {       
    $.ajax({       
        type: "POST",       
        url: "myurl/smsstatus.aspx/SendStatus",       
        data: '{"SmsSid":"' + $("#<%= txtSmsSid.ClientID%>").val() + '","SmsStaus":"' + $("#<%= txtSmsStaus.ClientID%>").val() + '"}',       
        contentType: "application/json; charset=utf-8",       
        dataType: "json",       
        success: function (msg) {       
            alert('update the db here');       

        },       
        error: function () { }       
    }); 
```

.NET 将反序列化 json 字符串并将它们作为参数传递给*SendStatus*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:14:23.447

当您使用 Jquery 并在数据中抛出 JSON 时，它会在正常的 Post 中发生变化，但您现在所做的是将代码更改为：

```
 function SendSMSStatus() {
    $.ajax({
        type: "POST",
        url: "myurl/smsstatus.aspx",
        data: {"SmsSid":$("#<%= txtSmsSid.ClientID%>").val(),"SmsStaus": $("#<%= txtSmsStaus.ClientID%>").val()},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            alert('update the db here');

        },
        error: function () { }
    });
} 
```

你可以使用普通的 POST 但如果你想在 C# 中使用 JSON，请参阅这篇文章

[http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:32:20.927

如果您`contentType`想请求 aspx (WebForm) 而不是`WebMethod`. （向服务器发送数据时，使用此内容类型。默认为“application/x-www-form-urlencoded”）。

```
$.ajax({
        type: "POST",
        url: "myurl/smsstatus.aspx",
        data: '{"SmsSid":"' + $("#<%= txtSmsSid.ClientID%>").val() + '","SmsStaus":"' + $("#<%= txtSmsStaus.ClientID%>").val() + '"}',
        dataType: "json", // The type of data that you're expecting back from the server. 
        success: function (msg) {
            alert(msg.d);
        },
        error: function () { }
    }); 
```

从`Page_Load`处理程序接收数据，

```
 //Read Form data
 string testData = Request["SmsSid"] + " " + Request["SmsStaus"];

 //Prepare Json string - output
 Response.Clear();
 Response.ContentType = "application/json";
 Response.Write("{ \"d\": \"" + testData +"\" }");
 Response.Flush();
 Response.End(); 
```

# fortran90 - fortran，读取命令

> ID：12034164
> 
> 赞同：0
> 
> 时间：2012-08-20T08:06:41.167
> 
> 标签：fortran90

我有一个 .dat 文件，我想用 Fortran 90 中的程序读取该文件。数据文件只包含一个很长的复数列。我的问题是我只想读取列的一部分，例如，仅从第 n 个到第 m 个元素，包括，并从中创建一个一维数组。但是，如果我写类似

```
open(unit = 100, file = 'datafile.dat', status = 'old', action = 'read')
do j = n,m
       read(100,*) vec(j-n+1)
    end do
close(100) 
```

该程序从我的文件中读取前 m-n+1 个元素，而不是从 n 到 m 的元素。有什么办法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:26:52.087

好吧，有一个明显的解决方案 - 您可以`n-1`在读取实际数据之前简单地执行虚拟读取：

```
open(unit = 100, file = 'datafile.dat', status = 'old', action = 'read')
do j = 1,n-1
   read(100,*)
end do
do j = n,m
   read(100,*) vec(j-n+1)
end do
close(100) 
```

您还可以使用`/`编辑描述符并将第一个循环压缩为单个读取语句：

```
nm2 = n-2
read(100,'(<nm2>/)')
do j = n,m
   read(100,*) vec(j-n+1)
end do 
```

（这是`n-2`由于`<nm2>/`编辑描述符而跳过的记录，并且虚拟读取跳过了一条记录）

对于不支持`<x>`格式扩展的编译器，您可以在内部文件中构造格式描述符：

```
character(len=20) :: fmt

write(fmt, "('(',I0,'/)')") n-2
read(100,fmt)
do j = n,m
   read(100,*) vec(j-n+1)
end do 
```

# spring - 在spring xml config中，如何自动获取当前bean的ID值？

> ID：12034165
> 
> 赞同：1
> 
> 时间：2012-08-20T08:06:55.003
> 
> 标签：spring

我在spring xml中使用quartz，我有很多类似上面的配置~~

我想知道，自动获取当前bean的id值

不是每次我都手写当前bean的值！！

```
<bean id="openBaiduTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail">
        <bean p:targetObject-ref="baiduManager" p:targetMethod="createOpenBaiDu" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean" />
    </property>
    <property name="cronExpression" value="#{p_schedule['openBaiduTrigger.cronExpression']}" />
</bean> 
```

![在 xml 配置中，如何获取当前 bean 的 ID 值？](../Images/326885c8f2e2711fd6511c9c3da72ccb.png)

# cordova - 在phonegap中禁用iphone上的推屏弹出窗口？

> ID：12034173
> 
> 赞同：0
> 
> 时间：2012-08-20T08:07:20.737
> 
> 标签：cordova, popup

我正在制作一个基于cordova 的运行phonegap 和jQuery mobile 的iphone 应用程序。

我想删除 iPhone 上发生的事件，当您按下屏幕上的链接时，您会得到一个“弹出窗口”，表示您是否要打开或复制链接。

我需要找到基于 CSS 或 phonegap 的解决方案吗？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:33:18.727

[http://css-infos.net/property/-webkit-touch-callout](http://css-infos.net/property/-webkit-touch-callout)试试这个 -webkit-touch-callout

# caching - 存储和检索可乘小部件实例的标识符

> ID：12034174
> 
> 赞同：0
> 
> 时间：2012-08-20T08:07:30.650
> 
> 标签：caching, google-apps-script

目的是在任何时候只删除最后一行，并且只能通过最后一个删除按钮。

有一个用户界面，它建立为同一行的乘法。行数由“添加”和“删除”按钮控制，这些按钮也是行的元素。问题是隐藏的小部件 - 应用于每一行以通过存储它们的行号来区分实例 - 存储的是最后一个相同的数字。除了存储正确数字 (0) 的第一个 (0) 隐藏小部件。我在哪里错过了重点？这应该如何解决？

根据删除按钮有两个不同的用途（此处不详），我们使用 cacheService 将最后一行与其他所有行区分开来。任何时候都应该只删除最后一行。

```
 var cache = CacheService.getPrivateCache(); 
```

我们清除缓存并创建第一个实例

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.createVerticalPanel().setId('mainContainer'));
  cache.removeAll([]);
  ui(0);
  cache.put('numberOfInstances',0);
  return app; } 
```

每个实例都由一个水平面板保存，其中包含提到的隐藏小部件、通知实例编号的标签以及添加和删除按钮。

```
function ui(instance) {
  var app = UiApp.getActiveApplication();
  var eventContainer = app.createHorizontalPanel()
      .setId('eventContainer' + instance);
  var instanceContainer = app.createHidden('instanceContainer',instance);
  var showInstance = app.createLabel(instance)
      .setId('showInstance' + instance);
  var addButton = app.createButton('Add')
      .setId('add' + instance)
      .addClickHandler(app.createClientHandler()
                       .forEventSource().setEnabled(false)) //avoiding multiple click during server response
      .addClickHandler(app.createServerHandler('add')
                       .addCallbackElement(instanceContainer));
  var removeButton = app.createButton('X')
      .addClickHandler(app.createServerHandler('remove')
                       .addCallbackElement(instanceContainer));
  app.getElementById('mainContainer')
    .add(eventContainer
         .add(instanceContainer)
         .add(showInstance)
         .add(addButton)
         .add(removeButton));
  return app; } 
```

和事件处理...

```
function add(inst) {
  var app = UiApp.getActiveApplication();
  var instance = Number(inst.parameter.instanceContainer);
  ui(instance+1);
  cache.put('numberOfInstances',instance+1);
  return app; }

function remove(inst) {
  var app = UiApp.getActiveApplication();
  var instance = Number(inst.parameter.instanceContainer);
  var numberOfInstances = cache.get('numberOfInstances')
  if( (instance != 0) && (instance = numberOfInstances) ) {
    app.getElementById('mainContainer').remove(app.getElementById('eventContainer' + instance));
    cache.put('numberOfInstances',instance-1);
    app.getElementById('add' + (instance-1)).setEnabled(true); } //avoiding multiple click during server response
  return app; } 
```

目的是在任何时候只删除最后一行，并且只能通过最后一个删除按钮。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:27:36.897

为什么不像在“添加”按钮上那样简单地使用 clientHandler 呢？您可以针对前面的“删除”按钮并在每次创建新按钮时禁用它，并在每次删除一行时更改/更新。

编辑：我可以建议你一些东西，随意看看，我改变了一点方法，但它正在工作，我希望你会发现它至少很有趣;-)

[链接到在线测试](https://script.google.com/macros/s/AKfycbwkkAzM35SFubfPRjCkcSF81bswCE395uM9XyizV8tv5XsbAlI/exec)

```
function doGet() {
  var app = UiApp.createApplication();

  var counter = app.createHidden().setName('counter').setId('counter').setValue('1');

  var mainContainer = app.createVerticalPanel().setId('mainContainer')
  app.add(mainContainer.add(counter));

  var event1Container = app.createHorizontalPanel()
  var showInstance = app.createLabel('1')
  var addButton = app.createButton('Add')
      .setId('add1')
      .addClickHandler(app.createClientHandler()
                       .forEventSource().setEnabled(false)) //avoiding multiple click during server response
      .addClickHandler(app.createServerHandler('add')
                       .addCallbackElement(mainContainer));
  var removeButton = app.createButton('X')
      .setId('remove1')
      .addClickHandler(app.createServerHandler('remove')
                       .addCallbackElement(mainContainer));
    mainContainer.add(event1Container
                 .add(showInstance)
                 .add(addButton)
                 .add(removeButton));
  return app; }

function add(inst) {
  var app = UiApp.getActiveApplication();
  var hiddenVal =inst.parameter.counter;
  var counterVal = Number(hiddenVal);
  var mainContainer = app.getElementById('mainContainer')
  var counter = app.getElementById('counter')
  ++ counterVal
  counter.setValue(counterVal.toString())
  var eventContainer = app.createHorizontalPanel().setId('eventContainer'+counterVal)
  var showInstance = app.createLabel(counterVal.toString())
  var addButton = app.createButton('Add')
      .setId('add'+counterVal)
      .addClickHandler(app.createClientHandler()
                       .forEventSource().setEnabled(false)) //avoiding multiple click during server response
      .addClickHandler(app.createServerHandler('add')
                       .addCallbackElement(mainContainer));
  var removeButton = app.createButton('X')
      .setId('remove'+counterVal)
      .addClickHandler(app.createServerHandler('remove')
                       .addCallbackElement(mainContainer));
    app.add(eventContainer
       .add(showInstance)
       .add(addButton)
       .add(removeButton));
 if(counterVal>1){app.getElementById('remove'+(counterVal-1)).setEnabled(false)}      
return app; }

function remove(inst) {
  var app = UiApp.getActiveApplication();
  var counterVal = Number(inst.parameter.counter);
  var counter = app.getElementById('counter')
  if(counterVal ==1) {return app}
  var maincontainer =  app.getElementById('mainContainer')
  app.getElementById('eventContainer' + counterVal).setVisible(false)
  --counterVal
  counter.setValue(counterVal.toString())
  app.getElementById('add'+counterVal).setEnabled(true)
  app.getElementById('remove'+counterVal).setEnabled(true)
  return app; 
  } 
```

注意：我没有使用`.remove(widget`)，因为这是一种相当新的方法，我不知道它是如何工作的......我稍后会测试它。在那之前我`setVisible(false)`改用了，对此感到抱歉:-)

注意 2：我没有使用缓存，因为隐藏的小部件足以跟踪正在发生的事情......如果您需要它来做其他事情，那么您可以随时将其添加回来。

# spring - Tomcat两次部署我的项目

> ID：12034175
> 
> 赞同：1
> 
> 时间：2012-08-20T08:07:37.690
> 
> 标签：spring, jakarta-ee, tomcat7, quartz-scheduler

Tomcat 两次部署我的项目。有人遇到并解决了这个问题吗？这是春季项目，我正在使用石英调度程序。由于这个问题，石英运行了两次。

使用 Quartz-2.1.1 和 Spring 框架 3.1.1

石英配置如下：

```
<bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean">
        <property name="jobDetail" ref="jobDetail" />
        <property name="startDelay" value="10000" />
        <property name="repeatInterval" value="1000" />
</bean>

<bean id="sc" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="triggers">
            <list>
                <ref bean="simpleTrigger" />
            </list>
        </property>
</bean>

<bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="staFromInQObj" />
        <property name="targetMethod" value="processInQueueData" />
        <property name="concurrent" value="false" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:44:12.670

我认为这是问题的正确答案。 [Spring 3 MVC 调度程序 xml 和 applicationContext xml](https://stackoverflow.com/questions/5009901/spring-3-mvc-dispatcher-xml-and-applicationcontext-xml) 双重部署也可能由于 spring 配置而发生！

# java - 将 JAVA 程序作为计划任务运行

> ID：12034177
> 
> 赞同：15
> 
> 时间：2012-08-20T08:07:55.847
> 
> 标签：java, windows, scheduler

我试图在 Windows 7 机器上每天运行一次简单的 JAVA 程序。

我的代码在 NetBeans 中运行良好。如果我进行清理并构建它，则表明：

```
C:\Program Files\Java\jdk1.7.0/bin/java -jar "C:\Users\User1\Documents\NetBeansProjects\Facebook\dist\Facebook.jar" 
```

当然，由于程序和文件之间的空间，这在 DOS 提示符下不起作用，所以我这样做：

```
C:\Program Files\Java\jdk1.7.0/bin/java -jar "C:\Users\User1\Documents\NetBeansProjects\Facebook\dist\Facebook.jar" -jar "C:\Users\User1\Documents\NetBeansProjects\Facebook\dist\Facebook.jar" 
```

这适用于 DOS 提示符。

我现在在 Windows 调度程序中创建一个任务来运行：

```
C:\Program Files\Java\jdk1.7.0/bin/java 
```

有论据：

```
-jar "C:\Users\User1\Documents\NetBeansProjects\Facebook\dist\Facebook.jar" 
```

然后当我运行它时，我看到的只是一个 DOS 框闪烁一秒钟。我预计代码需要大约 30 秒才能运行。代码应该将数据持久化到数据库并且不会发生更新。

该代码也使用`java.util.logging`，所以我应该看到日志条目，但我没有。

我强烈怀疑我没有正确运行 JAVA 命令，或者它在通过调度程序运行时出现了错误的类路径问题，而从 DOS 提示符运行时不存在。

帮助将不胜感激。如果您以前见过这个并且可以对其进行排序，那就太好了。如果您能告诉我如何从 Scheduler 获得有意义的错误跟踪，那也将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T08:53:56.393

我认为您可以创建一个简单的批处理脚本，以这种方式启动您的程序：

```
@echo off
REM Eventually change directory to the program directory 
cd C:\Users\User1\Documents\NetBeansProjects\Facebook\dist\
REM run the program
"C:\Program Files\Java\jdk1.7.0\bin\java.exe" -jar "C:\Users\User1\Documents\NetBeansProjects\Facebook\dist\Facebook.jar" 
```

将其复制到记事本中并另存为 java_script.cmd 然后调度此脚本而不是直接调度程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:44:31.507

我在将所有**字体的引用**更改为“SansSerif”后**解决了它**

 **我在 Java 中使用 Jasper Reports 创建 PDF 文件。当我在 Windows Server 2003 上双击批处理文件或调度程序但不能与 2008 的调度程序一起工作时，它工作正常。

我尝试了许多不同的方法，但没有任何效果，所以我认为可能是 Windows Server 2008 阻止了访问吗？

现在工作完美。因此，如果您遇到问题，请检查对您正在使用的任何内容的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:51:52.270

除非您指定以哪个用户身份运行，否则调度程序将在不同的用户下运行。如果它没有以您的用户身份运行，那么它将无法写入您的目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T19:18:01.900

原始问题的真正问题是 Microsoft 系统上的 java 安装问题。Java jre 安装到 Program Files\java。可执行文件 (java.exe)**仅**安装在该 java\bin 目录中。从命令行运行，操作系统会在正确的位置查找 java.exe。从其他 MS 工具（例如 VBA Excel 或本例中的 TaskScheduler）运行，它不会！

您可以通过查看 TaskScheduler 工具中的任务历史记录来发现 TaskScheduler 正在寻找错误的位置。双击一些历史事件，将列出动作和返回码。该操作将显示 TaskScheduler 正在尝试运行

`"C:\Windows\system32\java.EXE"`

![TaskScheduler 历史细节](../Images/bc065d5b8fc520ab553d40780226258b.png)

因此，将 java.exe 从 java\bin 目录复制到调度程序正在查找的位置，现在它可以工作了。

或者更新您的任务并提供 java.exe 的完整路径。

您还可以更新环境系统路径以在 java\bin 目录中查找 java，但这必须适用于所有用户，有时这也是错误的。**

# php - 适用于最新状态的 MySQL 查询

> ID：12034178
> 
> 赞同：1
> 
> 时间：2012-08-20T08:08:00.750
> 
> 标签：php, mysql, join, status

我在一家托管公司工作，我们经常收到关于安装、新域、延迟修复等的请求。为了大致了解仍然开放的内容，我决定制作一个非常简单的票务系统。我有一点php知识和一点MySQL知识。目前，我们将根据客户的电子邮件和电话自行提交票证。

我创建了以下 SQL 结构：

```
|| TICKETS  ||    || STATUSSES  ||    || STATUS-CODES  ||
--------------    ----------------    -------------------
| ID         |    |  ticket_id   |    | ID              |
| cust_name  |    |  status_id   |    | status_txt      |
| cust_cntct |    |  datetime    |    -------------------
| subject    |    ----------------
| message    |    
-------------- 
```

我现在想制作显示所有现有票证的概览表。以默认状态插入票证。并发时间戳将是添加工单的时间。每次工单移动到下一个状态时，都会添加一个带有时间戳的新状态。最新状态始终是当前状态。

我不知道如何创建一个查询来获取每张票的最新状态。一个简单的连接将返回与其拥有的状态数量一样多的票。我想创建一个连接，但只显示结果是状态的时间戳对于某个票证是最新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:15:11.170

尝试这个：

```
SELECT  a.*, b.`datettime`, d.status_txt
FROM    tickets a
            INNER JOIN statusses b
                on a.id = b.ticket_ID
            INNER JOIN
            (
                SELECT  ticket_ID, MAX(`datetime`) CurrentTicketDate
                FROM    Statuses
                GROUP BY ticket_ID
            ) c
                ON  b.ticket_ID = c.tecket_ID AND
                    b.`datetime` = c.CurrentTicketDate
            INNER JOIN Status_Codes d
                on b.status_ID = d.id 
```

# ruby-on-rails - 将 after_validation 与 if 或子句一起使用

> ID：12034179
> 
> 赞同：2
> 
> 时间：2012-08-20T08:08:07.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

有人可以指出我正确的方向。

我正在使用 after_validation 来竞争地理编码，我想知道如何处理 or || if 子句的选项。

这按预期工作

```
class Address < ActiveRecord::Base

after_validation :geocode, if: :address_changed? 
```

但这并不

```
class Address < ActiveRecord::Base

after_validation :geocode, if: :address_changed? || :zipcode_changed? 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:25:11.027

如果您不想使用 Thilo 的`Proc`方法，那么您可以添加自己的自定义方法并使用它：

```
class Address < ActiveRecord::Base
  after_validation :geocode, if: :address_or_zip_changed?
private
  def address_or_zip_changed?
    address_changed? || zipcode_changed?
  end
end 
```

如果您在多个验证中需要相同的复合条件，这可能（或可能不会）更好地阅读并且很方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:16:33.727

> :if - 指定要调用的方法、过程或字符串以确定是否应该进行验证（例如 :if => :allow_validation 或 :if => Proc.new { |user| user.signup_step > 2 }）。方法、过程或字符串应返回或评估为真或假值。

所以尝试一个过程：

```
if: Proc.new { |a| a.address_changed? || a.zipcode_changed? } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:26:30.850

您可以使用 :if 执行此操作

```
validates :email, :unique=> true, :if => Proc.new { email.present? } 
```

或者你也可以使用 lambda

```
validates :email, :unique=> true, :if => lambda { email.present? } 
```

# jquery - 使用 jquery 更改 mousemove() 容器的顶部位置

> ID：12034186
> 
> 赞同：1
> 
> 时间：2012-08-20T08:08:39.207
> 
> 标签：jquery, html, containers, mousemove

谁能帮助告诉我如何更改此鼠标移动容器的 y 位置。

```
container.find(".item_over").mousemove(function(e) { 
        var offset = container.offset();
        x = e.pageX - offset.left;
        var currentZone = Math.floor(x / zoneWidth);
        $(this).find("li").css("display", "none"); 
        $(this).find("li:eq(" + currentZone + ")").css("display", "block"); 
    }); 
```

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:35:23.733

```
container.find(".item_over").mousemove(function(e) { 
    var offset = container.offset(),  //comma to seperate variables
        x = e.pageX - offset.left, 
        y = e.pageY - offset.top, //gets Y, not sure how you intend to use it ??
        currentZone = Math.floor(x / zoneWidth);

    $(this).find("li").css("display", "none"); 
    $(this).find("li:eq(" + currentZone + ")").css("display", "block"); 
}); ​ 
```

# view - Symfony2：使用侦听器更改渲染视图

> ID：12034187
> 
> 赞同：8
> 
> 时间：2012-08-20T08:08:40.157
> 
> 标签：view, symfony, rendering, listener

我想在我的 Symfony2 项目中在不同的上下文中呈现不同的视图。我为相同的操作使用多个路由，我想渲染一个不同的页面（视图）但使用相同的控制器。例如我有：

```
@Route("/articles/show", name="articles_show")
@Route("/mobile/articles/show", name="mobile_articles_show") 
```

**两条路线**都使用**相同的操作**：ArticlesController:showAction()，但应该呈现 2 个不同的模板（用于移动用户和常规用户）。

```
show.html.twig
mobile.show.html.twig 
```

我不想在我的控制器中使用 if 语句或其他任何东西，所以我创建了一个侦听器（类似于 preExecute 函数）

这是定义我的**侦听**器的部分或我的**config.yml**

 **```
services:
    controller.pre_execute_listener:
        class: MyProject\MyBundle\Listener\ControllerListener
        arguments: ["@security.context", "@doctrine", "@router", "@session"]
        tags:- { name: kernel.event_listener, event: kernel.controller, method: preExecute } 
```

**我正在考虑在监听器 preExecute 函数**中做类似的事情：

```
if(substr($route,0,7) == 'mobile_'){
    $view = 'mobile.'.$view;
} 
```

不幸的是，在渲染之前，我找不到“即时”获取**$view或更新视图的方法。**

我希望我的问题足够清楚，在此先感谢，欢迎任何想法:)

J。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T09:26:45.720

这是**解决方案**：

首先我必须听**kernel.view**，而不是 kernel.controller。

然后我使用“ **@template** ”服务（感谢 Marko Jovanovic 的提示）

所以这是我的新 config.yml：

```
services:
    controller.pre_execute_listener:
        class: MyProject\MyBundle\Listener\ControllerListener
        arguments: ["@templating"]
        tags:
                - { name: kernel.event_listener, event: kernel.view, method: preExecute } 
```

最后这是我的监听**器 preExecute 函数**

```
public function preExecute(\Symfony\Component\HttpKernel\Event\GetResponseForControllerResultEvent $event){
    //result returned by the controller
    $data = $event->getControllerResult();

    /* @var $request  \Symfony\Component\HttpFoundation\Request */
    $request =  $event->getRequest();       
    $template = $request->get('_template');
    $route = $request->get('_route');

    if(substr($route,0,7) == 'mobile_'){
        $newTemplate = str_replace('html.twig','mobile.html.twig',$template);

        //Overwrite original template with the mobile one
        $response = $this->templating->renderResponse($newTemplate, $data);
        $event->setResponse($response);
    }
} 
```

希望这可以帮助！

J。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-24T13:11:39.410

`Response`值得注意的是：如果您直接返回-object（例如，当您调用`$this->render()`），则接受的解决方案实际上不起作用，因为`kernel.view`在这种情况下不会触发事件：

> 如果控制器没有返回 Response 对象，则内核调度另一个事件 - `kernel.view`。
> 
> *— 参见[Symfony 的 HTTP 内核文档](http://symfony.com/doc/current/components/http_kernel/introduction.html#the-kernel-view-event)*

我无法解决这个问题，但找到了另一个有趣的解决方案来解决同样的问题：你可以像 ZenstruckMobileBundle 那样简单地扩展 twig 的渲染引擎，或者像[LiipThemeBundle](https://github.com/kbond/ZenstruckMobileBundle/blob/master/Twig/TwigEngine.php)那样编写你自己的文件定位[器](https://github.com/liip/LiipThemeBundle)。

[编辑：] 或者，您也可以覆盖`TemplateNameParser`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:15:44.237

您可以添加“@templating”服务作为 controller.pre_execute_listener 的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T15:50:47.983

似乎您的设备检测是在您到达您的路线之前完成的，所以我敢打赌，由于在请求之前进行了一些检测，您希望移动用户会使用移动路线，这似乎在每个模板和 url 生成中都很难处理。

在之前或之后检测设备可能会更好（感谢[Categorizr](http://www.brettjankord.com/2012/01/16/categorizr-a-modern-device-detection-script/)或[一些不错的 apache 配置](https://github.com/kbond/ZenstruckMobileBundle#reference)），但不依赖于使用的路由进行移动检测。

将 Categorizr 与调用模板渲染的[方式](https://stackoverflow.com/a/12000005/236281)集成可能会很好。

然后使用[一个不错的包来使用正确的模板/主题](https://github.com/liip/LiipThemeBundle)或[使用提供一些更通用功能的包](https://github.com/kbond/ZenstruckMobileBundle)**

# grails - 如何为 Spock 测试指定环境？

> ID：12034194
> 
> 赞同：2
> 
> 时间：2012-08-20T08:09:09.497
> 
> 标签：grails, spock

如何为特定 Spock 测试指定测试环境而不是默认测试环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:27:01.813

因为您可以通过命令（http://grails.org/plugin/spock，请参阅运行测试部分）使用 spock 框架，如下所示：

```
grails test-app :spock 
```

您也应该能够指定环境，就像这样：

```
grails [environment]* test-app :spock 
```

因为 test-app 脚本允许环境选项。

让我知道这是否适合您。:)

编辑：

正如您所注意到的，上面的解决方案适用于您应用程序中的每个测试。为了注释特定环境的每一个测试，我认为你应该看看这个插件：

[http://www.grails.org/plugin/spock-grails-env-extensions](http://www.grails.org/plugin/spock-grails-env-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T15:51:35.357

> 谢谢你。这正是我想要的。不幸的是，当前版本的插件不适用于 Spock v0.6 =( – fedor.belov 2012 年 8 月 22 日 10:52

它有效，您只需将dependsOn 注释掉（使用Spock v0.7）。

[https://github.com/osoco/grails-spock-env-extensions/blob/master/SpockGrailsEnvExtensionsGrailsPlugin.groovy](https://github.com/osoco/grails-spock-env-extensions/blob/master/SpockGrailsEnvExtensionsGrailsPlugin.groovy)

# jquery - 如何让我的代码等到循环中的所有代码执行后再继续？

> ID：12034196
> 
> 赞同：4
> 
> 时间：2012-08-20T08:09:19.797
> 
> 标签：jquery, callback, each

我正在使用 jquery 遍历一组 html 元素`each`。在每次迭代中，我调用一个`get`. 我想跟踪成功的获取并在最后输出一个计数。

```
var numSuccessful = 0;
$('.mySelector').each(function(){
    $.get('/myCfc.cfc?method=doSomething&id=' + $(this).attr('id'), 
        function(data){
            numSuccessful++;
    });
});
alert(numSuccessful + ' successful'); 
```

这段代码的问题是 each 方法开始所有的 get 调用，然后在完成 get 之前继续到警报 - 并且在 numSuccessful 变量更新之前。在测试运行中，我以“0 成功”而不是“4 成功”结束，因为警报执行得太快了。如何让代码等到所有完成后再继续？整个“each”语句是否有成功回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:42:40.583

您可以使用返回的承诺`$.ajax`来设置灵活的回调队列，如下所示：

```
var requests = []; //Array containing all the ajax calls

for (var i = 0; i < 9; i++) {
    requests.push(
    $.ajax({
        url: '/echo/html', //this is because of jsfiddle.net
        type: 'post', //this one too
        success: function() {
           //whatever
        }
    }));
}

$.when.apply($, requests).then(function() { //.apply is needed as we want to pass an Array
  //called when all requests are done
}).fail(function(){ //this will be triggered when one of the requests fails
  //error handling can go here
}); 
```

看到**[这个工作小提琴](http://jsfiddle.net/ykjBZ/1/)**并阅读**[`.when()`和`.then`](http://api.jquery.com/jQuery.when/)**

在您的情况下，最终会出现：

```
var numSuccessful = 0;

var requests = $.makeArray($('.mySelector').map(function(){
    return $.ajax({
        url: '/myCfc.cfc?method=doSomething&id=' + this.id,
        type: 'GET'
    }).done(function(){
        numSuccessful++;
    });
}));

$.when.apply($, requests).then(function() {
    alert(numSuccessful + ' successful');
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:26:00.413

您可以使用*递归函数*，请尝试以下操作：

```
var num = 0;
var $ms = $('.mySelector');

function go() {
     $.get('/myCfc.cfc?method=doSomething&id='+$ms.eq(num).attr('id'), 
       function(data){
            num++;
            if ((num-1) == $ms.length) callback(); else go();
     }).error(callback)
}

function callback(){
  alert(num)
}

go() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:12:39.503

只需替换`$.get`并将`$.ajax`设置`async`设置为false。

```
$.ajax({
    url : '/myCfc.cfc',
    data : { 'method' : 'doSomething' , 'id' : $(this).attr('id') },
    async : false,
    success : function(data){
       numSuccessful++;
    }
}); 
```

通过这样做，这个脚本将等到它得到响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:14:55.743

```
var numSuccessful = 0;
var totalSelectors = $('#mySelector').length;
$('#mySelector').each(function(){
  $.get('/myCfc.cfc?method=doSomething&id=' + $(this).attr('id'), 
  function(data){
    numSuccessful++;
    if(!totalSelectors--) doneSelectors();
  });
});

function doneSelectors() {
  alert(numSuccessful + ' successful');
} 
```

注意：以上功能不能正常工作！`$.get()`不会通知错误，因此如果您收到任何错误，最终函数将永远不会运行。

相反，您需要将其转换为使用该`$.ajax()`功能。并定义成功和失败回调。如果您需要帮助，请告诉我。

# shell - 自动输入密码的shell脚本

> ID：12034198
> 
> 赞同：3
> 
> 时间：2012-08-20T08:09:30.173
> 
> 标签：shell, automation, passwords

所以我做了一个小脚本来更改我的mac地址，但它需要我输入我的密码才能进行切换......我可以添加什么让它为我输入它？

```
sudo ifconfig en1 ether 00:11:22:33:44:55 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:12:06.050

您可以在 /etc/sudoers sudo 配置文件中为您的 id 添加 ifconfig 命令

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:14:04.723

编辑：我现在已经意识到，除非您将这些命令包装在二进制文件中，否则您实际上无法做到这一点。例如，使用 C 程序中的 system() 函数。我想 setuid shell 脚本是一个糟糕的主意，以至于 linux 根本不使用它们 :)。

虽然在某些情况下可能很危险，但您可以将脚本设置为 setuid。为此，将该命令放入文件中，如下所示：

```
#!/bin/bash
ifconfig en1 ether 00:11:22:33:44:55 
```

然后设置权限，使其归根用户所有，但只有您可以触摸该文件：

```
$sudo chown root file.sh
$sudo chgrp username file.sh
$sudo chmod 070 file.sh 
```

然后让它suid：

```
$sudo chmod +s file.sh 
```

现在您应该能够以您的用户身份执行此文件，但要以 root 权限运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:16:27.090

您不想将根密码放在可访问的文件中。

最好是在没有密码的情况下使该命令成为 sudoable。

尝试输入 /etc/sudoers

```
<your username> ALL=(ALL) NOPASSWD: ifconfig 
```

这表示只要命令是 ifconfig，您的用户就不需要为 sudo 输入密码。

不过，您可能应该首先阅读 sudoers 文件的一般工作原理。不知道你在做什么，但这里有 Ubuntu 的文档： [https ://help.ubuntu.com/community/Sudoers](https://help.ubuntu.com/community/Sudoers)

这是 OSX 的文档[http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man5/sudoers.5.html](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man5/sudoers.5.html)

# c# - OledbConnection.Dispose() 是否关闭连接？

> ID：12034208
> 
> 赞同：8
> 
> 时间：2012-08-20T08:10:26.237
> 
> 标签：c#, .net, dispose, oledbconnection

> **可能重复：**
> [如果使用 using 子句，是否需要关闭 DbConnection？](https://stackoverflow.com/questions/12033998/is-there-any-need-to-close-a-dbconnection-if-a-using-clause-is-used)

是否`OledbConnection.Dispose()`关闭连接？

我知道`SqlConnection`确实如此，但那又如何`OledbConnection`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:14:26.703

**是的，它也可以。**

来源：[OleDbConnection.Dispose 方法（布尔值）](http://msdn.microsoft.com/en-us/library/aa325891%28v=vs.71%29)

> Dispose 方法调用 Close，并从连接池中删除 OleDbConnection。

有关详细信息，请参阅`Remarks`参考链接上的部分以了解释放托管和非托管资源的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:16:11.257

是的，根据 MSDN [http://msdn.microsoft.com/en-us/library/aa325890(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa325890(v=vs.71).aspx)上的文档，`OleDbConnection.Dispose()`也确实调用了`OleDbConnection.Close()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T08:15:26.883

是的，它确实[MSDN](http://msdn.microsoft.com/en-us/library/aa325891.aspx)：

> Dispose 方法调用 Close，并从连接池中删除 OleDbConnection。

请注意，以上内容来自 .NET Framework 1.1。但是（在这种情况下）你可以指望没有改变的事情。

此外，您几乎可以 100% 确定实现的每个类`IDbConnection`都会“关闭”`Dispose`方法中的连接——无论这对特定实现意味着什么都不相关，但它相当于`Close`手动调用。

每个不以这种方式运行的实现都应被 IMO 视为已损坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T08:16:01.620

这是最终证明..该`Dispose`方法的实际代码，使用反射器拍摄：

```
// System.Data.OleDb.OleDbConnection
protected override void Dispose(bool disposing)
{
    if (disposing)
    {
        this._userConnectionOptions = null;
        this._poolGroup = null;
        this.Close();
    }
    this.DisposeMe(disposing);
    base.Dispose(disposing);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T08:12:48.673

是的。如果没有，那么它就不能完全处置它的资源。BinaryReader、BinaryWriter 等也都关闭了底层流

# android - 按下后退按钮时清除捆绑包

> ID：12034218
> 
> 赞同：0
> 
> 时间：2012-08-20T08:11:17.567
> 
> 标签：android, bundle, onkeydown

我在活动中使用片段（ListFragment）并保存所选项目以在屏幕旋转时恢复它。

```
@Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("currentListIndex", mCurrentSelectedItemIndex);
    } 
```

当用户单击“返回”时，我不想保存项目选择。我需要覆盖后退按钮并清除传递给我的活动的捆绑实例。

我真的不知道如何获取捆绑实例，我尝试使用全局变量，但是当我使用它时，我有一个 NullPointerException。

这是我的做法：

```
private Bundle bundle;

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        bundle.clear();
    } 

    return super.onKeyDown(keyCode, event);
} 
```

我在哪里可以检索我想要的信息（currentListIndex）：在我的活动的 onCreate() / 我的详细信息片段的 onCreateView() 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:01:11.303

好的，我找到了解决方案。

在我扩展 ListFragment 的课程中​​：

```
// Restore last state for checked position (when screen orientation
        // change or activity resumed)
        if (savedInstanceState != null) {
            mCurrentSelectedItemIndex = savedInstanceState.getInt(
                    "currentListIndex", -1);
        } 
```

在我的活动中：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    AccountBDD accountBdd = application.getAccountBdd();
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        mCurrentSelectedItemIndex = -1;
    }
    return super.onKeyDown(keyCode, event);
} 
```

它有效

# iphone - setStatusBarOrientation 不起作用

> ID：12034220
> 
> 赞同：0
> 
> 时间：2012-08-20T08:11:31.140
> 
> 标签：iphone, statusbar

我正在尝试将状态栏的方向修复为纵向，但没有成功。我努力了：

```
[application setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO]; 
```

并且还`shouldAutorotateToInterfaceOrientation`设置为 return `NO`。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:46:37.003

If you want to change the orientation when a particular view is showing, you should call [UIApplication setStatusBarOrientation:animated:] inside your [UIViewController viewWillAppear:] override method for each of the view controllers that force a particular orientation. That will cause a change when a view is being pushed onto the stack and when it's being popped off it. Make sure you call super in your override method.

Also change your shouldAutorotateToInterfaceOrientation method:

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

# php - 是否可以在 Doctrine2 中的持久化之后和刷新之前获取实体的 ID？

> ID：12034221
> 
> 赞同：2
> 
> 时间：2012-08-20T08:11:36.987
> 
> 标签：php, symfony, doctrine-orm

我有`User`登录注册页面。

现在在同一个页面上我还有一个表格，即`UserInterests`。

`UserProfile`现在我有 PostPersist 函数，它在用户被持久化后创建新的

现在 UserProfile 与用户 ID 相关联，并`UserInterests`与`UserProfile ID`

现在客户希望在同一用户页面上使用 UserInterests，但我遇到的问题是尚未创建 UserProfile。现在怎么能坚持下去。有没有什么办法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:25:06.650

我不认为你可以在冲洗之前获得身份证。

您可以在模型之间创建关联，这样 Doctrine 将在保存时处理 id，您可以使用以下内容检索您的 UserInterest：

```
$user->getProfile()->getInterests(); 
```

因此，您的 User 模型将具有包含您的 UserProfile 的属性：

```
/**
 * @OneToOne(targetEntity="UserProfile")
 * @JoinColumn(name="profile_id", referencedColumnName="id")
 **/
private $profile; 
```

并且您的 UserProfile 类应该有一个属性来保存 UserInterests 模型。

```
/**
 * @OneToOne(targetEntity="UserInterests")
 * @JoinColumn(name="interests_id", referencedColumnName="id")
 **/
private $interests; 
```

您现在可以创建一个空的 $userProfile 模型（将其他模型链接在一起，实际填充可以在您的 postPersist 函数中完成）和一个 $userInterests 模型，通过

```
$interests = new UserInterests();

// create an empty UserProfile, and fill it in your PostPersist function, 
// that way it can already be used to link the User and UserInterests
$profile = new UserProfile();

$profile->setInterests($interests);
$user->setProfile($profile); 
```

现在 Doctrine 会在持久化时填写 id，您无需担心它们。

更多信息[在这里](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)

# sublimetext2 - SublimeCodeIntel 的类比支持 java/c/c++

> ID：12034233
> 
> 赞同：2
> 
> 时间：2012-08-20T08:12:26.333
> 
> 标签：sublimetext2

有没有支持 java/c/c++ 的 SublimeCodeIntel 的类似物？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T03:18:43.207

你可以使用[exuberant-ctags](http://ctags.sourceforge.net/)和[sublime 插件的 ctags的组合](https://github.com/SublimeText/CTags)

# php - 错误的字符编码DOMDocument php

> ID：12034235
> 
> 赞同：3
> 
> 时间：2012-08-20T08:12:30.607
> 
> 标签：php, character-encoding, domdocument

我有一些 html 内容，其所有文本都是波斯语！我想通过方法 DOMDocument::loadHTML($html) 将此内容提供给 DOMDocument 以执行一些操作，然后通过 DOMDocument::saveHTML() 将其返回...但是在显示字符时存在问题 :-( 例如“سلام”更改为“Ø³Ù„Ø§Ù...”，即使我将脚本文件编码更改为 UTF-8，但它不起作用。

```
<?php
$html = "<html><meta charset='utf-8' /> سلام</html>";

$doc = new DOMDocument('1.0', 'utf-8');
$doc->loadHTML($html);
print $html; // output : سلام
print $doc->saveHTML(); // output : Ø³Ù„Ø§Ù…
print $doc->saveHTML($doc->documentElement); // output : Ø³ÙØ§Ù
?> 
```

更新：根据朋友的指示，我使用了 $doc->loadHTML(mb_convert_encoding($html, 'HTML-ENTITIES', 'UTF-8')); 它奏效了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T14:07:03.023

告诉 XML 解析器正在读取的数据是 UTF-8 编码的：

```
<?php

// original input (unknown encoding)
$html = '<html>سلام</html>';

$doc = new DOMDocument();

// specify the input encoding
$doc->loadHTML('<?xml encoding="utf-8"?>' . $html);

// specify the output encoding
$doc->encoding = 'utf-8';

// output: <html><body><p>سلام</p></body></html>
print $doc->saveHTML($doc->documentElement); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T00:26:10.817

```
$html = '<html>سلام</html>';
$doc = new DOMDocument(); 
```

使用 2 个预定义常量 ( & )将 string 的字符编码转换`$html`为 UTF-8，然后将其加载到 DOM 。 `libxml``LIBXML_HTML_NOIMPLIED``LIBXML_HTML_NODEFDTD`

第一个设置`HTML_PARSE_NOIMPLIED flag`，它关闭隐含的 html/body... 元素的自动添加（仅在 PHP 5.4.0 中可用）。

第二个设置`HTML_PARSE_NODEFDTD`标志，防止在找不到时添加默认文档类型。使用这些常量可以帮助您以更灵活的方式管理解析。

```
$doc->loadHTML(mb_convert_encoding($html, 'HTML-ENTITIES', 'UTF-8'), LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD); 
```

然后定义 DOM 编码本身（之前的定义是用于输入）：

```
$doc->encoding = 'UTF-8'; 
```

如果您不使用 libxml 2.7.7（自 PHP >= 5.4.0 起），请删除前导和尾随`<html>`&标签：`<body>`

```
$doc->normalizeDocument(); //Remove leading and trailing <html> & <body> tags
print $doc->saveHTML($doc->documentElement); 
```

玩得开心！

# c++ - C ++ SDL打破while循环

> ID：12034241
> 
> 赞同：2
> 
> 时间：2012-08-20T08:12:48.873
> 
> 标签：c++, c

几天来，我一直在搞乱 C++ SDL，遇到了一个有趣的问题。

```
SDL_Event event1;
while(SDL_WaitEvent(&event1))
{
    for(size_t i = 0; i < MainMenuOptions.size();i++)
    {
        if(event1.button.x > MainMenuOptions.at(i).GetX() && event1.button.x < (MainMenuOptions.at(i).GetX() + MainMenuOptions.at(i).GetWidth())  
        && event1.button.y > MainMenuOptions.at(i).GetY()  && event1.button.y < (MainMenuOptions.at(i).GetY() + MainMenuOptions.at(i).GetHeight()))
        {
            break;
        }
    }
} 
```

当我在 for 循环中使用 break 时，它会跳出 for 循环而不是 while 循环。我如何在不使用 goto 语句的情况下打破 while 循环？（我听说 goto 语句是不好的编程）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T08:56:09.403

常见的解决方案是将这些东西放入它自己的函数中并从中返回：

```
inline SDL_Event do_it()
{
    SDL_Event event;
    while(SDL_WaitEvent(&event))
        for(std::size_t i = 0; i < MainMenuOptions.size(); ++i)
            if(/*...*/)
                return event;
    return event; // or whatever else suits, I know too little about your code
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T08:18:14.527

对此还有另一个答案，我想我应该在每个人都反对我之前说出来。使用变量当然是一种“好”的方法。然而，仅仅为了跳出循环而创建额外的变量似乎有点矫枉过正，对吧？

所以是的，这一次`goto`是完美的解决方案。很清楚你在用它做什么，你没有使用另一个变量，代码保持简短、可维护和可读。

语句*goto is bad practice*主要是 BASIC 时代的残余，当时它是更改代码流的唯一方法。然而，现在我们“知道得更好”，并说 the`goto`或任何其他结构是坏的，只是没有削减它。*对于您试图用它解决的一个特定问题*可能会很糟糕（人们试图用 goto 解决的大多数问题就是这种情况）。但是，考虑到正确的情况（如这里），没关系。当然，我不想在这里开始辩论。Goto 就像一个非常强大的工具（例如大锤）。它有它的用途，你不能说一个工具是完全坏的。是用户以错误的方式使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T08:15:12.287

使用变量表示需要退出：

```
bool exit_program = false;

while( !exit_program && SDL_WaitEvent(&event1) )
{
    for( /* ... */ )
    {
        exit_program = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-24T15:20:39.447

第一点：IMO，你试图将太多东西包装到一个地方，并最终得到一些相当难以理解的东西——有人必须通读一整套长长的比较才能理解其中的任何内容应该完全完成。

第二点：使用显式循环遍历标准集合通常是错误的——这也不例外。标准库已经有一个算法来完成与循环相同的基本任务。最好使用它而不是自己重新编写它。

```
template <class T>
bool in_range(T a, T b, T c) { 
    return (a > b) && (a < b+c);
}

class in_rect {
   point p;
public:
   in_rect(point const &p) : p(p) {}

   // Not sure of the type of objects in MainMenuOptions, so just T for now.
   // 
   bool operator()(T const &m) {
       return in_range(p.x, m.GetX(), m.GetWidth()) 
           && in_range(p.y, m.GetY(), m.GetHeight());
   }
};

SDL_Event event1;

while (SDL_WaitEvent(&event1))
    if (std::any_of(MainMenuOptions.begin(), MainMenuOptions.end(),
                    in_rect(event1.button))      
        break; 
```

一旦我们解决了其他问题，就不再需要（甚至使用）`goto`. 我们没有采取任何明确的措施来删除它，但是当其他问题得到解决（特别是用适当的算法替换循环）时，它的使用就消失了。

我想我应该抢先评论一下代码总行数的增加：是的，代码行数更多了。它呢？如果我们真的想要，我们可以使用相同的基本方法，但我们基本上只是从原始语句中获取条件并将其填充到 lambda 中，而不是定义`in_rect`and 。虽然我*很*高兴将 lambdas 添加到 C++ 中，但在这种情况下，我对使用它并不感到兴奋。它将摆脱.`in_range``if`*`goto`*

 *简而言之，行数并不是衡量任何东西的好方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-20T08:38:09.000

没有额外变量的解决方案 和`goto`：

```
while(SDL_WaitEvent(&event1))
{
    size_t i;
    for(i = 0; i < MainMenuOptions.size();i++)
    {
        if(/* ... */)
        {
            break;
        }
    }
    if (i < MainMenuOptions.size())
        break;
} 
```*

# django - Varnish 与 Django Csrf 保护兼容吗？

> ID：12034242
> 
> 赞同：4
> 
> 时间：2012-08-20T08:12:51.280
> 
> 标签：django, varnish

我想把 Varnish 作为一个用 Django 构建的企业网站的前面，以提高它的性能。在网站的每一页上都有一个小的联系我们表格。除此之外，该网站大多是静态的。问题是我不知道如何将 Varnish 与 Django 的 Csrf 保护结合起来。我想同样的问题适用于任何类型的带有 Django csrf 保护的整页缓存。

我想关闭 csrf 中间件是不行的 - 对吧？

马蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:17:45.863

通常我会建议你开始使用[Django + Varnish ESI](http://yml-blog.blogspot.com/2010/01/esi-using-varnish-and-django.html)。

如果您仅使用整页缓存 - 我建议您使用以下解决方法：

1.  移动表单加载到 AJAX 调用（到 POST 请求）
2.  在您的`vcl`文件中，要么只标记 GET 请求，`lookup`要么标记 POST 请求`hit_for_pass`。

# linux - 如何在 linux 中使用 tomcat(clientauth="true") 构建 ssl

> ID：12034243
> 
> 赞同：1
> 
> 时间：2012-08-20T08:12:51.993
> 
> 标签：linux, tomcat, ssl

我尝试了很多时间，但失败了。谁能告诉我一步一步吗？我只能使用 tomcat 和 keytool 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:52:59.643

这个过程有点复杂，您需要了解证书颁发机构（CA）和公钥基础设施（PKI）的工作原理。脚步

1.  创建根CA
2.  为 tomcat 服务器和客户端生成密钥对
3.  使用步骤 2 的密钥对生成 CSR
4.  使用 RootCA 签署 CSR
5.  导入 CA 回复
6.  在服务器和客户端机器上安装 RootCA 作为可信 CA 和签名证书。
7.  修改 tomcat 连接器设置以使用两阶段 SSL

如果您不熟悉 keytool 或 openssl 命令行，可以使用一些 GUI，例如[portecle](http://portecle.sourceforge.net/) [TinaCA](http://tinyca.sm-zone.net/) 如果您运行的是 windows 服务器，您可以安装证书服务并通过 Web 界面进行生成和签名

# javascript - 如何在 JavaScript 中随机排列数组？

> ID：12034247
> 
> 赞同：-1
> 
> 时间：2012-08-20T08:13:23.370
> 
> 标签：javascript, jquery, random, sorting

> **可能重复：**
> [如何随机化 javascript 数组？](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)

我需要从一个数组中实现一个随机二叉搜索树（R-BST），以便排序后的数组给出 O(n lg n) 平均时间，而不是 O(n^2) ，如果数组是最坏的情况时间已经排序或反向排序。现在两个步骤是：

1.  随机排列数组 A。
2.  调用 BST 排序 (A) 。

我该如何进行第一步 JavaScript？我希望它使每个`n!`排列都同样可能发生。我相信在 Java 中做到这一点的方法是`Collections.shuffle`这样说：

```
Integer[] arr = new Integer[10]; 

for (int i = 0; i < arr.length; i++) { 
    arr[i] = i; 
} 

Collections.shuffle(Arrays.asList(arr)); 

for (int i = 0; i < arr.length; i++) { 
    System.out.print(arr[i] + " "); 
} 
```

我将如何在 Javascript 中执行此操作？我可以使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:19:05.177

只需`.sort`与随机比较器一起使用：

```
var comparer = function(a,b) {
    return 2 * Math.random() - 1;
}
array.sort( comparer ); 
```

**编辑**由于有些人对解决方案不满意，所以这里有更经典的方法：

```
Array.prototype.shuffle = function() {
    var result = [];
    while( this.length ) {
        var index = Math.floor( this.length * Math.random() );
        result.push( this[ index ] );
        this.splice(index, 1);
    }
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T08:17:46.987

您可以使用 shuffle 函数扩展 Array 原型：

```
Array.prototype.shuffle = function() {
  var tmp, rand;
  for(var i =0; i < this.length; i++){
    rand = Math.floor(Math.random() * this.length);
    tmp = this[i]; 
    this[i] = this[rand]; 
    this[rand] = tmp;
  }
} 
```

然后调用`shuffle`任何数组进行就地排序：

```
var arr = [1,2,3,4];
arr.shuffle();
console.log(arr); 
```

# iphone - 将 String 转换为特殊的 - 拆分 NSString

> ID：12034248
> 
> 赞同：-3
> 
> 时间：2012-08-20T08:13:29.453
> 
> 标签：iphone, objective-c, ios, xcode

我有一个像这样的字符串：`"mocktail, wine, beer"`

我怎样才能把它转换成：`"mocktail", "wine", "beer"`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:16:53.840

以下为您提供所需的结果：

```
NSString *_inputString = @"\"mocktail, wine, beer\"";
NSLog(@"input string : %@", _inputString);
NSLog(@"output string : %@", [_inputString stringByReplacingOccurrencesOfString:@", " withString:@"\", \""]); 
```

结果是：

```
input string : "mocktail, wine, beer"
output string : "mocktail", "wine", "beer" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:04:47.967

你需要使用：

```
NSArray * components = [myString componentsSeparatedByString: @", "]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:00:09.777

```
NSString *string = @"mocktail, wine, beer";
//remove whitespaces
NSString *trimmedString = [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

//get array of string
NSArray *array = [trimmedString componentsSeparatedByString:@","];
NSMutableArray *newArray = [[NSMutableArray alloc] init];

for (NSString *trimmedString in array) {
    NSString *newString = [NSMutableString stringWithFormat:@"'%@'", trimmedString];
    [newArray addObject:newString];
}

//merge new strings
NSString *finalString = [NSString stringWithFormat:@"%@", [newArray objectAtIndex:0]];

for (NSInteger i = 1; i < [newArray count]; i++) {
        finalString = [NSString stringWithFormat:@"%@, %@", finalString, [newArray objectAtIndex:i]];
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T08:28:49.523

在不特别了解 iOS 或 Objective-c 的情况下，我假设您可以使用拆分功能。

在几乎任何高级编程语言中都有这样的功能。

尝试： [Objective-C 拆分](https://stackoverflow.com/questions/5806852/ios-string-split)

这将为您提供一个字符串数组。然后，您实际上可以对那些您想做的事情进行处理，例如用单引号将它们括起来并将它们附加在一起。:D

# c#-3.0 - 将两个数据库合并为一个数据库

> ID：12034250
> 
> 赞同：0
> 
> 时间：2012-08-20T08:13:35.770
> 
> 标签：c#-3.0, sql-server-express

我在两台不同的计算机上部署了相同的应用程序。现在我需要将两个不同数据库中的两个数据合并到一个数据库中。该应用程序是使用 c# .net 开发的，并使用 sql express 2008。出现问题是因为我无法通过 LAN 使用该应用程序。所以我需要将两个数据库合并为一个。所以请帮我解决合并它的问题。我还需要通过 LAN 运行应用程序，但 sqlbrowser 没有启动，我已经在互联网上搜索了答案，但我并不走运。

谢谢，等待回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:58:50.310

您要采用的方法在很大程度上取决于您的架构，但[Microsoft Sync Framework](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)应该很有用。它可以让您定义解决冲突和合并数据的规则。

至于通过 LAN 访问您的数据，[这篇文章](http://www.datamasker.com/SSE2005_NetworkCfg.htm)很好地概述了启用对 SQL Server Express 的远程访问所需的内容。

# jquery - jQuery：将 div 内容加载到另一个 div 中？

> ID：12034252
> 
> 赞同：2
> 
> 时间：2012-08-20T08:13:39.957
> 
> 标签：jquery

当我单击页面上的链接时，我在页面上有多个隐藏的 div，每个都包含不同的内容，例如

```
<a href="#contentone" class="clicky">Load content one</a>
<a href="#contenttwo" class="clicky">Load content two</a>

<div id="contentone">Some content here to be loaded into another div</div>
<div id="contenttwo">Some content here to be loaded into another div</div>

<div id="slider">
  This content to be replaced by content from links/hidden divs
</div> 
```

目前我已经有了这个设置，所以它从外部源加载内容，但我更希望它用隐藏在页面上的内容填充滑块（如上）。

我当前的 jquery 在下面，希望将其转换为在页面上的隐藏 div 中工作，而不是外部文件。

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(function () {
    $(".clicky").click(function () {
                var url = this.href;
                var e = $("#slider");
                e.load(url, function() {
                    e.animate({width: "show"}, 500);
                });
                return false;
    });
});
});//]]>  

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:18:24.630

你不需要使用`.load`.

```
$(function () {
    $(".clicky").click(function () {
        var content_id = $(this).attr('href');
        $('#slider').hide().html($(content_id).html()).show(500);
        return false;
    });
}); 
```

***[工作演示](http://jsfiddle.net/ARN2a/)***。

# r - R中的双循环

> ID：12034253
> 
> 赞同：0
> 
> 时间：2012-08-20T08:13:44.057
> 
> 标签：r, loops

```
for(i in 0:3) {
    for (j in quantile(0:80,probs=c(0,0.33,0.67,1))) {
        print(paste(i,j,sep=","))
    }
} 
```

产生：

```
"0,0"  
"0,26.4"  
"0,53.6"  
"0,80"  
"1,0"  
"1,26.4"  
.  
.  
. 
```

像下面这样生成怎么样：

```
"0,0"  
"1,26.4"  
"2,53.6"  
"3,80"  
? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:17:37.647

你真的不需要for循环：

```
paste(0:3,quantile(0:80,probs=c(0,0.33,0.67,1)),sep=",") 
```

给出：

```
[1] "0,0"    "1,26.4" "2,53.6" "3,80" 
```

如果你想以这种特定方式打印它，你可以循环这个结果并打印。

# java - 将命名空间添加到 AXIOMXPath

> ID：12034255
> 
> 赞同：3
> 
> 时间：2012-08-20T08:13:46.223
> 
> 标签：java, xpath, xml-namespaces, axiom

**XML：**

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <wmHotelAvailResponse xmlns="http://host.com/subPath">
      <OTA_HotelAvailRS Version="1.001">
      </OTA_HotelAvailRS>
    </wmHotelAvailResponse>
  </soap:Body>
</soap:Envelope> 
```

**代码 ：**

```
String  xpathString = "/soap:Envelope/soap:Body/wmHotelAvailResponse/OTA_HotelAvailRS";

AXIOMXPath xpathExpression = new AXIOMXPath(xpathString);

xpathExpression.addNamespace("soap",    "http://schemas.xmlsoap.org/soap/envelope/");
xpathExpression.addNamespace("xsi",     "http://www.w3.org/2001/XMLSchema-instance");
xpathExpression.addNamespace("xsd",     "http://www.w3.org/2001/XMLSchema");

OMElement rsMsg = (OMElement)xpathExpression.selectSingleNode(documentElement);

String version = rsMsg.getAttribute(new QName("Version")).getAttributeValue(); 
```

**问题：**
当`xmlns="http://host.com/subPath"`零件被删除时，这工作得很好。我想知道如何添加`xmlns="http://host.com/subPath"`部分来`xpathExpression`完成上述工作

我在下面试过但没有用。

```
xpathExpression.addNamespace("", "http://host.com/subPath"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:22:12.837

**解决方案**：

.1。添加此代码：

```
xpathExpression.addNamespace("x", "http://host.com/subPath"); 
```

.2\. 改变：

```
String  xpathString = "/soap:Envelope/soap:Body/wmHotelAvailResponse/OTA_HotelAvailRS"; 
```

**至**：

```
String  xpathString = "/soap:Envelope/soap:Body/x:wmHotelAvailResponse/x:OTA_HotelAvailRS"; 
```

**说明**：

Xpath 总是将任何无前缀的元素名称视为属于“无命名空间”。

因此，在评估 XPath 表达式时：

```
/soap:Envelope/soap:Body/wmHotelAvailResponse/OTA_HotelAvailRS 
```

Evaluator 尝试查找`wmHotelAvailResponse`“无命名空间”中的元素并失败，因为文档中的唯一`wmHotelAvailResponse`元素属于“http://host.com/subPath”命名空间。

# django - Django1.4中的静态文件管理

> ID：12034258
> 
> 赞同：2
> 
> 时间：2012-08-20T08:13:51.383
> 
> 标签：django, static-files, django-staticfiles, django-1.4

几天来，我一直对 Django 中的静态文件感到困惑。我找到了一种效果很好的解决方案。但是当我设置 DEBUG=False 时它崩溃了。所以我建立了一个新项目并做一些测试以获得更清晰的外观。首先，我使用默认设置创建一个项目。然后我将设置文件的一些行更改为：

```
STATIC_ROOT = '%s/site_media' % PROJECT_DIR
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    os.path.join(STATIC_ROOT, 'images'),
) 
```

之后，我将“hi.jpg”放在“project_dir/images/hi.jpg”中。我调用 runserver 并访问“http://127.0.0.1:8000/static/images/hi.jpg”。它不起作用。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:25:54.807

它是这样工作的：当`DEBUG=True`Django 自己提供静态文件时。届时`DEBUG=False`Django 将不再这样做，您需要配置您的 Web 服务器来执行此操作（例如 Apache）。

Django 对此有一个机制`django.contrib.staticfiles`（请参阅[管理静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)和静态文件[应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)）。这基本上意味着您需要运行`collectstatic`管理命令，该命令将在 Django 项目的目录中搜索所有静态文件，`/static/`并将它们放在一个目录中 ( `STATIC_ROOT`)。完成后，您的 Web 服务器可以提供该目录中的静态文件。

如果运行后找不到一个或多个静态文件，`collectstatic`则表示您配置错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:28:10.300

设置.py

```
PROJECT_DIR = os.path.dirname(os.path.abspath(__file__))

MEDIA_ROOT = os.path.join(PROJECT_DIR, 'site_media')
MEDIA_URL = '/site_media/'
STATIC_URL = '/static/'

if DEBUG:
    STATIC_ROOT = os.path.join(PROJECT_DIR, 'static')
else:
    STATICFILES_DIRS = (
        os.path.join(PROJECT_DIR, 'static'),
    ) 
```

网址.py

```
if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^site_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
        url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),
    ) 
```

:)

[Django：从 MEDIA_URL 迁移到 STATIC_URL](https://stackoverflow.com/questions/12020186/django-migrating-from-media-url-to-static-url/12020262#comment16039517_12020262)

# opengl - OpenGL我什么时候可以再次开始发出命令

> ID：12034262
> 
> 赞同：4
> 
> 时间：2012-08-20T08:14:04.913
> 
> 标签：opengl

这些标准暗示从我的第一个`gl`命令开始渲染并与其他命令并行继续进行渲染。`glBufferSubData`只要对象当前未在使用中，某些功能（例如指示加载）就可以在渲染期间发生。这引入了“框架”的逻辑概念，尽管标准中从未明确提及。

所以我的问题是什么定义了这个逻辑框架？也就是说，哪些调用划分了游戏，这样我就可以`gl`再次开始调用而不干扰前一帧？

例如，使用您最终调用的 EGL `eglSwapBuffers`（大多数实现都有某种交换命令）。从逻辑上讲，这是一帧和下一帧之间的边界。但是，这会调用块来支持垂直同步，这意味着在它返回之前您不能发出新命令。然而，文档暗示您可以在另一个线程中返回之前开始发出新命令（前提是您不接触任何正在使用的缓冲区）。

即使交换命令仍在前一个缓冲区上阻塞，我如何才能开始向下一个缓冲区发出命令？我想在 GPU 处理旧帧时开始为下一帧流式传输数据（特别是，我将有两个顶点缓冲区，专门为此目的交换每个帧，并在 OpenGL 文档中提到）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T09:05:18.307

OpenGL没有“框架”的概念，无论是逻辑的还是其他的。

OpenGL 真的很简单：每条命令的执行都好像所有先前的命令都事先完成了一样。

注意关键短语“好像”。假设您从缓冲区对象渲染，然后立即修改其数据。像这样：

```
glBindVertexArray(someVaoThatUsesBufferX);
glDrawArrays(...);
glBindBuffer(GL_ARRAY_BUFFER, BufferX);
glBufferSubData(GL_ARRAY_BUFFER, ...); 
```

这在 OpenGL 中是 100% 合法的。关于这将如何运作，没有任何警告、问题、担忧等。该`glBufferSubData`调用将像`glDrawArrays`命令*完成*一样执行。

您唯一需要考虑的是规范未指定的一件事：*性能*。

实现完全可以检测到您正在修改可能正在使用的缓冲区，因此会停止 CPU`glBufferSubData`直到从该缓冲区完成渲染。OpenGL 实现*需要*执行此操作或执行其他操作，以防止实际源缓冲区在使用时被修改。

因此，根据规范， OpenGL 实现*尽可能*异步执行命令。只要外界看`glDrawArrays`不出还没有画完任何东西，实现就可以为所欲为。如果您在绘图命令之后立即发出一个`glReadPixels`，则管道将不得不停止。你可以做到，但不能保证性能。

这就是为什么 OpenGL 被定义为一个封闭的盒子。这为实现提供了很大的自由，可以尽可能地异步。每次访问 OpenGL 数据都需要一个 OpenGL 函数调用，它允许实现检查该数据是否实际可用。如果没有，它就会停止。

摆脱停顿是[缓冲区对象失效](http://www.opengl.org/registry/specs/ARB/invalidate_subdata.txt)可能的原因之一。它有效地告诉 OpenGL 你想要孤立缓冲区的数据存储。这就是[缓冲区对象可用于像素传输](http://www.opengl.org/wiki/Pixel_Buffer_Object)的原因；它允许传输异步发生。[这就是栅栏同步对象存在](http://www.opengl.org/wiki/Sync_Object)的原因，以便您可以判断资源是否仍在使用中（可能用于`GL_UNSYNCHRONIZED_BIT`缓冲区映射）。等等。

> 但是，这会调用块来支持垂直同步，这意味着在它返回之前您不能发出新命令。

谁说的？缓冲区交换命令*可能会*停止。它可能不会。它是实现定义的，可以通过[某些命令](http://www.opengl.org/wiki/Swap_Interval)进行更改。for [`eglSwapBuffers`](http://www.khronos.org/registry/egl/sdk/docs/man/xhtml/eglSwapBuffers.html)only 的文档说它执行刷新，这可能会使 CPU 停止，但不是必须的。

# .net - 使用内联初始化反序列化布尔数据成员时发生奇怪的事情

> ID：12034269
> 
> 赞同：5
> 
> 时间：2012-08-20T08:14:34.720
> 
> 标签：.net, serialization, protocol-buffers, protobuf-net

当序列化具有内联初始化为 true 的布尔成员的类型时 - 我总是在对象的反序列化时将值设为 true（显然，问题是成员的实际值在序列化之前为 false 时）。在相反的情况下不会发生这种情况（内联初始化为 false 并且对象值为 true - 我还尝试了其他操作和其他数据成员类型，它们都可以正常工作）。

这是类型：

```
[ProtoContract]
public class SomeObject
{
    public SomeObject() {}

    [ProtoMember(1)]
    private bool m_SomeMember = true;

    public bool SomeMember
    {
        get { return m_SomeMember; }
        set { m_SomeMember = value; }
    }
} 
```

这是代码：

```
var stream = new MemoryStream();
var data = new SomeObject() {SomeMember = false};
Serializer.SerializeWithLengthPrefix<SomeObject>(stream, data , PrefixStyle.Base128);
stream.Position = 0;
var deserializedObject = Serializer.DeserializeWithLengthPrefix<SomeObject>(stream, PrefixStyle.Base128); 
```

在查看反序列化对象的值时 - SomeMember 值为 true。这没有多大意义，因为内联成员初始化代码应该由编译器插入到默认的ctor中 - 据我所知，protobuf应该只在调用ctor之后设置成员的值（不要认为它否则可能）所以，帮助？（马克？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:17:49.803

默认情况下，protobuf-net 使用隐式零默认值（并被`false`视为零）。你可以告诉它你的意思：

```
[ProtoMember(1), DefaultValue(true)]
private bool m_SomeMember = true; 
```

或者您可以（通过`RuntimeTypeModel.UseImplicitZeroDefaults`）禁用此行为，以便只处理显式默认值。

# iphone - 是否可以在单轨中组合 4 个音轨？

> ID：12034271
> 
> 赞同：0
> 
> 时间：2012-08-20T08:14:54.133
> 
> 标签：iphone

> **可能重复：**
> [在 iPhone 上合并音频文件](https://stackoverflow.com/questions/3359313/merge-audio-files-on-iphone)

我想将 4 个录音结合在一起。我的应用一一录制音轨。录制完成后，我必须将这些录制的曲目合并到单个音轨中进行播放和分享。

是否可以在 AVAssetWriter 的帮助下完成。

# c# - 使用比 PictureBox 控制尺寸更小的图片

> ID：12034278
> 
> 赞同：0
> 
> 时间：2012-08-20T08:15:14.953
> 
> 标签：c#, winforms, picturebox

我有一个`PictureBox`设置`Dock`为`Fill`. 我想加载小于`PictureBox`尺寸的图片。我不希望他们被拉伸，有没有办法做到这一点？我有`SizeMode`设置，`None`但这无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:25:27.467

您是否尝试设置`SizeMode`为`CenterImage`？我认为那会解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:26:31.080

[`PictureBox.SizeMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)没有`None`财产。当您将其设置为`Normal`或`CenterImage`您的图像不应在其大小范围内更改时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:20:57.653

使用`PictureBoxSizeMode.AutoSize`它使 PictureBox 的大小等于它包含的图像的大小。

要获得更多信息`PictureBoxSizeMode`，你可以在[这里](http://www.functionx.com/vcsharp/controls/picturebox.htm)找到很好的教程。

# asp.net - Mac OS X 10.5 上的 ASP.net 测试服务器？

> ID：12034281
> 
> 赞同：0
> 
> 时间：2012-08-20T08:15:27.580
> 
> 标签：asp.net, macos, testing, webserver, xampp

是否有适用于 Mac OS X 10.5 的具有 ASP.net 模块的 XAMPP（或等效/替代）版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:58:23.193

这是 YouTube 上的一个教程视频，它应该向您展示如何在 Mac OS 10.5 [http://www.youtube.com/watch?v=ZjTQ1xs310Y上启用 mod_mono (.NET)](http://www.youtube.com/watch?v=ZjTQ1xs310Y)

可以在此处以非视频格式找到转录和指南[http://www.ienablemuch.com/2010/10/aspnet-on-mac-os-x-snow-leopard-at-one.html](http://www.ienablemuch.com/2010/10/aspnet-on-mac-os-x-snow-leopard-at-one.html)

# xcode4 - 在层次结构中移动 UIView 时保留位置（就地粘贴）

> ID：12034293
> 
> 赞同：8
> 
> 时间：2012-08-20T08:17:01.593
> 
> 标签：xcode4, interface-builder

在 Xcode 4 IB 中有没有办法将一堆子视图从一个超级视图移动到另一个而不破坏它们当前的布局？

这应该非常简单，但是当我尝试在视图树中复制/粘贴或移动它们时，它们都会移动到一个位置。例如，在添加一个额外的视图以保存表单的一部分之后，我不希望手动重新定位它们中的每一个。

在 Flash 中有 Cmd-Shift-C 用于“就地粘贴”。我正在IB中寻找类似的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-19T05:10:08.020

我和 OP 有同样的问题，但我在另一个线程上找到了一个很好的解决方案。杰伊的回答： [https ://stackoverflow.com/a/16952902/2070758](https://stackoverflow.com/a/16952902/2070758)

基本上，你不能直接复制/粘贴，但你可以通过一些额外的步骤：

1.  选择所有视图、标签等，您要移动到新的超级视图
2.  编辑器 -> 嵌入视图
3.  将新创建的“容器”视图移动到您最初要粘贴到的视图
4.  选择“容器”视图。编辑器-> 取消嵌入。所有元素将被转储到超级视图中，保持布局。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T23:59:32.230

正在寻找解决 xCode 中同样烦人的限制的方法……发现了一个窍门：

*   在 IB 中创建一个新的 UIViewController
*   将所有内容粘贴到其根视图中，应保留位置
*   将此根视图复制并粘贴到您需要的任何位置，

为我工作，但天哪，真是痛苦。

# c# - linq 选择所有未找到的 linq

> ID：12034294
> 
> 赞同：0
> 
> 时间：2012-08-20T08:17:05.353
> 
> 标签：c#, .net, linq

假设我有以下表格：

```
class Module
{
    long MID    // PK
    string Name
}

class ModuleBlock
{
    long MID      // FK
    long BID      // FK
}

class Block
{
    long BID      // PK
    string Info
} 
```

我想在 ModuleBlocks 中选择所有没有 BID 的块。

我该如何做这个查询？

我很确定这类似于在 BID 上使用 ModuleBlocks 连接块并检查空值，但我该如何在 LINQ 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:34:45.880

不确定“空值”，因为您没有在伪代码中提供任何可为空的属性。但是我认为 LINQ 查询会/可能是这样的：

```
List<Module> modules = ...
List<ModuleBlock> moduleBlocks = ...
List<Block> blocks = ...

var blocksWithNoBidsInModuleBlocks = blocks
   .Where(b => !moduleBlocks.Select(mb => mb.BID).Contains(b.BID)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:00:29.097

如果您乐于在客户端执行此操作而不是将其转换为 SQL，则可以修改[MoreLinq 的`ExceptBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/ExceptBy.cs)方法以处理两种不同类型的序列。

然后你可以打电话

```
var modulelessBlocks =
 allBlocks.Except(
     allModuleBlocks,
     block => block.MID,
     moduleblock => moduleblock.MID); 
```

这样做的好处是每个源只迭代一次。

这是修改后的迭代器的示例 - 您必须修改其他方法以匹配：

```
private static IEnumerable<TSource> ExceptByImpl<TSource, TSecond, TKey>(
    this IEnumerable<TSource> first,
    IEnumerable<TSecond> second,
    Func<TSource, TKey> keySelectorSource,
    Func<TSecond, TKey> keySelectorSecond,
    IEqualityComparer<TKey> keyComparer)
{
    HashSet<TKey> keys = new HashSet<TKey>(
        second.Select(keySelectorSecond),
        keyComparer);
    foreach (var element in first)
    {
        TKey key = keySelectorSource(element);
        if (keys.Contains(key))
        {
            continue;
        }
        yield return element;
        keys.Add(key);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:10:45.223

这是一种仅使用连接的相当简单的方法：

```
var bids =
    from m in modules
    join mb in moduleBlocks on m.MID equals mb.MID
    select mb.BID;

var bs =
    from b in blocks
    join bid in bids on b.BID equals bid into gbids
    where !gbids.Any()
    select b; 
```

第二个查询为您提供所需的结果。

# python - python - TypeError：'dict'对象不可调用

> ID：12034296
> 
> 赞同：2
> 
> 时间：2012-08-20T08:17:10.153
> 
> 标签：python, typeerror, docx, python-docx

我正在使用 python 库 docx：http: [//github.com/mikemaccana/python-docx](http://github.com/mikemaccana/python-docx)

我的目标是打开一个文件，替换某些单词，然后用替换写入文件。

我当前的代码：

```
#! /usr/bin/python

from docx import *

openDoc = "test.docx"
writeDoc = "test2.docx"
replace = {"Test":"TEST"}

document = opendocx(openDoc)
docbody = document.xpath('/w:document/w:body', namespaces=nsprefixes)[0]

print getdocumenttext(document)

for key in replace:
    if search(docbody, key):
        print "Found" , key , "replacing with" , replace[key]
        docbody = replace(docbody,key,replace[key])

print getdocumenttext(document)

# ideally just want to mirror current document details here..
relationships = relationshiplist()
coreprops = coreproperties(title='',subject='',creator='',keywords=[])

savedocx(document,coreprops,appproperties(),contenttypes(),websettings(),wordrelationships(relationships),'a.docx') 
```

` 但是我收到以下错误：

```
Traceback (most recent call last):
  File "process.py", line 17, in <module>
    docbody = replace(docbody,key,replace[key])
TypeError: 'dict' object is not callable 
```

我不知道为什么会这样，但我认为这与 docx 模块有关。谁能解释为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T08:20:48.480

您分配`replace`给最顶部的字典：

`replace = {"Test":"TEST"}`

所以你不能使用这个`replace()`方法，因为这个词`replace`现在指向一个字典——而不是我怀疑是你图书馆的一些方法。

重命名您的字典，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:21:45.683

这是一个模棱两可的问题，您的代码中使用了两种类型的“替换”，作为函数调用，另一种作为您自己定义的字典的名称，python 解释器将替换的类型解释为字典因此您不能将其用作函数调用，请尝试更改替换字典的名称以查看是否已解决：

```
for key in replace:
    if search(docbody, key):
        print "Found" , key , "replacing with" , replace[key]
        docbody = **replace**(docbody,key,**replace**[key]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:22:07.650

您将 import * 与 docx 一起使用，因此您有一个函数“replace”和一个字典“replace”。这使解释器感到困惑。相反，使用“import docx”，然后使用 docx.replace(...)，或者将“replace”字典重命名为其他名称。我推荐第一个选项，因为这样可以避免将来出现类似的命名冲突。

# url - 你如何隐藏页面的文件扩展名，其中一个例子是 pinterest？

> ID：12034307
> 
> 赞同：1
> 
> 时间：2012-08-20T08:17:49.883
> 
> 标签：url, file-extension, pinterest

我想知道他们如何隐藏页面的文件扩展名，如 something.jsp 或 something.php ....例如 pinterest，当你打开任何 pin 时，你的 URL 像[http://pinterest.com/pin/7074097056836/](http://pinterest.com/pin/7074097056836/)

```
1.they dont show file extension.
2.If I am suppose to do, I would do like http://pinterest.com/pin.jsp?id=7074097056836 
```

请指导我。谢谢

# iphone - Tableview 委托方法 willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath 在滚动非常快时不会为每一行调用

> ID：12034317
> 
> 赞同：1
> 
> 时间：2012-08-20T08:19:11.997
> 
> 标签：iphone, objective-c, uitableview, delegates

当我距离表格视图末尾 5 行时，我从服务器加载更多数据。我用`(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`这个。

它大部分时间都有效，但有时当我滚动得非常快时，会跳过一行，因此不会调用我加载更多数据的函数。

我应该如何修复它，所以将为滚动的每一行调用 willDisplayCel 委托函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:46:24.970

Are the cells still visible for which the method is not called or have you skipped them by scrolling real fast?

This method will only be called for cells that are visible - so if you scroll fast the system thinks that they are not being displayed anyway.

I would suggest to change the logic on when to load more data - since no connection will be fast enough for this to get you the data from the server.

You may either use the bouncing technique or have the very last line of your table view to initiate loading more lines. This way you can be sure that the app and the user will wait a little for the data to be retrieved from the server.

# php - Android网络服务访问问题

> ID：12034318
> 
> 赞同：0
> 
> 时间：2012-08-20T08:19:17.383
> 
> 标签：php, android, json

两天后我就遇到了这个问题，但我找不到解决这个问题的方法......

我使用以下 Android http 客户端来访问 php Web 服务，该服务在 localhost 中托管了 json 编码。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

public class JsonV01Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://10.0.2.2/json01/phpjson01.php");
    try {

        HttpResponse response = httpclient.execute(httppost);
         String jsonResult = inputStreamToString(response.getEntity().getContent()).toString();
        TextView tv = (TextView)findViewById(R.id.textView1);
        JSONObject object = (JSONObject) new JSONTokener(jsonResult).nextValue();
        String name = object.getString("name");
        String age = object.getString("Age");
        tv.append(name);
        tv.append(age);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

   }
private StringBuilder inputStreamToString(InputStream is) {
    String rLine = "";
    StringBuilder answer = new StringBuilder();
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));

    try {
     while ((rLine = rd.readLine()) != null) {
      answer.append(rLine);
       }
    }

    catch (IOException e) {
        e.printStackTrace();
     }
    return answer;
   }
} 
```

php代码

```
 <?php
   $string='{"name":"John Adams","Age":"24"}';
    print (json_encode($string));
 ?> 
```

当我运行这段代码时，它给出了一个错误！我的代码中有什么错误？我已经尝试了很多次，但找不到任何错误。请帮忙！如何解决这个问题呢

谢谢！

错误堆栈跟踪

```
08-11 21:52:11.120: W/KeyCharacterMap(3293): No keyboard for id 0
08-11 21:52:11.120: W/KeyCharacterMap(3293): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-11 21:58:51.352: I/global(3357): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
08-11 21:58:51.362: D/AndroidRuntime(3357): Shutting down VM
08-11 21:58:51.371: W/dalvikvm(3357): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-11 21:58:51.381: E/AndroidRuntime(3357): FATAL EXCEPTION: main
08-11 21:58:51.381: E/AndroidRuntime(3357): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.json.ws/com.json.ws.JsonV01Activity}: java.lang.ClassCastException: java.lang.String
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.os.Looper.loop(Looper.java:123)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at java.lang.reflect.Method.invokeNative(Native Method)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at java.lang.reflect.Method.invoke(Method.java:521)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at dalvik.system.NativeStart.main(Native Method)
08-11 21:58:51.381: E/AndroidRuntime(3357): Caused by: java.lang.ClassCastException: java.lang.String
08-11 21:58:51.381: E/AndroidRuntime(3357):     at com.json.ws.JsonV01Activity.onCreate(JsonV01Activity.java:45)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-11 21:58:51.381: E/AndroidRuntime(3357):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-11 21:58:51.381: E/AndroidRuntime(3357):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:24:38.960

试试这个。

```
JSONObject object = new JSONObject(jsonResult);
String name = object.getString("name");
int age = object.getInt("Age");
tv.setText(name + " "  + age);

<?php
    echo json_encode(array("name"=>"John Adams","Age"=>"24"));
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:42:42.127

您正在对已经 json_encoded 的字符串调用 json_encode。

将其更改为此或类似：

```
<?php
$data = array('name' => 'John Adams', 'Age' => '24'); 
print (json_encode($data)); 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:33:20.420

行。然后检查json是否有问题。

在 php 文件中仅使用 echo 打印名称。

并尝试将该文本添加到 textview

# php - 在 IP 错误的共享主机上发送邮件的替代方法

> ID：12034319
> 
> 赞同：3
> 
> 时间：2012-08-20T08:19:22.470
> 
> 标签：php, email, smtp, gmail, shared-hosting

如果您的共享主机的 IP 地址有“坏名声”，还有哪些替代方法？Gmail 阻止邮件，称来自该 IP 地址的邮件可能是垃圾邮件。

除了切换到虚拟或专用服务器之外，还有其他解决方法吗？有没有办法通过第三方，不同的IP发送邮件？像gmail smtp？这将如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:28:07.510

当您通过他们的 SMTP 发送时，它更有可能起作用。

我会推荐[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)。

您还应该知道 GMail 对发送的电子邮件有限制，因为如果您尝试发送过多的电子邮件，它可能会阻止您的主机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:29:39.463

您是否尝试通过另一个 SMTP 服务器发送消息？

我会尝试 Swiftmailer： [http ://swiftmailer.org/docs/sending.html](http://swiftmailer.org/docs/sending.html)

例如：[尝试使用 swift mailer、gmail smtp、php 发送邮件](https://stackoverflow.com/questions/3536836/trying-to-send-mail-using-swift-mailer-gmail-smtp-php)

# javascript - node.js 在将标头发送到客户端后无法呈现标头错误

> ID：12034320
> 
> 赞同：0
> 
> 时间：2012-08-20T08:19:37.693
> 
> 标签：javascript, node.js, express

使用 node.js，这个错误困扰着我，我猜这是 express 的问题：`var app = express();` `http.createServer(app)`?? 有什么建议吗？

```
Listening to port 8000
Request / from 127.0.0.1 to localhost:8000

http.js:686
throw new Error('Can\'t render headers after they are sent to the client.'
      ^
Error: Can't render headers after they are sent to the client. 
```

代码在这里：

```
var sys = require('sys'), 
http = require('http');

var express = require('express'),
    routes = require('./routes');

var app = express();
var _self = this;

var _routes = {
    '/' : function(request, response) {
        response.writeHead(200, {'Content-Type': 'text/html'});
        response.write('hello world\n');
        response.end();
    },

    '/is_up' : function(request, response) {
        response.writeHead(200, {'Content-Type': 'text/plain'});
        response.write('ok');
        response.end();
    },
};

var _requestHandler = function(request, response) {
    console.log('Request '+request.url+' from '+request.connection.remoteAddress+' to '+request.headers.host);
    if(_routes[request.url] === undefined) {
        response.writeHead(404, {'Content-Type': 'text/plain'});
        response.write('not found\n');
        //response.end();
    } else {
        _routes[request.url].call(this, request, response);
    }
};

var _server = module.exports = http.createServer(app).
                    addListener('request', _requestHandler)
                    .listen(8000);
    console.log('Listening to port ' + "8000"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:11:55.827

我相信问题出在您创建服务器的方式上。看起来您有两个处理程序，一个与另一个冲突。

在您的代码中，您将 Express 应用程序传递给它，而不是您的请求处理程序，然后使用您的请求处理程序添加一个侦听器。

将其更改为以下内容：

```
var _server = http.createServer(_requestHandler); 
//_server.addListener('request', _requestHandler);
_server.listen(8000);
console.log('Listening to port ' + "8000"); 
```

# c# - 在实体框架的 where 子句中使用列表

> ID：12034321
> 
> 赞同：3
> 
> 时间：2012-08-20T08:19:39.357
> 
> 标签：c#, list, entity-framework-4, one-to-many, where-clause

我正在尝试通过一对多表检索文档 ID。我想在 where 子句中使用 List 来查找与列表中的每个元素连接的所有 id。

```
List<int> docIds = (from d in doc
                      where _tags.Contains(d.Tags)
                      select d.id).ToList<int>(); 
```

我知道包含的内容一定不正确，但我无法解决。如果我尝试使用 foreach，我无法确定如何检查文档是否包含所有标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:27:28.337

如果您希望所有内容`d.Tags`都应包含在`_tags`列表中，您可以尝试：

```
List<int> docIds = (from d in doc
                      where d.Tags.All(t => _tags.Contains(t))
                      select d.id).ToList<int>(); 
```

如果你想要它`d.Tags`应该包含`_tags`你需要的所有项目：

```
List<int> docIds = (from d in doc
                      where _tags.All(t => d.Tags.Contains(t))
                      select d.id).ToList<int>(); 
```

但我不知道它是如何通过 EF 转换为 SQL 的，因此您可能需要在客户端站点上对其进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:31:38.347

使用连接：

```
List<int> docIds = (from d in doc
from t in tags
where d.Tags.Contains(t)
select d.id).ToList<int>(); 
```

# hibernate - 在 Hibernate HQL 更新查询中使用连接

> ID：12034327
> 
> 赞同：19
> 
> 时间：2012-08-20T08:20:25.010
> 
> 标签：hibernate, nhibernate, join, hql

我有以下休眠映射：

```
 <class name="Domain.Roomreservation, Core" table="Reservationroom">
    <id name="ID" unsaved-value="undefined">
        <generator class="native">
            <!--<param name="sequence">GLOBALSEQUENCE</param>-->
        </generator>
    </id>

    <property name="FromTime" not-null="true" index="IDX_RESRAUM_FromTime" />
    <property name="UntilTime" not-null="true" index="IDX_RESRAUM_UntilTime"/>

    <many-to-one name="Booking" column="Book_ID" index="IDX_RAUMRES_BOOK" lazy="false"
        class="Domain.Booking, Core" not-null="true" />
    </class> 
```

`Reservationroom`表格看起来像：

```
ID         <pk>
Book_ID    <fk>
FromTime
UntilTime
....
.... 
```

我的休眠查询看起来像：

```
String hql = "UPDATE Roomreservation as rr set rr.FromTime= 12:15" +
                     "Inner Join Booking b ON rr.Book_ID= b.ID " +
                     "Where b.ID = 95637";
                        IQuery query = CurrentSession.CreateQuery(hql);
                        int result = query.ExecuteUpdate();
                        Debug.WriteLine("Rows affected: " + result); 
```

但我总是得到`Error: NHibernate.Hql.Ast.ANTLR.QuerySyntaxException`

有人可以帮我如何让它工作吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-20T08:41:38.233

您必须使用子查询而不是联接。大致如下：

```
UPDATE Roomreservation as rr set rr.FromTime= 12:15
WHERE rr.Book_ID IN (
  SELECT b.id 
  FROM Booking b 
  WHERE b.id = 95637); 
```

此外，根据类型，`FromTime`它可能应该以其他格式呈现。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-20T08:34:43.307

rr.FromTime= '12:15' 缺少的单引号应该是错误。

```
String hql = "UPDATE Roomreservation as rr set rr.FromTime= '12:15' " +
"Inner Join Booking b ON rr.Book_ID= b.ID " +
"Where b.ID = 95637"; 
```

你能检查一下吗。

# java - 在java中识别String数组中的元素

> ID：12034328
> 
> 赞同：0
> 
> 时间：2012-08-20T08:20:38.647
> 
> 标签：java

我想在字符串数组中识别字母中的元素和数字中的元素。还有其他方法吗？

```
String a[]={"aaaa","111111","bbbbbb"};

for(int i=0;i<a.length;i++)
{
post your code for this FOR LOOP
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:30:33.127

他们说你有问题......所以你选择正则表达式来解决它，现在你有两个问题。:-)

但是，如果速度不是什么大问题，您可以尝试一下，假设您有良好的单元测试。类似于以下内容：

```
public static void testRegularExpressionForElement() {
    String[] a = new String[] {"test1", "13", "blah", "1234.44"};

    Pattern pattern = Pattern.compile("[-+]?[0-9]*\\.?[0-9]+");
    for (String element : a) {
        if (pattern.matcher(element).matches()) {
            System.out.println(element + " is a number");
        } else {
            System.out.println(element + " is not a number");
        }
    }
} 
```

上述内容的好处在于，您可以调整表达式以完全匹配您想要的内容。

另一种方法是使用 Integer.parseInt() 并捕获异常，但这是不好的编程，因为您将异常用于逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:29:58.240

遍历数组并编写一个函数来检查 isNumeric 与否。

```
for (a1 : a){
   boolean isNumbr= isNumeric(a1);
} 
```

...

```
public static boolean isNumeric(String str)  
{  
  try  
  {  
    double d = Double.parseDouble(str);  
  }  
  catch(NumberFormatException nfe)  
  {  
    return false;  
  }  
  return true;  
} 
```

# javascript - 为什么使用 app.get() 和 app.use() 会输出两次日志？

> ID：12034329
> 
> 赞同：0
> 
> 时间：2012-08-20T08:20:45.877
> 
> 标签：javascript, express

我有一个非常基本的 Express Web 服务器：

```
var app = module.exports = express.createServer();
app.get('/:user', function(req, res) {
    console.log('GET');
});

app.param('user', function(req, res, next, id) {
    console.log('PARAM');
    next();
});
app.listen(3000); 
```

当我运行时`http://localhost:3000/MyName`，我的控制台中有以下输出：

```
PARAM
GET
PARAM
GET 
```

为什么我得到每个输出两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:22:44.617

浏览器很可能会自行发送第二个请求以获取 favicon ( `http://localhost:3000/favicon.ico`)。

# java - 在 readLine() 之后使用 readLong() 进行套接字通信

> ID：12034336
> 
> 赞同：2
> 
> 时间：2012-08-20T08:21:09.247
> 
> 标签：java, sockets, serversocket

为什么这个程序不能正常工作？客户端读取 SOME_MESSAGE 之后没有任何反应。似乎来自服务器的 println 方法在某种程度上对传输长类型数字有影响。

服务器

```
import java.net.*;
import java.io.*;

public class Server {

  public static void main(String[] args) throws Exception {
    ServerSocket socket = new ServerSocket(9999);
    while (true) {
      Socket sock = socket.accept();
      PrintWriter out = new PrintWriter(new BufferedWriter(
          new OutputStreamWriter(sock.getOutputStream())), true);
      DataOutputStream outByte = new DataOutputStream(sock.getOutputStream());
      out.println("SOME_MESSAGE");
      outByte.writeLong(948L);
    }
  }
} 
```

客户

```
import java.net.*;
import java.io.*;

public class Client {

  public static void main(String[] args) throws Exception {
    Socket sock = new Socket("127.0.0.1", 9999);
    DataInputStream inByte = new DataInputStream(sock.getInputStream());
    BufferedReader in = new BufferedReader(new InputStreamReader(
        sock.getInputStream()));

    System.out.println(in.readLine());
    long number = inByte.readLong();
    System.out.println(number);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:46:44.047

您的问题是`BufferedReader`正在缓冲来自套接字输入流的字节，因此长 948 值不在其中，`DataInputStream`因为`BufferedReader`它已读取并正在缓冲它。通常，您不希望在同一个底层流周围使用 2 个不同的包装器，尤其是在一个被缓冲的情况下。与您的`Server`班级相同，但这似乎至少有效。

您的客户端只需要对套接字的输入流使用一个包装器。您应该坚持使用`DataInputStream`and 与服务器代码一起使用`DataInputStream.readUTF()`，在客户端上使用同时`DataOutputStream.writeUTF()`在服务器上使用，同时摆脱`BufferedReader`和`PrintWriter`.

所以在服务器上：

```
while(true) {
    Socket sock = socket.accept();
    DataOutputStream outByte = new DataOutputStream(sock.getOutputStream());
    outByte.writeUTF("SOME_MESSAGE");
    outByte.writeLong(948L);
    outByte.flush(); 
```

}

在客户端：

```
public static void main(String[]args)throws Exception
{
    Socket sock = new Socket("127.0.0.1",9999);
    DataInputStream inByte = new DataInputStream(sock.getInputStream());

    System.out.println(inByte.readUTF());
    long number  = inByte.readLong();
    System.out.println(number);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:27:48.387

有趣的是，java 不允许这样做，因为总有更好的解决方案。您可以使用序列化来完成您的工作。

创建`PayLoad`如下界面

```
import java.io.Serializable;

public interface PayLoad extends Serializable
{
String getMessage();
//Java does not allow to define byte array of long
int getLength();

byte[] getbytes();

} 
```

然后创建一个如下所示的实现类

```
public class FilePayLoad implements PayLoad
{

private final String message;
private final int length;
private final byte[] bytes;

public FilePayLoad(String message, int length, byte[] bytes)
{
    this.message = message;
    this.length = length;
    this.bytes = bytes;

}

@Override
public String getMessage()
{
    return this.message;
}

@Override
public int getLength()
{
    return this.length;
}

@Override
public byte[] getbytes()
{
    return this.bytes;
}

} 
```

现在更改您的服务器和客户端，如下所示

服务器

```
public class Server
{

public static void main(String[] args) throws Exception
{
    ServerSocket socket = new ServerSocket(9999);
    while (true)
    {
        Socket sock = socket.accept();
        ObjectOutputStream out = new ObjectOutputStream(sock.getOutputStream());
        byte[] bytes = "SOME_MESSAGE".getBytes();
        out.writeObject(new FilePayLoad("SOME_MESSAGE", bytes.length, bytes));
        out.flush();
    }
}
} 
```

客户

```
public class Client
{
public static void main(String[] args) throws Exception
{
    Socket sock = new Socket("127.0.0.1", 9999);
    ObjectInputStream inByte = new ObjectInputStream(sock.getInputStream());
    PayLoad payLoad = (PayLoad) inByte.readObject();
    System.out.println(payLoad.getMessage());
    System.out.println(payLoad.getLength());
    System.out.println(new String(payLoad.getbytes()));
}

} 
```

# wpf - 滑块：如何捕捉到一个刻度，而不是其他刻度

> ID：12034340
> 
> 赞同：1
> 
> 时间：2012-08-20T08:21:25.987
> 
> 标签：wpf

我正在制作一个媒体播放器速度选择器，从 0.5 到 2。这就是我定义滑块的方式。

```
<Slider Maximum="2" Minimum="0.5" Ticks="0.5 0.75 1 2"/> 
```

这是因为 0.5、0.75、1 和 2 是最理想的播放速度。因此，如果这是唯一的要求，我可以说 IsSnapToTicksEnabled="True"，但还应该允许用户在这些刻度之间选择一个值，同时仍然能够捕捉到指定的刻度。

因此，一旦滑块关闭，拇指应该捕捉到这些刻度，但当距离超过 ~0.1 时则不会。这可能吗？我们也有 Telerik 的 RadControls，如果那里有什么特别实现的话。

到目前为止，我尝试的是听 ValueChanged 并检查新值是否在 1.1 和 0.9 之间，如果是，则将其设置为 1。但这会完全禁用拖动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:01:22.160

我做了类似的事情。

我创建了 2 个滑块：

其中一个是不可见的（例如从 0 到 100），它只是另一个滑块顶部的一个矩形（不可见颜色），这是您将用鼠标滑动的那个。

第二个滑块是您的图形，从 0.5 到 2，就像您实际拥有的一样。

现在您只需编写隐形滑块，例如：

如果 InvisibleSlider < 10，那么 RealSlider 保持在 0.5 如果 InvisibleSlider 在 10 和 30 之间，那么 RealSlider 的值是 InvisibleSlider * X ？

有了它，你可以模拟你坚持你决定的地方，例如：如果不可见的滑块在 40 到 60 之间，坚持在 0.75，你的鼠标会移动，但图形...

我不知道我是否清楚，英语不是我的主要语言对不起

# snapshot - 如何在 LoadRunner 中更改快照大小

> ID：12034341
> 
> 赞同：0
> 
> 时间：2012-08-20T08:21:37.073
> 
> 标签：snapshot, loadrunner

我正在 LoadRunner VuGen 11.50 上编写 HTTP/HTML 脚本，我需要检查 web_custom_request 的结果，但创建的快照被分块为 100 Kb。它说“快照步骤数据超过最大大小，无法完全显示......”

有没有办法修改这个最大大小，以便我可以读取服务器的完整响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:29:42.863

使用适当的子选项将运行时设置中的日志级别更改为扩展日志。然后检查在 VUGEN 中运行虚拟用户时生成的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:34:06.817

Load Runner 11.5 VuGen 菜单：工具-> 选项-> 脚本“选项卡” 在左侧窗格中单击“快照”。右侧窗格将显示可用选项。取消选中所有“不加载大于”...的快照选项。

# javascript - 如何在 Node.js 应用程序中排列文件？

> ID：12034342
> 
> 赞同：0
> 
> 时间：2012-08-20T08:21:38.420
> 
> 标签：javascript, node.js, websocket, socket.io

我正在编写一个更大的应用程序，通过 Node.js（使用 socket.io 和 mysql 模块）进行双工通信和数据库访问。因此我想找出一些文件，所以我没有一个巨大的 server.js 文件（例如：一个用于聊天的文件，一个用于数据库连接的文件等）。

有没有一种好方法可以在我的项目中安排这些文件？我正在寻找类似 jQuery 的 getScript 之类的东西，但我认为这不起作用，因为它是一个 Ajax 调用，在 Websocket 服务器上没有多大意义，对吧？

或者是创建自己的模块的最佳方式！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:26:08.830

是的，创建模块。

如果您想将值传递给模块，您可以创建如下函数：

```
var a, b, c;
var self = this;   
//
// your module logic
//
exports.init = function(a, b, c)  {
  a = a;
  b = b;
  c = c;
  return self;
} 
```

这是我最喜欢的模块化方法。然后你从你的代码中这样调用。

```
var myModule = require('./myModule').init('modular', 'is', 'fun'); 
```

然后你有更传统的OOP

```
function ThisIsNotAclass(a,b,c) {
  //
  // your module logic
  //
}

exports = function(a, b, c)  {
  return new ThisIsNotAclass(a,b,b);
} 
```

然后你从你的代码中这样调用。

```
var myModule = require('./myModule')('modular', 'is more', 'fun'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:34:08.783

我主要使用`module.exports`. 这是一个示例，**core.js**：

```
/**
 * Initialize the core routes.
 * @param app {Object} The app object.
 */
var core = function( app ) {
        // CODE
};

/**
 * Expose core.
 * @type {Function}
 */
module.exports = core; 
```

这里是 app.js，最后：

```
/**
 * Routes.
 */
require("./controllers/core.js")(app); 
```

我发现这是安排文件和逻辑的好方法。

# java - Web 服务和服务器-> 客户端通知

> ID：12034343
> 
> 赞同：1
> 
> 时间：2012-08-20T08:21:39.203
> 
> 标签：java, web-services, asynchronous

对于 Web 服务应用程序，我希望服务器能够通知客户端一些事件。当客户端启动时，他调用其中一个 WS 方法来获取它需要的一些信息。然后，存储此信息的服务器会持续监听这些信息的变化，如果有变化，它会通知相关的客户端。

我不知道网络服务是否能很好地解决我的问题？我不知道 TCP 连接是如何工作的，因为服务器可能会在很长一段时间后通知客户端。

解决此类问题的最佳架构是什么？

谢谢

* * *

**编辑：**我看过一些建议使用 Comet 的讨论，但如果您认为有更简单、更方便的解决方案，请告诉我。由于我是从头开始这个项目，所以我没有任何限制。

我还可以使用轮询模型，其中客户端定期轮询服务器以获取他们需要的信息，但是我需要考虑该模型可能在服务器上创建的负载。我不知道当有很多客户端时，Web 服务是否可以支持这样的负载。

我还查看了 Servlet 3.0 提供的异步功能，但我不知道它如何解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:35:50.420

Without polling: sockets

With polling and webservices: u should use etag (html).

When a client polls he sends a request with an etag. webservice responds either with 200(ok) and data or 304(not modified). 304 has no body => less trafic

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:44:52.350

您可以在客户端上实现一个回调方法，而不是客户端轮询服务器，以便当服务器想要向客户端发布一些更改时，服务器可以使用客户端提供的回调方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:51:42.960

我可以想到以下两种使用 Web 服务解决方案的方法之一：

1.  回调：当客户端调用服务器时，它会留下它的回调 url 和一个 id，比如相关 id。当服务器想要回复客户端时，它只会使用回调 url 来通知。服务器可以使用多种方法来异步处理请求。您的客户端不需要为此提供网络服务，但它应该能够接受请求（回调）。它可以是一个servlet等。

2.  轮询：当客户端向服务器发出请求时，它会收到一个 id，比如 requestid。在指定的时间间隔后，客户端使用此请求 ID 轮询服务器以获取响应。将需要基于处理时间的合理超时和轮询间隔。

# c - 可变长度数组或结构的队列

> ID：12034344
> 
> 赞同：1
> 
> 时间：2012-08-20T08:21:41.467
> 
> 标签：c, queue

如何创建一个可以容纳数组的队列，而不是具有可变行数的数组。

```
char data[n][2][50];
//Could be any non 0 n e.g:
n=1; data = {{"status","ok}};
// or
n=3; {{"lat", "180.00"},{"long","90.123"},{"status","ok}};
// and so on 
```

n 加入队列。还是有比我要求的更好的解决方案？队列很容易为单个数据项编写（或找到可重用的示例），但我不确定我会为上述使用什么方法。也许是一个结构？这将解决数组和n ...但它会解决变量数组吗？

更广泛地说，我试图解决的问题是这个。我需要使用 POST 与 Web 服务器通信。我已经编写了此代码，但是我不想每次需要执行此任务时都让主线程忙，尤其是因为我需要进行其他检查，例如连接是否正常，如果不需要的话退出并等待或尝试将其重新上线。

我的想法是有一个单独的专用于这项任务。我认为创建队列将是主线程让子线程知道该做什么的最佳方式。

数据将是可变数量的字符串对。像：

主要的

```
//Currently does
  char data[MAX_MESSAGES_PER_POST][2][50];
  ...
  assembles array
  sendFunction(ptrToArray, n);
  resumes execution with large and un predicatable delay

//Hopefully will do
  ...
  queue(what needs doing)
  carry on executing with (almost) no delay 
```

孩子

```
while(0)
{
  if(allOtherConditionsMet())  //Device online and so forth
  {
    if(!empty(myQueue))
    {
       //Do work and deque
   }
 }
 else
 {
     //Try and make condition ok. Like reconect dongle.
 }
  // sleep/Back off for a while
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:14:21.580

您可以使用现有的库，[例如 Glib](http://en.wikipedia.org/wiki/GLib)。GLib 是跨平台的。如果您使用[GLib 的异步队列](https://developer.gnome.org/glib/stable/glib-Asynchronous-Queues.html)，您会执行以下操作：

创建队列的第一个线程执行：

```
GAsyncQueue *q = g_async_queue_new (); 
```

其他线程可以通过以下方式引用（显示使用队列的意图）：

```
g_async_queue_ref (q); 
```

在此之后，任何线程都可以通过以下方式将项目“推送”到队列中：

```
struct queue_item i;
g_async_queue_push (q, ( (gpointer) (&i))); 
```

并且任何线程都可以从队列中“弹出”项目：

```
struct queue_item *d = g_async_queue_pop (q);
/* Blocks until item is available.  */ 
```

一旦线程完成使用队列并且不再关心它，它就会调用：

```
g_async_queue_unref (q); 
```

即使是创建队列的线程也需要这样做。

还有许多其他有用的功能，您都可以在[记录它们的页面上阅读它们](https://developer.gnome.org/glib/stable/glib-Asynchronous-Queues.html)。同步（锁定/一致性/操作的原子性）由库本身负责。

# intellij-idea - 在“IntelliJ IDEA 11.1.3”中成功运行 Ant 脚本不会显示正确的消息

> ID：12034348
> 
> 赞同：2
> 
> 时间：2012-08-20T08:21:50.213
> 
> 标签：intellij-idea

在以前版本的 IntelliJ IDEA（如 10.5）中，当我成功运行 Ant 脚本时，我会收到一条正确的消息，例如“Ant 成功完成 55 秒”。

但是现在，在 IntelliJ 的 11.1.3 版本中，我没有收到这种消息，因为有一些警告。我想禁止这些警告，并得到脚本完成没有错误的消息。

实际上，有时我收到一条消息，例如

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:04:27.093

这是一个[已知的错误](http://youtrack.jetbrains.com/issue/IDEA-89717)，请在 YouTrack 中给它加星标/投票以跟踪进度。

# java - jsf 2.0 我们使用了 text/html 但它显示为纯 javamail

> ID：12034349
> 
> 赞同：0
> 
> 时间：2012-08-20T08:21:57.337
> 
> 标签：java, jakarta-ee, jakarta-mail

我在我的 jsf2.0 应用程序中使用 mail1.4.3 jar 并且我正在尝试在请求新用户时发送电子邮件，如果我们发送邮件，即使我使用 text/html 发送邮件并且我的代码是

MimeMessage 消息 = 新的 MimeMessage（会话）；

```
 // Set From: header field of the header.
     message.setFrom(new InternetAddress(from));

     // Set To: header field of the header.
     message.addRecipient(Message.RecipientType.TO,
                              new InternetAddress(to));
     StringBuilder bld = new StringBuilder();
        bld.append("<h2>");
        bld.append("New User Request");
        bld.append(" for <FONT style='color:#4649FE;'> " + "TALON");
        bld.append("</FONT></h2><br/>");
        bld.append("<b>Requested By :");
        bld.append("<FONT style='color:#4649FE;'>" + "Y.Sanjeeva Reddygggggggggg"
                + "</FONT></b><br/>");
        bld.append("<b>Requested on :");
        Date dt = new Date();
        Calendar cel = new GregorianCalendar();
        cel.setTime(dt);
        SimpleDateFormat smpl = new SimpleDateFormat();
        bld.append(smpl.format(cel.getTime()));
        bld.append("<br/>");
        bld.append("<b>User Name :<FONT style='color:#4649FE;'>"
                + "Sanjiv" + "</FONT></b><br/>");
            bld.append("<b>Password :<FONT style='color:#4649FE;'>"
                    + "Sanjiv" + "</FONT></b><br/>");
        bld.append("<FONT style='color:#4649FE;'>");
     message.setSubject("This is the Subject Line!");
     message.setContent(bld.toString(),
                        "text/html" );
     Transport.send(message);
     System.out.println("Sent message successfully...."); 
```

谁能帮我

谢谢，桑吉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:26:05.613

“显示平原”到底是什么意思？它是否显示所有 html 标记？还是显示没有标记的纯文本？如果是后者，问题出在您的邮件服务器或邮件阅读器上，其中之一是将 html 文本转换为纯文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:31:20.770

我将您的源代码与我在工作中的工作代码进行了比较，我看不出有任何区别。当我在 Internet 上查找时，我发现了一个使用 JavaMail的德语[指南。](http://www.joller-voss.ch/java/notes/javamail/JavaMail-Praxis.pdf)根据这本书试试这个：

使用`message.setContent(bld.toString());`而不是`message.setContent(bld.toString(),"text/html" );`.

如果没有帮助，请尝试[此](http://www.rgagnon.com/javadetails/java-0321.html)操作。然后它不再起作用，从您的服务器检查您的属性。这些也会影响以正确格式接收电子邮件。

# javascript - AngularJS - 总是有一个参数作为资源的默认值

> ID：12034350
> 
> 赞同：0
> 
> 时间：2012-08-20T08:22:04.247
> 
> 标签：javascript, angularjs

基本上我有一个场景，我正在访问的 API 在许多情况下使用 :groupId 作为 url 的一部分。有没有一种简单的方法可以避免在每个函数调用中传递 $routeParams.groupId ？

```
var app = angular.module('plunker', []);

app.config(["$routeProvider", function($routeProvider) {
  $routeProvider.
    when("/:groupId/location", {templateUrl: "partials/location.html", controller: "LocationCtrl"});
}]);

/* Controllers */
app.controller('LocationCtrl', function($scope, $routeParams, Location) {
  Location.groupId = $routeParams.groupId; /* Is this even possible? I want to have it available to Location instead of the below*/
  Location.query();

  Location.query({groupId: $routeParams.groupId});
});

/* Services */
app.service("Location", function($resource, $routeParams) {
  return $resource("/api/:groupId/location", {}, {
    query: {method: "GET", isArray: true}
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:25:17.400

我认为你可以这样做：

```
 app.service("Location", function($resource, $routeParams) {
    return $resource("/api/:groupId/location", {groupId:12345}, {
         query: {method: "GET", isArray: true}
    });
 }); 
```

我还没有测试过，但我相信这就是文档的阅读方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T12:47:44.807

如果有任何帮助，由于上述答案对我不起作用，我将其附加`.query`到通话末尾。

```
app.service("Location", function($resource, $routeParams) {
    return $resource("/api/:groupId/location", {groupId:'@groupId'})
                                                  .query({ groupId: 12345 });
 }); 
```

# android - Android：如何拦截 DialogFragment 上的触摸事件？

> ID：12034352
> 
> 赞同：4
> 
> 时间：2012-08-20T08:22:17.990
> 
> 标签：android, events, touch, intercept, dispatch

如何在将 DialogFragment 发送到对话框之前拦截触摸事件？当我想拦截 Activity 上的触摸事件时，我会覆盖该 Activity 的 dispatchTouchEvent(MotionEvent ev)。如何为 DialogFragment 做类似的事情？看来dispatchTouchEvent对Activity中包含的fragment没有影响。

谢谢

# spring-mvc - 如何在集成测试中模拟@PreAutorize 标签？

> ID：12034356
> 
> 赞同：9
> 
> 时间：2012-08-20T08:22:33.517
> 
> 标签：spring-mvc, spring-security

我在 Spring MVC 中有以下方法并使用 Spring Security：

```
@PreAuthorize("#phoneNumber == authentication.name")
@RequestMapping(value = "/{phoneNumber}/start", method = RequestMethod.POST)
public ModelAndView startUpgrading(@PathVariable("phoneNumber") String phoneNumber,
       ....
} 
```

我设法模拟这样的身份验证：

```
public Authentication tryToAuthenticate(String accountName, String password) {
      UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(accountName, password);
    return authenticationManager.authenticate(token);
} 
```

但我不知道如何使用@PreAutorize 设置授权。

如何正确设置我的测试上下文，以免访问被拒绝？

```
org.springframework.security.access.AccessDeniedException: Access is denied
at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:205) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:49:52.250

支持表达式属性以允许调用前和调用后授权检查的注释（@PreAuthorize、@PostAuthorize、@PreFilter、@PostFilter）通过 global-method-authority 命名空间元素启用。

您需要在 application-servlet.xml 或 security xml 文件中添加以下代码。

```
<security:global-method-security pre-post-annotations="enabled" >
    <security:expression-handler ref="expressionHandler"/>
</security:global-method-security>

<beans:bean id="expressionHandler"   class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <beans:property name="permissionEvaluator" ref="permissionEvaluator"/>
</beans:bean> 
```

***检查*** [spring-testcontext-framework](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#testcontext-framework)和[这篇文章](https://stackoverflow.com/questions/5403818/how-to-junit-tests-a-preauthorize-annotation-and-its-spring-el-specified-by-a-s)回答的问题与你的非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:45:47.813

听起来您想声明一个执行身份验证的 bean 的模拟版本。您可能需要一个测试 context.xml 来声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:49:32.783

也许检查[这个](https://stackoverflow.com/questions/3087548/can-spring-security-use-preauthorize-on-spring-controllers-methods)旧帖子和[官方文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/el-access.html)16.3 Method Security Expressions for xml configuration。

我认为你需要在你的xml上声明：

您验证令牌的方法也可以是*hasPermisions()*。检查[16.3.2 内置表达式](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/el-access.html)

# android - 警报管理器即使在重新启动后仍然存在吗？

> ID：12034357
> 
> 赞同：56
> 
> 时间：2012-08-20T08:22:35.880
> 
> 标签：android, alarmmanager, android-alarms

我对android真的很陌生，我一直在研究警报。如果那天有生日，我想报警。我用过报警管理器。我很困惑，因为我读过它在重新启动后会清除。我没有安卓手机，所以我只是使用模拟器。

这是我的代码：

```
public void schedAlarm() {
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    Intent intent = new Intent(this, AlarmService.class);
    pendingIntent = PendingIntent.getBroadcast(this, contact.id, intent, PendingIntent.FLAG_ONE_SHOT);
    am.setRepeating(AlarmManager.RTC, timetoAlarm, nextalarm, pendingIntent);
} 
```

我用这个 BroadcastRecever 代替了 AlarmSerivce Here：

```
public void onReceive(Context context, Intent intent) {
    nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    CharSequence from = "It Birthday!";
    CharSequence message =" Greet your friend.";
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);
    Notification notif = new Notification(R.drawable.ic_launcher, "Birthday", System.currentTimeMillis());
    notif.setLatestEventInfo(context, from, message, contentIntent);
    nm.notify(1, notif);
 } 
```

这够了吗？？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-20T08:26:01.657

一个简单的答案是**否定**的。但是是的，您可以通过创建一个`BroadCastReceiver`在设备启动完成时启动警报来实现这一点。

用于`<action android:name="android.intent.action.BOOT_COMPLETED" />`在 BroadCastReceiver 类中捕获启动活动。

您需要在 AndroidManifest.xml 中添加上述行，如下所示，

```
<receiver android:name=".AutoStartUp" android:enabled="true" android:exported="false" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
     <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-28T11:40:46.420

是的，即使在重新启动后，您也可以让 AlarmManager 工作。也许这是最简单的方法：在您的 AndroidManifest.xml 中添加以下代码：

```
<receiver android:name=".AlarmReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.QUICKBOOT_POWERON" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

不要忘记在 AndroidManifest.xml 中包含用户权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-02T13:49:56.660

在某些手机中仅添加

```
<action android:name="android.intent.action.Boot_COMPLETED" /> 
```

不起作用，您还必须添加

```
<action android:name="android.intent.action.QUICKBOOT_POWERON" /> 
```

连同上一个

# php - 当用户从本地机器关闭浏览器时通知 REST

> ID：12034361
> 
> 赞同：0
> 
> 时间：2012-08-20T08:22:46.697
> 
> 标签：php, session, rest

我正在通过 PHP curl 进行 REST 调用，在响应中我得到了一个 url

在新标签中打开。现在这是我的问题开始了。

1）我从 REST 获得的 url 基本上是一个配置文件 url，所以在该页面上注销

选项存在，在单击注销按钮时，我可以通知我的 REST 客户端。

但是假设如果用户在这种情况下关闭浏览器，我如何通知我的 REST 客户端。

有什么办法可以做到这一点。？

任何帮助，将不胜感激。

示例：我进行 REST 调用`http://somweb.com/hi?id=12`

在回复中，我得到了一个 URL，即`http://someurl.net/user?id=19`

`http://someurl.net/user?id=19`现在我在本地机器的新选项卡中打开 REST url( )

现在的问题是如果用户关闭选项卡（REST 返回选项卡）我如何通知我的 REST 客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:42:15.117

可能不是最时尚的解决方案，它可能对您不起作用，但可以通过 cronjob 脚本和延迟事件来完成（不要与浏览器事件混淆！！！）。

当您打开网址时，在您的存储（数据库，文件）中写入该事件应在特定时间触发。如果一切顺利，删除条目表单存储并通知 REST 客户端。如果用户在全部完成之前关闭选项卡，则不会删除事件条目，并且可以使用 cronjob 脚本检查这些条目并执行过期的条目并删除条目。

可以将 cronjob 设置为每分钟或每几分钟执行一次脚本。这可能不是一个好的解决方案，因为 cronjob 脚本应该经常执行，这可能会降低您的服务器性能，但如果您认为这是值得的 - 那就去吧。

希望这可以帮助

# c - 通过（x，y）像素进行有效的图像转换？

> ID：12034363
> 
> 赞同：0
> 
> 时间：2012-08-20T08:22:54.053
> 
> 标签：c, image, image-processing, opencv

看看是否有人可以推荐一种计算有效的方法来将图像平移/移动 (x,y) 像素。

原因是，我在实施傅里叶-梅林变换以确定图像帧之间的旋转和平移方面取得了部分成功。一旦图像未旋转，我想通过计算的像素偏移 (x,y) 取消平移图像。允许我测试旋转和平移后的图像相关性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:38:29.457

我认为一种有效的方法是：

1.  做一个边框`cv::copyMakeBorder()`。
2.  使用 ROI，例如在不复制数据的情况下制作新的矩阵标题。

祝你好运

# java - 从二进制文件中读取并将某些信息转换为字符串

> ID：12034364
> 
> 赞同：0
> 
> 时间：2012-08-20T08:22:53.633
> 
> 标签：java, serialization, io, bytebuffer

我必须从 S/W 版本、供应商等二进制文件中读取数据。我必须在 textarea 中显示输出。读取配置后，usre 可以通过串行端口发送选定的文件。我在这里写了一些代码：

```
InputStream is=null;
    try {
        File urt=filebrowser.getSelectedFile();
        is = new FileInputStream(urt);
        DataInputStream in = new DataInputStream(is);
        long l=urt.length();

        char[] bytes= new char[(int)l];
         int o=bytes.length;
         errlabel.setText(String.valueOf(o));
         String content;
        int offset;
   BufferedReader br = new BufferedReader(new InputStreamReader(in));
         int numRead;
        try {

         br.read(bytes, 0, 46);
         while ((content = br.readLine()) != null)   {
StringBuilder sb=new StringBuilder(content);

jTextArea1.setText(sb.toString());
errlabel.setText(""+sb.length());

}

        } catch (IOException ex) {
            Logger.getLogger(MyBoxUpdator.class.getName()).log(Level.SEVERE, null, ex);
        }

    } catch (FileNotFoundException ex) {
        Logger.getLogger(MyBoxUpdator.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        try {
            is.close();
        } catch (IOException ex) {
            Logger.getLogger(MyBoxUpdator.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

和输出

```
EE��6**UT�h��}�(:�萢Ê�*:�茢���_��(RQ��N���S��h����rMQ��(_Q����9mTT��\�nE�PtP�!E�UtBߌz��z��������� 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:25:15.613

**您正在将字节转换为字符**

所以你必须告诉使用什么编码。如果您不指定一个 InputStreamReader（它是：从输入字节流中读取字符的读取器）将使用默认值。我确定默认值不是您需要的。

尝试这个：

```
new InputStreamReader(in, "UTF-8"); // or whatever encoding you need 
```

作为一般规则：在处理 char 到字节的转换时始终指示编码，反之亦然！:)

**编辑**

当然，我假设您的文件已将 TEXT 编码到其中。如果它像@alfasin 所说的那样是二进制的……嗯……看到垃圾是正常的。您应该读取字节并写入代表它们的字符（例如，作为每个字节的十六进制表示）。

# teamcity - 通过 Git-Svn 远程运行

> ID：12034366
> 
> 赞同：2
> 
> 时间：2012-08-20T08:23:01.160
> 
> 标签：teamcity, git-svn

我正在尝试`git-svn`使用`teamcity`远程运行。有人成功了吗？

这里的主要问题是这是否真的可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T17:41:24.953

答案很晚，但仍然......

可以通过命令行远程运行： [https ://github.com/tendant/teamcity-git-svn](https://github.com/tendant/teamcity-git-svn)

脚本需要一些更新才能在 Windows 上运行，一旦完成修复，我将向作者提出拉取请求。

# ios - 如何在 iOS 中永久更改亮度？

> ID：12034369
> 
> 赞同：3
> 
> 时间：2012-08-20T08:23:14.153
> 
> 标签：ios, jailbreak

```
GSEventSetBacklightLevel(BrightnessSlider.value); 

[[UIApplication sharedApplication] setBacklightLevel:BrightnessSlider.value]; 
```

iOS UIScreen 具有亮度属性。将其设置为不同的值会更新屏幕亮度。但是在锁定/解锁后屏幕亮度会恢复到 iOS 设置中设置的亮度。

我必须打电话来保存设置吗？有同步通话之类的吗？

这是越狱开发，没有“沙盒”。</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:32:02.463

这个`UIApplication` `setBacklightLevel:`电话确实是暂时的。

但是，如果您查看在 SBSettings 中切换（更改）亮度级别的代码，那是一个永久设置。我仍然认为亮度的任何变化也会受到用户是否打开**“设置”->“亮度”->“自动亮度**”功能的影响。 **自动亮度**将动态调整屏幕亮度。

看看[这个页面](http://thebigboss.org/guides-iphone-ipod-ipad/sbsettings-toggle-spec)。滚动到底部以[查看此链接](http://thebigboss.org/hostedfiles/Brightness.zip)。

如您所见，通过将新的亮度级别写入**com.apple.springboard.plist**文件来实现永久亮度更改：

```
 NSMutableDictionary* Prefs = [NSMutableDictionary dictionaryWithContentsOfFile:@"/var/mobile/Library/Preferences/com.apple.springboard.plist"];

    if(Prefs != nil)
    {
        NSLog(@"Prefs != nil\n");
        float CurrentBacklight1 = [[Prefs objectForKey:@"SBBacklightLevel"] floatValue];
        float CurrentBacklight2 = [[Prefs objectForKey:@"SBBacklightLevel2"] floatValue];
        NSNumber* Number = [NSNumber numberWithFloat:CurrentBacklight];

        if(CurrentBacklight2 > 0)
        {
            NSLog(@"CurrentBacklight2 = %f\n", CurrentBacklight2);
            [Prefs setObject:Number forKey:@"SBBacklightLevel2"];
        }
        if(CurrentBacklight1 > 0)
        {
            NSLog(@"CurrentBacklight1 = %f\n", CurrentBacklight1);
            [Prefs setObject:Number forKey:@"SBBacklightLevel"];
        }
        [Prefs writeToFile:@"/var/mobile/Library/Preferences/com.apple.springboard.plist" atomically:YES];
    } 
```

其中包含您看到 SpringBoard*恢复*到的值。然后，更改也将临时应用到您正在使用的代码中：

```
[[UIApplication sharedApplication] setBacklightLevel:BrightnessSlider.value]; 
```

这两个变化的*结合*应该可以得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:32:21.740

```
Class $SBBrightnessController = objc_getClass("SBBrightnessController");
[[$SBBrightnessController sharedBrightnessController] _setBrightnessLevel:BrightnessSlider.value showHUD:YES]; 
```

Objective-C 运行时的乐趣 :)

# java - “Java 并发实践”——缓存的线程安全数字分解器（清单 2.8）

> ID：12034370
> 
> 赞同：7
> 
> 时间：2012-08-20T08:23:24.170
> 
> 标签：java, thread-safety, clone, local-variables

在以下代码[中（复制自 Java 并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)第 2 章，第 2.5 节，清单 2.8）：

```
@ThreadSafe
public class CachedFactorizer implements Servlet {
    @GuardedBy("this") private BigInteger lastNumber;
    @GuardedBy("this") private BigInteger[] lastFactors;
    @GuardedBy("this") private long hits;
    @GuardedBy("this") private long cacheHits;

    public synchronized long getHits() { return hits; }

    public synchronized double getCacheHitRatio() {
        return (double) cacheHits / (double) hits;
    }

    public void service(ServletRequest req, ServletResponse resp) {
        BigInteger i = extractFromRequest(req);
        BigInteger[] factors = null;
        synchronized (this) {
            ++hits;
            if (i.equals(lastNumber)) {
                ++cacheHits;
                factors = lastFactors.clone(); // questionable line here
            }
        }
        if (factors == null) {
            factors = factor(i);
            synchronized (this) {
                lastNumber = i;
                lastFactors = factors.clone(); // and here
            }
        }
        encodeIntoResponse(resp, factors);
    }
} 
```

为什么`factors`,`lastFactors`数组被克隆？不能简单地写成`factors = lastFactors;`and`lastFactors = factors;`吗？仅仅因为`factors`是一个局部变量然后它被传递给`encodeIntoResponse`，它可以修改它吗？

希望问题很清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:09:52.757

这称为防御性复制。数组和其他对象一样是对象，所以

```
 factors = lastFactors 
```

会将 lastFactos 的引用分配给因子，反之亦然。所以任何人都可以在你的控制之外覆盖你的状态。举个例子：

```
private void filterAndRemove(BigInteger[] arr);
private void encodeIntoResponse(..., BigInteger[] factors) {
   filterAndRemove(factors);
} 
```

使用我们的理论赋值 filterAndRemove 也会影响原来的 lastFactorials。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:31:18.970

从基础猜到的答案：如果您打算修改对象，并且您不想修改原始对象，则需要克隆，在您的情况下`factors = lastFactors.clone();`，因为您不想`lastFactors`被修改而是克隆它并将其发送到`encodeIntoResponse(resp, factors);`哪个可能包含修改它的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:04:27.007

克隆数组的唯一原因是阻止（在这种情况下并发）修改数组元素。但是，在这种情况下，这看起来是不可能的，假设没有其他方法修改引用的数组，`lastFactors`这在示例中是有意义的。存储在`factors`和中的数组`lastFactors`都是由 以完整状态创建和返回的`factor`，并且它们的引用在同步块中分配，这将导致它们被安全地发布。

除非`encodeIntoResponse`修改其`factors`参数的元素，否则在我看来，调用`clone`是不必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T07:47:04.207

我同意本书的作者可以更好地解释本书的这一部分。

确实，为了正确实现线程安全，您必须使用同一个锁来**同步**读写操作**；**在上面的代码中，为了尽量减少同步量，作者决定执行无同步：由于该方法**读取**了所引用的数组的内容，因此作者将其克隆到一个新的数组中。**`encodeIntoResponse(...)``encodeIntoResponse(...)`**`factors`****

 ****注意：虽然它确实`factors`是一个局部变量，但一般来说，它仍然需要被克隆，因为同步和非同步代码读取相同的数组，如果我们将引用（不克隆）传递给`lastFactors`and ，可能会发生这种情况`encodeIntoResponse(...)`。

但是，正如@khachik 在问题中和@david-harkness 在回复中正确指出的那样，在这种特定情况下，`clone`调用是不必要的，因为`lastFactors`它是安全发布的，并且在发布后不会被修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-09T13:39:17.693

如果改成`factors = lastFactors.clone();`，`factors = lastFactors;`两者都`factors`指向`lastFactors`同一个对象，`factors`就**不再**是局部变量，变成了**共享的可变状态**。

假设有三个请求，请求 A、B、C。请求 A 和 B 发送的数量是 10，但请求 C 发送的数量是 20。如果发生以下执行顺序并且您更改`factors = lastFactors.clone();`为 ，则可能会出错`factors = lastFactors;`。

1.  servlet服务器接收到请求A，整个`service`方法被执行，now `lastNumber`is `10`, `lastFactors`is `[1, 2, 5, 10]`。
2.  servlet 服务器接收到请求 B 和 C，首先处理请求 B，但是在退出第一个`synchronized`块后（**现在对于请求 B，`factors`是`[1, 2, 5, 10]`，这是正确的**），处理请求 C。
3.  对于请求 C，整个`service`方法被执行，它**从****变为，`lastFactors``[1, 2, 5, 10]``[1, 2, 4, 5, 10, 20]`**因为两者都`factors` `lastFactors`指向同一个对象，`factors`现在`[1, 2, 4, 5, 10, 20]`也是。**请求 B 的响应应该是`[1, 2, 5, 10]`，但`[1, 2, 4, 5, 10, 20]`现在**是。****

# windows-7 - NETSTAT -a -b 在 Windows 7 中不起作用？

> ID：12034371
> 
> 赞同：14
> 
> 时间：2012-08-20T08:23:28.117
> 
> 标签：windows-7

在 cmd.exe 我输入：

```
NETSTAT -a -b 
```

=> 结果不工作并显示`The requested operation requires elevation`

如何检查 Windows 7 中运行的端口软件

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T08:26:46.680

您应该具有执行此操作的管理员权限

从管理员运行 cmd.exe

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-23T10:59:13.313

[从微软](http://answers.microsoft.com/en-us/windows/forum/windows_7-performance/error-the-requested-operation-requires-elevation/cdd97f8c-7f58-e011-8dfc-68b599b31bf5?msgId=353fac75-9458-e011-8dfc-68b599b31bf5)找到以下答案：

> 右键单击命令提示符图标打开命令提示符，然后选择“以管理员身份运行”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T14:29:08.007

在 Windows 8/8.1 中单击开始按钮，键入“cmd”，右键单击命令提示符并选择以管理员身份运行。

# ember.js - Emberjs 异步路由

> ID：12034375
> 
> 赞同：11
> 
> 时间：2012-08-20T08:23:39.010
> 
> 标签：ember.js

我的问题与emberjs的问题[#1183](https://github.com/emberjs/ember.js/pull/1183)和[#1268有关。](https://github.com/emberjs/ember.js/issues/1268)

我在路线上有动态元素。如果我通过应用程序导航，一切都很好。问题是当我重新加载页面或键入 url 时。在这种情况下，应用程序进入反序列化函数并通过其 id 加载和对象，但此加载是异步的。

在 issue [#1268](https://github.com/emberjs/ember.js/issues/1268) lukemelia 说*“你需要让你的反序列化方法的结果实现承诺模式”*。

我尝试过，但总是松散的上下文。我的代码类似于：

```
page: Ember.Route.extend
route: '/:alias'
deserialize: (router, params) -> page=App.Page.find(params.alias)
$.when( page.get("isLoaded") ).done( () -> console.debug(page.get("alias")) return page)
loading: Em.State.extend 
```

路由器进入加载状态，但随后返回没有上下文数据。我想我做错了什么。可能一切都错了。

有谁能够帮我？有没有例子？

谢谢！

**解决：**

```
page: Ember.Route.extend
    route: '/:id'
    deserialize: (router, params) ->
        page=App.Page.find(params.id})
        deferred = $.Deferred()
        page.addObserver("isLoaded", -> deferred.resolve(page))
        return deferred.promise()
    serialize: (router, page) ->
        return {id: page.get("id") }
    connectOutlets: (router, page) ->
        router.get('applicationController').connectOutlet
            context: page
            name: "page"
loading: Em.State.extend
    connectOutlets: (router, context) ->
        router.get('applicationController').connectOutlet(context: context, name: "loading") 
```

页面正在加载时，活动状态正在加载，当页面加载完成时，路由器会自动加载页面状态。

我希望这可以帮助某人

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T00:43:15.370

@leroj7 你已经找到了一个可行的解决方案。谢谢分享。我创建了一个 mixin，将其添加到需要具有此行为的模型中：

```
Editor.ModelPromise = {
  init: function() {
    this._super();
    this._deferred = $.Deferred();
    this._deferred.promise(this);
    this.one('didLoad', this, '_resolveModelPromise');
    this.one('becameError', this, '_rejectModelPromise');
  },
  _resolveModelPromise: function() {
    this._deferred.resolve(this);
  },
  _rejectModelPromise: function() {
     this._deferred.reject(this);
  }
}; 
```

也可在[https://gist.github.com/1b54f0956ba10195a3bc](https://gist.github.com/1b54f0956ba10195a3bc)

像这样的方法最终将被纳入 ember-data，尽管它很可能不依赖 jQuery，因为 ember-data 目前不依赖于 jQuery。

# android - Android 上的 ORMLite 使用 javax.persistence 注释

> ID：12034376
> 
> 赞同：7
> 
> 时间：2012-08-20T08:23:38.400
> 
> 标签：android, persistence, ormlite

我们已经开发了一个 Web 服务，现在正在构建一个 Android 应用程序来与该 Web 服务进行通信。我们在 Web 服务中使用持久性，也希望在我们的 Android 应用程序中使用持久性。我们认为 ORMLite 是在 Android 上实现持久性的方法，我们希望这种`javax.persistence`支持对我们的应用程序来说足够好。我希望能够将 Web 服务的数据模型复制到 Android 应用程序，而不必修改注释。

所以我尝试复制模型类并将 and 添加`ormlite-android-4.41.jar`到`ormlite-core-4.41.jar`我的 Android 项目中。不幸的是，这并没有奏效。我的 IDE 找不到`javax.persistence`注释的类路径。我需要额外的库吗？我在[文档](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_2.html#SEC9)中对此一无所知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-07T10:40:53.467

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T15:08:10.277

有趣的问题。如果`javax.persistence`注释不在 Android JDK 中，那么我不确定您是否应该使用它们。

也就是说，如果你想使用它们，你应该能够从 JDK 源 jar 中获取 java 文件并将它们包含在你自己的项目中。只需将您实际使用的注释从源 jar 复制到适当的`javax/persistence`路径中。

[ORMLite](http://ormlite.com/)对[`javax.persistence`注释](http://ormlite.com/docs/jpa)的支持远非完美。如果您有任何问题，请告诉我，以便我改进。

# jquery - jQuery Tag 输入只允许有效的电子邮件地址

> ID：12034377
> 
> 赞同：2
> 
> 时间：2012-08-20T08:23:50.060
> 
> 标签：jquery, email, tags

有很多用于输入的 jQuery Tag 插件，例如 jQuery Tag it、TagBox 等。

但在我的情况下，我会从用户那里得到一个电子邮件地址列表，所以它不需要任何自动完成等，但它需要接受有效电子邮件的条目，并用逗号分隔，所以如果我键入“blabla”，“blabla”不是有效的电子邮件地址，因此不应将其视为标签。显然不允许使用“空格”，因为电子邮件地址中没有空格。

对此有什么简单的建议吗？

问候，

# android - while循环安卓

> ID：12034381
> 
> 赞同：1
> 
> 时间：2012-08-20T08:24:04.107
> 
> 标签：android

这是我的代码的一部分，它会随机振动一段时间。

```
public boolean dispatchTouchEvent(MotionEvent ev) {            
    SharedPreferences appSettings = PreferenceManager.getDefaultSharedPreferences(this);        
    boolean doVibration = appSettings.getBoolean("vibrationCue", true);      

    // determine whether estimation or cue mode is active        
    if (!currentlyEstimating) {          
        if (ev.getAction() == MotionEvent.ACTION_DOWN) {      
            Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);         
            // determine random timespan for cue(s)          
            initCueLength();          
            if (doVibration)             
            {             
                loopnum = 0;         
                while(loopnum < 5) {           
                     v.vibrate(cueLength);         
                    loopnum ++;         
                }         
            }
        }
    }
} 
```

我希望振动重复例如五次。但是while循环不起作用。你能指导我有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:28:41.367

问题是`v.vibrate`异步工作，即不等待指定的时间，所以这 5 次调用几乎立即发生，并且与一次调用具有相同的效果。

要获得所需的效果，请定义振动模式：

[http://android.konreu.com/developer-how-to/vibration-examples-for-android-phone-development/](http://android.konreu.com/developer-how-to/vibration-examples-for-android-phone-development/)

# jquery - 如果字段已填写，则调用表单提交事件

> ID：12034382
> 
> 赞同：0
> 
> 时间：2012-08-20T08:24:29.677
> 
> 标签：jquery, forms, submit, bind, onbeforeunload

我网站的几页边栏中有一个表格

```
<form id="test1" name="test1">
 <label for="fname">First Name:</label>
 <input type="text" name="fname" id="fname" />

 <label for="lname">Last Name:</label>
 <input type="text" name="lname" id="lname" />

 <label for="comment">Comment:</label>
 <textarea name="comment" id="comment"><textarea/>

 <input type="submit" />
</form> 
```

我的要求有点奇怪。如果有人填写了表单（即使是部分填写）然后离开当前页面（通过转到其他页面或关闭浏览器选项卡/窗口），则应提交表单。

我正在使用以下 jQuery 代码来实现以下目标：

```
<script>
$(window).bind('beforeunload', function(){
    $('form').each(function(index) {
    var filled = false;
    $(this).find("input").each(function() {
        if ($(this).val() != "") {
            filled = true;
        }
    });
    if (filled) { this.submit(); }
});
return confirm('test');
}); 
```

上面的代码不能正常工作，表单没有被提交。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:12:18.873

1.  我认为您应该在提交时使用 $(this) 而不是 this。
2.  也许您还应该检查值比较（例如[使用 jQuery 检查输入是否为空](https://stackoverflow.com/questions/1854556/check-if-inputs-are-empty-using-jquery)）

@amtanay：据我所知，嵌套是正确的......

新代码（未经测试）：

```
$(window).bind('beforeunload', function(){
  $('form').each(function(index) {
    var filled = false;
    $(this).find("input").each(function() {
      if ($(this).val() != "") {
        filled = true;
      }
    });
    if (filled) { $(this).submit(); }
  });
  return confirm('test');
}); 
```

您也可以考虑在找到非空字段后立即提交表单。无需检查所有字段，即使仅部分填写表格也应提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:34:50.623

变量填充在 $(form).each 内部声明并在其外部使用

# java - 来自 URL 的 XML 响应在 Java 中不正确，但在浏览器中正确

> ID：12034384
> 
> 赞同：0
> 
> 时间：2012-08-20T08:24:37.110
> 
> 标签：java, url, servlets, xmlhttprequest

首先我想说的是，在 Stackoverflow 的帮助下，我能够从 URL 读取 XML 响应。感谢您的帮助和许多其他帮助。我阅读并打印了响应（下面的代码），但结果不正确。

在浏览器中显示我（正确）：

```
<ENELIT>
<GESI>
<RI>
<NR id="008201dfa306f4a2" tu="N" nr="0412395504" ut="" cp="" dp="" tm="" ca="" da="" rt="" cc="4"/>
</RI>
</GESI>
</ENELIT> 
```

在 Java 中，它会打印这个（不正确）：

```
<html>
  <head>
    <link rel=stylesheet href="/psiche/styles/IEStyle.css" type="text/css">
  </head>
  <body>

    <SCRIPT FOR=window EVENT=onload LANGUAGE="JAVAScript">
      if (top.areaApplication != undefined)
      {
        alert("Sessione utente scaduta. Effettuare il logon");
        top.areaApplication.location = "/gesi/online/root/login.htm";
      } 
    </SCRIPT>
    <h2>Sessione scaduta, Effettuare il logon.</h2> 
  </body>   
</html> 
```

我怎样才能得到正确的结果？谢谢！

我获取和打印响应的代码：示例 1：

```
URL url = new URL("http://gesi-ro-test.banat.enelro:8010/dynamic/gesi/ri/elab/phonerequest/wind.serid=008201dfa306f4a2&nr=06648624&is=2011/04/20%2013:03:03.296&rt=RE/");
BufferedReader in = new BufferedReader(
new InputStreamReader(url.openStream()));

String inputLine;
while ((inputLine = in.readLine()) != null)
      System.out.println(inputLine);
in.close(); 
```

示例 2：

```
URL url = new URL("http://gesi-ro-test.banat.enelro:8010/dynamic/gesi/ri/elab/phonerequest/wind.ser?id=008201dfa306f4a2&nr=06648624&is=2011/04/20%2013:03:03.296&rt=RE");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("GET");
connection.connect();
InputStream stream = connection.getInputStream();

BufferedReader reader = new BufferedReader(new InputStreamReader(stream));
StringBuilder sb = new StringBuilder();
String line = null;
while((line = reader.readLine()) != null)
{
    sb.append(line).append("\n");
}
stream.close();
System.out.println(sb.toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:30:25.903

在不说特定语言的情况下，您似乎需要先登录服务才能访问您的信息。

# string - 在 GPU 上进行字符串处理的最佳实践？

> ID：12034387
> 
> 赞同：5
> 
> 时间：2012-08-20T08:24:58.293
> 
> 标签：string, gpu, c++-amp

我想知道在 GPU 上处理字符串而不是数字有多现实？具体来说，我感兴趣的是使用 C++ AMP 在字符串数组和目标字符串之间进行比较。

我从诸如将 a 传递给`wchar_t* strings[]`函数之类的基础知识开始，但事实证明，您甚至无法创建类型小于 a 的视图`int`！

所以我的问题是 - 有没有最佳实践，或者这通常是一个坏主意？我也对扭曲发散之类的东西感兴趣——例如，在大型数组上计算字符串长度的效率如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T20:08:56.223

您可以按照此博客文章在 C++ AMP 中使用字符：http: [//blogs.msdn.com/b/nativeconcurrency/archive/2012/01/17/c-amp-it-s-got-character-but-无字符.aspx](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/01/17/c-amp-it-s-got-character-but-no-char.aspx)

IMO 扭曲发散在字符串处理中与在其他算法中没有什么不同，所以我不会预先担心这方面的事情。先把它做好，然后把它弄得快，然后把它调得更快。

9 月，我们将在我们的博客上发布一个字符串处理示例，该示例展示了 C++ AMP 相对于 CPU 多核实现的性能优势 - 为此进行了调整。简而言之，是的，值得将字符串操作算法卸载到 GPU 等加速器上。

# python - 从 MongoDB 到 PostgreSQL - Django

> ID：12034390
> 
> 赞同：2
> 
> 时间：2012-08-20T08:25:06.820
> 
> 标签：python, django, mongodb, database-migration, django-postgresql

任何人都可以阐明如何将我的 MongoDB 迁移到 PostgreSQL 吗？我需要什么工具，如何处理主键和外键关系等？

我用 Django 设置了 MongoDB，但想将其转换回 PostgreSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T15:19:41.093

同时，出现了[用于 MongoDB 的 Postgres Foreign Data Wrapper](https://github.com/citusdata/mongo_fdw)（版本 9.1-9.4）。有了它，人们可以通过 PostgreSQL 为 MongoDB 设置一个视图，然后将数据作为 SQL 处理。

这可能也意味着复制数据的相当简单的方法。

我面临的 FDW 的局限性：

*   数组中的对象（在 MongoDB 中）似乎不可寻址
*   具有动态键名的对象似乎不可寻址

我知道现在是2015年。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:47:20.257

迁移是容易还是困难取决于很多事情，包括您必须适应多少不同版本的数据结构。一般来说，如果您分阶段进行此操作，您会发现它会容易得多：

1.  确保所有 Mongo 数据在结构上与您的 RDBMS 模型一致，并且数据结构版本都相同。

2.  移动您的数据。预计会发现问题，您将不得不返回到第 1 步。

您可以预料到的主要问题是数据验证问题，因为您正在从结构化程度较低的数据平台转移到结构化程度更高的数据平台。

根据您在 MapReduce 方面所做的工作，您也可能在那里进行一些工作。

# python - 导入日志记录的副作用：如何重置日志记录模块？

> ID：12034393
> 
> 赞同：24
> 
> 时间：2012-08-20T08:25:12.173
> 
> 标签：python, logging, import

考虑这段代码：

```
import logging
print "print"
logging.error("log") 
```

我得到：

```
print
ERROR:root:log 
```

现在，如果我在前面代码的开头包含一个第三方模块并重新运行它，我只会得到：

```
print 
```

之前有一些关于此的问题，但在这里我无法触摸我正在导入的模块。

第三方模块的代码在这里：[http ://atlas-sw.cern.ch/cgi-bin/viewcvs-atlas.cgi/offline/DataManagement/DQ2/dq2.clientapi/lib/dq2/clientapi/DQ2 .py?view=markup](http://atlas-sw.cern.ch/cgi-bin/viewcvs-atlas.cgi/offline/DataManagement/DQ2/dq2.clientapi/lib/dq2/clientapi/DQ2.py?view=markup)，但我的问题更笼统：独立于我要导入的模块，我希望以`logging`预期的方式进行干净的工作

**一些（非工作）建议的解决方案：**

```
from dq2.clientapi.DQ2 import DQ2
import logging
del logging.root.handlers[:] 
```

* * *

```
from dq2.clientapi.DQ2 import DQ2
import logging
logging.disable(logging.NOTSET) 
```

* * *

```
logs = logging.getLogger('root')
logs.error("Some error") 
```

* * *

下一个有效，但产生了一些额外的错误：

```
from dq2.clientapi.DQ2 import DQ2
import logging
reload(logging) 
```

我得到：

```
print
ERROR:root:log
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/afs/cern.ch/sw/lcg/external/Python/2.6.5/x86_64-slc5-gcc43-    opt/lib/python2.6/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/afs/cern.ch/sw/lcg/external/Python/2.6.5/x86_64-slc5-gcc43-opt/lib/python2.6/logging/__init__.py", line 1509, in shutdown
    h.close()
  File "/afs/cern.ch/sw/lcg/external/Python/2.6.5/x86_64-slc5-gcc43-opt/lib/python2.6/logging/__init__.py", line 705, in close
    del _handlers[self]
KeyError: <logging.StreamHandler instance at 0x2aea031f7248>
Error in sys.exitfunc:
Traceback (most recent call last):
  File "/afs/cern.ch/sw/lcg/external/Python/2.6.5/x86_64-slc5-gcc43-opt/lib/python2.6/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/afs/cern.ch/sw/lcg/external/Python/2.6.5/x86_64-slc5-gcc43-opt/lib/python2.6/logging/__init__.py", line 1509, in shutdown
    h.close()
  File "/afs/cern.ch/sw/lcg/external/Python/2.6.5/x86_64-slc5-gcc43-opt/lib/python2.6/logging/__init__.py", line 705, in close
    del _handlers[self]
KeyError: <logging.StreamHandler instance at 0x2aea031f7248> 
```

* * *

```
from dq2.clientapi.DQ2 import DQ2
import logging
logger = logging.getLogger(__name__)
ch = logging.StreamHandler()  
logger.addHandler(ch)
logger.error("log") 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-20T08:57:42.523

这取决于其他模块在做什么；例如，如果它正在调用，`logging.disable`那么您可以调用`logging.disable(logging.NOTSET)`以重置它。

您可以尝试重新加载`logging`模块：

```
from importlib import reload
logging.shutdown()
reload(logging) 
```

问题是这会使带有自己副本的第三方模块`logging`处于不可用状态，因此以后可能会导致更多问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-06T16:08:45.640

要从根记录器中完全清除现有的日志记录配置，这可能有效：

```
root = logging.getLogger()
list(map(root.removeHandler, root.handlers))
list(map(root.removeFilter, root.filters)) 
```

但是，这不会重置为“默认”，这会清除所有内容。然后你必须添加一个`StreamHandler`来实现你想要的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-28T16:50:06.643

一个更完整的解决方案，不会使任何记录器失效。应该可以工作，除非某些模块做了一些奇怪的事情，比如持有对过滤器或处理程序的引用。

```
def reset_logging():
    manager = logging.root.manager
    manager.disabled = logging.NOTSET
    for logger in manager.loggerDict.values():
        if isinstance(logger, logging.Logger):
            logger.setLevel(logging.NOTSET)
            logger.propagate = True
            logger.disabled = False
            logger.filters.clear()
            handlers = logger.handlers.copy()
            for handler in handlers:
                # Copied from `logging.shutdown`.
                try:
                    handler.acquire()
                    handler.flush()
                    handler.close()
                except (OSError, ValueError):
                    pass
                finally:
                    handler.release()
                logger.removeHandler(handler) 
```

不用说，您必须在运行*后*`reset_logging()`设置日志记录。

# bash - 修改没有临时文件的文件内容

> ID：12034400
> 
> 赞同：0
> 
> 时间：2012-08-20T08:25:56.477
> 
> 标签：bash, shell

我有以下日志文​​件，其中包含这样的行

```
1345447800561|FINE|blah@13|txReq
1345447800561|FINE|blah@13|Req
1345447800561|FINE|blah@13|rxReq
1345447800561|FINE|blah@14|txReq
1345447800561|FINE|blah@15|Req 
```

我正在尝试从每一行中提取第一个字段，并根据它属于 blah@13 还是 blah@14，blah@15 我正在使用以下脚本创建相应的文件，这在数量方面似乎效率很低的临时文件创建。关于如何优化它的任何建议？

```
cat newLog | grep -i "org.arl.unet.maca.blah@13" >> maca13
cat newLog | grep -i "org.arl.unet.maca.blah@14" >> maca14
cat newLog | grep -i "org.arl.unet.maca.blah@15" >> maca15
 cat maca10 | grep -i "txReq" >> maca10TxFrameNtf_temp
exec<blah10TxFrameNtf_temp
while read line 
do
 echo $line | cut -d '|' -f 1 >>maca10TxFrameNtf
done
cat maca10 | grep -i "Req" >> maca10RxFrameNtf_temp
 while read line 
do
 echo $line | cut -d '|' -f 1 >>maca10TxFrameNtf
done
rm -rf *_temp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:40:33.937

像这样的东西？

```
for m in org.arl.unet.maca.blah@13 org.arl.unet.maca.blah@14 org.arl.unet.maca.blah@15
do
  grep -i "$m" newLog | grep "txReq" | cut -d' ' -f1 > log.$m
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T22:56:12.537

我发现有时使用 ex 而不是 grep/sed 来修改文本文件而不使用临时文件很有用......省去了担心临时文件及其目录等的唯一性和可写性的麻烦。另外它看起来清洁器。

在 ksh 中，我将使用带有编辑命令的代码块，然后将其通过管道传输到 ex ...

```
{
  # Any edit command that would work at the colon prompt of a vi editor will work
  # This one was just a text substitution that would replace all contents of the line
  # at line number ${NUMBER} with the word DATABASE ... which strangely enough was
  # necessary at one time lol
  # The wq is the "write/quit" command as you would enter it at the vi colon prompt
  # which are essentially ex commands.
  print "${NUMBER}s/.*/DATABASE/"
  print "wq"
} | ex filename > /dev/null 2>&1 
```

# android - 在我们的 Android 应用中查看 pptx

> ID：12034409
> 
> 赞同：3
> 
> 时间：2012-08-20T08:26:38.747
> 
> 标签：android, powerpoint

我已经进行了彻底的搜索，但我无法找到关于如何在我的应用程序中显示 pptx 的解决方案？是否有任何我可以添加的库或任何其他解决方案，因为 webview 不支持这种格式？我想从我的 sdcard 访问我的 pptx 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T09:07:40.407

您可以使用 Apache POI 项目 [Apache POI 链接](https://poi.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:34:56.693

一种方法是使用特定的 Uri 触发 Intent，并让手机选择可以打开该文件的应用程序（如果有）。

# git - Firedrill：从开发人员克隆中重新创建中央 git 存储库

> ID：12034411
> 
> 赞同：20
> 
> 时间：2012-08-20T08:27:00.490
> 
> 标签：git

假设您有一个带有中央主 git 存储库的场景，开发人员和 CI 引擎从中克隆。即非常接近传统的非分布式版本控制系统设置，具有中央集线器和大量节点。

现在说服务器被盗或被闪电击中或任何其他会导致中央存储库连同其所有集中备份一起消失的事情。您只剩下各种克隆，幸运的是其中一个已完全更新，因此您创建了一个空白的 git 存储库替换服务器，用作未来的中央存储库并开始处理克隆。

完全更新的克隆知道所有带有“git branch -a”的“remotes/origin”分支，但只有一个本地分支。（这让我担心 - 丢失分支信息）。

重新建立一个新的中央 git 存储库的步骤是什么，其行为方式与旧的、分支和所有类似？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T08:48:46.887

只需创建一个空存储库，然后从完全更新的克隆中执行以下操作：

```
git remote add new-origin url://to/new/origin

git push --tags new-origin refs/remotes/origin/*:refs/heads/* 
```

显然，如果新来源与原始来源相同，则必须注意*不要*从来源获取。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T21:49:24.450

首先，请不要安装 gitosis：使用最新的[V3+](http://sitaramc.github.com/gitolite/g3why.html) [Gitolite](https://github.com/sitaramc/gitolite)，一个更完整的[授权层](http://sitaramc.github.com/gitolite/auth.html)：请参阅“ [gitosis vs gitolite？](https://stackoverflow.com/a/10888358/6309) ”和“[为什么需要 Gitosis 或 Gitolite？](https://stackoverflow.com/questions/10892969/why-do-you-need-gitosis-or-gitolite/10893091#10893091) ”。

其次，您不会丢失任何分支信息。

这是解决同一问题的另一种方法，更长，但它说明了您如何仍然保留所有分支。

您的任何克隆都可能没有所有本地分支，没错，但所有这些分支仍位于这些克隆的远程命名空间中，因为它们是从同一个（现已消失的）“中央”存储库克隆的。

一旦你在新的中央服务器上克隆回来（作为一个裸仓库）这些仓库之一，你所需要的只是清理一下它，你可以将它作为新的祝福仓库引用。

注意：如果您无法从服务器访问本地存储库，请捆绑所述本地存储库，并将代表该捆绑包的*一个*文件复制回您的服务器：您将能够从所述捆绑包中克隆。
请参阅“ [`git bundle`: bundle tags and heads](https://stackoverflow.com/questions/5719369/git-bundle-bundle-tags-and-heads/5720366#5720366) ”以正确创建捆绑包。

* * *

### 简洁版本

```
# Let's re-create a bare "blessed" repo on the server
git clone --mirror /path/to/a/local/repo repo.git
# or git clone --mirror /path/to/repo.bundle repo.git

# restore the local branches
remote=origin ; for brname in `git branch -r | grep $remote | grep -v HEAD | awk '{gsub(/[^\/]+\//,"",$1); print $1}'`; do git branch --set-upstream $brname  $remote/$brname ; done

# delete the remotes branches
# (your blessed repo doesn't track anything)
remote=origin ; for brname in `git branch -r | grep $remote | grep -v HEAD | awk '{gsub(/[^\/]+\//,"",$1); print $1}'`; do git branch -r -d origin/$brname ; done

# delete the remote 'origin'
# Not needed for your blessed repo
git remote rm origin

# Let's make sure master is the current branch
# for that bare repo:
git symbolic-ref HEAD refs/heads/master 
```

就是这样。准备好出发。

* * *

### 长版（演示）

让我们创建一个 repo，有 4 个分支：`master`、`b1`、`b2`、`b3`，每个分支都有自己的文件：

```
C:\Users\VonC\prog\git\tests>mkdir c
C:\Users\VonC\prog\git\tests>cd c
C:\Users\VonC\prog\git\tests\c>git init r1
Initialized empty Git repository in C:/Users/VonC/prog/git/tests/c/r1/.git/
C:\Users\VonC\prog\git\tests\c>cd r1
C:\Users\VonC\prog\git\tests\c\r1>echo m > m.txt && git add . && git commit -m "first commit"
[master (root-commit) 1ffe5c1] first commit
 1 file changed, 1 insertion(+)
 create mode 100644 m.txt

C:\Users\VonC\prog\git\tests\c\r1>git checkout -b b1
Switched to a new branch 'b1'
C:\Users\VonC\prog\git\tests\c\r1>echo f1 > f1.txt && git add . && git commit -m "f1 in b1"
[b1 1e64d01] f1 in b1
 1 file changed, 1 insertion(+)
 create mode 100644 f1.txt

C:\Users\VonC\prog\git\tests\c\r1>git checkout -b b2 master
Switched to a new branch 'b2'
C:\Users\VonC\prog\git\tests\c\r1>echo f2 > f2.txt git add . && git commit -m "f2 in b2"
[b2 4462b8f] f2 in b2
 1 file changed, 1 insertion(+)
 create mode 100644 f2.txt

C:\Users\VonC\prog\git\tests\c\r1>git checkout -b b3 master
Switched to a new branch 'b3'
C:\Users\VonC\prog\git\tests\c\r1>echo f3 > f3.txt && git add . && git commit -m "f3 in b3"
[b3 7ada753] f3 in b3
 1 file changed, 1 insertion(+)
 create mode 100644 f3.txt 
```

现在，如果我克隆`r1`into`r2`和`r2`into `r3`，是的，`r3`会丢失分支信息：

```
C:\Users\VonC\prog\git\tests\c>git clone r1 r2
Cloning into 'r2'...
done.

C:\Users\VonC\prog\git\tests\c>git clone r2 r3
Cloning into 'r3'...
done.

C:\Users\VonC\prog\git\tests\c>cd r3

C:\Users\VonC\prog\git\tests\c\r3>git br -a
* b3
  remotes/origin/HEAD -> origin/b3
  remotes/origin/b3 
```

但是在您的情况下，大多数存储库都是从受祝福的存储库中克隆的直接结果。

`r2`拥有所有必要的分支（一个本地，4 个**[远程跟踪分支](https://stackoverflow.com/questions/4693588/git-what-is-a-tracking-branch)**，因为[没有“本地跟踪分支](https://stackoverflow.com/a/1070851/6309)”）：

```
C:\Users\VonC\prog\git\tests\c\r2>git br -a
* b3
  remotes/origin/HEAD -> origin/b3
  remotes/origin/b1
  remotes/origin/b2
  remotes/origin/b3
  remotes/origin/master 
```

如果我可以`clone --mirror r2`进入一个**裸仓库** `r4`，我仍然会得到所有的分支。
请参阅“[和](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)[之间有什么区别`git clone --mirror``git clone --bare`](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)”了解原因。

```
C:\Users\VonC\prog\git\tests\c>git clone --mirror r2 r4
Cloning into bare repository 'r4'...
done.

C:\Users\VonC\prog\git\tests\c>cd r4

C:\Users\VonC\prog\git\tests\c\r4>git br -a
* b3
  remotes/origin/HEAD
  remotes/origin/b1
  remotes/origin/b2
  remotes/origin/b3
  remotes/origin/master 
```

它的遥控器仍然指向`r2`

```
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:b3)
$ git remote -v
origin  C:/Users/VonC/prog/git/tests/c/r2 (fetch)
origin  C:/Users/VonC/prog/git/tests/c/r2 (push) 
```

但这不再需要了。
让我们确保`r2`（或`r1`就此而言）不再可访问：

```
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:b3)
$ cd ..
VonC@HOSTNAME ~/prog/git/tests/c
$ mv r1 r1.old
VonC@HOSTNAME ~/prog/git/tests/c
$ mv r2 r2.old
VonC@HOSTNAME ~/prog/git/tests/c
$ cd r4 
```

现在我们可以通过将本地分支指向远程跟踪分支来**恢复本地分支**
： 请参阅“[将所有远程 git 分支跟踪为本地分支](https://stackoverflow.com/a/6300386/6309)”：

```
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:b3)
$ remote=origin ; for brname in `git branch -r | grep $remote | grep -v HEAD | awk '{gsub(/[^\/]+\//,"",$1); print $1}'`; do git branch --set-upstream $brname  $remote/$brname ; done
Branch b1 set up to track remote ref refs/remotes/origin/b1.
Branch b2 set up to track remote ref refs/remotes/origin/b2.
Branch b3 set up to track remote ref refs/remotes/origin/b3.
Branch master set up to track remote ref refs/remotes/origin/master. 
```

让我们`master`为该裸存储库创建默认分支：
请参阅“ [Git：在裸存储库中更改活动分支的正确方法？](https://stackoverflow.com/a/3302018/6309) ”和“[如何更改 Git 远程`HEAD`以指向除“<code>master”之外的其他内容</a >”。](https://stackoverflow.com/a/1485590/6309)

 [```
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:b3)
$ git symbolic-ref HEAD refs/heads/master
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:master) 
```](https://stackoverflow.com/a/1485590/6309) 

[`origin`不再需要任何引用“ ”的内容。
让我们摆脱远程跟踪分支：
参见“](https://stackoverflow.com/a/1485590/6309)[删除列出的分支`git branch -a`](https://stackoverflow.com/a/7966040/6309)”和“[删除远程分支？](https://stackoverflow.com/a/3068852/6309) ”

```
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:master)
$ remote=origin ; for brname in `git branch -r | grep $remote | grep -v HEAD | awk '{gsub(/[^\/]+\//,"",$1); print $1}'`; do git branch -r -d origin/$brname ; done
Deleted remote branch origin/b1 (was 1e64d01).
Deleted remote branch origin/b2 (was 4462b8f).
Deleted remote branch origin/b3 (was 7ada753).
Deleted remote branch origin/master (was 1ffe5c1). 
```

让我们恐慌并检查我们的本地分支是否仍然引用我们刚刚“删除”的内容：（
参见“[在 git 中显示每个分支的最新提交](https://stackoverflow.com/questions/11434687/display-the-most-recent-commit-of-each-branch-in-git)”）

```
VonC@HOSTNAME ~/prog/git/tests/c/r4 (BARE:master)
$ git br -v
  b1     1e64d01 f1 in b1
  b2     4462b8f f2 in b2
  b3     7ada753 f3 in b3
* master 1ffe5c1 first commit 
```

是的，一切都很好。

# javascript - getJSON 适用于 Android 但不适用于 IOS

> ID：12034418
> 
> 赞同：0
> 
> 时间：2012-08-20T08:27:45.810
> 
> 标签：javascript, jquery, ios, json, cordova

我正在测试获取一些 json 并且 json 代码实际上显示在我的 Android 上，但是当我在我的 iPhone 上尝试它时它不会工作。

IOS有什么需要设置的吗？

这是代码：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>JSON Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    <script src="js/jquery-1.7.1.min.js"></script>
<script>
    $('#page1').live("pageinit", function () {
        $.getJSON("http://mysite.com/api/get_cats", function (data) {
            var output = '';    
            $.each(data.cats, function (index, value) {
                output += '<li>' + value.title + '</li>';    
            });
            $('#listview').append(output).listview('refresh');
        });
    });
</script>
<script src="js/jquery.mobile-1.1.1.min.js"></script>

</head> 
<body>     
<div id="page1" data-role="page">    
    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->    
    <div data-role="content">   
        <p>Page content goes here.</p>              
        <ul id="listview"></ul>             
    </div><!-- /content -->    
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->    
</body>
</html> 
```

如果我添加警报： alert(data.cats); 我在 iphone 中得到“index.html [object: Object]”

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:00:30.663

您是否将该域列入白名单？

它在 config.plist 中......而在 android 上它在 cordova.xml

请参阅[http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.0.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

编辑：您也可以从响应 jqxhr 对象中提醒事情以了解更多信息。作为响应函数添加另外两个参数

```
 function(data, textStatus, jqXHR){...} 
```

# php - 在一页上加载超过 5 个 SWF 对象

> ID：12034423
> 
> 赞同：0
> 
> 时间：2012-08-20T08:28:18.153
> 
> 标签：php, codeigniter, swfobject

我想在我的单页上加载一些 Flash 横幅。我正在使用 swfobject ( [http://code.google.com/p/swfobject/](http://code.google.com/p/swfobject/) )。当我以传统方式加载这十个横幅时 - 只是静态方式，通常其中一些（3-4）没有加载，只是空白字段，当我刷新页面时 - 总是有一些横幅没有加载。有没有办法以某种方式加载它们，它们会正常工作？:) 也许一些异步加载？

我正在使用 codeigniter 和 PHP。

我正在尝试以这种方式加载它们：

```
<?php foreach($category_res as $results){ ?>

    <script type="text/javascript">
            var id = <?php echo $results['id'];?>;
            swfobject.registerObject("banner"+id, "9.0.115");
    </script>

   <div class="baner">

            <div class="kreacja" style="padding-top:25px;" onclick="return false;">

            <object id="banner<?php echo $results['id']; ?>" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" >
                <object class="flash_banner" type="application/x-shockwave-flash" data="<?php echo '/prod_bann/kategorie/'.$results['category_name'].'/'.$results['file']; ?>"></object>
            </object>

            </div>

   </div>
            <?php } ?> 
```

**更新**

我也尝试过动态 SWf 字段嵌入——但情况更糟。更多横幅未加载，代码如下：

```
 <script type="text/javascript">
                var id = <?php echo $results['id'];?>;
                var path = "<?php echo '/prod_bann/kategorie/'.$results['category_name'].'/'.$results['file']; ?>";
                swfobject.embedSWF(path, "banner"+id, "300", "120", "9.0.0");
                </script>

<div class="baner">

   <div class="kreacja" style="padding-top:25px;" onclick="return false;">

     <div id="banner<?php echo $results['id']; ?>" >
     </div>

   </div>

</div>
            <?php } ?> 
```

# r - 将小时：分钟：秒（HH：MM：SS）字符串转换为适当的时间类

> ID：12034424
> 
> 赞同：40
> 
> 时间：2012-08-20T08:28:21.343
> 
> 标签：r, time

在以下数据框中，“时间”列`character`的格式为`hour:minute:second`

```
id <- c(1, 2, 3, 4)
time <- c("00:00:01", "01:02:00", "09:30:01", "14:15:25")
df <- data.frame(id, time) 
```

如何将“时间”列转换为专用时间类，以便对其执行算术计算？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-20T08:33:59.177

使用`chron`包中的函数`chron`：

```
time<-c("00:00:01", "01:02:00", "09:30:01", "14:15:25")

library(chron)
x <- chron(times=time)

x
[1] 00:00:01 01:02:00 09:30:01 14:15:25 
```

做一些有用的事情，比如计算连续元素之间的差异：

```
diff(x)
[1] 01:01:59 08:28:01 04:45:24 
```

* * *

`chron`对象在内部将值存储为每天几分之一秒。因此 1 秒等于`1/(60*60*24)`, 或`1/86400`, 即`1.157407e-05`。

因此，要添加时间，一个简单的选择是：

```
x + 1/86400
[1] 00:00:02 01:02:01 09:30:02 14:15:26 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-20T08:36:53.550

使用 base R 您可以将其转换为 class 的对象`POSIXct`，但这确实为时间添加了日期：

```
id<-c(1,2,3,4)
time<-c("00:00:01","01:02:00","09:30:01","14:15:25")
df<-data.frame(id,time,stringsAsFactors=FALSE)

as.POSIXct(df$time,format="%H:%M:%S")
[1] "2012-08-20 00:00:01 CEST" "2012-08-20 01:02:00 CEST"
[3] "2012-08-20 09:30:01 CEST" "2012-08-20 14:15:25 CEST" 
```

但这确实允许您对它们执行算术计算。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-02T01:24:11.343

另一种可能的选择可能是：

```
time <- c("00:00:01","01:02:00","09:30:01","14:15:25")
converted.time <- as.difftime(time, units = "mins") #"difftime" class
secss <- as.numeric(converted.time, units = "secs")
hourss <- as.numeric(converted.time, units = "hours")
dayss <- as.numeric(converted.time, units="days") 
```

甚至：

```
w <- strptime(x = time, format = "%H:%M:%S") #"POSIXlt" "POSIXt" class 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-03T13:21:02.497

使用包中的`ITime`类`data.table`：

> `ITime`是一个时间类，存储为一天中的整数秒数。

```
library(data.table)
(it <- as.ITime(time))
# [1] "00:00:01" "01:02:00" "09:30:01" "14:15:25"

it + 10
# [1] "00:00:11" "01:02:10" "09:30:11" "14:15:35"

diff(it)
# [1] "01:01:59" "08:28:01" "04:45:24" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-03T16:48:00.693

`lubridate`在时间格式上有很好的灵活性：

```
library(lubridate)

time_hms_1<-c("00:00:01", "01:02:00", "09:30:01", "14:15:25")
hms(time_hms_1)
#> [1] "1S"          "1H 2M 0S"    "9H 30M 1S"   "14H 15M 25S"

time_hms_2<-c("0:00:01", "1:02:00", "9:30:01", "14:15:25")
hms(time_hms_2)
#> [1] "1S"          "1H 2M 0S"    "9H 30M 1S"   "14H 15M 25S"

time_hm_1<-c("00:00", "01:02", "09:30", "14:15")
hm(time_hm_1)
#> [1] "0S"         "1H 2M 0S"   "9H 30M 0S"  "14H 15M 0S"

time_hm_2<-c("0:00", "1:02", "9:30", "14:15")
hm(time_hm_2)
#> [1] "0S"         "1H 2M 0S"   "9H 30M 0S"  "14H 15M 0S" 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020-07-03 创建)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-06T07:44:42.820

[`hms`](https://github.com/tidyverse/hms)使用该包的另一种选择。

```
id <- c(1, 2, 3, 4)
time <- c("00:00:01", "01:02:00", "09:30:01", "14:15:25")
df <- data.frame(id, time, stringsAsFactors = FALSE) 
```

将列转换`time`为类`hms`

```
# install.packages("hms")
library(hms)
df$time <- as.hms(df$time) 
```

执行算术计算

```
diff(df$time)
#01:01:59
#08:28:01
#04:45:24 
```

# c# - UltraWinGrid Infragistics gui 添加列

> ID：12034431
> 
> 赞同：0
> 
> 时间：2012-08-20T08:28:49.830
> 
> 标签：c#, ultrawingrid

我必须通过向现有网格添加一个简单的列来扩展 C# 中的 Infragistics UltraWinGrid 视图。但是，在我在视图的属性（ C# Designer ）中编辑 ColumnDefinition 后，未添加该列。我在那里看到了以前的列并添加了一个新列，但它没有显示设计器，而不是我测试它的应用程序。

更具体地说，当我在 C# 中创建扩展视图时，我使用了继承的用户控件。

到目前为止我已经尝试过：

*   关闭C#解决方案，关闭VS2010。重新打开解决方案。
*   清洁解决方案，然后构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:29:13.937

解决方法：手动将列添加到电子表格，然后更新视图。更改不会出现在设计器中，但在运行应用程序并显示带有电子表格的窗口时会显示新列。

# machine-learning - 朴素贝叶斯和神经网络的相似之处和选择

> ID：12034435
> 
> 赞同：1
> 
> 时间：2012-08-20T08:28:55.287
> 
> 标签：machine-learning, neural-network, bayesian

我有一个包含 10 个不同输入和 1 个输出的大型数据集。所有的输出和输入都是谨慎的（低、中、高）。我正在考虑为这个问题创建一个神经网络，但是当我将网络设计为具有 3 个不同的输出（低、中、高）并使用 softmax 神经元时，我基本上得到了一个“概率”。我对么？

这让我认为尝试朴素贝叶斯分类器可能会更好，从而忽略输入变量之间可能的相关性，但是在大型数据集中朴素贝叶斯显示出有希望的结果。

在这种情况下，是否有理由选择神经网络而不是贝叶斯？当您想要概率作为输出时（使用神经网络中的 softmax 函数），选择神经网络的原因是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:03:01.610

是的，通过输出层中的 softmax 激活，您可以将输出解释为概率。

选择人工神经网络 (ANN) 而不是朴素贝叶斯的一个潜在原因是您提到的可能性：输入变量之间的相关性。朴素贝叶斯假设所有输入变量都是独立的。如果该假设不正确，则可能会影响朴素贝叶斯分类器的准确性。具有适当网络结构的 ANN 可以处理输入变量之间的相关性/依赖性。

# android - OpenGL ES 2.0 屏幕闪烁

> ID：12034436
> 
> 赞同：9
> 
> 时间：2012-08-20T08:28:55.967
> 
> 标签：android, opengl-es-2.0

我面临一个大问题。我正在使用带有 Android 4.0.3 的 Transformer tf101 选项卡。

我的应用程序正在使用自定义 OpenGL ES 2.0 表面。我正在用纹理渲染多个平面。这种纹理正在改变大约。每秒 20 次，通过传递字节数组进行更新。但是，在某些情况下，屏幕会开始闪烁并且不会渲染新的纹理。其他 UI 元素仍然具有响应性并按预期工作。似乎 OpenGL 上下文忽略了所有命令并且没有响应。

发生这种情况时，我的 logCat 中会显示几行：

```
08-20 10:31:15.390: D/NvOsDebugPrintf(2898): NvRmChannelSubmit: NvError_IoctlFailed with error code 1 
```

其次是

```
08-20 10:31:15.390: D/NvOsDebugPrintf(2898): NvRmChannelSubmit failed (err = 13, SyncPointValue = 879005, returning = 0) 
```

其中一些：

```
08-20 10:31:15.390: D/NvOsDebugPrintf(2898): NvRmChannelSubmit failed (err = 196623, SyncPointValue = 0) 
```

这是我创建纹理平面的方法：

```
 m_nTextureStorage[0] = 0;

    GLES20.glGenTextures( 1, m_nTextureStorage, 0);
    GLES20.glActiveTexture( GLES20.GL_TEXTURE0 );
    GLES20.glBindTexture( GLES20.GL_TEXTURE_2D, m_nTextureStorage[ 0 ] );

    // Set filtering
    GLES20.glTexParameterf( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST );
    GLES20.glTexParameterf( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST );
    GLES20.glTexParameteri( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE );
    GLES20.glTexParameteri( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE ); 
```

这就是我的画法：

```
GLES20.glEnable(GLES20.GL_TEXTURE_2D);
        GLES20.glEnable(GLES20.GL_DEPTH_TEST);
        GLES20.glActiveTexture( GLES20.GL_TEXTURE0 );

        //GLES20.glUniformMatrix4fv(m_HMVPMatrixUniform, 1, false, mvpMatrix, 0); 
        GLES20.glUseProgram( m_nProgramHandle );
        ByteBuffer oDataBuf = ByteBuffer.wrap( m_sTexture );

        m_HTextureUniform = GLES20.glGetUniformLocation( m_nProgramHandle, "uTexture" );
        m_HTextureCoordinate = GLES20.glGetAttribLocation( m_nProgramHandle, "TexCoordinate" );
        GLES20.glUniform1iv( m_HTextureUniform, 2, m_nTextureStorage, 0 );

        // get handle to the vertex shader's vPosition member
        m_nPositionHandle = GLES20.glGetAttribLocation( m_nProgramHandle, "vPosition" );

        // Prepare the triangle data
        GLES20.glTexImage2D( GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE, 640, 480,
                             0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, oDataBuf );

        // Prepare the triangle data
        GLES20.glVertexAttribPointer( m_nPositionHandle, 3, GLES20.GL_FLOAT, false, 12, m_oVertexBuffer );
        GLES20.glEnableVertexAttribArray( m_nPositionHandle );

        GLES20.glVertexAttribPointer( m_HTextureCoordinate, 2, GLES20.GL_FLOAT, false, 12, m_oTextureBuffer); 
        GLES20.glEnableVertexAttribArray( m_HTextureCoordinate );

        m_nMVPMatrixHandle = GLES20.glGetUniformLocation( m_nProgramHandle, "uMVPMatrix");

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv( m_nMVPMatrixHandle, 1, false, mvpMatrix, 0);

        GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 6); 
```

OpenGL 渲染器通过传递 mvpMatrix 简单地调用我的 TexturedPlane 的绘制函数。我没有删除任何纹理，因为我已经读过 android 系统会自动处理它。

我认为这与 GPU 进入 OOM 有关，但我不确定，因为我没有发现任何与发布的错误消息相关的内容。

提前谢谢！

更新：

渲染模式设置为`RENDER_WHEN_DIRTY`。将其更改为`RENDERMODE_CONTINOUSLY`问题消失后..奇怪。由于这只是一种解决方法且没有解决方案，因此我仍在寻求帮助；）

将渲染模式保持在连续状态是没有选择的，因为这会消耗大量处理器时间并且没有任何意义，因为只有在生成新纹理时才需要渲染。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:23:38.043

终于找到了解决办法。

当我在每个渲染圈之后调用 glFlush() 时，它工作正常。我没有在不同的纹理通道上渲染每个平面，到目前为止它工作得很好。谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T21:59:03.170

你打电话时 ..：

```
GLES20.glUniform1iv( m_HTextureUniform, 2, m_nTextureStorage, 0 ); 
```

我认为[这会将特定的*纹理单元*绑定到采样器 uniform](https://stackoverflow.com/questions/10868958/what-is-sampler2d-really-store)。但是您传递的是*纹理*名称/对象/句柄/任何东西（这不是*纹理单元*。）也许这只是巧合，而您只传入 0（可能是 , 中的纹理名称`m_nTextureStorage`），这恰好是正确的/期望值？

或者这可能导致用户空间驱动程序崩溃。

# c++ - 如何清空 smtp 的输出

> ID：12034438
> 
> 赞同：0
> 
> 时间：2012-08-20T08:29:00.647
> 
> 标签：c++, io

我正在为 smtp 使用以下代码：

当它调用`sendEmail`时，输出将显示在终端中。如何将其发送到 dev/null 或不输出？在后台运行没有帮助。

部分输出：

```
* About to connect() to smtp.gmail.com port 587 (#0)
*   Trying 173.194.79.109... * connected
< 220 mx.google.com ESMTP nv6sm10641402pbc.42
> EHLO ubuntu
< 250-mx.google.com at your service, [222.164.82.97]
< 250-SIZE 35882577
< 250-8BITMIME
< 250-STARTTLS
< 250 ENHANCEDSTATUSCODES
> STARTTLS
< 220 2.0.0 Ready to start TLS
* successfully set certificate verify locations:
*   CAfile: none 
```

代码：

```
#include <stdio.h>
#include <string>
#include <cstring>
#include <curl/curl.h>
using namespace std;
/* This is a simple example showing how to send mail using libcurl's SMTP
 * capabilities. It builds on the simplesmtp.c example, adding some
 * authentication and transport security.
 */

#define FROM    "<asktheprogramer2@gmail.com>"

#define CC      "<asktheprogramer2@gmail.com>"

string ToAddress,strSubject, strMessage;

struct upload_status {
  int lines_read;
};

static size_t payload_source(void *ptr, size_t size, size_t nmemb, void *userp)
{
const char *payload_text[]={ToAddress.c_str(),"From: " FROM "\n","Cc: " CC "\n",strSubject.c_str(),"\n", /* empty line to divide headers from body, see RFC5322 */
  strMessage.c_str(),NULL};

  struct upload_status *upload_ctx = (struct upload_status *)userp;
  const char *data;

  if ((size == 0) || (nmemb == 0) || ((size*nmemb) < 1)) {
    return 0;
  }

  data = payload_text[upload_ctx->lines_read];

  if (data) {
    size_t len = strlen(data);
    memcpy(ptr, data, len);
    upload_ctx->lines_read ++;
    return len;
  }
  return 0;
}

void sendMail(string strRecipent, string strAubject, string strBessage){

    ToAddress="To: ";
    ToAddress+=strRecipent;
    ToAddress+="\n";

    strSubject="Subject: ";
    strSubject+=strAubject;
    strSubject+="\n";
    strMessage=strBessage;

CURL *curl;
  CURLcode res;
  struct curl_slist *recipients = NULL;
  struct upload_status upload_ctx;

  upload_ctx.lines_read = 0;

  curl = curl_easy_init();
  if (curl) {
    /* This is the URL for your mailserver. Note the use of port 587 here,
     * instead of the normal SMTP port (25). Port 587 is commonly used for
     * secure mail submission (see RFC4403), but you should use whatever
     * matches your server configuration. */
    curl_easy_setopt(curl, CURLOPT_URL, "smtp://smtp.gmail.com:500");

    /* In this example, we'll start with a plain text connection, and upgrade
     * to Transport Layer Security (TLS) using the STARTTLS command. Be careful
     * of using CURLUSESSL_TRY here, because if TLS upgrade fails, the transfer
     * will continue anyway - see the security discussion in the libcurl
     * tutorial for more details. */
    curl_easy_setopt(curl, CURLOPT_USE_SSL, (long)CURLUSESSL_ALL);

    /* If your server doesn't have a valid certificate, then you can disable
     * part of the Transport Layer Security protection by setting the
     * CURLOPT_SSL_VERIFYPEER and CURLOPT_SSL_VERIFYHOST options to 0 (false).
     *   curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0L);
     *   curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);
     * That is, in general, a bad idea. It is still better than sending your
     * authentication details in plain text though.
     * Instead, you should get the issuer certificate (or the host certificate
     * if the certificate is self-signed) and add it to the set of certificates
     * that are known to libcurl using CURLOPT_CAINFO and/or CURLOPT_CAPATH. See
     * docs/SSLCERTS for more information.
     */
    //curl_easy_setopt(curl, CURLOPT_CAINFO, "/path/to/certificate.pem");

    /* A common reason for requiring transport security is to protect
     * authentication details (user names and passwords) from being "snooped"
     * on the network. Here is how the user name and password are provided: */
    curl_easy_setopt(curl, CURLOPT_USERNAME, "sim.dssprojects@gmail.com");
    curl_easy_setopt(curl, CURLOPT_PASSWORD, "SIMpassword");

    /* value for envelope reverse-path */
    curl_easy_setopt(curl, CURLOPT_MAIL_FROM, FROM);
    /* Add two recipients, in this particular case they correspond to the
     * To: and Cc: addressees in the header, but they could be any kind of
     * recipient. */
    recipients = curl_slist_append(recipients, strRecipent.c_str());
    recipients = curl_slist_append(recipients, CC);
    curl_easy_setopt(curl, CURLOPT_MAIL_RCPT, recipients);

    /* In this case, we're using a callback function to specify the data. You
     * could just use the CURLOPT_READDATA option to specify a FILE pointer to
     * read from.
     */
    curl_easy_setopt(curl, CURLOPT_READFUNCTION, payload_source);
    curl_easy_setopt(curl, CURLOPT_READDATA, &upload_ctx);

    /* Since the traffic will be encrypted, it is very useful to turn on debug
     * information within libcurl to see what is happening during the transfer.
     */
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

    /* send the message (including headers) */
    res = curl_easy_perform(curl);
    /* Check for errors */
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    /* free the list of recipients and clean up */
    curl_slist_free_all(recipients);
    curl_easy_cleanup(curl);
  }
}
int main(void)
{

int pid = fork();

 if (pid == 0)
 {
    for(int i=0;i<2;i++)
    {
     sleep(10);
     sendMail("<asktheprogramer@gmail.com>","ABE Reminder","You have an appt in 15 mins");
    }
  return 0;
 }
 else
 {
   sleep(30);
 }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:39:41.600

您可以在运行程序时重定向程序的输出。像这样（假设 *nix 环境）：

```
./<yourprogram> > /dev/null 
```

为标准输出。

```
./<yourprogram> &> /dev/null 
```

用于标准和错误输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:34:20.803

一种可能是重定向标准输出和标准错误。我不确定是否有通过 C++ 流实现此功能的等效机制，但您可以使用[`freopen()`](http://en.cppreference.com/w/c/io/freopen)：

```
freopen("stdout.txt", "w", stdout);
freopen("stderr.txt", "w", stderr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T05:29:50.883

从代码中删除或注释掉这一行：

```
 curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L); 
```

# javascript - 为什么 NodeList[0] 和 node = NodeList[0] 表现不同？

> ID：12034440
> 
> 赞同：0
> 
> 时间：2012-08-20T08:29:22.577
> 
> 标签：javascript, xml, dom

在以下代码摘录中，products 是一个 xml 节点列表，其结构为：

```
<products>
  <product>
    <id>1</id>
    <name>item1</name>
  </product>
  <product>
    <id>2</id>
    <name>item2</name>
  </product>
</products>

xml = httpRequest.responseXML
products = xml.getElementsByTagName('products')

products[0].constructor
//=>ElementConstructor

product = products[0]
//=><product>…&lt;/product>

product.constructor
//=>ElementConstructor

product.getElementsByTagName('id')
//[ <id>1</id> ]

for(product in products){product.getElementsByTagName('id')}
//=>TypeError: 'undefined' is not a function (evaluating 'product.getElementsByTagName('id')') 
```

如何迭代`<product>`元素中的每个元素`<products>`，并仅选择标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:34:35.963

您的问题标题不代表问题。A`NodeList`可以像数组一样被迭代：

```
for(var i = 0; i < products.length; i++) {
  var product = products[i];
  // ...
} 
```

你在做一个`for in`循环。`product`then 指的`0`是`1`没有`getElementsByTagName`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:34:20.747

For in 迭代索引。你要

```
products[product].getElementByTagName('id') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T08:35:12.300

`for(product in products)`：

*   遍历对象的所有可枚举属性，而不仅仅是属性名称为数字的那些
*   为您提供属性名称，而不是值

这段代码：

```
var products = document.getElementsByTagName('body');
for(product in products) { console.log(product); } 
```

给出：

```
0
length
item 
```

如果要循环遍历元素，则需要使用常规`for`循环。

```
for (var i = 0; i < products.length; i++) {
    var product = products[i];
    // do something with product
} 
```

# android - 在 Android 的同一个列表视图项中可以有不同颜色的文本句子吗？

> ID：12034444
> 
> 赞同：0
> 
> 时间：2012-08-20T08:29:38.503
> 
> 标签：android

例如，看这句话：

> “我必须在 A4 路口上车，在 B2 路口下车”。

在这里我想改变颜色

> 《A4路口上车》

蓝进和

> “B2 路口下车”

和其他词在同一个列表视图项中变为白色。谁能给我这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:36:35.410

使用 Html.fromHtml

```
textview.setText(Html.fromHtml("your html") ); 
```

了解颜色的基本 html。

# jquery - jqtouch...从哪里开始

> ID：12034447
> 
> 赞同：0
> 
> 时间：2012-08-20T08:30:01.440
> 
> 标签：jquery, jqtouch

我正在寻找一个关于 JQTouch 的像样的文档，但我找不到任何结构化的东西。你能帮助我吗？

首先我使用标签`<li>`，*箭头*类。当有人向左滑动时，我需要隐藏箭头。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:08:56.980

我从这本书中学到了很多：

[http://ofps.oreilly.com/titles/9780596805784/](http://ofps.oreilly.com/titles/9780596805784/)

这是免费版本，但他们也发布了它，并且还有一个 iPhone 应用程序版本。好书 IMO 的价格。

# c# - Monodroid WebView 加载 SSL 页面

> ID：12034452
> 
> 赞同：1
> 
> 时间：2012-08-20T08:30:34.063
> 
> 标签：c#, ssl, webview, xamarin.android

我尝试使用 SSL 页面加载 WebView，但出现错误。下面的代码和错误。我已将权限设置为允许访问 Internet。

我认为这是一个仅限 Mono 的问题。当我在默认浏览器中尝试我的 SSL 网页时，它工作正常。

```
WebView webView = new WebView(this);
string website = "https://...";
webView.Settings.JavaScriptEnabled = true;
webView.SetWebViewClient(new WebViewClientAuthentication());
webView.LoadUrl(website);

//definition for WebViewClientAuthentication
public class WebViewClientAuthentication : WebViewClient
{
    public override void OnReceivedSslError(WebView view, SslErrorHandler handler, Android.Net.Http.SslError error)
    {
        Log.Error("SSL ERROR",string.Format("SSL ERROR: {0}, Primary: {1}", error.GetType.ToString(), error.PrimaryError.ToString()));
        base.OnReceivedSslError(view, handler, error);
    }
} 
```

**输出** SSL 错误：Android.Net.Http.SslError，主要：Notyetvalid

**评论** 我看到了这条消息： http: [//mono-for-android.1047100.n5.nabble.com/SSL-issues-td5629485.html](http://mono-for-android.1047100.n5.nabble.com/SSL-issues-td5629485.html) - 但我不确定将 SSL 站点加载到 web 视图中的含义.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T16:11:13.587

试试这个：

```
//definition for WebViewClientAuthentication
public class WebViewClientAuthentication : WebViewClient
{
    public override void OnReceivedSslError(WebView view, SslErrorHandler handler, Android.Net.Http.SslError error)
    {
        handler.Proceed();
    }
} 
```

# sql-server-2008 - 在 SQL Server 2008 上启用全文搜索工具

> ID：12034453
> 
> 赞同：1
> 
> 时间：2012-08-20T08:30:35.593
> 
> 标签：sql-server-2008, full-text-search

我的计算机上安装了 SQL Server 2008 以及全文搜索工具。问题是全文搜索没有运行。当我转到计算机管理中的 SQL Server 服务时，我发现“SQL 全文过滤器守护程序启动器 (MSSQLSERVER)”以启动模式停止：其他（启动、系统、禁用或未知）。如果我右键单击“开始”，则显示为灰色。我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:38:02.547

如果您正在使用 SQL Server 的评估副本并且评估期已结束，则可能会发生此错误。

# javascript - 仅限 TinyMCE 源代码

> ID：12034454
> 
> 赞同：1
> 
> 时间：2012-08-20T08:30:43.097
> 
> 标签：javascript, tinymce

如何仅在源代码中使用 TinyMCE？TinyMCE 将任何数据转换为 HTML 并显示出来。我需要使用 BBCode 无需转换，仅源代码。我在谷歌上找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:04:49.060

我想您想使用 TinyMCE，例如 phpBB 发布表单。即单击**粗体**，它显示`[b]text[/b]`而不是粗体的格式化文本。

据我所知，您无法通过设置使用 TinyMCE 执行此操作。您将需要编写自己的函数。

```
tinyMCE.init({
    theme_advanced_buttons1 : "mybold",
    setup : function(ed) {
        ed.addButton('mybold', {
            title : 'bold',
            image : 'img/example.gif',
            onclick : function() {
                // Add you own code to execute something on click
                ed.focus();
                ed.selection.setContent("[b]" + ed.selection.getContent() + '[/b]');
            }
        });
    }
}); 
```

冷却两个或三个代码。如果您要为每个 bbcode 都这样做，那将是一个痛苦的屁股和长代码。

如果您不打算使用 TinyMCE 的任何优势，您最好编写自己的代码来操作`<textarea>`和避免加载 TinyMCE JS。它会更轻。

# c# - Asp.Net MVC3 项目控制器和视图不起作用

> ID：12034455
> 
> 赞同：0
> 
> 时间：2012-08-20T08:30:44.797
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2012

这是我大部分时间都面临的一个奇怪的问题。我正在创建一个网站，并且在项目的**控制器文件夹**中创建了一个文件夹，并且在该文件夹中创建了一个控制器。到目前为止一切正常。

然后我为此创建了一个视图（**不是手动**）我**什至可以从控制器导航到代码中的视图**（这是为了告诉控制器和视图在代码中正确映射）。但是当我运行该项目并转到该 URL 时，它不起作用。它给出了以下错误。虽然这是一个更普遍的错误，但我没有线索可以摆脱这种混乱。

但是之前创建的所有东西都运行良好。我什至尝试了一个默认控制器并为此创建了一个视图，然后运行该程序，它给出了同样的错误。

现在我不能创建新的控制器和视图（我可以但它们不工作）。我整天都在坚持这个:(。

我觉得缺少一些配置。但我找不到。因为我是新手，所以我完全迷路了。我不知道该怎么做。

我完全糊涂了，我不知道发生了什么。这是 Visual Studio 中的设置问题吗？我应该怎么做才能完成这项工作。

错误是这样的：

![在此处输入图像描述](../Images/804cb9ccecc37e58af34c94fa9991b56.png)

PS：我正在使用 Team Foundation 服务器，我什至无法进行调试。这些控制器方法不会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:41:34.200

查看[MVC 路由](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)并使用以下代码修改您的**Global.asax.cs ：**

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

# asp.net-mvc - 如何在 MVC WebGrid 中显示行号

> ID：12034460
> 
> 赞同：4
> 
> 时间：2012-08-20T08:31:19.610
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想`row number`在 MVC WebGrid 中有一个列。我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T08:48:36.110

这是一个非常好的方法，但是当您使用排序或分页时，您的`RowNumber`值不会从页面上的 1 开始。

在我的项目中，我有一个案例，我需要独立于 WebGrid 的分页/排序知道行的索引，我遇到了以下解决方案：

```
grid.Column(
    Header: "RowNumber",
    Format: item => item.WebGrid.Rows.IndexOf(item) + 1
) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T08:35:10.950

您可以使用包含指示行号的属性的视图模型。

假设您有以下域模型：

```
public class DomainModel
{
    public string Foo { get; set; }
} 
```

现在您构建了一个与您的视图要求相对应的视图模型：

```
public class MyViewModel
{
    public int RowNumber { get; set; }
    public string Foo { get; set; }
} 
```

接着：

```
public ActionResult Index()
{
    // fetch the domain model from somewhere
    var domain = Enumerable.Range(1, 5).Select(x => new DomainModel
    {
        Foo = "foo " + x
    });

    // now build the view model
    // TODO: use AutoMapper to perform this mapping
    var model = domain.Select((element, index) => new MyViewModel
    {
        RowNumber = index + 1,
        Foo = element.Foo
    });

    return View(model);
} 
```

现在，您的视图当然变成了视图模型的强类型：

```
@model IEnumerable<MyViewModel>

@{
    var grid = new WebGrid(Model);
}

@grid.GetHtml(
    columns: grid.Columns(
        grid.Column("RowNumber"),
        grid.Column("Foo")
    )
) 
```

现在让我们假设出于某种愚蠢的原因您不想使用视图模型。在这种情况下，如果您愿意，可以将您的视图变成意大利面条式代码：

```
@model IEnumerable<DomainModel>

@{
    var grid = new WebGrid(Model.Select((element, index) => new { element, index }));
}

@grid.GetHtml(
    columns: grid.Columns(
        grid.Column("RowNumber", format: item => item.index + 1),
        grid.Column("Foo", format: item => item.element.Foo)
    )
) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-04T14:58:14.603

只需添加以下代码

```
grid.Column(header: "No."
,format: item => item.WebGrid.Rows.IndexOf(item) + 1 
          + Math.Round(Convert.ToDouble(grid.TotalRowCount / grid.PageCount) / grid.RowsPerPage) 
            * grid.RowsPerPage * grid.PageIndex) 
```

[检查此链接](http://chevronscode.com/index.php/asp-net-mvc-4-razor-webgrid-auto-increase-row-number.html)以获取更多信息

希望这对某人有帮助

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-20T09:29:36.657

```
 @{
    int i=0;
foreach (var item in Model) {
    <tr>
    <td>
    @i
    </td>
        <td>
            @Html.DisplayFor(modelItem => item.Expense)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.Id }, new { onclick = "return confirm('Are you sure you wish to delete this record?');" })

        </td>
    </tr>
    i++;
}
} 
```

**尝试这个**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-01T12:56:59.223

添加这个：

```
grid.Column(header: "No.",
        format: item => item.WebGrid.Rows.IndexOf(item) + 1 + Math.Round(Convert.ToDouble(grid.TotalRowCount / grid.PageCount) / grid.RowsPerPage) * grid.RowsPerPage * grid.PageIndex) 
```

# c# - 将 DataTable 作为 ObjectDataSource 的 SelectParameters 传递

> ID：12034465
> 
> 赞同：0
> 
> 时间：2012-08-20T08:31:44.343
> 
> 标签：c#, asp.net, objectdatasource

是否有任何程序将 DataTable 作为 SelectParameter 传递给 ObjectDataSource。

我想实现这一点，因为数据控件（listview）的数据源每次都会根据下拉列表中的选定值或文本框中发生的文本更改事件而更改。

我以编程方式将 ObjectDataSource 绑定到 DataControl。喜欢

```
DataTable dt=new DataTable();
dt=BL.getSelectedValues(ddlFoo.SelectedItem.Value);
ods.SelectParameters.Add("dataTable",dt); 
```

任何替代建议也将是有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:41:25.680

您可以将 配置`ObjectDataSource`到您的`Business`对象。

```
public class TestSource
{
   public DataTable GetTestSource()
    {
      .....
      return dataTableObject;
     }
} 
```

和标记，

```
 <asp:ObjectDataSource ID="ObjectDataSource1" 
                       runat="server"
                       SelectMethod="GetTestSource" 
                       TypeName="TestSource">
 </asp:ObjectDataSource> 
```

或者动态填充 ObjectDataSource，

```
ObjectDataSource ds = new ObjectDataSource();
ds.TypeName = "TestSource";
ds.SelectMethod = "GetTestSource";
GridView1.DataSource = ds;
GridView1.DataBind(); 
```

# android - ViewFlipper 高度问题

> ID：12034467
> 
> 赞同：3
> 
> 时间：2012-08-20T08:31:54.537
> 
> 标签：android, layout, viewflipper

在下面的代码中，`viewflipper`它并没有占据整个屏幕，它只是环绕在`textview`. 为什么会这样？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView  
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#0000ff" >

        <ViewFlipper android:id="@+id/ViewFlipper01"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#aa0000"
            android:layout_gravity="center">  

            <TextView
                android:layout_width="match_parent"
                android:layout_height="50dp"></TextView>

        </ViewFlipper>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:59:41.233

在滚动视图中使用

`android:fillViewport="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:32:01.800

```
<ScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#0000ff" >

<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ViewFlipper android:id="@+id/ViewFlipper01"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#aa0000"
        android:layout_gravity="center">  

        <TextView
            android:layout_width="match_parent"
            android:layout_height="50dp">
        </TextView>

</ViewFlipper>
</LinearLayout>
</ScrollView> 
```

这会奏效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T10:32:00.277

为什么要增加 View Flippers 的高度？视图翻转器取决于您在其中添加的内容或视图。因此，视图翻转器的高度和宽度将始终等于您提供给视图的最大高度/宽度。在您的情况下，它的文本视图因此如果您增加当前视图的高度或添加另一个高度大于当前视图翻转器的 textView 将会增加。

# c# - 连接字符串内的隔离级别

> ID：12034469
> 
> 赞同：1
> 
> 时间：2012-08-20T08:32:13.180
> 
> 标签：c#, sqlite, nhibernate

我正在为我的测试项目使用 sqllite db。

当我在事务中使用 IsolationLevel 时，一切运行完美

```
using (ITransaction transaction = session.BeginTransaction(IsolationLevel.ReadCommitted)) 
```

但我不想`IsolationLevel.ReadCommitted`在我的交易中硬编码我想放在我的连接字符串中，我试过这个

```
<add name="ConnectionString" connectionString="Data Source=...;ISOLATION LEVEL=IsolationLevel.ReadCommitted"/> 
```

但错误仍然与消息`"The database is locked !"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:36:24.443

没有用于此的连接字符串选项（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)）。在事务中指定 if （根据您的第一个示例），或[`SET TRANSACTION ISOLATION LEVEL`](http://msdn.microsoft.com/en-us/library/ms173763.aspx)在打开连接后发出语句。作为一个侧面观察：请注意，对于从池中重用的连接，隔离级别**不会重置；**这让我发疯......所以你可能想明确地设置隔离级别，以确保它是你所期望的，而不仅仅是*底层*连接使用的最后一个命令（即使是新的`SqlConnection`）正在使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:20:39.440

为什么不加

```
<add key="hibernate.connection.isolation" value="ReadCommitted" /> 
```

在你的休眠配置部分？

# c++ - C++继承：不调用派生类的虚方法

> ID：12034474
> 
> 赞同：0
> 
> 时间：2012-08-20T08:32:58.960
> 
> 标签：c++, inheritance

> **可能重复：**
> [在 std::vector 中存储两个具有相同基类的类](https://stackoverflow.com/questions/8777724/store-two-classes-with-the-same-base-class-in-a-stdvector)

我在 C++ 中遇到继承问题。这里我写了一个简单的代码来说明我的问题：

```
//Animal.h
class Animal
{
public:

Animal();
~Animal();

virtual const void Eat();
};

//Bear.h
class Bear: public Animal
{
public:

Animal();
~Animal();

virtual const void Eat();
};

//Animal.cpp
const void Animal::Eat() {
}

//Bear.cpp
const void Animal::Eat() {
 //Do something
} 
```

现在，在另一个类中，我声明了一个应该容纳动物的向量，然后创建一个`Bear`并将其推入我的向量中：

```
std::vector<Animal> a;
Bear b;
a.push_back(b); 
```

现在的问题是，当我遍历我的动物向量并尝试调用`Eat()`时，会调用基类（动物）的 Eat 方法，但不会调用该`Bear` `Eat`方法。

即使尝试`dynamic_cast it`也不起作用：`dynamic_cast`失败

```
dynamic_cast<Bear*>(&a.at(0)); 
```

我究竟做错了什么？是因为我缺少复制构造函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:34:19.397

您必须创建一个包含动物（智能）指针的向量。

对象向量受到**对象切片**的影响。

我假设`void Animal::Eat()`in`Bear.cpp`是一个错字，否则您的代码将无法编译。

还有，`const void`？你想确保你不修改任何东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:44:47.367

You need two things to enable polymorphism: virtual functions and pointers. You don't have pointers. Your `std::vector` must be a vector of `Animal*` (or std::unique_ptr in C++11), not `Animal`.

```
std::vector<Animal*> a;
Bear b;
a.push_back(b);
a[0] -> eat(); 
```

Then, your bear function `eat()` is with `Animal::`. Correct it.

In addiction, also the destructor must be virtual: destructors calls must be polymorphic as well.

# graph - Open Graph 对象国际化：没有刮擦/缺少参数 fb_locale

> ID：12034475
> 
> 赞同：13
> 
> 时间：2012-08-20T08:33:01.537
> 
> 标签：graph, localization, internationalization, facebook-opengraph

我在开放图形对象的国际化方面遇到问题。我提供了 og:locale 和 og:locale:alternate 标签，但 Facebook 不会在不同的语言环境中抓取我的对象。在[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)的对象调试器中，我可以看到 og:locale:alternate 被解析，并将它们显示为一个数组。但是单击其中一个会导致没有任何参数的刮擦。既不提供 fb_locale 也不提供 locale 和标头 X-Facebook-Locale。

这是示例对象之一：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta property="og:locale" content="en_US">
<meta property="og:locale:alternate" content="de_DE">
<meta property="og:locale:alternate" content="en_US">
<meta property="og:locale:alternate" content="fr_FR">
<meta property="fb:app_id" content="181576101937079">
<meta property="og:type" content="APP_NAMESPACE:level">
<meta property="og:url" content="http://apps.facebook.com/APP_NAMESPACE/?ogObjType=level&amp;ogObjId=0_0&amp;ogObjVariant=">
<meta property="og:title" content="Tree House Level 1">
<meta property="og:description" content="">
<meta property="og:determiner" content="the">
<meta property="og:image" content="https://URLTOIMAGE">
</head>
<body>
...
</body>
</html> 
```

当我手动添加 fb_locale=de_DE 时，它会返回。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta property="og:locale" content="de_DE">
<meta property="og:locale:alternate" content="de_DE">
<meta property="og:locale:alternate" content="en_US">
<meta property="og:locale:alternate" content="fr_FR">
<meta property="fb:app_id" content="181576101937079">
<meta property="og:type" content="APP_NAMESPACE:level">
<meta property="og:url" content="http://apps.facebook.com/APP_NAMESPACE/?ogObjType=level&amp;ogObjId=0_0&amp;ogObjVariant=">
<meta property="og:title" content="Baumhaus Level 1">
<meta property="og:description" content="">
<meta property="og:determiner" content="the">
<meta property="og:image" content="https://URLTOIMAGE">
</head>
<body>
...
</body>
</html> 
```

谁能说出为什么 Facebook 不抓取我的对象的本地化版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T16:08:03.197

尝试使用小写的语言环境 en_us 而不是 en_US。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:27:22.680

我有同样的问题。OG标签：

```
<meta property="og:locale" content="en_US" />
<meta property="og:locale:alternate" content="en_GB" />
<meta property="og:locale:alternate" content="fr_FR" />
<meta property="og:locale:alternate" content="ru_RU" /> 
```

如果我这样做了

```
curl -X POST -F "id=http://gorokhovsky.nampohui.ru" -F "scrape=true" -F "locale=en_GB" "https://graph.facebook.com" 
```

或 locale=en_US

我的服务器收到了来自 FB 的请求，我收到了正确的答案。

```
{"url":"http:\/\/gorokhovsky.nampohui.ru\/","type":"website","title":"Surfingbird - your personal web!","locale":{"locale":"en_us","alternate":["en_gb","ru_ru","fr_fr"]},"image":[{"url":"http:\/\/surfingbird.ru\/img\/logo-mailru2.gif?v=1"}],"description":"We pick interesting websites, photos and videos that you\u2019ll like.","site_name":"Surfingbird.ru","updated_time":"2013-02-27T15:04:20+0000","id":"356024197844717","application":{"id":"179736405468568","name":"Gorokhovsky2","url":"http:\/\/www.facebook.com\/apps\/application.php?id=179736405468568"}} 
```

但是如果我设置 locale=fr_FR 或 ru_RU，我会收到

```
"error":{"message":"Unsupported post request.","type":"GraphMethodException","code":100} 
```

我的服务器没有收到来自 FB 的请求

如果我设置 locale=ru_ru 或 fr_fr，它就像 locale=en_US

我认为 FB 不正确地使用区域设置字符的大小写

# android - 如何使用 adb socket 从手机中获取结果？

> ID：12034476
> 
> 赞同：1
> 
> 时间：2012-08-20T08:33:10.703
> 
> 标签：android, adb

我已经编写了一个可执行文件，并将其推送到 /system/bin。

运行文件后，它会给出一个浮点数的结果。

现在在PC端，我想得到这个结果。

首先我将这个浮点数写入一个文件并使用'adb pull'来拉这个文件，然后读取文件。因为我需要经常做这个操作，可能每秒2次。这会导致手机性能不佳。

使用 adb socket 会不会影响不大？我的可执行文件应该在哪里输出？adb socket如何得到结果？

谢谢。詹姆士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:40:42.703

如果你让电话保持连接，你可能只是这样做

```
adb shell /system/bin/myexecutable 
```

并让您的二进制文件将其输出打印到标准输出。只要你的程序运行得很快，每秒两次不应该太快。否则，你可以做

```
adb shell cat /somewhere/myoutfile 
```

查看当前文件中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:50:01.120

如果有可用的 ADB 连接，您可能会`logcat`用作将数据从 Android 应用程序获取到桌面计算机的媒介。

我的想法是有两个部分：

1.  使用 logcat 将您的应用程序输出记录到 Android 端的唯一 TAG。例如，

    ```
    Log.d("MyAppOutput", "This is the output I am looking for"); 
    ```

2.  在桌面端，您可以运行专门针对该 TAG 的命令行，例如：

    ```
    adb logcat -s MyAppOutput 
    ```

我相信这将使您能够近乎实时地从 Android 应用程序中读取结果。如果您需要知道日志消息的时间戳，可以添加`-v time`参数为每条消息添加时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-05T00:53:51.747

我之前也有同样的问题，您不需要将结果输出到文件，只需将结果输出到套接字端口，然后使用 adb forward 通过 adb 套接字在您的 pc 上获取结果。这就是您需要的解决方案。

adb 转发 tcp:18000 tcp:19000

这条命令的意思是，pc 的 tcp 端口 18000 绑定到设备的 tcp 端口 19000，如果你向 pc 的 18000 端口发送数据，你可以从设备的 19000 获取数据。反之亦然。

# c++ - 从进程空间释放内存

> ID：12034477
> 
> 赞同：1
> 
> 时间：2012-08-20T08:33:19.337
> 
> 标签：c++

以下是代码：

```
class x
{
    int k;
};
int main()
{
    x *p=new x[1000000];
    return 0;// can be  1 too
} 
```

现在的问题是当我们退出主函数时，分配的内存是由编译器调用析构函数释放的，还是由操作系统释放的，因为进程将不再存在。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:35:47.680

不会调用析构函数，但任何体面的操作系统都会回收已失效进程的所有资源。然而，该标准对实施没有这样的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:36:13.870

除非您也告诉它，否则 C++ 不会释放任何内存。我不太熟悉退出在 C++ 中的工作方式，但我很确定是操作系统在这里释放了所有内存。如果您调用 exit() 函数，C++ 可能会为您清理工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:53:06.550

内存未被释放（由编译器）：不会调用析构函数。每个`new`（或`new []`）都必须有一个对应的`delete`（或`delete []`）：C++ 让您管理内存，您必须注意这一点！顺便说一句，当您的程序完成运行时，操作系统会回收资源（因此系统会释放使用的内存）。

```
A* a = new A; 
delete a; 
```

被编译器解释为

```
// assuming new throws std::bad_alloc upon failure
A* a = ::operator new(sizeof(A)); 
a->A::A();
if ( a != 0 ) {  // a check is necessary for delete
    a->~A(); // DESTRUCTOR IS CALLED BY THE DELETE OPERATOR
    ::operator delete(a);
} 
```

（来源： http: [//www.codeproject.com/Articles/4795/C-Standard-Allocator-An-Introduction-and-Implement](http://www.codeproject.com/Articles/4795/C-Standard-Allocator-An-Introduction-and-Implement)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:37:31.363

作为开发人员，您确实应该为此承担责任。最好使用智能指针。除此之外，一旦程序终止，操作系统应该为您整理。c++ 语言本身不会回收您分配的内存。

# javascript - Javascript在提交前检查表单字段值

> ID：12034479
> 
> 赞同：0
> 
> 时间：2012-08-20T08:33:27.253
> 
> 标签：javascript, ajax, xmlhttprequest

我的网站上有一个搜索框，用于搜索书籍数据库。向用户显示以下选项：

*   搜索查询（文本输入字段）
*   在哪里搜索（带有选项的选择字段：当前、存档或全部）
*   要搜索的内容（带有选项的选择字段：标题、作者、所有者或读者）

当用户在搜索字段中输入输入内容时，会弹出下面的书名建议，就像您搜索时谷歌一样。我想知道如何检查他们选择搜索的选项（即标题、作者等）并相应地显示建议。

我使用的当前代码如下：

### HTML

```
 <form method='get' action='/main'>
     <label for='search'>Search</label>
     <div style='position:relative;display:inline;'>
      <input type='text' id='search' name='search' onkeyup='showHint(this.value)' autocomplete='off'/>
      <div style='display:inline;' id='txtHint'></div>
     </div>
     <select name='searchIn'>
      <option name='searchIn' id='searchIn' value='current' selected>Current</option>
      <option name='searchIn' id='searchIn' value='archive'>Archive</option>
      <option name='searchIn' id='searchIn' value='all'>All</option>
     </select>
     <select name='searchBy' onChange='getSearchBy(this.value)'>
      <option name='searchBy' id='searchBy' value='Title' selected>By Title</option>
      <option name='searchBy' id='searchBy' value='Author'>By Author</option>
      <option name='searchBy' id='searchBy' value='Owner'>By Owner</option>
      <option name='searchBy' id='searchBy' value='Reader'>By Reader</option>
     </select>
     <input type='submit' class='submit' value='Submit'/>
    </form> 
```

### AJAX/Javascript

```
 function getSearchBy(val){
   return val;
  }
  function showHint(str){
   var xmlhttp;
   if (str.length==0){ 
    document.getElementById('txtHint').innerHTML='';
    return;
   }
   if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
   }
   else{// code for IE6, IE5
    xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
   }
   xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
     document.getElementById('txtHint').innerHTML=xmlhttp.responseText;
    }
   }
   var searchBy = getSearchBy(document.getElementById('searchBy').value);
   xmlhttp.open('GET','get_hint.php?q='+str+'&searchBy='+searchBy,true);
   xmlhttp.send();
  } 
```

文件“get_hint.php”完成所有处理和查询数据库，并将结果作为 txtHint 元素的 innerHTML 返回...

选择“作者”选项后，getSearchBy 函数似乎没有返回“作者”，有什么想法吗？

## 更新

我知道其中许多答案可能是正确的，但我将最快到达的答案标记为正确的。感谢大家的快速回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:41:30.767

这一行的问题。

```
document.getElementById('searchBy').value 
```

您正在搜索 id 为“searchBy”的元素。但元素名称是 searchBy 而不是 id。所以请为选择元素添加一个 id='searchBy' 。并从选项中删除 id='searchBy'。

```
<select name='searchBy' id='searchBy' onChange='getSearchBy(this.value)'>
      <option  value='Title' selected>By Title</option>
      <option  value='Author'>By Author</option>
      <option  value='Owner'>By Owner</option>
      <option  value='Reader'>By Reader</option>
     </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:36:42.033

您正在使用选择/选项并希望检索所选选项的值。那还没有在你的js中。你应该这样做：

```
document.getElementById("input[name='searchBy']").value; 
```

（尚未测试）

或者更动态地，在变化时：

```
$("input[name='searchBy']").change(function(){
if($(this).is(':selected')){ 
///do something
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:48:13.840

**您的 HTML 代码中有多个具有相同 id 属性的项目。** 如果您将标记更改为：

```
<form method='get' action='/main'>
 <label for='search'>Search</label>
 <div style='position:relative;display:inline;'>
  <input type='text' id='search' name='search' autocomplete='off'/>
  <div style='display:inline;' id='txtHint'></div>
 </div>
 <select id='searchIn' name='searchIn'>
  <option value='current' selected>Current</option>
  <option value='archive'>Archive</option>
  <option value='all'>All</option>
 </select>
 <select id='searchBy' name='searchBy'>
  <option value='Title' selected>By Title</option>
  <option value='Author'>By Author</option>
  <option value='Owner'>By Owner</option>
  <option value='Reader'>By Reader</option>
 </select>
 <input type='submit' class='submit' value='Submit'/>
</form> 
```

并使用 jQuery 解决问题：

```
var searchField = $("#search")
    .on("keyup", function(){
        $.get('get_hint.php', 
            {
                "q": searchField.val(),
                "searchBy": $("#searchBy").val()
            }, 
            function(data){
                $("#txtHint").html(data);
            });     
    }); 
```

（问题以 jQuery 开头，所以我假设您已经将它包含在您的项目中）

# c# - c# .net 表单错误“变量”，但用作“方法”

> ID：12034480
> 
> 赞同：0
> 
> 时间：2012-08-20T08:33:50.460
> 
> 标签：c#, windows, forms

我对 .NET 框架中的 C# 编码比较陌生。我正在使用 Visual Studios 10。我觉得这是一个简单的问题，但是无论我尝试使用可见性，它都行不通。这是错误最少的“尝试”。我想将这些类与 Windows 应用程序表单代码分开。也许这就是为什么它不能正常工作的原因，因为当我第一次运行一个（凌乱的）Windows 应用程序表单代码时，它工作了。现在把它分成一个更整洁的包，它不会。请看一下代码并告诉我我忽略了什么。我已经搜索了当然以及谷歌搜索的问题，但问题是这个错误主要与数组有关。对我来说不是。

这是错误：

“adm_LogOn”是一个“变量”，但用作“方法”DemoTestEditor\DemoTestEditor\Form1.cs

```
 private void buttonAdmLogOn_Click(object sender, EventArgs e)
    {
        //  The console commands (above and below Writes to the Output. 
        //  Messagebox also works but I think it's too "in your face"

        Console.WriteLine("Admin Log On Button pressed.");

        AdminClasses adm_LogOn = new AdminClasses(); // Creates a new object instance myALogOn

        this.admTicket = adm_LogOn(userName.Text, passWord.Text);
        if (this.admTicket != null)
        {
            Console.WriteLine("Got Ticket: " + this.admTicket);
            this.buttonAdmLogOn.Enabled = true;
            this.buttonAdmLogOff.Enabled = false;
        }
    } 
```

这是它在单独的 Admin.classes.cs 代码中调用的类。

```
 public string adm_LogOn(string username, string password)
    {
        // Initialize a (new object) adm service to work with.
        SmartConnectionAdmin.SmartConnectionAdminService adm = new SmartConnectionAdmin.SmartConnectionAdminService();

        // Setting up the arguments for the webservice (LogOnRequest) parameters
        string ticket = null;
        string server = null;
        string clientName = "C# Client Suus";
        string domain = null;
        string clientAppName = "C# Tester Suus";
        string clientAppVersion = null;
        string clientAppSerial = null;
        string clientAppCode = null;

        try
        {
            // Place call with the above arguments
            adm.LogOn(username, password, ref ticket, server, clientName, domain, clientAppName, clientAppVersion, clientAppSerial, clientAppCode);

            // Displays the retrieved ticket
            Console.WriteLine("The following ticket has been received: {0}", ticket);

        }
        catch (Exception e)
        {
            MessageBox.Show("Error: " + e.Message, "Oops!", MessageBoxButtons.OK, MessageBoxIcon.Error);

        } 

        Console.WriteLine("UserName checked.");

        return ticket;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:36:13.790

`public string adm_LogOn(string username, string password)`不是一个类定义，它是一个方法（在一个类中）。如果周围的对象不存在，您将需要创建它，然后您可以从该类的实例中调用此方法。

如果此方法在您当前使用的类中，则只需调用该方法即可，即您可以删除此行：

```
AdminClasses adm_LogOn = new AdminClasses(); 
```

* * *

您需要做的就是将其更改为：

```
AdminClasses admClass = new AdminClasses(); // Creates a new object instance myALogOn 

this.admTicket = admClass.adm_LogOn(userName.Text, passWord.Text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:38:08.790

既然`adm_LogOn`是类中的一个方法`AdminClasses`，你应该在它的一个实例上使用它：

```
AdminClasses adm = new AdminClasses(); 
this.admTicket = adm.adm_LogOn(userName.Text, passWord.Text); 
```

请注意，我已将变量重命名`adm_LogOn`为`adm`，您使用的变量名称与方法相同。这行得通，但不是好的做法，因为它令人困惑并且容易出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:37:36.717

您在这里收到此错误

```
AdminClasses adm_LogOn = new AdminClasses(); // Creates a new object instance myALogOn

this.admTicket = adm_LogOn(userName.Text, passWord.Text); 
```

因为`adm_LogOn`是一个对象实例（变量），但您像方法一样调用它。

最好是对象名称和类中的方法应该不同。

```
AdminClasses adm = new AdminClasses(); // Creates a new object instance myALogOn

this.admTicket = adm.adm_LogOn(userName.Text, passWord.Text); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T08:38:34.893

```
AdminClasses adm_LogOn = new AdminClasses(); // Creates a new object instance myALogOn 
this.admTicket = adm_LogOn(userName.Text, passWord.Text); 
```

这就是问题所在。类`AdminClasses`包含`adm_LogOn`方法。你需要这样称呼它：

```
this.admTicket = adm_LogOn.adm_LogOn(userName.Text, passWord.Text); 
```

为了让事情更清楚：

```
AdminClasses adm = new AdminClasses(); // Creates a new object instance myALogOn 
this.admTicket = adm.adm_LogOn(userName.Text, passWord.Text); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T08:42:53.727

```
AdminClasses adm_LogOn = new AdminClasses();
myALogOn   this.admTicket = adm_LogOn(userName.Text, passWord.Text); 
```

假设 adm_logon 是 AdminClasses 的一个函数

第二行应该是

```
this.admTicket = adm_logon.adm_LogOn(userName.Text, passWord.Text); 
```

你真的需要对你的变量类和方法名做点什么。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-20T08:36:59.143

```
 this.admTicket = adm_LogOn(userName.Text, passWord.Text); 
```

这是问题线。您正在尝试运行一个不存在的方法。您正在调用的那个类中是否有一个子方法，或者它是一个构造函数（在这种情况下，它已在上面的行中运行）？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-20T08:38:51.237

你可能想写：

```
AdminClasses adm = new AdminClasses(); 
this.admTicket = adm.LogOn(userName.Text, passWord.Text); 
```

小心复制/粘贴。问题可能是由它引起的。

# azure - 在 Azure 媒体服务中编码时直接来自相机错误的 MOV 文件

> ID：12034482
> 
> 赞同：2
> 
> 时间：2012-08-20T08:33:57.447
> 
> 标签：azure

我正在尝试上传和转换一个 MOV 文件（GSpot 说它是 Motion JPEG 视频编解码器），就像它离开相机（Panasonic LX3）一样，但是我在编码作业中收到以下错误：

nb:jid:UUID:f3855e24-5993-6d4c-a1c6-12079b73fb04 我的编码作业错误 8/19/2012 11:22:13 PM 00:00:12.4880000

我的编码任务错误

必须安装 Apple QuickTime 才能播放 Apple Quicktime 文件。

我可以做点什么吗？我必须建立一个网站，用户将上传他们的电影，这种 MOV 格式应该很常见，因为它直接来自相机。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:22:50.350

目前 MOV 似乎不是有效的导入格式。您可以在此处查看整个列表：[媒体编码器导入格式](http://msdn.microsoft.com/en-us/library/hh973634)。请注意，Windows Azure 媒体服务仍处于预览阶段，支持的格式列表可能会在产品的最终版本中发生变化。

# mongodb - Mongo索引详细

> ID：12034491
> 
> 赞同：1
> 
> 时间：2012-08-20T08:34:39.567
> 
> 标签：mongodb, mongodb-indexes

我有 mongo db 集合，如下所示

```
collection {
   X: 1,
   Y: 2,
   Z: 3,
   T_update: 123,
   T_publish: 243,
   T_insert: 342
} 
```

我必须创建一个索引

```
{X: 1, Y: 1, Z: 1, T_update: 1}
{X: 1, Y: 1, Z: 1, T_publish: 1}
{X: 1, Y: 1, Z: 1, T_insert: 1} 
```

但我看到的是值 X: 1, Y:1, Z:1 将导致冗余，并且我打算用于排序的唯一时间参数正在改变。有没有更好的方法来创建上述索引，这样我就不必创建三个单独的索引。

还说如果我有索引

```
{X: 1, Y: 1, Z: 1, T_update: 1} 
```

我希望 Mongo 返回结果，使得 x = 5，y = 任何值，Z = 4，sort = T_update 上述索引是否有用，或者我应该创建一个索引，例如

```
{X:1, Z:1, T_update: 1}, 
```

我希望我能避免它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:45:17.237

这里的答案将取决于您要索引的字段的选择性 - 如果您将用于过滤 X、Y 或 Z 的标准不是很有选择性，那么它们基本上可以被忽略（或移动到复合键）。

假设您正在使用 Y 不等于 1 之类的过滤器，其中 1 是一个稀有值。由于您将遍历几乎整个索引以返回大部分值，并扫描数据，因此在 Y 上建立索引将比首先为排序建立索引带来的好处少。鉴于这种情况，如果在 T_Update 上进行排序，那么拥有如下索引可能是有益的：`{T_update: 1, Y : 1}`。

最后，就可能是最有效的索引方式而言，这里有很多排列。为数据集找出最佳索引的真正方法是使用[explain()](http://www.mongodb.org/display/DOCS/Explain)和[hint()](http://www.mongodb.org/display/DOCS/Optimization#Optimization-Hint)来测试具有特定查询模式和数据集的各种索引。

# mysql - 具有上一个和下一个值的 MySQL 查询

> ID：12034493
> 
> 赞同：1
> 
> 时间：2012-08-20T08:34:42.957
> 
> 标签：mysql, request, cumulative-sum

我有一个表、open_price、close_price 和利润列。我需要获得 4 列（余额），其中余额值将等于前一个余额行值 + 当前行利润。请在下面查看我的描述：

```
open_date                   close_date          profit  
2012-08-14 12:02:46     2012-08-14 14:39:38     14.50   
2012-08-14 14:43:08     2012-08-14 15:41:58     -14.50  
2012-08-14 15:41:58     2012-08-14 16:09:15     -29.00  
2012-08-14 16:09:15     2012-08-14 16:15:04     1.20    
2012-08-14 16:26:19     2012-08-14 16:40:37     14.50   
2012-08-15 08:25:56     2012-08-15 08:37:37     -1.20   
2012-08-15 09:06:26     2012-08-15 12:57:26     -14.50  
2012-08-15 12:57:26     2012-08-15 13:08:43     29.00   
2012-08-15 13:15:06     2012-08-15 13:20:20     14.50   
2012-08-15 13:22:15     2012-08-15 15:23:10     -5.40 
```

我有一个请求并获得新表：

```
SELECT open_date, close_date, profit, ( 1000 + profit ) AS balance
FROM users_signals
ORDER BY open_date ASC
LIMIT 0 , 30

open_date Ascending     close_date          profit  balance
2012-08-14 12:02:46     2012-08-14 14:39:38     14.50   1014.50
2012-08-14 14:43:08     2012-08-14 15:41:58     -14.50  985.50
2012-08-14 15:41:58     2012-08-14 16:09:15     -29.00  971.00
2012-08-14 16:09:15     2012-08-14 16:15:04     1.20    1001.20
2012-08-14 16:26:19     2012-08-14 16:40:37     14.50   1014.50
2012-08-15 08:25:56     2012-08-15 08:37:37     -1.20   998.80
2012-08-15 09:06:26     2012-08-15 12:57:26     -14.50  985.50
2012-08-15 12:57:26     2012-08-15 13:08:43     29.00   1029.00
2012-08-15 13:15:06     2012-08-15 13:20:20     14.50   1014.50
2012-08-15 13:22:15     2012-08-15 15:23:10     -5.40   994.60 
```

我怎样才能得到这张桌子：

```
open_date Ascending     close_date          profit  balance
2012-08-14 12:02:46     2012-08-14 14:39:38     14.50   1014.50
2012-08-14 14:43:08     2012-08-14 15:41:58     -14.50  1000     //1014.50+-14.50
2012-08-14 15:41:58     2012-08-14 16:09:15     -29.00  971.00   //1000+-29.00 
2012-08-14 16:09:15     2012-08-14 16:15:04     1.20    972.20   //971.00+1.20
2012-08-14 16:26:19     2012-08-14 16:40:37     14.50   986.70   //972.20+14.50
2012-08-15 08:25:56     2012-08-15 08:37:37     -1.20   985.50   //986.70+-1.20 
2012-08-15 09:06:26     2012-08-15 12:57:26     -14.50  971.00   //985.5+-14.50  
2012-08-15 12:57:26     2012-08-15 13:08:43     29.00   1000.00  //971.00+29.00 
2012-08-15 13:15:06     2012-08-15 13:20:20     14.50   1014.50  //1000.00+14.50
2012-08-15 13:22:15     2012-08-15 15:23:10     -5.40   1009.1   //1014.50-5.40 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:15:55.133

以下将起作用::

```
SET @bal=1000;
SELECT open_date, close_date, profit,@bal := @bal+profit AS balance
FROM users_signals
ORDER BY open_date ASC
LIMIT 0 , 30 
```

这将不断更新@bal

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:50:31.273

使用这样的子查询：

```
SELECT open_date, close_date, profit, 
    (1000 + (SELECT SUM(us.profit) 
             FROM user_signals us 
             WHERE us.open_date <= users_signals.open_date)) AS balance
FROM users_signals
ORDER BY open_date ASC
LIMIT 0 , 30 
```

# regex - 如何获取这两个 em 标签之间的所有内容？

> ID：12034494
> 
> 赞同：1
> 
> 时间：2012-08-20T08:34:43.767
> 
> 标签：regex, coldfusion, html-parsing, coldfusion-8

我想在 em 标签之间获取字符串，也包括其他 html。

例如：

```
<em>UNIVERSALPOSTAL UNION - International Bureau Circular<br />
By: K.J.S. McKeown</em> 
```

输出应为：

```
UNIVERSALPOSTAL UNION - International Bureau Circular<br />
    By: K.J.S. McKeown 
```

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:51:11.813

像这样使用正则表达式函数：

```
REMatch("(?s)<em>.*?</em>", html) 
```

另请参阅： http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content= [regexp_01.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=regexp_01.html)

*   (?s) 将模式设置为单行，以便输入文本即使包含换行符也会被解释为一行。~~这可能是默认值（我不确定），因此可以省略。~~正如彼得在评论中指出的那样，这不是默认设置，因此必须设置。

*   匹配和之间的`.*?`所有字符。乘数后面的问号使其“非贪婪”，以便匹配尽可能少的字符。如果输入 html 包含类似的内容，则需要这样做，否则只考虑最外层的标签。`<em>``</em>``<em>foo</em><em>bar</em>``<em></em>`

*   返回的数组包含找到的所有匹配项，即所有文本，包括`<em>`标签中的 html。

请注意，这可能会在以下情况下失败：`</em>`也作为属性文本出现并且不正确地未进行 html 编码，例如：`<em><a title="Help for </em> tag">click</a></em>`或在其他罕见的情况下（例如 javascript 脚本标签等）。正则表达式无法替代完整的 HTML/XML 解析器，如果您需要 100% 的准确性，您应该考虑使用一个： http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_t- [z_23。 html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_t-z_23.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:59:14.840

如果您的输入完全符合上面给出的格式，您甚至不需要正则表达式 - 只需剥离外部标签：

```
<cfsavecontent variable="Input">[text from above]</cfsavecontent>

<cfset Output = mid( Input, 4 , len(Input) - 9 /> 
```

如果您的输入不止于此（即一段重要的 HTML 或完整的 HTML 文档），正则表达式仍然不是理想的工具 - 相反，**您应该使用 HTML 解析器**，例如[JSoup](http://jsoup.org)：

```
<cfset jsoup = createObject('java','org.jsoup.Jsoup') />

<cfset Output = jsoup.parse(Input).select('em').html() /> 
```

（对于 CF8，此代码需要将 jsoup JAR 文件放在 CF 的 lib 目录中，或者使用[JavaLoader](http://javaloader.riaforge.org/)等工具。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:24:32.970

如果你使用 jquery，你也可以很容易地做到这一点。

```
$("em").html(); 
```

将返回 em 标签之间的所有 html。

看到这个[小提琴](http://jsfiddle.net/PE2bd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T11:23:35.250

我必须删除特定标签之后的任何文本。现在 HTML 内容是从满足 5 种不同语言的数据库中动态生成的。所以我只有 div 标签来帮助我。我不确定为什么 REMatch("(?s).*?", html) 对我不起作用。然而，本在这里帮助了我（[http://www.bennadel.com/blog/769-Learning-ColdFusion-8-REmatch-For-Regular-Expression-Matching.htm](http://www.bennadel.com/blog/769-Learning-ColdFusion-8-REMatch-For-Regular-Expression-Matching.htm)）。我的代码看起来像 tghis：

```
<cfset extContentArr = REMatch("(?i)<div class=""inlineBlock"" style=""margin-right:30px;"">.+?</div>",qry_getContent.colval) />
<cfif !ArrayIsEmpty(extContentArr)>
  Loop the array and do whatever you need with the extract , I just deleted them.
</cfif> 
```

# javascript - HtmlImage 不显示

> ID：12034498
> 
> 赞同：-1
> 
> 时间：2012-08-20T08:34:58.610
> 
> 标签：javascript, css

我有一个带有 div 的 asp.net 页面。在 div 中有两个 htmlimages。图片尺寸为A4。

我只能在页面上显示一张图像。第二个图像被渲染但不显示。当我将第一张图像更改为 display:none 时，会显示第二张图像。此外，当我将外部 div 的高度设置为小尺寸时，我可以看到两个图像，但我需要它的全尺寸。

任何想法如何让页面显示两个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T11:36:30.293

正如 nunespascal 所写，我发现溢出：隐藏。我删除了它并显示了两个图像

# c++ - 如何将从文件上传小部件上传的假脱机文件传递到 C FILE *f 指针

> ID：12034503
> 
> 赞同：2
> 
> 时间：2012-08-20T08:35:13.593
> 
> 标签：c++, file-upload, wt

我需要将一些从 Wt 文件上传小部件上传的文本文件作为参数传递给某些 C 函数以处理其数据。除非我真的找不到使用假脱机文件名（从 std::string 转换为 char *）作为第一个 fopen() 的参数来打开文件的正确方法，否则我意识到我没有理解Wt提供的文件处理方法。即，假脱机文件存储在哪里？我尝试`std::string WtFileUpload::spoolFileName() const`在文件上传完成后立即使用（我提供了一个在进度条到达末尾时单击的按钮），但是通过挖掘errno编号，我发现该文件不存在。

请建议我一个正确的方法来继续这个（如果可以的话，提供一些代码）并帮助我理解 Wt 处理使用这个小部件上传的文件的方式。

提前致谢。

**更新**：我的文件上传和处理代码：

```
//Declared in the application class:
Wt::WFileUpload *RORUpload;
Wt::WPushButton *RORUploadButton;

//Create file upload widget and add handlers for it in application constructor:
root()->addWidget(new Wt::WText("RINEX File Loaders "));
new Wt::WBreak(root());
//RINEX observation data file from rover station uploader.
new Wt::WBreak(root());
RORUpload = new Wt::WFileUpload();
RORUpload->setFileTextSize(40);
root()->addWidget(new Wt::WText("RINEX Rover Observation Data "));
new Wt::WBreak(root());
RORUploadButton = new Wt::WPushButton("Upload", root());
root()->addWidget(RORUpload);
//Upload when the button is clicked.
RORUploadButton->clicked().connect(RORUpload, &Wt::WFileUpload::upload);
RORUploadButton->clicked().connect(RORUploadButton, &Wt::WPushButton::disable);
// Upload automatically when the user entered a file.
RORUpload->changed().connect(RORUpload, &Wt::WFileUpload::upload); // !!! do not rename this 'upload'
RORUpload->changed().connect(RORUploadButton, &Wt::WPushButton::disable);
// React to a succesfull upload.
RORUpload->uploaded().connect(RORUpload, (Wt::WObject::Method) &Wt::WFileUpload::uploaded);
//React to a fileupload problem.
RORUpload->fileTooLarge().connect(RORUpload, (Wt::WObject::Method) &Wt::WFileUpload::fileTooLarge);

//When user presses a "submit" button, a connection function will be called.
const std::string Nameofror = RORUpload->spoolFileName();
const char *CNameofror = Nameofror.c_str(); 
```

我想知道这个问题是否与我的 (Wt::WObjectMethod) 演员表有关。**编辑**：请参阅我对这个问题的评论。

**更新2**：忘了说当我单击“提交”按钮时我遇到程序崩溃代码：

```
//Create button into application constructor:
  SubmitButton = new Wt::WPushButton("Submit", root());
SubmitButton->clicked().connect(SubmitButton, &Wt::WPushButton::disable);
SubmitButton->clicked().connect(this, &GOPApplication::definedOptions);

//definedOptions:

void GOPApplication::definedOptions()
{

int Posmode = PTGroup->checkedId();  //Value selection from PTContainer (checked radio button id).

     //int singlemoving;                                              //Value selection from SPContainer (checked radio button id).
int Frequencies = FGroup->checkedId();                  //Value selection from FContainer (checked radio button id).
const Wt::WString WElmask = EMedit->text();             //Value selection from EMw (given number).
std::string SElmask = WElmask.narrow();                 //Value selection from EMw (given number).
const char *CElmask = SElmask.c_str();                  //Value selection from EMw (given number).
float Elmask = atof(CElmask);                           //Value selection from EMw (given number).
int Height = HGroup->checkedId();                       //Value selection from HContainer (checked radio button id).
int Soltype = STGroup->checkedId();                     //Value selection from STContainer (checked radio button id).
int Sateph = SAGroup->checkedId();                      //Value selection from SEContainer (checked radio button id).
int Basestatcoord = BSCGroup->checkedId();              //Value selection from BSCContainer (checked radio button id).
int Ionerror = IEGroup->checkedId();                    //Value selection from IEContainer (checked radio button id).
int Troperror = TEGroup->checkedId();                   //Value selection from TEContainer (checked radio button id).
int Receiverapcpvc = RAGroup->checkedId();              //Value selection from RAContainer (checked radio button id).
int Satelliteapvc = SAGroup->checkedId();               //Value selection from SAContainer (checked radio button id).
int Earthtidescorr = ETCGroup->checkedId();             //Value selection from ETCContainer (checked radio button id).
int Ambresstr = STRGroup->checkedId();                  //Value selection from STRContainer (checked radio button id).
const Wt::WString WMinlockcount = MLCedit->text();      //Value selection from MLCw (given number).
std::string SMinlockcount = WMinlockcount.narrow();     //Value selection from MLCw (given number).
const char *CMinlockcount = SMinlockcount.c_str();      //Value selection from MLCw (given number).
float Minlockcount = atof(CMinlockcount);               //Value selection from MLCw (given number).
const Wt::WString WMinfixcount = MFCedit->text();       //Value selection from MFCw (given number).
std::string SMinfixcount = WMinfixcount.narrow();       //Value selection from MFCw (given number).
const char *CMinfixcount = SMinfixcount.c_str();        //Value selection from MFCw (given number).
float Minfixcount = atof(CMinfixcount);                 //Value selection from MFCw (given number)
const Wt::WString WThreshold = Tedit->text();           //Value selection from Tw (given number).
std::string SThreshold = WThreshold.narrow();           //Value selection from Tw (given number).
const char *CThreshold = SThreshold.c_str();            //Value selection from Tw (given number).
float Threshold = atof(CThreshold);                     //Value selection from Tw (given number).
const Wt::WString WMinelevangle = MEAedit->text();      //Value selection from MEAw (given number).
std::string SMinelevangle = WMinelevangle.narrow();     //Value selection from Tw (given number).
const char *CMinelevangle = SMinelevangle.c_str();      //Value selection from Tw (given number).
float Minelevangle = atof(CMinelevangle);               //Value selection from Tw (given number).
int Settimesystem = STSGroup->checkedId();              //Value selection from STSContainer (checked radio button id).
int Outputresiduals = ORGroup->checkedId();             //Value selection from ORContainer (checked radio button id).
int Settimeformat = STFGroup->checkedId();              //Value selection from STFContainer (checked radio button id).
//What about RINEX files obtaining?
//Maybe... (see notebook for infos about spoolFileName() usage)
const std::string Nameofror = RORUpload->spoolFileName();
const char *CNameofror = Nameofror.c_str();
printf("\n\n============= %s =============\n\n", CNameofror);
//const std::string Nameofrob = ROBUpload->spoolFileName();
//const char *CNameofrob = Nameofrob.c_str();
//const std::string Nameofrn = RNUpload->spoolFileName();
//const char *CNameofrn = Nameofrn.c_str();
//post-processing(Posmode,Frequencies,Elmask,Height,Soltype,Sateph,Basestatcoord,Ionerror,Troperror,Receiverapcpvc,
//              Satelliteapvc,Earthtidescor,Ambresstr,Minlockcount,Minfixcount,Threshold,Minelevangle,Settimesystem,Outputresiduals,Settimeformat);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:58:57.313

你确定文件上传过程完成了吗？`WFileUpload::uploaded()`如果它是真的，那么你应该只在你的代码中收到信号或`WFileUpload::fileTooLarge()`收到信号后才尝试使用文件。请检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-15T15:23:44.973

如果您使用函数 FileIsLoad() 连接上传的信号并且您的 Wt::WFileUpload 对象是 Upload

```
void MyClass::FileIsLoad ( void ) 
     {
       auto Res = std::make_shared<Wt::WFileResource>( 
                       Upload->uploadedFiles()[0].contentType() ,                                            
                       Upload->uploadedFiles()[0].spoolFileName() ) ;
       string MyFile = string("\mydirectory\" ) +
                       Upload->uploadedFiles()[0].clientFileName( ) ;

       std::ofstream Stream ( MyFile           , 
                              std::ios::out    | 
                              std::ios::binary | 
                              std::ios::trunc  ) ;
       Res->write            ( Stream          ) ;
       Stream.close          (                 ) ;
     } 
```

上传文件将保存在 \mydirectory 中，与原始文件同名。

# asp.net-mvc-3 - ASP.NET MVC - 发布到服务器后无法使用 IE 登录系统

> ID：12034506
> 
> 赞同：1
> 
> 时间：2012-08-20T08:35:35.983
> 
> 标签：asp.net-mvc-3, internet-explorer, login, iis-6

我有一个在 ASP.NET、MVC 3、C# 中创建的项目。在我的开发机器上测试它时，它适用于每个浏览器，一旦发布，它在 chrome 和除 IE 之外的所有其他浏览器中都能正常工作。

问题 - 我正在尝试登录我的网站，但网站只是使用包含在 url 中的返回 url 刷新。

我尝试了以下方法：

删除了助手 删除了 webMatrix

在 web.config 中添加了以下内容：

```
<add key="enableSimpleMembership" value="false" />
<add key="autoFormsAuthentication" value="false" /> 
```

检查了我的互联网选项设置，它们当前设置为中低并启用保护模式，我也将其关闭并且不高兴。

我有另一个网站已部署到同一内部服务器并在 IE 中运行良好。

有谁知道会导致这个问题的原因是什么？

这是我的 Web.config：

[http://pastebin.com/0b5FBuTs](http://pastebin.com/0b5FBuTs)

我正在使用 IE9

谢谢

# python - 是否可以在 Python 中使用 POD（普通旧文档）？

> ID：12034512
> 
> 赞同：6
> 
> 时间：2012-08-20T08:36:08.410
> 
> 标签：python, perl-pod

我想知道是否可以在 Python 中使用 POD（普通旧文档）？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:56:04.637

似乎没有直接支持的方式在 Python 文件中使用 POD 内联。但是，Python 模块（包括 Python 标准库）是使用[reStructuredText](http://thomas-cokelaer.info/tutorials/sphinx/rest_syntax.html)记录的。这通常使用[Sphinx](http://sphinx.pocoo.org/)完成，它从 reStructuredText 格式的文档字符串生成文档。Sphinx 和 rst 专门设计用于填补与 POD 类似的利基市场。

# mysql - CodeIgniter - 数据库事务

> ID：12034514
> 
> 赞同：1
> 
> 时间：2012-08-20T08:36:11.887
> 
> 标签：mysql, codeigniter, innodb, database-deadlocks

`$this->db->trans_start();`仅适用`$this->db->query();`于?

我只想知道，因为用户指南中的所有 CI 示例都使用`$this->db->query();`

它适用于这个吗？例子：

```
 $this->db->select('an_baby.parent_number');
  $this->db->from('an_parent');
  $this->db->join('an_baby', 'an_baby.parent_number = an_parent.id', 'inner');
  $this->db->where('date_born <=', date('Y-m-d'));
  $this->db->where('type', 'NewBorn'); 
```

任何回应都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:32:51.550

是的，事务将与活动记录样式方法一起正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T16:16:04.737

$this->db->trans_start() 和 $this->db->trans_complete() 之间的每个 CI 数据库函数都很好。

# javascript - .is(':visible') 在 jQuery 中不起作用

> ID：12034517
> 
> 赞同：2
> 
> 时间：2012-08-20T08:36:13.893
> 
> 标签：javascript, jquery, html

我`.is(':visible')`在 jquery 中使用方法，但它没有按预期工作。

[这是我的代码片段](http://jsfiddle.net/gBNcW/)

我在那里错过了什么？

HTML：

```
<div class="str">

    <ul><li>1</li><li><a href="#">hide</a></li></ul>
    <ul><li>2</li><li><a href="#">hide</a></li></ul>
    <ul><li>3</li><li><a href="#">hide</a></li></ul>
    <ul><li>4</li><li><a href="#">hide</a></li></ul>
    <ul><li>5</li><li><a href="#">hide</a></li></ul>
    <ul><li>6</li><li><a href="#">hide</a></li></ul>

    <div class="length"></div>

</div> 
```

jQuery：

```
$(function(){

    $('.str ul').find('a').live('click',function(){
       $(this).closest('li').parent().hide();
       var ll= $('.str').find('ul').each(function(){  
           $('.length').text( $('.str').find('ul').is(':visible').length );  
        });   
    });

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T08:39:54.887

采用：`$('.str').find('ul:visible').length`

## *[jsFiddle 演示](http://jsfiddle.net/gBNcW/4/)*

```
$(function(){

    $('.str ul').on('click','a',function(){    
       $(this).closest('li').parent().hide();

       var visibleUL = $('.str').find('ul:visible').length;      
       $('.length').text( visibleUL );        
       alert(visibleUL );

    });

}); 
```

虽然返回一个布尔`.is()`值`true / false`（`:visible``length`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T08:38:36.790

该`.is()`方法返回`true`或`false`

从[文档](http://api.jquery.com/is/)：

> 与其他过滤方法不同，.is() 不会创建新的 jQuery 对象。

您应该使用`find()`或`filter()`不使用`is()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:38:47.553

`is(':visible')`返回一个布尔值，而不是一个 jQuery 对象：

```
// Wrong
if ($selector.is(':visible').length) {

// Right
if ($selector.is(':visible')) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T08:47:19.260

我会将那个奇怪的 HTML 更改为一个实际的列表，而不是一堆每个都有一个项目的列表：

```
<div class="str">
    <ul>
        <li>1<br><a href="#">hide</a></li>
        <li>2<br><a href="#">hide</a></li>
        <li>3<br><a href="#">hide</a></li>
        <li>4<br><a href="#">hide</a></li>
        <li>5<br><a href="#">hide</a></li>
        <li>6<br><a href="#">hide</a></li>
    </ul>
    <div class="length"></div>
</div>​ 
```

然后做：

```
$(function() {
    $('a', '.str ul').on('click', function() {
        $(this).closest('li').hide();
        $('.length').text($('.str ul li:visible').length);
    });
})​;​ 
```

[**小提琴**](http://jsfiddle.net/gBNcW/3/)

# redis - 无法在 ubuntu 12.04 上安装 redis 2.7+

> ID：12034519
> 
> 赞同：7
> 
> 时间：2012-08-20T08:36:15.550
> 
> 标签：redis, ubuntu-12.04

我是新手`redis`。我只是跟着`cli`安装 redis `sudo apt-get install redis`。但安装服务器版本是`2.2.12`. 如果我想更新这个版本并且我想安装`redis 2.7 +`那么我该怎么做这件事，请帮忙。我正在努力`ubuntu 12.04`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-29T12:54:27.227

您可以安装个人包存档以获取最新版本。~~一个流行的似乎是[https://launchpad.net/~rwky/+archive/redis](https://launchpad.net/~rwky/+archive/redis)~~

编辑：上面的那个不再维护。请改用[https://launchpad.net/~chris-lea/+archive/ubuntu/redis-server](https://launchpad.net/~chris-lea/+archive/ubuntu/redis-server)。

```
sudo apt-get -y install python-software-properties
sudo add-apt-repository -y ppa:chris-lea/redis-server
sudo apt-get -y update
sudo apt-get -y install redis-server 
```

在撰写本文时，这些命令为我安装了最新版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T11:26:35.533

如您所见，Ubuntu 存储库具有 Redis 的 2.2 版本。如果您想要最新版本，则必须从 github 下载源代码并手动安装。

请参阅此处自述文件中的“安装 Redis”部分 - [https://github.com/antirez/redis](https://github.com/antirez/redis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:28:48.867

尝试 sudo apt-get install redis-server 或 [http://laymansite.com/install-redis-in-ubuntu-12-04/](http://laymansite.com/install-redis-in-ubuntu-12-04/)

# ruby-on-rails - 如何使用 Rails 下载静态 excel 文件

> ID：12034522
> 
> 赞同：1
> 
> 时间：2012-08-20T08:36:34.337
> 
> 标签：ruby-on-rails

我想提供一个通过 Rails 下载文件的链接。这些是我的问题：-

1.  您将静态文件放在哪里？
2.  是否有任何简单的控件可以让我下载此文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:45:26.903

为此，您不需要导轨。如果文件是公开的，您的网络服务器应该自动提供它。

您只需要知道 URL，以便您可以从您的应用程序链接到它。

你把它放在公共的什么地方并不重要，但要选择一个能让你在添加更多内容时保持井井有条的地方。

# facebook - 使用 Graph API 将图像上传到 Facebook 粉丝页面

> ID：12034523
> 
> 赞同：1
> 
> 时间：2012-08-20T08:36:39.723
> 
> 标签：facebook, facebook-graph-api, upload, photo, facebook-page

我正在尝试使用 Facebook Graph API 通过我的应用程序将图像上传到我的粉丝页面的相册。虽然我提供了albumID 作为上传图像的参数，但它被上传到一个相册中，该相册以我自己的个人资料上的应用程序名称Photos 命名。粉丝页面的相册保持空白。我也尝试发送我的粉丝页面的 pageID 而不是 albumID，但结果是一样的。我认为访问令牌存在问题，但使用相同的访问令牌我可以发布页面链接。

我用于上传的代码是：

```
 $args = array(
        'access_token'  => $access_token,
        'message'       => "$baslik",
        "source" => '@' . realpath($file)
    );                      

$post_id = $facebook->api("/$page_id/photos","post",$args); 
```

请给我一些想法，如何将图像上传到粉丝页面而不是我自己的个人资料相册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T02:45:35.297

我认为您没有获得管理权限。

检查此以获取更多信息：[使用 API 将图像上传到 facebook 粉丝页面](https://stackoverflow.com/questions/3778424/upload-image-to-facebook-fan-page-using-api?rq=1#comment4008765_3781094)

# c++ - QSqlDatabase ODBC查询速度

> ID：12034525
> 
> 赞同：0
> 
> 时间：2012-08-20T08:36:42.390
> 
> 标签：c++, sql-server-2008, qt4

我用`QSqlDatabase`远程连接`MSSQL Server`，但似乎速度很慢。使用相同的查询（结果约为 20 行），我尝试了`MSSQL Management 2008`大约 1 秒，但在我的应用程序（使用`QSqlDatabase`）中，它需要将近 8 秒，有人解释我为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:28:23.503

我发现设置 setForward(true) 和准备 SQL 语句可以显着提高基于 SELECT 的 SQL 查询的性能。如果未调用 setForward(true)，Qt 将在查询数据库时尝试遍历整个结果集，这会导致速度变慢。

# php - PHP代码，删除重命名

> ID：12034527
> 
> 赞同：0
> 
> 时间：2012-08-20T08:36:54.123
> 
> 标签：php

如果可能的话，请帮个忙，我一直在尝试更改它，但我没有成功，我想在我的 php 文件中更改它，但没有结果！

现在下面的这个脚本是一个调整大小的脚本，但是它重命名了我的文件......我不需要它这样做，你能看到它并告诉我如何删除文件的重命名吗？

我知道这与： $image->createFile(md5($tempFile)); 我尝试删除md5，但仍然没有...

谢谢！

```
function setFile($src = null) {
$this->ext = strtoupper(pathinfo($src, PATHINFO_EXTENSION));
if(is_file($src) && ($this->ext == "JPG" OR $this->ext == "JPEG")) {
$this->img_r = ImageCreateFromJPEG($src);
} elseif(is_file($src) && $this->ext == "PNG") {
$this->img_r = ImageCreateFromPNG($src);
} elseif(is_file($src) && $this->ext == "GIF") {
$this->img_r = ImageCreateFromGIF($src);
}
$this->img_w = imagesx($this->img_r);
$this->img_h = imagesy($this->img_r);
}

function resize($largestSide = 100) {
$width = imagesx($this->img_r);
$height = imagesy($this->img_r);
$newWidth = 0;
$newHeight = 0;

if($width > $height){
$newWidth = $largestSide;
$newHeight = $height * ($newWidth / $width);
}else{
$newHeight = $largestSide;
$newWidth = $width * ($newHeight / $height);
}

$this->dst_r = ImageCreateTrueColor($newWidth, $newHeight);
imagecopyresampled($this->dst_r, $this->img_r, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
$this->img_r = $this->dst_r;
$this->img_h = $newHeight;
$this->img_w = $newWidth;
}

function createFile($output_filename = null) {
if($this->ext == "JPG" OR $this->ext == "JPEG") {
imageJPEG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext, $this->quality);
} elseif($this->ext == "PNG") {
imagePNG($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
} elseif($this->ext == "GIF") {
imageGIF($this->dst_r, $this->uploaddir.$output_filename.'.'.$this->ext);
}
$this->output = $this->uploaddir.$output_filename.'.'.$this->ext;
}

function setUploadDir($dirname) {
$this->uploaddir = $dirname;
}

function flush() {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];

imagedestroy($this->dst_r);
unlink($targetFile);
imagedestroy($this->img_r);

}

}

$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetFile = str_replace('//','/',$targetPath) . $_FILES['Filedata']['name'];

move_uploaded_file ($tempFile, $targetFile);

$image = new Image();
$image->setFile($targetFile);
$image->setUploadDir($targetPath);
$image->resize(800);
$image->createFile(md5($tempFile)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:41:50.490

尝试更改为

```
$image->createFile('resized_'.$_FILES['Filedata']['name']);

function createFile($output_filename = null) {
    if($this->ext == "JPG" OR $this->ext == "JPEG") {
        imageJPEG($this->dst_r, $this->uploaddir.$output_filename, $this->quality);
    } elseif($this->ext == "PNG") {
        imagePNG($this->dst_r, $this->uploaddir.$output_filename);
    } elseif($this->ext == "GIF") {
        imageGIF($this->dst_r, $this->uploaddir.$output_filename);
    }
    $this->output = $this->uploaddir.$output_filename;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:44:11.733

`$_FILES['Filedata']['name']`您将文件的实际名称 ( ) 与临时名称 ( )混淆了`$_FILES['Filedata']['tmp_name']`。第一个是客户端上传的文件。第二个是服务器在服务器机器上创建的一个临时文件。因此，您必须在此处使用实际的客户端名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:49:04.163

这会让你的一天

```
$image->createFile(preg_replace("/\.[^\.]*$/", "", $targetFile)); 
```

# php - Apache 没有加载 PHP.ini

> ID：12034530
> 
> 赞同：4
> 
> 时间：2012-08-20T08:37:06.270
> 
> 标签：php, apache

好的，这是一个初学者问题，但我似乎找不到解决方案。我已经运行`<?php phpinfo(); ?>`并确认了我的 php.ini 路径。在 php.ini 中进行更改后重新启动 Apache 服务器，但 Apache 仍然不接受我在 php.ini 中所做的更改。我无法加载扩展、更改错误报告状态等。我应该在哪里查看，我还应该做什么才能使 Apache 与我的 php.ini 一起工作？（ps：PHP工作正常，所以我认为httpd.conf中的LoadModule没有问题）

此外，这是我的 phpinfo 输出： http: [//jsbin.com/ipilom](http://jsbin.com/ipilom)这是我在该路径中的 php.ini：http: [//paste2.org/p/2133057](http://paste2.org/p/2133057)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:05:07.177

检查您的 ftp 用户是否拥有该文件（它通常属于 root）

```
sudo chown ubuntu /etc/php5/apache2/php.ini
sudo chown ubuntu /etc/php5/cli/php.ini 
```

将“ubuntu”更改为您的用户名，将“/etc/php5/apache2/”更改为 phpInfo() 中指示的路径

然后重启apache

```
sudo /etc/init.d/apache2 restart 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:55:05.777

`phpinfo()`行*配置文件 (php.ini)*中告诉您什么？
你运行的是什么操作系统？

确保您的 php.ini 位于该目录内。
此外，您可能需要检查文件权限。
运行 apache 的用户必须能够阅读`php.ini`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T02:20:26.540

根据我的经验，您可能需要确保

Apache httpd.conf 中的 PHPIniDir "C:\php54\"

配置正确，有时“\”或“/”可能非常棘手。

# asp.net-mvc-3 - 找不到 ASP.NET MVC 3 HttpPost 操作方法

> ID：12034533
> 
> 赞同：4
> 
> 时间：2012-08-20T08:37:30.153
> 
> 标签：asp.net-mvc-3, post, razor, url-rewriting, http-status-code-404

我有一个简单的表单，它发布到一个`HttpPost`操作方法，该方法返回其相应的视图。我的问题是我遇到了`404 Not Found`错误。奇怪的是，如果我将表单方法和 action 方法的属性更改为 a `GET`，那么它可以工作并显示 TestMethod 视图。

似乎我缺少使用的东西`POST`，但我在其他控制器中的帖子工作正常（例如帐户登录和注册）。请注意，该`AllowAnonymous`属性是一个自定义属性，能够指定允许匿名访问的控制器或操作，而不是指定（通过`Authorize`attr）需要授权的控制器或操作。我想没有什么是不可能的，但我认为这与我的问题无关。对出了什么问题有任何想法吗？

形式：

```
@using (Html.BeginForm("TestMethod", "Test", FormMethod.Post, new { @id = "testForm" })) {
    <fieldset>
        <legend>Test Form</legend>
        <input type="submit" value="Submit" />
    </fieldset>
} 
```

控制器动作：

```
[AllowAnonymous]
[HttpPost]
public ActionResult TestMethod() {
    return View();
} 
```

看法：

```
<h2>TestMethod</h2>
<p>HttpPost method was successful.</p> 
```

从 Global.asax.cs 注册路由方法：

```
public static void RegisterRoutes(RouteCollection routes) {
        routes.IgnoreRoute("favicon.ico");
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        // About
        routes.MapRoute(
            "About", // Route name
            "about", // URL with parameters
            new { controller = "Home", action = "About" } // Parameter defaults
        );

        // Faq
        routes.MapRoute(
            "Faq", // Route name
            "faq", // URL with parameters
            new { controller = "Home", action = "Faq" } // Parameter defaults
        );

        // Glossary
        routes.MapRoute(
            "Glossary", // Route name
            "glossary", // URL with parameters
            new { controller = "Home", action = "Glossary" } // Parameter defaults
        );

        // Register
        routes.MapRoute(
            "Register", // Route name
            "register", // URL with parameters
            new { controller = "Account", action = "Register" } // Parameter defaults
        );

        // LogIn
        routes.MapRoute(
            "LogIn", // Route name
            "login/{id}", // URL with parameters
            new { controller = "Account", action = "LogOn", id = UrlParameter.Optional } // Parameter defaults
        );
        routes.MapRoute(
            "LogOn", // Route name
            "logon/{id}", // URL with parameters
            new { controller = "Account", action = "LogOn", id = UrlParameter.Optional } // Parameter defaults
        );

        // Default
        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

} 
```

授权属性代码：

```
// AllowAnonymousAttribute class
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class AllowAnonymousAttribute : Attribute { }

// GlobalAuthorize class
public sealed class GlobalAuthorize : AuthorizeAttribute {
    public override void OnAuthorization(AuthorizationContext filterContext) {
        bool skipAuthorization = 
            filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), true) || 
            filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), true);

        if (!skipAuthorization) base.OnAuthorization(filterContext);
    }
}

// RedirectAuthorizeAttribute class
public class RedirectAuthorizeAttribute : AuthorizeAttribute {
    public string RedirectUrl { get; set; }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) {
        filterContext.Result = new RedirectResult(RedirectUrl);
    }
} 
```

全局过滤器：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
    filters.Add(new RequireHttpsAttribute());
    filters.Add(new GlobalAuthorize());
    filters.Add(new HandleErrorAttribute());
} 
```

路线改写规则：

```
<rewrite>
  <rules>
    <!-- Block all requests made to a website that do not have the host header set. -->
    <rule name="Fail bad requests" stopProcessing="true">
      <match url=".*" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="localhost" negate="true" />
      </conditions>
      <action type="AbortRequest" />
    </rule>
    <!-- Remove trailing slash from all incoming requests. -->
    <rule name="Remove trailing slash" stopProcessing="false">
      <match url="(.*)/$" />
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      </conditions>
      <action type="Redirect" redirectType="Permanent" url="{R:1}" />
    </rule>
    <!-- Convert all requests to all lowercase. -->
    <rule name="Convert to lowercase" stopProcessing="false">
      <match url=".*[A-Z].*" ignoreCase="false" />
      <action type="Redirect" url="{ToLower:{R:0}}" redirectType="Permanent" />
    </rule>
    <!-- Any URL with (HTTPS == OFF) and (HTTP_HOST with colon) -> use for development testing. -->
    <rule name="Development redirect to HTTPS" enabled="true" stopProcessing="true">
      <match url=".*" ignoreCase="true" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
        <add input="{HTTPS}" pattern="^OFF$" />
        <add input="{HTTP_HOST}" pattern="([^/:]*?):[^/]*?" />
      </conditions>
      <action type="Redirect" url="https://{C:1}:44300{URL}" />
    </rule>
    <!-- Redirect any HTTP request to HTTPS. -->
    <rule name="Redirect to HTTPS" stopProcessing="true">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTPS}" pattern="^OFF$" ignoreCase="true" />
      </conditions>
      <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="Permanent" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T21:37:57.453

我想我终于找到了罪魁祸首。首先，我承认，现在知道问题出在哪里，这个问题的标题不是很准确。该问题主要与 Web.config 中的规则重写有关。在回复其他人对这个问题的评论之前，我完全忘记了规则重写，这就是为什么我一开始没有进一步检查它们的原因。

无论如何，问题在于将 URL 重写为全部小写的规则。我知道我的帐户注册和登录表单工作正常，所以我检查了它们并注意到它们的`Html.BeginForm`语句是无参数的，这显然会导致生成一个小写的 url。我为我的测试方法尝试了无参数的 POST 请求，它起作用了。然后，我尝试在`Html.BeginForm`语句中使用 action 和 controller 的参数，但这次我将它们输入为小写字符串：`Html.BeginForm("testmethod", "test"...)`. 果然，它也可以正常工作，并且页面源将表单操作显示为小写。

为了解决我的问题，我只需要设置一个不匹配`POST`请求的条件：`<add input="{REQUEST_METHOD}" matchType="Pattern" pattern="POST" negate="true" />`. 请注意，问题不是具体的小写规则，而是`POST`请求被重定向。我发现一篇[博客](http://dev-tricks.net/post-data-lost-on-301-moved-permanently)讨论了`POST`重定向被转换为`GET`s 并导致错误的问题，这正是我所经历的。它已经有几年的历史了，但显然它仍然是相关的信息。

无论如何，我现在已经恢复正常运行了。感谢所有投入两分钱的人。

PS 当我关闭浏览器选项卡并结束搜索时，我想我会链接到这个 SO [question](https://stackoverflow.com/questions/5994261/in-the-iis7-url-rewrite-module-can-i-specify-in-a-redirect-rule-to-not-apply-to)，因为它肯定与我的问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:37:47.057

我刚才测试了你的代码。我最初因为不使用 HTTPS 而被重定向，所以我禁用了这个属性，但之后你的代码就可以工作了。

这是我的逻辑推论...

*   如果 HTTPS 是问题所在，您将不会收到 404。
*   如果您没有登录，您将被重定向到登录页面。

我能想到的唯一一件事是您的控制器要么没有命名为“TestController”，要么您的控制器在一个区域中，而您忘记为该区域提供`BeginForm`. 它是其中之一吗？

# java - 哪些基于 JVM 的脚本语言支持 @WebService 在运行时创建服务？

> ID：12034538
> 
> 赞同：14
> 
> 时间：2012-08-20T08:37:51.683
> 
> 标签：java, web-services, scripting, jvm, jsr223

我处于需要能够在运行时创建和公开 Web 服务的情况。（即没有“javac”编译步骤）。

是否有一种基于 JVM 的脚本语言对 JAX-WS 有很好的支持，所以我可以用 Java 编写一个中央引擎，然后让脚本语言创建包含 Web 服务方法的片段（使用 @WebService 或 @WebMethod 注释) 然后可以传递给

[http://docs.oracle.com/javase/6/docs/api/javax/xml/ws/Endpoint.html#publish(java.lang.String, java.lang.Object)](http://docs.oracle.com/javase/6/docs/api/javax/xml/ws/Endpoint.html#publish%28java.lang.String,%20java.lang.Object%29)

如果可能的话，请提供一个如何正确执行的示例。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T11:07:48.220

很多人都这样做，最像 Java 并支持你想要的东西可能是 groovy。

更新以添加示例：

有很多可以通过谷歌搜索获得。我所知道的最好的一个是[在这里](http://groovy.329449.n5.nabble.com/Creating-a-JAX-WS-web-service-using-a-Groovy-script-on-Java-SE-td370529.html)，因为这应该会引导您完成一个有效的示例。此链接指向另一个专注于 groovy 的问答网站。他们将引导您完成这个简单的示例：

如果您尝试此站点并发现它没有指导意义，请在此处提供该反馈。同样，如果您确实搜索并找到了一个您觉得更好/更容易理解的内容，请在此处添加。我不能从同样的角度出发，因此在这方面你会比我有更多的贡献。

```
Geom.groovy
-------------------
package webservices

import javax.jws.WebService
import javax.jws.soap.SOAPBinding.Style
import javax.jws.soap.SOAPBinding

@WebService
@SOAPBinding(style=Style.RPC)
interface Geom {
    double getArea(double val)
}

Circle.groovy
-------------------
package webservices

import javax.jws.WebService

@WebService(endpointInterface='webservices.Geom')
class Circle implements Geom {
        double getArea(double r) { Math.PI*r*r }
}

publish.groovy
--------------------
package webservices

import javax.xml.ws.Endpoint

Endpoint.publish('http://localhost:5555/circle',new Circle())
println 'ready to receive requests...' 
```

我提供的链接最终可能会中断或被删除。但是（IMO），如果（何时？）技术向更新/更好的方向发展，这很可能会发生。虽然我从上面复制了代码，但该引用还有其他非常有用的信息和指针（例如 SoapUI 的使用）。

# c# - 使用非托管代码使用扩展名获取文件图标时在 x86 系统上出现异常

> ID：12034552
> 
> 赞同：3
> 
> 时间：2012-08-20T08:38:54.660
> 
> 标签：c#, exception, x86, unmanaged

我正在开发磁盘目录应用程序，该应用程序需要我使用从数据库中检索到的文件扩展名来获取文件图标。使用其扩展名获取文件图标的代码在我的具有任何 CPU 调试配置的 Windows 7 x64 机器上工作得非常好，但是当我在调试配置中切换到 x86 时出现以下错误。

> 致命的执行引擎错误

当我尝试在 Windows XP x86 中以任何 CPU 配置运行应用程序时，出现以下错误。

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

当我删除下面的代码应用程序完美无缺。我想使用下面的代码从扩展名中获取文件图标。是否有任何解决方法可以让代码在 x86 系统上运行？[我从如何在 C# 中获取常用文件类型图标中](https://stackoverflow.com/questions/616718/how-do-i-get-common-file-type-icons-in-c)找到此代码？.

```
 /// <summary>
    /// Contains information about a file object. 
    /// </summary>
    struct SHFILEINFO
    {
        /// <summary>
        /// Handle to the icon that represents the file. You are responsible for
        /// destroying this handle with DestroyIcon when you no longer need it. 
        /// </summary>
        public IntPtr HIcon;
    };

    [Flags]
    enum FileInfoFlags
    {
        /// <summary>
        /// Retrieve the handle to the icon that represents the file and the index 
        /// of the icon within the system image list. The handle is copied to the 
        /// hIcon member of the structure specified by psfi, and the index is copied 
        /// to the iIcon member.
        /// </summary>
        ShgfiIcon = 0x000000100,
        /// <summary>
        /// Indicates that the function should not attempt to access the file 
        /// specified by pszPath. Rather, it should act as if the file specified by 
        /// pszPath exists with the file attributes passed in dwFileAttributes.
        /// </summary>
        ShgfiUsefileattributes = 0x000000010
    }

    [DllImport("Shell32", CharSet = CharSet.Auto)]
    extern static IntPtr SHGetFileInfo(
        string pszPath,
        int dwFileAttributes,
        out SHFILEINFO psfi,
        int cbFileInfo,
        FileInfoFlags uFlags);

    /// <summary>
    /// Two constants extracted from the FileInfoFlags, the only that are
    /// meaningfull for the user of this class.
    /// </summary>
    public enum IconSize
    {
        Large = 0x000000000,
        Small = 0x000000001
    }

    /// <summary>
    /// Get the icon associated with file Extension.
    /// </summary>
    /// <param name="fileExt">Search icon for this file extension</param>
    /// <param name="size">Icon size</param>
    /// <returns></returns>
    public static Icon GetIcon(string fileExt ,IconSize size)
    {
        var fileInfo = new SHFILEINFO();
        SHGetFileInfo(fileExt, 0, out fileInfo, Marshal.SizeOf(fileInfo),
            FileInfoFlags.ShgfiIcon | FileInfoFlags.ShgfiUsefileattributes | (FileInfoFlags)size);

        return Icon.FromHandle(fileInfo.HIcon);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:52:15.817

你的定义`SHFILEINFO`不完整。原来的样子

```
typedef struct _SHFILEINFO {
  HICON hIcon;
  int   iIcon;
  DWORD dwAttributes;
  TCHAR szDisplayName[MAX_PATH];
  TCHAR szTypeName[80];
} SHFILEINFO; 
```

在 C# 中它应该看起来像

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
struct SHFILEINFO {
    public IntPtr hIcon;
    public int iIcon;
    public uint dwAttributes;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
    public string szDisplayName;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 80)]
    public string szTypeName;
} 
```

# python - 在 django / python web 应用程序中包含常见内容（例如标题脚本）的最佳方式是什么

> ID：12034556
> 
> 赞同：3
> 
> 时间：2012-08-20T08:39:18.113
> 
> 标签：python, django

在 php 文件中，此任务可能是另一个文件的简单包含，但我想知道在 Django 中是否有类似的做法？就像这里描述的：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T09:14:57.423

简短的回答：不，Python 不会那样执行。

这是一个很长的：

**一点关于 PHP 和 Python Web 开发的区别**

首先，`include`是`require`PHP 语言本身的组成部分。这意味着在处理源代码之前，PHP 解释器包含来自文件的源代码作为这些函数的参数，然后进行解释。这就是 PHP 设计的主要目的（HTML，或者，一般来说，文本预处理）的继承。

Python 中的 Web 开发有点不同。语言本身被设计为通用编程语言，因此默认情况下它不假定文本处理。代码刚刚执行。这就是为什么 Web 开发通常使用框架（或[wsgi](http://wsgi.readthedocs.org/en/latest/index.html)模块，如果您更喜欢从头开始做所有事情的话）来完成的原因。

以上所有意味着所有文本操作（您生成的所有输出，您通常通过创建结果文本字符串（或与缓冲一起使用时的字符串列表）手动完成并自己提供输出结果。

**模板语言**

这是模板语言诞生的一个混乱点，它成为每个（或几乎每个）用 Python 编写的 Web 应用程序的重要组成部分（您可以假设与 PHP 世界中的 Smarty 类似）。它们有很多：jinja、jinja2、mako、chameleon ......等等。所有这些都是不同的，但服务于相同的目的（*通过为基本表示逻辑的数据提供带有占位符的模板来简化文本生成*）。

这就是 Python Web 框架的主要特点：应用程序逻辑和表示是严格分开的。

**在这里，我们来到了您的问题的实质：**

由于所有提供文本模板工具的模板库都是不同的，因此没有通用的方法来制作*类似 PHP 的包含*，我们可以说它们*对于 Python 是通用的*。这些工具中的每一个都提供了不同的处理方式和理念，具体包括，主要分为两种主流方式：

*   基于宏和插槽（变色龙）
*   基于模板继承（Jinja2、Django 模板语言）

您所需要做的就是选择一个最适合您的需求（无论您喜欢/不喜欢它们的语法，其中一些更快，一些更具可读性，等等..）并将其与其他提供逻辑的工具结合使用你的申请。

**走近：关于 D​​jango**

当您想要包含应用程序的某些重用部分（例如分页小部件）时，通常使用包含模板标签，您已经针对这些部分调整了视图上下文。

但是，当您有所有页面的公共标题或另一个公共部分时，最好使用继承，这分两步实现：

*   创建基本模板（包含一般页眉和页脚）
*   通过模板继承功能创建特定模板，特别是在 Django 中[扩展](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#extends)模板标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:25:49.657

Python 不是 PHP！

Django 不允许您在模板中编写任意脚本（代码）。您应该在views.py（控制器）中完成所有计算/业务任务并将结果传递给模板。在模板中，您通常会遍历结果集并显示数据。在 django 1.4 中添加了一个新的 assignment 标签，所以你可以这样做

```
{% get_movie_tickets_for_theater movie theater as tickets %} 
```

但是您`get_movie_tickets_for_theater`将在 templatetags python 文件中定义。

# f# - 是否有适用于 F# 中的文件系统的 println 类型函数？

> ID：12034559
> 
> 赞同：1
> 
> 时间：2012-08-20T08:39:27.153
> 
> 标签：f#

我正在寻找将数据保存到文本文件的最自然方式。有人可以提供一个简单的例子吗？是否有 println 系列的功能可以完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:50:18.310

( `fprintf`and `fprintfn`) 函数的工作方式类似于`printf`and`sprintf`但需要`TextWriter`写入 a 。您可以在[此处](http://msdn.microsoft.com/en-us/library/ee370327.aspx)了解更多信息。

注意整个[Core.Printf 模块很有趣](http://msdn.microsoft.com/en-us/library/ee370560)。

一个非常简单的例子：

```
using (new StreamWriter("c:\\test.txt")) (fun file ->
    fprintfn file "test %i" 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:15:52.447

fprintf 等可能不是正确的方法，具体取决于您生成数据的方式。有时它可以像这样简单：

```
let SaveMe() =
    let data =  [0..1000]
                |> List.map (fun i -> sprintf "string number %i" i)
    System.IO.File.WriteAllLines(@"c:\temp\myfile.txt", data) 
```

# php - 如何将数组设置为变量？

> ID：12034560
> 
> 赞同：1
> 
> 时间：2012-08-20T08:39:28.333
> 
> 标签：php, cakephp

有人可以帮我将以下内容存储为数组吗？

我得到的结果为

```
Array (
    [TblCollectionReference] => Array ( 
            [content] => Array ( 
                    [0] => PBA_CA_FTL00003
                    [1] => PBA_CA_FTL00006
            )
    )
) 
```

现在我需要 15 位代码。

单独我可以得到代码

```
$this->data['TblCollectionReference']['content'][0] 
```

但是如何将其存储为数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:50:02.587

你可以使用[JSON](http://www.php.net/manual/en/ref.json.php)

```
$toStore = json_encode($this->data['TblCollectionReference']['content']); 
```

然后你`json_decode()`在你需要的地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:04:25.840

CakeDC 有一个 SerializableBehavior 几乎可以自动处理这个问题。您可以在[https://github.com/CakeDC/utils/blob/master/Model/Behavior/SerializableBehavior.php找到它](https://github.com/CakeDC/utils/blob/master/Model/Behavior/SerializableBehavior.php)

我想这就是你要找的。它基本上完成了上面 Mihai Iorga 建议的操作……以可重用的方式

# jquery-mobile - Jquery 移动弹出窗口在本地文件中不起作用

> ID：12034566
> 
> 赞同：0
> 
> 时间：2012-08-20T08:40:06.603
> 
> 标签：jquery-mobile

他们在 jquery 文档中描述的 jquery 移动弹出窗口不适用于我的本地文件。我在本地运行的文件是否有任何问题。我只包含了 jquery mobile css、js 和 jquery js，任何需要包含的额外内容请咨询。

代码：

```
<a href="#popupBasic" data-rel="popup">Open Popup</a>

<div data-role="popup" id="popupBasic">
    <p>This is a completely basic popup, no options set.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:35:29.803

你的代码工作得很好。确保按照以下顺序导入库。大括号内提到了我曾经检查过的版本。

1.  jQuery（最好是 1.9.1）
2.  jQuery 移动 (1.3.x)
3.  您的自定义 js 文件

这是一个例子`**[Live fiddle](http://jsfiddle.net/mayooresan/Z5c5G/)**`。

```
<a href="#popupBasic" data-rel="popup">Open Popup</a>

<div data-role="popup" id="popupBasic">
    <p>This is a completely basic popup, no options set.</p>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T22:19:43.997

您正在尝试使用仅在 jQuery Mobile 1.2 Alpha 中可用的功能。确保在包含 jQuery 后已包含此库。

# iphone - 一次登录一个网站的两个帐户？

> ID：12034567
> 
> 赞同：4
> 
> 时间：2012-08-20T08:40:12.890
> 
> 标签：iphone, ios, login, account, user-accounts

我需要在我的应用程序中使用此功能，因为我在 gmail 中有用于家庭和办公室工作的帐户。

我知道如何发送网络请求和接收答案。所以我可以登录一个帐户。但是，如果一个网站上有多个我的帐户怎么办？

有人说在PC上是可以的，因为有各种各样的cookies。另一个人回答说，由于iOS内部系统组织，这甚至是不可能的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:59:21.023

使用[RestKit 之](https://github.com/RestKit/RestKit)类的库，您可以为同一个站点创建多个对象管理器并使用不同的凭据。在 API 和示例中阅读有关它的更多信息。它得到了相当广泛的支持。

如果您只是想登录 IMAP 帐户，那么您可以尝试 libmailcore。[阅读入门指南](http://libmailcore.com/)，了解如何创建帐户和获取数据。

您可能可以创建多个 Account 对象并使用它们。

# android - 为 ExpandableListView 创建布局

> ID：12034569
> 
> 赞同：2
> 
> 时间：2012-08-20T08:40:28.287
> 
> 标签：android, android-layout, android-widget, expandablelistview, expandablelistadapter

我必须开发一个可扩展列表视图。如果我必须运行程序意味着它成功运行......但我遇到了一个问题......问题是如果我必须点击第一组意味着第一组孩子都显示并且还简单地显示了第二组儿童空间......这里也发生了同样的问题。如果我必须点击第二组意味着在显示第二组儿童之后简单地显示第一组儿童空间......为什么会出现这个错误。请参考我的代码并给我解决方案。请在您清楚地理解我的问题时参考我的屏幕截图。 ![在此处输入图像描述](../Images/9d980affc15ed782590b88f7a4f3f770.png) 请帮助我...这里有什么问题。为什么这里会出现空间...请帮助我的朋友。

下面的代码是我的 android 布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView
    android:id="@+id/payment_method1"
     android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/> 
   <TextView
    android:id="@+id/payment_method"
     android:paddingLeft="75px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

     <TextView
    android:id="@+id/total1"

     android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
       <TextView
    android:id="@+id/total"

     android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
    <TextView
     android:id="@+id/firstname1"
    android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
     <TextView
     android:id="@+id/firstname"
    android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
      <TextView
     android:id="@+id/lastname1"
    android:paddingLeft="5px"
     android:textSize="15dip"

    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
    <TextView
     android:id="@+id/lastname"
    android:paddingLeft="65px"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

     </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:30:50.160

在对我的 android 布局文件进行一些更改后，我得到了解决方案。

# search - 使用字段 = string1 OR string2 查询 Solr

> ID：12034574
> 
> 赞同：1
> 
> 时间：2012-08-20T08:40:49.117
> 
> 标签：search, solr

我已经使用 Solr 构建了一个索引，以便以下查询返回结果：

```
http://localhost:8983/solr/db/select?q=username_s:*js* 
```

现在我想扩展结果集，除了*js*，我还想添加*pa*（即用户名称中包含“pa”）。

我尝试了不同的东西，比如

```
http://localhost:8983/solr/db/select?q=username_s:"*js* AND *pa*" 
```

只是无法让它工作。请建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:29:25.637

`q=username_s:(*js* *pa*)`如果您的默认运算符设置为 OR（在 solrconfig.xml 中），您可以使用。或者，您可以使用`q=username_s:(*js* OR *pa*)`.

有关更多信息，请参阅[文档](http://wiki.apache.org/solr/SolrQuerySyntax)。

# javascript - 地理编码器和国家代码

> ID：12034587
> 
> 赞同：2
> 
> 时间：2012-08-20T08:41:55.030
> 
> 标签：javascript, google-maps, geolocation

我正在尝试将以下脚本发送到警报或控制台。记录国家代码，但它一直给我完整的地址。

有人可以帮我吗？

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript"> 
  var geocoder;

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 
//Get the latitude and the longitude;
function successFunction(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    codeLatLng(lat, lng)
}

function errorFunction(){
    alert("Geocoder failed");
}

  function initialize() {
    geocoder = new google.maps.Geocoder();
  }

  function codeLatLng(lat, lng) {

    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
      console.log(results)
        if (results[1]) {
         //formatted address
         alert(results[2].formatted_address)
        //find country name
             for (var i=0; i<results[0].address_components.length; i++) {
            for (var b=0;b<results[0].address_components[i].types.length;b++) {

            //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
                if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                    //this is the object you are looking for
                    city= results[0].address_components[i];
                    break;
                }
            }
        }
        //city data
        alert(city.short_name + " " + city.long_name)

        } else {
          alert("No results found");
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:19:59.097

您的代码实际上会发出两次警报。第一次是格式化地址，第二次是国家。

对于第二个警报 - 更改`administrative_area_level_1`为`country`-

```
if (results[0].address_components[i].types[b] == "country") { 
```

然后，如果您发出警报`short_name`，您将获得国家/地区代码。

# c# - 客户端：如果 textbox1 和 textbox 2 设置 counter++

> ID：12034589
> 
> 赞同：2
> 
> 时间：2012-08-20T08:42:06.993
> 
> 标签：c#, javascript, asp.net

我正在处理包含多视图控件和一些向导步骤的 asp.net 页面。我有十对名为 TextboxA[i] 和 TextBoxB[i] 的文本框和一个计数器。Foreach 几个非空文本框我想要我的计数器++。

在服务器端，我可以在 TextboxA[i] 和 TextboxB[i] onTextChange 事件中编写类似的内容

```
if(String.IsNullOrWhiteSpace(TextboxA[i]))
    counter++; 
```

不太好......我必须使用javascript在客户端增加计数器但是 - 如果我有 - 我不知道如何。请问，谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:51:22.293

首先，您需要将 ID 提供给文本框。像

```
TextboxA[i].ID = "textboxA" + i;
TextboxB[i].ID = "textboxB" + i; 
```

然后使用从客户端访问这些文本框

```
var TextboxA = document.getElementById("textboxA" + i);
var TextboxB = document.getElementById("textboxB" + i);
if((TextboxA.value == null || TextboxA.value=="" )&&(TextboxB.value == null || TextboxB.value=="" ))
counter++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:33:58.957

客户端代码：

```
<script type="text/javascript">
var counter = 0;

function increaseCounter(textAID, textBID)
{
    var textA = document.getElementById(textAID);
    var textB = document.getElementById(textBID);
    if (isNullOrWhitespace(textA.value) && isNullOrWhitespace(textB.value))
        counter++;
}

function isNullOrWhitespace( input ) {

    if (input == null) return true;

    return input.replace(/\s/g, '').length < 1;
}
</script> 
```

isNullOrWhitespace 的代码取自[https://stackoverflow.com/a/5559461/1495902](https://stackoverflow.com/a/5559461/1495902)。

服务器端代码：

```
for (int i = 0; i < TextboxA.Count() ; i++)
{
    var script = "increaseCounter(" + TextboxA[i].ClientID + "," + TextboxB[i].ClientID + ")";
    TextboxA[i].Attributes.Add("onchange", script);
    TextboxB[i].Attributes.Add("onchange", script);
} 
```

# wpf - 其他元素中的类似 PropertyGrid 的多选（listView）

> ID：12034590
> 
> 赞同：0
> 
> 时间：2012-08-20T08:42:29.040
> 
> 标签：wpf, listview, data-binding, propertygrid, multi-select

我想模仿项目的多选行为（例如在列表视图中）及其在 PropertyGrid 中的出现。因此，只会显示相同的属性，并且在所有多选属性上设置网格中设置的值。

我创建了一个带有一些数据模板的列表视图，并在另一个列表视图中有一些数据（带有数据绑定）。现在我希望我在带有数据的列表视图上进行多选，并在另一个列表视图中显示属性，就像在 propertygrid 中一样。（解释：ProprtyGrid 在 WPF 中仍然不可用，如果没有以我的方式显示数据的灵活性需要它）

那么，我需要如何准备要在列表 propertygrid-multiselection-style 中显示的数据？这还可以吗？？？

问候，

于尔根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:43:14.603

我不确定这个问题是否仍然有效，或者没有。但我找到了一个适合我的解决方案 - 我需要在某个地方分享它。

您要解决的第一个问题是选择项目，即。多选。请参阅我的提示[here](http://www.codeproject.com/Tips/582670/Multiselect-ListBox-ListView-items-like-Windows-Ex)，它解释了如何做到这一点。

接下来，我猜它基本上绑定到 listview 的 selectedItem 属性，以及您希望如何根据对 selectedItem 属性的更改来更新您的 propertyGrid。

希望这可以帮助。

# android - 在 Android 上的 tabcontent 中打开文档

> ID：12034591
> 
> 赞同：1
> 
> 时间：2012-08-20T08:42:34.450
> 
> 标签：android, android-tabhost

下面的代码我使用 group 在 TabHost 上的 tabcontent 中显示活动：

```
File file = new File(FilePath);
String mimetype = mime_type(FileName);

Intent it = new Intent(Intent.ACTION_VIEW);
it.setDataAndType(Uri.fromFile(file), mimetype);
it.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  
Window w = group.getLocalActivityManager().startActivity("Docaument", it);  
View view = w.getDecorView();  
group.setContentView(view); 
```

我想让文档阅读器应用程序的活动放置在标签内容中。
但不是全屏。
我该怎么做？

# c# - 南特没有看到参考

> ID：12034592
> 
> 赞同：4
> 
> 时间：2012-08-20T08:42:34.787
> 
> 标签：c#, nant

我想用 c# 代码通过 nant 脚本杀死所有 IE 实例：

```
<target name="clean">  
   <script language="C#" prefix="Cleaning">          
          <references>
              <include name="System.Diagnostics.dll" />
          </references>
                <imports>
                    <import namespace="System.Diagnostics" />
                </imports>
          <code>
            <![CDATA[

              [Function("Delete")]
              public static void KillIe() 
              {                     

                foreach (var process in Process.GetProcessesByName("iexplore"))
                {
                  process.Kill();
                }         

              }
            ]]>
          </code>
      </script>
 <echo message="Calling function: ${Cleaning::KillIe()}"/> 
  </target>    
</project> 
```

当我执行此脚本时，我收到以下错误：

> 错误 CS0234：命名空间“System.Diagnostics”中不存在类型或命名空间名称“Process”（您是否缺少程序集引用？）

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:23:55.010

我遇到了类似的问题，最后我在 NAnt 代码中添加了以下引用：

```
<script ... >
  <references>
    <include name="System.dll"/>
    ...
  </references>
  <code>
    ...
  </code>
</script> 
```

您应该`System.dll`明确添加 - 它不在[默认包含的程序集列表中](http://nant.sourceforge.net/release/latest/help/tasks/script.html)。

# database - 如何在 Qt 中的数据库中显示 QTreeView 树？

> ID：12034594
> 
> 赞同：0
> 
> 时间：2012-08-20T08:42:40.823
> 
> 标签：database, sqlite, qt, model, qtreeview

我使用此代码。

```
model  = new QSqlQueryModel(this);
model->setQuery("select id,parent,name from table");

tree = new QTreeView(this);
tree->setModel(model); 
```

在 TreeView 中显示表格，但不显示树。如何显示树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:28:26.090

好吧，它不会返回树，因为 QSqlQueryModel 会生成一个从数据库中出来的平面表。

您有两个选项可以将其制成树视图，通过子类化或仅构建一个创建自己的模型`QStandardItemModel`，或使用一个`QAbstractProxyModel`创建 QSqlQuery 表结果与分组树数据模型之间的映射。

# php - 如何在 sql 查询中检查数组？

> ID：12034598
> 
> 赞同：0
> 
> 时间：2012-08-20T08:43:17.883
> 
> 标签：php, sql, arrays

所以我需要在我的查询中检查一个数组：

```
$query = "SELECT * FROM post WHERE ".$select." LIKE '%".$search."%'  AND  ID NOT IN '" .$Lastvar."'"; 
```

`$Lastvar`是我的阵列。我不知道从这里去哪里，任何帮助将不胜感激。

**编辑：**这是我的完整查询：

```
$Lastvar = array();
mysql_select_db('submisions', $dbconn);
$query = "SELECT * FROM post WHERE ".$select." LIKE '%".$search."%' AND ID NOT IN (" . join(", ", $Lastvar) . ")";

$result = mysql_query($query);
$num_rows = mysql_num_rows($result);
if ($num_rows == 0) {
    echo 'No results were found';
    exit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:45:50.540

If the ID is of integer type:

```
$query = "SELECT * FROM post WHERE ".$select." LIKE '%".$search."%'  
AND ID NOT IN (" . join(", ", $Lastvar) . ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:46:33.980

Do it like this:

```
$query = "SELECT * FROM post WHERE ".$select." LIKE '%".$search."%'  AND  ID NOT IN ('" .join("', '", $Lastvar).")"; 
```

# javascript - Start speaking text

> ID：12034600
> 
> 赞同：-1
> 
> 时间：2012-08-20T08:43:32.843
> 
> 标签：javascript, html, text-to-speech

I am wanting to incorporate the built-in text-to-speech tool on a mac to a website. Basically, the website will show a list of tasks, and in a different view mode, it will only show one task on the screen. In the "one task" mode, I want to to the "text-to-speech" software on Macs to read the task. I would want to do this on a PC too, if they come with a similar tool built in (unlikely).

Is there some JavaScript command I could use to tell it to start speaking the text, or is this way too advanced for JavaScript?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:48:15.197

没有任何 JavaScript 命令，但您可以使用：

*   [http://www.jtalkplugin.com/](http://www.jtalkplugin.com/)
*   [https://github.com/kripken/speak.js](https://github.com/kripken/speak.js)

两者似乎都是获得“开始说文本”能力的好选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:50:37.723

Text-To-Speech 是操作系统的一部分，而不是浏览器（或任何与此相关的 HTML 规范）的一部分。因此，有几种**假设**的触发方式：

1.  调用一个调用底层操作系统的 js 函数
    *   我还没有听说有任何浏览器实现了它
2.  从 JS 调用 AppleScript
    *   我还没有听说这是可能的
3.  创建一个能够调用 AppleScript/Underlying OS/Shell 命令的浏览器扩展...
    *   可能是您最好的选择，但如果没有扩展，网页端将无法使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:49:58.747

我认为您不能直接访问 OSX 的文本转语音功能，但如果您正在寻找文本转语音解决方案，您应该查看 speak.js：

[GitHub 上的 Speak.js](https://github.com/kripken/speak.js)

[speak.js 的工作演示](http://syntensity.com/static/espeak.html "speak.js 的工作演示")

# c - What KV store to chosse with a multi thread web server?

> ID：12034603
> 
> 赞同：0
> 
> 时间：2012-08-20T08:44:23.747
> 
> 标签：c, web-applications, webserver

I am developping a web application on G-WAN server which is a multi thread web server. I don't have enough information about using the KV store available with G-WAN in a multi thread environment and the G-WAN forum is closed to post a question... That's why I am looking for an other fast KV store developped for being used in a multi thread environment. The value size will be small, less than 20KB. Do you know a fast KV store for dealing with data with a size less than 20KB very quickly? I have heard about memcached, REDIS, Tokyo Cabinet... but which one is best for multi thread environment and for storing small data size?

In fact I want to store in the KV store the URL as the key and for the value associated the HTML data and a counter of number of times the HTML data has been displayed. I just want to be sure that the counter will be incremented correctly in a multi thread environment, if possible without using mutex and others things to manage possible concurrent accesses to the same data at the same time.

If you have any experience of using a KV store in a multi thread environment can you share your experience please?

Thank you Jérôme

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:21:43.907

您关于 G-Wan 的 KV 商店的[问题已在此处得到解答](https://stackoverflow.com/questions/12006364/managing-the-caching-in-g-wan-with-kv-store/12062320#12062320)。

`lock`与所建议的类似的`semaphore`优点相比`GDBM`，G-Wan 的 KV 存储在线程持有锁时永远不会阻塞：没有锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:54:50.503

对于一些小而简单的事情，我个人会考虑使用老式的[GDBM](http://www.gnu.org.ua/software/gdbm/)。虽然它本身不是线程安全的，但它足够小、简单且足够快，尤其是对于少量数据。通过使用简单信号量阻塞的包装函数，添加线程安全应该很简单。

# c - 分段错误（核心转储）

> ID：12034607
> 
> 赞同：0
> 
> 时间：2012-08-20T08:44:40.640
> 
> 标签：c, unix

我在以下代码中收到分段错误（核心转储）：

```
void Update_Log( )
{
        struct logData update;
        int file;

        char *writeBuffer=NULL;

        if((file=creat("/home/user/Desktop/DMS/DMS/filename.txt",O_RDONLY|O_WRONLY))==-1)
                perror("file not opened");
        update.clientName="user";
        update.filename="user";
        update.timestamp="some time";
        sprintf(writeBuffer,"%s %s %s",update.clientName,update.filename,update.timestamp);

        if((write(file,writeBuffer,sizeof(writeBuffer)))==-1)
                perror("write unsuccessful");
        close(file);
} 
```

我的结构如下：

```
struct logData
{
        char *clientName;
        char *filename;
        char *timestamp;
}; 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:46:27.037

您正在尝试写入`writeBuffer`哪个是空指针，您应该将其声明为数组（1），或者在堆（2）上为其分配内存。

1.  `char writeBuffer[100];`
2.  `char *writeBuffer=malloc(100)`

在这两种情况下，您都不应该使用`sprintf`，但`snprintf`要确保您没有溢出缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:47:54.680

创建“更新”时，它只为字符串 clientName、filename、timestamp 的指针分配空间；它不为字符串本身分配空间。一个快速的技巧是做一些类似 update.clientName = (char*)malloc(sizeof(char)*len) 的事情，其中​​ len 是你想要分配的长度。那么你真的应该检查那个调用的返回码......

这与写缓冲区的问题完全相同……您只需要确保为所有字符串分配空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:49:12.073

错误是这两行：

```
char *writeBuffer=NULL;

/* ... */

sprintf(writeBuffer, /* ... */); 
```

在这里你写入一个`NULL`指针。

而是创建一个数组，例如

```
char writeBuffer[32]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:50:20.570

您需要为 writeBuffer 分配空间。

您可以使用 malloc，或者如果您对数据的大小有限制（例如，如果它小于 256 字节），只需将其声明为

```
char writeBuffer[256]; 
```

我还建议查找并使用 snprintf 而不是 sprintf 以确保数据不会跑完。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T08:51:19.813

您的结构仅存储*指针*，没有为实际数据分配内存。要么你应该有

```
struct logData
{
        char clientName[SOMEDEFINE1NUMBERHERE];
        char filename[SOMEDEFINE2NUMBERHERE];
        char timestamp[SOMEDEFINE3NUMBERHERE];
}; 
```

或者你分配内存 ( `malloc`)

update.clientname = (char *)malloc(SOMEDEFIN1NUMBERHERE); strncpy(update.clientname, "用户");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T08:57:53.420

正如 Binyamin Sharet 所写`sprintf`的那样，没有分配输出缓冲区。调用者必须提供*足够长*的输出缓冲区。这并不总是那么简单。因此，我建议您使用`fopen`而不是`open`. 然后你可以这样编码：

```
void Update_Log( )  
{  
        struct logData update;  
        FILE *file = fopen("/home/user/Desktop/DMS/DMS/filename.txt", "w");  

        if(file==NULL) {  
                perror("file not opened");  
                return;
        }
        update.clientName="user";  
        update.filename="user";  
        update.timestamp="some time";  
        if(fprintf(file,"%s %s %s",update.clientName,update.filename,update.timestamp) < 0)  
                perror("write unsuccessful");  
        fclose(file); 
```

}

As you can see the code is shorter and it has no potential buffer overflow.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-20T08:48:56.473

它崩溃了，因为`writeBuffer`是`NULL`.

您需要为`writeBuffer`使用 malloc 分配内存 - 使用`strlen`（例如）来计算必要的空间（不要忘记`\0`和中的空格`sprintf`）。

或者，您可以自动分配一些固定大小的数组：

```
char writeBuffer[ SOME_SIZE_BIG_ENOUGH ]; 
```

* * *

此外，您不应该这样做：

```
 update.clientName="user";
    update.filename="user";
    update.timestamp="some time"; 
```

你有几个选择：

*   采用[`strcpy`](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)
*   使用`strdup`（POSSIX）
*   做指针`const char*`，不只是`char*`。

# mysql - 如何确定MYSQL select返回的行数

> ID：12034608
> 
> 赞同：2
> 
> 时间：2012-08-20T08:44:39.883
> 
> 标签：mysql

我想在我的程序中添加一个进度条。

是否可以在发送数据之前读取选择命令将返回的行数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:48:02.810

不，你之前必须做这样的事情

```
select count(*) from your_table where ... 
```

然后是真正的查询

```
select col1, col2 from your_table where ... 
```

原因是数据库引擎在应用查询并搜索数据之前不知道它将返回多少条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:47:29.860

无法确定处理一份声明需要多长时间。如果您想知道一条语句将返回多少个数据集，您需要执行该语句才能知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:47:54.120

我认为你唯一能做的就是触发两个查询一个

```
select count(*) ..... 
```

另一个是

```
select * from .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T08:50:08.317

```
Select count(*) from `table` where <condition>. 
```

如果您不指定要查找的内容，MySql 将不知道要计算什么。

# api - Get exact employee count on LinkedIn?

> ID：12034609
> 
> 赞同：1
> 
> 时间：2012-08-20T08:44:44.423
> 
> 标签：api, linkedin

I'm looking to pull the exact employee count for a given company on LinkedIn. From what I have found, this data is not accessible through the API or on the public site, so the only remaining option I see is to programmatically authenticate and scrape the company page for logged-in users. Anyone have other ideas or know how to do that?

Thanks for the help in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:44:53.057

如果您一心想通过抓取网站来获得准确的数字，那么到目前为止，最简单的方法是使用Python 中的[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。简而言之，您给它一个网址，它会将所有数据以易于遍历的对象的形式返回给您。

对于员工数量，取决于一个人的公司信息显示在哪里，它可以简单到给它所有你想检查的人，然后做

```
All_Companies[body.companyDiv.companyName]++ 
```

我真的希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:51:49.187

您将从 LinkedIn 获得的最好的东西是通过[Company API](https://developer.linkedin.com/documents/company-lookup-api-and-fields)`<employee-count-range>`的元素。其值的图例如下：

```
A = 1
B = 2-10
C = 11-50
D = 51-200
E = 201-500
F = 501-1000
G = 1001-5000
H = 5001-10000
I = 10001+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T08:57:19.767

```
LinkedInApiClientFactory mfactory = LinkedInApiClientFactory.newInstance(Constants.consumerKey, Constants.consumerSecret);
        CompaniesApiClient clientcompany = mfactory.createCompaniesApiClient(Constants.token, Constants.tokenSecret);
        Company company = clientcompany.getCompanyById("YOUR PAGE ID", EnumSet.allOf(CompanyField.class));
if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("A")) {
       System.out.println("-->Emplyee count--"+"1");
    }else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("B")) {
         System.out.println("-->Emplyee count--"+"2-10");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("C")) {
         System.out.println("-->Emplyee count--"+"11-50");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("D")) {
         System.out.println("-->Emplyee count--"+"51-200");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("E")) {
         System.out.println("-->Emplyee count--"+"201-500");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("F")) {
         System.out.println("-->Emplyee count--"+"501-1000");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("G")) {
         System.out.println("-->Emplyee count--"+"1001-5000");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("H")) {
         System.out.println("-->Emplyee count--"+"50001-10000");
    }
    else if (company.getEmployeeCountRange().getCode().equalsIgnoreCase("H")) {
     System.out.println("-->Emplyee count--"+"10000 and above");
   } 
```

# c# - IEEE 1xxx 浮点格式的字符串表示形式是什么，如何输出？

> ID：12034611
> 
> 赞同：0
> 
> 时间：2012-08-20T08:44:47.583
> 
> 标签：c#, floating-point, cultureinfo, vrml, iformatprovider

我正在尝试以 VRML 2.0 使用的格式从 c# 输出浮点数。

根据[vrml 规范](http://www.cs.auckland.ac.nz/references/vrml/x3d/part5/EncodingOfFields.html)，这是

> IEEE 1xxx 浮点格式的双精度浮点数（参见 2.[IEEE]）。
> 
> [IEEE]：ISO/IEC 9899:1990 编程语言——C. [http://www.iso.ch/isob/switch-engine-cate.pl?searchtype=refnumber&KEYWORDS=9899](http://www.iso.ch/isob/switch-engine-cate.pl?searchtype=refnumber&KEYWORDS=9899) *（死链接）*

*   这种格式的正确字符串表示是什么？我很难找到参考。我找到了一些关于二进制表示的解释，但没有找到关于字符串表示的解释。
*   如何根据这种格式配置 NumberFormatInfo 或 CultureInfo ？

* * *

*澄清：*

我想生成一个 vrml 文件，我需要知道如何确保

```
var myCultureInfo = CultureInfo.InvariantCulture;
myCultureInfo.NumberFormat = ....
StringWriter sw = new StringWriter(MyCultureInfo)
sw.Write(myDouble); 
```

根据 vrml 规范，将产生一个 100% 的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:27:32.337

我在某处看到 VRML 使用与 ISO C 相同的浮点数格式。甚至您提到的 VRML 规范页面也暗示了这一点：

> *SFFloat 字段指定一个单精度浮点数。MFFloat 指定零个或多个单精度浮点数。SFFloats 和 MFFloats 以 IEEE 1xxx 浮点格式写入 VRML 文件（参见[2.[IEEE]](http://www.cs.auckland.ac.nz/references/vrml/x3d/part5/references.html#%5bISOC%5d)）。*

请注意该超链接指向的位置：指向 ISO C 的参考书目条目。

因此，如果您只是禁用任何特定于文化的格式（例如特殊小数点、分隔三个数字块的字符等），您应该获得正确的格式。您可以通过使用“不变文化”来做到这一点：

```
double number = …;
string numberEncoding = number.ToString(CultureInfo.InvariantCulture.NumberFormat); 
```

如果要控制数字的输出格式，另请参阅[标准数字格式字符串，例如](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx "MSDN 参考页面")

*   对于科学格式：

    ```
    number.ToString("E", CultureInfo.InvariantCulture.NumberFormat) 
    ```

*   对于往返格式：

    ```
    number.ToString("R", CultureInfo.InvariantCulture.NumberFormat) 
    ```

…等等。

**PS**：如果您不太相信不变的文化将是完全正确的匹配，您总是可以创建自己的实例`NumberFormatInfo`：

```
var vrmlNumberFormat = new NumberFormatInfo { NumberDecimalSeparator = ".", … };
string numberEncoding = number.ToString(vrmlNumberFormat); 
```

# rbac - Xacml in tinyOS

> ID：12034612
> 
> 赞同：-1
> 
> 时间：2012-08-20T08:45:00.080
> 
> 标签：rbac, xacml, tinyos, nesc

I have to implement an rbac in mica motes. I've read that Xacml helps in implementation of rbac. But I searched tutorials and google and I'm not able to find anything relevant.Can some one please explain how it should be done or any lead to references.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:14:33.493

该博客将帮助您了解 xacml [1]。您可以从此处 [2] [3] 找到已使用 rbac 用例的 xacml 示例。实际上在 XACML 中，abac 和 rabc 都可以实现，这取决于您如何定义 xacml 策略。在您的策略中，您可以定义角色“bar”可以读取的“foo”资源。但实际上您想检查用户“bob”的授权。然后必须有一个 PIP [4] 在哪里，它有助于找到“鲍勃”的角色。

[1] [http://xacmlinfo.com/category/xacml/](http://xacmlinfo.com/category/xacml/) [2] [http://xacmlinfo.com/2012/08/16/xacml-sample-for-on-line-trading-application/](http://xacmlinfo.com/2012/08/16/xacml-sample-for-on-line-trading-application/) [3] [http ://xacmlinfo.com/2012/08/16/resource-filtering-with-xacml/](http://xacmlinfo.com/2012/08/16/resource-filtering-with-xacml/) [4] [http://xacmlinfo.com/2011/12/18/understanding-pip/](http://xacmlinfo.com/2011/12/18/understanding-pip/)

# java - Adding image to JButton

> ID：12034613
> 
> 赞同：5
> 
> 时间：2012-08-20T08:45:07.213
> 
> 标签：java, image, swing, jbutton

I want to add an image to a `JButton`. Background of the button is set to black. I tried to add the image on top of it, but nothing was shown. Background color was black but the image was missing.

## Code

```
public class Test extends JFrame {

    JButton b;
    JPanel p;

    Test() {
        p = new JPanel(new BorderLayout());
        b = new JButton();
        b.setBackground(Color.black);
        ImageIcon img = new ImageIcon("C:\\Users\\Aksi\\Documents\\NetBeansProjects\\test'\\src\\test\\Black_B.ico");
        b.setIcon(img);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(400, 400);
        p.add(b);
        add(p);
       validate();

   }
    public static void main(String args[]) throws IOException {
        Test ob = new Test();
        ob.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T08:50:57.577

两件事情

1.  路径看起来不对
2.  Java 本身不支持该`ico`格式

看一下路径，路径中有引号

```
C:\\Users\\Aksi\\Documents\\NetBeansProjects\\test'\\src\\test\\Black_B.ico 
```

只要确定它是否存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:59:25.580

请注意，您应该使用一些 Java 支持的图像格式，例如 .gif、.png。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:34:10.753

它在 Oracle 上有很好的记录。

[http://docs.oracle.com/javase/tutorial/uiswing/components/button.html](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T09:57:28.897

试试这个方法：

在您的 java 项目中创建包，如 com.icon 并在其中添加图标。

您将通过这种方式设置图标的 on 按钮：

```
button.setIcon(new ImageIcon(MyFrame.class.getResource("com/icon/Ok.png"))); 
```

只是一个建议：使用 .png 而不是 .ico。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-03T05:43:12.330

这是我用来添加文字图片的方式：

```
Icon a=new ImageIcon(getClass().getResource("a.png"));
buttonname=new JButton("ButtonTittle",a); 
```

# java - How to nicely lay out a tree in the form of a table (using merged cells)

> ID：12034614
> 
> 赞同：4
> 
> 时间：2012-08-20T08:45:17.757
> 
> 标签：java, html, tree, html-table, spreadsheet

**Background:** I have some data that I want to present in a table. Each column in the table has a header. Some of these headers in turn, have common headers. In other words, I have a *tree of headers* that I want to show in the table cells.

**Problem:** How to nicely lay out a *tree* in the form of *table* by means of merging cells (cf merged cells in Excel or `rowspan` / `colspan` in HTML tables)?

Some requirements:

Given a tree like the following:

```
+ Header 1
|---+ Header 2
|   |---- Header 4
|   '---+ Header 5
|       |---- Header 8
|       '---- Header 9
'---+ Header 3
    |---- Header 6
    '---- Header 7 
```

*   The resulting table should always be rectangular, i.e. this is **not acceptable**:

    ```
    .-------------------------------------------.
    |                  Header 1                 |
    +--------------------------+----------------+
    |    Header 2              |    Header 3    |
    +----------+---------------+--------+-------+
    | Header 4 |   Header 5    |  Hdr 6 | Hdr 7 |
    '----------+-------+-------+--------+-------'
               | Hdr 8 | Hdr 9 |
               '-------+-------' 
    ```

*   The height of the cells should be as evenly distributed as possible. (There should be no unecessary height constraints between siblings.) For instance solving the above situation by simply letting the leaves grow downwards like this is **not acceptable**:

    ```
    .-------------------------------------------.
    |                  Header 1                 |
    +--------------------------+----------------+
    |    Header 2              |    Header 3    |
    +----------+---------------+--------+-------+  <-- Height of Header 3
    |          |   Header 5    |        |       |      constrained by
    | Header 4 +-------+-------+  Hdr 6 | Hdr 7 |      height of Header 2
    |          | Hdr 8 | Hdr 9 |        |       |
    '----------+-------+-------+--------+-------' 
    ```

*   The correct output should look something like this:

    ```
    .-------------------------------------------.
    |                  Header 1                 |
    +--------------------------+----------------+
    |    Header 2              |    Header 3    |
    +----------+---------------+                |
    | Header 4 |   Header 5    |--------+-------+  <-- constraint relaxed.
    |          +-------+-------+  Hdr 6 | Hdr 7 |
    |          | Hdr 8 | Hdr 9 |        |       |
    '----------+-------+-------+--------+-------' 
    ```

*   The number of rows used should be minimized. In other words, the right version is preferred over the left version below:

    ```
    .--------------------------.         .--------------------------.
    |  Rowspan 3               |         |  Rowspan 1               |
    +-------------+------------+         +-------------+------------+
    |  Rowspan 4  | Rowspan 6  |   -->   |  Rowspan 2  | Rowspan 3  |
    +-------------+            |         +-------------+            |
    |  Rowspan 6  +------------+         |  Rowspan 3  +------------+
    |             | Rowspan 4  |         |             | Rowspan 2  |
    '-------------+------------'         '-------------+------------'

    Unecessarily large rowspans.             Minimized rowspans.
      (actual height: 13 rows)             (actual height: 6 rows) 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:49:53.187

像往常一样，仔细解释问题似乎有所帮助。我相信我想通了。关键思想是递归地遍历树并（除其他外）计算每一步中所有子树深度的[最小公倍数](http://en.wikipedia.org/wiki/Least_common_multiple)。

答案是用 Java 编写的，但重写为 PHP、C# 或 what-have-you 应该很简单。它指的是以下两个辅助类并以 HTML 表为目标。

```
class Tree {
    String val;
    Tree[] children;
    ...
}

class Cell {
    String val;
    int row, col, rowspan, colspan;
    ...
} 
```

解决方案分为两部分：

1.  从 转换`Tree`为`List<Cell>`。

2.  布局`List<Cell>`合理`<table>...</table>`。

    （如果以电子表格等为目标，则可能不需要。）

## 从`Tree`到转换`List<Cell>`

这是使用下面定义的方法完成`rowsToUse`的`getCells`。前者计算布局给定树所需的总行数，后者生成实际`Cell`的 s。参数表示以下内容：

*   `t``Cell`是应该为其生成 s的树的根。
*   `row`and`col`表示最顶层（根）单元格的当前行和列。
*   `rowsLeft`指定当前树应该分布在多少行上。

以下是两种方法：

```
public static int rowsToUse(Tree t) {
    int childrenRows = t.children.length == 0 ? 0 : 1;
    for (Tree child : t.children)
        childrenRows = lcm(childrenRows, rowsToUse(child));
    return 1 + childrenRows;
}

public static List<Cell> getCells(Tree t, int row, int col, int rowsLeft) {

    // Add top-most cell corresponding to the root of the current tree.
    int rootRows = rowsLeft / rowsToUse(t);
    List<Cell> cells = new ArrayList<Cell>();
    cells.add(new Cell(t.val, row, col, rootRows, width(t)));

    // Generate cells for subtrees.
    for (Tree child : t.children) {
        cells.addAll(getCells(child, row+rootRows, col, rowsLeft-rootRows));
        col += width(child);
    }

    return cells;
} 
```

方法`depth`，`width`和`lcm`是直截了当的。如果您愿意，请参阅底部的完整源代码。

## 布局`List<Cell>`合理`<table>...</table>`

```
public static String getHtmlTable(List<Cell> cells) {

    // Sort the cells primarily on row, secondarily on column.
    Collections.sort(cells, new Comparator<Cell>() {
        public int compare(Cell c1, Cell c2) {
            int pri = Integer.valueOf(c1.row).compareTo(c2.row);
            int sec = Integer.valueOf(c1.col).compareTo(c2.col);
            return pri != 0 ? pri : sec;
        }
    });

    // Lay out the cells row by row.
    StringBuilder result = new StringBuilder("<table><tbody>");
    for (int row = 0, i = 0; i < cells.size(); row++) {
        result.append("<tr>\n");
        for (; i < cells.size() && cells.get(i).row == row; i++)
            result.append(cells.get(i).asTdTag());
        result.append("</tr>\n");
    }
    return result.append("</tbody></table>").toString();
} 
```

## 完整的源代码和演示。

这是完整的来源。鉴于树

```
Tree t = new Tree("1",
           new Tree("2",
             new Tree("4"),
               new Tree("5",
                 new Tree("8"),
                 new Tree("9"))),
           new Tree("3",
             new Tree("6"),
             new Tree("7"))); 
```

它产生以下表格主体：

```
<tr><td colspan='5'>1</td></tr>
<tr><td colspan='3' rowspan='2'>2</td><td colspan='2' rowspan='3'>3</td></tr>
<tr></tr>
<tr><td rowspan='4'>4</td><td colspan='2' rowspan='2'>5</td></tr>
<tr><td rowspan='3'>6</td><td rowspan='3'>7</td></tr>
<tr><td rowspan='2'>8</td><td rowspan='2'>9</td></tr> 
```

看起来像

![在此处输入图像描述](../Images/728165dc6b0dc3b0c7822b29df8ab7b3.png)

完整来源：

```
import java.io.*;
import java.util.*;

class Tree {

    String val;
    Tree[] children;

    public Tree(String val, Tree... children) {
        this.val = val;
        this.children = children;
    }
}

class Cell {
    String val;
    int row, col, rowspan, colspan;
    public Cell(String val, int row, int col, int rowspan, int colspan) {
        this.val = val;
        this.row = row;
        this.col = col;
        this.rowspan = rowspan;
        this.colspan = colspan;
    }

    public String asTdTag() {
        String cs = colspan == 1 ? "" : " colspan='" + colspan + "'";
        String rs = rowspan == 1 ? "" : " rowspan='" + rowspan + "'";
        return "<td" + cs + rs + ">" + val + "</td>";
    }
}

public class TreeTest {

    public static int rowsToUse(Tree t) {
        int childrenRows = t.children.length == 0 ? 0 : 1;
        for (Tree child : t.children)
            childrenRows = lcm(childrenRows, rowsToUse(child));
        return 1 + childrenRows;
    }

    public static List<Cell> getCells(Tree t, int row, int col, int rowsLeft) {

        // Add top-most cell corresponding to the root of the current tree.
        int rootRows = rowsLeft / rowsToUse(t);
        List<Cell> cells = new ArrayList<Cell>();
        cells.add(new Cell(t.val, row, col, rootRows, width(t)));

        // Generate cells for subtrees.
        for (Tree child : t.children) {
            cells.addAll(getCells(child, row+rootRows, col, rowsLeft-rootRows));
            col += width(child);
        }

        return cells;
    }

    public static int width(Tree t) {
        if (t.children.length == 0)
            return 1;
        int w = 0;
        for (Tree child : t.children)
            w += width(child);
        return w;
    }

    public static int lcm(int a, int b) {
        int c = a * b;
        while (b > 0) {
            int t = b;
            b = a % b;
            a = t;
        }
        return c / a;
    }

    public static String getHtmlTable(List<Cell> cells) {

        // Sort the cells primarily on row, secondarily on column.
        Collections.sort(cells, new Comparator<Cell>() {
            public int compare(Cell c1, Cell c2) {
                int pri = Integer.valueOf(c1.row).compareTo(c2.row);
                int sec = Integer.valueOf(c1.col).compareTo(c2.col);
                return pri != 0 ? pri : sec;
            }
        });

        // Lay out the cells row by row.
        StringBuilder result = new StringBuilder("<table><tbody>");
        for (int row = 0, i = 0; i < cells.size(); row++) {
            result.append("<tr>\n");
            for (; i < cells.size() && cells.get(i).row == row; i++)
                result.append("  " + cells.get(i).asTdTag() + "\n");
            result.append("</tr>\n");
        }
        return result.append("</tbody></table>").toString();
    }

    public static void main(String[] args) throws IOException {

        Tree t = new Tree("1",
                new Tree("2",
                  new Tree("4"),
                    new Tree("5",
                      new Tree("8"),
                      new Tree("9"))),
                new Tree("3",
                  new Tree("6"),
                  new Tree("7")));

        FileWriter fw = new FileWriter("tree.html");

        List<Cell> cells = getCells(t, 0, 0, rowsToUse(t));

        fw.write("<html><head><style>table, td { border-style: solid; } " +
                 "table { border-spacing: 0px; border-width: 0 0 1px 5px; } " +
                 "td { padding: 15px; text-align: center; " +
                 "border-width: 1px 5px 0 0;} </style></head><body>");
        fw.write(getHtmlTable(cells));
        fw.write("</body></html>");

        fw.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:27:21.440

在客户端执行此操作的一种可能方法是使用带有一些递归的 JavaScript。下面的代码假定树表示为一个**邻接列表**——一个二维数组，其中每个元素都包含一个子数组。以下是您帖子中示例树的定义：（`var adjList = [[1, 2], [3, 4], [5, 6], [], [7, 8], [], [], [], []];`请注意，索引已更改为基于 0 的索引，因此 1 变为 0，2 变为 1，等等...）。该代码非常不言自明（如果它含糊不清，我很乐意解释任何部分）：

```
function fill(par, id) {
    var children = adjList[id].length;
    if(children == 0) {
        par.innerHTML += "Header " + (id + 1);
        return;
    }
    par.innerHTML += "<table border = '1px'><tr><td colspan = '" + children + "'>Header " + (id + 1) + "</td></tr><tr></tr></table>";
    var tbl = par.getElementsByTagName("table")[0];
    var rw = tbl.rows[1];
    for(var i = 0; i < children; i ++) {
        rw.innerHTML += "<td></td>";
    }
    for(var i = 0; i < children; i ++ ) {
        fill(tbl.rows[1].cells[i], adjList[id][i]);
    }
} 
```

初始调用：`fill(document.getElementsByTagName("body")[0], 0);`

需要一些 CSS：

```
table {
     height: 100%;
}
td, tr, table {
    border-collapse: collapse;
} 
```

当然，还有一个小演示：[little link](http://goo.gl/9Za9P)。

结果将如下所示：

![在此处输入图像描述](../Images/9a3f943adbdf17b005386a56301deccd.png)

希望以任何方式有所帮助！

# jquery - no alert when two value are called with jquery

> ID：12034617
> 
> 赞同：1
> 
> 时间：2012-08-20T08:45:24.043
> 
> 标签：jquery, alert

Neither of the alert box works for following code -

```
var genvalue=('input[#gender]:checked').val());
alert (genvalue);

var value = $("#edu_det1").val();
alert (value); 
```

But when genvalue, the whole portion of code is remove it work. Don't know what the problem

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:46:58.230

you are missing $. (jquery object). try to include your jquery library. or else you can use Jquery CDN

```
var genvalue=('input[#gender]:checked').val());// here $ is missing 
```

use the CDN

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type='text/javascript'> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:52:13.817

如果您尝试获取具有 ID 的元素，只需定位该 ID，因为它应该是唯一的：

```
var genvalue = $('#gender').val();
alert (genvalue);

var value = $("#edu_det1").val();
alert (value); 
```

否则你也可以这样做：

```
var genvalue = $('input[id="gender"]:checked').val(); 
```

但这与拥有ID的意义相去甚远！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T21:26:06.297

这是正确的代码，您错过了 $

```
var genvalue=$('input[#gender]:checked').val());
alert (genvalue);

var value = $("#edu_det1").val();
alert (value); 
```

如果您正在应用其他东西，那么它可能无法正常工作。根据您的代码进行的更正仅此而已，但如果您需要更多更正仍然出错，则需要提供更多代码片段。

那么试试这个以获得更多信息并了解[jquery值选择方法](http://api.jquery.com/val/)

# google-apps-script - CSS Styling HtmlService.createHtmlOutput

> ID：12034618
> 
> 赞同：0
> 
> 时间：2012-08-20T08:45:24.767
> 
> 标签：google-apps-script

How do you style the whole page background color of your apps script embedded in a Google sites web page. Currently I could use a div like this.

```
function doGet() {
  return HtmlService.createHtmlOutput('<div style="background-color:#e9eccf"<h1>Hello</h1><p>Test</p></div>');
  } 
```

Any other ways to CSS style the HtmlService output?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:43:17.483

通常你会通过对`<body>`元素应用样式来做到这一点。不幸的是，目前 HtmlService 使用的 Caja 引擎中存在一个错误，导致它无法工作。目前最好的解决方案是使用您可以设置样式的包装 div。

# websphere - 列出 WebSphere 7 中的系统属性

> ID：12034622
> 
> 赞同：1
> 
> 时间：2012-08-20T08:45:30.100
> 
> 标签：websphere, websphere-7

我有一个正在运行的 WebSphere Application Server 7 实例，我需要知道 Java 系统属性的当前值。

有什么方法可以获取这些信息吗？

（我想知道侵入性最小的方式，所以不考虑添加打印属性的 JSP）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:28:32.580

触发线程转储（javacore）。这将需要几秒钟，并且几乎不会被注意到。线程转储将在其信息部分列出 JVM 的所有环境属性。搜索标志 1CIENVVARS、2CIENVVAR，如下面的片段所示。

```
...
1CIENVVARS     Environment Variables
NULL           ------------------------------------------------------------------------
2CIENVVAR      _=/WebSphere/AppServer/java/bin/java
2CIENVVAR      LANG=en_US
2CIENVVAR      CONFIG_ROOT=/WebSphere/AppServer/profiles/Srv02/config
2CIENVVAR      LOGIN=wasadmin
2CIENVVAR      SSH_TTY=/dev/pts/1
2CIENVVAR      CLCMD_PASSTHRU=1
2CIENVVAR      PATH=/WebSphere/AppServer/java/ibm_bin:/WebSphere/AppServer/java/bin/:/WebSphere/AppServer/java/jre/bin:/WebSphere/AppS
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T04:46:56.010

我可以通过`wsadmin`脚本按名称获取特定属性，但似乎没有等效的方法来列出“所有”属性。

这可能对您没有帮助，但如果将来有人有类似的需求，这里有几个 Jython 命令来检索标准系统属性之一。

```
jvm = AdminControl.completeObjectName('WebSphere:type=JVM,process=YourServerName,*')
AdminControl.invoke(jvm,'getProperty','user.timezone') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:58:07.177

如果没有更好的选择，将 JSP 直接部署到文件系统或通过控制台的单文件部署应该不会太麻烦。特别是考虑到您不必实际更改构建的 WAR 文件即可在其之上部署独立的 JSP。

# android - Unrecognized URI: content://mms-sms/

> ID：12034625
> 
> 赞同：1
> 
> 时间：2012-08-20T08:45:49.220
> 
> 标签：android, database, sms, mms

I want to get all MMS and SMS message records at the same time, but `mms-sms` seems to be an *Unrecognized URI* which I copy from android's source...

```
getContentResolver().query(Uri.parse("content://mms-sms"), projections, null, null, null); 
```

Here is the stacktrace, after using code below:

code:

```
 Uri uri = Uri.parse("content://mms-sms/conversations/");
    Cursor query = contentResolver.query(uri, null, null, null, null); 
```

log:

```
08-20 18:02:26.696: E/AndroidRuntime(2637): FATAL EXCEPTION: main
08-20 18:02:26.696: E/AndroidRuntime(2637): java.lang.NullPointerException
08-20 18:02:26.696: E/AndroidRuntime(2637):     at android.os.Parcel.readException(Parcel.java:1328)
08-20 18:02:26.696: E/AndroidRuntime(2637):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
08-20 18:02:26.696: E/AndroidRuntime(2637):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
08-20 18:02:26.696: E/AndroidRuntime(2637):     at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330)
08-20 18:02:26.696: E/AndroidRuntime(2637):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:34:08.313

将“content://mms-sms/conversations/”更改为“content://mms-sms/conversations”应该可以了。

# asp.net - Getting data from a radgrid into a data table

> ID：12034628
> 
> 赞同：1
> 
> 时间：2012-08-20T08:46:07.060
> 
> 标签：asp.net, datatable, telerik, radgrid

I am trying to do the following but with a radgrid, that does not have a Rows attribute. How can i do the equivalent?

Thanks

```
DataTable dt = new DataTable();    
for (int j = 0; j < grdList.Rows.Count; j++)
{

    DataRow dr;
    GridViewRow row = grdList.Rows[j];
    dr = dt.NewRow();
    for (int i = 0; i < row.Cells.Count; i++)
    {
        dr[i] = row.Cells[i].Text;
    }

    dt.Rows.Add(dr);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:10:42.310

请尝试以下代码片段。

.aspx

```
<telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False" OnItemDataBound="RadGrid1_ItemDataBound"
        OnNeedDataSource="RadGrid1_NeedDataSource" AllowPaging="true" AllowFilteringByColumn="true"
        EnableLinqExpressions="false">
        <MasterTableView CommandItemDisplay="Top" DataKeyNames="ID">
            <Columns>
                <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
                </telerik:GridBoundColumn>
                <telerik:GridEditCommandColumn>
                </telerik:GridEditCommandColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid>
    <br />
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" /> 
```

.aspx.cs

```
 protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
    {
        dynamic data = new[] {
          new { ID = 1, Name ="aaa"},
          new { ID = 2, Name = "bbb"},
          new { ID = 3, Name = "ccc"},
          new { ID = 4, Name = "ddd"},
           new { ID = 5, Name ="eee"}
        };
        RadGrid1.DataSource = data;
    }

    protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        DataTable dt = new DataTable();

        int columncount = 0;

        foreach (GridColumn column in RadGrid1.MasterTableView.Columns)
        {
            if (!string.IsNullOrEmpty(column.UniqueName) && !string.IsNullOrEmpty(column.HeaderText))
            {
                columncount++;
                dt.Columns.Add(column.UniqueName, typeof(string));
            }
        }

        DataRow dr;
        foreach (GridDataItem item in RadGrid1.MasterTableView.Items)
        {
            dr = dt.NewRow();

            for (int i = 0; i < columncount; i++)
            {
                dr[i] = item[RadGrid1.MasterTableView.Columns[i].UniqueName].Text;
            }

            dt.Rows.Add(dr);
        }

        // Access Your DataTable
    } 
```

用VB代码。

.aspx

```
<div>
 <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
    </telerik:RadScriptManager>
    <telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server">
    </telerik:RadAjaxLoadingPanel>
    <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="False" OnItemDataBound="RadGrid1_ItemDataBound"
        OnNeedDataSource="RadGrid1_NeedDataSource" AllowPaging="true" AllowFilteringByColumn="true"
        EnableLinqExpressions="false">
        <MasterTableView CommandItemDisplay="Top" DataKeyNames="ID">
            <Columns>
                <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
                </telerik:GridBoundColumn>
                <telerik:GridEditCommandColumn>
                </telerik:GridEditCommandColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid>
    <br />
    <asp:Button ID="Button1" runat="server" Text="Generate Table" OnClick="Button1_Click" />
    <asp:Button ID="Button2" runat="server" Text="check Table" OnClick="Button2_Click" />
    <telerik:RadGrid ID="RadGrid2" runat="server" AutoGenerateColumns="False">
        <MasterTableView>
            <Columns>
                <telerik:GridBoundColumn DataField="ID" UniqueName="ID" HeaderText="ID">
                </telerik:GridBoundColumn>
            </Columns>
        </MasterTableView>
    </telerik:RadGrid>
    <br />
</div> 
```

.aspx.vb

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
    'Stopwatch sw = Stopwatch.StartNew();
    'string str = sw.Elapsed.Seconds.ToString();
    'sw.Stop();

    If Not IsPostBack Then
        Session("GridTable") = Nothing
    End If

End Sub

Protected Sub RadGrid1_NeedDataSource(ByVal sender As Object, ByVal e As    GridNeedDataSourceEventArgs)
    Dim dt As New DataTable()
    dt.Columns.Add("ID", GetType(Integer))
    dt.Columns.Add("Name", GetType(String))
    dt.Rows.Add(1, "Name1")
    dt.Rows.Add(2, "Name2")
    dt.Rows.Add(3, "Name3")
    dt.Rows.Add(4, "Name4")
    RadGrid1.DataSource = dt
End Sub

Protected Sub RadGrid1_ItemDataBound(ByVal sender As Object, ByVal e As GridItemEventArgs)

End Sub

Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim dt As New DataTable()

    Dim columncount As Integer = 0

    For Each column As GridColumn In RadGrid1.MasterTableView.Columns
        If Not String.IsNullOrEmpty(column.UniqueName) AndAlso Not String.IsNullOrEmpty(column.HeaderText) Then
            columncount += 1
            dt.Columns.Add(column.UniqueName, GetType(String))
        End If
    Next

    Dim dr As DataRow
    For Each item As GridDataItem In RadGrid1.MasterTableView.Items
        dr = dt.NewRow()

        For i As Integer = 0 To columncount - 1
            dr(i) = item(RadGrid1.MasterTableView.Columns(i).UniqueName).Text
        Next

        dt.Rows.Add(dr)
    Next

    Session("GridTable") = dt
    ' Access Your DataTable
End Sub

Protected Sub Button2_Click(ByVal sender As Object, ByVal e As EventArgs)
    If Session("GridTable") IsNot Nothing Then
        Dim dt As DataTable = DirectCast(Session("GridTable"), DataTable)
        RadGrid2.DataSource = dt
        RadGrid2.DataBind()
    End If
End Sub

'=======================================================
'Service provided by Telerik (www.telerik.com)
'Conversion powered by NRefactory.
'Twitter: @telerik, @toddanglin
'Facebook: facebook.com/telerik
'======================================================= 
```

# php - 网络服务和 PHP

> ID：12034633
> 
> 赞同：-1
> 
> 时间：2012-08-20T08:46:32.340
> 
> 标签：php, web-services

我工作的那家小公司要求我用 PHP 编写 Web 服务。我使用过网络服务（Flickr、Youtube 等）。但是从来没有写过。我是一位经验丰富的 PHP Web 开发人员（显然不是 Web 服务）。

在接受/拒绝此任务之前。网络服务有什么特别之处吗，或者我可以这样做吗：

```
if ($GET["something"]==="somethingelse")
{
header('Content-Type: application/json');
    echo json_encode(array(Answer => 'yes'));
} 
```

我可以那样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:07:54.703

是的，你可以，事实上，我认为这是你的第一个 web 服务的一个好的开始。

拥有一个带有不同分支的 php 脚本（对 url 参数进行 if 测试）是创建 Web 服务的非常快速和简单的方法。

除非严格要求，否则我不会使用基于 SOAP/XML 的 Web 服务。（节省编写 WSDL、测试等的时间）。SOAP/XML 网络服务可能会为您提供像 UDDI（服务目录）这样的功能，但同样，如果不需要的话，我不会浪费时间去做它 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:53:39.273

我发现 nuSOAP 相当全面且易于使用。

如果遇到困难，请查看他们的页面并再次询问 [http://sourceforge.net/projects/nusoap/](http://sourceforge.net/projects/nusoap/)

# mysql - Hierarchical table - how to get paths of the items [linked lists in MySQL]

> ID：12034642
> 
> 赞同：8
> 
> 时间：2012-08-20T08:47:27.950
> 
> 标签：mysql, sql, linked-list, hierarchical-data

I have a hierarchical table in MySQL: `parent` field of each item points to the `id` field of its parent item. For each item I can get the list of all its parents [regardless the depth] using the [query described here](http://explainextended.com/2009/07/20/hierarchical-data-in-mysql-parents-and-children-in-one-query/). With `GROUP_CONCAT` I get the full path as a single string:

```
SELECT GROUP_CONCAT(_id SEPARATOR ' > ') FROM (
SELECT  @r AS _id,
         (
         SELECT  @r := parent
         FROM    t_hierarchy
         WHERE   id = _id
         ) AS parent,
         @l := @l + 1 AS lvl
 FROM    (
         SELECT  @r := 200,
                 @l := 0
         ) vars,
         t_hierarchy h
WHERE    @r <> 0
ORDER BY lvl DESC
) x 
```

I can make this work only if the `id` of the item is fixed [it's `200` in this case].

I want to do the same for all rows: retrieve the whole table with one additional field (`path`) which will display the full path. The only solution that comes to my mind is to wrap this query in another select, set a temporary variable `@id` and use it inside the subquery. But it doesn't work. I get `NULL`s in the `path` field.

```
SELECT @id := id, parent, (
    SELECT GROUP_CONCAT(_id SEPARATOR ' > ') FROM (
    SELECT  @r AS _id,
             (
             SELECT  @r := parent
             FROM    t_hierarchy
             WHERE   id = _id
             ) AS parent,
             @l := @l + 1 AS lvl
     FROM    (
             SELECT  @r := @id,
                     @l := 0
             ) vars,
             t_hierarchy h
    WHERE    @r <> 0
    ORDER BY lvl DESC
    ) x
) as path
 FROM t_hierarchy 
```

**P.S.** I know I can store the paths in a separate field and update them when inserting/updating, but I need a solution based on the *linked list technique*.

**UPDATE:** I would like to see a solution that will not use recursion or constructs like `for` and `while`. The above method for finding paths doesn't use any loops or functions. I want to find a solution in the same logic. Or, if it's impossible, please try to explain why!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:10:41.520

定义 getPath 函数并运行以下查询：

```
select id, parent, dbo.getPath(id) as path from t_hierarchy 
```

定义 getPath 函数：

```
create function dbo.getPath( @id int)
returns varchar(400)
as
begin
declare @path varchar(400)
declare @term int
declare @parent varchar(100)
set @path = ''
set @term = 0
while ( @term <> 1 )
begin
   select @parent = parent from t_hierarchy where id = @id
   if ( @parent is null or @parent = '' or  @parent = @id )
        set @term = 1
   else
        set @path = @path + @parent   
   set @id = @parent     
end
return @path
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:36:12.220

考虑以下两个查询之间的区别：

```
SELECT @id := id as id, parent, (
    SELECT concat(id, ': ', @id)
) as path
FROM t_hierarchy;

SELECT @id := id as id, parent, (
    SELECT concat(id, ': ', _id)
    FROM (SELECT @id as _id) as x
) as path
FROM t_hierarchy; 
```

它们看起来几乎相同，但给出的结果却截然不同。在我的 MySQL 版本中，`_id`在第二个查询中，其结果集中的每一行都是相同的，并且等于`id`最后一行的。但是，最后一点是正确的，因为我按照给定的顺序执行了两个查询；之后`SET @id := 1`，例如，我可以看到它`_id`总是等于`SET`语句中的值。

那么这里发生了什么？产生一个`EXPLAIN`线索：

```
mysql>     explain SELECT @id := id as id, parent, (
    ->         SELECT concat(id, ': ', _id)
    ->         FROM (SELECT @id as _id) as x
    ->     ) as path
    ->     FROM t_hierarchy;
+----+--------------------+-------------+--------+---------------+------------------+---------+------+------+----------------+
| id | select_type        | table       | type   | possible_keys | key              | key_len | ref  | rows | Extra          |
+----+--------------------+-------------+--------+---------------+------------------+---------+------+------+----------------+
|  1 | PRIMARY            | t_hierarchy | index  | NULL          | hierarchy_parent | 9       | NULL | 1398 | Using index    |
|  2 | DEPENDENT SUBQUERY | <derived3>  | system | NULL          | NULL             | NULL    | NULL |    1 |                |
|  3 | DERIVED            | NULL        | NULL   | NULL          | NULL             | NULL    | NULL | NULL | No tables used |
+----+--------------------+-------------+--------+---------------+------------------+---------+------+------+----------------+
3 rows in set (0.00 sec) 
```

第三行，`DERIVED`没有使用表的表，向 MySQL 表明它可以在任何时候只计算一次。服务器没有注意到派生表使用了查询中其他地方定义的变量，并且不知道您希望它每行运行一次。您被 MySQL 文档中关于[用户定义变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)的行为所困扰：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。

在我的情况下，它选择先计算该表，然后`@id`由外部（重新）定义`SELECT`。事实上，这正是原始分层数据查询起作用的原因；定义是由 MySQL 在查询中的任何其他内容之前计算的`@r`，正是因为它是那种派生表。但是，我们需要一种方法来为`@r`每个表行重置一次，而不仅仅是为整个查询重置一次。为此，我们需要一个看起来像原始查询的查询，`@r`手动重置。

```
SELECT  @r := if(
          @c = th1.id,
          if(
            @r is null,
            null,
            (
              SELECT  parent
              FROM    t_hierarchy
              WHERE   id = @r
            )
          ),
          th1.id
        ) AS parent,
        @l := if(@c = th1.id, @l + 1, 0) AS lvl,
        @c := th1.id as _id
FROM    (
        SELECT  @c := 0,
                @r := 0,
                @l := 0
        ) vars
        left join t_hierarchy as th1 on 1
        left join t_hierarchy as th2 on 1
HAVING  parent is not null 
```

此查询使用与`t_hierarchy`原始查询相同的第二个查询，以确保结果中有足够的行供父子查询循环。它还为每个包含自己作为父项的 _id 添加一行；否则，任何根对象（`NULL`在父字段中）都不会出现在结果中。

奇怪的是，运行结果`GROUP_CONCAT`似乎会破坏排序。幸运的是，该函数有自己的`ORDER BY`子句：

```
SELECT  _id,
        GROUP_CONCAT(parent ORDER BY lvl desc SEPARATOR ' > ') as path,
        max(lvl) as depth
FROM    (
  SELECT  @r := if(
            @c = th1.id,
            if(
              @r is null,
              null,
              (
                SELECT  parent
                FROM    t_hierarchy
                WHERE   id = @r
              )
            ),
            th1.id
          ) AS parent,
          @l := if(@c = th1.id, @l + 1, 0) AS lvl,
          @c := th1.id as _id
  FROM    (
          SELECT  @c := 0,
                  @r := 0,
                  @l := 0
          ) vars
          left join t_hierarchy as th1 on 1
          left join t_hierarchy as th2 on 1
  HAVING  parent is not null
  ORDER BY th1.id
) as x
GROUP BY _id; 
```

公平警告：这些查询隐含地依赖于更新之前发生的`@r`更新。MySQL 不保证该顺序，并且可能随服务器的任何版本而改变。`@l``@c`

# android - 分开冗长的短信并一起阅读

> ID：12034648
> 
> 赞同：1
> 
> 时间：2012-08-20T08:47:49.790
> 
> 标签：android

我正在开发一个 Android 短信应用程序。

我在发送短信时遇到问题。如果消息长度超过 160，那么我必须将这些短信作为两个发送，即第一个短信中的字符 0-159 和第二个短信中的剩余字符。

当 SMS 到达收件箱时，它必须重新合并为一条消息。

有没有办法做到这一点？

请朋友们帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:45:44.237

你看过多部分（连接）短信吗？请参阅[http://en.wikipedia.org/wiki/Concatenated_SMS](http://en.wikipedia.org/wiki/Concatenated_SMS)

在 Android 上，您可以使用发送多部分短信`SmsManager.sendMultipartTextMessage()`，当您收到一条消息时，您会在收件箱中获得全部内容（这些部分由手机上的短信系统自动连接）。

请参阅[http://developer.android.com/reference/android/telephony/SmsManager.html](http://developer.android.com/reference/android/telephony/SmsManager.html)

# asp.net-mvc - 如何从 MVC 中的 Web 表单中检索使用 POST 发送的值？

> ID：12034652
> 
> 赞同：0
> 
> 时间：2012-08-20T08:48:03.977
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http-post

我正在使用 MVC 3 和 C# 我想知道如何检索使用 POST 发送的表单的值。

她是我的代码，但不起作用，eventTitle 的值为 null。知道我在这里做错了什么吗？谢谢你的时间。

```
 [HttpPostAttribute]
    public JsonResult AddEventCustom()
    {

            string eventTitle = Request.Form["EventTitle"];

            return Json(new { Message = "Success" }, JsonRequestBehavior.AllowGet);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:52:21.800

您可以简单地将所需的变量放在方法声明中。MVC `将为您处理映射

```
[HttpPostAttribute]
public JsonResult AddEventCustom(string EventTitle) 
{ 
} 
```

# php - Magento：将客户组过滤器添加到订单网格时显示“访客”

> ID：12034656
> 
> 赞同：1
> 
> 时间：2012-08-20T08:48:36.510
> 
> 标签：php, magento, magento-1.7

我试图在 Adminhtml_Block_Sales_Order_Grid 上为客户组添加一列。并且部分成功，我遇到的唯一问题是如果订单是由来宾客户完成的，那么该列是空的。

我的代码：

```
<?php
class MyNamespace_CustomizeGrids_Block_Sales_Order_Grid extends                         Mage_Adminhtml_Block_Sales_Order_Grid
{
    protected function _prepareColumns() {
        $groups = Mage::getResourceModel('customer/group_collection')
                    ->addFieldToFilter('customer_group_id', array('gt' => 0))
                    ->load()
                    ->toOptionHash();

        $groups[0] = "Guest";

        $this->addColumn('customer_group_id', array(
            'header'  => Mage::helper('customer')->__('Customer Group'),
            'width'   => '100',
            'index'   => 'customer_group_id',
            'type'    => 'options',
            'options' => $groups,
        ));

        $this->addColumnsOrder('customer_group_id', 'shipping_name');

        return parent::_prepareColumns();
    }
} 
```

如您所见，我通过操作 $groups 数组解决了这个问题。

我的问题是：有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:04:15.643

对于客人，在 Magento 中，`customer_group_id`是`0`（未登录）

在您的查询中，您说 magento 获取所有大于 0 的组 `array('gt' => 0)`

您可以使用以下方法解决此问题：

```
array('gteq' => 0) // GREATER THAN EQUAL TO 0 
```

代替

```
array('gt' => 0) // GREATER THAN 0 
```

# matlab - 在 Matlab 中从非结构化文本文件中查找字符串的出现

> ID：12034658
> 
> 赞同：-4
> 
> 时间：2012-08-20T08:48:43.543
> 
> 标签：matlab, text

在matlab中有没有自动的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:52:38.947

听起来 strfind 是您正在寻找的搜索 [http://www.mathworks.com/help/techdoc/ref/strfind.html](http://www.mathworks.com/help/techdoc/ref/strfind.html)

```
FID = fopen(FileName, 'rb');
str= fread(FID, [1, inf], 'char');
fclose(FID);
found = strfind(word, str) 
```

Found 会有单词的索引。

希望这更接近你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:08:16.260

Matlab 具有强大的字符串处理机制，[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)详情请参阅。

您可以将整个文件读入内存，并使用 搜索它`regexp`，例如：

```
txt = fileread( fileName );
tokens = regexp( txt, str, 'tokens' ); 
```

# autohotkey - Autohotkey 字符串 - 将段放在前面

> ID：12034666
> 
> 赞同：1
> 
> 时间：2012-08-20T08:49:04.243
> 
> 标签：autohotkey

我想把前面有东西的词带到前面。

比如`bla bla foobla`变成`foobla bla bla`- 把带 foo 的词放在前面。

使用另一种具有更强字符串操作功能的语言，这将非常容易，但是我需要使用 AutoHotKey 来提供它提供的功能。

现在，我正在考虑将字符串拆分为单词（由 ' ' 拆分），但我什至不确定是否可以在 AHK 中找出“数组”的长度。

在 AHK 中甚至可以这样做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-25T16:54:54.270

```
string := "bla bla fooble"
arr := StrSplit(string, " ")
msgbox % "the number of elements: " arr.maxindex()
removed := arr.remove(arr.maxindex())
arr.insert(1, removed)
For k, v in arr {
    output .= k ": " v "`n"
}
msgbox % output

StrSplit(ByRef InputVar, Delimiters="", OmitChars="") {
   o := []
   Loop, Parse, InputVar, % Delimiters, % OmitChars
      o.Insert(A_LoopField)
   return o
} 
```

# php - 记录器中的 Joomla 正则表达式

> ID：12034674
> 
> 赞同：0
> 
> 时间：2012-08-20T08:49:40.637
> 
> 标签：php, regex, logging, joomla

有人可以解释以下几行中发生的事情。

```
JLog::addLogger(array('text_file' => 'log.php'), JLog::INFO);
JLog::add('Test', JLog::INFO, '((?:test<[a-zA-Z][^>]*>\s*){0,7})');

//logger output :: testa-za-zs07 
```

1.  片中发生了什么`((?:test<[a-zA-Z][^>]*>\s*){0,7})`？
2.  为什么 joomla 记录器没有按原样提供/记录确切的字符串`((?:test<[a-zA-Z][^>]*>\s*){0,7})`？
3.  有人可以解释每一块`((?:test<[a-zA-Z][^>]*>\s*){0,7})`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:23:26.043

`((?:test<[a-zA-Z][^>]*>\s*){0,7})`是一个正则表达式。这是对该表达式含义的解释：[http ://regex101.com/r/dZ8sA1](http://regex101.com/r/dZ8sA1)

如果您阅读该链接后仍不清楚，请询问，我将尝试进一步解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:03:54.747

这是一个正则表达式。

```
((?:test<[a-zA-Z][^>]*>\s*){0,7}) 
```

这是一个很大的捕获组。

`?:`表示该括号的非捕获组。

`[a-zA-Z]`表示一个字符 az 或 AZ。

`[^>]*`表示除“>”之外的所有内容为零或多个。

`\s*`表示零个或多个空格符号（制表符、空格等）。

`{0,7}`表示从 0 到 7 次重复

所以，基本上整个模式意味着：

查找测试，然后是 < 符号，然后是一个符号 a-zA-Z，然后是除 > 之外的零个或多个符号，然后是 > 符号，然后是可选空格。并从 0 到 7 重复寻找这个。所以它会寻找一个前面有“测试”字样的标签。

这里有一些[例子](http://regexr.com?31so9)。它只匹配前 7 个测试

# php - Magento、Magmi API 更新现有产品？

> ID：12034677
> 
> 赞同：0
> 
> 时间：2012-08-20T08:49:56.080
> 
> 标签：php, api, magento, e-commerce, magmi

目前使用 Magento API，但是我们都知道它很慢。每个人都说要使用 Magmi。

那么目前这里是我们的情况。我们每天两次从 csv 文件更新。

我们更新所有匹配的产品价格/数量如果产品存在于 csv 中，但不是 magento，我们将其作为新产品导入如果产品存在于 magento 中，但不是 csv，我们将其设置为禁用。

查看 Magmi 数据泵 API，我没有看到更新现有产品的方法？有没有办法通过数据泵 api 更新现有产品？我只看到了一种导入新产品的方法。还有一种方法可以标记不在 csv 中的产品，在 Magmi 中禁用 magento 吗？

Magmi_DataPumpFactory::getDataPumpInstance("productimport");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:50:51.900

beginImportSession() 方法的第二个参数允许您指定“创建”或“更新”模式。

[http://wiki.magmi.org/index.php?title=Magmi_Datapump_API](http://wiki.magmi.org/index.php?title=Magmi_Datapump_API)

# sql - sql - 聚合问题

> ID：12034682
> 
> 赞同：1
> 
> 时间：2012-08-20T08:50:17.177
> 
> 标签：sql, having

我的数据库中有两张表 - 产品和订单。一个订单只能是一种产品。

这是基本思想：

![在此处输入图像描述](../Images/b23a43acb8f91ab5b344cf3977d3d6c8.png)

我正在尝试做的是一个查询，给定一个 copmany_id 返回所有订单少于 10 个（包括 0 个）的产品（来自该公司）

我的查询如下所示：

```
SELECT p.*
FROM   product p,
       order o
WHERE  p.company_id =?
       AND o.product_id = p.id
GROUP  BY p.id
HAVING Count(o.id) < 10
ORDER  BY p.id DESC 
```

该查询适用于具有 0 < 订单但不返回具有 0 订单的产品。我还需要做什么才能退回它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:53:05.540

你是`INNER JOINING`你的两张桌子，这意味着只有那些至少有一个订单的产品才会被退回。您将需要`LEFT OUTER JOIN`订单表：

```
SELECT p.*
FROM   product p
       LEFT OUTER JOIN order o
                    ON o.product_id = p.id
WHERE  p.company_id = ?
GROUP  BY p.id
HAVING Count(o.id) < 10
ORDER  BY p.id DESC 
```

`JOIN`左外连接将至少返回操作左侧的每条记录一次，无论操作右侧是否有匹配的记录`JOIN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:53:10.717

尝试左外连接

```
SELECT p.*
FROM   product p
       LEFT OUTER JOIN order o
                    ON o.product_id = p.id
WHERE  p.company_id =?
GROUP  BY p.id
HAVING Count(o.id) < 10
ORDER  BY p.id DESC 
```

[有关左外连接，请参见此示例](http://www.java2s.com/Tutorial/Oracle/0140__Table-Joins/AnExampleofaLeftOuterJoin1.htm)

# c# - 安全通信模型的最佳方式需要远程数据传输

> ID：12034684
> 
> 赞同：0
> 
> 时间：2012-08-20T08:50:19.540
> 
> 标签：c#, architecture, client-server, modeling, analysis

我们的新项目有以下场景：

1）组织有中央办公室，其中安装了带数据库的主服务器。2）分支机构遍布全国（目前仅限于10个分支机构） 3）组织需要在分支机构和总部服务器之间进行非常安全的通信。

他们的需求是：

1) 每个分支都将有基于 C# 构建的客户端应用程序，这将允许将数据保存到中央服务器。

2）未经授权的用户或计算机不能使用客户端应用程序（所以我认为可以使用VPN）

3) 客户端应用程序将控制角色和权限，即在分支中不同的用户可以登录系统，并根据他们存储在中央服务器上的角色和权限应用程序将相应地启动。

所以我想知道的是，如何构建客户端服务器应用程序，

*   哪种类型的服务器应用程序好，窗口服务或 Web 服务？
*   如何在应用程序上进行身份验证和授权？
*   如何防止客户端应用程序分发给非员工的其他人？
*   应该使用什么样的通信技术将数据从客户端传输到中央服务器？

一句话，我想要一些具有完整描述的工作模型来执行该项目。

注意：数据非常机密，因此组织不想使用 Web 应用程序。

我希望你们理解这个场景，如果没有，请告诉我。

谢谢，很想看到你的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:46:40.027

在设计分布式系统时，您需要考虑很多事情。
Web 应用程序应该是分布式应用程序的最佳选择。

1.  用户可以在任何平台上访问它们
2.  可以通过 https 保护 Web 应用程序

.net 中的另一个选项是智能客户端工厂模式

请参考.net 解决方案的msdn[模式和实践](http://msdn.microsoft.com/en-us/library/ff650706)

# android - 表格不显示布局中的内容

> ID：12034688
> 
> 赞同：0
> 
> 时间：2012-08-20T08:50:40.603
> 
> 标签：android, xml, android-layout

我想为我的 Android 应用程序创建一个带有文本和表格的 LinearLayout。显示 TextView 但隐藏 TableLayout 或类似的东西。

我想不通，问题是什么。

这是我的布局的一些代码：

```
<LinearLayout
    android:id="@+id/ListWrapper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:layout_gravity="top"
    android:background="@color/listBackground" >

    <TextView
        android:id="@+id/aboutScreenMainText"
        android:text="@string/helpPage.mainText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="18dp"
        android:layout_marginTop="5dp"
        android:layout_marginLeft="5dp"
        android:layout_gravity="top"
        android:textColor="#000" />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="50dp">
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/helpPage.addNoteText" />
            <View
                android:layout_width="fill_parent"
                android:layout_height="1dp"
                android:background="@color/mainTextColor">
             </View>
        </TableRow>   
    </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:57:12.123

问题的解决方案非常简单；) 布局的方向是“水平的”而不是“垂直的”。

# android - Android Mupdf：13页后由于内存不足，PDF查看器静默崩溃

> ID：12034701
> 
> 赞同：2
> 
> 时间：2012-08-20T08:51:29.250
> 
> 标签：android, crash, mupdf, low-memory

我正在尝试打开一个大型 pdf 文件（10MB），其中嵌入了带有内部链接的高分辨率图像，当我连续单击下一页按钮时，它似乎可以正常工作多达 13 页。13 页后，应用程序以所有杂志文件列表静默重新启动。

我面临 1.0 和 1.1 版本的问题。

apk 的来源：[http ://code.google.com/p/mupdf/downloads/list](http://code.google.com/p/mupdf/downloads/list)

测试于：索尼爱立信 XPERIA

```
model      : X10i 
```

sdk 版本：2.3.3

请检查下面附加的日志猫内容。

任何帮助将不胜感激

谢谢你。

```
08-20 13:58:52.670: I/libmupdf(10800): In native method
08-20 13:58:52.670: I/libmupdf(10800): Checking format
08-20 13:58:52.670: I/libmupdf(10800): locking pixels
08-20 13:58:52.670: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:58:53.370: E/libmupdf(10800): Rendered
08-20 13:58:53.370: E/libmupdf(10800): Goto page 2...
08-20 13:58:54.460: D/dalvikvm(10800): GC_CONCURRENT freed 1233K, 56% free 3165K/7047K, external 6492K/6609K, paused 2ms+7ms
08-20 13:58:54.660: E/libmupdf(10800): Goto page 3...
08-20 13:58:54.670: E/libmupdf(10800): PageWidth=1191
08-20 13:58:54.670: E/libmupdf(10800): PageHeight=1588
08-20 13:58:54.710: I/libmupdf(10800): In native method
08-20 13:58:54.710: I/libmupdf(10800): Checking format
08-20 13:58:54.710: I/libmupdf(10800): locking pixels
08-20 13:58:54.710: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:58:58.390: E/libmupdf(10800): Rendered
08-20 13:58:58.390: E/libmupdf(10800): Goto page 3...
08-20 13:58:58.390: E/libmupdf(10800): Goto page 4...
08-20 13:58:58.400: E/libmupdf(10800): PageWidth=1191
08-20 13:58:58.400: E/libmupdf(10800): PageHeight=1588
08-20 13:58:58.410: I/libmupdf(10800): In native method
08-20 13:58:58.410: I/libmupdf(10800): Checking format
08-20 13:58:58.410: I/libmupdf(10800): locking pixels
08-20 13:58:58.410: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:01.670: E/libmupdf(10800): Rendered
08-20 13:59:01.670: E/libmupdf(10800): Goto page 4...
08-20 13:59:01.670: E/libmupdf(10800): Goto page 5...
08-20 13:59:01.710: E/libmupdf(10800): PageWidth=1191
08-20 13:59:01.710: E/libmupdf(10800): PageHeight=1588
08-20 13:59:01.730: I/libmupdf(10800): In native method
08-20 13:59:01.730: I/libmupdf(10800): Checking format
08-20 13:59:01.730: I/libmupdf(10800): locking pixels
08-20 13:59:01.730: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:05.080: E/libmupdf(10800): Rendered
08-20 13:59:05.080: E/libmupdf(10800): Goto page 5...
08-20 13:59:05.080: E/libmupdf(10800): Goto page 6...
08-20 13:59:05.120: E/libmupdf(10800): PageWidth=1191
08-20 13:59:05.120: E/libmupdf(10800): PageHeight=1588
08-20 13:59:05.130: I/libmupdf(10800): In native method
08-20 13:59:05.130: I/libmupdf(10800): Checking format
08-20 13:59:05.130: I/libmupdf(10800): locking pixels
08-20 13:59:05.130: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:08.260: E/libmupdf(10800): Rendered
08-20 13:59:08.260: E/libmupdf(10800): Goto page 6...
08-20 13:59:08.260: E/libmupdf(10800): Goto page 7...
08-20 13:59:08.270: E/libmupdf(10800): PageWidth=1191
08-20 13:59:08.270: E/libmupdf(10800): PageHeight=1588
08-20 13:59:08.280: I/libmupdf(10800): In native method
08-20 13:59:08.280: I/libmupdf(10800): Checking format
08-20 13:59:08.280: I/libmupdf(10800): locking pixels
08-20 13:59:08.280: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:11.350: E/libmupdf(10800): Rendered
08-20 13:59:11.350: E/libmupdf(10800): Goto page 7...
08-20 13:59:11.350: E/libmupdf(10800): Goto page 8...
08-20 13:59:11.350: E/libmupdf(10800): PageWidth=1191
08-20 13:59:11.350: E/libmupdf(10800): PageHeight=1588
08-20 13:59:11.370: I/libmupdf(10800): In native method
08-20 13:59:11.370: I/libmupdf(10800): Checking format
08-20 13:59:11.370: I/libmupdf(10800): locking pixels
08-20 13:59:11.370: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:12.050: D/dalvikvm(10800): GC_CONCURRENT freed 1875K, 59% free 3239K/7751K, external 6492K/6609K, paused 2ms+8ms
08-20 13:59:14.350: E/libmupdf(10800): Rendered
08-20 13:59:14.350: E/libmupdf(10800): Goto page 8...
08-20 13:59:14.350: E/libmupdf(10800): Goto page 9...
08-20 13:59:14.390: E/libmupdf(10800): PageWidth=1191
08-20 13:59:14.390: E/libmupdf(10800): PageHeight=1588
08-20 13:59:14.390: I/libmupdf(10800): In native method
08-20 13:59:14.390: I/libmupdf(10800): Checking format
08-20 13:59:14.390: I/libmupdf(10800): locking pixels
08-20 13:59:14.390: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:17.500: E/libmupdf(10800): Rendered
08-20 13:59:17.500: E/libmupdf(10800): Goto page 9...
08-20 13:59:17.510: E/libmupdf(10800): Goto page 10...
08-20 13:59:17.550: E/libmupdf(10800): PageWidth=1191
08-20 13:59:17.550: E/libmupdf(10800): PageHeight=1588
08-20 13:59:17.550: I/libmupdf(10800): In native method
08-20 13:59:17.550: I/libmupdf(10800): Checking format
08-20 13:59:17.550: I/libmupdf(10800): locking pixels
08-20 13:59:17.550: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:22.690: E/libmupdf(10800): Rendered
08-20 13:59:22.830: E/libmupdf(10800): Goto page 10...
08-20 13:59:22.830: E/libmupdf(10800): Goto page 11...
08-20 13:59:22.850: E/libmupdf(10800): PageWidth=1191
08-20 13:59:22.850: E/libmupdf(10800): PageHeight=1588
08-20 13:59:22.890: I/ActivityManager(1231): Start proc com.sonyericsson.eventstream.telephonyplugin for service com.sonyericsson.eventstream.telephonyplugin/.TelephonyPluginService: pid=11006 uid=10058 gids={}
08-20 13:59:22.910: I/libmupdf(10800): In native method
08-20 13:59:22.910: I/libmupdf(10800): Checking format
08-20 13:59:22.910: I/libmupdf(10800): locking pixels
08-20 13:59:22.910: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:24.490: I/ActivityManager(1231): Process com.sonyericsson.pccompanion (pid 10834) has died.
08-20 13:59:25.110: I/ActivityManager(1231): Process com.sonyericsson.android.support (pid 10850) has died.
08-20 13:59:25.970: I/ActivityManager(1231): Process android.process.acore (pid 10914) has died.
08-20 13:59:27.460: E/libmupdf(10800): Rendered
08-20 13:59:27.460: E/libmupdf(10800): Goto page 11...
08-20 13:59:27.460: E/libmupdf(10800): Goto page 12...
08-20 13:59:27.490: E/libmupdf(10800): PageWidth=1191
08-20 13:59:27.490: E/libmupdf(10800): PageHeight=1588
08-20 13:59:27.510: I/libmupdf(10800): In native method
08-20 13:59:27.510: I/libmupdf(10800): Checking format
08-20 13:59:27.510: I/libmupdf(10800): locking pixels
08-20 13:59:27.510: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:30.990: E/libmupdf(10800): Rendered
08-20 13:59:30.990: E/libmupdf(10800): Goto page 12...
08-20 13:59:30.990: E/libmupdf(10800): Goto page 13...
08-20 13:59:31.010: E/libmupdf(10800): PageWidth=1191
08-20 13:59:31.010: E/libmupdf(10800): PageHeight=1588
08-20 13:59:31.040: I/libmupdf(10800): In native method
08-20 13:59:31.040: I/libmupdf(10800): Checking format
08-20 13:59:31.040: I/libmupdf(10800): locking pixels
08-20 13:59:31.040: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:32.140: I/ActivityManager(1231): Process com.sonyericsson.customization (pid 10860) has died.
08-20 13:59:32.140: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:33.200: I/ActivityManager(1231): Process com.sonyericsson.eventstream.telephonyplugin (pid 11006) has died.
08-20 13:59:33.200: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.eventstream.telephonyplugin/.TelephonyPluginService in 705872ms
08-20 13:59:33.200: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:33.660: I/ActivityManager(1231): Process com.sonyericsson.devicemonitor (pid 10951) has died.
08-20 13:59:33.660: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.devicemonitor/.DeviceMonitorService in 5000ms
08-20 13:59:33.660: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:34.310: I/ActivityManager(1231): Process com.sonyericsson.sync.service (pid 10876) has died.
08-20 13:59:34.310: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.sync.service/sync.service.SemcRepeatingSyncManagerService in 34213ms
08-20 13:59:34.310: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:34.960: E/libmupdf(10800): Rendered
08-20 13:59:34.960: E/libmupdf(10800): Goto page 13...
08-20 13:59:34.960: E/libmupdf(10800): Goto page 14...
08-20 13:59:34.970: E/libmupdf(10800): PageWidth=1191
08-20 13:59:34.970: E/libmupdf(10800): PageHeight=1588
08-20 13:59:35.010: I/libmupdf(10800): In native method
08-20 13:59:35.010: I/libmupdf(10800): Checking format
08-20 13:59:35.010: I/libmupdf(10800): locking pixels
08-20 13:59:35.010: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:35.160: I/ActivityManager(1231): Process com.sonyericsson.crashmonitor (pid 10986) has died.
08-20 13:59:35.170: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.crashmonitor/.CrashMonitorService in 579664ms
08-20 13:59:35.170: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:35.920: I/ActivityManager(1231): Process com.sonyericsson.android.bootinfo:remote (pid 10995) has died.
08-20 13:59:35.920: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:36.610: I/ActivityManager(1231): Process com.sonyericsson.secureclockservice (pid 10808) has died.
08-20 13:59:36.610: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.secureclockservice/.SecureClockEventListenerService in 41912ms
08-20 13:59:36.610: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.secureclockservice/.SecureClockStartupService in 51912ms
08-20 13:59:36.610: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:37.210: I/ActivityManager(1231): Process com.sonyericsson.eventstream.calllogplugin (pid 10963) has died.
08-20 13:59:37.210: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.eventstream.calllogplugin/.CallLogPluginService in 61313ms
08-20 13:59:37.210: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:38.370: E/libmupdf(10800): Rendered
08-20 13:59:38.370: E/libmupdf(10800): Goto page 14...
08-20 13:59:38.370: E/libmupdf(10800): Goto page 15...
08-20 13:59:38.420: E/libmupdf(10800): PageWidth=1191
08-20 13:59:38.420: E/libmupdf(10800): PageHeight=1588
08-20 13:59:38.430: I/libmupdf(10800): In native method
08-20 13:59:38.430: I/libmupdf(10800): Checking format
08-20 13:59:38.430: I/libmupdf(10800): locking pixels
08-20 13:59:38.430: E/libmupdf(10800): Rendering page=480x640 patch=[0,0,480,640]
08-20 13:59:38.600: I/ActivityManager(1231): Process com.sonyericsson.textinput.uxp (pid 10943) has died.
08-20 13:59:38.600: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.textinput.uxp/.glue.InputMethodServiceGlue in 69922ms
08-20 13:59:38.600: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:38.630: W/InputManagerService(1231): Session failed to close due to remote exception
08-20 13:59:38.630: W/InputManagerService(1231): android.os.DeadObjectException
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.BinderProxy.transact(Native Method)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.internal.view.IInputMethodSession$Stub$Proxy.finishSession(IInputMethodSession.java:346)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.InputMethodManagerService.finishSession(InputMethodManagerService.java:896)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.InputMethodManagerService.clearCurMethodLocked(InputMethodManagerService.java:907)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.InputMethodManagerService.onServiceDisconnected(InputMethodManagerService.java:924)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.app.LoadedApk$ServiceDispatcher.doDeath(LoadedApk.java:1069)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1083)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.Handler.handleCallback(Handler.java:587)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.Looper.loop(Looper.java:123)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.ServerThread.run(SystemServer.java:549)
08-20 13:59:38.630: W/InputManagerService(1231): Session failed to close due to remote exception
08-20 13:59:38.630: W/InputManagerService(1231): android.os.DeadObjectException
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.BinderProxy.transact(Native Method)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.internal.view.IInputMethodSession$Stub$Proxy.finishSession(IInputMethodSession.java:346)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.InputMethodManagerService.finishSession(InputMethodManagerService.java:896)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.InputMethodManagerService.clearCurMethodLocked(InputMethodManagerService.java:911)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.InputMethodManagerService.onServiceDisconnected(InputMethodManagerService.java:924)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.app.LoadedApk$ServiceDispatcher.doDeath(LoadedApk.java:1069)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1083)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.Handler.handleCallback(Handler.java:587)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-20 13:59:38.630: W/InputManagerService(1231):    at android.os.Looper.loop(Looper.java:123)
08-20 13:59:38.630: W/InputManagerService(1231):    at com.android.server.ServerThread.run(SystemServer.java:549)
08-20 13:59:38.690: I/ActivityManager(1231): Start proc com.sonyericsson.devicemonitor for service com.sonyericsson.devicemonitor/.DeviceMonitorService: pid=11015 uid=10010 gids={3003, 3002, 1007}
08-20 13:59:39.230: I/ActivityManager(1231): Process com.sonyericsson.devicemonitor (pid 11015) has died.
08-20 13:59:39.230: W/ActivityManager(1231): Scheduling restart of crashed service com.sonyericsson.devicemonitor/.DeviceMonitorService in 79293ms
08-20 13:59:39.230: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:39.700: I/ActivityManager(1231): Process com.google.process.gapps (pid 10888) has died.
08-20 13:59:39.700: W/ActivityManager(1231): Scheduling restart of crashed service com.google.android.gsf/.gtalkservice.service.GTalkService in 5000ms
08-20 13:59:39.700: W/ActivityManager(1231): Scheduling restart of crashed service com.google.android.location/.NetworkLocationService in 88820ms
08-20 13:59:39.700: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:40.100: D/GeocoderProxy(1231): onServiceDisconnected ComponentInfo{com.google.android.location/com.google.android.location.NetworkLocationService}
08-20 13:59:40.100: D/LocationProviderProxy(1231): LocationProviderProxy.onServiceDisconnected ComponentInfo{com.google.android.location/com.google.android.location.NetworkLocationService}
08-20 13:59:40.440: D/dalvikvm(10800): GC_CONCURRENT freed 1939K, 59% free 3249K/7815K, external 6492K/6609K, paused 3ms+12ms
08-20 13:59:42.190: I/ActivityManager(1231): Process com.artifex.mupdf (pid 10800) has died.
08-20 13:59:42.190: I/WindowManager(1231): WIN DEATH: Window{4091b3f0 com.artifex.mupdf/com.artifex.mupdf.MuPDFActivity paused=false}
08-20 13:59:42.190: E/InputDispatcher(1231): channel '409046a0 com.artifex.mupdf/com.artifex.mupdf.ChoosePDFActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
08-20 13:59:42.190: E/InputDispatcher(1231): channel '409046a0 com.artifex.mupdf/com.artifex.mupdf.ChoosePDFActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
08-20 13:59:42.210: I/WindowManager(1231): WIN DEATH: Window{409046a0 com.artifex.mupdf/com.artifex.mupdf.ChoosePDFActivity paused=false}
08-20 13:59:42.210: E/InputDispatcher(1231): Received spurious receive callback for unknown input channel.  fd=190, events=0x8
08-20 13:59:42.230: I/ActivityManager(1231): Start proc com.artifex.mupdf for activity com.artifex.mupdf/.ChoosePDFActivity: pid=11024 uid=10146 gids={}
08-20 13:59:42.230: I/ActivityManager(1231): Low Memory: No more background processes.
08-20 13:59:42.710: W/InputManagerService(1231): Got RemoteException sending setActive(false) notification to pid 10800 uid 10146
08-20 13:59:42.740: I/ActivityManager(1231): Displayed com.artifex.mupdf/.ChoosePDFActivity: +521ms
08-20 13:59:44.720: I/ActivityManager(1231): Start proc com.google.process.gapps for service com.google.android.gsf/.gtalkservice.service.GTalkService: pid=11032 uid=10022 gids={3003, 1015, 2001, 1007}
08-20 13:59:44.790: I/ActivityThread(11032): Pub com.google.settings: com.google.android.gsf.settings.GoogleSettingsProvider
08-20 13:59:44.811: I/ActivityThread(11032): Pub subscribedfeeds: com.google.android.gsf.subscribedfeeds.SubscribedFeedsProvider
08-20 13:59:44.940: I/ActivityThread(11032): Pub com.google.android.gsf.gservices: com.google.android.gsf.gservices.GservicesProvider
08-20 13:59:44.940: I/GservicesProvider(11032): Gservices pushing to system: true; secure: true
08-20 13:59:44.940: I/ActivityThread(11032): Pub com.google.android.providers.talk: com.google.android.gsf.talk.TalkProvider
08-20 13:59:45.160: D/SyncManager(1231): setSyncAutomatically: , provider subscribedfeeds -> true
08-20 13:59:45.160: D/SyncManager(1231): setSyncAutomatically: already set to true, doing nothing
08-20 13:59:45.170: D/GTalkService(11032): lost connectivity, notify
08-20 13:59:45.300: D/GTalkService(11032): [GTalkConnection.26] init: initialized presence to AVAILABLE(x) pmuc-v1
08-20 13:59:45.300: D/GTalkService(11032): [GTalkConnection.26] ensurePresenceHandlerLoginState: call RosterListenerImpl.onLoggedIn
08-20 13:59:45.300: D/GTalkService(11032): [RosterListenerImpl] onLoggedIn
08-20 13:59:45.430: I/ActivityManager(1231): Start proc android.process.acore for content provider com.android.providers.contacts/.SemcContactsProvider2: pid=11058 uid=10012 gids={3003}
08-20 13:59:45.470: D/dalvikvm(1145): GC_EXPLICIT freed 11K, 53% free 2556K/5379K, external 1685K/2133K, paused 38ms
08-20 13:59:45.510: D/GTalkService(11032): [GTalkImSession] login: kbvk527@gmail.com, hostConn.connState = RECONNECTION_SCHEDULED, hostConn.error=NO ERROR
08-20 13:59:45.510: D/GTalkService(11032): [GTalkConnection.26] connect: network unavailable, set state=PENDING, err=NO_NETWORK
08-20 13:59:45.510: D/GTalkService(11032): [RosterListenerImpl] onLoggedIn
08-20 13:59:45.520: D/dalvikvm(1145): GC_EXPLICIT freed <1K, 53% free 2556K/5379K, external 1685K/2133K, paused 46ms
08-20 13:59:45.520: I/ActivityThread(11058): Pub contacts;com.android.contacts: com.android.providers.contacts.SemcContactsProvider2
08-20 13:59:45.580: D/dalvikvm(1145): GC_EXPLICIT freed <1K, 53% free 2556K/5379K, external 1685K/2133K, paused 66ms
08-20 13:59:45.870: I/ActivityThread(11058): Pub user_dictionary: com.android.providers.userdictionary.UserDictionaryProvider
08-20 13:59:45.880: I/ActivityThread(11058): Pub call_log: com.android.providers.contacts.SemcCallLogProvider
08-20 13:59:45.880: I/ActivityThread(11058): Pub com.android.social: com.android.providers.contacts.SocialProvider
08-20 13:59:45.880: I/ActivityThread(11058): Pub applications: com.android.providers.applications.ApplicationsProvider
08-20 13:59:45.990: D/GTalkService(11032): [GTalkConnection.24] EVENT_REQUEST_ROSTER: not connected
08-20 13:59:50.120: D/skia(1299): purging 8K from font cache [1 entries]
08-20 13:59:50.150: D/dalvikvm(1299): GC_EXPLICIT freed 21K, 56% free 2870K/6407K, external 2586K/3164K, paused 30ms
08-20 13:59:55.120: D/skia(1231): purging 23K from font cache [3 entries]
08-20 13:59:55.210: D/dalvikvm(1231): GC_EXPLICIT freed 442K, 47% free 6830K/12743K, external 4080K/5095K, paused 93ms
08-20 13:59:58.540: I/ActivityManager(1231): Start proc com.sonyericsson.setupwizard for service com.sonyericsson.setupwizard/.simcard.SimService: pid=11067 uid=10092 gids={3003, 1015}
08-20 14:00:05.060: D/dalvikvm(1335): GC_EXPLICIT freed 4K, 51% free 3032K/6151K, external 1685K/2133K, paused 34ms
08-20 14:00:08.560: I/ActivityManager(1231): Start proc com.sonyericsson.sync.service for service com.sonyericsson.sync.service/sync.service.SemcRepeatingSyncManagerService: pid=11076 uid=10043 gids={3003}
08-20 14:00:08.730: I/ActivityThread(11076): Pub com.sonyericsson.syncml.Account: sync.service.provider.SonyEricssonAccountProvider
08-20 14:00:08.780: D/SYNCML/APPLICATION(11076): Creating wake-lock for BroadcastReceivers
08-20 14:00:08.780: D/SYNCML/PROVIDER(11076): onAccountsUpdated([Account {name=Phone contacts, type=com.sonyericsson.localcontacts}, Account {name=kbvk527@gmail.com, type=com.google}, Account {name=kbvk527@gmail.com, type=com.facebook.auth.login}, Account {name=kbvk527@gmail.com, type=com.sonyericsson.facebook.account}])
08-20 14:00:08.810: D/SYNCML/PROVIDER(11076): Starting static initialization of registry
08-20 14:00:08.810: D/SYNCML/MAINTENANCE(11076): Reading uri from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.contacts.ContactsDataService}
08-20 14:00:08.810: D/SYNCML/MAINTENANCE(11076): Reading authority from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.contacts.ContactsDataService}
08-20 14:00:08.810: D/SYNCML/MAINTENANCE(11076): Reading name from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.contacts.ContactsDataService}
08-20 14:00:08.810: D/SYNCML/MAINTENANCE(11076): Reading description from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.contacts.ContactsDataService}
08-20 14:00:08.810: D/SYNCML/MAINTENANCE(11076): Reading mime-type from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.contacts.ContactsDataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading uri from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.bookmarks.BookmarksDataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading authority from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.bookmarks.BookmarksDataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading name from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.bookmarks.BookmarksDataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading description from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.bookmarks.BookmarksDataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading mime-type from ComponentInfo{com.sonyericsson.sync.service/versit.rpc.bookmarks.BookmarksDataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading uri from ComponentInfo{com.sonyericsson.sync.service/sync.service.SEMCCalendar2DataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading authority from ComponentInfo{com.sonyericsson.sync.service/sync.service.SEMCCalendar2DataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading name from ComponentInfo{com.sonyericsson.sync.service/sync.service.SEMCCalendar2DataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading description from ComponentInfo{com.sonyericsson.sync.service/sync.service.SEMCCalendar2DataService}
08-20 14:00:08.820: D/SYNCML/MAINTENANCE(11076): Reading mime-type from ComponentInfo{com.sonyericsson.sync.service/sync.service.SEMCCalendar2DataService}
08-20 14:00:08.830: D/SYNCML/MAINTENANCE(11076): Row already exists, skipping update
08-20 14:00:08.830: D/SYNCML/MAINTENANCE(11076): Row already exists, skipping update
08-20 14:00:08.840: D/SYNCML/MAINTENANCE(11076): Row already exists, skipping update
08-20 14:00:08.840: D/SYNCML/MAINTENANCE(11076): Found rows, deleting all missing rows in registry
08-20 14:00:08.880: I/ActivityManager(1231): Start proc com.sonyericsson.customization for content provider com.sonyericsson.provider.customization/.CustomizationProvider: pid=11086 uid=10083 gids={}
08-20 14:00:08.900: I/ActivityThread(11086): Pub com.sonyericsson.provider.useragent: com.sonyericsson.provider.useragent.UserAgentProvider
08-20 14:00:08.910: D/ActivityThread(11086): Loading provider com.sonyericsson.provider.customization: com.sonyericsson.provider.customization.CustomizationProvider
08-20 14:00:08.920: I/CustomizationProvider(11086): No configuration file: /system/etc/customization/settings/com/sonyericsson/provider/useragent/custom_settings.xml
08-20 14:00:08.920: W/UserAgentProvider(11086): onCreatejava.io.FileNotFoundException
08-20 14:00:08.920: I/ActivityThread(11086): Pub com.sonyericsson.provider.customization: com.sonyericsson.provider.customization.CustomizationProvider
08-20 14:00:08.920: I/CustomizationProvider(11086): No configuration file: /system/etc/customization/settings/com/sonyericsson/sync/service/customization/custom_settings.xml
08-20 14:00:08.920: W/SyncAccountCustomization(11076): Unable to find customization file
08-20 14:00:09.930: W/SyncAccountCustomization(11076): Stop CustomizationService
08-20 14:00:18.540: I/ActivityManager(1231): Start proc com.sonyericsson.secureclockservice for service com.sonyericsson.secureclockservice/.SecureClockEventListenerService: pid=11096 uid=10085 gids={3003}
08-20 14:00:18.570: I/SecureClock(11096): The listener for network connectivity is set up
08-20 14:00:18.570: I/SecureClock(11096): Generate an initial secure clock value.
08-20 14:00:18.570: I/SecureClock(11096): Network not connected
08-20 14:00:18.580: I/SecureClock(11096): network state changed
08-20 14:00:18.580: I/SecureClock(11096): Network not connected
08-20 14:00:28.530: I/JNI(11096): Trying to load libJNISecureClock.so
08-20 14:00:28.530: D/dalvikvm(11096): Trying to load lib /data/data/com.sonyericsson.secureclockservice/lib/libJNISecureClock.so 0x4051ae00
08-20 14:00:28.550: D/dalvikvm(11096): Added shared lib /data/data/com.sonyericsson.secureclockservice/lib/libJNISecureClock.so 0x4051ae00
08-20 14:00:28.550: D/dalvikvm(11096): No JNI_OnLoad found in /data/data/com.sonyericsson.secureclockservice/lib/libJNISecureClock.so 0x4051ae00, skipping init
08-20 14:00:28.550: I/SecureClock(11096): Setting up timer
08-20 14:00:28.550: I/SecureClock(11096): Delay=120000
08-20 14:00:28.550: I/SecureClock(11096): Period=43200000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:34:57.913

已为此打开了一个错误：

[http://bugs.ghostscript.com/show_bug.cgi?id=693288](http://bugs.ghostscript.com/show_bug.cgi?id=693288)

并且可以在那里跟踪进度。但是，如果没有样本文件来重现问题，则不会取得任何进展......

# iphone - 目标 C - 在下载过程中使用可达性不断检查网络连接

> ID：12034702
> 
> 赞同：1
> 
> 时间：2012-08-20T08:51:29.430
> 
> 标签：iphone, objective-c, ios, reachability

我正在使用这段代码来检查我的应用程序中的网络连接，如果存在连接，则提取数据并显示它：

```
 if([[Reachability reachabilityForInternetConnection] currentReachabilityStatus] == NotReachable) {
            errorView = [[UIAlertView alloc] 
                         initWithTitle: @"Network Error" 
                         message: @"No Network connection availible!" 
                         delegate: self 
                         cancelButtonTitle: @"OK" otherButtonTitles: nil]; 
            [errorView show];
        }
        else
        {
            HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
            [self.navigationController.view addSubview:HUD];

            HUD.delegate = self;
            HUD.labelText = @"Performing Initial Download";
            HUD.minSize = CGSizeMake(135.f, 135.f);

            [HUD showWhileExecuting:@selector(pullAndDisplayData) onTarget:self withObject:nil animated:YES];
        } 
```

但是，我想修改此代码，以便它在整个下载过程中不断检查互联网连接，如果我失去连接，则停止下载并向用户显示适当的警报消息。任何人都可以建议我如何解决这个问题吗？

谢谢，

泰辛

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T08:57:17.230

您需要为通知名称添加观察者

```
kReachabilityChangedNotification 
```

然后打电话

```
[[Reachability reachabilityForInternetConnection] startNotifier]; 
```

当可达性发生变化时，将发布通知，然后您可以执行所需的任何操作。

# actionscript-3 - AS#3 将 SWF 加载到 SWF 中

> ID：12034708
> 
> 赞同：0
> 
> 时间：2012-08-20T08:52:08.857
> 
> 标签：actionscript-3, actionscript, away3d

我正在尝试将 swf 加载到 3D Objectcontainer.Im 使用 Away3D (gold)

基本上我已经将一个对象加载到一个 3d 容器中，现在我想在同一个容器中加载一个 swf。我现在将我的对象和 SWF 放在同一个容器中，所以如果我旋转容器，我的 SWF 也会如此。我的 swf 现在只包含文本，它只是一个测试......

我使用的加载方法是一个数组......有什么想法吗？

我的错误：

```
 TypeError: Error #1034: Type Coercion failed: cannot convert 
  flash.display::MovieClip@30ee0e41 to away3d.containers.ObjectContainer3D. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:38:44.783

Away3D 4，有点困难。但我会尽力为您指明正确的方向。

您需要使用几何和材质创建网格。

材质与您的 MovieClip 具有纹理。几何是平面几何

Mesh 是您需要添加到 ObjectContainer3D 的 Object3D 实例。

你的代码看起来像这样：

```
var bitmapData:BitmapData = new BitmapData( mc.width, mc.height, false, 0x000000 );
var texture:BitmapTexture = new BitmapTexture( bitmapData );
var material:TextureMaterial = new TextureMaterial( texture, true );

var geometry:PlaneGeometry = new PlaneGeometry( mc.width, mc.height );

var planeMesh:Mesh = new Mesh( geometry, material );

_3dcontainer.addChild( planeMesh ); 
```

现在为了使 MovieClip 动画化，您需要更新纹理的位图：

```
mc.addEventListener( Event.ENTER_FRAME, updateTexture );

private function updateTexture( e:Event ):void {
    texture.bitmapData = new BitmapData( mc.width, mc.height, false, 0x000000 );
} 
```

同样，我没有对此进行测试，而且很久以前我使用过 Away3D 4。只是不要忘记导入使用过的类。

好好看看文档： [http ://away3d.com/livedocs/away3d/4.0/](http://away3d.com/livedocs/away3d/4.0/)

# c# - 如何在富文本框中只允许一行

> ID：12034709
> 
> 赞同：3
> 
> 时间：2012-08-20T08:52:09.580
> 
> 标签：c#, wpf

我正在使用 WPF (C#)。

我希望用户只能在富文本框中键入一行（不能按回车键）。谁能告诉我如何设置这种富文本框属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T08:52:46.850

将其`AcceptsReturn`属性/属性设置为`false`.

# objective-c - 为什么 locationManager:didUpdateHeading: 不能更新这个全局？

> ID：12034716
> 
> 赞同：1
> 
> 时间：2012-08-20T08:52:24.617
> 
> 标签：objective-c, ios, cllocationmanager

我想将`locationManager:didUpdateHeading:`方法​​返回的不断更新的值存储在 a`global int`或 a`property int`中，以便 MotionHandler 类的其他函数可以使用它。但是，此委托方法似乎无法在全局范围内存储其值，而只能在本地存储。这是为什么？是因为它不是实际的 MotionHandler 方法吗？我该如何解决这个问题？谢谢您的帮助。

运动处理器.m

```
#import "MotionHandler.h"

@interface MotionHandler()
{
    CLLocationManager *locationManager;
    int degrees; // the global in question..
}
@end

@implementation MotionHandler

-(void) startCompassUpdates
{
    locationManager =[[CLLocationManager alloc] init];
    locationManager.delegate=self;
    [locationManager startUpdatingHeading];
}

-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    // This is working, a new value is stored in "degrees" & logged on the console after each update. However it only seems to be updating "degrees" locally..
    degrees = (int)locationManager.heading.magneticHeading;
    NSLog(@"from delegate method: %i", degrees); 
}

-(int) showDegrees
{
    return degrees; //  This is not working. Whenever I call this method, "degrees" is always zero. Why isn't this global being updated by the previous method ?
} 
```

视图控制器.m

```
//...

- (void)viewDidLoad
{
    [super viewDidLoad];

    currentMotionHandler = [[MotionHandler alloc] init];

    [currentMotionHandler startCompassUpdates];

    while(1==1)
    {
        NSLog(@"from showDegrees method: %i",[currentMotionHandler showDegrees]); // this just keeps returning zero..
    }
}
//... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:29:14.313

*根据 OP 要求，我已将我的评论转移到一个答案*：

您需要停止使用`while`循环来获得不断变化的值的反馈。由于 Cocoa Touch 是一个[基于事件的系统](http://developer.apple.com/library/ios/#documentation/General/Conceptual/Devpedia-CocoaApp/MainEventLoop.html)，因此您无法通过以这种方式创建无限循环来劫持其运行循环。即使在基于事件的系统之外，使用如此紧密的循环也会损害性能并且几乎没有收益。

如果您想要连续更新（或看起来是连续的），您可以：

1.  使用计时器每*X*毫秒调用一次方法（请参阅[Apple 指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Timers/Articles/usingTimers.html)）。
2.  使用后台线程（请参阅[Apple 指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html)）。

我更喜欢使用计时器方法，因为它的开销最低，并且在与 UI 的其余部分相同的线程中运行该方法，从而避免任何可能的线程问题。

# excel - 选择包含 X 的 Column 等于 yes 的所有行

> ID：12034717
> 
> 赞同：0
> 
> 时间：2012-08-20T08:52:29.233
> 
> 标签：excel

我在其中一行中有很多列名称，然后在这些名称下方的行中是/否。

有谁知道我如何创建一个列出所有这些名称的下拉菜单。然后，当我选择一个名称时，它会返回该列中包含“是”的所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:56:37.310

您应该使用过滤器 - 自动过滤器（在数据菜单上）

# java - 使用 daemon(jsvc) 将资源文件添加到类路径

> ID：12034718
> 
> 赞同：1
> 
> 时间：2012-08-20T08:52:32.023
> 
> 标签：java, linux, spring, daemon, jsvc

我为此苦苦挣扎了一段时间。我在独立环境中使用 Spring3.1。我有需要添加到类路径（applicationXML）中的资源文件。在日食中，这是一种众所周知且简单的方法。现在我正在尝试使用 Daemon (commons-daemon-1.0.3.jar) 将我的应用程序部署到 Linux 上的独立环境。

如何将资源文件添加到类路径中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:04:26.823

您可以做的一件事是使用 Maven Shade 插件。这用于为您的构建配置文件中的所有内容创建 SuperJAR — 来自 Apache 和 Spring 的依赖 JAR，以及您自己的代码。阴影插件可以添加“。”的类路径条目。进入 SuperJAR 的清单，这正是您能够运行 SuperJAR 的 Main 类的方式，但让类加载器在本地目录和所有组件的 JAR 中查找。

您必须稍微调整您的构建，以便像 log4j.properties 和 application-context.xml 之类的东西，以及您希望在构建后让系统管理员/客户修改的其他文件被排除在资源/路径之外 - 否则他们会得到烘焙到构建中。

你可以在这里查看我的源代码[http://sourceforge.net/projects/jee2pctest/](http://sourceforge.net/projects/jee2pctest/)。客户端驱动程序代码提供了一个很好的示例，说明如何使用 Maven Shade 插件创建带有外部属性文件的直接可执行 JAR。魔术主要在 pom.xml 文件中。一个警告，我正在使用 Maven 构建工具，如果您仍在使用 IDE 的内置打包程序在 ANT 上，那么您可能需要完成一些工作。

# php - 在 mysql 数据库表中令人困惑

> ID：12034722
> 
> 赞同：0
> 
> 时间：2012-08-20T08:52:48.373
> 
> 标签：php, mysql

我有点混淆将结果放入两个表中，我知道这很简单，但没有任何线索.. 这是我的查询，它给了我结果，但是当我使用时，`group by`它只是给了我结果一行甚至数据库中的实际结果是 (300, 500) 因为我正在通过`lead_id`两个表中常见的结果来获取结果..

```
SELECT inv.amount, crmd.computers, crmd.product_id, crmd.pc_opti
FROM invoice AS inv, lead_crm_data AS crmd
WHERE inv.lead_id = '310'
AND crmd.lead_id = '310'
GROUP BY inv.lead_id 
```

这是给定查询的结果..

```
amount  computers   product_id  pc_opti
300     2           7, 6            2
300     3           7, 6            3
540     2           7, 6            2
540     3           7, 6            3 
```

结果与**GROUP BY**

```
300     2           7, 6            2 
```

**期望的结果**

```
300     2           7, 6            2
540     3           7, 6            3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:06:45.517

试试这个：

```
SELECT inv.amount, crmd.computers, crmd.product_id, crmd.pc_opti
FROM invoice AS inv, lead_crm_data AS crmd
WHERE inv.lead_id = '310'
  AND crmd.lead_id = '310'
GROUP BY inv.amount 
```

您可以使用更好的（恕我直言）语法：

```
SELECT inv.amount, crmd.computers, crmd.product_id, crmd.pc_opti
FROM invoice AS inv INNER JOIN lead_crm_data AS crmd 
    ON inv.lead_id = crmd.lead_id 
   AND inv.lead_id = '310'
GROUP BY inv.amount 
```

# pandas - 如何在熊猫中恢复未堆叠的数据框

> ID：12034727
> 
> 赞同：1
> 
> 时间：2012-08-20T08:53:05.537
> 
> 标签：pandas

我正在尝试取消堆叠数据帧对其执行操作（仅随着时间的推移），然后将其堆叠在一起，如下所示：

```
import pandas as pd
import numpy as np
from itertools import *

time = pd.date_range(pd.datetime(2007,1,1),pd.datetime(2007,1,2))
slot = map(lambda n:"s-"+str(n),reversed(range(2)))
obj  = map(lambda n:"o-"+str(n),reversed(range(2)))
idx  = pd.MultiIndex.from_tuples(list(product(slot, obj, time)), names=['Ananas','Bananas','time']) #list(.) needed to get a length, should this really be needed?
data = np.random.rand(len(idx),4)

df = pd.DataFrame(data=data,index=idx, columns=['a','b','c','d']) #why is idx.size==0?

print df.to_string()
print "====="
unstacked = df.unstack(level=[0,1])
print unstacked.to_string()
print "====="
stacked = unstacked.stack(level=[2,1])
print stacked.to_string() 
```

问题是多索引在操作后被反转了，有什么简单的方法可以让它工作吗？也许我从一开始就滥用堆栈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:19:56.007

`stack`并将`unstack`级别添加到 MultiIndex 的*末尾*，这是不可控的。您可以使用 : 更改 MultiIndex 中级别的顺序`reorder_levels()`：`stacked.reorder_levels([2, 1, 0])`将为您提供与中相同的 MultiIndex 级别顺序`df`

# php - PHP 合并两个字符串

> ID：12034730
> 
> 赞同：1
> 
> 时间：2012-08-20T08:53:12.160
> 
> 标签：php

我真的不知道如何做到这一点，或者它会被称为什么。我在过去的一个小时里搜索了这样的东西：

php中有没有办法让两个字符串合并为一个。我想将相同大小的字符串组合在一起？

所以....

```
$string1 = "apple"
$string2 = "block"
//FUNCTION STUFF HERE
$output = "abplpolcek"; 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T08:54:18.070

你可以试试这个：

```
$output='';
for($i=0;$i<strlen($string1);$i++)
{
    $output.=$string1[$i];
    $output.=$string2[$i];
}

echo $output; 
```

或者你可以写一个像这样的简单函数：

```
function funnyConcatStrings($str1, $str2)
{
    $output='';
    $leng=strlen($str1);
    if(strlen($str1)==strlen($str2))
    {
        for($i=0;$i<$leng;$i++)
        {
            $output.=$str1[$i];
            $output.=$str2[$i];
        }
    }
    else
    {
        $output='Strings were not equal.\n';
    }
    return $output;
}

// Use it like this:

$mashedString=funnyConcatStrings($string1, $string2);

// or

echo funnyConcatStrings($string1, $string2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T08:56:27.203

```
$str_length = 5;
$output = '';

for($i = 0; $i < $str_length; $i++)
{
    $output .= $string1[$i] . $string2[$i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T08:55:27.493

使用例如 $string1[0] ( letter 'a' ) 来访问第一个字母并进行 for 循环

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T08:56:49.483

真的很容易；

```
$a = 'abcdef';
$b = 'ghijkl';

$l = strlen($a);

$s='';

for($i=0;$i<$l;$i++)$s .= $a[$i] + $b[$i];

echo $s; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T08:58:58.667

1.) 检查字符串是否与[strlen具有相同的长度](http://www.php.net/manual/en/function.strlen.php)

2.）然后您可以遍历字符串并将它们作为数组访问

```
$string = 'test123';
echo $string[0] -> 't' 
```

然后，您可以组合字符串并将它们安全地保存在一个新变量中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T08:56:05.347

这也适用于不同长度的字符串

```
$string1 = "apple";
$string2 = "block";

$arr1 = str_split($string1);
$arr2 = str_split($string2);

if(count($arr1) > 0)
{
    foreach($arr1 as $key => $value)
    {
        $_tmp[] = $value;
        if(isset($arr2[$key]))
        {
            $_tmp[] = $arr2[$key];
        }
    }
}
else
{
    $key = 0;
}

if($key + 1 < count($arr2))
{
    for($i = $key + 1; $i < count($arr2); $i++)
    {
        $_tmp[] = $arr2[$key];
    }
}

echo implode("", $_tmp); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-16T21:55:46.847

```
echo str_shuffle("apple" . "block"); 
```

结果： aekbplopcl

# queue - Windows 上的 websphere MQ 资源管理器

> ID：12034731
> 
> 赞同：2
> 
> 时间：2012-08-20T08:53:25.643
> 
> 标签：queue, ibm-mq, channel

我是 WebSphere MQ 世界的初学者，这就是我正在寻找的：

我必须创建一个带有 2 台机器（发送方和接收方）的简单系统来共享队列上的消息：

PC 1 发送者 --> 队列 --> PC 2 接收者

两台机器都是基于 Windows 的，实际上在使用 virtualbox P1（主机）和 PC 2（来宾）的同一台物理 PC 上

这是我按照在线指南所做的：

PC 1 发件人：

1.  已安装 Websphere MQ（完整试用版）
2.  在 MQ 资源管理器上：
    *   队列管理器“QM.01”已创建
    *   使用 use=Transmission 创建的本地队列“Q.01”
    *   使用 queue=Q.01 创建的通道发送方“CH.01”以及对实际上是 1414 的连接的一些疑问

PC 2 接收器：

*   仅安装了 MQExplorer
*   尝试使用发送方 IP、1414 端口和 CH.01 通道创建远程队列管理器 --> 错误 2539（PC 1 配置有问题
*   尝试使用发送方 IP、1414 端口和默认 SYSTEM.ADMIN.SVRCONN 通道创建远程队列管理器 --> 错误 4036（帐户身份验证有问题，我尝试使用相同的“Adminitrator@PC 1”用户。我'我还尝试在 PC 1 本身上创建远程队列管理器，结果相同）

我想我的错误可能在 PC 1 通道上，它的图标有一个黄色或蓝色三角形，并且 status=trying 不好。

附言。如果某些设置名称与英文版本不匹配，请原谅我，我必须翻译它们。

* * *

现在我已经能够`QMgr`在客户端 PC 上配置远程，我将学习如何编写一个简单的程序（可能在 中`Java`）从远程队列管理器上的队列中读取。

我找到了一些指南，但是在开始使用 Java 之前，我尝试从命令提示符进行`amqsget`测试`amqsput`。

服务器机器没有问题（`Websphere`安装了完整的试用版），但控制台无法识别来自客户端的命令（两者都`Websphere client`安装`MQ Explorer`了）

我的错误在哪里，或者我错过了哪些段落？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:50:04.893

当您的应用程序需要通过网络与 QMgr 对话时，您可以创建 SVRCONN 通道，例如 SYSTEM.ADMIN.SVRCONN。使用 SVRCONN 通道的应用程序能够直接打开队列并从中放置或获取消息。无需创建传输队列或设置 USAGE=XMITQ 即可使客户端应用程序正常工作。

当您有两个需要通信的 QMgrs 时，您可以使用 MCA 通道连接它们。在发送 QMgr 上，这些包括 SENDER、SERVER 和 CLUSTER SENDER。在接收 QMgr 上将包括 RECEIVER、REQUESTOR 或 CLUSTER RECEIVER 通道。任何出站通道（SDR、SVR 或 CLUSSDR）都需要传输队列。

在您描述的示例中，只有一个 QMgr，因此不需要 SDR、SVR 或 CLUSSDR 通道。您将需要使用 SVRCONN，例如 SYSTEM.ADMIN.SVRCONN。您没有提到已定义侦听器，但显然您已定义，否则您将不会收到 2539 MQRC_CHANNEL_CONFIG_ERROR 消息。您获得 2539 的原因是因为您正尝试将客户端连接到为 QMgr 到 QMgr 连接而设计的通道。4036是因为配置不正确。

*   删除 CH.01 并将其重新定义为 SVRCONN 通道。
*   使用 USAGE=NORMAL 更改 Q.01
*   配置 WMQ Explorer 以连接到 CH.01。
*   正如 Shashi 所提到的，请查看一些基本文档。这些包括...
    *   [WebSphere MQ 简介](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/mq50040_.htm)
    *   [设计 WebSphere MQ 架构](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/zl00110_.htm)
    *   快速入门手册已被分解，但主要部分在[此处编入索引](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/zx00006_.htm)。

您可能还希望查看[T-Rob.net](http://t-rob.net/links)上发布的 V7.1 和更早版本的 WMQ 安全实验室。虽然它是一个安全实验室，但它附带了构建实验室环境的脚本，包括 SVRCONN 和 SDR/RCVR 通道对，以及一个详细说明的实验室指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:33:18.007

谢谢您的答复，

按照您的指示，我了解到我不需要两个 QMgr，而在发送机器上只需要一个。
因此，我将查询用法更改为正常，删除通道并默认保留其他配置：
系统.ADMIN.SVRCONN通道和1414端口上的LISTENER.TCP自动创建。

我还尝试将名为 CH.01 的频道重新定义为 SVRCONN 频道
（频道 > 新 > 服务器连接频道；然后在 SYSTEM.ADMIN.SVRCONN、SYSTEM.AUTO.SVRCONN 或 SYSTEM.DEF.SVRCONN 之间进行选择）
但不幸的是我无法“配置 WMQ Explorer 以连接到 CH.01”。

无论如何，我从第二台 PC 连接的每一次尝试现在都以 AMQ4036 错误结束；即使我在 CH.01 MCA 属性中将 ID 用户设置为我的 PC 管理员，并且我已将 PC 2 上的用户标识启用为管理员@PC 1。

我想要实现的是复制公司使用的应用程序，该应用程序从远程队列接收数据。
为测试给出的队列连接规范是：服务器名称/IP、端口和通道名称。
这就是为什么我尝试在接收 PC 上创建 QMgr 复制它的原因，因为当我尝试在我的公司机器上使用默认测试信息时，它可以创建一个包含所有可用测试队列的 QMgr。

我现在正在度假，我无法获得有关我公司设置的更多具体信息，但我希望能够复制这样的配置。

问候，弗拉维奥。

# c++ - 如何在 Visual C++ 中有条件地包含一个不存在的文件？

> ID：12034732
> 
> 赞同：2
> 
> 时间：2012-08-20T08:53:31.737
> 
> 标签：c++, visual-c++

我正在使用 Visual C++ 来构建和测试一个项目，但我也会在其他平台上使用它。我最初在不同的平台上启动代码。

在我的一些类头文件中，我需要包含一个特定于其他平台的文件，但是，该文件在 Visual C++ 工作区中不存在。

我试过使用这样的代码：

```
 #if TARGET == OTHERPLATFORM
 #include "themissingfile.h"
 #endif 
```

其中 TARGET 在别处定义为 WINDOWS

```
 #define TARGET WINDOWS 
```

但是，我仍然收到一个编译器错误，指出找不到“themissingfile.h”。似乎预编译器正在处理 if 之前的包含。解决这个问题的最佳方法是什么？我想我可以在 Visual C++ 源文件夹中创建一个空白的“themissingfile.h”，但在我看来应该有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:55:29.600

改用`_WIN32`宏：

```
#ifndef _WIN32
#include "themissingfile.h"
#endif 
```

`_WIN32`为 32 位和 64 位版本定义。请参阅[C/C++ 预定义宏](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T08:58:13.363

`#define TARGET WINDOWS`不将 TARGET 设置为字符串 WINDOWS：它将其设置为任何 WINDOWS 定义的对象。最有可能发生这种情况：

```
 #define WINDOWS          // Sets WINDOWS to 0
  #define OTHERPLATFORM    // Sets OTHERPLATFORM to 0
  #define TARGET WINDOWS   // Sets TARGET to 0

  #if TARGET == OTHERPLATFORM // Evaluates to 0==0, so true 
```

# android - 带有片段接口侦听器的 NullPointerException

> ID：12034733
> 
> 赞同：0
> 
> 时间：2012-08-20T08:53:33.540
> 
> 标签：android, interface, nullpointerexception, fragment

对不起，我相信这会很简单，但我只是看不出我在哪里出错了。

我有一个片段（工具列表），可以在两个窗格中启动许多其他片段（工具）。上面有一个活动，我正在使用它来管理按下“关闭按钮”时工具碎片的移除。然后它会从后台堆栈中弹出一个工具（如果存在）。

奇怪的是，我在一个片段中进行了此操作，但是将“剪切并粘贴”到另一个片段中的代码不起作用并引发了 NPE。任何想法为什么非常感谢。

活动片段：

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;    

public class MyActivity extends FragmentActivity implements OnFragmentButtonClickedListener {

private final static int CLOSE_BUTTON = 0;
...

public void onFragmentButtonClicked(int button, Fragment fragId) {
    Log.i(TAG, "onFragmentButton");
    // process closing of fragment
    if (button == CLOSE_BUTTON) {
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.remove(fragId);
        ft.commit();
    }
    // then restore most recent fragment from backstack
    if (getSupportFragmentManager().getBackStackEntryCount() > 0) {
        getSupportFragmentManager().popBackStack();
    }
}
} 
```

此片段有效：

```
import android.support.v4.app.Fragment;

public class FirstFragment extends Fragment implements OnClickListener{

OnFragmentButtonClickedListener fragmentButtonListener;
private final static int CLOSE_BUTTON = 0;

// empty constructor
public FirstFragment() {};

// Activity must implement this interface
public interface OnFragmentButtonClickedListener {
    public void onFragmentButtonClicked (int button, Fragment fragId);
}

@Override
public void onAttach(Activity activity) {
    Log.i(TAG, "onAttach");
    super.onAttach(activity);
    try {
        fragmentButtonListener = (OnFragmentButtonClickedListener) activity;
    } catch (ClassCastException e) {
        Log.w(TAG, (activity.toString() + " must implement OnFragmentButtonClickedListener"));
    }
}

...

public void onClick(View v) {
    Log.i(TAG, "onClick");
    switch (v.getId()) {
    case R.id.btn_st_close:
        //close activity
        eraseData(prefs);
        Log.i(TAG, "Frag Id = " + String.valueOf(getFragmentManager().findFragmentById(getId())));
        fragmentButtonListener.onFragmentButtonClicked(CLOSE_BUTTON, getFragmentManager().findFragmentById(getId()));
        break;
    }
} 
```

但是，当在 fragmentButtonListener 上调用 onFragmentButtonClicked() 方法时，这个会在 onClick 方法中抛出 NPE。

```
import android.support.v4.app.Fragment;

public class SecondFragment extends Fragment implements OnClickListener {

OnFragmentButtonClickedListener fragmentButtonListener;
private final static int CLOSE_BUTTON = 0;

// empty constructor
public SecondFragment() {};

// Activity must implement this interface
public interface OnFragmentButtonClickedListener {
    public void onFragmentButtonClicked (int button, Fragment fragId);
}

@Override
public void onAttach(Activity activity) {
    Log.i(TAG, "onAttach");
    super.onAttach(activity);
    try {
        fragmentButtonListener = (OnFragmentButtonClickedListener) activity;
    } catch (ClassCastException e) {
        Log.w(TAG, (activity.toString() + " must implement OnFragmentButtonClickedListener"));
    }
}

...

 public void onClick(View v) {
     Log.i(TAG, "OnClick");
    switch (v.getId()) {
    case R.id.btn_wc_close:
        //close activity
        eraseData(prefs);
        Log.i(TAG, "Frag Id = " + String.valueOf(getFragmentManager().findFragmentById(getId())));
        try {
            fragmentButtonListener.onFragmentButtonClicked(CLOSE_BUTTON, getFragmentManager().findFragmentById(getId()));
        }
        catch (Exception e) {
            Log.i(TAG, "Exception: " + e);
        }
        break;
        }
    } 
```

从 logcat 中，我可以看到片段 Id 不为空，所以我很困惑。

```
08-20 09:13:49.096: I/Second Fragment(1691): onCreate
08-20 09:13:49.096: I/Second Fragment(1691): Frag Id = SecondFragment{41355d68 #1 id=0x7f090093}
08-20 09:13:49.106: I/Second Fragment(1691): onCreateView
08-20 09:13:49.406: I/Second Fragment(1691): onActivityCreated
08-20 09:13:49.560: I/Second Fragment(1691): onClick
0 09:13:51.766: I/Second Fragment(1691): Frag Id = SecondFragment{41355d68 #1 id=0x7f090093}
08-20 09:13:51.766: W/dalvikvm(1691): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-20 09:13:51.826: E/AndroidRuntime(1691): FATAL EXCEPTION: main
08-20 09:13:51.826: E/AndroidRuntime(1691): java.lang.NullPointerException
08-20 09:13:51.826: E/AndroidRuntime(1691):     at SecondFragment.onClick(IceTurbFragment.java:136)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at android.view.View.performClick(View.java:4084)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at android.view.View$PerformClick.run(View.java:16966)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at android.os.Handler.handleCallback(Handler.java:615)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at android.os.Looper.loop(Looper.java:137)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at java.lang.reflect.Method.invokeNative(Native Method)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at java.lang.reflect.Method.invoke(Method.java:511)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-20 09:13:51.826: E/AndroidRuntime(1691):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:58:23.477

我可以看到您在每个片段中定义了 2 个具有相同名称的接口。

```
public interface OnFragmentButtonClickedListener {
     public void onFragmentButtonClicked (int button, Fragment fragId);
} 
```

但是该活动只能实现一个具有此名称的接口（在这种情况下，我相信您的活动实现了第一个片段的接口），这可能会导致第二个片段的错误空指针异常。

```
//where is OnFragmentButtonClickedListener come from?
public class MyActivity extends FragmentActivity implements FirstFragment OnFragmentButtonClickedListener 
```

尝试在 2 个片段之外编写 OnFragmentButtonClickedListener（可能在另一个文件中）

# sql-server - 在一个语句中对 GETDATE 进行两次评估 - 它总是评估为相同吗？

> ID：12034738
> 
> 赞同：6
> 
> 时间：2012-08-20T08:53:52.390
> 
> 标签：sql-server, concurrency, getdate

认为

```
isnull(some_column, getdate()) >= getdate() 
```

其中逻辑是如果 some_column 为空，则此表达式应始终为真。然而，这是否总是如此（因为在 getdate() 的两次评估之间已经过去了一段时间并且它们不会相等）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T08:59:12.343

不，不安全。您面临所谓的[运行时常](http://blogs.msdn.com/b/conor_cunningham_msft/archive/2010/04/23/conor-vs-runtime-constant-functions.aspx)量表达式，其中`GETDATE()`是书柜示例，它在查询启动时评估一次，随后使用缓存的评估值。但是*，每次出现都会单独评估一次*，并且两次评估可以落在日期时间精度边界的不同侧，从而产生两个*不同*的值。

一个简单的测试揭示了这是如何发生的：

```
declare @cnt int = 0, @i int = 0
while @cnt = 0 
begin
    select @cnt = count(*)
    from master..spt_values 
    where getdate() != getdate();
    set @i += 1;
    if @cnt != 0
        raiserror(N'@cnt = %d this shoudl not happen but it dit after @i = %d', 16, 1, @cnt, @i);
end 
```

就我而言，这立即被击中：

```
Msg 50000, Level 16, State 1, Line 9
@cnt = 2515 this shoudl not happen but it dit after @i = 694 
```

我不是在解决如何更好地做到这一点的问题（您已经得到了很多建议），而是潜在的问题是您对运行时执行的假设是否正确（不是）：

**`GETDATE()`语句中的两次将被评估两次**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T08:59:09.230

由于您在条件中寻找 true，因此您不需要使用`getDate()`两次。只需输入一个非常大的日期...

例如：

```
isnull(some_column, '2999-01-01') >= getDate() 
```

如在

```
declare @some_column(datetime)
select case when isnull(@some_column,'2999-01-01') >= getdate() then 1 else 0 end 
```

返回 1。

或者，您可以正确执行并明确检查 null：

```
(some_column >= getdate() or some_column is null) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T09:11:16.300

在 SQL Server 2000 和以前的版本中，getdate() 是一个确定性函数，每个 SQL 语句计算一次。从 2005 年起，getdate 不是确定性的，每次都会对其进行评估，因此您应该将值分配给变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T08:57:28.170

由于您*调用*了`GETDATE()`两次，这*可能会*失败，但大多数情况下它会正常工作。

您可以执行以下操作来缓解：

```
DECLARE currentDate DATETIME

SELECT currentDate = GETDATE()

isnull(some_column, currentDate) >= currentDate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T11:01:15.130

为什么要使用日期。我的意思是没有理由要求 sql server 评估/处理默认的真实条件。您可以改为使用

```
isnull(some_column, 2) >= 1 
```

# objective-c - 如何用新的 viewController 替换当前的 viewController

> ID：12034740
> 
> 赞同：5
> 
> 时间：2012-08-20T08:53:55.423
> 
> 标签：objective-c, uinavigationcontroller, exc-bad-access

我正在尝试用新的 viewController 替换我当前的 viewController。我以前能够做到这一点，但我遇到了 BAD_ACCESS 的一些问题。

这是当我想用新视图替换当前视图时将运行的代码。

（该函数将使用本地属性“self.some_data”（非原子，保留）调用）

```
-(void) labelSelected:(SomeDataObject*) some_data{ 
   SomeViewController *viewController = (SomeViewController*)[[ClassManager sharedInstance] viewControllerForClassIdentifier:@"com.somename" fromPlistFileName:@"iPhoneScreenList"];

   viewController.data = (NSObject*)some_data;
   [some_data retain];

   //[self.navigationController pushViewController:viewController animated:YES];

   UINavigationController *tempNavigationController = self.navigationController;

   [[self retain] autorelease];

   [tempNavigationController popViewControllerAnimated:FALSE];
   [tempNavigationController pushViewController:viewController animated:TRUE];
} 
```

在这里一切正常。问题是如果我发布新的“viewController”它会崩溃。如果我选择：

```
[tempNavigationController popViewControllerAnimated:TRUE]; 
```

我得到了一些非常奇怪的行为，控制器永远不会被替换，然后我返回到 rootController 并且导航栏上有两层文本。

如果我这样做：

```
[tempNavigationController pushViewController:viewController animated:FALSE]; 
```

我得到 BAD_ACCESS 并且应用程序崩溃。它以前有效，但不再有效。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T15:05:35.957

控制器更换的使用类别：

```
//  UINavigationController+ReplaceStack.h

@interface UINavigationController (ReplaceStack)

- (void) replaceLastWith:(UIViewController *) controller;

@end

//  UINavigationController+ReplaceStack.m

#import "UINavigationController+ReplaceStack.h"

@implementation UINavigationController (ReplaceStack)

- (void) replaceLastWith:(UIViewController *) controller {
    NSMutableArray *stackViewControllers = [NSMutableArray arrayWithArray:self.viewControllers];
    [stackViewControllers removeLastObject];
    [stackViewControllers addObject:controller];
    [self setViewControllers:stackViewControllers animated:YES];
}

@end 
```

# android - Robolectric (Android)：使用 ShadowLocationManager ？是否可配置？

> ID：12034743
> 
> 赞同：4
> 
> 时间：2012-08-20T08:54:07.377
> 
> 标签：android, unit-testing, mocking, robolectric

到目前为止，我一直在非常成功地使用 Robolectric。我有一个获取位置管理器的活动。现在根据文档，robolectric 框架结合了一个名为“ShadowLocationManager”的影子类来制作一种模拟。

我的问题真的是，我怎样才能控制这个模拟，我可以控制将返回什么？如果有怎么办？

还是我必须创建我的“OWN”影子类并实现“ShadowLocationManager”。

我一直在搜索文档，但我找不到任何东西来确认我在问什么。

如果 robolectric 确实包含位置管理器的影子，我如何控制启用哪些提供程序？如果一个已经存在并且可以配置和控制的影子类，我不想实现我自己的影子类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:47:11.860

Robolectric 中的影子类是各种 Android 类的替代品，只能根据它们实现的功能进行更改。

查看[ShadowLocationManager 的源代码](https://github.com/pivotal/robolectric/blob/master/src/main/java/com/xtremelabs/robolectric/shadows/ShadowLocationManager.java)，您可以使用一些方法来调整伪造品的行为：

```
 public void setProviderEnabled(String provider, boolean isEnabled);
    public void setProviderEnabled(String provider, boolean isEnabled, List<Criteria> criteria);
    public boolean setBestProvider(String provider, boolean enabled);
    public boolean setBestProvider(String provider, boolean enabled, List<Criteria> criteria);
    public void setLastKnownLocation(String provider, Location location); 
```

您可以通过以下方式获取 LocationManager 的影子实例：

```
LocationManager instanceOfLocationManager = Robolectric.newInstanceOf(LocationManager.class);
ShadowLocationManager slm = Robolectric.shadowOf(instanceOfLocationManager); 
```

注意：在示例中，我使用 Robolectric 创建`LocationManager`. 根据您的测试设置，此实例可能来自您的注入框架或直接来自调用`Context.getSystemService(..)`. 底线是，确保测试中的实例与正在测试的代码使用的实例相同。

# c++ - 如何在 C++ 中处理大数据元素？

> ID：12034747
> 
> 赞同：0
> 
> 时间：2012-08-20T08:54:31.870
> 
> 标签：c++, pow

我想将返回值`pow(2.0,(n-8))`除以 86399。问题是`10 <= n <= 100000000`。

如何处理这么大的返回值？

我在 Ubuntu 11.10 64 位，使用 C++ 4.0.0-8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T08:59:17.470

除非您使用大数字库，否则您不能。64 位不能容纳那么大的数字。即便如此，也可能需要一段时间。2^(86392) 中有大约 26000 个数字。

如果你只想得到一个模数，有一些很好的算法。请参阅[http://en.wikipedia.org/wiki/Modular_exponentiation](http://en.wikipedia.org/wiki/Modular_exponentiation)。

如果您还想尝试 bignums，请查看[http://gmplib.org/](http://gmplib.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T08:59:35.493

一种非常简单的方法是使用 GMP—— [http ://gmplib.org/](http://gmplib.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:07:11.373

这个讨论应该回答你的问题[Modular Exponentiation for high numbers in C++](https://stackoverflow.com/questions/2207006/modular-exponentiation-for-high-numbers-in-c)

对于这么大的数字，你必须做一些聪明的事情。如果没有 bigint 库，你就无法以任何合理的方式天真地表示这个完整的数字，即便如此，它对于蛮力来说真的太大了。该数字本身将占用数十兆字节。

# asp.net - @fontface 不起作用

> ID：12034749
> 
> 赞同：0
> 
> 时间：2012-08-20T08:54:40.080
> 
> 标签：asp.net, html, visual-studio-2010, css

```
@font-face {
    font-family: 'CodeLight';
    src: url("font/CODE_Light.eot"); /* IE9 Compat Modes */
    src: url("font/CODE_Light.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */
         url("font/CODE_Light.woff") format("woff"), /* Modern Browsers */
         url("font/CODE_Light.ttf")  format("truetype"), /* Safari, Android, iOS */
         url("font/CODE_Light.svg#svgFontName") format("svg"); /* Legacy iOS */
    } 
```

我正在尝试使用@font face 加载上面的字体，但是当我在chrome开发人员工具中检查它时它给出了404。谁能解释这有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:58:38.763

如果它给你 404，你为你的字体指定了一个错误的 url...

如果你有这样的目录结构：

```
~
    css
           style.css
    fonts
           font1.eot
           font2.ttf 
```

显然，您必须像这样设置它：

```
src: url('../fonts/font1.eot") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:20:19.967

您可以提供“字体”目录的完整路径，或者如果位于根目录中，则在其前面使用“/”。像这样：

```
src: url("/font/CODE_Light.eot");
... 
```

# jquery - ryan fait 的自定义表单脚本 + 通过 jquery 重置选择框

> ID：12034750
> 
> 赞同：0
> 
> 时间：2012-08-20T08:54:46.530
> 
> 标签：jquery, select, reset

我正在为自定义选择框使用 Rian Fait 的脚本。[1](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/) 框右侧有一个小的重置按钮，用于触发 jquery 脚本：

```
$('.reset_select').click(function(){
    $(this).siblings('select').prop("selectedIndex", 0);
    return false;
}); 
```

这很好地重置了实际的选择框，但不会更新跨度标记中的文本。（它取代了选择框以获得更好的样式）

有没有人有想法！

谢谢托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:47:32.773

使用页面上的 Firebug 找到选择框的实际标签所在的字段，然后您可以将其添加到脚本中。

# python - 以秒为单位获取 python 单元测试持续时间

> ID：12034755
> 
> 赞同：11
> 
> 时间：2012-08-20T08:55:00.293
> 
> 标签：python, unit-testing, time

有什么方法可以获取“unittest.TextTestRunner().run()”运行特定单元测试所花费的总时间。

我正在使用 for 循环针对某些场景测试模块（有些必须使用，有些不需要，所以它们运行了几次），我想打印运行所有测试所花费的总时间。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T09:01:50.417

**已更新，感谢@Centralniak 的评论**。****

 **怎么简单

```
from datetime import datetime

tick = datetime.now()

# run the tests here   

tock = datetime.now()   
diff = tock - tick    # the result is a datetime.timedelta object
print(diff.total_seconds()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T08:57:24.683

您可以在设置功能中记录开始时间，然后在清理中打印经过的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T09:05:38.477

我完全按照 Eric 的假设做这件事——这是我用于测试的装饰器（通常比严格的单元测试更具功能性测试）......

```
# -*- coding: utf-8 -*-
from __future__ import print_function
from functools import wraps
from pprint import pprint

WIDTH = 60

print_separator = lambda fill='-', width=WIDTH: print(fill * width)

def timedtest(function):
    """
    Functions so decorated will print the time they took to execute.

    Usage:

        import unittest

        class MyTests(unittest.TestCase):

            @timedtest
            def test_something(self):
                assert something is something_else
                # … etc

                # An optional return value is pretty-printed,
                # along with the timing values:
                return another_thing

    """
    @wraps(function)
    def wrapper(*args, **kwargs):
        print()
        print("TESTING: %s(…)" % getattr(function, "__name__", "<unnamed>"))
        print_separator()

        print()
        t1 = time.time()
        out = function(*args, **kwargs)
        t2 = time.time()
        dt = str((t2 - t1) * 1.00)
        dtout = dt[:(dt.find(".") + 4)]
        print_separator()

        if out is not None:
            print('RESULTS:')
            pprint(out, indent=4)

        print('Test finished in %s seconds' % dtout)
        print_separator('=')

        return out

    return wrapper 
```

这就是它的核心——从那里，如果你愿意，你可以将时间存储在数据库中进行分析，或者绘制图表等等。像这样的装饰器（`@wraps(…)`从`functools`模块中使用）不会干扰单元测试框架偶尔使用的任何黑魔法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-02T08:07:57.000

在[Eric 的单行回答](https://stackoverflow.com/a/12034788/1091386)之后，我在这里使用了一个小片段：

```
from datetime import datetime

class SomeTests(unittest.TestCase):
    """
    ... write the rest yourself! ...
    """

    def setUp(self):
        self.tick = datetime.now()

    def tearDown(self):
        self.tock = datetime.now()
        diff = self.tock - self.tick
        print (diff.microseconds / 1000), "ms"

    # all the other tests below 
```

这对我来说已经足够好了，目前，但我想修复一些小的格式问题。结果`ok`现在在下一行，并且`FAIL`具有优先级。这很丑陋。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-24T19:05:01.350

除了使用`datetime`，你还可以使用`time`

```
from time import time

t0 = time()

# do your stuff here

print(time() - t0) # it will show in seconds 
```**

# silverlight - 自定义控件拼写检查器 silverlight 不起作用

> ID：12034761
> 
> 赞同：1
> 
> 时间：2012-08-20T08:55:21.317
> 
> 标签：silverlight, telerik, spell-checking, silverlight-5.0

我的自定义文本框类控件遇到问题，我将其传递给 Telerik 的 rad 拼写检查器的拼写检查器不起作用。

当我使用普通的文本框控件并将该控件传递给拼写检查器类时，它可以正常工作，但是我创建了新类并使用文本框类继承了该类，并使用 rad 拼写检查器 Telerik 传递了新的文本框自定义控件不起作用。

它给出了拼写检查器的无效控制类型的错误。

我需要做些什么来实现并使自定义文本框与 Telerik 拼写检查器一起使用？

# python - Python：在 Eclipse 中无法导入 mktime：ImportError

> ID：12034764
> 
> 赞同：0
> 
> 时间：2012-08-20T08:55:27.150
> 
> 标签：python, eclipse, import, module, pgdb

如果我只在命令行中导入 pgdb，它工作正常。

直到最近它在 Eclipse 中也可以正常工作（使用完全相同的 Python 2.7.2），但是现在，当我导入 pgdb 时，即使在一个非常简单的文件中（仅包含`import pgdb`），我也会收到以下错误消息：

```
Traceback (most recent call last):
  File ".../src/pgdbtest.py", line 8, in <module>
    import pgdb
  File "build/bdist.macosx-10.6-x86_64/egg/pgdb.py", line 66, in <module>
  File "build/bdist.macosx-10.6-x86_64/egg/_pg.py", line 7, in <module>
  File "build/bdist.macosx-10.6-x86_64/egg/_pg.py", line 4, in __bootstrap__
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pkg_resources.py", line 908, in resource_filename
    self, resource_name
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pkg_resources.py", line 1383, in get_resource_filename
    self._extract_resource(manager, self._eager_to_zip(name))
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pkg_resources.py", line 1401, in _extract_resource
    timestamp = time.mktime(date_time)
AttributeError: 'module' object has no attribute 'mktime' 
```

事实上，更一般地说，我发现如果我尝试`from time import mktime`，我也有错误：

```
from time import mktime
ImportError: cannot import name mktime 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:53:31.820

好吧，愚蠢的错误：我创建了一个名为“时间”的包......

所以我刚刚删除了它，现在一切都很好。

# python - 如何在 Thrift python 客户端中设置 rpc 超时？

> ID：12034768
> 
> 赞同：6
> 
> 时间：2012-08-20T08:55:57.640
> 
> 标签：python, rpc, thrift

我正在使用 thrift 编写 python 客户端，但我找不到任何可用的选项来设置 rpc 超时。

我的客户端代码如下：

```
socket = TSocket.TSocket(address, port)
transport = TTransport.TBufferedTransport(socket)
protocol = TBinaryProtocol.TBinaryProtocol(transport)
server = Client.Client(protocol)
transport.open() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T04:59:08.577

你可以使用`socket.setTimeout()`方法。

```
from thrift.transport.THttpClient import THttpClient
socket = THttpClient(server_url)
socket.setTimeout(SERVICE_TIMEOUT_IN_mS)
transport = TTransport.TBufferedTransport(socket)
protocol = TBinaryProtocol.TBinaryProtocol(transport) 
```

# html - window.URL.createObjectURL (html5) 的范围

> ID：12034769
> 
> 赞同：1
> 
> 时间：2012-08-20T08:55:59.147
> 
> 标签：html, html5-video

我正在构建一个 html5 应用程序，我正在努力处理 createObjectURL 方法的范围。为您提供有关我的应用程序的一些信息以帮助您了解我的问题：-第 1 页：用户提交他的视频，我正在获取有关他的视频的信息（主要是 IMDB 信息）-第 2 页：这是视频所在的页面实际玩过。

现在我的问题是：当用户在第 1 页提交他的视频时，我可以创建 blob url（createObjectURL 方法）并将其传递到第 2 页以播放视频还是超出范围？

[此页面](http://www.html5rocks.com/en/tutorials/workers/basics/)上的解释相当含糊：“Blob URL 是唯一的，并且在您的应用程序的生命周期内持续存在（例如，直到文档被卸载）”：第 1 页和第 2 页在同一个应用程序中，但文档将在它们之间卸载两页吧？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:32:06.097

因此，**html5 中的 blob URL 似乎只有页面作为范围**！我发现解决上述问题的两个解决方案是：
1\. 将所有内容放在同一页面中（例如，您可以使用 js 修改页面）
2\. 或使用 iframe 将第二个页面“加载”在第一个页面中.

希望可以帮助那里的人。

# performance - F# 中 Lazy 的表现

> ID：12034774
> 
> 赞同：3
> 
> 时间：2012-08-20T08:56:20.527
> 
> 标签：performance, f#, lazy-evaluation

为什么创建`Lazy`类型这么慢？

假设以下代码：

```
type T() =
  let v = lazy (0.0)
  member o.a = v.Value

type T2() =
  member o.a = 0.0

#time "on"

for i in 0 .. 10000000 do
  T() |> ignore

#time "on"

for i in 0 .. 10000000 do
  T2() |> ignore 
```

第一个循环给了我：`Real: 00:00:00.647`而第二个循环给了我`Real: 00:00:00.051`. Lazy 慢了 13 倍！！

我曾尝试以这种方式优化我的代码，结果我的模拟代码慢了 6 倍。追溯减速发生的地方很有趣......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T09:22:36.743

Lazy 版本有一些重要的开销代码 -

```
 60     .method public specialname
 61            instance default float64 get_a ()  cil managed
 62     {
 63         // Method begins at RVA 0x2078
 64     // Code size 14 (0xe)
 65     .maxstack 3
 66     IL_0000:  ldarg.0
 67     IL_0001:  ldfld class [FSharp.Core]System.Lazy`1<float64> Test/T::v
 68     IL_0006:  tail.
 69     IL_0008:  call instance !0 class [FSharp.Core]System.Lazy`1<float64>::get_Value()
 70     IL_000d:  ret
 71     } // end of method T::get_a 
```

将此与直接版本进行比较

```
 .method public specialname
130            instance default float64 get_a ()  cil managed
131     {
132         // Method begins at RVA 0x20cc
133     // Code size 10 (0xa)
134     .maxstack 3
135     IL_0000:  ldc.r8 0.
136     IL_0009:  ret
137     } // end of method T2::get_a 
```

所以直接版本有一个加载然后返回，而间接版本有一个加载然后调用然后返回。

由于该`lazy`版本有一个额外的调用，我预计它会明显变慢。

**更新：** 所以我想知道我们是否可以创建一个`lazy`不需要方法调用的自定义版本——我还将测试更新为实际调用方法，而不仅仅是创建对象。这是代码：

```
type T() =
  let v = lazy (0.0)
  member o.a() = v.Value

type T2() =
  member o.a() = 0.0

type T3() = 
  let mutable calculated = true
  let mutable value = 0.0
  member o.a() = if calculated then value else failwith "not done";;

#time "on"
let lazy_ = 
  for i in 0 .. 1000000 do
    T().a() |> ignore
  printfn "lazy"
#time "on"
let fakelazy = 
  for i in 0 .. 1000000 do
    T3().a() |> ignore
  printfn "fake lazy"

#time "on"
let direct = 
  for i in 0 .. 1000000 do
    T2().a() |> ignore
  printfn "direct";; 
```

这给出了以下结果：

```
lazy
Real: 00:00:03.786, CPU: 00:00:06.443, GC gen0: 7

val lazy_ : unit = ()

--> Timing now on

fake lazy
Real: 00:00:01.627, CPU: 00:00:02.858, GC gen0: 2

val fakelazy : unit = ()

--> Timing now on

direct
Real: 00:00:01.759, CPU: 00:00:02.935, GC gen0: 2

val direct : unit = () 
```

这里的`lazy`版本只比直接版本慢 2 倍，而伪造的惰性版本甚至比直接版本快一点——这可能是由于在基准测试期间发生了 GC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-19T23:56:47.473

*更新 .net 核心世界*

一个新的构造函数被添加到 Lazy 来处理常量，比如你的 case。不幸的是，F# 的`lazy`“伪关键字”总是（目前！）将常量包装为函数。

无论如何，如果你改变：

```
let v = lazy (0.0) 
```

至：

```
let v = Lazy<_> 0.0 // NB. Only .net core at the moment 
```

然后你会发现你的`T()`课只需要你的 3 倍左右`T2`。

（有一个惰性常量有什么意义？这意味着当您确实混合了常量和真正的惰性项时，您可以使用惰性作为抽象，开销很小......）

...和...

如果您实际上多次*使用创建的值，则开销会进一步缩小。*即诸如：

```
open System.Diagnostics

type T() =
  let v = Lazy<_> 0.1
  member o.a () = v.Value

type T2() =
  member o.a () = 0.1

let withLazyType () =
    let mutable sum = 0.0
    for i in 0 .. 10000000 do
        let t = T()
        for __ = 1 to 10 do
            sum <- sum + t.a()
    sum

let withoutLazyType () =
    let mutable sum = 0.0
    for i in 0 .. 10000000 do
        let t = T2()
        for __ = 1 to 10 do
            sum <- sum + t.a()
    sum

let runtest name count f =
    let mutable checksum = 0.
    let mutable totaltime = 0L
    for i = 0 to count do
        if i = 0 then
            f () |> ignore // warm up
        else
            let sw = Stopwatch.StartNew ()
            checksum <- checksum + f ()
            totaltime <- totaltime + sw.ElapsedMilliseconds
    printfn "%s: %4d (checksum=%f for %d runs)" name (totaltime/int64 count) checksum count

[<EntryPoint>]
let main _ =
    runtest "w/o  lazy" 10 withoutLazyType
    runtest "with lazy" 10 withLazyType

    0 
```

使时间差小于 2 倍。

注意。我致力于[新的惰性实现](https://github.com/dotnet/coreclr/pull/8963)......

# c# - 将生成的静态数据移植到另一个应用程序

> ID：12034775
> 
> 赞同：0
> 
> 时间：2012-08-20T08:56:25.933
> 
> 标签：c#, file

我用 C# 编写了一个简单的应用程序，它从各种来源收集数据并创建一个`clean-final-ready-for-use-data`. 它是一个自定义类的数组，它只包含原始类型 ( `int`, `string`, ...)

现在，我想在另一个 C# 应用程序中使用这些数据。在那里导出数据的最佳方式（快速和干净）是什么？`BinaryFormatter`, `XML`,`hand-made-text-file`还是别的什么？

另一个问：我可以将我的数据存储在一个托管`DLL`的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:02:06.530

只需使用内置的 .NET 对象序列化来序列化您的对象。看：

[.NET Framework 中的对象序列化](http://msdn.microsoft.com/en-us/library/ms973893.aspx)

由于您只是将它们加载到另一个 .NET 应用程序中，因此文件格式并不重要。我只想使用 XML 序列化程序。是的，您可以将此数据作为资源嵌入到 DLL 中。

# .net - MEF 打开 4.5 的一般问题

> ID：12034777
> 
> 赞同：1
> 
> 时间：2012-08-20T08:56:34.267
> 
> 标签：.net, mef, .net-4.5

我们使用 MEF Contrib 开放泛型支持，如下所示：

```
[InheritedExport]
interface ITest2<T>
{
    void Execute();
}

class TestClass2<T> : ITest2<T>
{
    public void Execute()
    {
        Console.WriteLine();
    }
}

class Program
{
    static void Main(string[] args)
    {
        var catalog = new AssemblyCatalog(typeof(Program).Assembly);
        var container = new CompositionContainer(catalog);
        var test2 = container.GetExportedValues<ITest2<string>>();
    }
} 
```

但是，由于安装了 .NET Framework 4.5，此代码不再有效。它不仅在针对 .NET 4.5 或 .NET 4.0 构建后不再起作用，而且还会破坏现有的已编译应用程序。

似乎必须在 TestClass2 上使用显式 [Export(typeof(ITest2<>))] 属性，或者更改定义：

```
[InheritedExport(typeof(ITest2<>))]
interface ITest2<T>
{
    void Execute();
} 
```

有谁知道为什么这会改变？奇怪的是，MEF 的开放泛型支持（在 4.5 中）也因开放泛型接口上的非类型化 [InheritedExport] 属性而失败。

我会认为 [InheritedExport] 在开放通用接口上的默认行为与 [InheritedExport(typeof(ITest2<>))] 相同。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:24:56.580

这是开放泛型支持的 .Net 4.5 MEF 实现中的一个错误。它将在 .Net 框架的下一个版本中修复。

有几种解决方法，它们都不理想。

1.  使接口成为抽象基类
2.  从接口中删除 InheritedExport 并使用导出属性显式标记派生类。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T02:47:36.200

当使用开放泛型的 .NET 4.5 实现和 InheritedExport 时，这看起来像是一个错误。MEF 团队正在调查。

您声称通过为您添加`[InheritedExport(typeof(ITest2<>))]`已`ITest2<T>`解决的问题，但是在我尝试重现此问题时，它也不起作用。我只是通过`Export(typeof(ITest2<>))`直接在`Test2Class`.

您能否提供有关您收到的错误的更多详细信息？另外，您还在使用 MEF contrib 的东西，还是在这个项目中停止使用它？

# jquery - jQuery: .live() 和 .on() - live 返回 this 作为 JS 对象，返回 this 作为 jQuery 对象？

> ID：12034781
> 
> 赞同：-1
> 
> 时间：2012-08-20T08:56:54.090
> 
> 标签：jquery, jquery-on

我想`.live()`用`.on()`.

**。居住（）**

```
 var jqRow = $('#' + id + ' tr');
 jqRow.live("click", function () {
            myFunction(this);
            return false;
        }); 
```

**。在（）**

```
var jqRow = $('#' + id + ' tr');
$(document).on("click", jqRow, function () {
                    myFunction(this);
                    return false;
        }); 
```

该`this`方法`.live()`返回一个 JS 对象（我需要这个）。该`this`方法`.on()`返回一个 jQuery 对象，这会导致 myFunction 失败。

如何在 live 函数中获得相同的非 jQuery 这个对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:01:51.117

如果*真的*`this`是一个 jQuery 对象，你可以使用or ：*`this[0]`[`this.get(0)`](http://api.jquery.com/get/)*

 *> 该`.get()`方法允许我们访问每个 jQuery 对象下的 DOM 节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:13:43.447

您的语法不正确，您的`jqRow`变量是一个 jQuery 对象，但该`.on()`函数只接受**string selectors**。如果您传递一个 jQuery 对象，该参数将被忽略，这与在文档本身上设置一个非委托事件处理程序相同。

改变这个：

```
var jqRow = $('#' + id + ' tr'); // this line creates a jQuery object
$(document).on("click", jqRow, function () {
    myFunction(this);
    return false;
}); 
```

对此：

```
var jqRow = '#' + id + ' tr'; // this line initialises a string
$(document).on("click", jqRow, function () {
    myFunction(this);
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T09:14:13.930

根据我的评论，**不可能**成为`this`jQuery 对象。这是因为函数内的值是`this`在调用函数时设置的，不能显式设置，它是不可变的。显然，它可能*是*`$(this)`一个 jQuery 对象。

**编辑**

正如@Anthony Grist 所指出的，这里真正的问题是在`.on()`. 如果将其更改为传入字符串选择器，则会相应地`this`设置 的值。我为疏忽道歉，这是一个[有效的 JSFiddle](http://jsfiddle.net/2W8pM/3/)。

对于它的价值，如果你委托给一个选择器，我会调用`.on()`那个选择器：

```
$("#foo").on("click", function() {}); 
```

除此以外...

如果您无法传入字符串选择器并且必须传入一个实际的 jQuery 对象，您可以使用事件对象来解决它。此代码有效：

```
var jqRow = $('#foo');
$(document).on("click", jqRow, function (e) {
  myFunction(e.target);
  return false;
});

var jqRow2 = $('#bar');
jqRow2.live("click", function () {
  myFunction(this);
  return false;
 });

function myFunction(x) {
  console.log(x);
  console.log($(x).attr("id"));
} 
```

[工作 JSFiddle](http://jsfiddle.net/2W8pM/)

请记住，使用您在那里用于委派的语法**不会**将事件绑定到`jqRow`，而是将其绑定到`document`. jQuery 不允许您传递要委托给的 jQuery 对象。所以上面代码的第一部分是毫无意义的，你可以这样做：

```
var jqRow = $('#foo');
$(document).on("click", function (e) {
  if($(e.target).attr("id") === "foo") {
    myFunction(e.target);
  }
  return false;
}); 
```

这就是为什么`this`您的值`.on()`不是单击的对象的原因，正如您所期望的那样，jQuery 无法将事件委托给 jQuery 对象，它需要一个选择器。因此，通过`e.target`应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T09:02:38.857

你可以使用get()函数，它以索引为参数，也可以使用[]。

```
var jqRow = $('#' + id + ' tr');
$(document).on("click", jqRow, function () {
                    myFunction(this.get(0));
                    // or this myFunction(this[0]);
                    return false;
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T09:10:03.110

采用

```
$(document).ready(function()
{ 
    var id="" ;  // ID of your Element
     var jqRow = $('#' + id);
      jqRow.on("click", 'tr', function ()
      {
                //alert($(this));
                myFunction($(this));
                return false;
       });

 });​ 
```

​</p>*

# java - 如何在java中计算逆累积beta分布函数

> ID：12034782
> 
> 赞同：5
> 
> 时间：2012-08-20T08:56:54.840
> 
> 标签：java, distribution, apache-commons-math

我正在寻找一个 java 库/实现，它支持***以合理的精度***计算 beta 分布的逆累积分布函数（又名分位数估计） 。

当然，我尝试过[apache commons math ，但在第 3 版](http://commons.apache.org/math/)[中，精度](https://issues.apache.org/jira/browse/MATH-738)似乎仍然存在一些问题。下面对导致这个问题的问题进行了广泛描述。

* * *

假设我想通过大量试验计算 beta 分布的可信区间。在*apache 公共数学*...

```
final int trials = 161750;
final int successes = 10007;
final double alpha = 0.05d;

// the supplied precision is the default precision according to the source code
BetaDistribution betaDist = new BetaDistribution(successes + 1, trials - successes + 1, 1e-9);

System.out.println("2.5 percentile :" + betaDist.inverseCumulativeProbability(alpha / 2d));
System.out.println("mean: " + betaDist.getNumericalMean());
System.out.println("median: " + betaDist.inverseCumulativeProbability(0.5));
System.out.println("97.5 percentile :" + betaDist.inverseCumulativeProbability(1 - alpha / 2d)); 
```

提供

```
2.5 percentile :0.062030402074808505
mean: 0.06187249616697166
median: 0.062030258659508855
97.5 percentile :0.06305170793994147 
```

问题是 2.5 百分位数和中位数相同，同时都大于平均值。

相比之下，*R**包*binom提供

```
binom.confint(10007+1,161750+2,methods=c("agresti-coull","exact","wilson"))
         method     x      n      mean      lower      upper
1 agresti-coull 10008 161752 0.0618725 0.06070873 0.06305707
2         exact 10008 161752 0.0618725 0.06070317 0.06305756
3        wilson 10008 161752 0.0618725 0.06070877 0.06305703 
```

和*R* -package*统计信息*

```
qbeta(c(0.025,0.975),10007+1,161750-10007+1)
[1] 0.06070355 0.06305171 
```

为了支持 R 的结果，这是*Wolfram Alpha*告诉我的

*   [InverseBetaRegularized[0.025,10007+1,161750-10007+1]](http://www.wolframalpha.com/input/?i=InverseBetaRegularized%5b0.025%2C10007%2B1%2C161750-10007%2B1%5d) => 0.06070354631...
*   [InverseBetaRegularized[0.975,10007+1,161750-10007+1]](http://www.wolframalpha.com/input/?i=InverseBetaRegularized%5B0.975,10007%2b1,161750-10007%2b1%5D) => 0.06305170794...

**关于要求的最后说明：**

*   我需要进行很多这样的计算。因此，任何解决方案都不应花费超过 1 秒的时间（与 apache 公共数学的 41 毫秒（尽管是错误的）相比仍然很多）。
*   我知道可以在 java 中使用 R。由于我不会在这里详细说明的原因，如果其他任何事情（纯 java）失败，这是最后一个选项。

**更新 21.08.12**

[似乎](https://issues.apache.org/jira/browse/MATH-738)该问题已在 apache-commons-math 的 3.1-SNAPSHOT 中得到修复或至少得到改进。对于上面的用例

```
2.5 percentile :0.06070354581340706
mean: 0.06187249616697166
median: 0.06187069085946604
97.5 percentile :0.06305170793994147 
```

**更新 23.02.13**

虽然乍一看这个问题及其回答可能过于本地化，但我认为它很好地说明了一些数值问题无法（有效地）通过首先想到的黑客方法来解决。所以我希望它保持开放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:04:34.777

该问题已在*apache commons math 3.1.1中得到修复*

上面交付的测试用例

```
2.5 percentile :0.06070354581334864
mean: 0.06187249616697166
median: 0.06187069085930821
97.5 percentile :0.0630517079399996 
```

与 r-package stats 的结果相匹配。3.1-SNAPSHOT + x 版本的广泛应用也没有造成任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:10:16.587

最有可能的是，这个问题不能通用解决，因为如果累积分布函数的图形非常平坦（通常会朝向分布的尾部），则需要在垂直轴上非常高的精度才能达到合理的水平轴上的精度。

因此，使用直接计算分位数的函数总是比从累积分布函数中导出分位数更好。

如果您不担心精度，您当然可以数值求解方程 q = F (x)。由于 F 正在增加，这并不困难：

```
 double x_u = 0.0;
   double x_l = 0.0;

   // find some interval quantile is in
   if ( F (0.0) > q) {
      while ( F (x_l) > q) {
         x_u = x_l;
         x_l = 2.0 * x_l - 1.0;
      }
   } else {
      while ( F (x_u) < q) {
         x_l = x_u;
         x_u = 2.0 * x_u + 1.0;
      }
   }

   // narrow down interval to necessary precision
   while ( x_u - x_l > precision ) {
      double m = (x_u - x_l) / 2.0;
      if ( F (m) > q ) x_u = m; else x_l = m;
   }     
   // quantile will be within [x_l; x_u] 
```

**备注：**我不清楚为什么精度应该是一个问题，特别是对于 beta 分布，因为 beta 分布存在于区间 [0;1] 上，并且图表在区间末端相当陡峭。

**第二点：**你计算的上分位数是错误的；它应该读

```
System.out.println( "97.5 percentile :" + betaDist.inverseCumulativeProbability( 1 - alpha / 2d ) ); 
```

**第三次编辑：**算法更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:36:00.787

我找到并尝试了库[JSci](http://jsci.sourceforge.net/)（版本 1.2 27.07.2010）

代码片段：

```
final int trials = 162000;
final int successes = 10000;
final double alpha =0.05d;

BetaDistribution betaDist = new BetaDistribution(successes + 1, trials - successes + 1);
long timeSum = 0;
for(double perc : new double[]{alpha/2,0.5,1-alpha/2}){
    long time = System.currentTimeMillis();
    System.out.println((perc*100) + " percentile :" + betaDist.inverse(perc));
    timeSum += System.currentTimeMillis()-time;
}
System.out.println("Took ~" + timeSum/3 + " per call"); 
```

返回

```
2.5 percentile :0.060561615036184686
50.0 percentile :0.06172659147924378
97.5 percentile :0.06290542466617127
Took ~2ms per call 
```

正如 JohnB 所建议的那样，在内部使用了一种寻根方法。可以扩展[ProbabilityDistribution#inverse](http://jsci.sourceforge.net/api-0.94/JSci/maths/statistics/ProbabilityDistribution.html#inverse%28double%29)以要求更高的精度。不幸的是，即使有大量的迭代（100k）和要求的 10^-10 精度，算法仍然返回

```
2.5 percentile :0.06056698485628473
50.0 percentile :0.06173200221779383
97.5 percentile :0.06291087598052053
Took ~564ms per call 
```

现在：谁的代码错误更少？R 还是 JSci ？我更喜欢拥有更大用户群的那个...

# mysql - mysql update语句在过程中带有变量

> ID：12034783
> 
> 赞同：0
> 
> 时间：2012-08-20T08:57:00.310
> 
> 标签：mysql, variables, stored-procedures, sql-update

我创建了一个包含更新的过程。有两个变量`otherCategoryId`和`otherCategoryId`。

当我尝试在命令行上运行该过程时，它给了我一个错误，例如：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“更新...”附近使用的正确语法

更新语句是这样的：

```
abstract_type set parent_fk = otherCategoryId  where id = otherCategoryId; 
```

**更新**：我的程序的源代码是：

```
CREATE PROCEDURE fixCommodityIPRTypes(IN typeClass VARCHAR(255), IN commodityClass VARCHAR(255),IN parrentFk VARCHAR(255))
BEGIN

    DECLARE otherCategoryId BIGINT;
    DECLARE wrongNoOfAccesses INT; 
    DECLARE wrongTypeId INT; 
    DECLARE loop_count INT  DEFAULT 1;
    DECLARE num_rows INT; 
    DECLARE nameOfType VARCHAR(1255);

    select otherCategoryId = pt.id from abstract_type pt  where pt.class = typeClass and pt.name = 'Other' and  pt.normalized = 1 and pt.normalize_link_fk is null;

    -- declare cursor for all other - specify types  with parent fk specified

    block_cursor: BEGIN
    DECLARE changeOSTypesCursor CURSOR FOR SELECT x.id, x.name, x.no_of_accesses from abstract_type as x  where class = typeClass and normalized = 0 and parent_fk = parrentFk;

    open changeOSTypesCursor;
    select FOUND_ROWS() into num_rows;

    update_loop:LOOP
         fetch  changeOSTypesCursor into wrongTypeId, nameOfType, wrongNoOfAccesses;
      -- for each distinct other-specify and parent the category called

      inside_loop: BEGIN
      DECLARE nrOfAccess BIGINT;
      DECLARE otherId BIGINT;
      select NO_OF_ACCESSES , Id from  abstract_type where class = typeClass and normalized = 0 and parent_fk = otherCategoryId and name = nameOfType into nrOfAccess, otherId ;    
      -- if there are no types with the same text as the current os type with parent category 'OTHER'
      -- then we just change the parent to be the category 'OTHER' 
      if nrOfAccess =0
        update abstract_type set parent_fk = otherCategoryId  where id = wrongTypeId;
      -- else we must set the no_of_accesses for the type with parent 'OTHER' = 
      -- current no_of_acceses + accesses from the type with specified parent,
      -- replace the foreign_key in commodities with the type with parent_other and 
      -- delete 
      else if nrOfAccess > 0 then
      begin
          update abstract_type set no_of_accesses = wrongNoOfAccesses + nrOfAccess where id = otherId;
          update commodity set goods_type_fk = otherId where class = commodityClass and goods_type_fk = wrongTypeId;
          delete from abstract_type where id = wrongTypeId;
      end   
      if num_rows <= loop_count then
         leave update_loop;
      end if
      end inside_loop;
    end LOOP;

    close changeOSTypesCursor;
    END block_cursor;
      -- update trademarks with parent specified and delete  the category of level 1
    update type_xref set ref_parents_fk = otherCategoryId  where  ref_parents_fk = parrentFk;
    delete from abstract_type where id = parrentFk;
END ## 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:21:36.577

你`THEN`在里面少了一个。

[MySQL 手动 IF 语句。](http://dev.mysql.com/doc/refman/5.1/en/if.html)

改变这个

```
 if nrOfAccess =0
    update abstract_type set parent_fk = otherCategoryId  where ... 
```

至

```
 if nrOfAccess =0 THEN
    update abstract_type set parent_fk = otherCategoryId  where ... 
```

**更新：**

```
CREATE PROCEDURE fixCommodityIPRTypes(IN typeClass VARCHAR(255), IN commodityClass VARCHAR(255),IN parrentFk VARCHAR(255))
BEGIN

    DECLARE otherCategoryId BIGINT;
    DECLARE wrongNoOfAccesses INT; 
    DECLARE wrongTypeId INT; 
    DECLARE loop_count INT  DEFAULT 1;
    DECLARE num_rows INT; 
    DECLARE nameOfType VARCHAR(1255);

    select otherCategoryId := pt.id from abstract_type pt  where pt.class = typeClass and pt.name = 'Other' and  pt.normalized = 1 and pt.normalize_link_fk is null;
    --here you want to use the assignment operator := rather than is_equal operator =

    block_cursor: BEGIN
    DECLARE changeOSTypesCursor CURSOR FOR SELECT x.id, x.name, x.no_of_accesses from abstract_type as x  where class = typeClass and normalized = 0 and parent_fk = parrentFk;

    open changeOSTypesCursor;
    select FOUND_ROWS() into num_rows;
    --FOUND_ROWS() will return a random number or zero or NULL here, since you need to do a query with SELECT SQL_CALC_FOUND_ROWS col1, col2 FROM ... first.

    --before you fetch anything from cursor, you want to declare a continue handler when there are no more rows found.
    --have a look at this example here: http://dev.mysql.com/doc/refman/5.0/en/cursors.html

         fetch  changeOSTypesCursor into wrongTypeId, nameOfType, wrongNoOfAccesses;

      DECLARE nrOfAccess BIGINT;
      DECLARE otherId BIGINT;
      select NO_OF_ACCESSES , Id from  abstract_type where class = typeClass and normalized = 0 and parent_fk = otherCategoryId and name = nameOfType into nrOfAccess, otherId ;    

      if nrOfAccess =0 THEN
        update abstract_type set parent_fk = otherCategoryId  where id = wrongTypeId;
      else if nrOfAccess > 0 then
      begin
          update abstract_type set no_of_accesses = wrongNoOfAccesses + nrOfAccess where id = otherId;
          update commodity set goods_type_fk = otherId where class = commodityClass and goods_type_fk = wrongTypeId;
          delete from abstract_type where id = wrongTypeId;
      end IF;
      --you were missing an IF here. Please read proper syntax in the manual before posting questions. I'll leave the rest to you. We want to solve real problems here, you know? Not waste our time with syntax errors. 
```

# ajax - 使用小部件在 mvc3 中进行仪表板开发

> ID：12034785
> 
> 赞同：1
> 
> 时间：2012-08-20T08:57:14.407
> 
> 标签：ajax, asp.net-mvc-3, dashboard

我想在 mvc3 中为管理员开发仪表板，他应该能够执行多项操作。意味着每个小部件可能有多个按钮，其中每个按钮都会对控制器中的相同操作进行 ajax 调用。所以就像更新面板一样，我只想渲染页面的那一部分。我知道我应该使用局部视图。任何正确方法的指导方针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:43:09.813

设置您的控制器操作以仅返回部分视图：

```
public PartialViewResult GetPartial()
{
    return PartialView();
} 
```

然后只需通过 jQuery 调用操作并将特定面板的 HTML 替换为响应数据。IE：

```
$.get('/controller/action', function(data) {
    $('.myPanel').html(data);
}); 
```

# ruby-on-rails - 当内容是 html_safe 时，测试视图会呈现翻译的内容？

> ID：12034787
> 
> 赞同：2
> 
> 时间：2012-08-20T08:57:18.280
> 
> 标签：ruby-on-rails, testing, internationalization

一直在尝试找出如何编写一个测试，以测试当内容是带有 html 的翻译键时视图是否呈现正确的内容。为了更详细地解释一下，我有这个 rspec 测试：

```
require 'spec_helper'
describe "application/error_404.html.erb" do
  I18n.available_locales.each do |locale|
    it "should have 'not found text' in #{locale}" do
      I18n.locale = locale
      render
      rendered.should have_content I18n.t(:not_found_html)
    end
  end
end 
```

测试它是否`:not_found_html`为我可用的每个语言环境呈现。但测试失败，因为它寻找一个没有 html 的字符串：

```
Failure/Error: rendered.should have_content I18n.t(:not_found_html)
       expected there to be content "Could not find the page or item you tried to view. 
         Please try again and if the problem persists please <a href=\"%{contact_link} \">let us
         know</a> so we can fix this."
       in
         "\n\t\n\t\t\tNot found\n\t\t\n\t\n\t\t\t\n\t\t\t\tCould not find the page or item you tried
         to view. Please try again and if the problem persists please let us know so we can fix
         this.\n\t\t\t\t\n\t\t\n\t" 
```

我对 Rails 的了解不够多，不知道如何完成这项工作。我想我需要一些方法来渲染 I18n 字符串？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:12:07.097

I18n.t(:not_found_html) 只呈现字符串。

你可以这样做：

```
I18n.available_locales.each do |l| 
  I18n.locale = l
  I18n.translate! :not_found_html
end 
```

如果找不到，它会引发 I18n::MissingTranslationData。

# java - 父对象和列表上的 HQL 选择查询

> ID：12034792
> 
> 赞同：0
> 
> 时间：2012-08-20T08:57:48.963
> 
> 标签：java, hibernate, hql

我的班级结构如下

```
class ABC {
abcid;
name;
listOfXYZObjects;
}

class XYZ {
xyzid;
name;
} 
```

现在我已经在 hbm 文件中配置了上述类。DB中已经存储了一些数据。我有 abcId 和 xyzId 并想在单个 HQL 查询中只获取两个类的名称字段。

任何人都可以指导我以上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:07:04.060

如果您已将 hbm 配置为 XYZ 类与 ABC 类相关，则检索就像您仅从 ABC 类检索一样。

例如 ：`getHibernateTemplate().load(ABC.class, someABCId);`

ABC 的 Hbm：

```
<class name="ABC" table="abc_table" mutable="false">
    <cache usage="read-only"/>
    <id name="abcId" column="id">
        <generator class="increment"/>
    </id>
    <property name="name" column="name"/>
    <list name="listOfXYZObjects" lazy="true" >
        <key column="abc_id"/>
        <index column="id"/>
        <one-to-many class="XYZ"/>
    </list>
</class> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:43:32.417

假设您的 ABC 是大学，XYZ 是学生。使用 Criteria，我们可以得到大学名称和学生姓名，如下所示。

```
Criteria c = s.createCriteria(College.class,"clg");
c.createCriteria("students", "s");
c.add(Restrictions.eq("id",new Integer(1)));
c.add(Restrictions.eq("s.id", new Integer(1)));

ProjectionList properties = Projections.projectionList();
properties.add(Projections.property("name"));
properties.add(Projections.property("s.name"));
c.setProjection(properties);

List l=c.list();
Iterator it=l.iterator();
while(it.hasNext())
{
    Object ob[] = (Object[])it.next();
    System.out.println(ob[0]+"--------"+ob[1]);
} 
```

输出：

休眠：选择this_.name为y0_，s1_.name为y1_ from College1 this_inner join Student1 s1_ on this_.id=s1_.colg_id where this_.id=? 和 s1_.id=?

SCSC学院--------学生1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:17:24.987

使用下面所述的 hql 查询。

```
select new map(a.ABCname , b.XYZname) 
from ABC a, XYZ b 
where a.abcid = "+abcid+" and b.xyzid = "+xyzid+" 
```

其中 from 子句是`ABC`pojo 类和`XYZ`pojo 类。这里两个类中的名称字段应该有不同的名称。或者你也可以使用 with out`new map`子句。

但是使用`new map`子句对您来说会容易得多。

希望这对您有所帮助。

库什

# objective-c - UISlider 背景消失

> ID：12034798
> 
> 赞同：1
> 
> 时间：2012-08-20T08:58:34.750
> 
> 标签：objective-c, uislider

我使用 UISlider 作为视频播放器来跟踪和更改播放的位置。

似乎每当我从代码中更改slider.value 时，滑块的背景线就会消失。

它从此改变：

![在此处输入图像描述](../Images/f04765ae0addbd78edb8f09eca9d50a0.png)

对此：

![在此处输入图像描述](../Images/c12060a1b17a2cb4144a93227e62a97f.png)

（我添加了灰色背景颜色）

什么会导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:35:24.357

解决了。

正如特洛伊木马所建议的那样，我看了这个问题：

[iOS - iPhone：UISlider 轨道图像随机消失](https://stackoverflow.com/questions/9317366/ios-iphone-uislider-track-image-disappearing-randomly)

简而言之：我使用`[UISlider setValue:animated:]`并确保我没有得到`NaN`，这是真正的问题。

# soap - SOAP over JMS，对 WSDL 的要求

> ID：12034800
> 
> 赞同：1
> 
> 时间：2012-08-20T08:58:40.073
> 
> 标签：soap, wsdl, jms

我正在尝试使用`JMS`作为传输和`SOAP`WebServices 作为我的应用程序集成的接口来实现集成。

*   是否要求`WSDL`自身将传输定义为`JMS`？
*   我可以保留它并将队列`HTTP`的配置移动到其他地方吗？`JMS`

我正在考虑`Apache Camel`作为替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:25:08.177

WSDL 中的 JMS 部分只是提示如何调用服务。如果您依赖一些生成骨架代码的导入工具，但没有提示，如果没有提示，可能会有些棘手。

我什至使用了其中定义了 HTTP 和 JMS 传输的 WSDL，所以这也是可能的。

如何配置队列是另一回事，因为它取决于您使用的框架。

我看不出 Apache Camel 应该如何替代 SOAP over JMS。Camel 是一个集成引擎（实际上能够通过 JMS 执行 SOAP），但它本身不是一个传输标准。作为一个小旁注，我真的推荐 Camel 来做集成任务。

您可能需要仔细考虑您对集成需求的要求。JMS 上的 SOAP 可能非常强大，但设计起来也有点复杂，因为人们倾向于将 SOAP 视为同步服务定义，而 JMS 主要是为异步通信而设计的，尽管也支持同步调用。

# java - 请求标头返回 NULL

> ID：12034810
> 
> 赞同：0
> 
> 时间：2012-08-20T08:59:28.053
> 
> 标签：java, servlets

我对下面的代码有一些问题，`req.getHeader()`正在返回`NULL`

```
// The code below returns the expected value
String header = req.getHeader("x-key");
String size = req.getHeader("x-size");
String contentType = req.getContentType();

logger.info("Content-Length: " + req.getContentLength());
logger.info("x-key : " + header);
logger.info("x-size : " + size);

// The value of req.getHeader below is returning NULL
for (Enumeration e = req.getHeaderNames(); e.hasMoreElements();) {
   String headerName = (String) e.nextElement();
   logger.info("Name = " + headerName + " " + "Value = " + req.getHeader(headerName ));
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:03:15.857

您的代码看起来不错。如果`getHeader()`返回`null`标头确实为空，即不是客户端发送的。

因此，首先检查您的客户端并确保它发送标头。其次，尝试使用网络嗅探器，例如 Wireshark 并记录网络活动。

如果您需要更多帮助，请发布您客户的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:05:35.360

以下是 api 文档摘录的一部分。

公共 java.util.Enumeration getHeaderNames()

```
Some servlet containers do not allow servlets to access headers using this method, in which case this method returns null 
```

# python - 这个矩阵在什么空间？

> ID：12034813
> 
> 赞同：5
> 
> 时间：2012-08-20T08:59:37.827
> 
> 标签：python, animation, matrix, space, blender

在 Blender 2.6 API 中，PoseBone 用于动画骨骼。PoseBone.matrix 是一种方法。API 说 PoseBone.matrix 在“对象空间”中。

[http://www.blender.org/documentation/blender_python_api_2_63_5/bpy.types.PoseBone.html#bpy.types.PoseBone.matrix](http://www.blender.org/documentation/blender_python_api_2_63_5/bpy.types.PoseBone.html#bpy.types.PoseBone.matrix)

PoseBone.matrix 根本不是我见过的。我仍然无法让我的动画导入器工作。与 PoseBone.matrix 有什么关系？在 Blender 2.4 API 中有两个矩阵：一个在局部空间，一个在电枢空间。

但是新的 PoseBone.matrix 两者都不是！它不是本地矩阵：

![在此处输入图像描述](../Images/3076248b215a248a76b1c047105f5d1c.png)

位置不是本地的，而是全球的。

但旋转 ![在此处输入图像描述](../Images/9c660b2461ec8339d6f40f4f6ec453fa.png)

```
<Euler (x=1.5708, y=-0.7854, z=-0.0000), order='XYZ'> 
```

是。

那么 API 所说的 PoseBone.matrix 所在的“对象空间”是什么？

我正在尝试将我的电枢空间矩阵分配给分层电枢，但我无法正确处理它们。

我尝试分解我拥有的矩阵，撤消父旋转然后再次重新组合矩阵，然后将其设置为“PoseBone.matrix”。它只是行不通。

```
oldmatrix = myMatrix
loc, rot, scale = oldmatrix.decompose()

#rot = rot * pose.bones[bonename].parent.rotation_quaternion.conjugated()
for i in pose.bones[bonename].parent_recursive:
   rot = rot * i.conjugated()

newmatrix = rot.to_matrix().to_4x4()

newmatrix[0][3] = loc.x
newmatrix[1][3] = loc.y
newmatrix[2][3] = loc.z

pose.bones[bonename].matrix = newmatrix 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T21:30:53.077

**编辑**：我找到了将这些对象空间变换转换为骨骼局部空间的解决方案。

长话短说 - 这是完成该任务的代码片段：

```
 poseBone = C.object.pose.bones[2]  # <----- set your bone here

    # poseBone.matrix is in object space - we need to convert it to local space 
    if poseBone.parent is not None:
        parentRefPoseMtx = poseBone.parent.bone.matrix_local
        boneRefPoseMtx = poseBone.bone.matrix_local
        parentPoseMtx = poseBone.parent.matrix
        bonePoseMtx = poseBone.matrix

        boneLocMtx = ( parentRefPoseMtx.inverted() * boneRefPoseMtx ).inverted() * ( parentPoseMtx.inverted() * bonePoseMtx )

    else:
        boneRefPoseMtx = poseBone.bone.matrix_local
        bonePoseMtx = poseBone.matrix

        boneLocMtx = boneRefPoseMtx.inverted() * bonePoseMtx

    loc, rot, scale = boneLocMtx.decompose() 
```

* * *

**我的老问题**：

你找到解决方案了吗？我正在处理完全相同的问题。

对象空间矩阵应该是相对于父对象空间矩阵表示的骨骼局部空间矩阵，因此：

boneOS = parentOS * boneLS

但正如您所注意到的 - 它没有给出正确的解决方案。骨骼仍然偏移。我想到的一件事是它被静止姿势变换所抵消，所以我尝试将其回滚，但这也不起作用，但也许我使用的方程式是错误的。

以下是我尝试计算姿势骨骼的局部空间变换的方法（假设骨骼 1 是我感兴趣的骨骼，骨骼 0 是其父骨骼，而骨骼 0 没有父骨骼）：

```
boneOS = C.object.pose.bones[2].matrix
parentBoneOS = C.object.pose.bones[2].parent.matrix

boneRP = C.object.pose.bones[2].bone.matrix_local  # rest pose matrix in bone local space
parentBoneRP = C.object.pose.bones[1].bone.matrix_local  # parent bone's rest pose matrix in bone local space

boneLS = ( parentBoneRP * boneRP ).inverted() * parentOS.inverted() * boneOS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:51:59.547

该矩阵位于对象空间中，它的行为应该与您对代码的期望一样。发生的事情是骨骼的矩阵在更改矩阵后没有立即更新。到目前为止，我已经找到了一个 hack 解决方案，可以在每块骨头之后更新整个场景

```
bpy.context.scene.update() 
```

# php - Jelix - 应用程序安装

> ID：12034818
> 
> 赞同：1
> 
> 时间：2012-08-20T09:00:25.890
> 
> 标签：php

我正在使用[Jelix PHP5 框架](http://jelix.org)，当我尝试安装应用程序时遇到此错误：

```
php lib/jelix-scripts/jelix -portail installapp

Error: bad path in JELIX_APP_TEMP_PATH, it is equals to '/' !!
   Jelix cannot clear the content of the temp directory.
   Correct the path in JELIX_APP_TEMP_PATH or create the directory you
   indicated into JELIX_APP_TEMP_PATH. 
```

我的 porttail/application.init.php 文件包含：

```
<?php
/**
 * @licence  http://www.gnu.org/licenses/gpl.html GNU General Public Licence, see LICENCE file
 */
require(dirname(__FILE__).'/../lib/jelix/init.php');

define ('JELIX_APP_PATH', dirname (__FILE__).'/'); // don't change

define ('JELIX_APP_TEMP_PATH',    realpath(JELIX_APP_PATH.'../temp/portail/').'/');
define ('JELIX_APP_VAR_PATH',     JELIX_APP_PATH.'var/');
define ('JELIX_APP_LOG_PATH',     JELIX_APP_PATH.'var/log/');
define ('JELIX_APP_CONFIG_PATH',  JELIX_APP_PATH.'var/config/');
define ('JELIX_APP_WWW_PATH',     realpath(JELIX_APP_PATH.'../www/').'/');
define ('JELIX_APP_CMD_PATH',     JELIX_APP_PATH.'scripts/'); 
```

我的 porttail/application-cli.init.php 文件包含：

```
<?php
/**
 * @licence  http://www.gnu.org/licenses/gpl.html GNU General Public Licence, see LICENCE file
 */

require(dirname(__FILE__).'/../lib/jelix/init.php');

define ('JELIX_APP_PATH', dirname (__FILE__).'/'); // don't change

define ('JELIX_APP_TEMP_PATH',    realpath(JELIX_APP_PATH.'../temp/portail-cli/').'/');
define ('JELIX_APP_VAR_PATH',     JELIX_APP_PATH.'var/');
define ('JELIX_APP_LOG_PATH',     JELIX_APP_PATH.'var/log/');
define ('JELIX_APP_CONFIG_PATH',  JELIX_APP_PATH.'var/config/');
define ('JELIX_APP_WWW_PATH',     realpath(JELIX_APP_PATH.'../www/').'/');
define ('JELIX_APP_CMD_PATH',     JELIX_APP_PATH.'scripts/'); 
```

你知道出了什么问题吗？

编辑：如果有人可以添加“jelix”作为标签；谢谢，因为在达到声誉水平之前我不能这样做:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:59:34.953

所以经过很长时间我已经完成找到如何解决它。

在 dir temp 中有目录

*   门廊
*   门户-cli

但是当我们使用 jelix 脚本来管理安装时，我们必须创建

*   端口脚本

然后安装将完成而没有任何错误

```
~/:$ php lib/jelix-scripts/jelix --portail installapp
~/:$ 
```

跳这可以帮助下一个;）

# ios - EXC_BAD_ACCESS 和 stringByAppendingString

> ID：12034821
> 
> 赞同：1
> 
> 时间：2012-08-20T09:00:27.677
> 
> 标签：ios, sqlite, nsstring, exc-bad-access

使用 DataHelper 类中定义的以下函数返回的值设置标签时获取 EXC_BAD_ACCESS（所有数据库处理在此处完成）：

```
+(NSString *)getCurrentBalanceAndType:(NSString *)account
{
    sqlite3_stmt *statement=NULL;
    float bal=0;
    NSString *type=NULL, *balance_type=NULL;
    //String decimalFormat="%.2f";
    statement = [DataHelper getDetailsFromAccountBal:account:[DataHelper currentMonth]];
    if (sqlite3_step(statement) == SQLITE_ROW)
    {
        bal = sqlite3_column_double(statement,2);
        type = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];
    } 
    sqlite3_finalize(statement);

    NSString *stringBal=[NSString stringWithFormat:@"%.2f", bal];
    type=[[type uppercaseString] stringByAppendingString:@"r"];
    balance_type=[[stringBal stringByAppendingString:@" "]stringByAppendingString:type];
    [type release];
    return balance_type;
} 
```

这就是我在 viewDidLoad 中设置标签的方式：

```
 lbCreditCurrBal.text=[DataHelper getCurrentBalanceAndType:@"Some Text"]; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:10:56.103

你放纵了`type`。删除`[type release];`. 并使用ARC来避免这种错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:20:44.200

当您调用以除 init 或 copy 以外的任何内容开头的方法时，您将返回一个对象，该对象将在将来的某个时间自动释放。reference [-ray 的内存管理博客](http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial)

记住上面我认为你不应该像 Nikolai 所说的那样释放类型对象。

# c# - Visual Studio Express 2012如何在构建成功时隐藏编译细节并在构建失败时显示它

> ID：12034824
> 
> 赞同：3
> 
> 时间：2012-08-20T09:00:28.947
> 
> 标签：c#, visual-studio, visual-studio-2012

这真的很烦人，我习惯于**仅**在构建失败时查看编译详细信息，否则我很高兴只检查状态栏上的消息说*构建成功*。但它出现在每个构建中......

我正在尝试 Visual Studio Express 2012，但尚未找到获得此效果所需的设置

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T07:17:15.857

在 VS 2012 中：工具 > 选项 > 项目和解决方案 > 常规

*   选中“如果构建完成并出现错误，则始终显示错误列表”
*   取消选中“构建开始时显示输出窗口”

# php - 在 PHP 数组中排名

> ID：12034825
> 
> 赞同：0
> 
> 时间：2012-08-20T09:00:31.330
> 
> 标签：php, arrays, sorting, ranking, rank

我有一个与 php 数组相关的看似简单的排名类型问题，不幸的是，经过大量研究，它打败了我：

我有一个简单的数组，其中键是人名，值只是关联的数字：

```
$myArray = Array("David"=>36, "James"=>24, "Sarah"=>70, "Mary"=>55); 
```

这是挑战：*给定*一个名字，他们在数组中的*排名是多少？*例如：莎拉=rank1；这似乎很简单，因为我认为我可以按值对数组进行排序，然后循环到所需的名称以获得排名。然而，奇怪的是，当我对数组进行排序时，它只是无济于事地返回 1！

```
print_r(asort($myArray)) = 1 (??) 
```

我想我可以将数组放在 MySQL 表中，但这似乎有点笨拙。有人知道php解决方案吗？我在哪里做错了排序？我在[这里](http://uk.php.net/manual/en/array.sorting.php "PHP数组排序文档")阅读了文档，似乎 asort 是适当的功能（保留关联并按值排序）。

谢谢格林奇
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:04:01.040

[`asort`](http://php.net/asort)函数返回一个布尔值并将给定的数组作为参考进行排序

```
var_dump(asort($myArray)) = bool(true) 
```

如果你`print_r($myArray)`在上一行之后，你会得到你的排序数组`$myArray`

编辑：重新阅读。

尝试这样做以获得大量排名：

```
<?php
    /* asort = Lower num to Upper */
    asort($myArray);
    /* arsort = Upper one to lower */
    // arsort($myArray);
    $ranks = array_fill(1,count($myArray),'foo');
    $ranked = array_combine(array_flip($myArray),array_keys($ranks));
    /* Output */
    print_r($ranked);
    /* Array ( [James] => 1 [David] => 2 [Mary] => 3 [Sarah] => 4 )  */
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:22:26.933

（已编辑 - 现在可以使用）

有点难看，但这应该可行：

```
arsort($origArr);
$rankedArr = array_keys($origArr);
foreach ($rankedArr as $rank => $person) {
    if ($person == 'Sarah') {
        echo $rank + 1;
        break;
    }
} 
```

您所做的是首先按值排序，然后删除这些值并获取人员索引列表。他们的*键值 + 1*是他们的排名。（因为第一个是0，对吧？）

EDIT2 - 稍微干净一点：

```
arsort($origArr);
$rankedArr = array_keys($origArr);
$finalRanks = array_flip($rankedArr);
$rank = $finalRanks['Sarah'] + 1; 
```

:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:05:04.053

`asort`返回 bool 值，如此[处](http://uk.php.net/manual/en/function.asort.php)所述。

# wpf - 是否有适用于 VS2010 的免费 WPF 可视化工具

> ID：12034826
> 
> 赞同：1
> 
> 时间：2012-08-20T09:00:32.723
> 
> 标签：wpf, visual-studio-2010, c#-4.0, visualizer, snoop

有没有免费的 wpf 可视化工具，一个快速的 google 搜索显示工具名称“ **mole** ”和“ **snoop** ”，
任何人都有使用它们的经验，它们真的有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:05:01.307

鼹鼠和窥探都是有价值的工具。Mole more 用于深入调试和调试可视化和窥探以简单地查看您的可视化树。你在寻找什么具体的东西吗？

# asp.net-mvc - 失去我的会话状态：(x(1)) 在 URL

> ID：12034827
> 
> 赞同：0
> 
> 时间：2012-08-20T09:00:38.450
> 
> 标签：asp.net-mvc, azure, session-state

我开发了一个运行良好的 ASP.Net MVC3 应用程序。

但有时，会话状态会停止正常运行：我的 URLS 中出现 (X(1)) 并且每次单击链接后都必须重新登录。

> 示例：我登录，我被重定向到主页。然后我点击一个链接，链接和往常一样，只是中间多了一个(X(1))。

根据 msdn 上的[这篇文章](http://msdn.microsoft.com/en-us/library/aa479315.aspx)，当设备不支持 cookie 时，这种行为是正常的......因为我使用的是 Google Chrome 21 或 IE 10，我认为情况并非如此

我的应用程序昨天工作。

细节 ：

*   它托管在 Windows Azure 云服务中，
*   我的表单身份验证配置为：cookieless="AutoDetect"
*   我正在使用标准提供者进行会话和成员资格。

请问有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:57:32.213

替换`cookieless="AutoDetect"`为`cookieless="UseCookies"`

# ruby-on-rails - 如何在不事先了解模式的情况下以动态方式存储在 MongoDB 中？

> ID：12034828
> 
> 赞同：0
> 
> 时间：2012-08-20T09:00:40.197
> 
> 标签：ruby-on-rails, nosql, mongoid

我想发送一个非常模糊和动态的 JSON 作为从客户端到服务器的响应。对于后端，我使用的是 rails + mongoid。

我从 mongoid 知道的是我必须创建一个与我的集合结构相对应的模型类，以便我可以从我的控制器调用它来将数据存储到它这种方式让我想起了传统的 RDBMS（仍然无法弄清楚人们为什么快乐用它！！！！）

我不想这样做，我想将 JSON（我不知道它的结构）发送回我的服务器，并且 mongoid 将 JSON 存储在服务器上，换句话说我没有任何存储它们的偏好结构，我不想有任何。

在rails + mongoid中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:01:10.390

通常，Mongoid 期望您指定模型的字段，因为没有底层模式可以像 ActiveRecord 那样推断这些字段。但是，如果您只想存储任意 JSON 对象，您可以将其解析为 Ruby 哈希并使用 Mongoid 的哈希数据类型进行存储。

```
field :untyped_data, type: Hash 
```

关于键名有一些注意事项，请参阅[http://mongoid.org/en/mongoid/docs/documents.html#fields](http://mongoid.org/en/mongoid/docs/documents.html#fields)

# objective-c - iPhone sdk 中的潜在泄漏检查

> ID：12034834
> 
> 赞同：0
> 
> 时间：2012-08-20T09:01:21.463
> 
> 标签：objective-c, ios

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
//responseData = nil;

NSMutableDictionary* json =[[responseString JSONValue] retain];
[responseString release];

NSLog(@"Sample message %d",[json retainCount]); 
```

这里我得到的保留计数是 2，任何人都可以帮助我如何跟踪这个保留计数。问题是当我编写以下代码时，应用程序崩溃了。

```
 [json release]; 
```

应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:17:38.113

**保留计数是无用的。不要叫它。**

你不能用它`retainCount`来尝试确定什么时候需要发布。

在该代码中，尚不清楚它为什么会崩溃。发布崩溃的回溯。

# jquery - 可读的ajax django错误

> ID：12034835
> 
> 赞同：1
> 
> 时间：2012-08-20T09:01:24.627
> 
> 标签：jquery, ajax, django, request

您好，我有一个带有 jquery 的 Django 网站，用于 ajax 调用。

该站点正在进行多个 AJAX 调用，而那些`500 ERROR`从 Django 失败的调用带有响应标头文本/纯文本，如果我在浏览器中重写错误的 url，我会看到没有`text/plain`响应，但是`text/html`. 为什么？（我看到`accept`标头不同于 ajax 调用`*/*`和标准浏览器调用`text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`）

我需要始终获取文本/html，因为如果我的某些 ajax 调用失败，我想将答案（再次使用 AJAX）保存在服务器中，并能够稍后对其进行分析（包含完整的详细信息，而不仅仅是纯文本/文本这减少了调试信息）。

我尝试将`accept:"text/html"`和添加`contenttype:"text"`到 ajax 调用，但没有结果。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:26:20.863

当您在开发中时，只需在浏览器中直接加载 AJAX URL。你会像往常一样看到完整的堆栈跟踪。处理它直到你得到真正的响应（JSON 等），然后在你的其余代码范围内重新测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:37:39.630

看看这里：[https ://docs.djangoproject.com/en/dev/howto/error-reporting/](https://docs.djangoproject.com/en/dev/howto/error-reporting/)

当您在生产服务器上运行时（使用 DEBUG = False），Django 应该向您发送一封包含错误详细信息的电子邮件到您包含在 ADMIN 变量中的所有电子邮件

您可以像这样设置 ADMIN 变量

```
ADMINS = (
     ('jeff', 'jeff@domain.com'),
) 
```

您无需尝试从浏览器端记录错误。相反，你只需要很好地失败

# ios - 即使我添加了多个对象，数组也只包含一项

> ID：12034837
> 
> 赞同：0
> 
> 时间：2012-08-20T09:01:40.807
> 
> 标签：ios, nsarray

我想在 iOS 中读取一个数据数组，但我只读取了这个数组中的一条记录，我检查了数组，它包含 10 个项目。

```
for(NSString *po in list) {
    infor.poster = [po valueForKey:@"Poster"];
    infor.vName= [po valueForKey:@"VName"];
    infor.name = [po valueForKey:@"Name"];
    infor.HDtrailerPath = [po valueForKey:@"HDTrailerPath"];

    [arrfilm addObject:infor];
}

dispatch_async(dispatch_get_main_queue(), ^{
    int widthlblscroll = 0;
    for (Inforfilm *u in arrfilm) {
        Inforfilm *infoF = [[Inforfilm alloc]init];
        infoF.poster = [u valueForKey:@"poster"];
        infoF.name = [u valueForKey:@"name"];

        NSLog(@"%@",infoF.poster);
        NSLog(@"%@",infoF.name);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:07:53.657

`Inforfilm`您将多次相同的实例添加到数组中。仅仅因为您更新了它的属性并不意味着它是一个新实例。为防止这种情况，请在每次循环迭代时实例化一个新实例。正如在内部第一行中所做的那样。

```
for(NSString *po in list) 
{
    //create a new instance of Inforfilm 
    Inforfilm *infor = [[Inforfilm alloc] init];    
    infor.poster = [po valueForKey:@"Poster"];
    infor.vName= [po valueForKey:@"VName"];
    infor.name = [po valueForKey:@"Name"];
    infor.HDtrailerPath = [po valueForKey:@"HDTrailerPath"];

    [arrfilm addObject:infor];
    //make sure you got ARC enabled, otherwise this object will now leak!
} 
```

# c# - 处理 OnPropertyChanged

> ID：12034840
> 
> 赞同：39
> 
> 时间：2012-08-20T09:02:02.350
> 
> 标签：c#, event-handling

我不精通基于事件的编程。基本上，我仍然在纠结。我正在尝试设置一些东西，但即使有教程，我也无法理解它。我想做的（用文字）如下：

1.  我有一个属性更改的数据对象。我在属性的设置器中注意到了这一点，并想引发属性已更改的事件。

2.  在其他地方（完全在不同的类中），我想知道这个对象的属性已经改变，并采取一些行动。

现在我确信这是一个足够常见的场景，但我的 google-fu 让我失望了。我只是不理解[http://msdn.microsoft.com/en-us/library/ms743695.aspx](http://msdn.microsoft.com/en-us/library/ms743695.aspx)。

我有这个：

```
public class ChattyClass {
  private int someMember;

  public event PropertyChangedEventHandler PropertyChanged;

  public int SomeMember {
    get {
      return this.someMember;
    }
    set {
      if (this.someMember != value){
        someMember = value;
        // Raise event/fire handlers. But how?
      }
   }
}

public class NosyClass{
  private List<ChattyClass> myChatters;

  public void addChatter(ChattyClass chatter){
    myChatters.add(chatter);
    // Start listening to property changed events
  }

  private void listner(){
    // I want this to be called when the PropertyChangedEvent is called
    Console.WriteLine("Hey! Hey! Listen! A property of a chatter in my list has changed!");
  }
} 
```

我该怎么做才能把它连接起来？

关于将我指向链接的评论：

在我看到的例子中：

```
protected void OnPropertyChanged(string name)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null)
    {
        handler(this, new PropertyChangedEventArgs(name));
    }
} 
```

我不明白的是：

*   为什么这不只是打电话`PropertyChanged(this, new PropertyCHangedEventArgs(name))`
*   PropertyChanged 在哪里分配？
*   任务是什么样的？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-20T09:23:20.123

您必须触发该事件。在 MSDN 上的示例中，他们制作了一种受保护的方法`OnPropertyChanged`来更轻松地处理此问题（并避免重复代码）。

```
// Create the OnPropertyChanged method to raise the event 
protected void OnPropertyChanged(string name)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null)
    {
        handler(this, new PropertyChangedEventArgs(name));
    }
} 
```

该方法的作用是查看是否分配了事件处理程序（如果未分配并且您只是调用它，您将得到一个`NullReferenceException`）。如果分配了一个，则调用此事件处理程序。提供的事件处理程序必须具有`PropertyChangedEventHandler`委托的签名。这个签名是：

```
void MyMethod(object sender, PropertyChangedEventArgs e) 
```

其中第一个参数必须是 object 类型并表示触发事件的对象，第二个参数包含此事件的参数。在这种情况下，您自己的类会触发事件并因此`this`作为参数给出`sender`。第二个参数包含已更改的属性的名称。

现在为了能够对事件的触发做出反应，您必须为该类分配一个事件处理程序。在这种情况下，您必须在您的`addChatter`方法中分配它。除此之外，您必须首先定义您的处理程序。在你的`NosyClass`你必须添加一个方法来做到这一点，例如：

```
private void chatter_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    Console.WriteLine("A property has changed: " + e.PropertyName);
} 
```

如您所见，此方法对应于我之前解释的签名。在第二个参数中，您将能够找到更改了哪个参数的信息。最后要做的是添加事件处理程序。现在在你的`addChatter`方法中，你必须分配这个：

```
public void AddChatter(ChattyClass chatter)
{
    myChatters.Add(chatter);
    // Assign the event handler
    chatter.PropertyChanged += new PropertyChangedEventHandler(chatter_PropertyChanged);
} 
```

我建议您阅读一些有关 .NET / C# 中的事件的内容：http: [//msdn.microsoft.com/en-us/library/awbftdfh](http://msdn.microsoft.com/en-us/library/awbftdfh)。我认为在阅读/学习此内容后，您会更加清楚。

如果您想快速测试它，可以[在 pastebin 上](http://pastebin.com/pdSDL9fG)找到一个控制台应用程序（只需复制/粘贴到新的控制台应用程序中）。

使用较新版本的 C#，您可以内联对事件处理程序的调用：

```
// inside your setter
PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(nameof(MyProperty))); 
```

您还可以使用[Fody PropertyChanged](https://github.com/Fody/PropertyChanged)之类的东西来自动生成必要的代码（访问他们的 GitHub 页面的链接，其中包含示例）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-20T09:11:46.080

您查看的链接适用于[MVVM](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel)模式和[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)。它不是通用的 C# 实现。你需要这样的东西：

```
public event EventHandler PropertyChanged;

    public int SomeMember {
        get {
            return this.someMember;
        }
        set {
            if (this.someMember != value) {
                someMember = value;
                if (PropertyChanged != null) { // If someone subscribed to the event
                    PropertyChanged(this, EventArgs.Empty); // Raise the event
                }
            }
        } 
```

...

```
public void addChatter(ChattyClass chatter) {
    myChatters.add(chatter);
    chatter.PropertyChanged += listner; // Subscribe to the event
}
// This will be called on property changed
private void listner(object sender, EventArgs e){
    Console.WriteLine("Hey! Hey! Listen! A property of a chatter in my list has changed!");
} 
```

如果您想知道哪些属性已更改，则需要将事件定义更改为：

```
public event PropertyChangedEventHandler PropertyChanged; 
```

并将调用更改为：

```
public int SomeMember {
    get {
        return this.someMember;
    }
    set {
        if (this.someMember != value){
            someMember = value;
            if (PropertyChanged != null) { // If someone subscribed to the event
                PropertyChanged(this, new PropertyChangedEventArgs("SomeMember")); // Raise the event
            }
        }
   }

   private void listner(object sender, PropertyChangedEventArgs e) {
       string propertyName = e.PropertyName;
       Console.WriteLine(String.Format("Hey! Hey! Listen! a {0} of a chatter in my list has changed!", propertyName));
   } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T09:23:09.707

> 为什么这不只是调用 PropertyChanged(this, new PropertyCHangedEventArgs(name))

因为如果没有人将处理程序附加到事件，则`PropertyChanged`对象返回`null`. 因此，在调用它之前，您必须确保它不为空。

> PropertyChanged 在哪里分配？

在“听众”课程中。

例如，您可以在其他类中编写：

```
ChattyClass tmp = new ChattyClass();
tmp.PropertyChanged += (sender, e) =>
    {
        Console.WriteLine(string.Format("Property {0} has been updated", e.PropertyName));
    }; 
```

> 任务是什么样的？

在 C# 中，我们使用赋值运算符`+=`和`-=`事件。我建议阅读[以下文章](http://msdn.microsoft.com/en-us/library/ms366768.aspx)以了解如何使用匿名方法形式（上面的示例）和“旧”形式编写事件处理程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-18T13:36:49.107

从获取原始代码并结合@Styxxy 的答案，我得出：

```
public class ChattyClass  : INotifyPropertyChanged 
{
  private int someMember, otherMember;

  public int SomeMember
  {
      get
      {
          return this.someMember;
      }
      set
      {
          if (this.someMember != value)
          {
              someMember = value;
              OnPropertyChanged("Some Member");
          }
      }
  }

  public int OtherMember
  {
      get
      {
          return this.otherMember;
      }
      set
      {
          if (this.otherMember != value)
          {
              otherMember = value;
              OnPropertyChanged("Other Member");
          }
      }
  }

  protected virtual void OnPropertyChanged(string propertyName)
  {
      PropertyChangedEventHandler handler = PropertyChanged;
      if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
  }

  public event PropertyChangedEventHandler PropertyChanged;

}

public class NosyClass
{
    private List<ChattyClass> myChatters = new List<ChattyClass>();

    public void AddChatter(ChattyClass chatter)
    {
        myChatters.Add(chatter);
        chatter.PropertyChanged+=chatter_PropertyChanged;
    }

    private void chatter_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        Console.WriteLine("A property has changed: " + e.PropertyName);
    }
} 
```

# symfony - 使用服务教义

> ID：12034842
> 
> 赞同：0
> 
> 时间：2012-08-20T09:02:11.193
> 
> 标签：symfony, doctrine, doctrine-orm, bundle

我需要在我的服务中使用教义。

当我尝试使用此代码获取它时，我发现了`$em = $this->getDoctrine()->getEntityManager();`这个错误：

> 调用未定义的方法 Acme\CrawlerBundle\Services\getTrainingsService::getDoctrine()

我怎样才能最终使教义发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:30:20.240

您必须将实体管理器作为参数传递给您的服务，如下所示：

```
 your_service:
        class: %your_class.class%
        arguments:
          - "@doctrine.orm.entity_manager" 
```

# java - 为复合整数键实现 hashCode()

> ID：12034843
> 
> 赞同：2
> 
> 时间：2012-08-20T09:02:12.273
> 
> 标签：java

我有一个类，它有三个整数来表示它：serverID、streamID 和 messageID。

我有一些`HashSet`很小但我做了很多东西，比如设置交叉点，还有一些有 10K+ 元素的东西。

serverID 只有少数几个值，但它们是真正的随机数，具有完整的 32 位随机性。通常整个哈希表只有一个 serverID；其他时候只有几个 serverID。

streamID 是一个很小的数字，通常为 0，但有时可能为 1 或 2。

对于每个 serverID/streamID 对，messageID 依次增加。

我目前有：

```
(-messageID << 24) ^ messageID ^ serverID ^ streamID 
```

我想了解我有一个很好的哈希函数，尽管有一个顺序增加的 messageID 并且没有很多其他的位可以混合。

什么是好的`hashCode`，我怎样才能最好地混合这三个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:05:44.167

eclipse 给它自己很好的哈希码生成

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + messageID;
    result = prime * result + serverID;
    result = prime * result + streamID;
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:06:39.257

我个人总是使用以下实施的策略`java.lang.String`：

```
 for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        } 
```

所以，在你的情况下，我会使用以下内容：`31 * (31 * messageID + serverID) + streamID`

# android - 动作条 Sherlock + Robolectric

> ID：12034845
> 
> 赞同：2
> 
> 时间：2012-08-20T09:02:27.933
> 
> 标签：android, actionbarsherlock, robolectric

我们在工作中将 Robolectric 用于我们的测试用例，这似乎不能很好地工作 Action Bar Sherlock。

问题是我收到一条`No implementations match configuration`消息，因为`Build.VERSION.SDK_INT`通过 robolectric 运行时 == 0。

如果有人对让 ABS 与 Robolectric 良好合作的最佳方式有任何想法，我很想知道。如果我发现我会在这里发布我的结果，但似乎很难找到有关如何使这个流行的工具包和库一起工作的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T15:09:03.940

解决这个问题的两种方法：

1.  使用此总方法调用将Robolectric 的`Build.SDK_INT`值更改为实际值：`RobolectricTestRunner.setStaticValue(Build.VERSION.class, "SDK_INT", 15);`
2.  编写您自己的 ActionBarSherlock 实现，该实现从现有实现之一扩展并使用`@ActionBarSherlock.Implementation(api = 0)`（不要忘记调用`ActionBarSherlock.registerImplementation`）进行注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T14:33:24.737

对于较新版本的**Robolectric 2.2**，您可以像这样更改**Build.VERSION.SDK_INT**值：

```
Robolectric.Reflection.setFinalStaticField(Build.VERSION.class, "SDK_INT", 15); 
```

# c++ - OpenFile Dialog如何选择多选文件而不是文件夹？

> ID：12034846
> 
> 赞同：0
> 
> 时间：2012-08-20T09:02:36.860
> 
> 标签：c++, mfc

如何使用 MFC 类`CFileDialog`设置标志有可能选择多个文件，但防止选择多个文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:14:45.390

这可以通过在**CFileDialog**构造函数中添加标志**OFN_ALLOWMULTISELECT来完成。**

# sql - 从选择中插入oracle

> ID：12034848
> 
> 赞同：0
> 
> 时间：2012-08-20T09:02:46.110
> 
> 标签：sql, oracle

**更新（粗体字母）**：

```
employee (empid,ename,edept,edetails,sal,deskno) 
```

我正在尝试下面提到的查询，但无法使其正确，请帮助我注意：我在 oracle pl/sql 中很幼稚，如果您在 oracle pl/sql 中将其视为简单的事情，请不要介意

```
INSERT INTO employee
SELECT Replace(e.empid, 'id_', 'new_id_')     AS empid,
       Replace(e.ename, 'name_', 'new_name_') AS ename
FROM   employee e
WHERE  e.empid = 1; 
```

请告诉我，是否可以实现这一点（员工表总共有 6 列）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:24:03.820

你可能想要：

```
INSERT INTO employee (empid, ename)
SELECT Replace(e.empid, 'id_', 'new_id_')     AS empid,
       Replace(e.ename, 'name_', 'new_name_') AS ename
FROM   employee e
WHERE  e.empid = 1; 
```

请注意第一行的显式列名以及 和 的`new_id_`引号`new_name_`。如果没有明确的列名，Oracle 期望查询返回 15 列。

# sql - 在 postgresql 中访问列别名

> ID：12034849
> 
> 赞同：3
> 
> 时间：2012-08-20T09:02:53.290
> 
> 标签：sql, postgresql, nested, subquery

理解查询别名在 postgresql 中的工作方式有点麻烦。我有以下内容：

```
SELECT DISTINCT robber.robberid,
                nickname,
                Count(accomplices.robberid) AS count1
FROM   robber
       INNER JOIN accomplices
               ON accomplices.robberid = robber.robberid
GROUP  BY robber.robberid,
          robber.nickname
ORDER  BY Count(accomplices.robberid) DESC;

 robberid |            nickname            | count1 
----------+--------------------------------+--------
       14 | Boo Boo Hoff                   |      7
       15 | King Solomon                   |      7
       16 | Bugsy Siegel                   |      7
       23 | Sonny Genovese                 |      6
        1 | Al Capone                      |      5
 ... 
```

我可以使用 as 命令重命名“count1”列，但我似乎无法在查询中再次引用它？我试图在此查询的末尾包含一个 HAVING 命令，以仅查询计数小于最大值一半的对象。

这是家庭作业，但我不是在要求答案，只是一个指向如何将 count1 列包含在另一个子句中的指针。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T09:05:06.230

一般情况下，后面的查询不能引用聚合列的别名，必须重复聚合

如果您真的想使用它的名称，可以将查询包装为子查询

```
SELECT * 
FROM
(
    SELECT DISTINCT robber.robberid, nickname, count(accomplices.robberid)  
    AS count1 FROM robber                   
    INNER JOIN accomplices  
    ON accomplices.robberid = robber.robberid  
    GROUP BY robber.robberid, robber.nickname  
) v
ORDER BY count1 desc 
```

# python - 如何使用 python 和 re 搜索和导出值？

> ID：12034852
> 
> 赞同：0
> 
> 时间：2012-08-20T09:03:34.220
> 
> 标签：python, regex

我正在尝试将文本中的一些值导出到 txt 文件。我的文字有这种形式：

```
"a='one' b='2' c='3' a='two' b='8' c='3'" 
```

我想导出键“a”的所有值结果必须像

```
one
two 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:28:34.947

其他答案对于您的特定情况是正确的，但我认为带有lookbehind/lookahead 的正则表达式是一个更通用的解决方案，即：

```
import re

text = "a='one' b='2' c='3' a='two' b='8' c='3'"

expr = r"(?<=a=')[^']*(?=')"

matches = re.findall(expr,text)
for m in matches:
    print m  ##or whatever 
```

这将匹配以 a= 开头的单引号之间的任何表达式，即 a='xyz'、a='my#1.abcd' 和 a='a=5%' 都将匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:51:50.373

这个正则表达式很容易理解：

```
pattern = r"a='(.*?)'" 
```

它不使用环视（如`(?<=a=')[^']*(?=')`） - 所以它非常简单..

整个程序：

```
#!/usr/bin/python

import re

text = "a='one' b='2' c='3' a='two' b='8' c='3'"
pattern = r"a='(.*?)'"

for m in re.findall( pattern, text ):
  print m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:12:28.077

你可以使用这样的东西：

```
import re
r = re.compile(r"'([a-z]+)'")

f = open('input')
text = f.read()

m = r.finditer(text)

for mm in m:
    print mm.group(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T09:19:31.757

以为我会给出一个没有re的解决方案：

```
>>> text = "a='one' b='2' c='3' a='two' b='8' c='3'"
>>> step1 = text.split(" ")
>>> step1
["a='one'", "b='2'", "c='3'", "a='two'", "b='8'", "c='3'"]
>>> step2 = []
>>> for pair in step1:
    split_pair = pair.split("=")
    step2.append([split_pair[0],split_pair[1]]) 
>>> print step2
[['a', "'one'"], ['b', "'2'"], ['c', "'3'"], ['a', "'two'"], ['b', "'8'"], ['c', "'3'"]]
>>> results = []
>>> for split_pair in step2:
        if split_pair[0] == "a":
            results.append(split_pair[1])   
>>> results
["'one'", "'two'"] 
```

不是最优雅的方法，但它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T09:40:18.290

另一个非正则表达式解决方案：您可以使用`shlex`模块和`.partition`方法（或`.split()`with `maxsplit=1`）：

```
>>> import shlex
>>> s = "a='one' b='2' c='3' a='two' b='8' c='3'"
>>> shlex.split(s)
['a=one', 'b=2', 'c=3', 'a=two', 'b=8', 'c=3']
>>> shlex.split(s)[0].partition("=")
('a', '=', 'one') 
```

所以很简单

```
>>> for group in shlex.split(s):
...     key, eq, val = group.partition("=")
...     if key == 'a':
...         print val
... 
one
two 
```

有很多相同的变化。

# cakephp - CakePHP 在 beforeSave 中获取相关数据

> ID：12034853
> 
> 赞同：0
> 
> 时间：2012-08-20T09:03:37.013
> 
> 标签：cakephp

有人看到我做错了吗？

`$brand['slug']`保存时是空的，所以我猜在查找查询中出了点问题。

提前致谢。

```
public function beforeSave() {
    if (isset($this->data['Smartphone']['model'])) {

        $brand = $this->Brand->find('first', array(
            'conditions' => array(
                'Brand.id' => $this->data['Smartphone']['brand_id']
            )
        ));

        $this->data['Smartphone']['slug'] =  $brand['slug'].'-'.Inflector::slug(strtolower($this->data['Smartphone']['model']), '-');
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:41:09.447

它看起来如何，我认为您应该使用`$brand['Brand']['slug']`而不是`$brand['slug']`.

您可以尝试在`pr($brand);`您编写的查找查询之后打印 $brand 数组。并相应地提供数组索引。

# php - Wordpress 站点在 android 模拟器中运行的 localhost 中不起作用

> ID：12034854
> 
> 赞同：0
> 
> 时间：2012-08-20T09:03:37.520
> 
> 标签：php, wordpress, localhost, wamp

我只想学习如何构建响应式主题，并在win7上安装了android模拟器，当我测试在实时服务器上运行的站点时一切正常。问题是当我尝试从 WAMP 服务器测试 wordpress 站点时，它不起作用。我使用的是 10.0.2.2 而不是 localhost 或 ip ...它适用于简单的 html 文件，但不适用于 wp。它向我显示了包含所有站点页面的站点地图，当我尝试单击其中一个页面时，它向我显示错误“网页可能暂时关闭...”。在将它们上传到实时服务器之前，我需要在 WAMP 服务器上对其进行测试。我该怎么办？...当我在服务器上上传它们时，（相同的主题），一切正常。wamp配置可能有问题吗？我在 2 台电脑（32 和 64）上测试它，同样的情况正在发生。

我找到了[http://www.youtube.com/watch?v=ZR6E9I0PKoI](http://www.youtube.com/watch?v=ZR6E9I0PKoI)视频，我发现它对他有用。我错过了什么。

谢谢你的帮助，

弗罗林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:08:21.287

**更新** 我测试了视频上的说明，它们运行良好；我正在使用 WordPress 多站点但没有用，所以我创建了一个独立的设置并且它有效:)

这是我测试并用于在 Android 上调试 WordPress 主题的简单解决方案。

1.  首先，您必须能够从您的手机访问您的本地主机，请按照[此处](http://www.mobitechie.com/android-2/how-to-access-localhost-on-android-over-wifi/)的说明进行操作。
2.  现在您应该可以从 Android 访问您的本地主机了。由于 WP 正在将地址重定向`http://192.168.0.100/wordpress/`到类似`http://localhost/wordpress/`. 最好在您的 www 文件夹上创建一个目录并测试您的 html 版本的样式，直到它们满足您的响应需求。

# bash - 无密码登录

> ID：12034857
> 
> 赞同：5
> 
> 时间：2012-08-20T09:03:49.057
> 
> 标签：bash, unix, expect

**问题陈述**

我想在不询问密码的情况下访问服务器（将在脚本中提到）并在该服务器上运行命令。

**我的代码**

```
#!/usr/bin/expect
spawn sudo su - <server_name>
expect "[sudo] password for chronicles:"
set Password "xxxxxxx"
send "$Password\r"
#set timeout 300
send "whoami\r"
send "ls -ltr\r"
expect eof 
```

**输出**

```
invalid command name "sudo"
    while executing 
```

**限制**

*   我没有更改环境变量或修改 .bash_profile / .bashrc 的访问权限。
*   su server_name 命令不允许

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:57:26.947

大卫是对的，通常这是一个**坏**主意。*偶尔会有*很好的理由这样做，或者做类似的事情（例如自动登录串行控制台以进行熄灯管理），但您没有提供任何说明为什么这样做对您有意义。

除了注意事项之外，`invalid command name`不是来自`spawn`生产线，而是来自`[sudo]`生产`expect`线。Expect 基于`tcl`，[它将`[]`方括号视为指示命令替换的特殊字符](http://www.tcl.tk/man/tcl8.4/TclCmd/Tcl.htm#M10)。此外，传递给的值`expect`是*glob*模式而不是固定字符串，`[]`方括号也是 glob 中的特殊字符。所以你正在寻找的答案是引用这些字符*两次*：

```
 expect "\\\[sudo\\\] password for chronicles:" 
```

另请注意，在发送密码后，您可能应该包含另一`expect`行以等待 root shell 提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:15:13.370

在不提示输入密码的情况下访问服务器的安全方法是通过 SSH 进行密钥登录。**永远不要以纯文本形式提供密码。**

如果你只是谷歌，你会发现很多文章解释了如何做到这一点。[没有密码的 SSH 登录](http://www.linuxproblem.org/art_9.html)是一个很好的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T05:49:38.430

`[]`被解释`Tcl`为`Tcl`.

`{}`是 中最强的引用`Tcl`，您可以使用它来防止任何解释：

```
expect {[sudo] password for chronicles:} 
```

当然你也可以省略`[sudo]`：

```
expect "password for chronicles:" 
```

# c# - 键盘按键事件的 ASCII 值？

> ID：12034858
> 
> 赞同：0
> 
> 时间：2012-08-20T09:03:51.893
> 
> 标签：c#, hex, keyboard-events

我借用了某人的代码，将关键事件发送到另一个进程（hWnd）。这是该函数的定义：

```
public static void SendKey(ushort key, IntPtr hWnd)
{
    SetActiveWindow(hWnd);
    SendMessage(hWnd, WM_KEYDOWN, key, 0);
    SendMessage(hWnd, WM_KEYUP, key, 0);
} 
```

SendMessage 取自 DllImport 的位置：

```
//sends a windows message to the specified window
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int Msg, uint wParam, int lParam); 
```

如您所见，SendKey 方法采用一个**ushort**值作为要发送的密钥。

有谁知道我在哪里可以找到这些值？即，如果用户按下“7”键并且我想转发它，我如何从 7 键事件/回调转到 ushort 值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:05:44.273

你可以试试[Keys-Enumeration](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:44:31.540

要发送 ascii 字符，您可以使用类型转换，示例如下：

```
System.Convert.ToUInt16('7')
```

要发送非 ascii 字符，请使用虚拟键码。参考可以在 [MSDN上找到](http://msdn.microsoft.com/en-us/library/ms927178.aspx)

# c# - Crystal Reports 不断提示输入参数

> ID：12034859
> 
> 赞同：4
> 
> 时间：2012-08-20T09:03:56.000
> 
> 标签：c#, vb.net, c#-4.0, crystal-reports, crystal-reports-2010

我在使用 .net 4.0 的 Crystal Report 2010 时遇到了一个可怕的问题（我使用的是固定的 13.0.1 版本，但已发布 13.0.4）。无论我尝试哪种方式，我总是会在第一次输入我的一个参数值时得到一个提示对话框。

```
CrystalReportViewer1.ReportSource = CustomerReport1;    
CustomerReport1.Database.Tables[0].SetDatasource ( this.dataset);        
CustomerReport1.SetParameterValue("PathLocation", Location.Text);

CustomerReport1.Parameter_PathLocation.CurrentValues.Add(Location.Text) // to be safe using CS 2010 for .net 4
CrystalReportViewer1.ReuseReportParametersOnRefresh = true; // to prevent from showing again and again. 
```

我也试过这个：

```
CustomerReport1.Database.Tables[0].SetDatasource ( this.dataset);        
CustomerReport1.SetParameterValue("PathLocation", Location.Text);

CrystalReportViewer1.ReportSource = CustomerReport1; 
```

和这个：

```
CustomerReport1.Database.Tables[0].SetDatasource ( this.dataset);        
CustomerReport1.Parameter_PathLocation.CurrentValues.Add(Location.Text)

CrystalReportViewer1.ReportSource = CustomerReport1; // the parameter in the report has Optional Parameter = false, Static , Multiple Value = false . 
```

有人可以帮忙吗？我对此感到沮丧。它在以前的版本中有效，但现在我得到了这个提示框。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:09:02.127

终于找到了解决办法。如果我们`DataSource`在`ParameterValue`.

因此，如果我们将它们按以下顺序排列，其中任何一个都可以工作：

```
// First, call SetParameterValue. Then, call SetDatasource.     
CustomerReport1.SetParameterValue("PathLocation", Location.Text);
CustomerReport1.Database.Tables[0].SetDatasource(this.dataset);

CrystalReportViewer1.ReportSource = CustomerReport1; 
```

谢谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T07:04:22.210

创建参数，但不要使用选择公式 -> 记录为其分配公式。通过创建一个文本框、一个标签和一个按钮，从 vb 或 c#.net IDE 应用此参数。将选择公式放在单击按钮程序上。

# mysql - mysql获取整月的平均数据

> ID：12034864
> 
> 赞同：5
> 
> 时间：2012-08-20T09:04:15.343
> 
> 标签：mysql, sql

给定以下示例数据：

**数据**

```
Date           Sales
----------------------
2011-12-01       122
2011-12-02       433
2011-12-03       213
...
2011-12-31       235

2011-11-01       122
2011-11-02       433
2011-11-03       213
...
2011-11-30       235

2011-10-10       122
2011-10-11       433
2011-10-12       213
...
2011-10-31       235 
```

请注意，10 月的数据从 10 月 10 日开始，而随后的月份有完整的数据。

我需要获取所有完整月份的平均月销售额，在本例中为 2011 年 11 月和 12 月。

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T09:40:49.463

```
SELECT `date`, AVG(`sales`)
FROM sales
GROUP BY YEAR(`date`), MONTH(`date`)
HAVING COUNT(`date`) = DAY(LAST_DAY(`date`)); 
```

[例子](http://sqlfiddle.com/#!2/bbb02/1)

如果你想限制结果，要么

```
HAVING ...
ORDER BY `date` DESC LIMIT 3 
```

它应该总是返回最近 3 个月的数据，或者类似的东西

```
FROM ...
WHERE DATE_FORMAT(CURDATE() - INTERVAL 3 MONTH, '%Y-%m')
   <= DATE_FORMAT(`date`, '%Y-%m')
GROUP BY ... 
```

如果有的话，它应该返回前 3 个月的数据。我不确定哪个更好，但我不相信`WHERE`可以在 上使用任何索引`date`，如果您正在使用`DATETIME`并且不格式化它，您还将比较日期并且您不希望那样，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:27:30.940

目前无法测试，但请尝试一下：

```
SELECT 
    DATE_FORMAT(`Date`, '%Y-%m') AS yearMonth,
    SUM(Sales)
FROM
    yourTable
GROUP BY 
    yearMonth
HAVING 
    COUNT(*) = DAY(LAST_DAY(`Date`) 
```

# asp.net - 返回两个数据集

> ID：12034870
> 
> 赞同：0
> 
> 时间：2012-08-20T09:04:30.757
> 
> 标签：asp.net, sql-server, vb.net, ado.net

因此，我将 ClientID 传递给我的数据库并使用它来查找他们的所有详细信息，然后我想使用这些详细信息来让所有其他用户与详细信息密切匹配。我已经写了所有这些，但我的问题是我还想返回初始用户的详细信息。例如;

`Select Details = @UserDetails
from UnregisteredUserTable
where UserId = @UserID`

`Select BunchOfUsersWithMatchingData
from RegisteredUserTable
where UserDetails like @UserDetails`

显然我已经删除了不必要的信息。但正如您所见，这会返回匹配用户的所有数据，但不会返回初始用户的详细信息。我可以以某种方式使用 CTE 吗？

**更新**

抱歉，不知道我的数据访问很重要。我正在做以下atm，但可以改变它没问题。

```
Dim results = thisObjectContext.MatcherSP(UserID)

For Each obj In results  
    TableData.Rows.Add(obj.IdNumber, obj.name, 
    obj.emailaddress1, obj.telephone1, obj.telephone2, obj.address1_line1, 
    obj.address1_line2)
Next 
```

**更新 2**

好的，所以我只是在我的 SP 中使用这两个选择，它在 SQL Server 中运行良好。但是当我尝试在 Visual Studio 中将它添加到我的 dbml 时，我收到了一个奇怪的错误：

> 无法提取存储过程“dbo.MySP”，因为其结果集包含多个匿名列。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:53:42.623

好吧，这不是 VB 代码，但我会尽可能简单。

使用 SqlDataAdapter 填充数据集。两个 select 语句的结果将填充 DataSet 中的不同表。

```
cmd.CommandText = "MatcherSP";
cmd.CommandType = CommandType.StoredProcedure;

adapter = new SqlDataAdapter(cmd);
ds = new DataSet();
adapter.Fill(ds); 
```

然后，您可以按如下方式访问数据：

```
tableA = ds.Tables[0];
tableB = ds.Tables[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:26:56.027

您可以使用`SqlDataReader`'s nextresult() 方法。

```
using(SqlCommand cmd = new SqlCommand("NameOfSP",c))
{
    cmd.CommandType = CommandType.StoredProcedure;
    using(SqlDataReader d = cmd.ExecuteReader())
    {
        while(d.Read()){
             //Result data from the first select
        }
        d.NextResult();

        while(d.Read()){
             //Result data from the second select
        }
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:07:24.380

[http://twogeeks.mindchronicles.com.dnpserver.com/?p=28&cpage=1#comment-37818](http://twogeeks.mindchronicles.com.dnpserver.com/?p=28&cpage=1#comment-37818)

精彩的文章，非常清楚地概述了我想要做什么。

# google-apps-script - Google App 脚本 - 将文件上传到当前登录帐户以外的 Google Drive 帐户？

> ID：12034872
> 
> 赞同：0
> 
> 时间：2012-08-20T09:04:32.877
> 
> 标签：google-apps-script, google-drive-api, google-sheets

我已经能够从 Google 电子表格中将文件上传到 Google Drive 帐户。问题是，据我所知，我只能将文件上传到当前登录的帐户。

是否可以使用帐户 A 登录并查看电子表格，但从菜单选项将文件上传到帐户 B？这甚至允许/可能吗？

**用例：** 我有一个包含几张工作表的电子表格。用户登录只能编辑电子表格上的一张表格，但作为该表格的一部分，用户应该能够将照片上传到电子表格所有者的谷歌驱动器。因此，主要的“管理员”帐户拥有电子表格和照片，然后有几个编辑帐户对特定工作表具有编辑权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:22:29.743

你能为此提供你的用例吗？

可以将编辑器添加到文档 (https://developers.google.com/apps-script/class_file)，这可能是您想要完成的。

更多细节会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:23:30.967

您应该将脚本发布为 Web 应用程序。当您这样做时，您将获得以您（脚本的所有者）或运行脚本的用户身份执行脚本的选项。使用后一个选项将文件上传到用户的 Google Drive

# java - Eclipse 中 JAR 的离线 JavaDocs

> ID：12034877
> 
> 赞同：0
> 
> 时间：2012-08-20T09:05:05.247
> 
> 标签：java, eclipse, javadoc, offline

您是否知道是否可以存储链接到 jar 的 javadocs，以便它们在未连接到 Internet 时可用？

似乎有时我可以下载 javadocs 以供离线访问，但并非总是如此。

例如，我希望将[其](http://pivotal.github.com/robolectric/javadoc/index.html?overview-summary.html)用于离线访问。我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:09:04.597

尝试将 src jar 附加到库中。

看看这个 ：

[如何将 javadoc 或源附加到 libs 文件夹中的 jar？](https://stackoverflow.com/questions/9873152/how-to-attach-javadoc-or-sources-to-jars-in-libs-folder)

在您的情况下，您将下载并使用以下 jar。 [http://pivotal.github.com/robolectric/downloads/robolectric-0.9.4-src.jar](http://pivotal.github.com/robolectric/downloads/robolectric-0.9.4-src.jar)

附加 src jar 后，您还可以访问 javadocs 视图中的 Javadoc。

## 有 Javadoc 存储库吗？

要回答您问题的另一部分，我不知道离线存储库，但有一个值得探索的在线存储库：http: [//www.docjar.org/](http://www.docjar.org/)

还有一个用于 docjar 的 Eclipse 插件，可以使用 from **[here](http://www.docjar.com/plugin1.html)**安装。

话虽如此，我认为他们不会为`roboelectric`自己提供的第三方库生成 javadoc 的麻烦。在这种情况下，您将无法使用下一节中的步骤手动生成 Javadocs。

## 从 src.jar 生成 Javadoc

**tl;dr**`robolectric-0.9.4-src.jar` ：使用以下步骤，我从源 jar生成了 Javadoc 。这样生成的 javadoc 可以从**[这里](https://www.dropbox.com/s/hn9dzrey15x2m1e/robolectric-0.9.4-javadoc.7z)**下载。

**第 1 步**：解压缩`robolectric-0.9.4-src.jar`（使用 7-zip 或其他存档实用程序）。将`android`,`com`和`META-INF`文件夹移动到名为的文件夹`src`中（这在下一步中很有用）。假设您提取了`robolectric-0.9.4-src.jar`inside `c:\robo`。它现在将具有以下文件夹： `c:\robo\src\android` `c:\robo\src\com` `c:\robo\src\META-INF`

**第 2 步**：使用提取的源代码创建一个 Eclipse 项目。这可以通过在 Eclipse 中创建一个新的 Java 项目来完成，而不是使用默认的工作区位置，而是指向上面目录的位置 ( `c:\robo`)。

![在此处输入图像描述](../Images/b3d2f200874c009068d812e60e58af72.png)

**第 3 步**：现在运行 javadoc 向导，`File -> Export -> Javadoc`如下所示：

![在此处输入图像描述](../Images/877546f1d96b6feb8733c4e3ff110369.png)

**第 4 步**：选择“Private”包以获取所有类的 Javadoc。 ![在此处输入图像描述](../Images/b8d547c2fed22dacdd4063b1e704cc5c.png)

**第 5 步**：接下来，选择除`tools.jar`引用的 jars 之外的所有 jars： ![在此处输入图像描述](../Images/dd81069fce53f8f02ed3bdb0c558ee22.png)

**第 6 步**：然后，选择`overview`html 的路径并检查`Open Generated File in browser`： ![在此处输入图像描述](../Images/4c878648ac1f0a5924f2595c14bdbeca.png)

**第 7 步**：单击完成。这样做后，您将看到 Javadoc 任务在 Debug 视图中运行：

![在此处输入图像描述](../Images/902feb7ed06ed81386969fe9a752b134.png)

当它完成时，浏览器视图应该使用您的 Javadoc 打开！ ![在此处输入图像描述](../Images/b4453ea24efa40933e9a329037b665b3.png)

**第8步**：利润！您的 Javadoc 现在应该已生成并可访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:09:29.553

例如，我了解您希望查看项目在调试期间所依赖的第三方库的源代码和 Javadocs。

您可以这样做：在编辑器中打开此类库中的类。您将看到一个“附加源...”按钮。单击它并导航到项目的源存档。找到并附加后，您将能够在需要时查看整个源代码以及 Javadocs。

# iphone - 在 cocos2d 中只使用视网膜图像

> ID：12034882
> 
> 赞同：0
> 
> 时间：2012-08-20T09:05:41.613
> 
> 标签：iphone, objective-c, ios, ios4, cocos2d-iphone

我正在使用 2 个图像：image.png 和 image-hd.png，它也适用于视网膜和非视网膜。但我现在要做的是删除所有非视网膜图像，只留下视网膜图像。我听说非视网膜设备会自行缩小图像。我试过了，但没有用:(我是怎么做的？我应该给图像起什么名字，它会在视网膜上显示它的实际大小，而对于非视网膜，它会按比例缩小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:28:37.340

不，Retina 图像不会自动缩小。

仅使用 Retina 图像并在标准分辨率显示设备上使用按比例缩小的图像是一个坏主意。

*   非 Retina 设备的内存远低于 Retina 设备，但您强制它们加载 Retina 分辨率图像。换句话说：设备只有一半的内存，但被迫加载消耗四倍于所需纹理内存的图像。
*   非 Retina 设备的 GPU 和 CPU 速度较慢。但是你强迫他们在四倍的像素数上工作。性能受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:20:14.010

您可能需要手动缩小它。我不确定这是否是最好的主意。但我认为如果在视网膜设备中，你可以将图像缩小到 0.5。

关于图像，重要的是要记住每张图像都根据下一个幂 2 维度的大小来记忆。这意味着 20X20 的图片将占用与 32X32 相同的内存，而 130X260 将占用 256X512。

所以有时只是更好地处理你的图像尺寸或使用像 Sprite Sheet 这样的东西。

# java - 如何使用 arg 'T value' 模拟方法？

> ID：12034884
> 
> 赞同：3
> 
> 时间：2012-08-20T09:05:42.183
> 
> 标签：java, mocking, mockito

我有这样的方法：

```
<T extends Entity> boolean putObject(T value); 
```

但是找不到如何使用 mockito 来模拟它？anyObject() 和 any() 产生错误：

```
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Invalid use of argument matchers!
1 matchers expected, 3 recorded. 
```

嘲笑：

```
when(service.putObject(any(ProcessingTransaction.class))).thenReturn(true); 
```

它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:38:58.930

最有可能的是，在您的测试早期（甚至在之前的测试中）的某个地方，您对 Mockito 方法有一个或两个格式不正确的调用。当您调用生成参数匹配器（如 ）的 Mockito 方法时，`any()`匹配器将被添加到内部数据结构中。然后在实际使用时将其删除。

Mockito 找到了三个参数匹配器而不是一个，这一事实表明您制作了一些参数匹配器但没有使用它们。例如，如果您使用`when(...)`without `thenReturn()`，则可能会发生这种情况；但也有很多其他情况。

如果您需要帮助找出您做错了什么，您需要发布更多测试代码。

# c++ - reinterpret_cast 和 null 成员变量

> ID：12034886
> 
> 赞同：0
> 
> 时间：2012-08-20T09:05:45.233
> 
> 标签：c++, reinterpret-cast, static-cast

我正在使用这样的 reinterpret_cast ：

```
void RunThread (void *myself)
{
   (reinterpret_cast<MyClass*>(myself))->Method();
} 
```

在方法内部，我的大多数成员变量（所有句柄）都是空的。这可能是因为 reinterpret_cast 因为我知道它不能保证我使用相同的地址吗？就像 static_cast 一样。我知道我们应该在这种情况下使用 static_case，但是这个问题现在让我感兴趣了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:20:54.107

不。`reinterpret_cast`不对源指针执行任何操作，只是将其值视为另一个指针（或整数）类型。只有当指向的内存`myself`不包含`MyClass`（或二进制兼容的）对象时，它才会给你错误的结果。

# android - 当按下耳机按钮时，我们如何禁用 android 手机中音乐播放器的启动？

> ID：12034887
> 
> 赞同：3
> 
> 时间：2012-08-20T09:05:45.100
> 
> 标签：android

在某些三星 Galaxy 手机中，当我们按下耳机按钮时，音乐播放器就会启动。我想禁用此功能。按下耳机按钮后，我想做另一项任务。

我怎样才能做到这一点？

仅在我的`Intent.ACTION_MEDIA_BUTTON`应用程序中收到，音乐播放器不应收到意图。这样音乐播放器就不会启动，我会在我的应用程序中做我想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:02:33.143

有点晚了，但这对其他人有用。

在清单文件中，将您的意图过滤器优先级设置为“高”（android:priority）。我认为文档的最高可能值是 999。

```
<receiver android:name="media_button">      
    <intent-filter android:priority="999">
        <action android:name="android.intent.action.MEDIA_BUTTON" />
    </intent-filter>
</receiver> 
```

然后在您的接收器代码中中止广播到其他意图。您可以通过调用[abortBroadcast()](http://developer.android.com/reference/android/content/BroadcastReceiver.html#abortBroadcast%28%29)函数来做到这一点。

```
 public class media_button extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
      if (Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {
        //your code ...

        //abort other actions
        this.abortBroadcast();
      }
    }
} 
```

# iphone - 未调用从 NIB 加载的自定义单元的 Dealloc

> ID：12034888
> 
> 赞同：0
> 
> 时间：2012-08-20T09:06:14.973
> 
> 标签：iphone, uitableview, memory-management

所以我有一个名为 MCProductCell 的子类 UITableViewCell，它是从 NIB 加载的。问题是当表格被释放时，我的自定义单元格的dealloc方法甚至没有被调用一次。

这是一些示例代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"MCProductCellIdentifier";
    MCProductCell *cell = (MCProductCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
   // Boolean value needed to determine if it is a reused cell or not. If it's not reused we have 
   // to start the thread that loads the image. For reused cells, that thread is started at the
   // end of the scrolling
   BOOL recycled = YES;
   if (cell == nil) {
       NSLog(@"cell alloc");
       recycled = NO;
       NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MCProductCell" owner:self options:nil];
       cell = [nib objectAtIndex:0];
   }
   MCProduct *product = [products objectAtIndex:indexPath.row];
   cell.product = product;
   cell.cartViewController = self;
   cell.productImage = product.cachedThumbnailImage;
   if (product.cachedThumbnailImage == nil) {
       cell.productImage = [ViewControllerUtils getDefaultImage];
       if (!recycled)
           [NSThread detachNewThreadSelector:@selector(loadImage:) toTarget:cell withObject:cell.product.imageThumbnailUrl];
   }

   return cell; 
```

}

由于某种原因，当我第一次展示包含表格的 UIViewController 时，我的自定义单元格的 dealloc 方法称为 ONCE。问题是，在 dealloc 方法中，我想将单元格作为观察者删除，如果不调用，则单元格不会作为观察者删除。tableview 也是一个出口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:57:27.443

'cell.cartViewController' 属性是如何定义的？如果它保留了您的控制器对象（自我），那么您可能有一个保留周期！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:13:22.323

我想，这一定是因为单元格的保留计数没有下降到 0。这意味着你还有另一个保留。

我更有经验的同事认为这是因为您使用的是 detachNewThreadSelector，它可能会保留单元格。

他建议您使用某种类型的异步图像来加载图像，例如 [https://github.com/nicklockwood/AsyncImageView/](https://github.com/nicklockwood/AsyncImageView/)

祝你好运。

# wpf - 我们可以使用 MVC 或 MVP 创建 WPF 应用程序吗？

> ID：12034889
> 
> 赞同：2
> 
> 时间：2012-08-20T09:06:24.563
> 
> 标签：wpf, windows, model-view-controller, mvp

在一次采访中，我被问到一个问题，我们可以使用 MVC 或 MVP 设计模式或实践来创建 WPF 应用程序吗？我说 MVC 或 MVP 是一种开发松散耦合应用程序的设计模式。我们将根据给定的场景、上下文、技术和应用平台使用 MVC、MVP 或 MVVM。

如果我们可以使用 MVC 或 MVP 创建 WPF 应用程序，如果您有任何好的代码或 PoC 形式的示例，请分享或解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:14:47.930

MVC、MVP 和 MVVM 都是 UI 设计模式。在 WPF 中使用这些模式没有任何限制。但是如果我们使用 MVVM 模式，我们可以利用 WPF 功能，如数据绑定等。

参考：[-MVVM vs MVP vs MVC](http://joel.inpointform.net/software-development/mvvm-vs-mvp-vs-mvc-the-differences-explained/)

# java - 制作纯不可变类

> ID：12034894
> 
> 赞同：0
> 
> 时间：2012-08-20T09:06:48.390
> 
> 标签：java

我有以下课程：

**Emp.java**

```
final public class Emp {

    private Integer id;
    private String name;
    private Department department;

    public Emp(Integer id, String name, Department department) {
        this.id = id;
        this.name = name;
        this.department = department;
    }

    public Department getDepartment() {
        return department;
    }

    public Integer getId() {
        return id;
    }

    public String getName() {
        return name;
    }
} 
```

**部门.java**

```
public class Department {

    private Integer id;
    private String name;

    public Department(Integer id, String name) {
        this.id = id;
        this.name = name;
    }

    public Integer getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

**EmployeeTest.java**

```
public class EmployeeTest {

    public static void main(String args[]) {
        Department dept1 = new Department(1, "dept1");
        Emp emp = new Emp(1, "emp1", dept1);
        emp.getDepartment().setName("dept2");
        System.out.println("emp = "+emp);

    }
} 
```

这里**Emp**类不是纯粹的不可变类，因为我能够以某种方式更改**Department**的值（如示例所示）。

**使Emp**类成为纯 Immutable 类的最佳更改是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:15:38.950

在非原始字段的 **吸气剂中，使用此结构**

```
public class Line {

   private final Point start;
   private final Point end;

   public Line(final Point start, final Point end) {
       this.start = new Point(start);
       this.end = new Point(end);
   }

   public Point getStart() {
       return new Point(start);
   }

   public Point getEnd() {
       return new Point(end);
   }
} 
```

因此，只需创建与先前相同的部门的新实例

PS在我的示例中，您可以看到纯不可变类
**编辑：**
您也可以添加到部门类复制构造器

```
public Department(final Department dep)  
{ ... } 
```

和雇主

```
getDepartment()  
{  
   return new Department(department);  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:31:45.353

如果您不喜欢删除 setter 并在构造函数中进行初始化，您可以考虑`Emp`在 getter 中返回不可变（从类的角度来看）对象，这将是 Web 对象的副本（请参阅[https://stackoverflow.xml ）。 com/a/128712/1579085](https://stackoverflow.com/a/128712/1579085)）。

```
final public class Emp {

    private Integer id;
    private String name;
    private Department department;

    public Emp(Integer id, String name, Department department) {
        this.id = id;
        this.name = name;
        this.department = (Department) department.clone();
    }

    public Department getDepartment() {
        return (Department) department.clone();
    }

    public Integer getId() {
        return id;
    }

    public String getName() {
        return name;
    }
} 
```

并实现方法`clone()`（`Department`将实现接口`Cloneable`）当然。

如果您需要能够修改`Department`，这种方法是合适的，但`Emp`类的对象应该不受那些外部修改的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:33:41.597

请参阅有效的 Java：

第 15 项：最小化可变性——要遵循的 5 条规则。

1.  不要提供任何修改对象状态的方法
2.  确保类不能扩展
3.  使所有字段最终
4.  将所有字段设为私有
5.  确保对任何可变组件的独占访问权

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T09:08:26.730

制作所有属性`final`，并删除所有设置器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T09:09:52.023

在 Department 中实现**clone()**并让**Emp**在**getDepartment()**中返回一个**部门**的克隆。

 **如果在构造后对用于构造 Emp 的 Department 的引用可用，则 Emp 的构造函数应该克隆给定的 Department。**

# javascript - 2 选择禁用 Jquery 的菜单过滤器，将值传递给一个函数

> ID：12034897
> 
> 赞同：0
> 
> 时间：2012-08-20T09:07:06.857
> 
> 标签：javascript, jquery, forms, function

我有 2 个选择菜单，我想将其值传递给函数。我正在尝试使用 jquery 禁用第二个选择，直到选择第一个。

我有两个问题：

*   我的 jquery 似乎不想禁用第二个选择菜单。
*   另外，我如何将第一个选择菜单值传递给第二个选择菜单中的 onchange 函数值。

提前致谢

**功能**

```
function showlog(str, username) {
    if (str == "") {
        document.getElementById("txtHint").innerHTML = "";
        return;
    }
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "getlog.php?username=" + username + "&q=" + str, true);
    xmlhttp.send();
} 
```

**查询**

```
$(document).ready(function() {
    var linkOrder = [
        "employee_user",
        "acyear"
        ];
    $('select.linked').not('#' + linkOrder[0]).attr('disabled', 'disabled');
    $('.linked').change(function() {
        var id = $(this).attr('id');
        var index = $.inArray(id, linkOrder);
        $('#' + linkOrder[index + 1]).removeAttr('disabled');
    });
}); 
```

**形式**

```
 <form>
<select id="employee_user" name="employee_user" class="linked">
        <option value="">Select</option>
    </select>

    <select id="acyear" name="acyear" onchange="showlog(this.value, 1st select value" class="linked">
    <option value=""></option>
    </select>
    </form> 
```

# windows-7 - 从 Windows 7 到 Red Hat Enterprise Linux 6 的远程桌面连接

> ID：12034899
> 
> 赞同：9
> 
> 时间：2012-08-20T09:07:25.380
> 
> 标签：windows-7, remote-desktop, redhat

建立从 Windows 7 机器到 Red Hat Enterprise Linux 6 的远程桌面连接的最佳方法是什么？这些机器位于同一网络上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T15:37:27.833

对于图形使用，您至少有以下选项：

*   香料 (http://spice-space.org/download.html)
*   NoMachine 的 NX 服务器 (http://www.nomachine.com/)
*   VNC (http://www.redhat.com/magazine/006apr05/features/vnc/)

SPICE 更新且非常漂亮。我已经使用 NX Server 多年了，它很棒。VNC 非常不安全，因此将其用作最后的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:40:32.307

XRDP 是适用于 Linux 的远程桌面服务器实现。它允许您使用 Windows 附带的标准远程桌面客户端连接到远程 Linux 桌面。我在 Fedora 中使用它取得了很好的效果，所以我想它在 RHEL 中可以处理得很好。

这是设置它的教程： http: [//sirjune.wordpress.com/2009/11/06/howto-xrdp-on-fedora-rhel/](http://sirjune.wordpress.com/2009/11/06/howto-xrdp-on-fedora-rhel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T14:35:47.240

添加来自@BoeroBoy 的评论。您还必须查看防火墙。我使用 TightVNC 从我的工作站（Windows 7）连接到 Red Hat Linux 6，但无法连接（即使在从系统 -> 首选项 -> 远程桌面激活远程访问之后）。

因此，还应该查看系统 -> 管理 -> 防火墙并为进程和/或端口分配必要的访问权限。

# objective-c - 如果第一次发送失败，何时再次尝试数据上传？

> ID：12034901
> 
> 赞同：0
> 
> 时间：2012-08-20T09:07:32.930
> 
> 标签：objective-c, ios, mobile, timeout, http-post

在我的应用程序（iOS）中，数据上传（http post）有时会在不良网络（EDGE）上失败（超时）。

重试的最佳策略是什么？

我应该立即重试还是应该等待“更好”的网络条件？怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:22:28.713

我建议像往常一样先尝试，但是当它失败时，会显示一条`UIAlertView`消息，例如：“无法连接到服务器，你想再试一次吗”。地方`Yes`和`No`按钮。当用户点击时`YES`，再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:33:17.210

有很多方法可以解决这个问题，但您选择哪种方式很大程度上取决于您的应用程序，以及您发布的数据的重要性：

1.  假设您在后台（异步）执行此操作，请继续重试直到它起作用 - 最多可能达到最大次数。
2.  通知用户并询问他们是否要重试（让他们知道他们需要网络连接）。
3.  存储所有未传输数据的缓存，并在一段时间后重试，或者在应用重新启动或应用后台运行时重试。

没有*最佳策略*- 这完全取决于您的应用程序的用例。

# java - Android 上 SQLite 查询的语法错误

> ID：12034902
> 
> 赞同：0
> 
> 时间：2012-08-20T09:07:43.773
> 
> 标签：java, android, sqlite

我尝试使用以下选择对 android sqlite 数据库进行查询，但是当我将它放入 eclipse 时它只显示错误。

```
stmt = "SELECT * FROM user_zones JOIN pos WHERE user_zones.zone_id = (
                CASE  
                 WHEN user_zones.type_zone_id = 'Zone' THEN pos.zone_id
                 WHEN user_zones.type_zone_id = 'Area' THEN pos.area_id
                 WHEN user_zones.type_zone_id = 'Town' THEN pos.town_id
                 WHEN user_zones.type_zone_id = 'MicroZone' THEN pos.microzone_id END) AND user_zones.user_id = '"+id_user+"'"; 
```

有人知道上述语法有什么问题吗？谢谢

编辑：我什至无法运行代码，存在语法错误！

错误：`cannot find symbol class CASE`

```
unclosed character literal
cannot find symbol class 'THEN'

expected ';' ....and so on 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:10:50.890

如果这确实是您粘贴到 Java 源代码中的内容，那么您的问题是 Java 中的字符串文字不能跨越多行。您必须为每一行使用单独的字符串文字将其拆分，并将它们与运算符粘合在一起`+`。像这样。

```
stmt = "SELECT * FROM user_zones JOIN pos WHERE user_zones.zone_id = (" +
       "        CASE" +
       ... 
```

请参阅[在 Eclipse 中粘贴多行 Java 字符串](https://stackoverflow.com/questions/2159678/paste-a-multi-line-java-string-in-eclipse)

# c# - 视图上的 MVC 3.5 Windows 身份验证

> ID：12034906
> 
> 赞同：0
> 
> 时间：2012-08-20T09:07:57.307
> 
> 标签：c#, asp.net-mvc, windows-authentication

我目前正在为我的`MVC3`Web 应用程序使用内置的 Windows 身份验证。

它按预期工作，但我似乎无法弄清楚如何根据登录的用户隐藏视图上的某些链接。我找到了有关使用的信息，`If (Roles.IsUserInRole)`但这不起作用，因为我不知道 Windows 角色（如果有的话）使用。我认为我们使用的是组而不是角色。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:15:55.673

角色 = 组成员身份，因此您可以像这样使用它：

```
if (Roles.IsUserInRole("domain\\Administrators")) {
// do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:34:22.393

我认为您也可以使用此解决方案：

```
 if (Roles.IsUserInRole("role","username")) { //should also work, worked for me in the MVC3
    // do something
    } 
```

# bash - 为什么我会得到“意外的令牌 `;'？

> ID：12034909
> 
> 赞同：2
> 
> 时间：2012-08-20T09:08:11.550
> 
> 标签：bash, shell

我想在后台 运行我的`bash`脚本的一些实例。`foo.bash`

当我在命令行中写入`for i in {1..10}; do ~/bin/foo.bash & ; done`时，出现错误：`bash: syntax error near unexpected token ;`

您能否解释为什么会发生此错误以及如何修复该命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:10:50.217

`&`并且`;`都是命令分隔符；你不需要（也不能拥有）两者。

```
for i in {1..10}; do ~/bin/foo.bash & done 
```

# android - 安装android默认示例代码

> ID：12034911
> 
> 赞同：1
> 
> 时间：2012-08-20T09:08:14.757
> 
> 标签：android, android-sdk-2.3

我正在尝试安装 Android SDK 附带的默认示例。我正在关注页面[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)。

我按照步骤 1 和 2 中的说明进行操作。但是，列表中没有“Samples for SDK”选项。我想知道我是否需要更新一些东西。我附上我卡住的地方的屏幕截图。

![在此处输入图像描述](../Images/50fce8cd00d9b0c94c6ea23e5fba495a.png)

谢谢你。

**编辑：按照**[Geeks On Hugs](https://stackoverflow.com/users/1315692/geeks-on-hugs "极客拥抱")的建议对修订版 20 进行更新后，我能够看到每个版本的*“SDK 示例”*（对我来说很奇怪：/）。

![在此处输入图像描述](../Images/0dc2f59d453f9fdb886ba14845a1125e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:52:24.487

我会更新到第 20 版，看看您是否看到示例。我从未见过样品不可用。尝试更新到修订版 20，如果您仍然看不到它们，我会直接下载版本 20。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:56:53.220

样本已压缩，您必须撤消每个样本。它们应该位于示例下的工具文件夹中，解压缩它们，然后按照教程进行操作。如果您不将示例文件夹解压缩到工作区目录，则在创建项目以使用示例文件夹上的包含选项时会有所帮助。

# mysql - Mysql curtime() 与 utf8 中常量的比较

> ID：12034912
> 
> 赞同：1
> 
> 时间：2012-08-20T09:08:22.843
> 
> 标签：mysql, datetime, utf-8, collation

我不明白为什么以下比较在 utf8 (mysql 5.5.27 - dotdeb) 中不起作用。

```
select '00:00:00' < curtime(); 
```

你能解释一下 mysql 如何评估这个表达式，因为我没有看到任何逻辑原因导致它不起作用：

```
mysql> set names 'utf8';
Query OK, 0 rows affected (0.00 sec)

mysql> select '00:00:00' < curtime();
ERROR 1267 (HY000): Illegal mix of collations (utf8_general_ci,COERCIBLE) and (latin1_swedish_ci,NUMERIC) for operation '<'

mysql> set names 'latin1';
Query OK, 0 rows affected (0.00 sec)

mysql> select '00:00:00' < curtime();
+------------------------+
| '00:00:00' < curtime() |
+------------------------+
| 1 |
+------------------------+
1 row in set (0.00 sec 
```

另一个例子，如果比较是按照一定的顺序进行的：

```
mysql> set names 'utf8';
Query OK, 0 rows affected (0.00 sec)

mysql> select '00:00:00' < curtime();
ERROR 1267 (HY000): Illegal mix of collations (utf8_general_ci,COERCIBLE) and (latin1_swedish_ci,NUMERIC) for operation '<'
mysql> select curtime() > '00:00:00';
+------------------------+
| curtime() > '00:00:00' |
+------------------------+
| 1 |
+------------------------+
1 row in set (0.00 sec) 
```

utf8 中的排序规则和字符变量：

```
mysql> show variables like 'collation%';
+----------------------+-------------------+
| Variable_name        | Value             |
+----------------------+-------------------+
| collation_connection | utf8_general_ci   |
| collation_database   | latin1_swedish_ci |
| collation_server     | latin1_swedish_ci |
+----------------------+-------------------+
3 rows in set (0.00 sec)

mysql> show variables like 'character%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec) 
```

这适用于 MariaDb (5.5.25-MariaDB)

```
MariaDB [(none)]> set names 'utf8';
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]> select '00:00:00' < curtime();
+------------------------+
| '00:00:00' < curtime() |
+------------------------+
|                      1 |
+------------------------+
1 row in set (0.00 sec)

MariaDB [(none)]> SHOW VARIABLES LIKE 'character_set%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)

MariaDB [(none)]> SHOW VARIABLES LIKE 'collation%';
+----------------------+-------------------+
| Variable_name        | Value             |
+----------------------+-------------------+
| collation_connection | utf8_general_ci   |
| collation_database   | latin1_swedish_ci |
| collation_server     | latin1_swedish_ci |
+----------------------+-------------------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:51:12.417

您正在尝试比较不同的数据类型 - 字符串和时间，在这种情况下 MySQL 使用类型转换并引发错误。尝试使用 STR_TO_DATE 函数将字符串转换为 TIME 并比较两个相同的类型：

```
SET NAMES 'utf8';
SELECT STR_TO_DATE('00:00:00', '%H:%i:%s') < CURTIME(); 
```

此处的更多信息 -[表达式评估中的类型转换](http://dev.mysql.com/doc/refman/5.1/en/type-conversion.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T11:32:11.800

检查此解决方案，它的工作原理。您需要将价值转化为时间。

例如 1 -

```
select cast('00:00:00' as time) < curtime(); 
```

例如 2 -

```
CURTIME()<= ADDTIME(time_column,'-00:15:00') 
```

# iphone - iOS - 恢复自动续订订阅

> ID：12034913
> 
> 赞同：9
> 
> 时间：2012-08-20T09:08:25.317
> 
> 标签：iphone, ios, ios4, in-app-purchase

我正在实施自动更新订阅。我有以下问题

订阅内容过期后用户能否恢复？

如果是这样，我该如何验证它们并让它们下载

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:21:52.573

查看[恢复自动更新订阅](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Subscriptions.html#//apple_ref/doc/uid/TP40008267-CH7-SW3)

基本上你需要打电话`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`，你会得到恢复的交易。你应该看`originalTransaction`财产。您将知道每笔交易的交易日期（也适用于过期交易）。然后您查看产品标识符，您的应用应该知道每个产品标识符的订阅长度。由于您知道每笔交易的开始日期和长度，您可以计算订阅有效的时间段。您将它们验证为任何其他交易 - 将它们发送到您的服务器，然后发送到`http://buy.itunes.apple.com/verifyReceipt`（将购买更改为沙箱进行测试）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:37:17.183

```
-(void)restoreSubscription:(SKPaymentTransaction *)transaction {
NSUserDefaults *defaultData = [NSUserDefaults standardUserDefaults];
NSArray *productID = [defaultData objectForKey:@"productID"];
NSArray *subMonths = [defaultData objectForKey:@"SubMonth"];

NSLog(@"%@",productID.description);

NSLog(@"Array ==%@",objContantManeger.subscriptionMonth);
NSMutableArray *arrID = [[NSMutableArray alloc] initWithArray:objContantManeger.subscriptionProductID];

NSMutableArray *arrMonth = [[NSMutableArray alloc] initWithArray:subMonths];

NSDate *date;
NSDate *exDate;
for (int i =0;i<arrID.count;i++)
{
    NSString *idStr =[arrID objectAtIndex:i];
    NSString *monthStr = [arrMonth objectAtIndex:i];
    int addsubMonth = [monthStr intValue];

    NSLog(@"%i--%@",i,idStr);
    NSLog(@"%i-->%i",i,addsubMonth);

    NSLog(@"Transaction Date--%@",transaction.originalTransaction.payment.productIdentifier);

    if ([transaction.originalTransaction.payment.productIdentifier isEqualToString:idStr])
    {
        NSLog(@"Date..%@",transaction.originalTransaction.transactionDate);

        date = transaction.originalTransaction.transactionDate;

        NSString *dateStr = [date description];
        NSRange range;

        // year
        range.location = 0;
        range.length = 4;
        NSString *yearStr = [dateStr substringWithRange:range];
        int year = [yearStr intValue];
        NSLog(@"%i",year);

        // month
        range.location = 5;
        range.length = 2;
        NSString *monthStr = [dateStr substringWithRange:range];
        int month = [monthStr intValue];
        NSLog(@"%i",month);
        // day
        range.location = 8;
        range.length = 2;
        NSString *dayStr = [dateStr substringWithRange:range];
        int day = [dayStr intValue];
        NSLog(@"%i",month);

        NSCalendar *calendar = [NSCalendar currentCalendar];

        NSDateComponents *components = [[NSDateComponents alloc] init];
        NSLog(@"addsubMonth---)%i",addsubMonth);
        [components setYear:year];
        [components setMonth:month+addsubMonth];
        [components setDay:day]; 

        NSLog(@"Expire DATE-->%@",[calendar dateFromComponents:components]);

        exDate = [calendar dateFromComponents:components];

        NSUserDefaults *defult = [NSUserDefaults standardUserDefaults];
        [defult setObject:exDate forKey:@"subexpiredate"];
        [defult synchronize];

       // return;

    }
} 
```

您可以使用此方法验证订阅。因为这是提供订阅开始和到期日期。

**提示 -**

使用应用程序委托方法 applicationDidEnterBackground 实现检查订阅。

# python - 流式二进制可执行文件

> ID：12034915
> 
> 赞同：1
> 
> 时间：2012-08-20T09:08:28.417
> 
> 标签：python, hadoop-streaming

在我的流式传输作业中，我想在 mapper 中调用一个可执行文件。是这样的

映射器.py

```
print os.popen('./binary').read() 
```

命令是

```
$HADOOP_HOME/bin/hadoop fs -rmr $HADOOP_OUTPUT
$HADOOP_HOME/bin/hadoop  streaming \
    -D mapred.map.tasks=$MAP_NUM  \
    -D mapred.reduce.tasks=$RED_NUM \
    -D mapred.job.map.capacity=500  \
    -D mapred.map.capacity.per.tasktracker=1 \
    -input $HADOOP_INPUT \
    -output $HADOOP_OUTPUT \
    -mapper mapper.py  \
    -file mapper.py binary\ 
```

但结果是，二进制文件没有执行。我不知道为什么。谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:35:44.500

操作系统中的任意文件不能执行，只是因为它的文件格式允许文件是可执行的（例如，它是本机可执行文件或带有`#/path/to/interpreter`第一行的某些脚本）。

您的文件系统（您已将文件添加到其中）必须知道该文件可以通过设置执行权限位来执行。[您可以使用chmod](http://en.wikipedia.org/wiki/Chmod)命令设置这些位，例如：

```
chmod +x <path-to-file> 
```

# asp.net - Umbraco 日志表被 At /keepalive/ping.ashx 填满（引用者：）：

> ID：12034916
> 
> 赞同：0
> 
> 时间：2012-08-20T09:08:31.217
> 
> 标签：asp.net, logging, umbraco, ashx, keep-alive

我每隔几秒钟就会在网站 UmbracoLog 表之一中收到以下错误日志条目...

在 /keepalive/ping.ashx （引用者： ）：

试图找到问题的解决方案几天但没有任何成功..请参阅我在 Our Umbraco [http://our.umbraco.org/forum/using/ui-questions/33930-Error-in-umbracoLog-table中的帖子-at-keepalivepingashx-%28Referred-by-%29?p=0#comment124646](http://our.umbraco.org/forum/using/ui-questions/33930-Error-in-umbracoLog-table-At-keepalivepingashx-%28Referred-by-%29?p=0#comment124646)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:55:41.173

因此，keepalives 通常用于阻止旧的 CMS 后端与应用程序池发生冲突，并在 20 分钟左右后进入休眠状态。

听起来您的解决方案中正在发生一些事情，每隔几秒就会触发一次，这有点奇怪。

如果您根本安装了 nopCommerce？此处的这篇文章描述了您遇到的问题以及需要时在何处禁用 keepalive。

[http://www.nopcommerce.com/boards/t/6895/why-getting-pingashx-on-online-customer-module-.aspx](http://www.nopcommerce.com/boards/t/6895/why-getting-pingashx-on-online-customer-module-.aspx)

# android - 读写ArrayList with various type of objects in parcel I am using parcel to cache Items in binary file. Everything was fine until I need to store into single ArrayList various type of objects: fou 问问题 问问题 2012-08-20T09:08:49.220 4100 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am using parcel to cache Items in binary file. Everything was fine until I need to store into single ArrayList various type of objects: fout = new FileOutputStream(file); Parcel parcel = Parcel.obtain(); ArrayList list = new ArrayList(items); Log.d(TAG, "write items to cache: " + items.size()); parcel.writeList(list); byte[] data = parcel.marshall(); fout.write(data); But reading don't work properly: fin = new FileInputStream(file); byte[] data = new byte[(int) file.length()]; fin.read(data); Log.d(TAG, "file size: " + file.length()); Parcel parcel = Parcel.obtain(); parcel.unmarshall(data, 0, data.length); ArrayList rawList = parcel.readArrayList(Object.class.getClassLoader()); I think problem is in Object classLoader, who can't create object for extended class. Have any idea how I can easily fix this? Or maybe could somebody to give me advise for my task which is to cache ArrayList or Set into file with objects of type . Logcat: 08-20 12:16:52.200: D/ItemList(6637): writing data 08-20 12:16:52.200: D/ItemList(6637): write items to cache: 2 08-20 12:17:45.940: D/ItemList(6925): reading data 08-20 12:17:46.650: D/ItemList(6925): reading data 08-20 12:17:47.050: D/ItemList(6925): reading data 08-20 12:17:47.060: D/ItemList(6925): cache file found 08-20 12:31:18.050: D/ItemList(7349): file size: 760 08-20 12:17:47.060: D/ItemList(6925): founded items in cache: 0 More logcat: 08-20 12:49:02.930: D/ItemList(9241): file size: 1136 08-20 12:49:02.930: D/ItemList(9241): dataAvail(): 0 08-20 12:49:02.930: D/ItemList(9241): dataSize(): 1136 08-20 12:49:02.930: D/ItemList(9241): dataCapacity(): 1136 08-20 12:49:02.930: D/ItemList(9241): founded items in cache: 0 OK, I found it. You never read the data from the file: fin = new FileInputStream(file); byte[] data = new byte[(int) file.length()]; All you do is create the input stream and allocate a byte buffer. EDIT Add more code about how to unmarshall the Parcel Parcel parcel = Parcel.obtain(); parcel.unmarshall(data, 0, data.length); parcel.setDataPosition(0); // Set the position in the parcel back to the beginning // so that we can read the stuff out of it ArrayList rawList = parcel.readArrayList(Object.class.getClassLoader()); androidfileclassloaderparcel 4 1 回答 1 This answer is useful 2 好的，我找到了。您从未从文件中读取数据： fin = new FileInputStream(file); byte[] data = new byte[(int) file.length()]; 您所做的就是创建输入流并分配一个字节缓冲区。 编辑添加更多关于如何解组包裹的代码 Parcel parcel = Parcel.obtain(); parcel.unmarshall(data, 0, data.length); parcel.setDataPosition(0); // Set the position in the parcel back to the beginning // so that we can read the stuff out of it ArrayList rawList = parcel.readArrayList(Object.class.getClassLoader()); 于 2012-08-20T09:25:56.597 回答 Related 1 ios - 如何在网址中使用通配符来下载文件名定期更改的文件 1 bash - 每次我在 Linux 上自动更改目录时，如何让目录中的文件/文件夹显示出来？ 1 mysql - MySQL 日期转换（“2013 年 1 月 30 日”到“2013 年 1 月 28 日”） 2 linux - Linux 询问自定义/别名命令的密码？ 1 python - 在 sqlalchemy ORM 查询中使用 NOT EXISTS 子句 3 python - 在 Python 中的同一个类中创建多个对象 2 sencha-touch - 如何隐藏按钮是 Sencha Touch 2.1 2 wcf - 从 WCF 获取 ServiceContract 方法 1 keymando - Keymando：发送击键时删除修饰键 3 java - java在控制台中绘制图形或树 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12034917
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, file, classloader, parcel

I am using parcel to cache Items in binary file. Everything was fine until I need to store into single `ArrayList` various type of objects:

```
 fout = new FileOutputStream(file);

        Parcel parcel = Parcel.obtain();
        ArrayList<Object> list = new ArrayList<Object>(items);
        Log.d(TAG, "write items to cache: " + items.size());
        parcel.writeList(list);
        byte[] data = parcel.marshall();
        fout.write(data); 
```

But reading don't work properly:

```
fin = new FileInputStream(file);
byte[] data = new byte[(int) file.length()];
fin.read(data);
Log.d(TAG, "file size: " + file.length());

Parcel parcel = Parcel.obtain();
parcel.unmarshall(data, 0, data.length);

ArrayList<Object> rawList = parcel.readArrayList(Object.class.getClassLoader()); 
```

I think problem is in Object classLoader, who can't create object for extended class.

Have any idea how I can easily fix this? Or maybe could somebody to give me advise for my task which is to cache `ArrayList` or Set into file with objects of type `<? extends Object?>`. Logcat:

```
08-20 12:16:52.200: D/ItemList(6637): writing data
08-20 12:16:52.200: D/ItemList(6637): write items to cache: 2
08-20 12:17:45.940: D/ItemList(6925): reading data
08-20 12:17:46.650: D/ItemList(6925): reading data
08-20 12:17:47.050: D/ItemList(6925): reading data
08-20 12:17:47.060: D/ItemList(6925): cache file found
08-20 12:31:18.050: D/ItemList(7349): file size: 760
08-20 12:17:47.060: D/ItemList(6925): founded items in cache: 0 
```

More logcat:

```
08-20 12:49:02.930: D/ItemList(9241): file size: 1136
08-20 12:49:02.930: D/ItemList(9241): dataAvail(): 0
08-20 12:49:02.930: D/ItemList(9241): dataSize(): 1136
08-20 12:49:02.930: D/ItemList(9241): dataCapacity(): 1136
08-20 12:49:02.930: D/ItemList(9241): founded items in cache: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:25:56.597

好的，我找到了。您从未从文件中**读取**数据：

```
fin = new FileInputStream(file);
byte[] data = new byte[(int) file.length()]; 
```

您所做的就是创建输入流并分配一个字节缓冲区。

**编辑添加更多关于如何解组包裹的代码**

```
Parcel parcel = Parcel.obtain();
parcel.unmarshall(data, 0, data.length);
parcel.setDataPosition(0); // Set the position in the parcel back to the beginning
                           //  so that we can read the stuff out of it
ArrayList<Object> rawList = parcel.readArrayList(Object.class.getClassLoader()); 
```

# java - 将 byte[] 或 String 转换为 Dom 文档

> ID：12034918
> 
> 赞同：0
> 
> 时间：2012-08-20T09:08:54.407
> 
> 标签：java, dom, bytearray

如何将保存我的 XML 的 byte[] 或 String 转换为 DOM 文档？

我需要这个才能在 Documnet 上执行 XPath。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:11:02.870

您需要一个[DocumentBuilder并使用通过](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/parsers/DocumentBuilder.html)[StringReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/StringReader.html)配置了 XML 字符串的[InputSource](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/InputSource.html)来调用`parse()`它。

不要`parse()`直接使用字符串调用，因为它会将该字符串解释为引用 XML 的 URI！

# firefox - Websocket 消息中断 ExtJS 类的动态加载

> ID：12034922
> 
> 赞同：0
> 
> 时间：2012-08-20T09:09:14.933
> 
> 标签：firefox, websocket, extjs, extjs4.1, http-get

在我的 ExtJS 4.1 应用程序中，我使用 websocket 连接从服务器远程实例化和控制 ExtJS 类。客户端注册到 websocket.onmessage 并等待传入​​命令。

我为此定义了一个简单的协议。服务器发送一个“CREATE classname id”。在客户端，我使用 Ext.create 来实例化该类。然后服务器可以通过 websocket 向对象发送命令。例如“DOSTUFF id”。我正在使用 ExtJS 的动态加载机制。

在 Chrome 中一切正常。

Firefox 的问题是，第二条命令消息 (DOSTUFF) 在对象创建之前执行。这会导致错误，因为找不到对象。似乎第二个 websocket 命令消息是在 ExtJS 通过 HTTP-GET 加载文件之前执行的。

在我的世界中，JavaScript 是按顺序执行的（我不使用 webworkers）。我认为 Ext.create(..) 的调用应该与后台的 HTTP-GET 同步执行，不是吗？

这是我的客户端应用程序的“伪”跟踪输出：

```
ExecuteCommand (Enter): CREATE ("MyClass", "1")
HTTP-GET "MyClass.js"
ExecuteCommand (Enter): DOSTUFF ("1")
ExecuteCommand (Error): DOSTUFF ("1"): Object not found
ExecuteCommand (Enter): CREATE ("MyClass", "1"): OK! Object created! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:17:23.493

这说得通。默认情况下，GET 请求是异步的，请参阅 Firefox 文档：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests)

为避免此问题，请检查对象是否存在，如果需要让服务器知道在几秒钟内重新发送，然后重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:34:29.620

好的，正如 DmitryB 所提到的，HTTP-GET 异步工作。在发送 XMLHttpRequest 后，将控制权传递给下一个 websocket.onmessage。

在调用 Ext.create 之前，我通过使用带有回调函数的 Ext.require 解决了这个问题。

它看起来像这样：

```
ExecuteCommand: CREATE ("MyClass", "1")
       Ext.require("MyClass", function(c) { 
            ExecuteCommand: DOSTUFF (c);
       } 
```

# android - HttpTestResult.getType 为 edittext 返回 UNKNOWN_TYPE

> ID：12034925
> 
> 赞同：1
> 
> 时间：2012-08-20T09:09:36.527
> 
> 标签：android, webview, android-edittext

我在我的应用程序中禁用方向更改。我只需要在用户点击任何edittext时启用它。我的webview中有一些edittexts。我添加了下面的代码来做同样的事情。

```
mWebView.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        WebView.HitTestResult hr = ((WebView)v).getHitTestResult();
        if(hr!=null){
            if(hr.getType()==HitTestResult.EDIT_TEXT_TYPE )
                ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
            else
                ((Activity) context).setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }
        return false;  
    }     
}); 
```

在 android 4.0 设备中它工作正常。但在 2.2 OS hr.getType() 返回 unknown_type 即 0。我怎样才能让它在旧版本中也能工作......

# html - Powershell中的Convertto-html输出错误的东西

> ID：12034926
> 
> 赞同：0
> 
> 时间：2012-08-20T09:09:42.400
> 
> 标签：html, powershell

我一直在使用 Powershell 来提取数据，我需要将获得的数据导出到 html 文件中。由于 cmdlet，这听起来很简单，但是它输出了错误的东西。

我的代码是：

```
c:> get-servergroup | %{$_. Name + " " + $_.ServerOff + " " + $_.ServerOn} 
```

然后这会在下面生成一个小表格，其中包含名称以及哪些服务器处于打开和关闭状态。但是，当我添加转换 cmdlet 时，如下所示：

```
c:> get-servergroup | %{$_. Name + " " + $_.ServerOff + " " + $_.ServerOn} | Convertto-html | Out-file Test.html 
```

它给了我 3 个值，比如 * 35 62 所以真的，我只是想知道代码是否有问题？或者如果我错过了什么。

如果问题已经回答，那么请说！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:02:25.090

您可能想要执行以下操作：

```
get-servergroup | Select Name,ServerOff,ServerOn | ConvertTo-Html | out-file test.html 
```

请注意，前一个将对象转换为字符串 ( objects )，并且`convertto-html`cmdlet 产生了适当的输出。

# php - 如何在PHP中交换两个文件的内容

> ID：12034933
> 
> 赞同：1
> 
> 时间：2012-08-20T09:10:19.133
> 
> 标签：php, filesystems, rename, fopen, swap

我想使用 php 交换两个文件的内容。但似乎文件执行是在脚本末尾以一种奇怪的方式处理的。因为它总是要么将内容写入一个文件，要么什么也没发生，但文件被重写了。

我尝试了以下方法：

```
rename($file1,$file2_temp);
rename($file2,$file1); // replace the file1
rename($file2_temp,$file2); // save the temporary file2 as the file2 
```

我也尝试将它放入`fopen`和`flock`语句中，但它没有用。

有没有人有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:20:25.513

使用文件名时，请确保您使用完整路径，例如：

```
rename ("/folder/file.ext", "/folder/newfile.ext"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:48:45.047

我想通了，代码是正确的，问题是我的脚本以某种方式运行了两次，因此它来回覆盖了文件:(我现在必须弄清楚为什么它运行了两次，但谢谢大家！

# xcode - 用户如何从我的应用程序中的表格视图单元格中打开地图

> ID：12034940
> 
> 赞同：0
> 
> 时间：2012-08-20T09:10:50.053
> 
> 标签：xcode, map, sdk, uiapplication

我试图从表格视图单元格中打开我的应用程序中的地图，我知道我的 AppDelegate.m 文件中需要此代码：

```
UIApplication *app = [UIApplication sharedApplication];

[app openURL:[NSURL URLWithString:@"https://maps.google.com.au/maps?q=Our+Lady+Queen+of+Peace+Catholic+Church+Greystanes" 
```

我希望saddr 是用户的并直接指向上面的位置地址。

如何将表格视图单元格链接到该代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:04:55.580

您可以在该`ViewController`控件中的 didSelectRowAtIndexPath 中执行此操作`TableView`（而不是在 中`AppDelegate`）。使用您在该单元格中需要的数据（希望来自支持数据源）构建该 url，然后使用您上面的代码。像这样的东西：

```
NSDictionary *thisCell = [myTableViewData objectAtIndex:indexPath.row];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.google.com.au/maps?q%@", [thisCell valueForKey:@"locationKey"]]]]; 
```

# c++ - Win32 - 从 C/C++ 中选择目录对话框

> ID：12034943
> 
> 赞同：16
> 
> 时间：2012-08-20T09:10:57.210
> 
> 标签：c++, winapi

如何从本机 Win32 应用程序中选择现有文件夹（或创建新文件夹）？

[这是一个类似的问题](https://stackoverflow.com/questions/1922204/open-directory-dialog)。它为 C#/.NET 提供了一个很好的答案。但我想为原生 Win32 做同样的事情。

有人知道解决方案，免费代码等吗？

**更新：**

我尝试了答案中的功能。一切都按预期工作，除了需要调用该`SHGetPathFromIDList`函数来检索所选目录的名称。这是一个示例屏幕截图：

![目录拾取对话框的示例。](../Images/9d1a662f89598cf9171787b21d9a77bf.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-20T09:15:05.023

[SHBrowseFor文件夹](https://docs.microsoft.com/en-us/windows/win32/api/shlobj_core/nf-shlobj_core-shbrowseforfoldera)

帮您的用户一个忙，并至少设置`BIF_NEWDIALOGSTYLE`标志。

要设置初始文件夹，请添加以下代码：

```
static int CALLBACK BrowseFolderCallback(
                  HWND hwnd, UINT uMsg, LPARAM lParam, LPARAM lpData)
{
    if (uMsg == BFFM_INITIALIZED) {
        LPCTSTR path = reinterpret_cast<LPCTSTR>(lpData);
        ::SendMessage(hwnd, BFFM_SETSELECTION, true, (LPARAM) path);
    }
    return 0;
}

// ...
BROWSEINFO binf = { 0 };
...
binf.lParam = reinterpret_cast<LPARAM>(initial_path_as_lpctstr); 
binf.lpfn = BrowseFolderCallback;
... 
```

并提供合适的路径（例如记住上次选择、您的应用程序数据文件夹或类似内容）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-24T03:28:48.923

作为未来用户的参考，这篇文章对我在 C++ 中获取目录对话框帮助很大

[http://www.codeproject.com/Articles/2604/Browse-Folder-dialog-search-folder-and-all-sub-fol](http://www.codeproject.com/Articles/2604/Browse-Folder-dialog-search-folder-and-all-sub-fol)

这是我的代码（大量基于/取自文章）

*注意：您应该能够将其复制/粘贴到文件中/编译它（g ++，请参阅下面的 VS in ninja 编辑）并且它会起作用。*

```
#include <windows.h>
#include <string>
#include <shlobj.h>
#include <iostream>
#include <sstream>

static int CALLBACK BrowseCallbackProc(HWND hwnd,UINT uMsg, LPARAM lParam, LPARAM lpData)
{

    if(uMsg == BFFM_INITIALIZED)
    {
        std::string tmp = (const char *) lpData;
        std::cout << "path: " << tmp << std::endl;
        SendMessage(hwnd, BFFM_SETSELECTION, TRUE, lpData);
    }

    return 0;
}

std::string BrowseFolder(std::string saved_path)
{
    TCHAR path[MAX_PATH];

    const char * path_param = saved_path.c_str();

    BROWSEINFO bi = { 0 };
    bi.lpszTitle  = ("Browse for folder...");
    bi.ulFlags    = BIF_RETURNONLYFSDIRS | BIF_NEWDIALOGSTYLE;
    bi.lpfn       = BrowseCallbackProc;
    bi.lParam     = (LPARAM) path_param;

    LPITEMIDLIST pidl = SHBrowseForFolder ( &bi );

    if ( pidl != 0 )
    {
        //get the name of the folder and put it in path
        SHGetPathFromIDList ( pidl, path );

        //free memory used
        IMalloc * imalloc = 0;
        if ( SUCCEEDED( SHGetMalloc ( &imalloc )) )
        {
            imalloc->Free ( pidl );
            imalloc->Release ( );
        }

        return path;
    }

    return "";
}

int main(int argc, const char *argv[])
{
    std::string path = BrowseFolder(argv[1]);
    std::cout << path << std::endl;
    return 0;
} 
```

**编辑：**我更新了代码，向人们展示如何记住最后选择的路径并使用它。

此外，对于 VS，使用 Unicode 字符集。替换这一行：

```
const char * path_param = saved_path.c_str(); 
```

有了这个：

```
std::wstring wsaved_path(saved_path.begin(),saved_path.end());
const wchar_t * path_param = wsaved_path.c_str(); 
```

我上面的测试代码是用 g++ 编译的，但是这样做在 VS 中为我​​修复了它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-08-22T09:25:31.343

对于 Windows Vista 及更高版本，最好使用正确打开对话框[`IFileOpenDialog`](https://docs.microsoft.com/en-us/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog)的`FOS_PICKFOLDERS`选项而不是此树形对话框。有关详细信息，请参阅MSDN 上的[Common Item Dialog](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/legacy/bb776913(v=vs.85))。

# windows - 在 windows xp 中以管理员身份启动时运行应用程序

> ID：12034946
> 
> 赞同：0
> 
> 时间：2012-08-20T09:11:14.773
> 
> 标签：windows, windows-xp, windows-administration

我们想在启动时以管理员身份启动一个应用程序（exe 文件），这样用户就无法杀死它。这在windows xp中可行吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:14:30.763

a) 将应用程序作为服务启动。在 Win-Xp 上，服务至少可以显示 TrayIcons，我不确定窗口/表单。

要轻松地将任何应用程序转变为服务，您可以使用[Windows 2003 Server Ressource Kit](http://www.microsoft.com/en-us/download/details.aspx?id=17657)中的[srvany](http://support.microsoft.com/kb/137890)。

b) Windows 任务调度器能够以不同用户的身份运行应用程序，包括。管理员（使用此方法，不会显示任何窗口）。

c）您可以运行`at hh:mm /INTERACTIVE cmd`以启动`SYSTEM-User`可以与用户桌面交互的进程。

# python - Flask：如何获取动态生成的图像文件的 url？

> ID：12034949
> 
> 赞同：9
> 
> 时间：2012-08-20T09:11:19.333
> 
> 标签：python, flask

```
from flask import Flask, redirect, url_for

app = Flask(__name__)
@app.route('/')
def index():
        generate_img("test.jpg");
        return '<img src=' + url_for(filename='test.jpg') + '>' 
```

`generate_img()`将随机图像输出到当前目录（与此脚本相同的文件夹）。

我收到 404，我导航到 mydomain.com/test.jpg 但它不存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:20:14.407

404 错误的原因是没有这样的视图来处理这个问题。要从烧瓶中提供图像，请将图像保存在静态文件夹中，然后您可以在此 url 访问图像

`mydomain.com/static/test.jpg`

```
 from flask import Flask, redirect, url_for

     app = Flask(__name__)
     @app.route('/')
     def index():
          generate_img("test.jpg"); #save inside static folder
          return '<img src=' + url_for('static',filename='test.jpg') + '>' 
```

静态文件夹用于提供所有媒体，无论是 css、javascript、视频或图像文件，所有内容均可在 mydomai.com/static/filename 访问。请记住，您不应该在生产中使用来自静态文件夹的烧瓶服务。此功能仅用于开发。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T09:17:07.490

假设实际生成了图片（即调用了那个index()），404的原因是没有指向图片的路由，所以Flask会告诉你没有mydomain.com/test.jpg . 默认情况下，像 Apache 或 Nginx 这样的静态网络服务器会将路径从根映射到 URL，但普通的 Flask/Werkzeug/WSGI 设置不会这样做。

也许您想创建一个直接返回图像的资源？

编辑：类似的东西应该能够提供图像。

```
@app.route("/imgs/<path:path>")
def images(path):
    generate_img(path)
    fullpath = "./imgs/" + path
    resp = flask.make_response(open(fullpath).read())
    resp.content_type = "image/jpeg"
    return resp 
```

EDIT2：当然， generate_img 可能会被重写，因此它永远不会写入磁盘，而是直接返回图像数据。

# sql - 'ora-00979'(not a group by expression) caused by 'order by'

> ID：12034950
> 
> 赞同：0
> 
> 时间：2012-08-20T09:11:32.030
> 
> 标签：sql, oracle

I'm sorry for my poor English,but I will try my best to describe my question

```
SELECT user_id,
       Count(user_id),
       Trunc(created_time, 'dd')
FROM   (SELECT user_id,
               created_time
        FROM   t_vote_join_user
        WHERE  created_time >= To_date('20120720', 'yyyymmdd')
               AND created_time < To_date('20120814', 'yyyymmdd')
               AND ( ( vote_id = 1270
                       AND options = '["5526"]' )
                      OR ( vote_id = 1306
                           AND options = '["5666"]' )
                      OR ( vote_id = 1320
                           AND options = '["5759"]' )
                      OR ( vote_id = 1366
                           AND options = '["5966"]' )
                      OR ( vote_id = 1393
                           AND options = '["6066"]' )
                      OR ( vote_id = 1432
                           AND options = '["6203"]' )
                      OR ( vote_id = 1452
                           AND options = '["6269"]' )
                      OR ( vote_id = 1502
                           AND options = '["6482"]' )
                      OR ( vote_id = 1610
                           AND options = '["6863"]' )
                      OR ( vote_id = 1627
                           AND options = '["6917"]' )
                      OR ( vote_id = 1651
                           AND options = '["7010"]' )
                      OR ( vote_id = 1676
                           AND options = '["7098"]' ) ))
GROUP  BY user_id,
          Trunc(created_time, 'dd')
ORDER  BY Trunc(created_time, 'dd') 
```

> executed error caused by ora-00979(not a group by expression),but executed ok without 'order by TRUNC(created_time, 'dd')'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:27:44.397

Try the following for your order by: Order by 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:21:35.677

When grouping, make sure the elements in the select string, not part of the group by, make use of an appropriate grouping or many-to-one function (ex: sum, avg etc). Please post the complete query to get a proper resolution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:38:52.537

try to use the alias for the column

```
SELECT user_id,
       Count(user_id),
       Trunc(created_time, 'dd')  AS created_date
FROM   (SELECT user_id,
 ...

GROUP  BY user_id,
          Trunc(created_time, 'dd')
ORDER  BY created_date
; 
```

# c++ - 调整大小的数组 (C++ / Win32) 出现“缓冲区太小”错误

> ID：12034953
> 
> 赞同：0
> 
> 时间：2012-08-20T09:11:49.420
> 
> 标签：c++, windows

我正在调整数组的大小。调整大小（将大小加倍）似乎可以正常工作，但是当我将更多文本发送到调整大小的数组时，当它达到调整大小之前数组的限制时，我得到一个“调试断言失败！表达式： (L"缓冲区太小" && 0)" 错误。我尝试了几种不同的方法，总是得到相同的结果。

```
 static int ReadBufferSize, totalChars;    
    static char *ReadBuffer = NULL;
    ReadBuffer = (char *)malloc(ReadBufferSize);

    ...

    //Double buffer size.
    if((float)totalChars > (0.75f) * (float)ReadBufferSize)
    {
        char *tempBuffer = NULL;
        tempBuffer = (char *)malloc(2 * ReadBufferSize); 
        if(tempBuffer == NULL)
            free(tempBuffer);
        else
        {
            memcpy(tempBuffer,ReadBuffer,strlen(ReadBuffer)+1);
            free(ReadBuffer);
            ReadBuffer = tempBuffer;
            tempBuffer = NULL;
            ReadBufferSize *= 2;
        }
    } 
```

对于我的测试，ReadBufferSize 最初设置为 85 个字符。在执行了调整数组大小的代码后，ReadBuffer 中的文本仍然显示在屏幕上。我输入更多字符，它们被发送到数组中，然后从那里显示在屏幕上。但是当字符数达到 85 个字符时，我收到“Debug Assertion Failed! Expression: (L"Buffer is too small" && 0)”错误，此时应该有 170 个字符的空间。我也试过以下。

```
//Double buffer size.
if((float)totalChars > (0.75f) * (float)ReadBufferSize)
{
    char* temp = 0;
    temp = new char[2 * ReadBufferSize];
    for(unsigned int i = 0; i < strlen(ReadBuffer); i++)
        temp[i] = ReadBuffer[i];
    temp[strlen(ReadBuffer)] = '\0';
    delete[] ReadBuffer;
    ReadBuffer = temp;
    temp = 0;
    ReadBufferSize *= 2;
} 
```

我也试过：

```
malloc(2 * ReadBufferSize * sizeof(char)); 
```

和：

```
strcpy_s(tempBuffer, strlen(ReadBuffer)+1, ReadBuffer); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:57:19.880

由于您没有提供完整的最小程序，因此很难说出了什么问题。您通常应该在调试器中启动程序，在函数中放置断点并重现问题。查看所有变量和函数，例如 strlen()。它们可能会返回您不期望的值。

题外话，但对于实际应用程序，您最好使用 std::string 自动执行所有内存管理技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:18:27.883

我想到了。当我注意到问题时，我正要发布更多代码以向您提供更多信息。我有一个用于数组大小的“pageSize”变量。然后，当我想开始动态更改大小时，我通过创建“ReadBufferSize”变量将数组大小与页面大小分开。不幸的是，我在将字符放入数组的代码段中仍然有“pageSize”：

```
strcat_s(ReadBuffer, pageSize, keystroke); 
```

我现在已将其更改为

```
strcat_s(ReadBuffer, ReadBufferSize, keystroke); 
```

一切似乎都在工作。感谢大家花时间看这个。我一直认为问题一定出在调整数组大小的代码部分，而不是其他地方。

# php - 如何在使用php在mysql中上传期间调整图像大小

> ID：12034955
> 
> 赞同：1
> 
> 时间：2012-08-20T09:11:56.097
> 
> 标签：php, mysql, image, resize

我有以下代码用于将图像上传到数据库中。

```
<html>
<head><title>File Insert</title></head>
<body>
<h3>Please Choose a File and click Submit</h3>

<form enctype="multipart/form-data" action=
"<?php echo $_SERVER['server address']; ?>" method="post">
<input type="hidden" name="MAX_FILE_SIZE" value="10000000" />
<input name="userfile" type="file" />
<input type="submit" value="Submit" />
</form>

<?php

// check if a file was submitted
if(!isset($_FILES['userfile']))
{
    echo '<p>Please select a file</p>';
}
else
{
    try {
    $msg= upload();  //this will upload your image
    echo $msg;  //Message showing success or failure.
    }
    catch(Exception $e) {
    echo $e->getMessage();
    echo 'Sorry, could not upload file';
    }
}

// the upload function

function upload() {
    $host="your_hostname";
    $user="your_databaseuser";
    $pass="your_database_password";
    $db="database_name_to_use";
    $maxsize = 10000000; //set to approx 10 MB

    //check associated error code
    if($_FILES['userfile']['error']==UPLOAD_ERR_OK) {

        //check whether file is uploaded with HTTP POST
        if(is_uploaded_file($_FILES['userfile']['tmp_name'])) {    

            //checks size of uploaded image on server side
            if( $_FILES['userfile']['size'] < $maxsize) {  

               //checks whether uploaded file is of image type
              if(strpos(mime_content_type($_FILES['userfile']['tmp_name']),"image")===0) {
              //   $finfo = finfo_open(FILEINFO_MIME_TYPE);
              //  if(strpos(finfo_file($finfo, $_FILES['userfile']['tmp_name']),"image")===0) {    

                    // prepare the image for insertion
                    $imgData =addslashes (file_get_contents($_FILES['userfile']['tmp_name']));

                    // put the image in the db...
                    // database connection
                    mysql_connect($host, $user, $pass) OR DIE (mysql_error());

                    // select the db
                    mysql_select_db ($db) OR DIE ("Unable to select db".mysql_error());

                    // our sql query
                    $sql = "INSERT INTO test_image
                    (image, name)
                    VALUES
                    ('{$imgData}', '{$_FILES['userfile']['name']}');";

                    // insert the image
                    mysql_query($sql) or die("Error in Query: " . mysql_error());
                    $msg='<p>Image successfully saved in database with id ='. mysql_insert_id().' </p>';
                }
                else
                    $msg="<p>Uploaded file is not an image.</p>";
            }
             else {
                // if the file is not less than the maximum allowed, print an error
                $msg='<div>File exceeds the Maximum File limit</div>
                <div>Maximum File limit is '.$maxsize.' bytes</div>
                <div>File '.$_FILES['userfile']['name'].' is '.$_FILES['userfile']['size'].
                ' bytes</div><hr />';
                }
        }
        else
            $msg="File not uploaded successfully.";

    }
    else {
        $msg= file_upload_error_message($_FILES['userfile']['error']);
    }
    return $msg;
}

// Function to return error message based on error code

function file_upload_error_message($error_code) {
    switch ($error_code) {
        case UPLOAD_ERR_INI_SIZE:
            return 'The uploaded file exceeds the upload_max_filesize directive in php.ini';
        case UPLOAD_ERR_FORM_SIZE:
            return 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form';
        case UPLOAD_ERR_PARTIAL:
            return 'The uploaded file was only partially uploaded';
        case UPLOAD_ERR_NO_FILE:
            return 'No file was uploaded';
        case UPLOAD_ERR_NO_TMP_DIR:
            return 'Missing a temporary folder';
        case UPLOAD_ERR_CANT_WRITE:
            return 'Failed to write file to disk';
        case UPLOAD_ERR_EXTENSION:
            return 'File upload stopped by extension';
        default:
            return 'Unknown upload error';
    }
}
?>
</body>
</html> 
```

我的问题是这段代码正在保存图像的完整大小。我想在上传到数据库之前调整图像大小。我该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:17:00.500

首先，您必须通过[imagecreatefromjpeg($string path to file)](http://cz2.php.net/manual/en/function.imagecreatefromjpeg.php)从文件创建位图，而不是通过[ImageCreateTrueColor($tmbWs,$tmbHs); 来创建空位图；](http://cz2.php.net/manual/en/function.imagecreatetruecolor.php)，之后使用[ImageCopyResampled()](http://cz2.php.net/manual/en/function.imagecopyresampled.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:18:35.860

在现代浏览器中，您可以使用 File API 和 html5 画布。

```
var file = YOUR_FILE,
fileType = file.type,
reader = new FileReader();

reader.onloadend = function() {
var image = new Image();
image.src = reader.result;

image.onload = function() {

    imageWidth = image.width,
    imageHeight = image.height;

    //calculate new width and height however you want
    // var newWidth, newHeight;
    // ...

    var canvas = document.createElement('canvas');
    canvas.width = newWidth;
    canvas.height = newHeight;

    var ctx = canvas.getContext("2d");
    ctx.drawImage(this, 0, 0, newWidth, newHeight);

    // get the resized file
    var finalFile = canvas.toDataURL(fileType);
  }
}

reader.readAsDataURL(file); 
```

# c# - SharpDX 中的动态顶点缓冲区

> ID：12034956
> 
> 赞同：2
> 
> 时间：2012-08-20T09:12:00.733
> 
> 标签：c#, c#-4.0, dynamic, sharpdx, vertex-buffer

我在弄清楚如何使用 SharpDX 设置动态 VertexBuffer 和 IndexBuffer 时遇到很多问题。

我必须在用户在屏幕上按下的任何地方生成三角形。

我想我必须设置一个转换函数，将我的屏幕坐标转换为投影坐标。

但我从来没有走到这一步……

我想为 10000 个顶点设置一个带有空间的缓冲区。

```
layout = new InputLayout(d3dDevice, vertexShaderByteCode, new[]
{
    new SharpDX.Direct3D11.InputElement("POSITION", 0, Format.R32G32B32A32_Float, 0, 0),
    new SharpDX.Direct3D11.InputElement("COLOR", 0, Format.R32G32B32A32_Float, 16, 0)
});

vb = Buffer.Create(d3dDevice, BindFlags.VertexBuffer, stream, 10000, ResourceUsage.Dynamic, CpuAccessFlags.Write);

vertexBufferBinding = new VertexBufferBinding(vb, Utilities.SizeOf<Vector4>() * 2, 0); 
```

每次我必须使用以下方法添加新三角形时，我都想更新该缓冲区：

```
d3dDevice.ImmediateContext.UpdateSubresource(updateVB, vb); 
```

updateVB 是要添加的新三角形。

渲染的工作方式如下：

```
// Prepare matrices
var view = Matrix.LookAtLH(new Vector3(0, 0, -5), new Vector3(0, 0, 0), Vector3.UnitY);
var proj = Matrix.PerspectiveFovLH((float)Math.PI / 4.0f, width / (float)height, 0.1f, 100.0f);
var viewProj = Matrix.Multiply(view, proj);

// Set targets (This is mandatory in the loop)
d3dContext.OutputMerger.SetTargets(render.DepthStencilView, render.RenderTargetView);

// Clear the views
d3dContext.ClearDepthStencilView(render.DepthStencilView, DepthStencilClearFlags.Depth, 1.0f, 0);

d3dContext.ClearRenderTargetView(render.RenderTargetView, Colors.Black);

// Calculate WorldViewProj
var worldViewProj = Matrix.Scaling(1f) * viewProj;
worldViewProj.Transpose();

// Setup the pipeline
d3dContext.InputAssembler.SetVertexBuffers(0, vertexBufferBinding);
d3dContext.InputAssembler.InputLayout = layout;
d3dContext.InputAssembler.PrimitiveTopology = PrimitiveTopology.TriangleList;

d3dContext.VertexShader.Set(vertexShader);
d3dContext.PixelShader.Set(pixelShader);

d3dContext.Draw(vertexCount, 0); 
```

我是 DirectX 的新手，网上的 DirectX9 教程对我使用 DirectX11.1 并没有很好的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:41:31.277

```
vb = Buffer.Create(d3dDevice, BindFlags.VertexBuffer, stream, 10000, ResourceUsage.Dynamic, CpuAccessFlags.Write); 
```

错了，因为你想要 10000 个顶点，但分配 10000 个字节，所以应该是：

```
 10000 * sizeof(Vector4) * 2 
```

根据您的输入布局。

另外要写入缓冲区，您应该查看 context.MapSubresource 。

# .net - 共享数据库的 Windows 窗体的最佳设计？

> ID：12034957
> 
> 赞同：2
> 
> 时间：2012-08-20T09:12:04.227
> 
> 标签：.net, sql, winforms, network-programming

我计划开发一个 Windows 窗体应用程序（或可能是 WPF），它可以安装/分发在一个网络上的多台计算机上。

这些应用程序将访问它们之间的一个 SQL 数据库。

这种解决方案的典型方法是什么？

以下是我到目前为止提出的内容：

*   所有人都在访问 Web 托管的 SQL 数据库
*   每次安装都附带安装数据库的选项（只有第一个需要这个），安装为用户提供了数据库的 IP，然后网络上的所有其他应用程序都可以引用这个数据库

我不是在征求意见，因为我知道这违反了 SO 规则，我在问实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:51:53.213

考虑在您的网络中托管的 Web 服务来执行所有数据库访问（调用）。这真正将您的数据库与客户端分开。客户端的 app.config 将保存服务的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:41:23.310

“网络托管”数据库不是一个好主意。如果您的应用程序将在局域网内的一组计算机上运行，​​那么您可以使用的最佳方法是在该网络内设置 SQL Sever。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:14:53.030

通常，当多个客户端需要访问同一个数据库时，网络中有一个专用的数据库服务器将托管数据库。这将是*唯一*托管数据库的地方；客户没有自己的副本。

> [**旁注：**在上面，我没有考虑数据库分布在多台服务器上的情况。这通常仅在数据库变得非常大或高可用性非常重要时才需要。在这种情况下，一个数据库可能会在不同地理位置的不同数据库服务器上完全*复制，或者可以使用一种称为**分片*的技术将其拆分为更小的数据库，每个数据库只有部分数据。（我认为分发数据库还有其他原因或技术，但如前所述，我们暂时不考虑这些。）]

每个客户都有自己的数据库副本听起来是个坏主意，因为您必须开始考虑以下问题：

*   是否需要定期同步/合并各个副本，以便在其他客户端下线时每个客户端都有完整的数据；

*   当不同的数据库包含相互矛盾的信息时会发生什么；

*   如何保护驻留在数据库中的敏感数据，例如用户密码。这一直是个问题，但是当每个客户端都可以直接访问本地数据库文件时就变得更加困难了；在中央数据库服务器上保护此类数据更容易，例如通过将其“隐藏”在服务外观后面。

因此，将您的数据库放在中央数据库服务器上，并让您的客户端连接到它；直接到数据库，或者通过（可能是安全的）SOAP/REST 服务。

# sql - ADODB.Fields 错误 '800a0cc1' 在集合中找不到项目

> ID：12034959
> 
> 赞同：6
> 
> 时间：2012-08-20T09:12:10.107
> 
> 标签：sql, asp-classic, ms-access-2007

我需要使用我已成功完成多次的查询技术从我的数据库中创建一个带有查询数据的选择框。但是，今天当我创建新的选择框时，页面一直告诉我有错误“ADODB.Fields error '800a0cc1' Item can be found in the collection ....”。

起初我以为是我的 SQL 查询导致了这个错误，但是我已经在 ACCES 上测试了它，它可以产生我预期的输出。所以现在我被困住了..我不知道我的编码发生了什么。

所以请帮我解决这个问题。。谢谢。下面是我的代码

```
user_id = 1
client_id = 7
response.Write "user_id = " & user_id

Dim rsClient
set rsClient = Server.CreateObject("ADODB.Recordset")
rsClient.ActiveConnection = Conn_string
rsClient.Source ="SELECT tbl_asgnClient.* , tbl_client.* FROM tbl_asgnClient INNER JOIN tbl_client ON tbl_asgnClient.client_id = tbl_client.client_id WHERE tbl_asgnClient.user_id =" & user_id & ""
rsClient.CursorType = 0
rsClient.CursorLocation = 3
rsClient.LockType = 3
rsClient.Open()
rsClient.PageSize = 20
%>
<html>
<body>
<select name = "client_id" onChange="showActivity(this.value)">
    <option selected>select client</option>
<%
        if rsClient.eof then 
            call displayNotFoundRecord
        Else
            Do Until  rsClient.Eof
%>                                                          
        <option  value="<%=rsClient.fields.item("client_id")%>"><%=rsClient.fields.item("client_id")%></option>                                                          
<%      
                rsClient.movenext
                Loop
        End if                                              
%>
  </select> 
```

我可以确保除了 SQL 之外没有其他东西会导致此错误。因为我尝试使用以下查询更改它 SQL 并且它工作得很好。

```
rsClient.Source ="SELECT tbl_asgnClient.* FROM tbl_asgnClient WHERE tbl_asgnClient.user_id =" & user_id & " " 
```

或这个 ...

```
rsClient.Source ="SELECT tbl_client.* FROM tbl_client  " 
```

我还确保我当前使用的一次能够在 MS ACCESS 中产生输出。所以请帮帮我..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T09:15:51.623

您的 SQL 有两个同名的列 - 虽然值相同，但 ADO 不知道您想要哪个字段

# java - java中的'&'和'&&'有什么区别

> ID：12034965
> 
> 赞同：0
> 
> 时间：2012-08-20T09:12:36.930
> 
> 标签：java

> **可能重复：**
> [& vs && 和 | 与 ||](https://stackoverflow.com/questions/4014535/vs-and-vs)
> [在哪些情况下最好使用无条件 AND（& 而不是 &&）](https://stackoverflow.com/questions/11411907/what-are-the-cases-in-which-it-is-better-to-use-unconditional-and-instead-of)

在检查简单的 AND 条件时，我可以使用 '&' 和 '&&'。它适用于 '&' 和 '&&'。这两者有什么区别吗。

示例代码：

```
if(sample!=null & sample.size())
if(sample!=null && sample.size() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:14:25.337

第一个版本 (&) 总是评估两个参数。第二个版本 (&&) 仅在第一个参数被评估为 TRUE 时才评估第二个参数。

同样适用于 OR 运算符：有 | 和||。(||) 仅当第一个参数已被评估为 FALSE 时才评估第二个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:14:01.807

第一个表达式检查双方，第二个表达式仅在第一个为真时检查第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:14:13.957

它只用一个单数 & 来评估左边和右边，即使最后一面是假的。

有关详细信息，请参阅下面的问题...

[什么时候不应该使用 Java 快捷操作符 &](https://stackoverflow.com/questions/11135715/when-should-i-not-use-the-java-shortcut-operator)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T09:14:28.630

```
'&' for bit wise 'AND'
'&&' is for Logical 'AND' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T09:15:12.140

```
if(sample!=null & sample.size()) 
```

在这里，如果第一个条件不满足，那么它也会检查下一个条件。

```
if(sample!=null && sample.size()) 
```

在这里，如果第一个条件不满足，那么它也会`not`检查下一个条件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T09:15:16.617

&& 是一个短路运算符，这意味着如果示例在您的示例中为空，它将停止并且不评估第二个条件。

另一方面， & 不是短路的，即使 sample 为空，也会评估 sample.size() 。当然在这种情况下它会抛出`NullPointerException`，但在短路情况下它不会。

# ios - iOS、JSON-RPC 和 NSJSONSerialization：处理空值

> ID：12034967
> 
> 赞同：2
> 
> 时间：2012-08-20T09:12:40.637
> 
> 标签：ios, cocoa-touch, null, json-rpc, nsjsonserialization

我正在使用 JSON-RPC 在 iOS 应用程序和服务器之间进行通信。服务器的一些返回值是可选的。

考虑到我正在使用的技术组合，返回这些 null 值（如 {"telephone": null} 还是完全省略响应中的 "telephone" 元素）更好？

进一步解释我的要求：

它看起来不像 JSON-RPC 规范指定与方法结果有很大关系（如果我错了，请纠正我）并且显然不发送负载 null 元素会提高性能并在一定程度上减少带宽。不过，我最感兴趣的是从 iOS NSJSONSerialization 角度来看的最佳方法。检查 NSDictionary 中是否存在键或现有键是否具有空值是否更容易/更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T12:11:18.213

我正在使用一种完全不同的技术，肯定有点不正统，因为我的代码正在处理巨大的数据集，我真的很讨厌必须对每个值进行 NSNull 测试。我所做的是NSNull的子类，所以在处理数据时，我可以测试它的数值是否为0，它的字符串长度是否为0等。

```
@implementation NSNull (JSON)

- (NSUInteger)length { return 0; }

- (NSInteger)integerValue { return 0; };

- (CGFloat)floatValue { return 0; };

- (NSString *)description { return @"0(null)"; } // so I know it was NSNull in log messages

- (NSArray *)componentsSeparatedByString:(NSString *)separator { return @[]; }

- (id)objectForKey:(id)key { return nil; }

- (BOOL)boolValue { return NO; }

@end 
```

编辑：我在电子商务运输应用程序中使用了完全相同的代码。数十个不同的 API 返回数以千计的对象 - 必须查看每个项目以查看它`[NSNull null]`是否是一场噩梦。我试图编写一个例程来修饰结果，它会递归地查看字典和数组并重建对象，但它太复杂了。

无论如何，我从来没有遇到过这个解决方案的问题。显然是YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:28:43.803

首先 {"telephone": "null"} 不是空值。有引号，所以实际上电话属性具有带有文本“null”的字符串值。服务器需要发送 {"telephone": null} - 不带引号。我会列出您的应用程序响应所需的所有相关属性，如果没有值，则将 null 作为值。然后，如果键的值为 NSNull，您可以轻松地检查从 NSJSONSerialization 获得的 NSDictionary。

```
if ([dictionaryValue isKindOfClass:[NSNull class]])
    myThink.myProperty = nil; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:49:18.343

如果有人感兴趣，我已经将检查打包在一个函数中。

```
-(id)checkNull:(id)object{
    if([object isKindOfClass:[NSNull class]])return nil;
    else return object;
} 
```

# selenium - InternetExplorerDriver 缩放级别错误

> ID：12034969
> 
> 赞同：19
> 
> 时间：2012-08-20T09:12:45.793
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在尝试针对 IE8 运行测试，但遇到了一个奇怪的问题：

1.  创建 webdriver 实例时（driver = Selenium::WebDriver.for :ie），IE 启动，WebDriver 抛出异常：

    “启动 Internet Explorer 时出现意外错误。浏览器缩放级别设置为 0%”

2.  IE 似乎显示无法连接到 IE 驱动程序服务器，但如果我手动刷新浏览器，它就可以正常连接。

    我在网上查了一下，似乎只有另外两个人报告了这一点。一种可能的解决方案是确保所有区域都具有相同的“保护模式”设置，就像它们所做的那样。

    我的环境是带有 IE Driver Server v2.25.3 的 Windows 7 和 IE8，我使用的是 Ruby 绑定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-21T12:58:35.337

根据 Jim Evans（Selenium 开发人员之一）在[WebDriver User Group 的这个线程中](https://groups.google.com/forum/?fromgroups=#!topic/webdriver/pZuj9uU1Evc)给出的答案，下面的代码应该可以解决您的问题。

```
DesiredCapabilities caps = DesiredCapabilities.internetExplorer();
caps.setCapability("ignoreZoomSetting", true);
driver = new InternetExplorerDriver(caps); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-10T07:18:15.510

由于该问题没有用特定语言标记，并且由于[JacekM 的答案](https://stackoverflow.com/a/12055372/38055)在 C# 中对我不起作用（鉴于大小写，我假设他的答案适用于 Java ......）。我将C#的相应解决方案放在这里：

```
var service = InternetExplorerDriverService.CreateDefaultService(@"Path\To\Driver");
// properties on the service can be used to e.g. hide the command prompt

var options = new InternetExplorerOptions
{
    IgnoreZoomLevel = true
};
var ie = new InternetExplorerDriver(service, options); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-11-04T11:55:50.010

[![将浏览器缩放调整为 100%](../Images/e14e034cd8ffecddbff672a7dc850674.png)](https://i.stack.imgur.com/boAFF.png) 要快速修复它，请将浏览器缩放调整为 100%。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-25T09:49:28.927

## 最稳健的方法

*在开始使用 Internet Explorer 和 Selenium Webdriver 之前请考虑这两个重要规则。*

1.  缩放级别：应设置为默认值 (100%) 和
2.  安全区域设置：对所有人都应该相同。应根据您的组织权限设置安全设置。

**这个怎么设置？**

只需转到 Internet Explorer，手动完成这两项工作。而已。没有秘密。

**通过您的代码执行此操作。**

**方法一：**

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();

capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, true);

System.setProperty("webdriver.ie.driver","D:\\IEDriverServer_Win32_2.33.0\\IEDriverServer.exe");

WebDriver driver= new InternetExplorerDriver(capabilities);

driver.get(baseURl);

//Identify your elements and go ahead testing... 
```

这绝对**不会显示任何错误，并且浏览器将打开**并导航到 URL。

但是这**不会识别任何元素**，因此您无法继续。

为什么？因为我们只是简单地抑制了错误并要求 IE 打开并获取该 URL。然而**，只有当浏览器缩放为 100% 时，Selenium 才会识别元素。默认**. 所以最终的代码是

**方法2 稳健且全面的证明方式：**

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();

capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, true);

System.setProperty("webdriver.ie.driver","D:\\IEDriverServer_Win32_2.33.0\\IEDriverServer.exe");

WebDriver driver= new InternetExplorerDriver(capabilities);

driver.get(baseURl);

driver.findElement(By.tagName("html")).sendKeys(Keys.chord(Keys.CONTROL,"0"));
//This is to set the zoom to default value
//Identify your elements and go ahead testing... 
```

希望这可以帮助。如果需要更多信息，请告诉我。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-09-30T06:17:53.403

虽然设置 IgnoreZoomLevel 属性允许您无错误地打开浏览器，但测试不会发现缩放级别不是 100% 的元素。

根据您的系统 DPI 设置，发送 Ctrl+0 也不会总是得到预期的结果。如果您选择了中等 (120 dpi) 或较大 (144 dpi)（Windows 7 设置），Ctrl+0 会将缩放设置为 125% 或 150%。

我发现的一种解决方法是根据 DPI 设置通过在注册表中打开 IE 之前编辑设置来设置缩放级别。这不需要管理员权限，因为所有内容都位于 HKEY_CURRENT_USER 下。

这是我想出的小助手类。（C＃）

```
using Microsoft.Win32;

namespace WebAutomation.Helper
{
    public static class InternetExplorerHelper
    {
        private static int m_PreviousZoomFactor = 0;

        public static void SetZoom100()
        {
            // Get DPI setting.
            RegistryKey dpiRegistryKey = Registry.CurrentUser.OpenSubKey("Control Panel\\Desktop\\WindowMetrics");
            int dpi = (int)dpiRegistryKey.GetValue("AppliedDPI");
            // 96 DPI / Smaller / 100%
            int zoomFactor100Percent = 100000;
            switch (dpi)
            {
                case 120: // Medium / 125%
                    zoomFactor100Percent = 80000;
                    break;
                case 144: // Larger / 150%
                    zoomFactor100Percent = 66667;
                    break;
            }
            // Get IE zoom.
            RegistryKey zoomRegistryKey = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Internet Explorer\\Zoom", true);
            int currentZoomFactor = (int)zoomRegistryKey.GetValue("ZoomFactor");
            if (currentZoomFactor != zoomFactor100Percent)
            {
                // Set IE zoom and remember the previous value.
                zoomRegistryKey.SetValue("ZoomFactor", zoomFactor100Percent, RegistryValueKind.DWord);
                m_PreviousZoomFactor = currentZoomFactor;
            }
        }

        public static void ResetZoom()
        {
            if (m_PreviousZoomFactor > 0)
            {
                // Reapply the previous value.
                RegistryKey zoomRegistryKey = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Internet Explorer\\Zoom", true);
                zoomRegistryKey.SetValue("ZoomFactor", m_PreviousZoomFactor, RegistryValueKind.DWord);
            }
        }
    }
} 
```

我想出了比较注册表中不同系统 DPI 设置下的 ZoomFactor 值和 IE 缩放设置为 100% 的值。在较新的 Windows 版本中有超过 3 个 DPI 设置，因此如果需要，您需要扩展类。

您也可以修改它以计算您想要的任何缩放级别，但这与我无关。

我只是`InternetExplorerHelper.SetZoom100();`在打开 IE 之前和`InternetExplorerHelper.ResetZoom()`关闭它之后打电话。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-18T09:40:37.390

```
InternetExplorerOptions options = new InternetExplorerOptions();
options.ignoreZoomSettings() ;
driver = new RemoteWebDriver(new URL("http://localhost:8888/wd/hub"),options); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-13T21:19:39.307

这基本上发生在您的浏览器设置为 100% 以外的某个缩放级别时（当您在网页上滚动鼠标并按下 Ctrl 键时发生。）。您可以通过指定上面提到的代码让 selenium 忽略浏览器缩放级别来解决此问题，或者您可以简单地打开浏览器并通过转到设置或使用快捷键 Ctrl+0 将缩放级别重置为 100%（这适用于IE11 和铬）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-12-08T20:13:36.907

谢谢你的帖子，这真的对我有用。用于修复缩放级别异常：

```
InternetExplorerOptions options = new InternetExplorerOptions {  IgnoreZoomLevel= true };
driver = new InternetExplorerDriver(@"C:\seleniumreferences\IEDriverServer32", options); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-03T00:39:59.807

或转到 Internet Explorer 选项 > 高级 选中“重置新窗口和标签的缩放级别”框。

单击链接查看图像 ---> [Internet Explorer 选项 > 高级](https://i.stack.imgur.com/grulv.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-28T11:02:28.693

正如[Tomas Lycken 的回答](https://stackoverflow.com/a/25759454)所说，没有指定语言，所以我将在**Python**中分享我的解决方案：

```
capabilities = DesiredCapabilities.INTERNETEXPLORER
capabilities['ignoreZoomSetting'] = True
driver = webdriver.Ie(capabilities=capabilities) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-20T19:50:19.470

```
InternetExplorerOptions ieOptions = new InternetExplorerOptions();
ieOptions.IgnoreZoomLevel = true;
driver = new InternetExplorerDriver(driverFilePath, ieOptions); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-26T03:06:30.053

使用 Java 的工作代码

```
InternetExplorerOptions capabilities= new InternetExplorerOptions();
capabilities.setCapability(InternetExplorerDriver.IGNORE_ZOOM_SETTING, true);
System.setProperty("webdriver.ie.driver", Constant.drivers + "\\IEDriverServer.exe");
            driver = new InternetExplorerDriver(capabilities);
            driver.manage().window().maximize(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-10-13T05:47:48.283

将 IgnoreZoomLevel 属性设置为 true 并将其作为 InternetExplorerOptions 传递给驱动程序。

```
InternetExplorerOptions options = new InternetExplorerOptions();
options.IgnoreZoomLevel = true;
IWebDriver driver = new InternetExplorerDriver(IEDriverLocation,options); 
```

# c++ - 堆栈展开调用析构函数

> ID：12034970
> 
> 赞同：0
> 
> 时间：2012-08-20T09:13:03.757
> 
> 标签：c++

当一些局部变量超出范围时，就会发生堆栈展开。

究竟如何调用析构函数？

我想知道编译器能够调用堆栈上对象的析构函数而不是堆上对象的析构函数的机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:17:18.817

析构函数调用由编译器在生成的代码中发出。

例如，

```
void foo() {
    A a;
} 
```

编译为：

```
void foo() {
    A::A(<stack-address-of-a>);
    A::~A(<stack-address-of-a>);
} 
```

当函数提前返回时，它会稍微复杂一些；考虑

```
void foo(int i) {
    A a;
    if (i) return;
    B b;
} 
```

就像

```
void foo() {
    A::A(<stack-address-of-a>);
    B::B(<stack-address-of-b>);
    if (i) goto destroy_a;
    B::~B(<stack-address-of-b>);
destroy_a:
    A::~A(<stack-address-of-a>);
} 
```

异常又有点复杂了；通常的解决方案涉及将必要的析构函数调用与调用堆栈相关联的异常区域和范围。有关概述，请参阅[LLVM 中的异常处理。](http://llvm.org/docs/ExceptionHandling.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:17:27.357

由于它是一个*堆栈*（FILO），因此以相反的顺序调用析构函数。所以最后创建的对象将首先被销毁。

> 我想知道编译器能够调用堆栈上对象的析构函数的机制

好吧，如果它将某些东西放入堆栈，它应该知道如何将其从堆栈中弹出，这似乎是有道理的……调用是在编译过程中添加的。

# java - 如何使用 Java-Thrift API 搜索 Cassandra 中的索引列

> ID：12034972
> 
> 赞同：1
> 
> 时间：2012-08-20T09:13:09.980
> 
> 标签：java, cassandra, thrift, hector, kundera

我在 Cassandra 中有一个列族，在一个特定的列上，我定义了二级索引。

我想获取此特定列值的行键。如何使用普通的 Thrift API for Java 来实现这一点？在 Pelops 中，我通过创建 IndexClause 并调用：

```
Map <Bytes, List<Column>> qResults = selector.getIndexedColumns(tableName, 
                                                               ix,    
                                                               slicePredicate,
                                                               consistencyLevel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T04:34:41.997

请看一下：

[http://cassandra-user-incubator-apache-org.3065146.n2.nabble.com/Row-iteration-over-indexed-clause-td7368274.html](http://cassandra-user-incubator-apache-org.3065146.n2.nabble.com/Row-iteration-over-indexed-clause-td7368274.html)

# javascript - DataTables - 使用格式化值对表进行排序

> ID：12034974
> 
> 赞同：0
> 
> 时间：2012-08-20T09:13:20.793
> 
> 标签：javascript, jquery, datatables

如何使用格式化值对 DataTables 进行排序？

我需要格式化表格中的值，但排序不起作用。如何在单元格中使用格式化值？

```
<table>
    <tr>
        <td data-value="10000.45">10,000.45</td>
        <td data-value="458">458.00</td>
    </tr>
</table>

$('table').dataTable(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:18:07.520

你试试`aoColumns`with `sType=numeric`？ [这个](http://datatables.net/usage/columns)可能对你有帮助。

# sql - ddmmyyyy 到 SQL 中的 sql 日期时间

> ID：12034978
> 
> 赞同：5
> 
> 时间：2012-08-20T09:13:29.153
> 
> 标签：sql, sql-server

我需要将一个`nvarchar`值转换为`datetime`T-SQL 中的值。该值采用`ddmmyyyy`格式，例如`23072009`

我需要`datetime`在 T-SQL 中转换。

我试过

```
select convert(datetime, '23072009', 103) 
```

但它正在抛出错误。

> “将 nvarchar 数据类型转换为 datetime 数据类型导致值超出范围。”

任何的想法

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:17:51.493

将您的格式重建为`yyyymmdd`.

```
declare @D varchar(8)
set @D = '23072009'

select cast(right(@D, 4)+substring(@D, 3, 2)+left(@D, 2) as datetime) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T08:56:00.650

样式 103 将接受 dd/mm/yyyy 格式的字符串。所以你的代码应该是

```
declare @date varchar(8)
set @date='23072009'
select convert(datetime,stuff(stuff(@date,5,0,'/'),3,0,'/')  , 103) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:25:28.820

您可以像这样定义自定义函数：

```
CREATE FUNCTION [dbo].[GetCustomDate] (@customDateString NVARCHAR(MAX)) 
RETURNS DATETIME
AS
BEGIN

    RETURN CONVERT(DATETIME, RIGHT(@customDateString, 4) + RIGHT(LEFT(@customDateString, 4), 2) + LEFT(@customDateString, 2))

END
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-05T08:42:19.717

在 SQL Server 中将 VARCHAR (dd-mm-yyyy) 更改为日期 (yyyy-mm-dd)。

```
DECLARE @VarDate VARCHAR(10)
SET @VarDate  = '22-02-1994'

SELECT CONVERT(DATETIME, CONVERT(VARCHAR, CONVERT(DATE, @VarDate, 103), 102)) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-20T09:17:26.420

您需要转换一个字符串而不是一个 int。放一些引号：

```
convert(datetime, '23072009', 103) 
```

**并且 103 得到像 'dd/mm/yyyy' 而不是 'ddmmyyyy' 这样的字符串。**

# c# - 带有空格元素的 XML 类型的 SQLParameter，丢失了空格？

> ID：12034982
> 
> 赞同：2
> 
> 时间：2012-08-20T09:13:49.873
> 
> 标签：c#, xml, tsql, ado.net, sqlparameter

当我尝试使用一个 SQLParameter 存储到 XML 类型的列中时，我遇到了 SQLParameter 问题。我正在创建 SqlDbType.Xml 的参数。似乎任何只有空白的 XML 元素都被转换为封闭元素。

这是相同的行为

```
SELECT CAST('<Cust><Fname>Andrew</Fname><Lname> </Lname></Cust>' as XML) 
VS 
SELECT CONVERT(xml, '<Cust><Fname>Andrew</Fname><Lname> </Lname></Cust>', 1) 
```

我很惊讶地看到这是 SQLParameter 中的默认行为。有没有办法让 SqlDbType.Xml 的 SQLParameter 关心它的空白？在黑暗中拍摄时，我尝试将精度设置为 1，但这并没有帮助...

下面的代码在数据库中以这个结尾

```
<Cust><Fname>Andrew</Fname><Lname /></Cust> 
```

如您所见，它去除了空白 XML 元素

```
// CREATE TABLE T(c1 int primary key, c2 xml)
static void Main(string[] args) {

using (var Connection = new System.Data.SqlClient.SqlConnection("Data Source=localhost;Initial Catalog=Test;Integrated Security=SSPI;"))
{
    Connection.Open();

    using (var Command = Connection.CreateCommand())
    {
      Command.CommandText = "INSERT INTO T VALUES (1, @s)";

      var XmlParameter = Command.Parameters.Add("s", System.Data.SqlDbType.Xml);
      XmlParameter.Value = "<Cust><Fname>Andrew</Fname><Lname>  </Lname></Cust>";

      Command.ExecuteNonQuery();
    }

    Connection.Close();
} 
```

有谁知道解决它的方法，即不将参数解析为二进制并将其转换为插入/更新命令的一部分？

```
Command.CommandText = "INSERT INTO T VALUES (1, CONVERT(xml, @s, 1))"; 
```

任何帮助或反馈将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:33:08.230

如果您从外部源接收 XML 并且它只是从元素开始，您可以在字符串前面加上

```
<?xml version="1.0"?>
<!DOCTYPE Cust [
<!ATTLIST Cust xml:space (preserve) #FIXED 'preserve'>
]> 
```

这应该使整个文档（Cust 根节点向下）保留空白。如果您只对特定字段感兴趣，而不是 ATTLIST 说 Cust，为您想要保留空白的每个元素添加一个新的 ATTLIST。例如

```
<!ATTLIST Fname xml:space (preserve) #FIXED 'preserve'>
<!ATTLIST Lname xml:space (preserve) #FIXED 'preserve'> 
```

同样，我没有尝试过使用 SQL 服务器（我只是无权访问），但是 IE 和 Chrome 中的 XML 处理器按预期将 xml:space="preserve" 添加到文档中，正如您所说的那样上面给了你你正在寻找的行为。这种方法无需对 XML 进行深度操作，您只需在文档的开头添加一些处理指令即可。

# android - 应用程序无法使用互联网连接

> ID：12034986
> 
> 赞同：0
> 
> 时间：2012-08-20T09:14:06.127
> 
> 标签：android

我在清单文件中提供了 INTERNET 权限。我的应用程序在正常的互联网连接中工作。但它不适用于安全的 Wi-Fi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:22:15.317

在 Android Manifest 文件中添加 Wi-Fi 相关权限.. 我希望它可以工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:06:35.260

在 Android Manifest 文件中添加 Wi-Fi 权限

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:33:49.923

安全访问是指 HTTPS / WPA2 PSK。

Internet 权限足以进行 WIFI 安全访问。通过 WiFI 检查与服务器的连接，通过其他设备（例如您的笔记本电脑）检查。当您的笔记本电脑通过 WiFi 连接时，请尝试在浏览器中点击 URL。

如果这在您的清单文件中，

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

它应该是你的根标签的子元素，而不是你的应用程序元素

# data-warehouse - 项目的大型数据集

> ID：12034987
> 
> 赞同：2
> 
> 时间：2012-08-20T09:14:10.453
> 
> 标签：data-warehouse, business-intelligence

不确定 Stack Overflow 是否适合它，但由于这里有很多 DW 开发人员......

我要为毕业项目建立一个数据仓库，为此我需要一个好的数据集，好的意思是坏的:) 我需要一个需要大量转换的数据集，包含在许多文件中（如果可能的话，各种或奇怪的格式）。它还应该有很多列，因此可以在其上构建一个中等大小的立方体。互联网上可用的大多数数据集都太简单了。任何人都可以推荐一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:54:58.517

也许您可以使用美国人口普查数据？有很多不同类型的数据可用。也许专注于特定的状态？您的多维数据集可以允许在不同的政治或地理区域或不同的人口统计数据中汇总。

[http://www.census.gov/population/www/cen2010/glance/](http://www.census.gov/population/www/cen2010/glance/)

似乎尚未提供所有数据，因此您始终可以使用 2000 年的人口普查。

# drupal - 如何在 drupal 7 中禁用 CreateNew Account 选项卡

> ID：12034992
> 
> 赞同：0
> 
> 时间：2012-08-20T09:14:18.810
> 
> 标签：drupal, user-registration

如何在 Drupal 7 中禁用创建新帐户选项卡。我使用 drupal 用户名和密码表单创建了一个新的替代注册表单，但我不希望显示创建新帐户选项卡。我如何在 drupal 7 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:03:17.990

[这已在此处得到回答](https://stackoverflow.com/questions/6352381/how-to-remove-user-register-login-in-drupal) 您可以从 drupal 的 7 backoffice`admin/config/people/accounts`部分进行编程技能。然后在`"Registration and cancellation > Who can register accounts?`“部分，选择`Administrators only`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:01:00.423

你可能想要 hook_menu_alter：[http ://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu_alter/7](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu_alter/7)

您可以将权限设置为 false 或删除整个菜单条目。或者，由于您自己构建，您可以将回调指向您自己的页面。