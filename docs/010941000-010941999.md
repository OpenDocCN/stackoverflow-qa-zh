# StackOverflow 问答 10941000-10941999

# visual-studio-2010 - 我想在 Visual Studio 中“复制网站”到远程站点上的子文件夹

> ID：10941001
> 
> 赞同：0
> 
> 时间：2012-06-07T22:57:54.203
> 
> 标签：visual-studio-2010, deployment

在 Visual Studio 中试用此“复制网站”功能。

在我的远程站点上，实际的 IIS 应用程序位于根目录的子文件夹中。

当我进入复制网站时，它只允许我将网站直接复制到远程站点的根目录中。

有没有办法告诉它将网站复制到远程站点上的这个子文件夹中？如果我进入远程站点上的子文件夹，它会尝试在本地找到相同的子文件夹并给我“此文件夹不存在”消息。

这似乎应该是相当简单的功能，我很惊讶它并不明显。谢谢你的帮助！我非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:07:45.763

您可以在远程站点的 FTP 连接选项中指定要自动启动的子目录，然后它将允许您将网站复制到此目录中。

但是，这仅在我尝试过的 4 次中的 2 次有效。另外 2 次我收到“此文件夹不存在”（在本地计算机上）错误。不知道这是怎么回事。复制网站工具似乎有点不成熟？

编辑：啊，我明白了。这仅在您启动复制网站工具的新实例时才有效。如果您已经启动该工具并开始新连接，您仍然会收到“此文件夹不存在”消息。

# objective-c - 在视图中的不同位置随机生成动画

> ID：10941002
> 
> 赞同：1
> 
> 时间：2012-06-07T22:58:19.433
> 
> 标签：objective-c, ios, xcode, animation

您好，我是动画新手，最近才开始玩它。我想显示一个从小环到大环的圆圈（环），消失，然后重新执行该过程，除非在不同的位置。

为此，我为同一个环创建了 6 个不同的图像尺寸。以下代码是我如何完成的，但我不知道如何重复该过程（AkA 它运行该方法但环的位置保持不变，我需要循环随机数生成器但不知道何时检查图像是否已停止）。如果这不是解决此问题的正确方法，请告诉我！PS 当它到达最大的舞台时，戒指看起来很丑，不知道为什么。

谢谢

```
-(void) doWork
{

NSInteger number;
NSInteger number2;
NSLog (@"here");

number = (arc4random()%100)+1; 
number2 = (arc4random()%100)+1; 
 NSLog (@" hello numer1: %d", number);
 NSLog (@" hello numer2: %d", number2);

imageView = [[UIImageView alloc] initWithFrame:CGRectMake(number, number2, 135, 135)]; 

imageView.animationImages= [NSArray arrayWithObjects:
                            [UIImage imageNamed:@"smallestRing.png"],
                            [UIImage imageNamed:@"smallRing.png"], 
                            [UIImage imageNamed:@"mediumRing.png"],
                            [UIImage imageNamed:@"large2Ring.png"],
                            [UIImage imageNamed:@"largeRing.png"], nil]; 

imageView.animationDuration= 2.5;
imageView.animationRepeatCount= 0;
imageView.contentMode = UIViewContentModeScaleAspectFit;

[imageView startAnimating];
[self.view addSubview:imageView];

/*[NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(doWork) userInfo:nil repeats:YES];*/

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:12:05.907

如果调整大小（或其他变换，如旋转或过渡）是您需要的唯一动画，您可以使用方法 +animateWithDuration（您可以在[此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)找到描述）

它看起来像：

```
-(void) doWork
{

NSInteger number;
NSInteger number2;
NSLog (@"here");

number = (arc4random()%100)+1; 
number2 = (arc4random()%100)+1; 
 NSLog (@" hello numer1: %d", number);
 NSLog (@" hello numer2: %d", number2);

imageView = [[UIImageView alloc] initWithFrame:CGRectMake(number, number2, 135, 135)]; 

imageView.image = [UIImage imageNamed:@"largeRing.png"];
[self.view addSubview:imageView];

[self animate:imageView enlarge:YES];
}

-(void) animate:(UIImageView*)imageView enlarge:(BOOL)flag
{
if (flag) 
{
// then animating is starting
// and imageView will appear in random point of view
    int randomX = arc4random()%self.view.frame.size.width;
    int randomY = arc4random()%self.view.frame.size.height;
    imageView.center = CGPointMake(randomX, randomY);
}

double scale = flag ? 2 : 0.5;
[UIView animateWithDuration:5
         animations:^{ imageView.transform = CGAffineTransformMakeScale(scale,scale); }
         completion:^(BOOL finished){ [self animate:imageView: enlarge:!flag]; }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:28:23.177

可以查询 bool isAnimating 来判断 UIImageView 的动画是否结束

PS：可能它看起来很丑，因为

```
imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

尝试类似的东西

```
imageView.contentMode = UIViewContentModeCenter; 
```

# r - strptime $mon 的日期函数问题在 R 中不起作用

> ID：10941004
> 
> 赞同：3
> 
> 时间：2012-06-07T22:58:33.393
> 
> 标签：r, time

谁能解释一下这个......

```
>strptime("19300307", "%Y%m%d")
   "1930-03-07"
>unlist(strptime("19300307", "%Y%m%d"))
   sec   min  hour  mday   mon  year  wday  yday isdst 
    0     0     0     7     2    30     5    65     0 
```

突然间，我的 strptime 让我感到困惑……为什么 mon = 2 而不是 3？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:10:41.033

根据我的评论，如果您阅读`?DateTimeClasses`，您会看到对于 POSIXlt 我们有：

> 0-11：第一年之后的几个月。

# asp.net-mvc-4 - 如何在服务器上安装 ASP.NET MVC4 RC（2008 及以上）

> ID：10941011
> 
> 赞同：10
> 
> 时间：2012-06-07T22:59:04.410
> 
> 标签：asp.net-mvc-4

标题几乎概括了它。我希望能够将我的应用程序部署到我们的一台服务器上，是否有任何空间需要发生，我问的原因是使用部署工具的新部署说我有冲突的 dll，我确信从升级指南中正确引用。

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:32:40.127

这很简单：

1.  去[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

2.  单击绿色的“安装 ASP.NET MVC 4 RC”按钮下载并运行安装程序。

或者，您可以将它安装在您的开发机器上，然后在 VS 中右键单击您的项目并选择“添加可部署的依赖项...”以自动在您的项目中包含必要的程序集以进行部署（这将 bin 部署 MVC）。

另一种选择是手动将 MVC 程序集复制到服务器 GAC（复制使用“添加可部署依赖项...”时添加的所有程序集），这就是安装程序所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T17:00:52.467

此页面托管 MVC 4 的独立安装程序：http: [//www.microsoft.com/en-ca/download/confirmation.aspx?id=30683](http://www.microsoft.com/en-ca/download/confirmation.aspx?id=30683)

尽管页面上说了什么，但不需要在服务器上安装 Visual Studio。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T19:41:02.877

“添加可部署依赖项...”不再存在，因为 VS 现在始终包含依赖二进制文件...

[来源](http://samirvaidya.blogspot.dk/2013/02/deployable-dependencies-option-missing.html)

# mysql - 选择 MySql 表

> ID：10941013
> 
> 赞同：0
> 
> 时间：2012-06-07T22:59:20.757
> 
> 标签：mysql, variables

我有一种情况，我可以从 MYSQL 数据库中的多个表中进行选择。在任何给定时间，我只需要访问一张表。

我可以将表的名称放在一个变量中，然后在查询中设置它吗？这样当我想更改表时，我只需要更新一个变量？

我的想法是这样的：

代替：

```
$order = "SELECT * FROM 2FieldForm ORDER BY ID"; 
```

做这个：

```
$table = mysql_select_table("2FieldForm");              
$order = "SELECT * FROM $table ORDER BY ID"; 
```

现在我不确定它是否`mysql_select_table`有效，但我希望它能传达这个想法！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:02:24.097

SQL 只是一个字符串，因此将表名包含在变量中并使用执行查询`mysql_query()`

```
$table_name = "users";

$order = "SELECT * FROM `".$table_name."` ORDER BY `ID`;";

mysql_query($order) OR DIE(mysql_error()); 
```

请务必在表名和字段中添加引号，以确保数据库正确解释它。最后的分号不是必需的，但有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:02:31.533

```
$table = "2FieldForm";
$order = "SELECT * FROM `$table` ORDER BY ID"; 
```

# java - 强制转换为没有默认构造函数的类

> ID：10941014
> 
> 赞同：-2
> 
> 时间：2012-06-07T22:59:38.103
> 
> 标签：java, constructor

是否可以在 Java 中强制转换没有默认构造函数的对象？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:07:39.193

和其他演员完全一样。

强制转换不会创建新对象，它只会告诉编译器将引用视为给定类的对象。

所以你有了

```
 Object obj = new String("Hi");
 String k = obj; 
```

第二行是无效的，因为它将一个超类分配给一个更具体的引用，所以你必须告诉编译器它`obj`实际上*是*一个 String 的对象实例。

```
 String k = (String) obj; 
```

* * *

这是一个人为的例子，说明了没有默认构造函数的点：

```
public class Foo
{
  public Foo(int i) { ; }
}

public class Bar extends Foo
{
  public Bar(int i, String s) { super(i); }
}

final Foo foo = new Bar(42, "Arthur");
final Bar bar = (Bar) foo; 
```

# objective-c - 核心数据获取

> ID：10941024
> 
> 赞同：1
> 
> 时间：2012-06-07T23:00:56.933
> 
> 标签：objective-c, core-data

我花了很多时间寻找这个看似简单的问题的答案。

所以这些是我的解析方法：

```
-(void)ParseJSON {

    NSURL *URL=[[NSURL alloc]initWithString:@"http://www.foo24.com/kokos"];
    NSData* data = [NSData dataWithContentsOfURL:
                    URL];
    [self performSelectorOnMainThread:@selector(JSONtoArrays:)
                           withObject:data waitUntilDone:YES];
}
-(void)JSONtoArrays:(NSData *)responseData {

    NSError* error;
    NSDictionary* json = [NSJSONSerialization
                          JSONObjectWithData:responseData

                          options:kNilOptions
                          error:&error];

    NSMutableArray *fetchCustomersArray=[json objectForKey:@"Customers"];
    NSMutableArray *fetchOrdersArray=[json objectForKey:@"Orders"];

    [self setJSONCustomers:fetchCustomersArray];
    [self setJSONOrders:fetchOrdersArray];

} 
```

这是我从数据库中获取的方法：

```
-(void)fetchOrders{

    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;

    if (managedObjectContext == nil) 
    { 
        managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    }

    NSEntityDescription *orderEntity=[NSEntityDescription entityForName:@"OrderEntity" inManagedObjectContext:managedObjectContext];

    NSPredicate *NonDelivered =
    [NSPredicate predicateWithFormat:@"orderDelivered == NO"];

    //setup fetch request
    NSFetchRequest *request=[[NSFetchRequest alloc]init];
    [request setEntity:orderEntity];
    [request setPredicate:NonDelivered];

    //fetch
    NSError *error;
    NSMutableArray *FetchResultsArray=[[managedObjectContext executeFetchRequest:request error:&error]mutableCopy];

    [self setDbOrders:FetchResultsArray];
    [dbOrders addObjectsFromArray:JSONOrders];
    NSLog(@"%@",[[dbOrders objectAtIndex:0]valueForKey:@"orderName"]);
    [self addOrders:dbOrders];
} 
```

我想要做的是从核心数据中检索未交付的项目作为数组，然后获取新的解析数组，从数据库中删除所有条目，合并两个数组并将它们放回数据库中。我不知道是否有更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:42:17.690

> 不知道有没有更简单的方法

有。

假设来自互联网的数组包含您要添加到数据库的订单，只需遍历这些订单并将它们添加到数据库。

很简单，对吧？

# ruby-on-rails-3 - WickedPDF 缺少布局

> ID：10941028
> 
> 赞同：5
> 
> 时间：2012-06-07T23:02:00.507
> 
> 标签：ruby-on-rails-3, gem, wkhtmltopdf, wicked-pdf

我有一个这样的控制器：

```
def show
    @professor = Professor.find(params[:id])
    respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "file_name"
      end
    end
  end 
```

像这样的简单视图：

```
<p>Professor: <%= @professor.first_name %></p>
<p>Email: <%= @professor.email if @professor.email %></p> 
```

我也有一个布局'application.html.erb'；

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "Myapp" %></title>
    <meta name="description" content="">
    <meta name="author" content="">
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= yield(:head) %>
  </head>
  <body>
    <header class="navbar navbar-fixed-top">
      <nav class="navbar-inner">
        <div class="container">
          <%= render 'layouts/navigation' %>
        </div>
      </nav>
    </header>
    <div id="main" role="main">
      <div class="container">
        <div class="content">
           <div class="row">
            <div class="span12">
              <%= render 'layouts/messages' %>
              <%= yield %>
            </div>
          </div>
          <footer>
          </footer>
        </div>
      </div> <!--! end of .container -->
    </div> 
```

当我执行以下命令时：

```
bundle exec wkhtmltopdf 'http://local.myapp.com:3000/professors/2' - > test.pdf 
```

我得到了一个包含所有样式和布局的pdf。

但是，当我去时，`http://local.myapp.com:3000/professors/2.pdf`我收到一条错误消息：

```
Missing template professors/show with {:locale=>[:en], :formats=>[:pdf], :handlers=>[:erb, :builder, :coffee]} 
```

所以，然后我将我的控制器#show 操作更改为如下所示：

```
def show
    @professor = Professor.find(params[:id])
    respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "file_name",
    :template => 'professors/show.html.erb'
      end
    end
  end 
```

这有助于我渲染视图，但不幸的是它不会渲染样式和布局。我的问题是：

1.  为什么我需要指定模板？
2.  为什么布局没有在 PDF 中呈现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T02:11:45.563

您需要将视图重命名为 show.pdf.html.erb 或创建一个新的 show.pdf.erb。

文件名中的 .pdf 让处理程序知道它可以使用它。

此外，您可能需要使用 wicked_pdf_stylesheet_link_tag 帮助器来显示您的样式。如果您想拥有双重用途的视图，那么可能需要这样的东西：

```
<% if params[:format] && params[:format] == 'pdf' %>
  <%= wicked_pdf_stylesheet_link_tag 'application' %>
<% else %>
  <%= stylesheet_link_tag 'application' %>
<% end %> 
```

# python - Python：读取 txt 文件并从数据中生成类

> ID：10941030
> 
> 赞同：0
> 
> 时间：2012-06-07T23:02:13.000
> 
> 标签：python, class, csv

我是python的新手，不太了解。我正在尝试按特定字段对包含数千行的文件进行排序。假设我要排序的文件 info.txt 如下所示：

```
test-23 2012 05 34 object-1-2
test-21 2012 04 23 object-4-5
test-09 2011 12 55 object-1-2
test-11 2010 12 72 object-3-4
test-12 2010 17 22 object-1-2 
```

我正在尝试对文件进行排序，以便将所有 object-xx 组合在一起并输出到另一个文件。像这样：

```
test-12, 2010, 17, 22, object-1-2    
test-23, 2012, 05, 34, object-1-2,
test-09 2011, 12, 55, object-1-2
test-11 2010, 12, 72, object-3-4
test-21 2012, 04, 23, object-4-5 
```

我正在尝试从这些数据中创建一个类，到目前为止我所做的是使用 .split(" ,") 拆分字段我在第一行得到类似这样的内容：

```
'test-12', '2010', '17', '22', 'object-1-2' 
```

等等所有其他行...

现在它被拆分了，我怎样才能用它来上课呢？这样我可以分配每个字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:38:59.537

如果这些行在 list 中`lines`，您可以对它们进行排序：

```
lines.sort(key=lambda line: line.split()[4]) 
```

这将按字段 4（“object-xy”字段）对它们进行排序。

# python - 为什么我不能只更改 Python 嵌套列表中的单个元素

> ID：10941032
> 
> 赞同：5
> 
> 时间：2012-06-07T23:02:19.787
> 
> 标签：python, nested-lists

我刚刚遇到了一些非常奇怪的 Python：

```
>>> out=[[0]*3]*3
>>> out
[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
>>> out[0][1]
0
>>> out[0][1]=9
>>> out
[[0, 9, 0], [0, 9, 0], [0, 9, 0]] 
```

好吧，显然，我想要的是：

```
[[0, 9, 0], [0, 0, 0], [0, 0, 0]] 
```

不奇怪吗？我对 Python 不是很熟悉，但 Python 总是以其直观的行为给我留下深刻印象。但它是怎么想出来的呢？
...我怎样才能得到我需要的东西？

谢谢！

瓦

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T23:07:35.063

确实是一种奇怪的行为，但这只是因为`*`操作员制作了浅表副本，在您的情况下 -`[0, 0, 0]`列表的浅表副本。您可以使用该`id()`函数来确保这些内部列表实际上是相同的：

```
out=[[0]*3]*3
id(out[0])
>>> 140503648365240
id(out[1])
>>> 140503648365240
id(out[2])
>>> 140503648365240 
```

理解可用于创建*不同的*列表，如下所示：

```
out = [ [0]*3 for _ in range(3) ] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T23:05:11.053

使用`*`复制列表中的元素是一种浅拷贝操作，因此如果在包含可变对象的列表上使用它，最终将获得对相同可变对象的多个引用。

相反，请使用以下内容来初始化您的嵌套列表：

```
out = [[0]*3 for _ in range(3)] 
```

您可以通过您的方法看到，其中的每个条目`out`实际上是对同一列表的引用，这就是您看到您所做的行为的原因：

```
>>> out = [[0]*3]*3
>>> out[0] is out[1] is out[2]
True 
```

# sql - Rails 根据相关模型的属性对模型进行排序

> ID：10941034
> 
> 赞同：2
> 
> 时间：2012-06-07T23:02:28.103
> 
> 标签：sql, ruby-on-rails, ruby

给定以下模型：

团队.rb

```
class Team < ActiveRecord::Base
    has_many :events, :dependent => :destroy
    has_many :challenges, :through => :events

    validates :name, :presence => true, :uniqueness => true
end 
```

挑战.rb

```
class Challenge < ActiveRecord::Base
    has_many :events, :dependent => :destroy
    has_many :teams, :through => :events

    validates :name, :presence => true, :uniqueness => true
    validates :flag, :presence => true, :uniqueness => true
end 
```

事件.rb

```
class Event < ActiveRecord::Base
    belongs_to :team
    belongs_to :challenge

    validates :team,      :presence => true
    validates :challenge, :presence => true
end 
```

我想显示“排名”最高的团队。排名最高的团队完成的挑战最多（事件）。如果 X 项赛事打成平手，则首先完成第 X 项赛事的队伍排名最高。

所以我可以很容易地根据事件的数量对团队进行排序，然后显示它们。

像这样：

```
def index
    @teams = Team.includes(:events).
                  select("*, COUNT(events.id)").
                  group("teams.id, events.id").
                  order("COUNT(events.id) DESC")
end 
```

但是我不知道如何处理有平局的情况。有人知道用 SQL 做这件事的好方法吗？

我宁愿使用 SQL 来执行此操作，而不是在应用服务器上执行额外的步骤。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:59:22.763

You could try this:

```
 @teams = Team.includes(:events).
              select("*, COUNT(events.id) AS event_count, MAX(events.created_at) AS last_event_created_at").
              group("teams.id, events.id").
              order("event_count DESC, last_event_created_at ASC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:24:40.150

所以我让它工作了。谢谢xnm。你把我送到了正确的方向。不敢相信我忘记了MAX。:(

我还必须修复我的 GROUP BY ...

这是工作版本：

```
class Team < ActiveRecord::Base
    ...

    def self.ranked
        all(:select => "teams.*, COUNT(events.id) AS challenges_completed, MAX(events.created_at) AS last_event",
            :joins => "LEFT OUTER JOIN events ON events.team_id = teams.id",
            :group => "teams.id, events.team_id",
            :order => "challenges_completed DESC, last_event ASC")
    end
end 
```

# android - android Notification不会触发BroadcastReceiver的onReceive

> ID：10941037
> 
> 赞同：12
> 
> 时间：2012-06-07T23:02:35.167
> 
> 标签：android, android-intent, android-notifications

是否可以让通知启动广播接收器？

我试过这段代码，但它不起作用。

通知已创建，但是当我单击它时，什么也没有发生。

注意：当我将 notificationIntent 更改为从 MyBroadcastReceiver.class 指向一个活动（如 MainActivity.class）时，它工作正常。

通知创建：

```
 NotificationManager notificationManager = (NotificationManager) context.getSystemService(
        Context.NOTIFICATION_SERVICE);

    int notificationIconId = XXXXXX
    Notification notification = new Notification(
        notificationIconId,
        XXXXXX,
        System.currentTimeMillis()
    );

    CharSequence contentTitle = XXXXXXX
    CharSequence contentText = XXXXXX

    Intent notificationIntent = new Intent(context,MyBroadcastReceiver.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    notificationManager.notify(1,notification); 
```

这是广播接收器

```
public static class MyBroadcastReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
   /*
          */

 }
} 
```

AndroidManifest.xml 内部

```
<receiver android:name=".MyBroadcastReceiver" /> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-07T23:15:42.270

从你的代码...

```
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0); 
```

创建`PendingIntent`目标 a`BroadcastReceiver`时，您必须使用`getBroadcast(...)`而不是`getActivity(...)`。

请参阅[PendingIntent.getBroadcast（上下文上下文，int requestCode，Intent intent，int flags）](http://developer.android.com/reference/android/app/PendingIntent.html#getBroadcast%28android.content.Context,%20int,%20android.content.Intent,%20int%29)

另外，不要`Intent`像这样创建你的......

```
Intent notificationIntent = new Intent(context,MyBroadcastReceiver.class); 
```

这是一个`Intent`针对特定类的显式（通常用于启动特定`Activity`类）。

而是创建一个`Intent`带有“动作”的“广播”，例如......

```
Intent notificationIntent = new Intent(MyApp.ACTION_DO_SOMETHING); 
```

您还需要为清单`<intent-filter>`的部分指定一个部分。`<receiver android:name=".MyBroadcastReceiver" />`

# php - 如何从不同文件中的类中获取变量的值？

> ID：10941039
> 
> 赞同：-1
> 
> 时间：2012-06-07T23:02:50.473
> 
> 标签：php, class

我有一个 user.php(class) 、 login.php 和 index.php。当我在 index.php 中提交表单时，表单操作会转到 login.php，并且该文件使用用户类来验证是否存在尝试登录的人。如果为真，再次重定向到 index.file。但是我想在他/她登录时将用户全名写入 index.php。但我不能从课堂上取全名。

**注意：在代码的 require_once 部分包括必要的文件，例如 database.php、session.php、functions.php 等。因此，它们没有错误，我的函数也没有错误。我想要的是如何在用户登录时将 full_name 写入 index.php。**

这是user.php：

```
require_once $_SERVER['DOCUMENT_ROOT'].'/includes/database.php';

class User{

protected static $table_name="users";
protected static $db_fields = array('id', 'email', 'password', 'first_name',
'last_name');

public $id;
public $email;
public $password;
public $first_name;
public $last_name;

public function full_name() {
if(isset($this->first_name) && isset($this->last_name)) {
  return $this->first_name . " " . $this->last_name;
} else {
  return "";
 }
}

public static function verify($user, $email="", $password="") {
global $database;

$sql  = "SELECT * FROM users ";
$sql .= "WHERE email = '{$email}' ";
$sql .= "AND password = '{$password}' ";
$sql .= "LIMIT 1";
$result_array = self::find_by_sql($sql);

    if (!empty($result_array)) {
        $user->first_name =  $result_array['first_name'];
        $user->last_name =   $result_array['last_name'];
        return array_shift($result_array);
    } else {
        return false;
    }
 }  

$user = new User();
//User class continue but i inserted necessary parts. All functions in the class works. 
```

这是 login.php ：

```
<?php require_once  $_SERVER['DOCUMENT_ROOT'].'/includes/initialize.php'; ?>
<?
if($session->is_logged_in()) {
redirect_to("index.php");

}

if (isset($_POST['submit'])) {

$email = trim($_POST['email']);
$password = trim($_POST['password']);

$found_user = User::verify($user,$email, $password);

if ($found_user) {
$session->login($found_user);

    redirect_to("index.php");

} else {

$message = "There is error about username/password";
echo $message;
}

} else {
$email = "";
$password = "";
} 
?> 
```

这是 index.php ：

```
<?php require_once  $_SERVER['DOCUMENT_ROOT'].'/includes/initialize.php'; ?>

<?php

if($session->is_logged_in()) {
echo $user->full_name();

} else {
echo "No name";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:59:44.767

Save the output from full_name to a session variable. This can then be called to reproduce the name.

For information on using sessions within PHP, use the manual: [http://www.php.net/manual/en/ref.session.php](http://www.php.net/manual/en/ref.session.php)

# javascript - 同时加载多个 $.ajax 调用

> ID：10941041
> 
> 赞同：0
> 
> 时间：2012-06-07T23:03:11.833
> 
> 标签：javascript, ajax

我在从服务器获取 JSON 内容并填充三个单独 div 的页面中有 3 个 $.ajax 请求。这三个 div 中的内容非常大，因此加载所有内容需要一段时间。这些 ajax 调用也在页面加载时被调用，所以类似于：

```
 $(document).ready(function () {
        $.ajax({
            type: 'POST',
            url: "/controller/action",
            dataType: 'json',
            traditional: true,
            async: false,
            success: function (data) {
                //fill content in div 1
            }
        });

        $.ajax({
            type: 'POST',
            url: "/controller/action2",
            dataType: 'json',
            traditional: true,
            async: false,
            success: function (data) {
                //fill content in div 2
            }
        });

        $.ajax({
            type: 'POST',
            url: "/controller/action3",
            dataType: 'json',
            traditional: true,
            async: false,
            success: function (data) {
                //fill content in div 3
            }
        });
}); 
```

我的大问题是：

1.  如何首先加载页面（以及链接等元素）
2.  之后同时加载这三个 ajax 脚本。所以不要调用ajax1，ajax2，ajax3；它同时调用它们。

非常感谢！发条

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T23:07:06.043

1.  该页面将在 ajax 调用被触发之前加载。
2.  如果将 async 设置为 true，它们将同时触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T23:06:40.660

页面将首先加载，您的函数将在准备就绪后执行。

要使[GUI 响应](http://www.hunlock.com/blogs/Snippets%3a_Synchronous_AJAX) *并*同时执行 ajax 请求，请删除该[`async:false`](http://api.jquery.com/jQuery.ajax/)选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T23:06:28.960

您可以将此代码移至 $(document).load( .... )。

并且 3 个呼叫将同时开始。他们的完成时间无法保证。

# c++ - C++中双冒号的全称

> ID：10941045
> 
> 赞同：6
> 
> 时间：2012-06-07T23:03:54.777
> 
> 标签：c++

如果我有一堂课：

```
class A{
public:
    A();
    void print();
private:
    int value;
};

A::A() {value = 0;}
void A::print() {cout << value << endl;} 
```

最后两行中 :: 符号的完整名称是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T23:06:00.227

> `::`最后两行中符号的完整名称是什么？

它是“范围解析运算符”。

> 有人知道答案吗？

是的。

> 这是你被问过的最奇怪的问题吗？

不。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-07T23:06:33.770

它被称为范围解析运算符。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-07T23:05:19.057

它被称为[范围解析运算符。](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr175.htm)

* * *

你想知道你可以写什么而*不是*`::`？好吧，没有其他方法总是有效的。对于您的示例，可以只在类的主体中定义这些成员函数，这将是定义类的内联样式：

```
class A{
  int value;
 public:
  A() {
    value = 0;
  }
  void print() {
    cout << value << endl;
  }
}; 
```

这样，您显然无法将定义放在不同的文件中，因此无法单独编译它们。

在其他时候，当`::`用于解析 a*`namespace`*而不是 a`class`时，您可以用[重新打开该命名空间或将其拉入范围`using namespace`](https://stackoverflow.com/questions/10928686/best-practices-using-namespace-or-reopen-namespace)来替换它。

# sql - 用sql处理负值

> ID：10941047
> 
> 赞同：1
> 
> 时间：2012-06-07T23:04:04.267
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个数据集，列出了未来产品库存的日期和数量。有时，我们的需求超过了我们未来的供应，我们最终会得到一个负的未来数量。我需要将未来的负数量计入之前的供应量，这样我们就不会因超卖供应而加剧问题。

在以下数据集中，我需要为 10 至 19 日的需求做准备，将负数沿链向上应用，直到我得到一个正数：

```
"ID","SKU","DATE","SEASON","QUANTITY"
"1","001","2012-06-22","S12","1656"
"2","001","2012-07-13","F12","1986"
"3","001","2012-07-27","F12","-283"
"4","001","2012-08-17","F12","2718"
"5","001","2012-08-31","F12","-4019"
"6","001","2012-09-14","F12","7212"
"7","001","2012-09-21","F12","782"
"8","001","2012-09-28","F12","2073"
"9","001","2012-10-12","F12","1842"
"10","001","2012-10-19","F12","-12159" 
```

我需要做到这一点：

```
"ID","SKU","DATE","SEASON","QUANTITY"
"1","001","2012-06-22","S12","1656"
"2","001","2012-07-13","F12","152" 
```

我已经研究过使用 while 循环和外部应用，但似乎还没有找到一种方法来做到这一点。任何帮助将非常感激。这需要适用于 sql server 2008 R2。

这是另一个例子：

```
"1","002","2012-07-13","S12","1980"
"2","002","2012-08-10","F12","-306"
"3","002","2012-09-07","F12","826" 
```

会成为：

```
"1","002","2012-07-13","S12","1674"
"3","002","2012-09-07","F12","826" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:17:58.940

你似乎没有得到很多答案——所以如果你没有得到正确的“如何在纯 SQL 中做这件事”，这里有一些东西。如果有任何 SQLish，请忽略此解决方案 - 它只是一种防御性编码，而不是优雅的。

如果您想获得具有相同季节的所有数据的总和，为什么要删除重复记录 - 只需将其取出，运行 foreach 循环，对具有相同季节值的所有数据求和，使用正确的值更新表并删除不必要的条目。这是其中一种方法（伪代码）：

```
productsArray = SELECT * FROM products
processed = array (associative)
foreach product in productsArray:
  if product[season] not in processed:
    processed[season] = product[quantity]
    UPDATE products SET quantity = processed[season] WHERE id = product[id]
  else:
    processed[season] = processed[season] + product[quantity]
    DELETE FROM products WHERE id = product[id] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:18:42.683

这是一个`CROSS APPLY`经过测试的

```
SELECT b.ID,SKU,b.DATE,SEASON,QUANTITY
FROM (
  SELECT SKU,SEASON, SUM(QUANTITY) AS QUANTITY
  FROM T1 
  GROUP BY SKU,SEASON
  ) a
CROSS APPLY (
  SELECT TOP 1 b.ID,b.Date FROM T1 b
  WHERE a.SKU = b.SKU AND a.SEASON = b.SEASON
  ORDER BY b.ID ASC
  ) b
  ORDER BY ID ASC 
```

# iphone - 将 JSON 存储到核心数据对象中是否值得？

> ID：10941049
> 
> 赞同：2
> 
> 时间：2012-06-07T23:04:16.230
> 
> 标签：iphone, ios, json, core-data

我在我的应用程序中下载了一堆 JSON 对象，并将文件保存为 nsdata 对象：

```
[responseData writeToFile:appFile atomically:YES]; 
```

然后，每当我想要一些 json 对象时，我都会加载该数据、序列化和过滤。到目前为止，它工作得很好。

而且，我将开始从网络下载新类型的 JSON 对象（具有不同的属性）。

¿ 我应该开始使用核心数据，还是继续这样（意思是，这样做没有问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:06:49.300

取决于您将要编写和序列化的对象的规模。如果这些对象的数量是动态的……因此可能很多，您可能应该更多地研究 Core Data 作为存储的选项。

# javascript - if 语句的简写

> ID：10941050
> 
> 赞同：1
> 
> 时间：2012-06-07T23:04:20.850
> 
> 标签：javascript, optimization, shorthand

**为什么我要问**

我在理解 JavaScript 中句子的简写时遇到了很多麻烦`if`，而且我还没有找到描述它的文章或教程。这就是为什么我一直在优化我的小代码。而且我是 JavaScript 新手，所以如果有人可以让我对这段代码的缩短有一个基本的了解，我非常感谢你告诉我代码背后的魔力。

**我需要什么帮助**

我将在很多函数中使用完全相同的代码。因此，我想对其进行优化并使其成为更短的代码版本。

```
function welcomemessage() {
if (br == 1) {
hello();
}
else {
hey();
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T23:05:25.510

使用三元运算符。

```
function welcomemessage() {  
  (br == 1) ? hello() : hey();
} 
```

三元运算符很有用，而且不难理解。这是它的工作原理。

```
(condition) ? (true) : (false) 
```

编辑：

由于 JS 将函数视为第一类对象，因此可以创建包装器。类似下面的东西（虽然没有测试）

```
function ternaryWrapper(br, functionTrue, functionFalse){
   return (br == 1) ? functionTrue : functionFalse;
}

//call it
ternaryWrapper(2,hello, hey); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T23:05:45.227

更短：

```
function welcomemessage(br){
    [hello,hey][br-1]();    //This will work.
}
welcomemessage(1);  //hello();
welcomemessage(2);  //hey(); 
```

* * *

**有趣的事实：**^(**1**)

要使其他人难以阅读您的脚本，请执行以下操作：

```
function welcomemessage(){
    return br==1 && (hello(),1) || (hey(),1);    //This will work too.
} 
```

[^(**1**)与答案完全无关。]

* * *

## 更新

```
var something = ( (br == 1) ? hello() : hey() ); 
```

`something`将是值`hello()`或`hey()`返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:08:51.690

或者：

```
var msgfuncs = [ hey, hello ];
function welcommessage() { msgfuncs[br](); } 
```

（假设当“br”不是 1 时它是 0，这当然可能是一个无效的假设。）

如果选择不同的函数，直接把数组放在周围的函数中即可：

```
function welcomemessage() {
  [ hey, hello ][br]();
} 
```

如果您想做出决定并保存函数以供以后调用，您可以这样做：

```
var messageFunction = [ hey, hello ][ br ]; 
```

然后任何时候：

```
messageFunction(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T23:30:41.443

如果`br`总是数字，xbonez 的答案可以通过使用严格比较来优化一点`===`（因为它快一点）：

```
function welcomemessage() {
    (br === 1) ? hello() : hey();
} 
```

另一个有趣的选择是：

```
function welcomemessage() {
    (br - 1) ? hey() : hello();
} 
```

最后一个函数有效，因为当`br`is时`1`，它将变为`0`（这是一个假值）并评估为假，触发`hello()`，其余的它将触发`hey()`

# database - 数据库设计：按类型组织项目（电影）

> ID：10941051
> 
> 赞同：1
> 
> 时间：2012-06-07T23:04:22.840
> 
> 标签：database, database-design, normalization

我正在为一个项目制作一个基本的电影在线商店，我希望用户能够按类型选择电影，例如：

*   全部
*   恐怖
*   行动
*   纪录片
*   科幻
*   ...  

将电影存储在数据库中以匹配此结构的最佳方法是什么。

**第一种方式**

按类型对电影进行排序并创建单独的表格，即动作类型的表格，纪录片的表格，科幻的表格等等。使用这种方法，将没有明确的方法来连接表格以生成所有电影的列表

**第二种方式**

将所有电影放在一个表中，将流派放在另一个表中，并根据流派建立2之间的外键关系

还是有另一种更好的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:12:49.620

我认为你的意思是类型，而不是性别。:) 我不认为peliculas 有性别。就个人而言，我会创建 3 个表。电影 (Peliculas)、流派和带有两者 ID 的查找表。这将允许电影出现在多个搜索中 - 您可能想要。例如，关于甲壳虫乐队的电影可能同时属于音乐和纪录片类型，这样如果用户搜索其中任何一个，它就会显示出来。

**Peliculas (表1)**

```
PeliculaId
other cols (name, etc) 
```

**类型（表2）**

```
GenreId
GenreDescription 
```

**PelGenre（表 3）**

```
PeliculaId FK
GenreId FK 
```

**鹈鹕**

```
------------
PeliculaId  Name                    Descript
------------------------------------------------------------------------------------------------
     1  The Beatles Anthology    Documentary series on The Beatles career  
     2  The Shawshank Redemption 2 good guys in jail become friends and get back at everyone
     3  Star Wars        Farm Boy saves Galaxy 
```

**类型**

```
GenreId     Descript
----------------------------------
1           Action
2           Crime
3           Drama
4           ScienceFiction
5           Documentary
6           Music 
```

**体裁**

```
PeliculaId      GenreId
------------------------
1               5
1               6
2               2
2               3
3               4
3               1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T23:11:28.977

有两张桌子；一种用于电影，一种用于流派。

```
Movies {id, title, genre_id}
Genres {id, name} 
```

按流派查询：

```
SELECT * FROM Movies WHERE genre_id = ? 
```

要查询所有类型，只需从 WHERE 子句中删除genre_id 部分

```
SELECT * FROM Movies 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T23:11:20.493

**类别表**

```
name
id (unique) 
```

**电影表**

```
id (unique, autoincremental)
other data 
```

关系表

**Cat_mov**

```
movie_id (the id of the movie)
cat_id (the id of the categorie) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T23:09:00.303

不是你的第一种方式：这不是一个关系数据库，因为你复制了类似的信息。

如果您希望建立关系，则第二种方式更合适。一个表中的电影 MovieType 在第二个表中。

Movies 表包含一个到 MovieType 的 FK，它列出了流派的名称。

# mysql - 为了使用 mysql 缓存，我是否需要向每个 mysql 查询添加一些内容？

> ID：10941052
> 
> 赞同：0
> 
> 时间：2012-06-07T23:04:28.277
> 
> 标签：mysql, caching, ubuntu

好的，所以我遵循[了本](http://www.howtogeek.com/howto/programming/speed-up-your-web-site-with-mysql-query-caching/)教程，并重新启动了 mysql 服务器。但是，每当我运行查询然后再次执行查询时，我几乎看不到任何性能提升。这就像 0.200 秒的增益告诉我缓存不工作。

这是 my.cnf 文件中的缓存配置。

```
# * Query Cache Configuration
#
query_cache_limit       = 10M
query_cache_size        = 256M
query_cache_type        = 1 
```

我测试的方法是从数据库运行一个例程。该例程由一个简单的 SELECT 语句组成，该语句连接两个小型查找表。

```
show variable like '%query_cache%'; 
```

**结果**

```
have_query_cache    YES
query_cache_limit   10485760
query_cache_min_res_unit    4096
query_cache_size    268435456
query_cache_type    ON
query_cache_wlock_invalidate    OFF 
```

编辑 1

补充一点，当我使用 Workbench 查看服务器运行状况时。查询缓存命中率保持在 0%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:40:44.183

好的，这就是解决我的问题的方法。我最终在 MySql 工作台中启用了远程管理。然后我去了配置->选项文件。它给了我一个错误，指出没有名为 [mysqld] 的部分并且它将添加它。之后我转到性能选项卡，并注意到我所有的缓存复选框都未选中。我检查了所有值，MySql Workbench 建议我在输入缓存值时为我的值添加 K、M 或 G 后缀。毕竟我重新启动了服务器，它成功地缓存了我的查询。

不确定配置中的所有技术部分发生了什么变化，但工作台为我处理了一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T16:25:33.453

您应该返回并以字节为单位指定参数。我知道 showVar 看起来是正确的，但是这些值是在系统中使用的，看起来您已经指定了 MB 中的参数，上面的第一个代码块。尽管 showVar 看起来不错，但系统可能会看到 10M 并默认为 0。

# java - 将文件从 Java 项目内部复制到绝对路径

> ID：10941054
> 
> 赞同：0
> 
> 时间：2012-06-07T23:04:32.257
> 
> 标签：java, file, package, copying

简单地说，我有一个包含我所有构建代码的包，另一个（称为“DummieClasses”）包含许多文件，这些文件需要根据命令处理到文件位置。我试过使用：

```
File file1 = new File(file.getAbsoluteFile()+filename);
FileChannel srcChannel = new FileInputStream("/DummieClasses/yr.png").getChannel();
FileChannel dstChannel = new FileOutputStream(file1).getChannel();
dstChannel.transferFrom(srcChannel, 0, srcChannel.size()); 
```

...认为它将 yr.png 从包 DummieClasses 复制到选定的位置，但到目前为止，没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:12:40.640

如果您使用的是 Java 7，您可以使用[`Files.copy`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)它为您执行此操作。

# macos - 如何使 Bash 选项卡在选项 OSX 中自动循环完成

> ID：10941055
> 
> 赞同：31
> 
> 时间：2012-06-07T23:04:34.867
> 
> 标签：macos, bash, autocomplete, sh

目前，当我在我的主文件夹中并且我想`cd`进入我键入`cd D`并点击的文档时`Tab`，Bash 会向我显示匹配的文件夹列表`D`。

我想要发生的是当我按下时`Tab`，bash 会自动完成第一个与我输入的内容相匹配的选项，并且每次按下`Tab`它都会循环到下一个选项。

有没有办法做到这一点？我确信我的旧 Ubuntu 机器上的 Bash 副本具有此功能。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-22T00:16:37.157

是的！[我在 MacWorld](http://hints.macworld.com/article.php?story=20050904022246573)的以下链接中找到了问题的答案

将以下内容放入 .bashrc 或 .bash_login

```
bind '"\t":menu-complete' 
```

# python - 以子进程模块启动的进程进入睡眠状态

> ID：10941057
> 
> 赞同：2
> 
> 时间：2012-06-07T23:04:37.663
> 
> 标签：python, linux, subprocess

我有一个启动的进程，`subprocess.Popen()`它意味着无限期地运行。我遇到的问题是该过程似乎在大约 20 秒后停止运行。果然，当我检查时`top`，它表明该进程正在进入睡眠状态。当我手动运行命令时，这不会发生。

有谁知道我怎样才能阻止这种情况发生？

这是子流程调用：

```
aireplay = subprocess.Popen('aireplay-ng -3 -b ' + target.mac + ' ' + interface, 
                            shell=True, stdout = subprocess.PIPE, stderr = DN)

time.sleep(5)
starttime = time.time()
ivs = 0
second = False
print 'Sending deauth to generate arps...'
send_deauth(target)

while time.time() - starttime < 1200:
    targets = parsecsvfile('crackattempt')
    print 'Captured ' + str(ivs) + ' ivs.'
    print aireplay.poll()
    if len(targets[0]) > 0:
        target = targets[0][0]
        if ivs > 20000:
            break
        else :
            ivs = int(target.ivs)

    time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T23:21:02.923

您正在管道传输子流程的输出。当它的缓冲区已满时它会休眠 - 你记得从子进程中读取标准输出吗？

`communicate`如果您不介意它阻塞，或者从文件描述符中读取，或者可能将标准输出发送到 /dev/null，您可以使用该方法`stdout`，因为您似乎没有使用它。

# c# - OnItemSelectedIndexChange 隐藏或删除选定的 DropDownList 项

> ID：10941061
> 
> 赞同：1
> 
> 时间：2012-06-07T23:04:50.930
> 
> 标签：c#, asp.net, drop-down-menu

我确信这已经完成，但似乎无法在任何地方找到解决方案，或者在这么晚的时候弄清楚。

我有两个下拉列表：

`ddConvertFrom` `ddConvertTo`

`OnItemSelectedIndexChange`对于任何一个 DropDownList，我想从另一个 DropDownList 中删除/隐藏选定的值。

到目前为止，我已经尝试过：

```
protected void ddConvertTo_SelectedIndexChanged(object sender, EventArgs e)
{
    foreach (ListItem li in ddConvertTo.Items)
    {
        if (ddConvertFrom.SelectedItem.Text == li.Text)
        {
            ddConvertTo.Items.Remove(ddConvertTo.Items.FindByValue(ddConvertFrom.SelectedItem.Text));
        }

    }
} 
```

A）为什么以上不起作用？

B）上面有没有更有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:10:23.470

好吧，确保自动回发是真的然后检查这个。

```
 protected void ddConvertTo_SelectedIndexChanged(object sender, EventArgs e) 
    { 
     foreach (ListItem li in ddConvertTo.Items)
     {
        if (ddConvertFrom.SelectedItem.Text == li.Text)
        {

             ddConvertTo.Items.Remove(ddConvertTo.Items.FindByText(ddConvertFrom.SelectedItem.Text));
             break;

        }

     }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:08:43.923

您应该在绑定之前从集合中删除该项目，而不是在之后尝试将其删除。

# scala - Scala循环作为单元返回并且编 译器指向“for”语法？

> ID：10941062
> 
> 赞同：0
> 
> 时间：2012-06-07T23:05:05.713
> 
> 标签：scala, return-type

似乎单位是我今天烦恼的主题。我正在移植一个使用 Gson 的 JSON 反序列化器，当涉及到这个 for 循环时：

```
 def deserialize(json:JsonElement, 
                  typeOfT:Type, 
                  context:JsonDeserializationContext) = {
    var eventData = new EventData(null, null)
    var jsonObject = json.getAsJsonObject
    for(entry <- jsonObject.entrySet()) {
      var key = entry.getKey()
      var element = entry.getValue()
      element
      if("previous_attributes".equals(key)) {
        var previousAttributes = new scala.collection.mutable.HashMap[String, Object]()
        populateMapFromJSONObject(previousAttributes, element.getAsJsonObject())
        eventData.setPreviousAttributes(previousAttributes)
        eventData
      } else if ("object".equals(key)) {
        val `type` = element.getAsJsonObject().get("object").getAsString()
        var cl = objectMap.get(`type`).asInstanceOf[StripeObject]
        var `object` = abstractObject.retrieve(cl, key)
        eventData.setObject(`object`)
        eventData
      }
    }
  } 
```

编译器吐出错误`type mismatch; found : Unit required: com.stripe.EventData`并在此处指向此行：`for(entry <- jsonObject.entrySet())`

**问题**

1.  确认确实`entrySet()`是以单位出现的 Gson 方法？
2.  如果不是，代码的哪一部分造成了问题？我已经为`eventData`类方法设置了返回类型/值
3.  Gson Unit 问题是否有解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:39:13.903

编译器错误相当神秘，这里实际上存在固有问题。首先感谢一位同事的基础知识：

1.  Scala for 循环不会返回，而是需要建立一个列表以便之后返回它。
2.  每次迭代时，地图自然会即时返回。

其次，我遇到的问题是由我自己的错误引起的。`eventData`我忘了在方法结束时返回，所以最后我得到了这个不错的干净函数：

```
@SuppressWarnings(Array("unchecked"))
  def deserialize(json:JsonElement, typeOfT:Type, context:JsonDeserializationContext) = {
    var eventData = new EventData(null, null)
    var jsonObject = json.getAsJsonObject
    for(entry <- jsonObject.entrySet()) {

      var key = entry.getKey()
            var element = entry.getValue()
            if("previous_attributes".equals(key)) {
                var previousAttributes = new scala.collection.mutable.HashMap[String, Object]()
                populateMapFromJSONObject(previousAttributes, element.getAsJsonObject())
                eventData.setPreviousAttributes(previousAttributes)
            } else if ("object".equals(key)) {
                val `type` = element.getAsJsonObject().get("object").getAsString()
                var cl = objectMap.get(`type`).asInstanceOf[StripeObject]
                var `object` = abstractObject.retrieve(cl, key)
                eventData.setObject(`object`)
            }
    }
    eventData
  } 
```

我对指向 for 循环中间的编译器感到困惑，但实际上它指的是方法返回的内容，而不是 Gson 对象。

# nhibernate - 如何使用 NHibernate 映射和引用来自其他数据源的实体

> ID：10941063
> 
> 赞同：0
> 
> 时间：2012-06-07T23:05:08.947
> 
> 标签：nhibernate, nhibernate-mapping

我目前正在开发 ASP.NET MVC 应用程序，其中我有一个`User`如下实体：

```
public class User
{
    public virtual int Id { get; protected set; }
    public virtual string Name { get; protected set; }
    public virtual string Role { get; protected set; }
    public virtual Location Location { get; protected set; }
} 
```

位置同样简单：

```
public class Location
{
    public virtual string Id { get; protected set; }
    public virtual string Building { get; protected set; }
    public virtual string City { get; protected set; }
    public virtual string Region { get; protected set; }
} 
```

我的复杂性出现了，因为我想`User`从 Active Directory 而不是数据库中填充。此外，一些持久化到数据库的类引用用户作为属性。我有一个`ADUserRepository`用于检索的，但是当其余的由 NHibernate 管理时，我不知道如何将这些用户集成到我的对象图中。

NHibernate 有没有办法只保留一个 id`User`而不是用户表的外键？我可以将它映射为一个组件来完成这个吗？我还研究过实施`IUserType`翻译。这样，它将映射到一个简单的字段，并`ADUserRepository`可以放入链中以解析存储的 Id。还是我试图破解一些不太可行的东西？这是我第一次使用 NHibernate，因此我很感激您提供的任何见解或解决方案。谢谢。

更新

看来我最好的解决方案是使用 IUserType 映射用户并注入（最好使用 StructureMap）一个服务，以便在返回之前填充对象。在这种情况下，这里有几个问题涉及该主题，主要表明需要自定义 ByteCodeProvider。为了让 IUserType 采用参数化构造函数，我仍然需要这样做还是在此处进行注释：[NHibernate.ByteCode.LinFu.dll For NHibernate 3.2](https://stackoverflow.com/questions/8286936/)有所作为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:06:54.143

使用 Usertype 将用户转换为 id 并返回

```
public class SomeClass
{
    public virtual string Id { get; protected set; }
    public virtual User User { get; protected set; }
}

// in FluentMapping (you have to translate if you want to use mapping by code)

public SomeClassMap()
{
    Map(x => x.User).Column("user_id").CustomType<UserType>();
}

public class UserType : IUserType
{
    void NullSafeSet(...)
    {
        NHibernateUtil.Int32.NullSafeSet(cmd, ((User)value).Id, index);
    }
    void NullSafeGet(...)
    {
        int id = (int)NHibernateUtil.Int32.NullSafeGet(cmd, ((User)value).Id, index);
        var userrepository = GetItFromSomeWhere();
        return userrepository.FindById(id);
    }
} 
```

# coffeescript - 如何使用咖啡脚本使用`this`和`_this`（胖箭头）？

> ID：10941067
> 
> 赞同：10
> 
> 时间：2012-06-07T23:05:19.177
> 
> 标签：coffeescript, d3.js

我正在使用 D3 函数`each`，它接受一个回调函数并将其`this`作为参数传递，但我需要同时访问`this`和`_this`。这是咖啡脚本代码：

```
@x = d3.scale.ordinal().domain(d3.range(@model.geneExpressions[0].length)).rangeBands([0, width])    

getRow = (row) =>
    cell = d3.select(this).selectAll(".cell")
        .data(row)
      .enter().append("rect")
        .attr("x", (d,i) => @x(i))    

rows = @heatmap.selectAll(".row")
    .data(@model.geneExpressions)
  .enter().append("g")
    .each(getRow) 
```

以及它生成的javascript：

```
 var _this = this;    

this.x = d3.scale.ordinal().domain(d3.range(this.model.geneExpressions[0].length)).rangeBands([0, width]);    

getRow = function(row) {
        var cell;
        return cell = d3.select(_this).selectAll(".cell").data(row).enter().append("rect").attr("x", function(d, i) {
          return _this.x(i);
        })
      };    

rows = this.heatmap.selectAll(".row").data(this.model.geneExpressions).enter().append("g").attr("class", "row").each(getRow); 
```

我怎样才能`this`在这一行中使用咖啡脚本并保持一切不变？：

```
return cell = d3.select(this) ... 
```

问题是我不能将@x 作为参数传递给`each`并使用细箭头而不是粗箭头（因为那时我无法访问@x），除非我重写了D3 函数，这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T23:49:38.947

所以你有这个结构：

```
@x = ...
getRow = (row) =>
    d3.select(@)...attr('x', (d, i) => @x(i))
rows = ...each(getRow) 
```

但是您需要`getRow`成为一个普通`->`函数，以便它获取 DOM 元素，`@`并且您需要`attr`回调成为绑定`=>`函数，这样才`@x`有效，对吗？

立即想到两种可能性：

1.  使用常用 JavaScript`var that = this;`技巧的 CoffeeScript 形式。
2.  `attr`为回调使用命名绑定函数。

第一个看起来像这样：

```
that   = @
getRow = (row) ->
    cell = d3.select(@)
        .selectAll(".cell")
        .data(row)
        .enter().append("rect")
        .attr("x", (d,i) -> that.x(i)) 
```

第二个是这样的：

```
x_at_i = (d, i) => @x(i)
getRow = (row) ->
    cell = d3.select(@)
        .selectAll(".cell")
        .data(row)
        .enter().append("rect")
        .attr("x", x_at_i) 
```

# c# - 用于获取新邮件的 IMAP 库

> ID：10941076
> 
> 赞同：1
> 
> 时间：2012-06-07T23:06:11.157
> 
> 标签：c#, imap

我需要通过 IMAP 从邮件服务器读取邮件并存储在数据库中。我的问题是

1.  我如何知道哪些邮件已经存储在数据库中，哪些是现在。基于时间戳？但在这种情况下，我必须遍历所有邮件并获取时间戳。我不想循环访问或获取所有邮件，因为邮箱会很大。

我应该采取什么方法？我应该将新邮件转发到临时帐户 - 从该帐户读取然后删除该邮件吗？

请尽快告诉我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:42:24.777

问题是您是否需要在 IMAP 服务器上保留这些电子邮件？或者你可以在下载后简单地删除它们吗？

当每封电子邮件到达邮箱时，所有 IMAP 服务器都会为其分配一个特殊的唯一 ID (uid)。**Uid 是按递增顺序**分配的。在大多数服务器的情况下，这些 uid 在会话之间也是稳定的，并且永远不会改变。

这意味着要知道哪些电子邮件是新的，您只需要**记住您之前下载的最后一个 uid**。

要阅读电子邮件，您需要一个[IMAP 库](http://www.limilabs.com/mail)，我推荐这个：[http](http://www.limilabs.com/mail) ://www.limilabs.com/mail ，但请注意，我参与了开发，它是一个商业产品。

这是展示如何[从服务器获取新电子邮件](http://www.limilabs.com/blog/get-new-emails-using-imap)以及[IMAP 中唯一 ID 的详细信息的文章](http://www.limilabs.com/blog/unique-id-in-imap-protocol)

# eclipse - PC 重新启动后，Eclipse webapp 项目不再在 Tomcat 上正常启动

> ID：10941080
> 
> 赞同：3
> 
> 时间：2012-06-07T23:06:29.633
> 
> 标签：eclipse, jsf, tomcat

当我关闭我的电脑时，我配置并运行了一个 Web 应用程序。然后当我开始它时，奇怪的事情开始发生：我使用 eclipse indigo ee。它给了我一个在正确位置的类没有找到异常的类，我没有修改任何东西，我想在修改之前重新运行应用程序。在另一个项目中，它无法识别字符串类型，所以我重新加载了项目，然后包出现问题，然后删除并替换了包，它工作了。那个项目不错。但是我正在研究的另一个说没有找到一个类。我把它放在另一个包裹里，然后放回原处。错误消失了。但是出现了一个新的，这是我的控制台输出：

```
 Jun 08, 2012 1:57:07 AM org.apache.catalina.core.AprLifecycleListener init
 INFO: The APR based Apache Tomcat Native library which allows optimal performance in  production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;c:/Program Files/Java/jdk1.7.0_04/bin/../jre/bin/server;c:/Program Files/Java/jdk1.7.0_04/bin/../jre/bin;c:/Program Files/Java/jdk1.7.0_04/bin/../jre/lib/amd64;D:\OracleDB11g\app\oracle\product\11.2.0\server\bin;c:\Program Files\Java\jdk1.7.0_04\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;d:\Programming_Tools\apache-maven-3.0.4\bin\;D:\MySqlServer\bin;C:\Program Files (x86)\QuickTime\QTSystem\;D:\Programming_Tools\eclipse EE;;.
 Jun 08, 2012 1:57:07 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
 WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:TestTomcat' did not find a matching property.
 Jun 08, 2012 1:57:07 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
 WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:OnTheRun' did not find a matching property.
 Jun 08, 2012 1:57:08 AM org.apache.coyote.AbstractProtocol init
 INFO: Initializing ProtocolHandler ["http-bio-80"]
 Jun 08, 2012 1:57:08 AM org.apache.coyote.AbstractProtocol init
 INFO: Initializing ProtocolHandler ["http-bio-8443"]
 Jun 08, 2012 1:57:08 AM org.apache.coyote.AbstractProtocol init
 INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
 Jun 08, 2012 1:57:08 AM org.apache.catalina.startup.Catalina load
 INFO: Initialization processed in 1791 ms
 Jun 08, 2012 1:57:08 AM org.apache.catalina.core.StandardService startInternal
 INFO: Starting service Catalina
 Jun 08, 2012 1:57:08 AM org.apache.catalina.core.StandardEngine startInternal
 INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
 Jun 08, 2012 1:57:12 AM org.apache.catalina.core.ApplicationContext log
 SEVERE: StandardWrapper.Throwable
 java.lang.IllegalStateException: No Factories configured for this Application. This   happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
 If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
 A typical config looks like this;
 <listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
 </listener>

at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:172)
at javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

 Jun 08, 2012 1:57:12 AM org.apache.catalina.core.StandardContext loadOnStartup
 SEVERE: Servlet /OnTheRun threw load() exception
  java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!

    If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files   and a context listener is not setup in your web.xml.

      A typical config looks like this;     <listener>
    <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
   </listener>

at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:172)
at javax.faces.webapp.FacesServlet.init(FacesServlet.java:112)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

 Jun 08, 2012 1:57:12 AM org.apache.coyote.AbstractProtocol start
 INFO: Starting ProtocolHandler ["http-bio-80"]
 Jun 08, 2012 1:57:12 AM org.apache.coyote.AbstractProtocol start
 INFO: Starting ProtocolHandler ["http-bio-8443"]
 Jun 08, 2012 1:57:12 AM org.apache.coyote.AbstractProtocol start
 INFO: Starting ProtocolHandler ["ajp-bio-8009"]
 Jun 08, 2012 1:57:12 AM org.apache.catalina.startup.Catalina start
 INFO: Server startup in 3540 ms 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T23:30:16.077

显然环境很脏。我建议清理并重建所有内容。

1.  从 Tomcat 中删除项目（右键单击 Tomcat，*添加/删除项目*，删除项目）
2.  在 Eclipse 中关闭项目（右键单击项目，*关闭*）
3.  清理 Tomcat（右键单击 Tomcat，*清理*）
4.  在 Eclipse 中重新打开项目（右键单击项目，*打开*）
5.  在 Eclipse 中清理项目（*项目>清理...>清理下面的选定项目*，选择项目）
6.  将项目添加到 Tomcat（右键单击 Tomcat，*添加/删除项目*，添加项目）
7.  启动 Tomcat（右键单击 Tomcat，*开始*）。

无法查明导致此问题的真正原因，可能的因素太多。例如，工作区没有正确关闭，或者 Tomcat 没有正确关闭，或者你同时做了“太多”的事情，这导致了 Eclipse 后台任务中的竞争条件等等。这与 Eclipse+Tomcat 组合没有明确关系。在我的经验中，这种情况也时常发生在 JBoss AS 和 Glassfish 服务器上。

# javascript - 在 Rally 中：我能否将自定义任务状态映射到 Rally 任务板中的现有任务状态（类似于用户故事的看板）？

> ID：10941081
> 
> 赞同：2
> 
> 时间：2012-06-07T23:06:32.343
> 
> 标签：javascript, extjs, rally

创建具有可映射状态的任务卡板需要什么，例如 Rally 现有的看板支持。

我想添加一两个自定义任务状态：例如“准备合并”和“单元测试完成”。现有的任务板不支持此功能。

我使用 Rally 2.0 SDK（预览版）玩过卡片板代码，并且能够在自定义状态列中快速显示任务，但映射是我迷路的地方，因为我不确定如何将这些自定义状态映射到默认定义/进行中/已完成状态。我很好奇您是否对用于状态映射的触发器或组件有任何指示。

我知道对于额外的任务状态可能会有一些反对意见，但是在一些工程公司中，编码与任务密切相关，额外的状态在任务级别是有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:34:27.180

首先让我给你一些警告。您的映射仅适用于该特定板和任何其他视图。因此，更改很容易不同步。

这是一些应该做你所期望的代码。你可以在这里得到它的要点 [https://gist.github.com/2926610](https://gist.github.com/2926610)

```
<!DOCTYPE html>
<html>
<head>
<title>My Custom App</title>

<!--Include SDK-->
<script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p/sdk.js"></script>

<!--App code-->
<script type="text/javascript">

    Rally.onReady(function() {

        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',
            mappedToField:"State",
            mappedFromField:"Mapme",

            fieldNameMap:{
                a:"Defined",
                b:"Defined",
                c:"In-Progress",
                d:"In-Progress",
                e:"Completed"
            },

            launch: function() {
                this.add({
                    xtype:'rallycardboard',
                    types:['task'],
                    attribute: this.mappedFromField,
                    listeners:{
                        beforecarddroppedsave:function(cardboard, card) {
                            //map the new state from on this card to the new state
                            var newState = this.fieldNameMap[card.record.get(this.mappedFromField)];
                            card.record.set(this.mappedToField, newState);
                        },
                        scope:this
                    }
                });
            }
        });

        Rally.launchApp('CustomApp', {
            name: 'My Custom App'
        });

    });

</script>

</head>
<body class="myApp">
</body>
</html> 
```

# javascript - HTML5 画布：我可以绘制一个形状并给它一个变量名吗？

> ID：10941090
> 
> 赞同：2
> 
> 时间：2012-06-07T23:07:24.450
> 
> 标签：javascript, html, canvas

我想在画布上绘制一个形状（我可以这样做），但我不确定是否可以给该形状一个变量名。我想这样做，以便稍后可以更改该形状的宽度，而无需重新绘制形状。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:07:38.587

不幸的是，如果不重新绘制形状，您将无法做到这一点。您可以做的是将信息存储在这样的对象中。

```
var rectangle = {x:10,y:20,width:20,height:40}; 
```

然后您可以更改任何值并像这样重绘它，

```
//clear the canvas then draw
rectangle.width = 60;
ctx.fillRect(rectangle.x,rectangle.y,rectangle.width,rectangle.height); 
```

**[现场演示](http://jsfiddle.net/loktar/QrCuj/)**

# ruby-on-rails-3 - 具有多种布局的 Rails3 twitter-bootstrap-rails

> ID：10941096
> 
> 赞同：0
> 
> 时间：2012-06-07T23:07:57.320
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, twitter-bootstrap-rails

我正在使用 twitter-bootstrap-rails 运行 Rails3。我有 2 种不同的布局“application.html.erb”和“backend.html.erb”。不幸的是，当使用后端布局时，我仍然得到所有 bootstrap_and_overrides.css.less 样式覆盖默认值。我只想使用单独的覆盖文件，因此布局与我的应用程序布局不同。

关于如何最好地做到这一点的任何建议？

我能想到的唯一方法是在我的 application.css 文件中不需要覆盖文件（如引导自述文件中所建议的那样），而是在我只加载到 application.html.erb 文件中的 CSS 文件中需要它.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:15:32.497

我没有看到应用程序布局实际上指定了 application.css 文件。我将该行修改为：

```
 <%= stylesheet_link_tag "backend", :media => "all" %> 
```

然后创建了一个 backend.css 文件，它没有引用整个树，也没有引用原始覆盖文件。

现在我有了一个通用布局，可以通过 backend.css 或我的新 bootstrap_and_overrides_backend.css.less 文件进行自定义。

# google-maps - OpenLayers 层 à la Google Maps ImageMapType

> ID：10941097
> 
> 赞同：0
> 
> 时间：2012-06-07T23:08:00.520
> 
> 标签：google-maps, openlayers

我在谷歌地图上有这一层：（注意 getTileUrl 函数中的 generateAPIKey() 函数）

```
 var options ={
      center:new google.maps.LatLng(somelat,somelon),
      zoom:14,
      disableDefaultUI:true,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      minZoom:11,
      maxZoom:16, 
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),options);

    var myLayerOptions = {
      getTileUrl: function(coord, zoom) {
        return 'http://localhost/mylayer/'+zoom+'/'+coord.x+'/'+coord.y+'.png&apikey='+ generateAPIKey();
      },
      tileSize: new google.maps.Size(256, 256),
      isPng: true,
      opacity:1.0
    };
    var myLayerMapType = new google.maps.ImageMapType(myLayerOptions);
    map.overlayMapTypes.insertAt(0, myLayerMapType); 
```

所以我的主要问题是我有一个我正在使用的服务的动态 API 密钥，我有这个开放层：

```
var mylayer = new OpenLayers.Layer.XYZ(
    "mylayer",
    [
        "http://localhost/mylayer/${z}/${x}/${y}.png&apikey='+ generateAPIKey()
    ], {
        sphericalMercator: true,
        wrapDateLine: true,
        transitionEffect: "resize",
        buffer: 1,
        numZoomLevels: 17
    }
);

var map = new OpenLayers.Map({
    div: "map_canvas",
    layers: [mylayer],
    controls: [
        new OpenLayers.Control.Attribution(),
        new OpenLayers.Control.Navigation({
            dragPanOptions: {
                enableKinetic: true
            }
        }),
        new OpenLayers.Control.Zoom(),
        new OpenLayers.Control.Permalink({anchor: true})
    ],

       center: [somelat,somelon],
        zoom: 14

}); 
```

我明白出了什么问题， generateAPIKey 函数只执行一次。有类似 Google getTileUrl 的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:05:04.020

是的，XYZ 层的方法`getURL`可以为每个图块调用，如下所示：

```
 /**
     * Method: getURL
     *
     * Parameters:
     * bounds - {<OpenLayers.Bounds>}
     *
     * Returns:
     * {String} A string with the layer's url and parameters and also the
     *          passed-in bounds and appropriate tile size specified as
     *          parameters
     */
    getURL: function (bounds) {
        var xyz = this.getXYZ(bounds);
        var url = this.url;
        if (OpenLayers.Util.isArray(url)) {
            var s = '' + xyz.x + xyz.y + xyz.z;
            url = this.selectUrl(s, url);
        }

        return OpenLayers.String.format(url, xyz);
    } 
```

只需覆盖此方法并附加您的 API 密钥。

# c# - C# 和 ASP.net 从 gridview 中的数据集中获取特定列

> ID：10941104
> 
> 赞同：0
> 
> 时间：2012-06-07T23:09:01.647
> 
> 标签：c#, asp.net, ms-access

如何从数据集中仅获取一个特定列？

我想获取用户名等于当前登录用户的列，我知道该怎么做并且有点工作。

这是我用来将数据集绑定到gridview的代码

```
dsUser myDataSet3 = new dsUser();

myDataSet3 = Users.GetNote(Server.MapPath("wsc_database.accdb"), UserID);

grdNote.DataSource = myDataSet3.Tables["User"].Rows[0]["usr_note"];

grdNote.DataBind(); 
```

哪种给了我正确的结果，但是，格式很荒谬（显然无法发布图片）

但它给了我想要的专栏，但格式很糟糕。

[t]
[h]
[i]
[s]

每个字母在它自己的行和列中分开。

我怎样才能得到相同的列结果，但不能像这样拆分？

我对此很陌生，希望我很清楚，整天都在为此苦苦挣扎。提前感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:40:19.737

```
grdNote.DataSource = myDataSet3.Tables["User"].DefaultView;
grdNote.DataBind(); 
```

然后在 html 中将您的列绑定到“usr_note”列

```
<asp:GridView ID="grdNote" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="usr_note" HeaderText="Note" />
    </Columns>
</asp:GridView> 
```

我的问题是你为什么要在网格视图中显示 1 条记录，如果它只有一条记录，那么使用 gridview 有什么意义？

# java - 在分号分隔的数字列表中查找数字的正则表达式模式

> ID：10941105
> 
> 赞同：0
> 
> 时间：2012-06-07T23:09:04.720
> 
> 标签：java, regex

```
String temp = "77"; // It can be 0 or 100 or any value

// So the pattern will be like this only but number can be change anytime
String inclusion = "100;0;77;200;....;90"; 
```

我需要编写一个正则表达式，以便我可以查看 temp 是否存在于包含中，因此我编写了这样的 regexPattern。

```
// This is the regular Expression I wrote.
String regexPattern = "(^|.*;)" + temp + "(;.*|$)"; 
```

那么你认为这个正则表达式每次都能工作还是那个 regexPattern 有问题？

```
if(inclusion.matches(regexPattern)) {

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:14:14.260

如果可以包含正则表达式的特殊字符，您可能会遇到问题`temp`，但如果它始终是整数，那么您的方法应该没问题。

但是，更直接的方法是将字符串拆分为分号，然后查看是否`temp`在结果数组中。

~~如果您确实坚持使用正则表达式，您可以通过删除 来简化它`.*`，以下将与您当前的正则表达式一样工作：~~

 ~~```
"(^|;)" + temp + "(;|$)" 
```~~  ~~**编辑：**糟糕，上面的内容实际上不起作用，我对 Java 中的正则表达式有点不熟悉，也没有意识到整个字符串需要匹配，谢谢 Affe！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T23:15:58.827

你不需要正则表达式：

```
temp = "77"
String searchPattern = ";" + temp + ";";
String inclusion = ";" + "100;0;77;200;....;90" + ";";
inclusion.indexOf(searchPattern); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T23:17:29.440

没有正则表达式的另一种选择

```
String inclusion2 = ";" + inclusion + ";";  // To ensure that all number are between semicolons
if (inclusion2.indexOf(";" + temp + ";") =! -1) {
   // found
} 
```

当然，这里没有模式识别（通配符之类的）~~

# javascript - Node.js 分离模块依赖

> ID：10941106
> 
> 赞同：0
> 
> 时间：2012-06-07T23:09:18.463
> 
> 标签：javascript, node.js, express

将所有模块依赖项分离到一个名为的新文件中的最佳方法是什么**`dependencies.js`**，例如，需要该文件**`server.js`**。我如何返回所有这些要求？

```
var express = require('express')
  , stylus = require('stylus')
  , fs = require('fs')
  , https = require('https')
  , app = express(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:16:41.557

您需要将它们分配给`global`对象，因此您**根本不应该这样做**

```
global.express = require('express');
global.stylus = require('stylus');
global.fs = require('fs')
global.https = require('https')
global.app = global.express(); 
```

* * *

实际上有很多理由不这样做，但我会归结为。首先，您知道当在模块中声明变量时（例如`var Foo = require('foo')`），该变量是该模块本地范围的一部分。`global`另一方面，对所有模块都是全局的。考虑一下*所有*模块共享相同命名空间对于关键事物的影响，这些关键事物不能保证在运行时的特定点处于任何一种状态（`global`实际上是在节点决定需要时重置！）。如果您开始使用多个进程（如@Hippo 提到但没有解释），这个问题可能会加剧。

我可以理解为什么一开始这**似乎**是一个好主意，但是与隐藏在代码中的意外失败相比，您从该技术中获得的少量 DRY 相形见绌。

IMO，无论如何，最好在每个模块中明确声明您的依赖关系。在所有模块中共享一个 deps 列表会混淆程序的逻辑结构。

# jquery - 用 jquery-validate 替换表单中的逗号

> ID：10941107
> 
> 赞同：0
> 
> 时间：2012-06-07T23:09:27.843
> 
> 标签：jquery, html, forms

让我们使用以下形式插入 5 个 >0 的数值：

```
 <label for="altezza">Inserisci la tua altezza (in cm)</label>
    <input type="text" name="altezza" id="altezza" value="" />

    <label for="peso">Inserisci il tuo peso (in kg)</label>
    <input type="text" name="peso" id="peso" value="" />

    <label for="vita">Inserisci la misura della tua vita (in cm)</label>
    <input type="text" name="vita" id="vita" value="" />

        <label for="fianchi">Inserisci la misura dei tuoi fianchi (in cm)</label>
    <input type="text" name="fianchi" id="fianchi" value="" />

        <label for="collo">Inserisci la misura del tuo collo (in cm)</label>
    <input type="text" name="collo" id="collo" value="" />

    <input type="submit" id="submit" value="Invia" /> 
```

验证器：

```
$(document).ready(function(){
    $("#formpeso").validate({
        debug: false,
        rules: {
            altezza: {min:1, required: true},
            peso: {min:1, required: true},
            vita: {min:1, required: true},
            fianchi: {min:1, required: true},
            collo: {min:1, required: true},
        },
        messages: {
            altezza: "Non hai compilato il campo!<br />",
            peso: "Non hai compilato il campo!<br />",
            vita: "Non hai compilato il campo!<br />",
            fianchi: "Non hai compilato il campo!<br />",
            collo: "Non hai compilato il campo!<br />",

        },
        submitHandler: function(form) {
            $.post('calcolatore2.php', $("#formpeso").serialize(), function(data) {
                $('#results').html(data);
            });
        }
    });
}); 
```

让用户使用逗号而不是“。”插入值的任何方式 小数分隔符，并让验证器替换那些逗号？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:55:02.360

使用一个单独的函数，就像 Sparky672 提到的那样，像这样：

```
$('#submit').click(function(){
    $('input').not('#submit').each(function(){
         $(this).val($(this).val().replace(',','.'));                 
    });
}); 
```

# javascript - 比较 indexOf 的结果时的性能

> ID：10941109
> 
> 赞同：1
> 
> 时间：2012-06-07T23:09:50.970
> 
> 标签：javascript, performance, comparison

您可能已经知道， 的返回值`indexOf`是`index`(found) 或`-1`(not found)。

有很多方法可以测试这个结果，其中一些是：

```
if (result != -1) //different than -1
if (result >= 0) //greater or equal to 0 
```

和其他不那么常见的选项：

```
if (result + 1) //-1 turns to: -1 + 1 = 0 (falsish value)
if (~result) //-1 turns to: -(-1 + 1) = 0 (falsish value) 
```

还有无数其他选择...

哪种方法在所有浏览器中都表现良好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:09:52.140

不久前我进行了一些[密集测试](http://jsperf.com/not-vs-gt-vs-ge/4)，我比较了所有这些组合：

```
if (~results) 
if (results > -1) 
if (!(results < 0))
if (results >= 0)
if (!(results <= -1))
if (results != -1)
if (!(results == -1))
if (results + 1)
if (!(results + 1)) 
```

在[我的测试](http://jsperf.com/not-vs-gt-vs-ge/4)中，我每次都添加了两行，一条成功，一条失败。这样做的原因是因为我们希望这两种情况的平均值能够更好地了解它通常的表现。

我的结论是，这`~x`确实`x >= 0`是很好的选择，但我会选择后者，因为它具有可读性和更容易的代码可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:56:24.087

如果您关心性能，您可以考虑制作自己的 indexOf 方法。看看这个 [性能测试](http://jsperf.com/testcase-for-finding-index-of-value-in-array/2)，结果让我有点吃惊。另请注意，IE8 及以下不支持 indexOf

# python - Python在字符串的两侧“加入”？

> ID：10941112
> 
> 赞同：6
> 
> 时间：2012-06-07T23:10:09.737
> 
> 标签：python, string, list

```
l = ['1','2','3']
goal = ['<li>1</li>','<li>2</li>'] 
```

我怎样才能`goal`得到`l`？

我正在玩列表推导，但它很乱！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T23:13:00.047

尝试字符串格式化和列表理解，就像这样。

```
goal = ['<li>{0}</li>'.format(x) for x in l] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:16:10.407

使用两个选项`str.format()`：

```
goal = map('<li>{0}</li>'.format, l) 
```

... 或者...

```
goal = ['<li>{0}</li>'.format(x) for x in l] 
```

请注意，在 Python 3.x`map()`上将返回一个迭代器而不是一个列表，所以如果你想要一个列表，你需要使用`list(map(...))`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:15:27.393

用`string.format`方法

```
goal = ['<li>{0}</li>'.format(sym)  for sym in l] 
```

# asp.net - 使用单独的 web.config 在子文件夹中运行网站？

> ID：10941121
> 
> 赞同：0
> 
> 时间：2012-06-07T23:11:26.220
> 
> 标签：asp.net, web-config, forms-authentication

我想知道是否可以在子文件夹中运行 aspx.net 网站，如果它有自己的带有表单身份验证的 web.config 并且正在使用角色管理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:46:14.837

我最近为嵌套应用程序做了这个。它不是太难。

除了可以访问相同的数据存储以获取凭据和角色数据之外，您还需要：

*   确保两个 Web 应用程序的 machineKeys 相同
*   配置 loginUrl 以解析到相同的绝对路径
*   如果您使用 cookie，则需要确保将域设置为两个 Web 应用程序都可用的值
*   同样对于 cookie，如果您的 Web 应用程序嵌套在域中的不同级别，请确保将路径属性设置为“/”

有关使表单身份验证正常工作的更多详细信息，请参阅[此博客文章](http://dylanbeattie.blogspot.com/2012/03/cross-domain-forms-authentication-with.html)。

嵌套应用程序特有的另一个问题是，默认情况下，您的嵌套 web.config 将从父应用程序的 web.config 继承设置。这意味着您可能需要删除子配置中位于父配置中的某些项目，并删除当前位于子应用配置中但已存在于父配置中的项目。有关更多详细信息，请参阅[此](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:14:15.310

仅当您将此子目录设置为与 iis 不同的 asp.net 应用程序时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:15:23.867

如果您使用虚拟目录，我认为不会有任何问题。在这里查看更多信息：

[http://msdn.microsoft.com/en-us/library/zwk103ab(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zwk103ab(v=vs.80).aspx)

[http://www.dotnetspider.com/tutorials/AspNet-Tutorial-86.aspx](http://www.dotnetspider.com/tutorials/AspNet-Tutorial-86.aspx)

这是你要找的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T01:31:16.017

只能在配置中为所有应用程序或 Web 应用程序的根文件夹设置身份验证。设置会话相同。您可以使用子文件夹。但它必须是它自己的应用程序，所以基本上将它作为另一个应用程序的子文件夹没有多大意义。

# php - 如何使用 php shell_exec 和 sql 命令行创建数据库

> ID：10941124
> 
> 赞同：2
> 
> 时间：2012-06-07T23:11:31.550
> 
> 标签：php, mysql

我正在尝试使用 shell_exec 和 mysql 命令创建数据库。由于几个原因，我不想使用 php 内置的 mysql_query。但是，我无法成功执行以下命令。任何人都可以告诉我出了什么问题？

```
$test = shell_exec("mysql -u root -pmypassword create database db_hello;");

var_dump($test); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T23:15:38.520

正确的语法是这样的：

```
mysql -u [username] -p -e "create database somedb" 
```

或者

```
mysql --user=user_name --password=your_password -e "SELECT 1 FROM information_schema.tables" 
```

参考：[http ://www.electrictoolbox.com/run-single-mysql-query-command-line/](http://www.electrictoolbox.com/run-single-mysql-query-command-line/)

```
$cmd = escapeshellcmd('mysql -u [username] -p -e "create database somedb"');
$test = shell_exec($cmd);

var_dump($test); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T14:11:09.230

问题可能是您的 php 脚本中 mysql 的路径。对我来说是：/usr/local/bin/mysqld (osx 10)

# asp.net - 书呆子晚餐地图显示在容器 div 之外

> ID：10941125
> 
> 赞同：1
> 
> 时间：2012-06-07T23:12:05.660
> 
> 标签：asp.net, c#-4.0, jquery, nerddinner

我正在 MVC2 中实现书呆子晚餐示例。我遇到的问题是地图。启用 Ajax 的地图无法在网页上正确显示，即实际地图显示在它应该实际显示的 div 元素之外。

```
 <div id="mapDiv">
              <% Html.RenderPartial("Map", Model.Dinner); %>
            </div> 
```

以上是我的晚餐表格中的代码，它调用了我的 Map.ascx 。Map.ascx 调用 Map.js 中的 loadmap 函数，这些文件直接从指南中复制而来。我尝试在不同的浏览器中打开表单，但地图仍然不合适。

我已经检查了代码，但似乎遗漏了一些非常小的细节。对于这个菜鸟问题，任何帮助将不胜感激。抱歉，由于“声誉”点数较少，无法上传照片。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:04:02.263

我在这里找到了一篇文章[http://forums.asp.net/t/1569315.aspx/1](http://forums.asp.net/t/1569315.aspx/1)。试试看，看看效果如何……

# javascript - 在 html 上使用 javascript 运行 .bat 文件

> ID：10941129
> 
> 赞同：1
> 
> 时间：2012-06-07T23:12:37.497
> 
> 标签：javascript, html

当用户单击网页上的链接时，我需要运行一个 .bat 文件。.bat 文件基本上运行另一个可执行文件并将其输出保存在文本文件中。所以我想要的是在用户单击网页上的 .bat 文件的链接后创建该文本文件。现在，当我单独执行它时，我的 .bat 文件运行良好，它会创建包含内容的文本文件，但不知何故，当我单击链接时，它会创建一个空文本文件。我看了看所有的路径，它们都很好；我正在使用批处理文件，我也尝试过 function runApp(which) { WshShell = new ActiveXObject("WScript.Shell"); WshShell.Run (which,1,true); 但他们都只是创建文本文件，而不是把内容

有没有人对此有任何想法，还有其他方法可以做到这一点，比如运行原始的 .bat 文件，然后直接使用 html/javascript 在文本文件中获取其输出？

Appriciate任何帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:37:17.647

你没有说你正在使用什么环境，我猜你没有使用服务器端环境。JavaScript 通常在浏览器中工作以响应用户的点击和鼠标移动等，但严格在浏览器的范围内。您要做的是在浏览器正在运行的底层操作系统（如果您在本地运行）或在普通网页环境中的服务器端操作系统上执行 I/O 操作。这不仅仅是一个安全问题——JavaScript 与客户端操作系统或服务器端操作系统没有任何直接连接。

您需要的是一个像 Apache 或 IIS 等的 Web 服务器环境，可能运行像 ASP.NET、JSP、PHP（具有像 CodeIgniter 这样的好框架）这样的环境，或者，而不是我，CGI。

用户单击链接或提交按钮，并向服务器发送请求。相关的服务器端程序处理请求，运行您所说的 I/O 操作并以文本响应。JavaScript 在大部分过程中都无关紧要。只有当您试图弄清楚如何以某种奇特的动态方式显示响应时，它才会再次出现。

那里有数百万个教程：

*   Tomcat (Java) [http://wiki.apache.org/tomcat/GettingStarted](http://wiki.apache.org/tomcat/GettingStarted)
*   .NET（C# 或 VB） [http://www.asp.net/get-started](http://www.asp.net/get-started)
*   Codeigniter (PHP) [http://codeigniter.com/](http://codeigniter.com/)
*   CGI（不适合胆小的人）[http://www.cgi101.com/book/ch1/text.html](http://www.cgi101.com/book/ch1/text.html)

说了这么多，有一个服务器端的 JavaScript 环境（http://nodejs.org/），但关键是你总是会受到 http 协议的限制，这意味着你向服务器发送请求，服务器根据您作为客户端的权限处理您的请求，在适当的情况下执行 I/O 操作，并以 HTML 流响应。它不允许在服务器上进行直接操作。

这一切都不容易。期待陡峭的学习曲线。

# 显示文本文件内容

这是一个示例 JSP 页面，它将读取文本文件的内容，然后将其显示在网页上。我没有添加任何按钮或任何东西——它只是演示了如何读取服务器上的文件：

```
<%@page contentType="text/html" pageEncoding="UTF-8" import="java.io.*"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>BufferedReader</title>
</head>
<body>
    <%
    String path = this.getServletContext().getRealPath("/target/message.txt");
    File file = new File(path);
    FileReader reader = new FileReader(file);
    BufferedReader br = new BufferedReader(reader);
    while(br.ready()){
        out.print(br.readLine() + "<BR>");
    }
    reader.close();
    %>
</body>
</html> 
```

`/target/message.txt`是虚拟绝对路径（从 webapp 的根目录开始）。调用`getRealPath`是您获得允许您创建 File 对象的真实物理路径的方式。

稍后我会看看使用`exec`来运行批处理文件，但现在您正在考虑像 Java 这样功能强大的语言/库，为什么要运行批处理文件？用Java编写程序没有意义吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-06T09:06:53.487

使用 node.js 的 child_process.spawn

# jquery - 动态添加内容的窗口高度

> ID：10941137
> 
> 赞同：1
> 
> 时间：2012-06-07T23:13:19.570
> 
> 标签：jquery

```
$(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() == $(document).height()) {
        p++;
        loadImages(p);
    }
}); 
```

每次用户滚动到页面底部时，我都会动态添加图像。但这仅在您第一次触底时才有效。有什么方法可以更新文件高度吗？或者我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:17:07.613

可能是一个四舍五入的问题。`==`您可能想要检查它是否减去几个像素，而不是严格。这可能会有所帮助，因为您可以在图像完全到达底部之前加载它们。

# jquery - JQuery 图标自定义和悬停状态问题

> ID：10941138
> 
> 赞同：1
> 
> 时间：2012-06-07T23:13:27.523
> 
> 标签：jquery, css, jquery-ui, icons

** 解决了 **

Chrome 显然可以对缓存中的文件产生*致命的影响。*杀死进程，手动清除缓存，刷新十几次都没有用。

更改文件名以强制它下载新*内容*。

去搞清楚。

* * *

** 更新 **

好的，所以这是 Chrome 唯一出现的问题。为了响应清除浏览器缓存的建议，我实际上启动了 IE 9，因为它从未加载过该页面。这*确实*显示了悬停状态的图标。

现在我真的很难过，因为跨平台问题超出了我的工资等级。这就是为什么我首先让 JQuery 为我完成所有繁重的工作！:P

* * *

使用最新的 1.8.20 JQuery。

需要一个图标，因此编辑了所有 7 个主图标 png 文件，并在未使用的空间中添加了一个图标。

在具有相关偏移量的 css 文件中创建了一个新图标。一切似乎都工作得很好，除了悬停状态，它是空白的。

似乎无法通过检查确定在悬停状态下正在使用哪个文件，但 CSS 文件指示一个 png 文件，其中显示了我的自定义图标。反正都已经编辑过了。

关闭浏览器并刷新了几次（尽管缓存会阻止我看到它）。

为什么在悬停状态下图标是空白的？

**回应反馈**

没有代码，因为正如我已经说过的，它可以在所有其他按钮状态下工作。无论如何，其中大部分都是在 Photoshop 中完成的。这似乎是不必要的，所以我为遗漏道歉。

```
.ui-icon-dollar { background-position: -160px -144px; } 
```

这是 CSS 文件中唯一额外的代码行。其他一切都未修改。

```
/* states and images */
.ui-icon { width: 16px; height: 16px; background-image: url(/images/ui-icons_0078ae_256x240.png); }
.ui-widget-content .ui-icon {background-image: url(/images/ui-icons_0078ae_256x240.png); }
.ui-widget-header .ui-icon {background-image: url(/images/ui-icons_d8e7f3_256x240.png); }
.ui-state-default .ui-icon { background-image: url(/images/ui-icons_e0fdff_256x240.png); }
.ui-state-hover .ui-icon, .ui-state-focus .ui-icon {background-image: url(/images/ui-icons_056b93_256x240.png); }
.ui-state-active .ui-icon {background-image: url(/images/ui-icons_f5e175_256x240.png); }
.ui-state-highlight .ui-icon {background-image: url(/images/ui-icons_f7a50d_256x240.png); }
.ui-state-error .ui-icon, .ui-state-error-text .ui-icon {background-image: url(/images/ui-icons_fcd113_256x240.png); } 
```

这些是来自 JQuery Themeroller 的原始 CSS 行。所有主图标文件都是相同的（除了颜色），并且没有为一个图标定义多个偏移量。我添加的那一行代码就是正常定义图标的全部内容。

由于它在其他状态下正确显示，我只能假设偏移量是正确的。

现在对于 Chrome 中的检查工具，它只是在悬停状态下的 span 元素上没有显示任何差异。该背景图像保持不变。

我不知道您可以使用 Chrome 实时编辑它！：） 感谢那。

在悬停状态下实时更改背景图像对按钮本身没有影响。它仍然是空白......

当然，我正在经历所有这些，因为制作自己的图标很好而且很花哨，但是您不能使用 .button 来定义任何按钮和回调，而不受这些主图标文件中的内容的限制。一次调用即可激活按钮的所有不同状态、定义标签和回调，这非常有用。写更少的代码和所有这些:)

必须有一种方法可以将按钮图标添加到 JQuery 主题并仍然让它们在框架内工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:21:09.210

This may sound obvious but the first thing I think of when a similar thing happens to me is browser cache. To remedy it I try ctrl-refresh, or a different browser. I am surprised how often it helps. I hope your problem is as simple. =]

# javascript - 如何避免这种糟糕的 for 循环？

> ID：10941148
> 
> 赞同：0
> 
> 时间：2012-06-07T23:14:55.643
> 
> 标签：javascript, math

我试图遍历一个很大的数字（准确地说是 60 亿），但我不能，因为我的电脑死机了。我该如何解决这个问题。我应该找到 的最大素因数`600851475143`。

```
function prime(n) {
    if (n === 1 || n === 2) return false;
    if (n % 2 === 0 || n % 3 === 0) return false;
    return true;
}
var n = 600851475143;
for (var i = 1, c = []; i < n; i++) {
    if ((n % i === 0) && prime(i)) {
        c.push(i);
    }
} 
```

我已经完成了。我将素数存储在一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:31:58.057

您的`prime()`功能没有按照名称所说的那样做。有许多有效的分解素数的方法，例如，试试这个：

```
var x = 600851475143;
var i = 2;
var sk;
while(i <= x) 
{
    while (x % i == 0)
    {
        sk = i;
        x = x / i;
    }
    i++;
}
console.log(sk); 
```

输出：`6857`

[此](http://www.btinternet.com/~se16/js/factor.htm)页面有另一个（查看源代码）功能用于分解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:54:35.863

该`prime`函数不仅返回素数，还返回所有非 1 或不能被 2 和 3 整除的正整数。

让我们再看看整个算法。首先，请注意您不需要遍历`n`，您可以停在它的平方根处（考虑一下）。

```
var divs = [];
if (!(n & 1)) { // Checking if n is even, using faster bit operators
    divs.push(2);
    while (!(n & 1)) n >>= 1;
}
var d = 3, l = Math.sqrt(n);
while (d < l) {
    if (!(n % d)) {
        divs.push(d);
        while (!(n % d)) n /= d;
        l = Math.sqrt(n);
    }
    d += 2; // No even numbers except 2 are prime, so we skip them
}
if (n !== 1) divs.push(n); 
```

现在`divs[divs.length - 1]`包含 的最大素除数`n`和`divs`所有素因数。

# php - PHP 在没有 www 的情况下进行会话

> ID：10941149
> 
> 赞同：2
> 
> 时间：2012-06-07T23:14:55.733
> 
> 标签：php, session, cookies

我有一个用 Ironcube 编码的脚本，当我登录到该脚本时，它会为带有 www 的域创建一个会话。只要。因此，如果我输入 mydomain.com，会话会发生变化，我无法访问 WWW.mydomain.com 的会话变量。

我会添加适当的脚本，以便它为两者创建一个带有 www 的会话。没有，但脚本是用 Ironcube 编码的。

所以我的问题是，我需要从 mydomain.com 访问使用 WWW.mydomain.com 创建的会话。

任何援助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:24:49.483

这是浏览器为防止 cookie 窃取而实施的安全措施。
解决方法是为顶级域设置 cookie。

如果您有域`www.example.com`并`example.com`在 PHP 文件的开头使用以下代码。

```
ini_set('session.cookie_domain', '.example.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:41:19.190

编写另一个在 www 域中运行的脚本，它将获取 cookie 的值并将其写入 domain.com 中的另一个 cookie，以便您的脚本可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:24:47.313

会话是错误的术语。你指的是cookies。您需要设置 cookie 以便它在域上`.mydomain.com`

# php - PHP file_get_contents() 遵循 Content-length 标头

> ID：10941150
> 
> 赞同：3
> 
> 时间：2012-06-07T23:14:55.753
> 
> 标签：php, http-headers, file-get-contents, content-length, http-content-length

我正在使用这样的代码：

```
//对客户来说重要的东西的部分
ob_start();
回声“废话……随机内容”。兰特（1,1000）；
$size = ob_get_length();
header("内容长度：$size");
header('连接：关闭');
ob_end_flush();
ob_flush();
冲洗（）；
//客户端应忽略所有以下输出/脚本运行时间（file_get_contents（））
睡眠（10）；
echo "长动作完成";

```

输出一些内容并随后运行耗时的后台作业。
在另一个文件中，我试图访问第一个脚本的数据，而不必等待后台作业完成。
不幸的是，这对我不起作用：

```
$content = file_get_contents("http://some-address/thescript.php");
回声$内容；

```

因为它不注意 Content-length 标头。在浏览器中，整个事情都可以正常工作。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:44:35.810

解决它。如果有人遇到同样的问题：

```
 $url = "http://some-adress/test.php";
$headers = get_headers($url, 1);
$content_length = $headers["Content-Length"];
$content = file_get_contents($url, NULL, NULL, NULL, $content_length);
echo $content; 

```

# c - 在给定概率的情况下生成人口的伪样本

> ID：10941152
> 
> 赞同：0
> 
> 时间：2012-06-07T23:15:06.563
> 
> 标签：c, cocoa, random, distribution, sample

我想生成符合实际采样数据分布的伪数据。在 C/Obj-C 中寻找一种高效且准确的方法来进行 iphone 开发。目前，在 1000 个采样事件中出现 60 个不同类别的概率已分配为 (0-1)。我想生成 1000 个符合相同概率的新事件。

### *澄清{*

我有一个集合 {1,2,...,60} 的分类分布。我了解此分布中的样本将符合每个类别的概率。因此我需要从这个分布中抽取 1000 个样本。我已经确定（感谢到目前为止的答案）我需要：

1.  通过对这些值求和并将每个值除以总和来规范化此分布。

2.  订购它们。

3.  通过将每个值替换为所有先前值的总和来创建 CDF。

4.  然后我可以生成一个介于0和1之间的均匀随机数，并在CDF中找到其值小于或等于刚刚选择的数的最大数，并返回这个CDF值对应的类别。

    ### *}*

**Q1**。这是解决问题的正确方法吗？

**Q2**。需要注意的是，我使用 NSDecimals 来存储类别概率。Cocoa 或 Math.h 等中是否有任何可用的库或函数可以用来简单地执行此操作？我愿意尝试新的库，目前这个项目中只有 Core-Plot 和标准 Cocoa 库。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:12:15.753

您的问题描述不清楚。但听起来你正在寻找[逆变换采样](http://en.wikipedia.org/wiki/Inverse_transform_sampling)。

基本上，您首先需要生成与您的原始数据相对应的[累积分布函数（CDF） ；](http://en.wikipedia.org/wiki/Cumulative_distribution_function)称它为 F(x)。然后生成0->1 范围内的均匀随机数据，然后使用逆CDF 对其进行变换，即F ^(-1) (x)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:28:51.790

这是我的建议。这假设当您说“归一化概率”时，您的意思是所有类型的概率之和为 1。（如果不是，您需要重新调整比例，这样就可以了。）

*   为您的 60 种类型制作一些订单。（比如说，字母。）
*   生成一个介于 0 和 1 之间的随机数。（称其为您的“目标”。）
*   创建一个累加器，最初为 0。
*   循环浏览您的 60 种类型。对于每种类型：
    *   将该类型事件的概率添加到您的累加器中。
    *   如果您的累加器 >= 您的目标，则生成该类型的事件并停止。

如果你这样做 1000 次，我相信你会得到你正在寻找的分布。

# javascript - 如何为咖啡脚本启用源映射？

> ID：10941164
> 
> 赞同：21
> 
> 时间：2012-06-07T23:15:49.240
> 
> 标签：javascript, coffeescript, source-maps

[我最近通过haxe 语言中的源调试](http://haxe.org/doc/js/source_debugging)发现了chrome中存在[源映射](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)。它允许在 chrome 浏览器中调试生成的 javascript，同时查看原始源代码中的错误原因。

有没有人为咖啡脚本编写了源映射生成器/咖啡脚本源可映射吗？

这将有助于调试由 coffeescript 生成的 javascript。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T17:52:11.723

Coffeescript 1.6 原生支持源映射。

使用“--map”或“-m”选项来启用它。或者，如果您使用 npm 编译器，则必须添加该`sourceMap: true`选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T01:39:40.247

```
npm install -g coffee-script 
```

应该将咖啡脚本安装为全局模块。通过键入检查版本> 1.6

```
coffee -v 
```

如果您需要帮助，您可以使用。用它来查看下面使用的选项的含义

```
coffee -h 
```

用于常规编译使用

```
coffee -mo script/ -cw src/ 
```

这应该会自动生成地图文件。我在编写代码时让它在终端中运行，每次保存时它都会编译。

### 已知错误：

当前的咖啡脚本编译器似乎无法处理不同的 /src 和 /script 目录。在地图文件中，您会发现源 = {filename} 而不是 {relative file path}。

### 解决方案：

1.  将您的 .coffee 文件保存在与 .js 相同的目录中
2.  在 .map 文件中手动修改源指令。这将在下次保存时再次被覆盖

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-08T03:02:18.830

这一直是 CoffeeScript 项目中的一个活跃问题（事实上，它早于源地图标准）。然而，目前还没有（完整的）CoffeeScript 源映射生成器。有关讨论，请参阅[https://github.com/jashkenas/coffee-script/issues/558](https://github.com/jashkenas/coffee-script/issues/558)

源映射支持也是最近在 Kickstarter 上资助的“CoffeeScript Redux”编译器的目标之一（参见[http://www.kickstarter.com/projects/michaelficarra/make-a-better-coffeescript-compiler](http://www.kickstarter.com/projects/michaelficarra/make-a-better-coffeescript-compiler)）。那个项目才刚刚开始；您可以在[https://github.com/michaelficarra/CoffeeScriptRedux观看](https://github.com/michaelficarra/CoffeeScriptRedux)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-06T12:19:43.363

Ps，如果你在 vim 上，请使用：

```
au BufWritePost *.coffee silent make -m 
```

它在文件保存时与源映射一起编译。当我想要一些随机缓冲区开始为我编译咖啡时，我发现它非常方便。

# iphone - 如何卸载uiview

> ID：10941167
> 
> 赞同：1
> 
> 时间：2012-06-07T23:16:09.953
> 
> 标签：iphone, ios, addsubview

我目前正在使用这个 if 语句来检查是否加载了 uiview，这个 if 语句可以正常工作..

```
 if (!myviewName.isViewLoaded) {
         //not loaded so load my view

    }
    else (myviewName.isViewLoaded){
         //is loaded so remove my view (unload)

    } 
```

但是，当我尝试删除视图时，我认为我做的不正确，因为在第一次加载视图后我永远无法输入 if 语句的第一部分......

这是**else 里面的代码 (myviewName.isViewLoaded){**

```
[myviewName removeFromParentViewController];
   [animatedActionView removeFromSuperview]; 
```

我使用**removeFromParentViewController**的原因是因为我添加了 myviewName 作为animatedActionView 的子视图，就像这样

```
[animatedActionView addSubview:b1VC.view];
[navigationController.view insertSubview:animatedActionView belowSubview:tabbarView]; 
```

animatedActionView 作为子视图添加到我的导航控制器中，我将它放在我的 tabbarview 后面，这也是我的导航控制器上的子视图。

希望这一切都有意义.. 只是重复我的问题，我如何删除视图以便它可以访问**if (!myviewName.isViewLoaded) {**正确。

任何帮助，将不胜感激。

更新：根据回复，我被要求更详细地解释我要做什么，我将在这里做。

所以，我的原始项目有一个 NavController 控制我项目第一部分（查询数据库）所需的所有视图，我项目的第二部分显示大量数据。

所以我在一个新项目中对我的最终视图进行原型设计，以解决我可能遇到的所有问题，并希望以一种不会被苹果拒绝的方式来做。

因此，当我到达导航控制器的最终视图时，我正在其中加载另一个导航控制器。（这会让我被拒绝吗？）

这个（子）navController 我将称为 otherNav 将控制最终视图，它将加载几个不同的 detailViewController 并带有特殊的滑动过渡动画，用户将能够在详细视图之间左右滑动。

我还添加了一个 tabBar（在它自己的视图控制器中）作为 othernav 的子视图，当用户在详细视图之间转换时，我计划根据视图更改 tabBar 图标，因此当用户从一个详细视图滑动到另一个时以前的图标会淡出，新的图标会淡入。

最后，我还有其他几个视图控制器，我称之为 actionViews（这是我的问题所在），它们作为子视图加载/插入到 otherNav 上，但放置在 tabBar 后面，并在选择和取消选择 tabbar 按钮时上下滑动。

这是所有视图的图形表示以及它们在屏幕上的位置。

![在此处输入图像描述](../Images/9b7ef06d849c8000ac1cf2532521dd0e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:25:00.420

您需要注意 myViewName 的视图：

```
[myViewName.view removeFromSuperview];
myViewName.view = nil; 
```

# winapi - CListCtrl：如何保持水平滚动位置？

> ID：10941173
> 
> 赞同：3
> 
> 时间：2012-06-07T23:17:00.560
> 
> 标签：winapi, mfc, scroll, clistctrl

如何保持 CListCtrl 的水平滚动条位置？我定期转储并重新填充列表控件的内容，因此在没有明确记住旧位置并恢复它的情况下，滚动只是回到左上角。

我问了一个相关的问题，[CListCtrl：如何保持滚动位置？](https://stackoverflow.com/questions/7604267/clistctrl-how-to-maintain-scroll-position)，较早但当时我只对垂直滚动位置感兴趣，提供的答案解决了这个问题。但是，现在我想记住并恢复水平滚动位置（以及垂直滚动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T19:17:47.520

首先，您可能认为它更简单。您必须在重新填充列表之前和重新填充强制列表控件之后保存位置以更新新内容。

此外，您可能会考虑到新内容可能具有不同数量的项目这一事实，因此您必须设置相对于最大滚动位置的位置。

示例代码如下：

```
 SCROLLINFO sbiBefore = { sizeof(SCROLLINFO) };
    SCROLLINFO sbiAfter = { sizeof(SCROLLINFO) };

    // get scroll info before
    sbiBefore.fMask = SIF_ALL;
    m_List.GetScrollInfo(SB_HORZ, &sbiBefore);

    RenewContents();

    // force control to redraw
    int iCount = m_List.GetItemCount();
    m_List.RedrawItems(0, iCount);

    // get the scroll info after
    sbiAfter.fMask = SIF_ALL;
    m_List.GetScrollInfo(SB_HORZ, &sbiAfter);

    double dRatio = (double)sbiAfter.nMax / sbiBefore.nMax;

    // compute relative new position
    sbiAfter.fMask = SIF_POS;
    sbiAfter.nPos = dRatio * sbiBefore.nPos;

    // set new position
    BOOL bSet = m_List.SetScrollInfo(SB_HORZ, &sbiAfter); 
```

我相信您可以以相同的方式处理垂直滚动。在您提到的帖子中， EnsureVisible 用于不必要地强制更新，因为您有更正确的方法。此外，如果最后一项已经可见，则使用 E​​nsureVisible 将不起作用。

# jquery - 如何从html5文件上传中提取图像的数据url

> ID：10941175
> 
> 赞同：0
> 
> 时间：2012-06-07T23:17:07.813
> 
> 标签：jquery, html, upload, fileapi

我目前正在创建一个上传应用程序，我希望图像在用户上传之前显示在浏览器中。我在让图像正常工作时遇到问题。我可以渲染最后修改的文件名，但我无法让 dataurl 工作。

这是我的渲染脚本。该脚本基本上加载一个页面，并应在加载的 div 中呈现图像。但现在，我只能渲染文件名。如果你们能帮助我，我将不胜感激。我已经花了 2 天时间试图让这项工作无济于事。

```
$('#MainPageUploadFormFile').change(function(){
    $('#MainPageContainer').fadeOut()
     .load('AlbumEdit').hide()
     .slideDown();

    var img = document.getElementById('MainPageUploadFormFile');

    setTimeout(function(){
        //    $('#PictureColumn ul').append('<li>' + name + '</li>');
        for (var i = 0; i < img.files.length; ++i) {
            var name = img.files.item(i).name;
            $('#PictureColumn ul').append('<li>' + name + '</li>');
        }
    },100);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:46:04.633

您只是想在上传之前查看您选择的图片吗？

[在上传之前预览图像](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded)

# powershell - 如何通过 Windows PowerShell 的组策略 cmdlet 获取/设置/更新注册表值？

> ID：10941176
> 
> 赞同：2
> 
> 时间：2012-06-07T23:17:10.957
> 
> 标签：powershell, windows-server, cmdlets, group-policy

我已经手动配置了 EventForwarding，但我想知道是否可以以编程方式进行，并且遇到了似乎是解决方案的[组策略 Cmdlet 。](http://technet.microsoft.com/en-us/library/ee461040)这是我试图在下图中手动配置的内容。

![事件转发策略配置](../Images/b82ffa49cf000f064838353a66681385.png)

当我运行**Get-GPO -all** cmdlet 时，我看不到任何与事件转发相关的 GPO。但是，当我使用 XML 文件的指定路径运行**Get-GPResultantSetOfPolicy**时，我看到了事件转发的订阅管理器的配置。

**问题1：为什么Get-GPO -all**结果中没有显示事件转发策略？

问题 2：如何找出我需要的策略的 GUID，以便我可以使用**[Get-GPRegistryValue](http://technet.microsoft.com/en-us/library/ee461040)**？除了提供密钥（我能够找到并验证它具有我通过 gpedit.msc UI 完成的配置。

问题 3：如何找出相关策略的显示名称？我尝试了以下方法：

```
PS C:\Windows\PolicyDefinitions> Get-GPRegistryValue -Name SubscriptionManager -Key HKEY_LOCAL_MACHINE\SOFTWARE\Policies
\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager 
```

我尝试了不同的名称属性，例如：“EventForwarding”、“EventForward”、“SubscriptionManager”，甚至“配置目标订阅管理器”。这就是我得到的：

```
***Get-GPRegistryValue : The command cannot be completed because a GPO that is named "SubscriptionManager" was not found
in the nfstest.stbtest.microsoft.com domain. Make sure that the GPO that is specified by the Name parameter exists in
the domain that is specified for the cmdlet. Then, run the command again.
Parameter name: Name
At line:1 char:1
+ Get-GPRegistryValue -Name SubscriptionManager -Key HKEY_LOCAL_MACHINE\SOFTWARE\P ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (Microsoft.Group...tryValueCommand:GetGPRegistryValueCommand) [Get-GPReg
   istryValue], ArgumentException
    + FullyQualifiedErrorId : GpoWithNameNotFound,Microsoft.GroupPolicy.Commands.GetGPRegistryValueCommand*** 
```

任何有关三个相关问题的帮助将不胜感激。

**编辑 1**：

如下图所示，当我手动配置 taregt 订阅管理器时，我在注册表中获得了*HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager 键*。我现在的问题很简单，如何使用 cmdlet 来做到这一点？到目前为止，我尝试的所有方法都没有在注册表中为我创建该密钥，而不是 AD。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:11:18.343

抱歉，不确定您的工作是什么。这是一个完整的例子：

```
PS C:\silogix> Import-Module grouppolicy
PS C:\silogix> New-GPO -Name "MyGPO" | New-GPLink -target "OU=SousMonou,OU=MonOu,DC=dom,DC=fr" `
                       -linkenabled yes

GpoId       : f31df409-ca35-47cd-b699-52426e2bd196
DisplayName : MyGPO
Enabled     : True
Enforced    : False
Target      : OU=SousMonou,OU=MonOu,DC=dom,DC=fr
Order       : 1

PS C:\silogix> get-gpo -all

DisplayName      : Default Domain Policy
DomainName       : dom.fr
Owner            : DOM\Admins du domaine
Id               : 31b2f340-016d-11d2-945f-00c04fb984f9
GpoStatus        : AllSettingsEnabled
Description      :
CreationTime     : 16/09/2010 21:07:03
ModificationTime : 09/09/2011 21:04:06
UserVersion      : AD Version: 0, SysVol Version: 0
ComputerVersion  : AD Version: 11, SysVol Version: 11
WmiFilter        :

DisplayName      : Default Domain Controllers Policy
DomainName       : dom.fr
Owner            : DOM\Admins du domaine
Id               : 6ac1786c-016f-11d2-945f-00c04fb984f9
GpoStatus        : AllSettingsEnabled
Description      :
CreationTime     : 16/09/2010 21:07:03
ModificationTime : 06/06/2012 17:58:00
UserVersion      : AD Version: 0, SysVol Version: 0
ComputerVersion  : AD Version: 4, SysVol Version: 4
WmiFilter        :

DisplayName      : MyGPO
DomainName       : dom.fr
Owner            : DOM\Admins du domaine
Id               : f31df409-ca35-47cd-b699-52426e2bd196
GpoStatus        : AllSettingsEnabled
Description      :
CreationTime     : 08/06/2012 07:04:16
ModificationTime : 08/06/2012 07:04:16
UserVersion      : AD Version: 0, SysVol Version: 0
ComputerVersion  : AD Version: 0, SysVol Version: 0

PS C:\silogix> Set-GPRegistryValue -Name "MyGPO" -Key HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager -value "Server=https://EVTCPT:5986/wsman/SubscriptionManager/WEC" -t
ype String

PS C:\silogix> Get-GPRegistryValue -name "MyGPO" -Key "HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager"

KeyPath     : SOFTWARE\Policies\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager
FullKeyPath : HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\EventLog\EventForwarding\SubscriptionManager
Hive        : LocalMachine
PolicyState : Set
Value       : Server=https://EVTCPT:5986/wsman/SubscriptionManager/WEC
Type        : String
ValueName   : 1
HasValue    : True 
```

所以你可以在`GPMC.MSC`. ![在此处输入图像描述](../Images/898585c5367c194f86d4ea3ab7513ea2.png)

# objective-c - Objective C 视图到控制器的通信

> ID：10941177
> 
> 赞同：0
> 
> 时间：2012-06-07T23:17:13.377
> 
> 标签：objective-c, model-view-controller

在视图中接受用户输入然后将其传输到该视图的控制器的正确方法是什么？我知道 NotificationCenter 是一种选择，但肯定有一种更优雅的方式可以将数据从视图传输到其控制器吗？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:21:22.947

使用委托协议设计模式，或通过子类化目标操作`UIControl`。想想 a 如何`UIButton`告诉视图控制器它已被按下。在界面构建器中，您连接一个动作 - 一个类似于`touchUpInside:`目标的选择器 - 拥有它的视图控制器。在非 IB 中，您直接告诉使用`UIButton`什么选择器和使用什么目标。

这两种方法在不同的情况下都有意义。例如`UITextField`，使用委托更有意义，因为文本字段可以向您发送任意数量的事件，例如用户开始编辑、结束编辑或键入字符时的事件。

对于按钮，使用 target-action 更有意义，因为实际上只有一个事件以不同的形式表示。

对于滑动和拖动以及其他手势，请使用`UIGestureRecognizer`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:21:36.020

您正在寻找[委托](https://developer.apple.com/library/mac/ipad/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)，其中控制器将自身设置为视图的委托。你从 UITableViewDelegate 就知道了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T23:24:11.347

您正在寻找`Delegation`或`Data Source`. 您可以在此处查看有关此的更多信息，[委托和数据源](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)

一个简短的例子是，类似于以下内容：

```
 //MyViewSubclass.h

  @protocol MyViewSubclassDelegate
  //Implement your delegate methods here.
  -(void)didTouchView; 
  @end

  @interface MyViewSubclass {

     id<MyViewSubclassDelegate>delegate;
  }
  @property(nonatomic,assign)id<MyViewSubclassDelegate>delegate; 
```

当然，`@synthesize`你`delegate`的`MyViewSubclass.m`

现在在类的标题中，您希望`MyViewSubclass`代理成为，您需要遵守 `MyViewSubclassDelegate 协议。

```
 #import "MyViewSubclass.h"
 @interface MyViewController : UIViewController <MyViewSubclassDelegate> 
```

在你`@implementation`的 中`MyViewController.`，实现 的`MyViewSubclassDelegate`方法`-(void)didTouchView`。

初始化和创建`MyViewSubclass`对象时，您设置`MyViewController`为委托：

```
myViewSubclass.delegate = self // Self being MyViewController. 
```

在你的`MyViewSubclass`, 当你准备好转发任何信息，或者只是想触发你会做的方法时`[self.delegate didTouchView]`

希望这可以帮助 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T23:24:47.707

使您的视图成为`UIControl`目标/动作设计模式的子类并实现 - 使用该 `sendActionsForControlEvents:`方法向控制器发送消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T23:25:19.177

UIKit 对象通常`UITextField`具有委托方法，您可以实现这些方法来执行业务逻辑。例如，UITextField 有一个委托方法`- textFieldDidEndEditing:`，它在用户关闭键盘后被调用。

# java - Javax 验证，使用注解验证对象的属性

> ID：10941183
> 
> 赞同：0
> 
> 时间：2012-06-07T23:19:13.507
> 
> 标签：java, validation, annotations

假设我有以下课程：

```
public class MyProductCode  {
    private String code;
    // getter and setter
}

public class MyProduct {
    @NotNull
    private MyProductCode myCode;
    // getter and setter
} 
```

是否可以通过“MyProduct”类验证“code”属性？像这样的东西：

```
@NotNull(property = "code")
private MyProductCode myCode; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:18:34.743

使用 Oval 框架，可以：

请参阅[声明嵌套属性的约束](http://oval.sourceforge.net/userguide.html#declaring-nested-property-constraints)

# java - 使用 Java 的 Selenium WebDriver 测试中的 waitForVisible/waitForElementPresent 的等价物？

> ID：10941184
> 
> 赞同：57
> 
> 时间：2012-06-07T23:19:16.580
> 
> 标签：java, selenium, webdriver, selenium-webdriver, selenium-ide

使用“HTML”Selenium 测试（使用 Selenium IDE 创建或手动创建），您可以使用一些[非常方便的命令](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)，例如**`WaitForElementPresent`**or **`WaitForVisible`**。

```
<tr>
    <td>waitForElementPresent</td>
    <td>id=saveButton</td>
    <td></td>
</tr> 
```

在 Java 中编码 Selenium 测试时（Webdriver / Selenium RC——我不确定这里的术语），**是否有类似的内置功能**？

例如，为了检查一个对话框（需要一段时间才能打开）是否可见......

```
WebElement dialog = driver.findElement(By.id("reportDialog"));
assertTrue(dialog.isDisplayed());  // often fails as it isn't visible *yet* 
```

编写此类检查的最简洁*可靠的方法是什么？*

在所有地方添加`Thread.sleep()`调用将是丑陋和脆弱的，并且滚动你自己的while循环似乎也很笨拙......

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-06-08T14:35:27.927

## [隐式和显式等待](https://www.selenium.dev/documentation/en/webdriver/waits/)

隐式等待

> 隐式等待是告诉 WebDriver 在尝试查找一个或多个元素（如果它们不是立即可用）时轮询 DOM 一段时间。默认设置为 0。一旦设置，就会为 WebDriver 对象实例的生命周期设置隐式等待。

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

显式等待 +[预期条件](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)

> 显式等待是您定义的代码，用于等待特定条件发生，然后再继续执行代码。最坏的情况是 Thread.sleep()，它将条件设置为要等待的确切时间段。提供了一些方便的方法来帮助您编写只等待所需时间的代码。WebDriverWait 与 ExpectedCondition 结合使用是实现此目的的一种方式。

```
WebDriverWait wait = new WebDriverWait(driver, 10);
WebElement element = wait.until(
        ExpectedConditions.visibilityOfElementLocated(By.id("someid"))); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-16T05:27:14.310

```
WebElement myDynamicElement = (new WebDriverWait(driver, 10))
.until(ExpectedConditions.presenceOfElementLocated(By.id("myDynamicElement"))); 
```

> 这会在抛出 TimeoutException 之前等待最多 10 秒，或者如果它发现元素将在 0 - 10 秒内返回它。默认情况下，WebDriverWait 每 500 毫秒调用一次 ExpectedCondition，直到它成功返回。对于 ExpectedCondition 类型的成功返回是 Boolean 返回 true 或所有其他 ExpectedCondition 类型的非空返回值。

* * *

```
WebDriverWait wait = new WebDriverWait(driver, 10);
WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id("someid"))); 
```

> 元素是可点击的 - 它被显示并启用。

来自[WebDriver 文档：显式和隐式等待](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:24:44.050

那么问题是您实际上可能不希望测试无限期地运行。在库决定元素不存在之前，您只想等待更长的时间。在这种情况下，最优雅的解决方案是使用隐式等待，它就是为此而设计的：

```
driver.manage().timeouts().implicitlyWait( ... ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-05T05:15:06.203

另一种等待最大一定量的方法是 10 秒的时间以显示元素，如下所示：

```
(new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return d.findElement(By.id("<name>")).isDisplayed();

            }
        }); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-11-16T07:54:07.113

对于单个元素，可以使用以下代码：

```
private boolean isElementPresent(By by) {
        try {
            driver.findElement(by);
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }
for (int second = 0;; second++) {
            if (second >= 60){
                fail("timeout");
            }
            try {
                if (isElementPresent(By.id("someid"))){
                    break;
                }
                }
            catch (Exception e) {

            }
            Thread.sleep(1000);
        } 
```

# .net - 如何在 PowerShell 中创建“PSObject”

> ID：10941186
> 
> 赞同：3
> 
> 时间：2012-06-07T23:19:35.990
> 
> 标签：.net, shell, powershell

当我在 MSDN 上听说了s的[很酷的属性和方法](http://msdn.microsoft.com/en-us/library/system.management.automation.psobject_members%28v=vs.85%29.aspx)`PSObject`时，我想试试看会很酷。

### 这就是我所做的：

首先，我创建了一个新的 type 实例`PSObject`。

[然后我使用Get-Member](http://technet.microsoft.com/en-us/library/hh849928.aspx)寻找所有那些很酷的成员（但他们不在那里）：

```
PS .> $plainObj = New-Object PSObject

PS .> $plainObj | Get-Member

   TypeName: System.Management.Automation.PSCustomObject

Name        MemberType Definition
----        ---------- ----------
Equals      Method     bool Equals(System.Object obj)
GetHashCode Method     int GetHashCode()
GetType     Method     type GetType()
ToString    Method     string ToString() 
```

# 问题：

没有`BaseObject`属性——也没有`AsPSObject()`方法。所有酷的成员都不在那里。但为什么？

Get-Member 告诉我我的对象是 kind ( `TypeName`)`PSCustomObject`而不是`PSObject`。并且`PSCustomObject`没有所有这些很酷的成员。

但我不想`$plainObj`成为一种`PSCustomObject`——我希望它成为一种`PSObject`。

# 我的问题：

*   为什么是`$plainObj`一种`PSCustomObject`虽然我明确使用`PSObject`as `-TypeName`at `$plainObj New-Object PSObject`？任何想法？

*   我怎样才能`$plainObj`成为一种`PSObject`而不是一种`PSCustomObject`？

* * *

> **@RussC**即使我使用你的脚本 - 结果就是：
> 
> ```
> PS .> $plainObj = New-Object PSObject -property @{ title = 'fridojet' };
> $plainObj | Add-Member -MemberType NoteProperty -Name Colour -Value Blue
> 
> PS .> $plainobj | Get-Member
> 
>    TypeName: System.Management.Automation.PSCustomObject
> 
> Name        MemberType   Definition
> ----        ----------   ----------
> Equals      Method       bool Equals(System.Object obj)
> GetHashCode Method       int GetHashCode()
> GetType     Method       type GetType()
> ToString    Method       string ToString()
> Colour      NoteProperty System.String Colour=Blue
> title       NoteProperty System.String title=fridojet 
> ```

* * *

> **@RussC**现在我设法创建了一个不是类型的对象`PSCustomObject`：
> 
> ```
> PS .> New-Object Object 
> ```
> 
> 但即便如此，我也无法创建一个`PSObject`（带有`BaseObject`属性等）：
> 
> ```
> PS .> [PSObject]::AsPSObject((New-Object Object)) | Get-Member
> 
>    TypeName: System.Object
> 
> Name        MemberType Definition
> ----        ---------- ----------
> Equals      Method     bool Equals(System.Object obj)
> GetHashCode Method     int GetHashCode()
> GetType     Method     type GetType()
> ToString    Method     string ToString() 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:35:09.097

我相信它没有什么可报告的，因为它没有包装任何东西。

如果您创建一个新的[PSObject](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.psobject)而不包装另一个对象或提供任何默认成员，那么它将创建一个[PSCustomObject](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.pscustomobject?view=powershellsdk-1.1.0)。

正如 MSDN 对 PSCustomObject 的陈述：“用作在使用没有参数的 PSObject 构造函数时使用的占位符对象。”

例如，如果您这样做：

```
$plainObj = New-Object PSObject -property @{ title = 'fridojet' }
$plainObj | Add-Member -MemberType NoteProperty -Name Colour -Value Blue 
```

那么 $plainObj 应该是一个 PSObject。

由于 PSObject 是一个静态转换调用，

```
$date = Get-Date
$pso = PSObject.AsPSObject($date) 
```

或者

```
$obj = New-Object object -property @{ title = "fridojet" }
$pso = PSObject.AsPSObject($obj) 
```

另一方面，BaseObject 返回 PSObject 的基类。

使用上面的第二个示例：

```
$obj = New-Object object -property @{ title = "fridojet" }
$pso = PSObject.AsPSObject($obj)
$end = $pso.BaseObject 
```

在这种情况下，$end 应该是一个对象；不是 PSObject；如果您使用 Get-Date 之一， $end 应该是 DateTime 类型。

我希望使用这种方法实际上会返回一种 PSObject，而不是 PSCustomObject。

然而，这些属性和方法的优势无论如何都是值得怀疑的。使用 PSObject 包装器的主要原因是当您在大量 .NET 类中传递对象时。

如果你只是在实验上做，那么它不会给你任何你不知道的东西。

这篇博文展示了使用 PSObject 的一些原因，尤其是在通过 .NET 类迭代大量对象的情况下：*[自定义对象陷阱](http://cjoprey.wordpress.com/archived/custom-object-gotchas/)*

# javascript - Jquery - 尝试在 div 中选择图像

> ID：10941188
> 
> 赞同：3
> 
> 时间：2012-06-07T23:20:20.840
> 
> 标签：javascript, jquery, selector, parent-child, jquery-hover

我是 jquery 的新手，并且试图在 div 中选择图像。

```
<div class="div-main">
  <div class="title"></div>
  <div class="description"></div>
  <img class="post-thumb" src="img.jpg"/>
</div> 
```

我试图让标题和描述仅在用户将鼠标悬停在 div 中的图像上时显示。

目前我已经设置好了，当 div-main 悬停在上面时会发生动画

```
$(document).ready(function(){
    $(".div-main").hover(
      function () {
        $(this).children(".title").fadeIn("slow");
        $(this).children(".description").fadeIn("slow");
        $(".div-main").css({ opacity: 0.1 });
        $(this).css({ opacity: 1.0 });
        $(this).show();
      }, 
      function () {
        $(".title").hide();
        $(".description").hide();
        $(".div-main").fadeIn("fast");
        $(".div-main").css({ opacity: 1.0 });
      }
    );

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:35:00.953

## *[jsBin 演示](http://jsbin.com/ozowoy/edit#javascript,html,live)*

```
$(".div-main").hover(
  function () {
    $(".title, .description", this).fadeTo(300, 1);
    $(".div-main").stop().fadeTo(0, 0.3);
    $(this).fadeTo(300,1);
  },function () {
    $(".title, .description").hide();
    $(".div-main").stop().fadeTo(300, 1);
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:27:13.023

我决定将其发布为答案。

```
$('.div-main > img')
    .hover(function(){
        $(this).parent().find(".title, .description").fadeIn();  //Title & description
    },
    function(){
        $(this).parent().find(".title, .description").fadeOut();
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:30:19.803

当您将鼠标悬停在图像上时，要使描述和标题淡入淡出，您可以这样做：

```
$('.div-main .post-thumb').hover(function(){
  $(this).parent().find(".title, .description").stop(true).fadeIn();
},
function() {
  $(this).parent().find(".title, .description").stop(true).fadeOut();
}); 
```

如果图像通常是除了悬停时唯一可见的内容，那么这可能会更好，因为当悬停在标题和描述上时，内容也会保持可见：

```
$('.div-main').hover(function(){
  $(this).find(".title, .description").stop(true).fadeIn();
},
function() {
  $(this).find(".title, .description").stop(true).fadeOut();
}); 
```

# c# - Twitterizer 在 TwitterStatus.Update 上返回 401

> ID：10941191
> 
> 赞同：0
> 
> 时间：2012-06-07T23:20:48.297
> 
> 标签：c#, twitter, twitterizer

好看的图书馆，但它对我来说行为不端..

我创建了一个 twitter 应用程序，具有读/写权限，这一切似乎都很好。

我正在使用完整的生命周期 oauth 管理，但现在正在使用“访问令牌秘密”和“访问令牌：在应用程序管理页面上的 twitter 中生成。

我的代码在这里

[https://gist.github.com/2892292](https://gist.github.com/2892292)

```
var tokens = new OAuthTokens
                         {
                             AccessToken = [MyAccess],
                             AccessTokenSecret = [MySecret],
                             ConsumerKey = ConsumerKey,
                             ConsumerSecret = ConsumerSecret
                         };

        var verify = TwitterAccount.VerifyCredentials(tokens); 
```

它的死简单代码，但正在为结果对象返回一个“Twitterizer.RequestResult.Unauthorized”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:40:44.310

通过成为一个傻瓜的魔力。我把我的秘密/钥匙倒了……天哪。

如果遇到问题，我强烈建议使用 twitter oauth 工具生成示例标头，然后通过 fiddler 或类似的工具运行 twitterizer 以比较标头。

叹。

# php - 卷曲返回 xml 作为数组

> ID：10941192
> 
> 赞同：0
> 
> 时间：2012-06-07T23:20:49.607
> 
> 标签：php, xml, curl, google-places-api

我在 php 中有一个 curl 程序，它从 Google Places API 返回 xml 或 JSON。我了解 Google 地方信息要求以 XML 或 JSON 格式返回请求。我想知道 curl 是否可以为我将其转换为数组？我宁愿自己不要这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:25:14.020

```
$array = json_decode($data, TRUE); 
```

# asp.net-mvc - 用户在线吗？

> ID：10941194
> 
> 赞同：2
> 
> 时间：2012-06-07T23:21:03.263
> 
> 标签：asp.net-mvc, asp.net-membership, membership-provider

我是 ASP.NET 成员资格的新手，到目前为止，大多数解决方案都不适合我。我想实现一个简单的查询来检查用户是否在线并返回布尔结果。我正在使用 ASP.NET 成员资格和配置文件提供程序。

```
Maybe a function like this:

    public boolean IsUserOnline(string userName)
{
    boolean result ={some query string here......}

    return result;

} 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T23:26:25.617

Asp.NET 成员资格为您执行此操作：

```
Membership.GetUser(username).IsOnline 
```

自用户最后一次在线请求以来的时间长度可通过`Membership.UserIsOnlineTimeWindow`酒店获得。

# java - 在 Play 中构建复杂的 promise

> ID：10941206
> 
> 赞同：0
> 
> 时间：2012-06-07T23:22:38.517
> 
> 标签：java, asynchronous, playframework, playframework-1.x, promise

假设我需要从我的方法中返回一个承诺，这取决于外部资源和一些计算。我想象的是这样的：

```
Promise<Integer> foo() {
  return WS.url(url)
    .getAsync()
    .callWhenReady(new Function<HttpResponse>(){
      Integer parse(HttpResponse response) {
        // parsing business logic 
        // ...
        int parsed = ...;
        return parsed;
      }
  });
} 
```

我可以用来做`callWhenReady`什么？这本质上就像`jQuery.promise()`行为一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:03:17.550

我想你想要`F.Promise.map`（播放 2.0.2）：

```
 /**
     * Maps this promise to a promise of type <code>B</code>.  The function <code>function</code> is applied as
     * soon as the promise is redeemed.
     *
     * Exceptions thrown by <code>function</code> will be wrapped in {@link java.lang.RuntimeException}, unless
     * they are <code>RuntimeException</code>'s themselves.
     *
     * @param function The function to map <code>A</code> to <code>B</code>.
     * @return A wrapped promise that maps the type from <code>A</code> to <code>B</code>.
     */
    public <B> Promise<B> map(final Function<A, B> function) {
        return new Promise<B>(
            promise.map(new scala.runtime.AbstractFunction1<A,B>() {
                public B apply(A a) {
                    try {
                        return function.apply(a);
                    } catch (RuntimeException e) {
                        throw e;
                    } catch(Throwable t) {
                        throw new RuntimeException(t);
                    }
                }
            })
        );
    } 
```

从您的代码看来，您使用的是早期版本的 Play，但我认为您仍然应该能够替换`callWhenReady`为`map`（并向回调函数添加`Integer`类型参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:46:06.130

我不确定我是否完全理解你的问题，但如果你想做一个异步 WS 操作并返回结果，这就是这样做的方法：

```
F.Promise<WS.HttpResponse> promise = WS.url(url).getAsync();
// The following line corresponds to your callWhenReady. 
// It waits for the result in a non blocking way.
await(promise);

WS.HttpResponse response = promise.get(); 
```

现在您可以对响应进行一些计算，并返回结果。

# c - C中的链表分段错误

> ID：10941208
> 
> 赞同：2
> 
> 时间：2012-06-07T23:23:08.987
> 
> 标签：c, pointers, linked-list, segmentation-fault

我有链接列表的问题。我有两个结构：

```
struct ekstra
{
    char isim[256];
    int deger;
    struct ekstra *sonra;
};

struct node
{
    char name[256];
    int val;
    struct ekstra *next;    
}; 
```

我有这些：

```
struct ekstra *tmp;
struct node dizi[12]; 
```

在我的代码中某处有

```
tmp = dizi[k].next;
tmp=tmp->sonra; 
```

如果我这样做：

```
tmp = malloc(sizeof(struct ekstra)); 
```

没有问题。

但如果我这样做：

```
dizi[k].next->sonra = malloc(sizeof(struct ekstra)); 
```

我得到一个SegFault。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:04:16.343

This line:

```
dizi[k].next->sonra = malloc(sizeof(struct ekstra)); 
```

is dereferencing

```
dizi[k].next 
```

and I suspect that has a junk value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:11:09.253

这两行：

```
tmp = dizi[k].next;
tmp = tmp->sonra; 
```

可能将无效指针复制到`tmp`. 当您分配给`tmp`with 时`malloc()`，来自的有效指针`malloc()`会覆盖已在 中的无效值`tmp`。

当您使用：

```
dizi[k].next->sonra = malloc(sizeof(struct ekstra)); 
```

您正在引用无效指针（以评估`sonra`存储成员的地址），这导致了分段错误。

如果你写：

```
*tmp = 0; 
```

您也可能会遇到分段错误。

# python - 如何在 Python 中展平/穿透任意结构的嵌套列表？

> ID：10941209
> 
> 赞同：0
> 
> 时间：2012-06-07T23:23:15.643
> 
> 标签：python, nested-lists, flatten

> **可能重复：**
> [在 Python 中展平（不规则）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

例如，来自：

```
[[1,2,3],'a',[[4],[5,6],7]] 
```

我们想要展平/穿透结构并将底部的所有元素列在一行中：

```
[1,2,3,'a',4,5,6,7] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:23:16.813

```
# a recursive function to flatten arbitrary nested lists into one simple 1D list
def flatten(inlist,outlist):   
    for e in inlist:
        if isinstance(e,list) :
            flatten(e,outlist)
        else:
            outlist.append(e) 
```

这是递归函数的一种做法，:)。这里的“outlist”作为return-list的参考。

必须有更好的结构...

;） 例如：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:53:11.280

为了您的利益，这是一个就地修改列表的实现：

```
def flatten_in_place(seq):
    if isinstance(seq, list):
        for index, item in reversed(list(enumerate(seq))):
            if isinstance(item, list):
                seq[index: index + 1] = fil(item)
        return seq
    else:
        return [seq] 
```

用法：

```
>>> l = [[1, 2], [3, 4], 5, 6, [7, [8, 9]]]
>>> flatten_in_place(l)
>>> l
[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

有趣的是，timeit 结果 (t = 1,000,000) 表明这比您的实现略快：

```
flatten_in_place time: 4.88
flatten time: 5.16 
```

我不确定为什么会这样。有任何想法吗？

# php - AJAX 将数据添加到表中而不重置表。

> ID：10941213
> 
> 赞同：0
> 
> 时间：2012-06-07T23:23:48.093
> 
> 标签：php, jquery, ajax, partial-page-refresh

我有一个 php 页面，它将从 SQL 数据库中获取数据并将其打印到表中，现在如果数据库中的某些行具有某个参数，则会在其下方插入一个隐藏行，并带有一个按钮来展开该行。这一切都很好，我可以使用 ajax 将其查询到不同页面上的 div 中，但是如果有人要扩展隐藏行（使用 jquery）并且出现 ajax 更新计时器，它将重置并隐藏该行。

这是它所填写的页面以及与之配套的 ajax 代码：

```
<script type="text/javascript">
 $(document).ready(function() {
     $("#query").load("query.php");
   var refreshId = setInterval(function() {
      $("#query").load('query.php');
   }, 5000);
   $.ajaxSetup({ cache: false }); 

});
</script>

<div id="query"></div> 
```

从query.php：

```
 while($row = mysql_fetch_array($result))
    {
      $decoded = json_decode($row['B'],true);
      $r = $decoded['r'];
      $t = $decoded['t']; 
      $l = $decoded['l'];       
      $g = $decoded['g'];      
      $tp = (int)$t + 3;            

      echo "<tr>";
      echo "<td>" . $row['ID'] . "</td>";
      echo "<td align=\"center\"><font color=\"red\">[$t]</font></td>";
      echo "<td align=\"center\"><font color=\"blue\">[$r]</font></td>";
      echo(((int)$t != 0) ? '<td><button class="expand stylebutton">+</button>' : '<td>');
      echo $row['Name_'] . "</td>";
      echo "<td>" . $row['Date_'] . "</td>";
      echo "<td>" . $row['IP'] . "</td>";
      echo "<td>" . $row['G'] . "</td>";
      echo "<td>" . $row['A'] . "</td>";
      echo "<td>" . $row['Add'] . "</td>";
      echo "<td>" . $row['Remove'] . "</td>";
      echo "<td>" . $row['Comments'] . "</td>";
      echo "</tr>";
      if((int)$t != 0)
    {
          echo "<tr class=\"b\"style=\"display: none;\">";
          echo "<td></td><td colspan=\"$tp\"><div style=\"color: #FC0;\"> Local:</div>";
          foreach($l as $ll)
          {
            echo $ll . "<br>";
          }
          echo "<br><div style=\"color: #F00;\">Global:</div>";
          foreach($g as $gg)
          {
            echo $gg . "<br> ";
          }
          echo "</td></tr>";
    }
    }
    echo "</table>";
echo "<script type=\"text/javascript\">";
echo "$(document).ready(function() {
        $(\".stylebutton\").click(function(){
            $(this).parent().parent().next().toggle();
         if($(this).text() == \"+\")
         {
            $(this).text('-');
         }
         else
         {
            $(this).text('+');
         }
        });
});
</script>"; 
```

[这是其中一行在展开时的样子的图像。](http://i.stack.imgur.com/XRPXH.jpg)

所以基本上我不希望在 ajax 更新滚动时行收缩，而是只在页面上添加更多数据。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:33:03.973

您应该让 php 文件以 json 格式返回数据，以供您的 jQuery 使用。您将替换数据，而不是替换 html 标记并导致 UI 缩回。

**例如**

你的PHP代码：

```
$data_array = array();

while($row = mysql_fetch_array($sql)) {
  array_push( $row['some_row'] , $data_array ); // add the data to an array that will later be json encoded
}

echo json_encode($data_array); 
```

jQuery

```
$.ajax({
  url: 'query.php',
  success: function(data) {
    alert('This is the JSON: ' + JSON.stringify(data));
    $('#selector').text(data.some_row); // place the data inside the element with id = 'selector'
  }
}); 
```

# android - 我们如何将 edittext 中输入的值从一个活动传递到另一个活动？

> ID：10941217
> 
> 赞同：-2
> 
> 时间：2012-06-07T23:24:19.247
> 
> 标签：android

我正在开发一个字典应用程序，我已经动态声明了两个字符串..

```
final String words[]={
          "Gamble", "Stress", "Stammer"
        };

final String meanings[]={
          "To play", "Tension", "To speak with involuntary pauses or repetitions "
        }; 
```

当用户在edittext视图中输入单词时，如果从上面的数组中找到单词，我想切换到另一个活动并在下一个活动中显示含义。

如何获取含义数组以显示在第二个活动中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:28:09.900

当您想要传递数据时`Activities`，只需使用`Intent`数据并将数据添加到意图。

```
Intent i = new Intent(YourActivity.this, Another.class);
i.putExtra("someKey", data);
startActivity(i); 
```

不要记得添加`Activity`到您的`manifest.xml`.

```
<activity
   android:name=".YourActivity"
   android:label="@string/app_register"
/> 
```

编辑：

因此，当`Activity`您`this.getIntent().getExtras().getStringArray(<key>)`想要通过`String[]`.

# facebook - Facebook 开发人员 ID 的权限 - 创建应用程序/等

> ID：10941223
> 
> 赞同：0
> 
> 时间：2012-06-07T23:25:02.400
> 
> 标签：facebook

Facebook 上是否有开发者 ID 的概念：可用于设置应用程序/等的 ID？他们的政策规定，一个人可以在他们的许可下获得一个 id。如果这可能，那么有人知道实现这一目标的过程吗？

在同一行中，是否有类似的 tester 或 support id 概念？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:34:02.843

“facebook developer id”的 Google 搜索查询将其作为第三个结果返回：[How to Get Your Facebook Developers ID](http://www.ehow.com/how_8506809_facebook-developers-id.html)。进行谷歌搜索并提供链接比在这里再次解释要快。当您访问developers.facebook.com 并注册一个应用帐户时，您将获得ID。这篇文章在 Facebook 上一步一步地解释了这一切。也是为了回答您关于测试和支持 ID 的问题。我无法弄清楚实际的支持 ID，但您可能想查看[Facebook 上的此链接，](https://developers.facebook.com/docs/test_users/)该链接解释了测试用户帐户如何与应用程序关联。

# r - ggplot2中的水平条形图

> ID：10941225
> 
> 赞同：59
> 
> 时间：2012-06-07T23:25:18.293
> 
> 标签：r, ggplot2

我正在做一个水平点图（？）`ggplot2`，它让我考虑尝试创建一个水平条形图。但是，我发现能够做到这一点有一些限制。

这是我的数据：

```
df <- data.frame(Seller=c("Ad","Rt","Ra","Mo","Ao","Do"), 
                Avg_Cost=c(5.30,3.72,2.91,2.64,1.17,1.10), Num=c(6:1))
df
str(df) 
```

最初，我使用以下代码生成了一个点图：

```
require(ggplot2)
ggplot(df, aes(x=Avg_Cost, y=reorder(Seller,Num))) + 
    geom_point(colour="black",fill="lightgreen") + 
    opts(title="Avg Cost") +
    ylab("Region") + xlab("") + ylab("") + xlim(c(0,7)) +
    opts(plot.title = theme_text(face = "bold", size=15)) +
    opts(axis.text.y = theme_text(family = "sans", face = "bold", size = 12)) +
    opts(axis.text.x = theme_text(family = "sans", face = "bold", size = 12)) 
```

但是，我现在正在尝试创建一个水平条形图并发现我无法这样做。我试过`coord_flip()`了，这也没有帮助。

```
ggplot(df, aes(x=Avg_Cost, y=reorder(Seller,Num))) + 
    geom_bar(colour="black",fill="lightgreen") + 
    opts(title="Avg Cost") +
    ylab("Region") + xlab("") + ylab("") + xlim(c(0,7)) +
    opts(plot.title = theme_text(face = "bold", size=15)) +
    opts(axis.text.y = theme_text(family = "sans", face = "bold", size = 12)) +
    opts(axis.text.x = theme_text(family = "sans", face = "bold", size = 12)) 
```

任何人都可以就如何在中生成水平条形图提供一些帮助`ggplot2`吗？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-06-07T23:32:56.543

```
ggplot(df, aes(x=reorder(Seller, Num), y=Avg_Cost)) +
  geom_bar(stat='identity') +
  coord_flip() 
```

没有`stat='identity'`ggplot 想要将您的数据汇总到计数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-01-12T20:10:04.633

从`ggplot2`3.3.0 版（2020 年 3 月）开始，该方向已从美学映射中扣除。因此我们可以将@Justin 和@ungatoverde 的代码简化为

```
library(ggplot2)
ggplot(df,
       aes(x = Avg_Cost,
           y = reorder(Seller, Num)
           )
       ) +
  geom_col() 
```

[![在此处输入图像描述](../Images/23e62a31efd799056ff26e3642cb1193.png)](https://i.stack.imgur.com/ts5kI.png)

参考：[https ://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/#bi-directional-geoms-and-stats](https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/#bi-directional-geoms-and-stats)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-09T06:28:05.440

```
ggplot(df, aes(x=reorder(Seller, Num), y=Avg_Cost)) +
  geom_col() 
```

这可能是另一种选择

# python - 将元组列表转换为列表？

> ID：10941229
> 
> 赞同：64
> 
> 时间：2012-06-07T23:25:27.080
> 
> 标签：python

我如何转换

```
[(1,), (2,), (3,)] 
```

到

```
[1, 2, 3] 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-07T23:26:39.463

使用简单的[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
e = [(1,), (2,), (3,)]
[i[0] for i in e] 
```

会给你：

```
[1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-06-07T23:29:32.773

@Levon 的解决方案非常适合您的情况。

作为旁注，如果元组中有可变数量的元素，您也可以使用`chain`from `itertools`。

```
>>> a = [(1, ), (2, 3), (4, 5, 6)]
>>> from itertools import chain
>>> list(chain(a))
[(1,), (2, 3), (4, 5, 6)]
>>> list(chain(*a))
[1, 2, 3, 4, 5, 6]
>>> list(chain.from_iterable(a)) # More efficient version than unpacking
[1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-06-07T23:40:43.577

如果您可以在元组中包含可变数量的元素，这是另一种选择：

```
>>> a = [(1,), (2, 3), (4, 5, 6)]
>>> [x for t in a for x in t]
[1, 2, 3, 4, 5, 6] 
```

这基本上只是以下循环的缩写形式：

```
result = []
for t in a:
    for x in t:
        result.append(x) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-07T23:37:34.703

```
>>> a = [(1,), (2,), (3,)]
>>> zip(*a)[0]
(1, 2, 3) 
```

对于列表：

```
>>> list(zip(*a)[0])
[1, 2, 3] 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-08-23T17:29:15.740

您还可以使用`sum`如下功能：

```
e = [(1,), (2,), (3,)] 
e_list = list(sum(e, ())) 
```

它还可以与列表列表一起使用以将其转换为单个列表，但您需要按如下方式使用它：

```
e = [[1, 2], [3, 4], [5, 6]]
e_list = list(sum(e, [])) 
```

这会给你`[1, 2, 3, 4, 5, 6]`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-07-30T14:08:31.700

```
>>> a = [(1,), (2,), (3,)]
>>> b = map(lambda x: x[0], a)
>>> b
[1, 2, 3] 
```

使用python3，你必须把list(..)函数放到map(..)的输出中，即

```
b = list(map(lambda x: x[0], a)) 
```

这是使用python内置函数**的最佳解决方案。**

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-12-19T10:35:41.173

**总有一种方法可以通过... `for`... `in`...**从另一个列表中提取一个列表。在这种情况下，它将是：

**`[i[0] for i in e]`**

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-12-11T11:08:22.477

使用运算符或求和

```
>>> from functools import reduce ### If python 3
>>> import operator
>>> a = [(1,), (2,), (3,)]
>>> list(reduce(operator.concat, a))
[1, 2, 3] 
```

（或者）

```
>>> list(sum(a,()))
[1, 2, 3]
>>> 
```

如果在 python > 3 中，请从 functools 中导入 reduce，例如`from functools import reduce`

[https://docs.python.org/3/library/functools.html#functools.reduce](https://docs.python.org/3/library/functools.html#functools.reduce)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-06-14T20:42:41.807

您还可以在列表推导中解压缩元组：

```
e = [(1,), (2,), (3,)]
[i for (i,) in e] 
```

仍然会给：

```
[1, 2, 3] 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-27T07:32:45.983

**一班轮哟！**

```
list(*zip(*[(1,), (2,), (3,)])) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-06T01:29:37.163

在这些情况下，我喜欢这样做：

```
a = [(1,), (2,), (3,)]
new_a = [element for tup in a for element in tup] 
```

即使您的元组有多个元素，这也有效。这相当于这样做：

```
a = [(1,), (2,), (3,)]
new_a = []
for tup in a:
    for element in tup:
        new_a.append(element) 
```

# django - 在 Geodjango + Postgres 中存储一个圆圈

> ID：10941236
> 
> 赞同：4
> 
> 时间：2012-06-07T23:26:26.707
> 
> 标签：django, postgresql, postgis, geodjango

希望在 geodjango 字段中存储一个圆圈，以便我可以使用 geodjango 查询 __contains 来确定一个点是否在圆圈中（类似于使用 PolygonField 可以完成的操作）。

目前将其存储为十进制半径和 GeoDjango 点字段，但需要一种方法来查询数据库中的位置列表，以便这些不同的圆（点字段和半径）包含我的搜索点（长/纬度）。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T07:58:51.817

从技术上讲，PostGIS 支持`CurvePolygon`和`CircularString`几何类型，可用于存储弯曲的几何图形。例如，x=10, y=10 周围的 2 单位半径已由 64 点缓冲多边形近似为：

```
SELECT ST_AsText(ST_LineToCurve(ST_Buffer(ST_MakePoint(10, 10), 2, 16)));
                   st_astext
------------------------------------------------
 CURVEPOLYGON(CIRCULARSTRING(12 10,8 10,12 10))
(1 row) 
```

但是，这种方法通常不会使用，因为对这种几何类型的支持非常有限（即 ，`ST_AsSVG`而其他方法不起作用）。这些几何类型可能会引起很多悲伤，我建议不要这样做。

通常，所有几何图形都存储为支持良好的类型：`POINT`,`LINESTRING`或`POLYGON`（带有可选`MULTI-`前缀）。对于这些类型，使用[`ST_DWithin`函数](http://www.postgis.org/docs/ST_DWithin.html)（例如，[GeoDjango](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#std:fieldlookup-dwithin)调用此 __dwithin，另请参阅[此问题](https://stackoverflow.com/questions/2235043/geodjango-difference-between-dwithin-and-distance-lt)）来查询另一个几何图形是否在指定距离内。例如，如果您有一个点位置，您可以查看其他几何图形是否在距该点一定距离（即*radius*）内。

# java - 定位 JLabel（setAlignment 不起作用）

> ID：10941239
> 
> 赞同：4
> 
> 时间：2012-06-07T23:27:11.123
> 
> 标签：java, swing, layout, jlabel, flowlayout

我想定位我放在 JLabel 中的图像。这是我的代码：

```
public Main() {
    setLayout (new FlowLayout());
            image = new ImageIcon(getClass().getResource("title.gif"));
            image1 = new JLabel(image);
            image1.setAlignmentX(400);
            image1.setAlignmentY(400);
            add(image1);
} 
```

它显示图像，但线条

```
image1.setAlignmentX(400);
image1.setAlignmentY(400); 
```

不要做任何事情。我是Java新手，任何帮助表示赞赏。

（我会很感激一个例子。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T23:42:00.033

问题：

*   您正在使用 FlowLayout ，即使您做得正确，它也不会尊重绝对定位。
*   `setAlignmentX(...)`用于向容器建议组件沿 x 轴的对齐方式。如上所述，它需要一个从 0.0f 到 1.0f 的浮点数，其中 0f 表示左对齐，0.5f 居中，1.0f 表示右对齐。您绝对不想使用这种方法，或者它是这里的对应方法。
*   绝对定位需要使用空布局的容器，而不是 FlowLayout。
*   绝对定位是通过`setBounds(...)`或`setLocation(...)`方法完成的。
*   话虽如此，我建议你不要尝试绝对定位事物，除非有绝对需要，而且这里很有可能你不这样做，有更好的方法。

请告诉我们更多问题的详细信息，而不是您尝试解决问题的方式，我们可能会更好地为您提供帮助。

# php - 从网站打开 MS Word

> ID：10941241
> 
> 赞同：0
> 
> 时间：2012-06-07T23:27:22.617
> 
> 标签：php, ms-word, web

我有一个网站，用户可以在其中上传 MS word、Power point 和 pdf 类型的文档。现在我想要的是，如果用户单击某个按钮或链接，则会打开一个新的 Word 文档，他可以在其中创建一个新文档并将其上传到我的网站上。我该怎么做？有什么方法可以通过单击完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:29:23.043

我认为简单或简短的解决方案是允许他们上传文件，并限制为您指定的文件类型，然后有一个替代选项，只需将其输入到他们的浏览器中，如[TinyMCE](http://www.tinymce.com/)或类似的东西。

充其量你可以启动 word，有点像如何从苹果网站启动苹果 itunes，但是如果不上传服务器，他们就无法保存，然后你会再次需要一系列验证器确保他们没有上传恶意文件。

# ajax - 如何在不重新加载页面的情况下使用 ajax 使 href 可链接

> ID：10941242
> 
> 赞同：0
> 
> 时间：2012-06-07T23:27:23.190
> 
> 标签：ajax

我有这个链接：

```
<a href="/follow/78" class="follow_all_button" onclick="followUser(); return true">follow</a> 
```

当用户单击它时，只需刷新页面并执行以下功能。

在不重新加载页面的情况下可以执行以下操作吗？

抱歉，我在阿贾克斯待了这么一周，真的需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:32:25.827

您不需要 Ajax 来阻止浏览器重新加载。

只需更改`return true`为`return false`，您将取消以下链接的默认浏览器行为。

该`followUser`函数是否发出 Ajax 请求不会有任何影响。

# c# - .NET EventWaitHandle 慢

> ID：10941244
> 
> 赞同：1
> 
> 时间：2012-06-07T23:27:28.297
> 
> 标签：c#, .net, multithreading, events, thread-synchronization

我正在使用带有回调函数的waveOutWrite，并且在本机代码下一切都很快。在 .NET 下它要慢得多，以至于我认为我做错了什么，有时慢 5 到 10 倍。

我可以发布两组代码，但似乎太多了，所以我只发布速度很快的 C 代码并指出 .NET 代码中的微小差异。

```
HANDLE WaveEvent;
const int TestCount = 100;
HWAVEOUT hWaveOut[1]; // don't ask why this is an array, just test code
WAVEHDR woh[1][20];

void CALLBACK OnWaveOut(HWAVEOUT,UINT uMsg,DWORD,DWORD,DWORD)
{
   if(uMsg != WOM_DONE)
      return;
   assert(SetEvent(WaveEvent)); // .NET code uses EventWaitHandle.Set()
}

void test(void)
{
   WaveEvent = CreateEvent(NULL,FALSE,FALSE,NULL);
   assert(WaveEvent);

   WAVEFORMATEX wf;
   memset(&wf,0,sizeof(wf));
   wf.wFormatTag =  WAVE_FORMAT_PCM;
   wf.nChannels = 1;
   wf.nSamplesPerSec = 8000;
   wf.wBitsPerSample = 16;
   wf.nBlockAlign = WORD(wf.nChannels*(wf.wBitsPerSample/8));
   wf.nAvgBytesPerSec = (wf.wBitsPerSample/8)*wf.nSamplesPerSec;

   assert(waveOutOpen(&hWaveOut[0],WAVE_MAPPER,&wf,(DWORD)OnWaveOut,0,CALLBACK_FUNCTION) == MMSYSERR_NOERROR);

   for(int x=0;x<2;x++)
      {
      memset(&woh[0][x],0,sizeof(woh[0][x]));
      woh[0][x].dwBufferLength = PCM_BUF_LEN;
      woh[0][x].lpData = (char*) malloc(woh[0][x].dwBufferLength);
      assert(waveOutPrepareHeader(hWaveOut[0],&woh[0][x],sizeof(woh[0][x])) == MMSYSERR_NOERROR);
      assert(waveOutWrite(hWaveOut[0],&woh[0][x],sizeof(woh[0][x])) == MMSYSERR_NOERROR);
      }

   int bufferIndex = 0;
   DWORD times[TestCount];
   for(int x=0;x<TestCount;x++)
      {
      DWORD t = timeGetTime();
      assert(WaitForSingleObject(WaveEvent,INFINITE) == WAIT_OBJECT_0); // .NET code uses EventWaitHandle.WaitOne()
      assert(woh[0][bufferIndex].dwFlags & WHDR_DONE);
      assert(waveOutWrite(hWaveOut[0],&woh[0][bufferIndex],sizeof(woh[0][bufferIndex])) == MMSYSERR_NOERROR);
      bufferIndex = bufferIndex == 0 ? 1 : 0;
      times[x] = timeGetTime() - t;
      }
} 
```

C 代码的 times[] 数组的值总是在 80 左右，这是我正在使用的 PCM 缓冲区长度。.NET 代码有时也会显示类似的值，但有时会显示高达 1000 的值，更常见的是 300 到 500 范围内的值。

在 OnWaveOut 回调中执行底部循环中的部分而不是使用事件，使用 .NET 或本机代码使其始终保持快速。因此，问题似乎仅与 .NET 中的等待事件有关，并且主要仅在测试 PC 上发生“其他事情”时——但不是很多事情，可以像移动窗口或打开一样简单我电脑里的一个文件夹。

也许 .NET 事件对于上下文切换或 .NET 应用程序/线程一般来说真的很糟糕？在我用来测试我的 .NET 代码的应用程序中，代码只是在表单的构造函数中运行（添加测试代码的容易的地方），而不是在线程池线程或任何东西上。

我还尝试使用接收事件而不是函数回调的 waveOutOpen 版本。这在 .NET 中也很慢，但在 C 中则不然，因此，它再次指出了事件和/或上下文切换的问题。

我试图让我的代码保持简单，并设置一个事件来完成回调之外的工作是我可以用我的整体设计做到这一点的最佳方式。实际上只使用事件驱动的 waveOut 更好，但我尝试了另一种方法，因为直接回调很快，而且我没想到正常的事件等待句柄会这么慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-18T11:21:16.563

也许不是 100% 相关，但我遇到了同样的问题：调用`EventWaitHandle.Set`X 次很好，但是，在我无法提及的阈值之后，这个方法的每次调用都需要 1 秒！

似乎某些 .net 同步线程的方法比您在 C++ 中使用的方法慢得多。

强大的@jonskeet 曾经在他的网站 ( [https://jonskeet.uk/csharp/threads/waithandles.html](https://jonskeet.uk/csharp/threads/waithandles.html) ) 上发了一个帖子，他还提到了此处解释的 .net 同步域的非常复杂的概念：[https:// www.drdobbs.com/windows/synchronization-domains/184405771](https://www.drdobbs.com/windows/synchronization-domains/184405771)

他提到.net 和操作系统必须以非常非常非常精确的方式与必须从一个环境转换到另一个环境的对象进行通信。所有这些都非常耗时。

我在这里总结了很多，不是为了得到答案，而是有一个解释。这里有一些建议（[https://docs.microsoft.com/en-us/dotnet/standard/threading/overview-of-synchronization-primitives](https://docs.microsoft.com/en-us/dotnet/standard/threading/overview-of-synchronization-primitives)）关于根据上下文和性能选择同步方式的一些方法方面稍微提到了一点。

# ios5 - 命令行库构建失败并出现链接器错误

> ID：10941247
> 
> 赞同：5
> 
> 时间：2012-06-07T23:27:32.880
> 
> 标签：ios5, xcode4.3, graphviz

我在使用脚本使用 Xcode 4.3 构建 GraphViz 当前版本（2012 年 6 月 7 日）时遇到*库未找到错误。*我可能在更新其他人的成功配方中为 Xcode4.3 的新位置和 Applications 文件夹中的开发人员工具更新构建脚本时出错了。

`ld: library not found for -lcrt1.10.6.o`

（从内存中执行此操作，因此 CRT 库上的确切数字可能是错误的）

我也有点迷失了如何将其合并到 IDE 中的 Xcode 构建中。我是一位非常有经验的程序员，但有时无法在 Xcode 4 中找到自己的方式。（数十年的 Visual Studio 等人）。

我已经复制了[这个早先问题](https://stackoverflow.com/questions/7224827/build-static-graphviz-libraries-for-ios)的说明并进行了改编

```
#!/bin/sh
# For iPhoneOS, see http://clang.llvm.org/ for options
export DEV_iOS=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer
# was /Developer/Platforms/iPhoneOS.platform/Developer
export SDK_iOS=${DEV_iOS}/SDKs/iPhoneOS5.1.sdk
export COMPILER_iOS=${DEV_iOS}/usr/bin
export CC=${COMPILER_iOS}/clang
export CXX=${COMPILER_iOS}/clang++
export LDFLAGS="-arch armv7 -pipe -Os -gdwarf-2 -mthumb -isysroot ${SDK_iOS}"
export CFLAGS="${LDFLAGS}"
export OBJCFLAGS="${LDFLAGS}"
export CXXFLAGS="${LDFLAGS} -fvisibility-inlines-hidden"
export LD=${COMPILER_iOS}/ld
export CPP=${COMPILER_iOS}/clang
export AR=${COMPILER_iOS}/ar
export AS=${COMPILER_iOS}/as
export NM=${COMPILER_iOS}/nm
export CXXCPP="${COMPILER_iOS}/clang++"
export OBJC=${COMPILER_iOS}/clang
export RANLIB=${COMPILER_iOS}/ranlib

./configure \
--build=arm-apple-darwin11 \
--host=arm-apple-darwin11 \
--disable-dependency-tracking \
--enable-shared=no \
--enable-static=yes \
--enable-ltdl=no \
--enable-swig=no \
--enable-tcl=no \
--srcdir=${GVROOT} \
--with-codegens=no \
--with-cgraph=no \
--with-graph=yes \
--with-expat=no \
--with-fontconfig=no \
--with-freetype2=no \
--with-ipsepcola=yes \
--with-libgd=no \
--with-quartz=yes \
--with-visio=yes \
--with-x=no 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:41:29.457

编译器通常使用 crt1.o 结合 crt[i/n].o 和 crt[begin/end].o 来支持构造函数和析构函数（在 main 和 exit 之前和之后调用的函数）。

此错误可能是由特定部署目标的此缺少的库文件引起的。

首先，做一些调查，比如：

1.  列出所有部署目标：

    `ls -la /Developer/SDKs`

2.  并找到您在哪个环境中拥有哪些 crt1 库

    `find /Developer/SDKs -name crt1\*`

你可以看到类似的东西：

```
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/crt1.10.5.o
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/crt1.o
/Developer/SDKs/MacOSX10.6.sdk/usr/lib/crt1.10.5.o
/Developer/SDKs/MacOSX10.6.sdk/usr/lib/crt1.10.6.o
/Developer/SDKs/MacOSX10.6.sdk/usr/lib/crt1.o 
```

如您所见，MacOSX10.5 缺少 crt1.10.6.o。

**解决方案1：**

您可以通过创建指向其他环境的丢失文件的链接来解决该问题，或者您可以更改部署目标。例如

```
ln -s /Developer/SDKs/MacOSX10.6.sdk/usr/lib/crt1.10.6.o /Developer/SDKs/MacOSX10.5.sdk/usr/lib/ 
```

* * *

这也可能是因为您的系统中安装了不同的 gcc。看：

`which gcc;`

`xcrun -find gcc;`

`brew list | grep gcc; brew list gcc47`

**解决方案 2**

因此，当您使用 make 进行编译时，您实际上可以通过 CC 变量指定正确的编译器。例如

```
CC=/path/to/gcc-3.4 make 
```

* * *

**解决方案 3**

您还可以尝试通过执行以下几行为 gcc 指定正确的目标部署环境变量：

```
export MACOSX_DEPLOYMENT_TARGET=10.5
export C_INCLUDE_PATH=/Developer/SDKs/MacOSX10.5.sdk/usr/include
export LIBRARY_PATH=/Developer/SDKs/MacOSX10.5.sdk/usr/lib 
```

如果这可行，那么您可以将以上行添加到您的 shell 配置文件 (~/.profile) 以使更改永久化。

* * *

**如何测试**

`conftest.c`使用以下代码创建示例文件：

```
#ifdef __GNUC__
  yes;
#endif 
```

并尝试通过以下方式编译它：

```
gcc conftest.c
cc conftest.c
cc conftest.cc conftest.c 
```

**故障排除**

要查看缺少哪个文件，请尝试使用 dtruss 对其进行调试，例如：

```
sudo dtruss -f gcc conftest.c 2>/dev/stdout | grep crt 
```

您应该会看到如下内容：

```
12426/0xb4e3b:  stat64("/Developer/usr/lib/gcc/i686-apple-darwin10/4.2.1/crt1.10.6.o\0", 0x7FFF5FBFE780, 0xB)        = -1 Err#2 
```

`locate crt1.10.6.o`因此，一旦找到丢失的文件，您就可以通过从现有位置（例如）链接丢失的文件来遵循第一个解决方案。如果您还有其他缺失的符号，请尝试另一个文件（通过以下方式检查架构之前：）`file `locate crt1.10.6.o``。

例如

```
sudo ln -s /Applications/Xcode.app/Contents/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/crt1.10.6.o /Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/crt1.10.6.o
sudo ln -s /Applications/Xcode.app/Contents/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/crt1.10.6.o /Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/x86_64/crt1.10.6.o 
```

* * *

**有关的**

[xcode项目中的错误：ld：找不到-lcrt1.10.6.o的库](https://stackoverflow.com/questions/1365211/error-in-xcode-project-ld-library-not-found-for-lcrt1-10-6-o#comment22989447_1365211)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:23:31.627

If I remember correctly this is what fixed the library not found problem.

```
CFLAGS="$(OTHER_CFLAGS) -miphoneos-version-min=5.0"
LDFLAGS="$(OTHER_LDFLAGS) --miphoneos-version-min=5.0" 
```

To link this to Xcode, under Build Settings then Header and Library search paths you need to add the paths to the built versions of the library and the header.

You can add the build script as part of your Xcode project, but I haven't had success with this, plus you should only need to build it once per version, so putting the time into anything other than a build script doesn't have much return.

If you decide to put the script in your project anyway (good luck!), then go to the build phases tab, add a build phase of type "Run Script" and paste your script there.

# javascript - 支持多个相册和评论的照片库？

> ID：10941248
> 
> 赞同：2
> 
> 时间：2012-06-07T23:27:48.527
> 
> 标签：javascript, jquery, image-gallery

我正在寻找支持拥有多个相册和评论的照片库（可能是 jquery/JavaScript？）。只需要显示评论并有一个框来输入评论，我可以很容易地将它们存储在数据库中。

任何与 facebook 类似的东西都会很棒，因为每个人都使用它，而且对他们来说很直观。

编辑：这将适用于使用 asp.net mssql server 2008 r2 的 Web 应用程序，但我可以使用任何平台，只要我可以与 mssql db 通信

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:58:33.473

我知道这有点晚了-但我认为这可能是您想要的：

[http://www.jqueryrain.com/?t2bpYeU2](http://www.jqueryrain.com/?t2bpYeU2)

编辑-

为了使这个问题保持最新状态-这最近才出现，可能比原始插件更好：[http ://codecanyon.net/item/jquery-facebook-gallery/full_screen_preview/3879813?ref=jqueryrain](http://codecanyon.net/item/jquery-facebook-gallery/full_screen_preview/3879813?ref=jqueryrain)

编辑 [九月。2013 年 7 月] - Albumize 最近出来了。任何人阅读的另一个选择。[http://palerdot.github.io/albumize/](http://palerdot.github.io/albumize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:52:47.947

在撰写本文时，[minishowcase](http://minishowcase.net/)和[qGallery](http://qgallery.quadrifolia.de/)似乎是更流行的多专辑 jquery/javascript 库。我相信他们都有一些 php 在里面运行。

如果您因任何原因不喜欢 php，并且想要直接使用 javascript、css 和 html，请尝试查看[JonDesign 的 Smooth Gallery](http://smoothgallery.jondesign.net/showcase/gallery-set/)。它也是开源的并且允许多张专辑（虽然不像前两个那样美观并且没有原生评论插件，但它是非常直接的代码并且可以很容易地与诸如[Easy Comment](http://www.jswidget.com/lab/easy-comment.html)之类的 jquery 评论插件集成）。

编辑：另请查看[TN3](http://www.tn3gallery.com/getting-started-dividing-images-into-albums/)。他们显然支持多个专辑，但我从未使用过它，因为它对于 jQuery 许可证来说有点贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-05T11:08:15.627

我确实知道这是一篇较旧的帖子，但我想为该帖子的任何以下访问者添加一个纯 JavaScript 解决方案。gambarize[插件](http://gambarize.klickagent.ch/)仅使用客户端 javascript 运行，不需要使用任何后端语言。（因此无法支持评论）

基本上可以创建一个**div 结构**，如下所示：

```
 <a href="data/album_simple/wave.jpg" data-img-thumb="data/album_simple/_meta/thumb_wave.png" title="Wave, Bali" class="gmbz"></a>
 <a href="data/album_simple/mountains.jpg" data-img-thumb="data/album_simple/_meta/thumb_mountains.png" title="Mountains, Shadow" class="gmbz"></a>

 <div class="gmbz" data-title="Album1">
    <div class="gmbz" data-title="Nested">
        <div class="gmbz" data-title="Inner">
                <a href="data/album_simple/wave.jpg" data-img-thumb="data/album_simple/_meta/thumb_wave.png" title="Wave, Bali" class="gmbz"></a>
        </div>
    </div>

    <div class="gmbz" data-title="Empty" data-cover="data/Black-287.png"></div>

    <a href="data/album_simple/field.jpg" data-img-thumb="data/album_simple/_meta/thumb_field.png" title="" class="gmbz"></a>
    <a href="data/album_simple/sea.jpg" data-img-thumb="data/album_simple/_meta/thumb_sea.png" title="Sea, Bali" class="gmbz"></a>
</div> 
```

它最终会出现在：

![gambarize_javascript_album_image_gallery_plugin](../Images/7a94c083aadad07f92e0138106f0d0b2.png)

**解释**

*   每个“div”代表一个专辑（包括嵌套专辑支持）。
*   每个“a”代表一个图片链接，这将是图像本身：属性“href”是当您单击画廊内的缩略图时将显示的图像。而缩略图可以通过“data-img-thumb”标签指定
*   访问所描述的示例：[使用 javascript 生成带有相册的图片库](http://gambarize.klickagent.ch/en/current/examples/parsing-basic/)

[链接到插件主页](http://gambarize.klickagent.ch/)

# ruby-on-rails-3 - 分离 REST JSON API 服务器和客户端？

> ID：10941249
> 
> 赞同：372
> 
> 时间：2012-06-07T23:27:56.743
> 
> 标签：ruby-on-rails-3, rest, backbone.js, sinatra, ember.js

我即将从头开始创建一堆网络应用程序。（有关概述，请参见[http://50pop.com/code](http://50pop.com/code)。）我希望它们能够从许多不同的客户端访问：前端网站、智能手机应用程序、后端 Web 服务等。所以我真的想要一个每个 JSON REST API。

此外，我更喜欢在后端工作，所以我梦想着只专注于 API，并聘请其他人来制作前端 UI，无论是网站、iPhone、Android 还是其他应用程序。

**请帮助我决定我应该采取哪种方法：**

> ### 一起在铁轨上
> 
> 制作一个非常标准的 Rails 网络应用程序。在控制器中，执行 respond_with 开关，以提供 JSON 或 HTML。JSON 响应就是我的 API。
> 
> **优点：**很多先例。伟大的标准和许多以这种方式做事的例子。
> 
> **缺点：**不一定希望 API 与 Web 应用程序相同。不喜欢 if/then respond_with 切换方法。混合两种非常不同的东西（UI + API）。

> ### REST SERVER + JAVASCRIPT-HEAVY 客户端
> 
> 制作仅 JSON 的 REST API 服务器。使用 Backbone 或 Ember.js 作为客户端 JavaScript 直接访问 API，在浏览器中显示模板。
> 
> **Pro：**我喜欢 API 和客户端的分离。聪明的人说这是要走的路。理论上很棒。看起来很前沿和令人兴奋。
> 
> **缺点：**没有太多先例。这方面做得好的例子并不多。公共示例 (twitter.com) 感觉迟缓，甚至正在放弃这种方法。

> ### REST 服务器 + 服务器端 HTML 客户端
> 
> 制作仅 JSON 的 REST API 服务器。制作一个仅访问 REST API 的基本 HTML 网站客户端。更少的客户端 JavaScript。
> 
> **Pro：**我喜欢 API 和客户端的分离。但是提供纯 HTML5 是非常简单的并且不是客户端密集型的。
> 
> **缺点：**没有太多先例。这方面做得好的例子并不多。框架也不支持这一点。不知道如何处理它。

尤其是从经验中寻求建议，而不仅仅是理论上的建议。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-07T23:54:25.760

在[Boundless](http://boundless.com)，我们深入研究了选项 #2，并将其推广给了成千上万的学生。我们的服务器是一个 JSON REST API（Scala + MongoDB），我们所有的客户端代码都是直接从 CloudFront 提供的（即：www.boundless.com 只是 CloudFront 的别名）。

优点：

*   前沿/激动人心
*   物超所值：API 为您自己的 Web 客户端、移动客户端、第 3 方访问等提供了基础。
*   *极快*的网站加载/页面转换

缺点：

*   没有更多的工作，对 SEO 不友好/准备就绪。
*   需要一流的网络前端人员，他们准备好应对 70% javascript 的网站体验的现实以及这意味着什么。

我确实认为这是所有网络应用程序的未来。

对 Web 前端人员的一些想法（这是该架构赋予所有新事物/挑战的地方）：

*   咖啡脚本。更容易生成高质量的代码。
*   骨干。组织逻辑和活跃社区的好方法。
*   汉密尔顿。Haml + CoffeeScript 模板 => JS。
*   SASS

我们为我们的前端开发构建了一个称为“Spar”（单页应用程序火箭飞船）的工具，它实际上是 Rails 为单页应用程序开发调整的资产管道。我们将在接下来的几周内在我们的[github](https://github.com/GoBoundless)页面上开源，并附上一篇博客文章，详细解释如何使用它和整体架构。

更新：

关于人们对 Backbone 的担忧，我认为他们被高估了。Backbone 与其说是一个深度框架，不如说是一个组织原则。Twitter 的网站本身就是一个巨大的 Javascript 野兽，涵盖了数百万用户和旧版浏览器的每一个角落，同时实时加载推文、垃圾收集、显示大量多媒体等。在我所有的“纯”js 网站中可见，Twitter 是个奇怪的人。有许多通过 JS 交付的非常复杂的应用程序运行良好。

您对架构的选择完全取决于您的目标。如果您正在寻找支持多个客户并获得优秀前端人才的最快方式，那么投资独立 API 是一个不错的选择。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-06-08T09:15:42.337

问得很好。+1。当然，这对我来说是未来有用的参考。@Aaron 和其他人也为讨论增加了价值。与 Ruby 一样，这个问题同样适用于其他编程环境。

我使用了前两个选项。第一个用于众多应用程序，第二个用于我的开源项目[Cowoop](http://cowoop.net)

> ### 选项1
> 
> 这一款无疑是最受欢迎的一款。但我发现实现非常http-ish。每个 API 的初始代码都用于处理请求对象。所以 API 代码不仅仅是纯粹的 ruby​​/python/其他语言代码。

> ### 选项 2
> 
> 我一直很喜欢这个。
> 
> 此选项还意味着 HTML 不是在服务器上运行时生成的。这就是选项 2 与选项 3 的不同之处。但是使用构建脚本将其构建为静态 html。当在客户端加载时，这些 HTML 将调用 API 服务器作为 JS API 客户端。
> 
> *   关注点分离是很大的优势。并且非常符合您（和我）的喜好，后端专家实现了后端 API，像通常的语言代码一样轻松地测试它们，而无需担心框架/http 请求代码。
>     
>     
> *   这实际上并不像在前端听起来那么困难。API 调用和结果数据（主要是 json）是否可用于您的客户端模板或 MVC。
>     
>     
> *   更少的服务器端处理。这意味着您可能会选择商品硬件/较便宜的服务器。
>     
>     
> *   更容易独立测试层，更容易生成 API 文档。
>     
>     
> 
> 它确实有一些缺点。
> 
> *   许多开发人员发现这过度设计且难以理解。因此，架构可能会受到批评。
>     
>     
> *   i18n/l10n 很难。由于 HTML 本质上是生成的，构建时间是静态的，因此每种支持的语言都需要多次构建（这不一定是坏事）。但即便如此，您可能会遇到 l10n/i18n 附近的极端情况，需要小心。

> ### 选项 3
> 
> 在这种情况下，后端编码必须与第二个选项相同。选项 2 的大部分要点也适用于此。
> 
> 网页使用服务器端模板在运行时呈现。这使得 i18n/l10n 更容易使用更成熟/公认的技术。对于页面渲染所需的某些基本上下文（如用户、语言、货币等），可能会减少一次 http 调用。因此，服务器端处理随着渲染而增加，但可能会通过减少对 API 服务器的 http 调用来补偿。
> 
> 现在页面是在服务器上呈现的，前端现在与编程环境更加紧密。对于许多应用程序来说，这甚至可能不是考虑因素。

# 推特案例

据我了解，Twitter 可能会在服务器上进行初始页面渲染，但对于页面更新，它仍然有一些 API 调用和客户端模板来操作 DOM。因此，在这种情况下，您需要维护双重模板，这会增加一些开销和复杂性。与 Twitter 不同，并非每个人都能负担得起这种选择。

# 我们的项目堆栈

我碰巧使用Python。我使用 JsonRPC 2.0 而不是 REST。我建议使用 REST，尽管出于各种原因我喜欢 JsonRPC 的想法。我使用以下库。考虑选项 2/3 的人可能会发现它很有用。

*   API Server：Python 一个快速的 Web 微框架 - [Flask](http://flask.pocoo.org)
*   前端服务器：Nginx
*   客户端 MVC：[Knockout.js](http://knockoutjs.com/)
*   其他相关工具/库：
    *   jQuery
    *   货币的[Accounting.js](http://josscrowcroft.github.com/accounting.js)
    *   [Webshim](https://github.com/aFarkas/webshim) : 跨浏览器polyfill
    *   [导演](https://github.com/flatiron/director)：客户端路由
    *   [sphc](http://pypi.python.org/pypi/sphc) : HTML 生成

## 我的结论和建议

选项3！。

总而言之，我已经成功使用了选项 2，但现在为了简单起见倾向于选项 3。使用构建脚本生成静态 HTML 页面并使用专门提供静态页面的超快速服务器之一为它们提供服务是非常诱人的（选项 2）。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-06-12T01:03:00.990

我们在构建 gaug.es 时选择了 #2。我负责 API（ruby、sinatra 等），而我的商业伙伴 Steve Smith 负责前端（javascript 客户端）。

优点：

1.  快速平行移动。如果我在 Steve 之前工作，我可以继续为新功能创建 API。如果他在我之前工作，他可以​​很容易地伪造 API 并构建 UI。

2.  API 免费。对应用程序中的数据进行开放访问正迅速成为一项标准功能。如果您从头开始使用 API，您可以免费获得它。

3.  干净的分离。最好将您的应用程序视为具有客户端的 API。当然，第一个也是最重要的客户端可能是 Web 客户端，但它可以让您轻松创建其他客户端（iPhone、Android）。

缺点：

1.  向后兼容性。与您的直接问题相比，这与 API 更相关，但是一旦您的 API 出现，您就不能仅仅破坏它或者破坏所有客户端两个。这并不意味着你必须放慢速度，但这确实意味着你必须经常同时做两件事。添加到 API 或新字段是好的，但不应该在没有版本控制的情况下进行更改/删除。

我现在想不出缺点了。

结论：如果您打算发布 API，API + JS 客户端是必经之路。

PS 我还建议在发布之前完整记录您的 API。记录 Gaug.es API 的过程确实帮助我们实现了

[http://get.gaug.es/documentation/api/](http://get.gaug.es/documentation/api/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-07T23:53:03.157

我更喜欢走#2和#3的路线。主要是因为#1 违反了关注点分离并且混合了各种东西。最终，您会发现需要一个没有匹配的 HTML 页面/等的 API 端点，并且您将在同一代码库中混杂 HTML 和 JSON 端点。它变成了一团糟，即使它的 MVP，你最终也必须重新编写它，因为它太乱了，甚至不值得挽救。

使用 #2 或 #3 可以让您完全拥有一个行为相同（大部分）的 API。这提供了很大的灵活性。我还没有在 Backbone/ember/whatever/etc.js 上 100% 售出。我认为它很棒，但正如我们在推特上看到的那样，这并不是最佳选择。但是... Twitter 也是一家公司的巨兽，拥有数亿用户。因此，任何改进都会对各个业务部门的各个领域的底线产生巨大影响。我认为决定不仅仅是速度，他们不会让我们参与其中。但那只是我的个人意见。但是，我并不低估骨干及其竞争对手。这些应用程序非常好用，非常干净且响应迅速（大部分情况下）。

第三种选择也具有一定的吸引力。这就是我遵循帕累托原则（80/20 规则）并在服务器上呈现 20% 的主要标记（反之亦然）的地方，然后让一个不错的 JS 客户端（骨干网/等）运行其余部分. 您可能不会通过 JS 客户端与 REST api 进行 100% 的通信，但如果有必要，您将做一些工作以使用户体验更好。

我认为这是“取决于”类型的问题之一，答案是“取决于”你在做什么，你在为谁服务，以及你希望他们获得什么样的体验。鉴于我认为您可以在 2 个或 3 个或它们的混合体之间做出决定。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-08T00:10:59.707

我们使用 #3 的以下变体：制作仅 JSON 的 REST API 服务器。制作一个 HTML 网站服务器。HTML Web 服务器不像您的变体那样是 REST API 服务器的客户端。相反，两者是同行。在表面之下不远处，有一个内部 API 可提供两台服务器所需的功能。

我们不知道任何先例，所以它是一种实验性的。到目前为止（即将进入测试版）​​，它运行良好。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-06-08T10:28:44.583

我目前正在将一个巨大的 CMS 从选项 1 转换为选项 3，并且进展顺利。我们选择在服务器端呈现标记，因为 SEO 对我们来说很重要，我们希望网站在手机上表现良好。

我将 node.js 用于客户端的后端，并使用一些模块来帮助我。我在这个过程中有点早，但基础已经建立，这是一个检查数据以确保一切正确呈现的问题。这是我正在使用的：

*   Express 为应用程序的基础。
    (https://github.com/visionmedia/express)
*   请求获取数据。
    (https://github.com/mikeal/request)
*   在服务器端呈现的下划线模板。我在客户端上重用这些。
    (https://github.com/documentcloud/underscore)
*   UTML 包装了 underscore 的模板以使它们与 Express 一起使用。
    (https://github.com/mikefrey/utml)
*   前期收集模板，让您选择发送给客户的模板。
    (https://github.com/mrDarcyMurphy/upfront)
*   Express Expose 将获取的数据、一些模块和模板传递到前端。
    (https://github.com/visionmedia/express-expose)
*   Backbone 在吞下传递的数据后在前端创建模型和视图。
    (https://github.com/documentcloud/backbone)

这就是堆栈的核心。我发现其他一些有用的模块：

*   斑点（https//github.com/trek/fleck）
*   时刻（https//github.com/timrwood/moment）
*   手写笔（https//github.com/LearnBoost/stylus）
*   smoosh (https//github.com/fat/smoosh)
    …虽然我正在研究 grunt (https//github.com/cowboy/grunt)
*   控制台跟踪（//github.com/LearnBoost/console-trace）。

不，我没有使用咖啡脚本。

这个选项对我来说非常有效。后端的模型不存在，因为我们从 API 获得的数据结构良好，我将其逐字传递给前端。唯一的例外是我们的布局模型，我在其中添加了一个使渲染更智能、更轻量的属性。我没有为此使用任何花哨的模型库，只是一个在初始化时添加我需要的内容并返回自身的函数。

（对不起，奇怪的链接，我太多了堆栈溢出的 n00b 让我发布那么多）

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-06-21T13:16:58.837

我通常会选择第二个选项，使用 Rails 构建 API，并使用 JS 的主干。您甚至可以使用[ActiveAdmin](http://www.activeadmin.info)免费获得一个管理面板。我已经发布了数十个带有这种后端的移动应用程序。但是，这在很大程度上取决于您的应用程序是否具有交互性。

我在上届[RubyDay.it](http://www.rubyday.it)上对这种方法做了一个介绍：[http ://www.slideshare.net/matteocollina/enter-the-app-era-with-ruby-on-rails-rubyday](http://www.slideshare.net/matteocollina/enter-the-app-era-with-ruby-on-rails-rubyday)

对于第三个选项，为了获得第二个选项的响应能力，您可能想像Github 一样尝试[pajax 。](http://pjax.heroku.com/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-06-07T23:57:31.703

我进入一个为期 3 个月的项目大约 2 个月，该项目采用您在此处概述的第二种方法。我们使用一个 RESTful API 服务器端，前端有主干.js。Handlebars.js 管理模板，jQuery 处理 AJAX 和 DOM 操作。对于较旧的浏览器和搜索蜘蛛，我们已经退回到服务器端渲染，但我们使用与使用 Mozilla Rhino 的 Handlebars 前端相同的 HTML 模板。

我们出于许多不同的原因选择了这种方法，但非常清楚这有点冒险，因为它还没有得到广泛的证明。一切都一样，到目前为止一切都很顺利。

到目前为止，我们只使用了一个 API，但在项目的下一阶段，我们将使用第二个 API。第一个是处理大量数据，第二个更像是通过 API 的 CMS。

让项目的这两个部分完全独立运行是选择此基础架构的关键考虑因素。如果您正在寻找一种架构来混搭不同的独立资源而没有任何依赖关系，那么这种方法值得一看。

恐怕我不是 Ruby 人，所以我无法评论其他方法。有时冒险是可以的。其他时候最好安全地玩。您将根据项目的类型了解自己。

祝您在这里选择好运。也渴望看到其他人分享的内容。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-06-08T01:47:04.250

当我的网站不会 100% 实现数据的 CRUD 时，我喜欢 #3。这还没有发生。

我更喜欢 sinatra，并将应用程序拆分为几个具有不同用途的不同机架应用程序。我将制作一个特定于 API 的机架应用程序，该应用程序将涵盖我对 API 的需求。然后也许是一个用户机架应用程序，它将展示我的网页。有时该版本会在需要时查询 API，但通常它只关注 html 站点。

我不担心，如果需要，只需从用户端进行持久层查询。我不太关心创建完全分离，因为它们通常最终服务于不同的目的。

这是一个使用多个机架应用程序的*非常*简单的示例。我在其中添加了一个快速的 jquery 示例，供您查看它访问 API 应用程序。您可以看到使用 sinatra 和安装具有不同目的的多个机架应用程序是多么简单。

[https://github.com/dusty/multi-rack-app-app](https://github.com/dusty/multi-rack-app-app)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-08T11:13:45.247

这里已经有一些很好的答案——我肯定会推荐 #2 或 #3——这种分离在概念上是好的，但在实践中也是如此。

很难预测 API 上的负载和流量模式等内容，我们看到独立服务 API 的客户可以更轻松地进行配置和扩展。如果您必须使用人类 Web 访问模式来做这件事，那就不太容易了。此外，您的 API 使用最终可能会比您的 Web 客户端更快地扩展，然后您就可以看到将您的努力指向何处。

在 #2 #3 之间，这真的取决于你的目标——我同意 #2 可能是 webapps 的未来——但如果该频道只是其中之一，也许你想要更直接的东西！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-08T12:29:15.523

对于 atyourservice.com.cy，我们使用服务器端渲染的页面模板，特别是为了覆盖 se 部分。并在页面加载后使用 API 进行交互。由于我们的框架是 MVC，所有控制器功能都复制到 json 输出和 html 输出。模板是干净的并且只接收一个对象。这可以在几秒钟内转换为 js 模板。我们始终维护服务器端模板，并根据请求重新转换为 js。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-06T08:10:34.090

同构渲染和渐进增强。这就是我认为你在选项三中的目标。

**同构渲染**意味着使用与您在客户端代码中使用的相同模板在服务器端生成标记。选择具有良好服务器端和客户端实现的模板语言。为您的用户创建完全烘焙的 html 并将其发送到网络中。也使用缓存。

**渐进增强**意味着一旦您下载了所有资源并且您可以确定客户端功能，就开始进行客户端执行和渲染以及事件侦听。尽可能回退到功能性的无客户端脚本功能，以实现可访问性和向后兼容性。

是的，当然要为此应用功能编写一个独立的 json api。但不要走得太远以至于你为作为静态 html 文档工作的东西编写了一个 json api。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-27T14:25:27.127

REST server + JavaScript-heavy client 是我最近工作中遵循的原则。

REST 服务器是在[node.js](https://nodejs.org/) + [Express](http://expressjs.com/) + [MongoDB](https://www.mongodb.org/)（非常好的编写性能）+ [Mongoose ODM](http://mongoosejs.com/)（非常适合建模数据，包括验证）+ [CoffeeScript](http://coffeescript.org/)（我现在改用 ES2015）中实现的，这对我来说效果很好。与其他可能的服务器端技术相比，Node.js 可能相对年轻，但它使我能够编写集成支付的可靠 API。

我使用[Ember.js](http://emberjs.com/)作为 JavaScript 框架，大部分应用程序逻辑都在浏览器中执行。我使用[SASS](http://sass-lang.com/)（特别是 SCSS）进行 CSS 预处理。

Ember 是由强大社区支持的成熟框架。它是一个非常强大的框架，最近在性能方面做了很多工作，比如[全新的 Glimmer 渲染引擎](http://emberjs.com/blog/2015/05/05/glimmer-merging.html)（受 React 启发）。

Ember 核心团队正在开发[FastBoot](https://github.com/tildeio/ember-cli-fastboot)，让您可以在服务器端（特别是 node.js）执行 JavaScript Ember 逻辑，并将应用程序的预渲染 HTML（通常在浏览器中运行）发送给用户。这对于 SEO 和用户体验来说非常棒，因为他不会等待这么长时间来显示页面。

[Ember CLI](http://www.ember-cli.com/)是一个很棒的工具，可以帮助您组织代码，并且可以很好地随着代码库的增长而扩展。Ember 也有自己的插件生态系统，您可以从各种[Ember 插件](http://www.emberaddons.com/)中进行选择。您可以轻松获取 Bootstrap（在我的情况下）或 Foundation 并将其添加到您的应用程序中。

不是通过 Express 提供所有服务，我选择使用 nginx 来提供图像和 JavaScript 繁重的客户端。在我的情况下，使用 nginx 代理很有帮助：

```
upstream app_appName.com {
  # replace 0.0.0.0 with your IP address and 1000 with your port of node HTTP server
  server 0.0.0.0:1000;
  keepalive 8;
}

server {
  listen 80 default_server;
  listen [::]:80 default_server ipv6only=on;

  client_max_body_size 32M;

  access_log  /var/log/nginx/appName.access.log;
  error_log  /var/log/nginx/appName.error.log;

  server_name appName.com appName;

  location / {
     # frontend assets path
     root /var/www/html;
     index index.html;

     # to handle Ember routing
     try_files $uri $uri/ /index.html?/$request_uri;
  }

  location /i/ {
    alias /var/i/img/;
  }

  location /api/v1/ {
    proxy_pass  http://app_appName.com;

    proxy_next_upstream error timeout invalid_header http_500 http_502
http_503 http_504;
    proxy_redirect off;
    proxy_buffering off;
    proxy_set_header        Host            $host;
    proxy_set_header        X-Real-IP       $remote_addr;
    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
  }
} 
```

> Pro：我喜欢 API 和客户端的分离。聪明的人说这是要走的路。理论上很棒。看起来很前沿和令人兴奋。

我可以说它在实践中也很棒。分离 REST API 的另一个优点是您可以稍后将其重新用于其他应用程序。在完美的世界中，您应该能够将相同的 REST API 不仅用于网页，还可以用于移动应用程序（如果您决定编写一个）。

> 缺点：没有太多先例。这方面做得好的例子并不多。公共示例 (twitter.com) 感觉迟缓，甚至正在放弃这种方法。

现在情况看起来不同了。有很多做 REST API 的例子 + 许多客户使用它。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-06-06T07:44:07.727

我决定为[Infiniforms](https://www.infiniforms.io)选择 Option #2 的架构，因为它提供了一种将 UI 与业务逻辑分离的好方法。

这样做的一个优点是 API 服务器可以独立于 Web 服务器进行扩展。如果您有多个客户端，则网站不需要像 Web 服务器那样扩展，因为某些客户端将基于手机/平板电脑或台式机。

这种方法还为您向用户开放 API 提供了良好的基础，尤其是当您使用自己的 API 为您的网站提供所有功能时。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-07-06T13:54:23.220

一个非常好的问题，我很惊讶，因为我认为这是当今非常普遍的任务，因此我将有足够的资源来解决这个问题，但结果并非如此。

我的想法如下： - 创建一些在 API 控制器和 HTML 控制器之间具有共同逻辑的模块，**而不**返回 json 或呈现 html，并将该模块包含在 HTML 控制器和 API 控制器中，然后做任何你想做的事情，例如：

```
module WebAndAPICommon
    module Products

        def index
            @products = # do some logic here that will set @products variable
        end

    end
end

class ProductsController < ApplicationController
    # default products controlelr, for rendering HMTL pages 
    include WebAndAPICommon

    def index
        super
    end

end

module API
    class ProductsController
        include WebAndAPICommon

        def index
            super
            render json: @products
        end

    end
end 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-09-10T10:30:48.167

我采用了一种混合方法，我们使用 Sinatra 作为基础，使用 ActiveRecord / Postgress 等来提供页面路由（超薄模板），从而公开 Web 应用程序可以使用的 REST API。在早期开发中，诸如填充选择选项之类的事情是通过渲染到苗条模板中的助手来完成的，但是当我们接近生产时，这会被替换为对 REST API 的 AJAX 调用，因为我们开始更关心页面加载速度等等。

很容易在 Slim 中呈现的东西就是这样处理的，而且东西（填充表单，从 jQuery.Validation 接收表单 POST 数据`submitHandler`等，显然都是 AJAX）

测试是个问题。现在我[很难将 JSON 数据传递给 Rack::Test POST test](https://stackoverflow.com/questions/18713714/testing-an-ajax-post-using-racktest-how-to-pass-in-data)。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-12-02T10:37:10.220

我个人更喜欢选项（3）作为解决方案。它几乎用于我的前（家喻户晓）雇主拥有的所有网站。这意味着您可以找到一些了解 Javascript、浏览器怪癖和诸如此类的前端开发人员来编写您的前端代码。他们只需要知道“curl xyz，你就会得到一些 json”，然后他们就走了。

同时，您的重量级后端人员可以编写 Json 提供程序。这些人根本不需要考虑演示，而是担心不稳定的后端、超时、优雅的错误处理、数据库连接池、线程和扩展等。

选项 3 为您提供了一个良好、可靠的三层架构。这意味着你从前端吐出的东西是 SEO 友好的，可以使用旧的或新的浏览器（以及那些关闭 JS 的浏览器），如果你愿意，仍然可以是 Javascript 客户端模板（所以你可以做一些事情，比如用静态 HTML 处理旧浏览器/googlebot，但将 JS 构建的动态体验发送给使用最新 Chrome 浏览器或其他的人）。

在我见过的所有情况下，选项 3 都是一些 PHP 的自定义实现，不能在项目之间特别转移，更不用说进入开源领域了。我想最近 PHP 可能已经被 Ruby/Rails 取代了，但同样的事情仍然存在。

FWIW，$current_employer 可以在几个重要的地方使用选项 3。我正在寻找一个好的 Ruby 框架来构建一些东西。我确信我可以将大量 gem 粘合在一起，但我更喜欢单一产品，它广泛地提供模板、“curling”、可选身份验证、可选 memcache/nosql 连接缓存解决方案。在那里我找不到任何连贯的东西:-(

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-07T17:29:31.643

[在 Rails 中构建 JSON API 是一流的，JSONAPI::Resources gem 为http://jsonapi.org](http://jsonapi.org)规范的 API完成了繁重的工作。

# rest - 关闭 REST 服务中的连接池是否会首先破坏连接池的目的？

> ID：10941251
> 
> 赞同：0
> 
> 时间：2012-06-07T23:28:14.197
> 
> 标签：rest, jdbc, bonecp

我正在使用 BoneCP 连接池 jdbc 连接到我的 mysql 数据库。我在我的 REST 应用程序中使用了 bonecp 示例。

如果每个 REST 请求都在打开和关闭连接池，这不是首先破坏了连接池的意义吗？

这是代码：

```
 public class ExampleJDBC {

/** Start test
 * @param args none expected.
 */
public static void main(String[] args) {
    BoneCP connectionPool = null;
    Connection connection = null;

    try {
        // load the database driver (make sure this is in your classpath!)
        Class.forName("org.hsqldb.jdbcDriver");
    } catch (Exception e) {
        e.printStackTrace();
        return;
    }

    try {
        // setup the connection pool
        BoneCPConfig config = new BoneCPConfig();
        config.setJdbcUrl("jdbc:hsqldb:mem:test"); // jdbc url specific to your database, eg jdbc:mysql://127.0.0.1/yourdb
        config.setUsername("sa"); 
        config.setPassword("");
        config.setMinConnectionsPerPartition(5);
        config.setMaxConnectionsPerPartition(10);
        config.setPartitionCount(1);
        connectionPool = new BoneCP(config); // setup the connection pool

        connection = connectionPool.getConnection(); // fetch a connection

        if (connection != null){
            System.out.println("Connection successful!");
            Statement stmt = connection.createStatement();
            ResultSet rs = stmt.executeQuery("SELECT 1 FROM      INFORMATION_SCHEMA.SYSTEM_USERS"); // do something with the connection.
            while(rs.next()){
                System.out.println(rs.getString(1)); // should print out "1"'
            }
        }
        connectionPool.shutdown(); // shutdown connection pool.
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        if (connection != null) {
            try {
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
} 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:29:44.380

是的，它会破坏在应用程序的（典型）生命周期中多次打开或关闭连接池的目的。您应该每次都从预先建立的池中获取连接。

# javascript - 在页面加载时选择自动完成值

> ID：10941258
> 
> 赞同：0
> 
> 时间：2012-06-07T23:29:03.807
> 
> 标签：javascript, jquery, html

我有一个使用 jQuery 自动完成的输入框。我想向页面添加一些功能，以便它可以在页面加载时接受一个值，然后选择自动完成列表中的首选。我创建了一个 jsfiddle 来演示我的意思：

[http://jsfiddle.net/bwhitney/MQpQG/2/](http://jsfiddle.net/bwhitney/MQpQG/2/)

或者这里只是代码：

```
var myArray = ["apple - a ripe red fruit"
, "banana - yellow fruit grown in bunches"
, "orange - the name says it all"];

$("input#textbox").autocomplete({
    source: myArray
});

$('#clickme').click(function() {
    // select the #1 autocomplete option for the given text "apple"
    // ???
});​ 
```

使用 html：

```
<input type="text" id="textbox" />
<input type="button" id="clickme" value="Set the value" /> 
```

因此，例如，如果页面加载了值“apple”，则应加载文本“apple - a 成熟的红色水果”。在这种情况下，发送整个短语“苹果 - 成熟的红色水果”不是一个可行的选择。

我可以编写一个循环来遍历数组中的每个项目并解析出第一个单词，但我希望 jQuery 有更好的方法来做到这一点，因为它已经可以在其列表的顶部获得正确的答案。

编辑：为了澄清，我想如果我可以通过按下按钮让它工作，我也可以通过在页面加载时传入一个值来让它工作。这就是为什么我的示例使用按钮而不是页面加载的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:42:11.703

自己编写并不费力，而且无论您如何看待它，您都必须遍历数组才能找到您要查找的项目。

```
var myWord = "apple";

$('#clickme').click(function() {
    for (item in myArray) {
        if (myArray[item].indexOf(myWord) == 0)
            $("#textbox").val(myArray[item]);
    }
}); 
```

[演示](http://jsfiddle.net/MQpQG/3/)

# java - Java - 从网页源代码中提取明文（从网站获取大量歌词）

> ID：10941259
> 
> 赞同：2
> 
> 时间：2012-06-07T23:29:19.197
> 
> 标签：java, web-scraping, pseudocode

O社区，我正在为一个应用程序编写伪代码，该应用程序通过阅读页面的源代码从远程主机（网络服务器，不是我自己的）中提取歌词。这是假设：

*   歌词以明文形式显示
*   Java 前端应用程序可以读取包含歌词的部分源代码

我不是在寻找源代码来回答这个问题，但是用于查询远程网页以获取纯文本内容的技术术语是什么？

如果我可以确定网页命名方案，我可以将 URL 对象的指针设置为相应的网页，对吗？唯一的限制是不规则的大写，并且只有在完全一样的地方找到明文时才会有效。

你有什么建议吗？我在为“Buck 65”考虑这样的事情，唱“我看起来不错”

> *   URL url = 新 URL(http://www.elyrics.net/read/b/buck-65-lyrics/i-look-good-lyrics.html);
>     *   我可以替换“buck-65-lyrics”和“i-look-good-lyrics”来反映用户输入吗？
>     *   输入重定向到 PostgreSQL 表
> 
> 当前目标：
> 
> *   用户将请求{歌曲、艺术家、专辑}的名称，Java 前端将查询远程网页
> *   将使用 Java 前端提取完整的源代码（包含明文）
> *   歌词将从源代码中提取（不知何故）
> *   如果歌曲当前没有被 PostgreSQL 服务器索引，将被添加到表中。
> *   将在明文上进行操作以适应程序的目标

我只是在寻找方向。如果我完全走错了方向，请告诉我。这仅适用于伪代码。我不是在寻找答案或分发资料，我需要帮助来确定我需要做什么。是否有您知道的用于提取纯文本的外部库？我要完成的工作有哪些技术名称？

谢谢，泰勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:40:48.553

这种方法称为[屏幕或数据抓取](https://en.wikipedia.org/wiki/Web_scraping)。请注意，使用它通常会违反目标服务的服务[条款](http://www.elyrics.net/tos.html)。通常，这不是一种健壮的方法，这就是为什么具有操作方式保证的类 API 服务更可取的原因。

您的方法听起来在大多数情况下都有效，但需要记住一些事项。

*   如果您正在与之交互的 Web 服务需要非常精确的 URL 方案，则不应将用户提供的数据直接输入其中，因为它可能会因缺少单词、缩写或拼写错误而变得混乱。您最好先进行某种搜索，然后使用该搜索的最佳结果。
*   读取 HTML 数据比您想象的要复杂。[使用像jsoup](http://jsoup.org/)这样的现有库来帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:42:12.983

从网站中提取内容的技术术语是网络抓取，你可以用谷歌搜索。有很多在线库，对于 java 有 jsoup。尽管编写自己的正则表达式很容易。我会做的第一件事是使用 curl 并从站点获取内容仅用于测试，这将使您对要做什么有一个公平的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:42:13.920

您将不得不使用 HTML 解析器。最受欢迎的之一是[jsoup](http://jsoup.org/)。

注意你所做的事情的法律方面；）

# python - 显示从 zip 存档 python 读取的图像

> ID：10941260
> 
> 赞同：3
> 
> 时间：2012-06-07T23:29:30.510
> 
> 标签：python, image, zip, tkinter, python-imaging-library

我想在 python 中创建一个漫画存档阅读器作为练习来教自己更多的 python，但是我在尝试从 zip 存档中读取不同的图像文件而不提取文件然后显示它们时遇到了麻烦。

我找到了一个网站，其中包含一个只能显示 .gif 图像的示例 (http://www.python-forum.org/pythonforum/viewtopic.php?f=4&t=3607)。该示例使用`PhotoImage`（Tkinter 版本而不是 PIL 版本）可以接受 64 位编码字符串而不是实际文件。从我的大部分研究来看，我想用 PIL 来处理 gif 以外的图像，但我找不到一种`PIL.ImageTk.PhotoImage`与`Tkinter.PhotoImage`. 获取数据流而不是实际文件。

有什么方法可以将收到的数据`zipfile.read()`交给 to`PIL.ImageTk.PhotoImage`吗？我可以使用另一个库来处理图像吗？Tkinter 不是我正在编写的程序的要求，所以如果我应该使用更好的小部件框架，我不介意改变。

编辑：所以我想办法用 PIL 和 tkinter 做到这一点。

```
z = zipfile.ZipFile("zipfile.zip", "r")

data = z.read(z.namelist()[0])    #Read in the first image data
dataEnc = StringIO(data)          #Encode the raw data to be used by Image.open()

img = Image.open(dataEnc)         #Open the image
pimg = ImageTk.PhotoImage(img)    #Make tk compatible image 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:09:59.893

你可以使用 PythonMagick 创建一个`Image`这样的：

```
from PythonMagick import *

data = zipfile.read()
img = Image(Blob(data)) 
```

然后按照“显示”部分下的 PythonMagick[自述](http://www.imagemagick.org/download/python/README.txt)文件中的建议使用 wxPython 显示它。

# c# - ToolStripProgressBar 在之后立即睡觉时不会重新绘制

> ID：10941264
> 
> 赞同：1
> 
> 时间：2012-06-07T23:29:50.507
> 
> 标签：c#, winforms, multithreading, sleep

我对 WinForms 中的线程只有一点经验。我正在尝试将进度条设置为 100，休眠 2 秒，然后隐藏进度条。

我有：

```
public void ProgressBarTimerStop()
{
    if (!AnyWorkersBusy())
    {
        if (InvokeRequired)
        {
            Invoke((MethodInvoker)delegate
            {
                ProgressBarTimer.Stop();
                Thread.Sleep(1000);
                Application.DoEvents();
                Thread.Sleep(1000);
                StatusToolStripProgressBar.Visible = false;
                StatusToolStripProgressBar.Value = StatusToolStripProgressBar.Minimum;
            });
        }
        else
        {
            ProgressBarTimer.Stop();
            StatusToolStripProgressBar.Value = StatusToolStripProgressBar.Maximum;
            Thread.Sleep(1000);
            Application.DoEvents();
            Thread.Sleep(1000);
            StatusToolStripProgressBar.Visible = false;
            StatusToolStripProgressBar.Value = StatusToolStripProgressBar.Minimum;
        }
    }
} 
```

对于我遇到的当前问题 InvokeRequired 是错误的。

当我拨打电话时：

```
StatusToolStripProgressBar.Value = StatusToolStripProgressBar.Maximum; 
```

我的监视窗口显示设置的值，但 GUI 尚未更新以反映这一点。如果我立即睡眠整整两秒钟，则 GUI 在睡眠前不会更新。

如果我在没有事先调用 sleep 的情况下调用 Application.DoEvents() - 它似乎什么都不做。

如果我睡着了，就调用 DoEvents——GUI 更新，然后我又睡着了。这是正确的，但我觉得我的代码令人发指。

我在这里误解了一个关键概念吗？

编辑： ProgressBarTimerStop 仅通过“RunWorkerCompleted”事件处理程序调用。

我试过这个，但没有效果：

```
StatusToolStripProgressBar.GetCurrentParent().Refresh(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:38:38.070

您缺少的“关键概念”是更新进度条的值不会立即告诉进度条重绘自身。

当您更新进度条时，GUI 线程会在下一个窗口重绘时重绘进度条。只有当 GUI 线程可以自由地这样做时，才会发生这种情况。通常，当窗口从操作系统接收到绘制消息时会发生这种情况。这应该由 接收`Application.DoEvents`，但可能是消息排队的速度不够快，无法由 接收`DoEvents`。您可以通过`Refresh`电话强制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:05:44.803

呼吁`StatusToolStripProgressBar.ProgressBar.Refresh();`每一步。`ProgressBar`的属性`ToolStripProgressBar`是隐藏的，它可能不会显示在智能感知列表中。

# postgresql - 无法重置 Heroku 共享数据库

> ID：10941269
> 
> 赞同：0
> 
> 时间：2012-06-07T23:31:05.273
> 
> 标签：postgresql, heroku

我正在尝试在 Heroku 上重置我的共享数据库。

我尝试了以下命令：

```
heroku pg:reset DATABASE
heroku pg:reset SHARED_DATABASE
heroku pg:reset SHARED_DATABASE_URL
heroku pg:reset DATABASE_URL 
```

每次我收到错误“找不到资源”，尽管这些在我的环境变量（heroku 配置）中并且正在使用我的应用程序。

任何人都知道我可能做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:33:51.053

我刚刚从 Heroku 支持人员那里得到了这个反馈：

> 嗨，这是由于 heroku 客户端中的错误。更新版本应在今天晚些时候 > 或星期一发布。
> 
> 您可能想借此机会尝试新的开发数据库： [https ://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/](https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/)
> 
> 2012 年 6 月 8 日 09:47

看起来您必须等待或使用开发数据库。

# wordpress - WordPress 。如何将一些帖子从首页移动到不同的页面？

> ID：10941271
> 
> 赞同：2
> 
> 时间：2012-06-07T23:31:40.750
> 
> 标签：wordpress, post, move

我在 WordPress 网站上有 40 个左右的帖子。

我需要将其中大约 20 个移动到我创建的新页面。

我已经为这些帖子创建了（新）页面和一个新类别。

我更改了编辑某些帖子并将类别更改为新类别。

它们出现在（新）页面上，但它们也都出现在首页上。

需要做什么才能使帖子仅显示在（新）页面上，而不是网站的主页上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:04:54.643

Exclude that category from the front page like so:

```
if ( is_front_page() ) { query_posts( 'cat=-1' ); } 
```

Switch out the "1" with the ID of the category you want to exclude. The - sign in front of the ID says it is excluded.

Reference: [WordPress Codex: Query Posts](http://codex.wordpress.org/Function_Reference/query_posts)

# php - 确定会话是否在客户端启用

> ID：10941272
> 
> 赞同：0
> 
> 时间：2012-06-07T23:31:42.367
> 
> 标签：php, session, status

如何确定客户端浏览器是否支持会话？

我正在编写一个防洪脚本 - 我想将每个操作的脚本操作限制为 5 秒，并且我想使用客户端会话存储 unix 时间，但首先我必须检查它们是否'被启用。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:40:09.583

我假设您试图限制每个客户端每 5 秒运行一次以上的脚本。

Http是一种无状态协议，PHP依赖cookie值（或参数值）在服务器端初始化会话。知道这一点，仅使用会话不足以阻止用户每 5 秒多次淹没您的脚本。用户客户端可以简单地不在请求中发送 cookie 或会话 ID 参数，您必须将其视为新会话。

您将不得不使用其他方法来识别用户会话。使用请求 IP 地址是一个好的开始，但对您来说可能效果不佳（尤其是因为许多用户可以拥有相同的面向公众的 IP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:36:04.420

您可以使用另一种方法。在每次页面加载时，创建一个新的 cookie（如果它不存在）。当您使用脚本时，您只需检查 cookie 是否存在，如果存在并且值正常，那么一切都很好。否则，您将禁用脚本运行。

# ruby - 使用“gets”从另一个奇怪的错误运行 ruby 脚本

> ID：10941273
> 
> 赞同：1
> 
> 时间：2012-06-07T23:31:44.703
> 
> 标签：ruby, input, terminal, gets

我编写了一个 ruby​​ 脚本，然后调用另一个 ruby​​ 脚本。被调用者脚本很长，并且有很多“获取”输入。

所以我要做的是打开我的 unix 终端，调用调用者脚本，然后它会执行以下简单的操作：

```
load "calleeScript.rb" 
```

calleeScript.rb 已被简化为仅执行此操作：

```
input = gets.chomp

print input 
```

但它只是给了我一个错误，就像它无法处理获取一样。错误说：

> ./getsTest.rb:3:in `gets': 没有这样的文件或目录 - 5 (Errno::ENOENT) from ./getsTest.rb:3

即使我取出它也不会打印/放入终端。所以知道我如何调用一个脚本然后调用另一个脚本（放弃完全控制或分叉），做一些输入/输出，然后仍然返回到前一个脚本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:51:24.703

[`Kernel#gets`](http://RubyDoc.Info/stdlib/core/Kernel%3agets)是一种方便的方法，允许您通过标准输入和文件处理输入。

如果您在没有任何参数的情况下调用脚本，例如：

```
getsTest.rb 
```

然后`Kernel#gets`从标准输入读取它的输入。但是，如果您这样调用脚本：

```
getsTest.rb foo.txt 
```

然后`Kernel#gets`从名为`foo.txt`.

在您的情况下，`Kernel#gets`抱怨它找不到名为 的文件`5`，所以大概您将脚本称为如下：

```
getsTest.rb 5 
```

如果您想从某个特定来源阅读，您应该调用[`IO#gets`](http://RubyDoc.Info/stdlib/core/IO%3agets)该特定来源。我建议打电话

```
$stdin.gets 
```

注意：从技术上讲，这不是魔术常数的特征，`Kernel#gets`而是`ARGF`魔术常数的特征。基本上，`Kernel#gets`只需调用`ARGF.gets`.

# cookies - 在 IE9 中使用 cookie 发出 CORS 请求？

> ID：10941281
> 
> 赞同：13
> 
> 时间：2012-06-07T23:32:46.857
> 
> 标签：cookies, internet-explorer-9, xdomainrequest

在 IE9 中，我尝试使用 cookie 进行跨源请求。但是，即使我将 Access-Control-Allow-Origin、Access-Control-Allow-Credentials、Access-Control-Allow-Methods 都设置为适当的值（原始域、true 和 GET、POST），IE9仍然没有从请求中发送或设置 cookie。这是我正在使用的脚本：

```
var xdr = new XDomainRequest()
xdr.open("http://mydomain.com/cors.php")
xdr.withCredentials = true;
xdr.send(); 
```

关于如何让 cookie 在 IE9 中处理 CORS 请求的任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T13:23:36.943

从这个页面[http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)在底部你可以看到`Update: Internet Explorer 10 now supports CORS using XMLHTTPRequest.`这意味着 CORS 在IE9。对不起。他们在同一篇文章中提出了一些使用代理的解决方法。

浏览器兼容性矩阵在[http://caniuse.com/cors](http://caniuse.com/cors)给出，其中部分支持是指

> Internet Explorer 8 通过 XDomainRequest 对象提供支持，但不支持凭据请求[http://code.google.com/p/sgvizler/wiki/Compatibility](http://code.google.com/p/sgvizler/wiki/Compatibility)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:30:21.080

根据我的经验，如果两个域都在您的控制范围内，则更好地使用`postMessage`

# java - 如何在 Play Framework 中使用 java git 子模块？

> ID：10941282
> 
> 赞同：0
> 
> 时间：2012-06-07T23:32:51.803
> 
> 标签：java, git, playframework, git-submodules

我想在我的 Play 1 应用程序中使用[org.openexchangerate.client 。](https://github.com/kgilmer/org.openexchangerate.client)

有没有合适的方法将它用作 git 子模块，或者我必须下载文件并将它们嵌入到我的项目中，从而失去与 git 的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:48:10.507

如果您要包含的项目未托管在任何地方，您可以将其添加到 github，然后使用子模块引用它。

# c# - 如何使用 oledb 将记录插入到访问表中？

> ID：10941284
> 
> 赞同：11
> 
> 时间：2012-06-07T23:32:59.100
> 
> 标签：c#, winforms, ms-access

我在 ms 访问中有一个 this Items 表

```
Items(Table)    
Item_Id(autonumber)
Item_Name(text)
Item_Price(currency) 
```

我正在尝试使用此代码插入记录。

```
OleDbConnection myCon = new OleDbConnection(ConfigurationManager.ConnectionStrings["DbConn"].ToString());
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "insert into Items ([Item_Name],[Item_Price]) values ('" + itemNameTBox.Text + "','" + Convert.ToDouble(itemPriceTBox.Text) + "')";
        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();
        System.Windows.Forms.MessageBox.Show("An Item has been successfully added", "Caption", MessageBoxButtons.OKCancel, MessageBoxIcon.Information);
        myCon.Close(); 
```

代码运行没有错误，但最后没有在表中找到记录我在做什么错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T09:40:34.220

您的 sql 插入文本不使用参数。
这是错误的原因，更糟糕的是[（SqlInjection）](http://en.wikipedia.org/wiki/SQL_injection)

以这种方式更改您的代码；

```
using(OleDbConnection myCon = new OleDbConnection(ConfigurationManager.ConnectionStrings["DbConn"].ToString()))
{
   OleDbCommand cmd = new OleDbCommand(); 
   cmd.CommandType = CommandType.Text; 
   cmd.CommandText = "insert into Items ([Item_Name],[Item_Price]) values (?,?)";
   cmd.Parameters.AddWithValue("@item", itemNameTBox.Text);
   cmd.Parameters.AddWithValue("@price", Convert.ToDouble(itemPriceTBox.Text)); 
   cmd.Connection = myCon; 
   myCon.Open(); 
   cmd.ExecuteNonQuery(); 
   System.Windows.Forms.MessageBox.Show("An Item has been successfully added", "Caption", MessageBoxButtons.OKCancel, MessageBoxIcon.Information); 
} 
```

当然，这假设价格文本框包含正确的数值。
确保在调用上面的代码之前添加这一行

```
double price;
if(double.TryParse(itemPriceTBox.Text, out price) == false)
{
    MessageBox.Show("Invalid price");
    return;
} 
```

然后`price`用作参数的值`@price`

** 4 年后编辑 **

这个答案需要更新。在上面的代码中，我使用 AddWithValue 将参数添加到 Parameters 集合。它有效，但应告知每位读者 AddWithValue 有一些缺点。特别是当目标列需要十进制值或日期时，如果您喜欢只添加字符串的简单路径。在这种情况下，如果我只写

```
cmd.Parameters.AddWithValue("@price", itemPriceTBox.Text); 
```

结果可能是语法错误或某种奇怪的值转换，日期也可能发生同样的情况。AddWithValue 创建一个字符串参数，数据库引擎应将该值转换为预期的列类型。但是客户端和服务器之间的区域设置差异可能会导致对值的任何类型的误解。

我认为使用总是更好

```
cmd.Parameters.Add("@price", OleDbType.Decimal).Value = 
           Convert.ToDecimal(itemPriceTBox.Text); 
```

有关 AddWithValue 问题的更多信息[可以在这里找到](http://blogs.msmvps.com/jcoehoorn/blog/2014/05/12/can-we-stop-using-addwithvalue-already/)

# html - 禁用 Chrome 中的默认表单提交按钮

> ID：10941285
> 
> 赞同：2
> 
> 时间：2012-06-07T23:32:59.783
> 
> 标签：html, google-chrome

这与[如何确定 HTML 表单上的默认提交按钮有关？](https://stackoverflow.com/questions/925334/how-is-the-default-submit-button-on-an-html-form-determined)

在我的网络应用程序的设计中，用户应该能够通过在文本输入中按 enter 直接提交表单，在这种情况下，不应提交该表单中的任何按钮，因为它们具有其他功能。为了避免默认按钮问题，我处理了`keydown`事件并以编程方式提交了表单。

当我在**Firefox**中对此进行测试时，似乎在输入键上按下了表单中的第一个按钮。简单的解决方案是在`keydown`事件处理程序中禁用该按钮。

**然而， Chrome**似乎“智能地”选择第一个非禁用按钮作为默认按钮，并且即使该按钮将被`keydown`处理程序立即禁用，也会使用该按钮提交。

可以使用这个[jsFiddle](http://jsfiddle.net/billccn/cNKfY/1/)来测试效果。在 Firefox 中，在复选框禁用“第一个”按钮后，在输入中输入 press 只会导致一次提交。在 Chrome 中，总是有两个提交，一个来自 keydown，另一个来自按钮按下，即使两个按钮都被禁用！

这迫使我更改代码中的所有 keydown 处理程序以返回 false 或处理所有按钮单击并检查按钮是否被禁用。两者似乎都不是好的代码。

有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:38:40.910

也许你可以把它挂在模糊上。尝试这个：

```
<input type="text" ... onblur="submit();" /> 
```

# iphone - 初学者数据库问题

> ID：10941289
> 
> 赞同：0
> 
> 时间：2012-06-07T23:33:09.553
> 
> 标签：iphone, objective-c, ios, database

我有一个在 tableView 中呈现内容的 iOS 应用程序。我添加了一个与我的数据库交互的“喜欢/不喜欢”功能（我使用 Parse.com）。每次有人喜欢/不喜欢某个内容时，都会将详细信息发送到 Parse 数据库。对于每条内容，我想计算并显示“喜欢”与“喜欢”+“不喜欢”的百分比。这是一个非常简单的数学运算，但我无法理解设计数据库表的最佳方法以及在 tableView 实际出现之前计算每条内容的“喜欢”百分比的最有效方法。

实际上，我的 tableView 中已经有一个循环，`viewDidLoad`它将另一个数据库表中的内容与“喜欢/不喜欢”表进行比较，以恢复用户的“喜欢/不喜欢”按钮状态（如果他们已经喜欢/不喜欢一块内容）。

起初，我想在初始`viewDidLoad`循环中创建一个数组。但是，使用`whereKey: equalTo:`每个片段内容的查询类型来简单地查找喜欢/不喜欢的数量需要很长时间。正如预测的那样，它也非常缓慢`cellForRowAtIndexPath`。

最坏的情况是，我可以在服务器端进行这些计算，然后只提取“喜欢”的百分比。但是，我想以某种方式在应用程序中实现这一点。我是一个完整的初学者，所以我可能会做错这一切。

这是我的数据库表的基础： ![在此处输入图像描述](../Images/f96a7585a80fd19cbe384a7e9eb5ace9.png)

**编辑：**我设法构建了一个服务器端程序，用于计算“喜欢”内容的用户百分比。我的应用程序在运行时从数据库中提取这个百分比。当用户“喜欢”某物时，为了使百分比变化更具响应性，我在本地计算了一个更新的百分比。这里的问题是当用户退出应用程序并重新打开时，数据会重新加载。如果服务器端程序最近没有运行，应用程序将显示旧的“喜欢”百分比（尚未计算最新的百分比）。我看到解决此问题的两个解决方案是：

1.  每 1-3 分钟运行一次服务器端程序
2.  当有人喜欢内容时向数据库发布更多数据（这将涉及对每个“喜欢”的额外数据库查询）。

我认为这两种选择对于我想要完成的事情来说都太昂贵了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:50:06.133

我建议将计算留给服务器端，并用应用程序中使用的信息进行响应。这将使您免于处理和解析传入的结果。

与设备相比，您在服务器上拥有更大的处理能力。

# facebook - 页面选项卡中的 Facebook 身份验证

> ID：10941291
> 
> 赞同：1
> 
> 时间：2012-06-07T23:33:39.117
> 
> 标签：facebook, api, facebook-apps, facebook-page, facebook-oauth

根据此处的规范：http: [//developers.facebook.com/docs/authentication/pagetab/](http://developers.facebook.com/docs/authentication/pagetab/)我想使用页面选项卡上的服务器端流程对用户进行自动化。我使用 PHP-SDK。

我的 redirect_uri 参数是这样构建的：

```
https://www.facebook.com/pages/null/PAGE_ID/app_YOUR_APP_ID 
```

我不断得到：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application 
```

我尝试了许多不同的设置组合。现在我已经填写了字段：`App Domains,Site URL,Canvas URL,Secure Canvas URL,Page Tab URL,Secure Page Tab URL`但仍然没有成功。地址都以相同结尾`/`。

链接由 sdk 正确构建。我测试“手动”构建它而不编码 redirect_uri 参数和重定向链接构建，如下所示：

```
https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID
https://www.facebook.com/pages/Page_Title/PAGE_ID?sk=app_YOUR_APP_ID 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:41:45.090

的格式`return_uri`又变了，新的格式是：

[https://www.facebook.com/PAGE_NAME?sk=app_YOUR_APP_ID](https://www.facebook.com/PAGE_NAME?sk=app_YOUR_APP_ID)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T21:22:46.337

该问题的答案是 facebook 文档不正确。有效的格式`return_uri`是：

[https://www.facebook.com/pages/null/PAGE_ID?sk=app_YOUR_APP_ID](https://www.facebook.com/pages/null/PAGE_ID?sk=app_YOUR_APP_ID)

# ant - 常春藤 - 两次解析相同的依赖项（使用两个不同的版本），到两个不同的文件

> ID：10941293
> 
> 赞同：4
> 
> 时间：2012-06-07T23:34:04.360
> 
> 标签：ant, dependencies, ivy

我有一个特殊的情况，我需要打包一些罐子，我需要一个罐子的两个版本。我的常春藤定义如下所示：

```
<dependency org="blah" name="blahname" rev="1.0.0" conf="baseline->default" /> 
```

我希望相同的依赖关系解决两次，一次使用版本 1.0.0，另一次使用版本 2.0.0。那可能吗？实现这一目标的最简单方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T00:52:45.610

使用 ivy 配置来创建和管理自定义的依赖组。

# 例子

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="group1" description="First group of dependencies"/>
        <conf name="group2" description="Second group of dependencies"/>
    </configurations>

    <dependencies>
        <dependency org="commons-lang" name="commons-lang" rev="2.6" conf="group1->default"/>
        <dependency org="commons-lang" name="commons-lang" rev="2.0" conf="group2->default"/>
    </dependencies>

</ivy-module> 
```

## 构建.xml

```
<project name="demo" default="resolve" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:resolve/>

        <ivy:retrieve pattern="lib/[conf]/[artifact]-[revision].[ext]"/>
    </target>

</project> 
```

**笔记：**

*   此示例使用检索任务来填充“lib”目录。另请参阅“cachepath”和“cachefileset”任务。

## 结果

Lib 目录中填充了所需的 jar。

```
$ tree
.
|-- build.xml
|-- ivy.xml
`-- lib
    |-- group1
    |   `-- commons-lang-2.6.jar
    `-- group2
        `-- commons-lang-2.0.jar 
```

# jquery - 当使用 JavaScript 触发提交时，Request.IsAjaxRequest() 为 false

> ID：10941298
> 
> 赞同：0
> 
> 时间：2012-06-07T23:35:12.747
> 
> 标签：jquery, ajax, asp.net-mvc-3

我有一个 mvc3 Ajax.BeginForm。我不想单击按钮，而是希望 JavaScript 从文本框之一的 onblur 事件中单击按钮。

我已经尝试了下面的代码，也只是用 $('#submitEmail').click(); 调用了一个函数 在里面。提交有效，我收到了回复，但问题出在控制器 Request.IsAjaxRequest() 为假。当我自己单击按钮时，Request.IsAjaxRequest() 为真。

```
@Html.TextBoxFor(model => model.LeadEmail, new { onBlur = "this.form.submit();" }) 
```

是的，我已经检查过使用 JavaScript 触发器时不存在提琴手 X-Requested-With 。我怎样才能让它在 onBlur 事件上提交表单并获得正确的 ajax 标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:47:33.910

我想在 Tigra 的回答中添加一些内容：

```
<script type="text/javascript">
    function FormAjaxSubmit() {
        var f = $("form").serialize();
        $.ajax({
            url: "/Control/Action",
            type: "POST",
            data: { formCollection: f },
            success: function (result) {
                $('#resultDiv').html(result);
            }
        });
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T01:13:47.783

所以我不确定为什么我尝试的方式不起作用。我认为它应该工作的方式。我按下按钮或按下按钮的代码应该是一样的。显然是有区别的。也许有这方面知识的人可以告诉我们。但解决方案是实际做一个 ajax 帖子。

```
<script type="text/javascript">
function FormAjaxSubmit() {
    var someThing = $("#SomeThing").val();
    $.ajax({
        url: "/Control/Action",
        type: "POST",
        data: { SomeThing: someThing },
        success: function (result) {
            $('#resultDiv').html(result);
        }
    });
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:43:22.490

在表单上调用提交方法本质上与单击表单的提交按钮相同，当您这样做时，浏览器会根据方法属性中定义的方法类型（GET/POST）进行请求。

调用 submit 不是 ajax 请求，它是一个表单提交，它会重新加载整个页面，这就是它不起作用的原因。

# c# - 多字段索引对象数组

> ID：10941299
> 
> 赞同：1
> 
> 时间：2012-06-07T23:35:51.330
> 
> 标签：c#, linq-to-objects, in-memory-database

```
public class User
{
   public int Id { get; set; }
   public int Age { get; set; }
   public string Name { get; set; }
} 
```

我有 10 万用户。

查询：获取姓名为“Rafael”且年龄在 40 到 50 之间的用户

*   通过 Linq2Objects ： users.Where(p=>p.Name=="Rafael" && p.Age>=40 && p.Age<=50).ToArray();

有没有性能更好的替代实现？（只读线程安全）

（多索引用户数组）

我测试了它的性能。对于 100 万用户，需要 30-50 毫秒。这似乎并不重要，但确实如此。因为我可以在一秒钟内收到 50 个请求。

使用 dharnitski 的解决方案。它需要0毫秒。:)

但是是否有任何代码框架使其透明。

```
public  class   FastArray<T> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:25:04.433

如果您的数据没有准备好，那么如果没有完整的数据集扫描，您将无法获得您想要的结果。在时间不紧迫时提前准备数据，并在您需要较短的响应时间时处理已排序的数据。

在数据库世界中有一个类比。

*有一个包含 100K 记录的表。有人想要运行带有“where”子句的 Select 查询，该子句通过非主键过滤数据。除非实现了索引，否则执行计划中的“表扫描”操作总是很慢。*

使用以下代码实现索引的代码示例[`ILookup<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/bb534291.aspx)：

```
//not sorted array of users - raw data
User[] originalUsers;
//Prepare data in advance (create one index). 
//Field with the best distribution should be used as key
ILookup<string, User> preparedUsers = originalUsers.ToLookup(u => u.Name, u => u);

//run this code when you need subset 
//search by key is optimized by .NET class 
//"where" clause works with small set of data
preparedUsers["Rafael"].Where(p=> p.Age>=40 && p.Age<=50).ToArray(); 
```

这段代码没有数据库索引那么强大（例如它不支持子字符串），但它显示了这个想法。

# php - 如何使用 PHP/Regex 解析 Google Voice 电子邮件地址？

> ID：10941300
> 
> 赞同：1
> 
> 时间：2012-06-07T23:35:57.897
> 
> 标签：php, regex, google-voice

我想`16197226146`使用 PHP 从以下字符串中提取：

```
"(480) 710-6186" <18583894531.16197226146.S7KH51hwhM@txt.voice.google.com> 
```

有人可以帮我解决正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:38:07.680

`<\d*?\.(\d+)`

```
<    Match "<"
\d   Match digits
   *    0 or more times
   ?    Lazy, take as little as possible
\.   Match a "."
(    Capture
   \d   Match digits
   +    1 or more times
)    Stop capturing 
```

这与 a 之后的第二个数字匹配`.`。比赛在第 1 组。

```
if (preg_match("/<\d*?\.(\d+)/", $subject, $regs)) {
    $result = $regs[1];
} else {
    $result = "";
} 
```

[你可以在这里玩正则表达式](http://regexr.com?316r7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-14T11:20:04.973

你可以使用爆炸。

```
$value = "(480) 710-6186"<18583894531.16197226146.S7KH51hwhM@txt.voice.google.com>";

$result  = explode('.', $value);
echo $result[1]; // is 16197226146 
```

# android - Android 应用无法通过网络进行通信

> ID：10941305
> 
> 赞同：2
> 
> 时间：2012-06-07T23:37:30.457
> 
> 标签：android, android-networking

我在一些客户的手机上遇到了一个奇怪的问题。看来，在服务区之外几个小时后，我的 Android 应用程序将失去访问网络的能力。网络浏览器或电子邮件等其他应用程序可以访问网络，但我的应用程序不能。

唯一可以想到的解释是，在没有数据服务的情况下，它以某种方式泄漏了套接字。

这是我的代码：

```
String sendWebPOST(String url, String pPostData) throws IOException {
    AndroidHttpClient c = null;
    InputStream is = null;
    OutputStream os = null;
    int rc;
    String strResponse = null;

    try {            
        c = AndroidHttpClient.newInstance("Mobile");

        // Set the request method and headers
        HttpPost request = new HttpPost(url);
        request.addHeader("Content-Type", "application/x-www-form-urlencoded");

        request.setEntity(new StringEntity(pPostData));

        try {
            HttpResponse response = c.execute(request);

            // Getting the response code will open the connection,
            // send the request, and read the HTTP response headers.
            // The headers are stored until requested.
            rc = response.getStatusLine().getStatusCode();
            if (rc != HttpStatus.SC_OK) {
                throw new IOException("HTTP response code: " + rc);
            }

            try {
                is = response.getEntity().getContent();

                int ch;
                StringBuffer sb = new StringBuffer();
                while ((ch = is.read()) != -1) {
                    sb.append((char) ch);
                }
                //if(sb.length() > 0)
                strResponse = sb.toString();
            }
            finally {
                if (is != null) {
                    is.close();
                }
            }
        }
        finally {
            if (os != null) {
                os.close();
            }
        }
    }
    catch (ClassCastException e) {
        throw new IllegalArgumentException("Not an HTTP URL");
    }
    finally {
        if (c != null) {
            c.close();
        }
    }

    return strResponse;
} 
```

此函数大约每十分钟调用一次，以向远程服务器发送更新。当应用程序进入这种奇怪的状态时，用户仍然能够打开活动、与菜单交互等，因此应用程序仍在运行。但是，它无法通过网络发送任何内容。

任何想法可能会发生什么？

有问题的手机是 myTouch 4G 和在 T-Mobile 网络上运行 Android 2.3 的三星 Galaxy II。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T22:49:15.227

出于某种原因，使用 HttpURLConnection 而不是 AndroidHttpClient 会更好。一旦我升级了我的代码，我就不再报告任何问题了。

```
 HttpURLConnection conn = null;
    InputStream is = null;
    OutputStream os = null;
    String strResponse = null;

    try {
        conn = (HttpURLConnection)(new URL(url)).openConnection();

        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "close");
        conn.setRequestProperty("content-type", "application/x-www-form-urlencoded");
        conn.setConnectTimeout(30000);
        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setChunkedStreamingMode(0);
        conn.connect();

        os = new BufferedOutputStream(conn.getOutputStream());

        os.write(pPostData.getBytes());
        os.flush();

        // Getting the response code will open the connection,
        // send the request, and read the HTTP response headers.
        // The headers are stored until requested.
        int rc = conn.getResponseCode();
        if (rc != HttpURLConnection.HTTP_OK) {
            throw new IOException("HTTP response code: " + rc);
        }

        is = new BufferedInputStream(conn.getInputStream());

        int ch;
        StringBuffer sb = new StringBuffer();
        while ((ch = is.read()) != -1) {
            sb.append((char) ch);
        }
        //if(sb.length() > 0)
        strResponse = sb.toString();
    }
    finally {

        if (is != null) {
            try {
                is.close();
            }
            catch (Exception ex) {
                System.out.println("is.close ex " + ex);
            }
        }
        if (os != null) {
            try {
                os.close();
            }
            catch (Exception ex) {
                System.out.println("os.close ex " + ex);
            }
        }

        if (conn != null) {
            try {
                conn.disconnect();
            }
            catch (Exception ex) {
                System.out.println("disconnect ex " + ex);
            }
        }
    } 
```

# c# - 用于提取此 HTML 文件的一部分的正则表达式

> ID：10941306
> 
> 赞同：1
> 
> 时间：2012-06-07T23:37:31.737
> 
> 标签：c#, html, regex

我有一个带有这个脚本的 html 页面：

```
flashembed("header_container", 
{"src": "http://****.swf?__cv=3cfd4cc0ac1fad53803ff73629e93d00",
"version": [8,0],
"expressInstall": "http://****.swf?__cv=87411ea96ce42429f52b28683e7af400",
"width": 860,"height": 229,"wmode": "opaque","id": "flashHeader",
"onFail": 
function(){onFailFlashembed();}}, 
{"cdn": "http://*****/","nosid": "1","lol": "89,04","isGuestUser": "",
"navPoint": "1","eventItemEnabled": "",
"supporturl":"indexInternal.es%3Faction%3Dsupport%26back%3DinternalStart",

"***ouser***": "817",

"serverdesc": "Italia 3","server_code": "1","lang": "it","coBrandImgUrl": "",
"coBrandHref": "","customSkinURL": "","messaging": "1"});

hackEmailInviteDialog();
jQuery('#emailInviteCloseButton').click(function() 
{
.....
} 
```

我需要从此页面中提取字段“用户”。我试过：

```
string pattern= @"""ouser"": "".*?,""serverdesc""";
string output = Regex.Replace(ConnectionAPI.responseFromServer, pattern, ""); 
```

但在输出中有整个页面......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:51:30.667

更新正则表达式以匹配第二对引号之间的任何内容，以防万一它们并不总是数字。

```
Match match = 
    Regex.Match(
        ConnectionAPI.responseFromServer, 
        "\"\\**?ouser\\**?":\\s*\"([^\"]*)\",",
        RegexOptions.IgnoreCase);
String output = String.Empty;
// Here we check the Match instance.
if (match.Success)
{
    // Finally, we get the Group value and display it.
    output = match.Groups[1].Value;
    Console.WriteLine(output);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T23:42:31.387

`"\**?ouser\**?":\s*"(\d\w+)`

第 1 组与该`817`文档中的 匹配。[在这里玩正则表达式](http://regexr.com?316rd)。

[虽然如果您对任意标签进行大量 HTML 解析，那么使用SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)或[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)解析器会做得更好。[Andrew Finnell](https://stackoverflow.com/users/553308/andrew-finnell)也提到了使用[JSON](http://www.json.org/)或[WebKit](http://www.webkit.org/)。

正如 merlin2011 提到的，`Regex.Replace`它将*取代*你试图拉出的东西，而不是为你抓住它。

# arrays - 检查一个值是否在数组中

> ID：10941309
> 
> 赞同：0
> 
> 时间：2012-06-07T23:37:40.677
> 
> 标签：arrays, forms, coldfusion, struct

我有一个带有此单选按钮的表单：

```
<ul>
     <li><input type="checkbox" name="repeat_period_week_day" value="1" /> Sunday</li>
     <li><input type="checkbox" name="repeat_period_week_day" value="2" /> Monday</li>
     <li><input type="checkbox" name="repeat_period_week_day" value="3" /> Tuesday</li>
     <li><input type="checkbox" name="repeat_period_week_day" value="4" /> Wednesday</li>
     <li><input type="checkbox" name="repeat_period_week_day" value="5" /> Thursday</li>
     <li><input type="checkbox" name="repeat_period_week_day" value="6" /> Friday</li>
     <li><input type="checkbox" name="repeat_period_week_day" value="7" /> Saturday</li>
</ul> 
```

在提交表单时，我想检查用户勾选了哪些收音机。是否可以在不循环的情况下进行验证？我的意思是 CFML 中是否有类似于`in_array()`找到的 PHP 的函数或类似的函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T23:50:50.030

默认情况下，所有选中的复选框的值将作为逗号分隔的列表提交。因此，如果检查了周日和周六并提交了表格，您最终会得到：

```
form.repeat_period_week_day= "1,7" 
```

如果你想知道星期六框是否被选中，你可以像这样使用[ListFind()](http://www.cfquickdocs.com/#ListFind)函数：

```
ListFind(form.repeat_period_week_day,7) 
```

# php - JS OnClick 事件将执行 php 代码块

> ID：10941312
> 
> 赞同：0
> 
> 时间：2012-06-07T23:37:58.023
> 
> 标签：php, javascript, sql

有没有办法当我点击一个按钮时会执行一堆 php 代码？

例如;

```
<input type="button" value="Submit Order" class="minibutton" **onClick="executePHP"**> 
```

这个按钮对象就在这里，如果我点击它，这个 php 代码将被执行。

```
 include("../includes/connect.php");
    include("../includes/generateTimestamp.php");
    include("../includes/knowthename.php");

    $pid=$_POST['submit_id'];
    $pname = $_POST['submit_name'];
    $total = $_POST['submit_total'];
    $quantity = $_POST['submit_qty'];
    $price = $_POST['submit_price'];
    $unit = $_POST['submit_unit'];
    $change = $_POST['submit_sukli'];
    $payment = $_POST['submit_payment'];
    $count = $_POST['count'];
    //explode
    $newpid = explode(";",$pid);
    $newpname = explode(";",$pname);
    $newquantity = explode(";",$quantity);
    $newprice = explode(";",$price);
    $newpriceunit = explode(";",$unit);

    $sql = mysql_query("INSERT INTO sales (sales_date, total_price, emp_id) VALUES ('$timestamp','$total', '$employee_id')");
    mysql_query($sql);
    $id_gen = mysql_insert_id();
    $count = $count - 1;
    while($count = -1){

            $product_id = $newpid[$count];
            $product_name = $newpname[$count];
            $product_quantity = $newquantity[$count];
            $product_price = $newprice[$count];

            $sql2("INSERT INTO sales_details (sales_id,product_id,sales_qty,unit_price,net_price) VALUES ('$id_gen','$newpid[$count]','$product_quantity[$count]',
            '$product_price[$count]','$newpriceunit[$count]')");
            mysql_query($sql2);         
        }
    header('Location: prompt.php?x=5');

    }else{
        echo 'Nothing here!';
        } 
```

我想让 onclick 函数作为一个断路器，如果我点击它，它将解开并继续执行那些代码，

如果我无法做到这一点，还有其他方法吗？

函数 isset 将不起作用，因为数据将丢失（数组），因为原始数据来自 $_POST。我希望是 onclick 事件，但我不知道如何。

请各位电脑高手赐教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:44:28.910

您只能将 JavaScript 附加到浏览器事件。如果要执行 PHP 等服务器端代码，则需要调用服务器。在您的情况下，忘记 javascript，只需将您的表单发布到您的 PHP 页面。

```
<form method="post" action="file.php">

  <!-- form inputs -->

  <input type="button" value="Submit Order" class="minibutton" />

</form> 
```

然后把你的代码放进去`file.php`

**编辑**

将所有帖子数据放在隐藏的表单字段中。然后当您单击该按钮时，它将重新提交帖子数据。

```
foreach($_POST as $key => $val) {
    echo '<input type="hidden" name="'.htmlspecialchars($key).'" value="'.htmlspecialchars($val).'" />'."\n";
} 
```

如果您有一个多维帖子数组，只需`serialize()`将其粘贴在 1 个字段中

```
echo '<input type="hidden" name="data" value="'.htmlspecialchars(serialize($_POST)).'" />'."\n"; 
```

然后`unserialize()`它在另一边。

```
$_POST = unserialize($_POST['data']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:41:52.843

使用 jQuery：

```
$('.minibutton').on('click', function(e) {
    // do some ajax stuff here 
}); 
```

示例：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:43:22.250

如果您的 .php 需要来自被点击元素的值，那么**您不需要。** 如果您的代码本身只是一堆 php，与客户端请求无关，您可以在**js 函数**中回显它并在点击时调用它。

# symfony - Symfony2/Doctrine2.1：使用简单派生身份保持 OneToOne 关系

> ID：10941315
> 
> 赞同：1
> 
> 时间：2012-06-07T23:38:32.513
> 
> 标签：symfony, doctrine-orm

我正在尝试通过单个表单提交将用户实体与配置文件实体保持一致。按照[Doctrine2 文档](http://docs.doctrine-project.org/en/latest/tutorials/composite-primary-keys.html#use-case-2-simple-derived-identity)中的说明并添加其他属性后，这似乎足以实现目标。

## 实体

按照规定设置实体非常简单，结果如下（我省略了生成的 getter/setter）：

```
// ...

/**
 * @ORM\Entity
 */
class User
{
  /**
   * @ORM\Id
   * @ORM\Column(type="integer")
   * @ORM\GeneratedValue
   */
  private $id;

  /**
   * @ORM\Column(type="string", length=64)
   */
  private $data;

  /**
   * @ORM\OneToOne(targetEntity="Profile", mappedBy="user", cascade={"persist", "remove"})
   */
  private $Profile;

  // ...
}

// ...

/**
 * @ORM\Entity
 */
class Profile
{
  /**
   * @ORM\Id
   * @ORM\OneToOne(targetEntity="User")
   */
  private $user;

  /**
   * @ORM\Column(type="string", length=64)
   */
  private $data;

  // ...
} 
```

## 形式

现在修改表格也不太难：

```
// ...

class ProfileType extends AbstractType
{
  public function buildForm(FormBuilder $builder, array $options)
  {
      $builder
          ->add('data')
      ;
  }

  public function getName()
  {
      return 'profile';
  }

  public function getDefaultOptions(array $options)
  {
      return array('data_class' => 'Acme\TestBundle\Entity\Profile');
  }
}

// ...

class TestUserType extends AbstractType
{
  public function buildForm(FormBuilder $builder, array $options)
  {
      $builder
          ->add('data')
          ->add('Profile', new ProfileType())
      ;
  }

  public function getName()
  {
      return 'user';
  }
} 
```

## 控制器

```
class UserController extends Controller
{
  // ...

  public function newAction()
  {
      $entity = new User();
      $form   = $this->createForm(new UserType(), $entity);

      return array(
          'entity' => $entity,
          'form'   => $form->createView()
      );
  }

  public function createAction()
  {
      $entity  = new User();
      $request = $this->getRequest();
      $form    = $this->createForm(new UserType(), $entity);
      $form->bindRequest($request);

      if ($form->isValid()) {
          $em = $this->getDoctrine()->getEntityManager();
          $em->persist($entity);
          $em->flush();

          return $this->redirect($this->generateUrl('user_show',
              array('id' => $entity->getId())));

      }

      return array(
          'entity' => $entity,
          'form'   => $form->createView()
      );
    }

    // ...
} 
```

但现在是进行测试的部分。我开始创建一个新的用户对象，嵌入的表单按预期显示，但点击提交返回：

## 例外

> Acme\TestBundle\Entity\Profile 类型的实体缺少分配的 ID。此实体的标识符生成策略要求在调用 EntityManager#persist() 之前填充 ID 字段。如果您想要自动生成标识符，则需要相应地调整元数据映射。

我已经知道的一个可能的解决方案是为 Profile 实体上的独立主键添加一个附加列。

但是我想知道是否有一种方法可以使映射保持大致相同但处理保留嵌入式表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T03:46:10.887

在通过 IRC 与几个人讨论了一段时间后，我修改了映射并提出了这个：

## 实体

```
// ...

/**
 * @ORM\Entity
 */
class User
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=64)
     */
    private $data;

    /**
     * @ORM\OneToOne(targetEntity="Profile", cascade={"persist", "remove"})
     */
    private $Profile;

    // ...
}

// ...

/**
 * @ORM\Entity
 */
class Profile
{
    /**
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     * @ORM\Column(type="integer")
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=64)
     */
    private $data;

    // ...

} 
```

那么这有什么变化呢？首先，我删除了关系的 mappedBy 和 inversedBy 选项。此外，不需要 Profile-entity 上的 OneToOne 注释。

用户和个人资料之间的关系可以是双向的，但是以用户为拥有方的单向关系足以控制数据。由于级联选项，您可以确保没有没有用户的剩余配置文件，并且用户可以维护配置文件但不必这样做。

如果您想使用双向关系，我建议您查看[Github：Doctrine2 - Tests - DDC117](https://github.com/doctrine/doctrine2/tree/7b758493a34150a8b68e0468db0d5abfe4b6e725/tests/Doctrine/Tests/ORM/Functional/Ticket)并特别注意 Article 和 ArticleDetails 的 OneToOne 关系。但是，您需要注意，从测试文件（评论中提供的链接）可以看出，保存这种双向关系有点棘手：您需要首先保留文章并在[ArticleDetails::__construct](https://github.com/doctrine/doctrine2/blob/9445502885d69dd6133064dec9a799b8adb93d96/tests/Doctrine/Tests/Models/DDC117/DDC117ArticleDetails.php#L22)中相应地设置构造函数涵盖关系的双向性质。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:45:28.523

我所看到的问题是您只是在创建/保存一个用户对象。

由于用户/个人资料是一对一的关系（用户是拥有方）是否可以安全地假设用户将始终具有个人资料关系，因此可以在用户构造中初始化

```
class User 
{
    public function __construct()
    {
        $this->profile = new Profile();
    }
} 
```

毕竟，您已将 User 设置为级联相关 Profile 对象的持久性。这将使您的实体经理创建两个实体并建立关系。

# android - Android中的倒置ListView？

> ID：10941317
> 
> 赞同：8
> 
> 时间：2012-06-07T23:38:40.910
> 
> 标签：android, android-widget, android-listview, android-cursor

有没有一种简单的方法可以以相反的顺序显示 ListView？我正在尝试创建一个基于对话的应用程序，并且希望最近的条目位于 ListView 的底部。我知道 transcriptMode 和 stackFromBottom，但是我的问题是数据的顺序。

假设我有 100 个对话项目，并且想要显示项目 80-100，其中 100 是最近的对话项目。我想显示 80-100，这意味着我的查询中有一个 ORDER BY id desc LIMIT 20，它强制将项目排序为 100 到 80，这与我需要的相反。我目前有一些讨厌的内部查询代码，但感觉应该有一个基于反转光标或简单反转 ListView 的更简单的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T23:44:08.507

在里面**`baseAdapter`**，对于**`getView()`**方法，不是获取数据中索引“位置”中的项目，而是使用相反的含义：numberOfItems 减去位置。

至于显示项目的数量，这也在 baseAdapter 内部：将返回的值设置为`getCount()`您希望的值（在您的示例中为 20，尽管 80-100 意味着它应该是 21）。

顺便说一句，在 listView 的情况下，您似乎是首发。我可以建议观看此视频： [http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

还要检查 sdk manager 提供的 api-demos。他们有很多例子。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-21T14:45:12.127

在您的适配器中使用此**getItem**方法进行**反向排序：**

```
@Override
public Object getItem(int position) {
   return super.getItem(super.getCount() - position - 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T06:23:14.427

从数据库中提取数据时，此代码对我有用。

```
cs.moveToPosition(super.getCount() - position - 1); //cs is Cursor 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T00:40:08.197

使用 BETWEEN 关键字查询记录对我来说似乎是最简单的解决方案。

# mysql - 是否可以让这个推荐器 SQL 查询更快？

> ID：10941320
> 
> 赞同：3
> 
> 时间：2012-06-07T23:38:57.680
> 
> 标签：mysql, optimization

我有 2 张桌子，其中一张存放物品，另一张存放喜欢的物品。

存储喜欢的表称为 video_liked，有 2 列，video_id 和 user_id，有 2 个索引 - video_id-user_id (UNIQUE) 和 user_id-video_id (PRIMARY)。

另一个表称为视频，具有主索引和自动递增列 ID。

我正在尝试获取喜欢观众正在观看的用户的相同用户喜欢的项目列表，按喜欢它们的人数排序，至少有 2 个喜欢。

我正在使用的查询是

```
SELECT vid . * , count( video_liked1.user_id ) AS PersonCount
FROM video AS vid, video_liked, video_liked AS video_liked1
WHERE video_liked.user_id = video_liked1.user_id
AND video_liked.video_id <> video_liked1.video_id
AND video_liked1.video_id = 'ITEM_ID'
AND vid.id = video_liked.video_id
GROUP BY video_liked.video_id
HAVING count( video_liked1.user_id ) >2
ORDER BY PersonCount DESC
LIMIT 12 
```

点赞多的时候查询比较慢，所以我把它简化为最基本的结构

```
SELECT vid. *
FROM video AS vid, video_liked, video_liked AS video_liked1
WHERE video_liked.user_id = video_liked1.user_id
AND video_liked.video_id <> video_liked1.video_id
AND video_liked1.video_id = 'ITEM_ID'
AND vid.id = video_liked.video_id
GROUP BY video_liked.video_id
LIMIT 12 
```

它有点快，但在 28k 行的 likes 表上执行仍需要 0.05 秒

EXPLAIN 给我的输出太宽而无法在没有自动换行的情况下放在这里，所以这里有一个指向 pastebin 的链接

[http://pastebin.com/raw.php?i=6edwdniQ](http://pastebin.com/raw.php?i=6edwdniQ)

这也是我在 pastebin 中的表

[http://pastebin.com/raw.php?i=jwK1QucA](http://pastebin.com/raw.php?i=jwK1QucA)

编辑：

按照建议更改了查询

```
SELECT vid . *, count( v1.user_id ) AS PersonCount
FROM video AS vid
JOIN video_liked AS v1 ON vid.id = v1.video_id
JOIN video_liked AS v2 ON v2.video_id = 'ITEM_ID'
AND v1.user_id = v2.user_id
AND v1.video_id <> v2.video_id
GROUP BY v1.video_id
ORDER BY PersonCount DESC
LIMIT 12 
```

缓慢的罪魁祸首似乎是使用 GROUP BY，它会创建临时表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:37:31.477

除了删除交叉连接之外，我还会在 SELECT 子句中明确定义您需要的列，即使您需要所有列。

这个数据库在什么平台上？视频表上还有哪些其他索引？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:27:39.777

从查询中删除`CROSS JOIN`s。那些膨胀你的数据集。

```
SELECT vid. *
FROM video AS vid
JOIN video_liked  AS v1 ON vid.video_id = v1.video_id
JOIN video_liked AS v2 ON v2.video_id = 'ITEM_ID' AND v1.user_id=v2.user_id AND v1.video_id <> v2.video_id
GROUP BY video_liked.video_id
LIMIT 12 
```

# windows - 在 Windows 中创建与 kinit 一起使用的密钥表

> ID：10941325
> 
> 赞同：6
> 
> 时间：2012-06-07T23:39:36.120
> 
> 标签：windows, authentication, kerberos, keytab, ktpass

我正在编写一个 pGina 插件以在登录时从我们的 KDC 获取 AFS 令牌和 Kerberos TGT，同时我注意到 kinit 的一个“功能”是它不会让你提供任何输入，除非它来自键盘，我的想法是只是重定向标准输入......

有人建议为主体使用 keytab 文件，这似乎超级简单，直到我意识到我只在 linux 上使用了 kutil，并且在使用 ktpass.exe 的 Windows 版本时遇到了困难。我已经反复尝试使用大量参数组合来创建密钥表，但到目前为止绝对没有成功，我发出的当前命令是：

`ktpass /out key.tab /mapuser user$@MERP.EDU /princ user.merp.edu@MERP.EDU /crypto RC4-HMAC-NT /ptype KRB5_NT_PRINCIPAL /pass mahpasswordlol /target MERP.EDU`

不幸的是，所有这些输出都是

`Using legacy password setting method`

`FAIL: ldap_bind_s failed: 0x31`

根据我的研究，这是一个身份验证/加密问题，我已经尝试过使用其他 DES 设置，但这似乎也不起作用......有人对这可能如何工作有任何经验/想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T02:45:34.537

ktpass.exe 确实很糟糕；我不使用它。相反，只需在 Unix 上使用 ktutil 使用密码独立创建匹配的密钥表，例如：

```
$ ktutil
ktutil:  addent -password -p foo@BAR -k 1 -e aes128-cts-hmac-sha1-96
Password for foo@BAR:
ktutil:  l
slot KVNO Principal
---- ---- ---------------------------------------------------------------------
   1    1                                  foo@BAR
ktutil:  wkt /tmp/zz
$ klist -ek /tmp/zz
Keytab name: WRFILE:/tmp/zz
KVNO Principal
---- --------------------------------------------------------------------------
   1 foo@BAR (aes128-cts-hmac-sha1-96) 
```

LDAP 绑定错误表明 ktpass 无法向域控制器验证您的身份；发生这种情况时，您是否登录了域帐户？它必须是域帐户，而不是本地帐户（并且它必须被授权才能对 AD 进行必要的更改，尽管缺少这会导致权限错误而不是绑定）。

FWIW，我们对此采取了不同的方法：我们在 Unix 和 AD 领域之间使用跨领域信任。用户在登录时获得的 AD TGT 也足以获取 Unix 领域中服务的凭据；例如，我可以使用 PuTTY 通过 SSH 连接到 Unix 主机，使用 Firefox/Chrome/IE 对 Unix Web 服务 (Apache/mod_auth_kerb) 进行身份验证等。

# javascript - Tumblr 将照片集帖子显示为幻灯片

> ID：10941326
> 
> 赞同：1
> 
> 时间：2012-06-07T23:39:41.737
> 
> 标签：javascript, jquery, tumblr

我正在研究一个大约一个小时前开始的新博客主题，遗憾的是我已经遇到了障碍。主题是广泛的，这意味着它比 tumblr 的默认照片、照片集和视频大小更宽。我已经征服了照片尺寸（不是那么难！）和视频尺寸（谢天谢地，几个月来我一直在尝试调整视频大小！）但我被困在照片集上。我发现插件“照片集杀手”非常有用，但它并不能完全完成这项工作。我想使用一个脚本来杀死照片集的布局（一个接一个地显示图像），将所有图像的大小调整为恰好 728 像素，即使它们被拉伸，然后在幻灯片中显示它们. 我知道这听起来很复杂，但你真的不会想到它。我不 根本不需要花哨的幻灯片放映，只需 728 倍于照片集中最高照片的高度，侧面有箭头可以在照片之间导航。任何帮助都将不胜感激，我正在做的网站是[http://jamestestblog.tumblr.com/](http://jamestestblog.tumblr.com/)

编辑：我以前见过这样做，这是可能的，我只是不记得在哪里。它可能是像素联合主题。我真的需要帮助，伙计们..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:34:28.203

In [tumblr documentation for photosets](http://www.tumblr.com/docs/en/custom_themes#photoset-posts) `{block:Photos} {/block:Photos}` block exists, which will be executed so many times, as how many images are in the photoset. Try to output each image in photoset with this block.
Images will be not in an iframe and full under your `CSS` control, with this trick.

# web - 移动和桌面网站

> ID：10941328
> 
> 赞同：0
> 
> 时间：2012-06-07T23:40:00.223
> 
> 标签：web, mobile-website

我将建立一个网站，其中包含一系列问题，向用户提出问题，下一个问题取决于使用 JSP 的上一个答案，我的问题是我希望用户在计算机和移动设备上访问该网站，请任何人都可以帮助我如何构建可以在计算机和移动设备上打开而不改变外观的网站。

非常感谢您的任何回答，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:43:01.423

无论您使用哪种服务器端脚本语言，您都可以考虑使用[HTML5 Boilerplate](http://html5boilerplate.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:45:26.743

有许多库（或手动检查用户代理）来检测用户是否使用移动浏览器，这将告诉您的脚本使用哪种布局，移动或桌面。

有一些框架设计用于创建移动网站，其中两个值得注意的是[jQuery Mobile](http://jquerymobile.com/)和[Sencha Touch](http://www.sencha.com/products/touch)。

Sencha touch 在我看来更复杂，但它的 UI 更流畅，而 jQuery Mobile 就像是优秀的 jQuery，但仍处于 beta 阶段，并且存在一些 UI 错误。

# clojure - Clojure 中的 Class/forName 不尊重 ContextClassLoader？

> ID：10941330
> 
> 赞同：6
> 
> 时间：2012-06-07T23:40:18.753
> 
> 标签：clojure, classloader

我被 REPLed 到一个正在运行的服务中，并且有一个指向一个类加载器的 var 加载了一个插件（`my.package`安装了）。

REPL 使用的 DynamicClassLoader 不包括我希望与之交互的插件；尽管有这个限制，我希望能够使用从插件加载的类。

以下作品：

```
=> (.loadClass plugin-classloader "my.package.MyClass")
my.package.MyClass 
```

...而以下没有（明确覆盖线程上下文类加载器）：

```
=> (do
     (.setContextClassLoader (Thread/currentThread) plugin-classloader)
     (Class/forName "my.package.MyClass"))
ClassNotFoundException my.package.MyClass  java.net.URLClassLoader$1.run (URLClassLoader.java:202) 
```

...这也不是（显式覆盖线程上下文类加载器*和*clojure.lang.Compiler/LOADER 参考）：

```
=> (let [dcl (clojure.lang.DynamicClassLoader. plugin-classloader)]
     (.setContextClassLoader (Thread/currentThread) dcl)
     (with-bindings* {clojure.lang.Compiler/LOADER dcl}
       (eval '(pr-str (Class/forName "my.package.MyClass")))))
ClassNotFoundException my.package.MyClass  java.net.URLClassLoader$1.run (URLClassLoader.java:202) 
```

...这也不是：

```
=> my.package.MyClass
CompilerException java.lang.ClassNotFoundException: my.package.MyClass, compiling:(NO_SOURCE_PATH:0) 
```

设置时不应该`Class.forName()`使用线程上下文类加载器吗？我正在尝试调用 3rd-party 代码来做自省魔法；即使应该设置线程上下文类加载器，有问题的工具也会因 ClassNotFoundExceptions 而失败。

* * *

在我明确设置上下文类加载器的情况下，堆栈跟踪表明正在使用 Clojure 的 DynamicClassLoader（而不是 plugin-classloader var 中的 BundleClassLoader）：

```
=> (e)
java.lang.ClassNotFoundException: my.package.MyClass
 at java.net.URLClassLoader$1.run (URLClassLoader.java:202)
    java.security.AccessController.doPrivileged (AccessController.java:-2)
    java.net.URLClassLoader.findClass (URLClassLoader.java:190)
    clojure.lang.DynamicClassLoader.findClass (DynamicClassLoader.java:61)
    java.lang.ClassLoader.loadClass (ClassLoader.java:306)
    java.lang.ClassLoader.loadClass (ClassLoader.java:247)
    java.lang.Class.forName0 (Class.java:-2)
    java.lang.Class.forName (Class.java:169) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T19:45:50.083

`clojure.lang.Compiler/eval`，正如 REPL 所调用的，使用`clojure.lang.Compiler/LOADER`，而不是线程本地类加载器。一个适当的类加载器需要在被调用之前绑定到这个变量`eval`——所以添加一层包装可以解决这个问题：

```
=> (let [dcl (clojure.lang.DynamicClassLoader. plugin-classloader)]
     (with-bindings {clojure.lang.Compiler/LOADER dcl}
       (eval '(Class/forName "my.package.MyClass"))))
my.package.MyClass 
```

# c# - 为什么注册表写在与预期不同的位置？

> ID：10941338
> 
> 赞同：11
> 
> 时间：2012-06-07T23:41:14.430
> 
> 标签：c#, registry, regedit, access-rights, registry-virtualization

我尝试将注册表子项及其对应的值写入注册表，如下所示：

```
const string subKey = @"SOFTWARE\Apple\Banana\";
const string regKey = "pip";

var rk = Registry.LocalMachine.OpenSubKey(subKey);
if (rk == null)
    rk = Registry.LocalMachine.CreateSubKey(subKey);

var rv = rk.GetValue(regKey);
if (rv == null)
    rk.SetValue(regKey, "XXX");

return rv.ToString(); 
```

现在的问题是，当我手动（通过 regedit）查看该位置时，我看不到`SOFTWARE\Apple\Banana`.`HKLM`

但是当我再次运行上面的代码并调试时，我可以看到两者`Registry.LocalMachine.OpenSubKey(subKey)`并`rk.GetValue(regKey)`产生之前保存的值。但是我没有通过 regedit 看到给定位置的值。所以在搜索注册表时，我可以在以下位置看到上述键和值：

1.  `HKEY_CURRENT_USER\Software\Classes\VirtualStore\MACHINE\SOFTWARE\Apple\Banana`

2.  `HKEY_USERS\S-1-5-21-44266131-1313801407-2392705078-1000\Software\Classes\VirtualStore\MACHINE\SOFTWARE\Apple\Banana`

在这两种情况下，值都与我保存的完全相同。所以我意识到这是我的应用程序读取值的地方，尽管在我的代码中我从`HKLM\SOFTWARE\Apple\Banana\`..

1.  为什么会这样？它与访问权限问题有关吗？

2.  这是预期的行为吗？从某种意义上说，这个值对我来说非常重要，所以我只是知道自动重定位是否存在一些风险！

3.  是否有正确的写入注册表的方法，以便它保留在其确切位置..

我的帐户是管理员一号，我使用的是 32 位 windows 7。

编辑：据我所知，注册表项存储在当前用户位置而不是 HKLM。当我从其他帐户查询 reg 值时，我没有得到该值。简而言之，首先将其保存到 HKLM 是没有意义的 :(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T23:44:33.187

是的，这是正确的行为，它正在发生，因为您没有足够的权限直接写入 HKLM 配置单元。它被称为虚拟化，也发生在文件系统中，自 Vista 以来它一直是操作系统中的一种行为。

您应该继续原样并尝试从您正在写入的同一个 HKLM 密钥中读取，Windows 将透明地为您重定向。

Preet[提供](https://stackoverflow.com/a/10941366/109702)了一个 MSDN 链接，您应该仔细阅读。

Note that when you access a key under HKLM you should also include the permissions you want, even if you are running as administrator (because the key is not automatically opened with admin rights, you have to request it):

```
key = key.OpenSubKey(keyname, RegistryKeyPermissionCheck.ReadWriteSubTree, RegistryRights.FullControl); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T23:44:29.050

1.  [这是注册表虚拟化 (msdn)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)

    > 注册表虚拟化是一种应用程序兼容性技术，可以将具有全球影响的注册表写入操作重定向到每个用户的位置。这种重定向对于从注册表读取或写入注册表的应用程序是透明的。从 Windows Vista 开始支持它。
    > 
    > **虚拟化概述**
    > 
    > 在 Windows Vista 之前，应用程序通常由管理员运行。因此，应用程序可以自由访问系统文件和注册表项。如果这些应用程序由标准用户运行，它们将由于访问权限不足而失败。Windows Vista 和更高版本的 Windows 通过自动重定向这些操作来提高这些应用程序的应用程序兼容性。例如，对全局存储 (HKEY_LOCAL_MACHINE\Software) 的注册表操作被重定向到用户配置文件中称为虚拟存储 (HKEY_USERS\_Classes\VirtualStore\Machine\Software) 的每个用户位置。

2.  是的，这正是它应该的样子。

3.  如果您想写入影响全局的位置，则可以使用虚拟化，或者如果您不想要它，请使用更多本地化的位置。无论哪种方式，它对读者都是不可见的，所以不用担心。

# c - 引用 C 中的寄存器

> ID：10941348
> 
> 赞同：-4
> 
> 时间：2012-06-07T23:42:07.337
> 
> 标签：c, linux, pointers

这是从 Linux x86 系统上的某人的角度来看的。是否可以在指针中存储硬编码地址以外的内容？不过这里有一个问题：要存储在指针中的值以前会存储为字符串。很确定我无法引用任何寄存器或其他指针，但我只是想确定一下。我知道人们会问我为什么要做这样的事情；解释起来需要很长时间，我绝对确定没有替代解决方案。

灵魂添加了这个：

```
 char* addresses = "\x32\x45\x19..." 
```

我想在“地址”中存储硬编码地址以外的东西。

编辑：

大声笑哇，我以为我很清楚。我有一个字符数组，一个指针，或者我称之为：一个字符串。这个字符串将在 PHP 中被视为 ZVAL 结构。我想知道是否可以在字符串中存储硬编码地址以外的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:55:27.273

如果地址存储为字符串，您可以将字符串转换为地址（可能通过`uintptr_t`在`<stdint.h>`或中定义`<inttypes.h>`）。您获取字符串中的字节并移位并屏蔽它们以产生与地址等效的整数值，然后将地址分配给指针。

```
char *addresses = "\x32...";
char *string = addresses;
uintptr_t value = 0;
for (i = 0; i < sizeof(value); i++)
    value = (value << 8) | (*addresses++ & 0xFF);  // Sign extension avoided
void *memory_location = (void *)value; 
```

我假设字符串中的第一个字节是地址的 MSB；如果（假设您使用的是 Intel）这是错误的（首先存储 LSB），则您必须调整循环以反转顺序——这是臭名昭著的“读者练习”观察之一。

或者你玩得又快又松，让筹码发挥作用。在 RISC 平台（非英特尔）上，这通常会导致 SIGBUS 错误；不过，有时您可能会很幸运。

```
char *addresses = "\x32...";
void *memory_location = (void *)(*(uintptr_t *)addresses); 
```

这告诉代码将其`char *`视为 a `uintptr_t *`，取消引用它（一次读取整个字符串，除非地址未正确对齐，否则它将是两次提取，中间可能带有内核陷阱），然后分配值到内存位置。

如果您的代码有任何可移植性，请确保它位于“不可移植代码”部分。

这是所提出问题的技术解决方案（据我了解）；不建议您使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:06:26.640

你说“哇，我以为我很清楚。我有一个字符数组，一个指针，或者我称之为：一个字符串。这个字符串将在 PHP 中被视为 ZVAL 结构。我想知道我是否可以在字符串中存储硬编码地址以外的信息。”

不是你这样做的方式。

```
 char * addresses = "\x32\x45\x19..." ;
 addresses is set to point to something you should not change. 
```

你需要为这些东西分配存储空间。

例如

```
 char stuff [256] ;
 char * addresses = stuff;
 memcpy(stuff,"\x32\x45\x19...",sizeof("\x32\x45\x19...")); 
```

# objective-c - 保护 UIWebView 中的 URL

> ID：10941354
> 
> 赞同：0
> 
> 时间：2012-06-07T23:42:51.720
> 
> 标签：objective-c, uiwebview

我正在将 URL 加载到我的应用程序的 UIWebView 中。作为一个公共 URL，任何人都可以在任何浏览器中加载它。

我想知道如何最好地限制对该 URL 的访问，以便它只能在我的应用程序的 UIWebView 中查看，而不能在任何其他浏览器中查看？

有任何想法吗？

G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:47:54.797

这在实践中是不可能的。您可以使用凭据（例如用户名和密码）对用户进行身份验证。您无法有效地验证应用程序。为了对应用程序进行身份验证，您必须为其提供一个凭证，您必须将其放入应用程序中。如果凭证在应用程序中，那么任何有权访问该应用程序的人都可以将其取出。

您需要重新设计您的服务器，以免受到不受控制的流量的影响。你无法控制来到你身边的流量。您可以验证来找您的人。如果你专注于验证这个人，那么你就可以成功。

# javascript - 是否可以在一行代码中定义和初始化 JavaScript 中的多维数组？

> ID：10941360
> 
> 赞同：0
> 
> 时间：2012-06-07T23:43:27.383
> 
> 标签：javascript

抱歉，如果这太基本了，但我正在努力在 JavaScript 中定义 4 维数组（大小为 6x6x6x6）并将其初始化为全 1。最简单的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:58:41.513

您可以使用文字语法，但它会非常庞大​​且繁琐。您可能想尝试这样的事情：

```
var x = [1, 1, 1, 1, 1, 1];
for (var i = 1; i < 4; i++) {
    x = [x, x, x, x, x, x];
} 
```

我找到了一个稍微简单的解决方案：

```
var x = 1;
for (var i = 0; i < 4; i++) {
    x = [x, x, x, x, x, x];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:00:08.690

Seems like there should be easier way, but this will do it.

```
var array = [];

for(var i=0; i<6; i++) {
    for(var j=0; j<6; j++) {
        for(var k=0; k<6; k++) {
            for(var l=0; l<6; l++) {
                array[i][j][k][l]=1;
            }
        }
    }
} 
```

**Edit**

To generate an n-dimensional AxBxCxDx... array (untested):

```
Array.prototype.fill = function(elem, n) {
    for(var i=0; i<n; i++, this.push(elem));
}

function generateArray() {
    var dimensions = Array.prototype.slice.call(arguments);

    var x = 1;
    for (var i = dimensions.length-1; i >= 0; i--) {
        x = [].fill(x, dimensions[i]);
    }
    return x;
} 
```

to generate a 2x3x4x5 matrix:

```
generateArray(2,3,4,5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T16:22:45.963

我实现了 ddlshack 的通用方法，但由于数组在 JavaScript 中是“通过引用传递”这一事实而遇到了一个问题。这导致数组的每个维度都持有对同一个数组的多个引用，而不是它的副本。为了纠正这个问题，我实现了如下解决方案（唯一的区别是我使用了第二个函数而不是修改 Array 的原型）。

```
var fillArray = function(val, dim) {
    var a = [];
    for (var i = 0; i < dim; i++) {
        if (Object.prototype.toString.call(val) === "[object Array]") {
            val = val.slice(0);
        }

        a.push(val);
    }

        return a;
};

var generateArray = function() {
    var dimensions = Array.prototype.slice.call(arguments),
        val = 0;

    for (var i = (dimensions.length - 1); i >= 0; i--) {
        val = fillArray(val, dimensions[i]);
    }

    return val;
}; 
```

# java - 创建服务器端壁纸应用程序

> ID：10941362
> 
> 赞同：0
> 
> 时间：2012-06-07T23:43:58.907
> 
> 标签：java, android, android-activity, wallpaper

我是 android 新手，我有兴趣创建一个应用程序，我可以在其中将图片放在服务器上，然后从应用程序本身调用它们，我已经查看并查找了这方面的文档，但没有运气。我希望有人能指出我正确的方向。我见过使用闪烁作为图片的著名应用程序。有谁知道对我有帮助的任何文件？

```
<

WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

到目前为止，网络视图是我发现的唯一类似的东西，但老实说，我认为我的方向不正确，任何帮助都会非常感激，我希望放置至少 5000 张图片，而不仅仅是一张谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:22:44.623

基本上你需要保存图像并使用[WallpaperManager](http://developer.android.com/reference/android/app/WallpaperManager.html)。有关信息，请参阅以下链接。

[android - 从网络服务器保存图像并将其设置为壁纸](https://stackoverflow.com/questions/2098548/android-save-image-from-web-server-and-set-it-as-wallpaper)

# javascript - setInterval 在 IE 8 中以每秒 50 次的速度运行缓慢

> ID：10941364
> 
> 赞同：0
> 
> 时间：2012-06-07T23:44:13.853
> 
> 标签：javascript, internet-explorer

所以目前我有一个弹跳物体的动画，它每秒播放 20 次

```
 1000/50 = 20 times a second 
```

代码如下，可以假设所有变量都已正确初始化

```
 var animation = setInterval(function () {
            currentFrame++;
            if (speedX <= 0.0) {
                clearInterval(animation);
            }
            speedX -= 0.03;
            speedY = (speedY + Math.sqrt((2 * currentFrame) / gravityPull));
            yPosition += speedY;

            if (yPosition > groundY) {
                speedY *= -1;
                yPosition = groundY;
            }
            xPosition += speedX;
            $("#box").offset({ top: yPosition, left: xPosition });

        }, 50); 
```

这在 IE 中创造了非常低的性能，尽管 Chrome 似乎完全可以运行此代码。事实上，它太糟糕了，它会减慢计算机的大部分速度。

这里有什么问题吗？看起来计算相当简单......帧速率不是很高，每秒 20 帧并不极端，但对于不那么波折的动画来说仍然足够流畅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:12:16.493

新发现：Internet Explorer 很烂。

好吧，至少 IE8 和更早版本。IE9 表现不错。

`setTimeout`由and触发的定时函数的问题`setInterval`在于，浏览器会在时间到期时*尝试*执行函数，但这实际上只有在它空闲时才会发生。而且由于 Internet Eplorer <9 非常慢，而且总是“迟到”某些东西，你可以理解为什么那个动画不好。

问题是每次执行一个“帧”，IE8 需要超过 50 毫秒才能完成所有由计算和 DOM 变化引起的任务。

# javascript - 搜索数字的字符串

> ID：10941370
> 
> 赞同：5
> 
> 时间：2012-06-07T23:45:17.320
> 
> 标签：javascript, math, nlp, string-parsing, square-root

我有一个 javascript 聊天机器人，人们可以在输入框中输入他们喜欢的任何问题，并希望得到准确的答案。我可以这样做，但我知道我做错了，因为我不知道数字将出现在句子中的哪个位置。如果一个人准确地输入：

5 的平方根是多少，这很好用。

如果他输入这样的东西，它不会。

5的平方根是多少

5的平方根是什么

你知道5的平方根是多少吗

ETC

我需要能够确定数字出现在句子中的位置，然后从那里进行计算。请注意，下面的行是更大的工作聊天机器人的一部分。在下面的行中，我只是想能够回答任何平方根问题，而不管数字出现在句子中的什么位置。我也知道开放式输入框有很多陷阱，人们可以在其中输入任何内容，例如拼写错误等。这只是为了娱乐而不是一个严肃的科学项目。:)

```
if(
    (word[0]=="what's") &&
    (word[1]=="the") &&
    (word[2]=="square") &&
    (word[3]=="root") &&
    (word [4]=="of") &&
    (input.search(/\d{1,10}/)!=-1) &&
    (num_of_words==6)
){        
    var root= word[5];
    if(root<0){ 
        document.result.result.value = "The square root of a negative number is not possible.";
    }else{
         word[5] = Math.sqrt(root);
         word[5] = Math.round(word[5]*100)/100 
         document.result.result.value = "The square root of "+ root +" is "+ word[5] +"."; 
    }
    return true;
} 
```

为了清楚起见，机器人是出于某种原因使用“If 语句”编写的。如果在这种情况下的输入不包括单词“what”和“square root”以及“some number”，则该行不会触发并由机器人进一步回答为通用“我不知道类型回复”。所以我希望任何答案都适合我使用的格式。客气点，我是新来的。我喜欢制作机器人，但我不是一个程序员。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:52:59.630

您可以使用正则表达式来执行此操作。

```
"What is the sqrt of 5?".match(/\d+/g);
["5"] 
```

输出是一个数组，其中包含在字符串中找到的所有数字。如果您有多个，例如“100 的平方根是 10 吗？” 那么它将是

```
"Is the square root of 100 10?".match(/\d+/g);
["100", "10"] 
```

因此您可以选择要在脚本中使用的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:28:42.267

您将需要使用正则表达式，如果您不知道它们是什么，则应该查找它们，因为在此响应中解释它们需要很长时间。这是一个有用的 JavaScript 正则表达式网站[https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。

假设您知道正则表达式，您应该首先搜索数字并存储您找到的所有数字，如果没有找到数字，则打印出错误消息。作为补充说明，您可能会考虑搜索数学常数，例如 pi 或 e。这应该工作

```
nums = someString./\d+|pi|e/gi 
```

下一部分将很难，但归结为核心概念，您需要寻找诸如“平方根”、“倍”或“加号”之类的关键词。你应该一个字一个字地从左到右。例如，如果用户输入

```
What is 5 plus 3 minus 8? 
```

你应该在减号之前检测加号，而如果输入了这个

```
What is 5 minus 3 plus 8? 
```

您应该在加号之前检测到减号。

对于使用两个数字的操作，您需要获取找到的前两个数字并执行操作并将这两个数字替换为结果。如果您不太了解我要做什么，我正在尝试使用反向波兰符号，如果不知道它是什么，请查看它。

我希望我正确理解了您的问题，并为找到解决方案提供了一些帮助，因为您提出的问题很难但看起来很有趣。祝你好运。另外作为警告，我没有在我的回复中考虑操作顺序。

# drupal - 简单视图问题 - Drupal 7

> ID：10941371
> 
> 赞同：0
> 
> 时间：2012-06-07T23:45:18.003
> 
> 标签：drupal, views, drupal-views

我正在创建一个拥有 5 个具有“Blogger”角色的用户的博客网站。此角色仅用于在网站上撰写文章。我正在寻找一个视图，显示 5 位博主的头像图像中的每一个，并在每个博主头像图像下方显示他们发布的 3 篇最新文章。

现在，我设置了一个显示所有博主的视图，并且我已经设置了与用户创作的内容的关系。问题是如果一个博主发表了多篇文章，每篇文章都会显示博主的头像一次。例如：

blogger1 标题：咕哝只是照常做该死的事……

blogger1 标题：今晚你需要为热火加油的唯一原因

blogger2 Title: 命运之轮历久弥新

在上面的示例中，Blogger1 有两篇文章，但他的头像/姓名在每篇文章中显示一次。我怎样才能解决这个问题？谢谢

编辑* * * * * * * * * * * * * * * * * * * * * * * *

我使用字段分组选项按用户：名称进行分组，因此它可以按我的意愿工作：

博主1

第 1 篇博主 1 第 2 篇博主 1

博主2

博主2的文章1

等等

我唯一的问题是，如何更改分组字段样式，以便在“Blogger1”旁边有他们头像的图像？另外默认显示是一个标签，有什么办法可以改变它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:20:41.137

在格式设置（您设置字段分组的位置）上，应该有一个选项显示“使用呈现的输出对行进行分组”。如果启用，您可以重写用户名（作者）字段的结果以包含用户图片。

将新的用户图片字段添加到视图。将其从显示中排除并重新排列字段，使用户图片位于用户名字段上方。现在您可以将用户名字段的结果输出重写为类似`[picture] [name]`的内容（可用模式在“将此字段输出为链接”选项下的折叠字段中可用）。您可以将 HTML 与替换模式混合以实现所需的标记。

# c# - 当字符串保证不会改变时，字符串比较真的会因文化而异吗？

> ID：10941375
> 
> 赞同：54
> 
> 时间：2012-06-07T23:46:10.457
> 
> 标签：c#, resharper, configuration-files, cultureinfo, string-comparison

我正在从配置文件中读取加密的凭据/连接字符串。Resharper 在这一行告诉我，“String.IndexOf(string) 在这里是特定于文化的”：

```
if (line.Contains("host=")) {
    _host = line.Substring(line.IndexOf(
        "host=") + "host=".Length, line.Length - "host=".Length); 
```

...因此想将其更改为：

```
if (line.Contains("host=")) {
    _host = line.Substring(line.IndexOf("host=", System.StringComparison.Ordinal) + "host=".Length, line.Length -   "host=".Length); 
```

无论应用程序部署在何处，我正在阅读的值将始终为“host=”。添加这个“System.StringComparison.Ordinal”位真的明智吗？

更重要的是，它会伤害任何东西（使用它）吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-08T00:03:36.390

绝对地。根据 MSDN ( [http://msdn.microsoft.com/en-us/library/d93tkzah.aspx](http://msdn.microsoft.com/en-us/library/d93tkzah.aspx) )，

> 此方法使用当前区域性执行单词（区分大小写**和区域性）搜索。**

因此，如果您在不同的文化下运行它（通过控制面板中的区域和语言设置），您可能会得到不同的结果。

在这种特殊情况下，您可能不会遇到问题，但是`i`在搜索字符串中输入一个并在土耳其运行它，它可能会毁了您的一天。

请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/ms973919.aspx](http://msdn.microsoft.com/en-us/library/ms973919.aspx)

> 这些新建议和 API 的存在是为了减轻对默认字符串 API 行为的错误假设。在语言上解释非语言字符串数据时出现的错误的典型示例是“Turkish-I”问题。
> 
> 对于几乎所有拉丁字母，包括美国英语，字符 i (\u0069) 是字符 I (\u0049) 的小写版本。这种大小写规则很快成为在这种文化中编程的人的默认设置。然而，在土耳其语（“tr-TR”）中，存在一个大写的“i with a dot”字符（\u0130），它是 i 的大写版本。同样，在土耳其语中，有一个小写“i without a dot”或 (\u0131)，它大写为 I。这种行为也出现在阿塞拜疆文化 (“az”) 中。
> 
> 因此，通常关于大写 i 或小写 I 的假设在所有文化中都无效。如果使用字符串比较例程的默认重载，它们将受到文化差异的影响。对于非语言数据，如下例所示，这可能会产生不希望的结果：

```
 Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US")
Console.WriteLine("Culture = {0}",
   Thread.CurrentThread.CurrentCulture.DisplayName);
Console.WriteLine("(file == FILE) = {0}", 
   (String.Compare("file", "FILE", true) == 0));

Thread.CurrentThread.CurrentCulture = new CultureInfo("tr-TR");
Console.WriteLine("Culture = {0}",
   Thread.CurrentThread.CurrentCulture.DisplayName);
Console.WriteLine("(file == FILE) = {0}", 
   (String.Compare("file", "FILE", true) == 0)); 
```

> 由于 I 比较的不同，当线程文化改变时，比较的结果也会改变。这是输出：

```
Culture = English (United States)
(file == FILE) = True
Culture = Turkish (Turkey)
(file == FILE) = False 
```

这是一个没有大小写的例子：

```
var s1 = "é"; //é as one character (ALT+0233)
var s2 = "é"; //'e', plus combining acute accent U+301 (two characters)

Console.WriteLine(s1.IndexOf(s2, StringComparison.Ordinal)); //-1
Console.WriteLine(s1.IndexOf(s2, StringComparison.InvariantCulture)); //0
Console.WriteLine(s1.IndexOf(s2, StringComparison.CurrentCulture)); //0 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-07T23:51:08.740

[CA1309: UseOrdinalStringComparison](http://msdn.microsoft.com/en-us/library/bb385972.aspx)

不使用它并没有什么*坏处*，但是“**通过将参数显式设置为 StringComparison.Ordinal 或 StringComparison.OrdinalIgnoreCase，您的代码通常会提高速度、提高正确性并变得更可靠。** ”。

* * *

Ordinal 到底是什么，为什么它对你的情况很重要？

> 使用序号排序规则的操作基于字符串中每个 Char 的数值（Unicode 代码点）执行比较。序数比较速度很快，但对文化不敏感。当您使用序数排序规则对以 Unicode 字符 (U+) 开头的字符串进行排序时，如果 xxxx 的数值小于 yyyy，则字符串 U+xxxx 位于字符串 U+yyyy 之前。

而且，正如您所说...您正在阅读的字符串值对文化不敏感，因此使用 Ordinal 比较而不是 Word 比较是有意义的。请记住，Ordinal 的意思是“这不是文化敏感的”。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-07T23:55:10.363

回答您的具体问题：不，但是静态分析工具无法意识到您的输入值永远不会包含特定于语言环境的信息。

# objective-c - 我什么时候释放这个块？

> ID：10941381
> 
> 赞同：0
> 
> 时间：2012-06-07T23:47:18.997
> 
> 标签：objective-c, memory-management, objective-c-blocks, grand-central-dispatch

我正在查看此线程中的一些代码[How do you trigger a block after a delay, like -performSelector:withObject:afterDelay:?](https://stackoverflow.com/questions/4139219/how-do-you-trigger-a-block-after-a-delay-like-performselectorwithobjectafter) . 我想知道，如果该块异步执行某些操作，该块应该何时释放？

假设我有如下代码：

```
- (void)testMethod:(id)parameter
{
    dispatch_block_t block = ^{
         SomeAsyncTask *t = [SomeAsyncTask withCompletionBlock:^{
                                 [parameter doAction];
                             }];    
    };
    [self performSelector:@selector(executeBlock:)
            onThread:backgroundThread
               withObject:block
            waitUntilDone:NO];
    dispatch_release(block); //I can release the block here because performSelector      retains the block
}

- (void)executeBlock:(id)block
{
    block();
} 
```

那么关键是 SomeASyncTask 中的完成块将保留参数以便释放块是安全的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:21:52.803

Ken Thomases 的回答是正确的。我想对您的评论做出更详细的回应。

首先，不清楚您的意思是`performSelector:withObject:`还是`performSelector:withObject:afterDelay:`，因为`performSelector:withObject:`是直接同步调用，所以`[self performSelector:@selector(runBlock:) withObject:block_];`与`[self runBlock:block_]`. 我会假设它是`performSelector:withObject:afterDelay:`，因为`performSelector:withObject:`它不那么有趣。

一步一步看。`performSelector:withObject:afterDelay:`保留它的参数，所以你可以在给它块后释放它。并*通过*其选择器的性能`performSelector:...`保留它。因此，在 期间，该块是有效的，因为它仍然由. 在块执行期间，它仍然有效（因为它仍然在执行的内部）。如果它是异步的，则必须保留其参数。等等。*`runBlock``performSelector:...``runBlock``doSomethingAsynchronouslyWithCompletionBlock`*

 *但你不需要那样看。仔细想一想，你就会意识到，内存管理规则是这样制定的，这样**你就不用担心其他代码做了什么，只管本地需要什么**。

内存管理规则归结为以下条件：**每个函数/方法都期望其参数在被调用时有效**（这通常意味着在函数调用的持续时间内，因为调用函数在此期间不会运行，所以如何它会变得无效吗，除非这个函数做了一些间接删除它的事情（比如从字典中删除）？）；**并且对函数调用后它将保持有效多长时间没有任何期望**。而已。一切由此而来。

例如，在您的 中`doWork`，您只关心需要使用该块多长时间。由于之后不需要它`performSelector:...`，您可以安全地释放它。`performSelector:...`异步处理它并不重要；您甚至可能不知道它是异步的（例如，您可能正在选择一个未知的方法来动态调用）。关键是，它做什么并不重要。为什么？因为`performSelector:...`不假定参数比您调用它时更有效。因此，如果它需要保留更长时间（确实如此），它必须保留它（但您不需要知道这一点）。只要它需要它，它就会保留它。

同样，`runBlock`可以假设它给出的参数在其调用期间是有效的。由于它不需要保留它更长时间（它所做的只是调用块），它不需要保留它。该块不会改变这一点。为什么？同样，由于块不假定其参数（包括块本身）在其调用后是有效的，所以`runBlock`不需要保证它。如果块调用`doSomethingAsynchronouslyWithCompletionBlock`，那很好。`doSomethingAsynchronouslyWithCompletionBlock`不假设任何东西在它的调用之外是有效的，所以如果它是真正异步的，它必须在某个地方保留它。等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:11:13.093

您可以在调用后立即释放它`-performSelector:withObject:afterDelay:`。（我假设您打算使用 after-delay 变体。）像往常一样，您负责内存管理，其他代码负责其内存管理。这是另一种说法，`-performSelector:withObject:afterDelay:`必须保留接收者和传入的对象，直到执行选择器之后。

编辑添加：顺便说一句，您为什么不`dispatch_after()`按照您链接到的问题的答案中的说明使用？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-08T00:22:04.507

我可能只是尝试使用参数传递一个数组。*

# multithreading - 使用 C 中的线程调用函数

> ID：10941383
> 
> 赞同：0
> 
> 时间：2012-06-07T23:47:29.597
> 
> 标签：multithreading, function

我有一个非常笼统的问题。我想创建两个线程，在其中一个线程中我想对特定函数进行函数调用并获取函数返回的线程中的值。我可以在线程中调用函数吗？如果可能的话，我无法在网上找到一个很好的例子。否则，如果这不能在 C 中实现，那么我可以使用第三个线程与第二个线程进行通信吗？如果可以的话，请在这方面给我一个很好的教程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:50:14.797

线程只是通过您的程序的一个单独的并行执行流，它恰好在相同的地址空间中运行。所以是的，您可以在线程中调用函数。

如果您指定一种语言，那么也许我可以举一个例子。

# iphone - 检测区域货币格式 (iPhone)

> ID：10941384
> 
> 赞同：0
> 
> 时间：2012-06-07T23:47:36.780
> 
> 标签：iphone, xcode, xcode4

好的，所以我有一个带有数字字段（值为 0-9 的按钮）的应用程序，它更新了格式化为当地货币的标签。标签自动为用户放置小数点，因此格式为 0.00。现在这是一个问题，因为 iphone 将大多数其他货币（例如欧元）格式化为 0,00。

有没有办法检测区域货币格式（设置>国际>区域格式）？

然后我会相应地做出一个 if 语句。

我当前的数字键盘代码：

```
NSString *digit = sender.currentTitle;
numberField.text = [numberField.text stringByAppendingString:digit];

NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setGroupingSeparator:@""];
[numberFormatter setMaximumIntegerDigits:4];
[numberFormatter setMaximumFractionDigits:2];
[numberFormatter setMaximumFractionDigits:2];

numberField.text = [numberField.text stringByReplacingOccurrencesOfString:@"."    withString:@""];
NSDecimalNumber *currency = [[NSDecimalNumber decimalNumberWithString:numberField.text]   decimalNumberByDividingBy: [NSDecimalNumber decimalNumberWithString:@"100"]];
numberField.text = [numberFormatter stringFromNumber:currency]; 
```

您可以在第 11 行看到它插入小数点的位置。当我将其更改为逗号时，0,00 格式可以正常工作。

和转换：

```
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterCurrencyStyle];
NSString *string = [f stringFromNumber:[NSNumber numberWithFloat:[numberField.text floatValue]]];

numberField.text=string; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:24:43.587

- - - - - - - - - 编辑 - - - - - - - - -

我相信@lnafziger 可能有更有效的方法来做到这一点。除了`NSLocaleDecimalSeparator`键之外，您可能还会发现`NSLocaleGroupingSeparator`和`NSLocaleCurrencySymbol`键很有用。

希望这可以帮助！

你可以使用：

```
NSString *locale = [NSLocale currentLocale] localeIdentifier];
if(locale isEqualToString: @"en_US"){

    //Set Device Currency to American Dollars

}
else if(locale isEqualToString: @"fr_FR"){

    //Set Device Currency to Euros

}
else if(locale isEqualToString: @"en_AU"){

    //Set Device Currency to Australian Dollars

} 
```

有关更多信息`NSLocale`，请参见[此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T00:33:14.290

要获取当前语言环境的小数分隔符，请使用以下命令：

```
NSLocale *loc       = [NSLocale currentLocale];
NSString *separator = [loc objectForKey:NSLocaleDecimalSeparator]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:34:32.693

要获取本地（来自用户定义的设置）货币美元或欧元，我使用以下代码段：

```
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSString *dec = [f stringFromNumber:[NSNumber numberWithFloat:100.01]];
[f setNumberStyle:NSNumberFormatterCurrencyStyle];
NSString *string = [f stringFromNumber:[NSNumber numberWithFloat:100.01]];

NSString *currency = [string stringByReplacingOccurrencesOfString:dec withString:@""];
currency =  [currency stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSLog(@"local currency:%@",currency); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:55:26.873

iphone是*hnu985jmpl895662*方式格式。所以这个问题的答案是；具有当前 disisenables7 的第 4 代。大声笑 IDK

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-24T03:08:55.213

这会将数字转换为本地货币字符串 `[NSNumberFormatter localizedStringFromNumber:dec numberStyle:NSNumberFormatterCurrencyStyle]`；

# javascript - javascript window.location iframe，使父窗口转到位置

> ID：10941387
> 
> 赞同：20
> 
> 时间：2012-06-07T23:48:31.560
> 
> 标签：javascript, jquery

我知道在同一个页面框架或父页面上，我可以通过任何方式访问某些内容，`window.location`但是是否有办法检查我是否在 iframe 中，如果是，则将顶部（父窗口）位置转到某个地方？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-07T23:54:31.133

这是一个简单的代码来检查您的页面是否在 iframe 中加载：

```
if (window.location != window.parent.location)
    window.parent.location = "http://someurl"; 
```

# c# - Short2 可以在 WP7 上用于顶点位置吗？

> ID：10941388
> 
> 赞同：0
> 
> 时间：2012-06-07T23:48:36.680
> 
> 标签：c#, windows-phone-7, xna-4.0

我在将 Short2 用于顶点数据中的 (x,y) 位置时遇到问题。这是我的顶点结构：

```
struct VertexPositionShort : IVertexType
{
    private static VertexElement[]
        vertexElements = new VertexElement[]
        {
            new VertexElement(0, VertexElementFormat.Short2, VertexElementUsage.Position, 0),
        };
    private static VertexDeclaration
        vertexDeclaration = new VertexDeclaration(vertexElements);

    public Short2
        Position;

    public static VertexDeclaration Declaration
    {
        get { return new VertexDeclaration(vertexElements); }
    }

    VertexDeclaration IVertexType.VertexDeclaration
    {
        get { return new VertexDeclaration(vertexElements); }
    }
} 
```

使用 WP7 模拟器，如果我使用此结构，则不会绘制任何内容 - 没有工件，什么都没有！但是，如果我使用相同的结构，其中 Short2 结构被 Vector2 替换，那么它就可以完美运行。

我发现这是一个特定于模拟器的问题的参考：“在 Windows Phone 模拟器中，必须将 SkinnedEffect 骨骼索引通道指定为整数顶点元素格式之一 - Byte4、Short2 或 Short4。同样的集合整数数据格式不能用于其他着色器输入通道，例如模拟器上的颜色、位置和纹理坐标。” （http://www.softpedia.com/progChangelog/Windows-Phone-Developer-Tools-Changelog-154611.html）但是这是从 2010 年 7 月开始的，我假设这个限制现在已经修复了......？不幸的是，我没有可以测试的设备。

任何人都可以确认这仍然是模拟器中的一个问题，或者指出我为什么这不起作用的另一个原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:00:33.263

由 Shawn Hargreaves 先生解决：“您可以在顶点数据中使用 Short2，但这是一个整数类型，因此您的顶点着色器必须编写为接受整数而不是浮点输入。BasicEffect 采用浮点数，因此 Short2 无法使用它。 NormalizedShort2 可能是更好的选择？”

[http://blogs.msdn.com/b/shawnhar/archive/2010/11/19/compressed-vertex-data.aspx](http://blogs.msdn.com/b/shawnhar/archive/2010/11/19/compressed-vertex-data.aspx)

我可以确认 NormalizedShort2 实际上确实适用于 WP7 模拟器和真实设备中的位置数据。

谢谢，肖恩！

# ruby-on-rails - 使用复选框过滤列表

> ID：10941389
> 
> 赞同：3
> 
> 时间：2012-06-07T23:48:49.003
> 
> 标签：ruby-on-rails, ruby, checkbox, find

我有一个电影列表以及他们的收视率。在我的页面顶部，我有一个表格，它提供了一个复选框列表，显示了每个可用的评级（G、PG-13 等）。一旦用户点击复选框并点击提交，我只想显示所选电影。

在我的索引方法中，我有一个名为的实例变量`@filtered_ratings`，它从检查的电影中收集键。`@movies`我的想法是使用 find 方法更改我的控制器并将键从`@filtered_ratings`电影列表中匹配。但是，我认为我做错了，因为我无法让它工作。我尝试了几种方法，例如，`@movies=Movie.find(params[:id] = @filtered_ratings)`但我知道这是不正确的。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T00:15:09.473

假设您的复选框表单类似于：

```
<%= form_tag method: (blah), url: (blah) do %>
   <%= check_box_tag 'ratings[]', "R" %>
   <%= check_box_tag 'ratings[]', "PG" %>
  <%= check_box_tag 'ratings[]', "PG-13" %>
  <%= submit_tag 'Submit' %>
<% end %> 
```

如果说前两个框被选中，你会得到 params[:ratings] = ["R", "PG"]。所以，在控制器中你可以做

```
Movie.where("rating IN (?)", params[:ratings]) 
```

. 这假设您的电影具有“评级”属性。

# php - Mod_Rewrite 在漂亮的 URL 中使用查询字符串

> ID：10941394
> 
> 赞同：1
> 
> 时间：2012-06-07T23:49:33.900
> 
> 标签：php, .htaccess, mod-rewrite

我有一个 .htaccess 文件，它使用路由查询字符串参数将所有 URL 重定向到 index.php 文件：

```
# Enable Mod_rewrite
RewriteEngine on

# Redirect pretty URLs to the index file
RewriteRule ^([\w\/\-]+)/?$ index.php?route=$1 
```

这很好用，但其中包含查询字符串的 URL 除外。例如，我有一个带有错误代码 ( `/admin/login?error=1`) 的表单重定向回登录屏幕。显然，问题在于，`$_GET[error]`参数永远不会传递给主脚本。

我如何将这些参数传递给脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T23:53:29.613

只需添加[[QSA]](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)作为标志：

> 'qsappend|QSA'（查询字符串追加） 此标志强制重写引擎将替换字符串的查询字符串部分追加到现有字符串，而不是替换它。当您想通过重写规则向查询字符串添加更多数据时，请使用此选项。

`RewriteRule ^([\w\/\-]+)/?$ index.php?route=$1 [QSA]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T00:05:30.507

This is my standard mod_rewrite entry (altered for your question). I'm adding it to save anyone potential pain with stuff like images & includes. It redirects everything except existing files.

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([\w\/\-]+)/?$ index.php?route=$1 [QSA]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T23:53:28.737

设置标志 QSA - 查询字符串追加

```
# Enable Mod_rewrite
RewriteEngine on

# Redirect pretty URLs to the index file
RewriteRule ^([\w\/\-]+)/?$ index.php?route=$1 [QSA] 
```

（我所做的只是添加 [QSA] ）

Apache Mod_Rewrite 文档有更多关于标志的信息。

# css - 为什么我的 div 中会出现额外的填充？

> ID：10941398
> 
> 赞同：0
> 
> 时间：2012-06-07T23:50:01.333
> 
> 标签：css, internet-explorer

我已经为所有浏览器编写了我的网站，但 IE 当然有问题。特别是只有 IE 7。我希望找到一个解决方案，以解决为什么它在两个问题上的行为方式以及我可以添加的内容，以便 IE 能够正确显示它。

我的提交按钮与它们包含的 div 的底部对齐。

![在此处输入图像描述](../Images/7e222c60f3a441e1fd520e00ab123976.png)

搜索字段的提交按钮的 CSS

```
#searchform { /*container widget */ position: relative; left: 15px; width: 97%; height: 30px; background-color: #f3f3f3; border: 2px solid #742222;}

#searchform label { display: none; }

#searchform input#s { width: 75%; height: 20px;}

input[type=text],input#s { margin: 0 10px 0 0; width: 60%; }

#searchsubmit{ position: relative; float: right; width: 30px; height: 30px; text-indent: -999px; background: url(http://averylawoffice.ca/img/SEARCH-submit.jpg) center; border: 0px;} 
```

此 CSS 适用于除 IE 7 版以外的所有浏览器。有没有办法使其顶部对齐而无需绝对定位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:09:05.577

我设法通过左浮动文本框将提交按钮向上移动（到正确的位置）。

```
.subscription_email {
    ...
    float: left;
} 
```

搜索文本框也是如此：

```
#s {
    ...
    float: left;
} 
```

通过进行这些更改，生成的演示文稿将与 Firefox 中的完全相同。

# ninject - Ninject 绑定所有工厂接口

> ID：10941399
> 
> 赞同：4
> 
> 时间：2012-06-07T23:50:04.413
> 
> 标签：ninject, factory, ninject-extensions

有没有一种简单的方法可以使用 Ninject 将所有 Factory 接口绑定到 ToFactory() 扩展方法？

```
public class Foo
{
    readonly IBarFactory barFactory;

    public Foo(IBarFactory barFactory)
    {
        this.barFactory = barFactory;
    }

    public void Do()
    {
        var bar = this.barFactory.CreateBar();
        ...
    }
}

public interface IBarFactory
{
    Bar CreateBar();
} 
```

对于上面的代码，我可以使用：

```
kernel.Bind<IBarFactory>().ToFactory(); 
```

如果我有 10 或 20 个需要绑定的 IFactory 接口，我会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T00:21:27.533

是的，使用约定：[https ://github.com/ninject/ninject.extensions.conventions](https://github.com/ninject/ninject.extensions.conventions)

```
this.Bind(x => x.From_UseSomeOverloadToSpecifyTheAssemblies()
                .SelectAllInterfaces().EndingWith("Factory")
                .BindToFactory(); 
```

# android - Android：点击时使 ListItem 闪烁

> ID：10941403
> 
> 赞同：0
> 
> 时间：2012-06-07T23:50:44.133
> 
> 标签：android, listview

我在下面定义了一个简单的 ListItem，我在 ListView 中使用。我怎样才能让它“闪烁”，以便用户知道他们点击了哪些列表视图项目？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="8dp">
    <ImageView
        android:id="@+id/IconImageView"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:padding="5dp" />
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dip">
        <TextView
            android:id="@+id/CaptionTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/white"
            android:textSize="20dip" />
        <TextView
            android:id="@+id/ValueTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="14dip"
            android:textColor="@color/icongrey" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:06:17.233

选择项目后，为什么不直接更改背景，如果需要，创建一个只会进入睡眠状态的新线程，然后将项目颜色更改回来。

如果您创建一个新线程，则创建一个子类，以便您可以将所选项目传递给它，或者至少传递项目编号，以防它们触及多个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T10:41:48.103

为您的根元素添加背景 `android:background="@drawable/item_click"`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@color/blue" android:state_pressed="true"/>
<item android:drawable="@color/white" android:state_pressed="false" /> 
```

# c# - C#：循环异或键和位移？

> ID：10941408
> 
> 赞同：0
> 
> 时间：2012-06-07T23:51:19.220
> 
> 标签：c#

我有一个存储为 4 字节整数的密钥。说

```
Int32 key = 12345678; 
```

我有一个表示加密字符串字符的字节数组

```
byte[] barray = ... 
```

现在我想遍历每个字节并与密钥中的相应字节进行异或，必要时循环密钥。

```
1st byte ^= key & 0xFF
2nd byte ^= key & 0xFF 00
3rd byte ^= key & 0xFF 00 00
4th byte ^= key & 0xFF 00 00 00
5th byte ^= key & 0xFF 
```

如何编写循环？我从

```
for (int i = 0; i &lt; barray.length; i++)
{
   barray[i] ^= ???  
} 
```

我不确定如何计算正确的异或字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:54:50.743

首先将密钥转换为字节数组：

```
byte[] keyBytes;
unchecked
{
    keyBytes = new byte[]{(byte)(key >> 0),
                          (byte)(key >> 8),
                          (byte)(key >> 16),
                          (byte)(key >> 24);
} 
```

我正在使用它`BitConverter`来实现固定的字节顺序。在这个例子中是小端，但是你可以很容易地选择大端，通过以相反的顺序列出移位的字节。

然后您可以使用余数运算符`%`来处理关键字节：

```
for (int i = 0; i < barray.length; i++)
{
    barray[i] ^= keyBytes[i%4];
} 
```

您正在实施的是具有 4 字节密钥长度的[Vigenère 密码。](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher)所以攻击它很容易。这实际上只是混淆，而不是真正的加密。

# facebook-graph-api - 是否可以访问喜欢我的页面的用户的电子邮件？

> ID：10941415
> 
> 赞同：3
> 
> 时间：2012-06-07T23:51:41.160
> 
> 标签：facebook-graph-api

如何获得包含在 Facebook 上喜欢我的粉丝页面的所有用户列表的电子邮件？

我正在使用以下网址使用 Facebook 图： [https://graph.facebook.com/['fan page id']?fields=likes&access_token=AAAAAAITEghMBACnbIeL5pDFKPQtjAqebZA4aRJKwX1mgFM3502cSxpSw2ssN4gG5r4arZBA2tIsASD698qB9CHaOZBTYd3PpkjjLZBTVc](https://graph.facebook.com/%5B%27fan%20page%20id%27%5D?fields=likes&access_token=AAAAAAITEghMBACnbIeL5pDFKPQtjAqebZA4aRJKwX1mgFM3502cSxpSw2ssN4gG5r4arZBA2tIsASD698qB9CHaOZBTYd3Ppkj21iMypzBPITVcjLHZB)

但它只返回喜欢的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:46:18.067

它尚不可用。

facebook 页面的 facebook api 可能的操作在[此处](https://developers.facebook.com/docs/reference/api/page/)显示。

但是可以检查用户是否喜欢您的页面。这是一个可以帮助您的[堆栈溢出问题](http://facebook.stackoverflow.com/questions/5093398/check-if-user-liked-page)。

# android - 了解 Android 画布裁剪

> ID：10941416
> 
> 赞同：5
> 
> 时间：2012-06-07T23:51:53.023
> 
> 标签：android, android-canvas, clipping

我很难找到答案。考虑下面的剪辑代码：

```
 boolean is_ok = mycanvas.clipRect(clip_left, clip_top, clip_right+1, clip_bottom+1);
       mycanvas.getClipBounds(clipRect);
       if (!is_ok ||
               clipRect.left != clip_left ||
               clipRect.top != clip_top ||
               clipRect.right != clip_right+1 ||
               clipRect.bottom != clip_bottom+1)
       {
           Log.i("DEBUG", "setClipping failed");
       } 
```

返回剪辑边界时，它们与刚刚设置的内容不匹配。例如，如果 clip_left、clip_top、clip_right、clip_bottom 为 (100,50,109, 59)，那么在给定上述代码的情况下，我希望剪切边界为 (100, 50, 110, 60)。它不是。getClipBounds() 返回 (100, 51, 110, 60)。

当我将它设置为 50 时，为什么 top = 51？引擎盖下有些东西我还不明白。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T03:20:40.280

好的，在提问之前我需要更清楚地阅读。如果有人感兴趣，我会自己回答：

设置新的 clipRect 时，我假设它会替换之前的剪辑。事实并非如此。相反，它会与之前的剪辑创建一个交集。从 Android 开发者页面：

> clipRect（左浮动，上浮动，右浮动，下浮动）
> 
> 将当前剪辑与以局部坐标表示的指定矩形相交。

# jquery - ajax post、firefox 和 IE 无法工作

> ID：10941418
> 
> 赞同：-1
> 
> 时间：2012-06-07T23:52:10.703
> 
> 标签：jquery, ajax, firefox

我正在将 jquery ajax 发布到 php 脚本。这适用于 Chrome 19 和 Safari 5。

```
$.ajax({
    type:'POST',
    async:true,
    url: '/site/phpscript.php',
    data: {
            xyArray: xyArray,
            xmlDataString:xmlDataString,
            id:id
        },
    success: function(results){ alert('success'); },
    error: function()
    {
                alert('error');
    }
}); 
```

当我测试这个时，这将在 chrome 和 safari 中工作。但不在 IE 和 Firefox 中。但是.. 如果 xmlDataString 的大小很小，它将起作用。

使用 jQuery ajax 发布时，Firefox 有大小限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:22:41.000

编辑：是的，Firefox 有 4096 个字符的限制。

这里有一些解决方法： [http ://forums.ext.net/showthread.php?8208-Firefox-Ajax-limit-of-4096](http://forums.ext.net/showthread.php?8208-Firefox-Ajax-limit-of-4096)

编辑：从那篇文章：

我创建了一个 JS 函数来处理来自 Web 服务 ajax 调用的“结果”……它在 FF 和 IE 中都有效……

就这么叫吧……

```
var strResult=Ext.DomQuery.selectValue("string", result, "");
function getWebSvcString(result)

{

var strResult="";

var stringElement = result.getElementsByTagName("string")[0];

if (stringElement.text!=null &amp;&amp; stringElement!=undefined){

strResult=stringElement.text;

// alert("IE: "+strResult.length);

}

else if (stringElement.textContent!=null &amp;&amp; stringElement.textContent!=undefined)

{

strResult=stringElement.textContent;

// alert("FF: "+strResult.length);

}

return strResult;

} 
```

另外，我会将 Post 排除在外，因为它是默认设置。它只会让你的代码更干净。此外，我会在您的 Ajax 调用中的错误事件响应中添加一条错误消息。这也可能提供线索。

```
$.ajax({
    async:true,
    url: '/site/phpscript.php',
    data: {
            xyArray: xyArray,
            xmlDataString:xmlDataString,
            id:id
        },
    success: function(results){ alert('success'); },
    error: function(xhr, ajaxOptions, thrownError){
                    alert(xhr.status);
                    alert(thrownError);

    }
}); 
```

根据我的经验，当浏览器遇到 Ajax 调用问题时，是因为数据格式不正确。您可以通过验证器运行帖子和响应吗？可能缺少字符、某处多余的逗号或缺少结束标记。

# javascript - 数字数组，查看当前值在哪两个数字之间

> ID：10941434
> 
> 赞同：1
> 
> 时间：2012-06-07T23:54:36.010
> 
> 标签：javascript, jquery

我有一个数字数组。0,136,1084,3521,3961,5631,6510,7901,8204 （它们是一页上所有部分的当前 scrollTops。）我正在尝试找到一种方法来获取当前窗口 scrollTop 并找出哪个这些值当前介于两者之间，因此当页面滚动时，活动导航项会切换。

目前，在滚动时，“当前页面”会跳过 0 并直接进入数组中的 1，因此无法捕捉到最后一页。

```
currentPage = 0;
divOffset = new Array();

function setCurrentPage() {
    divOffset = []; //this ends up as 0,136,1084,3521,3961,5631,6510,7901,8204

    //get offset and ID of each section and add to array.
    $(".section").each(function() {
        sectionOffset = $(this).offset();
        divOffset.push(Math.round(sectionOffset.top));
    }); 

    bodyOffset = $(window).scrollTop(); 

    for(i=0; i < divOffset.length; i++) {
        if( divOffset[i] >= bodyOffset ) {
            currentPage = i;
            $('#mainNav li').removeClass("active");
            $("#mainNav li #a-" + currentPage).parent().addClass("active");
            return false;
        }
    }   

} 
```

我的导航看起来像这样：

```
<ul id="mainNav">
    <li class="active"><a href="#a-0" class="navA" id="a-0">home</a></li>
    <li class="menuLI"><a>works</a>
        <ul>
            <li><a href='#a-1' class='navA' id='a-1'>Websites</a></li>
            <li><a href='#a-2' class='navA' id='a-2'>Illustrations</a></li>
            <li><a href='#a-3' class='navA' id='a-3'>Photomanipulations</a></li>
            <li><a href='#a-4' class='navA' id='a-4'>Glam Guitars</a></li>
            <li><a href='#a-5' class='navA' id='a-5'>Logos</a></li>
            <li><a href='#a-6' class='navA' id='a-6'>Photography</a></li>
        </ul>
    </li>
    <li><a href="#a-7" class="navA" id="a-7">about</a></li>
    <li><a href="#a-8" class="navA" id="a-8">contact</a></li>
</ul> 
```

您可以在这里查看：http: [//glowtagdesign.com/index2.php#a-0](http://glowtagdesign.com/index2.php#a-0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:59:58.463

假设数组已排序，试试这个：

```
var i;
for (i = 0; i < arr.length && pos < arr[i]; i++)
{
}
// i is now the number of items in the array less than pos
// pos is less than the first item -> 0
// pos is greater than the last item -> arr.length 
```

# c# - Lync 2010 SDK：如何获取用户的语音邮件 URI？

> ID：10941438
> 
> 赞同：0
> 
> 时间：2012-06-07T23:55:00.437
> 
> 标签：c#, lync-2010, voicemail

我正在编写一个简单的 C# 应用程序来应答 Lync 呼叫并根据数据库值将其转发到另一个电话号码。这完美无缺。但是，有时我想将呼叫转接到用户的语音信箱。我不知道如何获取语音信箱的 URI :(

假设我在 ConversationAdded 事件的处理程序中。我试过这个：

```
Conversation conv = args.Conversation;
string voicemailURI = String.Format("{0};opaque=app:voicemail",conv.SelfParticipant.Contact.Uri);
// the contact returned here, however, does not contain the opaque=app:voicemail
Contact forwardContact = lync.ContactManager.GetContactByUri(voicemailURI); 
```

还：

```
Conversation conv = args.Conversation;
// following throws ArgumentException: Value does not fall within the expected range
Phone voicemail = lync.Self.GetPhone(ContactEndpointType.VoiceMail);
string voicemailURI = voicemail.Endpoint.Uri
Contact forwardContact = lync.ContactManager.GetContactByUri(voicemailURI); 
```

UC 语音信箱已设置并正常工作。我不确定该术语究竟是什么，但它由 Exchange 处理，并且邮件出现在我的收件箱中。如果我只是让电话响起，它最终会出现在语音邮件中，但我的应用程序知道它应该立即发送到那里，所以我想立即转发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:17:09.177

我想我不太清楚你为什么关心联系方式？您的第一个示例将为您提供直接转到语音邮件的 URI。那时你可以这样做：

```
 var automation = LyncClient.GetAutomation();
        var conversationModes = AutomationModalities.Audio;
        var conversationSettings = new Dictionary<AutomationModalitySettings, object>();
        List<string> participants = new List<string>();
        Conversation conv = args.Conversation;            
        string voicemailURI = String.Format("{0};opaque=app:voicemail",conv.SelfParticipant.Contact.Uri);
        participants.Add(voicemailUri);
        automation.BeginStartConversation(AutomationModalities.Audio, participants, null, StartConversationCallback, automation); 
```

# asp.net - 在 ASPX 页面中使用构造函数（无代码隐藏）

> ID：10941439
> 
> 赞同：2
> 
> 时间：2012-06-07T23:55:03.140
> 
> 标签：asp.net, .net, constructor, code-behind

我可以在没有 Codebehind 文件的 ASPX 页面中实现构造函数吗？

我有一个页面“test.aspx”，我尝试包含一个构造函数：

```
<%@ Page Language="C#" %>
<script runat="server">
    public dd_prop_test_aspx() : base() { /* Do stuff */ }
</script> 
```

但是，运行时编译器给了我一个错误：

> CS0111：类型“ASP.test_aspx”已经定义了一个名为“test_aspx”的成员，具有相同的参数类型

```
Line 558:        [System.Diagnostics.DebuggerNonUserCodeAttribute()]
Line 559:        public test_aspx() {
Line 560:            string[] dependencies; 
```

我可以指定一个指令不自动生成构造函数（因为编译器似乎这样做）？或者，我有另一种解决方法吗？

最后，我想在 Page_PreInit 之前在类中设置变量，所以如果存在不使用构造函数的解决方法，那也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:47:34.240

尽管您不能重新声明构造函数，但您可以自由地覆盖`<script runat="server">`标签中的任何方法，只要您不在旁边的代码中覆盖它。而且，您还可以添加页面事件处理程序（适用相同的限制），例如`Page_PreInit`.

由于您可以同时使用页面事件*和*覆盖，您可以提前注入代码：

```
<script runat="server">
    void Page_PreInit(object sender, EventArgs e) 
    {
        Response.Write("First?");
    }

    protected override void OnPreInit(EventArgs e)
    {
        base.OnPreInit(e); // implicitly calls Page_PreInit
        Response.Write("Second!");
    }
</script> 
```

因此，如果您`Page_PreInit`在后面的代码中用作页面事件处理程序，则可以在 .aspx 中使用覆盖，`OnPreInit`并将代码放在对 .aspx 的调用之前`base.OnPreInit(e)`。

如果您在`OnPreInit`后面的代码中重写，您可以`Page_PreInit`在您的 .aspx 中声明 a ，这取决于`base.OnPreInit(e)`您在逻辑代码之前或之后调用的位置。

换句话说：您可以完全控制它何时发生。

# ruby-on-rails - 在其显示视图中编辑模型的单个字段

> ID：10941444
> 
> 赞同：0
> 
> 时间：2012-06-07T23:55:10.427
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在努力在其显示视图中更新项目的值，因此我在视图中嵌入了一个带有提交按钮的表单，但是我在页面底部有第二个按钮，它执行不同的操作并重新加载这页纸。我想要一个按钮来重新加载页面并同时更新项目的值；而不是需要按两个按钮。到目前为止，我还没有弄清楚该怎么做。

嵌入形式：

```
 <%= form_for @item, :url => { :action => "update" } do |f| %>
        <b>Amount to be Requested:<b>  
        <%= f.text_field :quantity %>
         <%= f.submit "Add" %>
        <% end %> 
```

页面底部的按钮：

```
<p><%= button_to "Add to my Request", add_list_item_path(@item), :id => "add_button" %></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:13:08.350

我完全不明白你在做什么，但据我所知，`items/update_requested`应该处理你的更新，然后`redirect_to :back`。

我假设这是页面上唯一的表单，并且不需要第二个按钮。

## 编辑

根据您所做的第一条评论，我只是将表单指向一个同时执行这两个操作的操作。

```
def update_and_unrelate
  @item = Item.find(params[:id]
  如果@item.update_attributes(params[:item])
    #在这里做无关的事情
  别的
    redirect_to :back, :alert => "没发生儿子"
  结尾
结尾

```

如果您真的想改进 UI，只需一个按钮，如果该字段已填写，则可能执行无关的操作。

就我个人而言，我觉得按钮越少越好，为它们“做”是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:41:32.610

可能不是您正在寻找的内容，但会提供比刷新页面更好的体验：

[https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)

# eclipse - Eclipse Java EE Indigo 的 XML 格式突然搞砸了

> ID：10941447
> 
> 赞同：2
> 
> 时间：2012-06-07T23:55:23.683
> 
> 标签：eclipse, formatting

前几天还好好的。我没有对 IDE 或首选项中的任何其他内容进行任何更改。

看起来像随机不稳定，但我希望我错了，我不想再通过IDE设置......

这里有两个屏幕截图来讲述这个故事：

在 Ctrl+Shift+F（格式）之前： ![在此处输入图像描述](../Images/35ef0aa82ab2298f73f3a6d169188610.png)

之后（格式化结果）： ![在此处输入图像描述](../Images/985e054d5fd3ac4be05ada89b222ea74.png)

我能做些什么呢？

我已经尝试比较我拥有的另一个 Eclipse 设置中的设置，该设置具有正常工作的 XML 格式。（窗口 -> 首选项 -> XML -> XML 文件 -> 编辑器）。也（结构化文本编辑器）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:53:56.113

解决了。

看起来像“Android Common XML Editor”接管了，上面的蹩脚格式属于它。

我所要做的就是右键单击 XML 文件并选择**`Open With`->`XML Editor`**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:34:22.633

您可以在 Preferences / General / Editors / File Associations 处将 XML 文件的默认编辑器恢复为原始 XML 编辑器：

![将 XML 编辑器设为默认编辑器](../Images/d8b38e1158cbd912b238c0087078b608.png)

# google-apps - 谷歌电子表格通过脚本关闭自动保存？

> ID：10941451
> 
> 赞同：1
> 
> 时间：2012-06-07T23:55:32.177
> 
> 标签：google-apps, google-apps-script, google-sheets, google-spreadsheet-api

我对使用 Google Docs 还很陌生，但我真的很感激它。脚本很容易完成简单的任务，但我开始意识到一个潜在的速度问题，这有点令人沮丧。

我有一张用于我的业务的表格，用于计算工地上某些材料的成本。它工作得很好，但是在工作之间清除有点乏味，所以我编写了一个简单的脚本来清除我需要清空的范围（由我定义并由名称引用）。

再一次，工作得很好。唯一的问题是清除几个范围（七个）最终需要大约十秒。我相信这是因为在清除每个范围后保存电子表格，这变得很耗时。

我想做的是通过在脚本中禁用自动保存来测试这个理论，然后在清除范围后重新启用它。我不知道这是否可能，因为我还没有在 API 中看到执行此操作的函数，但如果可以，我很想知道。

* * *

编辑：这是我正在使用的功能。我已经尝试重写它几次以更简洁和更少的 API 调用密集，但到目前为止，我在减少处理调用所需的时间方面没有任何运气。

```
function clearSheet() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  sheet.getRange("client").clear();
  sheet.getRange("lm_group_1").clear({contentsOnly:true});
  sheet.getRange("lm_group_2").clear({contentsOnly:true});
  sheet.getRange("dr_group_1").clear({contentsOnly:true});
  sheet.getRange("dr_group_2").clear({contentsOnly:true});
  sheet.getRange("fr_group_1").clear({contentsOnly:true});
  sheet.getRange("fr_group_2").clear({contentsOnly:true});
  sheet.getRange("gr_group_1").clear({contentsOnly:true});
  sheet.getRange("client_name").activate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:34:33.570

这是不可能的，而且很可能永远不会。这不是 Google Docs 的“本质”。

但是，根据您编写脚本的方式，最终可能所有更改都已经在一次编写完毕。有一些 API 调用可能会强制将您的作品刷新到电子表格中（例如在您写完某些内容后尝试阅读），但我们需要查看您的代码来检查这一点。

无论如何，您始终可以检查电子表格修订历史记录，以验证它是一次完成还是分多个步骤完成。

关于性能，Apps Scripts 有一个不可避免的自然延迟，但不是 10 秒，因此您的脚本可能还有改进的空间，使用更少的 API 调用并更喜欢像`setValues`over`setValue`等批处理调用。但是话又说回来，我们必须查看您的代码才能断言并提供更多有用的提示。

# php - gzip json 文件发送到浏览器

> ID：10941452
> 
> 赞同：0
> 
> 时间：2012-06-07T23:55:59.423
> 
> 标签：php, jquery, json, gzip

我有大量数据要发送到浏览器，可能是 100mb 左右。我已将它们分成较小的文件，以便模拟流式传输。假设我有 200 个文件，每个文件 500kb。我在 javascript 中构建了一个包含 200 个文件的数组，然后对其进行循环并为每个文件进行 ajax 调用。它工作正常。然后我想改进它，所以我对服务器上的所有内容进行了 gzip 压缩，它们下降到原始块大小的 20% 左右。我的 ajax 调用以下文件：

```
fileserver.php?file=/temp/media_C46_20110719_113332_ori-0.js.gz 
```

在 fileserver.php 中，我非常简单：

```
$filepath = isset($_GET['file']) ? $_GET['file'] : '';

  if($filepath!=''){
   if(substr($filepath,-2,2)=='gz'){
    header("Content-Type: text/plain" );
    header("Content-Length: " .(string)(filesize($filepath)) );
    header("Content-Encoding: gzip");
    readfile(filepath);
  }
  else{
    header("Location: ".$filepath );
  }
} 
```

同样，这完全有效。问题是它需要永远！在 chrome 中查看我的网络选项卡，需要 15 秒左右才能获得 100kb 的块。我可以在不到一秒钟的时间内直接下载该文件。上面的 php 脚本几乎不需要任何时间来运行。我知道客户端（浏览器）需要花费一些时间来扩充内容，但它必须少于一秒。那么什么需要15秒！有没有其他工具可以用来检查这个？

我知道我可以在 apache 中设置标头变量，但我无权访问它，并且在 php 中执行它在功能上是等效的，对吧？这些是要设置的正确标题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:25:46.170

我刚刚发现了问题。filesize() 函数没有得到正确的路径，所以它打印为空白。我修复了它以发送正确的信息，现在它的工作速度要快得多。

# ruby-on-rails - RSpec：将 view.should_receive 与主题一起使用

> ID：10941455
> 
> 赞同：0
> 
> 时间：2012-06-07T23:56:26.657
> 
> 标签：ruby-on-rails, testing, rspec, rspec-rails

任何想法为什么这有效：

```
it {view.should_receive(:update_method)} 
```

但这不是？：

```
subject { view }
it { should_receive(:update_method) } 
```

其他一切都一样。我收到此错误：

```
Failure/Error: it {should_receive(:update_method) 
(#<RSpec::Core::ExampleGroup::Nested_1:0x7faf27602d58>).update_method
    expected: 1 time
    received: 0 times 
```

但我不知道 RSpec::Core::ExampleGroup::Nested.... 指的是什么。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:11:38.793

这是 24 小时内第二次出现这种情况。有什么东西在空中。有关说明，请参见[https://github.com/rspec/rspec-mocks/issues/148](https://github.com/rspec/rspec-mocks/issues/148)。

# c# - 为什么要实例化多个 SessionStateStoreProviders？

> ID：10941456
> 
> 赞同：4
> 
> 时间：2012-06-07T23:56:27.250
> 
> 标签：c#, asp.net, iis, iis-express

我正在开发一个`SessionStateStoreProvider`可以[在这里找到](https://github.com/TheCloudlessSky/Harbour.RedisSessionStateStore)的 Redis 。在我的`web.config`中，我在元素中添加以下`system.web`内容。

```
<sessionState mode="Custom" customProvider="RedisSessionStateProvider">
  <providers>
    <clear />
    <add name="RedisSessionStateProvider" 
         type="Harbour.RedisSessionStateStore.RedisSessionStateStoreProvider" />
  </providers>
</sessionState> 
```

但是，当我启动应用程序（使用内置 VS Web 服务器的 MVC3 应用程序）时，会创建**两个**实例`RedisSessionStateProvider`。这可以通过在构造函数上设置断点来验证。我试过清理解决方案并重建，但没有解决。当应用程序关闭时，两个提供者都会*被*释放。

值得注意的是，断点图标如下：

![断点](../Images/84e52349c1b3acc1ae346b0794f4465e.png)

我似乎在第二个图标上[找不到任何文档。](http://msdn.microsoft.com/en-us/library/5557y8b4.aspx)

有趣的是，当我切换到 IIS Express 时，会创建两个实例。但是，当我在加载页面后刷新页面时，会创建***第三个***实例。更奇怪的是，几秒钟后它就被丢弃了！

我找不到任何支持这种行为的文档。有人有这方面的信息吗？这是设计使然吗？这可能是因为多个工作进程吗？

# javascript - javascript 或 jquery 将参数从子 (iframe) 传递到父 (窗口) iframe 设置为子域

> ID：10941461
> 
> 赞同：0
> 
> 时间：2012-06-07T23:57:11.057
> 
> 标签：javascript, jquery, iframe, parent-child

我试图找出“相同域策略”的区域有多灰。我想要或需要做的是将一些变量从我的 iframe 元素传递到带有 javascript/jquery 的父窗口。

现在有点假装它。我有一个我正在合作开发的产品，并且该产品的一部分与子域中的其余部分相分离。让我们说 abc.domain.com。在主要产品 www.domain.com (domain.com) 上需要时，我单击一个链接，该链接打开一个包含 iframe 到 abc.domain.com 的中转站，这对于所有一般目的来说都可以正常工作。然而。在 iframe 中转元素中执行我需要的任何操作后，我想将参数发送到我的主页，以便我可以相应地设置它们，然后触发中转关闭。

我的问题是我还没有弄清楚如何正确地将这样的变量从 iframe 传递到父窗口，或者我被“相同域策略”所包围。我不知道是哪种情况。但是..在任何一种情况下，我都知道哪里有办法。在任何一种情况下，都必须有人想出如何做到这一点。这么说..有人可以扔给我一根骨头吗？

# java - 具有继承的生成器模式

> ID：10941464
> 
> 赞同：16
> 
> 时间：2012-06-07T23:57:42.140
> 
> 标签：java, design-patterns, builder

我想将 Web 服务 URL 请求表示为一个对象，并发现在继承层次结构中可以“冒泡”许多通用参数。一个请求可能有很多参数，一些是强制性的，另一些是可选的，我相信 Bloch 的 Builder 模式是一个不错的选择，它使用流畅的接口模拟命名参数。

具体来说，我正在为谷歌地图网络服务 API 设计，它具有一般网络服务请求

```
http://maps.googleapis.com/maps/api/service/output?{parameters} 
```

`service`并且`output`是强制参数，并且`sensor`是强制参数。还有一个可选参数`language`。

每个服务都有一组强制和可选参数。地理编码服务有两个可选参数，`bounds`和`region`. 它还具有相互排斥的强制参数，`address`或`location`，指定服务类型（分别为直接或反向地理编码）。我用新的儿童班来代表这种相互排斥。

我想像这样的类层次结构：

```
 .-----.
  | Url |
  '-----'
     ^
     |
.---------.
| Request |
'---------'
     ^
     |----------------------------+--------------...
.---------.                 .------------.
| Geocode |                 | Directions |
'---------'                 '------------'
     ^                            ^
     |------------+               .
 .--------.  .---------.          .
 | Direct |  | Reverse |          .
 '--------'  '---------' 
```

然后，我想做如下的事情：

```
String output = "xml";
boolean sensor = true;
String address = "Av. Paulista, São Paulo, Brasil";
Bounds bounds  = new Bounds(-20, -10, -25, -20); //Geographic rectangle
String region  = "br";
String lang    = "pt-BR";
Coord location = new Coord(-12,-22);

DirectGeocodeRequestUrl direct = 
    new DirectGeocodeRequestUrl.Builder(output, sensor, address)
                               .bounds(bounds)
                               .language(lang)
                               .build();

ReverseGeocodeRequestUrl reverse = 
    new ReverseGeocodeRequestUrl.Builder(output, sensor, location)
                                .language(lang)
                                .region(region)
                                .build(); 
```

如何创建一个使用其插入的类和超类中的参数和方法的 Builder？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T23:57:43.433

我在[https://stackoverflow.com/a/9138629/946814](https://stackoverflow.com/a/9138629/946814)上构建我的答案，但考虑到这个多层次的层次结构。

我们需要的是使用 Builder 内部类复制相同的层次结构。由于我们想要方法链接，我们需要一个`getThis()`返回层次结构的叶对象的方法。为了将其类型向上传递到层次结构，父类具有泛型`T`，并且叶子绑定`T`到自身。

它确保了类型安全并避免了由于未初始化的强制参数或拼写错误而引发的任何异常，以及漂亮的流畅界面。然而，将这样一个简单的结构表示为 URL 是一个非常昂贵和复杂的设计。我希望它对某人有用 - 我更喜欢最后的字符串连接。

请求网址：

```
public abstract class RequestUrl{
    public static abstract class Builder<T extends Builder<T>>{
        protected String output;
        protected boolean sensor;
        //Optional parameters can have default values
        protected String lang = "en"; 

        public Builder(String output, boolean sensor){
            this.output = output;
            this.sensor = sensor;
        }

        public T lang(String lang){
            this.lang = lang;
            return getThis();
        }

        public abstract T getThis();
    }

    final private String output;
    final private boolean sensor;
    final private String lang;

    protected <T extends Builder<T>> RequestUrl(Builder<T> builder){
        this.output = builder.output;
        this.sensor = builder.sensor;
        this.lang = builder.lang;
    }

    // other logic...
} 
```

地理编码请求网址：

```
public abstract class GeocodeRequestUrl extends RequestUrl {
    public static abstract class Builder<T extends Builder<T>>
        extends RequestUrl.Builder<Builder<T>>{

        protected Bounds bounds;
        protected String region = "us";

        public Builder(String output, boolean sensor){
            super( output, sensor );
        }

        public T bounds(Bounds bounds){
            this.bounds = bounds;
            return getThis();
        }

        public T region(String region){
            this.region = region;
            return getThis();
        }

        @Override
        public abstract T getThis();
    }

    final private Bounds bounds;
    final private String region;

    protected <T extends Builder<T>> GeocodeRequestUrl(Builder<T> builder){
        super (builder);
        this.bounds = builder.bounds;
        this.region = builder.region;
    }

    // other logic...
} 
```

DirectGeocodeRequestUrl：

```
public class DirectGeocodeRequestUrl extends GeocodeRequestUrl {
    public static class Builder<Builder>
        extends GeocodeRequestUrl.Builder<Builder>{

        protected String address;

        public Builder(String output, boolean sensor, String address){
            super( output, sensor );
            this.address = address;
        }

        @Override
        public Builder getThis(){
            return this;
        }

        public DirectGeocodeRequestUrl build(){
            return new DirectGeocodeRequestUrl(this);
        }
    }

    final private String address;

    protected DirectGeocodeRequestUrl(Builder builder){
        super (builder);
        this.address = builder.address;
    }

    // other logic...
} 
```

ReverseGeocodeRequestUrl：

```
public class ReverseGeocodeRequestUrl extends GeocodeRequestUrl {
    public static class Builder<Builder>
        extends GeocodeRequestUrl.Builder<Builder>{

        protected Coord location;

        public Builder(String output, boolean sensor, Coord location){
            super( output, sensor );
            this.location = location;
        }

        @Override
        public Builder getThis(){
            return this;
        }

        public ReverseGeocodeRequestUrl build(){
            return new ReverseGeocodeRequestUrl(this);
        }
    }

    final private Coord location;

    protected ReverseGeocodeRequestUrl(Builder builder){
        super (builder);
        this.location = builder.location;
    }

    // other logic...
} 
```

# git - git flow 分支模型分支

> ID：10941466
> 
> 赞同：2
> 
> 时间：2012-06-07T23:58:05.790
> 
> 标签：git, git-flow

我一直在阅读和重新阅读有关成功 git 模型（[git flow](http://nvie.com/posts/a-successful-git-branching-model/)）的帖子，在开发分支上工作时我对一些事情感到困惑。他说：

> 开始开发新功能时，从开发分支分支。
> 
> $ git checkout -b myfeature 开发

1.  他是从哪个分支开始的？我签出的“开发”分支？
2.  “myfeature”之后的“develop”是跟踪我的本地“develop”分支还是远程“origin/develop”分支？
3.  如果我在创建“myfeature”时从“开发”分支开始，最后是否需要“开发”？
4.  'myfeature' 是否复制了开发分支的当前 HEAD？
5.  如果我只想在开发服务器上查看我的更改，是否需要合并到本地开发或远程开发？

我正试图绕开它 - 重新阅读它并找到一些基于此模型的截屏视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:35:21.623

1.  没关系，因为他明确设置了基本提交（`develop`）。`myfeature`命令运行后，无论之前签出什么，他都会在分支上。

2.  `develop`是可能跟踪`origin/develop`您的远程跟踪分支的本地分支。

3.  没有。`git checkout -b myfeature`，没有明确的起点，将在您的`HEAD`. 如果你在`develop`分支的顶端，`myfeature`将基于`develop`.

4.  不完全是。`myfeature`引用与引用提示相同的提交`develop`。没有什么是“复制”的。当您在`myfeature`签出时提交更改时，`myfeature`提示将更新为新的提交。`develop`不会改变。

5.  如果您想在远程位置查看更改，则需要推送到远程位置。只是合并到本地分支不会对远程端做任何事情。

    如果你想“完成”你的功能，git-flow-style，我猜你想要*在开发部分合并一个完成的功能*：切换到`develop`、合并`myfeature`、删除`myfeature`，然后将现在更新的内容推`develop`送到`origin`.

[e] 更多答案：

*   *如果我从开发内部分支，那和做的一样；git checkout -b myfeature 在不开发时开发？*

新分支从这`develop`两种情况开始。（`git branch`工作方式相同，但它不会像`git checkout -b`那样将您切换到新分支。）

*   *为了完成我的功能，我会检查开发 > git pull > git merge myfeature > git push origin (aka origin/develop)？*

粗略地说，虽然`git push origin`并不总是“又名起源/发展”。默认情况下`git push origin`，将推送所有同名（或已设置为跟踪）分支的本地分支。（您可以使用配置设置更改默认值`push.default`。）`git push origin develop`只会将您的本地开发分支推送到源的开发分支，这就是您想要的。

*   *如果我在合并之前不拉，我冒着覆盖其他人所做的新提交的风险，对吗？*

仅当您强制推动时（说真的，不要那样做）。您可以在合并后进行拉动，但实际上您将合并两次。首先进行拉取效果更好，但如果不这样做，您不会有丢失数据的风险。

*   *有没有时候我会将开发合并到我的功能中？*

当然，如果其他人已将更新推送到`origin/develop`并且您想要合并他们的更改。本质上，如果你想保持你的特性分支是最新的并且你还没有准备好合并`develop`到.`myfeature``develop`

*   *myfeature 是否每个都合并到发布分支中，还是应该总是回到开发中？*

在 git-flow 系统中，`myfeature`应该总是回到`develop`，而发布分支总是从`develop`. `develop`应该是为外部暴露做好准备的更改分支——用于集成测试、候选发布等——以及代表项目当前开发状态​​的分支。这是所有新事物的起点。你不想在`myfeature`分支和一些随机发布分支中结束你的工作，但不是主线`develop`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T02:23:31.473

在这里很晚才出现，但您应该考虑到您引用的模型被许多人认为是不好的做法的可能性。请参阅此[博客文章](https://sandofsky.com/blog/git-workflow.html)。

它的要点是，虽然您可以将 GIT 用于类似于非分布式版本控制系统的分支模型，但这并不意味着您应该这样做。如果您打算这样做，请问自己，我是否应该首先选择 GIT。没有快进的合并被特别批评为剥夺了 GIT 提供的许多优势/工具。

我还没有意见。我只是在自己消化所有这些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:10:58.670

当您使用显式起点时，您当前在哪个分支上并不重要。语法是：

```
git branch <branchname> [<start-point>] 
```

如果您不指定起点，git 将分支您当前所在的任何分支。但是，通过明确的起点，您可以从 .git/refs/heads 中列出的任何头创建新分支。

至于其余的：

*   Develop 应该是 origin/develop 的跟踪分支。
*   当您可视化历史记录时，您的新功能分支*最初*看起来就像开发的同义词，因为在您进行一些提交之前，提交引用指针是相同的。
*   列表项 5 超出了您当前问题的范围。问另一个。:)

# scrapy - Scrapy shell XPATH 不工作

> ID：10941468
> 
> 赞同：1
> 
> 时间：2012-06-07T23:58:26.930
> 
> 标签：scrapy

我在 Chrome 中的 XPATHHelper 和 Firefox 中的 XPather 中尝试了以下 XPATH，它总是在谷歌搜索结果页面中显示所有片段（即搜索结果的描述），但它在 Scrapy shell 中不起作用：

```
//span[@class='st'] 
```

万一这很重要，我会像这样调用scrapy shell：

```
scrapy  shell "http://www.google.com/search?q=myQuery" 
```

我说`hxs.select("//span[@class='st']")`。这总是返回一个空列表。关于为什么会发生这种情况的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:55:26.390

Scrapy 无法“解析”需要执行 Javascript 的网站。不同的开发者控制台向您展示的是已经应用了所有 Javascript 的已解释和执行的站点。

由于谷歌在 Javascript 的帮助下显示其结果，Scrapy 本身无法处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:42:59.320

有时网站无法在禁用 Javascript 的情况下工作（例如 Applebees.com），因此您必须使用像 Selenium 这样的实际浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T14:13:56.523

在 Firefox url 栏中输入 : about:config 找到 javascript.enable 行并将其值更改为 false

安装 FireFinder 扩展 打开 Firebug (F12)

然后享受像 xpath 表达式一样抓取 google 的乐趣：

```
//*[@id="search"]//li[@class="g"]/div[@class="s"]//cite 
```

# google-chrome-extension - Returning an element value from chrome.tabs to a background script

> ID：10941470
> 
> 赞同：0
> 
> 时间：2012-06-07T23:58:51.500
> 
> 标签：google-chrome-extension

I would like to send a value from the tab html content to my chrome extension background script.

Right now I'm using a workaround, that is

`chrome.tabs.executeScript()` to send a code to retrieve data and then send it to my web server via Ajax, and then my background script checks to see if its there in my server. But that's obviously not the right way.

Is there a way to get element values and then send it back to the background script? so I can keep working with the value?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:21:26.490

`chrome.extension.sendRequest()`有对应的`chrome.extension.onRequest.addListener()`

如果不是很明显，您可以在此处阅读有关消息传递的所有信息： [http ://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

# ios - NSXMLParser 获取属性的命名空间前缀

> ID：10941474
> 
> 赞同：2
> 
> 时间：2012-06-07T23:59:26.173
> 
> 标签：ios, xml, nsxmlparser, xml-namespaces

我有一个 XML 结构，如下所示：

```
<Succeeded p1:type="Edm.Boolean" xmlns:p1="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices">false</Succeeded> 
```

由于我需要能够获取`p1:type="Edm.Boolean"`属性，因此命名空间前缀可能会有所不同，具体取决于我无法控制的几种力量。我需要弄清楚如何以编程方式从命名空间 URI 中获取前缀。

我已经实现了`parser:didStartMappingPrefix:toURI:`and`parser:didEndMappingPrefix:`委托方法，虽然我设置`setShouldProcessNamespaces`为**YES**，但它们不会被调用。

我是 NSXMLParser 的新手，但不是 iOS 和 XML 的新手。任何关于我应该如何去做的方向都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:12:54.807

除了实现委托方法和调用`setShouldProcessNamespaces:YES`，`setShouldReportNamespacePrefixes:YES`还应该调用。

此更改将导致调用两个“前缀”协议方法。在那里，您可以捕获命名空间 URI 和前缀并根据需要使用它们。

# python - Python：如何有效地检查项目是否在列表中？

> ID：10941479
> 
> 赞同：6
> 
> 时间：2012-06-07T23:59:57.860
> 
> 标签：python, list

我有一个字符串列表（类似单词），并且在解析文本时，我需要检查一个单词是否属于我当前列表的单词组。

但是，我的输入非常大（大约 6 亿行），根据 Python 文档，检查元素是否属于列表是 O(n) 操作。

我的代码是这样的：

```
words_in_line = []
for word in line:
    if word in my_list:
        words_in_line.append(word) 
```

由于花费了太多时间（实际上是几天），我想改进花费大部分时间的那部分。我查看了 Python 集合，更准确地说，查看了双端队列。但是，只有 O(1) 操作时间访问列表的头部和尾部，而不是中间。

有人知道如何以更好的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T00:18:14.853

您可能会考虑使用[trie](http://en.wikipedia.org/wiki/Trie)、[DAWG](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)或数据库。有几个相同的 Python 实现。

以下是一些相对时间供您考虑一组与列表：

```
import timeit
import random

with open('/usr/share/dict/words','r') as di:  # UNIX 250k unique word list 
    all_words_set={line.strip() for line in di}

all_words_list=list(all_words_set)    # slightly faster if this list is sorted...      

test_list=[random.choice(all_words_list) for i in range(10000)] 
test_set=set(test_list)

def set_f():
    count = 0
    for word in test_set:
        if word in all_words_set: 
           count+=1
    return count

def list_f():
    count = 0
    for word in test_list:
        if word in all_words_list: 
           count+=1
    return count

def mix_f():
    # use list for source, set for membership testing
    count = 0
    for word in test_list:
        if word in all_words_set: 
           count+=1
    return count    

print "list:", timeit.Timer(list_f).timeit(1),"secs"
print "set:", timeit.Timer(set_f).timeit(1),"secs" 
print "mixed:", timeit.Timer(mix_f).timeit(1),"secs" 
```

印刷：

```
list: 47.4126560688 secs
set: 0.00277495384216 secs
mixed: 0.00166988372803 secs 
```

即，将一组 10000 个单词与一组 250,000 个单词匹配比在相同 250,000 个单词的列表中匹配包含相同 10000 个单词的列表**快 17,085 X。**使用源列表和成员测试集比单独使用未排序列表**快 28,392 X。**

对于成员资格测试，列表是 O(n)，集合和字典是 O(1) 进行查找。

结论：对 6 亿行文本使用更好的数据结构！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:58:01.853

我不清楚您为什么首先选择列表，但这里有一些替代方案：

使用 set() 可能是个好主意。这是非常快的，虽然是无序的，但有时这正是需要的。

如果您需要订购的东西并进行任意查找，您可以使用某种树： [http ://stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/](http://stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/)

如果在此处设置具有少量误报的成员资格测试或可以接受，您可以检查布隆过滤器： [http ://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/](http://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/)

根据您正在做的事情，尝试也可能非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:02:35.313

这使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

```
words_in_line = [word for word in line if word in my_list] 
```

这将比您发布的代码更有效，尽管很难知道您的庞大数据集还有多少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T00:47:15.027

您可以在此处进行两项改进。

*   用哈希表支持你的单词列表。当您检查单词列表中是否存在单词时，这将为您提供 O(1) 性能。有很多方法可以做到这一点；在这种情况下最合适的是将列表转换为集合。
*   为您的匹配词集合使用更合适的结构。

    *   如果您需要同时将所有匹配项存储在内存中，请使用 a `dequeue`，因为它的追加性能优于列表。
    *   如果您一次不需要内存中的所有匹配项，请考虑使用生成器。生成器用于根据您指定的逻辑迭代匹配的值，但它一次仅将结果列表的一部分存储在内存中。如果您遇到 I/O 瓶颈，它可能会提供更好的性能。

下面是一个基于我的建议的示例实现（选择生成器，因为我无法想象你一次需要所有这些单词）。

```
from itertools import chain
d = set(['a','b','c']) # Load our dictionary
f = open('c:\\input.txt','r')
# Build a generator to get the words in the file
all_words_generator = chain.from_iterable(line.split() for line in f)
# Build a generator to filter out the non-dictionary words
matching_words_generator = (word for word in all_words_generator if word in d)
for matched_word in matching_words_generator:
    # Do something with matched_word
    print matched_word
# We're reading the file during the above loop, so don't close it too early
f.close() 
```

**输入.txt**

```
a b dog cat
c dog poop
maybe b cat
dog 
```

**输出**

```
a
b
c
b 
```

# iphone - UIView 内的 UIViewController 没有获得旋转委托

> ID：10941481
> 
> 赞同：1
> 
> 时间：2012-06-08T00:00:07.577
> 
> 标签：iphone, objective-c, ios, ipad

我的 UIScrollView 子类中有一个 UIViewController 的视图。问题是当我旋转设备时，我的 UIViewController 没有调用 willRotate 委托。这可能是因为 UIView 没有在其中实现旋转委托。解决这个问题的最佳方法是什么？

基本上结构是我有一个 MainViewController，其中有一个 UIScrollView。在这个 UIScrollView 里面我有一个子视图，它是一堆 UIViewControllers 的视图。现在的问题是，当我旋转时它没有收到旋转调用。处理此问题的一种方法是将 MainViewController 委托给相应的 UIViewController。有没有更好/优雅的方法来解决这个问题？

我将它添加为我的 UIScrollView 而不是我的 MainViewController 的子视图，并且您不能从 UIView 执行 UIViewControllers 包含。如果我错了，请纠正我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:30:48.233

我认为你违背了[MVC 模式](https://developer.apple.com/library/mac/ipad/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)。视图中不能有控制器；相反，您应该有一个控制器来调解视图和用户输入之间的通信。在您的情况下，您可以将滚动视图设置为`self.view`，`MainViewController`然后将 viewcontrollers 视图添加为子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:21:13.307

观看我在评论中发布的视频：[https ://developer.apple.com/videos/wwdc/2011/?id=102](https://developer.apple.com/videos/wwdc/2011/?id=102)

这是视图控制器包含的简短摘要，这是您正在寻找的设计，不是将所有逻辑组合到一个视图控制器中，也不是对 SDK 中内置的东西使用委托。

视图控制器有一个视图并为该视图提供逻辑，并且很可能是其中的一些子视图。

对于该层次结构中的特定视图，您可能有一个复杂的视图层次结构和复杂的逻辑，这些逻辑保证视图有它自己的视图控制器来控制它和它的子视图。

假设您有一个 MainViewController 并且它的视图是 UIScrollView （或子类）。在该滚动视图中，您可能有各种各样的复杂视图来保证它们自己的控制器，因此您有一个类 SubViewController，它将滚动视图的子视图作为它的视图。

SubViewController 需要使旋转和外观方法回调正常工作，以实现子视图的逻辑并处理布局更改。

```
 [mainViewControllerInstance addChildViewController:subViewControllerInstance]; 
```

可是等等。子视图仍然不在视图层次结构中。

```
 [mainViewControllerInstance.view addSubView:subViewControllerInstance.view]; 
```

您已成功创建了两个视图控制器的有效视图控制器层次结构，并设置了它们视图的关联视图层次结构。

您现在将拥有适当的回调功能，因为 MainViewController 会将它们转发给 SubViewController。

编辑：

有关视图控制器包含的概览，请参阅文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

# html - 同一行上的图像很少

> ID：10941485
> 
> 赞同：0
> 
> 时间：2012-06-08T00:00:50.733
> 
> 标签：html, css

我需要图像将在同一行。如何造型？

```
<div>
<img src=""/>
<img src=""/>
</div> 
```

这当然会给我在同一行但有一些空格的图像。当然，只有当我写`<img src=""\>`在同一行时它才有效。显示内联对我没有帮助。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:13:24.570

建议从一些 css 重置开始，如下所示： [CSS Reset](http://meyerweb.com/eric/tools/css/reset/)

然后使用：

```
img {
    float:left;
    border: 0;
    margin: 0;
} 
```

# statistics - Given measurements from a event series as input, how do I generate an infinite input series with the same profile?

> ID：10941486
> 
> 赞同：3
> 
> 时间：2012-06-08T00:00:55.220
> 
> 标签：statistics, scheduling, simulation, montecarlo, markov-chains

I'm currently working with a system that makes scheduling decisions based on a series of requests and the state of the system.

I would like to take the stream of real inputs, mock out some of the components, and run simulations against the rest. The idea is to use it for planning with respect to system capacity (i.e. when to scale certain components), tracking down certain failure modes, and analyzing the effects of changes to the codebase (i.e. simulations with version A compared to simulations with version B).

I can do everything related to this, except generate a suitable input stream. Replaying the exact input from production hasn't been very helpful because it's hard to get a long enough data stream to tease out some of the behavior that I'm trying to find. In other words, if production falls over at 300 days of input, I don't have enough data to find out until after it fell over. Repeating the same input set has been considered; but after a few initial tries, the developers all agree that the simulation seems to "need more random".

About this particular system:

*   The input is a series of irregularly spaced events (i.e. a stochastic process with discrete time and continuous state space).
*   Properties are not [independent](http://en.wikipedia.org/wiki/Statistically_independent) of each other.
*   Even the more independent of the properties are composites of other properties that will always be, by nature, invisible to me (leading to a [multi-modal distribution](http://en.wikipedia.org/wiki/Multimodal_distribution)).
*   Request interval is not independent of other properties (i.e. lots of requests for small amounts of resources come through in a batch, large requests don't).
*   There are feedback loops in it.
*   It's provably chaotic.

So:

> Given a stream of input events with a certain distribution of various properties (including interval), how do I generate an infinite stream of events with the same distribution across a number of non-independent properties?

Having looked around, I think I need to do a Markov-Chain Monte-Carlo Simulation. My problem is figuring out how to build the Markov-Chain from the existing input data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:27:36.217

也许可以使用[Copula](http://en.wikipedia.org/wiki/Copula_%28probability_theory%29)对输入进行建模。有一些工具可以帮助您这样做，例如，请参阅[本文](http://dx.doi.org/10.4108/ICST.SIMUTOOLS2009.5596)。除此之外，我建议将问题移至[http://stats.stackexchange.com](http://stats.stackexchange.com)，因为这是一个*统计*问题，可能会在那里引起更多关注。

# azure - Azure 网站和 Azure Web 角色有什么区别

> ID：10941488
> 
> 赞同：243
> 
> 时间：2012-06-08T00:01:13.690
> 
> 标签：azure, azure-web-roles, azure-web-app-service

[新的Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)与 ASP.NET MVC 应用程序的传统 Azure Web 角色之间有什么实质性区别？我为什么会选择“网站”而不是“网络角色”，反之亦然？

假设在任何一种情况下我都需要相同的容量（例如 2 个小实例）。除了网站在预览期间有 33% 的临时折扣之外，这些价格似乎相当。

我可以用“网站”做哪些对网络角色有困难或不可能的事情？例如，使用“网站”将多个网站放在一组虚拟机中是否变得容易？我会因为“网站”与“网络角色”而失去任何东西吗？能够微调 IIS？能否在本地使用缓存服务？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-06-08T00:06:18.167

Web 角色为您提供了 Web 应用程序（以前称为网站）之外的多项功能：

*   能够运行提升的启动脚本来安装应用程序、修改注册表设置、安装性能计数器、微调 IIS 等。
*   能够将应用程序分成多个层（可能是前端的 Web 角色，后端处理的工作角色）和独立扩展
*   能够 RDP 进入您的 VM 以进行调试
*   网络隔离
*   专用虚拟 IP 地址，允许云服务中的 Web 角色实例访问受 IP 限制的虚拟机
*   受 ACL 限制的终结点（在 Azure SDK 2.3 中添加，2014 年 4 月）
*   支持任何 TCP/UDP 端口（网站仅限于 TCP 80/443）

不过，Web 应用程序比 Web 角色具有优势：

*   具有部署历史/回滚的近乎即时部署
*   Visual Studio Online、github、本地 git、ftp、CodePlex、DropBox、BitBucket 部署支持
*   能够推出众多 CMS 和框架之一（如 WordPress、Joomla、Django、MediaWiki 等）
*   使用 SQL 数据库或 MySQL
*   从免费层到共享层再到专用层的简单快速扩展
*   网络工作
*   网站内容的备份
*   内置基于 Web 的调试工具（简单的 cmd/powershell 调试控制台、进程浏览器、日志流等诊断工具等）

随着 2014 年 4 月和 2014 年 9 月的推出，现在有一些 Web 应用程序和 Web 角色（以及 Worker 角色）共有的功能，包括：

*   分期+生产槽
*   通配符 DNS、SSL 证书
*   Visual Studio 集成
*   流量管理器支持
*   虚拟网络支持

这是我从网站图库选择表中截取的屏幕截图： ![在此处输入图像描述](../Images/ee8432e78219aee0ca77cb93458ad695.png)

我认为 Web 应用程序是一种快速启动和运行的好方法，您可以在其中从共享资源转移到保留资源。一旦超出此范围，您就可以升级到 Web 角色并根据需要进行扩展。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-08T02:01:22.503

**编辑 2014：对于它的价值，这个答案中的很多信息不再正确 - 请参阅评论。**

在@David 回复中添加更多内容：

使用 Windows Azure 网站，您无法控制 IIS 或 Web 服务器，因为您在同一台机器上使用资源切片以及数百个其他网站，您像其他任何网站一样共享资源，因此无法控制 IIS。

网站共享和 Azure Web 角色之间的最大区别在于，网站被认为是进程绑定的，而角色是虚拟机绑定的。

网站存储在内容共享上，可以从场中的所有“网络服务器”访问，因此不需要复制或类似的东西。

Windows Azure 网站不能有自己的主机名，而只能使用*websitename* .azurewebsites.net 并且您确定可以使用 DNS 提供程序中的 CNAME 设置来路由您的请求，与以前的 Windows Azure 角色完全相同，只有当它们以保留模式运行时. 共享网站不支持 CNAME 设置。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-06-09T11:50:46.347

我刚刚在[http://robdmoore.id.au/blog/2012/06/09/windows-azure-web-sites-vs-web-roles/](http://robdmoore.id.au/blog/2012/06/09/windows-azure-web-sites-vs-web-roles/)上发布了一篇关于这个主题的综合博文。

我的结论摘录：如果您需要庞大的规模、SSL、亚洲或美国西部数据中心、非标准配置（IIS、端口、诊断、安全证书或启动脚本）、RDP 或具有成本效益的工作角色（结合您的 Web 角色），那么您现在必须坚持使用 Web 角色。

否则，网站是一个不错的选择！

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-06-08T05:49:49.847

Azure Web 角色就像一个虚拟专用主机。您将获得一个充当 Web 服务器的 VM，并且您拥有该 VM 实例。

Azure 网站就像一个弹性共享托管服务。您将应用程序部署到不受您控制的 Web 服务器，该服务器还为其他用户的站点提供服务。您可以向上和向下扩展您的站点（需额外付费），以使其在您的资源需求发生变化时更具弹性。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-09T18:30:38.510

还有另一种情况悬而未决：在消除这 500 个异常之后，他们没有说明 Azure 网站处理通配符 CNAME 的能力。我们中的一些人在云服务中使用 Nate 的 Web 角色加速器，因为单行 hack 在 Nate 的软件中提供了通配符子域功能。在我们知道 Azure 网站能够处理它们之前，我们无法移动这些通配符子域应用程序。如果它永远无法做到这一点，那么它在等式的 Web 角色方面就会成为积极因素。另外值得注意的是，由于定价完全相同（在预览折扣到期后），我不确定是否要放弃对 RDC 和事件查看器的访问（仅提及两件事）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-06-27T04:56:41.813

**Azure 网站**使您能够在 Azure 上快速构建高度可扩展的网站。您可以使用 Azure 门户或命令行工具来设置使用流行语言（如 .NET、PHP、Node.js 和 Python）的网站。支持的框架已经部署，不需要更多的安装步骤。Azure 网站库包含许多第三方应用程序，例如 Drupal 和 WordPress，以及开发框架，例如 Django 和 CakePHP。创建站点后，您可以迁移现有网站或构建全新的网站。网站消除了管理物理硬件的需要，并且还提供了多种扩展选项。您可以从共享多租户模型转移到专用机器为传入流量提供服务的标准模式。网站还使您能够与其他 Azure 服务集成，例如 SQL 数据库、服务总线和存储。使用 Azure WebJobs SDK 预览版，您可以添加后台处理。总之，Azure 网站通过支持广泛的语言、开源应用程序和部署方法（FTP、Git、Web 部署或 TFS），可以更轻松地专注于应用程序开发。如果您没有需要云服务或虚拟机的特殊要求，Azure 网站很可能是最佳选择。

**云服务**使您能够在丰富的平台即服务 (PaaS) 环境中创建高可用性、可扩展的 Web 应用程序。与网站不同，云服务首先在 Visual Studio 等开发环境中创建，然后再部署到 Azure。诸如 PHP 之类的框架需要在角色启动时安装框架的自定义部署步骤或任务。云服务的主要优势是能够支持更复杂的多层架构。单个云服务可以由一个前端 Web 角色和一个或多个工作角色组成。每一层都可以独立扩展。对您的 Web 应用程序基础设施的控制水平也有所提高。例如，您可以远程桌面到运行角色实例的机器上。

**虚拟机**使您能够在 Azure 中的虚拟机上运行 Web 应用程序。此功能也称为基础架构即服务 (IaaS)。通过门户创建新的 Windows Server 或 Linux 机器，或上传现有的虚拟机映像。虚拟机让您可以最大程度地控制操作系统、配置以及已安装的软件和服务。这是将复杂的本地 Web 应用程序快速迁移到云的好选择，因为机器可以作为一个整体移动。借助虚拟网络，您还可以将这些虚拟机连接到本地企业网络。与云服务一样，您可以远程访问这些机器，并能够在管理级别执行配置更改。然而，与网站和云服务不同的是，您必须在基础架构级别完全管理您的虚拟机映像和应用程序架构。一个基本示例是您必须将自己的补丁应用到操作系统。

从此链接查看更新和全面的比较：http: [//azure.microsoft.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/](http://azure.microsoft.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-22T10:11:21.303

Azure 网站、Web Worker 和虚拟机是 Windows Azure 上可用的三种不同计算方法。它们在控制和责任级别上有所不同：

*   **Azure 网站**具有最低级别的控制，但你并不关心保持健康的虚拟机和 IIS，因为 Azure 的东西会为你做这件事
*   **Web 角色**为您提供更多控制（流量管理器、远程桌面），但您可以进行更多管理，这意味着您可以通过远程桌面破坏某些东西
*   **虚拟机**让您可以完全控制 VM，因此需要进行最多的管理工作。

没有一个最佳选择，因为这取决于您需要什么级别的控制、您需要什么功能以及您希望保留 Azure 的东西来维护什么。这是一个很大的话题..

请查看这篇文章以获取更多信息以做出更明智的选择：

*   [http://www.windowsazure.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/](http://www.windowsazure.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/)
*   [http://davidpallmann.blogspot.com/2012/06/reintroducing-windows-azure-part-2.html](http://davidpallmann.blogspot.com/2012/06/reintroducing-windows-azure-part-2.html)

它归结为易用性和功能之间的权衡。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-01T18:39:58.320

我发现的另外两件事是为自定义域站点和多租户配置获取 SSL 的成本。

对于网站，您需要在标准实例之上按月付费（小实例是最便宜的选择）。这意味着为了获得自定义域 https 将花费您 ~70/月的小型实例加上 ~41/月的 SSL 支持所有浏览器。

对于 WebRole，您可以获得 XS 实例并免费添加自己的 SSL，这意味着每月约 15 美元，并且您有一个带有 SSL 的自定义域。

对于多租户网站，请查看 [多租户 Azure 动态通配符 CName](https://stackoverflow.com/questions/19888549/multi-tenant-azure-dynamic-wildcard-cname)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-20T14:55:20.537

Web 角色是托管多个网站的虚拟机

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-12T07:31:56.317

这是一个常见的问题，我想摘录一段msdn。

访问缓存、服务总线、存储、SQL Azure 数据库等服务 - 网站：是 WebRole：是

支持 ASP.NET、经典 ASP、Node.js、PHP- 网站：是 WebRole：是

共享内容和配置 - 网站：是 WebRole：否

使用 GIT、FTP 部署代码- 网站：是 WebRole：否

近乎即时的部署-WebSite:Yes WebRole:No

集成 MySQL 即服务支持-网站：是 WebRole：是

多个部署环境（生产和登台）-WebSite:No WebRole:Yes

网络隔离-WebSite:No WebRole:Yes

远程桌面访问服务器-WebSite:No WebRole:Yes

能够以提升的权限运行程序-WebSite:No WebRole:Yes

能够定义/执行启动任务-WebSite:No WebRole:Yes

能够使用不受支持的框架或库-WebSite:No WebRole:Yes

支持 Windows Azure Connect/Windows Azure Network-WebSite:No WebRole:Yes

要获得更多详细信息，请访问此链接：http: [//blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to -use-which.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx)

# c++ - C++ adjacency list of pointers and structs

> ID：10941489
> 
> 赞同：1
> 
> 时间：2012-06-08T00:01:21.990
> 
> 标签：c++, list, struct, directed-graph

Working on adjacency list --> directed weighted graph

One class looks like this, i.e. header:

```
class CGraph;
class CMap {
public:
    //voided constructors and destructors
    //functions one is:
    void SetDirGraph(string commands);

private:
   CGraph* m_myMap;
}; 
```

Second class:

```
class CNode {
public:
    //voided constructor and desctructor
    int m_distance, m_vert;
    bool m_isKnown;
};

typedef struct edges {
    int v2, weight;
} edge;

class CGraph {
public:
    CGraph(int map_size);
    ~CGraph(void);

    void AddMap(int v1, int v2, int weight);
    void AddEndVert(int v2, int weight);

private:
    list<edge> List;
    int size;

public:
    CNode* verts;
}; 
```

I'm reading vertices from a file, and that works. My problem is I am having trouble creating an adjacency list based on the code given. I'm trying to use pointers first that points to a list and it is not working correctly. I don't know how to create my pointers to the list without writing over them.

```
void CMap::SetDirGraph(string command) {
    istringstream buffer(command)
    char ch;
    int num, vert1, vert2, weight; //specify vertices and weight and number of vertices

    buffer>>ch;  //throw away first character (not needed)
    buffer>>num // size of vertices

    while(!buffer.eof()) {   // keep reading until end of line
        buffer>>v1;           // vertex  start
        buffer>>v2;          // vertex end
        buffer>>weight;

        m_myMap = new CGraph(map_size);  //initialize m_myMap.
        m_myMap->verts->m_vert = v1;  // mymap->verts->vert points to first edge
        m_myMap->AddMap(v1, v2, weight);  // create list?
        m_myMap->AddEndVert(v2, weight);  //create list? push v2 and weight on my list using my list.
    }
} 
```

I've tried several different ways and I keep confusing myself, any point in the right direction would be awesome.

EDIT: I have more code too if needed to be produced, just publishing the main stuff. What I mean by "not working" is that I am just writing over the previous vertex. I don't know if I should create an array using m_myMap (tried and still writes over and get a memory error as well). No compiler errors.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:30:00.623

> 我不知道如何在不覆盖它们的情况下创建指向列表的指针。

除了您的应用程序之外，这个问题的答案是`new`运算符，我假设您知道，因为您在示例代码中使用了它。像这样的代码在堆上`int * a = new int(42);`分配内存`int`，你有责任在不再需要它时清理它。因此，您可以完全控制变量可用的时间。`int x = 42; int * a = &x;`另一方面，当`x`它超出范围时会自动清理，并且`a`将是一个指向不再有有意义数据的内存块的指针。如果你试图取消引用它，你会遇到未定义的行为，而且，如果你幸运的话，你的程序会崩溃。

如果您可以使用 C++11 标准或提供智能指针的库，那么您应该尽可能喜欢那些而不是自己管理指针。智能指针是一个对象，它保存分配的内存并在它被破坏时自动释放它。更具体的信息很大程度上取决于您使用的是哪种智能指针。使用智能指针的原因是自己进行管理既繁琐又容易出错。如果您不`delete`使用已分配的指针，您的应用程序将继续分配更多内存，直到有一天它崩溃（取决于分配的频率和内存量）；这称为泄漏。如果您`delete`多次调用，您的程序也会退出。`shared_ptr`以下是您的应用程序中的 C++11 示例：

```
class CMap
{
  private:
    std::shared_ptr<CGraph> m_myMap;
  // etc.
};

// in SetDirGraph
m_myMap.reset(          // if the smart pointer has previously been managing
                        // memory, it will free it before allocating new
  new CGraph(map_size)  // allocate CGraph as before
); 
```

除此之外，希望能回答您的问题的是，我遇到了与您的代码有关的几个潜在问题：

*   **绝对错误**：在`SetDirGraph`你设置`m_myMap->verts->m_vert = v1`。`m_myMap->verts`是一个指针。您刚刚创建`m_myMap`，因此`verts`未初始化，因此指向随机的内存块。然后，您尝试通过取消引用它`m_myMap->verts->m_vert = v1`。这行不通。您需要先创建`verts`，即`verts = new CNode;`.

*   `typedef struct edges { /* etc */ } edge;`是一个 C 构造，在 C++ 中不需要`typedef`包装器。它确实有效，但它确实是多余的，许多这些结构只会污染你正在工作的命名空间。

*   你真的需要指针吗？您提供的片段没有暗示您为什么需要使用它们。您将希望将指针的使用减少到最低限度（或至少使用智能指针，见上文）

# php - PHP 条件字符串替换 str_replace

> ID：10941490
> 
> 赞同：2
> 
> 时间：2012-06-08T00:01:30.920
> 
> 标签：php, regex, string, preg-replace, str-replace

这是我试图用“-”替换*单词之间的空格的字符串。*

```
$mystring = "Color red, Color blue, Color black";
$newstring = str_replace(' ', '-', $mystring); 
```

我想使用 str_replace 函数实现的是：

```
"Color-red, Color-blue, Color-black"; 
```

但这会返回：

```
"Color-red,-Color-blue,-Color-black"; 
```

我想我需要一个条件来替换“不在逗号之后”或“在两个单词之间”的空格。但我不知道。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:03:52.650

`(?<!,)\s`

这使用[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)来匹配所有`\s`不跟a的空格（）`,`。

```
preg_replace("/(?<!,)\s/", '-', $mystring); 
```

[在这里玩正则表达式](http://regexr.com?316rg)。

# facebook - Codeigniter facebook login

> ID：10941495
> 
> 赞同：1
> 
> 时间：2012-06-08T00:02:40.453
> 
> 标签：facebook, codeigniter

I'm trying to use the code from this Tutorial: [http://www.betterhelpworld.com/codeigniter/how-to-use-facebook-php-sdk-v-3-0-0-with-codeigniter](http://www.betterhelpworld.com/codeigniter/how-to-use-facebook-php-sdk-v-3-0-0-with-codeigniter) to do login via facebook: My controller code looks like:

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

 class User extends CI_Controller {

public function __construct()
{
    parent::__construct(); 
}   

function index() {
    $this->loginByFacebook();
}

function facebook() {
    $this->load->library('fb_connect');
    if (!$this->fb_connect->user_id) {
        echo 'not ok';
    }
    else 
    {
        $fb_uid = $this->fb_connect->user_id;
        $fb_usr = $this->fb_connect->user;
        print_r($fb_usr); // Printing to show all available variables
        // Do your processing here after login. May be you can check if first time user then can register in your database. 
        echo 'ok';          
    }

}

function loginByFacebook() {
    $this->load->library('fb_connect');
    $param['redirect_uri'] = site_url("user/facebook");
    $param['scope'] = 'email, publish_stream,user_birthday,offline_access'; // Set the required access here
    redirect($this->fb_connect->getLoginUrl($param));
}
} 
```

After calling the login I'll be redirected to facebook, asked for permissions and redirected to my application but then I get always the not ok message string which means, that the user is not connected. So what am I doing wrong?

# linq-to-objects - 将 Linq 用于具有某些集合的对象 - 未找到“选择”

> ID：10941499
> 
> 赞同：0
> 
> 时间：2012-06-08T00:03:04.260
> 
> 标签：linq-to-objects

我遇到了一些似乎不支持 Linq to Objects 的集合实例。最近，使用默认的 ASP.Net Membership Provider，此代码：

```
var membershipUsers = (from m in Membership.FindUsersByName(userName) select m); 
```

产生编译器错误

> 找不到源类型“System.Web.Security.MembershipUserCollection”的查询模式的实现。未找到“选择”。考虑明确指定范围变量“m”的类型。

查询模式的实现在哪里？

我可以创建自己的实现吗？如何？

如何“明确指定”范围变量的类型，这会有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:43:36.200

这个集合的问题在于它实现了非通用 IEnumberable 接口。Linq 扩展方法不适用于此非通用接口，这就是您的代码无法编译的原因。您可以在这里做两件事。首先查看[此链接](http://msmvps.com/blogs/matthieu/archive/2009/04/01/how-to-use-linq-extension-methods-on-non-generic-ienumerable.aspx)，它具有此非通用接口的 linq 方法的实现。

另一种解决方案可能是使用 IEnumerable 确实具有的 Cast 方法：

```
 var linqableMembershipUsers = membershipUsers.Cast<MembershipUser>(); 
```

现在您可以使用您想要的任何一种 linq 方法。

# javascript - 在没有 HTML 事件属性的情况下检测 Google Gadget 中的 onmouseout

> ID：10941501
> 
> 赞同：0
> 
> 时间：2012-06-08T00:03:05.550
> 
> 标签：javascript, html, dom-events, dhtml, google-gadget

`id="myDiv"`我需要一个 JavaScript 方法来检测鼠标何时在`if()`语句中离开元素。

我**不能**`onmouseout`使用嵌入在我的 HTML 中的 JS事件。如果可能的话，我必须能够检测到语句`onmouseout`内部。`if()`

这是我正在考虑的基本语法，但它没有意义（并且一直没有工作）：

```
if(document.getElementById("myDiv").onmouseout) // if mouse leaves <div id="myDiv">
{
  //code to be executed
} 
```

我更喜欢合法的“Google Gadget JavaScript”，可能略有不同，但如果您知道 JavaScript 解决方案，欢迎分享！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:07:53.733

它应该像这样使用：

```
document.getElementById("myDiv").onmouseout = function(){
    //code to be executed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:16:52.217

也许现在我明白你的意思了...

```
document.getElementById("myDiv").onmouseout = function(e) {
    if (e.stopPropagation) e.stopPropagation();
    else e.cancelBubble = true;
    // code to be executed
}; 
```

这样，`onmouseout`事件就不会传播到`#myDiv`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T00:18:10.890

得到它与德里克的建议一起工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<Module>
<ModulePrefs title="hello world example" />
<Content type="html"><![CDATA[
<div id="myDiv">Hello, world!</div>
<script type="text/javascript">
_gel("myDiv").onmouseout = function(getScroll){
_gel("myDiv").innerHTML="working!";
}
</script>
]]></Content>
</Module> 
```

# c++ - 在 C++ 中的函数中调整矢量大小

> ID：10941504
> 
> 赞同：0
> 
> 时间：2012-06-08T00:03:28.030
> 
> 标签：c++, vector, while-loop, cin

这段代码来自《Data Structures and Problem Solving in C++》（2003）一书

```
void getInts( vector<int> & array )
{

    int itemsRead = 0;
    int inputVal;

    cout << "Enter any number of integers: ";

    while( cin >> inputVal )
    {
        if( itemsRead == array.size( ) )
        array.resize( array.size( ) * 2 + 1 ) ;
        array[ itemsRead++ ] = inputVal;

    }

    array.resize( itemsRead ) ; 

}

int main()
{

    vector<int> array;

    getInts( array ) ;

    for( int i = 0; i < array.size( ) ; i++ )
        cout << array[ i ] << endl;

    return 0;

} 
```

当我在控制台中输入一个数字并按 Enter 键时，程序什么也不做。之后，如果我输入 CTRL+Z 作为 EOF，程序会给我我输入的数字。由于我正在调整向量的大小并将 inputValue 赋予它的每个部分，因此我希望看到许多数字而不是一个，就像在我键入 CTRL+Z 之前程序生成的一样多，但这不会发生。毕竟，矢量的大小似乎是 1。这是什么原因？

另外我的另一个问题是，当我使用 while 循环作为

```
while( cin >> inputVal ) 
```

在我输入 CTRL+Z 之前，程序是否可以正常工作。或者输入 0 会做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:28:49.810

while 循环将继续，而 cin 可以从终端读取整数。每次按下回车键时，它都会尝试读取一个整数。

每个读取的整数都附加到向量中。

如果输入的不是整数，则将设置 cin 上的失败位。

`cin >> inputVal`返回一个 istream，它提供，如果设置了失败位 `operator void* ()`，它将返回。`0`

这就是为什么如果您输入的不是整数，例如，while 循环就会中断。'q'

# mysql - MySQL：不显示结果 NULL 到 JOIN LEFT/RIGTH

> ID：10941506
> 
> 赞同：0
> 
> 时间：2012-06-08T00:03:35.797
> 
> 标签：mysql, select, join, left-join

我是这样做的：

```
SELECT * FROM ( 
               SELECT DISTINCT (u2.email) email FROM  `users` u1 LEFT JOIN 
                       users u2 ON  u1.email = u2.email AND u1.id <> u2.id
               )users  WHERE email IS NOT NULL 
```

有合约公式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:07:20.423

如果您不想要 NULL 结果，请使用 INNER JOIN。

```
SELECT DISTINCT(u2.email) FROM users u1 
    INNER JOIN users u2 ON u1.email = u2.email AND u1.id <> u2.id 
```

如果必须使用 LEFT JOIN：

```
SELECT DISTINCT(u2.email) FROM users u1 
    LEFT JOIN users u2 ON u1.email = u2.email AND u1.id <> u2.id 
    WHERE u2.email IS NOT NULL 
```

# php - “运行”一个 PHP 文件

> ID：10941511
> 
> 赞同：0
> 
> 时间：2012-06-08T00:04:22.300
> 
> 标签：php, windows, scheduled-tasks

我认为这必须是一个非常简单的问题，但我没有为我想要完成的事情找到任何答案。

我有一个将发送电子邮件的 PHP 文件。这部分有效。问题是，我需要这个 PHP 文件每 5 分钟“运行”一次。我的问题不在于日程安排，我很确定我知道该怎么做。我的问题是 PHP 文件的“运行”。我的脑海中完全没有关于如何“执行”PHP 文件的任何信息，而不仅仅是让它在浏览器中打开并到处吐出它的代码。我知道这个 PHP 文件有效，因为当我在 Dreamweaver 中处理它时，我单击“发现”链接，其中显示“此文档的动态相关文件可能已更改，应该由服务器重新发现”它执行这个 PHP 文件，我收到了我的电子邮件。我试过通过这样的命令[行](https://stackoverflow.com/questions/4701861/how-do-i-run-a-php-script-using-windows-schedule-task)但它所做的只是吐出 php 代码，就好像我在浏览器中运行它一样。实际上什么都没有发送。有什么方法可以改变 PHP 文件本身的格式化方式，使其能够做到这一点？当我单击“发现”使其工作时，Dreamweaver 正在做什么？我觉得这应该是一件简单的事情，而且我不理解它的疯狂......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:10:49.243

假设您使用默认设置安装了 PHP，PHP 文件夹应该在您的 PATH 变量中。在这种情况下，您所要做的就是运行命令`php filename.php`。

如果没有，您必须将命令定向到安装 PHP 的位置，可能类似于`"C:\Program Files\PHP\php.exe" filename.php`- 无论哪种方式，您所做的只是在文件上调用 PHP 二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:19:31.967

你有选择。如果它是您可以通过浏览器访问的网页（并且按照您的预期发送电子邮件），您可以每五分钟通过 HTTP 请求该页面。就我个人而言，我会使用 cURL（例如`curl.exe http://localhost/myfile.php`）来做到这一点。[您可以在此处](http://curl.haxx.se/download.html)找到 Windows 二进制文件。你也可以使用 PowerShell 什么的。

如果这不是一个网页，或者如果您只是不想走这条路，您可以通过 PHP 的命令行界面 (CLI) 执行 PHP，正如您已经知道的那样。`C:\path\to\php.exe myfile.php`将执行您的代码并将输出吐出到 STDOUT。如果除了发送电子邮件之外一切正常——我猜你正在这样做[`mail`](http://php.net/mail)——问题可能出在你的 PHP 配置上。默认情况下，PHP 在[这些位置](http://www.php.net/manual/en/configuration.file.php)查找 php.ini 文件。您还可以明确告诉 PHP CLI 使用哪个 php.ini 文件和[`-c`选项](http://www.php.net/manual/en/features.commandline.options.php)（例如，`php.exe -c C:\path\to\php.ini myfile.php`）。当然，您需要在 php.ini 中正确配置所有内容才能发送邮件。这在 Windows 上可能比在可用的普通 Linux 机器上要[复杂](https://stackoverflow.com/a/10582735/1411510)`sendmail`一些。

# c# - 我可以更改 Visual Studio 2010 运行时 T4 文本模板输出的 cs 文件的默认自动生成后缀吗？

> ID：10941518
> 
> 赞同：0
> 
> 时间：2012-06-08T00:05:04.593
> 
> 标签：c#, visual-studio-2010, t4, texttemplate

我正在使用运行时 T4 文本模板。我希望预处理器生成的 C# 文件具有 .tt.cs 的输出扩展名，但是，默认情况下，它只有 .cs 的扩展名。如果这是一个设计时文本模板，我可以添加一个输出扩展指令来强制执行此行为。但是，这些指令似乎对运行时模板没有任何影响。有谁知道使用运行时模板完成此任务的方法？

```
<#@ output extension=".tt.cs" #> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:49:18.013

没有简单的方法，但可以做到。

首先创建您自己的单个文件生成器，从 Microsoft.VisualStudio.TextTemplationg.VSHost.10.0.dll 中的 TemplatePreprocessor 派生，并将其注册到 Visual Studio。

然后覆盖 ProcessTemplate() 并在调用基本实现后，使用您想要的任何扩展名调用 SetFileExtension。

不过，对于这么小的变化，这是很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:26:54.527

我在此[链接](http://www.olegsych.com/2009/09/t4-preprocessed-text-templates/)中找到了以下内容。可能对您有用，因为他展示了如何使用预处理模板设置 .cs，但前提是您从另一个模板中调用模板。如果从 C# 或 VB 代码中运行，还没有发现任何显示它是可能的。

*<#@ output #> 指令似乎对预处理模板没有影响。当预处理模板包含该指令时，不会产生错误。托管应用程序负责更改输出文件的扩展名。*

# python - 如何相对于索引在python中与列表相交

> ID：10941521
> 
> 赞同：4
> 
> 时间：2012-06-08T00:05:31.193
> 
> 标签：python, list

我知道这个问题可能看起来像重复。但我很难解决这个问题，我找不到对我的案例有用的解决方案

我正在使用 python 实现一个遗传算法来解决旅行商问题

假设我们有这些列表（旅游）

```
a = [1,0,2,5,4,3,1]
b = [1,2,5,4,3,0,1]
c = [1,3,5,4,2,0,1] 
```

如您所见，[5,4] 在整个 3 个列表中重复，常规交集将返回列表中的所有元素。

我想要一些函数，比如 intersect_list(a,b)

返回 [5,4]

有没有内置的python方法来找到这个？或者你有什么建议吗？

**注意**：我知道我可以循环它来解决这个问题，但请记住，就我而言，我有大约 400 个列表。每个长度为 401。

换句话说：我想看看这些列表之间的共同路径。

请让我知道是否有任何不清楚的地方提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:25:43.797

在查看了@pyfunc 发布的链接后，我想到了以下内容：

```
def shortest_of(lists):
    return min(lists, key=len)

def contains_sublist(lst, sublst):
    n = len(sublst)
    return any((sublst == lst[i:i+n]) for i in xrange(len(lst)-n+1)) 

def longest_common(lists):
    if not lists:
        return ()
    res = set()    
    base = shortest_of(lists)
    length = len(base)

    for i in xrange(length, 0, -1):
        for j in xrange(length - i + 1):
            candidate = ', ' + str(base[j:i+j]).strip('[]') + ','
            #candidate = base[j:i+j]  

            for alist in lists:
                if not candidate in ', ' + str(alist).strip('[]') + ',':
                #if not contains_sublist(alist, candidate):   
                    break
            else:
                res.add(tuple([int(a) for a in candidate[2:-1].split(',')]))
                #res.add(tuple(candidate))

        if res:
            return tuple(res)    

    return ()

if __name__ == '__main__':
    a = [1,0,2,5,4,3,1]
    b = [1,2,5,4,3,0,1]
    c = [1,3,5,4,2,0,1]

    print longest_common([a,b,c])
    print longest_common([b,c]) 
```

输出：

```
((5, 4),)
((0, 1), (5, 4)) 
```

### 编辑：

更新了使用字符串转换和匹配的解决方案，因为它恰好更快。以前的解决方案部分已被注释掉。此外，它现在提供了所有可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:10:42.980

一个想法是，您可以将列表转换为字符串

```
",".join(list) 
```

然后将问题转换为两个字符串中最长匹配的子字符串。

解决方案和讨论在 SO 上有：

1.  [来自两个以上字符串的最长公共子字符串 - Python](https://stackoverflow.com/questions/2892931/longest-common-substring-from-more-than-two-strings-python)
2.  [http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring#Python](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring#Python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T00:46:12.720

400 个长度为 400 的列表并不是什么大问题。首先将每个序列分解为所有可能的子序列（长度列表`N`围绕`0.5 * N ** 2`可能的子序列）。然后将它们全部相交并取最长的一个。

```
a = [1,0,2,5,4,3,1]
b = [1,2,5,4,3,0,1]
c = [1,3,5,4,2,0,1]

def longest_match_finder(lists):
    matches = []
    for a in lists:
        lengths = set()
        for leng in xrange(1,len(a)+1):
            lengths = lengths | set(tuple(a[i:i+leng]) 
                                    for i in xrange(len(a)-leng+1))
        matches.append(lengths)
    return max(set.intersection(*matches), key=len)

print longest_match_finder([a,b,c])
#Output:
(5, 4) 
```

使用`400`每个带有`400`元素的列表，这需要`280 seconds`（在我非常旧的机器上）。但是，如果我们仅在一个列表上使用相同的方法，但将其子序列以及所有其他列表转换为字符串（如 @pyfunc 首次发布的那样），使用`str(list).strip('[]')`，我们可以更快地搜索。相同的测试运行在`21 seconds`：

```
import ast

def longest_match_finder_2(lists):
    a = lists[0]
    lengths = set()
    for leng in xrange(1,len(a)+1):
        lengths = lengths | set(str(a[i:i+leng]).strip('[]') 
                                for i in xrange(len(a)-leng+1))
    for seq in lengths.copy():
        if not all([seq in str(i).strip('[]') for i in lists[1:]]):
            lengths.remove(seq)
    return ast.literal_eval(max(lengths, key=len)) 
```

我们可以`ast.literal_eval()`在最后（安全地）使用来获取列表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T00:18:21.360

您可以使用 list [zip](http://docs.python.org/library/functions.html#zip)函数将它们压缩成元组并返回所有元素都相同的元组。

```
a = [1,0,2,5,4,3,1]
b = [1,2,5,4,3,0,1]
c = [1,3,5,4,2,0,1]
zipped_tuples = zip(a, b, c) 
```

您可以尝试利用它来获取位置交叉点。

# objective-c - 使用 NSOperation 调用 performSelectorOnMainThread

> ID：10941522
> 
> 赞同：0
> 
> 时间：2012-06-08T00:05:59.087
> 
> 标签：objective-c, ios, multithreading, nsthread, nsoperation

我有一个问题，我有一个在后台线程中运行的 NSOperation，并且在该执行的执行循环中，我调用 performSelectorOnMainThread 来执行 NSURLRequest，但是主线程永远不会得到执行该 NSURLRequest 的调用。

nsoperation 的目的是从核心数据实体构建一个 json 字符串，由于它是一个大对象，这可能需要相当长的时间。我通过仅传递托管对象 ID 的引用并使用不同的托管对象上下文来确保核心数据线程安全，因此无需担心。

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:24:51.123

确保您的 NSOperation init 函数没有使用来自错误线程的对象，这让我在使用 Core Data 之前遇到了麻烦。如果我记得，init 函数是在主线程上调用的，所以当我在那里初始化我的对象上下文并尝试在 main() 中访问它时，它会使后台线程崩溃。[它可以通过打印当前线程 ID](https://stackoverflow.com/questions/1616572/getting-thread-id-of-current-method-call)来帮助调试查看代码的哪些线程部分正在运行。

# port - 我的 8080 被监听了吗？

> ID：10941524
> 
> 赞同：4
> 
> 时间：2012-06-08T00:06:16.213
> 
> 标签：port, ubuntu-10.10

我在 ubuntu 10.10 上运行以下命令。谁能告诉我结果是什么意思？</p>

> ubuntu@ip-XX-XXX-XX-XXX:~$ netstat -nao | grep 80
> 
> tcp 0 0 0.0.0.0:80 0.0.0.0:* 监听
> 关闭 (0.00/0/0)
> 
> tcp6 0 0 127.0.0.1:8005 :::* LISTEN
> off (0.00/0/0)
> 
> tcp6 0 0 :::8009 :::* LISTEN
> off (0.00/0/0)
> 
> tcp6 0 0 :::8080 :::* LISTEN
> off (0.00/0/0)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T00:22:22.260

您有 4 个监听开放端口。这里，tcp 代表传输控制协议。

**tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN off (0.00/0/0)** - 接受端口 80 上的所有传入 ipv4 连接。

**tcp6 0 0 127.0.0.1:8005 :::* LISTEN off (0.00/0/0)** - 在 localhost 循环接口上接受传入的 ipV6 连接（您只能从 localhost 插入数据包）。

**tcp6 0 0 :::8009 :::* LISTEN off (0.00/0/0)** - 接受端口 8009 上的所有传入 ipV6 连接。

**tcp6 0 0 :::8080 :::* LISTEN - off (0.00/0/0)** - 接受端口 8080 上的所有传入 ipV6 连接。

因此，您的端口 8080 正在侦听，但在 ipv6 堆栈上。

# mysql - 在 MySQL 中将 4 字节的 `binary(4)` 转换为无符号整数

> ID：10941530
> 
> 赞同：1
> 
> 时间：2012-06-08T00:07:02.447
> 
> 标签：mysql, binary, integer

我将 IPv4 地址存储在 DB 中`VARBINARY(4)`：四个字节的无符号整数。非常奇怪的方法，是的:)

如何在 MySQL 中将其转换为无符号整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:20:00.233

糟糕且缓慢的解决方案：`CONV(HEX(table.ip),16,10)`

# asp.net - 如何将现有 Azure Web 角色转换为新型 Azure 网站？

> ID：10941536
> 
> 赞同：6
> 
> 时间：2012-06-08T00:07:44.723
> 
> 标签：asp.net, asp.net-mvc, azure, azure-web-app-service

是否可以将现有的 Azure Web 角色（即 ASP.NET MVC）转换为新的[Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)？除了创建一个新项目并将代码复制到新项目以使其看起来像旧应用程序之外，就是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:52:12.410

是的你是对的。Windows Azure 网站是与同一机器上的其他人共享的站点，您无法远程访问。你肯定可以直接从 Git 或 Powershell 管理网站。此外，新的 Azure 网站设计不使用任何 Web 角色模型，因此您只需将 ASP.NET 网站应用程序导出为新的 ASP.NET 网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:17:05.640

我不确定您为什么要创建一个新项目。从技术上讲，Windows Azure Web 角色项目只是一个 ASP.NET 站点（或 WCF 应用程序），它具有一个额外的项目类型，即云服务项目。

从技术上讲，如果您删除云服务项目，您将拥有一个可以在 Windows Azure 网站中运行的站点，但需要注意以下几点：

1.  启动任务是云服务模型的一部分，将不可用
2.  WebRole.cs aka RoleEntryPoint 不会执行
3.  如果您在项目中拥有 Worker 角色，那么 Windows Azure 网站中就没有相应的角色。

大多数其他功能都可以使用，除了少数例外（但请记住，它目前处于预览阶段）。

# android - 具有嵌套布局和 Android 的 RelativeLayout

> ID：10941539
> 
> 赞同：0
> 
> 时间：2012-06-08T00:08:08.793
> 
> 标签：android, eclipse

我的问题是：在android编程中可以在布局中嵌套布局吗？我遇到的问题是我的应用程序崩溃了，我唯一添加的是：

```
 RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,RelativeLayout.TRUE);
    newSheetLayoutH.setLayoutParams(params); 
```

newSheetLayoutH 是嵌套在另一个布局中的布局。

我的目标是创建第二个布局（这是有问题的），该布局将放置在主布局的底部，即 newSheetLayoutV，并居中（不是强制居中，但赞赏）。

此外，如果有一种方法可以将按钮（三个按钮）沿水平布局扔到 newSheetLayoutV 的底角。

如果需要更多信息，我会尽力提供。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:24:05.913

newSheetLayoutH 嵌套在哪种布局中？

***确保以下内容为真***

当您要设置`LayoutParams`某个视图的 Layout Parameters ( ) 时，这些 LayoutParams 的类型应该与您要为其设置 LayoutParams 的视图的父级相同。

例如，如果您有一个 LinearLayout 类型的父级，则任何子级都应该具有 LinearLayout.LayoutParams 类型的 LayoutParams。

# jquery - 如何隐藏 Twitter Bootstrap 下拉菜单

> ID：10941540
> 
> 赞同：95
> 
> 时间：2012-06-08T00:08:17.030
> 
> 标签：jquery, twitter-bootstrap

这越来越烦人了——当我点击 Bootstrap 下拉菜单中的一个项目时，下拉菜单并没有关闭。当您单击下拉项目时，我已将其设置为打开 Facebox 灯箱，但它存在问题。

![在此处输入图像描述](../Images/1dcc48e85f48d73b52aa0e1414cbb4df.png)

* * *

## *我试过的*

单击该项目时，我尝试这样做：

```
 $('.dropdown.open').removeClass('open');
    $('.dropdown-menu').hide(); 
```

这隐藏了它，但由于某种原因它不会再次打开。

如您所见，我确实需要关闭下拉菜单，因为它保持打开时看起来很糟糕（主要是因为`z-index`下拉菜单的 高于 Facebox 模态框覆盖。

* * *

## *为什么我不使用 Bootstrap 的内置模态框*

如果你想知道为什么我不使用*Bootstrap 内置*的漂亮的模态框，那是因为：

1.  它无法使用 AJAX 将内容加载到其中。
2.  您必须每次为模态输入 HTML；使用 Facebox，您可以做一个简单的事情：`$.facebox({ajax:'/assets/ajax/dialogs/dialog?type=block-user&id=1234567'});`
3.  它使用 CSS3 动画来制作动画（看起来很不错），但在非 CSS3 浏览器中它只是显示，看起来不太好；Facebox 使用 JavaScript 淡入，因此它适用于所有浏览器。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-06-08T00:18:33.277

试试这个：

```
$('.dropdown.open .dropdown-toggle').dropdown('toggle'); 
```

这也可能对您有用：

```
$('[data-toggle="dropdown"]').parent().removeClass('open'); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-22T19:36:04.773

从这里尝试了大多数选项，但没有一个真正适合我。（`$('.dropdown.open').removeClass('open');`确实隐藏了它，但是如果您在单击其他任何内容之前将鼠标悬停，它会再次出现。

所以我决定用`$("body").trigger("click")`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-03T21:55:39.510

```
$('.open').removeClass('open'); 
```

引导程序 4（2018 年 10 月）：

```
$('.show').removeClass('show'); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-21T06:03:15.660

您只需要`$('.dropdown.open').removeClass('open');`删除隐藏下拉菜单的第二行。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-16T10:46:23.993

这可以通过将属性**data-toggle="dropdown"**添加到锚标记中来完成，而无需编写 JavaScript 代码，如下所示：

```
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
    Dropdown
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
    <li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-toggle="dropdown">Action</a></li>
    <li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-toggle="dropdown">Another action</a></li>
  </ul>
</div>
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-05-11T22:05:47.153

这对我有用：

```
$(this).closest(".dropdown").find(".dropdown-toggle").dropdown("toggle"); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-19T15:46:54.477

选择的答案对我不起作用，但我认为这是因为较新版本的 Bootstrap。我最终写了这个：

```
$('.btn-navbar').addClass('collapsed');
$('.nav-collapse').removeClass('in').css('height', '0'); 
```

希望这对将来的其他人有所帮助。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-12-09T22:58:14.527

试试这个！

```
.removeClass("open").trigger("hide.bs.dropdown").trigger("hidden.bs.dropdown"); 
```

或者

```
$(clicked_element).trigger("click"); 
```

它总是对我有用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-10-18T17:52:28.843

为什么使用我的方法，因为如果用户离开了 div，这个方法允许用户在子菜单消失之前有一定的延迟。就像使用 superfish 插件一样。

1）首先下载hover intent javascript

[链接在这里：悬停意图javascript](http://cherne.net/brian/resources/jquery.hoverIntent.html)

2）这是我要执行的代码

```
$(document).ready(function(){

        var config = {    
            over: showBootrapSubmenu,   
            timeout: 500,
            out: hideBootrapSubmenu  
        };

        function showBootrapSubmenu(){  
             $(this).addClass('open');
        }
        function hideBootrapSubmenu(){  
          $(this).removeClass('open');
            }

        //Hover intent for Submenus
        $(".dropdown").hoverIntent(config);

    }); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-26T21:36:35.297

```
$('.dropdown.open').removeClass('open'); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-12-01T23:32:55.013

阅读文档并使用 JavaScript 可以使用 toggle 方法完成：

```
$('.button-class').on('click',function(e) {
    e.preventDefault();
    $('.dropdown-class').dropdown('toggle');
} 
```

你可以阅读它： http: [//getbootstrap.com/javascript/#dropdowns-methods](http://getbootstrap.com/javascript/#dropdowns-methods)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-07-10T14:20:37.830

回想起来可能已经添加了它（尽管该功能*没有* [记录在案](https://getbootstrap.com/docs/4.0/components/dropdowns/#methods)，即使在 Bootstrap 4.3.1 中也是如此），但您可以简单地使用`hide`参数调用它。只需确保在切换器元素上调用它即可。像这样：

```
$('.dropdown-toggle').dropdown('hide');
// or
$('[data-toggle="dropdown"]').dropdown('hide'); 
```

当然，这也与`show`.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-06-08T07:22:17.820

尝试使用 Bootstrap Modal 打开 HTML，我使用以下代码：

```
$(function() {
     $('a[data-toggle=modal]').click(function(e) {
          e.preventDefault();
          var page = $(e.target).attr('href');
          var url = page.replace('#','');
          $(page).on('show', function () {
              $.ajax({
              url: "/path_to/"+url+".php/html/...",
              cache: false,
              success: function(obj){
                   $(page).css('z-index', '1999');
                   $(page).html(obj);
              }
              });
         })
     });
}); 
```

链接是这样的：

```
<a href="#my_page" data-toggle="modal">PAGE</a> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-03-08T09:57:29.833

这是我关于如何关闭按钮下拉菜单和切换按钮的解决方案：

```
$(".btn-group.open", this)
    .trigger("click")
    .children("a.dropdown-toggle")
    .trigger("blur") 
```

其中“this”是按钮组的全局容器。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-09-27T09:08:41.190

引导程序 4.1：

```
$(".dropdown-link").closest(".dropdown-menu").removeClass('show'); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-02-22T15:49:08.143

按属性选择是缓慢的方式。这是隐藏打开的下拉列表的最快解决方案：

```
$(".dropdown-menu.show").parent().dropdown("toggle"); 
```

或使用以下，如果 .dropdown-menu 不是下一个子元素（找到最近的父下拉控件）：

```
$(".dropdown-menu.show").closest(".dropdown").dropdown("toggle"); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-09-05T18:45:37.047

这对我有用，我有一个导航栏和几个下拉菜单。

```
$(document).ready(function () {
    $('a.dropdown-toggle').each(function(){
        $(this).on("click", function () {
            $('li.dropdown').each(function () {
                $(this).removeClass('open');
            });
        });
    });
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-08-30T02:09:08.633

最简单的方法是：添加一个隐藏标签：

```
<label class="hide_dropdown" display='hide'></label> 
```

然后每次你想隐藏下拉菜单时，你打电话：

```
$(".hide_dropdown").trigger('click'); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-01-02T15:38:46.543

不知道这是否会帮助任何人（也许它对我的情况太具体，而不是这个问题）但对我来说这有效：

```
$('.input-group.open').removeClass('open'); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-01-10T23:43:05.917

点击后：

```
// Hide mobile menu
$('.in,.open').removeClass('in open');
// Hide dropdown
$('.dropdown-menu').css('display','none');
setTimeout(function(){
    $('.dropdown-menu').css('display','');
},100); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-04-13T03:37:58.230

在锚标记上使用 class="dropdown-toggle" ，然后当您单击锚标记时，它将关闭引导下拉菜单。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-07-21T10:21:14.640

嘿，这个简单的 jQuery 技巧应该会有所帮助。

```
$(".dropdown li a").click(function(){
$(".dropdown").removeClass("open");
}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-11-13T09:05:10.423

最简单的方法：

```
 $('.navbar-collapse a').click(function(){
    $('.navbar-toggle').trigger('click')
  }) 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-11-02T08:54:23.717

您可以在当前的事件处理程序中使用此代码

```
$('.in,.open').removeClass('in open'); 
```

在我的场景中，我在 ajax 调用完成时使用

```
jQuery(document).on('click', ".woocommerce-mini-cart__buttons .wc-forward.checkout", function() {
    var _this = jQuery(this);
    ajax_call(_this.attr("data-ajax-href"), "checkout-detail");
    $('.in,.open').removeClass('in open');
    return false;
}); 
```

# .net - 解决方案中两个项目的 asp.net 成员资格

> ID：10941541
> 
> 赞同：0
> 
> 时间：2012-06-08T00:08:28.560
> 
> 标签：.net, asp.net-membership

我有两个 Web 项目都使用同一个数据库，并且它们在同一个解决方案中。其中一个使用 asp.net 会员资格。我还想包括另一个。我该如何管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:13:20.997

我最近为嵌套应用程序做了这个。它不是太难。

除了凯尔的观点，您还需要：

*   确保两个 Web 应用程序的 machineKeys 相同
*   配置 loginUrl 以解析到相同的绝对路径
*   如果您使用 cookie，则需要确保将域设置为两个 Web 应用程序都可用的值
*   同样对于 cookie，如果您的 Web 应用程序嵌套在域中的不同级别，请确保将路径属性设置为“/”

有关更多详细信息，请参阅[此博客文章](http://dylanbeattie.blogspot.com/2012/03/cross-domain-forms-authentication-with.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:21:44.167

将第二个应用程序配置为使用相同的成员资格数据库。`applicationName`将 web.config 中的成员资格提供程序配置的属性更改为与第一个应用程序不同的内容。

# javascript - 当其中一个参数中有空格时，nodeJS child_process.spawn 不起作用

> ID：10941545
> 
> 赞同：15
> 
> 时间：2012-06-08T00:08:56.923
> 
> 标签：javascript, node.js

我正在尝试使用该`child_process.spawn`功能。语法是

```
child_process.spawn(command, args=[], [options]) 
```

每当我在 args 数组的任何元素中包含空格时，该命令都会简单地发出参数。这是我用来测试它的一些代码

```
var spawn = require("child_process").spawn

console.log("This works");
var watcher = spawn("ls", ["-l"]);
watcher.stdout.on('data', function(data) {
    process.stdout.write(data.toString());
});

console.log("This does not work");
watcher = spawn("ls", ["-l", "/path with space in it"]);
watcher.stdout.on('data', function(data) {
    process.stdout.write(data.toString());
}); 
```

这是节点中的错误吗？我需要逃离这个空间吗？

编辑：上面的代码只是一个例子。这是真正的代码。也许与管道有关？

```
watcher = spawn("supervisor", ["--extensions\ 'coffee|js|css|coffeekup'", "src/app.coffee"]); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-05T06:23:27.227

不要在 中添加空格`args`，只需在数组中使用另一个参数

```
var watcher = spawn("supervisor", [
  "--extensions",
  "'coffee|js|css|coffeekup'",
  "src/app.coffee"
]); 
```

如果您想从子进程中获得快速诊断输出，我发现一个方便的小捷径是`{stdio: "inherit"}`传入`options`

```
var watcher = spawn("supervisor", [
  "--extensions",
  "'coffee|js|css|coffeekup'",
  "src/app.coffee"
], {stdio: "inherit"}); 
```

通过这种方式，您可以立即查看一切是否正常。

最后，根据`supervisor`安装位置，您可能需要考虑使用完整路径。

```
var watcher = spawn("/path/to/supervisor", ...); 
```

# jsf - JSF 和容器管理的安全性

> ID：10941548
> 
> 赞同：2
> 
> 时间：2012-06-08T00:09:21.067
> 
> 标签：jsf, authentication, jakarta-ee

我有一个 JSF 登录页面，当用户直接导航到它时效果很好。

但是，如果用户在未先登录的情况下尝试访问*受保护的页面*，则容器会正确拦截此操作并将其扔到登录页面。但是，因为登录页面是 JSF，所以存在问题。发送给用户的是原始 JSF 页面，完全未经 FacesServlet 处理。

片段示例 - 在未登录的情况下访问受保护页面后发送到浏览器：

```
<ui:define name="body">
    <p:growl id="growl" showDetail="true" sticky="true"  /> 
    <div class="mytext">Please login to the application...</div>

    <form method="POST" action="j_security_check">
        <table cellpadding="0" cellspacing="0" border="0">
            <tr>
                <td align="right">Username:&nbsp;</td>
                <td>
                    <input type="text" name="j_username"/>
                </td>
            </tr>
            <tr>
                <td align="right">Password:&nbsp;</td>
                <td>
                    <input type="password" name="j_password"/>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input type="submit" value="Login"/>
                 </td>
             </tr>
            </table>
     </form>
 </ui:define> 
```

有没有办法强制容器通过 FacesServlet 处理器呈现响应，而不是简单地返回原始 JSF 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:39:59.573

要么更改 的 URL`<form-login-page>`以匹配 的 URL 模式`FacesServlet`，或者更好地更改 的 URL 模式，`FacesServlet`以便`*.xhtml`最终用户通过故意更改浏览器地址栏中的 URL 永远无法看到任何页面的原始 JSF 源代码。

# android - 使用命令行linux安装android sdk

> ID：10941549
> 
> 赞同：11
> 
> 时间：2012-06-08T00:09:36.217
> 
> 标签：android, database, linux, debugging, command-line

我想通过命令行下载android sdk。我从命令[https://stackoverflow.com/a/4569792/563306](https://stackoverflow.com/a/4569792/563306)得到这个命令 我下载了 Android SDK r18 tar 文件。提取它并在工具目录中，

我试过这个命令

```
>android update sdk --no-ui 
```

它给出了一个错误，

```
Error: Flag '--no-ui' is not valid for 'update sdk'. 
```

另外，我没有看到 --no-ui 选项

```
android --help 
```

Google 是否更改了命令行选项

当我提供帮助时，我得到了这个，

```
android --help update sdk

Usage:
  android [global options] action [action options]

Global options:
  -v --verbose  Verbose mode: errors, warnings and informational messages are printed.
  -h --help     Help on a specific command.
  -s --silent   Silent mode: only errors are printed out.

Valid actions are composed of a verb and an optional direct object:
-   list             : Lists existing targets or virtual devices.
-   list avd         : Lists existing Android Virtual Devices.
-   list target      : Lists existing targets.
- create avd         : Creates a new Android Virtual Device.
-   move avd         : Moves or renames an Android Virtual Device.
- delete avd         : Deletes an Android Virtual Device.
- update avd         : Updates an Android Virtual Device to match the folders of a new SDK.
- create project     : Creates a new Android Project.
- update project     : Updates an Android Project (must have an AndroidManifest.xml).
- create test-project: Creates a new Android Test Project.
- update test-project: Updates an Android Test Project (must have an AndroidManifest.xml).
- create lib-project : Creates a new Android Library Project.
- update lib-project : Updates an Android Library Project (must have an AndroidManifest.xml).
- update adb         : Updates adb to support the USB devices declared in the SDK add-ons.
- update sdk         : Updates the SDK by suggesting new platforms to install if available.

Action "list ":
  Lists existing targets or virtual devices.
Options:
  No options

Action "list avd":
  Lists existing Android Virtual Devices.
Options:
  No options

Action "list target":
  Lists existing targets.
Options:
  No options

Action "create avd":
  Creates a new Android Virtual Device.
Options:
  -c --sdcard   Path to a shared SD card image, or size of a new sdcard for the new AVD
  -t --target   Target id of the new AVD [required]
  -n --name     Name of the new AVD [required]
  -p --path     Location path of the directory where the new AVD will be created
  -f --force    Force creation (override an existing AVD)
  -s --skin     Skin of the new AVD

Action "move avd":
  Moves or renames an Android Virtual Device.
Options:
  -p --path     New location path of the directory where to move the AVD
  -n --name     Name of the AVD to move or rename [required]
  -r --rename   New name of the AVD to rename

Action "delete avd":
  Deletes an Android Virtual Device.
Options:
  -n --name     Name of the AVD to delete [required]

Action "update avd":
  Updates an Android Virtual Device to match the folders of a new SDK.
Options:
  -n --name     Name of the AVD to update [required]

Action "create project":
  Creates a new Android Project.
Options:
  -n --name     Project name
  -t --target   Target id of the new project [required]
  -p --path     Location path of new project [required]
  -k --package  Package name [required]
  -a --activity Activity name [required]

Action "update project":
  Updates an Android Project (must have an AndroidManifest.xml).
Options:
  -p --path     Location path of the project [required]
  -l --library  Location path of an Android Library to add, relative to the main project
  -n --name     Project name
  -t --target   Target id to set for the project
  -s --subprojects Also update any projects in sub-folders, such as test projects.

Action "create test-project":
  Creates a new Android Test Project.
Options:
  -p --path     Location path of new project [required]
  -m --main     Location path of the project to test, relative to the new project [required]
  -n --name     Project name

Action "update test-project":
  Updates an Android Test Project (must have an AndroidManifest.xml).
Options:
  -m --main     Location path of the project to test, relative to the new project [required]
  -p --path     Location path of the project [required]

Action "create lib-project":

  Creates a new Android Library Project.
Options:
  -n --name     Project name
  -p --path     Location path of new project [required]
  -t --target   Target id of the new project [required]
  -k --package  Package name [required]

Action "update lib-project":
  Updates an Android Library Project (must have an AndroidManifest.xml).
Options:
  -p --path     Location path of the project [required]
  -l --library  Location path of an Android Library to add, relative to the main project
  -t --target   Target id to set for the project

Action "update adb":
  Updates adb to support the USB devices declared in the SDK add-ons.
Options:
  No options

Action "update sdk":
  Updates the SDK by suggesting new platforms to install if available.
Options:
  No options 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T00:25:20.447

这对我来说可以。在没有标志的情况下尝试它`--no-ui`，看看是否有效。如果不是，您收到的错误信息是什么？

* * *

## 编辑：

您可能`PATH`配置不正确。您需要执行“当前文件夹可执行文件”，如下所示：

```
$ ./android update sdk --no-ui 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T02:08:42.313

如果您使用的是 Android SDK Tools Rev 19，您应该得到

```
$ android --help update sdk

       Usage:
       android [global options] update sdk [action options]
       Global options:
  -h --help    : Help on a specific command.
  -v --verbose : Verbose mode, shows errors, warnings and all messages.
  -s --silent  : Silent mode, shows errors only.

                     Action "update sdk":
  Updates the SDK by suggesting new platforms to install if available.
Options:
     --proxy-port: HTTP/HTTPS proxy port (overrides settings if defined)
     --proxy-host: HTTP/HTTPS proxy host (overrides settings if defined)
  -s --no-https  : Uses HTTP instead of HTTPS (the default) for downloads.
  -a --all       : Includes all packages (such as obsolete and non-dependent
                   ones.)
  -f --force     : Forces replacement of a package or its parts, even if
                   something has been modified.
  -u --no-ui     : Updates from command-line (does not display the GUI)
  -p --obsolete  : Deprecated. Please use --all instead.
  -t --filter    : A filter that limits the update to the specified types of
                   packages in the form of a comma-separated list of
                   [platform, system-image, tool, platform-tool, doc, sample,
                   source]. This also accepts the identifiers returned by
                   'list sdk --extended'.
  -n --dry-mode  : Simulates the update but does not download or install
                   anything. 
```

and `-u`or`--no-ui`是选项之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:41:02.233

只是补充。当您使用代理选项时，**不要**提供 http:// 部分。android 可执行文件不会抱怨，并且会报告下载的一切正常。我进行了全新的安装，并确定尚未下载任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T08:37:09.653

它是如此简单：

```
# ./android update sdk -u 
```

# javascript - pushState & popState：Safari 5 不返回 window.history.state

> ID：10941553
> 
> 赞同：2
> 
> 时间：2012-06-08T00:10:13.487
> 
> 标签：javascript, browser-history, pushstate, popstate

在 Safari 5 中触发我的 popState 时，我似乎无法访问 window.history.state 对象（页面返回）。此代码在 Chrome 19 和 Firefox 12 中完美运行。

```
window.onload = function() {

     window.setTimeout(function() {

          var original = window.location.href;

          window.addEventListener("popstate", function(e) {

                    if (window.history.state !== null) {
                        var type = window.history.state.type;
                        var page = window.history.state.page;
                        //custom Ajax function below
                        getContent({type:type, page:page, category: category}, '/' + type + '/' + page);
                    } else {
                        window.location = original;
                    }

            }, false);

     }, 1);
} 
```

Safari 5 中的 console.log(window.history.state) 返回“未定义”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:11:05.997

[`window.history.state`仅在某些浏览器中可用。它本身不是规范的一部分。](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Browser_compatibility)

```
Feature           │ Chrome  │ Firefox (Gecko)  │  IE  │ Opera  │ Safari
──────────────────┼─────────┼──────────────────┼──────┼────────┼───────
replace/pushState │   5     │    4.0 (2.0)     │  10  │ 11.50  │  5.0
history.state     │  18     │    4.0 (2.0)     │  10  │ 11.50  │  --- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:34:30.567

因此，如果支持 history.state，则该值将为 null（或者如果浏览器正在记住状态，则为对象），否则它将是未定义的。最后我用这段代码检查它是否受支持

```
(window.history && history.pushState && history.state !== undefined) 
? true : false; 
```

在最新的 Chrome、Safari 5、6、IE 9 中测试

# r - R-在不同数据框中添加（添加）列的最佳方法

> ID：10941556
> 
> 赞同：3
> 
> 时间：2012-06-08T00:10:35.107
> 
> 标签：r

我有三个不同的数据框，如下所示：

```
V1.x<-c(1,2,3,4,5)
V2.x<-c(2,2,7,3,1)
V3.x<-c(2,4,3,2,9)
D1<-data.frame(ID=c("A","B","C","D","E"),V1.x=V1.x,V2.x=V2.x,V3.x=V3.x)

V1.y<-c(2,3,3,3,5)
V2.y<-c(1,2,3,3,5)
V3.y<-c(6,4,3,2,2)
D2<-data.frame(ID=c("A","B","C","D","E"),V1.y=V1.y,V2.y=V2.y,V3.y=V3.y)

V1<-c(3,2,4,4,5)
V2<-c(3,7,3,4,5)
V3<-c(5,4,3,6,3)
D3<-data.frame(ID=c("A","B","C","D","E"),V1=V1,V2=V2,V3=V3) 
```

我想将所有 V1 列、所有 V2 列和所有 V3 列相加

```
V1_Add<-D1$V1.x+D2$V1.y+D3$V1
V2_Add<-D1$V2.x+D2$V2.y+D3$V2
V3_Add<-D1$V3.x+D2$V3.y+D3$V3 
```

可以很好地获取各个列的总和，但在实际数据中，列号来自 V1:V80，因此不必单独输入每个列会很棒。此外，我更希望得到一个包含所有最终总和的数据框，如下所示：

```
 ID  V1  V2  V3
1  A  6  6   13
2  B  7  11  12
3  C  10 13  9
4  D  11 10  10
5  E  15 11  14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:26:04.147

这是你想要的吗？

```
D.Add <- data.frame(D1[,1],(D1[,-1]+D2[,-1]+D3[,-1]))
colnames(D.Add)<-colnames(D3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T00:50:20.790

```
library(reshape2)
library(plyr)

# First let's standardize column names after ID so they become V1 through Vx. 
# I turned it into a function to make this easy to do for multiple data.frames
standardize_col_names <- function(df) {
# First column remains ID, then I name the remaining V1 through Vn-1 
# (since first column is taken up by the ID)
names(df) <- c("ID", paste("V",1:(dim(df)[2]-1),sep=""))
return(df)
}

D1 <- standardize_col_names(D1)
D2 <- standardize_col_names(D2)
D3 <- standardize_col_names(D3)

# Next, we melt the data and bind them into the same data.frame
# See one example with melt(D1, id.vars=1). I just used rbind to combine those
melted_data <- rbind(melt(D1, id.vars=1), melt(D2, id.vars=1), melt(D3, id.vars=1))
# note that the above step can be folded into the function as well. 
# Then you throw all the data.frames into a list and ldply through this function.

# Finally, we cast the data into what you need which is the sum of the columns
 dcast(melted_data, ID~variable, sum)
  ID V1 V2 V3
1  A  6  6 13
2  B  7 11 12
3  C 10 13  9
4  D 11 10 10
5  E 15 11 14

 # Combined everything above more efficiently :

   standardize_df <- function(df) {
    names(df) <- c("ID", paste("V",1:(dim(df)[2]-1),sep=""))
    return(melt(df, id.vars = 1))
    }

   all_my_data <- list(D1,D2,D3)
   melted_data <- ldply(all_my_data, standardize_df)
   summarized_data <- dcast(melted_data, ID~variable, sum) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T01:08:50.773

这是一种可能有点矫枉过正的方法，但应该可以很好地推广到任意数量的列和任意数量的“索引”列。它确实假设您所有的 data.frames 具有相同数量的列并且它们的顺序正确。首先，从所有 data.frames 中创建一个列表对象。我引用[了这个问题](https://stackoverflow.com/questions/5158830/identify-all-objects-of-given-class-for-further-processing)以编程方式做到这一点。

```
ClassFilter <- function(x, class) inherits(get(x), "data.frame")
Objs <- Filter( ClassFilter, ls() )
Objs <- lapply(Objs, "get") 
```

接下来，我编写了一个函数，通过 using 将所有数字列添加在一起`Reduce`，然后将其与最后的非数字列缝合在一起：

```
FUN <- function(x){
  colsToProcess <- lapply(x, function(y) y[, unlist(sapply(y, is.numeric))])
  result <- Reduce("+", colsToProcess)
  #Get the non numeric columns
  nonNumericCols <- x[[1]]  
  nonNumericCols <- nonNumericCols[, !(unlist(sapply(nonNumericCols, is.numeric)))]
  return(data.frame(Index = nonNumericCols, result))
} 
```

最后，在行动中：

```
> FUN(Objs)
  Index V1.x V2.x V3.x
1     A    6    6   13
2     B    7   11   12
3     C   10   13    9
4     D   11   10   10
5     E   15   11   14 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:38:14.607

这个怎么样，只是把整个块加起来？：

```
D1[,2:4] + D3[,2:4] + D2[,2:4] 
```

... 结果是 ...

```
 V1.x V2.x V3.x
1    6    6   13
2    7   11   12
3   10   13    9
4   11   10   10
5   15   11   14 
```

它假定所有变量的顺序相同，否则应该可以正常工作。

# c# - 将 C# 集合传回 Lua

> ID：10941563
> 
> 赞同：1
> 
> 时间：2012-06-08T00:11:05.227
> 
> 标签：c#, lua, luainterface

我有一个用 C# 编写的 DLL，供 Lua 脚本使用。脚本“需要 CLRPackage”。到目前为止，我可以通过*load_assembly()*和*import_type()*来获取我的 DLL 中的类和方法。我正在传回简单的值和字符串，这一切都有效。

不，我需要将通用集合传递回 Lua。我相信 Lua 会看到一个表，但我不清楚如何在 C# 中创建该表并将其传回。

[这](https://stackoverflow.com/questions/2154924/passing-an-interface-collection)似乎是一个类似的问题，但我没有看到如何实现它。是否有另一种解决方案或带有精简代码片段的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:00:51.167

> 现在我需要将一个通用集合传回 Lua。相信Lua会看到的是一张桌子

它不会。Lua 将看到一个 CLR 对象（更确切地说，是 CLR 对象的用户数据代理）。

如果你的 C# 类中有这样的方法：

```
public List<string> GetList()
{
    return new List<string> { "This", "bar", "is", "a" };
} 
```

Lua 方面（在您加载模块后，抓取该类并将其实例化为，例如`foo`）：

```
local list = foo:GetList()
print(list) 
```

这会给你类似的东西`System.Collections.Generic.List1[System.String]: 33476626`。这是一个用户数据，而不是一个表，所以你不能使用`next`或`pairs`迭代它，你必须与它交互，因为它是一个 C# `List<string>`：

```
local it = list:GetEnumerator()
while it:MoveNext() do
  print(it.Current)
end 
```

可以肯定的是，这是非常丑陋的、非惯用的 Lua（即使是非惯用的 C#，因为你会`foreach`在 C# 中使用），但我认为 LuaInterface 类型和 CLR 类型之间没有任何自动编组。有点难说；LuaInterface 文档几乎不存在。

您可以编写自己的例程来编组 Lua 和 CLR 类型，例如：

```
function listToTable(clrlist)
    local t = {}
    local it = clrlist:GetEnumerator()
    while it:MoveNext() do
      t[#t+1] = it.Current
    end
    return t
end

...

local list = listToTable(foo:GetList())
for key, val in pairs(list) do
  print(key,val)
end 
```

添加一个`dictToTable`，你就会被覆盖。

# java - 创建一个实现自己的一些方法的接口

> ID：10941568
> 
> 赞同：0
> 
> 时间：2012-06-08T00:11:15.370
> 
> 标签：java, interface, text-files

我想创建一个在 Java 中实现自己的一些方法的接口（但该语言不允许这样做，如下所示）：

```
//Java-style pseudo-code
public interface Square {
    //Implement a method in the interface itself
    public int getSize(){//this can't be done in Java; can it be done in C++?
        //inherited by every class that implements getWidth()
        //and getHeight()       
        return getWidth()*getHeight();
    }
    public int getHeight();
    public int getWidth();
}

//again, this is Java-style psuedocode
public class Square1 implements Square{

    //getSize should return this.getWidth()*this.getHeight(), as implemented below

    public int getHeight(){
        //method body goes here
    }

    public int getWidth{
        //method body goes here
    }
} 
```

是否有可能在 C++ 中创建一个等效的接口来实现它自己的一些方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T00:19:19.517

使用`abstract class`：

```
public abstract class Square {

    public abstract int getHeight();

    public abstract int getWidth();

    public int getSize() {
        return getWidth() * getHeight();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T00:14:13.687

必须是接口吗？也许抽象类会更好。

```
public abstract class Square {
    public int getSize() {
        return getWidth() * getHeight();
    }

    //no body in abstract methods
    public abstract int getHeight();
    public abstract int getWidth();
}

public class Square1 extends Square {

    public int getHeight() {
        return 1;
    }

    public int getWidth() {
        return 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T01:36:57.810

要回答您的其他问题，是的，可以通过使用`virtual`关键字在 C++ 中完成。据我所知，它是 C++ 中多态的主要方法。

[这套教程](http://www.cplusplus.com/doc/tutorial/polymorphism/)很棒；如果您想了解有关 C/C++ 的更多信息，我建议您阅读完整的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T10:38:57.997

我认为您将接口与抽象类混为一谈：

**接口**描述了所有实现类必须遵守的契约。它基本上是一个方法列表（并且，重要的是，它们应该返回什么、它们应该如何表现等的文档。

请注意，**所有**方法都没有主体。接口不这样做。但是，您可以在接口中定义静态最终常量。

```
public interface Shape
{
  /**
   * returns the area of the shape
   * throws NullPointerException if either the height or width of the shape is null
   */
  int getSize();
  /**
   * returns the height of the shape
   */
  int getHeight();
  /**
   * returns the width of the shape
   */
  int getWidth();
} 
```

**抽象**类实现了一些方法，但不是全部。（从技术上讲，抽象类*可以*实现所有方法，但这不是一个很好的例子）。目的是扩展类将实现抽象方法。

```
/*
 * A quadrilateral is a 4 sided object.
 * This object has 4 sides with 90' angles i.e. a Square or a Rectangle
 */
public abstract class Quadrilateral90 implements Shape
{
  public int getSize()
  {
    return getHeight() * getWidth();
  }
  public abstract int getHeight();  // this line can be omitted
  public abstract int getWidth();  // this line can be omitted
} 
```

最后，扩展对象实现了抽象父类和接口中的所有剩余方法。请注意，这里没有实现 getSize()（尽管您可以根据需要覆盖它）。

```
/*
 * The "implements Shape" part may be redundant here as it is declared in the parent,
 * but it aids in readability, especially if you later have to do some refactoring.
 */
public class Square extends Quadrilateral90 implements Shape
{
  public int getHeight()
  {
    // method body goes here
  }
  public int getWidth()
  {
    // method body goes here
  }
} 
```

# android - Android 可扩展列表视图组指示器

> ID：10941570
> 
> 赞同：0
> 
> 时间：2012-06-08T00:11:18.717
> 
> 标签：android, view, alignment

我正在开发一个 android 应用程序并在活动中使用 ExpandableListView。问题是此 ExpandableList 的组指示器的默认图标没有垂直居中对齐（它更靠近顶部）。无论如何我可以改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:17:42.583

> 您可以使用 setIndictorBounds。可能是解决问题

```
ExpandableListViewobject.setIndicatorBounds(5, 45); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:52:17.523

最后，我刚刚在其余组项目上方的布局中添加了一个空文本框。并将其填充增加到“10dp”。它仍然是一种解决方法，但至少它起作用了，现在组指示器有点在中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T09:59:55.463

只需将默认指示器设置为 null 并扩展您自己的布局。这样您就可以完全控制您的资产，并且您也可以轻松地将其放置在行的右侧。

# c# - 从网页读取文本，而不是 HTML

> ID：10941571
> 
> 赞同：0
> 
> 时间：2012-06-08T00:11:21.830
> 
> 标签：c#, stream, httpwebrequest, webclient

我正在尝试制作一个从网页下载所有 mp3 的应用程序，但我没有从源代码下载它们。我从[http://ytcracker.com/music/](http://ytcracker.com/music/)下载，对于列出的每首歌曲，如果您将其复制并粘贴到 url 的末尾，它会提供该歌曲的链接。我正在使用 WebClient 下载文件，如果我可以在网页上读取而不是 html，那么我可以这样做`client.DownloadFile(url + line, path)` 这是我的代码：

```
var url = "http://ytcracker.com/music/";
var sr = new StreamReader(WebRequest.Create(url).GetResponse().GetResponseStream());
string line;
while ((line = sr.ReadLine()) != null)
{
    MessageBox.Show("http://www.ytcracker.com/music/" + line);
    using (var client = new WebClient())
    {
        client.DownloadFile("http://www.ytcracker.com/music/" + line, @"C:\Users\Lavi\Downloads\downloadto\.mp3");
    }
} 
```

问题是“行”获取页面的来源，而不是文本。如果有任何方法可以获取页面的文本，请帮助我。谢谢！

编辑：另外，路径在哪里，我知道它说'.mp3'而不是文件名，然后是.mp3。我将创建一个 for 循环并在每次循环时添加到列表中，直到页面全部读取完毕，然后将它们添加到 .mp3 中。所以它就像“i.mp3”，所以 mp3 将位于 1.mp3、2.mp3、3.mp3 等文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:15:22.107

我所知道的从 HTML 源中获取文本的最简单方法（这是您在不解析 HTML 的情况下可以获得的所有内容）是[HTML Agility Pack](http://html-agility-pack.net)。

除了软件之外，网站上还有简单的教程。

有关使用 HTML Agility Pack 提取文本的指导，请参阅下面的问题

[HTMLAgilityPack 仅迭代所有文本节点](https://stackoverflow.com/questions/6344771/htmlagilitypack-iterate-all-text-nodes-only)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T00:36:53.827

在您下载音乐的情况下，您需要在构建路径之前读取 href 值并确保它们是 .mp3 文件。正如 Eric J 提到的那样，HtmlAgilityPack 更易于使用。只需下载并将 dll 引用添加到您的项目，然后使用此代码。

```
 var url = "http://ytcracker.com/music/";
        var sr = new StreamReader(WebRequest.Create(url).GetResponse().GetResponseStream());
        HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
        htmlDoc.LoadHtml(sr.ReadToEnd());
        foreach (HtmlNode link in htmlDoc.DocumentNode.SelectNodes("//a[@href]"))
        {
            HtmlAttribute att = link.Attributes["href"];
            if (att.Value.EndsWith(".mp3"))
            {
                MessageBox.Show("http://www.ytcracker.com/music/" + att.Value);
                using (var client = new WebClient())
                {
                    client.DownloadFile("http://www.ytcracker.com/music/" + att.Value, @"C:\Users\Lavi\Downloads\downloadto\.mp3");
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:28:58.327

您可以使用正则表达式。试试这个，这是你的代码 - 我只是添加正则表达式：

```
var url = "http://ytcracker.com/music/";
var sr = new StreamReader(WebRequest.Create(url).GetResponse().GetResponseStream());
string line;

var re = new Regex(@"<li><a href=.*mp3.>(.*)</a></li>");

while ((line = sr.ReadLine()) != null)
{
    using (var client = new WebClient())
    {
        if (re.IsMatch(line))
        {
            var match = re.Match(line);

            client.DownloadFile("http://www.ytcracker.com/music/" + match.Groups[1], @"C:\Users\Lavi\Downloads\downloadto\.mp3");
        }
    }
} 
```

# c# - 使用 ColorDialog 在数据网格中设置颜色

> ID：10941579
> 
> 赞同：1
> 
> 时间：2012-06-08T00:13:15.677
> 
> 标签：c#, colors, dialog

好的，我快用谷歌搜索了。通过在测试之前设计系统以查看它是否真的有效，我似乎犯了一个错误。基本上，我向颜色对话框提供提示以获取用户选择的颜色。我正在使用这段代码：

```
ColorDialog MyDialog = new ColorDialog();

// Keeps the user from selecting a custom color.
MyDialog.AllowFullOpen = false;
MyDialog.AnyColor = false;

// Allows the user to get help. (The default is false.)
MyDialog.ShowHelp = true;
MyDialog.SolidColorOnly = true;

// Open color selection dialog box
MyDialog.ShowDialog();

functionValue = MyDialog.Color.Name;
function = "highlight";
currentFunctionValue = MyDialog.Color.Name; 
```

functionValue 被定义为一个字符串，它保存从数据库中检索到的颜色。例如，“红色”。稍后，我使用以下代码为数据网格中的一个单元格或一行单元格着色：

```
if (ruleFunction[j] == "highlight")
{
    Color color = Color.FromName(ruleFunctionValues[j]);
    grdTransactions.Rows[i].Cells[index].Style.BackColor = color;
} 
```

如果颜色名称是“红色”、“蓝色”等，这可以正常工作。但是，某些对话框选项会返回诸如“ff8000”之类的值和颜色的其他十六进制表示。我猜这会抛出 Color.FromName 函数，并且单元格不仅没有颜色，而且在数据网格单元格中弄乱了文本。有没有办法让它显示以“ff8000”之类的名称选择的颜色，或者从 colorDialog 选择屏幕中排除这些颜色？如果可以的话，我真的不想用颜色创建自己的自定义对话框。如有必要，我什至会回去更改它在数据库中的存储方式。任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:56:07.920

与其存储返回的名称，不如存储返回的颜色对象。然后，您可以直接分配它，而不是往返于字符串值。

编辑：如果您不能将其存储为颜色对象，则使用 ToArgb 的整数值。然后您可以使用 FromArgb 方法加载它。

```
Color c = Color.Red;
int redColor = c.ToArgb();

//...

this.BackColor = Color.FromArgb(redColor); 
```

# c# - 为什么连接到非空字符串的空字符串评估为空？

> ID：10941582
> 
> 赞同：2
> 
> 时间：2012-06-08T00:13:34.640
> 
> 标签：c#, .net, linq, linq-to-entities

```
 var users=db.Users.Where(u => u.Name.StartsWith(term) || u.Email.StartsWith(term) || u.FirstName.StartsWith(term)).ToArray();
 var jsos=users.Select(u => new { label = u.FirstName  +" "+  u.Name+ " (" + u.Email+")", value = u.Id }); 
```

按预期工作。但是，如果没有`ToArray()`，我会得到看起来很奇怪的行为：`null` `firstName`导致标签被评估为`null`。随着`ToArray()`我得到预期的行为。（null 被视为空字符串并连接到其他非空字符串）。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T00:20:35.520

在 SQL 世界中，根据定义，任何包含 NULL 作为其一部分的表达式都将变为 NULL。这是因为 NULL 意味着一个不确定的值 - 一个不确定的值 + 其他任何东西仍然是一个不确定的值，即 NULL。

同样，在 SQL 中，您可以使用 COALESCE 之类的东西将 NULL 转换为例如空白字符串——我不记得 linq 等价物是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:24:56.210

使用 .ToArray()，您可以针对 .NET 类型使用 Linq，该类型在代码中进行评估并使用 .NET 类型处理。在这里，字符串连接方法按照您习惯的方式工作。

如果没有 .ToArray，您的查询将在 DBMS 中执行，并使用系统配置为用于 NULL 值的任何内容。

在这种情况下，DBMS 被配置为根据 ANSI 标准处理 NULL，这在某些方面与 .NET 非常不同。您应该查找 ANSI NULL 以了解详细信息。它并不复杂，但如果你不期待它可能会令人困惑。

**两个附录** 1) 首先，我相信 ANSI 标准中规定了 NULL 的连接规则，但实际上我意识到我可能是错的。我来自 SQL Server 背景，其中 ANSI_NULLS 是控制 NULL 相等性的设置，而连接由另一个控制。如果我错误地将后者与前者联系起来，我深表歉意。

2) 尽管我谈到了可配置性，并且 SQL Server 至少确实允许更改该配置，但您看到的行为绝对是标准的、默认的和预期的。如果您将大量使用数据库，您应该习惯它。

# c# - Visual Studio 11 Beta 设计器视图无法打开并引发错误

> ID：10941583
> 
> 赞同：0
> 
> 时间：2012-06-08T00:13:44.480
> 
> 标签：c#, windows-forms-designer, visual-studio-2012

我已经安装了 Visual Studio 11 Beta。它工作正常。两天前，我尝试在线安装 Visual Studio 2012 Ultimate RC。它已正确安装，但未显示在我的程序中。然后我卸载它并重新安装 VS11 现在当我打开我的项目时出现错误，设计器视图不显示 GUI。并显示我的以下错误。

```
at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.EnsureDocument(IDesignerSerializationManager manager)
at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.DeferredLoadHandler.Microsoft.VisualStudio.TextManager.Interop.IVsTextBufferDataEvents.OnLoadCompleted(Int32 fReload) 
```

我在谷歌上搜索但没有得到如何解决它。我认为是版本错误。但是真的不知道怎么解决。

我制作了一个新的项目 windows 窗体 C# 应用程序。并遇到同样的问题。我还卸载了 VS11，然后重新安装它。但收到相同的错误。

谁能解决我的问题。

**请请。我已经有很多工作了。我真的会非常感谢你..请请帮助！！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:10:01.097

我们在 Visual Studio 2010 中也遇到了这个问题。当我们切换到 Visual Studio 2012 RC 时，这个错误突然消失了。

这可能有助于您完成工作。所以尝试再次安装它。但我真的很想得到微软的官方声明，说这个错误在 VS2012 中已修复。

# javascript - 是否可以使用 shebang 但以某种方式从 JavaScript 解释器中“隐藏”它？

> ID：10941588
> 
> 赞同：2
> 
> 时间：2012-06-08T00:14:34.760
> 
> 标签：javascript, phantomjs, interpreter, shebang

我想我的问题很难解读（请随意完善它）。但它与脚本中 shebang 行的使用有关——特别是在这种情况下是 JavaScript。假设我有这个`phantomjs`脚本：

```
#!/usr/bin/env phantomjs

/*
Requires phantomjs to be installed (e.g. via Homebrew on Mac)

Example URL:
http://code.google.com/p/phantomjs/wiki/QuickStart#DOM_Manipulation
*/

var page = require('webpage').create(),
    url = 'http://lite.yelp.com/search?find_desc=pizza&find_loc=94040&find_submit=Search';

page.open(url, function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var results = page.evaluate(function() {
            var list = document.querySelectorAll('span.address'), pizza = [], i;
            for (i = 0; i < list.length; i++) {
                pizza.push(list[i].innerText);
            }
            return pizza;
        });
        console.log(results.join('\n'));
    }
    phantom.exit();
}); 
```

我怀疑这是一个非常荒谬的问题，但是：

是否有任何可能的技巧可以让您在上面的代码中保留 shebang 行 - 这样您就可以执行文件而无需在脚本执行前加上（在这种情况下）`phantomjs`- 并且仍然可以在 JavaScript 中没有错误地解释它?

如果没有，是否有任何其他语言解释器（例如 Ruby、Python）“接受”shebang 行，或者更好的是，有办法忽略它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:29:11.550

[Node.js](http://www.nodejs.org) *确实*会忽略 shebang 行（如果存在），并且在其解释器中是一个特殊的例外来处理它。PhantomJS 也必须添加这样的支持，因为 Javascript 不使用*#*的注释。

但是，如果您没有附加到 PhantomJS，您始终可以使用[Node.js 的 Zombie 库](http://zombie.labnotes.org)并完成您在示例代码中所做的相同事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T00:17:46.847

我不知道你的第一个问题的答案，但你的第二个问题的答案是“是”。例如，[Racket](http://www.racket-lang.org)允许以下脚本：

```
#! /usr/bin/env racket
#lang racket
"Hello, world!" 
```

由于`#!`被忽略为行注释。

# oracle - PLSQL 符号“=>”的含义

> ID：10941594
> 
> 赞同：20
> 
> 时间：2012-06-08T00:15:45.397
> 
> 标签：oracle, plsql

`=>`PL/SQL中的符号是什么意思？例如

```
GetAttrNumber(toitemtype => toitemtype,
              toitemkey => toitemkey,
              toactid => toactid) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T00:23:40.687

这是将参数传递给 PL/SQL 过程或函数的关键字/值表示法。

左边是参数的名字，右边是被传递的值。

当您不想保持特定的参数顺序或自记录代码时，它很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T09:58:49.970

如果您有很长的参数列表并且只需要指定它们的子集，则关键字/值表示法会非常有用。特别是如果您想跳过参数列表中间的一些参数[（这需要跳过的参数使用 DEFAULT 值）](http://docs.oracle.com/cd/B10501_01/appdev.920/a96590/adg10pck.htm#832)。例如，如果您有这样的过程：

```
PROCEDURE my_proc(
    p_param1  NUMBER DEFAULT 1
  , p_param2  NUMBER DEFAULT 2
  , p_param3  NUMBER DEFAULT 3
  , p_param4  NUMBER DEFAULT 4
  , p_param5  NUMBER DEFAULT 5 
); 
```

现在您[只能使用第一个和最后一个参数调用 my_proc()](http://docs.oracle.com/cd/B10501_01/appdev.920/a96590/adg10pck.htm#2482)，

my_proc(p_param1 => value1, p_param5 => value2);

# visual-c++ - C++中的静态类成员

> ID：10941595
> 
> 赞同：0
> 
> 时间：2012-06-08T00:16:00.780
> 
> 标签：visual-c++, static, member

我正在尝试从 NeHe.gamedev.net 获取窗口制作代码并将其转换为一个类，以便我可以更轻松地使用它，但我遇到了问题。WndProc 方法需要声明为我阅读的静态，这当然意味着其中使用的变量需要是静态的。但是当我在头文件中这样声明它们时

```
private:

static bool keys[256];                  //for key events
static bool active;
static bool fullscreen; 
```

我收到一个错误，说它们是未声明的外部。我对 c++ 很陌生，所以我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:21:07.660

静态值也必须在实现文件中声明。在您的 .cpp 文件中，您应该具有以下内容：

```
bool MyClass::keys[256];
bool MyClass::active;
bool MyClass::fullscreen; 
```

问题是，如果没有在实现文件中的某个地方声明，编译器就没有好地方来存储静态变量。

# gtk - 为什么按钮和默认按钮的顺序会随着用户执行 PyGTK/GTK 程序而改变？

> ID：10941603
> 
> 赞同：7
> 
> 时间：2012-06-08T00:17:02.667
> 
> 标签：gtk, pygtk

我正在调试 PyGTK 程序中的用户体验错误（尽管该问题可能也适用于 GTK），并且突然意识到该错误是“触发”的，具体取决于执行程序的用户。

我将问题简化为 PyGTK 中的一个非常简单的脚本：

```
import gtk

class PyApp(gtk.Window):
    def __init__(self):
        super(PyApp, self).__init__()

        self.set_size_request(250, 100)
        self.set_position(gtk.WIN_POS_CENTER)
        self.connect("destroy", gtk.main_quit)
        self.set_title("Message dialogs")

        ques = gtk.Button("Question")
        self.add(ques)

        ques.connect("clicked", self.on_ques)

        self.show_all()

    def on_ques(self, widget):
        md = gtk.MessageDialog(self,
            gtk.DIALOG_DESTROY_WITH_PARENT, gtk.MESSAGE_QUESTION,
            gtk.BUTTONS_YES_NO, "Are you sure to quit?")
        md.run()
        md.destroy()

PyApp()
gtk.main() 
```

当我以我自己的身份在我的盒子上运行它时，我得到了这个对话框：

```
Are you sure to quit?
    <Yes>   No 
```

当我以*root*身份在我的盒子上运行它时，我得到这个对话框：

```
Are you sure to quit?
     <No>   Yes 
```

两个用户都有相同的 .gtkrc-2.0 文件，我使用 KDE，并且在我的主目录中没有任何明显的与 GTK 相关的隐藏目录，所以我不明白这种偏好来自哪里。

在有人建议 md.set_default_response() 之前，这并不是我想要的。创建对话框后，我尝试设置 md.set_default_response(gtk.RESPONSE_YES) ，是的，选择了“是”按钮，但左侧仍然打印了“否”。

我想了解这种行为的来源，并尝试一劳永逸地解决它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T01:52:33.600

查看 GTK+ C 源代码，我终于找到了答案。

似乎 GNOME 人机界面指南提倡使用最右侧的肯定按钮，但在 Windows 等平台中，标准首先是肯定的，因此在必须处理按钮的小部件中，您有一个名为 set_alternative_button_order() 的函数如果名为 gtk-alternative-button-order 的全局设置设置为 1，请重新排列按钮。

那么答案的第二部分是 KDE*试图模仿 Windows*。知道我必须寻找什么，我在 KDE 中找到了另一个 gtkrc-2.0，在 /home/myuser/.kde/share/config/gtkrc-2.0:gtk-alternative-button-order = 1 中，以便制作 GTK在 KDE 下运行的应用程序尽可能类似于非 GTK 的应用程序。

这就是 root 有不同行为的原因，因为我从未在我的系统中以 root 身份运行 KDE，而且它在 .kde/ 目录中没有这样的设置。

这个故事的寓意是，无论你得到什么，都**必须在这种类型的对话框中设置默认按钮，否则 GTK 将默认为第一个，这将导致不一致的行为。**就我而言，在纯 GTK 中，退出程序的默认答案不是这样做，但在 Windows 或 KDE 中，它是退出。

我希望它很清楚，这有助于任何有同样问题的程序员。

# c# - c# scrollviewer 和 dispatch timer 触发问题

> ID：10941605
> 
> 赞同：1
> 
> 时间：2012-06-08T00:17:19.003
> 
> 标签：c#, windows-phone-7, xaml, timer, scrollviewer

因此，当滚动查看堆栈面板中包含大约 100 个小矩形的滚动查看器时，我的调度计时器的触发出现问题。

我的调度计时器每 400 毫秒触发一次，每 400 毫秒播放一次声音。如果我不触摸滚动查看器，滴答声会按应有的方式触发。但是，如果我开始四处移动滚动查看器，则刻度可以在 600-1300 毫秒左右的任何地方。

我的问题是，我可以使用什么来让每 400 秒左右发生一次事件，这样就不会因为滚动浏览器而被延迟？

这是一个 WP7 应用程序，矩形是用 xaml 制作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:07:37.693

DispatcherTimer 在调度程序（或 UI）线程上触发。
您正在操作滚动查看器，并且基于滚动的矩形重绘也将发生在 UI 线程上。

最简单的解决方案是使用常规计时器并每 400 毫秒触发一次。

# javascript - 如何获取 twitter bootstrap 按钮组中选定按钮的值

> ID：10941606
> 
> 赞同：15
> 
> 时间：2012-06-08T00:17:24.180
> 
> 标签：javascript, radio-button, twitter-bootstrap, buttongroup

如果我在引导程序中有一个单选按钮组，如下所示：

```
<div class="btn-group" data-toggle="buttons-radio">
        <button class="btn">1</button>
        <button class="btn">2</button>
        <button class="btn">3</button>
        <button class="btn">4</button>
</div> 
```

我怎样才能`get`/`set`选定的值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T18:56:56.357

要设置活动元素，请将类添加`active`到您要选择的任何按钮（并取消选择其余按钮）。

```
$('.btn-group > .btn').removeClass('active')    // Remove any existing active classes
$('.btn-group > .btn').eq(0).addClass('active') // Add the class to the nth element 
```

要获取当前活动按钮的 html/text 内容，请尝试以下操作：

```
$('.btn-group > .btn.active').html() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-01T12:38:53.633

这是另一种解决方案

```
 alert($('.btn-group > .btn.active').text()); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-08T00:29:21.807

```
var num = null;
var ele = document.querySelectorAll(".btn-group > button.btn");
for(var i=0; i<ele.length; i++){
    ele[i].addEventListener("click", function(){
        num = +this.innerHTML;
        alert("Value is " + num);
    });
} 
```

或 jQuery：

```
var num = null;
$(".btn-group > button.btn").on("click", function(){
    num = +this.innerHTML;
    alert("Value is " + num);
}); 
```

# c - 可以撤消一系列 XOR 吗？

> ID：10941607
> 
> 赞同：1
> 
> 时间：2012-06-08T00:17:29.203
> 
> 标签：c, bitwise-operators, bitwise-xor

我已经在纸上进行了几次测试，但似乎无法在任何地方找到确认。

假设我有几个唯一的 8 位数字，我将它们异或在一起并将其存储在某个地方。如果我之后，将这些相同的数字与存储的数字进行异或，我总是会得到 0 吗？

基本上我有一个条件的枚举，其中一些需要在操作发生之前得到满足。作为一个健全性检查，并确保我以后不会意外返回并破坏此代码，我正在考虑将所需的条件一起异或，然后在满足条件时将条件与该存储值异或。然后在操作发生之前，确保我们回到 0。

所以像

```
sanity_check = C1 ^ C3 ^ C5
...
//Condition one is met
sanity_check ^= C1
...
//Condition 3 is met
sanity_check ^= C3
...
//Condition 5 is met
sanity_check ^= C5
...
if( sanity_check == 0 )
 Do operation 
```

我知道它并非完美无缺，因为在正确的条件下，我最终可能会在某个地方处于中间 0 状态。但它更多的是供我自己使用，以防止将来意外地将这些条件之一移动到操作之下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T00:20:18.737

是的，XOR 是可交换的和关联的，并且`x ^ x == 0`，因此您可以通过再次执行相同的序列来撤消一系列 XOR。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T00:22:46.627

最好使用位字段，其中每个位代表一个条件：

```
C1 = 1;  // 1 << 0
C2 = 2;  // 1 << 1
C3 = 4;  // 1 << 2
C4 = 8;  // 1 << 3
C5 = 16; // 1 << 4

// Condition one is met
sanity_check |= C1;

....

// If Conditions 1 2 and 4 passed
if((sanity_check & (C1 | C2 | C4)) == (C1 | C2 | C4))

// If Conditions 1 and 2 passed and 3 failed
if((sanity_check & (C1 | C2 | C3)) == (C1 | C2)) 
```

这样，当您到达代码中要检查它们的位置时，您可以使用按位运算符检查不同的条件集。您还可以保证，只有在满足您的所有要求时才会输入 if 语句（而不是误报的可能性）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:43:51.407

是的。Daniel 的回答为直观地理解为什么 XOR 是完全可逆的提供了一个很好的基础。我觉得你想确保情况***总是***如此。是时候去兔子洞了！

二进制数（`ints`以及其他所有内容都归结为）与`^`运算符一起形成了一个称为[group](http://en.wikipedia.org/wiki/Group_%28mathematics%29)的东西。这意味着 对于`ints` `a`和。`b``c`

1.  `a ^ b`永远也是一个`int`。
2.  `a ^ b ^ c`总是一样的，不管你先计算什么对。这就是丹尼尔所说的“联想”。
3.  有一个`int`( `0`) `0 ^ a = a ^ 0 = a`。这就是身份，因为用 an 异或 0`int`不会改变它。
4.  对于`a`你选择的任何一个，总是，总是，*总是* `b`这样`a ^ b = b ^ a = 0`。在这种情况下，`b`被称为相反的`a`，因为它中和`a`以给出身份。你也可以证明每个数字只有*一个*这样的逆，但我不会那样做。

现在，特定的一对`ints`和`^`还有两个属性使您所说的成为可能。

1.  `a ^ b == b ^ a`对于任何`a`& `b`。这就是丹尼尔所说的“交换”的意思。
2.  `a ^ a = 0`，这意味着 an`int`是它自己的逆关于`^`。

使用这个，让我们以你的表达为例。完成所有操作后得到的最终结果是：

`C1 ^ C3 ^ C5 ^ C1 ^ C3 ^ C5`

现在，因为我们有交换性，我们可以交换它们并将它们配对得到：

`C1 ^ C1 ^ C3 ^ C3 ^ C5 ^ C5`

由于关联性和自逆的东西，我们得到：

`(C1 ^ C1) ^ (C3 ^ C3) ^ (C5 ^ C5) = 0 ^ 0 ^ 0 = 0`

你可以用同样的逻辑用任何表达方式让自己放心。这将*永远*是真的。您获得中间值 0 的事实并不重要。实际上，任何值都无关紧要。数学帮你搞定。

# objective-c - initWithContentsOfFile 像疯了一样泄漏

> ID：10941608
> 
> 赞同：0
> 
> 时间：2012-06-08T00:17:29.657
> 
> 标签：objective-c, instruments, memory-leaks, initwithcontentsoffile

我的应用程序是完全无泄漏的（我认为），但有一件事情据说泄漏了很多。所以这里是：

```
 mainPath = [[NSBundle mainBundle] bundlePath];
    levelConfigPlistLocation = [mainPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.plist",CATEGORY]];
    levelConfig = [[NSDictionary alloc] initWithContentsOfFile:levelConfigPlistLocation]; 
```

这是我使用它的方式：

```
NSString *question = [[[levelConfig objectForKey:LEVELSETSTRING]objectForKey:LEVELSTRING]objectForKey:@"question"];

    questionLabel = [CCLabelTTF labelWithString:question dimensions:CGSizeMake(820.0f,360.0f) alignment:UITextAlignmentCenter fontName:@"helvetica" fontSize:32.0f];
    questionLabel.position = ccp(screenSize.width/2-30 ,screenSize.height);
    questionLabel.color = ccc3(255,255,255);
    [self addChild:questionLabel z:5]; 
```

和：

```
NSString *answer = [[[levelConfig objectForKey:LEVELSETSTRING]objectForKey:LEVELSTRING]objectForKey:@"answer"];

    for (int i=0; i < [answer length]; i++) 
    { 
        NSRange r = NSMakeRange(i, 1);
        NSString *ichar = [answer substringWithRange:r]; 
        [characters addObject:ichar]; 
    } 
```

而且，在`-dealloc`我发布它时：

```
[levelConfig release]; 
```

Instruments 向我展示了以下泄漏：

![截图仪器](../Images/1e82e432743a6d1f8f60122b93141d60.png)

其中，当我双击时，总是显示同一行，即：

![截图仪器 2](../Images/eb7a5177be3b844cf0e2515ead51f3ee.png)

这显然是 levelconfig 的泄漏......但我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:45:50.023

您正在直接访问您的 ivars，您不应该这样做。如果您将其替换为`self.levelConfig =...`，那么您的泄漏很可能会消失。

您在此处提供的特定代码块很可能在某个地方`viewDidLoad`或其他可以多次调用的地方。每次你这样做，你都会泄露`levelConfig`. 使用`self.`将解决这个问题。避免直接访问您的 ivars，除了 in`init`和`dealloc`.

# php - 在现有的 PHP 中加入 OOP

> ID：10941617
> 
> 赞同：0
> 
> 时间：2012-06-08T00:18:35.350
> 
> 标签：php, oop, encapsulation

我正在尝试将 OOP 原则与我正在开发的网络应用程序结合起来。

给定一个类 ImageData 定义为

```
class ImageData {
  private $count;
  private $dirArray;

  public function __construct() {
    $count = 0;    
    $dir = "panos/thumbs";
    $dirCon = opendir($dir);

    while ($name = readdir($dirCon)){
      if (strtolower(substr($name, -3)) == "jpg"){
        $dirArray[]= $name;
      }
    }

    sort($dirArray);
    $count= count($dirArray);

    closedir($dirCon);
  }

  public function getCount(){
    return $this->count;
  }

  public function getArray(){
    return $this->dirArray;
  }

} 
```

我想使用此处的信息来呈现网页。在指定的 div 元素中，我有

```
$imageData = new ImageData();
$count = $imageData->getCount();
$data = $imageData->getArray(); 
```

但是，`$count`并`$data`没有在本地实例化，并且包含的​​信息不可在渲染代码中使用。我已经逐步完成了 xdebug 中的代码，并且构造函数将预期值分配给`$count`and `$data`。在 Java 和 C 中，不需要在声明时实例化变量。这对 PHP 来说是真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:23:44.447

在您的构造函数中，您必须使用`$this->count`代替`$count`, 相同的`$dirArray`.

PS：你可以在 PHP 类中只声明你的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T16:26:35.867

> [***免责声明：****由于显然已经回答了问题，因此这是对所提供代码的**长格式评论。***]

编写类时，应尽量避免在构造函数中进行计算。它使调试代码变得困难。

我实际上会像这样构造代码：

```
class ImageData {
    protected $count = 0;
    protected $dir = null; 
    protected $dirArray = null; 

    public function __construct( $dir = 'panos/thumbs') {
        $this->dir = $dir;   
    }

    public function getCount(){

       if ( is_array($this->dirArray) ){
           $this->initialize();
       }

       return $this->count;
    }

    public function getArray(){

       if ( is_array($this->dirArray) ){
           $this->initialize();
       }

       return $this->dirArray;
    }

    protected function initialize(){

       $this->dirArray = $this->findImages();

       sort($this->dirArray);
       $this->count = count($dirArray);

    }

    protected function findImages( $extensions = array('jpg') ){

       $files = array();
       $dirCon = opendir($this->dir);

       while ($name = readdir($dirCon)){
           $current = strtolower(substr($foo, strrpos($foo, '.')+1));
           if ( in_array( $current, $extensions ) ){
               $files[] = $name;
           }
       }

       closedir($dirCon);
       return $files
    }

} 
```

首先，我建议您使用`protected`而不是`private`，如果您现在不使用它们，那么您实际上需要它们`private`。因为`private`类的成员不是“可见的”，所以当你扩展类时。

另一件事是将对象的初始化移动到实际需要的位置。稍加修改，这个类就可以让你重复搜索文件夹，甚至可以在不同的文件夹中搜索。

If you want to learn how to utilize OOP in context of PHP, start by reading [http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php) . And you might find [PHP Object-Oriented Solutions](https://rads.stackoverflow.com/amzn/click/com/1430210117) book to be a big help.

# javascript - 从选择选项复制到动态选择选项

> ID：10941618
> 
> 赞同：1
> 
> 时间：2012-06-08T00:18:37.413
> 
> 标签：javascript, jquery, html, html-select

如何从第一个选项中获取动态创建的选择的所有选项，我尝试使用 jquery 但没有工作：

```
 for( j = 0; j < i; j++)
     $('#s1 option').clone().appendTo(IS+j); 
```

**HTML 文件：**

```
<input type="button" value="Add" id="btn1" OnClick="f('dv1');">
<div id="dv1">
    <select id="s1" name="select1">
        <option>
            1
        </option>

        <option>
            2
        </option>
    </select>
</div>

<script type="text/javascript" src="js/functions.js"></script> 
```

***函数.js***

```
var i = 1;
function f(x){
    var y = document.createElement('div');
    y.innerHTML = '<br><Select id="IS"'+i+ 'name="NAME"'+i+' > </Select>';
    document.getElementById(x).appendChild(y);
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:25:15.303

由于您似乎正在创建多个选择对象，因此您需要修复您的 jquery 选择器和您为选择生成的 id。首先，`$('#s1 option').clone().appendTo(IS+j);` 应改为：

```
$('#s1 option').clone().appendTo('#IS' + j); 
```

其次，`y.innerHTML = '<br><Select id="IS"'+i+ 'name="NAME"'+i+' > </Select>';` 应改为：

```
y.innerHTML = '<br /><select id="IS'+i+ '" name="NAME'+i+'"></select>'; 
```

**编辑**：

如果您只是尝试克隆原始下拉列表，则以下内容应该适合您：

```
function f(x){
    // Create new select within its own div
    var y = document.createElement('div');
    y.innerHTML = '<br /><select id="IS'+i+ '" name="NAME'+i+'"></select>';
    document.getElementById(x).appendChild(y);

    // Fill new select with the options from the original
    $('#IS' + i).html($('#s1').html());

    i++;
} 
```

[现场演示](http://jsfiddle.net/myGgx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:22:48.317

如果您出于任何原因需要迭代选项以进行更改，这是另一种方法

```
var newSelect = $("<select />");

$.each(primarySelect.options, function (i, opt)
{
   $(newSelect).append($('<option></option>', { 
       value: opt.value, text: opt.text, selected: opt.selected }));
}); 
```

[JS Fiddle Live 版本](http://jsfiddle.net/tpFc7/3/)

一定不要使用`$(primarySelect.options).each(...)`，因为这在 IE 中无法正常工作。

* * *

另请参阅：[使用 jQuery 从数组中添加选项的最佳方法是什么？](https://stackoverflow.com/questions/170986/what-is-the-best-way-to-add-options-to-a-select-from-an-array-with-jquery)

# ruby - Rails 3.1.0 使用 haml 的问题 - 缺少模板错误

> ID：10941626
> 
> 赞同：3
> 
> 时间：2012-06-08T00:19:43.823
> 
> 标签：ruby, ruby-on-rails-3, haml

我正在尝试在我的项目中使用 haml，我有一个控制器类和一个视图模板 .html.haml

这是我的宝石文件：

```
source  "http://rubygems.org"
#use Haml for templates
gem 'haml' '3.1.6'
#use Ruby debugger
group :development, :test do
gem 'ruby-debug19'
end
group :assets do
gem 'therubyracer'
end 
```

我多次运行**bundle install并重新启动 rails 服务器，但 haml 甚至没有出现在****bundle show**中。

我使用 gem 更新了 haml，仍然没有结果。

**haml --rails**不起作用 - 无效选项

供应商/插件文件夹为空

如果我运行 rails server 并打开“http://localhost:3000/myindex”，我有一个控制器和一个视图模板，我得到模板错误

```
Missing template movies/index, application/index with {:handlers=>[:erb, :builder, :coffee], :formats=>[:html], :locale=>[:en, :en]}. Searched in: 
```

处理程序中根本不存在haml。

我试图添加

```
config.generators do |g|
      g.template_engine :haml
     end 
```

配置/application.rb。没用

在网上搜索了一整天，阅读了很多建议，但没有一个有帮助。

bundle 只是拒绝正确安装haml gem。没有将其指示为错误。它只是忽略了宝石。

哦，我在我的模板上运行了**haml index.html.haml**：html 已完美生成。出于测试目的，我使它非常简单。

导轨 v：3.1.0

红宝石诉：1.9.2p290

哈姆五：3.1.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:24:41.530

使用`haml-rails`而不是`haml`. 并删除版本字符串或添加逗号：

```
gem 'haml-rails'
# or potentially
gem 'haml-rails', '3.1.6' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:56:24.987

我找到了原因。当我不得不编辑现有的“Gemfile”时，我创建了一个新文件“gemfile”，区分大小写！所以 bundle 只是在读取错误的文件。

# winapi - 动态父级按钮窃取父级的焦点

> ID：10941627
> 
> 赞同：1
> 
> 时间：2012-06-08T00:19:57.707
> 
> 标签：winapi

我一直致力于创建一个跨平台的 GUI 库，但遇到了一个有趣的障碍。为了使界面更好，我试图让创建一个没有父级的按钮成为可能，然后在构造函数完成后为其分配一个父级。我已经让代码大部分工作，但是单击按钮会导致父窗口失去焦点。我正在使用 CreateWindowEx() 创建按钮并为其赋予样式 WS_POPUP | BS_PUSHBUTTON 和一个空父。我使用 WS_POPUP 的原因是为了避免标题栏大小影响按钮的尺寸；没有它，按钮就会被压扁。创建按钮后，我使用 SetParent() 并将 WS_POPUP 标志替换为 WS_CHILD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:59:53.040

Windows API 窗口没有这么灵活。正如[MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600%28v=vs.85%29.aspx)所记录的，您不能手动更改标志，除非使用 API 调用（例如`ShowWindow()`更改`WS_VISIBLE`）。为什么不将调用延迟`CreateWindowEx()`到将库按钮对象分配给父窗口？

WS_POPUP 意味着你想创建一个外行人可能称之为窗口的东西。换句话说，可以包含小部件（WS_CHILD 窗口）的顶级框架。尽管您将标志更改为 WS_CHILD，但您随后设置为父窗口的窗口可能会失去焦点，因为按钮在系统中显示为单独的顶级窗口。

Windows 行为比其当前设置的标志更多。如果 Windows 的设计合理，这两种类型的窗口 (`WS_POPUP`和`WS_CHILD`) 将由引擎盖下的两个完全不同的对象实现，这取决于传递给 CreateWindowEx 的标志。更改标志不会神奇地将底层对象从一种类型转变为另一种类型。

如果 MSDN API 文档没有明确说明标志是要直接操作的，并且没有 API 调用来为您处理更改，那么窗口身份的这一方面是不可变的。

# error-handling - 常见的 Lisp 错误：未声明的自由变量

> ID：10941629
> 
> 赞同：4
> 
> 时间：2012-06-08T00:20:09.000
> 
> 标签：error-handling, lisp, common-lisp

我有一个我正在尝试编译的函数，但在过去的 30 分钟里我一直在努力弄清楚为什么这段代码会给我一个`Undeclared free variable`错误。我正在使用 Emacs，但无法解释为什么会出现此错误。

```
(defun pretty-all(res diff)
  (let* ((v-list (blank-unit-list res))
         (c-list (blank-unit-list res)))
    (complete-fill c-list v-list res (total-res res) diff)
    (format t
            "Resistance is ~S~% Voltage is ~S~% Current is ~S~%"
            res v-list c-list))) 
```

`blank-unit-list`, `complete-fill`,`total-res`都是我自定义的函数。

我很确定这个错误与我构建代码的方式有关，但正如我之前所说，我不知道是什么。

* * *

从 Emacs 复制：

```
3 compiler notes:

CircuitFunctions.lisp:61:64:
  warning: Undeclared free variable RES

CircuitFunctions.lisp:61:70:
  warning: Undeclared free variable V-LIST

CircuitFunctions.lisp:61:81:
  warning: Undeclared free variable C-LIST

Compilation failed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:46:09.907

如果您使用的是 SLIME（看起来您可能是，因为您使用的是 lispbox），应该有一种方法可以从编译器注释转到它发生的源代码中的位置。我不记得确切的组合键（如果你在我面前放一个带有粘液的 emacs，我可能会按下它，但这并不意味着我有意识地记住它是什么，不幸的是）。检查绑定什么键 slime-next-error 可能会有所帮助，并且 SLIME 菜单中可能有一些东西）。

通过查看编译器注释中的行号（我认为 :61:64 等是源行和列），实际发出的错误与您粘贴的代码（根本）不匹配。我看不到有所有`v-list`,`res`并且`c-list`按顺序排列的行。不过，这可能是由于宏扩展造成的（作为旁注，它看起来好像`complete-fill`要么是宏，要么破坏性地修改了它的两个参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:23:03.500

根据 wvxvw 的建议，即我的代码可能在某处缺少括号，我使用`C-M-f`. 它毫无问题地通过了，现在我开始放弃了。最后，为了确保，我复制了这个问题的代码，并用这里的函数替换了我以前的函数。不知何故，它现在工作。我不知道是什么导致了问题，但它现在可以正常工作。感谢大家的意见。

# c - 启动 GPU 内核以对 3D 数据集进行计算的最佳方法是什么？

> ID：10941636
> 
> 赞同：2
> 
> 时间：2012-06-08T00:21:32.387
> 
> 标签：c, multidimensional-array, cuda, gpu

我正在使用 CUDA 对可能很大的 3D 数据集进行计算。我认为最好先看一个简短的代码片段：

```
void launch_kernel(/*arguments . . . */){
    int bx = xend-xstart, by = yend-ystart, bz = zend-zstart;

    dim3 blocks(/*dimensions*/);
    dim3 threads(/*dimensions*/);
    kernel<<blocks, threads>>();
} 
```

我有一组 3D 单元，我需要启动一个内核来计算每个单元。问题是输入大小可能超出 GPU 的能力，特别是线程。所以这样的代码：

```
void launch_kernel(/*arguments . . . */){
       int bx = xend-xstart, by = yend-ystart, bz = zend-zstart;

       dim3 blocks(bx,by,1);
       dim3 threads(bz);
       kernel<<blocks, threads>>();
   } 
```

……不好用。因为如果尺寸是 1000x1000x1000 怎么办？- 我无法在每个块中启动 1000 个线程。或者更好的是，如果尺寸是 5x5x1000 怎么办？- 现在我几乎没有启动任何块，但内核需要启动 5x5x512 b/c 的硬件，每个线程将执行 2 次计算。我也不能只是混搭我的所有维度，将一些 z 放在块中，一些放在线程 b/c 中，我需要能够识别内核中的维度。目前：

```
__global__ void kernel(/*arguments*/){
    int x = xstart + blockIdx.x;
    int y = ystart + blockIdx.y;
    int z = zstart + threadIdx.x;
    if(x < xend && y < yend && z < zend){
        //calculate
    }
} 
```

我需要一种可靠、有效的方法来计算这些变量：

块 x 维度，块 y 维度，线程 x（以及 y? 和 z?），一旦我通过 blockIdx 和 threadIdx 在内核中的 x,y,z，如果输入超过硬件，a 的数量我在内核计算中的 for 循环中为每个维度采取“步骤”。

如果您有任何问题，请询问。这是一个难题，一直困扰着我（特别是因为我启动的块/线程的数量是性能的主要组成部分）。该代码需要在其针对不同数据集的决策中自动化，我不确定如何有效地做到这一点。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:24:38.487

我认为你在这里把事情复杂化了。基本问题似乎是您需要在 1000 x 1000 x 1000 计算域上运行内核。因此，您需要 1000000000 个线程，这完全在所有 CUDA 兼容硬件的能力范围内。因此，只需使用标准的 2D CUDA 执行网格，其中至少包含进行计算所需的线程数（如果您不明白如何做到这一点，请发表评论，我会将其添加到答案中），然后在您的内核调用中一个小的设置功能是这样的：

```
__device__ dim3 thread3d(const int dimx, const int dimxy)
{
    // The dimensions of the logical computational domain are (dimx,dimy,dimz)
    // and dimxy = dimx * dimy
    int tidx = threadIdx.x + blockIdx.x * blockDim.x;
    int tidy = threadIdx.y + blockIdx.y * blockDim.y;
    int tidxy = tidx + gridDim.x * tidy;

    dim3 id3d;
    id3d.z = tidxy / dimxy;
    id3d.y = tidxy / (id3d.z * dimxy);
    id3d.x = tidxy - (id3d.z * dimxy - id3d.y * dimx);

    return id3d;
} 
```

[免责声明：用浏览器编写，从未编译，从未运行，从未测试。使用风险自负]。

此函数将从 CUDA 2D 执行网格返回 3D 域 (dimx,dimy,dimz) 中的“逻辑”线程坐标。在内核的开头调用它，如下所示：

```
__global__ void kernel(arglist, const int dimx, const int dimxy)
{
    dim3 tid = thread3d(dimx, dimxy);

    // tid.{xyx} now contain unique 3D coordinates on the (dimx,dimy,dimz) domain
    .....
} 
```

请注意，在设置该网格时存在大量整数计算开销，因此您可能需要考虑*为什么*您真的需要 3D 网格。您会惊讶于它实际上没有必要的次数，并且可以避免大部分设置开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:37:19.623

我将首先用于`cudaGetDeviceProperties()`查找您的 GPU 的计算能力，以便您确切地知道您的 GPU 允许每个块有多少线程（如果您的程序需要通用化，以便它可以在任何支持 CUDA 的设备上运行）。

然后，使用这个数字，我会做一个大的嵌套`if`语句来测试你输入的维度。如果所有维度都足够小，则可以拥有一组 (bx,by,bz) 线程（不太可能）。如果这不起作用，则找到可以放入一个块中的最大维度（或两个维度）并据此进行分区。如果这不起作用，那么您将不得不对最小维度进行分区，以便将其中的一些块放入一个块中 - 例如假设和的`(MAX_NUMBER_THREADS_PER_BLOCK,1,1)`线程和块。`(bx/MAX_NUMBER)THREADS_PER_BLOCK,by,bz)``bx<by<bz``bx>MAX_NUMBER_THREADS_PER_BLOCK`

对于每种情况，您都需要不同的内核，这有点痛苦，但归根结底，这是一项可行的工作。

# wordpress - 使用 WordPress 在 Google 地图版本 3 上定位 WP 作者

> ID：10941637
> 
> 赞同：0
> 
> 时间：2012-06-08T00:21:42.230
> 
> 标签：wordpress, google-maps, google-maps-api-3

我有这些代码使用经度和纬度来定位谷歌地图上的帖子：进入标题

```
<script type="text/javascript">
var infowindow = new google.maps.InfoWindow();
var pinkmarker = new google.maps.MarkerImage('/wp-content/themes/mapdemo/pink_Marker.png', new google.maps.Size(20, 34) );
var shadow = new google.maps.MarkerImage('/wp-content/themes/mapdemo/shadow.png', new google.maps.Size(37, 34) );

    function initialize() {
    map = new google.maps.Map(document.getElementById('map'), { 
        zoom: 6, 
        center: new google.maps.LatLng(37.5407246, -77.4360481), 
        mapTypeId: google.maps.MapTypeId.ROADMAP 
    });

    for (var i = 0; i < locations.length; i++) {  
        var marker = new google.maps.Marker({
            position: locations[i].geometry.location,
            icon: pinkmarker,
            shadow: shadow,
            map: map
        });
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
          return function() {
            infowindow.setContent(locations[i].info);
            infowindow.open(map, marker);
          }
        })(marker, i));
    }

     }
     </script> 
```

在身体里

```
<?php if ( have_posts() ) : ?>
<!-- WordPress has found matching posts -->
<div style="display: none;">
  <?php $i = 1; ?>
  <?php while ( have_posts() ) : the_post(); ?>
  <?php if ( get_post_meta($post->ID, 'latlng', true) !== '' ) : ?>
  <div id="item<?php echo $i; ?>">
    <p><a href="<?php the_permalink(); ?>">
      <?php the_title(); ?>
      </a></p>
    <?php the_content(); ?>
  </div>
  <?php endif; ?>
  <?php $i++;   ?>
  <?php endwhile; ?>
</div>
<script type="text/javascript">
                var locations = [
                    <?php  $i = 1; while ( have_posts() ) : the_post(); ?>
                        <?php if ( get_post_meta($post->ID, 'latlng', true) !== '' ) : ?>
                            {
                                latlng : new google.maps.LatLng<?php echo get_post_meta($post->ID, 'latlng', true); ?>, 
                                info : document.getElementById('item<?php echo $i; ?>')
                        },
                        <?php endif; ?>
                    <?php $i++; endwhile; ?>
                ];
            </script>
<div id="map" style="width: 100%; height: 700px;"></div>
<?php else : ?>
<!-- No matching posts, show an error -->
<h1>Error 404 &mdash; Page not found.</h1>
<?php endif; ?> 
```

我在从经度和纬度切换到地址时遇到了一些困难。我将不胜感激在正确方向上的任何帮助。

[感谢http://www.billerickson.net](http://www.billerickson.net)，我最近一直在使用以下代码

```
if(is_single()):
global $post;
    $address = get_post_meta($post->ID,'address',true);
     if (!$address) $address = '123 Main St, Austin, TX';
    $google_api_key = get_option('maps_key');
    if($address): ?>
        <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=<?php echo $google_api_key; ?>" type="text/javascript"></script>
        <div id="map_canvas" style="width: 100%; height: 100px"></div>
        <script type="text/javascript">
            function showAddress(address) {
                var map = new GMap2(document.getElementById("map_canvas"));
                var geocoder = new GClientGeocoder();
                geocoder.getLatLng(
                    address,
                    function(point) {
                        if (!point) {
                            alert(address + " not found");
                        } else {
                            map.setCenter(point, 13);
                            var marker = new GMarker(point);
                            map.addOverlay(marker);
                        }
                    }
                );
            }
        showAddress("<?php echo $address; ?>");
    </script>
<?php endif; 
```

万一;

在相应的作者页面上获取作者地址。我需要的是使用一个数组将所有作者放在同一张地图上，但我仍然很难让地图正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:59:59.280

使用 lat-lng 作为输入并检索地址的过程称为反向地理编码（正常地理编码将地址作为输入并返回 lat-lng）。Google 提供了一些地理编码选项：

*   Google Maps Developer's Guide的[**地理编码服务**部分](https://developers.google.com/maps/documentation/javascript/geocoding)概述了以 JavaScript 客户端为中心的服务，该服务旨在用于响应网页上的动态用户交互的 JavaScript 代码。
*   Google [Geocoding API Developer's Guide](https://developers.google.com/maps/documentation/geocoding/)介绍了 API Web 服务，旨在更多地在服务器端用于预先知道的地址，而不是支持动态地图交互。

我已经包括了两者，因为看起来您正在使用静态数据。但我不确定您到底想要达到什么目标，因此地理编码服务可能更合适，或者将来会有用。请记住，这两个选项的服务条款都**要求您使用在 Google 地图上下文中检索到的**数据，并且不得保存数据来构建地理编码数据目录。还有使用限制和其他限制，因此您需要仔细阅读这些部分。我希望这是您正在寻找的，这会有所帮助-

# vim - 终端编码如何在 vim 中工作？

> ID：10941643
> 
> 赞同：3
> 
> 时间：2012-06-08T00:22:28.550
> 
> 标签：vim, encoding, terminal

## 在 GNOME 终端中（3.4.1.1）

```
$ echo $LANG
en_US.UTF-8

$ echo 你好 | iconv -f UTF8 -t UTF32BE | tee hello.txt
O`Y} 
```

## 在 vim(7.3) 中：

```
$ vim -N -u NONE --cmd 'set tenc=utf32 enc=utf32 fencs=utf32be' hello.txt
你好
~
~
~    

:set tenc enc fenc
  termencoding=ucs-4
  encoding=ucs-4
  fileencoding=ucs-4 
```

* * *

终端无法显示`UTF32`字符。
在修改了 Vim 的几个编码选项之后。
Vim 仍然可以`UTF32`毫无问题地显示。
为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T03:25:00.217

# xml - 访问数据库的 xsl 转换

> ID：10941645
> 
> 赞同：0
> 
> 时间：2012-06-08T00:23:00.530
> 
> 标签：xml, ms-access

我正在尝试使用 XSL 将 rss 提要转换为 Access 数据库，下面是我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/">

    <rss>
      <xsl:apply-templates select="rss/channel"/>

    </rss>

  </xsl:template>

  <xsl:template match="rss/channel">
    <xsl:variable name="title" select="title"/>
    <xsl:variable name="link" select="link"/>
    <xsl:variable name="description" select="description"/>

    <channelTitle>
      <xsl:value-of select="title"/>
    </channelTitle>
    <channelDesc>
      <xsl:value-of select="description"/>
    </channelDesc>

    <xsl:apply-templates select="item"/>

  </xsl:template>

  <xsl:template match="item">
    <xsl:variable name="item_link" select="link"/>
    <xsl:variable name="item_title" select="description"/>
    <item>
      <xsl:for-each select="item_link">
        <xsl:value-of select="title"/>
      </xsl:for-each>
    </item>
  </xsl:template>

</xsl:stylesheet> 
```

基本上我想要做的是循环并显示所有项目并在每个条目上印上通道（我不知道如何在访问中的 rss 的通道和项目元素之间创建关系：S）

如果有人能指出我正确的方向，那么一切都会好起来的

谢谢

# php - json_encode 格式与 jQuery Calender 格式要求不匹配

> ID：10941646
> 
> 赞同：-2
> 
> 时间：2012-06-08T00:23:07.083
> 
> 标签：php, json

我正在使用期望这种 JSON 格式的 jQuery 日历：

```
string(138) "[{"title":"Event1","start":"2012-06-10"},{"id":222,"title":"Event2","start":"2012-06-20","end":"2012-06-22","url":"http:\/\/yahoo.com\/"}]" 
```

但是，我得到的是：

```
[{"title":"Event1","start":"2012-06-10"},{"id":222,"title":"Event2","start":"2012-06-20","end":"2012-06-22","url":"http:\/\/yahoo.com\/"}]array(2) { [0]=> array(2) { ["title"]=> string(6) "Event1" ["start"]=> string(10) "2012-06-10" } [1]=> array(5) { ["id"]=> int(222) ["title"]=> string(6) "Event2" ["start"]=> string(10) "2012-06-20" ["end"]=> string(10) "2012-06-22" ["url"]=> string(17) "http://yahoo.com/" } } 
```

问题是一个说它是一个`string(138)`，而另一个是一个`array`。

这是我的代码：

```
$myHolder = array();
$myHolder[] = array(
    'title' => "Event1",
    'start' => "$year-$month-10",
);
$myHolder[] = array(
    'id' => 222,
    'title' => "Event2",
    'start' => "$year-$month-20",
    'end' => "$year-$month-22",
    'url' => "http://yahoo.com/"
);

echo json_encode(($myHolder)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:31:12.017

这会产生您正在寻找的确切字符串：

```
ob_start();
var_dump( json_encode( $myHolder));
$output = trim( ob_get_clean()); 
```

`var_dump`但是，我怀疑将生成的字符串长度/格式作为 JS 日历的输入是否会有所帮助。不过，如果这是您需要的，那么您可以通过以下方式获得它。

[演示](http://codepad.viper-7.com/gX4Kzh)

# python - Python，asyncore，asynchat，Python 2.7.3 Mac ONLY 错误文件描述符错误

> ID：10941649
> 
> 赞同：2
> 
> 时间：2012-06-08T00:23:18.643
> 
> 标签：python

当我尝试强制断开用户与我的自定义 Python 服务器的连接时出现崩溃错误。我正在使用 asyncore 和 asynchat 类。

但是当我想像这样强制断开连接时

```
asynchat.async_chat.close (self) 
```

我收到了这个错误：

```
asyncore.loop()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/asyncore.py", line 216, in loop
    poll_fun(timeout, map)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/asyncore.py", line 145, in poll
    r, w, e = select.select(r, w, e, timeout)
select.error: (9, 'Bad file descriptor') 
```

但仅在 Python Mac 上。在 Windows 上没有问题...

asyncore.py 类的代码源中有一个执行。但是服务器崩溃了。

```
 try:
        r, w, e = select.select(r, w, e, timeout)
    except select.error, err:
        if err.args[0] != EINTR:
            raise
        else:
            return 
```

这么奇怪...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:28:57.837

我刚刚在 Google 上找到了一个帖子：http: [//bytes.com/topic/python/answers/589612-asyncore-select-statement-problem](http://bytes.com/topic/python/answers/589612-asyncore-select-statement-problem)

此问题仅在 OS X 上发生。

修改并设置from`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/asyncore.py`的默认值to ：`use_poll``False``True`

第 207 行：

```
def loop(timeout=30.0, use_poll=False, map=None, count=None): 
```

到

```
def loop(timeout=30.0, use_poll=True, map=None, count=None): 
```

# r - 将绘制的线段末端从圆形更改为扁平

> ID：10941650
> 
> 赞同：12
> 
> 时间：2012-06-08T00:23:24.413
> 
> 标签：r

当我使用`segments()`R 绘制线段时，末端总是呈圆形。我怎样才能把两端改成平的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T07:12:34.987

来自`?par`：

```
 ‘lend’ The line end style.  This can be specified as an integer or
      string:

      ‘0’ and ‘"round"’ mean rounded line caps [_default_];

      ‘1’ and ‘"butt"’ mean butt line caps;

      ‘2’ and ‘"square"’ mean square line caps. 
```

例如：

```
plot(0:1,0:1,type="n")
par(lend=0); segments(0,0.2,1,0.2,lwd=8)
par(lend=1); segments(0,0.4,1,0.4,lwd=8)
par(lend=2); segments(0,0.6,1,0.6,lwd=8) 
```

或`segments(0,0.2,1,0.2,lwd=8, lend=1)`等等。 ![在此处输入图像描述](../Images/76c4453f84559c6457942baab86f38c1.png)

（您必须非常仔细地看才能看到区别，尤其是“对接”和“方形”大写之间）

# c# - 创建文件，递归创建目录

> ID：10941657
> 
> 赞同：60
> 
> 时间：2012-06-08T00:24:17.130
> 
> 标签：c#

我正在阅读一些 C# 的文件 IO 教程并设法写出一些文件，但是如果我给出的路径包含目录怎么办？

例如，我想创建名为`data/my_file`except`data`文件夹的文件不存在。

线，

```
BinaryWriter outFile = new BinaryWriter(File.OpenWrite(path)); 
```

上面的字符串在哪里`path`，崩溃并显示部分路径不存在的消息，这意味着 C# 没有按要求创建它们。

我希望 C# 处理所有杂乱的目录创建和检查，而不是我必须解析路径并创建所有必要的目录。这可能吗？否则，是否有一段代码可以复制到我的项目中，它可以处理我可能忽略的任何内容（因为我对文件管理知之甚少）。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-06-08T00:25:51.903

[System.IO.Directory.CreateDirectory()](http://msdn.microsoft.com/en-us/library/system.io.directory.createdirectory%28v=vs.100%29.aspx)将在指定路径中创建所有目录和子目录，如果它们不存在的话。

您可以调用它并传递路径，以确保在写入文件之前创建文件夹结构。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-08T14:16:57.443

虽然`System.IO.Directory.CreateDirectory()`确实会递归地为您创建目录，但我遇到了一种情况，我必须想出自己的方法。基本上，`System.IO`不支持超过 260 个字符的路径，这迫使我使用该`Delimon.Win32.IO`库，它适用于长路径，但不递归创建目录。

这是我用于递归创建目录的代码：

```
void CreateDirectoryRecursively(string path)
{
    string[] pathParts = path.Split('\\');

    for (int i = 0; i < pathParts.Length; i++)
    {
        if (i > 0)
            pathParts[i] = Path.Combine(pathParts[i - 1], pathParts[i]);

        if (!Directory.Exists(pathParts[i]))
            Directory.CreateDirectory(pathParts[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-25T21:25:57.867

这是我通常的做法

```
Directory.CreateDirectory(Path.GetDirectoryName(filePath)); 
```

^ 这应该注意确保创建文件之前的所有必要文件夹（无论其中一些是否已经存在）。例如，如果你传递它“c:/a/b/c/data/my file.txt”，它应该确保创建了“c:/a/b/c/data”路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-17T23:03:10.513

因此，以上对于基本目录创建对我来说并不是很好。我对此进行了一些修改，以处理驱动器号的常见情况和最后带有文件资源的路径。

```
 public bool CreateDirectoryRecursively(string path)
    {
        try
        {
            string[] pathParts = path.Split('\\');
            for (var i = 0; i < pathParts.Length; i++)
            {
                // Correct part for drive letters
                if (i == 0 && pathParts[i].Contains(":"))
                {
                    pathParts[i] = pathParts[i] + "\\";
                } // Do not try to create last part if it has a period (is probably the file name)
                else if (i == pathParts.Length-1 && pathParts[i].Contains("."))
                {
                    return true;
                }
                if (i > 0) { 
                    pathParts[i] = Path.Combine(pathParts[i - 1], pathParts[i]);
                }
                if (!Directory.Exists(pathParts[i]))
                {
                    Directory.CreateDirectory(pathParts[i]);
                }
            }
            return true;
        }
        catch (Exception ex)
        {
            var recipients = _emailErrorDefaultRecipients;
            var subject = "ERROR: Failed To Create Directories in " + this.ToString() + " path: " + path;
            var errorMessage = Error.BuildErrorMessage(ex, subject);
            Email.SendMail(recipients, subject, errorMessage);
            Console.WriteLine(errorMessage);
            return false;

        }

    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-30T11:16:22.517

以前的答案没有处理网络路径。附加的代码也可以处理。

```
/// <summary>
/// tests (and creates missing) directories in path containing many 
subDirectories which might not exist.
    /// </summary>
    /// <param name="FN"></param>
    public static string VerifyPath(string FN, out bool AllOK)
    {
        AllOK = true;
        var dir = FolderUtils.GetParent(FN);
        if (!Directory.Exists(dir))//todo - move to folderUtils.TestFullDirectory
        {
            const char DIR = '\\';
            //string dirDel = "" + DIR;

            string[] subDirs = FN.Split(DIR);
            string dir2Check = "";
            int startFrom = 1;//skip "c:\"
            FN = CleanPathFromDoubleSlashes(FN);
            if (FN.StartsWith("" + DIR + DIR))//netPath
                startFrom = 3;//FN.IndexOf(DIR, 2);//skip first two slashes..
            for (int i = 0; i < startFrom; i++)
                dir2Check += subDirs[i] + DIR;//fill in begining

            for (int i = startFrom; i < subDirs.Length - 1; i++)//-1 for the file name..
            {
                dir2Check += subDirs[i] + DIR;
                if (!Directory.Exists(dir2Check))
                    try
                    {
                        Directory.CreateDirectory(dir2Check);
                    }
                    catch { AllOK = false; }
            }
        }
        if (File.Exists(FN))
            FN = FolderUtils.getFirstNonExistingPath(FN);
        if (FN.EndsWith("\\") && !Directory.Exists(FN))
            try { Directory.CreateDirectory(FN); }
            catch
            {
                HLogger.HandleMesssage("couldn't create dir:" + FN, TypeOfExceptions.error, PartsOfSW.FileStructure);
                AllOK = false;
            }

        return FN;

    } 
```

还有“CleanDoubleSlashes 函数”：

```
 public static string CleanPathFromDoubleSlashes(string basePath)
    {
        if (string.IsNullOrEmpty(basePath) || basePath.Length < 2)//don't clean first \\ of LAN address
            return basePath;
        for (int i = basePath.Length - 1; i > 1; i--)
        {
            if ((basePath[i] == '\\' && basePath[i - 1] == '\\') || (basePath[i] == '/' && basePath[i - 1] == '/'))
            {
                basePath = basePath.Remove(i, 1);//Substring(0, i - 2) + basePath.Substring(i, basePath.Length - 1 - i);
            }
        }
        return basePath;
    } 
```

# session - Express.js 3beta 还是 2.x？

> ID：10941658
> 
> 赞同：0
> 
> 时间：2012-06-08T00:24:18.643
> 
> 标签：session, node.js, express, socket.io

我仍在尝试学习 node.js + express.js 来制作一些东西......但是在阅读旧文档并将它们“转换”为新的 express 很多天之后，我刚刚发现 Express 3.0 beta 就是这样接缝，非常不稳定，当然，记录非常非常糟糕。所以，问题是，我不知道为什么 npm 中的默认安装是 3.0，如果它不稳定，我只需要知道 3.0 是否可以处理（无需我自己纠正所有库）：

**会话、身份验证和 socket.io。**

我至少是那些致力于制作我的项目的人，但是如果 3.0 不能处理它，我还是继续使用 2.x 会更好吗？

感谢大家的帮助，我差点放弃这个框架了，学起来太郁闷了=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:31:21.797

我上次使用 node & express 时使用了 express v2.5.8 - 我遇到了 express 3.0 (alpha) 的一些问题并恢复到 2.+ 并绕过了任何新版本都会弹出的问题。
我建议您等待更稳定的 3.0 版本。到那时，只需将 node/socket.io 等与 express 2.+ 一起使用。

# zend-form - 使用字段集时在 ZF2 中填充表单数据

> ID：10941659
> 
> 赞同：3
> 
> 时间：2012-06-08T00:24:25.380
> 
> 标签：zend-form, zend-framework2

我目前正在使用 ZF2 beta 4，当我尝试在表单中使用字段集并在提交表单时将数据返回到表单时，我似乎被卡住了。我不确定我是否没有为字段集设置正确的输入过滤器，或者我遗漏了一些东西。例如，我有以下内容（简化为清楚）：

**控制器**

```
public function indexAction(){
   $form = new MyForm();
   $request = $this->getRequest();
          if ($request->isPost()) {
                 $form->setData($request->post());
                 if ($form->isValid()) {
                        //Do something
                        print_r($form->getData()); //for debug
                 }
          }
   return array('form' => $form);
} 
```

**MyForm.php**

```
class MyForm extends Form
{
    public function __construct()
    {
        parent::__construct();
        $this->setName('myForm');
        $this->setAttribute('method', 'post');

        $this->add(array(
                    'name' => 'title',
                    'attributes' => array(
                    'type'  => 'text',
                    'label' => 'Title',
                    ),
                 ));

        $this->add(new MyFieldset('myfieldset'));

        //setting InputFilters here
        $inputFilter = new InputFilter();
        $factory = new InputFactory();

        $inputFilter->add($factory->createInput(array(
            'name'     => 'title',
            'required' => true,
            'filters'  => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim'),
            ),
        )));

        //Now add fieldset Input filter
        foreach($this->getFieldsets() as $fieldset){
              $fieldsetInputFilter = $factory->createInputFilter($fieldset->getInputFilterSpecification());
              $inputFilter->add($fieldsetInputFilter,$fieldset->getName());
        }

        //Set InputFilter
        $this->setInputFilter($inputFilter);
    }
} 
```

**MyFieldset.php**

```
class MyFieldset extends Fieldset implements InputFilterProviderInterface{
    public function __construct($name)
    {
        parent::__construct($name);
        $factory = new Factory();

        $this->add($factory->createElement(array(
            'name' => $name . 'foo',
            'attributes' => array(
                'type'  => 'text',
                'label' => 'Foo',
            ),
        )));
    }

    public function getInputFilterSpecification(){
        return array(
            'foo' => array(
                'required' => true,
                'filters'  => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
            ),
        );
    }
} 
```

我能够按预期输出表单，最终得到两个输入元素，名为“title”和“myfieldsetfoo”（使用 ViewHelper 输出时给出的名称）。因此，当我提交原始帖子时，当然会显示“title”和“myfieldsetfoo”的值。但是，当我使用 SetData() 时，不会填充字段集的值（尽管我可以看到原始帖子对象中的值）。相反，检查 '$form->getData()' 我收到的输出：

```
Array(
   [title] => Test,
   [myfieldset] => Array(
                         [foo] =>
                        )
) 
```

我错过了什么？我需要做什么才能让 ZF2 了解如何填充字段集？

感谢您的帮助，这让我发疯了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T20:23:27.413

我这样做的原因是连接 InputFilter，这样我就可以处理发布的整个 HTML 表单数组。

```
<form method="POST">
<input type="text" name="main[name]" />
<input type="text" name="main[location]" />
<input type="text" name="contact[telephone]" />

<input type="submit" value="Send" />
</form> 
```

这将创建一个发布的数组，如

```
post["main"]["name"]
post["main"]["location"]
post["contact"]["telephone"] 
```

过滤和验证：

```
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\Factory as InputFactory;

$post = $this->request->getPost();
$inputFilter = new InputFilter();
$factory = new InputFactory();

// $post["main"]
$mainFilter = new InputFilter();
$mainFilter->add($factory->createInput(array(
    'name'     => 'name',
    'required' => true,
    'filters'  => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
    'validators' => array(
        array(
            'name'    => 'StringLength',
            'options' => array(
                'encoding' => 'UTF-8',
                'min'      => 1,
                'max'      => 100,
            ),
        ),
    ),
    )));

$mainFilter->add($factory->createInput(array(
    'name'     => 'location',
    'required' => true,
    'filters'  => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
    'validators' => array(
        array(
            'name'    => 'StringLength',
            'options' => array(
                'encoding' => 'UTF-8',
                'min'      => 1,
                'max'      => 100,
            ),
        ),
    ),
    )));
$inputFilter->add($mainFilter, "main");

// $post["contact"]
$contactFilter = new InputFilter();
$contactFilter->add($factory->createInput(array(
    'name'     => 'name',
    'required' => true,
    'filters'  => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
    'validators' => array(
        array(
            'name'    => 'StringLength',
            'options' => array(
                'encoding' => 'UTF-8',
                'min'      => 1,
                'max'      => 100,
            ),
        ),
    ),
    )));
$contactFilter->add($mainFilter, "contact");

//Set posted data to InputFilter
$inputFilter->setData($post->toArray()); 
```

[http://www.unexpectedit.com/zf2/inputfilter-validate-and-filter-a-form-data-with-fieldsets](http://www.unexpectedit.com/zf2/inputfilter-validate-and-filter-a-form-data-with-fieldsets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T15:14:17.813

我认为您忘记在控制器中准备表单：

```
return array('form' => $form->prepare()); 
```

这会将您的字段集的“名称”字段重命名为“myfieldset [foo]”，因此您不必自己添加字段集名称。

只需使用

```
'name' => 'foo' 
```

代替

```
'name' => $name . 'foo' 
```

在您的字段集类中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T09:35:47.270

我认为问题在于您在控制器中声明了一个新表单。这清除了以前的表格。

```
$form = new MyForm(); 
```

我使用**服务管理器**来声明表单和过滤器。然后在控制器中我做：

```
$form = $this->getServiceLocator()->get('my_form'); 
```

这样我总能得到我想要的对象

# 更新

我不再使用服务管理器来调用表单。我只是调用一个新表单并发出 $form->setData($data);

数据源也可以是实体，但我会发出：$form->bind($entity)

# jsf - 处理后退按钮和生成的 Phase_ID

> ID：10941664
> 
> 赞同：0
> 
> 时间：2012-06-08T00:24:51.310
> 
> 标签：jsf, jsf-2

我处于以下情况：

1.  JSF（MyFaces 2.1.7 和 RichFaces 3.3.3）
2.  一个会话作用域 Bean TEST_PAGE
3.  使用 BACK 按钮的用户没有尽头
4.  服务器上的状态保存

设想：

*   用户单击链接以导航到具有 Session Scoped bean (TEST_PAGE) 的页面
*   用户点击另一个链接
*   用户按下浏览器的后退按钮，将它们放回 TEST_PAGE
*   用户尝试在此页面中搜索

在搜索时，支持 bean 会抛出异常，因为有很多`null`值。原因是当他们按下“搜索”时，页面处于`RESTORE_VIEW`同步状态。

我尝试在页面上禁用缓存，以强制用户在返回按钮上刷新页面，但是由于许多用户抱怨“为什么我不能使用返回按钮，我以前可以这样做！”而引起强烈反对。并导致帮助台票，因为他们认为应用程序在“确认表单重新提交”页面 chrome/IE/Firefox 显示上崩溃，因此经理希望我寻找替代方案。

我的问题：

可以检测 RESTORE_VIEW 的当前 Phase_ID 并且在此阶段不进行任何处理以避免异常，但仅此一项且仅重新调整即可为用户提供部分页面视图。是否可以在这种情况下将页面放入`RENDER_RESPONSE`然后进行处理？这应该刷新页面。

## 问题第 2 部分

由于建议（或常见/好的）实践是禁用动态页面上的缓存，我已经这样做了，并且必须重新教育顽固的用户。

但是我有以下问题。

在禁用缓存的页面上按返回按钮时，浏览器会显示“确认表单重新提交”（chrome），用户可以在其中按下`Refresh / F5`或`Enter`键。

如果`Refresh/ F5`是该动作，那么在我检测`RESTORE_VIEW`阶段并避免在该阶段进行任何处理并让处理分阶段完成的情况下，一切都很好`RENDER_RESPONSE`。但是，如果`Enter`按下，PhaseID 位于`RENDER_RESPONSE(6)`但少数下拉控件的值为 null，这会导致页面失败。因此，我进行检查以检测此类情况并显示 FaceMessage 以告诉用户刷新页面。

问题是，我可以强制页面刷新而不是强制用户这样做吗？此页面的导航案例采用以下格式：

```
 <navigation-rule>
      <navigation-case>
       <from-outcome>/app/ord/r1</from-outcome>
       <to-view-id>/jsp/ordersHistory.jsp</to-view-id>
      </navigation-case>
     </navigation-rule> 
```

我在网上看到`faces-redirect=true`了用于强制重新加载页面的代码片段，但我无法让它工作！有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T01:35:32.413

禁用动态页面上的浏览器缓存是可行的方法。

至于这之后引起的新问题，这很可能是由于webapp设计不佳造成的。重新设计您的 web 应用程序以使用 GET 而不是 POST 进行普通的页面到页面导航（即仅使用`<h:link>`或`<h:outputLink>`代替`<h:commandLink>`）。为需要将响应发送到不同页面的 POST 请求实现 POST-Redirect-GET 模式，或者将它们更改为返回到同一页面并有条件地显示结果，如果可能的话，通过 ajax。检查某些表单是否最好是 GET 表单（例如，像 Google 这样的搜索表单）。重新考虑是否该 bean*真的*需要成为会话范围的，您通常只将会话范围用于登录用户及其首选项，而不用于请求或查看范围数据。

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)
*   [刷新页面时如何避免重新执行最后一个表单提交操作？](https://stackoverflow.com/questions/7850831/how-to-avoid-re-execution-of-last-form-submit-action-when-the-page-is-refreshed)
*   [JSF 2.0 View Scope 后退按钮安全吗？](https://stackoverflow.com/questions/9930900/is-jsf-2-0-view-scope-back-button-safe/)

# c# - 转换自定义操作过滤器以供 Web API 使用？

> ID：10941669
> 
> 赞同：21
> 
> 时间：2012-06-08T00:25:49.337
> 
> 标签：c#, asp.net-mvc, c#-4.0, asp.net-web-api, action-filter

我发现了一个非常好的操作过滤器，它将逗号分隔的参数转换为通用类型列表：[http ://stevescodingblog.co.uk/fun-with-action-filters/](http://stevescodingblog.co.uk/fun-with-action-filters/)

我想使用它，但它不适用于 ApiController，它完全忽略它。有人可以帮助将其转换为 Web API 使用吗？

```
[AttributeUsage(AttributeTargets.Method)]
public class SplitStringAttribute : ActionFilterAttribute
{
    public string Parameter { get; set; }

    public string Delimiter { get; set; }

    public SplitStringAttribute()
    {
        Delimiter = ",";
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.ActionParameters.ContainsKey(this.Parameter))
        {
            string value = null;
            var request = filterContext.RequestContext.HttpContext.Request;

            if (filterContext.RouteData.Values.ContainsKey(this.Parameter)
                && filterContext.RouteData.Values[this.Parameter] is string)
            {
                value = (string)filterContext.RouteData.Values[this.Parameter];
            }
            else if (request[this.Parameter] is string)
            {
                value = request[this.Parameter] as string;
            }

            var listArgType = GetParameterEnumerableType(filterContext);

            if (listArgType != null && !string.IsNullOrWhiteSpace(value))
            {
                string[] values = value.Split(Delimiter.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

                var listType = typeof(List<>).MakeGenericType(listArgType);
                dynamic list = Activator.CreateInstance(listType);

                foreach (var item in values)
                {
                    try
                    {
                        dynamic convertedValue = TypeDescriptor.GetConverter(listArgType).ConvertFromInvariantString(item);
                        list.Add(convertedValue);
                    }
                    catch (Exception ex)
                    {
                        throw new ApplicationException(string.Format("Could not convert split string value to '{0}'", listArgType.FullName), ex);
                    }
                }

                filterContext.ActionParameters[this.Parameter] = list;
            }
        }

        base.OnActionExecuting(filterContext);
    }

    private Type GetParameterEnumerableType(ActionExecutingContext filterContext)
    {
        var param = filterContext.ActionParameters[this.Parameter];
        var paramType = param.GetType();
        var interfaceType = paramType.GetInterface(typeof(IEnumerable<>).FullName);
        Type listArgType = null;

        if (interfaceType != null)
        {
            var genericParams = interfaceType.GetGenericArguments();
            if (genericParams.Length == 1)
            {
                listArgType = genericParams[0];
            }
        }

        return listArgType;
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T01:21:15.063

您使用什么命名空间`ActionFilterAttribute`？对于 Web API，您需要使用`System.Web.Http.Filters`命名空间而不是`System.Web.Mvc`.

**编辑**

这是一个粗略的转换，没有经过全面测试。

**拆分字符串属性**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Net.Http;
using System.Web.Http.Controllers;
using System.Web.Http.Filters;

namespace StackOverflowSplitStringAttribute.Infrastructure.Attributes
{
    [AttributeUsage(AttributeTargets.Method)]
    public class SplitStringAttribute : ActionFilterAttribute
    {
        public string Parameter { get; set; }

        public string Delimiter { get; set; }

        public SplitStringAttribute()
        {
            Delimiter = ",";
        }

        public override void OnActionExecuting(HttpActionContext filterContext)
        {
            if (filterContext.ActionArguments.ContainsKey(Parameter))
            {
                var qs = filterContext.Request.RequestUri.ParseQueryString();
                if (qs.HasKeys())
                {
                    var value = qs[Parameter];

                    var listArgType = GetParameterEnumerableType(filterContext);

                    if (listArgType != null && !string.IsNullOrWhiteSpace(value))
                    {
                        string[] values = value.Split(Delimiter.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

                        var listType = typeof(List<>).MakeGenericType(listArgType);
                        dynamic list = Activator.CreateInstance(listType);

                        foreach (var item in values)
                        {
                            try
                            {
                                dynamic convertedValue = TypeDescriptor.GetConverter(listArgType).ConvertFromInvariantString(item);
                                list.Add(convertedValue);
                            }
                            catch (Exception ex)
                            {
                                throw new ApplicationException(string.Format("Could not convert split string value to '{0}'", listArgType.FullName), ex);
                            }
                        }

                        filterContext.ActionArguments[Parameter] = list;
                    }
                }
            }

            base.OnActionExecuting(filterContext);
        }

        private Type GetParameterEnumerableType(HttpActionContext filterContext)
        {
            var param = filterContext.ActionArguments[Parameter];
            var paramType = param.GetType();
            var interfaceType = paramType.GetInterface(typeof(IEnumerable<>).FullName);
            Type listArgType = null;

            if (interfaceType != null)
            {
                var genericParams = interfaceType.GetGenericArguments();
                if (genericParams.Length == 1)
                {
                    listArgType = genericParams[0];
                }
            }

            return listArgType;
        }

    }
} 
```

**CSVController**

```
using System.Web.Http;
using System.Collections.Generic;
using StackOverflowSplitStringAttribute.Infrastructure.Attributes;

namespace StackOverflowSplitStringAttribute.Controllers
{
    public class CsvController : ApiController
    {

        // GET /api/values

        [SplitString(Parameter = "data")]
        public IEnumerable<string> Get(IEnumerable<string> data)
        {
            return data;
        }
    }
} 
```

**示例请求**

```
http://localhost:52595/api/csv?data=this,is,a,test,joe 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T22:44:41.320

这是另一种方式：

```
public class ConvertCommaDelimitedList<T> : CollectionModelBinder<T>
{
    public override bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
   {
       var _queryName = HttpUtility.ParseQueryString(actionContext.Request.RequestUri.Query)[bindingContext.ModelName];
        List<string> _model = new List<string>();
        if (!String.IsNullOrEmpty(_queryName))
            _model = _queryName.Split(',').ToList();

        var converter = TypeDescriptor.GetConverter(typeof(T));
        if (converter != null)
            bindingContext.Model = _model.ConvertAll(m => (T)converter.ConvertFromString(m));
        else
            bindingContext.Model = _model;

        return true;
    }
} 
```

并在 ApiController ActionMethod 中列出您的参数：

```
[ModelBinder(typeof(ConvertCommaDelimitedList<decimal>))] List<decimal> StudentIds = null) 
```

`StudentIds`查询字符串参数 ( `&StudentIds=1,2,4`)在哪里

# c# - 循环中的 PerformanceCounter

> ID：10941676
> 
> 赞同：0
> 
> 时间：2012-06-08T00:26:27.657
> 
> 标签：c#, multithreading, winapi, cpu, performancecounter

我目前正在尝试编写一个每秒运行 100 次完全相同的代码的应用程序。我已经使用 .NET 框架的内置计时器进行了一些测试。我测试了 System.Threading.Timer 类、System.Windows.Forms.Timer 类和 System.Timers.Timer 类。对于我正在尝试做的事情，它们似乎都不够准确。我发现了 PerformanceCounters 并且目前正在尝试在我的应用程序中实现它。但是，我的程序在空闲时占用了 CPU 的整个内核时遇到了一些麻烦。我只需要它每秒激活 100 次。我的循环如下所示：

```
long nextTick, nextMeasure;

QueryPerformanceCounter(out start);
nextTick = start + countsPerTick;
nextMeasure = start + performanceFrequency;

long currentCount;
while (true)
{
    QueryPerformanceCounter(out currentCount);

    if (currentCount >= nextMeasure)
    {
        Debug.Print("Ticks this second: " + tickCount);
        tickCount = 0;
        nextMeasure += performanceFrequency;
    }

    if (currentCount >= nextTick)
    {
        Calculations();
        tickCount++;

        nextTick += countsPerTick;
    }
} 
```

如您所见，大多数情况下，程序将通过不断地运行 while 循环来等待再次运行 Calculations()。有没有办法阻止这种情况发生？我不想降低运行我的程序的计算机的速度。不幸的是，System.Thread.Thread.Sleep 也很“不准确”，但如果没有其他解决方案，我可以使用它。

我基本上要问的是：有没有办法让无限循环减少 CPU 密集度？有没有其他方法可以准确地等待特定的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:31:39.473

我相信您知道，Windows 不是实时操作系统，因此永远无法保证您的代码会随心所欲地运行。

话虽如此，就让步给其他线程而言，最有效的可能是使用 Thread.Sleep() 作为计时器。如果您想要比默认值更高的精度，您可以发出一个 timeBeginPeriod ，其所需的分辨率低至一毫秒。该函数必须是从 winmm.dll 导入的 DLLImported。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:50:09.393

[`timeBeginPeriod(1)`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx)与普通计时器一起使用或`Thread.Sleep`应该可以正常工作。

请注意，这具有全局影响。有人声称它会增加功耗，因为它会强制 Windows 计时器更频繁地运行，从而缩短 CPU 睡眠时间。这意味着您通常应该避免它。但是，如果您需要高度准确的计时，它肯定是比忙碌等待更好的选择。

# php - Simplexml 问题 Can't get Null from empty 属性

> ID：10941677
> 
> 赞同：0
> 
> 时间：2012-06-08T00:27:06.237
> 
> 标签：php, null, simplexml

嗨，伙计们希望您能提供帮助：

我正在尝试阅读作为体育调度程序一部分的 xml。

下面是我正在阅读的 XML 示例。到目前为止，使用 Simpmle XML 我已经能够正确读取游戏的所有属性。但是在示例中，您可以看到 homescore 和 awayscore 只会显示为“”，直到输入分数。这很好，因为我想放一个简单的 if 语句，说如果分数为空，则回显“-”。这样观众就知道他们还没有玩。

```
<Fixture Id="404" FixtureName="Round 4" ResourceId="4" PlayingAreaName="Court C" VenueId="2" VenueName="Adelaide Indoor Sports Centre" MapLink="" HomeTeamId="212" HomeTeam="THE SHINERS" HomeTeamScore="29" HomeTeamForfeit="False" AwayTeamId="203" AwayTeam="SANDBAR WARRIORS" AwayTeamScore="8" AwayTeamForfeit="False" Duration="40" Umpires="" CrossLeague="False" DivisionName="Division 1" CalendarColour="FFFF00" ResourceOrder="3" DateTime="13/03/2012 21:20"/>
<Fixture Id="406" FixtureName="Round 4" ResourceId="5" PlayingAreaName="Court D" VenueId="2" VenueName="Adelaide Indoor Sports Centre" MapLink="" HomeTeamId="210" HomeTeam="WE THOUGHT IT WAS A DISCO" HomeTeamScore="" HomeTeamForfeit="False" AwayTeamId="206" AwayTeam="AVERAGE JOE'S" AwayTeamScore="" AwayTeamForfeit="False" Duration="40" Umpires="" CrossLeague="False" DivisionName="" CalendarColour="FFFF00" ResourceOrder="4" DateTime="13/03/2012 21:20"/> 
```

但是“”（空属性）总是返回零。有小费吗？我对php比较陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:06:40.420

如果我理解正确，您想区分`""`和`"0"`。因为 PHP 尽可能地尝试猜测您要比较的类型，所以语句喜欢`$foo == 0`并且`$foo == ''`不会这样做，因为它会猜测您想要比较数字，并将`""`其视为`0`.

有几种方法可以解决这个问题：

*   使用`===`运算符代替`==`（或`!==`代替`!=`）（参见[http://uk3.php.net/manual/en/language.operators.comparison.php](http://uk3.php.net/manual/en/language.operators.comparison.php)）
*   检查字符串的长度，`strlen`看它是否为空
*   `is_int`使用,`is_string`等检查变量的类型-*如果您从 SimpleXML 中获取值，这可能不起作用，它返回自己的类型*

由于您使用的是 SimpleXML，我想代码看起来像：

```
if ( (string)$fixture['HomeTeamScore'] === '' )
{
    echo '-';
}
else
{
    echo (string)$fixture['HomeTeamScore'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:47:51.223

您可以使用 empty() 函数。

```
if (empty($fixture['HomeTeamScore'])) {
    echo "-";
} 
```

[PHP：空 - 手动](http://php.net/manual/en/function.empty.php)

# scala - 为什么使用 scala.collection.immutable.Stack

> ID：10941679
> 
> 赞同：12
> 
> 时间：2012-06-08T00:27:41.467
> 
> 标签：scala

我需要一些东西来存储 LIFO。除了push和pop之外，不需要遍历等功能。

我在 scala 集合中找到了用于创建堆栈的特殊类。但它在模式匹配和其他方便的 scala 习惯用法中缺少 Nil 对象。不可变列表乍一看很合适，它们在构造和提取方面都有*缺点*，而这都是 LIFO 所需要的。

scala.collection.immutable.Stack 存在背后有什么原因吗？为什么我更喜欢使用它，有哪些用例可以显示它的好处？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T00:37:00.660

从[API 文档](http://www.scala-lang.org/api/current/scala/collection/immutable/Stack.html)：

> **注意：**此类仅出于历史原因而存在，并且作为可变堆栈的类似物。您可以使用列表代替不可变堆栈。

更[详细一点](http://docs.scala-lang.org/overviews/collections/concrete-immutable-collection-classes.html#immutable_stacks)：

> 不可变堆栈在 Scala 程序中很少使用，因为它们的功能包含在列表中：`push`不可变堆栈上的A 与`::`列表`pop`上的 a 相同，堆栈上的 a 与列表上的 a 相同`tail`。

所以回答你的问题：

1.  是的，它的存在是有原因的。
2.  不，你不应该喜欢它而不是列表。

# coffeescript - 用 CoffeeScript 扩展 Javascript 对象

> ID：10941681
> 
> 赞同：5
> 
> 时间：2012-06-08T00:28:11.177
> 
> 标签：coffeescript

我想通过向原型添加方法来添加扩展 javascript 对象的能力。
该方法将接收一个或多个其他对象并将所有键/值添加到`this`.
这就是我想出的：

```
Object::extend = (objects...) ->
    @[key] = value for key, value of object for object in objects 
```

或这个：

```
Object::extend = (objects...) ->
    for object in objects
        for key, value of object
            @[key] = value 
```

两者都按预期工作，并编译成相同的 javascript 代码：

```
var __slice = [].slice;

Object.prototype.extend = function() {
  var key, object, objects, value, _i, _len, _results;
  objects = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
  _results = [];
  for (_i = 0, _len = objects.length; _i < _len; _i++) {
    object = objects[_i];
    _results.push((function() {
      var _results1;
      _results1 = [];
      for (key in object) {
        value = object[key];
        _results1.push(this[key] = value);
      }
      return _results1;
    }).call(this));
  }
  return _results;
}; 
```

我不太高兴的是每个 for 循环创建的整个结果对于我的目的来说完全是多余的。
有没有办法让代码更像：

```
Object.prototype.extend = function() {
  var key, object, objects, value, _i, _len;
  objects = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
  for (_i = 0, _len = objects.length; _i < _len; _i++) {
    object = objects[_i];
    (function() {
      for (key in object) {
        value = object[key];
        this[key] = value;
      }
    }).call(this);
  }
}; 
```

谢谢。

* * *

# 编辑

我知道我可以简单地[嵌入](http://coffeescript.org/#embedded)javascript 代码，但正在寻找一个咖啡脚本解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:46:24.983

您可以尝试添加显式`return`：

```
Object::extend = (objects...) ->
    for object in objects
        for key, value of object
            @[key] = value
    return 
```

这产生了这个：

```
var __slice = [].slice;

Object.prototype.extend = function() {
  var key, object, objects, value, _i, _len;
  objects = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
  for (_i = 0, _len = objects.length; _i < _len; _i++) {
    object = objects[_i];
    for (key in object) {
      value = object[key];
      this[key] = value;
    }
  }
}; 
```

每个 CoffeeScript 函数都返回函数中最后一个表达式的值，CoffeeScript 循环也是表达式。这意味着 CoffeeScript 必须构建所有这些`_results`东西来为你的函数生成一个返回值，因为你有一个隐式`return`应用到外部循环。如果您通过添加显式“不返回任何内容”来删除该隐式`return`，那么 CS→JS 编译器似乎足够聪明，不会做所有额外的`_results`工作。

# c# - 无法使用带有 Visual Studio 2010 的 Windows 窗体恢复设计器视图窗口

> ID：10941692
> 
> 赞同：25
> 
> 时间：2012-06-08T00:29:32.413
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用 Visual Studio Express 2010 ENU SP1 编写 C# Windows 窗体应用程序。更多 VS 细节在这篇文章的底部。我最近使用设计器视图对布局进行了一些更改，然后决定我不想要这些更改，所以我关闭了设计器窗口。当我关闭项目并且更改以任何方式保存时，代码窗口仍然存在。我不关心这些变化，因为布局可以很容易地恢复，除了我找不到任何方法来重新打开可视化设计器窗口。为了恢复窗口，我尝试了以下方法：

换档 F7

在设计器代码窗口中单击鼠标右键

双击解决方案资源管理器下的设计器文件

选择解决方案资源管理器下的设计器文件并使用上下文菜单调出文件

我有一个 VS 2010 团队的评估副本，它在使用我的项目时显示完全相同的行为

我尝试了该项目的备份副本，但它在 Express 和 Team 版本中都显示相同的问题

我已经遍及 MSDN、VS 论坛和整个互联网，但没有找到任何解决方案

当我第一次启动项目时，我确实从解决方案资源管理器中重命名了 Form1.cs 文件，因为我希望应用程序的名称与 Form1 不同。这样做时，它询问了以下内容：

“你正在重命名一个文件。你想在这个项目中对代码元素‘projectname’的所有引用执行重命名吗？

我回答是的。所以现在我没有 Form1.cs 文件，而是一个包含我的“projectname.cs”和名为“projectname.Design.cs”的设计器文件的文件。这是我所做的唯一改变，我能想到的可能是相关。我确实尝试将其重命名为 Form1.cs，但这也没有解决问题。

我不得不说我是使用 Visual Studio 的新手。到目前为止，我非常喜欢它，但我现在已经死在水里了，除非我能解决这个问题，否则我将失去两周的工作。任何帮助将不胜感激。

谢谢，-汤姆

额外细节：

Windows 7 专业版 SP1 32 位 x86

Microsoft Visual Studio 2010 版本 10.0.40219.1 SP1Rel Microsoft .NET Framework 版本 4.0.30319 SP1Rel

安装版本：C# Express

微软 Visual C# 2010 01014-169-2560017-70726 微软 Visual C# 2010

Microsoft Visual C# 2010 Express - ENU 服务包 1 (KB983509) KB983509 此服务包适用于 Microsoft Visual C# 2010 Express - ENU。如果您稍后安装更新的服务包，此服务包将自动卸载。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-28T02:46:48.970

我现在意识到这是一个相当古老的线程，但我刚刚在 VS2010 的一个项目中发生了类似的事情。无法在表单设计器中编辑表单。

最后将其归结为 .csproj 文件中的问题。有一个项目组指定编译的内容。在项目组标签中，对于我的表单，它具有...

```
<Compile Include="AreaChart.cs" /> 
```

它需要...

```
<Compile Include="AreaChart.cs">
  <SubType>Form</SubType>
</Compile> 
```

缺少 SubType XML 标记。快速更改项目文件，我可以再次编辑表单。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-10-07T14:34:10.717

Just one more way to screw up the form designer - I had something like this:

```
namespace MyProgram
{
    public struct SomeStruct {
        int a,b;
    }
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
    }
} 
```

Turns out you can't put the SomeStruct definition there even though everything works fine and there were no errors. Once I moved it, I was able to see the designer view again.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-12-06T12:50:49.607

再次，这是一个旧线程，但网络兴趣表明许多人仍然有这个问题并且尚未解决。

我正在使用 VS2012，当我将一个库控件复制到一个单独的库中以供进一步开发时，它会产生 3 个表单。窗体中的所有控件在运行时显示完美，但设计器显示一个空白窗体。

问题与上述不同（完好无损），但由于这个提示，我添加了一个新表单并比较了 .csproj 文件中的条目。对于每个复制的表格，都显示了类似于以下内容的条目：

```
<Compile Include="MyForm.Designer.cs" /> 
```

需要的是：

```
<Compile Include="MyForm.Designer.cs">
    <DependentUpon>MyForm.cs</DependentUpon>
</Compile> 
```

为每个表单手动添加这些解决了这个问题。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-10-25T15:07:59.787

确保在设计器部分类之前没有声明任何类。.cs 文件需要将部分设计器类作为文件中的第一个类。

```
public partial class frmWidget : Form
{
}

public class SomeClass
{
} 
```

现在`SomeClass`不能在部分`frmWidget`类之上。重新安排后，它将自动修复设计器问题，无需重新启动 VS 或重新创建表单。我希望这有帮助。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-12-04T21:55:10.013

尝试了这个问题中提到的所有建议，Visual Studio Community 2017 没有任何效果

*   没有 Shift-F7 快照
*   没有可见的上下文菜单项
*   无需双击 MainForm.cs
*   MainForm.cs 中没有错误的类顺序
*   mysolutionname.csproj 文件中没有错误条目

### 但这对我有用

1.  右键单击您的`MainForm.cs`文件（或“Form.cs”，具体取决于您的命名方式）
2.  '从项目中排除'。这会暂时删除*MainForm.cs*、*MainForm.Designer.cs*和*MainForm.resx*
3.  使用“添加»现有项目”并选择`MainForm.cs`。这将重新包含所有三个文件。
    [当然，您应该将它们添加回与以前相同的文件夹中]
4.  双击`MainForm.cs`并神奇地打开设计视图

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-21T15:23:06.453

我有同样的问题，但我的问题是在 VS2012 上通过将一些表单拖放到不同的文件夹中引起的。

大卫上面的解决方案有助于修复它，但并没有完全解决。

如果您在子文件夹中有表单，则该`Compile Include`行应如下所示：

```
<Compile Include="SubFolderName\MyForm.Designer.cs">
    <DependentUpon>MyForm.cs</DependentUpon>
</Compile> 
```

请注意，第一行需要子文件夹名称，而第二行不需要。

我还必须在文件下方更改 EmbeddedResource 行以关联 resx 文件：

```
 <EmbeddedResource Include="SubFolderName\MyForm.resx">
        <DependentUpon>MyForm.cs</DependentUpon>
    </EmbeddedResource> 
```

再次注意，第一行提到子文件夹，而第二行没有。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-08T08:41:27.010

谢谢你的想法。我刚刚完全重新安装了 VS 2010 Team 版本的 Express 和评估版本，它现在可以神奇地工作。我不知道是什么导致了这个问题，也不知道是什么解决了它，但我现在回到了正轨。在这个论坛上提问之前，我可能应该这样做。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-07T16:08:44.983

我对VB也有同样的问题。感谢您的提示。我在 UserControl 的 .vbproj 中发现了同样的问题。

我在 .vbproj 文件中有这个：

```
<Compile Include="AddCommunicationTask.vb" /> 
```

并将其更改为：

```
<Compile Include="AddCommunicationTask.vb">
   <SubType>UserControl</SubType>
</Compile> 
```

当我重新加载它时，我仍然遇到问题并意识到我在表单类上方编写了另一个类，这导致了错误。表单类必须是第一个。我所要做的就是把我的班级往下移，把表格班放在首位。

我希望这对其他人有所帮助 - 祝你好运！

ps - 我正在使用 vs Community 2015

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-09T10:11:41.277

自从我将项目创建为 C# Windows Form App (.NET Core) 后，我遇到了同样的问题，我决定将其创建为 C# Windows Form App (.NET Framework)，现在我可以查看和使用 Designer。请注意使用“核心”与“框架”之间的区别

我希望这能够帮到你。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-10T03:59:36.450

我现在意识到这是一个*非常*古老的线程，但是我遇到了同样的问题，结果发现 csproj 文件中还有*另一个*节点可能会误入歧途；.resx 表单有一个 EmbeddedResource 节点，而我的缺少子节点 Designer。这让我可以在 IDE 中再次看到表单代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-01T11:32:39.623

虽然这是一个很老的话题，但我想分享我的案例和解决方案。

我有同样的问题，但我使用 Telerik WinForms 组件为我的`Form`. 直到我意识到 RadControls for WinForms 的设计时功能是在`Telerik.WinControls.UI.Design.dll`程序集中实现的，我才能看到设计器。然后我添加参考，现在设计师出现了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-03T08:24:54.937

我在 VS 2010 中遇到了同样的问题。我无法查看设计器表单（Connect.CS）。

我已经有了

```
<Compile Include="Connect.cs">
  <SubType>Code</SubType>
</Compile>
<Compile Include="Connect.Designer.cs">
  <DependentUpon>Connect.cs</DependentUpon>
</Compile> 
```

ItemGroup 标签中的标签，但我仍然无法查看设计器。

我正在使用名称空间指令“使用 RFCOMAPILib”，其中已经有一个 Form 元素，它与 System.Windows.Forms.Form 发生冲突。

将“公共部分类连接：表单”替换为“公共部分类连接：System.Windows.Forms.Form”后，我现在可以查看设计器。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-06T01:22:09.280

我遇到了同样的问题，我通过双击解决方案资源管理器中的 Form1.cs 文件（不是 Form1.Designer.cs 文件）返回了（设计）窗口。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-02-17T00:39:16.813

我不小心删除了我的 Form1[Design] 文件。双击 Form1.h 文件什么也没做。程序运行，按钮文本框和标签都在那里，只是没有 Form1[Design] 可见以进行编辑。我在下面修复了它： Header Files 选择 Form1.h 并转到 Form1.H 文件属性。在下拉菜单中的文件类型下将其更改为“C++ 表单”我关闭并重新启动程序。您现在应该能够双击 Form1.h 并查看您的 Form1[设计]。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-25T14:39:05.610

我有一个类似的问题，但不完全相同。

我将表单从一个项目复制到另一个项目（使用 Windows 资源管理器），然后通过右键单击 VS 中的项目并选择 > 添加 > 现有项目将其添加到新项目中。

我的错误是为表单添加了所有三个文件（.cs、.designer.cs 和 .resx）。我应该只添加 .cs 文件。

# php - php - 将 html 标签打印为文本

> ID：10941693
> 
> 赞同：3
> 
> 时间：2012-06-08T00:29:41.223
> 
> 标签：php, html, tags

我需要在屏幕上打印一个 HTML 标签作为文本（而不是代码）。

我需要读者从字面上阅读标签。

这样做的最佳做法是什么？

```
print htmlspecialchars('<meta name="copyright" content="© Winston Smith, 1984">'); 
```

或者

```
print htmlentities('<meta name="copyright" content="© Winston Smith, 1984">'); 
```

或以上都不是。

*   有没有更好的办法？
*   我还应该考虑什么？
*   最后一个问题 - 我应该使用打印、回声还是没有区别？

****编辑我****

我已经在 htmlentities() 中看到了字符“©”的问题。这只会证实我的怀疑——哪一个在所有情况下都可以安全使用——还有另一种方法可以将 html 标签打印为文本吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T00:34:50.213

基本上，使 HTML 像文本一样可读，你真正需要的是：

```
$out = strtr($input,Array("<"=>"&lt;","&"=>"&amp;")); 
```

`htmlspecialchars`基本上是 的一个子集`htmlentities`。`htmlentities`编码具有实体替代品的所有事物，即所有命名实体和少数代码。

# java - 主页按钮 Android 3.0、4.0

> ID：10941694
> 
> 赞同：0
> 
> 时间：2012-06-08T00:29:45.067
> 
> 标签：java, android, debugging, android-fragments, android-4.0-ice-cream-sandwich

我在 android 中有一个应用程序，其中包括一个应用程序主页。我覆盖了硬件主页按钮以返回 API 级别 10 或更低的应用程序主页。

我的应用程序在 Android 版本 3.0 和 4.0 上运行良好。问题是覆盖主页按钮。我发现了一个讨论（[在 Android ICS (4.0) 中禁用主页按钮](https://stackoverflow.com/questions/10077675/disable-home-button-in-android-ics-4-0)），其中包括一种以某种方式实现主屏幕的方法。这是@Chalaman 建议的。

我还没明白重点。有没有人可以通过提供一些代码来帮助我？

当我们使用：

```
<intent-filter>
   <action android:name="android.intent.action.MAIN" />
   <category android:name="android.intent.category.HOME" />
   <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

在清单文件中，当我们单击主页按钮时会弹出一个对话框。它包括家庭电话页面图标和应用程序图标。我们可以做出选择。如果我们选择应用程序图标，我们将停留在应用程序中。问题是我们也停留在同一个活动中。我怎样才能去另一个活动（我的应用程序的主页）？

我们可以在 API 级别 10 或更低级别使用它：

```
@Override
    public void onAttachedToWindow() {
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB)
            this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();
    }

    @Override 
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_HOME: 
        loadStartPage();
            break; 

        }
        return super.onKeyDown(keyCode, event);
    }

    private void loadStartPage() {
        Intent intent = new Intent(getApplicationContext(), StartActivity.class);
        intent.putExtra("user", user);
        intent.putExtra("user_id", user_id);
        intent.putExtra("server", server);
        intent.putExtra("password", password);
        main_activity.startActivity(intent);
    } 
```

如何在 API 级别 11 或更高级别加载起始页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:08:48.363

答案很简单：*不要这样做*。

用户希望他们的应用程序在整个 Android 平台上保持一致。我无法想象在这种情况下您可以证明覆盖主页按钮是合理的。

* * *

## 编辑：

需要明确的是，有些应用程序似乎覆盖了主页按钮（即车载模式应用程序，除非您单击“退出”按钮，否则它不允许您退出应用程序）。诸如此类的应用程序实际上并没有明确覆盖“主页按钮”。[**你可以在这里**](https://stackoverflow.com/a/5040120/844882)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:34:45.787

android 主屏幕只是一个应用程序。它由按下 home 键时发出的明确定义的广播意图启动。

简而言之，您实现了一个 android 应用程序，该应用程序侦听与股票 android 主屏幕应用程序侦听的相同事件。当用户按下主页时，他们将看到允许他们从股票主屏幕应用程序（我们的应用程序）中进行选择的选择器。这是意图过滤器的样子，

```
<intent-filter>
   <action android:name="android.intent.action.MAIN" />
   <category android:name="android.intent.category.HOME" />
   <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

我意识到这可能不是你想要的。但是，没有办法完全覆盖 home 键。这是故意的，因为它可以防止恶意应用程序将您锁定在主屏幕之外。主页按钮是一种保证可以工作的“让我离开这里”按钮。

您的用户可以将您的应用标记为默认处理家庭广播，但这可能也不是您想要的，因为从那时起他们希望能够进入股票主屏幕，除非他们清除默认或卸载您的应用。

阻止用户访问主页按钮是一件非常讨厌的事情。你确定那是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T13:04:59.570

覆盖 onKeydown 无法解决您的问题..当您按下主页按钮时，活动调用 onPause() ..所以将您的方法放在 onPause() 中..我想它会起作用..

```
protected void onPause() {
super.onPause();
 loadStartPage();
}
private void loadStartPage() {
    Intent intent = new Intent(getApplicationContext(), StartActivity.class);
    intent.putExtra("user", user);
    intent.putExtra("user_id", user_id);
    intent.putExtra("server", server);
    intent.putExtra("password", password);
    main_activity.startActivity(intent);
} 
```

# javascript - 在 JavaScript 中复制任意 n 维数组？

> ID：10941695
> 
> 赞同：1
> 
> 时间：2012-06-08T00:29:47.533
> 
> 标签：javascript, arrays, deep-copy

我基本上是在寻找一个通用函数 copy(array) ，它将返回相同的 n 维数组，而对前一个数组没有任何引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T00:37:58.243

这适用于数组，它不适用于嵌套对象（不是数组）：

```
function copy(arr){
    var new_arr = arr.slice(0);
    for(var i = new_arr.length; i--;)
        if(new_arr[i] instanceof Array)
            new_arr[i] = copy(new_arr[i]);
    return new_arr;
} 
```

像这样使用它：

```
var arr = [
   [[1,2,3],[75]], 100,
   [[[1]]], [],
   [1,[2,[3],4],5], 6, 7, 8
];

var new_arr = copy(arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:39:24.227

使用 jQuery（适用于数组和“普通”对象）：

```
var a = [[1,[2,3]],[4]];
var b = $.extend(true, [], a);
a[0][0] = 42;             // modify object in a
alert(JSON.stringify(b)); // [[1,[2,3]],[4]] 
```

或 JSON 直接（如果所有对象都是 JSON 可化的）：

```
var a = [[1,[2,3]],[4]];
var b = JSON.parse(JSON.stringify(a))
a[0][0] = 42;             // modify object in a
alert(JSON.stringify(b)); // [[1,[2,3]],[4]] 
```

旧版本的 IE（8？7？）将需要一个用于 JSON 对象的 shim。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T14:39:37.203

我只是想补充一下 Paulpro 的答案。请注意，这与他的答案相同，只是我将 copy(new_arr[i]) 更改为 copy(arr[i])，并将 new_arr.length 更改为 arr.length。

```
function copy(arr){
var new_arr = arr.slice(0);
for(var i = arr.length; i--;)
    if(new_arr[i] instanceof Array)
        new_arr[i] = copy(arr[i]);
return new_arr;
} 
```

copy(new_arr[i]) 起作用的原因是 .slice 复制了 arr[i] 指向的内容，使它们相等。

此外，虽然 Paulpro 的答案适用于所有情况，但如果碰巧多维数组的每个维度的每个成员都是数组或非数组，您可以通过仅对非数组维度进行切片来提高效率。我的意思是复制一个指针数组有什么意义，这些指针数组只会被下面的递归覆盖？

```
function copy(arr){
if(arr[0] instanceof Array){
    var new_arr = new Array(arr.length);
    for(var i = arr.length; i--;)
        new_arr[i] = copy(arr[i]);
}
else{var new_arr = arr.slice(0);}
return new_arr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T11:19:47.027

这是我克隆多维数组的解决方案；实际上，我必须`Array.prototype.clone()`发明一个函数来生成 N 维数组并用一个值对其进行初始化。

```
Array.prototype.clone = function(){
  return this.reduce((p,c,i) => (p[i] = Array.isArray(c) ? c.clone() : c, p),[])
}

function arrayND(...n){
  return n.reduceRight((p,c) => c = (new Array(c)).fill(true).map(e => Array.isArray(p) ? p.clone() : p ));
}

var arr = arrayND(...[4,4,4],8); //last argument is the initializing value
arr[0][1][3] = "eight";
console.log(JSON.stringify(arr));
```

# php - 开始时间和结束时间之间的PHP时间循环

> ID：10941708
> 
> 赞同：2
> 
> 时间：2012-06-08T00:31:52.663
> 
> 标签：php, loops, time

我有这个功能，可以在选择输入中为我提供一组选项。这些选项给了我 5 分钟间隔的时间。问题是当时间像 23:45 时，选项将从 00:10 开始并基于 $j 变量循环。

这就是我想要用文字做的：给我一个从 $open_time 到 $close_time 的 5 分钟间隔内的选项列表。如果当前时间 ($timeNow) 大于 $open_time，请将 $open_time 设置为 $timeNow 以显示为第一个选项。仅在 $close_time 之前执行此循环。

我希望这很清楚。感谢你的帮助 ：）

这是代码：

```
function selectTimesofDay(){
    $output = "";
    $now = date('G:i ', time()); // time now
    $timeNow = strtotime($now); // strtotime now
    $next_five = ceil($timeNow / 300) * 300; // get next 5 minute
    // time now rounded to next 10 minute
    $round5minNow = date('G:i', strtotime('+15 minutes',$next_five)); 
    $open_time = strtotime('17:00');
    $close_time = strtotime('23:59');

    // in the middle of working hours, time sets to current
    if($timeNow >= $open_time && $timeNow < $close_time){
        $open_time = strtotime($round5minNow);
     }
    $time_diff = round(($close_time - $open_time)/60) ; 
    if(date('l') == 'Friday'){
        $j = ($time_diff/5)+11; // working hours extended untill 1:00 AM
    } else{
        $j = ($time_diff/5)-1; // working hours untill 12:00 AM
    }

        for($i = 0; $i <= $j; $i++){
            $b = $i*5;  
            $data = date('l')." - ".date("H:i", strtotime('+'.$b.' minutes', $open_time));
            $output .= "<option value=\"{$data}\">";    
            $output .= $data;
            $output .= "</option>";
        }

    return $output;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T00:40:31.147

你真正需要的是：

```
function selectTimesOfDay() {
    $open_time = strtotime("17:00");
    $close_time = strtotime("23:59");
    $now = time();
    $output = "";
    for( $i=$open_time; $i<$close_time; $i+=300) {
        if( $i < $now) continue;
        $output .= "<option>".date("l - H:i",$i)."</option>";
    }
    return $output;
} 
```

所以它的作用是在打开和关闭之间每隔五分钟运行一次循环检查。如果它在当前时间之前跳过它，否则添加一个选项。

它比您尝试做的更有效，并且可能也更容易理解。

你甚至可以把它放在循环之后：

```
if( $output == "") return "<option disabled>Sorry, we're closed for today</option>"; 
```

另外，请注意我是如何一直忽略该`value`属性的。这是因为在没有 a 的情况下`value`，选项的文本被用作值。因此，该解决方案避免了不必要的重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:22:41.453

考虑将硬编码的打开和关闭时间从函数体中取出。函数的目标是编写可以重用的代码，所以如果你的时间改变了，那么你不必改变你的函数，而是传递给它的参数。

```
// sample usage: print '<select>'.selectTimesofDay('17:00', '23:59').'</select>';
function selectTimesofDay($start=false, $end=false, $interval='5 minutes'){
    $interval = DateInterval::createFromDateString($interval);
    $rounding_interval = $interval->i * 60;
    $date = new DateTime(
        date('Y-m-d H:i', round(strtotime($start) / $rounding_interval) * $rounding_interval)
    );
    $end = new DateTime(
        date('Y-m-d H:i', round(strtotime($end) / $rounding_interval) * $rounding_interval)
    );

    $opts = array();
    while ($date < $end) {
        if ($date->getTimestamp() < time()) {
            $date->add($interval);
            continue;
        }
        $data = $date->format('l').' - '.$date->format('H:i');
        //$opts[] = '<option value="'.$date->getTimestamp().'">'.$data.'</option>'; // < -- pass the timestamp instead of a string?
        $opts[] = '<option>'.$data.'</option>';
        $date->add($interval);
    }

    return count($opts) < 1 ? 
        '<option value="-1">- closed -</option>' : 
        implode("\n", $opts);
} 
```

**文档**

PHP 的 DateTime 对象 - [http://www.php.net/manual/en/class.datetime.php](http://www.php.net/manual/en/class.datetime.php)

PHP 的 DateInterval 对象 - [http://www.php.net/manual/en/dateinterval.format.php](http://www.php.net/manual/en/dateinterval.format.php)

PHP 函数 - [http://www.php.net/manual/en/functions.user-defined.php](http://www.php.net/manual/en/functions.user-defined.php)

PHP 函数教程 - [http://www.tizag.com/phpT/phpfunctions.php](http://www.tizag.com/phpT/phpfunctions.php)

# hibernate - Guice-Persist - “这个线程上的工作已经开始。看起来你已经调用了 UnitOfWork.begin() 两次，而在两者之间没有对 end() 进行平衡调用。”

> ID：10941709
> 
> 赞同：0
> 
> 时间：2012-06-08T00:31:57.097
> 
> 标签：hibernate, guice, guice-servlet, guice-persist

我们的应用程序是一个广泛使用 Guice-Persist 和 Guice-Servlet 的 Java-GWT 应用程序。我们使用 Guice-Persist 的 session-per-HTTPRequest 功能从未遇到过问题，这与 Warp-persist 最初使用的功能相似。

根据文档，我们正在通过 PersistFilter 类过滤我们的 webapp。[根据此处](http://code.google.com/p/google-guice/wiki/JPA)的 Guice 文档，我们的 persistence.xml 文件具有 transaction-type="RESOURCE_LOCAL" 。

现在由于某种奇怪的原因，我们的 PROD 环境显示错误

“这个线程上的工作已经开始。看起来你已经调用了 UnitOfWork.begin() 两次，而在两者之间没有对 end() 进行平衡调用。”

![在此处输入图像描述](../Images/98f7427052ee45b910aef378027fb356.png)

看起来 Guice-Persist 不支持嵌套工作单元的问题。[关联](http://code.google.com/p/google-guice/issues/detail?id=597)

我们最近还从休眠 3.6.3.Final 迁移到了 4.1.4.Final。不确定他是否会与guice有某种不兼容...

在这一点上，我们完全不知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T17:57:30.847

当 Hibernate 隐式打开事务时，我遇到了这种症状，因为我忘记在最外面的逻辑事务大括号中添加 @Transaction 注释。

要查明问题，请在数据库层以及 begin() 和 end() 中设置断点，以发现在没有现有事务的情况下发生持久性（读取或写入无关紧要）的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:10:02.060

这已在 Google 的 Guice 网站上进行了报道：

[问题 597：持续扩展：UnitOfWork.begin() 在多次调用时抛出 IllegalStateException](http://code.google.com/p/google-guice/issues/detail?id=597&can=1&q=UnitOfWork&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Component)

# java - 通过 id 从以编程方式添加的 EditText 获取文本

> ID：10941710
> 
> 赞同：0
> 
> 时间：2012-06-08T00:32:20.190
> 
> 标签：java, android, view

我在 Linearlayout 中有一系列以编程方式添加的 EditText，其 ID 是我使用分配的

```
int id = 100;
EditText field =  new EditText(getActivity());
field.setId(id); 
```

我需要从 EditText 中获取文本，当我尝试从中获取文本时，我不断收到 nullPointerException。

```
EditText temp = (EditText)view.findViewById(id);
ans = ans+Double.parseDouble(temp.getText().toString()); 
```

如果这有什么不同，那么视图也在片段中。

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:17:32.470

将 id 变量声明为私有并使用 id++ 继续添加 edittext，然后我们尝试获取可以获取 EditText 的 id，直到出现空指针异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:33:42.950

只需将其`field`作为成员变量而不是局部变量。或者确保这`view`是您添加的视图`field`

# ios - 碰撞检测不返回任何东西

> ID：10941717
> 
> 赞同：0
> 
> 时间：2012-06-08T00:33:48.523
> 
> 标签：ios, cocos2d-iphone, collision-detection, sprite, cgrect

我在非常简单的碰撞检测方面遇到了一些麻烦。这是我目前正在使用的代码：

```
- (void) update:(ccTime)dt{
NSLog(@"update");
if (CGRectIntersectsRect([self.sprite boundingBox], [self.swat boundingBox])) {
    NSLog(@"detected");
}} 
```

'sprite' 和 'swat' 是 CCSprite 的子类，它们被声明为属性，使用：

```
@property (nonatomic, assign) CCSprite *swat;
@property (nonatomic, assign) enemyClass *sprite; //enemyClass is a subclass of CCSprite
//note that they have also been synthesized 
```

我是否需要更改属性才能使碰撞检测正常工作？

我还尝试了以下代码：

这仅返回更新：

```
- (void) update:(ccTime)dt{
NSLog(@"update");
if (CGRectIntersectsRect(self.sprite.boundingBox, self.swat.boundingBox)) {
    NSLog(@"detected");
}} 
```

这会一遍又一遍地返回“检测到”，即使它们没有碰撞：

```
- (void) update:(ccTime)dt{
NSLog(@"update");
if (CGRectIntersectsRect(self.sprite.textureRect, self.swat.textureRect)) {
    NSLog(@"detected");
}} 
```

**在两组代码中，都记录了“更新”，因此更新工作正常，只是 if 语句给我带来了问题。**

如果您能给我任何解决方案来说明为什么这不起作用，或者任何其他方法让它起作用，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:04:42.523

*如果第二个矩形包含*在第一个矩形中，则 CGRectContainsRect 返回 true 。你确定你需要“包含”检查，而不是“相交”（CGRectIntersectsRect）检查吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T01:29:08.920

尝试使用`CGRectIntersectsRect()`

# algorithm - 有什么快速而强大的实现来计算 3d 点云的最小边界框？

> ID：10941718
> 
> 赞同：5
> 
> 时间：2012-06-08T00:33:55.423
> 
> 标签：algorithm, math, 3d, implementation, bounding-box

我一直在网上寻找，但还没有看到快速而强大的实现，而不是论坛上的粗略实现。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:22:34.900

维基百科上有一个[3D OBB 算法的描述。](http://en.wikipedia.org/wiki/Minimum_bounding_box_algorithms)

# javascript - KineticJS 中的重叠径向渐变/“光源”效果

> ID：10941722
> 
> 赞同：1
> 
> 时间：2012-06-08T00:35:16.930
> 
> 标签：javascript, canvas, kineticjs, radial-gradients

我希望在 KineticJS 中产生光源效果。我试图通过在背景中放置各种对象以及填充有径向渐变图案的多个低 alpha Rect 对象层来实现这一点。

效果还是挺满意的，一直在玩弄渐变参数得到各种效果

![简单径向](../Images/295da25dffed1baee699e24c3f326b1e.png) ![高偏心径向](../Images/fda594ff1266e978cfa40b4efc753d12.png)

问题是到目前为止我只设法获得了一个光源，因为在这个之上的第二个 Rect 会妨碍它后面那个的可见性。我敢肯定，我可以执行某种复合操作的跳棋，这将使我获得两个或更多径向梯度的结合，但我自己的运气并不好。有什么建议么？

# c# - webbrowser DOM c#中的自定义标签不被视为HTML元素/父级

> ID：10941725
> 
> 赞同：2
> 
> 时间：2012-06-08T00:35:24.113
> 
> 标签：c#, dom, xpath, webbrowser-control

我正在研究 XPATH 生成器（使用绝对路径）。这个想法是我有一个函数，您可以在其中传递一个 HTMLElement（在 webbrowser 中找到），它将返回 XPATH，如：

**/html/body/div[3]/div[1]/a**

生成 xpath 的函数如下所示：

```
HTMLElement node=...;
while (node != null)
     {
       int i = FindElementIndex(node); //find the index of our current node in the parent elements
       if(i==1)
          xpath.Insert(0, "/" + node.TagName.ToLower());
       else
          xpath.Insert(0, "/" + node.TagName.ToLower() + "[" + i+ "]");
       node = node.Parent;
    } 
```

这个想法是这样的：

a) 取元素

b) 在 element.parent 中找到元素的索引位置

c) 附加 xpath

当父级是自定义 html 代码时出现问题，例如“ `<layer>`”示例：

```
<html>
  <body>
     <div>
        <layer>
           <a href="http://site.com">aaa</a>
        </layer>
      </div>
  </body>
</html> 
```

如果我们的 HTMLElement 是`<a href="http://site.com">aaa</a>`并且我们调用 ourelement.Parent 它将返回 DIV 元素而**不是**元素

所以而不是： **/html/body/div/layer/a**

我们将有（这是不正确的） **/html/body/div/a**

如何解决？真的希望有人可以帮助解决这个问题。

**编辑 1：**仅出于测试目的，我[在使用 JavaScript 中的 XPath 查询获取节点后，从获取节点的完整路径中实现了该函数](https://stackoverflow.com/questions/3071920/get-the-full-path-of-a-node-after-get-it-with-an-xpath-query-in-javascript)

结果是，如果页面包含“自定义”标签（如`<layer>`）并且如果页面在 Firefox 中打开，则 xpath 显示正确。

如果页面是在 Internet Explorer 中打开的（就像 webbrowser 一样），`<layer>`则不包括作为父页面。

所以问题在于 Internet Explorer 没有正确“解析”dom。解决办法是什么？什么功能可以帮助为这种情况创建 xpath（如果使用 webbrowser htmlelement）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:58:31.417

这不是您问题的直接答案；但已考虑使用[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)加载 HTML。它不会有忽略元素的问题。

# java - 使用 Google App 引擎生成实体列表，希望在 Android 客户端上访问它

> ID：10941727
> 
> 赞同：0
> 
> 时间：2012-06-08T00:35:32.037
> 
> 标签：java, android, google-app-engine

我正在从 Google 应用程序引擎上的应用程序数据存储中生成实体列表，我想要做的是将该列表传递给 Android 客户端。

我在我的 GAE servlet 中有这个来生成列表：

```
<code>
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Query query = new Query("ClimbingArea");
List<Entity> result = datastore.prepare(query).asList(FetchOptions.Builder.withDefaults());
</code> 
```

我需要如何在我的 android 应用程序中实现一些东西来检索这个列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:59:10.153

您需要序列化您的实体并让您的 Android 客户端反序列化它们。你可以使用任何你想要的格式，但 JSON、XML 和 ProtBuff 是最流行的。对于 JSON，对于单个实体，您将拥有类似的东西。对于列表，您将使用 JSONArray 并将您的实体添加到数组中：

```
JSONObject jsonObj = new JSONObject();
jsonObj.put("field1", climbingArea.getField1());
jsonObj.put("field2", climbingArea.getField2());

resp.setCharacterEncoding("UTF-8");
resp.setContentType("application/x-javascript");

PrintWriter out = resp.getWriter();
out.write(jsonObj.toString());
out.flush();
out.close(); 
```

# c++ - 在 return 语句中调用构造函数

> ID：10941730
> 
> 赞同：5
> 
> 时间：2012-06-08T00:35:57.093
> 
> 标签：c++, visual-c++

```
class test{

public:

    int data;
    test(const test& ){cout<<"INSIDE COPY CON "<<endl;}
    test(int val = 0) : data(val){ cout<<"INSIDE CON "<<endl; }

    test testfun(const test& obj)
    {
        cout<<"data : "<<data<<endl;
        //test test3(this->data + obj.data);
        //cout<<"test3 :"<<test3.data<<endl;
        //return test3;   //This will work only if return type is changed to const ref
        return test(data + obj.data); 

    }
};

int main()
{

    test testO1(1);
    test testO2(2);
    test testO3 = testO1.testfun(testO2);

    cout<<testO3.data<<endl;

    getchar();

} 
```

输出：

```
INSIDE CON

INSIDE CON

data : 1

INSIDE CON

3 
```

在 return 语句中调用构造函数时会发生什么？由于我能够按价值返回并且它有效，我认为它不是临时位置。还是将对象创建为临时对象并使用复制构造函数来复制值，在这种情况下，为什么复制构造函数中的打印没有被打印出来。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T00:41:09.180

它创建一个临时对象，然后将其复制到返回值。

但为了提高效率，C++ 允许*省略*对复制构造函数（或 C++11 中的移动构造函数）的调用，因此您不应依赖复制构造函数的副作用。

请参阅[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)和[想要速度？按值传递](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T00:48:12.810

你问了一个尖锐的问题。

由编译器和相关的工具链决定做什么，但基本模式如下。在调用之前`testfun()`，调用者 [ ，在您的示例中] 为堆栈`main()`保留空间。`test03`然后它传递`test03`to的地址`testfun()`。

该函数`testfun()`必须以某种方式将`test`对象放在调用者提供的地址处。如果函数只有一个 return 语句，*则可以自由使用调用者提供的存储*来构建返回值。它不需要使用自己的存储。它可以使用`main()`'s。

现在，这种策略并不总是奏效。当一个类似的函数有两个不同的返回语句时，它通常会失败`testfun()`，其中一个或两个返回的不是临时对象而是命名对象。在这种情况下，编译器被迫执行否则不必要的返回时复制。但是，更常见的情况类似于您的情况，其中`testfun()`只是在需要它的位置直接构建返回值`main()`。在这种情况下，不会发生实际复制。

因此，在这种情况下，是否在返回时调用复制构造函数由编译器决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-03T15:58:26.903

我告诉你`return`构造函数时会发生什么，让我们为你做一个很好的例子。`Counter`我以两种方式引用一个名为 return 的类：

**通过临时对象返回：**

```
// method 1
class Counter
{
private :
    int count;
public :
    Counter() : count(0) {}
    int get_count(void);
    Counter operator++(int);
};

int Counter::get_count()
{
    return count;
}

Counter Counter::operator++(int)
{
    count++;
    // create a temp object and assigning count value, then return.
    Counter temp;
    temp.count = count;
    return temp;
} 
```

**由无名临时对象返回：**

```
// method 2
class Counter
{
private :
    int count;
public :
    Counter() : count(0) {}
    Counter(int c) : count(c) {}
    int get_count(void);
    Counter operator++(int);
};

int Counter::get_count()
{
    return count;
}

Counter Counter::operator++(int)
{
    count++;
    // call 'Counter(int c)' constructor
    return Counter(count);
} 
```

**主要的 ：**

```
#include <iostream>
using namespace std;

int main()
{
    Counter c1, c2;
    c1++;
    c1++;
    c2 = c1++;
    cout << "c1=" << c1.get_count() << endl;
    cout << "c2=" << c2.get_count() << endl;
    return 0;
} 
```

两种方法的输出是相同的，`return Counter(count);`第二个`class`语句执行第一个语句中所有三个语句的操作。这个语句创建了一个类型的对象`Counter`，这个对象没有名字；它不会长到需要一个。这个未命名的对象被初始化为参数提供的值`count`，一旦未命名的对象被初始化为 的值`count`，它就可以被返回。

第一个的效果和`class`第二个一样`class`：

输出 ：

```
c1= 3
c2= 3 
```

注意，在`c2 = c1++;`声明中`c1`增加然后分配给`c2`。

# vb6 - 旧版 VB6 应用程序无法启动

> ID：10941731
> 
> 赞同：2
> 
> 时间：2012-06-08T00:36:01.007
> 
> 标签：vb6

我继承了头痛。我有一个 10 年前开发的小型遗留 (GUI) 应用程序，VB6 源代码早已不复存在。它目前可以在几台旧的 XP PC 上运行，我被问到是否可以让它在 Windows 7 64 位上运行。嗯……这是不行的，所以我尝试了一个 32 位版本来验证 64 不是问题并且它不起作用。于是我创建了一个 XP 虚拟机，它也没有工作。在所有三个环境中，问题都是相同的。您双击.exe 并没有显示任何内容，但是当您在任务管理器下查看时，它就在那里并与CPU 挂钩。
我下载了 Dependency Walker，似乎所有必需的 dll 和 OCX 文件都在那里。任何人都可以提出其他建议吗？我在这里真的很茫然。任何事情都会不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:25:24.757

标准方法是下载并运行[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，将其设置为仅过滤您的可执行文件，运行您的可执行文件，ProcessMonitor 将捕获您的应用程序正在使用的 DLLs/Files/Registry 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:51:55.987

您是否确认已安装 VB6 运行时文件？

[http://support.microsoft.com/kb/290887](http://support.microsoft.com/kb/290887)

我不确定它们是否已包含在 Win7 中，并且它们仅包含在 XP 中的一个较新的服务包中。

# javascript - JavaScript dir 方法返回文本方向的空字符串

> ID：10941745
> 
> 赞同：4
> 
> 时间：2012-06-08T00:37:23.540
> 
> 标签：javascript, text, bidirectional

当我尝试确定默认文本方向时，这将返回一个空字符串......

```
alert(document.getElementById('example').dir); 
```

我想确定默认文本方向是 ltr 还是 rtl。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:46:17.907

ltr/rtl 是用 css 的“direction”属性定义的。它也可以使用 DOM 中元素的“dir”属性来定义。

如果要检查属性值，请使用 getAttribute 方法：

```
 document.getElementById('example').getAttribute('dir'); 
```

另外，检查元素的样式。它默认为 ltr，因此如果未定义，则应作为空字符串返回。否则它应该说“rtl”

```
 document.getElementById('example').style.direction; 
```

[https://developer.mozilla.org/en/CSS/direction](https://developer.mozilla.org/en/CSS/direction)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T00:47:01.687

我会用

```
var elm = document.getElementById('example') || document.body;
return window.getComputedStyle(elm).direction; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:45:26.737

如果它为空白，则表示它未在元素的`dir`属性中指定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T08:48:28.997

我在调试期间发出警报，如下所示：

```
alert(window.getComputedStyle(document.getElementById('editor_rich')).direction); 
```

# azure-table-storage - 通过 pk&rk 从 Azure 表存储中获取行集

> ID：10941751
> 
> 赞同：0
> 
> 时间：2012-06-08T00:38:03.937
> 
> 标签：azure-table-storage

我有一个 partitionkey 列表，我需要获取的 rowkeys。我能想到的唯一方法是做这样的查询

```
(partitionkey="pk1" and Rowkey="rk1) or (partitionkey="pk2" and Rowkey="rk2) 
```

这有效，但仅限于 7 行（查询中的 15 个子句）

任何人都知道如何做更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:15:47.937

不幸的是，对于这个特定的查询没有更好的解决方案。你基本上是在做 A*B+C*D+E*F+... 这个多项式不能简化。

如果您的方案允许，请尝试使用其他查询。例如，使用 PK + RK 仅查询单个实体。使用多个请求查询多个单个实体。使用单个请求查询分区内的所有实体（基于某些过滤器，例如范围），等等。

# mysql - Grails/MySQL 字段长度约束

> ID：10941752
> 
> 赞同：0
> 
> 时间：2012-06-08T00:38:13.757
> 
> 标签：mysql, grails, grails-orm

我正在使用 Grails 1.3.7 和 MySQL ~~5.1。~~5.5\. 我有一个定义字符串属性的类，如下所示：

```
class Topic {
    String name;
    User owner;
    // other fields

    static constraints = {
        name(blank: false, maxSize: 1024, unique: ['owner'])
    }
} 
```

这适用于内存数据库，但是当我部署 WAR 文件时，出现此错误：

```
12/06/07 17:09:48 ERROR hbm2ddl.SchemaUpdate: Unsuccessful: create table topic (id bigint not null auto_increment, version bigint not null, date_created datetime not null, description longtext, name longtext not null, owner_id bigint not null, primary key (id), unique (owner_id, name))
12/06/07 17:09:48 ERROR hbm2ddl.SchemaUpdate: BLOB/TEXT column 'name' used in key specification without a key length 
```

如果我将`maxSize`规格更改为 255，一切正常。

我对文档的阅读是，默认情况下 MySQL 无法计算密钥长度以强制执行唯一性约束；为什么 grails 不为此目的传递 maxSize 值？

更新：2012 年 6 月 8 日这是我正在使用的休眠规范：

```
hibernate {
    cache.use_second_level_cache=true
    cache.use_query_cache=true
    cache.provider_class='net.sf.ehcache.hibernate.EhCacheProvider'
} 
```

我将 com.mysql.jdbc.Driver`mysql-connector-java-5.1.7-bin.jar`与 MySQL 5.5 库一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:30:32.320

您使用的是哪个版本的 mysql，varchar 列的最大长度可以是 255（在 mysql 5.0.3 之前） - 请参阅[http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)

您可以尝试将列类型更改为[文本](http://grails.org/doc/latest/ref/Database%20Mapping/type.html)

# python - Python - 大型初始化列表上的索引超出范围

> ID：10941753
> 
> 赞同：0
> 
> 时间：2012-06-08T00:38:33.580
> 
> 标签：python

我是 Python 的初学者，我遇到了一个奇怪的越界错误。

这个想法是我需要使用以下方法初始化缓存：

```
arr = [0]*1000000 
```

然后通过调用在同一个函数中访问

```
def func (i) :
    k=1
    a = i
    arr = [0]*1000000
    while (i>1):    
        if arr[i] != 0:
            k = k + arr[i] - 1
            break
        if i%2 == 0:
            i = i/2
        else:
            i = 3*i + 1
        k += 1
    arr[a] = k
    return k 
```

如果我的值超过 1500，它会给我一个越界错误。然而，缓存应该被初始化为一百万个整数。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:02:06.700

这个函数可以在最终崩溃之前任意增长。

您可能只是在达到某个数字，使其增长速度快于崩溃一段时间。如果您输入的内容比您传入的内容多 1 或少 1，您可能不会遇到问题。

如果你*真的*想缓存结果，字典比 Python 中的稀疏数组列表更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T00:43:40.800

现在更新代码已发布：

在 1500 之前我似乎没有遇到任何问题。我*确实*得到了一个 IndexError for `func(1819)`，i 进化为此开始了

```
1819
5458
2729 
```

并结束于

```
851290
425645
1276936
[...]
IndexError: list index out of range 
```

但这不是一个错误，这只是一个事实，它比你腾出的空间还要高。您可以使用字典而不是列表来避免此问题。

--

为了清楚起见，这是我想到的那种事情：

```
def func_with_dict(i) :
    k=1
    a = i
    arr = {}
    while (i>1):    
        print i
        if i in arr:
            k = k + arr[i] - 1
            break
        if i%2 == 0:
            i = i/2
        else:
            i = 3*i + 1
        k += 1
        arr[a] = k
    return k 
```

产生

```
1819
5458
2729
8188
[...]
851290
425645
1276936
638468
319234
[...]
20
10
5
16
8
4
2 
```

和 162 的最终答案。不过，我认为我自己不会使用`arr`这种方式，但我*会*做什么取决于你想要做什么。

# powershell - PowerShell 显示经过的时间

> ID：10941756
> 
> 赞同：28
> 
> 时间：2012-06-08T00:38:56.107
> 
> 标签：powershell, timer

我有一个脚本启动一个事件并等待用户按任意键来停止脚本执行。[我试图找到一种方法来显示计时器（脚本运行了多长时间），同时在Read-Host](http://technet.microsoft.com/en-us/library/hh849945.aspx)等待用户输入。有没有办法做到这一点？

* * *

这有效

```
$Time = [System.Diagnostics.Stopwatch]::StartNew()
while ($true) {
    $CurrentTime = $Time.Elapsed
    write-host $([string]::Format("`rTime: {0:d2}:{1:d2}:{2:d2}",
                                  $CurrentTime.hours,
                                  $CurrentTime.minutes,
                                  $CurrentTime.seconds)) -nonewline
    sleep 1
    if ($Host.UI.RawUI.KeyAvailable -and ("q" -eq $Host.UI.RawUI.ReadKey("IncludeKeyUp,NoEcho").Character)) {
        Write-Host "Exiting now"
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-07-11T10:02:05.690

这给了我想要的输出:)

```
$StartTime = $(get-date)

$elapsedTime = $(get-date) - $StartTime

$totalTime = "{0:HH:mm:ss}" -f ([datetime]$elapsedTime.Ticks) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-08T00:44:19.227

来自文章[在 Powershell 中测量经过的时间](http://poshtips.com/2010/03/30/measuring-elapsed-time-in-powershell/)（[存档副本](https://web.archive.org/web/20111217164222/http://poshtips.com/2010/03/30/measuring-elapsed-time-in-powershell)）：

> 假设变量`$script:StartTime`是在脚本开头设置的，则可以使用以下任一方法确定经过的时间：
> 
> `$elapsedTime = new-timespan $script:StartTime $(get-date)`
> 
> 或者
> 
> `$elapsedTime = $(get-date) - $script:StartTime`
> 
> 两种方法的工作方式完全相同，并产生一个`System.TimeSpan`对象。

因此，使用上面的示例，您可以`$script:StartTime`在 Read-Host 之前设置，然后在之后调用 `$elapsedTime = $(get-date) - $script:StartTime`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T13:28:41.327

使用计时器类（RIP poshtips）给了我这样的东西：

```
$Time = [System.Diagnostics.Stopwatch]::StartNew()
while ($NoEvent) {
    $CurrentTime = $Time.Elapsed
    write-host $([string]::Format("`rTime: {0:d2}:{1:d2}:{2:d2}",
                                  $CurrentTime.hours,
                                  $CurrentTime.minutes,
                                  $CurrentTime.seconds)) -nonewline
    sleep 1

    #Handle event
    if(event){$NoEvent = false}
} 
```

其中 $NoEvent 是您的事件/布尔值（按键功能等）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-28T04:08:37.883

我对从 Xelco52 的回答扩展而来的这个小功能感到满意

```
$startTime = $(get-date)
write-host "Elapsed:00:00:00"
$NoEvent = $true
While ($NoEvent)
{
  Start-Sleep 1
  $elapsedTime = new-timespan $startTime $(get-date)
  write-host "Elapsed:$($elapsedTime.ToString("hh\:mm\:ss"))"  

  #Handle event
  if(event){$NoEvent = $false} 
} 
```

# php - 私聊系统MYSQL查询显示发送方/接收方的最后一条消息

> ID：10941763
> 
> 赞同：3
> 
> 时间：2012-06-08T00:40:23.333
> 
> 标签：php, mysql, sql, database

在这里，我扩展了我之前的问题。

[私聊系统MYSQL查询ORDERBY和GROUPBY](https://stackoverflow.com/questions/10929366/private-chat-system-mysql-query-orderby-and-groupby)

此外，我还创建了一张名为 users 的表，我将从中获取用户信息。

消息表

```
 message_id|sender_id||receiver_id|message_text|   created_time
    1         101          102       Message A    2012-06-07 08:07:18
    2         101          102       Message B    2012-06-07 08:10:20
    3         103          102       Message C    2012-06-07 08:12:43 
```

用户表：

```
 id  | name
 101   bob
 102   jack
 103   mark 
```

现在终于可以得到以下结果：

```
 name|message_text |  created_time
      mark   message C    2012-06-07 08:12:43
      bob    message B    2012-06-07 08:10:20 
```

通过使用此查询：

```
SELECT * FROM messages,users
WHERE messages.receiver_id = 102
AND messages.sender_id=users.id
AND messages.created_time IN
(SELECT MAX(created_time)
FROM messages
GROUP BY sender_id)
ORDER BY messages.created_time DESC 
```

现在我想要的结果是

如果 jack(id:102) 回复 mark(id:103) 那么我怎样才能得到这个输出：

```
 name|message_text |  created_time
      mark   message D    2012-06-07 08:12:48
      bob    message B    2012-06-07 08:10:20 
```

注意：这里的“消息 D”和时间戳是他回复标记的杰克。

其中 message_text 字段将显示 mark 和 jack created_time 字段之间的最后一条消息 created_time 字段将显示消息创建时间，name 字段将显示 jack 正在向其发送或接收消息的人的姓名。

我在想我们需要修改/拆分表，但不知道如何以及用什么查询来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:21:32.910

你所要求的基本上是按线程而不是发件人分组。无论是发送者/接收者，都可以在两个人之间发起线程。

为此，我建议更改您的数据结构，类似于此处讨论的内容：[是否有更简单的方法来实现这种用户消息传递方式？](https://stackoverflow.com/questions/10588391/is-there-a-simpler-way-to-achieve-this-style-of-user-messaging/10740169#10740169)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:06:55.687

如果这是一个群聊，请不要限制为 receiver_id 之类的`messages.receiver_id = 102`

```
SELECT users.name,
       temp.MESSAGE_TEXT,
       temp.created_time
FROM
  (SELECT sender_id, MESSAGE_TEXT, created_time
   FROM messages
   WHERE created_time IN
       (SELECT MAX(created_time)
        FROM messages
        GROUP BY sender_id)) AS temp
LEFT JOIN users ON temp.sender_id = users.id; 
```

显示每个发件人发送的最后一条消息

# mysql - 基本的 MySql 表设计和 SQL 查询

> ID：10941771
> 
> 赞同：1
> 
> 时间：2012-06-08T00:42:14.613
> 
> 标签：mysql, sql, database

假设我有 3 张桌子。

```
项目
----------
项目 ID PK

```

```
子项目
----------
项目 ID PK  
子项目 ID PK

```

基本上，所有项目都列在“项目”表中。一个项目可以有子项目。例如，如果我的表中有以下行：

```
项目
----------
1
2
3

```

```
子项目
----------
1,2
1,3

```

项目 1、2 和 3 共有三个。项目 2 和 3 是项目 1 的子项目。

我有两个问题。首先，外键应该是 Projects 中的 projectId 引用 SubProjects 中的 projectId 和 subProjectId，还是外键应该是 subProjects 中的 projectId 引用 Projects 中的 projectId 和 subProjects 中的 subProjectId 引用 Projects 中的 projectId。

值得注意的是，一个项目可以是多个项目的子项目。

其次，如何通过查询获取项目的子项目。我一直在使用：

```
 Select * from projects p1 Join subProjects sp Join projects p2 
where p1.projectId = sp.subProjectId and sp.subProjectId = p2.projectId; 

```

我得到以下结果：

```
1 , 2
1 , 3

```

我希望它只是返回

```
2
3

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:00:14.317

我相信您可能正在寻找一种自我参照关系，如
[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)
中所述，在这种情况下，您将只有一个项目表中包含名为 parent_project_id 的外键，当项目是子项目时，该子项目使用该 parent_project_id 来指示其父项目。就外键而言，父级在其中没有任何对子级的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:33:43.800

For the second part, you will want to replace the `*` with the column name that 2,3 fall under. I don't see column names, so I am not sure if it is `sp`, `p1` or `p2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:52:31.350

有一个名为 SQLmaestro 的应用程序，您可以自动创建这些代码，我有很多时间使用它；生成 mysql 代码（表、连接、关节、自定义查询等）。

这是链接： [http ://www.sqlmaestro.com/products/mysql/maestro/](http://www.sqlmaestro.com/products/mysql/maestro/)

# java - 为什么在 Java 中的 try 块后无法打印到控制台？

> ID：10941778
> 
> 赞同：1
> 
> 时间：2012-06-08T00:43:56.217
> 
> 标签：java, android, try-catch

我在 Android 应用程序中有以下代码：

```
public static HttpResponse dbPost(String handlerUrl, List<NameValuePair> postData) {

    HttpClient httpclient = new DefaultHttpClient();
    String postUrl = constants.postUrl(); 
    HttpPost httppost = new HttpPost(postUrl);
    HttpResponse response = null;
    System.out.print("Catch 0");

    try {
        httppost.setEntity(new UrlEncodedFormEntity(postData));
        response = httpclient.execute(httppost);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    System.out.print("Catch 1");

    return response;

} 
```

我有一个调用这个块的按钮。如果我按下按钮，控制台将打印“Catch 0”（但不是“Catch 1”）。如果我再次按下按钮（相同的实例），控制台将打印“Catch1Catch0”。有什么问题？

我对Java有点陌生，所以请耐心等待。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T00:45:55.717

您需要调用[flush](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html#flush%28%29)因为您正在使用`print`.

```
System.out.print("Catch 1");
System.out.flush(); 
```

的默认行为`PrintStream`是仅在写入换行符时刷新。（此行为记录在[write(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html#write%28int%29)中。）

如果您使用`printLn`而不是`print`，则流将自动刷新。没有它，您需要显式刷新输出流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T00:45:47.370

您正在使用`print`而不是`println`.

# mstest - 将单元测试项目添加到 ASP.Net MVC 4 项目

> ID：10941780
> 
> 赞同：1
> 
> 时间：2012-06-08T00:44:16.753
> 
> 标签：mstest, asp.net-mvc-4

就像[这个人](https://stackoverflow.com/questions/2256932/mvc-net-how-to-add-unit-test-project-in-for-existing-source-code)一样，当我第一次创建 MVC 4 项目时，我没有为它创建单元测试项目。现在我想回去添加一个。

为此，我创建了一个新的单元测试项目。

现在，我右键单击我的一个控制器中的私有方法，选择 Create Unit Tests，然后弹出一个对话框断言：

> 单元测试生成错误：读取模块“My.Project”时遇到以下错误：无法解析类型引用：[System.Web.Mvc，版本 3.0.0.0，Culture=neutral，PublicKeyToken={why doesn't MS支持剪切和粘贴？？}]System.Web.Mvc.AllowAnonymousAttribute。

AllowAnonymousAttribute 是 MVC 4 的新特性。为什么单元测试生成器试图解决 MVC 3 程序集呢？

My.Project 编译和运行得很好，AllowAnonymousAttribute 和所有，显然是在尊重 System.Web.Mvc，版本 4.0.0.0。

**更新**

*MyMvc.csproj 包含*

```
<Reference Include="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <Private>True</Private>
  <HintPath>..\packages\AspNetMvc.4.0.20126.16343\lib\net40\System.Web.Mvc.dll</HintPath>
</Reference> 
```

HintPath 处的 DLL 确认为 4.0.0.0 版本

*MyMvc.Test.csproj 包含*

```
<Reference Include="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:49:58.543

这在 VS2012 中不再是问题。

VS2012 不再支持添加单元测试向导。手动添加的单元测试工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T04:08:58.810

下载 Resharper（有 30 天免费试用）并按 alt+enter。它会自动添加所需的内容。

# php - 表格不会发布

> ID：10941783
> 
> 赞同：0
> 
> 时间：2012-06-08T00:44:40.363
> 
> 标签：php, html, post, twitter, twitter-oauth

我正在尝试使用 PHP/POST/etc 来帮助我作为 Webdev 的日常工作。从我在网上看到的教程等，这应该可以工作。但是，当我单击提交时，页面被重定向到`bagelBack.php`，但是有一个空白页面，并且没有提交推文。我在自己的机器上，使用 XAMPP Apache。（HTML 页面上有 jQuery，如果有帮助的话）

编辑：它在 php （`$connection->request`等）的第 40 行失败。 `var_dump`s 工作，但`echo`没有。我对这一切都很陌生。为什么这不会引发错误？

html:

```
<form id="bagelForm" action="bagelBack.php" method="POST">
    <label for="twitterName">Twitter Name: </label><input type="text" id="twitterName" name="twitterName"/><br />
    <label for="bagelType">Bagel Type: </label><input type="text" id="bagelType" name="bagelType"/><br />
    <input type="submit" />
</form> 
```

PHP（主要来自[这里](http://140dev.com/twitter-api-programming-tutorials/hello-twitter-oauth-php/)）：

```
<?php
/**
* bagelBack.php
* Example of posting a tweet with OAuth
* Latest copy of this code: 
* http://140dev.com/twitter-api-programming-tutorials/hello-twitter-oauth-php/
* @author Adam Green <140dev@gmail.com>
* @license GNU Public License
*/

$name = "@".$_POST['twitterName'];
$type = $_POST['bagelType'];

$tweet_text = $name.", your ".$type." bagel has finished toasting!";
$result = post_tweet($tweet_text);
echo "Response code: " . $result . "\n";

function post_tweet($tweet_text) {

  // Use Matt Harris' OAuth library to make the connection
  // This lives at: https://github.com/themattharris/tmhOAuth
  require_once('tmhOAuth.php');

  // Set the authorization values
  // In keeping with the OAuth tradition of maximum confusion, 
  // the names of some of these values are different from the Twitter Dev interface
  // user_token is called Access Token on the Dev site
  // user_secret is called Access Token Secret on the Dev site
  // The values here have asterisks to hide the true contents 
  // You need to use the actual values from Twitter
  $connection = new tmhOAuth(array(
    'consumer_key' => '[redacted]',
    'consumer_secret' => '[redacted]',
    'user_token' => '[redacted]',
    'user_secret' => '[redacted]'
  )); 

  // Make the API call
  $connection->request('POST', 
    $connection->url('1/statuses/update'), 
    array('status' => $tweet_text));

  return $connection->response['code'];
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:15:44.353

不久前，我在遇到同样的问题时写了这篇文章：

[http://www.highonphp.com/php-fastcgi-post-requests-failing](http://www.highonphp.com/php-fastcgi-post-requests-failing)

它与 webhost 已安装的 fcgi 与 cgi SAPI 有关。

# javascript - 使用jQuery读取img src并动态插入img src

> ID：10941785
> 
> 赞同：1
> 
> 时间：2012-06-08T00:45:09.577
> 
> 标签：javascript, jquery, image

我的页面上有一些代码，如下所示：

```
<div class="img-center">
    <img src="img-path.jpg" alt="alt-text" class="feature-image" />
    </div> 
```

我正在设置打印样式表，并且由于对内容的一些 javascript 操作（可能是 Firefox 中的错误），img 打印偏离中心。我要做的解决方案是将 img 动态插入到另一个 div 中，该 div 将在打印时显示，但我不知道如何让 jQuery 读取 img div，然后将其复制到另一个 div 中。另一个 div 的代码示例如下所示：

```
<div id="feature-container-print">
   <img src="jQuery inserted copy of above img-path.jpg" alt="alt-text" />
     </div> 
```

这是怎么做到的？请举个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:49:28.873

`$('#feature-container-print img').attr('src',$('.feature-image').attr('src'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:50:38.707

我相信这会奏效：

```
$('.feature-container-print img').attr('src', $('.img-center img').attr('src'));
$('.img-center img').hide();
$('.feature-container-print img').show(); 
```

# javascript - 我应该如何在 jQuery 中使用 .sort()？

> ID：10941789
> 
> 赞同：25
> 
> 时间：2012-06-08T00:45:38.117
> 
> 标签：javascript, jquery

我一直在看很多人们`.sort()`在 jQuery 中使用该函数的例子。

例如：

```
$('#myId').sort(..); 
```

我在 jQuery API 中找不到任何文档`sort()`，谁能告诉我它的用法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-08T00:47:47.843

因为它不是 jQuery（官方）的一部分，而是一个代理[Array.sort](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)。

正如 Derek 指出的那样，`jQuery(...)`不返回数组。相反，jQuery[添加了一个代理](https://github.com/jquery/jquery/blob/master/src/core.js)来使 jQuery 对象“像数组一样”：

```
// For internal use only.
// Behaves like an Array's method, not like a jQuery method.
push: push,
sort: [].sort,    // <-- here
splice: [].splice 
```

该代理之所以有效，是因为`this`函数中的 是由调用该函数的对象确定的。而且，`Array.sort`(and `Array.splice`) 可以处理任何`this`“类似数组”的内容（具有 a`length`和大概的属性`0..length-1`）。这是使用 [ab] 的自定义对象的示例`Array.sort`：

```
var a = {0: "z", 1: "a", length: 2, sort: [].sort}
a[0]       // -> "z"
a.sort()   // in-place modification, this === a
a[0]       // -> "a"
a instanceof Array // -> false (never was, never will be Array) 
```

YMMV 遵循“仅供内部使用”说明。

# java - 从 http 认证的 wsdl 生成客户端

> ID：10941796
> 
> 赞同：1
> 
> 时间：2012-06-08T00:46:19.833
> 
> 标签：java, eclipse, web-services

我正在尝试使用 eclipse Web 服务客户端向导生成一个 Web 服务客户端。但是wsdl需要http认证，还没有找到输入认证信息的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:22:29.303

在浏览器中打开 wsdl 并在出现提示时输入登录信息。wsdl 打开后，将其保存到硬盘驱动器上的文件中。使用该文件与 eclipse 生成您的代码。然后您可能必须替换创建的 java 代码中的端点值，因为它将包含文件的位置而不是部署的 wsdl。我不得不这样做几次才能绕过身份验证部分。

# google-maps - 我需要为基于 Google 地图的演示文稿制作一个干净、漂亮的地图。有什么简单的方法可以做到这一点？

> ID：10941798
> 
> 赞同：3
> 
> 时间：2012-06-08T00:46:26.817
> 
> 标签：google-maps, google-maps-api-3, gis, arcgis

我想制作一张非常干净的地图，*只*显示相关信息——例如，只显示重要的街道。我打算一边看谷歌一边画一张地图，但结果很慢。有没有办法让这更容易，也许结合地图软件和谷歌的API？

（如果我应该把它放在另一个 SE 网站上，请告诉我）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:16:28.527

建立在苏维的好答案之上。

有一个非常有用的开源项目可以收集全球的街道数据。它被称为[OpenStreetMap](http://www.openstreetmap.org/)。在他们的网站上，您可以提取所需的特定街道数据。只需点击几下即可！你得到了你需要的地图。他们的数据也可以从[这里](http://downloads.cloudmade.com/)和[这里](http://download.geofabrik.de/osm/europe/)访问（对某些人来说可能更容易） 。这些链接可以为您提供所需的 shapefile(map)。然后可以将您新获得的地图加载到提到的免费[QGIS软件中。](http://www.qgis.org/)在那里，您可以轻松选择您感兴趣的街道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T01:17:27.067

当您的意思是只想显示“重要的街道”时，您使用 Google 地图就不走运了。因为您无法控制 google 提供的 ROADMAP 数据。现在您可以做的是使用其他地图软件，例如 ArcGIS 或 Quantum GIS（免费）。这两个软件都允许您加载道路数据 shapefile，您可以查询（选择）您想要显示的道路并根据自己的喜好自定义其外观。

如果您想要一种快速的方法（无需下载软件），我相信 ArcGIS 有一个在线门户，可让您在其基础地图上显示您想要的信息。不过，您仍然需要街道的 shapefile。检查此链接，为自己创建一个帐户并尝试使用它[http://www.arcgis.com/home/](http://www.arcgis.com/home/)。如果您单击地图选项卡，它会将您带到一个允许您上传 shapefile 的屏幕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T02:43:19.053

你说你'打算只画一张地图'。如果您只需要一张非常干净的地图，您可以考虑使用[iMap Builder](http://www.imapbuilder.net)，它是一款支持地图形状文件和自定义 Google 地图的地图软件。我以前曾经创建过一些简单的地图项目，对我来说效果很好。您可以使用他们预制的地图模板，该模板仅显示地图轮廓而没有任何细节，然后您可以根据需要添加路线/点/鼠标悬停的语音气泡等。

# android - 无法在 WallpaperService 中从 Java 传递的本机代码中访问 AAssetManager

> ID：10941802
> 
> 赞同：15
> 
> 时间：2012-06-08T00:47:03.160
> 
> 标签：android, android-ndk, java-native-interface

我正在尝试从自定义 WallpaperService 访问本机代码中的资产。本机代码编译并工作，但尝试从传递给本机函数的 AssetManager 对象获取 AAssetManager 引用始终返回 NULL。

这与我使用服务而不是导致 AAssetManager 引用为 NULL 的活动有关吗？在 Java 源代码中，传递给本机函数的 AssetManager 有效且不为空。

为了测试这一点，我使用了提供的示例中的 CubeLiveWallpaper 演示并针对 API 级别 10。以下是添加到 CubeWallpaper1 类以访问本机功能的相关代码：

```
static {
    System.loadLibrary("renderer");
}

private static native void load(AssetManager mgr);

@Override
public void onCreate() {
    super.onCreate();

    AssetManager mgr = getResources().getAssets();
    load(mgr);
} 
```

这是我用来尝试获取有效 AAssetManager 参考的 JNI 代码：

```
#include <jni.h>
#include <android/log.h>
#include <android/asset_manager.h>
#include <android/asset_manager_jni.h>

#define TAG "CubeWallpaper1.c"

void
Java_com_example_android_livecubes_cube1_CubeWallpaper1_load(JNIEnv *env,
                                                             jobject assetManager) {

    AAssetManager *mgr = AAssetManager_fromJava(env, assetManager);
    if (mgr == NULL) {
        __android_log_print(ANDROID_LOG_ERROR, "CubeWallpaper1.c", "error loading asset   maanger");
    } else {
        __android_log_print(ANDROID_LOG_VERBOSE, "CubeWallpaper1.c", "loaded asset  manager");
    }

} 
```

这已经在几台设备上进行了复制，但大多数测试都是在运行 2.3.7 的 HTC Desire 上完成的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T17:55:23.590

阅读asset_manager_jni.h 中的注释：“请注意，调用者负责获取并持有对jobject 的VM 引用，以防止在使用本机对象时对其进行垃圾收集。”

在 Java 中，您正在传递一个对象 (mgr)，一旦调用本机回调，垃圾收集器就可以释放该对象 (mgr)。为了防止这种情况，例如，您可以在类中创建 mgr 变量作为私有属性，然后通过 load 方法将其传递，例如：

```
private static native void load(AssetManager mgr);

private AssetManager mgr;

@Override
public void onCreate() {
  super.onCreate();

  mgr = getResources().getAssets();
  load(mgr);
} 
```

另外，我认为您必须将本机 C++ 回调替换为：

```
void Java_com_example_android_livecubes_cube1_CubeWallpaper1_load
     (JNIEnv *env, jobject obj, jobject assetManager) 
```

# javascript - 使用 YouTube API 从带有 JSON 提要的视频中获取所有评论

> ID：10941803
> 
> 赞同：4
> 
> 时间：2012-06-08T00:47:06.357
> 
> 标签：javascript, json, youtube, youtube-api

我正在使用 YouTube API 来获取带有参数化查询的视频的评论，如下所示：

`http://gdata.youtube.com/feeds/api/videos/theVideoID/comments?v=2&alt=json`

这样做的问题是每个查询可以获得的最大结果数是 50。我想获得每条评论。我目前正在使用`start-index`and`max-results`参数来解决这个问题。一次进行 50 次迭代时我遇到了一些麻烦，因为有时迭代的起始索引会高于评论数，而我无法弄清楚，所以我只是尝试一次解决一个。一次做 50 个可能会更好，所以让我知道这是否是更好的解决方案。目前：

我正在使用 PHP 来获取评论数量：

```
<?php
    $video_ID = 'gT2HYxOdxUk';
    $JSON = file_get_contents("https://gdata.youtube.com/feeds/api/videos/{$video_ID}?v=2&alt=json");
    $JSON_Data = json_decode($JSON);
    $commentCount = $JSON_Data->{'entry'}->{'gd$comments'}->{'gd$feedLink'}->{'countHint'};
?> 
```

然后我调用一个 JavaScript/jQuery 函数将所有注释加载到一个数组中。为了进行测试，它将它们打印到一个 div 中。对于初学者，这是我调用该函数的方式：

```
<body onLoad="loadComments('<?php echo $commentCount; ?>', '<?php echo $video_ID; ?>')"> 
```

接下来，实际功能：

```
function loadComments(count, videoID) {     
    for(i = 1; i <= count; i++) {
        $.ajax({
            url: "http://gdata.youtube.com/feeds/api/videos/" + videoID + "/comments?v=2&alt=json&max-results=1" + "&start-index=" + i,
            dataType: "jsonp",
            success: function(data){
                $.each(data.feed.entry, function(key, val) {
                    comments.push(val.content.$t);
                    $('#commentOutput').append(val.content.$t + '<br>'); //Just for testing purposes.
                });
            }

        });
    }
} 
```

问题是它真的很不确定。当我`count`像这样使用变量作为 for 循环的终止部分时，它总是变得像，例如，211 条评论中有 45 条。如果我手动输入 211，它将达到 195 左右。如果我输入一个较低的数字，比如 1-15，它几乎总是会得到所有这些。20+，永远不对。

我需要弄清楚如何通过利用`max-results`和`start-index`参数来始终如一地获得给定视频的所有评论。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T00:23:03.237

我刚刚遇到这个问题，我注意到它被问到这个问题已经有一段时间了。但既然还没有人回答，我想我应该这样做。

理想情况下，您应该使用 Youtube 的 PHP API（使用 Zend_GData）并在 PHP 中使用以下代码：

```
<?php

    require_once 'Zend/Loader.php'; // the Zend dir must be in your include_path
Zend_Loader::loadClass('Zend_Gdata_YouTube');

$yt = new Zend_Gdata_YouTube();
$yt->setMajorProtocolVersion(2);
$video = parse_url("http://www.youtube.com/watch?v=K-ob8sr9ZX0");
parse_str(urldecode($video['query']), $query);
$videoId = $query['v'];

$commentFeed = $yt->retrieveAllEntriesForFeed($yt->getVideoCommentFeed($videoId));

foreach ($commentFeed as $commentEntry) {
    echo "Full text: " . $commentEntry->content->text . "<br />";
} 
```

这里的关键元素是**retrieveAllEntriesForFeed()**方法。

您可以构造一个 JSON 并将其发送回等待的 Javascript，而不是回显所有评论。

它不使用*max-results*或*start-index*，但没有它们也能很好地完成工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-15T13:29:05.300

使用 api 的 'orderby' 参数并将其设置为 'published' 以检索几乎所有评论。

```
https://gdata.youtube.com/feeds/api/videos/<videoID>/comments?max-results=50&alt=json&orderby=published 
```

您仍然可以使用 start-index 参数循环浏览评论，但这不是一个好主意。

来自文档：API 响应使用标签来识别提要中条目的上一页和/或下一页条目的分页链接。为避免分页问题，​​我们建议您使用这些链接使用户能够链接到 API 结果的不同页面。

如果提要包含上一页结果，则 API 响应将包含一个 rel 属性值为 previous 的标签。如果提要包含下一页结果，则 API 响应将包含一个 rel 属性值为 next 的标签。

[https://developers.google.com/youtube/2.0/reference#Paging_through_Results](https://developers.google.com/youtube/2.0/reference#Paging_through_Results)

这样你就不会得到任何嵌套的提要。要获得下一组结果，只需使用上一页结果中给出的链接！希望这可以帮助。它对我有用！

# google-chrome - 基于默认搜索引擎的 Chome API 清单动态 url 权限？

> ID：10941806
> 
> 赞同：0
> 
> 时间：2012-06-08T00:47:45.130
> 
> 标签：google-chrome, google-chrome-extension

有没有办法提取默认搜索引擎（用于多功能框）的 url，然后将其包含在 URL 权限范围内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:14:53.677

快速回答是否定的，没有这样的 API 可以做到这一点。除非你想使用一个 NPAPI 插件，它基本上可以做任何事情。如果是这样，那么您可以通过阅读 chrome 文件来访问默认搜索引擎，根据[这篇文章](https://stackoverflow.com/a/7872947/754803)，它位于 sqlite 数据库中。

# c# - 通过 CMIS (dotCMIS) 连接到 SP2010：异常未授权

> ID：10941809
> 
> 赞同：0
> 
> 时间：2012-06-08T00:48:02.863
> 
> 标签：c#, apache, sharepoint, cmis, dotcmis

我正在使用 dotCMIS 并想简单地连接到我的 SP2010 服务器。我试图用 C# 来做到这一点，就像第一部分中的[http://chemistry.apache.org/dotnet/getting-started-with-dotcmis.html](http://chemistry.apache.org/dotnet/getting-started-with-dotcmis.html)

所以我有这样的事情：

```
 Dictionary<string, string> parameters = new Dictionary<string, string>();
    parameters[SessionParameter.BindingType] = BindingType.AtomPub;
    parameters[SessionParameter.AtomPubUrl] = "http://mysharepoint";
    parameters[SessionParameter.User] = "SPAdmin";
    parameters[SessionParameter.Password] = "1234sharepoint";

    SessionFactory factory = SessionFactory.NewInstance();
    ISession session = factory.GetRepositories(parameters)[0].CreateSession(); //exception unathorized 
```

但我总是例外：`DotCMIS.Expcetions.CmisRunterimException: Unathorised`

有任何想法吗？通过浏览器，我可以使用相同的用户/密码登录到该站点，所以这可能不是问题。起初我因为 NTLM 问题（[https://issues.apache.org/jira/browse/CMIS-531](https://issues.apache.org/jira/browse/CMIS-531)）而坚持了下来，但即使我使用`parameters[SessionParameter.AuthenticationProviderClass] = "DotCMIS.Binding.NtlmAuthenticationProvider";`了同样的例外。好吧......这个例外并没有真正帮助我。我希望我能获得更多信息——也许有更好的方法？我还能尝试什么？谢谢！

PS：是的，在我开始使用 dotCMIS 之前，我确实安装和配置了 MS CMIS 连接器：[http ://technet.microsoft.com/en-us/library/ff934619.aspx](http://technet.microsoft.com/en-us/library/ff934619.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:29:34.993

您的 AtomPubUrl 看起来很可疑。我不知道这是否是您添加的占位符以屏蔽真实 URL，或者这是否是您正在使用的实际 URL。如果它是实际 URL，则它看起来缺少 AtomPub 服务文档的路径。要判断是否是这种情况，您应该能够调用 URL、登录并返回一堆 XML，即 CMIS 服务描述符。相反，如果您获得的是一个充满 HTML 的面向用户的页面，则说明您使用了错误的 URL。

例如，在 Alfresco 中，用户登录到 /share，但 AtomPub 绑定在 /alfresco/cmisatom。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:13:20.873

是的，AtomPubUrl 是错误的。

对于 sharepoint，它不足以将默认 sp url ( `http://mysharepoint`) 或 url 发布到 cmis lib ( `http://mysharepoint/cmis`) 我需要指向存储库 id，不知何故 CMIS 的 sp 端点是：

```
http://mysharepoint/_vti_bin/<myLib4CMIS>/<repID>?getRepositoryInfo 
```

[http://technet.microsoft.com/en-us/library/ff934619.aspx](http://technet.microsoft.com/en-us/library/ff934619.aspx)

不知何故，它令人困惑，但它的工作原理:) dotCMIS 真的很好。

# wordpress - wp_query 未在 pre_get_posts 中正确过滤 tax_query

> ID：10941810
> 
> 赞同：0
> 
> 时间：2012-06-08T00:48:03.577
> 
> 标签：wordpress, search, hook, custom-post-type, custom-taxonomy

我在以下情况下遇到问题：我正在创建一个自定义表单来搜索我的自定义帖子类型 (immobiliare) 并附加到此我有 2 个自定义分类法：位置和信息学。

我的 searchform.php 是：

```
<form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
    <input type="hidden" value="proceed" name="s" id="s" />
    <fieldset>
      <legend>Ricerca per:</legend>
      <label class="screen-reader-text" for="query">Testo:</label>
          <input type="text" value="<?php the_search_query(); ?>" name="query" id="query" />
    </fieldset>
    <fieldset>
      <label class="screen-reader-text" for="s">Tipologia:</label>
          <?php wp_dropdown_categories(array(
            'hide_empty' => 0,
            'taxonomy' => 'tipologia',
            'name' => 'tipologia',
            'show_option_all' => 'Nessuna Preferenza'
          )); ?> 
    </fieldset>
    <fieldset>
      <label class="screen-reader-text" for="s">Località:</label>
          <?php wp_dropdown_categories(array(
            'hide_empty' => 0,
            'taxonomy' => 'location',
            'name' => 'location',
            'show_option_all' => 'Nessuna Preferenza'
          )); ?> 
    </fieldset>
    <input type="submit" id="searchsubmit" value="Search" />
</form> 
```

如您所见，我有 3 个字段：1 个是文本字段，另外 2 个是包含我的分类法的下拉列表。我希望用户能够搜索这些字段。我不得不破解“s”输入类型，因为它不允许我提交空查询并添加了一个“查询”字段。我的functions.php文件如下：

```
<?php

  // Start LOGGING
  if(!function_exists('_log')){
    function _log( $message ) {
      if( WP_DEBUG === true ){
        if( is_array( $message ) || is_object( $message ) ){
          error_log( print_r( $message, true ) );
        } else {
          error_log( $message );
        }
      }
    }
  }
  // end LOGGING

  // start SEARCH FORM
  function ij_get_int($var){
    if (isset($var)) {
      $int_var = intval($var);
      if ($int_var > 0)
        return $int_var;
    }
    return false;
  }

  function ij_get_str($var) {
    $str_var = esc_attr($var);
    if (strlen($str_var) > 0)
      return $str_var;
    return false;
  }

  function custom_search_results($query) {
    if ($query->is_search && $query->is_main_query()) {
      $tax_query = array(
        'relation' => 'AND',
      );
      $location = ij_get_int($_GET['location']);
      $tipologia = ij_get_int($_GET['tipologia']);
      if ($location) {
        array_push($tax_query, array(
           'taxonomy' =>   'location',
           'field'    =>   'id',
           'terms'    =>   $location,
           'operator' =>   'IN'
        ));
      }
      if ($tipologia) {
        array_push($tax_query, array(
           'taxonomy' =>   'tipologia',
           'field'    =>   'id',
           'terms'    =>   $tipologia,
           'operator' =>   'IN'
        ));
      }
      $query->set('tax_query', $tax_query);

      $query->set('s', ij_get_str($_GET['query']));
      $query->set('post_type', 'immobiliare');
    }
  }

  add_action('pre_get_posts', 'custom_search_results');
  // end SEARCH FORM

?> 
```

在这里，我连接到我的自定义表单的响应并添加：

*   用户输入有效数据时的实际查询（“查询”而不是“s”）。
*   需要时按分类过滤。

我不知道为什么这不起作用（花了一天！），我可以看到我的查询返回正确的 's' 参数：

```
$query->set('s', ij_get_str($_GET['query'])); 
```

但不是分类过滤器。

我究竟做错了什么？我想在我的 search.php 文件中使用标准循环，所以在某种程度上我希望我的钩子函数自动插入到循环中。一件奇怪的事情是，如果我用相同的设置创建一个新的 WP_Query 对象（而不使用“set”方法），它会返回我想要的东西！我试着做 $query = new WP_Query... 但这也不起作用！！

如果我将查询请求转储到我的 search.php 顶部，我会得到以下信息：

```
SELECT SQL_CALC_FOUND_ROWS  wp_posts.* FROM wp_posts  WHERE 1=1  AND 0 = 1 AND (((wp_posts.post_title LIKE '%vil%') OR (wp_posts.post_content LIKE '%vil%')))  AND wp_posts.post_type = 'immobiliare' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC LIMIT 0, 10 
```

有没有人有任何提示可以分享？你能帮我一把真是太酷了！谢谢丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:28:26.820

您现在可能已经解决了这个问题，但是您的查询有 ... where 1=1 and 0=1 ... 所以它不会返回任何东西，因为您要求的是一个记录集，包括真假。

# objective-c - 使用 NSPredicate 进行反向字符串比较

> ID：10941811
> 
> 赞同：5
> 
> 时间：2012-06-08T00:48:04.093
> 
> 标签：objective-c, ios, core-data, nspredicate

我一直在互联网上寻找这个答案，但到目前为止还没有运气。所以我需要咨询这里聪明又善良的人。这是我第一次在这里提问，所以我希望我做对了，不要重复这个问题。

对于我看到的所有示例，搜索字符串是存储在核心数据中的子字符串。另一方面，我想实现以下目标：

存储在核心数据中的字符串实际上是子字符串。我想通过获取所有具有子字符串的核心数据行属于提供的搜索字符串来进行搜索。

例如：在核心数据中，我有“AB”、“BC”、“ABC”、“ABCDEF”、“GH”、“ABA” 在应用程序中，我通过提供超字符串进行搜索：“ABCDEF” , 结果将返回 "AB","BC","ABC","ABCDEF" 但不返回 "GH", "ABA" 因为这两个子字符串不属于超字符串。

我应该如何设置我的 predicateWithFormat 语句？

这行不通，因为它正在做相反的事情：

```
NSPredicate *myPredicate = [NSPredicate predicateWithFormat:@"substring LIKE[c] %@", @"ABCDEF"]; 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:34:47.887

的反面`CONTAINS`将不起作用。此外，您将无法使用`LIKE`，因为您必须获取正在搜索的属性并将其转换为通配符字符串。

要走的路是使用`MATCHES`，因为你可以使用正则表达式。`*`首先，通过在每个字母后添加 a 将您的搜索字符串转换为正则表达式。然后形成谓词。

此解决方案已经过测试，可以与您的示例一起使用。

```
NSString *string= @"ABCDEF";
NSMutableString *new = [NSMutableString string];
for (int i=0; i<string.length; i++) {
    [new appendFormat:@"%c*", [string characterAtIndex:i]]; 
}
// new is now @"A*B*C*D*E*F*";
fetchRequest.predicate = [NSPredicate predicateWithFormat:
                          @"stringAttribute matches %@", new]; 
```

`stringAttribute`谓词中的哪里是`NSString`托管对象的属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:11:27.467

我认为这会起作用：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"%@ contains self",@"ABCDEF"]; 
```

您可以在核心数据中这样使用它：

```
-(IBAction)doFetch:(id)sender {
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    request.entity = [NSEntityDescription entityForName:@"Expense" inManagedObjectContext:self.managedObjectContext];
    request.predicate = [NSPredicate predicateWithFormat:@"%@ contains desc",@"ABCDEF"];
    NSArray *answer = [self.managedObjectContext executeFetchRequest:request error:nil];
    NSLog(@"%@",answer);
} 
```

在这个例子中，“desc”是实体“Expense”的一个属性。这仅正确检索“desc”是“ABCDEF”子字符串的行。

# javascript - 带有js css和html的多个模态窗口

> ID：10941813
> 
> 赞同：1
> 
> 时间：2012-06-08T00:48:19.370
> 
> 标签：javascript, html, css

我正在制作多个模态窗口，尽管我在重复自己。如果我能看到一种不同的 javascript 方法以使其更简洁，我肯定会很感激。当我是忍者时，我会支付它......

提前致谢。这是我的[jsfiddle](http://jsfiddle.net/marcus_sustain/EBpjk/)。我创建了两个模态、两个掩码和两个模态内容区域。我还创建了一个 img 链接和一个按钮链接。每个模态分别一个。我想使用该功能打开任何模态窗口.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:53:39.673

用于`document.createElement`动态创建新的模态。

```
function createModal(txt){
    var ele = document.createElement("div");
    ele.id = "modal";
    document.body.appendChild(ele);

    var mask = document.createElement("div");
    mask.id = "modalMask";
    mask.onclick = function(){
        ele.outerHTML = "";
    }
    ele.appendChild(mask);

    var inside = document.createElement("div");
    inside.id = "modalContent";
    inside.innerHTML = txt;
    ele.appendChild(inside);
}
createModal("Content here");

//do more stuff here 
```

`div`当用户单击“关闭”时，您必须删除。

# ruby-on-rails - 变量是典型的“指针”吗？params[] 是指针吗？params[] 是变量吗？

> ID：10941815
> 
> 赞同：0
> 
> 时间：2012-06-08T00:49:08.087
> 
> 标签：ruby-on-rails, ruby, variables, pointers, params

请不要攻击。这是让我想到这一点的示例和代码。

我正在研究 ruby​​ on rails 并且在 MVC 和 params[] 运算符中。并且一直在放下一些证明之类的东西，提醒我的笔记本专用于导轨的内封面，反正

```
"So we don't just want to call tweet #1\. Tweet.find(1) isn't enough."
===> we need Tweet.find(params[:id])

params[:id] aka params = { :id => 1 } 
```

所以我给自己贴上了不同的标签，从哈希开始。“1 是值，:id 是键，“参数”是....指针？

参数是指针吗？它是一个变量吗？

编辑：是否有任何其他“变量”（因为缺乏更好的术语）接受 :keys 没有参数以外的值？这是一种特殊类型的“容器”还是只接受没有值的键是正常的 EDIT2：所有变量在技术上都是指针吗？如果这是真的，那么哈希中的 :keys 在技术上也是指针吗？哈哈，如果这是真的 params 是一个指向指针的指针，听起来很对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:15:40.797

我认为您在这里使用的术语不正确。也许这会有所帮助：

*   *params*标记是一个变量名，它包含对某个对象的引用。
*   从技术上讲，*params*是一种返回对 Hash 对象的引用的方法。
*   在实践中，您将 params 视为哈希，因为`params.is_a?(Hash) == true`.
*   :id 标记是一个 Symbol 对象。
*   在`params[:id]`:id 中是哈希值的键。

恕我直言，将 Ruby 中的对象视为指针通常是没有用的——除非您出于某种原因故意以这种方式使用它们。但是，是的，在底层有很多间接层，它们在运行时将 C 指针转换为 Ruby 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:53:53.557

params 是来自 HTTP 请求的变量的哈希值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:13:20.373

`params`是一种返回对哈希的引用的方法。

*（但通常它被称为“`params`哈希”，而不是“`params[]`运算符”。）*

哈希可以使用符号以及其他数据类型作为哈希键：

```
[1] pry(main)> h = Hash.new
=> {}
[2] pry(main)> h[:foo] = 42
=> 42
[3] pry(main)> h[42] = :foo
=> :foo
[4] pry(main)> h
=> {:foo=>42, 42=>:foo}
[5] pry(main)> h[h[:foo]]
=> :foo 
```

我不确定您所说的“接受`:keys`没有价值”是什么意思。

符号也可以以其他方式使用，例如，指代一种方法。一个例子是定义 a 时`before_filter`：

```
class UsersController < ApplicationController

  before_filter :init

  def index
    # etc
  end

  private

    def init
      # Does some stuff
    end
end 
```

该`before_filter`方法采用一个符号，指示在调用操作之前要运行的方法。

符号*不是*引用，它们是符号，并且对自己进行评估。请参阅[这个 SO 问题](https://stackoverflow.com/questions/2341837/understanding-symbols-in-ruby)。

# jquery - Datepicker 插件在文本区域中不起作用

> ID：10941818
> 
> 赞同：0
> 
> 时间：2012-06-08T00:49:29.410
> 
> 标签：jquery, jquery-ui, datepicker

我无法在文本区域中包含 Datepicker。我已经在 CodeIgniter 中成功使用了它，但是当我尝试将它放入 osCommerce 时，它​​不起作用。我没有在 osCommerce 中使用任何模板或其他插件。

在下面的代码段中，我试图让 Datepicker 为名为的文本区域工作`comments`：

```
<tr><td class="main" width="75%"><b><?php echo //DELIVERY_INFO;?></b></td></tr>
</table>
<table border="0" width="100%" cellspacing="0" cellpadding="2" >
<tr>
<td id="datepicker"><?php echo tep_draw_textarea_field('comments', 'soft', '60', '5'); ?></td>
</tr>                      
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:53:33.867

元素不支持日期选择器`textarea`，特别是它支持内联模式的 and 元素，否则仅`span`支持元素。`div``input`

[参考](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js#L154)

这是使用日期选择器的推荐方法：

```
$("#datepicker").datepicker(); 
```

HTML：

```
<input id="datepicker" type="text"> 
```

# android - 在android中更改android.R.layout.simple_list_item_single_choice中的单选按钮背景？

> ID：10941819
> 
> 赞同：1
> 
> 时间：2012-06-08T00:49:58.863
> 
> 标签：android

在`android.R.layout.simple_list_item_single_choice`有以下布局-

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
/> 
```

我们如何`radiobutton`在该视图中更改背景。默认情况下它是绿色的，我想拥有自己的图像而不是绿色单选按钮。我认为我们已经`attr`对`listChoiceIndicatorSingle`. 但我无法在任何地方找到 listChoiceIndicatorSingle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:29:06.067

OK完成。我能够在 sdk 内的 platofrom 文件夹中找到单选按钮的样式和选择器文件。谢谢你的时间。

# python - Python DIGEST-MD5 SASL 失败

> ID：10941824
> 
> 赞同：1
> 
> 时间：2012-06-08T00:50:26.303
> 
> 标签：python, xmpp, sasl

在 Python 中实现 Digest-MD5。试图对它的工作原理有一个基本的了解，所以我敲了一些快速代码来看看。它似乎工作并且似乎与 RFC 保持一致，但我总是只收到“失败”消息。这是我的代码：

```
 nonce = [FROM REQUEST]
    username = ***
    password = ***
    server = chat.facebook.com
    cnonce = "X8fwG1eWR+EHEVEB44t5qThEpCn/3KqcftmvSyWS3sN="
    nc = 000000001

    x = "%s:%s:%s" % (self.username, self.server, self.password)

    md5sum = md5.new()

    md5sum.update(x)

    y = (md5sum.digest()).encode('hex')

    a = "%s:%s:%s:" % (y, nonce, cnonce)

    a2 = "AUTHENTICATE:xmpp/%s" % self.server

    md5sum = md5.new()
    md5sum.update(a)
    ha1 = (md5sum.digest()).encode('hex')

    md5sum = md5.new()
    md5sum.update(a2)
    ha2 = (md5sum.digest()).encode('hex')

    kd = "%s:%s:%s:%s:auth:%s" % (ha1, nonce, nc cnonce, ha2)

    md5sum = md5.new()
    md5sum.update(kd)
    z = (md5sum.digest()).encode('hex')

    buffer = "username=\"%s\",realm=\"%s\",nonce=\"%s\",cnonce=\"%s\",nc=%s,qop=auth,digest-uri=\"xmpp/%s\",response=%s,charset=utf-8" % (username, server, nonce, cnonce, nc, server, z)

    send_data = base64.b64encode(buffer) 
```

这是交换的粗略概述：

```
 Server: <challenge xmlns="urn:ietf:params:xml:ns:xmpp-sasl">cmVhbG09ImNoYXQuZmFjZWJvb2suY29tIixub25jZT0iM0E5NjdDQTFFQ0EzM0RDNDdDQzJDQkM0QUQxNjcyMTUiLHFvcD0iYXV0aCIsY2hhcnNldD11dGYtOCxhbGdvcml0aG09bWQ1LXNlc3M=</challenge>

    Client: <response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>dXNlcm5hbWU9InRlc3RjaGF0MjUwMiIscmVhbG09ImNoYXQuZmFjZWJvb2suY29tIixub25jZT0iM0E5NjdDQTFFQ0EzM0RDNDdDQzJDQkM0QUQxNjcyMTUiLGNub25jZT0iWDlmd0cxZVdSK0VIRVZFQjQ0dDVxVGhFcENuLzNLcWNmdG12U3lXUzNzTj0iLG5jPTAwMDAwMDAxLHFvcD1hdXRoLGRpZ2VzdC11cmk9InhtcHAvY2hhdC5mYWNlYm9vay5jb20iLHJlc3BvbnNlPTQ0ZTQ3MDkzN2RiZDRlM2E2YTBhY2EwN2IyMDM1YWI3LGNoYXJzZXQ9dXRmLTg=</response>

    Server: <failure xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><not-authorized/></failure> 
```

有任何想法吗？

# google-closure-templates - 为什么我的 Closure 模板中的“Hello”后面没有空格？

> ID：10941827
> 
> 赞同：4
> 
> 时间：2012-06-08T00:51:20.140
> 
> 标签：google-closure-templates

我正在尝试自学闭包模板。我做了一个简单的文件 simple.soy：

```
{namespace examples.simple}

/**
 * says hello to the world
 * @param? name Optional parameter specifying who you are greeting.
 */
{template .hiWorld}
  Hello
  {if $name}
   {$name}!
  {else}
   world!
  {/if}
{/template} 
```

然而，在我编译和调用之后`document.write(examples.simple.hiWorld();`，显示的字符串在“Hello”和“world”之间没有空格：Helloworld！

为什么不？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T02:00:58.100

[闭包模板](https://developers.google.com/closure/templates/)处理[线连接](https://developers.google.com/closure/templates/docs/concepts#linejoining)如下：

> 在模板的正文中，您可以根据需要缩进行，因为模板编译器会删除行首和行尾的所有行终止符和空格，包括行剩余注释之前的空格。编译器完全删除仅包含空格的空行。根据以下启发式连接连续的行：**如果连接位置在任一侧与模板或 HTML 标记接壤，则这些行将无空格连接**。如果连接位置的任一侧都没有与模板或 HTML 标记接壤，则这些行将用一个空格连接。

要在闭包模板中需要空格的地方添加空格，请使用特殊字符命令`{sp}`。如果插入了不需要的空间，您可以使用命令将其删除`{nil}`。有关线连接示例，请参阅[features.soy](http://code.google.com/p/closure-templates/source/browse/trunk/examples/features.soy#33)。

**simple.soy**将变为：

```
{namespace examples.simple}

/**
 * says hello to the world
 * @param? name Optional parameter specifying who you are greeting.
 */
{template .hiWorld}
  Hello{sp}
  {if $name}
   {$name}!
  {else}
   world!
  {/if}
{/template} 
```

# javascript - jscript 垃圾收集器有多快？Three.js 矩阵旋转

> ID：10941828
> 
> 赞同：0
> 
> 时间：2012-06-08T00:51:32.710
> 
> 标签：javascript, memory-management, graphics, garbage-collection, three.js

我正在使用这两个函数来旋转我的 three.js 场景中的对象

```
 // Rotate an object around an arbitrary axis in object space
    function rotateAroundObjectAxis(object, axis, radians) {
        rotationMatrix = new THREE.Matrix4();
        rotationMatrix.makeRotationAxis(axis.normalize(), radians);
        object.matrix.multiplySelf(rotationMatrix);  // post-multiply
        object.rotation.getRotationFromMatrix(object.matrix, object.scale);
        delete rotationMatrix;
    }

    // Rotate an object around an arbitrary axis in world space      
    function rotateAroundWorldAxis(object, axis, radians) {
        rotationMatrix = new THREE.Matrix4();
        rotationMatrix.makeRotationAxis(axis.normalize(), radians);
        rotationMatrix.multiplySelf(object.matrix);        // pre-multiply
        object.matrix = rotationMatrix;
        object.rotation.getRotationFromMatrix(object.matrix, object.scale);
        delete rotationMatrix;
    } 
```

其中rotationMatrix 是一个全局变量。我对 Javascript 和 Web 应用程序开发没有经验，但我与一个似乎向我传达的人交谈，因为有时我会在一个框架中调用这些函数一次，我应该担心它每次调用都会创建新对象这一事实。到目前为止，这还没有给我带来问题，但是**我是否应该担心垃圾收集器最终无法跟上**？我知道这里的 delete 关键字与 C++ 不同，只会删除引用。**当我在每个函数的末尾调用它时，这有帮助吗？**除了**让这个功能更高效之外，我还能做些什么吗？**这样它就可以被尽可能多地调用，而不会减慢速度或最终使浏览器占用太多内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:34:33.807

在进一步摆弄这个之后，我学到了很多关于如何使用 Chrome 开发者工具的知识。我还重写了这些函数，以使我觉得可能会更有效。我将不得不看看它是如何扩展的，但是分析工具似乎表明这些在内存和垃圾收集器上要好一些。

然而，在世界空间中旋转的功能需要一个副本才能不创建新矩阵。简而言之，如果我们不每次调用都创建一个新矩阵，我们就不能简单地复制引用，我们必须复制矩阵。基本上它归结为这个副本或垃圾收集器开销是否会更昂贵。

```
// Rotate an object around an arbitrary axis in object space
var rotObjectMatrix= new THREE.Matrix4();
function rotateAroundObjectAxis(object, axis, radians) {
    rotObjectMatrix.makeRotationAxis(axis.normalize(), radians);
    object.matrix.multiplySelf(rotObjectMatrix);      // post-multiply
    object.rotation.getRotationFromMatrix(object.matrix, object.scale);
}

var rotWorldMatrix = new THREE.Matrix4();
// Rotate an object around an arbitrary axis in world space       
function rotateAroundWorldAxis(object, axis, radians) {
    rotWorldMatrix.makeRotationAxis(axis.normalize(), radians);
    rotWorldMatrix.multiplySelf(object.matrix);        // pre-multiply
    object.matrix.copy(rotWorldMatrix);
    object.rotation.getRotationFromMatrix(object.matrix, object.scale);
} 
```

我不确定这是否会更好。我拍了这些截图。这个是用**[原来的功能](https://www.dropbox.com/s/mrn8iurenrj79vq/screen2.png)**，这个是**[新的功能](https://www.dropbox.com/s/6zpt9a8yewnhdvj/screen1.png)**。似乎表明新的性能稍好一些。我不确定我是否能注意到差异。

编辑：一旦我意识到 updateMatrix 函数，我想出了一个不同的函数。这避免了复制整个矩阵的使用。这是新的世界旋转功能：

```
/** Adds a rotation of rad to the obj's rotation about world's axis */
var rotWorldMatrix = new THREE.Matrix4();
function rotateWorldAxis(obj, axis, rad) {
    rotWorldMatrix.makeRotationAxis(axis.normalize(), rad);
    obj.updateMatrix();
    rotWorldMatrix.multiplySelf(obj.matrix); // pre-multiply
    obj.rotation.getRotationFromMatrix(rotWorldMatrix, obj.scale);
} 
```

# php - ZF：子表单和数组表示法

> ID：10941829
> 
> 赞同：0
> 
> 时间：2012-06-08T00:51:33.370
> 
> 标签：php, zend-framework

我有一个 Zend_Form 对象，并添加了一个 subForm。我所期望的是，如果我调用 Zend_Form 对象的 render 方法，它将渲染其元素以及子表单的元素，并且子表单的元素名称将以数组表示法，子表单标题作为数组名称，其元素' 名称作为键。但是，它没有给我子表单元素的数组表示法。如果我在子表单上调用 setIsArray(TRUE)，我只会得到它。任何想法为什么？

# python - Python 高手如何识别和检查 Python 3 数据结构的内容？

> ID：10941830
> 
> 赞同：1
> 
> 时间：2012-06-08T00:51:42.273
> 
> 标签：python, python-3.x

我是 Python 的菜鸟。

我经常发现自己在查看一段代码并试图找出数据结构（例如字典）中的内容。事实上，我首先要解决的问题是“这是什么类型的数据结构？” 然后我试着弄清楚如何看里面有什么。我看着一个变量并说“这是一个字典，还是一个列表，还是一个多字典或其他我还不熟悉的东西？”。然后，“里面是什么？”。它消耗大量时间，我只是不知道我是否采取了正确的方法。

所以，问题是，“Python 大师如何找出某种数据结构，以及他们使用什么技术来查看这些数据结构内部的内容？”

我希望这个问题不是太笼统，但我花费了大量的时间来尝试解决识别数据结构和查看其内容的问题，更不用说编写有用的代码了。

多谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:05:17.113

对变量使用 type() 函数将告诉您数据类型。例如：

```
inventory = {'cows': 4, 'pigs': 3, 'chickens': 5, 'bears': 2}
print(type(inventory)) 
```

将打印

`<class 'dict'>`

这意味着变量inventory是一个字典。

其他可能的数据类型是字符串的“str”、整数的“int”、浮点数的“float”、元组的“tuple”和布尔值的“bool”。

要查看集合中的内容，您可以简单地使用 print() 函数。

```
aList = [ 'hunger', 'anger', 'burger']
print(aList) 
```

将输出

```
['hunger', 'anger', 'burger'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T02:39:42.217

我通常更关心一个类型是如何/使用的/而​​不是一个类型到底是什么。

例如，如果一个对象与 say 一起使用：

```
foo["hey"] = "there"
for key, value in foo.items():
    print key, '->', value 
```

然后我假设 'foo' 是某种类似 dict 的对象，除非我有理由进一步调查，否则这就是我所关心的。

（注意：我还在 python 2.x 领域，python 3.x 中的语法略有不同，但重点仍然存在）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T02:43:56.737

而不是“这是什么？”，用 Python 最好问“这是做什么的？” 或“这是如何使用的？”。如果你看到一些被索引的东西，比如`a['foo']`，它是字典还是其他对象都无关紧要，只是它可以被字符串索引。

这个想法通常被称为 Duck Typing，所以搜索这个可能会给你一些有用的信息。快速搜索出现了这篇文章，这似乎与你相关： [http ://www.voidspace.org.uk/python/articles/duck_typing.shtml](http://www.voidspace.org.uk/python/articles/duck_typing.shtml)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T04:34:52.320

我将 a`import pdb;pdb.set_trace()`放在相关位置，并在调试器中使用`dir()`, `.__dict__`and`pp`或任何其他必要的检查形式。

# hadoop - HDFS：你如何递归地列出文件？

> ID：10941831
> 
> 赞同：21
> 
> 时间：2012-06-08T00:51:52.180
> 
> 标签：hadoop, hdfs

您如何通过 Java 列出 HDFS 中某个路径下的所有文件（递归）。我浏览了 API 并注意到 FileSystem.listFiles(Path,boolean) 但是当我初始化它时，我的 FileSystem 实例中似乎不存在该方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T02:00:37.313

您可以查看`org.apache.hadoop.fs.FsShell.ls(FileStatus, FileSystem, boolean, boolean)`您的 hadoop 版本的源代码 - 这是您`hadoop fs -lsr path`从命令行执行 a 时调用的内容

*   [0.20.2](http://svn.apache.org/viewvc/hadoop/common/tags/release-0.20.2/src/core/org/apache/hadoop/fs/FsShell.java?view=markup#l593) - 第 593 行
*   [1.0.2](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.2/src/core/org/apache/hadoop/fs/FsShell.java?view=markup#l590) - 第 590 行

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-07-16T06:32:43.317

使用 -R 后跟 ls 命令以递归方式列出文件/目录。

```
hadoop fs -ls -R Path/Of/File 
```

ls 命令的可能属性是

**-d** ：目录被列为普通文件。

**-h** "以人类可读的方式而不是字节数来格式化文件的大小。

**-R** "递归列出目录的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T21:27:29.007

```
hadoop-user@hadoop-desk ~/hadoop
$ bin/hadoop fs -lsr /user/someone_else/myfiles

-rw-r--r--   1 hadoop-user supergroup          0 2013-11-26 02:09 /user/someone_else/myfiles/file1.txt

-rw-r--r--   1 hadoop-user supergroup          0 2013-11-26 02:09 /user/someone_else/myfiles/file2.txt

drwxr-xr-x   - hadoop-user supergroup          0 2013-11-26 02:09 /user/someone_else/myfiles/subdir

-rw-r--r--   1 hadoop-user supergroup          0 2013-11-26 02:09 /user/someone_else/myfiles/subdir/anotherFile.txt 
```

# php - PHP 表单：仅包含填写字段的成功电子邮件

> ID：10941833
> 
> 赞同：0
> 
> 时间：2012-06-08T00:52:11.460
> 
> 标签：php, forms

一段时间以来一直在为此苦苦挣扎。基本上我有 6 个字段，姓名、电子邮件、电话、位置、日期和预算。姓名和电子邮件是唯一必填字段。当我收到电子邮件时，我也会看到其他字段。是否可以只接收已填写的字段？

这是代码；

```
<?php
// get posted data into local variables
$EmailFrom = "email@email.com";
$EmailTo = "email@email.com";
$Subject = "My form";
$Name = Trim(stripslashes($_POST['Name'])); 
$Email = Trim(stripslashes($_POST['Email'])); 
$Phone = Trim(stripslashes($_POST['Phone']));

$Location = Trim(stripslashes($_POST['Location'])); 
$Date = Trim(stripslashes($_POST['Date']));
$Budget = Trim(stripslashes($_POST['Budget'])); 

// validation
$validationOK=true;
if (!$validationOK) {
  print "<meta http-equiv=\"refresh\" content=\"0;URL=#\">";
  exit;
}

$userip = ($_SERVER['X_FORWARDED_FOR']) ? $_SERVER['X_FORWARDED_FOR'] : $_SERVER['REMOTE_ADDR'];

// prepare email body text
$Body = "";
$Body .= "Location: "; $Body .= $Location; $Body .= "\n";
$Body .= "Date: "; $Body .= $Date; $Body .= "\n";
$Body .= "Budget: "; $Body .= $Budget; $Body .= "\n";

$Body .= "Name: "; $Body .= $Name; $Body .= "\n";
$Body .= "Email: "; $Body .= $Email; $Body .= "\n";
$Body .= "Phone: "; $Body .= $Phone; $Body .= "\n";
$Body .= "User's IP: ". $userip;

// send email 
$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

// redirect to success page 
if ($success){
  print "<meta http-equiv=\"refresh\" content=\"0;URL=#\">";
}
else{
  print "<meta http-equiv=\"refresh\" content=\"0;URL=#\">";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:57:41.697

使用[empty](http://php.net/empty)检查值是否已发布：

```
$Phone = !empty($_POST['Phone']) ? trim(stripslashes($_POST['Phone'])) : false; 
```

`$Phone`如果没有填写，那么稍后将是错误的，您可以这样做：

```
if($Phone)
    $Body .= "Phone: "; $Body .= $Phone; $Body .= "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:57:53.677

您可以简单地检查该值是否存在。你可以这样做：

```
if (!empty($Location) { $Body .= "Location: "; $Body .= $Location; $Body .= "\n"; } 
```

等等等等。这就是说如果位置不为空，则执行该代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:58:57.000

是的，只需在将字段连接到正文之前添加一个检查，例如：

```
if(!$Location)
{
    $Body .= "Location: "; $Body .= $Location; $Body .= "\n";
}
/*You can also use empty like: */
if(!empty($Date))
{
    $Body .= "Location: "; $Body .= $Date; $Body .= "\n";
}
/*Continue here*/ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T01:01:47.423

```
if (isset($_POST['phone'] && !empty($_POST['phone']){
    $phone = $_POST['phone'];
    //add $phone to email body
} 
```

# wordpress - 我如何从插件内部调用或回显变量

> ID：10941835
> 
> 赞同：-1
> 
> 时间：2012-06-08T00:52:31.920
> 
> 标签：wordpress, plugins

大家好，我的 wordpress 网站有问题，如您所知，为了在 facebook 墙上分享和制作视频加载和播放，我们必须在`header.php`网站主题中添加一个元属性，如下所示：

```
<meta property="og:url" content="<?php the_permalink(); ?>">
<meta property="og:title" content="<?php the_title(); ?> ">
<meta property="og:description" content="<?php echo (get_the_excerpt($post->ID, $shortname.'_video_url')); ?>">
<meta property="og:image" content="<?php the_post_thumbnail( 'blog' ); ?>"> 
<meta property="og:video" content="http://tvrisata.com/wp-content/plugins/proplayer/players/player.swf?file=http://domain.com/wp-content/plugins/proplayer/playlist-controller.php?pp_playlist_id=1984pp-single-4fd12daceb632&sid=1339108781">                                                         
<meta property="og:type" content="video">
<meta property="og:video:type" content="application/x-shockwave-flash">
<meta property="og:video:width" content="490">
<meta property="og:video:height" content="350">
<meta property="og:site_name" content="web site name">
<meta property="fb:app_id" content="facebook id"> 
```

问题是，当我在 facebook 墙上分享视频帖子时，facebook 会加载正确的缩略图，当我单击该缩略图时，它总是播放 ID 为“ **pp_playlist_id=1984pp-single-4fd12daceb632&sid=1339108781** ”而不是正确的视频。因此，如果我想让 facebook 播放正确的视频，我必须插入一个这样的元数据：

```
<meta property="og:video" content="http://tvrisata.com/wp-content/plugins/proplayer/players/player.swf?file=http://domain.com/wp-content/plugins/proplayer/playlist-controller.php?pp_playlist_id=1984pp-single-4fd12daceb632&sid=1339108781"> 
```

之后带有正确的视频ID `?`。我的问题是，如何`?`为每个视频帖子生成或获取自动插入的正确 ID？id 由插件生成并作为变量插入嵌入中，因此我尝试在`?`标记后调用此变量，但它不起作用，或者我犯了一个错误，或者该变量位于插件内部而不是主题中。我希望有人可以帮助我。

我已经修改了插件文件，但我是一个初学者，我并不完全理解这一点。这是插件[http://wordpress.org/extend/plugins/proplayer/](http://wordpress.org/extend/plugins/proplayer/)的链接。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:49:15.013

假设您在“视频”类别下有每个视频帖子。您可以设置一个名为“videoLink”的自定义元字段，其 URL 指向该给定帖子的正确视频。

如果帖子不是视频帖子，您可以使用默认视频。所以这样的事情将是一个开始：

```
<?php
$default = 'http://tvrisata.com/wp-content/plugins/proplayer/players/player.swf?file=http://domain.com/wp-content/plugins/proplayer/playlist-controller.php?pp_playlist_id=1984pp-single-4fd12daceb632&sid=1339108781';
$videoLink = get_post_meta(get_the_ID(), 'videoLink', true);
$video = $videoLink && is_category('Video') ? $videoLink : $default;
?>
...
<meta property="og:video" content="<?php echo $video; ?>"> 
```

这是一个非常基本的实现，但您应该能够理解它是如何工作的。让我知道这是否有帮助！

# objective-c - 如何在不首先创建二进制文件的情况下将 NSData 加载到 UIWebView

> ID：10941837
> 
> 赞同：1
> 
> 时间：2012-06-08T00:52:48.217
> 
> 标签：objective-c, ios, uiwebview, nsdata

需要一些帮助，请：

我有一个准备好字节的 NSData（它是一个 RTF 格式的文本）。

我希望能够将所述 NSData 加载到 UIWebView 中，而不必先创建二进制文件，换句话说，不必这样做：

```
[UIWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"rtf"]isDirectory:NO]]]; } 
```

我需要多次调用它，所以我想避免每次都将 NSData 保存到二进制文件中。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:41:44.317

利用`loadData:MIMEType:textEncodingName:baseURL:`

```
[webView loadData:data MIMEType:@"application/rtf" textEncoding:NSUTF8StringEncoding baseURL:someURL]; 
```

您通常需要提供某种 URL 作为`baseURL`，但如果没有相对链接，则使用什么并不重要。（有关更多讨论，请参阅[loadHTMLString baseURL:nil not working in iOS5 。）](https://stackoverflow.com/questions/7981083/loadhtmlstring-baseurlnil-not-working-in-ios5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:14:18.877

我将假设您的 NSData 仅包含 HTML 字符串数据。在这种情况下，您可以执行以下操作：

```
//Use whatever encoding, I assume UTF8
NSString *html = [[NSString alloc] initWithData:yourData encoding:NSUTF8StringEncoding];
[yourWebView loadHTMLString:html baseURL:pathToYourHtml];
[html release]; //Not needed in ARC 
```

# c# - HTTPWebRequest & 一段时间后，400 (Bad Request) 开始

> ID：10941843
> 
> 赞同：7
> 
> 时间：2012-06-08T00:53:17.240
> 
> 标签：c#, mono, xamarin.ios, httpwebrequest, http-status-code-400

我有一个后台工作线程，它不断地与远程服务器同步数据。当我第一次运行该应用程序时，一切似乎都运行良好。它大约每 30 秒发出一次 Web 请求，并且数据成功返回。

如果我让模拟器运行很长时间，最终请求将失败并出现 (400) 错误请求。并且所有后续请求都做同样的事情。如果我杀死应用程序并重新启动它......一切都很好。

有人有想法么？代码如下。

```
public RestResponse<T> Execute<T>(RestRequest request) {
    var restResponse = new RestResponse<T>();
    var serializer = new JavaScriptSerializer();
    var urlPath = baseUrl + "/" + request.Resource;
    Console.WriteLine("Requesting: " + urlPath);
    var httpRequest = (HttpWebRequest)HttpWebRequest.Create(new Uri(urlPath));

    httpRequest.Headers = request.Headers;
    foreach (string key in clientHeaders.Keys)
        httpRequest.Headers.Add(key, clientHeaders[key]);
    httpRequest.Headers.Add("Accept-Encoding", "gzip,deflate");

    Authenticator.Authenticate(httpRequest);
    httpRequest.Method = request.Method.ToString();       
    HttpWebResponse httpResponse = null;
    try {
        if ((request.Method == Method.POST) && (!request.IsJsonPost))
            SetPostData(httpRequest, request);

        if ((request.Method == Method.POST) && (request.IsJsonPost)){
            SetJsonPostData(httpRequest, request);
        }

        httpResponse = (HttpWebResponse)httpRequest.GetResponse();
        var reader = new StreamReader(GetStreamForResponse(httpResponse));
        var responseString = reader.ReadToEnd();
        Console.WriteLine(responseString);
        reader.Close();
        restResponse.StatusCode = httpResponse.StatusCode;
        restResponse.Headers = httpResponse.Headers;
        restResponse.Data = serializer.Deserialize<T>(responseString);
        restResponse.ResponseStatus = ResponseStatus.Completed;
        httpResponse.Close();
    } catch (WebException e) {
        restResponse.ResponseStatus = ResponseStatus.Error;
        restResponse.ErrorMessage = e.Message;
        restResponse.ErrorException = e;
        var webResponse = (HttpWebResponse)e.Response;
        if (webResponse != null) {
            restResponse.StatusCode = webResponse.StatusCode;
            restResponse.Headers = webResponse.Headers;
        }
        if (restResponse.StatusCode != HttpStatusCode.NotModified)
            Console.WriteLine("An exception occured:\r\n " + request.Resource + "\r\n" + e + "\r\n");
    } catch (Exception ex) {
        restResponse.ResponseStatus = ResponseStatus.Error;
        restResponse.ErrorMessage = ex.Message;
        restResponse.ErrorException = ex;
    }

    if (httpResponse != null)
        httpResponse.Close();

    return restResponse;
} 
```

它在这一行失败：

```
httpResponse = (HttpWebResponse)httpRequest.GetResponse(); 
```

堆栈跟踪：

```
System.Net.WebException: The remote server returned an error: (400) Bad Request.
  at System.Net.HttpWebRequest.CheckFinalStatus (System.Net.WebAsyncResult result) [0x002f2] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:1477 
  at System.Net.HttpWebRequest.SetResponseData (System.Net.WebConnectionData data) [0x00141] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:1300 
```

请求永远不会到达远程服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:02:22.497

问题出在`clientHeaders`收藏中。此类`RESTClient`在应用程序生命周期中被实例化一次。我一遍又一遍地添加标题，而不是先清除它们。过了一会儿，标头变得太大，发出了错误的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:08:21.463

我假设你的连接用完了。您可以尝试增加它们：

`<configuration> <system.net> <connectionManagement> <add address="*" maxconnection="65535" /> </connectionManagement> </system.net> </configuration>`

# jquery - 使用 jQuery on() 时无法附加文件“放置”事件

> ID：10941847
> 
> 赞同：0
> 
> 时间：2012-06-08T00:54:04.667
> 
> 标签：jquery, event-handling, drag-and-drop, typeerror

在进行**文件拖放**时，我正在尝试使用[jQuery`on()`方法](http://api.jquery.com/on/)将事件附加到浏览器窗口...`drop`

 **```
$(window).on('drop', function(event) {

    var dt = event.dataTransfer;
    var fileList = dt.files;

    // do stuff with the file list...
}); 
```

...但我得到一个`TypeError`：

![类型错误](../Images/60b875f8dc9bcd28717b7ce88017baaa.png)

每当我尝试附加`drop`到`window`or`document`或时，都会发生这种情况`document.body`。但是，如果我`drop`使用自定义 JavaScript 函数附加事件，则没有问题...

```
function attachEvent(element, event, fn) {
    if (element.addEventListener) {
        element.addEventListener(event, fn, false);
    } else if (element.attachEvent) {
        element.attachEvent('on' + event, fn);
    }
};

attachEvent(window, 'drop', function(event) {

    var dt = event.dataTransfer;
    var fileList = dt.files;

    // do stuff with the file list...
}); 
```

知道为什么会这样吗？我究竟做错了什么？有没有办法将`drop`事件附加到jQuery 或`window`使用jQuery？`document``document.body`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T02:20:28.990

错误消息或`arguments`数组`TypeError`可以更容易地判断问题发生在哪里，但很*可能*您的问题并没有真正发生在绑定上，而是在您的回调中。

jQuery 使用[规范化的事件对象](http://api.jquery.com/category/events/event-object/)。该对象没有`dataTransfer`属性，因此您的`var dt = event.dataTransfer`行`dt`未定义。当你在下一行访问`files`undefined 的属性时，你会得到一个.`dt``TypeError`

您可以从 访问具有所有“正常”属性的本机、非规范化事件对象`event.originalEvent`，因此在使用 jQuery 时，您需要执行以下操作：

```
$(window).on('drop', function(event) {

    var dt = event.originalEvent.dataTransfer;
    var fileList = dt.files;

    // do stuff with the file list...
}); 
```**

# python - 异步获取用户输入并传递给python中的事件循环

> ID：10941851
> 
> 赞同：10
> 
> 时间：2012-06-08T00:54:44.630
> 
> 标签：python, input, event-loop, mud

我正在构建一个单人 MUD，它基本上是一个基于文本的战斗游戏。它没有联网。

我不明白如何收集用户命令并将它们异步传递到我的事件循环中。玩家需要能够在游戏事件触发时随时输入命令。因此，使用 raw_input 暂停该过程是行不通的。我想我需要做一些类似 select.select 和使用线程的事情。

在下面的示例中，我有一个 userInputListener() 模型函数，我喜欢在其中接收命令，如果有输入，则将它们附加到命令 Que。

如果有一个事件循环，例如：

```
from threading import Timer
import time

#Main game loop, runs and outputs continuously
def gameLoop(tickrate):

    #Asynchronously get some user input and add it to a command que 
    commandQue.append(userInputListener())
    curCommand = commandQue(0)
    commandQue.pop(0)

    #Evaluate input of current command with regular expressions
    if re.match('move *', curCommand):
        movePlayer(curCommand)
    elif re.match('attack *', curCommand):
        attackMonster(curCommand)
    elif re.match('quit', curCommand):
        runGame.stop()
    #... etc    

    #Run various game functions...
    doStuff()

    #All Done with loop, sleep
    time.sleep(tickrate)

#Thread that runs the game loop
runGame = Timer(0.1, gameLoop(1))
runGame.start() 
```

我如何在那里获得我的用户输入？

或者更简单地说，任何人都可以向我展示在另一个循环同时运行时存储用户输入的任何示例吗？如果我们能走到那一步，我可以弄清楚其余的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:56:24.243

你确实需要两个线程。一个负责主游戏循环，另一个负责处理用户输入。两者将通过[Queue](http://en.wikipedia.org/wiki/Queue_%28abstract_data_type%29)进行通信。

您可以让您的主进程启动游戏循环线程，然后让它从用户那里获取一行文本并将其“放入”队列中（即在 runGame.start() 之后）。这可以很简单：

```
while not gameFinished:
    myQueue.put(raw_input()). 
```

游戏循环线程将简单地从队列中“获取”一行文本，插入并执行它。

Python 有一个线程安全的[队列实现](http://docs.python.org/library/queue.html)，您可以使用它（包括一个非常基本的多线程使用示例，您可以将其用作指南）。

还有一个简单的命令行 interperter 模块（[cmd 模块](http://docs.python.org/library/cmd)，[这里](http://www.doughellmann.com/PyMOTW/cmd/)有一个很好的实用概述），它也可能对这类项目有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T15:19:31.383

[我制作了一个 pygame hanoi-visualiser，它在这里](https://github.com/Kenkron/Hanoi-Visualizer)异步读取输入

重要的几行是：

```
#creates an input buffer for stdin 
bufferLock=threading.Lock()
inputBuffer=[]

class StdinParser(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
    def run(self):
        global inputBuffer
        running = True
        while running:
            try:
                instruction=raw_input()
                bufferLock.acquire()
                if inputBuffer == False:
                    running = False
                else:
                    inputBuffer.insert(0,instruction)
                bufferLock.release()
            except EOFError:
                running = False
        pyglet.app.exit()

def check_for_input(dt):
    bufferLock.acquire()
    if len(inputBuffer)>0:
        instruction = inputBuffer.pop()
        parseLine(instruction,board)
    bufferLock.release() 
```

# c# - 来自 Web 服务的重复 HTTP 请求

> ID：10941852
> 
> 赞同：0
> 
> 时间：2012-06-08T00:54:51.937
> 
> 标签：c#, asp.net, httpwebrequest

我正在使用 SMS Web 服务，它通过 HTTP Post 向我发送对 SMS 的回复（我无法更改）

我收到这样的回复：

```
 string from = Request.QueryString["from"];
            string message = Request.QueryString["message"];
            string reference = Request.QueryString["ref"];                
            Database.DBLayer db = new Database.DBLayer(App_Code.ConfigClass.ConnectionString);
            db.InsertReply(Convert.ToInt32(reference), from, message); 
```

但它似乎间歇性地向我发送重复.. 有没有办法检查 HTTP 请求是否是重复的，如果它没有采取行动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:58:32.490

如果`ref`唯一标识了消息，那么您可以在插入消息之前检查是否没有看到这样的 ID。甚至可能值得在数据库中的该字段上添加唯一约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:00:44.647

您可以散列响应中的有用信息（例如“from”、“message”和“ref”连接在一起）。

将其用作数据库中的唯一约束。

# java - JDBC 天生不安全？

> ID：10941858
> 
> 赞同：1
> 
> 时间：2012-06-08T00:57:14.990
> 
> 标签：java, mysql, jdbc

我目前正在为大学作业编写程序，我们需要使用 JDBC 连接到 MySQL 数据库。

考虑到数据库密码必须以某种形式暴露给程序，以便程序访问数据库，您肯定不如首先将密码交给黑客吗？

我是对的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:13:44.810

If you're concerned about the security of your JDBC connections, encrypt them. [http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-using-ssl.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-using-ssl.html)

You'll pay a performance penalty, but this is the alternative to plain text. According to the MySQL documentation:

> The performance penalty for enabling SSL is an increase in query processing time between 35% and 50%, depending on the size of the query, and the amount of data it returns.

This option is available with most SQL and noSQL databases.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:11:43.410

The password must be exposed to the application, that's for sure, otherwise how is your application connect to the DB?

But this is not a big security flaw. The machine where the application runs is what must be secure at all costs. This is the main thing! If a hacker or even a naive user has access to the machine where the application runs, they could wreck havoc in your systems even without knowing much at all if they have enough privileges. Once a person has access to your application's source code AND to the machine it's running on, there's just no way in the world you can make it secure, unless maybe if you have a very good user account management system.

You can externalize the password to a text file and store it hashed, maybe even with a salt, which is basically the best/most used way I know of... but this just makes the life of someone who has access to your machine slightly harder... having access to the source code they can still break into your database if they are smart, or if they are not, they can simply delete or corrupt it.

So there's nothing wrong with JDBC... if you disagree, please convince the millions of users of JDBC otherwise. Security is not something you build on a single technology. It involves protecting ALL of your systems and adding layer after layer of protection at each different node, but beware that each layer of protection compromises more and more usability and flexibility (this is the reason people don't just add 1000 layers of passwords on top of an application/database, it's just impractical and mostly unnecessary, even).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:44:25.860

[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)是 Java 应用程序用来连接数据库系统的标准 API。它非常成熟、可靠并在 Java 社区中广泛使用。

虽然，某些应用程序通过在源代码中公开（例如）数据库连接凭据来不当使用 API。

在[如何保护 MySQL 用户名和密码不被反编译？](https://stackoverflow.com/questions/442862/how-can-i-protect-mysql-username-and-password-from-decompiling/442872#442872) 这个设计问题有一个很好的解释和一些解决它的建议：比如将数据库凭证存储在应用程序外部的文件中并采用多层架构。

# mysql - cakephp中的mysql查询

> ID：10941864
> 
> 赞同：0
> 
> 时间：2012-06-08T00:58:21.103
> 
> 标签：mysql, cakephp

我想问一下，如何使用 cakephp 中的 mysql 查询仅将表中的一些数据显示到用户视图中。

例如，我有一个学生表。有两个字段，姓名和年龄。

文员，21 岁，
玛丽，23 岁，
马特，21 岁，
克拉拉，21 岁

这是我的查询，`SELECT * FROM Students where age='21'`;

我如何以及在哪里可以在 cakephp 中应用它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:34:12.493

[你试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)...如果您真的需要帮助，您将需要提供更多信息...您是否在线查看过 CakePHP 书籍...

无论哪种方式，作为一个初学者，在你的控制器的某个地方，你会：

```
$students = $this->Student->find('all',array('conditions' => array('age' => 21)));
$this->set('students', $students); 
```

然后在你看来：

```
foreach($students as $student){
    echo $student['Student']['name'] . ', ' . $student['Student']['age'] . '<br />';
} 
```

或者类似的东西......

# javascript - 使用 zclip、javascript、jquery 将字符串 var 复制到剪贴板

> ID：10941870
> 
> 赞同：0
> 
> 时间：2012-06-08T00:59:26.877
> 
> 标签：javascript, jquery, zclip

我怎样才能做到这一点？

就这么简单我找不到方法吗？

我这样做没有成功

```
function CopyStuff() {
    var textCopy = " text to copy \n is here}";
    zclip({
        path: "http://zeroclipboard.googlecode.com/svn-history/r10/trunk/ZeroClipboard.swf",
        copy: textCopy
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:42:54.953

Zclip 是一个非常有用的工具，但仍然有很多问题。使用这个插件我注意到它真的很不稳定，它的功能取决于 DOM 的呈现方式。

您的脚本中的主要问题是您没有分配任何元素来初始化和触发复制事件，通常这是一个链接或按钮。看看我使用类和 div 的 ID 制作的示例

[http://jsfiddle.net/XD6JM/](http://jsfiddle.net/XD6JM/)

# php - Cron 作业完整路径：仍然出现损坏的管道错误

> ID：10941876
> 
> 赞同：0
> 
> 时间：2012-06-08T01:01:04.457
> 
> 标签：php, bash, unix, ssh, cron

我知道我做错的是不包括正确的完整文件路径信息，但是经过数小时的调整后，我仍然遇到`sh: 2012-06-08-01-25.sql.gz: Permission denied mysqldump: Got errno 32 on write`错误。这是我的脚本：

```
$dbhost = "DATABASE HOST";
$dbuser = "DATABSE USER";
$dbpass = 'PASSWORD';
$dbname = "DATABASE NAME";

$backupfile = '/home/12345/data/backup/'.date("Y-m-dTH:i") . '.sql.gz';
system("mysqldump -h $dbhost -u $dbuser --password='$dbpass' $dbname | gzip > $backupfile");

$backupfile = $backupfile;

# To S3
require('/home/12345/data/backup/S3.php');  

if (!defined('awsAccessKey')) define('awsAccessKey', 'ACCESS KEY');  
if (!defined('awsSecretKey')) define('awsSecretKey', 'SECRET KEY');  

$s3 = new S3(awsAccessKey, awsSecretKey);

if (!$s3->putObjectFile($backupfile, "BUCKET", 'db-backup/'.$backupfile, S3::ACL_PRIVATE)) {  
    die("104");
}
system("rm $backupfile"); 
```

该脚本使用 gzip 和 mysqldump 压缩我的数据库，然后将此 ZIP 上传到 S3 存储桶上的安全加密文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:12:47.817

这是关键：

```
sh: 2012-06-08-01-25.sql.gz: Permission denied 
```

chown/chgrp 到具有写入权限的用户/组和/或使用 chmod 修改权限，以便执行用户/组可以读取/写入目标目录。

管道已损坏，因为它无法写入文件，权限被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:10:30.227

您似乎没有写入 /home/12345/data/backup 的权限。通过将文件夹的所有者更改为 Apache 用户并为其他所有人读取/执行，确保权限允许 Apache 运行的用户写入指定目录：

```
chown {*APACHE-USER*} /home/12345/data/backup
chmod 755 /home/12345/data/backup 
```

# r - 用数据指定的数据点颜色的散点图

> ID：10941878
> 
> 赞同：2
> 
> 时间：2012-06-07T22:40:30.850
> 
> 标签：r, data-visualization

我正在尝试使用两个数据系列创建一个非常简单的散点图。我想通过我正在使用的数据框中的第四列指定每个点的颜色。我的散点图本身靠近我想要的位置，两个系列有两个不同的字形，但颜色没有分配给正确的点。我对 R 很陌生，所以我不确定从这里去哪里。任何帮助，将不胜感激。附上示例数据和代码（还不能上传图片）。

样本数据：

```
x   y   group   color
0   0   g   red
2   -1  g   blueviolet
0   -1  g   brown
2   -2  g   blueviolet
0   -11 g   blue
2   -6  g   blue
0   1   g   coral
0   -2  g   blue
2   -1  h   blueviolet
0   -1  h   brown
2   -2  h   blueviolet
0   -11 h   blue
2   -6  h   blue
0   1   h   coral
2   -8  h   blue
4   -2  h   coral
1   -5  h   brown
1   -9  h   violet
-2  2   h   blue 
```

示例 R 代码：

```
ztest=read.table(file="ztest.txt",sep="\t",header=TRUE)
plot(ztest$x,ztest$y,type='n')
points(ztest[ztest$group=="g",]$x,ztest[ztest$group=="g",]$y,col=ztest$color,pch=3,cex=.75)
points(ztest[ztest$group=="h",]$x,ztest[ztest$group=="h",]$y,col=ztest$color,pch=1,cex=1.75) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:59:53.987

答案可能是当您使用 read.table 读取颜色时，颜色被解释为一个因素。尝试

```
ztest$color <- as.character(ztest$color) 
```

看看它是否有效。

或者 ggplot2 非常适合这种事情。完成上述操作后，尝试替代您的方法

```
library(ggplot2)
qplot(x,y, color=color, shape=group, data=ztest, size=group) + 
    scale_color_identity(legend=FALSE) +
    scale_shape_manual(values=c(3,1)) +
    scale_size_manual(values=c(3,6)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:15:29.310

您似乎在对点进行子集化，但没有对颜色进行子集化。代替

```
points(ztest[ztest$group=="g",]$x,ztest[ztest$group=="g",]$y,col=ztest$color, ... 
```

尝试

```
points(ztest[ztest$group=="g",]$x,ztest[ztest$group=="g",]$y,col=as.character(ztest[ztest$group=="g",]$color), .... 
```

希望这可以帮助

# actionscript-3 - 反序列化使用 Cirrus 接收的对象

> ID：10941882
> 
> 赞同：0
> 
> 时间：2012-06-08T01:02:00.447
> 
> 标签：actionscript-3, flash, serialization, amf, adobe-cirrus

我正在使用 Cirrus 将一些值传递给我的游戏中的其他玩家，其中一些值是对象，事情是，当我收到这些对象时，它们失去了它们的类型，它们变成了通用对象。

我读过 Cirrus 使用 AMF，但我不知道如何重新获得数据的原始对象类型。

编辑。：

```
//these are the classes involved

registerClassAlias("Action", Action);
registerClassAlias("EntityVO", EntityVO);
registerClassAlias("Point", Point);

//Action takes 3 parameters
Action(type:String = "", entity:EntityVO = null, target:EntityVO = null)

// when EntityVO doesnt require a parameter in the constructor or it has a string/int parameter this works:

var entity = new EntityVO();
var byteArray:ByteArray;
byteArray = new ByteArray();
byteArray.writeObject(action);
byteArray.position = 0;
var object:Object = byteArray.readObject(); //<- works ok

//when I make EntityVO to take a non standard parameter like, a Point, like this:

EntityVO(point:Point = null)

//and I do this:

var entity:EntityVO = new EntityVO(new Point());
var action:Action = new Action("addEntity", entity);
var byteArray:ByteArray;
byteArray = new ByteArray();
byteArray.writeObject(action);
byteArray.position = 0;
var object:Object = byteArray.readObject(); //<- it goes into the EntityVO constructor and says that point is null, (I use point in the constructor to set something) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:41:06.513

你需要做两件事：

1.  `registerClassAlias("alias", classOfTheObjectSerialized)`这告诉 Flash 播放器在从/向可写/可读介质（例如 Socket、ByteArray、NetConnection 等）读取和写入类时需要使用“别名”字符串。

2.  确保您在两端（发送和接收）都这样做，并且被序列化的对象在构造函数中没有非默认参数，它们的属性也是可序列化的（即遵守与上述相同的规则）。

PS。您还需要注意，某些对象本质上是不可序列化的，例如，显示对象都不是，对资源（如流）进行操作的对象也不是可序列化的。由于没有默认构造函数，甚至 BitmapData 也无法序列化。

# javascript - 如何使超链接像按钮一样工作？

> ID：10941885
> 
> 赞同：0
> 
> 时间：2012-06-08T01:03:23.817
> 
> 标签：javascript, html

对于按钮，我们有`onclick`调用 JavaScript 函数的属性，但是如何让超链接像按钮一样工作呢？

此外，如何使用超链接提交表单或做其他按钮可以做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:05:10.680

```
<a href="javascript:void(0)" onclick="someFunction()">Click</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:20:46.243

```
<a href="#" onclick="doSomething(); return false;">Click</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T14:26:59.703

```
<a href=# onClick=alert('hi.'),false>Click</a>

a { -moz-appearance: button; } // or -webkit- 
```

[https://jsfiddle.net/Dezain/r3g9e7a2/](https://jsfiddle.net/Dezain/r3g9e7a2/)

# c# - 如何转换 IEnumerable 的子集合 到 EntityCollection ?

> ID：10941886
> 
> 赞同：0
> 
> 时间：2012-06-08T01:03:28.233
> 
> 标签：c#, linq, entity-framework

我正在使用 EF，所以我的子集合的类型是 EntityCollection < T >。如果属性“Children”为EntityCollection<T>，如何将查询结果IEnumerable<T>转换为EntityCollection<T>？

谢谢

```
 var list = element.Elements(ns + "Parent")
        .Select(parsedXml => 
                        Children = parsedXml.Elements(ns + "Child")
                        .Select(child => new Child { 
                                                        Id = Convert.ToInt32(child.Attribute("id").Value)
                                                   })
                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:38:35.343

由于您已经在使用 LINQ，因此您可以通过创建扩展方法来使用相同的模型：

```
public static EntityCollection<T> ToEntityCollection<T>(this IEnumerable<T> source) 
{
    var col = new EntityCollection<T>();
    foreach (var item in source)
    {
        col.Add(item);
    }
    return col;
} 
```

然后在您的原始 LINQ 语句中通过添加`.ToEntityCollection()`到末尾来使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:20:40.017

没有可用的直接铸造。您将需要遍历集合并添加到新的实体集合中。

```
var eCollection = new EntityCollection<T>();    
foreach (var child in list)
{
    eCollection.Add(child );
} 
```

# solr - Solr，数据库连接在索引表后仍然存在

> ID：10941888
> 
> 赞同：1
> 
> 时间：2012-06-08T01:03:53.977
> 
> 标签：solr, dataimporthandler

我索引了许多用 data-config.xml 中的实体编写的表。但是在索引一个表之后，即使我设置了'holdability="CLOSE_CURSORS_AT_COMMIT"'，数据库连接仍然存在。

索引表后如何删除连接？

```
<dataConfig>
  <dataSource type="JdbcDataSource"
   driver="com.mysql.jdbc.Driver"
   url="jdbc:mysql://hostname/dbname"
   batchSize="2000"
   user="id"
   password="passwd"
   readOnly="true"  
   transactionIsolation="TRANSACTION_READ_COMMITTED"
   holdability="CLOSE_CURSORS_AT_COMMIT"
   connectionTimeout="10000" readTimeout="240000" />
  <document name="doc">
    <entity name="testTbl_0"
            transformer="RegexTransformer"
            onError="continue"
            query="SELECT Title, url, DocID, substring_index(body,' ',2048) \
description FROM testTbl_0 WHERE status in ('1','s') ">
      <field column="DocID" name="id" />
      <field column="Title" name="title_t" />
      <field column="description" name="contents_txt" />
      <field column="url" name="url" />
    </entity>
    <entity name="testTbl_1"
            transformer="RegexTransformer"
            onError="continue"
            query="SELECT Title, url, DocID, substring_index(body,' ',2048) \
description FROM testTbl_1 WHERE status in ('1','s') ">
      <field column="DocID" name="id" />
      <field column="Title" name="title_t" />
      <field column="description" name="contents_txt" />
      <field column="url" name="url" />
    </entity>
....

+-------+------+----------------+------+---------+------+-------+--------+
| Id    | User | Host           | db   | Command | Time | State | Info   |
+-------+------+----------------+------+---------+------+-------+--------+
| 88757 | id   | hostname:38843 | tmp  | Sleep   | 2268 |       | NULL   | 
| 88758 | id   | hostname:38844 | tmp  | Sleep   | 2196 |       | NULL   | 
| 88759 | id   | hostname:38845 | tmp  | Sleep   | 2134 |       | NULL   | 
| 88760 | id   | hostname:47822 | tmp  | Sleep   | 2074 |       | NULL   | 
| 88761 | id   | hostname:47823 | tmp  | Sleep   | 2013 |       | NULL   | 
| 88762 | id   | hostname:47824 | tmp  | Sleep   | 1953 |       | NULL   | 
| 88763 | id   | hostname:47825 | tmp  | Sleep   | 1896 |       | NULL   | 
| 88764 | id   | hostname:47826 | tmp  | Sleep   | 1838 |       | NULL   | 
| 88765 | id   | hostname:39795 | tmp  | Sleep   | 1778 |       | NULL   | 
| 88766 | id   | hostname:39796 | tmp  | Sleep   | 1717 |       | NULL   | 
| 88767 | id   | hostname:39797 | tmp  | Sleep   | 1658 |       | NULL   | 
| 88768 | id   | hostname:39798 | tmp  | Sleep   | 1594 |       | NULL   | 
| 88769 | id   | hostname:39799 | tmp  | Sleep   | 1535 |       | NULL   | 
| 88770 | id   | hostname:50275 | tmp  | Sleep   | 1470 |       | NULL   | 
| 88771 | id   | hostname:50276 | tmp  | Sleep   | 1411 |       | NULL   | 
| 88772 | id   | hostname:50277 | tmp  | Sleep   | 1352 |       | NULL   | 
| 88773 | id   | hostname:50278 | tmp  | Sleep   | 1291 |       | NULL   | 
| 88774 | id   | hostname:57385 | tmp  | Sleep   | 1165 |       | NULL   | 
| 88775 | id   | hostname:57386 | tmp  | Sleep   | 1044 |       | NULL   | 
| 88776 | id   | hostname:57387 | tmp  | Sleep   |  923 |       | NULL   | 
| 88777 | id   | hostname:53484 | tmp  | Sleep   |  801 |       | NULL   | 
| 88778 | id   | hostname:53485 | tmp  | Sleep   |  682 |       | NULL   | 
| 88779 | id   | hostname:58343 | tmp  | Sleep   |  560 |       | NULL   | 
| 88780 | id   | hostname:58344 | tmp  | Sleep   |  438 |       | NULL   | 
| 88781 | id   | hostname:58345 | tmp  | Sleep   |  314 |       | NULL   | 
| 88782 | id   | hostname:50474 | tmp  | Sleep   |  193 |       | NULL   | 
| 88783 | id   | hostname:50475 | tmp  | Sleep   |   72 |       | NULL   | 
```

我阅读了某人关于数据库连接的问答。有人说，db connection 还存活了 10 秒。但我在 1 小时前开始索引（数据导入），所有数据库连接保持 1 小时。

```
| 88757 | id   | localhost:38843 | tmp | Sleep   | 3696 |       | NULL   | 
| 88758 | id   | localhost:38844 | tmp | Sleep   | 3624 |       | NULL   | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:18:00.083

看起来这是一个从 Solr 1.4 开始仍然存在的旧错误（！）：

[https://issues.apache.org/jira/browse/SOLR-2045](https://issues.apache.org/jira/browse/SOLR-2045)

似乎您需要提交结果（或自动提交）以释放数据库连接。

# java - 如何向用户报告丢失的 DTD 文件？

> ID：10941891
> 
> 赞同：0
> 
> 时间：2012-06-08T01:04:20.447
> 
> 标签：java, xml, dom, error-handling, dtd

给定代码：

```
public class ModelHandler
{
//members
private DocumentBuilderFactory m_domFactory;
private DocumentBuilder m_builder;
private Document m_doc;
private XPathFactory m_factory;
private List<String> m_inputErrorLog;

public void openXmlFile(File file)  
{

    this.m_inputErrorLog = new LinkedList<String>() ;

    try 
    {
        m_builder = m_domFactory.newDocumentBuilder();
    } 

    catch (ParserConfigurationException ex) { m_inputErrorLog.add(ex.getMessage());}

       try 
       {
            m_doc = m_builder.parse(file);        
       } 
        catch (Exception ex) 
       {
           m_inputErrorLog.add(ex.getMessage());    
           m_domFactory.setValidating(false);
       }            

        try 
        {
            getNodesList("/"+m_doc.getDocumentElement().getNodeName());
        } 
        catch (XPathExpressionException ex) {
        m_inputErrorLog.add(ex.getMessage());
    }
} 
```

我想向用户展示该`DTD`文件丢失，同时使用`GUI`.

尝试打开文件时如何做到这一点`XML`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:53:52.440

这是解决方案，适用于有一天可能需要它的任何人：

```
import java.io.IOException;
// DOM
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
// SAX
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.XMLReader;

import javax.xml.parsers.ParserConfigurationException;
import org.xml.sax.ErrorHandler;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;
import org.xml.sax.InputSource;

public class XMLUtils {

  private XMLUtils() {}

  // validate using DOM (DTD as defined in the XML)
  public static boolean validateWithDTDUsingDOM(String xml) 
    throws ParserConfigurationException, IOException
  {
    try {
      DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
      factory.setValidating(true);
      factory.setNamespaceAware(true);

      DocumentBuilder builder = factory.newDocumentBuilder();

      builder.setErrorHandler(
          new ErrorHandler() {
            public void warning(SAXParseException e) throws SAXException {
              System.out.println("WARNING : " + e.getMessage()); // do nothing
            }

            public void error(SAXParseException e) throws SAXException {
              System.out.println("ERROR : " + e.getMessage());
              throw e;
            }

            public void fatalError(SAXParseException e) throws SAXException {
              System.out.println("FATAL : " + e.getMessage());
              throw e;
            }
          }
          );
      builder.parse(new InputSource(xml));
      return true;
    }
    catch (ParserConfigurationException pce) {
      throw pce;
    } 
    catch (IOException io) {
      throw io;
    }
    catch (SAXException se){
      return false;
    }
  }

  // validate using SAX (DTD as defined in the XML)
  public static boolean validateWithDTDUsingSAX(String xml) 
    throws ParserConfigurationException, IOException
  {
    try {

      SAXParserFactory factory = SAXParserFactory.newInstance();
      factory.setValidating(true);
      factory.setNamespaceAware(true);

      SAXParser parser = factory.newSAXParser();

      XMLReader reader = parser.getXMLReader();
      reader.setErrorHandler(
          new ErrorHandler() {
            public void warning(SAXParseException e) throws SAXException {
              System.out.println("WARNING : " + e.getMessage()); // do nothing
            }

            public void error(SAXParseException e) throws SAXException {
              System.out.println("ERROR : " + e.getMessage());
              throw e;
            }

            public void fatalError(SAXParseException e) throws SAXException {
              System.out.println("FATAL : " + e.getMessage());
              throw e;
            }
          }
          );
      reader.parse(new InputSource( xml ));
      return true;
    }
    catch (ParserConfigurationException pce) {
      throw pce;
    } 
    catch (IOException io) {
      throw io;
    }
    catch (SAXException se){
      return false;
    }
  }

  public static void main (String args[]) throws Exception{ 

    System.out.println(XMLUtils.validateWithDTDUsingDOM("c:/temp/howto.xml"));
    System.out.println(XMLUtils.validateWithDTDUsingSAX("c:/temp/howto.xml"));
    /*
      output :
               true
               true
    */           
  }
} 
```

# java - “fork”在java中总是意味着并行吗？

> ID：10941902
> 
> 赞同：0
> 
> 时间：2012-06-08T01:07:25.003
> 
> 标签：java, parallel-processing, terminology

我是Java世界的新手。有些名字对我来说听起来很有趣。

其中之一是叉子……我想叉子代表食物是平行的。

总是这样吗？

例如：如果我看到一个名为`pid forkAndExec(String... commands)`can 我假设它总是并行运行的函数。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T01:44:20.253

“分叉”一个流程通常意味着您将创建当前流程的新副本。有时，该术语被滥用来表示创建一个新的不同子进程。到目前为止，一切都很好。

但是，不能保证“平行”假设。它实际上不依赖于 Java，而是依赖于它运行的平台，即硬件和操作系统层。

您可以放心地假设（我会）分叉函数确实会创建一个新进程。然而：

*   如何在后台实际**创建该进程****取决于 JVM 的实现**；
*   该进程的**管理**和**运行**方式**取决于操作系统**（或者更准确地说，取决于**内核的调度程序**）；
*   调度**器能否真正实现并发**取决于**硬件**规格。

调度程序可以：

*   决定玩得好，并为您提供跨多个内核或真实处理器的真正并行化，
*   或者它可能会给你一种使用时间片的并发错觉，
*   或者它可能对你很刻薄，并决定你的进程将被排队，只是因为它不喜欢你（最后一种情况不太可能，或者你给自己一个相当卑鄙的内核，你应该申请离婚）。

此外，您的程序需要以不妨碍您所说的并行化的方式实现（例如，如果父进程设置为无限期等待子进程执行，这几乎不意味着它们同时运行......一个只是在等待另一个赶上）。

另外，您提到了 forkAndExec。小心，因为它们也很容易混淆。许多语言中的一些函数会派生一个新进程并用它替换现有的进程，而另一些函数会创建两个进程并尝试并行运行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T01:45:25.057

您似乎是编程世界的新手。那里的许多成语都是从英语中借来的，意思是完全不同的东西。虽然这些通常是隐喻，就像 fork 一样，但通常不可能从编程世界之外的含义推断出编程世界中的含义。如果您在[Wikipedia](http://en.wikipedia.org/wiki/Fork)上查找它，则必须进行[消歧](http://en.wikipedia.org/wiki/Fork_%28disambiguation%29)并查看计算上下文。在那里你会找到[创建流程](http://en.wikipedia.org/wiki/Fork_%28operating_system%29)的方法。

# windows-phone-7 - 将代码 c#sync httprequest 转换为 async

> ID：10941903
> 
> 赞同：0
> 
> 时间：2012-06-08T01:07:26.223
> 
> 标签：windows-phone-7, c#-4.0, silverlight-4.0, asynchronous

我的代码有问题，我需要将此 Json httprequest 转换为异步方法，以便在 WP7 C# 应用程序中使用它，这是代码，我真的需要这方面的帮助。

它在以下语句中显示错误：

1) myReq.ContentLength = postData.Length;--> ContentLength 不包含该类型的方法

2) webresponse = (HttpWebResponse)myReq.GetResponse(); --> 是 Sync 方法，不包含在 httpresponse 方法中

3) StreamWriter stOut = new StreamWriter(myReq.GetRequestStream(), System.Text.Encoding.ASCII); --> 是 Sync 方法，不包含在 httpresponse 方法中

4) GoogleCell cell = JsonConvert.DeserializeObject(Response);--> 方法重载或缺少转换......并且转换在第 3 次错误。

```
 /// internal google cell info to post

    public GoogleCell GetCellInfo(string lac, string mnc, string mcc, string cellID)
    {

        HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create("https://www.google.com/loc/json");
        myReq.Method = "POST";
        myReq.ContentType = "application/jsonrequest";
        string postData = "{\"cell_towers\": [{\"location_area_code\": \"" + lac + "\", \"mobile_network_code\": \"" + mnc + "\", \"cell_id\": \"" + cellID + "\", \"mobile_country_code\": \"" + mcc + "\"}], \"version\": \"1.1.0\", \"request_address\": \"true\"}";
        myReq.ContentLength = postData.Length;

        StreamWriter stOut = new StreamWriter(myReq.GetRequestStream(), System.Text.Encoding.ASCII);
        stOut.Write(postData);
        stOut.Close();

        HttpWebResponse webresponse;
        webresponse = (HttpWebResponse)myReq.GetResponse();
        Encoding enc = System.Text.Encoding.UTF8;
        StreamReader loResponseStream = new StreamReader(webresponse.GetResponseStream(), enc);

        string Response = loResponseStream.ReadToEnd();
        loResponseStream.Close();
        webresponse.Close();

        GoogleCell cell = JsonConvert.DeserializeObject(Response);
        return cell;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:32:17.703

转换 WCF 中的完整类仍然有错误

JsonConvert.DeserializeObject(响应);

# php - php mssql while循环

> ID：10941904
> 
> 赞同：1
> 
> 时间：2012-06-08T01:07:48.857
> 
> 标签：php, sql-server, sql-server-2005, while-loop

我的 while 循环有一个不寻常的问题，

这是代码：

```
$link = mssql_connect($myServer, $myUser, $myPass);

if (!$link || !mssql_select_db($myDB, $link)) {
    die('Unable to connect or select database!');
}

$result = mssql_query("SELECT
TBL_1.FULLNAME AS FullName,
CAST(TBL_3.NOTE AS VARCHAR(MAX)) AS Note,
TBL_3.CREATEDATE AS CreateDate,
TBL_4.UNAME AS Creator
FROM
database.dbo.TBL_1 TBL_1,
database.dbo.TBL_2 TBL_2,
database.dbo.TBL_3 TBL_3,
database.dbo.TBL_4 TBL_4
WHERE
TBL_1.UID = TBL_2.UID AND
TBL_2.NOTEID = TBL_3.NOTEID AND
TBL_3.CREATORID = TBL_4.USERID AND
TBL_1.UID = '$id'
ORDER BY CreateDate desc") or die(mssql_get_last_message());

if (!mssql_num_rows($result)) {
                            echo '<tr>
                                    <td width="600px"> No results returned</td>
                                    </tr>';
                        } else {
                            while ($row =mssql_fetch_assoc($result)){                           
                            echo "<tr>
                                    <td width='15px'> ".++$counter." </td>
                                    <td width='600px'> ".$row['Note']." </td>
                                    <td width='185px'>".$row['CreateDate']."</td>
                                    <td width='185px'>".$row['Creator']."</td>
                                </tr>";
                                }
                    } 
```

对于大多数记录，一切都符合预期。但在某些情况下，while 循环根本没有响应。没有错误，没有文字，就像我从未运行过命令一样。

我尝试尽可能多地搜索和阅读，但没有错误，很难找到解决方案。

已尝试使用 foreach 代替，并且需要大量的擦洗和清洁才能使其每行不显示 1 个字符。虽然它真的只是在重复第一条记录。

我还应该指出，其中 1 行是 RTF 格式，但我认为这不起作用。

我正在从 *nix 机器连接到 MS SQL2005 服务器。

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T18:01:05.840

如果您使用 freetds 作为驱动程序，那么一些时间使用 smalldate 字段会产生一些问题，您可以做一件事以确保转到您的 php.ini 并尝试切换

```
mssql.datetimeconvert = On 
```

并在您的 freetds.conf 文件中尝试设置

```
client charset = UTF-8
text size = 1048576 
```

这可能是一个问题，因为您不知道我面临这个问题并想与您分享。

# coldfusion - CF 分页 - 如何指示用户所在的页面？

> ID：10941907
> 
> 赞同：0
> 
> 时间：2012-06-08T01:08:49.320
> 
> 标签：coldfusion, coldfusion-9

Ray Camden 有一个关于 CF 分页的优秀指南： [http ://www.raymondcamden.com/index.cfm/2006/4/24/ColdFusion-and-Pagination](http://www.raymondcamden.com/index.cfm/2006/4/24/ColdFusion-and-Pagination)

问题是没有关于用户在哪个页面上的指示符。我所说的指标是指，例如，如果我在 Google 上搜索“pizza”并转到第 4 页，那么第 4 页不是链接。它是黑色的常规文本，并与其他作为链接的页码区分开来。 [http://www.google.com/#q=pizza&start=30](http://www.google.com/#q=pizza&start=30)

我想知道需要对 Ray 的分页教程进行哪些更改，以便用户知道他们在哪个页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:02:58.240

对于 Ray 的代码，您的页码将是：

```
<cfoutput>
#val( (url.start / perpage ) + 1)#
</cfoutput> 
```

（一个基于页面，即第一页是第一页，而不是零）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:42:15.600

使用 request.maxrows 之类的参数（即每页应如何显示项目），从而还可以让您通过使用来扣除当前页面

```
start/maxrows = page 
```

（你可能需要稍微改变一下）

# visual-studio-2010 - 使用自定义操作的 Visual Studio 2010 MSI 项目和服务安装程序类

> ID：10941919
> 
> 赞同：1
> 
> 时间：2012-06-08T01:11:36.933
> 
> 标签：visual-studio-2010, windows-services, installation, windows-installer

除此之外，我的安装程序类没有什么特别之处。它安装 Windows 服务。但是现在我需要提示用户一些信息并将信息传递给安装程序类，以便安装程序类可以更新 app.config。

我在默认用户界面中添加了三个额外的页面：

*   文本框 (A)
*   文本框 (B)
*   文本框 (C)

变量：

*   在A上，我用的是EDITA1，其余的都是不可见的
*   在 B 上，我使用的是 EDITB1，其余的都是不可见的
*   在 C 上，我使用的是 EDITC1，其余的都是不可见的

在“安装”自定义操作中，我的属性设置如下：

*   参数：空白
*   条件：空白
*   CustomActionData: /MYPARAM1=[EDITA1] /MYPARAM2=[EDITB1] /MYPARAM3=[EDITC1]
*   安装程序类：真

在安装程序类中，Install 被覆盖

```
public override void Install(IDictionary stateSaver)
{
    base.Install(stateSaver);    

    // This is to display the Parameters
    // It comes up blank.  No Parameters.
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    foreach (string s in Context.Parameters.Keys)
    {
        sb.Append(s);
        sb.Append(":");
        sb.AppendLine(Context.Parameters[s]);
    }
    //throw new InstallException(sb.ToString());

    //This returns TRUE.
    //throw new InstallException(Context.Parameters.ContainsKey("MYPARAM1").ToString());

    string x= Context.Parameters["MYPARAM1"];
    if (string.IsNullOrEmpty(x))
    {
        throw new InstallException("Missing parameter 'MYPARAM1'");
    }

    <snip>
} 
```

当应用程序运行时，MYPARAM1 为空，所以最后我看到了 InstallException。

我在安装的顶部添加了两块测试代码。首先，创建一个字符串，其中包含应该在命令行中输入的所有参数。我根本没有得到我的参数。第二个块报告“TRUE”——这意味着键“MYPARAM1”在命令行上。第一个和第二个块不同意。怎么会这样？

作为实验，我尝试将字符串更改为 /MYPARAM1 而不是 MYPARAM1。那没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:09:40.237

第一步是创建一个详细日志以查看传递给您的自定义操作的完整命令行。创建日志的命令：`msiexec /i "C:\MyPackage\Example.msi" /L*V "C:\log\example.log"`

在日志中，您可以搜索属性名称以查看它们是否被正确设置并被传递给您的自定义操作。

# github - Github登录报错：该账号是组织，无法登录。请尝试使用您的个人帐户

> ID：10941921
> 
> 赞同：0
> 
> 时间：2012-06-08T01:11:57.203
> 
> 标签：github

当我使用我的 gmail 地址登录 github 时，它显示“该帐户是一个组织，您无法登录。请尝试使用您的个人帐户。”

我不知道我的帐户出了什么问题。

这是否意味着我的帐户在组织中？如果是，如何退出该组织？

或者我想我已经使用该电子邮件地址注册了一个组织，如何删除该组织？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:16:10.177

看起来你有一个组织：

[https://github.com/blog/674-introducing-organizations](https://github.com/blog/674-introducing-organizations)

管理员被分配到一个组织，他/她/他们管理它。您必须使用您的管理员帐户凭据登录才能管理您的组织。

# java - 何时需要调用 DOMConfigurator.configure 来读取 log4j.xml 文件？

> ID：10941922
> 
> 赞同：3
> 
> 时间：2012-06-08T01:12:25.523
> 
> 标签：java, log4j

我正在学习如何在 Java 项目中使用**log4j**（与**slf4j ）。**我读过的一些网页说调用`DOMConfigurator.configure("log4j.xml")`将文件中的设置合并`log4j.xml`到`Logger`您创建的文件中。

我还看到了很多代码示例，其中显示了`log4j.xml`文件和一些 Java 代码，而 Java 代码不调用`DOMConfigurator.configure`. 代码示例周围的描述暗示`log4j.xml`设置正在被记录器拾取。

在我的项目中，如果我不调用`DOMConfigurator.configure`，`log4j.xml`则不会读取该文件。是否有关于何时会在调用`log4j.xml`文件时找到文件的约定，并且不需要`getLogger`显式加载文件？`DOMConfigurator.configure`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:26:05.390

如果 log4j.xml 不在类路径的根目录下怎么办？这就是约定。如果它在当前类加载器的类路径的根目录下，你不需要做任何事情

有关一些信息，请参见[此处](https://stackoverflow.com/questions/2772466/where-to-place-log4j-xml)。另外，尝试使用 -Dlog4.debug 运行 java （[如此处所述）](http://jaitechwriteups.blogspot.com/2006/07/know-how-log4j-tries-to-configure.html)

# iphone - UIScrollView 作为 UIViewController 的视图并设置背景图片

> ID：10941927
> 
> 赞同：0
> 
> 时间：2012-06-08T01:13:27.427
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UIScrollView 的子类，我已将其设置为我的 UIViewController 的视图。我想要一个全屏背景图像，当我滚动整个 UIScrollView 时，我总是可以看到它。我怎样才能做到这一点？请不要告诉我在 UIImageView 前面有 UIScrollView。试图找到替代方案。现在我有一个 UIImageView 作为 UIScrollView 的子视图，但是当我向下滚动到底部时，图像不再显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:06:48.923

您可以通过以下方式创建层次结构以节省额外的视图。

*   视图控制器

    *   视图（图像视图）

        *   滚动视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:44:06.560

在 ViewController 的 UIView 中放置两个视图。第一个是带有您想要的背景图像的 UIImageView，第二个是 UIScrollView（具有清晰的背景颜色，因此您可以通过滚动视图看到 UIImageView 的内容（即背景图像））。在故事板或 IB 中，它的结构如下：

*   视图控制器
    *   看法
        *   图像视图
        *   滚动视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:47:27.873

将您的 UIScrollView 从作为控制器的主视图中删除。

相反，使用 UIView 并将 imageView 添加到视图的顶部，并在其上方添加滚动视图。您的布局应如下所示：

*   UIViewController
    *   根视图
        *   图像视图
        *   滚动视图

现在您的视图已正确分层以保持图像静态和其上方的滚动视图

希望这可以帮助 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T03:39:10.730

覆盖 UIScrollView 子类中的布局子视图：

```
- (void)layoutSubviews
{
    CGRect frame = self.imageView.frame;
    frame.origin.y = self.contentOffset.y;
    self.imageView.frame = frame;
} 
```

如果需要，也可以对 x 进行调整。

# c++ - 模板类的专门方法？

> ID：10941930
> 
> 赞同：1
> 
> 时间：2012-06-08T01:14:07.180
> 
> 标签：c++, templates

我正在编写一个矩阵模板类，它可以支持行和列主要存储。理想情况下，我只想专门研究受存储格式影响的方法。但是，当我尝试专门化一种方法时（如下所示），我只得到错误消息。

```
enum MatrixStorage
{
    ColumnMajor,
    RowMajor
};

template< typename T,
          unsigned rows, 
          unsigned columns, 
          MatrixStorage storage = ColumnMajor >
class Matrix
{
    public:

    T & operator () ( unsigned const & row, unsigned const & column );

};

template< typename T,
          unsigned rows,
          unsigned columns >
T & Matrix< T, rows, columns, ColumnMajor >::
operator () ( unsigned const & row, unsigned const & column )
{
    return elements[ ( row + ( rows * column ) ) % ( rows * columns ) ];
}

template< typename T,
          unsigned rows,
          unsigned columns >
T & Matrix< T, rows, columns, RowMajor >::
operator () ( unsigned const & row, unsigned const & column )
{
    return elements[ ( ( row * columns ) + column ) % ( rows * columns ) ];
} 
```

错误输出：

```
error C3860: template argument list following class template name must list parameters in the order used in template parameter list
error C2976: 'maths::Matrix<T,rows,columns,storage>' : too few template arguments
error C3860: template argument list following class template name must list parameters in the order used in template parameter list 
```

按照其他[问题](https://stackoverflow.com/questions/9330561/if-i-want-to-specialise-just-one-method-in-a-template-how-do-i-do-it "例子")中给出的示例，看起来语法是正确的。尽管如此，我可以让它工作的唯一方法是专门化类本身（如下所示），但这意味着复制所有不依赖于存储格式的方法。

```
enum MatrixStorage
{
    ColumnMajor,
    RowMajor
};

template< typename T,
          unsigned rows,
          unsigned columns,
          MatrixStorage storage = ColumnMajor >
class Matrix;

template< typename T,
          unsigned rows,
          unsigned columns >
class Matrix< T, rows, columns, ColumnMajor >
{
    T & operator () ( unsigned const & row, unsigned const & column );
};

template< typename T,
          unsigned rows,
          unsigned columns >
class Matrix< T, rows, columns, RowMajor >
{
    T & operator () ( unsigned const & row, unsigned const & column );
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:33:42.893

您不能部分专门化函数模板，其中包括模板的成员函数。另一种方法是创建一个提供所需功能的模板帮助器类，然后将调用从模板的成员函数转发到类模板。

或者，由于您的用例非常简单，您可以编写一个辅助函数（模板与否，不需要它是一个完整的类），它将在给定坐标和模式的情况下为您提供数组中的索引。

```
template <MatrixStorage m>
int index_of( int row, int col, int rows, int columns ) {
    return ( row + ( rows * column ) ) % ( rows * columns );
}
template <>
int index_of<RowMajor>( int row, int col, int rows, int columns ) {
    return ( ( row * columns ) + column ) % ( rows * columns );
} 
```

`MatrixStorage`您可以通过采用将在运行时检查的额外类型参数使其成为非模板（简单`if`）

# php - RedBean Php PDOException

> ID：10941931
> 
> 赞同：0
> 
> 时间：2012-06-08T01:14:08.417
> 
> 标签：php, mysql, redbean

我有一个收到错误的客户：

**致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'XXX.XXX.XXX.XXX' (4)' in /htdocs/library/rb.php:65**

这里真正奇怪的是它不一致......我什至无法重现错误。显然，点击刷新总是会毫无问题地打开请求的页面。

这可能是什么原因造成的？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:18:57.787

我建议你看看mysql数据库，users表。看起来问题是特定于尝试访问服务器的主机。

数据库用户有以下 3 个字段，用户名、密码和主机。确保尝试进行身份验证的用户的主机与尝试连接的机器的 IP 匹配，或者将其设置为通配符 %。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-03T19:52:42.470

问题是 Windows 服务器没有安装 PDO mysql 驱动程序。

# javascript - 更改元素 ID onmouseover/onmouseout 类中的任何元素

> ID：10941950
> 
> 赞同：0
> 
> 时间：2012-06-08T01:17:35.533
> 
> 标签：javascript, html, css, javascript-events, dom

当我将鼠标悬停在特定类中的不同元素上时，我需要更改元素的 id。然后，我想将元素 id 从我之前鼠标悬停的相同元素更改回原来在 mouseout 上的内容。

在下面的代码中，我提出了一个基本的 HTML 代码来澄清我的问题。我希望更改`<div id="Set1">`为`<div id="Set2">`任何`<div class="tomouseover">`. Onmouseout 从同一个元素我希望将原始元素的 id 更改回`<div id="Set1">`.

```
<div id="Set1">Div to change id</div>
<div class="tomouseover">Mouse over to change Set1 to Set2</div>
<div class="tomouseover">Mouse over to change Set1 to Set2</div> 
```

+1 任何想法！我被皇家卡住了...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:28:49.110

纯 JavaScript：（归功于 Nathan 的回答）

```
var ele = document.querySelectorAll(".tomouseover");
for(var i=0; i < ele.length; i++){
    ele[i].addEventListener("mouseover", function(){
        document.querySelector("#Set1").setAttribute("id", "Set2");
    });
    ele[i].addEventListener("mouseout", function(){
        document.querySelector("#Set2").setAttribute("id", "Set1");
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:25:04.590

如果你可以使用[jQuery](http://jquery.com/) ，这里有一个代码，当鼠标移过时将 id 更改`#Set1`为鼠标移出时更改回：`#Set2``.tomouseover``#Set1`

```
$('.tomouseover').mouseover(function() {
    $('#Set1').attr('id','Set2');
}).mouseout(function() {
    $('#Set2').attr('id','Set1');
});​ 
```

jsFiddle 示例：http: [//jsfiddle.net/XNu5H/](http://jsfiddle.net/XNu5H/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T02:54:25.137

您可以尝试 Derek 的回答，但您很快就会发现IE8 在 quirks 模式或 IE 7 及更低版本中不支持*querySelector ，并且 IE 8 及更低版本根本不支持**addEventListener*。

纯 js 的选择包括编写自己的*getElementsByClassname*函数（不是特别困难）或使用事件委托，以便为每个事件仅附加一个侦听器，并且需要一个简单的*hasClass*函数。

无论如何，这里有一个例子：

任何 javscripter 都应该在库中拥有或能够在几分钟内编写代码的一些标准库函数：

```
// Minimalist addEvent function, ok for the current web
function addEvent(el, fn, evt) {
  if (el.addEventListener) {
    el.addEventListener(evt, fn, false) 
  } else if (el.attachEvent) {
    el.attachEvent('on' + evt, fn);
  } 
}

// Returns true or false depending on whether element el has class classname
function hasClassname(el, classname) {
  var re = new RegExp('(^|\\s)' + classname + '(\\s|$)');
  return re.test(el.className); 
} 
```

完成这项工作的功能：

```
// Toggle the id. Note that this deals with the case where
// the element to toggle isn't found to prevent errors being thrown
function toggleId(e) {
  e = e || window.event;
  var el = e.target || e.srcElement;
  var o;

  if (hasClassname(el, 'tomouseover')) {

    if (e.type == 'mouseover') {
      o = document.getElementById('set1');

      if (o) o.id = 'set2';

    } else if (e.type == 'mouseout') {
      o = document.getElementById('set2');

      if (o) o.id = 'set1';
    }
  }
}

// Attach the listener onload, could also add from a bottom
// script or inline. If inline, use `toggleId(event)`
window.onload = function() {
  addEvent(document.body, toggleId, 'mouseover');
  addEvent(document.body, toggleId, 'mouseout');
} 
```

以上将适用于所有浏览器回到 IE6 和 NN 3 左右，并将继续适用于 W3C 或 IE 事件模型的未来浏览器。

# jquery-ui-datepicker - 同一页面上的 JQuery-UI 月/年选择器和完整日历选择器

> ID：10941951
> 
> 赞同：1
> 
> 时间：2012-06-08T01:17:51.420
> 
> 标签：jquery-ui-datepicker

我想在具有多个实例的页面上使用 jQuery-UI，其中一些实例使用标准的完整日历格式，而其他实例使用没有日历的月/年。

月/年来自较早的堆栈：[jQuery UI DatePicker to show month year only](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)

```
<style type="text/css">
.calendar-off table.ui-datepicker-calendar {display:none !important;}
</style>

<script type="text/javascript">
$(document).ready(function() {
  $('#monthyearpicker1').datepicker( {
    changeMonth: true,
    changeYear: true,
    showButtonPanel: true,
    dateFormat: 'MM yy',
    beforeShow: function(input, inst) {
      $(inst.dpDiv).addClass('calendar-off');     
    },
    onClose: function(dateText, inst) { 
      var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
      var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
      $(this).datepicker('setDate', new Date(year, month, 1));
    }
});
$( "#datepicker1" ).datepicker({
    changeMonth: true,
    changeYear: true,
    dateFormat: 'yy-mm-dd'
  });
});
</script>

<label>Month Year Picker: </label>
<input type="text" id="monthyearpicker1" class="monthyearpicker"><br /><br />

<label>Date Picker: </label>
<input type="text" id="datepicker1" class="datepicker"> 
```

我不希望日历显示在月/年选择器（.monthyearpicker）中，这就是我得到的行为。但是，我确实希望它显示在完整的日期选择器（.datepicker）中，而不显示。monthyearpicker 的 beforeShow 中的 addClass 似乎通过删除它的显示“渗透”到完整的 datepicker 中。我如何得到我的蛋糕并吃掉它？

请注意，我更喜欢使用类而不是 ID 来区分 datepicker 和 monthyearpicker，因为我将在一个页面上有多个实例。

非常感谢，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:25:38.637

您可以添加`beforeShow`以删除`calendar-off`类：

```
$( "#datepicker1" ).datepicker({
    changeMonth: true,
    changeYear: true,
    dateFormat: 'yy-mm-dd',
    beforeShow: function(input, inst) {
      $(inst.dpDiv).removeClass('calendar-off');     
}
  });
}); 
```

[JSFIDDLE 示例](http://jsfiddle.net/flynfish/ueLhH/)

# python - 自定义排列python？

> ID：10941952
> 
> 赞同：0
> 
> 时间：2012-06-08T01:18:03.847
> 
> 标签：python, dictionary

鉴于这本词典

```
dictt={2:'abc',3:'def',4:'gfi',5:'jkl',6:'mno',7:'pqrs',8:'tuv',9:'wxyz'} 
```

我需要做一个自定义排列。

输入中的数字将告诉您输出将持续多长时间。

输入还将指向正在排列的字母。

例如。“34”将使程序返回第一个序列的第一个字母，并将第二个序列的所有3个字母一个接一个地相加。a+d=ad a+e=ae a+d=af 那么它将取第一个序列的第二个字母并添加第二个序列的所有 3 个字母 b+d=bd b+e=be b+f=bf然后第三个字母 c+d=cd c+e=ce c+f=cf 所以当你输入 34 时，如果输入是 3 个数字，它将返回 ad ae af bd be bf cd ce cf。那么输出将是 3 对。如果输入是一个数字。那么输出将只是列出的相应序列。`ex: "2" would return a b c`

```
def permuteString(numString):
    array=[]
    original={2:'abc',3:'def',4:'gfi',5:'jkl',6:'mno',7:'pqrs',8:'tuv',9:'wxyz'}
    for a,b in original.iteritems():
        print a,b
        for c in b:
            print c

    return array

stuff=permuteString("234") 
```

到目前为止，我所做的只是把字典拿出来

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T16:22:00.443

写成生成器类：

```
import itertools

class PhoneWords(object):
    letters = {
        2: 'abc',
        3: 'def',
        4: 'ghi',
        5: 'jkl',
        6: 'mno',
        7: 'pqrs',
        8: 'tuv',
        9: 'wxyz'
    }

    def __init__(self, num_string):
        self.num = [int(i) for i in num_string]                 # => [3, 4]
        self.chars = [PhoneWords.letters[i] for i in self.num]  # -> ['def', 'ghi']

    def __iter__(self):
        return (''.join(letters) for letters in itertools.product(*self.chars)) 
```

并在使用中：

```
for word in PhoneWords("34"):
    print word 
```

返回

```
dg
dh
di
eg
eh
ei
fg
fh
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:23:02.500

我想这是你想要的：

```
>>>from itertools import product
>>>def permuteString(numString):
>>>    original = {2:'abc',3:'def',4:'gfi',5:'jkl',6:'mno',7:'pqrs',8:'tuv',9:'wxyz'}
>>>    #extract the wanted string, for example input numString='23', the pools is ['abc', 'def']
>>>    pools = [original[int(n)] for n in numString]                                                 
>>>    return (''.join(x) for x in product(*pools)) #return a generator 
```

并以此方式使用

```
>>>for x in permuteString('23'):
>>>    print x
ad
ae
af
bd
be
bf
cd
ce
cf 
```

细节：

**product** :[输入迭代的笛卡尔积](http://docs.python.org/library/itertools.html#itertools.product)

**生成器**：[用于创建迭代器的简单而强大的工具](http://docs.python.org/tutorial/classes.html#generators)

**join** : 是可以加入列表的，例如：

```
x = ['a', 'b', 'c', 'd']
print ''.join(x) 
```

这将输出：

```
'abcd' 
```

# objective-c - 以 00:00:00 时钟格式将 NSTimeInterval 转换为 NSString

> ID：10941957
> 
> 赞同：2
> 
> 时间：2012-06-08T01:20:31.797
> 
> 标签：objective-c, cocoa, time, nsstring, nstimeinterval

手头的任务非常简单——将 NSTimeInterval 转换为 NSString，看起来像 12:34:56（12 小时 34 分 56 秒）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T02:27:05.933

这是@golegka 答案的更快版本：

```
NSString *stringFromInterval(NSTimeInterval timeInterval)
{
#define SECONDS_PER_MINUTE (60)
#define MINUTES_PER_HOUR (60)
#define SECONDS_PER_HOUR (SECONDS_PER_MINUTE * MINUTES_PER_HOUR)
#define HOURS_PER_DAY (24)

    // convert the time to an integer, as we don't need double precision, and we do need to use the modulous operator
    int ti = round(timeInterval);

    return [NSString stringWithFormat:@"%.2d:%.2d:%.2d", (ti / SECONDS_PER_HOUR) % HOURS_PER_DAY, (ti / SECONDS_PER_MINUTE) % MINUTES_PER_HOUR, ti % SECONDS_PER_MINUTE];

#undef SECONDS_PER_MINUTE 
#undef MINUTES_PER_HOUR
#undef SECONDS_PER_HOUR
#undef HOURS_PER_DAY
} 
```

这不会弄乱`NSCalendars`，它只是使用直接整数数学。

# model - unity3d 模型在游戏中上升

> ID：10941964
> 
> 赞同：0
> 
> 时间：2012-06-08T01:21:42.503
> 
> 标签：model, unity3d, motion

（我知道我的选题记录很差，但从现在开始我一定会选一个好的答案。）

unity3d问题：

我的地形和汽车都有使用重力的刚体。

当我推动游戏时，看起来风景/岛屿消失了，或者汽车上升了。由于当汽车上升时变换 y 坐标会发生变化，所以我假设它是正在飞走的汽车。它应该留在水泥地上。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:38:50.383

你的地面不应该有刚体，这将导致它开始穿过世界空间和你的汽车。您是否尝试过在地面上放置一个对撞机？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T19:43:06.577

地形不应具有刚体或启用重力。它会下落，直到它用对撞机撞到其他东西（并且地形下方可能没有任何东西）。移除地形上的刚体，然后评估其他问题。

# c - c99 __restrict 和编译器优化

> ID：10941965
> 
> 赞同：6
> 
> 时间：2012-06-08T01:21:46.463
> 
> 标签：c, optimization, compiler-construction, c99, restrict-qualifier

```
typedef struct {
    void * field1;
} s1;

void func1(void) {
    s1 my_s1;
    s1 * __restrict my_s1_ptr = &my_s1;
    *((int*)((char*)my_s1_ptr->field1 + 4))  = 0;
    *((int*)((char*)my_s1_ptr->field1 + 8))  = 1;
    *((int*)((char*)my_s1_ptr->field1 + 12)) = 2;
    *((int*)((char*)my_s1_ptr->field1 + 16)) = 3;
} 
```

对于 Intel 编译器 11.1 版和 gcc 4.6 版，编译器似乎为最后 4 个语句中的每一个重新加载 my_s1_ptr->field1。我对 __restrict 的理解会告诉我最后 3 个负载应该是多余的并且可以被消除。是的，我知道代码很奇怪，但它的结构是这样的。我只是希望能够让编译器消除冗余负载。知道如何说服它这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T09:00:49.180

`s1 * __restrict`意味着这是指向特定 的唯一指针`s1`，因此该类型没有别名。这并不意味着不会有其他指针类型的别名，例如`void*`,`int*`或`char*`.

使用 a`char*`对编译器来说尤其麻烦，因为 a`char*`特别允许用于访问其他类型的字节。（`char`也表示字节，可用于访问其他类型的底层内存）。

如果编译器不能证明你的赋值永远不会改变指向的东西，它每次都必须重新加载指针。例如，它怎么知道那`void* field1`不是指向它自己呢？

* * *

如果没有所有演员表，这样的事情不会奏效吗？

```
int* p = my_s1.field1;
p[1] = 0;
p[2] = 1;
p[3] = 2;
p[4] = 3; 
```

假设 an`int`是 4 个字节，这`field1`实际上指向一个数组。

# python - Django MYSQL Python Hex 字符导致数据导入错误

> ID：10941970
> 
> 赞同：1
> 
> 时间：2012-06-08T01:22:15.837
> 
> 标签：python, mysql, django

我有许多 Excel 电子表格要使用 Django 处理成 MYSQL。我保存为 CSV 并处理文件。我遇到的问题是字段中有各种十六进制字符。当它们出现时，我开始尝试在 python 中替换它们，但它变得不可行。

例如，一个字段中包含字符“Â”，当我将记录保存到 MYSQL 时，出现以下错误。

警告：不正确的字符串值：第 1 行的列 'description' 的 '\xC2A sim...'

我尝试将 MYSQL 中的字段类型更改为 ucf8_general_ci 但并没有解决问题。

我尝试通过下面的 reformat_content 函数运行我的字符串来玩 unhexlify，但这也没有什么区别。

```
def asciirepl(match):
  # replace the hexadecimal characters with ascii characters
  s = match.group()  
  return binascii.unhexlify(s[2:]) 

def reformat_content(data):
  p = re.compile(r'\\x(\w{2})')
  return p.sub(asciirepl, data) 
```

关于如何在整个十六进制字符范围内解决这个问题的任何想法？

非常感谢

富有的

# java - 如何解决 ColdFusion 9 中的死锁问题：coldfusion.util.AbstractCache$Lock

> ID：10941977
> 
> 赞同：2
> 
> 时间：2012-06-08T01:22:53.577
> 
> 标签：java, compiler-construction, coldfusion, coldfusion-9, jrun

我一直在尝试解决一个问题，即某些脚本的执行会导致死锁，将所有后续请求置于边缘，占用 99.9% 的 CPU，并最终导致服务器崩溃。

下面是一个示例堆栈跟踪，其中一个请求已被置于边缘（永远等待）：

```
Thread Stack Trace
Trace Time: 21:00:44.463 06-Jun-2012
Request ID: 6131
Script Name: http://www.example.com/allreviews.cfm
Started: 21:00:21.225 06-Jun-2012
Exec Time: 23238ms
Memory Used: (24%)230,667KB
Memory Free: 701,428KB
Thread ID: 0x191e (6430)
Thread Name: jrpp-494
Priority: 5
Hashcode: 1081611879
State: WAITING

"jrpp-494" prio=5 in Object.wait()

java.lang.Object.wait(Object.java:???)[Native Method]
- waiting on <0x9253305> (a coldfusion.util.AbstractCache$Lock)
java.lang.Object.wait(Object.java:485)
coldfusion.util.AbstractCache.fetch(AbstractCache.java:46)
coldfusion.util.SoftCache.get_statsOff(SoftCache.java:133)
coldfusion.util.SoftCache.get(SoftCache.java:81)
coldfusion.runtime.TemplateClassLoader.findClass(TemplateClassLoader.java:609)
coldfusion.runtime.RuntimeServiceImpl.getFile(RuntimeServiceImpl.java:785)
coldfusion.runtime.RuntimeServiceImpl.resolveTemplatePath(RuntimeServiceImpl.java:766)
coldfusion.tagext.lang.CustomTag.setName(CustomTag.java:21)
cfApplication2ecfm456206189._factor0(/srv/www/htdocs/www.example.com/www/Application.cfm:28)
cfApplication2ecfm456206189.runPage(/srv/www/htdocs/www.example.com/www/Application.cfm:1)
coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65)
coldfusion.filter.CfincludeFilter.include(CfincludeFilter.java:33)
coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:279)
coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
coldfusion.filter.PathFilter.invoke(PathFilter.java:94)
coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
coldfusion.CfmServlet.service(CfmServlet.java:200)
coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doHttpServletRequest(FusionReactorCoreFilter.java:503)
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFusionRequest(FusionReactorCoreFilter.java:337)
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFilter(FusionReactorCoreFilter.java:246)
com.intergral.fusionreactor.filter.FusionReactorFilter.doFilter(FusionReactorFilter.java:121)
jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
jrun.servlet.FilterChain.service(FilterChain.java:101)
jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

如果你有兴趣，你可以看到[完整的堆栈跟踪](https://gist.github.com/2884737)，顶部有我称之为“锁定脚本”的东西，所有其他人都在等待它。

当我第一次遇到这个问题时，我没有堆栈跟踪。我发布了一个问题，“[当 ColdFusion 使 CPU 最大化时，我如何找出它正在咀嚼/窒息的东西？](https://stackoverflow.com/questions/10902098/when-coldfusion-is-maxing-out-the-cpu-how-do-i-find-out-what-its-chewing-choki) ”。我收到了许多有用的回复，通过查看[堆栈跟踪](https://gist.github.com/2884737)，我能够确定是相同的三个脚本一遍又一遍地导致了这个死锁问题。

在每种情况下，“锁定脚本”的第一行都是：

```
coldfusion.compiler.ClassReader.skipFully(ClassReader.java:79) 
```

并且**所有**其他请求都被阻塞在其各自的堆栈跟踪中具有以下行：

```
- waiting on <0x9253305> (a coldfusion.util.AbstractCache$Lock) 
```

困扰我的一件事是[为什么我的请求超时没有得到尊重](https://stackoverflow.com/questions/10508534/why-doesnt-a-request-with-an-infinite-loop-get-killed-by-coldfusion-request-tim/10517019#10517019)；这些脚本将永远挂起，永不消亡。WTF，对吧？所以我不得不自己做。因此，当我杀死“锁定脚本”时，其他人就摆脱了困境。那时，如果它们低于请求超时，它们就会完成处理，如果它们超过它（大多数情况下通常都是这样），那么它们就会继续超时。但是它们不会自行超时，并且请求只会堆积起来，直到使用活动线程并且线程队列已满并且一切都停止了。

每次请求时手动杀死它们显然不是解决方案，所以，正如我妻子总是提醒我的那样，“调试，调试，调试”。使用条件`<cfabort>`，我逐步完成，发现它一直通过 Application.cfm，通过我的 header.cfm，直到`<cfinclude>`问题脚本。如果我把问题脚本放在`<cfabort>` *里面*（即使在最上面），它**不会中止**并且会发生死锁问题。如果我将它放在包含之前，请求**将中止**并且将避免死锁问题。奇怪。

这两个地方之间没有代码，对吧？就在包含之前和就在包含内部应该在功能上是等效的，不是吗？可能不会，因为很明显那里正在发生*一些事情*。

我没有使用任何`<cflock>`标签。正在发生的锁定似乎是在模板缓存级别发生的。无论是否在管理员中检查了“受信任的缓存”、“请求中的缓存模板”或“组件缓存”选项（以选中/未选中的任意组合），都会观察到相同的行为。我已经清除了模板缓存和组件缓存不止一次。我一遍又一遍地重新启动CF服务器......一切都无济于事。

在故障排除过程中，我阅读了这篇[文章，描述了 CF8 (8.0.1) 中编译器缓存锁定的类似问题，](http://helpx.adobe.com/coldfusion/kb/deadlock-caused-compiler-cache-lock.html)以及应用补丁修复它的说明。但这不是 CF9 ......所以显然我不能应用他们的补丁。

该怎么办？有没有其他人遇到过这个问题？...并有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:34:26.317

事实证明，有时类文件已损坏，需要重新生成。当您遇到此问题时，它会如前所述，在尝试加载损坏的类文件时出现死锁。重新生成类文件的步骤很简单，如下所示：

1.  转至 ColdFusion 管理员 > 服务器设置 > 缓存

2.  *取消选中*以下选项：

    **[ ] 保存类文件** 当您选择此选项时，ColdFusion 生成的类文件将保存到磁盘，以便在服务器重新启动后重新使用。Adobe 建议将此用于生产系统。在开发过程中，Adobe 建议您不要选择此选项。

3.  单击 [提交更改] 按钮

4.  重新启动 ColdFusion 服务器

5.  转至 ColdFusion 管理员 > 服务器设置 > 缓存

6.  *勾选*以下选项：

    **[x] 保存类文件** 当您选择此选项时，ColdFusion 生成的类文件将保存到磁盘，以便在服务器重新启动后重新使用。Adobe 建议将此用于生产系统。在开发过程中，Adobe 建议您不要选择此选项。

7.  单击 [提交更改] 按钮

8.  你完成了！问题完全消失了，一切又回到了应有的样子。;-)

类文件为什么以及如何损坏？我不知道。也许这可能是另一个问题的主题。我所知道的是，这解决了问题。我通常不愿接受我自己的权威答案，因此，如果其他人对此问题及其解决方案有更好的解释，请随时发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:42:34.980

作为一种解决方法，您可以尝试通过将“缓存模板的最大数量”设置为 0 来完全禁用模板缓存。对于生产来说并不理想......但可能比崩溃更好......

# haskell - 具有定义的键顺序的字典类型

> ID：10941980
> 
> 赞同：8
> 
> 时间：2012-06-08T01:23:00.717
> 
> 标签：haskell

我想使用一种行为类似于`[(a,b)]`用作字典的简单对列表的类型，将 type 的键映射到 type`a`的值`b`，同时保持“用户指定的”、定义的键顺序。（即就像普通列表一样 - 我希望能够“附加”一个项目，然后将其识别为“最后一个元素”。）但是我希望随机访问查找具有优于线性性能的键，即`Data.Map`提供什么. 一种选择是除了定义其顺序的键列表之外仅维护一个普通映射：

```
data OrderedDict a b = OrderedDict (Map a b) [a] 
```

然后定义`append`使两个密钥集合保持同步的操作等。维护相同键的两个单独集合似乎很难看。是否有现成的数据类型已经将有序键与高效的随机访问键查找相结合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:05:19.357

看看`ixset`库 - 它允许您维护由多个列索引的集合（在您的情况下是按`a`和按`Int`）。这比手动保持地图一致更易于维护

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T06:50:30.893

除非我完全误解了您的问题，否则 Data.Map 正是这样做的，它使用键类型的`Ord`实例进行排序。由于它是二叉树，因此实现也保持键的顺序。

`Data.Map.keys`按升序为您提供地图的键；由于 Map 的转换（例如 ）`map`是纯函数式的，因此遍历的顺序是无关紧要的，并且从 Map 中获取一系列键或键/值对的所有方法都会为您提供一个有序列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T07:29:02.557

如果除了 O(log n) 查找/插入之外，您只想保留一些*固定*顺序（例如插入时间），您可以简单地使用多个映射并同时更新它们：

1.  `Map a b`用于存储实际数据，以及
2.  `Map Int a`这为您提供了顺序中的第 i 个键。（如果您还需要查询给定键的索引，您可以添加一个`Map a Int`）

# scala - 使用字符串轻松引用 Scala 类？

> ID：10941982
> 
> 赞同：1
> 
> 时间：2012-06-08T01:23:04.307
> 
> 标签：scala

我有一个相对简单的对象，它有一个发出 HTTP 请求的方法。请求根据类类型自动提取数据并吐出必要的对象。

问题是我似乎无法动态引用该类。编码：

```
object abstractObject extends APIResource {

  def retrieve(clazz: String, key: String) = { 
    request("GET", instanceURL(key)).extract[clazz]
  }

} 
```

`clazz`定义要传递的类型，`extract`允许请求将 JSON 哈希即时解析为对象。我需要以某种方式使用该 String 来动态引用类类型并将其传递给`extract`.

有什么想法或者我需要重新设计它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:18:00.613

类型仅在编译时存在，因此您不能从运行时值转换为类型。好吧，您可以使用 Scala 2.10 的反射，它基本上会在运行时生成您需要的代码，然后执行。您需要将编译器和反射 jar 文件与应用程序捆绑在一起。

但是，对于您的提议，这些都不应该是必需的。一个`Class`or`Manifest`对象就足够了——当然，您使用的 API 可能没有提供这样的替代方案。

# ruby-on-rails - Vbox 和 Rails 上的 Ubuntu——“请安装倾斜 1.3.3”

> ID：10941984
> 
> 赞同：0
> 
> 时间：2012-06-08T01:23:25.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ubuntu, rubygems

我不知道为什么我在我的 VBox 上安装的 Ubuntu 仍然咳出著名的错误消息“请安装倾斜 1.3.3，因为你没有它，你不能使用 -rails server-”这真的很奇怪我因为我已经在 Mint 中遇到了这个错误并且没有出路，我以为 Ubuntu 可以解决它，但现在我又被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:58:02.237

从历史上看，我自己在部署到 ubuntu 时遇到了麻烦，我想知道通过 apt-get 而不是 RVM 安装 ruby​​ 是否有特殊原因？

如果没有，您是否尝试过基于 RVM 的 ruby​​ 安装，是否收到相同的错误消息： [https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

[如果您决定在 Ubuntu 12.04 http://bit.ly/ISzOB2](http://bit.ly/ISzOB2)上采用 RVM 路线，您可能需要考虑一些额外的细节

# grails - 如何在 Grails 的 REST Web 服务中创建 Json？

> ID：10941985
> 
> 赞同：0
> 
> 时间：2012-06-08T01:24:01.717
> 
> 标签：grails

我创建了两个域，作者和书，作者有很多书，书是属于作者的。

```
class Author {
     hasMany = [ books : Book ]
     String name
}

class Book {
    String title
    Author author
} 
```

BookController.groovy 中的这个“保存书”功能

```
 def savebook={

        def json = request.JSON
        def bookInstance = new Book()
        bookInstance.properties = json

        bookInstance.author_id = json.author_id
        bookInstance.title = json.title         

        if (bookInstance.validate()) {
            bookInstance.save();
            def rep = [ respence: "1" ] // save
            render rep as JSON
        }

        else {
            def rep = [ respence: "0" ] // not save
            render rep as JSON
        }

    } 
```

我还没有找到该行的解决方案：`bookInstance.author_id = json.author_id`在“savebook”中创建作者的书。
我的第二个问题是 JSON 对象的结构应该如何进行 REST POST ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:37:02.210

对于您问题的第一部分，您需要通过他们的 id 查找作者并将该实例分配给 Book 中的 author 变量：

```
def author = Author.get(json.author_id)
bookInstance.author = author
bookInstance.title = json.title
author.addToBooks(bookInstance) 
```

进入 rest 方法的 JSON 的结构可以是任何有效的 JSON。你可以简单地做

```
{
    "author_id": 12345,
    "title" : "See Jane Run"
} 
```

或者您可以根据需要变得复杂。

# javascript - 结合要与主干 js 一起使用的模板

> ID：10941988
> 
> 赞同：0
> 
> 时间：2012-06-08T01:24:59.877
> 
> 标签：javascript, model-view-controller, backbone.js, ejs

我开始使用主干 js，我有兴趣将我的 Web 应用程序各个部分的所有模板组合到一个文件中，然后缓存它。我正在寻找用于模板引擎的 _underscore 和 EJS。有人对此有经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:55:04.797

一种选择是使用[RequireJS](http://requirejs.org/)，它包括一个用于模板的[“文本”插件。](http://requirejs.org/docs/api.html#text)

然后，您可以使用[r.js 优化器](http://requirejs.org/docs/optimization.html)将所有这些（加上 JS 模块，如果您走那条路线）组合到一个文件中。

优化器可以作为构建过程的一部分运行，如果您使用的是 node.js，也可以在进程内运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T05:16:28.577

与 stusmith 的建议类似，您可以使用[StealJS](http://javascriptmvc.com/docs.html#!stealjs)编译 EJS 模板（或任何 js 文件）。

在您的应用程序文件中，您可以设置依赖项，例如您的模板和其他资源：

```
steal('jquery', 'template_a.ejs', 'template_b.ejs', function() {

  //some app code

}); 
```

然后，您可以使用窃取构建工具将所有依赖项组合成一个或多个缩小的连接文件。

# linux - (standard_in) 1: 解析错误

> ID：10941991
> 
> 赞同：3
> 
> 时间：2012-06-08T01:25:14.590
> 
> 标签：linux, bash, shell

我正在编写一个快速脚本，用于从 /proc/net/dev 提取的数据中计算单个接口吞吐量，但我遇到了问题。它将它从字节转换为兆位。

这适用于我的 ubuntu 服务器（3.2.0 内核），但是当我尝试在旧设备（2.6.18 时代）上运行它时，它不起作用。我不确定我做错了什么。

这是我的代码片段：

```
int1_byte_rx=`cat $logfile | grep $int1 | awk '{print $2}' | awk '{sum+=$1} END {print sum}'`
int1_byte_tx=`cat $logfile | grep $int1 | awk '{print $10}' | awk '{sum+=$1} END {print sum}'`
int1_rx_thrpt=$(echo "($int1_byte_rx * 0.00000762939453) / $iterations / ($time * 60)" | bc -l)
int1_tx_thrpt=$(echo "($int1_byte_tx * 0.00000762939453) / $iterations / ($time * 60)" | bc -l) 
```

当我运行它时，我收到以下错误（来自调试模式）：

```
int1_rx_thrpt=$(echo "($int1_byte_rx * 0.00000762939453) / $iterations / ($time * 60)" | bc -l)
echo "($int1_byte_rx * 0.00000762939453) / $iterations / ($time * 60)" | bc -l
++ echo '(1.13417e+10 * 0.00000762939453) / 57 / (5 * 60)'
++ bc -l
(standard_in) 1: parse error
(standard_in) 1: parse error
+ int1_rx_thrpt=
int1_tx_thrpt=$(echo "($int1_byte_tx * 0.00000762939453) / $iterations / ($time * 60)" | bc -l)
echo "($int1_byte_tx * 0.00000762939453) / $iterations / ($time * 60)" | bc -l
++ echo '(9.78048e+09 * 0.00000762939453) / 57 / (5 * 60)'
++ bc -l
(standard_in) 1: parse error
(standard_in) 1: parse error 
```

我已经能够将问题追溯到 bc 本身，但是我实际上不确定如何纠正它。

欢迎任何建议。

谢谢你的时间，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T01:55:34.160

您不需要那些长管道，也不需要使用`bc`.

```
int1_byte_rx=$(awk -v int="$int1" '$0 ~ int {sum += $2} END {print sum}' "$logfile")
int1_byte_tx=$(awk -v int="$int1" '$0 ~ int {sum += $10} END {print sum}' "$logfile")
int1_rx_thrpt=$(awk -v int1_byte_rx="$int1_byte_rx" -v iter="$iterations" -v time="$time" 'BEGIN {printf "%12.2f", (int1_byte_rx * 0.00000762939453) / iter / (time * 60)}')
int1_tx_thrpt=$(awk -v int1_byte_tx="$int1_byte_tx" -v iter="$iterations" -v time="$time" 'BEGIN {printf "%12.2f", (int1_byte_tx * 0.00000762939453) / iter / (time * 60)}') 
```

您可以像这样组合前两行：

```
read -r int1_byte_rx int1_byte_tx <<< $(awk -v int="$int1" '$0 ~ int {sumrx += $2; sumtx+= $10} END {print sumrx, sumtx}' "$logfile") 
```

你只需要阅读一次日志文件。

另一种选择是用 AWK 或另一种支持浮点运算的语言（如 Python 或 Perl）编写整个脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:39:25.423

我`/proc/net/dev`没有足够大的值来强制`awk`以科学计数法打印任何输出，所以我不能*轻易*测试这个，但这是我建议的修复：

```
int1_byte_rx=`cat $logfile | grep $int1 | awk '{print $2}' | awk '{sum+=$1} END {printf "%f", sum}'`
int1_byte_tx=`cat $logfile | grep $int1 | awk '{print $10}' | awk '{sum+=$1} END {printf "%f", sum}'` 
```

（注意`printf "%f",`接近结尾的部分。）

诀窍是首先防止`awk`生成科学格式。

# javascript - 使用 jQuery 复制段落文本

> ID：10941992
> 
> 赞同：0
> 
> 时间：2012-06-08T01:25:19.917
> 
> 标签：javascript, jquery

我有一个需要动态复制的段落。我如何在 jQuery 中做到这一点？这是示例代码：

```
<p class="info">Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p> 
```

该段落需要复制到页面的另一部分，如下所示：

```
<p id=print-info> jQuery inserted paragraph text </p> 
```

我曾想过使用该`.attr()`方法，但不确定如何对段落文本执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:32:20.550

使用这条线，如[this fiddle所示](http://jsfiddle.net/NTEmR/)

```
$('#print-info').html($('.info:first').html());​ 
```

# c# - 添加 subReport 运行时 DevExpress

> ID：10941995
> 
> 赞同：0
> 
> 时间：2012-06-08T01:25:26.197
> 
> 标签：c#, devexpress, report, subreport

我需要你的帮助 。我想在表运行时添加子报表。代码是：

```
xrTableCell14.Controls.Add(xrSubreport5);
        xrSubreport5.BringToFront();
        xrSubreport5.Location = new Point(0, 0); 
```

但它无法显示结果。我正在使用 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:40:07.370

很抱歉让您失望了，但实际的 XtraReports 实现并没有提供实现这种场景的能力。

请参阅 DevExpress 上的此论坛帖子，其中有多个人要求该功能，但仍未实现！

[http://community.devexpress.com//forums/p/55360/186621.aspx#186621](http://community.devexpress.com//forums/p/55360/186621.aspx#186621)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:33:19.733

谢谢维杰。我解决了那个问题。代码 ：

```
 sub_Rpt_Education_RPT Education = new sub_Rpt_Education_RPT();
        Education.DataSource = _dt;
        Education.DataMember = "dtEducation";
        xrSubEducation.ReportSource = Education;
        xrTableRow12.Height = Education.RowCount * 23; 
```

# python - 比较嵌套在列表中的相似项目，并删除它们

> ID：10941998
> 
> 赞同：0
> 
> 时间：2012-06-08T01:26:16.867
> 
> 标签：python, list, list-comprehension, maya

我正在尝试查找关系中的重复项并从我的列表中省略它们。我已经尝试过嵌套 if 语句，但我还没有得到正确的解决方案。

```
list = [[u'polySurface5.e[4]', u'polySurface5.e[1]', .5], [u'polySurface5.e[8]', u'polySurface5.e[2]', .9], [u'polySurface5.e[1]', u'polySurface5.e[4]', .5], [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2], [u'polySurface5.e[2]', u'polySurface5.e[2]', 0] ] 
```

在下面的列表中，我想删除“双打”，以及最后一项为 0 的值。我想得到这样的结果：

```
newlist = [[u'polySurface5.e[4]', u'polySurface5.e[1]', .5], [u'polySurface5.e[8]', u'polySurface5.e[2]', .9], [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2] ] 
```

我可以通过哪种方式比较 [u'polySurface5.e[4]', u'polySurface5.e[1]', .5] 和 [u'polySurface5.e[1]', u'polySurface5.e[4] ', .5] 并删除第一个之后的任何事件？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:54:33.733

```
my_list = [[u'polySurface5.e[4]', u'polySurface5.e[1]', .5], [u'polySurface5.e[8]', u'polySurface5.e[2]', .9], [u'polySurface5.e[1]', u'polySurface5.e[4]', .5], [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2], [u'polySurface5.e[2]', u'polySurface5.e[2]', 0] ]

new_list = []
my_set = set()
for sublist in my_list:
    if sublist[2] != 0:
        frozen_sub = frozenset(sublist)
        if not frozen_sub in my_set:
            new_list.append(sublist)
            my_set.add(frozen_sub) 
```

结果：

```
>>> new_list
[[u'polySurface5.e[4]', u'polySurface5.e[1]', 0.5], [u'polySurface5.e[8]', u'polySurface5.e[2]', 0.9], [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2]] 
```

请注意，我将原始列表的名称更改`list`为`my_list`. 我这样做是因为`list`is Python 中的一个关键字，但是通过调用 an`object` `list`你正在隐藏它。看一下这个：

```
>>> list((1,2,3))
[1, 2, 3]
>>> list = [3,4,5]
>>> list((6,7,8))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'list' object is not callable 
```

编辑：回答后续帖子。

`set`是一个数据结构，只包含唯一的项目并且项目没有顺序。例如：

```
>>> set([1,2,2,4,4])
set([1, 2, 4])
>>> set([1,2,4]) == set([4,4,4,1,2])
True 
```

`frozenset`是类似于set的数据结构，但又有所不同。`set`是可变的，而`frozenset`不是；也就是说，我们可以将东西添加到 set 中，但不能添加到`frozenset`. 但是，`frozenset`是可散列的，而`set`不是。这`fozenset`可以是“字典”中的键或集合中的元素。

可变性：

```
>>> b = set([1,2,3])
>>> b.add(6)
>>> b
set([1, 2, 3, 6])
>>> d = frozenset([1,2,3])
>>> d.add(6)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'frozenset' object has no attribute 'add' 
```

哈希性：

```
>>> b = set([1,2])
>>> d = set([5,3])
>>> g = set([b,d])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'set'
>>> b = frozenset([1,2])
>>> d = frozenset([5,3])
>>> g = set([b,d])
>>> g
set([frozenset([1, 2]), frozenset([3, 5])]) 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:33:22.130

```
l = [[u'polySurface5.e[4]', u'polySurface5.e[1]', .5], [u'polySurface5.e[8]', u'polySurface5.e[2]', .9], [u'polySurface5.e[1]', u'polySurface5.e[4]', .5], [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2], [u'polySurface5.e[2]', u'polySurface5.e[2]', 0]]
# remove [...,0]
l = filter(lambda i: i[-1] != 0, l)
# sort keys (1st and 2nd field)
l = [sorted(i[:-1]) + i[-1:] for i in l]
# uniques
add_if_unique = lambda res, x: (res + [x]) if x not in res else res
l = reduce(add_if_unique, l, []) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:16:47.480

这个单排怎么样？

```
l = [[u'polySurface5.e[4]', u'polySurface5.e[1]', .5],
     [u'polySurface5.e[8]', u'polySurface5.e[2]', .9],
     [u'polySurface5.e[1]', u'polySurface5.e[4]', .5],
     [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2],
     [u'polySurface5.e[2]', u'polySurface5.e[2]', 0]]

newlist = [list(member) for member in set([tuple(sorted(x[:-1]) + x[-1:]) for x in l if x[-1] != 0])]

print newlist
[[u'polySurface5.e[1]', u'polySurface5.e[4]', 0.5], [u'polySurface5.e[2]', u'polySurface5.e[8]', 0.9], [u'polySurface5.e[2]', u'polySurface5.e[9]', 1.2]] 
```