# StackOverflow 问答 10397000-10397999

# sed - 使用 sed 切换成对行的第一个单词

> ID：10397003
> 
> 赞同：2
> 
> 时间：2012-05-01T11:25:53.937
> 
> 标签：sed, line, switch-statement

我真正想做的是使用`sed`. 我知道这可能会更容易使用其他东西，但不幸的是需要 sed （测试自己）

所以，例子是

```
One line here
Two line here as well
Third line could be here
fourth line to end 
```

最终会成为

```
Two line here
One line here as well
fourth line could be here
third line to end 
```

我可能一直在使用错误的操作，`sed`但是是的，不知道。任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:25:21.250

```
sed -e 'N; s/\([a-zA-Z]*\)\(.*\)\n\([a-zA-Z]*\)\(.*\)/\3\2\   ⏎
\1\4/' 
```

（是的，这是一个显式的换行符，由替代中的反斜杠转义）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:59:29.893

这可能对您有用（可能是 GNU sed）：

```
sed '$!N;s/\(\S*\)\(.*\n\)\(\S*\)/\3\2\1/' file
Two line here
One line here as well
fourth line could be here
Third line to end 
```

# python - 由非 root 用户安装 python 包/工具

> ID：10397007
> 
> 赞同：6
> 
> 时间：2012-05-01T11:26:25.513
> 
> 标签：python, setuptools

(1) 我必须安装一个 python 包 (HTSeq) 但我没有 root 权限。

该软件包需要 python 2.4 或最新版本。我们的集群上有 python 2.3。

因此，我使用在我的一个本地目录上安装了 python 2.7

```
./configure --prefix=/home/amit/tools/localpython 
make 
make install 
```

(2) 该软件包还需要 numpy ：所以我还使用以下命令将它安装在我的本地目录中：

```
/home/amit/tools/localpython/bin/python2.7 setup.py install --home=/home/amit/tools/localnumpy 
```

并做了

```
>>> sys.path.append("/home/amit/tools/localnumpy/lib/") 
```

(3) 我下载了 HTSeq 的 tar 文件（我想下载）并运行

```
/home/amit/tools/localpython/bin/python2.7 setup.py install --home=/home/amit/tools/localhtseq 
```

它抛出以下错误：

```
Could not import 'setuptools',
falling back to 'distutils'.
Setup script for HTSeq: Failed to import 'numpy'.
Please install numpy and then try again to install HTSeq. 
```

请给我一些关于如何克服它的提示

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:37:31.883

Setuptools 是安装该软件包所需的另一个要求。

一种选择是使用 virtualenv 创建一个包含的 python 环境。这可以在任何地方制作，并归创建它的用户所有。

要安装没有管理员权限的 virtualenv（来自[此答案](https://stackoverflow.com/a/1452826/708221)）：

下载最新版本 virtualenv 的 tar.gz。打开包装。你甚至不需要安装它，只需运行 virtualenv.py，例如：

```
wget http://pypi.python.org/packages/source/v/virtualenv/virtualenv-1.7.1.2.tar.gz
tar -xzf virtualenv-1.7.1.2.tar.gz
/home/amit/tools/localpython/bin/python2.7 virtualenv-1.7.1.2/virtualenv.py env

env/bin/pip install HTSeq
env/bin/pip install numpy 
```

现在在虚拟环境中使用 python 二进制文件运行您的脚本：

```
env/bin/python myscript.py 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:42:02.193

1）您必须安装[setuptools](http://pypi.python.org/pypi/setuptools)（必须运行您的 HTSeq 的 setup.py）。

下载源*tar.gz* `setuptools-0.6c11.tar.gz`，解压，然后像安装 python2.7 一样执行步骤，但在解压 setuptools 源的文件夹中：

```
./configure --prefix=/home/amit/tools/localpython 
make 
make install 
```

2) 当您安装 setuptools 时，一个`easy_install`可执行文件将出现在`python2.7/scripts/`文件夹中。您可以使用它轻松安装软件包：

```
/home/amit/tools/localpython/bin/python2.7/scripts/easy_install HTSeq 
```

它会自动找到该软件包，并会为您下载并安装它以及所有依赖项。

# android - 分辨率谷歌电视

> ID：10397008
> 
> 赞同：0
> 
> 时间：2012-05-01T11:26:31.337
> 
> 标签：android, google-tv

我开始编写 Google TV 应用程序，DisplayMetrics.widthPixels = 1804 和 heightPixels = 1008 并且 densityDpi 设置为 320。

有没有人设置图形布局编辑器，因为我不能将它用于所见即所得。我总是必须在真正的 Google TV 设备（Logitech Revue）上启动它。取决于我的电视，还是每个 Google TV 设备都设置了此设置？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:19:04.337

> 我开始编写 Google TV 应用程序，DisplayMetrics.widthPixels = 1804 和 heightPixels = 1008 并且 densityDpi 设置为 320。

这听起来像是带有过扫描的 1080p 屏幕。

> 有没有人设置图形布局编辑器，因为我不能将它用于所见即所得。

使用 1080p 并遵循处理过扫描的[Google TV 设计指南](https://developers.google.com/tv/android/docs/gtv_android_patterns#Display)。

> 取决于我的电视，还是每个 Google TV 设备都设置了此设置？

过扫描量因设备而异。

# javascript - 上传时获取图像的尺寸

> ID：10397010
> 
> 赞同：0
> 
> 时间：2012-05-01T11:26:38.040
> 
> 标签：javascript, jquery

在浏览和上传图像时，我想知道图像的高度和宽度，并基于此调整大小并显示它。我可以用javascript实现这个吗？

我正在尝试以下代码，但它只能在 IE 中工作，请问还有其他解决方案吗？

```
 img_id++;
 var id="imgid"+img_id;
 image = document.getElementById('submit').value;
 document.getElementById('div').innerHTML="<img id='"+id+"' src='"+image+"' >";
 document.getElementById(id).style.visibility="hidden";
 alert(document.getElementById(id).offsetWidth +'by'+document.getElementById(id).offsetHeight); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:30:56.820

你为什么分配'div'作为id？'div' 是 HTML 中的标签：

```
document.getElementById('div').innerHTML="<img id='"+id+"' src='"+image+"' >"; 
```

将其更改为其他内容并检查它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:36:02.557

您是否希望保持纵横比？

您是否尝试过像这样设置css：

```
$('#theImage').css('height', WHATEVER_SIZE);
$('#theImage').css('width','auto'); 
```

可能不需要自动（这将保持你的纵横比）

# javascript - 如何访问这个 JSON 值？

> ID：10397019
> 
> 赞同：0
> 
> 时间：2012-05-01T11:27:57.163
> 
> 标签：javascript, jquery, json

我对 JavaScript 很陌生，我不知道如何访问 JSON 字符串中的某些值。我有这些对象的 lsit 并且我确实通过`$.each`函数循环访问它们。但它似乎在这里不起作用。我试过这样做，`alert(data.type);`但它给了我`undefined`变量。

TL;DR：
这是我通过 AJAX 获得的 JSON 字符串。如何`type`使用 jQuery 访问 JavaScript 中的值？

```
{
    "parent_id": "100003381460677",
    "type": "post",
    "title": "a",
    "body": "b",
    "date_normal": "01 May 2012"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:31:20.500

`parseJSON`帮助你

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:29:45.167

`json`假设此 JSON 数据来自 AJAX 调用，如果您的服务器未正确配置以发送正确的`Content-Type`响应标头，请确保您已指定正确的数据类型 ( )：

```
$.ajax({
    url: '/foo',
    type: 'POST',
    dataType: 'json',
    success: function(result) {
        alert(result.type);
    }
}); 
```

然后传递给成功回调的参数将已经表示一个 javascript 对象（由 jQuery 自动从服务器响应 JSON 字符串反序列化）。一旦你有了一个 javascript 对象，你就可以通过名称直接访问它的属性。在您展示的示例中，它是一个简单的对象，而不是数组。因此，您可以直接按名称访问属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:31:10.437

假设您使用它作为您的 ajax 回调：

```
function(data){ ... } 
```

您可以使用点符号访问它：

`data.type`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:33:29.753

如果您正在使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)（这将自动将 AJAX 响应解析为 JSON 对象），那么

```
$.getJSON("<url>", function(data, status) {
     $.each(data, function(i, elem) {
          console.log(elem.type);
     });
}); 
```

请注意，回调 in 的第一个参数[`$.each`](http://api.jquery.com/each/)是数组中的索引，而不是元素本身（即第二个参数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T11:44:12.587

请看以下两个线程；

[通过 javascript 在 Json 中查找值](https://stackoverflow.com/questions/1704026/find-value-in-json-by-javascript)

[如何在jquery中从json中获取不同的值](https://stackoverflow.com/questions/517519/how-to-get-distinct-values-from-json-in-jquery)

我希望它有所帮助。

# hadoop - Hadoop 1.0.0 中的可拆分 Bz2 输入

> ID：10397022
> 
> 赞同：2
> 
> 时间：2012-05-01T11:28:27.430
> 
> 标签：hadoop, bzip2

我有一个使用 Hadoop 1.0.0 的集群，我想运行一个 MR 作业来处理巨大的 bz2 文件。在 0.21.0 版本中，Bz2 编解码器支持分割输入文件，但是我在 1.0.0 中找不到此功能。是否有任何相当于在 1.0.0 中拆分 bz2 输入的方法？或者我应该为此手动应用 0.21.0 的补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T21:58:47.083

Hadoop 1.x 版本尚不支持任何可拆分的压缩编解码器。它确实支持 Bzip2，但不可拆分。这取决于这个问题 [https://issues.apache.org/jira/browse/HADOOP-7823](https://issues.apache.org/jira/browse/HADOOP-7823) *目前看起来这个功能将出现在 Hadoop 1.1.0 中*

解决此问题的最简单方法是查看当前处于测试阶段的 cloudera 包装 cdh4。它具有最新的 Bzip2 实现，可以进行拆分。

* * *

## *参考：*

**Hadoop 1.0.0 API：**

[http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/io/compress/BZip2Codec.html](http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/io/compress/BZip2Codec.html)

```
public class BZip2Codec
extends Object
implements CompressionCodec 
```

**Hadoop 0.23.1（AFAIK 将是 Hadoop 2.x）API：**

[http://hadoop.apache.org/common/docs/r0.23.1/api/org/apache/hadoop/io/compress/BZip2Codec.html](http://hadoop.apache.org/common/docs/r0.23.1/api/org/apache/hadoop/io/compress/BZip2Codec.html)

```
public class BZip2Codec
extends Object
implements SplittableCompressionCodec 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T00:58:24.483

BZip2 编解码器 API 可在[此处](http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/io/compress/BZip2Codec.html)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T19:51:08.957

您可以尝试使用 Pig，它提供了 Hadoop 1.0.0 所缺乏的功能。Pig 将分割输入文件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-01T21:13:20.673

您可以`org.apache.hadoop.io.compress.BZip2Codec`用于输入拆分。

# php - 我可以在同一个域上同时运行 wordpress 网站和非 wordpress 网站，我该如何处理 Index.php 文件？

> ID：10397028
> 
> 赞同：0
> 
> 时间：2012-05-01T11:29:14.170
> 
> 标签：php, wordpress, indexing

那么，我可以在同一个域上同时运行 wordpress 网站和非 wordpress 网站吗？这两个脚本没有文件冲突，所以它们都在同一个域上运行良好。我的主要问题是索引文件：我将保留非 wordpress index.php 文件，并且必须对 wordpress index.php 文件做一些事情......

**为了让它工作，我应该把 wordpress 中的 index.php 放在哪里？其他脚本很完美，因为它有 index.php 文件。我可以将它添加到 wordpress 模板的文件中吗？**

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:31:50.873

如果你应用永久链接，你会遇到问题。我建议您将其中一个系统放在一个文件夹中，例如：`example.com`拥有您的系统并`example.com/blog`拥有 wordpress。

# iphone - C/Objective-c 中的二维数组

> ID：10397034
> 
> 赞同：0
> 
> 时间：2012-05-01T11:29:50.830
> 
> 标签：iphone, objective-c, c, arrays, multidimensional-array

我正在尝试使用常规 c 在我的目标 c 项目中创建一个二维数组，但它无法正常工作。

首先，我在我的 ViewController.h 接口文件中声明它......

```
int selectedItemsInt; 
```

那是我计划使用的二维。接下来我在我的 onload 方法中创建数组......

```
selectedItemsInt [36] [11] = {{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},
                              {1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1}}; 
```

这是一个巨大的二维数组，我从中得到两个错误......

```
Expected expression &AND& Subscripted value is not an array, pointer, or vector 
```

我会在数组前面放一个 int，但我想在我的代码中进一步访问和编辑数组......

```
int index = selectedItemsInt [y][row]; //y and row are ints 
```

即使使用该代码，我也会遇到同样的错误...

```
Subscripted value is not an array, pointer, or vector 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:33:29.970

您需要声明`selectredItemsInt`为二维数组：

```
int selectedItemsInt [36] [11]; 
```

然后在 onload 中动态填充它（除非您在声明时知道值）：

```
for (int i=0; i<36; ++i) {
  for (int j=0; j<11; ++j) {
    selectedItemsInt[i][j] = ...;
  }
} 
```

如果您在声明时知道值，则可以一次性声明和初始化数组：

```
int selectedItemsInt [36] [11] = {{1,1,1,1,1,1,1,1,1,1,1}, ...}; 
```

请注意，这里的第一个维度可能是多余的：如果您提供正确数量的初始化值，则可以这样做：

```
int selectedItemsInt [] [11] = {{1,1,1,1,1,1,1,1,1,1,1}, ...}; 
```

如果同时提供维度并列出值，但列出的值的数量小于声明的维度，则数组的末尾将未初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:32:23.520

您应该使用此内容对其进行初始化，而不是首先将其声明为 int：

```
int selectedItemsInt [36] [11] = {{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1}}; 
```

您声明`selectedItemsInt`为`int`，然后当您认为初始化数组时，您实际上尝试为 int 下标（这当然是不允许的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:33:58.923

Objective-C 是 C 的严格超集。在 C 中有效的东西也将在 Objective-C 中有效。

您将变量声明为单个 int，但稍后设置其内容。立即设置内容以将其声明为固定大小的 int 数组或将其声明为指向 int 的指针（可用作数组）`int *selectedItemsInt;`

# c - 如何处理 Tribool

> ID：10397039
> 
> 赞同：1
> 
> 时间：2012-05-01T11:30:15.430
> 
> 标签：c

在 C 中，任何不为 0 的都是真的。（但我们经常使用枚举来定义状态的值）。因此，要进行真实性测试，我们可以执行以下操作：

```
typedef enum
{
    FALSE,
    TRUE
} BOOL;

// Some function
BOOL n = isTrue();

if (n)
{
    // Do something
} 
```

有一些争论，但我和其他人更喜欢：

```
if (n == TRUE)
{
    // Do something
} 
```

但是，如果由于某种原因，该`isTrue()`函数返回了一个非 1 的值来表示 true，那么后者就不起作用，并且 true 被视为 false。

我一直在通过代码审查标记第一种方式应该是这样做的方式。但是我突然意识到，有时我们需要在未设置值时使用第三种状态的概念。但是是否有可能在 C 中做到这一点并且仍然以第一种方式进行布尔比较，因为如果我们将任何其他值分配为这个“NULL”值，那么它仍然会记录为 true

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:32:56.460

不，你需要一个明确的比较。为了清楚起见，我建议使用`enum`类型：

```
typedef enum {
    FALSE = 0,
    TRUE = 1,
    FILENOTFOUND = 2
} truth; 
```

这导致相当干净的代码结构：

```
truth n;

// ...

switch (n) {
case FALSE:          // Blah
case TRUE:           // Blah
case FILENOTFOUND:   // Blah
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:01:21.760

我很想选择一个`int`. 您可以使用 -ve 数字表示假，+ve 表示真，零表示“不知道”。

您仍然需要小心不要将其用作`if (thing)`，但您也有其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:34:08.330

正如您所写，任何不是 0 的东西都会评估为“真”。这意味着在您描述的情况下，C 实际上*无法*识别第三种状态：C 仅区分“假”（即 0）和“非假”（即“真”，即任何非 0） .

基于枚举的解决方案的一个略显老套的替代方案是进行类似的测试

```
#DEFINE NOTSET -1

if (a == NOTSET) {
    /* Stuff that happens when a is not set*/ 
}

else if (a) {
    /* Stuff that happens when a is true*/
}

else {
    /*Stuff that happens when a is false*/
} 
```

但坦率地说，我不会推荐它。

# javascript - Jquery：更改html时平滑调整大小

> ID：10397040
> 
> 赞同：1
> 
> 时间：2012-05-01T11:30:24.503
> 
> 标签：javascript, jquery, html, jquery-ui

我的页面布局是 3 个水平 DIVS。中间的 DIV 将加载内容。我希望 DIV 将高度平滑调整为适当的大小（如使用`animate`），然后淡入内容。

这就是我目前所拥有的

```
<div id='a'></div>
<div id='b'>foo</div>
<div id='c'></div>

$( '#a ').fadeOut().innerHtml('bar').hide().fadeIn() 
```

这让我接近我想要的，但看起来很粗糙

我正在使用 jQuery 1.7.2 并且还可以访问 jQueryUI

**细化**

目前，中间的DIV会淡出，然后（因为没有内容）会消失。添加新内容后，它会立即调整大小并淡入新内容。

我想要发生的是内容淡出并保持高度。添加新内容时，我希望 div 调整到适当的高度，然后淡入内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:43:11.223

将其更改为以下内容。请注意，您`innerHtml`在 JQuery 对象上使用过，正确的语法是`html`. 此外，您在设置内容后不必要地调用`hide`了，但该项目应该已经隐藏，因为您调用了`fadeOut`.

尝试这个：

```
$( '#a ').fadeOut().html('bar').fadeIn() 
```

**演示：http: [//jsfiddle.net/SmZgw/1/](http://jsfiddle.net/SmZgw/1/)**

# actionscript-3 - 通过 mxmlc 构建时不显示嵌入式字体

> ID：10397045
> 
> 赞同：1
> 
> 时间：2012-05-01T11:30:46.797
> 
> 标签：actionscript-3, apache-flex, fonts, flash-builder, flex4.5

我有一个 flex 3 项目，我正在尝试将其升级到 flex 4.6 sdk。我的应用程序中有许多嵌入字体。当我通过 Eclipse/Flash 构建器构建时，这些显示正常。当我使用 mxmlc 构建时，没有使用嵌入的字体。我以相同的方式为两者构建字体，所以我假设有一些我缺少的编译器选项，或者我有导致问题的编译器选项。我已经尝试了所有我能想到的编译器选项，现在我陷入了死胡同……

```
<target name="compile" depends="getswcs, compilemodules">

    <echo message="mxmlc=${mxmlc}"/>
    <echo message="flex.lib.dir=${flex.lib.dir}"/>
    <echo message="flex.extlib.dir=${flex.extlib.dir}"/>
    <echo message="flex.locale=${flex.locale}"/>
    <echo message="flex.locale.dir=${flex.locale.dir}"/>

    <exec executable="${mxmlc}" dir="${basedir}" failonerror="true">
        <arg line="'src/${main}'" />
        <arg line="-o 'bin/${component.lowercase.name}.swf'" />
        <arg line="-l+='${flex.lib.dir}'" />
        <arg line="-sp src" />
        <arg line="-accessible" />
        <arg line="-strict" />
        <arg line="-el '${flex.extlib.dir}'" />
        <arg line="-compatibility-version=3.0.0" />
        <arg line="-target-player '11.1'" />  
        <arg line="-include-libraries+=lib" />
        <arg line="-locale ${flex.locale}" />
        <arg line="-l+='${flex.locale.dir}'" />
    </exec>

</target> 
```

compileModules 构建我的字体，例如：

```
<exec executable="${mxmlc}" dir="${basedir}" failonerror="true">
            <arg line="fonts/OCRAEXT.as" />
            <arg line="-static-link-runtime-shared-libraries" />
            <arg line="-o bin/lib/OCRAEXT.swf" />
        </exec>` 
```

作为文件：

```
public class OCRAEXT extends Sprite
    {
        [Embed(source='OCRAEXT.TTF', fontName='_OCRAEXT', embedAsCFF='false',
            unicodeRange='U+0030-U+0039,U+002E,U+002F,U+20AC')]
        public static var font:Class;       
    } 
```

我认为这里没有问题，因为在 Eclipse 中构建应用程序之前，字体已经通过我的 compileModules 构建，字体显示正确。

# wdk - 如何使用 DDK 重新扫描到硬盘？

> ID：10397048
> 
> 赞同：0
> 
> 时间：2012-05-01T11:31:10.150
> 
> 标签：wdk

是否可以使用 ddk 重新扫描某些设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:50:58.483

如果您的意思是让系统重新扫描新设备，那么您可以使用带有重新扫描选项的 devcon.exe 实用程序。

devcon 工具是 DDK 的一部分。

*   [http://support.microsoft.com/kb/311272](http://support.microsoft.com/kb/311272)

# sql - 是否可以将一个左外连接放在另一个左外连接中

> ID：10397050
> 
> 赞同：8
> 
> 时间：2012-05-01T11:31:11.163
> 
> 标签：sql, db2, left-join, join

我可以将*左外连接*放在另一个*左外连接*内吗？像这样：

```
SELECT * FROM table1 
LEFT OUTER JOIN table2 ON (LEFT OUTER JOIN table 3 ON (Join Conditions))
WHERE
....(where conditions) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T11:41:33.743

To group multiple joins, the syntax is as follows (untested on db2)

```
SELECT *
FROM table1 t1
LEFT JOIN (
  table2 t2 INNER JOIN table3 t3 ON t3.someId = t2.someId
) ON t2.someId = t1.someId 
```

Same syntax for left join inside `LEFT JOIN()`, but please read comment by @X-Zero

```
SELECT *
FROM table1 t1
LEFT JOIN (
  table2 t2 LEFT JOIN table3 t3 ON t3.someId = t2.someId
) ON t2.someId = t1.someId 
```

# objective-c - UIScrollView 中的滚动条大小异常行为

> ID：10397054
> 
> 赞同：1
> 
> 时间：2012-05-01T11:31:25.027
> 
> 标签：objective-c, ios, ipad, uiscrollview, scroll

我有一个导航控制器，它以编程方式加载多个视图。在一个视图中，我显示了用户可以滚动浏览图标的文档列表。当设备侧放时（横向）。我正在使用 UIScrollView 滚动时出现这个奇怪的阴影。有没有人知道我可以检查什么导致这个阴影。关闭检查后，我发现它并不是真正的阴影，而是增加了滚动条的大小。我还发现只有在转到另一个视图后才进入第二个视图时才会发生这种情况，因此当您单击一个按钮时，它会加载第三个视图，当我使用导航控制器返回时，我会遇到问题。

```
[scrv removeFromSuperview];
scrv = [[UIScrollView alloc] init];
[scrv setShowsHorizontalScrollIndicator:NO];
[scrv setShowsVerticalScrollIndicator:YES];
for(int i = 0; i < [array count]; i++){
     //removed for simplicity
     //loads several subviews
    }
}
[self setVisual];
[self.view addSubview:scrv]; 
```

![在此处输入图像描述](../Images/64bb7f6ba394f4ffffa3be84436e851e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:48:03.393

您是否正在做一些事情来布局滚动视图的子视图？我遇到了类似的问题，因为我线性地布置了滚动视图的子视图，并且忘记了指示器本身就是滚动视图的子视图。

# java - HashMap 实现概念

> ID：10397057
> 
> 赞同：1
> 
> 时间：2012-05-01T11:31:41.077
> 
> 标签：java, conceptual

我已经读了很多遍了，我只是想澄清一下。

HashMap 被称为 Arraylists 数组。

我们可以说数组大小是哈希图的桶大小吗

注意：我只想做一个更正：

1) 桶的数量等于 Array 的大小 2) 桶的大小是 Arraylist 的大小。

很抱歉给您带来不便。请让我知道以上两点是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:34:09.670

不。在你的类比中，每个桶都是 one `ArrayList`，所以桶的大小就是`ArrayList`s 的大小。一个好的实现会努力使它们都保持大致相同的大小，并且相当小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:36:48.407

桶的数量是 Array 的长度。每个存储桶都是一个 ArrayList，因此存储桶大小（可能因存储桶而异）就是该 ArrayList 的长度。该大小大于 1 的唯一原因是，如果为添加到 HashMap 的两个对象计算的哈希码发生冲突（注意，这可能`hashCode()`与/地图中的桶数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:05:20.533

实际上它比这更复杂。例如，Java`HashMap`实现为链表数组。在那个模型中，根本没有固定的桶大小。

如果您阅读文献，您会发现有许多不同的方法来组织哈希表，它们具有不同的特性。哈希表上的[维基百科页面](http://en.wikipedia.org/wiki/Hash_table)是开始阅读的好地方。

# java - 信息检索系统的数据结构/算法

> ID：10397060
> 
> 赞同：0
> 
> 时间：2012-05-01T11:31:51.860
> 
> 标签：java, algorithm, data-structures, information-retrieval

我有一个条件如下的任务 - 它与 Java / 数据结构有关。我将尝试简单地提出我的问题，因为回答这些问题将帮助我找到方法（因为我迷路了）：

1.  您建议使用什么数据结构？
2.  你会遵循什么算法？（细节赞赏）。

一个简单的信息检索系统，其中一个查询包含关键字并且有一组要搜索的文档。为响应查询，系统识别包含所有或部分关键字的每个文档（最多 n 个文档），并按找到的关键字的降序打印文档名称，即包含所有关键字的文档应出现在名单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T11:34:29.197

首先，您可能正在寻找[**apache lucene**](http://lucene.apache.org/core/)，它是一个在 java 中实现 IR 系统的开源库！

自己实现一些东西很难，但 IR 中最重要的数据结构是[**倒排索引**](http://en.wikipedia.org/wiki/Inverted_index)。

倒排索引实际上是一个`map:term->list<index>`，将每个术语映射到它出现的文档。倒排索引的优点 - 它非常适合 IR 标准操作，例如连接（和查询）。

在您的特定问题中，从集合中构建一个倒排索引，一旦`k`到达术语查询 - 获取`k`与这些术语相对应的列表，并获取它们的并集。
现在，一旦你有了联合——剩下的就是创建一个[直方图](http://en.wikipedia.org/wiki/Histogram)（每个术语出现多少个列表，可以实现为[`HashMap<Term,Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)）——并以降序打印这些直方图的键。

如果您想扩展您对 IR 的了解，我建议您阅读 Manning 的[信息检索简介](http://nlp.stanford.edu/IR-book/pdf/irbookonlinereading.pdf)。

# java - 使用线程池/线程来读取大型 txt 文件？

> ID：10397075
> 
> 赞同：4
> 
> 时间：2012-05-01T11:33:18.927
> 
> 标签：java, multithreading, threadpool

在我之前的一个问题上，我发布了：

*我必须阅读几个非常大的 txt 文件，并且必须使用多个线程或单个线程来执行此操作，具体取决于用户输入。假设我有一个获取用户输入的 main 方法，并且用户请求一个线程并希望为该线程处理 20 个 txt 文件。我将如何做到这一点？请注意，以下不是我的代码或其设置，而只是“想法”。*

例子：

```
int numFiles = 20;
int threads = 1;

 String[] list = new String[20];
 for(int i = 1; i < 21; i++){
   list[i] = "hello" + i + ".txt";//so the list is a hello1.txt, hello2.txt, ...,  hello20.txt
 }

 public void run(){
 //processes txt file
 } 
```

*总而言之，我将如何使用单个线程完成此操作？有20个线程？*

一位用户建议使用 threadPools：

*当用户指定要使用的线程数时，您将适当地配置池，提交一组文件读取作业，并让池对执行进行排序。在 Java 世界中，您将使用 Executors.newFixedThreadPool 工厂方法，并将每个作业作为 Callable 提交。这是 IBM 的一篇关于 Java 线程池的文章。*

所以现在我有一个名为 sortAndMap(String x) 的方法，它接受一个 txt 文件名并进行处理，对于上面的例子，会有

Executors.newFixedThreadPool(numThreads);

如何将它与 threadPools 一起使用，以便我上面的示例可行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T11:43:57.657

好的，请耐心等待，因为我需要解释一些事情。

首先，除非您有多个磁盘或者一个 SSD 磁盘，否则不建议使用多个线程从磁盘读取。关于这个主题的问题已经发布了很多，结论都是一样的：使用多个线程从单个机械磁盘中读取会损害性能而不是提高性能。

发生上述情况是因为磁盘的机械头需要不断寻找下一个要读取的位置。使用多个线程意味着当每个线程有机会运行时，它会将磁头引导到磁盘的不同部分，从而使其在磁盘区域之间的反弹效率低下。

处理多个文件的公认解决方案是拥有一个生产者（一个读取线程）-多个消费者（处理线程）系统。在这种情况下，理想的机制是一个线程池，一个线程充当生产者，并将任务放入池队列中供工人处理。

像这样的东西：

```
int numFiles = 20;
int threads = 4;

ExecutorService exec = Executors.newFixedThreadPool(threads);

for(int i = 0; i < numFiles; i++){
    String[] fileContents = // read current file;
    exec.submit(new ThreadTask(fileContents));
}

exec.shutdown();
exec.awaitTermination(Long.MAX_VALUE, TimeUnit.SECONDS);
...

class ThreadTask implements Runnable {

   private String[] fileContents;

   public ThreadTask(String[] fileContents) {
        this.fileContents = fileContents;
   }

   public void run(){
      //processes txt file
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:42:34.553

我将从阅读有关高级并发的本[教程开始。](http://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html)我建议阅读整个[并发教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)，因为听起来你是多线程的新手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T11:43:34.717

因此，`newFixedThreadPool()`调用将返回[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)的实例。您可以参考 JavaDoc，它非常全面并且包含一个可行的示例。您将需要一个`submit`或`invokeAll`多个`Callable`s 来实现您的文件处理任务，从而为您提供多个`Future`s 作为回报。他们的`get()`方法将在完成后为您提供任务执行的结果（您必须自己编写该部分:)）

# android - Android 文件传输无法通过 XMPP 和 OpenFire 工作

> ID：10397079
> 
> 赞同：8
> 
> 时间：2012-05-01T11:33:32.003
> 
> 标签：android, xmpp, file-transfer, openfire, asmack

**问题**：无法接收通过 XMPP 和 OpenFire 服务器发送到我的 android 应用程序的文件。我可以成功发送文件。我使用的 asmack jar 是*asmack-jse-buddycloud-2010.12.11.jar*

**代码**：

```
 connConfig = new ConnectionConfiguration("beta.myCompany.co.uk", 5222);
    connConfig.setSASLAuthenticationEnabled(true);
    try {
        connect("username", "password");
    } catch (Exception e) {
        e.printStackTrace();
    }

    ServiceDiscoveryManager sdm = ServiceDiscoveryManager.getInstanceFor(connection);
    if(sdm == null)
        sdm = new ServiceDiscoveryManager(connection);

    fileTransferManager = new FileTransferManager(connection);
    FileTransferNegotiator.setServiceEnabled(connection, true);

fileTransferManager.addFileTransferListener(new FileTransferListener() {
    @Override
    public void fileTransferRequest(FileTransferRequest request) {
        IncomingFileTransfer transfer = request.accept();
        try {
            FileOutputStream fos = openFileOutput(request.getFileName(), Context.MODE_PRIVATE);
            InputStream stream = transfer.recieveFile();//THIS FAILS!
            fos.write(IOUtils.toByteArray(stream));
            fos.close();    
        } catch (Exception e) {
            e.printStackTrace();
        }
} 
```

**错误（*如果文件是通过 Spark 发送的*）**：

> 执行错误：- 由：java.util.concurrent.ExecutionException：文件传输发起者无响应：

**错误（*如果文件是通过 Adium 发送的*）**：

> java.util.concurrent.ExecutionException：无法与任何提供的主机建立套接字：item-not-found(404) 无法与任何提供的主机建立套接字

**错误（*如果文件是通过我的应用程序的另一个实例发送的*）**：

> 执行错误：- 由：java.util.concurrent.ExecutionException 引起：- 由：远程客户端无响应：

**我的日志：（尝试从 Spark 接收文件时）**

看来我正在发送此错误！（没有收到）。为什么会这样？

```
> 05-01 12:49:36.013: I/System.out(1000): 12:49:35 PM SENT (1093411736):
> <iq id="791-6222" to="beta.myCompany.co.uk"
> from="theUsername@beta.myCompany.co.uk/BAM-1918973529" type="error"><error
> code="501" type="CANCEL"><feature-not-implemented
> xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq> 
```

**额外日志**：

```
05-01 14:46:06.133: I/System.out(1370): 02:46:06 PM RCV  (1093401112): <iq id="eRi5A-72" to="myUsername@beta.myCompany.co.uk/BAM-1755858011" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="set"><si xmlns="http://jabber.org/protocol/si" id="jsi_5991130279184702850" profile="http://jabber.org/protocol/si/profile/file-transfer"><file xmlns="http://jabber.org/protocol/si/profile/file-transfer" name="Test.rtf" size="318"><desc>Sending file</desc></file><feature xmlns="http://jabber.org/protocol/feature-neg"><x xmlns="jabber:x:data" type="form"><field var="stream-method" type="list-single"><option><value>http://jabber.org/protocol/bytestreams</value></option><option><value>http://jabber.org/protocol/ibb</value></option></field></x></feature></si></iq>
05-01 14:46:08.283: I/System.out(1370): 02:46:08 PM SENT (1093401112): <iq id="eRi5A-72" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" from="myUsername@beta.myCompany.co.uk/BAM-1755858011" type="result"><si xmlns="http://jabber.org/protocol/si"><feature xmlns="http://jabber.org/protocol/feature-neg"><x xmlns="jabber:x:data" type="submit"><field var="stream-method"><value>http://jabber.org/protocol/bytestreams</value></field></x></feature></si></iq>
05-01 14:46:08.312: I/System.out(1370): 02:46:08 PM RCV  (1093401112): <iq id="eRi5A-73" to="myUsername@beta.myCompany.co.uk/BAM-1755858011" type="get" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3"><query xmlns="http://jabber.org/protocol/disco#info"/></iq>
05-01 14:46:14.352: W/System.err(1370): Error in execution: 
05-01 14:46:14.352: W/System.err(1370):   -- caused by: java.util.concurrent.ExecutionException: No response from file transfer initiator:[
[ERROR LOG IS HERE]
05-01 14:46:14.732: I/System.out(1370): 02:46:14 PM SENT (1093401112): <iq id="eRi5A-73" to="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" type="result"><query xmlns="http://jabber.org/protocol/disco#info"><identity category="client" name="Smack" type="pc"/><feature var="http://jabber.org/protocol/caps"/><feature var="http://jabber.org/protocol/bytestreams"/><feature var="http://jabber.org/protocol/si/profile/file-transfer"/><feature var="http://jabber.org/protocol/si"/><feature var="http://jabber.org/protocol/ibb"/></query></iq>
05-01 14:46:14.773: I/System.out(1370): 02:46:14 PM RCV  (1093401112): <iq id="eRi5A-77" to="myUsername@beta.myCompany.co.uk/BAM-1755858011" type="set" from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3"><query xmlns="http://jabber.org/protocol/bytestreams" sid="jsi_5991130279184702850" mode="tcp"><streamhost jid="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" host="10.95.104.25" port="7777"/><streamhost jid="proxy.beta.myCompany.co.uk" host="127.0.1.1" port="7777"/></query></iq>
05-01 14:46:29.783: I/System.out(1370): 02:46:29 PM RCV  (1093401112): <iq type="get" id="537-7113" from="beta.myCompany.co.uk" to="myUsername@beta.myCompany.co.uk/BAM-1755858011"><ping xmlns="urn:xmpp:ping"/></iq>
05-01 14:46:29.843: I/System.out(1370): 02:46:29 PM SENT (1093401112): <iq id="537-7113" to="beta.myCompany.co.uk" from="myUsername@beta.myCompany.co.uk/BAM-1755858011" type="error"><error code="501" type="CANCEL"><feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:47:50.353

利用

```
transfer.receiveFile(myLocalFile); 
```

代替

```
InputStream stream = transfer.receive(); 
```

您正在阻塞 PacketReader 线程。第一种方法将产生它自己的线程来读取构成正在传输的文件部分的特定数据包。如果您使用第二种方法，则必须生成自己的线程来执行实际的文件读取和写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T07:35:00.300

我创建了一个简单的 Java 程序，其中包含一些其他用户代码的复制粘贴，但关键是它正在工作，我已经尝试过这个 b/w`LocalHost - SPark client - javaProgram`

您可以将 txt.file 发送给在 openFile 用户部分创建的其他用户。

> 注意：如果您想要 Xmpp.test 类中的任何详细信息，请更改任何内容。

[从这里下载 Xmpp 文件传输“Java 代码”](https://onedrive.live.com/redir?resid=D6874F5E96BBF5A8!1615&authkey=!AOdowMbLHrK_Gqo&ithint=file%2Crar)

# iphone - AVPlayerLayer 和 AVPlayer

> ID：10397081
> 
> 赞同：0
> 
> 时间：2012-05-01T11:33:48.083
> 
> 标签：iphone, objective-c

我在我的应用程序中使用`AVPlayerLayer`和构建了一个视频播放器`AVPlayer`。

选择新视频时，我将做出此方法：

```
//this to remove the current video
    if (avPlayerLayer) {
            [[NSNotificationCenter defaultCenter] removeObserver:self name:AVPlayerItemDidPlayToEndTimeNotification object:[audioPlayer currentItem]];
            [avPlayerLayer.player pause];
            [avPlayerLayer removeFromSuperlayer];
            avPlayerLayer = nil;
    }

//and this is to add a new one
    audioPlayer = [[AVPlayer alloc]initWithURL:[NSURL fileURLWithPath:fileName]];
    avPlayerLayer = [[AVPlayerLayer playerLayerWithPlayer:audioPlayer] retain];
    [avPlayerLayer setFrame:self.view.bounds];

    CGRect frame = avPlayerLayer.frame;
    [avPlayerLayer setFrame:CGRectMake(frame.origin.x, frame.origin.y - 30, frame.size.width, frame.size.height)];

    [[self.view layer] addSublayer:avPlayerLayer];

    [audioPlayer play];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(finishPlayingSong)
                                                     name:AVPlayerItemDidPlayToEndTimeNotification
                                                   object:[audioPlayer currentItem]];
    [audioPlayer release]; 
```

现在，有时当我执行此方法时，设备不会开始播放视频（它是同时发生的，而不是在同一个视频上）。知道为什么会这样吗？我该如何处理？

# 编辑

我注意到它发生在我播放 5 首歌曲之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T20:52:12.910

你有内存泄漏。每次创建`AVPlayer`with`alloc: init:`并将其分配给`audioPlayer`. 这使它的保留计数为 1。然后您创建一个`AVPlayerLayer`它再次增加其保留计数。

稍后，您释放`avPlayerLayer`减少保留计数的值，`audioPlayer`但它永远不会回到零，因此永远不会被释放。

泄漏很糟糕，但你也遇到了另一个问题。iOS 中的基础设施限制为[最多 4 个音频/视频渲染管道](https://stackoverflow.com/a/9933853/199163)。当您创建第五个时，它无法获取渲染管道，因此播放失败。

要解决您的问题，请更正内存泄漏。

```
audioPlayer = [AVPlayer playerWithURL:[NSURL fileURLWithPath:fileName]]; 
```

使用`playerWithURL:`静态工厂构造函数将隐式执行一个`autorelease:`，减少该对象的保留计数并避免泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:57:07.863

真的没有理由仅仅为了改变输入而创建新的 AVPlayer 和 AVPlayerLayer 实例。您真正需要的只是一个新的 AVPlayerItem。将其分配给当前的 AVPlayer 并继续使用您现有的 AVPlayerLayer。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-12T13:44:07.427

通常，要自定义您的 MPMovie 播放器，最好将 AVPlayerLayer 与 AVPlayer 一起使用。

通过使用此自定义播放器，您可以根据需要自定义播放器控件（播放/暂停、后退、前进、停止和音量等）。

# wordpress - Wordpress - 自定义标签云条目的 href

> ID：10397082
> 
> 赞同：0
> 
> 时间：2012-05-01T11:33:49.283
> 
> 标签：wordpress, tag-cloud

我的侧边栏中有标准标签云。

但是，我是从头开始编写我的主题的，它的运作方式有点不同。而不是我的云中每个标签的 href 导致`mysite.com/tag1`我需要它通过我的内部搜索引擎运行，所以 href 应该看起来像`mysite.com/?s=tag1&submit=Search`.

`functions.php`有没有比从头开始编写我自己的标签云插件更简单的方法（也许添加一个函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:05:06.223

您可以查看过滤器[widget_tag_cloud_args](http://adambrown.info/p/wp_hooks/hook/widget_tag_cloud_args)不确定它是否有效。
你也可以扩展类`WP_Widget_Tag_Cloud`

# c++ - 如果基类和派生类都具有相同的成员变量，编译器如何解析要调用哪个成员？

> ID：10397089
> 
> 赞同：1
> 
> 时间：2012-05-01T11:34:07.320
> 
> 标签：c++

```
Look at this example

class base {
public:
    int m1;
    base() {
        m1 = 5;
    }
};

class der:  public base  {
public:
    int m1;
    der() {
        m1 = 6;
    }
};

int main() {
    der d;
    cout << d.m1;   
    return 0;
} 
```

这里对象 d 的大小是`8 byte`，分配给`2 m1`（一个用于基类，另一个用于派生类）。解决机制是什么`d.m1`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T11:36:33.387

`m1`in`der`隐藏了`base`'s的名称，因此通过对象进行的`m1`任何访问都会让您获得该实例的. 您可以像这样访问：`m1``der``der::m1``base::m1``der`

```
class der:  public base  {
public:
    int m1;
    der() {
        m1 = 6;
        base::m1=7; // access base object's m1 inside der
    }
}; 
```

您可以这样访问基础对象：

```
der d;
d.base; // base object
std::cout << d.base::m1 >> "\n"; // access base object's m1 outside of der (if allowed) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T11:36:24.540

编译器`m1`根据`d`. 这意味着您将获得不同的结果

```
der d;
cout << d.m1; 
```

和

```
der d;
base &b = d;
cout << b.m1; 
```

这是因为在解析`m1`类型表达式时`der`，成员`der::m1`隐藏`base::m1`。

# html - CSS 对齐问题 Internet Explorer

> ID：10397092
> 
> 赞同：1
> 
> 时间：2012-05-01T04:33:26.187
> 
> 标签：html, css

我们刚刚发布了一个新 Web 应用程序的 alpha 版本，但由于某种原因，登录框在 Internet Explorer 中从未正确居中。（Firefox/Chrome 工作）。

示例：[http ://demo.ionfish.org/status2/core/admin/](http://demo.ionfish.org/status2/core/admin/)

CSS：

[http://demo.ionfish.org/status2/css-fail.txt](http://demo.ionfish.org/status2/css-fail.txt)

我有一种感觉，某些东西正在覆盖 CSS 以在某处居中，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T07:47:03.463

*你*的文档类型在哪里？由于您没有指定任何内容，因此该页面正在以怪癖模式呈现。

在最新版本的 IE 中，加载您的页面并按 F12 打开[开发者工具](http://msdn.microsoft.com/en-us/library/gg589512%28v=vs.85%29.aspx)。在窗口/面板的顶部，您将看到“浏览器模式：[something] 文档模式：[something]”单击“文档模式”部分，然后选择任何“标准”选项以更改呈现行为，然后您应该会看到您的预期结果。但是，要真正让浏览器*自行*完成，您需要包含正确的文档类型。

# asp.net - 带有复选框 + DotNet 的 jQuery TreeView 控件

> ID：10397095
> 
> 赞同：0
> 
> 时间：2012-05-01T11:34:30.873
> 
> 标签：asp.net, jquery-ui

正在寻找一个***免费***的jQuery TreeView 控件，它支持下面提到的所有功能。需要在 ASP.NET 中使用相同的。

强制的：

1.  跨浏览器兼容（最低 IE、Chrome、Firefox、Safari）
2.  作为 JSON 数据的数据源
3.  拖放功能
4.  带复选框的树节点
5.  可选，自动打开/展开/全部取消展开

选修的：

1.  右键单击上下文菜单
2.  带图标的树节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:38:01.213

试试 bassistance jquery-plugin-treeview。你可以获取文档并下载hear。
[http://bassistance.de/jquery-plugins/jquery-plugin-treeview/](http://bassistance.de/jquery-plugins/jquery-plugin-treeview/)

# javascript - 扭曲拉斐尔的“路径”

> ID：10397096
> 
> 赞同：0
> 
> 时间：2012-05-01T11:34:47.570
> 
> 标签：javascript, raphael, vector-graphics

我想知道是否可以在 RaphaelJS 中扭曲任何形状/路径，例如，如果我在 0,0 10,0 10,10 0,10 的边界框中有一个形状，并且假设该形状在这些点上有句柄，并且我将点 10,10 拖到 11,15 ...此时我想扭曲形状以适应新的边界框。

想象一下形状很复杂，就像这样[http://jsfiddle.net/8hMkC/](http://jsfiddle.net/8hMkC/)

如果它必须是图像，那不是太大的问题（如果有可能吗？）

塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:33:29.697

您可以使用 javascript 使用视图框。
[http://jsfiddle.net/mihaifm/QqcwX/](http://jsfiddle.net/mihaifm/QqcwX/)

添加代表按钮并处理单击/拖动事件的新元素（圆形或其他东西）。然后您可以更改视图框坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:45:49.433

不是我知道的。我假设您希望能够在边界框的范围内倾斜、扭曲和/或通常扭曲任意形状。这将涉及将任何非路径图元（圆、矩形等）转换为路径，然后计算其中所有节点点的变化。我并不是说这不能完成，但可以这么说，你不能免费获得它。如果**可以**做到这一点，我很想听听。

# javascript - setTimeout 不等待 JQuery Mobile 中的指定间隔

> ID：10397099
> 
> 赞同：4
> 
> 时间：2012-05-01T11:35:14.873
> 
> 标签：javascript, jquery, jquery-mobile, settimeout

我正在尝试根据特定的时间间隔更改页面。我尝试使用 setTimeout，但无论指定时间，它都会立即运行代码。这是页面：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta name="viewport" content="width=320; user-scalable=no" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>Change Page</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script type="text/javascript">
            var oCSS = {
                'font-size' : '18em',
                'height' : '300px',
                'border' : 'thick solid',
                'text-align' : 'center'
            };

            $(document).bind("mobileinit", function()
            {
                $.mobile.defaultPageTransition = "flip";
            });
            $('div[data-role|="page"]').live('pageshow', function(event)
            {
                setTimeout($.mobile.changePage($($(this).attr('NextPage'))), 30000);
            });
        </script>

        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    </head>
<body>
    <div data-role="page" id="page1" NextPage='#page2'>
        <div data-role="content">
            <div class="number">4</div>
        </div>
    </div>

    <div data-role="page" id="page2" NextPage='#page3'>
        <div data-role="content">
            <div class='number'>3</div>
        </div>
    </div>

    <div data-role="page" id="page3" NextPage='#page4'>
        <div data-role="content">
            <div class='number'>2</div>
        </div>
    </div>

    <div data-role="page" id="page4" NextPage='#page1'>
        <div data-role="content">
            <div class='number'>1</div>
        </div>
    </div>

    <script type="text/javascript">
        $(".number").css(oCSS);
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T11:37:32.017

你的语法不正确。您需要使用匿名函数，否则 JS 将被立即调用。此外，您的 jQuery 似乎也不正确（一个太多`$()`）。它应该是：

```
$('div[data-role|="page"]').live('pageshow', function(event)
{
    // Retrieve attribute of element to be passed to anonymous function
    var functionParam = $(this).attr('NextPage')

    setTimeout(function() {
        // Pass functionParam to function - $(this) will 
        // be out of scope when the function is called
        $.mobile.changePage(functionParam)
    }, 30000);​
}); 
```

有关更多信息，请参阅[`window.setTimeout`文档](https://developer.mozilla.org/en/DOM/window.setTimeout)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:42:19.367

您对 的引用`$(this)`将不起作用（匿名函数中的 this 最终成为`DOMWindow` ^([Example](http://jsfiddle.net/markcoleman/t8gfw/))）`setTimeout()`，您需要捕获变量以使函数正常运行。

```
$('div[data-role|="page"]').live('pageshow', function(event){
  var nextPage = $($(this).attr('NextPage'));
  setTimeout(function(){
    $.mobile.changePage(nextPage);
  }, 30000);
}); 
```

**[这是关于 jsfiddle 的一个工作示例](http://jsfiddle.net/markcoleman/6GDCD/)**

# sum - 快速计算以获得最小总和？

> ID：10397106
> 
> 赞同：0
> 
> 时间：2012-05-01T11:36:20.530
> 
> 标签：sum

我有这样的数据

```
row1: x1 x2 x3... xn, y1,y2,...yn
row2: x2,x3,....xj, y4,y5,...ym
.....
row 1 million, x6,x2,x7...xk, y2,y3,...yl 
```

每一行，x和y的数量可以是一百万甚至更多

每一行，某些数量的 x 或 y 可以具有相同的值。就像第 1 行和第 2 行一样，x2 有共同点。

我的目标是找出哪一行给了我最小的 x 和 y 之和。例如，第 1 行的总和是 sum(x1+x2,..+xn+y1+y2+...yn)。

详尽的方法可以工作，但会很慢，因为会有一百万*一百万次操作，我相信有一些聪明的方法可以工作。

谢谢

更新：

实际上，上述问题来自矩阵分区：，给出一个如下所示的 5x5 矩阵

```
1 2 3 4 5
2 3 4 5 6
2 3 4 5 8
9 1 2 3 5
1 5 2 5 6 
```

至少有五种方法可以将此矩阵划分为两个子矩阵，例如，

```
1 2 | 3 4 5
2 3 | 4 5 6
----+------
2 3 | 4 5 8
9 1 | 2 3 5
1 5 | 2 5 6 
```

我得到两个子矩阵

```
1 2
2 3 
```

和

```
4 5 8 
2 3 5
2 5 6 
```

所以实际上 1 2 2 3 是我提到的 x，而 4 5 8 2 3 5 2 5 6 是我提到的 y。所以每一行都是矩阵中的一种分裂。我不确定我是否清楚？请添加评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:16:37.690

从我上面看到的是 x 和 y 模式在两行上重叠，所以给定一个列表 {x1, x2, ... xn} 和 {y1, y2, .. ym}

给定 (1, n) 中的 i,j,k,l

和 (1, m) 中的 o,p,q,r

第一行是： { xi, xi+1, ... ,xj }{ yo, yo+1, ... , yp }

第二行是： { xk, xk+1, ... ,xl }{ yq, yq+1, ... , yr }

因此，您真正需要找到的是行之间的差异并进行比较，并且仅将其相加，因为重叠（具有相同值的部分）将具有相同的总和。

关于这两个列表，您还有什么可以告诉我们的吗？他们排序了吗？你知道 x 和 y 的列表与行无关吗？x列表中的值可以出现在y列表中吗？他们是否以任何方式排序？

知道这些东西会让你更快地弄清楚你需要什么。

如果不是，您将不得不走行并确定重叠。

更新：

这假设我们只通过对角线进行分解，但您可以将算法推广到其他算法。

使用上面的示例让我们看看我们是否可以工作，我按 x 和 y 集对数字进行分组。

第 1 行：{1}{3 4 5 6 3 4 5 8 1 2 3 5 5 2 5 6}
第 2 行：{1 2 2 3} {4 5 8 2 3 5 2 5 6} 所以我们添加到 x { 2 3} 来自第二列，{2} 来自第二行。
我们从 y 中删除了第二列的 {3 3 1 5} 和第二行的 {4 5 6}
第 3 行：{1 2 3 2 3 4 2 3 4}{3 5 5 6} 所以我们添加到 x { 3 4 4} 来自第三列，{2 3} 来自第三行。
我们从第三列的 y {4 2 2 } 和第三行的 {5 8} 中删除

注意我没有计算总和。只是与第 1 行的区别

因此，如果我们对除 1 之外的每一行进行概括。（如果您不需要总和，则根本不计算第 1 行）

对于 nxn 矩阵 M

延迟第 1 行 = 0；

对于 r = 2 到 r < n

对于 i=1 到 i <= r，并且 j=1 到 j < r（所以我们不计算 elemtn M(r,r) 两次）

增量行 r = 增量行 (r-1) + sum M(r, i) + sum M(j, r) - sum M(r, ni) - sum M(nj, r)

小于第 1 行的行将是负数。你可以只保留你所看到的最小的行增量，你会知道哪个 decomp sum 是最小的。

这有意义吗？

# java - 如何在 Selenium Webdriver 中进行参数化？

> ID：10397117
> 
> 赞同：0
> 
> 时间：2012-05-01T11:37:05.090
> 
> 标签：java, xml, junit, webdriver, testng

如何在 Selenium 2 (WebDriver) 中进行参数化？我使用 Eclipse 和 maven 插件，我以前没有使用 Selenium Webdriver 的经验。当我用谷歌搜索它时，每件事都会显示关于 testNG 和 JUnit。有什么方法可以让我们参数化 Webdriver？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T10:34:11.057

在这里，我提供了一个可能有用的测试用例

```
 package pac1;
 import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.Wait;
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
  import javax.xml.parsers.DocumentBuilderFactory;
 import org.w3c.dom.*;

public class test extends sut  {
static WebDriver driver;
static Wait<WebDriver> wait;
  public static boolean run(WebDriver driverArg, Wait<WebDriver> waitArg)
{
    driver = driverArg;
    wait = waitArg;
   // Run all the methods and return false if any fails
    return (test1() );
                  } 
   private static boolean test1()
   {

  driver.get("https://accounts.google.com");

    try {
        File file = new File("emaildata.xml"); //file location should be specified correctly put your xml in the same folder of the source code.
        // Prepare XML
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document document = db.parse(file);
        document.getDocumentElement().normalize();
        NodeList emailNodeElementList = document.getElementsByTagName("test");//test is the name of the child tag 
        for(int j=0;j<emailNodeElementList.getLength(); j++)//loop for the multiple data
    {
       String client = "The username or password you entered is incorrect. ?";
        Element emailNodeElement = (Element)emailNodeElementList.item(j);
        NodeList details = emailNodeElement.getChildNodes();
        String emailAddress=((Node) details.item(0)).getNodeValue();
        System.out.println("email :" + emailAddress);//it just prints which email is going to be parsed
        WebElement element = driver.findElement(By.cssSelector("body"));
            boolean feedBack = driver.findElement(By.cssSelector("body")).getText().contains(client);
            boolean feedbackVisible = element.isDisplayed();

    WebElement e1 = driver.findElement(By.id("Email"));//getting the location from the web
    e1.sendKeys(emailAddress);//sending keys to the server
    WebElement e3 = driver.findElement(By.id("signIn"));
    e3.click();

    if(feedBack==true){
        System.out.println(client+ "is present");
        if(feedbackVisible==true){
            System.out.println(client+ "is visible");
        }
        else{
            System.out.println(client+ "is not visible");
        }

    }
    else{
        System.out.println(client+ "is not present");

    }
    }
  }
 catch (Exception e) {e.printStackTrace();}

  return true;
  }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:16:50.013

```
@Parameters({ "first-name" })
@Test
public void testSingleString(String firstName) {
  System.out.println("Invoked testString " + firstName);
  assert "Cedric".equals(firstName);
} 
```

在此代码中，我们指定 Java 方法的参数 firstName 应接收名为 first-name 的 XML 参数的值。此 XML 参数在 testng.xml 中定义：<-- ... -->

更多详情，请访问：http: [//testng.org/doc/documentation-main.html#parameters](http://testng.org/doc/documentation-main.html#parameters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T20:50:59.670

我将做出假设 - 您想将一些参数传递给 Webdriver。这可以通过两种方式完成：

1.  制作扩展 Webdriver 的类并使其构造函数具有您需要传递的参数。然而，这是一种**艰难**的方式，因为您必须从 webdriver 实现/覆盖所有（需要的）函数：

    ```
    public class MyWebdriver extends Webdriver{
          private String theParameter;

         public MyWebdriver(String parameter){
           //... initialize the Webdriver

           //store the parameter
           theParameter = parameter
    } 
    ```

2.  制作您自己的包装器，其中将包含 WebDriver 的实例。这很**容易**（-ier）。例如：在我自己的测试中，我需要告诉 Webdriver 我正在测试哪个环境。所以我为环境创建了自己的类：

    ```
    public class Environment{
      private String baseUrl;
      public enum NameOfEnvironment {DEV, ACC}
      private NameOfEnvironment environment;

      public Environment(NameOfEnvironment envName){
         environment = envName;
      }

      public String getBaseUrl(){
          switch (environment){
             case DEV: baseUrl = "https://10.10.11.12:9080/test/";
                       break;
             case ACC: baseUrl = "https://acceptance.our-official-site.com";
                       break;
          }
        return baseUrl;
      }
     } 
    ```

然后我有自己的 WebDriver 包装器，我在其中初始化它是这样的：

```
public class TestUI{
      private Webdriver driver;
      private Environment env;

   public TestUI(Environment e){
       this.env = e;
       driver = new FirefoxDriver;
       driver.get(env.getBaseUrl());
   }
} 
```

在测试中：

```
 public class TestCases{

   public static final Environment USED_ENVIRONMENT = new Environment(Environment.NameOfEnvironment.ACC);

 @Test
 public void testSomething(){
    testUI test = new testUI(USED_ENVIRONMENT);
    //.. further steps
 }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:23:48.287

```
public void property(){
    try {

        File file = new File("login.properties");
        FileInputStream fileInput = new FileInputStream(file);
        Properties properties = new Properties();
        properties.load(fileInput);
        fileInput.close();

        Enumeration enuKeys = properties.keys();
        while (enuKeys.hasMoreElements()) {
            String key = (String) enuKeys.nextElement();
            String value = properties.getProperty(key);
            driver.findElement(By.id(key)).sendKeys(value);
            System.out.println(key + ": " + value);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

并从属性文件中传递值，使用 property(); 在主班。并执行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T06:47:40.133

我的建议是尝试使用一个测试框架（TestNG 或 Junit），它提供了比参数化更多的功能。可能在开始时设置框架的一点努力会在您的测试代码增长时节省大量精力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-01T15:07:33.450

```
/* You can pass parameters by creating two classes.
The first class, which you can call Main Class, will be public static void.
It will contain code such as:
*/
WebDriver driver = new FirefoxDriver();
driver.get("https://www.google.com");
Parameters id = new Parameters();   //this is referring to second class
driver.findElement(By.name("q")).sendKeys(id.x);
//****************************************************************
//this is the second class [separate page] - here you can declare int or string varibale as public [so you can share them with other class while defining them]  - 
//when you make this class - don't need to add public static void

public String x = "username"
//if you look at the first page, I'm passing this string in the main script 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-01T04:08:07.527

```
public class ReadExcel {
       public String readData (String strSheetName, int strRowNo, int strCellNo) throws Exception {

              FileInputStream fis = new FileInputStream("D:\\Selenium\\TestData.xlsx");
              Workbook wb = WorkbookFactory.create(fis);
              Sheet sh = wb.getSheet(strSheetName);
              Row rw = sh.getRow(strRowNo);
              String val = rw.getCell(strCellNo).getStringCellValue();

              return val;

              }

} 
```

# algorithm - 究竟什么是增广路径？

> ID：10397118
> 
> 赞同：49
> 
> 时间：2012-05-01T11:37:06.647
> 
> 标签：algorithm, data-structures, graph, network-flow

在谈到 时`computing network flows`，[算法设计手册](http://www.algorist.com/)说：

> 传统的网络流算法基于**增广路径**的思想，反复寻找从 s 到 t 的正容量路径并将其添加到流中。可以证明，当且仅当它不包含增广路径时，通过网络的流是最优的。

我不明白是什么`augmenting paths`。我用谷歌搜索，发现：

*   [Wolfram 中的增强路径](http://mathworld.wolfram.com/AugmentingPath.html)

*   [Wiki 中的流网络](http://en.wikipedia.org/wiki/Flow_network)

但他们都引用了上面的报价。

谁能真正清楚地解释什么是 a `augmenting path`？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-01T11:41:23.710

增广路径是一条简单的路径 - 一条不包含循环的路径 - 仅使用从源到汇的具有正容量的边通过图。

所以上面的陈述在某种程度上是显而易见的——如果你找不到从源到汇的只使用正容量边的路径，那么流量就不能增加。

顺便说一句，该陈述的证明并不那么容易。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T10:57:44.987

增加意味着增加——使更大。在给定的流网络`G=(V,E)`和流`f`中，增广路径是残差网络中从到到`p`的简单路径。根据 的定义，我们可以在不违反约束的情况下将增广路径边缘的流量增加一个容量，无论和是在原始流量网络中的哪一个。此外，我们可以在增广路径 p 中增加每条边上的流量的最大量称为。证明可以在 thomas h 的算法导论中找到。科门等...`source s``sink t``Gf``residual network``(u,v)``Cf(u,v)``(u,v)``(v,u)``G``residual capacity of p`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-29T03:12:42.703

你如何找出从源到汇的增广路径？使用 BFS 的修改版本。您从源执行 BFS 直到到达接收器，并且仅当边缘具有剩余容量时才遍历边缘（即对于该边缘，其最大容量 - 电流 > 0）。对于从源到汇的这条路径，您保持最小剩余容量，这是您可以通过该路径的最大流量。了解这个想法的高级代码片段：

```
bool maxFlowAchieved = false;
int maxFlow = 0;  // keeps track of what is the max flow in the network
while(!maxFlowAchieved)
{
    //BFS returns collection of Edges in the traversal order from source to sink
    std::vector<Edge*> path = BFS(source, sink); 
    maxFlowAchieved = path.size() == 0;  // all paths exhausted
    if(maxFlowAchieved)
        break;
    // traverse each edge in the path and find minimum residual capacity
    // edge->residual = edge->maxCapacity - edge->currentflow
    int allowedFlow = GetMinResidualOnPath(path);
    // Now add additional flow to each edge in the path. 
    // i.e. for each edge in path, edge->currentflow += allowedFlow
    // clearly, edge->currentflow + allowedFlow <= edge->maxCapacity
    SaturatePath(path, allowedFlow);
    maxFlow += allowedFlow;
}

return maxFlow; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-10T04:48:22.293

迭代地查找从源到汇的流的过程。例如，在 Ford-Fulkerson 算法的情况下，最初所有边上的所有流都为零。在迭代中，我们获取每条路径/边的值，引导我们找到称为增广路径的流。

# python - 为什么 Python 元组中列表的 += 会引发 TypeError 但仍要修改列表？

> ID：10397121
> 
> 赞同：16
> 
> 时间：2012-05-01T11:37:29.177
> 
> 标签：python

我刚刚遇到了一件很奇怪的事情。

```
>>> t = ([],)
>>> t[0].append('hello')
>>> t
(['hello'],)
>>> t[0] += ['world']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment
>>> t
(['hello', 'world'],) 
```

为什么它升起`TypeError`却改变了`list`内部`tuple`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T11:46:38.353

正如我在评论中开始提到的那样，`+=`实际上*就地*修改了列表，然后尝试将结果分配给元组中的第一个位置。从[数据模型文档](http://docs.python.org/reference/datamodel.html#emulating-numeric-types)：

> 调用这些方法来实现增强的算术赋值（+=、-=、*=、/=、//=、%=、** =、<<=、>>=、&=、^=、|=）。这些方法应该尝试就地执行操作（修改 self）并返回结果（可能是但不一定是 self）。

`+=`因此等价于：

```
t[0].extend(['world']);
t[0] = t[0]; 
```

所以就地修改列表不是问题（1.步骤），因为列表是可变的，但是将结果分配回元组是无效的（2.步骤），这就是引发错误的地方。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-01T11:56:16.017

这是在[http://bugs.python.org/issue11562](http://bugs.python.org/issue11562)上。

# c# - C# 中的 AES 加密，Java 中的解密

> ID：10397127
> 
> 赞同：0
> 
> 时间：2012-05-01T11:38:15.700
> 
> 标签：c#, java, aes

我参考了[这个](http://forums.asp.net/t/1331002.aspx/1)关于 AES 加密/解密的来源，并在我的 C# 项目中使用了代码

我用我定义的所有参数在 C# 中加密了一个文本。在我的学校项目中，文本被发送到 Android 客户端，解密并显示在屏幕上。我搜索了 Java AES 解密，但没有一个使用此类参数，例如在 C# 中，因为密钥是自动生成的。我也在这里看到了一些类似的问题，但仍然没有得到解决方案。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:20:15.577

按照这篇文章很好： http: [//www.codeproject.com/Questions/304187/how-to-create-password-encrypt-decrypt-in-csharp](http://www.codeproject.com/Questions/304187/how-to-create-password-encrypt-decrypt-in-csharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:46:30.753

在 sun.security 中有一些与加密和解密相关的类，其中一些与 AES 相关（如 AES128/256），看看这篇**[文章](http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.htmlhttp://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html)**

# nhibernate - 包含 ilist nhibernate

> ID：10397128
> 
> 赞同：1
> 
> 时间：2012-05-01T11:38:20.317
> 
> 标签：nhibernate, fluent-nhibernate

我有一堂课：

```
public class Author : Entity
{
    public virtual string ForeName { get; set; }
    public virtual string LastName { get; set; }

    public Author() { }
} 
```

另一个类 X 包含：

```
public virtual IList<Author> Authors { get; set; } 
```

在 Author 中重写 Equals 方法是确定 X 是否已包含 Author 的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:08:48.083

如果你有作者列表，对我来说最好的搜索方法是字典：

```
var auditors = list.ToDictionary<IdType, Author>(key => key.Id, value => value)
Auditor auditor;
if(auditors.ContainsKey(key))
{
   auditor = auditors[key];
} 
```

或者

```
Auditor auditor;
if(auditors.TryGetValue(key, out auditor))
{
   ...
} 
```

# mysql - 从 B 列的 A 列中查找某个单词

> ID：10397129
> 
> 赞同：0
> 
> 时间：2012-05-01T11:38:36.503
> 
> 标签：mysql

我在网上搜索过，但没有找到适合我的正确答案。

我有 2 个表，其中两个表都包含“文件名”列。
表 1 - A 列将具有文件名，例如：dad.txt
表 2 - A 列将具有文件的完整路径，例如：C:\example\dad.txt

我想运行一个查询来检查表 1 中的文件名与表 2 中的所有值 - 列 A（具有完整路径）并显示匹配项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:56:43.413

如果使用“LIKE”语法有什么问题吗？

尝试

```
WHERE table2.columnA LIKE CONCAT('%', table1.columnA) 
```

或者尝试 MATCH AGAINST 语法。

# java - 颜色混合 RGB 模型：透明度

> ID：10397131
> 
> 赞同：0
> 
> 时间：2012-05-01T11:38:43.950
> 
> 标签：java, colors, processing

我正在研究一些过去的试卷，并得到以下问题：

> 创建一个处理草图，以三种原色（红色、绿色、蓝色）中的每一种创建相似的形状。使用 50% 的透明度重叠这些形状以形成辅助颜色（黄色、洋红色、青色）。

我了解如何创建二次色（即混合两种原色），但无法弄清楚如何通过叠加和透明度来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:45:05.417

如果将绿色 (rgb 0,1,0) 以 50% 的透明度覆盖在红色 (rgb 1,0,0) 上，则会得到 rgb 颜色 (0.5, 0.5, 0)，它是深黄色。

你为什么得到 (.5 .5 0) ？好，

```
red:   1*50% + 0*50% = 0.5
green: 0*50% + 1*50% = 0.5
blue:  0*50% + 0*50% = 0.0 
```

# c# - 不显示动态控件

> ID：10397136
> 
> 赞同：3
> 
> 时间：2012-05-01T11:39:23.890
> 
> 标签：c#, .net, winforms, dynamic, controls

我正在尝试将动态标签分组到彼此非常接近的位置，但是当我这样做并在标签中输入文本时，它们在我运行代码时不会显示。它什么也没有显示，就好像它没有打印一样。我想知道我可以做些什么来将动态标签分组在一起。

创建的第一个动态标签：

```
Label l = new Label();
System.Drawing.Point l0 = new System.Drawing.Point(15, 48 + z);
l.Location = l0;
l.Text = textReader.Value.ToString();
l.AutoSize = true;
l.MaximumSize = new Size(120, 50);
z+= 35; 
```

创建的第二个动态标签：

```
System.Drawing.Point l1 = new System.Drawing.Point(65, 48 + x);
l2.Location = l1;
l2.Text = textReader.Value.ToString();
l2.AutoSize = true;
l2.MaximumSize = new Size(120, 50);
x += 35; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:45:51.397

您必须将控件添加到窗体。

```
Form1.Controls.Add(l);
Form1.Controls.Add(l2); 
```

# html - HTML5 preloaders under 10k that also account for scripts?

> ID：10397142
> 
> 赞同：1
> 
> 时间：2012-05-01T11:39:48.627
> 
> 标签：html, preloader

I'm trying to create a preloader for my site that would account for all assets, not just binary images and is under 10k in code. Before I try and reinvent the wheel can anyone share their favourrote loading strategies and/or point me to any good, lightweight HTML5 preloaders online?

Came across this jQuery plugin, but I think it is only for images and also for images that are 'below the fold', ie not part of the visible page before scrolling. [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

As far as preloading just images, would one approach be to simply use javascript to write out the image tags inside a hidden div?

```
//the_images is array of images created in your head

//inside hidden div where you want images to appear
<div id="imageDiv" style="display:none;">
<script>
for (var i=0; i<numImages; i++)
        {
            document.write('<img src="' + the_images[i] + '" alt="" class="foo"/>');
        } 
</script>
</div> 
```

# php - 嵌套还是不嵌套？MVC 控制器 (CodeIgniter)

> ID：10397144
> 
> 赞同：0
> 
> 时间：2012-05-01T11:39:52.383
> 
> 标签：php, codeigniter, hierarchical, codeigniter-routing

**背景：**

我在理解如何在 MVC 架构中最好地使用控制器时遇到了一些麻烦。

我有一个遵循此 URL 方案的 webapp：

*   `/`- 主要指标
*   `/static-page`- 静态页面
*   `/categories`- 特定类别的索引
*   `/categories/users`- 特定类别用户的索引
*   `/categories/users/id#/user-name`- 特定类别的特定用户
*   `/categories/event-type-A`与特定类别相关的事件索引
*   `/categories/event-type-A/id#/event-name`- 特定类别的特定事件
*   `/categories/event-type-B`与特定类别相关的事件索引
*   `/categories/event-type-B/id#/event-name`- 特定类别的特定事件

*注意：此 URL 结构类似于 StackOverflow 的，`event-name`如果存在格式错误的 URL（错误的 s）会自动更正`id#`。

**问题：**

由于`categories`、`users`和`event-type`s 每个都有与之相关的独特功能（即编辑用户、操作事件等），它们都是自己的控制器（对吗？）。由于`event-type-A`和`event-type-B`非常相似，它们共享从一个`events`类扩展的通用功能。

您如何建议我组织我的控制器，使其遵循 OOP 和 MVC 设计中的“标准实践”？

我目前有一个`Pages`用于我的静态页面的类，并且我期望有一个`categories`类调用一个`users`类，`event-type-A`并且`event-type-B`类（如上所述）是一个`events`类的扩展......但是从这里我不确定如何最好继续。

任何简单/伪代码示例将不胜感激。

**附加信息：**

仅供参考：我正在使用 PHP/MySQL。我一直在尝试通过编写自己的框架来学习 MVC，但最近切换到了 CodeIgniter。话虽如此，CodeIgniter 特定的解决方案或通用的 MVC 解决方案就足够了。

**更新：**

正如下面[Ako](https://stackoverflow.com/users/382827/ako) [提到](https://stackoverflow.com/a/10402960/102067)的，我绝对可以将它们`events`组合成一个控制器，然后从中`type`生成两个。我只是对如何实际设置每个控制器（定义哪些方法等）以使它们正常工作感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:11:57.703

看起来[这个答案](https://stackoverflow.com/a/6091913/102067)提供了一个令人满意的解决方案。

在本质上：

> 需要时使用**HMVC**加载必要的 MVC 三元组。

我以前从未听说`HMVC`过，但显然它允许我指定何时调用某些 MVC 三元组，这最终将使我能够控制何时调用不同的控制器。这将允许每个部分（`categories`、`events`、`types`等）充当独立的模块，这些模块具有`index`可以调用的自己的页面，但也可以提供根据需要提供更精细数据的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:16:43.823

改变`/categories/event-type-A`and `/categories/event-type-B`to`/categories/events/type`怎么样？哪里`type`可能是其中一个`A`或`B`（或类似的东西）？

# html - Regexp matching html tag

> ID：10397146
> 
> 赞同：0
> 
> 时间：2012-05-01T11:39:52.650
> 
> 标签：html, regex, tags, multiline

I have following regex:

```
^(?:(?!<(\w+)(\s+(\w+)\s*\=\s*(\'|")(.*?)\\4\s*)*\s*>).)*$ 
```

And I have textbox where user can type JavaScript code so regex should match things like:

```
if ( i < html > 0 ) || ( j > 10 ) 
```

and it works but only for single line but it must work for multiline

btw. I test regex on this page: [http://www.zytrax.com/tech/web/regex.htm#experiment](http://www.zytrax.com/tech/web/regex.htm#experiment)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T02:47:18.147

多行输入失败的原因是点 ( `.`) 默认情况下不匹配换行符。您可以通过添加`(?s)`到正则表达式的前面以将其置于单行模式（在某些情况下也称为 DOTALL 模式，因为它使点能够匹配*包括*换行符在内的所有内容）来修复它。

其他响应者提到的多行模式可能与您的情况无关。它的作用是允许`^`和`$`锚点匹配单个行的开头和结尾以及整个字符串的开头和结尾。

您说您在 ASP.NET RegularExpressionValidator 中使用它，这带来了另一个潜在问题。如果验证器设置为在客户端和服务器上进行验证，那么将由 JavaScript 正则表达式来完成工作，而不是 .NET。JavaScript 不支持 Singleline/DOTALL 模式，因此您需要将正则表达式中的点替换为匹配所有字符的其他内容；大多数人使用`[\s\S]`（任何空白字符或任何*非*空白字符）。

这是生成的正则表达式，包括引用属性值的更强大的习语：

```
^(?:(?!<\w+(?:\s+\w+\s*\=\s*(['"])(?:(?!\1).)*\1)*\s*>)[\s\S])*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:56:01.073

如果是 javaScript，您将在您的正则表达式中使用 m 多行修饰符：

你可以在这里测试它是否有效： [http ://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:57:43.343

所有正则表达式引擎都有一个匹配[multi-line](http://www.regular-expressions.info/anchors.html)的选项。由于您的问题没有提及您使用的是哪个引擎，因此要进一步帮助您并不容易。

# ruby-on-rails - S3 temporary signed url with custom header without modifying object metadata to disk

> ID：10397147
> 
> 赞同：3
> 
> 时间：2012-05-01T11:40:00.490
> 
> 标签：ruby-on-rails, ruby, amazon-s3, amazon-web-services

I have a bucket with arbitrarily named files and a ruby script that generates a signed URL that expires in 2 days but I need to add a content disposition header to correct the file name to the desired format.

abritrarily (with a primary key from a database) to prevent filename conflict

is it possible to change the URL to make it add the content disposition header without modifying the files `content-disposition` header and saving it on the bucket?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:35:22.050

如果您使用 AWS SDK for Ruby 中 AWS::S3::S3Object 类的实例方法url_for [(](http://aws.amazon.com/sdkforruby/) [)](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html)为[您的](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method)[Amazon S3](http://aws.amazon.com/s3/)对象生成预签名 URL ，则可选哈希允许您指定*用于生成URL*，其中包括所需的标头：`options`*`content-disposition`*

 *> : **response_content_disposition** (String) — 在返回的 URL 上执行 HTTP GET 时设置响应的 Content-Disposition 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-23T16:21:08.480

如果有人正在寻找 JavaScript 示例：

```
s3.getSignedUrl(
  'getObject',
  {
    Bucket: 'foo',
    Key: 'bar',
    ResponseContentDisposition: 'attachment; filename="bar"'
  },
  (error, signedURL) => {
    console.log(signedURL);
  }
); 
```*

# javascript - Marker is not being displayed on map

> ID：10397149
> 
> 赞同：0
> 
> 时间：2012-05-01T11:40:13.510
> 
> 标签：javascript, html, google-maps-api-3

[http://pastebin.com/hGGGUL3a](http://pastebin.com/hGGGUL3a)

Is there any idea why this code doesn't show the marker? Reason i have the marker code in a separate function is due to future changes where the button will obtain new data from a database thus update.

Many Thanks in Advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:34:46.433

好吧，它根本不起作用，不显示地图。原因是第 23 行：

```
 }); 
```

到达那里后，该行：

```
 marker = new google.maps.Marker({position: google.maps.LatLng(52.907135, -1.093140),
            map: map
        }); 
```

应该：

```
 marker = new google.maps.Marker({position: new google.maps.LatLng(52.907135, -1.093140),
            map: map
        }); 
```

# iphone - Infinite Scrolling - setContentOffset: stops deceleration of UIScrollView

> ID：10397150
> 
> 赞同：6
> 
> 时间：2012-05-01T11:40:15.887
> 
> 标签：iphone, ios, objective-c, uiscrollview, scrollview

I am creating an iPhone app with a large, 360 degree, panorama image. The panorama is a CATiledLayer in a UIScrollView.

I am attempting to implement infinite scrolling on the image (horizontal only). I have done this by subclassing UIScrollView and implementing setContentOffset: and setContentOffset:animated: and this works perfectly when the user is dragging the scrollview. However, when the user has lifted their finger and the scrollview is decelerating, changing the contentOffset causes the deceleration to stop instantly.

```
- (void)setContentOffset:(CGPoint)contentOffset 
{    
    CGPoint tempContentOffset = contentOffset;

    if ((int)tempContentOffset.x >= 5114)
    {
        tempContentOffset = CGPointMake(1, tempContentOffset.y);
    }
    else if ((int)tempContentOffset.x <= 0)
    {
        tempContentOffset = CGPointMake(5113, tempContentOffset.y);
    }

    [super setContentOffset:tempContentOffset];    
} 
```

Is there any way to change the contentOffset without affecting deceleration?

It was suggested [here](https://stackoverflow.com/a/1494022/1367622) that overriding setContentOffset: (not setContentOffset:animated:) fixes this issue, but I can't seem to get it working.

I have also tried scrollRectToVisible:animated: with no success.

Any ideas on how to fix this problem would be greatly appreciated. Thanks!

**EDIT:**

Code for scrollViewDidScroll:

```
-(void)scrollViewDidScroll:(PanoramaScrollView *)scrollView
{
    [panoramaScrollView setContentOffset:panoramaScrollView.contentOffset];
} 
```

I also tried this:

```
-(void)scrollViewDidScroll:(PanoramaScrollView *)scrollView
{
    CGPoint tempContentOffset = panoramaScrollView.contentOffset;

    if ((int)tempContentOffset.x >= 5114)
    {
        panoramaScrollView.contentOffset = CGPointMake(1, panoramaScrollView.contentOffset.y);
    }
    else if ((int)tempContentOffset.x == 0)
    {
        panoramaScrollView.contentOffset = CGPointMake(5113, panoramaScrollView.contentOffset.y);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-31T19:23:11.013

代替

```
[scrollView setContentOffset:tempContentOffset]; 
```

利用

```
scrollView.contentOffset = tempContentOffset; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:01:20.090

我通过解决方法解决了这个问题。我创建了一个具有 3 个全宽全景图的全景图（不会对性能产生太大影响，因为我使用的是`CATiledLayer`），并将`decelerationRate`属性设置为`UIScrollViewDecelerationFast`. 因此，在减速停止之前，用户无法滚动太多，如果在左侧或右侧全景图像中减速停止，则内容偏移量将变回中间图像。这具有无限滚动的外观，这是我能想到的最佳解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-19T16:57:20.317

我最近在做同样的无限滚动，无意中找到了解决方案：

只需设置`bounces=YES`, `alwaysBounceHorizontal=YES`or/and `alwaysBounceVertical=YES`（取决于您滚动到的方向）。

就是这样，这对我有用。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T18:59:31.997

我会尝试使用 UIScrollViewDelegate 协议方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView; 
```

当用户滚动时调用它（即使它正在减速）

在里面我会改变 contentoffset

# java - How to find a field in a JSF page that is connected with an AJAX push server with Selenium?

> ID：10397152
> 
> 赞同：2
> 
> 时间：2012-05-01T11:40:20.000
> 
> 标签：java, jsf, testing, selenium, automated-tests

I am trying to perform some automated tests on a JSF page that is already deployed on the internet and i cannot modify currently.

I know how the source looks like and i see that some of the fields do not have id or name, this is how its source looks like:

```
<h:form rendered="#{messagePusher.userName == null}"> 
               <h:messages style="color: red"/>
               Nickname:                       
                <h:inputText id="inputName" value="#{messagePusher.userName}" required="true" requiredMessage="Enter your name!!!"/>
                <br/>
                <h:commandButton action="#{messagePusher.renderChat()}" value="ENTER CHAT"/>               

        </h:form>

        <h:panelGrid id="chatpanel" columns="1" border="0" rendered="#{messagePusher.userName != null}">

            <br/>  
            <h:dataTable value="#{chatMemoryResourse.messages}" var="current">
                    <h:column>
                        <h:outputText value="#{current.message} #{current.sentDateNTime}"
                                      style="color: blue"/>
                    </h:column>
                </h:dataTable>
                <h:form> 
                    <h:messages style="color: red"/>
                    <h:inputText id="input" value="#{messagePusher.messageText}" required="true" requiredMessage="VALUE REQUIRED!"/>
                    <br/>
                    <h:commandButton action="#{messagePusher.writeMessage()}" value="Send message" />
                </h:form>

        </h:panelGrid> 
```

Because there is no way for me to give the ids to selenium i decided to manually inspect the elements in the browser and use the ids that the browser tells me. So when i analyze the page source from my chromes console i see this things like this:

> input id="j_idt8:inputName" name="j_idt8:inputName" type="text"

So far so good. I start writing some selenium test for the first of the fields and when i test it seem to work.

```
selenium.start();
selenium.open(BASE_URL);    
selenium.type("j_idt8:inputName", "Robot"); 
selenium.waitForPageToLoad(MAX_WAIT_TIME_IN_MS);
selenium.click("j_idt8:_t12");
... 
```

The problem is in the next field it doesn't detect it. I dont know why. I get this:

> Exception in thread "main" com.thoughtworks.selenium.SeleniumException: ERROR: Element j_idt17:input not found at com.thoughtworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:112) at com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:106) at com.thoughtworks.selenium.DefaultSelenium.type(DefaultSelenium.java:317) at chattester.ChatTester.main(ChatTester.java:24)

So as you see this is some kind of chat room, the first input sets nickname and the second is used to input test into the chat. The page has 2 forms when the first value is entered the first form hides and the second appears(the page is refreshed).

The second form has an input field that sends a message to a server and the server uses ajax reverse technology to update all clients. I don't know if is there some kind of limitation with Selenium when interacting with AJAX.

Here i paste the rest of the test code the only thing that works is when testing the first form:

> public class ChatTester {
> 
> ```
> private static final String MAX_WAIT_TIME_IN_MS = "60000";
> private static final String BASE_URL = "http://somedemoapplication/";    
> 
> public static void main(String[] args) {
> 
>     Selenium selenium = new DefaultSelenium("localhost", 4444, "*firefox", BASE_URL);
>     selenium.start();
>     selenium.open(BASE_URL);    
>     selenium.type("j_idt8:inputName", "Robot");         
>     selenium.click("j_idt8:_t12");
> 
>         selenium.type("j_idt17:input", "Selenium testing in proggress....");  
>         selenium.click("j_idt17:_t20");
>         selenium.waitForPageToLoad(MAX_WAIT_TIME_IN_MS);
> 
>     selenium.waitForPageToLoad(MAX_WAIT_TIME_IN_MS);
>     selenium.type("j_idt17:input", "Test over!");  
>         selenium.click("j_idt17:_t20");
>     selenium.stop();
> 
> }     } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:36:01.473

试试这个代码：

```
Selenium selenium = new DefaultSelenium("localhost", 4444, "*firefox", BASE_URL);
selenium.start();
selenium.open(BASE_URL);    
selenium.type("j_idt8:inputName", "Robot");         
selenium.click("j_idt8:_t12");
selenium.waitForCondiditon("selenium.isElementPresent('j_idt17:input')", MAX_WAIT_TIME_IN_MS);
selenium.type("j_idt17:input", "Selenium testing in proggress....");  
selenium.click("j_idt17:_t20");
selenium.waitForCondiditon("selenium.isElementPresent('j_idt17:input')", MAX_WAIT_TIME_IN_MS);
selenium.type("j_idt17:input", "Test over!");  
selenium.click("j_idt17:_t20");
selenium.stop(); 
```

您也可以等待 ajax，而不是等待元素出现：

```
selenium.waitForCondition("selenium.browserbot.getCurrentWindow().jQuery.active == 0;", MAX_WAIT_TIME_IN_MS); 
```

关于 xpath 和 css 的一些材料：[w3 xpath 规范](http://www.w3.org/TR/xpath/)、[xpath 示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)、[CSS 选择器](http://www.w3.org/TR/selectors/)

# makefile - Cross platform technique for overloading a makefile rule for the same target

> ID：10397156
> 
> 赞同：1
> 
> 时间：2012-05-01T11:40:27.543
> 
> 标签：makefile

**BACKGROUND**

We use Makefiles as one part of our regression suite. We have some default rules:

```
%.tmp_expect: ...
    @echo "Rule that produces results from the current tool version"

%.tmp_expect_filter: %.tmp_expect
    @echo "Take $*.tmp_expect and remove content specific to the machine/date"

%.tmp_expect_filter_sort: %.tmp_expect_filter
    @echo "Rule to sort $*.tmp_expect_filter" 
```

Then these rules are used by the top level rules:

```
%.do: %.tmp_expect_filter_sort
    @echo "Create output using current version and diff against expected output"
    @diff $< $*.expect

%.genexpect: %.tmp_expect_filter_sort
    @echo "Generate 'goldstandard' expected output"
    @cp $< $*.expect 
```

The 'genexpect' rule is called once for a test case and it generates what we call the 'goldstandard' output for the test. As development continues, the 'do' rule will check that the current version generates the same output as the 'goldstandard'.

All of these rules are stored in their own special file "Make.Test" and then we include that file into the Makefiles in the directory with the regression tests.

**PROBLEM**

Sometimes we need a slightly different output than provided by the default %.tmp_expect. We do this by having the local Makefile implement it's own %.tmp_expect rule. This works on all platforms we're interested in: Windows, Linux & Solaris.

If, however, we don't want the output to be sorted, I would have thought that we could add a rule such as:

```
%.tmp_expect_filter_sort: %.tmp_expect_filter
    @cp $< $@ 
```

This is where things become quite strange. Depending on the platform and if this rule appears before or after the inclusion of the 'Make.Test' file, it may or may not be selected.

So my questions are:

1.  How does make decide which rule to use for a given target?
2.  How should I write my rules so that I have control over which ones are selected?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:56:16.897

1) 从[GNU Make 手册](http://www.gnu.org/software/make/manual/make.html#Pattern-Match)中，如果多个模式规则与目标匹配（并且它们匹配的部分长度相同），Make 将选择第一个出现的规则。因此，如果您`include Make.test`在特殊规则之前，则该`Make.test`规则将优先。

我不知道为什么您的结果将取决于平台，除非您的平台具有不同版本的 Make。

2）[手册](http://www.gnu.org/software/make/manual/make.html#Overriding-Makefiles)提出了一种我称之为“粗鲁但有效”的方法；而不是`include Make.test`，添加此规则：

```
%: force
         @$(MAKE) -f Make.test $@
force: ; 
```

换句话说，当且仅当没有针对特定目标的本地规则时，使用 重新调用 Make `Make.test`。是的，这是*Recursive Make*；不，它不会杀了你，它只是有点效率低下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:22:12.610

我发现了一种使用最新版本的 make （从版本 3.81 开始）来执行此操作的方法。

有一个名为[.SECONDEPANSION](http://www.gnu.org/software/make/manual/html_node/Secondary-Expansion.html)的新特殊目标可与变量一起使用以帮助在规则之间进行选择。

可以更新规则以包括变量扩展作为先决条件名称的一部分：

```
%.tmp_expect_filter: %.tmp_expect
    @echo "Take $*.tmp_expect and remove content specific to the machine/date"

.SECONDEXPANSION:
%.tmp_expect_filter_sort: %.tmp_expect_filter$$($$*_FILTER_RULE)
    @cat '$<' | sort -n -t: -k 2 -k 3 > '$@' 
```

我对此的粗略理解是，目标确定后，先决条件中的$*被替换，然后第二次扩展。

例如，目标中的`bar.tmp_expect_filter_sort`,`$*`被替换为`bar`结果`%.tmp_expect_filter$(bar_FILTER_RULE)`。除非`bar_FILTER_RULE`实际设置，否则它将扩展为空，并且将使用默认规则。

要让它使用特殊规则，我们可以在本地 Makefile 中定义变量：

```
bar_FILTER_RULE=_custom
%.tmp_expect_filter_sort_custom:
    @echo My custom rule here.... 
```

第二个扩展现在会产生结果，`%.tmp_expect_filter_sort_custom`因此将使用自定义规则。

# eclipse-rcp - 使用 p2 更新几个 Eclipse-RCP 应用程序

> ID：10397160
> 
> 赞同：0
> 
> 时间：2012-05-01T11:41:18.367
> 
> 标签：eclipse-rcp, p2, auto-update

我必须准备 PC 以供离线使用。

我正在寻找一种解决方案来从中央 p2 存储库更新 PC 上的几个不同的 Eclipse-RCP 应用程序，而无需手动启动每个应用程序。

这个想法是提供一个类似于“Apple Software Update”的工具，通知用户所有可用的更新，并自动安装它们。

Eclipse-RCP 应用程序/p2 有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:00:55.067

Google for [p2 update rcp](https://www.google.com/webhp?output=search&q=p2%20update%20rcp)，第一个结果是[向 RCP 应用程序添加自我更新](http://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application)

# android - How to show Grouped/Categorized thumbnails in grid/table like layout

> ID：10397161
> 
> 赞同：6
> 
> 时间：2012-05-01T11:41:18.407
> 
> 标签：android, android-layout, android-widget

This is my first post, so please be considerate of any mistakes or lack of clarity:)

I need to show image thumbnails (in a grid/table like layout) categorized by dates, following is an illustration* of the way it has to be shown.

* * *

**Date:30 Apr 2012**

*Image1 Image2 Image3*

*Image4 Image5 Image6*

**Date:1st May 2012**

*Image1 Image2 Image3*

*Image4 Image5*

**Date:1st May 2012**

*Image1 Image2*

* * *

Based on all the looking around that I have done, I haven't found no straight forward way to do it. Following are two possible layouts that come closer, but each has some problems

*   **GridView**, don't know how can I add date/group headers in between the content, as column span is not possible.
*   **TableLayout**, though columnspan is possible but I am not sure if the desired layout can be achieved. And I read that whenever the orientation changes or app runs on a different devices, the number of rows and columns have to be computed (which is not so in grid). And what I have gathered, in TableLayout extra work needs to be done for cell level events.

An important consideration is that around 4000 thumbnails will be shown.

I have gone through some posts on stackoverflow, but none is talking about the kind of layout listed above, for example the following question is same but the answer is providing grouping in a ListView rather than grid/table like layout

Link: [Android GridView with categories?](https://stackoverflow.com/questions/7397988/android-gridview-with-categories)

Please provide some ideas. Thanks.

**As I am new user so can not upload images, hence the textual illustration, kindly bear.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T14:21:17.670

也许[StickyGridHeaders 库](http://tonicartos.github.io/StickyGridHeaders/)将是一个很好的解决方案。它将帮助您制作带有类别的网格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:35:40.280

您可以使用`scroll view with a linear layout`方向是垂直的。有两个独立的布局一个有`Textview to be the header text`另一个`layout containing three image views`。只需在运行时将这两个布局添加到滚动视图中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:45:37.453

为此，您将需要两个嵌套布局。您可能希望 ScrollView 用于顶层，并在此 ScrollView 内部为每个类别的图像设置一个 GridView。

# mysql - 优化 mysql join 列中存在大量重复数据时的 join 方法

> ID：10397168
> 
> 赞同：1
> 
> 时间：2012-05-01T11:41:46.390
> 
> 标签：mysql

我有两个表，我需要按一列连接它们并在两个表中都有索引。但是这两个表的两个列都包含重复多次的相同值。所以用于连接的列看起来像这样：

表A.column2 表B.column3

```
 1             2  
    1             2  
    1             1  
    4             1  
    4             4  
    5             3 
```

现在据我从 BNL 和 BKA 算法中了解，它们会从表 A 中一一获取行并在表 B 中查找匹配记录。但是查找第二个匹配记录没有任何意义此 A 表的行，因为该值再次为“1”，它已经具有来自对具有相同列值的 row1 执行的操作的匹配记录。
这只是浪费时间和资源。如果它可以选择表 A.column2 中的不同值，然后在表 B.column3 中查找匹配的记录，然后将它们全部组合在一起，那就更好了。
你能告诉我一些在mysql中加入操作的另一种算法，它可以做我所说的那种事情吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:02:38.087

通过使用 Distinct 将确保返回的最终列的唯一性。现在，进行左连接将确保所有来自 TableA... 但是，如果 tableB 中没有匹配的记录，则 COALESCE() 将返回值 0 而不是 null ——因此表明 tableB 文件中没有记录。

```
select TA.Column2, GROUP_CONCAT(TB.Column3 order by TB.Column3 ) As Column3Values
   from
      TableA TA
         LEFT JOIN TableB TB
            on TA.Column2 = TB.Column3
   group by
      TA.Column2 
```

从您的数据中，您应该得到类似

```
Column2  Column3Values
1        1, 2
4        1, 4
5        3 
```

# jquery - jquery-oembed-all 将 iframe 附加到 div 使页面渲染速度太慢

> ID：10397175
> 
> 赞同：0
> 
> 时间：2012-05-01T11:42:31.830
> 
> 标签：jquery, iframe, oembed

我正在使用插件 jquery-oembed-all。插件提供 oembed 功能以将外部 url 动态嵌入到站点中。

插件完成了解析 oembed 内容的所有繁重工作，然后执行以下操作：

```
oembedContainer.append(oembedData.code); 
```

> 其中**oembedContainer**是本地页面上动态生成的跨度，它将保存嵌入的获取内容，而 **oembedData.code**是获取的实际内容。

oembedData.code 也可以是 iframe，这是 youtube 和其他视频内容的常见情况。

如果我在同一页面上有很多视频，那么现在每个 iframe 都会花费大量时间来加载，并且我的页面繁忙指示符永远不会停止。我发现滚动页面也很困难，除非所有 iframe 都已完全加载。

我想知道 facebook 如何提供如此流畅的用户界面（是的，他们是 facebook。）

有什么建议，我该如何改善这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:07:08.053

我只是看了一下代码，看看为什么它很慢。

Youtube 不为 oembed 提供 JSONP 选项（[请参见此处](https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/5KuXxlLK07g)），这意味着该库无法直接通过浏览器获取 oembed。为了解决这个问题，Yahoo YQL 用于获取 OEmbed 数据并将其包装在一些 JSONP 中。YQL 需要一些时间来返回数据（我发现 1-2 秒）所以有很多请求需要很长时间。

有两种选择： 1\. 让 Youtube 将 JSONP 添加到它的 oembed 中 - 不太可能因为它被要求并且他们说因为它不是官方规范的一部分，所以他们不会支持它。2\. 更改库以返回使用 iframe 查找:) - 更有可能 - 只需在 github 上添加一张票，我会看看我能做什么。

安德鲁

# android - 有意图地在活动之间传递数据

> ID：10397176
> 
> 赞同：1
> 
> 时间：2012-05-01T11:42:33.010
> 
> 标签：android, android-activity

我的情况有点特殊，所以我在这里解释一下。我有 2 个活动，第一个有 2 个编辑和 1 个按钮，第二个只有一个按钮。当按下活动 1 中的按钮时，程序会有意地将来自文本编辑的信息发送到活动 2，并将其显示在活动 2 上。在活动 2 上，按钮只是为了返回活动 1，我这样称呼它

```
 Button next = (Button) findViewById(R.id.button2);

    Intent myIntent = getIntent();
    String nume = myIntent.getStringExtra("nume");
    String prenume = myIntent.getStringExtra("prenume");
    next.setText(nume + " " + prenume);

    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent();
            setResult(RESULT_OK, intent);
            finish();
        }

    }); 
```

我第一次在编辑中输入信息时，它们在活动 2 中显示正常，但是在我回到活动 1 并在活动 2 上的编辑中输入新值后，将显示第一次输入的值。

所以问题似乎是每次我按下按钮 1 从第二次尝试开始传递到 Activity 2 时，意图传递的编辑都不会更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T11:48:15.260

似乎使用 an`extras Bundle`会是一个更好的主意。你像这样实现它；

**活动一**

```
 Intent pass = new Intent(ACTION_NAME);
 Bundle extras = new Bundle();
 extras.putString("nume", NUME_VAL);
 extras.putString("prenume", PRENUME_VAL);
 pass.putExtras(extras);
 startActivity(pass); 
```

**活动二**

```
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     Bundle data = getIntent().getExtras();
     String nume = data.getStringExtra("nume");
     String prenume = data.getStringExtra("prenume");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T11:51:19.277

从第一个导航到第二个：

```
Button next = (Button) findViewById(R.id.button2);
next.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        Intent intent = new Intent(getApplicationContext(),Second.class);
        intent.putExtra("Tag", "Value");
        startActivity(intent);
        finish();
    }

}); 
```

第二到第一：

```
 Button previous= (Button) findViewById(R.id.button);
 previous.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        Intent intent = new Intent(getApplicationContext(),First.class);
        startActivity(intent);
    }

}); 
```

关于创建的第二个活动：

```
Intent i = getIntent();
String val = i.getStringExtra("Tag"); 
```

# c++ - 从文件循环输入流

> ID：10397179
> 
> 赞同：0
> 
> 时间：2012-05-01T11:42:38.030
> 
> 标签：c++, loops, inputstream

我试图让我的程序循环遍历文件，每次都接收大量信息。但是，在正确输入 2 行之后，无论文件的内容是什么，它总是默认为默认值。最初它是一个 eof while 循环，但我将其更改为一个 for 循环来尝试修复它。这是我的代码：

```
ifstream furniture;
furniture.open("h://furniture.txt");

for(int i=0;i<=count;i++)
{
    type=0;
    furniture>>type>>name>>number>>material>>colour>>mattress;

    switch (type)
    {
    case 1:
        {
            Item* item= new Bed(number, name, material, colour, mattress);
            cout<<"working, new bed"<<endl;
            v.push_back(item);
            cout<<"working pushback"<<endl;
            count++;

            break;
        }
    case 2:
        {
            Item* item= new Sofa(number, name, material, colour);
            cout<<"working, new sofa"<<endl;
            v.push_back (item);
            cout<<"working pushback"<<endl;
            count++;

            break;
        }
    case 3:
        {
            Item* item= new Table(number, name, material, colour);
            cout<<"working, new table"<<endl;
            v.push_back(item);
            cout<<"working pushback"<<endl;
            count++;

            break;
        }
    default:
        {
            cout<<"Invalid input"<<endl;
            type=0;
            break;
        }
    }
} 
```

我尝试了一系列不同的解决方案，但似乎都没有解决问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:45:25.220

`ifstream`如果读取失败， 's`operator>>`不会更改变量，因此`type`保持 0，因此调用默认分支。您的文件似乎存在格式错误，导致读取失败。

根据您的评论，您可能不会一直在文件中拥有所有值，您可以执行以下操作：

最好的方法是使用`getline()`读取整行，然后使用`stringstream`从行中提取值，处理过程中的可选值：

```
string line;
getline(furniture, line);
stringstream ss(line);
ss>>type>>name>>number>>material>>colour>>mattress; 
```

如果您为所有这些变量提供默认值，如果行格式错误或不包含所有变量，它们将保持默认值。

在这里使用的好处`getline()`是，如果当前行有问题，提取via`op>>`不会弄乱后续行。

# java - 客户端处理程序不会启动

> ID：10397180
> 
> 赞同：0
> 
> 时间：2012-05-01T11:42:51.003
> 
> 标签：java, windows, java-io

我正在尝试用 Java 制作一个基本的电子邮件系统。我有一个客户端连接到的服务器和一个客户端的 gui。当服务器从客户端获取新连接时，它会启动一个运行的新线程来处理所有不同的操作。问题是服务器接受新客户端但没有启动新的客户端处理程序线程运行。有什么帮助吗？

```
public class Server {
   public static Connection link;

   public static void main(String[] args) throws IOException {
      ServerSocket serverSocket = null;
      final int PORT = 1234; // Define the sockets and ports and i/o
      Socket client;
      ClientHandler handler;

      try {
         Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
         link = DriverManager.getConnection("jdbc:odbc:emails", "", "");
         System.out.println("Connected to Database . . . ");
      } catch (ClassNotFoundException cnfEx) {
         System.out.println("* Unable to load driver! *");
         System.exit(1);
      } catch (SQLException sqlEx) {
         System.out.println("* Cannot connect to database! *");
         System.exit(1);
      }

      try {
         serverSocket = new ServerSocket(PORT); // Set the server socket
      } catch (IOException ioEx) {
         System.out.println("\nUnable to set up port!"); // If failed let the
                                                         // user know
         System.exit(1); // Exit the system with error code 1
      }

      System.out.println("\nServer running...\n"); // Tell the user the server
                                                   // is running

      do {
         client = serverSocket.accept();
         // Wait for client.
         System.out.println(client);
         handler = new ClientHandler(client);
         System.out.println(handler);
         System.out.println("\nNew client accepted.\n"); // Tell the user the
                                                         // server has accepted
                                                         // a client
         System.out.println("RUNNING");
         handler.start(); // Start the handler

      } while (true); // Continuous loop
   }

   static class ClientHandler extends Thread {
      /**
 * 
 */
      private Socket client;
      private ObjectInputStream input; // Define sockets, i/o and local array
                                       // list
      private ObjectOutputStream output;

      public ClientHandler(Socket socket) throws IOException // Client handler
                                                             // constructor
      {
         client = socket;
         input = new ObjectInputStream(socket.getInputStream());// Set client
                                                                // and i/o
                                                                // stream
         output = new ObjectOutputStream(socket.getOutputStream());
      }

      public void run() {
         String userCommand = null;
         System.out.println("RUNNING CLIENT HANDLER");
         boolean quit = false;

         do {

            try {
               userCommand = (String) input.readObject();
            } catch (IOException e2) {
               // TODO Auto-generated catch block
               e2.printStackTrace();
            } catch (ClassNotFoundException e2) {
               // TODO Auto-generated catch block
               e2.printStackTrace();
            } // Receive user command

            if (userCommand.equals("SEND MESSAGE")) // If user command is to
                                                    // send a message
            {
               String username = null, recipient = null, message = null, insert, fileType = null;

               try {
                  username = (String) input.readObject();
                  recipient = (String) input.readObject(); // Receive username,
                                                           // recipient and
                                                           // message
                  message = (String) input.readObject();
                  fileType = (String) input.readObject();
               } catch (IOException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               } catch (ClassNotFoundException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               }

               insert = "INSERT INTO [emails] ([From], [To], [Message], [Attachment])"
                     + " VALUES('"
                     + username
                     + "','"
                     + recipient
                     + "','"
                     + message + "','" + fileType + "')";
               Statement statement = null;
               try {
                  statement = link.createStatement();
                  statement.executeUpdate(insert);
                  link.commit();
               } catch (SQLException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }

               try {

                  getFile(input, fileType);
               } catch (IOException ioEx) {
                  ioEx.printStackTrace();
               } catch (ClassNotFoundException cnfEx) {
                  cnfEx.printStackTrace();
               }

               System.out.println(username // Tell the user a message has been
                                           // sent
                     + " sent message to " + recipient);
            }

            if (userCommand.equals("READ MESSAGE")) // If user command is to
                                                    // read a message
            {
               String username = null; // Define local variables

               try {
                  username = (String) input.readObject();
               } catch (IOException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               } catch (ClassNotFoundException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               } // Receive the username of the current user
               Statement statement = null;
               String insert = "SELECT [Email No],[From],[Message],[Attachment] FROM [emails] WHERE To = '"
                     + username + "'";
               ResultSet rs = null;
               try {
                  statement = link.createStatement();
                  rs = statement.executeQuery(insert);
               } catch (SQLException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }

               try {
                  while (rs.next()) {
                     String from = rs.getString("From");
                     String message = rs.getString("Message");
                     String attachment = rs.getString("Attachment");
                     int emailNo = rs.getInt("Email no");
                     output.writeObject(from);
                     output.writeObject(message); // Send the username the
                                                  // message is from
                     output.writeObject(attachment);
                     output.writeObject(emailNo);
                     output.flush(); // and the message and flush the output
                                     // stream
                  }
               } catch (SQLException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }

               try {
                  output.writeObject("END");
               } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               } // Send an end message
               try {
                  output.flush();
               } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               } // Flush the output stream

               System.out.println(username // Tell the user someone is reading
                                           // their messages
                     + " reading messages.");

            }

            if (userCommand.equals("QUIT")) // If the user command is quit
            {
               quit = true; // Set quit to true
            }

            if (userCommand.equals("DELETE MESSAGE")) // If the user command is
                                                      // delete a message
            {
               int valueToDelete = 0; // Define local variables

               try {
                  valueToDelete = Integer.parseInt((String) input.readObject());
               } catch (NumberFormatException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               } catch (IOException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               } catch (ClassNotFoundException e1) {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
               } // Receive the value to delete
               Statement statement = null;
               String delete = "DELETE FROM emails WHERE [Email No] = "
                     + valueToDelete + "";
               try {
                  statement = link.createStatement();
                  statement.executeUpdate(delete);
                  link.commit();
               } catch (SQLException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }
               System.out.println("Deleted message " + valueToDelete); // Tell
                                                                       // the
                                                                       // user a
                                                                       // message
                                                                       // has
                                                                       // been
                                                                       // deleted
            }
         } while (!quit); // Run while quit is false

         System.out.println("Client Closed"); // Tell the user the client has // closed
      }

      private static void getFile(ObjectInputStream inStream, String fileType)
            throws IOException, ClassNotFoundException {

         byte[] byteArray = (byte[]) inStream.readObject();
         FileOutputStream mediaStream = null;

         if (fileType.equals("Text File"))
            mediaStream = new FileOutputStream("file.txt");
         else if (fileType.equals("Image"))
            mediaStream = new FileOutputStream("file.gif");
         else if (fileType.equals("Movie"))
            mediaStream = new FileOutputStream("file.mpeg");

         mediaStream.write(byteArray);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:00:11.453

当您实例化 ObjectInputStream 时，它将阻塞，直到客户端发送足够的标头，因此您永远无法实际运行线程...... [另请参阅](https://stackoverflow.com/questions/10388253/client-server-objectinputstream-error/10388415#10388415)

# python - 使用 R 或 Python 的二进制数据热图

> ID：10397183
> 
> 赞同：3
> 
> 时间：2012-05-01T11:43:55.143
> 
> 标签：python, r

我有一个 0 和 1 的二进制数据集，其中 0 表示不存在，1 表示存在事件。

数据集的示例如下所示：

```
events    germany    Italy 
Rain      0          1
hail      1          0
sunny     0          0 
```

我想通过从文件中读取数据以热图的形式获得该数据的红白相间的图片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:42:17.180

**编辑**：针对下面的评论，这里是一个示例数据文件（作为“data.txt”保存在磁盘上）：

```
Rain  0 0 0 0 1 0 1 0 0 1
Hail  0 1 0 0 0 0 0 1 0 0
Sunny 1 1 1 0 1 0 1 0 1 1 
```

在 python 中，我们可以读取标签并通过以下方式绘制此“热图”：

```
from numpy import loadtxt
import pylab as plt

labels = loadtxt("data.txt", usecols=[0,],dtype=str)
A      = loadtxt("data.txt", usecols=range(1,10))

plt.imshow(A, interpolation='nearest', cmap=plt.cm.Reds)
plt.yticks(range(A.shape[0]), labels)

plt.show()
import pylab as plt 
```

![在此处输入图像描述](../Images/8859155e7b8420a971648296f99ffd77.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T11:56:38.920

见`?image`。使用您的数据

```
dat <- data.matrix(data.frame(Germany = c(0,1,0), Italy = c(1,0,0)))
rownames(dat) <- c("Rain","Hail","Sunny") 
```

这让我们接近：

```
image(z = dat, col = c("white","red")) 
```

但更好地处理轴标签会很好......尝试：

```
op <- par(mar = c(5,5,4,2) + 0.1)
image(z = dat, col = c("white","red"), axes = FALSE)
axis(side = 1, labels = rownames(dat), 
     at = seq(0, by = 0.5, length.out = nrow(dat)))
axis(side = 2, labels = colnames(dat), at = c(0,1), las = 1)
box()
par(op) 
```

这使

![二进制热图](../Images/1a37c4049a504a7907f5ec75398c6967.png)

要让热图反过来，转置`dat`( `image(z = t(dat), ....)`) 并在调用中进行，在第一个和第二个调用中`axis()`更改`side`为（并将 移动到另一个调用。即：`2``1``las = 1`

```
op <- par(mar = c(5,5,4,2) + 0.1)
image(z = t(dat2), col = c("white","red"), axes = FALSE)
axis(side = 2, labels = rownames(dat2), 
     at = seq(0, by = 0.5, length.out = nrow(dat2)), las = 1)
axis(side = 1, labels = colnames(dat2), at = c(0,1))
box()
par(op) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T16:22:36.283

在 R 中使用 reshape 和 ggplot2

```
library(reshape)
library(ggplot2)

dat <- data.frame(weather=c("Rain","Hail","Sunny"), Germany = c(0,1,0), Italy = c(1,0,0))

melt.data<-melt(dat, id.vars="weather", variable_name="country")

qplot(data=melt.data,
      x=country,
      y=weather,
      fill=factor(value),
      geom="tile")+scale_fill_manual(values=c("0"="white", "1"="red")) 
```

![在此处输入图像描述](../Images/b87f11075ad5c75143fedb2a65bb11c2.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T12:00:45.013

在 R 中尝试：

```
library(bipartite)
mat<-matrix(c(0,1,1,0,1,1),byrow=TRUE,nrow=3)
rownames(mat)<-c("Rain","hail","sunny")
colnames(mat)<-c("Germany","Italy")
visweb(mat,type="None") 
```

对于红色方块和标签尺寸控制：

```
visweb(mat,type="None",labsize=2,square="b",box.col="red") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-23T10:57:39.350

可能基础 R 中最简单的解决方案是：

```
rownames(dat) = dat$weather
heatmap(as.matrix(dat[,2:3]), scale='none') 
```

...假设您的数据框被调用`dat`。热图并不漂亮，但它又快又简单。第一行不是必需的。它仅用于使天气标签显示在热图中。

# html - 文本对齐在 Safari 的“选择”元素中不起作用

> ID：10397186
> 
> 赞同：1
> 
> 时间：2012-05-01T11:44:02.550
> 
> 标签：html, css, browser, safari

我试图通过设置对齐选择元素中的文本：

```
text-align:right;
direction:rtl; 
```

不知何故，它适用于所有浏览器，包括 iPad2 上的 FF、IE、Chrome 和 Safari。在 iPhone 和 PC 上使用 safari，它会向左对齐并且无法更改。

这是 HTML：

```
<div class="field">
    <select>
        <option value="6" selected="selected">אישה מחפשת גבר</option>
        <option value="9">גבר מחפש אישה</option>
        <option value="10">אישה מחפשת אישה</option>
        <option value="5">גבר מחפש גבר</option>
    </select>
</div> 
```

CSS：

```
.field select {
    text-align:right;
    direction:rtl;
} 
```

我用谷歌搜索了一下，看到其他人有这个问题并且无处可修复。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-01T11:55:35.143

它在 PC 上的 safari 5.1.5 中正常工作

![在此处输入图像描述](../Images/6dd0b1c899dd2c80d70a37e987bedeb6.png)

# android - 在 Android 2.0+ 浏览器中使用 HTML5 Geolocation API

> ID：10397189
> 
> 赞同：4
> 
> 时间：2012-05-01T11:44:20.947
> 
> 标签：android, html, geolocation

我正在尝试在 Android 设备上将 Geolocation 与 HTML5 API 一起使用。我使用 Galaxy S LC（相当于 Galaxy S1）进行了测试。安卓版本为 2.2.1。

我已经阅读了很多关于它的主题，但我仍然没有找到解决方案。

我使用这个典型的代码进行地理定位：

`

```
<script type="text/javascript">

document.write("Trying to locate you");

if(navigator.geolocation){
    document.write("Geolocation is supported");

    navigator.geolocation.getCurrentPosition(successCallback, errorCallback,
  {
    enableHighAccuracy : true,
    timeout : 10000, // 10s
    maximumAge : 0
  }
);

function successCallback(position){
    document.write("You have been located. Latitude :" + position.coords.latitude +", longitude : " + position.coords.longitude);       
};

function errorCallback(error){
    document.write("It didn't work");
    switch(error.code){
    case error.PERMISSION_DENIED:
        document.write("Permission denied");
        break;
    case error.POSITION_UNAVAILABLE:
        document.write("Position unavailable");
        break;
    case error.TIMEOUT:
        document.write("Timeout");
        break;
    case error.UNKNOW_ERROR:
        document.write("Unknown error");
        break;              
    }
}

}
else{
    document.write("La géolocalisation n'est pas supportée par le navigateur"); 
}

</script> 
```

它在带有 Chrome 和 Opera 的 PC 上运行良好（但不适用于 Firefox）。它也适用于移动设备上的 Opera。但它不适用于 Android 浏览器。它的版本是 2.2.1。这就是发生的事情： 1\. 出现以下消息：“正在尝试定位您” “支持地理定位” 2\. 在超时（此处为 10 秒）指定的时间后，将显示一个空白页面。不调用函数 sucessCallback 或 errorCallback。

当我没有指定超时（超时=无穷大）时，如果启用了 GPS，它就可以工作。如果不是，我也会得到一个没有错误消息的空白页。

我在 Android 浏览器上尝试了这个 HTML5 地理定位测试：http: [//html5demos.com/geo](http://html5demos.com/geo)，它也不起作用。

我试过[这个代码](https://stackoverflow.com/questions/3367994/javascript-geolocation-on-android-doesnt-work)（第一个答案）。它有时有效，但我们必须等待 2 分钟才能获得该职位（如评论中所述）。

[我还尝试通过具有所有所需规范](https://stackoverflow.com/questions/2390641/android-using-html5-to-determine-geolocation-in-webview-with-javascript-api)的 Webview 来获取它，但它的功能完全相同。

[这里](http://www.mobilehtml5.com/post/1276879531/android-2-2-browser-geolocation-gotcha)据说要解决Android浏览器上的这个错误，我们只需将enableHighAccuracy指定为true，但如果没有激活GPS，仍然没有调用任何函数（sucessCallback或errorCallback）。

如果有人有解决方案，那对我来说将是一个很大的帮助。

谢谢您的帮助。

* * *

实际上空白页是由“document.write”函数引起的。我用 innerHTML 替换了它，它现在可以工作了。这意味着显示错误，调用errorCallback。

现在的问题是Android浏览器只能使用GPS（高精度）来确定位置。如果 GPS 未启用或无法获取位置（例如在建筑物内），则不会返回位置。相反，Opera 浏览器将使用中继网络（Cell-ID 方法）来确定位置（在这种情况下精度小于 150m）。

你知道如何强制 Android 浏览器使用 cell-ID 源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T02:56:11.747

像这样试试。那应该这样做。

```
<!DOCTYPE html>
<html>
<body>
<p id="demo">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Try It</button>
<script>
var x=document.getElementById("demo");
function getLocation()
  {
  if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition,showError,
          {
            enableHighAccuracy : true,
            timeout : 10000, // 10s
            //maximumAge : 0
          }
        );
    }
  else{x.innerHTML="Geolocation is not supported by this browser.";}
  }
function showPosition(position)
  {
  x.innerHTML="Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;    
  }
function showError(error)
  {
  switch(error.code) 
    {
    case error.PERMISSION_DENIED:
      x.innerHTML="User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML="Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML="The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML="An unknown error occurred."
      break;
    }
  }
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-18T16:40:37.790

Google 今年 1 月改变了 Chrome 中定位服务的行为。其中一项更改是，如果 http 连接未加密，Chrome 不会返回当前位置坐标。几个月前我们遇到了类似的问题，我们的网络应用程序中的定位服务可以在除 Chrome 浏览器之外的所有设备（PC、手机、平板电脑等）上的所有客户端上正常工作。在该应用上安装 SSL 证书修复了所有地理位置问题。希望这可以帮助。

# git - 使用 GIT 进行 vc'd 处理的文件出现乱码

> ID：10397190
> 
> 赞同：3
> 
> 时间：2012-05-01T02:52:25.890
> 
> 标签：git, dropbox, corruption

**GIT控制的文件版本在什么情况下会出现乱码**？这是我的问题，但这里是上下文：我正在学习 git 并且一直在使用本地存储库，今天看起来有几个文件已损坏（或其他什么）。所有文本如下所示：（`‘Œ…fÅ�ÅˇÅ�õˇÅ�≤ÍÈ`例如）。自添加以来，所有 git 快照中的文件都是乱码。让事情变得更复杂的是，repo 存储在 Dropbox 中，并且还被用于存储开发 Web 服务器 (MAMP) 的 Web 文件。知道发生了什么吗？我在网上没有找到任何有用的东西。

更新：现在看起来有些文件已经消失了；例如，我收到此消息打开一个：`The alias “test.php” can’t be opened because the original item can’t be found.`

更新 2：我一直在思考这个问题，我认为我忽略了与一般问题有关的相关细节：我将 .git 目录向上移动了一个目录，即在此路径中`Dropbox/Project/gitRepo/`，.git 目录从 gitRepo 移动到项目。它毫无问题地提交，但随后在该事件和其他一些 git 操作之间发生了损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:31:29.450

你不能这样移动 .git 目录，这势必会混淆 git，因为如果你已经提交了一个 foo.php 文件，它现在已经变成了 gitRepo/foo.php。

现在，如果您将 .git 目录返回到它所属的位置，您可以像这样进行您想要的转换（我很确定我在这里使用了特定于 bash shell 的功能）：

```
Dropbox/Project/gitRepo$ mkdir gitRepo
Dropbox/Project/gitRepo$ git mv !(gitRepo) gitRepo
Dropbox/Project/gitRepo$ git ci -m "Move everything in subdir"
Dropbox/Project/gitRepo$ cd ../..
Dropbox$ mv Project/gitRepo Project2
Dropbox$ cp -r Project/* Project2/
Dropbox$ cd Project2
Dropbox/Project2$ git add .
Dropbox/Project2$ git ci -m "Import upper directory" 
```

# asp.net - 使用 Azure ACS 和 Asp.Net 3.5 的 Win2003 R2 上的 WIF 异常

> ID：10397191
> 
> 赞同：2
> 
> 时间：2012-05-01T11:44:31.737
> 
> 标签：asp.net, .net-3.5, azure, iis-6, wif

我们在 Win2003 R2 服务器上使用 Azure ACS 和 WIF，运行 Asp.Net 3.5，一旦 Azure ACS 重定向回我们的站点，就会收到以下异常：

```
Exception information: 
    Exception type: CryptographicException
    Exception message: The system cannot find the file specified.

at System.Security.Cryptography.ProtectedData.Protect(Byte[] userData, Byte[] optionalEntropy, DataProtectionScope scope) 
   at Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Encode(Byte[] value) 
```

从研究看来，我们在 IIS 6 中运行网站的 AppPool Identity 可能无法访问相关的加密密钥，但我们还没有找到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:50:34.960

我建议您使用用于该站点的 SSL 证书来加密会话 cookie，并为运行 IIS 应用程序池的用户授予对该证书的私钥的访问权限。

您可以通过以下方式实现前者：

首先，在您的 Application Start 事件中，连接 onServiceConfigurationCreated 事件：

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    FederatedAuthentication.ServiceConfigurationCreated += OnServiceConfigurationCreated;

} 
```

然后使用以下实现：

```
void OnServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
{
    //
    // Use the <serviceCertificate> to protect the cookies that are
    // sent to the client.
    //
    if (e.ServiceConfiguration.ServiceCertificate != null)
    {
        List<CookieTransform> sessionTransforms =
            new List<CookieTransform>(new CookieTransform[] {
                new DeflateCookieTransform(), 
                new RsaEncryptionCookieTransform(e.ServiceConfiguration.ServiceCertificate),
                new RsaSignatureCookieTransform(e.ServiceConfiguration.ServiceCertificate)  });
        SessionSecurityTokenHandler sessionHandler = 
            new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());
        e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);
    } 
```

您需要在 microsoft.identityModel 部分的 Certificates 部分中添加该证书：

> ```
>  <serviceCertificate>
>     <certificateReference x509FindType="FindByThumbprint" findValue="[cert_thumbprint]" />
>   </serviceCertificate> 
> ```

最后，要向运行 App Pool 的用户授予对该证书的私钥的访问权限，请使用：

> winhttpcertcfg -g -a "AppPool 账户" -c LOCAL_MACHINE\My -s www.mysite.com

其中，**winhttpcertcfg**是从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=19801)下载的工具。**LOCAL_MACHINE\My**证书存储的名称，SSL 证书被定位。“ **www.mysite.com** ” 是 SSL 证书的主题 (CN) 名称。

我认为这将解决您的问题。如果没有，请带着结果返回这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:21:30.527

结果证明，根据另一篇文章，我们必须创建一个简单的 Windows 服务，该服务在与 Windows 2003 R2 上的应用程序池相同的帐户下运行。

# java - 将目录列表打印到控制台时出现问题

> ID：10397197
> 
> 赞同：-1
> 
> 时间：2012-05-01T11:45:15.300
> 
> 标签：java, printing, console

对不起可读性。堆栈似乎正在从代码行中修剪空格，并且没有显示缩进。哼。

这是打印到控制台没有任何问题......

```
CGT\whgdata\whnvp33.txt   << EXPECTED OUTPUT (excerpt)
CGT\whgdata\whnvt30.txt
CGT\whgdata\whnvt31.txt
CGT\whgdata\whnvt32.txt
CGT\whgdata\whnvt33.txt
CGT\whgdef.txt
CGT\whgdhtml.txt
CGT\whibody.txt
etc.... 
```

...直到我尝试将哈希表打印到文件中。从那时起，`getFileListing`不被识别为有效符号。

```
FileListing2.java:17: error: cannot find symbol
        List<File> files = FileListing2.getFileListing(startingDirectory);
  symbol:   method getFileListing(File)
  location: class FileListing2
1 error 
```

有人可以借第二双眼睛来帮助我发现我意外/覆盖的内容。我敢肯定这是显而易见的。:\

```
import java.util.*;
import java.io.*;
import java.nio.*;
import java.nio.file.Path;
import java.nio.file.StandardOpenOption.*;
import java.nio.file.Paths;
//
public final class FileListing2 {
    public static void main(String... aArgs) {
//
    File startingDirectory= new File("CGT");
    File outputFile = new File("CGTOutput.txt");
    List<File> files = FileListing2.getFileListing(startingDirectory);
    OutputStream output = null;
    //
    for(File file : files )        {
       System.out.println(file);  //print filenames
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:47:52.927

是的，这是非常令人讨厌的事情，您的课程`FileListing2`不包含方法`getFileListing(File)`。它必须是静态的，就像您尝试调用它的方式一样：

```
public final class FileListing2 {
    public static void main(String... aArgs) {
        //
        File startingDirectory= new File("CGT");
        File outputFile = new File("CGTOutput.txt");
        List<File> files = FileListing2.getFileListing(startingDirectory);
        OutputStream output = null;
        //
        for(File file : files ) {
            System.out.println(file);  //print filenames
        }
    }
    public static List<File> getFileListing(File f) {
    /* implementation */
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:48:10.010

如果你的代码就是你所拥有的`FileListing2`，那么就没有`getFileListing()`方法`LileListing2`，只有`main()`方法

# android - 在 Java for Android 中使用 ListView 程序崩溃

> ID：10397199
> 
> 赞同：0
> 
> 时间：2012-05-01T11:45:37.757
> 
> 标签：android, android-layout

我正在尝试使用 Java 使用 ListViews。我正在为安卓开发一个应用程序。当我在下面运行代码时，它会使我的应用程序崩溃并且无法运行。这是我的代码

```
package com.zafar.myapp
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Myapp extends ListActivity {
CheckBox cbSetAlarm;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.main, Food));

    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), ((TextView) arg1).getText(), Toast.LENGTH_SHORT).show();
        }

    });
}

static final String[] Food = new String[] {
    "Ice Cream"
};
} 
```

你能帮我在哪里犯错吗？为什么它不运行？

提前致谢

**更新 Logcat**

这是我的日志猫

```
 05-01 15:16:45.505: D/dalvikvm(21776): GC_EXTERNAL_ALLOC freed 50K, 50% free 2725K/5379K, external 0K/0K, paused 51ms
05-01 15:16:45.640: D/dalvikvm(21776): GC_EXTERNAL_ALLOC freed 12K, 49% free 2759K/5379K, external 504K/518K, paused 55ms
05-01 15:16:45.645: E/ArrayAdapter(21776): You must supply a resource ID for a TextView
05-01 15:16:45.645: D/AndroidRuntime(21776): Shutting down VM
05-01 15:16:45.645: W/dalvikvm(21776): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-01 15:16:45.655: E/AndroidRuntime(21776): FATAL EXCEPTION: main
05-01 15:16:45.655: E/AndroidRuntime(21776): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.AbsListView.obtainView(AbsListView.java:1598)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.makeAndAddView(ListView.java:1778)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.fillDown(ListView.java:701)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.fillFromTop(ListView.java:758)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.layoutChildren(ListView.java:1629)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.AbsListView.onLayout(AbsListView.java:1428)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1148)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.os.Looper.loop(Looper.java:130)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at java.lang.reflect.Method.invokeNative(Native Method)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at java.lang.reflect.Method.invoke(Method.java:507)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at dalvik.system.NativeStart.main(Native Method)
05-01 15:16:45.655: E/AndroidRuntime(21776): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
05-01 15:16:45.655: E/AndroidRuntime(21776):    ... 26 more
05-01 15:16:45.505: D/dalvikvm(21776): GC_EXTERNAL_ALLOC freed 50K, 50% free 2725K/5379K, external 0K/0K, paused 51ms
05-01 15:16:45.640: D/dalvikvm(21776): GC_EXTERNAL_ALLOC freed 12K, 49% free 2759K/5379K, external 504K/518K, paused 55ms
05-01 15:16:45.645: E/ArrayAdapter(21776): You must supply a resource ID for a TextView
05-01 15:16:45.645: D/AndroidRuntime(21776): Shutting down VM
05-01 15:16:45.645: W/dalvikvm(21776): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-01 15:16:45.655: E/AndroidRuntime(21776): FATAL EXCEPTION: main
05-01 15:16:45.655: E/AndroidRuntime(21776): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.AbsListView.obtainView(AbsListView.java:1598)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.makeAndAddView(ListView.java:1778)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.fillDown(ListView.java:701)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.fillFromTop(ListView.java:758)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.layoutChildren(ListView.java:1629)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.AbsListView.onLayout(AbsListView.java:1428)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1148)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.os.Looper.loop(Looper.java:130)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at java.lang.reflect.Method.invokeNative(Native Method)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at java.lang.reflect.Method.invoke(Method.java:507)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at dalvik.system.NativeStart.main(Native Method)
05-01 15:16:45.655: E/AndroidRuntime(21776): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
05-01 15:16:45.655: E/AndroidRuntime(21776):    ... 26 more
05-01 15:16:45.505: D/dalvikvm(21776): GC_EXTERNAL_ALLOC freed 50K, 50% free 2725K/5379K, external 0K/0K, paused 51ms
05-01 15:16:45.640: D/dalvikvm(21776): GC_EXTERNAL_ALLOC freed 12K, 49% free 2759K/5379K, external 504K/518K, paused 55ms
05-01 15:16:45.645: E/ArrayAdapter(21776): You must supply a resource ID for a TextView
05-01 15:16:45.645: D/AndroidRuntime(21776): Shutting down VM
05-01 15:16:45.645: W/dalvikvm(21776): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-01 15:16:45.655: E/AndroidRuntime(21776): FATAL EXCEPTION: main
05-01 15:16:45.655: E/AndroidRuntime(21776): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.AbsListView.obtainView(AbsListView.java:1598)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.makeAndAddView(ListView.java:1778)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.fillDown(ListView.java:701)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.fillFromTop(ListView.java:758)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ListView.layoutChildren(ListView.java:1629)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.AbsListView.onLayout(AbsListView.java:1428)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.View.layout(View.java:7228)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1148)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.os.Looper.loop(Looper.java:130)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at java.lang.reflect.Method.invokeNative(Native Method)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at java.lang.reflect.Method.invoke(Method.java:507)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-01 15:16:45.655: E/AndroidRuntime(21776):    at dalvik.system.NativeStart.main(Native Method)
05-01 15:16:45.655: E/AndroidRuntime(21776): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
05-01 15:16:45.655: E/AndroidRuntime(21776):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
05-01 15:16:45.655: E/AndroidRuntime(21776):    ... 26 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:57:08.010

这是完整的代码：

```
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Test![enter image description here][1]Activity extends ListActivity {

CheckBox cbSetAlarm;
static final String[] Food = new String[] { "Choose alarm for battery charged completed" };

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);

    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, Food));

    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0 , View arg1 , int arg2 ,
                long arg3) {

            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(),
                    ((TextView) arg1).getText(), Toast.LENGTH_SHORT).show();
        }

    });
}
} 
```

截屏：

![在此处输入图像描述](../Images/a2e278b84fda41325c7b07740e7990df.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:59:19.583

1）因为您正在扩展 ListActivity 尝试覆盖 onListItemClick 而不是 new OnItemClickListener()：

```
@Override
protected void onListItemClick(ListView parent, View view, int position,
        long id) {
    //...
} 
```

2）或者你可能需要清理你的项目：Eclipse Menu-> Project -> Clean

# uitableview - 以编程方式下拉 tableView

> ID：10397202
> 
> 赞同：2
> 
> 时间：2012-05-01T11:45:55.277
> 
> 标签：uitableview, ios5

我想通过将其拉下来显示 tableview 的隐藏标题视图，延迟 1-2 秒并以编程方式返回正常状态。

# php - PHP：Windows 上的 PEAR 尝试打开 c:\windows\pear.ini 进行写入，即使配置文件为 c:\pear\pear.ini

> ID：10397203
> 
> 赞同：8
> 
> 时间：2012-05-01T11:46:00.760
> 
> 标签：php, windows, pear

在 Windows 上，当我运行时

`pear config-set auto_discover 1`

我收到以下错误

`PEAR_Config::writeConfigFile fopen('C:\Windows\pear.ini','w') failed (fopen(C:\Windows\pear.ini): failed to open stream: Permission denied)`

即使我在 PEAR 安装过程中提到我的配置文件是 c:\pear\pear.ini。

请问如何解决这个问题（无需在管理员模式下运行 PEAR 或更改 c:\windows\pear.ini 的权限）？我想如果我能弄清楚 PEAR 从哪里获取 pear.ini 的目录，我的问题就会得到解决。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T01:07:34.967

在 PEAR 安装中，当我进入修改路径的步骤时，我将 pear.ini 的路径从`C:\Windows\pear.ini`to更改为`$prefix\pear.ini`，但我仍然遇到了同样的错误。显然安装脚本没有更新它需要的所有内容。

根据对 PEAR 错误报告 (http://pear.php.net/bugs/bug.php?id=16939) 的评论，我添加了一个环境变量`PHP_PEAR_SYSCONF_DIR`以指向我的 PEAR 安装文件夹 ( `C:\php\PEAR`)。

我现在能够成功运行您最初尝试运行的相同 config-set 命令。

但是请注意对错误报告的后续评论。我只需要在我的机器上安装一个 PEAR，而您可能需要多个安装。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-06T19:23:50.220

我可以通过以管理员身份打开命令提示符来解决此问题。这是通过右键单击命令提示符图标并选择“以管理员身份运行”来完成的。打开命令提示符后，导航到您的 php 目录并再次运行： php go-pear.phar。应该运行没有问题。

问题是，当您打开命令提示符时，您当前的帐户没有写入 Windows 目录的权限。以管理员身份运行命令提示符，将允许写入 c:\windows

希望这可以帮助。

# jquery - 如何检查输入中的焦点：文本或文本区域

> ID：10397209
> 
> 赞同：0
> 
> 时间：2012-05-01T11:46:40.037
> 
> 标签：jquery, html, forms, focus

是否可以像这样在一次通话中检查 `input[type="text"]`焦点`textarea`？

```
$("input[type='text']").focus(function() {}); 
```

或者我是否必须创建两个 JQuery 调用来检查两种类型的焦点？

```
$("input[type='text']").focus(function() {});
$("textarea']").focus(function() {}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:47:29.070

是的，您可以使用逗号，它表示`OR`. 试试这个：

```
$("input[type='text'], textarea").focus(function() {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:47:34.880

你的意思是：

```
$("input[type='text'], textarea").focus(function() {}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:47:54.517

在 jQuery 中，您可以像这样组合选择器并附加一个函数

```
$("input[type=text],textarea").focus(function() {}); 
```

# javascript - Sendsms 插件在 Phonegap 上不起作用

> ID：10397210
> 
> 赞同：1
> 
> 时间：2012-05-01T11:46:49.977
> 
> 标签：javascript, jquery, android, cordova, phonegap-plugins

我正在尝试使用“Sendsms”插件在 Android 上针对电话间隙发送消息。但是当我调用这个函数时，我得到了这个错误：

```
 Uncaught TypeError: Cannot call method 'send' of undefined at file 
```

这是我正在使用的 JS 代码：

```
 function onDeviceReady () {
        $('#send').bind('click', function () {
            alert('Phone: ' + $('#friendName').val() + ' Message: ' +       $('#MessageContent').val());
            window.plugins.sms.send($('#friendName').val(), 
                $('#MessageContent').val(), 
                function () { 
                   alert('Message sent successfully');  
                },
                function (e) {
                    alert('Message Failed:' + e);
                }
            );
        });                         
    }
    document.addEventListener("deviceready", onDeviceReady, false); 
```

我从[这里](https://github.com/phonegap/phonegap-plugins/blob/master/Android/SMSPlugin/src/net/practicaldeveloper/phonegap/plugins/SmsPlugin.java)获得了 java 代码并添加了权限：

```
 <uses-permission android:name="android.permission.SEND_SMS"/> 
```

并将插件添加到 Plugins.xml 中。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:57:15.443

根据您使用的 PhoneGap 版本，您可能只需要进入 smsplugin.js 并将“PhoneGap”的实例替换为“cordova”。

# app-store-connect - 更改 iTunes 连接中的版本发布控制

> ID：10397217
> 
> 赞同：6
> 
> 时间：2012-05-01T11:47:30.610
> 
> 标签：app-store-connect

我在 iTunes Connect 中提交了应用更新，并将版本发布控制设置为 Hold for Developer Release。我想将其更改为自动发布（仍在等待审核）。这可能吗？如果可以，我该如何进行更改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-28T09:50:58.323

我已经广泛使用 iTunes 连接，似乎没有办法将自动发布更改为为开发人员保留，或为开发人员标记的保留更改为自动发布。它似乎是在创建版本时设置的并且不可编辑。

可能有一种方法可以通过拒绝二进制文件并重新开始该过程来做到这一点，但我没有机会对此进行测试，因为我没有任何待处理的版本并且目前没有准备好更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T16:47:06.940

有趣的是，我昨天看到了这篇文章，因为我需要更改此设置。今天，Apple 更新了 iTunes Connect，现在可以直接在二进制页面上更改此选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T16:52:35.277

似乎你不能，但如果你愿意，你可以去**权利和定价**，并将可用性日期移到以后的日期。在此期间，用户将无法下载您的应用，但当新版本获得批准时，现有用户也无法使用更新。

# drupal - 如何获取给定节点ID的视图输出的附加文件（以编程方式） - Drupal

> ID：10397225
> 
> 赞同：0
> 
> 时间：2012-05-01T11:47:55.773
> 
> 标签：drupal, views

我正在使用一个模块。我有一个节点 ID。该节点 ID 是一个页面，上面有 2 个或更多视图块。视图的结果是带有文件附件的节点列表。

我需要获取附加到此特定页面上的视图输出的节点的所有文件。

我在一个模块文件中工作，我可以提供这些视图所在的类型页面的 nid。

我找不到太多帮助，所以我决定询问解决此问题的最佳方法。

我是 Drupal 的新手，所以我会很感激关于如何解决这个问题的一个很好的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:13:52.810

如果我正确理解您的问题，您需要打印带有参数集的视图。获取视图的机器名称和显示 ID（在 Drupal 6 Views 2 中，将鼠标指针悬停在显示列表（块、页面等）上，在 URL 中，您将看到类似“block_4”或“page_1”的内容。那就是显示 ID。在 D7 Views 3 中，您可以在右侧窗格中设置的高级字段中设置显示 ID）。

如果视图的机器名称是“my_view”并且显示 id 是“block_1”，您可以使用以下代码在 node.tpl.php 或任何地方打印视图。

```
<?php
print views_embed_view('my_view', 'block_1', array(arg(1)));
?> 
```

`arg(1)`包含节点 ID。如果您将代码放在 a`node.tpl.php`或 a 它的变体中，则 arg(1) 始终是节点 ID。如果它转到 a `page.tpl.php`，请确保它`arg(1)`至少是数字的。

在视图中，您必须添加一个参数（上下文过滤器，以 D7 字表示）以使视图正确获取参数。您还可以设置上下文过滤器以自动从 URL 获取参数。

# python - Django - 创建用户崩溃

> ID：10397227
> 
> 赞同：0
> 
> 时间：2012-05-01T11:48:14.147
> 
> 标签：python, django, add

我想在 Django 应用程序中添加用户。这是我的代码，它会在这一行中引发异常

```
user = User.objects.create(userName, userMail, userPass) 
```

这是整个代码：

```
def createUser(request):
    userName = request.REQUEST.get('username', None)
    userPass = request.REQUEST.get('password', None)
    userMail = request.REQUEST.get('email', None)

    # TODO: check if already existed

    user = User.objects.create(userName, userMail, userPass)
    user.save()

   return render_to_response('home.html', context_instance=RequestContext(request)) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:27:05.583

使用[`create_user`](https://docs.djangoproject.com/en/dev/topics/auth/#creating-users)辅助函数而不是`create`方法。除其他事项外，它会为您处理密码哈希。

```
user = User.objects.create_user(userName, userMail, userPass) 
```

顺便说一句，从请求数据字典中提取值并不是最佳实践。了解 django 表单和模型表单是个好主意，它们将为您验证输入数据。一旦您了解了这一点，[`UserCreationForm`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.forms.UserCreationForm)您就可以使用 django auth 应用程序中包含的一个。

# php - 如何删除浏览器在一个请求期间添加的所有 cookie？

> ID：10397232
> 
> 赞同：1
> 
> 时间：2012-05-01T11:48:55.273
> 
> 标签：php, javascript, cookies

我正在尝试删除浏览器请求已添加到我的计算机的所有带有 javascript（或 php）的 cookie，包括由分析和 iframe 添加的那些。我已经尝试了堆栈中的所有解决方案，但没有一个有效。

例如，我打开 index.php，它添加了自己的 cookie，并且在 HTML 文档中有 Google Analytics 脚本（很少有其他 cookie）、facebook like 按钮（另一个 cookie）、广告脚本（其他 cookie）。我将得到以下结果：

*   服务器 cookie
*   谷歌分析cookies
*   Facebook 喜欢 cookie
*   广告第三方cookies

如何使用 php 脚本（ajax 请求）或 javascript 删除所有内容？

**注意：cookie 来自不同的域，如上所述**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:59:58.887

出于安全原因，您既不能从其他域读取也不能写入（这意味着删除）cookie。对于仅 HTTP 的 cookie 尤其如此。

另请参阅[我的网站如何删除其他网站的 cookie？](https://stackoverflow.com/q/1399901/1048572)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:00:58.653

如前所述，您需要通过浏览器 CTRL+SHIFT+DEL 进行人工交互，以清除除您自己的脚本域之外的任何内容。

```
<?php
$status = "";
foreach($_COOKIE as $k=>$v) {

    # each $k corresponds to a cookie
    # send cookie header, that tells browser to remove due to expired has passed
    # see http://php.net/manual/en/function.setcookie.php for more details
    setcookie($k, $v, time()-1000000);
$status .= "unset $k<br/>\n";
}
echo $status;
?> 
```

# javascript - 如何在 Chrome 中调试画布跨域问题？

> ID：10397233
> 
> 赞同：1
> 
> 时间：2012-05-01T11:48:56.770
> 
> 标签：javascript, google-chrome, canvas, cross-domain, easeljs

`getImageData()`当我尝试使用 EaselJS（它使用）执行命中测试时，我在 chrome 中遇到跨域请求错误。

```
Unable to get image data from canvas because the canvas has been 
tainted by cross-origin data. 
```

奇怪的是，我正在运行一个本地服务器，并且所有图像都是从这个 localhost:3000 提供的，并且渲染得很好。

如何使用 Chrome 的开发工具找出问题所在？`:3000/`我所有的图像、html 和 JS 都在资源选项卡下分组。你接下来要检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:41:03.937

您的代码中可能还有其他内容将其关闭。把所有东西都倒在其他例子上。

或者，安装 Firefox 并设置严格的错误/警告。我使用 Chrome 作为我的主要浏览器，但有时 FF 有更详细的错误/警告，可以使调试复杂问题更容易。

另外作为记录，如果您使用该标志启动 Chrome，`--allow-file-access-from-files`它不会引发任何这些异常。

# r - r中基图中一个变量的水平的多图排列

> ID：10397235
> 
> 赞同：2
> 
> 时间：2012-05-01T11:49:38.487
> 
> 标签：r, graphics, plot, base, par

这是我的数据和情节

```
nmar <- seq (1, 100, 5)
position= rep(nmar, 5)
n = length (nmar )
chr = rep(1:5, each = n )

mapdata <- data.frame (chr, position, 
 snpname = paste("SNP-", 1:length (position), sep = ""))
mapdata

chr.lab = 1 ; mbar.col = "blue"
layout(matrix(c(1,1,2),nc=1)) # works for two but I need to extend it to 
       n (which is level of chr = 5)

# plot level 1
mapdata1 <- mapdata[mapdata$chr == 1,]
m <- par()$mar
m[1] <- m[3] <- 0
par(mar=m)
# Set the limits of the  plot
plot(mapdata1$position,mapdata1$position-mapdata1$position, type="n",
   axes=FALSE, 
xlab="", ylab="Chromsome", yaxt="n" )

polygon(
  c(0,max(mapdata1$position + 0.08 * max(mapdata1$position)),max(mapdata1$position)+
     0.08 * max(mapdata1$position),0),
  .2*c(-0.3,-0.3,0.3,0.3),
  col= mbar.col
)
segments(mapdata1$position, -.3, mapdata1$position, .3 )
text(mapdata1$position, -.7, mapdata1$snpname, srt = 90, cex.lab = chr.lab)
text(mapdata1$position,  .7, mapdata1$position,cex.lab = chr.lab )
text(0, labels = c("Chr 2")) 
```

第二级

```
# plot level 2
mapdata2 <- mapdata[mapdata$chr == 2,]
m <- par()$mar
m[1] <- m[3] <- 0
par(mar=m)
# Set the limits of the  plot
plot(mapdata2$position,mapdata2$position-mapdata1$position, type="n", axes=FALSE, 
xlab="", ylab="Chromsome", yaxt="n" )

polygon(
  c(0,max(mapdata2$position + 0.08 * max(mapdata2$position)),max(mapdata2$position)+  
 0.08 * max(mapdata2$position),0),
  .2*c(-0.3,-0.3,0.3,0.3),
  col= mbar.col
)
segments(mapdata2$position, -.3, mapdata2$position, .3 )
text(mapdata2$position, -.7, mapdata2$snpname, srt = 90, cex.lab = chr.lab)
text(mapdata2$position,  .7, mapdata2$position,cex.lab = chr.lab )
text(0, labels = c("Chr 2")) 
```

输出 ![在此处输入图像描述](../Images/38754fd943ba637bb25ef36970457b14.png)

(1) 如何自动化 n 级的过程 - 将相似的绘图扩展到 n 级的 chr (2) 如果您看到具有相同规格的条形尺寸发生了变化，可能是由于绘图区域不同。我该如何调整它以使所有图都相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:22:01.293

`ggplot`绝对是去这里的方式。但是如果你真的想坚持使用 base `plot`，那么这个函数就可以了：

```
plot.as.stack= function(mapdata1, mbar.col = "blue"){
    # mapdata1 <- mapdata[mapdata$chr == chr,]
    m <- par()$mar
    m[1] <- m[3] <- 0
    par(mar=m)
    # Set the limits of the  plot
    plot(mapdata1$position,mapdata1$position-mapdata1$position, type="n",
       axes=FALSE, 
    xlab="", ylab="Chromsome", yaxt="n" )

    polygon(
      c(0,max(mapdata1$position + 0.08 * max(mapdata1$position)),max(mapdata1$position)+
         0.08 * max(mapdata1$position),0),
      .2*c(-0.3,-0.3,0.3,0.3),
      col= mbar.col
    )
    segments(mapdata1$position, -.3, mapdata1$position, .3 )
    text(mapdata1$position, -.7, mapdata1$snpname, srt = 90, cex.lab = chr.lab)
    text(mapdata1$position,  .7, mapdata1$position,cex.lab = chr.lab )
    text(0, labels = paste("Chr",unique(mapdata1$chr)))
}

# Example Run.
par(mfrow=c(length(unique(mapdata$chr)),1))
x=by(mapdata,factor(mapdata$chr),plot.as.stack) # Assigned to x to prevent output
par(mfrow=c(1,1)) 
```

如您所见，我只是将您的代码放入一个函数中，然后运行`by`它。请注意，这将在*所有*级别上运行该函数`chr`。您可以对其进行修改，以便该函数采用 chr 的值：

```
plot.as.stack = function(chr){
    mapdata1 <- mapdata[mapdata$chr == chr,]
    ...
} 
```

然后使用 chr 的值运行函数：

```
par(mfrow=c(5,1))
sapply(1:5,plot.as.stack)
par(mfrow=c(1,1)) 
```

# java - How to find type value while reading from text file?

> ID：10397237
> 
> 赞同：2
> 
> 时间：2012-05-01T11:49:44.110
> 
> 标签：java, file, file-io

I have a text file and I need to find type of text files reading line.For example I have a text file like this:

```
1
test
3.123123
13/21/13 
```

how can i do distinguish this types.I need to write console String, integer, date or float in Java

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:55:29.770

你可以使用正则表达式。例如，如果它都是数字（或减号/加号后跟数字），则它是一个 int。对每种类型都有一个正则表达式，然后一个接一个地尝试它们。如果不是int，看看是不是float；如果不是浮点数，请查看是否为日期；等等。如果所有检查都失败，则它是一个字符串。

您*还可以*尝试尝试随机解析内容并查看不引发异常的蛮力方法，但这不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:56:59.437

没有神奇的解决方案。您必须逐行解析和分析您的输入。

要区分整数，您可以使用

`Integer.parseInt(s)`除非抛出 ParsingException，否则假定数据是整数。双倍也是如此。日期可能是一个问题，因为日期可以以不同的格式出现。

我认为在您的情况下，为了简化代码，最好使用模式：

```
Pattern[] patterns = Pattern[] {Pattern.compile("^\\d+$"), Pattern.compile("^\\d+\\.\\d*$"), Pattern.compile("^\\d{1,2}/\\d{1,2}/\\d{1,2}$")};
Class<?> types = new Class[] {Integer.class, Double.class, Date.class};
for (int i - 0;  i < patterns.length;  i++) {
    if (patterns[i].matches(str)) {
        return types[i];
    }
}
return null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:54:46.407

你所要求的不可能做到完美。例如，`3.123123`问题中可以是字符串、浮点数或双精度数。

您可能希望将所有看起来像 double 的东西转换为 double，其他所有看起来像 long 的东西转换为 long，其他所有看起来像 boolean 的东西转换为 boolean，其他所有看起来像 date 的东西，以及一切否则为字符串。为此，我会使用 BufferedReader.readLine 或 Scanner.next （在空格、制表符等以及换行符上拆分）来读取下一件事，然后在 try...catch 中使用 Long.parseLong 等静态方法块来检测解析错误（即当它看起来不长时）。例子：

```
String thing = bufferedReader.readLine();
long longValue;
boolean looksLikeALong = false;
try {
  longValue = Long.parseLong(thing);
  looksLikeALong = true;
} catch (NumberFormatException e) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:55:44.373

我想看看你到目前为止尝试了什么，或者什么不起作用，或者你的思考过程是什么。

有几种方法可以解决这个问题，而无需深思熟虑；其中一些正在使用正则表达式，使用 instanceof 或使用一些解析方法 parseInt、parseLong 等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T12:11:10.653

如果您想实现一个完美的解决方案，您需要编写一个解析器，该解析器采用定义文本文件中可能出现的所有数据类型的语法。如果您不想匹配复杂的数据类型，即使是正则表达式匹配也会有所帮助。

# javascript - date picker not appearing after clicking on image

> ID：10397240
> 
> 赞同：0
> 
> 时间：2012-05-01T11:49:57.310
> 
> 标签：javascript, date, datepicker, mootools

I have a fiddle which displays date picker. same code i have written below but nothing happens, what wrong i am doing? When i click on that green colour then no date picker is generated, but in fiddle it is coming fine, where i am doing wrong?

[http://jsfiddle.net/cBwEK/10/](http://jsfiddle.net/cBwEK/10/)

```
 <html>
   <head>
 <script type="text/javascript" src="mootools-yui-compressed.js"></script>//mootools script  
    <script type="text/javascript" src="datepicker.js"></script>     
    <link rel="stylesheet" type="text/css" href="datepicker.css" />

   </head>
   <body>

  <input name='date_allow_empty' type='text' value='' class='date picker' />
  <div id="invokeDP"></div>

      <script type="text/javascript">           
       var dp = new DatePicker('.picker', {
  pickerClass: 'datepicker ',
  allowEmpty: true,
  toggleElements: ['invokeDP']
  });    
     </script>  

   </body>
</html> 
```

**EDIT**: I have taken all scripts inside `head` section, previously these scripts were in `body` section

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:45:37.130

我想你错过了一个`mootools core library`。

```
<script src="http://fiddle.jshell.net/js/lib/mootools-core-1.4.5-nocompat.js"></script> 
```

这是我的工作解决方案[http://jsbin.com/unosar/4/edit#source](http://jsbin.com/unosar/4/edit#source) *（点击渲染按钮预览）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:53:58.237

Your CSS isn't being detected because you have your `link` in the `body`. If I remove the CSS from your fiddle, it doesn't display at all:

[http://jsfiddle.net/cBwEK/11/](http://jsfiddle.net/cBwEK/11/)

Try moving this to the `head` tag along with your `script` elements. I've also changed your comment block to the correct HTML syntax:

```
<head>
   <script type="text/javascript" src="mootools-yui-compressed.js"></script><!-- mootools script -->
   <script type="text/javascript" src="datepicker.js"></script>     
   <link rel="stylesheet" type="text/css" href="datepicker.css" />
</head>
<body>
   ....... 
```

Also, your class for the `input` is `date picker`. Looking at your mootools script, this should be `datepicker`.

# sencha-touch - Sencha Touch 2 内存管理选项

> ID：10397246
> 
> 赞同：11
> 
> 时间：2012-05-01T11:51:12.850
> 
> 标签：sencha-touch, sencha-touch-2

我正在研究如何在 Sencha Touch 2 中节省内存。我看到了两个选项，如下所述。

我想就这两个选项之间的内存消耗差异获得建议，并想知道我是否遗漏了什么。

# 节省内存的选项

1.  ## 删除和销毁

    从容器中移除未使用的组件，并销毁它们。当再次需要它们时，重新创建它们。

    **优势**：

    容器引用的“autoCreate”选项和容器配置的“autoDestroy”选项可以极大地帮助这种方法。

    **缺点**：

    要像销毁前一样重新创建视图，您需要确保您希望重新创建的每条重要信息（例如列表中的滚动位置、地图中的地图中心）都在其他地方保持状态。

2.  ## 消除

    从容器中移除未使用的组件而不破坏它们。当再次需要它们时，将它们重新连接到容器上。

    **优点**

    1.  无需将与 GUI 相关的信息作为状态保存在某处。
    2.  即使没有出现在 DOM 中，组件也可以更新。

    **缺点**

    1.  组件已从 DOM 中清除，但 Sencha 对象仍保留在内存中
    2.  您需要将分离的组件保留在某处，并确保在创建新组件之前检查并附加现有组件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T22:22:50.630

我还在 Sencha 论坛上发布了这个：[http ://www.sencha.com/forum/showthread.php?200314-Memory-Management-Options](http://www.sencha.com/forum/showthread.php?200314-Memory-Management-Options)

我得到了以下相当笼统的答案：

> 如果您删除组件但不销毁它，您可以最小化 DOM 大小，但当然您仍然在设备内存中拥有该组件。好处是，由于 DOM 大小减小了，您可以获得更好的性能，并且 DOM 大小将比内存中的某些组件产生更大的影响。

# java - 使用其相对路径运行 Java 主类？（Python）

> ID：10397248
> 
> 赞同：0
> 
> 时间：2012-05-01T11:51:18.807
> 
> 标签：java, python, subprocess, relative-path

我正在使用 Python 为指定的 Java 类执行 JVM，如下所示：

```
import subprocess
output = subprocess.check_output("java MyJavaClass") 
```

但是，Java 类与 Python 脚本不在同一目录中，因此这不起作用。它在一个`bin`目录上两个目录。

所以我希望有可能做如下的事情，但它不起作用：

```
output = subprocess.check_output("java ../../bin/MyJavaClass") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:57:52.850

您需要设置类路径，如下所示：

```
java -classpath ../../bin MyJavaClass 
```

请注意，如果您的课程属于某个包，则必须使用 FQN（全限定名）：

```
java -classpath ../../bin my.package.MyJavaClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:01:52.390

尝试

```
output = subprocess.check_output("java MyJavaClass", cwd="../../bin/") 
```

运行Java时，目录结构隐含一个包结构，所以需要从正确的目录执行java（除非使用classpath）。

# wcf - 向 Castle Windsor 注册 wcf 服务

> ID：10397253
> 
> 赞同：0
> 
> 时间：2012-05-01T11:51:37.013
> 
> 标签：wcf, castle-windsor, wcffacility, windsor-facilities

我有一个非常简单的服务，在不使用 Castle 时可以正常工作（这表明其他代码是正确的）。我将我的 svc 文件更改为以下内容：

```
<%@ ServiceHost Service="Reporting.WebService.ReportingWebService" Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, Castle.Facilities.WcfIntegration"  %> 
```

并使用 xml 注册服务，如下所示：

```
 <component id="Reporting.WebService.ReportingWebService"
           service="Reporting.WebService.IReportingWebService, Reporting.WebService"
           type="Reporting.WebService.ReportingWebService, Reporting.WebService">
</component> 
```

但我收到以下错误：

```
[InvalidOperationException: Could not find a component with name Reporting.WebService.ReportingWebService, did you forget to register it?]   Castle.Facilities.WcfIntegration.WindsorServiceHostFactory`1.CreateServiceHost(String constructorString, Uri[] baseAddresses)
.... 
```

知道为什么它没有注册吗？?

- - 更新 - -

我在温莎配置中有这个：

```
<facilities>
    <facility id='wcf'
          type='Castle.Facilities.WcfIntegration.WcfFacility,
                Castle.Facilities.WcfIntegration' />
</facilities> 
```

并且 ReportingWebService 在另一个程序集中被隐含。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:27:41.197

我看不出电线有什么问题，这导致我认为它要么找不到你的程序集，要么可能没有加载类型。因为您的 Web 服务在另一个程序集中被引用，请确保它在 Web 项目中被引用。或者切换到在代码中的 Global.asax 中进行连接，这将强制您引用程序集并加载类型：

```
var container = new WindsorContainer();
container.AddFacility<WcfFacility>()
         .Register(Component.For<IReportingWebService>().ImplementedBy<ReportingWebService>());

//Additional wire up

//If you are using Windsor 3.0 and above then the following is not needed
DefaultServiceHostFactory.RegisterContainer(container.Kernel); 
```

# python - 使用 python 中的工具验证 xml - 收集输出

> ID：10397254
> 
> 赞同：1
> 
> 时间：2012-05-01T11:51:37.950
> 
> 标签：python, popen, os.system, xmllint

我一直在尝试通过 os.system 和 os.popen 捕获此命令的输出，但我没有成功。我想阻止命令在控制台上抛出输出，而是将输出捕获到数据结构或文件中，以进一步检查和处理它。它使用一个简单的工具，称为 xmllint。我试过了

```
1\. p = os.popen('xmllint --noout --relaxng /home/xxxxx_id/folder_xx/xxxx/xxx/rngfile.rng /home/xxxxx_id/folder_xx/xxxx/xxx/xxx/the_xmlfile_that_needstobe_validated.xml')

2\.  os.system('xmllint --noout --dtdvalid ' + path to the xml + '> xmloutput') 
```

两者似乎都不成功，并在我的控制台上提供输出，而不是将其复制到文件或数据结构中。我需要验证 100 多个 xml，并且应该能够单独检查每个输出。

帮助？

解决方法：

```
os.system('xmllint --noout --dtdvalid ' + path to the xml + '> xmloutput 2>&1') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:33:53.707

您应该明确使用[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)，这可以让您区分`STDOUT`and`STDERR`并且您还可以检查返回码。此外，它是启动应用程序的首选方式。

```
p = subprocess.Popen(['xmllint', '--noout', '--dtdvalid', path], stdout=PIPE, stderr=PIPE)
print p.communicate() 
```

# google-maps - 如何使用 Google 地图显示国家边界、美国州边界和城市边界？

> ID：10397255
> 
> 赞同：4
> 
> 时间：2012-05-01T11:51:41.257
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google Maps v3，我需要为我的地图添加不同区域的边界线。例如，在 Google 地图中，所有美国州界都会自动显示。我需要为不同的国家做同样的事情。例如，显示英格兰的所有城市边界。我如何使用 Google Maps API v3 做到这一点？

问候， 约西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:01:44.567

您可以使用 Google 地图中提供的[KML 支持](https://developers.google.com/kml/documentation/kmlelementsinmaps)，通过查看[KML 简介](https://developers.google.com/kml/documentation/)了解更多信息，然后创建 v3 [KmlLayer](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)。构成国家、州和城市边界的 Lat-Lng 坐标在 Google 地图中未开箱即用，但提供了一些支持数据：

1.  Valery Hronusov 创建的[世界国家](https://groups.google.com/a/googleproductforums.com/forum/?fromgroups#!msg/gec-tools/rNjNRYbaWSI/5x5vfgxc0w0J)KML
2.  Filipumme 创建的[世界首都的 KML](https://groups.google.com/a/googleproductforums.com/forum/?fromgroups#!msg/gec-tools/wYh3esMW6XM/XNcwYwlTuB0J)
3.  [美国各州](https://developers.google.com/kml/documentation/us_states.kml)的KML可从 Google 下载
4.  一些额外的城市数据是可用的，但这通常是逐个城市的，需要在线搜索才能找到

这些数据中的大部分也可作为[Fusion Tables](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)公开用于动态检索，但在这种情况下，您将使用共享的公共数据。我将 KML 用于此类事情，因为我希望拥有数据的内部副本，保持对数据的完全控制，并能够进行自己的更改或更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T06:41:04.457

谷歌已经开始用挑选颜色突出显示搜索区域。

它在 API 中不可用。

（将来可能会提供。Google Maps 的功能确实会迁移到 API 中，但 Google 不会提前发布公告）

您需要通过叠加找到城市边界并自己画线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T19:28:32.887

我发现很难在互联网上找到边界/边界数据——即使是像加拿大省份这样的知名边界。尝试使用[谷歌地图引擎](https://mapsengine.google.com/map/new?pli=1&cid=mp&cv=rxWvtku4QIA.en)。在地图上将边界绘制为封闭的多边形。接下来单击文件夹并执行“导出到 KML”。格式为长、纬度、高度（有多个点）。这可以很容易地转换为其他格式。

例如，我使用一个简单的 perl 脚本将 KML 转换为我想要的格式。

```
while (<>) {
chop;
if (/<name>/) {
    s/<name>//g;
    s/<\/name>//g;
    s/^\s+//; # strip whitespace
    s/\s+$//; # strip whitespace
    print "<state colour=\"red\" name=\"$_\">\n";
}
if (/<coordinates/) {
    s/<coordinates>//;
    s/<\/coordinates>//;
    s/,0.0\s*/,/g;
    @array = split(",");
    for ($i = 0; $i < @array; $i = $i + 2) {
        if ($array[$i+1] && $array[$i]) {
                $array[$i+1] =~ s/^\s+//; # strip whitespace
                $array[$i+1] =~ s/\s+$//; # strip whitespace
                $array[$i] =~ s/^\s+//; # strip whitespace
                $array[$i] =~ s/\s+$//; # strip whitespace
                print  "<point lat=\"" . $array[$i+1] . "\" lng=\"" . $array[$i] . "\" \/>\n";

        }
    }
        print "</state>\n";
} 
```

# objective-c - 使用 CoreGraphics 绘制圆形线性渐变（或扩展径向渐变）

> ID：10397258
> 
> 赞同：0
> 
> 时间：2012-05-01T11:51:52.083
> 
> 标签：objective-c, cocoa, core-graphics, gradient

我想用 CoreGraphics 做一些自定义绘图。我的视图需要一个线性渐变，但问题是这个视图是一个圆角矩形，所以我希望我的渐变也以角度圆角。您可以在下图中看到我想要实现的目标： ![示例：带有圆角线性渐变的圆角矩形。](../Images/697c8c9f522dd090f4ad7b86c0cc38df.png)

那么这是否可以在 CoreGraphics 或其他一些编程和简单的方式中实现？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T21:10:13.250

我不认为有一个 API，但是如果你首先绘制一个径向渐变，例如，在一个`(N+1)x(N+1)`大小位图上下文中，然后将图像从上下文转换为左右可调整大小的图像，你可以获得相同的效果大写设置为`N`.

伪代码：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(N+1,N+1), NO, 0.0f);
CGContextRef context = UIGraphicsGetCurrentContext();

// <draw the gradient into 'context'>

UIImage* gradientBase = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImage* gradientImage = [gradientBase resizableImageWithCapInsets:UIEdgeInsetsMake(0,N,0,N)]; 
```

如果您还希望图像垂直缩放，您只需将大写设置为`UIEdgeInsetsMake(N,N,N,N)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:13:27.740

我只想为这种技术添加更多示例代码，因为有些事情并不明显。也许它对某人有用：

所以，比方说，我们有我们的自定义视图类，在它的`drawRect:`方法中我们放了这个：

```
// Defining the rect in which to draw
CGRect drawRect=self.bounds;
Float32 gradientSize=drawRect.size.height;   // The size of original radial gradient
CGPoint center=CGPointMake(0.5f*gradientSize,0.5f*gradientSize);  // Center of gradient

// Creating the gradient
Float32 colors[4]={0.f,1.f,1.f,0.2f};  // From opaque white to transparent black
CGGradientRef gradient=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceGray(), colors, nil, 2);

// Starting image and drawing gradient into it
UIGraphicsBeginImageContextWithOptions(CGSizeMake(gradientSize, gradientSize), NO, 1.f);
CGContextRef context=UIGraphicsGetCurrentContext();
CGContextDrawRadialGradient(context, gradient, center, 0.f, center, center.x, 0);  // Drawing gradient
UIImage* gradientImage=UIGraphicsGetImageFromCurrentImageContext();  // Retrieving image from context
UIGraphicsEndImageContext();  // Ending process
gradientImage=[gradientImage resizableImageWithCapInsets:UIEdgeInsetsMake(0.f, center.x-1.f, 0.f, center.x-1.f)];  // Leaving 2 pixels wide area in center which will be tiled to fill whole area

// Drawing image into view frame
[gradientImage drawInRect:drawRect]; 
```

就这样。此外，如果您不打算在应用程序运行时更改渐变，您可能希望将除最后一行之外的所有内容放入`awakeFromNib`方法中，然后`drawRect:`将 gradientImage 绘制到视图的框架中。`gradientImage`在这种情况下也不要忘记保留。

# silverlight-5.0 - Silverlight 5 和业务应用程序

> ID：10397264
> 
> 赞同：1
> 
> 时间：2012-05-01T11:52:18.573
> 
> 标签：silverlight-5.0, visual-studio-2012

我正在使用 VS11 Beta 并尝试创建 SL5 业务应用程序。它会弹出一个消息框，提示我需要下载最新版本的 Silverlight。所以，我这样做，然后尝试安装它。然后它告诉我我有更高版本的 Silverlight 并且无法安装。我尝试打开我的项目并返回消息框，说我必须重新下载安装程序。在不卸载 Silverlight 的情况下，还有其他方法可以解决这个问题吗？

# c# - 如何使用？：运算符

> ID：10397266
> 
> 赞同：-5
> 
> 时间：2012-05-01T11:52:37.673
> 
> 标签：c#, string, conditional-operator

我将如何转换以下代码以使用 ?: 运算符.. 可能吗？

```
tbtotalamount.Text = string.Format("{0:n2}", dtl.Compute("sum(NetPay)", ""));
if (tbtotalamount.Text.Length == 0)
{
    tbtotalamount.Text = "0";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T11:54:37.793

引用的代码不会受益于使用`? :`称为[*条件运算符*](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)的运算符（有时称为“三元运算符”，尽管从技术上讲，它只是**一个**三元运算符——例如，具有三个操作数的运算符）。

通常，当您有一个变量并希望根据条件为其分配两个值之一时，条件运算符很方便。所以以这种形式编写代码：

```
if (someCondition) {
    a = "one value";
}
else {
    a = "a different value";
} 
```

可以改写

```
a = someCondition ? "one value" : "a different value"; 
```

但是，在您的情况下，`tbtotalamount.Text`直到您`string.Format`完成`if`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T11:54:29.693

是的。就是这样：

```
string test = string.Format("{0:n2}", dtl.Compute("sum(NetPay)", ""));
tbttotalamount.Text = test.length == 0 ? "0" : test; 
```

很抱歉看到这么多反对票，我不熟悉？（三元）运算符也很长一段时间。我认为它非常方便。

它的左侧是您的测试表达式，它应该是评估后的布尔值。右侧是运算符返回的内容：如果为 true，它将返回 . 左侧的值`:`。如果为 false，则为右侧的值。请注意，整个表达式会返回一些内容，编译器需要您对其进行处理。您不能使用三元运算来替换调用返回类型为 的函数的 if-else 语句`void`。

我的意思是，很多以前从未使用过它的人（比如我）似乎认为这是一个**纯粹**的if-else 替代品，但事实**并非如此**。

# python - 如何从模式中获取文本并插入电子邮件正文？

> ID：10397267
> 
> 赞同：2
> 
> 时间：2012-05-01T11:52:41.607
> 
> 标签：python, google-app-engine, twitter-bootstrap

此代码工作正常，除了`comment`: 它没有插入到消息正文中。

```
<div class="modal" id="feedback">
    <form action="/feedback" method="POST">
        <div class="modal-body">
            <textarea class="input-xxlarge" name="comment" rows="3"></textarea>
        </div>
        <div class="modal-footer">
            <a class="btn" type="submit" href="/feedback">Send</a>
        </div>
    </form>
</div> 
```

```
class SendFeedback(webapp2.RequestHandler):
def get(self):
    user = users.get_current_user()
    comment = self.request.get('comment')
    message = mail.EmailMessage()
    message.sender = user
    message.to = 'foo@bar.com'
    message.subject = "Feedback from %s" % user
    message.body = """
            Feedback:
            %s
            """ % comment
    message.send()
    self.redirect(self.request.headers['referer']) 
```

取决于`ENCTYPE="multipart/form-data"`或`%s`或什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:50:21.047

forms 方法是 POST，而您的 Handler 实现了 GET 方法。

**编辑**：

更改`def get(self)`为`def post(self)`

```
class SendFeedback(webapp2.RequestHandler):
    def post(self):
        ... 
```

帖子数据是：

```
data    = self.request.POST
comment = data.get('comment') 
```

**编辑2**

此代码有效：

```
form = """
<div class="modal fade" id="feedback">
    <form action="/feedback" method="POST">
        <div class="modal-header"><h3>Aiutaci a migliorare</h3></div>
        <div class="modal-body">
            <p>un piacere sapere cosa cambiereste di Metrico</p>
                <textarea class="input-xxlarge" name="comment" rows="3"></textarea>
        </div>
        <div class="modal-footer"><input class="btn btn-inverse" type="submit"/></div>
    </form>
</div>
"""

class FormTest(webapp2.RequestHandler):

    def get(self):
        self.response.out.write(form)

    def post(self):
        data = self.request.POST
        comment = data.get('comment')
        body = """
Feedback:
%s
""" % comment
        self.response.out.write(body) 
```

# java - Wav文件在java中转换为字节数组

> ID：10397272
> 
> 赞同：3
> 
> 时间：2012-05-01T11:53:02.963
> 
> 标签：java, arrays, audio, javasound, wave

我的项目是“阿塞拜疆语音的语音识别”。我必须编写一个将`wav`文件转换为字节数组的程序。

如何将音频文件转换为字节[]？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T12:26:03.923

基本上如第一个答案中的代码段所述，但不是`BufferedInputStream`用于[`AudioSystem.getAudioInputStream(File)`](https://docs.oracle.com/en/java/javase/14/docs/api/java.desktop/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.io.File))获取`InputStream`.

使用从中获得的音频流`AudioSystem`将确保去除标题，并将输入文件解码为表示实际声音帧/样本的字节 [] - 然后可用于 FFT 等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-01T11:55:30.257

将此文件写入`ByteArrayOutputStream`

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
BufferedInputStream in = new BufferedInputStream(new FileInputStream(WAV_FILE));

int read;
byte[] buff = new byte[1024];
while ((read = in.read(buff)) > 0)
{
    out.write(buff, 0, read);
}
out.flush();
byte[] audioBytes = out.toByteArray(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-09T03:02:42.147

```
import java.io.*;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.util.LinkedHashMap;
import javax.sound.sampled.*;

/**
 * This class reads a .wav file and converts it to a bunch of byte arrays.
 * 
 * The info represented by these byte arrays is then printed out.
 * 
 * An example of playing these byte arrays with the speakers is used.
 * 
 * It also converts the byte arrays to a .wav file.
 * 
 * An extension of this concept can record from a microphone.
 * In this case, some values like sampling rate would need to be assumed.
 * 
 * See https://ccrma.stanford.edu/courses/422/projects/WaveFormat/ for .wav file spec
 * 
 * @author sizu
 */
public class WavFileHelper {    

    public static void main(String[] args) {
        final String NEWLINE = "\n";
        int recordingSampleRate = 22050;
        short recordingBitsPerSample = 16;
        short recordingNumChannels = 2;
        String inputFile = "/input.wav"; // Place the wav file in the top level directory, ie S:/input.wav
        String outputFile = "/output.wav";
        String recordedFile = "/capture.wav";

        System.out.println("START");
        try {
            WavData wavInputData = new WavData();
            WavData wavRecordData = new WavData();
            wavRecordData.put(WaveSection.SAMPLE_RATE, recordingSampleRate);
            wavRecordData.put(WaveSection.BITS_PER_SAMPLE, recordingBitsPerSample);
            wavRecordData.put(WaveSection.NUM_CHANNELS, recordingNumChannels);

            System.out.println(NEWLINE+"CONVERT WAV FILE TO BYTE ARRAY");
            wavInputData.read(inputFile);

            System.out.println(NEWLINE+"CONVERT BYTE ARRAY TO WAV FILE");
            wavInputData.write(outputFile);

            System.out.println(NEWLINE+"DISPLAY BYTE ARRAY INFORMATION FOR INPUT FILE");
            wavInputData.printByteInfo();

            System.out.println(NEWLINE+"START RECORDING - You can connect the microphone to the speakers");
            WavAudioRecorder recorder = new WavFileHelper.WavAudioRecorder(wavRecordData);
            recorder.startRecording();

            System.out.println(NEWLINE+"PLAY BYTE ARRAY (THIS WILL BE RECORDED)");
            WavAudioPlayer player = new WavFileHelper.WavAudioPlayer(wavInputData);
            player.playAudio();

            System.out.println(NEWLINE+"STOP RECORDING FOR RECORDING");
            recorder.stopRecording();

            System.out.println(NEWLINE+"DISPLAY BYTE ARRAY INFORMATION");
            wavRecordData.printByteInfo();

            System.out.println(NEWLINE+"SAVE RECORDING IN WAV FILE");
            wavRecordData.write(recordedFile);

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        System.out.println("FINISH");
    }

    public static enum WaveSection {
        // 12 Bytes
        CHUNK_ID(4, ByteOrder.BIG_ENDIAN),
        CHUNK_SIZE(4, ByteOrder.LITTLE_ENDIAN),
        FORMAT(4, ByteOrder.BIG_ENDIAN),

        // 24 Bytes
        SUBCHUNK1_ID(4, ByteOrder.BIG_ENDIAN),
        SUBCHUNK1_SIZE(4, ByteOrder.LITTLE_ENDIAN),
        AUDIO_FORMAT(2, ByteOrder.LITTLE_ENDIAN),
        NUM_CHANNELS(2, ByteOrder.LITTLE_ENDIAN),
        SAMPLE_RATE(4, ByteOrder.LITTLE_ENDIAN),
        BYTE_RATE(4, ByteOrder.LITTLE_ENDIAN),
        BLOCK_ALIGN(2, ByteOrder.LITTLE_ENDIAN),
        BITS_PER_SAMPLE(2, ByteOrder.LITTLE_ENDIAN),

        // 8 Bytes
        SUBCHUNK2_ID(4, ByteOrder.BIG_ENDIAN),
        SUBCHUNK2_SIZE(4, ByteOrder.LITTLE_ENDIAN),
        DATA(0, ByteOrder.LITTLE_ENDIAN),
        ;

        private Integer numBytes;
        private ByteOrder endian;
        WaveSection(Integer numBytes, ByteOrder endian){
            this.numBytes = numBytes;
            this.endian = endian;
        }
    }

    public static class WavData extends LinkedHashMap<WaveSection, byte[]>{
        static int HEADER_SIZE = 44; // There are 44 bits before the data section
        static int DEFAULT_SUBCHUNK1_SIZE = 16;
        static short DEFAULT_AUDIO_FORMAT = 1;
        static short DEFAULT_BLOCK_ALIGN = 4;
        static String DEFAULT_CHUNK_ID = "RIFF";
        static String DEFAULT_FORMAT = "WAVE";
        static String DEFAULT_SUBCHUNK1_ID = "fmt ";
        static String DEFAULT_SUBCHUNK2_ID = "data";

        public WavData(){
            this.put(WaveSection.CHUNK_ID, DEFAULT_CHUNK_ID);
            this.put(WaveSection.FORMAT, DEFAULT_FORMAT);
            this.put(WaveSection.SUBCHUNK1_ID, DEFAULT_SUBCHUNK1_ID);
            this.put(WaveSection.SUBCHUNK1_SIZE, DEFAULT_SUBCHUNK1_SIZE);
            this.put(WaveSection.AUDIO_FORMAT, DEFAULT_AUDIO_FORMAT);
            this.put(WaveSection.BLOCK_ALIGN, DEFAULT_BLOCK_ALIGN);
            this.put(WaveSection.SUBCHUNK2_ID, DEFAULT_SUBCHUNK2_ID);

            this.put(WaveSection.CHUNK_SIZE, 0);
            this.put(WaveSection.SUBCHUNK2_SIZE, 0);
            this.put(WaveSection.BYTE_RATE, 0);
        }

        public void put(WaveSection waveSection, String value){
            byte[] bytes = value.getBytes();
            this.put(waveSection, bytes);
        }

        public void put(WaveSection waveSection, int value) {
            byte[] bytes = ByteBuffer.allocate(4).order(ByteOrder.LITTLE_ENDIAN).putInt(value).array();
            this.put(waveSection, bytes);
        }

        public void put(WaveSection waveSection, short value) {
            byte[] bytes = ByteBuffer.allocate(2).order(ByteOrder.LITTLE_ENDIAN).putShort(value).array();
            this.put(waveSection, bytes);
        }

        public byte[] getBytes(WaveSection waveSection) {
            return this.get(waveSection);
        }

        public String getString(WaveSection waveSection) {
            byte[] bytes = this.get(waveSection);
            return new String(bytes);
        }

        public int getInt(WaveSection waveSection) {
            byte[] bytes = this.get(waveSection);
            return ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN).getInt();
        }

        public short getShort(WaveSection waveSection) {
            byte[] bytes = this.get(waveSection);
            return ByteBuffer.wrap(bytes).order(ByteOrder.LITTLE_ENDIAN).getShort();
        }

        public void printByteInfo() {
            for (WaveSection waveSection : WaveSection.values()) {
                if (waveSection.numBytes == 4
                        && waveSection.endian == ByteOrder.BIG_ENDIAN) {
                    System.out.println("SECTION:" + waveSection + ":STRING:"
                            + this.getString(waveSection));
                } else if (waveSection.numBytes == 4
                        && waveSection.endian == ByteOrder.LITTLE_ENDIAN) {
                    System.out.println("SECTION:" + waveSection + ":INTEGER:"
                            + this.getInt(waveSection));
                } else if (waveSection.numBytes == 2
                        && waveSection.endian == ByteOrder.LITTLE_ENDIAN) {
                    System.out.println("SECTION:" + waveSection + ":SHORT:"
                            + this.getShort(waveSection));
                } else {
                    // Data Section
                }
            }
        }

        public void read(String inputPath) throws Exception {
            // Analyze redundant info
            int dataSize = (int) new File(inputPath).length() - HEADER_SIZE;
            WaveSection.DATA.numBytes  = dataSize; // Can't have two threads using this at the same time

            // Read from File
            DataInputStream inFile = new DataInputStream(new FileInputStream(inputPath));

            for (WaveSection waveSection : WaveSection.values()) {
                byte[] readBytes = new byte[waveSection.numBytes];
                for (int i = 0; i < waveSection.numBytes; i++) {
                    readBytes[i] = inFile.readByte();
                }
                this.put(waveSection, readBytes);
            }

            inFile.close();
        }

        public void write(String outputPath) throws Exception {
            // Analyze redundant info
            int dataSize = this.get(WaveSection.DATA).length;
            this.put(WaveSection.CHUNK_SIZE, dataSize+36);
            this.put(WaveSection.SUBCHUNK2_SIZE, dataSize);

            int byteRate = this.getInt(WaveSection.SAMPLE_RATE)*this.getShort(WaveSection.BLOCK_ALIGN);
            this.put(WaveSection.BYTE_RATE, byteRate);

            // Write to File
            DataOutputStream dataOutputStream = new DataOutputStream(new FileOutputStream(outputPath));

            for (WaveSection waveSection : WaveSection.values()) {
                dataOutputStream.write(this.getBytes(waveSection));
            }

            dataOutputStream.close();
        }

        public AudioFormat createAudioFormat() {
            boolean audioSignedSamples = true; // Samples are signed
            boolean audioBigEndian = false;
            float sampleRate = (float) this.getInt(WaveSection.SAMPLE_RATE);
            int bitsPerSample = (int) this.getShort(WaveSection.BITS_PER_SAMPLE);
            int numChannels = (int) this.getShort(WaveSection.NUM_CHANNELS);
            return new AudioFormat(sampleRate, bitsPerSample,
                    numChannels, audioSignedSamples, audioBigEndian);
        }
    }

    public static class WavAudioPlayer {
        WavData waveData = new WavData();

        public WavAudioPlayer(WavData waveData){
            this.waveData = waveData;
        }

        public void playAudio() throws Exception {
            byte[] data = waveData.getBytes(WaveSection.DATA);

            // Create an audio input stream from byte array
            AudioFormat audioFormat = waveData.createAudioFormat();
            InputStream byteArrayInputStream = new ByteArrayInputStream(data);
            AudioInputStream audioInputStream = new AudioInputStream(byteArrayInputStream,
                    audioFormat, data.length / audioFormat.getFrameSize());

            // Write audio input stream to speaker source data line
            DataLine.Info dataLineInfo = new DataLine.Info(SourceDataLine.class,
                    audioFormat);
            SourceDataLine sourceDataLine = (SourceDataLine) AudioSystem.getLine(dataLineInfo);
            sourceDataLine.open(audioFormat);
            sourceDataLine.start();

            // Loop through input stream to write to source data line
            byte[] tempBuffer = new byte[10000];
            int cnt;
            while ((cnt = audioInputStream.read(tempBuffer, 0, tempBuffer.length)) != -1) {
                sourceDataLine.write(tempBuffer, 0, cnt);
            }

            // Cleanup
            sourceDataLine.drain();
            sourceDataLine.close();
            byteArrayInputStream.close();
        }
    }

    public static class WavAudioRecorder implements Runnable {
        WavData waveData = new WavData();
        boolean recording = true;
        Thread runningThread;
        ByteArrayOutputStream byteArrayOutputStream;

        public WavAudioRecorder(WavData waveData){
            this.waveData = waveData;
        }

        public void startRecording(){
            this.recording = true;
            this.runningThread = new Thread(this);
            runningThread.start();  
        }

        public WavData stopRecording() throws Exception{
            this.recording = false;
            runningThread.stop();

            waveData.put(WaveSection.DATA, byteArrayOutputStream.toByteArray());

            return waveData;
        }

        public void run() {
            try {
                // Create an audio output stream for byte array
                byteArrayOutputStream  = new ByteArrayOutputStream();

                // Write audio input stream to speaker source data line
                AudioFormat audioFormat = waveData.createAudioFormat();
                DataLine.Info info = new DataLine.Info(TargetDataLine.class, audioFormat);
                TargetDataLine targetDataLine = (TargetDataLine) AudioSystem.getLine(info);
                targetDataLine.open(audioFormat);
                targetDataLine.start();

                // Loop through target data line to write to output stream
                int numBytesRead;
                byte[] data = new byte[targetDataLine.getBufferSize() / 5];
                while(recording) {
                    numBytesRead =  targetDataLine.read(data, 0, data.length);
                    byteArrayOutputStream.write(data, 0, numBytesRead);
                }

                // Cleanup
                targetDataLine.stop();
                targetDataLine.close();
                byteArrayOutputStream.close();
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-04T16:27:54.817

## 将文件转换为字节数组

fileToByteArray("C:\..\my.mp3");

```
`public static byte[] fileToByteArray(String name){
    Path path = Paths.get(name);
    try {
        return Files.readAllBytes(path);
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}` 
```

# mysql - 在 MySQL 数据库中存储用户名和密码的最佳实践

> ID：10397276
> 
> 赞同：17
> 
> 时间：2012-05-01T11:53:17.453
> 
> 标签：mysql, database, database-design, encryption, password-encryption

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我正在制作一个在 MySQL 数据库中存储用户凭据（电子邮件、用户名和密码）的系统，并且在使用加密、加盐和加密类型方面看到了冲突的观点。

你会推荐什么最好的方法？用 MD5 还是 SHA1 编码？加盐还是不加盐？仅加密密码或所有 3 个元素？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T13:00:20.793

对于密码哈希使用[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)它是[NIST 批准](http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf)的。您应该为每个密码和重要的（超过 1000 次）迭代计数使用随机的非秘密盐。

对于用户名和电子邮件，可能不值得加密。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T12:11:23.930

IMO 的最佳做法是：

*   使用散列算法，例如 SHA256 或 SHA512。MD5 现在是不安全的，因为您可以反转哈希/执行彩虹攻击。

*   使用强盐来确保攻击者无法猜出常用的散列密码，如果他们获得了访问您的数据库的权限。

*   不要使用加密。

*   只有散列密码、用户名和电子邮件才可以作为纯文本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T12:00:55.423

这只是您需要加密的密码。实际上，您应该同时使用*至少*`Hashing`SHA-256的算法（我很确定 MD5 和 SHA1 是可破解的？）**并且**您的密码更加安全。 ***`Salting`***

 ***这是关于存储它们的首选方法的答案：[在数据库中存储密码的首选方法](https://stackoverflow.com/questions/615704/preferred-method-of-storing-passwords-in-database)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T12:05:18.707

用户名和电子邮件不应该被加密，你需要它们是纯文本的，那样它们会更有用。

至于密码：它们**绝对**应该被加密或散列，最好也用盐。到目前为止，我使用了一种有趣的技术来做到这一点：AES，其密钥就是密码本身。因此，如果用户将他的密码设置为“blabla123”，那么我将通过调用将其存储在 MySQL 中`AES_ENCRYPT('blabla123', 'blabla123')`。这样做有两个好处：

*   您不会将加密密钥存储在任何地方
*   每个密码都使用不同的密钥加密。因此，即使您找到了一把钥匙，它的用处也会受到限制。

然后通过加密用户键入的内容并比较两个值来完成有效性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T11:58:38.530

密码应使用强盐（MD5 或 SHA1 都可以）进行哈希保护，以防止使用彩虹表进行攻击。

您不应该对电子邮件地址进行哈希处理 - 一旦您对其进行哈希处理，除了检查用户输入的内容之外，您无法将其用于任何其他用途，因此对其进行哈希处理会阻止您向该人发送电子邮件。同样，用户名最好以纯文本形式存储，以便您识别该人。***

# javascript - Javascript逻辑搜索？

> ID：10397278
> 
> 赞同：2
> 
> 时间：2012-05-01T11:53:42.690
> 
> 标签：javascript, full-text-search, logic, boolean

我已经为一组 javascript 对象构建了一个搜索函数，如下所示：

1.  用户在表单输入框中输入文本
2.  循环遍历对象数组
3.  如果对象文本包含输入的文本，则将对象推送到单独的“过滤”数组中
4.  显示过滤后的数组

使用 javascript 中内置的字符串 search() 函数可以正常工作，即。

```
if(objectarray[i].text.search(userstring)>=0){  
    filteredarray.push(currentobject)  
}; 
```

现在客户希望按照以下方式进行更高级的搜索：

查找文本包含（x1 或 x2）和（x3 或 x4 或 x5）的对象

其中每个 x 都是一个单词，当满足上述条件时，一个对象将被推送到过滤后的集合中。

是否有内置函数可以处理这种复杂的布尔语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:42:57.150

使用[这个问题的答案](https://stackoverflow.com/questions/10399396/replace-any-words-with-modified-version-of-themselves)

我拿这个：

```
var usersearchstring = "(x1 or x2) and (x3 or x4 or x5)"; 
```

并使用它进行转换：

```
usersearchstring = usersearchstring.replace(/[-\w]+/g, "targetstring.toLowerCase().search('$&')>=0"); 
```

进入这个：

```
(targetstring.toLowerCase().search('x1')>=0 or targetstring.toLowerCase().search('x2')>=0) and (targetstring.toLowerCase().search('x3')>=0 or targetstring.toLowerCase().search('x4')>=0 or targetstring.toLowerCase().search('x5')>=0) 
```

NB '>=0' 需要将搜索函数返回的数值响应转换为布尔值

# google-maps - 将 require.js 与 Google Maps JavaScript API v3 一起使用

> ID：10397279
> 
> 赞同：2
> 
> 时间：2012-05-01T11:53:44.423
> 
> 标签：google-maps

在将 require.js 与 Google Maps JavaScript API v3 一起使用时，我遇到了一些奇怪的问题。你可以看到奇怪的东西

**[http://ec2-122-248-213-247.ap-southeast-1.compute.amazonaws.com/laugh-rev-6/index.html#contact](http://ec2-122-248-213-247.ap-southeast-1.compute.amazonaws.com/laugh-rev-6/index.html#contact)**

第一个标记不在中心，第二个当你拖动地图时，它的一部分一直消失。

我尝试将 src url 更改为

**[http://maps.googleapis.com/maps/api/js?key=](http://maps.googleapis.com/maps/api/js?key=) &sensor=false**

但有一个空白屏幕。

以下是代码：

**js/views/contact.js**

```
define([
    'jquery',
    'underscore',
    'backbone',
    'googlemap',
    'text!templates/contact.html'
], function($, _, Backbone, google,
            contactTemplate){

    var contactView = Backbone.View.extend({
        el: "#container",

        render: function(){
            this.$el.html(contactTemplate);

            var mapCanvas = $( "#map_canvas" ).get( 0 );

            try{
                google.addMapToCanvas( mapCanvas );
            }catch(err){
                console.log(err);
            }

        }
    });
    return contactView;
}); 
```

**js/libs/google/map.js**

```
define(
    [ "async!http://maps.google.com/maps/api/js?sensor=false!callback" ],
    function() {
        return {
            addMapToCanvas: function( mapCanvas ) {

                var myLatlng = new google.maps.LatLng(1.309631, 103.865664);

                var myOptions = {
                    center: myLatlng,
                    zoom: 15,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                var map = new google.maps.Map( mapCanvas, myOptions );

                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    animation: google.maps.Animation.DROP,
                    title:'20 KALLANG AVENUE\n2C LOBBY B\nPICO CREATIVE CENTRE\nSINGAPORE 339411.\nTel: +65 6866 0798'
                });
                google.maps.event.addListener(marker, 'click', function(){

                    if (marker.getAnimation() != null) {
                        marker.setAnimation(null);
                    } else {
                        marker.setAnimation(google.maps.Animation.BOUNCE);
                    }

                });
            }
        }
    } 
```

**js/模板/contact.html**

```
<div class="hero-unit3" style="float: left">
    <div style="margin-top:-30px;margin-bottom:30px"><img src="./assets/img/contact.png"/></div>

    <div style="margin-top:10px">
        <div style="float: left">
            <div id="map_canvas_top_rule" class="rule2"></div>
            <div id="map_canvas"></div>
            <div id="map_canvas_bottom_rule" class="rule2"></div>
        </div>
    </div>

</div> 
```

# ios - iOS startMonitoringForRegion didn't work in Sleep mode (black screen)

> ID：10397280
> 
> 赞同：3
> 
> 时间：2012-05-01T11:53:45.983
> 
> 标签：ios

I am trying to write an app in iOS for the iPhone 4 using startMonitoringForRegion that fires a local notification each time the location delegate receives a location update.

As long as the phone is awake (the screen is lit up), the application works well, firing the notifications, but when I put the phone to sleep (the screen is black), I no longer receive notifications until I wake the phone up by pressing the home button

I'm tried to add "Required background modes" - "App registers for location updates" key in info.plist but it's make no sense...

CLLocationManager delegate is setted up as AppDelegate.

What do I need to do in order for location updates to register even when the device is asleep? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T09:21:48.547

可能是应用程序关闭后 CLLocationManager 实例已被释放。

对我来说，我会创建一个带有 CLLocationManager 属性的单例位置管理器，并将委托设置为单例。之后，我会调用该方法`startMonitoringSignificantLocationChanges`以确保应用程序接收到位置更新。即使应用程序被杀死，它也会起作用。

对于应用程序被终止的情况，我需要在应用程序委托`didFinishLaunchingWithOptions`方法中实例化位置管理器单例：

```
if ([launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey]) {
    //instantiate the singleton here
    NSArray *regions = [[[[LocationManager sharedManager] locationManager] monitoredRegions] allObjects];
} 
```

我在这里更详细地解释了使用重大位置更改和标准位置服务之间的区别：[应用程序未运行时基于位置的推送通知？](https://stackoverflow.com/questions/15737446/location-based-push-notification-when-app-is-not-running/16560912#16560912)

# php - 确定变量是否是 PHP 中一组变量中最小的一个

> ID：10397286
> 
> 赞同：0
> 
> 时间：2012-05-01T11:54:01.957
> 
> 标签：php, algorithm, variables

社区！我想问是否有任何简单的方法来确定一个变量是否具有一组不同变量中的最小值。

一个例子：

```
is_smallest($var, $foo, $bing, $bong, $bung); 
```

当 $var 小于 $foo*和*$bing*和*$bong*和*$bung 时应该返回“真”，当它大于这些值之一时返回假。

PHP-Processor 中是否有任何内置函数可以使这项任务变得简单，或者是否有必要创建自己的算法？如果是这样，如何处理 PHP 中未定义的大量参数？

我期待着你的回答:)

亲切的问候，

塞巴斯蒂安 A.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:56:00.240

使用`min`功能：

```
if($var == min($var, $foo, $bing, $bong, $bung))
{
  // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:59:48.150

正如[Femaref 回答](https://stackoverflow.com/a/10397309/50079)的那样，[`min`](http://www.php.net/manual/en/function.min.php)已经完成了大部分所需的工作，并且语法也更好 - 假设我们正在测试*哪个*`is_smallest`参数的最小性完全不清楚。

 *另一个更接近`is_smallest`您可能想要考虑的精神的选择是

```
function min_index() {
    $args = func_get_args();
    return array_search(min($args), $args);
}

if (min_index($a, $b, $c, $d) == 0) {
    // 0: $a is smallest, 1: $b is smallest, etc
} 
```*

# struts2 - struts2中如何检测手机并重定向到另一个命名空间

> ID：10397287
> 
> 赞同：0
> 
> 时间：2012-05-01T11:54:05.850
> 
> 标签：struts2, struts, struts-config

我需要创建一个在 PC 和手机上都可以运行的网站，我正在 struts2 中做这个项目。当用户尝试使用移动设备访问网站“www.website.com”时，我需要将用户重定向到另一个名称空间，例如“www.website.com/mobile”。如果用户访问任何页面可能是内页，如果设备是移动的，我需要添加一个额外的命名空间，如“移动”。有什么方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:39:04.377

我建议您编写一个拦截器，该拦截器将负责识别访问资源的设备类型，您可以通过请求标头识别它。并考虑这种情况，即使智能用户篡改了您拦截器的 url 也应该更正它。可以考虑使用框架

[移动设备检测](http://en.wikipedia.org/wiki/Wurfl)

以及更多详细信息[如何在我的网络服务器上检测移动客户端](https://stackoverflow.com/questions/5981730/how-do-i-detect-mobile-clients-on-my-web-server)

# c++ - 拥有特定于实例的 io_service、resolver 等是否可以 VS 在每个函数中创建它们？

> ID：10397290
> 
> 赞同：0
> 
> 时间：2012-05-01T11:54:14.740
> 
> 标签：c++, boost-asio

我正在尝试使用 boost::asio 编写我自己的异步网络客户端。我在可用示例中观察到的一件事是不清楚是创建单个 io_service、解析器和查询对象，还是为我创建的每个连接创建这些对象的新实例。

我有一个客户端，它只会联系特定的服务器（唯一的 ip 和主机），但每天会这样做 100 次。

我计划拥有自己的网络类，并且在类本身中，我在构建对象时设置了 io_service、解析器、查询和套接字变量。

```
myclient::myclient() : io_service_(), resolver_(io_service_),
  query_(tcp::v4(), host_, port_), socket_(io_service_) 
{
}

//...

resolver.async_resolve_();
io_service_.reset();
io_service_.run_one(); 
```

这看起来好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:03:08.227

对于上面描述的进程，您应该尝试将自己限制为一个 io_service io_service 类是线程安全的，因此可以同时被多个线程使用来分派工作。快速阅读[io_service](http://www.boost.org/doc/libs/1_44_0/doc/html/boost_asio/reference/io_service.html)类文档，底部有一些使用示例。

还可以查看[聊天客户端示例](http://www.boost.org/doc/libs/1_44_0/doc/html/boost_asio/example/chat/chat_client.cpp)，并注意如何在主函数中创建 io_service，然后通过引用传递给 chat_client 类。

# python - 在 Python 中解析类似 Stackoverflow 的文本框

> ID：10397296
> 
> 赞同：1
> 
> 时间：2012-05-01T11:54:48.483
> 
> 标签：python, regex

我有一个`<textarea>`用户输入他的文本的地方。文本可以包含特殊字符，我需要解析这些字符并将其替换为 HTML 标记以用于显示目的。
例如：
粗体文本将输入为：`*some text*`并解析为：`<strong>some text</strong>`。
URL 将输入为：`#some text | to/url#`并解析为：`<a href="to/url">some text</a>`

解析此文本输入的最佳方法是什么？
正则表达式？（我对正则表达式没有任何经验）一些 Python 库？
或者我应该编写自己的解析器，“读取”输入并在需要的地方应用逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:02:24.993

您描述的语言的*强调元素看起来像*[Markdown](http://en.wikipedia.org/wiki/Markdown)。

您应该考虑按原样使用 Markdown。也有一个[Python 模块](http://freewisdom.org/projects/python-markdown/Using_as_a_Module)可以解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:01:34.957

最好的方法取决于您输入的“语言”到底是什么。如果它具有与 HTML 相同类型的嵌套结构，则您不想使用正则表达式。（必填链接：[RegEx 匹配开放标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)）

你在发明你自己的小标记语言吗？

*   如果你是：为什么？为什么不使用已经存在的解析器之一，例如 Markdown 或 reST？
*   如果不是：为什么要编写自己的解析器？不是已经有了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:03:31.050

您可以查看一些现有的用于解析 wiki 文本的库：

*   [http://remysharp.com/2008/04/01/wiki-to-html-using-javascript/](http://remysharp.com/2008/04/01/wiki-to-html-using-javascript/)

这似乎与您定义的格式相同。

> 标题：！标题 1 文本！！标题2文字！！！标题 3 文本
> 
> 粗体： *粗体文本*
> 
> 斜体： *斜体文本*
> 
> 下划线：+下划线文字+

*   [http://randomactsofcoding.blogspot.co.uk/2009/08/parsewikijs-javascript-wiki-parsing.html](http://randomactsofcoding.blogspot.co.uk/2009/08/parsewikijs-javascript-wiki-parsing.html)

或者这个有一个非常简单的 API 并允许检查给定文本是否实际上是 wiki 文本。

**更新**- 添加了 python wiki 解析器：

[从这里查看](http://www.mediawiki.org/wiki/Alternative_parsers)wiki 解析器列表。

Media wiki-parser 似乎是一个很好的 python 解析器，可以从 wiki 标记生成 html：

[https://github.com/peter17/mediawiki-parser](https://github.com/peter17/mediawiki-parser)

# javascript - 组合对象时如何避免名称冲突

> ID：10397298
> 
> 赞同：5
> 
> 时间：2012-05-01T11:54:57.697
> 
> 标签：javascript, naming-conventions, composition, object-design

在 JavaScript 中，您可以使用某种`extend`函数来组合对象。

例如，我可能有一个公开[`observable`](https://github.com/Raynos/observable/blob/master/lib/observable.js)一组公共方法（、、、、、、等）的类`get``push``set``increment``get`

在这种情况下，observable 也恰好是一个 EventEmitter，因此它还公开了一组进一步的公共方法（`emit`、`on`、`removeListener`等）

这两个类都具有存储状态的内部下划线前缀属性。eventemitter 用于`_events`存储事件处理程序，observable 用于存储 state`_state`和`_id`id。

现在，当我像这样使用对象组合创建模型时

```
var Model = extend({}, Observable, {
    constructor: function () {
        // Oops, I was supposed to know Observable uses the _state name already
        this._state = { ... }
    },
    someMethod: function () { ... }
}) 
```

这会导致一个问题，因为`Observable`已经使用了`_state`内部属性并且现在存在名称冲突。

我认为仅仅“必须知道”哪些对象依赖于 mixin 的哪些内部属性才能安全工作，这很丑陋。

**如何避免混合使用相同内部属性名称的两个对象？**

理想情况下，这将通过 ES6 私有名称来解决，但我们还不能这样做，而且我们不能在不损失性能的情况下模拟它们。除非您可以提供**不会造成很大性能损失**的 ES6 名称仿真，否则我对这些解决方案不感兴趣。

另一种方法是使用闭包，或者`bind`您将为每个实例重新创建函数，这会导致显着的性能损失。另一种选择是将命名空间内部属性作为`__eventEmitter_events`和`__observable_state`。这很丑陋，并且减少了命名空间冲突的可能性，它不会删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:36:14.993

简单的解决方案是“命名空间”

```
var state = "Model@v0.1.3~state";
var Model = extend({}, Observable, {
    constructor: function () {
        // Nice, I used a namespace and don't clash with "Observable@v0.2.3~state"
        this[state] = { ... }
    },
    someMethod: function () { ... }
}) 
```

# wpf-controls - 是否有一个控件来安排可变数量的子控件？

> ID：10397301
> 
> 赞同：0
> 
> 时间：2012-05-01T11:55:27.060
> 
> 标签：wpf-controls

有谁知道如何找到或制作一个 WPF 容器控件，该控件将显示固定大小的子控件的二维数组（子控件的数量在运行时变化），以便填充第一行，然后填充第二行，依此类推，直到没有更多的子控件或所有行都被填满。如果用户使容器变宽，那么列数应该增加，因此：
1 2 3
4 5 6
7 8 9
将变为
1 2 3 4
5 6 7 8
9

# php - 登录会话代码

> ID：10397305
> 
> 赞同：0
> 
> 时间：2012-05-01T11:55:40.643
> 
> 标签：php, mysql

对不起这个转储问题，但我只想知道如何在每个页面的顶部添加会话代码，以防止用户在每次移动到其他页面时登录。

这是登录表单

```
<?php

/**
 * @author 
 * @copyright 2012
 */
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
<head>
    <title>JQuery Form Example</title> 

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Customer Form Survey Login | Epic Pharma</title>
<link rel="stylesheet" media="screen" type="text/css" href="http://ebarea.com/test/new/style.css" />

</head>

<body>
<form name="myform" action="process.php" class="input" method="post">
<div id="wrapper">
    <h1 id="create-account">EPCI Pharma Survey</h1>
    <label>Name: <span>*</span></label>
    <input name="username" type="text" class="username" />
    <label>Password: <span>*</span></label>
    <input name="password" type="password" class="Passowrd" />
<div align="center">
    <input type="image" class="submit" src="http://ebarea.com/test/new/submit.png" value="Submit" />
    </form>
<!-- We will output the results from process.php here -->

</body>
</html> 
```

这是process.php

```
<?php
session_start();
$host="localhost"; // Host name 
$username="ebarea_epic"; // Mysql username 
$password=",,,,"; // Mysql password 
$db_name="ebarea_epic"; // Database name 
$tbl_name="medicalrep"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$username=$_POST['username']; 
$password=$_POST['password'];

// To protect MySQL injection (more detail about MySQL injection)
$username = stripslashes($username);
$password = stripslashes($password);
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

$sql="SELECT * FROM $tbl_name WHERE username='$username' and password='$password'";
$result=mysql_query($sql);
$num_results = mysql_num_rows($result);
$array = mysql_fetch_array($result);
$_SESSION['username']=$array['username'];
$_SESSION['password']=$array['password'];
$_SESSION['job_title']=$array['job_title'];

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $username and $password, table row must be 1 row

if($count==1){

$_SESSION['username']=$_POST['username'];
$_SESSION['password']=$_POST['password'];

if ($array['job_title']=="user")
{ header ("location: userpage.php"); }
     else if ($array['job_title']=="admin")
{ header ("location: adminpage.php"); }
   } else {
  echo "Wrong user or password";
  }
?> 
```

因此，当用户或移动到他的页面（userpage.php）或管理员移动到他的面板（adminpage.php）时，他将不会再次登录！

谢谢你：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:00:27.433

`session_start()`在每个php页面的顶部添加。然后用于`if(isset($_SESSION['blabla']))`检查用户 id 是否已登录 用于`session_destroy()`将用户注销。

# sql - 在两个日期内选择，其中第二个日期未定义

> ID：10397315
> 
> 赞同：1
> 
> 时间：2012-05-01T11:56:44.220
> 
> 标签：sql, date

我需要在两个日期之间进行查询，这很容易，但是我该如何选择，例如 date_end 是：（`0000-00-00`这意味着没有结束）类似于

```
SELECT COUNT(*) FROM news WHERE NOW() BETWEEN data_start  
/* and if data_end > 0000-00-00 */ AND data_end 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:04:44.877

`0000-00-00`您应该将此字段设置为可为空，并将值设置为 ，而不是使用来表示没有结束日期`NULL`。这比将 设置`end_date`为早期值更符合逻辑。

仅仅因为没有`news`记录会结束`0000-00-00`并不意味着将其用作“无结束”值是正确的。例如，如果将来您需要计算出新闻的平均日期范围，那么使用`0000-00-00`会扭曲您的结果。

您可以通过执行以下操作更新所有当前记录：

```
UPDATE news
SET end_date=NULL
WHERE end_date='0000-00-00' 
```

然后您可以运行如下查询：

```
SELECT COUNT(*)
FROM news
WHERE NOW()>=date_start
AND (NOW()<date_end OR date_end IS NULL) 
```

如果您没有能力改变这一点，那么[@Arion 的回答](https://stackoverflow.com/a/10397336/370103)是一个很好的“ [hack fix](http://en.wikipedia.org/wiki/Kludge) ”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:59:41.027

为什么你可以这样做：

```
SELECT COUNT(*) FROM news 
WHERE data_start <= NOW() AND (data_end >=NOW() OR data_end ='0000-00-00') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:02:27.100

你很接近：

```
SELECT COUNT(*) FROM news 
WHERE 
  data_start<=NOW()
  AND (data_end='0000-00-00' OR data_end>=NOW()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:04:12.220

这应该可以工作，尽管您可能想检查服务器上的日期格式：

```
SELECT COUNT(*) FROM news WHERE NOW() BETWEEN data_start AND IsNull(data_end, cast('1/1/9999' as datetime)) 
```

# javascript - 读取 Cookie 会给出奇怪的格式

> ID：10397316
> 
> 赞同：1
> 
> 时间：2012-05-01T11:56:46.057
> 
> 标签：javascript, cookies

我正在尝试读取名为 Pdf 的 cookie，它具有以下值

```
http://engine.edocbuilder.com/include/fileDownload-aspx?p=xBfpz3UGPkWamLTDILo%2fWbFqh3FomdYuByiTwfB4RXN0sDN6tY%2fDfxJzzfPZblUl5aSBO3v96%2bJ6acwT7L5oi8tyMuGwKshYtGK%2bfhgiSfM%3d&s=4995b496-e735-4a26-9801-253a34ab0481
```

但是当我读到这个 ​​cookie 时，我得到了以下格式的值，你能告诉我解决方案吗？

```
s=a4823a90%2D80e6%2D4006%2D909c%2D69d567f2d318&http%3A%2F%2Fengine%2Eedocbuilder%2Ecom%2Finclude%2FfileDownload%2Easpx%3Fp=%2BRj53ETGUI%2FeK7H8yo2Zj%2F6z9Ggmk4VEgmPEtoA2NPDhomzjaYvk2wkh0OZzWt8OtDcATY%2BknqGG8AuxddA6LWccWAfbQgtI0dlVkWevheg%3D
```

以下是读取cookie的代码：

```
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
     x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
     y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
     x=x.replace(/^\s+|\s+$/g,"");
     if (x==c_name)
     {
         return unescape(y);
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:07:39.607

读取和写入 cookie 使用这个函数：

```
function setCookie(c_name, value, expiredays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString() + "; path=/");
}
function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) 
                c_end = document.cookie.length;
            return unescape(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:03:12.523

cookie 包含 URL 编码数据。用于[`unescape`](https://developer.mozilla.org/en/DOM/window.unescape)解码字符串：

```
var cookie = "s=a4823a90%2D80e6%2D4006%2D909c%2D69d567f2d318&http%3A%2F%2Fengine%2Eedocbuilder%2Ecom%2Finclude%2FfileDownload%2Easpx%3Fp=%2BRj53ETGUI%2FeK7H8yo2Zj%2F6z9Ggmk4VEgmPEtoA2NPDhomzjaYvk2wkh0OZzWt8OtDcATY%2BknqGG8AuxddA6LWccWAfbQgtI0dlVkWevheg%3D"
// Find starting position of "http" and retrieve the URL from there
var unEscapedURL = unescape(cookie.substring(cookie.indexOf("http"), cookie.length)); 
```

这是[一个工作小提琴](http://jsfiddle.net/JamesHill/Xw9Pa/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:03:43.183

只需使用本机`decodeURIComponent`方法即可获得正确的格式：

```
return decodeURIComponent(y); 
```

[现场测试用例](http://jsfiddle.net/fnVgy/)。

“问题”出在编写 cookie 的代码中，由于某种原因，它被编码了。

# android - 每次通过光标迭代记录后更新单选按钮

> ID：10397317
> 
> 赞同：0
> 
> 时间：2012-05-01T11:56:52.250
> 
> 标签：android, radio-group

我有三个单选按钮和一个方法，每次单击“下一步”按钮时。下一条记录将使用 setonclickListener 显示。目标是清除每条记录后的所有单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:00:40.940

答案很简单，我尝试使用 setChecked(false) 更改值；对于每个单选按钮，但每次我单击该按钮时它都会被清除。我正在寻找的答案是`clearCheck()`RadioGroup 类，这相当于重置。

# winapi - GetClipBoardOwner 与 Adob e acrobat 阅读器

> ID：10397320
> 
> 赞同：1
> 
> 时间：2012-05-01T11:57:03.693
> 
> 标签：winapi, clipboard, acrobat

为什么 GetClipBoardOwner 总是使用 acrobat reader 返回 0 ，

将 GetClipBoardOwner 与任何其他 MS 应用程序（例如 Notepad.exe）一起使用时，结果将是真正的剪贴板所有者，但是当与 Adob​​e acrobat 阅读器一起使用时，我没有得到任何意味着 0 的结果

我调用了 GetLastError() ，它给出了正确的句柄，但是使用 Adob​​e acrobat 阅读器它给出了 0 作为结果

请问有人可以解释一下吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:11:20.067

adobe acrobat 发生了一些非常奇怪的事情：

Acrobat 在使用 NULL (OpenClipboard(NULL)) 打开剪贴板后使用 EmptyClipboard() 获取所有权，这意味着所有者 HWND 为 NULL。

到这里为止，一切都很好，奇怪的是它在所有者为 NULL 时使用 SetClipboardData()，从 MSDN 和我自己的经验来看，这种情况下 SetClipboardData() 应该失败，但在 acrobat 的情况下 SetClipboardData( ) 不会失败，并将数据放在剪贴板中，而所有者为 NULL！

这就是您获得 NULL 所有者的原因。新的悬而未决的问题是为什么 SetClipboardData() 不会失败......

# php - jQuery 联系表

> ID：10397321
> 
> 赞同：0
> 
> 时间：2012-05-01T11:57:03.727
> 
> 标签：php, jquery

我一直在编写有关 Net Tuts 的教程，以便为我的网站创建联系表格。教程链接如下：

[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

我有它的功能，但是一直在尝试一种在表单中添加额外字段以供评论的方法。所有其他字段都提交到两个电子邮件地址（我的网站电子邮件和发件人也收到副本），但评论字段一直显示“未输入评论”

我的表单代码如下：

[contact.php 页面]

```
<div id="content">
<div id="contact_form">
    <div class="padding">
<h2>Contact Me</h2>
<p>If you would like to contact me regarding a quote or indeed anything relating to the website
please use the form below and I will get to you as soon as possible. Thanks!</p>
<form name="contact" method="post" action="">
   <fieldset>
     <label for="name" id="name_label">Name</label>
     <input type="text" name="name" id="name" size="30" value="" class="text-input" />
     <label class="error" for="name" id="name_error">This field is required.</label><br />

     <label for="email" id="email_label">Return Email</label>
     <input type="text" name="email" id="email" size="30" value="" class="text-input" />
     <label class="error" for="email" id="email_error">This field is required.</label><br />

     <label for="phone" id="phone_label">Return Phone</label>
     <input type="text" name="phone" id="phone" size="30" value="" class="text-input" />
     <label class="error" for="phone" id="phone_error">This field is required.</label><br />

     <label for="comment" id="comment_label">Comment</label>
     <textarea name="comments" rows="10" cols="30" ></textarea>
     <input type="text" name="comment" id="comment" size="300" value="" class="text-input" />
     <label class="error" for="comment" id="comment_error">This field is required.</label><br />
     <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
   </fieldset>
 </form>    
    </div>
</div>
</div> 
```

[进程.php]

```
 <?php
if ((isset($_POST['name'])) && (strlen(trim($_POST['name'])) > 0)) {
    $name = stripslashes(strip_tags($_POST['name']));
} else {$name = 'No name entered';}
if ((isset($_POST['email'])) && (strlen(trim($_POST['email'])) > 0)) {
    $email = stripslashes(strip_tags($_POST['email']));
} else {$email = 'No email entered';}
if ((isset($_POST['phone'])) && (strlen(trim($_POST['phone'])) > 0)) {
    $phone = stripslashes(strip_tags($_POST['phone']));
} else {$phone = 'No phone entered';}
if ((isset($_POST['comment'])) && (strlen(trim($_POST['comment'])) > 0)) {
    $comment = stripslashes(strip_tags($_POST['comment']));
} else {$comment = 'No comment entered';}
ob_start();
?>
<html>
<head>
<style type="text/css">
</style>
</head>
<body>
<table width="550" border="1" cellspacing="2" cellpadding="2">
  <tr bgcolor="#eeffee">
    <td>Name</td>
    <td><?=$name;?></td>
  </tr>
  <tr bgcolor="#eeeeff">
    <td>Email</td>
    <td><?=$email;?></td>
  </tr>
  <tr bgcolor="#eeffee">
    <td>Phone</td>
    <td><?=$phone;?></td>
  </tr>
   <tr bgcolor="#eeffee">
    <td>Comment</td>
    <td><?=$comment;?></td>
   </tr>
</table>
</body>
</html>
<?php
$body = ob_get_contents();

$to = '';
$email = '';
$fromaddress = "";
$fromname = "Online Contact";
$test = $comment;

require("phpmailer.php");

$mail = new PHPMailer();

$mail->From     = $_POST['email'];
$mail->FromName = "Contact Form";
$mail->AddAddress("contact@ncwebcreative.co.uk","Name 2");

$mail->WordWrap = 50;
$mail->IsHTML(true);

$mail->Subject  =  "Contact form submitted";
$mail->Body     =  $body;
$mail->AltBody  =  "This is the text-only body";

if(!$mail->Send()) {
    $recipient = 'your_email@example.com';
    $subject = 'Contact form failed';
    $content = $body;
  mail($recipient, $subject, $content, "From: mail@yourdomain.com\r\nReply-To: $email\r\nX-Mailer: DT_formmail");
  exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:13:34.233

需要修改代码：

```
$("input#comment").focus(); 
```

至

```
$("textarea#comment").focus(); 
```

能够在 jquery 中使用文本区域

不管怎么说，多谢拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:05:40.750

尝试摆脱这一行：

```
<input type="text" name="comment" id="comment" size="300" value="" class="text-input" /> 
```

您在文本区域内有一个文本输入字段。您可能需要`id="comment"`根据其余代码添加到您的文本区域。

还将文本区域名称更改为注释。

# jpa - 使用 openJPA 更新记录时的最佳实践

> ID：10397322
> 
> 赞同：3
> 
> 时间：2012-05-01T11:57:06.687
> 
> 标签：jpa, entitymanager

我想知道使用 JPA 更新记录的最佳做法是什么？我目前已经设计了自己的模式，但我怀疑这绝不是最佳实践。我所做的基本上是查看记录是否在数据库中，如果我没有找到它，我会调用该`enityManager.persist(object<T>)`方法。如果它确实存在，我调用该`entityManager.Merge(Object<T>)`方法。

我问的原因是，我发现合并方法查看记录是否已经在数据库中，如果它不在数据库中，则继续添加它，如果是，它使必要的改变。此外，您是否需要将合并调用嵌套在 getTransaction().begin() 和 getTransaction.commit() 中？这是我到目前为止...

```
 try{
        launchRet = emf.find(QuickLaunch.class, launch.getQuickLaunchId());
        if(launchRet!=null){
            launchRet = emf.merge(launch);
        }
        else{
            emf.getTransaction().begin();
            emf.persist(launch);
            emf.getTransaction().commit();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:05:50.847

如果您尝试保存的实体已经有一个 ID，那么它必须存在于数据库中。如果它不存在，您可能不想盲目地重新创建它，因为这意味着其他人已经删除了该实体，并且更新它没有多大意义。

该`merge()`方法持久化一个尚未持久化的实体（没有 ID 或版本），如果实体是持久化的，则更新该实体。`merge()`因此，除了调用（并将此调用返回的值返回给）之外，您无需执行任何操作`merge()`。

事务是一个功能性的原子工作单元。它应该在更高级别（在服务层）进行划分。例如，将资金从一个帐户转移到另一个帐户需要在同一交易中完成两个帐户更新，以确保两个更改都成功或失败。从一个帐户中取出资金而未能将其添加到另一个帐户将是一个重大错误。

# iphone - 苹果证书，有什么方法可以在没有代理的情况下提交给 iTunes？

> ID：10397324
> 
> 赞同：0
> 
> 时间：2012-05-01T11:57:21.730
> 
> 标签：iphone, app-store-connect, iphone-developer-program

我知道只有代理才能生成分发配置文件以提交给 iTunes，我的问题是，有没有办法让具有代理帐户中生成的证书的非代理向 iTunes 提交应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:08:28.633

我不知道这是否对您有帮助，但是，我可以通过以下方式提交给 iTunes：

*   我的代理的分发资料。
*   我的代理的私钥。

# iphone - 我需要帮助在地图标注上绘制指针

> ID：10397329
> 
> 赞同：1
> 
> 时间：2012-05-01T11:58:09.477
> 
> 标签：iphone, objective-c, quartz-graphics

我没有石英绘图的经验。

我需要在标注视图上绘制一个矩形。我找到了一些示例代码来绘制它。

我目前的代码是

```
- (void)drawRect:(CGRect)rect {
    CGFloat stroke = 1.0;
    CGFloat radius = 7.0;
    CGMutablePathRef path = CGPathCreateMutable();
    UIColor *color;
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGFloat parentX = [self relativeParentXPosition];

    //Determine Size
    rect = self.bounds;
    rect.size.width -= stroke + 14;
    rect.size.height -= stroke + 14 + CalloutMapAnnotationViewHeightAboveParent;
    rect.origin.x += stroke / 2.0 + 7;
    rect.origin.y += stroke / 2.0 + 7;

    //Create Path For Callout Bubble
    CGPathMoveToPoint(path, NULL, rect.origin.x, rect.origin.y + radius);
    CGPathAddLineToPoint(path, NULL, rect.origin.x, rect.origin.y + rect.size.height - radius);
    CGPathAddArc(path, NULL, rect.origin.x + radius, rect.origin.y + rect.size.height - radius, radius, 0.0f, M_PI / 2, 1);
    CGPathAddLineToPoint(path, NULL, parentX - 15, rect.origin.y + rect.size.height);
    CGPathAddLineToPoint(path, NULL, parentX, rect.origin.y + rect.size.height + 15);
    CGPathAddLineToPoint(path, NULL, parentX + 15, rect.origin.y + rect.size.height);
    CGPathAddLineToPoint(path, NULL, rect.origin.x + rect.size.width - radius, rect.origin.y + rect.size.height);
    CGPathAddArc(path, NULL, rect.origin.x + rect.size.width - radius, rect.origin.y + rect.size.height - radius, radius, M_PI / 2, 0.0f, 1);
    CGPathAddLineToPoint(path, NULL, rect.origin.x + rect.size.width, rect.origin.y + radius);
    CGPathAddArc(path, NULL, rect.origin.x + rect.size.width - radius, rect.origin.y + radius, radius, 0.0f, -M_PI / 2, 1);
    CGPathAddLineToPoint(path, NULL, rect.origin.x + radius, rect.origin.y);
    CGPathAddArc(path, NULL, rect.origin.x + radius, rect.origin.y + radius, radius, -M_PI / 2, M_PI, 1);
    CGPathCloseSubpath(path);

    //Fill Callout Bubble & Add Shadow
    color = [[UIColor blackColor] colorWithAlphaComponent:.6];
    [color setFill];
    CGContextAddPath(context, path);
    CGContextSaveGState(context);
    CGContextSetShadowWithColor(context, CGSizeMake (0, self.yShadowOffset), 6, [UIColor colorWithWhite:0 alpha:.5].CGColor);
    CGContextFillPath(context);
    CGContextRestoreGState(context);

    //Stroke Callout Bubble
    color = [[UIColor darkGrayColor] colorWithAlphaComponent:.9];
    [color setStroke];
    CGContextSetLineWidth(context, stroke);
    CGContextSetLineCap(context, kCGLineCapSquare);
    CGContextAddPath(context, path);
    CGContextStrokePath(context);

    //Determine Size for Gloss
    CGRect glossRect = self.bounds;
    glossRect.size.width = rect.size.width - stroke;
    glossRect.size.height = (rect.size.height - stroke) / 2;
    glossRect.origin.x = rect.origin.x + stroke / 2;
    glossRect.origin.y += rect.origin.y + stroke / 2;

    CGFloat glossTopRadius = radius - stroke / 2;
    CGFloat glossBottomRadius = radius / 1.5;

    //Create Path For Gloss

    CGMutablePathRef glossPath = CGPathCreateMutable();
    CGPathMoveToPoint(glossPath, NULL, glossRect.origin.x, glossRect.origin.y + glossTopRadius);
    CGPathAddLineToPoint(glossPath, NULL, glossRect.origin.x, glossRect.origin.y + glossRect.size.height - glossBottomRadius);
    CGPathAddArc(glossPath, NULL, glossRect.origin.x + glossBottomRadius, glossRect.origin.y + glossRect.size.height - glossBottomRadius, glossBottomRadius, M_PI, M_PI / 2, 1);
    CGPathAddLineToPoint(glossPath, NULL, glossRect.origin.x + glossRect.size.width - glossBottomRadius, glossRect.origin.y + glossRect.size.height);
    CGPathAddArc(glossPath, NULL, glossRect.origin.x + glossRect.size.width - glossBottomRadius, glossRect.origin.y + glossRect.size.height - glossBottomRadius, glossBottomRadius, M_PI / 2, 0.0f, 1);
    CGPathAddLineToPoint(glossPath, NULL, glossRect.origin.x + glossRect.size.width, glossRect.origin.y + glossTopRadius);
    CGPathAddArc(glossPath, NULL, glossRect.origin.x + glossRect.size.width - glossTopRadius, glossRect.origin.y + glossTopRadius, glossTopRadius, 0.0f, -M_PI / 2, 1);
    CGPathAddLineToPoint(glossPath, NULL, glossRect.origin.x + glossTopRadius, glossRect.origin.y);
    CGPathAddArc(glossPath, NULL, glossRect.origin.x + glossTopRadius, glossRect.origin.y + glossTopRadius, glossTopRadius, -M_PI / 2, M_PI, 1);
    CGPathCloseSubpath(glossPath);

    //Fill Gloss Path   
    CGContextAddPath(context, glossPath);
    CGContextClip(context);
    CGFloat colors[] =
    {
        1, 1, 1, .3,
        1, 1, 1, .1,
    };
    CGFloat locations[] = { 0, 1.0 };
    CGGradientRef gradient = CGGradientCreateWithColorComponents(space, colors, locations, 2);
    CGPoint startPoint = glossRect.origin;
    CGPoint endPoint = CGPointMake(glossRect.origin.x, glossRect.origin.y + glossRect.size.height);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);

    //Gradient Stroke Gloss Path    
    CGContextAddPath(context, glossPath);
    CGContextSetLineWidth(context, 2);
    CGContextReplacePathWithStrokedPath(context);
    CGContextClip(context);
    CGFloat colors2[] =
    {
        1, 1, 1, .3,
        1, 1, 1, .1,
        1, 1, 1, .0,
    };
    CGFloat locations2[] = { 0, .1, 1.0 };
    CGGradientRef gradient2 = CGGradientCreateWithColorComponents(space, colors2, locations2, 3);
    CGPoint startPoint2 = glossRect.origin;
    CGPoint endPoint2 = CGPointMake(glossRect.origin.x, glossRect.origin.y + glossRect.size.height);
    CGContextDrawLinearGradient(context, gradient2, startPoint2, endPoint2, 0);

    //Cleanup
    CGPathRelease(path);
    CGPathRelease(glossPath);
    CGColorSpaceRelease(space);
    CGGradientRelease(gradient);
    CGGradientRelease(gradient2);
} 
```

![这是我得到的当前标注](../Images/f8e8bc05446f048b835527f8b72f43ef.png)

这是我得到的当前标注。但我需要在矩形顶部的边缘绘制三角形。

通过研究这两条线，我需要改变

```
CGPathAddLineToPoint(path, NULL, parentX - 15, rect.origin.y + rect.size.height);
        CGPathAddLineToPoint(path, NULL, parentX, rect.origin.y + rect.size.height + 15); 
```

但我在石英图形方面很差。

我需要的标注如下图所示

![在此处输入图像描述](../Images/5e7d1d036ac51b2216cc83094958958e.png)

三角形需要向上标注视图。

有石英图形知识的人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:22:50.657

好吧，如果您正在寻找位于顶部的标注，请试试这个。将标注气泡的路径替换为以下内容：

```
//Determine Size
    rect = self.bounds;
    rect.size.width -= stroke + 14;
    rect.size.height -= stroke + 14 + CalloutMapAnnotationViewHeightAboveParent;
    rect.origin.x += stroke / 2.0 + 7;
    rect.origin.y += stroke / 2.0 + 7 + 14;    

//Create Path For Callout Bubble
        CGPathMoveToPoint(path, NULL, rect.origin.x, rect.origin.y + radius);
        CGPathAddLineToPoint(path, NULL, rect.origin.x, rect.origin.y + rect.size.height - radius); //Left line
        CGPathAddArc(path, NULL, rect.origin.x + radius, rect.origin.y + rect.size.height - radius, radius, 0.0f, M_PI / 2, 1); //Bottom left arc
    //    CGPathAddLineToPoint(path, NULL, parentX - 15, rect.origin.y + rect.size.height); //bottom to callout line
    //    CGPathAddLineToPoint(path, NULL, parentX, rect.origin.y + rect.size.height + 15); //callout left
    //    CGPathAddLineToPoint(path, NULL, parentX + 15, rect.origin.y + rect.size.height); //callout right
        CGPathAddLineToPoint(path, NULL, rect.origin.x + rect.size.width - radius, rect.origin.y + rect.size.height); //bottom to right line
        CGPathAddArc(path, NULL, rect.origin.x + rect.size.width - radius, rect.origin.y + rect.size.height - radius, radius, M_PI / 2, 0.0f, 1); //bottom right
        CGPathAddLineToPoint(path, NULL, rect.origin.x + rect.size.width, rect.origin.y + radius); //right line
        CGPathAddArc(path, NULL, rect.origin.x + rect.size.width - radius, rect.origin.y + radius, radius, 0.0f, -M_PI / 2, 1); //top right
        CGPathAddLineToPoint(path, NULL, parentX + 15, rect.origin.y); //top right to right callout
        CGPathAddLineToPoint(path, NULL, parentX, rect.origin.y - 15); //callout right
        CGPathAddLineToPoint(path, NULL, parentX - 15, rect.origin.y); //callout left
        CGPathAddLineToPoint(path, NULL, rect.origin.x + radius, rect.origin.y); //top left callout to top left
        CGPathAddArc(path, NULL, rect.origin.x + radius, rect.origin.y + radius, radius, -M_PI / 2, M_PI, 1); //top left
        CGPathCloseSubpath(path); //Path closed, no line draw 
```

我相信这应该有效（尚未测试过）。但是光泽路径取决于正在使用的标注矩形，所以我认为其他一切都应该正常工作。

作为旁注，Core Graphics 涉及的绘制路径有点像在一张纸上绘图。CGPathMoveToPoint 涉及放下铅笔。之后的一切都是按顺序绘制直线或弧线。您需要做的就是读取线/曲线被绘制到的点。请注意，弧被转换为曲线，但要阅读它们，您需要知道 pi、pi/2 和 pi/4 在单位圆上的位置。这会告诉您弧线的绘制位置。但总的来说，您可以假设（至少在这种情况下）弧对应于上一条线绘制到的实际角。我添加了注释，指示哪些路径元素对应于框的哪个部分。我还注释掉了底部标注而不是删除它。您可以取消注释以再次绘制底部标注，但您 我需要记住注释掉顶部并将矩形向后移动（我将它向下移动了 14）。还要考虑避免使用“幻数”，例如标注 (15) 的大小，而是在您的文件中放置类似这样的内容：

`#define CalloutSize 15.0f`

这样做并插入`CalloutSize`代码而不是`15`让您轻松更改其大小，而无需搜索它正在使用的每个实例。

# jquery - jRating 星在 Zend 框架中不显示

> ID：10397330
> 
> 赞同：-1
> 
> 时间：2012-05-01T11:58:20.490
> 
> 标签：jquery, zend-framework

我正在使用 jRating - jQuery Plugin v2.2（最新版本），我可以让它在 html 中工作，但是当我将所有内容添加到我的 ZF 项目时它不起作用。星图不显示..路径是 100% 我已经三重检查了。我对 jQuery 灯箱插件的图像也有问题，上一个、下一个和关闭图像按钮不起作用，ZF jQuery 和图像是否缺少一些东西？

这是采埃孚版本：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >            <title>Clubs - Manchester Nightlife</title>
<link href="/MN/public/css/jRating.jquery.css" media="screen" rel="stylesheet"     type="text/css" >
<script type="text/javascript" src="/MN/public/js/jquery.js"></script>
<script type="text/javascript" src="/MN/public/js/jRating.jquery.js"></script>
    </head>
    <body>
<div class="exemple">
    <div class="basic" id="12_1"></div>
</div>
    <script type="text/javascript">
    $(document).ready(function(){
        $('.basic').jRating();
    });
</script>
</div>
    <div class="clear"></div>
    </div>
</body> 
```

这是ZF版本

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Pluggin jRating : Ajax rating system with jQuery</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="jquery/jRating.jquery.css" type="text/css" />
</head>
<body>
<div class="exemple">
<div class="basic" id="4_1"></div>
</div>
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="jquery/jRating.jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.basic').jRating();
    });
</script> 
```

由于我使用 ZF 方式将它们添加到 head 标签中的方式，脚本标签位于不同的位置：

```
$this->headScript()->prependFile($this->baseUrl('/js/jquery.js')); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:40:39.360

每当我使用 ZendX 的 JQuery 库时，我总是必须将以下代码添加到布局的标题中

```
<?php echo $this->headLink();
      echo $this->headScript();
      $this->jQuery()->setUiVersion( '1.8.7' )->setVersion( '1.4.4' );
      echo $this->jQuery(); ?> 
```

我不知道为什么会这样，但确实如此。

确保将视图助手添加到 application.ini

```
resources.view.helperPath.ZendX_JQuery_View_Helper = APPLICATION_PATH "/../library/ZendX/JQuery/View/Helper" 
```

然后在 bootstrap.php

```
protected function _initViewHelpers()
{
    $view = new Zend_View();
    $viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();

    $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');
    $view->addHelperPath('ZendX/JQuery/View/Helper/JQuery', 'ZendX_JQuery_View_Helper_JQuery');

    $viewRenderer->setView($view);
    Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);

} 
```

# c - libcurl：有没有什么方法可以在不登录的情况下获得 FTPS 的证书？

> ID：10397334
> 
> 赞同：4
> 
> 时间：2012-05-01T11:59:34.473
> 
> 标签：c, ftp, openssl, certificate, libcurl

libcurl 可以通过 using 获取证书信息[`CURLINFO_CERTINFO`](http://curl.haxx.se/libcurl/c/curl_easy_getinfo.html#CURLINFOCERTINFO)，但该信息必须在 之后`curl_easy_perform`，这意味着您需要先登录 FTP 服务器而不验证证书。

FileZilla 等 FTP 软件获取证书，然后在发送用户名和密码之前询问用户是否信任它们。

以下 OpenSSL 命令也可以获取没有用户名或密码的证书：

`$ openssl s_client -showcerts -connect ftp.godaddy.com:21 -starttls ftp`

我还尝试使用`CURLOPT_VERBOSE`来监视 FTP 命令。命令正常后`AUTH TLS`，它将立即停止并尝试获取证书信息。但这没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T19:52:15.237

You can accomplish this by using the `CURLOPT_SSL_CTX_FUNCTION` to install a callback function when the `SSL_CTX` gets created. From that CURL callback, you can install your own verify function callback using the regular OpenSSL API `SSL_CTX_set_cert_verify_callback()`.

The [CURL web site](http://curl.haxx.se/) provides [an example](http://curl.haxx.se/libcurl/c/curlx.html).

# arrays - 如何从数组中弹出一个元素而不影响其他变量？

> ID：10397335
> 
> 赞同：0
> 
> 时间：2012-05-01T11:59:40.370
> 
> 标签：arrays, ruby, reference

当我尝试从数组中弹出一个元素时，它会弹出。当我在弹出之前将该数组分配给另一个变量，然后如果我弹出，弹出操作会影响两个数组。

例如：

```
 ruby-1.9.2-p290 :339 > a= [1,2,3]
     => [1, 2, 3] 
    ruby-1.9.2-p290 :340 > b = a
     => [1, 2, 3] 
    ruby-1.9.2-p290 :341 > a
     => [1, 2, 3] 
    ruby-1.9.2-p290 :342 > b
     => [1, 2, 3] 
    ruby-1.9.2-p290 :343 > a.pop
     => 3 
    ruby-1.9.2-p290 :344 > a
     => [1, 2] 
    ruby-1.9.2-p290 :345 > b
     => [1, 2] #WHY?
    ruby-1.9.2-p290 :346 > x = [1,2,3]
     => [1, 2, 3] 
    ruby-1.9.2-p290 :347 > y = x
     => [1, 2, 3] 
    ruby-1.9.2-p290 :348 > z = x
     => [1, 2, 3] 
    ruby-1.9.2-p290 :349 > y
     => [1, 2, 3] 
    ruby-1.9.2-p290 :350 > z
     => [1, 2, 3] 
    ruby-1.9.2-p290 :351 > y.pop
     => 3 
    ruby-1.9.2-p290 :352 > y
     => [1, 2] 
    ruby-1.9.2-p290 :353 > z
     => [1, 2] # WHY?
    ruby-1.9.2-p290 :354 > x
     => [1, 2] 
    ruby-1.9.2-p290 :355 > 
```

如果我使用pop，所有变量都会受到影响。如何保留原始数组并仅从另一个数组中弹出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T12:05:32.777

如果将数组分配给新变量，则不会复制它，而只是设置对原始数组的引用。如果要保留原始数组，则必须使用以下方法克隆它[`dup`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-dup)：

```
ruby-1.9.2-p180 :001 > a = [1,2,3]
 => [1, 2, 3] 
ruby-1.9.2-p180 :002 > b = a.dup
 => [1, 2, 3] 
ruby-1.9.2-p180 :003 > b.pop
 => 3 
ruby-1.9.2-p180 :004 > a
 => [1, 2, 3] 
ruby-1.9.2-p180 :005 > b
 => [1, 2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T12:28:49.500

ruby 中的赋值运算符仅在处理 POD（普通旧数据）对象（如数字、字符串）时才制作值的副本。在其他情况下，它只是将引用复制到对象。

并且不要忘记，那个`dup`(and `clone`) 方法只生成对象的浅拷贝。这意味着如果您的数组内部有其他非 POD 对象，它们将不会被复制。

```
inner = [1,2,3]
 => [1, 2, 3]
outer = [inner, 7,8,9]
 => [[1, 2, 3], 7, 8, 9]

outer_dup = outer.dup
inner.pop
 => 3

outer
 => [[1, 2], 7, 8, 9]
outer_dup
 => [[1, 2], 7, 8, 9] 
```

您可以通过重写`clone`方法来自己处理深度复制来避免它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:15:39.067

Ruby 是非常面向对象的。除了极少数例外，Ruby 几乎总是通过引用而不是值来传递变量。这是一个非常重要的概念。[看看这个](http://www.cs.fsu.edu/~myers/c++/notes/references.html)。它不是红宝石，但它可能有助于揭开它的神秘面纱。希望有帮助！

# c++ - 如何创建模板类型迭代器的 STL 对象？

> ID：10397338
> 
> 赞同：2
> 
> 时间：2012-05-01T11:59:48.743
> 
> 标签：c++, visual-c++, stl, iterator, g++

如何创建模板类型迭代器的 STL 对象？我正在尝试创建模板类型的迭代器的 STL 对象（例如 Vector），如下所示

```
vector<vector<T>::iterator> it1; 
```

这在 g++ 和 VC++ 中都失败了。两个编译器几乎都说了同样的话

**克++**

```
Main.cpp:8:49: error: type/value mismatch at argument 1 in template parameter li
st for `template<class _T1, class _T2> struct std::pair'
Main.cpp:8:49: error:   expected a type, got `std::vector<T>::iterator' 
```

**VC++**

```
error C2923: 'std::vector' : 'std::vector<T>::iterator' is not a valid template type argument for parameter '_Ty' 
```

如果您正在创建具体类型的迭代器，则偏离课程，例如

```
vector<vector<int>::iterator> it1; 
```

这是一个最小的失败示例

```
#include<vector>
#include<iterator>
using namespace std;
template<typename T>
class Spam {
public:
    vector<vector<int>::iterator> it1; #Compiles Fine
    vector<vector<T>::iterator>   it2; #Fails
    }; 
```

**笔记**

我从答案中了解到的是，如果类型依赖，则需要为关键字添加前缀`typename`。如果是这样的话

```
vector< vector<T>  >  it; 
```

也应该失败，但事实并非如此。如果`typename`依赖名称是`typedef`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:04:46.147

您必须添加 typename 关键字：

```
vector<typename vector<T>::iterator>   it2; 
```

[这个](http://pages.cs.wisc.edu/~driscoll/typename.html)页面帮助我最了解它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T12:04:37.983

您需要`typename`用作：

```
vector<typename vector<T>::iterator>   it2; 
```

这是因为它`iterator`是一个依赖名称，因为它依赖于模板参数`T`。

作为旁注，请注意，当向量调整自身大小时，向量的迭代器会失效。因此，此类迭代器的向量可能没有您想象的那么*有用*。要使这样的向量有用，请确保该向量永远​​不会调整自身的大小，您将在此迭代器向量中存储其迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:04:52.870

这已经被问过很多次了......

```
 vector<typename vector<T>::iterator> 
```

问题是嵌套类型`iterator`依赖于模板的参数，所以你需要告诉编译器它是一个类型，否则它会假定它是一个常规模板。

# stanford-nlp - 解析短语动词

> ID：10397342
> 
> 赞同：5
> 
> 时间：2012-05-01T11:59:59.617
> 
> 标签：stanford-nlp

有没有人尝试过用斯坦福 NLP 解析短语动词？问题在于可分离的短语动词，例如：爬上去，做完了：*我们爬上那座山。我必须重新完成这项工作。*

第一个短语在解析树中如下所示：

```
(VP 
    (VBD climbed)
    (ADVP 
        (IN that) 
        (NP (NN hill)
        )
    ) 
    (ADVP 
        (RB up)
    )
) 
```

第二句话：

```
(VB do) 
   (NP 
     (DT this) 
     (NN job)
   ) 
(PP 
   (IN over)
) 
```

所以看起来阅读解析树是正确的方法，但是如何知道动词将是短语呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T17:44:07.583

依赖解析，老兄。查看两个句子中的 prt（短语动词助词）依存关系。有关更多信息，请参阅[斯坦福类型依赖手册](http://nlp.stanford.edu/software/dependencies_manual.pdf)。

```
nsubj(climbed-2, We-1)
root(ROOT-0, climbed-2)
det(hill-4, that-3)
dobj(climbed-2, hill-4)
prt(climbed-2, up-5)

nsubj(have-2, I-1)
root(ROOT-0, have-2)
aux(do-4, to-3)
xcomp(have-2, do-4)
det(job-6, this-5)
dobj(do-4, job-6)
prt(do-4, over-7) 
```

stanford 解析器为您提供了非常好的依赖解析。如果您需要，我有以编程方式访问这些的代码：[https ://gist.github.com/2562754](https://gist.github.com/2562754)

# java - HTML 单元基础知识失败

> ID：10397343
> 
> 赞同：0
> 
> 时间：2012-05-01T12:00:06.627
> 
> 标签：java, htmlunit

来自 HTMLUnit 的非常基本的示例，该网站未用 Java 编译：

```
final WebClient webClient = new WebClient();
final HtmlPage page = webClient.getPage("http://htmlunit.sourceforge.net"); 
```

我在页面变量上收到错误：类型不匹配：无法从 Page 转换为 HtmlPage。我不明白为什么会发生这种情况我有所有的 jar 文件并且有正确的导入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:08:11.217

要么你使用的是旧版本的 HtmlUnit，它还没有被通用化，要么你使用的是 JDK1.4 或更早版本。最后一个版本是 2.9 版。检查您正在使用的版本。

# php - 将 ajax 响应从 ISO-8859-1 转换为 UTF8

> ID：10397344
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:00:07.110
> 
> 标签：php, ajax, character-encoding

我使用 Ajax 调用来接收希伯来语的响应。结果来自不同的站点并进行了`ISO-8859-1`编码。我的页面是`UTF-8`. 响应看起来像西里尔文：

```
îéãò ìî÷áì  áæ÷ äçáøä äéùøàìéú  àéï 
```

当我尝试使用 ajax 页面上的标题时：

```
header('Content-Type: text/html; charset=ISO-8859-1'); 
```

我得到这个结果：

```
Ã®Ã©Ã£Ã² Ã¬Ã®Ã·Ã¡Ã¬  Ã¡Ã¦Ã· Ã¤Ã§Ã¡Ã¸Ã¤ Ã¤Ã©Ã¹Ã¸Ã Ã¬Ã©Ãº Ã Ã©Ã¯ 
```

`utf8_encode`对反应似乎没有帮助。

我应该怎么做才能正确解码？

谢谢！

**编辑：**

我现在确实注意到显示数据的实际页面的编码为`ISO-8859-1`，但是查看响应的特定标头以及我看到字符集设置为的数据`windows-1255`。

我现在所做的是将标题设置为：

```
header('Content-Type: text/html; charset=windows-1255'); 
```

在 php 方面，我添加`iconv`并简单地**回**显：
**`echo iconv("WINDOWS-1255","UTF-8",$response);`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:39:41.927

您在问题中给出的字符串

```
îéãò ìî÷áì  áæ÷ äçáøä äéùøàìéú  àéï 
```

看起来像 Windows 1255 (Hebrew) 代码页的 Windows 1252 (Latin I) 表示：

```
EE Windows 1252 î Windows 1255 מ - HEBREW LETTER MEM
E9 Windows 1252 é Windows 1255 י - HEBREW LETTER YOD
E3 Windows 1252 ã Windows 1255 ד - HEBREW LETTER DALET
F2 Windows 1252 ò Windows 1255 ע - HEBREW LETTER AYIN
20 Windows 1252   Windows 1255   - SPACE
EC Windows 1252 ì Windows 1255 ל - HEBREW LETTER LAMED
EE Windows 1252 î Windows 1255 מ - HEBREW LETTER MEM
F7 Windows 1252 ÷ Windows 1255 ק - HEBREW LETTER QOF
E1 Windows 1252 á Windows 1255 ב - HEBREW LETTER BET
EC Windows 1252 ì Windows 1255 ל - HEBREW LETTER LAMED
20 Windows 1252   Windows 1255   - SPACE
20 Windows 1252   Windows 1255   - SPACE
E1 Windows 1252 á Windows 1255 ב - HEBREW LETTER BET
E6 Windows 1252 æ Windows 1255 ז - HEBREW LETTER ZAYIN
F7 Windows 1252 ÷ Windows 1255 ק - HEBREW LETTER QOF
20 Windows 1252   Windows 1255   - SPACE
E4 Windows 1252 ä Windows 1255 ה - HEBREW LETTER HE
E7 Windows 1252 ç Windows 1255 ח - HEBREW LETTER HET
E1 Windows 1252 á Windows 1255 ב - HEBREW LETTER BET
F8 Windows 1252 ø Windows 1255 ר - HEBREW LETTER RESH
E4 Windows 1252 ä Windows 1255 ה - HEBREW LETTER HE
20 Windows 1252   Windows 1255   - SPACE
E4 Windows 1252 ä Windows 1255 ה - HEBREW LETTER HE
E9 Windows 1252 é Windows 1255 י - HEBREW LETTER YOD
F9 Windows 1252 ù Windows 1255 ש - HEBREW LETTER SHIN
F8 Windows 1252 ø Windows 1255 ר - HEBREW LETTER RESH
E0 Windows 1252 à Windows 1255 א - HEBREW LETTER ALEF
EC Windows 1252 ì Windows 1255 ל - HEBREW LETTER LAMED
E9 Windows 1252 é Windows 1255 י - HEBREW LETTER YOD
FA Windows 1252 ú Windows 1255 ת - HEBREW LETTER TAV
20 Windows 1252   Windows 1255   - SPACE
20 Windows 1252   Windows 1255   - SPACE
E0 Windows 1252 à Windows 1255 א - HEBREW LETTER ALEF
E9 Windows 1252 é Windows 1255 י - HEBREW LETTER YOD
EF Windows 1252 ï Windows 1255 ן - HEBREW LETTER FINAL NUN 
```

要将该字符集转换为 UTF-8，您需要使用执行此操作的库（例如[`iconv`](http://php.net/iconv)或[`mb_convert_encoding`](http://php.net/mb_convert_encoding)）或自己执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:08:56.660

响应不是 ISO-8859-1 编码的，但可能是 windows-1255 编码的；这样解释，字节是 מידע למקבל בזק החברה הישראלית אין。所以尝试从 windows-1255 转换为 utf-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T19:08:48.720

在把头撞到墙上一段时间后，我决定直截了当，并为角色创建了一个非常容易工作的映射。否则我找不到解决方案。

这是代码：

```
$lat = array('à','á','â','ã','ä','å','æ','ç','è','é','ê','ë','ì','í','î','ï','ð','ñ','ò','ó','ô','õ','ö','÷','ø','ù','ú');
$heb = array('א','ב','ג','ד','ה','ו','ז','ח','ט','י','ך','כ','ל','ם','מ','ן','נ','ס','ע','ף','פ','ץ','צ','ק','ר','ש','ת');
echo str_replace($lat, $heb, $response); 
```

我还发现这些资源很有价值：

```
http://orwell.ru/test/CP/_?cp1252
http://orwell.ru/test/CP/_?cp1255 
```

还有这个：

```
http://kanjidict.stc.cx/recode.php 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-01T12:16:01.717

用`'--enable-zend-multibyte'`.
那么请试试这个

```
mb_convert_encoding("FOO","UTF-8","ISO-8859-1"); 
```

如果你只需要转换。

# javascript - 向超过 3 行的内容添加省略号

> ID：10397348
> 
> 赞同：0
> 
> 时间：2012-05-01T12:00:27.577
> 
> 标签：javascript, jquery, html, css

我正在创建一个 tumblr 主题，当您将鼠标悬停在照片帖子上时，它会显示描述（示例描述如下所示）。

设计者只希望描述的前三行显示并在描述之后放置省略号，如果它溢出了 3 行。

考虑到字符数不够好，最好的解决方法是什么？

谢谢您的帮助...

[http://brendan-rice.tumblr.com/](http://brendan-rice.tumblr.com/)

**示例照片帖子**

```
<div class="description photo" style="background-color: rgb(82, 69, 99);">
    <div style="">
        <input type="hidden" value="22186233340" class="id">
        <span class="title" style="">
        <p style="">
            <a href="http://staff.tumblr.com/post/21806558913/attention-west-coast-check-out-our-official" class="tumblr_blog" style="">staff</a>:
        </p>
        <blockquote style="">
            <p style="">
                <strong style="">Attention West Coast:</strong> Check out our <a href="http://www.tumblr.com/meetup/10107" style="">official Tumblr meetup</a> in Los Angeles on Tuesday 5/1! RSVP <a href="http://www.tumblr.com/meetup/10107" style="">here</a>.
            </p>
        </blockquote>
        <p style="">
            (Source: <a title="meetups" href="http://meetups.tumblr.com/post/21804989817/were-gonna-be-in-la-tuesday-night-come-grab-a" style="">meetups</a>)
        </p>
        </span>
        <div class="actions" style="">
            <span style="float: left;">
            <a target="_blank" href="http://www.tumblr.com/follow/penguinenglishlibrary " class="follow" style="">
            Follow </a>
            </span>
            <span style="float: right;">
            <a target="_blank" href="http://www.tumblr.com/reblog/22186233340/Pw5OgVj1" class="reblog" style="">
            Reblog </a>
            </span>
            <span style="float: right;">
            <a target="_blank" href="http://www.tumblr.com/reblog/22186233340/Pw5OgVj1" class="like" style="">
            Like </a>
            </span>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:55:47.223

**编辑：刚刚发现：[http](http://dotdotdot.frebsite.nl/) ://dotdotdot.frebsite.nl/应该可以解决您的问题（jquery 插件）**

据我所知，没有办法让它换成三行然后省略号。

如果您只想在 1 行之后使用省略号，请使用：

```
.class{
  width:200px;
  text-overflow:ellipsis;
  white-space:nowrap;
  overflow:hidden;
} 
```

但是，您可以做一些棘手的 css 来模拟它，尽管它不会 100% 完美。我附上了一个带有仿真的 jsfiddle：http: [//jsfiddle.net/ET3F8/](http://jsfiddle.net/ET3F8/)

本质上，它包装成 3 行，然后被隐藏。有一个包含省略号文本（“...”）的元素位于容器的右下角。它将覆盖文本并模拟省略号。

问题： - 它将始终显示。如果文本没有溢出，您也许可以使用一些 JS 来隐藏它。- 它有时会破坏一封信。

无论如何，只是一个想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:06:34.367

只需使用`text-overflow: ellipsis`，但您需要修复您希望内容限制的任何内容的宽度。就像是：

```
.myClass
{
    width: 200px;
    text-overflow: ellipsis;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:06:34.733

这个 CSS 是否满足您的需求？

```
text-overflow: ellipsis; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:10:41.473

你被绑定到一个特定的高度，但对我有用。

```
.description .title {
height: 3.7em;
overflow: hidden;
} 
```

# c# - Response.Redirect() 禁用后退按钮

> ID：10397354
> 
> 赞同：3
> 
> 时间：2012-05-01T12:00:52.907
> 
> 标签：c#, asp.net, redirect, iis-7, post-redirect-get

据我了解，`Response.Redirect("http://stackoverflow.com");`告诉浏览器向另一个 URL 发起请求。

这样做的结果之一是浏览器“记住”重定向，并允许按“返回”。

但是，我有一个网站`Response.Redirect`禁用按下浏览器的“返回”按钮的功能，就好像浏览器打开了一个新窗口一样。（与 . 不同，不会忘记浏览历史记录`Server.Transfer`。）

过去重定向曾经正常工作，所以我怀疑这个问题与 IIS 服务器（IIS7）有关。

如果这个问题应该转移到[ServerFault.com](http://Serverfault.com) ，我提前道歉。

**更新**：

1.  这是一些代码：

    ```
    protected void btnClickMe_Click(object sender, EventArgs e)
    {
        // ...
        // some server-side logic
        // ...

        Response.Redirect("NewPage.aspx?ProductID=" + idNum);
    } 
    ```

2.  关于“*禁用按下浏览器的‘后退’按钮的能力*”，我的意思是无法按下该按钮。与打开新窗口时相同。该按钮是灰色的，单击它绝对没有效果。

**更新 2**：

这已经用 IE6 和 IE8 测试过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:44:06.493

问题不在于`Response.Redirect();`.

当我在 OldPage.aspx 上时，我在地址栏中输入了一个新 URL。一旦浏览器加载了新站点，它就会禁用后退按钮。

结论：OldPage.aspx 有问题，而不是重定向到 NewPage.aspx。

我仍然不知道为什么会发生这种情况，但这是一个完全不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:14:24.363

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack) //check if the webpage is loaded for the first time.
        {
            ViewState["PreviousPage"] = 
        Request.UrlReferrer;//Saves the Previous page url in ViewState
        }
    }
    protected void btnBack_Click(object sender, EventArgs e)
    {
        if (ViewState["PreviousPage"] != null)  //Check if the ViewState 
                        //contains Previous page URL
        {
            Response.Redirect(ViewState["PreviousPage"].ToString());//Redirect to 
        //Previous page by retrieving the PreviousPage Url from ViewState.
        }
    } 
```

# .net - 使用 REST 上传 SkyDrive API 文件

> ID：10397358
> 
> 赞同：0
> 
> 时间：2012-05-01T12:00:56.840
> 
> 标签：.net, api, rest, onedrive

我正在使用以下代码测试 SkyDrive 的 API：

```
Dim webRequest As HttpWebRequest = DirectCast(HttpWebRequest.Create("https://apis.live.net/v5.0/me/skydrive/files?access_token=" & Me.ACCESS_TOKEN), HttpWebRequest)
    webRequest.Method = "POST"
    webRequest.ContentType = "multipart/form-data; boundary=A300x"
    webRequest.KeepAlive = True
    webRequest.Timeout = 80000
    Using streamWriter As New System.IO.StreamWriter(webRequest.GetRequestStream())
      streamWriter.Write("--A300x\r\n")
      streamWriter.Write("Content-Disposition: form-data; name=""file""; filename=""HelloWorld.txt""\r\n")
      streamWriter.Write("Content-Type: application/octet-stream\r\n")
      streamWriter.Write("\r\n")
      streamWriter.Write("vooo")
      streamWriter.Write("\r\n")
      streamWriter.Write("--A300x--\r\n")
      streamWriter.Close()
    End Using
    ' response
    Using webResponse As HttpWebResponse = DirectCast(webRequest, HttpWebRequest).GetResponse()
      If webResponse.StatusCode() = HttpStatusCode.OK Then
        Using streamReader As New System.IO.StreamReader(webResponse.GetResponseStream())
          Throw New Exception(streamReader.ReadToEnd())
          streamReader.Close()
        End Using
      End If
      webResponse.Close()
    End Using 
```

收到错误请求 (400)。访问令牌和 URL 已验证且有效。任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:47:46.150

我使用以下方法将文件上传到 Skydrive。工作正常，至于我。

```
 public void uploadFile(string ParentFolderID, string FileName)
    {
        string uri = String.Format(SkyDriveHelper.BaseURI + ParentFolderID + "/files"+"?access_token=" + account.accessInfo.access_token);
        try
        {
            WebClient client = new WebClient();
            client.Headers.Add("Content-Type", "multipart/form-data; boundary=A300x");
            Stream requestStream = client.OpenWrite(uri);

            //writing start boundary
            requestStream.Write("--A300x\r\n".ToByteArray(), 0, "--A300x\r\n".Count());

            //writing body headers
            string header1 = String.Format("Content-Disposition: form-data; name=\"file\"; filename=\"{0}\"\r\n", FileName);
            requestStream.Write(header1.ToByteArray(), 0, header1.Count());
            string header2 = "Content-Type: application/octet-stream\r\n";
            requestStream.Write(header2.ToByteArray(), 0, header2.Count());
            requestStream.Write("\r\n".ToByteArray(), 0, "\r\n".Count());

            //writing body - WRITE BYTES HERE 
            requestStream.Write("HelloWorld".ToByteArray(), 0, "HelloWorld".Count());

            //writing finish boundary
            requestStream.Write("\r\n\r\n".ToByteArray(), 0, "\r\n\r\n".Count());
            requestStream.Write("--A300x\r\n".ToByteArray(), 0, "--A300x\r\n".Count());
            requestStream.Close();

        }
        catch (Exception e)
        {
            MessageBox.Show("Download Error:" + e.Message);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:03:59.023

如果您查看响应正文（或使用 Fiddler 来做同样的事情），您会发现一条 JSON 格式的错误消息，它准确地解释了问题所在。我的第一个猜测是该目标用户不存在文件夹**skydrive 。**

# c++ - Image 类层次结构的设计建议

> ID：10397361
> 
> 赞同：0
> 
> 时间：2012-05-01T12:01:14.107
> 
> 标签：c++, oop

我需要一些关于 Image 类层次结构的设计建议。
目前，我有两种类型的图像（一种是标准图像，第二种不包含标准图像数据）。有时我希望对象为图像数据分配内存，而其他时候我只想让它指向它。

当我想为 TypeA 图像提供特定功能时，就会出现问题。
如果 TypeA 图像继承自 Image，我将不得不复制 Allocated 与非 Allocated Image 的功能。

我确信有更好的方法可以做到这一点，我记得在大学期间使用 mixins 的一些优雅解决方案，但在这里找不到使用它的方法。

我目前的设计看起来像：

```
class Image
{
public:
Image(int width, int height, int bpp);
virtual ~Image() {};
    // getters

    template <typename T>                                  
    T* ptr() { return reinterpret_cast<T*>(m_imageData); } // T depends on bpp

 protected:
    // metadata
    char* m_imageData;
};

class AllocImage : public Image
{
public:
    AllocImage(int width, int height, int bpp, DataType dataType) :
        Image(width, height, bpp, dataType)
    {
        m_imageData = new char[m_dataSize];
    }

    ~AllocImage()
    {
        delete m_imageData;
    }
};

class ImageHolder : public Image
{
public:
    ImageHolder(int width, int height, int bpp, DataType m_dataType);

    void setPtr(const void* ptr);
};

class AllocatedImageTypeA : public AllocImage
{
public:
    // Type A specific methods
};

class NonAllocatedImageTypeA : public ImageHolder
{
public:
    // duplicated Type A specific methods
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:04:56.180

如果所有差异都受限于图像的保存方式（分配与否），您可以使用[策略模型](http://en.wikipedia.org/wiki/Policy-based_design)。

简短的解释是您将策略对象传递给图像，其中策略描述您是否需要释放图像，如何访问它等，基本上是与图像如何产生的差异有关的任何内容数据被保存（分配与指向）。那么您对图像的所有访问都将通过该策略进行。

例如，而不是写

```
delete image; 
```

你会写：

```
policy.del(image); 
```

根据策略的实际类型（符合图像要求），可以在哪里`policy.del`委托或禁止操作`delete`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:15:18.263

为什么有这么多种类？如果差异仅在于分配，那么只需创建多个构造函数，一个接受指向预分配数据持有者的指针，一个不接受并在内部进行分配。您还可以使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)来获取行为/功能的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T17:22:28.257

我有一个类似的案例。

让我们澄清一下。您的类层次结构不是基于是否分配了图像，但是，每个类都会有一些特性。

您可能希望有一个非常专业的类来分配图像，另一个引用，并用另一个具有相似特征的相同层次结构扭曲该类。

下面的例子解释了用另一个类包装一个类的想法，来自相同的继承，这似乎适用于您的问题。

免责声明：请忽略一些小错误或不相关的语法错误：

```
// generic base class for my image library:
/* abstract */ class GenericImage
{
public:
   int width;
   int height;

public:
    /* constructor */ GenericImage() ;
    /* destructor */ ~GenericImage() ;

    /* constructor */ GenericImage(int newwidth, int newheight);
}; // class GenericImage

// in charge of allocating or deallocating an image
class AllocatedImage: GenericImage
{
public:
    /* constructor */ AllocatedImage() ;
    /* destructor */ ~AllocatedImage() ;

    /* constructor */ AllocatedImage(int newwidth, int newheight);
    /* constructor */ AllocatedImage(char* filename);
}; // class AllocatedImage

// access an image, but doesn't allocate or deallocate
class ContainedImage: GenericImage
{
public:
    /* constructor */ ContainedImage() ;
    /* destructor */ ~ContainedImage() ;

    /* constructor */ ContainedImage(int newwidth, int newheight);
}; // class AllocatedImage

// real working class, will allocate other objects,
// of same hierarchy
class WrapperImage: GenericImage
{
public:
   GenericImage* RealImage;

public:
    /* constructor */ GenericImage() ;
    /* destructor */ ~GenericImage() ;

   void AllocateImage(AllocatedImage* newimage);
   void HoldImage(ContainedImage* newimage);
}; // class AllocatedImage 
```

建议：

1.  有一个没有参数的构造函数是个好主意，特别是如果你正在设计一个类层次结构，而不是一个单一的类。

2.  我知道这是一个简单的示例，但是，您可能希望将所有代码移动到正文文件。

干杯。

# coldfusion - 如何在coldfusion中获得USPS运费？

> ID：10397363
> 
> 赞同：-3
> 
> 时间：2012-05-01T12:01:25.393
> 
> 标签：coldfusion, shipping, usps

我正在使用 Coldfusion，我想在我的应用程序/网站中获得 USPS 运费。是否有任何功能可以从冷融合中的 usps 获取 usps 运费。
谢谢尤格尔
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:41:57.240

谷歌上针对 usps ColdFusion CFC [http://uspscfc.riaforge.com的第一个结果](http://uspscfc.riaforge.com)

# emacs - emacs (orgmode) 不接受非英文字符的链接 (osx)

> ID：10397366
> 
> 赞同：1
> 
> 时间：2012-05-01T12:01:48.117
> 
> 标签：emacs, org-mode

这个问题已经部分解决（见下文）。

我正在使用带有 orgmode 的 gnu emacs（在 OSX 上），并且无法链接到具有非英文字母字符的文件。

例子：

这有效：文件：~/dor

这不是：文件：~/dør

有可能解决这个问题吗？

部分解决方案：

通过从 emacs 23 更新到 24（目前是“预测试”），这个问题得到了部分解决。（我也用包 el 更新了 orgmode，但这并没有什么不同）

这些文件现在可以工作：

文件：~/dør.txt [http://www](http://www) .dører.no （可以在 Firefox 中打开，但 ø 有各种符号组合）

这仍然不起作用：

文件：~/dør（文件：~/dor 有效）

# java - 关于安卓编译器

> ID：10397376
> 
> 赞同：0
> 
> 时间：2012-05-01T12:02:26.913
> 
> 标签：java, android

在构建 Android 应用程序时，ADT 使用哪个编译器？ECJ 还是 Javac？它是否为 Dalvik 机器提供编译器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:12:29.373

> 哪种编译器 ADT 完全使用 ECJ 或 Javac？

Android 需要 Java SDK（包括 OpenJDK）并`javac`从那里使用。

> 它是否为 Davilk 机器提供编译器？

`javac`Android SDK 在生成的字节码和 Dalvik 字节码之间提供了一个交叉编译器。

# c# - 创建 X.xaml 和 X.xaml.cs 文件 vs 应该了解它们是 xaml 和代码背后

> ID：10397380
> 
> 赞同：2
> 
> 时间：2012-05-01T12:02:43.873
> 
> 标签：c#, .net, wpf, visual-studio-2010

我创建了两个文件`NodeControl.xaml`，`NodeControl.xaml.cs`

在 xaml 文件中写道 `x:Class="TreeTest.NodeControl.NodeControl"`

在我写的cs文件中，在我调用的构造函数中`InitializeComponent();`

他们工作得很好，但 VS2010 不明白他们是 xaml 和代码背后

![在此处输入图像描述](../Images/bbf50fe0d05bd2c1b5851c444ceab08f.png)

我做错什么了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T12:06:38.983

这是因为 Visual Studio 不知道它们是关联的。拥有 .xaml 和 .xaml.cs 只是一个命名约定。在项目文件中，您需要通过以下方式强制执行关系：

```
<Compile Include="NodeControl.xaml.cs">
  <DependentUpon>NodeControl.xaml</DependentUpon>
</Compile> 
```

# php - 如何从我自己的网站自动上传另一个网站的文件，例如从另一个网络应用程序自动上传和发送文件 gmail？

> ID：10397381
> 
> 赞同：0
> 
> 时间：2012-05-01T12:02:49.857
> 
> 标签：php, javascript, ajax, web-applications

嗨，有人能告诉我如何从我的网络应用程序上传这个网站[http://hexserver.loria.fr的文件吗？](http://hexserver.loria.fr)

问题是你可以在网站的首页看到有两个选项可以从我的电脑提交分子然后做对接......

所以如果我想写这样一个脚本，会自动上传本网站的文件，然后对接。文件将在我的mysql数据库中。提交后文件将上传到本网站。怎么做？

任何解决这个问题的指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:08:03.133

这只是一个简单的形式，您可以使用 php 或 .net

喜欢; [http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/) 如果您是 linux 用户，您可以将其添加到 cron。只需学习表单名称。

# ios - 向情节提要中创建的按钮添加控制方法？

> ID：10397386
> 
> 赞同：2
> 
> 时间：2012-05-01T12:03:19.987
> 
> 标签：ios, objective-c, storyboard, uistoryboard, back

我正在尝试向 Storyboard 控制器添加一些更精细的控制，但我使用后退按钮遇到了阻塞。

我有一个带有推送转换的基本情节提要。我希望能够捕捉到用户按下后退按钮（自动生成的那个）并决定我是否希望视图返回。

场景是向用户显示一条消息，询问他是否想回去警告他如果他这样做他将失去他的工作，

听起来很简单，但我找不到怎么做。

有任何想法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:26:14.513

默认情况下，按下后退按钮时，您不会收到任何类型的消息。如果你想提供这种功能，你有两个选择：

1）提供自定义后退按钮并将其设置为`leftNavigationItem`您`UIViewController`的导航栏

2）子类化`UINavigationController`并覆盖一个方法，例如`popToRootViewController:animated:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:37:44.547

尝试使用 UIAlertView 委托。在您的 buttonPressed Action 中，提供一个带有消息的警报视图，其中包含两个按钮 YES 和 NO。在 YES 和 NO 的索引操作处定义按钮 -ie- YES：关闭当前视图，NO：保留在当前视图上。

在警报视图委托上搜索 Apple Docs

# javascript - 验证银行号码的正则表达式

> ID：10397388
> 
> 赞同：-5
> 
> 时间：2012-05-01T12:03:37.000
> 
> 标签：javascript, regex

我想知道你们是否可以帮助我创建一个用于验证银行号码的正则表达式。该号码应为 10 位数字，应以 1111 开头，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:05:23.233

基于这些规格：

```
 /^1111\d{6}$/ 
```

但是，我经常在扫描的输入中允许空格：

```
/^\s*1111\d{6}\s*$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:05:32.747

您在这里不需要正则表达式：

```
if (strlen($number) == 10 && ctype_digit($number) && substr($number, 0, 4) == 1111) { ... } 
```

（尽管正则表达式会像 Axeman 显示的那样更具表现力，对他 +1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:06:36.880

如果 1111 之后的所有数字：

```
'/^1{4}\d{6}$/' 
```

如果在 1111 之后混合了数字和字母：

```
'/^1{4}[a-zA-Z0-9]{6}$/' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:24:16.600

在 perl 中：

```
#!/usr/bin/perl
$account = $ARGV[0];
if ($account =~ m/^1{4}\d{6}$/) { print "looks like an account number\n" } 
```

# javascript - 如果 HEADER() 将参数传递给 javascript 中的 location.href

> ID：10397391
> 
> 赞同：1
> 
> 时间：2012-05-01T12:03:52.330
> 
> 标签：javascript, wordpress

我是wordpress的新手。

我试过下面的代码

```
 header("Location: $location", true, $status); 
```

我想将页面重定向到特定页面，我收到这种错误

```
 "Cannot modify header information - headers already sent by (output started at   /home/content/c/l/a/clareb23/html/client4/wp-content/plugins/featured-articles-lite/main.php:773) in /home/content/c/l/a/clareb23/html/client4/wp-includes/pluggable.php on line 870" 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:06:20.013

**根据评论**

你可以这样做：

```
<script>
  window.location = '<?php echo $location?>?myvar=true&status=<?php echo $status?>';
</script> 
```

* * *

确保在`header(...)`声明之前不要在屏幕上回显/打印任何内容，并且在打开 php 标签之前没有空格，例如`<?php`. 把函数放在`exit()`后面也是一个好习惯。`header()`

# c# - 如何使用 GUI 与 Windows 应用程序交互？

> ID：10397392
> 
> 赞同：1
> 
> 时间：2012-05-01T12:03:57.083
> 
> 标签：c#, .net, winforms, winapi

我想为又旧又丑的 Win95 应用程序写一个方便的前端。我将问题归结为：

1.  调用目标可执行文件；
2.  等待应用程序窗口出现；
3.  等待消息框（我希望它是一个消息框）出现；
4.  为消息框的“确定”按钮触发onClick事件；
5.  等待应用程序退出。

第 1 项和第 5 项很简单，只是这些`System.Diagnostics.ProcessStartInfo`东西；但我不知道从哪里开始其余的项目。怎么可能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:07:58.223

看看windows自动化框架，这是一个不错的入门[codeproject.com/Articles/141842/](http://www.codeproject.com/Articles/141842/Automate-your-UI-using-Microsoft-Automation-Framew)

抱歉耽搁了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:13:28.583

如果不是太费劲，您可以在反汇编程序（如 ollydbg）中打开可执行文件，然后简单地 NOP 对消息框的调用。然后从 C# 中，您可以简单地等待进程退出，而不是使用代码关闭消息框。

# c++ - 如何在 C++ ATL/MFC 中检索具有相同格式的刻度，如 DateTime.Ticks

> ID：10397396
> 
> 赞同：3
> 
> 时间：2012-05-01T12:04:39.357
> 
> 标签：c++, .net, mfc, atl

[`DateTime.Ticks`](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)是否可以在 C++ ATL 或 MFC 中以 .NET 对象的相同格式（以 100ns 为单位）获得刻度数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:16:03.030

[`DateTime.Ticks`](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)对定时器分辨率没有任何影响，因此不保证定时器精度为 100ns。在 C++ 中，您可以使用以下方法获得类似的价值：

```
ULONGLONG nTicks = GetTickCount() * 10000i64; 
```

如果您需要更准确的计时器，请寻找`QueryPerformanceCounter`基于实现。看：

*   [如何使用查询性能计数器？](https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter)
*   [最快的时序解析系统](https://stackoverflow.com/questions/3162826/fastest-timing-resolution-system)
*   [有人可以破译 timeGetTime() 或 QueryPerformanceCounter/QueryPerformanceFrequency 是否具有较低的开销或/和准确性？](https://stackoverflow.com/questions/3407779/can-someone-decipher-whether-timegettime-or-queryperformancecounter-queryperfo)

UPD。至于与 .NET`Ticks`属性的对齐方式，请参见上面 Hans 的评论 - 从 API 的结果中转换/计算的值也采用相同的 100 ns 单位，并由固定常数`GetFileTime`抵消属性。`Ticks`

# android - 每个选项卡具有多个活动的选项卡

> ID：10397401
> 
> 赞同：0
> 
> 时间：2012-05-01T12:04:54.620
> 
> 标签：android, tabs, activitygroup

我开发了这个应用程序，它使用一个在选项卡中的 s`ActivityGroup`之间切换。`Activity`我下载了最新的 AdMob SDK，迫使我使用`targetSdkVersion`13 而不是 8。因此，我收到了`ActivityGroup`已弃用的警告。

`Activity`在单个选项卡中切换 s 的新方法是什么？我宁愿把我的保持`minSdkVersion`在 8 点。有没有这样的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:10:24.803

> 在单个选项卡中切换 Activity 的新方法是什么？

没有“在单个选项卡中切换活动的新方法”。最接近“新方式”的方法是不使用选项卡中的活动，而是使用选项卡中的片段或操作栏中的选项卡（更改 UI，例如通过更改片段）。

JavaDocs[用于`TabActivity`](http://developer.android.com/reference/android/app/TabActivity.html)展示如何实现 Fragments-in-tabs。

# android - 字符检测到android应用程序实时

> ID：10397410
> 
> 赞同：0
> 
> 时间：2012-05-01T12:05:40.143
> 
> 标签：android, android-edittext, android-softkeyboard

在我的申请中，我击中了。需要你的帮助。

我必须检测在写入**EditText**字段期间按下了哪个字符。

**表示如果我按下键盘上的“ a** ”键，则在书写时；应用程序移动到下一步。

像这样。那么，如何在 Android 中实时检测角色？

我不知道，但 onkeyUp 和 Textwatcher 可能对我有帮助吗？

下面的代码显示是我从 StackOverflow 中找到的，但对我不起作用。代码：

```
 EditText editText= (EditText)findViewById(R.id.editText2);
 editText.addTextChangedListener(new TextWatcher() {
              @Override
              public void afterTextChanged(Editable e) {
                String textFromEditView = e.toString();
                validateText(textFromEditView);
              }

              @Override
              public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                s = "sat";
                return;
              }

              @Override
              public void onTextChanged(CharSequence s, int start, int before, int count) {
                //nothing needed here...
              }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:10:28.767

```
edittext.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v , int keyCode , KeyEvent event) {

            // TODO Auto-generated method stub
            if (keyCode == event.KEYCODE_A) {
                // Do what you want here
            }

            return false;
        }
    }); 
```

# eclipse-rcp - 导出rcp插件时的输出文件夹

> ID：10397414
> 
> 赞同：0
> 
> 时间：2012-05-01T12:05:49.010
> 
> 标签：eclipse-rcp

在我的 rcp 插件中，当我导出插件以创建文件夹时，我想要，比如说导出文件夹中的图像。例如，我导出的文件夹现在有配置、p2、插件和工作区文件夹。我想要一个默认文件夹来存储图像并可以从插件内部进行裁判。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:24:12.527

您可能会稍微不正确地进行此操作；您可以将图像打包到插件中，然后轻松地从代码中访问它们。只需在插件项目中创建图像文件夹，然后在 plugin.xml 编辑器的构建配置页面的“二进制构建”窗格中选择该文件夹。

然后，您可以通过这样的缓存管理您的图像：

```
public class ImageCache 
{
    private static ImageCache s_instance = new ImageCache();
    private ImageRegistry m_imageRegistry = Activator.getDefault().getImageRegistry();

    public static enum AppImage
    {
        EXAMPLE("images/example.gif")
        ;

        public String location;

        private AppImage(String location)
        {
            this.location = location;
        }
    }

    private ImageCache()
    {
            for(AppImage image : AppImage.values())
            {               
                imageRegistry.put(image.name(),Activator.getImageDescriptor(image.location));
            }
    }

    public static ImageCache instance()
    {       
        return s_instance;
    }

    public final static Image get(AppImage key)
    {
            return instance().m_imageRegistry.get(key.name()); 
    }

    public final static ImageDescriptor getDescriptor(AppImage key)
    {
            return instance().m_imageRegistry.getDescriptor(key.name()); 
    }    
} 
```

其中 example.gif 位于插件项目根目录下的 images 文件夹中。

另见：[http](http://www.vogella.com/articles/EclipseRCP/article.html#tips_loadimages) ://www.vogella.com/articles/EclipseRCP/article.html#tips_loadimages 和： http: [//obscuredclarity.blogspot.co.uk/2009/10/add-image-to-eclipse-rcp-应用程序.html](http://obscuredclarity.blogspot.co.uk/2009/10/add-image-to-eclipse-rcp-application.html)

# proxy - 使用 htmlunit 设置代理

> ID：10397420
> 
> 赞同：0
> 
> 时间：2012-05-01T12:06:11.920
> 
> 标签：proxy, htmlunit

我是 htmlunit 的新手，几乎没有编程知识。在 Centos - Webserver（用于 www.mydomain.com）中，我正在尝试创建一个代理。

我希望我的服务器在请求 www.mydomain.com 时用作代理，并将响应作为 htmlsnapshot 发送。

我看到了一些像

> SocketAddress addr = new InetSocketAddress("xxx.xxx.xx.xxx", 8888); 代理 proxy = new Proxy(Proxy.Type.HTTP, addr); //or Proxy.Type.SOCKS URL url = new URL("http://mydomain.com/test"); URConnection conn = url.openConnection(代理);

但我想知道在哪里设置。这可以完全从 apache 完成吗？我没有看到任何配置文件，例如 htmlunit。

顺便说一句，我已经安装了 htmlunit（使用 jpackage repo）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:17:21.820

HTMLUnit 是用于 Java 程序的无 GUI 浏览器 您在哪里看到包含的代码。从记忆中，即使有代理类，我也无法回忆起 API。您当然可以通过传入 ProxyConfig 将 WebClient 指向代理；这只是为了整理 WebClient 类。

您是在寻找代理服务器，还是寻找模拟浏览器的方法？

# css - 使用自定义 TTF 字体对 Linux 的影响

> ID：10397422
> 
> 赞同：1
> 
> 时间：2012-05-01T12:06:20.347
> 
> 标签：css, linux, macos, browser, truetype

我正在开发一个 Wicket 应用程序，我在其中使用自定义 ttf 字体。我已将从 Windows 7 复制的字体放入战争中，并在 css 中用作：

```
@font-face {
    font-family: Kunstler;
    src: url('fonts/KUNSTLER.TTF');
} 
```

进而：

```
.parent p {
    font-family: Kunstler;
    font-size: 36px;
} 
```

因为我从本地运行应用程序。我看不出它是否在 Linux 或 Mac 中工作。

我不知道浏览器如何呈现字体的机制。

我的问题是：

*   以这种方式使用字体安全吗？
*   这适用于所有类型的机器（Linux、Windows、Mac）吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:31:42.633

You can use "[browsershots](http://browsershots.org/)", to see how the page looks (it supports lot's of browsers and operating systems), just make the website visible for it and it will render the webpage fo you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:18:15.290

找出答案的最简单方法是在 Windows 安装上运行的虚拟机中设置流行的 Linux 发行版，或者从 liveCD 或安装程序启动，并使用“无需安装即可试用”模式。

但是您有分发该字体的许可证吗？

# git - master 分支在 git 中应该包含什么

> ID：10397427
> 
> 赞同：7
> 
> 时间：2012-05-01T12:06:50.330
> 
> 标签：git, branch, master

我已经阅读了多种不同的 git 分支策略，我很惊讶 master 分支经常被用作“生产就绪”分支，并且会有一个额外的 uat 和 dev 分支。我正在考虑使用相同的 3 个分支设置我们的 git 存储库，但让“master”包含开发代码并添加生产和 uat 分支。这样，开发人员可以简单地合并到默认的 git 分支（即“master”）。有理由不这样做吗？

克，

科恩

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T12:14:14.887

没有特别的理由不选择一个工作流程而不是另一个工作流程，对于 Git，通常由开发团队自行决定他们的最佳实践。

您提到的生产就绪主方法通常有多个开发分支（有时称为功能分支），然后选择主作为放置所有这些的最终位置，因为通常应该只有一个主分支（通常只有一个生产版本）。

这是有多少公司在工作，但肯定不是全部。许多其他人使用“不稳定的主”方法，它遵循与您提到的类似的模式 - 有些人有一个生产存储库，他们自己的主和分支被认为是不稳定的，并且团队负责人在代码中推送到生产存储库特定的分支被认为是生产就绪的。

Git 的关键方面是每个人都有自己的本地存储库，有自己的分支和主库。这使他们可以随时为他们认为合适的任何邪恶目的创建自己的私有分支，但这确实使定义分支名称的目的更加难以执行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T13:04:01.450

使用 DVCS（分布式版本控制系统）理解的关键概念是，您没有一个工作流（分支之间的合并），而是两个：存储库之间的发布（推/拉）。
请参阅“[哪些 git 分支模型实际上有效？](https://stackoverflow.com/a/2621837/6309) ”

这意味着您将克隆周围的存储库，并且对于每个克隆，您要问的是：

> 如果我“默认”克隆一个 repo（没有特殊参数），我想看什么内容？

在克隆的 repo 包含的所有可能的分支中，该内容将是您的“ `master`”分支。
您可以更改“默认分支”：请参阅“ [Git：在裸存储库中更改活动分支的正确方法？](https://stackoverflow.com/a/3302018/6309) ”。

因此，如果您有一个专门用于开发的 repo，master 分支将代表“有效”的最新代码，其他分支将用于各种“实验”。
这基本上就是 Git 存储库本身遵循的内容：请参阅“ [Git/Git 工作流程](https://github.com/git/git/blob/master/Documentation/gitworkflows.txt)”。

但是任何其他克隆都可以专用于其他开发生命周期步骤（uat -- 用户验收测试，sit -- 系统集成测试， -- pre-prod 或 prod）。
在这种情况下，他们的 ' `master`' 分支将具有不同的含义，以适应该 repo 所扮演的角色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-14T13:41:06.980

我认为一个很好的起点是实际阅读[Git 推荐的工作流文档。](https://github.com/git/git/blob/master/Documentation/gitworkflows.txt)他们谈论使用 master 作为稳定和功能分支。

摘录：

> 毕业~~~~~~~~~~
> 
> 随着给定功能从实验到稳定，它也在软件的相应分支之间“毕业”。 `git.git`使用以下“集成分支”：
> 
> *   'maint' 跟踪应该进入下一个“维护版本”的提交，即最后发布的稳定版本的更新；
>     
>     
> *   “master”跟踪应该进入下一个版本的提交；
>     
>     
> *   'next' 旨在作为主题的测试分支，用于测试 master 的稳定性。
>     
>     
> 
> 还有第四个官方分支，用法略有不同：
> 
> *   'pu'（提议的更新）是一个集成分支，用于尚未准备好包含的内容（请参阅下面的“集成分支”）。
> 
> 四个分支中的每一个通常都是其上一个分支的直系后代。
> 
> 从概念上讲，该功能进入一个不稳定的分支（通常是“next”或“pu”），一旦被认为足够稳定，就会“毕业”到“master”以用于下一个版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T13:10:00.657

这一切都取决于开发人员的舒适度。您可以继续使用您解释的方法。此外，可以有多个分支用于基于 sprint 或任何其他方法进行提交。每次您要在生产中部署代码时，合并已推送提交的特定分支和方法。

# bash - Bash 脚本错误：[i：找不到命令

> ID：10397430
> 
> 赞同：2
> 
> 时间：2012-05-01T12:07:04.353
> 
> 标签：bash, shell

该程序假设从用户那里接受一个数字并打印那么多素数。由于某种原因，该程序不起作用。我是 bash 脚本的新手，这是我的第一个程序。在我看来，一切似乎都是正确的。请告诉我哪里出错了。

```
echo Enter num
read n
i=2
j=2

for(( i=2; i <= n; i++ ))
do

for(( j=2; j < i-1; j++ ))
do

if [i % j == 0];
then
break
fi

if [i == j];
then
echo "  $i"
fi
done
done 
```

这是我得到的输出

```
Enter num
20
prime.sh: line 12: [i: command not found
prime.sh: line 18: [i: command not found
prime.sh: line 12: [i: command not found
prime.sh: line 18: [i: command not found
 .
 .
 . 
```

进行建议的更改后

```
read -p "Enter a  number : " n
i=2
j=2
for(( i=2; i <= n; i++ ))
do
    for(( j=2; j <= i-1; j++ ))
    do
        if [ $(( i % j )) == 0 ]
        then
            break
        fi
        if [ i == j ]
        then
            echo "  $i"
        fi
    done
done 
```

我能够运行该程序，但它没有产生任何结果

[http://i.stack.imgur.com/Fd1se.png](http://i.stack.imgur.com/Fd1se.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:09:56.910

您需要在之后放置一个空格，`[`因为`[`它是一个应用程序。

而且你不能在括号之间进行计算。您需要告诉 bash 它需要计算这些值。因此，您需要将第 11 行更改为`if (( i % j == 0 ))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:10:00.250

`if [i % j == 0];`应该`if [ i % j == 0 ];`

与第 18 行的相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:51:22.280

就像其他人所说的那样，`[`程序在其参数之前需要一个空格，就像所有程序在其参数之前都需要一个空格一样。这就是为什么我更喜欢`test`内置的原因之一`[`，它的语法很笨拙，需要一个无用`]`的作为最后一个参数，只是为了让它看起来漂亮和理智。

```
if test $((i % j)) = 0; then
   break
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:18:23.683

```
#!/bin/bash
#
# primes
#
read -p "Enter a  number: " n
i=2

for (( i=2; i <= n; i++ ))
do
    for (( j=2; j*j < i; j++ ))
    do
        if ((i % j == 0))
        then
            echo "no prime, $i divider: "$j
            break
        fi
    done
done 
```

### 更新，在意识到（感谢 Will Ness）之后，搜索到 INPUT 的所有素数。

我只需要跑到√(n)。

# c# - 使用 itextsharp 在表单字段值下划线

> ID：10397431
> 
> 赞同：0
> 
> 时间：2012-05-01T12:07:04.807
> 
> 标签：c#, pdf, itextsharp, field, underline

我有一个使用 itextsharp 填充 PDF 表单域的应用程序。

我从客户那里得到了新的要求，允许在字段值下划线。

我已经阅读了很多帖子，包括这个网站上问题的答案，但我想不出办法。

当前我的代码执行以下操作：

1.  创建一个 PDFStamper 实例
2.  使用 stamper.AcroFields 属性获取表单字段
3.  使用 AcroFields.SetFieldRichValue() 方法设置字段值。

但是当我打开 PDF 时，该字段为空。

我验证了该字段在 PDF 本身中设置为富文本。

知道我做错了什么吗？

这是我的代码的片段：

```
 FileStream stream = File.Open(targetFile, FileMode.Create);                                     
                var pdfStamper = new PdfStamper(new PdfReader(sourceFile), stream);                     

                // Iterate the fields in the PDF
                foreach (var fieldName in pdfStamper.AcroFields.Fields.Keys)
                {                       
                    // Get the field value of the current field
                    var fieldValue = "<?xml version=\"1.0\"?><body xmlns=\"http://www.w3.org/1999/xtml\" xmlns:xfa=\"http://www.xfa.org/schema/xfa-data/1.0/\" xfa:contentType=\"text/html\" xfa:APIVersion=\"Acrobat:8.0.0\" xfa:spec=\"2.4\"><p style=\"text-align:left\"><b><i>Here is some bold italic text</i></b></p><p style= \"font-size:16pt\">This text uses default text state parameters but changes the font size to 16.</p></body>"

                    // Set the field value
                    if (String.IsNullOrEmpty(fieldValue) == false)
                    {
                        pdfStamper.AcroFields.SetFieldRichValue(key, fieldValue);
                    }
                } 
```

编辑：

我已经根据 Mark Storer 的帖子修改了我的代码到一个问题（http://stackoverflow.com/questions/1454701/adding-rich-text-to-an-acrofield-in-itextsharp）。新代码是：

```
 // Create reader to read the source file
        var reader = new PdfReader(sourceFile);

        // Create a stream for the generated file
        var stream = File.Open(targetFile, FileMode.Create); 

        // Create stamper to generate the new file
        var pdfStamper = new PdfStamper(reader, stream);

        // Field name and value
        var fieldName = "myfield";
        var fieldValue = "<?xml version=\"1.0\"?><body xfa:APIVersion=\"Acroform:2.7.0.0\" xfa:spec=\"2.1\" xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:xfa=\"http://www.xfa.org/schema/xfa-data/1.0/\"><p dir=\"ltr\" style=\"margin-top:0pt;margin-bottom:0pt;font-family:Helvetica;font-size:12pt\"><b>write line1 bold</b></p</body>";

        // Output stream for the temporary file that should contain the apearance of the field
        var msOutput = new FileStream(@"d:\temp.pdf", FileMode.Create);

        // string reader to read the field value
        var textReader = new StringReader(fieldValue);

        // Create new document
        var document = new Document(pdfStamper.AcroFields.GetFieldPositions(fieldName)[0].position);

         // writer for the new doucment
        var writer = PdfWriter.GetInstance(document, msOutput);

        // Open the document                
        document.Open();

        // Get elements to append to the doucment
        var list = HTMLWorker.ParseToList(textReader, null);

        // Append elements to the doucment
        foreach (var element in list)
        {
            document.Add(element);
        }                                           

        // close the documnet
        document.Close();                            

        // Append push button that contains the generated content as its apearance
        // this approach is based on the suggestion from Mark storer that can be found in:
        // http://stackoverflow.com/questions/1454701/adding-rich-text-to-an-acrofield-in-itextsharp
        var button = new PushbuttonField(pdfStamper.Writer, pdfStamper.AcroFields.GetFieldPositions(fieldName)[0].position, fieldName + "_")
                             {
                                 Layout = PushbuttonField.LAYOUT_ICON_ONLY,
                                 BackgroundColor = null,
                                 Template = pdfStamper.Writer.GetImportedPage(new PdfReader(targetFile, 1)
                             };
            pdfStamper.AddAnnotation(button.Field, 1);                

        pdfStamper.FormFlattening = true;
        pdfStamper.Close();
        pdfStamper.Dispose(); 
```

但是现在的问题是临时文件不包含任何内容......

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:16:15.613

我设法用小技巧解决了它 - 我在 ColumnText 元素中使用了 Anchor （hyperling）元素并将其放置在表单字段上方。默认情况下，锚点显示为带下划线。为了避免用户将鼠标悬停在锚点上时出现手形标记，我将锚点的“参考”属性设置为空。

这是我使用的代码：

```
 // Create reader
 var reader = new PdfReader(sourceFilePathAndName);

 // Create stream for the target file
 var stream = File.Open(targetFilePathAndName, FileMode.Create); 

 // Create the stamper
 var pdfStamper = new PdfStamper(reader, stream);

 const string fieldName = "MyField";     

 // Get the position of the field
 var targetPosition = pdfStamper.AcroFields.GetFieldPositions(fieldName)[0].position;

 // Set the font
 var fontNormal = FontFactory.GetFont("Arial", 16, Font.UNDERLINE, BaseColor.BLACK);

 // Create the anchor
 var url = new Anchor("some default text", fontNormal) { Reference = null };

 // Create the element that will contain the anchor and allow to position it anywhere on the document
 var data = new ColumnText(pdfStamper.GetOverContent(1));

 // Add the anchor to its container
 data.SetSimpleColumn(url, targetPosition.Left, targetPosition.Bottom, targetPosition.Right, targetPosition.Top, 0, 0);

 // Write the content to the document
 data.Go();

 pdfStamper.FormFlattening = true;
 pdfStamper.Close();
 pdfStamper.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:11:53.590

*上面有很多代码，将近 400 行。将来，尝试将所有内容提炼成一个非常简单且可重现的测试用例。*

使用`SetFieldRichValue`时还需要将`PdfStamper`' `AcroFields.GenerateAppearances`属性设置为`false`：

```
stamper.AcroFields.GenerateAppearances = false; 
```

[您可以在此处](http://itext-general.2136553.n4.nabble.com/Urgent-AcroFields-setFieldRichValue-doesn-t-write-out-rich-text-td3744654.html)阅读有关此内容的更多信息以及一些注意事项和其他解决方法。

# javascript - 如何在用户意外离开 ASP.Net 页面时捕获

> ID：10397432
> 
> 赞同：1
> 
> 时间：2012-05-01T12:07:23.900
> 
> 标签：javascript, jquery

当用户意外离开我的 ASP.Net 页面时，我需要用一条消息提示用户，询问他们是否确定要离开。回发或单击保存按钮时不应触发警告。有很多文章涵盖了这一点，但我对此是全新的，似乎已经让我的电线交叉了。

推荐的方法似乎是使用 window.onbeforeunload 事件，但对我来说表现出乎意料。这在页面加载时触发，而不是在页面卸载时触发。

```
<script language="JavaScript" type="text/javascript">
    window.onbeforeunload = confirmExit;
    function confirmExit() {
        return "You have attempted to leave this page.  If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?";
    }
</script> 
```

如果我使用 JQuery 实现，它会在页面卸载时触发，但问题是它在执行后面的代码之前触发。所以我不能在客户端上设置一个变量，说这次不要触发事件，因为它是回发或保存。

```
$(window).bind('beforeunload', function () {
            return 'Are you sure you want to leave?';
        }); 
```

谁能指出我正确的方向，因为我知道我犯了基本的错误/错误理解？

编辑：

所以我快到了：

var提示=真；

```
$('a').live('click', function () {

    //if click does not require a prompt set to false
    prompt = false;
});

$(window).bind("beforeunload", function () {

    if (prompt) {

        //reset our prompt variable
        prompt = false;

        //prompt
        return true;
    }
}) 
```

除了问题出在上面的代码中，我需要能够区分点击，但我还没有弄清楚，即我在这里缺少一个条件“//如果点击不需要提示设置为 false ”。

有任何想法吗？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:09:57.880

如果人们感兴趣，这是我的问题的迂回解决方案。[如何判断 ASP 中的页面卸载是否是 PostBack](https://stackoverflow.com/questions/10414603/how-to-tell-if-a-page-unload-in-asp-is-a-postback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:10:49.063

你可以尝试使用这个：

```
$(window).unload(function(){
  alert('Message');
}); 
```

# database-connection - SQL连接字符串和解析域名

> ID：10397439
> 
> 赞同：0
> 
> 时间：2012-05-01T12:08:11.990
> 
> 标签：database-connection, connection-string

我们今天使用这个连接字符串：

> 提供者=SQLOLEDB；数据源=mydomain.com；初始目录=myDB；用户 ID=xxx；密码=xxx;

我想知道谁将 mydomain.com 保存在缓存中，是用户的浏览器还是运行应用程序的服务器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:11:55.100

如果这是 ASP.NET 代码，那么数据库连接发生在服务器上。用户的浏览器不知道您的数据库。

# android - android 应用程序电子邮件发送到字段

> ID：10397440
> 
> 赞同：1
> 
> 时间：2012-05-01T12:08:18.783
> 
> 标签：android, email, email-address

我正在构建一个能够通过电子邮件发送信息的应用程序。当我单击发送电子邮件按钮时，会显示电话的联系人列表并从所选人员那里检索电子邮件。然后根据我选择通过“Gmail”还是“Hotmail”发送，我会得到不同的结果。对于 gmail，此人的电子邮件地址位于“发件人”字段中，按“收件人”字段不会执行任何操作。另一方面，在 hotmail 中，检索到的电子邮件地址忽略了 '@hotmail.com' 部分（我认为它实际上在 'to' 字段中，但没有任何指示（尽管它在顶部！），然后单击“发送”会导致无效的电子邮件地址消息。单击该地址也无济于事。这是我的发送代码：

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

emailIntent.setType("plain/text");
emailIntent.putExtra(Intent.EXTRA_EMAIL, email);
System.out.println("email set as: " + email);
final String subject = diaryDetailedName + "'s diary entry ";
emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
final String emailBody = "I have an entry in my diary that you should know about. " +
            "Its for " + detailedTitle + " which will involve " + detailedDesc + 
            ". This is on " + dDate + " at " + detailedTime + ". Please get in touch if you need to know more.";
emailIntent.putExtra(Intent.EXTRA_TEXT, emailBody);

DiaryDetailed.this.startActivity(Intent.createChooser(emailIntent, "Send mail in:")); 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:21:14.703

我认为您应该将字符串数组作为 EXTRA_EMAIL 传递

所以，试着做这个

```
emailIntent.putExtra(Intent.EXTRA_EMAIL, email); 
```

进入

```
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{email}); 
```

参考：developer.android.com/reference/android/content/Intent.html

# java - facebook sdk for android-来自服务示例的身份验证

> ID：10397445
> 
> 赞同：0
> 
> 时间：2012-05-01T12:08:45.850
> 
> 标签：java, android, facebook

在[Facebook android sdk 文档](https://developers.facebook.com/docs/mobile/android/build/)中，给出的示例使用 Activity 对用户进行身份验证。是否可以从服务中做同样的事情？示例代码将非常方便。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:05:55.507

除了 Activity 之外，不可能在 Facebook 对象中的任何其他地方进行授权。

您可以尝试通过一些网络服务获取访问令牌并初始化您的

```
Facebook facebook 
```

接着就，随即。不过，您可以在活动中授权您的会话并通过活页夹传递它。

这是我的例子。

这是一项服务

```
public class ClientService extends Service {

    //Facebook object to operate from service
    private Facebook facebook;

...

    private final ClientBinder clientBinter = new ClientBinder();

    /** Binder to service */
    public class ClientBinder extends Binder {

        public ClientService getService() {
            return ClientService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return clientBinter;
    }

    public void setFacebook(Facebook f) {
        ClientService.this.facebook = f;
    }

    public boolean loggedFacebook() {
        if (facebook == null)
            return false;
        return facebook.isSessionValid();
    }
    ...

} 
```

这是活动的用法

```
 public class SomeActivity extends Activity{

        private ClientService clientService;
        private ServiceConnection clientConnection = new ServiceConnection() {

            public void onServiceDisconnected(ComponentName name) {
                mBound = false;
            }

            public void onServiceConnected(ComponentName name, IBinder service) {
                ClientService.ClientBinder binder = (ClientService.ClientBinder) service;
                clientService = binder.getService();
                mBound = true;
                if (facebook != null)
                    if (facebook.isSessionValid())
                        clientService.setFacebook(facebook);
            }
        };

    @Override
    protected void onStart() {
        super.onStart();
        Intent intent = new Intent(this, ClientService.class);
        bindService(intent, clientConnection, Context.BIND_AUTO_CREATE);
    }

    @Override
    protected void onStop() {
        super.onStop();
        if (mBound) {
            unbindService(clientConnection);
            mBound = false;
        }

    }

.................

    //And HERE IS MAGIC
    .....
    private void logINFacebook() {
            if (facebook.isSessionValid())
                return;

            facebook.authorize(this,
                    getResources().getStringArray(R.array.facebookPermissions),
                    new DialogListener() {
                        public void onFacebookError(FacebookError e) {...}

                        public void onError(DialogError e) {...}

                        public void onComplete(Bundle values) {
                            if (mBound) {
                                clientService.setFacebook(facebook);
                            }

                            //Save to shared preferences(optional)
                            SharedPreferences.Editor editor = prefs.edit();
                            editor.putString(FACEBOOK_TOKEN_PREFNAME,
                                    facebook.getAccessToken());
                            editor.putLong(FACEBOOK_EXPIRES_PREFNAME,
                                    facebook.getAccessExpires());
                            editor.commit();
                        }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        facebook.authorizeCallback(requestCode, resultCode, data);
        super.onActivityResult(requestCode, resultCode, data);
    }

    } 
```

# routing - Symfony2 正在尝试通过路由提供我的 /css/* 路径，但我不希望它这样做

> ID：10397450
> 
> 赞同：1
> 
> 时间：2012-05-01T12:09:09.350
> 
> 标签：routing, symfony

如果我去这个 URI

```
/app_dev.php/css/eabd201_jquery.ui.theme_15.css 
```

它给了我那个 CSS 文件，这是我所期望的，但是如果我去这个 URI，

```
/app_dev.php/css/images/ui-icons_222222_256x240.png 
```

我收到此错误：

> 找不到“GET /css/images/ui-icons_222222_256x240.png”的路线

似乎必须有一种方法告诉 Symfony 不要尝试通过路由来寻找`/css/*`路径。（我知道该文件存在。）我该怎么做？

编辑：这是我的`.htaccess`文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:10:42.437

我不知道这是否正是你的情况，但想象一下目录结构：

```
├── css
│   ├── style.css
├── images
│   ├── foo.png 
```

在`style.css`中，只要您使用相对路径引用图像，因此如果您移动到另一个目录`url(../images/foo.png)`，它将无法工作。`style.css`

您正在使用 Assetic 渲染您的 CSS 文件，因此assetic 将此 CSS 文件“移动”到`/app_dev.php/css`实际上并不存在并由`app_dev.php`控制器处理的目录中。所以现在，图像的相对路径并不指向图像，但`/app_dev.php/images/foo.png`它也不真正存在并且由`app_dev.php`控制器处理。

希望这是一个非常普遍的问题，并且有一个内置的解决方案：`cssrewrite`过滤器。

您可以将其添加到您的`{% stylesheet %}`标签中：

```
# app/config/config.yml
assetic:
    # ...
    filters:
        cssrewrite: ~ 
```

 **```
{# your template #}

{% stylesheet 'bundles/foo/css/style.css' filter='cssrewrite' %} 
```

或者将其应用于每个 CSS 文件：

```
# app/config/config.yml
assetic:
    # ...
    filters:
        cssrwrite:
            apply_to: \.css$ 
```

它将负责为您重写这种路径。**

# vb.net - 我如何从 vb.net 调用 vbs 脚本

> ID：10397452
> 
> 赞同：0
> 
> 时间：2012-05-01T12:09:19.737
> 
> 标签：vb.net, vbscript

我正在尝试从 vb.net 执行 vbs 脚本。我希望能够传递一个参数并等待脚本完成，然后再继续使用 .net 代码。

在 vb6 中，我会这样写：

```
Public ws, rv
rv = ws.Run(exePath & "sleep04.vbs 123", 1, True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:10:38.710

使用[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类：

```
var p = Process.Start(exePath & "sleep04.vbs", "123")
p.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T21:32:46.117

或者，对于更具体的参数定义：

```
Dim psi As New ProcessStartInfo
psi.FileName = "Firefox"
psi.Arguments = "-new-tab " & ws.URI
Process.Start(psi) 
```

# php - php - 打开/关闭功能以打印调试消息

> ID：10397454
> 
> 赞同：2
> 
> 时间：2012-05-01T12:09:41.577
> 
> 标签：php, debugging, function, printing, comments

我对编程很陌生，当我开发我的程序时，我使用一种简单的策略来调试它：我编写程序以在运行重要语句时打印调试消息，例如

```
function foo1($number)
{
  //foo_print("I am function foo1({$number}). <br/>");
  //foo_print("I am going to increase 'count' by {$number}. <br/>");

  $GLOBALS["count"] = $GLOBALS["count'] + $number;

  //foo_print("Now 'count' = {$GLOBALS["count"]}, I finished my task, BYE BYE. <br/>");

}

function isFoo($number)
{
  //foo_print("I am function isFoo({$number}). <br/>");
  //foo_print("I am checking if the number < 3 or not, if so, it is Foo, if not, it is not Foo. <br/>");
  if($number <= 3)
  {
    //foo_print("Found that number = {$number} <= 3, I return true, BYE BYE. <br/>");
    return true;
  }

  //foo_print("Found that number = {$number} > 3, I return false, BYE BYE. <br/>");
  return false;
} 
```

我称它们为调试消息，但如您所见，它们实际上是描述程序在每一行上做什么的详尽注释。我只是编写函数 foo_print() 在调试程序时将它们打印出来。并在实际使用中将它们注释掉。

在实际运行模式和调试模式之间切换时，我没有逐行插入和删除注释符号'//'，而是使用函数 foo_print 来完成这项工作：它可以设置为打开或关闭。

```
define(FOO_PRINT, 1)
function foo_print($message)
{
  if(FOO_PRINT) print $message;
  // if FOO_PRINT == 0 then do nothing.
} 
```

但是我觉得这个方法是无效的，每次打印消息前都要检查FOO_PRINT。

我的问题是以下两者之一或两者

*   当我不想使用 foo_print() 函数时，我可以做些什么来告诉 php 忽略它吗？

*   也许，而不是使用 foo_print 函数，我应该使用 '//' 符号以普通注释样式编写消息，然后告诉 php 解释器在调试模式下打印这些注释消息。我可以这样做吗？

我想，除了调试方便之外，这种方法还有一个好处，就是可以帮助我日后回来看程序时理解程序。（这对我来说非常漫长和复杂，我相信我很快就会忘记它。）

我发现现在使用高级 IDE 和调试工具来开发我的程序对我来说非常复杂。我相信这些高级调试工具中的一些可以做与我想要的类似的事情，但我已经在 PHP-eclipse 和 xdebug 上尝试了一周，但它让我无处可去。非常感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:27:01.817

您可以定义两个函数，一个输出调试数据，另一个不输出。然后使用变量名来包含您要调用的函数的名称，并通过调用变量中的函数来进行调试。像这样：

```
function debug_print($data) {
    echo $data;
}
function debug_none($data) {
}

$debug = 'debug_print';
$debug('Testing one'); // This prints out 'Testing one'

$debug = 'debug_none';
$debug('Testing two'); // This doesn't print out anything 
```

如果你这样做，不要忘记添加`global $debug`到任何想要使用该功能的功能。

**编辑：**还有一种更面向对象的方式来实现相同的结果。您可以定义一个接口并为其编写几个实现，允许您选择在运行时使用哪一个。

```
$debugmode = true;

interface Debugger {
    public function out($data);
}

class EchoDebugger implements Debugger {
    public function out($data) {
        echo $data;
    }
}

class NullDebugger implements Debugger {
    public function out($data) {
        // Do nothing
    }
}

if($debugmode)
    $debugger = new EchoDebugger();
else
    $debugger = new NullDebugger();

$debugger->out('This will be output if $debugmode is true'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T12:15:50.713

没有芽，

不可能有这样的事情，并且您每次都必须定义一个条件。

这不能在 php 的代码中完成

# c - 多线程 JNI 在负载下导致段错误

> ID：10397457
> 
> 赞同：0
> 
> 时间：2012-05-01T12:09:51.480
> 
> 标签：c, java-native-interface

我将一个 JVM 嵌入到我的网络服务器中，它有 4 个永不消亡的工作线程。以下代码在 4 个工作人员中的任何一个内的每个 http 请求上运行：

```
// normally I would do URL routing here first, but this is just a JNI test now 
jclass cls;
jmethodID method;
jobjectArray args;
jclass stringClass;
jstring jstr;

(*jvm)->AttachCurrentThread (jvm, &env, NULL);

cls = (*env)->FindClass(env, "HelloWorldClass");

method = (*env)->GetStaticMethodID(env, cls, "main", "([Ljava/lang/String;)V");

jstr = (*env)->NewStringUTF(env, "Hello world!");

stringClass = (*env)->FindClass(env, "java/lang/String");
args = (*env)->NewObjectArray(env, 1, stringClass, jstr);

(*env)->CallStaticVoidMethod(env, cls, method, args); 
```

当我逐步使用调试器时，它可以工作。但是，当我使用 weighttp 基准对其施加一些负载时，它会`FindClass()`在线或`CallSTaticVoidMethod()`在线上随机出现段错误。可能是什么问题呢？我阅读了很多文档，我看不出我需要如何在这里锁定或释放任何东西。

这几乎是可能的最基本的 JNI 代码，来自官方文档：http: [//java.sun.com/docs/books/jni/html/invoke.html](http://java.sun.com/docs/books/jni/html/invoke.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:50:29.167

看起来我已将 JNIEnv* 置于全局范围内。虽然这本身不应该引起问题，因为它在每个使用它的线程中都会被覆盖，但 JNI 似乎希望/需要在每次使用它时在内部释放它。API设计的奇迹！

# java - 使用来自两个不同列的值进行 SQL 排序

> ID：10397459
> 
> 赞同：2
> 
> 时间：2012-05-01T12:09:57.790
> 
> 标签：java, sql, oracle, hibernate, sql-order-by

假设我有一个包含 PART_TYPE 和 VALUE 列的表 NAME。每种类型都可以有多种类型，例如 FAMILY、GIVEN、PREFIX 等。

我想做的是编写 SQL 来获取所有名称，但首先按特定类型对它们进行排序，然后在该类型中按字母顺序对它们进行排序。

我有这样的事情：

```
SELECT *
FROM name
ORDER BY (
  CASE
    WHEN PART_TYPE = 'GIV'
    THEN VALUE
  END) 
```

但我不确定如何将其他类型作为主要订单，同时将 VALUE 作为次要订单。添加另一个 case 语句只会使 VALUE 成为主要订单。

我想保持这个数据库独立，但如果需要，我愿意让它特定于 Oracle。

我怎样才能做到这一点？此外，非常感谢使用 Hibernate Criteria 执行此操作的方法。

编辑：我需要按我定义的特定顺序对 PART_TYPE 进行排序。特别是，它需要先给，然后是家庭。

所以它应该是这样的：

```
GIVEN  A
GIVEN  B
GIVEN  C
FAMILY A
FAMILY B 
```

自然顺序是家庭优先，而不是给定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:22:03.473

解决这个问题的最易于管理的方法可能是有一个包含所有类型的表，然后在其中有一个排序列。所以你可能有一个像这样的表：

```
TypeID      Name      SortOrder
1           FAMILY    2
2           GIVEN     1
3           PREFIX    3 
```

然后您可以将其加入您的查询并使用：

```
ORDER BY SortOrder, Value 
```

你可以用一个`CASE`表达式解决这个问题

```
ORDER BY CASE Type
            WHEN 'GIVEN' THEN 1
            WHEN 'FAMILY' THEN 2
            WHEN 'PREFIX' THEN 3
            END,
            Value 
```

但是你拥有的类型越多，case 表达式就越难管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:13:38.077

```
SELECT *
FROM name
ORDER BY 
  CASE 
        WHEN TYPE = 'GIVEN' THEN 1
        WHEN TYPE = 'FAMILY' THEN 2
        ELSE 3
     END,
  VALUE 
```

这将按 TYPE 和 VALUE 上的自定义订单对结果进行排序，作为二级订单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:20:42.303

```
ORDER BY CASE TYPE
             WHEN 'GIVEN' THEN 0   
             WHEN 'FAMILY' THEN 1
             ELSE 2
         END,
         VALUE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:33:29.193

感觉有点“hacky”，但它有效

```
SELECT part_type,name
FROM (
SELECT 
CASE 
WHEN part_type = 'Given' THEN 'A'
WHEN part_type = 'Family' THEN 'B'
END AS Sorthack,
part_type,
name
FROM NAME
) Sort

ORDER BY sorthack,name 
```

# python - 来自 Python 的 INSERT INTO MySQL 查询的语法无效

> ID：10397461
> 
> 赞同：0
> 
> 时间：2012-05-01T12:10:07.350
> 
> 标签：python, mysql-python

尝试执行以下操作时：

```
def postToMySQL(date,data,date_column_name,data_column_name,table):

cursor = conn.cursor ()

sql = "\"\"\"INSERT INTO " + table + " (" + date_column_name + ", " + data_column_name + ") VALUES(%s, %s)" + "\"\"\"" #+ ", " + "(" + date + ", " + data + ")"  
cursor.execute(sql,(date,data)) 
```

我收到此错误：

> _mysql_exceptions.ProgrammingError: (1064, 'You have an error in your SQL syntax... near: **\'** """INSERT INTO natgas (Date, UK) VALUES(\'2012-05-01 13:00:34\' , \'59.900\')""" **\'**在第 1 行')

我对语法错误的地方感到困惑，因为以下硬编码示例可以正常工作：

```
def postUKnatgastoMySQL(date, UKnatgas):

cursor = conn.cursor ()

cursor.execute("""INSERT INTO natgas (Date, UK)VALUES(%s, %s)""", (date, UKnatgas)) 
```

你能发现错误吗？

或者，您能告诉我如何将参数传递给字段列表和值列表吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:17:07.050

这些三重引号是在 python 中表示字符串的一种方式。它们不应该是实际查询的一部分。

另一方面，请确保您相信您对这种方法的输入。抬头看`SQL Injection`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:14:06.910

> \'"""INSERT INTO natgas (Date, UK) VALUES(\'2012-05-01 13:00:34\', \'59.900\')"""\' at line 1')

这显然不是一个 vlaid SQL 命令。你需要把反斜杠去掉，你可能正在逃避不应该的东西。

例如，三重引号肯定在那里是不必要的。

# ruby-on-rails - 尽管路由似乎有效但缺少模板

> ID：10397468
> 
> 赞同：0
> 
> 时间：2012-05-01T12:10:51.467
> 
> 标签：ruby-on-rails

当我在子文件夹下生成一个新控制器时，它现在找不到模板，即使同一“结构”中的其他控制器正在工作：

我有以下控制器，它位于 app/members/group_controller.rb （由 rails g 控制器 Members::Group 命令创建）

```
class Members::GroupController < ApplicationController
  def index
    render :layout => 'dashboard'
  end
end 
```

我在views/members/group/index.html.erb 中有一个模板

我在 routes.rb 中有以下相关行（即为清楚起见省略了其他一些行）：

```
namespace :members do
    match '/group' => 'group#index'
end 
```

rake routes 向我展示了以下相关行：

```
members_group            /members/group(.:format)                       members/group#index 
```

当我输入 url [http://127.0.0.1:3000/members/group](http://127.0.0.1:3000/members/group)时，我收到 Template Missing 错误，如下所示：

模板丢失

缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :arb, :coffee]} 的模板成员/组/索引、应用程序/索引。在以下位置搜索：*“/Users/mitch/Documents/Development/TME/app/views”*“/Users/mitch/.rvm/gems/ruby-1.9.2-p290/bundler/gems/active_admin-7c3e25f30224/app/意见“*”/Users/mitch/.rvm/gems/ruby-1.9.2-p290/gems/kaminari-0.13.0/app/views“*”/Users/mitch/.rvm/gems/ruby-1.9。 2-p290/gems/devise-2.0.0/app/views"

路由正在使用 index 方法，因为我可以例如放入重定向并对其采取行动，但我无法让模板显示。

为什么这样？

谢谢

（轨道 3.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:54:45.643

这似乎与我最初生成控制器的方式有关。

我使用大写如下：

rails g controller Members::Group （并类似地尝试了其他一些测试控制器，销毁它们并重新创建它们）

当我销毁控制器并运行小写等效项时：

rails g controller members::group 一切正常，可以找到模板

我在其他地方找不到任何信息来支持这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:26:01.713

我观察到您在组索引页面中呈现仪表板布局，请检查仪表板的路径。它在正确的位置吗？？？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T18:20:08.870

我有同样的问题。当我使用终端导航到目录并在 /layouts 中列出文件时，我有一个布局文件显示为红色的存档文件。我不知道为什么。

要修复它：只需从布局文件复制和粘贴代码，删除布局文件（rm“文件”），然后使用终端通过以下方式创建相同的布局：

```
touch file_name.html.erb 
```

将您的代码粘贴到新文件中，它应该可以工作。

# c# - WCF 流式处理大文件

> ID：10397469
> 
> 赞同：2
> 
> 时间：2012-05-01T12:10:55.020
> 
> 标签：c#, wcf, stream

如何通过流对象在客户端计算机上向服务发送一个大文件的引用，然后从客户端计算机开始逐个下载它（我决定每秒传输多少 MB）？我使用它时有什么限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:31:27.030

IIS 不支持流式传输 - 它缓冲整个请求。

[CodeProject 文章：WCF 4.5 解决了这个问题](http://www.codeproject.com/Articles/324010/What-s-new-in-WCF-4-5-Improved-streaming-in-IIS-ho)

在那之前，如果您使用 IIS，整个文件将在传递给您的服务之前存储在服务器内存中。

目前的解决方案是以块的形式发送文件——每个块在单独的服务调用中发送。

这也将有助于您的带宽限制。这不是 WCF 内置的——你必须自己做。您可以在客户端或服务器上限制每个块。

# django - django中的for循环迭代

> ID：10397470
> 
> 赞同：2
> 
> 时间：2012-05-01T12:10:58.877
> 
> 标签：django, django-templates

我的编码是：视图

```
def showThread(request, thread_id)
    post_list     = Post.objects.filter(id = thread_id)
    post_likes    = PostLikes.objects.all()
    return render_to_response('show.html',locals(),context_instance=RequestContext(request)) 
```

楷模：

```
class Post(models.Model):
        subject = models.CharField(max_length = 250)
        body = models.TextField()
        thread = models.ForeignKey('self', null = True, editable = False ) 
```

显示.html：

```
{% for post in post_list %}
   {{post.id}}{{post.subject}}
{% endfor %}
{% for post_like in post_likes %}
   {% if post_like.post_id == post.id and post_like.user_id == user.id %} 
         U like this post{{post}}
   {% else %}
         {{post}}
   {% endif %}      
{% endfor %} 
```

在 show.html, else 部分，它一次又一次地显示值。但我只需要一次。当我进入 else 条件时如何打破 for 循环。请帮助我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:27:55.443

Django 的[`for`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)标签没有为您提供任何跳出循环的方法。您只需在自己的视图中过滤集合并在条件失败后对其进行切片并将其提供给您的模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T12:20:20.003

您可以使用此[django 片段页面](http://djangosnippets.org/snippets/2093/)中的 django 自定义模板标签。如果您对使用它有疑问，请转到[此页面](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)了解自定义模板标签。

然后使用`{% load loop_break %}`. 然后你可以打破下面给出的for循环：

```
{% for post_like in post_likes %}
    {% if post_like.post_id == post.id and post_like.user_id == user.id %} 
        U like this post{{post}}
    {% else %}
        {{post}}
        {{ forloop|break }}
    {% endif %}
{% endfor %} 
```

这里的 for 循环会在进入**else**部分时中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:59:20.503

你可能会使用`ifchanged`标签：
[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifchanged](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifchanged)

但是，您可能应该考虑将此逻辑移至视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T13:02:29.217

如果你可以构造你的 if 语句来检测你什么时候不想输出任何东西，你可以简单地在 else 子句中放置任何东西：

```
{% for post_like in post_likes %}
   {% if post_like.post_id == post.id and post_like.user_id == user.id %} 
         U like this post{{post}}
   {% else %}
         {% if forloop.first %}
             {{post}}
         {%else%}{%endif%}
   {% endif %}      
{% endfor %} 
```

以上内容可能无法完全满足您的要求 - 您必须自己进行调整。您唯一不能做的就是设置一个标志，表明这是 else 子句的第一个条目。

# jquery - jQuery-Collapse 与标题中的链接

> ID：10397473
> 
> 赞同：1
> 
> 时间：2012-05-01T12:11:13.853
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我使用 Daniel Stocks jQuery-Collapse 和 cookie，效果很好。

[https://github.com/danielstocks/jQuery-Collapse](https://github.com/danielstocks/jQuery-Collapse)

嗨，有人知道我如何将其中一个标题设为链接吗？因此，当单击它时，它会链接到另一个包含菜单的页面，并且当加载此页面时，单击的菜单会展开并显示子项。

在下面的示例中，我需要将 fruits 链接到另一个页面并在此页面上展开：

```
 <div class="demo">             
                <h3><a href="default2.html">Fruits</a></h3>
                <ul>
                    <li>Apple</li>
                    <li>Pear</li>
                    <li>Orange</li>
                </ul>
                <h3>Vegetables</h3>
                <ul>
                    <li>Carrot</li>
                    <li>Tomato</li>
                    <li>Squash</li>
                </ul>
                <h3>Colors</h3>
                <ul>
                    <li>Green</li>
                    <li><a href="http://en.wikipedia.org/wiki/Yellow">Yellow</a></li>
                    <li><a href="http://en.wikipedia.org/wiki/Orange_(colour)">Orange</a></li>
                </ul>
            </div> 
```

任何帮助，将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:16:00.047

您可以添加到`a href="default2.html#id"`一个 id 并将其设置为下一个`ul id="id"`

通过这种方式使用 javascript，您可以在加载时显示正确的列表。

* * *

看看这里

[http://jsfiddle.net/toroncino/an9Z2/](http://jsfiddle.net/toroncino/an9Z2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:26:21.900

我看到的另一个问题是插件将忽略其中包含链接的 h3。

因此您需要将其与自定义 show() 处理程序结合使用。

HTML

```
<h3 id="fruits" rel="index2.html#fuits">Fruits</h3>
<ul>
  <li>Apple</li>
   <li>Pear</li>
   <li>Orange</li>
 </ul>
... 
```

JS

```
$(".demo").collapse({
    head: "h3",
    group: "ul",
    show: function() {
       if($(this).prev().attr('rel')){
           // open a window with the rel value as the location.
           window.location=($(this).prev().attr('rel'));
       }
       $(this).show()
    },
    hide: function(){
       $(this).hide()
    }
}); 
```

然后使用@Andrea 提到的方法，只需将要在其他页面中打开的项目设置为活动状态。

所以在这个例子中，如果 url 是#fruits，那么我们在加载时打开的项目将是 id="fruits" 的 h3

为此，您可以使用。

```
if(window.hash){
    $("#"+window.hash).addClass('active') 
```

# domain-driven-design - 如何在 DDD 中建模递归关系

> ID：10397475
> 
> 赞同：2
> 
> 时间：2012-05-01T12:11:43.127
> 
> 标签：domain-driven-design

如何在 DDD 域模型中对层次关系进行建模？在我的应用程序中，我有一个组织实体，组织可以有部门，而部门又可以有子部门。嵌套深度是任意的。我应该如何设计我的实体和存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:49:44.433

一个简单的模型可能类似于：

```
public class Organization : Division 
{
  public Organization(string name)
    : base(name)
  {
  }
}

public class Division
{
  public Division(string name, Division parent = null)
  {
    this.Name = name;
    this.Parent = parent;
  }
  public string Name { get; private set; }
  public Division Parent { get; private set; }
  public ICollection<Division> Divisions { get; private set; }
  public Division AddDivision(string name)
  {
     var division = new Division(name, this);  
     this.Divisions.Add(division);
     return division;
  }
} 
```

根据具体需求，还有其他方法。如果使用诸如 NHibernate 之类的 ORM 来实现存储库，请查看[this](http://ayende.com/blog/3107/dealing-with-hierarchical-structures-in-databases)以了解如何存储和查询层次关系。

# algorithm - 从第一原理进行复杂性分析的程序

> ID：10397485
> 
> 赞同：0
> 
> 时间：2012-05-01T12:12:48.997
> 
> 标签：algorithm, complexity-theory

假设我想从这个简单循环的第一原则执行复杂性分析 -

```
for (int i = 0; i < n; i++)
{
    a = i + 1;
} 
```

这是我所做的，这是正确的程序还是我要走了？

初始分配 0 到 i：1 次操作

循环执行 n 次：

*   i 与 n 的比较：执行 n+1 次
*   增量 i：操作执行 n 次
*   将 i +1 分配给 a：两次操作执行 n 次

所以操作总数：1 + (n+1) + n + 2n = 4n + 2 这有很大的 Oh(n) 复杂度。

它是否正确？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:23:50.310

**最后的结论是正确**的，算法是`O(n)`

然而，在分析算法时，我们通常避免*准确*计算完成了多少操作，而只寻找上限和下限，因为**确切的细节可能取决于实现**。

例如，在您的代码中 -[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)可能会减少代码中比较操作的数量，并且您计算的确切操作数量与实际完成的操作数量不完全相同。

此外，这假设`a`是一个`int`或一些原始类型，并且`operator=`,`operator+`是在恒定时间内完成的。例如，如果`a`是某种大整数或类似字符串，并且您重载了运算符 - 也许每个`operator=`都是`O(|a|)`，这使得算法`O(nlogn)`，或`O(n^2)`，（或其他东西），取决于类型的具体实现`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:24:08.893

这是完全正确的。（但请注意，每个操作都需要 O(1) 时间。例如，如果操作是函数调用，则还必须考虑其运行时复杂度）

Next time, you might find a "critical" operation and count only the number of times that operation executes. For example, in your example, it is obvious that there will be a constant number of times comparison and increment operations for each assignment operation executed, so you would be fine if you only counted the number of assignments.

It is always easy when you directly count the number of executions of operations. More difficult cases arise when you cannot directly count but for example arrive at a recursive formula, i.e. T(n+1) = a T(n/b) + f(n) etc.

# javascript - 使用 jQuery 加载带有进度条的 iframe？

> ID：10397486
> 
> 赞同：3
> 
> 时间：2012-05-01T12:12:50.873
> 
> 标签：javascript, jquery, html, iframe, progress-bar

在我的工作（内联网）中 - 我有一个包含许多 iframe 的 aspx 页面（我们所有的）。

每个 iframe 都由 btnX 设置（js/jquery）（aspx 页面中有很多按钮......有些将 src 设置为 iframe - 有些没有）。

![在此处输入图像描述](../Images/7b3850861edd8348e268998f2b24578a.png)

*注意：progrssBAr 在主页上...*

目标：iframe 加载时的进度条...

代码：（起初`myPageWrapper`是`display:none`）

```
$('#myPageWrapper').on ('load','iframe',function () { $("#myProgressBar").hide();}); 
```

2个问题：

*   我可以收听 iframe 加载完成事件。但是`showing`ProgfresBar 呢？我不想编辑所有 btn 的事件“onclick”-[使用 jquery] 是否有任何集中解决方案？

我需要一些东西：

*“当 btn 将 iframe 设置`src`为 iframe 时 - 显示`myProgressBar`”*

*   可能同时发生事件：iframe **A**正在加载 2 分钟（示例）-因此它显示进度条，*同时*我按下了设置`src`为 iframe **B**的其他按钮 -加载速度非常快...一旦加载-它隐藏ProgressBar（看看我的代码） -**但**它不应该......**还**没有完成......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T16:41:04.527

# 代码更新

*   **注意**： ~~因为我收到了 3 个赞成票，所以我认为这段代码正在帮助除原始 OP 之外的其他人；所以我决定更新代码以反映它最初的含义，因为到目前为止，OP 和我发现他的问题在他的代码中的其他地方。~~

> **演示：** [http ://so.lucafilosofi.com/iframes-loading-with-progress-bar-using-jquery/](http://so.lucafilosofi.com/iframes-loading-with-progress-bar-using-jquery/)

主页头

```
 var iframes = [], progress = 0;
        $(function() {
            $pGressIndex = $('#progress-bar-indicator');
            $('#navigation a').click(function() {

                var iframe_id = this.hash.split('#')[1];

                if (iframes.indexOf(iframe_id) === -1) {

                    $('#log').prepend('<p><strong>' + iframe_id + '</strong> is loading!</p>');

                    iframes.push(iframe_id);

                    if (parseInt($pGressIndex.width()) == 960) {
                        $pGressIndex.removeAttr('style');
                    }

                    var fW = (iframes.length > 1) ? (660 - (20 * iframes.length ) ) : 660;

                    $pGressIndex.animate({
                        width : fW
                    }, 5000);

                    var iframe_page = iframe_id + '.html';

                    if ($(this.hash).length != 0) {
                        $(this.hash).remove();
                    }

                    $('<iframe>').attr({
                        id : iframe_id,
                        src : iframe_page,
                        frameBorder : 0,
                        width : 960
                    }).appendTo('#iframes-wrapper');
                }
                return false;
            });
        }); 
```

主页底部：

```
 window.addEventListener("message", function(e) {
                console.log(iframes);
                var index = iframes.indexOf(e.data);
                iframes.splice(index, 1);
                if (iframes.length == 0) {
                    $pGressIndex.stop(true).animate({
                        width : 960
                    }, 100);
                }
                $('#' + e.data).show();
            }, false); 
```

每个 iframe 页面的底部：

```
 top.postMessage('frame-name-or-what-you-want', window.location.href); 
```

# python - 在 mod_wsgi 守护程序模式应用程序中重新加载模块

> ID：10397488
> 
> 赞同：0
> 
> 时间：2012-05-01T12:12:54.053
> 
> 标签：python, apache, mod-wsgi, daemon, python-module

有没有办法确保在以守护程序模式运行的 mod_wsgi 应用程序中清除所有模块并重新加载？Apache 重启就够了吗？或者守护进程是否会在重启后持续存在？

我看过[文档](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)，但我仍然不清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:21:29.597

您是否尝试修改 wsgi 文件。对于 unix 中的 ex，touch 'wsgi.script' 应该可以。

另一方面，重新启动 apache 绝对足够了。

# windows-phone-7 - WP7：TimePicker 绑定未使用新值更新

> ID：10397490
> 
> 赞同：2
> 
> 时间：2012-05-01T12:13:01.293
> 
> 标签：windows-phone-7, data-binding, timepicker

我目前遇到了 WP7 的 TimePicker 的问题，特别是将其绑定到 ViewModel。有问题的 TimePicker 设置闹钟的时间。首次加载页面时，TimePicker 会正确显示 Alarm 对象的值（在本例中为 12:00am 的默认值）。但是，当用户选择一个新值时，这不会反映在模型中 - 它会被之前的 12:00am 值覆盖。

我正在使用 MVVM 创建此表单并保存数据绑定。有什么特别是我做错了吗？

**（查看）AlarmEditorControl.xaml**

```
<TextBlock Height="30" HorizontalAlignment="Left" Margin="1,6,0,0" Name="lblAlarmTime" Text="Alarm Time:" VerticalAlignment="Top" Grid.Column="2" FontSize="26" />
<!-- Data binding isn't working for updates! -->
<toolkit:TimePicker HorizontalAlignment="Left" Margin="140,34,0,0" Name="tpAlarmTime" VerticalAlignment="Top" Width="161" Grid.Column="1" Grid.ColumnSpan="2" Value="{Binding Path=Time, Mode=TwoWay}" /> 
```

**(ViewModel) AlarmEditorModel.cs**

```
[DataContractAttribute]
public class AlarmEditorModel
{
    private int _index;

    [DataMemberAttribute]
    public Alarm Alarm { get; set; }

    [DataMemberAttribute]
    public int Index
    {
        get
        {
            return _index;
        }

        set
        {
            _index = value;
        }
    }

    public AlarmEditorModel(int index)
    {
        _index = index;
        Alarm = new Alarm();

        // Get the list of alarms
        AlarmSerializer serializer = new AlarmSerializer();

        // Check the index is in range
        List<Alarm> alarms = serializer.AlarmList;
        if (_index > -1 && index < alarms.Count)
        {
            Alarm = alarms[_index];
        }
    }

    public void Commit()
    {
        // Get the current list of alarms
        AlarmSerializer serializer = new AlarmSerializer();
        List<Alarm> alarms = serializer.AlarmList;

        // Replace our new value
        alarms[_index] = Alarm;
        serializer.AlarmList = alarms;
    }
} 
```

**（型号）Alarm.cs**

```
[DataContract]
public class Alarm : INotifyPropertyChanged
{
    private bool _active;
    private DateTime _time;

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public DateTime Time
    {
        get
        {
            return _time;
        }
        set
        {
            if (_time != value)
            {
                _time = value;
                RaisePropertyChanged("Time");
            }
        }
    }

    [DataMember]
    public AlarmFrequency Frequency { get; set; }

    [DataMember]
    public AlarmTone Tone { get; set; }

    [DataMember]
    public bool Active { 
        get {
            return _active;
        }
        set {
            _active = value;
        } 
    }

    public string AlarmTimeString { 
        get {
            return Time.ToShortTimeString();
        }
    }

    /**
     * Default Constructor
     */
    public Alarm()
    {
        Debug.WriteLine("Alarm: Using default constructor");
        this.Name = "New Alarm";
        this.Time = DateTime.Today;
        this.Frequency = new AlarmFrequency();
        this.Tone = new AlarmTone();
        this.Active = true;

        Debug.WriteLine("Alarm hours is " + this.Time.Hour);
    }

    /**
     * Parameterised constructor
     */
    public Alarm(string Name, DateTime Time, AlarmFrequency Frequency,
                    AlarmTone Tone, bool Active)
    {
        Debug.WriteLine("Alarm: Using parameterised constructor");
        this.Name = Name;
        this.Time = Time;
        this.Frequency = Frequency;
        this.Tone = Tone;
        this.Active = Active;
       }
} 
```

**（调用页面）NewAlarm.xaml.cs**

```
 private List<Channel> feeds;
    private AlarmEditorModel _aem;
    private int _index;

    public NewAlarm()
    {
        InitializeComponent();

        feeds = new List<Channel>();
        feeds.Add(new Channel(null, null, "Feed 1", DateTime.Now));
        feeds.Add(new Channel(null, null, "Feed 2", DateTime.Now));
    }

    /**
     * Setup functions when the page is loaded
     */
    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        // Function vars + debug

        Debug.WriteLine("Navigating to");

        // Check if we're recovering from tombstone
        if (!StateUtilities.IsLaunching && this.State.ContainsKey("AlarmState"))
        {
            // Recover the saved model
            _aem = (AlarmEditorModel)this.State["AlarmState"];
        }
        else 
        {
            try
            {
                // Editing an alarm.
                _index = Convert.ToInt32(this.NavigationContext.QueryString["index"]);
                Debug.WriteLine("Editing an alarm");
            }
            catch (KeyNotFoundException knfe)
            {
                Debug.WriteLine(knfe.Message);

                // No index provided, new alarm
                _index = -1;
            }

            // Set the model from the index
            _aem = new AlarmEditorModel(_index);
        }

        AlarmEditor.DataContext = _aem.Alarm;
        Debug.WriteLine(_aem.Alarm.Time.Hour);
    }

    /**
     * Preserve alarm details when tombstoning
     */
    protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);

        if (this.State.ContainsKey("AlarmState"))
        {
            this.State["AlarmState"] = _aem;
        }
        else
        {
            this.State.Add("AlarmState", _aem);
        }

        StateUtilities.IsLaunching = false;
    } 
```

* * *

**编辑 1**

看起来 Alarm.Time 的设置器被调用了两次。通过将以下调试行添加到 Time 属性：

```
[DataMember]
    public DateTime Time
    {
        get
        {
            return _time;
        }
        set
        {
            Debug.WriteLine("Current time is " + _time.ToShortTimeString());
            Debug.WriteLine("New time is " + value.ToShortTimeString());

            if (_time != value)
            {
                Debug.WriteLine("Changing time value");
                _time = value;
                RaisePropertyChanged("Time");
            }
        }
    } 
```

将时间设置为上午 9:10 时，日志中会生成以下输出：

```
Current time is 4:00 AM
New time is 9:10 AM 
Changing time value
Current time is 12:00 AM 
New time is 4:00 AM 
Changing time value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:33:40.480

我想问题解决了。在从 Tombstone 恢复时，我需要进行额外的检查，`OnNavigatedTo`以便在 TimePicker 被 ViewModel 覆盖之前获取它的值：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
        // Check if we're recovering from tombstone
        if (!StateUtilities.IsLaunching && this.State.ContainsKey("AlarmState"))
        {
            // Recover the saved model
            _aem = (AlarmEditorModel)this.State["AlarmState"];

            // Use the value from the TimePicker
            _aem.Alarm.Time = (DateTime)AlarmEditor.tpAlarmTime.Value;
        }
        else 
        ... 
```

需要对此解决方案进行更多测试，但到目前为止它似乎正在完成这项工作。

# c# - SRP 是否建议 MVP Presenter 只应承担一项职责？

> ID：10397491
> 
> 赞同：0
> 
> 时间：2012-05-01T12:13:02.197
> 
> 标签：c#, .net, vb.net

我有两个功能：一个显示单个实体 ( `EntityX`) 的详细信息，另一个允许用户查看所有 EntityX 的列表。

使用 MVP，使用适当的和视图的`EntityXController`两个方法（例如`View`和）更好，还是我应该遵守我对 SRP 的解释并创建一个和一个来缩小每个方法的职责？`List``View``List``EntityXListController``EntityXViewController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:33:31.437

这听起来更像是同一个模型，不同的 View-Presenter 用于详细信息，以及另一个 View-Presenter 用于列表。

# irc - IRSI“连接超时”问题

> ID：10397492
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:13:10.060
> 
> 标签：irc, bluehost, irssi

我正在尝试在我的 Bluehost 帐户上运行 IRSSI。我已成功安装 IRSI，但无法连接到任何 IRC 服务器。我只是得到无法连接服务器 X 端口 6667 [连接超时]。我已经从朋友的服务器上复制了我的 IRSII 配置文件，所以我希望可以排除这种情况。

我联系了 Bluehost，他们说这是可能的，因为其他用户过去也这样做过，他们并没有专门阻止 IRC 流量，但他们不为此提供任何支持。

我尝试连接到不同的服务器并尝试不同的端口，即 SSL 的 7001，这没有任何影响。我查看了我正在运行的进程（lsof -P | grep :6667），我唯一可以与连接尝试直接相关的内容（SYS SENT）和这样的行

```
irssi     30497  name  cwd       DIR   8,81     4096  167821313 /home1/name
lsof: no pwd entry for UID 3152
irssi     30497  name  rtd       DIR    9,1     4096   11190361 /
irssi     30497  name  txt       REG   8,81  3695634  167920447 /home1/name/bin/irssi
irssi     30497  name  mem       REG    9,0  1367232   12093693 /root/lib64/libcrypto.so.0.9.8e
irssi     30497  name  mem       REG    9,0   315080   12093694 /root/lib64/libssl.so.0.9.8e
irssi     30497  name  mem       REG    9,0   144776   12093675 /root/lib64/ld-2.5.so
irssi     30497  name  mem       REG    9,0  1718232   12093682 /root/lib64/libc-2.5.so
irssi     30497  name  mem       REG    9,0   615136   12093692 /root/lib64/libm-2.5.so
irssi     30497  name  mem       REG    9,0    85544   12095023 /root/lib64/libz.so.1.2.3
irssi     30497  name  mem       REG    9,0    23360   12093714 /root/lib64/libdl-2.5.so
irssi     30497  name  mem       REG    9,0   145872   12093686 /root/lib64/libpthread-2.5.so
irssi     30497  name  mem       REG    9,0    95464   12095021 /root/lib64/libselinux.so.1
irssi     30497  name  mem       REG    9,0   247496   12095020 /root/lib64/libsepol.so.1
irssi     30497  name  mem       REG    9,0    53448   12095030 /root/lib64/librt-2.5.so
irssi     30497  name  mem       REG    9,0  1262480    8192008 /root/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE/libperl.so
irssi     30497  name  mem       REG    9,0    48600   12095026 /root/lib64/libcrypt-2.5.so
irssi     30497  name  mem       REG    9,0    92816   12095019 /root/lib64/libresolv-2.5.so
irssi     30497  name  mem       REG    9,0     9472   12095018 /root/lib64/libkeyutils-1.2.so
irssi     30497  name  mem       REG    9,0    10096   12095022 /root/lib64/libcom_err.so.2.1
irssi     30497  name  mem       REG    9,0    18152   12095049 /root/lib64/libutil-2.5.so
lsof: no pwd entry for UID 3152
irssi     30497  name  mem       REG    9,0   647608   12095034 /root/lib64/libglib-2.0.so.0.1200.3
irssi     30497  name  mem       REG    9,0   613928    6160397 /root/lib64/libkrb5.so.3.3
irssi     30497  name  mem       REG    9,0   190976    6160398 /root/lib64/libgssapi_krb5.so.2.2
irssi     30497  name  mem       REG    9,0   114352   12095032 /root/lib64/libnsl-2.5.so 
```

任何有关调试问题的帮助都非常受欢迎。也欢迎任何提示或提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:54:55.747

经过更多探索并尝试远程登录到该地址后，我发现问题在于我的托管 WAS 阻塞了一些出站端口。这意味着我遇到的问题与 IRSI 无关。希望这可以在未来指导人们。尤其是通过尝试 Telnet 到服务器来诊断问题

# javascript - Google Map API - 获取用户地址

> ID：10397493
> 
> 赞同：0
> 
> 时间：2012-05-01T12:13:24.507
> 
> 标签：javascript, ajax, google-maps, geolocation

我尝试了几种方法来使用地理定位方法获取访问者的国家/地区位置，但我仍然无济于事。

有人可以提供帮助，因为我想获得一个访问者国家并使用 ajax 将其写入数据库。

我当前的代码

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script>
  var geocoder;

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 
//Get the latitude and the longitude;
function successFunction(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    codeLatLng(lat, lng)
}

function errorFunction(){
    alert("Geocoder failed");
}

  function initialize() {
    geocoder = new google.maps.Geocoder();

  }

  function codeLatLng(lat, lng) {

    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
      console.log(results)
      var country = results[7].formatted_address;
      $('.location').text(country);
      var dataStrings = 'email=<?php echo $userid;?>&location='+ country;  
      console.log(dataStrinsg);
      $.ajax({
        type: "POST",
        url: "location-update.php",
        data: dataStrings,
        success: function() {
            location.reload();
            }
      });
      return false;
        if (results[1]) {
         //formatted address
        // alert(results[0].formatted_address)
        //find country name
             for (var i=0; i<results[0].address_components.length; i++) {
            for (var b=0;b<results[0].address_components[i].types.length;b++) {

            //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
                if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                    //this is the object you are looking for
                    city= results[0].address_components[i];
                    break;
                }
            }
        }
        //city data
        alert(city.short_name + " " + city.long_name)

        } else {
          alert("No results found");
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
  }</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:04:59.220

假设您`initalize()`在地理编码之前调用（否则`geocode`将未定义）：

您正在`results[7]`这里访问：

```
var country = results[7].formatted_address; 
```

...但不能保证`results[7]`存在。

# html - ExpressionEngine 的标签集成问题

> ID：10397496
> 
> 赞同：1
> 
> 时间：2012-05-01T12:13:26.490
> 
> 标签：html, plugins, content-management-system, expressionengine

我对表达式引擎还很陌生，所以如果这个问题很明显，请原谅我在我的寺庙中集成 exp:resso 商店标签时遇到了一个小问题，由于某种原因，我在 exp:resso 的 {store} 标签下应用的所有代码没有出现在我的浏览器上。下面的代码演示了我如何构建我的 EE 标签，如果我错了，请纠正我......

```
{exp:channel:entries channel="products" limit="6" paginate="bottom"}
    {exp:store:product entry_id="1" return="cart"}
    <ul class="inventory">
        <li class="item2"> {p_productimage}<a href="#"><img class="itemImg" alt="" src="{p_productimage_image}"/></a>{/p_productimage}
        <div class="product-fam1">
            <h3>{p_title}</h3>
            <a class="viewItem" href="#"><img src="iamnatesmithen.com/fluotics/css/images/viewItem.jpg";</a>
        </div>
        </li>
    </ul>
    {/exp:store:product}
{/exp:channel:entries} 
```

ExpressionEngine 测试站点：[http ://www.iamnatesmithen.com/ExpressionEngine2/index.php/inventory](http://www.iamnatesmithen.com/ExpressionEngine2/index.php/inventory)

当前静态站点：http: [//iamnatesmithen.com/fluotics/products.html](http://iamnatesmithen.com/fluotics/products.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:39:22.683

看起来您没有将产品的条目 ID 正确传递给 {exp:store:product}。你试过这个吗？注意 {exp:store:product entry_id=" **{entry_id}** "...

```
{exp:channel:entries channel="products" limit="6" paginate="bottom"}
    {exp:store:product entry_id="{entry_id}" return="cart"}
     <!-- snip -->
    {/exp:store:product}
{/exp:channel:entries} 
```

# ios - 发电机ios

> ID：10397499
> 
> 赞同：1
> 
> 时间：2012-05-01T12:13:48.157
> 
> 标签：ios, ios5, mogenerator

我安装了Mogenerator。现在我该怎么办？我该如何使用它？

我遇到的第一个问题是我不知道检查复选框“仅在安装时运行脚本”是否为 mogenerator ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:46:41.393

您指的是哪个复选框？在 Xcode 中的“运行脚本”构建阶段？

Mogenerator 是一个用于从 Core Data 模型生成模型类的工具。由于它还没有与 Xcode 4 兼容的插件，因此每当您对 Core Data 模型进行更改时，您都希望将其作为命令行工具运行。

您可以在运行脚本构建阶段执行此操作。在这种情况下，您可能不想等到安装应用程序，因为在您运行安装构建之前，您将无法访问模型类上新添加的属性。相反，当您对 Core Data 模型进行任何更改并开始编译项目之前，您确实希望脚本运行。

我发现 Core Data 更改相对较少，因此我可能会选择在进行更改时手动运行 mogenerator，而不是在每次构建时都不必要地重新运行它。我可能会将我的 mogenerator 命令行设置保存在 shell 脚本或 rake 任务中，但或者您可以按照 John Blanco 的示例创建一个新的构建目标，其中仅包含您的 mogenerator 运行脚本构建阶段，以便您可以在 Xcode 中按需运行它：[http://raptureinvenice.com/getting-started-with-mogenerator/](http://raptureinvenice.com/getting-started-with-mogenerator/)

# drupal - drupal 7中的谷歌日历事件列表

> ID：10397500
> 
> 赞同：1
> 
> 时间：2012-05-01T12:13:51.683
> 
> 标签：drupal, drupal-7, google-calendar-api

Drupal 7 中是否有任何模块可以集成**谷歌日历**事件。

需要将谷歌事件显示到 D7 日历中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T14:34:20.450

让我从这里开始使用谷歌日历的 drupal 模块列表。有许多不同的和一些未完成的工作。

[名称+链接],[7.x 版本或状态],[一些细节]

*   [fullcalendar](https://drupal.org/project/fullcalendar) , 7.x-2.0, 与谷歌日历的集成简单且有限（在视图中添加一个完整的谷歌日历导入字段）；

*   [gcal](https://drupal.org/project/gcal) , 7.x-1.0-rc1, google calendar API 上的一个实现，我没试过。文档说它可以：1）创建、更新、删除、获取辅助日历；2) 获取单个日历设置和设置列表；3）获取颜色设置；4) 创建、更新、删除、获取、移动事件；5）创建、删除、获取Acl；6) 创建、更新、删除、获取CalendarList；7) FreeBusy 检查事件，quickAdd 事件当前版本包括。尚未完成： 8) 导入事件和其他功能。

*   [gcal_events](https://drupal.org/project/gcal_events)，7.x-1.x-dev，我从来没有尝试过。它显示来自谷歌日历 xml 提要的一组即将发生的事件。

*   [date_ical](https://drupal.org/project/date_ical)，7.x-2.13，我从未尝试过（但我选择了这个解决方案）。iCalendar 是标准的互联网日历格式（谷歌日历也可以导出 ical）。date_ical 在 Drupal 中提供 ical 支持，提供 Views 插件以将您的站点日历导出为 iCal 提要，并提供用于将外部 iCal 提要导入站点日历的 Feed 插件。

*   [议程](https://drupal.org/project/agenda)，7.x-1.4，我从未尝试过。将 Google 日历中即将发生的事件列表显示为一个块。

*   [event_GCalendar](https://drupal.org/project/event_GCalendar)，未完成，谷歌日历 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:54:22.700

绝对地。使用[FullCalendar](http://dgo.to/fullcalendar) (http://dgo.to/fullcalendar) 中的 Google 日历字段。

FullCalendar 是 Full Calendar jQuery 插件的 Drupal 模块。

放入您的 Google 日历 XML 提要，一切顺利。

# asp.net-mvc - 使用 RouteTable 将所有“/api”请求路由到 ASP.NET MVC 中的 HttpHandler

> ID：10397502
> 
> 赞同：0
> 
> 时间：2012-05-01T12:14:11.313
> 
> 标签：asp.net-mvc, routes

我遇到了 ASP.NET MVC 框架路由的问题，它通过默认路由获取 HttpHandler 所需的 URL 路由，反之亦然：

```
routes.MapRouteLowercase(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional });// Parameter defaults 
```

我试过忽略我需要的路线：

```
routes.IgnoreRoute("api/{*pathInfo}"); 
```

如果我在添加 MVC 路由之前添加到 RouteTable，所有 MVC 路由最终都指向我的“/api”路由。

如果我之后添加它们，则路由在路由表中但无法识别。我尝试使用 RouteDebugger，它确实将我的路线显示为匹配，但它们从未被调用。

源代码在我正在编写的[这个微型 REST 框架中，如果有帮助的话。](https://bitbucket.org/mrshrinkray/microrest/src/a61f12b080f2/MicroRest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:00:51.080

您是否需要 MVC 框架为您做路由？

如果没有，请看这篇文章：[HttpHandler 的基本路由](http://www.codeproject.com/Articles/380098/Basic-Routing-for-HttpHandler)

如果您需要快速简单的东西，这是一个不错的选择；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:16:37.013

我找到了一种解决方法，但它没有解释为什么我的 Routes 在 url 根本不以“api/”开头时会在 MVC 路由上大吃一惊。

我正在使用的解决方法是向我的路由添加一个约束，检查它是否是 Url 生成，并忽略它，以及是否传入 MVC 数据：

```
// Constrain HTTP method, and an extra constraint so MVC urls aren't swallowed.
route.Constraints = new RouteValueDictionary();
route.Constraints.Add("httpMethod", new HttpMethodConstraint(new string[] { restAttribute.Method }));
route.Constraints.Add("MvcContraint", new IgnoreMvcConstraint());

RouteTable.Routes.Add(route); 
```

约束：

```
public class IgnoreMvcConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        if (routeDirection == RouteDirection.UrlGeneration)
            return false;
        if (values.ContainsKey("controller") || values.ContainsKey("action"))
            return false;

        if (route.Url.StartsWith(RestHttpHandler._baseUrl))
            return true;
        else
            return false;
    }
} 
```

# php - 更快/更轻松地查询此结果数组

> ID：10397505
> 
> 赞同：0
> 
> 时间：2012-05-01T12:14:27.170
> 
> 标签：php, mysql, arrays, left-join

我正在尝试获取一个包含来自三个表的信息的数组。结果应该是一个数组，我可以在其中循环遍历第一个表、第二个表的相关行以及第三个到第二个的相关行。目前，我有三个单独的 SQL 查询，然后将它们重组为一个数组。

也许有人可以帮助我了解查询这些表以获取以下数组的最佳方法。我目前有三个查询 - 每个表一个。使用 mysql JOIN 是一个非常简单的查询，但是我在将它安排回数组时遇到了问题。

我正在考虑使用 mysql JOIN 以更少的查询获得相同的结果，但实际上我想知道这是否很好甚至可能。我将在表格的大致大小上添加数字。

让我给你一些细节：

**桌子**

```
courses(4000 rows)
course_id----course_date

groups(50 000 rows)
group_id----group_size----group_course_id

users(200 000 rows)
user_id----user_name----user_group_id 
```

所需数组的示例：

```
[0] => Array('courseinfo' => 
              Array('course_id' => 1234,
                    'course_date' => '2012-08-12')
             'groups' =>
              Array( [0] => Array('group_id' => 345,
                                  'group_size' => 3,
                                  'group_course_id' => 1234,
                                  'users' => Array([0] => Array('user_id' => 456,'user_name' => Pete Cabrinha, 'user_group_id = '345'), 
                                                   [1] => Array('user_id' => 336,'user_name' => John Smith, 'user_group_id = '345'))
                     [1] => Array('group_id' => 345,
                                  'group_size' => 3,
                                  'group_course_id' => 1234,
                                   'users' => Array([0] => Array('user_id' => 456,'user_name' => Pete Cabrinha, 'user_group_id = '1234'), 
                                                    [1] => Array('user_id' => 336,'user_name' => John Smith, 'user_group_id = '1234')))) 
```

希望不要太复杂，注意 course_id 和 group_course_id 之间的关系以及 group_id 和 user_group_id 之间的关系。

这是我目前查询方式的一小部分：

```
 $data = $courses = $read->read_courses();
    $i = 0;
    foreach($courses as $course)
    {
        if($data[$i]['groups'] = $read->read_groups($course['course_id']))
        {
            $j = 0;
            foreach($data[$i]['groups'] as $group)
            {
                $data[$i]['groups'][$j]['users'] = $read->read_users($group['group_id']);
                $j++;
            }
        }
        else {$data[$i]['groups'][0] = array(); $data[$i]['groups'][0]['users'] = array();}
        $i++;
    } 
```

最后是我想使用的 JOIN ......

```
 SELECT 
            course.course_id,
            course.course_date,

            groups.group_id,
            groups.group_course_id,
            groups.group_size,

            user.user_name

        FROM course
        LEFT JOIN groups 
        ON course.course_id = groups.group_course_id

        LEFT JOIN user
        ON groups.group_id = user.user_group 
```

希望有人可以在这里帮助我，或者让我朝着正确的方向前进 - 甚至想出一个更好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:37:56.527

正如您在答案中看到的，有几种方法可以执行该查询，但您永远不应该将整个数据库加载到 PHP 数组中。根据您的评论，您一次需要一个月，因此添加一个 WHERE 子句将结果限制为您想要的月份。

例如：

```
SELECT ...
FROM ...
WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= date_col; 
```

这将为您提供最后 30 天的时间。

或者，您可以使用 LIMIT 一次只显示一定数量的记录：

```
LIMIT 0, 100 
```

将为您提供从偏移量 0 开始的 100 条记录（前 100 条记录）。它使分页更容易。

如果您想首先获得最新的课程，请使用 ORDER BY：

```
ORDER BY course.course_date DESC
LIMIT 0, 100 
```

然后您只需要更改每个查询的限制即可显示下一批记录，当然，您的查询将非常快并且使用很少的内存，因为您永远不会下载超过 100 条记录。

* * *

对不起，但听起来你正在用 PHP 做数据库的工作。

为什么你会在 PHP 数组中加载 254k 条目？您不会在单个页面上显示 254k 记录，是吗？性能将是可怕的，只有少数用户会使您的服务器崩溃。

您真的应该重新考虑您真正需要哪些数据以及如何使用它。

你想做什么？你需要什么数据？如何从数据库服务器获取它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:21:52.707

而是使用这个

```
 SELECT *
    FROM bs_course course 

    LEFT JOIN bs_group AS groups 
    ON course.course_id = groups.group_course_id

    LEFT JOIN bs_user AS user 
    ON groups.group_id = user.user_group_id

    ORDER BY course.course_date,course.course_lock,course.course_name,groups.group_status,groups.group_created 
```

然后去循环。`group_course_id`并且`user_group_id`将在 ON 条件下使用。

这会给你结果，但你仍然必须为所需的结果创建一个循环。

等待我的回复让循环用于创建上述数组。

**编辑：**

使用此函数创建数组：

```
function create_array($resultset){
    if(!$resultset){return NULL;}

    $current_cid=0;
    $current_cid_counter = 0;
    $current_gid=0;
    $current_gid_counter = 0;
    $current_uid_counter = 0;
    $return_array = array();

    while($row = mysql_fetch_assoc($resultset)){
        if($current_cid!=$row['course_id']){
            $return_array[$current_cid_counter++]['courseinfo'] = array('course_id'=>$row['course_id'],'course_date'=>$row['course_date']);
            $current_cid = $row['course_id'];
            $current_gid_counter = 0;
            $current_uid_counter = 0;
        }
        if($current_gid!=$row['group_id']){
            $return_array[$current_cid_counter-1]['groups'][$current_gid_counter++] = array('group_id' => $row['group_id'],'group_size' => $row['group_size'],'group_course_id' => $row['course_id']);
            $current_gid = $row['group_id'];
            $current_uid_counter = 0;
        }
        $return_array[$current_cid_counter-1]['groups'][$current_gid_counter-1]['users'][$current_uid_counter++] = array('user_id' => $row['user_id'],'user_name' => $row['user_name'], 'user_group_id' => $row['group_id']);
    }

    return $return_array;
} 
```

我正在使用 mysql 扩展，如果您使用任何其他扩展，请相应地进行编辑

# javascript - 在 JavaScript 中使用小程序进行 Telnet

> ID：10397506
> 
> 赞同：6
> 
> 时间：2012-05-01T12:14:28.533
> 
> 标签：javascript, wsh

我正在尝试打开一个 telnet 窗口并将一些密钥发送到这个活动窗口。下面是 JavaScript 代码：

```
var oWshShell = new ActiveXObject("WScript.Shell");
oWshShell.Run("telnet 43.43.22.45 23");
//oWshShell.Run("firefox.exe http://www.google.com");
//oWshShell.Run(" notepad.exe");
oWshShell = null; 
```

但我无法完全打开它们。它说该文件不存在。但是，注释行在未注释时可以正常工作。可能是什么问题呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:02:25.073

@Avi，除非您使用 Internet Explorer 并启用完全信任安全性，否则我认为您无法在页面加载时执行此类命令。但是，如果您必须这样做，您只需指定`telnet.exe`. 请注意windows使用`\`分隔目录级别，但这是javascript的特殊字符，必须转义；IE：

```
var path = "c:\\Windows\\System32"; // this is c:\Windows\System32 in javascript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:05:38.057

您是否尝试过使用类似的 URL `telnet://43.43.22.45`？

```
<a href="telnet://43.43.22.45">Connect to server</a>. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:38:53.733

```
oWshShell.Run("telnet 43.43.22.45 23"); 
```

Telnet 默认在系统路径中。所以这应该有效。

```
//oWshShell.Run("firefox.exe http://www.google.com"); 
```

Firefox*不在*系统路径中。因此，run 不知道如何找到它。

```
//oWshShell.Run(" notepad.exe"); 
```

注意“记事本”之前的空格->该文件名不存在。

# facebook - Facebook 以外的服务是否使用 Open Graph？

> ID：10397510
> 
> 赞同：32
> 
> 时间：2012-05-01T12:15:15.523
> 
> 标签：facebook, google-plus, pinterest, facebook-opengraph

Facebook 以外的其他服务在抓取页面以共享信息时是否会使用 Open Graph 标签？

意思是，如果我在页面上有一个 AddThis 按钮（例如），它允许分享到 Facebook、Google+ 和 Pinterest 等，其他任何服务是否也会尊重这些元标记？或者通常是我们专门为 Facebook 做的事情？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-02T20:35:19.257

答案似乎是肯定的……有点。

由于 Open Graph 是一种开放式协议，它并不意味着特定于 Facebook。似乎并非所有供应商都尊重这些标签，但大多数供应商都这样做。

以 Pinterest 为例。如果您使用[AddThis 提供](http://support.addthis.com/customer/portal/articles/381237-third-party-buttons#pinterest-pinit)的“Pin”按钮，它将使用“og:image”、“og:description”和“og:url”标签。然而，通过我自己的实验，Pinterest 书签和直接通过他们的网站添加似乎并没有使用开放图元数据。

至于 Google Plus，这里已经回答[了](https://stackoverflow.com/questions/6536213/are-there-tags-to-specify-the-google-1-story-format-in-google-like-og-meta-for)。基本上，它们赋予“schema.org”最高权重，但如果它们不存在，它们将依赖于开放的图形标签，如果它们不存在，它们将依赖于页面内容，如“标题”等。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-16T00:25:37.860

[Open Graph 协议](http://ogp.me/)得到广泛的社交平台的支持，包括：

1.  [Facebook](https://developers.facebook.com/docs/sharing/opengraph)
2.  [Pinterest 开发人员](https://developers.pinterest.com/docs/rich-pins/overview/)
3.  [领英](https://developer.linkedin.com/docs/share-on-linkedin)
4.  [推特](https://dev.twitter.com/cards/getting-started#opengraph)
5.  [谷歌加](https://developers.google.com/+/web/snippet/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T18:26:54.707

[Embed.ly](http://embed.ly)还解析 Open Graph 标签（[参见此处的示例](http://developer.yammer.com/opengraph/)），因此（可能）也解析他们的客户，例如：TweetDeck、bit.ly、hunch、Yammer、Reddit[等](http://embed.ly/customers)。

# asp.net-mvc - 在 web.config 中指定的 SitefinityMembershipProvider 的提供程序名称“默认”无效

> ID：10397511
> 
> 赞同：0
> 
> 时间：2012-05-01T12:15:17.070
> 
> 标签：asp.net-mvc, telerik, membership-provider, sitefinity

> 在 web.config 文件中指定的 SitefinityMembershipProvider 的提供程序名称“默认”无效。该名称应与 Sitefinity 的 Security.config 配置中配置的提供程序之一匹配。

我正在尝试在我的 asp.net Web 应用程序中使用 sitefinity 成员身份来验证用户。我有一个包含用户和角色的 sitefinity 数据库。会员资格在 sitefinity 项目中工作，但在外部网站中不工作。

我将所有 DLL 从 bin 文件夹和 App_Data/Sitefinity/Configuration 中的所有文件复制到外部 asp.net Web 应用程序。

还在 web.config 中添加了 Provider

```
 <membership defaultProvider="Default">
  <providers>
    <clear/>
    <add name="Default" type="Telerik.Sitefinity.Security.Data.SitefinityMembershipProvider, Telerik.Sitefinity"/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
  </membership> 
```

在 SecurityConfig 配置文件中还添加了 Membership 部分

```
 <membership defaultProvider="Default">
<providers>
<clear/>
<add name="Default" type="Telerik.Sitefinity.Security.Data.SitefinityMembershipProvider, Telerik.Sitefinity"/>
</providers>
</membership> 
```

在我尝试使用的登录按钮单击事件中

```
 System.Web.Security.MembershipProvider mp =     System.Web.Security.Membership.Providers["default"];
        var rtn = mp.ValidateUser("admin", "123456");

        if (rtn)
        {
            Telerik.Sitefinity.Security.UserManager um = Telerik.Sitefinity.Security.UserManager.GetManager();
            var user = um.GetUser(Model.Username);
        } 
```

验证用户，但它会引发错误。

**源代码链接**：[http ://www.mediafire.com/?luo87fxigvx4amd](http://www.mediafire.com/?luo87fxigvx4amd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:21:42.790

我不确定您的问题是什么，但您需要确保已将所有 Sitefinity 和 OpenAccess 程序集拉到您的 bin 文件夹中。

此外，根据此线程[http://www.sitefinity.com/devnet/forums/sitefinity-4-x/sdk/reference-sitefinity-dll-s-from-external-site.aspx](http://www.sitefinity.com/devnet/forums/sitefinity-4-x/sdk/reference-sitefinity-dll-s-from-external-site.aspx) -“Sitefinity 组件依赖于配置，不再存储在 web/app 配置中，而是存储在 app_data 中的单独配置文件中”，因此您还需要将它们拉过来。

但是，推荐的方法是构建一个 Web 服务 (http://www.sitefinity.com/devnet/forums/sitefinity-3-x/developing-with-sitefinity/creating-users-with-sitefinity-api.aspx #1162552）。

# php - url的modrewrite

> ID：10397524
> 
> 赞同：0
> 
> 时间：2012-05-01T12:16:30.407
> 
> 标签：php, mod-rewrite

我有一些 mod rewrite 将删除 .php 并格式化一个名为county.php 的特定页面。

我的问题在于重写county.php 的部分。我必须在所有指向 css、图像和 js 文件的链接前面加上一个“/”。当我使用 php 包含时，这会导致站点的其他部分出现问题。有没有解决的办法？谢谢

```
RewriteEngine On
RewriteRule ^county/([^/\.]+)/?$ county.php?county_id=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) $1.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:18:07.413

如果您使用 mod_rewrite 创建虚拟文件夹，则必须为所有其他媒体类型（CSS、JS、图像...）处理不同的文件夹名称。处理动态数量的文件夹，甚至一些有文件夹的页面和一些没有文件夹的页面会使其变得更加复杂。

我看到以下解决方法：

1.  始终使用相同数量的文件夹（文件夹深度） - 或

2.  不要使用 / 字符来分隔参数（例如“county_xzy”） - 或

3.  也为您的媒体文件创建 mod_rewrite 规则

例子：

```
RewriteEngine On
RewriteRule .*/(.*?)\.css$ css/$1.css
RewriteRule .*/(.*?)\.js$ js/$1.js
RewriteRule .*/(.*?)\.(jpg|jpeg|png|gif)$ images/$1.$2
RewriteRule ^county/([^/\.]+)/?$ county.php?county_id=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) $1.php 
```

# android - 将 JSON 保存到系统缓存

> ID：10397530
> 
> 赞同：1
> 
> 时间：2012-05-01T12:17:11.840
> 
> 标签：android, json

在我的应用程序中，我得到一个包含信息的 json url。我想将此json保存在手机中，然后使用json是否手机与url相同。如果json要改变，那么你应该重新下载json。

我恢复了我的 json 并读取了我的对象，但我将 json 保存在手机内存中并使用 json 避免再次下载它以保存数据

你能帮我吗？

一个例子：

```
public void affichage_phenomene(final String id_phenomene)
{
    if(id_phenomene.length()==0)
        return;

    mProgressDialog = ProgressDialog.show(this, "Patientez","Chargement...", true);

    new Thread((new Runnable()
    {
        public void run()
        {
            try
            {
                JSONArray jsonArray = Json.getJsonByUrl(page_Json); // On récupère un tableau contenant les éléments json           
                JSONObject jsonObject = jsonArray.getJSONObject(0);
                listItem2 = new ArrayList<HashMap<String, String>>();

                map.put("titre", jsonObject.getString("nom"));
                map.put("description", jsonObject.getString("description"));
                map.put("liens", jsonObject.getString("liens"));
                map.put("note_moyenne", jsonObject.getString("note_moyenne"));
                map.put("img",LoadPicture.loadImageFromWebOperations(getString(R.string.URL_Images)+jsonObject.getString("image"),"/sdcard/MysticWay/phenomene_"+idphenomene+".jpg"));
                JSONArray liste_lieux = jsonObject.getJSONArray("lieux");
                nombre_de_lieux = liste_lieux.length();
                if(nombre_de_lieux>0)
                {

                    for(int i = 0;i<nombre_de_lieux;i++)
                    {
                        map3 = new HashMap<String, String>();
                        JSONObject lieucible = liste_lieux.getJSONObject(i);
                        map3.put("idlieu", lieucible.getString("idlieuxspirituels"));
                        map3.put("nomlieu", lieucible.getString("nom_lieux"));
                        map3.put("adresse", lieucible.getString("adresse_lieux"));
                        map3.put("img", LoadPicture.loadImageFromWebOperations(getString(R.string.URL_Images)+lieucible.getString("image"),"/sdcard/MysticWay/icon_lieu_"+lieucible.getString("idlieuxspirituels")+".jpg"));
                        listItem2.add(map3);
                    }
                }
                handler.sendEmptyMessage(0);
                return;
            }
            catch (Exception e)
            {
                e.printStackTrace();
                handler.sendEmptyMessage(1);
                return;
            }
        }
    })).start();
}

private Handler handler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        if(msg.what == 0)
        {
            // Si le transfert c'est bien exécuté
            mProgressDialog.dismiss();
            Titre.setText(map.get("titre"));
            Description.setText(Html.fromHtml(map.get("description")));
            Lien.setText(map.get("liens"));
            note.setText(map.get("note_moyenne"));
            if(nombre_de_lieux==1)
            {
                View_Fiche_Phenomene.this.liste_lieux.setText(nombre_de_lieux+" lieu est associé à ce phénomène.");
                liste_lieux.setEnabled(true);
            }
            else if (nombre_de_lieux>1)
            {
                View_Fiche_Phenomene.this.liste_lieux.setText(nombre_de_lieux+" lieux sont associés à ce phénomène.");
                liste_lieux.setEnabled(true);
            }

            Intent checkIntent = new Intent();
            checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
            startActivityForResult(checkIntent, 0);
            if (map.get("img") == null)
                Image.setImageResource(R.drawable.noimage);
            else
                Image.setImageDrawable(Drawable.createFromPath(map.get("img")));

            if(Float.parseFloat(map.get("note_moyenne"))== 5)//img 5
                notemoyenne.setImageResource(R.drawable.etoile_5);
            else if (Float.parseFloat(map.get("note_moyenne"))<5 && Float.parseFloat(map.get("note_moyenne")) > 4)//img 4.5
                notemoyenne.setImageResource(R.drawable.etoile_4_5);
            else if (Float.parseFloat(map.get("note_moyenne")) == 4)//img 4
                notemoyenne.setImageResource(R.drawable.etoile_4);
            else if (Float.parseFloat(map.get("note_moyenne"))<4 && Float.parseFloat(map.get("note_moyenne")) > 3)//img 3.5
                notemoyenne.setImageResource(R.drawable.etoile_3_5);
            else if (Float.parseFloat(map.get("note_moyenne")) == 3)//img 3
                notemoyenne.setImageResource(R.drawable.etoile_3);
            else if (Float.parseFloat(map.get("note_moyenne"))<3 && Float.parseFloat(map.get("note_moyenne")) > 2)//img 2.5
                notemoyenne.setImageResource(R.drawable.etoile_2_5);
            else if (Float.parseFloat(map.get("note_moyenne")) == 2)//img 2
                notemoyenne.setImageResource(R.drawable.etoile_2);
            else if (Float.parseFloat(map.get("note_moyenne"))<2 && Float.parseFloat(map.get("note_moyenne")) > 1)//img 1.5
                notemoyenne.setImageResource(R.drawable.etoile_1_5);
            else if (Float.parseFloat(map.get("note_moyenne")) == 1)//img 1
                notemoyenne.setImageResource(R.drawable.etoile_1);
            else if (Float.parseFloat(map.get("note_moyenne"))<1 && Float.parseFloat(map.get("note_moyenne")) > 0)//img 0.5
                notemoyenne.setImageResource(R.drawable.etoile_0_5);
            //sinon img 0
        }
        if(msg.what == 1)
        {
            // Erreur : réseau ou autre
            mProgressDialog.dismiss();
            AlertDialog.Builder adb=new AlertDialog.Builder(mContext);
            adb.setTitle("Erreur");
            adb.setMessage("Impossible de comuniquer avec le serveur!");
            adb.setPositiveButton("Ok", null);
            adb.show();
        }
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:28:14.697

当您下载数据时，我会将数据保存在 Sqlite 数据库中。然后你可以随心所欲地操作它，更新某些行等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:29:28.730

使用 Sqlite 数据库存储结果是一个好主意。至于检查数据是否已更改，有几种方法可以做到 - 您可以在服务器端添加 Last-Modified 标头，其中可以包含结果上次更改的时间。如果 Last-Modified 时间与您上次收到 JSON 请求的时间相同（您可以在 Sqlite DB 中检查），则无需下载请求正文。

如果您不想跟踪时间戳（尽管这是最好的方法），另一种方法是跟踪 MD5 哈希或 SHA1 或任何资源最少的东西。然后，您可以将哈希放在 HTTP 标头中，如果哈希与您存储在 Sqlite 数据库中的内容匹配，则无需下载内容。这仅对将通过网络传输的大量 JSON 数据有用，因为在服务器端进行加密是有成本的（在时间和资源方面）。

# java - Gearman - 计算统计数据

> ID：10397531
> 
> 赞同：1
> 
> 时间：2012-05-01T12:17:15.457
> 
> 标签：java, php, metrics, gearman

我目前正在开发一个使用 Gearman 进行异步数据处理的系统。

我可以连接到 Gearman 服务器以检查当前工人的数量和各种队列的大小，这对于处理是否正在备份等非常有用，但我还想要一些关于吞吐量的统计数据，例如完成的作业总数/在过去 5 分钟/小时/天失败。

目的是将这些存储在数据库中并使用 ExtJS 绘制一些漂亮的图形。

还有其他几种方法我可以做到这一点，例如让工作人员 ping 收集的实例或计算出现的文件数量，但似乎应该有一些简单的方法可以直接从 Gearman 中提取它。

我可能应该提到我没有使用持久队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:19:24.637

The gearmand currently doesn't have any usage-statistics functions.

I need to do the same for our installation (Perl workers and clients, C dispatcher server) and I'll start counting the number ob jobs processed either in the workers (flush-on-exit) or in memcache.

# php - 从表中的字符串中提取值？

> ID：10397533
> 
> 赞同：2
> 
> 时间：2012-05-01T12:17:26.690
> 
> 标签：php, mysql, sql, substring, patindex

我正在尝试从如下表中的字符串中提取一个值，

查询表，

```
query_id    value
1           type={"page":"page"}&parent_id=10&image=on&content=on
2           type={"page":"page"}&parent_id=self
3           type={"category":"contact"} 
```

如您所见， parent_id 在查询中，有时不在。

我想提取 parent_id 所以我得到这个结果，

```
query_id    page_id     value
1           10          type={"page":"page"}&parent_id=10&image=on&content=on
2           self        type={"page":"page"}&parent_id=self
3           null        type={"category":"contact"} 
```

我尝试使用此查询，

```
SELECT 
    *,
    CAST(
        SUBSTRING(
            value,PATINDEX('%parent_id=%', value) + 8,(PATINDEX('%&%', substring(value,PATINDEX('%parent_id=%', value),50)) - 9)
            ) AS INT
        ) AS page_id
FROM query 
```

但是我收到此错误，

```
1064 - You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use
near 'INT ) AS page_id FROM query LIMIT 0, 30' at line 6 
```

**编辑：**

也许我**不**应该使用`PATINDEX`下面的查询测试它，

```
SELECT 
    *,
    SUBSTRING(
            value,PATINDEX('%parent_id=%', value) + 8,(PATINDEX('%&%', substring(value,PATINDEX('%parent_id=%', value),50)) - 9)
            ) AS test
FROM query 
```

我得到这个错误，

```
#1305 - FUNCTION mydb.PATINDEX does not exist 
```

**编辑：**

得到了我的答案，

```
SELECT 
    *,
    IF(LOCATE('parent_id=', value)>0,SUBSTRING_INDEX(SUBSTRING(value,LOCATE('parent_id=', value) + 10),'&',1),null)AS page_id
FROM query 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:21:33.363

INT 已经在 MYSQL 中使用。使用正确的语法

```
SELECT 
    *,
    CAST(
        SUBSTRING(
            `value`,PATINDEX('%parent_id=%', `value`) + 8,(PATINDEX('%&%', substring(`value`,PATINDEX('%parent_id=%', `value`),50)) - 9)
            ) AS `INT`
        ) AS `page_id`
FROM `query` 
```

# php - iOS 和 PHP (Web) 服务之间的通信问题

> ID：10397536
> 
> 赞同：1
> 
> 时间：2012-05-01T12:17:47.893
> 
> 标签：php, ios, notifications, push-notification

好的，所以我想创建一个与 WEB 服务通信的 iPhone 应用程序。但是有两点我不清楚。

1.  当用户在应用程序中按下按钮时，它会通知 Web 服务该操作，并且 Web 服务会向相应的用户发送推送通知。由于没有。必须向其发送通知的用户可能很大，我正在考虑向 iPhone 应用程序发送响应（OK/Error），然后继续发送通知。换句话说，PHP 脚本应该接受请求，响应它并在响应后继续发送通知，这样 iPhone 应用程序就不必等待服务。

2.  该服务将需要向大量用户发送推送通知。我正在用 PHP 编写 Web 服务。那么有没有比 PHP 更有效的替代方案呢？或者这是实现服务的最佳方式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:40:56.803

那么对于＃1，你可以做这样的事情......

在您的手机应用程序中有一个方法，例如：

```
- (void) send_to_server {
    NSString *urlString = [NSString stringWithFormat:@"http://weburl.com/?variable=%@", variable];

    NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (theConnection) {
        receivedData = [NSMutableData data];

        if ([[NSString stringWithFormat:@"%@", receivedData] isEqualToString:@"Success"]){
            //Do something here
        }else{
            //Do something else here
        }
    }
} 
```

在您的 PHP 中，您可以执行以下操作：

```
<?php
$variable = $_GET['variable'];
//do what you need to do here...
//Put things into queue or what-not
if ($success){
    echo "Success";
}else{
    echo "Failure";
}
?> 
```

**更新**

```
<?php
if (isset($_GET['variable']){
    echo "Success";
    $variable = $_GET['variable'];
    //do what you need to do here...
}else{
    echo "Failure";
}
?> 
```

至于向其他手机发送推送通知，我不知道该怎么做。但我认为 PHP 在效率方面没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:31:50.237

1.  听起来是个聪明的主意。要么发送响应并在同一线程中继续处理通知，要么排队作业以在服务器上执行通知。

2.  有很多人争论不同语言执行 Web 服务的优点。如果您对 PHP 最满意并且对性能的要求不是很大，那可能是您的最佳选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:29:55.250

我假设关键问题是您希望立即响应用户，然后执行其他工作，例如异步发送通知。

我建议使用某种队列系统，例如 Gearman（尽管有很多替代品，例如 Rabbit）。您可以让您的界面将作业放入 Gearman 队列，然后编写一个 Gearman Worker 从队列中获取通知任务

您可以在 PHP 中完成此类工作，但如果您这样做了，那么您可能需要使用 Gearman Manager PHP 库，因为 PHP 不是长时间运行进程的最佳语言。Gearman Manager 会为您启动和停止脚本，让您更轻松地用 PHP 编写 worker。

[http://gearman.org/?id=gearman_php_extension](http://gearman.org/?id=gearman_php_extension) https://github.com/brianlmoon/GearmanManager

# django-grappelli - django 管理工具和 grappelli 在一起

> ID：10397538
> 
> 赞同：6
> 
> 时间：2012-05-01T12:17:52.603
> 
> 标签：django-grappelli, django-admin-tools

**django grappeli 和 django 管理工具菜单可以一起运行吗？**

我都安装了，但只看到 grappeli 或管理工具（取决于 INSTALLED_APPS 中的顺序）。

我发现旧的来源说 django 管理工具和 grappelli 一起工作[http://code.google.com/p/django-grappelli-admin-tools/](http://code.google.com/p/django-grappelli-admin-tools/)，但给定的文档没有帮助。

# excel - 如何在 Excel VBA 中使用不同选项保护工作表？

> ID：10397540
> 
> 赞同：0
> 
> 时间：2012-05-01T12:18:07.767
> 
> 标签：excel, vba, runtime

我正在尝试在 VBA 的 Excel 工作簿中保护工作表（仅可见）。我想允许用户在“表 2”和“表 3”上编辑对象，但不能在其他对象上编辑。

这是我正在使用的代码。

```
Public Sub WBOpen()
  Dim sh As Worksheet
  Dim allowObjects As Boolean
  For Each sh In Sheets
    If sh.Visible = xlSheetVisible Then
      **If sh.Name = "Sheet 2" Or "Sheet 3" Then**
        allowObjects = True
      Else
        allowObjects = False
      End If
      sh.Protect Password:=pw(sh), DrawingObjects:=allowObjects, Contents:=True, Scenarios:=True, AllowFormattingRows:=True, AllowFiltering:=True, UserInterfaceOnly:=True
    End If
  Next
End Sub 
```

我在用 ** 包裹的行上遇到类型不匹配错误。谁能告诉我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:02:50.713

不知道为什么在@Randy 指出的错误被修复后它仍然会出现错误，但我可以告诉你我在做什么。我没有遍历每张工作表，而是直接访问要保护的工作表。这是通过*代码*名称完成的，而不是 GUI 中的名称。例如，在 VBA 编辑器的 Project Explorer 中，在“Microsoft Excel Objects”文件夹下，单击“Testing”工作表并看到它具有“TestingSheet”的“(Name)”属性。请注意，为清楚起见，这可能只是一个可选步骤，因为我的其他工作表也有名称 - 例如“Sheet1”。然后在代码中我只需键入：

```
TestingSheet.Protect , True, True, True, True 
```

如果这样做，您将避免运行时错误，并且在工作表的 GUI 名称方面也将更加灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:03:16.067

那行应该是：

```
If sh.Name = "Sheet 2" Or sh.Name = "Sheet 3" Then 
```

出现类型不匹配错误是因为您将字符串 ( `"Sheet 3"`) 视为布尔值 ( `True`/ `False`)。

# asp.net - 从命令行在 IIS 中配置 SMTP

> ID：10397543
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:18:31.930
> 
> 标签：asp.net, msdeploy

我对.NET 比较陌生。我想知道是否有办法从命令行在 IIS 5.1 中配置 SMTP。我知道有一个名为 Aapcmd.exe 的工具，但由于它仅适用于
IIS 7 或更高版本，因此我无法使用它。但是我在我的系统上的 C:\Inetpub\AdminScripts 中遇到了一些脚本（显然用于 IIS 管理）......但是不能将它们用于 SMTP 配置。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:15:30.390

在 iis.net 上，您可以找到一个名为“IIS 5/6 的配置和脚本”的[论坛，其中一个](http://forums.iis.net/1034.aspx)[主题](http://ttp://forums.iis.net/p/1172938/1961008.aspx#1961008)是“重新：通过命令行配置 SMTP 虚拟服务器”。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:34:47.700

谢谢 Joola ......原来我们可以使用 adsutil.vbs 配置 SMTP 参数，它通常在 C:\Inetpub\AdminScripts 或任何你的“Inetpub”文件夹中可用......我需要在默认 SMTP 设置中更改以下参数：

```
 Connection Time Out for SMTP
 Windows Integrated Authentication
 Anonymous Authentication set False. 
```

您可以使用 adsutil.vbs 来更改这些，如下所述。

```
 Cscript adsutil.vbs set /smtpsvc/1/AuthAnonymous false
 Cscript adsutil.vbs set /smtpsvc/1/authntlm true
 Cscript adsutil.vbs set /smtpsvc/1/ConnectionTimeout 1200 
```

请注意，除了 set one 之外，还可以使用 get 选项查看当前值...

# c++ - 内存分配 - 正确使用删除

> ID：10397544
> 
> 赞同：1
> 
> 时间：2012-05-01T12:18:37.013
> 
> 标签：c++, memory, new-operator, allocation, delete-operator

我所有的程序都因为 , , 而崩溃`delete [] meanings;`，`delete [] meanings;`当`delete [] temp_meaning;`我删除这 3 行时它工作正常，所以可能我错误地使用了 delete ... 有人可以在这里启发我吗？

```
#include <iostream>
#include <string>
#include <cstring>
using namespace std;

class Expression {

    char *word_with_several_meanings; // like "bank", "class"
    char **meanings; // a pointer to a pointer stores all meanings
    int meanings_ctr; // meanings counter

    //-----------FUNCTIONS------------------------------------------------
public:
    void word(const char* = NULL );
    void add_meaning(char * = NULL);
    char* get_word();
    int get_total_number_of_meanings();
    char* get_meaning(int meanx = 0);
    Expression(int mctr = 0); // CTOR
    ~Expression(); // DTOR
};

Expression::Expression(int mctr ) {
    meanings_ctr = mctr;    // Setting the counter to 0
    meanings = new char * [meanings_ctr]; // Allocate Space for meanings
}

Expression::~Expression() {

    while(meanings_ctr-->0){
    delete meanings[meanings_ctr];
    }
    delete [] meanings; // Deleting the memory we allocated
    delete [] word_with_several_meanings; // Deleting the memory we allocated
}

void Expression::word(const char *p2c )
{

    word_with_several_meanings = new char[strlen(p2c)+1];
    // copy the string, DEEP copy
    strcpy(word_with_several_meanings, p2c);
}

void Expression::add_meaning( char  * p2c)
{

    //meanings[ meanings_ctr ] = new char [strlen(p2c) + 1];
    //strcpy(meanings[ meanings_ctr++ ] , p2c);
    // temp 
    if (meanings_ctr < 1){
    meanings[ meanings_ctr ] = new char [strlen(p2c) + 1];
    strcpy(meanings[ meanings_ctr++ ] , p2c);
    }
    else {
int temp_ctr;
    char **temp_meaning;
    temp_meaning = new char * [meanings_ctr-1];
    for(temp_ctr =0; temp_ctr<meanings_ctr;temp_ctr++){
        temp_meaning[temp_ctr] = new char [strlen(meanings[ temp_ctr ]) + 1];
            strcpy(temp_meaning[temp_ctr], meanings[ temp_ctr ]);
    }
    for (temp_ctr =0; temp_ctr<meanings_ctr;temp_ctr++){
            delete meanings[temp_ctr];

    }
    delete [] meanings;

    meanings = new char * [meanings_ctr];
    for(temp_ctr =0; temp_ctr<meanings_ctr;temp_ctr++){
        meanings[ temp_ctr ] = new char [strlen(temp_meaning[temp_ctr]) + 1];
            strcpy(meanings[ temp_ctr ], temp_meaning[temp_ctr]);
    }
    meanings[ meanings_ctr ] = new char [strlen(p2c) + 1];
    strcpy(meanings[ meanings_ctr ] , p2c);
            for (temp_ctr =0; temp_ctr<meanings_ctr;temp_ctr++){
            delete temp_meaning[temp_ctr];
    }
    delete [] temp_meaning;
            meanings_ctr++;
    }

}

char * Expression::get_meaning( int meanx )
{

    return *(meanings+meanx);

}

char * Expression::get_word()
{

    return word_with_several_meanings;

}

int Expression::get_total_number_of_meanings()
{
    return meanings_ctr;
}

int main(void) {
    int i;
    Expression expr;
    expr.word("bank");
    expr.add_meaning("a place to get money from");
    expr.add_meaning("b place to sit");
    expr.add_meaning("4 letter word");
    expr.add_meaning("Test meaning");
    cout << expr.get_word() << endl;

    for(int i = 0; i<expr.get_total_number_of_meanings(); i++)
            cout << " " << expr.get_meaning(i)  << endl;
    Expression expr2;
    expr2.word("class");
    expr2.add_meaning("a school class");
    expr2.add_meaning("a classification for a hotel");
    expr2.add_meaning("Starts with C");
    cout << expr2.get_word() << endl;
    for( i = 0; i<expr2.get_total_number_of_meanings(); i++)
            cout << " " << expr2.get_meaning(i) << endl;

    Expression expr3;
    expr3.word("A very long test");
    char str[] = "Meaning_    ";
    for(int kx =0; kx<31; kx++){
            str[8] = ('A'+kx);
            expr3.add_meaning(str);
    }

    cout << expr3.get_word() << endl;
    for( int i = 0; i<expr3.get_total_number_of_meanings(); i++)
            cout << " " << expr3.get_meaning(i) << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:05:35.677

该程序显示出来自以下语句的内存损坏迹象：

```
 meanings_ctr = mctr;    // Setting the counter to 0
    meanings = new char * [meanings_ctr]; // Allocate Space for meanings 
```

和

```
 meanings = new char * [meanings_ctr]; 
```

由于 add_meaning() 包含以下代码：

```
if (meanings_ctr < 1){
   meanings[ meanings_ctr ] = new char [strlen(p2c) + 1]; 
```

您实际上是在含义 [0] 上写的，而您为它分配了 0 个字节。由于 C 中的索引从 0 开始，对于具有最高索引的数组，`max_index`您需要分配`max_index+1`元素。对于一个数组，`max_index = 0`您需要分配 1 个元素。

换句话说，您需要分配`meanings = new char * [meanings_ctr + 1]`而不是`new char * [meanings_ctr]`，而`temp_meaning = new char * [meanings_ctr]`不是`new char * [meanings_ctr - 1]`。

至于使用`delete`和`delete[]`一般规则是分配的`new`应该被释放，`delete`分配的`new[]`应该被销毁`delete[]`。上面有一个线程：[delete vs delete[] operator in C++](https://stackoverflow.com/questions/2425728/delete-vs-delete-operators-in-c)。[在delete how dos know it is an array](https://stackoverflow.com/questions/703691/how-does-delete-know-its-an-array-c)的答案中可以找到一些好的背景。

以下是如何在不使用任何昂贵的工具或难以学习的工具的情况下调试程序。

如果您将调试打印添加到构造函数和析构函数中，如下所示：

```
Expression::Expression(int mctr ) {
    meanings_ctr = mctr;    // Setting the counter to 0
    meanings = new char * [meanings_ctr]; // Allocate Space for meanings
    cout << "[debug] allocated " << sizeof(char*)*meanings_ctr << " bytes @" << 
             hex << meanings << dec << endl;
} 
```

和

```
Expression::~Expression() {
    while(meanings_ctr-- > 0){
//       if(meanings[meanings_ctr]) delete [] (meanings[meanings_ctr]);
    }
    cout << "[debug] to deallocate @" << hex << meanings << dec << endl;
//   delete [] meanings; // Deleting the memory we allocated
//    delete [] word_with_several_meanings; // Deleting the memory we allocated
} 
```

同样在 add_meaning() 中，你得到

```
[debug] allocated 0 bytes @0x804c008
[debug] to deallocate @0x804c008
[debug] allocated 4 bytes @0x804c078
 ...
[debug] allocated 120 bytes @0x804fa78
[debug] to deallocate @0x804fa78
[debug] to deallocate @0x804c260
[debug] to deallocate @0x804c150 
```

这里看起来令人担忧的是`allocated 0 bytes`。由于 add_meanings() 中的代码包含：

```
if (meanings_ctr < 1){
meanings[ meanings_ctr ] = new char [strlen(p2c) + 1]; 
```

它使用未分配的内存 @`meanings[0]`并导致损坏。

以下是所有累积的更改以供参考：

```
25c25
<     meanings = new char * [meanings_ctr]; // Allocate Space for meanings
---
>     meanings = new char * [meanings_ctr + 1]; // Allocate Space for meanings
30,31c30,31
<     while(meanings_ctr-->0){
<     delete meanings[meanings_ctr];
---
>     while(meanings_ctr-- > 0){
>         delete [] meanings[meanings_ctr];
58c58
<     temp_meaning = new char * [meanings_ctr-1];
---
>     temp_meaning = new char * [meanings_ctr ];
64c64
<             delete meanings[temp_ctr];
---
>          delete [] meanings[temp_ctr];
69c69
<     meanings = new char * [meanings_ctr];
---
>     meanings = new char * [meanings_ctr + 1];
76,77c76,77
<             for (temp_ctr =0; temp_ctr<meanings_ctr;temp_ctr++){
<             delete temp_meaning[temp_ctr];
---
>     for (temp_ctr =0; temp_ctr<meanings_ctr;temp_ctr++){
>            delete [] temp_meaning[temp_ctr]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T12:27:58.037

你必须来自 C 世界，你不会`char*`在 C++ 程序中找到任何存储单词的东西......你应该看看[std::string](http://www.cplusplus.com/reference/string/string/)，它会启发你的一天，我可以向你保证。

顺便说一句，在 C++ 中，我们倾向于摆脱所有这些`delete`，并且`delete []`，您也许应该选择一本好的 C++ 书籍并学习正确的 C++，而不是 30 年前使用的带有类的 C。

# iphone - 使用情节提要时将自定义类分配给 UIWindow

> ID：10397548
> 
> 赞同：1
> 
> 时间：2012-05-01T12:19:00.850
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uistoryboard

在非故事板项目中，我可以简单地在界面生成器中选择窗口并将其类从 UIWindow 更改为 MyUIWindow。我应该如何在故事板项目中做到这一点？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:24:51.570

在 AppDelegate 中，您有：`@property (strong, nonatomic) UIWindow *window;` 因此，如果您确实在过去休息但没有使用情节提要，那么从那里应该没问题。

# bash - sed/awk 如何添加到匹配的字符串

> ID：10397553
> 
> 赞同：1
> 
> 时间：2012-05-01T12:20:07.513
> 
> 标签：bash, sed, awk

我有一个文本文件，其中包含如下所述的行

```
<property>PASSWORD_X_1</property>
<property>PASSWORD_A_2</property>
<property>PASSWORD_B_6</property> 
```

等等等等..

现在我希望将这些行更改为：

```
<property>{PASSWORD_X_1}</property>
<property>{PASSWORD_A_2}</property>
<property>{PASSWORD_B_6}</property> 
```

我可以使用简单的 sed 表达式更改初始的“{”：

```
sed -e '/PASSWORD/{PASSWORD/g' 
```

无法弄清楚如何附加“}”字符。

有什么建议么..？

Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:29:39.590

`sed -e 's/PASSWORD_[A-Z]_[0-9]/{&}/'`

易于修改！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:32:44.480

这应该有效：

`awk -F"<|>" '{ print "<" $2 ">{" $3 "}<" $4 ">" }' file.text`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:02:37.333

这可能对您有用：

```
sed 's/PASSWORD[^<]*/{&}/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T17:30:38.613

```
awk '{sub(">P",">{P") sub("</","}</");}1' file 
```

# asp.net-mvc - T4MVC 和 Html.BeginForm

> ID：10397561
> 
> 赞同：2
> 
> 时间：2012-05-01T12:20:50.937
> 
> 标签：asp.net-mvc, asp.net-mvc-3, t4mvc

我有行动方法

```
[HttpPost]
        public virtual ActionResult Search(string searchTerm)
... 
```

和形式

```
@using (Html.BeginForm(MVC.Products.Search(), FormMethod.Post))
        {
            <input id="searchBox" name="searchTerm" type="text" />
            <input type="submit" value="Search" />
        } 
```

但这不起作用，Search() 需要 searchTerm 参数，我不知道如何传递它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:23:12.723

你可以传递空值：

```
@using (Html.BeginForm(MVC.Products.Search(null), FormMethod.Post)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T00:24:21.713

检查您的 T4MVC ProductsController.generated.cs 文件以获取采用零参数的 Search() 方法。听起来你在那里找不到它，但正如上面 David Ebbo 所发布的，它应该在大多数情况下生成。考虑到您在此处粘贴的方法被修饰为虚拟，这尤其奇怪，这可能发生在之前被 T4MVC 标记的某个时间点。

因此，要修复它，您可以尝试删除 *.generated.cs 文件并重新生成它们，方法是右键单击 VS IDE 中的 T4MVC 文件并选择“运行自定义工具”。

如果零参数方法仍未生成，但其他方法已生成，请检查您的 Search 方法可能有哪些异常。您可能正在做一些 T4MVC 不支持的事情。今天发生在我身上的一个返回字符串的方法。根据在 MVC 中，我必须使用 null 参数 hack 或返回 ContentResult，[如何返回字符串结果？](https://stackoverflow.com/questions/553936/in-mvc-how-do-i-return-a-string-result)，David 在[T4MVC 和带有参数的 Ajax 方法中](https://stackoverflow.com/questions/10463773/t4mvc-and-ajax-method-with-parameter)友好地引用了它。

# c++ - 使用原始内存地址查找指针/类

> ID：10397563
> 
> 赞同：0
> 
> 时间：2012-05-01T12:21:02.053
> 
> 标签：c++, air-native-extension

在我问我的问题之前，我想说我意识到有一些“类似”的问题，但没有（我能找到）专门回答我的问题，所以就这样吧。

我想知道以下是否可能。假设我创建了`new`一个类的实例，如下所示：

```
MyClass* classInstance = new MyClass(); 
```

我想知道是否可以将原始内存地址存储在像 int 这样的原始类型中。然后，在 C++ no-mans-land 的某个地方，我没有指向 的指针`classInstance`，我可以执行以下操作：

```
MyClass* myClassInstanceSomewhereInMemory = (MyClass*)0x12345678;
myClassInstanceSomewhereInMemory->workPlzKThx(); //Yay, it works! 
```

如果有可能，是否有任何风险？这样的事情是否有任何重大的开销成本？我意识到这个非常糟糕的设计，但不幸的是我在[这里受到第三方](http://www.adobe.com/)的摆布。所以请不要为此责备我，但请随意[责备他们](http://www.adobe.com/devnet/air/native-extensions-for-air.html)。:)

**对这种疯狂的解释**
所以只是为了进一步解释*为什么*我必须做这样愚蠢的事情。我正在将 box2D 移植到 AIR 本机扩展，正如我之前提到的，我受制于 AIR 运行时。它处理本机端和 Actionscript 端之间关联的方式是......搞砸了，而且还有很多荒谬的规则来进行这种关联。

一个这样的规则对于像这样的情况来说是一个真正的问题`b2World->createBody()`，它返回一个指向一个`b2Body`类型（它有一个私有构造函数）的指针。在此关联期间，我无法同时创建一个上下文以将新`b2Body`指针与其关联，因为在此调用期间，我被困在`b2World`. `b2World`因此，与其在and之类的类中将一堆肮脏的 hack 一起拍打`b2Body`，我想知道我是否可以只使用像 int 这样的原始类型来存储和返回 new 的内存地址`b2Body`。

我无法将从 C++ 键入的指针或结构返回到 Actionscript 端。我只能与上下文相关联......但我可以返回原始类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:36:12.193

到目前为止，最简单的解决方案是`std::map<unsigned int, MyClass*>`. 几乎唯一的缺点是在`UINT_MAX`分配之后你必须去寻找可重用的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:55:12.383

您是否想过标记这个“AIR Native Extension”以及 C++？需要注意的是，我既不知道 box2d 也不知道 AIR Native Extension，这让我感到震惊，您可能正在尝试做其他人以前尝试过的事情，并且可能是 Adob​​e 不希望您做的事情——可能有充分的理由。例如：

> 我无法将从 C++ 键入的指针或结构返回到 Actionscript 端。我只能与上下文关联......但我可以返回原始类型

您实际上可以在 Actionscript 中使用指针，还是只是将其保留为原始类型，以便可以将其传递回接口？

也许在这种情况下，您可以将指针存储在像地图这样的关联集合中，并将键作为*句柄*返回。当您将句柄传回时，C++ 端可以查找指针并根据上下文进行适当的转换。这样，您永远不会通过接口本身传递指针，因此您不会受到任何与指针相关的问题的影响。

抱歉，如果您已经在考虑这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:42:29.987

许多第三方 api 会强迫你使用这种类型的模式来传递数据。您将遇到的唯一问题是，如果您像建议的那样使用 int 的原始类型，那么如果您曾经为 64 位平台编译，那么此代码将不可移植，因为原始类型 int 不会保存可用的最大地址在 64 位平台上。您可以使用内置类型 int_ptr，当编译为 32 位平台时为 32 位，而为 64 位平台编译时为 64 位以避免此问题，或者您可以使用 void* 作为原始类型，如 win32 CreateThread 函数或 pthread_create 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T12:44:07.277

要转换的适当值是`intptr_t`or `uintptr_t`，但我不认为 Adob​​e 有这些......

因此，将 C++ 可移植性放在一边，只是为了实用，如果您在 32 位架构中，那么 an`unsigned int`应该没问题，而在 64 位中， an`unsigned long`是一个足够长的整数来保存指针的值。这`unsigned`部分只是为了安全起见，但你也应该能够在没有它的情况下玩。

您必须注意的主要事项是从整数类型转换为整数类型的指针类型必须相同。也就是说，以下是未定义的行为：

```
class  A {  };
class B : public A {};

B b;
A *pa = &b;
unsigned x = reinterpret_cast<unsigned>(&a);
B *pb = reinterpret_cast<B*>(x); //UB! 
```

最后一行应该是：

```
A *pb = reinterpret_cast<A*>(x); 
```

要不然：

```
B *pb = static_cast<B*>(reinterpret_cast<A*>(x)); 
```

# r - 从频率表中高效计算均值和标准差

> ID：10397574
> 
> 赞同：9
> 
> 时间：2012-05-01T12:22:00.320
> 
> 标签：r, statistics, mean

假设我有以下频率表。

```
> print(dat)
V1    V2
1  1 11613
2  2  6517
3  3  2442
4  4   687
5  5   159
6  6    29

# V1 = Score
# V2 = Frequency 
```

如何有效地计算平均值和标准差？产率：SD=0.87 MEAN=1.66。按频率复制分数需要很长时间来计算。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T12:50:39.450

我可能遗漏了一些东西，但这似乎工作得很快，甚至在频率列中替换了数百万：

```
dset <- data.frame(V1=1:6,V2=c(11613,6517,2442,687,159,29))
mean(rep(dset$V1,dset$V2))
#[1] 1.664102
sd(rep(dset$V1,dset$V2))
#[1] 0.8712242 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T12:52:31.337

平均很容易。SD有点棘手（不能再次使用 fastmean() 因为分母中有一个 n-1 。

```
> dat <- data.frame(freq=seq(6),value=runif(6)*100)
> fastmean <- function(dat) {
+   with(dat, sum(freq*value)/sum(freq) )
+ }
> fastmean(dat)
[1] 55.78302
> 
> fastRMSE <- function(dat) {
+   mu <- fastmean(dat)
+   with(dat, sqrt(sum(freq*(value-mu)^2)/(sum(freq)-1) ) )
+ }
> fastRMSE(dat)
[1] 34.9316
> 
> # To test
> expanded <- with(dat, rep(value,freq) )
> mean(expanded)
[1] 55.78302
> sd(expanded)
[1] 34.9316 
```

注意`fastRMSE`计算`sum(freq)`两次。消除这一点可能会导致另一个较小的速度提升。

**基准测试**

```
> microbenchmark(
+   fastmean(dat),
+   mean( with(dat, rep(value,freq) ) )
+   )
Unit: microseconds
                               expr    min      lq median     uq    max
1                     fastmean(dat) 12.433 13.5335 14.776 15.398 23.921
2 mean(with(dat, rep(value, freq))) 21.225 22.3990 22.714 23.406 86.434
> dat <- data.frame(freq=seq(60),value=runif(60)*100)
> 
> dat <- data.frame(freq=seq(60),value=runif(60)*100)
> microbenchmark(
+   fastmean(dat),
+   mean( with(dat, rep(value,freq) ) )
+   )
Unit: microseconds
                               expr    min     lq  median      uq     max
1                     fastmean(dat) 13.177 14.544 15.8860 17.2905  54.983
2 mean(with(dat, rep(value, freq))) 42.610 48.659 49.8615 50.6385 151.053
> dat <- data.frame(freq=seq(600),value=runif(600)*100)
> microbenchmark(
+   fastmean(dat),
+   mean( with(dat, rep(value,freq) ) )
+   )
Unit: microseconds
                               expr      min       lq    median       uq       max
1                     fastmean(dat)   15.706   17.489   25.8825   29.615    79.113
2 mean(with(dat, rep(value, freq))) 1827.146 2283.551 2534.7210 2884.933 26196.923 
```

复制解决方案的条目数似乎是 O( N^2 ) *。*

![复制解决方案](../Images/a185bcec6fe7cdaa9c6ebe9d1bbdd9d4.png)

该`fastmean`解决方案似乎有 12 毫秒左右的固定成本，之后它可以很好地扩展。

**更多基准测试**

```
Comparison with dot product.

dat <- data.frame(freq=seq(600),value=runif(600)*100)
dbaupp <- function(dat) {
  total.count <- sum(dat$freq)
  as.vector(dat$freq %*% dat$value) / total.count
}
microbenchmark(
  fastmean(dat),
  mean( with(dat, rep(value,freq) ) ),
  dbaupp(dat)
)

Unit: microseconds
                               expr     min       lq   median       uq       max
1                       dbaupp(dat)  20.162  21.6875  25.6010  31.3475   104.054
2                     fastmean(dat)  14.680  16.7885  20.7490  25.1765    94.423
3 mean(with(dat, rep(value, freq))) 489.434 503.6310 514.3525 583.2790 30130.302 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-01T12:55:38.603

怎么样：

```
> m = sum(dat$V1 * dat$V2) / sum(dat$V2)
> m
[1] 1.664102
> sigma = sqrt(sum((dat$V1 - m)**2 * dat$V2) / (sum(dat$V2)-1))
> sigma
[1] 0.8712242 
```

这里没有复制。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-01T13:04:43.530

以下代码不使用复制，并且尽可能多地使用 R 内置函数（尤其是对于点积），因此它可能比使用`sum(V1 * V2)`. （编辑：这可能是错误的：@gsk3 的解决方案似乎比我的测试快 1.5 - 2 倍。）

## 意思是

均值（或期望）的定义是“分数”`sum(n * freq(n)) / total.count`在哪里，是（只是）的频率。分子中的和恰好是分数与频率的[点积](https://en.wikipedia.org/wiki/Dot_product)。`n``freq(n)``n``total.count``sum(freq(n))`

R 中的点积是`%*%`（它返回一个矩阵，但对于大多数目的，这基本上可以在向量中处理）：

```
> total.count <- sum(dat$V2)
> mean <- dat$V1 %*% dat$V2 / total.count
> mean
         [,1]
[1,] 1.664102 
```

## 标清

[维基百科文章这部分的末尾](https://en.wikipedia.org/wiki/Standard_deviation#Generalizing_from_two_numbers)有一个公式，翻译成以下代码

```
> sqrt(dat$V1^2 %*% dat$V2 / total.count - mean^2)
          [,1]
[1,] 0.8712039 
```

# c++ - omn iORB C++ 服务器，运行应用程序的 Java 客户端问题

> ID：10397580
> 
> 赞同：1
> 
> 时间：2012-05-01T12:23:37.763
> 
> 标签：c++, java, corba, omniorb

我在运行我的应用程序时遇到问题。我有一个服务器：

```
#include "Hello_impl.h"
#include <iostream>
#include <omniORB4/CORBA.h>
#include <omniORB4/Naming.hh>

using namespace std;

int main(int argc, char ** argv)
{
try {
// init ORB
CORBA::ORB_ptr orb = CORBA::ORB_init(argc, argv);

// init POA
CORBA::Object_var poa_obj = orb->resolve_initial_references("RootPOA");
PortableServer::POA_var poa = PortableServer::POA::_narrow(poa_obj);
PortableServer::POAManager_var manager = poa->the_POAManager();

// create service
Hello_impl * service = new Hello_impl;

// register within the naming service
try {
CORBA::Object_var ns_obj = orb->resolve_initial_references("NameService");
if (!CORBA::is_nil(ns_obj)) {
CosNaming::NamingContext_ptr nc = CosNaming::NamingContext::_narrow(ns_obj);
CosNaming::Name name;
name.length(1);
name[0].id = CORBA::string_dup("TestServer");
name[0].kind = CORBA::string_dup("");
nc->rebind(name, service->_this());
cout << "Server is running ..." << endl;
}
} catch (CosNaming::NamingContext::NotFound &) {
cerr << "not found" << endl;
} catch (CosNaming::NamingContext::InvalidName &) {
cerr << "invalid name" << endl;
} catch (CosNaming::NamingContext::CannotProceed &) {
cerr << "cannot proceed" << endl;
}

// run
manager->activate();
orb->run();

// clean up
delete service;

// quit
orb->destroy();
} catch (CORBA::UNKNOWN) {
cerr << "unknown exception" << endl;
} catch (CORBA::SystemException &) {
cerr << "system exception" << endl;
}
} 
```

和一个客户：

```
import java.util.*;

public class client {
public static void main(String [] args) {
org.omg.CORBA.ORB orb = org.omg.CORBA.ORB.init(args, null);
if (orb == null) System.exit(-1);
try {
// obtain service from naming server
org.omg.CORBA.Object ns_obj = orb.resolve_initial_references("NameService");
org.omg.CosNaming.NamingContext nc
= org.omg.CosNaming.NamingContextHelper.narrow(ns_obj);
org.omg.CosNaming.NameComponent [] path
= { new org.omg.CosNaming.NameComponent("TestServer", "") };
org.omg.CORBA.Object obj = nc.resolve(path);
Hello hello = HelloHelper.narrow(obj);

// use service
String server = hello.say_hello("Hello, omniORB C++ server, it's Java client");
System.out.println("Answer from server: " + server);

// destroy
orb.destroy();
} catch (org.omg.CORBA.ORBPackage.InvalidName exception) {
exception.printStackTrace(System.out);
} catch (org.omg.CosNaming.NamingContextPackage.NotFound exception) {
exception.printStackTrace(System.out);
} catch (org.omg.CosNaming.NamingContextPackage.CannotProceed exception) {
exception.printStackTrace(System.out);
} catch (org.omg.CosNaming.NamingContextPackage.InvalidName exception) {
exception.printStackTrace(System.out);
} catch (org.omg.CORBA.COMM_FAILURE exception) {
exception.printStackTrace(System.out);
} catch (Exception exception) {
exception.printStackTrace(System.out);
}
}
} 
```

我像这样开始omniNames：

```
omniNames -start 6666 -logdir /home/mazix/Desktop/example/logs -errlog /home/mazix/Desktop/example/logs/omniNamesError.txt 
```

然后，我启动我的服务器，如下所示：

```
./server -ORBInitRef NameService=IOR: .... (and here is my IOR num) 
```

我启动客户端（在同一台计算机上）：像这样：

```
java client -ORBInitRef NameService=corbaloc::localhost:6666/NameService 
```

它的工作，但我想（需要）像这样启动我的服务器：

```
./server NameService=corbaname::localhost:6666 
```

和客户端：

```
java client -ORBInitialHost localhost -ORBInitialPort 6666 
```

但是当我这样启动它时它不起作用：/

有什么帮助吗？:(

这是我的omniORB配置文件：[http ://www.2shared.com/document/dBAhFGLh/omniORB4cfg.html](http://www.2shared.com/document/dBAhFGLh/omniORB4cfg.html)

除此之外，当服务器在我的计算机上，而客户端在我学校的计算机上时，我遇到了麻烦。他们“看不到”对方:(

* * *

好的，我知道：我没有启动omniNames，但是在我启动omniNames 之前，端口2809 上有东西在监听，我检查了它，它是：http: [//i47.tinypic.com/2d2ha9u.png](http://i47.tinypic.com/2d2ha9u.png)

我认为没关系，我不需要通过输入终端“omniNames”来运行omniNames，但没有这样做

我只是想像你说的那样运行我的服务器：http: [//i46.tinypic.com/2q2e33c.png](http://i46.tinypic.com/2q2e33c.png)

* * *

我试过这个：

1.  运行我的omniNames：omniNames -start 6666
2.  运行我的服务器：./server -ORBInitRef NameService=corbaloc::localhost:6666/NameService -ORBtraceLevel 40

得到了这个：

```
mazix@computer:~/Desktop/example/cpp$ ./server -ORBInitRef NameService=corbaloc::localhost:6666/NameServie -ORBtraceLevel 40
omniORB: Read from configuration file "/etc/omniORB.cfg".
omniORB: Version: 4.1.2
omniORB: Distribution date: Thu Feb 14 14:19:08 GMT 2008 dgrisby
omniORB: My addresses are: 
omniORB: 127.0.0.1
omniORB: 10.0.2.15
omniORB: ::1
omniORB: Maximum supported GIOP version is 1.2
omniORB: Native char code sets: ISO-8859-1 UTF-8.
omniORB: Transmission char code sets: ISO-8859-1(1.2) ISO-8859-1(1.1) ISO-8859-1(1.0) UTF-8(1.2) UTF-8(1.1).
omniORB: Native wide char code sets: UTF-16.
omniORB: Transmission wide char code sets: UTF-16(1.2).
omniORB: Information: the omniDynamic library is not linked.
omniORB: Creating ref to remote: key<INIT>
 target id      : omg.org/CORBA/InitialReferences:1.0
 most derived id: omg.org/CORBA/InitialReferences:1.0
omniORB: Current configuration is as follows:
omniORB:   DefaultInitRef (file) = corbaloc::localhost:6666/NameService
omniORB:   DefaultInitRef (args) = 
omniORB:   InitRef = NameService=corbaloc::localhost:6666/NameServie
omniORB:   abortOnInternalError = 0
omniORB:   abortOnNativeException = 0
omniORB:   acceptBiDirectionalGIOP = 0
omniORB:   acceptMisalignedTcIndirections = 0
omniORB:   bootstrapAgentHostname = localhost
omniORB:   bootstrapAgentPort = 900
omniORB:   clientCallTimeOutPeriod = 0
omniORB:   clientConnectTimeOutPeriod = 0
omniORB:   clientTransportRule = * unix,ssl,tcp
omniORB:   configFile = /etc/omniORB.cfg
omniORB:   connectionWatchImmediate = 0
omniORB:   connectionWatchPeriod = 50000
omniORB:   copyValuesInLocalCalls = 1
omniORB:   diiThrowsSysExceptions = 0
omniORB:   dumpConfiguration = 0
omniORB:   endPoint = giop:tcp::
omniORB:   endPointPublish = addr
omniORB:   giopMaxMsgSize = 2097152
omniORB:   giopTargetAddressMode = KeyAddr
omniORB:   id = omniORB4
omniORB:   idleThreadTimeout = 10
omniORB:   immediateAddressSwitch = 0
omniORB:   inConScanPeriod = 180
omniORB:   lcdMode = 0
omniORB:   maxGIOPConnectionPerServer = 5
omniORB:   maxGIOPVersion = 1.2
omniORB:   maxInterleavedCallsPerConnection = 5
omniORB:   maxServerThreadPerConnection = 100
omniORB:   maxServerThreadPoolSize = 100
omniORB:   maxSocketRecv = 2147483647
omniORB:   maxSocketSend = 2147483647
omniORB:   nativeCharCodeSet = ISO-8859-1
omniORB:   nativeWCharCodeSet = UTF-16
omniORB:   objectTableSize = 0
omniORB:   offerBiDirectionalGIOP = 0
omniORB:   oneCallPerConnection = 1
omniORB:   outConScanPeriod = 120
omniORB:   poaHoldRequestTimeout = 0
omniORB:   poaUniquePersistentSystemIds = 1
omniORB:   principal = [Null]
omniORB:   resetTimeOutOnRetries = 0
omniORB:   scanGranularity = 5
omniORB:   serverCallTimeOutPeriod = 0
omniORB:   serverTransportRule = * unix,ssl,tcp
omniORB:   socketSendBuffer = -1
omniORB:   strictIIOP = 1
omniORB:   supportBootstrapAgent = 1
omniORB:   supportCurrent = 1
omniORB:   supportPerThreadTimeOut = 0
omniORB:   tcAliasExpand = 0
omniORB:   threadPerConnectionLowerLimit = 9000
omniORB:   threadPerConnectionPolicy = 1
omniORB:   threadPerConnectionUpperLimit = 10000
omniORB:   threadPoolWatchConnection = 1
omniORB:   traceExceptions = 1
omniORB:   traceFile = [stderr]
omniORB:   traceInvocationReturns = 0
omniORB:   traceInvocations = 0
omniORB:   traceLevel = 40
omniORB:   traceThreadId = 0
omniORB:   traceTime = 0
omniORB:   unixTransportDirectory = /tmp/omni-%u
omniORB:   unixTransportPermission =  777
omniORB:   useTypeCodeIndirections = 1
omniORB:   verifyObjectExistsAndType = 1
omniORB: Initialising incoming endpoints.
omniORB: Instantiate endpoint 'giop:tcp::0'
omniORB: Bind to address 0.0.0.0
omniORB: Publish specification: 'addr'
omniORB: Try to publish 'addr' for endpoint giop:tcp:10.0.2.15:44025
omniORB: Publish endpoint 'giop:tcp:10.0.2.15:44025'
omniORB: Starting serving incoming endpoints.
omniORB: Creating ref to remote: key<NameServie>
 target id      : IDL:omg.org/CORBA/Object:1.0
 most derived id: 
omniORB: Initial reference `NameService' resolved from -ORBInitRef argument / ORB registration.
omniORB: Client attempt to connect to giop:tcp:localhost:6666
omniORB: Switch rope to use address giop:tcp:localhost:6666
omniORB: Unable to open new connection: giop:tcp:localhost:6666
omniORB: throw giopStream::CommFailure from giopStream.cc:1148(0,NO,TRANSIENT_ConnectFailed)
omniORB: throw TRANSIENT from omniObjRef.cc:789 (NO,TRANSIENT_ConnectFailed)
system exceptionTRANSIENT_ConnectFailed
omniORB: omniRemoteIdentity deleted.
omniORB: ObjRef() -- deleted.
omniORB: ORB not destroyed; no final clean-up. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:31:08.757

1.  什么是localHist？你是说本地主机吗？

2.  据我回忆，一个 CORBA 客户端总是需要提供一个 IOR 或一个 corbaloc 字符串。也许您可以在本地配置它，但这可能是特定于客户端的。您的服务器绑定应该是可配置的。

3.  您的家庭计算机和学校计算机之间的问题可能与防火墙有关。如果您学校的 IT 部门没有为未知的入站流量设置防火墙，我会感到非常惊讶。连接到他们网络上的随机机器将属于这一类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:55:30.530

```
java client -ORBInitialHost localhost -ORBInitialPort 6666 
```

是一种 ORACLE/SUN 查找本地命名服务的特殊技术。更灵活和可移植的方法是对客户端和服务器都使用 corbaloc 地址。这是你的情况：

```
java client -ORBInitRef NameService=corbaloc::localhost:6666/NameService
#and 
./server -ORBInitRef NameService=corbaloc::localhost:6666/NameService 
```

对于客户端和服务器，您还可以解析 cmdline 参数以获得“更好”的界面，例如

```
java client localhost:6666
# and
./server localhost:6666 
```

`resolve_initial_references("NameService")`在这种情况下，您必须在运行时使用普通对象缩小或修补 ORB 配置/参数来交换对 的调用。（可根据要求提供示例）

如果客户端/服务器不在同一台机器上运行，则您必须`localhost`与服务器的 IP 或公共名称交换您的 NamingService 和您的服务器。

# javascript - JavaScript 单选按钮问题

> ID：10397590
> 
> 赞同：1
> 
> 时间：2012-05-01T12:24:34.020
> 
> 标签：javascript, html, radio-button

我需要从 5 张图片制作图片库。必须通过不同的单选按钮选择和显示图像。不允许提交按钮。所以到现在为止，我编写了按图像名称输出图像的代码。默认数字是 0=第一个图像。但问题是，当我点击不同的单选按钮时，我的功能没有输出新的数字，也没有使单选检查=“检查”。

我的功能：

```
function radiocheck()
{
    for (var i=0; i < 5; i++)
    {
        if (document.forms[1].elements[i].checked=="true")
        {
            var whichISchecked = document.forms[1].elements[i].value;

            for (var z=0; z<i; z++)
            {
                document.forms[1].elements[z].checked="unchecked";
            }
            for (var z=i; z<5; z++)
            {
                document.forms[1].elements[z].checked="unchecked";
            }
        }
        else 
        {   
            document.forms[1].elements[0].checked="checked";
            var whichISchecked = document.forms[1].elements[0].value;
        }
    }
    return whichISchecked;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:40:10.130

单选按钮应该自己处理检查和取消检查。考虑这段代码（也在[http://jsfiddle.net/87wkC/1/](http://jsfiddle.net/87wkC/1/)）

```
<form id="f">
<input type="radio" value="1" onclick="getValue(this.value)" name="field1">A<br>
<input type="radio" value="2" onclick="getValue(this.value)" name="field1">B<br>
<input type="radio" value="3" onclick="getValue(this.value)" name="field1">C<br>
<input type="radio" value="4" onclick="getValue(this.value)" name="field1">D<br>
<input type="radio" value="5" onclick="getValue(this.value)" name="field1">E<br>
</form>
<div id="result"></div>
<script>
function getValue(a){
    document.getElementById("result").innerHTML = a
}
</script> 
```

单击一个选项按钮会清除其他按钮（通过赋予它们 all same 来处理`name`）并使其值可用 - 该函数在列表下方输出该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:29:28.417

将未选中的字符串更改为 false

```
document.forms[1].elements[z].checked="unchecked"; 
```

至

```
document.forms[1].elements[z].checked=false; 
```

还

```
document.forms[1].elements[i].checked=="true" 
```

不应该是这样吗

```
document.forms[1].elements[i].checked===true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:29:32.160

a) 使用 jQuery，事情会容易得多

b) 你应该检查

```
checked == true 
```

并不是

```
checked == "true" 
```

和

```
checked = "checked" 
```

不会做任何事情，它只是一个真/假值

# nhibernate - 如何映射一个字典 使用 Fluent NHibernate 的类映射，并测试该映射？

> ID：10397597
> 
> 赞同：2
> 
> 时间：2012-05-01T12:24:59.947
> 
> 标签：nhibernate, fluent-nhibernate, masstransit, saga

我的 MassTransit 传奇只有一个字段无法正确映射。这是 -

```
 public virtual IDictionary<string, string> Rows
    {
        get { return _rows; }
        set { _rows = value; }
    } 
```

我试过用几种方法映射它 -

```
 publich ProjCTSagaMap() // ctor for my ClassMap subclass
    {
        /*HasMany(x => x.Rows)
            .AsMap("ProjectNumber")
            .KeyColumns.Add("Row", mapping => mapping.Name("Row").SqlType("nvarchar").Not.Nullable())
            .Cascade.AllDeleteOrphan()
            .Table("ProjCtSagaRow");*/

        HasMany(x => x.Rows)
            .Table("ProjCtSagaRow")
            .KeyColumn("CorrelationId")
            .Element("Row")
            .AsMap("ProjectNumber")
            .Inverse();
    } 
```

我写了一个单元测试来测试映射 -

```
 [Test] public void ProjCtSagaMapTest()
    {
        using (var session = Utility.CreateSession<ProjCtSaga, ProjCtSagaMap>())
        {
            new PersistenceSpecification<ProjCtSaga>(session)
                .CheckReference(
                    i => i.Rows,
                    new Dictionary<string, string> { { "key", "value" } },
                    new DictionaryComparer<string, string>())
                .VerifyTheMappings();
        } 
```

我不确定问题到底出在哪里，在映射中还是在测试中。单元测试中的实际错误是 -

```
NHibernate.MappingException occurred
  Message=No persister for: System.Collections.Generic.Dictionary`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]
  Source=NHibernate
  StackTrace:
       at NHibernate.Impl.SessionFactoryImpl.GetEntityPersister(String entityName)
       at NHibernate.Impl.SessionImpl.GetEntityPersister(String entityName, Object obj)
       at NHibernate.Event.Default.AbstractSaveEventListener.SaveWithGeneratedId(Object entity, String entityName, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
       at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.EntityIsTransient(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event)
       at NHibernate.Impl.SessionImpl.FireSave(SaveOrUpdateEvent event)
       at NHibernate.Impl.SessionImpl.Save(Object obj)
       at FluentNHibernate.Testing.PersistenceSpecification`1.TransactionalSave(Object propertyValue) in d:\Builds\FluentNH\src\FluentNHibernate\Testing\PersistenceSpecification.cs:line 79
  InnerException: 
```

有人可以解释如何使用 ClassMap 映射 IDictionary 并使用 PersistenceSpecification ... VerifyMappings() 测试该映射吗？

PS - FluentNHibernate 的版本是 1.3.0.717，NHibernate 的版本是 3.2.0.4000。我确实必须在本地编译它以进行一项次要且不相关的更改。

谢谢！

* * *

这是我现在得到的其余错误 -

```
System.FormatException : Failed to convert parameter value from a String to a Int32.
  ----> System.FormatException : Input string was not in a correct format.
at System.Data.SqlClient.SqlParameter.CoerceValue(Object value, MetaType destinationType)
at System.Data.SqlClient.SqlParameter.GetCoercedValue()
at System.Data.SqlClient.SqlParameter.Validate(Int32 index, Boolean isCommandProc)
at System.Data.SqlClient.SqlCommand.BuildParamList(TdsParser parser, SqlParameterCollection parameters)
at System.Data.SqlClient.SqlCommand.BuildExecuteSql(CommandBehavior behavior, String commandText, SqlParameterCollection parameters, ref _SqlRPC rpc)
at System.Data.SqlClient.SqlCommand.AddBatchCommand(String commandText, SqlParameterCollection parameters, CommandType cmdType)
at System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
at NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
at NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
at NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
at NHibernate.Engine.ActionQueue.ExecuteActions()
at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
at NHibernate.Impl.SessionImpl.Flush()
at NHibernate.Transaction.AdoTransaction.Commit()
at FluentNHibernate.Testing.PersistenceSpecification`1.TransactionalSave(Object propertyValue) in d:\Builds\FluentNH\src\FluentNHibernate\Testing\PersistenceSpecification.cs: line 80
at FluentNHibernate.Testing.PersistenceSpecification`1.VerifyTheMappings(T first) in d:\Builds\FluentNH\src\FluentNHibernate\Testing\PersistenceSpecification.cs: line 52
at Appalappa.Tests.ProjCtTests.ProjCtSagaMapTest() in ProjCtTests.cs: line 32
--FormatException
at System.Number.StringToNumber(String str, NumberStyles options, ref NumberBuffer number, NumberFormatInfo info, Boolean parseDecimal)
at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
at System.Data.SqlClient.SqlParameter.CoerceValue(Object value, MetaType destinationType) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:55:21.173

摆脱`.Inverse();`由于元素不能保持反向引用，它是一个字符串。

`CheckReference`用于参考，但您有一个集合。使用`CheckEnumerable`或`CheckList`

更新：这对我有用

```
.CheckComponentList(p => p.Rows, 
                    new[] { new KeyValuePair<string, string>("1", "2") }, 
                    (p, item) => p.Rows.Add(item)); 
```

# joomla - 如何在进行更改时对查看者隐藏 Joomla 的前端？

> ID：10397602
> 
> 赞同：1
> 
> 时间：2012-05-01T12:25:52.390
> 
> 标签：joomla, content-management-system, maintenance, frontend

我目前有一个带有重定向的网站，它将 www.example.com 指向 subscribe.example.com，它显示了 LaunchRock 订阅启动画面。我这样做的原因是因为网站还没有完成，我想我会在此期间添加一些填充物，这样我就可以向我的朋友展示我正在做什么和计划什么。

我的问题是，我如何在没有人看到前端的情况下在网站上工作。例如，如果您熟悉网站 reddit.com，当 reddit 关闭时，他们会出现一个启动页面并显示“reddit 已关闭”，而当他们更改内容时，没有人能看到背后发生了什么。我该如何做到这一点，同时仍然能够自己查看网站并查看我所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:05:43.423

您需要将其置于离线模式

1.  转到您的 Joomla 后端
2.  转到顶部菜单上的“站点”，然后转到“全局配置”。
3.  选择“站点离线”为是。

希望这可以帮助

# java - 在Java中，如果空指针很少发生，使用catch而不是if更好

> ID：10397607
> 
> 赞同：3
> 
> 时间：2012-05-01T12:26:21.483
> 
> 标签：java, android, exception-handling, nullpointerexception

在我的 Android 应用程序中清理一些松散的东西时，我在开发人员控制台中发现了一个空指针异常，这从未发生过，我猜这是一种罕见的竞争条件。

对于那些不知道的人：Android 允许用户向开发人员报告崩溃（即未捕获的异常）。

`if (… != null)`当我想到这个臭名昭著的东西时，我已经开始打字了：**只有三份报告。**所以它很少发生。

所以我想知道：在这种情况下，性能方面：**捕获空指针异常不是更好吗？**

考虑到 if 每次都会被评估。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T12:29:08.010

听起来不像是一个狂热或心胸狭窄的人，但我坚信**从一开始就不应该允许 NPE 发生**！在我看来，捕捉 NPE 是一种非常糟糕的做法。这意味着您并不完全了解您的代码是如何工作的。

在使用某些输入之前，您应该始终做的第一件事是检查是否为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T12:29:33.983

“每次”的频率是多少？每次加载一次？每一分钟？每秒1000次？

在任何情况下，测试`obj == null`都是尽可能便宜的操作，而且肯定比异常处理便宜。

并且永远不应该发生空指针异常——它们需要被理解和防止。如果您不知道为什么会发生这种情况，则需要对其进行修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T12:30:13.250

应使用异常来处理异常情况。也就是说，如果预期该值可能为 null，那么检查它而不是捕获异常是合理的。我想不出任何例子，其中捕获 a`NullPointerException`比在正常控制流中处理它更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:07:02.173

> 我在开发人员控制台中发现了一个空指针异常，这**从未发生**过，我**猜**这是一种罕见的竞争条件

这听起来像一个错误，只是捕捉到异常听起来你打算忽略这个错误而不是修复它。找出这些空值的来源并修复它，不要让空指针传播到无法处理它们的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T12:32:57.023

如果它是多线程竞争条件，是否有可能变量正在初始化然后再次设置为 null？如果是这样，“如果（...！= null）”可以通过，然后仍然会出现异常。

为了安全起见，我会使用 try catch （应该避免未处理的空指针异常），但也会尝试找到竞争条件，如果可能或可在可监督的时间内修复或处理它。

如果异常似乎绕过竞争条件（不是很漂亮但有效），您也可以等待几毫秒并重试一定次数。

# android - 如何获取 ActionBar MenuItem 的当前位置？

> ID：10397613
> 
> 赞同：21
> 
> 时间：2012-05-01T12:27:04.733
> 
> 标签：android, android-layout

我想`MenuItem`在应用程序的`ActionBar`. 要正确定位它，我需要知道 a 的 x 位置`MenuItem`。

到目前为止，谷歌没有给我带来任何有用的结果。

甚至可能吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-09T00:14:26.740

我找到了另一种方法来挂钩操作栏按钮，这可能比公认的解决方案简单一些。您可以简单地调用`findViewById`, 菜单项的 id！

现在困难的部分是你什么***时候***可以调用这个？在`onCreate`和`onResume`中，为时过早。一种方法是使用`ViewTreeObserver`窗口的：

```
 final ViewTreeObserver viewTreeObserver = getWindow().getDecorView().getViewTreeObserver();
    viewTreeObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            View menuButton = findViewById(R.id.menu_refresh);
            // This could be called when the button is not there yet, so we must test for null
            if (menuButton != null) {
                // Found it! Do what you need with the button
                int[] location = new int[2];
                menuButton.getLocationInWindow(location);
                Log.d(TAG, "x=" + location[0] + " y=" + location[1]);

                // Now you can get rid of this listener
                viewTreeObserver.removeGlobalOnLayoutListener(this);
            }
        }
    }); 
```

这进去了`onCreate`。

注意：这是在使用 ActionBarSherlock 的项目上测试的，因此它可能不适用于“真实”操作栏。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-15T19:20:02.760

我终于找到了这个问题的答案！这有点hacky，但不是太多。唯一的缺点是：

1.  您必须将`MenuItem`s 替换为您自己的`View`. An`ImageView`与标准的非常相似，但它缺少长按以查看工具提示等功能，可能还有其他功能。

2.  我没有测试很多。

好的，这就是我们的做法。`Activity`将您的 '更改`onCreateOptionsMenu()`为如下所示：

```
View mAddListingButton;

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_main, menu);

    // Find the menu item we are interested in.
    MenuItem it = menu.findItem(R.id.item_new_listing);

    // Create a new view to replace the standard one.
    // It would be nice if we could just *get* the standard one
    // but unfortunately it.getActionView() returns null.

    // actionButtonStyle makes the 'pressed' state work.
    ImageView button = new ImageView(this, null, android.R.attr.actionButtonStyle);
    button.setImageResource(R.drawable.ic_action_add_listing);
    // The onClick attributes in the menu resource no longer work (I assume since
    // we passed null as the attribute list when creating this button.
    button.setOnClickListener(this);

    // Ok, now listen for when layouting is finished and the button is in position.
    button.addOnLayoutChangeListener(new OnLayoutChangeListener() {
        @Override
        public void onLayoutChange(View v, int left, int top, int right, int bottom,
                int oldLeft, int oldTop, int oldRight, int oldBottom)
        {
            // Apparently this can be called before layout is finished, so ignore it.
            // Remember also that it might never be called with sane values, for example
            // if your action button is pushed into the "more" menu thing.
            if (left == 0 && top == 0 && right == 0 && bottom == 0)
                return;

            // This is the only way to get the absolute position on the screen.
            // The parameters passed to this function are relative to the containing View
            // and v.getX/Y() return 0.
            int[] location = new int[2];
            v.getLocationOnScreen(location);

            // Ok, now we know the centre location of the button in screen coordinates!
            informButtonLocation(location[0] + (right-left)/2, location[1] + (bottom-top)/2);
        }
    });

    it.setActionView(button);
    mAddListingButton = it.getActionView();
    return true;
} 
```

然后你有一个函数可以用按钮的位置更新你的有用指令视图并重新绘制它：

```
private void informButtonLocation(int cx, int cy)
{
    MyHelpView v = (MyHelpView)findViewById(R.id.instructions);
    v.setText("Click this button.");
            v.setTarget(cx, cy);
} 
```

最后制作你喜欢的 schmancy 自定义视图，该视图将箭头绘制到（靠近）按钮。在您的方法中，您可以使用相同的函数`onDraw`将屏幕坐标转换回坐标。像这样的东西：`Canvas``getLocationOnScreen`

```
@Override
public void onDraw(Canvas canvas)
{
    int[] location = new int[2];
    getLocationOnScreen(location);

    canvas.drawColor(Color.WHITE);

    mPaint.setColor(Color.BLACK);
    mPaint.setTextSize(40);
    mPaint.setAntiAlias(true);
    mPaint.setTextAlign(Align.CENTER);
    canvas.drawText(mText, getWidth()/2, getHeight()/2, mPaint);

    // Crappy line that isn't positioned right at all and has no arrowhead.
    if (mTargetX != -1 && mTargetY != -1)
        canvas.drawLine(getWidth()/2, getHeight()/2,
                mTargetX - location[0], mTargetY - location[1], mPaint);
} 
```

（但显然您必须将目标位置剪辑到 Canvas 大小）。如果您采用与 Google 相同的方法，将视图覆盖在整个屏幕上，您就不必担心这一点，但它更具侵入性。Google 的方法绝对不使用任何私有 API（令人惊讶）。查看`Cling.java`Launcher2 代码。

顺便说一句，如果您查看 Google 类似的启动器实现的源代码（`Cling`出于某种原因，他们将指令屏幕称为 a），您会发现它更加骇人听闻。它们基本上使用由正在使用的布局确定的绝对屏幕位置。

希望这对人们有所帮助！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-13T13:49:58.683

只需将菜单项作为普通视图处理..像这样：

```
 View myActionView = findViewById(R.id.my_menu_item_id);
    if (myActionView != null) {
        int[] location = new int[2];
        myActionView.getLocationOnScreen(location);

        int x = location[0];
        int y = location[1];
        Log.d(TAG, "menu item location --> " + x + "," + y);
    } 
```

**注意：** *我已经使用 ToolBar 配置了我的活动，而不是直接作为 ActionBar 进行了测试……但我想它应该可以类似地工作。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:26:15.247

**此答案现已过时，请在上面查找已接受的答案**

我发现（此时）没有办法计算出菜单项的 x/y 值。看到菜单项也可以从屏幕上隐藏，直到用户按下菜单按钮。在 Android 3.0 及更高版本中，您可以选择在应用程序的`ActionBar`. 您可以在操作栏中添加很多菜单项，当没有更多位置可以在操作栏中放置项目时，它将简单地创建一个“溢出”按钮，该按钮将包含所有无法放置在操作栏中的菜单项，因为空间不足或因为程序员明确设置菜单项出现在溢出菜单中。

所有这些行为可能是菜单项没有您可以检索（或设置）的 x/y 位置的原因。

我最终解决这个问题的方法是使用该`Paint.measureText()`函数来确定操作栏中每个菜单项的宽度，并使用它来计算标签应该在屏幕右侧的偏移量。

这是一种解决方法，但如果有人和我有同样的问题，请知道这很好用。请记住在`Paint`对象上设置适当的字体大小，否则当您测量文本的长度时，它很可能会使用与菜单项的字体大小不同的字体大小来计算文本宽度。

# php - 以 MySQL 友好的方式获取日期信息

> ID：10397616
> 
> 赞同：-2
> 
> 时间：2012-05-01T12:27:14.240
> 
> 标签：php, mysql, date

有两个问题。我传递了一个像 05/16/1978 这样的日期，我希望它被转换为对 MySQL 表的 datetime 字段友好的格式。

其次，如何在 php 中获取当前时间？有点像 17:22:59

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:31:23.343

你会想要调查

*   [`strtotime()`](http://php.net/manual/en/function.strtotime.php)- 将任何英文文本日期时间描述解析为 Unix 时间戳
*   [`time()`](http://php.net/manual/en/function.time.php)- 返回当前的 Unix 时间戳
*   [`date()`](http://php.net/manual/en/function.date.php)- 格式化本地时间/日期

使用该`date()`函数，您可以传递一个 EPOCH 时间戳并以您想要的任何格式取回一个表示时间戳的字符串 -

```
$now = time();
$today = date("M d Y",$now);  // May 01 2012 
```

查看[日期函数文档](http://php.net/manual/en/function.date.php)以获取有关可能的格式的详细信息...

您始终可以以 EPOCH 格式存储日期（自 70 年 1 月 1 日以来的秒数）。我发现使用和操作 EPOCH 时间戳非常容易。我使用`INT(10)`数据库中的字段来存储这些值。

* * *

如果您决定通过 EPOCH 实现您的时间戳，这是一个非常棒的工具供您使用 -

[http://www.epochconverter.com/](http://www.epochconverter.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:31:26.027

请看一下这个链接

[http://php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

例如

```
$d = "05/16/1978";
list($month, $day, $year) = explode("/",$d);
$datetime = sprintf("%d-%d-%d", $year, $month, $day); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:32:46.757

`DATETIME`格式是`YYYY-MM-DD`，为了将结果转换为该格式，您可以执行

```
$date = "05/16/1978";
list($month, $day, $year) = explode("/",$date);
$datetime = sprintf("%d-%d-%d", $year, $month, $day); 
```

`$datetime`现在将包含 MySQL 将理解的“1978-16-15”。

`date('G:i:s')`将以 H:m:s 格式返回当前时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T12:33:33.507

阅读这篇[PHP 和 MySQL](http://www.richardlord.net/blog/dates-in-php-and-mysql)博客文章中的日期，我认为它可能会对您有所帮助。
它总结了三种使用 PHP 管理存储在 MySQL 中的日期的可能性。那里提到的一种常见方法是：

> 一种常见的解决方案是将日期存储在 DATETIME 字段中，并使用 PHP 的 date() 和 strtotime() 函数在 PHP 时间戳和 MySQL DATETIME 之间进行转换。

例如：

```
$mysqldate = date( 'Y-m-d H:i:s', $phpdate );
$phpdate = strtotime( $mysqldate ); 
```

希望它可以帮助你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T12:57:46.387

使用此代码：

```
function convert_time_sql($date){
    $date = strtotime($date);
    $date = date("Y-m-d ",$date).date("G:i:s");
    return $date;
} 
```

这将返回 sql 格式时间

**注意：** 日期必须采用正确的格式，请参阅：

[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

[http://www.php.net/manual/en/datetime.formats.date.php](http://www.php.net/manual/en/datetime.formats.date.php)

**编辑：**

如果包含时间，请使用此功能：

```
function convert_time_sql($date,$time_included=false){
    $date = strtotime($date);
    $date = date("Y-m-d ".($time_included?"G:i:s":""),$date).($time_included?"":date("G:i:s"));
    return $date;
} 
```

如果您包括时间，请在给定日期之后放置一个 true。

像 `convert_time_sql('05/16/1978 05:45:59 AM',true);`

# r - ggplot 条形图中的额外条

> ID：10397618
> 
> 赞同：1
> 
> 时间：2012-05-01T12:27:42.613
> 
> 标签：r, ggplot2

我的数据是

```
> data
    width          variable value
1     200   mappedEnsemblTx   110
2     400   mappedEnsemblTx   392
3     600   mappedEnsemblTx  1055
4     800   mappedEnsemblTx  2615
5    1000   mappedEnsemblTx  5201
101   200 UnmappedEnsemblTx  3927
102   400 UnmappedEnsemblTx  5175
103   600 UnmappedEnsemblTx  3220
104   800 UnmappedEnsemblTx  4856
105  1000 UnmappedEnsemblTx  7130 
```

当我绘制这个时，我可以在我的图中看到三个或四个条而不是两个条。最小代码如下：

```
 library(ggplot2)

g = ggplot(dat.melt,aes(x=factor(width),y=value,fill=variable), format(scientific=FALSE)) 
g = g + geom_bar(stat='identity',position='dodge') 
g <- g + theme_bw()
g = g + opts(axis.text.x=theme_text(angle=-90, hjust=0, size = 16), axis.text.y=theme_text(size=16))
g <- g + opts(axis.title.x = theme_text(size=18), axis.title.y = theme_text(size=18, angle=90) )
g = g + scale_x_discrete('Total widths of the Ensembl Transcripts') + scale_y_continuous(name = 'Count') 
g = g + coord_cartesian(ylim = c(0,7000)) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:48:12.477

和

```
data.melt <- structure(list(width = c(200L, 400L, 600L, 800L, 1000L, 200L, 
400L, 600L, 800L, 1000L), variable = structure(c(1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L), .Label = c("mappedEnsemblTx", "UnmappedEnsemblTx"
), class = "factor"), value = c(110L, 392L, 1055L, 2615L, 5201L, 
3927L, 5175L, 3220L, 4856L, 7130L)), .Names = c("width", "variable", 
"value"), class = "data.frame", row.names = c("1", "2", "3", 
"4", "5", "101", "102", "103", "104", "105")) 
```

和你的例子

```
g <- ggplot(data.melt,aes(x=factor(width),y=value,fill=variable),
            format(scientific=FALSE)) 
g <- g + geom_bar(stat='identity',position='dodge') 
g <- g + theme_bw()
g <- g + opts(axis.text.x=theme_text(angle=-90, hjust=0, size = 16), 
              axis.text.y=theme_text(size=16))
g <- g + opts(axis.title.x = theme_text(size=18),
              axis.title.y = theme_text(size=18, angle=90) )
g <- g + scale_x_discrete('Total widths of the Ensembl Transcripts') +
         scale_y_continuous(name = 'Count') 
g <- g + coord_cartesian(ylim = c(0,7000))
g 
```

我得到：

![条形图示例](../Images/aa1e4326785962513ab9ff4330816ca5.png)

这是我所期望的；5组2条。`width`5 组，因为您在 factor 中有 5 个值和 2 个水平`variable`。

那就是：

```
R> sessionInfo()
R version 2.15.0 Patched (2012-04-16 r59049)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.utf8       LC_NUMERIC=C             
 [3] LC_TIME=en_GB.utf8        LC_COLLATE=en_GB.utf8    
 [5] LC_MONETARY=en_GB.utf8    LC_MESSAGES=en_GB.utf8   
 [7] LC_PAPER=C                LC_NAME=C                
 [9] LC_ADDRESS=C              LC_TELEPHONE=C           
[11] LC_MEASUREMENT=en_GB.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.9.0

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.0       
 [5] MASS_7.3-17        memoise_0.1        munsell_0.3        plyr_1.7.1        
 [9] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     scales_0.2.0      
[13] stringr_0.6        tools_2.15.0 
```

# testing - 如何使用 Selenium IDE 测试使用 txt 文件或 excel 文件中的 100 个用户名、密码和电子邮件登录的登录页面

> ID：10397626
> 
> 赞同：0
> 
> 时间：2012-05-01T12:28:41.007
> 
> 标签：testing, login, selenium, selenium-ide

我想测试我网站的登录页面。我将在 Firefox 上使用 selenium IDE。我希望 Selenium 获取我的 user_data.txt 或 user_data.xls 文件的数据。将测试 100 个不同的用户名、电子邮件、密码。如何测试我想要的网站登录页面？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:49:06.390

您可以通过以下步骤执行此操作：

> 1.  在“Selenium Core extensions”中导入 goto_sel_ide.js 文件
> 2.  使用以下详细信息创建 googlesearch.js 文件 var quote=new Array("Saab","Volvo","BMW","Ford","Maruti","Honda","Suzuki");
> 3.  在“Selenium IDE 扩展”中导入这个 googlesearch.js 文件。
> 4.  单击确定按钮并重新启动 Selenium IDE 并按如下所示编写脚本。
> 
> store 0 looptimes while storedVars.looptimes <= 3 storeEval quote[storedVars.looptimes] searchKey open [http://www.google.com](http://www.google.com) type q ${searchKey} click btnG pause 2000 store javascript{storedVars.looptimes++;} endWhile

您需要在 username.js 文件中添加 100 个用户名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:35:07.287

我认为在这种情况下最好的选择是扩展 IDE。

您可以定义一个while循环，一个用户名/密码/电子邮件生成器将其保存到一个.js文件并从选项链接到if - > Selenium Core Extensions

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T23:13:53.450

[SeLite](https://code.google.com/p/selite/wiki/ProjectHome)是我为此使用的。您需要下载它以及 SeLite SelBlocks Global，两者都可以在[这里](http://docs.seleniumhq.org/download/)找到。我个人使用 json 文件而不是 excel 电子表格，但我相信这可以与 xml 以及 json 一起使用。如果做不到这一点，[Mr Data Converter](http://shancarter.github.io/mr-data-converter/)是一个非常可靠的从 xml 转换为 json 的工具。

seLite SelBlocksGlobal 是对原始[SelBlocks](http://refactoror.wikia.com/wiki/Selblocks_Reference)的增强，因此这里应该有关于插件功能的更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T22:03:55.107

您可以使用 Selenium WebDriver 很容易地做到这一点。我使用 Visual Studio 2010 并为我的测试使用“DataSource”属性，您可以在其中指定一个文件（我使用 MTM 测试用例），然后根据需要访问测试运行变量。要使用属性，您需要在测试方法上方使用它：

```
[TestMethod, DataSource("parameters here")] 
```

在深入使用它之前阅读它会很好，因为它非常有用，但应该根据您正在测试的内容进行计划。希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T22:26:34.277

你也可以通过 Selenium IDE 使用一些插件来做到这一点。该插件名为 DataDriven，您可以在此处下载： [http ://wiki.openqa.org/display/SEL/datadriven](http://wiki.openqa.org/display/SEL/datadriven)

我经常使用这个插件来递归数据文件并使用迭代 Selenium IDE 本机脚本中的记录。

# ruby-on-rails - 回形针 - 测试图像是否已上传

> ID：10397627
> 
> 赞同：1
> 
> 时间：2012-05-01T12:28:43.233
> 
> 标签：ruby-on-rails, paperclip

我有 2 个模型（书籍和图像）

```
class Book < ActiveRecord::Base

  has_many :images

  accepts_nested_attributes_for :images

end 

class Image < ActiveRecord::Base

    belongs_to :book

    has_attached_file :data, :path => ":rails_root/public/system/datas/:book_id/:style/:basename.:extension",
                      :url => "/system/datas/:book_id/:style/:basename.:extension",

    :styles => {
      :thumb => ["150x172#",:jpg],
      :large => ["100%", :jpg]
    }

  validates_attachment_presence :data
    validates_attachment_content_type :data,
    :content_type => ['image/jpeg', 'image/pjpeg',
                    'image/jpg', 'image/png', 'image/tiff', 'image/gif'], :message => "has to be in a proper format"

end 
```

我想修改我的应用程序，以便当用户创建新书并上传图片时，他们会被重定向到特定页面，否则他们会被定向到“显示”页面

我在 Book Controller 中修改了我的“创建”操作，如下所示：

```
def create
    @book = Book.new(params[:book])

    if @book.save

      flash[:notice] = 'Book was successfully created'

      if params[:book][:image][:data].blank?  # === this line is giving me errors
        redirect_to @specific_page
      else  
         redirect_to show_book_path(@book.id)
      end

    else
      render :action => 'new'
    end

  end 
```

我想测试如果上传了一张或多张图片，用户应该被引导到不同的页面

以下 if 条件错误：

```
if params[:book][:image][:data].blank?  # === this line is giving me errors 
```

如果有人能建议我如何检查图像是否已附加到新书中，我将不胜感激。

请注意，我只想检查新上传的图片，而不是与图书相关的所有图片。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:34:14.873

您可以使用 Ruby 的`FileTest`模块。如果给定文件存在，则有一个`exists?`方法返回 true，否则返回 false。

[请参阅此处](http://www.ruby-doc.org/core-1.9.3/FileTest.html#method-i-exists-3F)的API 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:34:30.837

首先，我不确定您的视图文件。但是如果用户没有选择/上传单个图像，则 params[:book][:image] 将为 nil，因此 'if params[:book][:image][:data].blank?' 行给出错误。

尝试检查与书籍实例关联的“图像”实例

```
if @book.images.any?
  redirect_to @specific_page 
```

# android - 屏幕中央的按钮

> ID：10397632
> 
> 赞同：0
> 
> 时间：2012-05-01T12:28:56.823
> 
> 标签：android, xml, layout

我已经创建了这个 xml 文件，我想将两个按钮放在屏幕中间而不是在屏幕的最顶部显示它们

```
<LinearLayout
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="@android:drawable/bottom_bar"
    android:orientation="horizontal"
    android:paddingBottom="1.0dip"
    android:paddingLeft="4.0dip"
    android:paddingRight="4.0dip"
    android:paddingTop="5.0dip" >

    <Button
        android:id="@+id/allow"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1.0"
        android:text="Allow" />

    <Button
        android:id="@+id/deny"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1.0"
        android:text="Deny" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:30:42.413

利用`android:layout_gravity="center_vertical|center_horizontal"`

在两个按钮中放置在中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:30:57.260

设置线性布局的重力。

```
<LinearLayout
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:background="@android:drawable/bottom_bar"
android:orientation="horizontal"
android:paddingBottom="1.0dip"
android:paddingLeft="4.0dip"
android:paddingRight="4.0dip"
android:paddingTop="5.0dip"
android:gravity="center_horizontal|center_vertical"> 
```

# c# - C# 中的文本框 GUI 编程

> ID：10397634
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:29:12.953
> 
> 标签：c#, winforms, user-interface, textbox

我正在尝试学习 C# 中的 GUI 编程，我有以下关于 C# 中 TextBox 的默认代码的问题：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication34
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
         // Textbox programming goes here
        }
    }
} 
```

现在，当我想尝试与 TexBox 编程有点不同的东西时，类似于此代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication20
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        //
        // Detect the KeyEventArg's key enumerated constant.
        //
        if (e.KeyCode == Keys.Enter)
        {
        MessageBox.Show("You pressed enter! Good job!");
        }
        else if (e.KeyCode == Keys.Escape)
        {
        MessageBox.Show("You pressed escape! What's wrong?");
        }
    }
    }
} 
```

我无法运行代码，因为 TextBox 的状态是

```
textBox1_KeyDown 
```

而不是默认的

```
textBox1_TextChanged 
```

现在我的问题是，如何将 TextBox 事件处理程序从默认值更改为另一种？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T12:33:46.127

`KeyDown`并且`TextChanged`是不同的**事件**。

不要双击文本框来输入事件代码，而是选择属性中的事件选项卡，然后双击要为其编写代码的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:14:29.867

我认为您要寻找的是 OnPreviewKeyDown 事件......它会告诉您接下来会发生什么。如果您想绕过它的活动，请将“Handled”属性设置为 true。

```
protected override void OnPreviewKeyDown(System.Windows.Input.KeyEventArgs e)
{
   var ue = e.OriginalSource as FrameworkElement;

   if (e.Key == Key.Enter)
   { 
      MessageBox.Show("You pressed enter! Good job!");
      e.Handled = true;   // to tell event stack you've already taken care of this condition
   }
   else if (e.KeyCode == Keys.Escape)
      MessageBox.Show("You pressed escape! What's wrong?");
} 
```

# javascript - 放大/缩小时的视点大小

> ID：10397652
> 
> 赞同：2
> 
> 时间：2012-05-01T12:30:51.190
> 
> 标签：javascript, jquery

`$(window).height()`获取页面加载时窗口的高度。但是，放大/缩小时，我想要新的视点高度。这可能吗？

它可以很好地调整普通浏览器的大小，但我想在手机上放大/缩小不会触发`$(window).resize()`？或者至少它不会更新窗口的大小

澄清一下，我说的是缩放移动浏览器。我正在模拟 css 属性 position:fixed 使用 jQuery。

`$(elements).css('top', $("body").scrollTop() - 42 + $(window).height() / 2)`是我正在使用的代码。它基本上使元素在屏幕上垂直居中。这是被解雇的`$(window).resize`和`$(window).scroll`。代码开始时可以正常工作，但缩放不会更新`$(window).height()`

* * *

编辑

所以我想另一种方式问：关于如何在 javascript/jQuery 中获得视点中心的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:55:32.503

好吧，虽然我不确切知道，但请查看[此链接](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)，因为它可能会有所帮助。

我确实尝试过[这样](http://jsfiddle.net/HTAMf/)的事情，它适用于调整大小但不适用于缩放。Zoom 不会改变窗口高度，而只会改变内部元素的大小，所以这就是为什么 jQuery 没有做任何改变的原因。

你现在的代码是什么，你想改变什么？内在元素？

# servlets - 从java代码制作多个httpServletRequest

> ID：10397654
> 
> 赞同：0
> 
> 时间：2012-05-01T12:31:03.780
> 
> 标签：servlets

我对 Java 很陌生。有一个 Model Server Web 服务，现在要对其进行测试，我们需要创建一个测试框架。对于测试，我必须从一个文件中提供多个测试输入。对于每个输入，我都必须运行 Web 服务。现在我想知道有没有办法从java代码创建HttpServletRequest，因为我必须为每个测试输入创建一个新的Http post请求。如果有任何替代方法可以实现这一点，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:42:00.837

使用内置[`java.net.URLConnection`](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)或更方便的[Apache HttpComponents Client](http://hc.apache.org/httpcomponents-client-ga/)。

# ios - iOS - MVC 1 或 MVC 2？

> ID：10397665
> 
> 赞同：0
> 
> 时间：2012-05-01T12:32:19.543
> 
> 标签：ios, model-view-controller

我需要知道 iOS 是基于 MVC1 还是 MVC2 架构的论文。

我猜它使用 MVC2，因为一切都通过控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:44:49.907

不是那么明确。UIKit 中实现的设计模式是模型-视图-控制器。没有“模型 1”或“模型 2”MVC 设计模式。

“模型 1”和“模型 2”是 Sun 发明的术语，描述了用 JSP 实现 MVC 模式的两种不同方式。

在模型 1 中，M 是 JSP 中的 JavaBeans，V 是 JSP 中的 HMTL/scriptlet，C 是根据传递给容器的 URI 选择要执行的 JSP 的 JSP Servlet。

在模型 2 中，建议使用更严格的关注点分离。例如，在 Spring MVC 框架中，M 是您的业务逻辑，V 是您决定使用的任何模板语言（Freemarker、JSP/JSTL、Velocity），而 C 是 DispatcherServlet，它选择 Controller 实现。

[http://en.wikipedia.org/wiki/Model_2](http://en.wikipedia.org/wiki/Model_2)

# php - RETS 以及如何设计我们的数据库表，因为它有很多列和查询性能问题

> ID：10397668
> 
> 赞同：2
> 
> 时间：2012-05-01T12:32:34.427
> 
> 标签：php, mysql, rets

最近我正在使用 RETS，所以我必须下载所有数据并将其保存到我们的网络服务器。我正在使用 MySQL 和 PHP。

我在元数据上看到我有很多列。我认为在一张表中创建 100 多列是不明智的决定。如果我这样做，我必须使用 MyISAM

如果我制作 4 或 5 个表（每个表可能有 20 多列），那么我需要制作一个父表，其余表使用外键相互连接到它们的父表。所以在这种情况下，我需要我们的 InnoDB 引擎。

当我在我的服务器上运行搜索时，这两种情况都会正确地给我输出，但是哪一种会花费更少的时间来给出结果？

因为第一种情况只有一个表，我只是在某些条件下获取数据，但第二种情况我必须进行连接和搜索？

请建议我哪个是好的设计，或者如果您有任何好主意，请与我分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T23:24:29.617

几乎所有 MLS RETS 提要都有 3 个可分为表格的信息子类别。

因此，您可能有 Residential、Rental 和 Commercial 表。

使用 MLS ID 作为主键。

您可以将 Residential 表分为

## 住宅价格信息

字段

*   MLSID
*   价格表
*   公用事业费
*   社区费用
*   税号
*   其他费用

## 住宅代理信息

字段

*   MLSID
*   列表代理名称
*   列出代理电话
*   列表办公室名称
*   列表办公室电话

## 住宅详情信息

字段

*   MLSID
*   浴满
*   BathsHalf
*   总床
*   平方英尺
*   地址
*   城市
*   状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:38:44.720

当您拆分列时，请确保根据访问频率/偏好对它们进行分组，以避免多次连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T21:08:17.780

最大（也是最简单）的性能改进是将每个板拆分到自己的单独表中。

# playframework - 玩！2.0 在 Mac OS X 上与 JDK 1.7 一起挂起

> ID：10397672
> 
> 赞同：2
> 
> 时间：2012-05-01T12:32:51.410
> 
> 标签：playframework, java-7, playframework-2.0

当您在 JDK 1.7 下运行 Play 应用程序时，您是否遇到过挂起的情况？

当我使用它启动 Play 应用程序时，第一个请求检查数据库演变并应用这些请求，但之后没有请求通过。我很困惑这可能是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:48:00.793

这是组合玩法的通病！2.x、MacOS X 和 JDK7。有趣的是，这发生在我使用 play 时！2.0.1 但不适用于 v. 2.0。这是可重现的。

正如 Seymour Cakes 所说，切换回 Java 6 解决了这些问题，即使是为了玩耍！2.0.1。

有关更多信息，另请参阅：[Play framework 2.0.1 - 服务器仅响应第一个请求](https://stackoverflow.com/questions/10452122/play-framework-2-0-1-server-only-responding-to-the-first-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:48:51.603

升级到[Play 2.0.2](http://www.playframework.org/documentation/2.0.2/Home)似乎可以工作。

# android - 以编程方式终止浏览器

> ID：10397673
> 
> 赞同：0
> 
> 时间：2012-05-01T12:32:53.280
> 
> 标签：android

我正在尝试以编程方式关闭/终止浏览器。但是我在默认浏览器类中没有找到任何方法。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:56:56.047

在 android 中杀死进程是个坏主意，而且从不鼓励。但如果你仍然想继续这样做，你可以做这样的事情。

```
List<ActivityManager.RunningAppProcessInfo> list = servMng.getRunningAppProcesses();
    if(list != null){
     for(int i=0;i<list.size();++i){
      if("com.android.browser".matches(list.get(i).processName)){
       int pid = android.os.Process.getUidForName("com.android.browser");
             android.os.Process.killProcess(pid);
      }
     }
    } 
```

但也看看这个[答案](https://stackoverflow.com/a/2720404/443387)。

一个很好的答案，这将为您详细说明为什么不鼓励这种杀死进程的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:36:57.103

如果您指的是您自己对 的使用`WebView`，那只是`finish()`您的活动。

如果您指的是其他应用程序，则不能“以编程方式关闭/终止浏览器”，特别是如果它位于前台。

# java - 使用来自 yaml 的数据来初始化 java 类和 javascript 中的应用程序配置变量

> ID：10397677
> 
> 赞同：1
> 
> 时间：2012-05-01T12:33:08.757
> 
> 标签：java, javascript, yaml

我需要将配置常量存储在 .yaml 文件中的 java web 应用程序中。我期待这些配置常量的值可以用于将它们的相应副本初始化为`static final`Java类中定义的常量！？

或者，我是否需要在每次需要 java 类中的值时从 .yaml 中读取？

PS：我还需要在我的 JavaScript 文件中复制/使用这些常量。

# regex - Perl Regex - 捕获所有字符，直到一个模式

> ID：10397685
> 
> 赞同：0
> 
> 时间：2012-05-01T12:33:51.283
> 
> 标签：regex, perl

我正在尝试从字符串中提取 4 块信息。该字符串是包含扩展名的文件的名称。第一组可以包含任何有效字符，直到到达第二组之前的空格。第二组数据将是包含在一组方括号内的 4 个数字。该组由第一组用空格分隔。第三组可以是 3 或 4 个数字，后跟字母“p”。该组也由前一组的空格隔开。最后一组只是文件扩展名。

这是一个例子：

```
This, could be ['a'] s(@m)pl3 file name_with any characters [1923] (720p).avi 
```

然后需要将其解析为：

```
$1 = This, could be ['a'] s(@m)pl3 file name_with any characters
$2 = 1923
$3 = 720p
$4 = avi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:39:03.963

另请参阅[perldoc perlreref](http://perldoc.perl.org/perlreref.html)。

这是考虑到您的示例字符串的更新示例：

```
#!/usr/bin/env perl

use strict; use warnings;

my $x = q{This, could be ['a'] s(@m)pl3 file name_with any characters [1923] (720p).avi};

my $pat = qr{
    \A
    (.+?)
    [ ]
    \[ ( [0-9]{4} ) \]
    [ ]
    \( ( [0-9]+ p ) \)
    [.]
    (.+)
    \z
}x;

print "---$_---\n" for $x =~ $pat; 
```

输出：

```
---这个，可以是 ['a'] s(@m)pl3 file name_with any characters---
---1923---
---720p---
---avi---
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:21:21.163

不管是否 Perl，有时正则表达式的问题在于它的贪心。假设我想捕获某人的名字，字符串如下所示：

```
Bob Baker 
```

我可以使用这个正则表达式：

```
sed 's/^\(.*)\ .*$/\1/' 
```

这适用于*Bob Baker*，但不适用于*Bob Barry Baker*。问题是我的正则表达式是贪婪的并且会选择所有字符直到*最后一个*空格，所以我最终不会`Bob`使用`Bob Baker`. 解决此问题的一种常用方法是指定除您不想要的字符*之外的所有字符：*

```
sed 's/^\([^ ]*)\ .*$/\1/' 
```

在这种情况下，我指定了任何*不*包括空格的字符集。这将同时改变`Bob Baker`和`Bob Rudolph Baker`为 just `Bob`。

Perl 有另一种指定非贪婪正则表达式的方法。在 Perl 中，您`?`向您的子表达式添加一个您希望不贪婪的子表达式。在上面的示例中，这两个都会将包含的字符串更改`Bob Barry Baker`为`Bob`：

```
$string =~ s/^([^ ]+) .*$/$1/;
$string =~ s/^(.+?) .*$/$1/; 
```

顺便说一句，**这些是*不*等价**的！

除了*空格*正则表达式之外，我可以这样做：

```
 $string =~ /^([^ ]+)( )(\[\d{4}\])( )(\(\d+p\))(\.)([^.]+)/ 
```

使用非贪婪限定符：

```
$string =~ /^(.+?)( )(\[\d{4}\])( )(\(\d+p\))(\.)(.*)/ 
```

并且，使用`x`限定符允许您将相同的正则表达式放在多行上，这很好，因为您可以添加注释来帮助解释您在做什么：

```
$string =~ /
     ^(.+?)                   #Any set of characters (non-greedy)
     ([ ])                    #Space
     (\[\d{4}\])              #[1959]
     ([ ])                    #Space
     (\([0-9]+p\))            #(430p)
     [.]                      #Period
     ([^\.]+)                 #File Suffix (no period)
/x 
```

而且，此时，您不妨遵循 Damian Conway关于 Perl 正则表达式的*最佳实践建议。*

```
$string =~ /
     \A                 #Start of Regular Expression Anchor
     ( .+? )            #Any set of characters (non-greedy)
     ( [ ] )            #Space
     ( \[ \d{4} \] )    #[1959]
     ( [ ] )            #Space
     ( \( [0-9] +p \) ) #(430p)
     ( [.] )            #Period
     ( [^\.]+ )         #File Suffix (no period)
     \Z                 #End of string anchor
/xm; 
```

由于`x`忽略*所有*空白，我什至可以在同一行的子组之间添加空格。在这种情况下，`( .*+? )`只是比`(.*+?)`. 是否`( \( [0-9] +p \) )`或`( \( [0-9]+p \) )`什`( \([0-9]+p\) )`至更容易理解取决于您。

而且，是的，答案看起来很像[思南的](https://stackoverflow.com/a/10397739/368630)答案。

顺便说一句，正如 Sinan 所示，使用非贪婪正则表达式限定符能够解析`a b c d e [1234] (1080p).mov`，而使用*不包含空格*子表达式的所有内容则不能。这就是为什么我说它们不一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:45:21.887

我会这样写正则表达式`(.*?) (\[\d{4}\]) (\(\d+p\))\.(.*)`

没测试过，写的更好：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:45:22.480

我不使用 Perl，所以我的正则表达式可能需要一些调整，但是 AFAIK：

```
(any set of characters) = \S*
(a space) = \s+
('[' + 4 numbers + ']') = \[[0-9]{4}
(a space) = \s+
('(' + an unknown number of numbers + 'p)') = \([0-9]+p\)
(a period) = \.
(file extension)  = .{2,5} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T15:29:04.877

这看起来像您正在尝试解析文件名。如果思南猜对了，它看起来像：

```
$x = 'a b c d e [1234] (1080p).mov' 
```

现在，您可以编写一个正则表达式来解析它，但是对于不同的字符和一个复杂的正则表达式，维护起来可能很痛苦并且很容易破坏。那么为什么不让它更容易使用[`split`](http://perldoc.perl.org/functions/split.html)呢？

```
my @fields = split ' ', $x; 
```

您也可以在单个空格上拆分`/ /`，但如果您在任何地方有多个空格，那么您将面临多个空字段的风险。而且它不会去除换行符。

当然，这完全取决于您要捕获的字段，但是由于您没有提到这一点，因此我无法为您提供帮助。请注意，您也可以在之后解析数组：

```
my @nums  = grep /\d/, @fields;       # anything with numbers
my ($tag) = grep /\[\d+\]/, @fields;  # catch first [1234] type field 
```

关键是现在正则表达式更容易编写和维护。

如果您依赖于从字符串末尾向后进行匹配，则可以将该[`reverse`](http://perldoc.perl.org/functions/reverse.html)函数与 结合使用`split`，例如：

```
my $xrev   = reverse $x;
my @fields = split ' ', $xrev, 3; 
```

其中“3”是对创建多少个字段的限制，所以`@fields`现在只包含三个字符串。

# emacs - 使用 ido-mode 时停止 tramp 打开远程目录

> ID：10397687
> 
> 赞同：2
> 
> 时间：2012-05-01T12:33:53.657
> 
> 标签：emacs, tramp, ido-mode

我对 ido 模式有疑问。当我循环浏览工作目录（使用 Mn）时，其中一个目录不可避免地位于远程服务器上，这使得 tramp 开始进行身份验证。

我知道我可以编辑 ido-work-directory-list-ignore-regexps 变量，但也许我误解了这一点，或者它如何与流浪汉一起工作。如果目录是 someguy@example.com:/home/public/ 我应该使用什么正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:01:36.087

我建议试试这个：

```
(require 'ido)
(add-to-list 'ido-work-directory-list-ignore-regexps tramp-file-name-regexp) 
```

# php - 执行构造函数是/否

> ID：10397688
> 
> 赞同：1
> 
> 时间：2012-05-01T12:33:53.750
> 
> 标签：php, oop

假设在[OOP（有益用途）](https://stackoverflow.com/questions/10387889/oop-beneficial-usage)中我想为购物卡上的物品创建账单，我将 Bill 对象传递给篮子的 handleInvoice() 函数（全部用 PHP 编写）：

```
class Basket {
    // -- other code 

    public function handleInvoice( Bill $invoice ) {
        $invoice->chargeFor( $this->items );
        $invoice->chargeTo( $this->account );
        return $invoice->process();
    }
} 
```

这里 Bill 类中不需要构造函数，因为目前不存在计费数据。

但是，如果我还想使用相同的 Bill 类来管理早期的发票，我需要一些构造函数从数据库中加载所有计费数据：

```
class Bill {
    private $date;
    // --- other stuff

    function __construct( $bill_id ) {

        $result = mysql( "select * from invoices where id = $bill_id" );
        $this->date = $result['date'];
        // --- other stuff

    }

} 
```

现在我如何“告诉”程序在前一种情况下不应该执行构造函数，而在后一种情况下应该执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:18:04.623

我在条件`__construct`营。

```
public class Bill {

    public function __construct( $bill_id = '' ){
        if (!empty($bill_id)) {
            $result = ...
        } 
    }
} 
```

工厂模式也有效；`new Bill`只要你想打电话，你就不能偷懒。您需要调用特定于情况的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:46:20.120

PHP 不支持构造函数重载。所以你可以使用“工厂模式”。

```
public class Bill(){

  private function __construct(){
    //prevent new Bill() called from outside the class
  }

  public static function createEmptyBill(){
    return new Bill();
  }

  public static function createBillFromData($bill_id){
    $bill = new Bill();
    //assign any var..
    return $bill;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:32:56.690

构造函数应该只初始化变量，而不应该做任何“真正的工作”。
因为类的接口中的所有方法都应该是可测试的，并且不应该在接口中声明构造函数（否则该接口将无用）。
更多信息： http: [//misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)

# android - 在适配器中获取行

> ID：10397690
> 
> 赞同：3
> 
> 时间：2012-05-01T12:34:01.707
> 
> 标签：android

我的 ListView 有 ArrayAdapter。它有 TextView 和箭头图像。如果 TextView 有 3 行或更多行，我必须显示箭头图像，但如果行数 < 3 必须隐藏箭头。但实际上，在绘制 TextView 之前，Adapter 并没有他们的行数。有任何想法吗？我是否需要显示带有箭头的项目，取决于行数。

此代码不起作用（TextView 仅在绘制后接收行数）

```
if(holder.text.getLineCount() < 3)
{
        holder.arrow.setVisibility(View.GONE);
}
else
{
        holder.arrow.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:44:13.187

您需要将代码的执行延迟到文本更新之后。尝试为此使用[TextView::addTextChangedListener()](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)事件：

```
holder.text.addTextChangedListener(new TextWatcher() {
    public void afterTextChanged(Editable target) {

        if(holder.text.getLineCount() < 3) {
             holder.arrow.setVisibility(View.GONE);
        }
        else {
             holder.arrow.setVisibility(View.VISIBLE);
        }

    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after){}
    public void onTextChanged(CharSequence s, int start, int before, int count){}
}); 
```

# html - 发送格式化的电子邮件

> ID：10397691
> 
> 赞同：1
> 
> 时间：2012-05-01T12:34:03.770
> 
> 标签：html, css, sendmail

我想在某些事件上向我的用户发送电子邮件，我希望电子邮件被格式化。我的意思是看起来像一个网页。一些格式像字体、粗体一样工作，但其余的像 div 背景颜色、字段集等则不是。如何发送它们？

当我们在收件箱中收到促销邮件时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:39:31.910

并非所有这些都受支持。为了安全起见，您应该使用表格和内联样式来完成所有操作。以下是各种邮件客户端支持和不支持的列表：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

您也可以尝试从 HTML 重置模板开始，例如：[http](http://htmlemailboilerplate.com/) ://htmlemailboilerplate.com/这将解决一些问题（但当然不会添加功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:43:01.250

一般来说 - 内联 CSS 适用于大多数电子邮件工具（Outlook、Gmail、...） 避免使用 STYLE 标记。在您的网站上存储 IMGe 并使用它们的完整路径。

更多提示 - [http://groundwire.org/labs/email-publishing/using-css-and-html-in-email-newsletters](http://groundwire.org/labs/email-publishing/using-css-and-html-in-email-newsletters)

有关更多提示，您需要展示您尝试过的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:41:42.223

不要使用 div 标签只使用

```
 <table><tr><td> tags 
```

例如

```
 <table>
           <tr>
            <td style=" background-color:#FF00FF; ">do something </td>
            </tr>
      </table> 
```

**编辑**

```
 <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Your Title</title>

        </style>
        </head>

        <body>
        <table>
         <tr>
          <td style="background:url(test.png); width:200px; height:200px;">do something</td>
          </tr>
        </table>
        </body>
        </html> 
```

# python - 什么类型的项目将帮助我学习线程编程

> ID：10397695
> 
> 赞同：2
> 
> 时间：2012-05-01T12:34:16.483
> 
> 标签：python, multithreading

我想学习 Python 中的线程和多处理。我不知道该承担什么样的项目。

我希望能够处理所有相关的对象，如锁、互斥体、条件、信号量等。

请建议最适合我的项目类型。

PS 除了项目，请建议任何工具来调试/分析/负载测试我的应用程序，以便我可以衡量我的线程实现有多好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T12:44:07.567

一些想法：

1.  网络爬虫 - 有一个线程池通过队列从调度程序获取工作，下载网页并在某处返回结果。

2.  聊天服务器 - 接受来自用户的永久连接并将消息从一个发送到另一个。

3.  mp3 文件管理器 - 从 mp3 标签数据重建音乐库的结构，并在文件夹中重新组织它们。你可以让多个线程同时工作。

如果我想到任何想法，我会编辑更多想法。

编辑：由于 python 被限制为每个进程一个 CPU，无论有多少线程，如果你想并行化 CPU 消耗的东西，线程将让你无处可去，改用`multiprocessing`接口，它几乎与线程 API 相同，但将东西分派到可以使用更多 CPU 内核的子进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:40:24.200

我建议您尝试编写一个非常简单的数据库服务器。每个客户端都可以连接到服务器并在一组实体上创建、读取、更新、删除。在实现方面，服务器应该为每个客户端都有一个线程，所有客户端都操作一组全局实体，这些实体使用锁进行保护。

为了学习如何使用条件变量，服务器还应该实现一个 notify 方法，它允许在实体更改时通知客户端。

祝你好运！

**注意**：使用线程不是编写简单数据库服务器的最有效方法，但我认为这是一个自我改进的好项目。

# javascript - javascript - 如何从字符串中删除不是数字、点或减号的所有内容

> ID：10397696
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:34:29.927
> 
> 标签：javascript, regex

是否有一种快速`regex`删除字符串中不是数字、点或减号的每个字符的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:36:26.653

```
.replace(/[^\d.-]/g, ""); 
```

[**现场演示**](http://jsfiddle.net/q7rvt/)

```
var str = "43gf..--.65";
var result = str.replace(/[^\d.\-]/g, "");​ 
alert(result); // "43..--.65" 
```

[一个出色的正则表达式备忘单](http://www.addedbytes.com/download/regular-expressions-cheat-sheet-v2/png/)，可以帮助您`regex`快速学习。

# java - 我怎样才能移动一块板子？

> ID：10397699
> 
> 赞同：3
> 
> 时间：2012-05-01T12:34:44.073
> 
> 标签：java, swing, jbutton, move, actionlistener

我正在制作棋盘游戏，但无法移动它们。棋子将根据骰子结果移动。以下是我尝试做的，但它不起作用。（来自 button[].addActionListener(new ActionListener()) 注意：我使用 ImageIcon 来表示我的作品。有什么帮助吗？

```
 //Puts the player 1 piece on button 1,3,5,7,9 and player 2 piece on button 2,4,6,8,10 
    if ((btnNumber - 1) < 10) 
    { 
        if (((btnNumber - 1) % 2) == 0) 
        { 
            buttons[btnNumber - 1].setIcon(piece1); 
        } 
        else 
        { 
            buttons[btnNumber - 1].setIcon(piece2); 
        } 
    } 
    centerPanel.add(buttons[btnNumber - 1]); 
} 

frame.add(centerPanel, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:50:55.753

看起来好像有些基本的东西你还没有完全掌握。以下是一些更接近目标的建议：

1.  `button[].addActionListener`是一个无意义的陈述。您不能一次将动作侦听器添加到整个数组。也许您的意思是说`buttons[btnNumber - 1].addActionListener`并将其放在`for`循环中。
2.  `buttons[]==ImageIcon("piece1")`也是一个无意义的陈述（它甚至不应该编译）。您可以尝试`buttons[btnNumber - 1] == ImageIcon("piece1")`，尽管有一种更简单的方法可以做到这一点（#3）。
3.  不是根据它是否等于图像图标实例来确定片段的位置，为什么不使用变量`piece1Location`并且`piece2Location`随着片段的移动而保持更新。然后你会立即知道碎片在哪里，你的逻辑会简化为`if (btnNumber - 1 == piece1Location)`
4.  在 Java 中，数组从 index 开始`0`。在 Java 中使用循环处理数组的最简洁方法`for`是也开始索引变量`0`，并将比较从 更改`<=`为`<`。有了以下`for(int i = 0; i < 30; i++)`，你就不必一直说`btnNumber - 1`。
5.  您的代码组织有点混乱，模型和表示之间紧密集成。您应该寻求将处理显示棋盘和棋子（演示）的逻辑与处理游戏机制（掷骰子、移动棋子等）的逻辑分开。这将极大地帮助您维护代码并跟踪正在发生的事情。

# php - 使用 Dreamweaver 从文本字段实时计算值

> ID：10397701
> 
> 赞同：0
> 
> 时间：2012-05-01T12:34:49.847
> 
> 标签：php, dreamweaver, textfield

我有三个文本字段，即 Quantity、Quantity_per_Unit 和 Quantity_In_Pieces。如何使用 Quantity 和 Quantity_Per_Unit 的值的乘积填充 Quantity_In_Pieces 而无需刷新表单？我在实现 Javascript 的 textInputEvent 时运气不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:41:57.940

或者您可以尝试 onchange() 并将您的值发布到一个函数，该函数计算并将正确的值写入表单文件。

# c# - 与 Microsoft Access 的互操作不与用户的会话交互

> ID：10397702
> 
> 赞同：1
> 
> 时间：2012-05-01T12:34:54.017
> 
> 标签：c#, .net, ms-access, vba, interop

我将一段 VBA 代码从 .Net 注入到 Microsoft Access 数据库中。

它只是运行宏的一行代码。宏所做的只是在模块内运行一段 VBA 代码。

我遇到的问题是这一切都发生在一个新的 MSAccess 会话中，我什至看不到它，而不是用户当前打开的会话。

相反，是否有可能与用户当前的 MSAccess 会话进行交互？这样做的重点是在每次发生 .Net 事件时在 MSAccess 会话中打开一个特定的表单。我的 C# 代码如下：

```
using Microsoft.Office.Interop.Access;

var msAccess = new Application();

msAccess.OpenCurrentDatabase(@"x:\foo\bar.accdb", false);
msAccess.DoCmd.RunMacro("macCTI");
msAccess.CloseCurrentDatabase(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:58:26.033

如果您正在运行单个 Access 实例，则可以使用**[`Marshal.GetActiveObject`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getactiveobject%28v=vs.100%29.aspx)**：

```
using Microsoft.Office.Interop.Access;
using System.Runtime.InteropServices
...
try
{
    var msAccess = (Application)Marshal.GetActiveObject("Access.Application");
    msAccess.DoCmd.RunMacro("macCTI");
}
catch (COMException ex)
{
    // handle error
} 
```

或者，如果有多个实例正在运行，并且没有两个实例打开相同的数据库，则可以使用**[`Marshal.BindToMoniker`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.bindtomoniker.aspx)**：

```
var msAccess = (Application) Marshal.BindToMoniker(@"x:\foo\bar.accdb"); 
```

* * *

> ^(**注意：**这篇[Microsoft 知识库文章](http://support.microsoft.com/kb/316126)是这样说的：)
> 
> ^(COM 服务器是单用途（多实例）还是多用途（单实例）可能会影响您决定使用 GetActiveObject 来获取对该服务器的引用。因为可能会运行多个 Word、Excel 或 Microsoft Access 实例，所以特定服务器上的 GetActiveObject 可能会返回一个您没有预料到的实例。首先在 ROT 中注册的实例通常是 GetActiveObject 返回的实例。如果要获取对 Word、Excel 或 Microsoft Access 的特定运行实例的自动化引用，请使用 BindToMoniker 和在该实例中打开的文件的名称。对于像 PowerPoint 这样的多用途（单实例）服务器，这并不重要，因为自动化引用指向同一个运行实例。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:09:26.863

要不获取新的 Access 实例，您必须查看实例是否已存在。`Marshal.GetActiveObject`按照马特的建议使用：

```
Application GetAccessApplication() {
  var application = (Application) Marshal.GetActiveObject("Access.Application");
  return application ?? new Application();
} 
```

请注意，这里有一个轻微的脱节，因为您必须使用 ProgID 来获取现有的 Access 实例，但要创建一个新实例，您需要使用互操作程序集。

然后，您可以使 Access 应用程序可见：

```
var msAccess = GetAccessApplication();
msAccess.Visible = true; 
```

# java - cscope 用于 Java 和 Cpp 和 C

> ID：10397706
> 
> 赞同：0
> 
> 时间：2012-05-01T12:35:48.727
> 
> 标签：java, android, c++, c, cscope

我这样做是为了 cscope 添加 Java 功能

```
 find ./ -name *.java > cscope.files 
```

然而，当我这样做并假设我想查找一个 symbol 时，我只在 java 中获得了对该 symbol 的所有引用。我还希望它显示该项目中存在的 C 代码中的引用。不，它只显示我看的符号的 java 引用。所以现在我必须删除这个文件 cscope.files 以便我可以查看对这个符号的 c 引用。嗯，任何帮助或任何有想法的人。问候瓦沙里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:45:12.747

好吧，看起来您只是开始查找扩展名为 .java 的文件：

怎么样：

```
find . -iname '*.java' -or \\
       -iname '*.cpp' -or  \\
       -iname '*.c' -or    \\
       -iname '*.h' -or    \\
       > cscope.files 
```

# java - 如何知道 FileVisitor 何时访问最后一个文件？

> ID：10397711
> 
> 赞同：3
> 
> 时间：2012-05-01T12:36:29.850
> 
> 标签：java, file-io, java-7, java.nio.file, nio2

我需要对目录中最后访问的文件做一些事情。我如何知道当前对我的呼叫`visitFile()`是否是最后一个呼叫？

（我只想列出给定目录中的所有文件和目录。为此，我在我的实现中引入了一个`depth`字段，如果深度大于 0 ，我将返回。（然后增加.）问题是我不知道何时将 重置为 0，因为当我使用此 FileVisitor 实现为另一个目录调用 时，已经 > 0 并且它只列出给定目录。）`FileVisitor``preVisitDirectory``SKIP_SUBTREE``depth``depth``walkFileTree``depth`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:14:19.657

仅在这两种方法中保持深度怎么`preVisitDirectory`样`postVisitDirectory`？您将在 中增加`depth`和`preVisitDirectory`减少它`postVisitDirectory`。不过，您可能必须初始化`depth`为`-1`, 才能`depth == 0`在开始目录中拥有 when 。这样，您将始终拥有正确的`depth`.

编辑：如果你返回`SKIP_SIBLINGS`from `visitFile`，而不是 from `preVisitDirectory`，`postVisitDirectory`仍然会被调用！

这是一个代码示例：

```
public class Java7FileVisitorExample {

public void traverseFolder(Path start){
    try {
        Files.walkFileTree(start, new SimpleFileVisitor<Path>() {

            private int depth = -1;

            @Override
            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs)
                    throws IOException {
                System.out.println("preVisitDirectory(" + dir + ")");
                depth++;
                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs)
                    throws IOException {
                if (depth > 0) {
                    return FileVisitResult.SKIP_SIBLINGS;
                }

                System.out.println("visitFile(" + file + ", " + attrs + "): depth == " + depth);

                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult postVisitDirectory(Path dir, IOException e)
                    throws IOException {
                if (e == null) {
                    depth--;
                    System.out.println("postVisitDirectory(" + dir + ")");
                    return FileVisitResult.CONTINUE;
                } else {
                    throw e;
                }

            }
        });
    } catch (IOException ex) {
        Logger.getAnonymousLogger().throwing(getClass().getName(), 
                "traverseFolder", ex);
    }
}

public static void main(String... args) {
    Path start = Paths.get("/Book/Algorithm");
    new Java7FileVisitorExample().traverseFolder(start);
} 
```

}

# wpf - 具有动态高度子项的 WrapPanel

> ID：10397713
> 
> 赞同：0
> 
> 时间：2012-05-01T12:36:33.597
> 
> 标签：wpf, xaml, wrappanel

我有带有 2 列的 WrapPanel，作为孩子，我使用这样的东西：

```
<Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition />
    </Grid.RowDefinitions>      

    <Button HorizontalAlignment="Left" 
            Grid.Row="0" x:Name="Button" FontSize="20" Click="ShowTextblock">
        <TextBlock TextWrapping="Wrap" TextDecorations="underline" 
                   TextAlignment="Left">
            ButtonName          
        </TextBlock>
    </Button>

    <TextBlock Grid.Row=1 Visibility="Collapsed">SampleText</TextBlock>
</Grid> 
```

因此，想法是当用户单击按钮时 - 他可以在此按钮下看到文本块。像这样：

按钮 按钮
文本 按钮
按钮
按钮 按钮
按钮 按钮

但结果我有这个：

按钮按钮按钮 的 按钮 按钮
文本

那么，我该如何做我想做的事呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:42:07.107

使用 2 个独立的 StackPanel 解决了问题

# java - 为 zip 文件和清单过滤 JAR 的 Ant 任务

> ID：10397717
> 
> 赞同：1
> 
> 时间：2012-05-01T12:36:59.930
> 
> 标签：java, ant, jar

我有一个 Ant 文件，我正在其中创建一个 zip 文件和几个 JAR 文件的清单。zip 和清单都引用相同的库，但方式略有不同。如果可能的话，我想合并对文件的引用，而不是明确地写两次，并希望两个任务中的引用同步。下面是我目前正在做的一个例子。

```
<target name="zip" depends="default">
  <zip destfile="${dist.dir}/${project.name}_v${project.version}.zip">
    <zipfileset prefix="lib" dir="lib/Dom4J" includes="*.jar"/>
    <zipfileset prefix="lib" dir="lib/GSON" includes="*.jar"/>
    <zipfileset prefix="lib" dir="lib/Guava" includes="*.jar"/>
    <!-- ... A bunch more (Note I don't want everything 
             in the lib directory, just certain subfolders 
             within the lib directory which are explicitly 
             listed here like GSON. -->
    </zip>
</target>

<target name="createManifest">
   <!-- Hard code the classpath by hand and hope 
        they sync up with the zip task -->
   <property name="mfClasspath" 
             value="dom4j-1.6.1.jar gson-2.1.jar guava-11.0.2.jar" />
   <!-- Code to use the mfClasspath when creating the manifest 
        omitted for brevity -->
</target> 
```

理想情况下，我希望`fileset`在这两个任务中都可以引用某种类型的东西。请注意，清单不包含任何文件夹/路径。清单仅包含在`zip`任务中提到的目录中找到的 JAR 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:56:30.200

你说的对。您可以使用和任务`fileset`共享的共同点来完成此操作。对于该任务，将文件复制到临时位置，然后将其压缩。`zip``createManifest``zip`

对于该`createManifest`任务，使用字符替换从路径中删除文件夹。字符替换策略在“[替换 Ant 属性](https://stackoverflow.com/questions/1176071/replacing-characters-in-ant-property)中的字符”中讨论。如果你有[Ant-Contrib ，你可以使用](http://ant-contrib.sourceforge.net/)[PropertyRegex Ant task](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)来简化下面的字符替换算法。

```
<project default="all">
    <fileset id="jars" dir=".">
        <include name="lib/Dom4J/dom4j-1.6.1.jar" />
        <include name="lib/GSON/gson-2.1.jar" />
        <include name="lib/Guava/guava-11.0.2.jar" />
    </fileset>

    <target name="zip">
        <copy todir="tmp.dir" flatten="true">
            <fileset refid="jars" />
        </copy>
        <zip destfile="example.zip">
            <zipfileset dir="tmp.dir" prefix="lib" />
        </zip>
        <delete dir="tmp.dir" />
    </target>

    <target name="createManifest">
        <property name="jars.property" refid="jars" />
        <echo message="${jars.property}" file="some.tmp.file" />
        <loadfile property="mfClasspath" srcFile="some.tmp.file">
            <filterchain>
                <tokenfilter>
                    <replaceregex pattern="(?:[^;/]+/)+?([^;/]+\.jar)"
                        replace="\1" flags="g" />
                    <replacestring from=";" to=" " />
                </tokenfilter>
            </filterchain>
        </loadfile>
        <delete file="some.tmp.file" />
    </target>

    <target name="all" depends="zip, createManifest">
        <echo message="$${jars.property} = &quot;${jars.property}&quot;" />
        <echo message="$${mfClasspath} = &quot;${mfClasspath}&quot;" />
    </target>
</project> 
```

当我执行上面的 Ant 构建文件时，控制台输出了以下内容：

```
Buildfile: /workspace/StackOverflow/build.xml
zip:
      [zip] Building zip: /workspace/StackOverflow/example.zip
   [delete] Deleting directory /workspace/StackOverflow/tmp.dir
createManifest:
   [delete] Deleting: /workspace/StackOverflow/some.tmp.file
all:
     [echo] ${jars.property} = "lib/Dom4J/dom4j-1.6.1.jar;lib/GSON/gson-2.1.jar;lib/Guava/guava-11.0.2.jar"
     [echo] ${mfClasspath} = "dom4j-1.6.1.jar gson-2.1.jar guava-11.0.2.jar"
BUILD SUCCESSFUL
Total time: 675 milliseconds 
```

此外，*example.zip*包含以下条目：

*   *lib/dom4j-1.6.1.jar*
*   *lib/gson-2.1.jar*
*   *lib/guava-11.0.2.jar*

# ssl - 没有域匹配的有效 SSL

> ID：10397719
> 
> 赞同：0
> 
> 时间：2012-05-01T12:37:04.887
> 
> 标签：ssl

[像https://www.voo.st](https://www.voo.st)这样的域怎么可能使用为[https://ssl2224.cloudflare.com](https://ssl2224.cloudflare.com)颁发的 SSL 证书（检查证书）而没有浏览器给出任何警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T20:15:34.253

他们的服务器证书使用主题备用名称 (SAN) 扩展，允许使用一个 SSL 证书来保护一台具有多个名称的 Web 服务器，例如不同的 FQDN、子域名、内部 IP 地址和内部服务器名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:43:30.390

此证书适用于主题备用名称扩展中存在的以下所有名称：

```
DNS Name: ssl2224.cloudflare.com
DNS Name: *.logicsupply.es
DNS Name: voo.st
DNS Name: ctswholesalesunglasses.com
DNS Name: *.voo.st
DNS Name: *.synergistscada.com
DNS Name: synergistscada.com
DNS Name: wiihacks.com
DNS Name: *.wiihacks.com
DNS Name: vote4roberts.com
DNS Name: wallpaperweb.org
DNS Name: *.emphase.com
DNS Name: sintagoulis.gr
DNS Name: *.sintagoulis.gr
DNS Name: *.logicsupply.be
DNS Name: logicsupply.be
DNS Name: *.vote4roberts.com
DNS Name: nc-static.com
DNS Name: *.nc-static.com
DNS Name: *.ctswholesalesunglasses.com
DNS Name: logicsupply.es
DNS Name: *.wallpaperweb.org
DNS Name: emphase.com 
```

请注意，在这种情况下，`CN=`不应使用主题 DN 的 RDN，但这并不重要，因为`ssl2224.cloudflare.com`无论如何都在这两个地方。有关验证规则（或 RFC 6125），请参阅[RFC 2818 第 3.1 节：](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)

> 如果证书中存在多个给定类型的身份（例如，多个 dNSName 名称，则任何一组中的匹配都被认为是可接受的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:40:51.983

该服务器上的 SSL 证书使用`Subject Alternate Name`扩展名来提供（许多）其他被认为有效的域名的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T07:45:02.780

该证书通常称为 SAN 证书（Subject Alternative Name），也称为 UC 证书（统一通信证书）。您可以在此处了解更多详细信息 - [http://www.ssl.com/subject_alternative_name](http://www.ssl.com/subject_alternative_name)

# svn - 重命名svn中的文件夹，

> ID：10397720
> 
> 赞同：0
> 
> 时间：2012-05-01T12:37:16.000
> 
> 标签：svn, directory, rename

在 tortoise svn 中，一个名为 abc 的文件夹中有 3 个 txt 文件。当我将文件夹从 abc 重命名为 xyz 并查看显示日志时，它仅显示从 abc 复制 xyz 并删除了 abc 文件夹，虽然 xyz 内的文件已复制但未显示在日志中。

在svn中重命名文件夹时如何查看文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:24:51.037

您没有看到这三个文件中的更改，因为您没有更改这些文件。您只重命名了他们所在的目录。

你想完成什么？假设 Subversion 确实报告了重命名文件夹中的所有文件都已更改。这对你有什么帮助？我可以想象几种情况，这不是一个好主意：

*   想象一下我开始使用 Maven 的情况。在 Maven 中，我的源文件应该在文件夹下`src/main/java`。像大多数开发人员一样，我将我的 Java 源代码直接放在存储库的根目录下`source`。我现在必须将那个目录中的文件移动到`src/main/java`可以代表数百个 Java 源文件的位置。现在，我的日志不再只显示三个文件已更改，而是将列出数百个文件。

*   假设您在重命名目录时确实修改了一些文件。我如何知道由于修改了某些父目录与实际修改的文件而列出了文件的区别。人们已经抱怨日志显示了一些属性被修改的文件，而不是文件本身（当合并发生并且`svn:mergeinfo`属性被更新时，这可能会导致问题）。现在，每个文件夹重命名都会向下级联整个存储库。有时会创建一个标签，但名称并没有完全正确（REL-1.2 与 rel-1.2.0），因此人们有时会重命名标签。现在，该标签中的所有文件都会在日志中显示为已更改？

在 Python 或 Perl 中做你想做的事并不难。只需执行 a`svn log`然后当您看到某个目录在特定版本中被重命名时，`svn ls --recurse`对该文件夹执行 a 并获取其中的所有文件。

# asp.net - InvalidOperationException：无法分配空值....调用 SubmitChanges 时

> ID：10397722
> 
> 赞同：1
> 
> 时间：2012-05-01T12:37:30.663
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008, identity-column, insertonsubmit

我有一个带有标识列的表 A。当我通过visualStudio插入一行时，它失败`SubmitChanges`并出现以下错误：

```
InvalidOperationException: The null value cannot be assigned to a member with type System.Int32 which is a non-nullable value type 
```

我在谷歌上搜索了这个，我发现了一些关于同一问题的讨论。其中之一是[这里](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/726c8c17-d5cc-4696-ae90-406118311c73)。它说这是因为该过程返回一个空值。我按照那里写的做了。使用 sql trace，复制插入命令并在 sql server 中运行。它确实返回 null 但该行已正确插入！！！sql跟踪中的命令：

```
exec sp_executesql N'INSERT INTO [dbo].[MyName_Tbl]([x], [y], [z], [c], [v], [b], [n], [m], [a], [s], [d], [f], [g], [h], [j], [k], [l], [q], [w], [e], [r])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]',N'@p0 varchar(8000),@p1 varchar(8000),@p2 nvarchar(4000),@p3 nvarchar(4000),@p4 varchar(8000),@p5 nvarchar(4000),@p6 varchar(8000),@p7 varchar(8000),@p8 nvarchar(4000),@p9 nvarchar(4000),@p10 nvarchar(4000),@p11 nvarchar(4000),@p12 nvarchar(4000),@p13 varchar(8000),@p14 varchar(8000),@p15 nvarchar(4000),@p16 varchar(8000),@p17 nvarchar(4000),@p18 nvarchar(4000),@p19 nvarchar(4000),@p20 decimal(5,2)',@p0='406',@p1='Kabala',@p2=N'01/05/2012 13:47:01',@p3=N'k406/00033',@p4='406/00033',@p5=N'xxx',@p6='127.0.0.1',@p7='10',@p8=N'yyy',@p9=N'hh hh',@p10=N'0527159080',@p11=N'',@p12=N'',@p13='4580',@p14='1',@p15=N'Visa',@p16='0115',@p17=N'10',@p18=N'0',@p19=N'0232323',@p20=0 
```

你能解释一下有什么问题吗？为什么在 sql 中它正确执行而在 VS 中我得到一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:09:30.913

您收到的错误与无效的 SQL 语句无关，这解释了为什么当您直接在 SQL Server 上执行它时它可以正常工作。

该错误正在您的应用程序上引发，这仅仅是因为 SQL 语句应该返回一个包含插入表中的最后一个 id 的值的 int ，而是返回一个 NULL 值，这会使您的程序窒息，因为无法分配 null到一个 int 除非你将它声明为`Nullable<int>`(int?)

# c++ - 多线程共享连接

> ID：10397724
> 
> 赞同：4
> 
> 时间：2012-05-01T12:37:37.990
> 
> 标签：c++, mongodb

是否可以创建指针`DBClientConnection`并在多个线程中使用它？

```
connection = new DBClientConnection();
connection->connect("localhost"); 
```

然后`connection`在线程中使用。

同时访问是否安全`connection`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:25:12.100

不，DBClientConnection 不是线程安全的，不应与多个线程共享。您可能还想检查 ScopedDbConnection，它由连接池支持并在销毁时为您关闭套接字。

# jquery-ui - jQueryUI 自动完成 - 多个控件 - 一个功能

> ID：10397729
> 
> 赞同：1
> 
> 时间：2012-05-01T12:38:01.123
> 
> 标签：jquery-ui, jquery, jquery-ui-autocomplete

我正在使用 jQueryUI 自动完成，之前使用过很多次，但我现在有一个更复杂的要求。

我使用 JSON 数据源设置可变数量的自动完成字段，并希望使用 $().each 来设置这些字段。问题似乎是数据：AJAX 调用的属性始终默认为我设置的最终自动完成的值。

```
$('[id$=CheckMethod]').each(function(index) {

            if ($(this).val() === 'List') {
                fieldToSetup = ($(this).attr('id').replace('txt',''));
                fieldToSetup = left(fieldToSetup,(fieldToSetup.length - 11));
                alert(fieldToSetup);

                $('#txt' + fieldToSetup + 'CodeRoom' + escape(inRoomID)).autocomplete({
                    source: function (request, response) {
                        var src,
                            arrayData;

                        src = 'AJAXCheckCode.asp?actionType=List&GUID=' + $('#txtGUID').val();

                        $.ajax({
                            url: src,
                            datatype: 'json',
                            data: 'inCode=' + request.term + '&inType=' + $(this).attr('id'),
                            success: function (outData) {
                                arrayData = $.parseJSON(outData);
                                response($.map(arrayData, function (item) {
                                    var theLabel = (item.Notes.length > 0) ? item.TheCode + ' - ' + item.Notes : item.TheCode;
                                    return {
                                        label: theLabel,
                                        value: item.TheCode
                                    };
                                }));
                            }
                        });
                    },
                    minLength: 1,
                    open: function (event, ui) {
                        $(".ui-slider-handle ui-state-default ui-corner-all").hide();
                        $(".ui-autocomplete.ui-menu").width(400);
                        $(".ui-autocomplete.ui-menu").css('z-index', 1000);
                    },
                    close: function (event, ui) {
                        $(".ui-slider-handle ui-state-default ui-corner-all").show();
                    },
                    focus: function (event, ui) {
                        return false;
                    },
                    select: function (event, ui) {},
                    search: function (event, ui) {

                    }
                });
            }
        });//each CheckMethod 
```

此代码使用最后一个字段设置中的 inType 参数生成第一个自动完成字段。

我宁愿不为最多 4 x 6 自动完成文件编写代码，而是尝试创建一个函数来设置所有字段，这可能吗？

因此我的第一个自动完成的 AJAX URL 看起来像这样 [http://foo.com/AJAXCheckCode.asp?actionType=List&GUID=](http://foo.com/AJAXCheckCode.asp?actionType=List&GUID=) {838138D6-A329-40F1-924B-58965842ECF8}&inCode=es&inType=A3&_=1335875408670

当“inType”实际上应该是 A2，而不是 A3，它是外部 $.each() 的最后一项

希望这有点道理！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:02:09.923

最后通过向文本框中添加一个类，然后在具有给定类的任何文本框上使用 live() 来解决，而该类之前没有绑定过......很有魅力

```
$('.foo:not(.ui-autocomplete-input)').live('focus', function(){
    var fieldToReSource = ($(this).attr('id').replace('txt',''));
    fieldToReSource = left(fieldToReSource,(fieldToReSource.length - 5));

    $(this).autocomplete({
        source: function (request, response) {
            var src,
                arrayData;

            src = 'AJAXCheckCode.asp?inType=' + fieldToReSource + '&actionType=List&GUID=' + $('#txtGUID').val();
            $.ajax({
                url: src,
                datatype: 'json',
                data: 'inCode=' + request.term,
                success: function (outData) {
                    arrayData = $.parseJSON(outData);
                    response($.map(arrayData, function (item) {
                        var theLabel = (item.Notes.length > 0) ? item.TheCode + ' - ' + item.Notes : item.TheCode;
                        return {
                            label: theLabel,
                            value: item.TheCode
                        };
                    }));
                }
            });
        },
        minLength: 1,
        open: function (event, ui) {
            $(".ui-slider-handle ui-state-default ui-corner-all").hide();
            $(".ui-autocomplete.ui-menu").width(400);
            $(".ui-autocomplete.ui-menu").css('z-index', 1000);
        },
        close: function (event, ui) {
            $(".ui-slider-handle ui-state-default ui-corner-all").show();
        },
        focus: function (event, ui) {
            return false;
        },
        select: function (event, ui) {

            },
        search: function (event, ui) {

        }
    });
}); 
```

# facebook - Facebook 在网站上登录 - 如何交叉验证

> ID：10397730
> 
> 赞同：0
> 
> 时间：2012-05-01T12:38:02.013
> 
> 标签：facebook, login

我的网站如何知道用户第一次使用他们的 Facebook 帐户登录 - 这样如果他们没有向我注册，我就可以创建相同的帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:59:51.217

我认为要知道用户第一次使用 facebook 登录必须由您控制。

当用户通过 FB 登录时，您需要构建某种逻辑来将用户的 FB 信息（例如 FB UID 和电子邮件）存储在您的数据库中。此外，每次用户通过 FB 登录时，您都需要在数据库中查找用户的 UID 和电子邮件。

您可能还需要考虑用户是否决定从 FB “断开”他们的帐户/通过 FB 撤销对您的应用程序的访问。在这种情况下，您需要从数据库中删除他们的 UID 和电子邮件，因为他们已选择撤销访问权限。

如果他们决定回来，则将他们视为新用户并重复上述步骤。

您的大部分代码将检查来自`FB.getLoginStatus` [https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/的响应](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:49:39.543

您可以尝试使用 FB.Event.Subscribe 和 'auth.authResponseChange'。检查[文档](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# jquery - 如何通过 jQuery 和 css 3 创建旋转动画

> ID：10397731
> 
> 赞同：0
> 
> 时间：2012-05-01T12:38:02.397
> 
> 标签：jquery, css

我想创建一个介绍页面，例如通过 jQuery 和 CSS 3 在此站点中的内容： **[milaadesign.com](http://www.milaadesign.com/)**。
但我不知道如何实现它。

我知道我必须有一些元素，当鼠标悬停事件发生时，我必须旋转它并在其中显示图像。

我想我必须使用[**RotateY() 转换 CSS 3**](http://www.w3schools.com/css3/css3_3dtransforms.asp)和 jQuery 来为其设置动画。

您对此有何想法，您知道实现此目的的 jQuery 插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:08:05.523

我会使用这个插件：[http](http://ricostacruz.com/jquery.transit/) ://ricostacruz.com/jquery.transit/它可以满足您的一切需求。

这是一个代码示例：

```
$('.box').transition({
    perspective: '100px',
    rotateY: '180deg'
}); 
```

应该很容易定制以完全满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:02:48.017

使用[imagecube](http://jquery.com/plugins/project/imageCube)插件。

看看： http: [//keith-wood.name/imageCube.html](http://keith-wood.name/imageCube.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:02:56.417

使用 CSS3 过渡和变换可以达到预期的效果。像这样的东西可以解决问题：

```
<style>
#barContainer div
{
    height:300px;
    width:20px;

    background:#CCC;
    float:left;

    margin:10px;
    -webkit-transition: all 0.3s ease;
}
#barContainer div:hover
{
    -webkit-transform:scaleX(-1);
    margin-top:15px;
}

#barContainer #bar1:hover
{
    background:#FF0000;
}

#barContainer #bar2:hover
{
    background: #00FF00;
}

#barContainer #bar3:hover
{
    background: #0000FF;
}
</style>

<div id='barContainer'>
    <div id='bar1'></div>
    <div id='bar2'></div>
    <div id='bar3'></div>
</div> 
```

它只适用于支持 CSS3 的浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T13:04:53.677

您可以查看以下内容，以帮助您入门。

**插件：更符合您的要求** [http://dev.jonraasch.com/quickflip/examples/](http://dev.jonraasch.com/quickflip/examples/)

[http://webmuch.com/image-flip-using-jquery/](http://webmuch.com/image-flip-using-jquery/)

[http://www.w3schools.com/css3/css3_3dtransforms.asp](http://www.w3schools.com/css3/css3_3dtransforms.asp)

# c# - 为每个提供商实施电子邮件验证的正确设计模式是什么？

> ID：10397732
> 
> 赞同：2
> 
> 时间：2012-05-01T12:38:04.407
> 
> 标签：c#, design-patterns

我必须通过几个验证器来验证电子邮件。我有`EmailValidator`具有验证器列表（`RegexValidator`，`MXValidator`...）的类（），它通过该验证器验证电子邮件。 `RegexValidator`例如，每个提供者都有自己的验证器。如果它识别出这是**gmail**，那么它会检查它是否匹配特定的模式，如果它是**mygmail**，那么它会检查它是否匹配 mygmail 的模式，否则它会返回 true。 `MXValidator`将验证其他内容。

实现这一点的正确设计模式是什么？

```
public interface IValidator
{
   bool Validate(string email);
}
public class RegexValidator : IValidator
    {
        private const string EMAIL_REGEX = @"\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b";
        public bool Validate(string email)
        {
            var regex = new Regex(EMAIL_REGEX);
            var isEmailFormat regex.IsMatch(email);
            if(isEmailFormat)
            {
                 //here it should recognize the provider and check if it match the provider's pattern
            }

            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:42:05.450

[责任链。](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

一旦一个验证器发现无效模式，就返回 false。您传递了一个**有序**的验证器列表。

```
bool ValidateEmail(string email, IEnumerable<IValidator> validators, ref errorMessage)
{
    return !validators.Any(v => !v.Validate(email, ref errorMessage);
} 
```

假设

```
interface IValidator
{
    bool Validate(object value, ref errorMessage);
} 
```

* * *

# 更新

我看到这是作为另一个验证器实现的：

```
public class EmailDomainValidator : IValidator
{

   public EmailDomainValidator(string domain)
   {
      _domain = domain;
   }

   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:03:37.877

这不是您问题的直接答案，但我认为您做错了。

一封电子邮件的**真正**验证不是基于他的字符串表示，而是通过一个简单的测试。你发邮件，有人回复，邮件就不错了。否则很糟糕。

您有无数个在现实世界中无效的有效邮件地址，因为它们与邮箱无关。

也许您已经意识到这一点并且做这件事是您的工作，但如果不是，我建议您制作一个非常简单且宽松的正则表达式，例如：

```
(?<=[\w-\.@]+@)[\w-\.]+ 
```

Wich 将仅向您显示 @ 之后的部分，并且将包含许多您可以轻松测试的误报。

* * *

关于验证器的链接，我将创建一个`List<Func<string,bool>>`包含所有测试并在 foreach 循环中调用所有测试，在错误的情况下抛出并捕获异常。

编辑：事实上，带有 lambda 的 LINQ 方法要好得多。抛出异常是昂贵的。

# c# - 如何在 C# 中将 16 位“短”转换为 32 位整数？

> ID：10397734
> 
> 赞同：0
> 
> 时间：2012-05-01T12:38:09.630
> 
> 标签：c#, casting

我有一个来自硬件的 16 位有符号数字。我想将其转换为`Int32`.

当我将它转换为 a`short`时，它偶尔会在数字为负数时起作用。然而，大多数时候，我得到一个`first chance exception of type 'System.OverflowException' occurred`.

这是我的代码：

```
int M1;
M1 = (short)(INBuffer[3] << 8) + INBuffer[2]; 
```

如何在 C# 中将 16 位短整数转换为 32 位整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:42:33.013

假设`INBuffer`是一个字节数组，您可以安全地转换为 a`ushort`而不是 a `short`。这是因为如果高位字节的最高位为 1，则一旦移位，该值对于带符号的 short 来说太大了。

在您的情况下，如果您想要 a `int`，则根本不需要强制转换-位移位输出 an `int`，并且`byte`再次添加 a 会留下 an `int`-您已经在那里...

# https - RestSharp - 忽略 SSL 错误

> ID：10397736
> 
> 赞同：85
> 
> 时间：2012-05-01T12:38:48.180
> 
> 标签：https, restsharp

有什么理由可以让 RestSharp 忽略 SSL 证书中的错误？我有一个测试客户端，我连接的服务还没有有效的证书。

当我现在提出请求时，我收到错误：

```
The underlying connection was closed: Could not establish trust 
relationship for the SSL/TLS secure channel. 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-06-21T12:11:31.260

正如约翰建议的那样：

```
ServicePointManager.ServerCertificateValidationCallback +=
        (sender, certificate, chain, sslPolicyErrors) => true; 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2019-05-28T22:51:44.550

## 您可以绕过 ssl 检查

**在对象级别：**

（在[RestSharp v106.0.0](https://www.nuget.org/packages/RestSharp/106.0.0) 及更高版本中可用）

```
//bypass ssl validation check by using RestClient object
var restClient = new RestClient(baseUrl);
restClient.RemoteCertificateValidationCallback = (sender, certificate, chain, sslPolicyErrors) => true; 
```

**或者**

**在应用层面：**

```
//bypass ssl validation check globally for whole application.
ServicePointManager.ServerCertificateValidationCallback += (sender, certificate, chain, sslPolicyErrors) => true; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-12T02:17:02.600

有比修改代码更好的解决方案。理想情况下，您需要一个能够模拟您将在生产中看到的条件的解决方案，并且修改您的代码不会这样做，并且如果您在部署之前忘记将代码取出，则可能会很危险。

您将需要某种自签名证书。如果您使用的是 IIS Express，那么您已经拥有其中之一，您只需找到它。如果您还没有它，请打开 Firefox 或您喜欢的任何浏览器并访问您的网站。您应该能够从 URL 栏中查看证书信息，并且根据您的浏览器，您应该能够导出证书。

接下来，打开 MMC.exe，并添加证书管理单元。将您的证书文件导入受信任的根证书颁发机构存储中，这就是您所需要的。

现在，您的计算机作为一个整体将隐式信任它自己生成的任何证书，您无需添加代码来专门处理此问题。当您转移到生产环境时，只要您在那里安装了适当的有效证书，它将继续工作。

# f# - 将 OCaml 转换为 F#：将 OCaml open_box 和 close_box 转换为 F#

> ID：10397737
> 
> 赞同：4
> 
> 时间：2012-05-01T12:38:53.557
> 
> 标签：f#, ocaml

我正在将几个基于 OCaml 的模块转换为 F#，并从 OCaml 格式模块运行到 OCaml 打印格式化函数[open_box 和 close_box 。](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html)在阅读了打印盒的概念之后，它是有道理的，但似乎需要大量的幕后工作才能实现。

是否有功能等效的 F# 模块？

如果没有，无需转换 OCaml 格式模块的部分内容，什么是快速简单的替换功能？

编辑

[Jack在](https://stackoverflow.com/users/1197411/jack-p)[FSharpx.Compatibility.OCaml.Format.Format.fs](https://github.com/jack-pappas/FSharpx.Compatibility/blob/master/FSharpx.Compatibility.OCaml.Format/Format.fs)有一个作为 OCaml 格式一部分的版本， 我没有测试过它，但它是我目前找到的最完整的版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:38:06.980

> 是否有功能等效的 F# 模块？

不。

> 如果不是，无需转换 OCaml 格式模块的部分内容，什么是快速简单的替换功能？

无外乎`printf`。然而，我最近不得不将`Format`模块从 OCaml 翻译成 F#，只花了几个小时。

# jruby - 使用 JRuby 和 rbenv 指定 1.9 模式

> ID：10397743
> 
> 赞同：5
> 
> 时间：2012-05-01T12:39:30.210
> 
> 标签：jruby, rbenv

我有 2 个应用程序，一个需要在 1.8 模式下运行 JRuby 1.6.5，另一个需要在 1.9 模式下运行 JRuby 1.6.7。是否可以在应用程序中指定我希望一个应用程序在 1.9 模式下运行而无需显式设置 JRUBY_OPTS 环境变量。在 .rvmrc 中，我可以执行以下操作：

```
proj_1_8 version of .rvmrc
unset JRUBY_OPTS
rvm use jruby-1.6.5@proj_1_8

proj_1_9 version of .rvmrc
export JRUBY_OPTS=--1.9
rvm use jruby-1.6.7@proj_1_9 
```

无论如何，我可以在项目之间切换时自动设置模式，而无需手动设置/取消设置环境变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T14:30:52.737

正如 D3mon-1stVFW 建议的那样……

[https://github.com/sstephenson/rbenv-vars](https://github.com/sstephenson/rbenv-vars)会有所帮助。

```
$ ruby-app-dir> jruby --version
jruby 1.6.7.2 (ruby-1.8.7-p357) (2012-05-01 26e08ba) (Java HotSpot(TM) Client VM 1.6.0_33) [darwin-i386-java]

$ ruby-app-dir> ## Install rbenv-vars as indicated in Github

$ ruby-app-dir> cat .rbenv-vars
JRUBY_OPTS=--1.9

$ ruby-app-dir> jruby --version
jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-05-01 26e08ba) (Java HotSpot(TM) Client VM 1.6.0_33) [darwin-i386-java] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:59:26.043

你可以用[chruby](https://github.com/postmodern/chruby#readme)做到这一点。

```
$ chruby jruby --1.9
$ jruby --version
jruby 1.7.0 (1.9.3p203) 2012-10-22 ff1ebbe on OpenJDK 64-Bit Server VM 1.7.0_09-icedtea-mockbuild_2012_10_17_15_53-b00 [linux-amd64]
$ chruby jruby --1.8
jruby 1.7.0 (ruby-1.8.7p370) 2012-10-22 ff1ebbe on OpenJDK 64-Bit Server VM 1.7.0_09-icedtea-mockbuild_2012_10_17_15_53-b00 [linux-amd64] 
```

# javascript - javascript 不会执行 - 只显示代码

> ID：10397745
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:39:38.207
> 
> 标签：javascript, html

我试图在我的浏览器中执行一个 javascript 文件，但代码显示并没有实际执行。我正在使用 firefox，并确保启用了 javascript。我尝试使用 .js 扩展名和 .shtml 并且都只显示代码。该文件位于我的 apache htdocs 文件夹中，版本为 2.2。

我正在尝试运行这个 hello world 代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
 "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<script type="text/javascript" src="helloworld.js"></script>
</head>
<body>
<p id="hello"></p>
</body>
</html> 
```

这是javascript

```
document.getElementById('hello').innerHTML = 'hello world'; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:47:41.700

您没有 ID 为 的元素`ex`。

使用您显示的 HTML，您的行应该是：

```
document.getElementById('hello').innerHTML = 'hello world'; 
```

现在看到该`<p>`标签具有`id="hello"`- 调用如何`getElementById('ex')`能够找到它？

* * *

**编辑**

工作[JSFiddle 示例](http://jsfiddle.net/5Uz8b/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:13:37.183

尝试这样的事情

```
 <html>
        <head>
        <script type="text/javascript" src="helloworld.js"></script>
        </head>
        <body  onload="onload1()">
        <p id="hello"></p>
        </body>
        </html> 
```

**helloworld.js**

```
 function onload1(){
         document.getElementById('hello').innerHTML = 'hello world';
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T12:52:07.623

将上述代码另存为 .htm 或 .html。您的服务器可能未配置为使用 SSI（.shtml 扩展名）。

您说您将其保存为 .js 和 .shtml，这可能是您出错的地方。.js 文件在由浏览器直接打开时将无法正确显示，因为浏览器不适合显示 JavaScipt，因此您必须使用适用于 HTML 的文件类型。.shtml 扩展名用于 HTML，但它仅用于使用 SSI（服务器端包含）的服务器，因此如果服务器不使用 SSI，它将无法工作。

通常，当 mime 类型错误时，您会看到代码。mime 类型是服务器如何告诉浏览器它正在发送什么样的文件[http://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)。服务器发送 mime 类型，它通过查看文件扩展名或在某些情况下文件的某些部分来确定（服务器端代码也可以调整 mime 类型）。服务器将为带有 .htm 和 .html 扩展名的文件提供 HTML mime 类型，但 .js 不会具有该类型。如果服务器使用 SSI，.shtml 文件只会被赋予 HTML mime 类型。因此，当浏览器获取这些文件时，它会将它们作为纯文本进行节制。这就是您看到代码的原因。

因此，要么将扩展名更改为 .htm 或 .html，要么在服务器上启用 SSI（或确保将其配置为在该目录中工作）。

附带说明一下，您的 JS 不会做任何事情，因为没有 ID 为“ex”的元素，但这不应该产生查看代码的问题。然而，它会给你带来麻烦。

# javascript - IFRAME 与 iPad safari 有很多问题

> ID：10397746
> 
> 赞同：2
> 
> 时间：2012-05-01T12:39:41.207
> 
> 标签：javascript, html, jakarta-ee, iframe, ipad

我正在开发一个 java web 应用程序，它将通过 3G\VPN 连接使用 iPad Safari 浏览，我有一个 IFRAME，它的 SRC 是一个 servlet 的 URL，它将一个 pdf 文件发送到 IFRAM

```
<iframe src="documentviewer?docid=#{viewIncomingBean.incoming.id}" width="610px" height="5000px"></iframe> 
```

iPad Safari 上 IFRAM 的问题是：

1 - 在计算了服务器端将输出流中的 pdf 文件刷新到客户端所需的时间之后，我发现 IFRAME 需要很长时间才能呈现并且 pdf 文件在客户端加载（请查看[Using Iframes谨慎](http://www.stevesouders.com/blog/2009/06/03/using-iframes-sparingly/)）。

2 - 在 iPad Safari 上 IFRAME 无法使用常规的单指触摸方式滚动，您必须使用两根手指上下滚动 IFRAME（请查看[ipad 和 iframe 问题](http://www.lemon8.nl/ipads-and-iframe-scrolling/)）。

还有其他更好的方法可以在网页中加载 pdf 文件吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:55:10.607

我必须为我们正在开发的 ipad 网站开发一个 pdf 查看器。除了两个手指之外，我们无法使用其他东西进行滚动。

我们所做的是使用[http://mozilla.github.com/pdf.js](http://mozilla.github.com/pdf.js)

它是 pdf 文档的 javascript 渲染器。它很好用……当然，如果你不使用 IE。

另一种解决方案是使用谷歌的文档阅读器... [https://docs.google.com/viewer](https://docs.google.com/viewer)

# oracle - 从 Oracle 调用 ffmpeg api

> ID：10397749
> 
> 赞同：2
> 
> 时间：2012-05-01T12:39:53.213
> 
> 标签：oracle, ffmpeg, avi

我已经在 Linux 上安装了 ffmpeg 和 ffmpeg-devel 包。

Oracle 11g 已安装并正在运行。

数据库存储媒体文件，为了更好地流式传输，我们需要将它们转换为 AVI 格式。

为了便于集成，我们希望在数据库中进行这种转换。

现在，最简单的选择是为 ffmpeg 命令行实用程序编写一个包装器，并启用一个 PLSQL 过程来调用它。

但是，这将需要以下步骤：

1.  阅读视频 BLOB
2.  写入操作系统文件
3.  调用 ffmpeg 包装器，给出来自 (2) 的文件名和输出文件名
4.  将输出文件从 3 加载到 PLSQL 中的 BLOB

如果可能的话，我想编写一个 C 例程（使用 Oracle 外部库功能），它接受输入作为 BLOB（OciLOBLocator），调用呈现 LOB 的适当 libavformat 函数，并将返回写入 LOB（同样是 OciLOBLOcator）是 PLSQL 层然后用作 AVI 文件的内容。

这样做的另一个优点是它避免了从 Oracle 内部发出操作系统命令的不良影响。

我遇到的问题是，为 ffmpeg 提供的示例显示了对文件数据的处理，而我需要库来处理 LOB。

另一种方法是查看 Oracle 中的 OrdVideo 数据类型是否使用 setformat 和 process 进行这种转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:09:20.207

有趣的挑战。所以听起来您宁愿不必调用“ffmpeg”命令行实用程序，而是在数据库内的本机调用中利用 libavformat 和 libavcodec 库。我有这个权利吗？

我相信这些 LOBs/OciLOBLocator 东西暴露了一个用于读写的 C API？如果是这种情况，那么也许您可以基于该 API 创建一个新的 URLProtocol。URLProtocols 是 FFmpeg 处理 I/O 的方式。运行“ffmpeg -protocols”以查看所有已实现的协议。检查 libavformat/file.c 的源代码，以获取有关 URLProtocol 所需内容的简单示例——打开、读取、写入、查找、关闭和一些其他功能。

# gnuplot - 如何在单个绘图命令的 gnuplot 命令脚本中嵌入多个数据集？

> ID：10397750
> 
> 赞同：4
> 
> 时间：2012-05-01T12:39:55.570
> 
> 标签：gnuplot

我发现在 gnuplot 中可以从一个文件中获取多个曲线/数据集：

```
splot "file.dat" using 1:2:3, splot "file.dat" using 1:4:5 
```

也可以像这样在脚本中嵌入数据：

```
splot "-" using 1:2:3
 1 0 1
 1 2 3
 0.5 3 1.5 
```

但是，以下似乎不起作用：

```
splot "-" using 1:2:3, "-" using 1:4:5
 1 0 1 4 4
 1 2 3 3 4
 0.5 3 1.5 2.5 -1 
```

这是故意的，是否存在解决方法，还是根本不可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-11T11:23:38.143

**Gnuplot 5.0.1 数据块**

main.gnuplot

```
$data << EOD
 1 0.5  0.25  2  4
 2 1    1     4  8
 3 1.5  2.25  6 12
 4 2    4     8 16
 5 2.5  6.25 10 20
 6 3    9    12 24
 7 3.5 12.25 14 28
 8 4   16    16 32
 9 4.5 20.25 18 36
10 5   25    20 40
11 5.5 30.25 22 44
12 6   36    24 48
EOD

splot \
  "$data" using 1:2:3 with linespoints title "y = x/2, z = y^2", \
  "$data" using 1:4:5 with linespoints title "y = 2x,  z = 2*y" 
```

转换为 PNG：

```
gnuplot -e 'set terminal png' -e 'set output "main.png"' main.gnuplot 
```

输出：

[![在此处输入图像描述](../Images/3b14cb3d2c1fffc89cc0058d654fb9d5.png)](https://i.stack.imgur.com/fNijA.png)

Ubuntu 15.04 有[gnuplot5-x11](http://packages.ubuntu.com/vivid/gnuplot5-x11)包。

在 Ubuntu 14.04 上，您可以轻松地从源代码编译 gnuplot：

```
cvs -d:pserver:anonymous@gnuplot.cvs.sourceforge.net:/cvsroot/gnuplot login
cvs -z3 -d:pserver:anonymous@gnuplot.cvs.sourceforge.net:/cvsroot/gnuplot co -P gnuplot
cd gnuplot
cvs update -r Release_5_0_1
sudo apt-get build-dep gnuplot
sudo apt-get install lua5.2
./prepare
./configure
time make
sudo make install
gnuplot --version 
```

是的，在撰写本文时，该项目使用[CVS ！](https://en.wikipedia.org/wiki/Concurrent_Versions_System)

在 Ubuntu 18.10、gnuplot 5.2 上测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T07:14:33.447

以下脚本可以按预期与 Gnuplot 4.4 一起使用。下面附上的输出

```
set terminal png
set output 'e.png'
splot "-" using 1:2:3, "" using 1:2:3
 1 0 1 4 4
 1 2 3 3 4
 0.5 3 1.5 2.5 -1
e
 1 4 4
 1 3 4
 0.5 2.5 -1
e
set output 
```

[splot "-" 使用 1:2:3，"" 使用 1:2:3](http://i.stack.imgur.com/3VcV8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T00:05:20.623

解决方法是

```
splot "-" using 1:2:3
 1 0 1
 1 2 3
 0.5 3

splot "-" using 1:2:3
 1 4 4
 1 3 4
 0.5 2.5 -1 
```

如果可以将 5 列数据放入 plotscript，则可以将其预处理为 plotscript 中的两个 3 列数据集。

正如你所尝试的那样，我无法让它在一条线上工作。这可能是不可能的，因为

```
splot 'dat.txt' using 1:2:3, '' using 1:3:4 
```

有效，但是

```
splot '-' using 1:2:3, '' using 1:4:5
 1 0 1 4 4
 1 2 3 3 4
 0.5 3 1.5 2.5 -1 
```

才不是。

# android - OpenGL ES 2 与画布上的绘图（SurfaceView）——哪个更好？

> ID：10397754
> 
> 赞同：1
> 
> 时间：2012-05-01T12:40:37.823
> 
> 标签：android

假设我想研究制作 2d 游戏的过程，包括图形、动作等，类似于 AngryBirds。

所以我想问，我应该使用什么样的绘图方法 - 在画布（SurfaceView）上简单地绘制精灵还是我应该更好地研究使用 OpenGL ES 2 ？

您认为其中一种相对于另一种的优点和缺点是什么？

另外我正在寻找一种让精灵像物理对象一样移动的方法，我想有一些 Box2D 引擎可以做到这一点......

谢谢！;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:43:29.843

如果您想创建 2D 游戏，请使用 Canvas(SurfaceView) 而不是 OpenGL。OpenGL主要用于3D游戏，在OpenGL中实现并不容易。

# javascript - 画布图像裁剪问题。图片是不是太大了？

> ID：10397767
> 
> 赞同：1
> 
> 时间：2012-05-01T12:41:59.313
> 
> 标签：javascript, html, animation, image-processing, html5-canvas

昨天，我已经问过一个关于这个问题的问题。然而，我不知道问题是什么。今天我知道它是关于 drawImage 命令中的 sourceWidth 的：

```
context.drawImage(imageObj, sourceX, sourceY, sourceWidth,
        sourceHeight, destX, destY, destWidth, destHeight); 
```

所以我决定开一个新话题，删除旧话题。

但让我从头开始：我正在尝试在历史文档上实现自制的“缩放功能”（见下图）。它在 Firefox 中运行良好，但在任何其他浏览器中都没有。

[火狐行为](http://i.stack.imgur.com/rE9GT.jpg)

在 Chrome 或 Internet Explorer 中，它看起来像这样。缩放区域为空。

[铬行为](http://i.stack.imgur.com/VE0qV.jpg)

显示图像，如果我只是绘制它，没有任何裁剪：

```
context.drawImage(imageObj, 0, 0); 
```

但是，如果我尝试将裁剪功能（在 html5canvastutorials.com 中解释）与所有需要的值（**sourceWidth = 1800**）一起使用，我无法在画布中看到图像。有趣的是，如果我将**sourceWidth更改为****400**或更低的低值，则会绘制图像。An`imageObj.onload`不会改变任何东西，以及**原始图像大小**（例如*600x900*）或**画布宽度的**适应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:49:35.860

我已经找到了解决我的问题的方法。这是关于`sourceWidth`和 的`destX`。我认为这是一个微不足道的问题，但我不知道这种情况。这是关于以下命令：

```
context.drawImage(imageObj, sourceX, sourceY, sourceWidth,
        sourceHeight, destX, destY, destWidth, destHeight); 
```

您必须确保`imageWidth - destX = sourceWidth`，如果 sourceWidth 更大，Chrome、IE ... 不会绘制您的图像。我不知道为什么 Firefox 可以应付它。

这是一个数值示例： `imageWidth = 1024`，您要切断左侧的 200px，所以`destX = 200`和`sourceWidth < 824`。

# ruby - 根据 ruby 中的出现次数对数组进行排序

> ID：10397769
> 
> 赞同：0
> 
> 时间：2012-05-01T12:42:06.870
> 
> 标签：ruby, arrays, sorting

我希望这个整数数组根据它的出现次数以正确的顺序排序。

```
question = [[1, 7, 8, 9, 10, 11, 12, 19, 20, 21, 31, 32, 34, 35, 36, 37, 38, 39, 40, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 129, 132, 133, 134, 135, 136, 139], [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 21, 22, 23, 24, 25, 26, 27, 29, 31, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 129, 130, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141], [30], [77]] 

question.flatten.uniq.size = 90

answer = sort_it(question)

answer = [77, 68, 8, 9, 10, 11, 12, 19, 20, 21, 31, 139, 34, 35, 36, 37, 38, 39, 40, 42, 43, 44, 135, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 136, 66, 67, 7, 70, 71, 72, 73, 74, 75, 76, 1, 78, 79, 81, 129, 132, 133, 134, 45, 65, 32, 2, 3, 4, 5, 6, 13, 14, 15, 16, 17, 22, 23, 24, 25, 26, 27, 29, 33, 41, 69, 130, 137, 138, 140, 141, 30]

answer.uniq.size = 90 
```

这是我的 Ruby 代码：

```
def sort_it(actual)
        join=[]
        buffer = actual.dup 
        final = [ ]

                (actual.size-2).downto(0) {|j|
                join.unshift(actual.map{|i| i }.inject(:"&"))
                actual.pop
                }
        ordered_join =  join.reverse.flatten
        final << ordered_join
        final << buffer.flatten - ordered_join

        final.flatten
end 
```

这种方法可以吗？有没有更有效的方法？

## 编辑：

*作为对 tokland 和 niklas 的致敬，编辑了之前顺序错误的答案。谢谢！*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:49:03.570

使用`group_by`：

```
question.flatten.group_by{|x| x}.sort_by{|k, v| -v.size}.map(&:first) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:36:53.350

用 sort_by{|k, v| 回答 -v.size} 每次比较元素时调用 v.size。更有效的解决方案：

```
question.flatten.group_by(&:to_i).map{|k,v| [k, -v.size]}.sort_by(&:last).map(&:first) 
```

虽然数组的大小很容易获得，但它是不必要的开销（O（排序算法）而不是 O（n）），而且这个习惯用法对于更昂贵的操作无论如何都很好记住

# html - 如何在 iOS 中将图像嵌入到电子邮件的 HTML 正文中

> ID：10397775
> 
> 赞同：7
> 
> 时间：2012-05-01T12:42:47.767
> 
> 标签：html, ios, email, mfmailcomposeviewcontroller, email-attachments

我正在尝试在从 iPad 发送的 HTML 电子邮件的正文中包含图像。这似乎是不可能的。我曾尝试使用 CID 方法，但似乎在 iOS 中无法获取/设置附件的 CID。

我也尝试将图像嵌入到`src="data:image/png;base64, blahblahblah"`. 当您撰写邮件时，它似乎可以工作，但在收到邮件时什么也没有出现。

有任何想法吗？

**更多详细信息**：我们不是在寻找将 JPEG/PNG 附加在电子邮件底部的解决方案。这很容易做到`[composer addAttachmentData:mimeType:fileName:]`。

我们正在寻找一种解决方案，将图像**内嵌**在 HTML 格式的电子邮件中。您可以在该 IMG 标签周围加上一个链接，这样当收件人单击 IMG 时，他/她将被链接到应用程序的 iTunes 页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:23:52.613

[从github](https://github.com/l4u/NSData-Base64)下载`NSData+base64`类别。

然后执行以下操作：

```
NSData *imageData = [NSData dataWithContentsOfFile:pathInDocumentDirectory(imagePath)];
NSString *base64String = [imageData base64EncodedString];
NSString *imageString = [NSString stringWithFormat:@"data:image/png;base64,%@", base64String]; 
```

最后，将 放在`imageString`您希望此图像出现的 HTML 正文中。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:45:12.317

来自[iphone 电子邮件附件](https://stackoverflow.com/questions/1389655/iphone-email-attachment)

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"Hello"];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:@"first@example.com"]; 
NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com",           @"third@example.com", nil]; 
NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"]; 

[picker setToRecipients:toRecipients];
[picker setCcRecipients:ccRecipients];  
[picker setBccRecipients:bccRecipients];

// Attach an image to the email
NSString *path = [[NSBundle mainBundle] pathForResource:@"rainy" ofType:@"png"];
NSData *myData = [NSData dataWithContentsOfFile:path];
[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"rainy"];

// Fill out the email body text
NSString *emailBody = @"It is raining";
[picker setMessageBody:emailBody isHTML:NO];

[self presentModalViewController:picker animated:YES];
[picker release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T21:50:43.653

要在 gmail 中显示图像，您可以：

```
MFMailComposeViewController *mailCont = [[MFMailComposeViewController alloc] init];
    mailCont.mailComposeDelegate = self; 

    NSMutableString *emailBody = [[NSMutableString alloc] initWithCapacity:20];

    NSString *linkimg = @"https://idrivethru.com/iDriveThruWeb/faces/javax.faces.resource/idrivethru_logo.png?ln=images";

    //Add the image
    [emailBody appendFormat:@"<p><a href = 'https://idrivethru.com/'> <img src='%@' align='centre' alt='iDriveThru.com'> </a></p><br/>", linkimg];

    [emailBody appendString:@"<p>This is an email with an embeded image right <b>above</b> this text</p>"];

    //NSLog(@"%@",emailBody);

    [mailCont setMessageBody:emailBody isHTML:YES];
    [self presentViewController:mailCont animated:YES completion:nil]; 
```

# iphone - 使用 zxing for iPhone 读取一维条码

> ID：10397778
> 
> 赞同：0
> 
> 时间：2012-05-01T12:43:08.400
> 
> 标签：iphone, barcode, zxing, barcode-scanner

有没有办法使用 zxing for iPhone 读取一维条码？zxing 的主页说它只能用于二维码，但有人将一维条码扫描移植到 iPhone 或 C++ 上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:18:21.293

请参阅*为什么一维码在 iOS 设备上不起作用？*在[常见问题解答](http://code.google.com/p/zxing/wiki/FrequentlyAskedQuestions)中（我写的是 FWIW）。

有 1D 解码器的端口，但虽然有很多兴趣，但没有人加紧维护它们。它们在 Java 解码器方面已经过时，这表明它们在 ZXing 测试集上的准确性较低。

# arrays - 将矩阵转换为排序列表 google docs/spreadsheets

> ID：10397784
> 
> 赞同：0
> 
> 时间：2012-05-01T12:43:43.463
> 
> 标签：arrays, matrix, google-sheets

我通过对谷歌文档/电子表格中的调查响应进行 =pearson( 分析，创建了一个大型矩阵，并希望将其转换为排序列表。

该矩阵在第 2 行和 b 列中有标签（调查问题）。每个相交的单元格都有值。这是公式的样子。

=pearson(FILTER(Pc!$C$2:$AW$999;Pc!$C$2:$AW$2=C$2),FILTER(Pc!$C$2:$AW$999;Pc!$C$2:$AW$2 =$B3))

这就是我想要达到的目的：

```
 a                   b                  c
Question one       question 2            correlation 
```

然后按 c 列排序很容易。

如何以这种方式从矩阵/数组中获取所有点以及标签？

理想情况下，我只能对对角线以下的点执行此操作，因为上面当然有骗子..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:20:57.227

我想我找到了将标题组合放在单个列中的解决方案。它涉及一系列辅助列，但有效。

假设我们有一列，列上所有唯一的标题`A`。我假设它是 6 个值。因此，在`B1`我们粘贴的单元格上：

```
=ArrayFormula(join(";";A1&","&A2:A$6)) 
```

然后将其复制到`B5`. 在`C1`我们加入所有内容并拆分为单个列：

```
=transpose(split(join(";";B1:B5);";")) 
```

如果需要，我们可以再次将组合拆分为两列`D1`

```
=ArrayFormula(split(C1:C15;",")) 
```

我不知道为什么，但是 on 的值`E1`不能正常工作，所以我只是粘贴了`=A2`

使用这些列，您可以轻松地`Pearson-Filter`再次使用您的技巧，将它们全部放在一个列中。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-12T18:17:43.100

也许这样的事情会有所帮助：

=ArrayFormula(转置(拆分(连接(转置(C2:AW999)&char(9)), char(9))))

（C2:AW999 是你的数据范围）

# ruby - 访问 li 元素数组中的 div 元素

> ID：10397787
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:43:55.497
> 
> 标签：ruby, watir, watir-webdriver

我正在尝试访问 li 数组中的 div

```
<ul>
<li class="views-row views-row-1 views-row-odd views-row-first">
 <div class="news-item">
</li>
<li class="views-row views-row-2 views-row-even">
<li class="views-row views-row-3 views-row-odd">
 <div class="news-item">
  <div class="image">
  <div class="details with-image">
    <h2>
    <p class="standfirst">The best two-seat </p>
  <div class="meta">
    <div class="pub-date">26 April 2012</div>
    <div class="topic-bar clearfix">
       <div class="topic car_review">review</div>
</div>
</div>
</div>
</div>
</li> 
```

我正在尝试访问“div class="topic car_review">汽车评论”并获取其文本。我专门使用该文本的原因是，根据文本的内容，它会输入特定的步骤。

我正在使用的代码是

```
@topic = @browser.li(:class => /views-row-#{x}/).div(:class,'news-item').div(:class,'details').div(:class,'meta').div(:class,/topic /).text 
```

该脚本之前运行良好，但突然停止工作，无法获取 div(:class,'news-item')。

我得到的错误信息是

```
unable to locate element, using {:class=>"news-item", :tag_name=>"div"} (Watir::Exception::UnknownObjectException) 
```

我尝试了 div(:class => /news-/) 但仍然无法找到该元素

我真的卡住了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:15:28.723

我假设当你在做`li(:class => /views-row-#{x}/)`的时候， x 意味着你正在遍历所有行？如果是这样，那么您的脚本将失败，`row-2`因为它不包含`news-item`div（导致您看到的错误）。

如果只有这些 'topic car_review' div 标签之一，您可以这样做：

```
@topic = @browser.div(:class, 'topic car_review') 
```

**更新**- 遍历每个 LI：

如果您需要遍历每个 LI，那么您可以这样做：

```
@browser.lis.each do |li|
    @topic = li.div(:class, 'topic car_review').text
end 
```

# php - 如何在浮点数中保留两位数（PHP）

> ID：10397788
> 
> 赞同：-5
> 
> 时间：2012-05-01T12:44:00.077
> 
> 标签：php, scientific-notation

如何在PHP中使数字`3.0000000054978E+38`喜欢`3.00`？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:51:44.963

你不能用`round`它来解决这个问题，因为它是科学计数法中的数字。但是，您可以使用`substr`：

```
$i = 3.0000000054978E+38;
$i = substr($i, 0, 2); // $i is now the string 3.00
echo( number_format($i+1,2) );  // Will output 4.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:01:54.037

如果您正在寻找以格式化方式输出的一小部分数字：

```
$number = 3.0000000054978E+38;
printf('%.2f', $number / 1E+38); # 3.00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:46:12.260

你可以只使用[`round`](http://us.php.net/manual/en/function.round.php), 就像在`round($floating_number, 2)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T12:49:30.853

`sprintf()`如果需要，始终为您提供指定的小数位数。

```
sprintf('%0.2f', 3.0000000); 
```

会显示`3.00`，如果你回应它。

# python - Python - subprocess.check_call 给出了 CalledProcessError 异常

> ID：10397791
> 
> 赞同：1
> 
> 时间：2012-05-01T12:44:06.457
> 
> 标签：python, exception, subprocess

我想调用一个子进程来备份mysql数据库。在终端中运行良好的命令行（并创建了一个名为 mydatabase.sql 的文件）是：

```
 mysqldump -uroot -ppassword --add-drop-database --database mydatabase > mydatabase.sql 
```

现在由python运行的代码来调用一个子进程：

```
 args = shlex.split('mysqldump -uroot -ppassword --add-drop-database --database mydatabase > mydatabase.sql')
    subprocess.check_call(args) 
```

引发异常（未创建文件）：

```
 Traceback (most recent call last):
      File "<pyshell#29>", line 1, in <module>
        subprocess.check_call(args)
      File "/usr/lib/python3.2/subprocess.py", line 485, in check_call
        raise CalledProcessError(retcode, cmd)
    subprocess.CalledProcessError: Command '['mysqldump', >'-uroot', '-ppassword', '--add-drop-database', '--database', >'mydatabase', '>', 'mydatabase.sql']' returned non-zero exit status 2 
```

我尝试了不同的方法，但它们仍然不起作用：

```
 args = shlex.split('/opt/lampp/bin/mysqldump -uroot -ppassword --add-drop-database --database mydatabase > mydatabase.sql')
    subprocess.check_call(args) 
```

或者

```
 args = shlex.split('/opt/lampp/bin/mysqldump -uroot -ppassword --add-drop-database --database mydatabase > mydatabase.sql')
    subprocess.Popen(args) 
```

我也尝试使用 shell=True 或 shell=False。在这两种情况下，它们仍然不起作用。

我已经阅读了文档，谷歌搜索了我的问题的答案，但我不知道如何展示我的问题。stackoverflow 可能是我最后的希望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:59:06.667

这里的问题是您重定向输出的方式。

*   `">"`如果您将命令作为参数列表传递，则`>`无论您使用`shell=True`或`shell=False`
*   如果您将命令作为单个字符串传递，那么它应该可以工作，但前提是您有`shell=True`.
*   做你想做的最好的方法是将输出直接从python重定向到一个文件：

    ```
    args = shlex.split('/opt/lampp/bin/mysqldump -uroot -ppassword --add-drop-database --database mydatabase')
    output = open("mydatabase.sql", "w")
    subprocess.Popen(args, stdout=output) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:53:58.357

问题可能是外壳重定向。如果你运行`shell=True`不要使用`shlex.split`. 换句话说，尝试：

```
args = '/opt/lampp/bin/mysqldump -uroot -ppassword --add-drop-database --database mydatabase > mydatabase.sql'
subprocess.Popen(args,shell=True) 
```

当然，更安全的解决方案是删除 shell 重定向，在参数上使用 shlex.split（不带`shell=True`），并用于`subprocess.PIPE`捕获输出（然后您可以将其发送到文件或在程序中做任何您想做的事情）

例如：

```
args = '/opt/lampp/bin/mysqldump -uroot -ppassword --add-drop-database --database mydatabase'
p=psubprocess.Popen(shlex.split(args),shell=False,stdout=subprocess.PIPE)
p.wait()
returnvalue=p.returncode
data=p.stdout.read()
with open('mydatabase.sql','w') as f:
   f.write(data)

... 
```

如果您不想对程序中的数据做任何事情，您可以更轻松地进行重定向[，如 mata 所述](https://stackoverflow.com/a/10397947/635608)。

# sql - 如何提高 ALTER TABLE 的性能？[丢弃整理]

> ID：10397793
> 
> 赞同：1
> 
> 时间：2012-05-01T12:44:07.510
> 
> 标签：sql, sql-server, performance, tsql, sql-server-2005

我有一个包含 75 万条记录的“巨大”表。我需要更改此表的某些列。我有以下陈述：

```
ALTER TABLE [MyTable] ALTER COLUMN [MyFirstField]  NTEXT          NULL
ALTER TABLE [MyTable] ALTER COLUMN [MySecondField] NVARCHAR (50)  NULL 
```

*   **MyFirstField**从`NTEXT COLLATE SQL_Latin1_General_CP1_CI_AS NULL`
*   **MySecondField**从`NVARCHAR (50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL`

转换所有记录需要相当长的时间。任何想法如何加快这个过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:47:40.097

你不能加快速度。

每一列的文本值都需要从选定的排序规则转换为默认排序规则。这需要时间。

# android - SearchWidget 没有调用 onSearchRequested()

> ID：10397797
> 
> 赞同：0
> 
> 时间：2012-05-01T12:44:17.737
> 
> 标签：android, android-widget, android-view, android-actionbar, android-searchmanager

我正在尝试`SearchWidget`正确实施，但我面临一些问题。我重写`onSearchRequested()`是因为我需要将一些信息从调用活动传递给`Activity`执行查询的活动。

它只有在`SearchWidget`失去“焦点”时才会发生。这就是我对“focused”的意思`SearchWidget`：
![重点搜索小部件](../Images/1a5daddff826f86d4dac3ca3c76fdb19.png)
如果我在不接触外部的情况下进行搜索`SearchWidget`（因此使用 focuss `SearchWidget`）`onSearchRequested()`被正确调用。 **但是**当我触摸外部`SearchWidget`并且它失去焦点时，当我执行搜索时，`onSearchRequested()`不会调用该方法。
![SearchWidget 没有焦点](../Images/b3d196c03f2a8f9410760e900485ac46.png)

这是代码`onSearchRequested`：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.actionbar_mainscreen, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    mSearchItem = menu.findItem(R.id.search);

    mSearchView = (SearchView) mSearchItem.getActionView();
    mSearchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    mSearchView.setIconifiedByDefault(true);

    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){
        case R.id.search:
            onSearchRequested();
            break;
        case R.id.mainscreen_favorites:
            Intent intent = new Intent(this, FavoritesActivity.class);
            startActivity(intent);
            break;
    }
    return true;
}

@Override
public boolean onSearchRequested() {
    Bundle appData = new Bundle();
    appData.putInt(Constants.EXTRA_CATEGORY, index);
    startSearch(null, false, appData, false);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:23:45.047

最后，我使用普通 Intent 从 SearchView.OnQueryTextListener 开始了我的搜索活动。

```
searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
    @Override
    public boolean onQueryTextSubmit(String query) {
      startSearch(query);
      return true;
    }

    @Override
    public boolean onQueryTextChange(final String s) {
      return false;
    }
  });

  private void startSearch(final String query) {
    // Doesn't call through onSearchRequest
    Intent intent = new Intent(this, SearchActivity.class);
    intent.putExtra(Keys.CATALOG, getCatalogID());
    intent.putExtra(Keys.HAS_ARTICLES, hasArticles);
    intent.putExtra(Keys.QUERY, query);
    startActivity(intent);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:41:40.727

尝试添加：

```
mSearchView.setFocusable(false); 
```

# javascript - 这是什么在这里（函数文字）

> ID：10397801
> 
> 赞同：2
> 
> 时间：2012-05-01T12:44:49.350
> 
> 标签：javascript

我有下面的结构，我不太了解输出。

```
var asker = {
    answer: "Its raining...",
    askQuestion: function(answered){
        console.log("Opps..." + this.answer);
        answered();
    }
}

//function literal
var debunker = function(){

    answer = "Its cloudy...";

    debunk = function(){
        console.log(this); 
        console.log("No way! The real answer is:" + this.answer);
    };

    return {
        debunk: debunk
    };

}();

asker.askQuestion(debunker.debunk); 
```

它给了我这些输出

```
Opps...Its raining...
DOMWindow
No way! The real answer is:Its cloudy... 
```

得到的`debunker.debunk`答案是`'Its cloudy'`。但是`this`，在 debunk 函数中引用了对象，`DOMWindow`那么如何`this.answer`获取`Its cloudy`它所引用的`window`对象呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T12:48:01.980

原因是因为`answer`也是对象*的*属性`window`。当没有`var`关键字定义时，它会附加到窗口。使用`var`关键字，它是定义它的函数的私有属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T12:50:28.997

`answer`是一个全局变量，因为你没有用`var`. 这将其置于`DOMWindow`.

`this`是`DOMWindow`，所以`this.answer`是“多云”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T12:48:50.207

读入[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)的介绍。`answered()`您在全局上下文中执行该函数。由于`answer`（在您的 debunker 构造函数中）不是私有变量，它将是全局`window`对象的属性。

# android - 如何检测手机倾斜？

> ID：10397809
> 
> 赞同：3
> 
> 时间：2012-05-01T12:45:45.460
> 
> 标签：android, rotation, tilt

如何确定手机方向在一个平面上的角度？

现在我通过 SensorManager 实现了：

```
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mOrientation = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);

...

public void onSensorChanged(SensorEvent event) {
    xy_angle = event.values[0]; 
    xz_angle = event.values[1]; 
    zy_angle = event.values[2]; 
```

在这里我得到不同的角度，但我只需要一个角度，随着手机的旋转而变化，同时沿着蓝线行驶。

如何计算或如何获得这个角度？

![http://i.stack.imgur.com/kCElj.jpg](../Images/f8cbb303449bb8c088ebada730e2f376.png)

[如何将 SensorManager.getOrientation 用于“我的纸飞机”等倾斜控件？](https://stackoverflow.com/questions/4576493/how-can-i-use-sensormanager-getorientation-for-tilt-controls-like-my-paper-plan)- 类似的问题在这里，但我不明白作者如何解决他的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:51:18.810

你需要的是[`SensorManager.getOrientation()`](http://developer.android.com/reference/android/hardware/SensorManager.html#getOrientation%28float%5B%5D,%20float%5B%5D%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-10T21:49:31.717

I see that this post is a bit old, so maybe it's been answered by now, but `Sensor.TYPE_ORIENTATION` is now deprecated in favor of [SensorManager.getOrientation()](http://developer.android.com/reference/android/hardware/SensorManager.html).

I've done a full writeup of essentially what you're looking for here: [http://blog.samsandberg.com/2015/05/10/tilt-for-android/](http://blog.samsandberg.com/2015/05/10/tilt-for-android/)

Hope it helps someone looking for the same thing!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:15:10.340

该问题的作者通过切换参数顺序解决了他的问题：

```
 if (SensorManager.getRotationMatrix(m_rotationMatrix, null,
                                    m_lastMagFields, m_lastAccels)) { 
```

至：

```
if (SensorManager.getRotationMatrix(m_rotationMatrix, null,
                                m_lastAccels, m_lastMagFields)) { 
```

# opengl - OpenGL 混合：相同的透明对象

> ID：10397810
> 
> 赞同：0
> 
> 时间：2012-05-01T12:45:58.060
> 
> 标签：opengl, blending

我在一个 OpenGL 项目中。

我有一些由相同透明材料（例如 alpha = 0.2）制成的对象（仅说 2 个）。两个物体相交。

如何使交叉部分看起来与其他部分相同（没有边框，没有不同的颜色），所以太对象看起来像一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:02:56.973

我不确定你是否真的想这样做。无论如何我都会回答，但首先让我告诉你为什么我认为你不想要那个。

在现实生活中，想象一个红色的彩色玻璃和一个蓝色的玻璃。如果您以它们部分重叠的方式查看它们，则重叠部分显然具有不同的颜色（紫色）。如果你拿到 2 个红色眼镜并看着它们，使它们重叠，重叠的部分更红。这正是您的 OpenGL 程序中正在发生的事情。

现在一般来说，当您有多个透明对象时，您需要根据它们与您眼睛的距离和您所看的方向对它们进行排序。然后你从最远到最近绘制它们。这本身并不是一个简单的任务！想想两个交叉的物体。

实现您想要的一种方法是对透明对象进行排序，但从最近的对象绘制到最远的对象。这样，您实际上不允许对同一像素进行两次透明处理。不是一个好主意。

另一种方法是对这些特殊类型的对象做一些非常具体的事情。我说特殊类型，因为显然它们中的两个重叠并没有做出任何改变！您可以通过绘制到模板缓冲区而不是绘制缓冲区来做您想做的事情，然后在整个屏幕上绘制一个具有您想要的颜色的矩形，但仅匹配该模板。

# php - 如何在 c++ boost 中编写这些正则表达式？

> ID：10397811
> 
> 赞同：1
> 
> 时间：2012-05-01T12:46:03.240
> 
> 标签：php, c++, regex, boost, boost-regex

我想在一个字符串中做两个替换，我知道如何在 php 中编写正则表达式，目前我不熟悉 c++ boost。

```
// Replace all doubled-up <BR> tags with <P> tags, and remove fonts.
    $string = preg_replace("/<br\/?>[ \r\n\s]*<br\/?>/i", "</p><p>", $string);
    $string = preg_replace("/<\/?font[^>]*>/i", "", $string); 
```

如何用 c++ boost 编写代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:47:30.627

所有关于使用正则表达式解析 HTML 的常见[警告](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)都适用。

```
#include <boost/regex.hpp>
#include <iostream>
#include <string>

int main()
{
  boost::regex double_br("<br/?>[ \\r\\n\\s]*<br/?>", boost::regex::icase);
  boost::regex fonts("</?font[^>]*>", boost::regex::icase);

  std::string cases[] = {
    "foo<br><br>bar",
    "one<br/><br>two",
    "a<br>   <br/>b",
    "a<br><br>c<br/><br/>d",
    "<font attr=\"value\">w00t!</font>",
    "<font attr=\"value\">hello</font><font>bye</font>",
    ""
  };

  for (std::string *s = cases; *s != ""; ++s) {
    std::cout << *s << ":\n";

    std::string result;
    result = boost::regex_replace(*s, double_br, "</p><p>");
    result = boost::regex_replace(result, fonts, "");

    std::cout << "  - [" << result << "]\n";
  }

  return 0;
} 
```

输出：

```
foo<br><br>酒吧：
  - [foo</p><p>bar]
一<br/><br>二：
  - [一个</p><p>两个]
一个<br> <br/>b：
  - [a</p><p>b]
a<br><br>c<br/><br/>d:
  - [a</p><p>c</p><p>d]
<font attr="value">w00t!</font>:
  - [w00t！]
<font attr="value">你好</font><font>再见</font>：
  - [你好再见]
```

# java - 从 Eclipse 启动 Tomcat 期间的神秘异常

> ID：10397817
> 
> 赞同：1
> 
> 时间：2012-05-01T12:46:29.790
> 
> 标签：java, eclipse, exception, tomcat, logging

相关：[无法从 Eclipse 中查看 Tomcat 启动期间引发的异常](https://stackoverflow.com/questions/10387940/cannot-view-exceptions-thrown-during-tomcat-startup-from-eclipse)

我有 Eclipse 设置来强制中断`NoClassDefError`异常。当我通过 Eclipse 启动 tomcat 并部署了我的 web 应用程序时，我在这种异常类型上得到了 5-6 次强制中断，但实际上没有任何内容输出到 catalina.out 和我的 log4j 日志文件。我已经为 log4j 尝试了几种不同的日志级别（错误、警告、调试），但我找不到有关这些异常发生的任何信息。事实上，我知道它们发生的唯一原因是 Eclipse 调试器正在破坏它们。

从概念上讲，我理解`NoClassDefError`异常表示什么，但我无法获得哪个类加载失败，因为我在任何地方都找不到堆栈跟踪！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:54:10.947

您对 Tomcat 日志文件夹有写权限吗？

另外，请确保您的所有库都将在您的战争中结束。左键单击您的项目，转到“属性”。转到部署程序集。`/WEB-INF/lib`确保将创建的战争中的所有库转到文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:34:44.947

我从来没有弄清楚这一点。我只是忽略了异常，一切似乎都很好。当我有更多时间时，我会更深入地挖掘。

# java - 在javascript中使用servlet

> ID：10397818
> 
> 赞同：0
> 
> 时间：2012-05-01T12:46:30.617
> 
> 标签：java, javascript, servlets, xmlhttprequest

我想在 javascript 中使用 java servlet。目前我在 javascript 中使用此代码：

```
var req = new XMLHttpRequest();
req.open("GET", "http://localhost:8080/FPvisualizer/test.java" + "?action=test", true);
req.send(null);
req.onreadystatechange = function() {processRequest()}; 

function processRequest() {
    if (req.readyState == 4) {
        if (req.status == 200) {
            document.getElementById("target").innerHTML = req.responseText;
        }
    }
} 
```

它与这个 java servlet 通信：

```
import java.io.File;
import java.util.Collections;
import java.util.List;
import java.util.Map;

public class LoadOntology2 extends HttpServlet{
    public void doGet (HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String action = request.getParameter("action");

    response.setContentType("text/xml");
    response.setHeader("Cache-Control", "no-cache");
    response.getWriter().write("<message>valid</message>");
}

} 
```

req.responseText 包含 servlet 文件的全部内容（即该文件的所有代码都显示在网页上）。有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:49:03.873

您正在请求 Java 源文件本身。您尚未编译它并将其安装在配置为针对您正在使用的 URL 执行它的服务器上。

我没有任何设置 Java Servlet 的经验，但是[Oracle 的教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnafd.html)看起来是一个很好的起点。特别是，它说[您需要一个应用程序服务器](http://docs.oracle.com/javaee/5/tutorial/doc/gexaj.html#gexab)的部分。

# matlab - 带约束的矩阵除法

> ID：10397819
> 
> 赞同：2
> 
> 时间：2012-05-01T12:46:30.760
> 
> 标签：matlab, matrix, division

如果我有一组线性方程（生成随机矩阵）：

```
2x + 4y + 6z = 4
5x + 3y + 7z = 1
9x + 7y + 3z = 6 
```

我想解决`x`，我只是`y`做`z`一个矩阵除法。但是如果我想在这个矩阵上设置一个约束，比如`x > 0`or `x = 4`，有没有办法做到这一点？

添加另一行是否正确，例如：

```
2x + 4y + 6z = 4
5x + 3y + 7z = 1
9x + 7y + 3z = 6
1x + 0y + 0z = 1 <--- 
```

有没有一种通用的方法来应用这些具有更大矩阵和更复杂系数的约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:59:40.937

在 MATLAB 中，将 lsqnonneg 用于非负约束（在所有变量上）。如果您有优化工具箱，那么您将使用 lsqlin 来解决具有不等式约束的问题，或者只有某些变量受到约束的问题。

你当然可以使用像 linprog 这样的 LP 求解器，但是如果你有 linprog，那么你也有 lsqlin！我想你甚至可以使用 quadprog 求解器，但何必呢？使用正确的工具解决问题。

至于像 fmincon 那样使用显式迭代求解器来求解它的想法，是的，你可以这样做，但你会得到一个不太精确的结果，需要更多时间来求解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:55:11.040

是的，您应该研究拉格朗日乘数或单纯形法，看看它是如何完成的。

# java - 如何获取 HttpURLConnection 的 ResponseCode 的描述？

> ID：10397820
> 
> 赞同：2
> 
> 时间：2012-05-01T12:46:34.320
> 
> 标签：java, android, httpurlconnection, http-response-codes

调用以下代码后，`getResponseCode()`返回远程HTTP服务器返回的响应码。此代码有一个简短的描述。如何在 Android 中以编程方式获取其描述？

```
URL myurl = new URL(url);
URLConnection connection = myurl.openConnection();
HttpURLConnection httpConnection = (HttpURLConnection) connection;
int responseCode = httpConnection.getResponseCode(); 
```

**更新**

`httpConnection.getResponseMessage()`有时返回“未找到”，而 responseCode 有效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:50:39.670

试试`getResponseMessage()`，它会是一条你可能感兴趣的字符串消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:55:48.917

文档说：

> 获取与响应代码一起从服务器返回的 HTTP 响应消息（如果有）。>来自以下响应：HTTP/1.0 200 OK HTTP/1.0 404 Not Found 分别提取字符串“OK”和“Not Found”。如果无法从响应中识别出任何内容（结果不是有效的 HTTP），则返回 null。

也许您的服务器没有消息？您还可以编写自己的方法，该方法将返回代码描述。例如

```
 public static String getMessage(int code) {
        switch(code) {
            case 200: return "OK";
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T12:48:27.220

尝试

```
httpConnection.getResponseMessage() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:53:01.997

非常欢迎您查看包含您正在寻找的内容的[HTTP/1.1 RFC 。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

# javascript - jQuery 选择器问题

> ID：10397824
> 
> 赞同：0
> 
> 时间：2012-05-01T12:46:58.357
> 
> 标签：javascript, jquery

我正在将我的`live()`函数迁移到`on()`jQuery 中的方法，但是我遇到了一个我不确定的小问题，非常感谢一些建议。

正如 jQuery 文档所述，这是：

```
$('.test').live({
    click: function(){
        alert('.test Clicked')
    }
}); 
```

被这个取代：

```
$(document).on('click','.test',function(){
    alert('.test Clicked')
}); 
```

**以上工作没有问题（据我所知）**。但是，如果我的选择器更具体，如下所示，我无法让它工作：

```
$(document).on('click',$('.test',element),function(){
    alert('.test Clicked')
}); 
```

不能将选择器放入第二个参数中吗？如果没有，我怎样才能在不分配“id”的情况下解决这个问题？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:48:33.140

我希望这行代码如下：

```
$(element).on('click','.test',function(){
    alert('.test Clicked')
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T12:49:23.483

on() 方法只接受文本选择器。on() 方法的全部目的是让您可以委托事件，因此您不需要提供选择器上下文。如果你想将一个事件委托给元素内部的 .test ，那么你可以这样做：

```
$(element).on('click','.test',function() {
   alert('.test clicked');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:49:00.133

```
$(document).find(element).on('click','.test',function(){
    alert('.test Clicked')
}); 
```

可以删除文档 - 但您*应该*了解这个概念。

```
xxx.subelement.subsubelement 
```

# php - 分隔的txt文件到数组？然后更新mysql PHP

> ID：10397825
> 
> 赞同：0
> 
> 时间：2012-05-01T12:47:08.143
> 
> 标签：php, delimited

我如何去读取一个制表符分隔的 .txt 文件，然后对其进行编码，以便将每列数据（用制表符分隔）放入一个 php 变量中。

例如....

`505050 somedata moredata`

然后，将这些变量写入

`$id $somedata $moredata`

我读入 fgetcsv 并制作了一个数组，尽管它似乎使整行成为一个数组，但我需要将其拆分为变量，以便我可以将其写入 MySQL 数据库中的各个列，

任何人都可以给我任何指示吗？

非常感谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:49:45.737

[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)和的组合是[`list()`](http://php.net/manual/en/function.list.php)将其拆分为命名变量的最有效方法：

```
list($id, $somedata, $moredata) = fgetcsv($fp, 0, "\t"); 
```

但是，您不需要将它们作为命名变量才能将它们插入 MySQL，您可以只使用返回的原始数组`fgetcsv()`：

```
$row = fgetcsv($fp, 0, "\t");

$query = "
  INSERT INTO `tablename`
    (`id`, `somedata`, `moredata`)
  VALUES
    ('{$row[0]}', '{$row[1]}', '{$row[2]}')
"; 
```

在查询中使用数据之前不要忘记转义数据；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:50:10.417

[explode()](http://php.net/explode)将分割一个字符串。试试这个：

`list($id, $somedata, $moredata) = explode("\t", $string);`

`$string`您要拆分的字符串在哪里。有关explode() 和list() 的更多信息，只需在php.net 上查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T12:50:17.937

您可以使用`explode()`：

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

# c++ - 使用 WDK 重载 operator new

> ID：10397826
> 
> 赞同：2
> 
> 时间：2012-05-01T12:47:13.643
> 
> 标签：c++, wdk

我正在“本机子系统”中的 wdk 中构建一个简单的代码我有一个重载 new 和 delete 运算符的库这里是代码：

```
 #include<ntddk.h>

    #define HEAP_ZERO_MEMORY    0x00000008
    #define HEAP_GROWABLE       0x00000002

    typedef NTSTATUS
    (NTAPI * PRTL_HEAP_COMMIT_ROUTINE)(
        IN PVOID Base,
        IN OUT PVOID *CommitAddress,
        IN OUT PSIZE_T CommitSize
        );

    typedef struct _RTL_HEAP_PARAMETERS {
        ULONG Length;
        SIZE_T SegmentReserve;
        SIZE_T SegmentCommit;
        SIZE_T DeCommitFreeBlockThreshold;
        SIZE_T DeCommitTotalFreeThreshold;
        SIZE_T MaximumAllocationSize;
        SIZE_T VirtualMemoryThreshold;
        SIZE_T InitialCommit;
        SIZE_T InitialReserve;
        PRTL_HEAP_COMMIT_ROUTINE CommitRoutine;
        SIZE_T Reserved[ 2 ];
    } RTL_HEAP_PARAMETERS, *PRTL_HEAP_PARAMETERS;

    void*  operator new(size_t sz);

    void   operator delete(void* p);

    void* mg_malloc(unsigned int size);
    int mg_free(void *buffer);
    void InitAPSupportLibrary();
    void FinishAPSupportLibrary();

    extern "C"
    {
    PVOID RtlAllocateHeap(
            __in      PVOID HeapHandle,
            __in_opt  ULONG Flags,
            __in      SIZE_T Size
            );
        BOOLEAN RtlFreeHeap(
            __in      PVOID HeapHandle,
            __in_opt  ULONG Flags,
            __in      PVOID HeapBase
            );

    PVOID

    RtlCreateHeap(

      IN ULONG                Flags,
      IN PVOID                Base ,
      IN ULONG                Reserve ,
      IN ULONG                Commit,
      IN BOOLEAN              Lock ,
      IN PRTL_HEAP_PARAMETERS RtlHeapParams  );

        PVOID RtlDestroyHeap(
            __in  PVOID HeapHandle
            );
    } 
```

和cpp文件代码：

```
 #include "main.h"

    PVOID mainHeapHandle = NULL;

    void InitAPSupportLibrary()
    {
        mainHeapHandle = RtlCreateHeap(HEAP_GROWABLE,NULL,0,0,NULL,0);
    }

    void FinishAPSupportLibrary()
    {
        if(mainHeapHandle) RtlDestroyHeap(mainHeapHandle);

    }

    void* mg_malloc(unsigned int size)
    {

        if(!mainHeapHandle) 
            InitAPSupportLibrary();

        void *buf  = RtlAllocateHeap(mainHeapHandle,HEAP_ZERO_MEMORY,size);
        return buf;

    }

    int mg_free(void *buffer)
    {
        if (!mainHeapHandle) return 0;
        return RtlFreeHeap(mainHeapHandle,0,buffer)?1:0;
    }

    void*  operator new(size_t sz)
    {
        void* p = (void*)mg_malloc(sz);
        return p;
    }
    void  operator delete(void* p)
    {
        mg_free(p);
    } 
```

错误是：错误C2373：'operator new'：重新定义；不同类型修饰符错误 C2373：“运算符删除”：重新定义；不同的类型修饰符

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:09:56.033

如果您查看编译器的`<new>`标头，则 for 的声明`operator delete`如下所示：

```
void __CRTDECL operator delete(void *) _THROW0(); 
```

如果宏`__CRTDECL`扩展为非空（但可能是`__cdecl`），则您的声明可能不匹配。

类似的`operator new`。

# iphone - 真实性令牌和 iphone

> ID：10397827
> 
> 赞同：0
> 
> 时间：2012-05-01T12:47:22.837
> 
> 标签：iphone, ruby-on-rails, client-server

我想为我的 iphone 应用程序添加针对 CSFR 的安全测量，该应用程序使用服务器作为后端，并且同一台服务器还提供 Web 请求。服务器是用 ruby​​ on rails 编写的。

对于常规请求，我使用隐藏在表单中的特殊类型的真实性令牌，该令牌与来自该页面的每个请求一起发布以建立信任。

我的问题是我无法从 iphone 模拟这种行为，因为它在发布之前实际上并没有拉出表单。

我已经想到了首先向服务器发送请求以生成某种令牌然后将其添加到请求中的方法，但仍然有人从 iphone 中提取令牌 + 身份验证 cookie 等，将其嗅出或其他东西。我仍然接触到 CSRF。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:36:03.117

这是一篇[很棒的帖子](http://jessewolgamott.com/blog/2012/01/19/the-one-with-a-json-api-login-using-devise/)，应该可以帮助您指出正确的方向。

# c++ - libcurl如何在url重定向到自身时停止重定向

> ID：10397828
> 
> 赞同：0
> 
> 时间：2012-05-01T12:47:29.843
> 
> 标签：c++, redirect, libcurl

我使用 libcurl 获取网页的源代码，一切顺利，直到获得“www.macys.com”的源代码。

如果没有 CURLOPT_FOLLOWLOCATION 选项，我的程序将一无所获，但是使用此选项时，重定向位置始终为“/”，除非我设置 CURLOPT_MAXREDIRS 选项，否则 curl_easy_perform 函数将不会返回。

我的问题是如何使用 libcurl 获取此网页的源代码？非常感谢。

我的 libcurl 版本：7.23.1，操作系统：CentOS 6.0（final）x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:58:28.187

如果服务器不断重定向客户端，并且您要求客户端遵循重定向，那么您希望它做什么？

唯一的选择是在一定数量的步骤后停止，这就是 CURLOPT_MAXREDIRS 的用途。

发生这种情况的原因主要是因为该站点正在检查您使用的 curl 未提供的客户端特定详细信息（用户代理、cookie、referer 或类似信息）。您通常可以使您的 curl 请求更类似于浏览器的请求，然后避免这种影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:36:09.647

要么禁用 CURLOPT_FOLLOWLOCATION 并手动跟踪重定向以确保不会发生循环，要么将 CURLOPT_MAXREDIRS 设置为只能通过自重定向到达的疯狂数字 (10)。

# javascript - 无法使用 jQuery 为边框颜色设置动画

> ID：10397829
> 
> 赞同：2
> 
> 时间：2012-05-01T12:47:31.227
> 
> 标签：javascript, jquery, html, animation, html-table

我有这张桌子：

```
<table id="social" border="5">
    <tr>
        <td>
            <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fyannbane.blogspot.com%2F&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21&amp;appId=177127339057410" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe>
        </td>

        <td>
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://yannbane.blogspot.com/" data-via="Yannbane">Tweet</a>
        </td>

        <td>
            <g:plusone></g:plusone>
        </td>
    </tr>
</table> 
```

我想用jquery为其边界设置动画，如下所示：

```
$("#social").animate({"borderTopColor": "#f00", "borderBottomColor": "#fff"}, 800); 
```

但是，它不起作用！什么都没有发生，甚至没有显示错误......

我也试过这个：

```
$("#social").animate({"border-top-tolor": "#f00", "border-bottom-color": "#fff"}, 800); 
```

但结果相同......你是怎么做到的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T12:51:59.763

来自[jQuery animate 参考](http://api.jquery.com/animate/)（我的重点）

> 所有动画属性都应动画为单个数值，除非以下说明；**大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，** 除非使用 jQuery.Color() 插件）。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。

简而言之，看起来您要么需要[Color()](http://archive.plugins.jquery.com/project/color)插件，要么需要自己开发。

安德鲁对[这个问题](https://stackoverflow.com/a/2302005/156755)的回答似乎可以做你需要做的很少的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:29:13.703

正如其他人已经指出的那样，您绝对应该使用 Color 插件。

但是，作为旁注，您可以使用一种有趣的技术来代替动画变量（在本例中为`color`变量），然后在`step`函数中执行您的操作。

这可能有点矫枉过正，但给你很大的灵活性来做自定义动画：

```
// animate color variable from 0x0 to 0xF
$({ color: 0 }).animate({ color: 15}, {
    duration: 800,
    step: function(now, fx) {
        var hexValue = Math.round(now).toString(16);
        $("#social").css({
            'border-top-color': '#' + hexValue + '00',
            'border-bottom-color': '#' + hexValue + hexValue + hexValue
        });
    }
}); 
```

**[jsfiddle 演示](http://jsfiddle.net/ruisoftware/7zYFA/2/)**

这是有关此技术的[另一个答案。](https://stackoverflow.com/a/9324325/607874)

# jquery - Javascript 未正确提取 attr 值

> ID：10397830
> 
> 赞同：-1
> 
> 时间：2012-05-01T12:47:33.383
> 
> 标签：jquery

出于某种原因，每当我单击输入时，我都会得到一个未定义的警报框。我的脚本应该获取“rel”属性，然后将其输出到警报框。关于为什么这没有发生的任何想法？

我的 jQuery：

```
// process addComment()
jQuery(".textbox1").keydown(function(event) {
    var keyCode = event.keyCode || event.which;
    if (keyCode === 13) {
        addComment(this);
    }
});

function addComment(e) {
    var id = jQuery(e).attr("rel");
    alert(id);
} 
```

我的HTML：

```
<input placeholder="Write a comment..." id="commentBox-<?php echo $row->idwallPosts; ?>" class="textbox1" style="width: 423px"> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T12:49:22.103

您的标签上似乎没有任何`rel`属性。`input`我可以看到`placeholder`, `id`，`class`但`style`没有任何痕迹`rel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:08:42.333

在这一行中`addComment(this);`，您将输入对象传递给您的函数。对象“输入”没有 rel 属性。我假设你想获得 id。请试试：

```
 var id = jQuery(e).attr("id"); 
```

# templates - 播放模板不评估以 @ 开头的变量

> ID：10397840
> 
> 赞同：1
> 
> 时间：2012-05-01T12:48:27.703
> 
> 标签：templates, scala, playframework

您好，我将从介绍我的代码开始。

```
@defining("addPostForm"){formId =>
@main("Add a blog post.") {
    <h1>Add a blog post</h1>

    @errors

    @form(routes.Application.addPost, 'id -> "@formId") {
        @inputText(name = "content", required = true)
        <input type="submit" value="Create">
    }

    <script type="text/javascript">
        $("#@formId").validator();
    </script> 
}
} 
```

为什么@form中的@fromId不会被play评估？这是生成的 html 页面的片段。

```
<form action="/addPost" method="POST" id="@formId"> 
```

但是在页面的后面，它在生成时工作正常。

```
<script type="text/javascript">
    $("#addPostForm").validator();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:54:06.237

我认为它不起作用，因为您已经在 Scala 代码部分，试试这个：

```
 @form(routes.Application.addPost, 'id -> formId) 
```

后面的代码不包含在代码部分中，因此可以按预期工作。

# php - PHP - 从图像创建一个图像

> ID：10397842
> 
> 赞同：5
> 
> 时间：2012-05-01T12:48:36.237
> 
> 标签：php, image

我有 n 图像，想用 php 代码创建一个。我使用 imagecopymerge()，但做不到。请举个例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T08:48:06.853

代码：

```
$numberOfImages = 3;
$x = 940;
$y = 420;
$background = imagecreatetruecolor($x, $y*3);

$firstUrl = '/images/upload/photoalbum/photo/1.jpg';

$secondUrl = '/images/upload/photoalbum/photo/2.jpg';

$thirdUrl = '/images/upload/photoalbum/photo/3.jpg';

$outputImage = $background;

$first = imagecreatefromjpeg($firstUrl);
$second = imagecreatefromjpeg($secondUrl);
$third = imagecreatefromjpeg($thirdUrl);

imagecopymerge($outputImage,$first,0,0,0,0, $x, $y,100);
imagecopymerge($outputImage,$second,0,$y,0,0, $x, $y,100);
imagecopymerge($outputImage,$third,0,$y*2,0,0, $x, $y,100);

imagejpeg($outputImage, APPLICATION_PATH .'/images/upload/photoalbum/photo/test.jpg');

imagedestroy($outputImage); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-10T16:22:32.813

谢谢kruksmail，

我针对图像可能未知的特定项目调整了您的答案。所以我让你的答案与一系列图像一起工作。

它还可以指定所需的行数或列数。我还添加了一些评论以提供帮助。

```
$images = array('/images/upload/photoalbum/photo/1.jpg','/images/upload/photoalbum/photo/2.jpg','/images/upload/photoalbum/photo/3.jpg');
$number_of_images = count($images);

$priority = "columns"; // also "rows"

if($priority == "rows"){
  $rows = 3;
  $columns = $number_of_images/$rows;
  $columns = (int) $columns; // typecast to int. and makes sure grid is even
}else if($priority == "columns"){
  $columns = 3;
  $rows = $number_of_images/$columns;
  $rows = (int) $rows; // typecast to int. and makes sure grid is even
}
$width = 150; // image width
$height = 150; // image height

$background = imagecreatetruecolor(($width*$columns), ($height*$rows)); // setting canvas size
$output_image = $background;

// Creating image objects
$image_objects = array();
for($i = 0; $i < ($rows * $columns); $i++){
  $image_objects[$i] = imagecreatefromjpeg($images[$i]);
}

// Merge Images
$step = 0;
for($x = 0; $x < $columns; $x++){
  for($y = 0; $y < $rows; $y++){
    imagecopymerge($output_image, $image_objects[$step], ($width * $x), ($height * $y), 0, 0, $width, $height, 100);
    $step++; // steps through the $image_objects array
  }
}

imagejpeg($output_image, 'test.jpg');
imagedestroy($output_image);

print "<div><img src='test.jpg' /></div>"; 
```

# iphone - 带有联系人列表的默认 UITabController

> ID：10397847
> 
> 赞同：0
> 
> 时间：2012-05-01T12:48:56.550
> 
> 标签：iphone, contacts

我有一个带有 3 个标签栏项目的 UITabviewController 指向那里自己不同的类，所以我所做的是标签栏项目类之一，我已经声明了从 iPhone 显示联系人列表的代码，它正在显示联系人列表当我按下已声明应显示联系人列表的类的特定选项卡时，但它覆盖了 iPhone SDK 的整个视图。但是，我希望显示 tabviewcontroller 的底部栏以同时导航到其他选项卡。它是这样显示的

![在此处输入图像描述](../Images/dcc2ac661ffee17593eced47abcfc8eb.png) 但我需要这样显示

![在此处输入图像描述](../Images/6a1c51abf1e04df37356cd4bac224e8a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:22:51.520

只需将 tabbarcontroller 拖放到您的主窗口 xib 上，然后根据需要添加更多视图控制器我认为您需要 4 然后将您的第 3 个视图控制器作为导航控制器，然后展开此导航控制器并选择视图控制器，然后打开属性并选择您的控制器文件您为联系人编码并选择了您之前设计的 nib 文件然后，将 tabbarcontroller 和 navController 的 IBOUTLET 设置为委托。还为两者综合属性以在其他类上使用这些属性。

在 Appdelegate.h 文件中

```
 IBOutlet UITabBarController *tabBarController;
IBOutlet UINavigationController *navController; 
```

在 Appdelegate.m 文件中修改 applicationDidFinishLaunch 方法

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Add the navigation controller's view to the window and display.
    [self.window addSubview:tabBarController.view];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

# jquery - 在运行多个 JQ 的站点上使用带有 Isotope 的名称间隔 JQuery 会破坏浏览器调整大小功能

> ID：10397854
> 
> 赞同：0
> 
> 时间：2012-05-01T12:49:27.923
> 
> 标签：jquery, jquery-isotope

GlobalPost 很高兴将 Isotope 用于我们的新业务页面。

[http://www.globalpost.com/business-news](http://www.globalpost.com/business-news)

我们在 Drupal 上运行，因此每个页面上都运行着旧版本的 jquery。

我在页面上这样命名了新的 JQ

```
 <script type="text/javascript" src="/sites/all/themes/globalpost_3/js/jquery-1.7.1.min.js"></script>    
<script type='text/javascript'>
  // added to run both jquery releases on page and stop conflist with old JQ libraray
 var jQuery_1_7_1 = jQuery.noConflict(true);
</script> 
<script type="text/javascript" src="/sites/all/themes/globalpost_3/js/jquery.isotope.min.js"></script>
<script type="text/javascript" src="/sites/all/themes/globalpost_3/js/gp5_biz.js"></script> 
```

最后像这样编辑了 isitope 的最小版本

```
....eturn this}})(window,jQuery_1_7_1); 
```

如您所见，它可以正常加载并且运行良好，但是如果您调整窗口大小，则块不会重排。如果您选择了过滤器或排序，他们会这样做，但不会调整窗口大小。我看了很长时间您的代码，但似乎无法弄清楚可能导致问题的原因或如何解决它。

我必须为 jq 库命名空间以避免冲突，但在我这样做之前调整大小工作正常。我敢肯定，其他人将需要使用带有 Isotope 的名称间隔的 JQ。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:46:40.557

您在哪里（以及如何）初始化同位素？它可能与被引用的 jquery 有关。我是这样做的：

```
var jQuery171 = jQuery.noConflict(true);
jQuery171(function(){
    var $container = jQuery171("#container");
    $container.isotope({
        itemSelector: ".element"
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:02:37.733

您最后的评论让我重新审视了我们如何包含新的 jquery 库以及真正的旧库。我开始认为旧的库可能是这里的坏人，因为它包含在主要的 js 文件（Drupal 系统）中，所以我不能直接访问它来给它一个特定的命名空间。遍历并重新命名所有本机 jq 函数也将是地狱。

我有一个想法，基本上让旧的 JQ 库基本上完成所有工作，它们的命名空间不碍事，就像这样。

```
<?php print $scripts; ?> <!-- all the JS for the site including old 1.3.2 JQuery -->

<script type="text/javascript">
  var jQuery132 = $.noConflict(true); // Kill the old JQ now that it is done with initializing old script
</script>

<script type="text/javascript" src="/sites/all/themes/globalpost_3/js/jquery-1.7.1.min.js"></script>    <!-- load shinny new JQuery which takes over $ and jQuery name space -->
<script type="text/javascript" src="/sites/all/themes/globalpost_3/js/jquery.isotope.min.js"></script>   <!-- non name spaced libs using default $ -->
<script type="text/javascript" src="/sites/all/themes/globalpost_3/js/gp5_biz.js"></script> 
```

这是有史以来最好的方法吗，也许不是，但它有效。

非常感谢您花费宝贵的时间帮助我解决这个问题。我以你的方式发送良好的业力。

# c# - 从代码隐藏添加 asp:Button

> ID：10397856
> 
> 赞同：0
> 
> 时间：2012-05-01T12:49:33.083
> 
> 标签：c#, asp.net

我正在构建一个代码隐藏。该表是数据库记录的列表（每行一条记录），我需要为每一行添加一个删除按钮。为此，我当然需要为此构建一个具有唯一 ID 的按钮。为此，我想出了以下内容......这是行不通的。关于如何使它工作的任何提示？

```
Button deleteButton = new Button();
deleteButton.ID = "deleteStudentWithID" + singleStudent.ID.ToString();
deleteButton.Text = "X";

string row = "<tr>";
row += "<td class=\"style5\">"+deleteButton.ClientID +"</td>";
row += "</tr>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T12:55:53.083

您的问题是您只将`ClientID`控件添加到 html 中，而不是将控件添加到页面本身。

```
Controls.Add(new LiteralControl("<table>"));

foreach(var singleStudent in students)
{
    Controls.Add(new LiteralControl("<tr>"));

    //Code to add other columns

    Button deleteButton = new Button();
    deleteButton.ID = "deleteStudentWithID" + singleStudent.ID.ToString();
    deleteButton.Text = "X";

    Controls.Add(new LiteralControl("<td class=\"style5\">"));
    Controls.Add(deleteButton);
    Controls.Add(new LiteralControl("</td></tr>");
}

Controls.Add(new LiteralControl("</table>")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:52:41.870

不要在后面的代码中创建整个表格标记，而是使用 ASP.NET 提供的控件。

例如，将其放在您的 .aspx 中：

```
<table>
    <asp:Repeater runat="server" ID="MyRepeater1">
        <ItemTemplate>
            <tr>
                <td><%# Eval("StudentName")%></td>
                <td>... other student object bindings ...</td>
                <td>
                    <asp:Button runat="server" ID="MyDeleteButton"
                            CommandArgument='<%# Eval("ID")%>'
                            CommandName="Delete"
                            OnCommand="MyDeleteButton_Command"
                            Text="X" />
                </td>
            </tr>
        </ItemTemplate>
    </asp:Repeater>
</table> 
```

并将其包含在您的代码隐藏中：

```
protected void Page_Load(object sender, EventArgs e)
{
    MyRepeater1.DataSource = new MyStudent[]
        {
            new MyStudent()
                {
                    ID = 1,
                    StudentName = "Student 1"
                },
            new MyStudent()
                {
                    ID = 2,
                    StudentName = "Student 2"
                }
        };
    MyRepeater1.DataBind();
}

protected void MyDeleteButton_Command(object sender, CommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "Delete":
            // stuff for deleting by e.CommandArgument
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:10:08.880

我能想到的对您的问题的最佳解决方案是

```
Button deleteButton = new Button();
deleteButton.ID = "deleteStudentWithID" + singleStudent.ID.ToString();
deleteButton.Text = "X";

StringBuilder sb = new StringBuilder();
StringWriter writer = new StringWriter(sb);
HtmlTextWriter htmlWriter = new HtmlTextWriter(writer);
deletedButton.RenderControl(htmlWriter);

string row = "<tr>";
row += "<td class=\"style5\">"+sb.toString(); +"</td>";
row += "</tr>"; 
```

这样您就可以获得任何控件的 HTML。:) 如果您从后面的代码动态构建 HTML，请尽量不要使用字符串，而是使用 StringBuilder。字符串是不可变的并且有性能损失。

# android - 触摸事件不能很好地从子级发送到父级 - 添加了源代码

> ID：10397864
> 
> 赞同：2
> 
> 时间：2012-05-01T12:50:18.543
> 
> 标签：android, events, selector

我有一个包含内部（子）自定义图像视图的线性布局。

我的目标是在图像视图上设置一个背景选择器，并为线性布局设置一个监听器。

但是，我不能让选择器和监听器一起工作。我不知道如何处理这些事件。

如果我快速点击它正在工作，但如果我在视图上拖动手指，图像视图仍处于选定状态。

这是引用线性布局及其侦听器的活动。

```
public class EventDispatchingDemoActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout linearLayout = (LinearLayout) findViewById(R.id.my_layout);

        linearLayout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v)
            {
                Toast.makeText(getBaseContext(), "Click", Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

这是自定义视图（这是我在某处找到的代码，归功于作者）

```
public class ImageSelector extends ImageView
{

    public ImageSelector(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        setBackgroundDrawable(new NavStateListDrawable(getContext(), 0));
        setClickable(true);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        super.onTouchEvent(event);
        return false;
    }

    public class NavStateListDrawable extends StateListDrawable
    {

        private int level;

        public NavStateListDrawable(Context context, int level)
        {

            this.level = level;
            // int stateChecked = android.R.attr.state_checked;
            int stateFocused = android.R.attr.state_focused;
            int statePressed = android.R.attr.state_pressed;
            int stateSelected = android.R.attr.state_selected;

            addState(new int[] { stateSelected }, context.getResources().getDrawable(R.drawable.slide_feedback));
            addState(new int[] { statePressed }, context.getResources().getDrawable(R.drawable.slide_feedback));
            addState(new int[] { stateFocused }, context.getResources().getDrawable(R.drawable.slide_feedback));
            addState(new int[] { -stateFocused, -statePressed, -stateSelected }, context.getResources().getDrawable(android.R.color.transparent));
        }

        @Override
        protected boolean onStateChange(int[] stateSet)
        {

            boolean nowstate = super.onStateChange(stateSet);

            try
            {
                LayerDrawable defaultDrawable = (LayerDrawable) this.getCurrent();

                LevelListDrawable bar2 = (LevelListDrawable) defaultDrawable.findDrawableByLayerId(R.id.element_contact_image_selector);
                bar2.setLevel(level);
            }
            catch (Exception exception)
            {

            }

            return nowstate;
        }
    }
} 
```

这是xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#acf1fa"
    android:gravity="center"
    android:orientation="vertical" >

    <!-- outer layout -->

    <LinearLayout
        android:id="@+id/my_layout"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:background="#00ff00"
        android:gravity="center" >

        <!-- inner layout -->

        <dor.event.dispathing.ImageSelector
            android:id="@+id/inner_layout"
            android:layout_width="150dp"
            android:layout_height="150dp" />
    </LinearLayout>

</LinearLayout> 
```

我上传了源码： [http ://www.filefactory.com/file/5ikfwyk9j5bx/n/EventDispatchingDemo.rar](http://www.filefactory.com/file/5ikfwyk9j5bx/n/EventDispatchingDemo.rar)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:44:29.317

我记得在编写应用程序时遇到了类似的问题。

1）如果单击列表视图中的一行，您是否尝试捕获？我认为您想要“listView.setonItemClickListener”，它将捕获每个单独行的点击，而不是整个列表视图。

2）我相信当你有一个里面有可点击项目的列表视图时，里面的可点击项目在捕获点击方面具有优先权。不仅仅是优先考虑，我相信它们会*阻止*任何点击事件被发送回父事件处理程序。

我相信一个可行的解决方案是将这些可点击项目的可聚焦性设置为 false。一旦这些可点击项目不再可聚焦，列表视图行将重新获得焦点。另一种解决方案是使用 descendantFocusability 属性，该属性控制谁（整行或图像）获得第一个破解并拾取行内触发的事件。以下是其他一些似乎有您需要的问题：

[如何使用列表中的按钮在 Listactivity 中触发 onListItemClick？](https://stackoverflow.com/questions/1821871/android-how-to-fire-onlistitemclick-in-listactivity-with-buttons-in-list)

[行中带有可点击项目的 Android ListView 会导致继续滚动出现问题](https://stackoverflow.com/questions/4227424/android-listview-with-clickable-items-in-its-rows-causes-problems-continuing-sc)

# objective-c - 当 pushViewController 时，NavigationBar 不正确显示

> ID：10397866
> 
> 赞同：8
> 
> 时间：2012-05-01T12:50:21.587
> 
> 标签：objective-c, ios, uinavigationcontroller

这个问题很简单，用图片就能理解。我有一个 UINavigationController 允许用户在视图之间切换。

第一个视图包含一个搜索栏和一个表格视图，如下所示：![在此处输入图像描述](../Images/f23e3cdf8c3fa427ca812ab5d5036a83.png)

第二个是显示单元格信息的基本视图

当我点击搜索栏时，导航控制器被隐藏，搜索栏现在位于顶部。

现在，如果我单击一个单元格，它会转到第二个视图，但导航栏首先隐藏如下：

![在此处输入图像描述](../Images/e91200513892d1dcf9311076dff222e3.png)

然后，它会自动显示为：

![在此处输入图像描述](../Images/d7181d1bca3e4dbc65a6d14fde874855.png)

我已经尝试了一些事情，比如在推送下一个视图控制器之前显示导航栏，但它非常难看。有谁知道如何在第二个视图上直接显示导航栏（比如在联系人应用程序中）？

**[更新]：代码**

**AppDelegate.m**（我说的是navigationcontroller2）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    FirstViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    SecondViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    viewController1.managedObjectContext = [self managedObjectContext];
    viewController2.managedObjectContext = [self managedObjectContext];
    viewController1.viewController2 = viewController2;

    UINavigationController *navigationcontroller1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
    [navigationcontroller1.navigationBar setTintColor:[UIColor lightGrayColor]];
    UINavigationController *navigationcontroller2 = [[UINavigationController alloc] initWithRootViewController:viewController2];
    [navigationcontroller2.navigationBar setTintColor:[UIColor lightGrayColor]];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:navigationcontroller1, navigationcontroller2, nil];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

**第一视图.m**

```
- (void) searchBarTextDidBeginEditing:(UISearchBar *)theSearchBar {
    [self.navigationController setNavigationBarHidden:YES animated:YES];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!noResultsToDisplay) {
        PinDetailsViewController *pinDetailsViewController = [[PinDetailsViewController alloc] initWithNibName:@"PinDetailsViewController" bundle:nil];
        NSManagedObject *managedObject = [fetchedResultsController objectAtIndexPath:indexPath];
        Pin *pin = (Pin *) managedObject;

        [self.navigationItem setTitle:@"Pins"];
        [self.navigationController pushViewController:pinDetailsViewController animated:YES];
        [pinDetailsViewController updateWithPin:pin];
    }
} 
```

如果您需要其他任何东西，尽管问，但我认为这一切都在那里。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T21:59:54.177

尝试在每个视图控制器中使用此代码。

```
- (void) viewWillAppear:(BOOL)animated
{

    [self.navigationController setNavigationBarHidden:NO animated:animated];

}

- (void) viewWillDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:YES animated:animated];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T00:03:30.920

在推送新的视图控制器之前，您应该取消隐藏导航栏：

`[self.navigationController setNavigationBarHidden:NO animated:YES];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:45:16.383

我的导航栏的位置也有类似的问题。我的在状态栏后面向上移动，我通过手动设置导航栏框架解决了这个问题：

```
-(void)adjustNavBarOrigin
{
    CGRect r = self.navigationController.navigationBar.frame;
    r.origin = CGPointMake(0, 20);  // 20 is the height of the status bar
    self.navigationController.navigationBar.frame = r;   
} 
```

我不得不在很多地方调用这个方法，包括 viewWillAppear: 和 didRotateFromInterfaceOrientation:，但它奏效了 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T19:13:58.233

隐藏 UINavigationBar 有时会干扰属性。尝试使用该属性`alpha`而不是`hidden`.

# hibernate - Hibernate的判别器公式中可以使用用户定义的函数吗

> ID：10397880
> 
> 赞同：2
> 
> 时间：2012-05-01T12:51:27.623
> 
> 标签：hibernate, user-defined-functions

我在 hibernate 中创建了一个名为 bitwiseAnd 的用户定义函数，并将其注册到方言构造函数中，如下所示：

```
public SQLServerDialect() {
    super();
    registerFunction("bitwiseAnd", new SqlBitwiseFunction("bitwiseAnd", StandardBasicTypes.INTEGER));
} 
```

我需要为 Oracle 做同样的事情，因为我们也支持它，因为它们在按位运算方面有不同的语法。我希望在@DiscriminatorFormula 中使用它，但它似乎没有看到注册的函数。这是可能的，还是判别器公式只使用本机 SQL？

谢谢，R。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:09:27.110

DiscriminatorFormula 的 javadoc 链接到 Formula 的 javadoc，其中包含以下内容：

> 公式必须是有效的 SQL 片段。

所以是的，公式必须是有效的 SQL，而不是 HQL。

# java - Java：LockSupport.parkNanos 与 Thread.sleep(...)

> ID：10397881
> 
> 赞同：42
> 
> 时间：2012-05-01T12:51:35.487
> 
> 标签：java, multithreading

在某些情况下，我们大多数人都会这样写：

```
try {
   Thread.sleep(2000); 
} catch (InterruptedException e) {
   ; // do nothing
} 
```

无论是对是错，仅在某些测试工具中可接受，这不是我的观点。我的观点是，可以更简洁地编写相同的代码：

```
 LockSupport.parkNanos(2000* 1000000); 
```

有什么理由我应该赞成一种方法而不是另一种方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-01T12:59:00.070

可读性：`Thread.sleep`具有非常直观的含义。*您将*如何（向其他开发人员）描述您对 的使用`LockSupport.parkNanos`？如果该描述主要包括“我希望当前**线程****休眠**” ，那么肯定`Thread.sleep`更具描述性。

简洁性来自于缺少中断处理——所以如果你愿意，可以创建一个包装器方法来执行此操作，它将异常作为`RuntimeException`. 哎呀，如果你正在创建一个包装器方法，你可以使用任何一种实现，尽管另一个线程当然可以*解除*你的“睡眠”线程，就像它可以中断它一样......

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-01T13:00:25.763

该方法的文档`parkNanos`提供了该方法可以返回的条件。其中一个条件是：*调用虚假（即无缘无故）返回*。因此，如果您不介意虚假唤醒和其他一些线程“取消停放”正在考虑的等待线程，那么基本上可以使用它。当然，乔恩的评论几乎指出了偏爱一个胜过另一个的理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:57:42.567

[LockSupport](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/LockSupport.html)具有更有限的应用程序，并且不支持异常处理。如果您只需要锁定一个线程，就可以了。

从 API：

> 这些方法旨在用作创建高级同步实用程序的工具，它们本身对大多数并发控制应用程序没有用处。

# ruby-on-rails-3 - Rails 3 Active Record 和总和

> ID：10397887
> 
> 赞同：1
> 
> 时间：2012-05-01T12:52:06.657
> 
> 标签：ruby-on-rails-3, activerecord, sum, conditional-statements

我的 Rails 3 应用程序中有以下代码。

```
@clinical_healthplan_spend = Clinical.select("ClientKey as client_key, PVID as animal_key, sum(Payments) as total_payments")
                                 .where("ClinicalText LIKE 'Paid by PET HEALTH' AND PVID != 44444")
                                 .order("sum(Payments) DESC")
                                 .group("animal_key") 
```

我正在努力实现以下目标：

1.  首先按最高的 total_payments 排序结果。
2.  通过 total_payment 值至少为 1500 的记录限制表。

对于第一个要求；

```
.order("sum(Payments) DESC") 
```

不起作用，也不行

```
.order("total_payments DESC") 
```

对于第二个要求；

```
.where("total_payments > 1500") 
```

不起作用。

我是否将条件放在正确的位置，或者在使用 sum 选项时是否有不同的方法？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:17:45.490

而不是`where`，您必须使用`having`. 在你的`group`你必须包括所有没有聚合的字段。在这种情况下`animal_key`和`client_key`。除此之外，我看不到您的代码有任何问题。这应该有效：

```
Clinical.select('ClientKey as client_key, PVID as animal_key, sum(Payments) as total_payments')
  .where("ClinicalText LIKE 'Paid by PET HEALTH' AND PVID != 44444")
  .group('animal_key, client_key')
  .having('sum(Payments) > 1500')
  .order('sum(Payments) DESC') 
```

# ckeditor - 网站有背景图片 - 无法从编辑器中删除

> ID：10397893
> 
> 赞同：1
> 
> 时间：2012-05-01T12:52:49.977
> 
> 标签：ckeditor

我正在从 FCK 编辑器转移到 CK 编辑器 3.6.3，并且该站点有一个背景图像，它出现在 CK 编辑器中。我需要在为通用站点和 CK 编辑器使用相同的 CSS 文件时删除它（以获取样式下拉列表的 CSS）。

我尝试将 config.BodyClass 设置为没有图像的样式 - 这适用于 FCK2.x，但不适用于 CK3。我还通过谷歌找到了一个 config.extraCss 设置，但我在文档中没有看到它，而且它似乎没有做任何事情。

整页已关闭（即编辑器未生成`<body><head>`etc 标签））

我有一个解决方法，有两个 CSS 文件，一个用于站点，一个用于具有不同正文样式的 CK，但必须有更好的方法吗？

谢谢，凯文

配置部分：

```
config.stylesSet = 'my_styles:/admin/ckeditor/styles_dropdown.js';
config.contentsCss = '/newdesign/style.css';
//config.extraCss = 'body {background: none;background-image: none;}';
config.BodyClass = 'fckbody' ; 
```

CSS 部分（“主”css 文件的）

```
body{
margin:0px; padding:0px; background-image:url(/newdesign/site_bg19.jpg); repeat; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:11px; color:#393939;
}

.fckbody {
    background-color: white;
    background: none;
    background-image: none;
    text-align:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:31:30.740

CKEditor 中的正确名称是**[bodyClass](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.bodyClass)**，首字母小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:35:33.303

以为我应该在这里发布我的见解以获取我的发现。我在寻找我的 CKEditor 显示我网站的背景图像的原因时遇到了这个页面。

如果 CKEditor 在节点的 Make a Comment 部分显示背景图像：

1 - 前往“admin/config/content/wysiwyg”

2 - 单击编辑到文本格式显示背景图像的文本格式

3 - 单击 CSS 选项卡下拉菜单

4 - 将编辑器 CSS 更改为“编辑器默认 CSS”。

希望这对某人有帮助！

# java - SWT 浏览器——获取选中的文本

> ID：10397896
> 
> 赞同：0
> 
> 时间：2012-05-01T12:53:23.557
> 
> 标签：java, swt

我在我的应用程序中使用浏览器视图，我需要获取用户选择的文本。我尝试创建鼠标事件，但没有任何效果。我正在使用以下链接来创建浏览器：

[http://180.179.103.253/q3/twapp/process.php?mdl=onetimeurl&id=1061&deviceid=9d2aefc2-a386-4afc-b307-44f41ec8311d&test=1](http://180.179.103.253/q3/twapp/process.php?mdl=onetimeurl&id=1061&deviceid=9d2aefc2-a386-4afc-b307-44f41ec8311d&test=1)

我还检查了文档，没有像[`getSelectionText()`](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Text.html)SWT 浏览器那样的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:00:37.897

您可以通过在浏览器中从您的视图中执行 java 脚本函数来实现这一点。编写一个 java 脚本来获取选择的文本并在浏览器中执行它。查看浏览器 API：

```
browser.execute(script);
browser.evaluate(script); 
```

查看`BrowserFunction`java-javascript回调机制的接口

# naming-conventions - 如何管理样式组合：多个类、特定类或上下文？

> ID：10397897
> 
> 赞同：0
> 
> 时间：2012-05-01T12:53:28.357
> 
> 标签：naming-conventions, css-selectors, css

我不是一个网页设计师或程序员，但我似乎遇到了 CSS 类的这个问题：管理共享属性的 CSS 类集的最佳方法是什么？

例如，我目前正在开发一个带有表示文件传输状态的状态栏的应用程序。它用于三个不同的位置，每个位置的大小都不同。此外，如果传输失败，该条应该是不同的颜色。

一般来说，最好的方法是什么：

1.  将“statusbar”和“transfer-failed”类分别添加到 div 中，并检查它们的组合存在吗？
2.  拥有“statusbar”和“statusbar-failed”类，适当设置类，并使用谨慎的 CSS 结构以避免重复代码。
3.  有一个“statusbar”类，然后使用上下文，比如 div 在“summary”表或“transfer-failed”div 中进一步专门化它。

有没有一般规则？方法 3 似乎很脆弱，因为更改看似无关的类的名称可能会破坏一些东西。方法 1 感觉很奇怪，像“失败”这样的类如果没有另一个类就毫无意义，并且在不同的上下文中也可能意味着不同的东西（例如，“失败”也可以应用于失败的表单验证......）方法 2有时会变得笨拙，有很多非常具体的类，名字很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:18:23.680

1.  如果总是只有一个“状态栏”，请随意使用 an `id`而不是 a `class`。

2.  如果同一页面上有多个，并且它们看起来很 **相似**，请坚持使用`class`.

3.  在适当的时候分配一个`transfer-failed`班级。在您的 CSS 中，在此类下，应仅具有将其与默认“状态栏”区分开来的属性。就个人而言，我喜欢#3（上下文方法）。[WordPress](http://wordpress.org/)和其他 CSM 将页面名称和类别（以及您想要的任何其他内容）分配为`<body>` 类。[Modernizr](http://modernizr.com/)使用`<html>`标签。更多信息在这里： http: [//perishablepress.com/dynamic-body-class-id-php-wordpress/](http://perishablepress.com/dynamic-body-class-id-php-wordpress/)

4.  **@Lokase**的 SMACSS 很棒。有关组织 CSS 的更多提示，请查看：[http ://coding.smashingmagazine.com/2007/05/10/70-expert-ideas-for-better-css-coding/](http://coding.smashingmagazine.com/2007/05/10/70-expert-ideas-for-better-css-coding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:06:11.493

花点时间看一些 CSS 方法或框架，我是[SMACSS的粉丝](http://smacss.com/)

那里有很多最佳实践的例子，你只需要找到它们并通过学习曲线。

# c++ - 来自两个指针的向量分配的段错误

> ID：10397898
> 
> 赞同：0
> 
> 时间：2012-05-01T12:53:43.613
> 
> 标签：c++, memory-management, assign

我正在尝试使用 assign 方法分配给向量，但是相同的代码在我的笔记本电脑上出现段错误，但在我们的计算集群上有效。段错误源于对分配的调用，

```
 double* val = mat.address_data();
  int* rp     = mat.address_major();
  int* cp     = mat.address_minor();
  // assign to the reserved location
  row_pointer_data.assign( rp,
                           rp+(m+1) );
  col_index_data.assign( cp,
                         cp+nz );
  value_data.assign( val,
                     val+nz ); 
```

其中 mat 是一个 MTL4 矩阵，通过指向 int 和 double 的指针指向其内部数据。这些指针分别指向 nz 双精度块、m+1 个整数和 nz 个整数块。我在两个环境中都使用英特尔 c++ 编译器，所有代码都是相同的，对于两个 shell，即 bash shell，堆栈大小是无限的。

但是， col_index_data.assign() 调用在我的笔记本电脑和集群上出现分段错误，它运行良好。

使用 gdb 或 valgrind 指向与相关的同一行，我猜是在调用分配方法中使用的汇编命令 _memmove_sse3()，即，

```
> #0  __memmove_ssse3 () at ../sysdeps/x86_64/multiarch/memcpy-ssse3.S:2928
> #1  0x000000000042df49 in VibroSys::read_triplet_data (mat=Traceback (most recent call last):   File
> "/home/utab/external_libraries/gdb_printers/python/mtl/printers.py",
> line 124, in to_string
>     A= empty_matrix(nr, nc)   File "/home/utab/external_libraries/gdb_printers/python/mtl/printers.py",
> line 38, in empty_matrix
>     return [copy.deepcopy(nr * ['0']) for c in range(nc)] MemoryError
> 
> , row_pointer_data=std::vector of length 19173284840251003, capacity
> 429530399489 = {...}, row_index_data=<error reading variable: Cannot
> access memory at address 0xa3bf88>, 
>     col_index_data=<error reading variable: Cannot access memory at address 0x100008>, value_data=std::vector of length 0, capacity
> 4764228, col_indices_on_row=Traceback (most recent call last):   File
> "/home/utab/external_libraries/stl_printers/python/libstdcxx/v6/printers.py",
> line 427, in children
>     rep_type = find_type(self.val.type, '_Rep_type')   File "/home/utab/external_libraries/stl_printers/python/libstdcxx/v6/printers.py",
> line 43, in find_type
>     field = typ.fields()[0] IndexError: list index out of range
> 
> std::map with 25701680 elements, is_symmetric=false) at
> /home/utab/vibroSys/src/boost_matrix_utilities.cc:354
> #2  0x000000000042e172 in VibroSys::extract_sub_matrix (input_matrix=Traceback (most recent call last):   File
> "/home/utab/external_libraries/gdb_printers/python/mtl/printers.py",
> line 124, in to_string
>     A= empty_matrix(nr, nc)   File "/home/utab/external_libraries/gdb_printers/python/mtl/printers.py",
> line 38, in empty_matrix
>     return [copy.deepcopy(nr * ['0']) for c in range(nc)] MemoryError
> 
> , sub_index1=std::vector of length 19173284840251003, capacity
> 429530399489 = {...}, sub_index2=<error reading variable: Cannot
> access memory at address 0xa3bf88>, sub_matrix=
>     <error reading variable: Cannot access memory at address 0x100000>) at /home/utab/vibroSys/src/boost_matrix_utilities.cc:995
> #3  0x000000000040f93a in main (argc=36433120, argv=0xa3c000) at timing_test.cc:145 
```

相同代码在两个不同环境中出现这两种不同行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:04:45.603

在第二个架构上编译时发现错误是很常见的。考虑缓冲区溢出：如果它没有负面后果（例如，覆盖重要的东西，或者越界和段错误），您可能不会注意到它的存在。然后在另一台机器上，可执行文件的排列方式有所不同，溢出确实会产生负面影响，所以你会注意到它。

即，你有一个错误。它出现在一个地方但有时不在另一个地方的事实并不意味着它不是无处不在的错误，时期，具有*潜在*的负面后果。

# php - 如何使用 foreach/while 仅循环遍历每个 10000000？

> ID：10397900
> 
> 赞同：-6
> 
> 时间：2012-05-01T12:53:49.027
> 
> 标签：php

循环不会循环通过 10000000、10000001。但只有 10000000 然后是 20000000。这可能吗？语言 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:59:19.577

取决于您使用的语言。例如在 PHP 中你可以这样做。

```
<?php

$stride = 10000000;
$num_iterations = 10;

for ($i = 0; $i < $num_iterations * $stride; $i += $stride) {
  // Do stuff with $i
} 
```

然而，像往常一样编程时，事情可以用不同的方式完成。通常，不同的方式会导致代码更简单。例如，您可能可以摆脱这种情况：

```
<?php

$stride = 10000000;

for ($i = 0; $i < 10; $i++) {
  $num = $i * $stride;
  // Do stuff with $num
} 
```

# c# - 异常处理应用程序块未写入事件日志

> ID：10397902
> 
> 赞同：0
> 
> 时间：2012-05-01T12:54:02.133
> 
> 标签：c#, exception-handling, enterprise-library

我正在尝试配置异常处理应用程序块以将异常写入事件日志。

我创建了以下配置：

```
<exceptionHandling>
    <exceptionPolicies>
        <add name="Default">
            <exceptionTypes>
                <add name="All Exceptions"
                     type="System.Exception, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     postHandlingAction="NotifyRethrow">
                    <exceptionHandlers>
                        <add name="Logging Exception Handler"
                             type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.LoggingExceptionHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                             logCategory="General"
                             eventId="100"
                             severity="Error"
                             title="Enterprise Library Exception Handling"
                             formatterType="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.TextExceptionFormatter, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling"
                             priority="0" />
                    </exceptionHandlers>
                </add>
            </exceptionTypes>
        </add>
    </exceptionPolicies>
</exceptionHandling>

<loggingConfiguration name="Default"
                      tracingEnabled="true"
                      defaultCategory="General">
    <listeners>
        <add name="Event Log Listener"
             type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             source="Enterprise Library Logging"
             formatter="Text Formatter"
             log=""
             machineName="."
             traceOutputOptions="None" />
    </listeners>
    <formatters>
        <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
             name="Text Formatter" />
    </formatters>
    <categorySources>
        <add switchValue="All" name="General">
            <listeners>
                <add name="Event Log Listener" />
            </listeners>
        </add>
    </categorySources>
    <specialSources>
        <allEvents switchValue="All" name="All Events" />
        <notProcessed switchValue="All" name="Unprocessed Category" />
        <errors switchValue="All" name="Logging Errors &amp; Warnings">
            <listeners>
                <add name="Event Log Listener" />
            </listeners>
        </errors>
    </specialSources>
</loggingConfiguration> 
```

我尝试使用以下方法测试此配置：

```
ExceptionPolicy.HandleException(new Exception("TEST"), "Default"); 
```

此代码执行没有任何问题，但没有写入事件日志。我怀疑这只是一个配置错误，但我无法查明是什么原因造成的。

关于可能出错或如何调试的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:14:08.150

通过从最新的 Nuget 版本切换到版本 5.0.414.0 来修复。

# c++ - 链接器是否存在于所有编译的编程语言中？

> ID：10397906
> 
> 赞同：2
> 
> 时间：2012-05-01T12:54:25.513
> 
> 标签：c++, compiler-construction, linker

它确实存在于 C/C++ 中，但我不确定其他任何编程语言。我只是好奇链接器是否存在于所有编译的编程语言中，或者每个语言创建者都决定如何编译代码？

对于 Benj：我的意思是本地语言，没有像 CLR 这样的托管代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T13:07:59.893

严格来说，链接器不是语言的一部分，而是语言实现的一部分。（此外，语言本身并不是“编译”或“解释”的——这些也是实现的特征）。

链接器允许语言实现者实现“单独编译”。单独编译是一个非常重要的功能，它允许程序的单独部分物理解耦并允许部分构建（这可以减少总构建时间）。出于这个原因，大多数输出​​本机二进制文件的语言实现将使用链接器作为其实现的一部分。

也就是说，链接器不是语言编译实现的*必需*部分，并且可以想象某些语言实现不会使用链接器（考虑一个学生项目来编写一种语言并实现它——如果这种语言是预计不会与任何大型程序一起使用，花在实现/集成链接器上的时间可能被认为不值得）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T12:56:17.980

例如，Java（严格来说）没有称为“链接器”的工具，但它具有类似的概念。

从根本上说，如果您的可执行代码是由不相交的目标文件（或等效文件）构建的，那么在它们需要运行时，总有*一些东西可以将它们拉到一起。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T13:06:57.040

不，有许多编译语言不使用链接器。例如 Forth、Lisp 和 Java 在某种程度上不需要它。

仍然需要完成相同的工作（让不同的编译单元相互了解），但这可以通过链接步骤以外的其他方式完成。例如，查找可以在运行时完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T13:06:41.697

从历史上看，有一些编译语言不使用任何类型的链接。也许最著名的是 Turbo Pascal，它在其最早的版本（4.0 之前）中对源文件（或源文件，如果`{$I filename}`使用该指令）进行单次传递，直接生成输出代码，并建立一个修复列表（我认为在其他编译完成后将修复应用于写入的目标文件，因为即使使用软盘驱动器作为目标，编译器也能正常运行）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T13:10:27.013

定义“链接器”的含义。每当有单独的编译时，无论编译输出如何，都必须有一个“链接”的步骤。但是，如果您考虑“链接”只是在其他编译的目标代码中填写地址（传统链接器所做的），那么许多更现代的系统不会“链接”。编译器的输出将是某种中间格式，最后一步将在从中生成机器代码之前将它们组合成一个实体。

当然，所有这些都忽略了动态链接和及时编译的问题，这进一步模糊了问题。

So about all you can say is that for a sufficiently vague definition of linking, all languages with separate compilation support it, and for a sufficiently strict version, a lot of modern compilers don't "link" for any language.

# c# - 在 C# 中正确处理网络摄像头

> ID：10397907
> 
> 赞同：1
> 
> 时间：2012-05-01T12:54:38.213
> 
> 标签：c#, winapi, webcam

我在 C# 中看到了很多用于网络摄像头的库。但是有两个普遍的问题：

1.  他们使用剪贴板，这也消除了用户使用剪贴板的能力。
2.  除了“拍摄测试照片”外，没有其他方法可以检测网络摄像头是否已连接，这可能会刺激用户，因为网络摄像头会闪烁。

有没有办法解决这两个问题中的任何一个？

到目前为止，这是我的课：

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WebcamLibrary
{
    public static class Webcam
    {
        private static IntPtr Handle;

        public static void Start()
        {
            try
            {
                Stop();
                Handle = capCreateCaptureWindowA("WebCap", 0, 0, 0, 320, 240, 0, 0);
                SendMessage(Handle, 1034, 0, 0);
                SendMessage(Handle, 1074, 0, 0);
            }
            catch { }
        }
        public static void Stop()
        {
            try
            {
                SendMessage(Handle, 1035, 0, 0);
                Clipboard.Clear();
            }
            catch { }
        }
        public static Image CaptureFrame()
        {
            try
            {
                SendMessage(Handle, 1084, 0, 0);
                SendMessage(Handle, 1054, 0, 0);
                Image image = (Image)Clipboard.GetDataObject().GetData(DataFormats.Bitmap);
                Clipboard.Clear();
                return image;
            }
            catch
            {
                return null;
            }
        }

        [DllImport("user32.dll")]
        private static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, int wParam, int lParam);
        [DllImport("avicap32.dll")]
        private static extern IntPtr capCreateCaptureWindowA(string lpszWindowName, int dwStyle, int X, int Y, int nWidth, int nHeight, int hwndParent, int nID);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:57:56.403

[VfW 捕获 API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757677%28v=vs.85%29.aspx)非常有限，但允许您枚举[设备](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797950%28v=vs.85%29.aspx)、[连接到特定](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743635%28v=vs.85%29.aspx)设备并将[数据捕获到内存缓冲区](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797852%28v=vs.85%29.aspx)中。

然而，它非常古老，大约 10 年前被 WDM 和 DirectShow 淘汰，也可以从 C# 中使用。

我手头没有代码，但您创建了一个过滤器图，添加了网络摄像头设备并告诉它渲染图钉。

# iphone - NSPredicate 同时使用 IN 和 LIKE

> ID：10397915
> 
> 赞同：2
> 
> 时间：2012-05-01T12:55:35.633
> 
> 标签：iphone, ios, core-data, nspredicate

我有一个搜索值数组，我想在 NSPredicate 中与 LIKE 查询结合使用：

```
NSPredicate *p = [NSPredicate predicateWithFormat:@"textField IN LIKE[c] %@", array]; 
```

这不起作用，但这是否可以查看*文本字段*是否对数组中的每个值有任何 LIKE 比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:07:29.240

你应该使用`NSCompoundPredicate`. 它让您可以将一系列**LIKE**谓词与**OR**结合起来。

```
NSMutableArray *subpredicates = [NSMutableArray array];
for(NSString *text in array)
 [subpredicates addObject:[NSPredicate predicateWithFormat:@"textfield LIKE %@",text]];
NSPredicate *finished = [NSCompoundPredicate orPredicateWithSubpredicates:subpreds];//Your final predicate 
```

# c# - Facebook 错误：您请求的某些别名不存在：access_token

> ID：10397917
> 
> 赞同：2
> 
> 时间：2012-05-01T12:55:37.967
> 
> 标签：c#, facebook, facebook-graph-api

我正在使用 C# Facebook 库。有了这个，我想在我自己的墙上发布一些东西，但是我收到了一个错误（如标题中所述）：

> (OAuthException) (#803) 你请求的一些别名不存在：access_token=438781769472xxxxxxxxxxxxxxxxxx

这就是我在代码中所做的：

```
FacebookClient facebookClient = new FacebookClient(myAccessToken);
var args = new Dictionary<string, object>();
args["message"] = "Test message";
args["caption"] = "Caption";
args["description"] = "Description";
args["name"] = "Name";
args["picture"] = "";
args["link"] = "";

// Not sure which one to use, but both give same error
facebookClient.Post(appAccessToken+"/feed", args);
//facebookClient.Post(appAccessToken, args); 
```

任何人都知道问题可能是什么以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:11:39.570

```
 facebookClient.Post(appAccessToken+"/feed", args); 
```

应该改为

```
 facebookClient.Post("<page_id>/feed", args); 
```

您需要添加需要发布的页面 ID

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:06:23.187

您不需要将 appAccessToken 参数添加到 Post 方法参数。您的帖子 URL 将自动附加实例化 facebookClient 时使用的 myAccessToken 值。如果你修改你的电话，`facebookClient.Post("/feed", args);`它应该可以正常工作。

# c# - 如果在 DropDownListFor() 中使用模型，则选择的值丢失

> ID：10397922
> 
> 赞同：0
> 
> 时间：2012-05-01T12:56:07.250
> 
> 标签：c#, asp.net-mvc-3, drop-down-menu

我遇到了这个 DropDownListFor() 的问题

我有测试控制器：

```
model.COUNTRYNAME = "Swizerland";
        ViewBag.Selecter = new SelectList(new[]  
        { 
            new SelectListItem { Text = "USA", Value = "USA" }, 
            new SelectListItem { Text = "Swizerland", Value = "Swizerland", Selected =true}, 
             new SelectListItem { Text = "Russia", Value = "Russia" }, 

        }, "Text", "Value", model.COUNTRYNAME); 
```

在视图中

```
@Html.DropDownListFor(x => Model.COUNTRYNAME , (SelectList)ViewBag.Selecter) 
```

DropDownListFor 没有选择值，它总是选择第一个值。

怎么了？

如果我使用 DropDownList

```
@Html.DropDownList("COUNTRYNAME" , (SelectList)ViewBag.Selecter) 
```

它也不起作用。

但是如果我使用

```
@Html.DropDownListFor("AAAAAAA" , (SelectList)ViewBag.Selecter) 
```

它工作正常并选择第二个值！发生什么了？我不明白。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:58:10.040

试试这样：

```
model.COUNTRYNAME = "Swizeland";
ViewBag.Selecter = new[]  
{ 
    new SelectListItem { Text = "USA", Value = "USA" }, 
    new SelectListItem { Text = "Swizeland", Value = "Swizeland" },
    new SelectListItem { Text = "Russia", Value = "Russia" }, 
};
return View(model); 
```

在视图中：

```
@Html.DropDownListFor(
    x => x.COUNTRYNAME, 
    (IEnumerable<SelectListItem>)ViewBag.Selecter
) 
```

但更好的方法是使用视图模型：

```
model.SelectedCountry = "Swizeland";
model.Countries = new[]  
{ 
    new SelectListItem { Text = "USA", Value = "USA" }, 
    new SelectListItem { Text = "Swizeland", Value = "Swizeland" },
    new SelectListItem { Text = "Russia", Value = "Russia" }, 
};
return View(model); 
```

在视图中：

```
@Html.DropDownListFor(x => x.SelectedCountry, Model.Countries) 
```

# php - 使用 Gearman 进行并行化

> ID：10397923
> 
> 赞同：2
> 
> 时间：2012-05-01T12:56:07.530
> 
> 标签：php, parallel-processing, gearman

我想并行化已经由 Gearman 和 PHP 处理的处理作业。我不明白`doBackground()`多次调用之间的区别：

```
$gmclient->doBackground("reverse", "Hello!");
$gmclient->doBackground("reverse", "Hello!");
$gmclient->doBackground("reverse", "Hello!"); 
```

我有足够的工人注册，在他们自己的 PID 上运行。所以这 3 个作业由 3 个不同的工人并行运行。

或使用`addTask()`，如文档中所述，明确用于并行化。

```
$gmc->addTask("reverse", "Hello World!", null, "1");
$gmc->addTask("reverse", "!dlroW olleH", null, "2");
$gmc->addTask("reverse", "!dlroW olleH", null, "3");

$gmc->runTasks() 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:18:35.403

不同之处在于，`runTasks()`它将阻塞，直到通过添加的所有任务`addTask()`完成。当所有三个任务都完成时，您的最后一个示例将完成（添加`sleep()`调用以在实践中查看它），而第一个示例只会将任务转移到 gearmand，然后继续运行脚本。

使用`addTask()`对独立任务（但可能是相关的）进行分组可以很容易地完成一组任务，然后再进行假设所有先前任务都已完成的操作。例如，以 4 种不同的分辨率调整图像大小，然后在完成所有四个任务后将图像设置为活动。这很容易通过`runTasks()`四个`addTask()`调用来实现，一个`runTasks()`然后更改图像的状态，而使用 doBackground 您必须轮询您已提交给 gearmand 的任务的状态以了解它们何时完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T19:18:47.403

一个很好的观点是：

如果您的 Worker 已死或无法访问，则 doBackground 会更好，因为 gearman 无论如何都会收到工作量，而不是等到 Worker 存在并为您和大多数情况下（至少以我的经验）执行此操作，您使用 gearman 以这种方式工作, 发送任务、工作负载并等待它们异步完成。

因此，如果您的系统必须具有容错能力，那么您可能应该使用 doBackground 而不是 addTask.... 否则，如果您需要对您的任务进行强有力的控制，那么 addTask 会更好。

希望这也可以解决其他人...

# jquery - jQuery onchange 选择向 PHP 提交表单

> ID：10397925
> 
> 赞同：2
> 
> 时间：2012-05-01T12:56:22.117
> 
> 标签：jquery

我没有代码可以在这里真正向您展示，但是假设我有一个包含 3 个隐藏字段的表单，其中包含日期、城市和地址。我还有一个带有 3 个选项的选项（比如说 Apple、Microsoft 和 Google）。

我想要的是，当用户将选择更改为不同的选项时，jquery 应该将选择框的值 + 3 个隐藏字段发送到 PHP 页面，比如 proces.php。Proces.php 处理 mysql_query 等，它不返回任何东西。

谁能告诉我这是怎么做到的？我不希望任何人为我编写完整的脚本，因为我没有提供任何 html 代码，而只是提供大纲，或者可能是指向教程或其他内容的链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T13:02:46.643

首先，您的表单应如下所示：

```
<form action="process.php" method="post" id="myForm">
    <select name="site" id="site">
        <option>Apple</option>
        <option>Google</option>
        <option>Microsoft</option>
    </select>
    <input type="hidden" name="date" value="01/05/2012" />
    <input type="hidden" name="city" value="London" />
    <input type="hidden" name="address" value="[... address ...]" />
</form> 
```

然后通过 AJAX 提交，您将使用该`serialize()`方法收集表单数据：

```
$("#site").on("change", function() {
    var $form = $("#myForm");
    var method = $form.attr("method") ? $form.attr("method").toUpperCase() : "GET";
    $.ajax({
        url: $form.attr("action"),
        data: $form.serialize(),
        type: method,
        success: function() {
            // do stuff with the result, if you want to 
        }
    });
}); 
```

或者如果你不想使用AJAX，只是标准的表单提交，你可以触发表单提交，像这样：

```
$("#site").on("change", function() {
    $("#myForm").submit();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:07:46.613

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form id="form1" name="form1" method="post" action="#">
    <label for="brand">Brand</label>
    <select name="brand" id="brand">
        <option>Apple</option>
        <option>Microsoft</option>
        <option>Google</option>     
    </select>
    <input type="hidden" name="date" id="date" value="7/4/1776" />
    <input type="hidden" name="city" id="city" value="My City"  />
    <input type="hidden" name="address" id="address" value="123 Fake Street" />
</form>
<script type="text/javascript" src='//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type="text/javascript">
    $('#brand').on('change',function() {
        $.post("process.php", $("#form1").serialize());
    });
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:03:25.277

如果你想使用 jquery 发送表单，你可以使用 Jquery Form plugin<
[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/) 所以基本上你可以做的是使用

```
$(document).ready(function(){
$('form selector').ajaxForm(opts);
//u can define the opt urself itz easy look at the link
$("selects selector").change(function(){
$(form selector).ajaxSubmit(function(){//something you wanna do if form is submitted successfully})
});
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T13:04:57.937

看看，原来是个form，是在下拉select改变的时候提交的？你真的不需要为此使用 AJAX。您可以像这样使用 jquery .change() 方法：

```
$('.mydropdown').change(function() {
  // Also do some checking to see if the values are not empty 
  // and then submit the form using:
  $('#myform').submit();
}); 
```

在 php 文件中，您可以使用 $_POST 变量获取它们。

# php - 有没有什么快速的方法可以将相同的 php 文件添加到多个文件夹中？

> ID：10397926
> 
> 赞同：2
> 
> 时间：2012-05-01T12:56:37.840
> 
> 标签：php, directory

我有一个 index.php 文件。在我的根文件夹中，大约有 200 个文件夹。我想将 index.php 文件添加到所有 200 个文件夹中。代替复制粘贴，有没有一种快速的方法来添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:00:14.990

有一种快速的方法可以做到这一点，但我觉得有更好的方法来做你需要的事情。

索引文件纯粹是为了阻止人们看到文件夹吗？如果是这样，请尝试放入`IndexIgnore *`您的 .htaccess

更多信息在这里：[http ://www.javascriptkit.com/howto/htaccess11.shtml](http://www.javascriptkit.com/howto/htaccess11.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:07:46.350

好吧，就像所有其他人已经说过的那样，您的设计可能有问题。如果您想确保人们无法访问它，只需使用 Apache，而不是 PHP。如果您仍然觉得需要将 index.php 文件添加到每个目录，请执行以下操作：

```
<?php
$content = 'Your content';

$files = glob( './*' );
foreach( $files as $file ) {
    if( is_dir( $file ) && is_writable( $file ) ) {
        file_put_contents( $file . '/index.php', $content );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:16:17.393

使用这个功能：

```
function putindexfiles($putfile,$start=""){
    $files = glob($start.'*',GLOB_MARK);
    foreach($files as $file){
        if(is_dir($file)){
            copy($putfile,$file.'index.php');
            putindexfiles($putfile,$file);
        }
    }
} 
```

此函数使用递归，因此所有子目录也会受到影响。

$putfile 是文件的路径，其内容要放在每个文件夹的 index.php 中。该脚本在每个文件夹中自动创建所有 index.php。

使用该函数时，您不需要提供 $start 因为这是默认参数是放置脚本的目录。

享受

# android - 是否可以显示混合地图？

> ID：10397927
> 
> 赞同：1
> 
> 时间：2012-05-01T12:56:48.527
> 
> 标签：android

我在我的应用程序中使用地图。我想显示卫星图像和道路。在安卓中可以吗？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-09T15:39:15.943

v2的更新答案：

Google Maps Android API 提供四种类型的地图，以及完全没有地图的选项：

[https://developers.google.com/maps/documentation/android/map#map_types](https://developers.google.com/maps/documentation/android/map#map_types)

*   **正常**- 典型的路线图。显示了道路、一些人造特征以及河流等重要的自然特征。道路和要素标签也是可见的。
*   **混合**- 添加了路线图的卫星照片数据。道路和要素标签也是可见的。
*   **卫星**- 卫星照片数据。道路和要素标签不可见。
*   **地形**- 地形数据。该地图包括颜色、等高线和标签以及透视阴影。一些道路和标签也是可见的。
*   **无**- 没有瓷砖。地图将呈现为未加载任何瓦片的空网格。

**更改地图类型**

要设置地图的类型，请调用 GoogleMap 对象的 setMapType() 方法，传递 GoogleMap 中定义的类型常量之一。例如：

```
GoogleMap map;
// ...
// Sets the map type
map.setMapType(GoogleMap.MAP_TYPE_NORMAL);
map.setMapType(GoogleMap.MAP_TYPE_HYBRID);
map.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
map.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
map.setMapType(GoogleMap.MAP_TYPE_NONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:59:59.603

您不能同时显示两个视图，

```
mapView.setSatellite(true);
mapView.setStreetView(true); 
```

使用此代码，您可以设置地图视图的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:11:08.517

使用`mapView.setSatellite(true);`这是混合视图，但在这里称为卫星，

Google Maps Android SDK 中不提供仅没有道路名称的卫星视图

# haskell - Haskell - 元组列表的平均值

> ID：10397938
> 
> 赞同：0
> 
> 时间：2012-05-01T12:58:20.210
> 
> 标签：haskell

> **可能重复：**
> [Haskell - 有选择地添加列表](https://stackoverflow.com/questions/10210225/haskell-selectively-adding-lists)

我有一个数据类型：

```
data Film = Film String String Int [Rating]
     deriving (Show,Ord,Eq, Read) 
```

样片：

```
("Ridley Scott","Alien",1979,[("Mark",5),("Zoe",3)]) 
```

我将如何获得 [电影] 列表中所有电影的平均导演评分？

因此，如果雷德利·斯科特有两部电影的平均得分均为 5，那么他的总体平均得分为 5。

我只有制作一部电影的代码

```
filmRating :: [(String,Int)] -> Float
filmRating ratings = average (map snd ratings) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:02:32.370

不是一个真正的答案，只是一些新手笔记。

`Director`您可以为和`Title`所有其他类型使用类型别名。

```
type Director = String
type Rate = Double
type Rater = String
type Ratings = [(Rater, Rate)]
type Title = String
type Year = Int

data Film = Film Director Director Year Ratings
     deriving (Show,Ord,Eq, Read) 
```

这就是为什么您的`film`示例应如下所示：

`film = Film "Ridley Scott" "Alien" 1979 [("Mark",5),("Zoe",3)]`

如果你有一个函数命名`filmRating`它应该是这样的`:: Film -> Rate`：

```
filmRating :: Film -> Rate
filmRating (Film _ _ _ ratings) = average (map snd ratings) 
```

> 我将如何获得 [电影] 列表中所有电影的平均导演评分？

你想要类似的东西`directorsAverageRate :: Director -> [Film] -> Rate`。

首先，您需要`Director`使用某些`:: Film -> Director`功能按值过滤电​​影。对于这个过滤列表，您只需使用 获得平均费率`average . (map filmRating)`。

* * *

**更新**：

> 我不明白在涉及电影之后如何获得总体平均水平。

让我们从[类似的问题](https://stackoverflow.com/questions/2376981/haskell-types-frustrating-a-simple-average-function)`average`中定义函数：

```
average :: (Real a, Fractional b) => [a] -> b
average xs = realToFrac (sum xs) / genericLength xs 
```

然后

```
> let one_film = Film "Ridley Scott" "Alien" 1979 [("Mark",5),("Zoe",3)]
one_film :: Film

> let another_film = Film "Ridley Scott" "Alien2" 2979 [("Mark",4),("Zoe",2)]
another_film :: Film

> let films = [one_film, another_film]
films :: [Film]

> average . (map filmRating) $ films
3.5
it :: Double 
```

# jquery - jQuery Mobile 加载消息

> ID：10397940
> 
> 赞同：27
> 
> 时间：2012-05-01T12:58:25.200
> 
> 标签：jquery, jquery-mobile, mobile

当我将 jQuery Mobile 链接到我的页面时，页面底部出现了某种加载消息，我无法摆脱它。我试过 $.mobile.pageLoading(true) 但没有用。

我应该如何删除它？我没有在任何地方打印它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-01T13:04:38.757

## 1.4 加载器文档

1.4 文档建议与**[Loader](http://api.jquerymobile.com/loader/)小部件**进行交互。页面顶部描述了全局更改选项，但可以在逐个链接的基础上进行细微差别。这也可能有效：

```
$( document ).on( "mobileinit", function() {
    $.mobile.loader.prototype.options.disabled = true;
}); 
```

另外，根据[http://demos.jquerymobile.com/1.4.5/loader/](http://demos.jquerymobile.com/1.4.5/loader/)和[http://api.jquerymobile.com/loader/](http://api.jquerymobile.com/loader/)，您可以使用以下代码隐藏加载体验：

```
// As submitted by @Aras
$.mobile.loading( "hide" );
// (or presumably as submitted by @Pnct)
$.mobile.loading().hide(); 
```

## 选项 B - 禁用 AJAX 加载

禁用 AJAX 加载将有效地删除消息。

如果您不希望页面从后台加载*然后显示*中受益，您可以通过指定您不想看到加载消息的`data-ajax='false'`任何锚 ( ) 标记使其像“正常”一样加载。`<a...>`还有一个全局设置可用于使所有链接“正常”加载。

要全局禁用（请务必[阅读此页面](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)以了解含义及其建议。[新文档](http://api.jquerymobile.com/global-config/)可能没有警告）：

```
$.mobile.ajaxEnabled=false; 
```

## 选项 C - 只是隐藏它

如果您想使用 1.4[加载页面](http://api.jquerymobile.com/jQuery.mobile.loadPage/)方法来加载外部页面，它有一个可用的选项`showLoadMsg`，您可以简单地将其设置为 false。

仅用于删除消息的全局选项（在早期版本中可用——至少 1.0、1.1 和 1.2——[在此处](http://jquerymobile.com/demos/1.2.1/docs/api/globalconfig.html)阅读）是：

```
$.mobile.loadingMessage = false; 
```

1.2 和之前的文档说，如果您将其设置为 false，则不会显示加载消息。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-28T06:48:02.403

我正在使用最新版本的 JQuery Mobile（当前为 1.4）并遇到了这个问题。这里没有一个解决方案对我有用，我认为其中许多已被弃用。这对我有用：

```
$.mobile.loading().hide(); 
```

`$.mobile.loading()`会给你元素，你可以`hide`它或做任何你想做的事情。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-16T15:47:08.043

我有同样的问题，一个烦人的加载消息和一个橙色框架。这是由于没有添加对 jquery 样式表的引用。

在标题中添加引用解决了它。

```
<link rel="stylesheet" type="text/css" href="https://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css"> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-26T08:08:39.103

如果您使用的是 jquerymobile 的最新更新 (1.2.0) 试试这个

```
$.mobile.loading( 'show', { theme: "b", text: "", textonly: false}); 
```

因为它对我有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-18T07:18:13.247

对于 JQM 1.2.0，Pnct 的答案更接近正确。但是，根据提供的 API 文档，以下内容会更正确。

```
$.mobile.loading('hide'); 
```

还要确保您的 HTML 文件中至少有为 JQM 结构定义的样式表。否则它看起来就像函数什么都不做。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-16T17:58:37.650

在我的情况下 ( `jQueryMobile 1.4.5`) 我只需将它添加到我的 CSS 中，这样我就可以避免导入整个 jQueryMobile CSS 文件（我不需要它）。

```
.ui-loader {
  display: none !important;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-08T22:13:24.937

添加这个

```
<script>
$(document).ready(function(){
  $(".ui-loader").hide();
});
</script> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-22T14:43:19.163

默认情况下，该消息应该是隐藏的。您可能没有包含官方的 jQuery Mobile 样式表。

您不应通过代码手动隐藏或禁用加载消息。

正确的方法应该是为 jQuery Mobile 1.4.5 包含以下样式表：

```
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.css"> 
```

这将解决各种问题，包括 Chrome 中选定元素周围的蓝色轮廓和 Android 中的橙色轮廓。

如果这篇文章过时了，可以在这里找到所有版本的样式表： [https ://jquerymobile.com/download/](https://jquerymobile.com/download/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-22T09:56:17.887

你也可以使用smth。像这样删除消息：

```
$('.ui-loader h1').remove(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-01T13:01:17.090

尝试使用`$.mobile.hidePageLoadingMsg()`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-22T13:32:23.173

在我的情况下，我加载了错误的 css 文件（jquery css 而不是 jquery mobile css）

错误的：

```
<link href="../CSS/jquery-ui-1.11.4.custom/jquery-ui.min.css" rel="stylesheet" /> 
```

正确的：

```
<link href="../CSS/jquery.mobile-1.4.5.min.css" rel="stylesheet" /> 
```

# html - 从捆绑包中加载 UIWebView 中的不同 HTML

> ID：10397942
> 
> 赞同：1
> 
> 时间：2012-05-01T12:58:32.993
> 
> 标签：html, ios, uiwebview, bundle

我有一个带有 UIWebView 的应用程序，它根据首选语言加载不同的 HTML 文件。

我在包中添加了几个文件夹，其中文件夹引用名为 en、fr 等。

在每个文件夹中，我都有一个 index.html，其中有一个按钮，按下该按钮会加载另一个 foo.html。

关键是每个文件夹中的名称 index.html 和 foo.html 都是相同的。而且我不知道如何使用文件夹引用从捆绑包中获取所需的 index.html，然后 Web 视图与要打开的 foo.html 混淆，并且按钮不起作用。从服务器在 Safari 中进行测试时，所有 HTML 文件都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:26:17.147

首先看看这篇文章中如何将文件添加到项目中以及如何加载它们：

[https://stackoverflow.com/a/8436281/687323](https://stackoverflow.com/a/8436281/687323)。

如果您对每种语言都有不同的文件夹，并且您可以从代码中获取文件夹的名称，那么您只需将其放在这里：

`NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"www"]];`,

在“inDirectory:”参数中，文件夹的名称

# bash - bash脚本 - 如果在函数中检查，前一个命令的退出状态不同

> ID：10397949
> 
> 赞同：2
> 
> 时间：2012-05-01T12:59:17.527
> 
> 标签：bash, shell

我不明白 - 如果我检查函数中命令的退出状态并将其存储在局部变量中，我总是得到答案 0。从函数外部，我得到正确的退出状态。

```
#!/bin/bash

function check_mysql()
{
    local output=`service mysql status`
    local mysql_status=$?

    echo "local output=$output"
    echo "local status=$mysql_status"
}

check_mysql

g_output=`service mysql status`
g_mysql_status=$?

echo "g output=$g_output"
echo "g status=$g_mysql_status" 
```

输出是：

```
local output=MySQL is running but PID file could not be found..failed
local status=0
g output=MySQL is running but PID file could not be found..failed
g status=4 
```

4的状态是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T13:03:38.947

该命令在您的函数中的命令`local`之后运行。`service mysql status`它是返回 0 的那个。您正在失去`service`命令的返回状态。

将`local`语句一分为二：

```
local output
local mysql_status

output=`service mysql status`
mysql_status=$? 
```

# javascript - JavaScript 中的保留字列表

> ID：10397951
> 
> 赞同：5
> 
> 时间：2012-05-01T12:59:20.133
> 
> 标签：javascript, reserved-words

有没有比[Mozilla](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)关于保留字更完整的列表？

它缺少*parseFloat*、*toString*、*prototype*等词。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T13:00:39.120

`parseFloat`,`toString`并且`prototype`不是**保留**字。仅仅因为它们有时具有特殊含义，并不意味着您不能用它们的名称声明变量；

```
var prototype = "foo"; // no error. 
```

[ES5 标准](https://es5.github.io/#x7.6.1)也包含一个保留字列表，但它应该与 MDN 给出的列表相匹配：

```
break, do, instanceof, typeof, case, else, new, var, catch, finally, return, 
void, continue, for, switch, while, debugger, function, this, with, default,
if, throw, delete, in, try

class, enum, extends, super, const, export, import 
```

您可能还对[ES5 的严格变体向](https://es5.github.io/#C)*保留*列表添加额外的单词感兴趣；

> 标识符在严格模式代码`"implements", "interface", "let", "package", "private", "protected", "public", "static", and "yield"`中被分类为令牌。`FutureReservedWord`（第 7.6.1.2 节）。

# salesforce - 客户门户网站中的 Answer and Reply Insert 测试代码失败

> ID：10397963
> 
> 赞同：0
> 
> 时间：2012-05-01T13:00:23.113
> 
> 标签：salesforce

我想运行一个测试脚本来测试问题和回复；但是当我插入对问题的回复时，它会显示以下错误。

INSUFFICIENT_ACCESS_ON_CROSS_REFERENCE_ENTITY，空：[CommunityId]

这是代码片段

```
 User u2 = new User(abcd );insert u2;
       User u3 = new User( sfsadfas); insert u3;

Question question = new Question();
                question.Title = 'Test';
                question.Body = 'Test';
                question.CommunityId = 'asfsadfsadfasdfsa';
                insert question;                  
                Id questId ;
                questId = question.Id;   
            System.debug('questId --->'+questId );  
                Reply reply1 = new Reply();
                //reply1.Name = 'replyquestion11';
                reply1.Body =  'reply no 1 ques 1';
                reply1.QuestionId = question.Id; 
                //reply1.CommunityId = 'fasdfsadfsadfsadf';   
                System.debug('reply1--->'+reply1);        
                insert reply1;

            Test.startTest();  
            System.RunAs(u2)
            {    Reply reply2 = new Reply();
                //reply1.Name = 'replyquestion11';
                reply2.Body =  'reply no 2 ques 1';
                reply2.QuestionId =  question.Id;      
                 System.debug('reply2--->'+reply2);            
                insert reply2;          //Insert Fails here
            } 
```

谁能帮我这个。我想用户 diff 用户发布对问题的回复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T09:45:17.513

默认情况下，插入 question 和 reply1 是在您的权限下执行的（您有系统管理员配置文件，对吗？）。然后你执行 runAs（*一些新用户，可能被分配了标准许可证和标准用户配置文件*），他看不到系统管理员创建的问题记录。

1.  其他用户（最好明确指定他的个人资料）是否有权至少阅读问题对象。
2.  他是否在此对象上查看全部，或者是否有公共只读访问的共享设置。

阅读[安全模型](https://login.salesforce.com/help/doc/en/managing_the_sharing_model.htm)，然后决定应用共享设置或至少在单元测试中手动共享问题记录......

# hadoop - 将 Hadoop MapReduce 限制为特定的文件扩展名

> ID：10397965
> 
> 赞同：1
> 
> 时间：2012-05-01T13:00:27.937
> 
> 标签：hadoop, mapreduce

我正在尝试在我的集群上运行仅在特定文件扩展名上运行的 MapReduce 作业。我们有一堆异构数据位于集群上，对于这个特定的工作，我只想在 .jpg 上执行。有没有办法可以在不限制映射器的情况下做到这一点。当您执行作业时，这似乎应该很容易做到。我在想类似 hadoop fs JobName /users/myuser/data/*.jpg /users/myuser/output 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:29:50.023

您的示例应该按书面形式工作，但您需要检查您正在调用 setInputPaths(Job, String) 方法的输入格式，因为这将解析 glob 字符串 "/users/myuser/data/*.jpg " 到 /users/myuser/data 中的单个 jpg 文件中。

# javascript - 正则表达式范围内的转义点

> ID：10397968
> 
> 赞同：90
> 
> 时间：2012-05-01T13:01:17.053
> 
> 标签：javascript, regex, replace

出于某种原因，这两个正则表达式的行为方式相同：

```
"43\\gf..--.65".replace(/[^\d.-]/g, "");​  // 43..--.65
"43\\gf..--.65".replace(/[^\d\.-]/g, "");​  // 43..--.65 
```

[演示](http://jsfiddle.net/q7rvt/1/)

在第一个正则表达式中我不转义点（`.`），而在第二个正则表达式中我做（`\.`）。

有什么区别以及为什么它们的行为相同？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-05-01T13:05:28.633

点运算符`.`不需要在字符类中进行转义`[]`。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-05-01T13:04:40.733

因为点在字符类（方括号`[]`）内。

看看[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)，它说（在 char 类部分下）：

> 除 ^-]\ 之外的任何字符都将该字符添加到字符类的可能匹配项中。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-10-07T09:27:10.800

如果您使用 JavaScript 来测试您的正则表达式，请尝试`\\.`使用`\.`.

它的作用相同，因为 JS 删除了第一个反斜杠。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-01T13:05:33.817

在[这个网页上](http://www.regular-expressions.info/dot.html)，我看到：

“请记住，点不是字符类中的元字符，因此我们不需要使用反斜杠对其进行转义。”

所以我想逃避它是不必要的......

# c# - ASP.NET MVC 3 - 自定义验证器

> ID：10397987
> 
> 赞同：1
> 
> 时间：2012-05-01T13:03:08.983
> 
> 标签：c#, asp.net-mvc-3, razor

我正在尝试在我正在编写的 ASP.NET MVC 3 应用程序上实现电话号码的自定义验证器。我已经为自定义验证器编写了代码，如下所示

```
public class PhoneNumberValidator : ValidationAttribute 
{

    public PhoneNumberValidator() : base("The Phone Number is not Valid")
    {
    }
    public override bool  IsValid(object value)
    {
        if (value != null)
        {
            string phonenumber = value.ToString();

            var regex = new Regex(@"^(?:[0-9]+(?:-[0-9])?)*$");

            if (regex.IsMatch(phonenumber))
            {
                return true;
            }
            else
            {
                return false;
            }
        }
        return false;
    }
} 
```

然后在我的模型类中，我有以下内容：

```
 [Display(Name = "PhoneNumber")]
    [Required(ErrorMessage = "Is Phone Number Required")]
    [PhoneNumberValidator]
    public string PhoneNumber { get; set; } 
```

但是，当我运行我的应用程序并单击页面上的继续按钮时，如果输入的值是字母，它不会引发错误，尽管如果我设置断点，我可以看到该值正在被读入字符串 phonenumber ok。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:09:06.447

你似乎在重新发明一个轮子。为什么不使用现有的正则表达式验证器：

```
public class MyViewModel
{
    [Display(Name = "PhoneNumber")]
    [Required(ErrorMessage = "Is Phone Number Required")]
    [RegularExpression(@"^(?:[0-9]+(?:-[0-9])?)*$")]
    public string PhoneNumber { get; set; }
} 
```

据说验证是由模型绑定器触发的，因此请确保您提交表单以将视图模型作为参数的控制器操作：

```
[HttpPost]
public ActionResult Process(MyViewModel model)
{
    if (!ModelState.IsValid)
    {
        // the model is invalid => redisplay view
        return View(model);
    }

    // at this stage the model is valid => you could do some processing here 
    // and redirect
    ...
} 
```

或使用该`TryUpdateModel`方法（虽然我个人更喜欢以前的方法）：

```
[HttpPost]
public ActionResult Process(FormCollection some_Dummy_Parameter_Thats_Not_Used_At_All_But_Which_We_Need_To_Avoid_The_Method_Overloading_Error_With_The_GET_Action_Which_Has_The_Same_Name)
{
    var model = new MyViewModel();
    if (!TryUpdateModel(model))
    {
        // the model is invalid => redisplay view
        return View(model);
    }

    // at this stage the model is valid => you could do some processing here 
    // and redirect
    ...
} 
```

此外，为了在某处显示错误消息，请确保您的视图中有相应的占位符：

```
@Html.EditorFor(x => x.PhoneNumber)
@Html.ValidationMessageFor(x => x.PhoneNumber) 
```

或使用验证摘要助手：

```
@Html.ValidationSummary(false) 
```

# .net - 传递安全令牌 WCF

> ID：10397988
> 
> 赞同：0
> 
> 时间：2012-05-01T13:03:10.817
> 
> 标签：.net, wcf

我有客户端和服务器。它们在不同的凭据上运行。

如何在客户端获取安全**令牌，将此****令牌**传递到服务器端并在那里模拟用户？

如果您可以提供简单的代码示例来**获取、发送和接收令牌，那将非常有帮助。**

我只对带有安全令牌的解决方案感兴趣，拜托。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:45:12.180

只能使用 Windows 帐户进行[模拟。](http://msdn.microsoft.com/en-us/library/ms730088.aspx)它通常还需要 Windows 域（和域帐户）并且对于某些操作（委托）还需要 Kerberos。

# virtualbox - VMware 工作站与 Oracle vm 虚拟机？

> ID：10397992
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:03:26.230
> 
> 标签：virtualbox, vmware-workstation

我的主机上运行着 Win7，我想使用 Linux 平台进行一些 Web 开发并在 iOS 上测试一些应用程序。
这些程序的主要优点和缺点是什么。我猜在性能方面它们应该大致相同，但也许其中一个具有其他人缺乏的一些功能。简而言之，VMware 工作站与 Oracle vm virtualbox 之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:08:06.947

除了一个花钱和另一个不花钱的明显区别外，我发现最大的区别是对 3D 图形加速和 USB 设备兼容性的支持深度。VMware 在这两个方面都获胜。

对于典型的 Web 开发任务，两者都可能同样好用。

# attributes - jQuery each() 返回 false 并重新启动

> ID：10397993
> 
> 赞同：0
> 
> 时间：2012-05-01T13:03:26.543
> 
> 标签：attributes, clone, jquery

我遇到了 each() 函数的问题。我喜欢的是返回 false；然后重新启动。您会看到 each() 函数只重复第一个链接。我希望每个链接都克隆每个 $('.ms-PostTitle a') ...查看我的代码。请帮忙！

========HTML======= each() 函数当前正在做什么:( ....

```
<div class="ms-PostTitle"> 
    <a href="Post.aspx?ID=1">Post #1</a>
</div>
<a href="Post.aspx?ID=1" class="read-more">Read More</a>

<div class="ms-PostTitle"> 
    <a href="Post.aspx?ID=2">Post #2</a>
</div>
<a href="Post.aspx?ID=1" class="read-more">Read More</a> 
```

========HTML======= 我也喜欢它的东西....

```
<div class="ms-PostTitle"> 
    <a href="Post.aspx?ID=1">Post #1</a>
</div>
<a href="Post.aspx?ID=1" class="read-more">Read More</a>

<div class="ms-PostTitle"> 
    <a href="Post.aspx?ID=2">Post #2</a>
</div>
<a href="Post.aspx?ID=2" class="read-more">Read More</a> 
```

========jQuery=======

```
 $('.ms-PostTitle a').each(function () {
       var href = $(this).attr('href');         
       $('<a class="read-more" href=' + href + '>Read More</a>').insertAfter('div.ms-PostBody p');
       return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:09:22.093

这应该工作

```
$('.ms-PostTitle a').each(function () { 
   $('<a>', { text: "Read More", class: "read-more", href: this.href }).insertAfter($(this).parent());
}); 
```

[http://jsfiddle.net/RLa5C/1/](http://jsfiddle.net/RLa5C/1/)

# java - 您可以使用多组 JAXB 注释来编组/解组到不同的 XML 吗？

> ID：10397998
> 
> 赞同：2
> 
> 时间：2012-05-01T13:03:43.897
> 
> 标签：java, xml, jaxb

我们有一些带有 JAXB 注释的实体，因此我们可以将一些“传入”XML 解组到 pojo。我们现在需要将 pojo 编组为 XML，但格式与传入的 xml 不同。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:05:20.960

我的解决方案是在 JAXB 对象中使用一个额外的“版本”字段来区分多个版本的绑定。通常，我使用 enum 作为它的类型，即 enum Version {V1, V2, ...};

因此，对于特定的 XML 元素字段，我将 getField() 方法定义为

```
@XmlElement
public String getField() {
    if (version == Version.V1) {
        return field;
    } else if (version == Version.V2) {
        return null; // hidden
    }

} 
```

在编组之前，只需将版本值设置为所需的枚举值，其余的由 JAXB 处理。

# wordpress - 更改 Wordpress 中多行分隔文本的颜色？

> ID：10397999
> 
> 赞同：-2
> 
> 时间：2012-05-01T13:03:48.057
> 
> 标签：wordpress

我想更改 Wordpress 中多行文本的颜色。

这些行是这样分开的：

1号线（变为绿色）

其他一些行

2号线（变为绿色）

其他一些行

3号线（绿色）

我已经使用 CTRL 并选择了所有行，但是当我更改颜色时，它会取消选择除最后一行之外的所有行？

我还想在页面的不同点插入多个水平规则，而不是一一进行。

如果文本编辑器不允许简单的 ctrl 并选择多个项目，我认为它有缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:47:06.860

Wordpress 可视化编辑器的问题在于，它是为最低公分母的用户而构建的。基本上，它只对几乎没有 HTML 和 CSS 经验的人有用。

大多数情况下，可视化编辑器的输出要么是简单的混乱——要么是错误的——开发人员可以以简洁明了的方式使用它。

您的问题更多地与 Wordpress 可视化编辑器的可用性有关，而不是如何使用它。如果您不习惯使用 HTML 视图编辑您的内容（它可以让您在更精细的级别上格式化您的内容），我建议您将所有内容复制到 Microsoft Word 等文本编辑器中，使更改您想要的，然后将所有内容粘贴回编辑器。

使用该方法实际上做得相当好。

虽然 Wordpress 为技术不太熟练的用户提供了尽可能简单的工作，但它并非万无一失。如果你觉得它的可用性在一个非常基本的层面上存在缺陷，我的建议是联系 Wordpress 论坛中的 Wordpress 开发团队。

祝你好运。

[http://wordpress.org/support/](http://wordpress.org/support/)