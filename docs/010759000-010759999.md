# StackOverflow 问答 10759000-10759999

# android - 需要特定 Android 权限的 Android API 列表

> ID：10759000
> 
> 赞同：9
> 
> 时间：2012-05-25T17:38:58.790
> 
> 标签：android, permissions

有没有办法判断哪些 Android API 是否需要某个 Android 权限？例如，哪些 API 需要 GET_TASKS 或 REBOOT 权限？我的应用程序是从一个早已不在的人那里继承而来的，它在清单中列出了这些权限。我不认为我们在使用它们，但我也担心如果我删除它们会产生不好的后果。关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T18:03:58.093

这两个权限都非常专业，只有少数用途。

**android.permission.REBOOT**

首先，此权限的保护级别为`signatureOrSystem`，因此除非您的应用程序是自定义 ROM 的一部分，或者您有权访问您正在安装它的平台的签名密钥，否则该应用程序甚至不会被授予权限。 ]

需要打电话`PowerManager.reboot()`

**android.permission.GET_TASKS**

这个权限只是被标记了`dangerous`，所以你的应用实际上可以获得这个权限。

有两个调用`ActivityManager`需要此权限，`getRecentTasks()`并`getRunningTasks()`获取有关系统中当前应用程序任务的信息。自定义 Launcher 应用程序经常使用它来填充任务列表。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-30T11:47:09.567

PScout 是一种分析 Android SDK 并生成映射的工具，该映射将 Android 权限映射到需要这些权限的方法。

原始 PScout 网站不再工作，但我从原始 PScout 提取映射并将其推送到 Github。如果需要，您可以轻松检查并解析它。

在这里，您可以找到 PScout 找到的所有需要​​ Android 权限的方法。

[PScout 结果 - Android 权限和需要这些权限的方法的映射](https://github.com/drag0/pscout_results)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:55:08.683

取出每一块然后运行。如果它继续工作，请保留已删除的内容并将权限列表向下移动。

# java - Java 读取带有额外空格和 CRLF 的文本文件

> ID：10759001
> 
> 赞同：1
> 
> 时间：2012-05-25T17:39:00.147
> 
> 标签：java, parsing, powershell, io

我有一个由 PowerShell 使用命令生成的文本文件

`GetChild-Item C:\Source\Path | ForEach-Object { $_.Name } > "C:\MyPlace\outfile.txt"`

这会生成`outfile.txt`像这样打开的 Notepad++ ![记事本++](../Images/2099da488cb66d49eb974b5456b9bb48.png)

但是当在 Java 中打开并逐行读取时，如下所示：

```
while((line = br.readLine()) != null) {
    line = line.replaceAll("\\s", "");
    System.out.println(i + ":\t" + line);
} 
```

它产生这个：

![Java 输出](../Images/3b5273dacf6fd3fd156da0db20f698d3.png)

这完全混淆了我的处理。我试过替换空白字符，但似乎没有奏效。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:58:55.490

`>`是`Out-File`带有一些预定义参数设置的语法糖。其中之一是编码。默认情况下`Out-File`会创建一个小端 unicode 文件。因此，要使用 ASCII 编码制作文件，您可以这样做：

```
GetChild-Item C:\Source\Path | ForEach-Object { $_.Name } | 
    Out-File "C:\MyPlace\outfile.txt" -Encoding ASCII 
```

...或者您可以使用`Add-Content`默认输出 ASCII：

```
GetChild-Item C:\Source\Path | ForEach-Object { $_.Name } | 
    Add-Content "C:\MyPlace\outfile.txt" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T17:42:16.040

问题似乎是 Powershell 正在发出一个具有 unicode 编码的文件，但 Java 将它作为普通的旧 ASCII 读取。您需要更改 java 代码以将文件读取为 unicode。

# java - Java，如何启动几个使用 1 个 VM 的 jar？

> ID：10759013
> 
> 赞同：2
> 
> 时间：2012-05-25T17:40:06.780
> 
> 标签：java, javascript, python, minify

我想在python 的许多 javascript 文件上运行[google 闭包编译器。](https://developers.google.com/closure/compiler/docs/gettingstarted_app)
我用这个：

```
subprocess.Popen('/usr/bin/java -jar /var/www/compiler.jar --js "%s" --js_output_file "%s"' % (fullname, dest_filename),shell=True); 
```

但据我了解，它为每个进程创建了 java VM。
所以这会吃掉所有的内存。我只能听到我的硬盘在使用交换时开裂。而且系统几乎挂了。我可以以某种方式告诉 java 对所有启动的进程只使用 1 个虚拟机吗？

*可能是我写错了什么。那是因为我完全不懂java。对此感到抱歉*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:47:15.560

可能的答案1：

Google 闭包编译器确实接受多个输入文件，其语法如下：

```
java -jar compiler.jar --js=in1.js --js=in2.js ... --js_output_file=out.js 
```

这将只生成一个输出文件，它是所有输入的组合。但是，如果您尝试分别编译每个文件，这可能不是您想要的。

* * *

可能的答案2：

编写一个接受成对参数的小型包装脚本（使用 , 或您喜欢的脚本语言）`bash`并不难，例如`python`

```
wrapper.sh in1.js out1.js in2.js out2.js ... 
```

中的代码`wrapper.sh`可以循环（成对）参数并`java -jar --js=xxx --js_output_file=yyy`重复调用，等待每个参数完成后再开始下一个。这将具有不并行启动每个进程的好处，因此至少您不会（可能）同时运行许多 JVM。尽管您在每次运行时都必须重新启动 JVM 确实效率低下。

* * *

可能的答案3：

如果您*真的*只想要一个 JVM，那么如果不编写一点 Java 代码（据我所知），就无法按照您的要求去做。如果您熟悉 Java，您可以复制[CommandLineRunner.java](http://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/CommandLineRunner.java)的源代码并对其进行修改以满足您的需要。

或者甚至更简单，只需编写一个小型 Java 类，其`main`函数简单地调用`CommandLineRunner`main 任意次数，传入适当的参数来模拟正常的命令行调用。这里有一些快速而肮脏的东西可以解决问题（[对 VonC 的帽子提示](https://stackoverflow.com/questions/309396/java-how-to-test-methods-that-call-system-exit)）

```
import com.google.javascript.jscomp.CommandLineRunner;
import java.security.Permission;
public class MyRunner {
    public static void main(String [] args) {
        // Necessary since the closure compiler calls System.exit(...).
        System.setSecurityManager(new NoExitSecurityManager());
        for (int i=0; i<args.length; i+=2) {
            System.out.println("Compiling " + args[i] + " into " + args[i+1] + "...");
            try {
                CommandLineRunner.main(new String[] {
                    "--js=" + args[i],
                    "--js_output_file=" + args[i+1]
                });
            }
            catch (ExitException ee) {
                System.out.println("Finished with status: " + ee.getStatus());
            }
        }
    }

    private static class ExitException extends SecurityException {
        private int status;
        public ExitException(int status) { this.status = status; }
        public int getStatus() { return status; }
    }
    private static class NoExitSecurityManager extends SecurityManager {
        public void checkPermission(Permission p) { }
        public void checkPermission(Permission p, Object context) { }
        public void checkExit(int status) { throw new ExitException(status); }
    }
} 
```

用这样的东西编译它：

```
javac -classpath compiler.jar MyRunner.java 
```

用这样的东西运行它：

```
java -classpath .:compiler.jar MyRunner in1.js out1.js in2.js out2.js ... 
```

并看到这样的输出：

```
Compiling in1.js into out1.js...
Finished with status: 0
Compiling in2.js into out2.js...
Finished with status: 0 
```

# javascript - 如何使用 DOM 方法可靠地对数组进行子排序？

> ID：10759018
> 
> 赞同：8
> 
> 时间：2012-05-25T17:40:27.417
> 
> 标签：javascript, arrays, dom, sorting

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:17:56.370

好的。因此，正如您所发现的，您的问题是不能保证默认的 JavaScript 排序是*stable*。具体来说，我认为在您的脑海中它是这样工作的：我将按蓝色排序，然后当我按绿色排序时，排序器只会上下移动我的数组中的条目，但保持它们按蓝色排序。可悲的是，宇宙的排列并不那么方便。内置的 JS 排序允许按照它喜欢的方式进行排序。特别是，它允许将数组的内容放入一个大桶中，然后按照您的要求将它们拉出来，*完全忽略*它之前的排列方式，看起来至少有些浏览器正是这样做的。

对于您的特定示例，有几种方法可以解决此问题。首先，您仍然可以在三个单独的调用中进行排序，但要确保这些调用稳定地进行排序：这意味着在按蓝色排序后，您将稳定地按绿色排序，这将为您提供一个按绿色排序的数组和在其中的蓝色顺序（即，正是您要查找的内容）。我的排序库通过实现“振动排序”或“鸡尾酒排序”方法来实现这一点（http://en.wikipedia.org/wiki/Cocktail_sort）；本质上，这种排序方式会遍历列表并上下移动项目。（特别是，它*不*只需将所有列表项放入桶中，然后按顺序将它们拉出即可。）维基百科文章中有一个漂亮的小图形。这意味着“子排序”保持排序——即排序是稳定的，这会给你想要的。

但是，对于这个用例，我不会担心在三个不同的调用中进行排序并确保它们稳定等等；相反，我会一口气完成所有排序。我们可以将 rgb 颜色指示器 (255, 192, 80) 视为实际上是某个奇怪基数的大数字：为了避免过多的数学运算，假设它以 1000 为基数（如果该短语没有意义，请忽略它；只是想一想这就是将整个 rgb 属性转换为一个包含所有属性的数字，有点像 CSS 在级联中计算优先级的方式）。所以这个数字实际上可以被认为是 255,192,080。如果你为每一行计算这个数字，然后按这个数字排序，一切都会解决，你只需要排序一次：所以你可以做一个而不是做三个排序：`sorter.sort(function(a,b) { return (a.red*1000000 + a.green*1000 + a.blue) - (b.red*1000000 + b.green*1000 + b.blue) }`它都会解决的。

从技术上讲，这有点低效，因为每次调用排序函数时都必须计算“基数 1000”，这可能（很可能）每行不止一次。如果这是一个大问题（您可以通过对其进行基准测试来解决），那么您可以使用*Schwartzian 变换*（抱歉这里的所有流行语）：基本上，您为每一行计算一次以 1000 为基数的数字，然后将它们所有在一个列表中，对列表进行排序，然后遍历排序列表。因此，创建一个看起来像的列表`[ [255192080, <table row 1>], [255255255, <table row 2>], [192000000, <table row 3>] ]`，对该列表进行排序（使用类似的函数`mylist.sort(function(a,b) { return a[0]-b[0]; })`)，然后遍历该列表并将每个 s 附加到表中，这将按顺序对整个表进行排序。您可能不需要为您所拥有的表格提供最后一段，但它可能很有用，而且知道这个技巧肯定不会有什么坏处，sorttable.js 也使用该技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:21:38.910

我会以不同的方式解决这个问题。您似乎正试图通过从标记中提取数据来重建所有数据，这可能是一项危险的任务；一种更直接的方法是，以您的程序从一开始就可以理解的格式表示您想要呈现到页面的所有数据，然后在页面加载时简单地重新生成标记，然后在每次后续排序时重新生成标记。

例如：

```
var colorsData = [
  {
    keyword: 'mediumspringgreen',
    decimalrgb: {
      r: 0,
      g: 250,
      b: 154
    },
    percentrgb: {
      r: 0,
      g: 98,
      b: 60.4
    },
    hsl: {
      h: 157,
      s: 100,
      l: 49
    }
    hex: '00FA9A',
    shorthex: undefined
  },
  {
    //next color...
  }
]; 
```

这样，您可以以任何您喜欢的方式对该数组运行排序，并且您不会尝试从标记中提取数据并将其拆分并重新分配等等。

但实际上，您似乎对排序功能很感兴趣。一个接一个地运行多个排序会得到意想不到的结果；如果发现前一个“列”相等，您必须运行一个比较下一个“列”的排序函数。RGB 排序可能如下所示：

```
var decimalRgbForwards = function(a,b) {
  var a = a.decimalrgb,
      b = b.decimalrgb;
  if ( a.r === b.r ) {
    if ( a.g === b.g ) {
      return a.b - b.b;
    } else {
      return a.g - b.g;
    }
  } else {
    return a.r - b.r;
  }
}; 
```

因此，具有匹配 r 和 g 值的两种颜色将返回 b 值相等，这正是您要寻找的。

然后，您可以应用排序：

```
colorsData.sort(decimalRgbForwards); 
```

..最后遍历该数组以重建表内的标记。

希望对你有帮助，先生-

# ruby-on-rails - Rails 应用程序的计算密集型 Rub y Calc - 提取到纯 Ruby 和文件系统？

> ID：10759019
> 
> 赞同：0
> 
> 时间：2012-05-25T17:40:27.857
> 
> 标签：ruby-on-rails, ruby, performance, activerecord

下午好，

我正在开发一个 Rails 应用程序，我可以通过进行大量预计算并将结果存储到数据库中来大大加快站点速度，而不是在用户请求时执行计算。

（请注意，我说的是来自数十万数据库行的数百万次迭代。我估计要完成我能做的所有计算，在我的 Macbook Air 上大约需要 4 天。）

我的问题是：将这些计算从 Rails / ActiveRecord 框架中剥离出来，并使用纯 ruby​​ 代码而不使用数据库来完成这一切，会有什么好处吗？在写出结果时，文件 I/O 是否会成为瓶颈？你会如何处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:08:25.913

我的想法是，如果您需要花费大量时间进行计算，那么您不仅应该远离 rails，还应该远离 ruby​​。与 C 或 C++ 相比，Ruby 非常慢。所以我会使用它们并让它们将结果存储在数据库中（或您的 rails 应用程序可以访问的其他地方）。然后rails可以读取结果。如果这对您来说是一个可行的选择，您可以考虑使用 db 过程，如果您使用的是 SQL db。这些将比 ruby​​ 中的相同算法快得多。

然后当然由您决定何时触发（重新）计算。基于时间的 cron 触发器或基于系统中的条件。

# jquery - 使用 jquery 的 Facebook 喜欢按钮

> ID：10759020
> 
> 赞同：0
> 
> 时间：2012-05-25T17:40:29.973
> 
> 标签：jquery, html, ajax

在这里，我正在尝试制作一个类似 facebook 的按钮。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>like button</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<style>
    #like {
        height: 215px;
        background: url(images/sprite.png) no-repeat;
        background-position: 0px 0px;
    }
</style>
<script type="text/javascript">
    $(document).ready(function(){
        $("#like").click(function(){
            $("#like").css("background-position","0px -225px");
        });
    });
</script>
</head>
<body>
    <div id="like">
    </div>
</body>
</html> 
```

现在，当用户单击该图片时，该图片将发生变化。我想反过来改变那张照片。我怎样才能？有没有其他完美的方法来实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:47:23.640

定义 2 个 CSS 类（一个用于活动状态，第二个用于其他状态）并具有相关的 CSS（从精灵图像加载图像）。在按钮/类似图像点击事件上使用那些。像这样的东西

**CSS**

```
.stateA,.stateB
{
  background-image:url('http://www.wing-co.jp/img/ui/site_skin/default/sprite_facebook.png');
  width:20px;  height:20px;       
}

.stateA
{  
  background-position:-511px -212px;    
}
.stateB
{
  background-position:-498px -212px;    
} 
```

**HTML**

```
<input type="button" id="btnLike" class="stateA" value="" /> 
```

**Javascript**

```
$(function(){

    $("#btnLike").click(function(e){
      e.preventDefault();
      var item=$(this);
      if(item.attr("class")=="stateA")
      {
         item.removeClass("stateA").addClass("stateB");
         //If you want to update database,you can make an ajax call here
      }
      else
      {
         item.removeClass("stateB").addClass("stateA");
         //If you want to update database,you can make an ajax call here
      }
  });   

}); 
```

工作样本：http: [//jsfiddle.net/cGWTM/32/](http://jsfiddle.net/cGWTM/32/)

# wordpress - 使用 if/else 语句无限滚动

> ID：10759026
> 
> 赞同：0
> 
> 时间：2012-05-25T17:40:44.793
> 
> 标签：wordpress, pagination, infinite-scroll

通过无限滚动，我尝试一次加载 3 个帖子，但只填写了具有特定字段（视频）的帖子。

例如，我最近的 2 个帖子填写了字段（视频），3d 帖子没有，第 4 个帖子有。我想要帖子 1、2 和 4 加载导致 3 的原因。然后无限滚动应该加载接下来的 3 个帖子，包括视频等。

无限滚动有效，分页查询有效，但是：因为帖子 3 没有填写视频字段，无限滚动只加载帖子 1 和 2，并且不添加帖子 4 来完成我想要的 3 个帖子时间...

我的代码：

```
<div id="interviews">

<?php   $temp = $wp_query;
        $wp_query= null;
        $wp_query = new WP_Query();
        $wp_query->query('paged='.$paged.'&cat=5&showposts=3');
        while ($wp_query->have_posts()) : $wp_query->the_post();
        echo ('<ul id="infinite">');

    if (get('video_video', 1, TRUE)) {

        echo ('<li class="video">');
        $home = array("h" => 290, "w" => 380, "zc" => 1, "q" =>100);
        //echo get('video_video');
        echo ('With: ');
        echo get('participant_first_name');
        echo ('&nbsp;');
        echo get('participant_last_name');
        echo ('</li>');

        }else{ $video_video=false;
        echo ('');

         }  ?>

        <?php endwhile;?>
       </ul> 

<?php if ($wp_query->max_num_pages > 1) : ?>
<nav id="nav-below">
    <div class="nav-previous"><?php next_posts_link( __( '&larr; More', 'intowntheme' ) ); ?></div>
</nav>

<?php endif; ?>

</div><!--End interviews--> 
```

jQuery脚本：

```
 jQuery('#interviews').infinitescroll({ 
navSelector  : "#nav-below",  // selector for the paged navigation (it will be hidden)
nextSelector : "#nav-below .nav-previous a",   // selector for the NEXT link (to page 2)
itemSelector : "li.video",  // selector for all items you'll retrieve
extraScrollPx: 50,    
loading         : {
     msgText: "<em>Loading the next year of Grantees...</em>",
    finishedMsg: "<em>You've reached the end of the Grantees.</em>"
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:52:07.887

我以前没见过这个`get`功能。你知道它从哪个表中提取数据吗？如果是`wp_postmeta`，您也许可以在您的数据库中使用自[定义字段参数](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)`WP_Query`来仅检索您感兴趣的记录。

就像是：

```
$wp_query = new WP_Query();
$wp_query->query('paged='.$paged.'&cat=5&showposts=3&meta_key=video_video&meta_value=1'); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T22:26:50.540

```
<div id="interviews">
<?php echo ('<ul id="infinite">'); ?>
<?php 
$wp_query = new WP_Query();
$wp_query->query('paged='.$paged.'&cat=5&showposts=3&meta_key=video_video&orderby=meta_value&order=ASC'  . $post->ID);
while ($wp_query->have_posts()) : $wp_query->the_post(); ?>
<?php if ( get_post_meta($post->ID, 'video_video', true) ) : ?>
    <li class="video"><?php $home = array("h" => 290, "w" => 380, "zc" => 1, "q" =>100);
            //echo get('video_video');
            echo ('With: ');
            echo get('participant_first_name');
            echo ('&nbsp;');
            echo get('participant_last_name');
            echo ('</li>');?>

<?php endif;?>

<?php endwhile;?>

<?php if (get_post_meta($post->ID, 'video_video', true) ) { ?>
    <?php if ($wp_query->max_num_pages > 1) : ?>
        <nav id="nav-below" >
        <div id="next"><?php next_posts_link( __( 'Scroll down for more', 'intowntheme' ) ); ?></div>
    </nav>
    <?php endif; //end nav ?>
<?php } else {  ?>
<p>There are no interviews at the moment </p>
<?php }   ?>     
</ul>     
</div><!--End interviews--> 
```

# c# - 如何使用 c# 使用 Youtube api 登录程序？

> ID：10759032
> 
> 赞同：1
> 
> 时间：2012-05-25T17:40:58.260
> 
> 标签：c#, youtube-api, youtube.net-api

有[这个](https://developers.google.com/youtube/2.0/developers_guide_dotnet#ClientLogin_for_Installed_Applications)文档。可用的。所以我用

```
YouTubeRequestSettings settings = new YouTubeRequestSettings("Appname","devkey", textBox1.Text, textBox2.Text);
request = new YouTubeRequest(settings);

Video newVideo = new Video();
newVideo.Title = "Test";
newVideo.Tags.Add(new MediaCategory("Animals", YouTubeNameTable.CategorySchema));
newVideo.Description = "Testing Testing Testing";
newVideo.YouTubeEntry.Private = false;
newVideo.YouTubeEntry.MediaSource = new MediaFileSource("C:\\BabyBoyScenesBackground_PAL.wmv", "video/x-ms-wmv");
try
{
  request.Upload(newVideo);
}
catch (Exception ccc)
{
  MessageBox.Show(ccc.ToString());
} 
```

只是为了获得401未经授权。我需要改变什么。如果你问，我发现的所有资源要么已经过时，要么人们没有处理这个问题。

对于“Appname”、“devkey”，我使用了适当的值以及 pw 和用户名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:06:46.770

恐怕在这种情况下，正如预期的 401 未授权错误，您必须提供不正确的详细信息。我不厌其烦地尝试了您的代码，它按预期工作，并上传了视频。您的 devkey、pw 或用户名一定不正确，或者上面发布的代码之外一定有问题，因为它对我来说很好用。

但是，您应该真正使用后台工作人员来执行此任务，可能像这样：

```
namespace YouTube
{
    using System;
    using System.ComponentModel;
    using System.Windows;

    using Google.GData.Client;
    using Google.GData.Extensions.MediaRss;
    using Google.GData.YouTube;
    using Google.YouTube;

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private static BackgroundWorker uploader;

        private static YouTubeRequestSettings settings;

        static void UploaderDoWork(object sender, DoWorkEventArgs e)
        {
            var request = new YouTubeRequest(settings);
            var newVideo = new Video { Title = "Test" };
            newVideo.Tags.Add(new MediaCategory("Animals", YouTubeNameTable.CategorySchema));
            newVideo.Description = "Testing Testing Testing";
            newVideo.YouTubeEntry.Private = true;
            newVideo.YouTubeEntry.MediaSource = new MediaFileSource("C:\\Wildlife.wmv", "video/x-ms-wmv");            
            try
            {
                request.Upload(newVideo);
            }
            catch (Exception exception)
            {
                MessageBox.Show("Upload failed: " + exception.Message);
            }
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            settings = new YouTubeRequestSettings(
                "app",
                "devkey",
                "email",
                "password");
            uploader = new BackgroundWorker { WorkerReportsProgress = true, WorkerSupportsCancellation = true };
            uploader.DoWork += UploaderDoWork;
            uploader.RunWorkerCompleted += delegate { MessageBox.Show("Upload completed!"); };
            uploader.RunWorkerAsync();
            MessageBox.Show("Initiated upload...");
        }
    }
} 
```

希望你能解决！

# git - git忽略一个目录，就好像它不存在

> ID：10759034
> 
> 赞同：22
> 
> 时间：2012-05-25T17:41:10.653
> 
> 标签：git

我有一个克隆的回购。有一个目录，称它为 a/b/c，它**曾经是**它自己的 repo，即有 a/b/c/.git/ 等。

现在我想要在主仓库中管理的文件。我不关心 a/b/c 中的历史，所以我删除了 a/b/c 中的 .git 目录

但问题是`git status`完全忽略了 a/b/c。我做不到`git add`。就好像我将路径放入 .gitignore （我没有）。

显然，在此之前，git 忽略其中包含 .git 目录的子目录是有意义的，但现在它如何知道其中的区别？

除了 .gitignore 和 .git/info/excludes 之外，是否还有其他地方列出了忽略文件？.git/config 文件中什么都没有？

有人问我 git status 说什么。不多：

```
/path/to/root/dir $ git status
# On branch fred
nothing to commit (working directory clean) 
```

以及 git add 所说的。更少（无）

```
/path/to/root/dir $ git add a/b/c 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-25T18:56:24.003

我不知道问题是什么或它是如何出现的（v。烦人），但这是我修复它的方法，以防其他人被卡住：

```
git rm --cached a/b/c
git commit -m "removed phantom a/b/c dir"
git add a/b/c
git commit -m "finally able to add a/b/c" 
```

有趣的是`git log a/b/c`只列出了“终于能够...”提交。`git show HEAD^`（“删除的幻影......”提交说

```
-Subproject commit c311ccdc91c8be66019aa138d1c4af49a6b7a81c 
```

所以它看起来像是在特别对待它。我将不得不阅读更多关于子项目和/或子模块的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T17:42:59.807

你有一个全局 gitignore 文件吗？（检查`git config core.excludesfile`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-06T21:35:15.023

用于`git add -f`强制 git 添加它当前忽略的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-30T18:17:49.723

摘要：您的 .gitignore 文件（包括目录本身中的任何文件）是否忽略了目录包含的所有内容。如果是这样，Git 会将其视为空而不列出）

我有一个类似的问题。我发现被忽略的目录包含一个 .gitignore 文件（虽然不是 .git 目录）。删除它后，git 突然再次对它感兴趣，并将其列为`git status`.

当我通过将 .gitignore 的原始内容从较早的终端中粘贴回来来恢复它们时，git 再次没有看到或将目录列为未跟踪。

通过反复试验，我发现我可以从 .gitignore 中删除所有内容，但以下条目*除外：*

```
.factorypath
.springBeans 
```

如果*这两*行都在 .gitignore 文件中，那么 git 看不到包含目录（它不是 git 存储库的根目录）。

这提出的问题比它对我的回答要多。

这是目录列表，但我看不到模式。

```
total 72
drwxr-xr-x@ 10 stephen  staff    320 30 Aug 19:04 .
drwxr-xr-x  17 stephen  staff    544 30 Aug 18:59 ..
drwxr-xr-x   2 stephen  staff     64 25 Jun 15:00 .apt_generated
-rw-r--r--   1 stephen  staff   1341 25 Jun 15:00 .classpath
-rw-r--r--   1 stephen  staff  18665 28 Jun 10:44 .factorypath
-rw-r--r--@  1 stephen  staff     25 30 Aug 19:12 .gitignore
-rw-r--r--   1 stephen  staff   1094 28 Jun 10:44 .project
drwxr-xr-x   7 stephen  staff    224 25 Jun 15:00 .settings
-rw-r--r--   1 stephen  staff    479 28 Jun 15:43 .springBeans
drwxr-xr-x   6 stephen  staff    192  2 Jul 12:41 target 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-24T20:17:57.040

看来空目录对于Git来说基本上是不存在的。如果目录中的所有文件都匹配 .gitignore 模式，那么 git 会将目录视为空。

我在带有 foo.tgz 文件的目录上发生了这种情况，并且在 repo 的根目录下，.gitignore 文件具有模式 *.tgz。非常令人沮丧的是，“git check-ignore”命令没有报告“嘿，菜鸟，我的目录看起来是空的”之类的东西。

下次试试这个：

```
git check-ignore strangely-ignored-directory/* 
```

该输出可能会解开谜团。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-27T06:02:43.253

刚才我出现了这个问题，因为我曾经在一个由 git 控制的顶级文件夹`create-react-app`中初始化一个应用程序：`client``todo`

```
cd todo
npx create-react-app client --template typescript 
```

在引擎盖下，这创建了`client`一个包含`.git`目录和文件的`.gitignore`文件夹。这就像一个 git 子项目。

当我通过`git add -i`源代码控制添加项目时，创建了一个奇怪的空目录指针，但没有内容。

我使用了命令

```
git rm --cached client 
```

...它删除了 git 存储的奇怪的空目录/指针。但是当我尝试添加文件夹时，我收到了这条消息：

```
~/depot/todo $ git add client
warning: adding embedded git repository: client
hint: You've added another git repository inside your current repository.
hint: Clones of the outer repository will not contain the contents of
hint: the embedded repository and will not know how to obtain it.
hint: If you meant to add a submodule, use:
hint: 
hint:   git submodule add <url> client
hint: 
hint: If you added this path by mistake, you can remove it from the
hint: index with:
hint: 
hint:   git rm --cached client
hint: 
hint: See "git help submodule" for more information. 
```

为了解决这个问题，我删除了 git 工件，然后我可以正常提交。

```
rm -Rf client/.git
rm -f client/.gitignore
git add client
git commit -m "Add missing client content" 
```

# c# - WPF Multitouch - 如何获取所有接触点？

> ID：10759041
> 
> 赞同：3
> 
> 时间：2012-05-25T17:41:38.913
> 
> 标签：c#, wpf, events, multi-touch, touchscreen

我们正在评估触摸屏键盘，其中一个我们需要同时跟踪 10 个手指。问题是触摸屏驱动程序非常不稳定（并且没有固定版本）。`FrameReported`对于这么多手指，它每秒为该事件发送 2500 多个事件。没有办法处理所有这些，即使我们一开始就丢弃了 90%。根本不可能跟上数据的步伐并对数据做任何有意义的事情。

而不是`System.Windows.Input.Touch.FrameReported`，我还尝试使用`TouchMove`窗口的 (Preview) 事件；这里同样的问题。

所以现在我想在一个单独的线程中轮询，而不是使用事件，但我找不到有关如何获取所有当前接触点的信息。

我发现的唯一东西是 WinForms hack，但这不是一个选项，因为那时我将无法在我的窗口中呈现任何 WPF 控件。

有什么解决办法吗？

编辑1：

这是处理所有移动事件的代码：

```
private void UserControlTouchMove(object sender, TouchEventArgs e)
{

        //Update Position of the corresponding point
    var touch = e.GetTouchPoint(this);
    var id = touch.TouchDevice.Id;
    e.Handled = true;
    var position = touch.Position;
    //update finger on display, quick and dirty
    if (m_ShowFingers)
    {
        foreach (var finger in m_Fingers)
        {
            if (id == (int)finger.DataContext)
            {
                finger.RenderTransform = new TranslateTransform(position.X - HalfFingerSize, position.Y - HalfFingerSize);
                break;
            }
        }
    }
} 
```

# javascript - Nodejs Expressjs URI 字符

> ID：10759050
> 
> 赞同：2
> 
> 时间：2012-05-25T17:42:16.247
> 
> 标签：javascript, node.js, uri, express, middleware

有没有办法限制 Expressjs 中允许的 uri 字符。比如设置一个字符变量：

```
allowed_uri_chars = 'a-zA-Z0-9'; etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:51:04.073

最合乎逻辑和最简单的方法是在一些中间件中使用正则表达式：

```
var url = require("url");

app.use(function(req, res, next) {
  var pathname = url.parse(req.url).pathname;
  if(!pathname.match(/^[a-z0-9\/]+$/i)) return res.send(403);
  next();
}); 
```

或者，由于该 URL 已被 Express 解析，但并未公开公开，您可能希望保存一个调用来解析并依赖 Express 内部（我不建议这样做）：

```
app.use(function(req, res, next) {
  if(!req._parsedUrl.pathname.match(/^[a-z0-9\/]+$/i)) return res.send(403);
  next();
}); 
```

这可确保您的路径名（对于`http://example.com/foo/bar?id=1334`，路径名将是`/foo/bar`）仅包含字母、数字和斜杠。如果没有，它会引发 403。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:44:35.843

您不能使用正则表达式来解析授权字符吗？

或者你的意思是直接在路由中？

# python - 自动展开 QTreeView 项目

> ID：10759051
> 
> 赞同：0
> 
> 时间：2012-05-25T17:42:18.310
> 
> 标签：python, qt, pyqt, qtreeview

我正在尝试使用自动更新更改 QTreeView，并且我可以使用此代码设置路径

`tree->setCurrentIndex(fsModel->index(QDir::currentPath())); // or any path`##标题##从这个[链接得到](https://stackoverflow.com/questions/5242161/how-to-select-a-file-in-qtreeview-for-a-qfilesystemmodel-by-path/10747361#10747361)

但我的问题是，一旦 CurrentIndex 更改为文件夹，我该如何扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:38:13.047

请再次忽略它 tree->setExpanded(fsModel->index(QDir::currentPath())); 会这样做。

# jquery - 具有固定列和隐藏列的 jquery 数据表插件

> ID：10759052
> 
> 赞同：2
> 
> 时间：2012-05-25T17:42:20.147
> 
> 标签：jquery, jquery-plugins, datatables

我在使用数据表的固定列插件时遇到问题。

当我尝试冻结右列并且我在数据表中有隐藏列时，它不会显示正确的列。当我在数据表中没有隐藏列时，固定列会正确显示。

我使用服务器端处理的另一件事。

这是我尝试使用的代码。

```
 "sScrollX": "100%",
        "sScrollXInner": "130%",            
        "bScrollCollapse": true,
        "fnInitComplete": function () {
            var resultadosFC = new FixedColumns( resultados, {
                "iLeftColumns": 0,
                "iRightColumns": 1,
                "sHeightMatch" :"auto"
            } );
          },
        "sPaginationType": "full_numbers",
        "bStateSave": false,
        "iCookieDuration": 3600,
        "bJQueryUI": true,
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "index.php?option=com_entidades&task=getSolicitudes",
        "aaSorting": [[0,'desc']],
        "bAutoWidth": false,
        "aoColumns": [
                      null,
                      {
                          "fnRender": function(oObj) {
                              if(oObj.aData[1]!=null)
                                  return moment(oObj.aData[1], "YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY hh:mm:ss a");
                              else
                                  return null;
                          }
                      },
                      {
                          "fnRender": function(oObj) {
                              if(oObj.aData[2]!=null)
                                  return moment(oObj.aData[2], "YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY hh:mm:ss a");
                              else
                                  return null;
                          }
                      },
                      {
                          "fnRender": function(oObj) {
                              if(oObj.aData[3]!=null)
                                  return moment(oObj.aData[3], "YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY hh:mm:ss a");
                              else
                                  return null;
                          }
                      },
                      null,
                      null,
                      null,
                      null,
//when i hide the columns the fixed column doesnt show
                          { "bVisible": false },
                          { "bVisible": false },
//this is the column i want to freeze
                          {
                                "bSortable": true, 
                                "bSearchable": false,
                                "sWidth" : "35px",
                                "fnRender": function(oObj) {
                                    var reg_completo = oObj.aData[8];
                                    if( reg_completo == 'I' ){ return '<div align="center"><label style="color:red">I</label></div>'; }
                                    else if( reg_completo == 'C'){ return '<div align="center"><label style="color:green">C</label></div>'; }
                                }
                          },
                          {
                              "bSortable": false, 
                              "bSearchable": false,
                              "fnRender": function(oObj) {
                                  var id = oObj.aData[0];
                                  var codEstadoSolicitud = oObj.aData[10];
                                  var regUserID = oObj.aData[11];
                                  var acciones="";
                                  if(canDoEditarCrearSolicitud && codEstadoSolicitud == constSolicitudBorrador && jSigeUserID == regUserID)
                                      acciones=acciones + linkEditar + linkEliminar + linkEnviar;
                                  else
                                      acciones=acciones + linkVer;
                                  return acciones.replace(/\$var/g,id);
                            }
                          }                      
                          ]
        }); 
```

# android - android 设备中 UI 线程中的网络（android 3.0 或更新版本）

> ID：10759054
> 
> 赞同：1
> 
> 时间：2012-05-25T17:42:23.530
> 
> 标签：android, file, networking, jsoup

我必须解析网站 html 代码并在我的应用程序中显示一些信息
所以我尝试 JSoup 来获取结果
它在模拟器上运行良好，但在真实设备中它会崩溃；这是日志：

```
05-25 21:42:20.935: D/AndroidRuntime(32230): Shutting down VM  
05-25 21:42:20.935: W/dalvikvm(32230): threadid=1: thread exiting with uncaught exception (group=0x401b9760)  
05-25 21:42:20.940: E/AndroidRuntime(32230): FATAL EXCEPTION: main
05-25 21:42:20.940: E/AndroidRuntime(32230): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.abbasizadeh.Currency/com.abbasizadeh.Currency.CurrencyUpdatableActivity}: android.os.NetworkOnMainThreadException
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.ActivityThread.access$500(ActivityThread.java:122)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.os.Looper.loop(Looper.java:132)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.ActivityThread.main(ActivityThread.java:4123)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at java.lang.reflect.Method.invokeNative(Native Method)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at java.lang.reflect.Method.invoke(Method.java:491)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at dalvik.system.NativeStart.main(Native Method)
05-25 21:42:20.940: E/AndroidRuntime(32230): Caused by: android.os.NetworkOnMainThreadException
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at java.net.InetAddress.getAllByName(InetAddress.java:249)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:304)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:292)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:274)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:217)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:404)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at com.abbasizadeh.Currency.CurrencyUpdater.updateInfo(CurrencyUpdater.java:35)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at com.abbasizadeh.Currency.CurrencyUpdatableActivity.onCreate(CurrencyUpdatableActivity.java:20)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
05-25 21:42:20.940: E/AndroidRuntime(32230):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
05-25 21:42:20.940: E/AndroidRuntime(32230):    ... 11 more 
```

在`CurrencyUpdatableActivity.java:20`我打电话时`CurrencyUpdater.java:35`， `CurrencyUpdater.java:35`是这样的：

```
Document document = Jsoup.connect(url).get(); 
```

感谢您在这个奇怪问题上的帮助

编辑：我在标题中添加了 android 版本问题，以便更好地搜索其他人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T22:31:24.377

在 Android 3.0 及更高版本中，您被禁止在 UI 线程上触摸网络或文件 IO。这是一件好事，因为它迫使您不要中断用户界面以进行可能需要很长时间的操作。查看日志中的这一行：

```
05-25 21:42:20.940: E/AndroidRuntime(32230): Caused by: android.os.NetworkOnMainThreadException 
```

您已经弄清楚异常是在哪里引发的，现在您需要将该代码放入[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的 doInBackground() 方法中。

# android - Android下Phonegap中的SoundCloud Stream

> ID：10759060
> 
> 赞同：0
> 
> 时间：2012-05-25T17:42:38.337
> 
> 标签：android, audio, cordova, soundcloud

我目前正在尝试让 SoundCloud API 在 PhoneGap/Cordova 和 Android 下工作。这是在浏览器中运行良好的代码：

```
 var track_url = 'http://soundcloud.com/mymusic/mymusic'
    ;
    SC.get('/resolve', {
        url : track_url
    }, function(track) {

        $("#stream").live("click", function() {
            SC.stream("/tracks/" + track.id, function(sound) {
                sound.play();
                $("#stop").live("click", function() {
                    sound.stop();
                });
            });
        });
    }); 
```

在我的 android 调试设备上，但是没有声音。LogCat 不会给出任何标准或cordova 错误。有没有人遇到过这个？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:43:25.377

您的代码看起来不错，我能够在 Android 上成功测试它。我唯一能想到的是 resolve 调用返回 404 或类似的。您是否尝试过检查错误？

```
var track_url = 'http://soundcloud.com/your/track';

SC.initialize({
  client_id: 'YOUR_CLIENT_ID'
});

SC.get('/resolve', { url: track_url }, function(track, error) {
  if (error) {
    alert("Error: " + error.message);
    return;
  }

  // ... rest of your code
}); 
```

尝试一下，看看你是否得到任何东西，如果没有，请发表评论。

# android - Android android.database.CursorIndexOutOfBoundsException: Index x requested, with a size of x

> ID：10759069
> 
> 赞同：3
> 
> 时间：2012-05-25T17:43:50.143
> 
> 标签：android, sqlite, cursor

我正在尝试用我的 HighscoreDB 中的数据填充 10 个文本视图。每次我的应用程序游戏结束时，都会要求用户在数据库中存储他们的分数以及名称。然后，我填充了 10 个文本视图（实际上是 20 个，但有 10 行带有名称和分数。）。这曾经有效（当 HighscoreDB 中有一些高分记录时），但是自从我创建了一个新的模拟器并因此删除了所有高分行后，我不断收到“android.database.CursorIndexOutOfBoundsException: Index x requested, with a size x”错误。x 代表我目前有多少行，例如，如果我在数据库中有 5 个高分行，错误将是“请求索引 5，大小为 5”（通过尝试解决我的问题的新方法发现但它仍然存在，我注意到指数也增加了）。

这是我的 HighscoreActivity 中的代码，其中高分放在 textviews 中：

```
 db = (new HighscoreDB(this)).getWritableDatabase();
cursor = db.rawQuery("SELECT _id, name, score FROM highscore ORDER BY score DESC",  null);
                   cursor.moveToFirst();
             for (int i = 0; i < 10; i++) {

            TableRow row = (TableRow)mHighscoreTable.getChildAt(i+1);
            TextView tvName = (TextView)row.getChildAt(1);

            tvName.setText(cursor.getString(1));
            TextView tvScore = (TextView)row.getChildAt(2);

            tvScore.setText(Integer.toString(cursor.getInt(2)));

            cursor.moveToNext();

    } 
```

“for (int i = 0; i < 10; i++) {”这一行是因为我只想在 10 行 textviews 中一次显示 10 个高分。

桌子是这样制作的：

```
private static final String SCORE_TABLE_CREATE = "CREATE TABLE "
                                                 + SCORE_TABLE_NAME
                                                 + " (_id INTEGER PRIMARY KEY autoincrement, "
                                                 + "name TEXT NOT NULL, score INTEGER  NOT NULL)"; 
```

这是我最新的错误：

```
05-25 17:03:16.786: E/AndroidRuntime(780): FATAL EXCEPTION: main
05-25 17:03:16.786: E/AndroidRuntime(780): java.lang.RuntimeException: Unable to start activity ComponentInfo{be.michiel.test/be.michiel.test.HighscoreActivity}: android.database.CursorIndexOutOfBoundsException: Index 5 requested, with a size of 5
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.os.Looper.loop(Looper.java:123)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-25 17:03:16.786: E/AndroidRuntime(780):  at java.lang.reflect.Method.invokeNative(Native Method)
05-25 17:03:16.786: E/AndroidRuntime(780):  at java.lang.reflect.Method.invoke(Method.java:507)
05-25 17:03:16.786: E/AndroidRuntime(780):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-25 17:03:16.786: E/AndroidRuntime(780):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-25 17:03:16.786: E/AndroidRuntime(780):  at dalvik.system.NativeStart.main(Native Method)
05-25 17:03:16.786: E/AndroidRuntime(780): Caused by: android.database.CursorIndexOutOfBoundsException: Index 5 requested, with a size of 5
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
05-25 17:03:16.786: E/AndroidRuntime(780):  at be.michiel.test.HighscoreActivity.onCreate(HighscoreActivity.java:79)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-25 17:03:16.786: E/AndroidRuntime(780):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-25 17:03:16.786: E/AndroidRuntime(780):  ... 11 more 
```

请帮我找出我的错误。我一直在试图找出很长一段时间。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:05:41.867

如果不检查下一条记录是否可用，则永远不要这样做。尝试更改您的代码，如下所示：

```
db = (new HighscoreDB(this)).getWritableDatabase();
cur = db.rawQuery("SELECT _id, name, score FROM highscore ORDER BY score DESC",  null);
int noOfScorer=0;
cur.moveToFirst();
    while ((!cur.isAfterLast())&&noOfScorer<11) 
    {
        noOfScorer++;
        TableRow row = (TableRow)mHighscoreTable.getChildAt(noOfScorer);
        TextView tvName = (TextView)row.getChildAt(1);
        TextView tvScore = (TextView)row.getChildAt(2);

        tvName.setText(cur.getString(1));
        tvScore.setText(Integer.toString(cur.getInt(2)));

        cur.moveToNext();
    } 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:53:35.287

您收到错误是因为您尝试访问不存在的第 11 个 TableRow 子项。

替换
`TableRow row = (TableRow)mHighscoreTable.getChildAt(i+1);`
为
`TableRow row = (TableRow)mHighscoreTable.getChildAt(i);`

此外，您的索引越来越大，因为您将 ID 属性设置为“自动增量”。

代码的另一个问题是您正在调用 cursor.moveToNext(); 在第 10 项。您可以修改“for”语句，使其如下所示：

```
for (int i = 0; i < 10 && !cursor.isAfterLast(); i++) { 
```

# visual-c++ - 在 C++ 中捕获声卡线路输出

> ID：10759071
> 
> 赞同：1
> 
> 时间：2012-05-25T17:43:57.667
> 
> 标签：visual-c++, delphi-7, c++builder

我尝试学习如何从 PC 设备录制声音。我找到了一个示例，该示例显示了如何从麦克风录制声音。但找不到如何从声卡线路输出的示例。请如果你能帮助我，给我例子，或者给我好的链接，因为我搜索了很多并没有找到。我正在使用 Visual C++、C++ Builder、Delphi。谢谢。

# python - 如何在非唯一项目列表上使用字典理解

> ID：10759072
> 
> 赞同：1
> 
> 时间：2012-05-25T17:44:09.850
> 
> 标签：python, dictionary, list-comprehension

昨天，我正在处理一个问题，我想获取一个非唯一项目的列表并从中制作一个字典，该字典将列表中项目的唯一版本映射到每个项目的出现次数。这听起来很简单，我立即开始为它编写字典理解，只是一旦我开始意识到我不知道如何完成，因为我正在运行的键不是唯一的，并且值应该是相加的. 仍然感觉应该对此有一个优雅的字典理解。想法？

我想要的是执行以下操作的理解：

```
#given
lst = [1,1,1,7,5,8,3,8,5,9,1]
#do
a_dict = defaultdict(int)
for item in lst:
    a_dict[item] +=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:46:36.030

集合模块中的[Counter 类](http://docs.python.org/library/collections.html#counter-objects)看起来可以做你想做的事。

你可以这样做：

```
from collections import Counter
a_dict = Counter(lst) 
```

早于 2.7 的 Python 版本没有 Counter 类，但您可以执行以下操作：

```
a_dict = dict((x, lst.count(x)) for x in set(lst)) 
```

`set`转换不是必需的。对于具有许多相同项目的大型列表，它可能会使代码运行得更快，但我不确定，因为我没有对其进行基准测试。

# ruby-on-rails - Ruby 数组转换成带括号的字符串

> ID：10759074
> 
> 赞同：1
> 
> 时间：2012-05-25T17:44:31.893
> 
> 标签：ruby-on-rails, ruby, arrays, string

我有一个像这样的数组： ["data","data2"]

将其转换为带括号的字符串的最类似于 Ruby 的方法是什么：“['data','data2']”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:56:44.103

我不能说这是多么“红宝石”，但这是我通常会做的：

```
puts "['" + array_of_strings.join("','") + "']" 
```

# qtip2 - 没有标题栏的 qtip2 关闭按钮

> ID：10759078
> 
> 赞同：8
> 
> 时间：2012-05-25T17:44:40.377
> 
> 标签：qtip2

我想要一个没有标题栏的 qtip2 工具提示，但在角落里有一个关闭图标。有没有办法指定它，或者我必须使用创建它的代码？我正在考虑将按钮向左或向右浮动，允许其余内容填充工具提示 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T11:00:11.017

始终单独保留关闭标记并使用当前的 qTip 文本进行更新。

```
$('.selector').qtip({
    content: {
        text: function(api) {
          var qTipContent = $('.close-markup').html();
          qTipContent += $('.qtip-content').html();
          return $('.qtip-content').html();
        }
    }
});
$('.close-markup').qtip('destroy'); 
```

试试上面的代码。

注意：不需要弄脏 qTip 关闭代码片段！

# css - 在 Ember 视图渲染时添加、删除 css 类

> ID：10759081
> 
> 赞同：1
> 
> 时间：2012-05-25T17:45:15.717
> 
> 标签：css, view, ember.js

如何在每次进行 ember 时根据 contentBinding 中的值添加、删除和更改 ember 元素的 css 类？

在 didInsertElement 中执行类似下面的操作，但是当基于控制器的内容值添加 css 类时，视图元素已附加到视图，因此 css 不会被应用。

在渲染视图元素时，还有其他方法可以执行此操作吗？

```
didInsertElement: function() {
      this._super();
    var personStr= this.get("content").person;
       if(personStr==1){
            this.$("img").addClass("add-person");
            this.$("img").removeClass("view-person");
            this.$("img").removeClass("edit-person");
        } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:28:42.870

您可以使用 a`Ember.CollectionView`并指定依赖于`content`in的类`classNameBindings`。请参阅[API 文档的](http://docs.emberjs.com/#doc=Ember.View&src=false)**HTML 类属性**部分。

在此处查看示例[http://jsfiddle.net/pangratz666/b4xGP/](http://jsfiddle.net/pangratz666/b4xGP/)：

```
Ember.CollectionView.create({
    content: [{name: 'Brunö'}, {name: 'Alfred'}, {name: 'Hansi'}],

    itemViewClass: Ember.View.extend({
        templateName: 'item',
        classNameBindings: 'beginsWithA'.w(),

        beginsWithA: function() {
            var name = this.getPath('content.name');
            if (!Ember.empty(name)) {
                return name.indexOf('A') === 0;
            }
        }.property('content.name')
    })
}).append();​ 
```

# tsql - 从内部存储过程调用时，用户定义的函数返回不同的结果

> ID：10759082
> 
> 赞同：0
> 
> 时间：2012-05-25T17:45:20.133
> 
> 标签：tsql, sql-server-2005, reportingservices-2005

我在客户端的 SQL Server 2005 数据库中工作，我看到一些奇怪的行为。我对 2008 年有一点经验，但这是我与 2005 年的第一次战斗，所以我希望这与我缺乏经验有关。

**我想做什么？**我正在 SSRS 2005 中开发销售仪表板。报告参数之一是我需要传递给存储过程的多值参数。我在一些博客以及 SO 上找到了解决方法，并实现了一个拆分逗号分隔的 varchar 并返回表的函数。我需要这个函数从过程中返回正确的值，因为我正在为 SSRS 数据集调用存储过程。

**我的问题：**当我直接从 SSMS 中为给定值执行函数时，我收到一个包含 7 行的表（如预期的那样）。当我执行一个调用该函数的过程并传递相同的值时，它只返回表中的 1 行。执行函数和过程的用户也是这两个对象的所有者。

在发布问题之前，我已经做了很多功课来达到这一点，所以我希望我已经在这里完成了我的尽职调查。客户没有授予我使用 SQL Profiler 的权限，因此我无法朝那个方向进行挖掘。

我认为这可能是权限问题，但该函数仍在执行并且确实返回 1 行而不是 7 行这一事实让我感到困惑。它似乎只返回逗号分隔字符串中的第一个数字。

**我的问题：**到底是什么导致了下面概述的行为？如果我应该提供任何其他信息，请告诉我。

**从 SSMS 执行：**

```
declare 

    @SiteID varchar(max);

    set @SiteID = '1,2,3,4,5,6,7';

BEGIN

exec usp_function_test @SiteID;

select * from udf_rpt_multivalueparamtotable(@SiteID,',',1)

END 
```

**过程的输出：**

```
Val
---
1 
```

**选择语句的输出：**

```
Val
---
1
2
3
4
5
6
7 
```

**功能代码：**

```
CREATE FUNCTION [dbo].[udf_RPT_MultiValueParamToTAble](
            @String VARCHAR(max), /* input string */
   @Delimeter char(1),   /* delimiter */
   @TrimSpace bit )      /* kill whitespace? */
RETURNS @Table TABLE ( [Val] VARCHAR(4000) )
AS

BEGIN
    DECLARE @Val    VARCHAR(4000)
    WHILE LEN(@String) > 0
    BEGIN
        SET @Val    = LEFT(@String,
             ISNULL(NULLIF(CHARINDEX(@Delimeter, @String) - 1, -1),
             LEN(@String)))
        SET @String = SUBSTRING(@String,
             ISNULL(NULLIF(CHARINDEX(@Delimeter, @String), 0),
             LEN(@String)) + 1, LEN(@String))
  IF @TrimSpace = 1 Set @Val = LTRIM(RTRIM(@Val))
    INSERT INTO @Table ( [Val] )
        VALUES ( @Val )
    END
    RETURN
END 
```

**测试程序代码：**

```
CREATE PROCEDURE usp_function_test (@SiteID varchar)
AS

SET NOCOUNT ON

BEGIN

select * from udf_rpt_multivalueparamtotable(@SiteID,',',1)

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:08:18.880

尝试为 SP 参数定义一个比例 -

```
CREATE PROCEDURE usp_function_test (@SiteID varchar(max)) 
```

当您声明一个`varchar`没有比例的参数时，它默认为比例 1 - 您的输入值被静默截断。

参考这里 - [http://msdn.microsoft.com/en-us/library/ms176089.aspx](http://msdn.microsoft.com/en-us/library/ms176089.aspx)

# javascript - 禁用 JavaScript 时的 Css 回退

> ID：10759084
> 
> 赞同：0
> 
> 时间：2012-05-25T17:45:21.460
> 
> 标签：javascript, jquery, css, jquery-mobile, fallback

使用 jQuery Mobile，我使用这个片段来调用库...

```
<script src="//code.jquery.com/jquery-1.6.4.min.js"></script>
<script>
if(typeof jQuery === 'undefined') 
{
    document.write(unescape('%3Cscript src="js/jquery-1.6.4.min.js"%3E%3C/script%3E'));
    document.write(unescape('%3Cscript src="jqm/jquery.mobile-1.1.0.min.js"%3E%3C/script%3E'));     
    document.write(unescape('%3Clink rel="stylesheet" href="jqm/jquery.mobile-1.1.0.min.css"%3E%3C/script%3E'));
    document.write(unescape('%3Clink rel="stylesheet" href="jqm/jquery.mobile.structure-1.1.0.min.css"%3E%3C/script%3E'));
}
else
{
    document.write(unescape('%3Cscript src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"%3E%3C/script%3E'));
    document.write(unescape('%3Clink rel="stylesheet" href="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css"%3E%3C/script%3E'));
    document.write(unescape('%3Clink rel="stylesheet" href="//code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.min.css"%3E%3C/script%3E'));
}
</script> 
```

但是如果 JavaScript 被禁用，如何调用样式表呢？

如果我使用（我有点愚蠢！）......

```
<noscript>
<link rel="stylesheet" href="jqm/jquery.mobile-1.1.0.min.css" />
<link rel="stylesheet" href="jqm/jquery.mobile.structure-1.1.0.min.css" />
</noscript> 
```

...我的页面是空白的。

谢谢你的帮助。

文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:55:23.743

[Modernizr](http://modernizr.com/)方法是使用 JavaScript在加载时向 HTML 标记添加一个名为“js”的类，并删除一个名为“no-js”的类（在这种情况下）您自己添加。

现在，您可以将一些 CSS 样式仅添加到 的后代，`.js`而将其他样式仅添加到 的后代`.no-js`，根据自己的喜好自定义其中一种。

# c# - 直接设置数据源时如何防止水晶报表请求凭据/参数？

> ID：10759087
> 
> 赞同：1
> 
> 时间：2012-05-25T17:45:37.570
> 
> 标签：c#, crystal-reports

我使用反射来提取 Crystal Report 使用的 sql 查询。然后我使用这个提取的 sql（非常小心）填充数据集，然后 IO 通过 SetDataSource 方法绑定到我的 ReportDocument 对象。这一切都很顺利，但是每当我尝试查看或导出我的报告时，它都要求我提供我的凭据/参数值，这违背了手动查询/绑定我的数据的目的。

当我的报告数据被推送到报告中时，是否有任何方法可以提供凭据/参数（即我可以让报告不直接从数据库中刷新自己吗？）我尝试设置“保存数据”值，但似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:31:39.260

可能会有所帮助：

```
ReportDocument cryReportDocument = .......;
cryReportDocument.SetDatabaseLogon("userName", "password");
cryReportDocument.SetParameterValue("parameterName", value);
CrystalReportViewer1.ReportSource = cryReportDocument; 
```

# sql-server - SQL Server 将时间戳数据类型转换为十进制

> ID：10759089
> 
> 赞同：8
> 
> 时间：2012-05-25T17:45:55.183
> 
> 标签：sql-server, sql-server-2008, tsql

一直试图弄清楚这一点，并根据 MSDN 上的 Cast and Convert Documentation，这应该是可能的（ [http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)）

看看转换表。

![在此处输入图像描述](../Images/36e05f0834f2f06fcef6e073b88166e5.png)

我正在运行以下代码：

```
CREATE TABLE TableName (
    ID bigint Identity(1,1),
    SomeValue nvarchar(20) not null,
    TimestampColumn timestamp not null)

Insert Into TableName (SomeValue)
values ('testing')

SELECT Convert(decimal, TimeStampColumn) from TableName 
```

但是我只是收到以下错误：

> 将数据类型时间戳转换为数字时出错。

根据文档，这应该是可能的，还是我遗漏了什么？注意我还需要转换回相同的时间戳值。

```
SELECT TimeStampColumn, Convert(timestamp, Convert(decimal, TimeStampColumn)) 
FROM TableName 
```

最后，上面的查询应该呈现相同的值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T18:30:46.340

尝试这个; 虽然 MSDN 说这是一个隐式转换，但它实际上不起作用。所以，我正在做的是将它转换为 INT，然后转换为十进制（无论如何，INT 到十进制都是隐式的）

```
select val, CAST((CONVERT(bigint, timestampcol)) as decimal) as 'TS as decimal' 
from teststmp 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T19:10:15.657

我认为这是一种更安全的方式。

```
SELECT CASE 
         WHEN Cast(timestampcol AS BIGINT) >= 0 THEN 
         Cast(timestampcol AS BIGINT) 
         ELSE 18446744073709551615 + Cast(timestampcol AS BIGINT)
       END 
```

以下显示，否则直接转换为 bigint 将环绕为负数，这可能不是所需的结果。

```
USE tempdb;

IF DB_ID('TestDBTS') IS NOT NULL
    DROP DATABASE TestDBTS;

CREATE DATABASE TestDBTS;

USE TestDBTS;

SELECT CAST(CAST(@@DBTS AS BIGINT) AS DECIMAL(20,0))
/*2000*/

/*Hack to manually set the timestamp. Undocumented, Unguaranteed & Dangerous!
  Do not use except on test databases.*/
DBCC WRITEPAGE(TestDBTS, 1, 9, 412, 8, 0xFFFFFFFFFFFFFF7F);

ALTER DATABASE TestDBTS SET OFFLINE WITH ROLLBACK IMMEDIATE;

ALTER DATABASE TestDBTS SET ONLINE WITH ROLLBACK IMMEDIATE;

USE TestDBTS;
SELECT CAST(CAST(@@DBTS AS BIGINT) AS DECIMAL(20,0))
/*9223372036854775807*/

CREATE TABLE T
(
X INT,
Y TIMESTAMP
)

INSERT INTO T(X) VALUES(1)

SELECT CAST(CAST(@@DBTS AS BIGINT) AS DECIMAL(20,0))
/*-9223372036854775807*/

SELECT CASE WHEN CAST(@@DBTS AS BIGINT) >= 0 
            THEN CAST(@@DBTS AS BIGINT)
            ELSE 18446744073709551615 + CAST(@@DBTS AS BIGINT) 
       END
/*9223372036854775808*/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T17:54:02.883

尝试这个：

```
SELECT CONVERT(decimal, TimeStampColumn + 0)
FROM TableName 
```

# sql-server - 使用带有 ADO 参数化查询的 Unicode 字符串时出现“不允许的隐式转换”：是否存在“使用任何兼容的”数据类型？

> ID：10759093
> 
> 赞同：1
> 
> 时间：2012-05-25T17:46:10.100
> 
> 标签：sql-server, sql-server-2008-r2, ado

我正在尝试参数化查询，例如：

```
INSERT INTO Trunions (Encabulator) VALUES (?) 
```

这来自（示例）查询：

```
INSERT INTO Trunions (Encabulator) VALUES ('Mẫrsểl vằnęs') 
```

现在只要 SQL Server 数据库表包含某种兼容的*字符串*列，此查询就会运行：

*   `char(300)`
*   `nchar(300)`
*   `varchar(300)`
*   `nvarchar(300)`
*   `text`
*   `ntext`
*   `varchar(max)`
*   `nvarchar(max)`

我*原来*的**功能**查询将起作用。一旦我参数化查询，代码就不再起作用：

```
String sql = "INSERT INTO Trunions (Encabulator) VALUES (?)";
String value = "Mẫrsểl vằnęs";

Command cmd = new Command();
...
cmd.Set_CommandText(sql);
cmd.Set_CommandType(adCmdText);
cmd.Parameters.Append(cmd.CreateParameter("param1", adLongVarWChar, adParamInput, -1, value);
cmd.Execute(out recordsAffected, Null, adCmdText | adExecuteNoRecords); 
```

SQL Server 报错参数类型与列数据类型不匹配（即地毯与窗帘不匹配）：

> 不允许从数据类型 %s 到数据类型 %s、表 '%s'、列 '%s' 的隐式转换。
> 使用 CONVERT 函数运行此查询

在此示例中，我尝试使用*“最佳”*（即最具包容性的数据类型）`adLongVarWChar`：.

但我需要的是可以替代“任意长度的 unicode 字符串”的数据类型。

将哪种 ADO 参数类型放入 SQL Server 字符串列中？

**笔记：**

*   ADO，不是 ADO.net
*   [这个问题是关于错误](https://stackoverflow.com/questions/10726212/using-wrong-type-with-parameterized-query-causes-error)和对解决方案的开放式希望。这个问题是关于一个通用的“文本”ado数据类型（变体？未知？字符串？）（是的，谁把我的标题改成了什么）

# java - 休眠更新不起作用

> ID：10759094
> 
> 赞同：0
> 
> 时间：2012-05-25T17:46:14.013
> 
> 标签：java, mysql, hibernate

我是 hibernate 新手，我试图用以下代码更新映射对象，但它没有更新

```
factory = config.buildSessionFactory();
session = factory.getCurrentSession();
Transaction t = session.beginTransaction();
String hql = "UPDATE  "+tableName+" SET  "+columnName+" =  '"+columnValue+"' WHERE  id ="+id+";";
Query query=session.createSQLQuery(hql);
t.commit(); 
```

我错过了什么吗？它不会崩溃也不会更新记录。

注意：我使用的是 Hibernate3 和 Mysql

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T17:48:09.320

你不见了`query.executeUpdate()`；

此外，如果您要更新映射对象，我建议您对 java 对象进行更改，并让 Hibernate 为您进行更新。或者至少使用 hql 查询，而不是本地查询。

确保您的 persistence.xml 文件将 show_sql 设置为 true 并查看日志以查看更新是否已执行。

```
<property name="hibernate.show_sql" value="true"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T20:24:39.773

您需要使用`query.executeUpdate()`来运行查询。
还建议您使用`parameters`而不是内联参数。例如。如果是，`columnName = O'Reilly`那么整个查询都会出错。此外，如果它是一个映射对象，您可以使用 HQL 而不是 SQL 查询

相反，您可以使用它

```
//entity is your hibernate entity obj
String hql = "UPDATE  " + entity.getClass().getName + " as entity SET entity." + fieldName  + "= :columnValue WHERE  entity = :entity";
Query query=session.createQuery(hql).setParameter("columnValue", columnValue).setParameter("entity", entity);
query.executeUpdate(); 
```

请注意，您不需要使用单引号。`setParameter`处理它。

# html - 缺少最外边距且视口较小

> ID：10759096
> 
> 赞同：3
> 
> 时间：2012-05-25T17:46:23.797
> 
> 标签：html, css, margin

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:15:32.770

## Background Info

The default width of the `body` element is the `html` width which is also the window width (or `iframe` width in such a case). The default behavior of a block level element is that the scroll only accounts for the actual element (hence, it doesn't care about the right margin if there is nothing more to display on the right). This causes your right margin issue. (By the way, according to [this article](http://phrogz.net/css/htmlvsbody.html), the scroll bars are actually appearing on the html element, not the body.)

## For `Position: Absolute`

By having `#wrapper` with `position: absolute`, the `body` element ends up with zero height. This causes your bottom margin issue in this case.

**A solution** is to account for the margins like so ([see fiddle](http://jsfiddle.net/ARf8x/9/)):

```
body {
    min-height: 320px;
    min-width: 420px; 
} 
```

This assigns a minimum dimension to the `body` equal to the width + margins and height + margins of the absolute element.

Now, I'm not sure what you expect to happen if you have `right: 0` set, as forcing a left margin to "remain" just ends up causing, in my opinion, a premature scroll bar to activate. See [this fiddle](http://jsfiddle.net/ARf8x/10/).

## Regarding `Position: Static`

The default block level behavior can be changed by forcing a shrink-wrap like behavior on the body element using ([see fiddle](http://jsfiddle.net/ARf8x/14/)):

```
body { display: inline-block; } 
```

Note: that `body { float: left; }` did not give me the same shrink-wrap behavior ([see fiddle](http://jsfiddle.net/ARf8x/16/)).

The `inline-block` element will account for the margin of its inner elements to determine its own width, which then allows the right margin to work.

The reason the `display: inline-block;` solution does not work on the `#wrapper` being `position: absolute` is because it makes the `body` have a zero width and height, since the absolute positioning takes that element out of flow and there is nothing left inside `body` to give it dimension.

***The above was currently only tested on IE9.***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:04:40.460

I'm afraid there's only one simple and quick solution, and that is to create a new div inside the wrapper div.

[http://jsfiddle.net/QHKmN/2/](http://jsfiddle.net/QHKmN/2/)

CSS

```
#wrapper {
    background: black;
    height: 300px;
    margin: 10px;
    position: absolute;
    top: 0;
    left: 0;
    width: 400px;
}

#inwrapper {
    background: green;
    height: 290px;
    margin: 5px auto;
    position: relative;
    width: 390px;
}
​ 
```

HTML:

```
<div id="wrapper">
    <div id="inwrapper">

    </div>
</div>
​ 
```

And there's your margin.

# javascript - $posts jquery 提交我的表单

> ID：10759097
> 
> 赞同：0
> 
> 时间：2012-05-25T17:46:26.057
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
    function claim()
    {
        var c = confirm('You sure?');

        if(c)
        {
            var password=prompt("Please mention pw","");
            if (password!=null && password!="")
              {
                    $.post("/claim/<?php echo $refnr; ?>", { partner_pwd: password },
                       function(data) { 
                            alert(data);
                            if(data == '1')
                            {
                                return true;
                            }else{
                                return false;
                            }
                       });
              }else{
                return false;
              }
        }else{
            return false;
        }
    }
</script> 
```

测试时，我进入请提及密码，在我输入并按 OK 后，它会提交我的表单，而不是制作 $.post 并且仅在 data == '1' 时提交我的表单（返回 true）

在我的提交按钮上调用了 claim()；

```
<input type="submit" name="submit" onclick="return claim()"; value="Submit" /> 
```

我尝试了警报调试，这是真的，就像我认为它在读取 $.post() 时自动提交一样，我只希望它在数据为 1 时提交（通过返回 true）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:52:31.430

好吧，如果您将表单放入网站，其目标就是提交表单。

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)（向下滚动到最后一个以 开头的示例`Example: If you'd like to prevent forms from being submitted unless a flag variable is set, try:`）

如上面的链接所述，您应该更改表单的操作而不是某些页面，并执行类似`action="javascript:claim()"`. 我认为这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:00:42.510

你的请求的`return true`and `return false`inside`$.post`除了从回调中返回之外什么都不做。它不会阻止表单提交。相反，请尝试完全阻止提交，然后在您希望提交发生时触发它。

```
function claim() {
    var c = confirm('You sure?');

    if (!c) {
        return false;
    }

    var password = prompt("Please mention pw", "");
    if (password != null && password != "") {
        $.post("/claim/<?php echo $refnr; ?>", {
            partner_pwd: password
        }, function(data) {
            alert(data);
            if (data == '1') {
                $("#myform").submit();
            }
        });
    }
    return false;
}​ 
```

请注意，无论有效性如何，我们*总是退出该功能。* `return false`如果有效，我们直接触发表单的提交事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:52:23.550

您在提交时的 onclick 方法不起作用，因为无论如何都会提交表单。

例如，您应该在表单上的事件上设置一个侦听器，`onsubmit();`或者另一个解决方案是在其中放置`onsubmit`带有您的 javascript 函数的属性，并使用该函数从您的 javascript 提交表单`$('#form').submit();`。

# linux - wordpress 权限和安全性

> ID：10759098
> 
> 赞同：1
> 
> 时间：2012-05-25T17:46:28.333
> 
> 标签：linux, wordpress, security

我已将我的 wordpress 网站从共享主机移至新的 vps。搬家后，我遇到了关于 timthumb 和上传图片的问题，这些问题只能通过 chmoding 777`uploads`和子目录以及`cache`主题目录中的目录来解决。

我的问题是：这不是一个安全漏洞吗？这是一个wordpress问题，还是我在这里遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:51:02.483

是的，`777`这是一个安全漏洞，[WordPress Codex 专门解决了这个问题](http://codex.wordpress.org/Changing_File_Permissions#The_dangers_of_777)，并就如何设置权限提供了建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:51:50.633

是的，777 非常不安全。WordPress 不需要 777 用于任何目录，也不需要正确开发的插件。WordPress 在大多数目录上需要不超过 755 个。

在共享主机上，权限方案由主机管理。在 VPS 上，您需要自己进行一些管理或所有者、组和权限。

有关 WordPress 的正确权限和所有者/组，请参阅[更改文件权限 « WordPress Codex](http://codex.wordpress.org/Changing_File_Permissions)和[强化 WordPress « WordPress Codex](http://codex.wordpress.org/Hardening_WordPress)。

# python - python中对象和实例的区别？

> ID：10759099
> 
> 赞同：21
> 
> 时间：2012-05-25T17:46:32.147
> 
> 标签：python, oop

这发生在python2.7

我正在研究python中元类的想法，几乎所有的教程都将对象称为类的实例，在python中。但是，在使用 class A(): 定义类的形式时，我看到了这个：

```
class ClsDef1():
    pass
C1 = ClsDef1()
print C1
<__main__.ClsDef1 instance at 0x2aea518>

class ClsDef2(object):
    pass
C2 = ClsDef2()
print C2
<__main__.ClsDef2 object at 0x2ae68d0> 
```

这意味着当从不是对象固有的类创建实例时，该实例是一个实例，但是当一个类是对象固有的时，该类的实例是一个对象？

谁能解释其中的区别？在现实生活中我应该使用哪一个？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T17:59:42.010

这就是新式和旧式类的区别，[文档中有详细的](http://docs.python.org/reference/datamodel.html)解释。基本上，在 Python 2.x 中，您应该确保始终从 object 继承，以便获得新样式的类。在 Python 3 中，旧式类已完全消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T18:23:33.140

简短回答：在 python 中，所有对象都有一个类型（由 type(x) 返回），它也是一个对象。
如果't'是一个类型对象，那么它的类型就是特殊类型'type'。所以 (type(type(x)) is type) 总是 True。在旧类中，用户定义的“类”是“类obj”类型的对象——任何类的每个实例都是“实例”类型的对象。即有两种实现类的内置类型“classobj”和“instance”。从一个实例到它的类的链接是通过它的`__class__`成员。

使用新类：用户定义的类实际上是新类型对象（它们的类型是“type”，而不是“classobj”），当您创建它们的实例时，每个实例的 type() 就是类对象。因此，不同用户定义类的对象现在具有不同的类型。并且类与所有内置类型基本相同；对于旧类，instance->class 和 object->type 有一个单独的结构，新类对两者都使用 object->type。

文档中还有更多内容，但这是它的核心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-15T05:44:26.040

与“类”和“类型”之间的歧义不同，“实例”是“对象”的同义词。这样想：对象是类型的实例。因此，“42 是 int 类型的实例”等价于“42 是 int 对象”。我通常交替使用“实例”和“对象”。报价来源：[https ://eli.thegreenplace.net/2012/03/30/python-objects-types-classes-and-instances-a-glossary](https://eli.thegreenplace.net/2012/03/30/python-objects-types-classes-and-instances-a-glossary)

# java - HttpURLConnection.getResponseCode 未获取 HTTP 响应代码 206

> ID：10759101
> 
> 赞同：0
> 
> 时间：2012-05-25T17:46:39.370
> 
> 标签：java, http, rest, testing, httpurlconnection

我有一些使用 HttpURLConnection 来执行 RESTful API 的自动化测试。

我的部分代码（如下）断言响应返回某个 HTTP 响应代码。我期待 HTTP 206 响应，但 getResponseCode 始终返回 200。但是，如果我直接使用 curl 访问 url，我会得到预期的“HTTP/1.1 206 Partial Content”。

```
 URL requestURL = new URL(url);
    HttpURLConnection connection = (HttpURLConnection) requestURL.openConnection();
    try {
        connection.setRequestProperty("Connection", "close");
        connection.setReadTimeout(5000);

        assertEquals("Request successfully handled", 
                expectedResponseCode, 
                connection.getResponseCode());

        InputStream input = connection.getInputStream();
        try {
            return toString(input);
        } finally {
            input.close();
        }
    } finally {
        connection.disconnect();
    } 
```

关于为什么会发生这种情况以及如何获得我想要的行为的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:49:20.190

试试`connection.getResponseMessage()`方法？它可能包含找到实际代码的 REST 响应。连接响应可能已经到来，但在消息中可以找到实际的操作响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:08:54.437

您发布的代码按预期执行。这是一个完整的测试用例来证明它：

```
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.InetSocketAddress;
import java.net.URL;

import static org.hamcrest.CoreMatchers.equalTo;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertThat;

public class Http206Test {
    private HttpServer server;

    @Before
    public void setUp() throws Exception {
        server = HttpServer.create(new InetSocketAddress(8080), 0);
        server.createContext("/", new HttpHandler() {
            public void handle(HttpExchange t) throws IOException {
                t.sendResponseHeaders(206, 0);
                t.getResponseBody().write("I'm a 206 response".getBytes());
                t.getResponseBody().close();
            }
        });
        server.start();
    }

    @After
    public void tearDown() throws Exception {
        server.stop(1);
    }

    @Test
    public void httpUrlConnection206Response() throws Exception {
        String body = getContent("http://localhost:8080", 206);
        assertThat(body, equalTo("I'm a 206 response"));
    }

    @Test(expected = AssertionError.class)
    public void httpUrlConnection205Response() throws Exception {
        getContent("http://localhost:8080", 205);
    }

    public String getContent(String url, int expectedResponseCode) throws IOException {
        URL requestURL = new URL(url);
        HttpURLConnection connection = (HttpURLConnection) requestURL.openConnection();
        try {
            connection.setRequestProperty("Connection", "close");
            connection.setReadTimeout(5000);
            assertEquals("Request successfully handled",
                    expectedResponseCode,
                    connection.getResponseCode());
            InputStream input = connection.getInputStream();
            try {
                return toString(input);
            } finally {
                input.close();
            }
        } finally {
            connection.disconnect();
        }
    }

    public String toString(InputStream stream) throws IOException {
        int data;
        StringBuilder builder = new StringBuilder();
        while ((data = stream.read()) != -1) {
            builder.append((char) data);
        }
        return builder.toString();
    }
} 
```

这意味着您的测试是正确的，并且您的服务存在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:30:43.093

所以问题是我在设置响应代码之前调用了 write() 。虽然这在与 curl 一起使用时似乎有效，但它不适用于单元测试，因为代码在输入后立即断言返回代码。

问题代码：

```
String responseMessage = response.getMessage();
OutputStreamWriter out = new OutputStreamWriter(httpResponse.getOutputStream());
out.write(responseMessage);
out.close();
httpResponse.setContentType("application/json");
httpResponse.setContentLength(responseMessage.length());
httpResponse.setStatus(response.getResponseCode()); 
```

固定代码：

```
httpResponse.setStatus(response.getResponseCode()); //Do this first!
String responseMessage = response.getMessage();
OutputStreamWriter out = new OutputStreamWriter(httpResponse.getOutputStream());
out.write(responseMessage);
out.close();
httpResponse.setContentType("application/json");
httpResponse.setContentLength(responseMessage.length()); 
```

# ruby-on-rails - Activerecord 模型的作用域 UID

> ID：10759104
> 
> 赞同：0
> 
> 时间：2012-05-25T17:47:01.267
> 
> 标签：ruby-on-rails, activerecord, associations

我有这个结构：

```
Enterprise
  has_many :projects

Projects
  has_many :clients

Clients
  has_many :tasks 
```

我试图让每个企业从 1 开始到他们的任务。所以我做了：

```
Tasks
  to_param
    uid.to_s
  end 
```

并在我的控制器中找到一个任务：

```
Task.find_by_uid(params[:id]) 
```

所有 url 都很漂亮，为每个企业确定任务编号。（我在创建任务时处理 uid，增加同一企业的最后一个 uid）

但是，Task.find_by_uid 不仅仅限定 current_user.enterprise 中的任务。

这似乎是一个非常菜鸟的问题，我正在努力寻找解决方案。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:07:31.890

由于 Rails 2.3.8 不接受嵌套关联，因此您必须在其他模型的某些范围内完成此操作。

[在这里](http://code.alexreisner.com/articles/has-many-through-habtm.html)找到了解决方案

谢谢。

# find - GNU find -size 标志是否损坏？

> ID：10759111
> 
> 赞同：1
> 
> 时间：2012-05-25T17:48:37.263
> 
> 标签：find, gnu

GNU的`-size`标志`find`表现得很奇怪。假设我在一个目录中有以下三个文件：

```
$ lh
total 8.7M
-rw------- 1 wvoq wvoq  42K 2012-05-24 18:25 small
-rw------- 1 wvoq wvoq 7.3K 2012-05-24 18:37 tiny
-rw------- 1 wvoq wvoq 8.7M 2012-05-24 18:37 big 
```

其中两个文件小于 1MB，另一个约为 9MB。哪些文件的大小小于 50K？

```
$ find -type f -size -50k
small
tiny 
```

这是我们所期望的。但是哪些大小小于 1MB？

```
$ find -type f -size -1M
$ 
```

必然地，任何小于 50k 的文件也小于 1M，那么为什么会出现差异呢？更令人不安的是，我们有：

```
$ find -type f -size -2M
small
tiny 
```

这似乎表明`small`并且`tiny`大小在 1 到 2 MB 之间，而实际上它们都小于 50k。这里发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:15:49.343

看起来 find 是，嗯，违反了最小惊喜原则？以其舍入行为。什么小于1M？0M。:-P

# actionscript-3 - Flash Builder 4 + Flash Professional + FlashVars ！= 工作

> ID：10759115
> 
> 赞同：0
> 
> 时间：2012-05-25T17:48:54.550
> 
> 标签：actionscript-3, flash, flash-builder

我有一个连接到 Flash Professional CS5 FLA 的 Flash Builder 4 项目。我不使用 MXML，所有代码都直接在 Flash Builder 中处理。（Flash 本身仅用于库，对于我们的艺术家来说更容易使用）

一切都顺利进行，一切都是从嵌入 SWF 的站点动态生成的 XML 运行的。但到目前为止，我已经在 actionscript 中硬编码了 XML 路径。我只是希望不要这样做。

我已经遵循了至少 45 个关于将 FlashVars 导入 FB4/As3 的教程，但似乎没有任何效果。老派的 <embed> 方法，使用 <object> 方法，甚至使用 swfObject 方法，我似乎无法访问这些 flashvar 属性。

这是我现在拥有的 html：

```
<script>
    var flashvars = {
        xml: "/mapsystem/xml"
    }; // yes that is definitely the correct path, its the same value as when it was hardcoded
    $(function() {
        swfobject.embedSWF("/flash/map.swf", "map", "960", "885", "10.0.0", "expressInstall.swf", flashvars);
    });
</script>
<div id="map">
    swfObject Aint Working
</div> 
```

继承人的动作（这是我的文档类，第一件事）

```
package
{
import flash.display.LoaderInfo;
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.Event;
import flash.text.TextField;
import flash.text.TextFieldAutoSize;

import src.GlobalStage;
import src.Map;
import src.Styles;

public class map extends GlobalStage
{
    public var xmlDoc = "map.xml";

    public function map()
    {   
        var test:TextField = new TextField();
        test.x = 50;
        test.y = 50;
        test.autoSize = TextFieldAutoSize.LEFT;
        test.text = "XML Doc: ";
        this.addChild(test);

        var test2:TextField = new TextField();
        test2.x = 50;
        test2.y = 80;
        test2.multiline = true;
        test2.border = true;
        test2.autoSize = TextFieldAutoSize.LEFT;
        test2.text = "Parameters: \n";
        test2.appendText("Total Parameters: ");

        this.addChild(test2);

        var _params:Object;

        if ( this.loaderInfo.parameters.length != null ) {
            _params = this.loaderInfo.parameters;
        } else {
            // run alt code to init
        }

        for(var pItem:String in _params) {

            test2.appendText("Name: " + pItem + " :: " + _params[pItem] + "\n" );  
        }

                    if(_params['xml'] != null) xmlDoc = _params['xml'];

        test.appendText(xmlDoc);

        var map:Map = new Map(xmlDoc); 
```

现在，当我在本地测试中运行它时，没有按预期显示，但是当涉及到站点本身时，通过 flashvar，xmlDoc 仍然是“map.xml”，我的计数器告诉我有 0参数，当然我的参数列表中没有任何显示。

我花了 8 个小时试图让它发挥作用，坦率地说，我正在脱发并为此睡觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:06:44.723

`loaderInfo.parameters`是`Object`，因此该`if`语句中的条件永远不可能为真（除非您的 flashVars 有一个名为 'length' 的参数）：

```
if (this.loaderInfo.parameters.length != null) { 
```

所以不要检查长度是否不为空，只需检查参数是否不为空：

```
if (loaderInfo.parameters) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:55:33.327

loaderInfo.parameters 是一个对象，它永远不会为空。你必须做的是像这样检查你的 flashvar 的存在：

```
if (loaderInfo.parameters.xml)
{
  var xmlPath:String = loaderInfo.parameters.xml
  // start using xml
}
else
 // run alt code to init
} 
```

# python - 将 .jpg 图像转换为 .png

> ID：10759117
> 
> 赞同：33
> 
> 时间：2012-05-25T17:49:14.790
> 
> 标签：python, python-2.7

我环顾四周并阅读了文档，但没有找到任何方法或解决方案，所以我在这里问。是否有任何包可用于使用 Python 将 JPG 图像转换为 PNG 图像？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-25T17:51:00.097

为此，您始终可以使用[Python 图像库 (PIL) 。](http://www.pythonware.com/products/pil/)可能还有其他包/库，但我以前用它来转换格式。

这适用于 Windows 下的 Python 2.7（[Python Imaging Library 1.1.7 for Python 2.7](http://effbot.org/downloads/PIL-1.1.7.win32-py2.7.exe)），我将它与 2.7.1 和 2.7.2 一起使用

```
from PIL import Image

im = Image.open('Foto.jpg')
im.save('Foto.png') 
```

请注意，您最初的问题没有提到 Python 的版本或您正在使用的操作系统。当然，这可能会有所不同:)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-25T17:52:00.937

Python 图像库： http: [//www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

来自：[http ://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

```
import Image
im = Image.open("file.png")
im.save("file.jpg", "JPEG") 
```

> 节省
> 
> im.save（输出文件，选项...）
> 
> im.save（输出文件，格式，选项...）
> 
> 以给定的文件名保存图像。如果省略格式，则格式由文件扩展名确定（如果可能）。此方法返回无。
> 
> 关键字选项可用于向作者提供附加说明。如果作者不识别选项，它会被默默地忽略。本手册稍后将介绍可用的选项。
> 
> 您可以使用文件对象而不是文件名。在这种情况下，您必须始终指定格式。文件对象必须实现 seek、tell 和 write 方法，并以二进制模式打开。
> 
> 如果保存失败，由于某种原因，该方法将引发异常（通常是 IOError 异常）。如果发生这种情况，该方法可能已经创建了文件，并且可能已经向其中写入了数据。如有必要，由您的应用程序删除不完整的文件。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-05-14T18:15:15.430

当我**在单个目录中搜索文件的快速转换器时**，我想分享这个将当前目录中的任何文件转换为 .png 或您指定的任何目标的简短片段。

```
from PIL import Image
from os import listdir
from os.path import splitext

target_directory = '.'
target = '.png'

for file in listdir(target_directory):
    filename, extension = splitext(file)
    try:
        if extension not in ['.py', target]:
            im = Image.open(filename + extension)
            im.save(filename + target)
    except OSError:
        print('Cannot convert %s' % file) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-18T11:06:15.303

```
from glob import glob                                                           
import cv2 
pngs = glob('./*.png')

for j in pngs:
    img = cv2.imread(j)
    cv2.imwrite(j[:-3] + 'jpg', img) 
```

这个网址：[https ://gist.github.com/qingswu/1a58c9d66dfc0a6aaac45528bbe01b82](https://gist.github.com/qingswu/1a58c9d66dfc0a6aaac45528bbe01b82)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-20T19:08:43.370

```
import cv2

image =cv2.imread("test_image.jpg", 1)

cv2.imwrite("test_image.png", image) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T17:52:45.150

我自己不使用 python，但尝试查看： http: [//www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

```
import Image
im = Image.open("infile.png")
im.save("outfile.jpg") 
```

（取自[http://mail.python.org/pipermail/python-list/2001-April/700256.html](http://mail.python.org/pipermail/python-list/2001-April/700256.html)）

# css - Symfony 2 应用程序在 OVH 服务器中没有 CSS 内容？

> ID：10759121
> 
> 赞同：0
> 
> 时间：2012-05-25T17:49:57.997
> 
> 标签：css, deployment, symfony, setup-deployment, web-deployment

我搜索了将近两天的解决方案，但直到现在我才真正做到，简而言之，我按照本教程中的步骤将我的站点部署到带有 filezilla 的 OVH[服务器](http://pilvee.com/blog/deploiement-symfony2/)

部署后我发现我的网站工作正常，但在 FF 和 Chrome 中没有 CSS 内容，所以当我签​​入 firebug 时，我发现所有 CSS 样式都正确加载但没有内容是空的，JS 文件也加载了内容和所有图像。 IE 我的风格可以正常工作，但没有加载图像？？我在 Ubuntu 上工作，我使用虚拟机来使用 IE...

我几乎做了所有事情，我清除了缓存并更改了所有文件的访问权限，我指定文件 => 705，CSS 和 JS => 604，最后我将所有内容都设置为 777 但仍然没有改变......

一个主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:58:59.083

问题来自资产：当 css 和 js 文件被缩小并使用闭包或 yui css 连接时，调用 ..java 来执行 .jar 文件中包含的 jar 代码。

在 OVH 共享主机服务器上，您没有可用的 java，因此当您运行资产转储命令时 symfony 生成的输出文件实际上是空的（因此您的空 css + js 文件）。

您应该只在本地服务器上缩小这些文件（资产转储），然后将输出上传到您的服务器。不要在生产服务器上运行资产转储！（至少使用 OVH 共享主机）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:53:00.020

我也遇到了这个问题，而罪魁祸首原来是 PCRE 正则表达式库的过时版本，它被编译成 CentOS 风格的 PHP。尝试运行该命令`php -i`或使用该`phpinfo()`功能并检查您的 PCRE 版本是否为 7.0 或更高版本。如果它较旧，则不支持命名捕获组的简写版本。

要解决此问题，请尝试将资产更新**到**使用更兼容的更长版本的命名捕获组的更新版本。如果你不能这样做，你可以`/vendor/assetic/src/Assetic/Filter/BaseCssFilter.php`直接修改有问题的文件。只需将所有出现的 替换`(?<paramname>`为`(?P<paramname>`。

请注意，正确的方法是覆盖此文件，而不是直接在`vendors`目录中修改它。

# ruby - 从 Struct 子类化与使用 attr_accessible

> ID：10759122
> 
> 赞同：1
> 
> 时间：2012-05-25T17:49:59.427
> 
> 标签：ruby

在 Ruby 1.8.6 中，我可以编写`class PerformableMethod < Struct.new(:object, :method, :args)`

现在在 Ruby 1.9.3 中，这会引发错误：`superclass mismatch for class PerformableMethod`

如果我将代码更改为：

```
class PerformableMethod
    attr_accessor :object, :method_name, :args 
```

但是为什么结构不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T08:11:23.910

类名在 1.9 和 2.0 中也是可选的。问题是这样的：

```
> Struct.new(:asdf, :qwer) == Struct.new(:asdf, :qwer)
 => false 
```

即使您为您的`Struct`:

```
> Struct.new("Zxcv", :asdf, :qwer) == Struct.new("Zxcv", :asdf, :qwer)
(irb):22: warning: redefining constant Struct::Zxcv
 => false 
```

这意味着，如果您在加载或需要的文件中有此内容：

```
class MyClass < Struct.new(:qwer, :asdf)
  def some_method
    puts "blah"
  end
end 
```

...然后如果你再次加载它——可能是因为你改变了一些东西并且你想在不重新启动 irb 的情况下尝试它，或者你在开发模式下运行 Rails 并且它在每个请求上重新加载类——那么你会得到异常：

```
TypeError: superclass mismatch for class MyClass 
```

...因为每次您的类定义运行时，它都将一个全新的声明`Struct`为`MyClass`. 如第二个代码块所示，提供类名`Struct.new()`并没有帮助；这只是增加了一个关于重新定义常量的警告，然后打开类无论如何都会失败。

避免异常的唯一方法是将您`Struct`的常量存放在您控制的某个地方，并确保在重新加载文件时不要更改该常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:49:59.567

在输入这个问题时，坐在我旁边的同事想通了。

[Struct](http://www.ruby-doc.org/core-1.9.3/Struct.html)现在将类名作为其第一个参数。

因此，在 Ruby 1.9.3 中，以下工作：

```
class << Struct.new('PerformableMethod', :object, :method, :args) 
```

# safari - 嵌入 youtube 视频，选择 safari 的质量和问题

> ID：10759124
> 
> 赞同：0
> 
> 时间：2012-05-25T17:50:01.050
> 
> 标签：safari, youtube, embed

我用过这段代码

```
<iframe width="640" height="480" src="http://www.youtube.com/embed/....?rel=0" frameborder="0" allowfullscreen></iframe> 
```

嵌入 youtube 视频。

我想自动将质量设置为可用的最大值（在我的情况下显然是 480）；发生的事情是：

1) Firefox 12.0：起始质量永远不是 480，有时是 360，有时是 240（是的，它会不时变化）

2) Safari 5.1.4：只有一个选项，360。为什么？

我阅读了[Youtube - How to force 480p video quality in embed link / <iframe>](https://stackoverflow.com/questions/10229114/youtube-how-to-force-480p-video-quality-in-embed-link-iframe)但即使我增加帧大小也没有任何变化。javascript方法似乎也不可靠。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:57:07.113

尝试在嵌入网址中添加“&ap=%2526fmt%3D18”和“&ap=%2526fmt%3D22”。我相信 D22 是 1280 而 D18 是 460？

嵌入式的语法显然与浏览器的常规 url 不同（这是链接中答案中给出的）

编辑：找到编解码器信息；将 FMT 值放在 D 之后（例如 D18 D22） [http://en.wikipedia.org/wiki/YouTube#Quality_and_codecs](http://en.wikipedia.org/wiki/YouTube#Quality_and_codecs)

# objective-c - 当绑定控件更改时使 NSDocument “编辑”

> ID：10759125
> 
> 赞同：0
> 
> 时间：2012-05-25T17:50:05.797
> 
> 标签：objective-c, interface-builder, cocoa-bindings, key-value-observing, nsdocument

我有一个 NSDictionaries 数组和一个指向数组对象之一的 NSDictionary iVar (*selectedDictionary)。每次用户在 NSTableView 中选择不同的行时，*selectedDictionary 都会指向不同的对象。几个 GUI 控件绑定到 selectedDictionary 实例 (IB)。

每次用户更改上述控件时，我只想使 NSDocument 变脏（编辑）。我认为对数组中的所有对象及其所有 kaypath 使用键值观察有点不够。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:28:14.367

NSDocument 对将文档标记为脏的支持直接来自 NSUndoManager。将文档更改为脏的最简单的方法是执行 Undo 的实现，这基本上意味着在文档正在使用的模型类（如果您选择处理所有存储，则为 NSDocument 的子类）内部执行撤消直接进去）。

苹果在这里有这方面的文档：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UndoArchitecture/Articles/AppKitUndo.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UndoArchitecture/Articles/AppKitUndo.html)

由于您表示您有一系列字典，这将使其实施起来更加困难，但是一旦您确定了这一点，您就会处于良好状态。

或者，如果您不想使用 NSDocument 和 NSUndoManager 提供的免费支持，您可以手动处理 undo 并使用该`updateChangeCount:`方法修改内部对是否发生更改的理解。这需要一些工作，并且可能比仅正确设置撤消有用得多。

至于观察数组中所有对象的效率，我不会担心，除非您对其进行了分析并发现它效率低下。KVO 真的非常高效，我们定期观察数组的每个元素中的多个值而没有发现性能问题。您必须观察数组本身才能处理添加和删除（假设您的数组有这个）。

不过，据我所知，您有一个`selectedDictionary`用于确定显示的其他控件的。在这种情况下，您可以使用 KVO 来观察 selectedDictionary 的值，当它发生变化时，您可以从之前的 selectedDictionary 中移除观察者并将它们添加到当前 selectedDictionary 中的键中。无论如何，这基本上就是绑定为了处理显示和设置所做的事情。

这篇 StackOverflow 帖子中引用了我过去使用的另一个考虑因素： [NSMutableDictionary KVO](https://stackoverflow.com/questions/9611965/nsmutabledictionary-kvo)。如果您在此处查看我的答案，我将概述在添加新密钥或删除现有密钥时获取通知的技巧。它还具有在有任何更改时向您发出通知的好处。这并不总是一个很好的解决方案，但它确实节省了对要观察的键列表进行编码的一些努力。

除此之外，您还必须添加您希望对文档的已保存状态产生影响的每个键。

# c++ - QPropertyAnimation 没有动画

> ID：10759128
> 
> 赞同：0
> 
> 时间：2012-05-25T17:50:21.797
> 
> 标签：c++, qt, animation

这是我的代码：

```
void Widget::update()
{
    if (a==1)
    {
        QPushButton button("Animated Button");
        button.show();

        QPropertyAnimation *animation =
                    new QPropertyAnimation(&button, "geometry");
        animation->setDuration(10000);
        animation->setStartValue(QRect(0, 0, 100, 30));
        animation->setEndValue(QRect(250, 250, 100, 30));

        animation->start();
        a++;
    }
}

void Widget::on_pushButton_clicked()
{
    a=1;
} 
```

我是 C++ 的新手，我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:04:16.443

我建议您阅读一本好的 C++ 书籍，或者至少阅读[http://www.cplusplus.com/doc/tutorial/](http://www.cplusplus.com/doc/tutorial/)。

对于初学者，您可能打算在 on_pushButton_clicked() 中的 a==1 之后调用 update()？还有一个问题是你的按钮在函数结束时超出范围，所以你需要做

```
QPushButton *button = new QPushButton("Animated Button", this); 
```

最后，update() 是 QWidget 中的一个虚函数（我假设它是 Widget 派生的？）。你为什么要覆盖它？您可能想将其命名为 startAnimatinon() 之类的名称。

# java - Java中的加载库问题

> ID：10759129
> 
> 赞同：0
> 
> 时间：2012-05-25T17:50:35.953
> 
> 标签：java, dll, netbeans, java-native-interface, loadlibrary

所以我在java中有这个项目，它使用我编写的jni .dll（我恰当地命名为jniusb），它可以访问usb-hid设备。我已经使用它几个月了，直到昨天我尝试从 jar 而不是直接从 netbeans 启动我的程序时，才出现任何明显问题。经过一些调试后，我将我的问题描述如下：

1.  单击 jar 图标启动我的程序而不加载 dll。在我的 gui 中显示错误消息显示“java.library.path 中没有 jniusb”，即使我将我的 dll 复制到 java 二进制文件夹（过去似乎总是有效）。

2.  我调整了代码以找到当前目录并使用“System.load”（将 dll 复制到与我的 jar 相同的文件夹中）而不是“System.loadLibrary”。这种方法引发了错误“C:\Users\bpaik\Documents\NetBeansProjects\JniUsb\dist\jniusb.dll: Can't load AMD 64-bit .dll on a IA 32-bit platform”。这让我摸不着头脑，因为我绝对是在 AMD 64 位平台上工作，并且用相同的 dll 用完了 netbeans ...

3.  从命令提示符（使用 java.exe 或 javaw.exe）运行 jar 加载 dll 就好了。我认为这可能意味着我遇到了管理员权限问题，所以我通过转到 java 可执行文件并授予管理员权限来测试该理论，但这并没有改变任何东西。（而且我也很确定我以前在没有管理员的情况下使用过加载/加载库......）

我不是 java 专家，所以我已经用尽了我的调试能力，现在希望比我有更多经验的人能认识到我所描述的问题，谢谢。

更新：所以我已经解决了这个问题，但我仍然不知道发生了什么。我对我的 .dll 进行了 x86 构建，并将其与我的 jar 一起放入文件夹中，一切都加载/工作得很好。所以我猜想以某种方式（即使我将我的 jar 的默认程序设置为 x64 JVM）我用 Netbeans 中的 x64 库构建的 jar 在 32 位 JVM 中运行。总结一下：

1.  我的 jar 是使用 netbeans 中的 x64 库构建的，并且在从命令提示符启动时使用 x64 dll 运行良好。
2.  当从图标启动 jar（默认程序设置为 x64 java）时，我的程序和 JVM 以某种方式切换到 32 位 JVM，并且当我使用 32 位版本的 dll 时工作正常。
3.  试图用 32 位 java 显式运行我的 jar 根本不起作用。我的 gui 不显示，命令提示符短暂打开/关闭...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:58:28.330

您的机器上是否安装了多个版本的 Java？看来，当您自己运行 jar 时，您的机器正在为它创建一个 32 位 VM。打开命令提示符并键入`java -version`以检查正在使用的 Java 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:00:42.757

问题 2 肯定是由您运行 32 位 JVM 引起的。Netbeans 大概运行 64 位 JVM。您需要使用 Launch4j 之类的工具来加载正确的 JVM（或同时包含 32 位和 64 位版本的 DLL）。

从命令行，尝试 -d32 和 -d64 来测试该理论。

# javascript - Chrome 扩展中的 Require.JS：未定义定义

> ID：10759130
> 
> 赞同：9
> 
> 时间：2012-05-25T17:50:43.483
> 
> 标签：javascript, google-chrome, google-chrome-extension, scope, requirejs

我正在尝试在我的 chrome 扩展中使用 Requre.js。

这是我的清单：

```
{
    "name":"my extension",
    "version":"1.0",
    "manifest_version":2,
    "permissions": ["http://localhost/*"],
    "web_accessible_resources": [
        "js/test.js"
    ],
    "content_scripts":[
        {           
            "matches":["http://localhost/*"],
            "js":[
                "js/require.js",
                "js/hd_init.js"
            ]
        }
    ]
} 
```

hd_init.js

```
console.log("hello, i'm init");

require.config({
    baseUrl: chrome.extension.getURL("js")
});

require( [ "js/test"], function ( ) {
    console.log("done loading");
}); 
```

js/test.js

```
console.log("hello, i'm test");
define({"test_val":"test"}); 
```

这是我在控制台中得到的：

```
hello, i'm init chrome-extension://bacjipelllbpjnplcihblbcbbeahedpo/js/hd_init.js:8
hello, i'm test test.js:8
**Uncaught ReferenceError: define is not defined test.js:2**
done loading 
```

所以它加载文件，但看不到“定义”功能。这看起来像是某种范围错误。如果我在本地服务器上运行，它应该可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T07:17:54.053

内容脚本中有两种上下文。一个用于浏览器，另一个用于扩展。

您将 require.js 加载到扩展上下文中。但是 require.js 将依赖项加载到浏览器上下文中。`define`没有在浏览器中定义。

我写了一个关于这个问题的（未经测试的）补丁。要使用它，请在 require.js 之后将其加载到扩展上下文中。您的模块将被加载到扩展上下文中。希望这可以帮助。

```
require.attach = function (url, context, moduleName, onScriptLoad, type, fetchOnlyFunction) {
  var xhr;
  onScriptLoad = onScriptLoad || function () {
    context.completeLoad(moduleName);
  };
  xhr = new XMLHttpRequest();
  xhr.open("GET", url, true);
  xhr.onreadystatechange = function (e) {
    if (xhr.readyState === 4 && xhr.status === 200) {
      eval(xhr.responseText);
      onScriptLoad();
    }
  };
  xhr.send(null);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:06:16.917

现在推荐的方法是使用 cajon ( [https://github.com/requirejs/cajon/](https://github.com/requirejs/cajon/) )。请参阅[https://groups.google.com/d/msg/requirejs/elU_NYjunRw/3NT9NIFL2GUJ](https://groups.google.com/d/msg/requirejs/elU_NYjunRw/3NT9NIFL2GUJ)。

# ruby-on-rails - Rails 路由：即使使用 friendly_id gem，URL 也不会改变

> ID：10759131
> 
> 赞同：0
> 
> 时间：2012-05-25T17:50:59.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

过去两天我一直在尝试，但最终失败了。我想获得这样的网址：`dresses/type/flower-girl`但我所拥有的只是`/dresses/type/4`

我有`Shop has_many Dresses`和`Type has_many Dresses`。在我的`Dress`表中，我有`type_id`引用该`Type`表的列。

这是我的代码：

```
# Routes file
resources :dresses 
match '/dresses/type/:id' => 'dresses#type' 
```

* * *

```
# Type.rb model
extend FriendlyId
friendly_id :name, use: :slugged 
```

* * *

```
# Dresses Controller
def index
  @types = Type.all
end

def type
  @dresses = Dress.find_all_by_type_id(params[:id])
end 
```

* * *

```
# View (index.html.erb)
<% @types.each do |type| %>
  <%= link_to type.name, :action => "type", :id => type.id %>
<% end %> 
```

* * *

我也尝试过在路由、控制器和视图中使用`:name`替换，但它们却产生了。`:id``/dresses/type/Flower%20Girl`

我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:12:43.277

好的，在您的索引视图中，将其更改
`<%= link_to type.name, :action => "type", :id => type.id %>`为
`<%= link_to type.name, :action => "type", :id => type.slug%>`

我想friendly_id 并不神奇地支持自定义路由，因此您最终可能会在控制器中通过 slug 而不是 id 来查找记录。

# android - 在android平台上自动裁剪/压缩视频

> ID：10759135
> 
> 赞同：1
> 
> 时间：2012-05-25T17:51:04.877
> 
> 标签：android

我今天注意到，如果你在 iPhone 上拍摄视频并告诉操作系统通过电子邮件发送它，操作系统会缩小视频然后发送副本（保留原件）。有谁知道这是否是android平台上的功能？

# php - CakePHP 加密不是很好用吗？

> ID：10759137
> 
> 赞同：0
> 
> 时间：2012-05-25T17:51:21.610
> 
> 标签：php, cakephp, md5

我有一个带有 PHP pass + salt md5 加密的旧数据库，我正在尝试将其与 CakePHP 一起使用，但蛋糕加密结果与我的不匹配：

```
$pass = 'francis';
$data['raw_pass'] = $pass; 
$data['cake_hash_pass'] = Security::hash($pass, 'md5', $use_salt);
$data['php_md5_pass'] = md5($pass . ($use_salt ? '123' : ''));
var_dump($data); 
```

结果`$use_salt = false;`如下：

```
array
    'raw_pass' => string 'francis'
    'cake_hash_pass' => string 'd0ab7fe6c314f4fe5b6c18a0157c96b4'
    'php_md5_pass' => string 'd0ab7fe6c314f4fe5b6c18a0157c96b4' 
```

匹配，没问题。但是当我加盐时`$use_salt = true;`

```
array
    'raw_pass' => string 'francis' (length=7)
    'cake_hash_pass' => string '74055e005d086abb69c1f82e8bf1f061' (length=32)
    'php_md5_pass' => string '8d709b4b6461aef614529a83d883c64b' (length=32) 
```

结果不一样......我有点卡在这里，我可以阅读 CakePHP 文档：

"布尔 $salt 可选 false

如果为真，则自动将应用程序的盐值附加到 $string (Security.salt)"

正在使用“。” 在`$pass . '123'`不附加？

另外，在我的 core.php 文件中：

```
/**
 * A random string used in security hashing methods.
 */
    Configure::write('Security.salt', '123'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:35:37.953

> 正在使用“。” 在 $pass 中。'123' 不附加？

您可以立即进行测试并告诉我们：

```
$temp = ($pass . ($use_salt ? '123' : ''));
echo $temp; 
```

# c++ - 具有非指针/引用返回类型的协变返回类型

> ID：10759147
> 
> 赞同：2
> 
> 时间：2012-05-25T17:52:14.230
> 
> 标签：c++, pointers, ienumerable, return-type, covariant

我正在尝试在 C++(11) 中实现一个.NET 框架，如集合类。我的问题是无效的协变类型。我有这些课程：

```
template<typename T>
class IEnumerator
{
public:
    virtual bool MoveNext() = 0;
    //...
};

template<typename T>
class IEnumerable
{
    virtual IEnumerator<T> GetEnumerator() = 0;
};

template<typename T>
class List : public IEnumerable<T>
{
public:
    struct Enumerator : public IEnumerator<T>
    {
        Enumerator(List<T> &list)
        {
            //...
        }
        // ...
    };

    Enumerator GetEnumerator()
    {
        return Enumerator(*this);
    }
}; 
```

在我看来，这太棒了。但是在 C++ 中实现它看起来是不可能的。我得到 g++ 的“无效协变返回类型”，据我所知，问题是 GetEnumerator 可能只返回一个指针或对 Enumerator 的引用，而不是 Enumerator 本身的对象。

我想避免返回这样的指针：

```
Enumerator *GetEnumerator()
{
    return new Enumerator(*this);
} 
```

因为我不希望调用者打扰删除。使用临时对象，我可以确保该对象被自动删除，因为它不再需要了。使用引用可能会更糟。

我错过了什么吗？还是 C++ 标准（和语言）存在巨大漏洞？我真的很想实现这样的目标。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:03:31.197

~~无法实现协变值返回类型。问题是调用者有责任在堆栈中为返回的对象分配空间，而协变值返回所需的空间量在编译时是未知的。~~

~~这与指针/引用无缝工作，因为返回的对象是指针或引用（而不是实际的派生对象），并且大小在编译时是已知的。~~

在与@curiousguy 进行了相当荒谬的（在我这边）讨论之后，我必须从之前的答案中回溯。没有技术问题会使协变值返回类型成为不可能。另一方面，它会产生不同的负面影响：

从设计的角度来看，如果从基础调用返回的对象必须被*切片*（这是返回对象的大小很重要的地方）。这与当前模型有明显的区别，在当前模型中，函数*总是*返回*相同*的对象，改变类型的只是引用或指针。但实际*对象*是一样的。

在一般情况下，协变值类型会抑制一些复制省略优化。目前，对于按值返回的函数，许多调用约定规定调用者将指针传递给返回对象的位置。这允许调用者保留将保存该值的变量空间，然后传递该指针。然后，被调用者可以使用该指针来代替将在调用者上下文中保存值的对象进行构造，并且不需要副本。使用协变值返回类型，并且由于必须销毁最终覆盖器创建的最派生对象以避免未定义的行为。调用者将传递一个指向内存中某个位置的指针，蹦床函数必须为最终覆盖器的返回对象保留空间，然后它需要*从第二个对象到第一个对象的切片复制*，会产生复制成本。

无论如何，操作的实际*成本*不会像调用最终覆盖程序的语义会不同^*取决于执行调用的引用的静态类型那样成为问题.

* * *

^*这已经是当前语言定义的情况。对于所有非虚函数，如果派生类型在基类上*隐藏*了一个成员函数，那么返回的指针/引用的静态类型（这又取决于用于调用虚函数的静态类型）将影响函数得到什么实际调用并且行为不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:40:31.633

```
template<typename T>
class IEnumerable
{
    virtual IEnumerator<T> GetEnumerator() = 0;
}; 
```

您试图**返回 a`IEnumerable<T>`但它是一个抽象基类**：这意味着您承诺构造一个无法实例化的类的对象！

只有从抽象基类派生的具体类才能被实例化**。**

您可能打算返回指向此类对象的指针。无论如何，这是一个糟糕的设计。您不需要在 C++ 中模拟 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:32:11.247

除非您使用指针，否则您不会在 C++ 中做类似的事情。.net 家伙使用引用，所以它几乎是相同的东西。

在 C++ 中，您更有可能使用概念而不是继承来实现这一点。您应该审查“通用编程”的想法。boost网站有一个不错的介绍： http: [//www.boost.org/community/generic_programming.html](http://www.boost.org/community/generic_programming.html)

# jquery - 事件：用户更改浏览器的大小

> ID：10759148
> 
> 赞同：-2
> 
> 时间：2012-05-25T17:52:16.740
> 
> 标签：jquery

> **可能重复：**
> [Javascript 窗口调整大小事件](https://stackoverflow.com/questions/641857/javascript-window-resize-event)

我想获得一个在用户更改实际窗口大小时触发的事件。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:53:43.527

尝试，

```
$(window).resize(function() {
  //Your code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:53:51.593

在 JavaScript 中

```
window.onresize = function(event) {
 // Do what you want
} 
```

在jQuery中

```
$(window).resize(function() {
     // Do what you want
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:59:57.830

```
$(window).resize(function() {
    alert("you've resized the window");
}); 
```

当浏览器窗口的大小改变时，resize 事件被发送到 window 元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:54:18.533

看`resize`事件：[http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T17:54:30.293

您可以使用窗口对象，`resize`事件：

```
$(window).resize(function(){
  ...
}) 
```

# objective-c - 为什么 tableView dequeueReusableCellWithIdentifier:CellIdentifier 返回 null？

> ID：10759153
> 
> 赞同：1
> 
> 时间：2012-05-25T17:52:44.853
> 
> 标签：objective-c, uitableview

我正在使用 xCode 4.2 来构建 iPhone 应用程序。

我不知道为什么这个语句`UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];`有时是空的，有时不是。我将说明两种情况，第一种情况下单元格不为空，第二种情况下为空。让我从继承 UITableViewController 的 WSCSessionTable 中两个场景共享的示例代码开始：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
     // we have null
    }
return cell;
} 
```

**场景 1 - 单元格不为空**

单元格不为空，当我像这样设置故事板时一切正常 ![导航控制器到 WSCSessionTable](../Images/f2be05f3acdf87bdbe15f5533f233eb8.png)

**场景 2 - 单元格为空**

当我像这样设置故事板时，单元格始终为空：

![通过点击按钮激活 WSCSession](../Images/dbaf764ec994b8f625bce8ec40d7fc03.png)

这是实例化表格的按钮的事件处理程序。

```
- (IBAction)goToSession:(id)sender
{
    wscAppDelegate *appDelegate = (wscAppDelegate *)[[UIApplication sharedApplication] delegate];
    UIStoryboard * storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    wscSessions *childView = [storyboard instantiateViewControllerWithIdentifier:@"sessionstable"];
//    wscSessions *childView = [storyboard instantiateViewControllerWithIdentifier:@"sessionstable"];
    childView._arrData = appDelegate._arrSession;
    childView._arrSpeaker = appDelegate._arrSpeaker;
    childView.title = @"SEssions";
    [self.navigationController pushViewController:childView animated:YES]; 
    } 
```

有谁知道为什么在场景 2 中单元格始终为空？它在我的代码的其他地方引起了问题。

**附加信息** 我评论的两个人告诉我确保单元格标识符设置为“单元格”。这是屏幕截图……这是正确的吗？在场景 1 和场景 2 中都是这样的。 ![在此处输入图像描述](../Images/9323b94ff8068d6d86e4b5c2f96fcf12.png)

# c# - 使用 selenium、Nunit、Selenium Grid、C#、webdriver/remote control 进行自动浏览器测试

> ID：10759157
> 
> 赞同：5
> 
> 时间：2012-05-25T17:53:28.550
> 
> 标签：c#, selenium, automated-tests, webdriver, selenium-grid

数周以来，我一直在研究如何使用各种不同的方法自动化浏览器测试。Seleniums 网站非常模糊，哪个是最佳途径。

我已经安装

1.  Selenium 网络驱动程序
2.  遥控
3.  硒网格
4.  阿帕奇蚂蚁
5.  Nunit（以及您可能需要执行此操作的几乎所有其他内容）

我终于放弃了自己尝试，想知道最好的方法。

我希望能够

1.  在多个不同的浏览器上加载相同的网页
2.  在多个虚拟机上加载相同的网页（我已经设置）
3.  能够拍摄比较不同浏览器结果的快照。

我有 C# 编程知识，更愿意通过 Nunit 运行我的测试。

任何人都可以给我方向或指向一个已经有它们的网站吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T20:02:43.230

我已经使用 junit 和 Selenium WebDriver 建立了一个测试框架，可以满足你的每一个观点。虽然它并不完全符合您的要求，但我觉得无论如何它都可能对您有益。

**在多个不同的浏览器上加载相同的网页**

使用 Selenium 的网格，设置起来非常简单。使用您要测试的环境设置一些虚拟机。例如，在我们的环境中，我们有一个运行有四个节点（作为虚拟机）的网格，其设置如下

*   带有 IE7 和 FireFox 的 Windows
*   带有 IE8 和 FireFox 的 Windows
*   带有 IE9 和 Firefox 的 Windows
*   带有火狐的 Linux

请注意，Selenium 建议只允许一个 IE 实例在 Windows 节点上运行。在上述每个节点上，允许在任何给定时间运行指定 IE 的一个实例和指定 FF 的五个实例。通过网格设置和集线器配置，启动测试变得轻而易举。在 WebDriver 中，使用`DesiredCapabilities`对象设置所需的环境，然后发送测试并等待结果返回。

```
Platform desiredPlatform;
DesiredCapabilities desiredCapabilities;
desiredPlatform = Platform.LINUX;
desiredCapabilities = DesiredCapabilities.firefox();
desiredCapabilities.setPlatform(desiredPlatform);
desiredCapabilities.setVersion("11");

WebDriver driver = new RemoteWebDriver("http://hubURL", desiredCapabilities); 
```

**在多个虚拟机上加载相同的网页（我已经设置）**

我通过强制测试以一种非常规的方式以线程方式运行来解决这个问题。每个 JUnit 测试都使用我放在一起的共享线程库，它创建了单独线程中所需的所有必要的 RemoteWebDrivers。这些线程中的每一个都在其节点上同时运行，而父线程则坐下来等待所有线程终止。然后进行下一个多线程测试。

我遇到了几个问题，例如在所有子线程中检索 Junit 堆栈跟踪。我通过重定向`Std.err`到父线程上的字节流解决了这个问题。`Std.out`所有错误都被路由到该流，然后我将其转换为字符串并在每次测试结束时打印出来。测试结束时生成的 html 页面包括`Std.out`完美运行的页面。

**能够拍摄比较不同浏览器结果的快照**

虽然我已经完成了这项工作，但远程抓取屏幕截图存在一些固有问题。如果进程作为服务运行，IE 将返回黑色屏幕截图。解决方法是从命令行运行 jar 并让用户保持登录状态，在这种情况下，屏幕截图会正确返回。这是浏览器中的一个已知问题，并且确实没有很好的解决方案。截图大致是这样的

```
WebDriver augmentedDriver = new Augmenter().augment(driver);
TakesScreenshot ss = (TakesScreenshot) augmentedDriver;
String base64Screenshot = ss.getScreenshotAs(OutputType.BASE64);
byte[] decodedScreenshot = Base64.decodeBase64(base64Screenshot.getBytes());
FileOutputStream fos = new FileOutputStream(new File(imageName));
fos.write(decodedScreenshot);
fos.close(); 
```

它将从远程机器正在运行的浏览器中捕获的屏幕截图保存到本地机器上。

实际上，浏览器自动化仍在努力稳定自己。有许多重要的功能，例如您所询问的那些，在我所知道的任何框架中都没有可靠地实现。不过，随着时间的推移，我相信很多事情都会解决，各地的 QA 开发人员都会欣喜若狂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:20:05.700

至于第二点：您可以让您的持续集成服务器完成这项工作，而不是使用 Grid。在我的公司，我们使用 Jenkins 和所谓的配置矩阵 - 它让您可以在多个 Jenkins 节点上运行相同的作业。

至于第一个，我认为詹金斯在这里也可能会有所帮助。您可以在同一节点上运行多个作业。虽然我从未尝试过，所以我不太确定。这只是一个想法，我不会真正推荐这样的解决方案。您可能还想阅读这篇描述如何使用 Selenium Grid 并行运行测试的[博客文章。](http://slmoloch.blogspot.co.uk/2009/12/design-of-selenium-tests-for-aspnet_19.html)对于使用 Java 的人，我建议阅读有关[使用 TestNG 进行并行测试的](http://testng.org/doc/documentation-main.html#parallel-running)内容。

你的第三点有点含糊。你说的快照是什么意思？你想比较什么样的结果？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T20:22:36.527

Selenium RC 已经过时，webdriver 是更可靠的创建 selenium 测试的方法。我看到上面的回答更多地满足了 java 方面的需求。下面提到的是有关如何使用 C# 和 selenium webdriver 实现此处提出的问题的更多信息

关于如何设置 IDE (VS express)、nUnit 和 selenium，请参阅 [如何在 VSExpress 上设置 C#、nUnit 和 selenium 客户端驱动程序以进行自动化测试](http://qtp-automate.blogspot.co.uk/2013/05/how-to-setup-cnunit-and-selenium-client.html)

在创建启动浏览器的简单脚本执行几个步骤时，请参阅 [使用 Nunit 和 C# 创建基本 Selenium Web 驱动程序测试用例](http://qtp-automate.blogspot.co.uk/2013/05/creating-basic-selenium-web-driver-test.html)

关于如何在多个不同浏览器上加载相同的网页建议参考 [如何使用 selenium 和 c# 在本地调用不同类型的浏览器驱动程序](http://qtp-automate.blogspot.co.uk/2013/10/how-to-invoke-locally-different-types.html)

在为此在多个虚拟机（我已设置）上加载相同的网页时，您需要使用远程 webdriver 而不是普通的 webdriver。还可以使用远程 webdriver，您可以启动不同类型的浏览器。请参阅此网页 [如何在 C# 中使用远程 webdriver 调用/运行不同类型的 web 驱动程序浏览器](http://qtp-automate.blogspot.co.uk/2013/10/how-to-invoke-different-type-of-web.html)

要在不同的浏览器上拍摄快照，您可以参考链接 [Capturing screen screenshots using remote/local webdriver in C#/Selenium webdriver](http://qtp-automate.blogspot.co.uk/2013/10/capturing-screen-shots-using.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-26T12:59:58.403

您还可以考虑[免费的 Telerik 测试框架](http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx)。这是 Telerik 的商业 Test Studio 产品的基础。测试框架提供跨浏览器支持，在动态内容情况 (AJAX) 方面表现出色，还允许您处理操作系统级别的对话框，如文件上传/下载对话框。您还可以随时拍摄浏览器的快照。

您可以将框架包装在您喜欢的任何运行器中。我已经毫无问题地使用了 NUnit 和 MbUnit。

如果您需要自动化方面的帮助，还可以选择支持包。

（披露：我为 Telerik 工作，担任他们的 Test Studio 传道者）

# php - 如何在 PHP 5.3 中像这样在 PHP 5.2 中实现函数模板？

> ID：10759161
> 
> 赞同：0
> 
> 时间：2012-05-25T17:53:40.290
> 
> 标签：php, closures, php-5.3, php-5.2

这段代码在 PHP 5.3 中运行良好，但在 PHP 5.2 中却没有。如何在 PHP 5.2 中实现这样的功能？

```
echo "Calling func....<br/>";
function template_func( $data=array(), $func ) {
    echo "<ul>";
    foreach ($data as $k => $v) {
        $func( $v );    
    }
    echo "</ul>";
}

$data = array( 1, 2, 3, 4, 5 );

template_func( $data, function ( $v ) { 
    echo "<li>$v</li>"; 
} );

template_func( $data, function ( $v ) { 
    echo "<li><span class='style'>$v</span></li>"; 
} ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:05:00.277

您可以使用[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php)/ [`call_user_func_array()`](http://www.php.net/manual/en/function.call-user-func-array.php)。您必须将函数名称作为字符串传递。你也可以通过这种方式调用方法和静态方法，[请查看手册](http://php.net/manual/en/function.call-user-func.php#example-4702)。

您还可以使用[`is_callable()`](http://www.php.net/manual/en/function.is-callable.php)来验证参数是否可以作为函数调用。

一个简单的例子`call_user_func()`：

```
function template_func( $data=array(), $func ) {
    echo "<ul>";
    foreach ($data as $k => $v) {
        call_user_func($func, $v);    
    }
    echo "</ul>";
}

function spannedList ( $v ) { 
    echo "<li><span class='style'>$v</span></li>"; 
}
template_func($data, 'spannedList'); 
```

**另一种方法**是使用[`create_function()`](http://php.net/manual/en/function.create-function.php). 这样，您甚至不必更改`template_func()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:52:34.423

只需将匿名函数更改为`create_function`：

```
template_func( $data, create_function( '$v', '
    echo "<li>$v</li>"; 
' ) );

template_func( $data, create_function( '$v', '
    echo "<li><span class=\'style\'>$v</span></li>"; 
' ) ); 
```

# linux - 检查参数是否是 bash shell 中的有效日期

> ID：10759162
> 
> 赞同：17
> 
> 时间：2012-05-25T17:53:42.123
> 
> 标签：linux, bash, shell

我正在 Linux 中编写一个 bash shell 脚本，该程序将接受一个日期（mm-dd-yyyy）作为参数。我想知道是否有一种简单的方法来检查日期是否有效？有操作员，我可以用测试来检查吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-25T17:59:53.117

你可以检查`date -d "datestring"`

所以`date -d "12/31/2012"`是有效的，但使用连字符，例如`date -d "12-31-2012"`，对 无效`date`。

您也可以使用单词：`date -d 'yesterday'`或`date -d '1 week ago'`两者都有效。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T11:05:55.303

您可以从输入日期值 MM-DD-YYYY 中提取日、月和年值，并将其验证为明确 (ISO) 格式 YYYY-MM-DD（您可以将 DD-MM-YYY 格式的日期验证为“正确”使用日期，例如 25-12-2010，但它不是有效的 MM-DD-YYY 日期，因此需要先更改日期格式）

* * *

### 正确格式的有效日期是可以的

2005 年 11 月 30 日有效：

```
$ DATE=11-30-2005; d=${DATE:3:2}; m=${DATE:0:2}; Y=${DATE:6:4}; echo "year=$Y, month=$m, day=$d"; if date -d "$Y-$m-$d" &> /dev/null; then echo VALID; else echo INVALID; fi
year=2005, month=11, day=30  
VALID

$ DATE=11-30-2005; if date -d "${DATE:6:4}-${DATE:0:2}-${DATE:3:2}" &> /dev/null; then echo VALID; else echo INVALID; fi
VALID 
```

* * *

### 格式正确的无效日期是不行的

2005 年 11 月 31 日未验证：

```
$ DATE=11-31-2005; d=${DATE:3:2}; m=${DATE:0:2}; Y=${DATE:6:4}; echo "year=$Y, month=$m, day=$d"; if date -d "$Y-$m-$d" &> /dev/null; then echo VALID; else echo INVALID; fi
year=2005, month=11, day=31  
INVALID

$ DATE=11-31-2005; if date -d "${DATE:6:4}-${DATE:0:2}-${DATE:3:2}" &> /dev/null; then echo VALID; else echo INVALID; fi
INVALID 
```

* * *

### 格式不正确的有效日期不正确

DD-MM-YYYY 格式的 1979 年 4 月 20 日不验证为 MM-DD-YYYY 日期：

```
$ DATE=20-04-1979; d=${DATE:3:2}; m=${DATE:0:2}; Y=${DATE:6:4}; echo "year=$Y, month=$m, day=$d"; if date -d "$Y-$m-$d" &> /dev/null; then echo VALID; else echo INVALID; fi
year=1979, month=20, day=04  
INVALID

$ DATE=20-04-1979; if date -d "${DATE:6:4}-${DATE:0:2}-${DATE:3:2}" &> /dev/null; then echo VALID; else echo INVALID; fi
INVALID 
```

* * *

### 另一种更简单的方法：使用 BASH 变量字符串将连字符替换为斜杠

```
$ DATE="04-30-2005"; [[ $(date -d "${DATE//-/\/}" 2> /dev/null) ]] && echo VALID || echo INVALID
VALID

$ DATE="04-31-2005"; [[ $(date -d "${DATE//-/\/}" 2> /dev/null) ]] && echo VALID || echo INVALID
INVALID 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-20T11:27:35.937

对于脚本使用，我尽可能简单。使用 date 函数测试日期值，然后检查进程的退出代码。

```
date -d "02/01/2000" 2>: 1>:; echo $? 
```

这会将标准输入和标准错误重定向为 null `:`，并使用 echo 返回退出代码，`$?`允许我检查 0=good date 和 1=bad date。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-10T20:10:25.923

以下对我来说效果很好。非常感谢我的同事 Tyler Chamberlain 提供的 OSX 解决方案。

```
# Validate a given date/time in Bash on either Linux or Mac (OSX).

# Expected date/time format (in quotes from the command line):  YYYY-MM-DD HH:MM:SS
# Example(s):  ./this_script "2012-02-29 13:00:00"   # IS valid
#              ./this_script "2013-02-29 13:00:00"   # Is NOT valid

START_DATETIME=$1

function report_error_and_exit
{
   local MSG=$1
   echo "$MSG" >&2
   exit 1
}

# We can use OSTYPE to determine what OS we're running on.
# From http://stackoverflow.com/questions/394230/detect-the-os-from-a-bash-script

# Determine whether the given START_DATETIME is valid.
if [[ "$OSTYPE" == "linux-gnu" ]]
then
   # Validate the date on a Linux machine (Redhat or Debian).  On Linux, this is 
   # as easy as adding one minute and checking the return code.  If one minute 
   # cannot be added, then the starting value is not a valid date/time.
   date -d "$START_DATETIME UTC + 1 min" +"%F %T" &> /dev/null
   test $? -eq 0 || report_error_and_exit "'$START_DATETIME' is not a valid date/time value. $OSTYPE"
elif [[ "$OSTYPE" == "darwin"* ]]
then
   # Validate the date on a Mac (OSX).  This is done by adding and subtracting
   # one minute from the given date/time.  If the resulting date/time string is identical 
   # to the given date/time string, then the given date/time is valid.  If not, then the
   # given date/time is invalid.
   TEST_DATETIME=$(date -v+1M -v-1M -jf "%F %T" "$START_DATETIME" +"%F %T" 2> /dev/null)

   if [[ "$TEST_DATETIME" != "$START_DATETIME" ]]
   then
      report_error_and_exit "'$START_DATETIME' is not a valid date/time value. $OSTYPE"
   fi
fi

echo "The date/time is valid." 
```

我在基于 Red Hat 的系统、基于 Debian 的系统和 OSX 上测试了这个脚本，它在所有三个平台上都按预期工作。我没有时间在 Windows (Cygwin) 上进行测试。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-05T21:23:52.967

为了在 BASH shell 中的 OSX 上验证 YYYY-MM-DD (ISO 8601) 日期，以下方法同时验证格式和日期。

```
isYYYYMMDDdate() {
  [[ "$1" =~ ^[0-9]{4}-[0-9]{2}-[0-9]{2}$ ]] && [[ "$1" == $(date -r $(date -j -f "%Y-%m-%d" "$1" "+%s") '+%Y-%m-%d') ]] &> /dev/null; echo "$?"
} 
```

1.  它首先使用正则表达式匹配来检查格式。
2.  然后，它将日期转换为纪元时间，然后再转换回日期。
3.  如果原始日期和两次转换的日期匹配，则它是有效的。

测试有效日期：2005-11-30

```
$ isYYYYMMDDdate 2005-11-30
0 
```

测试无效日期：2005-11-31

```
$ isYYYYMMDDdate 2005-11-31
1 
```

测试格式错误的有效日期：1979-20-04

```
$ isYYYYMMDDdate 1979-20-04
1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-25T18:04:50.760

case 语句使支持多种格式和捕获日期部分变得容易，即

```
 case ${date} in
    [0-3][0-9]-[0-1][0-9]-[0-9][0-9][0-9][0-9] )
       yr=...
       mn=...
       dy=... 
    ;;
    [0-1][0-9]-[0-3][0-9]-[0-9][0-9][0-9][0-9] )
       yr=...
       dy=... 
       mn=...
    ;;
    .... other formats
    ;;
    * )
      echo "ERROR on date format, from value=$date, expected formats ..."
      return 1
    ;;     
 esac 
```

我希望这有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-16T23:23:12.363

该`date`命令将解析`-d`参数给出的日期。如果日期无效，则会向 STDERR 打印一条错误消息并`date`以错误状态退出。如果日期有效，它将在 STDOUT 上打印日期并以成功状态退出。

正因为如此，`date -d "$date"`可以直接在`bash` `if`语句中使用。

第一个问题是，为了防止打印有效日期的消息，您需要将 STDOUT 重定向到`/dev/null`using `>/dev/null`.

第二个问题是`date`接受空字符串作为有效日期而没有抱怨。在大多数情况下，这应该意味着您的用户没有输入他们应该输入的日期。您将需要使用测试单独测试空日期`[ "z$date" != "z" ]`

`date`也接受多种格式。如果您使用的是实际的`bash`（而不是`dash`其他`sh`种类的，您可以针对您的首选格式使用正则表达式，而不是简单地检查空字符串。例如，要检查我的首选 ISO 格式，我会使用： `[[ "$date" =~ ^[0-9]{4}-[0-9]{2}-[0-9]{2}$ ]]`

```
date=2001-01-01
if [ "z$date" != "z" ] && date -d "$date" >/dev/null
then
  echo "VALID DATE"
fi 
```

如果您尝试使用无效日期（例如`2001-01-53`），它不会进入`if`并打印出：

> 日期：无效日期'2001-01-53'</p>

或者，您可以检查日期是否无效并退出：

```
date=2001-01-01
if [ "z$date" == "z" ]
then
  echo "No date specified"
  exit 1
fi
if ! [[ "$date" =~ ^[0-9]{4}-[0-9]{2}-[0-9]{2}$ ]]
then
  echo "Expected date in YYYY-MM-DD format"
  exit 1
fi
if ! date -d "$date" >/dev/null
then
  exit 1
fi
echo "VALID DATE" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-25T18:23:29.910

您可以使用`strptime()`Python 的[时间](http://docs.python.org/library/time.html#time.strptime)或[日期](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)时间模块或 Perl 的[Time::Piece](http://perldoc.perl.org/Time/Piece.html#Date-Parsing)模块中可用的函数。

# xml - 方法 (XSLT) 对每个父元素的节点进行分组

> ID：10759166
> 
> 赞同：0
> 
> 时间：2012-05-25T17:53:52.630
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0, nodes

我想按父元素对节点进行分组。

这里的**父元素**是： **FDDCell id="AAA" method="modify"**

*   父元素重复两次。

*   我希望“FDDCell id”只出现一次。并将所有节点分组在“FDDCell id”下

这是 XML 输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<start>

<FDDCell id="AAA"  method="modify">
<UMTSFddNeighbouringCell id="FAR_AWAY" method="create">
    <attributes>
        <mbmsNeighbouringWeight>0.0</mbmsNeighbouringWeight>
    </attributes>
</UMTSFddNeighbouringCell>
</FDDCell>

<FDDCell id="AAA" method="modify">
<attributes>
    <cacConfId>RadioAccessService/0 DedicatedConf/0 CacConfClass/10</cacConfId>
    <layerPreferredForR99>true</layerPreferredForR99>
    <reserved0>1398341632</reserved0>
    <reserved1>1398352896</reserved1>
    <reserved2>1616994144</reserved2>
    <reserved3>1616994144</reserved3>
</attributes>
</FDDCell>

</start> 
```

这是所需的输出文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <start>

 <FDDCell id="AAA" method="modify">
  <UMTSFddNeighbouringCell id="FAR_AWAY" method="create">
    <attributes>
        <mbmsNeighbouringWeight>0.0</mbmsNeighbouringWeight>
    </attributes>
 </UMTSFddNeighbouringCell>

<attributes>
    <cacConfId>RadioAccessService/0 DedicatedConf/0 CacConfClass/10</cacConfId>
    <layerPreferredForR99>true</layerPreferredForR99>
    <reserved0>1398341632</reserved0>
    <reserved1>1398352896</reserved1>
    <reserved2>1616994144</reserved2>
    <reserved3>1616994144</reserved3>
</attributes>

</FDDCell>
</start> 
```

十分感谢您的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:35:45.733

这是一个 XSLT 2.0 样式表：

```
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* , node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="start">
    <xsl:copy>
      <xsl:for-each-group select="FDDCell" group-by="@id">
        <xsl:copy>
          <xsl:apply-templates select="@*, current-group()/node()"/>
        </xsl:copy>
      </xsl:for-each-group>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

您可以使用 Saxon 9、AltovaXML 工具、XMLPrime 等 XSLT 2.0 处理器来运行它。

# matrix - Python：使用坐标操作矩阵

> ID：10759167
> 
> 赞同：0
> 
> 时间：2012-05-25T17:53:52.943
> 
> 标签：matrix, python-2.7

我决定使用列表列表来制作矩阵来解决这个问题。我希望用依赖于完全不同列表中的值的值填充这个矩阵。

我在一个项目中分析来自学生玩 90 分钟的电脑游戏的聊天数据。我需要跟踪 12 名参与者中的每人发送给其他玩家的消息数量。数据日志有数千行输出，所以我让我的 python 程序查看包含聊天的每一行并列出每个聊天记录。

我已经解析了数据，因此我有一个名为 WHO 的列表，其中仅包含演讲者的姓名，另一个名为 WHOM 的列表，其中包含收件人的姓名。这可能是 1 到 11 个名称。假设名为 S1 的玩家刚刚向 S3、S4 和 S7 发送了一条消息。我想增加 S1 向这些玩家发送消息的计数，我的列表如下所示：

```
who = ["S1"]
whom = ["S3", "S4", "S7"] 
```

所以我用以下内容创建了我的矩阵

```
rows = 12
columns = 12

def makeList(size):
    mylist = []
    for i in range(size):
        mylist.append(0)  #make a list of variable size full of 0's.
    return mylist

def makeMatrix(rows,columns):
    matrix = []
    for i in range(columns):
        matrix.append(makeList(rows)) #tells makeList() what size to be, appends the list therein to this new matrix.
    return matrix

matrix = makeMatrix(rows, columns) 
```

从这里我可以非常直接地操作矩阵：

```
S1 = 0
S2 = 1
S3 = 2
S4 = 3
S5 = 4
S6 = 5
S7 = 6
S8 = 7
S9 = 8
S10 = 9
S11 = 10
S12 = 11

matrix[S1][S3] += 1 
matrix[S1][S4] += 1 
matrix[S1][S7] += 1 
```

表示 S1 已与相关玩家再次交谈。

**问题：**我希望“谁”和“谁”中的值表示矩阵中的坐标，然后增加矩阵中的值。我怎样才能使列表“谁”和“谁”一些影响矩阵的输入？有人可以建议一个循环或一个函数来完成这个吗？提前致谢！

* * *

所以我认为展示一个我正在思考的方向的例子可能会有所帮助。我可以看到这是通过一个 for 循环完成的，就像我在下面写的那样。这不是真正的代码，我知道。

```
for i in range (11):  #
    if who contains (S%n %i):  #check if the list "who" contains S1, S2, S3, S4... etc.   
        for k in range (11): 
            if whom contains (S%d %i) #check if the list "whom" contains S1, S2, S3, etc.,
                matrix["S"+i]["S"+k] +=1 
```

问题：如何编写矩阵[S1][S3]，其中 1 和 3 是循环中的变量？如何创建一个查找列表内容的 if 语句？

# android - 通过 3G 的 Android ICS 连接获得 403 响应，但通过 Wifi 正常

> ID：10759169
> 
> 赞同：2
> 
> 时间：2012-05-25T17:54:08.377
> 
> 标签：android, wifi, android-4.0-ice-cream-sandwich, 3g, http-status-code-403

我在 Android ICS 上遇到了一个奇怪的问题，我有以下代码来建立连接以读取 xml 文件：

```
// previous code......

URL url = new URL("https://urltomyxmlfile.com/xmlfile");
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
XMLReader xr = sp.getXMLReader();
XML_handler myXML_handler = new XML_handler();
xr.setContentHandler(myXML_handler);

HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setConnectTimeout(5000);
connection.setReadTimeout(25000);
connection.setDoInput(true);
connection.connect();
InputStream input = connection.getInputStream();
xr.parse(new InputSource(input));

//more code.... 
```

此代码在 wifi 和 3G 的所有 android 版本中都能正常工作，但在 Android ICS 中仅适用于 wifi，在 3G 连接上我得到 403 响应。

我不知道这个问题的根源，我没有正确配置连接吗？Android ICS 中是否有新的限制？https的问题？

额外信息：此代码未在 UI 线程中运行

谢谢你的帮助！

新的额外信息：我发现只有三星 Galaxy SII 用户遇到此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:49:48.350

终于我得到了答案！！！，它与代码无关。

西班牙运营商 ORANGE 正在销售终端并使用错误的 APN 配置发送 OTA 更新。请在正确的 APN 配置下方找到粘贴，以避免主要西班牙运营商（Vodafone、Movistar、Orange、Yoigo 和 Simyo）出现此问题

沃达丰 ES-互联网

名称：Vodafone ES APN：airtelwap.es 代理：没有 establecido 波多黎各：没有 establecido 名称：wap@wap Contraseña：wap125 服务商：没有 establecido MMSC：空 代理彩信：没有 establecido 波多黎各 MMS：没有 establecido MCC：214 MNC：01 APN 类型：默认

MOVISTAR-互联网

Nombre: Movistar APN: telefonica.es Proxy: 10.138.255.133 Puerto: 8080 Nombre de Usuario: telefonica Contraseña: telefonica Servidor: No establecido MMSC: No establecido Proxy MMS: No establecido Puerto MMS: No establecido Código País del Móvil (MCC): 214 Código de Red Móvil (MNC): 07 认证: No establecido

橙色 - 互联网

Nombre: Orange Internet APN: internet Proxy: No establecido Puerto: No establecido Nombre de Usuario: cliente Contraseña: amena Servidor: 62.36.225.150 MMSC: No establecido Proxy MMS: No establecido Puerto MMS: No establecido MCC: 214 MNC: 03 Tipo de APN：默认

YOIGO-互联网

名称：Yoigo APN：internet 代理：10.08.00.36 Puerto：8080 MMSC：代理 MMS：Puerto MMS：MCC：214 MNC：04 Tipo de autentificacion：PAP Tipo de APN：Internet

SIMYO-互联网

名称：SimyoInternet APN：gprs-service.com 代理：没有 establecido Puerto：没有 establecido 名称：没有 establecido : 19 类型 APN: 默认

# pygtk - pygtk / rsvg - 获取绘图的大小？

> ID：10759170
> 
> 赞同：2
> 
> 时间：2012-05-25T17:54:09.533
> 
> 标签：pygtk, pycairo, rsvg

RSVG 和 Cairo 是否可以在 SVG 图像中找到绘图的范围？

即不是页面宽度/高度，而是绘图元素实际使用的空间。

这不起作用，它只返回页面大小：

```
 img = rsvg.Handle(file="myfile.svg")
 (w, h, w2,h2) = svg.get_dimension_data() # gives document's declared size 
```

这似乎没有返回任何有关大小的信息：

```
 svg.render_cairo(context) # returns None 
```

这不起作用，它还会返回页面大小：

```
 self.svg.get_pixbuf().get_width() 
```

这是 pygtk-all-in-one-2.24.0.win32-py2.7 和 RSVG 2.22.3-1_win32，在其中我找不到其他答案中提到的 get_dimensions_sub() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T22:34:30.567

我今晚搜索了网络试图解决这个看似简单的问题。似乎没有一种简单的方法可以使用 rsvg、cairo 或类似工具获取绘图的边界框。除非我遗漏了一些明显的东西。

`--query-all`但是，您可以使用该选项调用 Inkscape 。这将为您提供 SVG 文件中所有对象的尺寸，并将完整的绘图作为列表中的第一个条目。

```
import subprocess
output = subprocess.check_output(["inkscape", "--query-all", "myfile.svg"])
values = [line.split(',') for line in output.split('\n')]
whole_drawing = values[0]
[x, y, width, height] = map(float, whole_drawing[1:]) 
```

现在，您将在`x`、`y`及其`width`和中获得绘图的位置`height`。有了这个，使用 rsvg 和 cairo 将剪辑的 SVG 重新绘制到新文件变得很简单。

我创建[了一个简单的工具](https://github.com/skagedal/svgclip)来做到这一点，我希望[代码](https://github.com/skagedal/svgclip/blob/master/svgclip.py)应该很容易理解。

# asp.net - “ToArray”不是“字符串”的成员

> ID：10759176
> 
> 赞同：4
> 
> 时间：2012-05-25T17:54:31.447
> 
> 标签：asp.net, .net, vb.net

我在网上找到了一个代码示例，旨在计算 PDF 文件中的页数。但是，我在以下行收到错误“ToArray is not a member of 'String'：

```
Dim pdfMagicNumber() As Char = "0000".ToArray 
```

我在运行 Windows 7 和 IIS 7 的机器上在 Framework 2.0 项目上运行 VS 2010。我发现一篇文章谈到 IIS 配置是导致此错误的罪魁祸首，但我的设置似乎与他们推荐的一致。

关于这个错误的任何想法？

谢谢！麦克风

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T17:57:22.993

[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)是 .NET 3.5 上引入的一种扩展方法`IEnumerable<T>`。在 .NET 3.5+ 中调用时`string`，它可以作为`string`实现`IEnumerable<char>`。

但是，[`string.ToCharArray()`](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx)它适用于*所有*.NET 版本，即使您使用 .NET 3.5+，它也会比 .NET 更高效`ToArray`。

换句话说，你想要：

```
Dim pdfMagicNumber() As Char = "0000".ToCharArray 
```

# objective-c - 自定义字体不起作用

> ID：10759177
> 
> 赞同：2
> 
> 时间：2012-05-25T17:54:31.327
> 
> 标签：objective-c, ios, fonts

我们可以在我的应用程序中使用自定义字体并不是什么秘密，但我无法达到这一点并想知道为什么。

当然，我在整个网络上搜索了这个问题，但没有找到类似的东西，所以这就是我最终需要问这个的原因。

我正在尝试什么：我正在创建一个小游戏并始终绘制我的整个游戏区域。很好，这适用于默认字体，但不适用于我的自定义字体......

我使用拖放将我的 .ttf-Font（我尝试了两种不同的）添加到我的项目中，并将其复制到我的项目文件夹中。接下来我添加`MyFontXY.ttf`到我`Info.plist`使用的 UIAppFonts 和一个数组中。

接下来我尝试使用它`[UIFont fontWithName:@"MyFontXY.ttf" size:12]`- 好的，不起作用。我搜索了字体的真实名称并尝试了，`[UIFont fontWithName:@"My Font XY" size12]`但它也不起作用。

所以我在这之后尝试了几件事，比如清理、重新导入、更改名称……但什么也没发生。我也曾经`NSLog(@"%@",[UIFont fontFamilies])`找出可用的字体，但我的字体不存在。

我还检查了数字是否可用于此字体并且它们是可用的，所以我现在排除了很多可能性。

我现在能做什么？有人也有这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T20:15:08.607

您需要将字体添加到目标中，例如通过在目标的“复制捆绑资源”阶段手动添加它们

# c# - 更新 Windows 8 C# Metro App 的 GUI

> ID：10759182
> 
> 赞同：5
> 
> 时间：2012-05-25T17:55:11.617
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我使用 C# 中的 Visual Studio 11 Ultimate 为 Win 8 创建了一个基本的 Metro 应用程序。

这里的问题是我想显示随某些事件动态变化的文本。一个示例是一个应用程序，其中一个数字显示在屏幕上，并且每当单击鼠标时都会递增 1。

我使用 XAML 绑定到我创建的数据结构，它确实获得了我需要显示的值，但问题是随着这些值的变化，GUI 上显示的数字不会改变。

如何将我的 XAML 绑定到动态变化的数据，以便 GUI 上的 XAML 显示也发生变化？

谢谢您的帮助！

- 编辑 -

我已经实现了 INotifyPropertyChanged 接口，但是现在我从这行代码中收到了一个异常：

PropertyChanged(this, new PropertyChangedEventArgs(propertyName));

这是异常信息：

应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T18:01:41.167

确保您绑定到（正确）的“数据结构”实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.inotifypropertychanged)并在您想要通知 UI 更改时调用 PropertyChanged 事件。

这是允许 xaml 层知道绑定数据中的值何时更改并相应更新的接口。

* * *

根据新信息进行编辑：

> 应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）

这表明您正在从单独的线程中更改属性，这可能会导致问题。[您可能需要使用CoreDispatcher.RunAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.coredispatcher.runasync)将其编组回主线程。有关详细信息，请参阅[此线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e7ac335f-f076-4be6-9cba-32026518b2c8)。

# jsf - 如何在 jsf 中设置 spring 安全注销 ..？

> ID：10759186
> 
> 赞同：0
> 
> 时间：2012-05-25T17:55:14.557
> 
> 标签：jsf, spring-security, logout

我在springsecurity和jsf中非常喜欢，在jsf中实现spring security logout时遇到问题..

**我的应用程序：**
springframework 3.0.2
jsf 2.0
primefaces 3.1.1

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/app-config.xml</param-value>
</context-param>

<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>faces/index.jsp</welcome-file>
</welcome-file-list>

</web-app> 
```

**应用程序配置.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<!-- Scans the classpath of this application for @Components to deploy as beans -->
<context:component-scan base-package="com.raistudies" />

<!-- Importing Spring Security Settings  -->
<import resource="security.xml"/>

<!-- Configures the @Controller programming model -->
<mvc:annotation-driven />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/userPage/"/>
    <property name="suffix" value=".xhtml"/>
</bean>

<context:property-placeholder location="/WEB-INF/jdbc.properties" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${app.jdbc.driverClassName}" />
    <property name="url" value="${app.jdbc.url}" />
    <property name="username" value="${app.jdbc.username}" />
    <property name="password" value="${app.jdbc.password}" />
</bean>

</beans> 
```

**安全.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns="http://www.springframework.org/schema/security"
xmlns:b="http://www.springframework.org/schema/beans"
xmlns:s="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<http auto-config="true" use-expressions="true">

    <intercept-url pattern="/assets/previews/**" access="permitAll" />
    <intercept-url pattern="/assets/thumbs/**" access="permitAll" />
    <intercept-url pattern="/css/**" access="permitAll"/>
    <intercept-url pattern="/design/**" access="permitAll" />
    <intercept-url pattern="/images/**" access="permitAll" />
    <intercept-url pattern="/js/**" access="permitAll" />
    <intercept-url pattern="/pageAllNews/**" access="permitAll" />

    <intercept-url pattern="/pageLogin/**" access="permitAll" />
    <intercept-url pattern="/resources/css/**" access="permitAll" />
    <intercept-url pattern="/resources/skins/tn3/**" access="permitAll" />
    <intercept-url pattern="/templates/**" access="permitAll"/>
    <intercept-url pattern="/userPage/**" access="permitAll" />

    <intercept-url pattern="/**" access="hasRole('ROLE_ADMIN')"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/**" access="hasAnyRole('ROLE_ADMIN','ROLE_USER')"/>

    <form-login login-processing-url="/j_spring_security_check"
                login-page="/userPage/login.jsp"
                default-target-url="/userPage/home.jsf"
                authentication-failure-url="/userPage/login.jsp" />

    <logout logout-success-url="/userPage/login.jsp"/>
    <remember-me />

</http>

<authentication-manager>
    <authentication-provider>
        <password-encoder hash="md5"/>
        <jdbc-user-service data-source-ref="dataSource" />
    </authentication-provider>
</authentication-manager>

</b:beans> 
```

我尝试**在 jsf.page 中实现按钮注销，**但它不起作用..

```
 <h:outputLink value="${request.contextPath}/j_spring_security_logout">logout</h:outputLink> 
```

谁能帮我解决这个问题..？
阿贡德姆特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T00:37:42.550

替换这个

```
 <h:outputLink value="${request.contextPath}/j_spring_security_logout">logout</h:outputLink> 
```

用这个

```
 <h:outputLink value="${pageContext.request.contextPath}/j_spring_security_logout">logout</h:outputLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T15:27:51.517

关于**登录问题。** 您可以查看我提供的答案@[如何将 Spring security 与 Primefaces](https://stackoverflow.com/questions/17018913/how-to-use-spring-security-with-primefaces/17026481#17026481)问题结合使用。

关于**注销**，您可以定义一个导航案例，将注销操作定向到注销页面，例如 logout.xhtml，然后确保您在 spring security 中定义了以下内容

```
<security:logout logout-url="logout.xhtml"
        logout-success-url="logout_success.xhtml" invalidate-session="true" /> 
```

通过这种方式，您可以在实际导航和执行 Spring Security 中的注销操作之前在托管 bean 中执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T15:39:41.843

为我工作

```
<h:form id="formExit" >
 <p:commandLink ajax="true" action="/userPage/login.jsp" oncomplete="jQuery.get('{request.contextPath}/j_spring_security_logout')"> 
    <p:outputLabel value="Logout" />
 </p:commandLink>
</h:form> 
```

# android - 验证 apk 是否为付费副本（避免盗版应用）

> ID：10759187
> 
> 赞同：3
> 
> 时间：2012-05-25T17:55:16.630
> 
> 标签：android, apk, android-lvl, copy-protection

我对 Android Play 商店完全陌生。我正在开发一个几乎完成并准备发布的应用程序。

但我注意到您可以将 apk 文件（购买后）复制到另一个位置（例如 sd 卡）并将其安装在另一个设备上。这是我想避免的。

我的问题是：

*   Google Play 商店是否在下载之前使用某个唯一 ID 对 apk 文件进行签名？如果是真的，我可以从 apk 中读取/获取此代码吗？
*   是否可以知道购买该应用程序的用户的电子邮件地址，或者我可以访问该用户的其他一些详细信息？
*   是否可以获得设备的独特细节？
*   是否有其他解决方案可用于保护 apk 的副本？

我想创建一个将设备绑定到应用程序的注册方法，因此当用户尝试复制应用程序时，无法使用它。这一切都可能吗？

如果您有任何问题，请告诉我。

PS：我使用 Adob​​e Flash Builder 来构建应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:58:15.100

您最好的选择是 LVL（Android 许可证验证库）和跟踪设备安装的组合。

LVL [http://developer.android.com/guide/market/licensing/index.html](http://developer.android.com/guide/market/licensing/index.html)

跟踪设备安装 [http://android-developers.blogspot.in/2011/03/identifying-app-installations.html](http://android-developers.blogspot.in/2011/03/identifying-app-installations.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:57:10.327

要验证用户是否已付费，您可以使用[Google Play Licensing 服务。](http://developer.android.com/guide/market/licensing/index.html)如果您选择使用它们，Google Play 上有版权保护机制，但现在它们已被弃用，因为您应该使用我刚才提到的服务。您可以收集一些独特的设备详细信息，有 API 可以做到这一点，但这并不是真正需要的。

# javascript - JSON字符串在循环中被视为文字字符串

> ID：10759188
> 
> 赞同：9
> 
> 时间：2012-05-25T17:55:19.733
> 
> 标签：javascript, json

我怀疑这是一个简单的问题，但我对 js 有点陌生，找不到解决方案。

基本上，当我将 JSON 字符串传递给函数然后尝试遍历传递的变量时，它会将其视为文字字符串而不是数组。

使用此功能：

```
function build_codes_long(codes) {
   var codes_long_text = "";
   for(var i =0;i < codes.length-1;i++) {
      var code = codes[i];
      codes_long_text += "<p>" + code['id'] + " = " + code['del'] + "</p>";
   }
return codes_long_text; 
} 
```

当我将 JSON 字符串传递给它时，如下所示：

```
[{"id":"1","del":"0","clip":"1"},{"id":"2","del":"0","clip":"1"}] 
```

它评估字符串中的每个字符，而不是数组中的每个项目。所以它循环 65 次而不是 2 次，返回类似：

```
undefined = undefined 
```

我了解返回值的问题；这是将数组视为我不理解的文字字符串。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T18:00:53.617

这是因为你没有循环遍历一个对象；你正在循环一个字符串并得到每个字母。

您需要先将 JSON 字符串转换为对象：

```
var myObject = JSON.parse(myJsonString);
var codesLongText = build_codes_long(myObject); 
```

# sql - 如果在带有 vb.net 的 sqlite 中不存在，则插入

> ID：10759189
> 
> 赞同：1
> 
> 时间：2012-05-25T17:55:21.717
> 
> 标签：sql, vb.net, select, insert

我有来自服务器的记录要复制，所以我使用数据读取器全选，在选择期间插入也处理。这是伪代码：

```
while datareader.read
        For f As Integer = 0 To datareader.FieldCount - 1
                Values = Values & datareader.GetValue(f)
        Next
    Dim ss as string ="Insert into xtable(a,b,c,d,e,f) select " & values & " where not Exist (select * from xtable)" ''//is this right?
    Dim sc as new sqliteCommand(ss,mycon)
    sc.ExecuteNonQuery
    End While
    sc.dispose 
```

仅当当前表中不存在记录时才插入的确切 sql 语句是什么？

我使用了其中的一些代码，但是定义了一个过滤器：比如 x 如果我只想插入我想要的表中不存在的记录怎么办。

```
Dim ss As String = "insert into xtable(x,y,z) select $x, $y,$z 
where not exists (select 1 from xtable where x=$x)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:52:46.650

试试这个：

```
if not exists(select 1 from xtable)
   begin
       insert into xtable(x,y,z) select $x, $y,$z from xtable
   end 
```

我认为上述方法行不通，但是[此链接应该可以为您提供所需的答案。](https://stackoverflow.com/questions/531035/how-to-do-if-not-exists-in-sqlite)

# javascript - 是否有与 .get() 类似的方法，但返回的是 jQuery 对象而不是 DOM 对象？

> ID：10759190
> 
> 赞同：1
> 
> 时间：2012-05-25T17:55:23.060
> 
> 标签：javascript, jquery

我想知道 jQuery 上的人是否实现了一种替代方法[`.get()`](http://api.jquery.com/get/)，例如返回 jQuery 对象而不是 DOM 节点的方法。

这样我就不用

1.  将使用该方法检索到的对象包装起来，`.get()`并进行附加`$()`调用，然后
2.  编写我自己的 jQuery 插件以提供该功能。

我特别不想做#2，因为当功能已经存在时，我几乎是在重新发明轮子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:58:00.823

您可以使用 .eq(index)，它返回一个 jquery 实例。例如

```
var mycoll = $("div.myDivs")
var firstElementOfCollection = mycoll.eq(0); 
```

或者正如 ThiefMaster 在下面的评论中指出的那样，这些也可以正常工作（并且可能会更好，具体取决于您在做什么:)）

```
$("div.myDivs:eq(0)");
$("div.myDivs:first"); 
```

# javascript - jQuery datepicker 在添加的 div 中不起作用

> ID：10759193
> 
> 赞同：0
> 
> 时间：2012-05-25T17:55:26.393
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我有一个表单（4 个输入），包括一个 jQuery 日期选择器。它还有一个按钮，可以在下面添加另一个 div（也通过 jQuery，相同的 4 个输入），以便用户可以添加多个记录。日期选择器以第一种形式工作，但不能以任何后续形式工作...

看法

```
<div id="single_module">
<div class="pitch">
<h2>Step 3: Friends Birthdays</h2>
</div>
<form id="myForm">
<div id="input1" style="margin-bottom:4px;" class="clonedInput">
<%= simple_form_for @user, url: wizard_path do |f| %>

  <div class="inputs">
  <ul class="testss1">
  <%= f.simple_fields_for :friends do |friend_f| %>
    <li>
    <%= friend_f.input :name %>
    </li>
    <li>
    <%= friend_f.input :dob, :as => :date_picker, :label => 'Birthday' %>
    <li>
    <%= friend_f.input :gender, :collection => ['male','female'] %></li>
    </li><li>
    <%= friend_f.association :interests, :as => :select, :label => false %></li>

    <%end%>

    </div>
    <div>
    <input type="button" id="btnAdd" value="add another name" />
    <input type="button" id="btnDel" value="remove name" />
    </div>
    </form>
    <div class="actions">
    <%= f.button :submit, 'Next Step', :class => 'btn btn-primary',  %>
    <br></br>
    </div>
    <%end%> 
```

查询：

日期选择器

```
$(document).ready(function(){
    $(function() {
            $( "#user_friends_attributes_0_dob" ).datepicker();

        });
}); 
```

添加新表格：

```
$(document).ready(function() {
           $('#btnAdd').click(function() {
               var num     = $('.clonedInput').length;
               var newNum  = new Number(num + 1);

               var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

               newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
               $('#input' + num).after(newElem);
              $('#btnDel').attr('disabled',false);

               if (newNum == 5)
                   $('#btnAdd').attr('disabled',true);
           });

           $('#btnDel').click(function() {
               var num = $('.clonedInput').length;

               $('#input' + num).remove();
               $('#btnAdd').attr('disabled',false);

               if (num-1 == 1)
                   $('#btnDel').attr('disabled',true);
           });

           $('#btnDel').attr('disabled',true);
       }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:05:33.167

您需要“告诉”jQuery 为您的目标元素动态处理 DOM 事件并重新绑定该日期选择器功能。首先将 css 类添加到您的任何日期选择器元素，例如“my-datepicker”。然后告诉 DOM 将 datepicker 功能绑定到事件上（例如：mouseenter）：

```
$(function() {
     $("#myForm").delegate('.my-datepicker', 'mouseenter', function(){
        $(this).datepicker();
     });
}) 
```

上面将告诉 DOM 响应位于 ID 为“myForm”的元素内的具有类“my-datepicker”的元素的任何 mouseenter 事件——这样做会将 datepicker 功能添加到该元素。

我还注意到您的脚本中有一些冗余，这些行：

```
 $(document).ready(function(){...}) 
```

和

```
 $(function(){...}) 
```

做完全相同的事情，但是您将它们嵌套在一起。我不确定这是否会给您带来问题，但我只会使用其中一个。

*请注意，您还可以使用 jQuery.live() 或 jQuery.on()，具体取决于您正在运行的 jQuery 版本。.delegate() 适用于 1.4.3+ 和 .on() 适用于 1.7+*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:26:10.423

最简单的方法——在末尾再次调用`datepicker()`新创建的日期字段`$('#btnAdd').click`。此外，还有一个更正确的解决方案类似的问题：[Why does jQuery UI's datepicker break with a dynamic DOM?](https://stackoverflow.com/questions/1059107/why-does-jquery-uis-datepicker-break-with-a-dynamic-dom) .

而且您正在重新发明轮子：在您的情况下，您可以使用[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)或[https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)。（但您仍然必须使用动态日期选择器解决问题）

# android - 设置默认时区以用于 android 应用程序

> ID：10759196
> 
> 赞同：2
> 
> 时间：2012-05-25T17:55:31.430
> 
> 标签：android

我正在为 android 开发一个应用程序，它必须列出活动及其日期和时间。我想忽略设备的时区并始终显示时区 +02:00 中的时间。

该应用程序适用于西班牙，但如果来自另一个时区的英国人使用该应用程序，我希望活动时间出现在西班牙当地时间。

日期为 UTC 格式，使用 Calendar.getTime().toLocaleString()，时间以设备本地时区为准。

我想知道这是否是一种设置必须使用我的应用程序的默认时区的方法，并且当我调用 Calendar.getTime().toLocaleString() 方法时，尽管有设备时区

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-11-16T00:33:40.827

```
TimeZone.setDefault(TimeZone.getTimeZone("GMT+3")); 
```

这将设置默认时区。随后的调用`Calendar.getInstance()`总是返回，就好像设备处于该时区一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:04:51.257

您需要设置日历的时区。这可以这样做：

```
Calendar.setTimeZone(TimeZone timezone); 
```

然后您的日历将使用不同的时区。

如果要更改系统时区，可以使用`setTimeZone()`AlarmManager 来完成。

这样做时，清单必须包含正确的权限，即

> android.permission.SET_TIME

链接到 [文档](http://developer.android.com/reference/android/app/AlarmManager.html#setTimeZone%28java.lang.String%29)

我在[这里](https://stackoverflow.com/questions/9755625/android-how-to-set-time-zone-through-application)找到了其他一些解决方案，请查看。

# r - 获取包含零的数据框范围

> ID：10759199
> 
> 赞同：1
> 
> 时间：2012-05-25T17:55:43.477
> 
> 标签：r

这是一个简单的问题。我有一个值从 0 到 3 的数据框，我想获取数据集的元素数，在这种情况下应该是 4。以下是数据示例：

```
structure(list(X1 = c(2L, 2L, 2L, 2L, 2L, 1L, 3L, 2L, 2L), X2 = c(1L, 
1L, 1L, 2L, 1L, 0L, 2L, 3L, 1L), X3 = c(2L, 1L, 2L, 2L, 0L, 0L, 
2L, 3L, 1L), X4 = c(1L, 2L, 2L, 2L, 1L, 2L, 0L, 2L, 2L), X5 = c(1L, 
2L, 1L, 2L, 1L, 0L, 1L, 2L, 1L), X6 = c(1L, 2L, 1L, 1L, 1L, 2L, 
1L, 2L, 1L)), .Names = c("X1", "X2", "X3", "X4", "X5", "X6"), class = "data.frame", row.names = c(NA, 
-9L)) 
```

我试过`diff(range(d))`了，但不算 0。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:53:32.907

`length(unique(...))`当应用于矩阵或数据框时，会做一些可能出乎意料的事情（尽管有完整的记录）。

```
s <- structure(list(X1 = c(2L, 2L, 2L, 2L, 2L, 1L, 3L, 2L, 2L), X2 = c(1L, 
1L, 1L, 2L, 1L, 0L, 2L, 3L, 1L), X3 = c(2L, 1L, 2L, 2L, 0L, 0L, 
2L, 3L, 1L), X4 = c(1L, 2L, 2L, 2L, 1L, 2L, 0L, 2L, 2L), X5 = c(1L, 
2L, 1L, 2L, 1L, 0L, 1L, 2L, 1L), X6 = c(1L, 2L, 1L, 1L, 1L, 2L, 
1L, 2L, 1L)), .Names = c("X1", "X2", "X3", "X4", "X5", "X6"), class = "data.frame", row.names = c(NA, 
-9L)) 
```

应用于数据框时，`unique`返回数据框中的唯一行。 `length()`然后计算数据框中的*列数。*所以总的来说（我想不出一个反例），这总是等于`ncol(s)`。

```
length(unique(s))  ## 6 
```

`unique`应用于矩阵也返回唯一的行，但现在`length()`计算元素的总数：对于您的数据，这通常相当于`ncol(s)*nrow(s)`.

```
length(unique(as.matrix(s)))  ## 54 
```

如果您想`unique`在这种情况下应用到元素，您可能需要以下之一，所有这些都将原始数据框折叠为单个向量：

```
length(unique(as.vector(as.matrix(s)))) ## 4
length(unique(unlist(s)))  ## 4
length(unique(c(as.matrix(s)))) ## 4 
```

您是否想要`diff(range(x))+1`或`length(unique(...))`取决于您想要如何计算完全由（例如）组成的数据框`{0,1,2,4}`- 应该返回 4 还是 5？（正如@Brian Diggs 在他的回答中指出的那样，`diff(range(...))+1`它将在矩阵上工作，而无需进一步展平结构——它也可以在`unlist()`ed 数据框上工作。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T18:01:18.313

`diff(range(d))`返回最小值和最大值之间的差值，分别为 0 和 3

您要做的是计算集合中有多少元素。尝试`length(d)`

```
d <- 0:3
length(d) 
```

包括对这个答案的评论......让代码说话

示例数据：

```
dataset = 1:136
dataset = dataset %% 4
dim(dataset) <- c(4,34) //Now we have a table
diff(range(dataset))+1 
```

它像你想要的那样返回 4

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T18:42:40.463

鉴于`d`您现在提供的结构，您可以对此进行逐列计算。

```
> diff(range(d$X1))+1
[1] 3
> diff(range(d$X1))+1
[1] 3
> diff(range(d$X2))+1
[1] 4
> diff(range(d$X3))+1
[1] 4
> diff(range(d$X4))+1
[1] 3
> diff(range(d$X5))+1
[1] 3
> diff(range(d$X6))+1
[1] 2 
```

或者您可以遍历所有列

```
> lapply(d, function(dp) {diff(range(dp))+1})
$X1
[1] 3

$X2
[1] 4

$X3
[1] 4

$X4
[1] 3

$X5
[1] 3

$X6
[1] 2 
```

或者，如果您想要所有列的范围，请将其视为矩阵：

```
> diff(range(as.matrix(d)))+1
[1] 4 
```

# sql - 查询以通过前缀定位存储过程

> ID：10759200
> 
> 赞同：1
> 
> 时间：2012-05-25T17:55:43.680
> 
> 标签：sql, sql-server-2008

今天早上我在一个数据库中，其中只有 10k 个非系统存储过程。我正在寻找一组大约 20 人的名字。当我尝试选择节点来查看它们时，它会引发错误。我猜想试图展示许多存储过程。

我很难在 Google 上找到正确的语法。所以我想我会问并给它一个好标题，以便其他人将来可以找到它。

所以这是我到目前为止的代码

```
SELECT ROUTINE_NAME
FROM SYS.OBJECTS
WHERE ROUTINE_NAME LIKE '%PER_%' 
AND ROUTINE_TYPE= 'PROCEDURE'
ORDER BY ROUTINE_NAME ASC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:58:36.583

我认为您正在查询错误的系统视图。这似乎是观点`Information_Schema.Routines`：

```
SELECT ROUTINE_NAME
FROM INFORMATION_SCHEMA.ROUTINES
WHERE ROUTINE_TYPE = 'PROCEDURE'
AND ROUTINE_NAME LIKE 'PER_%'
ORDER BY ROUTINE_NAME ASC 
```

# ssrs-2008 - 与多个 SSRS 报告共享参数

> ID：10759203
> 
> 赞同：4
> 
> 时间：2012-05-25T17:56:21.263
> 
> 标签：ssrs-2008, reporting-services

我正在尝试与多个报告共享一组参数。

有可能这样做吗？

我目前必须为每个单独的报告创建一组参数。这会创建相同数据的副本，并使其更难维护。

我正在使用 SSRS 2008 R2。

对此的任何帮助或指导将不胜感激。

谢谢(^_^)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T23:30:06.313

不，这是不可能的，因为参数直接链接到报告，如数据集。在 SSRS 2008 **R2**上`shared data sets`，有与您相同的`shared data sources`. 也许与他们一起，您可以尝试做类似的事情（不知道，只是猜测）

# math - 如何用 glm 计算 vec4 叉积？

> ID：10759206
> 
> 赞同：4
> 
> 时间：2012-05-25T17:56:36.593
> 
> 标签：math, vectormath

为什么这会引发编译错误：没有匹配函数调用 'cross(glm::vec4&, glm::vec4&)'</p>

```
glm::vec4 a;
glm::vec4 b;
glm::vec4 c = glm::cross(a, b); 
```

但它适用于 vec3？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T23:09:23.450

没有 4D[矢量叉积](http://en.wikipedia.org/wiki/Cross_product)这样的东西；该操作仅针对 3D 矢量定义。好吧，从技术上讲，有一个[*七*维向量叉积](http://en.wikipedia.org/wiki/Seven-dimensional_cross_product)，但不知何故，我认为你不是在寻找那个。

由于 4D 矢量叉积在数学上不合理，GLM 不提供计算它的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T17:02:14.593

你的 vec4 代表什么？就像 Nicol[所说](https://stackoverflow.com/a/10762315/752878)，叉积仅适用于 3D 向量。叉积运算用于找到与两个输入向量正交的向量。因此，如果您的 vec4 以 {x, y, z, w} 的形式表示 3D 齐次向量，那么 w 分量对您来说无关紧要；你可以简单地忽略它。

解决方法如下：

```
vec4 crossVec4(vec4 _v1, vec4 _v2){
    vec3 vec1 = vec3(_v1[0], _v1[1], _v1[2]);
    vec3 vec2 = vec3(_v2[0], _v2[1], _v2[2]);
    vec3 res = cross(vec1, vec2);
    return vec4(res[0], res[1], res[2], 1);
} 
```

只需将您的 vec4 转换为 vec3，执行叉积，然后将 w-component 1 添加回其中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-05T16:50:00.790

叉积的推广就是楔积，两个向量的楔积是一个2-形式，也称为双向量。

在 3-space 中，2-form 有点像向量，但它的行为完全不同。假设我们有两个与表面相切的非共线向量（也称为切向量）。通过取这些向量的叉积，我们有一个表示切平面的 2-形式。我们还可以通过垂直于该平面的向量（也称为法向量）来表示该切平面。但是切线和法线向量的变换是不同的，即法线向量是通过用于变换切线向量的矩阵的逆转置来变换的。

在 4 空间中，由两个向量的楔积得到的 2 形式也表示包含这两个向量的平面（在 N 空间中也是如此）。与 3 空间中的情况类似，我们可以对该平面有另一种解释，但在 4 空间中，平面的补码不是 4 向量，而是另一个平面，两者都用 6 个分量表示，不是 4。

```
c1 * e1^e2 + c2 * e1^e3 + c3 * e1^e4 + c4 * e2^e3 + c5 * e2^e4 + c6 * e3^e4 
```

由于 glm 不提供楔形产品的 API，您将不得不自己滚动。您可以使用两个简单的规则轻松计算出楔积的代数：

```
(1) ei ^ ei = 0
(2) ei ^ ej = -ej ^ ei 
```

其中 ei 和 ej 是向量空间的分量向量（基），例如

```
[a b c d] --> a * e1 + b * e2 + c * e3 + d * e4 
```

上一篇文章中提到的7维向量是两个向量的几何乘积，它用ei^ei=1代替了上面的规则（1），就像点积和叉积（或复数乘法）的融合，这比你想要的要多。如需更多信息，[请访问 https://en.wikipedia.org/wiki/Exterior_algebra](https://en.wikipedia.org/wiki/Exterior_algebra)或[https://en.wikipedia.org/wiki/Geometric_algebra](https://en.wikipedia.org/wiki/Geometric_algebra)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T18:58:43.647

使用 glm 的 GLM_SWIZZLE 计算叉积有更快捷的方法。

只需`#define GLM_SWIZZLE`在包含任何 glm 文件之前执行此操作。它对许多其他技巧也很有帮助。

```
glm::vec4 a;
glm::vec4 b;
glm::vec4 c = glm::vec4( glm::cross( glm::vec3( a.xyz ), glm::vec3( b.xyz ) ), 0 ); 
```

# javascript - 等待 DOM 在 JSNI GWT 中加载

> ID：10759210
> 
> 赞同：2
> 
> 时间：2012-05-25T17:56:54.847
> 
> 标签：javascript, gwt, dom, jsni

我目前遇到的问题是 javascript 似乎在 DOM 完全加载之前正在执行。我为什么这么说？采取以下代码：

```
var $r = $wnd.Raphael("container", 640, 480);

// Creates pie chart at with center at 320, 200,
// radius 100 and data: [55, 20, 13, 32, 5, 1, 2]
$r.piechart(320, 240, 100, [ 55, 20, 13, 32, 5, 1, 2 ]); 
```

返回一个 Javascript 异常：'f is null'。这似乎表明无法识别容器名称。

如果指定绝对坐标，则饼图呈现良好。如果我在 Chrome 控制台中使用之前的代码（毕竟加载后），它会有效地将饼图加载到容器标签中。

我尝试将代码块包装在 JQuery 调用中：

```
$wnd.jQuery(function($) {
            // Creates canvas 640 × 480 at 10, 50
            var $r = $wnd.Raphael("container", 640, 480);
            // Creates pie chart at with center at 320, 200,
            // radius 100 and data: [55, 20, 13, 32, 5, 1, 2]
            $r.piechart(320, 240, 100, [ 55, 20, 13, 32, 5, 1, 2 ]);
    }); 
```

...而且没有骰子。

我可以尝试什么的任何想法？

编辑：

这是我调用 JSNI 方法的方式/位置。以下是相关的View代码。

```
public class WidgetSamplerView extends AbstractPanelView implements
                WidgetSamplerPresenter.Display { 

private FlexTable mainPanel;

public WidgetSamplerView() {
        super();

            mainPanel = new FlexTable();

            HTML container = new HTML();
        container.getElement().setAttribute("style",
                "width:700px;height:700px");
        container.getElement().setId("container");

        mainPanel.setWidget(0, 1, container);

        MyRaphaelWrapper.pieChart(); // JSNI Call

        setWidget(mainPanel);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:32:09.863

您必须确保仅在`onLoad()`激活时调用 JSNI 方法，以验证小部件已加载。

请参阅[我的另一个关于创建和初始化小部件的最佳实践的答案](https://stackoverflow.com/a/10651482/547020)，以供快速参考。

基本思想是覆盖`onLoad()`小部件并在那里调用任何加载功能：

```
public class MainPanel extends FlexTable {

    private Element container;

    public MainPanel() {

        container = DOM.createDiv();
        container.setId("container");

        // this is required by the Widget API to define the underlying element
        setElement(container);
    }

    @Override
    protected void onLoad() {
        super.onLoad();

            MyRaphaelWrapper.pieChart(); // JSNI Call
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T21:52:28.440

我怀疑 Raphael 在内部做了以下事情：

```
document.getElementById("container"); 
```

如果您使用标准设置编译 GWT 应用程序，则代码将加载到 iframe 中。这就是为什么你必须使用 $wnd 而不是 window 和 $doc 而不是 document。他们指向主窗口。

你是如何包含其他 javascript 库的？因为 Raphael 可能正在查看错误的 DOM（iframe 的 dom）。你能用这样的方法将元素直接传递给 rapahel 吗？

```
var c = $doc.getElementById("container");
$wnd.Raphael(c, ..); 
```

# linux - emacs窗口侧面的奇怪垂直线，而它最大化

> ID：10759212
> 
> 赞同：7
> 
> 时间：2012-05-25T17:57:02.323
> 
> 标签：linux, emacs, desktop, gnome, kde

图片会说明一切：

![问题截图](../Images/a9fc19cf84915532720e74b2cbe42dd6.png)

当我在 GNOME、KDE ​​或其他 DE 中最大化 emacs 时，我在 emacs 窗口的一侧有一条奇怪的线。我怎样才能删除那条线？

PS。在窗口模式下，任何 emacs 窗口大小都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:10:05.220

我不认为你可以。

这是由于 Emacs 界面的字符驱动特性（即使是窗口化的）。基本上，主视图的宽度只能随整个字符宽度增量而变化，而不是逐个像素。

当窗口最大化时，视图会尽可能多地扩展为字符宽度的倍数（计算为左右两边的换行符分配的空间），剩余的像素留作空闲空间（带对你想摆脱）。

# html - CSS'浮动：对；' 问题

> ID：10759216
> 
> 赞同：1
> 
> 时间：2012-05-25T17:57:16.953
> 
> 标签：html, css, css-float

我目前在 HTML 中设置了一个简单的标题，并且正在使用 CSS 来设置它的样式。我创建了多种样式：“#header”和“#header #right”。当我使用'float：right;' 对于我提到的第二种样式，它将文本几乎完全向下移动到标题下方。

**代码：**

索引.html：

```
<html>
<link rel="icon" type="image/png" href="images/favicon.png">
<link href='main.css' type='text/css' rel=Stylesheet>
<head>
<title>FriendSub</title>
</head>
<body>

<div id='header'>
<font size='+3'>FriendSub &nbsp; &nbsp;</font>
<a href='index.php'>Home</a> | 
<a href=''>Subscribers</a> |
<a href=''>Subscriptions</a>
<div id='right'> 
  <p><a href=''>Log in</a> | <a href='register.php'>Register</a></p></div></div>
</body>
</html> 
```

主.css：

```
@charset "utf-8";
/* CSS Document */

#header {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 24px;
    background-color: #093;
    border-top-left-radius: 18;
    border-top-right-radius: 18;
    width: 96%;
    height: 58px;
    margin: auto;
    padding-top: 10px;
    padding-bottom: 10px;
    padding-left: 14px;
    padding-right: 14px;
    color: #FFF;    
    font-weight: bold;
    text-shadow: #000 0.1em 0.1em 0.2em;
}

#header a {
    color: #FFF;
    text-decoration: none;
    text-shadow: #000 0.1em 0.1em 0.2em;
}

#header a:hover {
    color: #CCC;
}

#header #right {
    float: right;
    width: 220px;
    background-color: #093;
}

#content {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    background-color: #CCC;
    width: 1000;
    height: 58px;
    margin-left: auto;
    margin-right: auto;
    padding-top: 14px;
    padding-left: 14px;
    padding-right: 14px;
    padding-bottom: 600;
    font-weight: bold;
    border-bottom-left-radius: 18;
    border-bottom-right-radius: 18;
    line-height: 1%;
} 
```

JSFiddle在这里：http: [//jsfiddle.net/aKtep/](http://jsfiddle.net/aKtep/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:06:24.983

尝试`<div style='clear:both'></div>`在关闭后添加一个权利`#right`，看看会发生什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:10:47.947

一个快速的解决方案（假设我了解您想要的结果）是重新排列元素，以便您想要浮动到右侧的项目是标题中的第一个。浮动元素会从文档的正常流程中移除，并且通常会被推送到下一行，除非它们有足够的空间。但是，如果浮动元素先出现，则后续元素将围绕它排列。见[小提琴](http://jsfiddle.net/uuHQc/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:06:38.903

从 Login/Register 链接周围删除 p 标签，修改 #header #right 以包含 padding-top:10px；当你真的不需要时，你也使用了太多的 div (divitus)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:08:16.873

您需要为容器指定`#header`可容纳其所有内容的单位宽度。

我在[这里](http://jsfiddle.net/x9zDc/)所做的只是将`#header`宽度从更改`96%`为`960px`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T18:08:25.797

我想我不是 100% 确定你在问什么，但听起来你的正常标题正在将正确的标题向下推到它下面。据我所知，这可能与您的标题容器的宽度为 96% 有关。然后#right #header 具有像素宽度，原始标题容器可能没有足够的空间容纳那么多像素。尝试将宽度更改`#header #right`为 %

一个忠告，不要用这么多的ID。您正在创建非常高的特异性，以后可能会让您感到痛苦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-18T14:29:38.107

如前所述，您应该`clear: float`在**#right**段之后使用。

原因是[clear 属性与](https://kolosek.com/css-clear-float/)[float 属性](https://kolosek.com/css-float/)直接相关。 **它指定一个元素是否应该在浮动元素旁边，或者是否应该在它们下方移动。**此属性适用于**浮动和非浮动**元素。

# c# - 从数据库中检索数据时将 DBNull 转换为其他类型

> ID：10759217
> 
> 赞同：2
> 
> 时间：2012-05-25T17:57:17.410
> 
> 标签：c#, asp.net-mvc-3

我有一个 MVC3 应用程序。我调用数据库，将我的数据放入数据集中并将其存储在我的班级中。这是我如何从数据集中存储我的数据

```
 var dt = ds.Tables[0];
                var i = 0;
                foreach (DataRow dr in dt.Rows)
                {
                    wt = new WorkTasksDto
                             {
                                 Notes = dr["Notes"].ToString(),
                                 DueDate = Convert.ToDateTime(dr["DueDate"])
                 } 
```

这是我的班级成员：

```
 [DataMember]
            public DateTime? DueDate
            { get; set; } 
```

从 sql server 返回的字段 DueDate 为空，这很好，但是当我尝试将其存储在班级的 DueDate 字段中时，出现以下错误：

```
 "Object cannot be cast from DBNull to other types" 
```

如何修复此错误？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T18:00:44.710

看一眼`DataRow.IsNull`

```
DueDate = dr.IsNull("DueDate")? (DateTime?)null : (DateTime?)dr["DueDate"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T18:01:56.703

```
DueDate = dr["DueDate"] == DBNull.Value ? (DateTime?) null : Convert.ToDateTime(dr["DueDate"]); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-16T11:44:55.727

您可以删除多余的演员表 (DateTime?)null ，只需写 null ：

DueDate = dr.IsNull("DueDate")? null : (DateTime?)dr["DueDate"]

# php - PHP在while循环之外获取变量

> ID：10759218
> 
> 赞同：0
> 
> 时间：2012-05-25T17:57:18.763
> 
> 标签：php, mysql, while-loop

早些时候我发布了一个关于从循环中获取单个常量值并在循环之外使用它的问题（参考：[问题](https://stackoverflow.com/questions/10750670/php-getting-a-variable-outside-from-a-while-loop)）。现在我面临另一个while循环的问题。它是这样的：我有一个查询：

```
$sql = "
        SELECT alarms.id, alarms.date, clients.name, clients.number, alarms.controller, 
        alarmstype.type, alarms.alarmstatus, alarms.starttime, alarms.endtime
        FROM alarms
        INNER JOIN clients ON alarms.clientid = clients.id 
        INNER JOIN alarmstype ON alarms.typeid = alarmstype.id
        WHERE alarms.alarmstatus = 'ON' ORDER BY alarms.date ASC";
$result = mysql_query($sql); 
```

并且对于每一行，我都在 while 循环中分配了一个按钮：

```
 while ($row = mysql_fetch_array($result)) {
      print "<tr>
      <td>" . $row['date'] . "</td>
      <td>" . $row['number'] . " | " . $row['name'] . "</td>
<td>" . $row['controller'] . "</td>
    <td>" . $row['type'] . "</td>
    <td style='color: red'>
        <select name = 'statusupdate' style='font-size:10px;'>
          <option> " . $row['alarmstatus'] . " </option>
            <option> OFF </option>
        </select>
      </td>
            <td>" . $row['starttime'] . "</td>
            <td>" . $row['endtime'] . "</td>
            <td><input type='submit' name='delete' value='delete' /></td> 
```

到目前为止，一切都很好。行显示正常，按钮在那里。（所有的while循环都在一个表单标签中，所以输入很酷。无论如何。我想做这样的事情：

```
 }
    if (isset($_POST['delete'])) {
      delete_alarm_from_database($alarmid)
    } 
```

函数是这样的：

```
function delete_alarm_from_database($id) {
  //find alarm by id and delete:
  $sql = "SELECT * FROM alarms WHERE id = " . $id;
  $result = mysql_result($sql);
  if (!$result) {
    print "couldn't find record.";
  }
  //delete record from database:
  else {
    $sql = "DELETE FROM alarms WHERE id = " . $id;
    $result = mysql_result($sql);
  }
} 
```

我的问题是这样的：每一行都有一个 id 但将其设置为变量将始终覆盖，直到他将循环到达的最后一个 id 放入变量中。（意味着每行的每个删除按钮都会简单地删除每个页面加载的最后一个 id）

问题是这样的。如何让每个删除按钮识别它的行 ID？

在此先感谢 - 干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:00:31.400

您需要为每条记录使用单独的表格。

```
 While ($row=mysql_fetch_array($result)){

  <form method="post" .....>
   .....
   <select>
         <option value="'.$value.'">title</option>
   </select>
   .....

  </form>
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:00:50.213

为每个按钮添加一个 id。并使用该 ID 调用它，这可能是使用 jQuery 的最佳选择。这样您就可以知道按钮的确切编号 :)

看看这个 - 这是同样的问题 - [PHP - 使用表单输入中的 id 制作 switch 语句](https://stackoverflow.com/questions/10758853/php-making-a-switch-statement-using-id-from-form-input/10758955#10758955)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:05:57.890

我建议稍微改变一下你的流程。将删除按钮更改为复选框，并允许用户一次删除多个。

改变

```
<td><input type='submit' name='delete' value='delete' /></td> 
```

到

```
<td><input type='checkbox' name='ids_to_delete[]' value='<?php echo $row['id']; ?>' /></td> 
```

`Delete`然后在表格末尾添加一个新按钮

```
<input type='submit' name='delete' value='Delete selected rows' /> 
```

现在更改您的 PHP 以处理一组值

```
if (isset($_POST['ids_to_delete']) && count($_POST['ids_to_delete']) > 0) {
    foreach($_POST['ids_to_delete'] as $alarmid) {
        delete_alarm_from_database($alarmid)
    }
} 
```

甚至更好 - 更改您的`delete_alarm_from_database`函数以处理数组并一次删除它们。

# java - 在接口中创建两个泛型参数

> ID：10759222
> 
> 赞同：0
> 
> 时间：2012-05-25T17:57:40.170
> 
> 标签：java, generics, interface

我正在尝试为我的类创建一个通用接口，以满足它们的所有需求。我已经创建了基类来将它们链接在一起，但是我尝试创建的界面并没有像我期望的那样工作，而且我找不到正确的词来输入搜索以找到它们。

到目前为止的界面是：

```
public <T extends SDOBase> T entityToSDO(<? extends BaseEntity> entity, T sdo) throws Exception; 
```

如何使实体成为第二种泛型类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:02:17.127

尝试以这种方式声明您的方法：

```
public <T extends SDOBase, E extends BaseEntity> T entityToSDO(E entity, T sdo) throws Exception; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:01:44.503

我认为你想要更多的东西：

```
public interface MyInterface<T extends SDOBase>
{
    public T entityToSDO(<? extends BaseEntity> entity, T sdo) throws Exception;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T22:02:24.780

您只需

```
public <T extends SDOBase> T entityToSDO(BaseEntity entity, T sdo) throws Exception; 
```

任何作为 BaseEntity 子类型实例的东西都会自动成为 BaseEntity 的实例。

# c# - 检测Form中其他类ComboBox的变化

> ID：10759223
> 
> 赞同：0
> 
> 时间：2012-05-25T17:57:55.660
> 
> 标签：c#

我想检测 ComboBox selectedindex 的变化。组合框与 Form 类位于不同的类中：

```
class Analyze
    {
        public Analyze(Form theform)
        {
            size = new ComboBox();
            size.Location = new Point(100,100);
            size.Name = "matrixsize";
            size.Size= new Size(200,100);
            size.Items.AddRange(matrix_sizes);
            theform.Controls.Add(size);
        }
        private string[] matrix_sizes = { "1", "2", "3", "4", "5", "6", "7", "8", "9", "0" };
        private ComboBox size;
    } 
```

我在这里创建了一个分析类型的新对象：

```
private void Analyze_Click(object sender, EventArgs e)
{
    Analyze analyze = new Analyze(this);
} 
```

现在我想检测Analyze.size中值的变化，我该怎么做？访问大小组合框的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:01:32.320

只需添加您自己的处理程序：

```
class Analyze {
  public event EventHandler SelectedIndexChanged;

  public Analyze(Form theform) {

    ...
    size.SelectedIndexChanged += size_SelectedIndexChanged;
    theform.Controls.Add(size);
  }

  void size_SelectedIndexChanged(object sender, EventArgs e) {
    if (SelectedIndexChanged != null) {
      SelectedIndexChanged(sender, e);
    }
  }
} 
```

然后在调用表单上存根您的事件：

```
private void Analyze_Click(object sender, EventArgs e)
  Analyze analyze = new Analyze(this);
  analyze.SelectedIndexChanged += analyze_SelectedIndexChanged;
}

void analyze_SelectedIndexChanged(object sender, EventArgs e) {
  // do something
} 
```

# java - Tomcat JNDI Bean

> ID：10759229
> 
> 赞同：0
> 
> 时间：2012-05-25T17:58:27.147
> 
> 标签：java, tomcat, jndi

我想知道是否可以将带有数据的对象存储到 JNDI 资源中，就像我们可以在会话中那样，在不同的应用程序之间共享数据（登录数据）。我已经阅读了[http://tomcat.apache.org/tomcat-5.5-doc/jndi-resources-howto.html](http://tomcat.apache.org/tomcat-5.5-doc/jndi-resources-howto.html)中的文档，但由于 JNDI 的实例化过程，我仍然有点困惑。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:24:18.910

[Tomcat 的 JNDI 服务](https://tomcat.apache.org/tomcat-9.0-doc/jndi-resources-howto.html)非常轻量级，并且有意提供 webapp 之间的隔离。该实现*也不*支持远程连接和引用等。因此您将无法在集群中的服务器之间共享数据。

如果您不想使用功能齐全的[Jakarta EE](https://jakarta.ee/)容器（如[Eclipse Glassfish](https://en.wikipedia.org/wiki/GlassFish)或[Wildfly](https://en.wikipedia.org/wiki/WildFly)），那么您可能需要查看类似 webcache 的东西来共享这样的数据。

# jquery - 为什么 jquery 远程验证工作虽然我没有包含库

> ID：10759246
> 
> 赞同：0
> 
> 时间：2012-05-25T17:59:52.430
> 
> 标签：jquery, asp.net-mvc, jquery-dialog, jquery-validate

为什么 jquery 远程/验证在我的对话框中工作，尽管我没有在打开对话框的索引视图中包含这些库？

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:00:20.920

让我猜猜：您正在使用 ASP.NET MVC 4，并且在您的头部部分`_Layout`有一个脚本包包含，它自动包含 Scripts 文件夹中的所有 javascript 文件。因此，虽然您没有明确包含这些脚本，但它们就在那里。没有它们，不显眼的验证不可能工作。

# powershell - 如何使用 Powershell 从文本文件中删除回车符？

> ID：10759251
> 
> 赞同：4
> 
> 时间：2012-05-25T18:00:09.577
> 
> 标签：powershell, scripting, replace, find

我正在使用以下命令将目录的内容输出到 txt 文件：

```
$SearchPath="c:\searchpath"
$Outpath="c:\outpath"

Get-ChildItem "$SearchPath" -Recurse | where {!$_.psiscontainer} | Format-Wide -Column 1'
| Out-File "$OutPath\Contents.txt" -Encoding ASCII -Width 200 
```

当我这样做时，我最终得到的是一个包含我需要的信息的 txt 文件，但它添加了许多我不需要的回车，使输出更难阅读。

这是它的样子：

```
 c:\searchpath\directory

name of file.txt

name of another file.txt

    c:\searchpath\another directory

name of some file.txt 
```

这使得 txt 文件需要大量滚动，但实际信息并不多，通常不到一百行。

我希望它看起来像：

```
 c:\searchpath\directory
nameoffile.txt
  c:\searchpath\another directory
another file.txt 
```

这是我到目前为止尝试过的，没有用

```
$configFiles=get-childitem "c:\outpath\*.txt" -rec
foreach ($file in $configFiles)
{
(Get-Content $file.PSPath) | 
Foreach-Object {$_ -replace "'n", ""} | 
Set-Content $file.PSPath
} 
```

我也试过 'r 但两个选项都保持文件不变。

另一种尝试：

```
Select-String -Pattern "\w" -Path 'c:\outpath\contents.txt' | foreach {$_.line}'
| Set-Content -Path c:\outpath\contents2.txt 
```

当我在末尾没有 Set-content 的情况下运行该字符串时，它在 ISE 中完全符合我的需要，但是一旦我在末尾添加 Set-Content，它就会再次在我不需要的地方回车他们。

这里有一些有趣的事情，如果我创建一个带有几个回车符和几个制表符的文本文件，那么如果我使用我一直在使用的相同 -replace 脚本，但在 txt 文件中使用`t to replace the tabs, it works perfect. But`r 和r 以及 `n 然后运行`n do not work. It's almost as though it doesn't recognize them as escape characters. But if I add`脚本，它仍然没有取代任何东西。似乎不知道该怎么处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:54:35.570

`Set-Content`默认添加换行符。在您最后一次尝试中替换`Set-Content`为您的问题将为您提供所需的文件：`Out-File`

```
Select-String -Pattern "\w" -Path 'c:\outpath\contents.txt' | foreach {$_.line} | 
Out-File -FilePath c:\outpath\contents2.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:09:15.610

这不是'r（撇号），而是一个反引号：`r。这是美式键盘布局中 tab 键上方的键。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:21:42.870

您可以使用以下方法简单地避免所有这些空行`Select-Object -ExpandProperty Name`：

```
Get-ChildItem "$SearchPath" -Recurse | 
    Where { !$_.PSIsContainer } |
    Select-Object -ExpandProperty Name | 
    Out-File "$OutPath\Contents.txt" -Encoding ASCII -Width 200 
```

...如果您不需要文件夹名称。

# scripting - 我可以使用哪些语言来创建 UNIX 实用程序？

> ID：10759252
> 
> 赞同：0
> 
> 时间：2012-05-25T18:00:10.763
> 
> 标签：scripting, unix

我需要编写一个 unix 实用程序，我可以使用哪些语言？我擅长 C/C++，但我不知道任何脚本语言，如 shell/bash/perl/python。但是在我的大多数项目中都使用了 linux，并且主要使用命令行。请指教....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:04:01.583

您可以使用适用于您的 Unix 系统的任何语言。

# java - 如何使用HashMap获取列表字符串而不重复

> ID：10759253
> 
> 赞同：0
> 
> 时间：2012-05-25T18:00:15.113
> 
> 标签：java, arraylist, hashmap

我有一个名为 Personne 的课程

```
public class Personne implements java.lang.Comparable<Personne> {

protected String nom;
protected String prenom;

public Personne(String nom,String prenom){
    this.nom=nom;
    this.prenom=prenom;
}

public String toString(){
    return nom+", "+prenom;
}

@Override
public int compareTo(Personne pers) {
    // TODO Auto-generated method stub
     if(!(pers instanceof Personne))
          throw new ClassCastException();
     Personne p = pers;
     int comparaison;
        if((comparaison = nom.compareTo(p.getNom())) != 0)
                return  comparaison;
        else if((comparaison = prenom.compareTo(p.getPrenom())) != 0)
                return comparaison;

     return comparaison;

}

public String getNom() {
    return nom;
}

public void setNom(String nom) {
    this.nom = nom;
}

public String getPrenom() {
    return prenom;
}

public void setPrenom(String prenom) {
    this.prenom = prenom;
}

  } 
```

我有一个外部类的人员列表

```
 public class ListePersonne {

protected static ArrayList <Personne> listPers = new ArrayList <Personne>();

public static void main(String[] ards){

    Personne p1 = new Personne("Bachene","Adel");
    listPers.add(p1);

    Personne p2 = new Personne("Bourada","Amine");
    listPers.add(p2);

    Personne p3 = new Personne("Bachene","Amine");
    listPers.add(p3);

    Personne p4 = new Personne("Benouda-zouaui","Khalil");
    listPers.add(p4);

    Personne p5 = new Personne("Bachene","Hakim");
    listPers.add(p5);

    Personne p6 = new Personne("Mazachi","Oussama");
    listPers.add(p6);

    Personne p7 = new Personne("Bachene","Issam");
    listPers.add(p7);

    Personne p8 = new Personne("Allel","Mohamed");
    listPers.add(p8);

    Personne p9 = new Personne("Bachene","Mohamed");
    listPers.add(p9);

    Personne p10 = new Personne("Yank","Maher");
    listPers.add(p10); 
```

使用第一类的方法

所以我的问题是如何使用 hashmap 从 listPers 中获取人员而不在“Nom”中重复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:07:41.943

你不需要一个`HashMap`。A[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)应该做的。

```
Set uniquePers = new HashSet(listPers);
List listUniquePers = new ArrayListSet(uniquePers); 
```

或更简单地说：

```
List listUniquePers = new ArrayListSet(new HashSet(listPers)); 
```

[`equals and hashCode`](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)在 Personne 类中也实现了make 。（另请参阅[此问题](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)的答案）

**在您发表评论并知道这是家庭作业后**更新：****

 **[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)（或者，一般来说，[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)）是一种存储项目列表并记住项目添加到列表中的顺序的数据结构。正如您已经发现的那样，它不能保证项目的唯一性。

A[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)将项目存储在键值对中。它不记得实现事物的顺序（实际上`List`和`Map`意识形态不同的事物。列表的概念是*按顺序存储东西，并使用索引（位置）来标识它们*，而映射是*通过键标识值*。

A`Map`保证每个键只有一个值。当您添加另一个值时，前一个值将被覆盖。

因此，您需要一个带有唯一标识您的对象的键的地图。这`nom`是`Personne`.

`HashMap`使用键作为`String`（对于`nom`）和值创建 -`Personne`本身：

```
HashMap<String, Personne> uniquePersonne = new HashMap<String, Personne>(); 
```

遍历`List`，获取一个`Personne`对象并将该对象添加到`Map`. 就像是：

```
uniquePersonne.put(personne.getNom(), personne) 
```

`personne`您列表中的对象在哪里

现在`Map`将只有`Personne`具有唯一名称的 s。

注意：如果有两个`Personne`同名的s，列表中后面的一个将覆盖地图中前面的一个。如果您想避免这种情况，您可以使用该[`containsKey`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#containsKey(java.lang.Object))方法查看 Map 是否已经有 key，如果没有，则添加到 map 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T18:07:32.940

创建一个您看到的名称的哈希集，在您浏览列表时为其添加名称，并仅保留在`seen`哈希集中没有条目的项目：

```
Set<String> seen = new HashSet<String>();
List<Personne> unique = new ArrayList<Personne>();
for (Personne p : listPers) {
    if (seen.add(p.nom)) {
        unique.add(p);
    }
} 
```

请注意，这种方法完全忽略了 prenom，因为您希望人们只在 nom 中没有重复。这会保留给定名称的第一个人。您也可以使用哈希映射来做到这一点：

```
Map<String,Personne> byName = new HashMap<String,Personne>();
for (Personne p : listPers) {
    byName.put(p.nom, p);
}
List<Personne> unique = new ArrayList<Personne>(byName.values()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:18:21.297

考虑插入它们并按名称排序，您必须定义要保留哪些。如果要保留 Personne 的第一次出现，代码如下：

```
Map<String, Personne> personneMap = new HashMap<String, Personne>();
for(Personne p : listPers) {
    if(!personneMap.contains(p.getNom())) {
        personneMap.put(p.getNom(), p);
    }
} 
```

否则，只需添加没有包含检查的人员。这样，您将只保存列表中具有注册名称的最后一个 Personne。

请注意，我使用 Map 接口来表示地图，但您可以直接创建一个 HashMap。**

# datagrid - 单个单元格中有多个值时如何查询一个值（dojo）

> ID：10759254
> 
> 赞同：0
> 
> 时间：2012-05-25T18:00:17.957
> 
> 标签：datagrid, dojo, dojox.grid

我有一个网格，其中一列单元格有多个值，例如

假设我在其中一个单元格中有一个名为“Type”的列，其中有 A、B、C 之类的值...我正在像这样查询网格

```
this.Grid.query = { "TYPE": e.row.data.type };
this.Grid.refresh(); 
```

因此，当用户选择特定的类型（比如 A 或 B ..我在下拉列表中）..应该显示特定的行，但发生的是当单元格中只有一个值时我可以看到网格数据它..未显示单元格中具有多个类型的行...我如何显示所有存在所选类型的行？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:48:30.083

查询网格的语法

```
 grid4.setQuery({  TYPE: '*L*'  }); 
```

查询支持通配符 '*' & '?' .

# jquery - SlickGrid-如何从列循环中将参数传递给格式化程序（包括详细的答案）

> ID：10759255
> 
> 赞同：2
> 
> 时间：2012-05-25T18:00:30.963
> 
> 标签：jquery, json, slickgrid

我有一个给定的网格。我想在每一行中放置一个属性，一个 id 值。（为了获取行标识，执行删除和编辑操作）。

我想到的最好的方法是使用格式化程序将其打印到属性中，但是我找不到将 id 传递给格式化程序函数的方法，因为格式化程序调用是列减速级别，并且我正在获取每个行 id ，在*数据*循环内。

怎么做？

```
function NameFormatter(row, cell, value, columnDef, dataContext) {
    return '<span data-user-id="'+id+'">"'+text+'"</span>';
}

columns.push({ 
   id: "name", name: "Name", field: "name", width: 180, 
   cssClass: "cellName", sortable: true, formatter:NameFormatter
})

for (var i = 0; i < list_users.length; i++) {
    data[i] = {
        /*
           What I do here?
           How do I pass list_users[i].id & 
           list_users[i].name to the formatter from here? 
        */
        name: list_users[i].name,
        role: returnRole(list_users[i].role),
        email: list_users[i].email,
        portfolios: 'no attr for now'
    };
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T21:53:34.323

在此处记录代码和答案，以供将来偶然发现我的问题的任何用户使用。

SlickGrid 的逻辑是这样工作的：

1.  **定义表头和其他运行时属性（如可排序、宽度等）的**列。****
***   **将您的 json 和寄存器值获取到*DataView的***数据循环**，为我们的成员保存。*****   **当我们使用格式化程序**时，这个**成员**变得有用。****

 ******当您调用格式化程序时，在*Columns*声明中，您只需要调用格式化程序。光滑的网格将完成其余的工作。

这是我的列定义，其中我有一个 {span} 元素，其中包含值和 id，基于条件。

```
columns.push({ 
    id: "options", 
    name: "Options", 
    field: "options", 
    width: 110, 
    cssClass: "cellOptions slick-last-cell", 
    formatter: optionsFormatter 
}) 
```

如果一切都定义正确，***格式化***程序将传递条件或任何其他类型的工作所需的所有参数。

格式化程序从 dataView 接收您/我们传递的所有行参数。如果我这样定义我的数据：

```
for (var i = 0; i < list_users.length; i++) {
    data[i] = {
        id: list_users[i].id,
        name: list_users[i].name,
        role: returnRole(list_users[i].role),
        email: list_users[i].email,
        portfolios: 'no attr for now',
        isPending: list_users[i].isPending
    };
} 
```

比我的 dataContext 将把这个数组放在他的手中，并将它传递给我的格式化程序，在那里我将用变量值做任何我想做的事情。

```
 function optionsFormatter(row, cell, value, columnDef, dataContext) {
    if (dataContext.isPending) {
        return '<span onclick="deleteUser(' + dataContext.id + ')" class="actionIcon delete">Cancel</span>';
    } else {
        return '<span onclick="editUser(' + dataContext.id + ')" class="actionIcon edit">Edit</span>';
    }
} 
```

如您所见， id 和 isPending 在网格中对用户不可见，但它们可用于任何 dataContext。

就是这样。得到它的那一刻非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:59:55.683

格式化程序在渲染时调用。因此，您的所有数据都已加载到网格中。

为什么不为 ID 使用独占列（您可以通过调用 grid.setColumns 将其排除在渲染后不显示）？或者更好的是，使用 dataView - 它已经有一个**强制性**的 ID 列 - 您可以使用它来编辑/删除。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T08:43:26.147

我在我的 slickgrid 分支中推送了一个提交，以向方法格式化程序添加一个新的参数元数据，它允许传递列元数据并在格式化程序方法中使用元数据。

[https://github.com/Francks11/X-SlickGrid/commit/b2e14e6cb169de6059757434e7db458a997320b3](https://github.com/Francks11/X-SlickGrid/commit/b2e14e6cb169de6059757434e7db458a997320b3)

```
 function DoubleFormatter(row, cell, value, columnDef, dataContext, metadata) {

    var formattedValue = parseFloat( value ).toFixed(3);

    return isNaN( formattedValue ) ? "" : formattedValue;
} 
```******

# powershell - 如何使用 7zip powershell 包含文件和文件夹

> ID：10759262
> 
> 赞同：7
> 
> 时间：2012-05-25T18:00:52.990
> 
> 标签：powershell, zip, 7zip

我试图让我的 powershell 脚本压缩一些文件和文件夹。目前我可以让我的脚本压缩所有文件（不包含文件夹），或者压缩所有包含文件夹但路径错误的文件。例如，如果我有一个名为 wordpress 的文件夹，其中包含文件和一些子文件夹。我需要我的 zip 文件是 wordpress.zip，所有文件和子文件夹都在该 zip 的根目录中，而不是 \wordpress\files.*

任何帮助，将不胜感激。到目前为止，这是我的代码

```
function create-7zip([String] $aDirectory, [String] $aZipfile){
    [string]$pathToZipExe = "C:\Program Files\7-zip\7z.exe";
    [Array]$arguments = "a", "-tzip", "$aZipfile", "$aDirectory";
    & $pathToZipExe $arguments;
}

create-7zip "$storageDir\wordpress\*.*"  "$storageDir\wordpress.zip" 
```

上面的示例只会压缩我的目标文件夹内的文件，我还需要它包含子文件夹。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T18:35:08.127

```
create-7zip "$storageDir\wordpress\*"  "$storageDir\wordpress.zip" 
```

将包括文件和子文件夹。

# ubuntu - 在 Ubuntu 11.04 中运行 javac 时出错

> ID：10759266
> 
> 赞同：1
> 
> 时间：2012-05-25T18:01:08.843
> 
> 标签：ubuntu, java, ubuntu-11.04

我正在尝试在 Ubuntu 11.04 中安装 JDK 1.7，但是当我运行以下命令时：

```
javac -version 
```

我在下面收到错误：

```
Error: could not find libjava.so
Error: Could not find Java SE Runtime Environment. 
```

为了解决我的问题，这里有一些关于我的系统配置的信息：

/etc/profile 结尾：

```
JDK_HOME=/usr/local/java/jdk1.7.0_04
PATH=$PATH:$HOME/bin:$JDK_HOME/bin
JAVA_HOME=/usr/local/java/jre1.7.0_04
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin
export JDK_HOME
export JAVA_HOME
export PATH 
```

/etc/ld.conf.so.d/java.conf 的输出：

```
/usr/local/java/jre1.7.0_04/lib/i386/
/usr/local/java/jre1.7.0_04/lib/i386/jli/ 
```

$PATH 的输出：

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/sahar/bin:/usr/local/java/jdk1.7.0_04/bin:/home/sahar/bin:/usr/local/java/jre1.7.0_04/bin 
```

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:40:44.707

问题是您的 JAVA_HOME 在 中设置了两次`/etc/profile`，最后一个是 JRE。您的 PATH 中也有许多重复的条目。只需删除 JRE 并保留 JDK。

另外：这个问题最好放在[Superuser.com上](http://superuser.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:40:51.710

您的 JAVA_HOME 和 PATH 在您的 etc 配置文件中被写入了两次，第二次是用 jre JAVA_HOME 覆盖它，因此 javac 将不起作用。在您的 etc/profile 末尾取出第二个 JAVA_HOME 和 PATH 分配并重新启动

# data-structures - 如何从地图中填充 Clojure 记录？

> ID：10759268
> 
> 赞同：11
> 
> 时间：2012-05-25T18:01:15.753
> 
> 标签：data-structures, clojure, record

是否有类似[struct-map](http://clojuredocs.org/clojure_core/clojure.core/struct-map)的记录？如果不是，我应该使用结构吗（文档不鼓励使用结构）？

也许我完全做错了事？我有一个相当复杂的功能，目前需要一张选项图。我试图澄清哪些选项值是可接受/使用的（通过用记录替换它）。现在我想将它连接到在地图中具有此信息的代码（并且其中包含记录中数据的超集）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T18:18:48.430

不建议仅将记录用于“文档”——普通的旧地图更灵活、更简单、更容易。对于文档，您可以只添加一个文档字符串或注释，或者创建一个类似`(defn make-whatever [thing1 thing2])`.

如果您仍然想要记录，您有几个选择，具体取决于您使用的是 clojure 版本 1.3 还是更高版本。如果是这样，`(defrecord Whatever ...)`还定义了一个`map->Whatever`函数，以及一个`->Whatever`接受位置参数的函数。如果没有，您可以编写`(into (Whatever. nil nil nil) some-map)`（为记录类型传递正确数量的 nil）。

# android - 使用来自更多 ArrayLists 的数据填充 Listview

> ID：10759271
> 
> 赞同：0
> 
> 时间：2012-05-25T18:01:32.303
> 
> 标签：android, listview, arraylist

好吧，就像标题说的那样，我想用多个数组中的数据填充 ListView。ListItem 结构如下所示：

*人名

*01234567

*纽约梦碎大道

* * *

人名、电话号码和地址的所有数据都在单独的数组列表中。因此，我有数组列表 peopleArr、phonesArr、adressArr，我想在 ListView 中为每个有电话号码和地址的人显示该数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:04:18.047

使用具有字符串人员、电话、地址的单个类...

[参见 NewsBean.java](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

```
public class Items {

private String name;
private int phoneNo;
private String address; 
```

}

- 为 name、phoneNo、address 创建 getter 和 Setter 方法

**现在在列表中添加数据**

```
List<Items> list = new ArrayList<Items>();

 Items objItems = new Items();
 objItems.setName("Name"); 
 objItems.setPhoneNo(12345);
 objItems.setaddress("adress");

 list.add(objItems); 
```

**现在从列表中获取数据**

```
Items objItems =(Items)list.get(index);
String name = objItems.getName(); 
int phoneNo=objItems.getPhoneNo();
String address=objItems.getaddress(); 
```

# c# - 为每个构建配置设置不同的 ApplicationIcon

> ID：10759273
> 
> 赞同：5
> 
> 时间：2012-05-25T18:01:35.737
> 
> 标签：c#, visual-studio-2010, icons, csproj

我正在尝试为我的 C# 项目的每个构建配置设置不同的图标（使用 VS 2010 pro）。一个配置用于不同的客户，因此该配置应使用不同的图标。

我不确定为什么这在 csproj 文件中不起作用：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    ...blah...
    <ApplicationIcon>Images\RegularIcon.ico</ApplicationIcon>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release-Customer|AnyCPU' ">
    ...blah...
    <ApplicationIcon>Images\CustomerIcon.ico</ApplicationIcon>
</PropertyGroup> 
```

它不起作用。不确定我是否走在正确的轨道上。

一件令人沮丧的事情......如果我在 Visual Studio 中使用“属性”->“应用程序”选项卡设置图标，它会在 csproj 文件中创建它：

```
<PropertyGroup>
    <ApplicationIcon>Images\foo.ico</ApplicationIcon>
</PropertyGroup> 
```

为什么这个匿名 PropertyGroup 中指定的图标得到遵守，但我的条件 PropertyGroup 中的图标被忽略？

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:29:14.150

它可能*确实*有效。这只是你不能轻易看到的东西。Windows 资源管理器有一个非常尴尬的习惯，即在图标缓存中存储程序的图标。因此，如果您运行带有一个图标的 .exe，那么它会将图标存储在缓存中。以便以后再次需要时快速可用。优化，从 .exe 文件中挖掘图标很慢。

重置缓存是可能的，但很尴尬，最好在 superuser.com 上询问一个好的程序。或者只是用 Visual Studio 检查它。文件 + 打开 + 文件，选择 .exe，打开图标节点并双击条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-17T09:24:56.940

你可能想试试这个：

对于 Windows 10：

> ie4uinit.exe -显示

对于 Windows 8 及更早版本：

> ie4uinit.exe -ClearIconCache

从下面拍摄。还有一些其他的提示

[https://www.winhelponline.com/blog/refresh-icon-cache-windows-7-quickly/](https://www.winhelponline.com/blog/refresh-icon-cache-windows-7-quickly/)

# c - 用逗号分隔的数据的 C 解析器

> ID：10759277
> 
> 赞同：1
> 
> 时间：2012-05-25T18:01:46.550
> 
> 标签：c, parsing

用 C 语言为以下格式的数据编写解析器的最有效方法是什么：

> atr#1,atr#2,...,atr#n
> 
> btr#1,btr#2,...,btr#n
> 
> ...

每条记录都在新行中，属性用逗号分隔。

应该使用什么功能？你有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:17:58.547

下面是一些示例代码，它将逐行读取由换行符分隔的文件，然后拆分参数并将它们打印出来（您可以轻松地将其调整为，例如，将其解析为`char *`s 数组的数组）：

```
#include <stdio.h>
#include <string.h>

int main()
{
    FILE *f = fopen("file.txt", "r");
    char ptr[1024];
    char *token;

    while (fgets(ptr, 1024, f) != NULL)
    {
        token = strtok(ptr, ",");    
        while(token)
        {
            printf("Token: %s\n", token);
            token = strtok(NULL, ",");
        }
    }
    fclose(f);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:27:53.700

这将起作用：

```
/* You need the following includes and defines */
#include <stdio.h>
#include <iostream.h>
#include <string.h>
#define NULL_CHAR 0x0

int parse(char* data) {
    const int LINE_SIZE=255; /* Should be long enough for your unparsed data */
    const int MAX_FIELDS=99; /* Maximum number of fields */
    char  output[MAX_FIELDS][LINE_SIZE];
    int   i;
    int   output_field_count;
    int   output_char_idx;

    for (i = 0; i < MAX_FIELDS; i++) {
        strcpy(output[i], "");
    }
    output_field_count = 0;
    output_char_idx    = 0;

    for (i = 0; i < LINE_SIZE; i++) {
        if ((data[i] != ',')  && 
            (output_field_count    < MAX_FIELDS) && 
            ((output_char_idx+1) < LINE_SIZE)) {

            output[output_field_count][output_char_idx]   = data[i];
            output[output_field_count][output_char_idx+1] = NULL_CHAR;
            output_char_idx++;
        }
        else if (data[i] == ',') {
            output_field_count++;
            output_char_idx = 0;
        }
    }
    output_field_count++;
    output_char_idx = 0;

    printf("OUTPUT FIELD COUNT IS: %d\n", output_field_count);
    for (i = 0; i < output_field_count; i++) {
        printf("FIELD %i IS: %s\n", i, output[i]);
    }
    return 0;
} 
```

这可以如下调用：

```
char data[500]; /* Should be long enough for your unparsed data */
strcpy(data, "atr#1,atr#2,...,atr#n");
parse(data);
strcpy(data, "btr#1,btr#2,...,btr#n");
parse(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:05:04.300

为工作选择合适的工具。它大约是 Perl、Python 或最好的 awk 中的一行代码。如果您有使用 C 的令人信服的理由，请在您的帖子中解释 - 否则我认为任何人都可以给您的最明智的答案是建议您为工作选择正确的工具，而不是询问如何用一种语言做一些繁重的事情那不好。

从命令行：

```
tr ',' '\n' < file.txt 
```

将逗号变成新行。

# javascript - 从 javascript 调用 WCF 服务

> ID：10759281
> 
> 赞同：2
> 
> 时间：2012-05-25T18:02:09.870
> 
> 标签：javascript, json, wcf

我想从带有网页的 javascript 代码调用托管在远程服务器上的 WCF 服务。我使用基于外部 java 的小部件和控件创建了用户界面，并希望检索将采用 json 格式的数据。

```
 var data = [
        // This information, presumably, would come from a database or web service
                {id: 1, value: 20000, site: 1 },
                { id: 2, value: 16000, site: 1 },
                { id: 3, value: 11000, site: 1 },
                { id: 4, value: 1800, site: 1 },
                { id: 5, value: 2600, site: 1 },
                { id: 6, value: 1900, site: 2 },
                { id: 7, value: 20000, site: 2 },
                { id: 8, value: 28000, site: 2 },
                { id: 9, value: 12000, site: 2 },
                { id: 10, value: 40000, site: 2 }
            ]; 
```

json数据将分配给这个变量数据，然后显示在数据网格中。如果我有网址，我该如何调用此服务？数据将是一个字段“值”，如下所示：

```
{"rules":
[
    {"value":"rule1"},
    {"value":"rule2"}
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:37:12.917

使用哪种 Java 小部件，如果您可以在这里使用 jQuery，您可以从 Java 小部件 [http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery调用 WCF 服务](http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery)

# android - ActionBarSherlock - 如何设置每个操作栏图标的填充？

> ID：10759282
> 
> 赞同：12
> 
> 时间：2012-05-25T18:02:16.843
> 
> 标签：android, icons, padding, android-actionbar, actionbarsherlock

如何**使用 ActionBarSherlock**使操作栏的图标彼此更近或更远？像`android:layout_marginLeft`or的东西`android:paddingRight`？

如果我只是在操作栏上添加图标，与下面的 Soundhound 屏幕截图相比，它们距离更远：

![猎犬](../Images/4554c457c7a63960ea43c249ef65448b.png)

我的`themes.xml`：

```
<style name="Theme.AstraTheme_Purple" parent="@style/Theme.Sherlock">
    <item name="actionBarStyle">@style/Widget.AstraTheme_Purple.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.AstraTheme_Purple.ActionBar</item>

    <item name="actionButtonStyle">@style/Widget.AstraTheme_Purple.ActionButton</item>
    <item name="android:actionButtonStyle">@style/Widget.AstraTheme_Purple.ActionButton</item>
</style>

<style name="Widget.AstraTheme_Purple.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/purple_bar</item>
    <item name="background">@drawable/purple_bar</item>
</style>

<style name="Widget.AstraTheme_Purple.ActionButton" parent="Widget.Sherlock.ActionButton">
    <item name="android:minWidth">50dip</item>
</style> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-29T23:48:17.603

```
<style name="AppTheme" parent="Theme.Sherlock">
    <item name="actionButtonStyle">@style/MyActionButtonStyle</item>
    <item name="android:actionButtonStyle">@style/MyActionButtonStyle</item>
</style>

<style name="MyActionButtonStyle" parent="Widget.Sherlock.ActionButton">
    <item name="android:minWidth">32dip</item>
    <item name="android:padding">0dip</item>
</style> 
```

按钮`android:minWidth`的默认值为。不要忘记设置为的主题。`ActionBar``56dip``@style/AppTheme``Activity`

# c# - 如何使用 PrivateObject 访问或修改类中方法的变量

> ID：10759284
> 
> 赞同：0
> 
> 时间：2012-05-25T18:02:17.983
> 
> 标签：c#, visual-studio-2010, mstest, vs-unit-testing-framework, privateobject.invoke

我是编写单元测试的新手。我使用 PrivateObject 来访问和修改类的私有成员以在测试时使用它。

但是，如果我想访问我正在测试的方法的私有变量，我该怎么做。我不会更改任何功能，但我需要修改一个变量才能完成单元测试。

这就是我想要做的。在 ABC 类中，我想修改 dwConn，因为我将无法访问 SqlConnectionManager 进行单元测试，但我可以在应用程序运行时访问它。非常感谢您阅读本文。任何帮助注册这都会很好。

```
public class ABCTest
{
public void MethodATest()
{
const string connectionString = @"Data Source=servername\MSSQLSERVER2008;Initial Catalog=DB1;User ID=user1;Password=pswd1";

SqlConnection sqlConn = new SqlConnection(connectionString);

PrivateObject param0 = new PrivateObject(target);
param0.SetField("dwConn", sqlConn);

actual = target.MethodA();
}
}

public Class ABC()
{
Method A()
{
SqlConnection dwConn = (SqlConnection)SqlConnectionManager.Instance.GetDefaultConnection();

using(dwconn)
{
//some stuff
}

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:10:04.970

通常，单元测试会测试您班级的公共“表面积”。

您应该以不需要修改私有变量进行测试的方式设计您的类。这样，您可以更改实现更改，并且仍然重新运行测试并查看功能没有损坏。

寻找有关依赖注入的资源。在您的示例中，您可以将构造函数中的连接字符串传递给 ABC 或传入 ABC 调用以获取连接字符串的接口。然后，您可以在项目中拥有一个实现接口和调用的具体类， `SqlConnectionManager.Instance.GetDefaultConnection();`而测试项目中的另一个实例只是将其设置为硬编码字符串。

更好的是，甚至不要在单元测试中连接到数据库——这也应该被删除。

```
public class ABCTest
{
    public class TestConnectionManager : IConnectionManager
    {
        public string GetConnection()
        {
            return  @"Data Source=servername\MSSQLSERVER2008;Initial Catalog=DB1;User ID=user1;Password=pswd1";
        }
    }
    public void MethodATest()
    {
        var abc = new ABC(new TestConnectionManager());

    }
}

public interface IConnectionManager
{
    string GetConnection();
}

public class ConnectionManager : IConnectionManager
{
    public string GetConnection()
    {
        return SqlConnectionManager.Instance.GetDefaultConnection();
    }
}

public class ABC
{

    IConnectionManager connectionManager;

    public ABC(IConnectionManager cm)
    {
        connectionManager = cm;
    }

    public void A()
    {
        //create connection from connectionManager.GetConnection()

        using(dwconn)
        {
        //some stuff
        }

    }
} 
```

# blackberry - 从 Phonegap 下载 BlackBerry 的标准安装

> ID：10759285
> 
> 赞同：0
> 
> 时间：2012-05-25T18:02:21.650
> 
> 标签：blackberry, cordova, phonegap-build

我正在使用 jQuery Mobile + PhoneGap 构建一个 BlackBerry 应用程序。在我压缩我的项目文件并将其上传到 phonegap 后，我得到一个平台列表。

BlackBerry 文件列为 OTA 安装。

![在此处输入图像描述](../Images/18b540c31f322518b77a538f9332d618.png)

如何下载标准安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:19:29.820

要使用 Phonegap 网站下载标准安装，您必须首先向 PhoneGap 提供来自 BlackBerry 的签名密钥。

可以在我之前的一个问题中找到有关将签名密钥获取到 PhoneGap 网站的详细说明。[哪里可以得到用于 PhoneGap 的 BlackBerry CSK File？](https://stackoverflow.com/questions/10707859/where-to-get-blackberry-csk-file-for-phonegap)

上传密钥并重建按钮后，可能仍会显示 OTA 安装，但请尝试单击下载，因为在我的情况下，尽管说 OTA 安装，但下载是标准安装。

![在此处输入图像描述](../Images/40bb158c39a3f80ad90fdec126b35b24.png)

# .net - 在.NET DateTime 结构中解释 UInt64 dateData？

> ID：10759287
> 
> 赞同：9
> 
> 时间：2012-05-25T18:02:25.127
> 
> 标签：.net, datetime, windbg, sos

在通过 SOS.dll 查看调试器中的 DateTime 结构时，我看到...

```
 0:096> !DumpVC 000007feed1ddff8  000000028036d890 
  Name:        System.DateTime
  MethodTable: 000007feed1ddff8
  EEClass:     000007feecbed6b0
  Size:        24(0x18) bytes
  File:          C:\Windows\Microsoft.Net\assembly\GAC_64\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.  dll
  Fields:
                MT    Field   Offset                 Type VT     Attr            Value Name
  000007feed1e1158  40000d6        0        System.UInt64  1 instance 5246421159766325152 dateData 
```

如何将“5246421159766325152”解释为日期时间？有没有办法可以从这个值创建一个 DateTime 来获得人类可读的版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T18:19:29.497

`!Psscor2.PrintDateTime OBJADD`R 或`!sosex.mdt System.DateTime DATAADDR`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T18:07:41.070

```
DateTime.FromBinary(5246421159766325152) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:07:35.673

如果 Int64 值介于[DateTime.MinValue](http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx) .Ticks 和[DateTime.MaxValue](http://msdn.microsoft.com/en-us/library/system.datetime.maxvalue.aspx) .Ticks 之间，则可以调用采用 Int64的[DateTime的重载构造函数。](http://msdn.microsoft.com/en-us/library/z2xf7zzk.aspx)

但是，您的特定值超出了此范围。正如@Boo 提到的，您可以使用静态[DateTime.FromBinary](http://msdn.microsoft.com/en-us/library/system.datetime.frombinary.aspx)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T18:25:31.557

在这里，您可以找到一种使用脚本查看 WinDBG 本身的简单方法，然后您可以像这样简单地运行它：

```
0:000> $$>a<e:\Scripts\DumpDate.txt 0000003692816498 
```

[http://blogs.msdn.com/b/carlosag/archive/2014/10/23/how-to-display-a-datetime-in-windbg-using-sos.aspx](http://blogs.msdn.com/b/carlosag/archive/2014/10/23/how-to-display-a-datetime-in-windbg-using-sos.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-08T07:20:21.637

撕掉UTC标志并直接从windbg命令行以人类可读的格式打印（从结果中减去1600年）

```
!filetime 0n5246421159766325152 & 0x3fffffffffffffff 
```

**5/25/3612 09:12:13.893（未知）**

# android - 我怎样才能启动安卓工具？

> ID：10759290
> 
> 赞同：0
> 
> 时间：2012-05-25T18:02:46.347
> 
> 标签：android, android-emulator

我需要做一些必须从 android 工具的命令提示符下完成的事情。

但是每个人都说它在sdk路径的平台工具文件夹中，但它是哪个文件？

这可能会有所帮助：

平台工具文件夹的内容：

```
aapt.exe
adb.exe
aidl.exe
dexdump.exe
dx.bat
fastboot.exe
llvm-rs-cc.exe
source.properties
AdbWinApi.dll
AdbWinUsbApi.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:05:50.993

你的意思是 android Adb command lin tool 如果是的话，请看这个[链接](http://www.londatiga.net/it/how-to-use-android-adb-command-line-tool/)

如果您想从命令行管理模拟器，请参阅这三个链接，它将对您有很大帮助

[安卓模拟器](http://developer.android.com/guide/developing/tools/emulator.html#starting)

[使用安卓模拟器](http://developer.android.com/guide/developing/devices/emulator.html)

[Linux 上的 Android 模拟器](http://android-er.blogspot.com/2009/10/create-android-virtual-device-avd-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:08:52.440

有一个`android`命令，但它不是可执行文件 -`android.bat`在工具目录中运行，您应该能够进行所需的更改。如果将工具目录添加到系统路径，则可以`android`在使用命令行时从任何目录运行。

# django - 有没有一种将 NSDictionary 发布到 Python/Django 服务器的快速方法？

> ID：10759291
> 
> 赞同：0
> 
> 时间：2012-05-25T18:02:49.980
> 
> 标签：django, ios5

我希望将 NSDictionary 发送到运行 Django 的服务器上，如果我不得不做很少或根本不需要编写编码器/解析器的工作，我会更愿意。

有没有简单的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T14:14:10.310

iOS 5 在框架中支持它。看看 NSJSONSerialization。这是帖子的示例代码。下面的代码中省略了请求对象的创建。

```
NSDictionary *postDict = [NSDictionary dictionaryWithObjectsAndKeys:[NSDictionary dictionaryWithObjectsAndKeys:API_KEY, @"apiKey", userName, @"loginUserName", hashPassword, @"hashPassword", nil], @"loginReq", nil];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"content-type"];
NSError *error = nil;
[request setHTTPBody:[NSJSONSerialization dataWithJSONObject:postDict options:0 error:&error]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:03:40.547

iOS 不支持以单行方式执行此操作，但您可以这样做：

```
@interface NSString (URLEncoding)

- (NSString *)urlEncodedUTF8String;

@end

@interface NSURLRequest (DictionaryPost)

+ (NSURLRequest *)postRequestWithURL:(NSURL *)url
                          parameters:(NSDictionary *)parameters;

@end

@implementation NSString (URLEncoding)

- (NSString *)urlEncodedUTF8String {
  return (id)CFURLCreateStringByAddingPercentEscapes(0, (CFStringRef)self, 0,
    (CFStringRef)@";/?:@&=$+{}<>,", kCFStringEncodingUTF8);
}

@end

@implementation NSURLRequest (DictionaryPost)

+ (NSURLRequest *)postRequestWithURL:(NSURL *)url
                          parameters:(NSDictionary *)parameters {

  NSMutableString *body = [NSMutableString string];

  NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
  [request setHTTPMethod:@"POST"];
  [request addValue:@"application/x-www-form-urlencoded"
           forHTTPHeaderField:@"Content-Type"];

  for (NSString *key in parameters) {
    NSString *val = [parameters objectForKey:key];
    if ([body length])
      [body appendString:@"&"];
    [body appendFormat:@"%@=%@", [[key description] urlEncodedUTF8String],
                                 [[val description] urlEncodedUTF8String]];
  }
  [request setHTTPBody:[body dataUsingEncoding:NSUTF8StringEncoding]];
  return request;
}

@end 
```

然后它很简单：

```
NSURL *url = [NSURL URLWithString:@"http://posttestserver.com/post.php"];
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:42], @"number",
    @"apple", @"brand", nil];
NSURLRequest *request = [NSURLRequest postRequestWithURL:url parameters:params];
[NSURLConnection sendAsynchronousRequest:request queue:nil completionHandler:nil]; 
```

请注意，在此示例中，我们不关心响应。如果您关心它，请提供一个块，以便您可以用它做一些事情。

# jquery - Facebook 评论 (html5) 不会显示它们是否在加载后插入 DOM

> ID：10759294
> 
> 赞同：1
> 
> 时间：2012-05-25T18:02:55.143
> 
> 标签：jquery, facebook, html, asynchronous, facebook-comments

我有一个帖子列表和一个“加载更多”按钮，可以在 Twitter 等无限滚动上加载更多帖子。

问题是每个帖子都有 Facebook 评论，但我不想加载每个帖子的所有评论。

所以，我在 jQuery 中做了这个：

```
function showFbComments(id) {
var commentBox = '<div class=\"fb-comments\" data-href=\"http://www.tusecreto.com.ar/' + id + '\" data-num-posts=\"20\" data-width=\"100%\"></div>';
if($('#fb_comentarios_' + id).hasClass("loaded")) {
    $('#fb_comentarios_' + id).toggle();
} else {
$('#fb_comentarios_' + id).addClass("loaded").append(commentBox).toggle();
}
} 
```

这样，当我点击“50 Comments”时，函数 showFbComments 将显示我的“fb_comentarios_id”DIV 并附加 Facebook HTML5 代码。

问题是页面加载后评论不会显示。如果我在页面完全加载之前单击链接，则显示效果很好。

我认为它必须与 Facebook 的 JS 有关。我的意思是所有这些...

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1&appId=152950781809";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

有没有办法异步加载评论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:17:24.047

我想我找到了答案：[https ://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

我刚刚添加

```
FB.XFBML.parse(document.getElementById('#fb_comentarios_' + id)); 
```

在追加之后，它现在正在工作。它是否正确？

# google-apps-script - 从 Google 电子表格单元格调用 Google App 脚本库

> ID：10759296
> 
> 赞同：4
> 
> 时间：2012-05-25T18:03:15.920
> 
> 标签：google-apps-script, google-sheets, cell, custom-function

在 Google 电子表格中试用新的库功能。我已经包含了一个标识符为“Test”的库，并且该库实现了函数“foo()”

在电子表格单元格中输入 =Test.foo() 会出现错误：“未知函数名称 TEST.FOO”

如果我在电子表格中创建一个函数来包装库函数：

```
function foo()
{
  return Test.foo();
} 
```

然后在我的电子表格单元格中使用 =foo() ，一切都很好。为所有库函数创建包装函数以便它们可以在电子表格单元格中使用使得使用库不太理想。有没有办法从电子表格单元格调用库函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:19:31.210

目前没有一种方法可以直接从单元格中将这些库函数作为自定义函数调用。正如您所做的那样，创建一个包装器是目前执行此操作的方法。如果您希望能够将库函数作为自定义函数直接调用，请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上将其作为问题提出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-22T15:59:57.793

这是一种解决方法，如果您粘贴到这个通用包装函数中，它允许您调用任何库函数。然后你可以从电子表格中调用它。

例如，如果我有一个名为 MyLib 的库，其中包含一个函数 add(x, y)（假设 x 在单元格 A1 中，y 在单元格 A2 中），我可以这样调用它： =LIB_FUNC("MyLib", "add" , A1, A2)。

这有点难看，但至少允许我只需要粘贴这一个函数，然后访问任何库函数。请注意，这取决于调用包装函数时范围内的“this”对象的未记录结构。这可能会随着时间的推移而中断。可能会看看我是否可以将其作为附加组件发布。

```
function LIB_FUNC(libraryName, functionName) {
  var result;
  var lib = this[libraryName];
  var extraArgs = [];

  if (lib) {
    var func = lib[functionName];

    if (func) {
      if (arguments.length > 2) {
        extraArgs = Array.apply(null, arguments).slice(2);
      }

      result = func.apply(this, extraArgs);
    } else {
      throw "No such function: " + functionName;
    }
  } else {
    throw "No such library: " + libraryName;
  }

  return result;
} 
```

# facebook - 获取喜欢页面的人的 FQL 查询

> ID：10759299
> 
> 赞同：2
> 
> 时间：2012-05-25T18:03:32.243
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我是 Facebook 开发的新手，我正在玩一些概念证明。我将如何编写查询以获取喜欢 U2 页面的所有朋友的列表？

我在想这样的事情。

> var result = fb.Get("fql", new { q = "SELECT name FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2=me()) AND 'U2' IN like" });

也签到

> var result = fb.Get("fql", new { q = "SELECT checkin_id, author_uid, page_id FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND page_id IN (SELECT page_id FROM page WHERE name = '我的地方'）” }）;

还有查询生成器工具吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T22:21:27.263

应该这样做（例如使用 PHP SDK (v3.x) ）

```
$page_id = ID OF PAGE

$result = $facebook->api(array(
    'method' => 'fql.multiquery',
    'queries' => array(
        'friends_liking_page' => 'SELECT uid, page_id FROM page_fan WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND page_id = ' . $page_id,
        'result' => 'SELECT uid, name, pic FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me() AND (uid2 IN (SELECT uid FROM #friends_liking_page)))'
    )
)); 
```

你需要`user_likes`和`friends_likes`许可

# c++ - 如何在 Visual Studio 11 中使用 Shader Model 5.0 编译的着色器？

> ID：10759300
> 
> 赞同：2
> 
> 时间：2012-05-25T18:03:38.467
> 
> 标签：c++, directx, offline, hlsl, build-time

我正在尝试为我的 C++ DirectX 11 项目编译项目预/离线/构建时中的 .hlsl 文件。Visual Studio 将 .hlsl 文件编译为 .cso 文件。我现在无法将 SM 5.0 的 .cso 文件读入我的程序以创建着色器。

这是我必须从预编译的 .cso 文件创建像素着色器的代码：

```
ID3D11VertexShader* PS;
ID3DBlob* PS_Buffer;

D3DReadFileToBlob(L"PixelShader.cso", &PS_Buffer);
d3d11Device->CreatePixelShader(PS_Buffer->GetBufferPointer(), PS_Buffer->GetBufferSize(), NULL, &PS);
d3d11DevCon->PSSetShader(PS, 0, 0); 
```

像素着色器只是应该返回蓝色像素。通过在 Visual Studio 11 中更改其编译设置，它已被编译为 Shader Model 5.0。但是，在运行程序时，尽管没有构建或运行时错误消息，但我尝试渲染的三角形并未显示。

在运行时编译时使用：

```
D3DCompileFromFile(L"PixelSHader.hlsl", 0, 0, "main", "ps_5_0", 0, 0, &PS_Buffer, 0); 
```

而不是 D3DReadFileToBlob(..)，仍然没有渲染三角形。

但是，在使用 Shader Model 4.0 时，无论是编译时编译还是运行时编译，都会显示一个蓝色三角形，表示它可以工作。

这是我的 PixelShader.hlsl 文件中的代码。对于 Shader Model 5.0 来说，它是否已经过时并且成为我问题的根源？

```
float4 main() : SV_TARGET
{
    return float4(0.0f, 0.0f, 1.0f, 1.0f);
} 
```

我使用的是 Windows SDK 库，而不是 2010 年 6 月的 DirectX SDK。我的显卡是 nVidia 8800 GTS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:59:07.977

GeForce 400 系列和更新版本的 nVidia 卡以及 Radeon 5000 系列和更新的 AMD 卡支持 Shader 模型 5。您的 GeForce 8800 仅支持着色器模型 4，这就是着色器无法运行的原因。要解决这个问题，您可以使用参考设备（通过使用 D3D_DRIVER_TYPE_REFERENCE），但这会很慢。此外，如果您有 Windows 8 预览版（添加了对 D3D_FEATURE_LEVEL_11_0 的 WARP 支持），则可以使用 WARP 设备，它的性能将优于参考设备，但仍无法在硬件设备上运行。

# utf-8 - 如何在 Pharo 中读取和写入 Unix 域套接字？

> ID：10759301
> 
> 赞同：4
> 
> 时间：2012-05-25T18:03:43.253
> 
> 标签：utf-8, smalltalk, pharo

我的应用程序需要读取和写入[Unix 域套接字](http://en.wikipedia.org/wiki/Unix_domain_socket)。我怎样才能从 Pharo 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T23:57:56.160

实际上，新的 SocketPlugin 原语允许访问所有套接字系列，而不仅仅是 AF_INET。我知道除了 AF_INET 之外它肯定可以做 AF_INET6，而且我几乎可以肯定它也可以做所有其他事情。我不知道，Pharo 可能缺少访问这些原语的新图像内代码。但是，例如 Squeak Etoys 在 OLPC XO 机器上使用它们来进行 IPv6 网状网络。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T19:52:57.970

我认为您不能使用 Socket 库来做到这一点。原语在对（您需要）`AF_INET`的调用中进行了硬编码。此外，无法设置传递给.`socket()``AF_LOCAL``sun_path``struct sockaddr_un``connect()`

看来您必须使用 FFI 或编写自己的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T16:08:13.963

显然有人最近实现了它：http: [//samadhiweb.com/blog/2013.07.27.unixdomainsockets.html](http://samadhiweb.com/blog/2013.07.27.unixdomainsockets.html)

# ruby - 正则表达式返回奇怪的数组

> ID：10759302
> 
> 赞同：0
> 
> 时间：2012-05-25T18:03:48.373
> 
> 标签：ruby, regex

我想使用正则表达式从这样的字符串中生成一组结果：

```
results|foofoofoo\nresults|barbarbarbar\nresults|googoogoo\ntimestamps||friday 
```

这是我的正则表达式。它适用于 Sublime Text 的正则表达式搜索，但不适用于 Ruby：

```
(results)\|.*?\\n(?=((results\|)|(timestamps\|\|))) 
```

这将是期望的结果：

```
1\. results|foofoofoo
2\. results|barbarbar
3\. results|googoogoo 
```

相反，我得到了这些奇怪的回报，我无法理解。为什么这不选择结果行？

```
Match 1
1\. results
2\. results|
3\. results|
4\.  

Match 2
1\. results
2\. results|
3\. results|
4\.   

Match 3
1\. results
2\. timestamps||
3\.  
4\. timestamps|| 
```

这是使用正则表达式的实际代码：

```
#create new lines for each regex'd line body with that body set as the raw attribute
host_scan.raw.scan(/(?:results)\|.*?\\n(?=((?:results\|)|(?:timestamps\|\|)))/).each do |body|
  @lines << Line.new({:raw => body})
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T23:16:12.193

正如[Kendall Frey 已经说过](https://stackoverflow.com/a/10759477/990363)的，您正在创建太多的捕获组。无需将第一个文字“结果|”分组，也无需将备用组的元素分组到各个非反向引用组中。你打算做的是这个正则表达式：

```
/results\|.*?(?=\\n(?:results\||timestamps\|\|))/ 
```

或者，如果您不介意重复该`\\n`部分，则可以取消非捕获子组：

```
/results\|.*?(?=\\nresults\||\\ntimestamps\|\|)/ 
```

– 两者都将返回您问题中指定的匹配值数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:17:13.487

我猜这与捕获组有关。如果您将所有内容更改`(...)`为`(?:...)`它将消除捕获组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:14:59.450

与其跳转到正则表达式（这是一种获取数据的复杂得多的方法），不如使用`split("\n")`.

```
text = "results|foofoofoo\nresults|barbarbarbar\nresults|googoogoo\ntimestamps||friday"
ary = text.split("\n") 
```

`ary`是：

```
[
  "results|foofoofoo",
  "results|barbarbarbar",
  "results|googoogoo",
  "timestamps||friday"
] 
```

切片，你可以得到：

```
ary[0..2]
=> ["results|foofoofoo", "results|barbarbarbar", "results|googoogoo"] 
```

* * *

编辑：

基于字符串中有更多回车符和复杂字符的评论：

```
require 'awesome_print'

text = "results|foofoofoo\nmorefoo\nandevenmorefoo\nresults|barbarbarbar\nandmorebar\nandyetagainmorebar\nresults|googoogoo\ntimestamps||friday"
ap text.sub(/\|\|friday$/, '').split('results')[1..-1].map{ |l| 'results' << l } 
```

哪个输出：

```
[
  [0] "results|foofoofoo\nmorefoo\nandevenmorefoo\n",
  [1] "results|barbarbarbar\nandmorebar\nandyetagainmorebar\n",
  [2] "results|googoogoo\ntimestamps"
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:46:38.217

答案竟然在括号里。用括号括起来会导致它返回整个匹配项，而不仅仅是尾部分隔符。

```
host_scan.raw.scan(/((?:results\|.*?\\n)(?=(?:results\|)|(?:timestamps\|\|)))/).each do |body|
      @lines << Line.new({:raw => body})
end 
```

# ruby-on-rails - Rails 3中的慢belongs_to关联

> ID：10759306
> 
> 赞同：2
> 
> 时间：2012-05-25T18:04:08.280
> 
> 标签：ruby-on-rails, performance, ruby-on-rails-3.1, associations

我有一个`Foo`带有多个 belongs_to 关联的模型；我将在这里将它们称为`Bar`and `Baz`。所以模型看起来像这样：

```
class Foo
  belongs_to :bar
  belongs_to :baz

  def do_stuff_with_bar_and_baz
    bar.do_stuff(baz)
  end
end 
```

我们注意到它`do_stuff_with_bar_and_baz`异常缓慢（约 4 秒），尽管底层 MySQL 语句非常快（约 0.5 毫秒）。我对`bar`and`baz`调用进行了基准测试，发现它们分别花费了大约 2.3 秒和大约 221 毫秒……只是为了通过 Rails 关联代码。

然后我输入了以下方法：

```
class Foo
  belongs_to :bar
  belongs_to :baz

  def bar
    Bar.find(self.bar_id)
  end

  def baz
    Baz.find(self.baz_id)
  end

  def do_stuff_with_bar_and_baz
    bar.do_stuff(baz)
  end
end 
```

这绕过了 ActiveRecord 关联代码并直接加载关联的记录。使用此代码，加载 do_stuff_with_bar_and_baz 中的 Bar 和 Baz 的时间分别下降到 754ms 和 5ms。

这令人沮丧。标准的 Rails 关联似乎非常低效，但我真的不想替换*所有*关联（这违背了大量 ActiveRecord 的目的）。

所以，我正在寻找替代品：

*   有什么我可能做错的事情会减慢速度吗？（实际代码显然比这个更复杂。但是，belongs_to 是准确的；实际代码没有其他选项）。
*   其他人遇到过这种情况吗？
*   他们是如何处理的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-31T15:48:18.047

似乎您有不同的查询，问题不在 Rails 中，而在 DB 中。也许您有其他条件并且您没有为它们提供正确的索引。

# jquery-plugins - 使用 MapHilight Jquery 插件以不同的颜色突出显示

> ID：10759310
> 
> 赞同：3
> 
> 时间：2012-05-25T18:04:36.923
> 
> 标签：jquery-plugins

我试图弄清楚如何使用 MapHilight 但运气不佳。唯一的“文档”似乎只是一些工作示例。这可能是因为托管插件的站点似乎已关闭。我昨天也刚刚学习了 JQuery，所以我不知道这是否阻碍了我的进步。我想做的是逐个区域地指定我的图像地图突出显示的外观。David Lynch 的[简单演示](http://davidlynch.org/projects/maphilight/docs/demo_simple.html)展示了这一点，但我不确定它是如何工作的。我不明白为什么他使用图像具有包含 div 的背景以及画布的用途。这是我到目前为止所拥有的：

```
...
    <script type="text/javascript">
        $(function () {
            $('#ImageMap1').maphilight();
        });
    </script>
</head>
...

<div style="float: left">
    <img id="ImageMap1" src="solar_system.jpg" usemap="#ImageMapmapAreas" />
    <map id="ImageMapmapAreas" name="ImageMapmapAreas">
        <area alt="" title="" href="#Jupiter" coords="222,186,28" shape="circle"/>
        <area alt="" title="" href="#Earth" coords="135,194,13" shape="circle"
            data-maphilight="{'strokeColor':'0000ff','strokeWidth':5,'fillColor':'ff0000','fillOpacity':0.6}"/>
    </map>
</div> 
```

我猜，这给了我一条红色实线的默认突出显示。未使用 data-maphilight 元数据。对如何使这项工作进行解释会很棒，但是将我引导到解释如何整体使用 maphilight 的资源会更好，因为我最终想使用[此演示](http://davidlynch.org/projects/maphilight/docs/demo_features.html)中的几乎所有内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T20:10:03.920

我看到您决定切换到 Silverlight，但由于我现在正在摆弄 maphighlight，所以我决定看看这个。问题是您发布的示例在切换“与”后工作正常，反之亦然。

```
<div style="float: left">
    <img id="ImageMap1" src="http://geographyandhistory.wikispaces.com/file/view/solar_system.jpg/43347125/283x202/solar_system.jpg" usemap="#ImageMapmapAreas" />
    <map id="ImageMapmapAreas" name="ImageMapmapAreas">
        <area alt="" title="" href="#Earth" coords="228,151,53" shape="circle" data-maphilight='{"strokeColor":"0000ff","strokeWidth":5,"fillColor":"00ff00","fillOpacity":0.6}'/>
        <area alt="" title="" href="#Sun" coords="68,54,44" shape="circle" data-maphilight="{'strokeColor':'0000ff','strokeWidth':5,'fillColor':'00ff00','fillOpacity':0.6}"/>
    </map>
</div>​ 
```

这是一个小提琴 - [http://jsfiddle.net/k67gq/6/](http://jsfiddle.net/k67gq/6/) 查看“地球”和“太阳”区域如何具有相同的“数据地图”属性，但引号除外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T11:08:41.553

而不是“或”，在data-maphilight中使用“对我有用。例如：data-maphilight="{"strokeColor":"0000ff",...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:01:22.373

我想没有什么可用的。奇怪的是，当我在搜索如何进行自定义高亮显示时看到这么多对这个插件的引用。我最终不得不使用 Silverlight。

# wpf - 根据代码隐藏类型动态选择内置转换器

> ID：10759311
> 
> 赞同：1
> 
> 时间：2012-05-25T18:04:37.300
> 
> 标签：wpf, converter, code-behind

我有一个作为字符串输入的值，我需要转换为一种类型。现在，XAML 使用内置的转换器来执行此操作。

有没有办法确定仅在目标属性类型上使用哪种类型的转换器？

我尝试使用类型转换器，但它当然无法从字符串转换为边距，因为知道它需要使用标记扩展并不复杂。

到目前为止的代码：

```
ResourceKey key = null;
if ((key = (value as ResourceKey)) != null)
{
   var descriptor = DependencyPropertyDescriptor.FromName(_PD.Name, _TargetEditor.TargetObject.GetType(), _TargetEditor.TargetObject.GetType());
                    ((FrameworkElement)_TargetEditor.TargetObject).SetResourceReference(descriptor.DependencyProperty, key);
   return;
}

if ((value is String) && (_PD.PropertyType != typeof(String)))
{
   this._PD.SetValue(_TargetEditor.TargetObject, Convert.ChangeType(value, _PD.PropertyType));
}
else
{
   this._PD.SetValue(_TargetEditor.TargetObject, value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:39:14.767

从类型转换器属性中获取类型转换器。

```
AttributeCollection attributes = TypeDescriptor.GetAttributes(_PD.PropertyType);
TypeConverterAttribute converterAttribute = (TypeConverterAttribute)attributes[typeof(TypeConverterAttribute)];
if (converterAttribute != null)
{
   Type converterType = Type.GetType(converterAttribute.ConverterTypeName);
   {
      _TypeConverter = (TypeConverter)Activator.CreateInstance(converterType);
   }
} 
```

然后使用类型转换器（如果存在）。

# c# - ASP.NET 中的主详细信息

> ID：10759313
> 
> 赞同：1
> 
> 时间：2012-05-25T18:04:41.807
> 
> 标签：c#, asp.net, master-detail

我有两张桌子。

```
tbl_Request(PKRequestID, RequestCode) and tbl_Personnel(PKPersonID, PerosnelName FKRequestID) 
```

FKrfequestID 是 tbl_request 的外键。我在 Requests.aspx 页面中有一个显示 tbl_request 记录的网格视图。此页面中也有一个“新项目”按钮。当用户单击此按钮 RequestInsert.aspx 页面打开。在此页面中，用户输入一些数据，如 RequestCode 并点击“下一步”按钮并转到 Personel.aspx 页面，该页面包含一个显示与请求相关的人员的网格视图。在此页面中，用户应定义与请求相关的人员。当整个过程完成时，用户点击“保存”按钮。当用户单击“保存”按钮时，两个表都会更新。如何实现 Personel.aspx 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:58:44.913

这是一种方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataTable dttbl = new DataTable();
        dttbl.Columns.Add("PKPersonID", System.Type.GetType("System.String"));
        dttbl.Columns.Add("PerosnelName", System.Type.GetType("System.String"));
        dttbl.Columns.Add("FKRequestID", System.Type.GetType("System.String"));
        Session["MyDataTable"] = dttbl;
    }
}
protected void btnok_Click(object sender, EventArgs e)
{
    DataTable t = (DataTable)Session["MyDataTable"];
    DataRow row1 = t.NewRow();

    row1["PKPersonID"] = txtid.Text ;
    row1["PerosnelName"] = txtname.Text;
    row1["FKRequestID"] = Session["FKRequestID"];
    t.Rows.Add(row1);

    Session["MyDataTable"] = t;
    GridView1.DataSource = t;
    GridView1.DataBind();
}

protected void btnsave_Click(object sender, EventArgs e)
    {
        DataTable t2 = (DataTable)Session["MyDataTable"];
        SqlConnection con = new SqlConnection("connection_string"
        using (SqlCommand command = con.CreateCommand())
        {
            //Here you are inserting values to tbl_Request
            if (con.State == 0)
                con.Open();
            command.CommandText = @"INSERT INTO tbl_Request (PKRequestID,RequestCode) VALUES (@PKRequestID,@RequestCode)";
            command.Parameters.AddWithValue("@PKRequestID", Session["PKRequestID"]);
            command.Parameters.AddWithValue("@RequestCode", Session["RequestCode"]);
            command.ExecuteNonQuery();
        }

        foreach (DataRow row in t2.Rows)
        {
            //Here you are inserting values to tbl_Personnel
            using (SqlCommand command2 = con.CreateCommand())
            {
                if (con.State == 0)
                    con.Open();
                command2.CommandText = @"INSERT INTO tbl_Personnel (PerosnelName, FKRequestID) VALUES ( @PerosnelName, @FKRequestID)";
                command2.Parameters.AddWithValue("@PerosnelName", txtname.Text);
                command2.Parameters.AddWithValue("@FKRequestID", Session["PKRequestID"]);
                command2.ExecuteNonQuery();
            }
        }
    } 
```

# java - 为什么在使用 Arrays.fill 与手动制作列表时会得到不同的结果？

> ID：10759314
> 
> 赞同：0
> 
> 时间：2012-05-25T18:04:43.347
> 
> 标签：java, arrays, static

我对Java的所有行为都不是很熟悉，如果我犯了一个明显的错误，我很抱歉。基本上我正在制作一个程序，它给出一个项目列表和范围，它计算可用于包括所有项目的百分比。例如，如果你有一篮子水果，想放苹果、梨、桃子，其中没有低于 20% 且没有高于 60% 的项目，程序会告诉你。

为了做到这一点，我有一个具有下限（最小百分比）和上限（最大百分比）的列表。我的问题是当我手动创建列表时它似乎工作（使用上面的示例，3 个项目，20-60 范围我得到 41 个项目），但是当我使用时`Arrays.fill`我得到 882 个结果（这是错误的，因为它包括 0 而不是尊重下限）。

我不确定问题是什么......我调查了一下`Arrays.fill`，它似乎做了我想要的，我还在两种情况下（手动与 Arrays.fill）列出了列表中的项目，它们看起来都一样。

这是差异（工作版本）：

```
static final String[] names = new String[] {"apples", "pears", "peach" }; //test
static final int[] low_bound = new int[] {20,20, 20}; //this allows us to invididually set the range of each item
static final int[] high_bound = new int[] {60,60, 20}; 
```

不工作版本：

```
static final String[] names = new String[] {"apples", "pears", "peach" }; 
static int[] low_bound = new int[names.length];
static int[] high_bound = new int[names.length];
//then in the main method
Arrays.fill(low_bound, 20); //fills the min list with default value
Arrays.fill(high_bound, 60); //fills the max list with default value 
```

为什么结果不一样？这些是工作版本和损坏版本之间的唯一变化。我想使用大列表并且不想手动输入数据（但我喜欢根据需要制作单个范围的灵活性），我使用 Arrays.fill 错误还是其他一些新手错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:16:14.343

您正在比较 Apples 和 Oranges，对于您的静态测试，`high_bound`值是`{60, 60, 20}`但是当您使用 时`Arrays.fill()`，您将其设置为 {60, 60, 60}。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:15:30.187

这是没有意义的，因为 Array.fill 代码是：

```
 public static void fill(long[] a, long val) {
        for (int i = 0, len = a.length; i < len; i++)
            a[i] = val;
    } 
```

结果数组看起来与静态初始化完全相同。

此外，我在初始化时运行了您的代码并得到了相同的结果：“结果的总大小为 882”

# c# - 如何使用 asp.net mvc3 和 nhibernate 提高 Web 应用程序的性能

> ID：10759317
> 
> 赞同：3
> 
> 时间：2012-05-25T18:04:58.930
> 
> 标签：c#, asp.net-mvc, nhibernate

我正在使用带有 mssql db 的 mvc3 nhibernate orm 层开发我的第一个应用程序。

这是我使用 nhibernate 创建的第一个应用程序，除了初始响应时间之外，一切都很好。经过一些调查，我实现了每个 Web 请求的会话，这绝对是一次升级，我的实体在第一次调用后加载速度更快，但我的问题仍然存在。

初始响应时间真的很慢，当我输入 domainname.com 并点击输入 lwaiting 时间大约是。10-15 秒。这不是内容的实际加载时间，在 10-15 秒之后。我的网站开始加载，还有几秒钟。

那个时候会话工厂必须初始化所有需要的“东西”，但我认为它必须是别的东西。这是无法接受的。

我的应用程序在站点内存分配 200 MB 的 winhost 上运行，所以我认为这不是问题。

欢迎任何提示。如果您需要更多详细信息，请询问。

谢谢

**更新：** 在使用 nhibernate profiler 检查应用程序会话使用情况后，我发现了一些有趣的东西。因为我真的是使用分析器的初学者，所以我认为我发现了昂贵的会话。在一般统计中，67 个实体在 36.571 秒内加载。这个秒值真的很奇怪，因为我要加载 10-max 15 秒。

**第二次更新：** global.asax

```
public class MvcApplication : System.Web.HttpApplication{     

public static ISessionFactory SessionFactory =
        MyDomain.Infrastructure.SessionProvider.CreateSessionFactory();

//My session factory is open in Application_Start() like this 
SessionFactory.OpenSession();

} 
```

我正在使用流利的方法来映射我的对象。所以我在域项目中的会话提供者看起来像这样

```
//This should be used from web app, global.asax.cs calls
        public static ISessionFactory CreateSessionFactory()
        {
            string conStringName = "ConnectionString";
            var cfg = Fluently.Configure()
                .Database(MsSqlConfiguration.MsSql2008
                .ConnectionString(c => c.FromConnectionStringWithKey(conStringName)))
                .Mappings(m => m.FluentMappings.Add<Entity1>())
                .Mappings(m => m.FluentMappings.Add<Entity2>())
                .Mappings(m => m.FluentMappings.Add<Entity3>())
                .ExposeConfiguration(p => p.SetProperty("current_session_context_class", "web"))
                .BuildConfiguration();

            return cfg.BuildSessionFactory();            
        } 
```

**更新 3** 仍然没有解决这个问题

**更新 4 和最终** 我的问题肯定在 sessionFactory 中。我认为我的配置对象应该被序列化。如果有人可以使用我的代码显示如何使用此处显示的流利的conf来展示如何做到这一点。我很乐意接受他/她的回答。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T22:13:30.140

缺少很多细节，但既然你说这是你的第一个 NHibernate 应用程序，我将推荐可能需要检查的内容：

*   在应用程序启动时创建一次 NH SessionFactory （正如@Rippo 所做的那样）。创建SessionFactory 的[成本很高](http://www.nhforge.org/doc/nh/en/index.html#transactions-basics)。在 Application_Start() 中执行
*   为每个 Web 请求打开一个新的 NH 会话。一旦请求结束，**就把它扔掉**。NH ISession 便宜/快速创建。通常，长时间重用或缓存 ISession 是不好的做法。对于一个简单的实现，如果你愿意，你可以在你的 Controller 中完成它，因为它只存在于每个请求中。
*   查询时（NH LINQ？QueryOver？你用什么），一定要限制返回的记录。不要 .ToList() 整个表只显示 20。使用 Skip/Take。
*   注意[SELECT N+1 问题](http://ayende.com/blog/1328/combating-the-select-n-1-problem-in-nhibernate)。这会扼杀你在任何 OR/M 上的表现。

这些将是我的建议，代码看不见。

**更新：**所以主要问题似乎是 10-15 秒的启动，这可能是 Application_Start 期间的 SessionFactory 初始化时间。

我还没有尝试过，但一般建议快速启动时间是将 NH 配置对象序列化到磁盘（其中包含映射），并在每次启动时加载它（原始缓存）。如果映射发生变化，您需要检测到这一点，或者进行手动加载（删除序列化配置文件）。

在您的代码中，您使用 Fluent NHibernate 构建 FluentNHibernate.Cfg.FluentConfiguration 实例，并在其上调用 cfg.BuildSessionFactory() 以返回新的 ISessionFactory。您需要序列化的配置是 NHibernate.Cfg.Configuration。所以你可能会把你的代码修改成这样：

```
 public static ISessionFactory CreateSessionFactory()
    {
        string conStringName = "ConnectionString";

        // http://weblogs.asp.net/ricardoperes/archive/2010/03/31/speeding-up-nhibernate-startup-time.aspx
        System.Runtime.Serialization.IFormatter serializer = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();

        NHibernate.Cfg.Configuration cfg = null;

        if (File.Exists("Configuration.serialized"))
        {
            using (Stream stream = File.OpenRead("Configuration.serialized"))
            {
                cfg = serializer.Deserialize(stream) as Configuration;
            }
        }
        else
        {
            // file not exists, configure normally, and serialize NH configuration to disk
            cfg = Fluently.Configure()
                .Database(MsSqlConfiguration.MsSql2008
                .ConnectionString(c => c.FromConnectionStringWithKey(conStringName)))
                .Mappings(m => m.FluentMappings.Add<Entity1>())
                .Mappings(m => m.FluentMappings.Add<Entity2>())
                .Mappings(m => m.FluentMappings.Add<Entity3>())
                .ExposeConfiguration(p => p.SetProperty("current_session_context_class", "web"))
                .BuildConfiguration();

            using (Stream stream = File.OpenWrite("Configuration.serialized"))
            {
                serializer.Serialize(stream, cfg);
            }
        }

        return cfg.BuildSessionFactory();
    } 
```

这会将配置缓存到磁盘，因此您的应用程序启动速度会很快。当然，当您更改 NH 映射时，您必须检测到并重新加载 Fluent 配置，否则手动删除缓存文件。

其他一些调整评论：

*   你有 .Mappings(m => m.FluentMappings.Add()).Mappings(m => m.FluentMappings.Add()) 等等。这里只是猜测，但一个接一个添加可能会创建多个 HBM 文件在引擎盖下。您可以尝试从外部程序集添加映射，并使用 .Mappings(M => M.FluentMappings.AddFromAssemblyOf())
*   实际上你不应该在 Application_Start() 中执行 SessionFactory.OpenSession()。只需在那里创建 SessionFactory，然后在您的代码中访问 SessionFactory.GetCurrentSession()。你的 global.asax 应该有：

    ```
    protected void Application_BeginRequest(object sender, EventArgs e)
    {
        // we open one NH session for every web request, 
        var nhsession = SessionFactory.OpenSession();
        // and bind it to the SessionFactory current session
        CurrentSessionContext.Bind(nhsession);
    }

    protected void Application_EndRequest(object sender, EventArgs e)
    {
        // close/unbind at EndRequest
        if (SessionFactory != null)
        {
            var nhsession = CurrentSessionContext.Unbind(SessionFactory);
            nhsession.Dispose();
        }
    } 
    ```

这将是按请求进行会话的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T05:52:27.037

几个额外的点： -

1.  您是否在 bin 文件夹中写入任何内容？这会导致应用程序回收，然后导致会话工厂被重建。
2.  当您运行 NProf 在 Management Studio 中向您显示的 SQL 时，是否需要时间。你完全索引了吗？
3.  三重检查您没有通过引入登录多次构建会话工厂`Application_start`

这些问题要么与 SQL server 有关，要么与代码有关，NHibernate 不是罪魁祸首！

另外我认为您需要在代码中添加跟踪以查看真正的瓶颈在哪里或使用[ANTS 分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)（您可以获得 14 天的免费试用期）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T05:16:04.870

@raulg 提出了一些重要的观点。还要考虑：

1.  将您的 NH 配置序列化到磁盘并在应用程序启动时加载它。谷歌搜索一些例子。
2.  检查您的 NHibernate 日志记录！这会把人赶出去。如果您使用 log4net 或类似的，请确保您没有记录“所有”您的 NHibernate 信息，因为这会杀死性能并且应该只用于调试问题。
3.  小心在映射中使用 not.lazyload - 您最终可能会在没有意识到的情况下在查询中加载整个数据库！根据需要急切加载查询。

坚持下去——它是一个很棒的工具。

序列化 NH：

```
 if (_loadConfiguration && _configurationFile.Exists && _IsConfigurationFileValid())
            {
                configuration = _LoadConfigurationFromFile();
            }
            else
            {
                configuration = Fluently.Configure()
                    .Database(MsSqlConfiguration.MsSql2008
                        .ConnectionString(x => x.FromConnectionStringWithKey("Development"))
                        #if DEBUG
                        .ShowSql()
                        #endif
                    )
                    .ProxyFactoryFactory("NHibernate.Bytecode.DefaultProxyFactoryFactory, NHibernate")
                    .Mappings(mappings => mappings.FluentMappings.AddFromAssemblyOf<UserMap>()
                                              .Conventions.Setup(MappingConventions.GetConventions()))
                    .Mappings(mappings => mappings.HbmMappings.AddFromAssemblyOf<UserMap>())
                    .BuildConfiguration();

                _SaveConfigurationToFile(configuration);
            }

  private bool _IsConfigurationFileValid()
        {
            var assInfo = new FileInfo(Assembly.GetCallingAssembly().Location);
            return _configurationFile.LastWriteTime >= assInfo.LastWriteTime;
        }

        private void _SaveConfigurationToFile(Configuration configuration)
        {
            //#if DEBUG
            //return;
            //#endif
            _logger.Debug("Starting to save NHibernate configuration to " + _configurationFile.FullName);
            using(var file = _configurationFile.OpenWrite())
            {
                new BinaryFormatter().Serialize(file, configuration);
                file.Close();
            }
            _logger.Debug("Finished saving NHibernate configuration to " + _configurationFile.FullName);
        }

        private Configuration _LoadConfigurationFromFile()
        {
            //#if DEBUG
            //    return null;
            //#endif
            _logger.Debug("Starting to load NHibernate configuration from " + _configurationFile.FullName);
            using(var file = _configurationFile.OpenRead())
            {
                var binaryFormatter = new BinaryFormatter();
                var config = binaryFormatter.Deserialize(file) as Configuration;
                file.Close();
                _logger.Debug("Finished loading NHibernate configuration from " + _configurationFile.FullName);
                return config;
            }
        } 
```

# google-app-engine - 关于 Conversion API 的 Google App Engine 文档不完整

> ID：10759324
> 
> 赞同：1
> 
> 时间：2012-05-25T18:05:21.867
> 
> 标签：google-app-engine

我正在尝试将 HTML 字符串转换为 .PNG 文件。感谢[Nick Johnson](https://stackoverflow.com/users/12030/nick-johnson)向我指出了[GAE 转换 API](https://developers.google.com/appengine/docs/java/conversion/overview) ，请参阅上 一篇文章[Here](https://stackoverflow.com/questions/10720409/gwt-generate-image-from-html-string-png-jpeg)。

我使用了有效的[GAE 转换 API](https://developers.google.com/appengine/docs/java/conversion/overview) ，但我的 HTML 字符串中的图像不显示。

在 [GAE Con​​version API](https://developers.google.com/appengine/docs/java/conversion/overview)文档中，有一个参考`Adding Assets`和提及`static/icon.gif`，我认为可以解决我的问题，但该文档不完整。

有人可以帮忙吗？

我的 HTML 转换为 .PNG 有效，但所有图像，例如

`<img src="http://mydomain.com/image.gif>`尚未打印`http://mydomain.com/image.gif`可用。

谢谢

铅

**更新 1：** 根据文档，我应该为每个图像创建单独的资产，并且名称必须与 src attr 匹配。

```
 List<Asset>assets = new ArrayList<Asset>();    
        try {
            Asset asset = new Asset("text/html", notification.getMessage().getBytes("UTF-8"), "testfile.html");
            assets.add(asset);
        } catch (UnsupportedEncodingException e) {      
            e.printStackTrace();
        } 
```

**winningNumbers 只是一个数字，期望 5 0r 6 个数字**

```
 for (String n : winningNumbers) {
                String url = "http://www.someURL.com/img/balls/" + n +".gif";
                Asset e = new Asset("image/gif", loadGIFByte(url), url);            
                assets.add(e); 

}

 Document document = new Document(assets);  
//Here I want to convert everything, the images and html to a .PNG MIMETYPE.    
            Conversion conversion = new Conversion(document, "image/png");
            ConversionService service =          ConversionServiceFactory.getConversionService();
            ConversionResult conversionResult = service.convert(conversion);

private byte[] loadGIFByte(String urlGIF) {
    System.out.println("Loading GIF for "+ urlGIF);
    OutputStream out = new ByteArrayOutputStream();
    byte[] buf = new byte[1536];
    int count = 0;
    try {
        URL u = new URL(urlGIF);
        InputStream reader = u.openStream();
        while ((count = reader.read(buf)) >= 0) {
            out.write(buf, 0, count);           
            }
    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }   

return buf;
}
    } 
```

**更新 2：**
一个典型的 notification.getMessage() 应该返回；

```
<html> 
<head> 
<style type="text/css"> 
/** Add css rules here for your application. *//** Example rules used by the template application (remove for your app) */h1 {  font-size: 2em;  font-weight: bold;  color: #777777;  margin: 40px 0px 70px;  text-align: center;}.sendButton {  display: block;  font-size: 16pt;}/** Most GWT widgets already have a style name defined */.gwt-DialogBox {  width: 400px;}.dialogVPanel {  margin: 5px;}.serverResponseLabelError {  color: red;}/** Set ids using widget.getElement().setId("idOfElement") */#closeButton {  margin: 15px 6px 6px;}.usefulLinksUL{list-style-type:none;margin:0;padding:0;display:block;font-weight:bold;#background-color:#FFD700;width:180px;}.usefulLinksAnchor{a:link,a:visited;text-decoration:none;a:hover,a:active;}.note {font-size: 80%;background-color: #FEF49E;/**background-color: #d8da3d;*/border: 1px solid #D0C98D;-webkit-box-shadow: -8px 5px 5px rgba(0, 0, 0, 0.3);}.note-title {margin: 5px 5px 0 5px;padding: 4px;-moz-border-radius: 5px;-webkit-border-radius: 5px;background-color: #D0C98D;color: white;font-weight: bolder;}.note-content {margin: 5px;background: transparent;border: none;overflow: hidden;}.container { width:50px; overflow:hidden }.cube { width:150px; height:150px; float:left;}#rounded-corner{  font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;    font-size: 12px;    margin: 5px;    /*width: 180px;*/   text-align: left;   border-collapse: collapse;}#rounded-corner thead th.rounded-company{    background: #b9c9fe url('img/latestResult/left.png') left -1px no-repeat;}#rounded-corner thead th.rounded-q4{  background: #b9c9fe url('img/latestResult/right.png') right -1px no-repeat;}#rounded-corner th{ padding: 8px;   font-weight: normal;    font-size: 13px;    color: #039;    background: #b9c9fe;}#rounded-corner td{    padding: 8px;   background: #e8edff;    border-top: 1px solid #fff; color: #669;}#rounded-corner tfoot td.rounded-foot-left{    background: #e8edff url('img/latestResult/botleft.png') left bottom no-repeat;}#rounded-corner tfoot td.rounded-foot-right{ background: #e8edff url('img/latestResult/botright.png') right bottom no-repeat;}#rounded-corner tbody tr:hover td{ background: #d0dafd;}.latestLotto{  background-color: #C3D9FF;  border: 1px solid #87B3FF;  cursor: default; }.bbottomyello {border-bottom: 1px solid #CFA55B;}.onGreenBackground {font-family: Arial, Helvetica, sans-serif;font-size: 11px;color: white;font-style: normal;}.btopbottomYellow {border-top: 1px solid #FFCB05;border-bottom: 1px solid #FFCB05;}.bbottomYellow {border-bottom: 1px solid #FFCB05;}h3 {font-family: Arial, Helvetica, sans-serif;font-size: 11px;color: #EB0900;} 
</style> 
</head> 
<body> 

<table width="100%" height="123" border="0" cellpadding="0" cellspacing="0" bgcolor = "#FFFFFF"> 
            <tbody><tr> 
                <td width="47%" class="bbottomyello"><img src="http://mylottoshop.appspot.com//img/lotto_top_left_home.gif" alt=""></td> 
                <td width="16%" class="bbottomyello">&nbsp;</td> 
                <td colspan="3" valign="top" class="bbottomYellow">&nbsp;</td> 
            </tr> 
            <tr> 
                <td valign="top" bgcolor="#00A452">&nbsp;&nbsp;<span class="onGreenBackground"><span class="onGreenBackground">Wednesday, June 13 2012</span></span></td> 
                <td colspan="4" bgcolor="#00A452" class="onGreenBackground">Latest Results: Confirmed</td> 
            </tr> 
            <tr> 
                <td height="23" colspan="5" class="btopbottomYellow">&nbsp;<strong>&nbsp;Winning Numbers</strong></td> 
            </tr> 
            <tr> 
                <td height="31" colspan="2" class="bbottomYellow"> 
                <div align="center"> 
                    <img src="http://mylottoshop.appspot.com//img/balls/9.gif" width="30" height="40">  
                    <img src="http://mylottoshop.appspot.com//img/balls/20.gif" width="30" height="40">  
                    <img src="http://mylottoshop.appspot.com//img/balls/14.gif" width="30" height="40">  
                    <img src="http://mylottoshop.appspot.com//img/balls/16.gif" width="30" height="40">  
                    <img src="http://mylottoshop.appspot.com//img/balls/43.gif" width="30" height="40">  
                    <img src="http://mylottoshop.appspot.com//img/balls/41.gif" width="30" height="40"> 
                    </div> 
                    </td> 
                <td width="12%" height="31" valign="middle" class="bbottomYellow"><h3>Bonus<br> 
                    Ball:</h3></td> 
                <td width="14%" class="bbottomYellow"> <div align="center"><img src="http://mylottoshop.appspot.com//img/balls/13.gif" width="34" height="40"></div></td>                 
            </tr> 
            </tbody></table></body> 

</html> 
```

通知类签名是：

```
public class Notification implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = -8464293752450599178L;
    private Result result;
    private NotificationClientType client;
    private String message;
    private String api_key;
    private String secret_key;
    private String deliveryAddress; //e.g email, fax etc
    public NotificationClientType getClient() {
        return client;
    }
    public void setClient(NotificationClientType client) {
        this.client = client;
    }
    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }
    public String getApi_key() {
        return api_key;
    }
    public void setApi_key(String api_key) {
        this.api_key = api_key;
    }
    public String getSecret_key() {
        return secret_key;
    }
    public void setSecret_key(String secret_key) {
        this.secret_key = secret_key;
    }
    public String getDeliveryAddress() {
        return deliveryAddress;
    }
    public void setDeliveryAddress(String deliveryAddress) {
        this.deliveryAddress = deliveryAddress;
    }
    public Result getResult() {
        return result;
    }
    public void setResult(Result result) {
        this.result = result;
    } 
```

一些反馈。结果没有区别。我猜 return out.toByteArray() 解决了我不小心造成的 NPE。

预期结果如下：作为电子邮件发送的相同 HTML 字符串产生： ![预期结果](../Images/da6263b801e6b9efad055930b2cad9da.png)

GAE转换结果为：

![在此处输入图像描述](../Images/aaaf918f3d24dc0bee80b12cc75bcce3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:39:54.507

[文档](https://developers.google.com/appengine/docs/python/conversion/overview#Additional_Functions)说资产的名称应该与 img 标签的 src 属性相匹配。

这是我在交互式控制台中尝试的python代码，它实际上产生了两个图像

```
from google.appengine.api import urlfetch
from google.appengine.api import conversion

url = "http://a0.twimg.com/profile_images/77186109/favicon_reasonably_small.png"
asset = conversion.Asset("text/html", '<b>some data</b><br/><img src="a.png"/><img src="%s"/><br/>Foo' % url, "test.html")
conversion_obj = conversion.Conversion(asset, "image/png")

img_response = urlfetch.fetch(url)
image1 = conversion.Asset('image/png', img_response.content, "a.png")
image2 = conversion.Asset('image/png', img_response.content, url)
conversion_obj.add_asset(image1)
conversion_obj.add_asset(image2)

result = conversion.convert(conversion_obj)
print result.error_text

print repr(result.assets[0].data) 
```

# sql - SQL 内联变量赋值

> ID：10759325
> 
> 赞同：1
> 
> 时间：2012-05-25T18:05:24.630
> 
> 标签：sql, tsql, variables

我有一个 SQL 语句来确定两个日期之间的天数。如果差值为负，则语句需要选择 0。该语句有效，但我想知道是否可以将值分配给`datediff("D",GETDATE(),dbo.tblKBX_Reward.validdate)`@ 变量，这样我就不必调用它两次。

```
SELECT CASE 
WHEN datediff("D",GETDATE(),dbo.tblKBX_Reward.validdate) < 0  THEN 0
ELSE datediff("D",GETDATE(),dbo.tblKBX_Reward.validdate)
END from ... 
```

请不要问我为什么要使用 SQL 而不是代码来计算这个值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:09:46.030

你可以写一个更高级别的`SELECT`东西。

```
SELECT CASE 
       WHEN diff_date < 0  THEN 0
       ELSE diff_date
       END 
FROM (
     SELECT datediff("D",GETDATE(),dbo.tblKBX_Reward.validdate) AS diff_date
     from ...
     ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T18:18:00.970

您可以在计算中移动 case 语句，如下所示：

```
Select DateDiff("D", GetDate(), Case When YourColumn > GetDate() 
                                     Then YourColumn 
                                     Else GetDate() 
                                     End) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:10:08.963

如果您选择多行，则不能将其分配给变量。在您的情况下，您可以使用派生表或 CTE：

```
SELECT  Cols, 
        CASE 
        WHEN DiffDates < 0  THEN 0
        ELSE DiffDates
        END DiffDates
FROM (  SELECT Cols, datediff("D",GETDATE(),dbo.tblKBX_Reward.validdate) DiffDates
        FROM dbo.tblKBX_Reward) A 
```

或者：

```
;WITH CTE AS
(
    SELECT Cols, datediff("D",GETDATE(),dbo.tblKBX_Reward.validdate) DiffDates
    FROM dbo.tblKBX_Reward
)

SELECT  Cols, 
        CASE 
        WHEN DiffDates < 0  THEN 0
        ELSE DiffDates
        END DiffDates
FROM CTE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T18:23:29.143

```
SELECT
  CASE WHEN daydiff < 0 THEN 0 ELSE daydiff END
FROM *your tables/joins*
CROSS APPLY (
  SELECT DATEDIFF(DAY, GETDATE(), dbo.tblKBX_Reward.validdate)
) x (daydiff)
WHERE … 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T18:14:14.827

您可以使用 CTE：

```
WITH cte_dateDiffs (RewardId, dateDiff) 
AS (
   SELECT RewardId, datediff("D",GETDATE(), validdate) FROM dbo.tblKBX_Reward
)
SELECT CASE 
   WHEN dd.dateDiff < 0 THEN 0 
   ELSE dd.dateDiff 
END
FROM dbo.tblKBX_Reward r
INNER JOIN cte_dateDiffs dd ON r.RewardId == dd.RewardId
... 
```

# jquery - 是否可以从 java GWT 和 rails html/jquery 应用程序获得一致的外观和感觉？

> ID：10759326
> 
> 赞同：1
> 
> 时间：2012-05-25T18:05:29.153
> 
> 标签：jquery, ruby-on-rails, gwt, styling

我们正在开发一个大型企业 java(Spring) GWT 应用程序，该应用程序将包含树控件、数据网格、富文本编辑器等。我们尚未决定此应用程序的特定外观，因此它对于本问题的目的是灵活的.

重要的是，我们在所有面向客户端的 Web 应用程序中具有一致的外观和感觉。我们现在开始开发一个完全不同的 Web 应用程序，并希望在 rails 3 中完成。当我们必须使用丰富的 UI 控件（例如树或富文本编辑器）时，我们可能会为它找到合适的 JQuery UI 组件。

1) 构建具有与 GWT 应用程序相似的外观和感觉的 rails 3 应用程序的想法有多可行？

2）您对如何实现这一目标有任何建议吗？

# jquery - 当状态码失败时，为什么 jQuery 不会评估来自 ajax 脚本的响应

> ID：10759333
> 
> 赞同：1
> 
> 时间：2012-05-25T18:06:09.483
> 
> 标签：jquery, ajax

我有一个简单的 ajax 请求`data-type: 'script'`。

如果响应的状态码为 200，则返回的 javascript 会正常执行。如果是 500 或 403 之类的错误代码，则不会执行。

我已经重读了 3 次文档：

> “脚本”：将响应评估为 JavaScript，并将其作为纯文本返回。...

这并没有说明它以成功或任何其他条件为条件。

由于我的服务器以“text/javascript”的响应类型进行响应，我会假设 jQuery 会处理该内容类型（即评估它）即使它以“500”状态代码响应（即“嘿，我不能不要做你让我做的事”）

这是 jQuery 的问题吗？或者这是预期的行为并且文档不完整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:15:07.993

从 1.5 版开始，ajax 调用返回一个延迟对象。

所以你可以使用

```
$.ajax({/*options*/})
  .done(function(data, status, jqxhr){ alert("$.ajax completed!"); })
  .fail(function(jqxhr, settings, exception){ alert("$.ajax failed!"); }); 
```

***请注意**`.done`，当请求成功时，将在调用方法之前评估实际脚本*

# php - 标头和客户端库次要版本不匹配

> ID：10759334
> 
> 赞同：87
> 
> 时间：2012-05-25T18:06:21.320
> 
> 标签：php, ubuntu, mysqli, warnings

在 PHP 中，每当我尝试连接到数据库时都会收到以下警告（通过`mysql_connect`）

> 警告：mysql_connect()：标头和客户端库次要版本不匹配。标头：50162 库：50524

在我的`php -i`输出中，我在 mysqli 下列出了以下值

> 客户端 API 库版本 => 5.5.24
> 
> 客户端 API 标头版本 => 5.1.62

我已经尝试更新 php5-mysql*和*php，但我已经使用了它们的最新版本。如何更新标头版本以便不再看到此警告？

**编辑**

我的 MySQL 文件应该全部更新为最新版本：

```
$ apt-get install mysql.*5.5
. . .
mysql-client-5.5 is already the newest version.
mysql-server-core-5.5 is already the newest version.
mysql-server-5.5 is already the newest version.
mysql-testsuite-5.5 is already the newest version.
mysql-source-5.5 is already the newest version. 
```

删除旧版本

```
$ apt-get remove mysql.*5.1
. . .
Package handlersocket-mysql-5.1 is not installed, so not removed
Package mysql-cluster-client-5.1 is not installed, so not removed
Package mysql-cluster-server-5.1 is not installed, so not removed
Package mysql-client-5.1 is not installed, so not removed
Package mysql-client-core-5.1 is not installed, so not removed
Package mysql-server-5.1 is not installed, so not removed
Package mysql-server-core-5.1 is not installed, so not removed
Package mysql-source-5.1 is not installed, so not removed 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2014-03-17T12:16:49.570

我正在使用 MariaDB 并且有类似的问题。

从[MariaDB 站点](http://dev.mysql.com/downloads/connector/php-mysqlnd/)，建议通过以下方式修复它

1.  切换到在 PHP 中使用 mysqlnd 驱动程序（推荐解决方案）。
2.  使用 MariaDB 客户端库重新编译 PHP。
3.  将您的原始 MySQL 客户端库与 MariaDB 一起使用。

通过在 Ubuntu 中使用 mysqlnd 驱动程序解决了我的问题：

```
sudo apt-get install php5-mysqlnd 
```

* * *

[更新：额外信息] 安装此驱动程序还解决了将整数值作为字符串返回的 PDO 问题。要将类型保持为整数，请在安装 mysqlInd 后执行此操作

```
$db = new PDO('mysql:host='.$host.';dbname='.$db_name, $user, $pass, 
          array( PDO::ATTR_PERSISTENT => true));
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$db->setAttribute(PDO::ATTR_STRINGIFY_FETCHES, false); 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-08-11T15:51:07.553

对于新的 MySQL 5.6 系列，您需要安装 php5-mysqlnd，而不是 php5-mysql。

删除这个版本的mysql驱动

```
sudo apt-get remove php5-mysql 
```

并安装它

```
sudo apt-get install php5-mysqlnd 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-05-26T18:29:27.393

您的 PHP 是用 MySQL 5.1 编译的，但现在它正在链接 5.5.X 系列的 mysql 库。您必须将 PHP 升级到使用 MySQL 5.5 编译的版本或将 mysql 客户端库恢复到 5.1.x。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-04-24T14:40:37.770

同样适用于 MySQL：

```
sudo apt-get install php5-mysqlnd 
```

我读过这个线程试图找到 MySQL 的解决方案，我也看到了 ken 的答案，但我忽略了 MariaDB 的解决方案，这样浪费了几个小时。我不清楚这是否适用于 MySQL。这篇文章只是为了让你节省我失去的几个小时。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-05-21T02:08:43.973

此错误的根本原因是 PHP 前段时间将自身与 MySQL 客户端库分离。所以发生的事情（主要是在较旧的 linux 编译上）是人们将针对**给定的 MySQL 客户端构建**编译 PHP （意味着安装的 MySQL 版本无关）而不是升级（在 CentOS 中，这个包被列为`mysqlclientXX`，其中`XX`代表包号）。这也允许包维护者支持较低版本的 MySQL。这是一种混乱的方式，但考虑到 PHP 和 MySQL 如何使用不同的许可，这是唯一的方式。

[MySQLND](http://php.net/manual/en/book.mysqlnd.php)通过使用 PHP 自己的本地驱动程序 (ND) 解决了这个问题，它不再依赖于 MySQL Client。它还针对您正在使用的 PHP 版本进行编译。这是一个更好的解决方案，如果没有其他原因使 MySQLND 让 PHP 与 MySQL 对话。

如果您无法安装 MySQLND，您实际上可以在大多数情况下安全地忽略此错误。这只是一个仅供参考的通知，而不是任何东西。只是听起来很吓人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-26T12:26:59.113

[要使用MySQL 本机驱动程序 (mysqlnd)](http://dev.mysql.com/downloads/connector/php-mysqlnd/)从源代码编译 php ，

```
cd /php/source/path
./configure <other-options> --with-mysql --with-mysqli --with-pdo-mysql
make clean    # required if there was a previous make, which could cause various errors during make
make
make install 
```

从`/php/source/path/configure --help`.

```
--with-mysql=DIR        Include MySQL support.  DIR is the MySQL base
                      directory, if no DIR is passed or the value is
                      mysqlnd the MySQL native driver will be used
--with-mysqli=FILE      Include MySQLi support.  FILE is the path
                      to mysql_config.  If no value or mysqlnd is passed
                      as FILE, the MySQL native driver will be used
--with-pdo-mysql=DIR    PDO: MySQL support. DIR is the MySQL base directory
                      If no value or mysqlnd is passed as DIR, the
                      MySQL native driver will be used 
```

使用这些选项可以包含一个或多个 PHP MySQL 扩展。
如果未将值传递给这些选项，或者值为`mysqlnd`，则将使用 MySQL 本机驱动程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-12T20:27:31.983

我在我的 wordpress 网站中遇到了相同的 php 争吵...

> 错误：警告：mysql_connect()：标头和客户端库次要版本不匹配。标题：50547 库：50628 在 /home/lhu/public_html/innovacarrentalschennai.com/wp-includes/wp-db.php 在线 1515

原因：我将 wp 4.2 更新到 4.5 版本（PHP 和 MySql 不匹配）

我在第 1515 行更改了 wp-db.php

```
$this->dbh = mysql_connect( $this->dbhost, $this->dbuser, $this->dbpassword, $new_link, $client_flags ); 
```

到

```
if ( WP_DEBUG ) {
    $this->dbh = mysql_connect( $this->dbhost, $this->dbuser, $this->dbpassword, $new_link, $client_flags );
} else {
    $this->dbh = @mysql_connect( $this->dbhost, $this->dbuser, $this->dbpassword, $new_link, $client_flags );
} 
```

它在我的 wordpress 网站上没有任何错误

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-18T21:02:32.483

如果您可以访问 cpanel 或 whm 进行域网络托管...

在 cPanel 中，转到“软件和服务”选项卡，>> 然后单击“选择 PHP 版本”>> 设置所需的 php 版本...

[![警告：mysql_connect()：标头和客户端库次要版本不匹配。 标题：50547 库：50628 在 chennaitechnologies.com](../Images/a863029d1dcff8e95291476e94500588.png)](https://i.stack.imgur.com/osIAZ.jpg)

例如。当前 PHP 版本：

PHP 版本 [5.2]（5.2、5.3、5.4、5.5、5.6 可用 php 版本列表）

**警告：通过 PHP 选择器为原生 php 版本更改 php 模块和 php 选项是不可能的**

我选择了 5.6 php 版本，在我的 wordpress 博客网站上清除了该错误之后......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-16T21:31:11.650

```
Warning: mysqli::mysqli(): Headers and client library minor version mismatch.
Headers:50547 Library:100026 
```

我通过重建我的 Apache 解决了上述错误：

```
cPanel Version  56.0 (build 25)
Apache Version  2.4.18
PHP Version 5.5.30
MySQL Version   10.0.26-MariaDB 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-07T15:19:56.287

我在使用 Percona/MySQL 5.6 时遇到了这个问题，并且 php 驱动程序是用 5.5 编译的，并且某些应用程序需要 php5-mysql，所以我编写了一个脚本来重建驱动程序。

[https://github.com/falcacibar/php5-mysql-rebuild](https://github.com/falcacibar/php5-mysql-rebuild)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-25T21:34:47.247

对于WHM和cPanel，有些版本需要显式设置mysqli来构建。

使用 WHM，在 CENTOS 6.9 xen pv [dc] v68.0.27 下，需要通过查看所有选项并选择 mysqli 来重建 Apache/PHP。默认是构建已弃用的 mysql。现在折旧消息已经消失，并且可以为将来的 MySQL 升级做好准备。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-08T16:52:57.697

我在centos7上遇到了同样的问题。删除 php-mysql 并安装 php-mysqlnd 解决了这个问题。感谢 Carlos Buenosvinos Zamora 的建议。

这是我在 centos7 上的命令，以防万一这对任何人都有帮助，因为这里的大多数答案都是基于 Debian/Ubuntu 的。

查找已安装的 php-mysql 包

```
yum list installed | grep mysql 
```

删除已安装的 php-mysql 包

```
yum remove php55w-mysql.x86_64 
```

安装 php-mysqlnd

```
yum install php-mysqlnd.x86_64 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-23T10:31:52.997

我的托管公司告诉我通过停用“mysqli”并在 php 扩展中激活“nd_mysqli”来解决这个问题。

错误消失了，但我不知道这是否是解决此问题的正确方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-03T04:25:39.883

适用于**MariaDB 10.6.4-MariaDB** , **php56w** , 在**centos 7.7**

1.  `yum remove php56w-mysqli`
2.  `yum install php56w-mysqlnd`

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-10-11T06:47:40.287

**将 PHP 版本从 5.6 更改为 5.5 已修复**。

您必须转到控制面板 > CGI 脚本并在那里更改 PHP 版本。

# ruby-on-rails-3 - 如何使用 capybara 和 rspec 点击表格行

> ID：10759337
> 
> 赞同：7
> 
> 时间：2012-05-25T18:06:28.763
> 
> 标签：ruby-on-rails-3, html, capybara, rspec-rails

我正在用 capybara 为我的 rails 应用程序编写请求规范。在我的代码中，我有类似的东西：

```
%table
  %tbody
     %tr{"on_click" => "location.href='some_link'"}
       %td="Some attribute"
       %td="Some attribute"
       %td="Some attribute"
       %td="Some attribute" 
```

这样我就可以使整行可点击。我想为这个功能写一个水豚的请求规范，但我不知道怎么做。谁可以帮我这个事 ？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T18:09:58.083

也许您应该首先了解 Rails 中的测试。看一下这个！[http://railscasts.com/episodes/275-how-i-test](http://railscasts.com/episodes/275-how-i-test)这真的很有帮助。你可以给你`tr`上课（说）`.tr`并做

`page.find(:css, ".tr").click()`

我希望这可行，在我的情况下有效！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T03:49:06.863

我发现这不需要上课：

```
page.find(:xpath, "//table/tbody/tr").click 
```

我相信您的行点击需要 JavaScript，因此您需要添加`:js => true`到测试的标题中。使用 JavaScript 设置测试是一项挑战。我发现这些资源很有帮助：

*   [ASCIIcast #257 Request Specs 和 Capybara](http://railscasts.com/episodes/257-request-specs-and-capybara?view=asciicast) - 参见 database-cleaner 的信息
*   [Capybara 自述文件](https://github.com/jnicklas/capybara#readme)- 请参阅“事务和数据库设置”

这是一个更完整的测试示例：

```
# Note that opening page by clicking on row requires JavaScript
describe "when user clicks on first row", :js => true do

  let(:first_account_listed) { Account.order(:name).first }

  before { page.find(:xpath, "//table/tbody/tr").click }

  it { should have_selector('title', text: 'Account Details') }

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-06T18:14:33.537

在 Capybara 3+ 中，您可以使用更优雅的方式使用`:table_row`选择器并匹配以下`td`值：

```
page.find(:table_row, ["Some attribute"]).click 
```

如果您定义了表头，您还可以传递一个哈希而不是一个数组，它将单元格与其相应的表头匹配，如下所示：

```
page.find(:table_row, { "Header" => "Cell value" }).click 
```

要深入了解这实际上是如何工作的，这里有一个指向最新 Capybara 选择器定义的链接：[https ://github.com/teamcapybara/capybara/blob/master/lib/capybara/selector/definition/table_row.rb](https://github.com/teamcapybara/capybara/blob/master/lib/capybara/selector/definition/table_row.rb)

# sencha-touch - 删除列表项分隔符/边框

> ID：10759339
> 
> 赞同：1
> 
> 时间：2012-05-25T18:06:39.290
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我已经检查了 DOM，但我仍然看不到分隔符/边框添加到列表项目的位置。我想删除它们。

![在此处输入图像描述](../Images/0f8f9f17affb0beb3b47216694b584e8.png)

有谁知道这是怎么做到的吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:26:34.040

它在于`div.x-list-item-label`，只需将其 CSS 样式更改为：

```
border-top: none !important;
border-bottom: none !important; /* For the last row */ 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:09:26.300

仅当您希望将其应用于应用程序中的每个列表时，上述方法才是正确的。

如果您想以正确的方式执行此操作，则需要将内联样式添加到您创建的列表中。以下是我在应用程序的收件箱屏幕中的操作方式：

```
{
 xtype: 'list',
 disableSelection: true, // only if you want to disable selection of the list
 config: {
      style: {
           'border': '0',
      },
 },
 itemTpl: '<div>{itemContent}</div>'
} 
```

# ruby - 你能关闭水豚所有打开的窗户吗？

> ID：10759341
> 
> 赞同：8
> 
> 时间：2012-05-25T18:06:45.767
> 
> 标签：ruby, selenium, capybara

因此，当我单独运行测试时，它们工作得很好。但是，当我运行我的功能（多个测试）时，我的代码失败了。
这是因为当 capybara 存在时，并不是我所有的窗口都在关闭，因此我的 selenium 驱动程序不知道要使用哪个窗口。

基本上，正在发生的事情是我的测试正在打开多个窗口。发生这种情况是因为我的测试是单击打开新窗口的链接并检查新窗口中的内容。即使我`page.quit`在每次测试结束时说，此功能也不会关闭所有打开的窗口（关闭活动窗口但不关闭原始窗口）。当第二次测试运行时，它使用了最初创建的窗口，但是当它打开新的弹出窗口时，它使用了错误的窗口。

如何确保在每次测试期间都在使用新浏览器，并且之前测试中的所有窗口都已关闭。
我目前正在使用`page.reset!`和`page.quit`。
不确定，但我可以说`session.quit`关闭所有打开的浏览器窗口吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T20:08:27.757

此代码有效：

```
page.execute_script "window.close();" 
```

我只是在要关闭的窗口中执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T21:28:04.940

```
page.driver.browser.window_handles.each do |handle|
  page.driver.browser.switch_to.window(handle)
  page.execute_script "window.close()"

end 
```

为我施了魔法。@Jason 和 @Justin 的答案的组合。

谢谢！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-05T13:23:26.573

我使用这段代码来访问弹出窗口并在之后关闭它们。应该差别不大

```
within_window(page.driver.browser.window_handles.last) do
  click buttons and stuff...
  ...
  page.driver.browser.close #closes popup
end 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T18:35:40.037

尝试以下操作：

```
page.driver.browser.window_handles.each do |handle|
  page.driver.browser.switch_to.window(handle)
  page.quit
end 
```

（我认为它会起作用，但我还没有机会测试它。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-07T06:05:12.730

尝试这个：

```
tab_id = page.driver.find_window("http://google.com.au")
page.driver.browser.switch_to.window(tab_id)
page.driver.quit 
```

这对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-02T23:42:15.687

为了在规范文件中包含所有断言，我**将控制权传递**给**新页面（窗口）**，在执行断言后我**关闭**新页面并将**控制权传递**给原始页面，如下所示：

```
after(:each) do
  expect(@static_page.has_logo?).to eq(true) # assertion in new page
  page.execute_script('window.close()') # close new page
  switch_to_window(windows.first) # return control to first page
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-12T20:06:16.413

在此处添加此内容是因为此页面出现在“水豚关闭所有窗口”的前几个 Google 搜索结果中。

我们有一些神秘的功能规范失败，我们追踪到了一些在第二个选项卡中打开应用程序链接的问题——因为这些选项卡刚刚打开，它们经常会触发一个失败的 AJAX 请求，并且当前的测试会被炸毁一个完全不相关的错误。我们解决这个问题的方法是添加一个钩子，确保在每个特性规范之后关闭除当前窗口之外的所有窗口：

```
Rspec.configure do |config|
  config.after(type: :feature) do
    # Make sure all browser windows except one are closed
    windows.reject(&:current?).each(&:close)
  end
end 
```

这对我们来说就像一个魅力，使用 Capybara 的`headless_chrome`驱动程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-27T19:11:58.913

将此添加到您的功能测试中，它将重置会话 cookie 并在空白页面上开始测试：

```
# Window washing - use a clean window before every example
before(:example) do
  page.reset!
end 
```

# clojure - 制作没有源文件的 lein uberjar

> ID：10759343
> 
> 赞同：13
> 
> 时间：2012-05-25T18:06:46.610
> 
> 标签：clojure, leiningen, uberjar

我正在使用“lein uberjar”来制作我的项目的可执行 jar 文件。jar 已正确创建并按预期运行。

我只想知道是否可以在生成的 .jar 中不包含我的源 .clj 文件，因为我打算分发它，并且我不希望我的源文件可供公众使用。

我正在使用 lein 1.7.1

如果 lein 不可能，如果我只是从 jar 中手动删除 .clj 文件，它会起作用吗？我做了一个测试并且它有效，我想确保这样做是安全的。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-27T00:15:28.227

`:omit-source true`在 lein 中使用`project.clj`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:31:52.510

您是否尝试过使用提供的 aot 编译步骤？有关示例，请参见[此处。](https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L92)

另外，不久前有人写了一些关于 aot 编译整个项目的博客：http: [//blog.japila.pl/2012/02/aot-compile-all-namespaces-in-a-clojure-project-aot-all-在项目中-clj-leiningen/](http://blog.japila.pl/2012/02/aot-compile-all-namespaces-in-a-clojure-project-aot-all-in-project-clj-leiningen/)

在这种情况下，您可能仍然需要挖掘并删除 .clj 文件，我不确定。不过，也许这是一个开始的地方。

## 编辑 1

我应该注意，即使您要使用编译来分发 .class 文件，也有[非常好的工具](http://java.decompiler.free.fr/?q=jdgui)可以以用户可以阅读的方式反编译这些类（我过去使用过这个，当时文档很差我不得不去别处看看它是如何工作的）。

在这些情况下，您最好找到一种方法来实现自己的代码混淆器，尽管我对该主题知之甚少/一无所知，[这是一个开始](http://syprog.blogspot.co.uk/2012/05/basics-of-data-obfuscation.html?utm_source=Coder+Weekly&utm_campaign=a6889de9de-Coder_Weekly_Issue_17&utm_medium=email)。

# ruby - Ruby 删除 Case 语句中的隐式中断？（如何制作类似 Switch 的案例）

> ID：10759344
> 
> 赞同：4
> 
> 时间：2012-05-25T18:06:53.397
> 
> 标签：ruby, switch-statement

```
x='bob'
case x
when "bob"
puts 'it stops here'
when 'bob'
puts 'but i want it to stop here'
end 
```

反正有没有让 case 语句表现得像 vanilla 开关？这样它会在爆发之前循环遍历所有“何时”？我很惊讶 ruby​​ 的行为几乎与`elsif`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T18:44:40.113

迈克尔，

虽然你的例子有点误导（'bob' 匹配 'bob' 和 "bob" 所以第一个案例总是匹配），你可以使用简单的 if 就像`if_test`下面的方法：

```
def case_test(x)                                                  
  puts case
  when x > 3
    "ct: #{x} is over 3"
  when x > 4
    "ct: #{x} is over 4"
  end   
end     

case_test(4)
case_test(5)

def if_test(x)
  puts "it: #{x} is over 3" if x > 3
  puts "it: #{x} is over 4" if x > 4
end     

if_test(4)
if_test(5) 
```

这产生：

```
ct: 4 is over 3
ct: 5 is over 3
it: 4 is over 3
it: 5 is over 3
it: 5 is over 4 
```

请注意，您还可以使用多个语句 with `when`，这可能对您有所帮助，具体取决于您的实际用例：

```
def many(x)              
  case x                 
  when 'alice','bob'     
    puts "I know #{x}"
  else·                  
    puts "I don't know #{x}"                                      
  end                    
end                      

many('alice')            
many('bob') 
many('eve') 
```

产量：

```
I know alice
I know bob
I don't know eve 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T18:37:17.360

不，Case 语句在通过比较时评估`when`其目标`===`方法评估的第一个块`true`，然后停在那里。

# python - python正则表达式匹配返回完整句子

> ID：10759345
> 
> 赞同：1
> 
> 时间：2012-05-25T18:07:08.560
> 
> 标签：python, regex

我正在尝试编写一个正则表达式，它将在句子列表中找到“松鼠”这个词。该表达式应返回包含单词“squirrel”的完整句子列表。

包含单词“squirrel”的句子可能类似于以下句子：

> 松鼠有一条长尾巴 (.) 说 (.) 长尾巴。
> 猫 (a)n(d) 松鼠 (a)n(d) 兔子 (a)n(d) 兔子 (a)n(d) (.)
> 松鼠+有尾巴

我现在`re`的样子是这样的

```
word_only += re.findall('(.*?' + word + '?!\S)', sentence)  
word_only += re.findall('.*?' + word + '\S+', sentence) 
```

但它只返回单词（“squirrel”）前面的内容，而不是后面的内容。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T23:48:20.253

这里根本不需要使用正则表达式。

```
#The example string:
s = '''the squirrel has a long tail (.) say (.) long tail .
cats (a)n(d) squirrels (a)n(d) rabbits (a)n(d) bunnys (a)n(d) (.)
the squirrel+has a tail'''

sentencelist = s.split(".") #split on periods
[sentence for sentence in sentencelist if sentence.find("squirrel") != -1]
#If you don't find any squirrels, hold fire! 
```

另一方面，如果你有缩写/标题，这个脚本会分成太多的句子。当我不得不解决这样的问题时，我最终使用了一个正则表达式，如`\.\s+(?=[A-Z])`, 并在匹配项上进行拆分。这修复了缩写，例如 NAACP，但不修复标题，例如 Mr. Smithers。我最终建立了一本标题字典，并在我完成正则表达式和计数之前将句点替换掉。YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:13:25.917

如果我理解正确，您有一个**字符串列表，每个字符串都包含一个 sentence**。

```
squirrel_sentences = []
for sentence in sentences:
    if re.match(word):
       squirrel_sentences.append(sentence) 
```

* * *

如果您有一个**包含多个句子的单个字符串**，您可以尝试此正则表达式的匹配，它会查找从句点到句点的字符范围，其中包含`squirrel`（也支持使用 and 的第一个和最后一个句子`\A`）`\Z`：

```
(?:\A|(?<=.))[^.]*squirrel[^.]*(?:.|\Z) 
```

# python - 一个一个运行时效果好，使用循环时出错

> ID：10759353
> 
> 赞同：4
> 
> 时间：2012-05-25T18:07:37.570
> 
> 标签：python, for-loop

我有一个由一和零组成的二维网格。簇被定义为相邻的非对角集合。例如，如果我们看一个网格：

```
[[0 0 0 0 0]
 [1 1 1 1 1]
 [1 0 0 0 1]
 [0 1 0 0 1]
 [1 1 1 1 0]] 
```

一个集群将是一组坐标（实际上我为此使用列表，但它并不重要）：

```
c1=[[1, 0], [1, 1], [1, 2], [1, 3], [1, 4], [2, 1], [2, 4], [3, 4]] 
```

该网格中的另一个集群由下式给出：

```
c2=[[3,1], [4, 0], [4, 1], [4, 2], [4, 3]] 
```

现在，我创建了一个方法，对于给定的起始坐标（如果它的值为 1），返回该点所属的集群（例如，如果我选择 [1,1] 坐标，它将返回 c1）。
为了测试，我将选择一个点`(1, 1)`和一个小网格。这是结果良好时的输出：

```
Number of recursions: 10
Length of cluster: 10
[[1 1 1 0 1]
 [1 1 0 1 1]
 [0 1 0 0 1]
 [1 1 1 0 0]
 [0 1 0 1 1]]

[[1 1 1 0 0]
 [1 1 0 0 0]
 [0 1 0 0 0]
 [1 1 1 0 0]
 [0 1 0 0 0]] 
```

我试图了解当集群大小变大时我的算法有多快。如果我运行该程序然后重新运行它，并多次执行此操作，它总是会产生良好的结果。如果我使用循环，它会开始给出错误的结果。这是一种可能的输出测试场景：

```
Number of recursions: 10
Length of cluster: 10
[[1 1 1 0 1]
 [1 1 0 1 1]
 [0 1 0 0 1]
 [1 1 1 0 0]
 [0 1 0 1 1]]

[[1 1 1 0 0]
 [1 1 0 0 0]
 [0 1 0 0 0]
 [1 1 1 0 0]
 [0 1 0 0 0]]
Number of recursions: 8
Length of cluster: 8
[[0 1 1 1 0]
 [1 1 1 0 0]
 [1 0 0 0 0]
 [1 1 1 0 1]
 [1 1 0 0 0]]

[[0 0 0 0 0] - the first one is always good, this one already has an error
 [1 1 0 0 0]
 [1 0 0 0 0]
 [1 1 1 0 0]
 [1 1 0 0 0]]
Number of recursions: 1
Length of cluster: 1
[[1 1 1 1 1]
 [0 1 0 1 0]
 [0 1 0 0 0]
 [0 1 0 0 0]
 [0 1 1 0 1]]

[[0 0 0 0 0] - till end
 [0 1 0 0 0]
 [0 0 0 0 0]
 [0 0 0 0 0]
 [0 0 0 0 0]]
Number of recursions: 1
Length of cluster: 1
[[1 1 1 1 1]
 [0 1 1 0 0]
 [1 0 1 1 1]
 [1 1 0 1 0]
 [0 1 1 1 0]]

[[0 0 0 0 0]
 [0 1 0 0 0]
 [0 0 0 0 0]
 [0 0 0 0 0]
 [0 0 0 0 0]]
... till end 
```

我将给出循环代码（给你所有代码没有问题，但它太大了，错误可能是由于我在循环内做了什么）：

```
import numpy as np
from time import time

def test(N, p, testTime, length):
    assert N>0
    x=1
    y=1
    a=PercolationGrid(N) #this is a class that creates a grid
    a.useFixedProbability(p) #the probability that given point will be 1
    a.grid[x,y]=1 #I put the starting point as 1 manually
    cluster=Cluster(a)
    t0=time()
    cluster.getCluster(x,y)  #this is what I'm testing how fast is it
    t1=time()
    stats=cluster.getStats() #get the length of cluster and some other data
    testTime.append(t1-t0)
    testTime.sort()
    length.append(stats[1]) #[1] is the length stat that interests me
    length.sort()  #both sorts are so I can use plot later
    print a.getGrid()  #show whole grid
    clusterGrid=np.zeros(N*N, dtype='int8').reshape(N, N) #create zero grid where I'll "put" the cluster of interest
    c1=cluster.getClusterCoordinates() #this is recursive method (if it has any importance)
    for xy in c1: 
        k=xy[0]
        m=xy[1]
        clusterGrid[k, m]=1
    print clusterGrid
    del a, cluster, clusterGrid

testTime=[]
length=[]
p=0.59
N=35
np.set_printoptions(threshold='nan') #so the output doesn't shrink
for i in range(10):
    test(N, p, testTime, length) 
```

我假设我在释放内存或其他东西方面做错了（如果它不是我看不到的循环中的一些微不足道的错误）？我在 64 位 Linux 上使用 python 2.7.3。

编辑：我知道这里的人不应该审查整个代码，而是具体问题，但我找不到发生了什么，唯一的建议是也许我有一些静态变量，但在我看来那不是案子。因此，如果某人有良好的意愿和精力，您可以浏览代码，也许您会看到一些东西。我不久前开始使用类，所以要为很多不好的东西做好准备。

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt
import time

class ProbabilityGrid(object):
    """
    This class gives 2D quadratic array (a grid) which is filled with
    float values from 0-1, which in many cases represent probabilities
    """

    def __init__(self, size=2, dataType='float16'):
        """initialization of a grid with 0\. values"""
        assert size>1
        assert dataType=='float64' or dataType=='float32' or dataType=='float16'
        self.n=size
        self.dataType=dataType
        self.grid=np.zeros((size, size), dtype=dataType)

    def getGrid(self):
        """returns a 2D probability array"""
        return self.grid

    def getSize(self):    
        """returns a size of a 2D array"""
        return self.size

    def fillRandom(self):
        """fills the grid with uniformly random values from 0 to 1"""
        n=self.n
        self.grid=np.random.rand(n, n)

    def fixedProbabilities(self, p):
        """fills the grid with fixed value from 0 to 1"""
        assert p<1.0
        self.grid=p*np.ones((self.n, self.n))

class PercolationGrid(object):
    """
    percolation quadratic grid filled with 1 and 0, int8
    which represent a state.
    Percolation grid is closly connected to probabilies grid.
    ProbabilityGrid gives the starting probabilities will the [i,j] spot
    be filled or not. All functions change the PercolationGrid.grid when
    ProbabilityGrid.grid changes, so in a way their values are connected
    """
    def __init__(self, size=2, dataType='int8'):
        """
        initialization of PercolationGrid, sets uniformly 0 and 1 to grid
        """
        assert size>1
        assert dataType=='int64' or dataType=='int32' or dataType=='int8'
        self.n=size
        self.dataType=dataType
        self.grid=np.zeros((size, size), dtype=dataType)
        self.pGrid=ProbabilityGrid(self.n)
        self.pGrid.fillRandom()
        self.useProbabilityGrid()

    #def fillRandom(self, min=0, max=1, distribution='uniform'):
     #   n=self.n
      #  self.grid=np.random.random_integers(min, max, n*n).reshape(n, n)

    def getGrid(self):
        """returns a 2D percolation array"""
        return self.grid

    def useProbabilityGrid(self): #use probability grid to get Percolation grid of 0s and 1es
        """
        this method fills the PercolationGrid.grid according to probabilities
        from Probability.grid
        """
        comparisonGrid=np.random.rand(self.n, self.n)
        self.grid=np.array(np.floor(self.pGrid.grid-comparisonGrid)+1, dtype=self.dataType)
      # Here I used a trick. To simulate whether 1 will apear with probability p,
      # we can use uniform random generator which returns values from 0 to 1\. If 
      # the value<p then we get 1, if value>p it's 0.
      # But instead looping over each element, it's much faster to make same sized
      # grid of random, uniform values from 0 to 1, calculate the difference, add 1
      # and use floor function which round everything larger than 1 to 1, and lower
      # to 0\. Then value-p+1 will give 0 if value<p, 1 if value>p. The result is
      # converted to data type of percolation array.

    def useFixedProbability(self, p):
        """
        this method fills the PercolationGrid according to fixed probabilities
        of being filled, for example, a large grid with parameter p set to 0.33
        should, aproximatly have one third of places filed with ones and 2/3 with 0
        """
        self.pGrid.fixedProbabilities(p)
        self.useProbabilityGrid()

    def probabilityCheck(self):
        """ this method checks the number of ones vs number of elements,
        good for checking if the filling of a grid was close to probability
        we had in mind. Of course, the accuracy is larger as grid size grows.
        For smaller grid sizes you can still check the probability by 
        running the test multiple times.
        """
        sum=self.grid.sum()
        print float(sum)/float(self.n*self.n)
        #this works because values can only be 0 or 1, so the sum/size gives
        #the ratio of ones vs size

    def setGrid(self, grid):
        shape=grid.shape
        i,j=shape[0], shape[1]
        assert i>1 and j>1
        if i!=j:
            print ("The grid needs to be NxN shape, N>1")
        self.grid=grid

    def setProbabilities(self, grid):
        shape=grid.shape
        i,j=shape[0], shape[1]
        assert i>1 and j>1
        if i!=j:
            print ("The grid needs to be NxN shape, N>1")
        self.pGrid.grid=grid
        self.useProbabilityGrid()

    def showPercolations(self):
        fig1=plt.figure()
        fig2=plt.figure()
        ax1=fig1.add_subplot(111)
        ax2=fig2.add_subplot(111)
        myColors=[(1.0, 1.0, 1.0, 1.0), (1.0, 0.0, 0.0, 1.0)]
        mycmap=mpl.colors.ListedColormap(myColors)

        subplt1=ax1.matshow(self.pGrid.grid, cmap='jet')
        cbar1=fig1.colorbar(subplt1)

        subplt2=ax2.matshow(self.grid, cmap=mycmap)
        cbar2=fig2.colorbar(subplt2, ticks=[0.25,0.75])
        cbar2.ax.set_yticklabels(['None', 'Percolated'], rotation='vertical')

class Cluster(object):
    """This is a class of percolation clusters"""
    def __init__(self, array):
        self.grid=array.getGrid()
        self.N=len(self.grid[0,])
        self.cluster={}
        self.numOfSteps=0

    #next 4 functions return True if field next to given field is 1 or False if it's 0
    def moveLeft(self, i, j):
        moveLeft=False
        assert i<self.N
        assert j<self.N
        if j>0 and self.grid[i, j-1]==1:
            moveLeft=True
        return moveLeft

    def moveRight(self, i, j):
        moveRight=False
        assert i<self.N
        assert j<self.N
        if j<N-1 and self.grid[i, j+1]==1:
            moveRight=True
        return moveRight

    def moveDown(self, i, j):
        moveDown=False
        assert i<self.N
        assert j<self.N
        if i<N-1 and self.grid[i+1, j]==1:
            moveDown=True
        return moveDown

    def moveUp(self, i, j):
        moveUp=False
        assert i<self.N
        assert j<self.N
        if i>0 and self.grid[i-1, j]==1:
            moveUp=True
        return moveUp

    def listOfOnes(self):
        """nested list of connected ones in each row"""

        outlist=[]

        for i in xrange(self.N):
            outlist.append([])
            helplist=[]
            for j in xrange(self.N):
                if self.grid[i, j]==0:
                    if (j>0 and self.grid[i, j-1]==0) or (j==0 and self.grid[i, j]==0):
                        continue # condition needed because of edges
                    outlist[i].append(helplist)
                    helplist=[]
                    continue
                helplist.append((i, j))
                if self.grid[i, j]==1 and j==self.N-1:
                    outlist[i].append(helplist)
        return outlist

    def getCluster(self, i=0, j=0, moveD=[1, 1, 1, 1]):
        #(left, right, up, down)
        #moveD short for moveDirections, 1 means that it tries to move it to that side, 0 so it doesn't try
        self.numOfSteps=self.numOfSteps+1
        if self.grid[i, j]==1:
            self.cluster[(i, j)]=True
        else:
            print "the starting coordinate is not in any cluster"
            return
        if moveD[0]==1:
            try: #if it comes to same point from different directions we'd get an infinite recursion, checking if it already been on that point prevents that
                self.cluster[(i, j-1)]
                moveD[0]=0
            except:
                if self.moveLeft(i, j)==False: #check if 0 or 1 is left to (i, j)
                    moveD[0]=0
                else:
                   self.getCluster(i, j-1, [1, 0, 1, 1]) #right is 0, because we came from left
        if moveD[1]==1:
            try:
                self.cluster[(i, j+1)]
                moveD[1]=0
            except:
                if self.moveRight(i, j)==False:
                    moveD[1]=0
                else:
                    self.getCluster(i, j+1, [0, 1, 1, 1])
        if moveD[2]==1:
            try:
                self.cluster[(i-1, j)]
                moveD[2]=0
            except:
                if self.moveUp(i, j)==False:
                    moveD[2]=0
                else:
                    self.getCluster(i-1, j, [1, 1, 1, 0])
        if moveD[3]==1:
            try:
                self.cluster[(i+1, j)]
                moveD[3]=0
            except:
                if self.moveDown(i, j)==False:
                    moveD[3]=0
                else:
                    self.getCluster(i+1, j, [1, 1, 0, 1])
        if moveD==(0, 0, 0, 0):
            return

    def getClusterCoordinates(self):
        return self.cluster

    def getStats(self):
        print "Number of recursions:", self.numOfSteps
        print "Length of cluster:", len(self.cluster)
        return (self.numOfSteps, len(self.cluster)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:11:06.380

您的错误来自 getCluster 方法。当将 moveD 设置为 [1,1,1,1] 时，您实际上是在设置一个静态变量（不要引用我的话）。这导致来自先前处决的信息得以延续。

[这是一个博客文章的链接，其中显示了一个示例。](http://www.deadlybloodyserious.com/2008/05/default-argument-blunders/)

下面是 getCluster 方法的工作版本，它既修复了默认争论问题，又删除了表现出问题行为的无关 moveD 分配。

```
def getCluster(self, i=0, j=0, moveD=None):
    #(left, right, up, down)
    #moveD short for moveDirections, 1 means that it tries to move it to that side, 0 so it doesn't try
    if moveD == None: moveD = [1, 1, 1, 1]
    self.numOfSteps=self.numOfSteps+1
    if self.grid[i, j]==1:
        self.cluster[(i, j)]=True
    else:
        print "the starting coordinate is not in any cluster"
        return
    if moveD[0]==1:
        try: #if it comes to same point from different directions we'd get an infinite recursion, checking if it already been on that point prevents that
            self.cluster[(i, j-1)]
        except:
            if self.moveLeft(i, j)==True: #check if 0 or 1 is left to (i, j)
               self.getCluster(i, j-1, [1, 0, 1, 1]) #right is 0, because we came from left
    if moveD[1]==1:
        try:
            self.cluster[(i, j+1)]
        except:
            if self.moveRight(i, j)==True:
                self.getCluster(i, j+1, [0, 1, 1, 1])
    if moveD[2]==1:
        try:
            self.cluster[(i-1, j)]
        except:
            if self.moveUp(i, j)==True:
                self.getCluster(i-1, j, [1, 1, 1, 0])
    if moveD[3]==1:
        try:
            self.cluster[(i+1, j)]
        except:
            if self.moveDown(i, j)==True:
                self.getCluster(i+1, j, [1, 1, 0, 1]) 
```

# c# - 错误：“Microsoft.Ace.OLEDB.12.0”提供程序未在本地计算机上注册

> ID：10759356
> 
> 赞同：0
> 
> 时间：2012-05-25T18:07:49.293
> 
> 标签：c#, ms-access-2007

我有 C# 和 MS Access DB(.accdb) 中的桌面应用程序

我已经安装了“Ms Access Engine”，但我面临“错误：'Microsoft.Ace.OLEDB.12.0' 提供程序未在本地计算机上注册”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-24T08:36:21.930

您需要检查的第一件事是您的应用程序的构建配置。

*   如果您已经**在 x86 平台下构建了项目**，那么为了解决您的问题，您应该在您的机器上安装以下软件包：

    1.  要使用“Microsoft.ACE.OLEDB.12.0”提供程序，您必须先 **安装 Microsoft Access Database Engine 2010 Redistributable** ，此安装可在以下网址获得：http: [//www.microsoft.com/download/en/details.aspx ?id=13255](http://www.microsoft.com/download/en/details.aspx?id=13255)。

        安装完成后，尝试运行您的应用程序，如果这很好地解决了问题，如果没有，请继续执行步骤 2。

    2.  下一步是一个无法解释的解决方法，它适用于 Office 2010，即使它是 Office 2007 的数据连接组件。我不太确定为什么会这样，但它确实有效，并且已被证明在几乎所有情况下都有效。您需要**安装 2007 Office System 驱动程序：数据连接组件**，此安装位于：http: [//www.microsoft.com/download/en/confirmation.aspx?id=23734](http://www.microsoft.com/download/en/confirmation.aspx?id=23734)。

        安装完成后，尝试运行您的应用程序，这应该可以解决问题。

*   如果您尝试运行**在 x64 或 AnyCPU 平台下构建的应用程序**，我建议您首先验证它在 x86 平台下是否按预期运行。如果它不在该 x86 平台下运行，请执行第一部分中的步骤并验证它是否按预期运行。

    我确实读到了包括 OLEDB 数据库驱动程序在内的 MS Access 驱动程序只能在 x86 平台下工作，并且在 x64 或 AnyCPU 平台下不兼容。但这似乎是不真实的。我在构建 x86 时验证了我的应用程序正在运行，然后我使用被动标志安装了 Access 数据库引擎。

    1.  首先在本地下载文件你可以在这里下载安装：http: [//www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)
    2.  使用带有“/被动”标志的命令提示符进行安装。 **在命令提示符下运行以下命令：'AccessDatabaseEngine_x64.exe /passive'**

    在这两个步骤之后，我设法在 x64 或 AnyCPU 构建配置中运行我的应用程序。这似乎解决了我的问题。

注意：步骤的顺序似乎有所不同，因此请遵循。

# java - 对象化 NoClassDefFoundError

> ID：10759366
> 
> 赞同：4
> 
> 时间：2012-05-25T18:08:42.847
> 
> 标签：java, google-app-engine, noclassdeffounderror, objectify

所以我刚刚使用 Google Eclipse 插件在 Eclipse Indigo 中创建了一个新的 GAE 项目，并且我只有以下 servlet：

```
public class TestServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");

        Objectify obj = ObjectifyService.begin();
        System.out.println(obj);
    }
} 
```

但是当我在浏览器上运行 servlet 时，我得到：

```
java.lang.NoClassDefFoundError: com/googlecode/objectify/ObjectifyService
    at com.fer.TestServlet.doGet(TestServlet.java:17)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.ClassNotFoundException: com.googlecode.objectify.ObjectifyService
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 32 more 
```

我正在使用 Obejctify 3.1，但也尝试使用 3.0 jar，我似乎无法理解为什么会出现该错误，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T02:05:53.720

您需要将 jar 文件放在 WEB-INF/lib/ 下，并确保在构建路径中包含该库。对于线索，NoClassDefFound 意味着该库在编译时可用，但在运行时不可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T15:04:00.723

*对我来说，通过在“war/WEB-INF/lib”*目录中添加 Guava 库来解决问题。您需要常规的**guava jar**，而不是 -gwt jar。

下载：[番石榴.jar](https://code.google.com/p/guava-libraries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:17:14.013

首先，使用 Objectify 4。

您需要包含对象化罐子。它们不是 appengine SDK 的一部分。

# asp.net - ASP.NET 模拟或计划任务

> ID：10759373
> 
> 赞同：0
> 
> 时间：2012-05-25T18:08:58.440
> 
> 标签：asp.net, vb.net

我必须在 SQL 中的用户表和活动目录中的用户组之间同步信息。例如，如果将用户输入到 SQL 表 A 中，则需要将其输入到组 A 中，如果用户从 SQL 表 A 中删除，则将其从组 A 中删除。

该应用程序是用 ASP.NET (VB) 编写的

我看到两个解决方案：

1) 每晚运行的计划任务，同步两者（用 VB.NET 编写）。2) 使用模拟，以便 ASP.NET 应用程序可以更新 Active Directory。在此解决方案中，必须对 Web.Config 文件进行加密。

我在网上阅读过文章说在 ASP.NET 中更新 AD 是不好的做法。这表明选项 1 是更好的解决方案。哪个是更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T21:53:50.163

我的团队考虑了同样的事情并采用了混合方法。Web 应用程序将 AD 更改请求放入数据库，域管理员有一个加载更改请求的桌面应用程序，如果他们单击“批准”，桌面应用程序会立即将更改应用到 AD。这对管理员来说需要做更多的工作，但不需要冒充，而且更安全，因为管理员会审查和批准每个更改请求，以减少发生邪恶或颠覆性事件的机会。

# ios - 以编程方式更改 UITableView 的大小

> ID：10759374
> 
> 赞同：11
> 
> 时间：2012-05-25T18:09:01.723
> 
> 标签：ios, ios5

我正在尝试在我的服务器上显示来自 mysql 数据库的数据。我正在将数据加载到表中。问题是，我不希望这些数据成为视图中的唯一内容。我希望表格与其他内容共享。理想情况下，我希望表格能够随着它们的单元数而增长和扩展。因此，如果有 3 个单元格，我希望它增长到适合所有 3 个。如果有 10 个，我希望它增长到适合所有 10 个。

看起来苹果在这方面做了很多。我注意到它的一个主要地方是在他们的联系人中，电话号码表根据有多少号码而增长和缩小。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-25T18:26:48.767

使用下面的代码，您的 tableview 大小决定其内容...

```
tableView.frame = CGRectMake(tableView.frame.origin.x, tableView.frame.origin.y, tableView.frame.size.width, tableView.contentSize.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:22:03.993

当您说“增长”时，我不确定您是指单元格的数量还是视图本身的实际尺寸。

如果是单元格计数，`tableView:numberOfRowsInSection:`请在表格视图的数据源中使用。如果您还希望更改视图大小，请计算一个新的矩形以使其占据并将其分配为其`frame`属性。

# string - 如何在 F90 中编写 to_upper() 或 to_lower() 函数？

> ID：10759375
> 
> 赞同：13
> 
> 时间：2012-05-25T18:09:08.900
> 
> 标签：string, function, fortran

如何编写将字符串转换为小写（或大写）的（英特尔）F90 函数？我想将一个字符数组传递给函数并让它返回一个字符数组，例如

```
program main
    implicit none

    character*32 :: origStr = "Hello, World!"
    character*32 :: newStr

    newStr = to_lower(origStr)
    write (*,*) newStr

end program main 
```

这样该程序输出`hello, world!`.

我一直从[RosettaCode](http://rosettacode.org/wiki/String_case#Fortran)`to_lower()`中的子例程开始，但我不知道如何将其编写为函数。

提前致谢！

PS——如果你能用不固定长度的字符串来做，加分！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T18:26:51.467

哇——尽管我搜索了一个多小时，但在发布此内容后，我立即在[此处](http://www.star.le.ac.uk/~cgp/fortran.html)找到了答案（在“Miscellaneous Fortran Hints and Tips”下）。

我使用的代码如下（对于to_upper）：

```
function to_upper(strIn) result(strOut)
! Adapted from http://www.star.le.ac.uk/~cgp/fortran.html (25 May 2012)
! Original author: Clive Page

     implicit none

     character(len=*), intent(in) :: strIn
     character(len=len(strIn)) :: strOut
     integer :: i,j

     do i = 1, len(strIn)
          j = iachar(strIn(i:i))
          if (j>= iachar("a") .and. j<=iachar("z") ) then
               strOut(i:i) = achar(iachar(strIn(i:i))-32)
          else
               strOut(i:i) = strIn(i:i)
          end if
     end do

end function to_upper 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-29T22:49:28.697

这是一个不依赖 ASCII 表示的

```
Pure Function to_upper (str) Result (string)

!   ==============================
!   Changes a string to upper case
!   ==============================

    Implicit None
    Character(*), Intent(In) :: str
    Character(LEN(str))      :: string

    Integer :: ic, i

    Character(26), Parameter :: cap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
    Character(26), Parameter :: low = 'abcdefghijklmnopqrstuvwxyz'

!   Capitalize each letter if it is lowecase
    string = str
    do i = 1, LEN_TRIM(str)
        ic = INDEX(low, str(i:i))
        if (ic > 0) string(i:i) = cap(ic:ic)
    end do

End Function to_upper 
```

您可以通过在循环中切换 low 和 cap 字符串轻松地将其更改为 to_lower。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-19T21:48:44.057

作为这段代码的原作者，我很高兴它有一些帮助。我曾经想知道为什么这些函数没有内置到 Fortran 中。我的猜测是它们只适用于一组相当有限的字母，即英语中使用的字母。如果您有几乎任何其他欧洲语言的文本，您将有带有重音符号的字符，然后将它们转换为大写或小写要困难得多。例如，将法语中的 e-grave 转换为大写通常仅显示为纯 E（重音丢失），但在 e-acute 中则不会。Fortran 的设计者一直试图提供适合多种语言的工具，而以多语言的方式进行大小写转换并非易事。至少这是我的猜测，为什么你必须自己做。

# python - 保存在 pyplot

> ID：10759376
> 
> 赞同：1
> 
> 时间：2012-05-25T18:09:08.993
> 
> 标签：python, matplotlib

我正在尝试制作一个自动构建和保存图形的主循环，但是我发现这是不可能的，我需要单独选择每个图形，打开/显示它，然后手动保存。有谁知道如何自动化这个过程。该程序读取一个 csv 文件并从参数中指定的行生成图形。下面是代码，我看不出哪里出错了。

```
import matplotlib.pyplot as plt
import sys, csv, math

def main():
     readAndChart('8to2Ant10Average', 0,1,2, '8to2Ant10: cumulative ethnic and political attacks')
     readAndChart('8to2Ant10Average',0,8,9, '8to2Ant10: ethnic and political attacks per turn')
     readAndChart('8to2Ant10Average',0,11,12, '8to2Ant10: ethnic and political attacks as a percentage of total attacks')

def roundUp(x,y):
    roun = int(math.ceil(x/y))    
    k = int(roun*y)
    return k

def readAndChart(readTitle, r1,r2,r3, graphTitle):
    time = []
    data1 = []
    data2 = []
    data3 = []
    data4 = []
    read = csv.reader(open(readTitle + '.csv', 'rb'))
    legend1 = ''
    legend2 = ''

    for row in read:
        if row[0] == 'turn':
            legend1 = row[r2] 
            legend2 = row[r3]

        if row[0] != 'turn':
            a = row[r1]            
            b = row[r2]
            c = row[r3]

            a = float(a); b = float(b); c = float(c)
            time.append(a)
            data1.append(b)
            data2.append(c)

    axese = []  
    mt = max(time)
    mph = max(data1)
    mpd = max(data2)

    axese.append(mph)
    axese.append(mpd)

    ax = max(axese)
    print ax
    if ax < 10 and ax > 1:
        k = roundUp(ax, 10.0)

        plt.axis([0,mt, 0, k])
    if ax < 100 and ax > 10:
        k = roundUp(ax, 10.0)
        plt.axis([0,mt, 0, k])
    if ax < 1000 and ax > 100:
        k = roundUp(ax, 100.0)
        plt.axis([0,mt, 0, k])
    if ax < 10000 and ax > 1000:
        k = roundUp(ax, 500.0)        
        plt.axis([0,mt, 0, k])

    plt.xlabel('generation')
    plt.ylabel('fequency')
    plt.title(graphTitle)
    plt.plot(time, data1, 'r' )
    plt.plot(time, data2, 'b')

    plt.legend((legend1, legend2),'upper center', shadow=True, fancybox=True)
    plt.savefig(graphTitle + '.png')

if __name__=='__main__': main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T19:53:21.053

**问题 1**：
您似乎在 Windows 上。
Windows 不允许您`:`在文件名中添加冒号 ( )。
参考支持以上声明：http: [//support.microsoft.com/kb/289627](http://support.microsoft.com/kb/289627)

即使您在 *nix 中，我也建议您不要在文件名中使用冒号，因为某些软件可能无法正确处理它。

快速修复：

```
plt.savefig(graphTitle.replace(':','') + '.png') 
```

**问题2**：
如评论中所说，保存后还需要清除图形。
例子：

```
plt.savefig(graphTitle.replace(':','') + '.png')
plt.clf()
plt.cla() 
```

或者也许只是：

```
plt.savefig(graphTitle.replace(':','') + '.png')
plt.close() # call w/ no args to close current figure 
```

# php - php会话变量

> ID：10759380
> 
> 赞同：0
> 
> 时间：2012-05-25T18:09:42.397
> 
> 标签：php, session, variables

我已经在 PHP 中编写了代码，我想在其中使用会话变量，这样当我单击提交按钮时，我将在登陆新页面后获得相同的会话变量。

但是会话变量在提交后显示为空。

下面是我的代码：

```
session_start();
$i=6;
$_SESSION['testing1']=$_SESSION['testing'];
$_SESSION['testing']=$i; 
```

但 $_SESSION['testing1'] 的值始终显示为空。

第一次它将是空的，但是在单击调用同一页面的提交按钮后，它不应该给出空值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:12:00.580

您正在设置`$_SESSION['testing']`之后`$_SESSION['testing1']=$_SESSION['testing'];`，因此在设置时它仍然是空的。切换两个语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:14:39.253

尝试这个

```
session_start();
$i=6;
$_SESSION['testing']=$i;
$_SESSION['testing1']=$_SESSION['testing']; 
```

# single-sign-on - SAML 2.0 断言的正确格式是什么？

> ID：10759381
> 
> 赞同：3
> 
> 时间：2012-05-25T18:09:45.670
> 
> 标签：single-sign-on, saml, saml-2.0, adfs, component-space

我们有一个客户尝试使用 ADFS 对我们的 Web 应用程序进行 SSO。我们正在使用 ComponentSpace SAML 2.0 库。发送给我们的断言如下所示：

```
<Assertion ID="_b8a24809-ab6b-4acd-ad6a-8bcb97bb1889" IssueInstant="2012-05-24T13:30:33.917Z" Version="2.0" xmlns="urn:oasis:names:tc:SAML:2.0:assertion">
    <Issuer>http://example.com/adfs/services/trust</Issuer>
    <Subject>
        <NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress">mail@example.com</NameID>
        <SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
            <SubjectConfirmationData NotOnOrAfter="2012-05-24T13:35:33.920Z" Recipient="https://example.com/default.aspx" />
        </SubjectConfirmation>
    </Subject>
    <Conditions NotBefore="2012-05-24T13:30:33.907Z" NotOnOrAfter="2012-05-24T14:30:33.907Z">
        <AudienceRestriction>
            <Audience>https://example.com</Audience>
        </AudienceRestriction>
    </Conditions>
    <AttributeStatement>
        <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress">
            <AttributeValue>mail@example.com</AttributeValue>
        </Attribute>
    </AttributeStatement>
    <AuthnStatement AuthnInstant="2012-05-24T13:30:33.756Z" SessionIndex="_b8a24809-ab6b-4acd-ad6a-8bcb97bb1889">
        <AuthnContext>
                <AuthnContextClassRef>urn:federation:authentication:windows</AuthnContextClassRef>
        </AuthnContext>
    </AuthnStatement>
</Assertion> 
```

ComponentSpace 库正在从 HTTP 帖子中提取完整的 SamlResponse，但它没有报告任何断言（即 samlResponse.GetAssertions().Count == 0）。如果我使用 ComponentSpace 示例，它可以工作，但我注意到我使用 ComponentSpace 库构建的所有元素都以“saml:”为前缀（我认为应该如此）。

ComponentSpace 库是否应该能够在没有 saml: 前缀的情况下找到断言，还是有办法配置 ADFS 以正确发送它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:24:27.293

正确的 SAML 响应应包含命名空间限定的元素

```
<saml2p:Response Destination="https://www.google.com/a/squaresquare.biz/acs" IssueInstant="2010-08-04T17:47:20.956Z" xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol" InResponseTo="djfnhepndikoonjjkeomgplmkjofobhdbdieihpa" Version="2.0" ID="_bd24b4a3514fd93800d2a43cafc98edb">
  <saml2:Issuer xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://my.ssodemo.url.demo.google.com/idp/shibboleth</saml2:Issuer>
  <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
    <ds:SignedInfo>
      <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
      <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"></ds:SignatureMethod>
      <ds:Reference URI="#_bd24b4a3514fd93800d2a43cafc98edb">
        <ds:Transforms>
          <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
          <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
            <ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="dssaml2saml2p"></ec:InclusiveNamespaces>
          </ds:Transform>
        </ds:Transforms>
        <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
        <ds:DigestValue>m/lUCS3nvfGuSJFKAtIz+ZrfxTU=</ds:DigestValue>
      </ds:Reference>
    </ds:SignedInfo>
    <ds:SignatureValue>PLdYgU9u5KirVrMHNSwYvk6fQ401dMbpuiDXpapKf0eOKC6pN3g7tnTEzvfOaXhkDNXVmGN+lXQ6iUDppWpdO2MbvPVZabOBPU1aAO+CWI53ciC0rYsxpFzQLLMC/7x9Wk7VFFmYEecxAJV+lTWvp8ZKXvwqZbhiTO/23EC0xconGhnwSvKjJWQuLnMMaFWSjDFYyzgsp34cR7aX/eqhhJyA/rr2uFdmgEdagAl+/17ppgHgthgK+PJtX16AALtsoXonv6uybRCX/YiDRvM1VsdwusVq5tXh9V+bTMZcgi/3Eh+Em/OZp0En8pqOngvL19U4LfqG0yJZjoDGkpHuhA==</ds:SignatureValue>
    <ds:KeyInfo>
      <ds:X509Data>
        <ds:X509Certificate>MIIDgjCCAmqgAwIBAgIVAKgIqbzZl7+0p2qjxJFVJs3DE/jxMA0GCSqGSIb3DQEBBQUAMDAxLjAsBgNVBAMTJWh0dHA6Ly93cGgtdWJpcTI3LmhvdC5jb3JwLmdvb2dsZS5jb20wHhcNMTAwNzIxMTcxNTA5WhcNMzAwNzIxMTcxNTA5WjAwMS4wLAYDVQQDEyVodHRwOi8vd3BoLXViaXEyNy5ob3QuY29ycC5nb29nbGUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAioQsJycRmjPjB2xlH0iSGn14lNbO/jIVgiGIlzZwlPkH1s2TTdwoTKKQBSe2s8AnJ4LliXlne/qWun3peYht0+RhejtB20L+Bw/I+iKQBGpHzgIKdkPGZnemWl9KqWQ/ZYKnY2x6qMEBmhUfYZcawzs26em5a+iaYlrTJNVEZ+QwWvg2/EOJvJNyBkSfXyxia5eAHV38Uy7xn0G5Zc9ge4ckCYj6b8a/UxpPJM61KztzY5coDwReQsDBq+DciGALJPbFk4783TW...etc.etc</ds:X509Certificate>
      </ds:X509Data>
    </ds:KeyInfo>
  </ds:Signature>
  <saml2p:Status>
    <saml2p:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"></saml2p:StatusCode>
  </saml2p:Status>
  <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" Version="2.0" IssueInstant="2010-08-04T17:47:20.956Z" ID="_73fe28bcbb68e93df954d8e2f25097b1">
    <saml2:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">http://my.ssodemo.url.demo.google.com/idp/shibboleth</saml2:Issuer>
    <saml2:Subject>
      <saml2:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">my_username</saml2:NameID>
      <saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
        <saml2:SubjectConfirmationData NotOnOrAfter="2010-08-04T17:52:20.956Z" InResponseTo="djfnhepndikoonjjkeomgplmkjofobhdbdieihpa" Recipient="https://www.google.com/a/squaresquare.biz/acs" Address="172.24.6.38"></saml2:SubjectConfirmationData>
      </saml2:SubjectConfirmation>
    </saml2:Subject>
    <saml2:Conditions NotOnOrAfter="2010-08-04T17:52:20.956Z" NotBefore="2010-08-04T17:47:20.956Z">
      <saml2:AudienceRestriction>
        <saml2:Audience>google.com</saml2:Audience>
      </saml2:AudienceRestriction>
    </saml2:Conditions>
    <saml2:AuthnStatement SessionIndex="f306dd2bff4e9b3ba9218bd70fbaa87404d38a4c79547ac1edc9436a9f222213" AuthnInstant="2010-08-04T17:47:20.953Z">
      <saml2:SubjectLocality Address="172.24.6.38"></saml2:SubjectLocality>
      <saml2:AuthnContext>
        <saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</saml2:AuthnContextClassRef>
      </saml2:AuthnContext>
    </saml2:AuthnStatement>
  </saml2:Assertion>
</saml2p:Response> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T15:09:43.423

命名空间限定是可选的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T19:43:40.593

事实证明，上述 XML 是有效的（ADFS 将命名空间添加到整个 XML 但不是每个元素）。问题是 ComponentSpace 库有不同的方法来获取签名或加密断言，我只是调用通用的 GetAssertions。ADFS 正在生成签名断言，我需要调用另一个函数。

这是我们最终得到的代码：

```
IList<EncryptedAssertion> encryptedAssertions = samlResponse.GetEncryptedAssertions();
if (encryptedAssertions.Count > 0 && x509Certificate != null) {

    // Decrypt the assertion
    EncryptedAssertion encryptedAssertion = encryptedAssertions[0];
    XmlElement decryptedElement = encryptedAssertion.DecryptToXml(x509Certificate, null);
    LogMessage("Decrypted assertion: " + decryptedElement.OuterXml);

    // Then verify the signature.
    VerifySignature(x509Certificate, decryptedElement);
    samlAssertion = new SAMLAssertion(decryptedElement);
} else {

    if (samlResponse.GetSignedAssertions().Count > 0) {
        // Get the signed assertion and verify the signature.
        XmlElement signedAssertionElement = samlResponse.GetSignedAssertions()[0];
        LogMessage("Signed assertion: " + signedAssertionElement.OuterXml);

        VerifySignature(x509Certificate, signedAssertionElement);
        samlAssertion = new SAMLAssertion(signedAssertionElement);
    } else {
        // Assertion is not encrypted or signed.
        if (samlResponse.GetAssertions().Count > 0) {
            samlAssertion = samlResponse.GetAssertions()[0];
            LogMessage("Assertion: " + samlAssertion.ToXml().OuterXml);
        } else {
            LogFatalError("No assertions in response");
        }
    }
} 
```

# jquery - jQuery嵌套可排序，难以排序

> ID：10759386
> 
> 赞同：1
> 
> 时间：2012-05-25T18:10:08.900
> 
> 标签：jquery, jquery-ui-sortable, nested-sortable

我正在使用以下代码使用 jQuery 创建嵌套可排序：

[http://jsfiddle.net/yPQZx/65/](http://jsfiddle.net/yPQZx/65/)

它可以工作，除了一件有点麻烦的事情。

以下是要采取的步骤：

1.  尝试将“Item 3”拖到“Item 2”下方，使“Item 3”成为“Item 2”的子项。

2.  现在尝试将“项目 3”移回原来的位置。

你会发现这很难做到。

我想知道是否有解决此问题的方法。因为现在它不是真正的用户友好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:03:34.477

我在可排序方面遇到了类似的问题。为了帮助用户放置项目，我通常会在开始拖动时创建的占位符添加额外的高度。

对于您的 jsfiddle，您将 ui-state-highlight 类添加到占位符。只需将以下内容添加到您的样式中并尝试一下：

```
.ui-state-highlight {
  height: 2em;
} 
```

我试过了，这样似乎效果更好一些。您还可以尝试通过传递 axis: 'y' 来将可排序限制到 'y' 轴，以查看您是否喜欢这种行为。

希望有帮助！

# javascript - 我如何调用 jquery 变量？

> ID：10759388
> 
> 赞同：0
> 
> 时间：2012-05-25T18:10:16.233
> 
> 标签：javascript, jquery, function, variables

我敢肯定，这很简单，但我是 jquery 的新手，有点卡住了。

我编写了这个完美运行的代码：

```
function engageMaps(){
  $(".destinations #cancun").hover(
    function () {
      $(".image_map #cancunPin").addClass("active");
    },
    function () {
      $(".image_map #cancunPin").removeClass("active");
    }
  );
}; 
```

然后我尝试将项目分解为变量以使其更灵活，但无法使其工作。我写了这个：

```
function engageMaps(){
  var $destination = $(".destinations #cancun");
  var pin = $(".image_map #cancunPin");
  $destination.hover(
    function () {
      $pin.addClass("active");
    },
    function () {
      $pin.removeClass("active");
    }
}; 
```

这应该与第一个代码块完全相同。非常感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T18:11:55.140

你失踪`);`了`.hover`..

```
$destination.hover(
   function () {
     $pin.addClass("active");
   },
   function () {
     $pin.removeClass("active");
   }
); 
```

你也错过了`$`。见下文。

```
var $pin = $(".image_map #cancunPin"); 
```

**完整代码：**

```
function engageMaps(){
  var $destination = $(".destinations #cancun");
  var $pin = $(".image_map #cancunPin"); //Added $ to pin var name as that is how it is referenced below

  $destination.hover(
    function () {
      $pin.addClass("active");
    },
    function () {
      $pin.removeClass("active");
    }
   ); //this was missing
} //removed semicolon as it is not necessary 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T18:12:03.300

```
 v---------- You forgot this
var $pin = $(".image_map #cancunPin"); 
```

而且你也失踪`);`了`.hover`。

所以，最终版本的代码：

```
function engageMaps() {
    var $destination = $(".destinations #cancun");
    var $pin = $(".image_map #cancunPin");
    $destination.hover(
        function() {
            $pin.addClass("active");
        }, function() {
            $pin.removeClass("active");
        }
    );
};​ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T18:12:29.190

```
$destination.hover(
    function () {
      $pin.toggleClass("active");
    }); 
```

所以完整的代码是：

```
function engageMaps(){
  var $destination = $(".destinations #cancun");
  var $pin = $(".image_map #cancunPin"); // you use pin instead of $pin
  $destination.hover(
    function () {
      $pin.toggleClass("active");
  });
}; 
```

# java - 编写一个方法来查找两个 BST 之间的共同元素，并将它们插入到第 3 个 BST 中

> ID：10759390
> 
> 赞同：1
> 
> 时间：2012-05-25T18:10:31.660
> 
> 标签：java, binary-search-tree

我有一个插入方法和一个搜索方法，我正在考虑一种方法来遍历二叉搜索树并使用像获取节点这样的方法然后在另一个二叉搜索树上搜索它，如果它实现了，那么我插入它那个元素，但问题是我无法想出一种基于索引获取节点的方法，因为它不同于linkedList，例如，我想不出一种方法来让节点开始；总而言之，我实际上没有开始解决这个问题的正确方法。

```
public class BinarySearchTree extends BinaryTree {
    //default constructor
    //Postcondition: root = null;

    public BinarySearchTree() {
        super();
    }

    //copy constructor
    public BinarySearchTree(BinarySearchTree otherTree) {
        super(otherTree);
    }
public class BinaryTree {

    //Definition of the node
    protected class BinaryTreeNode {

        DataElement info;
        BinaryTreeNode llink;

        public DataElement getInfo() {
            return info;
        }

        public BinaryTreeNode getLlink() {
            return llink;
        }

        public BinaryTreeNode getRlink() {
            return rlink;
        }
        BinaryTreeNode rlink;
    }
    protected BinaryTreeNode root;

    //default constructor
    //Postcondition: root = null;
    public BinaryTree() {
        root = null;
    }

    //copy constructor
    public BinaryTree(BinaryTree otherTree) {
        if (otherTree.root == null) //otherTree is empty
        {
            root = null;
        } else {
            root = copy(otherTree.root);
        }
    }

    public BinaryTreeNode getRoot() {
        return root;
    }
public boolean search(DataElement searchItem) {
        BinaryTreeNode current;
        boolean found = false;

        current = root;
        while (current != null && !found) {
            if (current.info.equals(searchItem)) {
                found = true;
            } else if (current.info.compareTo(searchItem) > 0) {
                current = current.llink;
            } else {
                current = current.rlink;
            }
        }

        return found;
    }

    public int countEven() {

            return countEven(root);

    }
public void insert(DataElement insertItem) {
        BinaryTreeNode current;
        BinaryTreeNode trailCurrent = null;
        BinaryTreeNode newNode;
        newNode = new BinaryTreeNode();
        newNode.info = insertItem.getCopy();
        newNode.llink = null;
        newNode.rlink = null;
        if (root == null) {
            root = newNode;
        } else {
            current = root;
            while (current != null) {
                trailCurrent = current;
                if (current.info.equals(insertItem)) {
                    System.out.println("The insert item is already in" + "the list -- duplicates are" + "not allowed.");
                    return;
                } else if (current.info.compareTo(insertItem) > 0) {
                    current = current.llink;
                } else {
                    current = current.rlink;
                }
            }

            if (trailCurrent.info.compareTo(insertItem) > 0) {
                trailCurrent.llink = newNode;
            } else {
                trailCurrent.rlink = newNode;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:37:21.227

向下遍历一棵树的左端，将其与另一棵树的根节点进行比较。如果发现相等，请将其插入第三棵树。如果不相等，则检查它是否小于或大于第二棵树的根。如果小于，则遍历第二棵树的左孩子并再次调用您的搜索方法，否则，遍历第二棵树的右孩子并再次调用您的搜索方法。然后用您选择的第一棵树的相对起始节点的右节点重复整个过程，并再次调用搜索方法。重复该过程时，继续向上移动第一棵树。

这是一个示例代码（请记住，您尚未提供有关树的任何详细信息）：

```
void search(Node node1, Node root2){
    if(root2 == null)
        return;
    if(node1.data == root2.data){
        //copy to your third tree
        return; 
    }
    else{
        if(node1.data < root2.data){
            root2 = root2.left;
            search(node1, root2);
        }
        else{
            root2 = root2.right;
            search(node1, root2);
        }
    }
}

void common(Node root1, Node root2){
    if(root1 != null){
        common(root1.left, root2);
        search(root1, root2);
        common(root1.right, root2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:03:44.060

我假设您需要修改`BinarySearchTree`该类，因此以下内容是根据该假设编写的。

您可以通过首先调用`getRoot()`将返回树的根 (a ) 来遍历树，然后分别通过调用和`BinaryTreeNode`访问节点的左右子节点。从每个节点，您可以通过在另一棵树中搜索（通过调用第二棵树上的方法）来获取其值。`getLLink()``getRLink()``getInfo``search()`

*注意*：实际上，您只能从方法中调用节点上的方法，`BinarySearchTree`因为访问权限`BinaryTreeNode`仅限于`BinaryTree`和派生自它的类（`BinarySearchTree`符合条件）

# java - Java AES 加解密

> ID：10759392
> 
> 赞同：23
> 
> 时间：2012-05-25T18:11:01.810
> 
> 标签：java, aes, encryption

我想使用 16 字节密钥的 128 位 AES 加密来加密和解密密码。解密值时`javax.crypto.BadPaddingException`出现错误。解密时我错过了什么吗？

```
public static void main(String args[]) {
    Test t = new Test();
    String encrypt = new String(t.encrypt("mypassword"));
    System.out.println("decrypted value:" + t.decrypt("ThisIsASecretKey", encrypt));
}

public String encrypt(String value) {
    try {
        byte[] raw = new byte[]{'T', 'h', 'i', 's', 'I', 's', 'A', 'S', 'e', 'c', 'r', 'e', 't', 'K', 'e', 'y'};
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(value.getBytes());
        System.out.println("encrypted string:" + (new String(encrypted)));
        return new String(skeySpec.getEncoded());
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalBlockSizeException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (BadPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InvalidKeyException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;
}

public String decrypt(String key, String encrypted) {
    try {
        SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(skeySpec.getEncoded(), "AES"));
        //getting error here
        byte[] original = cipher.doFinal(encrypted.getBytes());
        return new String(original);
    } catch (IllegalBlockSizeException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (BadPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InvalidKeyException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;
} 
```

错误信息

```
encrypted string:�Bj�.�Ntk�F�`�
encrypted key:ThisIsASecretKey
decrypted value:null
May 25, 2012 12:54:02 PM bean.Test decrypt
SEVERE: null
javax.crypto.BadPaddingException: Given final block not properly padded
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at bean.Test.decrypt(Test.java:55)
at bean.Test.main(Test.java:24) 
```

**最后，我使用基于@QuantumMechanic 答案的以下解决方案**

```
public class Test {

public String encryptionKey;

public static void main(String args[]) {
    Test t = new Test();
    String encrypt = t.encrypt("mypassword");
    System.out.println("decrypted value:" + t.decrypt(t.encryptionKey, encrypt));
}

public String encrypt(String value) {
    try {
        // Get the KeyGenerator
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        kgen.init(256);
        // Generate the secret key specs.
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        String key = new Base64().encodeAsString(raw);
        this.encryptionKey = key;
        System.out.println("------------------Key------------------");
        System.out.println(key);
        System.out.println("--------------End of Key---------------");
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        String encrypt = (new Base64()).encodeAsString(cipher.doFinal(value.getBytes()));
        System.out.println("encrypted string:" + encrypt);
        return encrypt;
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalBlockSizeException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (BadPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InvalidKeyException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;
}

public String decrypt(String key, String encrypted) {
    try {
        Key k = new SecretKeySpec(Base64.getDecoder().decode(key), "AES");
        Cipher c = Cipher.getInstance("AES");
        c.init(Cipher.DECRYPT_MODE, k);
        byte[] decodedValue = Base64.getDecoder().decode(encrypted);
        byte[] decValue = c.doFinal(decodedValue);
        String decryptedValue = new String(decValue);
        return decryptedValue;
    } catch (IllegalBlockSizeException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (BadPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InvalidKeyException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchPaddingException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-25T18:13:09.320

如果对于分组密码，您不打算使用`Cipher`包含填充方案的转换，则需要将明文中的字节数设为密码块大小的整数倍。

`Cipher`因此，要么将明文填充为 16 字节的倍数（这是 AES 块大小），要么在创建对象时指定填充方案。例如，您可以使用：

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding"); 
```

除非您有充分的理由不这样做，否则请使用已经是 JCE 实现的一部分的填充方案。他们已经考虑到了一些你必须自己意识到和处理的微妙之处和极端情况。

* * *

好的，你的第二个问题是你`String`用来保存密文。

一般来说，

```
String s = new String(someBytes);
byte[] retrievedBytes = s.getBytes(); 
```

不会**有**`someBytes`和是`retrievedBytes`相同的。

如果您希望/必须将密文保存在 a 中`String`，请先对密文字节进行 base64 编码，然后`String`从 base64 编码的字节构造 。然后，当您解密时，您将从`getBytes()`中获取 base64 编码的字节`String`，然后对它们进行 base64 解码以获得真正的密文，然后对其进行解密。

这个问题的原因是大多数（全部？）字符编码不能将任意字节映射到有效字符。因此，当您`String`从密文创建您的时，`String`构造函数（它应用字符编码将字节转换为字符）本质上必须丢弃一些字节，因为它无法理解它们。因此，当您从字符串中获取字节时，它们与您放入字符串中的字节不同。

在 Java 中（以及一般的现代编程中），你不能假设一个字符 = 一个字节，除非你绝对知道你正在处理 ASCII。这就是为什么如果你想从任意字节构建字符串，你需要使用 base64（或类似的东西）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-17T09:52:29.300

```
import javax.crypto.*;    
import java.security.*;  
public class Java {

private static SecretKey key = null;         
   private static Cipher cipher = null; 

   public static void main(String[] args) throws Exception
   {

      Security.addProvider(new com.sun.crypto.provider.SunJCE());

      KeyGenerator keyGenerator =
         KeyGenerator.getInstance("DESede");
      keyGenerator.init(168);
      SecretKey secretKey = keyGenerator.generateKey();
      cipher = Cipher.getInstance("DESede");

      String clearText = "I am an Employee";
      byte[] clearTextBytes = clearText.getBytes("UTF8");

      cipher.init(Cipher.ENCRYPT_MODE, secretKey);
      byte[] cipherBytes = cipher.doFinal(clearTextBytes);
      String cipherText = new String(cipherBytes, "UTF8");

      cipher.init(Cipher.DECRYPT_MODE, secretKey);
      byte[] decryptedBytes = cipher.doFinal(cipherBytes);
      String decryptedText = new String(decryptedBytes, "UTF8");

      System.out.println("Before encryption: " + clearText);
      System.out.println("After encryption: " + cipherText);
      System.out.println("After decryption: " + decryptedText);
   }
}

// Output

/*
Before encryption: I am an Employee  
After encryption: }?ｽ?ｽj6?ｽm?ｽZyc?ｽ?ｽ*?ｽ?ｽl#l?ｽdV  
After decryption: I am an Employee  
*/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-13T23:27:39.243

这是上面提到的实现：

```
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.binary.StringUtils;

try
{
    String passEncrypt = "my password";
    byte[] saltEncrypt = "choose a better salt".getBytes();
    int iterationsEncrypt = 10000;
    SecretKeyFactory factoryKeyEncrypt = SecretKeyFactory
            .getInstance("PBKDF2WithHmacSHA1");
    SecretKey tmp = factoryKeyEncrypt.generateSecret(new PBEKeySpec(
            passEncrypt.toCharArray(), saltEncrypt, iterationsEncrypt,
            128));
    SecretKeySpec encryptKey = new SecretKeySpec(tmp.getEncoded(),
            "AES");

    Cipher aesCipherEncrypt = Cipher
            .getInstance("AES/ECB/PKCS5Padding");
    aesCipherEncrypt.init(Cipher.ENCRYPT_MODE, encryptKey);

    // get the bytes
    byte[] bytes = StringUtils.getBytesUtf8(toEncodeEncryptString);

    // encrypt the bytes
    byte[] encryptBytes = aesCipherEncrypt.doFinal(bytes);

    // encode 64 the encrypted bytes
    String encoded = Base64.encodeBase64URLSafeString(encryptBytes);

    System.out.println("e: " + encoded);

    // assume some transport happens here

    // create a new string, to make sure we are not pointing to the same
    // string as the one above
    String encodedEncrypted = new String(encoded);

    //we recreate the same salt/encrypt as if its a separate system
    String passDecrypt = "my password";
    byte[] saltDecrypt = "choose a better salt".getBytes();
    int iterationsDecrypt = 10000;
    SecretKeyFactory factoryKeyDecrypt = SecretKeyFactory
            .getInstance("PBKDF2WithHmacSHA1");
    SecretKey tmp2 = factoryKeyDecrypt.generateSecret(new PBEKeySpec(passDecrypt
            .toCharArray(), saltDecrypt, iterationsDecrypt, 128));
    SecretKeySpec decryptKey = new SecretKeySpec(tmp2.getEncoded(), "AES");

    Cipher aesCipherDecrypt = Cipher.getInstance("AES/ECB/PKCS5Padding");
            aesCipherDecrypt.init(Cipher.DECRYPT_MODE, decryptKey);

    //basically we reverse the process we did earlier

    // get the bytes from encodedEncrypted string
    byte[] e64bytes = StringUtils.getBytesUtf8(encodedEncrypted);

    // decode 64, now the bytes should be encrypted
    byte[] eBytes = Base64.decodeBase64(e64bytes);

    // decrypt the bytes
    byte[] cipherDecode = aesCipherDecrypt.doFinal(eBytes);

    // to string
    String decoded = StringUtils.newStringUtf8(cipherDecode);

    System.out.println("d: " + decoded);

}
catch (Exception e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T18:17:17.510

试试这个，一个更简单的解决方案。

```
byte[] salt = "ThisIsASecretKey".getBytes();
Key key = new SecretKeySpec(salt, 0, 16, "AES");

密码密码 = Cipher.getInstance("AES");

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-15T10:56:08.433

您声明要加密/解密密码。我不确定您的具体用例是什么，但通常，密码不会以可以解密的形式存储。一般做法是对密码加盐并使用适当强大的单向哈希（例如 PBKDF2）。

请查看以下链接以获取更多信息。

[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T02:58:10.147

在**不抛出 Java**和使用 Java生成初始化向量的情况下*加密/解密*巨大视频的完整示例。还描述了将密钥字节存储到数据库，然后从这些字节重建相同的密钥。 **`OutOfMemoryException``SecureRandom`**

 **[https://stackoverflow.com/a/18892960/185022](https://stackoverflow.com/a/18892960/185022)**

# javascript - 来自 ASP.NET 控制器的 JSON 对象以查看

> ID：10759393
> 
> 赞同：1
> 
> 时间：2012-05-25T18:11:09.430
> 
> 标签：javascript, asp.net-mvc, json

我有一种情况，当访问网页时，控制器操作会运行，该操作会根据用户选择检索该页面的数据。我试图将数据作为 JSON 对象发送回页面，但是，数据在 HTML 页面中作为一个大字符串打开。简而言之，控制器操作类似于以下代码段：

```
Public JsonResult MyMethod(string userSelection)
{

    string userData = (string) Data;
    return Json(userData, “text”, JsonRequestBehavior.AllowGet);
} 
```

我首先尝试使用 JQuery`$.getJson()`方法，但我认为这是错误的，因为我认为它会再次调用数据的操作方法，这不是我想要做的。我想要的是访问 JavaScript 代码中的 JSON 对象，这样我就可以使用属性数据来填充网页上的字段。基本问题是我必须在我的 JavaScript 中做什么才能在页面首次呈现时接收 JSON 对象？如果我遗漏了一些基本的东西，我深表歉意；这是我的第一次尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:07:09.640

今天我仍然没有运气，但是当我下班时，我想出了一个步行到我的车的策略。用户在进入我无法弄清楚如何使用 JsonResult 的页面之前从显示列表的页面中进行选择。部分问题是用户选择包含一个链接，该链接调用返回 JsonResult 的控制器/操作，这与在我要使用 JsonResult 的页面中使用 $.getJson() 冲突。所以这是我的策略：当用户做出将他们带到（有问题的）页面的选择时，我将调用一个严格使用（ASP）ViewData 的控制器/动作，并使用 ViewData 最初呈现该页面。进入页面后，用户可以更改选择——我将使用一个使用 $ 的 JavaScript 事件来处理它。getJason() 调用与 (ASP) JsonResult 一起使用的不同控制器/操作方法。在我尝试了这个策略之后，我会将我的结果发布给任何感兴趣的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:14:43.733

你`parseJSON`不想`getJSON`

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

编辑 - 哦，等等，您将浏览器指向`JsonResult`就好像它是`ActionResult`? 那是行不通的。

渲染一个正确的视图，并使用`getJSON`来调用`JsonResult`动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:15:33.470

`getJSON`就是[你](http://api.jquery.com/jQuery.getJSON/)要找的。在 DOM 完成加载后执行的 DOM 就绪事件上调用它。

```
$(function(){
 //This code will be executed on the DOM ready ( when the page is loaded)

  $.getJSON("YourControllerName/MyMethod?userSelection=someValue",function(data){

      alert(data.FirstName);     
      alert(data.AnotherPropertyName);    

   });
}); 
```

`getJSON`是 jQuery`ajax`方法的简写，数据类型设置为`json`

假设您正在重新调整的 JSON 数据是这样的

```
{
    "FirstName": "Scott",
    "AnotherPropertyName": "SomeValue"
} 
```

要返回上述数据，请更改您的 Action 方法，如下所示

```
public JsonResult MyMethod(string userSelection)
{
  var result=new { FirstName="Scott", AnotherPropertyName="Great"};
  return Json(result,JsonRequestBehavior.AllowGet);
} 
```

# ios - Cocos2d V1 更新 Box2d 到 2.2.1

> ID：10759395
> 
> 赞同：1
> 
> 时间：2012-05-25T18:11:16.187
> 
> 标签：ios, xcode, cocos2d-iphone, box2d

我一直在使用捆绑的 Cocos2d V1 和 Box2d。我正在尝试更新到 Box2d 的较新版本，即 Box2d V2.2.1。

我已将 Gles-Render.h 和 Gles-Render.mm 更新到最新版本，我做了一些更改，消除了除一个以外的所有错误。

```
debugDraw = new b2Draw();
world->SetDebugDraw(debugDraw);
debugDraw->SetFlags(b2Draw::e_shapeBit); 
```

我得到错误：

```
ERROR: allocating an object of abstract type 'b2Draw' 
```

我已经尝试解决这个问题两天了，但没有成功。

任何机构对此有解决方案吗？

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:02:34.013

也许您忘记将 b2Draw 类添加到您的项目中。此外，我认为您不应该使用 b2Draw，而是使用 GLESDebugDraw。至少我使用的项目使用 GLES-Render 文件，其中定义了 GLESDebugDraw 类，该类派生自 b2Draw（我相信它在 Box2D v2.1 中被命名为 b2DebugDraw）。

```
class GLESDebugDraw : public b2Draw 
```

如果有疑问，请使用其他人的 GLES-Render 文件。您可以从 Kobold2D 获得使用 Box2D v2.2 的工具：

[GLES-Render.h](https://github.com/kobold2d/Kobold2D/blob/master/Kobold2D/_Physics-Box2D-Template_/Projectfiles/GLES-Render.h)
[GLES-Render.mm](https://github.com/kobold2d/Kobold2D/blob/master/Kobold2D/_Physics-Box2D-Template_/Projectfiles/GLES-Render.mm)

# java - 基本的 XML 到 HTML 转换

> ID：10759397
> 
> 赞同：2
> 
> 时间：2012-05-25T18:11:23.010
> 
> 标签：java, html, xml, xslt

我有一个希望调试的简单问题。使用来自书籍和网站的代码，我正在尝试将我的 XML 文件转换为 HTML 文件。但是，我没有得到任何输出。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
 <xsl:template match="/">
        <xsl:apply-templates select="greeting"/>
    </xsl:template>

<xsl:template match="greeting">
    <html>
        <head>
            <title>hellowWorld.xsl</title>
        </head>
        <body>
            <h1>
                <xsl:value-of select="."/>
            </h1>
        </body>
    </html>
</xsl:template> 
```

. . . 是 XSL，这里是 XML：

```
<root>
<greeting>
        Hello, world!
    </greeting>
</root> 
```

和代码：

```
private static void XMLtoHTML(String xmlPath, String xslPath, String htmlPath)
{
try 
{
TransformerFactory tFactory = TransformerFactory.newInstance();

Transformer transformer =
  tFactory.newTransformer
     (new javax.xml.transform.stream.StreamSource
        (xslPath));

transformer.transform
  (new javax.xml.transform.stream.StreamSource
        (xmlPath),
   new javax.xml.transform.stream.StreamResult
        ( new FileOutputStream(htmlPath)));
}
catch (Exception e) 
    {
        e.printStackTrace( );
} 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:06:36.803

更改`<xsl:apply-templates select="greeting"/>`为`<xsl:apply-templates select="root/greeting"/>`。

# java - 是否可以取一个字符串并将其放入 System.in 中？

> ID：10759399
> 
> 赞同：0
> 
> 时间：2012-05-25T18:11:36.810
> 
> 标签：java, string, input, io, port

我想知道是否有办法采取`String`- 让我们说：

```
String str = "blabla"; 
```

并做：

```
System.in.setText(str); 
```

我知道这不起作用 - 我想知道是否有办法做到这一点。然后发送相同的字符串。就像您在控制台中写入并按 一样`Enter`。

它是一个带有服务器套接字的程序，我试图`String`通过一个端口发送一个，以便其他应用程序知道如何处理它。

**编辑：** 当用户在 Textfield 中写入时，我找到了一种将输入流重定向到 Textfield 的方法，它通过 System.in 发送它。

```
import java.io.*;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class TextfieldInputStream extends InputStream implements DocumentListener {

    private JTextField tf;
    private String str = null;
    private int pos = 0;

    public TextfieldInputStream(JTextField jtf) {
        tf = jtf;
    }

    @Override
    public int read() {
        //test if the available input has reached its end
        //and the EOS should be returned 
        if(str != null && pos == str.length()){
            str = null;
            //this is supposed to return -1 on "end of stream"
            //but I'm having a hard time locating the constant
            return java.io.StreamTokenizer.TT_EOF;
        }
        //no input available, block until more is available because that's
        //the behavior specified in the Javadocs
        while (str == null || pos >= str.length()) {
            try {
                //according to the docs read() should block until new input is available
                synchronized (this) {
                    this.wait();
                }
            } catch (InterruptedException ex) {
                ex.printStackTrace();
            }
        }
        //read an additional character, return it and increment the index
        return str.charAt(pos++);
    }

    public void changedUpdate(DocumentEvent e) {
        // TODO Auto-generated method stub
    }

    public void insertUpdate(DocumentEvent e){
        str = tf.getText() + "\n";
        pos = 0;
        synchronized (this) {
            //maybe this should only notify() as multiple threads may
            //be waiting for input and they would now race for input
            this.notifyAll();
        }
    }

    public void removeUpdate(DocumentEvent e){
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:20:40.737

```
package test.t100.t007;

import java.io.ByteArrayInputStream;
import java.util.Scanner;

public class SystemIn {

    public static void main(String[] args) {
        String str = "blabla";
        ByteArrayInputStream bais = new ByteArrayInputStream(str.getBytes());
        System.setIn(bais);
        // We might use the ByteArrayInputStream here, but going with System.in..
        Scanner scanner = new Scanner(System.in);
        String input = scanner.next();
        System.out.println(input);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T18:21:30.237

您可以使用一`PipedInputStream/PipedOutputStream`对。然后你可以设置`PipedInputStream`as `System.in`using`System.setIn()`方法。最后，您可以写信给您`PipedOutputStream`并在 System.in 中获得结果。

# asp.net-mvc - 如何使用可选的查询字符串参数测试 MVC 路由

> ID：10759402
> 
> 赞同：4
> 
> 时间：2012-05-25T18:11:51.793
> 
> 标签：asp.net-mvc, mvccontrib, attributerouting

我有这个控制器方法：

```
[GET("/whatever/list")]
public ActionResult Index(string sortby, string order) 
```

我正在尝试使用 MvcContrib 路由测试对其进行测试：

```
"~/whatever/list".ShouldMapTo<MyController>(c => c.Index(string.Empty, string.Empty));
"~/whatever/list?sortby=type&order=desc".ShouldMapTo<MyController>(c => c.Index("type", "desc")); 
```

但是，它返回此错误。

> 失败：MvcContrib.TestHelper.AssertionException：参数“sortby”的值不匹配：预期为“”但为“”；在名为“sortby”的路由上下文操作参数中找不到值 - 您的匹配路由是否包含名为“sortby”的标记？

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:27:09.437

根据断言消息（`expected '' but was '';`因此其中一个值是`null`或`string.Empty`在断言中）您的第一个测试失败，因为您使用`string.Empty`但字符串的默认值是`null`

更改要使用的断言`null`，它应该可以：

```
"~/whatever/list".ShouldMapTo<MyController>(c => c.Index(null, null)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T13:39:59.170

我用过

```
var route = "~/whatever/list".WithMethod(HttpVerbs.Get);
route.Values.Add("sortby", "type");
route.Values.Add("order", "desc");
route.ShouldMapTo<MyController>(c => c.Index("type", "desc")); 
```

# php - PHP：今天仍然适用的基本消毒？

> ID：10759409
> 
> 赞同：0
> 
> 时间：2012-05-25T18:12:04.747
> 
> 标签：php

几年前，我曾经在我的脚本之上做类似的事情：

```
ini_set('magic_quotes_runtime', 0);
ini_set('magic_quotes_sybase', 0);
ini_set('url_rewriter.tags', '');
ini_set('session.use_trans_sid', 0);

function clean_input ($arr)
{
    if (!get_magic_quotes_gpc())
        $arr = array_map('addslashes', $arr);

    return $arr;
}

$_GET = clean_input($_GET);
$_POST = clean_input($_POST);
$_COOKIE = clean_input($_COOKIE);
$_REQUEST = clean_input($_REQUEST); 
```

至少在 PHP 5.2 中这仍然适用吗？

此外，我们今天需要的最低限度的基本卫生用品是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:16:10.610

如果您使用的是 mysql 数据库，我会说使用 mysql_real_escape_string() 来清理用户输入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:20:49.220

`mysql_real_escape_string()`在任何进入您的数据库的东西上。

`htmlentities()`在退出数据库的任何内容上。

与 CodeIgniter 捆绑的 Security 类非常好。如果您好奇什么是生产就绪的，我建议您仔细阅读。

# jquery - jQuery在图像之间切换

> ID：10759410
> 
> 赞同：0
> 
> 时间：2012-05-25T18:12:12.940
> 
> 标签：jquery, html, css, fadein, fadeout

我在这里有一个小脚本可以在 2 个图像之间切换...它的工作原理就像您选择第一个它保持选中状态，如果您选择第 2 个 - 第一个正在淡出并且正在选择第 2 个...就像那样简单。

```
$(document).ready(function () {
    $(".theImage img").click(function () {
        var a = $(this).parent().attr("id") == "product-holder1" ? "product-holder2" : "product-holder1";
        console.log(a);
        $(this).fadeOut();
        $("#" + a + " img").fadeIn()
    })
}) 
```

我的问题是我不知道如何将它用于超过 2 张图像？假设我有 id“product-holder3”，也许还有“product-holder4”，那么我该如何在那个 jquery 代码中编写它，所以它仍然在选择哪个之间切换？

**HTML：**

```
<div id="product-holder1" class="theImage">
  <img src="img/10-normal.png" />
</div>
<div id="product-holder2" class="theImage">
  <img src="img/25-normal.png" />
</div>
    <div id="product-holder3" class="theImage">
  <img src="img/50-normal.png" />
</div> 
```

**CSS**

```
#product-holder1 {
    background: url("img/10-selected.png");
    background-repeat: no-repeat;
    height: 182px;
    width: 195px;
    position: absolute;
    top: 40px;
    left: 62px;
    cursor: pointer;
}
#product-holder2 {
    background: url("img/25-selected.png");
    background-repeat: no-repeat;
    height: 182px;
    width: 195px;
    position: absolute;
    top: 40px;
    left: 124px;
    cursor: pointer;
}
#product-holder3 {
    background: url("img/50-selected.png");
    background-repeat: no-repeat;
    height: 182px;
    width: 195px;
    position: absolute;
    top: 40px;
    left: 186x;
    cursor: pointer;
} 
```

请告诉我如何将它用于 product-holder3，也许有一天我需要更多图像，所以请告诉我它是如何工作的？非常感谢！

PS我对jQuery一无所知：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:34:46.657

这是基于以下评论中的讨论的更新：

```
// Listen for the click event of our many containers
$(".theImage").on("click", function(){
   // In the event clicked, find image, fade slowly to .01 opacity
   $(this).find("img").fadeTo("slow",0).end()
     // Then, of siblings, find all images and fade slowly to 100% opacity
     .siblings().find("img").fadeTo("slow",1);           
});​ 
```

演示：http: [//jsfiddle.net/yvM8Z/2/](http://jsfiddle.net/yvM8Z/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:28:41.293

您需要创建一个集合，其中包含您正在循环通过的容器 div（或至少是它们的 id）。就像`$(".theImage img:parent")`您不必担心操纵自行车顺序一样。然后在您的点击功能中，您可以使用 id 查找当前集合元素`$(this).parent().attr("id")`，然后获取它的索引。一旦你知道了索引，你就可以移动到集合中的下一个项目（或者如果你在最后，则换行到开头）并获取新的 id，将其设置为你的变量的值`a`。

# javascript - ASP.NET 应用程序可在 VS2010 中运行，但在发布/部署后无法运行

> ID：10759412
> 
> 赞同：0
> 
> 时间：2012-05-25T18:12:28.190
> 
> 标签：javascript, jquery, asp.net

我有一个我无法解决的问题，希望有人能提供一些见解。如果这个问题看起来含糊不清，我提前道歉，但很难描述。我会尽我所能。请随时提出澄清问题。

我有一个继承的 ASP.NET 4.0 应用程序，并正在尝试对其进行改造以供我们使用。当我在 VS2010 中构建并运行它时（基本上，只需按 F5），它就可以正常工作。

然而 。. . 我尝试用它创建和发布一个包（因为我需要知道它在部署后是否有效），这就是我遇到问题的地方。

具体来说，问题发生在尝试将数据保存到后端 SQL 数据库的 AJAX 调用中。该脚本在 JavaScript 中遇到“return false”（以阻止前端表单提交），并且它会计时 . . . 和时钟。. . 和时钟。. . 换句话说，它挂断了。它没有给我任何错误消息或代码。它*确实*允许我单击 [x] 以退出处理消息框，但结果是我的数据没有保存。同样，这只发生在已发布/已部署的应用程序中。当我在 VS2010 中运行它时，这不会发生。

我已经确定后端 C# 代码*不是*罪魁祸首（其他页面上还有其他函数调用相同的代码，它们工作正常）。我尝试运行跟踪，它似乎挂在 jquery-1.4.2.min.js 中的以下代码段上。

```
return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w 
```

（注意：这是在 jquery-1.4.2.min.js 文件的第 49 行。再次道歉，如果这看起来含糊不清。）

代码似乎陷入了无限循环。我不知道是什么原因造成的。同样，这只是在部署之后。VS2010 构建（预部署）运行良好。

我认为环境中有一个设置需要检查，但我不知道在哪里查看。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:35:06.100

Think I figured it out. Turns out that the service being called by the AJAX was throwing a 500 error without my realizing it.

If that ends up being the answer, I'll mark this as such.

**Edit:** That turned out to be the answer. I found an environment-specific attribute in the code that was causing the 500 error. After I rewrote the code and published the application, it worked with no problem.

# wordpress - 是否可以更改 URL 结构并继续将 Analytics 数据收集到现有帖子？

> ID：10759417
> 
> 赞同：1
> 
> 时间：2012-05-25T18:12:51.217
> 
> 标签：wordpress, google-analytics, categories, permalinks

我正在更改我的 WordPress 永久链接：

```
/%category%/%post_id%/ 
```

至：

```
/%postname%/ 
```

是否可以让谷歌分析继续收集相应的帖子数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T00:58:30.703

Unfortunately, there is no way to have GA remap previous page name values to new page name values, so you will not be able to compare historical data to current data within GA. To do that, you will have to do a query on your wordpress data to make your own lookup table, etc..

One thing you can do is have GA continue to populate with the old URL...the _trackPageview call takes an optional argument to specify the page name you want reported. You will have to write some server-side code to expose the old value to GA though. Or maybe it might be exposed in a variable already and you just have to pass it to GA.

Another thing you can do is kind of a hybrid.. let GA start recording the new URL as the page name, but also populate one of GA's custom variables with the old URL. You would have to expose it like above, but then it will tie the two values together within GA. There would still be some manual work to do in GA to do things like compare historical data to new data but it might be easier for you to go this route.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:48:09.823

你不必担心这一点。它将自动处理永久链接更改并照常收集统计信息。

# xcode - NSView 的 Autosizing 属性设置丢失

> ID：10759418
> 
> 赞同：5
> 
> 时间：2012-05-25T18:12:52.830
> 
> 标签：xcode, nsview, autoresize

我今天遇到了这个非常令人沮丧的问题。

我想将我的视图设置为像这样自动调整大小：

[![](../Images/2e6a13432281b73b7bd114903c3dee1b.png)](https://i.stack.imgur.com/nvMVP.png)

但是我在我的 NSView 的 xcode 设置中找到的所有内容都是这样的：

[![](../Images/7777ebd080698ffb78ae7235a0e29883.png)](https://i.stack.imgur.com/0LfeH.png)

这两个屏幕截图取自具有相同 xcode 4.3.2 的两个不同项目。这是一个错误还是我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T08:02:13.037

从 Xcode 4.3 开始，Cocoa 项目的 xib 文件最初打开了自动布局。当 xib 文件使用自动布局时，大小检查器中没有 Autosizing 部分。

如果要关闭自动布局，请打开文件检查器并取消选择使用自动布局复选框。 ![在此处输入图像描述](../Images/45d48d6f2545096fc5c6ab17af6fe891.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T07:35:02.977

Seaid 的解决方案有效。但我认为这是错误，因为当切换到另一个检查器时，自动调整大小工具会出现大约半秒。

[Xcode 4 界面生成器问题](https://stackoverflow.com/questions/12631319/xcode-4-interface-builder-problems/12880181#12880181)

# c# - 将值插入表中

> ID：10759419
> 
> 赞同：0
> 
> 时间：2012-05-25T18:13:04.250
> 
> 标签：c#, sql

我已经创建了一些值，我想将它们插入到数据库中，但是我发现有些数据已插入而有些则没有，我不知道为什么

这是我的代码

```
SqlConnection con = new SqlConnection();
con.ConnectionString = "Persist Security Info=False;Integrated Security=SSPI;database=DB1;server=KHALED-PC;Connect Timeout=30";

char[] delimiterChars = { ' ', ',', '.', ':', '\t', '<', ':', '$', '=', ';', ' ', '<', '>', '!', ';', ']', '[', '"',
  '/','=','-','!','#','$','%','^','&','*','/'
};
string[] stopwords ={"a", "about", "above", "above", "across", "after", "afterwards", "again", "against", "all", "almost", "alone", "along", "already", "also","although","always","am","among", "amongst", "amoungst", "amount",  "an", "and", "another", "any","anyhow","anyone","anything","anyway", "anywhere", "are", "around", "as",  "at", "back","be","became", "because","become","becomes", "becoming", "been", "before", "beforehand", "behind", "being", "below", "beside", "besides", "between", "beyond", "bill", "both", "bottom","but", "by", "call", "can", "cannot", "cant", "co", "con", "could", "couldnt", "cry", "de", "describe", "detail", "do", "done", "down", "due", "during", "each", "eg", "eight", "either", "eleven","else", "elsewhere", "empty",
  "enough", "etc", "even", "ever", "every", "everyone", "everything", "everywhere", "except", "few",
  "fifteen", "fify", "fill", "find", "fire", "first", "five", "for", "former", "formerly", "forty", "found",
  "four", "from", "front", "full", "further", "get", "give", "go", "had", "has",
  "hasnt", "have", "he", "hence", "her", "here", "hereafter", "hereby", "herein",
  "hereupon", "hers", "herself", "him", "himself", "his", "how", "however",
  "hundred", "ie", "if", "in", "inc", "indeed", "interest", "into", "is", "it",
  "its", "itself", "keep", "last", "latter", "latterly", "least", "less", "ltd",
  "made", "many", "may", "me", "meanwhile", "might", "mill", "mine", "more",
  "moreover", "most", "mostly", "move", "much", "must", "my", "myself", "name",
  "namely", "neither", "never", "nevertheless", "next", "nine", "no", "nobody",
  "none", "noone", "nor", "not", "nothing", "now", "nowhere", "of", "off",
  "often", "on", "once", "one", "only", "onto", "or", "other", "others",
  "otherwise", "our", "ours", "ourselves", "out", "over", "own","part", "per",
  "perhaps", "please", "put", "rather", "re", "same", "see", "seem", "seemed",
  "seeming", "seems", "serious", "several", "she", "should", "show", "side",
  "since", "sincere", "six", "sixty", "so", "some", "somehow", "someone", 
  "something", "sometime", "sometimes", "somewhere", "still", "such", "system",
  "take", "ten", "than", "that", "the", "their", "them", "themselves", "then",
  "thence", "there", "thereafter", "thereby", "therefore", "therein", 
  "thereupon", "these", "they", "thickv", "thin", "third", "this", "those",
  "though", "three", "through", "throughout", "thru", "thus", "to", "together",
  "too", "top", "toward", "towards", "twelve", "twenty", "two", "un", "under",
  "until", "up", "upon", "us", "very", "via", "was", "we", "well", "were",
  "what", "whatever", "when", "whence", "whenever", "where", "whereafter",
  "whereas", "whereby", "wherein", "whereupon", "wherever", "whether",
  "which", "while", "whither", "who", "whoever", "whole", "whom", "whose", 
  "why", "will", "with", "within", "without", "would", "yet", "you", "your",
  "yours", "yourself", "yourselves", "the"
};

string[] words = txt.Split(delimiterChars);//remove punctuation character 

int index = 1;
bool check = true;
foreach (string f in words)
{
  for (int s = 0; s < stopwords.Length; s++)
  {
    if (f == stopwords[s])
    {
      check = false;
      index++;
      break;
    }
  }
  if (f.Trim().Length > 0 && check == true)
  {
    //Console.WriteLine("word : " + e + "(position):" + index);
    con.Open();
    //s.ToLower();
    SqlCommand cmd = new SqlCommand("INSERT INTO TableFF (Position) VALUES (@index)", con);

    cmd.Parameters.Add(new SqlParameter("@index",index));

    //  cmd.CommandType = CommandType.Text;
    cmd.ExecuteNonQuery();
    con.Close();
    index++;
  }
  check = true;
}

string []wordsbeforesoundex = new string[10000000];
for (int j = 0; j < words.Length; j++)
{
  wordsbeforesoundex[j] = words[i];
}

foreach (string word in wordsbeforesoundex)
{
  string results = "";
  con.Open();

  string wordss = word;
  SqlCommand cmd1 = new SqlCommand("INSERT INTO TableFF (SoundexNumbers) VALUES (@wordss)", con);
  cmd1.Parameters.Add(new SqlParameter("@wordss", wordss));

  cmd1.ExecuteNonQuery();
  wordss = null;
  con.Close();
} 
```

第一个 foreach 循环中的第一个值已成功插入，但在第二个 foreach 中没有插入任何内容，尽管我确定了我插入的参数和值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:16:10.860

这条线

```
string[] wordsaftersoundex="khaled go to school by bus and he is good boy" 
```

甚至不编译

如果你想得到一个单词数组试试这个

```
string[] wordsaftersoundex="khaled go to school by bus and he is good boy".Split(' ') 
```

在任何情况下，您都想告诉我们一些事情，因为正如我在上面告诉您的那样，您的代码甚至无法编译。

# php - PHP Grid 类型 Array 获取行或列

> ID：10759420
> 
> 赞同：2
> 
> 时间：2012-05-25T18:13:04.873
> 
> 标签：php, arrays, grid, row

这**可能**听起来像一个愚蠢的问题，我还没有认真思考，

或者它比我想象的要难......

假设我有一组数字，例如：

```
$table = array(
'5','2','1','4','4','4',
'1','2','4','2','1','1',
'3','4','3','1','4','4',
'1','4','2','S','4','4',
'1','2','4','2','1','1',
'5','2','6','4','8','1'
); 
```

S = 我想根据“S”所在的位置获取行或列。

我知道我可以知道 S 在哪里。

通过做：

```
$start = array_search('S', $table); 
```

这个数组所基于的“网格”，S可以是任何地方。

并且网格本身可以是不同大小的长度和宽度。

我将如何获得整行或整列。？

（IE:S 在第 3 列：4,2,1,S,2,4）

（IE:S 在第 3 行：1,4,2,S,4,4）

只是对正确方向的提示会有所帮助，不需要为我全力以赴。

或者关于如何解决这个问题的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:22:03.643

好的，我猜你有你想要使用的宽度存储在某个地方！（并且您不想使用二维数组，如果您不关心，请检查其他答案，在这种情况下，二维数组更有意义）。

如果要获取线，请使用`$start`数组中 S 的位置并将其除以宽度。然后你需要向下或向上取整（取决于你是从 0 开始计数还是从 1 开始计数）

对于需要执行类似操作的列，请`$start % $width`在此处使用。（如果从 1 开始计数，则加 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:17:15.027

这里有一个提示：

```
$table[] = array();
$table[][0] = array(5,2,1,4,5);
$table[][1] = array(1,5,2,3,3);
$table[][2] = array(1,2,'s',4,5); 
```

您将需要一个数组数组来进行 x/y 搜索。

您的 x 是外部数组中的第 n 个元素。

您的 y 是内部数组中的第 n 个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:32:47.220

您可以在数组中搜索您的字符串，如 's' 并找到其中的列和行：

```
$cols=5;     // your columns count
$row=1;
$i=1;

$array = array('1','2','3','4','5','6','7','s','9');  
foreach($array as $value)  
{  

  if($value=='s')
   {
     echo 'Column : '.$i .' || Row : ' .$row ;
   }
  if($i==$cols)  
   {  
      $i=0;
      $row++;
   }  
   $i++;
} 
```

# c# - wp7 - 设置页面方向或替代

> ID：10759421
> 
> 赞同：0
> 
> 时间：2012-05-25T18:13:05.080
> 
> 标签：c#, silverlight, windows-phone-7

我已经尝试过，但似乎无法在后面的代码中设置 wp7 应用程序的页面方向。我假设它无法完成，但我想我会在这里检查。

可以做到吗？

如果不是这里是我的问题，也许有人可以提供帮助。我创建了一个设置为 Landscape 的应用程序，并将 PageOrientation 设置为 LandscapeLeft。由于手机在移动，它有时会明显旋转到 LandscapeRight，我也不想要它。所以我做了这个

```
protected override void OnOrientationChanged(OrientationChangedEventArgs e)
{
     if(e.Orientation == PageOrientation.LandscapeLeft)
          base.OnOrientationChanged(e); 
} 
```

问题解决了，然而，我向我的朋友展示了这个应用程序，他们玩了一会。由于电话按钮和他们拿着电话的方式，他们中的一些人更喜欢它是另一种方式（LandscapeRight）。

为了满足我的应用程序的用户，我想放置一个设置，他们可以根据他们想要 LandscapeLeft 或 LandscapeRight 来更改。由于我无法更改代码中的方向，我怎么能做到这一点？

我确实尝试过弄乱屏幕旋转，我有点工作了，即应用程序总是设置为 LandscapeLeft，如果他们想要 LandscapeRight，那么只需旋转变换 180*。但主要问题是 MessageBox 会出现颠倒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:28:50.640

您可以在后面的代码中设置页面方向

```
 this.Orientation = PageOrientation.Landscape; 
```

请参阅属性[http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.orientation(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.orientation(v=vs.92).aspx)

例如： [http ://www.kunal-chowdhury.com/2011/10/know-about-wp7-page-orientation-and.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+kunal2383+%28Kunal%27s+Blog %29](http://www.kunal-chowdhury.com/2011/10/know-about-wp7-page-orientation-and.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+kunal2383+%28Kunal%27s+Blog%29)

但是，这仅限于设置 Landscape 或 Portrait - 它似乎忽略了 PortraitUp 和 PortraitDown 以及 LandscapeLeft 和 LandscapeRight。

* * *

似乎您能做的最好的事情是强制手机进入横向，然后使用旋转变换 - 例如对于全屏页面（没有系统托盘或应用程序栏）然后这可以在左右之间翻转页面景观：

```
 private bool t;
    private void Button_Click(object sender, RoutedEventArgs e)
    {
        SupportedOrientations = SupportedPageOrientation.Landscape;
        Orientation = PageOrientation.Landscape;

        if (t)
        {
            t = false;
            this.RenderTransform = new RotateTransform() {Angle = 180, CenterX = 400, CenterY = 240};
        }
        else
        {
            t = true;
            this.RenderTransform = null;
        }
    } 
```

那是 Xaml：

```
<phone:PhoneApplicationPage 
    x:Class="PhoneApp1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="480"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="PortraitOrLandscape"  Orientation="Landscape"
    shell:SystemTray.IsVisible="False">

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>

            <Button Click="Button_Click" Content="one"/>
        </StackPanel>

        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"></Grid>
    </Grid>

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:35:53.287

Just set the [SupportedOrientations property](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.supportedorientations%28VS.92%29.aspx) to Landscape. That way, whether your user holds it LandscapeLeft or LandscapeRight, it will just work. [There is no way to programmatically set one or the other](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.supportedpageorientation%28VS.92%29.aspx).

# javascript - 使用 append() 附加大块 html

> ID：10759426
> 
> 赞同：29
> 
> 时间：2012-05-25T18:13:28.587
> 
> 标签：javascript, jquery, html, append

我试图使用 jquery 的 append() 附加一大块文本。

```
$('#add_contact_btn').click(function(event) {
    event.preventDefault();

    var large = '<div class="accordian_container"><a href="#" class="accordian_trigger"><h4>Co-Borrower Information</h4></a><hr/><div class="accordian_item" id="accord_item_2"><label> First Name</label><br/><input type="text"/><br/><label>Middle Name</label><br/>
            <input type="text"/><br/>
            <label>Last Name</label><br/>
            <input type="text" /><br/>
            <label>Home Number</label><br/>
            <input type="text"/><br>
            <label>Work Number</label><br/>
            <input type="text"/><br>
            <label>Cell Number</label><br/>
            <input type="text"/><br>
            </div>
            </div>';

    $('#accordion_container').append(large);

}); 
```

它似乎不起作用，在查看了 append() 的文档之后，我不知道为什么 - 有什么想法吗？是我要附加的大量 HTML 吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-25T18:24:16.430

### 现代答案

随着 ES6（及更高版本）变得越来越普遍，并且随着越来越多的人从 ES6 转译，我们越来越能够使用模板文字，它可以用作多行字符串：

```
var myString = `<p>Line One</p>
<p>Line Two</p>
<p>Line Three</p>`; 
```

* * *

### 2012 年原始答案 (ES5)

Javascript 在您编写它们的方式中没有多行字符串，您不能只在一行上打开一个字符串，然后向下几行然后关闭它。（有一些在 JS 中做多行字符串的方法，但它们有点倒退）。

大多数人的做法是这样的：

```
var myString = '<p>Line One</p>' +
'<p>Line Two</p>' +
'<p>Line Three</p>'; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-06-30T10:40:10.123

您可以在 HTML 中创建一个隐藏的模板，然后附加其内容 HTML。例如：

```
<div class="hide" id="template">
  <b>Some HTML</b>
</div> 
```

jQuery：

```
$("#container").append($("#template").html()); 
```

将 HTML 放入 JavaScript 字符串更难阅读和搜索，容易出错，并且您的 IDE 将难以正确格式化它。

* * *

# 2019 年更新

查看`template`为此目的创建的标签：[https ://developer.mozilla.org/en-US/docs/Web/HTML/Element/template](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template)

该`template`标签甚至可以包含在其他地方无效的 HTML，`td`例如`table`.

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-25T18:16:17.430

删除换行符。

[http://jsfiddle.net/DmERt/](http://jsfiddle.net/DmERt/)

```
var large = '<div class="accordian_container"><a href="#" class="accordian_trigger"><h4>Co-Borrower Information</h4></a><hr/><div class="accordian_item" id="accord_item_2"><label> First Name</label><br/><input type="text"/><br/><label>Middle Name</label><br/><input type="text"/><br/><label>Last Name</label><br/><input type="text" /><br/><label>Home Number</label><br/><input type="text"/><br><label>Work Number</label><br/><input type="text"/><br><label>Cell Number</label><br/><input type="text"/><br></div></div>';

$('#accordion_container').append(large);​ 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-25T18:21:06.990

我的理解是，如果您想将长字符串放在多行上，那么使用字符串数组并将它们连接起来会更有效。

```
var bigString = [
    'some long text here',
    'more long text here',
    '...'
];
$('#accordion_container').append(bigString.join('')); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-02-25T11:18:43.857

您可以在每行的末尾使用反斜杠。

[http://davidwalsh.name/multiline-javascript-strings](http://davidwalsh.name/multiline-javascript-strings)

```
var multiStr = "This is the first line \
This is the second line \
This is more..."; 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-11-17T18:37:49.167

另一种选择是带有*反引号的***模板文字**：

 *```
var large = `some long text here
some long text here
some long text here`; 
```

这是一种相当新的语法，但在 IE 中不受支持。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-19T06:36:36.753

Javascript 可以选择将多行/HTML 部分扩展为单行，为 HTML 行的每一行添加**反斜杠（）**以标识其继续行。

**注意**：- 附加行时唯一要考虑的是单引号和双引号。如果以单引号开头，则在内部字符串中使用双引号，反之亦然，否则，行中断并且不会得到正确的结果。

```
$(element).append('<div class="content"><div class="left"></div><div class="right"></div></div>'); 
```

Javascript 语法

```
 var str = ' <div class="content"> \
<div class="left"> \
</div> \
<div class="right"> \
</div> \
</div> ';

 document.getElementsByName(str).html(str);
 //or
 document.getElementsById(str).html(str); 
```

jQuery语法

```
 $(element).append(' \
  <div class="content"> \
    <div class="left"> \
    </div> \
    <div class="right"> \
    </div> \
  </div> \
'); 
```

**或者** 您可以为此使用 html 模板，如通过 jquery 的第三个链接中提到的那样

```
$("#div").load("/html_template.html"); 
```

[http://www.no-margin-for-errors.com/blog/2010/06/17/javascript-tip-of-the-day-extending-a-string-across-multiple-lines/](http://www.no-margin-for-errors.com/blog/2010/06/17/javascript-tip-of-the-day-extending-a-string-across-multiple-lines/)

[使用 Jquery 附加多个 html 元素](https://stackoverflow.com/questions/1825306/appending-multiple-html-elements-using-jquery)

[在多行中传播 html javascript](https://stackoverflow.com/questions/8104242/spread-html-in-multiple-lines-javascript)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-24T07:11:50.103

默认情况下，包含 wraps 的 HTML 代码不能与`append/prepend`直接 use一起使用`'or"`。但是目前有以下方法可以做到这一点：

1.  **使用“+”连接 HTML 代码片段。**

2.  **使用“\”转义。**

3.  **使用“`”（反引号，[重音](https://en.wikipedia.org/wiki/Grave_accent)），不需要任何额外的操作。**ES2015/ES6 （[模板文字）](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)**支持此方法**。

4.  **添加一个隐藏`tag`的包含您需要的相同 HTML 代码，例如`<p id="foo" style="display:none;">`，然后使用`.append($('#foo').html());`.**

    现在将一些使用场景发布到`first three methods`上面提到的（只需在`Chrome`浏览器控制台中运行它们。）： [![在此处输入图像描述](../Images/1a1b69f3ed581858c0654af8b0c7c111.png)](https://i.stack.imgur.com/Eahu0.png)

我们可以清楚地看到它们的差异。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-08-21T10:32:48.663

使用模板文字 模板文字是用反引号 (`) 分隔的文字，允许嵌入的表达式称为替换

```
var test = `<div class="question-content"> <p>  ${mydata.commented.comment}</p></div> <div class="about-info">
                    <div class="count-section">
                    <button id="clike-button" value={{comment.id}}><i class="fas fa-arrow-up"></i></button>

                    <h3 id="clike_count">{{ question.clike_count }}</h3>
                    <button id="cdislike-button" value={{comment.id}}><i class="fas fa-arrow-down"></i></button>

                </div>
                            <div class="user-profile">
                                <img src="{% static 'img/profile-pic.png' %}" alt="">
                                <div class="user-info">
                                    <p> ${mydata.user}</p>
                                    <p class="user-badge">
                                    <p class="user-badge"> <span style="padding-left: 2px;">13.1k</span><i
                                            class="fas fa-circle gold"></i> <span> 2</span> <i class="fas fa-circle silver"></i>
                                        <span>
                                            7</span> <i class="fas fa-circle bronze"></i> <span>56</span>
                                    </p>
                                </div>
                            </div></div> `;
                $("#commentlist").append(test) 
```

[https://i.stack.imgur.com/5BZHB.png](https://i.stack.imgur.com/5BZHB.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-03T17:23:24.667

您还可以使用 jQuery 克隆 div，然后附加克隆 - 方式不那么混乱。

```
var accordionClone = $('.accordion_container').clone();
$('#accordion_container').append(accordionClone); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-11-21T12:32:58.117

只需在特殊字符（``）中添加这样的 $(#element).append( `large_html`),large_html 并稍后感谢我。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-17T12:20:14.607

如果换行是一个问题，只需使用 innerHTML，它适用于自 IE5 以来的所有浏览器：

```
$('#accordion_container')[0].innerHTML += large;​ 
```

或者，对于集合：

```
$('.accordion_container').forEach(function () {
    this.innerHTML += large;​
}); 
```*

# c - getchar() 函数不工作

> ID：10759429
> 
> 赞同：1
> 
> 时间：2012-05-25T18:14:00.880
> 
> 标签：c, xcode

```
#include <stdio.h>

int main(int argc, const char * argv[])
{
    long nc;

    nc=0;
    while (getchar()!=EOF) {
        ++nc;
        printf("%ld\n", nc);
    }
} 
```

这是代码，当我输入一个字符时，它会先打印 1，然后再打印 2，即使我只输入了一次。

我正在使用 Xcode。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T18:15:18.727

> 这是代码，当我输入一个字符时，它会先打印 1，然后再打印 2，即使我只输入了一次。

但你确实按下`return`了，不是吗？尝试按`CTRL`+`D`或注意循环中的换行符。也许是这样的？

```
int ch;
while ((ch = getchar()) != EOF) {
    if (ch == '\n')
        continue;
    ++nc;
    printf("%ld\n", nc);
} 
```

# google-drive-api - Android 应用程序：获取 Google Drive API 的访问令牌

> ID：10759432
> 
> 赞同：3
> 
> 时间：2012-05-25T18:14:14.650
> 
> 标签：google-drive-api

我正在编写一个 Android（版本 ICS）应用程序。它将数据上传到 Google Drive。该应用程序使用 oauth2 获取访问令牌。

第一步：获取授权令牌。

```
 String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";
    // Step 1
    accountManager.getAuthToken(
        account,                                // Account retrieved using getAccountsByType("com.google")
        AUTH_TOKEN_TYPE,                        // Auth Token Type
        options,                                // Authenticator-specific options
        this,                                   // Your activity
        new OnTokenAcquired(),                  // Callback called when a token is successfully acquired
        new Handler(new OnAuthTokenError()));   // Callback called if an error occurs
}
private class OnTokenAcquired implements AccountManagerCallback<Bundle> {
    @Override
    public void run(AccountManagerFuture<Bundle> result) {
        // Get the result of the operation from the AccountManagerFuture.
        Bundle bundle;
        try {
            bundle = result.getResult();

            authToken = bundle.getString(AccountManager.KEY_AUTHTOKEN);

            Log.d(TAG,"authToken:" + authToken);

            exchangeToken access = (exchangeToken) new exchangeToken().execute();

        } catch (OperationCanceledException e) {
            e.printStackTrace();
        } catch (AuthenticatorException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

成功。获取授权令牌。

第 2 步：交换访问令牌的授权令牌。

```
 private class exchangeToken extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... params) {
        HttpTransport transport = new NetHttpTransport();
        JsonFactory jsonFactory = new GsonFactory();
        String CLIENT_ID = "999999999999.apps.googleusercontent.com";
        String CLIENT_SECRET = "axXXXXXXXXXXXXXXX7";

        try { // Step 2: Exchange for an access and refresh token
            GoogleTokenResponse authResponse = new GoogleAuthorizationCodeTokenRequest(transport, jsonFactory, CLIENT_ID, CLIENT_SECRET, authToken, CALLBACK_URL).execute();
            accessToken = authResponse.getAccessToken();
            Log.d("Get Access","Token:" + accessToken);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

失败。LogCat 显示以下内容：com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request

{

```
 "error":"unauthorized_client" 
```

}

我已经能够使用“Drive”应用程序在我的 Android 平板电脑上访问“Google Drive”。所以我的电子邮件帐户是有效的。可能是 AUTH_TOKEN_TYPE 不正确，但 Google Drive SDK 并不清楚它必须是什么。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:49:11.507

您不需要执行第二步交换令牌。Android 直接授予您访问令牌，它不会授予您必须交换令牌的身份验证代码。

[Android 文档上的这个页面](http://developer.android.com/training/id-auth/authenticate.html)很好地解释了一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:14:12.813

您知道要使用 Drive API，您的用户必须在 Chrome(!) Webstore 上安装您的应用程序吗？通常，文档列表 API 是 Android 的更好选择。

# perl - 是否可以为 system() 调用创建读/写 FileHandle？

> ID：10759434
> 
> 赞同：3
> 
> 时间：2012-05-25T18:14:28.533
> 
> 标签：perl, system

我有一个 POP3 登录测试脚本，用于`IO::Socket::INET`读取和写入 TCP:110 上打开的套接字。这是我习惯的：-

```
my $sock = IO::Socket::INET->new(
    PeerAddr    =>  "$h:$port",
    Proto       =>  "tcp",
) or die "$!\n"; 
```

但是，我还需要通过 SSL 保护的 POP3S (TCP:995) 测试相同的 POP3 对话。

我发现我可以在命令行上使用以下命令，这使我的状态与“telnet 主机名 110”类似，但已加密：-

```
openssl s_client -crlf -connect hostname:995 
```

我希望找到一种方法，可以在 openssl 命令上设置某种读/写 FileHandle 或套接字，我可以读取它直到它为空，然后写入所需的 POP3 命令，然后读取响应，等等上...

我觉得因为我可以在屏幕上看到它，所以它足够近，可以抓取，但我不太了解 perl 的方法，无法“获取它”并继续前进！

不幸的是，这个脚本将在服务器上运行，无法安装更多的 perl 模块，这可能是一个明显的解决方案。

*更新*

感谢@ventatsu 的启发，我现在`IPC::Open2`这样使用：-

```
my ($sslread,$sslwrite);
my $ssl_fh = open2(
    $sslread,
    $sslwrite,
    "openssl s_client -crlf -connect mail.example.com:995"
) or die "$!\n";

while (<$sslread>) {
    print;
    if (/^\+OK.*$/) {
        ## Try to log in
        print $sslwrite "USER $u\r\n";
        print "USER $u\n";
        while (<$sslread>) {
            print;
            if (/^\+OK.*$/) {
                ## Keep going
                print $sslwrite "PASS $p\r\n";
                print "PASS $p\n";
                while (<$sslread>) {
                    print;
                }       
            }       
        }       
        print $sslwrite "QUIT"; 
        print "QUIT\n";
    }       
}       

waitpid( $ssl_fh, 0 );
my $child_exit_status = $? >> 8; 
```

我的非 SSL 测试脚本是这样工作的：-

```
Testing pop3 on mail.example.com:110
+OK The Microsoft Exchange POP3 service is ready.
USER mailtest@example.com
+OK
PASS Abcd3fGh
+OK User successfully logged on. 
```

当我在 CLI 上的交互式 SSL 会话中运行 POP3 命令时，凭据工作正常，如下所示：-

```
openssl s_client -crlf -connect mail.example.com:995
<snip out the SSL bumph />
+OK The Microsoft Exchange POP3 service is ready.
USER mailtest@example.com
+OK
PASS Abcd3fGh
+OK User successfully logged on. 
```

但是我的 SSL 测试脚本几乎只能这样工作：-

```
Testing pop3s on mail.example.com:995
<snip out the SSL bumph />
+OK The Microsoft Exchange POP3 service is ready.
USER mailtest@example.com
+OK
PASS Abcd3fGh
-ERR Logon failure: unknown user name or bad password. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:44:25.340

您可以使用[`IPC::Open2`](http://p3rl.org/IPC%3a%3aOpen2)附加两个文件句柄，一个到输入，一个到程序的输出。它可能更接近您真正想要使用[`IO::Socket::SSL`](http://p3rl.org/IO%3a%3aSocket%3a%3aSSL)的功能，它的功能类似于`IO::Socket::INET`但已加密。

**更新：** 我最好的猜测是你的字符加倍`\r`。根据`s_client` `-crlf`将换行符转换为回车+换行符的手册页。当您打印到`$sslwrite`要发送的句柄时`"\r\n"`。我认为结果是服务器会在每个命令结束时收到“\r\r\n”。您可能希望`-crlf`从`openssl`程序中的命令中删除 。

# xamarin.ios - UIDatePicker 不会滚动日或月

> ID：10759435
> 
> 赞同：1
> 
> 时间：2012-05-25T18:14:30.677
> 
> 标签：xamarin.ios, uidatepicker

使用以下代码添加 DatePicker，我可以滚动年份，但不能滚动日期或月份。有任何想法吗？

```
datePicker = new UIDatePicker(pickerRect);
datePicker.Mode = UIDatePickerMode.Date;
datePicker.SetDate(appDelegate.store.builderPlan.p_startDateTime, true);    
datePicker.AutoresizingMask = UIViewAutoresizing.FlexibleDimensions;
datePicker.ValueChanged += delegate(object sender, EventArgs e) {
        SetDate();
        };
this.AddSubview(datePicker); 
```

谢谢，瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:28:53.480

选择器挂在视图之外，因此没有事件传递到视图...

# javascript - Tumblr JS 为样式嵌入 CSS/HTML 标签？

> ID：10759436
> 
> 赞同：0
> 
> 时间：2012-05-25T18:14:38.073
> 
> 标签：javascript, html, css, tumblr

我使用 tumblr 的 javascript 嵌入代码将我的帖子嵌入到外部网站中。现在我想为帖子设置样式。为了做到这一点，我在哪里可以找到标签、类和所有这些的完整列表？我看到人们发布了一些标签，例如 ol.tumblr_posts，但没有人说他们是如何或在何处实际发现 tumblr 用于该特定元素的标签。

有人提到在 Firefox 中使用 Web 开发人员扩展来提取与 javascript 文件关联的 HTML，但我不能使用 Firefox，所以我需要另一个建议吗？我确实去了 tumblr 的文档，但是用于在 tumblr 内自定义主题的标签和所有内容似乎与用于在 tumblr 之外显示帖子的标签和所有内容不同。

我还查看了 api 部分，没有看到列出所有标签的任何内容。谢谢！

更新：这是一篇讨论我正在谈论的内容的帖子，但没有人给出答案来显示用于格式化脚本输出的标签，说明他们如何或从何处获得标签。

[tumblr javascript 嵌入 css 皮肤](https://stackoverflow.com/questions/9903590/tumblr-javascript-embed-with-css-skin)

该网站是说要使用 FF 插件的网站，但同样，弄清楚如何使用它找到标签的人并没有说如何，他们只是说它有效。我终于在一个可以使用 Firefox 的地方，所以我安装了这个 Web 开发人员的东西，但我仍然看不到我会去哪里查看显示具有所有样式的实际 html 的信息，而不仅仅是显示链接js代码。

[http://forums.macrumors.com/showthread.php?t=745299](http://forums.macrumors.com/showthread.php?t=745299)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:55:06.020

Chrome 和 Opera 的开发者控制台是 CTRL + SHIFT + 我...尝试在那里查看源代码

如果不能使用 Chrome，IE 的开发工具是 f12

另外：我不确定这是否是您在说的，但我会在此链接中提供良好的衡量标准：

[http://www.tumblr.com/docs/en/custom_themes](http://www.tumblr.com/docs/en/custom_themes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:16:43.867

我想到了！不幸的是，我能做到这一点的唯一方法是使用 Firefox Web Developer Toolbar Add-On。安装后，您将转到嵌入了您的博客的 javascript 代码的网页。

然后，在 Firefox 工具栏中，应该有一个显示“杂项”的选项卡。单击它，然后单击“编辑 HTML”。浏览器底部会打开一个新窗格。在内部，它将显示网页的来源，包括 javascript 代码生成的信息，其中显示了类、html 和所有这些。

与使用 api（我不知道该怎么做）相比，您可以自定义的内容仍然不多，但这是一个开始。谢谢大家！

# php - 一种在每个脚本的基础上禁用 Monolog 的方法？

> ID：10759444
> 
> 赞同：3
> 
> 时间：2012-05-25T18:15:01.460
> 
> 标签：php, symfony, monolog

我们有一些相当大的数据导入脚本（Symfony“命令”）由于 Monolog 内存不足而出错（vendor\monolog\src\Monolog\Formatter\LineFormatter.php 在第 58 行）。我们一般使用 Monolog，所以不想完全禁用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:50:59.573

我意识到这是一个老问题，但是当我遇到一个长时间运行的、使用 Monolog 的脚本生成内存不足错误的问题时，原来问题是 Monolog 的“fingers_crossed”处理程序缓冲了大量的日志消息。

我通过为有问题的 Monolog 处理程序设置“buffer_size”变量解决了这个问题。像这样的东西：

```
main:
    type:         fingers_crossed
    action_level: info
    buffer_size:  200
    handler:      nested 
```

编辑：正如 Sergio 在评论中指出的那样，`buffer_size`设置：“最多应该缓冲多少个条目，除此之外，最旧的项目将从缓冲区中删除”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T21:55:37.607

由于在 prod 环境中您遇到 Doctrine 问题，我认为专注于记录器不会改善您的情况。但是，您可以尝试通过多次调用将日志处理程序从堆栈中弹出`$logger->popHandler()`。可能是日志消息被堆叠，因此您的内存不足。

不过，您更有可能对教义有疑问。

我会尝试使用 XHProf 或 XDebug 来查看实际问题在哪里。仅仅因为您的脚本在某一时刻失败并不意味着它就是问题的原因（实际的内存泄漏可能在其他地方）。

# .htaccess - 是否可以使用 .htaccess 根据文件大小阻止对文件的访问？

> ID：10759447
> 
> 赞同：2
> 
> 时间：2012-05-25T18:15:17.057
> 
> 标签：.htaccess, limit

特别是，我需要拒绝访问大照片（大于 1mb）。我不能拒绝访问文件夹中的所有图像，因为引擎 (WP) 从同一文件夹中获取更小、调整大小的图像。我想，如果有办法限制对文件类型的访问，那么根据文件大小限制访问可能也是一样的。有没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:58:53.027

不幸的是，这是不可能的。您无法检查文件大小，因为在加载图片**之前**使用了 .htaccess 文件。
但是可以为此创建一个 php 文件。如果您像“file.php?urlToImage=myImage.jpg”一样加载它，脚本将检查大小，如果它足够小，它将显示图像。否则它可能会显示一个简短的警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T22:24:44.533

要阻止所有原始图像，请使用：

```
RewriteEngine On
RewriteBase /path/to/image-folder

RewriteCond $0 !-([0-9]+)x([0-9]+)\.jpg$
RewriteRule ^(.*\.jpg)$ - [F] 
```

# c - Teamcenter ITK 中的多线程

> ID：10759449
> 
> 赞同：1
> 
> 时间：2012-05-25T18:15:27.120
> 
> 标签：c, multithreading, teamcenter, teamcenter-itk

我正在尝试编写一个 Teamcenter ITK 程序，该程序将作为从主线程调用的不同线程运行。从 UI 上的操作调用主线程。由于子线程需要花费大量时间才能完成，如果我不创建子线程并将代码放在主线程中，UI 最多会冻结 10 分钟，这是无法接受的。

主线程和子线程都需要共享由主线程完成的身份验证，因为我使用的是 SSO。他们还需要连接到数据库。最后，主线程不应该等待子线程完成，否则拥有子线程的整个目的将被破坏。

调用子线程的代码是这样的：

```
handle = (HANDLE) _beginthread (submitToPublishTibcoWf, 0, &input); // create thread
do
{
    sprintf(message, "Waiting %d time for 1000 milliseconds since threadReady is %d\n", i++, threadReady);
    log_msg(message);
    WaitForSingleObject(handle, 1000);
}
while (!threadReady);

sprintf(message, "Wait for thread to be ready over after %d tries since threadReady is %d\n", i, threadReady);
log_msg(message);
log_msg("Main thread about to exit now"); 
```

`threadReady = 1`每当我要在子线程中执行需要 8 分钟运行的代码时，我都会设置全局变量。

问题是子线程在主线程退出后表现异常，我收到此错误：

```
Fri May 25 11:34:46 2012 : Main thread about to exit now
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

大多数子线程都会执行，但有时它会在最后崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:34:21.163

为了防止子线程退出，我们可以使用分离使子进程独立并且不期望加入父进程。因此我们不应该加入子进程，之后，我们必须从主线程中分离：

```
pthread_create(th, attr, what);
pthread_detach(th);
// and never join 
```

还：

1.  如果您想为您的应用程序增加一些效率，我建议不要使用详尽的监听来观察信号的特殊事件，例如`threadReady`. 而是使用条件变量 in`pthread`或其他信号方法，例如`gObject`.
2.  您有一些线程之间共享的数据，它可能面临互斥问题以及其他问题，例如多处理或多线程应用程序中可能发生的其他问题。而是尝试使用一些机制（如互斥锁或条件信号量）手动处理此问题变量。

# java - Java substring.equals 与 ==

> ID：10759453
> 
> 赞同：5
> 
> 时间：2012-05-25T18:15:41.153
> 
> 标签：java, awk, iteration, substring

使用标准循环，我将子字符串与字符串值进行了比较，如下所示：

```
if (str.substring(i, i+3) == "dog" ) dogcount++; 
```

它打破了迭代。在第一次增量之后，将不再检测到“狗”实例。

所以我使用了 substring.equals，这很有效：

```
if (str.substring(i, i+3).equals("dog")) dogcount++; 
```

我的问题是，为什么？只是寻求更好的理解，thx。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T18:17:25.840

您应该使用`equals()`而不是`==`比较两个字符串。

`s1 == s2`如果两个字符串都**指向内存中的同一个对象，**则返回 true 。这是初学者常见的错误，通常不是您想要的。

`s1.equals(s2)`如果两个字符串在**物理上相等**（即它们包含相同的字符），则返回 true。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T18:16:40.813

`==`比较参考。您想使用来比较值`equals()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T18:17:12.297

`==`比较字符串的引用（字符串的存储位置）

**和**

`.equals()`比较字符串的值

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T18:17:48.623

为了`String`比较，总是使用`equals()`方法。因为比较在`==`比较参考。

这是进一步知识的[链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)。

您可能还想阅读[本文](http://www.coderanch.com/t/409507/java/java/Difference-between-equals)`==`以更好地理解和`equals()`方法之间的区别以及代码示例。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-25T18:24:40.987

“String”是 Java 中的一个对象，因此“==”会比较引用，如前所述。但是，像这样的代码

```
String str1 = "dog";
String str2 = "dog";
if(str1==str2)
    System.out.println("Equal!"); 
```

实际上会打印出“Equal！”，这可能会让你感到困惑。原因是当你将文字直接分配给对象时，JVM 会稍微优化你的代码`String`，以便 str1 和 str2 实际上引用**同一个**对象，该对象存储在 JVM 的内部池中。另一方面，代码

```
String str1 = new String("dog");
String str2 = new String("dog");
if(str1==str2)
    System.out.println("Equal!"); 
```

不会打印任何内容，因为您明确声明您需要两个新对象。
如果您想避免复杂化和意外错误，请不要将“==”与字符串一起使用。

# php - php mcrypt 解密无法按预期工作

> ID：10759461
> 
> 赞同：0
> 
> 时间：2012-05-25T18:16:11.363
> 
> 标签：php, encryption, mcrypt

我正在使用 PHP`mcrypt`将值加密和解密到 Windows 7 中的平面文件。

如果我在没有其他信息的情况下直接写入该值并将其从文件中解密，则该算法可以正常工作。如果我尝试将其编码为键/值`password=xxxxxx`对`explode()`（

我`trim()`用来切断任何空格（看起来它可能带有 EOL 字符），并且也尝试过手动解析键和值。

似乎没有任何工作。有没有其他人看到过这个问题，如果有，你是如何解决的？

加密/解密代码：

```
function encrypt ($strToEncrypt) {
    global $td, $iv, $key;

    /* Intialize encryption */
    mcrypt_generic_init($td, $key, $iv);

    /* Encrypt data */
    $encrypted = mcrypt_generic($td,$strToEncrypt);
    echo "encrypted = " . $encrypted . "<BR>";
    return $encrypted;
}

function decrypt($strToDecrypt) {
    global $td, $iv, $key;

    /* Initialize encryption */
    mcrypt_generic_init($td, $key, $iv);

    /* Decrypt data */
    $decrypted = mdecrypt_generic($td, $strToDecrypt);
    return $decrypted; 
}
?> 
```

文件操作代码：

```
include 'libEncryption.php';
$tempStr ="";
$tempStr2="";
try {
    $nextPage = $_REQUEST["NEXTPAGE"];
    switch ($nextPage) 
    {
        case "ENCRYPT":
            echo 'String to encrypt = ' . $_POST["txtSeedStr"] ."<BR>";
            if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
                $file = fopen("C:\\temp\\EncryptTest.txt", "wb") or exit("Unable to open file!");
            } else {
                $file = fopen("//home/prem03/EncryptTest.txt", "w") or exit("Unable to open file!");
            }
            fwrite($file, "username=web_app\npassword=");
            $tempStr = encrypt($_POST["txtSeedStr"]);
            fwrite($file, $tempStr, strlen($tempStr));
            fwrite($file, "\n");
            fwrite($file, "DBNAME=DEV11");
            fclose($file);
            break;
        case "DECRYPT":
            if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
                $file = fopen("C:\\temp\\EncryptTest.txt", "rb") or exit("Unable to open file!");
            } else {
                $file = fopen("//home/prem03/EncryptTest.txt", "r") or exit("Unable to open file!");
            }
            if ($file) {
                while (!feof($file)) {
                    $str1=fgets($file);
                    echo "str1 = " . $str1 . "<br>";
                    list($key,$value) = explode("=",$str1);
                    $var1=strlen(trim($value));
                    echo "key = ".$key.' value = '.trim($value) . ' ' . $var1 . "<br />";
                    if ($key == "password") {
                        $var2 = trim($value);
                        $tempStr2 = decrypt($var2);
                        echo 'tempStr2 = ' . $tempStr2 . "<BR>";
                    }
                }

            }
            fclose($file);
            break;
        default:
            break;
    } 
} catch (Exception $ex) {
    echo $ex->getMessage();
}  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:10:40.637

我发现了错误——这是一个典型的新手错误。我在两个不同的上下文中使用了变量 $key - 一个在加密库文件中，这是我想使用该变量的地方，另一个是在文件操作代码中，我根据我所在的字符串更改了 $key 的值爆炸。感谢 NetBeans IDE 和 xdebug 阐明了我的逻辑缺陷。

# php - AES 加密和解密 PHP MySQL

> ID：10759467
> 
> 赞同：0
> 
> 时间：2012-05-25T18:16:22.470
> 
> 标签：php, aes

好吧，我绝对正确地选择了我的昵称，因为我对此感到困惑：

首先我对其进行加密，然后在我的表中得到一个加密行。但是当我尝试解密它时，我得到零行作为结果集。

加密：

```
INSERT INTO accesobases (company, username,email) VALUES
 ('hola',
AES_ENCRYPT('pedro','capullo'),
AES_ENCRYPT('myemail',' capullo')
); 
```

当我运行解密查询时，显示 0 行。

```
SELECT company,
AES_DECRYPT('username', 'capullo'),
AES_DECRYPT('email', 'capullo')
from acceso
where company = 'hola'; 
```

请注意，我没有加密公司，但我肯定需要加密，但我想看看错误可能在哪里。也就是说，即使没有离开未加密的词（公司 = hola），我也会得到任何结果。因此，当我尝试这样做时，情况会更糟：

```
where AES_DECRYPT ('company', 'capullo') = ' " . $company . " ' 
```

这就是它在我的 php 页面上的样子。上面的块正在 MySQL 数据库本身上运行。

所以，问题有两个：

1.  不显示任何数据有什么问题
2.  ..."$company.." 的版本是否有效。

但是，如果我说：

```
SELECT * from acceso 
WHERE company = 'hola'; 
```

然后，它确实显示了带有加密字的行

所以，就好像它没有时间在显示之前解密该行然后什么都不显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:22:59.457

```
SELECT company,
AES_DECRYPT('username', 'capullo'),
AES_DECRYPT('email', 'capullo')
from acceso
where company = 'hola'; 
```

这不起作用，因为您告诉 MySQL 解密常量字符串“用户名”，而不是`username`列的值。删除 和 上的`'username'`引号`'email'`。

```
where AES_DECRYPT ('company', 'capullo') = ' " . $company . " ' 
```

这里同样的问题。但是，为了利用索引，以相反的方式执行此操作会更有效：

```
where company = AES_ENCRYPT(?, 'capullo') 
```

* * *

话虽如此，在 MySQL 服务器端使用 AES_ENCRYPT**并不安全**。加密密钥随每个查询传递给服务器，因此，将出现在 MySQL 进程列表中，并可能出现在服务器查询、慢速和/或错误日志中；如果您没有使用 SSL 进行 MySQL 连接，它们将以明文形式通过网络传递，解密数据也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:22:20.487

这些是列名，所以不要将它们放在引号中：

```
AES_DECRYPT('username', 'capullo'),
AES_DECRYPT('email', 'capullo') 
```

改为这样做：

```
AES_DECRYPT(username, 'capullo') AS username,
AES_DECRYPT(email, 'capullo') AS email 
```

此外，由于 AES_ENCRYPT 的输出是二进制的，因此请确保您的列是二进制的。

看起来您可能有两个不同的表，“accesobases”和“acceso”，因此请确保您使用的是正确的表。

您的声明：

```
where AES_DECRYPT (company, 'capullo') = ' " . $company . " ' 
```

似乎很好，只要您也从此处的列名中删除引号。它会很慢，因为它无法使用索引。相反，您应该这样做：

```
where company = AES_ENCRYPT('$company', 'capullo') 
```

# java - 如何使用 Python 使用字符串的 SHA-1 摘要创建 SQL 查询

> ID：10759468
> 
> 赞同：0
> 
> 时间：2012-05-25T18:16:24.513
> 
> 标签：java, python, mysql, sql, sha1

我正在尝试将数百个帐户插入[MySQL](http://en.wikipedia.org/wiki/MySQL)数据库。我无法插入明文密码，并且我的应用程序需要[SHA-1](http://en.wikipedia.org/wiki/SHA-1)哈希作为密码。快速的在线搜索将我指向[Python 的](http://en.wikipedia.org/wiki/Python_%28programming_language%29)hashlib 库。

这是我生成 SHA-1 哈希的 Python 代码：

```
import hashlib
m = hashlib.sha1();
m.update("kpVtk5y6");
m.digest(); 
```

如何在 SQL 查询中使用 m.digest 来存储密码？

我的 Web 应用程序使用 Java 的 MessageDigest.digest(mypassword.getBytes()) 方法来存储密码，所以我需要在 Python 中实现类似的东西才能自动注入用户帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T01:15:40.283

在 Python 中，您不需要在行尾添加分号。

根据[https://stackoverflow.com/a/5241478/181772](https://stackoverflow.com/a/5241478/181772)，您所说的应该可行。例如：

```
conn = MySQLdb.connect(host='localhost')
r = conn.cursor()
r.execute('INSERT INTO users (hash) VALUES (%s)', m.digest())
conn.commit() 
```

因为`m.digest()`返回的`str`是 Python 2 的字节等价物。上面的链接显示这些可以插入到 MySQL 数据库中。

因此，如果这就是您已经在做的事情，那么听起来您的代码中有错误。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中选择了错误的路由

> ID：10759469
> 
> 赞同：0
> 
> 时间：2012-05-25T18:16:26.293
> 
> 标签：asp.net-mvc-3, routes

请有人对这个问题有所了解，这让我发疯！

路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
     "DefaultOrderingRoute", // Route name
     "{controller}/{action}/{id}/{slug}", // URL with parameters
     new { controller = "Order", slug = UrlParameter.Optional }, // Parameter defaults
     new { controller = "^Order$" }
    );

    routes.MapRoute(
      "DefaultImageRoute", // Route name
      "{controller}/{action}/{id}", // URL with parameters
      new { controller = "Image", }, // Parameter defaults
      new { controller = "^Image$" }
    );

    routes.MapRoute(
      "FooterRoute", //route for invoking actions for the Footer
      "{controller}/{action}", // URL with parameters
      new { controller = "Footer", }, // Parameter defaults
      new { controller = "^Footer$" }
    );

    routes.MapRoute(
       "DefaultDealRoute", // Route name
       "{city}/{category}/{id}/{slug}", // URL with parameters
       new { category = Deals.Globals.Global.CATEGORY_ALL_NAME, controller = "Deal", action = "Details", slug = UrlParameter.Optional }, // Parameter defaults
       new { controller = "^Deal$", id = @"\d+" }
    );

    routes.MapRoute(
        "DealRouteForCategory", // Route name
        "{city}/{category}", // URL with parameters
        new { city = "", category = Deals.Globals.Global.CATEGORY_ALL_NAME, controller = "Deal", action = "Details" }, // Parameter defaults   
        new { controller = "^Deal$" }
    );
} 
```

我添加了对 routedebugger 的引用，以查看引擎盖下发生了什么。因此，对于选定的 URL：

[http://my.SERVER.IP/VirtualDirectoryName/Order/PayPalNotify/9/blabla](http://my.SERVER.IP/VirtualDirectoryName/Order/PayPalNotify/9/blabla)

URL 调试器显示以下内容：

AppRelativeCurrentExecutionFilePath: ~/Order/PayPalNotify/9/adfaf （正是我所期望的）！！！

调试器还显示路由 DefaultOrderingRoute 和 DefaultDealRoute 匹配（这是我没想到的！因为我对路由有限制！！）。

它还表明匹配的路由是：

匹配路线：{controller}/{action}/{id}/{slug}

带有路线数据：

```
controller:  Deal
action:      Details
id:          9
slug:        adfaf
city:        Athens
category:    All 
```

这怎么可能？？我究竟做错了什么？

PS。我注意到通过**重新发布**URL 正确的路由被执行！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:08:59.320

谜团解开了：我做了一件非常糟糕的事情（！）：

在 Session_Start() 我有某处代码执行以下操作（除其他外）

```
 Session_Start() 
    {
// code snippet out for brevity 
//setup the city route values
    HttpContext.Current.Request.RequestContext.RouteData.Values["city"] = cityToBeginWith;
//setup the category route values
    HttpContext.Current.Request.RequestContext.RouteData.Values["category"] = Deals.Globals.Global.CATEGORY_ALL_NAME;
//setup the controller route values
    HttpContext.Current.Request.RequestContext.RouteData.Values["controller"] = "Deal";
//setup the action route values
    HttpContext.Current.Request.RequestContext.RouteData.Values["action"] = "Details";    
    } 
```

这导致选择了“虚假”路线……非常糟糕！

# jquery - 如何在 IE8 中单击按钮时以全屏模式打开当前窗口

> ID：10759483
> 
> 赞同：1
> 
> 时间：2012-05-25T18:17:19.223
> 
> 标签：jquery, asp.net-mvc-2, internet-explorer-8, fullscreen

我在我的 MVC 代码中应用了一个 jquery 函数，以便在单击按钮时以全屏模式显示我的当前窗口。这是它的jquery：-

```
function FullScreen() {
    if ((document.fullScreenElement && document.fullScreenElement !== null) || // alternative standard method
    (!document.mozFullScreen && !document.webkitIsFullScreen)) { // current working methods
        if (document.documentElement.requestFullScreen) {
            document.documentElement.requestFullScreen();
        } else if (document.documentElement.mozRequestFullScreen) {
            document.documentElement.mozRequestFullScreen();
        } else if (document.documentElement.webkitRequestFullScreen) {
            document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
        }
    } else {
        if (document.cancelFullScreen) {
            document.cancelFullScreen();
        } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
        } else if (document.webkitCancelFullScreen) {
            document.webkitCancelFullScreen();
        }
    }
} 
```

我已经在标签的 onclick 事件上调用了这个函数。有了这个，我可以在 Chrome 和 Mozilla 上以全屏模式点击按钮打开我的窗口，也可以在按下 ESC 键时退出全屏模式。但是在 IE8 中，当我单击按钮时，什么也没有发生。我怎样才能使这个功能适用于 IE8。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:25:14.140

如果浏览器支持全屏 API（Chrome、FX10、Safari 6、Opera 12.1），那么您可以使用它。

如果不是（例如 IE8），那么出于安全原因，您不应该模仿它：如果我可以创建一个全屏运行的页面而不先通知用户，那么我可以模仿要求输入密码的操作系统界面元素之类的。

[这是网络钓鱼诈骗如何运作的](http://feross.org/html5-fullscreen-api-attack/)一个很好的例子。

这个安全原因是 WebKit 实现禁用键盘输入的原因。

IE 曾经支持 chrome-less 弹出窗口，但这[在 IE6 中作为安全漏洞被删除](http://www.kb.cert.org/vuls/id/490708)。

例如，您可以尝试发送 F11 键：

```
var shell = new ActiveXObject("WScript.Shell");
shell.SendKeys("{F11}"); 
```

但这不应该在互联网环境中被允许（它可能在受信任的域中，具体取决于用户设置）。

IE10 无论如何都会全屏运行（默认情况下），因此仍然不支持此 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:50:04.597

抱歉，IE8 还不支持全屏 API。[这](http://www.sitepoint.com/html5-full-screen-api/)是一篇关于使用全屏 API 的好文章。它还指出 Internet Explorer 不支持全屏 API。

> Internet Explorer 或 Opera 尚不支持，但我建议您使用 'ms' 和 'o' 前缀以备将来验证。

# jquery - Jquery 中的多个追加调用在 IE 8 中失败

> ID：10759484
> 
> 赞同：0
> 
> 时间：2012-05-25T18:17:22.207
> 
> 标签：jquery, html, xml, ajax, append

因此，我正在开发一个使用 jquery 解析 xml 数据并将其动态添加到表中的 Web 应用程序。在页面的同一部分有四个表可以切换。这是相关的html：

```
<div id = "toggleSection">
<div id = "autoPrevData"></div>
<div id = "firePrevData"></div>
<div id = "auto1Data"></div>
<div id = "auto2Data"></div>
<div id = "auto3Data"></div>
</div> 
```

这是带有 AJax 的 Jquery 函数：

```
 $("#autoEarly").click(function() {
        if (!$("#firePrevData").is(":hidden")) {
            $("#firePrevData").toggle('slow');
        }
        if (!$("#auto1Data").is(":hidden")) {
            $("#auto1Data").toggle('slow');
        }
        if (!$("#auto2Data").is(":hidden")) {
            $("#auto2Data").toggle('slow');
        }
        if (!$("#auto3Data").is(":hidden")) {
            $("#auto3Data").toggle('slow');
        }
        if (loadedModels[0]) {
            loadedModels[0] = false;
            $.ajax
        ({
            type: "GET",
            url: "dashboard_auto.xml",
            dataType: "xml",
            success: parseXml_AutoEarly
        });
        }
        else {
            $("#autoPrevData").toggle('slow');
        }
        return false;

    }); 
```

这是实际解析 xml 的函数：

```
 function parseXmlEarlyPrevention(xml, xmlRoot, data) {
    //First Header
    $(data).append("<table><tr><th colspan='5'>Model Information</th><th colspan='4'>Score Metrics</th><th colspan='5' >Variable Metrics</th><th colspan='5' style='600;'>Pseudo-Standardized Coefficient Metrics</th></tr>");
    //Second headers
    $(data).append("<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td class='thickBorder'>&nbsp;</td><td colspan='2' style='font-size:1em; color:#888888; border-right:1px solid black'>PSI:</td><td colspan='2' style='font-size:1em; color:#888888; border-right:2px solid black;'>Divergence:</td><td colspan='2' style='font-size:1em; color:#888888; border-right:1px solid black;'>Divergence:</td><td colspan='3' style='font-size:1em; color:#888888; border-right:2px solid black;'>Largest Divergence:</td><td colspan='2' style='font-size:1em; color:#888888; border-right:1px solid black;'>Sum of Changes:</td><td colspan='3' style='font-size:1em; color:#888888;'>Largest Change in Relative Importance:</td></tr>");
    //Third Headers
    $(data).append("<tr><td>Model</td><td>Avg Rank</td><td>Benchmark</td><td>Current</td><td class='thickBorder'># in Curr Period</td><td>Rank</td><td class='thinBorder'>Value</td><td>Rank</td><td class='thickBorder'>Value</td><td>Rank</td><td class='thinBorder'>Average</td><td>1st</td><td>2nd</td><td class='thickBorder'>3rd</td><td>Rank</td><td style='border-right:1px solid black;'>Value</td><td>1st</td><td>2nd</td><td>3rd</td></tr>");

        var x = 1;
        $(xml).find(xmlRoot).each(function() {
            if (x % 2 == 1) {
                $(data).append("<tr>");
                $(data).append("<td class='dataCellBlue'><a href = 'modelInfo.php?model=" + $(this).find("model").text() + "$type=earlyPrev'>" + $(this).find("model").text() + "</a></td>");
                $(data).append("<td class='dataCellBlue'>" + $(this).find("avg_rank").text() + "</td>");
                $(data).append("<td class='dataCellBlue'>" + $(this).find("benchmark").text() + "</td>");
                $(data).append("<td class='dataCellBlue'>" + $(this).find("current").text() + "</td>");
                $(data).append("<td class='dataCellBlue thickBorder'>" + $(this).find("n_current").text() + "</td>");
                $(data).append("<td class='dataCellBlue " + $(this).find("psi_color").text() + "'>" + $(this).find("psi_rank").text() + "</td>");
                $(data).append("<td class='dataCellBlue thinBorder'>" + $(this).find("psi").text() + "</td>");
                $(data).append("<td class='dataCellBlue'>" + $(this).find("divergence_rank").text() + "</td>");
                $(data).append("<td class='dataCellBlue thickBorder'>" + $(this).find("divergence").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("var_color").text() + "'>" + $(this).find("var_div_rank").text() + "</td>");
                $(data).append("<td class='dataCellBlue thinBorder'>" + $(this).find("avg_var_div").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("worst_div_col1").text() + "'>" + $(this).find("worst_div1").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("worst_div_col2").text() + "'>" + $(this).find("worst_div2").text() + "</td>");
                $(data).append("<td class='dataCellBlue thickBorder" + $(this).find("worst_div_col3").text() + "'>" + $(this).find("worst_div3").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("psc_color").text() + "'>" + $(this).find("psc_rank").text() + "</td>");
                $(data).append("<td class='dataCellBlue thinBorder'>" + $(this).find("sum_psc").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("worst_psc_col1").text() + "'>" + $(this).find("worst_psc_var1").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("worst_psc_col2").text() + "'>" + $(this).find("worst_psc_var2").text() + "</td>");
                $(data).append("<td class='dataCellBlue" + $(this).find("worst_psc_col3").text() + "'>" + $(this).find("worst_psc_var3").text() + "</td>");
                $(data).append("</tr>");
            }
            else {
                $(data).append("<tr>");
                $(data).append("<td><a href = 'modelInfo.php?model=" + $(this).find("model").text() + "$type=earlyPrev'>" + $(this).find("model").text() + "</a></td>");
                $(data).append("<td>" + $(this).find("avg_rank").text() + "</td>");
                $(data).append("<td>" + $(this).find("benchmark").text() + "</td>");
                $(data).append("<td>" + $(this).find("current").text() + "</td>");
                $(data).append("<td class='thickBorder'>" + $(this).find("n_current").text() + "</td>");
                $(data).append("<td class='" + $(this).find("psi_color").text() + "'>" + $(this).find("psi_rank").text() + "</td>");
                $(data).append("<td class='thinBorder'>" + $(this).find("psi").text() + "</td>");
                $(data).append("<td>" + $(this).find("divergence_rank").text() + "</td>");
                $(data).append("<td class='thickBorder'>" + $(this).find("divergence").text() + "</td>");
                $(data).append("<td class='" + $(this).find("var_color").text() + "'>" + $(this).find("var_div_rank").text() + "</td>");
                $(data).append("<td class='thinBorder'>" + $(this).find("avg_var_div").text() + "</td>");
                $(data).append("<td class='" + $(this).find("worst_div_col1").text() + "'>" + $(this).find("worst_div1").text() + "</td>");
                $(data).append("<td class='" + $(this).find("worst_div_col2").text() + "'>" + $(this).find("worst_div2").text() + "</td>");
                $(data).append("<td class='thickBorder" + $(this).find("worst_div_col3").text() + "'>" + $(this).find("worst_div3").text() + "</td>");
                $(data).append("<td class='" + $(this).find("psc_color").text() + "'>" + $(this).find("psc_rank").text() + "</td>");
                $(data).append("<td class='thinBorder'>" + $(this).find("sum_psc").text() + "</td>");
                $(data).append("<td class='" + $(this).find("worst_psc_col1").text() + "'>" + $(this).find("worst_psc_var1").text() + "</td>");
                $(data).append("<td class='" + $(this).find("worst_psc_col2").text() + "'>" + $(this).find("worst_psc_var2").text() + "</td>");
                $(data).append("<td class='" + $(this).find("worst_psc_col3").text() + "'>" + $(this).find("worst_psc_var3").text() + "</td>");
                $(data).append("</tr>");
            }
            x++;

        });
        $(data).append("</table>");
        $(data).toggle("slow");
    } 
```

问题是只有第一个 $(data).append() 调用中的 html 被显示，之后什么也没有。它在 safari 和 firefox 中运行良好，但它适用于工作，我需要它在 IE 上运行。我已经在互联网上倾注了几个小时试图找到一个好的解释，但到目前为止我还没有运气，坦率地说，这让我有点发疯。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:21:29.797

DOM 更新代价高昂，在这种情况下每次追加后都会发生更新。最好将其构建为一个字符串并一步插入。

# java - Spring RequestMapping 参数属性 IE 405

> ID：10759485
> 
> 赞同：0
> 
> 时间：2012-05-25T18:17:23.077
> 
> 标签：java, spring, internet-explorer, button, spring-mvc

我在控制器中有一个 RequestMapping：

```
@Controller
class aController{
...

@RequestMapping("/action", method=RequestMethod.POST, params="actionName"){
//some logic
}
} 
```

在 JSP 中：

```
<form action="/action" type="POST">
 <input type="submit" name="actionName" value="actionName">
 <input type="submit" name="xyz" value="XYZ">
</form> 
```

问题是当使用 Chrome 或 Firefox 浏览器时，来自 JSP 的请求会被映射。但在 IE 中，它无法锁定请求映射，因为 IE 处理按钮名称的方式。要解决此问题，我必须添加以下内容：

```
 <input type="hidden" name="actionName" value="actionName"/> 
```

问题是有多个按钮映射到不同的 RequestMapping(params="") 的几个页面。我不想开始到处添加隐藏字段。有没有更好的方法来解决这个愚蠢的 IE 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:05:06.847

根据我的说法，您应该使用 javascript 来处理提交按钮的 onclick 事件，然后从该函数中您可以更改表单标签的操作。尝试将所需的参数添加到操作并将表单方法声明为 GET。

我认为这应该可以解决您的问题。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:06:21.710

我解决了 IE 问题，方法是使用一个隐藏字段，并将按钮的所需 actionName 作为值传递：

```
 <input type="hidden" name="actionName" value="actionName"> 
```

这个解决方案解决了我在 IE 浏览器上遇到的问题。

# php - Zend_Http_Client - 为什么我的 POST 请求发送错误的内容类型标头？

> ID：10759490
> 
> 赞同：1
> 
> 时间：2012-05-25T18:17:33.547
> 
> 标签：php, zend-framework, zend-http-client

我正在使用 Zend Http 客户端调用外部服务。该服务允许我将文件上传到他们的存储系统。它需要在查询字符串中发送相关参数（用户 ID 等），文件上传内容应在 POST 正文中发送，内容类型为“application/zip”（我发送的是 zip 文件里面有各种各样的东西）。

为此，我使用 zend 客户端的 setParameterGet() 函数在查询字符串中设置参数。然后我使用 setFileUpload() 函数设置文件上传内容：

```
$this->client->setFileUpload($zipFilePath, 'content', null, 'application/zip'); 
```

但是，该服务告诉我我发送的内容类型错误，即“multipart/form-data”

这是 Zend 客户端发送到服务的原始标头（请注意，我已经删除了一些敏感信息，将它们替换为包含在 [] 括号中的项目名称）

> POST https://[ServiceURL]?cmd=[COMMAND]&enrollmentid=[ENROLLMENTID]&itemid=[ITEMID]
> 
> HTTP/1.1
> 
> 主机：[HOST] 接受编码：gzip、deflate
> 
> 用户代理： Zend_Http_Client Cookie：
> 
> AZT=9cMFAIBgG-eM1K|Bw7Qxlw7pBuPJwm0PCHryD;
> 
> 内容类型：multipart/form-data；边界=---ZENDHTTPCLIENT-05535ba63b5130ab41d9c75859f678d8
> 
> 内容长度：2967
> 
> -----ZENDHTTPCLIENT-05535ba63b5130ab41d9c75859f678d8
> 
> 内容处置：表单数据；名称=“内容”；文件名="agilixContent.zip"
> 
> 内容类型：应用程序/zip
> 
> [此处的原始文件数据]

所以基本上，即使我设置了 POST 内容类型标头，我的外部服务也会告诉我我发送了错误的内容类型，因为还有另一个值为“multipart/form-data”的内容类型标头。我尝试更改/删除该内容标题，但无济于事。**如何删除该标头，以便我的请求中不会有这两个重复的“内容类型”标头？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:54:58.420

`->setFileUpload()`如果您想使用“application/zip”作为内容类型上传文件，则不应使用`->setRawData()`. `setFileUpload()`用于模仿您不需要*的基于 HTML 表单的文件上传。*

有关详细信息，请参阅[http://framework.zend.com/manual/en/zend.http.client.advanced.html#zend.http.client.raw_post_data](http://framework.zend.com/manual/en/zend.http.client.advanced.html#zend.http.client.raw_post_data)。您需要的（基于您的原始示例）将类似于：

```
$zipFileData = file_get_contents($zipFilePath);
$this->client->setRawData($zipFileData, 'application/zip');
$response = $this->client->request('POST'); 
```

请注意，如果您的 ZIP 文件可能非常大（例如超过几兆字节），您可能需要使用 ZHC 的流媒体支持功能，因此请避免占用内存。如果您知道您的文件总是小于 5-10 兆字节，那么我不会为此烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:43:07.247

我不确定如何使用 Zend HTTP Client 做到这一点，但我相信你可以使用纯 cURL 做到这一点。正如您必须知道的，cURL 为您提供了很大的灵活性，我还没有深入研究 Zend，但 Zend 可能会在内部使用 cURL。

```
<?php

// URL on which we have to post data
$url = "http://localhost/tutorials/post.php";
// Any other field you might want to catch
$post_data = "khan";
// File you want to upload/post
//$post_data['zip_file'] = "@c:/foobar.zip";

$headers[] = "Content-Type: application/zip";

// Initialize cURL
$ch = curl_init();
// Set URL on which you want to post the Form and/or data
curl_setopt($ch, CURLOPT_URL, $url);
// Data+Files to be posted
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
// Set any custom header you may want to set or override defaults
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 
// Pass TRUE or 1 if you want to wait for and catch the response against the request made
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// For Debug mode; shows up any error encountered during the operation
curl_setopt($ch, CURLOPT_VERBOSE, 1);
// Execute the request
$response = curl_exec($ch);

// Just for debug: to see response
echo $response; 
```

我希望上面的片段对你有用。这是下面提到的我的博客文章中的一些修改代码。

参考：http: [//blogs.digitss.com/php/curl-php/posting-or-uploading-files-using-curl-with-php/](http://blogs.digitss.com/php/curl-php/posting-or-uploading-files-using-curl-with-php/)

# javascript - 如何将此字符串转换为某个数组？

> ID：10759496
> 
> 赞同：0
> 
> 时间：2012-05-25T18:18:11.237
> 
> 标签：javascript, jquery

我正在使用一个 3rd 方插件，它使用 stringify 并给了我类似的东西：

```
["ProjectB","ProjectA","Paris"] 
```

它是一个数组，但它使用了字符串化并序列化为这种格式。如何从中取回我的数组？现在我可以很好地使用 split 然后从每个字符串中删除第一个和最后一个字符并获取它，但我不想手动执行此操作。那是任何可以为我做的内置实用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:20:03.093

假设你喜欢`var str = '["ProjectB","ProjectA","Paris"]';`

尝试使用，

```
var array = JSON.parse(str); //will return you an array 
```

正如@AlexMA 指出的那样：`JSON.parse`旧浏览器不支持，所以你最好使用下面的 jQuery 版本，

```
var array = $.parseJSON(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:19:34.003

您可以使用

```
JSON.parse(your_arr_str); 
```

或jQuery

```
$.parseJSON(your_arr_str); 
```

# java - 接口最佳实践

> ID：10759500
> 
> 赞同：2
> 
> 时间：2012-05-25T18:18:39.630
> 
> 标签：java, interface, implementation

可能是一个普遍的问题，但是拥有一个接口（**Service**）和它的实现（**ServiceImpl**）被认为是一种不好的做法，但是**ServiceImpl**包含接口中不包含的*私有实用程序方法？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T18:20:11.877

一点也不坏的做法——我希望几乎*所有*重要的具体实现类都包含私有方法。替代方法通常是在类中拥有太大的方法体。

不要忘记，课堂*外*的任何人都不应该关心你是否有很多私有方法。他们应该只关心您的公共 API（或相关的包/受保护的 API）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T18:20:31.813

不，一点也不，正是你应该做的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T18:20:43.827

接口的原因是您定义了一个合同，您的实现可以有任意数量的私有方法来使该合同工作。

这绝不被认为是不好的做法，添加到它你的实现类也可以提供公共方法。

如果您不使用接口提供的 API，而是使用实现类的公共方法，这在一般情况下绝对是一种不好的做法，尽管有时无法避免这种情况。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-25T18:20:46.353

不，没关系。您的 Service 接口只列出了它想要向世界公开的内容。如何实施取决于您。如果使用这些私有实用程序方法来实现接口，那就没问题了。

# c# - 使用 c# 图表控件进行数据处理

> ID：10759501
> 
> 赞同：0
> 
> 时间：2012-05-25T18:18:41.150
> 
> 标签：c#, .net, visual-studio-2010

我有一个简短的问题要问大家。这是我第一次处理串行 I/O，想知道最有效的方法是什么。我将通过 rs-232 从激光中读取数据。

从研究中可以看出，我可以通过使用后台工作程序从串行端口创建缓冲区来完成此操作，然后让主线程访问该缓冲区以绘制和分析点。有没有更有效/更可靠的方法来做到这一点，或者这种方法将是我最好的选择？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:31:13.057

从设备读取数据的方式取决于从中检索数据的方式。我有一个从应变仪（连接到仪表）获取数据的应用程序。这个仪表自动吐出读数，所以我不必轮询它。因此，我只需使用`SerialPort`s DataReceived 事件并将数据添加到数组中。

我使用位于 UI 线程上的 Microsoft Chart Control（内置于 .NET 4.0），因此必须从 UI 线程更新它。数据进来的速度非常快（每秒约 100 个点），所以我要做的是构建一个 100 点数组，然后在启动新数组时将该数组发送到 UI 线程。这样 UI 会定期更新（每秒更新约 1 次）。

另一方面，如果您的设备需要轮询（每次都必须向其询问数据），那么您将需要一个位于紧密循环轮询中的专用线程。

# android - 在自定义视图中显示 TimePickerDialog 或 DatePicker

> ID：10759506
> 
> 赞同：0
> 
> 时间：2012-05-25T18:19:07.413
> 
> 标签：android, android-custom-view, android-datepicker

很久以前，我开发了一个自定义日期时间选择器控件。这个自定义选择器控件是继承自 LinearLayout 类开发的，具有一些功能，例如在设计时设置属性的“declare-styleable”属性，一组模拟事件的接口，最后还有大量的代码来播放效果和管理日期时间业务逻辑。

现在我需要通过在我的自定义控件中按下按钮来显示 DatePickerDialog 和 TimePickerDialog。我搜索了 android 知识库，发现显示这些对话框的唯一方法是[Developer's DatePicker Guide](http://developer.android.com/resources/tutorials/views/hello-datepicker.html)。

因为我的控件直接继承自LinearLayout，所以不能重写onCreateDialog()方法来提供对话框，因为LinearLayout没有这个方法！如何在我的自定义控件中显示这些对话框而不引用父活动？实际上，我希望有机会尽可能地在许多活动上绘制控件，而不必担心在每个活动上管理 onCreateDialog()，因为加载和启动对话框的代码在我的自定义控件中定义一次（就像你当您必须显示 MessageBoxes [MessageBox.Show() 不需要 Form 实例]) 时，在一个简单的 .NET 控件中执行...

我怎样才能做到这一点？提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:56:12.230

而不是使用 Activity.showDialog()、onCreateDialog() 等；只需使用 Dialog.show()。

```
Calendar calendar = Calendar.getInstance();
mDialog = new DatePickerDialog(context, onDateSetListener, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
mDialog.show(); 
```

在按钮的 onClickListener 中，您可以随意修改`mDialog`，然后调用`mDialog.show()`.

# fedex - 根据历史结果估算离线模式下的运费

> ID：10759516
> 
> 赞同：1
> 
> 时间：2012-05-25T18:19:46.360
> 
> 标签：fedex, ups

有时我的应用服务器可能无法使用 FedEx 或 UPS，或者我需要为单次交易处理 100 多个包裹。

在这些情况下，估计总比没有好。

目前我缓存了精确参数和“舍入”参数的结果，例如 from_zip[:2], round(weight, 10)

我应该看看哪些技术比这做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T03:04:56.937

我认为更好的方法是使用某种类型或[插值](http://en.wikipedia.org/wiki/Interpolation)来执行目标价格的[邻近搜索](http://en.wikipedia.org/wiki/Nearest_neighbor_search)。它可以像找到 2 个边界“点”并插值目标点​​的价格一样简单，可能还使用“距离”阈值来不产生过于“疯狂”的猜测。

无论哪种方式，通知用户价格是*估计值*并且可能会发生变化是非常重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:33:35.787

与其使用距离，不如使用区域查找表。您应该能够为您的帐户下载区域图表以及相关费率，以创建更简单的查找。

# c++ - 结合函数、绑定、C++ 和托管代码

> ID：10759517
> 
> 赞同：1
> 
> 时间：2012-05-25T18:19:50.173
> 
> 标签：c++, .net, c++11, c++-cli, tr1

我有一个 c++ 函数，它期望将函数对象（AuthenticateNotifyFunc）传递给它，因此：

```
class lc_Authenticate
{
public:
   typedef enum {
     kAbort,
     kContinue
   } lc_AuthenticateStatus;

   typedef std::tr1::function<lc_AuthenticateStatus (const string &msg)> AuthenticateNotifyFunc;

   bool Authenticate(lc_AuthenticateParams &params,
                     AuthenticateNotifyFunc notifyFunc);
} 
```

在托管的 c++ 项目中，我试图定义一个参数以传递给上述函数，因此：

```
public ref class Form1 : public System::Windows::Forms::Form
{
    public:
    lc_Authenticate::lc_AuthenticateStatus UpdateStatus(const string &msg)
    {
        <<DO SOMETHING>>
        return(lc_Authenticate::kContinue);
    }
    void test()
    {
        string appKey, appSecret;
        appKey = GetString(this->appKeyTextBox->Text);
        appSecret = GetString(this->appSecretTextBox->Text);

        lc_Authenticate dbauth;
        lc_AuthenticateParams params(appKey, appSecret);

        //  DOESN'T COMPILE won't let me take address of member function
        // or know about _1
        lc_Authenticate::AuthenticateNotifyFunc func =
            std::tr1::bind(&Form1::UpdateStatus, this, _1);

        dbauth.Authenticate(params, func);
    }
}; 
```

所以我试图实现一个将函数传递给 c++ 方法的通用方法，它不关心传递的函数是静态函数还是成员函数。而且我不清楚如何从托管代码中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:00:15.193

您不能通过设计绑定到托管类的实例方法。垃圾收集器在压缩堆时移动对象，导致*它*发生变化。您需要使用托管委托。所以你不能避免一个本地帮助类，它为你的函数<>提供你需要的稳定回调。您可以使用 Marshal::GetFunctionPointerForDelegate() 从那里返回托管代码。

# .net - 使用 IMultiValueConverter 将多个 CommandParameters 传递给 viewModel

> ID：10759523
> 
> 赞同：8
> 
> 时间：2012-05-25T18:20:14.837
> 
> 标签：.net, wpf, mvvm, relaycommand, imultivalueconverter

我有以下代码：

```
<DataGridTemplateColumn Header="Security">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Name="Security" Content="{Binding Path=totalSecurities}"
                    Command="{Binding Source={StaticResource viewModel}, Path=filterGridCommand}">
                <Button.CommandParameter>
                    <MultiBinding Converter="{StaticResource PassThroughConverter}">
                        <Binding Path="sector"/>
                        <Binding ElementName="Security" Path="Name"/>
                    </MultiBinding>
                </Button.CommandParameter>
            </Button>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

下面是 PassThroughConverter 的代码：

```
public class PassThroughConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameters, CultureInfo culture)
    {
        return values;
    }

    public object[] ConvertBack(object value, Type[] targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

当我一碰到返回值行进行调试时，正确的值在数组中，但是当我按下触发 filtergrid 命令的按钮时，返回的值都是空的？任何人都可以帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T21:09:06.087

一些实验证实这样做

```
public object Convert(object[] values, Type targetType, 
                      object parameters, CultureInfo culture)
{
    return values;
} 
```

导致命令参数以`object[] { null, null }`.

转换器在每次绑定值更改时运行，而不是在执行命令时运行，并且在执行命令时缓存返回值以供使用。原始参数`object[] values`似乎被重置为所有空值。

解决方案是克隆`values`参数。在您的情况下，您可以这样做：

```
public object Convert(object[] values, Type targetType, 
                      object parameter, CultureInfo culture)
{
    return new [] {values[0], values[1]};
} 
```

More usefully, a variable number of values can be handled like this:

```
public object Convert(object[] values, Type targetType, 
                      object parameter, CultureInfo culture)
{
    return values.ToArray();
} 
```

# php - 从 MySQL 获取数据到 android 并在“应用程序列表”选项卡下显示为列表？

> ID：10759524
> 
> 赞同：1
> 
> 时间：2012-05-25T18:20:26.417
> 
> 标签：php, android, mysql, json, android-c2dm

我是android开发的菜鸟..我有几个问题..

1 ...我在 MySQL 服务器的 localhost 中创建了数据库。所有“状态”的表。

Q2...我创建了 PHP 脚本来连接数据库，并从数据库中获取列表.. ...我需要将其转换为 Json 文件/数据以在 android 中读取...????

Q3 ...我为列表选项卡、获取和保存详细信息选项卡、设置选项卡创建了带有选项卡视图的 android 项目。其中详细信息是设置选项卡是表单视图元素，需要将它们写回 json n 将它们发送到 MySql 数据库。我该怎么做.. 在 php 或 android 或两者中......?????

Q4..当用户第一次安装应用程序并运行它时，我的应用程序应该向服务器发送移动注册ID......它是怎么做到的......？？？？？？我尝试了 C2DM，但没有运气..我首先在模拟器中测试所有内容..

我被这些问题困住了..在论坛和博客以及谷歌开发者论坛的帮助下，我为每个单独的功能创建了 10 多个项目..但在任何事情上都取得了成功.. PLZZZZZZZZZZZZZZZZZZZZZZZZZZ.... HELPPPPPPPPP ！！！ ！！！！！！！！！！！！

谢谢你的建议.. 苏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:28:20.653

Q1。通常使用该`json_encode()`函数将 PHP 数组输出为 JSON 对象。这可以由您的 android 应用程序通过 AJAX 调用使用，将 URL 传递给您的 PHP 脚本。

Q2。准备一个你想要正常输出的数组，然后调用`json_encode()`它。

Q3。翻阅 Android 文档，找到一个 JSON 编码函数。要“将其发送到 MySQL”，您需要通过 HTTP POST 请求将 JSON 输出传递到您的 PHP 脚本，该脚本可以验证数据并将其提交到数据库。

# metadata - 如何显示与自定义文档关联的元数据

> ID：10759527
> 
> 赞同：2
> 
> 时间：2012-05-25T18:20:36.280
> 
> 标签：metadata, liferay

我想查看与自定义文档关联的自定义元数据，我使用文档库创建，有人知道如何使用速度变量吗？

在此先感谢萨布丽娜 ![在此处输入图像描述](../Images/f5138823a31ebe3a4a54a7593826df5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:14:26.170

您可以通过以下方式获取一些元数据文章属性

```
$reserved-article-id.data
$reserved-article-title.data 
```

您可以在[此处找到完整列表](http://www.liferay.com/community/wiki/-/wiki/Main/CMS+Template+%28Velocity%29#section-CMS+Template+%28Velocity%29-Getting+data+out+of+different+types+of+fields)

你也可以查看这篇[文章](http://java-liferay.blogspot.com/2012/05/get-catgories-at-liferays-cms-template.html)，它有如何在速度模板上获取期刊类别的示例。

UPD。要获取文档元数据，您可以像这样使用 smth：

```
#set($dlFileUtil =  $serviceLocator.findService("com.liferay.portlet.documentlibrary.service.DLFileE‌​ntryLocalService")) 
#set ($groupId = $getterUtil.getLong($groupId)) 
#set($fileEntry = $dlFileEntryUtil.getFileEntryByUuidAndGroupId($uuid,$longGroupId))    
#set($metadataUtil=$serviceLocator.findService("com.liferay.portlet.documentlibrary.service.DLFileE‌​ntryMetadataLocalService")) 
```

您可以使用$ ***metadataUtil中的******getFileEntryMetadata(ddmStructureId, fileVersionId)***

 *更详细的代码你可以检查[这个](http://liferay.com/community/forums/-/message_boards/message/10805788)。

BR，保罗·布滕科*

# php - 带变量的图像源

> ID：10759528
> 
> 赞同：1
> 
> 时间：2012-05-25T18:20:37.523
> 
> 标签：php, html

这是错的吗？

```
<img src="frame_src/"<?php echo $frameid ?>".png"/> 
```

$frameid 等于一个数字 ie= 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:21:47.503

试试这个：-

```
<img src="frame_src/<?php echo $frameid ?>.png"/> 
```

我删除了两个引号 (")

根据您的设置，您也可以执行此操作...

```
<img src="frame_src/<?=$frameid ?>.png"/> 
```

# postgresql - 具有重叠时间戳范围的排除约束

> ID：10759531
> 
> 赞同：3
> 
> 时间：2012-05-25T18:20:45.653
> 
> 标签：postgresql, postgresql-9.1

我想有一个等价的：

```
create table t (
    fromts timestamptz, 
    tots timestamptz,
    exclude using gist ((fromts, tots) with overlaps)
);
ERROR:  syntax error at or near ","
LINE 4:         exclude using gist ((fromts, tots) with overlaps) 
```

我猜除了语法错误之外，还有不可交换运算符的问题。

使它工作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:05:58.987

起初这似乎是做作的，但它是开箱即用的（不是双关语）：

正如@Quassnoi 帮助我发现的那样，这仅适用于`timestamp`，不适用于`timestamptz`：

```
CREATE TABLE t (
    fromts timestamp, 
    tots   timestamp,
    exclude using GIST (box(point(EXTRACT(EPOCH FROM fromts), 0)
                          , point(EXTRACT(EPOCH FROM tots),   0)) WITH &&)
); 
```

我的测试是`timestamp`- 在你澄清类型之前。`EXTRACT`是`IMMUTABLE`，`timestamp`但不是`timestamptz`。@Quassnoi 在下面的评论中发布了一个关于为什么会这样的假设。

因此，对于`timestamp with time zone`，您必须`IMMUTABLE`使用 @Quassnoi 在他的回答中演示的辅助函数进行转换。

### 在 Postgres 9.2 或更高版本中

...对于这种特殊情况，您可以使用新引入的[**范围类型。**](http://www.postgresql.org/docs/current/interactive/rangetypes.html)[该手册提供了带有排除约束的完整代码示例。](http://www.postgresql.org/docs/current/interactive/rangetypes.html#RANGETYPES-CONSTRAINT)`tstzrange`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T19:03:22.277

`PostgreSQL`需要一个命名类型和一个运算符类才能使排除约束起作用。在`9.1`，`RANGE`尚未实施。

您可以定义自己的，但这需要超级权限（即不适用于托管数据库等）

您可以尝试将时间戳转换为框并使用相交运算符 ( `&&`) 定义约束：

```
CREATE FUNCTION ts_to_box(TIMESTAMPTZ, TIMESTAMPTZ)
RETURNS BOX
AS
$$
    SELECT  BOX(POINT(DATE_PART('epoch', $1), -1), POINT(DATE_PART('epoch', $2), 1))
$$
LANGUAGE 'sql'
IMMUTABLE;

CREATE TABLE t (
    fromts timestamptz, 
    tots timestamptz,
    EXCLUDE USING GIST (ts_to_box(fromts, tots) WITH &&)
); 
```

# c++ - 模板 (C++) - 不确定是否正确

> ID：10759535
> 
> 赞同：4
> 
> 时间：2012-05-25T18:20:58.690
> 
> 标签：c++, class, templates

我是一名学生，我正在为 C++ 中的数组做一个静态库，所以我不必每次上课都重写代码。

我在中学二年级，所以我不是专家。我希望我的代码与所有类型（int、float、ecc）兼容，但我遇到了一些麻烦。

你能看看我的代码吗？

```
// slarray.h
#if !defined _SLARRAY_
#define _SLARRAY_

template <typename Tipo> class Array {
  public:
    void inserisci();
    void visualizza();
    void copia(Tipo*);
    Array(short);
    ~Array();
  private:
    Tipo* ary;
    short* siz;
};

#endif 
```

* * *

```
// slarray.cpp   
#include <iostream>
#include "slarray.h"

unsigned short i;
unsigned short j;

template <typename Tipo> void Array<Tipo>::inserisci() {
  for (i = 0; i < *siz; i++) {
    std::cout << i << ": ";
    std::cin  >> ary[i];
  }
}
template <typename Tipo> void Array<Tipo>::visualizza() {
  for (i = 0; i < *siz; i++) {
    std::cout << ary[i] << " ";
  }
}
template <typename Tipo> void Array<Tipo>::copia(Tipo* arycpy) {
  for (i = 0; i < *siz; i++) {
    *(arycpy + i) = ary[i];
  }
}
template <typename Tipo> Array<Tipo>::Array(short n) {
  siz = new short;
  *siz = n;
  ary = new Tipo[n];
}
template <typename Tipo> Array<Tipo>::~Array() {
  delete[] ary;
  delete siz;
} 
```

当我尝试使用以下方法初始化类时，代码给了我错误：

```
Array <int> vct(5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:23:21.053

模板实现需要对专门化它们的翻译单元可见。

将实现从`cpp`.

其他一些注意事项：

*   `unsigned short i;unsigned short j;`应该是本地的，没有必要将它们作为全局变量。

*   `_`以大写字母开头的宏是保留的，所以`_SLARRAY_`是非法的，重命名它。

*   实现赋值运算符和复制构造函数，否则所有复制都是浅的。

我假设你不能使用`std`，否则你知道容器已经存在，对吧？

# dll - 是否可以配置 DLL 引用以始终加载最新的可用版本？

> ID：10759536
> 
> 赞同：1
> 
> 时间：2012-05-25T18:21:02.953
> 
> 标签：dll, assemblies, version, gac

假设我有一个引用 3rd 方库 X 的项目 A。当我构建 A 的 v1.0 时，我引用了 X 的 v2.0。

2 个月后，X 的 v2.1 发布，其中包含一些对我们很重要的错误修复。但是，由于版本不匹配，我无法单独部署它。

我知道有效的程序集绑定重定向。我想知道是否有一种方法可以指定给定的引用绑定到最新的可用版本，而无需添加任何配置条目等？（考虑使用引用其他供应商的 DLL 的 DLL 来支持客户端）

# java - 使用 CXF 和 Tomcat 的 WSDL 导入位置

> ID：10759554
> 
> 赞同：0
> 
> 时间：2012-05-25T18:22:14.323
> 
> 标签：java, api, tomcat, wsdl, cxf

我正在使用 CXF 以 Java 和 Tomcat 作为应用程序容器来生成 WSDL。我遇到了 wsdl 导入位置不包括 ssl 链接版本的问题。这是示例：

```
<wsdl:import location="http://api.test.com/soap_admin?wsdl=AdminApi.wsdl" namespace="http://admin.test.com"></wsdl:import> 
```

应该是（我知道如何更改命名空间值，而不是位置值）：

```
<wsdl:import location="https://api.test.com/soap_admin?wsdl=AdminApi.wsdl" namespace="https://admin.test.com"></wsdl:import> 
```

我前面还有一个负载均衡器，它正在执行 SSL 身份验证，然后它重定向到它后面的 2 个不同服务器之一。WSDL 可以毫无问题地被拉取，但只是为了保持一致性，希望位置字段中包含 https。

此外，我还看到了许多其他关于堆栈溢出的问题，它们是半相同的，但没有什么是准确的。例如这个链接：

[在 wsdl:import 中指定位置](https://stackoverflow.com/questions/7390097/specify-location-in-wsdlimport)

但这是在 WCF 堆栈上完成的，根本不是我正在使用的。我的直觉也告诉我这是一个简单的 CXF 或 Tomcat 配置更改。此外，如果我将它部署在我的一台不使用 SSL 的开发服务器上不包含 https，那么它是动态的也很好。

请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:50:55.130

通过向我的 tomcat 7 的 server.xml 配置添加另一个连接器端口来解决此问题：

```
<Connector port="8081" maxHttpHeaderSize="8192"
maxThreads="300" minSpareThreads="25" maxSpareThreads="75"
enableLookups="false" redirectPort="8443" acceptCount="100"
connectionTimeout="20000" scheme="https" proxyPort="443" proxyName="your.frontend.address" disableUploadTimeout="true" /> 
```

另外@Donal，我现在基本上定义了如何连接到这个tomcat的两个版本。我刚刚列出的代码将我的负载均衡器指向，然后对于内部用户，我仍然定义了一个 8080 连接器端口。显然可以将该配置调整为适合您需要的任何内容。您的解决方案确实有效，但仍然有相当不成熟的产品，我不想一直这样做。

我最初认为这是一个 CXF 问题，但结果发现它是一个 tomcat 配置更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:03:23.277

我总是尝试保留我从中生成源代码的 WSDL 文档的本地副本，以便在服务碰巧暂时关闭时我的构建不会失败。是的，这意味着服务位置不正确，但这很容易通过在 Server 对象上设置属性来解决，就像设置用户名和密码一样。（当然，如果有服务 API 更改，无论如何我可能需要更改相当多的代码。）一旦您保留了本地副本，只需设置`<wsdl:import location=… />`为本地路径（使用文本编辑器！）；代码生成完成*后将不会*使用该位置。

尝试从实时服务中生成源代码是一个绝妙的想法，但它对于大多数部署来说确实很糟糕。制作副本，提高构建可靠性，减少担心（或至少担心其他事情）。

# javascript - 显示动画完成后，标签内的 Javascript 代码运行

> ID：10759556
> 
> 赞同：1
> 
> 时间：2012-05-25T18:22:18.910
> 
> 标签：javascript, jquery, jquery-ui

我有一个 div 容器，里面有 javascript 代码，我不能将代码移到外面，所以我能做些什么来防止第二次运行这个 fot 链接到小提琴。 [http://jsfiddle.net/f5caT/4/](http://jsfiddle.net/f5caT/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:28:16.647

如果警报只应在页面加载时显示，那么您只需在为 div 设置动画之前删除脚本块

[http://jsfiddle.net/f5caT/8/](http://jsfiddle.net/f5caT/8/)

```
$(function(){
    $('button').click(function(e){
     $('#hidden')
         .find("script").remove().end()
         .show('slide',1000);
    });

});​ 
```

# django - Django - 请求 POST

> ID：10759558
> 
> 赞同：7
> 
> 时间：2012-05-25T18:22:23.683
> 
> 标签：django, post, request

我应该使用（为什么？）：

```
if request.POST 
```

或者：

```
if request.method == 'POST' 
```

除了语法有什么不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T18:24:11.470

如果要检查请求方法，请使用`if request.method == 'POST'`.

`request.POST`是 post param dict，当涉及到请求方法时，你不应该指望它的存在或缺乏。（例如，没有参数的发布请求在该测试中失败。）

> 显式优于隐式。-- PEP 20，Python 之禅

# c++ - 计数没有 RTTI 的对象

> ID：10759559
> 
> 赞同：2
> 
> 时间：2012-05-25T18:22:24.060
> 
> 标签：c++, oop, design-patterns, polymorphism

我遇到了一个让我觉得很愚蠢的问题。在一个爱好项目中，我有一个指向接口类的指针的 std::list，它指向所述接口的各种具体实现。

例如，假设我有以下内容：

```
class Seafood ...
class Fishstick : public Seafood ...
class Squid : public Seafood ...
...
std::list<Seafood*> buffet; 
```

现在我的自助餐里有不同的海鲜，我想计算一下我有多少鱼条，看看是否需要从厨房订购更多。

如果没有 RTTI 或其一些不正当的实现，我将如何做到这一点？我读过一些文章声称如果您发现自己想要使用 RTTI，那么您正在以错误的方式接近 OOP 和/或您的解决方案应该重新设计。是否有一些模式或其他解决方案可以解决这个问题？我敢肯定，以前曾多次浮出水面。

我在想很明显这是某种虚函数，但是如果不构建俗气的 RTTI 版本或有关接口中后代的一些知识（CountIfFishstick / IsFishstick / Is(type)），我无法弄清楚如何做到这一点）。

编辑：想到的另一件事是保留一份鱼竿列表，一份鱿鱼列表等。但这肯定会破坏界面/实现的整个目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:25:28.617

您可能想要访问者模式的一些变体。有很多，很难说你想要哪个。我可能会推荐获得*Modern C++ Design*并查看 Alexendrescu 的实现。否则，谷歌“访问者模式”，你会得到 1000 公里的链接来阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:56:14.430

复合模式怎么样？自助餐真的是海鲜系列的集合。FishStick 和 Squid 是 Composite 模式中的“组件”，它们将保持其项目数。所以当 Buffet 是 list 时，它可以遍历和调用 Composites 上的 count。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:28:54.273

[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)是您正在寻找的。还有一个特殊版本的访问者，称为[非循环访问者](http://www.objectmentor.com/resources/articles/acv.pdf)，它使用 RTTI 来解决原始访问者的一些问题，所以 RTTI 并不总是错误的，但除非你真的知道自己在做什么，否则它*会*导致可怕的代码。 .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T19:18:12.500

大概你`name`在基类中有一个函数来返回项目的名称，这样你就可以把它展示给厨房了。只需使用它来索引项目计数地图。

通常，您可以提供一个函数，该函数返回每个类的任何唯一标识符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T18:38:20.773

如果您使用的是 C++11，您可以执行以下操作：

```
int num_fish_sticks = std::count_if(buffer.begin(), buffet.end(),
    [](const SeaFood* sf) {sf->is_fish_stick()}); 
```

你需要在 SeaFood 中声明一个纯虚函数：

```
virtual bool is_fish_stick() const = 0; 
```

并在子类中相应地实现它。

**编辑：**当然，如果您有太多子类，这可能会很混乱。在这种情况下，您最好只使用 RTTI：

```
int num_fish_sticks = std::count_if(buffer.begin(), buffet.end(),
    [](const SeaFood* sf) {typeid(*sf) == typeid(Fishstick)}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T18:45:05.670

我认为您的问题比您想象的要基本得多：至少正如您所介绍的那样，似乎根本没有太多（任何？）理由在这里使用继承。

*当您的对象具有不同的行为*时，继承很有用，但在这种情况下，它们似乎都具有基本相同的行为——事实上，几乎没有任何行为（除非算作“装死”）。

如果我要为自助餐建模，我可能*会*使用容器。热桌上的每个托盘都是一个容器，里面装着一些东西。如果需要，您可以将桌子建模为托盘容器，并且（可能）将房间建模为桌子容器。

每个托盘都有一个“食物”（或任何你喜欢的名字），你通常有一个名字和一个数量。唯一的行为可能是处理食物何时“供应”的计时器，并基于该计时器何时需要移除任何剩余的食物。您*可能*还有更多，例如将食物分为仅作为全餐一部分提供的食物，与仅购买沙拉吧的人提供的食物。

# jquery - jquery根据状态数组禁用提交按钮

> ID：10759562
> 
> 赞同：1
> 
> 时间：2012-05-25T18:22:40.970
> 
> 标签：jquery, forms, validation, submit

我正在尝试进行自己的自定义表单验证。我想维护一个状态数组，每个字段都有自己的键：值（值是“好”或“坏”）。当数组包含“坏”时，我想禁用提交按钮。

错误/成功消息在每个字段旁边工作（我的 ajax 工作正常），但我无法禁用提交按钮。

```
$(function() {
    // Custom Validation
    var statusArray = {
        'email' : 'good',
        'passC' : 'good',
        'pass1' : 'good',
        'pass2' : 'good'
    }
    $("#email").blur(function() {
        var form_data = {email: $("#email").val()}
        $.ajax({
            url: "<?= base_url('lounge/validation/email'); ?>",
            type: 'POST',
            data: form_data,
            success: function(msg) {
                if (msg['status'] == false){
                    $('#email_status').html('<span class="lounge_error">'+msg['message']+'</span>');
                    statusArray['email'] = 'bad';
                }
                else {
                    $('#email_status').html('<span class="lounge_okay">'+msg['message']+'</span>');
                    statusArray['email'] = 'good';
                }
            }
        });
        statusCheck();
        return false;
    })
    // Password fields validation
    $('#change_password').change(function () {
        if ($(this).attr("checked")) {
            $('#current_password_status').html('').css({"display": "inline-block"});
            $('#new_password1_status').html('').css({"display": "inline-block"});
            $('#new_password2_status').html('').css({"display": "inline-block"});
            $("#current_password").blur(function() {
                var form_data = {password: $("#current_password").val()}
                $.ajax({
                    url: "<?= base_url('lounge/validation/password'); ?>",
                    type: 'POST',
                    data: form_data,
                    success: function(result) {
                        if (result['status'] == false){
                            $('#current_password_status').html('<span class="lounge_error">'+result['message']+'</span>');
                            statusArray['passC'] = 'bad';
                        }
                        else {
                            $('#current_password_status').html('<span class="lounge_okay">'+result['message']+'</span>');
                            statusArray['passC'] = 'good';
                        }
                    }
                });
                statusCheck();
                return false;
            });
            $("#new_password1").blur(function() {
                var form_data = {pass1: $("#new_password1").val()}
                $.ajax({
                    url: "<?= base_url('lounge/validation/newpass1'); ?>",
                    type: 'POST',
                    data: form_data,
                    success: function(result) {
                        if (result['status'] == false){
                            $('#new_password1_status').html('<span class="lounge_error">'+result['message']+'</span>');
                            statusArray['pass1'] = 'bad';
                        }
                        else {
                            $('#new_password1_status').html('<span class="lounge_okay">'+result['message']+'</span>');
                            statusArray['pass1'] = 'good';
                        }
                    }
                });
                statusCheck();
                return false;
            });
            $("#new_password2").blur(function() {
                var form_data = {pass2: $("#new_password2").val()}
                $.ajax({
                    url: "<?= base_url('lounge/validation/newpass2'); ?>",
                    type: 'POST',
                    data: form_data,
                    success: function(result) {
                        if (result['status'] == false){
                            $('#new_password2_status').html('<span class="lounge_error">'+result['message']+'</span>');
                            statusArray['pass2'] = 'bad';
                        }
                        else {
                            $('#new_password2_status').html('<span class="lounge_okay">'+result['message']+'</span>');
                            statusArray['pass2'] = 'good';
                        }
                    }
                });
                statusCheck();
                return false;
            });
        } else {
            $('#current_password_status').html('').css({"display": "none"});
            $('#new_password1_status').html('').css({"display": "none"});
            $('#new_password2_status').html('').css({"display": "none"});

        }
    });

});

function statusCheck() {
    var status = [];
    $.each(statusArray, function(key, value) {
        status.unshift(value);
    });
    if ($.inArray('bad', status) == '-1') {
        $("button[type=submit]").removeAttr("disabled");
    } else {
        $("button[type=submit]").attr("disabled", true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:27:48.457

改变：

```
$("button[type=submit]").attr("disabled", true); 
```

为此（Jquery 1.6+）：

```
$("button[type=submit]").prop('disabled', true); 
```

或这个：

```
$("button[type=submit]").attr('disabled', 'disabled'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:29:12.123

你可以试试

```
 $("button[type=submit]").prop("disabled", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:46:12.017

更新您的状态检查如下：

```
function statusCheck() {
    var isValid = true;
    $.each(statusArray, function(key, value) {
        if(value == 'bad')
            isValid = false;
    });
    if (isValid) {
        $("button[type=submit]").removeAttr("disabled");
    } else {
        $("button[type=submit]").attr("disabled", "disabled");
    }
}
$(document).ready(function(){statusCheck();}); 
```

也许您只是错过了在 jquery 就绪部分调用它。但是这段代码比使用数组检查状态要好。

# c# - HoverItem 在 ListView 中返回 null

> ID：10759567
> 
> 赞同：0
> 
> 时间：2012-05-25T18:23:01.657
> 
> 标签：c#, winforms

在为 listview 编写自定义控件期间：我正在重写此方法，如下所示：

```
protected override void OnDragDrop(DragEventArgs drgevent)
{
    base.OnDragDrop(drgevent);

    // get the currently hovered row that the items will be dragged to
    Point clientPoint = base.PointToClient(new Point(drgevent.X, drgevent.Y));
    ListViewItem hoverItem = base.GetItemAt(clientPoint.X, clientPoint.Y); 
```

有时 hoverItem 变为 null :( 当我将项目放在列表视图的最右侧区域时，它变为 null ...如果我将它放在列表中的某个位置，那里有项目和文本，它可以正常工作，如果我放下它在某个项目没有文本的地方，然后它变为空...... ![在此处输入图像描述](../Images/bd339b359aefea58ec5a67027049e722.png)

为了更清楚，我附上一张图片

问题是什么？还是您认为有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:42:30.473

没有问题。这是设计使然。没有红点所在的项目。ListView 具有不同的视图模式（视图属性），其中可以有图标/文本“块”包围每个项目，或者可以有多个项目列。

我认为将 View 属性设置为 View.Details 并将 FullRowSelect 设置为 true，GetItemAt 将在每一行的末尾点击空格，但我必须尝试确定。

# github - 下划线问题：Jekyll + redcarpet == Github 风格的降价？

> ID：10759577
> 
> 赞同：18
> 
> 时间：2012-05-25T18:23:44.870
> 
> 标签：github, markdown, jekyll, github-pages, redcarpet

我正在使用 github 页面构建一个站点，并且*不*希望单词中的下划线将这些单词的部分斜体。例如 `function_name_here`，不应以*`name`*斜体呈现。我知道 github 风格的降价应该像这样聪明；但我仍然在我的渲染页面中看到斜体。

我已经在我的`_config.yml`

```
markdown: redcarpet 
```

...我还需要做些什么来获得 Github 风格的降价行为？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T21:45:24.850

github 的 gh-pages 上可用的 Jekyll 版本不运行支持这些功能的最新版本的 redcarpet (redcarpet2)。 [有一个插件可以为 Jekyll 提供最新版本的 redcarpet](https://github.com/nono/Jekyll-plugins)，然后您可以在其中配置您想要的行为，即然后将其添加到您的`_config.yml`

```
markdown: redcarpet2
redcarpet:
  extensions: ["no_intra_emphasis", "fenced_code_blocks", "autolink", "tables",     "with_toc_data"] 
```

是的，我同意 github 在 gh-pages 上运行的 markdown 解析器与它在站点上其他任何地方的 github-flavored-markdown 使用的不同，这似乎很疯狂。

# visual-studio-2010 - 编译opencv简单程序导致与windows sdk冲突

> ID：10759579
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:23:57.337
> 
> 标签：visual-studio-2010, visual-c++, opencv

这是我第一次使用opencv。我下载了它并设置了visual studio 2010（pro）包含这样的目录：

```
C:\opencv\build\include\opencv
C:\opencv\build\include 
```

“继承”的值是：

```
$(VCInstallDir)include
$(VCInstallDir)atlmfc\include
$(WindowsSdkDir)include
$(FrameworkSDKDir)\include 
```

但是当我编译时，我收到有关 windows sdk 的错误...

```
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2def.h(212): error C2011: 'sockaddr' : 'struct' type redefinition
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\winsock.h(485) : see declaration of 'sockaddr'
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2def.h(390): error C2059: syntax error : 'constant'
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2def.h(443): error C2143: syntax error : missing ';' before '}'
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2def.h(443): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2def.h(443): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\ws2def.h(524): warning C4005: 'IN_CLASSA' : macro redefinition
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\winsock.h(287) : see previous definition of 'IN_CLASSA'
... 
```

与 sdk 包含文件存在一些冲突。有谁知道我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:59:59.240

正在使用winsock2.h，由于某种原因与opencv冲突。将其更改为winsock.h

# vba - VBA WebBrowser 捕获全屏

> ID：10759580
> 
> 赞同：8
> 
> 时间：2012-05-25T18:23:58.133
> 
> 标签：vba, internet-explorer-8, excel, browser

希望在 VBA 范围内执行此操作（其他用户没有其他开发工具可修改）。我知道 3rd 方应用程序（例如 iMacros）有类似的功能，但希望尽可能通用。本店使用 XP 和 Excel 2003。

**(1)** VBA 子程序控制 InternetExplorer 浏览器自动查看网站、提交表单等。

**(2)**有没有办法从 WebBrowser 的内容中获取屏幕截图？没有凌乱的 SendKeys 方法？.NET 有一个 Webbrowser.DrawToBitmap 方法，但找不到 VBA 的简单解决方案。想要整个屏幕，包括“首屏下方”——滚动条下方……

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T19:57:50.593

**将完整代码粘贴到模块中并运行 Sub Sample()**

**代码逻辑**

**1)**此代码将打开 IE

**2)**导航到 Google.com

**3）**最大化IE

**4)**拍摄快照

**5)**启动 MSPaint

**6)**在 MSPaint 中粘贴

```
Private Declare Sub keybd_event Lib "user32" (ByVal bVk As Byte, ByVal bScan As Byte, _
ByVal dwFlags As Long, ByVal dwExtraInfo As Long)

Private Declare Sub Sleep Lib "kernel32.dll" (ByVal dwMilliseconds As Long)

Private Const VK_SNAPSHOT As Byte = 44

Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal _
lpClassName As String, ByVal lpWindowName As String) As Long

Private Declare Function ShowWindow Lib "user32" (ByVal hwnd As Long, ByVal _
nCmdShow As Long) As Long

Private Const SW_SHOWMAXIMIZED = 3
Private Const VK_LCONTROL As Long = &HA2
Private Const VK_V = &H56
Private Const KEYEVENTF_KEYUP = &H2

Sub Sample()
    Dim IE As Object
    Dim hwnd As Long, IECaption As String

    Set IE = CreateObject("InternetExplorer.Application")

    IE.Visible = True

    IE.Navigate "www.Google.com"

    Sleep 5000

    '~~> Get the caption of IE
    IECaption = "Google - Windows Internet Explorer"

    '~~> Get handle of IE
    hwnd = FindWindow(vbNullString, IECaption)

    If hwnd = 0 Then
        MsgBox "IE Window Not found!"
        Exit Sub
    Else
        '~~> Maximize IE
        ShowWindow hwnd, SW_SHOWMAXIMIZED
    End If

    DoEvents

    '~~> Take a snapshot
    Call keybd_event(VK_SNAPSHOT, 0, 0, 0)

    '~~> Start Paint
    Shell "C:\Windows\System32\mspaint.exe", vbNormalFocus

    Sleep 3000

    '~~> Paste snapshot in paint
    keybd_event VK_LCONTROL, 0, 0, 0
    keybd_event VK_V, 0, 0, 0
    keybd_event VK_V, 0, KEYEVENTF_KEYUP, 0
    keybd_event VK_LCONTROL, 0, KEYEVENTF_KEYUP, 0
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T08:32:51.010

```
Dim objIe As Object
Set objIe = CreateObject("internetexplorer.application")
    With objIe
        .Navigate "www.google.com"
        '// Set offline JIC user NOT Online
        .offline = True
        '// Maximise the Ie window if not Already Max
        .Visible = True
        '// This routine used to Maximise Ie
        ShowWindow objIe.hwnd, SW_MAXIMIZE
        SetForegroundWindow objIe.hwnd
    End With 
```

```
Public Const SW_MAXIMIZE As Long = 3       'Show window Maximised
Public Const SW_MINIMIZE As Long = 1       'Show window Minimized

Public Declare Function ShowWindow _
    Lib "user32" ( _
    ByVal hwnd As Long, _
    ByVal nCmdShow As Long) _
As Long

Public Declare Function SetForegroundWindow _
    Lib "user32" ( _
    ByVal hwnd As Long) _
As Long 
```

# linux - 在 Ubuntu 上，bash 中的彩色多行 PS1 与箭头历史记录错误

> ID：10759581
> 
> 赞同：2
> 
> 时间：2012-05-25T18:24:10.660
> 
> 标签：linux, bash, shell, command-prompt, ps1

我有下一行`.bashrc`：

```
PS1="\e[0;32m[ \w ]\n#\e[m " 
```

设置非常简单的绿色欢迎线。在 Ubuntu 上，使用向上/向下箭头加载以前的命令会在命令行中添加额外的符号：

```
[ /tmp ]
# echo "hello there"
hello there
[ /tmp ]
# echecho "hello there" 
```

注意`ech`最后一个命令前面的符号。这些符号不能被编辑——光标不去那里。

我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T18:28:12.810

您需要对未显示的字符进行转义。将行更改为`.bashrc`以下内容：

```
PS1="\[\e[0;32m\][ \w ]\n#\[\e[m\] " 
```

运行`source ~/.bashrc`以应用更改。

# php - PHP正则表达式奇怪的行为

> ID：10759585
> 
> 赞同：0
> 
> 时间：2012-05-25T18:24:18.053
> 
> 标签：php, regex

我开始接触 PHP 中的正则表达式并陷入困境。

我写了以下块： -

```
$object = "ng_amg_gt-1";

switch ($object)
{
    case preg_match('/^ng_amg_gt-[0-9]+$/', $object):
        echo 'first';    
        break;

    case preg_match('/^ng_amg_gt-_cg-[0-9]+$/', $object):
        echo 'second';
        break;

} 
```

我认为 "ng_amg_gt-1" 会匹配 preg_match('/^ng_amg_gt-[0-9]+$/', $object) 但有趣的是（很讨厌）它正在回显**second**。

我错过了什么？

PS :- 这似乎是一个显而易见的问题，但没有取得任何突破，这就是我在这里发布它的原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:27:42.433

> **我错过了什么？**

这是你错过的：

```
$object = "ng_amg_gt-1";

if(preg_match('/^ng_amg_gt-[0-9]+$/', $object)) {
    echo 'first';
} else if(preg_match('/^ng_amg_gt-_cg-[0-9]+$/', $object)) {
    echo 'second';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:29:02.670

preg_match 返回模式匹配的数量，并将其与字符串进行比较

# ruby - 从 metadata.rb 生成 metadata.json 无需 Chef 或刀

> ID：10759586
> 
> 赞同：2
> 
> 时间：2012-05-25T18:24:25.670
> 
> 标签：ruby, json, metadata, chef-infra

我正在开发一个与 Chef 交互的程序。我想阅读元数据以查找依赖项以及名称等其他信息，但不应该将 Chef 安装在运行它的机器上。我认为最好的方法是将 metadata.rb 转换为 metadata.json 并阅读它。

[实际上，我正在使用基于此](https://gist.github.com/364326)的算法逐行阅读每个食谱，但我认为像 Chef 那样使用元数据更正确。此外，它在以下表达式方面存在问题：

```
node['apache']['default_modules'].each do |mod|
  recipe_name = mod =~ /^mod_/ ? mod : "mod_#{mod}"
  include_recipe "apache2::#{recipe_name}"
end 
```

当角色的 run_list 超过一行时，读取角色的 run_list 时出现同样的问题。当然，如果我能把它翻译成 json 文件会好得多。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T01:33:31.777

它使用 ruby`instance_eval`​​ 方法来解析`metadata.rb`from cookbook，所以关键是`metadata.rb`. 中定义[`Chef::Cookbook::Metadata`](https://github.com/opscode/chef/blob/master/lib/chef/cookbook/metadata.rb)。

它是提供多种方法的 ruby​​ 类。因此，您可以定制自己的程序以使用除了属性访问器 like `name`、`maintainer`like`depends()`和之外的最少方法集`recipe(name, description)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T22:26:25.340

只安装了 Chef 客户端，这个脚本就可以解决问题。将它放在与扩展食谱相同的文件夹中。

```
require 'chef/cookbook/metadata'
require 'json'

contents = File.read('metadata.rb')
c = Chef::Cookbook::Metadata.new
c.instance_eval(contents)
File.write('metadata.json', c.to_json) 
```

或者我想你可以在你的 Ruby 安装上只安装 Chef gem（这是我的第二个 Ruby 程序，所以你会更好地知道这是如何完成的）

# windows - 如何在 Delphi 中创建拒绝访问文件夹？

> ID：10759587
> 
> 赞同：0
> 
> 时间：2012-05-25T18:24:26.117
> 
> 标签：windows, delphi

Delphi 如何创建拒绝访问的文件夹或文件？

我希望只有我自己能够从 delphi 访问该文件夹/文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:55:37.733

只需在您的用户配置文件下创建一个文件。默认安全设置不允许其他用户访问。管理员自然有访问权限，但您无法对管理员隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T10:03:14.900

你可以试试我的简化例子

```
interface
...
   function EncryptFileA(lpFilename: PAnsiChar): BOOL; stdcall;
   {$EXTERNALSYM EncryptFileA}
...
implementation
...
   // Delphi wrongly register function EncryptFileA under kernel32.dll. 
   // Just re-register it using AdvApi32.dll 
   function EncryptFileA; external AdvApi32 name 'EncryptFileA'; 
...
procedure TForm1.btn1Click(Sender: TObject);
begin
  CreateDirectory('c:\test', nil);
  EncryptFileA('c:\test');
end; 
```

此代码将创建“C\test”文件夹并对其进行加密。您放入其中的任何文件都只能由所有者（您）访问。您可以在不同的用户下切换和登录，并进行测试。当然，您需要详细说明我上面的代码以检查目录是否存在，获取错误（如果有）并正确处理。

或者，您可以使用免费的加密工具 www.truecrypt.org 和 Delphi Truecrypt 组件，例如[http://www.sdean12.org/SDeanComponents.htm#OTFETrueCrypt](http://www.sdean12.org/SDeanComponents.htm#OTFETrueCrypt)或 google 获取其他 Delphi Truecrypt 组件。但是，我从来没有尝试过这个。

# r - 计算R中两个矩阵的所有行组合的函数

> ID：10759588
> 
> 赞同：5
> 
> 时间：2012-05-25T18:24:28.083
> 
> 标签：r

我想计算两个矩阵/数据帧之间所有行组合的距离度量。

结果将是一个矩阵，其中单元格 i,j 对应于函数给出的结果，该函数应用于第一个矩阵的第 i 行和第二个矩阵的第 j 行。这是一个示例，说明了我想用一个示例函数对 for 循环做什么。

```
x<-matrix(rnorm(30),10,3)  ## Example data
y<-matrix(rnorm(12),4,3)

results<-matrix(NA,nrow(x),nrow(y))

for (i in 1:nrow(x)){
  for (j in 1:nrow(y)){
    r1<-x[i,]
    r2<-y[j,]
    results[i,j]<-sum(r1*r2)  ## Example function
  }
} 
```

在现实生活中，我的第一个矩阵有几十万行，第二个矩阵有几百行，我想计算的函数不是点积（我意识到我可能选择了一个让它看起来像的函数我想做的就是矩阵乘法）。事实上，我想替换一些函数，所以我想找到一个可推广到不同函数的解决方案。一种思考方式是我想劫持矩阵乘法来执行其他功能。用 for 循环计算这个需要很长时间，这是不切实际的。对于如何在没有 for 循环的情况下执行此操作的任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:52:47.530

```
outer(1:nrow(x), 1:nrow(y), Vectorize(function(i, j) sum(x[i, ] * y[j, ]))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:18:53.583

我知道你很久以前就问过这个问题，但我想我可能会与你分享一个解决方案`for`，当你拥有的行数变得非常大时，它会比循环更有效率。在少量行中，速度差异可以忽略不计（for 循环甚至可能更快）。这仅依赖于子集和 rowSums 的使用，并且非常简单：

```
## For reproducibility
set.seed( 35471 )

## Example data - bigger than the original to get and idea of difference in speed
x<-matrix(rnorm(60),20,3)
y<-matrix(rnorm(300),100,3)

# My function which uses grid.expand to get all combinations of row indices, then rowSums to operate on them
rs <- function( x , y ){
rows <- expand.grid( 1:nrow(x) , 1:nrow(y) )
results <- matrix( rowSums( x[ rows[,1] , ] * y[ rows[,2] , ] ) , nrow(x) , nrow(y) )
return(results)
}

# Your orignal function
flp <- function(x ,y){
results<-matrix(NA,nrow(x),nrow(y))
for (i in 1:nrow(x)){
  for (j in 1:nrow(y)){
    r1<-x[i,]
    r2<-y[j,]
    results[i,j]<-sum(r1*r2)  ## Example function
  }
}
return(results)
}

## Benchmark timings:
library(microbenchmark)
microbenchmark( rs( x, y ) , flp( x ,y ) , times = 100L )
#Unit: microseconds
#     expr      min       lq     median        uq      max neval
#  rs(x, y)  487.500  527.396   558.5425   620.486   679.98   100
# flp(x, y) 9253.385 9656.193 10008.0820 10430.663 11511.70   100

## And a subset of the results returned from each function to confirm they return the same thing!
flp(x,y)[1:3,1:3]
#          [,1]       [,2]       [,3]
#[1,] -0.5528311  0.1095852  0.4461507
#[2,] -1.9495687  1.7814502 -0.3769874
#[3,]  1.8753978 -3.0908057  2.2341414

rs(x,y)[1:3,1:3]
#          [,1]       [,2]       [,3]
#[1,] -0.5528311  0.1095852  0.4461507
#[2,] -1.9495687  1.7814502 -0.3769874
#[3,]  1.8753978 -3.0908057  2.2341414 
```

所以你可以看到，`rowSums`当行组合的数量只有 2000 时，通过使用和子集，我们可以比 for 循环快 20 倍。如果你有更多，速度上的差异会更大。

HTH。

# facebook - 获取状态项的 html 页面链接

> ID：10759589
> 
> 赞同：4
> 
> 时间：2012-05-25T18:24:30.817
> 
> 标签：facebook, facebook-graph-api, status

从 Graph API，我有一个状态更新，具有给定的 id。

数据的 REST 端点是

> [https://graph.facebook.com/xxxxxxx_yyyyyyyyyyyyy](https://graph.facebook.com/xxxxxxx_yyyyyyyyyyyyy)

where`xxxxxxx_yyyyyyyyyyy`替换为状态更新的 ID。

GET-ing 给了我一个很好的 JSON 数据包来描述状态。

现在，如果我想为人们提供查看状态更新的链接怎么办？

什么是状态更新的常规html页面？

这不起作用：

> [http://www.facebook.com/xxxxxxx_yyyyyyyyyyyyyyyyy](http://www.facebook.com/xxxxxxx_yyyyyyyyyyyyyyyyy)

* * *

**回答**

感谢 Jashwant[的回答](https://stackoverflow.com/a/10759788/48082)。

这是您想要的格式：

> [http://www.facebook.com/xxxxxxx/posts/yyyyyyyyyyyyyyyyy](http://www.facebook.com/xxxxxxx/posts/yyyyyyyyyyyyyyyyy)

...其中`xxxxxx`由作者 ID 替换，并`yyyyyyyy`表示帖子 ID。

这是我使用的代码。在这段代码中，`item.id` 持有 `xxxxxxxx_yyyyyyyyyyyyyyy`.

```
var permalink = 'http://www.facebook.com/' +
        item.id.replace('_', '/posts/'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:41:59.963

如果您有 story_id（或 post_id）并且想跳过查询 facebook api 的开销，您可以将 story_id 拆分为`_`.

第一部分是用户的 id，第二部分是帖子的 id。

在 JavaScript 中，

```
var story_id = "1137725463_413359962029143";
var story_id_split = story_id.split('_');
var user_id = story_id_split[0];
var post_id = story_id_split[1];

var permanent_link = "http://www.facebook.com/" + user_id + "/posts/" + post_id;
console.log(permanent_link); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:31:00.577

查看来自的结果调用`https://graph.facebook.com/XXX_YYY`

```
{
  "id": "XXX_YYY", 
  "from": {
    "name": "Lix", 
    "id": "XXX"
  }, 
  "message": "Hello Stack Overflow... how do you do?", 
  "actions": [
    {
      "name": "Comment", 
      "link": "https://www.facebook.com/XXX/posts/YYY"
    }, 
    {
      "name": "Like", 
      "link": "https://www.facebook.com/XXX/posts/YYY"
    }
  ], 
  "privacy": {
    "description": "Friends; Except: Restricted", 
      {
  ... 
```

数组的两个元素`actions`包含指向 Facebook 上实际帖子的链接。

[通过使用Graph API Explorer](https://developers.facebook.com/tools/explorer)，您可以非常轻松地查看您可以访问哪些数据。您可以浏览 API 并准确了解作为开发人员向您展示的内容，甚至可以测试 FQL 查询...

# javascript - 单击新添加的链接不执行 javascript 功能

> ID：10759594
> 
> 赞同：1
> 
> 时间：2012-05-25T18:24:58.210
> 
> 标签：javascript, jquery

在试验 jquery 时，我创建了这个 html 和 javascript。

```
<body>
<div id="results">
<div class="mylinkdiv">
<a class="mylinkclass" href="#">8</a>
: This is supposed to be a toaster.
<br>
<a class="mylinkclass" href="#">14</a>
: with a toaster maybe.
<br>
<a class="mylinkclass" href="#">51</a>
: If we're really creative.
<br>

</div>
</div>
<button id="remove" type="button" > Remove</button>
<button id="add" type="button" > Add</button>

</body> 
```

javascript 具有弹出包含链接文本的消息的功能。它还具有向 div 添加一些链接的功能。名为 remove 的函数删除内部 div 。

```
$(document).ready(function(){
    $('.mylinkclass').click(function(){
           getLinkText(this);
        });

    $('#remove').click(function(){
           removeContents();
        });

     $('#add').click(function(){
           addContents();
        });
});

function getLinkText(that){
    var txt = $(that).text();
    var num = parseInt(txt);
    alert('num='+num);
    return false;
}

function addContents(){
  $('#results').append('<a class="mylinkclass" href="#">70</a>  new line1 <br>');
  $('#results').append('<a class="mylinkclass" href="#">77</a> new line2<br>');
}

function removeContents(){
  $('.mylinkdiv').remove();      
} 
```

当我点击原始html页面中的链接（即3个链接）时，弹出警告框。

当我单击添加按钮时，它会在 div 中添加两个新链接。但是，**当我单击这些新添加的链接时，警报不会弹出！**

我不明白为什么..有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:27:05.630

如果您使用的是 jQuery 1.7，请使用 .on；如果您使用的是 jQuery 1.6，请使用 .delegate

```
jQuery('#results').on('click','.mylinkclass',function() {
    getLinkText(this);
}); 
```

[演示](http://jsfiddle.net/mprabhat/J7YCX/2/)

另一种方法是克隆现有元素，[演示](http://jsfiddle.net/mprabhat/sdvH9/2/)

```
var cloned = jQuery('.mylinkclass:last').clone(true);
jQuery('#results').append(cloned); 
```

在第二种情况下，事件侦听器也将被复制，您不需要使用 .on 或 .delegate。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:26:24.840

您需要一个**[委托](http://api.jquery.com/delegate/)**事件处理程序，因为您的项目是在 dom 加载后动态创建的。

```
$('#results').on('click', '.mylinkclass', function() {
    getLinkText(this);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T18:28:15.820

在第一次加载页面后向 DOM 添加链接时，链接不会绑定到 jQuery 事件。你应该使用：

```
$(document).on('click', '.mylinkclass', function() {

}); 
```

当我第一次遇到这个问题时，我正在使用“live()”，但你不应该使用它，因为根据 jQuery 文档它已被弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:43:19.693

你必须这样做：

```
$ ('. mylinkclass'). live ('click', function () {
alert ('OK')
}); 
```

# sublimetext2 - Zen Coding + 用 Sublime Text 2 中的缩写换行

> ID：10759595
> 
> 赞同：2
> 
> 时间：2012-05-25T18:25:00.020
> 
> 标签：sublimetext2, emmet

我想在 Sublime Text 2 中用以下 Zen Coding 缩写包装一些列表项：

```
nav>ul.example>li*4 
```

这是列表的一个示例：

> 狗
> 猫
> 马
> 牛

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T08:03:31.333

当您想用缩写元素包装每一行选择时，您需要使用运算符将​​此元素标记为*重复*`*`。

因此，您的缩写应如下所示：

`nav>ul.example>li*`

（例如没有乘数值，只是`*`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:34:18.773

在 linux 上： ctrl shift g （以公开 zencoding/emmet 命令行）然后在末尾键入没有递增编号的元素，只是 *，正如 Sergey 指出的那样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T05:26:53.723

你不必做这么复杂的事情。您只需选择您想要的项目列表（用鼠标浏览它）。确保您处于 html 模式而不是文本模式。然后您只需在 Koan 编码下的底行键入 div>nav.element>li* （CTRL 选项返回 - 在您的系统上可能不同），所有列表项都在代码中。

如果你有一个网站列表，你只需要输入 a* 就可以用超链接将它们全部包裹起来。是相当有用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T17:35:24.567

这将需要两个步骤，至少这是我发现的最简单的方法：

1.  选择您的列表，如果您的列表中有中断，您将要在 Windows 上使用 (Ctr)，在 Mac 上使用 (Cmd)，然后选择列表的每一行您想要周围的标签。

2.  点击 (Crt/Cmd) + (Shift) + (L)，然后点击 (Home) 作为标签文本的前面，(End) 作为结束标签文本的末尾。

这将同时编辑所有列表项，从而实现非常快速和高效的编辑，这是 Sublime Text 2 的主要优点之一 :)

让我知道这是否没有意义，以便我更好地解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:23:35.823

虽然它脱离了上下文，但[这个工具](http://code-pal.com/listify)可能会有所帮助。它可以包装文本或使用不同的 html 标签（如 li、option 等）创建长列表。只需粘贴文本并点击按钮，其余部分将复制到剪贴板中。它甚至有一个 chrome 扩展来让事情变得更快。不如 zen 编码快，但当您想在列表中包含 100 个文本元素时很有用 :)

# ruby - Ruby 中的 Kernel#require 采取了哪些具体步骤？

> ID：10759596
> 
> 赞同：4
> 
> 时间：2012-05-25T18:25:14.990
> 
> 标签：ruby

ruby 规范没有记录所采取的具体步骤，究竟是什么算法用于在 MRI Ruby 1.9.3 中定位并执行文件？

我本质上是在寻找：[http](http://docs.python.org/reference/simple_stmts.html#import) ://docs.python.org/reference/simple_stmts.html#import for Ruby

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:59:10.283

从技术上讲，您不需要*文件*，而是需要*功能*。

如果您将完整路径输入到 require 调用中，（例如`require '/home/users/kerrick/my_lib/utils'`），它将加载`/home/users/kerrick/my_lib/utils.rb`（或`.so`，或`.dll`，或`.bundle`）文件。

如果您没有指定完整路径，Ruby 会按照您`ruby -e 'puts $:'`在 UNIX 提示符下运行时显示的顺序查找加载路径。

另外，请记住，如果您多次需要某个东西，它只会加载一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:40:51.227

这可能会有所帮助，不确定它是否是您要找的。

[https://github.com/rubinius/rubinius/blob/master/kernel/common/codeloader.rb#L198](https://github.com/rubinius/rubinius/blob/master/kernel/common/codeloader.rb#L198)

# android - 我可以为文本视图中的链接设置文本颜色吗？

> ID：10759597
> 
> 赞同：3
> 
> 时间：2012-05-25T18:25:18.770
> 
> 标签：android, textview, autolink

在 Android 中，我`android:autoLink`为我的`TextView`. 是否可以更改找到的任何链接的颜色？（我不喜欢默认的蓝色。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T18:29:22.617

`TextView`在 XML 中尝试：

```
android:textColorLink="@android:color/someColor" 
```

并在 Java 代码中

```
 textview.setLinkTextColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:41:48.137

我认为它有效

```
 android:textColorLink="/*color*/" 
```

# c# - 如何获取 DataGridView 下一行的值

> ID：10759600
> 
> 赞同：1
> 
> 时间：2012-05-25T18:25:27.707
> 
> 标签：c#, datagridview, compare, row, datagridviewrow

如何在 FOREACH 中获取 DataGridView 下一行的值

```
foreach (DataGridViewRow row in dataGridViewSelection.Rows)
{
        if ((bool)((DataGridViewCheckBoxCell)row.Cells[3]).Value)
        {
            do
            {
                list.Add(row.Cells[1].Value.ToString());
            } 
            while (row.Cells[2].Value == the next row.Cells[2].Value-->of the next row);

        }              
} 
```

我想获得下一行中相同单元格的值，以便我可以比较它们。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:29:09.157

您需要使用`for`循环而不是`foreach`，但这很简单，因为[DataGridViewRowCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrowcollection.aspx)实现了所需的信息：

```
 for (int rowNum=0;rowNum<dataGridViewSelection.Rows.Count - 1; ++rowNum)
    {
            DataGridViewRow row = dataGridViewSelection.Rows[rowNum];
            if ((bool)((DataGridViewCheckBoxCell)row.Cells[3]).Value)                    {
                do
                {
                    list.Add(row.Cells[1].Value.ToString());
                } while (row.Cells[2].Value == dataGridViewSelection.Rows[rowNum+1].Cells[2].Value);

            }              
    } 
```

通过索引索引，您可以轻松访问循环中的任何其他行。

# c# - 用于用户身份验证和登录 ASP.net MVC 的开箱即用 PCI 兼容解决方案

> ID：10759602
> 
> 赞同：0
> 
> 时间：2012-05-25T18:25:34.090
> 
> 标签：c#, asp.net-mvc, authentication, log4net, pci-compliance

我们有一个管理网站，它本质上是一个用户界面，供我们的客户查看他们的客户交易和报告。这是使用 Telerik MVC 控件在 ASP.net MVC3 上开发的。我们产品的主要症结是网络服务。我们正在考虑让我们符合 PCI 标准。网站上的身份验证根本不安全，没有自定义成员身份或表单身份验证。我们将散列密码存储在数据库中。我想看看是否有任何开箱即用的第三方“PCI 兼容”库可用于进行用户身份验证？如果不是，在会员中实现 PCI 合规性的最佳方式是什么？

此外，我们目前使用开源 log4net 来记录网站和 Web 服务。是否有其他一些符合 PCI 的“日志记录”解决方案？如果日志记录可以在产品级别和网络级别使用，那将是最好的。

感谢所有的帮助。

谢谢，SDD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:38:32.903

关于身份验证，PCI 要求所有密码都经过加密或散列，其中散列是最简单的实现。

避免使用 MD5。我建议使用 PBKDF2。查看[http://code.google.com/p/stackid/source/browse/OpenIdProvider/Current.cs#1135](http://code.google.com/p/stackid/source/browse/OpenIdProvider/Current.cs#1135)了解 stackoverflow 实际使用的一些参考代码。

Log4net 可以很好地记录日志，但您需要使用 UdpAppender 将日志发送到 syslog 服务器。确保您至少记录 PCI 日志记录要求所要求的内容，并确保您不记录任何密码或信用卡号。

# ruby-on-rails - Rails.cache.fetch 不缓存对象

> ID：10759603
> 
> 赞同：1
> 
> 时间：2012-05-25T18:25:36.070
> 
> 标签：ruby-on-rails, ruby, caching, object, fetch

嗨我有一个用户模型

```
has_many :devices
has_many :events, :through => :devices. 
```

这有以下方法：

```
def get_events_for_devices limit=nil
  events.limit limit
end 
```

然后我有一个用户控制器，我需要为每个用户设备缓存 500 个事件。目前我正在使用以下电话

```
user_requested = User.find(params[:id])

  profile_info = Rails.cache.fetch("#{user_requested.email}-profile-info") do 
    {:user => user_requested, :devices => user_requested.devices, :events => user_requested.get_events_for_devices(500)} 
```

我能够从缓存中取回 :user 和 :devices ，但不能取回 :events - 它们似乎不存在。

但是，如果我不使用 Rails.cache，我可以获取事件，只需调用 user_requested[:events]。

关于我应该如何进行的任何想法？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:46:36.100

[fetch](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch)的工作原理是，如果您没有与给定键关联的数据，它将执行该块。由于您确实有一些“#{user_requested.email}-profile-info”键的数据，因此不会执行该块。我认为，如果您希望它在 events 键不存在的情况下重新计算事件数据，您应该为 3 种不同类型的键设置 3 个不同的 fetch 块，如下所示：

```
profile_key = "#{user_requested.email}-profile-info"
user_profile_data = Rails.cache.fetch("#{profile_key}:user") { user_requested }
device_profile_data = Rails.cache.fetch("#{profile_key}:devices") { user_requested.devices }
events_profile_data = Rails.cache.fetch("#{profile_key}:events") { user_requested.get_events_for_devices(500) } 
```

# mysql - 存储过程多次循环只获取第一个循环数据

> ID：10759606
> 
> 赞同：0
> 
> 时间：2012-05-25T18:26:05.310
> 
> 标签：mysql, stored-procedures

我正在调用的程序遇到问题。

该过程有 2 个循环，一个用于连接到同一网络中的其他数据库，另一个用于从每个连接中获取数据，但问题是它只从第一个连接中获取第一包数据。我不确定，但也许我在第二个循环中做错了什么，忘记了一些东西。这是我第二次做这样的事情，也是第一次太复杂了。

这是程序的代码。

```
CREATE PROCEDURE `firians`.`sincronizarAgencias` ()
BEGIN
declare nomeAgencia varchar(255);
declare ultimaAgencia int default false;
declare terminouPicagens int default false;

declare agenciasCur cursor for select ip from agencia;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET ultimaAgencia = TRUE;

open agenciasCur;
nomeAgenciasLoop: LOOP

    FETCH agenciasCur INTO nomeAgencia;

    IF ultimaAgencia THEN
        close agenciasCur; 
        LEAVE nomeAgenciasLoop;
    END IF;

    SELECT nomeAgencia;

    DROP VIEW IF EXISTS temp_agencia_view;
    SET @query = CONCAT('CREATE VIEW temp_agencia_view as select data, idempregado, idsociedade, nif, tipo from `', nomeAgencia, '`'); 
    select @query; 
    PREPARE stmt from @query; 
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;

    blocoPicagens: BEGIN
        declare newData DATETIME;
        declare newIdEmpregado VARCHAR(45);
        declare newIdSociedade bigint(20);
        declare newNif varchar(15);
        declare newTipo varchar(45);

        declare ultimaPicagem int default false;

        -- SELECT data, idempregado, idsociedade, nif, tipo from temp_agencia_view;

        DECLARE picagensCursor cursor for select data, idempregado, idsociedade, nif, tipo from temp_agencia_view;
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET ultimaPicagem := TRUE;

        open picagensCursor;
        picagensLoop: LOOP
            fetch picagensCursor into newData, newIdEmpregado, newIdSociedade, newNif, newTipo;

            IF ultimaPicagem THEN
                -- SET ultimaPicagem := false;
                close picagensCursor;
                DROP VIEW IF EXISTS temp_agencia_view; 
                LEAVE picagensLoop;
            END IF;

            INSERT INTO `firians`.`assiduidade`(`data`,`idempregado`,`idsociedade`,`tipo`,`nif`)
            VALUES
            (newData, newIdEmpregado, newIdSociedade, newTipo, newNif);

            INSERT INTO `firians`.`assiduidadebackup`(`data`,`idempregado`,`idsociedade`,`tipo`,`nif`)
            VALUES
            (newData, newIdEmpregado, newIdSociedade, newTipo, newNif);

            set @updateRowQuery = CONCAT('DELETE FROM `', nomeAgencia,'` WHERE idempregado = ', newIdEmpregado, ' AND idsociedade = ', newIdSociedade, ' AND tipo = ', newTipo, ' AND data LIKE \'', newData, "'"); 
            select @updateRowQuery;
            PREPARE stmtUpdate from @updateRowQuery; 
            EXECUTE stmtUpdate; 
            DEALLOCATE PREPARE stmtUpdate;

        END LOOP picagensLoop;

    DROP VIEW IF EXISTS temp_agencia_view;
        -- select * from temp_agencia_view;           
    END blocoPicagens;

END LOOP nomeAgenciasLoop;

DROP VIEW IF EXISTS temp_agencia_view;
END 
```

你能帮助我吗？

问候，

埃尔卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:35:58.593

我怀疑您的问题是 MySQL[不支持](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html) `CREATE VIEW`在准备好的语句中。您可以改用临时表：

```
SET @query = CONCAT('
  CREATE TEMPORARY TABLE temp_agencia_tbl
    select data, idempregado, idsociedade, nif, tipo from `', nomeAgencia, '`
'); 
```

然而，这种方法似乎有点过头了，因为可以使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)准备好的语句中的语法来完全避免第二个游标：

```
SET @q1 = CONCAT('
  INSERT INTO firians.assiduidade
          (data, idempregado, idsociedade, tipo, nif)
    SELECT data, idempragado, idsociedade, tipo, nif FROM `', nomeAgencia, '`
');
SET @q2 = CONCAT('
  INSERT INTO firians.assiduidadebackup
          (data, idempregado, idsociedade, tipo, nif)
    SELECT data, idempragado, idsociedade, tipo, nif FROM `', nomeAgencia, '`
');
SET @q3 = CONCAT('TRUNCATE `', nomeAgencia, '`'); 
```

但*即使这样*看起来还是有点过头了，因为人们也可以通过使用 [`GROUP_CONCAT`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)构造一个用于组合表的[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)语句来省去第一个游标：[`UNION`](http://dev.mysql.com/doc/en/union.html)

```
SELECT
  CONCAT('
    INSERT INTO firians.assiduidade
            (data, idempregado, idsociedade, tipo, nif)'
  , GROUP_CONCAT('
      SELECT data, idempregado, idsociedade, tipo, nif FROM `', ip, '`'
      SEPARATOR ' UNION ALL ')
  ) INTO @q1
, CONCAT('
    INSERT INTO firians.assiduidadebackup
            (data, idempregado, idsociedade, tipo, nif)'
  , GROUP_CONCAT('
      SELECT data, idempregado, idsociedade, tipo, nif FROM `', ip, '`'
      SEPARATOR ' UNION ALL ')
  ) INTO @q2
, CONCAT('
    DELETE FROM ', GROUP_CONCAT('`', ip, '`'), '
          USING ', GROUP_CONCAT('`', ip, '`')
  ) INTO @q3
FROM agencia; 
```

但是，尽管如此，以这种方式使用变量表通常表明数据库设计不佳。与具有相似架构的多个表不同，您可能会发现组合所有不同记录的单个表（带有一个附加列来指示任何差异，例如数据来自哪个表）会容易得多。例如，上面的内容将简单地简化为：

```
INSERT INTO firians.assiduidade
        (data, idempregado, idsociedade, tipo, nif)
  SELECT data, idempregado, idsociedade, tipo, nif FROM CombinedTable;

INSERT INTO firians.assiduidadebackup
        (data, idempregado, idsociedade, tipo, nif)
  SELECT data, idempregado, idsociedade, tipo, nif FROM CombinedTable;

TRUNCATE CombinedTable; 
```

请注意，我没有在这个答案中解决并发问题，因为它们没有在原始 SP 中解决；显然，如果并发可能是一个问题，您应该考虑锁定策略，例如在事务中包含这些操作。

可能还值得指出的是，虽然必须像您一直在做的那样将 SQL 标识符连接到准备好的语句中，但值可以在执行时传递给准备好的语句（例如，传递到您的`DELETE`语句中；实际上，该语句可能只准备一次第一个游标的迭代并在第二个游标的每次迭代中使用不同的值执行）。

# python - 如何在pygame中使用gfx

> ID：10759608
> 
> 赞同：13
> 
> 时间：2012-05-25T18:26:23.273
> 
> 标签：python, pygame, gfx

我有一个 pygame 游戏，我想使用 pygame.gfxdraw.aacricle()，但每当我这样做时，都会出现错误：

> AttributeError：“模块”对象没有属性“gfxdraw”

如何为 python 2.7 安装 gfx？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-08T22:09:51.437

我在 pygame 中使用 gfxdraw 也遇到了同样的问题。一旦我明确地导入了模块，就没有问题了。在导入 pygame 后添加这一行解决了这个问题：

```
import pygame.gfxdraw 
```

奇怪的是，我不需要显式地导入 pygame.draw 来使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:28:06.913

这是gfx的[编译和安装指南](http://www.swftools.org/gfx_tutorial.html)。

对于基本安装，这是标准：

```
python setup.py build
python setup.py install 
```

或者您是否已经尝试过这个并遇到了一些问题？

# java - 面试之谜：如何找出所有“坏”的工人历史？

> ID：10759611
> 
> 赞同：2
> 
> 时间：2012-05-25T18:26:47.897
> 
> 标签：java, string, algorithm, combinatorics

这是一道面试题。假设我们将工人的工作历史表示为字符串。每个字符串由`N`字符组成；每个字符都是 { `A`-- "absence", `L`-- "late" 和`O`-- "ok") 之一。如果有两个“缺席”或三个后续“迟到”，系统会发出警报。例如：`AOOAO`-- 发出警报，`ALLOL`-- 不发出警报。

编写一个函数（在 Java 中）生成所有大小为 的字符串`N`，这会引发警报。

我建议遍历所有可能的“工作历史”字符串（很明显如何生成它们）并使用正则表达式过滤所需的字符串。

你会如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:02:53.993

这将是一种不检查任何内容，但只直接生成正确案例的聪明方法：

1.  使用 N-2 天（即 3^(N-2) 组合）进行所有可能的变化。对于如此获得的每一个变化，通过在每个可能的位置拼接“AA”来制作 N-1 个最终字符串（加上简单地在末尾附加，这就是为什么它是 N-1）。

2.  重复 N-3 天并在“LLL”中拼接。

3.  你都完成了。

# 编辑

现在我看到缺勤不一定是连续的。这稍微改变了解决方案：在第一种情况下，您将独立拼接两个“A”，第一个，然后另一个到结果字符串中。

# 编辑 2

有一个非常对称的附加检查，可以在拼接时避免重复。在这两个步骤中，检查插入点左侧的字符。第1步，如果是A，则停止当前的拼接迭代（这也控制了第二个A的拼接）。在第2步中，如果是L，则转到下一个插入点（跳过当前插入点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:50:29.907

对于完全不同的东西，这里有一种方法可以准确地生成所需的字符串，仅此而已。将其视为一个状态机，并使每个状态成为一个函数。非常冗长但直截了当。（如果你做了很多这样的事情，你可以很容易地安排自动生成这个代码。）

因为我们被要求使用 Java，所以这里是 Java。（我还在 Perl 中编写了相同的代码。我只是`.=`用`chop`字符串代替了`StringBuilder`它，它的运行速度比 Java 版本快 3 倍。奇怪。）

```
import java.io.*;

public class ListAllAlarmedStrings {
    static StringBuilder builder;
    static int length;

    public static void main(String[] args) throws IOException {
        length = 5;
        if (args.length > 0) {
            try {
                length = Integer.parseInt(args[0]);
            } catch (NumberFormatException e) {
                System.err.println("Argument" + " must be an integer");
                System.exit(1);
            }
        }
        builder = new StringBuilder(length);
        for (int i = 0; i < length; i++)
          builder.append("O");
        stateA(0, 'A');
        stateL(0, 'L');
        stateNone(0, 'O');
    }

    static void stateNone (int pos, char chr) {
        if (length < pos + 3)
            return;
        builder.setCharAt(pos, chr);
        //System.out.println("stateNone " + pos + " " +builder.toString());
        stateA(pos + 1, 'A');
        stateL(pos + 1, 'L');
        stateNone(pos + 1, 'O');
    }

    static void stateL (int pos, char chr) {
        if (length < pos + 3)
            return;
        builder.setCharAt(pos, chr);
        //System.out.println("stateL " + pos + " " +builder.toString());
        stateA(pos + 1, 'A');
        stateLL(pos + 1, 'L');
        stateNone(pos + 1, 'O');
    }

    static void stateLL (int pos, char chr) {
        if (length < pos + 2)
            return;
        builder.setCharAt(pos, chr);
        //System.out.println("stateLL " + pos + " " +builder.toString());
        stateA(pos + 1, 'A');
        stateAlarmed(pos + 1, 'L');
        stateNone(pos + 1, 'O');
    }

    static void stateA (int pos, char chr) {
        if (length < pos + 2)
            return;
        builder.setCharAt(pos, chr);
        //System.out.println("stateA " + pos + " " +builder.toString());
        stateAlarmed(pos + 1, 'A');
        stateAL(pos + 1, 'L');
        stateA(pos + 1, 'O');
    }

    static void stateAL (int pos, char chr) {
        if (length < pos + 2)
            return;
        builder.setCharAt(pos, chr);
        //System.out.println("stateAL " + pos + " " +builder.toString());
        stateAlarmed(pos + 1, 'A');
        stateALL(pos + 1, 'L');
        stateA(pos + 1, 'O');
    }

    static void stateALL (int pos, char chr) {
        if (length < pos + 2)
            return;
        builder.setCharAt(pos, chr);
        //System.out.println("stateALL " + pos + " " +builder.toString());
        stateAlarmed(pos + 1, 'A');
        stateAlarmed(pos + 1, 'L');
        stateA(pos + 1, 'O');
    }

    static void stateAlarmed (int pos, char chr) {
        if (length <= pos)
            return;
        if (length == pos + 1) {
            builder.setCharAt(pos, chr);
            System.out.println(builder.toString());
            return;
        }
        builder.setCharAt(pos, chr);
        stateAlarmed(pos + 1, 'A');
        stateAlarmed(pos + 1, 'L');
        stateAlarmed(pos + 1, 'O');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T19:23:42.390

这是一个类似于蛮力的解决方案，除了一些优化。这个想法是创建所有可能序列的组合（没有额外的成本，因为必须返回警报字符串）。然后跟踪警报条件（绝对没有正则表达式），以便只需要检查当前字符（参见＃2）。一旦子字符串引发了警报，比如说位置 i，该函数可以继续为 ni 字符创建组合，而无需检查警报条件。

1.  创建一个大小为 N 的 char 数组和一个计算组合的函数 ( `3^N`)。
2.  创建一个变量`numLate`，它将跟踪到目前为止系列中连续的“L”，以及一个变量`numAbsences`，它将跟踪迄今为止系列中“A”的数量。
3.  在组合过程中的每个步骤，检查以下内容：
    *   如果已经找到匹配项 ( `match == true`) 继续。
    *   否则：
        *   检查当前字符是否为“A”，如果是则增加`numAbsences`。如果`numAbsences > 1`，设置`match = true`。继续。
        *   如果当前字符为 'L' 递增`numLate`，否则设置`numLate = 0`。如果`numLate > 2`，设置`match = true`。继续。

组合过程中，当设置第 N 个字符时，如果`match==true`返回当前字符串。否则跳过，不匹配。如果您在最后一个字符上并且到目前为止有 0 次缺席，则可以通过不检查缺席来进行其他（次要）优化。或者在组合的最后 2 个字符上，已经有 0 个迟到了。

编辑：我发布了一个递归（groovy）解决方案。例如，`Test.combination(0, new char[10], false, 0, 0);`返回 55513 个组合，但不确定它是否正确。

```
class Test{
    public static final char[] rep = ['O', 'A', 'L'];

    public static void combination(int index, char[] arr, boolean match, int numLate, int numAbsence){
        if(index==arr.length){
            if(match)
                println arr;
            return;
        }
        for(int i=0;i<rep.length;i++){
            arr[index] = rep[i];
            if(!match){
                boolean tempMatch = match;
                int tempNumLate = numLate;
                int tempNumAbsence = numAbsence;
                switch(arr[index]){
                    case 'L': tempNumLate++; break;
                    case 'A': tempNumAbsence++; tempNumLate=0; break;
                    default: tempNumLate = 0; break;
                }
                if(tempNumLate > 2)
                    tempMatch = true;
                if(tempNumAbsence > 1)
                    tempMatch = true;

                combination(index+1, arr, tempMatch, tempNumLate, tempNumAbsence);
            }else{
                combination(index+1, arr, match, numLate, numAbsence);
            }
        }
    }
} 
```

# html - 使用显示进度条的 Phonegap 将文件下载到本地文件系统

> ID：10759619
> 
> 赞同：0
> 
> 时间：2012-05-25T18:27:37.160
> 
> 标签：html, cordova, download

我有一个 Phonegap 应用程序（iOS 和 Android），需要下载一些相当大的文件。我可以使用 FileTransfer.download() 成功下载文件。但是，由于文件太大，我希望能够显示下载进度。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:02:37.160

不幸的是[，该 API](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileTransfer)不提供进度回调..

您可能想尝试使用 XmlHttpRequest 方式来下载您的文件（对您的文件执行“GET”操作），那里似乎有一个[进度事件](https://developer.mozilla.org/En/Using_XMLHttpRequest#Monitoring_progress)！然后，您可以使用 BlobBuilder 使用 File API 存储此下载的文件。

# android - Android 单进程级服务

> ID：10759621
> 
> 赞同：1
> 
> 时间：2012-05-25T18:27:40.187
> 
> 标签：android

这是场景：

我有一项要在设备启动时启动的服务。

该服务将侦听多播数据包并向用户发送通知。

为了让服务在系统启动时开始运行，我需要定义一个接收器来监听包含以下操作的意图`android.intent.action.BOOT_COMPLETED`，然后它将启动服务。

如果我有 N 个应用程序，它们都希望该服务正在运行，并且我在所有应用程序中定义了相同的接收器，我假设 N 个服务将启动。

有什么方法可以防止同一服务的多个实例运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:08:30.650

Android 服务实际上是单例，这意味着任何时候都只会有一个实例在运行。

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/qv-z0HM5afo](https://groups.google.com/forum/?fromgroups#!topic/android-developers/qv-z0HM5afo)

根据[API 文档](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)，每次调用`startService()`都会触发`onStartCommand()`事件；但是，如果该服务已在运行，则不会启动该服务的新实例。

# asp.net - 保存和调用 asp.net 表单字段值 - 有没有更好的方法？

> ID：10759628
> 
> 赞同：0
> 
> 时间：2012-05-25T18:27:57.180
> 
> 标签：asp.net

ASP.Net 表单、SQL、C#

我有一个应用程序需要保存文本框、复选框、单选按钮等的状态。然后它必须允许在将来某个时间调用该表单的状态。

我当前的解决方案是遍历所有输入字段并将字段 ID 和字段值存储在 XML 字符串中，然后将其推送到 SQL 表中的 nvarchar 或文本字段中。我这样做的原因是，随着时间的推移，表单上可能有不同的字段，所以我不能直接转储到表中已知的一组字段中。

将来，用户可以调用“状态记录”，所有仍然存在的字段都被重新填充，任何新字段都留空。

这工作得很好，但我想知道是否有人以不同的方式或更好的方式完成了这项工作？

这个项目的想法是我的用户在一个页面上进行许多选择来创建一个“查询”，我希望有一个功能，他们可以调用以前保存的“查询”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:10:08.293

Asp.net 将控件状态保留在 viewState 中。这个 viewState 是你保存所有数据所需要的。是的，它存储的不仅仅是值。

ViewState 保存在 asp.net 中的隐藏变量中。

如果您将此值写入数据库并在页面加载时强制 loadViewState，您将恢复所有值。

loadViewState 函数由 Asp.Net 在回发时调用，因此在这种情况下，您必须自己调用它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-25T18:48:23.957

在客户端使用 JQuery 会容易得多，您可以将初始值保存在控件的数据属性中，然后重新填充所有控件。另一种方法是创建一个隐藏字段并将初始值用特殊字符分隔，然后在每次回调（例如以前的值按钮单击事件）时从隐藏字段读取并拆分您的值并更新您的控件。

# python - 读取连接到 HA7E 的 1-wire 设备的温度

> ID：10759631
> 
> 赞同：1
> 
> 时间：2012-05-25T18:28:11.717
> 
> 标签：python

我试图通过向 1-wire 适配器发出 ascii 命令来读取 1-wire 设备的温度。问题是 ser.write('W0144') 需要回车，但由于某种原因代码没有发送它。命令 ser.read(32) 返回 A69000001CFD7E328 时应该返回 44（来自 HA7E ascii 命令/手册。如果我在 Windows XP 超级终端中输入两个 ser.write 命令（不带 /r），它工作正常。

我已经参加了一周（是的，我是新手），我很困惑。我尝试了不同的超时和 time.sleeps 但没有快乐。任何人都可以提出建议吗？

```
import serial
import time
ser = serial.Serial(port = 'COM1', baudrate=9600, bytesize=8, parity=serial.PARITY_NONE, stopbits=1, timeout=0)
#show the port is open
print ser.isOpen()
ser.write('A69000001CFD7E328')
time.sleep(1)
ser.write('WO144/r')
ser.read(32)
ser.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:43:40.150

python中的转义代码需要一个反斜杠：

```
>>> ord('\r')
13 
```

您正在发送两个字符，一个“/”和字母“r”：

```
>>> len('\r')
1
>>> len('/r')
2
>>> list('/r')
['/', 'r'] 
```

# c# - 用于重构安全 ArgumentException 的 Lambda 表达式

> ID：10759632
> 
> 赞同：6
> 
> 时间：2012-05-25T18:28:12.837
> 
> 标签：c#, .net, .net-4.0, lambda

> **更新**：这不再是 C# 6 中的问题，它引入了[`nameof`](https://stackoverflow.com/questions/11063502/getting-names-of-local-variables-and-parameters-at-run-time-through-lambda-exp)操作符来解决此类场景（请参阅[MSDN](https://msdn.microsoft.com/en-us/library/dn986596.aspx)）。
> 
> **注意**：参考“<a href="https://stackoverflow.com/questions/11063502/getting-names-of-local-variables-and-parameters-at-run-time-through-lambda-exp">获取在运行时通过 lambda 表达式命名局部变量（和参数）”以概括这个问题，以及一些答案。

我喜欢使用 lambda 表达式创建`INotifyPropertyChanged`接口的重构安全实现的想法，使用类似于[Eric De Carufel](http://blog.decarufel.net/2009/07/how-to-use-inotifypropertychanged-type_22.html)提供的代码。

我正在尝试实现类似的东西`ArgumentException`，以重构安全的方式向（或其派生类）提供参数名称。

我已经定义了以下用于执行`null`检查的实用方法：

```
public static void CheckNotNull<T>(Expression<Func<T>> parameterAccessExpression)
{
    Func<T> parameterAccess = parameterAccessExpression.Compile();
    T parameterValue = parameterAccess();
    CheckNotNull(parameterValue, parameterAccessExpression);
}

public static void CheckNotNull<T>(T parameterValue, 
    Expression<Func<T>> parameterAccessExpression)
{
    if (parameterValue == null)
    {
        Expression bodyExpression = parameterAccessExpression.Body;
        MemberExpression memberExpression = bodyExpression as MemberExpression;
        string parameterName = memberExpression.Member.Name;
        throw new ArgumentNullException(parameterName);
    }
} 
```

然后可以使用以下语法以重构安全的方式执行参数验证：

```
CheckNotNull(() => arg);           // most concise
CheckNotNull(arg, () => args);     // equivalent, but more efficient 
```

我的担忧在于以下几行：

```
Expression bodyExpression = parameterAccessExpression.Body;
MemberExpression memberExpression = bodyExpression as MemberExpression; 
```

A[`MemberExpression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.memberexpression.aspx)表示“访问字段或属性”。它保证在这种`INotifyPropertyChanged`情况下正常工作，因为 lambda 表达式将是一个属性访问。

但是，在我上面的代码中，lambda 表达式在语义上是*参数*访问，而不是字段或属性访问。代码工作的唯一原因是 C# 编译器将匿名函数中捕获的任何局部变量（和参数）提升为后台编译器生成的类中的实例变量。[Jon Skeet](https://stackoverflow.com/a/7220792/1149773)证实了这一点。

我的问题是：这种行为（将捕获的参数提升为实例变量）是否记录在 .NET 规范中，或者它只是一个可能在替代实现或框架的未来版本中发生变化的实现细节？具体来说，可能有`parameterAccessExpression.Body is MemberExpression`返回的环境`false`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:12:57.697

Closures: As you stated, for parameter access, the C# compiler (yes, specifically the compiler) creates a closure class that contains instance fields to store the value of your captured parameter variable. Could this change with future versions of the C# compiler? Sure. Maybe in a future version of C#, the generated closure classes will have randomly named variables since the name doesn't really matter at runtime. Further, the code you have might not work for other .NET languages. You'll notice that VB .NET generates expression trees and closure classes slightly differently from C# sometimes...

I am not sure if your current implementation will work for structs either (though I could be mis-remembering...the situation I'm thinking of dealing with boxing might only apply for `Expression<Func<T, object>>` (read, please try it youself).

无论如何......所有这一切......它会在未来的 C# 版本中改变吗？可能不是。如果是这样，你可以改变你的内部实现来处理它可能......

至于性能：请在这里非常小心。您已经说过传递两个参数会更有效，因此您不需要编译和评估 lambda ......但为了清楚起见，您每次编译时都会在这里点击 15 到 30 毫秒评估。

# javascript - 使用 JSON 文件在 javascript 中持久存储小型数据库

> ID：10759638
> 
> 赞同：2
> 
> 时间：2012-05-25T18:28:21.877
> 
> 标签：javascript, json, persistent-storage

我是使用 JSON 的新手。

我希望我的网页在表格中显示一个包含数百条记录的小型数据库。为了避免将数据放入 MySQL 数据库或类似数据库的麻烦，我想我会从 JSON 文件中读取数据，并将其写入 JSON 文件，这相当于方便、持久地存储我的我网站上的数据库。

所以我花了一些时间编写一个脚本，将我现有的论文文件翻译成一个包含我所有记录的 paper.json 文件。看起来像：

```
[
  {"title" :  "IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture",
   "authors" :  "IEEE",
   "pub" :  "IEEE 802-2001 standard",
   "datepub" :  "2001",
   "keywords" :  "MAC",
   "dateread" :  "200309",
   "physloc" :  "box i",
   "comment" :  "Indicates how you can manage addresses assigned to you by IEEE."
  },
  {"title" :  "A framework for delivering multicast messages in networks with mobile hosts",
   "authors" :  "A. Acharya, B. R. Badrinath",
   "pub" :  "Mobile Networks and Applications v1 pp 199-219",
   "datepub" :  "1996",
   "keywords" :  "multicast mobile MH MSS",
   "dateread" :  "",
   "physloc" :  "box a",
   "comment" :  ""
  },

    <hundreds more similar papers records here...>

  },
  {"title" :  "PiOS: detecting privacy leaks in iOS applications",
   "authors" :  "M. Egele, C. Kruegel, E. Kirda, G. Vigna",
   "pub" :  "NDSS 2011",
   "datepub" :  "2011",
   "keywords" :  "iOS app location leakage",
   "dateread" :  "",
   "physloc" :  "box e",
   "comment" :  "discussed at Latte"
  }
] 
```

这是我用来阅读它的javascript代码。（我还没有对记录的写出进行编码，因为读取不起作用。）

```
var pdb = []; // global

var doneReading = false; //global

$(document).ready(function() {
        $.getJSON('papers.json',function(data) {
            pdb = data;
            doneReading = true;
        });

        while (!doneReading) {}

        alert("finished assignment of JSON to pdb"+" "+typeof pdb); 
        //alert(pdb[0].title);
        console.log(pdb[2]);
        //setup();
}); 
```

脚本永远挂在 while 循环中。为什么？

我也是 jQuery 的新手。如果不使用图书馆，我会感觉更舒服，一次一件新事物对我来说就足够了。没有 jQuery 可以轻松操作 JSON 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:32:36.330

普通浏览器 JavaScript 是单线程的。正是*因为*无限`while`永无止境，JavaScript 引擎永远无法处理调用的成功回调`$.getJSON`。您的浏览器唯一的 JS 线程永远处于循环状态，并且永远不会移动到回调。

**解决方案**：您应该消除循环并将当前位于无限循环之后的代码移动到您的`$.getJSON`回调中。

# c - C中的快速排序，带有hoare分区

> ID：10759639
> 
> 赞同：0
> 
> 时间：2012-05-25T18:28:38.410
> 
> 标签：c, algorithm, quicksort

```
#include<stdio.h>
#include <time.h>
#include <stdlib.h> 

int w, q, p, r;
int tab[100];

void main ()
{
    int i;
    srand(time(0));
    for (i = 0; i < 100; i += 1)
    {
        tab[i]=rand()%100;
    }
    display(tab);
    r = 37;
    quicksnort(tab, 0, r-1);
    display(tab);
}

int display (int tab[])
{
    int i;
    printf("\n Your numbers : \n");
    for (i = 0; i < 100; i += 1)
    {
        printf(" %d", tab[i]);
    }
}

int quicksnort(int tab[], int m, int n)
{

    if (p<r)
    {
        q = partition(tab, m, n);
        quicksnort(tab, m, q-1);
        quicksnort(tab, q+1, n);
    }
}

int partition(int tab[], int p, int r)
{
    int x, i, j, part;
    x = tab[p];
    i = p-1;
    j = r+1;
    do
    {
        do
        {
            j = j-1;    
        } while (tab[j]<=x && j>=0); 
        do
        {
            i = i+1;    
        } while (tab[i]>=x && i<=0);
        if (i<j)
        {
            part = tab[i];
            tab[i]=tab[j];
            tab[j]=part;
        }
        else
        {
            return j;
        }
    } while (1);
} 
```

嗨，我对上面的代码有问题。它会编译，但是当我运行它时，它会停止并显示某种“核心转储”警报。它基于快速排序的 hoare 版本，在那个伪代码[http://screenshooter.net/5359896/jyuogoj](http://screenshooter.net/5359896/jyuogoj)上准确地说， 我已经尽一切努力让它工作，我认为它可能与指针有关。我认为这是因为我不确定它们在 C 中是如何工作的。

（好吧，我知道它们指向单元格之类的东西，但是我迷失了带有指针的指针，或函数中使用的指针，或函数指针表等。老实说，我不知道在哪里以获取有关此的更具体信息）

但也许解决方案比这更简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:33:29.717

在调试器中运行它并查看。编译`cc -g`使其与调试器兼容。谷歌`dbx cheatsheet`学习基本命令。学习基本调试器使用和隔离错误所花费的时间比撰写帖子所花费的时间更少，这就是为什么它是一个投入时间学习的好工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:41:10.900

您的代码中有一些错误...

p,r,q 在使用之前没有定义。

我很惊讶您在编译时没有收到任何警告。

我认为正在发生的事情是由于无效值（p，r，q ..等）而无限递归，并且您的操作系统最终耗尽了内存来给您的程序。

另外，请更好地格式化您的代码，以便于阅读。为每个子子句或语句使用嵌套结构和 8 个空格或一个制表符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T19:32:38.730

我认为设置的循环`partition`减少`i`而不是增加。

你想向相反的方向移动`i`，`j`但你同时减少它们。

# javascript - 如何计算从今天起 30 天的日期

> ID：10759647
> 
> 赞同：6
> 
> 时间：2012-05-25T18:29:02.730
> 
> 标签：javascript, date

`Date`我需要使用in从三十天开始计算日期`javascript`

```
var now = new Date(); 
```

例子：

如果今天是 2013 年 2 月 13 日，那么 30 天后就是 2013 年 3 月 15 日。`30DaysLaterMonth = ActualMonth+1.`

我希望我的问题很清楚.. :) 谢谢大家！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T18:32:24.513

```
var now = new Date(); 
now.setDate(now.getDate() + 30); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-25T18:30:34.900

我认为你最好使用[**Datejs**](http://www.datejs.com/)

> Datejs 是一个开源的 JavaScript 日期库。

或者你可以自己做：

```
var cur = new Date(),
    after30days = cur.setDate(cur.getDate() + 30); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T18:32:38.763

```
var now = new Date();
var 30DaysLaterMonth = now.getDate() + 30; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:47:36.780

在原生 javascript 中，用于`Date.UTC(year, month, day)`获取从 1971-01-01 开始的毫秒数。比添加 days * (86400000) 并从此值创建日期：

```
var date_one_ms = Date.UTC(2012, 05, 25);
var ms_in_day = 24*3600*1000; // 86400000;
var date_30_days_later = new Date(date_one_ms + 30 * ms_in_day); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T14:03:25.920

```
var d = new Date();
   d.setDate(d.getDate() + 30); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-22T08:12:10.607

**立即获取最近 30 天的表格**

```
let now = new Date()
console.log(now)
let last30days = new Date(now.setDate(now.getDate() - 30))
console.log(last30days)
```

**从今天开始获取接下来的 30 天**

```
let now = new Date()
console.log(now)
let next30days = new Date(now.setDate(now.getDate() + 30))
console.log(next30days)
```

# records - 网格控件刷新

> ID：10759648
> 
> 赞同：0
> 
> 时间：2012-05-25T18:29:03.010
> 
> 标签：records, visual-foxpro, gridcontrol

我在表单上的 vfp9 中有一个网格控件。我有一个按钮女巫删除（包）当前记录。删除记录后，网格找不到资源。它仍然只是一个空矩形。我做了这样的事情： `DELETE ALL PACK GO TOP thisform.grid1.Refresh`

，但没有效果。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:33:05.853

问题是您正在重新创建网格的 RecordSource 并且它不喜欢那样。如果不知道更多关于你在做什么，很难提供具体的建议。但是，在正常的应用程序活动中打包表格通常被认为是不好的形式。通常，PACK 保留给在非工作时间运行的管理代码，因为它需要对表的独占访问权。

你在这里的目标是什么？为什么要删除网格所基于的表中的所有记录？

添马舰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:12:13.257

正如 Tamar 所提到的...... pack 在日常活动中真的很糟糕。但是，有一个“设置”可以通过所有正常操作为您“隐藏”记录，直到每晚处理的管理任务永久删除记录......

```
SET DELETED ON
SET DELETED OFF 
```

通过打开“ON”（整个应用程序只需执行一次，除非您正在处理处理私有数据会话的表单，否则也需要在那里完成。SET DELETED ON 告诉 VFP 隐藏任何标记的记录删除，这样它们就不会弄乱屏幕。它也使它们对任何类型的 SQL 查询都隐藏起来，所以你不会得到标记为删除的记录。

通过 SET DELETED OFF，将关闭隐藏并允许您再次重新查看任何/所有已删除的记录。这以防您不小心将记录标记为删除并需要“撤回”它（取消删除）。

现在，说了这么多。如果您将记录标记为删除，例如在找到条件后设置过滤器，执行全部删除，打包，那很糟糕......

在按钮的点击事件中，您只需要

```
DELETE
Thisform.YourGridObject.Refresh() 
```

并且记录应该从列表中直观地删除。当你发出一个 PACK 时，它实际上关闭了表，因此从网格中解除绑定，删除所有已删除的记录，然后通过清理版本重新打开自身，但不会自动将自身重新绑定到网格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T22:58:25.083

VFP 网格讨厌这样修改记录源。

您需要断开网格记录源（即，将其设置为“”），执行您的操作，然后重置记录源并刷新。

# c# - 使用 HttpContext 的目标上的 ThreadPool QueueUserWorkItem 错误

> ID：10759649
> 
> 赞同：2
> 
> 时间：2012-05-25T18:29:06.523
> 
> 标签：c#, .net, threadpool

我有这个类会触发一个方法并忘记它。唯一的问题是，如果正在调用的方法有一个`HttpContext`它会抛出`NullReferenceException`。

我的猜测是我不能`Httpcontext`在里面使用，`ThreadPool.QueueUserWorkItem(dynamicInvokeShim, new TargetInfo(d, args));`因为我得到`NullReferenceException` 了解决办法吗？

方法`Httpcontext`：

```
public static DataTable GetDataTable(string name)
{
    return (DataTable)HttpContext.Current.Cache[name];
} 
```

触发并忘记方法的方法：

```
using System;
using System.Threading;

namespace XGen.Kuapo.BLL
{
  public class AsyncHelper
  {
      class TargetInfo
      {
          internal TargetInfo(Delegate d, object[] args)
          {
              Target = d;
              Args = args;
          }

          internal readonly Delegate Target;
          internal readonly object[] Args;
      }

      private static WaitCallback dynamicInvokeShim = new WaitCallback(DynamicInvokeShim);

      public static void FireAndForget(Delegate d, params object[] args)
      {
          ThreadPool.QueueUserWorkItem(dynamicInvokeShim, new TargetInfo(d, args));
      }

      static void DynamicInvokeShim(object o)
      {
          try
          {
              TargetInfo ti = (TargetInfo)o;
              ti.Target.DynamicInvoke(ti.Args);
          }
          catch (Exception ex)
          {
              // Only use Trace as is Thread safe
              System.Diagnostics.Trace.WriteLine(ex.ToString());
          }
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T21:30:08.133

就像 usr 说的：`HttpContext.Current`仅在执行请求的线程上可用，并且您启动的线程池线程不是同一个线程。

但是，如果您想访问 ASP.NET 缓存，您也可以使用`HttpRuntime.Cache`，这是每个线程都可用的静态属性。（`HttpContext.Current.Cache`只需返回`HttpRuntime.Cache`，因此您无需担心任何差异。）

请注意，不建议将接收到的 HttpContext 实例传递`HttpContext.Current`给另一个线程：当另一个线程运行时，与捕获的 HttpContext 对应的请求可能已经结束，因此您最终可能会得到一个损坏的 HttpContext 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:04:49.177

是的，`HttpContext.Current`仅在执行 HTTP 请求的线程上可用。一个简单的解决方法是将表达式的结果传递`(DataTable)HttpContext.Current.Cache[name]`给线程，这样线程本身就不需要访问`HttpContext`. 或者，将`HttpContext.Current`对象传递给线程。

如何将数据传递给线程或任务超出了这个问题的范围，但你会在网上找到很多关于它的信息。

# batch-file - 使用外部文本文件创建批处理菜单

> ID：10759651
> 
> 赞同：1
> 
> 时间：2012-05-25T18:29:09.280
> 
> 标签：batch-file

我正在处理一个批处理文件，该文件生成一个文本文件，其中包含以下格式的名称列表

```
Name1
Name2
Name3
etc... 
```

我想做的是创建一个菜单，从文本文件中提取条目以创建选项。

所以

```
Menu
1 Name1
2 Name2
etc... 
```

我可以创建菜单本身，但它从文件中获取数据并分配给让我难过的变量。我看过 FOR 命令，但我想我的大脑并没有环绕它。有没有人有任何代码可以完成上述操作？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:48:42.053

```
@echo off
setlocal EnableDelayedExpansion
echo Menu
set i=0
for /F "delims=" %%a in (theTextFile.txt) do (
   set /A i+=1
   set "name[!i!]=%%a"
   echo !i! %%a
)
set lastOpt=%i%
:getOption
set /P "opt=Enter desired option: "
if %opt% gtr %lastOpt% (
   echo Invalid option
   goto getOption
)
echo Process !name[%opt%]! 
```

有关更详细的解释，请查看[此答案](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T00:26:55.980

如果您在循环中逐行生成文本文件，则可以将以下计数器添加到循环中：

```
…
SET /A cnt+=1
… 
```

然后，您将在另一个循环中使用它，该循环将以编号列表的形式输出行：

```
…
<YourFile.txt (
  FOR /L %%L IN (1,1,%cnt%) DO (
    SET /P line=
    SETLOCAL EnableDelayedExpansion
    ECHO %%L !line!
    ENDLOCAL
  )
) 
```

但是，如果您的文本文件是作为单个命令（或者可能是多个命令）的输出生成的，您可以像这样计算之后的行数：

```
…
FOR /F %%C IN ('FIND /C /V "" ^<YourFile.txt') DO SET cnt=%%C
… 
```

然后您可以使用与`FOR /L`上面相同的循环来显示菜单。

# java - 是否可以使用二维数组来存储 JSF 复选框？

> ID：10759654
> 
> 赞同：1
> 
> 时间：2012-05-25T18:29:15.007
> 
> 标签：java, jsf, jsf-2, hash

我有一个 JSF 表，它使用 Hashmap 来存储选定的复选框。我的问题是：是否可以使用 2D Java 数组来存储键而不是 Hashmap？

**编辑** 我使用此代码来存储选定的键。如何重写此代码`Map`？

```
private HashMap<String, Boolean> selected = new HashMap<>();

    // send the list
    public Map<String, Boolean> getselected() {
        return selected;
    } 
```

我的想法是创建 2D 数组（将使用 MAP），它将存储页数和页面上的列表。例如 100 页 x 10 个键。

**编辑 2**

我创建了具有延迟加载的 JSF 表，该表从 Oracle 获取数据。JSF 工作得非常好而且很快。我面临的问题是，当我尝试创建`select all`复选框时，它将所有 kays 并将密钥存储到`hashmap`. 稍后这些键将用于 SQL 查询以删除用户选择的行。我创建了包含 10 000 行的数据库表并将它们显示到 JSF 表中。当我单击它们时，我`hashmap`用 10 000 创建了所有内容。对于该大小，性能相对较好。我测试删除它们 - 我创建了 Java 方法，该方法`hashmap`使用存储在`hashmap`. 它的显示，但可以做一些代码优化。最大的问题是可扩展性。我测试了`hashmap`有 1 000 000 个键 - 它可以工作，但速度非常慢。我需要设计 JSF 表来处理非常大的数据。我认为解决方案是使用 2D 数组（让我们在这个例子中调用它）。我将这样解释我的想法：例如，我将有 100 页的 JSF 表。每页将有 10 行。进入标准`hashmap`时，当我选择所有行时，我将有 1000 个键。在二维数组解决方案中，我可以创建包含 100 个元素的数组，当我在页面之间切换时，我将只有 10 行，这些行将从分页代码中生成。当我选择所有数据库行时，我只能将可见行键插入二维数组。例如，我替换的数组中的其他位置`1`为了知道有什么东西。当我按下删除按钮时，Java 代码将知道所有元素都被“虚拟”选中。有没有更好更简单的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:08:13.070

A`Map`允许通过`put()`方法动态扩展，所以使用前不需要准备，但数组不允许动态扩展，必须事先手动准备固定大小。

如果从技术上讲，您只想要一个 1D 对集合，那么 2D 阵列很难准备并且完全没有意义。如果您使用一维数组并将表的行索引用作数组索引，则会更容易。

例如

```
private List<Item> items;
private Boolean[] checked;

@EJB
private ItemService service;

@PostConstruct
public void init() {
    items = service.list();
    checked = new Boolean[items.size()];
} 
```

和

```
<h:dataTable binding="#{table}" value="#{bean.items}" var="item">
    <h:column>
        <h:selectBooleanCheckbox value="#{bean.checked[table.rowIndex]}" />
    </h:column>
</h:dataTable> 
```

但是，如果您引入分页或过滤或动态添加/删除行，这可能会造成严重破坏。您每次都需要手动调整数组的大小和排序。`Map`由项目自己`id`而不是行索引键入的A则容易得多。

* * *

**更新**：

a 的“全选”`Boolean[]`应该很简单

```
Arrays.fill(checked, Boolean.TRUE); 
```

我在 i3 笔记本电脑上对其进行了测试，它在 20 毫秒内完成了 1,000,000 个条目。您的性能问题可能应该在持久层中寻找。

# iphone - 在 NSMutableArray 中查找重复值

> ID：10759657
> 
> 赞同：0
> 
> 时间：2012-05-25T18:29:35.273
> 
> 标签：iphone, xcode, indexing, nsmutablearray, duplicates

如何知道重复出现在我的数组中的次数？

```
for (NSUInteger index = 0; index < count; index++)

{ 

     NSDictionary *dico = [myArray objectAtIndex:index ];

    NSString *exp = [dico objectForKey:@"name"];

               NSLog(@"index %d : %@",index,exp);
    } 
```

这是我的 NSLog：

```
index 0 : Mike
index 1 : Peter
index 2 : Franck
index 3 : Peter 
```

想知道我的重复值在哪里。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:25:06.137

如果我没记错的话，NSSet 就是为了做到这一点而设计的……试试这个……

```
NSSet *uniqueElements = [NSSet setWithArray:myArray];

for(id element in uniqueElements) {
  // iterate here
} 
```

# css - 漂浮在容器内部阴影上的表格

> ID：10759658
> 
> 赞同：1
> 
> 时间：2012-05-25T18:29:42.607
> 
> 标签：css, html-table

假设我想把我的桌子放在一个有内阴影的容器里，让它看起来像是在一个盒子或类似的东西的深处。

问题是，当我给表格单元格设置背景颜色时，它们似乎漂浮*在*容器的阴影上，使其不可见。

z-index 似乎没有解决问题：

[http://jsfiddle.net/h9Fdm/](http://jsfiddle.net/h9Fdm/)

CSS：

```
 .container {
     box-shadow: inset 0px 0px 5px black;
     float: left;
     width: 100%;
 }
 table{
     width: 100%;
     float: left;
 }
 table tr td{
     background-color: #ccc        
 } 
```

html:

```
<div class="container">
<table>
    <tr>
        <td>fdsa</td>
        <td>fdsafdsa</td>
    </tr>
</table>
</div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:37:45.687

您可以添加填充容器 div

```
.container {
     box-shadow: inset 0px 0px 5px black;
     float: left;
     width: 100%;
     padding: 20px;
 } 
```

# c# - 编译器常量、优化和性能

> ID：10759659
> 
> 赞同：2
> 
> 时间：2012-05-25T18:29:45.383
> 
> 标签：c#, .net

我有一大段代码经常需要跟踪信息输出，以便客户可以帮助调试输出 - 它非常面向数学。

出于性能原因，我绝对不希望在生产中启用跟踪，但是必须经常评论它变得很麻烦。

我刚刚设置了这样的代码......

```
using System.Diagnostics;

const bool TRACING_ENABLED = false;

//math math math....

Trace.WriteLineIf(TRACING_ENABLED, "Minimum Nitrogen Yield: " + minYieldNitrogen);
Trace.WriteLineIf(TRACING_ENABLED, "Minimum Water Yield: " + minYieldWater);
Trace.WriteLineIf(TRACING_ENABLED, "Minimum Seed Yield: " + minYieldSeed);

//more math math trace math trace math... 
```

我的问题是......这是启用和禁用跟踪以进行调试的最佳方法吗？这些类型的行分散在整个代码中，所以我希望不必`if`为了家务而在它们周围包装块或任何东西。

编译器是否会在程序集中优化这些行，因为它们是`false`在构建时提供的常量？

感谢您的洞察力！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:31:05.910

我会使用[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)和编译器标志来处理这个问题。

这具有从生产代码中*完全删除方法*的优点- 因此甚至不会发生条件检查。

这样做，您可以制作自己的方法，例如：

```
[Conditional("TRACE")]
public WriteTraceLine(string message)
{
     Trace.WriteLine(message);
} 
```

然后`TRACE`在您的调试/非生产构建设置中有一个标志。当定义该标志时，这将导致该方法仅存在于编译源（包括调用）中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:37:49.730

我也会看看 Debug.WriteLine() 方法。所有的 Debug 方法都使用 Reed 的 Conditional 属性，而是基于“DEBUG”常量的定义（您可以在默认的 Debug 构建配置中免费获得，而在默认的 Release 构建配置中不存在）。Debug 方法使用与 Trace 相同的侦听器集合；这个想法是您使用 Trace.WriteLine() 来记录或显示在软件的任何版本中的任何内容，并使用 Debug.WriteLine() 来获取要在软件的 Debug 版本中记录或显示的其他文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:41:52.770

而不是`Trace.WriteLineIf(condition, message)`，使用`Debug.WriteLine(message)`.

在 Debug 构建中，对该方法的调用会被正常编译。在发布版本中，编译器不会为调用发出代码，也不会为参数评估发出代码。如果我正确理解您的问题，这正是您想要的。

准确地说，`Debug.WriteLine(message)`有一个`[ConditionalAttribute("DEBUG")]`应用于它。`DEBUG`因此，当且仅当符号在编译期间定义时，编译器才会发出调用它的代码。此符号在标准 Visual Studio 调试版本中定义，但不在发布版本中定义。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/9z9k5ydz](http://msdn.microsoft.com/en-us/library/9z9k5ydz)和[http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:49:58.423

也许您可以做的就是编写自己的课程

```
public class MyTrace 
{
     [Conditional("TRACE")]
     public static void Trace(string message)
     {
          //trace code goes here
     }
     [Conditional("DEBUG")] 
     public static void Debug(string message)
     {
          //Debug code goes here
     }
} 
```

这样做的好处是您可以使用条件编译、添加配置逻辑甚至使用 Log4Net 之类的日志记录包

你当然会用

```
 ....
  MyTrace.Trace(".....");
  MyTrace.Debug(".....");
  .... 
```

# windbg - 在 WinDBG 中手动设置断点

> ID：10759661
> 
> 赞同：9
> 
> 时间：2012-05-25T18:29:46.100
> 
> 标签：windbg, breakpoints, ollydbg

我正在尝试使用 WinDBG 检查可执行文件的程序集，但我很难找到它。我想在程序的第一条指令处设置断点，但是当我尝试手动执行此操作（使用模块的地址）时，WinDBG 告诉我它“无法在该位置插入断点”，因为“对内存位置的访问无效。”

我注意到，当我通过源代码 GUI 创建断点时，地址与模块的第一部分不同（在我的示例中：“Win32FileOpen”，我编写的一个简单程序。）是否有某种标题这需要在我的模块地址上添加一个偏移量？

在另一个 [问题](https://stackoverflow.com/questions/1503670/in-windbg-can-i-use-software-breakpoints-without-having-symbols)中，我看到了建议：“我会尝试将断点地址计算为：模块开始 + 代码开始 + 代码偏移”，但不确定从哪里获得这些值。有人可以详细说明一下吗？

我不只是使用源 GUI 的原因是我希望能够使用我可能没有源/符号的程序来执行此操作。

如果有更简单的方法可以立即开始使用我打开的可执行文件，请告诉我。（例如，打开一个 .exe Olly 会立即向我显示该 .exe 的程序集，搜索引用的字符串会为我提供该模块的结果等。WinDBG 似乎在 ntdll.dll 中让我开始，这对我来说通常没有用处。）

```
0:000> lm
start             end                 module name
00000000`00130000 00000000`0014b000   Win32FileOpen C (private pdb symbols)  C:\cfinley\code\Win32FileOpen\Debug\Win32FileOpen.pdb
00000000`73bd0000 00000000`73c2c000   wow64win   (deferred)            
00000000`73c30000 00000000`73c6f000   wow64      (deferred)            
00000000`74fe0000 00000000`74fe8000   wow64cpu   (deferred)            
00000000`77750000 00000000`778f9000   ntdll      (pdb symbols)          c:\symbols\mssymbols\ntdll.pdb\15EB43E23B12409C84E3CC7635BAF5A32\ntdll.pdb
00000000`77930000 00000000`77ab0000   ntdll32    (deferred)            
0:000> bu 00000000`00130000
0:000> bl
 0 e x86 00000000`001413a0     0001 (0001)  0:**** Win32FileOpen!main              <-- One that is generated via GUI
 1 e x86 00000000`00130000     0001 (0001)  0:**** Win32FileOpen!__ImageBase       <-- One I tried to set manually
0:000> g
Unable to insert breakpoint 1 at 00000000`00130000, Win32 error 0n998
    "Invalid access to memory location."
bp1 at 00000000`00130000 failed
WaitForEvent failed
ntdll!LdrpDoDebuggerBreak+0x31:
00000000`777fcb61 eb00            jmp     ntdll!LdrpDoDebuggerBreak+0x33 (00000000`777fcb63) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T19:15:21.740

您应该能够使用以下命令列出您的 dll 的所有入口点：

```
x myDLL!* 
```

但请注意，这将列出所有内容，

如果你只想要 Win32FileOpen：

```
x myDLL!*Win32FileOpen* 
```

将列出所有匹配项，这将列出您可以设置断点的正确地址。

关于偏移量的其他问题，您可以在方法名称或地址上设置断点并添加偏移量：

```
bp myDLL!Win32FileOpen+0xa 
```

如果您打开可执行文件，它将立即调试中断并且可能不会开始加载您的 dll，如果这是一个问题，那么您可以设置未解决的断点：

```
bu myDLL!Win32FileOpen 
```

或者只是在应用程序启动时附加，列出字符串然后设置断点。

您还可以考虑在源代码行设置断点：

```
bp `myDLL!mySourceFile.cpp:XXX` 
```

其中 XXX 是行号，请注意您必须使用重音符号来标记源代码行，希望这会有所帮助。

**编辑**

刚刚找到您可能感兴趣的链接：http: [//mattoh.wordpress.com/2010/08/06/setting-breakpoint-on-entry-poin-with-windbg/](http://mattoh.wordpress.com/2010/08/06/setting-breakpoint-on-entry-poin-with-windbg/)

还有一位评论员指出了一个伪寄存器，它允许您在 exe 的入口点设置 bp：

```
bp $exentry 
```

或者

```
bu @$exentry 
```

# unit-testing - Salesforce APEX - 测试上下文为相关对象返回 null

> ID：10759666
> 
> 赞同：0
> 
> 时间：2012-05-25T18:30:04.337
> 
> 标签：unit-testing, salesforce, apex-code, soql

编写 testMethod 时，我无法检索相关的联系人字段。在下面的示例中，我希望最终断言返回 true。我正在测试的代码工作正常，选择仅在测试上下文中失败。

为什么 SOQL 查询没有返回联系信息？

```
static testMethod void FailTest()
{
        Contact client = new Contact(FirstName='TestFirst1', LastName='TestFirst', BirthDate = Date.parse('01/01/1986'), Gender__c = 'Male');
        insert client;
        Opportunity opp = new Opportunity(Name = 'Test Opp' + Math.random(), CloseDate=Date.Today(), StageName='ASR - Case Design', Product_Types__c='UL', Face_Amount_Applied_For__c=500, Estimated_Target_Premium__c=1000, X1st_Client__r = client);
        insert opp;

        Opportunity selectOpp = [Select o.X1st_Client__r.LastName From Opportunity o WHERE o.Id = :opp.Id LIMIT 1];

        system.assertNotEquals(opp.X1st_Client__r.LastName, null); //true
        system.assertNotEquals(opp.Name, null); //true
        system.assertNotEquals(selectOpp.Name, null); //true
        system.assertNotEquals(selectOpp.X1st_Client__r.LastName, null); //false, should be true
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:47:40.393

我认为问题可能在于您将机会与客户记录相关联的方式。你有 X1st_Client__r = client，我认为你可能真正想做的是 X1st_Client__c = client.Id。我认为插入 DML 不会考虑 X1st_Client__r 中表示的对象。我认为它只会在插入期间关注 X1st_Client__c 值。

# php - 字典搜索词 - PHP 和 MySQL 中的最佳性能

> ID：10759670
> 
> 赞同：1
> 
> 时间：2012-05-25T18:30:44.677
> 
> 标签：php, sql, database, memory-management, dictionary

我想实现一个字典来搜索单词及其变形。字典大小约为 60MB，并存储在 txt 文件中。

目前我将整个字典（60MB）传递给一个变量，然后搜索有趣的单词。我无法抗拒一种不恰当的印象（为字典分配 60MB 内存）

谁能推荐其他解决方案？也许还有其他方法可以在文件中搜索有趣的短语而不将其全部内容存储到内存中？或者也许将整个字典放入 MySQL db 会有所帮助（我可以将该字典切片并将​​每个单词放入带有附加 id 的 db 以识别来自同一根的不同单词之间的变形）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:41:58.247

当然，将字典放入数据库会有所帮助。由于内部索引和驻留在系统内存中作为守护进程，数据库的工作速度要快得多；使用查询搜索变形也将更简单、更快、更高效：

`SELECT * FROM dictionary WHERE word LIKE "devel%"`

会让你“开发”、“开发者”、“开发”等等。还有很多其他的可能性。唯一的缺点是您必须安装数据库服务器。另一方面，如果 20 个用户同时连接，将整个 txt 文件加载到内存中会消耗超过 1GB 的内存，因为每次都重新启动脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:40:56.173

将 60mb 放入内存中进行搜索是可笑的……数据库是这里唯一正确的答案。[我昨天在这里](https://stackoverflow.com/questions/10740690/how-to-search-inside-gcide-xml-using-php/10742775#10742775)回答了一个关于字典的类似问题。

将其放入数据库后，还请查看[此处](https://stackoverflow.com/questions/10757741/search-a-mysql-db-field-for-multiple-text/10757790#10757790)回答的全文搜索。

# wpf - 这个 WPF 列表视图中的边框来自哪里

> ID：10759671
> 
> 赞同：2
> 
> 时间：2012-05-25T18:30:46.090
> 
> 标签：wpf, listview, user-interface

我正在尝试使列表视图看起来以某种方式，并且我已经设法删除了大多数我不想要的 UI 元素，但我无法弄清楚所选项目周围的边框来自哪里。

示例中选择的是索引 0。如何删除该边框？ ![问题示例](../Images/2dd7999246e691a948de9d57f0aef579.png)

目前我是以下代码来删除背景和边框。

```
<ListView ItemsSource="{Binding Path=Items}" Name="MainListView">
            <ListView.ItemContainerStyle>
 <Style TargetType="ListViewItem">
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{x:Null}" />
                            <Setter Property="BorderBrush" Value="{x:Null}" />
                            <Setter Property="BorderThickness" Value="0" />
                        </Trigger> 
```

问题可能与当我将鼠标悬停在标签上时我得到第二个灰色行有关：![在此处输入图像描述](../Images/16597a59286ae6a1cc77c2f1d624c7dc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:34:52.337

现在，您正在使用触发器来更改样式，但您没有显示*默认*样式。如果您希望默认情况下没有边框，只需直接在样式上设置即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:09:22.513

覆盖`Template`for ListViewItem 并重写它，排除创建不需要的效果的元素和触发器。您可以在 VS11 的 XAML 设计器或 Blend 中提取默认模板，也可以在[MSDN 参考](http://msdn.microsoft.com/en-us/library/aa970773.aspx)中找到它们。我个人更喜欢完全重写它们，因为它允许我重构经常臃肿的 XAML 模板，而不是简单地通过将它们的默认值更改为`{x:Null}`. 视觉树中的混乱越少越好！

# objective-c - IOS中的socket断开连接

> ID：10759679
> 
> 赞同：1
> 
> 时间：2012-05-25T18:31:48.373
> 
> 标签：objective-c, ios, sockets, tcp

我需要 IOS Socket 编程方面的帮助。我已经在 IOS 和 Java 服务器之间实现了一个成功的 TCP Socket 连接，但是我发现在套接字失败后重新连接它是不可能的（我断开我的网络并重新连接它）。

这是我用来打开流的代码：

```
- (void)initCommunication{
@try {
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"XXX.XXX.XXX.XXX", 4454, &readStream, &writeStream);

    inputStream = (__bridge NSInputStream *)readStream;
    outputStream = (__bridge NSOutputStream *)writeStream;

    //Asignamos los delegates
    inputStream.delegate = self;
    outputStream.delegate = self;  

    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [inputStream open];
    [outputStream open];
    connected = true;
    }
}
@catch (NSException *exception) {
    connected = false;
    NSLog(@"Error connecting socket: %@", exception.reason);
    [self checkConnection];
}
} 
```

当我收到 NSStreamEventErrorOccurred 或 NSStreamEventEndEncountered 时，我会尝试关闭连接并重新连接。

我关闭它：

```
-(void) close{

[inputStream close];
[inputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream close];
[outputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream setDelegate:nil];
inputStream = nil;
[outputStream setDelegate:nil];
outputStream = nil;

connected = false;
} 
```

问题是套接字没有再次重新连接......我正在考虑使用 SmallSockets 或 CocoaAsyncSockets 看看我是否可以重新连接套接字......你看到任何实现问题吗？你推荐使用 SmallSockets 还是 CocoaAsyncSockets？

先感谢您！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:15:10.383

最后我确实用 CocoaAsyncSockets [https://github.com/robbiehanson/CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)实现了它，用这个套接字重新连接真的很容易。

首先我初始化套接字对象：

```
socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

要连接我使用：

```
NSError *err = nil;
if ([socket connectToHost:@"XXX.XXX.XXX.XXX" onPort:YYYY error:&err])
{
NSLog(@"Connection performed!");
}
else
{
NSLog(@"Unable to connect: %@", err);
} 
```

然后您可以在委托失败时使用它进行重新连接：

```
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
NSLog(@"Socket:DidConnectToHost: %@ Port: %hu", host, port);

connected = YES;
    [sock readDataWithTimeout:-1 tag:0];
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err
{
NSLog(@"SocketDidDisconnect:WithError: %@", err);   
    connected = NO;
    //We will try to reconnect
    [self checkConnection];
}

- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    [self processReceivedData:data];
    [sock readDataWithTimeout:-1 tag:0];
} 
```

我发现这个库很容易使用。我希望这对任何人都有帮助。非常感谢。

# javascript - 永久唯一移动设备标识符 (Evercookie?)

> ID：10759683
> 
> 赞同：4
> 
> 时间：2012-05-25T18:32:03.180
> 
> 标签：javascript, android, ios, web-applications, local-storage

我正在开发的 Web 应用程序需要将设备识别为已激活或未激活，以防止它们使用未付费的服务。现在，我们将它存储在一个 webSQL 表中，如果您清除浏览器设置，您将完全被淹没，我们必须为您修复它。

是否有更持久的方法来唯一标识设备以确定其设备激活状态？

我一直在研究evercookie，但只需要清除浏览器并强制关闭浏览器即可将其杀死Android（没有强制关闭，即使浏览器清除也可以正常工作）。更好，但并不理想。我没有 iOS 设备来测试它，但我们真正关心的是这两个。

有没有我不知道的更好的选择？evercookie 比我目前拥有的更聪明还是没有必要？

只是我们正在使用的商业模式的一些背景。客户购买设备许可证，一个设备许可证激活一个设备（因为现在可以使用一台设备，而不是一个帐户）。因此，多个设备可以在一个帐户上，但需要激活。所以独特的帐户已经出来了。我们需要一种通过网络应用程序强制设备激活的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:42:52.287

至少有几个关于 Android 的讨论。

从官方博客中，提出了一些问题：

[http://android-developers.blogspot.se/2011/03/identifying-app-installations.html](http://android-developers.blogspot.se/2011/03/identifying-app-installations.html)

然后还要参考这个stackoverflow问题，不要只阅读第一个答案：

[是否有唯一的 Android 设备 ID？](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)

# loops - Cocos2D 游戏循环说明

> ID：10759684
> 
> 赞同：4
> 
> 时间：2012-05-25T18:32:08.103
> 
> 标签：loops, cocos2d-iphone, game-loop

注意：我不是以英语为母语的人。请原谅任何语法错误。

我开发了一个简单的游戏，左边有一个射手，右边有敌人。非常简单。

该项目即将完成，它运行良好，但现在我对游戏循环管理有些疑问。

我安排了从右侧出现的敌人，给了调度程序一个间隔，这没关系，但是我通过一个简单的 ccMoveTo 动作管理了敌人从右到左的移动，我重复一遍：它工作得很好。问题是我读了一些关于“在每一帧中渲染精灵”的东西，将这个操作委托给每帧运行一次的预定方法。

更好：我读到不使用动作来移动精灵，而是逐帧重新渲染它们，以以 1/60 频率（fps 频率）调用的计划方法中模拟运动，我读到这种实现可以防止不同硬件系统稳定性的一些差异..

我要问的是：

*   这是正确的方法吗？
*   那是 Cocos2D 过时的旧“设计模式”吗？（这意味着使用 ccMoveTo 动作是完全完美的）
*   还是两个实现在同一级别上都是正确的？

编辑：

- 动画也应该使用相同的技术吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T10:56:23.830

首先，如果它“完美运行”并且你的游戏快结束了，不要改变你的游戏。如果你现在改变一些东西，你就会冒着对你的游戏玩法产生细微变化的风险，你的游戏将需要更长的时间才能完成，最后玩家可能甚至不会注意到其中的差异。下次您可以尝试不同的方法，但对于您当前的游戏，只要一切顺利，就保持原样。

我相信您所读到的也是我要说的：不要将 CCMoveTo/CCMoveBy 用于游戏对象的（复杂）移动。如果移动非常简单，或者从 A 到 B 的一次性动作，CCMove 动作是可以的。但即便如此，更新位置的更新循环也同样易于实现。

CCMove 动作的问题是当您想要改变方向和/或速度时它们的行为。在这种情况下，您必须创建一个新的移动操作。如果你经常这样做，你会在你的游戏中添加更多的alloc/dealloc循环而不是必要的。其次，CCMove 动作在产生任何效果之前需要一帧不活动。这意味着如果您每帧都创建一个新的 CCMove 动作，那么该游戏对象实际上会被卡住并且根本不会移动。如果您不太频繁地更改它，您仍然会注意到每次对象更改速度或方向时都会出现短暂的停顿。两者都不可取。

替代方案并不像您说的那么复杂。是的，您需要在移动的游戏对象中安排更新，如下所示：

```
[self scheduleUpdate]; 
```

然后实现更新节点位置的更新方法：

```
-(void) update:(ccTime)delta
{
    self.position = CGPointMake(self.position.x + 1, self.position.y);
} 
```

更灵活的运动通常使用速度矢量（CGPoint，通常是实例变量）来确定运动的速度和方向：

```
-(void) update:(ccTime)delta
{
    self.position = ccpAdd(self.position, self.velocity);
} 
```

现在，您可以更加了解如何将速度添加到位置，以及如何更新速度本身。例如，您可以限制速度以确保您的对象的移动速度永远不会超过每秒 x 个像素。您还可以通过每帧降低velocity.y 来添加模拟重力。还有更多。基本原理保持不变。

唯一真正不同的选择是您将更新之间的增量时间考虑在内。这可确保节点随时间行进相同的距离，而与帧速率无关。这意味着如果帧速率从 60 fps 下降到 20 fps，节点仍将行进相同的距离，但每帧将多移动几个像素以弥补损失的时间。如果不考虑增量时间，节点只会随着帧速率下降而减慢。

积分增量时间是一个简单的乘法：

```
-(void) update:(ccTime)delta
{
    self.position = ccpAdd(self.position, ccpMult(self.velocity, delta));
} 
```

但是，大多数游戏不应该使用时间增量。它可能会导致相当不可预测的结果，包括如果设备忙碌了十分之一秒或更长时间（例如，如果它收到电子邮件或短信），游戏世界模拟中的巨大跳跃。

大多数游戏应该放慢速度，然后试图弥补“失去”的时间。问题在于，在此期间玩家无法做出更快的反应（相反），因此以比平时更快的速度推进游戏世界模拟对玩家来说是不公平的，并且可能导致过早失去四肢或生命。

# ios - 从主游戏offSet创建一个类并初始化

> ID：10759690
> 
> 赞同：0
> 
> 时间：2012-05-25T18:32:26.643
> 
> 标签：ios, cocos2d-iphone

我正在开发我的游戏，我很难将我的头脑围绕在一个概念上，也许你可以为我澄清一下。

所以在子弹类中，我在点 0,0 创建了一个子弹对象，这很好，然后当我真正从主游戏创建它时，我在点创建它

thePlayer.position.x, 0

它将它放在玩家所在的 X 轴上，将 0 放在屏幕底部的 Y 轴上

我的问题是假设我想在枪的顶部创建子弹。不在屏幕底部。所以我会写 thePlayer.position.x,60; 它会从枪口开始，但在击中目标之前会有 60 的偏移量……我确实想出了一个解决方案，但我不喜欢它。我认为必须有一个更好的答案..

我的回答是：进行 var call bulletOffet=any number 让我们说 60 然后在 thePlayer.position.x, 0+bulletOffSet 创建子弹

现在当我检查子弹和目标时

for (Bullet *someBullet in self.children) { if ([someBullet isKindOfClass:[Bullet class]]) { CGPoint bulletPoint = CGPointMake(someBullet.position.x, someBullet.bulletSprite.position.y+bulletOffSet);

这确实有效，但必须有更好的解决方案让我知道我错过了什么谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:20:57.723

您的问题应该可以通过更改子弹的锚点来解决。

我认为了解锚点将帮助您解决问题。我在下面附上了一个链接，它为锚点的工作方式提供了一个很好的公会。

[http://www.qcmat.com/understanding-anchorpoint-in-cocos2d/](http://www.qcmat.com/understanding-anchorpoint-in-cocos2d/)

# java - 运行程序 60 分钟，每个线程使用不同的 ID

> ID：10759694
> 
> 赞同：2
> 
> 时间：2012-05-25T18:32:39.240
> 
> 标签：java, multithreading, threadpool, executorservice

如何确保每个线程使用不同的唯一 ID，并且该 ID 应介于 startExistingRange 和 endExistingRange 之间。我很担心，因为该程序应该运行 60 分钟，而在 60 分钟之前，所有的 id 都可能已被使用，那么我该怎么办。我应该重置变量吗？什么是最佳实践？

例如：- 线程 1 将使用 25，线程 2 将使用 45 等等。

```
class ThreadTask implements Runnable {
    private int id;

    public ThreadTask(int id) {
        this.id = id;
    }

    public void run() {
        System.out.println("Thread " + id);
    }
}

public class TestPool {

    public static void main(String[] args) {
        int size = 10;
        int durationOfRun = 60;
        int startExistingRange = 1;
        int endExistingRange = 1000;

        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(size); 

        // queue some tasks
        long startTime = System.currentTimeMillis();
        long endTime = startTime + (durationOfRun*60*1000);

        // Running it for 60 minutes
        while(System.currentTimeMillis() <= endTime) {
/* I want each thread uses different unique ID between startExistingRange
 and endExistingRange */
            service.submit(new ThreadTask(What should I pass 
                 here so that each thread is using different ID));
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
    }
} 
```

更新：-

```
public class TestingPool {

    public static void main(String[] args) throws InterruptedException {
        int size = 10;
        int durationOfRun = 1;
        IdPool idPool = new IdPool();   
        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(size); 

        // queue some tasks
        long startTime = System.currentTimeMillis();
        long endTime = startTime + (durationOfRun * 60 * 1000L);

        // Getting and releasing id in while loop
        while(System.currentTimeMillis() <= endTime) {
            Integer id = idPool.getId();
            service.submit(new ThreadTask(idPool, id));
            idPool.releaseId(id);
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
    }

}

class IdPool {
    private final LinkedList<Integer> availableIds = new LinkedList<Integer>();

    public IdPool() {
        for (int i = 1; i <= 1000; i++) {
            availableIds.add(i);
        }
        Collections.shuffle(availableIds);
    }

    public synchronized Integer getId() {
        return availableIds.removeFirst();
    }

    public synchronized void releaseId(Integer id) {
        availableIds.add(id);
    }
}

class ThreadTask implements Runnable {
    private IdPool idPool;
    private int kk;

    public ThreadTask(IdPool idPool, int s) {
        this.idPool = idPool;
        this.kk = s;
    }

    public void run() {
        //Integer id = idPool.getId();
        System.out.println("Task " + kk);
        //idPool.releaseId(id);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:38:32.460

不要在创建时将 ID 传递给您的任务，而是让您的任务从可用 ID 池中获取其 ID。由于您有 10 个线程，因此您只需要 10 个 ID。每个任务在启动时从池中获取一个 ID，并在完成时将其释放到池中。当然，池需要是线程安全的：

```
public class IdPool {
    private final LinkedList<Integer> availableIds = new LinkedList<Integer>();

    public IdPool() {
        for (int i = 1; i <= 1000; i++) {
            availableIds.add(i);
        }
    }

    public synchronized Integer getId() {
        return availabeIds.removeFirst();
    }

    public synchronized void releaseId(Integer id) {
        availableIds.add(id);
    }
}

class ThreadTask implements Runnable {
    private IdPool idPool;

    public ThreadTask(IdPool idPool) {
        this.idPool = idPool;
    }

    public void run() {
        Integer id = idPool.getId();
        System.out.println("Task " + id);
        idPool.releaseId(id);
    }
}

public class Main {
    public static void main(String[] args) throws InterruptedException {
        int size = 10;
        int durationOfRun = 60;
        IdPool idPool = new IdPool();   
        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(size); 

        // queue some tasks
        long startTime = System.currentTimeMillis();
        long endTime = startTime + (durationOfRun * 60 * 1000L);

        // Running it for 60 minutes
        while(System.currentTimeMillis() <= endTime) {
            service.submit(new ThreadTask(idPool));
        }

        // wait for termination        
        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:42:16.373

您可以跟踪集合中已经使用了哪些 ID（为方便起见，另一个用于未使用的 ID）。

然后你可以从 1 到 1000 开始 ID。当你用完时，你会在未使用的集合中查找可用的值

每次启动线程时，都会将该 id 从未使用的集合移动到已使用的集合，每次线程完成时，您都会执行相反的操作。

不可能用完 ID，因为您最多只能同时运行 10 个线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:17:39.620

您是否考虑过使用[Thread.getID()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getId%28%29)。

> 返回此线程的标识符。线程 ID 是创建此线程时生成的正长整数。线程 ID 是唯一的，并且在其生命周期内保持不变。当一个线程被终止时，**这个线程 ID 可能会被重用**。

注意我的重点。

然后，您可以添加 100,000 *`the number of seconds you have been running`或其他内容。

**添加**- 应大众需求：

```
public void run() {
  Thread me = Thread.currentThread();
  // Name me from my ID.
  me.setName("X-" + me.getId());
  ... 
```

# c# - 如何发现 DataColumn 的底层数据类型是 xml

> ID：10759695
> 
> 赞同：4
> 
> 时间：2012-05-25T18:32:43.460
> 
> 标签：c#, sql-server, xml, datatable, sqldataadapter

我有一个包含 xml 列的 SQL Server 数据表。`DataTable`我使用（类`Fill`的方法）运行选择查询`SqlDataAdapter`。执行后，列的类型为`string`.

我想知道如何从方法的具体化中确定实际的 SQL Server 数据类型（在本例中`xml`）。`DataTable``Fill`

我不能使用`SqlDataReader`（它具有`GetSchemaTable`返回 SQL Server 数据类型信息的方法） - 我必须使用`SqlDataAdapter/DataTable`. 做类似的事情：

```
DataTableReader reader = new DataTableReader(table);
DataTable schemaTable = reader.GetSchemaTable(); 
```

也没有帮助，因为它似乎也不包含 SQL Server 数据类型信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T19:27:50.190

`SqlDataAdapter`被调用有一个属性`ReturnProviderSpecificTypes`，如果您将其设置为 true，那么`GetSchemaTable()`应该告诉您该列是`typeof(SqlXml)`而不是`typeof(string)`

# networking - 吞吐量和传输时间

> ID：10759702
> 
> 赞同：-2
> 
> 时间：2012-05-25T18:33:18.923
> 
> 标签：networking, transfer, throughput

我不确定我对网络问题的回答。我需要帮助。

计算无所谓。我只想知道在计算吞吐量和传输时间时我会考虑哪些链接或链接。

一个大文件将通过 500 Kbps、2Mbps 和 1Mbps 的 3 条链路从 A 主机发送到 B 主机。

a) 假设系统上只有一个用户，端到端吞吐量是多少？b) 如果文件是 4gb ，传输将持续多长时间？c) 再次回答 a 和 b 选项，认为有 100Kbps 链接而不是 2Mbps 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:31:20.573

吞吐量将是最慢链接的速度，因为这会形成瓶颈 - 您可以自己进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:40:46.830

您不会发现很多人愿意提供这么少的证据来帮助您先尝试自己研究答案...查找[吞吐量](http://en.wikipedia.org/wiki/Throughput)和[其他计算传输时间的选项](http://adamsworld.name/copy_calc.php)来帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:41:41.270

我假设您的文件是 4GB 即 4096MB 现在转换为 32768 Mb 问题 2Mb 和 1Mb 应该很容易解决以 Kbps 为单位的速度的解决方案，您需要将 Mb 转换为 Kb，这是 1000 的一个因素，因此您现在有32768。

现在你应该做数学，因为这是家庭作业，你应该从中学习。

哦，还有更多 GB 是千兆字节，而 Gb 是千兆位是一个字节的 8 倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:57:06.753

我相信你在这里犯了一个错误。当我阅读问题时，链接是串联的，而不是并联的。

如果该读数不正确，您仍然会遇到错误，因为措辞表明您将通过所有三个发送文件，而不仅仅是最快的（可能将其分成数据包或类似的东西）。

# c# - 将 ac# 变量输出到 aspx 文本框

> ID：10759714
> 
> 赞同：0
> 
> 时间：2012-05-25T18:35:20.903
> 
> 标签：c#, textbox

我只是想将来自 eform 后端的变量显示到前端的文本框中，这就是我到目前为止所拥有的。

.aspx.cs

```
if (!Page.IsPostBack)
{
  string username = Request.ServerVariables["AUTH_USER"];   
} 
```

并在 .aspx 中尝试输出变量，例如：

```
<asp:TextBox ID="username" runat="server" Width="44px" ReadOnly="true" Text='<%username %>'></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:37:13.313

```
username.Text = Request.ServerVariables["AUTH_USER"]; 
```

应该这样做。但你真的应该谷歌这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:09:27.127

使用户名成为公共/受保护的类成员并将 .aspx 行更改为以下 -

```
<asp:TextBox ID="username1" runat="server" Width="44px" ReadOnly="true" Text='<%= username %>'></asp:TextBox> 
```

您需要使用 <%= var name %> 并更改文本框名称，因为您不能在类中有两个相同名称的变量...。

# php - 我的登录脚本被黑了

> ID：10759716
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:35:29.007
> 
> 标签：php, mysql, sql

> **可能重复：**
> [在 PHP 中停止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

我的登录脚本被黑客入侵（黑客可以绕过登录并进入成员部分）。

这是我的登录信息：

```
<form action="<?php echo $_SERVER['PHP_SELF']?>" method="post"> 
<table width="450px"><tr><td>
<?php 
if(isset($_POST['login']))
{   

$user= mysql_real_escape_string($_POST['username']);
$user22 = strip_tags($user);
$pass= mysql_real_escape_string($_POST['password']);
$pass2 = strip_tags($pass);
$pass1 = md5($pass2);

$mod = 1 ;

$sql = "SELECT * FROM users WHERE username='".$user22."' AND password = '".$pass1."'";
$result = mysql_query($sql) or die(mysql_error());
$battle_get = mysql_fetch_array($result);

if ( $battle_get['mod'] == 1 ) {
                $month = time() + 3600*24*30;
                $hour = time() + 3600*1*1;
                $LastLogin = date('l, M d, Y H:i:s');
                $_SESSION['user'] = $_POST['username'];
                setcookie("save_user", stripslashes(htmlentities($user22)), $hour); 
                setcookie("save_pass", stripslashes(htmlentities($user22)), $month);
                $username = stripslashes(htmlentities($user22));
                $result = mysql_query("UPDATE users SET LastLogin = '$LastLogin' WHERE username='$username'");
                header("location: home.php"); 
}

}
?></td></tr></table>
<ul><li class="topper" style="width:410px;"></li>
<table>
<tr><td>Username</td><td><input type="text" name="username" id="textfield"></td></tr>
<tr><td>Password</td><td><input type="password" name="password" id="textfield"></td></tr>
</table><li class="bottomer" style="width:410px;"></li></ul>
<table><tr><td><input type="submit" name="login" value="login" id="button"></td></tr></table>
</form> 
```

然后在我的配置文件中，我有这段代码可以阻止用户在每次登录时更改 IP 等。

```
if(isset($_SESSION['last_ip']) == false){
    $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR'];
    }

    if ($_SESSION['last_ip'] !== $_SERVER['REMOTE_ADDR']){

    session_unset();
    session_destroy();

    }

if(empty($_SESSION['user'])){
         echo"Please login into the rpg first" ;
         die;
} 
```

我在每个页面上都包含配置文件（上面的代码），如果为空会阻止用户在站点内部查看...黑客告诉我他正在使用 sql 进入.....

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:38:17.717

他正在使用 SQL 注入。他正在将“用户名”的 $_POST 更改为类似

```
"username; OR 1=1" 
```

并且因为 1=1 是“真”，它让他进入。你不受“;”的保护

有很多关于 SQL 注入以及如何保护自己的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:38:25.907

线

```
$sql = "SELECT * FROM users WHERE username='".$user22."' AND password = '".$pass1."'"; 
```

很危险（SQL 注入），我建议您使用带有`PdoMySQL`.

见[http://www.php.net/manual/en/ref.pdo-mysql.php](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:37:28.793

查看[Sql Injection](https://en.wikipedia.org/wiki/SQL_injection)，并在此处查看示例： [http ://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

您的特定 sql 如下所示：

```
$sql = "SELECT * FROM users WHERE username='".$user22."' AND password = '".$pass1."'"; 
```

这对于s​​ql注入来说已经成熟了。

看看以下一些：

*   [http://www.learnphponline.com/security/sql-injection-prevention-mysql-php](http://www.learnphponline.com/security/sql-injection-prevention-mysql-php)
*   [http://www.tech-evangelist.com/2007/11/05/preventing-sql-injection-attack/](http://www.tech-evangelist.com/2007/11/05/preventing-sql-injection-attack/)
*   [http://www.phpbuilder.com/columns/ProPHPSecurity_excerpt.php3](http://www.phpbuilder.com/columns/ProPHPSecurity_excerpt.php3)
*   [http://25yearsofprogramming.com/blog/2011/20110205.htm](http://25yearsofprogramming.com/blog/2011/20110205.htm)

这些只是搜索如何防止 php 中的 sql 注入攻击时最热门的几个链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:38:03.583

在此处阅读有关[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的一些信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T18:44:13.677

请看一下[这篇文章](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string)。

他解释了sql注入和`mysql_real_escape_string();`

# java - Amazon Turk REST 调用 java 的日期

> ID：10759721
> 
> 赞同：1
> 
> 时间：2012-05-25T18:35:42.133
> 
> 标签：java, datetime, mechanicalturk

我正在尝试致电：

```
https://mechanicalturk.amazonaws.com/?Service=AWSMechanicalTurkRequester
&AWSAccessKeyId=[the Requester's Access Key ID]
&Version=2012-03-25
&Operation=ApproveRejectedAssignment
&Signature=[signature for this request]
&Timestamp=[your system's local time]
&AssignmentId=123RVWYBAZW00EXAMPLE456RVWYBAZW00EXAMPLE 
```

我需要签名，它需要格式的 UTC 时间戳，`YYYY:dd:MMTHH:mm:ss-Offset`例如`2012-05-25T11:30:47-07:00`

我正在尝试使用[此处](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/MakingRequests_RequestAuthenticationArticle.html)提供的 java 工具来制作签名，但我无法正确格式化日期。

我也喜欢使用 SDK，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:03:47.930

```
 SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));

    //Local time zone   
    SimpleDateFormat dateFormatLocal = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    //Time in GMT
    String[] datetime = dateFormatGmt.format(new Date()).split(" ");
    String date = datetime[0];
    String time = datetime[1];

    System.out.print(date+"T"+time+"Z"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:09:11.527

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
    Date date = new Date(System.currentTimeMillis());
    System.out.println(sdf.format(date)); // 2012-06-23T00:03:52-0700 
```

# internet-explorer-9 - FileList 在 IE9 中不显示大小

> ID：10759722
> 
> 赞同：0
> 
> 时间：2012-05-25T18:35:44.770
> 
> 标签：internet-explorer-9, dojo

我有一个上传器，并按照文档的建议连接到一个 FileList。它在 Firefox、Chrome 中按预期工作。但是在 IE9 中存在一个用户界面问题。创建它所在的选项卡时，FileList 不显示大小列。

这是一个已知问题吗？它应该那样做吗？更具体地说，当 FileList 第一次显示在 IE 中时，我看到“大小”列的闪烁，然后它消失了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:58:28.490

IE9 不支持[XMLHttpRequest2](http://www.html5rocks.com/en/tutorials/file/xhr2/)，因此`Uploader`无法获取所选文件的文件大小，在这种情况下，有代码隐藏该列`dojox/form/uploader/FileList.js`：

```
if(!(this._fileSizeAvail = {'html5':1,'flash':1}[this.uploader.uploadType])){
    //if uploadType is neither html5 nor flash, file size is not available
    //hide the size header
    this.sizeHeader.style.display="none";
} 
```

所以，答案是肯定的，它应该是这样的，除非你`dojox.form.uploader.plugins.Flash`在 IE 中使用插件。

# android - 在安卓应用中实现数据库和搜索功能的可能性？

> ID：10759726
> 
> 赞同：0
> 
> 时间：2012-05-25T18:36:35.940
> 
> 标签：android, database, search

我已经搜索了该网站，但并没有真正找到适合我正在尝试做的事情。

我最近想出了一个基于 Android 的应用程序的想法，我正在创建的特定应用程序的主要功能将涉及使用一个或多个选项的搜索工具，然后搜索一个数据库并返回一个可能的列表匹配，例如，在每个搜索框中输入关键字，然后从数据库中检索，因此搜索（框 1）黑色、（框 2）4 厘米、（框 3）菱形，然后将从数据库中返回可能的匹配.

我希望我所描述的有点道理。

提前致谢。

# c++ - 在 C++ 中创建对象指针

> ID：10759729
> 
> 赞同：2
> 
> 时间：2012-05-25T18:36:55.250
> 
> 标签：c++

我正在尝试创建一个要填充到开关盒中的对象，但这超出了我的知识范围。

我有这些构造函数：

```
cObj::cObj()
{
}

cObj::cObj(std::string filename)
{
    //...
} 
```

所以，基本上我想调用下面的方法，创建一个指向对象的指针，并将它填充到我的 switch-case 中：

```
void someThing() {
    cObj myObj();

    switch (someValue)
        case 0:
            myObj("/some/path");
            break;
        ...
} 
```

我认为我的构造函数是错误的，因为它并没有真正起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:41:40.180

你不需要一个指针。

```
void someThing() {
    cObj myObj; // Don't use parentheses for the default constructor.
                // What you had was a function declaration, not an object creation.

    switch (someValue) {
        case 0:
            myObj = cObj("/some/path");
            break;
        ...
} 
```

如果您没有默认构造函数，或者您不想调用它，那么您可以使用指针，最好是智能的：

```
void someThing() {
    std::unique_ptr<cObj> myObj;

    switch (someValue) {
        case 0:
            myObj.reset(new cObj("/some/path"));
            break;
        ...
} 
```

或者，正如 lmmilewski 暗示的那样，您可以将决定分解为函数，并返回对象：

```
cObj choose(someType someValue) {
    switch (someValue) {
        case 0:
            return cObj("/some/path");
        ...
}

void someThing() {
    cObj myObj(choose(someValue));
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T18:46:21.757

当您在此行中创建对象时

```
cObj myObj(); 
```

（顺便说一句。你可能不想要这些括号。你想创建一个对象，而不是声明一个函数）。

你调用构造函数。您不能在 switch 语句中再次调用它。您可以创建一个单独的方法：

```
cObj::cObj()
{
}

void cObj::SetFilename(const std::string& filename) {
// ...
} 
```

并像这样使用它：

```
void someThing() {
    cObj myObj;

    switch (someValue)
        case 0:
            myObj.SetFilename("/some/path");
            break;
        ...
} 
```

我不确定您要做什么，但也许更好的方法是首先确定文件路径是什么，然后创建对象？

```
void someThing() {
    std::string filepath = "default/path";

    switch (someValue)
        case 0:
            filepath = "some/path";
            break;
        ...

    cObj myObj(flepath);
} 
```

您还可以创建一个函数来决定使用什么路径并返回对象：

# function - CoreData NSPredicate 数学故障

> ID：10759731
> 
> 赞同：1
> 
> 时间：2012-05-25T18:37:04.983
> 
> 标签：function, math, core-data, nspredicate

首先，这是我的第一个问题，所以很好:)。

你们有没有注意到 NSPredicate 中奇怪的行为数学函数？

我的例子是：

1）我有带接口的出发班：

```
@interface OTDeparture : NSManagedObject
@property (nonatomic, retain) NSNumber * position;
@end 
```

2）我用谓词创建获取请求：

```
NSPredicate *predicate=[NSPredicate predicateWithFormat:@"(position-1)*(position-1) > 0"]; 
```

结果总是零个对象（谓词总是 NO）。格式 "(2-1)*(2-1) > 0" 和 "(position-1)*position > 0" 也有同样的作用。

这些谓词格式按预期工作（按预期返回对象）：

```
"2*(position-1) > 0"
"2*2 > 0"
"position-3 > 0" 
```

我做错了什么，还是这真的是一个错误？我没有使用任何第三方的东西，只是 Apple 提供的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:29:55.607

似乎你是对的，CoreData 中有一些 :(( 我有同样的问题 -[有没有办法使用 NSPredicate 使用 CoreData 中的点之间的距离计算来过滤对象](https://stackoverflow.com/questions/13141615/is-there-any-way-to-use-nspredicate-to-filter-objects-using-distance-calculation) 似乎是接收你想要的东西的唯一方法是使用 predicateWithBlock: 方法，虽然我自己还没有尝试过。注意 predicateWithBlock: 仅适用于内存存储。所以很可能你最终会通过遍历所有实体来过滤数据，当然你可以尝试在执行此操作之前至少进行一些过滤。

# c++ - 带有虚拟类的运算符 <<

> ID：10759734
> 
> 赞同：0
> 
> 时间：2012-05-25T18:37:13.863
> 
> 标签：c++

我有个问题。我有一个类逻辑，带有一个字符串和一个对象。我希望当我`cout<<a`在逻辑类中编写时，该运算符会更改我的字符串。所以我这样做了：

逻辑.h

```
class logic
{
private:
int str;
A a;
public:
...
}; 
```

逻辑.cpp

```
...
...
cout<<*a;
...

ostream& operator<<(ostream& os, const A& A)
{
    int=a.num;
    return os;
} 
```

zh

```
class Z
{
public:
virtual Z* aa();
...
}; 
```

啊

```
class A: public Z
{
private:
int num;
public:
virtual Z* aa();
...
}; 
```

我得到了这些错误：

> '{' token () 之前的预期类名`on class A:public Z {`ISO C++ 禁止声明没有类型的'Z'，'Z' 声明为'虚拟'字段，预期';' 在“*”标记之前（在 A 中的每个虚函数上）

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:41:45.280

类定义后需要一个分号：

```
class A: public Z
{
private:
  int num;
  public:
  virtual Z* aa();
  // ...
}; // <-- SEMICOLON!!1 
```

另外，请确保`Z`在定义*之前* `A`定义，通过`#include`ing `z.h`in `a.h`。

# android - jQuery Mobile - 绑定安卓“下一步”键

> ID：10759735
> 
> 赞同：2
> 
> 时间：2012-05-25T18:37:14.003
> 
> 标签：android, jquery-mobile, cordova

我正在使用 jQuery Mobile 制作一个 phonegap 应用程序。

这里的事情。我在 fieldset 的末尾有一个像这样的输入字段：

```
<div data-role="fieldcontain">
  // Various fields
  <input type="number" id="txtMesure"/>
</div> 
```

当我用我的 Android 设备点击它时，它会显示带有“下一步”按钮的数字键盘，如下所示：

![下一步按钮](../Images/6a19a1d6131abbacc418699db7f4ba63.png)

当我在填充前一个字段时单击“下一步”按钮时，它会自动聚焦下一个字段，但是对于这个字段集的最后一个字段，它显然什么都不做。

当我点击这个“下一步”按钮时，有没有办法绑定一个动作？

我已经尝试过许多事件，例如*keyup、keydown、keypress、change、input，*但“下一步”按钮永远不会触发任何这些事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:56:29.553

我会尝试[.focusout()](http://api.jquery.com/focusout/)。如果没有其他需要关注的内容，可以添加一个不可见的输入字段；虽然这是一个相当俗气的解决方案..

# c# - 新电子邮件锁定 Outlook，将电子邮件窗口强制为 topMost

> ID：10759738
> 
> 赞同：5
> 
> 时间：2012-05-25T18:37:21.740
> 
> 标签：c#, outlook, topmost

我正在使用以下代码从 DataGridView 读取电子邮件地址，然后创建 Outlook 电子邮件。这完美地工作，除了新电子邮件设置为 topMost 和/或作为对话窗口打开，这意味着当新电子邮件窗口打开时，我无法在 Outlook 中单击或执行任何其他操作。如果我打开了我的新电子邮件并且我试图在我的收件箱中搜索或查找某些内容，这会出现问题。此外，在我关闭或发送电子邮件之前，我的应用程序不会响应（被锁定）。

有没有办法创建新电子邮件并仍然允许常规功能？如果我从 Outlook 本身单击新电子邮件按钮，我可以根据需要打开任意数量的电子邮件，使用搜索等。

这`this.TopMost = false`条线是隐藏我的 WinForms 应用程序并在前面显示新的电子邮件窗口。

```
try
{

      string emailString = resultsGrid[resultsGrid.Columns["Email"].Index, resultsGrid.SelectedCells[resultsGrid.Columns["Email"].Index].RowIndex].Value.ToString();

    if(emailString.Contains("mailto:"))
    {
        emailString = emailString.Replace("mailto:", "");
    }

    this.TopMost = false;

    // Create the Outlook application by using inline initialization.
    Outlook.Application oApp = new Outlook.Application();

    //Create the new message by using the simplest approach.
    Outlook.MailItem oMsg = (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);
    oMsg.Subject = "";
    oMsg.To = emailString;
    oMsg.Body = "";
    oMsg.Display(true);

    oMsg = null;
    oApp = null;
}
catch (Exception ex)
{
    MessageBox.Show(string.Format("An error occurred: {0}", ex.Message));
} 
```

奇怪的是，如果我在电子邮件中写一些东西并关闭它，我可以保存它。如果我这样做，当我打开电子邮件备份时，它会返回到它的锁定状态。我开始认为这与电子邮件的创建方式有关，因此某些设置或属性正在被应用和保存。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T14:39:35.520

尝试替换此行：

```
oMsg.Display(true); 
```

…和：

```
oMsg.Display(false); 
```

根据[`MailItem.Display`](http://msdn.microsoft.com/en-us/library/ff861853.aspx)文档，参数的名称是`Modal`，并且应该指定为：

> `True`使窗口模态化。默认值为`False`。

# c - Arduino 串行通信：本地回声人类字符输入

> ID：10759741
> 
> 赞同：3
> 
> 时间：2012-05-25T18:37:35.940
> 
> 标签：c, serial-port, arduino

我正在使用 Arduino Duemilanove 运行一些测试。我正在通过串行端口与 arduino 通信。我要做的就是读入几个整数，为了简单起见，我使用了 parseInt() 函数。

我的问题是，有没有办法对 ardunino 进行编程，以便在输入每个字符时回显它，同时仍然使用 parseInt() 函数？

我知道通常有一些选项可以在终端客户端中打开本地回显，但我不想依赖这些。

这是我正在使用的代码：

```
 unsigned int timeTotal;
    Serial.print("Enter Total Time of Period (ms): "); 
    while (!Serial.available()) {   ;   }    //wait for input
    while (Serial.available() > 0) {
        //Serial.write(Serial.peek());
        timeTotal = Serial.parseInt();      //read int
        Serial.read();              //discard newline char at end of input
        Serial.println();
        Serial.print("Total Time: ");
        Serial.println(timeTotal, DEC);
    } 
```

正如你所看到的，我试图使用 peek() 但这只会让我得到一个角色....

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T01:27:36.810

您可以将字符读入字符串（在执行过程中回显它们），直到您击中分隔符。然后用 . 转换字符串`atoi()`。在不查看源代码的情况下，我确信这就是 parseInt 的作用。

# javascript - 在 jQuery UI 对话框中加载和编辑数据

> ID：10759742
> 
> 赞同：1
> 
> 时间：2012-05-25T18:37:43.707
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, jquery-ui

我有一个 asp.net mvc 应用程序，我正在使用 Webgrid 列出客户。

我想在 jQuery 对话框上编辑客户的数据，因此，我认为对返回 PartialView 的控制器执行操作是最好的方法。问题是这个 PartialView 有一些 javascript 代码来验证这个输入（我正在使用 jQuery Validation 在客户端进行验证）。我的问题是：

1.  在对话框中验证我的表单并通过 jquery 和 ajax 将其发送到服务器的所有脚本都应该在页面上，或者有什么方法可以将它放在 PartialView 上？

2.  在我的 Dialog 上加载 partialView 的最佳方式是什么（$.post、$.get、.load 方法等）？通过邮寄使用mor安全吗？

3.  是否有任何要发布的代码示例或任何指向我的链接？我想看一些代码示例:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:01:35.680

[这个 SO 答案](https://stackoverflow.com/a/4802423/418613)应该可以帮助您使用 PartialView 加载 jQuery UI 对话框，我的经验是 PartialView 可以包含 JavaScript，但前提是它就像一个 View 一样，即从另一个 PartialView 调用的 PartialView 中的 JavaScript不行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:23:02.570

有多种方法可以将局部视图加载到您的 jquery 对话框中。它采用最安全的方法，即在页面加载时加载部分视图。像这样的东西：

```
<div id="mydialog">
    @Html.Partial("MyAction", "MyController")
</div> 
```

然后使用 jquery 我将此 div 块转换为 jquery 对话框。

```
 <script type="text/javascript">
  $(document).ready(function () {
    $("#mydialog").dialog();       
  });

 //this function can be used in onclick handler from anywhere to show the dialog.
 function OpenDialog()
 {
      $("#mydialog").dialog("open");
 }
 </script> 
```

为什么我认为它安全是因为所有类型的验证都非常有效，并且还应用了代码可重用性。但是，您也可以按照 jimmym 的建议动态地将部分视图加载到对话框中。您需要注意这里的两个陷阱。

1.  Jquery unobtrusive 必须解析新加载的表单。你可以做这样的事情。

    $.validator.unobtrusive.parse($('#myform'))

2.  确保您没有加载嵌套表单。

# coffeescript - 静态属性继承 CoffeeScript

> ID：10759751
> 
> 赞同：3
> 
> 时间：2012-05-25T18:38:25.343
> 
> 标签：coffeescript

让我们定义这个简单的代码：

```
class Foo
  @foo = 'blah'
  console.log(@foo)

class Bar extends Foo
  constructor: () ->
    console.log(@foo)

  bar: () ->
    console.log(@foo)

b = new Bar
b.bar() 
```

结果是：

```
blah
undefined
undefined 
```

如何`@foo`在继承的类中访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T18:41:49.197

你真的想写

```
console.log(@constructor.foo) 
```

in`Bar`的构造函数。[（这里](http://coffeescript.org/#try%3aclass%20Foo%0A%20%20%40foo%20%3D%20%27blah%27%0A%20%20console.log%28%40foo%29%0A%0Aclass%20Bar%20extends%20Foo%0A%20%20constructor%3A%20%28%29%20-%3E%0A%20%20%20%20console.log%28%40constructor.foo%29%0A%0Anew%20Bar)的工作示例。）`@constructor`指向类 ( `Bar`)，它继承了`Foo`. 这些属性不在实例上，这是`@`构造函数所指向的。

（是的，它是`@constructor`而不是很奇怪`@class`，但那是因为`obj.constructor`它是 JavaScript 主义，而不是特殊的 CoffeeScript 语法。）

进一步澄清：在类主体中，`@`指向类。在构造函数中，`@`指向实例。因此明显的不一致。我在《*[CoffeeScript: Accelerated JavaScript Development](http://pragprog.com/book/tbcoffee/coffeescript)* 》一书中的类一章中花了很多时间来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T01:58:24.113

`foo`是`Foo`构造函数的属性，而不是其原型：

```
class Bar extends Foo
  constructor: () ->
    console.log(Foo.foo)
  bar: () ->
    console.log(Foo.foo) 
```

# java - cygwin找不到make程序

> ID：10759753
> 
> 赞同：0
> 
> 时间：2012-05-25T18:38:26.250
> 
> 标签：java, android, makefile, android-ndk, cygwin

我想要做的是使用 Cygwin 成功编译本机代码。当我在终端中将目录输入到 ndk-build 时收到的错误消息是

错误：找不到“制作”程序。请安装 Cygwin make 包或定义 GNUMAKE 变量指向它。

这是我在 Cygwin 终端中输入的内容：

C:/users/kwesi/desktop/android-ndk-r8/ndk-build

我的构建路径是：C:\cygwin\bin;C:\Users\Kwesi\Desktop\android-ndk-r8\ndk-build;

我已经使用这个 youtube 视频教程安装了 make，所以我很确定它安装正确。 [http://www.youtube.com/watch?v=jqJGxJJq87w&list=FL2bdE2OcpySONpqzf5OsWNQ&index=1&feature=plpp_video](http://www.youtube.com/watch?v=jqJGxJJq87w&list=FL2bdE2OcpySONpqzf5OsWNQ&index=1&feature=plpp_video)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T19:15:55.557

您可能只需要安装`make`软件包。

运行`setup.exe`您最初用于安装 Cygwin 的命令，然后选择“make”。

首先，要确认这是问题所在，`make`请从终端运行。

您可能还必须安装一些其他软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T17:19:45.060

你在用窗户吗？我正在使用 Windows 7，使用 cygwin 时遇到了同样的问题。我安装了 MinGW 并使用 cygwin，它正在寻找与 cygwin 兼容的 make 程序。下载并设置了 GNUMAKE 的路径，但问题仍然存在。所以我尝试使用 MinGW，打开 msys.bat，瞧，它现在可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T23:56:43.937

我通过将 cygwin\bin 路径添加到系统环境变量来解决了这个问题。

# asp.net-mvc - 客户端 MVC 框架（Backbone、Knockout 等）和验证

> ID：10759756
> 
> 赞同：7
> 
> 时间：2012-05-25T18:38:47.497
> 
> 标签：asp.net-mvc, backbone.js, knockout.js, asp.net-web-api

我现在正在试验不同的客户端 MVC 框架（主要是 Backbone 和 Knockout）。我正在尝试提出一种验证方法。我有只返回数据的 MVC 4 Web API。所有视图引擎逻辑都在客户端。显然，我知道服务器端验证是必须的。这一点，我通过模型绑定使用 DataAnnotations 和标准 ASP.NET MVC 验证来实现。

但是，我最终在客户端也复制了所有验证逻辑。有没有办法返回数据但附加了验证逻辑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T03:08:16.100

Blast-Dan is partially right, meaning that you cannot pass extra data to your server from the client aside from Key-Value pairs.

What you can do, however, is propagate your DataAnnotations to the client so that some validation code does not need to be rewritten. It is not trivial for complex rules, but the Html.EditorFor helpers will help you generate text boxes for input with attached validation attributes that are picked up seamlessly by jquery validation and stop the form submitting. I am thinking about [Required], [Range()] and [RegularExpression()] Data Annotations to name a few.

You can see a quick example if you just create a normal model and then add the Controller in Visual Studio using the wizard to create the Views for CRUD operations. You will see how the Data Annotations you used in the Model class end up being rendered on the output html.

If you are creating the HTML yourself without HtmlHelper (which I think you may be doin given the knockout tag) you may want to check the DataAnnotationsModelValidatorProvider and the IClientValidatable interface starting from [this link](http://msdn.microsoft.com/en-us/library/hh834015%28v=vs.108%29).

As you can see, this is still uncharted territory tho :/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:58:11.110

不，

向服务器提供数据时，您需要使用 HTTP 协议，您将使用 Post 或 Get 方法。这只能传递键值对。使用 MVC 数据绑定，您可以绑定这些键值对来创建复杂对象。

但是，无法将元数据或函数传输到 C# 以完成验证。所有验证逻辑都需要在服务器端和客户端脚本语言上编写，以提供正确的验证

# reporting-services - 在运行 SSRS 报告之前显示自定义消息

> ID：10759757
> 
> 赞同：0
> 
> 时间：2012-05-25T18:38:48.513
> 
> 标签：reporting-services

有没有办法在运行 SSRS 报告之前要求用户确认？例如：您确定要运行此报告吗？是 否。然后，根据答案运行报告。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:41:44.453

不是开箱即用，您唯一能做的就是创建一个“必需”参数并强制用户选择或输入参数。当您运行报告时，您会在顶部看到一个参数，并注意到在您选择参数之后报告才会出现。对于此参数，您可以简单地添加一个值“是”。

# javascript - 鼠标悬停在整个页面而不是一个元素上工作？

> ID：10759759
> 
> 赞同：0
> 
> 时间：2012-05-25T18:39:05.937
> 
> 标签：javascript, function, prototype, mouseover

我是网络编程的初学者，不幸的是我已经遇到了问题。我想使用原型的鼠标悬停（mouseout）功能来添加或删除一个类，但由于某种原因，警报（用于调试）在页面的第一次加载时出现。我知道这一定很荒谬，但我看不出问题所在。我希望只有当我使用“菜单”类检查对象时才会发出警报。

这是我的代码：

```
window.onload = function(){
    var menuitems = $$('.menu');
    for(var i = 0;i < menuitems.length;i++){
        menuitems[i].observe("mouseover",alert("over"));
        menuitems[i].observe("mouseout",alert("out"));
    }
} 
```

PS。我在 google 和 stackoverflow 上进行了搜索，但找不到类似的问题。如我错了请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:14:17.793

该`observe`方法的第二个参数应该是一个*函数*- 通过实际调用`alert()`那里，您只是在*定义*事件处理程序时（即当页面加载时）发出警报，而不是在触发它时。

尝试这个：

```
window.onload = function() {
    var menuitems = $$('.menu');
    for(var i = 0; i < menuitems.length; i++) {
        menuitems[i].observe("mouseover", function() {
            alert("over");
        });
        menuitems[i].observe("mouseout", function() {
            alert("out");
        });
    }
}; 
```

我在那里定义了事件处理函数，但没有调用它们。当 mouseover/mouseout 事件被触发时，它们将被调用。或者，您可以提前定义函数：

```
window.onload = function() {
    var handleMouseover = function() {
        alert("over");
    };
    var handleMouseover = function() {
        alert("out");
    };

    var menuitems = $$('.menu');
    for(var i = 0; i < menuitems.length; i++) {
        menuitems[i].observe("mouseover", handleMouseover);
        menuitems[i].observe("mouseout", handleMouseout);
    }
}; 
```

# hibernate - 休眠和复合键

> ID：10759760
> 
> 赞同：4
> 
> 时间：2012-05-25T18:39:10.557
> 
> 标签：hibernate, annotations, composite-primary-key

我不知道如何使用带有注释和休眠的复合键......

因此，例如，我有这张表：

## 表_A

初始化，数字，CNT，典型值

## 表_B

初始化、数字、V_CNT

TABLE A 和 B 主键是由 INIT 和 NUM 组成的复合键

我想运行我的查询：

```
 "FROM TABLE_A AS A " +
   "LEFT JOIN A.hiber_join AS B " +
   "WHERE A.INIT||A.NUM IN (:carList) AND A.INIT IN (:initList) AND A.NUM IN              (:numberList) " + 
    "AND B.V_CNT > 0 
```

我的课程看起来像：

* **Class_A***

```
public class TABLE_A implements Serializable{

private String INIT;
private String NUM;
private Integer CNT;
private String TYP;

    @OneToOne
@JoinTable(name = "TABLE_B",
    joinColumns = {@JoinColumn(name = "INIT"), @JoinColumn(name = "NUM")}

)
protected TABLE_B hiber_join;

    public TABLE_A()
    {}

    public void doHibernateStuff()
    {
     //call query get result set
    } 
```

}

//B类

```
public class TABLE_B implements Serializable{

private String NUM;
private String INIT;
private Integer V_CNT;
} 
```

我试图让它尽可能简单，因为我需要从如何使用休眠和注释的基础知识开始......正如你所知，我已经工作了一段时间，休眠文档和其他问题似乎没有帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:37:15.060

AFAIK，您需要使用 PrimaryKeyJoinColumn（我更改了类和属性名称以符合标准 Java 命名约定，但您应该选择有意义的名称）：

```
public class BEntity implements Serializable{

    @Id
    @Column(name = "NUM")
    private String num;

    @Id
    @Column(name = "INIT")
    private String init;

    @Column(name = "V_CNT")
    private Integer vcnt;
}

public class AEntity implements Serializable{

    @Id
    @Column(name = "NUM")
    private String num;

    @Id
    @Column(name = "INIT")
    private String init;

    @OneToOne
    @PrimaryKeyJoinColumns({
        @PrimaryKeyJoinColumn(name="NUM", referencedColumnName="NUM"),
        @PrimaryKeyJoinColumn(name="INIT", referencedColumnName="INIT")
    })
    private BEntity bEntity;
} 
```

# javascript - 使用 knockout-rails gem 的 knockout.js 和 rails 3.1

> ID：10759763
> 
> 赞同：1
> 
> 时间：2012-05-25T18:39:36.907
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, knockout.js

我已经成功地将我的 rails 模型绑定到我的 knockout.js viewModel，但是因为它应用绑定的方式像这样

```
<script type="text/javascript">
  jQuery(function(){
    // Create the viewModel with prefilled data
    window.hud = new Hud(<%=raw @hud.to_json %>);
    ko.applyBindings(window.hud); // And bind everything
  });
</script> 
```

我不确定我在哪里或如何在我的字段上应用 ko.computed() 。Knockout-Rails gem 使我所有的数据库字段都有一个 ko.observable() 附加到它们，但我只是不知道如何在某些字段上使用 ko.computed() 。

我对 knockout.js 还是很陌生，如果这没有多大意义，很抱歉，如果需要更多细节，请告诉我。谢谢。

# php - 查看mysql中是否返回行的不同方法？

> ID：10759764
> 
> 赞同：0
> 
> 时间：2012-05-25T18:39:38.030
> 
> 标签：php, mysql, mysqli

我不确定是否有类似的问题，因为我不确定要搜索什么，但无论如何。

在我进行查询（有 1 个表）之后，有两种方法可以检查是否返回了一行：

```
$a = $members->prepare("select userid from users where userid = ?");
$a->bind_param('s', $_SESSION['token']);
$a->execute();
$a->store_result();
if ($a->num_rows == 1) {
    // do something
} 
```

或者：

```
$b = $members->prepare("select userid from users where userid = ?");
$b->bind_param('s', $_SESSION['token']);
$b->execute();
$b->bind_result($uid);
$b->fetch();
if (isset($uid)) {
    // do something
} 
```

哪一个最好用于查看是否返回了一行？我认为因为 num_rows 是为此目的而存在的，所以应该使用它，但是您必须存储结果集，所以我不确定，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:52:13.250

第一个选项可能是最好的。顺便说一句，来自 php.net：

> 如果查询没有返回结果集，mysqli_store_result() 返回 FALSE

和

> 如果读取结果集失败，此函数也会返回 FALSE。

所以你也可以说：

```
if ($a->store_result()) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:49:15.517

将 LIMIT 0,1 添加到 sql 查询中，您可以使用您喜欢的那个。但我更喜欢第一个。

# python - Cython 和 gcc：无法运行已编译的程序

> ID：10759765
> 
> 赞同：1
> 
> 时间：2012-05-25T18:40:34.130
> 
> 标签：python, c, gcc, mingw, cython

我对 python 到 C 代码的翻译和进一步编译有疑问。

首先，我安装了MinGW，写了`setup.py? 脚本并使用 Cython 将 python 代码（最简单的 helloworld）翻译成 C：

> `python setup.py build_ext --inplace`

然后我尝试编译生成的 .c 文件：

> `gcc.exe helloworld.c -mdll -IC:\Python27\include -IC:\Python27\PC -LC:\Python27\libs -LC:\Python27\PCbuild -lpython27 -lmsvcr90`

编译过程中没有发生错误，但是当我尝试启动生成的*a.exe*文件时，出现以下错误：

> a.exe 不是有效的 Win32 应用程序

我不知道如何解决这个问题。
我正在运行 32 位 Vista。
PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:59:01.310

有关使用 Cython创建独立可执行文件的信息，请参阅[嵌入 Cython上的 Cython wiki](http://wiki.cython.org/EmbeddingCython)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:10:11.390

编译后的文件不是可执行文件，它是一个库 ( `dll`)。

Windows 上的 python 模块通常具有`.pyd`扩展名，因此要么将文件重命名为，要么`helloworld.pyd`用作`-o helloworld.pyd`编译器的参数。

那么你应该能够`import helloworld`从python。

# python - 如何在 Python 代码中添加选项？

> ID：10759768
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:40:50.557
> 
> 标签：python

我有一个 Python 脚本 a.py 和 b.py，我想调用 b.py 的主函数并从 a.py 传递参数。如何从代码内部在 a.py 中添加选项并将其传递给 b.py 的 main ？我尝试将字典添加到我的附加选项中，但由于某些未知原因，b.py 没有得到正确的值。add_option 仅适用于命令行选项。

我已经在 a.py 中导入了 b，我正在尝试将 readOnly 值传递给 b.py 中的 main。基本上我不想将a.py中的readOnly作为命令行传递，而是通过a.py中的代码传递readOnly。

```
a.py

import b

def main()
    usage = "usage: %prog [options]"
    parser = OptionParser(usage)
    (options, _ ) = parser.parse_args()
    varsOptions = vars(options)
    varsOptions['readOnly'] = True
    b.main(varsOptions)

b.py

def main(argv):
    usage = "usage: %prog [options]"
    parser = OptionParser(usage)
    parser.add_option("-r", action="store_true", dest="readOnly")
    (options, _ ) = parser.parse_args()
    varsOptions = vars(options)
    print(varsOptions)

if __name__ == "__main__":
    main(sys.argv[1:]) 
```

为什么这段代码不起作用？

TIA,

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:43:27.400

您应该看到官方文档中的示例：http: [//docs.python.org/dev/library/argparse.html](http://docs.python.org/dev/library/argparse.html) for argparse

对于较旧的 python，请参阅[http://docs.python.org/dev/library/optparse.html](http://docs.python.org/dev/library/optparse.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:47:08.557

它不起作用，因为`b.main`不使用该`argv`参数。

您可以将`argv`to`parse_args`作为参数传递，但它应该是字符串列表，而不是字典。

试试这个`a`：

```
b.main(["-r"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:46:22.207

这不是一个好主意。

但如果你需要这样做，你可以使用 os run 命令来完成

os.system('script.py "options" ')

您应该阅读以下堆栈溢出

[如何使用另一个 python 脚本文件中的参数执行 python 脚本文件](https://stackoverflow.com/questions/4230725/how-to-execute-a-python-script-file-with-an-argument-from-inside-another-python)

# c# - 如何在 datagridview 单元格中显示来自 URL 的图像？

> ID：10759772
> 
> 赞同：2
> 
> 时间：2012-05-25T18:41:04.660
> 
> 标签：c#, winforms, datagridview

如何从 URL 加载图像，然后将其放入 DataGridView 的单元格（而不是列标题）？包含图像的行将在运行时基于来自 Web 服务的搜索添加到视图中。找不到此特定目的的答案...帮助！

首先我尝试使用 PictureBox。当从 Web 服务接收到事件时，我将通过结果循环添加行，每行都包含一个图像。

```
// Add image
System.Windows.Forms.PictureBox picEventImage = new System.Windows.Forms.PictureBox();
picEventImage.Image = global::MyEventfulQuery.Properties.Resources.defaultImage;
picEventImage.ImageLocation = Event.ImageUrl;
this.dgvEventsView.Controls.Add(picEventImage);
picEventImage.Location = this.dgvEventsView.GetCellDisplayRectangle(1, i, true).Location; 
```

即使图像加载完美，它看起来与视图断开连接，即当我滚动时图像不会移动，并且在用新数据刷新视图时，图像只是徘徊......糟糕。

所以我尝试了其他帖子的提示：

```
Image image = Image.FromFile(Event.ImageUrl);
DataGridViewImageCell imageCell = new DataGridViewImageCell();
imageCell.Value = image;
this.dgvEventsView[1, i] = imageCell; 
```

但我收到一条错误消息，提示“不支持 URI 格式”。

*   我是否错误地使用了图像？
*   是否有另一个类可以用于 URL 图像而不是 Image？
*   还是我别无选择，只能创建一个自定义控件（其中包含一个 PictureBox）以添加到 DataGridView 单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:51:18.650

看看这个 SO Post [https://stackoverflow.com/a/1906625/763026](https://stackoverflow.com/a/1906625/763026)

```
 foreach (DataRow row in t.Rows)
    {
                    HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(row["uri"].ToString());
                    myRequest.Method = "GET";
                    HttpWebResponse myResponse = (HttpWebResponse)myRequest.GetResponse();
                    System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(myResponse.GetResponseStream());
                    myResponse.Close();

                    row["Img"] = bmp;
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-11-14T06:23:26.843

## 这是我的解决方案。它可以正常工作，我可以从 DataGridView 中检索图像以加载到 PictureBox 中。

**表单事件：**

```
 Private con As New SqlConnection("YourConnectionString")
    Private com As SqlCommand
Private Sub DGV_CellClick(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DGV.CellClick
        con.Open()
        com = New SqlCommand("SELECT MyPhoto FROM tbGalary WHERE ID=" & DGV.Rows(e.RowIndex).Cells(0).Value, con)
        Dim ms As New MemoryStream(CType(com.ExecuteScalar, Byte()))
        txtPicture.Image = Image.FromStream(ms)
        txtPicture.SizeMode = PictureBoxSizeMode.StretchImage
        com.Dispose()
        con.Close()
End Sub 
```

**SQL 表：**

```
CREATE TABLE [dbo].[tbGalary](
    [ID] [int] NOT NULL,
    [MyPhoto] [image] NOT NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

**SQL插入图像：**

```
INSERT INTO tbGalary VALUES('1','D:\image1.jpg')
INSERT INTO tbGalary VALUES('2','D:\image2.jpg')
INSERT INTO tbGalary VALUES('3','D:\image3.jpg')
INSERT INTO tbGalary VALUES('4','D:\image4.jpg')
INSERT INTO tbGalary VALUES('5','D:\image5.jpg') 
```

**结果**

视频链接：[Retrieve a image in DataGridView load to PictureBox in VB.NET](http://www.youtube.com/watch?v=K5QCjtAYnGE&feature=youtu.be)

# javascript - 如何从我的 textarea 中删除 textExt？

> ID：10759773
> 
> 赞同：1
> 
> 时间：2012-05-25T18:41:07.280
> 
> 标签：javascript, jquery, jquery-textext

我在我的 textarea 中使用 texttext：

[http://textextjs.com/manual/index.html](http://textextjs.com/manual/index.html)

它的工作原理和设置很简单，但我如何销毁文本，即我希望我的纯文本区域回到模糊事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:48:13.403

如果您使用插件来操作某个 DOM 元素，则可以简单地删除该元素，将其内容保存在一个临时变量中，然后再次创建该元素。

```
$("#element").someCoolPlugin(...); 
```

所以现在`someCoolPlugin()`插件已经对该元素进行了一些操作（添加了闪光或自动完成或其他东西），我们希望将其恢复为原始形式。对于这个例子，就像你的问题一样，我们将使用 textarea。

```
var newElement = $('<textarea id="element">' + $("#element").val() + '</textarea>'); 
```

如果您想保留其他参数，我相信您可以看到它很容易完成。

* * *

我浏览了那个插件，没有看到`remove()`方法，但你应该仔细看看，看看插件本身是否提供了某种重置功能......插件的制造商提供一个撤销他[可怕的诡计](http://www.zurb.com/playground/jquery-raptorize)的选项:)

# java - 如何使用Java将> 1000个xml文件合并为一个

> ID：10759775
> 
> 赞同：8
> 
> 时间：2012-05-25T18:41:22.630
> 
> 标签：java, xml, performance, merge, out-of-memory

我正在尝试将许多 xml 文件合并为一个。我已经在 DOM 中成功地做到了，但这个解决方案仅限于几个文件。当我在 >1000 的多个文件上运行它时，我得到一个 java.lang.OutOfMemoryError。

我想要实现的是我有以下文件

文件 1：

```
<root>
....
</root> 
```

文件 2：

```
<root>
......
</root> 
```

文件 n:

```
<root>
....
</root> 
```

导致：输出：

```
<rootSet>
<root>
....
</root>
<root>
....
</root>
<root>
....
</root>
</rootSet> 
```

这是我目前的实现：

```
 DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
    Document doc = docBuilder.newDocument();
    Element rootSetElement = doc.createElement("rootSet");
    Node rootSetNode = doc.appendChild(rootSetElement);
    Element creationElement = doc.createElement("creationDate");
    rootSetNode.appendChild(creationElement);
    creationElement.setTextContent(dateString); 
    File dir = new File("/tmp/rootFiles");
    String[] files = dir.list();
    if (files == null) {
        System.out.println("No roots to merge!");
    } else {
        Document rootDocument;
            for (int i=0; i<files.length; i++) {
                       File filename = new File(dir+"/"+files[i]);        
               rootDocument = docBuilder.parse(filename);
               Node tempDoc = doc.importNode((Node) Document.getElementsByTagName("root").item(0), true);
               rootSetNode.appendChild(tempDoc);
        }
    } 
```

我已经对 xslt、sax 进行了很多实验，但我似乎总是遗漏一些东西。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T19:22:06.543

您也可以考虑使用 StAX。这是可以执行您想要的代码的代码：

```
import java.io.File;
import java.io.FileWriter;
import java.io.Writer;

import javax.xml.stream.XMLEventFactory;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLEventWriter;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLOutputFactory;
import javax.xml.stream.events.XMLEvent;
import javax.xml.transform.stream.StreamSource;

public class XMLConcat {
    public static void main(String[] args) throws Throwable {
        File dir = new File("/tmp/rootFiles");
        File[] rootFiles = dir.listFiles();

        Writer outputWriter = new FileWriter("/tmp/mergedFile.xml");
        XMLOutputFactory xmlOutFactory = XMLOutputFactory.newFactory();
        XMLEventWriter xmlEventWriter = xmlOutFactory.createXMLEventWriter(outputWriter);
        XMLEventFactory xmlEventFactory = XMLEventFactory.newFactory();

        xmlEventWriter.add(xmlEventFactory.createStartDocument());
        xmlEventWriter.add(xmlEventFactory.createStartElement("", null, "rootSet"));

        XMLInputFactory xmlInFactory = XMLInputFactory.newFactory();
        for (File rootFile : rootFiles) {
            XMLEventReader xmlEventReader = xmlInFactory.createXMLEventReader(new StreamSource(rootFile));
            XMLEvent event = xmlEventReader.nextEvent();
            // Skip ahead in the input to the opening document element
            while (event.getEventType() != XMLEvent.START_ELEMENT) {
                event = xmlEventReader.nextEvent();
            }

            do {
                xmlEventWriter.add(event);
                event = xmlEventReader.nextEvent();
            } while (event.getEventType() != XMLEvent.END_DOCUMENT);
            xmlEventReader.close();
        }

        xmlEventWriter.add(xmlEventFactory.createEndElement("", null, "rootSet"));
        xmlEventWriter.add(xmlEventFactory.createEndDocument());

        xmlEventWriter.close();
        outputWriter.close();
    }
} 
```

一个小警告是，这个 API 似乎与空标签混淆，`<foo/>`变成`<foo></foo>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T19:00:19.797

只需在没有任何 xml 解析的情况下执行此操作，因为它似乎不需要对 xml 进行任何实际解析。

为了提高效率，请执行以下操作：

```
File dir = new File("/tmp/rootFiles");
String[] files = dir.list();
if (files == null) {
    System.out.println("No roots to merge!");
} else {
        try (FileChannel output = new FileOutputStream("output").getChannel()) {
            ByteBuffer buff = ByteBuffer.allocate(32);
            buff.put("<rootSet>\n".getBytes()); // specify encoding too
            buff.flip();
            output.write(buff);
            buff.clear();
            for (String file : files) {
                try (FileChannel in = new FileInputStream(new File(dir, file).getChannel()) {
                    in.transferTo(0, 1 << 24, output);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            buff.put("</rootSet>\n".getBytes()); // specify encoding too
            buff.flip();
            output.write(buff);
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T18:50:14.467

DOM 需要将整个文档保存在内存中。如果您不需要对标签进行任何特殊操作，我只需使用 InputStream 并读取所有文件。如果你需要做一些操作，那就使用 SAX。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T19:00:58.837

Dom 确实会消耗大量内存。恕我直言，您有以下选择。

最好的一种是使用 SAX。使用 sax，只使用非常少量的内存，因为在任何给定时间基本上几乎有一个元素从输入传输到输出，因此内存占用非常低。然而，使用 sax 并不是那么简单，因为与 dom 相比它有点违反直觉。

试试 Stax，我自己没试过，但它是一种更容易实现和使用的类固醇萨克斯，因为与仅接收您无法控制的萨克斯事件相反，您实际上是“询问来源”以流式传输您想要的元素，所以它介于 dom 和 sax 之间，具有类似于 sax 的内存占用，但更友好的范例。

如果您想正确地保留、声明等...命名空间和其他 XML 奇怪的东西，Sax、stax、dom 都很重要。

但是，如果您只需要一种快速而肮脏的方式，并且可能也符合命名空间，请使用普通的旧字符串和编写器。

开始向 FileWriter 输出“大”文档的声明和根元素。然后根据需要使用 dom 加载每个文件。选择要在“大”文件中结束的元素，将它们序列化回字符串，然后将其发送给编写器。writer 将在不使用大量内存的情况下刷新到磁盘，并且 dom 每次迭代只会加载一个文档。除非您在输入端也有非常大的文件，或者计划在手机上运行它，否则您不应该有很多内存问题。如果 dom 正确序列化它，它应该保留命名空间声明等，并且代码将比您发布的代码多行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T18:58:17.490

对于这种工作，我建议不要使用 DOM，读取文件内容并制作子字符串更简单且足够。

我在想这样的事情：

```
String rootContent = document.substring(document.indexOf("<root>"), document.lastIndexOf("</root>")+7); 
```

然后避免过多的内存消耗。`BufferedWritter`每次提取 xml 后用例如写入主文件。为了获得更好的性能，您还可以使用[java.nio](http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T19:12:04.203

我认为你在做什么是有效的。使其扩展到真正大量文件的唯一方法是使用基于文本的流媒体方法，因此您永远不会将整个内容保存在内存中。但是，嘿！好消息。现在内存很便宜，而且 64 位 JVM 风靡一时，所以您可能只需要增加堆大小即可。尝试使用 -Xms1g JVM 选项重新运行您的程序（分配 1Gb 初始堆大小）。

我也倾向于使用[XOM](http://www.xom.nu/)来满足我的所有 DOM 需求。搏一搏。效率更高。不确定内存要求，但根据我的经验，它的速度要快几个数量级。

# ios - 为什么这个应用程序被拒绝？

> ID：10759779
> 
> 赞同：4
> 
> 时间：2012-05-25T18:41:43.193
> 
> 标签：ios, appstore-approval

苹果拒绝了这个应用程序，甚至在调解中心提供了很长的解释，但我不确定为什么。有人可以帮我翻译吗？

> 2.23
> 
> 我们发现您的应用未遵循 App Store 审核指南所要求的 iOS 数据存储指南。
> 
> 特别是，我们发现在启动和/或内容下载时，您的应用会存储下载的媒体（MP3 文件）。要检查您的应用存储了多少数据：
> 
> *   安装并启动您的应用
> *   转到设置 > iCloud > 存储和备份 > 管理存储
> *   如有必要，点击“显示所有应用”
> *   检查您应用的存储空间
> 
> iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，可以存储在 /Documents 目录中 - 并由 iCloud 备份。
> 
> 您的应用程序使用的临时文件应仅存储在 /tmp 目录中；请记住在用户退出应用程序时删除存储在此位置的文件。
> 
> 可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。
> 
> 有关更多信息，请参阅技术问答 1719：如何防止文件备份到 iCloud 和 iTunes？。
> 
> 有必要修改您的应用程序以满足 iOS 数据存储指南的要求。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
> 
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。
> 
> 如果您在重现此问题时遇到困难，请尝试按照 [https://developer.apple.com/library/ios/qa/qa1764/Testing](https://developer.apple.com/library/ios/qa/qa1764/) Workflow with Xcode's Archive feature 中所述测试工作流程”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T18:45:55.793

> iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，可以存储在 /Documents 目录中 - 并由 iCloud 备份。
> 
> 您的应用程序使用的临时文件应仅存储在 /tmp 目录中；请记住在用户退出应用程序时删除存储在此位置的文件。
> 
> 可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。

那里准确地告诉你他们认为问题是什么。显然，您将不是由用户自己创建的数据存储在 iCloud 备份的位置，而没有告诉 iCloud 不要备份它。（iCloud 只应该备份用户创建的数据。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T05:32:00.550

我认为您可以使用[此处](http://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342)的说明，这只支持iOS5.0.1、5.1或更高版本，对于iOS 5.0，您需要将数据存储在缓存中，这意味着数据会因更新而丢失。

# android - Android HTTPUrlConnection POST

> ID：10759782
> 
> 赞同：3
> 
> 时间：2012-05-25T18:41:45.860
> 
> 标签：android, post, httpurlconnection

我正在使用 HttpURLConnection 通过 POST 将数据发送到服务器。我设置标题然后获取输出流并写入 5 个字节的数据（“M = 005”）然后关闭输出流。

在服务器上，我收到所有标题，正确的内容长度，但随后我得到一个零长度行，服务器挂在 readLine 上。

似乎发生的是客户端关闭实际上从未发生过，因此没有写入整个数据，因此服务器永远不会得到它。

我已经阅读了许多示例并尝试了各种更改，以查看我是否可以以任何方式实现这一点，但结果都不尽如人意。例如关闭保持活动，在我的数据结束时强制执行 CRLF（这会强制我的数据在服务器上输出，但连接仍然没有关闭。（这只是为了测试），尝试打印作家。

由于许多示例都在做我正在做的事情，因此我认为这很简单，我忽略了它，但我看不到它。任何帮助，将不胜感激。

```
 StringBuilder postDataBuilder.append("M=").append(URLEncoder.encode("005", UTF8));
    byte[] postData = null;
    postData = postDataBuilder.toString().getBytes();

    url = new URL("http://" + serverAddress + ":" + String.valueOf(serverPort));
    conn = (HttpURLConnection) url.openConnection();

    conn.setDoOutput(true);
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Length", Integer.toString(postData.length));
    conn.setUseCaches(false);

    OutputStream out = conn.getOutputStream();
    out.write(postData);
    out.close();

    int responseCode = conn.getResponseCode();

    // After executing the above line the server starts to successfully readLines
    // until it gets to the post data when the server hangs.  If I restart the
    // client side then the data finally gets through but the connection on the
    // server side never ends. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T21:01:51.487

哎呀。我们服务器端的错误是执行 readLine 而不是字符读取。由于没有 CRLF，它会挂起。

# c# - 如何正确处理子动作异常

> ID：10759789
> 
> 赞同：3
> 
> 时间：2012-05-25T18:42:04.580
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, error-handling

我有一个返回 PartialView 的操作：

```
[ChildActionOnly]
public ActionResult TabInfo(int id, string tab)
{

    ViewBag.Jobid = id;
    ViewBag.Tab = tab;

    var viewModel = _viewModelManager.GetViewModel(tab, id);

    return 
        PartialView(string.Format("~/Views/{0}/Index.cshtml", tab), viewModel);

} 
```

从 Dictionary中`_viewModelManager`返回一个视图。如果用户请求一个不存在的选项卡，`KeyNotFound`则会引发异常，但是，在我看来，我得到以下异常：

`Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'`

```
@using MyApplication.UI.Helpers.Html
@model MyApplication.UI.Models.MyJobModel

@{
    ViewBag.Title = "Details";
}

<p>@Model.Blah</p>

...

*@ HttpException occurs here -- renders default error view *@
@Html.Action("TabInfo", new { id = ViewBag.Jobid, tab = ViewBag.Tab }) 
```

[根据 MS...](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions%28v=vs.98%29.aspx)

> 如果子操作本身发生异常，则忽略子操作方法上的 HandleErrorAttribute 属性。因此，子动作应该处理自己的异常。如果子操作应用了 AuthorizeAttribute 属性，则该属性将执行并返回 HTTP Unauthorized 401 状态代码。

我不能使用它`[HandleError(ExceptionType = typeof(KeyNotFoundException), View="myError")]`，也不能使用 try/catch 重定向，因为不支持子操作的重定向。

**处理子操作异常的最佳方法是什么？**

底线：我想处理异常并返回自定义错误页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:51:10.873

1.  如果在方法中抛出异常，`GetViewModel`那么您的 return 语句甚至不会得到处理，实际上它因为没有 catch 语句，您最终会`Application_Error`在 global.asax 中（如果有的话）。

2.  你是对的，你应该做一个`ContainsKey`检查，然后如果它是错误的，则返回你的错误页面。

3.  只需将结果放在`ContainsKey`变量中并且`Assert`该变量为真？或者您可以检查`viewModel`变量`Assert`，如果`ContainsKey`为假，则确保您的错误视图名称实际上在`viewModel`.

一般来说， A`try` `catch`并不是一个很好的实践，如果你可以避免它，你应该使用额外的逻辑来防止异常发生（比如`ContainsKey`在这个例子中）。例外情况是**特殊**情况:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:09:15.800

在我的例子中，我在子操作中添加了一个 ModelState 错误（使用自定义消息而不是异常的消息），并将 ValidationSummary 放在子操作的部分视图中。由于父操作的摘要没有得到错误，因此它不会重复错误。当然这仍然显示页面。就我而言，这非常好。

但是你要确保你没有在 child action 中做这样的事情`return PartialView(modelContainingPotentiallySensitiveInfo)`。我无法想象具体的场景，但通常你指向一个完全不同的错误页面的原因是首先防止与错误相关的安全漏洞。因此，如果您使用我的技术，请确保创建一个新的空模型，该模型尚未从数据库中查询，以传递到部分页面。

当然，如果调用 PartialView 时出现异常，比如 cshtml 中的错误，那么您就无法返回操作并显示错误。所以这不是一个完美的解决方案，但对其他人来说可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:10:27.450

以防其他人遇到这个问题。

我最终使用 try/catch 块来捕获 KeyNotFound 异常。我记录错误，然后将用户重定向到 ErrorView。在错误视图中，我使用 javascript 将用户重定向到适当的视图。

```
[ChildActionOnly]
    public ActionResult TabInfo(int id, string tab, string jobno)
    {
        try
        {
            var viewModel = _viewModelManager.GetViewModel(tab, id);

            ViewBag.Jobid = id;
            ViewBag.Tab = tab;

            return PartialView(string.Format("~/Views/{0}/Index.cshtml", tab), viewModel);
        }
        catch (Exception ex)
        {
            return View("Error");
        }

    } 
```

错误视图

```
@model System.Web.Mvc.HandleErrorInfo

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <script type="text/javascript">
        window.location.href = '@Url.Content("~/400.htm")';
    </script>
</body>
</html> 
```

# python - app.yaml / 项目文件结构适用于应用引擎本地主机调试器，但不适用于谷歌应用引擎服务器

> ID：10759793
> 
> 赞同：0
> 
> 时间：2012-05-25T18:42:33.000
> 
> 标签：python, google-app-engine, yaml

这个问题可能是我对 Python 和应用引擎中的项目结构理解有限以及对 app.yaml 文件理解有限的结果。

我有一个 python 2.7 项目，其文件结构如下所示：

```
项目名称
 > 源
   应用程序.yaml
   > 蟒蛇
     __init__.py
     > package_folder1
       __init__.py
       package1_file.py
     > package_folder2
       __init__.py

```

我的 app.yaml 文件中有这个：

```
- 网址：/package1/resource1
  脚本：package_folder1.package1_file1.py
  安全：总是

```

这在使用应用程序引擎的模拟器在本地主机上调试时工作正常，但在服务器上，当我尝试访问资源时，我收到此警告（在这种情况下是一个错误，因为没有提供脚本）`/package1/resource1`：

```
File referenced by handler not found: python.package_folder1.package1_file1.py 
```

我还尝试将 app.yaml 文件中的行更改为此`script: package_folder1.package1_file1.py`，但仍然出现相同的错误。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:37:10.097

您使用 python 2.5 或 python 2.7 的运行时是什么？使用其中一种时存在一些差异。此外，您在项目结构中的哪个位置存储 app.yaml 文件？

对于 python 2.5，您指定实际的 python 脚本，但对于 python 2.7，您指定 WSGI 应用程序。有关更多详细信息，请参阅[https://developers.google.com/appengine/docs/python/config/appconfig#Script_Handlers](https://developers.google.com/appengine/docs/python/config/appconfig#Script_Handlers)。

运行时在 app.yaml 文件中使用密钥运行时定义。

```
runtime: python   #python 2.5
runtime: python27 #python 2.7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:05:31.997

python 文件夹是整个 python 运行时吗？如果是这样，你不应该包括那个。

```
Project_name
> src
  app.yaml
  > package_folder1
    __init__.py
    package1_file.py
  > package_folder2
    __init__.py 
```

在 app.yaml 文件中使用斜杠而不是句点来指定脚本：

```
script: package_folder1/package1_file1.py 
```

# xcode - 带有字符串参数xcode的sqlite查询

> ID：10759796
> 
> 赞同：0
> 
> 时间：2012-05-25T18:42:38.307
> 
> 标签：xcode, sqlite

我正在尝试查询我的 sqlite 数据库，其中列等于传递给函数的值。

我的查询看起来像这样

```
NSString *query=[NSString stringWithFormat:@"SELECT rowid, name FROM Coops WHERE category=%@",chosenCategory]; 
```

此查询不返回任何内容，但如果我更改它，它看起来像这样

```
query=@"SELECT rowid, name FROM Coops WHERE category='the category I am passing'; 
```

它工作得很好。我的问题是如何将字符串参数传递给 xcode 中的 sqlite 查询。

我的整个方法是这样的

-(NSArray *)coopsInCategory:(NSString *)chosenCategory {

```
sqlite3_stmt *statement;
NSString *query=[NSString stringWithFormat:@"SELECT rowid, name, hCity, hours  FROM Coops WHERE category=%@",chosenCategory];

/*if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, NULL)!=SQLITE_OK) {
    NSAssert1(0, @"Error preparing statment",sqlite3_errmsg(_database));
}*/

 if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, nil)== SQLITE_OK)
    {
        while(sqlite3_step(statement)==SQLITE_ROW)
        {

            int uniqueId=sqlite3_column_int(statement, 0);
            char *nameChar=(char *) sqlite3_column_text(statement, 1);

            char *hCityChar=(char *) sqlite3_column_text(statement, 2);

            char *hoursChar=(char *) sqlite3_column_text(statement, 3);

            NSString *name=[[NSString alloc] initWithUTF8String:nameChar];

            NSString *hCity=[[NSString alloc] initWithUTF8String:hCityChar];

            NSString *hours=[[NSString alloc]initWithUTF8String:hoursChar];

            informationObject *info=[[informationObject alloc]coopDetails:uniqueId name:name hCity:hCity hours:hours];

            [retval addObject:info];

            [name release];

            [hCity release];

            [hours release];

        }

     sqlite3_finalize(statement);
 }
return retval; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:44:33.817

看起来您需要在`%@`. 如果不是这样，请尝试追踪错误消息是什么。

# java - Java：意外情况下的正则表达式匹配

> ID：10759797
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:42:40.057
> 
> 标签：java, regex, servlets

我正在开发一个 servlet，它可以有效地路由到其他 servlet，并在此过程中执行一些漂亮的辅助功能。我的 web.xml 配置为通过此类引导所有流量，并且该类基于 pathInfo 和正则表达式逻辑路由请求。我的代码如下所示：

```
public class API1 extends HttpServlet {

    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        String pathInfo = req.getPathInfo();

        if (pathInfo.matches("/.*/.*/.*/?")) {
            _fooBarBazHandler.get(req, resp);
        } else if (pathInfo.matches("/.*/.*/?")) {
            _fooBarHandler.get(req, resp);
        } else if (pathInfo.matches("/.*/?")) {
            _fooHandler.get(req, resp);
        } else {
            resp.sendError(HttpServletResponse.SC_NOT_FOUND);
            return;
        }
    }
...
} 
```

现在，我的想法是，如果我点击`http://host/FooService/foo/bar/baz`它，它会重定向到`_fooBarBazHandler`，`http://host/FooService/foo/bar`会点击`_fooBarHandler`，然后`http://host/FooService/foo`会点击`_fooHandler`

然而，出于某种原因，`http://host/FooService/foo`显然是匹配的`_fooBarHandler`。绝对清楚，使用调试器，我确定 的值为`pathInfo`“/foo”。

我的正则表达式不是太强。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:53:25.380

正则表达式`/.*/.*/?`将*不*匹配`"/foo"`。您的错误在其他地方（对不起！）。

见[http://fiddle.re/0g28](http://fiddle.re/0g28)（点击蓝色的“Java”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:20:32.207

我已经在我的机器上进行了测试，第三个测试是返回 true 的——所以我同意 Andrew Cooke 的观点——这个错误在其他地方。

# php - 不同类型（组）的计数值

> ID：10759800
> 
> 赞同：0
> 
> 时间：2012-05-25T18:42:44.627
> 
> 标签：php, mysql

我有一个问题，我想根据类型计算值..例如

```
 a 5
 a 5
 b 7 
```

输出：a = 10 和 b = 7，每次数据更改为 c，...，z 时，它都会计数++，这就是我到目前为止所得到的...

```
while ($row = mysql_fetch_array($result)) { 
    $num = $num+1;

 echo "there are ".$row['COUNT(data)']." on ".$row['date']." items";
    $total+= $row['COUNT(date)'];
            ?>
<? echo "<br/>"; 
}
echo "<br/> the data has " . $total ;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:17:03.927

下面使用

```
SELECT field01, sum(field02) as Total_Sum
FROM myTable
GROUP BY field01 
```

考虑`field01`是 a,a,b 并且`field02`是 5,5,6...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:47:01.213

您肯定希望`GROUP BY`在 SQL 端使用，但仅对日期部分按日期时间/时间戳进行分组对于任何大量数据都会变得昂贵。

```
SELECT 
    COUNT(1) as `total`, 
    DATE(date_col) as `date` 
FROM  table 
GROUP BY DATE(date_col) 
```

我有一张大约有 160 万条记录的表。在 512MB 的 VM 上，此查询（带有 an`ORDER BY`和 a `LIMIT 5`）大约需要 2 秒。它并不慢..但它也不快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:58:10.837

假设您的列被调用`type`并且`value`在此表中...

```
 SELECT type, sum(VALUE) as value
       FROM table
   GROUP BY type
   ORDER BY type 
```

应该为您提供每种类型和值的结果集。

但是你的问题并不完全清楚你想要什么。

# sql-server - sql server，局部变量，声明表，设置为null

> ID：10759805
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:43:12.800
> 
> 标签：sql-server, variables, null

我想知道是否可以将声明变量（作为表）设置为空。

像 ：

```
DECLARE @TABLE1 AS TABLE (COL1 INT)
SET @TABLE1 = NULL 
```

我搜索了一种方法来知道我是否已经尝试将数据插入到我的变量中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T18:47:22.910

不，没有。

如果您需要记住是否尝试将数据插入@table，请使用单独的`bit`变量作为标志。

如果您需要知道您的 @table 是否包含任何行，请使用

```
if exists (select * from @table1)
begin
    ...
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:01:14.367

要完成有关是否已添加行的问题，您可以执行以下操作：

```
insert into @TABLE1 (COL1) VALUES ([someYourData])

if @@ROWCOUNT > 0
   -- row addeded
ELSE
   -- nothing added 
```

或者您可以检查 的值`@@ROWCOUNT`以了解添加了多少行：

```
insert into @TABLE1 (COL1) VALUES ([someYourData])
print @@ROWCOUNT 
```

据我所知`@TABLE1`，`local scope`当存储过程结束时，此变量将被删除

正如GSerg所说，您有很多检查方法：

```
if exists (select * from @TABLE1)
BEGIN
   --  do something
END 
```

或者

```
if (select count(@@rowcount) from @TABLE1) > 0
BEGIN
   --  do something
END 
```

或者

```
if (select count(*) from @TABLE1) > 0
BEGIN
   --  do something
END 
```

# c# - 客户端发现响应内容类型为“text/html”，但预期为“text/xml”

> ID：10759809
> 
> 赞同：0
> 
> 时间：2012-05-25T18:43:23.330
> 
> 标签：c#, asp.net

> **可能重复：**
> [客户端发现响应内容类型为“text/html”，但预期为“text/xml”](https://stackoverflow.com/questions/490677/client-found-response-content-type-of-text-html-but-expected-text-xml)

我正在为用户身份验证添加 Web 参考。该项目建设成功。但在那之后，一旦我输入用户名和密码并输入登录按钮，它就会给出以下错误消息。

**“客户端发现响应内容类型为 'text/html'，但预期为 'text/xml”**

这是我的代码：

```
webservice.API c = new webservice.API();
var ret = c.checkAuth(new Guid("34343-kjk343-44343-3434"), UserName.Text, Password.Text);
if (ret.APIStatus.id == 1)
{
}
else
{
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:58:52.543

在 firefox 中使用 firebug 并查看来自 web 服务的错​​误，因为似乎从 web 服务返回了一些错误页面。

如果您在同一解决方案中同时拥有 Web 项目和 Web 服务项目，则尝试调试应用程序，您会发现服务发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:31:30.390

问题似乎出在 Web 服务端，而不是在您的客户端应用程序上。您可以控制网络服务吗？如果是这样，您应该能够验证它是否正确发送了 Content-Type: text/xml 的响应

您还应该使用[Fiddler2](http://www.fiddler2.com/fiddler2/)来监视正在发生的事情并检查正在发送和接收的请求和响应的其他属性。

# sql - sql过程存储多条相同的记录

> ID：10759811
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:43:31.410
> 
> 标签：sql, tsql, stored-procedures, procedure

我的 sql server 数据库有这个存储过程...

```
ALTER PROCEDURE [dbo].[NewBudget]
@year int,
@int nvarchar(3)
AS
BEGIN
SET NOCOUNT ON;
INSERT [NAOLI].[dbo].[BudgetsEditTbl]
([F_Year],[O_OrgCode],[O_OrgDesc],[S_SubObject],[S_SubDescrip],[B_BudgetAmt],[B_Initials],[B_CIPrefNo],[B_OrgBudgetAmt],[keyfield]) 
SELECT @year as [F_Year],[O_OrgCode],[O_OrgDesc],[S_SubObject],[S_SubDescrip], 0.00 as [B_BudgetAmt],@int as [B_Initials],null as [B_CIPrefNo],null as [B_OrgBudgetAmt],NewID()
FROM [NAOLI].[dbo].[BudgetsEditTbl]
END 
```

发生的事情是根据参数“@year”，它会自动更新数据库，其中包含关于年份变化的新一年的记录。只是没有用新的一年更新它，orgcode 和相应的子对象它给了我 6 条具有相同 orgcode 的记录。所以它本质上是运行该过程 6 次并将所有这些混乱存储在我的数据库中。知道如何解决这个问题吗？

```
2011 | 536003 | Engineering | 6302 | Roads and Components | 0.00 | MC | N/A | 0.00    
2011 | 536003 | Engineering | 6303 | Rights of Way -Acquire | 0.00 | MC | N/A | 0.00
2010 | 536003 | Engineering | 6302 | Roads and Components | 18300.00 | FG | N/A | 0.00    
2010 | 536003 | Engineering | 6303 | Rights of Way -Acquire | 18300.00 | FG | N/A | 0.00 
```

因此，对于每一年，相同的代码和信息只会以不同的数量出现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:52:44.840

您可以使用`DISTINCT`删除任何重复项

```
ALTER PROCEDURE [dbo].[NewBudget]
@year int,
@int nvarchar(3)
AS
BEGIN
SET NOCOUNT ON;
INSERT [NAOLI].[dbo].[BudgetsEditTbl]
([F_Year],[O_OrgCode],[O_OrgDesc],[S_SubObject],[S_SubDescrip],[B_BudgetAmt],[B_Initials],[B_CIPrefNo],[B_OrgBudgetAmt],[keyfield]) 
SELECT DISTINCT @year as [F_Year],[O_OrgCode],[O_OrgDesc],[S_SubObject],[S_SubDescrip], 0.00 as [B_BudgetAmt],@int as [B_Initials],null as [B_CIPrefNo],null as [B_OrgBudgetAmt],NewID()
FROM [NAOLI].[dbo].[BudgetsEditTbl]
END 
```

# c# - 复制构造函数静态分析工具？

> ID：10759813
> 
> 赞同：2
> 
> 时间：2012-05-25T18:43:50.167
> 
> 标签：c#

是否有任何工具可以让我将 C# 方法/构造函数标记为复制构造函数，并让它检查代码是否存在复制构造函数场景中可能发生的明显错误？

需要检查的一些明显错误：

*   如果它应该是深拷贝但显然正在发生浅拷贝
*   如果它应该是浅拷贝但正在发生深拷贝
*   源上未复制的字段
*   目标上没有被复制的字段

可能还有其他我没有想到的聪明检查。

我还没有找到任何支持这一点的工具。代码合同似乎是一个明显的工具，但如果它确实存在，我还没有找到它。

除了静态分析工具之外，是否还有其他技巧可以确保复制构造函数保持最新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:46:15.310

单元测试可能是你最好的工具。

C# 不会像 C++ 和其他一些语言那样自动创建复制构造函数。因此，这通常不是 C++ 中常见的问题。

一般来说，它们在 C# 代码中比在许多其他语言中要少得多。因此，我怀疑您最好根据需要将此检查包含在这些类型的单元测试中，因为它们只会出现在少数特定类型中。

# google-app-engine - 构建谷歌应用引擎

> ID：10759814
> 
> 赞同：0
> 
> 时间：2012-05-25T18:44:09.400
> 
> 标签：google-app-engine

我需要构建谷歌应用引擎。我写了配置文件 buildout.cfg：

```
[buildout]
parts =
    gae_sdk
    gae_tools
    app_lib

unzip = true
relative-paths = true
download-cache = etc/downloads
develop-eggs-directory = etc/develop-eggs
parts-directory = etc/parts

[gae_sdk]
recipe = appfy.recipe.gae:sdk
url = http://googleappengine.googlecode.com/files/google_appengine_1.4.3.zip
destination = ${buildout:parts-directory}
hash-name = false
clear-destination = true

[gae_tools]
recipe = appfy.recipe.gae:tools
sdk-directory = ${gae_sdk:destination}/google_appengine

[app_lib]
recipe = appfy.recipe.gae:app_lib
lib-directory = src/distlib
use-zipimport = false

eggs =
    webapp2 
```

运行命令后 python <(curl [http://python-distribute.org/bootstrap.py](http://python-distribute.org/bootstrap.py) ) –distribute 和 ./bin/buildout GAE 不想工作。服务器正在工作，但来自 GAE 站点的最简单的 Hello world 显示错误 importError: No module named webapp2\. 首先，我需要在我的脚本之后运行 Hello world。文件和文件夹结构为： progect/buildout.cfg progect/src/hello_world.py , app.yaml

```
file app.yaml:
application: hello_world
version: 1
runtime: python
api_version: 1
threadsafe: true

handlers:
- url: /.*
script:hello_world.app

builtins:
- deferred: on

file hello_world.py:
import webapp2

class MainPage(webapp2.RequestHandler):
def get(self):
self.response.headers = ‘text/plain’
self.response.out.write('Hello, webapp World!')

app = webapp2.WSGIApplication(,
debug=True)
help me, please. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:11:36.830

webapp2 is included in recent SDKs (google_appengine/lib/webapp2). If you either use a newer SDK or don't import webapp2 it should work for you.

In case you're interested in a slightly different buildout setup, I've included one.

I've been using rod.recipe.appengine for buildout, and have been quite happy with it. It even allows you to patch the app engine SDK if you need to fix PyCrypto [imports](http://code.google.com/p/googleappengine/issues/detail?id=4612) etc.

I made my config based on the bobo [example](http://code.google.com/p/typhoonae/wiki/AppEngineBuildout) and some other sources. The example below allows you to get dependencies like PIL from dist.plone.org, it pulls wtforms for form handling and gdata for crypto convenience and put them in packages.zip which can be added to sys.path before imports, for example with `import zippedpackages` where zippedpackages.py looks like

```
import sys
if 'packages.zip' not in sys.path:
    sys.path.insert(0, 'packages.zip') 
```

Also note that settings.py and app.yaml are generated from templates and variables like `appspotname` and `appspotversion` are inserted.

The buildout is based on a running buildout, but this exact example has not been tested, and is also missing some templates. If you look up the different recipes on pypi you can read up on options and syntax.

If you use templates, you might have to run the buildout twice in order to first generate files from templates (in src directory in my setup) and then create symlink to parts directory (where SDK runs from). If you don't want templates, remove from buildout and set up as you normally do. Using eggs instead of virtualenv enables you to switch libraries as configuration instead of having different virtualenvs. Not a big problem though, as library versions rarely change. If you run into issues with eggs, it's also worth noting that the SDK import magic is aware of site-packages and to some extent virtualenvs, but not eggs, so some libraries might have to be installed in the virtualenv anyway.

```
[buildout]
appspotname = progect
appspotversion = dev

versions = versions
develop =
    src/progect
parts =
    progect
    progectconfig
    progectsettings
    nosetests
    noseconfig
    zipsymlink

unzip = true

find-links =
    http://dist.plone.org/thirdparty/

[progect]
recipe = rod.recipe.appengine
url = http://googleappengine.googlecode.com/files/google_appengine_1.6.6.zip
server-script = dev_appserver
packages =
    wtforms
    gdata
src = ${buildout:directory}/src/progect
exclude = tests
zip-packages = True
use_setuptools_pkg_resources = True
# We have a patch overriding imports to enable buildout and eggs
#patch = ${buildout:directory}/google_appserver.patch

[progectconfig]
recipe = collective.recipe.template
input = ${buildout:directory}/templates/app.yaml.in
output = ${progect:src}/app.yaml

[progectsettings]
recipe = collective.recipe.template
input = ${buildout:directory}/templates/settings.py.in
output = ${progect:src}/settings.py

[nosetests]
recipe = zc.recipe.egg
eggs =
    NoseGAE
    WebTest
    progect
    nose

extra-paths =
    ${buildout:directory}/etc
    ${buildout:directory}/parts/google_appengine
    ${buildout:directory}/parts/google_appengine/lib/antlr3
    ${buildout:directory}/parts/google_appengine/lib/django_1_3
    ${buildout:directory}/parts/google_appengine/lib/fancy_urllib
    ${buildout:directory}/parts/google_appengine/lib/ipaddr
    ${buildout:directory}/parts/google_appengine/lib/webob_1_1_1
    ${buildout:directory}/parts/google_appengine/lib/webapp2/
    ${buildout:directory}/parts/google_appengine/lib/yaml/lib
    ${buildout:directory}/parts/google_appengine/lib/simplejson
    ${buildout:directory}/parts/google_appengine/lib/graphy
interpreter = python

[noseconfig]
recipe = collective.recipe.template
input = ${buildout:directory}/templates/setup.cfg.in
output = ${buildout:directory}/setup.cfg

[zipsymlink]
recipe = svetlyak40wt.recipe.symlinks
path = ${progect:src}
files = ${progect:app-directory}/packages.zip

[versions]
Django = 1.3
gdata = 2.0.16
lxml = 2.3
PIL = 1.1.7
PyCrypto = 2.3
setuptools = 0.6c11
webapp2 = 2.3
WebOb = 1.1.1
WTForms = 1.0.1

# Tools and dependencies
svetlyak40wt.recipe.symlinks = 0.2.1 
```

An app.yaml template can look like

```
application: ${buildout:appspotname}
version: ${buildout:appspotversion}
runtime: python27
threadsafe: true
api_version: 1

libraries:
- name: PIL
  version: "${versions:PIL}"
- name: pycrypto
  version: "${versions:PyCrypto}"
- name: django
  version: "${versions:Django}"
- name: lxml
  version: "${versions:lxml}"
- name: setuptools
  version: "${versions:setuptools}"
- name: webapp2
  version: "${versions:webapp2}"
- name: webob
  version: "${versions:WebOb}"

handlers:
- url: /.*
  script:hello_world.app
- url: /_ah/queue/deferred
  script: google.appengine.ext.deferred.application
  login: admin

builtins:
- deferred: on 
```

Nose tests config template, running tests against src directory (as opposed to the main alternative parts/progect):

```
[nosetests]
verbosity=1
detailed-errors=1
with-gae=1
gae-application=${progect:src}
gae-lib-root=${buildout:directory}/parts/google_appengine
where=${progect:src} 
```

When I want to set this up, I go to the buildout root directory and type

```
/path/to/appropriate/python bootstrap.py --distribute
bin/buildout -c buildout.cfg 
```

and then I can run `bin/nosetests` or `bin/dev_appserver parts/progect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:45:40.633

webapp2 不包含在 sdk 中，如果您在构建中使用沙箱或 virtualenv，您需要将包安装到您的 python 环境或将其包含在构建中。

# java - Java中同步关键字的使用

> ID：10759815
> 
> 赞同：3
> 
> 时间：2012-05-25T18:44:12.860
> 
> 标签：java, multithreading, synchronized

我已经阅读了一些关于同步方法的文章（包括 Oracle 的），但我不确定我是否理解正确。

我有以下代码：

```
public class Player extends javax.swing.JLabel implements Runnable{
    private static int off2[] = {-1, 0, 1, 0}, off1[] = {0, 1, 0, -1};
    private static final Map dir = new java.util.HashMap<Integer, Integer>();
    static{
        dir.put(KeyEvent.VK_UP, 0);
        dir.put(KeyEvent.VK_RIGHT, 1);
        dir.put(KeyEvent.VK_DOWN, 2);
        dir.put(KeyEvent.VK_LEFT, 3);
    }
    private boolean moving[] = new boolean[4];

    @Override
    public void run(){
        while(true){
            for(Object i : dir.values()){
                if(isPressed((Integer)i)) setLocation(getX() + off1[(Integer)i], getY() + off2[(Integer)i]);
            }
            try{
                Thread.sleep(10);
            }catch(java.lang.InterruptedException e){
                System.err.println("Interrupted Exception: " + e.getMessage());
            }
        }
    }
    public void start(){
        (new Thread(this)).start();
    }

    private synchronized boolean isPressed(Integer i){
        if(moving[i]) return true;
        else return false;
    }

    public synchronized void setPressed(KeyEvent evt) {
        if(dir.containsKey(evt.getKeyCode()))moving[(Integer)dir.get(evt.getKeyCode())] = true;
    }
    public synchronized void setReleased(KeyEvent evt){
        if(dir.containsKey(evt.getKeyCode()))moving[(Integer)dir.get(evt.getKeyCode())] = false;
    }
} 
```

现在它所做的只是运动。我的理解是当我的主窗体的键侦听器注册 keyPressed 和 Released 事件时，从主线程调用 setPressed 和 setReleased。这段代码合理吗？是否正确使用了 synchronized 关键字？（代码没有它也能工作，但我怀疑最好有它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:00:04.167

使用同步是正确的，但我认为没有必要，因为在当前的实现中，并行访问数组不会导致不一致。

但是，我认为您的代码中存在不同的线程问题。您不应该从单独的线程与 Swing (=call setLocation()) 交互，请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater( java.lang.Runnable)](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater(java.lang.Runnable))。所以你需要将更新代码包装到一个 Runnable 中：

```
private boolean moving[] = new boolean[4];
Runnable dirUpdate = new Runnable() {
  for(Object i : dir.values()){
    if(isPressed((Integer)i)) setLocation(getX() + off1[(Integer)i], getY() + off2[(Integer)i]);
  }
}; 
```

来自线程的调用将如下所示：

```
SwingUtils.invokeLater(dirUpdate); 
```

请注意，在这种情况下，您将不再需要同步，因为 dirUpdate 将从事件处理线程中调用。

您可能希望在 isPressed() 中检查 null 以避免未映射键上的异常。

运动的更简单表示可能是具有 dx 和 dy 变量，这些变量将由关键事件设置为 -1、1 或 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:08:27.890

不确定事物的 Swing 方面，但一般来说，您需要同步来保护可能由多个线程访问的那些共享数据（在您的情况下是移动 []）。

在这种情况下，您需要同步，因为 move[] 可以通过 setXxx 方法（主线程）中的任一方法（主线程）写入或您启动的线程读取时访问。

从 Java 5 开始，java.concurrent 包中的功能要好得多，我建议您考虑使用 Lock 来保护 Moving[] 或 AtomicBoolean。

几个“风格问题”：

1.  不要使用“原始类型”——更喜欢 Map<Integer, Integer> 到 Map （这也使您免于 setXxxx() 方法中未经检查的 -ugly- 强制转换）

2.  避免单行 if's - 使您的代码难以辨认:)

如果您决定使用 Lock （在这种情况下不是一个很大的优势 v. synchronized ）您的 isPressed() 应该看起来像：

```
// ...
private Lock movingLock = new ReentrantLock();

private  boolean isPressed(Integer i){
  try {
    movingLock.acquire();
    return moving[i];
  } finally
    movingLock.release();
  }        
} 
```

您必须通过调用 Lock.acquire() 和 release() 在 setXxx 方法中“包装”对 move[] 的分配

# silverlight - Silverlight 中的嵌套样式

> ID：10759823
> 
> 赞同：1
> 
> 时间：2012-05-25T18:44:43.473
> 
> 标签：silverlight, styles, themes

我正在创建一个类似于控件的 KPI，并希望根据特定标准应用多种样式，而不必遍历多个控件。基本上我有：

```
<Border>
  <TextBlock>
</Border> 
```

边框需要样式，其中的 TextBlocks 也是如此。我有典型的绿色/黄色/红色 KPI，但每种都有两种模式。越接近最后期限，就越极端。

因此，对于 LongTermGreen，边框将具有带透明背景的绿色边框，并且 TextBlocks 的字体颜色将为绿色。但是对于 ShortTermGreen，我想将边框设为深绿色，将 TextBlock 的字体颜色设为白色。

显然，我可以使用自定义代码来执行此操作，并根据特定标准处理设置样式，但这很麻烦（一些 KPI 有多个 TextBlocks。

这可能吗？到目前为止，我一直在空白...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:49:12.410

正是出于这个原因，WPF 有数据触发器，但不幸的是，这些触发器还没有进入 Silverlight。

这可能是非常规的，但您可以将样式属性绑定到 KPI 状态，然后使用自定义转换器为适当的状态值返回正确的样式资源。

否则，自定义代码是唯一的其他选择。

# jqgrid - JQgrid 单元格工具提示为 Html

> ID：10759827
> 
> 赞同：0
> 
> 时间：2012-05-25T18:45:12.080
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

我在 Jqgrid 中显示一个带有 div 和 html 标记的列，例如它是

```
<div><a> Click here to order tjos service.</a></br> Note: The service is disabled</div>. 
```

当我将指针悬停在单元格上时，它没有正确显示内容，这意味着它没有显示链接，然后是一个新行，它将注释显示为工具提示

请问有人知道如何解决这个问题吗？

谢谢，阿拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:54:21.087

您可以使用工具提示插件，如[JQuery Tooltip](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)或其他。

只需在格式化程序中为此单元格创建工具提示。

# wpf - 在运行时隐藏和显示数据绑定的 PivotItem 标头

> ID：10759828
> 
> 赞同：0
> 
> 时间：2012-05-25T18:45:20.130
> 
> 标签：wpf, xaml, data-binding, windows-phone-7.1

我认为 PivotItem 的当前实现有些不一致，更不用说有缺陷了。如果在完全渲染之前或之后设置了属性 Header ，则适当地设置了标头的大小，但是，将 Header 设置回 null 或 string.empty 不会导致标头再次缩小。当通过 DataBinding 设置 Header 时，是否有一种隐藏和显示 PivotItem 标头的优雅方法，或者是否可以强制 PivotItem 重新验证其边界？

到目前为止，我正在尝试用一些相当粗略的代码“解决”我的问题，其中包括事件和以编程方式完全重建 Pivot，然后再次附加所有 PivotItems。可能只是页面的一个好的解决方案，但当需要完成 10 次以上时肯定有点不确定。

[这个问题[以前](https://stackoverflow.com/questions/8008385/how-to-hide-pivotitem-header)在[类似的情况下](https://stackoverflow.com/questions/4239071/wp7-pivotcontrol-set-header-null)被问过，但从未真正解决过。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:10:17.957

您是否尝试仅删除一项的标题而保留其他标题？如果是这样，我不会推荐这个。这会很混乱。

如果尝试折叠所有这些，您可以将 PivotHeaderTemplate 的可见性绑定到一些东西。一个是您页面的 DataContext

```
<controls:Pivot x:Name="MyPivot" >
    <controls:Pivot.HeaderTemplate>
        <DataTemplate>
            <Grid Visibility="{Binding DataContext.HeaderVisibility, ElementName=MyPivot}">
            <TextBlock Text="{Binding}" FontSize="{StaticResource PhoneFontSizeExtraExtraLarge}" />
            </Grid>
        </DataTemplate>
    </controls:Pivot.HeaderTemplate> 
```

然后你可以在页面的视图模型中有一个 HeaderVisibility 属性。

如果要将文本设置为标题的空值，可以使用值转换器

xml:

```
<controls:Pivot x:Name="MyPivot" >
    <controls:Pivot.HeaderTemplate>
        <DataTemplate>
            <Grid Visibility="{Binding Converter={StaticResource TextToVisibilityConverter}}">
            <TextBlock Text="{Binding}" FontSize="{StaticResource PhoneFontSizeExtraExtraLarge}"/>
            </Grid>
        </DataTemplate>
    </controls:Pivot.HeaderTemplate> 
```

和转换器：

```
public class TextToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null) return Visibility.Collapsed;

        return (string.InNullOrEmpty(value.ToString()) ? Visibility.Collapsed : Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:20:07.220

您是否尝试过将枢轴的标题高度绑定到一个属性，该属性会随着您的标题文本设置为空/null（值 0？）

如果可行，也许您可​​以尝试的另一件事是将 Height 属性绑定到与标题文本相同的值，以及一个转换器（伪：如果文本为空，则返回 0 表示高度）- 这样您就没有需要担心的额外财产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:05:30.803

我发现更改 Visiblity 或降低 PivotItem 的标题高度根本不起作用（还没有？）在已经渲染的项目上。它只是被破坏了，但是可以通过将 PivotItem 的第一个子元素通过将其上边距更改为负值来移动这些缺点。诚然，不优雅，但工作。这是一些代码：

```
<phone:PhoneApplicationPage.Resources>
    <local:SubtitleConverter x:Key="SubtitleConverter" />
    <local:MarginConverter x:Key="MarginConverter" />       
</phone:PhoneApplicationPage.Resources>

<controls:PivotItem Name="LayoutItem" Header="{Binding Path=MyProgramSettings.ShowHeader, Converter={StaticResource SubtitleConverter}}">
    <ListBox Margin="{Binding Path=MyProgramSettings.ShowHeader, Converter={StaticResource MarginConverter}}"> 
        <!-- element that is moved up and down depending on some property -->
    </ListBox>
</controls:PivotItem> 
```

背后的代码

```
public class SubtitleConverter : ConverterBase
    {
        public override object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {   
            /* should always return a non empty string, making the PivotItem header height predictable */
            /* needed for MarginConverter */
            return MyProgramSettings.ShowHeader ? " " : MyResource.SomeText.ToLower();
        }
    }

    public class MarginConverter : ConverterBase
    {
        public override object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value is bool && (bool)value)
            {
                return new Thickness(12, 0, -28, 0);
            }
            return new Thickness(12, 0, -12, 0);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T07:57:25.047

好想法！我不完全使用您的解决方案，但我受到了您的想法的启发。

这是我所做的：

1.创建一个StackPanel作为容器，设置上边距为负值，如`Margin="0,-35,0,0"`

2.添加一些TextBlocks来伪造Pviot Headers，设置您打算与Headers绑定的数据绑定。

3.设置TextBlocks `Width = "Auto"`，添加一些右边的Margin，这样就不会太拥挤

注意：当第一个 TextBlock 代表当前的 PivotItem 时，其他的代表其他的——它们是未激活的。

4.对于未激活的PivotItems的TextBlocks，我们设置`Foreground="#FF727272"`与激活的进行区分。并添加一个事件处理程序，例如`Tap="GoToPivot2_Tap"`后面的​​简单代码：`PivotRoot.SelectedItem = Pivot2;`

```
<controls:Pivot x:Name="PivotRoot">

    <controls:PivotItem x:Name="Pivot1">
        <StackPanel Margin="0,-35,0,0" Orientation="Horizontal">
            <TextBlock Text="{Binding Header1}" Width="Auto" Margin="0,0,25,0" FontSize="30"/>
            <TextBlock Text="{Binding Header2}" Tap="GoToPivot2_Tap" Width="Auto" Margin="0,0,25,0" Foreground="#FF727272" FontSize="30"/>
            <TextBlock Text="{Binding Header3}" Tap="GoToPivot3_Tap" Width="Auto" Margin="0,0,25,0" Foreground="#FF727272" FontSize="30"/>
        </StackPanel>
    </controls:PivotItem>

    <controls:PivotItem x:Name="Pivot2">
        <StackPanel Margin="0,-35,0,0" Orientation="Horizontal">
            <TextBlock Text="{Binding Header2}" Width="Auto" Margin="0,0,25,0" FontSize="30"/>
            <TextBlock Text="{Binding Header3}" Tap="GoToPivot3_Tap" Width="Auto" Margin="0,0,25,0" Foreground="#FF727272" FontSize="30"/>
            <TextBlock Text="{Binding Header1}" Tap="GoToPivot1_Tap" Width="Auto" Margin="0,0,25,0" Foreground="#FF727272" FontSize="30"/>
        </StackPanel>
    </controls:PivotItem>

    <controls:PivotItem x:Name="Pivot3">
        <StackPanel Margin="0,-35,0,0" Orientation="Horizontal">
            <TextBlock Text="{Binding Header3}" Width="Auto" Margin="0,0,25,0" FontSize="30"/>
            <TextBlock Text="{Binding Header1}" Tap="GoToPivot1_Tap" Width="Auto" Margin="0,0,25,0" Foreground="#FF727272" FontSize="30"/>
            <TextBlock Text="{Binding Header2}" Tap="GoToPivot2_Tap" Width="Auto" Margin="0,0,25,0" Foreground="#FF727272" FontSize="30"/>
        </StackPanel>
    </controls:PivotItem>
</controls:Pivot> 
```

就是这样。

也许事件不如你的优雅，但也有效。

# iphone - iPad 1 或 iPhone 3G 设备永远不会调用 ViewDidAppear

> ID：10759830
> 
> 赞同：0
> 
> 时间：2012-05-25T18:45:43.127
> 
> 标签：iphone, ios, uiview

知道为什么会这样吗？我在方法上设置断点，它们永远不会被调用。

然而，这不会发生在我的 iPhone 4S 上。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:54:10.880

这是 iOS 5 的问题。在 iOS 5 之前 viewDidAppear 不会在嵌套的 viewControllers 上自动调用。iOS 5 之后就是这样。您可能需要在代码中检查操作系统版本并手动调用 viewDidAppear。

# php - 如何从文本文档中获取 2 个数据点？

> ID：10759831
> 
> 赞同：2
> 
> 时间：2012-05-25T18:45:43.830
> 
> 标签：php, html

我将网页的源代码复制到文本文档中，但无法从文件中获取两个数据点；纬度和经度。

我必须制作并扫描文档的 php 文件是这样的：

```
<?php

$ch = curl_init("http://www.marinetraffic.com/ais/shipdetails.aspx?MMSI=258245000");
$fp = fopen("example_homepage.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);

header('Content-Type: text/plain');

$myFile = "example_homepage.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, 9251);
fclose($fh);
echo $theData;

?> 
```

gps 隐藏在如下文本中（来自文件 example_homepage.txt）：

```
<img style="border: 1px solid #aaa" src="flags/NO.gif" />
<br/>
<b>Call Sign:</b>LAJW
<br/>
<b>IMO:</b>9386380,
<b>MMSI:</b>258245000
<br/>
<hr/>
<h2>Last Position Received</h2>
<b>Area:</b>North Sea
<br/>
<b>Latitude / Longitude:</b>
<a href='default.aspx?mmsi=258245000&centerx=5.311533&centery=60.39997&zoom=10&type_color=9'>60.39997˚ / 5.311533˚ (Map)</a>
<br/>
<b>Currently in Port:</b>
<a href='default.aspx?centerx=5.32245&centery=60.39085&zoom=14'>BERGEN</a>
<br/>
<b>Last Known Port:</b>
</b>
<a href='default.aspx?centerx=5.32245&centery=60.39085&zoom=14'>BERGEN</a>
<br/>
<b>Info Received:</b>0d 0h 20min ago
<br/>
<table>
    <tr>
        <td>&nbsp;
            <img src="shipicons/magenta0.png" />
        </td>
        <td>
            <a href='default.aspx?mmsi=258245000&centerx=5.311533&centery=60.39997&zoom=10&type_color=9'><b>Current Vessel's Track</b></a>
        </td>
    </tr>
    <tr>
        <td>
            <img src="windicons/w05_330.png" />
        </td>
        <td>
            <b>Wind:</b>5 knots, 327&deg;, 13&deg;C</td>
    </tr>
</table>
<a href='datasheet.aspx?datasource=ITINERARIES&MMSI=258245000'><b>Itineraries History</b></a>
<br/>
<hr/>
<h2>Voyage Related Info (Last Received)</h2>
<b>Draught:</b>6.8 m
<br/>
<b>Destination:</b>BERGEN HAVN
<br/>
<b>ETA:</b>2012-05-22 18:00
<br/>
<b>Info Received:</b>2012-05-23 18:43 ( 
```

我想要的两个数字是：

纬度：60.39085 经度：5.32245

我对这种事情不是很有经验。也许有更好的方法。请告诉我。

编辑：最后三行代码仅供参考，我可以获得文本文件中的前 9251 个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:01:05.130

这可能有点矫枉过正，但您可以尝试[PHP DOM](http://php.net/manual/en/class.domdocument.php) + [parse_url](http://php.net/manual/en/function.parse-url.php) + [parse_str](http://www.php.net/manual/en/function.parse-str.php)：

```
$text = file_get_contents('http://example.com/path/to/file.html');
$doc = new DOMDocument('1.0');
$doc->loadHTML($text);
foreach($doc->getElementsByTagName('div') AS $div) {
    $class = $div->getAttribute('class');
    if(strpos($class, 'news') !== FALSE) {
        if($div->hasAttribute('src') OR $div->hasAttribute('href')) {
            $parsed_url = parse_url($div->getAttribute('src')));
            $query_values = parse_str($parsed_url);
            $desired_values = array(
                $query_values['centerx'],
                $query__values['centery']
            );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:52:41.847

这就是我为得到我想要的结果所做的：（打印出 * *-70.19347 42.02112 **）

```
<?php
//goes though and copies the web page to a text file
$ch = curl_init("http://photos.marinetraffic.com/ais/lightdetails.aspx?light_id=1000019773");
$fp = fopen("example_homepage.txt", "w");
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp);

//prevents some parsing of the html document
header('Content-Type: text/plain');

//opens text file and reads contents to a string
$myFile = "example_homepage.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh,12000);
fclose($fh);

//finds the location of the beginning of the GPS data
$pos = strrpos($theData, "&centerx=");
if ($pos === false) { 
    // note: three equal signs
    echo "not found";
}

//cuts out that string and finds position for x and y components
$subtract = 12000-$pos-36;
$rest = substr($theData, $pos, -$subtract);
$lat = substr($rest, 9, -17);
$lonpos = strrpos($rest, "&centery=")+9;
$lon = substr($rest, $lonpos);

//turns the values into floats
$lat = floatval($lat);
$lon = floatval($lon);

//echo $rest;
echo $lat;
echo " ";
echo $lon;

?> 
```

希望这可以帮助某人

# php - array_search 的问题

> ID：10759833
> 
> 赞同：0
> 
> 时间：2012-05-25T18:45:55.080
> 
> 标签：php

当我运行以下命令时，我得到了`'B.C.'`，但我试图得到`'BC'`.

我设置`array_search`了严格比较，为什么不返回`"BC"`？

如果我通过了`"Alberta"`，我得到`"AB"`了，这是正确的。

```
<?
function cleanProvince($province)
{
    $values = array(
        'AB' => 'Alberta',
        'BC' => 'B.C.',
        'BC' => 'British Columbia',
        'ON' => 'Ontario',
        'ON' => 'Onatrio',
        'ON' => 'Ont',
        'NS' => 'Nova Scotia',
        'QC' => 'Quebec'
    );
    if ($key = array_search(@$province, $values, true)) {
        return $key;
    } else {
        return $province;
    }
}
echo (cleanProvince("B.C."));
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T18:48:18.153

一个数组中不能有多个键。当你这样做时，第二个会覆盖第一个。

```
$values = array(
    'AB'=>'Alberta',
    'BC'=>'B.C.',
    'BC'=>'British Columbia', # Overrides 'B.C.'
    'ON'=>'Ontario',
    'ON'=>'Onatrio', # Overrides 'Ontario'
    'ON'=>'Ont', # Overrides 'Onatrio'
    'NS'=>'Nova Scotia',
    'QC'=>'Quebec',
); 
```

你正在传递`"B.C."`给`cleanProvince`. 那不在`$values`，所以`array_search`返回`false`，因此`cleanProvince`返回`"B.C."`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:06:34.573

正如所建议的那样，交换您的键和值将产生所需的结果，并避免`array_search()`我只能假设具有相当高开销的调用（*在大多数情况下没有实际意义，但如果迭代调用......*）。

```
function getProvince($name){
    $values = array(
        'Onatrio' => 'ON',
        'Ontaroi' => 'ON',
        'O.N.' => 'ON',
        // ...
    );
    return isset($values[$name]) 
        ? $values[$name] 
        : $name; // or null I suppose
} 
```

# xslt - 重构节点

> ID：10759835
> 
> 赞同：1
> 
> 时间：2012-05-25T18:45:56.810
> 
> 标签：xslt

我有一个具有以下结构的 xml

```
<xml> 
<object context="3-cumulative" > 
  <metadata> 
    <ref cite="4.2" relevance="first.2"/> 
  </metadata> 
<body> 
   <para> 
      <text>  
             applicable on and after December 14,2007\. 
      </text> 
   </para> 
 </body> 
</object> 

 <object context="1-cumulative" > 
  <metadata> 
    <ref cite="4.2" relevance="first.1"/> 
  </metadata> 
<body> 
   <para> 
     <text>  
       applicable on and after December 14,2006\. 
     </text> 
   </para> 
</body> 
 </object> 

   <object context="1-cumulative" > 
   <metadata> 
      <related-content-ref cite="5 annuity" relevance="first.1"/> 
   </metadata> 
  <body> 
    <para> 
      <text> 
         applicable on and after December 14, 2008 
      </text> 
     </para> 
   </body> 
  </object> 

   <mainbody> 
        <num cite="4.2">4.2</num> 
        <num cite="2" type="para">2</num> 
        <heading>Stock exchanges</heading> 
        <prov-body> 
          <text> 
              Notwithstanding the provisions of a convention ... as defined in the 
              <italic>Income Tax Act</italic>. 
          </text> 
            <prov> 
              <num cite="1 annuity"/> 
              <num cite="5 annuity"/> 
              <num cite="3 annuity"/> 

                 <heading>“annuity”&lt;/heading> 
                <text> 
                <term>“annuity”&lt;/term>does not include any pension payment ... 
                </text> 
               <text> 
                 any pension payment ... 
               </text> 
           </prov> 
       </prov-body> 
      </mainbody> 
    </xml> 
```

我需要，如果在“主体”num/@cite 中找到任何对象/元数据/ref/@cite，并且对象/@context 是“1-cumulative”，那么对象中的 para/text 应该复制到第一个 Text 节点的末尾并且应该按 object/metadata/ref/@relevance 排序，或者如果在 "mainbody" num/@cite 中找到任何 object/metadata/ref/@cite 并且 object/@context 是 '3-cumulative' 然后是 para/text from object 应该在第一个 Text 节点之后复制它自己的 Text 元素，并且应该按 object/metadata/ref/@relevance 排序

输出应该是：

```
<xml> 
 <mainbody> 
 <num cite="4.2">4.2</num> 
 <num cite="2" type="para">2</num> 
 <heading>Stock exchanges</heading> 
 <prov-body> 
  <text> 
    Notwithstanding the provisions of a convention ... as defined in the 
    <italic>Income Tax Act</italic>. 
    **applicable on and after December 14, 2006** 
  </text> 
  <text>   **applicable on and after December 14, 2007** </text>

 <prov> 
        <num cite="1 annuity"/> 
        <num cite="5 annuity"/> 
        <num cite="3 annuity"/> 
        <heading>“annuity”&lt;/heading> 
        <text> 
        <term>“annuity”&lt;/term>does not include any pension payment ... 
         **applicable on and after December 14, 2008** 
        </text> 
        <text> 
        any pension payment ... 
       </text> 
   </prov> 
  </prov-body> 
 </mainbody> 
</xml> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:25:01.233

**这种转变**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kRefByCite"
          match="metadata/*" use="@cite" />

     <xsl:key name="kRefByCite1"
          match="*[@context='1-cumulative']/metadata/*"
          use="@cite" />

     <xsl:key name="kRefByCite3"
          match="*[@context='3-cumulative']/metadata/*"
          use="@cite" />

     <xsl:template match="node()|@*">
      <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
     </xsl:template>

     <xsl:template match=
       "text[not(preceding-sibling::text[1])
           and
             preceding::num
                  [key('kRefByCite', @cite)]]">
       <text>
         <xsl:apply-templates/>
         <xsl:for-each select=
           "key('kRefByCite1', (.|..)/preceding-sibling::num/@cite)">
           <xsl:sort select="@relevance"/>

           <xsl:value-of select="../../body/para/text"/>
         </xsl:for-each>
       </text>
       <xsl:for-each select=
         "key('kRefByCite3', (.|..)/preceding-sibling::num/@cite)">
         <xsl:sort select="@relevance"/>

         <text><xsl:value-of select="../../body/para/text"/></text>
       </xsl:for-each>

     </xsl:template>

     <xsl:template match=
       "node()
          [parent::* and not(ancestor-or-self::mainbody)]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<xml>
    <object context="3-cumulative" >
      <metadata>
        <ref cite="4.2" relevance="first.2"/>
      </metadata>
    <body>
       <para>
          <text>
                 applicable on and after December 14,2007.
          </text>
       </para>
     </body>
    </object>

     <object context="1-cumulative" >
      <metadata>
        <ref cite="4.2" relevance="first.1"/>
      </metadata>
    <body>
       <para>
         <text>
           applicable on and after December 14,2006.
         </text>
       </para>
    </body>
     </object>

       <object context="1-cumulative" >
       <metadata>
          <related-content-ref cite="5 annuity" relevance="first.1"/>
       </metadata>
      <body>
        <para>
          <text>
             applicable on and after December 14, 2008
          </text>
         </para>
       </body>
      </object>

       <mainbody>
            <num cite="4.2">4.2</num>
            <num cite="2" type="para">2</num>
            <heading>Stock exchanges</heading>
            <prov-body>
              <text>
                  Notwithstanding the provisions of a convention ... as defined in the
                  <italic>Income Tax Act</italic>.
              </text>
                <prov>
                  <num cite="1 annuity"/>
                  <num cite="5 annuity"/>
                  <num cite="3 annuity"/>

                     <heading>“annuity”&lt;/heading>
                    <text>
                    <term>“annuity”&lt;/term>does not include any pension payment ...
                    </text>
                   <text>
                     any pension payment ...
                   </text>
               </prov>
           </prov-body>
          </mainbody>
</xml> 
```

**产生想要的正确结果：**

```
<xml>
   <mainbody>
      <num cite="4.2">4.2</num>
      <num cite="2" type="para">2</num>
      <heading>Stock exchanges</heading>
      <prov-body>
         <text>
                  Notwithstanding the provisions of a convention ... as defined in the
                  <italic>Income Tax Act</italic>.

           applicable on and after December 14,2006.
         </text>
         <text>
                 applicable on and after December 14,2007.
          </text>
         <prov>
            <num cite="1 annuity"/>
            <num cite="5 annuity"/>
            <num cite="3 annuity"/>
            <heading>“annuity”&lt;/heading>
            <text>
               <term>“annuity”&lt;/term>does not include any pension payment ...

             applicable on and after December 14, 2008
          </text>
            <text>
                     any pension payment ...
                   </text>
         </prov>
      </prov-body>
   </mainbody>
</xml> 
```

# javascript - 使用javascript将日期字段插入sqlite数据库失败

> ID：10759836
> 
> 赞同：1
> 
> 时间：2012-05-25T18:46:03.783
> 
> 标签：javascript, sqlite, jquery-mobile, datepicker

sqlite数据库的日期字段中没有插入值

```
<label for="DateDebut">Date Debut</label>
<input name="DateDebut" id="DateDebut" type="date" data-role="datebox"   data-  
options='{"mode": "calbox"}' /> 
```

和插入代码

```
var DateDebut = document.getElementById('DateDebut'); 
function insertRecord() {
    db.transaction(function(tx) {
      tx.executeSql(insertStatement, [nom.value, DateDebut.value, DateFin.value, 
      Message.value], loadAndReset, onError);
    });
  } 
```

在数据库中插入记录时，日期值保持为空，因为没有输入日期。

# java - java中字符串的可重用性？

> ID：10759844
> 
> 赞同：12
> 
> 时间：2012-05-25T18:47:00.603
> 
> 标签：java

```
String h = "hi"; 
```

在这里，我们将字符串 h 引用到字符串文字 hi。JVM 有一个字符串文字池来存储字符串文字，因此我们可以重用字符串，因为它们是不可变的......

当我们说`reusable,`这个的确切含义是什么？我们在谈论`address`吗？每次都是从同一个地址挑选出来的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T19:05:59.517

是的，为了使事情更简单，您可以将其视为从同一地址进行选择，但更准确地说，变量持有相同的*引用*，即 JVM 在映射到对象的正确内存地址时使用的数字/对象 ID *（*对象可以在内存中移动但仍会有相同的参考）。

您可以使用如下代码对其进行测试：

```
String w1 = "word";
String w2 = "word";
String b = new String("word"); // explicitly created String (by `new` operator) 
                               // won't be placed in string pool automatically
System.out.println(w1 == w2);  // true  -> variables hold same reference
System.out.println(w1 == b);   // false -> variable hold different references,
                               // so they represent different objects
b = b.intern(); // checks if pool contains this string, if not puts this string in pool, 
                // then returns reference of string from pool and stores it in `b` variable
System.out.println(w1 == b);   // true  -> now b holds same reference as w1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T18:49:53.990

如果是

```
String h = "hi";
String i = "hi";
String j = new String("hi"); 
```

根据 JDK 的版本，编译器**可能会**执行所谓的[**实习**](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)，并创建表示 的字节数据的单个实例，`"hi"`并在 to 变量引用之间重用它。在最新的规范中，所有[字符串**文字**](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.10.5)都被嵌入到永久代的字符串池中。

在最后一条语句中使用`new`关键字将创建一个与单独对象完全相同的字节的**新实例。**

**在运行时**创建的字符串对象**不在**字符串池中，除非`.intern()`对其调用。[这通常是不需要的，并且可能会导致问题，很少有任何显着的好处。](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)

```
h == i; // true
h == j; // false
j.intern();
h == j; // true 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T18:49:58.563

这意味着如果 20 个对象使用相同的文字字符串：

```
private String h = "hi"; 
```

所有这些对象实际上都会引用内存中的同一个 String 实例。没关系，因为它是不可变的，所以不可能改变 String 的内容。因此，相同的实例可以在对象之间毫无问题地共享。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T18:50:24.343

JVM 内部有一个`String`文字池，其中包含`String`在程序生命周期内创建的所有 s。可重用意味着，当您想使用`String`具有完全相同字符和编码的另一个对象时`String`，不会创建新对象。相反，该引用将指向`String`字符串池中已经存在的。这称为实习。

可以这样做是因为`String`s 在 Java 中是不可变的。

这样做的原因是为了避免创建新`String`对象的成本。

在此处查看有关字符串文字池是什么以及它如何工作的更多详细信息：[http ://www.xyzws.com/Javafaq/what-is-string-literal-pool/3](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3)

另外，看看这个问题：[我不应该在 Java 中执行 `String s = new String("a new string");`，即使使用自动字符串实习？](https://stackoverflow.com/questions/10666537/shouldnt-i-do-string-s-new-stringa-new-string-in-java-even-with-autom)

# c++ - 透明地接受事件

> ID：10759845
> 
> 赞同：1
> 
> 时间：2012-05-25T18:47:09.773
> 
> 标签：c++, qt

我有两个小部件**A**和**B**。**B**使用网格布局直接位于**A**之上。

```
+------------------------
| QGraphicsView A
|
|   +--------------------
|   |QGraphicsView B
|   |
|   |
|   | 
```

**A**需要接受所有鼠标事件（移动、按下、释放等）。**B**需要透明地只接受鼠标移动。如何让**B**只接受鼠标移动，然后将所有其他事件（包括鼠标移动）传递给**A**（对 A 一无所知）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:11:15.363

一种方法是让父级在子级上安装一个 EventFilter 并执行您想要吞下或通过哪些事件的逻辑。

看看这里：http: [//qt-project.org/doc/qt-4.8/qobject.html#installEventFilter](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)

# objective-c - 在 UISearchBar 中搜索第二个单词

> ID：10759847
> 
> 赞同：2
> 
> 时间：2012-05-25T18:47:17.133
> 
> 标签：objective-c, xcode, uitableview, uisearchbar

我创建了一个带有 tableview + searchbar 的视图。如果搜索字符串中的第一个单词，它会完美运行！不幸的是，如果在字符串中搜索不同的单词，它就不起作用。因此，如果我要搜索文本：bal.

我会查看以下字符串：green bal。它什么也找不到。

我目前正在使用以下代码将搜索栏文本与数据进行比较：

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{

[self.filteredListContent removeAllObjects]; // First clear the filtered array.

for (Product *product in self.listContent)
{

    NSComparisonResult result = [product.name compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    if (result == NSOrderedSame)
    {
        [self.filteredListContent product];
    }
}
NSMutableSet *tempSet = [NSMutableSet setWithArray:self.filteredListContent];
self.filteredListContent = [NSMutableArray arrayWithArray:[tempSet allObjects]];
} 
```

我该如何解决这个问题？

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:06:58.223

`compare:options:range:`此代码使用以下方法查找完全匹配（不区分大小写和变音符号）`NSString`：

```
NSComparisonResult result = [product.name compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
if (result == NSOrderedSame)
{
    [self.filteredListContent product];
} 
```

鉴于您的问题描述，您希望确定一个字符串包含在另一个字符串中。改用以下`rangeOfString:options:`方法`NSString`：

```
NSRange range = [product.name rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
if (range.length > 0)
{
    [self.filteredListContent product];
} 
```

# uitableview - 基于核心数据属性的 UITableView 部分

> ID：10759852
> 
> 赞同：0
> 
> 时间：2012-05-25T18:47:39.433
> 
> 标签：uitableview, core-data, attributes, nsfetchrequest

在我的应用程序中，我有一个由 Core Data 填充的 UITableView，目前是一个名为“name”的字符串。我希望能够将这个 tableview 分成 3 个部分，可以命名为 0、1 和 2，或 1、2 和 3。名称并不重要。我目前真的不知道如何实现这一点。我的数据模型中有一个名为“term”的新属性，这是我希望这些部分所依据的。这最好是整数吗？

我是iOS开发的新手，所以如果有人知道如何做到这一点，我将不胜感激。

这是我当前的代码，它使用“名称”属性填充表格视图。

```
- (void)setupFetchedResultsController
{
    //1 - Entity
    NSString *entityName = @"Task"; // Put your entity name here
    NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

    //2 Request
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

    // 3 - Filter
    //request.predicate = [NSPredicate predicateWithFormat:@"Task.name = name"];

    // 4 - Sort
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name"
} 
```

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:36:11.857

我不明白你是否使用a `NSFetchedResultsController`。

在第一种情况下（您使用它），您可以利用它设置`term`为划分部分的属性。当您创建一个`NSFetchedResultsController`with时，`– initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:`您可以将`@"term"`其作为参数传递给`sectionNameKeyPath`.

在第二种情况下，我真的建议在处理`NSFetchedResultsController`s时处理`UITableView`s。设置 a `NSFetchedResultsController`确实是示例，因为您需要创建它并将其传递给`NSFetchRequest`. 你创建的那个没问题。

有关更多信息，我建议阅读[core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)以及NSFetchedResultsController[类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。

希望能帮助到你。

# jsf - 配置 Tomcat 7 + JSF 2 + 焊接

> ID：10759855
> 
> 赞同：1
> 
> 时间：2012-05-25T18:47:42.827
> 
> 标签：jsf, tomcat7, cdi

我正在尝试使用 tomcat 7.0.27 + JSF 2.1.7 + Weld 1.1.8 创建一个新项目

在我尝试打开页面时将 Weld 添加到项目后，出现以下异常：

```
java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config
at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:345)
at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

如果我将 JSTL 1.2 添加到项目中，JSF 会停止渲染（如果我在浏览器上打开页面源代码，则它与 IDE 相同）。

有什么想法吗？

非常感谢，菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:59:21.427

您需要确保在 WEB-INF 中有 faces-config.xml

# ruby-on-rails - ruby on rails + heroku + mongoid + devise = 未初始化的常量用户（NameError）

> ID：10759857
> 
> 赞同：1
> 
> 时间：2012-05-25T18:47:56.477
> 
> 标签：ruby-on-rails, activerecord, heroku, devise, mongoid

将我的应用程序部署到 Heroku 时出现错误。在寻找解决方案 3 天后，它看起来像是一个常见错误，但我还没有找到解决方案。我的应用程序在我正在运行的计算机上运行良好：

*   带有红宝石的 Mac OSX 10.7.3
*   ruby ruby​​ 1.9.2p320（2012-04-20 修订版 35421）[x86_64-darwin11.3.0]
*   rubygem 1.3.7.1（也用 1.8.24 测试过）

我的 Heroky 应用程序位于带有插件的 cedar 堆栈上：MongoHQ MongoHQ Free，Shared Database 5MB。

*   *heroku run gem --version*给出：1.3.7
*   *heroku run ruby​​ --version*给出：ruby 1.9.2p290（2011-07-09 修订版 32553）[x86_64-linux]

当我在 Herky 上推送我的应用程序时遇到的错误是：

```
lib/active_support/inflector/methods.rb:229:in `block in constantize': uninitialized constant User (NameError) 
```

更多信息：我将 mongoid 与 mongohq 和设计一起使用。我相信这来自设计，因为我在我的用户模型上使用它。请注意，我的 app/models/User.rb 文件已提交，并且我的应用程序中的 User 和 Users 之间没有拼写错误。我的 config/application.rb 文件中不需要“active_record/railtie”，因为我使用的是 mongoid。因此我的用户模型没有扩展 ActiveRecord::Base，但这一定很好。

我真的希望有人可以帮助我，因为我在这个问题上停留了太久，而且我对 Heroku 完全陌生 :) 非常感谢你！

**这是我的应用程序的 Gemfile：**

```
source "http://rubygems.org"

gem "rails", "3.2.3"

gem "bundler"

gem "rake", "0.9.2.2"

group :production do
  gem "thin", "~> 1.3"
end

# DATABASE
gem "mongo",    "~> 1.6"
gem "bson_ext", "~> 1.6"
gem "mongoid",  "~> 2.4"
gem "mongoid_token", "~> 1.0"

# FORMS
gem "dynamic_form", "~> 1.1"

# FILE UPLOAD
gem "mini_magick", "~> 3.4"
gem "carrierwave", "~> 0.6"
gem "carrierwave-mongoid", :require => "carrierwave/mongoid"

# ASSETS
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem "sass-rails",   "~> 3.2"
  gem "coffee-rails", "~> 3.2"
  gem "uglifier",     "~> 1.2"
end

# JAVASCRIPT
gem "jquery-rails", "~> 2.0"

# PAGINATION
gem "kaminari", "~> 0.13"

# AUTHORISATION
gem "devise", "~> 2.1"
gem "cancan", "~> 1.6" 
```

**以下是 Heroku 的日志：**

```
2012-05-25T18:24:23+00:00 heroku[web.1]: State changed from created to starting
2012-05-25T18:24:25+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 33048`
2012-05-25T18:24:30+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-05-25T18:24:30+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-05-25T18:24:32+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in `block in constantize': uninitialized constant User (NameError)
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `each'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `constantize'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise.rb:252:in `get'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/mapping.rb:77:in `to'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/mapping.rb:72:in `modules'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/mapping.rb:89:in `routes'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/mapping.rb:66:in `initialize'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/mapping.rb:156:in `default_used_route'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise.rb:286:in `new'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/rails/routes.rb:207:in `block in devise_for'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/rails/routes.rb:206:in `each'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise.rb:286:in `add_mapping'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/rails/routes.rb:206:in `devise_for'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/config/routes.rb:3:in `block in <top (required)>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/config/routes.rb:1:in `<top (required)>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:260:in `draw'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `each'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `load_paths'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:16:in `reload!'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.0/lib/devise/rails.rb:14:in `block in <class:Engine>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:108:in `reload_routes!'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:34:in `call'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:42:in `each'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:52:in `block in <module:Finisher>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
2012-05-25T18:24:32+00:00 app[web.1]:   from config.ru:3:in `require'
2012-05-25T18:24:32+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-05-25T18:24:32+00:00 app[web.1]:   from config.ru:1:in `new'
2012-05-25T18:24:32+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `eval'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:71:in `start'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `load'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-05-25T18:24:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-05-25T18:24:33+00:00 heroku[web.1]: Process exited with status 1
2012-05-25T18:24:33+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:18:13.410

解决方案：如果您的用户模型在`app/model/User.rb`然后重命名此文件，`app/model/user.rb`使文件为小写。

# facebook - Facebook PHP SDK getUser() 不返回任何内容

> ID：10759869
> 
> 赞同：0
> 
> 时间：2012-05-25T18:49:22.833
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook PHP SDK 使用从 Facebook API 提取的数据注册新用户。

当我使用下面的代码访问页面时，`echo $uid`没有返回任何内容。不是`0`。不是`null`。根本不值一提。

简化的代码如下所示：

```
$config = array();
$config['appId'] = $appid;
$config['secret'] = $appsecret;
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);
$uid = $facebook->getUser();

$params = array(
  'scope' => 'read_stream, friends_likes',
  'redirect_uri' => 'http://www.website.com',
  'display' => 'page', //could be popup
  'cookie' => true,
);

$loginUrl = $facebook->getLoginUrl($params);

echo 'uid = '.$uid;

    if($uid) {
        //SHOW SOMETHIN'
        echo 'AUTHORIZED!';

        //CREATE NEW USER...
        //SIGN IN NEWLY CREATED USER...

    } else {
        //PROMPT TO AUTHORIZE
        echo '<a href="' . $loginUrl . '">SIGN IN WITH FACEBOOK.</a>';

    }; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:34:35.640

`get_permalink($post->ID)`应该是罪魁祸首。

`Site URL`它与您在应用程序设置中指定的相同吗？

（我的小 wp 知识说，这个 url 将是动态的）

*出于安全原因，facebook`Site URL`仅重定向到任何 url，而不仅仅是任何 url。*

# c# - 使用gidview的所有格式将gridview导出到excel

> ID：10759870
> 
> 赞同：1
> 
> 时间：2012-05-25T18:49:23.063
> 
> 标签：c#, asp.net

我需要将 gidview 导出到 excel 并应用所有 gridview 的格式。我的 gridview 中没有任何控件，所有样式都已应用。有没有可用的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:01:44.757

我认为这是您最好和最简单的选择：[http ://www.gemboxsoftware.com/spreadsheet/overview](http://www.gemboxsoftware.com/spreadsheet/overview)

```
var bindingSource = (BindingSource)this.peopleDataGridView.DataSource;
var dataTable = ((DataView)bindingSource.List).Table;
var ef = new ExcelFile();
var ws = ef.Worksheets.Add(dataTable.TableName);
// Insert data table in worksheet, starting from worksheet's first row and column and    include column headers
ws.InsertDataTable(dataTable, 0, 0, true);

foreach(ExcelCell cell in ws.GetUsedCellRange(true))
   cell.Style.FillPattern.SetSolid(Color.Red);
ef.SaveXls(dataTable.TableName + ".xls"); 
```

另一种选择是使用[http://www.completit.com/Portfolio/DGVE/Screenshots.aspx](http://www.completit.com/Portfolio/DGVE/Screenshots.aspx)

[新增 1 个] 如果您想与 EXCEL 一起处理 HTML 或其他格式的数据，这个将 DGV 转换为 XML/XSL 是最好的。 [http://www.carlosag.net/Tools/ExcelXmlWriter/](http://www.carlosag.net/Tools/ExcelXmlWriter/)

以上所有内容都是免费的，并且可以将格式从 DGV 导出到 EXCEL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:05:15.040

我不确定你的要求，但你可以试试这个控件：

[导出到 Excel](http://exporttoexcel.codeplex.com/)

您需要将一个名为 ApplyStyleInExcel 的属性设置为 true。

# iphone - 如何让图像在我双击的地方放大？

> ID：10759872
> 
> 赞同：5
> 
> 时间：2012-05-25T18:49:45.720
> 
> 标签：iphone, ios, uiscrollview, zooming, center

如果我双击它，我已经设法让我的应用程序放大我的图像，但它并没有放大我双击的地方！我希望图像以我双击的坐标为中心！

我的代码：

在 .h 文件中：

```
 - (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer; 
```

在 .m 文件中：

```
 UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];

[doubleTap setNumberOfTapsRequired:2];

[self.scroll addGestureRecognizer:doubleTap];

- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer {  

    if(self.scroll.zoomScale > scroll.minimumZoomScale)
        [self.scroll setZoomScale:scroll.minimumZoomScale animated:YES]; 
    else 
        [self.scroll setZoomScale:1.6 animated:YES]; 
 } 
```

接下来我该怎么办？

提前致谢！

/一个菜鸟

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-06T22:55:01.280

这是我旧项目的一个片段。在您的-method中
添加`UITapGestureRecognizer`某处：`init`

```
UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(doubleTapRecognized:)];
doubleTap.numberOfTapsRequired = 2;
[self addGestureRecognizer:doubleTap];
[doubleTap release]; 
```

在您视图中的某处双击时会触发此操作。

```
- (void)doubleTapRecognized:(UITapGestureRecognizer*)recognizer {
    [self zoomToPoint:[recognizer locationInView:content]];
}

- (void)zoomToPoint:(CGPoint)location {
    float zoomScaleBefore = self.zoomScale;

    if (location.x<=0) location.x = 1;
    if (location.y<=0) location.y = 1;
    if (location.x>=content.bounds.size.width) location.x = content.bounds.size.width-1;
    if (location.y>=content.bounds.size.height) location.y = content.bounds.size.height-1;

    float percentX = location.x/content.bounds.size.width;
    float percentY = location.y/content.bounds.size.height;

    [self setZoomScale:10.0 animated:YES];

    float pox = (percentX*self.contentSize.width)-(self.frame.size.width/2);
    float poy = (percentY*self.contentSize.height)-(self.frame.size.height/2);

    if (pox<=0) pox = 1;
    if (poy<=0) poy = 1;

    [self scrollRectToVisible:
     CGRectMake(pox, poy, self.frame.size.width, self.frame.size.height)
                     animated:(self.zoomScale == zoomScaleBefore)];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-10T12:03:59.477

**双击放大的**Swift 3.0版本：****

 **```
let tapRecognizer = UITapGestureRecognizer(target: self, action: #selector(onDoubleTap(gestureRecognizer:)))
tapRecognizer.numberOfTapsRequired = 2
view.addGestureRecognizer(tapRecognizer) 
```

...

```
func onDoubleTap(gestureRecognizer: UITapGestureRecognizer) {
    let scale = min(scrollView.zoomScale * 2, scrollView.maximumZoomScale)

    if scale != scrollView.zoomScale {
        let point = gestureRecognizer.location(in: imageView)

        let scrollSize = scrollView.frame.size
        let size = CGSize(width: scrollSize.width / scale,
                          height: scrollSize.height / scale)
        let origin = CGPoint(x: point.x - size.width / 2,
                             y: point.y - size.height / 2)
        scrollView.zoom(to:CGRect(origin: origin, size: size), animated: true)
        print(CGRect(origin: origin, size: size))
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T18:57:24.090

您正在寻找`-locationInView:`. 它会在指定视图中为您提供触摸发生的点。此时，您可以调整视图以使该点成为中心。**

# javascript - Jquery 与 Chrome 的不兼容问题

> ID：10759873
> 
> 赞同：1
> 
> 时间：2012-05-25T18:49:49.617
> 
> 标签：javascript, jquery, html, google-chrome, incompatibility

我遇到了头痛的情况。当我检查选择选项（05/30/2012 EQ）时，我无法单击选择按钮来提交操作，但我应该能够单击它。这个问题发生在 Chrome 和 IE 上，但对 FF 来说很好。我认为这是一个 Jquery 不兼容问题。我附上了我的一些代码如下：

```
 function $recalcSelection($checkbox) {
    $selectActionList.find("option").each(function() {
      $optionLength = $table.find("td.actioncolumn input:checked").length;
      if($optionLength <= 0) {
        $(this).attr("disabled", true);
      } else if($optionLength == 1) {
        $(this).attr("disabled", false);
      } else {
        if(
          $(this).val() == "editAppointment" ||
          $(this).val() == "copyAppointment" ||
          $(this).val() == "viewShowList" ||
          $(this).val() == "viewScheduledTimes")
        {
          $(this).attr("disabled", true);
        } else {
          $(this).attr("disabled", false);
        }
      }
    });

    if($selectActionList.find("option:selected").attr('disabled')) {
      $selectActionList.find("option:enabled").eq(0).attr("selected", true);
    }

    if($selectActionList.find("option:enabled").length <= 0) {
      $selectActionButton.attr("disabled", true);
    } else {
      $selectActionButton.attr("disabled", false);
    }
  } 
```

$selectActionButton 是提交按钮，$selectactionlist 是选择列表。我试图在 Chrome 中打印 ($selectActionList.find("option:enabled").length，它是 0。但是当我在 FF 中打印它时，它是 7。谁能帮我找出原因？我会的欣赏它。谢谢

![在此处输入图像描述](../Images/406df2038e8f3dcc4eccb353c9078047.png)

我附上了一些 HTML 表格，如下所示：

```
<table id="appointmentTable">
  <thead>
    <tr class="headerrow">
      <th class="actioncolumn"></th>
      <th class="datecolumn">Date</th>
      <th class="earliesttimecolumn">Start Time</th>

      <th class="clientnamecolumn">Client</th>
      <th class="locationcolumn">Location</th>
      <th class="roomcolumn">Rooms</th>
      <th class="typecolumn">Type</th>
      <th class="filledtimescolumn">Filled Times</th>
    </tr>

  </thead>

  <tbody> 

      <tr class=" hiddenrow" appointmentid="15166">
        <td class="actioncolumn"><input type="checkbox" name="appointmentids[]" value="15166" /></td>
        <td class="datecolumn"><span title="1338094800"></span><a href="?action=viewDailyUsers&date=05/27/2012&clients[]=8" title="View Appointments on 05/27/2012">05/27/2012</a></td>
        <td class="earliesttimecolumn"></td>
        <td class="clientnamecolumn">CPH</td>
        <td class="locationcolumn">New Location</td>
        <td class="roomcolumn"></td>

        <td class="typecolumn">Screening</td>
        <td class="filledtimescolumn">0/0</td>
      </tr>
   </tbody>

  <tfoot>
    <tr class="actionrow">
      <td colspan="2" class="actioncolumn"></td>
      <td colspan="6">With Selected:</td>
    </tr>
    <tr class="actionrow">
                  <td colspan="2" class="actioncolumn">

        <input type="submit" name="button" value="Create New" />
      </td>
                  <td colspan="6">
        <select id="selectactionlist" name="selectaction">
                          <optgroup label="Adjustments">
            <option value="editAppointment">Edit</option>
            <option value="copyAppointment">Copy</option>
            <option value="deleteAppointment">Delete</option>

          </optgroup>
                          <optgroup label="Lists">
                              <option value="viewShowList">Show/No Show List</option>
                              <option value="viewScheduledTimes">Schedule List</option>
          </optgroup>
                          <optgroup label="Hidden">
            <option value="hideAppointment">Hide</option>

            <option value="showAppointment">Show</option>
          </optgroup>
                        </select>
        <input id="selectactionbutton" type="submit" name="button" value="Select" />
      </td>
    </tr>
  </tfoot> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:00:45.623

而不是执行以下操作：

```
 if (foo) {
      $(this).attr("disabled", true);
    } else {
      $(this).attr("disabled", false);
    } 
```

您应该添加和删除 disabled 属性，因为有时只是 disabled 属性的存在可以使其禁用（可能是 chrome 保持禁用它的原因）。试试这个：

```
if (foo) {
    $(this).attr("disabled", true);
} else {
    $(this).removeAttr("disabled");
} 
```

**编辑：试试这个确切的代码**

```
function $recalcSelection($checkbox) {
    $selectActionList.find("option").each(function() {
        $optionLength = $table.find("td.actioncolumn input:checked").length;
        if($optionLength <= 0) {
            $(this).attr("disabled", true);
        } else if($optionLength == 1) {
            $(this).removeAttr("disabled");
        } else {
            if($(this).val() == "editAppointment" ||
                $(this).val() == "copyAppointment" ||
                $(this).val() == "viewShowList" ||
                $(this).val() == "viewScheduledTimes")
            {
                $(this).attr("disabled", true);
            } else {
                $(this).removeAttr("disabled");
            }
        }
    });

    if($selectActionList.find("option:selected").attr('disabled') != "true") {
        $selectActionList.find("option").filter(function () { return $(this).attr("disabled") != null}).eq(0).attr("selected", true);
    }

    if($selectActionList.find("option").filter(function () { return $(this).attr("disabled") != null}).length <= 0) {
        $selectActionButton.attr("disabled", true);
    } else {
        $selectActionButton.removeAttr("disabled");
    }
}​ 
```

# ruby-on-rails - Rails 3：属性没有方法错误

> ID：10759879
> 
> 赞同：0
> 
> 时间：2012-05-25T18:49:59.777
> 
> 标签：ruby-on-rails

我收到以下错误消息：

```
NoMethodError in UploadStepsController#update

undefined method `attributes=' for #<ActiveRecord::Relation:0x00000104775c40>

app/controllers/upload_steps_controller.rb:12:in `update' 
```

我目前正在构建一个允许用户使用 Wicked Wizard gem 上传文件的向导。我在这里想念什么？

**upload_steps_controller.rb**

```
class UploadStepsController < ApplicationController
include Wicked::Wizard
steps :audience, :rewards, :review

def show
    @upload = current_user.uploads
    render_wizard
end

def update
    @upload = current_user.uploads
    @upload.attributes = params[:upload]
    render_wizard @upload
end

end 
```

**上传.rb**

```
class Upload < ActiveRecord::Base
attr_accessible :title, :tagline, :category, :genre, :length, :description

belongs_to :user

validates :title, presence: true
validates :tagline, presence: true
validates :category, presence: true
validates :genre, presence: true
validates :length, presence: true
validates :description, presence: true
validates :user_id, presence: true

default_scope order: 'uploads.created_at DESC'
end 
```

**新错误**

```
NoMethodError in UploadStepsController#update
undefined method `save' for #<ActiveRecord::Relation:0x0000010159c098>

app/controllers/upload_steps_controller.rb:13:in `update' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:30:49.873

current_user.uploads 是 AREL 对象。因此，您必须指定要更新的上传内容。例如第一个用户上传。

```
current_user.uploads.first.update_attributes(params[:upload]) 
```

或者可能

```
@upload = current_user.uploads.find(params[:upload].delete(:id))
@upload.update_attributes(params[:upload]) 
```

或所有记录

```
@upload = current_user.uploads
@upload.update_all(params[:upload]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:07:29.367

@upload = current_user.uploads，它为您提供了上传对象的数组，但属性方法适用于单个对象。所以你必须应用每种方法

```
@uploads = current_user.uploads
@uploads.each do | upload|
  upload.update_attributes(params[:upload])
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:59:34.537

试试这个：

```
@upload.update_attributes(params[:upload]) 
```

# javascript - Datatables sDom 挑战将新元素添加到表格的左下角

> ID：10759882
> 
> 赞同：7
> 
> 时间：2012-05-25T18:50:07.443
> 
> 标签：javascript, jquery, jquery-datatables

我想在表格底部的表格中添加一个“刷新”按钮。但是我刚开始使用数据表，它有点令人困惑，就像“sDom”部分一样，它说我可以通过这种方式做到这一点，但描述充其量是模糊的。

```
"sDom": '<"top"i>rt<"bottom"flp><"clear">' 
```

是 datatables.net 的例子，但我不知道如何做出正面或反面，我想做的只是一件简单的事情。

或者是否有一个“sDom”之外的东西更适合我想做的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T22:12:10.660

这是一个修改后的实时示例`sDom`。

[http://live.datatables.net/onaqul/edit#javascript,html,live](http://live.datatables.net/onaqul/edit#javascript,html,live)

在这里，我们使用 structrue 注入一个`div`被调用`<div id="refresh"></div>`的对象`<"#refresh">`。

```
 $('#example').dataTable({
        "sDom": '<"top"i>rt<"bottom"<"#refresh">flp><"clear">'
      }); 
```

如果您检查示例中生成的 dom，您可以看到`<div id="refresh"></div>`被插入到`<div class="bottom"></div>`.

我认为很大程度上取决于（1）您的特定表格如何布置其页脚元素，（2）您决定使用[sDom](http://datatables.net/usage/options#sDom)注入特定元素的位置，以及（3）如何使用`CSS`.

或者，您可以在 datatables 环境之外创建一个按钮，但使用 jquery 将您的按钮附加或预先添加到 datatables 创建的 dom 元素之一。

希望这是一个有用的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T22:02:38.980

我同意您的观点，即 DataTables`'sDom'`属性令人困惑。就我个人而言，我只是设置`sDom`equal to `'t'`，它只创建表，然后我使用 jQuery 或其他方法在 DataTables 代码之外添加任何按钮或你有什么。没有太多的答案，但如果我遇到你的情况并想做一些简单的事情，比如添加一个按钮，这就是我会做的事情。

# spring - 将列表存储/序列化为消息 Spring AMQP

> ID：10759884
> 
> 赞同：0
> 
> 时间：2012-05-25T18:50:20.037
> 
> 标签：spring, serialization, message-queue, messaging, spring-amqp

我是使用 RabbitMQ 的 Spring AMQP 的新手。我知道这个问题解决了一个更广泛的问题。我想将对象列表存储到可以发送给消费者的消息中。谁能提供一个简单的解决方案来解决这个问题？

我知道序列化可以成为一种解决方案，但对于我正在使用的简单应用程序来说，这将是一种过度杀伤力。消息本质上是异步的。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:24:00.200

AMQP 只支持一种类型的消息——二进制（字节）——这意味着你必须序列化你的对象。

不过，您可以选择序列化的类型——例如 JSON、XML 或 Java 序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T16:01:37.310

您可以使用`MessageConverter`，请参阅 Spring RabbitMQ 文档： [http ://static.springsource.org/spring-amqp/docs/1.1.x/reference/htmlsingle/#d4e293](http://static.springsource.org/spring-amqp/docs/1.1.x/reference/htmlsingle/#d4e293)

有一个`JsonMessageConverter`可能是您正在寻找的。

我建议不要使用标准的 Java 序列化和 . `SimpleMessageConverter`，因为那样你的实现将绑定到 Java，这会破坏 AMQPs 协议概念的整个想法。

从文档中：

```
With AMQP being a wire-level protocol, it would be unfortunate to lose
much of that advantage with such restrictions. 
```

这是取自文档的代码示例：

```
<bean class="org.springframework.amqp.rabbit.core.RabbitTemplate">
    <property name="connectionFactory" ref="rabbitConnectionFactory"/>
    <property name="messageConverter">
        <bean class="org.springframework.amqp.support.converter.JsonMessageConverter"/>
    </property>
</bean> 
```

设置完成后，应该可以将列表对象序列化/反序列化为 JSON 并返回。

# php - 处理上传提交时如何创建月->日上传路径目录

> ID：10759888
> 
> 赞同：1
> 
> 时间：2012-05-25T18:50:34.410
> 
> 标签：php, directory

创建文件夹和子文件夹作为上传路径的简单方法是什么？基于女巫日，例如：

```
-files
 -2012 //year
   -01 //month
     +01 //day
     +02
     +03
     .
     .
     .
     +29
     +30
   +02 //month
   +03
   +04
   +05
   +06
   +07
 +2013
 .
 .
 . 
```

有没有任何类或函数来做这个制作目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:57:06.030

您可以使用`mkdir()`. 它具有递归创建文件夹的选项。

然后只需使用您想要的日期构建路径，并确保添加`true`到函数中。

意思是：

```
mkdir("/2012/5/25", 0755, true); 
```

要构建您的日期路径，您需要使用 PHP 方法`date()`，为了进一步阅读和示例，请阅读[文档](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T19:07:29.563

```
$base_dir = '/path/to/your/dir';
$new_dir = $base_dir.date('/Y/m/d/');
if(!file_exists($new_dir) AND is_writable($base_dir)) {
    mkdir($new_dir, 0755, true)
} 
```

# css - JQuery Mobile、Bootstrap 和 CSS3 媒体查询，选择什么组合

> ID：10759899
> 
> 赞同：1
> 
> 时间：2012-05-25T18:51:50.037
> 
> 标签：css, jquery-mobile, twitter-bootstrap, responsive-design

JQuery Mobile、Bootstrap 和 CSS3 媒体查询

使用什么组合

要拥有一个 UI 框架，我们都应该使用 Bootstrap 之类的东西。要为 Mobile 开发，我需要一些可以轻松在一个 HTML 文件中切换页面的东西，就像 JQuery Mobile (JQM) 一样。要针对不同的屏幕宽度（iPhone、iPad 等）进行开发，我需要根据响应式网页设计规则进行开发。

[根据http://jquerymobile.com/test/docs/api/mediahelpers.html，JQM](http://jquerymobile.com/test/docs/api/mediahelpers.html)不支持媒体查询，其中表示不推荐使用辅助类。它将您指向媒体查询，除非您使用 Bootstrap 或 Skeleton，否则没有好的示例

在寻找将 Bootstrap 与 JQM 结合的信息时，除了在 JQM 中创建 Bootstrap 主题的 Andy Matthews 之外，没有其他好的示例。[http://www.andymatthews.net/read/2012/02/13/New-jQuery-Mobile-theme:-Twitter-Bootstrap](http://www.andymatthews.net/read/2012/02/13/New-jQuery-Mobile-theme:-Twitter-Bootstrap)

那么，使用响应式网页设计开发 WebApps 的常见做法是什么？人们是否忽略了 JQM（并自己做 page-in-html 的东西），还是他们忽略了 Bootstrap（并使用 JQM 中的媒体查询手动进行响应式网页设计）？

或者是否有一个涵盖所有 de WebApp 开发的整体解决方案？（请不要说PhoneGap）

添加一些关于我寻求清晰的信息：我的 index.html 标题中有以下几行：

```
<link rel="stylesheet" href="css/bootstrap.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script> 
```

根据我的意见有点多？或者这是正确的吗？希望任何更有经验的 WebApp 开发人员能够对此有所了解。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T23:00:59.823

当然，您可能可以让 boostrap 和 JQM css 一起玩得很好。并且您拥有它的方式应该在大多数情况下都可以工作，但可能会覆盖一两个类。如果您确实选择了这条路线，请务必制作一个自定义构建的引导程序，其中仅包含您打算使用的引导程序部分。消除尽可能多的开销。

然而，使用 css3 媒体查询并不难。参加媒体查询速成课程将节省您的用户带宽，并确保您的网站尽可能快地加载。

以下是一些关于使用 css3 媒体查询的优秀示例和教程：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

[http://designshack.net/articles/css/20-amazing-examples-of-using-media-queries-for-responsive-web-design](http://designshack.net/articles/css/20-amazing-examples-of-using-media-queries-for-responsive-web-design)

[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

[http://zomigi.com/blog/essential-considerations-for-crafting-quality-media-queries/](http://zomigi.com/blog/essential-considerations-for-crafting-quality-media-queries/)

# java - 在子系统之间共享对象

> ID：10759901
> 
> 赞同：1
> 
> 时间：2012-05-25T18:52:26.473
> 
> 标签：java, spring, jakarta-ee, architecture

在可维护性、可扩展性和性能方面，在许多子系统之间共享数据对象的最佳方法是什么？

我的意思是，我有这个系统有这些层：

```
controller <-> Service (bl) <-> Domain <-> Database 
```

我们可以有 N `controller`，来自 web 或有权访问该`Service`层的 web 服务，所以此时我们有一个 API，N 个子系统将使用它。

我正在使用`ORM`所需的实体，我们在服务和域层内的任何地方处理这些实体。

我的问题是，从我的服务层向子系统共享此数据对象（信息）的最佳方法是什么？

地图？XML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:43:17.367

毫无疑问，目前（2013 年）最好的方法是使用`json`对象通过静态 web 服务进行共享，这些服务可以从 web 应用程序前端和使用 API 的外部客户端使用。

# javascript - HTML5 Canvas 2D 相机并且只在屏幕上渲染东西？

> ID：10759908
> 
> 赞同：1
> 
> 时间：2012-05-25T18:53:06.350
> 
> 标签：javascript, html, canvas

我目前正在开发一款游戏，它非常简单而且非常小。但我真的希望某些级别大于视口的实际大小。例如，我的画布尺寸是 740x440，但我实际上想要一个非常像 2000x440 的关卡。

所以我尝试使用 .translate() 方法模拟一个基本的 2D 相机。它工作正常，但性能非常糟糕，可能是因为我一次渲染所有内容。

.translate() 是要走的路吗？如果是这样，那么渲染仅由相机查看的事物的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:59:44.463

您应该考虑“层”，它们是堆叠在一起的多个画布。这样，每个动画每层都是独立的。

假设您有一个在视口内移动但不移开景观的角色。您可以在一层中放置角色，在另一层中放置风景，并且仅对角色层进行动画处理。这样，只有角色被重绘，而不是整个场景。

# opengl-es - 将纹理坐标与图元大小匹配

> ID：10759911
> 
> 赞同：1
> 
> 时间：2012-05-25T18:53:10.300
> 
> 标签：opengl-es, opengl-es-2.0, textures, texture-mapping

我正在研究字体生成解决方案并面临纹理问题。我正在动态创建纹理图集，然后通过它们的纹理坐标映射每个字母。

这是映射“t”字母的结果：（生成的纹理在顶部，我绘制的在底部）

![问题](../Images/0ff96b5eedd353ef1e96ac1b1fff5a9e.png) 似乎问题在于图元和纹理区域的大小不匹配，这就是 openGL 尝试调整它大小的原因。加载/渲染纹理时，我在 Min 和 Mag 上都使用 GL_NEAREST

这是渲染代码：

```
glBegin(GL_TRIANGLE_STRIP);

float twidth = 7.f / 512.f;
float theight = 11.f / 512.f;

float width = 7.f;
float height = 11.f;

float w = width / 2.f;
float h = height / 2.f;

float x = 100;
float y = 100;

float tx = 135.f / 512.f;
float ty = 0;

glTexCoord2f(tx, ty);
glVertex2f(x - w, y-h);

glTexCoord2f(tx + twidth, ty);
glVertex2f(x + w, y-h);

glTexCoord2f(tx, ty + theight);
glVertex2f(x - w, y+h);

glTexCoord2f(tx + twidth, ty + theight);
glVertex2f(x + w, y+h);

glEnd(); 
```

这是初始化代码：

```
glViewport(0,0,width,height);       

glDisable(GL_LIGHTING);
glDisable(GL_DEPTH_TEST);   

// Set up the GL state.
glClearColor(1, 1, 1, 1);

glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnableClientState(GL_COLOR_ARRAY);

//glDisable(GL_BLEND);
glEnable(GL_BLEND);
glEnable(GL_TEXTURE_2D);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();

glOrtho(0, width, height, 0, -1, 1);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

纹理加载代码：

```
 glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, 512, 512,
        0, GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE, &texBinary[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:07:58.653

您的问题源于一个常见的误解，即 OpenGL 如何处理纹理坐标。

*纹理坐标 0 和 1 不在像素中心！*

纹理实际上是多维采样器，纹理数据为采样器插值提供了支持。现在，这种采样的工作方式对纹理坐标映射施加了一些限制。一个边界条件是，支撑点应该沿维度等距。现在请记住，OpenGL 支持纹理包装。

您的图像基本上是一个光栅，一个样方网格，称为像素。假设您连续获得 8 个像素

```
 |0|1|2|3|4|5|6|7| 
```

纹理坐标为

```
 |0|1|2|3|4|5|6|7|
   ^               ^
  0.0             1.0 
```

这是众所周知的栅栏柱问题。你的像素中心实际上是在纹理坐标

```
(0/8 + 1/8)/2, (1/8 + 2/8)/2, …, (7/8 + 8/8)/2 
```

或更一般的

```
(2i + 1)/2N 
```

但是，在文本渲染的情况下，您很少需要过滤纹理；如果您缩小光栅化字形，结果会看起来很弱，放大光栅化字形会松散或出现锯齿。

如果您想使用固定功能管道，纹理矩形非常适合这种情况。在要求使用着色器（3 和更高版本）的更高版本的 OpenGL 中，有一个特殊的纹理采样函数，它接受绝对纹理像素索引而不是采样器插值坐标。它们中的任何一个都非常适合这项任务。

如果您使用*Vector Textures*或*Distance Maps*，那么您对 ​​glyps 进行采样的方式无论如何都是完全不同的。

# fonts - sas的高级编辑器中如何更改字体？

> ID：10759913
> 
> 赞同：1
> 
> 时间：2012-05-25T18:53:22.783
> 
> 标签：fonts, sas

我的一位同事很久以前就找到了一种方法来做到这一点，但不记得他是如何做到的。查看 sas 代码时应用所有通常的颜色突出显示 - 但是，它显示在 Comic Sans MS（是的，真的）而不是通常的 SAS Monospace 中。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T22:19:49.827

在 SAS Display Manager 系统中，首先将“增强编辑器”窗口设为“活动”。然后使用“工具 -> 选项 -> 增强编辑器...”。单击“外观”选项卡并进行所需的任何更改。单击“确定”，您就完成了。

您可能还需要检查“工具 -> 选项 -> 首选项...”的“常规”选项卡上的“退出时保存设置”复选框；我自己检查过。

# facebook - 跟踪竞争对手 Facebook 喜欢

> ID：10759917
> 
> 赞同：0
> 
> 时间：2012-05-25T18:53:49.817
> 
> 标签：facebook, facebook-like, facebook-page

有没有办法在我不是管理员的 Facebook 粉丝页面上跟踪点赞数？当我是页面的管理员时，我了解如何在页面上使用分析，但为了竞争分析，我想知道是否有任何这种性质的工具。

我想也许有一个 Chrome 插件或类似的东西可以拍摄一个页面的快照来跟踪比赛。关于我应该寻找什么或它是否存在的任何想法？谢谢！

* * *

## 编辑

我使用的是 Google Docs 电子表格： http: [//labs.met.cz/#fbfanscounter](http://labs.met.cz/#fbfanscounter)

该图表通过 Facebook API 绘制“赞”。我想知道是否有办法将其设置为每天为某个 Facebook ID 保存数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:59:47.213

这取决于几件事。首先，如果页面在您的控制之下，那么您可以简单地让 Facebook 提醒您有新活动 - 他们会定期发送有关页面活动的报告。

如果该页面不在您的管理之下，那么您必须考虑该页面是否是公开的。如果它像[可口可乐页面](https://www.facebook.com/cocacola)，那么任何时候都可以通过这个 URL 来请求数据——`https://graph.facebook.com/cocacola`

```
{
   "id": "40796308305",
   "name": "Coca-Cola",
   "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/174560_40796308305_2093137831_s.jpg",
   "link": "http://www.facebook.com/coca-cola",
   "likes": 42106778,
   ...
} 
```

关于将喜欢映射到某些用户 -
这是不可能的。只有页面的管理员才能确切地看到谁“喜欢”了该页面。查看某个页面是否被特定人喜欢的唯一方法是**该**用户是否授予应用程序查看其“喜欢”的权限。

## TL;博士

*   除非您管理该页面，否则您无法看到谁喜欢该页面。
*   您只能判断特定用户是否喜欢某个页面并且需要`user_likes`许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:04:47.127

我找到了我要找的东西。对于其他寻找此答案的人，这是一个很好的链接：

[http://socialfresh.com/facebook-page-competitive-analysis-tools/](http://socialfresh.com/facebook-page-competitive-analysis-tools/)

我正在使用 Wildfire 的，它运行良好。

# macos - 从 Carbon 窗口生成的 Cocoa 窗口由 Mission Control 重新排序

> ID：10759920
> 
> 赞同：2
> 
> 时间：2012-05-25T18:54:14.183
> 
> 标签：macos, cocoa, macos-carbon

我有一个基于 Carbon 的应用程序，我正在迁移到 Cocoa。目前，应用程序的窗口是 Carbon 窗口 (CaW1)。此窗口创建并显示一个 Cocoa 窗口 (CoW1)，后者又创建并显示另一个 Cocoa 窗口 (CoW2)。

当我这样做时，屏幕上所有窗口的顺序，从后到前，如下所示：

牛牛
1牛牛1
牛牛2

CoW2 是顶部窗口，下方是 CoW1，后面是 CaW1。这是我所期望的行为。

现在，当我在 Lion 中启动 Mission Control 并单击我的应用程序时，窗口会重新排序。新的顺序是：

牛牛
1牛牛2
牛牛1

两个 Cocoa 窗口交换了位置。这种行为不是我所期望的。我本来预计 CoW2 会保持在 CoW1 之上。

我试图理解为什么会这样。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:39:35.263

在带有一些 Cocoa 窗口的基于 Carbon 的应用程序中，我养成了将其添加到每个`NSWindowController`子类的习惯：

```
- (void)windowDidBecomeMain:(NSNotification *)notification
{
    ActivateWindow( (WindowRef) [[self window] windowRef], true );
} 
```

它似乎有助于解决一些窗口排序问题，但我不知道它是否有助于解决您的问题。

# algorithm - 在 SSE/AVX 中选择唯一/重复数据删除

> ID：10759922
> 
> 赞同：9
> 
> 时间：2012-05-25T18:54:48.087
> 
> 标签：algorithm, assembly, sse, simd, avx

**问题**
是否有任何计算上可行的方法来使用 x86 SIMD 指令对一组整数进行寄存器内重复数据删除？

**示例**
我们有一个 4 元组寄存器 R1 = {3, 9, 2, 9}，并希望获得寄存器 R2 = {3, 9, 2, NULL}。

**限制**
*稳定性*。保留输入顺序没有意义。

*输出*。但是，任何删除的值/NULL 必须位于寄存器的开头和/或结尾：

*   {null, 1, 2, 3} - 好的
*   {1, 2, null, null} - 好的
*   {null, 2, null, null} - 好的
*   {null, 2, null, 1} - 无效的顺序
*   {null, null, null, null} - 无效输出

如果已知它会产生一种特定的输出格式，这显然是一种奖励。请假设 NULL 有效地表示 0（零）。

*一般性*。必须能够容忍不存在重复，并且在这种情况下产生与输入寄存器等效的输出。

*指令集*。我正在寻找以下任何或全部的解决方案：SSE2-SSSE3；SSE4.x; AVX-AVX2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-03T13:52:54.197

## 解决方案

建议的解决方案总是将所有独特元素放在输出的下部，按第一次出现的顺序排列。较高的部分归零。通过修改LUT很容易改变放置策略：将元素放在更高的部分，或者颠倒它们的顺序。

```
static __m128i *const lookup_hash = (__m128i*) &lookup_hash_chars[0][0];
static inline __m128i deduplicate4_ssse3(__m128i abcd) {
    __m128i bcda = _mm_shuffle_epi32(abcd, _MM_SHUFFLE(0, 3, 2, 1));
    __m128i cdab = _mm_shuffle_epi32(abcd, _MM_SHUFFLE(1, 0, 3, 2));
    uint32_t mask1 = _mm_movemask_epi8(_mm_cmpeq_epi32(abcd, bcda));
    uint32_t mask2 = _mm_movemask_epi8(_mm_cmpeq_epi32(abcd, cdab));
    uint32_t maskFull = (mask2 << 16U) + mask1;
    //Note: minimal perfect hash function here
    uint32_t lutIndex = (maskFull * 0X0044CCCEU) >> 26U;
    __m128i shuf = lookup_hash[lutIndex];
    return _mm_shuffle_epi8(abcd, shuf);
} 
```

完整代码（带测试）可[在此处](http://pastebin.com/B5UxkqzW)获得。

我还通过对 5 个比较器的网络进行排序，然后对连续元素进行串行比较，实现了一个简单的标量解决方案。我在两个处理器上使用 MSVC2013：Core 2 E4700（Allendale，2.6 Ghz）和 Core i7-3770（Ivy Bridge，3.4 Ghz）。以下是 2^29 次调用的时间（以秒为单位）：

```
// Allendale
SSE:    time =  3.340    // ~16.2 cycles (per call)
Scalar: time = 17.218    // ~83.4 cycles (per call)
// Ivy Bridge
SSE:    time =  1.203    // ~ 7.6 cycles (per call)
Scalar: time = 11.673    // ~73.9 cycles (per call) 
```

## 讨论

请注意，结果必须包含两种类型的元素：

1.  来自输入向量的元素，
2.  零。

然而，必要的改组掩码是在运行时确定的，而且方式非常复杂。所有 SSE 指令只能处理立即（即编译时常数）改组掩码，除了一个。它是`_mm_shuffle_epi8`SSSE3 固有的。为了快速获得改组掩码，所有掩码都存储在查找表中，由一些位掩码或哈希索引。

为了获得给定输入向量的混洗掩码，有必要收集有关其中相等元素的足够信息。请注意，知道哪些元素对是相等的就足以确定如何对它们进行重复数据删除。如果我们想对它们进行额外的排序，那么我们还需要知道不同元素之间的比较，这会增加信息量，并随后查找表。这就是为什么我将在此处显示重复数据删除**而不进行**排序。

所以我们在一个 XMM 寄存器中有四个 32 位元素。他们一共组成了六对。由于我们一次只能比较四个元素，所以我们至少需要两个比较。事实上，很容易进行两次 XMM 比较，以便每对元素至少比较一次。之后，我们可以通过使用提取比较的 16 位位掩码`_mm_movemask_epi8`并将它们连接成一个 32 位整数。请注意，每个 4 位块肯定包含相同的位，最后两个 4 位块不是必需的（它们对应于过多的比较）。

理想情况下，我们需要从这个位掩码中准确提取位于编译时已知位置的 6 位。它可以通过`_pext_u32`BMI2 指令集中的内在函数轻松实现。结果，我们有一个范围为*[0..63]*的整数，包含 6 位，每个位显示对应的元素对是否相等。然后我们从预先计算的 64 项查找表中加载一个混洗掩码，并使用`_mm_shuffle_epi8`.

不幸的是，BMI 指令是相当新的（Haswell 和更高版本），我没有它们 =）为了摆脱它，我们可以尝试为所有 64 个有效位掩码创建一个非常简单且快速的[完美哈希函数](https://en.wikipedia.org/wiki/Perfect_hash_function)（回想一下位掩码是 32 位的）。对于类中的散列函数，`f(x) = (a * x) >> (32-b)`通常可以构造一个相当小的完美散列，具有 2 倍或 3 倍的内存开销。由于我们的情况比较特殊，可以构造一个最小完美散列函数，使得查找表最少有 64 个条目（即 size = 1 KB）。

同样的算法对于 8 个元素（例如 XMM 寄存器中的 16 位整数）是不可行的，因为有 28 对元素，这意味着查找表必须包含至少 2^28 个条目。

对 YMM 寄存器中的 64 位元素使用这种方法也是有问题的。`_mm256_shuffle_epi8`内在没有帮助，因为它只是执行两个单独的 128 位随机播放（从不跨通道随机播放）。`_mm256_permutevar8x32_epi32`内在执行 32 位块的任意改组，但它不能插入零。为了使用它，您还必须在 LUT 中存储许多独特元素。然后，您必须手动将零放入寄存器的较高部分。

## 更新：哈希/BMI已删除

我已经意识到使用 BMI2 进行位提取或完美的哈希函数不是必需的，我们可以简单地使用`_mm_movemask_ps`来提取 32 位掩码。由于我们混合了 INT 和 FP 计算，这种方法可能会遇到轻微的延迟问题，但它在实践中运行得更快。

```
static __m128i *const lookup_direct_offset = lookup_direct - 0xC0U;
static inline __m128i deduplicate4_ssse3_direct(__m128i abcd) {
    __m128i bcda = _mm_shuffle_epi32(abcd, _MM_SHUFFLE(0, 3, 2, 1));
    __m128i cdcd = _mm_shuffle_epi32(abcd, _MM_SHUFFLE(3, 2, 3, 2));
    uint32_t mask1 = _mm_movemask_ps(_mm_castsi128_ps(_mm_cmpeq_epi32(abcd, bcda)));
    uint32_t mask2 = _mm_movemask_ps(_mm_castsi128_ps(_mm_cmpeq_epi32(abcd, cdcd)));
    uint32_t maskFull = 16U * mask2 + mask1;
    //Note: use index directly
    uint32_t lutIndex = maskFull;
    __m128i shuf = lookup_direct_offset[lutIndex];
    return _mm_shuffle_epi8(abcd, shuf);
} 
```

完整的[代码](http://pastebin.com/B5UxkqzW)也更新了。这会导致轻微的性能改进：

```
// Ivy Bridge
new: Time = 1.038   (782827520)    // ~ 6.6 cycles (per call)
old: Time = 1.169   (782827520)    // ~ 7.4 cycles (per call) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:58:27.477

**天真的解决方案**

基于 Max() 操作的粗伪代码。注释跟踪第一次迭代的数据。

```
A = RIN //{3, 9, 2, 9}

For i = 0 .. 3:

  B = Rotate(A, 1) //{9, 2, 9, 3}
  C = Rotate(A, 2) //{2, 9, 3, 9}
  D = Rotate(A, 3) //{9, 3, 9, 2}

  RMAX = Max(A,B) //{9, 9, 9, 9}
  RMAX = Max(RMAX, C) //{9, 9, 9, 9}
  RMAX = Max(RMAX, D) //{9, 9, 9, 9}

  ROUT[i] = RMAX[0] //ROUT = {9, null, null, null}

  TMP  = A
  MASK = Equality(RMAX, TMP) //MASK = {0, 1, 0, 1}
  MASK = Invert(MASK) //MASK = {1, 0, 1, 0}
  Clear(A)
  A = MoveMasked(TMP, MASK) //A = {3, null, 2, null} 
```

一些想法：

```
A = RIN //{3, 9, 2, 9}

B = Rotate(A, 1) //{9, 2, 9, 3}
C = Rotate(A, 2) //{2, 9, 3, 9}
D = Rotate(A, 3) //{9, 3, 9, 2}

maskA = cmpeq(A,B) //{0,  0,  0,  0}
maskB = cmpeq(A,C) //{0, -1,  0, -1}
maskC = cmpeq(A,D) //{0,  0,  0,  0}

indexA = horSum( { 1,2,4,8 } * maskA ) // 0
indexB = horSum( { 1,2,4,8 } * maskB ) // 10
indexC = horSum( { 1,2,4,8 } * maskC ) // 0

// The problem is this function here
// Of the 4096 possible indexABC only a subset will occur
// Based on an enumeration of all possible indexes a pattern
// for an lookup table could possibly be found
shuffleConst = lookupShuffle( indexA, indexB, indexC )

shuffle(A, shuffleConst) 
```

# javascript - JSF JavaScript API jsf.util.chain 不能按预期工作

> ID：10759924
> 
> 赞同：1
> 
> 时间：2012-05-25T18:55:17.677
> 
> 标签：javascript, java, jsf, jsf-2, dom-events

这是我的简单 JSF 应用程序，用 jsf.util.chain 方法显示 JavaScript API 错误。

使用：

*   JRE 1.6
*   Maven 3
*   JSF 2.1.8
*   雄猫 7
*   Jetty 6（从 maven jetty:run 运行）
*   火狐浏览器 12.0
*   萤火虫 1.9.2

这里的观点：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head>
        <title>Test JSF 2.0 Javascript API</title>
        <script type="text/javascript">
            function returnTrue(){
                debug('return true');
                return true;
            }
            function returnFalse(){
                debug('return false');      
                return false;
            }

            function debug(obj) {               
                if (console) {
                    if(console.debug){
                        //for firebug
                        //http://getfirebug.com/wiki/index.php/Console_API
                        console.debug(obj);
                    }
                }
                else if (console) {
                    if(console.log){
                        //for IE
                        //http://msdn.microsoft.com/en-us/library/dd565625(v=vs.85).aspx
                        console.log(obj);
                    }
                }               
            }

        </script>
    </h:head>
    <h:body>
        <h:form>
            <br />
            <br />
            <h1 align="center">Test jsf.util.chain</h1>
            <br />
            <table align="center">
                <tbody>
                    <tr>
                        <td>Combo A</td>
                        <td><h:selectOneMenu id="comboa" value="#{comboTest1.combo1Value}" onchange="returnTrue()">
                                <f:selectItems value="#{comboTest1.values1}" />
                                <f:ajax listener="#{comboTest1.changeCombo1}" render="combob" />
                            </h:selectOneMenu></td>
                    </tr>
                    <tr>
                        <td><label>Combo B</label></td>
                        <td><h:selectOneMenu id="combob" value="#{comboTest1.combo2Value}" title="Depend of combo 1" onchange="returnFalse()">
                                <f:selectItems value="#{comboTest1.values2}" />
                                <f:ajax listener="#{comboTest1.changeCombo2}" render="@this labela" />
                            </h:selectOneMenu></td>
                    </tr>
                    <tr>
                        <td>Label A</td>
                        <td><h:outputLabel id="labela" value="#{comboTest1.labelValue}" title="Depend of combo 2" /></td>
                    </tr>
                </tbody>
            </table>
            <br />
            <br />
            <br />
        </h:form>
    </h:body>
</f:view> 
```

这里的托管bean：

```
package com.ms.test.jsf.bug;

/**
 * 
 */

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.AjaxBehaviorEvent;
import javax.faces.model.SelectItem;

/**
 * @author soaint
 * 
 */
@ManagedBean(name = "comboTest1")
@ViewScoped
public class ComboTest1 implements Serializable {

    private Map<String, List<String>> combinado = null;

    private Object combo1Value = null;

    private Object combo2Value = null;

    private Object labelValue = null;

    /**
     * 
     */
    private static final long serialVersionUID = -4737479400003511726L;

    public ComboTest1() {

        System.out.println("CREATE ComboTest1");

        combinado = new HashMap<String, List<String>>();
        List<String> list = null;
        for (int i = 0; i < 10; i++) {
            list = new ArrayList<String>();
            for (int k = 0; k < 10; k++) {
                list.add(i + " - " + k);
            }
            combinado.put(i + "", list);
        }
    }

    public void changeCombo1(AjaxBehaviorEvent abe) {
        System.out.println("CHANGE MENU A === " + combo1Value);
    }

    public void changeCombo2(AjaxBehaviorEvent abe) {
        System.out.println("CHANGE MENU B === " + combo2Value);
        labelValue = combo2Value;
    }

    public List<SelectItem> getValues1() {
        List<SelectItem> list = new ArrayList<SelectItem>();

        Set<String> keys = combinado.keySet();
        List<String> listi = new ArrayList<String>(keys);
        Collections.sort(listi);
        for (Object object : listi) {
            list.add(new SelectItem(object, " -- " + object + " -- "));
        }
        list.add(0, new SelectItem(null, " ------- "));

        return list;
    }

    public List<SelectItem> getValues2() {
        List<SelectItem> list = new ArrayList<SelectItem>();

        List<? extends Object> keys = combinado.get(combo1Value);
        if (keys != null) {
            for (Object object : keys) {
                list.add(new SelectItem(object, " -- " + object + " -- "));
            }
        }

        return list;
    }

    public Object getCombo1Value() {
        return combo1Value;
    }

    public void setCombo1Value(Object combo1Value) {
        this.combo1Value = combo1Value;
    }

    public Object getCombo2Value() {
        return combo2Value;
    }

    public void setCombo2Value(Object combo2Value) {
        this.combo2Value = combo2Value;
    }

    public Object getLabelValue() {
        return labelValue;
    }

} 
```

很简单，视图有两个selecOne，第一个select 在onchange 事件中有一个returnTrue 调用，第二个select 事件调用returFalse。两者都有对 managedbean 的 ajax 调用附加到更改（默认）。在 JSF 内部，将自定义 onchange 属性和 ajax mojarra 调用加入到 jsf.util.chain 调用中：

```
<select id="j_idt5:comboa" name="j_idt5:comboa" size="1" onchange="jsf.util.chain(this,event,'returnTrue()','mojarra.ab(this,event,\'valueChange\',0,\'j_idt5:combob\')')">
...
<select id="j_idt5:combob" name="j_idt5:combob" size="1" title="Depend of combo 1" onchange="jsf.util.chain(this,event,'returnFalse()','mojarra.ab(this,event,\'valueChange\',0,\'@this j_idt5:labela\')')">
... 
```

[oracle站点](https://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/js-api/symbols/jsf.util.html#constructor) 广告中jsf.util.chain的具体说明：

```
<static> jsf.util.chain(source, event) 
```

*调用任意数量的脚本的可变参数函数。如果链中的任何脚本返回 false，则该链被短路并且不会调用后续脚本。在 event 参数之后可以指定任意数量的脚本。*

这不是真的，第二个选择调用了 selectFalse 但这会触发 ajax。

**原因：**

我在 web.xml 上下文参数中以开发模式配置了我的 JSF，并且可以调试 jsf.js 未压缩版本。在我使用的 JSF 版本中，jsf.util.chain 在第 2247 行声明。我在代码的第 2260 行插入断点：

```
var returnValue = f.call(thisArg, event); 
```

完整方法：

```
jsf.util.chain = function(source, event) {

    if (arguments.length < 3) {
        return true;
    }

    // RELEASE_PENDING rogerk - shouldn't this be getElementById instead of null
    var thisArg = (typeof source === 'object') ? source : null;

    // Call back any scripts that were passed in
    for (var i = 2; i < arguments.length; i++) {

        var f = new Function("event", arguments[i]);
        var returnValue = f.call(thisArg, event);

        if (returnValue === false) {
            return false;
        }
    }
    return true;

}; 
```

在第一个方法调用（returnTrue 或 returnFalse）之后，***returnValue***始终具有**未定义**的值。

我的测试的完整代码在[这里](https://drive.google.com/file/d/0B_-bJ6IabuUjOGhRdEo4VlZrd2M/view)

下载，解压，打开控制台解压路径并运行

```
mvn clean jetty:run 
```

打开网络浏览器`http://localhost:8080/testBugJSF/`

我的问题是：这是一个有效的实现吗？核心 JavaScript 是否发生了影响该实现结果的更改？至于向谁报告以纠正？JSF 报告路径是什么？因为我可以直接在我的应用程序中纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:36:02.127

每个方法都必须有回报。

```
<tr>
                    <td>Combo A</td>
                    <td><h:selectOneMenu id="comboa" value="#{comboTest1.combo1Value}" onchange="return returnTrue()">
                            <f:selectItems value="#{comboTest1.values1}" />
                            <f:ajax listener="#{comboTest1.changeCombo1}" render="combob" />
                        </h:selectOneMenu></td>
                </tr> 
```

# node.js - 如何通过密钥获取 mongo 集合的孩子？

> ID：10759925
> 
> 赞同：2
> 
> 时间：2012-05-25T18:55:23.040
> 
> 标签：node.js, mongodb, key, mongoose, mongodb-query

我有一个看起来像这样的集合用户：

```
{
_id: myid,
name : 'blabla',
ia : {
       [0]-> 'an id',
       [1]-> 'a second id'
      }
} 
```

而且我只想拥有我的第一个 ia id，所以我尝试了类似的方法：

```
User.find({ _id: id, ia :{ key : indexia} }, ['ia']).populate('ia').run(rendu); 
```

其中 id=myid，indexia=0。

如果我不放那部分：“ ia :{ key : indexia}” 我得到我所有的 ia ......但我只想要一个。

希望我很清楚。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:52:41.423

MongoDB`find()`命令旨在匹配整个文档。

当您运行以下查询时

```
{ _id: id, ia :{ key : indexia} } 
```

...这意味着*“`_id`等于`id`和`ia`等于对象`{key:0}`”*。这可能**不是**你想要的。

> 如果我不放那部分：“ ia :{ key : indexia}” 我得到我所有的 ia ......但我只想要一个。

听起来您想返回给定文档的一部分。文档在[这里](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)。在您的情况下，它看起来像这样：

```
find({ _id: id}, { 'ia.0' : 1 }) 
```

查找的第一部分将找到该文档。第二部分将返回特定字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:51:26.197

感谢您的帮助，这样的工作人员：

```
User.find({ _id: id }).only('ia').slice('ia', indexia, 1).populate('ia').run(rendu); 
```

only('ia') 不起作用，但没什么大不了的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T05:54:59.420

您的收藏似乎具有以下架构：

```
{ "_id" : "id",
  "ia"  : ["id1","id2","id3"],
   etc.
} 
```

在这种情况下，获取“ia”字段的第一个“id”的查询将是：

```
find({}, { "ia" : {$slice:1  } }) 
```

[您可以在此处](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements)阅读有关 $slice 运算符的更多信息。[Mongoose 在查询页面](http://mongoosejs.com/docs/query.html)上记录了它对 $slice 运算符的支持。希望这可以帮助！

# git - 从 Git 裸存储库中提取没有推送提交

> ID：10759930
> 
> 赞同：3
> 
> 时间：2012-05-25T18:56:02.933
> 
> 标签：git, repository, push, git-bare

我有一个用于备份的裸 git 存储库。每次我提交本地副本时，我都会将其推送到裸存储库。Git 通过并推送对象而没有任何错误。今天，我尝试通过将裸存储库克隆到普通存储库来仔细检查备份是否正常工作。当我进行克隆时，文件与我最初的裸克隆时完全相同，没有任何新推送的对象。

我查看了裸仓库中的 objects 目录，并且在这段时间内添加或更新了新文件。我试过从裸仓库拉到新的克隆，但它说一切都是最新的。我还在裸仓库上做了一个 git log，它只显示了截至我进行原始克隆的日期的提交。

我究竟做错了什么？我应该在推送中使用另一个标志吗？谢谢。

**更新：**我想我可能已经弄明白了——当我做原始的裸克隆时，看起来我在 master 之外的一个分支上。我刚刚在 master 签出时做了另一个裸克隆，它似乎正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:51:25.473

（正如您所了解的）这是一个分支问题。默认情况下`git clone`签出 master 分支。因此，如果您一直在另一个分支上本地提交并推送到远程上的同一个分支，那么您在远程的主控上将一无所有。选项是：

```
git clone -b <your branch> <repository> 
```

然后你会确认`<your branch>`有你所有的工作。或者，在您的本地存储库中，

```
git checkout master
git merge <your branch>
git push <remote> master 
```

这将是一个简单的合并（因为 master 是空的）并且会将所有内容推送到您期望的遥控器的 master 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:57:46.337

尝试`git add - git commit - git pull - git push`

# asp.net - 如何读取我的 ASP.NET 自定义 RoleProvider cacheRolesInCookie 配置值的值？

> ID：10759935
> 
> 赞同：0
> 
> 时间：2012-05-25T18:56:23.107
> 
> 标签：asp.net, asp.net-membership

我有一个正在使用的自定义 RoleProvider，但我发现 cacheRolesInCookie 不起作用。阅读后，这是预期的行为。但是，我想覆盖它并自己处理缓存。我的问题是我无法弄清楚如何从配置文件中读取值以确定是否应该进行缓存。这是我的配置设置...

```
<roleManager defaultProvider="MyRoleProvider" cacheRolesInCookie="true" enabled="true">
  <providers>
    <clear/>
    <add name="MyRoleProvider" 
         type="MyCompany.WebSecurity.MyRoleProvider" 
         connectionStringName="Security" 
         applicationName="TestSite" />
  </providers>
</roleManager> 
```

我使用以下代码阅读了提供程序设置：

```
var membershipSection = (MembershipSection)WebConfigurationManager.GetSection("system.web/membership");
var defaultProvider = membershipSection.DefaultProvider;
var providerSettings = membershipSection.Providers[defaultProvider];

var connStringName = providerSettings.Parameters["connectionStringName"]; 
```

如何获取属性 cacheRolesInCookie 的值？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:59:18.677

我发现了我的问题。我将我的配置部分转换为错误的类型。这是我现在所做的。

```
var roleManagerSection = (RoleManagerSection)WebConfigurationManager.GetSection("system.web/roleManager");

var cacheRolesInCookie = roleManagerSection.CacheRolesInCookie; 
```

# javascript - javascript shapes drawing - HOW Raphael's library works in detail? (no )

> ID：10759937
> 
> 赞同：0
> 
> 时间：2012-05-25T18:56:23.717
> 
> 标签：javascript, drawing, raphael, shapes

Recently i found the raphael's library which is amazing. For example this:

[Raphael Chart -Demo](http://raphaeljs.com/ichart.html)

When I checked the code I was shocked(in a positive way).

It didn't used HTML5 canvas or any extra divs like [here](http://www.c-point.com/javascript_vector_draw.htm) (which a don't like)

My question is: How exactly this works in detail? Is pixel manipulation? What is the basic rendering code?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:01:41.387

Primarily it uses [SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics) which is an XML-like markup to represent vectors. For < IE9 browsers, I think it uses [VML](http://en.wikipedia.org/wiki/Vector_Markup_Language) which is a deprecated vector mark-up that IE still supports.

SVG/VML 是[矢量图形](http://en.wikipedia.org/wiki/Vector_graphics)的形式。它们的形状由数学公式表示。这使得它们适用于可缩放图形，因为公式在缩放时会重新计算，保持锐利的边缘，这与像素化的[光栅图形不同。](http://en.wikipedia.org/wiki/Raster_graphics)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T18:59:17.333

Inspect the source with firebug or Chrome's inspector. It generates [SVG](http://en.wikipedia.org/wiki/Svg).

# python - CTRL_LOOPBACK_WRITE 在 python usb 代码中未定义

> ID：10759939
> 
> 赞同：2
> 
> 时间：2012-05-25T18:56:32.803
> 
> 标签：python, usb

我正在尝试使用以下行写入 PS3 控制器（dev 已正确设置）。

```
dev.ctrl_transfer(0x40, CTRL_LOOPBACK_WRITE, 0, 0, msg) 
```

我收到一个错误，即 CTRL_LOOPBACK_WRITE 未定义。那么，它是在哪里定义的呢？或者我可以得到它的价值吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:10:04.050

我猜您在[http://pyusb.sourceforge.net/docs/1.0/tutorial.html](http://pyusb.sourceforge.net/docs/1.0/tutorial.html)的 pyusb 教程中找到了这个控制转移示例。然而，这是一个相当假设的例子，正如文本解释的那样：“在这个例子中，假设我们的设备实现了两个作为环回管道的自定义控制请求”。所以这不是一个标准的控制请求，也可能不是你的 PS3 支持的请求。在这种情况下，将由 PS3 控制器的 USB 堆栈来定义 CTRL_LOOPBACK_WRITE 的数值应该是什么。

[您可以在http://www.beyondlogic.org/usbnutshell/usb6.shtml#StandardRequests](http://www.beyondlogic.org/usbnutshell/usb6.shtml#StandardRequests)找到标准请求的概述，此外还有特定于类的标准请求。

# c# - 需要在网络上传输超过3G的小文件

> ID：10759940
> 
> 赞同：-1
> 
> 时间：2012-05-25T18:56:36.613
> 
> 标签：c#, networking, directory, compression

我需要在网络上传输很多小文件。我的文件总大小约为 3G，未来还会增长。我知道如果我将文件传输到一个文件中，如（winrar 文件、winzip 文件或 7 zipfile），网络上的性能会更好，但我会在 cpu 时间后支付压缩和解压缩文件的费用。

有没有办法在 c# 中将我的目录转移到一个文件中，而无需使用第三方，如 winrar、winzip、7zip ....

以最佳性能传输我的文件夹、子文件夹和文件的最佳方式是什么？

现在我使用自定义方法来做这件事导致`Directory.Move`给我一些问题

有我的实际方法，我知道它可能不是性能最好的方法。有什么建议吗？

问题是 ：

**如何在 c# 的网络共享上以更好的性能传输我的所有目录和文件，包括压缩和解压缩（如果我需要）？**

```
private void CopyDirectory(string source, string destination)
    {
      string[] files;

      if (!Directory.Exists(destination)) DirectoryHelper.CreateDirectoriesFromPath(destination);

      files = Directory.GetFileSystemEntries(source);

      foreach (string fileElement in files)
      {
        if (Directory.Exists(fileElement))
        {
          if (!ExcludedDirectoryName.Contains(Path.GetFileNameWithoutExtension(fileElement)))
          {
            CopyDirectory(fileElement, Path.Combine(destination, Path.GetFileName(fileElement)));
          }
        }
        else
        {
          try
          {
            // Valide si le fichier fait partie de la liste d'exclusion
            if (!ExcludedDirectoryName.Contains(Path.GetFileNameWithoutExtension(fileElement)))
            {
              // Calcule le Path de destination
              string destinationFile = Path.Combine(destination, Path.GetFileName(fileElement));

              // Valide si le fichier existe
              if (FileHelper.Exist(destinationFile))
              {
                // Supprime le fichier
                File.Delete(destinationFile);
              }

              // Copie le nouveau fichier
              File.Copy(fileElement, destinationFile, true);
            }
          }
          catch (IOException ioEx)
          {

            // Log l'exception
            ExceptionLogger.Publish(ioEx);
          }
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:30:00.793

与逐个文件传输相比，像 zip 这样的存档格式有很多优势，尤其是在您处理数以万计的小文件时。一方面，zip 已完全调试。您不必担心像空文件或目录这样的边缘情况。另一方面，通过网络传输一些大文件比传输大量小文件所需的开销要少得多。

在您从中获取文件的文件系统和接收它们的文件系统上，每个文件都有很多开销。除了创建文件系统（当您可以设置适当的块和集群大小时）外，您对这种开销无能为力。

在程序中使用像 DotNetZip 这样的归档包可能会有所帮助。您将能够在程序的控制下编写然后读取 zip 文件。一探究竟。 [http://www.codeproject.com/Articles/181291/DotNetZip](http://www.codeproject.com/Articles/181291/DotNetZip)。Sharpziplib 也是一种可能。

但是，您可能想考虑使用 rsync 之类的工具。这是专为您正在做的事情而构建的，并且已经过完全调试。 [http://en.wikipedia.org/wiki/Rsync](http://en.wikipedia.org/wiki/Rsync)

# java - 数组，但有 16 位数字

> ID：10759941
> 
> 赞同：-4
> 
> 时间：2012-05-25T18:56:38.310
> 
> 标签：java

现在我知道，仅仅放置一个 16 位数的阵列对于阵列来说太多了，它会给出答案，但对于网络安全课程，我希望能够访问我附近的路由器。

我不会惹他们，但我证明了一点，由于住在偏僻的地方，所有的路由器都是一样的。它们的长度为 16 位。

那么任何人都可以帮我解决如何将 16 位数字放在一起并在 txt 文件中创建吗？

我想要做的是创建一个新文件，然后制作可以使它成为字典类型的东西，因为它具有每个数字 0000000000000000 -> 9999999999999999。

文件的创建对我来说没有问题，但是我将如何创建这个具有 16 个数字序列的数字字典？

编辑：我想把它分成 4 个 4 位数的东西，但我不确定如何确保它们是 a) 与以前不同的数字和 b)，在第 16 位数字后留出一个空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:16:15.203

首先，您的号码 (99...9) 有 16 位数字。就 Java 中的数据类型而言，它大约为 53 位（目前小于 64 位），因此它是`long`

但是，假设每个数字都是 64 位的。所以文件大小可能是 size = (99..99) (number) * 64 (bit per number) = 73k Tera Byte (不可能以***正常方式*****存储在文本文件中！)**

 ***所以你应该考虑另一种方式（？）**

~~此外，您不能声明`long l = 999999999999999`; 因为编译器得到了错误（整数到大），但这有效：`long l = Long.parseLong("9999999999999999");`~~

希望这可以帮到你 ！

* * *

**编辑：**声明`long l = 9999999999999999999l;`（`l`可以是大写和小写，谢谢@Tom）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:41:49.637

如果我正确理解您的问题，您想这样做：

```
for(Double i = 0; i < 10000000000000000;i++)  
{  
       String s = i.toString();
       bufferedWriter.write(s);
} 
```

这会将当前的字符串表示形式写入`Double`文本文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:03:19.347

问题可能更清楚，但如果我理解您想要这样的字段：

```
int i = 10000000000000000; 
```

或许

```
int[] i = { 1000000000000000 }; 
```

但这会溢出一个整数。Java 有一个叫做 BigInteger 的类，它可以保存任意大的数字，但是你用字符串来初始化它们：

```
List<BigInteger> i = new ArrayList<BigInteger>();
i.add(new BigInteger("1000000000000000")); 
```

缺点是你不能在它上面使用普通的算术操作数，比如 bi1 + bi2，但是 BigInteger 类为你提供了几乎所有你需要使用它们的东西，就好像它们是普通数字一样。 [这是javadoc](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)供参考。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T18:59:38.890

最简单的方法是使用`for`循环。`LinkedList`为了速度，A将是最好的。

```
LinkedList<Double> list = new LinkedList<Double>();
for(double i=0;i<10000000000000000;i++)
    list.add(i);
//Output list to file next. 
```*

# c - 使用 unix 系统调用在 C 程序中实现类似 shell 的功能

> ID：10759942
> 
> 赞同：0
> 
> 时间：2012-05-25T18:56:44.217
> 
> 标签：c, unix

有人可以建议这个程序有什么问题吗？我正在尝试通过在这里创建一个子进程来实现类似 shell 的功能。在给出具有单个单词 like `ls`or`pwd`它的命令时，但具有多个单词 like `ls -lrt`or`who am i`的命令不起作用。我正在做一些愚蠢的错误，但无法调试。

```
 #include <stdio.h>
    #include <string.h>
    #include <unistd.h>
    #include <iostream>
    #include <wait.h>
    #include <errno.h>
    #include <sys/types.h>
    #include <cstdlib>
    #define BUFSIZE  200
    #define ARGVSIZE 40
    #define DELIM    "\n\t\r"

    int main ()
    {
      int i,n;
      char buf[BUFSIZE + 1] ;
      char * str = "Shell > ";
      char * clargs[ARGVSIZE] ;
      int returnstatus;
      for(;;)
      {
          n = 1;
          write(STDOUT_FILENO,str,strlen(str));

          read(STDIN_FILENO,buf,BUFSIZE);
          if(!strcmp(buf,"exit\n"))
          {
              perror("exit");
              exit(20);
          }

          clargs[0] = strtok(buf,DELIM);

          while((clargs[n] = strtok(NULL,DELIM)) != NULL)
              n++;

          clargs[n] = NULL;

          switch(fork())
          {
          case 0:
          if((execvp(clargs[0],&clargs[0])) < 0)
              exit(200);

          default:
          wait(&returnstatus);
          printf("Exit status of command : %d\n",WEXITSTATUS(returnstatus));
          for(int i =0; i <= n;i++)
              clargs[i] = "\0";

          for(int i =0; i < BUFSIZE+1;i++)
              buf[i] = '\0';
      }
  }

  return 0; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:27:52.940

您在 中没有空间`DELIM`。
尝试运行时`ls -lrt`，您希望`ls`使用两个参数运行可执行文件 -`ls`和`-lrt`.
但你`strtok`不会`ls -lrt`一分为二。因此，您实际上是在尝试运行一个名为 的程序`ls -lrt`，而没有这样的程序。

添加一个空格`DELIM`应该可以解决它。

并不是说它在某些情况下不够好。例如，在运行时`echo "a b"`，您想`"a b"`成为一个参数，因为括号。`strtok`会把它分成两部分。真正的外壳会进行更复杂的解析。

# css - IE7 错误 - span 掩盖了链接

> ID：10759943
> 
> 赞同：0
> 
> 时间：2012-05-25T18:56:50.923
> 
> 标签：css, internet-explorer, hyperlink, html

下面的代码使整个 div 可以链接到带有一些可爱的 css 的 <a> 标记。它适用于除 IE7 之外的所有浏览器（可能还有 6 个）。在 IE7 中，#go span 似乎掩盖了链接。div 的其余部分是链接的，除了 span 元素，它的作用类似于页面的任何正常部分。我尝试更改 z-indexes，并将跨度显示为块（如您所见）。最后的手段是用一个额外的 <a> 标签包裹跨度，但这太恶心了......有人有更好的解决方案吗？

```
.orangebutton {
    position: relative; 
}
.orangebutton a {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
} 
```

```
<div class="orangebutton floatright" id="home-go-button4">
    <span id="go" style="display: block">Go</span>
    <a href="http://google.com"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:23:21.190

这是 IE 的错误（[空 div 悬停事件未在 IE 中触发](https://stackoverflow.com/questions/2158921/empty-div-hover-event-not-firing-in-ie/2159004#2159004)）

解决方案是为`a`标签设置背景，但由于您需要它是透明的，只需添加透明背景图像..

[http://jsfiddle.net/3m93n/1/](http://jsfiddle.net/3m93n/1/)上的演示
（*透明图片来自互联网热链接..创建本地版本..*）

# r - 更改分配新变量的默认环境

> ID：10759944
> 
> 赞同：10
> 
> 时间：2012-05-25T18:42:11.460
> 
> 标签：r

我经常想在全局环境下的一个环境中创建很多变量。这可以通过以下`envir`参数轻松完成`sys.source`- 如果由一个正在采购的文件创建的所有变量都应该进入单个环境。

但我通常使用创建变量集的文件。一组应该进入一个环境，另一组应该进入另一个环境，依此类推。我不想将此文件拆分为多个文件，然后多次调用`sys.source`.

相反，我想要一个命令，让我更改分配新变量的默认环境。例如：

```
e <- new.env()
setDefaultEnvironment(e)
tmp <- 2
e$tmp           #  2 
.GlobalEnv$tmp  #  Error: object 'tmp' not found 
```

但`setDefaultEnvironment`不是真正的命令。

有没有安全的方法在 R 中做这种事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T21:31:37.653

**最好明确一点：**改变全局状态是危险的。因此：

```
e <- new.env()
with(e, {foo <- bar; foo2 <- bar2}) 
```

将干净利落地完成工作，不会大惊小怪，同时突出显示所涉及的环境。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-25T19:16:46.437

也许有人可以对此进行改进，不再需要引用变量名：

```
e <- new.env()
`%=%` <- function(x,y) {assign(x,y,envir = e)}

"d" %=% 5

e$d
[1] 5 
```

但这对我来说有点愚蠢。也许直接使用`assign`？更多的打字，也许，但它做你想做的事，危险性更小。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T20:22:32.830

该`evalq`函数将在指定环境中评估其第一个参数，因此您可以创建新环境，然后将分配包装到`evalq`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-23T12:22:57.637

而不是改变环境，一个简单的方法是将所有变量保存在一个列表中。

```
e <- list()
e$tmp <- 2 
```

# php - MySQL 连接似乎失败并中断脚本

> ID：10759946
> 
> 赞同：0
> 
> 时间：2012-05-25T18:57:05.790
> 
> 标签：php, mysql

我有一个使用两个 PHP 脚本的应用程序，其中一个包含一个表单，另一个接受在所述表单中提交的值，并根据所述值更新 MySQL 数据库中的表。两个脚本都连接到 MySQL 数据库，但只有带有表单的脚本能够成功连接。提交成功，但是当脚本尝试连接数据库时失败，脚本崩溃（即显示空白屏幕）。提供了所有正确的凭据，据我所知，使用了正确的语法：

```
error_reporting(E_ALL);

mysql_connect("host", "uname", "pass") or die ($mysql_error);
mysql_select_db("phonelist") or die ($mysql_error);

$ext = $_POST['ext']
list($lname, $fname) = explode(' ',$_POST['input']);

$strQuery = "UPDATE phonelist SET number = " . $input . " WHERE last_name = " . $lname . "AND first_name = " $fname);
mysql_query($strQuery) or die("Query failed."); 
```

就像我说的那样，在包含提交表单（用于填充下拉列表）的脚本中成功创建了相同的连接，所以我不确定为什么会发生这种情况。

编辑：从第二个脚本中添加了更完整的代码。第一个脚本很长，所以我将尝试向您展示最相关的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:01:03.080

您是否连接到不同的数据库表？您的可写表的格式可能存在问题。请务必验证正在使用的表和列。此外，根据您是否使用 PreparedStatements，参数可能会关闭。也许你可以发布你的非功能脚本的更多细节......

# c# - 如何在 ListA 中选择具有与 ListB 中项目的属性相匹配的属性的项目？

> ID：10759948
> 
> 赞同：1
> 
> 时间：2012-05-25T18:57:13.183
> 
> 标签：c#

我有 a `List<A>`，其中 A 包含一个名为 的属性`TypeId`，以及 a `List<B>`，其中 B 还包含一个名为`TypeId`

我想从中选择包含项目的`List<A>`所有项目`List<B>``B.TypeId == A.TypeId`

```
ListA.Add(new A { TypeId = 1 });
ListA.Add(new A { TypeId = 2 });
ListA.Add(new A { TypeId = 3 });

ListB.Add(new B { TypeId = 3 });
ListB.Add(new B { TypeId = 4 });
ListB.Add(new B { TypeId = 1 });

???? // Should return items 1 and 3 only 
```

这样做最有效的方法是什么？

我知道这很简单，但今天我的大脑感觉很愚蠢......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:59:34.917

使用 LINQ，使用 Join 方法相当简单。

```
var join = ListA.Join(ListB, la => la.TypeId, lb => lb.TypeId, (la, lb) => la); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:56:02.227

我猜您正在尝试进行相交操作，并且应该可以使用[相交](http://msdn.microsoft.com/en-us/library/bb460136%28v=vs.90%29.aspx)扩展。这里的一个优点是 intersect 将在 O(m + n) 中运行。示例程序：

```
class Program
{
    class Bar
    {
        public Bar(int x)
        {
            Foo = x;
        }
        public int Foo { get; set; }
    }

    class BarComparer : IEqualityComparer<Bar>
    {
        public bool Equals(Bar x, Bar y)
        {
            return x.Foo == y.Foo;
        }

        public int GetHashCode(Bar obj)
        {
            return obj.Foo;
        }

    }
    static void Main(string[] args)
    {
        var list1 = new List<Bar>() { new Bar(10), new Bar(20), new Bar(30)};
        var list2 = new List<Bar>() { new Bar(10),  new Bar(20) };
        var result = list1.Intersect(list2, new BarComparer());

        foreach (var item in result)
        {
            Console.WriteLine(item.Foo);
        }
    }
} 
```

# c++ - 对非类型模板参数的类型进行抽象

> ID：10759952
> 
> 赞同：6
> 
> 时间：2012-05-25T18:57:36.197
> 
> 标签：c++, templates

我想编写一个模板，可以将类型解构为具有非类型模板参数及其非类型模板参数的模板。例如，它会解构`Array<5>`为`template<int> Array`and `5`，但一般适用于任何类型的非类型模板参数（整数类型、指针、成员指针等）。

首先尝试使用模板专业化：

```
template<typename T> struct foo { enum { n = 1 }; };

template<int x> struct bar { enum { n = x }; };

template<typename T, template<T> class X, T x>
struct foo< X<x> > { enum { n = x }; }; // here x must be of integral type, but that's just for testing

int main(int, char**) { return foo< bar<16> >::n; } 
```

Clang 3.1 说：

```
test145.cpp:6:8: warning: class template partial specialization contains a template parameter that can not be deduced; this partial specialization will never be used
struct foo< X<x> > { enum { n = x }; };
       ^~~~~~~~~~~
test145.cpp:5:19: note: non-deducible template parameter 'T'                     
template<typename T, template<T> class X, T x>
                  ^
1 warning generated. 
```

第二次尝试，使用函数模板：

```
template<typename T, T x> 
struct box 
{ 
    static constexpr T value() { return x; }
};

template<typename T, template<T> class X, T x>
box<T, x> foo(X<x>);

template<int> struct asdf { };

int main(int, char**) { return decltype(foo(*(asdf<9>*)0))::value(); } 
```

铿锵声 说：

```
test150.cpp:12:41: error: no matching function for call to 'foo'
int main(int, char**) { return decltype(foo(*(asdf<9>*)0))::value(); }
                                        ^~~
test150.cpp:8:11: note: candidate template ignored: couldn't infer template argument 'T'
box<T, x> foo(X<x>);
          ^
1 error generated. 
```

GCC 4.7 说了类似的话。

这是一个基本的限制吗？

额外的问题：如果是，那么有没有办法在有限数量的代码中处理所有无限的可能性，即使它不那么简单和通用的代码？（例如指针会变得很困难：出于同样的原因，你似乎不会写`template<T>`，我认为你也不会写`template<T*>`。）

请不要问我为什么要问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-06-12T17:59:36.953

***答案可能来的有点晚……***

### *错过尝试...*

*（请参阅下面**的正确答案**和**C++17 解决方案**）*

* * *

> 这个原始答案保留为我对 SO 的第一个答案的纪念品。
> 不完全是失败，有人会说。而是第一次错过的尝试... ;)
> *现在，跳到下一条水平线...*

当我遇到这个问题时，我正在寻找相关问题的答案。读完之后，我告诉自己：*“嗯……那是我已经做过的事情。而且它奏效了。我到底是怎么做到的？！”* . 然后，我继续寻找我的问题的答案......

今天我觉得我应该花一点时间来提出这个问题的解决方案*（实际上是两个）*。

正如您已经注意到的那样，问题来自编译器不知道如何推断的事实`T`。可以将错误消息解释为*“请给我一点帮助`T`”*。

我所做的第一个工作版本具有`foo`从类似于`std::integral_constant`. 派生可能有助于编译`foo`器`std::integral_constant<T, x>`找出`T`. *（或者也许 MSVC -vs2019- 对我有点好）*

无论如何，同时我找到了更好的解决方案。并且编译器应该没有办法不能推断出 的类型，因为...的类型`T`不需要`typename T`参数`x`

* * *

这里是：***（C++17 解决方案）***

```
template<typename T> struct foo {};

template<auto x, template<decltype(x)> class X>
struct foo<X<x>> {
    using            arg_type   = decltype(x);
    static constexpr arg_type n = x;
};

//template<int x> struct bar { enum { n = x }; };
template<int x> struct bar;

using bar_16            = foo<bar<16>>;
using bar_16_arg_t      = typename bar_16::arg_type; // int
constexpr auto bar_16_n = bar_16::n;                 // 16 
```

请注意，要使其工作，它甚至不需要`bar`成为一个完整的类型。前向声明*（如本例所示）*足以让*分解*工作。

享受...

* * *

## 正确答案

° 备注

> *   这***回答了 9 年前提出的问题***，*并且*，
> *   此处提出的***解决方案******仅使用 C++11 特性***。
> *   此解决方案***仅管理整数类型***。
>     *（让其他类型作为读者练习）*
>     
>     *如果您的编译器支持**C++17**功能，则应该首选**上面发布的解决方案，因为它****不仅管理整数类型**。*

*只对工作代码示例感兴趣？*
*跳转到：“**工作解决方案**”*

° 序言

> *   **经过我的研究**，似乎**直到现在****还没有找到***（或没有发表）*这个特定问题**的解决方案**。我想我应该详细介绍一下*“Whys”*和*“Hows”*。**我希望它会受到**赞赏，但总的来说：**有用**...
> **********   我目前正在编写一个包含编译时工具和功能的元编程库。我希望能够很快在 GitHub 上发布它。
>     *（谁知道）——无论如何*……*   当我意识到我的第一个答案仅在*C++17*之后才正确时，我并没有感到沮丧...... –*不完全是“准时”，有人可以说......：P**   有了我想到的 ATM 的所有“仅编译时”特性的机制，我觉得 9 年前应该有办法做到这一点。*   我开始思考如果只使用*C++11*功能我会如何做到这一点，大约一个小时后，我找到了一个可行的*解决方案*。*（实际上是两个）**   我花了一点时间使它成为一个*可用的解决方案*。*（实际上是两个）**   还有很多东西要纠正这篇文章...... *：D*
>     
>     毕竟，可能有编译器
>     *“足够好”*来理解*C ++ 11* ...... *：P**********

 ********显然，由于当时可用的功能集更窄，
找到的解决方案*“**只是有点**”*更冗长...... *：D*

° 搜索过程

首先，必须记住，当编译器输出*“**无法推断**”*时……
这并不意味着存在错误*（尽管可能有错误）*。
– 这意味着编译器并不像人们想象的那么聪明。
– 这意味着一个人必须帮助编译器才能完成它的工作......

清楚吗？
– 编译器恳请您完成其工作的一部分。
– 你有很好的机会：

*   最终自己完成大部分工作...... *：P*

在这里，编译器说“无法推断”的类型`T`。
确实，`T`不用于作为 的特化的参数的表达式`foo`，因此，它不能从那里推导出来......

首先必须做一些事情来表示（类型为）之间的关系`typename T`和值。立即想到的是，人们需要一个类似的模板，它正是这样做的。它将一个值及其对应的类型编码为一个***新的类型。***`x``T``std::integral_constant`

 **> **免责声明**[! 警告！]
> 
> *   看到标识符名称中的大写字母容易产生过敏反应的人不应该继续阅读这篇文章！

在那之前没有什么新鲜事吗？
完美的！这里是：

```
template<typename T, T V>
struct NonTypeParam { using Type = T; static constexpr T Value = V; }; 
```

接下来需要一些东西来创建`NonTypeParam`具有值及其对应类型的模板实例......

*   它可能是一个带有类型参数的模板。
*   此参数将接收要分解的类型。
*   然后，必须以某种方式对其进行专门化...

让我们试一试，从以下开始：

```
template<typename T> struct Extract { using Result = void; }; 
```

要完全抽象`Extract`模板的专业化，必须编写如下内容：

```
template<typename T, T V, template<T> class C>
struct Extract<C<V>> { using Result = NonTypeParam<T, V>; }; 
```

这会导致同样的问题，因为它与问题中使用的专业类型相同。在这一点上，人们不得不提醒编译器不能做什么。它*“**无法推断**”*`T`在我们的专业化中参数应该是什么类型的别名......

事实上，该消息在某种程度上具有误导性，因为`T`它甚至不是作为专业化参数传递的表达式的一部分。因此，问题不在于将 a 归因`typename`于参数`T`，而是将*类型*归因于参数`V`......
现在，应该能够提出正确的问题：

1.  怎样才能`T`从方程中去掉？
    *   通过显式定义`V`.
2.  的值有哪些可能的类型`V`？
    *   允许作为非类型模板参数的类型。

首先，例如，通过显式定义`V`for的类型，将如何看待专业化？`char`它看起来像这样：

```
template<char V, template<char> class C>
struct Extract<C<V>> { using Result = NonTypeParam<char, V>; }; 
```

，这有点烦人，但由于可能性有限。以后可能会找到一种减少声明的方法。让我们添加另一个专业化，一个受害者模板，并对其进行测试......

```
template<typename T, T V>
struct NonTypeParam { using Type = T; static constexpr T Value = V; };

template<typename T> struct Extract { using Result = void; };

template<char V, template<char> class C>
struct Extract<C<V>> { using Result = NonTypeParam<char, V>; };

template<std::size_t V, template<std::size_t> class C>
struct Extract<C<V>> { using Result = NonTypeParam<std::size_t, V>; };

template<std::size_t I> struct TestNonType1 {};

using Result          = typename Extract<TestNonType1<42>>::Result;
using RType           = typename Result::Type; // std::size_t
constexpr auto rValue = Result::Value;         // 42 
```

毫不奇怪，它按预期工作......
现在可能的类型是什么？
根据[模板参数](https://en.cppreference.com/w/cpp/language/template_parameters)标准：

> 非类型模板参数必须具有结构类型，它是以下类型之一*（可选 cv 限定，限定符被忽略）*：
> 
> *   左值引用类型（对象或函数）；
> *   整数类型；
> *   指针类型（指向对象或函数）；
> *   指向成员类型的指针（指向成员对象或成员函数）；
> *   枚举类型；
> *   std::nullptr_t; *(C++11 起)*

对于我们的案例，问题要求**整数类型**。
好吧，标准对整数类型有什么看法。
让我们看一下[std::is_integral](https://en.cppreference.com/w/cpp/types/is_integral)以找出答案：

> ..., if`T`是类型`bool`, `char`, `char8_t` *(C++20 起)* , `char16_t`, `char32_t`, `wchar_t`, `short`, `int`, `long`, `long long`, 或**任何实现定义的**扩展**整数类型**，包括**任何有符号**、**无符号**和**cv 限定的**变体。

**哎哟!**

由于有 9 种类型——*如果一种排除`char8_t` *（仅来自 C++20）*并认为实现定义的整数类型在大多数情况下是这些整数类型的别名*——则必须对以下内容进行专门化：

*   9 `signed`.
*   9 `signed const`.
*   9 `signed volatile`.
*   9 `signed const volatile`.
*   其中有36个专业。
*   然后，为未签名的版本再添加 36 个？！

> **免责声明**[ 通知 ]
> 
> *   毫无疑问，这就是为什么以前没有人*（也许真的没有人）*这样做的原因......

* * *

### 等等，等等，等一下……

人们应该再次考虑这一点，并再次提出正确的问题：

*   非类型参数如何*“读取”* / *“解释”* ***？***
*   这样做有什么意义***吗？****`volatile`*
**   如果它的值是 的一部分*`typename`*，是不是*`const`*以某种方式隐含***？****

 **你肯定自己找到了答案……*

– 同样，没有**和*`unsigned`***的版本。 – 此外，如果您再仔细阅读标准中有关[模板参数](https://en.cppreference.com/w/cpp/language/template_parameters)的内容，您可能会看到一些没有得到应有注意的东西......`char16_t``char32_t``wchar_t`

> *非类型模板参数必须具有结构类型，它是以下类型之一（可选 cv 限定，***限定符被忽略***）*

*好，好，好……*

– 这将比一开始会做***更多***的***工作***...... ***：P*** – 最终，只有模板的**14 个专业化**足以管理**99% 的所有可能的整数类型**...... ****`Extract`****

 ******...我认为对于如此少量的代码来说，这太多了。

请在下面找到解决方案 -***让后代***在这里 - 希望它*可能*对某人有用*（至少对于第二个示例中使用的有趣的“诡计”）*。

° 个人评论

> 我很难相信这个 9 年前的问题还没有更早地找到答案*（以及认为我会是唯一一个找到这个答案的“愚蠢”人）*

* * *

## 工作解决方案

### 解决方案#1

> 这里没什么特别的。这只是模板的常规专业化......

```
template<typename T, T V>
struct NonTypeParam { using Type = T; static constexpr T Value = V; };

namespace Details1 {

template<typename T> struct Extract { using Result = void; };

template<typename T, T V> using R = NonTypeParam<T, V>;

// boolean
template<bool V, template<bool> class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
// signed types
template<char      V, template<char>      class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<char16_t  V, template<char16_t>  class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<char32_t  V, template<char32_t>  class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<wchar_t   V, template<wchar_t>   class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<short     V, template<short>     class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<int       V, template<int>       class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<long      V, template<long>      class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<long long V, template<long long> class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
// unsigned types
template<unsigned char      V, template<unsigned char>      class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<unsigned short     V, template<unsigned short>     class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<unsigned int       V, template<unsigned int>       class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<unsigned long      V, template<unsigned long>      class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };
template<unsigned long long V, template<unsigned long long> class C> struct Extract<C<V>> { using Result = R<decltype(V), V>; };

} /* namespace Details1 */

template<typename T>
struct Extract1
{
    using Result = typename Details1::Extract<T>::Result;
};

// Victim template:
template<std::size_t I> struct TestNonType1 {};

// Usage:
using          Param  = typename Extract1<TestNonType1<42>>::Result;
using          PType  = typename Param::Type; // std::size_t
constexpr auto pValue = Param::Value;         // 42 
```

### 解决方案#2

> 在这个解决方案中，一个人利用`decltype`声明函数模板重载的力量，它永远不会在任何地方定义......

```
template<typename T, T V>
struct NonTypeParam { using Type = T; static constexpr T Value = V; };

namespace Details2 {

template<typename T, T V> using R = NonTypeParam<T, V>;

// boolean
template<bool V, template<bool> class C> R<decltype(V), V> Extract(C<V> && _);
// signed types
template<char      V, template<char>      class C> R<decltype(V), V> Extract(C<V> && _);
template<char16_t  V, template<char16_t>  class C> R<decltype(V), V> Extract(C<V> && _);
template<char32_t  V, template<char32_t>  class C> R<decltype(V), V> Extract(C<V> && _);
template<wchar_t   V, template<wchar_t>   class C> R<decltype(V), V> Extract(C<V> && _);
template<short     V, template<short>     class C> R<decltype(V), V> Extract(C<V> && _);
template<int       V, template<int>       class C> R<decltype(V), V> Extract(C<V> && _);
template<long      V, template<long>      class C> R<decltype(V), V> Extract(C<V> && _);
template<long long V, template<long long> class C> R<decltype(V), V> Extract(C<V> && _);
// unsigned types
template<unsigned char      V, template<unsigned char>      class C> R<decltype(V), V> Extract(C<V> && _);
template<unsigned short     V, template<unsigned short>     class C> R<decltype(V), V> Extract(C<V> && _);
template<unsigned int       V, template<unsigned int>       class C> R<decltype(V), V> Extract(C<V> && _);
template<unsigned long      V, template<unsigned long>      class C> R<decltype(V), V> Extract(C<V> && _);
template<unsigned long long V, template<unsigned long long> class C> R<decltype(V), V> Extract(C<V> && _);

} /* namespace Details2 */

template<typename T>
struct Extract2
{
    using Result = decltype(Details2::Extract(std::declval<T>()));
};

// Victim template:
template<unsigned long long I> struct TestNonType2 {};

// Usage:
using          Param  = typename Extract2<TestNonType2<42>>::Result;
using          PType  = typename Param::Type; // std::size_t
constexpr auto pValue = Param::Value;         // 42 
```

* * *

***° 更新**（2021 年 7 月 25 日）*

*   下面是如何分解使用**任何类型**的非类型参数声明的模板的示例。
*   不幸的是，虽然这小段代码似乎只使用了 C++11 语言特性，但它不能编译为 C++11。
*   这段代码完美地工作，并且做了它应该做的事情，但必须编译为 C++17。
*   `auto`自从添加作为非类型模板参数以来，标准肯定发生了变化，我认为*（但找不到关于它的信息）*，使编译器将模式*解释*`<typename T, template <T> class C, T V>`为.*`<auto V>`*

 *```
/* Template allowing to separately retrieve the components
 * of a template having one non-type parameter.
 */
template<typename T, template <T> class C, T V>
struct TmplInfo;

/* Function to decompose a template having one non-type
 * parameter and return its corresponding TmplInfo type.
 */
template<typename T, template <T> class C, T V>
inline constexpr TmplInfo<T, C, V> ToTmplInfo(C<V> && o);

/* Our victim template...
 */
template<std::size_t I> struct Victim;

/* Aliases Victim<42> and then decompose it to a TmplInfo.
 */
using V42   = Victim<42>;
using VInfo = decltype(ToTmplInfo(std::declval<V42>()));

/* Compiled for x64 arch, this gives:
 * using VInfo = TmplInfo<std::size_t, Victim, 42Ui64>;
 */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T20:16:33.813

这个另一个问题基本上是问同样的事情，但对于模板*类型*参数，而不是模板*非类型*参数：[模板元编程：（特征？）将指定的模板分解为类型 T<T2,T3 N,T4, ...>](https://stackoverflow.com/questions/11723652/template-metaprogramming-trait-for-dissecting-a-specified-template-into-type)

对于*类型*参数，这真的很容易。代码如下所示：

```
#include <tuple>
#include <vector>

template <class T> struct explode;

template <template <class... Args> class T, class... N>
struct explode<T<N...>>
{
    typedef T<N...> type;
    template <class... Args> using template_ = T<Args...>;
    template <int I> using type_parameter =
        typename std::tuple_element<I, std::tuple<N...>>::type;
};

#if TESTING
void test_harness()
{
    typedef explode<std::vector<int>> exv;

    exv::template_<char> vchar;  // The second parameter still has its default argument!
    exv::template_<exv::type_parameter<0>, exv::type_parameter<1>> vint;

    static_assert(std::is_same<exv::template_<char>, std::vector<char>>::value, "");
    static_assert(std::is_same<decltype(vchar), std::vector<char>>::value, "");
    static_assert(std::is_same<decltype(vint), std::vector<int>>::value, "");
    static_assert(std::is_same<exv::type, std::vector<int>>::value, "");
    static_assert(std::is_same<exv::type_parameter<0>, int>::value, "");
    static_assert(std::is_same<exv::type_parameter<1>, std::allocator<int>>::value, "");
}
#endif 
```

但是对于*非类型*参数，我还没有弄清楚它是否可能。您可以从外观相似的代码开始

```
template <class... ArgTypes, template <ArgTypes... Args> class T, ArgTypes... N>
struct explode<T<N...>>
{
    typedef T<N...> type;
    template <ArgTypes... Args> using template_ = T<Args...>;
    template <int I> using type_of_parameter =
        typename std::tuple_element<I, std::tuple<ArgTypes...>>::type;
    template <int I> struct nontype_parameter {
        static constexpr type_of_parameter<I> value() {
            return std::get<I>(std::tuple<ArgTypes...>(N...));
        }
    };
}; 
```

};

但 Clang （至少）不接受它：

```
test.cc:8:8: warning: class template partial specialization contains a template
      parameter that can not be deduced; this partial specialization will never
      be used
struct explode<T<N...>>
       ^~~~~~~~~~~~~~~~
test.cc:7:20: note: non-deducible template parameter 'ArgTypes'
template <class... ArgTypes, template <ArgTypes... Args> class T, ArgTypes... N>
                   ^ 
```

即使你以某种方式解决了这个问题，你仍然必须`std::get`用手工编码的`constexpr`版本替换，因为标准库`std::get`不是`constexpr`出于任何原因。******************

# iphone - 在 iOS 上，有没有办法将方法 addTarget 添加到 UIImageView？

> ID：10759953
> 
> 赞同：3
> 
> 时间：2012-05-25T18:57:42.230
> 
> 标签：iphone, ios, uiview, uikit, uiimageview

我刚刚发现一个`UIButton`对象有`addTarget`处理UI事件的方法，但是一个`UIImageView`对象没有这样的方法，所以我们不能在代码中做，也不能使用Interface Builder为`UIImageView`对象添加这样的Action . 可以使用手势识别器，但是有没有一种简单的方法可以添加`addTarget`，`UIImageView`以便我们的代码不部分由手势识别器处理，部分由`addTarget`方法处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T19:10:07.363

添加一个手势识别器调用与您的按钮调用相同的选择器应该不会太麻烦：

```
UIButton *button = [[UIButton alloc] init];
[button addTarget:self action:@selector(tapped:) forControlEvents:UIControlEventTouchUpInside];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[[self view] addGestureRecognizer:tapRecognizer];

- (void)tapped:(id)sender {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T16:58:40.273

因为 UIImageView 不是 UIControl 的子类（它是 UIButton 的超类），所以我的解决方案是伪造具有点击手势的 UIControl 的行为，并为自定义 UIImageView 创建一个 addTarget:action 方法，所以它看起来像其他 UIControl 类。

我在标题中创建了一个名为 SWImageView 的 UIImageView 子类：

```
- (void)addTarget:(id)target action:(SEL)action; 
```

在主文件中：

```
- (void)addTarget:(id)target action:(SEL)action
{
    if (tapGestureRecognizer!=nil) {
        [self removeGestureRecognizer:tapGestureRecognizer];
    }
    tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:target action:action];
    [self addGestureRecognizer:tapGestureRecognizer];
} 
```

不要忘记启用用户交互：

```
self.userInteractionEnabled = YES; 
```

# python - 触发 pygtk 中按钮的悬停事件功能

> ID：10759954
> 
> 赞同：1
> 
> 时间：2012-05-25T18:57:42.307
> 
> 标签：python, events, button, pygtk

当鼠标悬停在按钮上时，我想更改按钮的文本，

喜欢这个[http://www.youtube.com/watch?v=l7vCf_lvUsY](http://www.youtube.com/watch?v=l7vCf_lvUsY)

当鼠标悬停在pygtk中的按钮上时如何添加事件

我在文档中找不到这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T13:36:11.827

您需要连接到按钮的`enter-notify-event`和`leave-notify-event`信号。不要忘记在事件掩码中启用它们。我不认为你需要一个`EventBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:02:29.480

您可以添加按钮大小的 gtk.EventBox() 并在其中添加按钮。您可以轻松添加悬停事件。

# javascript - 如果 && 不在控制语句中，如何在 JavaScript 中工作？

> ID：10759957
> 
> 赞同：2
> 
> 时间：2012-05-25T18:57:53.923
> 
> 标签：javascript, operators

最近我正在使用一些 JavaScript 代码，我发现了这个：

```
<script type="text/javascript">
    window.localStorage&&window.localStorage.clear();
</script> 
```

我在网络上进行了研究，但没有发现任何关于 '&&' 操作符如果不在控制语句中的实际工作方式。

有谁知道它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:59:15.163

这与以下内容相同：

```
if(window.localStorage){
    window.localStorage.clear();
} 
```

`&&`一旦看到`false`（或“假”）值，就会短路。

所以，如果`window.localStorage`是`false`（或“假”），它就会停止。如果它是真的，它会继续运行`window.localStorage.clear()`。返回值被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:59:24.163

```
if this code evaluates to a truthy value&&run this code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:01:08.173

无论是否是控制语句的一部分，表达式都是表达式。在这种情况下，表达式涉及布尔运算。因此，如果第一部分是 ，则表达式将评估第二部分`true`。

`window.localStorage`在这种情况下，它只会在`window.localStorage`is not时执行 clear() 方法`null`。

# java - Java - 按位运算未达到预期

> ID：10759958
> 
> 赞同：2
> 
> 时间：2012-05-25T18:58:09.347
> 
> 标签：java, binary, bit-manipulation

```
private void test2() {
    // This test takes two shorts and sticks them together in a
    // 4 bit 12 bit configuration within a short, it then breaks
    // them apart again to see if it worked!
    short s0 = 4095;
    short s1 = 13;

    short sh = (short)((s1 << 12) | s0);

    System.out.println(sh);

    short[] sa = new short[] {
        (short)(sh & 0xFFF),
        (short)((sh >>> 12) & 0xF)
    };

    System.out.println(sa[0]);
    System.out.println(sa[1]);

} 
```

我对此的期望是这样的；

`s0`二进制是`b0000_1111_1111_1111`

`s1`二进制是`b0000_0000_0000_1101`

`sh`然后变成`b1101_1111_1111_1111`

前面`1`是符号，其余 15 位给出`sh`十进制值，`-24575`但这不是我输出到控制台的值（即`-8193`）。

我怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T19:06:39.487

b1101_1111_1111_1111 是-8193，它正在输出正确答案。可能想重温你的 2s 补充。

[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T19:07:31.497

结果实际上是正确的。二进制数用所谓的 2s 补码表示。因此，要计算负数的绝对值，您不仅要删除符号位并查看剩下的内容。而是您这样做： 1\. 翻转所有位，包括符号位 2\. 加 1

在你的情况下，这意味着你得到

1.  0010_0000_0000_0000
2.  0010_0000_0000_0001

这是8193，这正是打印出来的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T19:08:34.457

使用的表示不是符号模数，而是2-补码。因此，为了知道以 1 开头的位序列表示哪个数，必须先减去 1，然后再取反。在您的情况下，您将得到 1101_1111_1111_1110 反转，这将给出 0010_0000_0000_0001，即 8193。因此，没有任何问题 - 您只是混淆了内部表示机制。

# jquery - 使用jquery将具有动态ID的复选框值复制到隐藏的输入值

> ID：10759960
> 
> 赞同：1
> 
> 时间：2012-05-25T18:58:14.510
> 
> 标签：jquery, forms, checkbox, copy

我太……接近了，但被困在一件对你来说可能真的很简单的小事上。这个想法是将每个复选框的值添加到隐藏字段的值中。

当我添加第二个（或更多表单）和他们自己的变量 ID 时，它就崩溃了。我知道 jQuery 代码的第一部分有效，但我不知道如何`loader_id`进入这里。

```
$('#fileset-'+ loader_id +' input').click(updateFileField); 
```

我*认为*这就是我搞砸的地方，因为如果我在这里对 id 进行硬编码，其余的工作就很好。

以下是完整代码，也可以在[这里找到](http://jsfiddle.net/techbased/fXMrj/50/)

```
<div id="fileset-1" class="fileset">
<input type="checkbox" value="set1">
<input type="checkbox" value="set2">
<input type="checkbox" value="set3">
</div>  
File 1 <input type="text" val="" id="file-1" class="filestosend" /><br />

<div id="fileset-2" class="fileset">
<input type="checkbox" value="seta">
<input type="checkbox" value="setb">
<input type="checkbox" value="setc">
</div> 
File 2 <input type="text" val="" id="file-2" class="filestosend" />​ 
```

这是 jQuery 部分

```
 function updateFileField() {

 var allVals = [];
 var loader_id = $(this).parent('div').attr('id').replace('fileset-', '');
     $('#fileset-' + loader_id + ' :checked').each(function() {
       allVals.push($(this).val());
     });         
     $('#file-' + loader_id ).val(allVals);
  }
 $(function() {
     $('#fileset-'+ loader_id +' input').click(updateFileField);

}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:06:12.820

是你一直在寻找的吗？

```
$(".fileset :checkbox").on("change", function() {
    var div = $(this).parent();
    var id = div.attr("id").split("-")[1];
    var values = [];
    div.find(":checked").each(function() {
        values.push(this.value);
    });
    $("#file-" + id).val(values.join(","));
}); 
```

**演示：http:** [//jsfiddle.net/fXMrj/52/](http://jsfiddle.net/fXMrj/52/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:10:00.980

以下部分中的此处`loader_id`未定义。

```
$(function() {
     $('#fileset-'+ loader_id +' input').click(updateFileField);

}); 
```

# iis - 使用 IIS 管理器的 IIS 分析工具

> ID：10759963
> 
> 赞同：3
> 
> 时间：2012-05-25T18:58:40.097
> 
> 标签：iis, profiling

这真的很基本:) 但我需要从某个地方开始。我应该在哪里找到使用 IIS 管理器远程访问的 IIS 分析工具。

谢谢

# android - 来自 SQLite 的公共字符串

> ID：10759966
> 
> 赞同：0
> 
> 时间：2012-05-25T18:58:44.760
> 
> 标签：android, sqlite

我正在尝试创建一个将在我的应用程序的其他部分中使用的公共字符串。我试图查看游标的使用，但我不知道它如何返回我想要的。我只需要这是一个公共方法来返回 rowId = 1 的列 email 的值。

我离基地有多远，请给我一些指示？这个方法在我的`DatabaseHandler`课堂上

```
public String getUserName(String email) {

    SQLiteDatabase db = this.getReadableDatabase();
    String memail = 
            db.rawQuery("SELECT _email FROM login WHERE key_id = 1;", null);
    return memail;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:12:26.197

游标的使用：

```
String q = "SELECT * FROM login where(key_id = 1)";
Cursor c = db.rawQuery(q, null); //  db is a object of SQLiteDatabase type 
```

然后检索值**列电子邮件**，如：

```
 if(c.getCount() == 0)
              {                   
                 //No entry found
              }
              else  {
                  c.moveToFirst();
                  do {
                      String mail = c.getString(c.getColumnIndex("email")); 
                        } while (c.moveToNext());               
            c.close(); 
```

* * *

在您的方法中使用它并返回 String mail 的值 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:03:17.317

您需要使用光标如下：

```
public String getUserName(String email) {
    String email = null;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor c = db.rawQuery("SELECT _email FROM login WHERE key_id = 1;", null);
    if(c.moveToFirst())
        email = c.getString(0);
    c.close();

    return email;
} 
```

但是你的方法签名有点奇怪。您的方法说**getUserName**输入参数说电子邮件和返回电子邮件。

# json - 如何通过 JSON 从我的 REST 服务向我的客户发送 PDF 文件

> ID：10759970
> 
> 赞同：0
> 
> 时间：2012-05-25T18:58:57.380
> 
> 标签：json, rest

是否可以在 JSON 中发送二进制数据？我正在 ASP.NET MVC 中创建一个 REST 服务，我想将存储在我的服务器中的 PDF 文件返回给我的客户。我将如何做到这一点？我的数据传输媒介是 JSON & XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-01T05:49:21.273

看看这里：[how to send pdf in json](http://www.thinkingcode.info/2015/05/how-to-send-pdf-in-json/)，它列出了您可以考虑的几种方法。

最简单的方法是使用 Base64 编码将二进制数据转换为字符串。在 C# 中，这意味着调用`Convert.FromBase64String`. 然而，这有空间开销，因为 Base64 编码意味着大约 +33% 的内存。

如果你能侥幸逃脱，这是最简单的解决方案。如果额外的尺寸是一个问题，您可以考虑将其拉上拉链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:04:09.313

如果您的文件需要 JSON 或 XML 包装器，则必须对其进行文本编码，例如 Base 64。

# iphone - 为 iOS 更新分发证书的正确方法

> ID：10759973
> 
> 赞同：346
> 
> 时间：2012-05-25T18:59:09.460
> 
> 标签：iphone, ios, app-store, app-store-connect, ios-provisioning

我的分发证书以及我的所有配置文件将于 6 月 7 日到期。我如何正确更新它？我现在应该撤销它并要求一个新的吗？如果我这样做，我的所有实时应用程序都会被删除吗？

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2012-05-25T19:21:21.957

您的实时应用不会被删除。应用商店中的任何内容都不会发生任何事情。

一旦它们正式到期，唯一会受到影响的是您签署代码的能力（从而进行新的构建和提供更新）。

关于您的分发证书，一旦过期，它就会从会员中心的“证书、标识符和配置文件”部分消失。如果您想在到期前更新它，请撤销当前证书，您将获得一个按钮来申请新证书。

关于配置文件，到期前不用担心，继续使用即可。到期后只需更新它就很容易了。

放心的是，您在商店中的实时应用不会发生任何事情。

* * *

## 回答 #2

> 赞同：368
> 
> 时间：2014-10-29T08:11:05.537

当您的证书过期时，它会从会员中心的“证书、标识符和配置文件”部分消失。没有“更新”按钮可让您更新证书。**您可以在证书过期之前撤销证书并生成新证书**。或者您可以等待它过期并消失，然后生成一个新证书。在[Apple 的 App Distribution Guide 中](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html#//apple_ref/doc/uid/TP40012582-CH31-SW29)：

> **更换过期证书**
> 
> 当您的开发或分发证书过期时，将其删除并在 Xcode 中请求新证书。

当您的证书过期或被吊销时，任何使用过期/吊销证书的配置文件都将反映为“无效”。您无法使用这些无效的配置文件构建和签署任何应用程序。正如您可以想象的那样，我宁愿在证书过期之前撤销并重新生成证书。

> 问：如果我这样做了，我所有的在线应用程序都会被删除吗？

**已经在 App Store 上的应用程序继续正常运行。**同样，在[Apple 的 App Distribution Guide](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html#//apple_ref/doc/uid/TP40012582-CH31-SW34 "重新创建证书和更新相关配置文件")中：

> 重要提示：重新创建您的开发或分发证书不会影响您提交到商店的应用程序，也不会影响您更新它们的能力。

所以……</p>

> 问：如何正确续订？

如上所述，没有更新证书。请按照以下步骤吊销和重新生成新证书以及受影响的配置文件。Xcode 8.3 和 Xcode 9 的说明已更新。

## 第 1 步：吊销即将到期的证书

登录[会员中心](http://developer.apple.com/account)> 证书、标识符和配置文件，选择即将到期的证书。记下证书的到期日期，然后单击“撤销”按钮。

[![选择即将到期的证书，然后单击撤销按钮](../Images/7e0407ae7137a5954d8bd88ae6d9b3a7.png)](https://i.stack.imgur.com/j5cpl.png)

## 第 2 步：（可选）从您的钥匙串中删除已撤销的证书

或者，如果您不希望系统中存在已撤销的证书，您可以将它们从系统中删除。不幸的是，Xcode > Preferences > Accounts > [Apple ID] > Manage Certificates 中的“删除证书”功能似乎总是被禁用，所以我们必须使用 Keychain Access.app (/Applications/Utilities/Keychain Access.应用程序）。

[![（可选）使用 Keychain Access.app 删除已撤销的证书](../Images/bd01e3f2cf33bdee654df423b6b6d796.png)](https://i.stack.imgur.com/TsQb2.png)

按“登录”钥匙串和“证书”类别过滤。找到您刚刚在步骤 1 中吊销的证书。

根据您刚刚吊销的证书，搜索“Mac”或“iPhone”。Mac App Store 分发证书以“3rd Party Mac Developer”开头，iOS App Store 分发证书以“iPhone Distribution”开头。

您可以根据团队名称、证书类型（Mac 或 iOS）以及您在步骤 1 中记下的证书的到期日期来定位被吊销的证书。

## 第 3 步：使用 Xcode 申请新证书

在 Xcode > Preferences > Accounts > [Apple ID] > Manage Certificates... 下，单击左下角的“+”按钮，然后选择您刚刚撤销的相同类型的证书，让 Xcode 为您请求一个新证书.

[![让 Xcode 在 Xcode > Preferences > Accounts > Apple ID > Manage Certificates... ></a></p> 中为您申请新证书 <h2>第 4 步：更新您的配置文件以使用新证书</h2> <p>之后，返回 <a href=](../Images/7018a4652e88c136b875f741f0fbe618.png)会员中心](https://i.stack.imgur.com/dxF7r.png)> 证书、标识符和配置文件 > 供应配置文件 > 全部。您会注意到，任何使用已撤销证书的配置文件现在都反映为“无效”。

[![请注意，使用已撤销证书的任何配置文件现在都反映为“无效”"></a></p> <p>单击现在“无效”的任何配置文件，单击“编辑”，然后选择新创建的证书，然后单击“生成”。重复此操作，直到使用新证书重新生成所有配置文件。</p> <p><a href=](../Images/e4edc7c04837be0dda4ebbeb0b32ffe2.png)![选择新创建的证书，然后单击生成](../Images/a3ad291189ae55e62c263ecd9dc0db40.png)](https://i.stack.imgur.com/Riob5.png)

## 第 5 步：使用 Xcode 下载新的配置文件

**提示**：在使用 Xcode 下载新配置文件之前，您可能需要从 Mac 中清除所有现有的和可能无效的配置文件。您可以通过删除所有配置文件来做到这一点`~/Library/MobileDevice/Provisioning Profiles`

返回 Xcode > Preferences > Accounts > [Apple ID]，单击“下载所有配置文件”按钮以要求 Xcode 从您的开发人员帐户下载所有配置文件。

[![单击 Download All Profiles for Xcode 下载所有新生成的配置文件](../Images/e849c61740790815a652c6639bdcda7c.png)](https://i.stack.imgur.com/4Wsr9.png)

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2020-01-22T00:10:15.387

截至 2020 年 1 月和 Xcode 11.3.1 -

*   打开 Xcode
*   打开 Xcode Preferences (Xcode->Preferences 或 Cmd-,)
*   点击账户
*   在左侧，点击您的开发者 ID
*   在右下角，单击*管理证书...*
*   在左下角，单击*+*（加号）右侧的箭头
*   从菜单中选择*Apple Distribution*

Xcode 会自动创建 Apple Distribution 证书，安装在 Keychain Access 中，并更新 Xcode 的签名信息

（注意：现在提供单个*Apple 分发证书，而不是以前的**iOS 分发*证书和等效证书。）

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-10-06T08:43:35.217

很简单就是更新你的证书。转到您的开发人员会员中心并转到您的配置文件并查看证书 Active 和 InActive 并选择 Inactive certificate 并点击 Edit 按钮然后点击 generate 按钮。现在您的证书已成功续订 1 年。谢谢

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-15T06:57:31.133

**大家好..**

**我找到了更新 IOS 证书的最佳方法，只需简单的步骤。在这里，每个人都可以毫无疑问地更新。**

> IOS 证书更新/证书更改步骤：

**1）**打开钥匙链访问。

**2)**点击显示证书。

**3）**钥匙串访问=>证书助手=>向证书颁发机构请求证书..

**4)**打开开发者控制台 => 帐户 => 证书 IDS & Profiles。

**5)**点击 Certificates + 图标并创建一个新的 => ios Distribution (app store and Ad Hoc)。然后点击继续按钮后。

**6)**选择并上传证书 => 之后点击下载按钮下载上传的证书。

**7）**然后编辑证书，然后更新最新上传的证书。

**8)**打开 Xcode => 点击签名和功能 => 下载配置文件 => 选择配置文件新上传的证书。

> 参考视频链接[https://youtu.be/v19ZoFa1cJs](https://youtu.be/v19ZoFa1cJs)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T12:44:45.680

这是一个非常有用的线程，我遵循了与@junjie 提到的相同的步骤，但对我来说发生了一些奇怪的事情，以下是我所做的步骤。

1.  前往开发者门户并撤销即将到期的证书。
2.  转到 XCode6.4 并在帐户设置中，证书仍然显示有效，我发疯了。
3.  然后我打开 XCode7，证书显示为**“重置”**按钮而不是创建，我点击了重置按钮，稍后在门户中我能够看到扩展证书存在。这就是Apple所说的重置按钮

> 如果 Xcode 检测到签名身份存在问题，它会在 Accounts 首选项中显示适当的操作。如果 Xcode 显示创建按钮，则会员中心或 Mac 上不存在签名身份。如果 Xcode 显示重置按钮，则签名身份在您的 Mac 上不可用 - 例如，它缺少私钥。如果单击 Reset 按钮，Xcode 会撤销并请求相应的证书。

4.  我尝试用它创建一个 Appstore ipa，只是为了进行测试，它运行良好，所以我得救了，但仍然不确定发生了什么。可能是我在我的 Mac 中配置了多个帐户，不知道。

# php - 如何允许我网站的用户通过 Facebook 登录/注册并将 Facebook 登录系统与我自己的登录系统集成？

> ID：10759981
> 
> 赞同：5
> 
> 时间：2012-05-25T18:59:42.260
> 
> 标签：php, facebook

我只是迷路了，不知道从哪里开始，请给我看我可以阅读的文档，让用户使用 Facebook 注册/登录到我的网站。

假如说

*   我有自己的注册/登录系统

我怎样才能

*   使用他们的 Facebook 个人资料登录用户
*   如果用户未注册，请使用他们的 Facebook 个人资料快速注册用户

任何想法或文档表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T19:22:20.737

首先，您需要在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)注册一个 facebook 应用程序。那么这段代码对你来说将是一个很好的起点：

```
<iframe src="https://www.facebook.com/plugins/registration?
             client_id=YOUR_APP_ID&
             redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fecho%2F&
             fields=name,birthday,gender,location,email"
        scrolling="auto"
        allowTransparency="true"
        width="100%"
        height="400">
</iframe> 
```

注册插件的完整文档可以在这里找到：[https ://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)

# string - “on-the-fly”（例如生成器）拆分像 split() 但在 Python 3 中没有正则表达式

> ID：10759990
> 
> 赞同：0
> 
> 时间：2012-05-25T19:00:13.120
> 
> 标签：string, performance, python-3.x, generator

与上一个问题有关：[Python3 split() with generator](https://stackoverflow.com/questions/10728747/python3-split-with-generator)。

有没有使用生成器或迭代器拆分列表的方法，但比创建正则表达式更有效？

我想“.split()”不是用正则表达式实现的。

我希望看到等效的，但没有在内存中创建整个拆分列表，而是使用生成器或迭代器“即时”创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:17:30.360

这似乎比正则表达式快一点：

```
def itersplit2(s, sep):
    i = 0
    l = len(sep)
    j = s.find(sep, i)
    while j > -1:
        yield s[i:j]
        i = j + l
        j = s.find(sep, i)
    else:
        yield s[i:] 
```

但比**它慢**10 倍`str.split`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:11:15.567

这是与 None 不同的分隔符版本：

```
def iter_split(s, sep):
    start = 0
    L = len(s)
    lsep = len(sep)
    assert lsep > 0
    while start < L:
        end = s.find(sep, start)
        if end != -1:
            yield s[start:end]
            start = end + lsep
            if start == L:
                yield ''    # sep found but nothing after
        else:
            yield s[start:] # the last element
            start = L       # to quit the loop 
```

我没有对其进行大量测试，因此它可能包含一些错误。结果与`str.split()`：

```
sep = '<>'
s = '1<>2<>3'
print('--------------', repr(s), repr(sep))
print(s.split(sep))
print(list(iter_split(s, sep)))

s = '<>1<>2<>3<>'
print('--------------', repr(s), repr(sep))
print(s.split(sep))
print(list(iter_split(s, sep)))

sep = ' '
s = '1 2 3'
print('--------------', repr(s), repr(sep))
print(s.split(sep))
print(list(iter_split(s, sep)))

s = '1   2   3'
print('--------------', repr(s), repr(sep))
print(s.split(sep))
print(list(iter_split(s, sep))) 
```

它显示：

```
-------------- '1<>2<>3' '<>'
['1', '2', '3']
['1', '2', '3']
-------------- '<>1<>2<>3<>' '<>'
['', '1', '2', '3', '']
['', '1', '2', '3', '']
-------------- '1 2 3' ' '
['1', '2', '3']
['1', '2', '3']
-------------- '1   2   3' ' '
['1', '', '', '2', '', '', '3']
['1', '', '', '2', '', '', '3'] 
```

由于规则更多，默认`None`分隔符的实现会更复杂。

无论如何，预编译的正则表达式非常有效。它们在编写时容易出错，但一旦准备好，它们就会很快。

# actionscript-3 - Flex：可以在不同的浏览器窗口中运行 Flex 应用程序的多个实例吗？

> ID：10759997
> 
> 赞同：0
> 
> 时间：2012-05-25T19:00:55.887
> 
> 标签：actionscript-3, apache-flex, flex4

Flex 应用程序（默认情况下）是否允许用户多次登录，每次使用新的浏览器窗口或选项卡，并且不会遇到任何共享内存问题？也就是说，由于它是同一个应用程序，缓存在本地 RAM 中的变量（可能）使用相同的名称（？）。Flex有这样的问题吗？

或者，因为每个正在运行的应用程序都在一个单独的浏览器中，所以它们被认为是彼此独立运行的？

另外，如果我将 BlazeDS 添加到组合中，是否会在上述场景中添加任何新问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:08:59.987

它们都在自己的内存空间中运行，因此您不会有任何冲突或任何事情。