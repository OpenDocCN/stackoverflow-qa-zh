# StackOverflow 问答 10471000-10471999

# java - 带有 HTTP 上传的 Java ProgressBar 不更新

> ID：10471001
> 
> 赞同：2
> 
> 时间：2012-05-06T13:47:00.127
> 
> 标签：java, swing, file-upload, java-io, jprogressbar

我希望我`jProgressBar`在`HTTP File Upload`. 我是 Java 新手，我不确定自己做的是否正确，这是我的代码：

```
private static final String Boundary = "--7d021a37605f0";

public void upload(URL url, File f) throws Exception
{
    HttpURLConnection theUrlConnection = (HttpURLConnection) url.openConnection();
    theUrlConnection.setDoOutput(true);
    theUrlConnection.setDoInput(true);
    theUrlConnection.setUseCaches(false);
    theUrlConnection.setChunkedStreamingMode(1024);

    theUrlConnection.setRequestProperty("Content-Type", "multipart/form-data; boundary="
            + Boundary);

    DataOutputStream httpOut = new DataOutputStream(theUrlConnection.getOutputStream());

        String str = "--" + Boundary + "\r\n"
                   + "Content-Disposition: form-data;name=\"file1\"; filename=\"" + f.getName() + "\"\r\n"
                   + "Content-Type: image/png\r\n"
                   + "\r\n";

        httpOut.write(str.getBytes());

        FileInputStream uploadFileReader = new FileInputStream(f);
        int numBytesToRead = 1024;
        int availableBytesToRead;
        jProgressBar1.setMaximum(uploadFileReader.available());
        while ((availableBytesToRead = uploadFileReader.available()) > 0)
        {
            jProgressBar1.setValue(jProgressBar1.getMaximum() - availableBytesToRead);
            byte[] bufferBytesRead;
            bufferBytesRead = availableBytesToRead >= numBytesToRead ? new byte[numBytesToRead]
                    : new byte[availableBytesToRead];
            uploadFileReader.read(bufferBytesRead);
            httpOut.write(bufferBytesRead);
            httpOut.flush();
        }
        httpOut.write(("--" + Boundary + "--\r\n").getBytes());

    httpOut.flush();
    httpOut.close();

    // read & parse the response
    InputStream is = theUrlConnection.getInputStream();
    StringBuilder response = new StringBuilder();
    byte[] respBuffer = new byte[4096];
    while (is.read(respBuffer) >= 0)
    {
        response.append(new String(respBuffer).trim());
    }
    is.close();
    System.out.println(response.toString());
} 
```

这条线`jProgressBar1.setValue(jProgressBar1.getMaximum() - availableBytesToRead);`正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T13:51:24.617

此处标记的每 30 个问题中`java`就有一个与您的解决方案相同。您正在事件处理程序中完成所有工作，这意味着它发生在事件调度线程上——并阻止所有进一步的 GUI 更新，直到它结束。您必须使用 a`SwingWorker`并将您的工作委托给它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T14:11:34.057

我赞同@Marko Topolnic 关于使用[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)的建议， 看看这些有用的链接，让您进一步了解*Howto*，

1.  [如何使用进度条](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)
2.  [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
3.  [工作线程和 SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

和@trashgod 的一个[例子](https://stackoverflow.com/a/4637725/977676)。

# ios - 将一个数据库中的表复制到另一个数据库

> ID：10471003
> 
> 赞同：8
> 
> 时间：2012-05-06T13:47:09.440
> 
> 标签：ios, database, sqlite, copy

我想将表从 aDB 复制到另一个 bDB。

所以我做了一个方法。我认为打开 2 数据库和使用插入查询会起作用，但我不知道详细方法。

```
-(void)copyDatabaseTableSoruceFileName:(NSString *)source CopyFileName:(NSString *)copy
{
sqlite3 *sourceDatabase=NULL;
sqlite3 *copyDatabase=NULL;

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
NSString* documentDir = [paths objectAtIndex:0];

//source
    [self copyFileIfNeed:source path:documentDir];

NSString *SourceDBPath = [documentDir stringByAppendingPathComponent:source];
if( sqlite3_open([SourceDBPath UTF8String],&sourceDatabase)!= SQLITE_OK )
{
    NSLog(@"DB File Open Error :%@", SourceDBPath);
   sourceDatabase = NULL;
}
//copy    
[self copyFileIfNeed:copy path:documentDir];

NSString *CopyDBPath = [documentDir stringByAppendingPathComponent:copy];
if( sqlite3_open([CopyDBPath UTF8String],&copyDatabase)!= SQLITE_OK )
{
    NSLog(@"DB File Open Error :%@", CopyDBPath);
    copyDatabase = NULL;
}

//source to copy

 // How in this area?

} 
```

这样对吗？以及如何制作更多？//复制区域的源。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-08T20:46:40.997

在 sqlite3 中，您可以组合 ATTACH[1] 和 CREATE TABLE .. AS[2] 命令：

首先，您正在打开“bDB”数据库，然后执行以下语句：

```
ATTACH DATABASE "myother.db" AS aDB; 
```

之后，您可以使用 CREATE TABLE 语法：

```
CREATE TABLE newTableInDB1 AS SELECT * FROM aDB.oldTableInMyOtherDB; 
```

这会将数据“复制”到您的新数据库中。如果你想合并数据，还有一个 INSERT[3] 语句，但是你需要像这样引用你的字段：

```
INSERT INTO newtable (field1,field2) 
  SELECT otherfield1,otherfield2 FROM aDB.oldTableInMyOtherDB; 
```

参考：

[1] [http://www.sqlite.org/lang_attach.html](http://www.sqlite.org/lang_attach.html)

[2] [http://www.sqlite.org/lang_createtable.html](http://www.sqlite.org/lang_createtable.html)

[3] [http://www.sqlite.org/lang_insert.html](http://www.sqlite.org/lang_insert.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T12:03:16.557

经过数小时的 SO 斗争，并在上述帖子的帮助下，我终于能够为此创建 Objective-C 代码。

```
NSString* dbPath1;
NSString* dbPath2;

dbPath1 = [self getDB1Path]; //This db have the desired table to be copied
dbPath2 = [self getDB2Path]; //This needs to have the desired table 

//open database which contains the desired "table"
if (sqlite3_open(dbPath1.UTF8String, &databasePhase2) == SQLITE_OK)
{
    NSString *attachSQL = [NSString stringWithFormat: @"ATTACH DATABASE \"%@\" AS phase2_db",dbPath2];

    const char *attachSQLChar = [attachSQL UTF8String];
    char* errInfo;
    int result = sqlite3_exec(databasePhase2, attachSQLChar, nil, nil, &errInfo);

    if (SQLITE_OK == result)
    {
        NSLog(@"new db attached");
        NSString *attachSQL = [NSString stringWithFormat: @"CREATE TABLE newTableInDB1 AS SELECT * FROM phase2_db.qmAyahInfo"];

        const char *createSQLChar = [attachSQL UTF8String];
        int result2 = sqlite3_exec(databasePhase2, createSQLChar, nil, nil, &errInfo);
        if (SQLITE_OK == result2)
        {
            NSLog(@"New table created in attached db");
        }
    }
    sqlite3_close(databasePhase2);
} 
```

# c - 在 C 中为什么函数指针更适合函数回调？

> ID：10471004
> 
> 赞同：0
> 
> 时间：2012-05-06T13:47:40.783
> 
> 标签：c, callback, switch-statement, function-pointers

我知道函数回调是在另一个函数的调用中嵌入另一个函数指针，如下所示：

**函数声明：**

```
function_call_back(int x, int y, void (*functonPtr)(int x, char y , struct newStruct* sptr))

void func(int x , char y , struct newStruct* sptr1)
{
    //perform Algorithm 1 on x,y ,sptr1
}

void func2(int x , char y , struct newStruct* sptr2)
{
    //perform Algorithm 1 on x,y ,sptr2
}

void func3(int x , char y , struct newStruct* sptr3)
{
    //perform Algorithm 1 on x,y ,sptr3
}

void func4(int x , char y , struct newStruct* sptr4)
{
    //perform Algorithm 1 on x,y ,sptr4
}

main()
{
    // function calling 
    function_call_back(23, 2256, func1);
} 
```

这里的第三个参数是`func`，因为函数名等价于函数指针

我同意`func`这里可以通过**在调用 function_call_back 之前在上面的 main 中添加这一行来改变类似函数签名的不同变体：**

```
 typedef void (*fptr)(int int x , char y , struct newStruct* ptr);

  fptr f1 = func2; // or func3, or func4

  function_call_back(23, 2256, f1); 
```

第三个参数是`func`，作为函数名称，但我想知道这也可以通过以下方式实现，只需在调用中添加函数调用代码`function_call_back`：

```
function_call_back(23, 2256, functionCallingcode); //third argument is func 
```

的新声明`function_call_back`是：

```
function_call_back(int x, int y, int functionCallingCode) 
```

它的新定义是：

```
void function_call_back(int x, int y, int functionCallingCode)
{
switch(functionCallingCode)
case 1:
func1(1,"g",sptr1);
break;

case 2:
func2(1,"c",sptr2);

break

case 3:
func3(1,"d",sptr3);
break;

case 4 : 
func4(1,"s",sptr4);
break ;

default : 
 printf("Wrong Function calling code");

}
} 
```

那为什么要使用函数指针呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:31:15.350

使用 switch 语句，您可以调用您选择编码到回调函数中的**每个**函数。您可以保证只有一个已知的函数集合可以被调用。

使用函数指针，您可以调用您以后可能在开发中完全不相关的点定义的**任何函数。**您可以自由定义和使用任何具有匹配签名的回调函数。

换句话说，开关允许您在有限的一组选择中进行分支，而函数指针则为您提供无限的灵活性。通常没有什么理由比函数指针更喜欢其他任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T13:52:09.793

它们并不好，它们实际上是您唯一的选择。

您可以进行此切换，但以相同的方法，您可以将整个程序编写在一个函数中。函数用于分隔代码单元，而这个“切换函数”只是单元太多东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T14:18:07.877

在您描述的情况下，您可以清楚地获得所需的功能，而无需使用函数指针。

但是，请考虑如果您想在几周内添加 func5 选项会发生什么。然后随着时间的推移，您想要添加 func6、func7、...、func10、func20。function_call_back() 变得更大更混乱，而使用函数指针版本，您可以添加任意数量的不同功能，而无需编辑 function_call_back()。

函数指针实现还为您提供了将 function_call_back() 打包为库的一部分的灵活性，您或其他任何人都可以在另一个程序中使用它，而不必弄乱甚至拥有源代码。请参阅标准库 qsort 函数以了解为什么这非常方便的示例。

# wpf - 什么版本的 Blend 支持 WPF 4.5，可移植类库？

> ID：10471008
> 
> 赞同：7
> 
> 时间：2012-05-06T13:48:17.693
> 
> 标签：wpf, expression-blend, visual-studio-2012, .net-4.5, portable-class-library

我正在为一个新的新建应用程序设置项目结构。我们的初始版本仅支持 WPF 客户端，但我们希望最终也推出 Metro 和 Silverlight 客户端。我决定如下：

Core Library - 针对 Metro、.NET 4.5、SL4、Windows Phone 7.5 的可移植类库

WPF 应用程序 - 面向 .NET 4.5

我们的模型/视图模型层定义在核心库中，视图定义在 WPF 应用程序中。我选择 .NET 4.5 是为了支持以 WPF 和 Metro 都可以使用的方式在核心库中定义视图模型。

这在 Windows 7 Pro 上运行的 Visual Studio 11 Beta 中运行良好。我有一个工作视图，它的数据绑定到核心库中定义的 ViewModel。我的问题是混合。当我在 Blend 中打开视图时，我没有找到设计师。我怀疑这里的问题是.NET 4.5 上的 WPF 支持。我已经尝试过 Blend 4 和 Blend for VS11 Beta。

有谁知道如何让设计师在 Blend for WPF 视图中工作，如上所述？

*截至 2012 年 5 月 10 日的状态：VS11 和 Blend 的组合似乎不支持 WPF 4.5。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T10:54:38.853

自 Visual Studio 2012 [Update 2](http://blogs.msdn.com/b/somasegar/archive/2013/04/04/visual-studio-2012-update-2-now-available.aspx)起，Blend 的预览版（[用于 VS2012 的 Blend + Sketchflow 预览版](http://blendinsider.com/technical/announcing-blend-sketchflow-preview-for-visual-studio-2012-2012-08-15/)）已合并到香草“Blend for Visual Studio 2012”中。这意味着现在所有[XAML 平台](http://msdn.microsoft.com/en-us/library/vstudio/jj171012.aspx)都有一个设计器应用程序：

> 使用 Blend（适用于 Visual Studio 2012），您可以设计和构建：
> 
> *   Windows 应用商店应用
> *   Windows Phone 应用程序
> *   Sketchflow 原型
> *   Microsoft Silverlight 和 Windows Presentation Foundation (WPF) 应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T18:52:38.373

编辑：此时，没有对 WPF 4.5 的 Blend 支持。以下是相关信息：

您需要在 Windows 8 预览版本上安装 Visual Studio 11 Beta（Ultimate、Premium 或 Professional -- NOT Express，因为它缺少您想要的 Blend 部分）。这就是他们决定排队的方式。即使你这样做了，你仍然不会有 WPF 支持：

> 请注意，在 Visual Studio 测试版中，对 Windows 8 的 XAML 创作支持与 HTML 创作支持的稳定性和完整性水平不同。

Windows 8 要求：http: [//blogs.msdn.com/b/devschool/archive/2012/03/01/blend-5-and-visual-studio-11-awesome.aspx](http://blogs.msdn.com/b/devschool/archive/2012/03/01/blend-5-and-visual-studio-11-awesome.aspx)

Visual Studio 版本：[http ://blendinsider.com/technical/visual-authoring-for-the-windows-8-consumer-preview-with-blend-and-visual-studio-2012-02-29/](http://blendinsider.com/technical/visual-authoring-for-the-windows-8-consumer-preview-with-blend-and-visual-studio-2012-02-29/)

# public-key-encryption - 在 Diffie-Hellman 中，中间进攻的人是如何工作的？

> ID：10471009
> 
> 赞同：36
> 
> 时间：2012-05-06T13:48:18.270
> 
> 标签：public-key-encryption, diffie-hellman

在 Diffie-Hellman 密钥交换期间，我对中间人攻击的机制有疑问。我听说它可能发生在密钥协议通信期间。但是在 CA（证书颁发机构）存在的情况下，接收者可以在接收到发送者的公钥时对发送者进行身份验证。因此，中间人如何攻击？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-08T10:16:09.933

我认为您将基本的 Diffe-Hellman（一种密钥交换协议）与使用证书颁发机构（CA）的“认证版本”混淆了。

[RSA Labs](http://www.emc.com/emc-plus/rsa-labs/standards-initiatives/what-is-diffie-hellman.htm)很好地解释了基本的 Diffe-Hellman 如何易受中间人攻击。

> “Diffie-Hellman 密钥交换容易受到中间人攻击。在这种攻击中，对手 Carol 拦截了 Alice 的公共价值并将她自己的公共价值发送给 Bob。当 Bob 传输他的公共价值时，Carol 将其替换为Carol 和 Alice 就一个共享密钥达成一致，Carol 和 Bob 就另一个共享密钥达成一致。在交换之后，Carol 简单地解密 Alice 或 Bob 发出的任何消息，然后读取并可能修改“他们在使用适当的密钥重新加密并将其传输给另一方之前。存在此漏洞是因为 Diffie-Hellman 密钥交换不会对参与者进行身份验证。可能的解决方案包括使用数字签名和其他协议变体。”

它遵循经过身份验证的版本，也称为[站对站协议](http://en.wikipedia.org/wiki/Station-to-Station_protocol)：

> “粗略地说，基本思想如下。在协议执行之前，双方 Alice 和 Bob 各自获得一个公钥/私钥对和一个公钥证书。在协议过程中，Alice 在某个消息，覆盖公共值*g* ^a mod *p*。Bob 以类似的方式进行。即使 Carol 仍然能够拦截 Alice 和 Bob 之间的消息，但她不能在没有 Alice 的私钥和 Bob 的私钥的情况下伪造签名。因此，增强协议击败了中间人攻击。”

所以基本版本容易受到中间人攻击，而使用公钥证书的认证版本则不会。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-10-17T02:38:28.500

这就是 Diffie-Hellman 的工作原理：

![迪菲-赫尔曼](../Images/3c320389ca099eb03803ec6587ddc357.png)

这就是 Diffie-Hellman 中的中间人攻击的工作原理：

![中间人](../Images/b26e780dfb12c9c69fdc081dfa1140a4.png)

有两次 DH 密钥交换，Alice 和 Attacker 与 k1 共享相同的密钥，而 Bob 和 Attacker 与 k2 共享另一个相同的密钥。

因为爱丽丝和鲍勃彼此没有先验知识。

但是攻击者必须继续监听和转发。

# javascript - 不知道 div 宽度的 div 水平居中，可能吗？

> ID：10471011
> 
> 赞同：3
> 
> 时间：2012-05-06T13:48:38.177
> 
> 标签：javascript, jquery, css

我目前正在使用 css/jquery 构建一个弹出框脚本，但在所有情况下我似乎都无法让 div 居中在屏幕上。是否可以在不知道 div 宽度的情况下将其居中？

我没有在此处发布所有代码，而是在[http://goo.gl/N45cp上提供了一个实时示例](http://goo.gl/N45cp)

非常感谢任何形式的帮助！

最好的问候约翰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T13:55:36.437

```
<div id="wrapper">
    <div id="child"></div>
</div> 
```

如果 的位置`#child`不是`absolute`，可以将左右边距设置为`auto`：

```
#child {
   margin: 0 auto;
} 
```

或者，如果职位是`absolute`您可以尝试以下操作：

```
$("#child").css("left", function(){
    return ($("#wrapper").width() - $(this).width()) / 2;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T13:59:23.843

如果你有一个包含的 div，你可以用纯 CSS 实现这一点：

HTML

```
​&lt;div id="outer">
    <div id="inner">some content here</div>
</div> 
```

CSS

```
​body, html, div#outer { height:100%; }
div#outer { text-align:center; }
div#inner { display:inline-block; } 
```

[http://jsfiddle.net/NjZbW/](http://jsfiddle.net/NjZbW/)

​​​​​​​​​​​​​​​​</p>

# python - Unicode、正则表达式和 PyPy

> ID：10471016
> 
> 赞同：7
> 
> 时间：2012-05-06T13:49:21.853
> 
> 标签：python, regex, string, unicode, pypy

我编写了一个程序来向 Python 正则表达式添加（有限的）[unicode 支持](https://stackoverflow.com/q/1832893/520779)，虽然它在 CPython 2.5.2 上运行良好，但在 PyPy（~~1.5.0-alpha0~~ 1.8.0，实现 Python ~~2.7.1~~ 2.7.2）上运行良好，两者都在 Windows XP 上运行（*编辑：*如评论中所见，@dbaupp 可以在 Linux 上正常运行）。我不知道为什么，但我怀疑这与我对`u"`and的使用有关`ur"`。完整来源在[这里](http://difnet.com.br/opensource/unicode_hack.py)，相关位是：

```
# -*- coding:utf-8 -*-
import re

# Regexps to match characters in the BMP according to their Unicode category.
# Extracted from Unicode specification, version 5.0.0, source:
# http://unicode.org/versions/Unicode5.0.0/
unicode_categories = {
    ur'Pi':ur'[\u00ab\u2018\u201b\u201c\u201f\u2039\u2e02\u2e04\u2e09\u2e0c\u2e1c]',
    ur'Sk':ur'[\u005e\u0060\u00a8\u00af\u00b4\u00b8\u02c2-\u02c5\u02d2-\u02df\u02...',
    ur'Sm':ur'[\u002b\u003c-\u003e\u007c\u007e\u00ac\u00b1\u00d7\u00f7\u03f6\u204...',
    ...
    ur'Pf':ur'[\u00bb\u2019\u201d\u203a\u2e03\u2e05\u2e0a\u2e0d\u2e1d]',
    ur'Me':ur'[\u0488\u0489\u06de\u20dd-\u20e0\u20e2-\u20e4]',
    ur'Mc':ur'[\u0903\u093e-\u0940\u0949-\u094c\u0982\u0983\u09be-\u09c0\u09c7\u0...',
}

def hack_regexp(regexp_string):
    for (k,v) in unicode_categories.items():
        regexp_string = regexp_string.replace((ur'\p{%s}' % k),v)
    return regexp_string

def regex(regexp_string,flags=0):
    """Shortcut for re.compile that also translates and add the UNICODE flag

    Example usage:
        >>> from unicode_hack import regex
        >>> result = regex(ur'^\p{Ll}\p{L}*').match(u'áÇñ123')
        >>> print result.group(0)
        áÇñ
        >>> 
    """
    return re.compile(hack_regexp(regexp_string), flags | re.UNICODE) 
```

（在 PyPy 上，“示例用法”中没有匹配项，所以`result`是`None`）

重申一下，程序运行良好（在 CPython 上）：Unicode 数据似乎正确，替换按预期工作，使用示例运行正常（通过`doctest`和直接在命令行中键入）。源文件编码也是正确的，`coding`头文件中的指令似乎可以被Python识别。

关于 PyPy 的“不同”行为是否会破坏我的代码的任何想法？许多事情浮现在我的脑海（无法识别`coding`的标头、命令行中的不同编码、对`r`and的不同解释`u`），但就我的测试而言，CPython 和 PyPy 的行为似乎相同，所以我对下一步该尝试什么一无所知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T22:13:13.367

为什么不直接使用[Matthew Barnett 的超级推荐`regexp`模块](http://pypi.python.org/pypi/regex)呢？

它适用于 Python 3 和旧版 Python 2，是`re`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T15:08:04.653

`coding`似乎 PyPy 在读取源文件（可能是无法识别的标头）和在命令行中输入/输出时都有一些编码问题。我用以下代码替换了我的示例代码：

```
>>> from unicode_hack import regex
>>> result = regex(ur'^\p{Ll}\p{L}*').match(u'áÇñ123')
>>> print result.group(0) == u'áÇñ'
True
>>> 
```

它继续在 CPython 上工作并在 PyPy 上失败。将“áÇñ”替换为其转义字符 - `u'\xe1\xc7\xf1'`- OTOH 成功了：

```
>>> from unicode_hack import regex
>>> result = regex(ur'^\p{Ll}\p{L}*').match(u'\xe1\xc7\xf1123')
>>> print result.group(0) == u'\xe1\xc7\xf1'
True
>>> 
```

这对两者都很好。我相信问题仅限于这两种情况（源加载和命令行），因为尝试使用打开 UTF-8 文件可以`codecs.open`正常工作。当我尝试在命令行中输入字符串“áÇñ”时，或者当我使用 加载“unicode_hack.py”的源代码时`codecs`，我在 CPython 上得到相同的结果：

```
>>> u'áÇñ'
u'\xe1\xc7\xf1'
>>> import codecs
>>> codecs.open('unicode_hack.py','r','utf8').read()[19171:19174]
u'\xe1\xc7\xf1' 
```

但 PyPy 的结果不同：

```
>>>> u'áÇñ'
u'\xa0\u20ac\xa4'
>>>> import codecs
>>>> codecs.open('unicode_hack.py','r','utf8').read()[19171:19174]
u'\xe1\xc7\xf1' 
```

**更新：在 PyPy 错误跟踪系统上提交的** [Issue1139](https://bugs.pypy.org/issue1139)，让我们看看结果如何......

# javascript - 当位置：绝对与javascript时，文本对齐：中心不起作用？

> ID：10471023
> 
> 赞同：0
> 
> 时间：2012-05-06T13:49:59.030
> 
> 标签：javascript, html, css

我正在制作一个滚动评论部分，它通过让几个由 php 回显的元素使其 top 属性使用 javascript 动画来工作。一切似乎都工作正常，除非我将它们的位置设置为绝对并同时使用 javascript，这导致 text-align:center 仅在文本中有超过一行时才起作用。这是我的代码：

HTML（大致是这样的，通过 PHP 得到回应，也为内联样式道歉）

```
<div id="element0" style="position:absolute;text-align:center;">Hello world!</div>
<div id="element1" style="position:absolute;text-align:center;">Hello world!</div>
<div id="element2" style="position:absolute;text-align:center;">Hello world!</div>
<div id="element3" style="position:absolute;text-align:center;">Hello world!</div> 
```

Javascript

```
var offset = 0;
var i = 0;
for(i = 0; i < 3; i++) {
    obj = document.getElementById("element" + i);
    obj.style.top = offset + "px";
    offset += obj.clientHeight;
}

function moveComments() {
var i1 = 0;
    for(i1 = 0; i1 < 3; i1++) {
    obj = document.getElementById("element" + i1);
    obj.style.top = parseInt(obj.style.top) - 1 + 'px';
        if(parseInt(obj.style.top) <= -offset)
    obj.style.top = offset + 100 + "px";
    }
}

setInterval(moveComments, 10); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T13:51:52.853

`position: absolute`使元素的宽度自动缩小以适应其内容。

`text-align: center`在块元素的范围内居中文本。
如果块元素不比文本宽，它不会做任何事情。

你需要给它更大的宽度。

# actionscript-3 - AS3：如何在 Flash 中使用绿色背景的精灵

> ID：10471027
> 
> 赞同：-1
> 
> 时间：2012-05-06T13:50:48.683
> 
> 标签：actionscript-3, flash, sprite

我注意到互联网上的许多精灵都有纯色背景而不是透明的，我相信这背后是有原因的，但它是什么？

像这个 ：

[http://www.spriters-resource.com/gameboy_advance/gs2/sheet/47045](http://www.spriters-resource.com/gameboy_advance/gs2/sheet/47045)

我可以使用 Photoshop 删除 bg，但如果这是人们一开始没有将其保存为透明 png 的目的。

什么是在 Flash 中使用这些精灵的更简单方法？对我来说，将每个精灵剪切并放在单独的框架中是没有意义的，我相信有一种更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:54:35.660

Sprite 表并不意味着在编译之前被分割成不同的图像。相反，它们主要用于一种称为 blitting 的技术，该技术涉及在运行时将像素从 spritesheet 复制到显示器上（传统上这样做是为了提高标准 Flash 显示列表渲染的性能）。

您可以在此处阅读有关 blitting 的信息：[http ://www.8bitrocket.com/2008/7/2/Tutorial-AS3-The-basics-of-tile-sheet-animation-or-blitting/](http://www.8bitrocket.com/2008/7/2/Tutorial-AS3-The-basics-of-tile-sheet-animation-or-blitting/)

以及如何在 blitting 时实际删除背景：http: [//active.tutsplus.com/tutorials/animation/blitting-with-as3-removing-a-bitmaps-background-color/](http://active.tutsplus.com/tutorials/animation/blitting-with-as3-removing-a-bitmaps-background-color/)

# html - 控制 CSS 镜像文本的位置

> ID：10471028
> 
> 赞同：2
> 
> 时间：2012-05-06T13:50:51.930
> 
> 标签：html, css, webkit, flip, mirroring

使用[这个](https://stackoverflow.com/questions/3433641/flipping-inverting-mirroring-text-using-css-only)问题的答案中的代码，我设法镜像文本，但现在它超出了正常文本的流程。

```
<style>
span.flip {
        display: block;
        -moz-transform: scaleX(-1); /* Gecko */
        -o-transform: scaleX(-1); /* Operah */
        -webkit-transform: scaleX(-1); /* webkit */
        transform: scaleX(-1); /* standard */
        filter: FlipH; /* IE 6/7/8 */
    }
</style>

<p>Some text <span class="flip">mirror</span> and more tex</p> 
```

如何防止镜像文本脱离正常文本流？哪些属性控制镜像文本的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:14:20.297

添加`display: inline-block;`这将使其全部在一行中：

```
<style>
span.flip {
        display: inline-block;
        -moz-transform: scaleX(-1); /* Gecko */
        -o-transform: scaleX(-1); /* Operah */
        -webkit-transform: scaleX(-1); /* webkit */
        transform: scaleX(-1); /* standard */
        filter: FlipH; /* IE 6/7/8 */
    }
</style>

<p>Some text <span class="flip">mirror</span> and more text</p>​ 
```

如果您希望它在不同的行上，请使用以下命令：

```
<style>
span.flip {
        display: block;
        -moz-transform: scaleX(-1); /* Gecko */
        -o-transform: scaleX(-1); /* Operah */
        -webkit-transform: scaleX(-1); /* webkit */
        transform: scaleX(-1); /* standard */
        filter: FlipH; /* IE 6/7/8 */
        width: 36px; 
    }
</style>

<p>Some text <span class="flip">mirror</span> and more text</p>​ 
```

# matlab - Matlab中如何获取科学记数法的指数

> ID：10471031
> 
> 赞同：7
> 
> 时间：2012-05-06T13:51:09.297
> 
> 标签：matlab, matrix, scientific-notation, exponent

当数字非常小时，Matlab 会自动以科学记数法格式显示它们。

例子：

```
A = rand(3) / 10000000000000000;

A =

  1.0e-016 *

    0.6340    0.1077    0.6477
    0.3012    0.7984    0.0551
    0.5830    0.8751    0.9386 
```

是否有一些返回指数的内置函数？像这样的东西：`getExponent(A) = -16`？

我知道这是一个愚蠢的问题，但我需要检查数百个矩阵，但我似乎无法弄清楚。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T14:00:41.890

基础数学可以告诉你：

```
floor(log10(N)) 
```

一个数字的以 10 为底的对数告诉您该数字中小数点前大约有多少位。

例如，`99987123459823754`是`9.998E+016`

`log10(99987123459823754)`是`16.9999441`，它的下限是`16`- 基本上可以告诉你“科学计数法中的指数是 16，非常接近 17”。

Floor 总是向下取整，因此您无需担心小指数：

```
0.000000000003754 = 3.754E-012
log10(0.000000000003754) = -11.425
floor(log10(0.000000000003754)) = -12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T14:03:05.410

您可以使用`log10(A)`. 用于打印的指数将是 A 中的最大幅度指数。如果您只关心小数 (< 1)，您可以使用

```
min(floor(log10(A))) 
```

但如果它们也可能很大，你会想要这样的东西：

```
a = log10(A);
[v i] = max(ceil(abs(a)));
exponent = v * sign(a(i)); 
```

这会找到最大绝对指数，并返回它。因此，如果`A = [1e-6 1e20]`，它将返回 20。

我实际上不太确定 Matlab 如何决定打印时使用什么指数。`A = [100, 203]`显然，如果A 接近 1（如.

# java - 网络摄像机安卓应用

> ID：10471036
> 
> 赞同：1
> 
> 时间：2012-05-06T13:51:40.557
> 
> 标签：java, android

我是 android 应用程序的新手，我想制作 android 应用程序来查看和控制 IP 摄像机，但我不知道从哪里开始我想知道是否有可以控制的特定摄像机？或者任何IP摄像机都可以控制？因为我想在三种类型的 VIVOTEK 相机之间进行选择，请帮助

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:17:22.020

这可能有效-> [http://code.google.com/p/ipcamera-for-android/](http://code.google.com/p/ipcamera-for-android/)

但我想这是用于网络视图中的相机视图（在浏览器中）rgds Softy

# servlets - Java Servlet 404 错误

> ID：10471038
> 
> 赞同：0
> 
> 时间：2012-05-06T13:51:48.813
> 
> 标签：servlets, http-status-code-404

我的系统有 Tomcat 7，所有文件都在 webapps 下。文件结构为

webapps/ WelcomeForm/ web/ WelcomeForm.html

WEB-INF/web.xml

lib/ 类/ hello/ HelloWorldServlet.java HelloWorldServlet.class

Web 文件夹包含 WelcomeForm.html。

WEB-INF 保存 web.xml。

lib 包含 servlet-api.jar 和

类包含 HelloWorldServlet.java。

html 文件运行良好，但我无法运行 Java 文件，因为它返回消息：

```
HTTP Status 404 - /hello

type Status report

message /hello

description The requested resource (/hello) is not available. 
```

文件的代码如下：

WelcomeForm.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Welcome Form</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
           <form method="POST" action="/hello">
        <font size="10" color="red">Hello World!</font><BR>

     Type your first name and click submit button <input TYPE=TEXT NAME="username" SIZE=20>
            <P><input type="submit" value="Submit">

       </form> 

    </body>
</html> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>HelloWorld</servlet-name>
        <servlet-class>hello.HelloWorldServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>HelloWorld</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

HelloWorldServlet.java

```
package hello;

import java.io.IOException; 
import javax.servlet.ServletException; 
import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.*;
import javax.servlet.http.*;
import javax.servlet.http.HttpServlet; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
import java.io.PrintWriter;

public class HelloWorldServlet extends HttpServlet {
  public void doGet(HttpServletRequest request, HttpServletResponse response)
      throws ServletException, IOException {
    response.setContentType("text/html");

      doPost(request,response);
      }

   public void doPost(HttpServletRequest request, HttpServletResponse response)
  throws ServletException, IOException {
    String name = request.getParameter("username");
    PrintWriter out = response.getWriter();
    out.write("Your Name is :" );
    out.print(name);

  }    
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:32:23.317

检查浏览器 URL。您缺少上下文。

假设您在[http://localhost:8080/test/index.jsp](http://localhost:8080/test/index.jsp)运行，其中 test 是您的上下文路径。

所以，调用 Servlet 的时候应该是[http://localhost:8080/test/hello](http://localhost:8080/test/hello)。

在你的情况下，它不是那样的。

因此，添加 cotextpath 将解决您的问题。

例如`action="<%=request.getContextPath()%>/hello"`

或者你可以使用

例如`action="hello"`

因此，当您添加“/”以`action`始终添加上下文路径时。

# c# - C#子窗体不刷新

> ID：10471042
> 
> 赞同：1
> 
> 时间：2012-05-06T13:52:12.273
> 
> 标签：c#, winforms, refresh, parent

当我从表单中调用它时，我的这段代码可以正常工作，但是，当我从父级调用它时，它会运行代码而没有结果：

```
 public void hideHelp()
    {
        //Check in db if panel1 is visible
        SqlCeCommand checkHelp = new SqlCeCommand("Select Show_Help from Options where Opt_Id = 1", this.optionsTableAdapter.Connection);
        if (this.optionsTableAdapter.Connection.State == ConnectionState.Closed) 
         { this.optionsTableAdapter.Connection.Open(); }

        try
        {
            bool showHelp = (bool)(checkHelp.ExecuteScalar());

            this.panel1.Visible = showHelp;
            this.Refresh();

        }
        catch (Exception ex) { MessageBox.Show(ex.Message); }

    } 
```

在主窗体上，我有一个带有以下代码的切换按钮：

```
 private void tglHelp_Click(object sender, EventArgs e)
    {

        if (tglHelp.ToggleState.ToString() == "On")
        {
            HRDataSet.OptionsRow updateHelp = hRDataSet.Options.FindByOpt_Id(1);
            try
            {
                updateHelp.Show_Help = true;
                this.optionsTableAdapter.Update(this.hRDataSet);

                Form activeChild = this.ActiveMdiChild;

                if (activeChild.Name == "frmAddEmployees")
                {
                    frmAddEmployees chForm = new frmAddEmployees();
                    chForm.MdiParent = this;

                    chForm.hideHelp();
                }

            }
            catch(Exception ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName);
            }
            tglHelp.Text = "Help Panel \nOFF";
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:01:40.640

在这段代码中

```
 if (activeChild.Name == "frmAddEmployees") 
            { 
                frmAddEmployees chForm = new frmAddEmployees(); 
                chForm.MdiParent = this; 
                chForm.hideHelp(); 
            } 
```

您打开另一个 frmAddEmployees 并添加到 MDI，但您没有显示它。如果您的意图是调用由 activeChild 标识的当前 frmAddEmployees 中的代码，您应该使用类似这样的东西

```
 if (activeChild.Name == "frmAddEmployees") 
            { 
                ((frmAddEmployees)activeChild).hideHelp();
            } 
```

# javascript - 使用 if 和 else 将 javascript 代码转换为模式可读的代码

> ID：10471043
> 
> 赞同：-1
> 
> 时间：2012-05-06T13:52:21.370
> 
> 标签：javascript, reverse-engineering, if-statement, logical-operators

那是什么意思？

```
e[i] == "-" && (s > 1 || d === null) && ++s, !s && d !== null && (p.push(e[i]), s = 2), "+-".indexOf(e[i]) < (d = null) && (c = 1); 
```

没有任何逻辑就看不懂这么多的sumbols

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:10:33.380

```
if (e[i] == "-" && (s > 1 || d === null))
    ++s;

if (!s && d !== null) {
    p.push(e[i]);
    s = 2;
}

if ("+-".indexOf(e[i]) < (d = null))
    c = 1; 
```

如果你没有 C 背景，最后的作业`if`可能对你没有吸引力；在这种情况下：

```
d = null;
if ("+-".indexOf(e[i]) < null)
    c = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:58:18.923

尝试添加一些空格和换行符：

```
e[i] == "-" && (s > 1 || d === null) && ++s,
    !s && d !== null && (p.push(e[i]), s = 2),
    "+-".indexOf(e[i]) < (d = null) && (c = 1); 
```

请注意，这是一个逗号表达式 - 它是由逗号分隔的 3 个表达式。每个表达式实际上是一个语句

```
condition && action; 
```

由于这种工作方式，您可以在 C 中摆脱这种情况`&&`。对于表达式`A && B`，首先执行 A，*只有当 A 的结果为真时才*执行 B。所以就`A && B;`可以自己翻译成`if(A) B;`. 当然，这仅在`A && B`不使用整个表达式的结果时才有效。

# php - 关于如何将 JS onchange 事件传递给 PHP 的建议

> ID：10471044
> 
> 赞同：2
> 
> 时间：2012-05-06T13:52:50.073
> 
> 标签：php, javascript, mysql

我有三个下拉菜单，可以根据用户选择的内容查询 MYSQL 数据库。其中一个菜单是动态的，但我无法让它返回数据——另外两个工作正常。我想我需要捕获 JS onchange 事件，然后将其传递给 PHP 以运行查询，但我目前正在绕圈子。

以下是我正在尝试做的事情。所有值都存储在该`<head>`部分中 - 我添加了我的查询并选择了 html 和下面的更改事件。

```
$category=$_POST['Category'];
$subcategory=$_POST['Subcategory'];
$destination=$_POST['Destination'];

$result = mysql_query("SELECT * FROM travel WHERE Category='$category'
AND Subcategory='$subcategory' AND Destination='$destination'")
or die(mysql_error());

$row = mysql_fetch_assoc( $result ) ;

<select name="subcategory" id="subcategory onchange="javascript:
dropdownlist(this.options[this.selectedIndex].value)">
<option value="">Select Sub-Category</option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:41:35.033

试试这个 jQuery：

```
$(document).ready(function() {
    $('#myelement').change(function() {
        $.ajax(
            serverUrl,
            {
                data: { /* Put your input data in here as a hash */ }
                type: 'POST',
                dataType: 'json',
                success: function(data, textStatus, jqXHR) {
                    /* Put your response handler in here */
                }
            }
        );
    });
}); 
```

我会让你做服务器位 - 你需要`json_encode()`。玩得开心！

# ios - 在家里发布 facebook 新提要

> ID：10471045
> 
> 赞同：1
> 
> 时间：2012-05-06T13:53:05.023
> 
> 标签：ios, xcode, facebook, feed

我正在使用 Facebook SDK，总的来说，它工作正常。但是当我发布一个新的提要时，它只会出现在我的时间线上，而不是我朋友的新闻（他们的 Facebook 主页）中。

所以想要看到我的提要的朋友必须去我的个人资料——这不是我想要的。

我的 Facebook 应用程序中是否有我必须更改的设置？这个设置在 Facebook 开发者门户的什么地方？

编辑：

对不起，我忘记了语言！我正在使用 iOS SDK 进行编程。

这里是发布新提要的代码：

```
-(IBAction)publishStream:(id)sender 
```

{

```
String *myString = "Test string!"

SBJSON *jsonWriter = [[SBJSON new] autorelease];

//post's link
NSArray* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys: 
                                                  @"Download iPhone app",@"text", //link name
                                                  @"http://itunes.apple.com/it/app/id399663397?mt=8",@"href", //link url
                                                  nil], nil];

NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];

//post image
NSDictionary* media = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"image", @"type", //type of media
                       @"http://img834.imageshack.us/xxx.png", @"src", //image link
                       @"http://itunes.apple.com/it/app/idxxxxx", @"href", nil]; //if image is clicked go to link "x"
NSArray * arraymedia = [NSArray arrayWithObject:media];

//image and post links
NSDictionary* attachment = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"My app name", @"name", //name near image
                            arraymedia, @"media",
                            myString, @"caption", //caption - little image under our app
                            @"http://itunes.apple.com/it/app/idxxxxx/", @"href", nil];//link of caption

NSString *attachmentStr = [jsonWriter stringWithObject:attachment];

//post settings
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               kAppId, @"api_key", //fb api key
                               @"Share on Facebook",  @"user_message_prompt", @"Post test for my app", @"message", //user can modify message post                                  actionLinksStr, @"action_links",
                               attachmentStr, @"attachment",
                               nil];

[_facebook dialog: @"stream.publish"
        andParams: params
      andDelegate:self]; 
```

}

# sql - sql server 2008而不是触发器以编程方式决定是否运行？

> ID：10471046
> 
> 赞同：0
> 
> 时间：2012-05-06T13:53:16.500
> 
> 标签：sql, sql-server, triggers

是否可以以编程方式决定 INSTEAD OF 触发器是否可以运行？我想要的是触发器内的一些这样的代码......

```
If (some condition = true) then
       handle the INSTEAD OF trigger code
else
       return // let the insert/update/delete operation happen normally 
```

这在 SQL Server 2008 中可能吗？

**更新：** 让我澄清我的问题。我知道您可以在触发器内运行条件语句。但是，据我了解，如果您运行 INSTEAD OF 触发器，则无法运行常规的插入/更新/删除操作。如果可能的话，我想要两全其美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:54:26.393

是的，您可以在触发器中使用条件语句。

[http://msdn.microsoft.com/en-us/library/aa214456(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa214456(v=sql.80).aspx)

# java - Java中使用链表实现的队列

> ID：10471049
> 
> 赞同：0
> 
> 时间：2012-05-06T13:53:43.723
> 
> 标签：java, generics, linked-list, queue

我很快用Java写了一个链表类。我想编写另一个使用链表的队列类。我将如何在 Java 中实现这一点？我不完全理解 implements / extends 关键字......这就是我的队列的样子（例如）：

```
public class Queue<T> implements LinkedList
{
    protected LinkedList<T> list;

    public Queue() {
        list = new LinkedList<T>();
    }

    public void add( T element) {
        list.add( element);
    }

    public T removeLast() {
        return list.removeLast();
    }   
} 
```

另请注意，链表类也是通用的。我知道已经有内置类来实现此功能，但我想学习（这就是我尝试手动执行此操作的原因）

编辑：此外，最后，我希望能够这样说：

```
Queue<String> aQueue = new LinkedList<String>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T14:04:07.367

如果你想要这样的行为，`Queue<String> aQueue = new LinkedList<String>();`那么你`LinkedList`必须扩展/实现`Queue`类/接口。请记住，超类可以是子类的对象引用实例，反之亦然。

```
public class LinkedList<T> implements Queue<T> {

    class Node<T> {
        T data;
        Node<T> next;
    }

    //all your behavior here
} 
```

此外，正如 Java 文档所述，[`Queue`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)它是一个接口并[`LinkedList`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)实现它。

注意：如果您想使用 LinkedList 实现队列，您应该看到 @Tudor 发布的代码示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T13:59:01.403

您的代码中有两个错误：

1.  您既在实现`LinkedList`（您的意思是扩展吗？）并通过`LinkedList`在类中使用组合来实现。

2.  这段代码不起作用：`Queue<String> aQueue = new LinkedList<String>();`因为根据第 1 点，`Queue`它要么是 的子类，`LinkedList`要么包含 a `LinkedList`，这会使您的代码不正确。

事实上，最后一个代码片段没有什么意义。我假设您想要做的是创建一个`Queue`内部使用链表的。在这种情况下，只需使用：

```
public class Queue<T>
{
    protected LinkedList<T> list;

    public Queue() {
        list = new LinkedList<T>();
    }

    public void add( T element) {
        list.add( element);
    }

    public T removeLast() {
        return list.removeLast();
    }   
} 
```

进而：

```
Queue<String> queue = new Queue<String>(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-17T13:23:36.360

由于 Linkedlist 实现了队列接口，我们可以直接使用 poll、peek 方法......不需要额外的代码

# android - 是否可以将 java 视图转换为 xml 布局？

> ID：10471050
> 
> 赞同：0
> 
> 时间：2012-05-06T13:53:48.003
> 
> 标签：android, view, views, android-linearlayout

我使用代码创建了一个`linearlyaout`并添加了视图`java`。是否可以将此布局转换为`xml`布局并将其保存到存储中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:58:18.167

没有什么能阻止您解析所有这些`Views`属性，然后构建一个 xml 布局文件。但是，您将无法像文件夹中`setContentView(R.layout.built_layout)`的其他布局一样使用构造的 xml 布局（如 ） 。`res/layout`

# css - 主 div 外的装饰使用 CSS 不稳定...？

> ID：10471053
> 
> 赞同：0
> 
> 时间：2012-05-06T13:54:27.813
> 
> 标签：css, layout, html

我正在尝试在主要内容 div 之外进行一些装饰，如果窗口尺寸很小，那将被隐藏。

我想了一会儿，想出了以下标记，（您可以复制粘贴并查看它），这是我现在能想到的最好的。然而问题是，因为我使用了百分比边距，所以在调整大小时装饰变得不稳定和摇晃，有时甚至踩到内容 div。

这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <style>
            body {
                padding: 0px;
                margin: 0px;
                width: 100%;
                height: 100%;
                background-color: yellow;
            }
            div.content {
                display: block;
                width: 958px;
                height: 400px;
                background-color: #CCC;
                margin: 0px auto;
            }
            div.wrap {
                margin: 0px auto;
                min-width: 958px;
                max-width: 1058px;
                overflow: hidden;
                position: relative;
                background-image: url(http://www.ephotobay.com/image/ooo-ml.png);
                background-position: center;
            }
            div.left, div.right {
                background-image: url(http://www.laserpros.com/images/site/HP_Circle_Logo_Vector1_small.jpg);
                width: 50px;
                display: block;
                height: 50px;
                bottom: 0px;
                position: absolute;
            }
            div.left {
                right: 479px;
                margin-right: 50%;
            }
            div.right {
                left: 479px;
                margin-left: 50%;
            }
        </style>
    </head>
    <body>
        <div class="wrap">
            <div class="left"></div>
            <div class="right"></div>
            <div class="content">
                <-- Content
            </div>
        </div>
    </body>
</html> 
```

那么，您能否在不使用百分比边距的情况下推荐其他方式以使其更灵活..？谢谢！

**编辑：**

这是在 Google Chrome 中调整大小时发生的情况：

![这就是谷歌浏览器在调整大小时发生的事情](../Images/357ba9ea53e069b1075c370c9eaf02b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:16:26.110

As the browser has to re-calculate the margins based on the parent's width changes, this is kind of expected behaviour.

If you want to keep content centralized on the screen without playing with **max-width**, **min-width** and margins as percentage, and there won't be any element that should be affected by the **.wrap** position in the document flow, you could do something like this:

```
div.wrap {
            width: 1058px;
            overflow: hidden;
            position: absolute;
            left: 50%;
            top: 0;
            margin-left: -529px; /* 1058/2 * -1 */
            background-image: url(http://www.ephotobay.com/image/ooo-ml.png);
            background-position: center;                
        } 
```

This will centralize the content horizontally in every situation.

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:57:56.663

清除你的花车：

```
 <div>
     <div class="left"></div>
     <div class="right"></div>
    <div class="clear"></div>
    </div>
    <style>
    .clear{clear:both;}
    </style> 
```

# c# - 反思问题

> ID：10471055
> 
> 赞同：0
> 
> 时间：2012-05-06T13:55:05.687
> 
> 标签：c#, reflection

如何使用方法作为参数`InvokeMember`？我是说

没有反思

```
ContainerEvents ems = new ContainerEvents();
Test ob1 = new Test(4);
Exam ob2 = new Exam(1);
FExam ob3 = new FExam(1);
Check ob4 = new Check(5);
ems.Setplus = new Super(ob1.Write);
ems.Setplus = new Super(ob2.Write);
ems.Setplus = new Super(ob3.Write);
ems.Setplus = new Super(ob4.Write);
ems.Run(); 
```

超级是代表。

通过反思，我想做同样的事情

```
Type type1 = typeof (Test);
Type type2 = typeof (Exam);
Type type3 = typeof (FExam);
Type type4 = typeof (Check);
Type events = typeof (ContainerEvents);
object eventer = Activator.CreateInstance(events);
events.InvokeMember("Setplus",BindingFlags.InvokeMethod,null,eventer,) 
```

但我不知道要发送什么作为参数。创建`Super`对象实例？

Setplus 是一个属性

```
public Super Setplus
{
    set { obj.activate += value; }
} 
```

obj - 类 Event 的对象

```
public class Event
{
    public event Super activate ;
    public void act()
    {
        if (activate != null) activate();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:42:39.663

相当于：

```
ContainerEvents ems = new ContainerEvents();
Test ob1 = new Test(4);
ems.Setplus = new Super(ob1.Write); 
```

这是：

```
object ems = Activator.CreateInstance(typeof(ContainerEvents));
object ob1 = Activator.CreateInstance(typeof(Test), new object[] { 4 });
object super = Delegate.CreateDelegate(typeof(Super), ob1, "Write");
ems.GetType().GetProperty("SetPlus").SetValue(ems, super, null); 
```

# c - 转义序列差异

> ID：10471059
> 
> 赞同：1
> 
> 时间：2012-05-06T13:55:29.680
> 
> 标签：c, escaping, sequence

```
 #include<stdio.h>
 int main()
 {
          int i=0;
          printf("%d:%4d\n",++i,'\1');
          printf("%d:%4d\n",++i,'\2');
          printf("%d:%4d\n",++i,'\3');
          printf("%d:%4d\n",++i,'\4');
          printf("%d:%4d\n",++i,'\5');
          printf("%d:%4d\n",++i,'\6');
          printf("%d:%4d\n",++i,'\7');
          printf("%d:%4d\n",++i,'\8');
          printf("%d:%4d\n",++i,'\9');
          printf("%d:%4d\n",++i,'\10');
          printf("%d:%4d\n",++i,'\11');
          printf("%d:%4d\n",++i,'\12');
          printf("%d:%4d\n",++i,'\13');
          printf("%d:%4d\n",++i,'\14');
          printf("%d:%4d\n",++i,'\15');
          printf("%d:%4d\n",++i,'\16');
          printf("%d:%4d\n",++i,'\17');
          printf("%d:%4d\n",++i,'\18');
          printf("%d:%4d\n",++i,'\19');
          printf("%d:%4d\n",++i,'\20');
          printf("%d:%4d\n",++i,'\21');
          printf("%d:%4d\n",++i,'\22');
          printf("%d:%4d\n",++i,'\23');
          printf("%d:%4d\n",++i,'\24');
          printf("%d:%4d\n",++i,'\25');
          printf("%d:%4d\n",++i,'\26');
          printf("%d:%4d\n",++i,'\27');
          printf("%d:%4d\n",++i,'\28');
          printf("%d:%4d\n",++i,'\29');
          printf("%d:%4d\n",++i,'\30');
          return 0;
 } 
```

输出：

```
1:   1
2:   2
3:   3
4:   4
5:   5
6:   6
7:   7
8:  56    
9:  57
10:   8
11:   9
12:  10
13:  11
14:  12
15:  13
16:  14
17:  15
18: 312
19: 313
20:  16
21:  17
22:  18
23:  19
24:  20
25:  21
26:  22
27:  23
28: 568
29: 569
30:  24 
```

'\1' 不等于 ASCII 值为 1 的字符吗？
在输出中，为什么 8,9,18,19,28,29... 的数字不按顺序排列？ [http://codepad.org/I1N6A71j](http://codepad.org/I1N6A71j)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:01:20.723

转义序列应该是八进制的，因此 \8 和 \9 是不允许的，并且会导致未指定的行为。结果取决于您使用的编译器；在这种情况下，它忽略了转义并将“8”和“9”作为普通的 ascii-char 处理。

要获得正确的 (ascii-char) 结果，您应该使用 \x8 和 \x9。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T14:02:13.353

从 2.14.3 开始：

> 转义`\ooo`由反斜杠组成，后跟一个、两个或三个八进制数字，用于指定所需字符的值。转义`\xhhh`由反斜杠后跟`x`一个或多个十六进制数字组成，用于指定所需字符的值。十六进制序列中的位数没有限制。八进制或十六进制数字序列分别由不是八进制数字或十六进制数字的第一个字符终止。

由于`\8`并且`\18`不是有效的八进制序列，这些文字的含义取决于您的平台：

> 反斜杠后面的字符未在表 7 中列出的转义序列是有条件支持的，具有实现定义的语义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:00:25.997

这是编译器输出（MinGW）：

```
a.c: In function 'main':
a.c:12:33: warning: unknown escape sequence: '\8'
a.c:13:33: warning: unknown escape sequence: '\9'
a.c:22:33: warning: multi-character character constant
a.c:23:33: warning: multi-character character constant
a.c:32:33: warning: multi-character character constant
a.c:33:33: warning: multi-character character constant 
```

其中一些转义序列在 c 中是无效的。转义序列在 C 中是八进制的。如果你有一个体面的编辑器，你也可以很容易地检测到这一点。我的 ViM 标记`\8`为`\9`红色，因为它们无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-10T16:39:16.530

在需要格式化 d 修饰符之前使用 hh ！！！所以你使用 d 格式它假定 int32 值，但你只使用 char - 8 位值！是内存错误访问！！！只有 c99 可用或 c++11。或者你需要一些像这样的中间值：

```
short val = '\1'; //for C 89
  printf("%d:%4hd\n",++i, val);
val =  '\2';
  printf("%d:%4d\n",++i,val);
......
or 
  printf("%d:%4hhd\n",++i,'\1'); //for c99 
```

要么不能正常工作！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T14:02:08.903

后面的数字`\`被视为*八进制*。不过，我不知道为什么`\8`, `\9`,`\19`等序列如此奇怪。由于它们不是有效的八进制数，编译器可能可以自由地对它们做任何事情。

如果您愿意，可以以十六进制指定转义序列，如`\x1`,`\x2`等。

# apache-flex - Flex 文件引用在失败时自动重试（如错误 #2038）

> ID：10471060
> 
> 赞同：1
> 
> 时间：2012-05-06T13:55:33.270
> 
> 标签：apache-flex, actionscript, filereference

如果 Fileupload.upload() 操作因 IO_Error 失败，有没有办法自动重试？我尝试再次调用upload（）（它确实到达了网络服务）==>但是当重试完成时它没有触发DataEvent.UPLOAD_COMPLETE_DATA（我用嗅探器检查了重试操作确实成功完成) 感谢您的任何想法。

# mysql - mysql命令选择联赛

> ID：10471062
> 
> 赞同：0
> 
> 时间：2012-05-06T13:56:06.753
> 
> 标签：mysql

我有一个团队联盟。我想使用一个选择命令，将表中的每支球队与同一个联赛中的所有其他球队进行匹配。

球队表（球队，得分，比赛）

例如说这个表里面有这个：

```
team1, 3, 2
team2, 5, 1
team3, 2, 4
team4, 1, 5 
```

我想使用一个选择命令，它会给我这个结果

```
team1 | team2
team4 | team3

team1 | team3
team2 | team4 
```

基本上我希望通过select语句生成比赛时间表

我试过类似的东西：

```
select t.team, t1.team from teams t, teams t1 where t.league = '5a7' AND t.league = t1.league AND t.team != t1.team 
```

但该查询的结果看起来像这样

```
team1 | team2
team3 | team2
team4 | team2
team2 | team1
team3 | team1
team4 | team1 
```

有任何想法吗？

谢谢，

# html - 悬停时宽度自动不起作用

> ID：10471065
> 
> 赞同：1
> 
> 时间：2012-05-06T13:56:40.837
> 
> 标签：html, css

我正在创建一个需要进行一些设计调整的 Web 应用程序。请检查这个[http://jsfiddle.net/rkumarnirmal/5w3FG/9/](http://jsfiddle.net/rkumarnirmal/5w3FG/9/)

当我悬停时，它以灰色显示边框。我需要的是让边框适合文本的宽度。我尝试设置宽度：自动但仍然无法正常工作，将边框框显示为页面宽度大小。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:01:21.737

设置`text-preview`为内联块：

```
#text-preview {
    display:inline-block;
    zoom:1; /* if you need IE7 support */
} 
```

Inline-block 将导致元素呈现为内联而不是占用所有可用的水平空间，但允许您像块元素一样设置内部尺寸和填充。

`hasLayout`请注意，除非您强制使用该属性，否则 IE7 不支持 inline-block 。最简单的方法是使用`zoom:1;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:02:54.900

`width:auto`on a`div`转换为`width:100%`因为 a`div`是块级元素。

如果你想让它的大小适合文本，你需要使用更合适的内联标记，如 a`span`或根据数据的语义含义使用定义列表 ( `dl`)。

您还可以`display`将包装器的属性更改`div`为`inline`or `inline-block`，但这在语义上不正确。

# windows - 如何使用完整设置手动安装 npm 包或 node.js？

> ID：10471069
> 
> 赞同：1
> 
> 时间：2012-05-06T13:57:20.880
> 
> 标签：windows, node.js

我是一名 php 开发人员。为了方便安装 php+apache+mysql，有 WAMP、xampp 等。

我的互联网连接质量很差。并且无法使用`npm install`。我想下载一个安装 node.js、socket.io、expressjs 等的安装文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:53:49.830

我不知道有任何类似于 WAMP for Node.js 的包。尽管如此，您可以从这里获取 Node.js Windows 安装程序：[http](http://nodejs.org/#download) ://nodejs.org/#download 。请注意，唯一的嵌入式工具是 npm。

如果不能直接使用 npm，那么获取所有依赖项将是一团糟。您将需要的大多数包（例如 socket.io 和 express）又具有多个依赖项。

无论如何，仍然可以从手动下载的文件中使用 npm。查看[http://npmjs.org/doc/install.html](http://npmjs.org/doc/install.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:44:18.673

[您可以在http://search.npmjs.org](http://search.npmjs.org)手动下载软件包。没有单一的设置可以下载任何可能的 npm 包配置，您必须一次下载一个，但即使在非常慢的连接下也应该能够获取它们。

另一种选择是直接从他们的 GitHub 位置获取它们，因为大多数都是托管的。您可以使用 git 同步源代码，然后安装它们。这也应该适用于慢速连接。

# java - javamail 返回 smtp 作为传输，而不是 smtps

> ID：10471073
> 
> 赞同：2
> 
> 时间：2012-05-06T13:57:44.807
> 
> 标签：java, jakarta-mail, smtps

我将 mail.transport 属性设置为 smtps，除了连接到 smtps 服务器的非常基本的信息：

```
 Properties p = new Properties();
    p.put("mail.transport.protocol", "smtps");
    p.put("mail.smtps.host", "smtp.gmail.com");
    p.put("mail.smtps.auth", true);

    Session s = Session.getDefaultInstance(p,new Authenticator(){/*authenticator impl.*/});

    MimeMessage mm = new MimeMessage(s); /*then i set the subject, then the body... */
    mm.setRecipients(RecipientType.TO, "myfakeaddress@gmail.com"); 
```

现在，我尝试发送我的信息。我想试试静态方法；使用实例方法`sendMessage`它工作正常。这里是：

```
 Transport.send(mm); 
```

**它尝试连接到 smtp 服务器，而不是 smtps 服务器**。进入 javamail 的实现（顺便说一句，我的版本是 1.4.5）我发现失败的方法是：

```
 transport = s.getTransport(addresses[0]); 
```

因为它返回一个`SMTPTransport`而不是`SMTPSSLTransport`; 这即使我已将`mail.transport.protocol`属性设置为 smtps，正如您在第二行代码中看到的那样。`Transport.send`我的程序是否有问题，或者无法通过静态方法发送 smtps 邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-14T18:01:10.443

`Transport.send(msg)`正在为每种[类型的收件人查找与您的电子邮件](https://javamail.java.net/nonav/docs/api/javax/mail/Address.html#getType--)*收件人*关联的协议。

你所有的收件人都是`InternetAddress`es，[类型为`rfc822`](https://javamail.java.net/nonav/docs/api/javax/mail/internet/InternetAddress.html#getType--)

以下是设置 JavaMail 以对 rfc822 地址使用 smtps 协议的三种方法：

1.  `rfc822=smtps`在属性文件中添加该行`javamail.address.map`或`javamail.default.address.map`（如[javadoc中](https://javamail.java.net/nonav/docs/api/javax/mail/Session.html)[所述`Session`](https://javamail.java.net/nonav/docs/api/javax/mail/Session.html)）
2.  在您的实例化会话上调用[`s.setProtocolForAddress("rfc822", "smtps")`](https://javamail.java.net/nonav/docs/api/javax/mail/Session.html#setProtocolForAddress-java.lang.String-java.lang.String)`（需要 JavaMail 1.4 或更高版本）
3.  在实例化会话时将属性设置为`mail.transport.protocol.rfc822`（需要 JavaMail 1.4.3 或更高版本）`smtps`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:48:58.333

[Bill Shannon](https://stackoverflow.com/users/1040885/bill-shannon)（Javamail 的当前维护者）在[这个问题中建议](https://stackoverflow.com/a/10419660/315306)

> 摆脱所有套接字工厂属性；如果您使用的是相当新的 JavaMail 版本，则不需要它们。有关如何配置 JavaMail 以访问 Gmail 的信息，请参阅 JavaMail 常见问题解答。如果它仍然不起作用，您还可以在那里找到调试提示。
> 
> 此外，将 Session.getDefaultInstance 更改为 Session.getInstance。

以下是[Javamail FAQ中的相关代码](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)

```
String host = "smtp.gmail.com";
String username = "user";
String password = "passwd";

Properties props = new Properties();
props.put("mail.smtps.auth", "true");
props.put("mail.debug", "true");

MimeMessage msg = new MimeMessage(session);
// set the message content here

Transport t = session.getTransport("smtps");

try {
  t.connect(host, username, password);
  t.sendMessage(msg, msg.getAllRecipients());
} finally {
  t.close();
} 
```

# time-complexity - 给定函数的 Big Theta、Big O、Big Omega

> ID：10471074
> 
> 赞同：0
> 
> 时间：2012-05-06T13:57:50.070
> 
> 标签：time-complexity, asymptotic-complexity

考虑函数 F：2^(3*n) + n^2

函数 A: 2^(3*n) 可以用作 Big Theta、Omega 或 O 作为 F 的表征吗？为什么？

我正在修改 Big Omega、Big Theta 和 Big O 的概念，我遇到了这个例子，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:17:02.027

不。

2^(3*n) 是主要术语，但除非你做错了什么，否则你不会花那么长时间来计算。[Wikipedia](http://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations#Arithmetic_functions)有一个很好的列表，列出了各种函数的时间复杂度。你正在做的最复杂的操作是提升到一个幂，它的复杂性在其他[帖子](https://stackoverflow.com/q/5231096/915501)中讨论。

由于您正在查看 g(f(x)) 形式的函数，其中 g(x) = 2^x 和 f(x) = 3x，因此计算时间将为 O(h) + O( k)，其中 h 是 g 的时间复杂度，k 是 f 的时间复杂度。想一想：它不应该超过这个，如果是的话，你可以把操作分成两部分，通过分开做部分来节省时间。因为 h 将在这个总和中占主导地位，所以您通常会忽略 k 项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:16:23.253

是的，三个都行。一般来说，您只需要关注增长最快的词条，因为增长较慢的词条会被增长更快的词条“淹没”。

详细地：

显然 F 比 A 增长得快，所以 F \in \Omega(A) 是不费吹灰之力的。对于所有足够大的 n，存在小于 F 的 A 的正倍数（即 A 本身）。

尝试针对 2*A 绘制 F。你会发现 2*A 很快变得比 F 大并且保持更大。因此，对于足够大的参数，存在大于 F 的 A 的正倍数（即 2*A）。所以根据 O, F \in O(A) 的定义。

最后，由于 F \in \Omega(A) 和 F \in O(A)，F \in \Theta(A)。

# javascript - 验证和运行 javascript（html5 画布）的问题

> ID：10471076
> 
> 赞同：1
> 
> 时间：2012-05-06T13:58:12.580
> 
> 标签：javascript, html, canvas, jslint, three.js

对于我的一门课程，我需要在 html5 画布中编写一个 3D 应用程序。为此，我选择使用 Three.js。现在，我要做的只是渲染一个简单的平面。我还希望能够通过按住鼠标并拖动来沿 x 轴移动相机。我的代码基于在[此处找到的代码](http://www.html5canvastutorials.com/webgl/html5-canvas-webgl-plane-with-three-js/). 它基本上是一架正在旋转的飞机（或者相机正在围绕飞机旋转，不确定是哪个）。我丢弃了动画的所有代码，并添加了 mousedown、mousemove 等事件的代码。当我加载页面时，它可以很好地呈现平面（无生命），但是当我尝试使用鼠标移动它时，它仍然完全没有响应。在我的代码中，您可能已经注意到我更改了一些我可能不应该做的事情（使一些变量成为全局变量并更改了一些函数名称）以使事情正常运行，但结果保持不变。

这是我第一次使用 javascript，我意识到我不能只更改现有代码并期望它能够工作。我查看了 javascript 验证并找到了 JSLint。我下载了记事本++的插件，并尝试以这种方式验证我的代码。它不喜欢 html 标签，尤其讨厌我尝试导入的 Three.js 库。当我将它作为[url](http://www.html5canvastutorials.com/libraries/Three.js)导入时它不会接收它，当我下载它并导入文件时它也不会导入它。当我刚刚将整个库的代码复制到文件中时，它只是给了我很多关于库本身的错误，并且在我的代码开始之前就停止了验证。

总结：我希望对项目本身有所帮助，但也希望建立一个愉快的开发环境（通过不忽略导入的适当验证）。

最后，到目前为止我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Canvas demo</title>
</head> 
<body>
<script type="text/javascript" src="three.js">
</script>
<script type="text/javascript">

var camera;
var scene;
var plane;
var renderer;
var clickX;
var clickY;
var mousedown;

window.onload = function () {
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    //camera
    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.y = -450;
    camera.position.z = 400;
    camera.rotation.x = 45;

    //scene
    scene = new THREE.Scene();

    //plane
    plane = new THREE.Mesh(new THREE.PlaneGeometry(300, 300), new THREE.MeshBasicMaterial({color: 0x0000ff}));
    plane.overdraw = true;
    scene.add(plane);   

    rerender(); 
};

window.requestAnimFrame = (function (callback){
        return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback){
            window.setTimeout(callback, 1000 / 60);
        };
})();

function rerender(){
    //render
    renderer.render(scene, camera);

    //request new frame
    requestAnimFrame(function(){
        rerender();
    });
}

$('#canvas').mousedown(function(e){
  clickX = e.pageX - this.offsetLeft;       
  mousedown = true;
});

$('#canvas').mousemove(function(e){
    if(mousedown) {
        var xDiff = e.pageX - this.offsetLeft - clickX;
        camera.position.x = xDiff;      
        rerender();
    }
});

$('#canvas').mouseup(function(e){
  mousedown = false;
});

$('#canvas').mouseleave(function(e){
  mousedown = false;
});

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:29:11.417

您在这里遇到各种问题，这些问题会阻止您的代码正常运行。我已经完成并修复了它们，您现在可以沿 x 轴移动相机：

[http://jsfiddle.net/TVWYn/6/](http://jsfiddle.net/TVWYn/6/)

你的问题是：

1.  您正在使用 jQuery，但不包括 jQuery 库。美元符号函数不是 JavaScript 的一部分，它（在这种情况下）是一个名为 jQuery 的第三方库的一部分，它可以更轻松地使用 DOM。如果不包含 jQuery 库，您的鼠标处理程序将无法运行。

2.  即使包含 jQuery，您的设置函数执行的顺序也不正确。最初你有你的 Three.js 设置过程，一旦 DOM 被初始化，它就会执行。那挺好的。但是，您试图在浏览器获取 JS 后立即注册鼠标事件处理程序。情况不妙。您要求 JS 将鼠标事件处理程序附加到当时不存在的 DOM 元素。要解决此问题，您需要确保 DOM 已初始化（例如，在 a 中运行您的设置`window.onload`）并且您所需的元素已插入（在本例中为 `#canvas`）。或者，将您的事件处理程序直接附加到 DOM 对象（例如`renderer.domElement`）。

3.  您在`#canvas`没有设置`id`画布元素的情况下进行引用。

关于设置合适的开发环境，我强烈建议您开始使用 Chrome 及其开发工具（通过`ctrl`++启动`shift`）`j`。

# jquery - 如何使用 jQuery 将 this 的值从 .change 传递到另一个函数？

> ID：10471079
> 
> 赞同：1
> 
> 时间：2012-05-06T13:58:24.953
> 
> 标签：jquery

我有以下内容：

```
$("#cityID").change(cityIdChanged(this))

function cityIdChanged(select) {
   store.setItem('CityID', select.val());
} 
```

这似乎不起作用，因为它给了我一条错误消息，说“选择”不支持属性 val。

如何传递对更改为我的 cityIdChanged 函数的事物的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:01:43.777

```
$("#cityID").change(function(){
    cityIdChanged(this); // "this" is the DOM object
});

function cityIdChanged(select) {
   store.setItem('CityID', select.value); // You get value with .value not .val()
} 
```

不要使用 jQuery 来获取输入值。

[**现场演示**](http://jsfiddle.net/gdoron/KMYMA/)

* * *

### 了解你的 DOM 属性和函数

虽然 jQuery 的目标之一是抽象出 DOM，但了解 DOM 属性可能非常有用。那些在不了解 DOM 的情况下学习 jQuery 的人最常犯的错误之一是[利用 jQuery 的强大功能来访问元素的属性](http://whattheheadsaid.com/2010/10/utilizing-the-awesome-power-of-jquery-to-access-properties-of-an-element)：

```
$('img').click(function() {
    $(this).attr('src');  // Bad!
}); 
```

在上面的代码中，`this`指的是触发 click 事件处理程序的元素。上面的代码既慢又冗长；下面的代码功能相同，而且更短、更快、更易读。

```
$('img').click(function() {
    this.src; // Much, much better
}); 
```

[jQuery标签信息](https://stackoverflow.com/tags/jquery/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:00:23.347

```
$("#cityID").change(cityIdChanged(this))

function cityIdChanged(select) {
   store.setItem('CityID', $(select).val()); or // select.value but not select.val()
} 
```

# html - HTML img 标签不起作用

> ID：10471082
> 
> 赞同：0
> 
> 时间：2012-05-06T13:59:15.770
> 
> 标签：html, image

我正在尝试在网站上显示一些图像，但由于某些原因，它们没有显示出来。这是我正在使用的代码，与我在互联网上找到的类似，但它只是打印错误。我怎样才能解决这个问题？

```
<?php

echo '<img src="D:/website/images/pic.jpg" alt="Error" />';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:01:42.627

是的，它不起作用你应该使用服务器 URL 而不是`D:/website/images/pic.jpg`系统路径

```
 echo '<img src="http://example.com/website/images/pic.jpg" alt="Error" />'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T14:01:52.970

`D:/website/images/pic.jpg`不是有效的 URI。HTML 中的图像标记需要 SRC 属性的有效 URI。

请参阅您选择的 HTML 文档（例如[Mozilla Developer Network (MDN)](https://developer.mozilla.org/en/HTML/element/img)）并提供[有效的 URI ^(*RFC3986*)](https://www.rfc-editor.org/rfc/rfc3986)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:03:51.313

最好的方法是使用相对路径：

```
src="/path/to/image.jpg" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T14:03:17.447

html 上的图像应始终具有协议前缀，例如 http:// 或**file:/// - 在您的情况下**，请使其像`file:///d:/website/images/pic.jpg`. 它仍然不起作用，请验证文件是否存在。文件名大小写在您的 Windows 环境中无关紧要。

# c++ - c++ 函数重载不明确

> ID：10471085
> 
> 赞同：0
> 
> 时间：2012-05-06T13:59:30.490
> 
> 标签：c++, operator-overloading, overloading, lexical

在 C++ 中

```
void foo(int i)
{ std::cout<<"int"<<std::endl; }

void foo(float i)
{ std::cout<<"float"<<std::endl; }

void foo(void *i)
{ std::cout<<"void *"<<std::endl; }

void foo(bool b)
{ std::cout<<"bool"<<std::endl; }

void main() { foo(0); } 
```

编译时，它会出错。
在visual-studio 2008中，错误是**C2668：'function'：对重载函数的模糊调用**

我知道为什么会出现这个问题，并且我知道使用时间类型转换的解决方案。但我认为这不是一个好的解决方案，因为使用这种方式会扼杀函数重载的词汇性。

在我的项目中，我制作了一个词法对象，将自动类型更改为 int、float、std::basic_string 和函数指针。重载所有类型转换运算符和创建者。但是当我输入“NULL”时，会出现错误 C2668。

事实上它几乎没有问题。唯一严重的问题是使用 FALSE 时。我的项目是核心库，所以我不能指导每个终端客户程序员。

谁知道以更聪明的方式解决这个问题的诀窍或技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:37:53.223

就目前而言，您的代码不应导致错误——没有歧义。当传递`0`(an `int`) 时，很明显`foo(int)`(identity conversion) 比其他任何一个都更适合（即使 0 也可以隐式转换为所有其他重载的类型）。

我的直接猜测是您正在测试的代码与您发布的代码并不完全相同。例如，如果您没有*使用*重载`int`，我预计会出现关于模棱两可重载的错误（因为如上所述，存在从`0`所有其他重载所采用的类型的隐式转换）。我已经确认 VC++ 2008 按原样接受代码（VC 2010 以及 VC11 和 g++ 4.7.0 的测试版也是如此）。

顺便说一句，我注意到`main`应该真的返回一个`int`（尽管它几乎肯定与手头的问题无关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T05:37:28.247

C++11 通过引入一个新的关键字来作为一个可区分的空指针常量来纠正这个问题：nullptr。它是 nullptr_t 类型，可隐式转换并与任何指针类型或指向成员的指针类型相当。除了 bool 之外，它不能隐式转换或与整数类型相比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T14:07:55.337

也许你可以定义你的`FALSE`to`((bool)0)`而不仅仅是 0 （为什么不使用呢`false`？！）。

此外，如果您考虑一下，拥有`f(int *)`和`f(char *)`调用`f(NULL)` **是**模棱两可的，所以无论如何您都需要演员！除非您告诉编译器，否则编译器不会神奇地知道您的意图。因此，如果某些东西本质上是模棱两可的，您只需通过强制转换使其明确。

# .net - 与构造函数注入相比，属性注入有什么优势吗？

> ID：10471106
> 
> 赞同：0
> 
> 时间：2012-05-06T14:01:57.943
> 
> 标签：.net, code-injection, constructor-injection, property-injection

> **可能重复：**
> [通过构造函数或属性设置器进行依赖注入？](https://stackoverflow.com/questions/1503584/dependency-injection-through-constructors-or-property-setters)

**如果Property Injection比****Constructor Injection**有任何优势，我很好奇：

```
 public class LoginController : Controller
  {
    [Inject]
    public ICookiesManager CookiesManager {get; set;}

    [Inject]
    public ISecurityManager SecurityManager {get; set;}

    public LoginController()
    {

    }
  } 
```

对比

```
 public class LoginController : Controller
  {
    private ICookiesManager _cookiesManager;
    private ISecurityManager _securityManager;

    public LoginController(ICookiesManager cookiesManager, ISecurityManager securityManager)
    {
      _securityManager = securityManager;
      _cookiesManager = cookiesManager;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:06:00.987

除了属性注入之外，这两种模式几乎没有什么有效的区别，您可以用简单的属性集替换实现。使用构造函数注入，更明确（通常）不希望任何人在运行时替换实现（因为这样做需要创建一个新的 LoginController。）

# php - 如何使用 PHP 截断这个 url 的文件名？

> ID：10471108
> 
> 赞同：-1
> 
> 时间：2012-05-06T14:02:12.237
> 
> 标签：php

如何转换以下链接（以及许多其他具有相同结构的链接）

```
http://www.domain.com/gb/news/12/13311/here-goes-the-name-of-article.htm 
```

并将其回显到

```
http://www.domain.com/gb/news/12/13311/ 
```

我将使用 PHP 和 $_GET 来获取 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:07:56.317

您可以使用`pathinfo`

```
$path = pathinfo("http://www.domain.com/gb/news/12/13311/here-goes-the-name-of-article.htm");
var_dump($path['dirname']); 
```

输出

```
string 'http://www.domain.com/gb/news/12/13311' (length=38) 
```

# python - google-app-engine：google api python客户端hello world中的ImportError httplib2

> ID：10471111
> 
> 赞同：1
> 
> 时间：2012-05-06T14:02:36.580
> 
> 标签：python, google-app-engine, importerror, httplib2, google-api-python-client

我刚刚下载了适用于 python 的 Google App Engine SDK (google_appengine_1.6.5.zip) 并尝试从 google-api-python-client ( [appengine](http://code.google.com/p/google-api-python-client/source/browse/#hg%2Fsamples%2Fappengine) ) 启动一个示例：

```
$ tree
.
|-- app.yaml
|-- client_secrets.json
|-- grant.html
|-- index.yaml
|-- main.py
`-- welcome.html 
```

我启动开发服务器: :`./dev_appserver.py /home/yoyo/dev/projets/yoyocontacts/ --backends --clear_datastore --high_replication`

但是当我在浏览器中启动应用程序时，出现以下错误：`ImportError: No module named httplib2`。

我的平台是带有 Python 2.6.5 的 Ubuntu 10.04.4 LTS，并且使用 Python cli 导入 httplib2 工作正常。并且在 google-appengine 目录中有 httplib2 ：

```
$ locate httplib2|grep appengine

/home/yoyo/dev/outils/google_appengine/lib/httplib2
/home/yoyo/dev/outils/google_appengine/lib/httplib2/httplib2
/home/yoyo/dev/outils/google_appengine/lib/httplib2/httplib2/LICENSE
/home/yoyo/dev/outils/google_appengine/lib/httplib2/httplib2/OWNERS
/home/yoyo/dev/outils/google_appengine/lib/httplib2/httplib2/__init__.py
... 
```

如何正确解决此导入问题？

我知道我可以在我的应用程序目录中添加 httplib2，但这并不优雅：

```
$tree
...
|-- httplib2
|   |-- cacerts.txt
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- iri2uri.py
|   |-- iri2uri.pyc
|   |-- socks.py
|   |-- socks.pyc 
```

我终于添加了正确的符号链接：（感谢@Thanasis）

```
$ll
total 36K
lrwxrwxrwx 1 yoyo   77 2012-05-06 16:24 apiclient -> /home/yoyo/dev/outils/google_appengine/lib/google-api-python-client/apiclient/
-rw-r--r-- 1 yoyo  267 2012-05-07 12:28 app.yaml
-rw-r--r-- 1 yoyo  358 2012-05-06 15:20 client_secrets.json
lrwxrwxrwx 1 yoyo   60 2012-05-07 12:12 gflags -> /usr/lib/python2.5/site-packages/python_gflags-2.0-py2.5.egg
-rw-r--r-- 1 yoyo  554 2012-03-02 20:00 grant.html
lrwxrwxrwx 1 yoyo   60 2012-05-06 16:20 httplib2 -> /home/yoyo/dev/outils/google_appengine/lib/httplib2/httplib2/
-rw-r--r-- 1 yoyo  471 2012-03-02 20:00 index.yaml
-rw-r--r-- 1 yoyo 3,4K 2012-05-07 11:45 main.py
lrwxrwxrwx 1 yoyo   56 2012-05-06 16:24 oauth2 -> /home/yoyo/dev/outils/google_appengine/lib/oauth2/oauth2/
lrwxrwxrwx 1 yoyo   80 2012-05-07 10:59 oauth2client -> /home/yoyo/dev/outils/google_appengine/lib/google-api-python-client/oauth2client/
-rwxr-xr-x 1 yoyo  163 2012-05-07 11:14 run*
drwxr-xr-x 3 yoyo 4,0K 2012-05-07 12:27 static/
-rwxr-xr-x 1 yoyo  115 2012-05-07 11:50 upload*
lrwxrwxrwx 1 yoyo   79 2012-05-06 16:24 uritemplate -> /home/yoyo/dev/outils/google_appengine/lib/google-api-python-client/uritemplate/
-rw-r--r-- 1 yoyo  102 2012-03-02 20:00 welcome.html 
```

现在，我必须处理[gflags](https://stackoverflow.com/questions/10480390/google-app-engine-import-works-only-after-a-refresh "google-app-engine ：导入仅在刷新后有效")的一个新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T21:03:41.587

这是一个解决方案。

*   在源代码树的某个地方创建一个临时目录。
*   cd 到目录并解压缩 /usr/lib/python2.5/site-packages/python_gflags-2.0-py2.5.egg
*   将 *.py 复制到源目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-26T19:29:57.220

大多数第三方库都需要作为项目的一部分包含在内。最简单的方法（改编自[App Engine 文档](https://cloud.google.com/appengine/docs/standard/python/tools/using-libraries-python-27#installing_a_third-party_library)）是：

在您的项目目录中（带有 的目录`app.yaml`）：

```
$ mkdir lib
$ pip install -t lib/ httplib2 
```

`appengine_config.py`然后在同一目录中创建一个名为的新文件：

```
# appengine_config.py
vendor.add('lib') 
```

如果您有多个第三方依赖项，但它们的名称在 requirements.txt 中，然后使用

```
pip install -t lib/ -r requirements.txt 
```

# android - 在 Android 上显示性能良好的巨大地图？

> ID：10471118
> 
> 赞同：9
> 
> 时间：2012-05-06T14:03:24.093
> 
> 标签：android, performance, webview, bitmap

我是大约 6 个月前开始 Android 开发的“初学者”。我真的对这个话题充满热情，我读了几本书：

*   [学习 Java 进行 Android 开发](https://rads.stackoverflow.com/amzn/click/com/B004VHODYM)；
*   [绝对初学者的 Android 应用程序](https://rads.stackoverflow.com/amzn/click/com/B005PZ09CO)；
*   [开始 Android 4（开始 Apress）](https://rads.stackoverflow.com/amzn/click/com/B006RM2JXQ)；
*   [Pro Android 4（专业版）](https://rads.stackoverflow.com/amzn/click/com/B007D55WB2)；
*   马克墨菲书籍的副本（因为亚马逊上没有 Kindle 版本）。

这些书让我了解*了很多*Android 的工作方式。但我现在缺少的是……经验。所以我决定为一个项目做贡献，这个项目的目标是**显示一个巨大的地铁地图**——当然，这个项目的目标更广泛，但谈论它与这个问题无关。

地图**离线存储**在我的应用程序包中。

# 用什么？

*   无法使用 Google 地图，因为我的应用程序的地图与 Google 地图几乎没有关系。
*   使用简单的 ImageView 来显示地图是“不可能的”，因为不支持缩放、平移等，并且我自己编写代码远远超出了我的能力。
*   我发现的唯一不错的解决方法是**使用 WebView，因为支持缩放和平移**。

此外，仅使用一张大图像无法解决问题：它会导致[极大的图像质量损失](https://stackoverflow.com/questions/6632140/android-pixel-quality-reduction-in-images-loaded-in-webview)。

# 有什么问题

*   我不能使用单个图像，因为当图片高于 1300 像素左右时，Android 会自动降低质量（参见上面的链接）。
*   我想以最小 2000 像素的分辨率显示我的地图（*xhdpi*屏幕在其 1280 像素宽的屏幕上显示整个图像，但我希望它们也能够缩放）。
    *   使用多密度图像（你知道，*ldpi*、*mdpi*、*hdpi*和*xhdpi*设备的不同版本）是不可能的，因为它们会*大大*增加 APK 的文件大小......</li>
*   **通过将我的地图分成 5 个不同的图块**，并且对所有屏幕密度只使用一张图像，一切看起来都不错……除了**[WebView 性能很糟糕](https://stackoverflow.com/search?q=%5BAndroid%5D+WebView+performance)**。

# 最后一个解决方案的代码

我将巨大的地图分成 5 个不同的地图图块，它们基本上是横向格式的矩形。我将它们全部 (map[1-5].jpg) 以及一个 HTML 文件 (map.html) 放入 ./assets/ 文件夹中。HTML 文件的代码如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Huge map</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="user-scalable=yes, height=device-height, target-densityDpi=device-dpi">

    <style type="text/css">
    html, body, p, img { margin: 0; }
    img { border: 0; }
    p { height: 100%; min-height: 100%; }
    </style>
</head>
<body>
<p><!-- Displaying a 2000×2000px map -->
    <img src="file:///android_asset/map1.jpg" alt=""><br> <!-- 2000×408px -->
    <img src="file:///android_asset/map2.jpg" alt=""><br> <!-- 2000×408px -->
    <img src="file:///android_asset/map3.jpg" alt=""><br> <!-- 2000×408px -->
    <img src="file:///android_asset/map4.jpg" alt=""><br> <!-- 2000×408px -->
    <img src="file:///android_asset/map5.jpg" alt=""> <!-- 2000×368px -->
</p>
</body>
</html> 
```

然后我将其加载到我的 Java 代码中并将其应用于我的布局（它只是一个 WebView）：

```
import me.diti.test.R;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class MapActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map); // ./res/layout/map.xml with a <WebView>

        WebView mWebView = (WebView) findViewById(R.id.mapWebView); // The WebView’s id is mapWebView

        WebSettings webSettings = mWebView.getSettings();
            webSettings.setRenderPriority(WebSettings.RenderPriority.HIGH); // Attempt at getting better performance…
            webSettings.setAppCacheEnabled(false); // Offline map: no need for cache
            webSettings.setLoadWithOverviewMode(true);
            webSettings.setUseWideViewPort(true);
            webSettings.setSupportZoom(true);
            webSettings.setBuiltInZoomControls(true);

        mWebView.setInitialScale(100);
        mWebView.setScrollBarStyle(WebView.SCROLLBARS_INSIDE_OVERLAY);

        mWebView.loadUrl("file:///android_asset/map.html"); // We load the map (includes 5 big images)

    }

/* This is a minimal “working” example, no need for menu inflation and activity handling */ 
```

# 应用执行

*   [启动时，图像正确显示](https://i.stack.imgur.com/FpvB3.png)；
*   [取消缩放效果很好](https://i.stack.imgur.com/YwmKK.png)（有没有可能看不到这个白色背景？CSS 属性`min-height`似乎不起作用）；
*   [最大缩放是丑陋的](https://i.stack.imgur.com/Xtlck.png)；
*   **平移时的性能很糟糕！**

# 我的问题

显示具有良好性能和相对易用性的巨大自定义地图的最佳方式是什么？**我的解决方案可以接受吗？如何修复缺陷？**我阅读*了很多*关于所有这些（自定义地图、WebView 性能）的 StackOverflow 问题，但没有一个对我有帮助。

期待您的帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:42:33.320

> 使用简单的 ImageView 来显示地图是“不可能的”，因为不支持缩放、平移等，并且我自己编写代码远远超出了我的能力。

您可以找到用于平移和缩放 的第三方代码`ImageView`，例如[这个](https://github.com/MikeOrtiz/TouchImageView)，尽管这可能对您没有帮助。

> 显示具有良好性能和相对易用性的巨大自定义地图的最佳方式是什么？

使用基于切片的地图查看器。[OSMDroid 对此有一些支持](http://code.google.com/p/osmdroid/wiki/ModularTileProviderArchitecture)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:11:40.667

我认为将大图像分割成图块是一种很好的方法，但我认为你需要把它比仅仅 5 张图像更进一步。尝试将其拆分为 10x10 网格中的 100 个 200x200 图像（或 8x8 等中的 64 个 250x250 图像）。然后使用 a`<table>`在您现有的`WebView`.

```
<table cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td><img src="file:///android_asset/map00.00.jpg" border="0"></td>
        <td><img src="file:///android_asset/map00.01.jpg" border="0"></td>
        ...
        <td><img src="file:///android_asset/map00.09.jpg" border="0"></td>
    </tr>
    <tr>
        <td><img src="file:///android_asset/map01.00.jpg" border="0"></td>
        <td><img src="file:///android_asset/map01.01.jpg" border="0"></td>
        ...
        <td><img src="file:///android_asset/map01.09.jpg" border="0"></td>
    </tr>
    ...
</table> 
```

# php - php数组声明导致意外功能

> ID：10471119
> 
> 赞同：1
> 
> 时间：2012-05-06T14:03:34.387
> 
> 标签：php, arrays

```
$tally['zero']['status']='hello';
echo $tally['zero']['status'];
//prints hello, this is expected 
```

在这个例子中，为什么只打印第一个字母？

```
$tally = array( "zero" => '0');     
$tally['zero']['status']='hello';
echo $tally['zero']['status'];   
// prints h, I was expecting hello 
```

在这个例子中，为什么会抛出错误？

```
$tally['zero'] = 0;
$tally['zero']['status']='hello';
echo $tally['zero']['status'];
//prints Warning: Cannot use a scalar value as an array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:06:03.763

> 在这个例子中，为什么只打印第一个字母？
> 
> ```
> $tally = array( "zero" => '0');
> $tally['zero']['status'] = 'hello';
> echo $tally['zero']['status']; // h 
> ```

在 PHP 中，字符串可以像数组一样被索引，也可以就地修改。索引字符串时`'status'`就变成了这样，第一个字符被分配给 的第一个字母。例如，这个：`0``hello``$tally['zero']`

```
$tally = array( "zero" => '01');
$tally['zero']['status'] = 'hello';
echo $tally['zero']; 
```

将打印“h1”。

* * *

> 在这个例子中，为什么会抛出错误？
> 
> ```
> $tally['zero'] = 0;
> $tally['zero']['status'] = 'hello';
> echo $tally['zero']['status']; 
> ```

就像错误所说的那样，`0`不是数组。您无法将其编入索引，因此会发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:24:01.553

小心使用 " 和 '。使用 " 时，内容可以解释为变量值。

```
0 != '0'   number/string 
```

我认为所有的谜团都隐藏在这里。

# flash - 即时保存闪存运行时数据

> ID：10471122
> 
> 赞同：1
> 
> 时间：2012-05-06T14:03:54.627
> 
> 标签：flash, save, audio-recording

我正在开发一个应用程序，供用户使用麦克风录制音频并将其保存在我们的服务器上。我正在使用闪存。据我所知，我无法为我的用户自动保存。

如何在不让我的用户单击“保存”的情况下“自动保存”录音？否则，如果他们的浏览器在录制过程中崩溃，他们的录制内容可能会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:20:21.620

您可以使用计时器系统地将该数据发送到您的服务器，并将最后保存的（记录的）块保留为临时文件，以防用户遇到此类问题。一旦用户点击停止按钮，您就可以将**整个**录音发送到您的服务器，服务器会将其保存为声音文件（我猜是 wav 或 mp3）并删除旧的临时文件。

# linux - 如何在 Linux shell 脚本中通过 SFTP 连接进入最后创建的目录

> ID：10471123
> 
> 赞同：0
> 
> 时间：2012-05-06T14:04:05.653
> 
> 标签：linux, shell, sftp

嗨，作为上一个问题的继续（[通过 Linux shell 脚本中的 SFTP 的 ls 命令错误](https://stackoverflow.com/questions/10434249/ls-command-error-via-sftp-in-linux-shell-script)），我有一个问题： **如何通过 SFTP 连接获取最新创建的目录的名称（或输入）？**

正如我在这里被告知的功能**ls -tr | tail -1**选项在这里不起作用，因为 在 SFTP 中无法识别**-tr参数。**

例如 SFTP 连接后的脚本：

```
cd temp_dir
????????? 
```

假设**temp_dir**包含多个目录，我需要在其中输入最后创建的目录（以便从中下载文件）。我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T11:54:26.483

您之前的问题包含您使用的基本事实`lftp`；因此使用`cls`而不是`ls`会有所帮助。

```
cls -1t|sed -n 1s/^/cd\\ /p>/tmp/cd
source /tmp/cd 
```

请注意，这使用文件`/tmp/cd`并且不适合并发操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:13:56.420

虽然 sftp 使用 ssh，但更好的解决方案是对`ssh`服务器和：

```
cd $(ls -t | sed q) 
```

# c# - IHttpHandler 文件传输进度？

> ID：10471127
> 
> 赞同：1
> 
> 时间：2012-05-06T14:04:42.843
> 
> 标签：c#, c#-4.0, ihttphandler

我有一个简单的 IHttpHandler 用于分块文件传输，并且在客户端代码中我想报告文件百分比的进度，过去我通过将传输的字节数除以文件大小（以字节为单位）来做到这一点，然后当它达到每 10% 时进行一次事件，我知道这不是最好的方法。无论如何，我都提取了所有代码，但是在我下面使用的方法中有更好的方法吗？

```
//IHTTPMethod

                //Open file
                string file = System.IO.Path.GetFileName(pubAttFullPath.ToString());
                FileStream fileStream = new FileStream(file, FileMode.Open, FileAccess.Read);
                //Chunk size that will be sent to Server
                int chunkSize = 49152;
                // Unique file name
                string fileName = Guid.NewGuid() + Path.GetExtension(file);
                int totalChunks = (int)Math.Ceiling((double)fileStream.Length / chunkSize);
                // Loop through the whole stream and send it chunk by chunk;
                for (int i = 0; i < totalChunks; i++)
                {
                    int startIndex = i * chunkSize;
                    int endIndex = (int)(startIndex + chunkSize > fileStream.Length ? fileStream.Length : startIndex + chunkSize);
                    int length = endIndex - startIndex;

                    byte[] bytes = new byte[length];
                    fileStream.Read(bytes, 0, bytes.Length);

                    //Request url, Method=post Length and data.
                    string requestURL = "http://localhost:16935/Transfer.ashx";
                    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(requestURL);
                    request.Method = "POST";
                    request.ContentType = "application/x-www-form-urlencoded";

                    // Chunk(buffer) is converted to Base64 string that will be convert to Bytes on  the handler.
                    string requestParameters = @"fileName=" + fileName + @"&secretKey=mySecret" +
                   "&data=" + HttpUtility.UrlEncode(Convert.ToBase64String(bytes));

                    // finally whole request will be converted to bytes that will be transferred to HttpHandler
                    byte[] byteData = Encoding.UTF8.GetBytes(requestParameters);

                    request.ContentLength = byteData.Length;

                    Stream writer = request.GetRequestStream();
                    writer.Write(byteData, 0, byteData.Length);
                    writer.Close();
                    // here we will receive the response from HttpHandler
                    StreamReader stIn = new StreamReader(request.GetResponse().GetResponseStream());
                    string strResponse = stIn.ReadToEnd();
                    stIn.Close();
                } 
```

我的服务器端代码在这里：这可能是报告进度的最佳位置，因为我可以在此处本地更新到 SQL。

```
 public class IHTTPTransfer : IHttpHandler
    {
        /// <summary>
        /// You will need to configure this handler in the web.config file of your 
        /// web and register it with IIS before being able to use it. For more information
        /// see the following link: http://go.microsoft.com/?linkid=8101007
        /// </summary>
        #region IHttpHandler Members

        public bool IsReusable
        {
            // Return false in case your Managed Handler cannot be reused for another request.
            // Usually this would be false in case you have some state information preserved per request.
            get { return true; }
        }

        public void ProcessRequest(HttpContext context)
        {
            string accessCode = context.Request.Params["secretKey"].ToString();

            if (accessCode == "mySecret")
            {
                string fileName = context.Request.Params["fileName"].ToString();
                byte[] buffer = Convert.FromBase64String(context.Request.Form["data"]);
                SaveFile(fileName, buffer);
            }
        }

        public void SaveFile(string fileName, byte[] buffer)
        {
            string Path = @"C:\Filestorage\" + fileName;
            FileStream writer = new FileStream(Path, File.Exists(Path) ? FileMode.Append : FileMode.Create, FileAccess.Write);

            writer.Write(buffer, 0, buffer.Length);
            writer.Close();
        }

        #endregion

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:14:06.203

一旦你有了处理程序，你就可以轻松地取得进展。下面的示例代码：

```
 /// <summary>
    /// The download file.
    /// </summary>
    /// <param name="state">
    /// The state.
    /// </param>
    /// <exception cref="InvalidDataException">
    /// </exception>
    private void DownloadFile()
    {
        string url = "http://localhost:16935/Transfer.ashx";

        bool cancel = false;
        string savePath = "C:/Temp";

        try
        {
            // Put the object argument into an int variable
            int start = 0;

            if (File.Exists(savePath))
            {
                start = (int)new System.IO.FileInfo(savePath).Length;
            }

            // Create a request to the file we are downloading
            var request = (HttpWebRequest)WebRequest.Create(url);

            // Set the starting point of the request
            request.AddRange(start);

            // Set default authentication for retrieving the file
            request.Credentials = CredentialCache.DefaultCredentials;

            // Retrieve the response from the server
            using (var response = (HttpWebResponse)request.GetResponse())
            {
                // check file lenght
                int fileLength = 0;
                int.TryParse(resp.Headers.Get("Content-Length"), out fileLength);

                // Open the URL for download 
                using (Stream responseStream = response.GetResponseStream())
                {
                    // Create a new file stream where we will be saving the data (local drive)
                    using (var fs = new FileStream(savePath, FileMode.Append, FileAccess.Write, FileShare.Read))
                    {
                        // It will store the current number of bytes we retrieved from the server
                        int bytesSize;

                        // A buffer for storing and writing the data retrieved from the server
                        var downBuffer = new byte[2048];

                        // Loop through the buffer until the buffer is empty
                        while ((bytesSize = responseStream.Read(downBuffer, 0, downBuffer.Length)) > 0)
                        {
                            var args = new CancelEventArgs(false);
                            this.OnCancel(args);

                            if (args.Cancel)
                            {
                                cancel = true;
                                break;
                            }

                            // Write the data from the buffer to the local hard drive
                            fs.Write(downBuffer, 0, bytesSize);
                            fs.Flush();

                            float percentComplete = 0;

                            if (fileLength > 0)
                            {
                                percentComplete = (100 * fs.Length) / (float)fileLength;

                                if (percentComplete > 100)
                                {
                                    percentComplete = 100;
                                }
                            }

                            this.OnProgressChanged(new ProgressChangedEventArgs((int)percentComplete));
                        }
                    }

                }
            }
        }
        catch (Exception ex)
        {
           throw;
        }            
    } 
```

在代码中，您有触发事件的方法，您可以订阅：

```
 /// <summary>
    /// Adds or removes cancel event.
    /// </summary>
    public event CancelEventHandler Cancel;

    /// <summary>
    /// Adds or removes progress changed event.
    /// </summary>
    public event EventHandler<ProgressChangedEventArgs> ProgressChanged;

    /// <summary>
    /// Raises progress changed event.
    /// </summary>
    /// <param name="e">
    /// <see cref="ProgressChangedEventArgs"/> params.
    /// </param>
    protected virtual void OnProgressChanged(ProgressChangedEventArgs e)
    {
        EventHandler<ProgressChangedEventArgs> handler = this.ProgressChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }

    /// <summary>
    /// Raises cancel event.
    /// </summary>
    /// <param name="e">
    /// </param>
    protected virtual void OnCancel(CancelEventArgs e)
    {
        CancelEventHandler handler = this.Cancel;
        if (handler != null)
        {
            handler(this, e);
        }
    } 
```

# mysql - 从两个或多个表中检索数据

> ID：10471128
> 
> 赞同：0
> 
> 时间：2012-05-06T14:04:47.827
> 
> 标签：mysql, vb.net, winforms

我正在创建一个连接到 MySQL 数据库的 winforms 调查应用程序。现在我想展示一个问题的替代方案，以及每个问题有多少人回答。我有一个称为替代方案`tblAlt`的表格和一个来自用户的答案表格，称为`tblAnswers`.

每个问题只有 5 个选项。有没有办法获得每个备选方案，有多少人用一个查询回答了每个备选方案？

这是我到目前为止所做的，但这绝对是错误的：

```
SELECT tblAlt.altText, Count(tblAnswers.answerID) 
 FROM tblAlt, tblAnswers 
WHERE tblAlt.questionID = " & CInt(questionID) & " 
  AND tblAnswers.altID = tblAlt.altID 
```

涉及的表格有：

```
_______________     _______________     ___________  _______________
|_tblUsers____|     |_tblAnswers___|    |_tblAlt__|  |_tblQuestion_|
| userID      |     | answerAltID  |    | altID   |  | questID     |
| username    |     | userID       |    | altText |  | questText   |
|_____________|     |______________|    |_questID_|  |_____________| 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:46:04.330

我无法理解您的架构，希望这会有所帮助：

```
SELECT
    tblAlt.altText,
    Count(tblAnswers.answerID)
FROM tblAlt
LEFT JOIN tblAnswers ON (tblAlt.altId = tblAnswers.altID)
WHERE tblAlt.questionID = " & CInt(questionID) & "
GROUP BY tblAlt.altText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:36:55.747

我想帮忙，但我需要澄清一下。tblAlt 是唯一的问题表吗？或者，它是其他问题表的替代问题表吗？一定是缺少问题表，否则 questID 没有任何意义，对吧？此外， tblAnswers 包含指向用户的链接，但不包含回答了哪个问题（或备选方案）。因此，无论是否有另一个表，tblAnswers 可能至少应该有一个用于 altID 或 questID 的字段，这样才能正常工作。

# sql-server - 如何有效地检查结果集是否更改并将其提供给 Web 应用程序以进行联合

> ID：10471132
> 
> 赞同：0
> 
> 时间：2012-05-06T14:05:24.747
> 
> 标签：sql-server, rss, syndication

这是场景：

我正在处理带有存储过程的 SQL Server 数据库，该存储过程负责返回 Web 提要项目 (RSS/Atom) 的标头，我通过 Web 应用程序作为提要。

此存储过程应在由以给定间隔运行的服务代理任务调用时验证基础数据是否发生重大变化 - 在这种情况下，它将触发资源密集型活动，通过调用将获取/检索数据、格式化数据并返回 SQL 数据库的 Web 应用程序。

那里将存储标头以准备好从客户端请求 RSS 提要更新。

现在，试图将其设计为尽可能高效，我仍然有几个转折点希望得到您的建议。

我对存储过程的暂定方法是：

1.  在内存表中收集数据，
2.  创建一个带有随信息变化的签名列的子查询，
3.  使用 FOR XML AUTO 将它们转换为 XML
4.  使用 MD5 对结果进行散列（使用 HASHBYTES 或 fn_repl_hash_binary，具体取决于结果的大小）
5.  验证哈希是否与存储在我正在存储等待提要请求的 HTML 的表中的哈希匹配。
6.  如果哈希匹配不执行任何操作，否则继续进行更新。

第一个疑问是**检查基础数据是否已更改的最佳方法**。

转换为 XML 会显着增加数据 - 这会减慢散列速度 - 并且可能除了散列之外我没有使用结果：有没有更好的方法来执行检查或将所有数据打包在一起以进行散列（类似于 csv 的东西）？

该查询正在合并和聚合来自多个表的数据，因此不会依赖表时间戳，因为它们的更改不一定与结果集中的更改有关

第二点是：**将数据提供给 webapp 进行重新格式化的最佳方式是什么？** - 我可能会通过 CLR 函数将数据推送到 Web 应用程序以格式化数据（但这是同步的，并且对于多个提要项会产生不可持续的延迟）

**或者**

我可能会改为保存结果集并通过服务代理触发多个异步调用。Web 应用程序可能会检索以某种方式存储的数据，而不是再次运行获取它们的昂贵查询。

由于根据提要项目类别我有不同的格式，我不能使用相同的表格格式 - 所以存储到表格中会很困难。

我可能会序列化为 XML。

但是，与重新运行查询相比，这会提供任何显着的收益吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:56:30.673

对于有效的缓存位，请查看[查询通知](http://msdn.microsoft.com/en-us/library/ms175110%28d=lightweight%29.aspx)。在您的情况下实现这一点的棘手之处在于您已声明“重大更改”，而查询通知将在任何更改时触发。但基本思想是您的应用程序订阅查询。当该查询的结果发生变化时，会向应用程序发送一条消息，然后它会执行程序执行的任何操作（通常是刷新缓存的数据）。

至于将数据提供给您的应用程序，业内有句谚语：“不要去借钱”。也就是说，如果提供数据的默认方法（即没有花哨格式的结果集）没有给您带来问题，请不要更改它。只有当它给你带来足够严重的头痛，你的时间最好花在那里时，才改变它。

# c# - c# 休眠异常

> ID：10471133
> 
> 赞同：0
> 
> 时间：2012-05-06T14:05:32.180
> 
> 标签：c#, nhibernate, app-config

我用 nhibernate 做了一个简单的应用程序：class utilisateur.hbm.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" auto-import="true">
  <class name="nhiber.utilisateur, nhiber" table="utilisateur">
    <id name="login" type="string"></id>
    <property name="password" type="string" />
    <property name="age" type="int" />
    <property name="location" type="string" />
    <property name="name" type="string" />
  </class>
</hibernate-mapping> 
```

类utilisateur.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NHibernate;
using NHibernate.Cfg;
using System.Reflection;

namespace nhiber
{
   public class utilisateur
    {
        public virtual string login { get; set; }
        public virtual string password { get; set; }
        public virtual string name { get; set; }
        public virtual int age { get; set; }
        public virtual string location { get; set; }
        public virtual IList<utilisateur> get_liste_utilisateurs(){
            using (ISession session = OpenSession())
            {
                IQuery query = session.CreateQuery("FROM utilisateur");
                IList<utilisateur> pets = query.List<utilisateur>();
                return pets;
            }
         }
       public static ISessionFactory SessionFactory;
       public static ISession OpenSession()
        {
            if (SessionFactory == null) //not threadsafe
            { Configuration config = new Configuration();
                 config.AddAssembly(Assembly.GetCallingAssembly());
              SessionFactory = config.BuildSessionFactory();
            }
            return SessionFactory.OpenSession();
        }
    }
} 
```

更详细的 App.config：

```
<?xml version="1.0"?>
<configuration>
  <configSections>

     <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler,NHibernate" />

  </configSections>

  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="connection.provider">
        NHibernate.Connection.DriverConnectionProvider
      </property>
      <property name="connection.driver_class">
        NHibernate.Driver.SqlClientDriver
      </property>
      <property name="connection.connection_string">
        Data Source=HP-PC\\SQLEXPRESS;Initial Catalog=Simulation;Integrated Security=True;Pooling=False;
      </property>
      <property name="dialect">
        NHibernate.Dialect.MsSql2005Dialect
      </property>
      <property name="show_sql">
        false
      </property>
      <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>
      <mapping assembly="nhiber"/>
    </session-factory>
  </hibernate-configuration>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

类form.cs：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace nhiber
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            try
            {
                utilisateur u = new utilisateur();
                for (int i = 0; i < u.get_liste_utilisateurs().Count; i++)
                    textBox1.Text += "\r\n" + u.get_liste_utilisateurs()[i].name;
            }
            catch (Exception e) { File.AppendAllText(@"C:\Users\HP\Desktop\test1.txt", e.ToString()); }
        }
    }
} 
```

但我有这个例外：System.InvalidOperationException：Échec d'instance。à System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean IntegratedSecurity)à nhiber.utilisateur.OpenSession() dans C:\Users\HP\documents\ Visual Studio 2010\Projects\nhiber\utilisateur.cs:ligne 32 à nhiber.utilisateur.get_liste_utilisateurs() dans C:\Users\HP\documents\visual studio 2010\Projects\nhiber\utilisateur.cs:ligne 19 à nhiber.Form1 ..ctor() dans C:\Users\HP\documents\visual studio 2010\Projects\nhiber\Form1.cs:ligne 21

我需要帮助。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:12:07.057

我*怀疑*这是问题所在：

```
 Data Source=HP-PC\\SQLEXPRESS;Initial Catalog=Simulation (...) 
```

我的猜测是你从字符串文字中复制了它，它实际上应该是

```
 Data Source=HP-PC\SQLEXPRESS;Initial Catalog=Simulation (...) 
```

（注意单反斜杠 - 这是您从C# 源代码中纯文字中的*双反斜杠获得的值。）*

# objective-c - 下载后立即播放音频或视频文件

> ID：10471134
> 
> 赞同：0
> 
> 时间：2012-05-06T14:05:34.420
> 
> 标签：objective-c, ios5

我使用`NSURLConnection`委托方法下载视频或音频文件，下载正常，现在我需要在下载完成后立即播放。

我的相关代码是这样的：

```
 -(IBAction)downloadAndPlay:(id)sender{
    NSString *fileUrlPath=[host stringByAppendingString:rowContent];  

            // Create the request.
            NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:fileUrlPath]
            cachePolicy:NSURLRequestUseProtocolCachePolicy
            timeoutInterval:60.0];

            // create the connection with the request
            // and start loading the data
            NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

            if (theConnection) {
                // Create the NSMutableData to hold the received data.

                receivedData = [NSMutableData data] ;
                //NSLog(@"connection succeeded");

            } else {

                // Inform the user that the connection failed.
                UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Music Album" message:@"Connection failed, please try again" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alertView show];

            }
    }

  //NSURLConnection delegate methods  
    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
    {
        // This method is called when the server has determined that it
        // has enough information to create the NSURLResponse.

        // It can be called multiple times, for example in the case of a
        // redirect, so each time we reset the data.

        // receivedData is an instance variable declared elsewhere.
        [receivedData setLength:0];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
    {
        // Append the new data to receivedData.
        // receivedData is an instance variable declared elsewhere.
        [receivedData appendData:data];
    }

    - (void)connection:(NSURLConnection *)connection
      didFailWithError:(NSError *)error
    {

        // inform the user
        NSLog(@"Connection failed! Error - %@ %@",
              [error localizedDescription],
              [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        // do something with the data
        // receivedData is declared as a method instance elsewhere
        NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    } 
```

如何在下载文件（自动播放）后立即播放文件（音频或视频）。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:59:55.667

您需要将下载的数据保存到文件中，然后使用 a`MPMoviePlayerViewController`或类似文件打开该文件。现在，您只需将文件下载为`NSData`，然后将其保留。

因此，将您的`NSData`对象保存到具有适当名称/扩展名的文件系统（或者只是将您的下载写入文件系统本身，这对于较大的文件更有意义），获取文件 URL 句柄，并将其传递给您的媒体播放器。

# jquery - jQuery 文件上传 Cakephp

> ID：10471135
> 
> 赞同：4
> 
> 时间：2012-05-06T14:05:36.803
> 
> 标签：jquery, cakephp, file-upload

我正在尝试让 blueimp 的 jQuery File Upload 与 Cakephp 一起使用。

一切都很好，除了我似乎在尝试删除已上传的内容时遇到问题。当我单击特定文件上的删除时，我在控制台中收到以下错误。

```
DELETE http://example.com.au/app/webroot/?file=logo%20%285%29.gif 404 (Not Found)
jquery.min.js:4XHR finished loading: "http://example.com.au/app/webroot/?file=logo%20%285%29.gif". 
```

发生这种情况有原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T10:37:53.530

首先将所有必要的 js 和 css 文件放在 webroot 目录中。

将它们放在您需要的任何地方，例如将 js 文件放在 webroot/js/jquery_file_upload/ 中，将 css 放在 webroot/css/jquery_file_upload 中。

现在创建一个名为**UploadHandler**的供应商目录。在此目录中复制粘贴**UploadHandler.php**。

现在你几乎完成了。

现在按照以下步骤操作。

*   查看您从[此处](https://github.com/blueimp/jQuery-File-Upload)下载的文件复制粘贴示例代码。不要忘记为每个 js 和 css 文件提供正确的路径，并在表单中**确保文件输入类型的名称是 files[]**。
*   现在创建了一个控制器动作，其中会发生真正的魔法。复制粘贴以下代码并将路径定义为您的要求。

```
<?php
class ServicePicturesController extends AppController {

    var $name = 'ServicePictures';

    function upload()
    {
        $this->layout = "ajax";
        App::import('Vendor','UploadHandler',array<'file' => 'UploadHandler/UploadHandler.php'));

        $options = array
        (
            'script_url' => SITE_URL.'service_pictures/upload/',
            'upload_dir' => APP.WEBROOT_DIR.DS.'img'.DS.'offer_picture'.DS,
            'upload_url' => SITE_URL.'img/offer_picture/',
            'max_number_of_files' => 3,
            'thumbnail' => array
            (
                'max_width' => 150,
                'max_height' => 150
            )
        );

        $upload_handler = new UploadHandler($options, $initialize = false);
        switch ($_SERVER['REQUEST_METHOD'])
        {
            case 'HEAD':
            case 'GET':
                $upload_handler->get();
                break;
            case 'POST':
                $upload_handler->post();
                break;
            case 'DELETE':
                $upload_handler->delete();
                break;
            default:
                header('HTTP/1.0 405 Method Not Allowed');
        }
        exit;
    } ?>
```

我花了 2 个小时后成功完成并测试了它。

您也可以将数据库集成到其中。

随时问更多。

希望这对您和其他程序员兄弟有所帮助。

**从我在第一步中提到的链接下载示例代码，请按照以下步骤操作。**

根据需要放置 js 和 css 文件，但将其放置在 webroot 中以用于 cakephp 约定。

干杯。

# java - 在 XML 上使用正则表达式，避免贪婪匹配

> ID：10471136
> 
> 赞同：0
> 
> 时间：2012-05-06T14:05:41.313
> 
> 标签：java, regex, newline, replaceall

它看起来很简单，但我会在这里提供任何帮助：

我需要将密码值（可以是任何值）交换为“ ***** ***** ”

原始刺痛是从 xml 中提取的字符串

问题是我只得到输出行：

```
 <parameter><value>*****</value></parameter> 
```

但我需要整个字符串作为输出，只需要替换密码值

先感谢您

```
 String originalString = "<parameter>" +
            "<name>password</name>"+
            "<value>my123pass</value>"+
            "</parameter>"+
            "<parameter>"+
            "<name>LoginAttempt</name>"+
            "<value>1</value>"+
            "</parameter>";
    System.out.println("originalString: "+originalString);                         
    Pattern pat = Pattern.compile("<name>password</name><value>.*</value>");
    Matcher mat = pat.matcher(originalString);

    System.out.println("NewString: ");
    System.out.print(mat.replaceFirst("<value>***</value>"));
    mat.reset(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:30:11.507

如果我没记错的话，您想用 * 更改字符串中的密码。您可以直接使用 String 方法来做到这一点。只需获取起始值标记的最后一个索引并迭代直到到达“<”，用 * 替换这两者之间的值。像这样的东西：

```
int from = originalString.lastIndexOf("<name>password</name><value>");
bool endIteration = false;
for(i = from + 1 ; i < originalString.length() && !endIteration ; i ++) {
    if(originalString.toCharArray()[i] == '<')
        endIteration = true;
    else {
        originalString.toCharArray()[i] = '*';
    }
} 
```

**编辑：**还有另一种正确使用所有 String 类好东西的方法：

```
int from = originalString.lastIndexOf("<name>password</name><value>");
int to = originalString.indexOf("</value>", from);
Arrays.fill(originalString.toCharArray(), from, to, '*'); 
```

# c++ - .NET 库的 C++ 端口

> ID：10471142
> 
> 赞同：0
> 
> 时间：2012-05-06T14:06:16.977
> 
> 标签：c++, .net

在库类和方法对应的意义上，是否存在 .NET 库的 C++“端口”？至少其中一些？像 System.Xml、System.Net？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:25:47.777

您可以拥有一个混合代码解决方案，其中包含纯 c++ 代码和 c++ cli 代码。当然，假设您只对 windows 操作系统感兴趣。

# javascript - 如何在道场中制作图像滑块？

> ID：10471145
> 
> 赞同：2
> 
> 时间：2012-05-06T14:06:57.617
> 
> 标签：javascript, jquery, html, dojo

我在[http://www.ibm.com/us/en/](http://www.ibm.com/us/en/)的首页上看到了这个图像滑块，我想为我的站点设置一个这样的滑块。（超时后，第一个图像滑出屏幕，然后第二个图像在它之后飞出，然后新的一对飞入）。

我已经看到 IBM 使用 Dojo 而不是 jQuery。这是在dojo中内置的效果吗？

我有 javascript 方面的知识（但没有任何像 jQuery/dojo 这样的库），我可以自己做。但我想先知道是否有内置的东西可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:50:26.520

[我认为使用dojox.widget.Rotator](http://dojotoolkit.org/reference-guide/1.7/dojox/widget/Rotator.html)甚至[dojox.widget.AutoRotator](http://dojotoolkit.org/reference-guide/1.7/dojox/widget/AutoRotator.html)可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T07:02:34.397

IBM.com 首页上的图像滑块是使用 Dojo 构建的，但不是 Dojo 库的开箱即用组件。这是一个定制的组件。

`dojox.image`如果您想使用 Dojo 创建图像滑块，请查看 DojoX 库 ( )中现有的现成组件。[`dojox.image.SlideShow`](http://dojotoolkit.org/reference-guide/1.7/dojox/image/SlideShow.html#dojox-image-slideshow)是一个很好的起点。

# android - 如何将图片放在相机预览的前面

> ID：10471146
> 
> 赞同：1
> 
> 时间：2012-05-06T14:07:01.413
> 
> 标签：android, image

我想制作一个有 2 个活动的应用程序。第一个是来自 api 演示的 CameraPreview，默认情况下有一个选项菜单。我向它添加了第二个按钮，用于启动第二个活动，即 ImageSwitcher。我想以指定的宽度和高度将选定的照片返回到预览的前面。

此块适用于在普通活动的 onCreate 方法中获取和显示照片，但我不知道如何使用 CameraPreview 执行此操作：

```
setContentView(R.layout.picturelay);                    
 int theID = getIntent().getExtras().getInt("the_image_id");
 ImageView i = (ImageView) findViewById(R.id.cameralay);
 i.setImageResource(theID); 
```

我的开始活动：

```
 public class CameraPreview extends Activity {
        private 
        Preview mPreview;
        Camera mCamera;    
        int numberOfCameras;
        int cameraCurrentlyLocked;
        String uzenet;
        // The first rear facing camera
        int defaultCameraId;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Hide the window title.
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);                                 

        // Create a RelativeLayout container that will hold a SurfaceView,
        // and set it as the content of our activity.
        mPreview = new Preview(this);

        setContentView(mPreview);               

        try {

            int theID = getIntent().getExtras().getInt("the_image_id");
            ImageView i = (ImageView) findViewById(R.id.cameralay);
        i.setImageResource(theID);     

        } catch (Exception e){

            Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG);

        }

        // Find the total number of cameras available
        numberOfCameras = Camera.getNumberOfCameras();

        // Find the ID of the default camera
        CameraInfo cameraInfo = new CameraInfo();
            for (int i = 0; i < numberOfCameras; i++) {
                Camera.getCameraInfo(i, cameraInfo);
                if (cameraInfo.facing == CameraInfo.CAMERA_FACING_BACK) {
                    defaultCameraId = i;
                }
            }
    }

    @Override
    protected void onResume() {
        super.onResume();

        // Open the default i.e. the first rear facing camera.        
        mCamera = Camera.open();
        cameraCurrentlyLocked = defaultCameraId;
        mPreview.setCamera(mCamera);

    }

    @Override
    protected void onPause() {
        super.onPause();

        // Because the Camera object is a shared resource, it's very
        // important to release it when the activity is paused.
        if (mCamera != null) {
            mPreview.setCamera(null);
            mCamera.release();
            mCamera = null;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        // Inflate our menu which can gather user input for switching camera
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.camera_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.switch_cam:
            // check for availability of multiple cameras
            if (numberOfCameras == 1) {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage(this.getString(R.string.camera_alert))
                       .setNeutralButton("Close", null);
                AlertDialog alert = builder.create();
                alert.show();
                return true;
            }

            // OK, we have multiple cameras.
            // Release this camera -> cameraCurrentlyLocked
            if (mCamera != null) {
                mCamera.stopPreview();
                mPreview.setCamera(null);
                mCamera.release();
                mCamera = null;
            }

            // Acquire the next camera and request Preview to reconfigure
            // parameters.
            mCamera = Camera
                    .open((cameraCurrentlyLocked + 1) % numberOfCameras);
            cameraCurrentlyLocked = (cameraCurrentlyLocked + 1)
                    % numberOfCameras;
            mPreview.switchCamera(mCamera);

            // Start the preview
            mCamera.startPreview();
            return true;                  

        case R.id.get_picture:

            Intent intent2 = new Intent(CameraPreview.this, ImageSwitcher1.class);
            //startActivityForResult(intent, 0);
            startActivity(intent2); 
            return true;      

        }
        return super.onOptionsItemSelected(item);
    }
    }

    class Preview extends ViewGroup implements SurfaceHolder.Callback {
        private final String TAG = "Preview";

        SurfaceView mSurfaceView;
        SurfaceHolder mHolder;
        Size mPreviewSize;
        List<Size> mSupportedPreviewSizes;
        Camera mCamera;

    Preview(Context context) {
        super(context);                

        mSurfaceView = new SurfaceView(context);
        addView(mSurfaceView);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);        
    }

    public void setCamera(Camera camera) {
        mCamera = camera;
        if (mCamera != null) {
            mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
            requestLayout();            
        }
    }

    public void switchCamera(Camera camera) {
       setCamera(camera);
       try {
           camera.setPreviewDisplay(mHolder);
       } catch (IOException exception) {
           Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
       }
       Camera.Parameters parameters = camera.getParameters();
       parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
       requestLayout();

       camera.setParameters(parameters);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // We purposely disregard child measurements because act as a
        // wrapper to a SurfaceView that centers the camera preview instead
        // of stretching it.
        final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
        final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);
        setMeasuredDimension(width, height);

        if (mSupportedPreviewSizes != null) {
            mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
        }        
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        if (changed && getChildCount() > 0) {
            final View child = getChildAt(0);

            final int width = r - l;
            final int height = b - t;

            int previewWidth = width;
            int previewHeight = height;
            if (mPreviewSize != null) {
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
            }

            // Center the child SurfaceView within the parent.
            if (width * previewHeight > height * previewWidth) {
                final int scaledChildWidth = previewWidth * height / previewHeight;
                child.layout((width - scaledChildWidth) / 2, 0,
                        (width + scaledChildWidth) / 2, height);
            } else {
                final int scaledChildHeight = previewHeight * width / previewWidth;
                child.layout(0, (height - scaledChildHeight) / 2,
                        width, (height + scaledChildHeight) / 2);
            }
        }
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, acquire the camera and tell it where
        // to draw.
        try {
            if (mCamera != null) {
                mCamera.setPreviewDisplay(holder);
            }
        } catch (IOException exception) {
            Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
        }        
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        if (mCamera != null) {
            mCamera.stopPreview();
        }
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.1;
        double targetRatio = (double) w / h;
        if (sizes == null) return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
        requestLayout();        

        mCamera.setParameters(parameters);
        mCamera.startPreview();        

    }

} 
```

第二个活动：

```
public class ImageSwitcher1 extends Activity implements
        AdapterView.OnItemSelectedListener, ViewSwitcher.ViewFactory {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.image_switcher_1);

        mSwitcher = (ImageSwitcher) findViewById(R.id.switcher);
        mSwitcher.setFactory(this);
        mSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.fade_in));
        mSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.fade_out));

        Gallery g = (Gallery) findViewById(R.id.gallery);
        g.setAdapter(new ImageAdapter(this));
        g.setOnItemSelectedListener(this);

        g.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position, long id) {

                Intent intent = new Intent(ImageSwitcher1.this, CameraPreview.class);
                intent.putExtra("the_image_id", mImageIds[position]);           

                startActivity(intent);   

                finish();
            }
        });
    }

    public void onItemSelected(AdapterView parent, View v, int position, long id) {
        mSwitcher.setImageResource(mImageIds[position]);
    }

    public void onNothingSelected(AdapterView parent) {
    }

    public View makeView() {
        ImageView i = new ImageView(this);
        i.setBackgroundColor(0xFF000000);
        i.setScaleType(ImageView.ScaleType.FIT_CENTER);
        i.setLayoutParams(new ImageSwitcher.LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));
        return i;
    }

    private ImageSwitcher mSwitcher;

    public class ImageAdapter extends BaseAdapter {
        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getCount() {
            return mThumbIds.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView i = new ImageView(mContext);

            i.setImageResource(mThumbIds[position]);
            i.setAdjustViewBounds(true);
            i.setLayoutParams(new Gallery.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            i.setBackgroundResource(R.drawable.picture_frame);
            return i;
        }

        private Context mContext;

    }

    private Integer[] mThumbIds = {
            R.drawable.1, R.drawable.2,
            R.drawable.3, R.drawable.4,
            R.drawable.5, R.drawable.6,
            R.drawable.7, R.drawable.8,
            R.drawable.9
            };

    private Integer[] mImageIds = {
        R.drawable.1, R.drawable.2,
            R.drawable.3, R.drawable.4,
            R.drawable.5, R.drawable.6,
            R.drawable.7, R.drawable.8,
            R.drawable.9
            };

} 
```

谢谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:14:17.447

我有一个具有不同预览活动的解决方案。所以我可以在相机预览前看到所选图像。这是使用的预览活动：

```
public class PreviewDemo extends Activity {
  private SurfaceView preview=null;
  private SurfaceHolder previewHolder=null;
  private Camera camera=null;
  private boolean inPreview=false;
  private boolean cameraConfigured=false;
  private Context context;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    preview=(SurfaceView)findViewById(R.id.preview);
    previewHolder=preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);             

    try {   
        int theID = getIntent().getExtras().getInt("the_image_id");
        ImageView i = (ImageView) findViewById(R.id.cameralay);
        i.setImageResource(theID);     

    } catch (Exception e){  

    Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG);

    }

  }

  @Override
  public void onResume() {
    super.onResume();

    camera=Camera.open();
    startPreview();
  }

  @Override
  public void onPause() {
    if (inPreview) {
      camera.stopPreview();
    }

    camera.release();
    camera=null;
    inPreview=false;

    super.onPause();
  }

  private Camera.Size getBestPreviewSize(int width, int height,
                                         Camera.Parameters parameters) {
    Camera.Size result=null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
      if (size.width<=width && size.height<=height) {
        if (result==null) {
          result=size;
        }
        else {
          int resultArea=result.width*result.height;
          int newArea=size.width*size.height;

          if (newArea>resultArea) {
            result=size;
          }
        }
      }
    }

    return(result);
  }

  private void initPreview(int width, int height) {
    if (camera!=null && previewHolder.getSurface()!=null) {
      try {
        camera.setPreviewDisplay(previewHolder);
      }
      catch (Throwable t) {
        Log.e("PreviewDemo-surfaceCallback",
              "Exception in setPreviewDisplay()", t);
        Toast
          .makeText(PreviewDemo.this, t.getMessage(), Toast.LENGTH_LONG)
          .show();
      }

      if (!cameraConfigured) {
        Camera.Parameters parameters=camera.getParameters();
        Camera.Size size=getBestPreviewSize(width, height,
                                            parameters);

        if (size!=null) {
          parameters.setPreviewSize(size.width, size.height);
          camera.setParameters(parameters);
          cameraConfigured=true;
        }
      }
    }
  }

  private void startPreview() {
    if (cameraConfigured && camera!=null) {
      camera.startPreview();
      inPreview=true;
    }
  }

  SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
      // no-op -- wait until surfaceChanged()
    }

    public void surfaceChanged(SurfaceHolder holder,
                               int format, int width,
                               int height) {
      initPreview(width, height);
      startPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
      // no-op
    }
  };

  public boolean onCreateOptionsMenu(Menu menu) {

      // Inflate our menu which can gather user input for switching camera
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.camera_menu2, menu);
      return true;
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
      // Handle item selection
      switch (item.getItemId()) {

      case R.id.take_photo:
          //code of taking a photo will be here...

        return true;

      }
      return super.onOptionsItemSelected(item);
  }
} 
```

我的布局文件包含表面视图和图像视图：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<android.view.SurfaceView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/preview"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</android.view.SurfaceView>        
<ImageView
        android:id="@+id/cameralay"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:contentDescription="@+id/app_name"> 
</ImageView>
</RelativeLayout> 
```

# arrays - 无法设置 PivotItem 类的 Visible 属性

> ID：10471148
> 
> 赞同：2
> 
> 时间：2012-05-06T14:07:29.933
> 
> 标签：arrays, excel, vba, pivot-table

运行时错误“1004”：无法设置 PivotItem 类的 Visible 属性

Excel VBA：

```
Dim pt As PivotTable
Dim pf As PivotField
Dim pi As PivotItem

Set pf = pt.PivotFields("Snapshot Date")

For Each pi In pf.PivotItems
If pi.Name <> "(blank)" Then
pi = DateValue(pi) 'I have tried using Cdate, Cdbl, Cstr as well.  
End If
Next pi 
```

错误发生在这里：

```
i = 1
Do Until i >= pf.PivotItems.count - 1

For Each pi In pf.PivotItems
pi.Visible = False 'Error here
Next pi

pf.PivotItems(i).Visible = True '.. And here!
pf.PivotItems(i + 1).Visible = True
Loop 
```

数据透视项目是日期，不确定是否需要在打开/关闭可见性之前对其进行格式化？

我无休止地用谷歌搜索，找不到任何解决方案:(关于非连续项目的一些东西，但我不太明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T20:33:40.647

您必须至少有一个可见的 PivotItem 并且您将它们全部设置为不可见。您需要遍历所有 PivotItems，将第一个设置为可见 = True，然后测试所有其余的并相应地设置它们，然后测试第一个并相应地设置它。这样您就可以确保始终有一个可见的 PivotItem。

但是，我不确定您的测试是什么。你有一个循环，但不要增加“i”，所以它会永远循环，总是试图将 PivotItems 1 和 2 设置为可见。

我不知道你为什么会出现第二个错误，但如果你能解释你想要做什么，可能会有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T07:29:01.193

对于使用 google 找到此页面的任何人（就像我一样），我找到了解决此问题的方法。

问题似乎只是设置**visible = true**。

设置**visible = false**似乎工作正常。

如果您禁用多项选择然后重新启用它，则会选择所有类别。

从那时起，您可以循环并将 visible = false 设置为您想要的。

请参阅下面的示例（工作）代码：-

```
Dim table As PivotTable
Dim PvI As PivotItem

Set table = ActiveSheet.PivotTables("PivotTable3")
With table.PivotFields("ERROR CODE")
    .ClearAllFilters
    .EnableMultiplePageItems = False
    .CurrentPage = "(All)"
    .EnableMultiplePageItems = True
    For Each PvI In .PivotItems
        Select Case PvI.Name
        Case "Err0"
            PvI.Visible = False
        End Select
    Next
End With 
```

希望这可以帮助某人。

# jax-rs - JBoss 6 中独立 JavaEE6 WAR 之间的 JAX-RS 提供程序的干扰？

> ID：10471153
> 
> 赞同：0
> 
> 时间：2012-05-06T14:07:57.357
> 
> 标签：jax-rs, jboss6.x

我正在开发两个项目，我将它们部署为两个 WAR（每个项目都在自己的 WAR 中）。两个项目在 WAR 中都有相同的 JAR，它构成了一些公共代码。

每个项目都有一堆项目特定的 JAX-RS 提供程序类。

部署这两个项目时，我似乎在这些项目的提供者之间遇到了一些干扰。要么没有找到提供者（例如 isReadable 甚至没有被调用），要么来自一个项目的提供者似乎在对另一个项目的请求期间被检查为适用（例如，我看到它的 isReadable() 被调用）。

这有点随机发生，当我只部署一个应用程序时，问题完全消失了。

问题：

有没有其他人也看到过这种行为？

我做错了什么还是这可能只是 JBoss 中的一个错误？

**编辑**：我可能有这个问题：[https](https://community.jboss.org/wiki/ClassLoadingConfiguration) ://community.jboss.org/wiki/ClassLoadingConfiguration ？

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:34:45.920

终于找到了答案——这是一个类加载器隔离问题。此处描述：http: [//jalg.net/2012/05/death-by-jboss-6-classloading/](http://jalg.net/2012/05/death-by-jboss-6-classloading/)

# php - 同时修改一个mysql数据库中的多行

> ID：10471155
> 
> 赞同：4
> 
> 时间：2012-05-06T14:08:13.370
> 
> 标签：php, mysql, database, str-replace

我有一个数据库，其中包含许多不同产品的价格。它们都采用这种格式：25,000 英镑。

我想要的是以下内容：25000。

我想我必须使用 foreach 循环并使用 str_replace，但我似乎找不到删除井号和逗号的方法。

我也有几行缺少价格，它们在数据库中如下：00 英镑

同样，我想删除井号。所以我猜这一定是一个不同的循环？

你能解释一下它必须怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T14:09:35.243

这将一次删除所有行中的逗号和`£`（如果存在）

```
update your_table
set your_column = replace(replace(your_column, '£', ''), ',', '') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T14:14:34.820

尝试这个

```
$new_array = str_replace(array("£",","),array("",""),$old_array); 
```

# silverlight - MongoDb + Silverlight - [BsonId] 分配

> ID：10471159
> 
> 赞同：1
> 
> 时间：2012-05-06T14:09:04.173
> 
> 标签：silverlight, mongodb, poco, mongodb-.net-driver, silverlight-5.0

SilverLight 似乎不支持官方的 MongoDB C# 驱动程序。我想在服务器端使用 MongoDB 并通过 WCF 将数据传送到 silverlight 客户端。

问题是我的 POCO 中的 Id 属性 - 因为我无法将非 Silverlight 项目导入 silverlight - 我不能使用`[BsonId]`或`ObjectId`在我的 POCO 中，它应该由服务器和客户端使用。

我在这里看到了关于将 Id 成员作为字符串但`ObjectId`在数据库中表示的问题，但我还没有看到解决方案。

最好的方法是什么

```
public string Id { get; set; } 
```

在我的课堂上，但仍然享受`ObjectId`服务器端的好处？

我看过[这个页面](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-IdentifyingtheIdfieldorproperty)，我尝试使用`SetIdMember`and `MapIdProperty`，插入的文档上的 _id 为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:05:07.137

在此处查看文档以获取表示选项：[http ://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-RepresentationSerializationOptions](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-RepresentationSerializationOptions)

或者，您可以在代码和数据库中都使用 Guid，而无需在查询时进行心理翻译。

# ios - 未调用 UIPinchGestureRecognizer

> ID：10471160
> 
> 赞同：0
> 
> 时间：2012-05-06T14:09:04.667
> 
> 标签：ios, cocoa-touch, uikit, mkmapview, uipinchgesturerecognizer

我的 iOS 应用程序只有一个视图，其中有一个 mapView。添加点击或长按识别器时，会正确调用事件。但不是捏事件......

```
 UIPinchGestureRecognizer *handlePinchGesture=[[UIPinchGestureRecognizer alloc]initWithTarget:mapView action:@selector(handleGesture:)];
    [mapView addGestureRecognizer:handlePinchGesture]; 
```

知道我应该添加什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:28:43.853

假设你`mapView`是一个`MKMapView`，它有自己的捏手势识别器来缩放地图。

如果要添加自己的识别器，则必须允许它与其他（地图视图控制的）识别器同时识别。设置你的手势识别器`delegate`并实现`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`（你总是可以 return `YES`）。

您还应该设置`self`为手势识别器`target`而不是`mapView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:22:10.120

在 handleGesture 方法中，你做了这样的事情：

```
CGFloat beginPinch;  //declare this as your ivars

-(void)handleGesture:(UIPinchGestureRecognizer *)pinchRecognizer
{
    if (pinchRecognizer.state == UIGestureRecognizerStateBegan)
    {
        beginPinch = pinchRecognizer.scale;    
    } 
    else if (pinchRecognizer.state == UIGestureRecognizerStateEnded)
    {
        if (pinchRecognizer.scale < beginPinch)
        {
              //do your stuff
        }
    }
} 
```

# zend-framework - Zend Framework - 改变动作输出的顺序

> ID：10471161
> 
> 赞同：0
> 
> 时间：2012-05-06T14:09:13.473
> 
> 标签：zend-framework, zend-view

我的控制器中有两个用于相册的操作，第一个是创建一个表单来创建一个新相册并处理 POST，第二个是生成现有相册的列表。表单发布到第一个操作，然后将列表操作放在操作堆栈上。此顺序是必要的，否则新创建的专辑不会出现在列表中。

所以在我的 HTML 输出中，首先是 createAction-view 的输出，然后是 listAction-view 的输出。但出于样式原因，我想更改 HTML 中两个操作的视图输出顺序。有没有一种方法可以让列表后跟表单而不更改执行操作的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:49:35.303

如果可能，您应该尽量避免使用操作堆栈。您可以通过在处理 POST 数据后简单地重定向到列表视图来完全避免此要求。这也可以防止用户通过刷新页面意外再次提交同一个相册。如果您仍然希望表单显示在列表下，只需将该表单也添加到该操作中，以便您可以在相册列表下的视图中输出它。

```
public function createAction()
{
    $form = new Yourapp_Form_Album();
    if ($this->getRequest()->isPost()) {
        if ($form->isValid($this->getRequest()->getPost()) {
            // save the data and redirect
        }
    }

    $this->view->form = $form;
}

public function listAction()
{
    // load albums and assign to the view

    // if you want the form under the list
    $this->view->form = new Yourapp_Form_Album();
} 
```

# spring-security - 带有 /j_spring_security_logout 的 Spring-Security 可能未完全注销

> ID：10471162
> 
> 赞同：3
> 
> 时间：2012-05-06T14:09:15.433
> 
> 标签：spring-security

所以我试图确定这是一个错误还是浏览器缓存，或者我是否遗漏了一些东西，但是当我注销时，我可以访问我之前访问过的任何页面。我什至有一个对休息端点的 ajax 调用，当我调用它时，我打印响应并得到 200 ok。

现在，如果我单击注销，它会返回带有无效会话 url 参数的登录页面。所以看起来它正在尝试删除会话，而且如果我完全关闭浏览器，而不仅仅是我无法再访问之前能够访问的页面的选项卡。但是如果我不关闭浏览器，我可以访问我已经访问过的任何页面，我还没有访问过的页面会将我转发到登录页面。这让我想知道它是否是浏览器缓存问题，但是 ajax 请求上的 200ok 让我怀疑。

Spring-Security 版本 3.1.0

这是我的注销配置。

```
<logout invalidate-session="true" logout-success-url="/login-page.html?logout=true"
        logout-url="/j_spring_security_logout" />
    <session-management invalid-session-url="/login-page.html?session=invalid">
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
    </session-management> 
```

在 web.xml 我添加了这个监听器

```
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener> 
```

**更新**

这确实是一个浏览器缓存问题，所以为了修复它我添加到 DispatcherServlet xml

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
     <property name="cacheSeconds" value="0" />
 </bean> 
```

还在头部添加了 META 标签

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1"> 
```

这现在禁用了我所有页面和休息方法的缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T14:23:45.983

Indeed it really looks like a caching issue:

*   Try accessing already visited pages with some extra random parameter
*   ...try the same with AJAX call (just append `?random=` + `Math.random()`.
*   Also try `POST`ing using AJAX, as GET is much more likely being cached.
*   Finally have a look at Firebug or any other monitoring tool (or access log on the server side) to confirm the request was cached. If caching is the problem, investigate why browser decides to cache your resources.

# vb.net - 单击按钮时显示图像

> ID：10471166
> 
> 赞同：0
> 
> 时间：2012-05-06T14:09:44.993
> 
> 标签：vb.net, winforms

单击按钮时，我需要显示两个图像。首先，用户将浏览这两个图像，单击第三个按钮后，它应该显示这两个图像。到目前为止我有这个代码。我是vb的新手

```
 Dim dialog As New OpenFileDialog()
    If DialogResult.OK = dialog.ShowDialog Then
        TextBox2.Text = dialog.FileName
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:50:56.087

![在此处输入图像描述](../Images/79fab96b7ec32fa2c9b34082fe4ad03d.png)

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim fdialog As New OpenFileDialog()
    fdialog.FileName = String.Empty
    fdialog.Multiselect = True

    If fdialog.ShowDialog = DialogResult.OK Then
        If fdialog.FileNames.Length = 2 Then
            PictureBox1.Image = System.Drawing.Image.FromFile(fdialog.FileNames(0))
            TextBox1.Text = fdialog.FileNames(0)
            PictureBox2.Image = System.Drawing.Image.FromFile(fdialog.FileNames(1))
            TextBox2.Text = fdialog.FileNames(1)
        ElseIf fdialog.FileNames.Length = 1 Then
            PictureBox1.Image = System.Drawing.Image.FromFile(fdialog.FileName)
            TextBox1.Text = fdialog.FileName
            PictureBox2.Image = Nothing
            TextBox2.Text = String.Empty
        End If
    End If
End Sub 
```

以下代码进入“加载”按钮的单击事件。
问候 ...

# java - Javafx 2.0 提示Applet Security 时，如何自定义空Applet 区域的背景？

> ID：10471167
> 
> 赞同：0
> 
> 时间：2012-05-06T14:09:52.797
> 
> 标签：java, html, applet, javafx, javafx-2

我有一个运行良好的 Javafx 2.0 Applet。此小程序需要所有安全权限。此小程序具有浅灰色背景（与 html 背景页面颜色相同）。

所以我的问题是：当 Java 安全请求用户允许小程序时，unload-yet-applet 的背景是深灰色的。当用户单击“执行”时，背景会根据需要变为浅灰色。但这是因为加载了小程序。

当此安全警​​告弹出时，我希望这个空的小程序区域为浅灰色（作为 html 页面的背景）。你们知道如何做到这一点吗？

*我正在使用一个带有浅灰色填充的完整矩形的预加载器，但预加载器似乎是在 Java 安全后启动用户允许的所有权限。*

这里的结果让你更好地理解：

![在此处输入图像描述](../Images/ad5d9712f953e099d8ddf6701130c79b.png)

**没有样式表 css 的 HTML 文件（如果我删除 css 也会出现同样的问题）：**

```
<html><head>
<SCRIPT src="./web-files/dtjava.js"></SCRIPT>
<script>
    function javafxEmbed() {
        dtjava.embed(
            {
                url : 'Test.jnlp',
                placeholder : 'app-placeholder',
                width : 600,
                height : 400
            },
            {
                javafx : '2.0+'
            },
            {}
        );
    }
    dtjava.addOnloadCallback(javafxEmbed);
</script>
</head><body>
<h2>Test page for <b>TEST</b></h2>
  <center><div id='app-placeholder'></div></center>
</body></html> 
```

这是**JNLP 文件**：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0" xmlns:jfx="http://javafx.com" href="Test.jnlp">
  <information>
    <title>Test</title>
    <vendor>Test</vendor>
    <homepage href="http://www.test.com/"/>
    <description>I don't know where this appears</description>
    <description kind="short">And I don't know where this appears too</description>
    <icon href="icon.png"/>
    <icon kind="splash" href="icon.png"/>
    <offline-allowed/>
  </information>
  <resources os="Windows">
    <jfx:javafx-runtime version="2.0+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
  </resources>
  <resources>
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="lib/test-Preloader.jar" size="5096" download="progress" />
    <jar href="test.jar" size="246346" download="eager" />
  </resources>
<security>
  <all-permissions/>
</security>
  <applet-desc  width="600" height="400" main-class="com.javafx.main.NoJavaFXFallback"  name="Test" />
  <jfx:javafx-desc  width="600" height="400" main-class="testApp.IM"  name="Test"  preloader-class="test.preloader.im_Preloader">
  </jfx:javafx-desc>
  <update check="background"/>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:42:14.953

请参阅 Applet 部署指南的[加载屏幕](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/applet/applet_deployment.html#LOADING_SCREEN)部分。

> 新插件可以更好地自定义加载小程序之前显示的图像。现在支持动画 GIF 作为图像参数的目标，如旧 Java 插件指南的[特殊属性部分所述。](http://docs.oracle.com/javase/7/docs/technotes/guides/plugin/developer_guide/special_attributes.html)此外，现在支持以下新参数： ...

# android - Android wrap_content 和 fill_parent 同时？

> ID：10471168
> 
> 赞同：0
> 
> 时间：2012-05-06T14:10:08.940
> 
> 标签：android, android-layout

是否有可能实现这样的事情：我有一张图片要设置为布局的背景，其中也是 TextView。因此，我希望该布局将其高度设置为包装内容（应该是 TextView 的高度），并且 ImageView 具有 fill_parent 作为高度和宽度。

我尝试使用：

*   带有背景和 TextView 的 LinearLayout
*   带背景的文本视图
*   带有 ImageView（将高度设置为 fill_parent）和 TextView（设置为 wrap_content）的 RelativeLayout

有没有办法做到这一点？

抱歉，如果是下一个相同的问题，但我不知道如何找到解决方案。

编辑：

我会尝试更具体。我想要一个带有背景的 TextView。但我希望缩放背景以适合 TextView，它应该是 wrap_content 宽度和 wrap_content 高度。但我有更高分辨率的图像，所以有很多未使用的空间（背景不缩放）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:26:16.303

1.  不，没有办法同时设置视图的宽度/`wrap_content`高度`fill_parent`。

2.  你到底想达到什么目的？你是这个意思吗？

    ```
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        ...
        android:background="@drawable/image" >

        <TextView 
            android:layout_width="wrap_content"
            android:layout_width="wrap_content"
            ... >
        </TextView>

    </LinearLayout> 
    ```

## 编辑

如果您想很好地缩放 a 的背景图像`TextView`，我认为您可能想要查看的是 9-patch 图像。有关更多信息，请参阅[此](https://stackoverflow.com/q/6151311/844882)帖子。还有[这个](https://stackoverflow.com/q/3479779/844882)。

# c# - 根据其数据类型“String”，值“hibernate.current_session_context_class”无效

> ID：10471172
> 
> 赞同：0
> 
> 时间：2012-05-06T14:10:29.343
> 
> 标签：c#, nhibernate, session-management, sessioncontext

我有一个使用 Nhibernate 的应用程序。这是我第一个使用它的应用程序，所以我是新手。我正在尝试测试我的第一个 get 方法。

```
protected void Button1_Click(object sender, EventArgs e)
{
  IList<Person> persons =
    SessionManager
      .SessionFactory
      .GetCurrentSession()
      .CreateCriteria(typeof(Person))
      .List<Person>();
} 
```

这是会话管理器代码：

```
public static partial class SessionManager 
{
  private static readonly ISessionFactory _sessionFactory;

  static SessionManager()
  {
    Configuration cfg = new Configuration().Configure();
    _sessionFactory = 
      Fluently
        .Configure(cfg)
        .Mappings(m => m.FluentMappings.AddFromAssembly(typeof(SessionManager).Assembly))
        .BuildSessionFactory();
        //CurrentSessionContext.Bind(_sessionFactory.GetCurrentSession());
  }

  public static ISession OpenSession()
  {
    return _sessionFactory.OpenSession();
  }

  public static ISessionFactory SessionFactory
  {
    get { return _sessionFactory; }
  }
} 
```

但每次我运行应用程序并单击 btn. 它抛出带有内部异常消息的异常：

> “'name' 属性无效 - 值 'hibernate.current_session_context_class' 根据其数据类型 'String' 无效 - 枚举约束失败。”}

这是我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="utf-16"?>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="hibernate.current_session_context_class">managed</property>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="dialect">NHibernate.Dialect.MsSql2005Dialect</property>
      <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
      <property name="connection.connection_string">Server=localhost\MSSQLSERVERR2;Database=PersonSearch;Trusted_Connection=True</property>
      <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>
      <property name="cache.use_minimal_puts">false</property>
      <property name="use_outer_join">false</property>
    </session-factory>
  </hibernate-configuration> 
```

原来我没有放

```
<property name="hibernate.current_session_context_class">managed</property> 
```

但它给了我一个错误：

> 未配置 CurrentSessionContext（设置属性 current_session_context_class）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:36:58.873

如果在 Web 应用程序中，请尝试以下操作：

```
<property name="current_session_context_class">managed_web</property> 
```

如果在 winform 应用程序中，请尝试以下操作：

```
<property name="current_session_context_class">thread_static</property> 
```

# ruby-on-rails-3 - Rails 根据模型生成表单

> ID：10471174
> 
> 赞同：4
> 
> 时间：2012-05-06T14:10:34.860
> 
> 标签：ruby-on-rails-3, views

运行初始脚手架命令时，它会根据您的模型自动为您生成一个表单。生成迁移时有什么方法可以重新运行它？

如果能够输入 rails g view user 或 w/e 来根据您的新模型字段更新您的视图，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:17:21.657

[https://github.com/justinfrench/formtastic](https://github.com/justinfrench/formtastic)

允许您执行此操作。

# php - 无法加载谷歌地图数据

> ID：10471177
> 
> 赞同：2
> 
> 时间：2012-05-06T14:11:35.383
> 
> 标签：php, javascript, google-maps

我使用 google javascript API v3 加载地图并生成一些标记。当我在 Windows 上部署和运行它时效果很好，但是当我在 linux 上部署它时它无法加载地图数据。这是要加载的代码：

```
function initialize() {
    var myOptions = {
      center: new google.maps.LatLng(<?php echo $place[0]->lat?>,<?php echo $place[0]->lng?>),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("gmap"),
        myOptions);
} 
```

谁能让我知道出了什么问题？

这个问题就解决了。问题是我的 linux 服务器上 lat & lng 的顺序是错误的。

# html - CSS 调整图像大小

> ID：10471179
> 
> 赞同：2
> 
> 时间：2012-05-06T14:11:51.470
> 
> 标签：html, image, resize, zooming, scale

我应该在 CSS 中添加什么以使所有图像变大两倍？它必须在 Firefox 12 中工作。我不在乎视觉质量下降。HTML 包含这样的图像：`<img src="foo.png">`. 所有图像都有不同的宽度和高度，我想按比例缩放它们：200% 宽度和 200% 高度。

我知道我可以使用图像转换器来使 PNG 更大。但是，在这个问题中，我对纯 CSS 解决方案感兴趣。

`width=... height=...`我知道我可以为标签添加两倍大`<img`，但这需要修改 HTML（加上对现有图像大小的自动检测），在这个问题中，我对纯 CSS 解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:18:22.407

你能补充一下吗：

```
img {max-width:200%;} 
```

到你的CSS？

这将是“自适应的”（或者是“响应式的？”），并且不会“强制”图像到 200%（宽度），但如果视口很宽，则允许它们缩放，直到并包括 200% 宽度足够。

`max-`如果视口不够宽，您可以删除并明确“强制”200% 宽度，这将导致水平滚动条。

据我了解，选择一个或另一个（`height`或`width`，但不是两者），保留比率。

您可以`<img>`直接在 CSS 中为元素设置样式，这应该适用于 HTML 文档中的所有图像，通过`<img>`标签显示。

您可以指定：

```
img {width:200%;} 
```

如果您希望它们“无论如何都是 200%”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T16:47:35.137

您可以使用以下 css3：

```
-webkit-transform: scale(2);
-moz-transform: scale(2);
-o-transform: scale(2); 
```

虽然，图像将被布置为占用 100% 的空间（如位置：相对；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T14:45:33.087

在页面的 head 部分启用 JQuery。

```
<img src="foo.png" ID='scalable'>

$("#scalable").css("width", "200%");
$("#scalable").css("height", "200%"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T22:24:29.660

看起来这在仅使用 CSS 的跨浏览器方式中是不可能的。

# json - 在 Play 2 中使用 json

> ID：10471182
> 
> 赞同：4
> 
> 时间：2012-05-06T14:12:29.740
> 
> 标签：json, playframework, playframework-2.0

我正在尝试创建一个简单的应用程序，允许我创建、读取、更新和删除各种用户。我有一个基本的基于 UI 的视图、控制器和模型，但我想比这更高级，并提供一个 RESTful json 接口。

但是，尽管阅读了我在 Play 2 文档、Play 2 Google 组和 stackoverflow 网站中可以找到的所有内容，但我仍然无法使其正常工作。

我已经根据之前的反馈更新了我的控制器，现在我相信它是基于文档的。

这是我更新的控制器：

```
package controllers;

import models.Member;

import play.*;
import play.mvc.*;
import play.libs.Json;
import play.data.Form;

public class Api extends Controller {

/* Return member info - version to serve Json response */
public static Result member(Long id){
  ObjectNode result = Json.newObject();
  Member member = Member.byid(id);
    result.put("id", member.id);
    result.put("email", member.email);
    result.put("name", member.name);
    return ok(result);
}

// Create a new body parser of class Json based on the values sent in the POST
@BodyParser.Of(Json.class)
public static Result createMember() {
    JsonNode json = request().body().asJson();
    // Check that we have a valid email address (that's all we need!)
    String email = json.findPath("email").getTextValue();
    if(name == null) {
        return badRequest("Missing parameter [email]");
    } else {
        // Use the model's createMember class now
        Member.createMember(json);
        return ok("Hello " + name);
    }
}

.... 
```

但是当我运行它时，我收到以下错误：

```
incompatible types [found: java.lang.Class<play.libs.Json>] [required: java.lang.Class<?extends play.mvc.BodyParser>]
In /Users/Mark/Development/EclipseWorkspace/ms-loyally/loyally/app/controllers/Api.java at line 42.

41  // Create a new body parser of class Json based on the values sent in the POST
42  @BodyParser.Of(Json.class) 
43  public static Result createMember() {
44      JsonNode json = request().body().asJson();
45      // Check that we have a valid email address (that's all we need!)
46      String email = json.findPath("email").getTextValue(); 
```

据我所知，我已经从[文档](http://www.playframework.org/documentation/2.0.1/JavaJsonRequests)中复制了，因此我将不胜感激任何帮助使其正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:15:23.453

`Json`Play 2 文档中的类的使用似乎存在冲突。为了使上面的示例正常工作，使用了以下导入：

```
import play.mvc.Controller;
import play.mvc.Result;
import play.mvc.BodyParser;                     
import play.libs.Json;
import play.libs.Json.*;                        

import static play.libs.Json.toJson;

import org.codehaus.jackson.JsonNode;           
import org.codehaus.jackson.node.ObjectNode;    

@BodyParser.Of(play.mvc.BodyParser.Json.class)
public static index sayHello() {
    JsonNode json = request().body().asJson();
    ObjectNode result = Json.newObject();
    String name = json.findPath("name").getTextValue();
    if(name == null) {
        result.put("status", "KO");
        result.put("message", "Missing parameter [name]");
        return badRequest(result);
    } else {
        result.put("status", "OK");
        result.put("message", "Hello " + name);
        return ok(result);
    }
} 
```

`Json`注意正确类的显式调用`@BodyParser`

我不确定这是否是一个错误？但这是我可以让这个例子工作的唯一方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-20T18:01:06.270

导入这两个

```
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.node.ObjectNode; 
```

根据此文档： http: [//fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/node/ObjectNode.html](http://fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/node/ObjectNode.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T21:51:49.130

尝试这个：

```
import play.*;
import play.mvc.*;
import org.codehaus.jackson.JsonNode; //Fixing "error: cannot find symbol" for JsonNode

// Testing JSON
  @BodyParser.Of(BodyParser.Json.class) //Or you can import play.mvc.BodyParser.Json
  public static Result sayHello() {
    JsonNode json = request().body().asJson();
    String name = json.findPath("name").getTextValue();
    if(name==null) {
      return badRequest("Missing parameter [name]");
    } else {
      return ok("Hello " + name);
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T14:44:13.590

AFAIK，您使用的代码尚未达到任何官方 Play 版本（2.0 或 2.0.1 均未达到）： [https ://github.com/playframework/Play20/pull/212](https://github.com/playframework/Play20/pull/212)

相反，您可以这样做（未经测试）：

```
if(request().getHeader(play.mvc.Http.HeaderNames.ACCEPT).equalsIgnoreCase("application/json")) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T21:09:24.190

您已导入`play.libs.Json`，然后将`BodyParser.Of`注释与 this 一起使用`Json.class`。

上面的注释需要一个扩展`play.mvc.BodyParser`. 所以只需替换`@BodyParser.Of(Json.class)`为`@BodyParser.Of(BodyParser.Json.class)`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T14:21:06.763

您是否尝试查看它的[文档](http://www.playframework.org/documentation/2.0.1/JavaJsonRequests)？

提供 JSON 响应如下所示：

```
@BodyParser.Of(Json.class)
public static index sayHello() {
  JsonNode json = request().body().asJson();
  ObjectNode result = Json.newObject();
  String name = json.findPath("name").getTextValue();
  if(name == null) {
    result.put("status", "KO");
    result.put("message", "Missing parameter [name]");
    return badRequest(result);
  } else {
    result.put("status", "OK");
    result.put("message", "Hello " + name);
    return ok(result);
  }
} 
```

# string - Adobe Air：将 sqlite 的结果 [object Object] 转换为字符串？

> ID：10471187
> 
> 赞同：2
> 
> 时间：2012-05-06T14:13:24.233
> 
> 标签：string, apache-flex, sqlite, air, flash-builder

我目前正在尝试从 sqlite 检索文本。我看到请求的数据量确实正确，但另一方面，内容的格式似乎不正确。我尝试了一些转换：

```
var data:Array = sqls.getResult().data;

var stData:String = String(data[0]);

Alert.show(stData); // <--- displays "[object Object]" 
```

字符串转换似乎没有做我想要的。我只是想要来自 sqlite 数据库的文本。在这种情况下，如何将 [object Object] 转换为正确的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:15:25.167

不管返回什么行（with(out)）指定列，除非定义了 SQLStatement 的 itemClass 属性，否则它将始终返回一个匿名对象。这基本上就是远程处理与 AMF 一起工作的方式。

您可以做两件事（取决于项目的复杂性）：

1.  指定一个 SQLStatement.itemClass - 这将使用与列名相同的名称的公共访问器（var 或 get/set）定义并填充返回的结果。
2.  如果保留为匿名 - 列名称将附加到您在其中迭代对象的对象，就像定义它时一样。

超级基本的例子：

```
//SQL table schema
CREATE TABLE accounts (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  num INTEGER NOT NULL,
  name TEXT NOT NULL,
  last_update DATE
);

//Define an Account class:
public class Account {
    public var id:int;
    public var num:int;
    public var name:String;
    public var last_update:Date;
}

//A statement to execute to get all accounts returned as an array of "Account"
var statement:SQLStatement = new SQLStatement();
    statement.sqlConnection = myConn;
    statement.itemClass = Account;
    statement.text = 'SELECT * FROM accounts';
    statement.addEventListener(SQLEvent.RESULT, onResults);
    statement.execute();

 protected function onResults(event:SQLEvent):void
 {
      var statement:SQLStatement = SQLStatement(event.currentTarget);
      var results:SQLResult = statement.getResult();
      for each (var account:Account in results)
      {
          //do something useful like populate a model, grid, etc...
      }
 }

 //Anonymous objects would iterate much the same way -when an item class isn't defined
 protected function onResults(event:SQLEvent):void
 {
      var statement:SQLStatement = SQLStatement(event.currentTarget);
      var results:SQLResult = statement.getResult();
      for each (var account:Object in results)
      {
          //our 'Object' will have properties: id, num, name, last_update
          //do something useful like populate a model, grid, etc...
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:00:48.157

请尝试`Objectutil.toString();`将任何类型的对象转换为字符串的函数。

# c# - 从 html 解码减号

> ID：10471190
> 
> 赞同：1
> 
> 时间：2012-05-06T14:13:57.570
> 
> 标签：c#, asp.net, asp.net-mvc

我正在从网站读取一些 og 标签，但我似乎无法从编码字符串中解码减号（-）。我试过了`HttpUtility.HtmlDecode`，`HttpUtility.UrlDecode`但它们似乎都不起作用。我得到`&#8211;`了减号。

这是什么情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:23:24.817

# php - 只选择不同的值 - MYSQL

> ID：10471193
> 
> 赞同：1
> 
> 时间：2012-05-06T14:14:27.327
> 
> 标签：php, mysql, select

我的数据库中有一个名为 area 的列，当用户注册时，他们从 6 个选项中选择一个区域。当我尝试使用下拉菜单设置显示来自这些区域的人员的搜索时，它会复制他们，并且在提交表单时只显示一个结果。

`SELECT * FROM registration ORDER BY area`是我的查询，在下拉列表中会产生如下结果：

```
Warwickshire
Warwickshire
Warwickshire
Northamptonshire 
```

等等，但我希望它只显示一次沃里克郡，当你点击提交时，它会显示沃里克郡的所有人，而不仅仅是一个用户。

任何帮助表示赞赏，谢谢理查德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:16:44.040

尝试这个

```
"SELECT * FROM registration GROUP BY <repeating_column_name> ORDER BY area" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:17:55.577

`SELECT DISTINCT area FROM registration ORDER BY area`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:23:36.483

use `distinct` clause to get you the uniq data. You can' apply distinct to `*`; specify the particular column you are trying to get. Your case, if it's area then try

```
select distinct area from registration order by area; 
```

# android - 活动停止/关闭时音乐服务停止？

> ID：10471196
> 
> 赞同：1
> 
> 时间：2012-05-06T14:14:35.803
> 
> 标签：android, android-service, background-music

我为我的应用程序（音乐播放器）创建了一个音乐服务，在进行了一些测试后，我观察到一种让我头疼的行为，因为我不知道如何解决它。

出于测试目的，我已经修改了服务，因此，一旦它启动，它就会从我的 sd 卡播放一个特定的 mp3 文件。另外，我已经修改了应用程序，因此启动了第一个活动，它启动了服务，然后它调用“finish()”。

好的，所以...我启动应用程序，第一个活动开始，我的服务启动并播放音乐，活动结束，应用程序关闭，然后...音乐停止，几秒钟后服务重新启动（我正在使用 START_STICKY 标志，所以我想这是正常的）。

我不希望在我关闭应用程序时停止音乐，或者换句话说，我不希望在我的应用程序关闭时停止服务（然后因为它已停止而重新启动）。

现在，为了控制音乐服务，我启动服务，然后绑定到它，这样我就可以调用我在接口中定义的服务函数。

有任何想法吗？

谢谢！

**编辑：**

这是我的应用程序和服务所做的一个示例（在我正在做的测试中）。

活动：

```
public class FirstActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        startService(new Intent(this, MyService.class));

        ...
        // Here is a postDelayed that will run after 2 seconds and call finish()
    }
} 
```

服务：

```
public class MyService extends Service {
    private MediaPlayer mPlayer;

    @Override
    public void onCreate() {
        mPlayer = new MusicPlayer(this);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // Here is the code that plays the music using MediaPlayer

        return START_STICKY;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:49:12.440

不要忘记在清单应用程序标签中说明该服务是远程的：

```
<service
  android:name="somepackage.PlayerService"
  android:label="Player Service"
  android:process=":remote"/> 
```

请注意，`remote`名称可以是其他名称，因此您可以拥有多个不绑定到主应用程序进程的服务

# iframe - 如何从其父窗口访问 iframe 隐藏的 div 标签

> ID：10471200
> 
> 赞同：1
> 
> 时间：2012-05-06T14:15:25.533
> 
> 标签：iframe, html, tags, hidden

> 当我单击父窗口中的按钮时，必须在页面中加载的 iframe 中显示隐藏 div 标签中的弹出窗口....我不明白我哪里出错了，所以请帮帮我

```
<html>
<head>
<title>The iframe</title>
<SCRIPT TYPE="text/javascript">
<!--
function popup(mylink, windowname)
{
if (! window.focus)return true;
var href;
if (typeof(mylink) == 'string')
   href=mylink;
else
   href=mylink.href;
window.open(href, windowname, 'width=400,height=200,scrollbars=yes');
return false;
}
//-->
</SCRIPT>
</head>
<body>
<div id="popup"style="visibility:hidden;"><strong><h1>POPUP</strong></h1>
<A 
   HREF="inframe.html" 
   onClick="return popup(this, 'notes')">click me</A>
</div>
<body>
</html> 
```

# javascript - jQuery slideDown 不流畅

> ID：10471202
> 
> 赞同：11
> 
> 时间：2012-05-06T14:15:44.187
> 
> 标签：javascript, jquery, html, slidedown

我有这个小的 jQuery slideDown 效果[http://jsfiddle.net/Gg4eP/2/](http://jsfiddle.net/Gg4eP/2/)

但是动画不流畅？我做错了什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-06T14:29:54.707

您只需将宽度添加到每个可扩展的 div。

[http://jsfiddle.net/BpMam/](http://jsfiddle.net/BpMam/)

解释：

jQuery 在显示之前不知道隐藏 div 的尺寸。因此，当它被点击时，它实际上会将其拉出位置以测量它，然后再快速更换它。这通常具有引起一些跳动的副作用。设置元素的宽度可防止 jQuery 将其拉出位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:31:11.247

一些浏览器不特别喜欢在动画时自动换行的文本，当它试图计算元素的高度时会有点生涩。

尝试格式化文本以适应元素，看看是否有帮助。

我实际上是为你做的，检查这个[FIDDLE 是否](http://jsfiddle.net/adeneo/Gg4eP/6/)解决了它？

可能也可以为滑动元素提供固定高度吗？

[小提琴](http://jsfiddle.net/adeneo/Gg4eP/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-30T14:56:31.013

我遇到了这个问题，因为要动画的 div 有一个动画时间。

```
transition-time: all 1s; 
```

删除它并获得流畅的动画。

# interpolation - 创建柏林噪声

> ID：10471204
> 
> 赞同：2
> 
> 时间：2012-05-06T14:15:47.933
> 
> 标签：interpolation, perlin-noise

我正试图围绕产生二维柏林噪声。我已经能够在一维中生成它，但是我不明白插值是如何在二维中工作的。这是我的八度音阶的样子：

![在此处输入图像描述](../Images/b7f3e1d486c26150b39a7cf3790cf602.png)

我知道我应该插入这些值，这将使图像更平滑，但我不明白如何做到这一点。我想使用线性插值，所以我可以在如何做的概念上获得一些帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:24:33.833

看看这篇论文：[SimplexNoise](http://webstaff.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf)

您需要添加到算法中的是渐变。

# android - 自定义标签android

> ID：10471206
> 
> 赞同：0
> 
> 时间：2012-05-06T14:15:52.927
> 
> 标签：android, background, tabs, customization

这就是我希望标签的外观：

[http://img14.imageshack.us/img14/5696/tabort.png](http://img14.imageshack.us/img14/5696/tabort.png)

这是他们使用 tabHost 的样子：

[http://img684.imageshack.us/img684/1030/tabort2.png](http://img684.imageshack.us/img684/1030/tabort2.png)

所以我想删除图像周围的边框。相反，我希望标签后面有灰色背景图像。谁能帮我解决这个问题（我是 Android 新手）？

以下是一些相关代码：

```
// Create an Intent to launch an Activity for the tab 
    intent = new Intent().setClass(this, WashActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("washer").setIndicator("",
                      res.getDrawable(R.drawable.wash_tab))
                  .setContent(intent);
    tabHost.addTab(spec); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:01:58.143

使用 setView() 而不是 setIndicator() 设置自定义视图（在您的情况下为图像视图或带有文本的图像）将为您工作。

TabHost 现在已弃用。所以最好使用兼容包的片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:28:07.910

您可以将相对布局中并排放置的按钮与自定义背景图像一起使用，而不是 TabView。

# php - 有没有办法显示半加载的html或php

> ID：10471212
> 
> 赞同：1
> 
> 时间：2012-05-06T14:17:09.960
> 
> 标签：php, html, sleep, browser-refresh

我有一个运行多个连续 php/bash 脚本的 html 页面，我想在下一个脚本开始之前使结果在页面上可见。那可能吗？

例子：

```
<html> <body>
<br>Html1<br>
<?php
echo "A";
sleep(4);
echo "B";
?>
<br>Html2<br>
<?php
echo "C";
sleep(4);
echo "D";
?>
<br>Html3<br>
</body> </html> 
```

...在一切完成之前，这里什么都没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:18:54.407

这可能是一个缓冲问题。

`flush()`在连续的 s 之间执行`echo`以刷新 PHP 的内部输出缓冲区。

请注意，尽管您的网络服务器可能会进行额外的缓冲，浏览器也可以这样做，因此并不能真正保证更改会显示在浏览器中。

如果您想测试是否涉及其他缓冲，您可以在每次输出后发布一个长 HTML 注释。

例如：

```
<?php
  echo "<!-- aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa ... aaa -->";
?> 
```

如果注释足够长，它将填满缓冲区，迫使它刷新。

**请注意，这仅用于测试，请勿在生产代码中使用。**

# c++ - 什么lib或者软件可以盲签名验证？

> ID：10471217
> 
> 赞同：4
> 
> 时间：2012-05-06T14:18:07.213
> 
> 标签：c++, cryptography, rsa, digital-signature, blind-signature

我最近听说盲签名。我看到了关于它们如何工作的维基百科文章，但不想实现它。我可以使用哪些库（最好与 linux 和 windows 兼容）来实现盲签名并验证文件是否已签名？

我尝试查看 openssl 手册页，但我认为它不支持盲签名[http://www.openssl.org/docs/apps/dgst.html](http://www.openssl.org/docs/apps/dgst.html)

我可以在 C++ 或 .NET 中实现我的应用程序，并且在生成过程和解析它们的输出时没有问题，但是 lib 比软件更受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-18T05:00:50.780

> 我可以在 C++ 或 .NET 中实现我的应用程序......什么库或软件可以盲目地签名和验证？

这是一个基于[Crypto++](https://github.com/weidai11/cryptopp)的答案。Crypto++是戴伟编写的密码方案类库。该示例取自[Raw RSA |](https://www.cryptopp.com/wiki/Raw_RSA#RSA_Blind_Signature) 维基上的[盲签名。](https://www.cryptopp.com/wiki/Raw_RSA#RSA_Blind_Signature)

Jack Lloyd 的[Botan](https://github.com/randombit/botan)是一个 C++11 加密和 TLS 库，可能具有原生盲签名支持。

Crypto++ 缺少盲签名类。[下面的方法遵循Blind Signatures](https://en.wikipedia.org/wiki/Blind_signature)中详述的基本算法。但是，它与维基百科的不同之处在于应用了`s(s'(x)) = x`交叉检查。交叉检查出现在[Chaum 的原始论文](http://www.hit.bme.hu/~buttyan/courses/BMEVIHIM219/2009/Chaum.BlindSigForPayment.1982.PDF)中，但在 wiki 文章中没有。与 Chaum 的论文和维基百科的第二个区别是，下面的代码使用`H(m)`而不是`m`. 这要归功于[1979 年的拉宾](http://publications.csail.mit.edu/lcs/pubs/pdf/MIT-LCS-TR-212.pdf)。

您可能希望根据[盲 RSA 签名中填充方案的可用性首先应用填充函数？](https://crypto.stackexchange.com/q/12707/10496)或[RSA 盲签名在实践中](https://crypto.stackexchange.com/q/5626/10496)。另请参阅[是否有 RSA 盲签名的标准填充/格式？](https://crypto.stackexchange.com/q/54085/10496)

* * *

```
#include "cryptlib.h"
#include "integer.h"
#include "nbtheory.h"
#include "osrng.h"
#include "rsa.h"
#include "sha.h"
using namespace CryptoPP;

#include <iostream>
#include <stdexcept>
using std::cout;
using std::endl;
using std::runtime_error;

int main(int argc, char* argv[])
{
    // Bob artificially small key pair
    AutoSeededRandomPool prng;
    RSA::PrivateKey privKey;

    privKey.GenerateRandomWithKeySize(prng, 64);
    RSA::PublicKey pubKey(privKey);

    // Convenience
    const Integer& n = pubKey.GetModulus();
    const Integer& e = pubKey.GetPublicExponent();
    const Integer& d = privKey.GetPrivateExponent();

    // Print params
    cout << "Pub mod: " << std::hex << pubKey.GetModulus() << endl;
    cout << "Pub exp: " << std::hex << e << endl;
    cout << "Priv mod: " << std::hex << privKey.GetModulus() << endl;
    cout << "Priv exp: " << std::hex << d << endl;

    // For sizing the hashed message buffer. This should be SHA256 size.
    const size_t SIG_SIZE = UnsignedMin(SHA256::BLOCKSIZE, n.ByteCount());

    // Scratch
    SecByteBlock buff1, buff2, buff3;

    // Alice original message to be signed by Bob
    SecByteBlock orig((const byte*)"secret", 6);
    Integer m(orig.data(), orig.size());
    cout << "Message: " << std::hex << m << endl;

    // Hash message per Rabin (1979)
    buff1.resize(SIG_SIZE);
    SHA256 hash1;
    hash1.CalculateTruncatedDigest(buff1, buff1.size(), orig, orig.size());

    // H(m) as Integer
    Integer hm(buff1.data(), buff1.size());
    cout << "H(m): " << std::hex << hm << endl;

    // Alice blinding
    Integer r;
    do {
        r.Randomize(prng, Integer::One(), n - Integer::One());
    } while (!RelativelyPrime(r, n));

    // Blinding factor
    Integer b = a_exp_b_mod_c(r, e, n);
    cout << "Random: " << std::hex << b << endl;

    // Alice blinded message
    Integer mm = a_times_b_mod_c(hm, b, n);
    cout << "Blind msg: " << std::hex << mm << endl;

    // Bob sign
    Integer ss = privKey.CalculateInverse(prng, mm);
    cout << "Blind sign: " << ss << endl;

    // Alice checks s(s'(x)) = x. This is from Chaum's paper
    Integer c = pubKey.ApplyFunction(ss);
    cout << "Check sign: " << c << endl;
    if (c != mm)
        throw runtime_error("Alice cross-check failed");

    // Alice remove blinding
    Integer s = a_times_b_mod_c(ss, r.InverseMod(n), n);
    cout << "Unblind sign: " << s << endl;

    // Eve verifies
    Integer v = pubKey.ApplyFunction(s);    
    cout << "Verify: " << std::hex << v << endl;

    // Convert to a string
    size_t req = v.MinEncodedSize();
    buff2.resize(req);
    v.Encode(&buff2[0], buff2.size());

    // Hash message per Rabin (1979)
    buff3.resize(SIG_SIZE);
    SHA256 hash2;
    hash2.CalculateTruncatedDigest(buff3, buff3.size(), orig, orig.size());

    // Constant time compare
    bool equal = buff2.size() == buff3.size() && VerifyBufsEqual(
        buff2.data(), buff3.data(), buff3.size());

    if (!equal)
        throw runtime_error("Eve verified failed");

    cout << "Verified signature" << endl;

    return 0;
} 
```

这是构建和运行程序的结果：

```
$ g++ blind.cxx ./libcryptopp.a -o blind.exe
$ ./blind.exe
Pub mod: bbf62585f8486acbh
Pub exp: 11h
Priv mod: bbf62585f8486acbh
Priv exp: 31c1280c6bb08635h
Message: 736563726574h
H(m): 2bb80d537b1da3e3h
Random: 7db0ecdb0a09fad5h
Blinded msg: a8bf62a25b7b4b53h
Blind sign: 2646ab6b9d5b48dfh
Check sign: a8bf62a25b7b4b53h
Unblind sign: 418d211b9cbb2d00h
Verify: 2bb80d537b1da3e3h
Verified signature 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-23T21:45:24.597

您不需要任何对盲签名的特殊支持。您只需要能够签署和验证消息。盲部分取决于使用非对称密码的系统。简单地以特殊格式对您收到的内容进行签名可能构成盲签名，表明数据在转到其他地方之前已通过您。[只要确保你不使用 RSA](http://en.wikipedia.org/wiki/Blind_signature#Dangers_of_blind_signing)

**编辑**

根据此答案评论中的扩展讨论，上述文字可能会产生误导，具体取决于您具体谈论的内容。如果您打算按照此答案的评论中所述完成盲签名，那么您实际上将需要特殊支持。我会说，如果你找不到经过审查和测试的东西，那将是一个很酷的练习或项目来实现你自己的并将其发布在 GitHub 等上。

# greenplum - Greenplum gpseginstall 要求“集群密码访问”

> ID：10471220
> 
> 赞同：2
> 
> 时间：2012-05-06T14:18:16.817
> 
> 标签：greenplum

我正在按照官方安装指南在我的台式计算机上安装 greenplum 数据库。当我执行

```
# gpseginstall -f hostfile_exkeys -u gpadmin -p P@$$word 
```

它要求我提供集群密码访问：

```
[root@sm403-08 greenplum-db-4.2.1.0]# gpseginstall -f hostfile_exkeys -uyang -par0306
20120506:05:59:33:012887 gpseginstall:sm403-08:root-[INFO]:-Installation Info:
link_name None
binary_path /usr/local/greenplum-db-4.2.1.0
binary_dir_location /usr/local
binary_dir_name greenplum-db-4.2.1.0
20120506:05:59:33:012887 gpseginstall:sm403-08:root-[INFO]:-check cluster password access
*** Enter password for localhost-2: 
*** Enter password for localhost-2: 
*** Enter password for localhost-2: 
*** Enter password for localhost-2: 
*** Enter password for localhost-2: 
```

这是我的 hostfile_exkeys 文件的样子：

```
localhost
localhost-1
localhost-2 
```

因为我只有一台机器。

网络上的类似帖子（[http://www.topix.com/forum/com/greenplum/TSDQHMJ6M7I9D0A44](http://www.topix.com/forum/com/greenplum/TSDQHMJ6M7I9D0A44)）说：

*“我遇到了同样的错误，我发现这是因为我将 sshd 设置为拒绝 root 登录。您必须编辑 sshd 配置并允许 root 登录才能使 gpseginstall 正常工作。希望对您有所帮助！”*

但我试图修改我的 /etc/ssh/sshd_config 文件以允许 root 登录：

```
# Authentication:

#LoginGraceTime 2m
PermitRootLogin yes
#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10 
```

并重新启动 sshd：

```
Stopping sshd:                                             [FAILED]
Starting sshd:                                             [  OK  ] 
```

但没有任何效果；gpseginstall 程序仍在询问密码。

我已经尝试了所有我能想到的密码，root、gpadmin、我自己的用户密码，但它们都不起作用。我应该怎么做才能让它发挥作用？

**更新：**似乎问题在于在单个节点上安装 Greenplum 社区版。有没有人有这方面的经验？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:52:24.530

看来我是在单个节点上安装 Greenplum 数据库，所以不必执行 gpseginstall 步骤。这用于在主控主机的所有分段上安装 Greenplum。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-03T08:40:00.720

您需要启用密码验证。

```
sudo nano /etc/ssh/sshd_config

PermitRootLogin yes
PasswordAuthentication yes 
```

然后 `service sshd restart`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-27T10:38:54.217

如果它对尝试以集群模式安装 greenplum 的人有所帮助，我会很高兴。

```
#installing greenplum cluster steps
# first add entires for all servers and interfaces in your /etc/hosts
# gpdb01- master
# gpdb02 - secondary master
# gpdb03 , gpdb04 - data nodes

#setup ssh between all machines
ssh-keygen
ssh-copy-id gpdb02
ssh-copy-id gpdb03
ssh-copy-id gpdb04

# also add entries for the interfaces
vi /etc/hosts

172.12.13.14 gpdb01
172.12.13.14 gpdb01-1
172.12.13.14 gpdb01-2

172.12.13.15 gpdb02
172.12.13.15 gpdb02-1
172.12.13.15 gpdb02-2

172.12.13.16 gpdb03
172.12.13.16 gpdb03-1
172.12.13.16 gpdb03-2

172.12.13.17 gpdb04
172.12.13.17 gpdb04-1
172.12.13.17 gpdb04-2

# enable RootLogin and PasswordAuthentication on all servers
vi /etc/ssh/sshd_config
service sshd restart

#create your hostkey file

gpdb01
gpdb01-1
gpdb01-2
gpdb02
gpdb02-1
gpdb02-2
gpdb03
gpdb03-1
gpdb03-2
gpdb04
gpdb04-1
gpdb04-2

# run the gpseg installer
gpseginstall -f hostfile_exkeys -u gpadmin -p P@$$word 
```

# c - 为什么我的整个数组都有'\0'？

> ID：10471221
> 
> 赞同：0
> 
> 时间：2012-05-06T14:18:27.313
> 
> 标签：c, arrays, pointers, data-structures, structure

这给我的程序带来了很多问题。为什么当我创建一个新的结构化指针数组时它们都等于`'\0'`？我检查了它们是否位于数组的末尾，`if(table_p -> buckets_array[i] == '\0'){ printf("ask this \n") ; }`并且对于数组的每个成员都是如此。我检查错了吗？不应该只有最后一个成员有`\0`吗？

```
typedef struct data_{
  char *key;
  void *data;
  struct data_ *next;
}data_el;

typedef struct hash_table_ {
  void **order;
  int *number_next_calls;
  int *number_buckets;
  int *buckets_size;
  int *worst;
  int *total;
  float *average;
  int (*hash_func)(char *);
  int (*comp_func)(void*, void*);
  data_el **buckets_array;
} hash_table, *Phash_table;

/*Create buckets array*/
table_p -> buckets_array = (data_el **)malloc(sizeof(data_el *)*(size+1));
table_p -> buckets_size = (int *)malloc(sizeof(int)*(size+1));

/*Setting order array*/
  table_p -> order = NULL;

/*Setting inital condictions*/
table_p -> worst = (int *)malloc(sizeof(int));
table_p -> total = (int *)malloc(sizeof(int));
table_p -> average = (float *)malloc(sizeof(float));
table_p -> number_buckets = (int *)malloc(sizeof(int));

/*This is where I have isssue*/
for(i = 0; i < size; i++){
    table_p -> buckets_array[i] = NULL;
    table_p -> buckets_array[i] -> buckets_size = 0;

    if(table_p -> buckets_array[i] == '\0'){
      printf("ask this \n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:24:29.107

在您的代码中，您有：

```
table_p -> buckets_array[i] = NULL;
table_p -> buckets_array[i] -> buckets_size = 0; 
```

这就像在说：

```
table_p -> buckets_array[i] = NULL;
NULL -> buckets_size = 0; 
```

这不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:21:56.160

```
if(table_p -> buckets_array[i] == '\0'){ 
```

我已经在您之前的（非常相似的）帖子中指出，它`table_p->buckets_array[i]`属于“指向 data_el 的指针”类型，并且 '\0' 是一个整数常量。请在发帖前阅读。

# c# - ObservableCollection 如何 .Move(int,int) 工作吗？

> ID：10471222
> 
> 赞同：28
> 
> 时间：2012-05-06T14:18:31.003
> 
> 标签：c#, .net, collections

[通过阅读MSDN 上的 ObservableCollection.Move(int oldIndex, int newIndex)](http://msdn.microsoft.com/en-us/library/ms654933.aspx)的文档，我似乎无法弄清楚这一点：

> oldIndex 类型：System.Int32 从零开始的索引，指定要移动的项目的位置。newIndex 类型：System.Int32 从零开始的索引，指定项目的新位置。

我不明白它是如何工作的。带有 的项目会发生什么`newIndex`？我的假设是每个项目的索引都会`index >= newIndex`递减。这个假设正确吗？更重要的是，这种行为是否在 MSDN 上的某处进行了解释或描述？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-06T14:33:11.710

`Move`让我以单元测试的形式解释 的行为：

```
[Test]
public void ObservableTest()
{
    var observable = new ObservableCollection<string> { "A", "B", "C", "D", "E" }; 

    observable.Move(1, 3); // oldIndex < newIndex 
    // Move "B" to "D"'s place: "C" and "D" are shifted left
    CollectionAssert.AreEqual(new[] { "A", "C", "D", "B", "E" }, observable);

    observable.Move(3, 1); // oldIndex > newIndex 
    // Move "B" to "C"'s place: "C" and "D" are shifted right
    CollectionAssert.AreEqual(new[] { "A", "B", "C", "D", "E" }, observable);

    observable.Move(1, 1); // oldIndex = newIndex
    // Move "B" to "B"'s place: "nothing" happens
    CollectionAssert.AreEqual(new[] { "A", "B", "C", "D", "E" }, observable);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T14:22:56.783

我会去简单的解释：

对象被移动到指定的位置，然后集合中的所有对象都从零开始重新索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T10:41:03.483

除了[@nemesv的出色](https://stackoverflow.com/users/872395/nemesv)[回答](https://stackoverflow.com/a/10471323/897609)之外，帮助我记住这种行为的是：`myObservableCollection.Move(oldIndex, newIndex)`

```
var movedItem = myObservableCollection[oldIndex];
myObservableCollection.RemoveAt(oldIndex);
myObservableCollection.Insert(newIndex, movedItem); 
```

# eclipse - Servlet.service() 用于 servlet [FitbitApiAuthExampleServlet] 在上下文中与路径 [/Webfit]

> ID：10471225
> 
> 赞同：1
> 
> 时间：2012-05-06T14:19:06.387
> 
> 标签：eclipse, debugging, servlets, tomcat7

我有问题。我正在 Eclipse IDE 中开发 Web 应用程序并使用 Tomcat 7。

一切工作正常，突然我的调试器不再正常工作，一切都崩溃了。我一直在寻找同样的错误，但我还没有找到解决方案。请帮我。

我收到此错误：

```
SEVERE: Servlet.service() for servlet [FitbitApiAuthExampleServlet] in context with path [/Webfit] threw exception
java.lang.NullPointerException
    at java.net.URLEncoder.encode(Unknown Source)
    at com.fitbit.api.client.http.OAuth.encode(OAuth.java:254)
    at com.fitbit.api.client.http.OAuth.encodeParameters(OAuth.java:233)
    at com.fitbit.api.client.http.OAuth.encodeParameters(OAuth.java:217)
    at com.fitbit.api.client.http.OAuth.normalizeRequestParameters(OAuth.java:196)
    at com.fitbit.api.client.http.OAuth.generateAuthorizationHeader(OAuth.java:85)
    at com.fitbit.api.client.http.OAuth.generateAuthorizationHeader(OAuth.java:129)
    at com.fitbit.api.client.http.HttpClient.setHeaders(HttpClient.java:522)
    at com.fitbit.api.client.http.HttpClient.httpRequest(HttpClient.java:422)
    at com.fitbit.api.client.http.HttpClient.get(HttpClient.java:398)
    at com.fitbit.api.client.FitbitApiClientAgent.httpGet(FitbitApiClientAgent.java:2563)
    at com.fitbit.api.client.FitbitApiClientAgent.httpGet(FitbitApiClientAgent.java:2513)
    at com.fitbit.api.client.FitbitApiClientAgent.getLoggedHeartRate(FitbitApiClientAgent.java:1779)
    at com.fitbit.web.FitbitApiAuthExampleServlet.doGet(FitbitApiAuthExampleServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

小服务程序代码：

```
package com.fitbit.web;

import com.fitbit.api.FitbitAPIException;
import com.fitbit.api.client.*;
import com.fitbit.api.client.service.FitbitAPIClientService;
import com.fitbit.api.common.model.body.Body;
import com.fitbit.api.common.model.body.BodyWithGoals;
import com.fitbit.api.common.model.bp.Bp;
import com.fitbit.api.common.model.heart.Heart;
import com.fitbit.api.common.model.user.UserInfo;
import com.fitbit.api.model.APIResourceCredentials;
import com.fitbit.api.model.FitbitUser;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.joda.time.LocalDate;

import java.io.IOException;
import java.util.Properties;

/**
 * Created by IntelliJ IDEA.
 * User: Kiryl
 * Date: 6/22/11
 * Time: 7:05 AM
 */
public class FitbitApiAuthExampleServlet extends HttpServlet {

    public static final String OAUTH_TOKEN = "oauth_token";
    public static final String OAUTH_VERIFIER = "oauth_verifier";

    private FitbitAPIEntityCache entityCache = new FitbitApiEntityCacheMapImpl();
    private FitbitApiCredentialsCache credentialsCache = new FitbitApiCredentialsCacheMapImpl();
    private FitbitApiSubscriptionStorage subscriptionStore = new FitbitApiSubscriptionStorageInMemoryImpl();

    private String apiBaseUrl;
    private String fitbitSiteBaseUrl;
    private String exampleBaseUrl;
    private String clientConsumerKey;
    private String clientSecret;

    private FitbitUser fitbitUser = new FitbitUser("-");

    private int year = 2012;
    private int month = 5;
    private int day = 5;

    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        try {
            Properties properties = new Properties();
            properties.load(getClass().getClassLoader().getResourceAsStream("config.properties"));
            apiBaseUrl = properties.getProperty("apiBaseUrl");
            fitbitSiteBaseUrl = properties.getProperty("fitbitSiteBaseUrl");
            exampleBaseUrl = properties.getProperty("exampleBaseUrl").replace("/app", "");
            clientConsumerKey = properties.getProperty("clientConsumerKey");
            clientSecret = properties.getProperty("clientSecret");
        } catch (IOException e) {
            throw new ServletException("Exception during loading properties", e);
        }

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        FitbitAPIClientService<FitbitApiClientAgent> apiClientService = new FitbitAPIClientService<FitbitApiClientAgent>(
                new FitbitApiClientAgent(apiBaseUrl, fitbitSiteBaseUrl, credentialsCache),
                clientConsumerKey,
                clientSecret,
                credentialsCache,
                entityCache,
                subscriptionStore
        );
        if (request.getParameter("completeAuthorization") != null) {
            // Get temporary token and verifier returned by Fitbit from query string
            String tempTokenReceived = request.getParameter(OAUTH_TOKEN);
            String tempTokenVerifier = request.getParameter(OAUTH_VERIFIER);

            // Fetch user credentials from cache by temporary token from query string
            APIResourceCredentials resourceCredentials = apiClientService.getResourceCredentialsByTempToken(tempTokenReceived);

            /*Handle error when there is no record of credentials in cache for the temporary token provided
            As implementation of the credentials cache in this example is not persistant,
            this error will popup if you restart application, while user's browser will be on Fitbit*/           
            if (resourceCredentials == null) {
                throw new ServletException("Unrecognized temporary token when attempting to complete authorization: " + tempTokenReceived);
            }

            // Call method of Fitbit4J to get token credentials only if necessary (they haven't been cached yet)
            if (!resourceCredentials.isAuthorized()) {                
                resourceCredentials.setTempTokenVerifier(tempTokenVerifier);    // The verifier token is required in the request to get token credentials
                try {                    
                    apiClientService.getTokenCredentials(new LocalUserDetail(resourceCredentials.getLocalUserId()));    // get token credentials for user
                } catch (FitbitAPIException e) {
                    throw new ServletException("Unable to finish authorization with Fitbit.", e);
                }
            }
            try {
                // get UserInfo             
                UserInfo userInfo = apiClientService.getClient().getUserInfo(new LocalUserDetail(resourceCredentials.getLocalUserId()));
                request.setAttribute("userInfo", userInfo);

                //get HeartRate
                Heart heartInfo = apiClientService.getClient().getLoggedHeartRate(new LocalUserDetail(resourceCredentials.getLocalUserId()), fitbitUser, new LocalDate(year,month,day));
                //HeartRate heartAverage = new HeartRate(heartInfo.getTrackerAverage());                               
                request.setAttribute("heartRate", heartInfo);

                /*double weight = apiClientService.getClient().getWeight(new LocalUserDetail(resourceCredentials.getLocalUserId()), new FitbitUser("-"), new LocalDate(2012,5,5));
                request.setAttribute("weight", weight);*/

                // get BodyInfo (weight, fat, bmi) 
                Body bodyInfo = apiClientService.getClient().getBody(new LocalUserDetail(resourceCredentials.getLocalUserId()), fitbitUser, new LocalDate(year,month,day));
                //BodyWithGoals bodyGoals = apiClientService.getClient().getBodyWithGoals(new LocalUserDetail(resourceCredentials.getLocalUserId()), new FitbitUser("-"), new LocalDate(year,month,day));
                request.setAttribute("bodyInfo", bodyInfo);

                // get BloodPressure (BP) Info
                Bp bloodPressureInfo = apiClientService.getClient().getLoggedBp(new LocalUserDetail(resourceCredentials.getLocalUserId()), fitbitUser, new LocalDate(year,month,day));                
                request.setAttribute("bloodPressureInfo", bloodPressureInfo);

                // forward result to .jsp page
                request.getRequestDispatcher("/fitbitApiAuthExample.jsp").forward(request, response);
            } catch (FitbitAPIException e) {
                throw new ServletException("Exception during getting user info", e);
            }
        } else {
            try {
                response.sendRedirect(apiClientService.getResourceOwnerAuthorizationURL(new LocalUserDetail("-"), exampleBaseUrl + "/fitbitApiAuthExample?completeAuthorization="));
            } catch (FitbitAPIException e) {
                throw new ServletException("Exception during performing authorization", e);
            }
        }
    }
} 
```

# sqlite - 在 Win 7 上安装 SQLite ADO.NET 时出错

> ID：10471228
> 
> 赞同：6
> 
> 时间：2012-05-06T14:19:16.543
> 
> 标签：sqlite, windows-7, ado.net

当我尝试在两台不同的 Win 7 笔记本电脑上安装 ADO.NET 版本的 SQLite 时出现以下错误：

```
Installer.exe: #32 @ 2012.05.06T13:58:34.8921292: Configuration.Process: No actual changes will be made to this system because "what-if" mode is enabled.
Installer.exe: #33 @ 2012.05.06T13:58:34.8951293: TraceOps.ShowMessage: Cannot continue, the "confirm" option is not enabled. 
```

我以管理员身份运行 Installer.exe。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T10:44:50.410

好吧，我遇到了完全相同的问题，

但问题是 b/c Installer.exe 需要一个名为“-confirm”的命令行参数

他们这样做是为了使 exe 在双击时无法安装。

所以请尝试从命令行执行以下命令

```
Installer -confirm true 
```

来源：[http ://system.data.sqlite.org/index.html/ci/793e9b039d165c768114c4c646c9ee1b2e44e03d](http://system.data.sqlite.org/index.html/ci/793e9b039d165c768114c4c646c9ee1b2e44e03d)

# powershell - PowerShell：将命令行工具的输出重定向到主机

> ID：10471229
> 
> 赞同：1
> 
> 时间：2012-05-06T14:19:37.057
> 
> 标签：powershell

我正在尝试调用命令行 .exe 工具（`x264`以转换一些视频）并在 PowerShell 主机中打印其输出。

有很多参数需要传递给`x264`. 到目前为止，我无法使用`Invoke-Item`cmdlet 运行它，所以我尝试了

```
[diagnostics.process]::start($com, $args).WaitForExit() 
```

这工作正常，但它会打开旧`cmd`窗口以显示输出。只是出于好奇，我想知道如何在主机中显示输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:54:18.087

我可能完全关闭，没有 PowerShell 大师，但你不能只运行以下命令吗？

```
$args = @("list", "of", "args", "here")
& x264.exe $args 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:06:20.553

当 cmd 窗口打开时，它是否显示输出？如果是这样，也许这会有所帮助。

```
Start-Process c:\x264.exe -ArgumentList $args -Wait -NoNewWindow 
```

# php - php正则表达式更改路径

> ID：10471230
> 
> 赞同：-1
> 
> 时间：2012-05-06T14:20:02.487
> 
> 标签：php, regex

我是 PHP 和正则表达式的新手，因此需要帮助使用它来检查一些图像路径。

我的 CMS 生成这样的图像路径：

```
<img src="http://localhost/test/images/normal/ima1.jpg" width="100" height="100" alt="ima1"> 
```

我正在使用 PHP，我有一个变量`$size`，我希望如果`$size = 'small'`路径应该是

```
<img src="http://localhost/test/images/small/ima1.jpg" width="100" height="100" alt="ima1"> 
```

如果如果`$size = 'medium'`那么路径应该是

```
<img src="http://localhost/test/images/medium/ima1.jpg" width="100" height="100" alt="ima1"> 
```

这些链接是由我的 CMS 动态生成的，因此我正在寻找 PHP 代码，它将在页面呈现后替换这些链接中的 flder 名称。

我要替换的只是替换词之间`images/`和`/`之后的词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:26:57.513

尝试`$blabla = preg_replace( "/images\/[a-zA-Z]\//" , "images\/" . $size . "\/" , $sourceCode );`

现在，`$blabla`是一个随机的名字。你可以把它改成你想要的任何东西。 `$sourceCode`也是一个名字。您需要将其替换为要替换的字符串。例如`$sourceCode = "<img src=\"http://localhost/test/images/small/ima1.jpg\" width=\"100\" height=\"100\" alt=\"ima1\">"`。

函数 preg_replace 的语法如下：[preg_replace (mixed $pattern , mixed $replacement , mixed $subject )](http://php.net/manual/ru/function.preg-replace.php)。

这意味着： $pattern - 你想在你的字符串中替换的模式（我们的例子 $sourceCode），比如`"/images\/[a-zA-Z]\//"`. [您可以在此处](http://webcheatsheet.com/php/regular_expressions.php)阅读有关 regexp 语法的信息。

$replacement - 你想要放置的文本而不是模式。由于我们正在寻找看起来像“images/SOME_TEXT/”的所有内容 - 我们正在替换整个模式。为了正确填充`src`属性，我们将替换为`"image/" . $size . "/"`。如果我们写一个 $size 作为替换，我们会得到我们的 $blalba as `"<img src=\"http://localhost/test/smallima1.jpg\" width=\"100\" height=\"100\" alt=\"ima1\">"`。注意`smallima1.jpg`（以防万一`$size = "small"`）。

PS 注意每个`"`. 他们阻止 php 解析器认为这是字符串输入的结尾。例如`$name = "The "Batman"";`将返回错误，同时`$name = "The \"Batman\"";`将分配`The "Batman"`给变量`$name`。如果您将包含引号的字符串分配给变量，则它们是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:40:02.920

我的问题是你为什么要`replace`？？？如果您的网站结构正确，则不需要替换

我期待这样的事情

```
$sizes = array("normal"=>array(500,500),
        "small"=>array(100,100),
        "medium"=>array(300,200));

$selected = "small"  ;
$imageHost= "http://localhost/test/images" ;
$imagePath = "/public_html/test/images" ;
$imageName = "ima1.jpg" ;
$tag = "<img src=\"{$imageHost}/%s/$imageName\" width=\"%d\" height=\"%s\" alt=\"ima1\">"; 
```

输出所有尺寸的简单演示

```
echo "<pre>" ;
foreach($sizes as $size => $dim){

    if(!file_exists($imagePath . DIRECTORY_SEPARATOR . $selected . DIRECTORY_SEPARATOR .  $imageName))
    {
        // Am sure you want to either create the image or copu the thumn here 
    }
    echo printf($tag,$size,$dim[0],$dim[1]) . PHP_EOL;
} 
```

输出

```
<img src="http://localhost/test/images/normal/ima1.jpg" width="500" height="500" alt="ima1">
<img src="http://localhost/test/images/small/ima1.jpg" width="100" height="100" alt="ima1">
<img src="http://localhost/test/images/medium/ima1.jpg" width="300" height="200" alt="ima1"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T14:24:26.617

Providing that all your images are under the same path, I recommend you leave regular expressions alone (this time), and opt for a much easier `explode()` method.

Using the PHP `explode()` function you can split a string into an array using a delimiter.

```
$str = 'http://localhost/test/images/small/ima1.jpg'; 
$arr = explode('/',$str); 
```

This should give you something like this -

```
Array 
(
    [0] => http:
    [1] =>
    [2] => localhost
    [3] => test
    [4] => images
    [5] => small
    [6] => ima1.jpg
) 

// remove the protocol specification and the empty element.
// You'll see that the `explode()` function actually removes the slashes 
// (including the two at the beginning of the URL in the protocol specification),
// you'll have to return them once you have finished.
array_shift($arr);
array_shift($arr); 
```

Now you are left with -

```
Array 
(
    [0] => localhost
    [1] => test
    [2] => images
    [3] => small
    [4] => ima1.jpg
) 
```

Providing the URL's are the same for all images, you can simply replace the fourth element (`$arr[3]`) with the relevant size and then reassemble your URL using the `implode()` function.

```
array_unshift($arr,'/'); // adds an element to the beginning of an array
array_unshift($arr,'http:');
$finalURL = implode('/',$arr); 
```

* * *

Relevant documentation -

*   `explode()` - [http://www.php.net/manual/en/function.explode.php](http://www.php.net/manual/en/function.explode.php)
*   `implode()` - [http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)
*   `array_shift()` - [http://php.net/manual/en/function.array-shift.php](http://php.net/manual/en/function.array-shift.php)
*   `array_unshift()` - [http://www.php.net/manual/en/function.array-unshift.php](http://www.php.net/manual/en/function.array-unshift.php)

# doctrine-orm - 使用 Doctrine 2 自动引用保留字

> ID：10471234
> 
> 赞同：57
> 
> 时间：2012-05-06T14:21:01.977
> 
> 标签：doctrine-orm

有没有办法在使用 Doctrine 2 时自动引用保留字`$entityManager->find('entity', id)`？

使用查询生成器时可以这样做，但应该有一个全局配置设置来做到这一点？我不想在保留字的注释中指定它。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-07T14:14:10.293

这是我不久前在 Doctrine 团队中提出的一个问题。

[https://github.com/doctrine/doctrine2/issues/2409](https://github.com/doctrine/doctrine2/issues/2409)

票已关闭，评论如下：

> 您必须使用 @Column(name="`integer`") 手动转义字符

所以我想你需要处理注释中的任何保留关键字

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-04-23T10:53:28.883

4.6\. 引用保留字

由于保留字冲突，有时需要引用列名或表名。**Doctrine 不会自动引用标识符，因为它导致的问题多于解决的问题。**引用表和列名需要使用定义中的刻度显式完成。

```
<?php
/** @Column(name="`number`", type="integer") */
private $number; 
```

然后，Doctrine 将根据使用的数据库平台在所有 SQL 语句中引用该列名。

除非您使用自定义 QuoteStrategy，否则标识符引用不适用于连接列名称或鉴别器列名称。

为了更好地控制列引用`Doctrine\ORM\Mapping\QuoteStrategy`，2.3 中引入了接口。它为每个列、表、别名和其他 SQL 名称调用。您可以实现 QuoteStrategy 并通过调用来设置它`Doctrine\ORM\Configuration#setQuoteStrategy()`。

添加了 ANSI 引用策略，它假定任何 SQL 名称都不需要引用。您可以将其与以下代码一起使用：

```
<?php
use Doctrine\ORM\Mapping\AnsiQuoteStrategy;

$configuration->setQuoteStrategy(new AnsiQuoteStrategy()); 
```

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#quoting-reserved-words](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#quoting-reserved-words)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-31T13:05:51.853

Doctrine 没有实现它只是因为它过于依赖平台。

您所需要的只是实现自己的 QuoteStrategy。

例如，对于 symfony 项目：

* * *

复制粘贴供应商`AnsiQuoteStrategy`类，重命名并引用：

**AppBundle/ORM/QuoteStrategy.php**

```
namespace AppBundle\ORM;

use Doctrine\DBAL\Platforms\AbstractPlatform;
use Doctrine\ORM\Mapping as M;

class QuoteStrategy implements M\QuoteStrategy
{
  private function quote($token, AbstractPlatform $platform)
  {
    // implement your quote strategy
    switch ($platform->getName()) {
      case 'mysql':
      default:
        return '`' . $token . '`';
    }
  }

  // add quoting to appropriate methods
  public function getColumnName($fieldName, M\ClassMetadata $class, AbstractPlatform $platform)
  {
    return $this->quote($class->fieldMappings[$fieldName]['columnName'], $platform);
  }
  // ... Rest methods
} 
```

然后，将您的报价策略注册为服务：

**src/AppBundle/Resources/config/services.yml**

```
 app.orm.quote_strategy:
    class: AppBundle\ORM\QuoteStrategy
    public: false 
```

然后，将其用于您的 entitymanager 配置：
**app/config/config.yml**

```
orm:
  entity_managers:
    default:
      quote_strategy: app.orm.quote_strategy 
```

就这些 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-14T23:07:58.963

根据@tim-lytle 的声明，我重新提出了这个问题。这确实应该包含在 Doctrine ORM 的安全范围中。

[https://github.com/doctrine/doctrine2/issues/5874](https://github.com/doctrine/doctrine2/issues/5874)

# php - Symfony 1.4 会话随机丢失

> ID：10471236
> 
> 赞同：12
> 
> 时间：2012-05-06T14:21:11.860
> 
> 标签：php, session, symfony1

这是我几个月前开始尝试的一个问题，从那以后我一直在尝试解决，但没有成功。

**症状**：symfony 在随机的时间间隔丢失会话信息并注销用户。它似乎以某种方式与网站的负载有关。当负载较高时，用户退出的频率似乎更高，甚至可能发生在 30 秒之内。

**环境**：从这开始我改变了很多设置，包括 php 版本、Web 服务器、会话存储、symfony 版本。这是当前设置：Ubuntu 10.04、php 5.4.0、symfony 1.4.17、带有 FPM 的 nginx 1.0.15。以下是在 factory.yml 中配置会话存储的方式：

```
 user:
    class: myUser
    param:
      timeout:         86400
      use_flash:       true
  storage:
    class: sfCacheSessionStorage
    param:
      cache:
        class: sfMemcacheCache
        param:
          lifetime:  86400
          host:      192.168.1.3
          serializer:  IGBINARY
          mode:        compiled
          port:        11211 
```

我不得不提一下，我也使用 redis 进行会话存储，但仍然存在问题。我真的不知道下一步该尝试什么。还有其他人经历过类似的事情吗？在这个阶段，任何提示将不胜感激。

**更新：** 经过数月的搜索和无数次试验和错误，我认为这可能是一个并发问题。我们的站点在 AJAX 请求上非常繁重，我了解到它可能会导致会话出现问题，除非在会话处理程序中实现了适当的锁定机制。首先，我从等式中消除了 symfony，我将其设置为使用 php 会话。使用默认文件会话存储，我永远不会丢失任何会话。然后我将 php 配置为使用 memcache 会话存储。毫无疑问，我们已经开始看到丢失的会话。我 100% 肯定 memcached 没有内存不足，我已经安装了一个管理工具，而 memcached 服务器几乎没有使用分配给它的 8GB 的​​ 2%（没有浪费，内存是根据需要分配的）。然后我添加了第二个 memcached 服务器并将会话处理程序配置为使用冗余。这很有帮助，我很少丢失任何会话。目前，这是一个可以接受的折衷方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:46:02.537

出于某种原因，memcache 似乎时不时地错过并创建一个导致用户注销的新会话。

正如 Jestep 所建议的，您应该通过将 memcache 排除在等式之外来证明这一点，以查看问题是否消失。

如果是这样，那么问题要么是您与 memcache 交谈的方式，要么是 memcache 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T00:30:59.990

实际上，我们过去几个月一直在使用的设置是 symfony 配置为使用普通的 php 会话（不是任何缓存类），然后 php 被设置为使用 memcache 扩展（还有一个叫做 memcached）来存储2 个冗余内存缓存服务器上的会话。如果我取出其中一台 memcache 服务器，我们会立即开始看到丢失的会话。

这是唯一真正完成这项工作的设置。

# android - 安卓任务杀手

> ID：10471239
> 
> 赞同：4
> 
> 时间：2012-05-06T14:21:28.287
> 
> 标签：android, task

我正在尝试编写一个简单的任务杀手。我知道我不应该杀死 Android 中的任务，但我渴望尝试这样的事情。我有以下代码：

```
List<RunningAppProcessInfo> procInfo = activityManager.getRunningAppProcesses();
for (int i = 0; i < procInfo.size(); i++) {
    Log.v("proces " + i,procInfo.get(i).processName + " pid:" + procInfo.get(i).pid + " importance: " + procInfo.get(i).importance + " reason: " + procInfo.get(i).importanceReasonCode);
    //First I display all processes into the log
}
for (int i = 0; i < procInfo.size(); i++) {
    RunningAppProcessInfo process = procInfo.get(i);
    int importance = process.importance;
    int pid = process.pid;
    String name = process.processName;
    if (name.equals("manager.main")) {
        //I dont want to kill this application
        continue;
    }
    if (importance == RunningAppProcessInfo.IMPORTANCE_SERVICE) {
        //From what I have read about importances at android developers, I asume that I can safely kill everithing except for services, am I right?
        Log.v("manager","task " + name + " pid: " + pid + " has importance: " + importance + " WILL NOT KILL");
        continue;                       
    }
    Log.v("manager","task " + name + " pid: " + pid + " has importance: " + importance + " WILL KILL");
    android.os.Process.killProcess(procInfo.get(i).pid);
}   
procInfo = activityManager.getRunningAppProcesses();
//I get a new list with running tasks
for (int i = 0; i < procInfo.size(); i++) {
    Log.v("proces after killings" + i,procInfo.get(i).processName + " pid:" + procInfo.get(i).pid + " importance: " + procInfo.get(i).importance + " reason: " + procInfo.get(i).importanceReasonCode);
} 
```

我的问题是，当我执行这段代码时，我首先得到所有任务的列表，没关系。比我在日志中看到的几行：

```
Sending signal. pid: (processId) SIG: 9 
```

我认为那是死亡的信号。但是在我的代码末尾，当我显示所有正在运行的进程时，列表和以前一样，没有任务被杀死。知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:36:49.543

您不能以这种方式杀死其他任务，因为内核将强制执行权限。试试这个：

```
ActivityManager activityManager = (ActivityManager) context.getSystemService("activity");
activityManager.restartPackage(packageName); 
```

您将需要清单中的以下权限：

```
<uses-permission android:name="android.permission.RESTART_PACKAGES" />
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" /> 
```

编辑：

实际上 restartPackage 已被弃用。改用 killBackgroundProcesses() ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T14:40:04.277

要获得最佳结果形式`killProcess`，请尝试`killProcess`多次调用。as

```
for (int i = 0; i < 10; i++)
{
 android.os.Process.killProcess(procInfo.get(i).pid);
} 
```

笔记：

版本２.２ - killBackgroundProcesses ：“这与内核杀死这些进程以回收内存相同；系统将在将来根据需要重新启动这些进程。”

```
ActivityManager am = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
am.killBackgroundProcesses("com.est.testetst"); 
```

*所需权限：*

```
android.Manifest.permission.KILL_BACKGROUND_PROCESSES 
```

版本 ２.１ - restartPackage -" 该方法已被弃用。（适用于低于 2.2 的版本。这现在只是 killBackgroundProcesses(String) 的包装器；这里以前的行为不再适用于应用程序，因为它允许它们破坏其他通过删除他们的警报，停止他们的服务等应用程序。”

```
 ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    am.restartPackage(getPackageName()); 
```

*所需权限：*

```
<uses-permission android:name="android.permission.RESTART_PACKAGES" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T14:36:15.067

幸运的是，`killProcess()`只会对您杀死自己的进程起作用。您可以通过[阅读文档](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)来了解这一点。

# c++ - 在 C++ 中从 CSV 文件（或其他格式）分配变量

> ID：10471253
> 
> 赞同：0
> 
> 时间：2012-05-06T14:23:41.983
> 
> 标签：c++, sql, arrays, visual-studio, computer-science

你好 Stack Overflow 世界：3 我的名字是 Chris，我有一个小问题。所以我将以这种格式提出问题。 **第 1 部分** 我将介绍我目前正在使用的材料和代码片段。 . **第 2 部分** 我将尽我所能解释我想要实现目标的新方法。 **第 3 部分** 所以你们认为我没有让你们做所有的工作，我将继续介绍我在上述目标上的尝试，以及研究发现的我不完全理解的可能方式。

*第1部分*

mobDB.csv 示例：

```
ID      Sprite    kName     iName     LV  HP    SP  EXP JEXP Range1 ATK1 ATK2   DEF MDEF  STR   AGI VIT INT DEX LUK Range2  Range3  Scale   Race    Element Mode    Speed   aDelay  aMotion dMotion MEXP    ExpPer  MVP1id  MVP1per MVP2id  MVP2per MVP3id  MVP3per Drop1id Drop1per    Drop2id Drop2per    Drop3id Drop3per    Drop4id Drop4per    Drop5id Drop5per    Drop6id Drop6per    Drop7id Drop7per    Drop8id Drop8per    Drop9id Drop9per    DropCardid  DropCardper
1001    SCORPION  Scorpion  Scorpion  24  1109  0   287 176  1      80   135    30  0     1     24  24  5   52  5   10      12      0       4       23      12693   200     1564    864     576     0       0       0       0       0       0       0       0       990     70          904     5500        757     57          943     210         7041    100         508     200         625     20          0       0           0       0           4068        1
1002    PORING    Poring    Poring    1   50    0   2   1    1      7    10     0   5     1     1   1   0   6   30  10      12      1       3       21      131     400     1872    672     480     0       0       0       0       0       0       0       0       909     7000        1202    100         938     400         512     1000        713     1500        512     150         619     20          0       0           0       0           4001        1
1004    HORNET    Hornet    Hornet    8   169   0   19  15   1      22   27     5   5     6     20  8   10  17  5   10      12      0       4       24      4489    150     1292    792     216     0       0       0       0       0       0       0       0       992     80          939     9000        909     3500        1208    15          511     350         518     150         0       0           0       0           0       0           4019        1
1005    FARMILIAR Familiar  Familiar  8   155   0   28  15   1      20   28     0   0     1     12  8   5   28  0   10      12      0       2       27      14469   150     1276    576     384     0       0       0       0       0       0       0       0       913     5500        1105    20          2209    15          601     50          514     100         507     700         645     50          0       0           0       0           4020        1
1007    FABRE     Fabre     Fabre     2   63    0   3   2    1      8    11     0   0     1     2   4   0   7   5   10      12      0       4       22      385     400     1672    672     480     0       0       0       0       0       0       0       0       914     6500        949     500         1502    80          721     5           511     700         705     1000        1501    200         0       0           0       0           4002        1
1008    PUPA      Pupa      Pupa      2   427   0   2   4    0      1    2      0   20    1     1   1   0   1   20  10      12      0       4       22      256     1000    1001    1       1       0       0       0       0       0       0       0       0       1010    80          915     5500        938     600         2102    2           935     1000        938     600         1002    200         0       0           0       0           4003        1
1009    CONDOR    Condor    Condor    5   92    0   6   5    1      11   14     0   0     1     13  5   0   13  10  10      12      1       2       24      4233    150     1148    648     480     0       0       0       0       0       0       0       0       917     9000        1702    150         715     80          1750    5500        517     400         916     2000        582     600         0       0           0       0           4015        1
1010    WILOW     Willow    Willow    4   95    0   5   4    1      9    12     5   15    1     4   8   30  9   10  10      12      1       3       22      129     200     1672    672     432     0       0       0       0       0       0       0       0       902     9000        1019    100         907     1500        516     700         1068    3500        1067    2000        1066    1000        0       0           0       0           4010        1
1011    CHONCHON  Chonchon  Chonchon  4   67    0   5   4    1      10   13     10  0     1     10  4   5   12  2   10      12      0       4       24      385     200     1076    576     480     0       0       0       0       0       0       0       0       998     50          935     6500        909     1500        1205    55          601     100         742     5           1002    150         0       0           0       0           4009        1 
```

所以这是我拥有的电子表格的一个例子。这就是我希望在我的理想目标中使用的。不是我现在使用的。它是在 MS Excel 2010 中完成的，使用 A-BF 列和 1-993 行

*目前*我的工作代码格式，我正在使用手动实现的数组。例如，对于 iName，我有：

```
char iName[16][25] = {"Scorpion", "Poring", "Hornet", "Familiar", "null", "null", "null", "null", "null", "null", "null", "null", "null", "null", "null", "null"}; 
```

现在在头文件（bSystem.h）中定义以应用，可以说他们的健康变量？我必须在同一个 Header 中有另一个具有相应顺序的数组，如下所示：

```
int HP[16] = {1109, 50, 169, 155, 95, 95, 118, 118, 142, 142, 167, 167, 193, 193, 220, 220}; 
```

问题是，有大量数据要硬编码到我需要的各种文件中，用于怪物、物品、法术、技能等。在最初的小规模上，为了得到某些系统，它很好。我一直在头文件中使用各种 Void 在调用时将数据从文件传输到文件。但是当我处理 1,000 多个怪物并且必须使用所有这些变量时。手动将它们放入有点......荒谬？哈哈...

*第2部分*

现在我的理想系统是能够使用 .CSV 文件来加载数据。我在这个任务中遇到了相当多的各种问题。例如，将从 Names 中提取的数据转换为 Char 数组，实际上是从 CSV 文件中提取数据并将特定部分分配给某些数组......我想到的主要想法是，我似乎无法理解的是这个；

我希望能够找到一种方法来从 CSV 文件中读取这些不同的变量......所以当我调用如下变量时：

```
cout << name << "(" << health << " health) VS. " << iName[enemy] << "(" << HP[enemy] << " health)"; 
```

也就是说，`[enemy]`它将是 ID .. 敌人的遭遇在另一个标题 (lSystem.h) 中，它基本上是这样的；

```
case 0:
        enemy = 0; 
```

其中 0 将是涉及怪物的数组中的第一个数据。我讨厌它必须是特定于顺序的。我希望能够说敌人 = 1002；因此，当战斗系统启动时，它可以从 ID 为 1002 的敌人那里提取所需的变量。

我总是遇到一些不同的问题，我无法将数据从文件中提取到程序中。当我可以时，我只能让它将 int 值存储到 int 数组中，我无法让它转换字符串到 char 数组。然后我遇到的下一个问题是回忆它和实际保存的部分......这就是第 3 部分的用武之地：3

*第 3 部分*

到目前为止，我已经尝试了一些不同的事情，并研究了如何实现这一目标.. 到目前为止我遇到的是..

我可以编写一个函数来从 mobDB 中读取数据，将其记录到数组中，然后将其输出到 .dat？因此，当我需要调用变量时，我可以从 .dat 而不是可修改的 CSV 中做一些事情。就阅读和转换而言，我遇到了同样的问题。

我可以走 SQL 路线，但是我在理解如何从 SQL 中提取数据时遇到了很多问题？我家里有一个 PowerEdge 2003 服务器盒，我在上面存储数据，它确实设置了 NavicatSQL Premium，所以我想我关于 SQL 路由的主要 2 个问题是，是否可以直接连接到 SQLServer 并且当我更新时数据库，当客户端运行时，它只会从数据库中提取变量和数据？或者我会被困在编译 SQL 文件...当它是一个在线游戏时，我知道我将不得不使用一些东西从服务器传输到客户端，这就是为什么我试图在开发早期设置这个，所以我有更多建立起来，我确定我可以使用 SQL 服务器吗？如果有人对它的工作原理有很好的了解，我非常想走 SQL 路线..

我所做的尝试是使用 Boost 来解析来自 CSV 而不是标准库的数据。出现了同样的问题。我确实阅读了关于将字符串转换为字符的内容。但是一旦我拉出问题，问题就出在数据，我无法转换它？...

我也尝试过 ADO C++ 路线..死路一条..

总而言之，我在上周左右花了这个时间。我非常想设置 SQL 服务器来实际更新变量……但我愿意接受任何可以轻松编辑和实施大型的工作想法数据量..

我很感激任何和所有的帮助。如果有人试图帮助获得一个工作代码，如果给你认为应该解释的部分添加注释不是太麻烦？我不希望有人只是给我一个快速修复..我实际上想学习和了解我正在使用什么。非常感谢大家:)

-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:08:15.923

IMO，最简单的做法是首先创建一个包含怪物所有数据的结构。这是一个简化版本，因为我不想输入所有这些变量。

```
struct Mob
{
    std::string SPRITE, kName, iName;
    int ID, LV, HP, SP, EXP;
}; 
```

您的特定格式的加载代码非常简单：

```
bool ParseMob(const std::string & str, Mob & m)
{
    std::stringstream iss(str);
    Mob tmp;
    if (iss >> tmp.ID >> tmp.SPRITE >> tmp.kName >> tmp.iName
            >> tmp.LV >> tmp.HP >> tmp.SP >> tmp.EXP)
    {
        m = tmp;
        return true;
    }
   return false;
}

std::vector<Mob> LoadMobs()
{
    std::vector<Mob> mobs;
    Mob tmp;
    std::ifstream fin("mobDB.csv");
    for (std::string line; std::getline(fin, line); )
    {
        if (ParseMob(line,tmp))
            mobs.emplace_back(std::move(tmp));
    }
    return mobs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:19:38.727

让我们看看我是否正确理解了您的问题：您正在编写游戏，并且当前游戏角色的所有统计数据都是硬编码的。您已经有一个包含这些数据的 Excel 电子表格，并且您只想使用它而不是硬编码的头文件，这样您就可以调整统计数据而无需等待长时间的重新编译。您当前以列存储方式将统计信息存储在代码中，即每个属性一个数组。CSV 文件以逐行方式存储内容。到目前为止正确吗？

现在我对你的问题的理解变得有点模糊。但是让我们尝试一下。如果我理解正确，您想从代码中完全删除数组并在需要某些生物的统计数据时直接访问 CSV 文件？如果是，那么这已经是问题所在了。文件 I/O 非常慢，您需要将这些数据保存在主内存中。只需保留数组，而不是手动分配标题中的值，您有一个加载函数，可以在您启动游戏时读取 CSV 文件并将其内容加载到数组中。您可以保持其余代码不变。

例子：

```
void load (std::ifstream &csv)
{
    readFirstLineAndCheckThatItIsCorrect (csv);

    while (!csv.eof())
    {
        int id;
        std::string spriteName;

        csv >> id;
        csv >> spriteName >> kName[id] >> iName[id] >> LV[id] >> HP[id] >> SP[id] >> ...

        Sprite[id] = getSpriteForName (spriteName);
    }
} 
```

使用数据库系统完全超出了这里的范围。您需要做的就是将一些数据加载到一些数组中。如果您希望能够在不重新启动程序的情况下更改统计信息，请添加一些热键以重新加载 CSV 文件。

如果你打算写一个在线游戏，那么你还有很长的路要走。即使这样，SQL 对于在服务器和客户端之间交换数据也是一个非常糟糕的主意，因为 a) 它只是引入了太多的开销 b) 它是对作弊者和黑客的公开邀请，因为如果客户端可以直接访问您的数据库，您可以不再验证他们的输入。见[http://forums.somethingawful.com/showthread.php?noseen=0&pagenumber=258&threadid=2803713](http://forums.somethingawful.com/showthread.php?noseen=0&pagenumber=258&threadid=2803713)举一个实际的例子。如果你真的想让它成为一个网络游戏，你需要设计自己的通信协议。但也许你应该先读一些关于这方面的书，因为这确实是一个复杂的问题。例如，您需要通过在客户端猜测服务器和其他玩家接下来最有可能做什么来隐藏用户的延迟，并在错误时优雅地纠正您的猜测，所有这些都不会让玩家注意到（航位推算） .

不过，祝你的游戏好运，我希望有一天能玩。:-)

# java - 在一行中调用两个同步方法会导致死锁吗？

> ID：10471257
> 
> 赞同：8
> 
> 时间：2012-05-06T14:24:02.070
> 
> 标签：java, synchronization

如果一个类有两个同步方法：

```
public class A {
    public synchronized int do1() {...}
    public synchronized void do2(int i) {...}
} 
```

在一行中调用这两个方法会导致死锁吗？

```
A a = new A();
a.do2(a.do1()); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T14:27:12.497

请注意，在您的示例中，**这两种方法不是同时调用的**。

它们之间有明确的严格顺序——在完成`do2()`之前不能调用`do1()`！

另请注意，代码等效于

```
A a = new A();
int temp = a.do1();
a.do2(temp); 
```

# java - 连接用户出错

> ID：10471261
> 
> 赞同：2
> 
> 时间：2012-05-06T14:24:42.450
> 
> 标签：java, html, jsp, jakarta-ee

我的目标是在身份验证后恢复用户

我可以通过 jsp 页面进行检索

```
<%@ taglib uri="http://java.sun.com/portlet" prefix="portlet" %>
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme" %>
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>

<liferay-theme:defineObjects />
<portlet:defineObjects />

<liferay-ui:user-display userId="<%= user.getUserId() %>" /> 
```

但我想做同样的事情，但通过java代码

我告诉你为什么我想通过liferay认证后检索登录的用户

我的 Java EE 应用程序是使用 struts2 开发的，并且包含两个配置文件（或角色）：顾问和主管

在这个应用程序中，我不创建用于身份验证的 jsp 页面，因为我使用 liferay 身份验证（SSO 的概念）

我使用由 liferay 自动生成的用户表

因此，在我的 Java EE 应用程序中，我必须检索已连接的用户，并且我必须测试它的角色：如果它是主管，那么我只看到主管 jsp 页面，并且以同样的方式查看顾问角色

因此，我必须在 java 代码中执行此操作：用户在部署的 portlet 中没有任何操作即可登录

在我的 Java 类中声明的用户对象必须在整个页面中填充

liferay的login.jsp（这个jsp页面是用来认证的）

所以最终的测试场景：

我的数据库中有两个用户：

姓名：Franco，电子邮件：franco@test.org，登录：Franco，角色：主管姓名：adam 电子邮件：f@test.org，登录：Adamm，角色：顾问

在 Liferay 中部署我的 Java EE 应用程序之后

如果我使用 franco@test.org 进行身份验证并登录：franco

我需要在应用程序中找到只为 Director 部署的 jsp 页面

为了使这个 senarion 我在我的应用程序的 java 类中做

```
import com.liferay.portal.model.User;
public class extends testAction ActionSupport {

      private User user;
public void processAction (
ActionRequest actionRequest, ActionResponse actionResponse)
throws IOException, PortletException {
try {
     user = PortalUtil.getUser (actionRequest);

} Catch (e PortalException) {
    / / TODO Auto-generated catch block
    e.printStackTrace ();
} Catch (SystemException e) {
    / / TODO Auto-generated catch block
    e.printStackTrace ();
}
}

public String initial() throws Exception {

user = PortalUtil.getUser (actionRequest);
if (user.getRole (). equals ("director"))
return "AuthDirector";

return "AuthoConsultant";
    }

} 
```

对于文件 struts.xml

```
<? Xml version = "1.0" encoding = "UTF-8"?>
<! DOCTYPE struts PUBLIC
    "- / / Apache Software Foundation / / DTD Struts Configuration 2.0 / / EN"
    "Http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
<package name="view" extends="struts-portlet-default" namespace="/view">

<action name="initial class="com.test.action.testAction" method="">

<result name="AuthDirector"> / WEB-INF/view/HomeDirector.jsp </ result>

<result name="AuthoConsultantr"> / WEB-INF/view/HomeConsultant.jsp </ result>
</ Action>

</ Package>
</ Struts> 
```

我又做了一次没有成功的测试

```
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import com.liferay.portal.model.User;
public class extends testAction ActionSupport {

  private User user;

FacesContext fc = FacesContext.getCurrentInstance();
         ExternalContext externalContext = fc.getExternalContext();
         Long id = Long.parseLong(externalContext.getUserPrincipal().getName());

public String initial() throws Exception {

user = UserLocalServiceUtil.getUserById(id);
if (user.getRole (). equals ("director"))
return "AuthDirector";

return "AuthoConsultant";
    }

} 
```

# .htaccess - SocialEngine - 旧网站页面 .htaccess 的 301 重定向

> ID：10471263
> 
> 赞同：0
> 
> 时间：2012-05-06T14:24:58.143
> 
> 标签：.htaccess, redirect, socialengine

我安装了 SocialEngine 来替换旧的 CMS。问题是搜索引擎中存在许多旧 URL。我想将它们重定向到当前网站上的相应 URL（因为此时它们只重定向到主页）。

我的旧 CMS 的所有内容都导入了 SE，所以现在每个旧页面都有其对应的内容。例如：旧地址：/index.php?mod=news&ac=commentaires&id=367 新地址：/articles/367

我试图在我的 .htaccess 中添加类似：

```
redirectmatch 301 index.php?mod=news&ac=commentaires&id=([0-9]+) http://www.nailissima.fr/articles/$1 
```

但它不起作用。当我输入旧地址时，它仍然重定向到主页，而不是相应的文章。

你能帮我解决这个问题吗？

这是我的 .htaccess ：

```
# $Id: .htaccess 7539 2010-10-04 04:41:38Z john $

<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php
  RewriteRule (.*) index.php?rewrite=2 [L,QSA]

  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?rewrite=1 [L,QSA]

  # Try to route missing files
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} public\/ [OR]
  RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|ico|flv|htm|html|php|css|js)$
  RewriteRule . - [L]

  # If the file doesn't exist, rewrite to index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?rewrite=1 [L,QSA]

</IfModule>

# sends requests /index.php/path/to/module/ to "index.php"
# AcceptPathInfo On

# @todo This may not be effective in some cases
FileETag Size 
```

先感谢您 ！

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:06:28.217

可能您的重定向指令的顺序有问题。

首先用评论禁用所有当前的一般规则，然后单独尝试新的重定向。

如果它们有效，那么请仔细考虑应该将它们放置在哪里。

指令末尾的 [L] 使其最后，因此该指令匹配，不会进一步处理。

使用这个，先写更详细的指令，然后再写更通用的指令，否则，你可能会遇到进一步指令压倒你当前的情况！

# java - Java：记录 FutureTask 异常

> ID：10471264
> 
> 赞同：2
> 
> 时间：2012-05-06T14:25:08.637
> 
> 标签：java, exception-handling, java.util.concurrent, futuretask

我有一个应用程序，它定期提交要在专用线程中执行的任务。这些任务`FutureTask<V>`和线程只不过是一个无限循环，当它们进入队列时执行作业，如果为空则进入睡眠状态。

有时我需要等待计算的结果，所以我调用 FutureTask 的 get() 方法，如果发生不好的事情也会抛出异常。但是在某些情况下，我不在乎结果是什么，如果有的话，但是我需要知道（log、printStackTrace() 或其他什么...）在任务执行期间是否出现某种故障。

有什么方法可以实现这一点而不必等待我不需要的 get() ？

提前致谢！

**更新**：如果没有其他人等待结果，在执行任务后在运行线程上调用 get() 似乎是捕获异常的唯一方法。

另一种解决方案是扩展 FutureTask 类以提供一种方法，该方法通过 java 反射公开 sync.exception 私有字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:29:40.337

检查 Thread.UncaughtExceptionHandler

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:52:15.443

如果我正确理解您的问题，有一个简单的解决方案。修改您的专用任务运行程序线程以`Future.get()`在运行每个任务后调用，并捕获并记录`ExecutionException`（如果有）。

请注意，`get`在运行任务后调用 task-runner 线程保证不会阻塞。

（未捕获的异常处理程序无济于事，因为`run()`未来包装的`Runnable will be caught by`FutureTask.run()` 的方法抛出的任何异常和错误。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T14:57:07.710

我认为你应该使用'setException'来报告你的任务失败。它会使 get() 报告一个 ExecutionException。另请参阅：

[如何在 FutureTask 中捕获异常](https://stackoverflow.com/questions/3555302/how-to-catch-exceptions-in-futuretask)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:13:02.670

[CompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CompletionService.html)在这里可能是一种可能性。使用其中之一将允许您`get()`在`Future`确定完成后调用 s。或者，[Guava](http://code.google.com/p/guava-libraries/)库有一些方法可以将监听器添加到 a`Future`或`FutureTask`在任务完成时执行（the`ListenableFuture`及其相关对象）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T17:14:26.693

您还可以查看我为[Futuretask编写的示例](http://programmingexamples.wikidot.com/futuretask)

# r - 混合 X 和 Y 坐标系

> ID：10471277
> 
> 赞同：4
> 
> 时间：2012-05-06T14:26:16.163
> 
> 标签：r, plot

我试图弄清楚如何在`text()`or`grid.text()`函数（或 R 中的任何其他类似函数）中为 x 和 y 坐标使用不同的坐标系。

在下面的示例中，我想将`text()`函数的 Y 坐标设置为距屏幕底部 10%，而不是使用 Y 刻度的刻度。我可以`grid.text()`用 y = 0.1 来做到这一点，但我不知道如何将 X 位置设置`grid.text()`为绘图的 X 比例。基本上，我想混合功能`text()`和`grid.text()`功能。

我知道可以`grid.text`选择传递单位，但我不知道如何使用图中的单位。

```
library(grid)

test= data.frame(
  x = c(1,2,3),
  y = c(12,10,3),
  n = c(75,76,73)
  )

par(mar = c(13,5,2,3))
plot(test$y ~ test$x,type="b")

text(x=test$x, y=-2, label=test$n, xpd=T) 
```

![在此处输入图像描述](../Images/62d618b5f6a9c076f4c1adf172f3eac7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:10:34.290

重写：

使用 grconvertY() 从默认的 7 英寸显示尺寸转换为用户坐标：

```
opar <- par(mar = c(13,5,2,3))
plot(test$y ~ test$x,type="b")
text(x=test$x, y=grconvertY(0.1*7 , "in", "user") , label=test$n, xpd=T)
par(opar) 
```

默认显示为 7 平方英寸（至少在我的机器上），但您需要为`text`函数提供用户坐标。 `grconvertY`并且`grconvertX`能够执行该转换，尽管您对 X 维度的用户坐标感到满意，因此您不应该使用`grconvertX`.

![在此处输入图像描述](../Images/157ad2ee34ebf9712ea7815333921173.png)

# assembly - 如何在 Tasm 中将字符串转换为数字？

> ID：10471281
> 
> 赞同：1
> 
> 时间：2012-05-06T14:27:00.097
> 
> 标签：assembly, x86, tasm

我制作了一个读取字符串并将其转换为数字的程序。以十进制系统输入的数字的字符串表示形式。转换的结果在寄存器 ax 中。我用的是tasm16。

我该怎么做才能将字符串转换得更大（超过 65535）？

```
model small
stack 100h
printstring macro msg
    mov ah,09h
    mov dx,offset msg
    int 21h
endm
data segment
    cr equ 0dh
    lf equ 0ah
    errorInput db 'Wrong input',cr,lf,'$'
    inputAmsg db 'Please input A',cr,lf,'$'
    outstring db 'Output:',cr,lf,'$'
    maxAbuf db 10
        db ?
        db 10 dup(0)
        db '$'
    result dw 0

data ends
code segment
    assume cs:code, ds:data
start:
    mov ax,data
    mov ds,ax
;input A
    printstring inputAmsg
    mov ah,0ah
    lea dx,maxAbuf
    int 21h
    printstring outstring

    mov ah,09h
    lea dx,maxAbuf+2
    int 21h
;in:
;dx:address of string
;out
;dx:ax - result ;work only ax
;
    call Convert
    jmp exit
;in:
;dx:address of string
;out
;dx:ax - result
;9999989d = 989675h
Convert proc
        xor ax,ax
        xor cx,cx
        mov bx,10 ;base
        mov si, offset dx
        xor dx,dx
getnewchar: mov cl,[si]
        cmp cl,0dh ;if `$` exit
        jz endproc
        sub cl,'0' ;or 30h
        mul bx
        add ax,cx
;I do not know what to write here, if there is an exit for the bit grid.
        adc dx,0
        inc si
        jmp getnewchar
endproc:
    ret
    endp

exit:   mov ax,4c00h
    int 21h
code ends
end start 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:59:40.323

例如，您可以将乘法从 16 位扩展到 32 位，如下所示：

```
; file: mul32ten.asm
; compile: nasm.exe mul32ten.asm -f bin -o mul32ten.com

bits 16
org 0x100

    xor     dx, dx
    xor     ax, ax

    mov     si, MyStr

NextDigit:
    mov     bl, [si]
    or      bl, bl
    je      Done
    call    MulDxAxBy10
    sub     bl, '0'
    add     al, bl
    adc     ah, 0
    adc     dx, 0
    inc     si
    jmp     NextDigit

Done:
    ; dx:ax should be equal to 7FFFFFFF now
    ret

MulDxAxBy10:
    push    si
    push    di
    shld    dx, ax, 1
    shl     ax, 1       ; dx:ax = n * 2
    mov     si, ax
    mov     di, dx      ; di:si = n * 2
    shld    dx, ax, 2
    shl     ax, 2       ; dx:ax = n * 8
    add     ax, si
    adc     dx, di      ; dx:ax = n * 8 + n * 2 = n * (8 + 2) = n * 10
    pop     di
    pop     si
    ret

MyStr db "2147483647", 0 
```

# c++ - 在 C++ 中逐字解析一行用户输入

> ID：10471287
> 
> 赞同：0
> 
> 时间：2012-05-06T14:27:56.997
> 
> 标签：c++, stl

所以我试图从 C++ 中的用户输入中解析未知数量的字符串，并希望将它们存储在一个向量中。

我不知道该怎么做。

所以说用户输入：Money Linux fire Computers

我希望能够获取每个单词并将其存储到向量中。我最初有一些看起来像这样的东西，但它失败了：

```
while(in!="")
{
    cin>>in;
    input.push_back(in);
} 
```

任何指向我应该从哪里开始的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:43:59.650

切勿在条件检查之外使用输入操作。编写代码的规范方法是：

```
std::vector<std::string> result;
for (std::string word; std::cin >> word; ) { result.push_back(word); } 
```

（在 C++11 中，您可以`result.emplace_back(std::move(word));`改为这样说。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:42:30.980

```
string in;
while (cin >> in) {
    input.push_back(in);
} 
```

流上的`>>`运算符返回流。通过检查 std::istream 是否处于良好状态，将其转换为布尔值。如果它到达输入的末尾，则表达式将`false`在下一次读取时。

当提取失败时，不会将空白字符串写入`in`参数，这就是您的循环不起作用的原因。

# performance - 如何构建更快的队列实现？

> ID：10471290
> 
> 赞同：2
> 
> 时间：2012-05-06T14:28:10.367
> 
> 标签：performance, functional-programming, queue, ocaml

我注意到 queue.ml 往往相当慢，因为它的实现基于链表（带有可变字段）

是否可以构建具有更快结构的队列，例如数组？

或者有没有办法实现更好的性能但仍然以功能的方式？

**编辑：**我想在不到一毫秒的时间内实现具有数万个排队和交付操作的发布-订阅解决方案（对于图形交互式应用程序），所以我需要一些非常快速的东西，而 ocaml 队列实现并没有满足我的性能需求

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T14:55:44.700

知道为什么您认为基于链表的实现很慢会很有趣。这是队列的经典实现。插入和删除的速度与我想象的一样快（更新一两个参考字段）。请注意，我没有查看您正在谈论的代码。

您可以使用数组实现环形缓冲区。对于某些事情（例如遍历所有元素），它可能会更快，但会具有最大大小（对于最直接的实现）。初始化数组也很复杂。

一般来说，数据结构的函数式（不可变）实现比相应的命令式（可变）版本要慢一些。有一个非常好的功能队列实现，它具有出色的性能。基本技巧是将队列的一半保持在前向顺序（用于快速删除），另一半保持在反向顺序（用于快速插入）。反转的额外传球引入了一个小惩罚，就像我说的那样。

如果您正在查看内存（分配和 GC），不可变方法将分配最多，经典方法将分配中等数量，而环形缓冲区将分配很少。但是一个好的 FP 实现（如 OCaml）使得分配内存的速度非常快，而且如果对象是短暂的，回收它也不会太慢。

**编辑：**对于它的价值，我刚刚在我的笔记本电脑（3.06 GHz Intel Core 2 Duo）上运行了一个异常粗略的时序测试，我可以使用标准 OCaml Queue 模块在 70 毫秒内将一百万个值入队和出队。因此，完成 10,000 次大约需要 0.7 毫秒（如果我做对了）。如果您的 CPU 不比我的快，它似乎还不够快，无法满足您的要求。

**编辑 2：**我刚刚手写了一些代码，假设您的值中有一个预先存在的参考字段，可用于将它们排队。这避免了在排队代码中进行任何分配，但在其他方面类似于标准 Queue 模块（尽管远没有那么优雅）。在与上述相同的笔记本电脑上，一百万个队列和出队大约需要 48 毫秒。所以速度有点快。

**编辑 3：**很可能你现在已经得到了答案，但我只是使用上面概述的纯队列实现进行了粗略的计时测试，我看到大约 18 毫秒来完成一百万个队列和出队。所以它的速度要快一些。这是合理的，因为 OCaml 已针对纯计算进行了调整。这是我的代码；您可以检查任何错误。

```
type q = {
    head: int list;
    tail: int list;
}

let q_add q i =
    { q with tail = i :: q.tail }

let q_take q =
    match q.head with
    | [] ->
        begin
        match List.rev q.tail with
        | [] -> raise Not_found
        | h :: t -> (h, { head = t; tail = [] })
        end
    | h :: t -> (h, { head = t; tail = q.tail })

let main () =
    let q = q_add { head = []; tail = [] } 0
    in let now = Unix.gettimeofday ()
    in let rec go q i =
        if i > 1_000_000 then
            q
        else
            let (_, q') = q_take (q_add q i)
            in
                go q' (i + 1)
    in let _ = go q 1
    in let duration = Unix.gettimeofday () -. now
    in
        Printf.printf "%f\n" duration

let () = main () 
```

就像我说的，这是一个粗略的测试。队列的长度只是在 1 到 2 个元素之间交替。我不确定结果是否会在您的环境中成立。但这很有趣。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T17:37:07.803

您需要测量操作以真正量化队列操作的任何给定实现的低效程度。

也就是说，对于不同的队列场景，有替代的数据结构。特别是如果您对持久队列或纯队列或并发队列感兴趣，那么您有几个选择。

*纯数据结构*

*   基于手指树的队列：[http ://hackage.haskell.org/package/fingertree-psqueue](http://hackage.haskell.org/package/fingertree-psqueue)
*   纯优先级队列：[http ://hackage.haskell.org/package/pure-priority-queue](http://hackage.haskell.org/package/pure-priority-queue)
*   渐近最优，可证明正确的队列，[http://hackage.haskell.org/package/meldable-heap](http://hackage.haskell.org/package/meldable-heap)
*   基于二项式堆的队列，[http://hackage.haskell.org/package/pqueue](http://hackage.haskell.org/package/pqueue)

*并发队列*

*   基于 STM 的队列，[http://hackage.haskell.org/package/bounded-tchan](http://hackage.haskell.org/package/bounded-tchan)
*   基于 STM 的有界队列，[http://hackage.haskell.org/package/rolling-queue](http://hackage.haskell.org/package/rolling-queue)

*发布订阅*

如果您正在查看发布/订阅机制，或许可以考虑绑定到 zeromq：

*   [http://www.zeromq.org/](http://www.zeromq.org/)

它绝对是针对高频操作的，甚至支持 FP 社区，[http: //www.zeromq.org/bindings:haskell](http://www.zeromq.org/bindings:haskell)

ZeroMQ 有两种不同的 OCaml 绑定：[http ://www.zeromq.org/bindings:ocaml](http://www.zeromq.org/bindings:ocaml)

# azure - 在 Azure 中平衡虚拟机

> ID：10471292
> 
> 赞同：0
> 
> 时间：2012-05-06T14:28:36.283
> 
> 标签：azure, load-balancing, azure-vm-role

对于我的项目，我必须在 azure 中部署两个（或更多距离）VM 实例。我希望一开始只激活第一个实例，然后在一些人“访问”（例如 2000）之后，如果 2001 人来激活第二个 VM 实例。我必须做什么才能让这个属性工作。我希望你能帮助我解决这个问题！最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:52:42.453

最简单的入门方法是使用自动缩放应用程序块 ( [Wasabi](http://msdn.microsoft.com/en-us/library/hh680892%28v=pandp.50%29.aspx) )。您可以通过 Visual Studio 中的 Nuget 轻松地将其添加到您的项目中：

```
Install-Package EnterpriseLibrary.WindowsAzure.Autoscaling 
```

这是进入包管理器命令行的菜单项： 有关更多信息，![在此处输入图像描述](../Images/2c764bee7c0037416ea3806eaab08026.png) 请参阅[此 Nuget 页面](http://nuget.org/packages/EnterpriseLibrary.WindowsAzure.Autoscaling)。

Wasabi 可让您轻松设置缩放规则。规则可以是基于时间的、基于性能计数器的（也许您可以检查一个 asp.net 计数器来测量当前活动？）、基于队列大小（尽管这不适合您请求的场景）、自定义性能计数器、等等。我在上面提到的芥末页面有完整的设置文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:31:23.360

如果您不想自己进行实际编码，并且更愿意将自动缩放和监控外包给第 3 方，请考虑使用 AzureWatch @ [http://www.paraleap.com](http://www.paraleap.com) - 它支持无数种方式聚合和执行扩展操作，在出现问题时发送警报，不仅可以监控 CPU 利用率，还可以监控 SQL Azure、Azure 存储和大量其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T03:09:43.620

除了@Igorek 提供的解决方案之外，Azure 中还有一个内置的自动缩放和诊断数据插件，称为 MetricsHub，[微软最近购买了](http://blog.metricshub.com/2013/03/04/future-of-metricshub/)它。Azure 订阅免费提供，并提供大量实时诊断信息和基于可配置百分比的自动缩放。无论出于何种原因，MetricsHub 向您显示的诊断数据比 Azure 的 Monitor 选项卡显示的数据更新得多 - 通常大约 20 到 40 分钟！

若要查找 MetricsHub，请导航到 Azure 门户，然后选择“新建”，然后在“存储”部分中选择 MetricsHub。

# gwt - RequestFactory：error.getExceptionType() 在 Receiver#onFailure 中返回 null

> ID：10471294
> 
> 赞同：2
> 
> 时间：2012-05-06T14:29:07.340
> 
> 标签：gwt, requestfactory

在服务器端我有：

```
public void throwException() throws Exception {
        throw new NullPointerException("fslkdjflks");
} 
```

在客户端我有：

```
_requestFactory.myService().throwException().fire(new Receiver<Void>() {

            @Override
            public void onSuccess(Void response) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onFailure(ServerFailure error) {
                // TODO Auto-generated method stub
                Window.alert(error.getExceptionType() + " " + error.getMessage());

            }

        }); 
```

error.getExceptionType() 返回 null 而不是异常的类型。知道为什么吗？

谢谢，吉拉德。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T14:53:30.870

默认[`ExceptionHandler`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/requestfactory/server/ExceptionHandler.html)( [`DefaultExeptionHandler`](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/user/src/com/google/web/bindery/requestfactory/server/DefaultExceptionHandler.java)) 不填充`exceptionType`and `stackTraceString`。如果你想要它们，你必须`ExceptionHandler`通过[扩展`RequestFactoryServlet`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/requestfactory/server/RequestFactoryServlet.html#RequestFactoryServlet%28com.google.web.bindery.requestfactory.server.ExceptionHandler,%20com.google.web.bindery.requestfactory.server.ServiceLayerDecorator...%29)来提供你自己的.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T07:18:48.827

除了 Thomas 帖子之外，还有一个如何实现它的链接。

实施此操作，您将获得 StackTrace 并找到问题： [http ://cleancodematters.com/2011/05/29/improved-exceptionhandling-with-gwts-requestfactory/](http://cleancodematters.com/2011/05/29/improved-exceptionhandling-with-gwts-requestfactory/)

只需五分钟，为您现在和将来节省大量时间。

# java - Nullpointerexception 仅适用于 LaF Nimbus

> ID：10471295
> 
> 赞同：0
> 
> 时间：2012-05-06T14:29:15.740
> 
> 标签：java, swing, look-and-feel, nimbus

当我使用 Nimbus Look and Feel 时，`Nullpointerexception`我得到了一个结果。`addPropertyChangeListener`当我使用 Linux 标准 LAF（金属）时，一切正常。

这是一个模拟问题的小测试项目！我有一个扩展 JPanel 并将内容提供给框架的类。框架上的 Finsih 按钮只有在满足某些条件时才会启用（在这种情况下，按钮 2 被按下）。

这是主类：

```
public class Main extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = -3120562776241721109L;
    private JPanel contentPane;
    private JButton button;
    private PropertyChangeListener changeListener;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Main frame = new Main();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public Main() {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
            System.out.println(UIManager.getLookAndFeel());
        } catch (ClassNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (InstantiationException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (UnsupportedLookAndFeelException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        button = new JButton("BUTTON");
        button.setEnabled(false);
        changeListener = new PropertyChangeListener() {

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                if (evt.getPropertyName().equalsIgnoreCase("state")) {
                    button.setEnabled((boolean) evt.getNewValue());
                }
            }
        };
        contentPane.add(button, BorderLayout.SOUTH);
        Panel panel = new Panel();
        contentPane.add(panel, BorderLayout.CENTER);
        panel.addPropertyChangeListener(changeListener);
    } 
```

这是面板类：

```
public class Panel extends JPanel {
    /**
     * 
     */
    private static final long serialVersionUID = -5036784576513445229L;
    private PropertyChangeSupport changes;
    private boolean state;
    /**
     * Create the panel.
     */
    public Panel() {

        this.changes = new PropertyChangeSupport(this);
        JButton button = new JButton("BUTTON2");
        add(button);
        state = false;
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                state = !state;
                changes.firePropertyChange("state", null, state);
            }
        });

    }

    @Override
    public void addPropertyChangeListener(PropertyChangeListener listener) {
        changes.addPropertyChangeListener(listener);
    }
} 
```

如前所述，它与 Metal LAF 一起工作没有任何问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:45:44.540

看起来您覆盖 addPropertyChangeListeners 并将侦听器存储在名为“更改”的列表中。由于 UI 是在执行其余构造函数之前安装的，因此您的更改变量尚未初始化。

在将侦听器添加到您的列表之前添加一个空测试，并在需要时实例化列表（并在您的构造函数中执行相同的操作）。我不记得初始化变量 inline 是否可行（而且我这里没有 JDK 来测试并告诉你）。

或者考虑不覆盖该方法。你当初为什么这么做？它看起来没有必要（但没有代码我无法准确判断）。

# c# - 将 HTTPWebResponse PDF 对象保存到文件

> ID：10471298
> 
> 赞同：1
> 
> 时间：2012-05-06T14:29:40.777
> 
> 标签：c#, webresponse

如何保存通过 HTTPWebResponse 发送的 PDF 文件？我创建的文件似乎已损坏，文件大小不同且没有内容。我现在使用的代码如下：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                StreamReader streamReader = new StreamReader(response.GetResponseStream());
                StreamWriter streamWriter = new StreamWriter(document_ID+".pdf",false,Encoding.Default);
                streamWriter.Write(streamReader.ReadToEnd());
                streamWriter.Close(); 
```

# gwt - 在 GWT 面板中插入 DIV

> ID：10471306
> 
> 赞同：0
> 
> 时间：2012-05-06T14:30:54.000
> 
> 标签：gwt

我的应用程序 jsp 页面上有这个 DIV，我需要将它“注入”到 GWT VerticalPanel 中。编码在包含 "__gwt_historyFrame" 的 iframe 标记之上：

**索引.jsp**

```
<div class="footer" id="footer" style="display:none">
        <p>Copyright © 2012 MyCompany. All Rights Reserved.</p> 
        <a href="#">FAQ</a>
        <a href="#">Privacy</a>
        <a href="#">API</a>
        <a href="#">Contact Us</a>
</div> 
```

我使用以下代码将 DIV 插入到视图中：

```
DivElement footer = (DivElement) document.getElementById("footer");
verticalPanel.getElement().appendChild(footer); 
```

但是它没有出现，虽然`getElementById`没有返回`null`

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:51:41.407

有两件事：

*   你必须删除`display: none`：`footer``footer.getStyle().clearDisplay()`
*   `VerticalPanel`是一个 HTML 表格，将 a 添加`div`到 a`table`可能不起作用。

如果我是你，我宁愿使用`HTML.wrap(footer)`or`HTMLPanel.wrap(footer)`并将该小部件添加到`VerticalPanel`, 作为小部件。

# google-app-engine - Google App Engine 本地数据存储附加 ? 到持久字节

> ID：10471307
> 
> 赞同：0
> 
> 时间：2012-05-06T14:30:56.720
> 
> 标签：google-app-engine

将 blob (byte[]) 存储到 Google App Engine 数据存储区后，我得到一个“？” 在从 Datastore 获取相同的数据后附加到我的数据中。

我有一个想法，这与编码有关，因为我不确定 GAE 默认编码是什么，所以我尝试了几个字符集并得到不同的结果，我想如果我分享这个，我可以更清楚地解决这个问题.

在我的 DBHelper 类（用于保存和获取数据的实用程序）中，当我最初使用以下方法保存数据时：

```
Entity resultEntity = new Entity("Entity");
resultEntity.setProperty("HtmlResult", new Blob(str.getBytes())) 
```

我得到一个'？附加到我的结果的末尾（从本地数据存储中获取的数据）

将我的代码更改为以下内容后：

resultEntity.setProperty("HtmlResult", new Blob(str.getBytes(Charset.forName("UTF-8"))));

然后我将 �� 附加到结果中。

另外，我想当我使用 时`ISO-8859-1`，我有�。很抱歉不确定，但我每次都必须部署到 GAE 才能进行测试。

这个问题与[托管 GAE 中的数据存储区有关 - Google 应用程序引擎附加“？” 数据检索期间的字符，](https://stackoverflow.com/questions/10464614/datastore-in-hosted-gae-google-app-engine-appends-character-during-data-ret)但不是直接的。

请提出您的建议。

FY：我也试过

```
<env-variables>
 <env-var name="DEFAULT_ENCODING" value="UTF-8" />
</env-variables> 
```

**请注意，我在本地机器上没有这个问题，只有当我在 Google 应用引擎上部署和测试我的应用时。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:00:51.997

这将有所帮助：http: [//blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)

# c# - 如果计时器无法在新的循环时间到来之前完成所有工作怎么办？

> ID：10471315
> 
> 赞同：56
> 
> 时间：2012-05-06T14:31:49.417
> 
> 标签：c#, multithreading, timer

假设我们有一个每 10 分钟运行一次的计时器。如果它的处理周期需要超过 10 分钟怎么办。是否会为此启动一个新线程？它会中断当前的操作吗？如果单个对象在计时器内发生变异怎么办？

抱歉，如果我没有提及任何代码，因为问题很清楚，而且我想从多线程编程极客的角度了解完整的答案，而不是通过尝试通过示例应用程序对其进行测试来找到松散的答案。其实我想知道它的工作机制背后的逻辑。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-06T14:38:06.977

如果您使用`System.Threading.Timer`or `System.Timers.Timer`，计时器将再次滴答作响，开始一个新线程。有关避免该问题的方法，请参阅[https://stackoverflow.com/a/10442117/56778 。](https://stackoverflow.com/a/10442117/56778)

如果您正在使用`System.Windows.Forms.Timer`，则在前一个完成处理之前不会发生新的滴答声。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T21:21:29.397

把你的代码放在一个`Monitor.TryEnter()`

```
object timeCheck= new object();

void Timer()
{
    Monitor.TryEnter(timeCheck) 
    {
        //Code that might take too long 
        //...
        Monitor.Exit();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:58:47.217

为了防止重入，你可以使用一个静态布尔值来告诉函数是否已经被执行。使用 try/Catch/finally 并在 finally 中将此布尔值设置为 false，以确保如果您在代码中出错或代码失败，布尔值不会保持为 false。
对于更快的计时器，应通过使用信号量（互斥量）来防止重入。

# ios - iOS 5 后退按钮大小

> ID：10471316
> 
> 赞同：2
> 
> 时间：2012-05-06T14:32:00.560
> 
> 标签：ios, ios5, uinavigationitem, uiappearance

我正在使用 iOS 5 [UIAppearance 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)来使用自定义导航栏后退按钮，如此[处所示](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)。与我发现的其他方法不同，这是最好的方法，因为它保留了默认的后退按钮动画和行为。

唯一的问题是我无法更改其**大小**或将其设置为**not clip subviews**。这是正在发生的事情：

![剪切图像](../Images/6568c6a61759baa5f93dd189ae3029cf.png)

A 是预期行为，B 是默认样式，C 是剪裁结果。

不幸的是，这并不像将 UIBarButtonItem 设置为 clipsToBounds=NO 那样简单。

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T15:07:15.643

正如您所发现的，`UIAppearance`代理不会让您调整按钮本身的尺寸：`UIBarButtonItem`文档中给出了支持的外观方法列表，虽然它包括标题标签本身的指标，但按钮是禁止使用的。

值得一提的是，就可触摸区域而言，按钮本身实际上是 44 pts（88 像素，如果你在视网膜中）高，只是按钮*图形*比这小。

如果您对 3 pt 的高度差不以为然，那么最好的选择可能是创建自己的自定义按钮并使用该`UINavigationItem` `setLeftBarButtonItem`方法。正如您所指出的，您将需要实现一个附加到该按钮的简短方法，`popNavigationController`以确保保持正确的行为。

**更新**：我刚刚发现，如果您将后退按钮保持在身边，实际上，可以对其进行动画处理，使其以与标准后退按钮类似的方式滑动。在下面的代码中`self.backButton`是`UIButton`您将在您的`initWithCustomView` `UIBarButtonItem`方法中使用的。

```
- (void)viewWillDisappear:(BOOL)animated {
    [UIView animateWithDuration:0.3 
                     animations:^{
                         self.backButton.frame = CGRectMake(self.backButton.frame.origin.x+100, 
                                                            self.backButton.frame.origin.y, 
                                                            self.backButton.frame.size.width, 
                                                            self.backButton.frame.size.height);
                     }];
} 
```

...这将在视图控制器消失时触发（即，当弹出*和*推送时），但您可以挂钩到`UINavigationController`委托以仅在弹出导航控制器时触发它。按下控制器时，它似乎肯定会移动按钮，尽管我只在模拟器上测试过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T02:34:09.820

我最终为我在导航控制器中使用的每个 VC 使用了一个自定义视图控制器类。

**OEViewController.h**

```
#import <UIKit/UIKit.h>
#import "OEBarButtonItem.h"

@interface OEViewController : UIViewController

@property (nonatomic, retain) UIButton *backButton;
@property (atomic) BOOL pushed;

- (void)pushViewController:(UIViewController*)vc;

@end 
```

**OEViewController.m**

```
#import "OEViewController.h"

#define ANIMATION_DURATION 0.33

@implementation OEViewController
@synthesize backButton, pushed;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    pushed=YES;
    self.navigationItem.hidesBackButton = YES;

    backButton = [OEBarButtonItem backButtonWithTitle:[(UIViewController*)[self.navigationController.viewControllers objectAtIndex:[self.navigationController.viewControllers count]-2] title]];

    [backButton addTarget:self action:@selector(backButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    if (pushed) {
        self.backButton.frame = CGRectMake(self.backButton.frame.origin.x+100, 
                                           self.backButton.frame.origin.y+6, 
                                           self.backButton.frame.size.width, 
                                           self.backButton.frame.size.height);
        [UIView animateWithDuration:ANIMATION_DURATION 
                         animations:^{
                             self.backButton.frame = CGRectMake(self.backButton.frame.origin.x-100, 
                                                                self.backButton.frame.origin.y, 
                                                                self.backButton.frame.size.width, 
                                                                self.backButton.frame.size.height);
                         }];
        pushed=NO;
    } else {
        self.backButton.frame = CGRectMake(self.backButton.frame.origin.x-100, 
                                           self.backButton.frame.origin.y, 
                                           self.backButton.frame.size.width, 
                                           self.backButton.frame.size.height);
        [UIView animateWithDuration:ANIMATION_DURATION 
                         animations:^{
                             self.backButton.frame = CGRectMake(self.backButton.frame.origin.x+100, 
                                                                self.backButton.frame.origin.y, 
                                                                self.backButton.frame.size.width, 
                                                                self.backButton.frame.size.height);
                         }];
    }
}

- (void)backButtonPressed:(id)sender {
    [self.navigationController popViewControllerAnimated:YES];
    [UIView animateWithDuration:ANIMATION_DURATION 
                     animations:^{
                         self.backButton.frame = CGRectMake(self.backButton.frame.origin.x+100, 
                                                            self.backButton.frame.origin.y, 
                                                            self.backButton.frame.size.width, 
                                                            self.backButton.frame.size.height);
                     }];
}

- (void)pushViewController:(UIViewController*)vc {
    [self.navigationController pushViewController:vc animated:YES];
    [UIView animateWithDuration:ANIMATION_DURATION 
                     animations:^{
                         self.backButton.frame = CGRectMake(self.backButton.frame.origin.x-100, 
                                                            self.backButton.frame.origin.y, 
                                                            self.backButton.frame.size.width, 
                                                            self.backButton.frame.size.height);
                     }];
}

@end 
```

与使用 UIAppearance 相比，这具有使用 iOS 4.0+ 的额外好处。

感谢@lxt 的帮助！

# spring - 带有 spring 和 freemarker 的验证表

> ID：10471321
> 
> 赞同：0
> 
> 时间：2012-05-06T14:32:46.827
> 
> 标签：spring, validation, jakarta-ee, freemarker

我最近开始使用 spring (3.0.5) 形式，带有休眠验证器(4.0.2.GA)。我的验证工作正常我可以显示来自休眠验证器的错误消息。如何显示其他消息，例如：`username and password mismatch`和其他消息？这是我的表格：

```
 <form action="loginprocess" method="post">
       <h1>Log in</h1>
        <@spring.bind "loginForm" />
        <@spring.showErrors '*', 'errors' />
        <p>
           <label class="uname" data-icon="u"> UserName :</label>
           <@spring.formInput "loginForm.username","placeholder='eg. myusername'" />
           <@spring.showErrors "loginForm.username","error" />
        </p>
        <p>
           <label class="youpasswd" data-icon="p">Password :</label>
           <@spring.formPasswordInput "loginForm.password","placeholder='eg. @dakdjlkdja'"  />
           <@spring.showErrors "loginForm.password", "error" />
        </p>

    <input type="submit" style="background:#000; border: solid 1px #000;" value="Login"/>
        <p class="change_link">
          Not a member yet ?
        <a href="/site/authentication/signup/form" class="to_register">Sign up</a>
        </p>
  </form> 
```

我的控制器看起来像这样：

```
 @RequestMapping(value = "/site/authentication/login")
public ModelAndView nativeLogin(){
    LoginForm loginForm = new LoginForm();
   return  new ModelAndView("login","loginForm",loginForm);
}

@RequestMapping(value = "/site/authentication/loginprocess")
public ModelAndView processNativeLogin(@ModelAttribute @Valid LoginForm loginForm, BindingResult result, Model model){
    if(result.hasErrors()){

        return new ModelAndView("login","loginForm",loginForm);
    }

    try {
        Subject currentUser = SecurityUtils.getSubject();

        if (!currentUser.isAuthenticated()) {
            UsernamePasswordToken token = new UsernamePasswordToken(loginForm.getUsername(), loginForm.getPassword());
            SecurityUtils.getSubject().login(token);
        }

    } catch (UnknownAccountException uae) {
   // how to set this message to show on the form ?"Login Failed! Please check your credentials and try again.");
    } catch (IncorrectCredentialsException ice) {
   //"Login Failed! Please check your credentials and try again.");
    }
 } 
```

谁能阐明如何实现它？感谢您阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:18:54.987

```
<#if Session.SPRING_SECURITY_LAST_EXCEPTION?? && Session.SPRING_SECURITY_LAST_EXCEPTION.message?has_content>
            <@spring.message "label.loginerror"/>: ${Session.SPRING_SECURITY_LAST_EXCEPTION.message}
</#if> 
```

我希望这将有所帮助。

# javascript - 访问 MVC 3 中动态创建的文本框的 POST 值

> ID：10471322
> 
> 赞同：0
> 
> 时间：2012-05-06T14:33:08.407
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我使用 javascript 动态创建了一些文本框，现在我想在我的控制器中访问它们。我需要一种方法来访问我的控制器操作中这些文本框中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:35:56.963

你试过给他们一个“名字”属性吗？

```
Request.Form["MyTextBox"] 
```

# r - 如何在另一个图的给定位置绘制饼图？

> ID：10471325
> 
> 赞同：1
> 
> 时间：2012-05-06T14:33:30.023
> 
> 标签：r, plot

我想知道如何在另一个绘图**的给定位置**绘制饼图。

我知道如何将两个图放在同一个图中，使用

```
plot(...)
line(...) 
```

但这似乎不适用于饼图。而且我还想指定绘制饼图的位置。

能否请你帮忙？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:43:34.820

您可以`floating.pie`从`plotrix`包装中尝试或`Rgraphviz::pieGlyph`...另请参阅

*   [在ggplot的地图上绘制饼图](https://stackoverflow.com/questions/10368180/plotting-pie-graphs-on-map-in-ggplot)
*   [使用 ggplot 创建浮动饼图](https://stackoverflow.com/questions/9684371/create-floating-pie-charts-with-ggplot)
*   [R：如何在 R 中的散点图中将饼图叠加在“点”上](https://stackoverflow.com/questions/9233077/r-how-to-overlay-pie-charts-on-dots-in-a-scatterplot-in-r)
*   `library(sos); findFn("pie chart")`

# svn - SVN 如何处理大文件？

> ID：10471326
> 
> 赞同：0
> 
> 时间：2012-05-06T14:33:31.003
> 
> 标签：svn, tortoisesvn

我正在研究UDK。UDK 中每张地图的大小约为**200MB+**。

我已经将它们上传到我的 SVN 服务器。但现在我想提交这些地图。

**我的问题是** 我的 svn 客户端是否再次上传所有地图（再次 200+MB）或只是更改这些地图（大约 15+MB）。？

我在这个论坛上读过，但不要认为，这也适用于大文件。 [http://fluxbb.org/forums/viewtopic.php?pid=21182#p21182](http://fluxbb.org/forums/viewtopic.php?pid=21182#p21182)

另外，在 SVN 中存储大文件是否有效，因为如果单个文件中的任何一组数据丢失，那么整个文件将被损坏。

我正在使用**TortoiseSVN**客户端

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:41:15.697

如果文件中的内容为文本格式且多行，则只会上传更改的行。那是有效率的。

如果它是二进制文件，则使用 SVN 没有任何好处，因为它在提交时保留了整个文件的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:56:01.953

我尝试向我的 svn 服务器提交一个大约 8 MB 的 rar 球，然后向 rar 球添加一个小文件，在我的第二次提交中，我确定它只是上传更改，而不是整个文件。

因此，虽然它是一个二进制文件，但 TortoiseSVN 只能上传 15 MB 的更改，而不是整个 200 MB 的文件。

# jquery - 带有 jplayer 的单个页面中的多个 mp3 链接

> ID：10471327
> 
> 赞同：1
> 
> 时间：2012-05-06T14:33:37.047
> 
> 标签：jquery, jplayer

在我的页面中有许多 mp3 链接，我使用 jplayer。单击单独的链接时，如何更新 jplayer 功能以播放？

```
$(document).ready(function() {

 $("#jquery_jplayer_1").jPlayer({

    ready: function(event) {
        $(this).jPlayer("setMedia", {
            mp3: "test_1.mp3",   //my mp3 file

        });
    },
    swfPath: "http://www.jplayer.org/2.1.0/js",
    supplied: "mp3"
  });
}); 
```

我的mp3链接：

```
<a href="javascript:listen(1);" class="jp-play" ></a>
<a href="javascript:listen(2);" class=" jp-play" ></a>
<a href="javascript:listen(3);" class=" jp-play" ></a>
<a href="javascript:listen(4);" class=" jp-play" ></a>
<a href="javascript:listen(5);" class=" jp-play" ></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:31:25.643

嘿，您可以执行以下操作。

我在页面加载时实例化播放器：

```
jQuery("#jquery_jplayer_1").jPlayer({
swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
supplied: "mp3",
wmode: "window",
preload:"auto",
autoPlay: true,
errorAlerts:false,
warningAlerts:false
}); 
```

然后在每个项目都是唯一的侦听器中，您需要： A) 获取轨道名称/URL，我想您应该能够弄清楚这一点。

B) 将轨道传递给 setMedia

```
jQuery("#jquery_jplayer_1").jPlayer("setMedia", {
mp3: "http:xxxx.rackcdn.com/"+track+".MP3"
}); 
```

C) 播放曲目

```
jQuery("#jquery_jplayer_1").jPlayer("play"); 
```

要获取曲目 ID，您需要在可播放项目上安装侦听器（可能是可播放类？）并从该项目中获取曲目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:42:22.047

html:

```
<a href="test_1.mp3" class="jp-play"></a>
<a href="test_2.mp3" class="jp-play"></a> 
```

js：

```
$(document).ready(function() {
   readMP3("test_1.mp3");// play one mp3 if document is loaded

    $(".jp-play").click(function(event){
        event.preventDefault();
        readMP3($(this).attr("href"));
    })

});

function readMP3(_src){
 $("#jquery_jplayer_1").jPlayer({
    ready: function(event) {
        $(this).jPlayer("setMedia", {
            mp3: _src,
        });
    },
    swfPath: "http://www.jplayer.org/2.1.0/js",
    supplied: "mp3"
  });
} 
```

# ruby-on-rails - Rails belongs_to 用户但多态 has_many 模型？

> ID：10471329
> 
> 赞同：0
> 
> 时间：2012-05-06T14:34:44.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在一个新的 Rails 应用程序中，我必须建立这种关系

```
Trip -> 1-to-1 -> Plan
Plan -> n-to-n -> Places
Plan -> n-to-n -> Activities 
```

当然，反之亦然的关系也是如此。

`plan`桌子是我正在考虑的东西。是否可以在没有任何额外表的情况下建立直接`Trip -> Places`和关系。`Trip -> Activities`

如果不是，那么处理这种关系的有效方法是什么，请记住，将来可能会有其他模型与 Plan 模型具有 n 对 n 关系。

更新 - 我发现了这个问题和答案。可能对希望和我做同样事情的人有所帮助

[ActiveRecord、has_many :through 和多态关联](https://stackoverflow.com/questions/1683265/activerecord-has-many-through-and-polymorphic-associations)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:04:32.957

这是可能的，但复杂而混乱，所以我不会。您可以定义`has_many ..., :through => :plan`关联以轻松有效地访问旅行地点和活动等。

Rails 不提供关联`:through`选项`belong_to`，但您可以定义方便的方法来访问它们，并且`:include`在查找时使用该选项可以有效地查询关联记录。

# c++ - 如何用 C++ 创建父系统？

> ID：10471330
> 
> 赞同：-2
> 
> 时间：2012-05-06T14:34:52.127
> 
> 标签：c++

我需要知道如何通过它们的名称或编号（或者我可以通过特定父项中的每个项目循环的任何内容）索引不同类型的对象，或者是否有任何其他方法可以处理大量对象不喜欢。

```
obj1.blah = blah
obj2.blah = blah 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:39:19.520

使用映射，您可以创建关联数组，即通过字符串名称引用对象的不同实例。

```
#include <map>

class ObjectType {
public:
  void DoSomething()
  {
     std::cout << "Did something\n";
  };
};

std::map<std::string, ObjectType> objects;
objects["object1"] =  ObjectType();
objects["object2"] =  ObjectType();

objects["object2"].DoSomething();
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:39:29.153

在 C++ 中处理许多对象的标准方法是使用容器，例如`vector`：

```
#include <vector>
#include "MyObject.hpp" // contains your object type definition

int main()
{
    std::vector<MyObject> v = populate_container_with_objects(); 
```

现在您可以非常轻松地对其进行迭代：

```
 for (auto & ob  : v)
    {
        do_something_useful_with(ob);
    }
} 
```

在旧的编译器上，你不得不说：

```
for (std::vector<MyObject>::iterator it = v.begin(), end = v.end(); it != end; ++it)
{
    do_something_useful_with(*it);
} 
```

# android - 是否可以在android中制作蓝牙通话应用程序？

> ID：10471331
> 
> 赞同：-5
> 
> 时间：2012-05-06T14:35:00.307
> 
> 标签：android, bluetooth

有人请帮助我。我看到了一个蓝牙聊天应用程序。所以我想知道是否可以制作蓝牙通话应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T15:04:57.447

无论如何，如果你还没有做过谷歌，那就让我们为你做吧。

所以首先你有[这个](http://developer.android.com/guide/topics/wireless/bluetooth.html)告诉你它是如何工作的，以及所涉及的 API。学习它，它是一个很好的参考，并向您展示正确的流程。

然后，您就有了这个实际随 SDK 一起提供的[示例，并且很可能已经在您的 HDD 上。](http://developer.android.com/resources/samples/BluetoothChat/index.html)

然后当你遇到问题时，你可以寻找其他人的问题，比如[这个](https://stackoverflow.com/questions/6141668/bluetooth-examples-for-android)，谷歌知道如何在 Stackoverflow 中找到这些问题。

只有在你经历了所有这些之后，你遇到了麻烦，才非常欢迎你来这里问你的问题。但请记住，让它成为一个**好**问题！:-)

祝你好运！

# android - Android：JSON字符串数据与其他字符串比较

> ID：10471334
> 
> 赞同：3
> 
> 时间：2012-05-06T14:35:43.780
> 
> 标签：android, json, string, compare

我想将使用 JSON 的 mysql 数据库中的字符串与我的字符串进行比较。我从数据库中收到数据，日志显示我拥有所有数据。

```
try{
     JSONArray jArray = new JSONArray(result);
     for(int i=0;i<jArray.length();i++){
         json_data = jArray.getJSONObject(i);
         Log.i("mylog","TABLE_NAME: "+json_data.getString("table_name"));//returns cars

         if (  json_data.getString("table_name") == "cars" ) { //dosent work
              .... 
         }
     }
} catch(JSONException e){
         Log.e("mylog", "Error parsing data "+e.toString());
     return false;
} 
```

在日志中的这个例子中，我收到了表的名称：汽车并且低于 IF 条件不起作用，我不知道为什么。它很奇怪。我尝试了很多方法。

您知道我无法将 JSON 中的 table_name 与简单字符串进行比较的原因是什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T14:36:43.757

用于`.equals()`比较 java/android 中的两个字符串。

```
if (json_data.getString("table_name").equals("cars")) {  

         } 
```

它比较字符串参考所以不能工作......

当您使用字符串文字然后使用`==`

并且`==`只适用于原始数据类型和这里`String is Object`所以使用`.equals`

# r - 简单的data.frame重塑

> ID：10471338
> 
> 赞同：7
> 
> 时间：2012-05-06T14:36:07.687
> 
> 标签：r, dataframe, reshape

我刚刚从长时间的中断写作中回到 R，我在记住如何重塑数据时遇到了一些真正的问题。我知道我想做的事情很容易，但出于某种原因，我今晚变得愚蠢，把自己与融化和重塑混淆了。如果有人能迅速指出我正确的方向，将不胜感激。

我有一个这样的数据框：

```
person    week    year   
personA   6       1
personA   22      1
personA   41      1
personA   42      1
personA   1       2
personA   23      2
personB   8       2
personB   9       2
....
personN   x       y 
```

我想按年份和按人对事件进行计数：（这样我就可以为每个人绘制多年来的快速折线图）

例如

```
person    year1    year2
personA   4        2
personB   0        2 
```

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T14:56:37.233

我可能会使用`reshape2`包和`dcast`函数，因为它可以一步处理整形和聚合：

```
library(reshape2)
> dcast(person ~ year, value.var = "year", data = dat)
Aggregation function missing: defaulting to length
   person 1 2
1 personA 4 2
2 personB 0 2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T15:09:52.710

在这种情况下，您可以简单地使用`tapply`：

```
> with(data, tapply(week, list(person=person, year=year), length))
         year
person     1 2
  personA  4 2
  personB NA 2 
```

结果是一个矩阵。如果有空单元格，此解决方案会产生 NA。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-06T15:44:40.980

`xtabs`从基础 R 非常适合这个问题：

```
dat <- read.table(text="person    week    year   
personA   6       1
personA   22      1
personA   41      1
personA   42      1
personA   1       2
personA   23      2
personB   8       2
personB   9       2
", header=TRUE)
xtabs(~person+year, data=dat)
#-----------------
         year
person    1 2
  personA 4 2
  personB 0 2 
```

您可以将其输出传递给 matplot，因为它返回一个表/矩阵对象：

```
matplot( xtabs(~person+year, data=dat)) 
```

这个小例子上的输出 x 轴可能不是您想要的，但随着时间的推移，可能会有更令人满意的默认轴标签。或者您可以使用 xaxt="n" 抑制默认的 x 轴标签，并根据`axis`需要使用标签：

```
matplot(  xtabs(~person+year, data=dat), xaxt="n", type="b") 
```

# simulation - 用于模拟的精灵到内存图像

> ID：10471341
> 
> 赞同：0
> 
> 时间：2012-05-06T14:36:33.313
> 
> 标签：simulation, elf, readelf

我正在编写 Sparc V8 的 C++ 仿真模型。内存被简单地建模为一个数组。我需要读取一个由交叉编译器生成的 elf 可执行文件并用它来初始化内存。我打算这样做如下。

```
sparc-elf-readelf --hex-dump=.text --hex-dump=.rodata --hex-dump=.data <elf-file> > dump.txt
grep "0x" dump.txt >dump2.txt 
```

这会生成一个（地址、单词、单词）格式的文本文件，如下所示：

```
 0x00000000 88100000 09000000 81c120b0 01000000 .......... .....
  0x00000010 91d02000 01000000 01000000 01000000 .. .............
  0x00000020 91d02000 01000000 01000000 01000000 .. .............
  0x00000030 91d02000 01000000 01000000 01000000 .. .............
  0x00000040 91d02000 01000000 01000000 01000000 .. .............
  0x00000050 a1480000 29000000 81c521a8 01000000 .H..).....!.....
  0x00000060 a1480000 29000000 81c52220 01000000 .H..)....." ....
  0x00000070 91d02000 01000000 01000000 01000000 .. .............
  ... 
```

问：最后一列中的所有点是什么？

问：有没有更好的方法从 elf 可执行文件生成内存映像？我想我只需要复制 .text、.rodata 和 .data 部分

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:56:48.773

`Q: What are all the dots in the last column?`

正如欧内斯特所说，它们是不可打印的字符。也就是说，每个都是一个不适合 7 位（不是 ASCII）或低于 0x20（控制 ASCII 字符）的字节。

`Q: Is there a better way to generate a memory image from the elf executable? I think I need to copy only the .text, .rodata and .data sections`

你的方法根本行不通。ELF 格式不仅仅是提供有关部分将在内存中的位置的信息；它还包含解析动态符号和重定位的说明。您需要的是加载程序活动发生**后的内存映像。**

我建议您阅读[ELF 规范](http://www.sco.com/developers/devspecs/gabi41.pdf)和适用于[SPARC](http://www.sparc.org/standards/psABI3rd.pdf)的附录。如果您不是出于教育目的而开始这个项目，我还建议您宁愿使用任何现有的平台和应用程序模拟器，如[QEMU](http://wiki.qemu.org/Main_Page)。

# radio - 使用 JWPlayer 播放 Icecast 流

> ID：10471342
> 
> 赞同：2
> 
> 时间：2012-05-06T14:36:38.587
> 
> 标签：radio, jwplayer, icecast

我想使用 JWPlayer 播放 Icecast 流，下面是我用来嵌入和设置播放器的代码：

```
<div id='mediaplayer'>Radioplayer will be in this DIV</div>

<script type="text/javascript">
  jwplayer('mediaplayer').setup({
    'flashplayer': './inc/player.swf',
    'id': 'player1',
    'type': 'sound',
    'width': '480',
    'height': '270',
    'autoplay': 'true',
    'volume': '60',
    'file': 'http://95.211.136.94:8039/stream'
  });
</script> 
```

当播放器启动时，它可以完美运行。该流由 Icecast 服务器流式传输，当播放器启动时，它可以完美运行。但是当当前的人离开流并且下一个人加入流时，播放器开始动摇。

再次按下暂停和播放，它又可以正常工作了，但是如何在不重新启动播放器的情况下解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-07T23:13:06.037

我知道我在这里挖坟，但其他人想知道..

他试图在一个安装点上实现的目标几乎是不可能的。我们正在谈论一个全新的音频文件正在创建和流式传输......无论哪种方式你都必须刷新。

icecast 的解决方案实际上是为侦听器提供一个实时挂载点，在这种情况下，我们将其称为“/live”。然后，您需要多个挂载点供其他人使用，例如“/joe”和“/mossawi”。

您需要一台持续开机的机器（通常是服务器）来流式传输主要的“/live”挂载点，这将被观众访问和收听。然后在该服务器上，需要安排它在分配的时间为特定个人拾取并播放正确的安装点。广播播放软件通常扮演这个角色，它还允许您在没有个人流式传输的情况下流式传输现场音乐（通常由托管提供商作为“自动 dj”出售）。

如有任何其他问题，请随时与我联系。10 年来，我一直在做网络广播。

# python - 在 Django 中使用 Markdown 时出错

> ID：10471349
> 
> 赞同：1
> 
> 时间：2012-05-06T14:37:29.030
> 
> 标签：python, django, markdown

从命令行，我使用它来将字符串转换为 html：

```
 >>>import markdown
    >>> mk = Markdown()
    >>> html = mk.convert(my_string) 
```

它让我得到了没有任何错误的 html 字符串，但是当在模块中使用相同的 django 页面时，django 页面将错误打印为“未定义全局名称 'markdown'”

我通过使用清除了这个

```
 import markdown
    mk = markdown.Markdown()
    html = mk.convert(my_string) 
```

我是新手，我需要知道为什么在解释器模式下运行的代码在放入模块时会出错。这是否意味着我在解释器模式下尝试没有错误的任何内容都可能在编写为代码时带来错误？帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:46:18.727

如图所示的代码在解释器中不起作用*。*您必须以前运行过`from markdown import Markdown`或`from markdown import *`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T14:42:09.320

只需运行：

```
import markdown

html = markdown.markdown(my_string) 
```

如果这不起作用，这将有助于我们查看实际的错误回溯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T16:53:23.577

django 文档不太清楚您需要实际安装其他东西才能完成此操作。Django 默认包含的唯一内容是在模板中使用 markdown 的标记应用程序，而不是在模型中。

使用此处的文档安装 markdown 并使用以下语法：

[http://packages.python.org/Markdown/reference.html](http://packages.python.org/Markdown/reference.html)

或者

`pip install markdown`

或者

`easy_install markdown`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-26T09:53:28.013

花了这么多时间在这上面。只需执行以下命令，适用于 python3.6 和 Django 2.0.5+ 版本。

`pip install django-markdown-deux`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T12:48:34.300

Akansha 建议的解决方案可以解决类似的问题

```
 pip install django-markdown-deux 
```

# mongodb - 增加嵌套对象中的值？

> ID：10471350
> 
> 赞同：16
> 
> 时间：2012-05-06T14:37:40.573
> 
> 标签：mongodb

这个周末我在搞乱 mongodb 和 node.js，我在通过 mongodb 文档更新嵌套对象/文档时遇到了一些麻烦。

我有一个集合，其中的文档看起来像这样..

```
{
 gameName: "string",
 slug: "string",
 players: [{playerName, playerScore}, ...]
} 
```

我试图找出如何根据 playerName 增加 playerScore 的值。

我想这主要是因为我不了解 NoSQL 方法。我什至对为玩家使用数组有第二个想法，所以任何输入都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T11:56:43.007

你想要的结构是：

```
{
 gameName: "string",
 slug: "string",
 players: [ { playerName: "string", playerScore: number} ] , ...]
} 
```

如果他的名字是 Joe，要将玩家得分加一，您可以使用：

```
db.collection.update( {"players.playerName":"Joe"}, { $inc : { "players.$.playerScore" : 1 } } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T14:56:42.133

我相信您将不得不构建您的文档，而不是像

```
{
 游戏名称：“字符串”，
 蛞蝓：“字符串”，
 玩家：{playerName：{score：playerScore}}，
}

```

然后你可以更新分数：

```
db.games.update({"gameName": "string"},
                {$inc: {"players.playerName.score": 1}
                })

```

# css - 为什么将鼠标悬停在绝对/相对 div 上时菜单会变得透明？

> ID：10471355
> 
> 赞同：0
> 
> 时间：2012-05-06T14:38:21.633
> 
> 标签：css, jscrollpane, transparent

在我的网站上，当我将 a`jscrollpane`放在右侧时，我的第二级左侧菜单（当您将鼠标悬停到菜单时显示）变得透明并且有时失去焦点：[http ://trantienhiensauxavanphuoc.com/vi/gia-pha-toan-toc](http://trantienhiensauxavanphuoc.com/vi/gia-pha-toan-toc)

另一个页面没有`jscrollpane`并且正常工作： http: [//trantienhiensauxavanphuoc.com/](http://trantienhiensauxavanphuoc.com/)

任何人都可以帮我找到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:30:45.087

在您的代码中添加以下 CSS，

```
#sidebarmenu1 li ul{z-index:99999 !important;} 
```

# css - Bootstrap 固定底部表单动作

> ID：10471356
> 
> 赞同：5
> 
> 时间：2012-05-06T14:38:23.937
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter 引导流体布局。在一个页面上，我有一个大表单，底部`<div class="form-actions">`有一个保存按钮。我想让这个 div 一直可见，这样用户就不必总是向下滚动到页面底部。我尝试使用这段 CSS：

```
.fixed {position: fixed !important;} 
```

当表格适合视口时它可以工作，但当表格太大时它会神秘地消失。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T15:12:47.983

尝试为其中一个设置一些值，`top`或者`bottom`根据您希望它锚定的位置来设置一些值。

```
.fixed {
    position: fixed;
    bottom:0;
    left:0;
 } 
```

# c++ - 提高文件系统难度

> ID：10471357
> 
> 赞同：1
> 
> 时间：2012-05-06T14:38:38.257
> 
> 标签：c++, linker-errors, boost-filesystem

嗨，我正在尝试使用 boost 文件系统，但在编译时遇到了麻烦。以下是来自控制台的消息。我在 Eclipse 中的 OpenSuse 11.4 上使用 boost 4.9。我不知道接下来要尝试什么才能使这项工作正常进行，因此我们将不胜感激任何帮助。谢谢。

```
Invoking: GCC C++ Linker
g++ -L/usr/include/CGAL -L/usr/include/boost/iostreams -L/usr/include/gnuplot-iostream -L/usr/include/boost -L/usr/include -o"Aircraft_Engine_Noise"  ./src/Aircraft_Engine_Noise.o ./src/Environment_Functions.o ./src/Global.o ./src/Plotting.o ./src/Simulation.o ./src/filehandle.o ./src/gnuplot_i.o ./src/gridsquare.o ./src/nasagridsquare.o ./src/terrain.o ./src/user_input.o ./src/utils.o   -lboost_iostreams -lboost_system -lboost_filesystem
./src/Plotting.o: In function `boost::filesystem3::temp_directory_path()':
/usr/include/boost/filesystem/v3/operations.hpp:537: undefined reference to `boost::filesystem3::detail::temp_directory_path(boost::system::error_code*)'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:43:21.113

您的编译器调用中有一些错误。您正在使用`-L`包含目录，而您应该使用`-I`.

看起来您可能没有链接到`libboost_filesystem`库。这可能是您错误调用的问题`g++`弄乱了库搜索路径。

您可能还需要添加库所在的目录。在我的设置中，它位于`/usr/local`，所以

```
-L/usr/local 
```

将其添加到库搜索路径。

# asp.net-mvc-3 - 在 wappwolf 之类的页面上获取固定的可见底部页脚

> ID：10471359
> 
> 赞同：1
> 
> 时间：2012-05-06T14:39:03.450
> 
> 标签：asp.net-mvc-3, css

我不擅长 CSS。只想要一个像 www.wappwolf.com 这样的页脚 - 不知道它是如何工作的（CSS 概念），有没有我可以看的清楚解释的例子？我不需要很多复杂/黑客工作来使其在旧浏览器等上工作。与现代版本的兼容性很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T14:44:13.150

通常至少自己尝试一下会更好，但这应该可以帮助您入门：

为您的页脚 div 提供以下样式：

```
div{
  position:fixed;
  width:100%;
  left:0px;
  bottom:0px;
  height:50px; //or whatever height you want
} 
```

`Position Fixed`即使在滚动时，页脚也会保持在相同的位置。`left and bottom`会将其保持在屏幕的左侧和底部（左侧不是完全必要的，因为它是屏幕的整个宽度，但 IE 有时可能会在没有它的情况下出现问题）。

将您设置`height`为最适合您的页脚内容的任何内容。我假设你会知道如何在里面设置实际的列。

# javascript - javascript Uncaught TypeError：无法读取未定义的属性“date_notify”

> ID：10471361
> 
> 赞同：0
> 
> 时间：2012-05-06T14:39:21.207
> 
> 标签：javascript, jquery, sql

```
 $.ajax({
        url: "notifications.php",
        dataType: "json",
        success: function(responseJSON) {
            if (responseJSON.length > 0) {
                document.title = document.title.replace(/^(?:\(\d+\))?/, "(" + responseJSON.length + ") ")
                for (var i=0; i<10; i++) {
                    console.log(responseJSON[i].date_notify')
                }
            }
        }, error : function(x) {
            console.log(x.responseText)
        }
    }) 
```

在chrome中我有这个错误：

> 未捕获的类型错误：无法读取未定义的属性“日期通知”

我发现这部分`for (var i=0; i<10; i++)`应该被替换为`for (var i=0; i<responseJSON.length; i++)`问题是我只想有 10 个结果......在我的 sql 部分我没有**限制**查询。这是我的查询

```
SELECT users.lastname, users.firstname, users.screenname, notifications.notify_id, 
notifications.tagged_by, notifications.user_id, notifications.post_id,                                                        
notifications.type, notifications.action, notifications.date_notify,
notifications.notify_id
FROM website.users users INNER JOIN website.notifications notifications
ON (users.user_id = notifications.user_id)
WHERE notifications.user_id = ? and notifications.action = ?
ORDER BY notifications.notify_id DESC
//LIMIT 10 
```

有没有办法改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:42:56.337

`AND`在循环中使用ed 条件：

```
for(var i=0; i<responseJSON.length && i<10; i++) 
```

这样，当`i`超过条目数或达到 10（以先发生者为准）时，循环就会中断。如果条目数小于 10，则第一个条件首先为 false，如果超过 10 条记录，则第二个条件首先为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:57:41.233

限制您的 SQL 查询。没有理由为您不会使用的数据消耗网络带宽和服务器资源，更不用说如果数据是敏感的潜在安全问题。

# regex - bash shell 中 ImageMagick“识别”的正则表达式语法

> ID：10471362
> 
> 赞同：0
> 
> 时间：2012-05-06T14:39:21.883
> 
> 标签：regex, grep, imagemagick, posix, posix-ere

我正在尝试在非常大的图像路径上运行 ImageMagick identify 命令，在其中识别返回与模式匹配的文件的图像尺寸。我要匹配的模式是：

```
/jewelclub_[a-z0-9]{1,}_(small|medium|large|zoom)\.jpg/ 
```

当我尝试执行以下两个命令时，第一个成功，第二个失败，这似乎是我的 RegExp 有问题：

```
(1): identify -format "%f %w %h %b \n" 'jewelclub_*\.jpg'
(2): identify -format "%f %w %h %b \n" 'jewelclub_[a-z0-9]{1,}_(small|medium|large|zoom)\.jpg' 
```

关于如何将命令 #2 中的 PCRE 语法更改为兼容的 RegEx 风格（BRE？ERE？）的任何建议？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:28:36.260

你确定`identify`接受正则表达式作为文件参数吗？

这个解决方法怎么样，将您的正则表达式传递给`find`然后通过管道传递给`xargs`：

```
find -E . -regex "./jewelclub_[a-z0-9]{1,}_(small|medium|large|zoom)\.jpg" |\
xargs identify -format "%f %w %h %b \n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:07:38.843

我不知道如何`identify`工作，但我可以确认您使用的正则表达式：

```
jewelclub_[a-z0-9]{1,}_(small|medium|large|zoom)\.jpg 
```

使用正确的 ERE 语法。

要使其符合 BRE 标准，这很棘手，因为 BRE 不支持该`(...|...|..)`语法。如果您需要使用 BRE，我会仔细检查每个案例，`identify`然后结合结果：

```
jewelclub_[a-z0-9]\{1,\}_small\.jpg
jewelclub_[a-z0-9]\{1,\}_medium\.jpg
jewelclub_[a-z0-9]\{1,\}_large\.jpg
jewelclub_[a-z0-9]\{1,\}_zoom\.jpg 
```

或者我会在 BRE 中让事情变得更简单：

```
jewelclub_[a-z0-9]\{1,\}_[smlz][[:alpha:]]\{3,5}\.jpg 
```

请参阅[POSIX RegEx 标准](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html)。

# login - 无法登录 SQL Server Management Studio

> ID：10471364
> 
> 赞同：0
> 
> 时间：2012-05-06T14:39:52.063
> 
> 标签：login, sql-server-2008-r2

我愚蠢而意外地从 SQL Server 2008 登录中删除了 Windows 管理员。现在我无法连接到 Sql Server Management Studio。如果您之后无法登录到sql server，为什么甚至可以删除此登录名？

我有这个盒子的管理员权限。

请在我因为如此愚蠢而自杀之前提出建议：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:48:42.507

您的意思是删除了#1 Windows 用户还是#2 'sa' 用户？

在 #1 中，您可以使用“sa”，如果您只记得安装时提供的密码。或者，您可以创建一个新的 Windows 管理员用户，并通过该用户登录使用 Windows 身份验证。

在＃2中，如果您不允许Windows身份验证，我认为这会更困难（不过，我不记得您是否可以将其排除在外）

编辑：一个快速的谷歌搜索给出了这个：

[http://blogs.msdn.com/b/raulga/archive/2007/07/12/disaster-recovery-what-to-do-when-the-sa-account-password-is-lost-in-sql- server-2005.aspx](http://blogs.msdn.com/b/raulga/archive/2007/07/12/disaster-recovery-what-to-do-when-the-sa-account-password-is-lost-in-sql-server-2005.aspx)

# php - Flash 加密 PHP 解密

> ID：10471367
> 
> 赞同：1
> 
> 时间：2012-05-06T14:40:03.683
> 
> 标签：php, flash, encryption

请建议可以在 PHP 中轻松解密的 flash 中的加密。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T14:48:05.660

对于 Flash，您可以[http://code.google.com/p/as3crypto/](http://code.google.com/p/as3crypto/)它支持

*   RSA
*   DES
*   AES
*   河豚 -
*   MD5
*   沙
*   X509
*   RC4

PHP 你可以使用`mycrypt` [http://www.php.net/manual/en/mcrypt.examples.php](http://www.php.net/manual/en/mcrypt.examples.php) RSA, DES, AES, Blowfish, MD5, SHA, X509, RC4 以上所有加密也支持

**Flash 类示例**

```
package
{
        import flash.display.Sprite;
        import flash.utils.ByteArray;

        import com.hurlant.crypto.symmetric.ICipher;
        import com.hurlant.crypto.symmetric.IVMode;
        import com.hurlant.crypto.symmetric.IMode;
        import com.hurlant.crypto.symmetric.NullPad;
        import com.hurlant.crypto.symmetric.PKCS5;
        import com.hurlant.crypto.symmetric.IPad;
        import com.hurlant.util.Base64;
        import com.hurlant.util.Hex;
        import com.hurlant.crypto.Crypto;

        public class CryptoCode extends Sprite
        {
                private var type:String='simple-des-ecb';
                private var key:ByteArray;

                public function CryptoCode()
                {
                        init();
                }

                private function init():void
                {
                        key = Hex.toArray(Hex.fromString('TESTTEST'));// can only be 8 characters long

                        trace(encrypt('TEST TEST'));
                        trace(decrypt(encrypt('TEST TEST'));
                }

                private function encrypt(txt:String = ''):String
                {
                        var data:ByteArray = Hex.toArray(Hex.fromString(txt));

                        var pad:IPad = new PKCS5;
                        var mode:ICipher = Crypto.getCipher(type, key, pad);
                        pad.setBlockSize(mode.getBlockSize());
                        mode.encrypt(data);
                        return Base64.encodeByteArray(data);
                }
                private function decrypt(txt:String = ''):String
                {
                        var data:ByteArray = Base64.decodeToByteArray(txt);
                        var pad:IPad = new PKCS5;
                        var mode:ICipher = Crypto.getCipher(type, key, pad);
                        pad.setBlockSize(mode.getBlockSize());
                        mode.decrypt(data);
                        return Hex.toString(Hex.fromArray(data));
                }
        }

} 
```

**PHP 类示例**

```
class Crypt
{
        var $key = NULL;
        var $iv = NULL;
        var $iv_size = NULL;

        function Crypt()
        {
                $this->init();
        }

        function init($key = "")
        {
                $this->key = ($key != "") ? $key : "";

                $this->algorithm = MCRYPT_DES;
                $this->mode = MCRYPT_MODE_ECB;

                $this->iv_size = mcrypt_get_iv_size($this->algorithm, $this->mode);
                $this->iv = mcrypt_create_iv($this->iv_size, MCRYPT_RAND);
        }

        function encrypt($data)
        {
                $size = mcrypt_get_block_size($this->algorithm, $this->mode);
                $data = $this->pkcs5_pad($data, $size);
                return base64_encode(mcrypt_encrypt($this->algorithm, $this->key, $data, $this->mode, $this->iv));
        }

        function decrypt($data)
        {
                return $this->pkcs5_unpad(rtrim(mcrypt_decrypt($this->algorithm, $this->key, base64_decode($data), $this->mode, $this->iv)));
        }

        function pkcs5_pad($text, $blocksize)
        {
                $pad = $blocksize - (strlen($text) % $blocksize);
                return $text . str_repeat(chr($pad), $pad);
        }

        function pkcs5_unpad($text)
        {
                $pad = ord($text{strlen($text)-1});
                if ($pad > strlen($text)) return false;
                if (strspn($text, chr($pad), strlen($text) - $pad) != $pad) return false;
                return substr($text, 0, -1 * $pad);
        }
} 
```

**使用闪光灯**

```
// instance of crypto class
 private var _crypto : CryptoCode;
 public var myLoader : URLLoader;

// create instance with encryption key
 _crypto = new CryptoCode("PASSWORD");

// send crypted string to php script
 var variables : URLVariables = new URLVariables();
 variables.message = _crypto.encrypt(tosend_in.text);

// create request with POST method
 var request : URLRequest = new URLRequest("http://www.lecrabe.net/wordpress/demo/crypt/scripts/testcrypto.php");
 request.method = URLRequestMethod.POST;
 request.data = variables;

 // send request
 myLoader.load(request); 
```

**使用 PHP**

```
include_once "lib/cryptlib.php";

// init a new instance of Crypto Class
$crypto = new Crypt;

// init with the encryption key
$result = $crypto->init("PASSWORD");

// get the POST data
$messagefromflash = $_POST ["message"];

// decrypt data
$decrypted_messagefromflash = $crypto->decrypt(utf8_decode($messagefromflash)); 
```

# javascript - jQuery“change()”事件的反面是什么？

> ID：10471370
> 
> 赞同：2
> 
> 时间：2012-05-06T14:40:26.383
> 
> 标签：javascript, jquery, css

我正在尝试使用 jQuery 使输入字段在包含文本时具有不同的 CSS。但是当文本被删除时，我无法让它改回 CSS。

当输入字段中的文本被删除时，是否有任何 jQuery 或 Javascript 事件会执行某些操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:49:59.283

也许您只需要添加更多的 javascript 代码

```
var track = function() {

    if($(this).val().length){
        $(this).removeClass('empty').addClass('full');
    } else {
        $(this).removeClass('full').addClass('empty');            
    }
}

$('input').keyup(track);​ 
```

示例：

[http://jsfiddle.net/demee/63nz6/](http://jsfiddle.net/demee/63nz6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:43:02.497

`change()`删除文本时也会触发。
您只需要检查该值即可找出答案。

为了更直接的反应，您还应该处理`keyup`和`input`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:44:05.483

```
$("#elementID").on('change', function() {

    if (this.value=="")  {
        //no text is present
    }else{
        //element contains something
    }

}); 
```

`change`只会在某些事件上触发，例如模糊，考虑替换`change`为`keyup`使其更具动态性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T14:41:37.600

尝试这个

```
$("selector").change(function() {
  if($(this).val() == "") {
   // your code
  }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T14:43:55.180

```
$("#element").change(function(){
  if($(this).val() == "") {
    // do here
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T15:51:19.180

如果您检查 keyup 的长度，那么它将在用户键入时触发。

```
$(document).ready(function() {
    $('#text').keyup(function() {
        if($(this).val().length == 0) {
            $(this).removeClass('filled_in');
        } else {
            $(this).addClass('filled_in');
        }
    });
});​ 
```

[你可以在这个 jsFiddle](http://jsfiddle.net/WaqnU/)中看到它的作用。

# sql - sql 搜索是否适用于 SSMS 2008 R2

> ID：10471371
> 
> 赞同：2
> 
> 时间：2012-05-06T14:40:40.877
> 
> 标签：sql, redgate

我在 SSMS 2008 R2 中看不到 red gate sql 搜索[插件](http://www.red-gate.com/products/sql-development/sql-search/)。它应该显示在工具栏中，但它没有。我在 redgate 论坛上看到了一个应该解决这个问题的[版本](http://www.red-gate.com/messageboard/viewtopic.php?t=13676)，但是没有用。我尝试了修复安装。有没有人让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:31:17.240

它开箱即用。我在带有 SP1 (10.50.2500.0) 的 SSMS 2008 R2 下运行 SQL Search 1.1.6.1

# email - JavaMail，mac 上的 postfix - 读取超时，邮件命令行有效

> ID：10471373
> 
> 赞同：2
> 
> 时间：2012-05-06T14:40:51.750
> 
> 标签：email, timeout, jakarta-mail

我正在编写一个 spring mvc 应用程序并使用在我的 applicationContext.xml 中配置的 JavaMail。

我已经设置了 postfix 并让它在 mac os 上运行。

我可以使用邮件命令行程序通过后缀发送电子邮件。

但是，当我尝试通过 JavaMail 发送电子邮件时，出现读取超时异常。

尝试通过 telnet 发送电子邮件，如此处所述[http://www.rdpslides.com/webresources/FAQ00035_Send_Email_via_Telnet.htm](http://www.rdpslides.com/webresources/FAQ00035_Send_Email_via_Telnet.htm)但 smtp 根本没有响应。您可以输入命令，但最终什么都没有发生。

我不知道使用邮件命令行客户端有什么特别之处，但它工作正常。

即这有效（马特是我的本地用户名）：

```
$ date|mail -s testing matt 
```

应用程序上下文.xml：

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">

    <property name="host" value="localhost"/>
    <property name="port" value="25"/>
    <property name="protocol" value="smtp"/>
    <property name="javaMailProperties">
        <props>
            <prop key="mail.debug">true</prop>
            <prop key="mail.debug.auth">true</prop>
            <prop key="mail.smtp.timeout">2000</prop>
            <prop key="mail.smtp.connectiontimeout">2000</prop>
        </props>
    </property>
</bean> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:04:55.823

用“mail -v”试试你的命令行测试，看看它是否提供了任何线索。邮件命令可能是 fork/execing sendmail 所以它没有通过 locahost:25 连接。检查您的后缀配置；听起来您正在使用 telnet 连接，但读取超时，而不是连接超时，所以我不知道后缀可能在做什么。

# python - python: xml.etree.elementtree.ElementTtree.write() 声明标签

> ID：10471378
> 
> 赞同：18
> 
> 时间：2012-05-06T14:42:14.557
> 
> 标签：python, xml

我使用 xml.etree.elementtree.Element 创建了一个 XML 文档，并想使用 ElementTree.write() 函数打印它，但出现的声明标签是

```
<?xml version='1.0' encoding='UTF-8'?> 
```

虽然我需要用双引号。有没有办法改变它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-27T12:14:50.293

我有同样的问题，查看**ElementTree.py**的代码并看到以下内容。

对于根标签（单引号）：

```
 if method == "xml":
            write("<?xml version='1.0' encoding='%s'?>\n" % encoding) 
```

对于属性（双引号）：

```
write(" %s=\"%s\"" % (qnames[k], v)) 
```

它是这样硬编码的...

我将其（本地）更改为：

```
"<?xml version=\"1.0\" encoding=\"%s\"?>\n" 
```

所以现在每个属性都被双引号引起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:04:50.527

最终我使用了 tostring 函数并将 XML 附加到正确的标签，然后是 python file.write 函数。这很丑陋（而且我对文件的实际编码撒谎）但它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-24T17:30:46.283

我做了和bg1987一样的事情。这是我写的功能，以防对某人有用

```
def wrTmp(treeObject, filepath):
    xml_str = ('<?xml version="1.0" encoding="UTF-8"?>' + '\n' + xml.etree.ElementTree.tostring(treeObject.getroot(), method='xml'))
    with open(filepath, 'wb') as xml_file:
         xml_file.write(xml_str) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T17:27:52.507

我不得不做几乎相同的事情，除了相反的方式，由于各种 $workplace 工具中的黑客需要单引号，而 python`ElementTree.write`放在双引号中。（一些代码查找文字字符串`status='ok'`但无法识别`status="ok"`。是的，该代码被破坏了——实际上在几个方面——但我只需要解决它。）

幸运的是，“用户数据”单引号或双引号被编码为`&apos;`和`&quot;`（分别）。就我而言，我已经在使用`tostring`而不是`write`（出于其他原因），所以我有：

```
import xml.etree.ElementTree as ET
# [... mass snippage]
        text = ET.tostring(reply).replace('"', "'")
        # [... snippaage]
        self.wfile.write(text) 
```

（显然你会想要`replace("'", '"')`。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T14:28:00.133

另一种方法是（如果您还想漂亮地打印您的 xml）使用`minidom.toprettyxml(encoding="UTF-8")`将 xml 和编码声明放在双引号中：

```
from xml.dom import minidom
xmlDom = minidom.parse("my_file.xml")

prettyXML = xmlDom.toprettyxml(encoding="UTF-8")

myfile = open(fileName, mode="wb")
myfile.write(prettyXML)
myfile.close() 
```

# javascript - Array 上的 Javascript 长度结果不同

> ID：10471384
> 
> 赞同：2
> 
> 时间：2012-05-06T14:42:39.223
> 
> 标签：javascript, jquery, google-maps-api-3, markerclusterer

我目前正在使用 Google Maps API v3、jQuery 和 MarkerClusterer。

我注意到“长度”结果存在一个奇怪的问题。因此，我将向您展示我的注释代码：

文件 data.json 包含大约 1800 个对象。

```
function initialize() {

 $('#map_canvas').gmap({'zoom': 6, 'center': (new google.maps.LatLng(46.679594, 2.109375)), 'mapTypeId': google.maps.MapTypeId.ROADMAP, 'disableDefaultUI':true}).bind('init', function(evt, map) { 

    var mstime = new Date().getTime(); // to avoid caching

    var markerslist = new Array(); // This array will gets points informations

    $.getJSON('data.json?'+mstime, function(data) {

        for (var i = 0; i < data.markers.length; i++) {
            var val = data.markers[i];

            var t =  new Object();
            t.lat =  val.lat; 
            t.lng =  val.lng;
            t.name = val.label;
            markerslist.push(t); // pushing point info in markerslist
        }

    });

    alert(markerslist.length); // This first alert returns "0" !
    alert(markerslist.length); // This new return the right count (about 1800). Weird!

    for( var i = 0; i < markerslist.length; i++ ) { // To create markers on map
        $('#map_canvas').gmap('addMarker', { 
            'position': new google.maps.LatLng(markerslist[i].lat, markerslist[i].lng) 
        }).click(function() {
            $('#map_canvas').gmap('openInfoWindow', { content : 'Hello world!' }, this);
        });
    }

    $('#map_canvas').gmap('set', 'MarkerClusterer', new MarkerClusterer(map, $(this).gmap('get', 'markers')));

 });

} 
```

总而言之，这段代码至少可以与一个警报完美配合...如果删除两个警报，则此代码不起作用。

谢谢你的帮助，问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T14:45:05.420

`getJSON`调用是异步的。其结果是在调用回调之前调用之后的执行流程。您需要添加任何依赖于回调函数调用结果的代码，而不是将其放在调用`getJSON`.

注意：对于代码示例，我只是复制了您的代码并移动了它。既然您知道所有代码都需要在回调中，我相信您将能够对其进行优化以消除对临时数组的需求。

```
$.getJSON('data.json?'+mstime, function(data) {

    for (var i = 0; i < data.markers.length; i++) {
        var val = data.markers[i];

        var t =  new Object();
        t.lat =  val.lat; 
        t.lng =  val.lng;
        t.name = val.label;
        markerslist.push(t); // pushing point info in markerslist
    }

    alert(markerslist.length); // it will be correct here

    // now do the rest

    for( var i = 0; i < markerslist.length; i++ ) { // To create markers on map
        $('#map_canvas').gmap('addMarker', { 
           'position': new google.maps.LatLng(markerslist[i].lat, markerslist[i].lng) 
        }).click(function() {
           $('#map_canvas').gmap('openInfoWindow', { content : 'Hello world!' }, this);
        });
    }

    $('#map_canvas').gmap('set', 'MarkerClusterer', new MarkerClusterer(map, $(this).gmap('get', 'markers')));
}); // and finally close the callback 
```

# javascript - 为什么 window.location.href 没有在 IE 中显示哈希

> ID：10471386
> 
> 赞同：0
> 
> 时间：2012-05-06T14:42:40.467
> 
> 标签：javascript, hash

```
window.location.href = 'www.mysite.com/testpage/#12'; 
```

在 Chrome 和 Firefox 中，用户成功重定向到 www.mysite.com/testpage/#12，但是在 IE 中，用户在没有哈希的情况下被定向到 www.mysite.com/testpage/，如何强制浏览器读取哈希？

更新：

这是实际的代码：

```
window.location.href = siteurl+'?selection/'+edu_year_selectionreal+'/'+semester_selectionreal+'/'+subject_selectionreal+'#?selection/'+edu_year_selectionreal+'/'+semester_selectionreal+'/'+subject_selectionreal+'/'+edu_year_selectiontitle+'/'+semester_selectiontitle+'/'+subject_selectiontitle; 
```

在 IE 中，它从 (#?) 开始停止读取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:13:49.013

发现错误： `siteurl+'?selection/`应该`siteurl+'/?selection/`在 URL 的两部分之间有一个额外的“/”

# php - 如何将空数组和空对象转换为空字符串或null

> ID：10471387
> 
> 赞同：0
> 
> 时间：2012-05-06T14:42:41.017
> 
> 标签：php, arrays, php-5.3, string

如何将**空数组**转换为**空字符串**或`null`？

```
$empty_array = array();

var_dump($empty_array); 
```

结果，

```
array(0) { } 
```

同样对于下面的空对象，

```
class null_object{};
$null_object = new null_object();
var_dump($null_object); 
```

结果，

```
object(null_object)#4 (0) { } 
```

每当他们被发现是空的时，我就会追求`null`或只是类似的东西。`$empty_array = '';`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:47:02.477

那这个呢：

```
function convert($array) {
    return (count($array) === 0) ? "" : $array;
}

$empty_array = array();
$empty_array = convert($empty_array); 
```

如果数组为空，这将简单地将其转换为空字符串。

对象稍微复杂一些，但您可以只使用[get_object_vars()](http://php.net/get_object_vars)：

```
function convert($object) {
    return (count(get_object_vars($object)) === 0) ? "" : $object;
} 
```

注意：您不能检查私有变量上的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T02:12:15.630

用于`implode()`更简单的解决方案。

```
echo implode('',(array)$array_or_object); 
```

# iphone - 使用 UILongPressGestureRecognizer 和 UIBarButtonItem

> ID：10471390
> 
> 赞同：0
> 
> 时间：2012-05-06T14:42:58.980
> 
> 标签：iphone, ios, ipad, uigesturerecognizer, uibarbuttonitem

我希望我的导航栏中的一个按钮在长按上有不同的操作。如果它是一个普通按钮，我只需将手势识别器添加到它的视图中，但 BarButton 没有。

线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:51:35.257

在 UIBarButtonItem 项中添加子视图手势是一个痛苦的过程。我在下面的代码中向您展示。它可能会帮助你。

> > > 我想建议您，您可以自己创建按钮并添加带有自定义视图的按钮栏项目，而不是四处寻找子视图

`[[[yourToolbar subviews] objectAtIndex:[[yourToolbar items] indexOfObject:yourBarButton]] addGestureRecognizer:YourGesture];`

// 或者你也可以尝试关注....

```
[self.barButtonItem.customView addGestureRecognizer:longProcess];// i didn't declare longProcess and singletap GestureRecognizer here. I hope you can do that.
[self.barButtonItem.customView addGestureRecognizer:singletap]; 
```

希望对你有帮助..

# php - 使用php和mysql的搜索引擎，六个字段合二为一？

> ID：10471391
> 
> 赞同：0
> 
> 时间：2012-05-06T14:42:59.080
> 
> 标签：php, mysql, search-engine

我正在为我的网站制作搜索引擎。我有六个`select`字段：价格、门数、变速箱、燃料类型、发动机类型和二氧化碳排放量。

我想让搜索引擎的用户搜索得尽可能详细。所以，如果他只选择价格和变速箱，那么就必须搜索价格和变速箱等。如果他搜索价格，门数和发动机类型，那么必须搜索这三个参数。

所以我认为有 6^6 = 46 656 种不同的组合。这对于 if'ing 和 else'ing 来说太过分了..

如果用户没有选择任何内容，则该`select`字段的返回值为`"empty"`.

另外需要注意的是，价格**始终**是固定的（最小值为 0，最大值为 100 000）。

一定有一种方法可以将所有这些东西组合到一个查询中，对吧？这将使我的生活更轻松:)。

你能解释一下这样做的方法（如果真的有的话）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:48:50.537

6^6 = 46 656 我不认为，如果和其他情况，你会做那么多

假设您从 POST 获取搜索参数

```
$sql = "select * from table_name where 1=1";

if(isset($_POST['price']))
  $sql .= " AND price='".$_POST['price']."'";
if(isset($_POST['numdoors']))
  $sql .= " AND numdoors = '".$_POST['numdoors']."'";

//and so on...... 
```

所以你有 6`if`秒

# xcode - UIScrollView 中的 2 个 UITableViews

> ID：10471393
> 
> 赞同：1
> 
> 时间：2012-05-06T14:43:08.347
> 
> 标签：xcode, uiscrollview

下午好

我正在尝试创建一个包含 2 个表的滚动视图。下面发布的代码，这些表的创建没有问题，我在构建时将数据加载到它们中，但第二个表似乎工作，我无法滚动数据或选择一个单元格。有什么想法吗？？

谢谢

```
- (void)setupPage
{
scrollView.delegate = self;    
[self.scrollView setBackgroundColor:[UIColor grayColor]];
[scrollView setCanCancelContentTouches:NO];

scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
scrollView.clipsToBounds = YES;
scrollView.scrollEnabled = YES;
scrollView.pagingEnabled = YES;

int initialXPos = 0;
int initialYPos = 10;

int arraycounter=0;
CGFloat cx = 0;
int aWidth = 0;

for (int j=0; j<3; j++) 
{
    if (j == 0)
    {
        UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(initialXPos, initialYPos, 320, 250)];
        myView.backgroundColor = [UIColor redColor]; 

        UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(initialXPos, 0, 320, 250) style:UITableViewStylePlain];
        self.tableView = tableView;

        tableView.dataSource = self;
        tableView.tag = 1;        
        [tableView reloadData];

        [myView addSubview:tableView];
        [scrollView addSubview:myView];
    }

    if (j == 1)
    {
        UIView *myView1 = [[UIView alloc] initWithFrame:CGRectMake(initialXPos, initialYPos, 320, 250)];
        myView1.backgroundColor = [UIColor redColor]; 

        UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(initialXPos, 0, 320, 600) style:UITableViewStylePlain];
        self.tableView = tableView;

        tableView.dataSource = self;
        tableView.tag = 2;        
        [tableView reloadData];

        [myView1 addSubview:tableView];
        [scrollView addSubview:myView1];
    }

    initialXPos = initialXPos + 320 ;
    arraycounter=arraycounter+1;
    aWidth = aWidth + 320;
    cx += scrollView.frame.size.width;
}
cx = aWidth;
self.pageControl.numberOfPages = arraycounter;
[scrollView setContentSize:CGSizeMake(cx, [scrollView bounds].size.height)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:37:17.107

你应该这样做，

[scrollView addSubview:tableView1];

[scrollView addSubview:tableView2];

[myView addSubview:scrollView];

意味着在滚动视图中添加前两个表，然后将滚动视图添加到主视图中，我通过这种方式解决了这个问题。

# java - 使用 JFileChooser 将文件类型附加到 Java 中的文件

> ID：10471396
> 
> 赞同：9
> 
> 时间：2012-05-06T14:43:39.680
> 
> 标签：java, jfilechooser, file-type

我正在尝试使用 JFileChooser 保存图像。我只希望用户能够将图像保存为 jpg。但是，如果他们不键入 .jpg，则不会将其保存为图像。是否有可能以某种方式将“.jpg”附加到文件的末尾？

```
File file = chooser.getSelectedFile() + ".jpg"; 
```

不起作用，因为我正在向文件添加字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T14:54:08.757

完成后为什么不将其转换`File`为 a`String`并创建一个新`File`的？

```
File f = chooser.getSelectedFile();
String filePath = f.getAbsolutePath();
if(!filePath.endsWith(".jpg")) {
    f = new File(filePath + ".jpg");
} 
```

`.jpg`请记住，如果它已经存在，则无需添加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T14:59:40.170

如果您分两步执行此操作：将扩展名添加到选定文件，然后创建`File`附加扩展名的对象。

```
String withExtension = chooser.getSelectedFile().getAbsolutePath() + ".jpg";
File file = new File( withExtension ) 
```

暗示在您的问题中，但只是为了涵盖所有基础：需要首先检查扩展名是否已经存在，例如：

```
String withExtension = chooser.getSelectedFile().getAbsolutePath();
if( !withExtension.toLowerCase().endsWith( ".jpg" ) )
   withExtension += ".jpg"; 
```

[您可能想在`if`上面添加“.jpeg” - 它是 JPEG 文件的有效扩展名]

下面的代码可能有效，也可能无效。`File`有一个`toString()`可以编译的，但我宁愿使用上面的方法，在那里我可以控制我得到的确切路径名。我有点不清楚该对象的`toString()`文档`File`到底返回了什么。在这种情况下，我更喜欢调用一个我知道会返回我需要的函数。

```
File file = new File( chooser.getSelectedFile() + ".jpg" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:54:14.463

最好的方法是检查可接受的条目。如果找不到，请替换文件扩展名，而不是在上面写。

```
File f = chooser.getSelectedFile().getAbsolutePath();
String path = f.getAbsolutePath();
if (!path.matches(".*\\.(jpg|jpeg)")) {
    // If the extension isn't there. We need to replace it
    path = path.substring(0, path.lastIndexOf(".") + 1).concat("jpg");
    f = new File(path);
} 
```

# jquery - JQuery：为什么使用 .find()

> ID：10471398
> 
> 赞同：0
> 
> 时间：2012-05-06T14:43:50.357
> 
> 标签：jquery

为什么有些开发人员会像这样使用 JQuery 的 .find-function：

```
$(document).find('.progress').show(); 
```

如果您知道类的名称，则可以使用：

```
$('.progress').show(); 
```

即使我有 ul-lists 并且想要选择所有 li-children，我也可以这样做

```
$('li')... 
```

感谢一些清晰......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:45:44.523

的重点`.find()`是在父元素中查找元素。

没有任何意义`$(document).find(...)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:53:53.953

直接使用类会影响性能，因为它不会映射到本机 JS，`getElementbyID`例如`getElementbyTagName`

`find()`通常会更有效率（对于具有大量元素的页面）。

编辑：：

找到我记得的文章。#5 这里[http://dumitruglavan.com/jquery-performance-tips-cheat-sheet/](http://dumitruglavan.com/jquery-performance-tips-cheat-sheet/)

> 1.  使用 find() 而不是 context 实际上，.find() 函数似乎更快。但是当你有很多遍历一个包含很多 DOM 元素的页面时，这更重要：

```
var divs = $('.testdiv', '#pageBody'); // 2353 on Firebug 3.6

var divs = $('#pageBody').find('.testdiv'); // 2324 on Firebug 3.6 - The best time

var divs = $('#pageBody .testdiv'); // 2469 on Firebug 3.6 
```

# php - 如何在准备好的 SQL 语句中绑定参数？

> ID：10471405
> 
> 赞同：-1
> 
> 时间：2012-05-06T14:44:22.550
> 
> 标签：php, sql, prepared-statement

我想使用准备好的语句查询我的 MySQL 数据库。查询应如下所示：

```
SELECT name, idname FROM names WHERE origin='english' AND name like('%a%')" 
```

这个效果很好：

```
$origin = "english";
$stmt = $mysqli->prepare("SELECT name, idname FROM names WHERE origin=? AND name like('%a%')"))
$stmt->bind_param("s", $origin); 
```

但这根本不起作用（即使没有错误）：

```
$origin = "english";
$letter = "a";
$stmt = $mysqli->prepare("SELECT name, idname FROM names WHERE origin=? AND name like(%?%)")) 
$stmt->bind_param("ss", $origin, $letter); 
```

请注意最后一个学期`like`。我不知道如何绑定第二个参数`letter`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:49:23.030

使用语句将值传递给`LIKE`谓词`CONCAT`。

### 修正版：

```
$origin = "english";
$letter = "a";
$stmt = $mysqli->prepare("SELECT name, idname FROM names WHERE origin=? 
AND name LIKE CONCAT('%',?,'%')")) 
$stmt->bind_param("ss", $origin, $letter); 
```

# c# - 未提供存储过程参数错误

> ID：10471406
> 
> 赞同：1
> 
> 时间：2012-05-06T14:44:41.397
> 
> 标签：c#, sql-server, stored-procedures, parameters

我有一个 SQL Server 存储过程的问题。虽然我提供了参数，虽然参数不为空，但我得到了“未提供参数”错误

我的 C# 代码在这里：

```
staffInfo.DeleteCommand = "deleteStaff";
staffInfo.DeleteCommandType = SqlDataSourceCommandType.StoredProcedure;
staffInfo.DeleteParameters.Add("tcId", stafftc);
staffInfo.Delete(); 
```

存储过程：

```
ALTER PROCEDURE dbo.deleteStaff 
(
    @tcId varchar(11)
)
AS
BEGIN
    DECLARE @memId int;
SELECT @memId = staffId FROM staff WHERE TCid = @tcId;
DELETE FROM member WHERE memId = @memId;
END 
```

删除操作完美完成。但我还是得到了这个错误。你的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:00:30.913

如果删除操作成功，我可以想象这种情况发生的唯一方法（特别是因为您没有提供异常的详细信息）是可能有一个删除触发器正在调用另一个失败的存储过程。

# javascript - 如果前面的函数失败，如何防止 jQuery 函数不运行？

> ID：10471407
> 
> 赞同：0
> 
> 时间：2012-05-06T14:44:51.653
> 
> 标签：javascript, jquery

如果前面的函数失败，我会遇到 jQuery 函数无法运行的问题，例如：

```
jQuery(function($) {
    // this function failed to run because the dependency file wasn't loaded
});

jQuery(function($) {
    // fails to run unless all preceding function succeed
});

jQuery(function($) {
    // fails to run unless all preceding function succeed
}); 
```

我这样做是因为它们都是一小段代码，每一个都用于我网站上使用的 jquery 插件，因此一个用于滑块，另一个用于下拉菜单...，例如，如果一个没有滑块的页面我'没有加载滑块插件，因此滑块功能后的所有内容都无法运行。

那么我应该怎么做才能让 jquery 忽略失败的功能呢？

并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:46:28.267

使用`catch`块来捕获错误，或者`if`首先使用 s 来避免它。

# sql - 创建sql表的逻辑——

> ID：10471408
> 
> 赞同：0
> 
> 时间：2012-05-06T14:44:52.123
> 
> 标签：sql

什么时候创建几个 SQL 表而不是一个大表更好？（假设可以将所有数据存储在一个表中）

一张桌子比几张桌子的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:48:56.783

没有一般规则，它取决于您要存储的内容以及您想要/需要如何访问它。

您必须考虑用例以及您需要如何处理数据并相应地优化设计。

# php - 维护分类帐表中每一行的期初和期末余额

> ID：10471412
> 
> 赞同：0
> 
> 时间：2012-05-06T14:45:23.780
> 
> 标签：php, mysql, sql, accounting

我知道这个问题在这里有多种变体，但不是这种形式。My Ledger 表在基本形式中具有以下列。

```
TransactionID | DateOfEntrydate | TransactionDate | ClientID | TrIsDebit | OpeningBalance | Amount | ClosingBalance 
```

DateOfEntry 是存储事务插入时间的列。TransactionDate 仅存储可以手动输入的交易日期，许多交易可以具有相同的 TransactionDate 所以*我按 TransactionDate、DateOfEntrydate、TransactionID 的顺序对 ASC 进行排序*

我想维护每一行的先前和最终余额（插入、删除或编辑）。即使我知道这是不可取的，我仍在存储这些余额，因为我需要能够回顾性了解余额，即我能够知道我从日期 A 到日期 B 的交易以及每次交易后的期末余额总是给我最后期末余额。

插入当前日期的交易是可以的，并且可以通过检查该客户的最后一条记录并将其期末余额作为新的期初余额轻松完成。

我有一个问题是当我编辑、删除交易或插入新的“回溯”交易时。我如何知道在哪个位置插入和更新其下方行的余额？我知道单独使用 SQL 查询是不可能的。

这次我只想知道最好的方法来做到这一点。

许多人建议我应该在日期 A 之前使用金额的 SUM()（首先检查它是借方还是贷方）来获得日期 A 之前的期初余额，但这对于*可能非常大*的表来说是不可取的。（目前我正在这样做，但想将其更改为存储余额）

有什么建议吗？

更新我还想知道我是否使用 SUM()，在客户的每次交易后动态生成期初余额和期末余额的最佳方法是什么，而不是将其存储在表中以获取示例数据

```
TransactionID | DateOfEntrydate    | TransactionDate | ClientID | TrIsDebit | Amount
225           | 2012-05-06 18:20:10| 2012-03-01      | 360      | 0         |    100
219           | 2012-05-06 18:09:16| 2012-03-31      | 360      | 1         |   1000
224           | 2012-05-06 18:19:49| 2012-03-31      | 360      | 0         |    100
218           | 2012-05-06 18:08:09| 2012-04-30      | 360      | 1         |   1000
221           | 2012-05-06 18:17:55| 2012-04-30      | 360      | 1         |   1000
222           | 2012-05-06 18:18:58| 2012-04-30      | 360      | 0         |    500
220           | 2012-05-06 18:17:10| 2012-05-01      | 360      | 1         |   1000
223           | 2012-05-06 18:19:28| 2012-05-01      | 360      | 0         |    500 
```

显示为

```
TransactionID | DateOfEntrydate    | TransactionDate | ClientID | TrIsDebit | "dynamicOpeningBalance" | Amount | "dynamicClosingBalance"
225           | 2012-05-06 18:20:10| 2012-03-01      | 360      | 0         |      0                  |  100   |-100
219           | 2012-05-06 18:09:16| 2012-03-31      | 360      | 1         |   -100                  | 1000   | 900
224           | 2012-05-06 18:19:49| 2012-03-31      | 360      | 0         |    900                  |  100   | 800
218           | 2012-05-06 18:08:09| 2012-04-30      | 360      | 1         |    800                  | 1000   |1800
221           | 2012-05-06 18:17:55| 2012-04-30      | 360      | 1         |   1800                  | 1000   |2800
222           | 2012-05-06 18:18:58| 2012-04-30      | 360      | 0         |   2800                  |  500   |2300
220           | 2012-05-06 18:17:10| 2012-05-01      | 360      | 1         |   2300                  | 1000   |3300
223           | 2012-05-06 18:19:28| 2012-05-01      | 360      | 0         |   3300                  |  500   |2800 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:02:37.950

因此，即使交易可能从那时起已被删除或编辑，您也希望能够知道在任何给定时间的余额是多少？如果是这样，有几种可能的方法。

一种是保留一个单独的历史余额表，而不是将它们存储在同一个表中。该另一个表将存储日期和截至该日期的余额。当前余额可以在查询中计算。

另一种方法可能是保持原样。但是，在这种情况下，仅使用余额字段来维护历史余额。再次，可以在查询中计算当前余额。

另一种方法，如果你真的想避免在查询中使用 SUM() （虽然我不确定为什么），那就是在这个表中添加额外的字段来保持历史和当前的余额。然而，这种方法将仅限于单一的历史平衡。

此外，即使在大型表或数据库中，在查询中使用 SUM() 来获取当前余额也不应该是一个真正的问题，除非我在这里遗漏了一些东西。

如果我误解了你的问题，请告诉我。

# java - 将 Android 与 MySql Restful 数据库连接起来？

> ID：10471420
> 
> 赞同：0
> 
> 时间：2012-05-06T14:46:35.990
> 
> 标签：java, android, mysql, web-services, rest

我想将移动应用程序 (Android) 与 MySQL RESTful Web 服务连接以执行以下操作

1-将客户端用户（Android移动应用程序）的数据保存到MySQL Restful数据库
，即：-

a- 用户登录（用户名和密码）。

b- 手机的位置（经度和纬度）。

我已经创建了与 MySQL 数据库链接的 restful web 服务并创建了

数据库表中的属性（ID、用户名、密码、经度、纬度）

我想知道 1-如何将客户端（android 手机）与其余部分连接，以及 2-如何

用来自客户端的信息填充数据库？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:21:29.297

这个问题范围很广，并不是一个真正合适的问题，因为您需要离开并学习几种不同的技术，做出一些设计选择并选择一些工具。我会给你一些建议。

首先，您需要确定您的服务器环境，Tomcat 使用 Java Web 容器，因此可能是一个不错的选择，但这将取决于您托管的服务器。然后，您将需要编写一个程序，将其安装在服务器上，该程序将为您提供到 MySQL 数据库（您的 API）的 HTTP 接口。

如果您想要一些工作量很小的东西，请从 Grails（Groovy on rails）之类的东西开始。Grails 程序可以用（基于 Java 的动态语言）Groovy 编写，或者用 Java 编写，Groovy 非常容易学习。Grails 将从您的域对象（即转换为数据库中表的对象）为您构建一个框架，并为您提供可以通过 RESTful HTTP 调用访问的基本 CRUD 功能（一旦程序在实时服务器上运行）。因此可以使用 HTTP POST 方法从设备传递数据，grails 将负责处理数据并将其保存到数据库中，检索信息也是如此。

这应该给你一个基本的概述，我建议从下载 Tomcat 开始，并在你的机器上运行一个虚拟服务器。

[http://tomcat.apache.org/](http://tomcat.apache.org/)

并下载 Grails

[http://grails.org/](http://grails.org/)

并阅读书籍和教程。网上有很多你可以用谷歌搜索的，所以我不会在这里列出它们，但希望这能帮助你入门。祝你好运 ：）

# php - 如何插入 auto_increment

> ID：10471421
> 
> 赞同：3
> 
> 时间：2012-05-06T14:46:43.440
> 
> 标签：php, mysql

如果我有以下数据库

```
CREATE TABLE `my_table` (
  `year` text,
  `event` text
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `my_table` VALUES ('2011', 'john');
INSERT INTO `my_table` VALUES ('2011', 'dave');
INSERT INTO `my_table` VALUES ('2010', 'hany'); 
```

我的问题是如何添加`id` `auto_increment`以便它可以

```
INSERT INTO `my_table` VALUES (1, '2011', 'john');
INSERT INTO `my_table` VALUES (2, '2011', 'dave');
INSERT INTO `my_table` VALUES (3, '2010', 'hany'); 
```

我已经厌倦了这个但失败了

```
$q1 = "ALTER TABLE `my_table` ADD COLUMN `id` int(3) NOT NULL auto_increment";
mysql_query($q1) or die(mysql_error()." at row ".__LINE__); 
```

并给了我错误`Incorrect table definition`，所以如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T14:50:20.567

你应该先添加`COLUMN`然后`INDEX`然后`AUTO_INCREMENT`

```
ALTER TABLE  `my_table` ADD COLUMN `id` int(3) NOT NULL;
ALTER TABLE  `my_table` ADD PRIMARY KEY (`id`);
ALTER TABLE  `my_table` CHANGE  `id`  `id` INT( 3 ) NOT NULL AUTO_INCREMENT; 
```

或 2 个查询：

```
ALTER TABLE my_table ADD COLUMN `id` int (3) NOT NULL;
ALTER TABLE my_table ADD PRIMARY KEY `id`(`id`), CHANGE  `id`  `id` INT( 3 ) NOT NULL AUTO_INCREMENT; 
```

# c# - C# datagridview 每秒打印颜色

> ID：10471422
> 
> 赞同：0
> 
> 时间：2012-05-06T14:46:49.717
> 
> 标签：c#, datagridview

```
 excel = Workbook.Open("1.xls");
    sheeticerik = excel.Worksheets[0];
    for (int k = 0; k < sutun; k++)
        for (int i = 0; i < satir; i++)
        {
            string a = sheeticerik.Cells[i, k].StringValue;
            if (a.Contains("X"))
            {
                dataGridView1.Rows[x1].Cells[y1].Style.BackColor = System.Drawing.Color.Red;
                System.Threading.Thread.Sleep(1000);
                dataGridView1.Refresh();

            }
        } 
```

我想每秒打印颜色到datagridview。我写了这段代码。但它不起作用。因为程序loop.countX1000秒等待并立即打印颜色。不是连续打印。我该怎么办？

**解决方案[编辑]：**

- 将计时器控件添加到您的表单。（它在组件类别中）

- 将其 Interval 属性设置为 45000（该值表示毫秒）

- 在表单设计器中或在代码中的某处将计时器的 Enabled 属性设置为 True。

- 为定时器的 Tick 事件添加一个处理程序（你可以通过双击定时器来获得）

- 在 Tick 处理程序中，更新您的 dataGridView

```
private void timer1_Tick(object sender, EventArgs e)
{
    // Update DataGridView
} 
```

并使用，timer1.Start();...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:02:47.723

与其尝试在计时器上打印颜色，不如尝试在 DataGridView 的 Render() 事件期间打印颜色。您的屏幕闪烁也可能少得多。

# r - Common Lisp 的统计数据包

> ID：10471423
> 
> 赞同：15
> 
> 时间：2012-05-06T14:46:52.900
> 
> 标签：r, statistics, lisp, common-lisp

我一直在为 Common Lisp 寻找一些好的统计包，它应该既稳定又高效。有[lhstats](http://nostoc.stanford.edu/jeff/cllib/lhstats.lisp)，但它没有太多文档，目前也没有维护。那么在 Common Lisp 中进行统计编程的首选方式是什么（我正在使用 SBCL）？我正在寻找具有高级统计功能的软件包，例如 SEM（结构方程建模）、典型相关、GLM（一般线性模型）等，但即使是非常基本但稳定且记录良好的统计软件包也会很有用。从 Common Lisp 调用 R 统计函数也是一种选择。你有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T15:00:48.110

可能，你应该看看[common-lisp-stat](https://github.com/blindglobe/common-lisp-stat)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T02:48:01.947

The [GNU Scientific Library](http://www.gnu.org/software/gsl/) has statistics functions and is accessible from [GNU Scientific Library for Lisp](http://common-lisp.net/project/gsll/).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T17:14:56.923

我想我会选择 lhstat，它可能不再维护，但对于[common-lisp-stat](https://github.com/blindglobe/common-lisp-stat)来说也是如此（最后一次提交是 1 年），至少它可以通过 Quicklisp 获得。此外，也许这些软件包没有得到维护，因为它们足够好。

您还可以尝试[RCL](http://common-lisp.net/project/rcl/)一个 R 的 FFI 绑定，它也是可快速加载的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T17:55:06.953

我只知道它的名称，但请看这里[http://incanter.org/](http://incanter.org/)

它称自己为“基于 Clojure 的、类似 R 的统计计算和图形平台”。clojure 是 common lisp 的变体。

# c# - 将字符串拆分为字符串生成器，删除所有匹配模式的单词

> ID：10471428
> 
> 赞同：2
> 
> 时间：2012-05-06T14:47:41.233
> 
> 标签：c#, regex, string

我有一串用 . 分隔的单词`([ \\t{}():;.,،\"\n])`。如何将该字符串拆分为一段`StringBuilder`时间，删除与模式匹配的任何单词，`@"\d|\s|/|-"`并删除长度小于 2 个字符的所有单词。最后，我想将它存储回字符串。

```
Regex r = new Regex("([ \\t{}():;.,،\"\n])");

    String[] tokens = r.Split(sb.ToString());
    List<string> filter = new List<string>();
    for (int i = 0; i < tokens.Length; i++)
    {
        ........................
        {
            .....................
        }

    }

    ................

    return builder.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:09:59.560

代码对我来说看起来不错。正则表达式处理确实需要很长时间。也许尝试在顶部创建`@"\d\s|/|-"`为`Regex m = new Regex(`@"\d\s|/|-");` 以避免在每圈重新解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:23:00.307

我想出了这个。它与您的解决方案没有太大区别，只是我使用的是 LINQ 并完全避免使用 StringBuidler。你能接受吗？

```
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

class Program {
    static void Main(string[] args) {
        string value = "one or:another{3}";
        Regex exclude = new Regex(@"\d|\s|/|-", RegexOptions.Compiled);
        string final = string.Join(" ",
            (from s in Regex.Split(value, "([ \\t{}():;.,،\"\n])")
                where s.Length > 2 && !exclude.IsMatch(s)
                select s.Replace("ه‌","ه")).ToArray());

        // to get the List<string> instead:
        List<string> l = (from s in Regex.Split(value, "([ \\t{}():;.,،\"\n])")
            where s.Length > 2 && !exclude.IsMatch(s)
            select s.Replace("ه‌","ه")).ToList();
    }
} 
```

# .net - .NET SoundPlayer 或应用程序静音

> ID：10471436
> 
> 赞同：0
> 
> 时间：2012-05-06T14:49:20.077
> 
> 标签：.net, mute, soundplayer

有一个程序有几个类，每个类都包含 SoundPlayer 实例。如何使程序中的所有声音静音/取消静音？（在 CheckBox CheckedChanged 上，但这并不重要）

# c# - 在 Visual Studio/MSBuild 中运行程序集后处理的正确构建事件是什么

> ID：10471438
> 
> 赞同：0
> 
> 时间：2012-05-06T14:49:23.493
> 
> 标签：c#, visual-studio, assemblies, post-processing

我正在使用名为[AfterThought](https://github.com/vc3/Afterthought)的 PostSharp 替代方案对我的解决方案中的一些项目进行后处理。不幸的是，看起来项目的构建后事件命令行属性不是插入后处理器的正确扩展点，因为编译的程序集在构建后事件被触发和后处理器运行之前被复制到一些依赖项目中. 有趣的是，这个问题只发生在网站和 Web 服务项目上——依赖的类库得到了程序集的后处理版本，但我想问题的核心是构建后事件被调用得太晚了，我应该使用不同的事件。

所以我想我需要直接在 *.csproj 文件中增强我的项目的构建过程/MSBuild - 对吗？什么构建事件是调用命令行汇编后处理器的正确事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:06:41.213

那里有两个：

*   `<Target Name="AfterBuild"`将运行 MSBuild 命令
*   `<PropertyGroup><PostBuildEvent>`将运行 shell 命令，并且可以从 Visual Studio 的项目对话框中作为“构建事件”选项卡下的“构建后事件命令行”访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:08:48.107

我的问题的最终解决方案是 CompileDependsOn 目标：

```
 <Target Name="AfterThought">
    <Exec Command="&quot;$(SolutionDir)..\LIBS\Afterthought\Afterthought.Amender.exe&quot; &quot;@(IntermediateAssembly->'%(FullPath)')&quot; &quot;$(SolutionDir)..\Amendments\bin\$(Configuration)\Amendments.dll&quot; @(ReferencePath->'&quot;%(RootDir)%(Directory).&quot;', ' ')" />
  </Target>
  <PropertyGroup>
    <CompileDependsOn>
    $(CompileDependsOn);
    AfterThought;
   </CompileDependsOn>
  </PropertyGroup> 
```

# eclipse-plugin - XML 编辑器源代码在哪里

> ID：10471439
> 
> 赞同：3
> 
> 时间：2012-05-06T14:49:25.877
> 
> 标签：eclipse-plugin, xml-editor

我正在使用 Eclipse 哪个版本如下：

* * *

**面向 Web 开发人员的 Eclipse Java EE IDE。**

```
Version:   Indigo   Service   Release   1 
Build id:   20110916-0149 
```

* * *

它包括一个 XML 编辑器插件，我的问题是：XML 编辑器的源代码在哪里？
谁能给我一个获取 XML 编辑器源代码的 URL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T07:36:22.313

每当您对 Eclipse 中插件的来源有疑问时，您可以使用 Eclipse 中一个鲜为人知的隐藏功能，称为**Plugin Spy**。

将光标放在 Eclipse 中您感兴趣的任何内容上，然后点击`Alt`++ 。`Shift``F1`

对于 XML 编辑器，结果如下图所示。如您所见，插件是`org.eclipse.wst.xml.ui`，它甚至为您提供了以 ( `XMLMultiPageEditorPart`) 开头的类。

这里有一些关于查找和使用 Eclipse 源代码的更多详细信息：[http ://www.vogella.com/articles/EclipseCodeAccess/article.html#swt_spy](http://www.vogella.com/articles/EclipseCodeAccess/article.html#swt_spy)

![在此处输入图像描述](../Images/bd7e59ca9e22d8a5643a068a3bd62fca.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:53:17.533

由于对 CVS 的支持已经/将停止。您还可以使用 Git 访问源代码。

1.  对于 Git 访问，您需要一个用户帐户：[https ://dev.eclipse.org/site_login/createaccount.php](https://dev.eclipse.org/site_login/createaccount.php)
2.  您需要正确的 URL 来“克隆”存储库： http: [//git.eclipse.org/gitroot/sourceediting/webtools.sourceediting.git](http://git.eclipse.org/gitroot/sourceediting/webtools.sourceediting.git)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:01:23.987

最好的办法是查看源代码。它在此处的 cvs 存储库中可用：

```
:pserver:anonymous@dev.eclipse.org:/cvsroot/webtools 
```

在`/sourceediting/plugins/`目录中，检查以下插件：

1.  org.eclipse.wst.xml.ui
2.  org.eclipse.wst.xml.core
3.  org.eclipse.wst.sse.core
4.  org.eclipse.wst.sse.ui

前两个包含特定于 xml 支持的代码，后两个项目包含通用结构化文本编辑代码。

# c++ - 用于库编译的 C/C++ 约定/工具链

> ID：10471441
> 
> 赞同：2
> 
> 时间：2012-05-06T14:49:55.607
> 
> 标签：c++, compilation

**我对 C/C++ 的基本问题在于库编译领域。**例如，软件 A 使用库 Z，因此您必须先编译库 Z，然后才能编译并随后使用和/或开发软件 A。

在许多情况下，存在配置项目然后调用 make + make install 的概念。例如，您打开命令行并输入：

```
./configure
make
make install 
```

`./configure`是放置在项目顶层目录中的shell脚本。我想它会检查系统上是否存在所有依赖项并保存这些依赖项的路径。稍后，make 可以利用这些收集到的信息为编译器提供相应的包含路径和库位置（例如 .so/.a 文件的位置）。

`make`负责以正确的顺序编译和链接源文件（由 makefile 指定，由 I-dont-know 生成并具有 XYZ 格式）。当然，它本身并不编译/链接任何东西，而是调用实际的编译器和链接器来完成它的工作。

`make install`获取生成的二进制文件并将它们放在系统中的某个位置（例如 /usr/lib 如果项目是库或 /usr/bin 用于可执行文件）。如果手头的项目是一个库，它应该也会获取库的头文件并将它们安装在系统的某个位置。

这是一个相对复杂的过程；让我们用 CMI 来表示这种类型的编译过程（CMI = configure-make-install）。此外，据我所知，CMI 概念是特定于 Linux 世界的。它在 Windows 上不像那样工作，例如因为没有可用于执行 ./configure 的 shell。make 甚至可能仅限于 gcc/g++，但我不知道是不是这样。

最重要的是，我什至不知道在哪里查找。我也想看看CMI概念是否支持同时安装不同版本的库。假设您是软件 B 和软件 C 的开发人员。软件 B 和 C 都依赖于库 Y，但无论出于何种原因，B 需要 Y 1.0.x 而 C 需要 1.1.x。如果 make install 将库的头文件放在系统的某个地方，会不会发生冲突？再次，我问我自己，我在哪里可以找到它？

* * *

让我们讨论一个示例库：[libzip](http://nih.at/libzip/index.html)。主页没有说明支持或推荐哪些编译器或平台。你现在将如何进行？

有趣的是，该页面声称 MySQL Workbench 正在使用 libzip。MySQL Workbench 也为 Windows 提供，所以我想 libzip 可以在 Windows 上编译。

我还观察到 libzip 附带了一个**CMakeLists.txt** *和*一个**配置**脚本。甚至还有一个**libzip.pc.in** CMake 模板，据说是用于**pkg-config**工具的。还有 Makefile.am - 不管是什么 - 和 Makefile.in，据说是另一个 CMake 模板。最后但并非最不重要的一点是，我注意到文件夹 m4 和 .m4 文件（都在 m4 文件夹和项目的根文件夹中）。但我们不要忘记 cmake-config.h.in、cmake-zipconf.h.in。

因此，如果要编译 libzip，则必须考虑以下替代方案：

*   使用 CMI 概念
    *   不适用于 Windows（对吗？）
*   使用 CMake，这是一个元构建系统
    *   那么您必须决定应该为哪些编译器/IDE CMake 生成：gcc？微软？Mingw 还是 QTSDK/MingW？（无论有什么区别）
*   也许使用 M4，不管那是什么

M4 似乎与 GNU autoconf 有关。我想我也可以将其添加到上面的列表中。

（旁注：到目前为止，我已经尝试使用 CMake + Visual Studio 2010 的组合来编译 libzip。目前我正在修复各种编译错误。）

* * *

**这是我的中心观察：**

libzip 是一个简单的库；只是一些拉链的东西。然而，编译涉及的工具太多，即使对于高级程序员来说，这也是一项不可能完成的任务。

此外，大多数这些工具的文档都缺乏（否则为什么我有所有这些问题，不知道在哪里可以找到答案？）。更不用说大多数工具甚至在不投入大量时间进行逆向工程来修复（例如，有缺陷的 CMake FindPackage-scripts sigh ）的情况下都无法*工作*。

* * *

我可以这样持续数周。我迷失在众多的编译概念中，所有这些概念如何*相互关联*，它们可以很好地使用哪些平台和编译器等等。

另一个例子：RetroShare。尽管 Windows 的编译过程[有文档记录](http://retroshare.sourceforge.net/wiki/index.php/Win32Compile)，但要完成编译是极其困难的。只需考虑在 Windows 上编译 RetroShare 涉及 QtSDK/MingW、Cygwin 和 MingW/MSYS，它们都用于不同的部分/依赖项。这些工具如何协同工作？

我完全迷失了，我想让你告诉我你是如何处理这类问题的，以及考虑到所有这些工具/工具链/编译器/平台，你如何保护你的思想免受严重损害。

***你们是非常聪明还是我非常愚蠢？为什么这如此复杂（或者不是）？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:23:03.017

> “我可以这样持续数周。”

你确实听起来*有点*困惑。我会讲几个具体的点。

“configure-make-install”过程特别使用了`make`，这是一个更通用的工具。即，make 和makefile 可以以其他方式使用。记在脑子里。

> “make 负责以正确的顺序编译和链接源文件（由 makefile 指定，由 I-dont-know 生成并具有 XYZ 格式）。”

迟早，您几乎肯定会不得不自己学习编写 makefile。Make 是一个构建系统，对于 C/C++ 程序员来说，它是一个非常有用的、近乎强制性的工具。如果您使用 IDE，它可能已经在为您创建 makefile。这是一个为一个小项目手工编写的 makefile 示例：

```
wx = `wx-config --cxxflags --libs`

test1: main.cpp main.h window.o
        g++ -Wall -g main.cpp window.o -o test1 $(wx)

window.o: window.cpp window.h
        g++ -Wall -g -c window.cpp -o window.o $(wx) 
```

第一行定义了一个变量，链接器的一些标志，之后使用了两次。如果您在命令行上使用 gcc，接下来的两位应该很熟悉。要在没有 的情况下构建此项目`make`，您将首先编译 window.o `g++ ...`，然后再编译`test1`。有了makefile，你所要做的就是运行`make`。向项目中添加更多对象 (.o) 文件，它开始看起来非常方便。此外，您可以将不同的“**目标**”写入一个 makefile。周围有各种制作教程，以及 GNU 版本的官方文档：

[http://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)

不难弄清楚。

> “make install 获取生成的二进制文件并将它们放在系统中的某个位置”

`make install`是在 configure-make-install 上下文中使用的 makefile 中通常定义为执行此操作的**目标。**你可以在上面的 makefile 中添加这样的东西：

```
install: test1
    cp test1 /usr/local/bin/ 
```

冒号后与目标位于同一行的任何内容都是先决条件——它指的是必须存在于构建树中的文件（或必须运行的另一个目标指令）。如果文件不存在（或者如果它的一些先决条件在构建后发生了变化）并且有一个同名的目标（在这种情况下，`test1`-- 也请查看之前的 prereqs）然后运行该目标指令第一的。

> “此外，据我所知，CMI 概念是特定于 Linux 世界的。”

不，但它对 windows 世界有点陌生。这有时与**autotools**相关，可用于生成配置脚本和相应的 makefile。请注意，如果您安装了**mingw** ，则可以在 Windows 上使用 CMI 包。

> “使用 CMake，这是一种元构建系统”

CMake 本质上与 make 相同，只是不同。 `make`仅当在 makefile 中显式调用 gcc 时才使用它；可以编写 makefile 来执行 shell 脚本可以执行的任何操作，包括运行编译器等。CMake 渴望更加便携/平台无关，并且可能对用户友好。有些人更喜欢它。

> “如果 make install 将库的头文件放在系统的某个位置，会不会发生冲突？”

理想情况下，没有。自动工具（“CMI”）设置的部分要点是允许打包程序实施机制来处理此类问题（如果存在）。您可以安装同一个库的多个版本。WRT 标头，如果这些更改，它们（希望）保持向后兼容，库本身也是如此。如果没有，应该有一些明确的指示（“版本 2 与版本 1 不兼容！”），当这种情况发生时，任何有头脑的人都会从一开始就有版本 2 的不同标头，并在 API 中引用该标头.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T13:33:52.347

了解使用什么也可能会有所帮助：[http ://www.elpauer.org/stuff/learning_cmake.pdf](http://www.elpauer.org/stuff/learning_cmake.pdf)

# android - 如何知道手机或设备是否支持 USB 附件模式的硬件？

> ID：10471446
> 
> 赞同：1
> 
> 时间：2012-05-06T14:50:35.567
> 
> 标签：android

我正在尝试使用 Android Open Accessory Development Kit 构建一个将 android 与 arduino 连接的项目但我发现我可以将此平台与具有 USB 附件模式硬件支持的 android 设备一起使用。我的问题是如何知道我的手机还是设备是否支持 USB 附件模式的硬件？提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:32:39.217

新的 Android 设备（带有 ICS）确实支持附件模式。但是，不幸的是，无法知道比较旧的是否具有此功能。最好使用附件（如果可能）尝试该设备。附件模式是在内核级别配置的，内核版本至少应为 2.6 及更高版本...但仍然可能有一些自定义 ROM 未编译内核以包含此功能...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:31:48.197

在开发者文档中，USB 主机模式是在 Android 3.1 及更高版本中添加的。

您可以使用 uses-feature manifest 标签过滤支持 USB 主机的设备

```
<uses-feature android:name="android.hardware.usb.host" /> 
```

一切都在这里解释

[http://developer.android.com/guide/topics/usb/host.html](http://developer.android.com/guide/topics/usb/host.html)

# css - Jquery Cycle 插件旋转 youtube 视频无法在 Safari 中正确显示

> ID：10471447
> 
> 赞同：0
> 
> 时间：2012-05-06T14:51:11.477
> 
> 标签：css, overflow, jquery-cycle, safari

我有一个旋转 youtube 视频的 Jquery Cycle 插件，但它在 Safari 桌面上显示不正确。我已经在 IE、FF、Chrome 和移动 Safari 上进行了测试，没有任何问题。

似乎 overflow:hidden/auto 属性不起作用。查看 Safari 中的链接：http://www.tweedstudios.com/! [/broadcast3.php](http://www.tweedstudios.com/!/broadcast3.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:41:20.547

将此添加到 iframe 的 URL 的末尾：

&wmode=不透明

`http://www.youtube.com/embed/Kx3xVE2tU6c?rel=0&autoplay=0&controls=1&wmode=opaque`

# jquery - Jquery selectMenu 创建换行符（不能让它显示内联）

> ID：10471449
> 
> 赞同：0
> 
> 时间：2012-05-06T14:51:14.007
> 
> 标签：jquery, html, select-menu

我有一些选择元素：

```
<div id="divReports">
<select id="ddlReportTypes" style="width:200px;"></select>
<select id="ddlReportFarms" style="width:200px;"></select> 
<select id="ddlReportClusters" style="width:200px;"></select>
</div> 
```

他们表现得很好，在同一行

当我将它们变成这样的 selectMenus 时：

```
$("#divReports select").selectmenu({
style: 'dropdown',
transferClasses: true
}); 
```

他们拒绝 inline ，每个都占据一整行，这是在萤火虫上看到的 html：

```
<select id="ddlReportTypes" style="width: 200px; display: none;">
<a id="ddlReportTypes-button" class="ui-selectmenu ui-widget ui-state-default      ui-selectmenu-dropdown ui-corner-all" aria-owns="ddlReportTypes-menu" aria-haspopup="true" href="#" role="button" style="width: 200px;">
<span class="ui-selectmenu-status">Traffic variance report </span>
<span class="ui-selectmenu-icon ui-icon ui-icon-triangle-1-s"></span>
</a>

<select id="ddlReportFarms" style="width: 200px; display: none;">
<a id="ddlReportFarms-button" class="ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown" aria-owns="ddlReportFarms-menu" aria-haspopup="true" href="#" role="button" style="width: 200px; display: block;">

<select id="ddlReportClusters" style="width: 200px; display: none;">
<a id="ddlReportClusters-button" class="ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown" aria-owns="ddlReportClusters-menu" aria-haspopup="true" href="#" role="button" style="width: 200px; display: block;"> 
```

我试过 style="display:inline"，不起作用..我已经制作了标签 display:inline，但这只会让它变得更糟..

有什么想法吗？10倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:08:58.180

我检查了一下，看起来 jQuery UI 向新创建的元素添加了“显示：块”：

```
.ui-selectmenu {
    display: block;
} 
```

解决方案是覆盖它，但是 display: inline 没有帮助，我们需要类似 inline-block 的东西，最好是跨浏览器：

```
.ui-selectmenu {
  display:-moz-inline-stack;
  display:inline-block;
  zoom:1;
  *display:inline; /* To make IE7 happy */ 
} ​​​​​​​ 
```

这里的例子：http: [//jsfiddle.net/demee/YJVhG/2/](http://jsfiddle.net/demee/YJVhG/2/)

# java - 传统字符编码

> ID：10471454
> 
> 赞同：3
> 
> 时间：2012-05-06T14:52:06.043
> 
> 标签：java, character-encoding, legacy, legacy-code

我正在搞乱九十年代初编写的旧 Java 游戏的源代码。如果我没记错的话，它是为 JDK 1.1 编写的。

在代码中的某处，int 原语（在 0 到大约 120 的范围内）被转换为字符。这是一个例子：

```
char c = (char)(i+32); 
```

这会导致大于 95 的整数出现问题。这是测试用例的代码和一些输出：

```
for(int i = 120; i >= 0; i--)
   System.out.println(i + " -> " + (char)(i+32)); 
```

输出：

```
...
100 -> ?
99 -> ?
98 -> ?
97 -> ?
96 -> ?
95 -> 
94 -> ~
93 -> }
92 -> |
91 -> {
90 -> z
89 -> y
88 -> x
87 -> w
...
3 -> #
2 -> "
1 -> !
0 -> 
```

由于索引超出了正常字符值的范围，因此整数值似乎丢失了。

这似乎是游戏 UI 的客户端部分出现错误的根本原因。这个编码的整数被发送回客户端，然后客户端执行逆运算（从 char 中减去 32 并强制转换以获取 int 返回）。

似乎是'？由客户端处理模块按字面意思表示，因为该条被“？”的映射整数值冗余填充。直到服务器开始发回小于 95 的值。

1.  作者的平台上可能使用了哪些字符编码？
2.  我的平台上到底发生了什么不同的事情？
3.  在您看来，解决这个问题最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:01:01.030

> 由于索引超出了正常字符值的范围，因此整数值似乎丢失了。

好吧，它并没有真正“丢失”——它只是进入了[一系列控制字符](http://www.unicode.org/charts/PDF/U0080.pdf)。

> 作者的平台上可能使用了哪些字符编码？

我不相信这是任何平台上的“正常”编码。

> 我的平台上到底发生了什么不同的事情？

目前尚不清楚您*预期*会发生什么，但这些字符无法由您的控制台显示，因此它将它们翻译成“？”

> 在您看来，解决这个问题最简单的方法是什么？

您必须首先根据您*想要*发生的事情来更好地定义问题，以获得解决方案。目前尚不清楚这是否真的是一个主机游戏或其他什么，或者你想要发生什么。

首先明确你*想要*的行为是什么，然后很容易实现它——我怀疑问题可能是你（还没有）非常清楚最终结果应该是什么. 通常，只需非常具体地定义这一点就足以让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:16:45.790

> 在您看来，解决这个问题最简单的方法是什么？

首先，您必须了解应用程序实际*尝试*输出的内容；即那些整数值的真正含义。这将决定将它们呈现为（我猜）可打印字符的要求。

如果您只是试图将整数呈现为可打印的东西，那么您可以使用实现为字符数组的查找表来完成；例如

```
char[] map = new char[128];  // ... or whatever the limit is 
for (int i = 0; i < 96; i++) {
    map[i] = (char) (i + 32);
}
// fill the rest of the array with suitable Unicode characters.
map[96] = ...
map[97] = ... 
```

然后像这样映射字符：

```
char c = (i >= 0 && i < 128) ? map[i] : '?'; // ... or throw an exception. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:21:56.107

`char`在 Java 中是 16 位 Unicode 字符。旧代码可能希望将 int 值视为字节，然后您可以将字节转换为指定不同字符集的字符，直到您得到一个有意义的字符集（即`new String(byteArrayData, "ASCII")`）。

您需要考虑的是字节是用 Java 签名的，因此范围是 -128->+127。如果您的旧游戏代码希望使用扩展 ascii 集中的值 (> 127)，那么您需要从任何 int > 127 中减去 256 以获得正确的字节值。请参阅：[Java 如何将 int 转换为 byte？](https://stackoverflow.com/questions/842817/how-conversion-of-int-to-byte-happens-in-java)更多细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:24:34.490

可能是使用了 Win1252 等 8 位编码，其可见字符在 80-9F 范围内。

请参阅[http://en.wikipedia.org/wiki/Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)

# javascript - javascript退出for循环而不返回

> ID：10471456
> 
> 赞同：47
> 
> 时间：2012-05-06T14:52:10.543
> 
> 标签：javascript, for-loop

我有一个 for 循环，我想像这样退出：

```
function MyFunction() {
  for (var i = 0; i < SomeCondition; i++) {
     if (i === SomeOtherCondition) {
        // Do some work here.
        return false;
     }
  }
  // Execute the following code after breaking out of the for loop above.
  SomeOtherFunction();
} 
```

问题是`// Do some work here.`语句执行后，我想退出 for 循环，但仍想执行整个 for 循环下面的代码（下面的所有内容`// Execute the following code after breaking out of the for loop above.`）。

该`return false`语句确实退出了 for 循环，但它也退出了整个函数。我该如何解决？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-06T14:53:44.033

您正在寻找[`break`声明](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/break)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-06T14:57:55.563

使用 break 或 continue 语句

```
function MyFunction() { 
  for (var i = 0; i < SomeCondition; i++) { 

     if (i === SomeOtherCondition) { 

        // Do some work here 
        break;
     } 
  } 

  SomeOtherFunction(); 
  SomeOtherFunction2(); 
} 
```

或继续处理除条件之外的项目

```
function MyFunction() { 
  for (var i = 0; i < SomeCondition; i++) { 

     if (i != SomeOtherCondition) continue;

     // Do some work here 
  } 

  SomeOtherFunction(); 
  SomeOtherFunction2(); 
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-06T17:54:31.407

有几个人提供`break`了解决方案，这确实是该问题的最佳答案。

但是，为了完整起见，我觉得我还应该补充一点，通过将条件的内容包装在闭包函数中，可以在保留`return`语句的同时回答问题：`if()`

```
function MyFunction() {

  for (var i = 0; i < SomeCondition; i++) {

     if (i === SomeOtherCondition) {
        function() {
           // Do some work here
           return false;
        }();
     }
  }

  SomeOtherFunction();
  SomeOtherFunction2();
} 
```

正如我所说，`break`在这种情况下可能是一个更好的解决方案，因为它是问题的直接答案，并且闭包确实引入了一些额外的因素（例如更改 的值`this`、限制函数内部引入的变量的范围等）。但它值得作为解决方案提供，因为它是一种值得学习的技术，如果不一定要在这个特定场合使用，那么肯定会在未来使用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-06T14:57:53.247

Break - 打破整个循环。继续 - 跳过循环中的一个步骤。所以它跳过下面的代码继续；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T15:18:03.357

将 i 变量设置为 somecondition 值是一个好方法吗？

```
for (var i=0; i<SomeCondition; i++) {

   if (data[i]===true) {
   //do stuff
   i=SomeCondition;
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-10T10:59:36.210

好吧，也许这是一个老话题，但是在阅读了所有答案之后，我想知道为什么没有人建议使用 while 循环来代替？

我想在 JavaScript 中你可以打破一个 for 循环（你不能在许多其他语言中这样做，或者被认为是一种不好的做法），但我仍然会只在你想要迭代循环固定数量的情况下使用 for 循环次。

这将是我的建议：

```
function MyFunction() {

  var i = 0,
      breakLoop = false;

  while (i < SomeCondition && !breakLoop) {

     if (i === SomeOtherCondition) {
        breakLoop = true;
     }

     i++;

  }

  SomeOtherFunction();
  SomeOtherFunction2();

} 
```

# node.js - 是否可以用 C（不是 C++）编写 node.js 扩展？

> ID：10471459
> 
> 赞同：21
> 
> 时间：2012-05-06T14:52:36.597
> 
> 标签：node.js, c, node.js-addon

一个快速的谷歌搜索产生了至少一个为 node.js 编写[C++“Hello World”](http://lupomontero.com/writing-node-js-modules-in-cpp/)的教程，但目前还不清楚是否可以只使用 C 来编写这样的扩展。假设有可能，我会面临哪些挑战/限制？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T15:10:20.190

如果您愿意，您可以用 C 编写部分扩展，但您至少需要一小部分 C++ 代码来将您的 C 代码与 Node.js 粘合在一起。

正如您将在 HelloWorld 中看到的那样，扩展依赖于`v8.h`和`node.h`标头，它们具有 Node 期望的所有类。没有这些，您将无法正确创建 JS 对象以导出回 Node。

也就是说，您可以很容易地编写一小组只调用 C 函数的 C++ 函数，并包装某种 C 结构。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T14:29:05.007

在黑客新闻上找到了这个：

[https://github.com/wesolows/v8plus](https://github.com/wesolows/v8plus)

> v8+：节点插件 C++ 到 C 边界
> 
> 这一层提供了一种用 C 语言编写至少简单的 Node 插件的方法，而无需使用所有可怕的 C++ goop。那个 goop 仍然存在，但你不必写它。更重要的是，您可以在一个健全的编程环境中编写您的模块，避免令人困惑和容易出错的 C++ 语义。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-06T05:09:39.337

现在我们至少有 3 个不错的选择：

**node-ffi：** Node.js 外部函数接口
插件，用于使用纯 JavaScript 加载和调用动态库。它可用于创建与本机库的绑定，而无需编写任何 C 代码
[https://github.com/node-ffi/node-ffi](https://github.com/node-ffi/node-ffi)

**SWIG：**简化的包装器和接口生成器
（它为多种语言生成包装器，一次解决了许多问题）
[http://www.swig.org/](http://www.swig.org/)

**emscripten 将**
C 和 C++ 编译成高度可优化的 JavaScript，即使在 Web 上也能以接近本机的速度运行，无需插件。
[http://kripken.github.io/emscripten-site/](http://kripken.github.io/emscripten-site/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-29T01:25:43.507

需要使用 extern "C" 语法在 C++ 代码中声明单个 C 函数

例子：

```
#define BUILDING_NODE_EXTENSION
#include <node.h>

extern "C" void f(int i, char c, float x);

using namespace v8; 
```

如果您有多个 C 函数，则可以通过大括号对其进行分组：

```
extern "C" {
  void   f(int i, char c, float x);
  int    g(char* s, char const* s2);
  double sqrtOfSumOfSquares(double a, double b);
} 
```

然后从 C++ 函数调用该函数：

```
Handle<Value> MyFunction(const Arguments& args) {
  HandleScope scope;
   f(7, 'x', 3.14);    // <--- 
  return scope.Close(String::New("Hello"));
}

Handle<Value> CreateFunction(const Arguments& args) {
  HandleScope scope;

  Local<FunctionTemplate> tpl = FunctionTemplate::New(MyFunction);
  Local<Function> fn = tpl->GetFunction();
  fn->SetName(String::NewSymbol("theFunction")); // omit this to make it anonymous

  return scope.Close(fn);
}

void Init(Handle<Object> target) {
  target->Set(String::NewSymbol("createFunction"),
      FunctionTemplate::New(CreateFunction)->GetFunction());
}

NODE_MODULE(addon, Init) 
```

注意：使用来自[Nodejs Addons的示例代码](http://nodejs.org/api/addons.html#addons_function_factory)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-25T06:32:26.693

如果您的模块使用 libuv，您可以将其链接到节点可执行文件。它将 libuv 函数导出为共享库。

然后你可以使用 node-ffi 与之交互（这里不需要 C++ 知识）。

这是我在 Windows 上使用 MSVS 的方法：

*   在 MSVS 中创建新的 DLL 解决方案
*   下载[libuv](http://dist.libuv.org/dist/)并将 include 和 lib 文件复制到 MSVS
*   下载[node.lib](https://nodejs.org/dist/)文件，放到MSVS的lib文件夹下
*   编译下面的示例源代码，将计时器添加到主事件循环

测试库.c：

```
#include <stdio.h>
#include <stdlib.h>
#include "uv.h"

void (*p_callback)(int number, char *text);

void timer_cb1 (uv_timer_t* timer, int status) {
  printf("libuv timer here\n", status);
  p_callback(123, "it worked!");
}

void set_timer (int interval, void *pfunction) {
  uv_loop_t *loop;
  uv_timer_t *timer1;

  printf("set_timer called. interval=%d callback=%p\n", interval, pfunction);

  p_callback = pfunction;

  printf("uv_version_string = %s\n", uv_version_string());

  loop = uv_default_loop();
  if (loop == 0) {
    puts("could not get the reference to the default loop");
    return;
  }

  puts("got the default loop. now allocating the timer struct");

  timer1 = (uv_timer_t *) malloc(sizeof(uv_timer_t));
  if (timer1 == 0) {
    puts("malloc failed");
    return;
  }

  puts("initializing timer");
  uv_timer_init(loop, timer1);

  puts("starting timer");
  uv_timer_start(timer1, (uv_timer_cb) &timer_cb1, interval, interval);

  puts("timer created. returning");

} 
```

使用 testlib.def：

```
EXPORTS set_timer 
```

并记得链接到 node.lib

*   将创建的 dll 移动到测试文件夹并在那里运行这些命令：

`npm install ffi` （目前需要构建工具。检查说明）

`node test-lib.js`

test-lib.js 在这里：

```
var ffi = require('ffi');

var testlib = ffi.Library('testlib', {
  'set_timer': [ 'void', [ 'int', 'pointer' ] ]
});

var callback = ffi.Callback('void', ['int', 'string'],
  function(number, text) {
    console.log("javascript callback here!!!  number=" + number + "  text=" + text);
  }
);

console.log('registering the callback...');
testlib.set_timer(500, callback);
console.log('done') 
```

动用你的想象力。我们在 libuv 中有网络、工作线程和其他选项...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-06T15:10:31.400

直接与 node.js 交互的代码需要用 C++ 编写。

您*可以*`extern "C"`使用不透明类型为 node.h 和 v8.h 所需的所有内容编写包装器[，](https://github.com/joyent/node/blob/master/src/node.h)但[只](https://github.com/joyent/node/blob/master/deps/v8/include/v8.h)使用C++ 可能更容易（当然，它可以调用 C 代码）。

# javascript - Django-Chartit 'source' 必须是 QuerySet、Model 或 Manager

> ID：10471465
> 
> 赞同：4
> 
> 时间：2012-05-06T14:53:56.977
> 
> 标签：javascript, python, django, highcharts

我正在使用[Django-Chartit](http://chartit.shutupandship.com/)创建图表。
试图遵循[这个](http://chartit.shutupandship.com/docs/#how-to-use)例子。
我的问题是我想使用不是来自模型的数据所以我尝试了这段代码

```
data = \
    DataPool(
       series=
        [{'options': {
           'source': [1,2,3,4,5,6,7,8,9,10]},
          'terms': [
            'month',
            'houston_temp',
            'boston_temp']}
         ])
chart = Chart(
        datasource = data,
        series_options =
          [{'options':{
              'type': 'line',
              'stacking': False},
            'terms':{
              'month': [
                'boston_temp',
                'houston_temp']
              }}],
        chart_options =
          {'title': {'text': 'Weather Data of Boston and Houston'},
           'xAxis': {'title': {'text': 'Month number'}
                     }}) 
```

我收到一条错误消息

> 'source' 必须是 QuerySet、Model 或 Manager。取而代之的是 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 类型。

我不认为我可以从列表中创建 QuerySet。任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:10:47.153

看起来 Django-Chartit 真的是用来用模型制作图表的。注意标签行：

```
Create charts from your Django models effortlessly 
```

如果有特定原因您不能使用模型，我会考虑使用单独的网络图表工具[，例如 Flot](http://code.google.com/p/flot/)。它是纯 JavaScript，因此您需要将数据发送到客户端才能制作图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:14:44.373

首先，他们的[文档](http://chartit.shutupandship.com/docs/apireference.html#chartit.DataPool) `terms`必须是有效字段的列表或字典，`source`其中**必须是**模型、查询集或管理器。

那么你想使用什么样的数据呢？

更新：这个列表数据源到底是什么？如果它是一个包含模型 id 的列表，您可以这样做以使其成为查询集

```
MyModel.objects.filter(id__in=[3,1,2,5,77]) 
```

# ios - 如何在 iOS 中更改 UITabBarController 的 modalTransitionStyle？

> ID：10471467
> 
> 赞同：1
> 
> 时间：2012-05-06T14:54:07.793
> 
> 标签：ios, uitableview, uimodaltransitionstyle

我`UITabBarController`在我的应用程序中使用过。我想`modalTransitionStyle`用于`UITabBarController`.

我有`UITabBarController`以下代码的三个视图。

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1,viewController3,viewController2, nil]; 
```

我改变了，

```
self.tabBarController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal; 
```

但它不起作用。如何改变它？

谢谢。

# javascript - 动态元素宽度和 IE9 子像素精度

> ID：10471469
> 
> 赞同：5
> 
> 时间：2012-05-06T14:54:13.080
> 
> 标签：javascript, jquery, css

我有 3 个 div，#left、#center 和 #right，我想将它们定位在具有特定宽度的同一行上，比如 300px。

#left 和 #right 的内容很少，比如每个 50px，我将它们完全展示出来。

#center 有很多内容，比如说 400px，我想在行的剩余空间内尽可能多地显示。为此，我将#center 的内容包含在#inner 中。

我已将#left 和#center 浮动到左侧，将#right 浮动到右侧。

```
<div id="left">
    LEFT
</div>
<div id="center">
    <div id="inner">
        LONG CONTENT ...
    </div>
</div>
<div id="right">
    RIGHT
</div> 
```

[示例小提琴](http://jsfiddle.net/R7nJU/4/)

问题1：有没有办法让#center div通过CSS占据线上所有可用的剩余空间（在我们的例子中，#center必须是200px宽 - 线的宽度，300px，减去宽度#left 和 #right，每个 50px) ?

问题2：我没有通过CSS找到解决方案，我使用jQuery动态计算剩余可用空间。这在除 IE9 之外的所有浏览器中都可以正常工作。

IE9 的问题在于它具有亚像素精度，而 jQuery 只返回元素尺寸的整数值。

这是一个示例：IE9 将 #left 视为具有 50.5px 的宽度，而 jQuery 将其视为具有 50px 的宽度。这种差异导致布局在 IE9 中中断。

如果我需要通过 JavaScript 计算可用空间，我该怎么做才能克服这个 IE9 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:36:14.183

为了将来参考，我所做的是将 IE9 视为浮点数的宽度强制为 jQuery 视为整数的值：

```
var elem = $("#element");
elem.css("width", elem.width()); 
```

如果#element 有一个被IE9 视为50.5px 的值，jQuery 会强制在它上面设置一个jQuery 看到的值，50px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:59:52.460

试试这个：

```
main = $("#main").width();
centerWidth = main - ( $("#left").width() + $("#right").width() );
$("#center").width(centerWidth); 
```

或者：

```
main = parseFloat(document.getElementById("main").style.width)
centerWidth = main - (parseFloat(document.getElementById("left").style.width) + parseFloat(document.getElementById("right").style.width));
document.getElementById("center").style.width = centerWidth + "px" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T11:15:06.467

我的解决方案：

```
el = $('#myelement');

//Hello IE9-10 and float "width", e.g. 83.41px;
try {
  var elWidth = Math.ceil(parseFloat(getComputedStyle(el[0]).width)); 
} 
//But old browser doesn't know "getComputedStyle()" e.g. IE 8 and oldest;
catch (e) {
  var elWidth = el.width(); 
}

elWidth; //IE 9-10 return 84px, other browsers 83px; 
```

# c++ - 将元素添加到排序的链表

> ID：10471472
> 
> 赞同：0
> 
> 时间：2012-05-06T14:54:27.353
> 
> 标签：c++, sorting, linked-list, add

我正在研究单链表，其中我遇到了添加函数的问题，该函数将整数添加到排序方式中。但是我的程序不断崩溃。我整晚都在工作，但我找不到问题所在。有人对此有任何想法吗？

谢谢

```
template<typename T>
class SLList
{
private:

struct Node
{

Node(const T& val= T(), Node* next_ptr=NULL) : data(val), next(next_ptr) { }

// data members
T data;
Node *next;
};

 template<typename T>

void SLList<T>::add(const T& val)
{
 if (find(val)==false)
  {
 Node *curr= head;
 Node* prev=NULL;
  if(head->next==NULL)
  {
      cout<<"head";
      Node *tmp=new Node(val,head->next);
      head->next=tmp;
      return;
  }
  else
  {
  while(curr->data < val && curr!=NULL)
  {
      curr=curr->next;
      prev=curr;
      cout<<"add";
  }

Node *tmp=new Node(val, prev->next);
//head->next=tmp;
  }
}
}    ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:59:59.690

`while`退出条件反转：

```
while(curr->data < val && curr!=NULL) 
```

应该

```
while( curr!=NULL && curr->data < val ) 
```

如果`curr`是`NULL`，它将在检查`NULL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:13:06.263

另外，继续`prev = curr`前进：

```
while(curr != NULL && curr->data < val) {
  prev = curr;
  curr = curr->next;
  cout << "add";
} 
```

# php - PostgreSQL：将 ARRAY[] 传递给 pg_query_params

> ID：10471488
> 
> 赞同：4
> 
> 时间：2012-05-06T14:56:38.390
> 
> 标签：php, arrays, postgresql

我需要做这个查询：

```
SELECT * FROM property_select(ARRAY[8,9,10,11,12,13,14,15,16,17,19,20,26,28]) 
```

使用 PHP 函数`pg_query_params($prepared, $params)`。

准备好的查询是：

```
SELECT * FROM property_select($1); 
```

参数是：`["ARRAY[8,9,10,11,12,13,14,15,16,17,19,20,26,28]"]` 如何将参数传递给`pg_query_params()`数组？

无法使用`'{8,9,10,11,12,13,14,15,16,17,19,20,26,28}'`postgres 数组（因为它可能包含字符串，并且此数组中的字符串可能包含 , 和 "）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:00:01.580

[在手册中找到 PostgreSQL数组输入和输出语法](http://www.postgresql.org/docs/current/interactive/arrays.html#ARRAYS-IO)的详细要求。

基本上，您需要用双引号将带有特殊字符的数组元素括起来`""`。您可以双引号所有元素，但您不必这样做。而且，我引用了手册（见上文）：

> 要将双引号或反斜杠放在带引号的数组元素值中，请使用转义字符串语法并在其前面加上反斜杠。

[用户在手册中有一段 PHP](http://www.php.net/manual/en/function.pg-escape-string.php)代码：

```
 //$t is array to be escaped. $u will be string literal.
  $tv=array();
  foreach($t as $key=>$val){
    $tv[$key]="\"" .
      str_replace("\"",'\\"', str_replace('\\','\\\\',$val)) . "\"
";
  }
  $u= implode(",",$tv) ;
  $u="'{" . pg_escape_string($u) . "}'"; 
```

[在 SO 上](https://stackoverflow.com/questions/5631387/php-array-to-postgres-array)也有一个相关的答案：

还要考虑 的设置[`standard_conforming_strings`](http://www.postgresql.org/docs/9.1/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)。反斜杠可能需要加倍，但 PHP 的 pg-modules 应该会自动为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T13:23:17.673

这是一种棘手但有效且安全的方法。

$link: postgresql 连接资源

$sql：一个查询，例如：SELECT * FROM user WHERE id = ANY(@ids)

$params：关联数组：$params = array("ids" => array(1,2,3,6));

```
function pg_query_params_assoc($link, $sql, $params)
{   
    $index = 0;
    $assoc = [];
    $hash = [];
    foreach($params as $k => $v)
    {
        if(array_key_exists($k, $hash)) continue;
        if(false === strpos($sql, "@".$k)) continue;
        $hash[$k] = true;

        if(is_array($v))
        {
            $keys = [];
            foreach($v as $item)
            {
                $keys[] = $key = '$'.(++$index);
                $assoc[$key] = $item;
            }           
            $sql = str_replace("@".$k, "array[".implode(',', $keys)."]", $sql);
        }
        else
        {
            $assoc[$key = '$'.(++$index)] = $v;
            $sql = str_replace("@".$k, $key, $sql);         
        }       
    }

    $res = pg_query_params($link, $sql, $assoc);
    return $res;
} 
```

# ruby - Ruby unicode 邮件接收

> ID：10471491
> 
> 赞同：0
> 
> 时间：2012-05-06T14:56:49.863
> 
> 标签：ruby, ruby-on-rails-3, unicode

我如何在检索到的消息中看到 unicode 文本？

```
$require 'net/pop'
mail_server = Net::POP3.new('mail.yahoo.ru')
mail_server.start('login','pass')
mail_server.mails.each do |m|
   puts m.pop if /Superjob/.match(m.header)
end 
```

显示“??????..”而不是西里尔字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:27:18.683

我对 net/pop 并不完全熟悉，但您可能想使用 Iconv 将其转换为 utf-8，如下所示：

```
require 'net/pop'
require 'iconv'

mail_server = Net::POP3.new('mail.yahoo.ru')
mail_server.start('login','pass')
mail_server.mails.each do |m|
 m = Iconv.conv('UTF8', 'CP1251', m)
 #or m.header = Iconv.conv('UTF8', 'CP1251', m.header) ??
 puts m.pop if /Superjob/.match(m.header)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:32:31.203

您可能想使用[邮件 gem](https://github.com/mikel/mail)，它支持多部分消息、所有字段的自动字符集转换等。

# c# - 找不到错误类型或命名空间名称 profilecommon

> ID：10471492
> 
> 赞同：0
> 
> 时间：2012-05-06T14:57:05.323
> 
> 标签：c#, asp.net

当我编译这段代码时，它告诉我这种错误类型或命名空间名称 profilecommon 找不到。有人可以帮我解决这个问题吗？

```
case "Profile":
ProfileCommon pc = Profile.GetProfile(user.UserName);
DropDownList3.Items.Clear();
foreach (SettingsProperty p in
ProfileCommon.Properties)
{
DropDownList3.Items.Add(p.Name);
}
MultiView1.ActiveViewIndex = 4;
break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:37:51.110

您可能缺少`using`对包含`ProfileCommon`. 检查您的参考资料！

**编辑：**

有关您的问题的可能解决方案，请参阅[此](https://stackoverflow.com/questions/1584507/web-application-project-how-to-use-profilecommon)问题。

# c#-4.0 - 我似乎无法解决的序列化错误

> ID：10471496
> 
> 赞同：1
> 
> 时间：2012-05-06T14:57:26.803
> 
> 标签：c#-4.0

这是我收到的 xml。

```
<ussd PDU="CTRL" MSISDN="*" STRING="2012/05/06 04:27:06 PM" TID="0" REQID="0"  ENCODING="ASCII" TARIFF="*" STATUS="0"><cookie/></ussd> 
```

这是我的班级结构：

```
[Serializable]
[XmlRoot(ElementName = "ussd", Namespace = "")]
public class ussd
{
    [XmlAttribute(AttributeName = "PDU")]
    public string PDU = string.Empty;

    [XmlAttribute(AttributeName = "MSISDN")]
    public string MSISDN = string.Empty;

    [XmlAttribute(AttributeName = "STRING")]
    public string STRING = string.Empty;

    [XmlAttribute(AttributeName = "TID")]
    public string TID = string.Empty;

    [XmlAttribute(AttributeName = "REQID")]
    public string REQID = string.Empty;

    [XmlAttribute(AttributeName = "ENCODING")]
    public string ENCODING = string.Empty;

    [XmlAttribute(AttributeName = "TARIFF")]
    public string TARIFF = string.Empty;

    [XmlAttribute(AttributeName = "STATUS")]
    public string STATUS = string.Empty;
} 
```

为什么这个xml不能序列化到这个类中？任何人都可以看到我看不到的 xml 有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:29:53.943

> 为什么这个xml不能序列化到这个类中？

它可以：

```
string xml = @"<ussd PDU=""CTRL"" MSISDN=""*"" STRING=""2012/05/06 04:27:06 PM"" TID=""0"" REQID=""0""  ENCODING=""ASCII"" TARIFF=""*"" STATUS=""0""><cookie/></ussd>";

using(StringReader stringReader = new StringReader(xml))
using (XmlTextReader xmlReader = new XmlTextReader(stringReader))
{

    XmlSerializer serializer = new XmlSerializer(typeof(ussd));
    ussd myobject = (ussd)serializer.Deserialize(xmlReader);

    Console.WriteLine(myobject.ENCODING);
} 
```

> 任何人都可以看到我看不到的 xml 有什么问题吗？

只有你没有反序列化 cookie 元素的事实。

# macos - NPObject 不被 JavaScript 区分

> ID：10471500
> 
> 赞同：0
> 
> 时间：2012-05-06T14:57:52.663
> 
> 标签：macos, safari, npapi

在我的插件代码中，我创建了一个“设备”数组并将其返回给 JavaScript。数组中的设备是 NPObject 的一个实例。可以成功创建数组，并且可以推入设备实例。但是，当 JavaScript 调用设备对象的属性时，会返回“未定义”值。

html代码是：

```
<html>
<head>
<title>Netscape Core Animation Movie Plug-In</title>
<script language="javascript" type="text/javascript">
function devicelist(){
    var plug=document.getElementById('plugin');
    var devices=plug.getDevice();
    var tab='<table>';

    for(var device in devices){
        tab+='<tr><td>'+device.name+'</td><td>'+device.address+'</td></tr>';
    }

    tab+='</table>';

    document.getElementById('pluginlist').innerHTML=tab;
}

</script>

</head>
<body>
<div>
<embed width="848" height="480" id="plugin" movieurl="http://movies.apple.com/media/us/ipad/2011/tours/apple-ipad2-feature-us-20110302_r848-9cie.mov" type="test/x-netscape-core-animation-movie-plugin"></embed>
<p>JavaScript Controller</p>
<button onclick="devicelist()">Devices </button>
<div id="pluginlist"></div>
</div>
</body>
</html> 
```

我在调用插件对象的“getDevice”方法时创建了数组。

```
static bool mainNPObjectInvoke(NPObject *obj, NPIdentifier identifier, const NPVariant *args, uint32_t argCount, NPVariant *result)
{
    MainNPObject *mainObject = (MainNPObject *)obj;

    if (identifier == methodIdentifiers[METHOD_ID_GET_DEVICES])
    {
        NPObject *windowObj = NULL;
        browser->getvalue(mainObject->npp, NPNVWindowNPObject, &windowObj);

        NPVariant devices;
        NPIdentifier name = browser->getstringidentifier("Array");
        browser->invoke(mainObject->npp, windowObj, name, NULL, 0, &devices);

        for (int i = 0; i < 3; i++)
        {
            Device *device = [[Device alloc] init];
            device.name = [NSString stringWithFormat:@"device%.2d", i];
            device.address = @"127.0.0.1";
            NPObject *deviceObj = createDeviceNPObject(mainObject->npp, device);
            //browser->retainobject(deviceObj);

            NPVariant *arg = browser->memalloc(sizeof(NPVariant));
            OBJECT_TO_NPVARIANT(deviceObj, *arg);

            NPVariant result;
            browser->invoke(mainObject->npp, devices.value.objectValue, browser->getstringidentifier("push"), arg, 1, &result);
        }

        browser->retainobject(devices.value.objectValue);
        OBJECT_TO_NPVARIANT(devices.value.objectValue, *result);

        browser->releaseobject(windowObj);

        return true;
    }

    return false;
} 
```

为了让 JavaScript 知道数组有 NPObject 的实例，我有什么特别要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:13:15.937

看起来你在滥用`for`循环。for 循环将迭代对象原型链的所有键而不是值。这是正确的用法：

```
function devicelist(){
    var plug=document.getElementById('plugin');
    var devices=plug.getDevice(), device;
    var tab='<table>';

    for (var prop in devices) {
        if (devices.hasOwnProperty(prop)) {
            device = devices[prop];
            tab += '<tr><td>'+device.name+'</td><td>'+device.address+'</td></tr>';
        }
    }

    tab+='</table>';

    document.getElementById('pluginlist').innerHTML=tab;
} 
```

# php - 意外的 PHP 错误

> ID：10471502
> 
> 赞同：-3
> 
> 时间：2012-05-06T14:57:53.903
> 
> 标签：php, syntax-error

我收到此错误，为什么要尝试一段代码：

```
if ( 10 < $pages )
    {
        if ( $currentPage == 1 )
        {
            $i = 1;
            for ( ; do
 {
 $i <= 10; ++$i, )
                {
                    $paging .= "<a href=\"".$frontUrl.$i.$backUrl."\" ".( $i == $currentPage ? " class=\"selected\"" : " class=\"normal\"" ).">".$i."</a>";
                    break;
                }
            } while ( 1 );
        } 
```

如您所见，它用于页面脚本，这是它给我的错误：

> 解析错误：语法错误，第 35 行 /home/neel/public_html/engine/includes/functions.php 中的意外 ','

我不知道为什么我会得到这个。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:00:29.687

您以语法上不可能的方式混合了 for 循环和 while 循环！要么你必须使用：

```
for ( $i = 1;  $i <= 10; ++$i) {

} 
```

或者

```
do {

} while(1); 
```

注意，第二个是无限循环，而第一个恰好有 10 次迭代

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T15:02:11.200

就是这部分

```
for ( ; do
 {
 $i <= 10; ++$i, ) 
```

我不确定你想做什么。为什么不`for ($i = 0; $i < 10; $i++)`呢？

另外，我假设您在 之后想要一个逗号`$i++`，并且还注意到括号在花括号之前关闭（应该是其他方式）

# django - PyCharm：如何运行 syncdb 和 sql 命令？

> ID：10471505
> 
> 赞同：5
> 
> 时间：2012-05-06T14:58:11.920
> 
> 标签：django, pycharm

使用 Django 时，您可以像这样同步数据库：

```
python manage.py syncdb 
```

并像这样检查创建的 SQL：

```
python manage.py sql bookmarks 
```

我如何通过 PyCharm IDE 而不是终端执行上述操作？

谢谢，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-06T15:39:14.467

`Tools`| `Run manage.py Task...`： ![在此处输入图像描述](../Images/848f680dce7f44283908f13ed12f04a2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:01:29.890

按照说明运行[测试套件](http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration-django-test.html)并为您自己的命令修改它。此外，请参阅通用[设置指南](http://www.jetbrains.com/pycharm/webhelp/creating-and-editing-run-debug-configurations.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T09:52:10.140

上面的对话框也可以通过键绑定调用。Windows 上的 CTRL ALT R 和 Mac 上的 ALT R

# javascript - 在 Firefox 12 中调度关键事件

> ID：10471506
> 
> 赞同：1
> 
> 时间：2012-05-06T14:58:18.457
> 
> 标签：javascript, dom-events, keypress, dispatchevent

我曾经在 FireFox 10 和 11 中调度一个关键事件。最近我将浏览器更新到 FireFox 12 并且调度停止工作。

这是我所做[的示例代码。](http://jsfiddle.net/EshwS/4/)

 `当您在 Firefox 11 或更低版本中运行它时，您可以在文本框中找到打印的字符。

为什么它在 Firefox 12 中不起作用，我该如何解决？任何替代解决方案也适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:02:55.957

[这是他们在BugZilla](https://bugzilla.mozilla.org/show_bug.cgi?id=749185)中的回答。出于安全原因，调度关键事件似乎不再被拒绝：

> 请注意 initKeyEvent() 仍然有效。编辑只是拒绝当前规范中安全性和不清楚的关键事件。

但我仍然无法理解为什么我的调度事件不受信任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:34:56.943

用一个空输入检查我的小提琴，观察按键事件，然后在输入“A”时替换输入......试试看

编辑：这在其他浏览器中可能会有所不同，但在 Firefox 和 Chrome / Chromium 等现代浏览器中对我有用......持有者 IE 在观察事件时可能表现不同

编辑 2：更新了[fiddle rev 1](http://jsfiddle.net/mpuJY/1/)以也像你建议的那样保存一个全局映射......一个小旁注：一些浏览器可能不支持从`event.keyCode`所以检查`event.which`中检索输入的密钥代码（jQuery 会将它们组合成`event.which`并且也会使你轻松观察按键跨浏览器）。

[小提琴](http://jsfiddle.net/mpuJY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:14:29.863

为什么不在页面加载时将值（字符#1740）分配给输入框？喜欢：

```
$('#name').val(String.fromCharCode(1740))​; 
```

看到[这个jsfiddle](http://jsfiddle.net/EvcKE/)`

# android - SurfaceView 创建前未捕获的异常 - Android - 视频播放

> ID：10471507
> 
> 赞同：1
> 
> 时间：2012-05-06T14:58:20.017
> 
> 标签：android, video, surfaceview

我正在尝试使用非常简单的代码进行一些视频播放，无论我进行什么更改，我总是遇到同样的问题： onCreate 和 onResume 的最后一行被调​​用，但没有调用其他任何内容，并且 Activity 以在调用 surfaceCreated 之前未捕获的异常。我究竟做错了什么？

```
import java.io.File;
import java.io.IOException;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class VideoPlayerActivity extends Activity implements SurfaceHolder.Callback {

private MediaPlayer mMediaPlayer;
private SurfaceView vview;
private SurfaceHolder holder;
private String videoPath;
private String id;

@Override
public void onCreate(Bundle icicle) {

    super.onCreate(icicle);
    setContentView(R.layout.videoplayer);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    System.out.println("Inside VideoPlayerActivity.");

    vview = (SurfaceView) findViewById(R.id.vplay_surface);
    holder = vview.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    System.out.println("Surface and holder configured.");

    //Bundle dungle = getIntent().getExtras();
    //id = dungle.getString("id");
    id = "1";

    videoPath = getFilesDir().getAbsolutePath().toString() + File.separator + "VID" + id + ".mp4";
    System.out.println("PATH: " + videoPath);
    //iniElements();

    } 

@Override
public void onResume() {
    iniElements();
}

private void iniElements() {

    mMediaPlayer = new MediaPlayer();
    System.out.println("MediaPlayer object created.");

    } 

private void iniPlayer() {

    System.out.println("Initiating player!");

    try {
    mMediaPlayer.setDataSource(videoPath);
    mMediaPlayer.prepare();
    } catch (IllegalArgumentException e) {
    e.printStackTrace();
    } catch (IllegalStateException e) {
    e.printStackTrace();
    } catch (IOException e) {
    e.printStackTrace();
    }

    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mMediaPlayer.start();

    System.out.println("Reached START PLAYER.");

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    System.out.println("Surface changed.");

}

@Override
public void surfaceCreated(SurfaceHolder holder) {

    System.out.println("Surface created!");
    try {
        mMediaPlayer.setDisplay(holder);
    } catch (Exception e) {
        e.printStackTrace();
    }
    System.out.println("Elements configured.");

    iniPlayer();

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    System.out.println("Surface destroyed.");

}

@Override
public void onPause() {
    System.out.println("Activity on pause.");
}

@Override
public void onDestroy () {
    System.out.println("Destroying activity.");
}

} 
```

xml文件很简单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="268dp"
        android:layout_height="202dp"
        android:layout_marginTop="10dp"
        android:layout_gravity="center"
        android:orientation="horizontal" >

        <SurfaceView
            android:id="@+id/vplay_surface"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:scaleType="centerInside"
        android:gravity="center" />

  </RelativeLayout>

 </LinearLayout> 
```

Logcat 说：

```
05-06 16:39:51.286: INFO/power(2083): *** acquire_dvfs_lock : lockType : 1  freq : 1200000 
05-06 16:39:51.286: INFO/ActivityManager(2083): START {intent.toShortString} from pid 18751
05-06 16:39:51.286: DEBUG/PowerManagerService(2083): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1200000  uid : 1000  pid : 2083  tag : ActivityManager
05-06 16:39:51.286: WARN/ActivityManager(2083): mDVFSLock.acquire()
  05-06 16:39:51.306: DEBUG/ActivityManager(2083): Trying to launch applicationName
  05-06 16:39:51.326: DEBUG/AndroidRuntime(18751): Shutting down VM
  05-06 16:39:51.326: WARN/dalvikvm(18751): threadid=1: thread exiting with uncaught exception (group=0x40c341f8)
  05-06 16:39:51.331: WARN/ActivityManager(2083):   Force finishing activity r.intent.getComponent().flattenToShortString()
05-06 16:39:51.336: VERBOSE/yamaha::media::VolumeCtrl(1833): VolumeCtrl::createVolume()
05-06 16:39:51.336: DEBUG/yamaha::media::VolumeCtrl(1833): Dir0      : AP Playback Music SP (0001h)
05-06 16:39:51.336: DEBUG/yamaha::media::VolumeCtrl(1833): Dir0Att   : AP Playback Music SP (0001h)
05-06 16:39:51.336: DEBUG/yamaha::media::VolumeCtrl(1833): DacMaster : AP Playback Music SP (0001h)
05-06 16:39:51.336: DEBUG/yamaha::media::VolumeCtrl(1833): Sp        : AP Playback Music SP (FD81h)
05-06 16:39:51.336: VERBOSE/yamaha::media::VolumeCtrl(1833): VolumeCtrl::setVolume()
05-06 16:39:51.336: DEBUG/yamaha::media::VolumeCtrl(1833): VolumeCtrl::setVolume() FM Playback: Ready
05-06 16:39:51.336: DEBUG/yamaha::media::VolumeCtrl(1833): VolumeCtrl::setVolume() VoiceCall: Ready
05-06 16:39:51.336: WARN/ActivityManager(2083):   Force finishing activity r.intent.getComponent().flattenToShortString()
05-06 16:39:51.351: INFO/dumpstate(18883): Check if stand-alone
05-06 16:39:51.356: INFO/dumpstate(18883): begin
05-06 16:39:51.401: INFO/ALSAModule(1833): Initialized ALSA PLAYBACK device hifi
05-06 16:39:51.641: INFO/AudioPolicyManager(1833): stopOutput() output 1, stream 1, session 2190
05-06 16:39:51.681: INFO/AudioFlinger(1833): stop output streamType (0, 1) for 1
05-06 16:39:51.836: WARN/ActivityManager(2083): Activity pause timeout for r 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:47:21.347

好的，我发现了问题。问题是您无法以这种方式打开 /data/data/package 中的文件。您必须首先使用 openFileInput() 创建一个 FileInputStream，然后参考 FileInputStream 创建一个 File；然后您可以使用该文件获取其文件描述符并将其传递给播放器。如果你想看代码，请索取，我会分享。干杯

# oracle - Oracle jdbc 和 sqllr 的孪生问题

> ID：10471510
> 
> 赞同：0
> 
> 时间：2012-05-06T14:59:15.757
> 
> 标签：oracle, jdbc, sql-loader

我面临两个我认为可能相关的问题。

我正在尝试对 oracle (10g) 数据库执行 JDBC 选择，结果集将日期列显示为时间戳

```
 ResultSetMetaData rsMetaData = null;  
    rsMetaData = resultSet.getMetaData();  
    if(rsMetaData.getColumnType(1) == java.sql.Types.TIMESTAMP){
        System.out.println("Timestamp");
    } 
```

oracle 中此列的数据类型是 DATE 所以我希望返回的 columnType`resultSetMeta`是 DATE 但它总是`TIMESTAMP`。

处理完这些数据后，我尝试使用 sqlldr 将其加载到 Oracle 数据库由于输入中接收到的数据类型错误，输出控制文件使用 TIMESTAMP。（这个控制文件是由我的程序基于 resultSetMetaData 创建的。）这正是它在控制文件中的显示方式。

```
TIMESTAMP "yyyy-MM-dd HH24:mi:ss.ff" 
```

当我尝试使用此控制文件加载以下数据时，问题就开始了。

```
1987-06-17 00:00:00.0 
```

sqlldr 成功地将这些数据加载到 Oracle 中而没有任何警告，但是当我检查目标表时，我得到的日期为“1987 年 6 月 16 日”，而不是预期/要求的“1987 年 6 月 17 日”。这可能是因为 oracle 解释时间“00:00:00.0”的方式。

上面的问题 1 和 2 对我来说都是严重的问题，我找不到解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:07:34.707

SQL 标准[`DATE`类型](http://en.wikipedia.org/wiki/SQL#Date_and_time)没有时间组件；[Oracle 的实现](http://docs.oracle.com/cd/E14072_01/server.112/e10729/ch4datetime.htm)具有秒精度，因此即使您只存储一个日期，您也可以免费获得时间。

如果您插入特定日期，例如`to_date('06/05/2012', 'DD/MM/YYYY')`或 literal `date '2012-05-06'`，则时间将为午夜。如果您插入一个带有时间的值，例如`SYSDATE`，它将被保留。无论哪种方式，如果您通过 SQL*Plus 或类似方式进行查询，而没有指定包含时间的日期格式掩码，它可能看起来只是一个日期，但时间会在那里，只是不显示。

在 JDBC 中，必须将 Oracle`DATE`视为 SQL `TIMESTAMP`，否则时间部分将丢失。如果您不想要 Jave 中的时间，您可以将其转换为日期类型，但我认为这不会帮助您解决第二个问题。

SQL*Loader 问题看起来可能是时区问题。看来您使用的日期是可以的，或者至少是一致的（即使您丢失了明确的时间，Oracle 也会将其视为`00:00`无论如何；请参阅[数据类型](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_field_list.htm#i1006714)）。

我只能猜测，无论您`sqlldr`从哪里运行，都与您查询的时区不同，可能来自环境变量。例如，如果一个人知道现在是夏令时而另一个人不知道，那么您的查询可能会在 16 日显示 23:00 - 您需要使用明确的日期格式掩码进行查询以检查 - 因为 GMT/BST 之间的小时差, EST/EDT 等。在不了解您的环境的情况下，很难说出正在发生的事情。不过，大胆猜测，您可能正在*从*Java 调用 SQL*Loader，我可以想象这会引起混乱。

# iphone - 如何实现从 SUP 2.1 到 iphone 设备的数据更改通知

> ID：10471511
> 
> 赞同：0
> 
> 时间：2012-05-06T14:59:27.187
> 
> 标签：iphone, sup

我已经成功地实现了从 Sap 后端到 SUP 2.1 的 DCN，即我能够更新 SUP 2.1 的 CDB，但问题是我必须将其通知给 iphone 设备（iOS 5）。

我尝试在缓存组中按计划实施缓存策略，但没有成功。

谁可以帮我这个事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:57:18.400

Please visit this blog.

[http://scn.sap.com/community/developer-center/mobility-platform/blog/2012/06/11/calling-the-sup-data-change-notification-from-abap](http://scn.sap.com/community/developer-center/mobility-platform/blog/2012/06/11/calling-the-sup-data-change-notification-from-abap)

# protocols - bitorrent 查询中的“key”字段是什么意思？

> ID：10471519
> 
> 赞同：0
> 
> 时间：2012-05-06T15:00:12.937
> 
> 标签：protocols, bittorrent, utorrent

我使用了 utorrent 2.04（build 22450），我对 utorrent 生成的 HTTP GET 查询中的部分感到好奇。我`key`已经阅读了 bitorrent 协议的规范，但仍然无法在 bitorrent get 查询中找到“key”部分的含义。解析查询后，有点像这样：

```
{
info_hash:'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
peer_id: '-UT2210-*b�A�\u000b7�\u001d\u0004�I',
port: '18584',
uploaded: '0',
downloaded: '0',
left: '0',
corrupt: '0',
key: '79E7F5D0',
event: 'started',
numwant: '200',
compact: '1',
no_peer_id: '1',
ipv6: '2004:150:20xx:xxxx:xxxx:xxxx:xxxx' } 
```

其他条目的含义很明显，但我完全不知道该`key`部分的含义。有人可以解释一下这`key`部分的目的吗？谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T21:09:49.730

引用[非官方的 bittorrent 规范](http://wiki.theory.org/BitTorrentSpecification#Tracker_Request_Parameters)：

> 键：可选。不与任何对等方共享的附加客户端识别机制。它旨在允许客户端在其 IP 地址更改时证明其身份。

# facebook - 使用 Drupal 创建 Facebook 环境

> ID：10471520
> 
> 赞同：1
> 
> 时间：2012-05-06T15:00:19.233
> 
> 标签：facebook, web, drupal-7

我已经用 Acquia Drupal 安装了 Drupal 7。

我想重新创建 Facebook 环境，尤其是：

i) 用户发起的朋友网络的映射/创建。ii) 用户墙，用于发布评论、图片并让朋友回复。iii) 用户资料创建。

从我所做的小研究中，我看到大多数可用于 Drupal 的模块都允许在 Drupal 站点上集成 Facebook（例如，喜欢，在 Drupal 站点的墙上发表评论等），而不是允许创建的模块Facebookesq 环境。我希望我错了。

问题

1) 你能告诉我哪些模块可以创建 Facebookesq 环境吗？

2）略有不同的主题 - 修改 Drupal 创建的底层 HTML/CSS 文件的最简单方法是什么？

3）“节点”文件存储在哪里？

我要提前感谢您为回答我的问题所付出的时间和精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:48:22.380

Drupal 中有一系列模块用于处理 Facebook 应用程序或创建 Facebook 类型的功能。检查[Drupal Facebook](http://drupal.org/project/fb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:56:33.247

您可以尝试 Drupal Commons，但它适用于 Drupal 6

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T23:03:13.130

1）我认为您应该检查有机组并准备编写一些代码/模块。2和3）我不确定你在问什么。如果您可以更具体一点，我可以为您提供帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:57:47.987

试试[The Ultimate Community Site Guide](http://book.drupalfun.com)，这是我写的一本关于使用 Drupal 构建社区站点的书。

# ruby-on-rails - 通过访问原始文件覆盖 rails helpers

> ID：10471535
> 
> 赞同：22
> 
> 时间：2012-05-06T15:01:40.437
> 
> 标签：ruby-on-rails, ruby, overriding, helpers

我想使用 Rails 熟悉的助手，但功能略有改变。在我看来，我希望能够执行以下操作：

```
module AwesomeHelper
  #... create alias of stylesheet_link_tag to old_stylesheet_link_tag
  def stylesheet_link_tag(*args)
    if @be_awesome
      awesome_stylesheet_link_tag *args
    else
      old_stylesheet_link_tag *args
    end
  end
end 
```

在我看来，我有三个选择：

1.  **Monkey patching：**重新打开 rails helper 模块。如果 Rails 团队更改了他们的帮助模块的名称，我的代码就会变得脆弱。并非不可克服，但并不理想。
2.  **使用不同的方法名：**试图坚持通用的 Rails 接口可能是我的失败。我的更改可能会引起其他开发人员的困惑
3.  **分离方法（新）：**不确定这是否可行，或者它是否具有与 1 相同的缺点。将对此进行研究，但这可能是一个很好的起点。

所以这里的问题是，我是坚持使用这些次优解决方案之一，还是有另一种我没有考虑过的方法？如果我选择选项 3，有没有办法在不直接解决 rails helper 模块的情况下做到这一点？

（注意：我已经删除了上下文，因为它没有给问题增加任何内容。）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-09T22:54:37.680

有比您列出的任何选项更好的方法。只需使用`super`：

```
module AwesomeHelper
  def stylesheet_link_tag(*sources)
    if @be_awesome
      awesome_stylesheet_link_tag *sources
    else
      super
    end
  end
end 
```

在 AwesomeHelper 中重写`stylesheet_link_tag`将确保当`stylesheet_link_tag`被调用时，Ruby 会在它命中之前在方法查找路径中遇到它`ActionView::Helpers::AssetTagHelper`。如果`@be_awesome`是`true`，您可以负责并在此停止处理，如果不是，`super`则不带括号的调用将透明地传递所有参数到 Rails 实现。这样，您就不必担心 Rails 核心团队在您身上转移东西！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T15:45:20.043

我不使用这个gem，所以我会以更通用的方式回答你。

假设您想记录对`link_to`助手的调用（是的，人为的示例，但显示了这个想法）。查看 API 可以让您了解`link_to`位于`ActionView::Helpers::UrlHelper`模块内部的内容。因此，您在您的`config/initializers`目录中创建一些文件，其中包含以下内容：

```
# like in config/initializers/link_to_log.rb
module ActionView::Helpers::UrlHelper

    def link_to_with_log(*args, &block)
        logger.info '**** LINK_TO CALL ***'
        link_to_without_log(*args, &block) # calling the original helper
    end

    alias_method_chain :link_to, :log
end 
```

这个功能的核心—— [`alias_method_chain`](http://api.rubyonrails.org/classes/Module.html#method-i-alias_method_chain)（可点击）。在定义方法之后使用它`xxx_with_feature`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-14T16:20:20.320

尝试使用`alias_method`：

```
module AwesomeHelper
  alias_method :original_stylesheet_link_tag, :stylesheet_link_tag

  def stylesheet_link_tag(*sources)
    if @be_awesome
      awesome_stylesheet_link_tag *sources
    else
      original_stylesheet_link_tag *sources
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T02:39:10.357

我真的鼓励你考虑你的选项#2，以一种对调用者来说显而易见的方式覆盖 rails 方法的行为。

应该调用您的新方法`awesome_stylesheet_link_tag`，以便其他 Rails 开发人员可以阅读您的代码并提出问题“链接标签有什么了不起的地方？”。

作为一个较小的更改，您可以进行覆盖，但`:awesome => true`作为参数传入，这样他们至少有一个线索表明正在发生一些事情。

改变广泛使用的方法的行为，比如`stylesheet_link_tag`在不需要的地方会产生潜在的未来误解。

# sql - 使用 LIKE 或类似的完整搜索操作搜索 XML

> ID：10471537
> 
> 赞同：27
> 
> 时间：2012-05-06T15:01:53.643
> 
> 标签：sql, xml, xpath, sql-server-2008-r2

我想搜索一个 XML 值列以查看 a 是否包含字符串。我不知道架构，我想知道字符串是否包含在任何地方。我不知道 XPATH 是否可以在这种情况下工作。

相当于

```
Select s.Name, ts.ValueXML from table t (nolock) 
join table2 ts (nolock) on t.key_Id = ts.key_Id
join table3 s (nolock) on ts.key_Id=s.key_Id
where s.Name like '%Lab%' and ts.ValueXML  like '%PreviewDateRange%' 
```

> 错误：参数数据类型 xml 对于类似函数的参数 1 无效。

相关`ts`表格列

`ValueXml (XML(.), null)`

我正在搜索的项目应该是一个属性。因此，如果上述情况不可行，那么包含该属性的任何内容都是一个不错的选择。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-06T15:18:40.803

最简单（但绝对不是执行速度最快）的方法是在将列传递给`nvarchar(max)`之前将其转换为`like`：

```
cast(ValueXml as nvarchar(max)) like '%PreviewDateRange%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-03T09:44:30.583

你去：

```
SELECT *
FROM MyTable
WHERE MyXmlMetadataColumn.exist('//*/text()[contains(upper-case(.),upper-case("MySearchTerm"))]') = 1 
```

这对我来说似乎很好用，也不会搜索 XML 标记名称作为“dasblinkenlight”提供的解决方案。

我不知道它的性能如何。

# android - 设置 Android Dialog Activity 位置

> ID：10471540
> 
> 赞同：1
> 
> 时间：2012-05-06T15:02:14.453
> 
> 标签：android, android-layout, android-dialog

我是来自中国的新生。我想在屏幕顶部制作一个 android 对话框活动。

我已将样式设置为：

```
<resources>
<style name="Theme.InputAddressDialog" parent="android:style/Theme.Dialog">
    <item name="android:windowNoTitle">true</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:gravity">top</item>
    <item name="android:layout_gravity">top</item>
</style> 
```

对话活动出现在垂直中心而不是顶部。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:29:53.203

我解决这个问题如下。

```
LayoutParams lp = this.getWindow().getAttributes();
    lp.gravity = Gravity.TOP | Gravity.LEFT;
    lp.dimAmount = 0;
    lp.flags = LayoutParams.FLAG_LAYOUT_NO_LIMITS
            | LayoutParams.FLAG_NOT_TOUCH_MODAL;

    LayoutInflater inflater = getLayoutInflater();
    LinearLayout ll = (LinearLayout) inflater.inflate(
            R.layout.input_address, null);
    setContentView(ll, lp); 
```

# mysql - 查询特殊字符敏感

> ID：10471542
> 
> 赞同：3
> 
> 时间：2012-05-06T15:02:30.940
> 
> 标签：mysql

我的数据库中的特殊字符有问题。它们现在显示正确，但 sql 似乎在查询中忽略了它们。例如，不幸的是我有这些条目：
`Morgait`
`Morgaít`
`Mórgait`

现在这些名称有一个 UNIQUE 键，当尝试在第一个之后添加第二个和第三个时，它已经中断说最后 2 个无法添加，因为名称不再是唯一的。简而言之，í 被视为正常的 i，而 ó 被视为正常的 o。

当我查询时： `SELECT * FROM member WHERE charname = 'Morgait'` 我得到所有 3 个结果。当我将 i 更改为 í、o 更改为 ó 或同时更改两者时也是如此。

如何让数据库看到这些差异？我将表的排序规则设置为 ascii_general_ci（也尝试了 UTF 8 unicode ci）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:11:52.987

所有这些排序规则都是`accent insensitive`. 你可以试试`utf8_bin`which is `accent sensitive`，但它也是`case sensitive`。使用不区分重音的排序规则，例如`é`等于`e`或`ë`等。

```
SELECT * FROM member WHERE charname = 'Morgait' COLLATE utf8_bin 
```

应该做的伎俩。如果您需要不区分大小写，可以尝试

```
SELECT * FROM member WHERE LOWER(charname) = LOWER('Morgait') COLLATE utf8_bin 
```

# java - 如何定义常量值 - 最佳实践

> ID：10471543
> 
> 赞同：7
> 
> 时间：2012-05-06T15:02:30.850
> 
> 标签：java, oop, static, enums, constants

我有两种定义常量的方法。第一个在一个类中保存一堆静态最终 DataType 变量，另一个使用 Enum。

这是拳头类型：

```
public class TipTipProperties {
    public static final String MAX_WIDTH_AUTO = "auto";
    public static final String POSITION_RIGHT = "right";    
} 
```

这些变量的使用将通过静态调用，例如：`TipTipProperties.MAX_WIDTH_AUTO`

第二种是：

```
public enum TipTipProperties {

    MAX_WIDTH_AUTO(MaxWidth.AUTO),  
    POSITION_RIGHT(Position.RIGHT);

    private MaxWidth maxWidth;
    private Position position;  

    private TipTipProperties(MaxWidth maxWidth) {
        this.maxWidth = maxWidth;
    }

    private TipTipProperties(Position position) {       
        this.position = position;
    }

    public MaxWidth getMaxWidth() {
        return maxWidth;
    }   

    public Position getPosition() {
        return position;
    }

    public enum MaxWidth {
        AUTO("auto");

        private String width;

        private MaxWidth(String width) {
            this.width = width;
        }

        public String getWidth() {
            return width;
        }
    }

    public enum Position {
        RIGHT("right"),         

        private String position;

        private Position(String position) {
            this.position = position;
        }

        public String getPosition() {
            return position;
        }       
    }
} 
```

作为示例用法：`TipTipProperties.POSITION_RIGHT.getPosition().getPosition()`.

我的问题是：

*   哪一个是更好的 OOP，为什么？
*   是否存在任何替代方案或更好的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:04:57.290

正如 Joshua Bloch 在[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0201310058)中所说，Enum 是最好的方法，使用 Enum 时，您将拥有更多控制权，就像您想打印所有常量一样，您可以。使用类常量你不能有类型安全。[阅读本文以获得进一步帮助](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:13:58.317

在您的项目中使用属性文件也是一种很好的方法。[这篇文章](https://stackoverflow.com/questions/1318347/how-to-use-java-property-files)解释了如何在 Java 中做到这一点。

您基本上可以`tiptip.properties`在项目的根目录中创建一些名为的东西，然后存储您需要的所有键值对。

# php - 需要将多个页面会话添加在一起吗？

> ID：10471547
> 
> 赞同：0
> 
> 时间：2012-05-06T15:03:36.357
> 
> 标签：php, ajax

**我有一个记录数字的多页**，我有一个会话保存为“submit.php”

```
$_SESSION['hello'] = $_POST['hello'];
echo  $_SESSION['hello']; 
```

我的问题是它只用前一个会话替换了会话。我怎么做才能让它们加起来？

例如，

```
<?php
if ($page2 == 2) { ?>

 <?php echo $numbers?>

<?php } else if ($page3 == 3) { ?>

  <?php echo $numbers + $numbers ?>

<?php } else if ($page4 == 4) { ?>

 <?php echo $numbers + $numbers + $numbers?> 
```

是否可以从每一页中获取会话而不是替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:04:45.363

Define `$_SESSION['hello']` as an array then store your page number to it and retrieve as necessity.

```
$_SESSION['hello'] = array();

array_push($_SESSION['hello'], $_POST['hello']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:11:34.170

你在用`sessionstart();`吗？

[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:14:58.663

```
$sessionvar = $_SESSION['hello']; 
```

然后，您可以根据需要将数字相加：

```
$sessionvar = $sessionvar + $number; 
```

然后将新值存储到会话中：

```
$_SESSION['hello'] = $sessionvar; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:20:13.703

使用 php 数组：

```
<?php
$arr = array();
$arr[] = $_POST['hello'];
$_SESSION['hello'] = $arr;
?> 
```

然后，您可以使用以下方法在任何页面调用任何值：

```
<?php
echo $_SESSION['hello'][0];
echo $_SESSION['hello'][1];
?> 
```

# iphone - GLSL pow 函数？

> ID：10471548
> 
> 赞同：11
> 
> 时间：2012-05-06T15:03:38.093
> 
> 标签：iphone, opengl-es, glsl, fragment-shader

我有这个：

```
 float xExponential = pow(xPingPong, 5); 
```

并且不工作，声称：

> 错误：0:53：调用函数“pow”没有匹配的重载

我做错什么了吗？使用 OpenGL ES 2.0 为 iOS 开发。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-06T15:07:14.410

你能试试这个吗？

```
float xExponential = pow(xPingPong, 5.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-29T12:45:41.973

您的代码很好，只是语法错误

**写入十进制数**

```
 float xExponential = pow(xPingPong, 5.0); 
```

或者

```
 float xExponential = pow(xPingPong, 5.); 
```

# java - 在MongoDB中添加多个子文档

> ID：10471553
> 
> 赞同：1
> 
> 时间：2012-05-06T15:03:58.570
> 
> 标签：java, mongodb, mongodb-java

我正在开发一个客户数据加载器，客户可以有多个地址。如果找不到客户，我创建它并添加地址。如果客户存在，我只需添加新地址，如下所示：

```
 DBObject findCustomer = new BasicDBObject();
    findCustomer.put("email", custEmail);

    //check for existing customer
    DBObject newCustomer = customerCollection.findOne(findCustomer);

    if (newCustomer == null) {
        //INSERT    
        newCustomer = new BasicDBObject();
        newCustomer.put("firstname", firstname);
        newCustomer.put("lastname", lastname);
        newCustomer.put("email", custEmail);
        newCustomer.put("password", custData.getPassword());
        newCustomer.put("softwaretime", new Date());
    }

    DBObject newAddress = new BasicDBObject();
    City tempCity = new City();
    tempCity = addressData.getCity();

    newAddress.put("type", addressData.getType());
    newAddress.put("line1", addressData.getLine1());
    newAddress.put("line2", addressData.getLine2());
    newAddress.put("city", tempCity.getCity());
    newAddress.put("state", tempCity.getState());
    newAddress.put("postal", tempCity.getZip());
    newAddress.put("country", tempCity.getCountry());

    newCustomer.put("address", newAddress);

    customerCollection.save(newCustomer); 
```

这适用于新客户。问题是当客户已经存在时，新地址会覆盖现有地址。

如何将新地址添加给客户，以便保留多个地址？

根据我的发现，我应该能够通过外壳“推送”来完成此操作。但我不认为“推”是 BasicDBObject 上的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:16:23.310

您希望地址是地址列表而不是单个地址文档。因此，对于您希望拥有的新客户：

```
newCustomer.put("地址", [newAddress])
customerCollection.save（新客户）

```

对于您想要的现有客户

```
customerCollection.update(newCustomer, {$push: {"addresses": newAddress}})

```

*抱歉，我不知道 java API，所以你必须修改上面的代码来创建适当的对象*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:42:34.350

事实证明，您的逻辑可以简单得多。您不需要通过“电子邮件”获取客户（我假设这是您唯一的客户识别密钥）只需更新即可。

```
findCustomer.put("email", custEmail); // search query for the customer email

// construct your newAddress object the same way you already are

BasicDBObject custMod = new BasicDBObject();
custMod.put("$addToSet", newAddress);
customerCollection.update(findCustomer, custMod, true /* upsert */, false /* multi */ ); 
```

你现在拥有逻辑的方式的大问题是它不能在多线程中工作。您可以检查客户，它不会在那里。当您构造对象以插入它时，另一个线程已经在执行此操作。由于地址对象是一个数组而不是单个字段，如果它存在，使用 $addToSet 将添加到数组中，但如果它正在创建一个新客户，那么它会将地址创建为一个数组。

# javascript - JavaScript 正则表达式（缺少'/'），我该如何解决这个问题？

> ID：10471561
> 
> 赞同：1
> 
> 时间：2012-05-06T15:05:13.937
> 
> 标签：javascript, regex

我有简单的脚本，我想获取我的图像，然后用逗号分隔它们。但是，`[gallery]`自从我得到`Uncaught SyntaxError: Invalid regular expression: missing /`.

有人可以看看并告诉我我的 RegEx 代码中的问题在哪里吗？

**HTML**

```
<textarea>
abc
[gallery]/content/img/upload/img-2012.03.19.-634677727044317051.jpg, /content/img/upload/img-2012.03.19.-634677727046997204.jpg, /content/img/upload/img-2012.03.19.-634677727049487347.jpg, /content/img/upload/img-2012.03.19.-634677727051787478.jpg, /content/img/upload/img-2012.03.19.-634677727054137613.jpg[/gallery]
def
</textarea>​ 
```

**JavaScript**

```
$(function(){
    var text = $('textarea').val();
    var re = /\[gallery\]([^}]+)[/gallery\]/g;
    var gallery = re.exec(text);
    alert(gallery);
});​ 
```

**小提琴**：http: [//jsfiddle.net/BcFsg/](http://jsfiddle.net/BcFsg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:09:13.960

是的，问题是你错过了一个转义字符

```
var re = /\[gallery\]([^}]+)\[\/gallery\]/g;
//                          |
//                       [ HERE ] 
```

jsfiddle在这里[http://jsfiddle.net/BcFsg/ ​​1/](http://jsfiddle.net/BcFsg/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:09:30.840

看到更新的小提琴......我不知道为什么，但似乎你不必逃避关闭`]`

编辑：给出错误的输出（所有方括号都需要转义）...更新小提琴编辑2：更新小提琴只提醒图像列表

[小提琴](http://jsfiddle.net/BcFsg/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:09:02.320

您需要`/`通过 eriting 来逃避正则表达式中间的`\/`。

# java - 在 ubuntu 10.04 上安装 openjdk-7-jre - 软件包 openjdk-7-jre 没有安装候选

> ID：10471564
> 
> 赞同：16
> 
> 时间：2012-05-06T15:05:36.050
> 
> 标签：java, ubuntu

我正在尝试在我的 ubuntu 上安装 openjdk-7，但出现以下错误：

```
$ sudo apt-get install openjdk-7-jre
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package openjdk-7-jre is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
E: Package openjdk-7-jre has no installation candidate 
```

我想我错过了一些回购或类似的东西，但我无法找到任何参考地点和内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T23:10:22.897

我最近不得不在 CentOS、openSUSE 和 Ubuntu 上安装 Java 7，经过一番苦恼和研究，最终确定了这个，它适用于所有三种风格：

*   忽略（并卸载）与您的发行版捆绑/附带的任何 JRE 或 JDK。它们比它们的价值更麻烦，而且总是落后于最新的更新。
*   [从http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 JRE 7（或 JDK 7，如果您想开发）。
    *   对于 JRE，如果您有 64 位计算机，请获取 jre-xxx-linux-x64.tar.gz，如果您有 32 位计算机，请获取 jre-xxx-linux-i586.tar.gz。不要为 RPM 烦恼。
    *   对于 JDK，如果您有 64 位计算机，请获取 jdk-xxx-linux-x64.tar.gz，如果您有 32 位计算机，请获取 jdk-xxx-linux-i586.tar.gz。
*   以 root 身份或使用 sudo 执行以下操作：
    *   # tar -xzvf jdk-xxx-linux-x64.tar.gz（或者你下载的任何一个）
    *   # mkdir /usr/java
    *   # mv jdkx.x.x_xx /usr/java（或者，如果是 JRE，这将是提取的 JRE 目录）
    *   # ln -s /usr/java/jdkx.x.x_xx /usr/java/jdkx
    *   # ln -s /usr/java/jdkx /usr/java/latest
    *   # ln -s /usr/java/latest /usr/java/default
    *   # ln -s /usr/java/default/bin/java /usr/bin/java
    *   # ln -s /usr/java/default/bin/javac /usr/bin/javac
    *   # ln -s /usr/java/default/bin/javah /usr/bin/javah
    *   # ln -s /usr/java/default/bin/javadoc /usr/bin/javadoc
    *   # ln -s /usr/java/default/bin/javaws /usr/bin/javaws

显然，你必须在这里填写一些空白，但你应该得到图片。作为一个工作示例，这是我的安装（请注意，出于我的目的，我需要 Java 7 和 Java 6 JDK 的 64 位和 32 位版本，所以有很多）：

```
# ls -al /usr/java/
total 24
drwxr-xr-x  6 root root 4096 Sep  2 11:02 .
drwxr-xr-x 14 root root 4096 Aug  9 22:14 ..
lrwxrwxrwx  1 root root   16 Aug 26 20:05 default -> /usr/java/latest
drwxr-xr-x  8 root root 4096 Sep  2 10:52 jdk1.6.0_35
drwxr-xr-x  8 root root 4096 Sep  2 10:52 jdk1.6.0_35-32
drwxr-xr-x  8 root root 4096 Sep  2 10:52 jdk1.7.0_07
drwxr-xr-x  8 root root 4096 Sep  2 10:52 jdk1.7.0_07-32
lrwxrwxrwx  1 root root   11 Sep  2 10:54 jdk6 -> jdk1.6.0_35
lrwxrwxrwx  1 root root   14 Sep  2 10:54 jdk6-32 -> jdk1.6.0_35-32
lrwxrwxrwx  1 root root   11 Sep  2 10:54 jdk7 -> jdk1.7.0_07
lrwxrwxrwx  1 root root   14 Sep  2 10:54 jdk7-32 -> jdk1.7.0_07-32
lrwxrwxrwx  1 root root    4 Sep  2 10:55 latest -> jdk7
# ls -al /usr/bin/java*
lrwxrwxrwx 1 root root 26 Aug 26 20:05 /usr/bin/java -> /usr/java/default/bin/java
lrwxrwxrwx 1 root root 27 Aug 26 20:05 /usr/bin/javac -> /usr/java/default/bin/javac
lrwxrwxrwx 1 root root 29 Aug 26 20:05 /usr/bin/javadoc -> /usr/java/default/bin/javadoc
lrwxrwxrwx 1 root root 27 Aug 26 20:07 /usr/bin/javah -> /usr/java/default/bin/javah
lrwxrwxrwx 1 root root 28 Aug 26 20:05 /usr/bin/javaws -> /usr/java/default/bin/javaws
# java -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T20:34:13.783

在 ubuntu lucid 64 位上，我需要将此链接添加到链中：

```
ln -s /usr/java/latest /usr/java/default 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T04:30:37.353

甲骨文对 Java 有替代方案的限制是很好的。我认为openjdk 很不错。在 Ubuntu 等 debian 系统上安装它很轻松。请像这样使用 apt-get：

```
$ sudo apt-get update
$ sudo apt-get install openjdk-7-jdk 
```

如果您的 apt-get 缓存/元数据未使用包括 openjdk-7 的存储库最新更改进行更新，则需要更新。除非您的发行版不是很旧，否则 pacakge openjdk-7-jre 的逻辑安装也应该可以正常工作。

# facebook - 获取朋友列表并了解他们是否安装了我的应用程序

> ID：10471566
> 
> 赞同：2
> 
> 时间：2012-05-06T15:05:53.850
> 
> 标签：facebook, apache-flex, facebook-graph-api

我正在使用 Eclipse FDT 在 facebook 页面上为 facebook 编写 Flex 应用程序。我希望能够获取同一用户的朋友列表，并区分安装了该应用程序的朋友和没有安装该应用程序的朋友。

我在 stackoverflow 上进行了搜索，发现用户使用旧的 REST API 做到了这一点，问题是我可以用 graph api 做到这一点吗？

如果根本无法使用图形 API……那么如何使用 REST API 呢？！:)

提出以下要求：

```
https://graph.facebook.com/me/friends?access_token?XXX 
```

我可以获取该用户的朋友列表。但如果安装了我的应用程序，它不会提供标志。我到底能做什么，怎么做？！

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T17:05:37.987

您有两种方法可以做到这一点，使用图形 api 和 fql。

使用[图形 api](http://developers.facebook.com/docs/reference/api/)，您可以向*[/me/friends?fields=installed](http://developers.facebook.com/tools/explorer?method=GET&path=me/friends%3Ffields%3Dinstalled)*发出请求，该请求应返回用户列表，安装了应用程序的用户将具有以下形式：

```
{
    "installed": true, 
    "id": "USER_ID"
} 
```

没有该应用程序的将是这种形式：

```
{
    "id": "USER_ID"
} 
```

使用[FQL](http://developers.facebook.com/docs/reference/fql/)使用[此查询](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%20FROM%20user%20WHERE%20not%20is_app_user%20and%20uid%20IN%20(SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me()))：

```
SELECT 
    uid
FROM 
    user 
WHERE 
    is_app_user 
    AND 
    uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:03:54.560

[我刚刚在这里](https://stackoverflow.com/questions/22905210/fb-friends-list-who-have-already-authenticated-the-same-application/22906608#22906608)回答了这个问题

希望这个答案能帮助一些人。

# c# - C# ASP.NET CSS 样式

> ID：10471567
> 
> 赞同：0
> 
> 时间：2012-05-06T15:06:01.090
> 
> 标签：c#, asp.net, css

我在 aspx.cs 文件中遇到 css 样式问题

```
 HttpContext.Current.Response.Write("<table class=\'bordered\' cellpadding=\'5\' color: \'red\' <tr>"); 
```

`class=\'bordered\'`工作 `cellpadding=\'5\'`但`color: \'red\'`不工作，我找不到问题请帮忙；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:09:45.720

`color`需要包裹在`style`标签内：

```
 HttpContext.Current.Response.Write("<table class=\'bordered\' cellpadding=\'5\' style=\"color:red;\"><tr>"); 
```

演示：http: [//jsbin.com/ofapud](http://jsbin.com/ofapud)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:07:40.520

`'`由于您使用的是双引号，因此您不必转义字符。

试试这个：`HttpContext.Current.Response.Write("<table class='bordered' cellpadding='5' color: 'red' <tr>");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:26:15.713

这应该很简单

```
Response.Write("<table class='bordered' cellpadding='5' color: 'red'> <tr>"); 
```

# android - 控制二维码扫描动作

> ID：10471569
> 
> 赞同：0
> 
> 时间：2012-05-06T15:06:20.897
> 
> 标签：android, objective-c, ios, qr-code

我正在寻找执行以下操作的 QR 码：

1.  从应用程序内部扫描时，它会显示一个自定义警报，（例如“你赢了 5 美元”）
2.  当使用不同的 QR 码阅读器（非应用程序）扫描时，它会转到一个移动网页，引导用户下载应用程序。

我的主要问题是：当不是你自己的阅读器扫描二维码时，你能控制会发生什么吗？（如果您愿意，可以选择“默认”操作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:22:58.483

您想为 URL 注册一个意图。

例如，假设 QR 包含以下 URL

```
http://m.example.com/12345 
```

如果您的应用程序对其进行扫描，它会识别出它是您服务的有效 URL（因为它包含您的域）。然后它从它的数据库中查找代码 (12345) 并看到它包含“你赢了 5 英镑”或其他内容。

如果常规扫描仪读取代码，它将访问您的移动网站 - 然后您可以将它们重定向到其设备的应用商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:51:36.500

您可以在您的 URL 中添加一个哈希（http://foo.com/index.html#You won $5!，其中 # 之后的所有内容都是哈希）并查找哈希。您还可以在哈希前加上您知道的内容，然后在显示警报视图时删除前缀。在标准 QR 阅读器中，它只会打开网站而忽略哈希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:36:04.753

使用 qr-zbar-ane 原生扩展并在阅读 QR 码后对其进行编码以制作您想要的内容。您可以在以下位置找到示例和扩展下载： http: [//www.nativext.com/ane-by-os/ios/qr-reader-native-extension/](http://www.nativext.com/ane-by-os/ios/qr-reader-native-extension/)

并使用此代码导航到您扫描的 URL：

```
protected function scannedHandler( event : QRZBarEvent ) : void {
    qr.removeEventListener( QRZBarEvent.SCANNED, scannedHandler );
    navigateToURL(new URLRequest(event.result));
} 
```

# jpa - 具有 EBean 和 Postgres 的类中的一组枚举器值

> ID：10471570
> 
> 赞同：1
> 
> 时间：2012-05-06T15:06:28.080
> 
> 标签：jpa, playframework, ebean

我正在使用 Play Framework 2.0.1 和 EBean 中的构建来访问我的数据库数据。

我有一个枚举器温度，它包含以下值：HOT、WARM、COLD 等。

我有一个映射到数据库表的类。在这个类中，我希望能够存储一组温度值，但是，我不知道如何将它与 EBean 映射。

到目前为止，我有：

```
 Set<Temperature> temperature;

    @ElementCollection 
    @Column(name = "TEMPERATURES", nullable = false)
    public void setTemperature(Set<Temperature> temperature) {
        this.temperature = temperature;
    } 
```

但是，当我运行我的应用程序时，进化脚本不包括创建 TEMPERATURES 列。

任何想法如何正确地做到这一点？

# regex - 应该允许什么样的用户名？

> ID：10471574
> 
> 赞同：0
> 
> 时间：2012-05-06T15:06:52.407
> 
> 标签：regex, string

我认为这是一个非常个人化的问题，但是当我正在设计我的网站上的用户名的结构和应该允许哪些字符时，我开始思考，我是不是太苛刻了？什么应该限制，什么不应该？

这是我的用户名规则：

*   必须以 az AZ 开头
*   AZ AZ 0-9。_ 被允许
*   必须介于 3 - 20 个字符之间
*   不能以空格结尾
*   不能连续包含两个空格
*   空格后必须以 a-zA-Z0-9 开头

用户名通常有什么好的方面？我是不是太苛刻了？我要严格吗？我应该让空格等后面的其他字符吗？

这是我的正则表达式，如果有人感兴趣：

```
/^(?=.{3,20}$)[a-zA-Z][a-zA-Z0-9_.^]*(?: [a-zA-Z0-9]+)*$/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:09:47.330

如果您要在 url 中使用用户名，请对其应用 slug 规则。你可以在这里找到一些实现：http: [//www.codecodex.com/wiki/Generate_a_url_slug](http://www.codecodex.com/wiki/Generate_a_url_slug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:50:34.653

经过一些研究，我决定使用该主题中描述的模式。可以这么说是“可以接受的”。

# php - 在网络服务器上集成程序

> ID：10471575
> 
> 赞同：0
> 
> 时间：2012-05-06T15:07:06.393
> 
> 标签：php

我想使用您可以在[此处](http://www.articlediary.com/article/php-script-for-pdf-to-html-conversion-125.html)找到的“PDFToHTML”工具。不幸的是，我不知道如何安装它并在我的网络服务器上执行它。我想知道是否有人对此很熟悉，是否有任何可用的教程或其他东西，因为我不知道要搜索什么。

主要是我需要帮助/教程如何：

1.  在网络服务器上安装该工具。（我的主机是bluehost）
2.  执行程序以创建文件
3.  这不是必需的，但最后我想压缩文件。

这里有一些更多信息，但他们没有解释如何安装它。 [http://www.articlediary.com/article/php-script-for-pdf-to-html-conversion-125.html](http://www.articlediary.com/article/php-script-for-pdf-to-html-conversion-125.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:39:22.057

Wowsers，这是一个可怕的工具。要执行它，您必须通过 PHP 中的系统命令之一运行它，这意味着您需要 shell 访问权限。

1.  如果您在共享主机上，您甚至可能无法运行该命令。也许看看 Bluehost 的功能，看看你是否真的可以做到这一点。你也可以尝试一个简单的命令，比如 System('ls'); 看看它是否会运行。

如果您确实有权运行 shell 脚本，请转到您粘贴的文章中的链接：http: [//sourceforge.net/projects/pdftohtml/](http://sourceforge.net/projects/pdftohtml/) 和 google 在 linux 上安装 tar 文件。（如果您在共享主机上，您可能也不能这样做）。

1.  只需按照他们给出的示例进行操作即可。

2.  安装另一个压缩文件的软件包，例如 zip。

# c - 这里有什么错误？删除一个节点，链表，

> ID：10471578
> 
> 赞同：0
> 
> 时间：2012-05-06T15:07:39.687
> 
> 标签：c

我写了这段代码，我想知道我的问题是什么，如果你能帮我修复我自己写的代码，它会对我有很大帮助......编辑：我已经把它改成这个，现在它没有给我运行时错误，但是当我打印名称或检查节点是否存在时，它说它是......

```
void node_delete(friend *amit) // Deleting a node
{
 friend* temp;
 int flag = 0;
 while (head != NULL) // As long the node isnt the last one
 {
       if (0 == (strcmp(head -> next -> name, amit -> name))) // If the name that the user entered matchs a name in the linked list,
       { // It'll skip it
            temp = head -> next;
             head -> next = head -> next -> next; // Deletes a node from the linked list
             flag = 1;
       }
       if (flag == 1) break;
       head = head -> next; // Going to the next node
}
 free(temp); // Freeing the deleted node
 printf ("%s\n", amit -> name);
} 
```

主要是：

```
amit.name = "amit"
amit.age = 16
amit.gender = 'm'
node_delete(&amit); 
```

和结构定义：

```
typedef struct friend // The struct
 {
   char *name; 
   int age;
   char gender; 
   struct friend* next; // A pointer that points to the next node in the linked list
}friend; 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:16:36.600

以下是前几行的一些注释：

```
 head = amit;
 head -> next = amit;  // same as amit->next = amit;
 amit -> next = NULL;  // same as head->next = null;
 while (head -> next != NULL) // will never do anything since head->next is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:31:44.877

```
void node_delete(char *name)
{
 friend *tmp, **p;

 for (pp = &root; (tmp = *pp) ; pp = &tmp->next) 
 {
     if (strcmp(tmp->name, name)) continue; // No match: walk on
     printf("Deleted %s\n", tmp->name);
     *pp = temp->next;
     free(tmp);
     break;
 }    
} 
```

（假设一个指向链表头部的全局根指针）调用如下：

```
node_delete("Amit"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:33:33.387

```
friend *head = NULL;

...

add(data) {
  friend *next = malloc(sizeof(bla));
  fill(next, data);

  if (head == NULL) 
    head = next; 
  else {
    next->next = head;
    head = next;
  }
}

del(data) {
  if (head) {
    if (your_check(head, data)) {
       to_free = head;
       head = head->next;
       free(to_free);
    } else {
      friend *list = head;
      while (list->next) {
        if (your_check(list->next, data)) {
          to_free = list->next;
          list->next = list->next->next;
          free(to_free);
        }
        list = list->next;
      }
    }
  }
} 
```

# visual-studio-2010 - XAML does not reflect changes

> ID：10471582
> 
> 赞同：3
> 
> 时间：2012-05-06T15:07:56.463
> 
> 标签：visual-studio-2010, xaml

I've been writing a UI heavy program in C# with WPF. Suddenly, the changes that I'm making to my XAML code have stopped having any effect on the compiled program. I've tried re-compiling, cleaning and doing a total rebuild, and restarting, all to no avail. I don't know if this is helpful, but I can write nonsense in the XAML, and of course Intellisense goes crazy, but it still compiles and runs as though I haven't changed anything. I can even delete the entire XAML text, recompile, and it still runs as though nothing has changed. I'm presuming this is some kind of bug or setting in Visual Studio. More likely than not its super obvious and I'm completely overlooking it. Anyone have any thoughts?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:31:26.160

For those who are interested, I managed to resolve the issue by launching a new project and copying the code over. A bit of a blunt approach, but it worked. Thus, the problem must indeed have been a settings issue, as we suspected. Thanks for your efforts XAMeLi!

# c# - 这是用 MD5 加密密码的好方法吗？

> ID：10471584
> 
> 赞同：0
> 
> 时间：2012-05-06T15:08:04.403
> 
> 标签：c#, encryption, passwords, md5

我以前从未加密过密码，这就是我在[本文](http://www.4guysfromrolla.com/articles/103002-1.aspx)的帮助下想到的。这篇文章不包括盐，所以我不得不自己弄清楚：

```
 UTF8Encoding encoder = new UTF8Encoding();
        byte[] salt = new byte[8];
        new Random().NextBytes(salt);
        byte[] encodedPassword = encoder.GetBytes(txtPassword.Text);
        byte[] saltedPassword = new byte[8 + encodedPassword.Length];
        System.Buffer.BlockCopy(salt, 0, saltedPassword, 0, 8);
        System.Buffer.BlockCopy(encodedPassword, 0, saltedPassword, 8, encodedPassword.Length);
        byte[] encryptedPassword = new MD5CryptoServiceProvider().ComputeHash(saltedPassword);
        byte[] saltedEncryptedPassword = new byte[8 + encryptedPassword.Length];
        System.Buffer.BlockCopy(salt, 0, saltedEncryptedPassword, 0, 8);
        System.Buffer.BlockCopy(encryptedPassword, 0, saltedEncryptedPassword, 8, encryptedPassword.Length); 
```

随着`saltedEncryptedPassword`被存储在数据库中。正如您可能注意到的那样，在涉及盐的地方，我在将字节数组连接在一起时遇到了一些麻烦。我做对了吗，还是有更好的方法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T15:28:52.927

密码哈希应该很**慢**，而不是很快。
哈希值越快，攻击者通过密码字典运行的速度就越快。

因此，您永远不应该使用 SHA 之类的通用哈希作为密码。

相反，请使用经过验证的慢速技术，如 scrypt 或[PBKDF2](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:13:51.003

我将仅将盐值和哈希（不是 saltedencryptedPassword）存储在数据库的单独列中，并使用输入的密码重新生成哈希。您可以在这里找到类似的答案[Hash and salt passwords in C#](https://stackoverflow.com/questions/2138429/hash-and-salt-passwords-in-c-sharp)。[1`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx) _

我有时只是将 GUID 作为盐值，然后在散列之前将其添加到密码中。

MD5 不再安全（2004 年被中国人破解），您可以使用 SHA256 或 SHA512 代替。编辑：但是这些算法的计算速度非常快，因此更容易破解。@SLaks 建议使用 scrypt 或 PBKDF2，因为它们更难计算。[.NET 在Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)下有一个内置的 PBKDF2 实现。

另一点：我不会每次都创建一个新的 Random() 对象。如果您在短时间内调用它，每次都会生成相同的随机数序列，因为种子值是基于时间的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-06T15:10:45.717

不，这不好。MD5 已经不行了。它与自身发生冲突，不值得信任。您应该使用 SHA256。

```
public string getSHA256(string input)
{
    try
    {
        return BitConverter.ToString(SHA256Managed.Create().ComputeHash(Encoding.Default.GetBytes(input))).Replace(“-”, “”).ToLower();
    }
    catch (Exception e)
    {
        return string.Empty;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-06T15:15:16.447

我总是使用 SHA2-512 对我的密码进行**哈希处理。**在我看来，密码永远不应该被加密，而总是被散列（无法追溯到原始密码）。

但是请不要再使用 MD5，它现在很容易被翻译成密码。

# memory-management - Jboss 5.1.0.GA 服务器上的内存使用率非常高

> ID：10471588
> 
> 赞同：1
> 
> 时间：2012-05-06T15:08:44.873
> 
> 标签：memory-management, jvm, jboss5.x

我的生产服务器在 RHEL 5.6 上运行 32GB RAM。当 JBOSS(5.1.0.GA) 启动时，内存使用显示为 24 GB RAM。为什么 JBOSS 占用这么多内存？top 命令显示 %CPU - 80% - JAVA。

# data-structures - 跳过列表的预期空间消耗

> ID：10471589
> 
> 赞同：5
> 
> 时间：2012-05-06T15:08:51.697
> 
> 标签：data-structures, space-complexity, skip-lists

插入 n 个元素后，跳过列表使用的**预期空间是多少？**

我预计在最坏的情况下，空间消耗可能会无限增长。

维基百科说“空间 O(n)”。

如何以一种或另一种方式证明这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:27:07.070

根据[这篇](http://www.cs.uwaterloo.ca/research/tr/1993/28/root2side.pdf)我觉得比维基百科更可靠的论文，维基**百科是错误的**。概率跳过列表是`Theta(nlogn)`最坏情况下的空间复杂度。

> 尽管 PSL 的平均性能相当不错，但在最坏的情况下，它的 Theta(n lg n) 空间和 Theta(n) 时间复杂度高得无法接受

最坏的情况不是无限的，因为您可以将自己限制`f(n)`在列表的数量、位置`f(n) = O(logn)`，并在达到此高度时停止抛硬币。所以，如果你有`f(n)`完整的行，你会得到`O(nlogn)`节点总数，因此这种情况下的空间复杂度是`O(nlogn)`，而不是`O(n)`。

* * *

**编辑**：
如果您正在寻找*预期的空间*消耗，而不是问题中最初陈述的 *最糟糕*
的情况，那么：让我们将“列”表示为底部节点，并将所有节点“向上”表示为它。

```
E(#nodes) = Sigma(E(#nodes_for_column_i)) (i in [1,n]) 
```

上述等式是正确的，因为期望值是线性的。

`E(#nodes_for_column_i) = 1 + 1/2 + ... + 1/n < 2`（对于每个 i）。这是因为概率为 1 它有 1 个节点，当 p=1/2 时，每个节点都有一个额外的节点。当 p'=1/2 时，它们中的每一个都有一个额外的节点 (total p*p'=1/4) ,.... 因此我们可以得出：

```
E(#nodes) = n*E(#nodes_for_each_column) = n*(1+1/2+...+1/n) < 2n = O(n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:27:23.007

让我们有一个具有 N 个节点的确定性跳过列表。除了数据值，列表还包含：

1 级有 N 个指针，2 级有 N/2 个指针，3 级有 N/4 个指针，依此类推……

N + N/2 + N/4 + N/8 +..N/2^k 是几何级数之和，其极限是2N，所以最大内存消耗是N*SizeOf(Data) + 2*N*SizeOf （指针）= O(N)。

我没有考虑到层间链接，但它们的数量大约是指针数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T17:18:10.287

# 预期空间复杂度

跳过列表具有`logn`层。跳过列表中的每个元素都出现在一个或多个层中。为了测量跳过列表的预期空间复杂度，我们可以评估任意元素 x 出现的预期层数。

我们知道 x 有 100% 的几率只出现在最底层，有 50% 的几率出现​​在最底层和最底层的 2 层，有 25% 的几率出现​​在最底层的 3 层，有 12.5% 的几率出现在底部 4 层，依此类推。

在数学上，我们可以表示 x 出现的预期层数如下......

`Sum(i / 2^(i-1)) from i=1 to logn`

... `i`x 可能出现的层数在哪里。

直观地，我们可以看到上述总和收敛到一个常数，因为分母的增长速度比分子快得多。您可以通过将方程代入 Wolfram Alpha 来验证这一点（对于非常大的 n 值，总和收敛到 4）。这意味着...

`[Sum(i / 2^(i-1)) from i=1 to logn] = O(1)`

因此，我们已经证明在任意跳过列表中存储任意元素平均需要恒定空间。为了获得在跳过列表中存储`n`元素的空间复杂度，我们只需乘以`n`.

`n*O(1) = O(n)`

因此，跳过列表具有线性预期空间复杂度。

* * *

# 最坏情况下的空间复杂度

这实际上要容易得多。我们知道有`logn`层次和`n`元素。在最坏的情况下，每个元素都在每一层中。因此，`O(nlogn)`。

# javascript - 'window.open' 被 Firefox 阻止

> ID：10471595
> 
> 赞同：8
> 
> 时间：2012-05-06T15:09:32.033
> 
> 标签：javascript, firefox, google-chrome, popup

我`window.open`在文档`ready`事件中使用并调用它，但它被 Firefox 中的弹出窗口阻止程序阻止。然后我将它添加到函数中并从按钮调用此函数，然后触发按钮单击但没有成功：

```
$(function(){    
    abcd();    
});

function abcd(){
    var popup = window.open("http://localhost/johndyer-mediaelement-7ed6c51/demo/index.php","mypopup","width=500,height=300");       
 } 
```

加载页面时，是否有某种方法可以在浏览器上打开外部弹出窗口或新选项卡？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T15:13:00.100

Firefox 有一堆规则可以帮助它决定是否应该阻止弹出窗口。通常如果动作是通过用户点击初始化的，firefox 将允许打开弹出窗口，但如果它是由“纯”javascript 完成的，它很可能会阻止它。

你可以在这里阅读：http: [//support.mozilla.org/en-US/kb/Pop-up%20blocker](http://support.mozilla.org/en-US/kb/Pop-up%20blocker)。

因此，如果您仔细阅读文章，您会注意到由用户单击初始化的弹出窗口将打开：

```
<input type="button" value="Click Me"/> 
```

和jQuery代码

```
$('input').click(function(){window.open("http://google.com");​​​​})​ 
```

即使打开了弹出窗口阻止程序。试试看：

[http://jsfiddle.net/demee/mQ9eR/](http://jsfiddle.net/demee/mQ9eR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T15:16:12.363

不要打开弹出式广告。这很烦人。

另一方面，如果它是用户想要看到的消息，那么您可以使用像[Colorbox这样的](http://www.jacklmoore.com/colorbox/)[jQuery](http://en.wikipedia.org/wiki/JQuery)插件来显示悬停模式窗口，而无需打开新的弹出窗口，用户可以轻松关闭该窗口。

# scala - 在 SBT 构建中添加其他目录以清理任务

> ID：10471596
> 
> 赞同：10
> 
> 时间：2012-05-06T15:09:42.923
> 
> 标签：scala, sbt

我有一个 SBT 版本，其中测试将临时文件创建到一个名为 temp 的目录中。当我调用 clean 任务时，如何告诉 SBT 删除此文件夹？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T23:38:00.217

`temp`在包含目录的项目中使用此设置：

```
cleanFiles <+= baseDirectory { base => base / "temp" } 
```

这会将“temp”目录添加到文件列表中，以便在`clean`运行时递归删除。

表示“根据`<`其他任务/设置进行配置”，`+`表示附加到当前文件列表，并且`baseDirectory`是提供项目基本目录的设置。

您可以查看如何`clean`使用该`inspect`命令进行配置，在[Inspecting Settings](http://www.scala-sbt.org/release/docs/Detailed-Topics/Inspecting-Settings)页面上有更详细的说明。已编辑的 sbt 会话显示了这种情况下的用法：

```
> inspect clean
Task: Unit
Description:
    Deletes files produced by the build, such as generated sources, compiled classes, and task caches.
Dependencies:
    clean-files
    clean-keep-files

> inspect clean-files
Setting: scala.collection.Seq[java.io.File] = List(<project>/lib_managed, <project>/target, <project>/temp)
Description:
    The files to recursively delete during a clean.
Dependencies:
    managed-directory
    target
    base-directory 
```

您可以看到它向您显示它是否是任务或设置、类型、描述以及用作输入的任务/设置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-07T09:08:25.663

[Mark Harrah 的回答](https://stackoverflow.com/a/10490584/5236247)现在已经过时了。

这是一个适用于 sbt 0.13 及更高版本的版本，也是唯一适用于 sbt 1.0 及更高版本的两个版本。

### 更新了[键附加](https://www.scala-sbt.org/1.x/docs/Appending-Values.html)语法。

在 sbt 0.13 之前，你有`<+=`添加附加值的语法，你可以`apply`在键上。

在 0.13 中，引入了一种新的、更统一的语法，部分称为`value`DSL。从 1.0 开始，旧语法已被删除。

```
// From the old, apply-based version...
cleanFiles <+= baseDirectory { base => base / "temp" }

// ...we change to .value and collection-like syntax
cleanFiles += baseDirectory.value / "temp" 
```

`cleanFiles`和其他基于集合的键现在模仿（可变）集合，因此您可以通过`+=`运算符将值附加到它。如果您有多个值，请使用`++=`or`List`代替`Seq`。

`.value`写的时候不强制评价`baseDirectory`，但是每次`cleanFiles`都是计算出来的，所以每个子项目都不一样。

### 更新了检查和命令语法

`inspect clean-files`语法上也有细微差别。

1.  `hyphen-named-commands`已在 0.13 中弃用并在 1.0 中删除。它们被替换为`lowerCamelCaseCommands`，因此在控制台中与在您的`build.sbt`.
2.  `inspect`不再显示您的密钥的值（我找不到相应的版本信息）。相反，您必须使用`show`.

    ```
    sbt:root-_t> show cleanFiles
    [info] * C:\Users\Adowrath\_T\target\scala-2.12
    [info] * C:\Users\Adowrath\_T\target\streams
    [info] * C:\Users\Adowrath\_T\temp
    [success] Total time: 0 s, completed 06.02.2018, 10:28:00 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T08:41:34.853

一种可能性是您的测试会自行清理，就像敏捷钢指出的那样。

另一种可能性是您创建一个取决于测试任务的自定义清理任务。有关如何自定义现有任务（如您的案例中的测试）的更多信息，请参阅我的答案：[添加对现有规则的依赖](https://stackoverflow.com/questions/8554992/how-to-add-dependency-to-existing-rule-in-sbt/8558010#8558010)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-18T11:53:37.663

以前建议的解决方案现在已弃用。贝娄是对我有用的代码。

```
cleanFiles += new java.io.File(path) 
```

# c++ - OpenGL VBO：绘制球体

> ID：10471601
> 
> 赞同：3
> 
> 时间：2012-05-06T15:10:06.810
> 
> 标签：c++, opengl, geometry, vbo

我在画出一个球体时遇到了一些麻烦。

```
std::vector<GLfloat> ballVerts;

for(int i = 0; i <= 40; i++)
{
    double lat0 = M_PI * (-0.5 + (double) (i - 1) / 40);
    double z0  = sin(lat0);
    double zr0 =  cos(lat0);

    double lat1 = M_PI * (-0.5 + (double) i / 40);
    double z1 = sin(lat1);
    double zr1 = cos(lat1);

    for(int j = 0; j <= 40; j++)
    {
        double lng = 2 * M_PI * (double) (j - 1) / 40;
        double x = cos(lng);
        double y = sin(lng);

        ballVerts.push_back(x * zr0); //X
        ballVerts.push_back(y * zr0); //Y
        ballVerts.push_back(z0);      //Z

        ballVerts.push_back(0.0f); 
        ballVerts.push_back(1.0f); 
        ballVerts.push_back(0.0f); 
        ballVerts.push_back(1.0f); //R,G,B,A

        ballVerts.push_back(x * zr1); //X
        ballVerts.push_back(y * zr1); //Y
        ballVerts.push_back(z1);      //Z

        ballVerts.push_back(0.0f); 
        ballVerts.push_back(1.0f); 
        ballVerts.push_back(0.0f); 
        ballVerts.push_back(1.0f); //R,G,B,A
    }
}

glGenBuffers(1, &ballVbo);
glBindBuffer(GL_VERTEX_ARRAY, ballVbo);

GLuint sphereSize = 3200*7*4; //3200 vertixes * 7 floats
glBufferData(GL_VERTEX_ARRAY,sphereSize, &ballVerts, GL_STATIC_DRAW);

/*
    Draw a ball
*/
glBindBuffer(GL_VERTEX_ARRAY, ballVbo);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 7*4, 0);
glEnableClientState(GL_COLOR_ARRAY);
glColorPointer(4, GL_FLOAT, 7*4, (void*)(3*4));

glDrawArrays(GL_TRIANGLE_STRIP, 0, 3200);

glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

生成球体的代码在立即模式下工作正常，但是当我把它放在 VBO 中时，我不断从 glDrawArrays 收到访问冲突异常。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T16:29:30.347

```
glBufferData(GL_VERTEX_ARRAY,sphereSize, &ballVerts, GL_STATIC_DRAW); 
```

`ballVerts`不是*数组*。它是一个`std::vector`. 获取a的`std::vector`地址不会得到包含*在*`vector`. 你需要使用`&ballVerts[0]`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T10:23:24.667

更好的预调整向量并使用迭代器扫描它，如下所示：

```
 std::vector <GLfloat> vertices;
 vertices.resize(count * 3);
 ...
 std::vector <GLfloat>::iterator v = vertices.begin();

 for( U32 r = 0; r < m_prec/2; ++r ) //широта
    {
        float const theta1 = -F_PI_BY_TWO + pi2p * r;
        float const theta2 = theta1 +  pi2p;

        for( U32 s = 0; s < m_prec; ++s ) //долгота
        {
            float const theta3 =  s * pi2p;     

            float ex = cosf(theta3) *cosf(theta2);
            float ey = sinf(theta2);
            float ez = sinf(theta3) * cosf(theta2);
            *v++ = m_x + m_radius * ex;
            *v++ = m_y + m_radius * ey;
            *v++ = m_z + m_radius * ez; 
```

等等

::glVertexPointer(3, GL_FLOAT, 0 , &vertices[0]);

会工作

# configuration - Kconfig 的调试或详细模式？

> ID：10471606
> 
> 赞同：4
> 
> 时间：2012-05-06T15:10:33.377
> 
> 标签：configuration, linux-kernel, makefile

我正在使用 LeopardBoard DM368，我想启用一些视频硬件。相关模块为 vpfe-capture、isif 和 tvp7002。

我已经编写了一个 defconfig 文件，其中包含我认为正确的 CONFIG_FOO 参数集，以便一切正常工作。从各种 Kconfig 文件中出现的依赖关系来看，我相信我所做的一切都是正确的，但我似乎无法阻止 kconf 丢弃`CONFIG_ISIF`和`CONFIG_VPFE_CAPTURE`.

我非常丑陋的选择是进入并开始手动破解makefile。这可以获取我想要的模块，但它显然与 Kconfig 系统的设计和意图不一致，并且会破坏任何像“make gconfig”这样的工具。

make 有一个“-d”详细标志来解释它是如何处理依赖关系的。kconf 有什么类似的东西，我可以在哪里得到它来解释为什么它没有给我我想要得到的两个 CONFIG？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:53:38.703

对不起，如果这有点插件。:)

我编写了一个 Python 库，用于处理基于 Kconfig 的配置系统 ( [Kconfiglib](https://github.com/ulfalizer/Kconfiglib) )。它允许轻松检查符号依赖关系（参见 Symbol.__str__()，例如通过打印符号调用），并允许您在配置的上下文中设置值和评估任意表达式，这可以方便地找出正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:37:56.467

您可以尝试运行`make V=2 oldconfig`，看看是否显示任何其他线索。

# c# - 使用 c# 停止 QTP 执行

> ID：10471615
> 
> 赞同：2
> 
> 时间：2012-05-06T15:11:42.190
> 
> 标签：c#, qtp

我最近开始研究 Selenium 和 QTP。我的任务是满足测试团队的要求，即使用 C# 以编程方式停止 QTP。这个小型实现是团队想要实施的框架的一部分。

我不确定我做错了什么，但根据文档，我正在做的事情在技术上应该有效，但事实并非如此。

我能够获得测试状态等，但是当我尝试停止测试时，一切都出错了。QTP 停止响应，我什至无法手动停止测试。下面是我的代码：

**示例 1**

```
QuickTest.Application qtp = new QuickTest.Application();
if (qtp.Test.IsRunning)
{
    MessageBox.Show("Test is running"); // works
    qtp.Test.Stop(); // qtp halts and i can't stop execution manually also
} 
```

**示例 2**

和上面一样，只是我尝试使用以下语句连接到 qtp：

```
var app = Marshal.ActivateObject("QuickTest.Application") as QuickTest.Application; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:50:17.737

杀死QTP的进程，而不是停止执行怎么样？是否解决了你的问题。

# ruby-on-rails - RoR可以通过控制台连接postgresql数据库，但不能通过app中的代码

> ID：10471617
> 
> 赞同：0
> 
> 时间：2012-05-06T15:11:56.667
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在构建一个与此处概述的应用程序直接等效的应用程序[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)。

当我尝试`Post.create(:content => "A new post")`在 rails 控制台中进行操作时，一切都按预期/希望进行。

但是，当我将相同的代码放入应用程序时，然后使用工头启动应用程序时出现错误。这是完整的错误：

```
11:09:07 web.1     | started with pid 2578
11:09:08 web.1     | /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:398:in `retrieve_connection': ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished)
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:228:in `columns'
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:243:in `column_defaults'
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/base.rb:482:in `initialize'
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/persistence.rb:44:in `new'
11:09:08 web.1     |    from /home/ryan/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/persistence.rb:44:in `create'
11:09:08 web.1     |    from app/models/newPost.rb:3:in `<main>'
11:09:08 web.1     | process terminated
11:09:08 system    | sending SIGTERM to all processes 
```

使用 Rails 3.2.3 和 ruby​​ 1.9.2。

谢谢

# c++ - 子类从 C++ 中的基类继承什么？

> ID：10471618
> 
> 赞同：2
> 
> 时间：2012-05-06T15:12:11.517
> 
> 标签：c++, inheritance

我正在尝试理解继承的概念（用 C++ 进行测试）。这里引用自：[http](http://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming) ://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming )

“在面向对象编程 (OOP) 中，继承是一种重用现有对象的代码或从现有对象建立子类型或两者兼而有之的方法，具体取决于编程语言支持”

然后我测试了这段代码：

```
class Person
{
public:
    int ii;
    Person():ii(0){}
};
class Student : public Person
{
};
class Student1 : public Person
{
}; 
```

然后，

```
Person p;
Student s;
Student1 s1;
s.ii = 222;
p.ii = 333;
cout << s.ii << endl; // prints 222
cout << s1.ii << endl; // prints 0
cout << p.ii << endl; // prints 333 
```

如结果所示，每个子类都有自己的 ii 变量版本，每个子类都从基类获取复制值。因此，当我们更改一个时，它不会影响其他的。

这不是我一开始想到的。我认为从基类继承时，所有子类都会继承相同的属性实例。每个子类不需要保留自己的版本。这可以利用重复使用和节省空间的优势。

我是不是误会了什么？如果我是正确的，那么其他 OOP 语言也是如此吗？（我知道我可以使用静态变量来达到我的想法，但这不是我在说的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:15:13.963

您有三个类的**实例**，因此它们是独立的。这意味着子类不必声明`ii`. 想想模板之类的类（不要将它们与语言构造模板混淆），然后创建它们的实例。

您不希望所有 Person 始终具有相同的字段值吗？

话虽如此，您可能正在寻找（可能不是/希望不是）**静态**变量。

在面向对象中查找**实例**和**类**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:21:38.907

您不应将类视为现有实体（至少在 C++ 中），而应将其视为描述类*实例*行为的模式——即以某种方式创建的单个对象（在 C++ 中——使用显式或隐式*构造函数*）。

该代码`Student s;`描述`s`为 class 的实例`Student`。类定义中的每个字段都引用实例，而不是类本身。

但是，您可以声明一个*静态*字段，该字段将在 的所有实例之间共享`Student`，即使没有创建单个实例：您可以将其视为*类*变量，与*实例*变量相反。

所以，回到你的问题：子类继承了*模式*：实例中存在一些字段/方法的事实。然而，这些值对于实例是完全独立的（不包括类（静态）变量）。

C++ 中的继承仅存在于*类*级别，而不存在于*实例*级别。

# php - Codeigniter 不能与 Verots 类一起使用。上传

> ID：10471625
> 
> 赞同：0
> 
> 时间：2012-05-06T15:13:33.970
> 
> 标签：php, image, codeigniter, upload, image-manipulation

我遇到了一个我无法真正弄清楚的问题 - 我无法让 class.upload 与 CodeIgniter 框架一起正常工作。

[为了实现它，我尝试了此处](http://codeigniter.com/forums/viewreply/845667/)提供的代码片段，但它仍然无法正常工作。我已经打开了登录，我得到的只是

> ERROR - 2012-05-06 17:51:24 --> Severity: Warning --> include_once(application/core/MY_Imaging.php) [function.include-once]: failed to open stream: No such file or directory /var/www/mypage/application/config/config.php 376 ERROR - 2012-05-06 17:51:24 --> Severity: Warning --> include_once() [function.include]: Failed opening 'application/core/MY_Imaging.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') /var/www/mypage/application/config/config.php 376

It tries to include `MY_Imaging.php` for reasons unknown to me. I haven't made any libraries for codeigniter, but I know that by using `$this->load->library("imaging");` it should load library Imaging which it is not doing.

I'm currently out of ideas on how to solve this.

Thank you for your time

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:22:54.320

您提供的链接清楚地说明了

```
1\. Copy the folder class.upload to libraries directory;

2\. Create a new library with this code: 
```

查看您的错误..您尚未在其中创建`MY_Imaging`库`application/library`

# ruby-on-rails - Heroku RoR 应用程序上的未定义方法“+”

> ID：10471627
> 
> 赞同：0
> 
> 时间：2012-05-06T15:13:46.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, heroku

我正在用 Ruby-On-Rails 开发一个小型应用程序。在控制器中，我有这段代码：

```
@user = User.find(current_user.id)
@user.number = current_user.number + 1
@user.save! 
```

虽然它在本地运行没有问题，但它在第二行的 Heroku 上崩溃，并出现以下错误：

NoMethodError（nil:NilClass 的未定义方法“+”）

有关如何解决问题的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:16:52.950

如果将数字作为属性存储在数据库中，则应将默认状态设置为 0。

创建新的迁移并重新生成数字列。

```
def change
  remove_colum :users, :number
  add_column users, :number, :integer, :default => 0

  #ensure that all users with number == nil have got 0 instead nil 
  User.where(:number => nil).update_all(:number => 0)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:47:20.393

你也可以这样做：

```
@user.number = current_user ? current_user.to_i : 0
@user.save! 
```

# ios - 是在旧设备上忽略 openGL 效果更好，还是接受缓慢的性能？

> ID：10471629
> 
> 赞同：1
> 
> 时间：2012-05-06T15:13:50.867
> 
> 标签：ios, device, iphone-3g

我的应用程序遵循“让一切都闪闪发光”的趋势，在 iPhone4+ 和 iPad2+ 上看起来很棒，但在旧设备上有点窒息。有两种路线可供选择：

1.  无论如何，在应用程序上保持相同的外观。接受一些用户将有很长的加载时间。以我的经验，这似乎是最常见的方法，但例如，一些出色的应用程序（Sword & Sworcery）在 iPhone 3G 上的加载时间长得令人无法忍受。

2.  检测手机型号并决定（基于我的测试基准）跳过某些非关键动画或旧设备上的效果。这可能会导致有人在较旧的应用程序上看到它并认为“这个应用程序看起来不错，我猜”而不是“哇”。

除了“取决于上下文”之外，是否有“最佳实践”或行业标准？

**编辑：**我正在使用的（这可能在客观上更有用，怀疑论者）是这个，从[Erica Sadun 的伟大但更大的课程](https://github.com/erica/uidevice-extension/blob/master/UIDevice-Hardware.m)中瘦身：

```
+ (NSString *) platform {
  char *m = (char *)"hw.machine";
  return [self getSysInfoByName:m];
}

+ (BOOL) deviceIsLegacy {
  NSString *platform = [self platform];
  // LEGACY DEVICES:
  // iPhone 1, iPhone 3G
  // iPod 1, iPod 2
  // iPad 1

  if ([platform isEqualToString:@"iPhone1,1"]) return YES;
  else if ([platform isEqualToString:@"iPhone1,2"]) return YES;
  else if ([platform isEqualToString:@"iPod1,1"]) return YES;
  else if ([platform isEqualToString:@"iPod2,1"]) return YES;
  else if ([platform isEqualToString:@"iPod2,2"]) return YES;
  else if ([platform isEqualToString:@"iPad1,1"]) return YES;

  return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:24:40.547

我认为与您的情况相关的唯一“最佳实践”是说**如果您不是 100% 需要，请不要让用户等待！**

如果你担心品牌，那这不是问题：你可以决定不支持旧设备（我个人不同意），或者你可以看看苹果自己没有实现完全相同与旧设备中的魔力接口。它们不会在旧设备上显示很酷的 Siri（如果出于销售或 CPU 的原因，您可以争论），并且它们不允许某些图形元素，例如**背景图像**。

许多人喜欢在他们的 3G 上拥有背景图像或多任务处理，但是当他们越狱并允许这样做时，他们就会发现 Apple 禁用它的原因。

但是，您可以添加一个小徽章，上面写着“在较新的设备上观看效果最佳”，但这会让您的客户感到悲伤或嫉妒，所以...

# xml - XPath 查询（带有一些简单的正则表达式限制）

> ID：10471632
> 
> 赞同：2
> 
> 时间：2012-05-06T15:14:07.553
> 
> 标签：xml, regex, xpath

考虑一下我得到了以下 XML 吗？

```
<result>
    <_id>-3:1</_id>
    <_ver>0</_ver>
    <_class>Address</_class>
    <type>Residence</type>
    <street>Piazza di Spagna</street>
    <city>-4:0</city>
</result> 
```

查询以下各项的 xpath 是什么：

1.  对于所有不以“_”开头的标签。所以我会期待这样的东西：类型，街道，城市
2.  所有不以“_”开头的标签的文本正文。所以我会期待这样的东西：住宅，西班牙广场，-4：0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:53:40.817

使用 XPath 2.0 或 XQuery 1.0，您可以使用

1.  `/result/*/local-name(.)[not(starts-with(., '_'))]`
2.  `/result/*[not(starts-with(local-name(), '_'))]/string(.)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:11:03.727

**使用 XPath 1.0**（当然，这也是 XPath 2.0 解决方案）：

1.  `/*/*[not(starts-with(name(), '_'))]`

2.  `/*/*[not(starts-with(name(), '_'))]/text()`

# couchdb - 在 Knockoutjs 中处理来自 CouchDB 的 JSON 数据

> ID：10471638
> 
> 赞同：1
> 
> 时间：2012-05-06T15:15:04.487
> 
> 标签：couchdb, knockout.js, couchapp

我正在尝试从使用本地 Couchdb 的数据运行的 knockoutjs 获取示例代码。 [http://learn.knockoutjs.com/#/?tutorial=loadingsaving](http://learn.knockoutjs.com/#/?tutorial=loadingsaving)

我使用视图从数据库中获取我的任务。当 Couch 返回 rows.value.tasks

```
{"total_rows":5,"offset":0,"rows":[
{"id":"216c1717d57aa328b8d3e5a79f0008fe","key":["216c1717d57aa328b8d3e5a79f0008fe",1],"value":{"title":"derde title taak","isDone":false}}, 
```

我在函数 Task(data) 中添加了 .value 并在 var mappedTasks = $.map(allData.rows...我按下“添加”按钮，我在 .value is not defined 上出现错误。删除任务已处理且没有错误。

谁能帮我让这个例子工作？对我来说，下一步是将任务列表中的更改更新回 db。对此的帮助也非常受欢迎。

```
// TaskListViewmodel

function Task(data) {
    this.title = ko.observable(data.value.title);
    this.isDone = ko.observable(data.value.isDone);
}

function TaskListViewModel() {
// Data
var self = this;
self.tasks = ko.observableArray([]);
self.newTaskText = ko.observable();
self.incompleteTasks = ko.computed(function() {
    return ko.utils.arrayFilter(self.tasks(), function(task) { return !task.isDone() });
});

// Operations
self.addTask = function() {
    self.tasks.push(new Task({ title: this.newTaskText() }));
    self.newTaskText("");
};
self.removeTask = function(task) { self.tasks.remove(task) };

// Load initial state from server, convert it to Task instances, then populate self.tasks
 $.getJSON("http://127.0.0.1:5984/tasks/.../tasks", function(allData) {
    var mappedTasks = $.map(allData.rows, function(item) { return new Task(item) });
    self.tasks(mappedTasks);
}); 

}

ko.applyBindings(new TaskListViewModel, $("#DataKO")[0]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:46:53.790

问题在于这一行：

```
self.tasks.push(new Task({ title: this.newTaskText() })); 
```

您的 Task 构造函数期望数据参数具有“值”属性，但您只提供了“标题”。

# php - PHP 并不总能找到 XML 文件

> ID：10471641
> 
> 赞同：1
> 
> 时间：2012-05-06T15:15:31.990
> 
> 标签：php, xml, linux, apache

我环顾四周寻找类似的问题，但没有发现相同的问题，所以这里是：

我在 linux/apache 服务器上有这个网页，PHP 脚本在每次执行时都会打开一个 XML 文件，有趣的是，有时它可以读取文件，而在极少数情况下它不能……当它无法读取时说该文件不存在，要修复它，我只需要刷新页面。

XML 文件可以在子目录中找到（例如`/srv/www/page/subdir/file.xml`），并且只能手动更改并设置正确的权限（PHP 可以对其进行读写）。

我正在使用 simplexml，我得到的错误是：`I/O warning : failed to load external entity`

所以服务器上发生了一些奇怪的事情，我只是不知道是什么..

**编辑**：添加一些代码

```
if ( !file_exists( $file ) )
{           
    error_log("File " . $file . " does not exist!");
    //return FALSE;
}

if ( $obj = simplexml_load_file( $file ) )
{
    // do stuff
    return TRUE;
}
else
{
    error_log("Could not parse XML: " . $file );
    return FALSE;
} 
```

* * *

**已解决**：代码错误，而不是服务器错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:40:49.757

没有明显的解释为什么该文件偶尔不可用。可能是平台/操作系统问题，很难说。

但是，您可以将此创可贴应用于该问题，如果等待最多 3 秒使文件“重新出现”，它可能会解除阻止您：

```
$count = 0;
$found = FALSE;
while( $count < 3 && !$found ) {
   if ( !file_exists( $file ) ) {
      $count++;
      sleep( 1 ); // sleep 1 second to see if the file appears on the next try
   } else
      $found=TRUE;
}

if( !$found )
  die("file not found after 3 attempts"); 
```

# java - 应用程序在android中意外停止

> ID：10471644
> 
> 赞同：3
> 
> 时间：2012-05-06T15:15:43.543
> 
> 标签：java, android

我的 android 应用程序不断给我这个错误。`The application has stopped working unexpectedly. Please try again`. 我不知道我的代码有什么问题。我在这个应用程序上工作了几个小时，现在我的头都快炸开了。我在我的代码中做错了什么？

xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<CheckBoxPreference
    android:title="Enable/Disable Alarm"
    android:defaultValue="true"
    android:key="cbAlarm"
    android:summary="Enable or disable alarm for full charged battery" />

<RingtonePreference
    android:title="Choose Alarm"
    android:key="ringtone"
    android:summary="Choose ringtone as alarm for battery charged complete"
    ></RingtonePreference>

 </PreferenceScreen> 
```

主类文件

```
package com.zafar.batteryalarm;

import android.content.Intent;
import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.Preference;
import android.preference.PreferenceActivity;

public class BatteryAlarm extends PreferenceActivity {

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.alarm);

    final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("cbAlarm");

        checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {            
            public boolean onPreferenceChange(Preference preference, Object newValue) {
                if (newValue.toString().equals("true")) {
                    startService(new Intent(getBaseContext(), BatteryService.class));

                } else if(newValue.toString().equals("false")) {
                    stopService(new Intent(getBaseContext(), BatteryService.class));

                }
                return true;
            }
        });
}
} 
```

这是我的服务班

```
package com.zafar.batteryalarm;

import java.io.IOException;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.BatteryManager;
import android.os.IBinder;
import android.preference.PreferenceManager;
import android.widget.Toast;

public class BatteryService extends Service {

// protected static final Bundle Bundle = null;
private MediaPlayer mMediaPlayer;
private static final int NOTIFICATION_ID = 1;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    initNotification();
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    this.registerReceiver(this.batteryInfoReceiver, new IntentFilter(
            Intent.ACTION_BATTERY_CHANGED));
    return START_STICKY;
}

private BroadcastReceiver batteryInfoReceiver = new BroadcastReceiver() {
    private BroadcastReceiver batteryInfoReceiver;

    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Battery alarm is enabled", Toast.LENGTH_LONG).show();
        int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
        int plugged = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, 0);

        if (plugged == 2) {

            if (level == 100) {
                Toast.makeText(context, "Battery charge is completed. Unplug charger!", Toast.LENGTH_LONG).show();
                SharedPreferences getAlarms = PreferenceManager
                        .getDefaultSharedPreferences(getBaseContext());
                String alarms = getAlarms.getString("ringtone",
                        "default ringtone");
                // getting uri from MediaStore via filepath i.e.
                // content://media/internal/audio/media/29
                Uri uri = Uri.parse(alarms);

                mMediaPlayer = new MediaPlayer();
                try {
                    mMediaPlayer.setDataSource(context, uri);
                    final AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
                    if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
                        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                        mMediaPlayer.prepare();
                        mMediaPlayer.start();
                    }
                } catch (IOException e) {
                    // System.out.println("OOPS");
                    e.getStackTrace();
                }
            }
        } else if (plugged == 0) {
            mMediaPlayer.stop();
            unregisterReceiver(this.batteryInfoReceiver);
            // onDestroy();
        }
    }
};

public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "Battery alarm is disabled", Toast.LENGTH_LONG).show();
    cancelNotification();
    // unregisterReceiver(this.batteryInfoReceiver);
}

private void initNotification() {
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
    int icon = R.drawable.ic_launcher;
    CharSequence tickerText = "Battery Service";
    long when = System.currentTimeMillis();
    Notification notification = new Notification(icon, tickerText, when);
    notification.flags = Notification.FLAG_ONGOING_EVENT;
    Context context = getApplicationContext();
    CharSequence contentTitle = "Content Title";
    CharSequence contentText = "Content Text";
    Intent notificationIntent = new Intent(this, BatteryAlarm.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);
    notification.setLatestEventInfo(context, contentTitle, contentText,
            contentIntent);
    mNotificationManager.notify(NOTIFICATION_ID, notification);
}

private void cancelNotification() {
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
    mNotificationManager.cancel(NOTIFICATION_ID);
}

} 
```

**编辑**

这是我的日志猫

```
05-06 19:25:03.425: I/System.out(861): Sending WAIT chunk
05-06 19:25:03.425: W/ActivityThread(861): Application com.zafar.batteryalarm is waiting for the debugger on port 8100...
05-06 19:25:03.470: I/dalvikvm(861): Debugger is active
05-06 19:25:03.625: I/System.out(861): Debugger has connected
05-06 19:25:03.625: I/System.out(861): waiting for debugger to settle...
05-06 19:25:03.825: I/System.out(861): waiting for debugger to settle...
05-06 19:25:04.025: I/System.out(861): waiting for debugger to settle...
05-06 19:25:04.225: I/System.out(861): waiting for debugger to settle...
05-06 19:25:04.425: I/System.out(861): waiting for debugger to settle...
05-06 19:25:04.625: I/System.out(861): waiting for debugger to settle...
05-06 19:25:04.825: I/System.out(861): waiting for debugger to settle...
05-06 19:25:05.030: I/System.out(861): debugger has settled (1358)
05-06 19:25:05.250: D/dalvikvm(861): GC_EXTERNAL_ALLOC freed 46K, 50% free 2726K/5379K, external 0K/0K, paused 74ms
05-06 19:25:05.400: D/dalvikvm(861): GC_EXTERNAL_ALLOC freed 48K, 49% free 2775K/5379K, external 504K/518K, paused 16ms
05-06 19:25:05.510: D/CLIPBOARD(861): Hide Clipboard dialog at Starting input: finished by someone else... !
05-06 19:25:16.280: W/KeyCharacterMap(861): No keyboard for id 0
05-06 19:25:16.280: W/KeyCharacterMap(861): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-06 19:25:16.535: D/CLIPBOARD(861): Hide Clipboard dialog at Starting input: finished by someone else... !
05-06 19:30:12.350: E/MediaPlayer-JNI(861): setDataSource: outside path in JNI is ?x@
05-06 19:30:12.370: W/MediaPlayer(861): info/warning (1, 26)
05-06 19:30:12.370: E/MediaPlayer(861): error (-4, -4)
05-06 19:31:07.360: D/AndroidRuntime(861): Shutting down VM
05-06 19:31:07.360: W/dalvikvm(861): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-06 19:31:07.420: E/AndroidRuntime(861): FATAL EXCEPTION: main
05-06 19:31:07.420: E/AndroidRuntime(861): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000000 (has extras) } in com.zafar.batteryalarm.BatteryService$1@40542be8 
05-06 19:31:07.420: E/AndroidRuntime(861):  at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
05-06 19:31:07.420: E/AndroidRuntime(861):  at android.os.Handler.handleCallback(Handler.java:587)
05-06 19:31:07.420: E/AndroidRuntime(861):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-06 19:31:07.420: E/AndroidRuntime(861):  at android.os.Looper.loop(Looper.java:130)
05-06 19:31:07.420: E/AndroidRuntime(861):  at android.app.ActivityThread.main(ActivityThread.java:3691)
05-06 19:31:07.420: E/AndroidRuntime(861):  at java.lang.reflect.Method.invokeNative(Native Method)
05-06 19:31:07.420: E/AndroidRuntime(861):  at java.lang.reflect.Method.invoke(Method.java:507)
05-06 19:31:07.420: E/AndroidRuntime(861):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-06 19:31:07.420: E/AndroidRuntime(861):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-06 19:31:07.420: E/AndroidRuntime(861):  at dalvik.system.NativeStart.main(Native Method)
05-06 19:31:07.420: E/AndroidRuntime(861): Caused by: java.lang.NullPointerException
05-06 19:31:07.420: E/AndroidRuntime(861):  at com.zafar.batteryalarm.BatteryService$1.onReceive(BatteryService.java:74)
05-06 19:31:07.420: E/AndroidRuntime(861):  at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
05-06 19:31:07.420: E/AndroidRuntime(861):  ... 9 more 
```

**编辑**

![调试图像](../Images/fad972908775764238ea38587356bc44.png)

**Logcat** 这是最新的 logcat，`if(mMediaPlayer != null) { mMediaPlay.stop() }`但它仍然不起作用。

```
05-07 18:35:10.000: W/ActivityThread(28850): Application com.zafar.batteryalarm is waiting for the debugger on port 8100...
05-07 18:35:10.010: I/System.out(28850): Sending WAIT chunk
05-07 18:35:10.090: I/dalvikvm(28850): Debugger is active
05-07 18:35:10.210: I/System.out(28850): Debugger has connected
05-07 18:35:10.210: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:10.410: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:10.605: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:10.805: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:11.005: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:11.210: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:11.415: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:11.614: I/System.out(28850): waiting for debugger to settle...
05-07 18:35:11.814: I/System.out(28850): debugger has settled (1489)
05-07 18:35:11.970: D/dalvikvm(28850): GC_EXTERNAL_ALLOC freed 51K, 50% free 2726K/5379K, external 0K/0K, paused 31ms
05-07 18:35:12.105: D/dalvikvm(28850): GC_EXTERNAL_ALLOC freed 21K, 49% free 2780K/5379K, external 504K/518K, paused 16ms
05-07 18:35:12.215: D/CLIPBOARD(28850): Hide Clipboard dialog at Starting input: finished by someone else... !
05-07 18:36:11.614: E/MediaPlayer-JNI(28850): setDataSource: outside path in JNI is ?x@ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:53:35.307

您应该查看 logCat 的这一行：

```
05-06 19:31:07.420: E/AndroidRuntime(861): Caused by: java.lang.NullPointerException
05-06 19:31:07.420: E/AndroidRuntime(861):  at com.zafar.batteryalarm.BatteryService$1.onReceive(BatteryService.java:74) 
```

您在 BatteryService.java 的 onReceive 方法的第 74 行有一个 NullPointer

确保所有变量都已正确初始化或处理。

**编辑：**在查看了更多代码之后，问题可能出在

```
mMediaPlayer.stop(); 
```

可能会发生 mMediaPlayer 未初始化，因此返回 NullPointerException。

**编辑 2：** 这应该修复 NullPointerException。

```
if(mMediaPlayer != null) {
  mMediaPlayer.stop();
} 
```

# java - 如何在没有 readLine() 的情况下检查 EOF？

> ID：10471646
> 
> 赞同：1
> 
> 时间：2012-05-06T15:15:50.470
> 
> 标签：java

我有一种方法可以读取 txt 文件中的下一行并执行某些操作。我还有另一种方法也需要检查 EOF。这两种方法在循环内被接受地调用。

方法一：

```
trace = br.readLine();
   if (trace==null)
       break; // end of file 
```

方法 2：我需要在不使用相同技术的情况下检查 EOF。否则，它将增加用于 readLine 的 ptr ...

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:25:24.583

> 有没有办法做到这一点？

BufferedReader API 不允许您这样做 (*)。如果你真的需要这样做，你需要实现一个自定义的 Reader 类来做到这一点。我将从 开始`PushbackReader`，添加一个`readLine()`方法，然后通过读取一个字符并将其推回来实现一个 eof 测试方法。

[* 从阅读[我可以偷看 BufferedReader 的答案吗？](https://stackoverflow.com/questions/2517638/can-i-peek-on-a-bufferedreader)，看来该`ready()`方法可以用作 EOF 测试。但是，这是标准代码库中当前实现的`ready()`产物，根据该方法的 javadoc 规范，可以说是错误的（错误）。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:45:39.587

您可以使用

```
 Scanner sc = new Scanner (file); 
```

并阅读

```
 while (sc.hasNext ()) 
```

扫描仪有一个

```
 sc.readLine (); 
```

方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T04:38:41.210

您也可以使用此格式进行检查以避免 EOF 异常。由于缓冲区大小是提前确定的，因此不会导致任何错误发生。

```
File myFile = new File("path");
String completeText = "";
FileChannel fc = new FileInputStream(myFile.getAbsoluteFile()).getChannel();
ByteBuffer buffer = ByteBuffer.allocate((int)fc.size());
fc.read(buffer);
Charset charset = Charset.defaultCharset();  
CharsetDecoder decoder = charset.newDecoder();  
CharBuffer charBuffer = decoder.decode(buffer);    
completeText = charBuffer.toString();
buffer.clear();
fc.close(); 
```

# sql - “错误：ORA-04098：触发器‘CA0513.ITEMAVGRATINGTRIGGER’无效并且重新验证失败”

> ID：10471647
> 
> 赞同：3
> 
> 时间：2012-05-06T15:15:50.210
> 
> 标签：sql, oracle, triggers, squirrel-sql

我正在创建一个触发器：

```
CREATE OR REPLACE TRIGGER ItemAvgRatingTrigger
AFTER INSERT OR UPDATE OF rating ON Collectionitems
REFERENCING NEW AS newRow
FOR EACH ROW
BEGIN
    UPDATE Item
    SET rating = (SELECT AVG(Collectionitems.rating) FROM Collectionitems, Item WHERE
        Collectionitems.itemid = newRow.itemid AND newRow.itemid = Item.itemid)
    WHERE Item.itemid = newRow.itemid;
END ItemAvgRatingTrigger;/ 
```

每当我通过更新 Collectionitems 中的一行来运行触发器时，我都会得到 squirrel 的返回：

```
Error: ORA-04098: trigger 'CA0513.ITEMAVGRATINGTRIGGER' is invalid and failed re-validation

SQLState:  42000
ErrorCode: 4098
Position: 7 
```

执行SQL语句：

```
SELECT * FROM User_Errors; 
```

产生 1 个错误：

```
PLS-00103: Encountered the symbol "/" The symbol "/" was ignored./n 
```

我已经阅读了很多其他有同样问题的帖子，但还没有找到解决方案，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:34:18.710

编译失败的实际原因是双重的。

1.  您应该将新值引用为`:newrow`.
2.  您确实需要在`/`.

但是，此触发器永远不会起作用。您最终会遇到一个变异表异常，`ORA-04091: table name is mutating, trigger/function may not see it.`这是因为您在行级触发器中引用要更新的表。简而言之，Oracle 确保数据的读取一致视图。

在触发器中，您正在更新`Collectionitems`. 同时从这个表中选择，在同一个会话中，有两种可能的状态；更新和未更新。为了确保您的视图是读取一致的，Oracle 会引发此错误。

在您的特定情况下，您可能需要考虑[物化视图](http://docs.oracle.com/cd/E11882_01/server.112/e25789/schemaob.htm#CNCPT411)而不是触发器。

### 延伸阅读：

*   [修复 Oracle mutating trigger table 错误](http://www.dba-oracle.com/t_avoiding_mutating_table_error.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:29:31.213

将`/`触发器末尾的 放在一条线上。

# iphone - UITextField - 在键入时输入第一个字符后添加一个字符

> ID：10471648
> 
> 赞同：6
> 
> 时间：2012-05-06T15:15:56.693
> 
> 标签：iphone, ios, uitextfield, uitextfielddelegate

我有一个 UITextField 将包含高度值。我想在用户输入 UITextField 时格式化字段的值。例如，如果我想将值输入为“5 ft 10”，则流程将是：

```
1\. Enter 5
2\. " ft " is appended immediately after I type 5 with leading & trailing space. 
```

我的代码如下所示：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range       replacementString:(NSString *)string
{   

if ( [string isEqualToString:@""] ) return YES;

// currHeight Formatting
if ( textField == currHeight )  { 
   if (currHeight.text.length == 1) {   
        currHeight.text = [NSString stringWithFormat:@"%@ ft ", currHeight.text];    
        }
}
return YES; 
} 
```

我被卡在输入 5 的地方，什么也没发生。我必须点击任何按钮才能附加“ft”。

**我可以在不点击任何东西的情况下做到这一点吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T15:58:26.663

-shouldChangeCharactersInRange 在文本字段发生更改之前被调用，因此长度仍为 0（请参阅[使用 `textField:shouldChangeCharactersInRange:`，如何获取包含当前键入的字符的文本？](https://stackoverflow.com/questions/2198067/using-textfieldshouldchangecharactersinrange-how-do-i-get-the-text-including)）。试试这个：

```
- (BOOL)textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range
replacementString: (NSString*) string {
    if (textField == currHeight) {
        NSString *text = [textField.text stringByReplacingCharactersInRange:range
        withString: string];
        if (text.length == 1) { //or probably better, check if int
            textField.text = [NSString stringWithFormat: @"%@ ft ", text];
            return NO;
        }
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:50:53.667

调用此函数时，currHeight.text 的长度仍为 0。返回 YES 后，文本才更新为 5。

做你想做的事情的方法是测试 currHeight.text.length 是否为 0， string.length 为 1 并且字符串的第一个字符是数字。

# wordpress - 使用自定义查询获取数据

> ID：10471657
> 
> 赞同：0
> 
> 时间：2012-05-06T15:16:59.253
> 
> 标签：wordpress

我一直在考虑创建自己的自定义查询来使用`$wpdb`. 但是有一些事情我不太明白：

1.  当结果进来时，它如何知道使用哪个模板文件来显示这些结果？
2.  我在链接的`href`属性中输入什么将激活查询？
3.  如果有很多结果，是否会像正常循环一样启用分页？
4.  我是将查询放在文件中（在#1 中）还是在`functions.php`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:15:32.450

If you want to create new custom loop, you can create new template for it. In this case pagination, loop work normally. You just place custom wp_query above loop. And in href you must write url of page which built on new custom template. For understanding all this process step by step i suggest you to read my article in wptuts. It is called "[Creating a Custom ‘The Posts I Commented On’ Loop](http://wp.tutsplus.com/tutorials/creating-a-custom-the-posts-i-commented-on-loop/)" and it is the guide what you need.

# tridion - 如何在 sdl tridion 中开发服务器端应用程序（如实时聊天）？

> ID：10471659
> 
> 赞同：7
> 
> 时间：2012-05-06T15:17:27.503
> 
> 标签：tridion

我想开发一个实时聊天应用程序，以允许 Web 用户与客户服务或彼此聊天。

我有哪些选择？

*   我创建了一些 ascx 用户控件来提供该功能。
*   如何将其呈现到我的页面？
*   在页面模板构建块 (TBB) 中，我编写了用于组件呈现/渲染的代码。

我想知道是否需要在页面上创建用户控件作为组件，如果需要，如何创建。

对于我使用的组件渲染：

```
<!-- TemplateBeginRepeat name="Components" -->
  <!-- TemplateBeginIf cond="ComponentTemplate == 'HomePageCT'" -->
    @@RenderComponentPresentation()@@
  <!-- TemplateEndIf -->   
<!-- TemplateEndRepeat --> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T15:37:12.913

我通常使用 Tridion 的方法是首先在没有 Tridion 的情况下开发它。

首先让您的应用程序在 IIS 或 Tomcat 或您用于交付平台的任何东西中运行。

一旦您对此感到满意，就开始将其移至模板中。在您的特定情况下，我猜这个功能*可能*会被编辑器添加到页面中，因此组件模板是有意义的。确保模板的输出包含您可能需要的所有代码（包括任何控件、javascript 引用等），并且输出中可能需要配置的所有内容都应位于与此模板关联的组件中。

请记住，您可以从 Tridion 发布任何内容，您应该专注于让它工作，然后调整您的 Tridion 模板。

再次阅读您的问题，您似乎停留在 Tridion 的基础知识上……是的，您可以使用 RenderComponentPresentation，只需确保您的组件模板创建了交付端所需的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T20:45:43.780

尽管您几乎可以使用 Tridion 构建网站中的任何内容，但您必须想知道在 Tridion 中构建它的**附加好处**是什么，并权衡这些与在 Tridion 中构建它的**额外成本**。

Nuno 已经建议首先在 Tridion 之外构建此功能，然后将其移植过来，这确实是一个好方法。但即使采用这种方法，我也严重怀疑在 Tridion 中使用它会带来多少好处。

Tridion 是一个**内容管理**系统，我怀疑这个应用程序需要管理很多内容。如果没有要管理的内容，我只需将 ASCX 控件留在 ASP.NET Web 应用程序中，然后将其与`<asp:chatcontrol>`（假设您构建此自定义标记）一起包含在您的 DWT 中。

# visual-studio-2008 - Visual Studio 2008 中的智能指针

> ID：10471662
> 
> 赞同：0
> 
> 时间：2012-05-06T15:18:31.927
> 
> 标签：visual-studio-2008, smart-pointers

我在 C++ 中编码，使用 Visual Studio 作为 IDE。

我正在尝试使用 C++ 智能指针，但出现错误：

```
error C2039: 'shared_ptr' : is not a member of 'std'
error C2039: 'unique_ptr' : is not a member of 'std' 
```

包括我：

```
#include <memory> 
```

但它并没有解决问题。

我可以在 Visual Studio 2008 中使用此功能吗？我需要迁移到 Visual Studio 2010 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:28:27.097

`std::shared_ptr`并且`std::unique_ptr`是 C++11 特性，VS2008 不支持。

您可以改用[boost 智能指针](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/smart_ptr.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-21T04:11:28.343

您可以在 VS2008 中使用 std::tr1::shared_ptr 和以下项目 1\. 包括头内存 2\. 使用命名空间 std::tr1;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T11:35:58.037

您可以尝试使用`std::tr1::shared_ptr`和`std::tr1::unique_ptr`

# css - 浏览器中 CSS 布局顶部的神秘乐队，但不在 jsfiddle 中？

> ID：10471663
> 
> 赞同：0
> 
> 时间：2012-05-06T15:18:33.300
> 
> 标签：css

*   在此处查看 jsfiddle：http: [//jsfiddle.net/x7N66/3/](http://jsfiddle.net/x7N66/3/)*   在此处查看屏幕截图：http: [//i.imgur.com/wx5SB.png](http://i.imgur.com/wx5SB.png)

    注意铬屏幕截图顶部的白色带（在歌剧中也可见，未尝试过）。那不应该在那里，我不知道为什么！

    我无法弄清楚这是从哪里来的。Chromium 中的开发工具不会将其识别为布局的任何部分。它发生在包含 header_img div 之后。但它不应该引起问题，因为所有填充都设置为零

    请注意，我在底部确实有一个页脚，它可疑地与它看起来的高度相同。

    谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:37:38.923

尝试将此添加到您的 CSS 中：

```
h1 { margin-top: 0; } 
```

我的猜测是[margin collapsing](http://reference.sitepoint.com/css/collapsingmargins)的情况。如果具有顶部/底部边距（`h1`s 具有默认边距）的元素包含在没有填充（`#header_img`）的元素中，则边距将应用于该容器元素。

# java - 自定义排序java数组

> ID：10471665
> 
> 赞同：6
> 
> 时间：2012-05-06T15:19:02.940
> 
> 标签：java, sorting, collections

我有一个 [] 有一些数字（从某个点的距离）。
我想在第一个数组中创建一个索引数组，其中索引按距离排序。

例如

假设`double[] dist=new double[5] {3.2, 1.4, 7.3, 2.2, 9.1};`
我想得到一个这样的数组：

`int[] sortedIndexes=new int[5] {1, 3, 0, 2, 4};`

所以如果我想要第二个最近的距离，我可以检查 dist[sortedIndexes[1]]。
我不想对原始数组进行排序，只是对基于距离的索引数组进行排序。

更新 1： 我尝试的代码如下所示：

```
Collections.sort(sortedIDXs, new Comparator<Integer>() {
    public int compare(int idx1, int idx2) {
        return Double.compare(distances[idx1], distances[idx2]);
    }
}); 
```

但是我遇到了几个错误，其中最“有问题”的一个是：“***不能引用在不同方法中定义的内部类中的非最终变量距离***”

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T15:43:46.760

你在正确的轨道上，但是

*   如果您使用的是泛型，则使用`Integer`数组比使用数组更好。`int``Comparator<Integer>`
*   您必须改用它`Arrays.sort`来`Collections.sort`对数组进行排序。
*   如果在匿名内部类中引用距离，则必须将距离变量设为最终变量。

    ```
    final double[] distances=new double[]{3.2, 1.4, 7.3, 2.2, 9.1};
    Integer[] sortedIDXs  = new Integer[]{0,1,2,3,4};
    Arrays.sort(sortedIDXs, new Comparator<Integer>() {
        public int compare(Integer idx1, Integer idx2) {
            return Double.compare(distances[idx1], distances[idx2]);
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T15:43:04.473

如果您希望索引作为原始 int 数组，则效果很好，那么您将必须创建自己的二进制排序器，这应该不难。

编辑：我改编了java的mergesorter来使用int。这应该可以节省您编写自己的时间。

```
public static void main(String[] args) {
        double[] dist = new double[] {3.2, 1.4, 7.3, 2.2, 9.1};
        int[] indices = createIndicies(dist);

        System.out.println(Arrays.toString(dist) + " " +  Arrays.toString(indices));
    }

    public static int[] createIndicies(double[] array) {
        int[] intArray = new int[array.length];
        for (int j = 0; j < array.length; j++) {
            intArray[j] = j;
        }

        int[] indicies = intArray.clone();
        mergeSort(intArray, indicies, 0, intArray.length, 0, new IndiciesSorter(array));

        return indicies;
    }

    public static class IndiciesSorter implements Comparator<Integer> {

        double[] array;

        public IndiciesSorter(double[] array) {
            this.array = array;
        }

        @Override
        public int compare(Integer o1, Integer o2) {
            return Double.compare(array[o1], array[o2]);
        }
    }

    private static void mergeSort(int[] src, int[] dest, int low,
            int high, int off, Comparator c) {
        int length = high - low;

        // Insertion sort on smallest arrays
        if (length < 7) {
            for (int i = low; i < high; i++)
                for (int j = i; j > low && c.compare(dest[j - 1], dest[j]) > 0; j--)
                    swap(dest, j, j - 1);
            return;
        }

        // Recursively sort halves of dest into src
        int destLow = low;
        int destHigh = high;
        low += off;
        high += off;
        int mid = (low + high) >>> 1;
        mergeSort(dest, src, low, mid, -off, c);
        mergeSort(dest, src, mid, high, -off, c);

        // If list is already sorted, just copy from src to dest. This is an
        // optimization that results in faster sorts for nearly ordered lists.
        if (c.compare(src[mid - 1], src[mid]) <= 0) {
            System.arraycopy(src, low, dest, destLow, length);
            return;
        }

        // Merge sorted halves (now in src) into dest
        for (int i = destLow, p = low, q = mid; i < destHigh; i++) {
            if (q >= high || p < mid && c.compare(src[p], src[q]) <= 0)
                dest[i] = src[p++];
            else
                dest[i] = src[q++];
        }
    }

    private static void swap(int[] x, int a, int b) {
        int t = x[a];
        x[a] = x[b];
        x[b] = t;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-06T15:29:15.557

我现在确实尝试过，它有效！:)

```
double[] dist= {3.2, 1.4, 7.3, 2.2, 9.1}; // your array
int[] sortedIndexes= new int[dist.length]; // your array

double[] temp = dist.clone(); // clone the array
Arrays.sort(temp); // Use native array sort function

for(int i = 0; i<temp.length; i++) { // iterate through sorted array
    for(int j = 0; j<dist.length; j++) { // iterate through original array
        if (dist[j] == temp[i]) { // if sorted value == unsorted value
            sortedIndexes[i] = j; // save position of match into your sortedIndex array
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-06T15:24:30.247

您应该自定义自己的 Comparator 并使用 java API。

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort(java.lang.Object[],%20int,%20int)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20int,%20int%29)

[http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)

# java - 如何在 Java 应用程序中在 Android 上运行 Lua 脚本？

> ID：10471667
> 
> 赞同：13
> 
> 时间：2012-05-06T15:19:20.920
> 
> 标签：java, android, lua

我正在用 Java 开发一个使用 Lua 脚本的 Android 游戏。为了执行这些脚本，我将 LuaJ 与 Java 的 ScriptEngine 类一起使用。例如...

```
ScriptEngineManager sem = new ScriptEngineManager();
scriptEngine = sem.getEngineByExtension(".lua");
script = ((Compilable)scriptEngine).compile("some lua here"); 
```

但是，这显然在 Android 上不受支持（这与 android 没有完整的 JVM 有关，我在某处读到过）。有没有办法可以在 Android 上使用 Lua 脚本？也许有一个 LuaJ 替代品？也许有一种方法可以直接使用 LuaJ 编译和执行 Lua 脚本（虽然我不知道如何）。

仅供参考，当我尝试在 Android 上运行此代码时看到此错误：

```
05-06 16:12:32.870: E/dalvikvm(17509): Could not find class 'javax.script.ScriptEngineManager', referenced from method unearth.levels.LevelReader.<init>
05-06 16:12:32.870: W/dalvikvm(17509): VFY: unable to resolve new-instance 787 (Ljavax/script/ScriptEngineManager;) in Lunearth/levels/LevelReader;
05-06 16:12:32.870: D/dalvikvm(17509): VFY: replacing opcode 0x22 at 0x0018
05-06 16:12:32.875: E/dalvikvm(17509): Could not find class 'javax.script.Compilable', referenced from method unearth.levels.LevelReader.parseScript
05-06 16:12:32.875: W/dalvikvm(17509): VFY: unable to resolve check-cast 782 (Ljavax/script/Compilable;) in Lunearth/levels/LevelReader;
05-06 16:12:32.875: D/dalvikvm(17509): VFY: replacing opcode 0x1f at 0x0047
05-06 16:12:32.875: W/dalvikvm(17509): VFY: unable to resolve exception class 788 (Ljavax/script/ScriptException;)
05-06 16:12:32.875: W/dalvikvm(17509): VFY: unable to find exception handler at addr 0x51
05-06 16:12:32.875: W/dalvikvm(17509): VFY:  rejected Lunearth/levels/LevelReader;.parseScript (Lorg/w3c/dom/Element;Lunearth/levels/Level;)V
05-06 16:12:32.875: W/dalvikvm(17509): VFY:  rejecting opcode 0x0d at 0x0051
05-06 16:12:32.875: W/dalvikvm(17509): VFY:  rejected Lunearth/levels/LevelReader;.parseScript (Lorg/w3c/dom/Element;Lunearth/levels/Level;)V
05-06 16:12:32.875: W/dalvikvm(17509): Verifier rejected class Lunearth/levels/LevelReader;
05-06 16:12:32.890: W/dalvikvm(17509): threadid=11: thread exiting with uncaught exception (group=0x40c331f8)
05-06 16:12:32.895: E/AndroidRuntime(17509): FATAL EXCEPTION: GLThread 1062
05-06 16:12:32.895: E/AndroidRuntime(17509): java.lang.VerifyError: unearth/levels/LevelReader
05-06 16:12:32.895: E/AndroidRuntime(17509):    at unearth.Game.startGame(Game.java:201)
05-06 16:12:32.895: E/AndroidRuntime(17509):    at unearth.Game.update(Game.java:713)
05-06 16:12:32.895: E/AndroidRuntime(17509):    at unearth.screens.LoadScreen.update(LoadScreen.java:56)
05-06 16:12:32.895: E/AndroidRuntime(17509):    at unearth.UnearthListener.render(UnearthListener.java:71)
05-06 16:12:32.895: E/AndroidRuntime(17509):    at com.badlogic.gdx.backends.android.AndroidGraphics.onDrawFrame(AndroidGraphics.java:423)
05-06 16:12:32.895: E/AndroidRuntime(17509):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1462)
05-06 16:12:32.895: E/AndroidRuntime(17509):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
05-06 16:12:58.600: D/dalvikvm(17509): GC_CONCURRENT freed 334K, 3% free 16196K/16647K, paused 2ms+6ms 
```

# 更新：

也许这个项目有一些有用的代码？[http://code.google.com/p/android-scripting/](http://code.google.com/p/android-scripting/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T00:39:33.157

我找到了一种在 Android 上使用 LuaJ 的方法！:-)

关键是直接使用 LuaJ API，而不是 through `javax.script`。由于没有教程，这有点棘手，所以这里有一个前后，这样其他人就不必通过 LuaJ 源代码和 JavaDoc 来挑选。我真的希望这对某人有所帮助，因为它让我发疯了！

*注意：* “secretgame”不是我游戏的实际名称；-)

**后：**

```
package secretgame.scripting;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import org.luaj.vm2.LuaClosure;
import org.luaj.vm2.LuaTable;
import org.luaj.vm2.LuaValue;
import org.luaj.vm2.Prototype;
import org.luaj.vm2.compiler.LuaC;
import org.luaj.vm2.lib.jse.CoerceJavaToLua;
import org.luaj.vm2.lib.jse.JsePlatform;

import secretgame.SecretGameException;
import secretgame.events.EventArgs;
import secretgame.levels.Level;

public class DirectLuaj implements Lua
{
  private final Level level;
  private final ScriptTools scriptTools;
  private final ScriptEvents scriptEvents;
  private int nextId = 0;
  private ArrayList<LuaClosure> scripts = new ArrayList<LuaClosure>();

  public DirectLuaj(Level level, ScriptTools scriptTools,
      ScriptEvents scriptEvents)
  {
    this.level = level;
    this.scriptTools = scriptTools;
    this.scriptEvents = scriptEvents;
  }

  @Override
  public int add(String scriptText) throws SecretGameException
  {
    try {
      InputStream input = new ByteArrayInputStream(scriptText.getBytes());
      Prototype p = LuaC.compile(input, "script");
      LuaValue g = JsePlatform.standardGlobals();
      LuaClosure c = new LuaClosure(p, g);
      scripts.add(c);
    }
    catch (IOException e) {
      throw new SecretGameException("compile failed", e);
    }

    return nextId++;
  }

  @Override
  public void run(int id, EventArgs args) throws SecretGameException
  {
    LuaClosure script = scripts.get(id);

    LuaTable bindings = new LuaTable();

    bindings.set("java", toLua(scriptTools));
    bindings.set("level", toLua(level));
    bindings.set("args", toLua(args));
    bindings.set("events", toLua(scriptEvents));

    script.setfenv(bindings);

    script.call();
  }

  private LuaValue toLua(Object javaValue) {
    return javaValue == null? LuaValue.NIL:
            javaValue instanceof LuaValue? (LuaValue) javaValue:
            CoerceJavaToLua.coerce(javaValue);
  }
} 
```

**前：**

```
package secretgame.scripting;

import java.util.ArrayList;

import javax.script.Bindings;
import javax.script.Compilable;
import javax.script.CompiledScript;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

import secretgame.SecretGameException;
import secretgame.events.EventArgs;
import secretgame.levels.Level;

// sadly this won't work on Android because there's no such thing
// as javax.script in Dalvik ... dumb Android java :|
public class JavaxScriptingLua implements Lua
{
  private ScriptEngine scriptEngine;
  private final Level level;
  private final ScriptTools scriptTools;
  private final ScriptEvents scriptEvents;
  private int nextId = 0;
  private ArrayList<CompiledScript> scripts = new ArrayList<CompiledScript>();

  public JavaxScriptingLua(Level level, ScriptTools scriptTools, ScriptEvents scriptEvents)
  {
    this.level = level;
    this.scriptTools = scriptTools;
    this.scriptEvents = scriptEvents;

    ScriptEngineManager sem = new ScriptEngineManager();
    scriptEngine = sem.getEngineByExtension(".lua");
  }

  public int add(String scriptText) throws SecretGameException
  {
    try {
      CompiledScript script = ((Compilable)scriptEngine).compile(scriptText);
      scripts.add(script);
    }
    catch (ScriptException e) {
      throw new SecretGameException("could not compile lua.", e);
    }

    return nextId++;
  }

  public void run(int id, EventArgs args) throws SecretGameException
  {    
    Bindings bindings = scriptEngine.createBindings();

    bindings.put("java", scriptTools);
    bindings.put("level", level);
    bindings.put("args", args);
    bindings.put("events", scriptEvents);

    try {
      scripts.get(id).eval(bindings);
    }
    catch (ScriptException e) {
      throw new SecretGameException("could not run script.", e);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T22:30:56.310

除了 LuaJ，您还可以（也）将 LuaJava 与使用 NDK 为 Android 编译的 Lua 一起使用。这允许 Lua 完全访问 Java 中可用的任何内容。看看[这个例子](https://github.com/mkottman/AndroLua)，看看如何开始。

Lua 5.1.4 + LuaJava 编译后在`libs`目录中提供（单个`libluajava.so`文件），如果您不想摆弄NDK，但无论如何设置都比较容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:25:11.523

> 但是，这显然在 Android 上不受支持

正确的。

> 与android没有完整的JVM有关，我在某处读到

正确的。如果您查看[JavaDocs](http://developer.android.com/reference/packages.html)，您会发现`javax.script`Android SDK 中不存在该文档。

> 也许我会试试这个：[https ://github.com/damonkohler/sl4a](https://github.com/damonkohler/sl4a)

这是一种选择。另一种方法是通过 NDK 将 Lua 解释器嵌入到您的应用程序中，如[本示例应用程序](https://github.com/commonsguy/cw-andtuning/tree/master/NDK/LuaInterpreter)中所示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-20T06:02:45.017

要在 Android 上使用 Lua，您可以使用 JNLua + Lua 5.2（用 C 实现）。唯一支持 JSR 223 (javax.script) 的 Android 端口在这里：[https ://github.com/danke-sra/jnlua-android](https://github.com/danke-sra/jnlua-android)

使用这个端口，你可以做你想做的事：

`ScriptEngine scriptEngine = new LuaScriptEngineFactory().getEngine(); scriptEngine.eval("lua statements");`

# php - 从数字中删除小数点并将其转换为 PHP 中的整数

> ID：10471668
> 
> 赞同：0
> 
> 时间：2012-05-06T15:19:37.660
> 
> 标签：php

我有一个小问题......

我有一个 php 函数，它根据两个整数相除生成一个数字。这将始终表示为 1 的百分比。

例如，我的函数会生成一个数字，例如 0.3 或 0.01222 或 0.23

我需要将此百分比转换为整数，作为 100 的一部分，三位数字。

所以 0.3 会变成 030，0.01222 会变成 001，1 会变成 100

有没有一种简单的方法可以在 PHP 中做到这一点？

干杯:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:24:08.163

最终结果将不再是一个数字，而是一个字符串，所以只需进行字符串操作：

```
$number = 0.3;

// Multiply by 100 and remove stuff after decimal point
$string = (string) floor($number * 100);

// Add zeros until the string has a total length of three characters
$string = str_pad($string, 3, '0', STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:21:58.500

就在这里：

```
$num = 0.01222;
$num2 = ceil($num * 100); 
```

# c++ - C++ 将 C 风格的字符串作为参数传递

> ID：10471670
> 
> 赞同：0
> 
> 时间：2012-05-06T15:19:49.507
> 
> 标签：c++, pointers

我在处理 C++ 中的 C 样式字符串时遇到了一些麻烦。简而言之，我要做的是将我的 main 方法中的 cstring 传递给我的一个对象的构造函数。

例如

```
class sample
{
  public: // Initalization
  Sample( const char * inFile);
}//End sample class 
```

然后在main方法中。

```
//Main method
int main ( int argc, const char * argv[] )
{
   Sample aSample(argv[1]);
} 
```

现在，根据我的假设，`const char*`当我使用`argv[1]`. 据我了解`char *argv[]`，这只是 char 的另一种说法`**argv`。

另外，只是为了确保我对 const 的理解是正确的，`const char *`说“这个指针指向一个 const char”，其中`const char const *`说“这个指针地址不能改变，它指向的地址也是 const”。

更新 -

只是为了澄清这是一个两部分的问题。

1.  如果示例中的构造函数对于传递 cstring 不正确，我该如何更正它？
2.  const的理解

更新了我上面的错误陈述，即当它应该是“第二个”时，我取消了“第一个”指针的引用。感谢您在下面指出这一点。

第二次更新 - 我正在使用 argv[1] 因为我从命令行接收信息，而 argv[0] 只保存我不感兴趣的可执行文件的路径。

任何帮助是极大的赞赏。

-弗雷迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:21:02.777

`argv[1]`取消引用第二个指针，而不是第一个。你想要`argv[0]`。C++ 中的数组是从*0 开始的*。

还：

```
const char const * 
```

不合法（本杰明指出）。在这种情况下，两个`const`s 都适用于。`char`如果您希望指针为 const，则需要

```
char const * const 
```

或者

```
const char * const 
```

编辑：

问题 1) CString 可以将`char*`构造函数作为参数，因此它应该可以工作。

问题 2)`const`绑定到左侧，除非左侧没有任何内容。所以`const char`和`char const`都是一样的。对于 const 指针，您需要`* const`，而不是`const *`.

# linux - 删除 Linux 内核 3.0.0 中的所有硬件观察点

> ID：10471674
> 
> 赞同：6
> 
> 时间：2012-05-06T15:20:30.883
> 
> 标签：linux, gdb, breakpoints, watchpoint

在 GDB 中设置第一个（也是唯一可能的）硬件观察点`watch varname`后，无法通过删除将其删除。

即使我只是退出 GDB，这个观察点似乎在下次重新启动之前都是启用的。当我在 GDB 重新启动后尝试设置另一个硬件观察点时，日志中会出现一条内核消息，告诉我，所有硬件观察点都已被占用。这似乎与*[设置 GDB 硬件观察点/如何设置软件观察点](https://stackoverflow.com/questions/3470704/gdb-problem-setting-hardware-watchpoint-how-to-set-software-watchpoint)*中的问题相同，但因为我需要一个硬件观察点，所以该解决方案不适用。

是否有工具或系统调用来删除这个（或所有）硬件观察点？CPU 是[Core i5](https://en.wikipedia.org/wiki/Intel_Core#Core_i5)，Linux 内核是[Ubuntu 11.10](http://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_11.10_.28Oneiric_Ocelot.29) (Oneiric Ocelot) 的 3.0.0-17-generic。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-08-09T03:36:54.057

使用观察点（有时称为数据断点）。它可以将其作为普通断点处理，如下所示：

```
(gdb) info watchpoints
Num     Type           Disp Enb Address            What
2       acc watchpoint keep y                      x

(gdb) delete 2

(gdb) info watchpoints
No watchpoints.
(gdb) 
```

一个很好的参考是*[设置观察点](https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Watchpoints.html#Set-Watchpoints)*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T23:37:55.633

> 在 gdb 中通过 watch varname 设置第一个（也是唯一可能的）硬件观察点后，无法通过 delete 将其删除。

上面的说法是**错误**的。是什么让你断定这是真的？

> 是否有工具或系统调用来删除这个（或所有）硬件观察点？

不需要这样的工具。只需退出 GDB，所有断点和观察点都将消失。或者做`(gdb) delete`（不指定断点），并确认您要全部删除。

# android - Android：在睡眠模式下临时连接 Wifi

> ID：10471680
> 
> 赞同：0
> 
> 时间：2012-05-06T15:21:15.793
> 
> 标签：android, gmail, wifi

如果手机设置为在手机进入睡眠模式时关闭 WiFi，我的应用程序将失去连接。这是一个有据可查的问题，当某些设备退出睡眠模式时，即使 WiFi 图标表明它已连接，WiFi 连接甚至不会重新连接。我已经在我的一台设备上看到了这种情况。

但我对 Gmail 应用程序的工作方式一无所知。即使在睡眠模式下，如果有邮件进来，您也会收到通知。然而，如果 WiFi 在睡眠模式下被禁用，那么 Gmail 应用程序检查邮件的唯一方法就是打开 WiFi。我假设它会打开它，然后在完成检查邮件后关闭。那么我怎样才能完成同样的事情呢？还是我错了，WiFi 永远不会关闭，因为 Gmail 始终保持开启状态？但我怎么会知道呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:25:27.003

因为它不依赖 WiFi，所以可以通过移动网络进行数据连接。或者你是说你禁用了移动网络数据？

顺便说一下，Gmail 和其他人使用推送通知，如果您好奇，请参阅 Cloud to Device Messaging (C2DM)。

更新：另请注意，即使在屏幕关闭时将 wifi 睡眠模式策略设置为关闭，它通常也不会直接关闭 wifi，而是稍等片刻。我认为它因手机型号而异，但大约需要 5-15 分钟。

更新 2：Gmail（或推送频道）当然也可以定期打开 wifi，即使您将 wifi 睡眠模式策略设置为在待机时关闭。当然，您也可以这样做，但如果是这样，请非常小心电池寿命。如果您使用推送通知，则会为您处理并协调电源效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T16:32:05.967

获取一个 wifi 锁，它不会受到用户的 wifi 睡眠策略的影响 - 但是，请确保在执行需要 wifi 的功能之前等待/延迟/睡眠，因为设备需要时间才能真正连接到网络才能使用。完成后释放 wifi 锁定，但同样，电池寿命会受到影响。用户非常热衷于唤醒锁/wifi 锁，所以添加大量警告。

# java - 更改现有 BufferedImage 的色彩空间？

> ID：10471681
> 
> 赞同：1
> 
> 时间：2012-05-06T15:21:23.623
> 
> 标签：java, graphics, bufferedimage, color-space

**是否可以在不将所有像素复制到新的 BufferedImage 对象的情况下**更改现有 BufferedImage 对象的颜色空间？我找不到方法，但也许我只是没有找到它？我想将颜色空间从 BufferedImage.TYPE_4BYTE_ABGR 更改为 BufferedImage.TYPE_BYTE_BINARY。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:04:13.390

不。

来自[Java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)：

**TYPE_4BYTE_ABGR**
表示具有 8 位 RGBA 颜色分量的图像，其中蓝色、绿色和红色存储在 3 个字节和 1 个字节的 alpha 中。

**TYPE_BYTE_BINARY**
表示不透明的字节压缩 1、2 或 4 位图像。

像素的大小不同 - 4B 与 1B。即使可以在 Java 结构对象中修改图像的元数据，由于像素大小不同，这也不应该在原地工作 (*)。

(*) 新缓冲区更小，因此理论上应该可以通过创建包含相同缓冲区（但未完全使用）的新图像来重用内存。
您仍然需要编写自己的循环，**按缓冲区中的放置顺序**迭代像素，修改它们的颜色空间（ARGB-> 强度），并将它们写入源像素 /4 所在的位置。
尝试使用这个构造函数重用缓冲区：`BufferedImage(ColorModel cm, WritableRaster raster, boolean isRasterPremultiplied, Hashtable properties)`

# java - Eclipse 中的 ClassNotFoundException

> ID：10471683
> 
> 赞同：-3
> 
> 时间：2012-05-06T15:21:33.957
> 
> 标签：java, apache-poi

```
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;

public void ReadXL(String Path) throws Exception
    {
        FileInputStream myStream=null;

    System.out.println("InReadxl");
    File xlFile = new File(Path);

  myStream = new FileInputStream(xlFile);
    HSSFWorkbook myWB = new HSSFWorkbook(myStream);

...........................

} 
```

`HSSFWorkbook myWB = new HSSFWorkbook(myStream);``**ClassNotFoundException**()`添加外部 jar 文件后 正在创建 `"poi-3.7-20101029"`。什么可能导致问题？请让我知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:25:31.377

您是否在 plugin.xml 的运行时和构建选项卡上获得了所有必需的 Jar？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:26:13.037

清理您的项目并重试。也许是 Eclipse 问题。

您是否尝试在另一个项目中使用它？您确定错误堆栈跟踪。可能 ClassNotFound 异常是由另一个内部错误引起的。

# c++ - SendInput 发送鼠标输入和键盘输入

> ID：10471685
> 
> 赞同：0
> 
> 时间：2012-05-06T15:21:45.463
> 
> 标签：c++, keyboard, mouse, simulator, sendinput

=)

我在 windows7 笔记本电脑上使用 C++（不是 VC++）。

我对这种从当前位置移动鼠标 x/y 的方法有疑问。每次它为鼠标事件调用发送输入时，它都会移动鼠标，但也会关闭我的屏幕（相当于 Fn+F2）。我调试了程序，发现它不仅有，而且`mi`有值（这是针对 x=25、y=25 和 absolure=false）：`ki``hi`

```
 mi:
      dx            25
      dy            25  
      mouseData     0   
      dwFlags       1   
      time          2686400 
      dwExtraInfo   0   
    ki:
      wVk           25  
      wScan         0
      dwFlags       25  
      time          0   
      dwExtraInfo   1   
    hi:
      uMsg          25
      wParamL       25  
      wParamH       0 
```

我曾尝试将 ki 和 hi 设置为 0，但如果我这样做了，那么 mi 也设置为 0，然后没有鼠标移动，但屏幕仍然处于睡眠状态！:$

以下是我使用的一些方法。

```
int Controller::mouse_move(long x, long y, bool absolute) {
   mouse.dx = x;
   mouse.dy = y;

   if (absolute) {
       mouse.dwFlags = MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE;
   }else{
       mouse.dwFlags = MOUSEEVENTF_MOVE;
   }

   mouse.mouseData = 0;
   mouse.dwExtraInfo = 0;

   input.type = INPUT_MOUSE;
   input.mi = mouse;

   SendInput(1, &input, sizeof (input));

   return 0;
} 
```

或者

```
int Controller::mouse_move(long x, long y, bool absolute, int index_vector_no) {
    input.type = INPUT_MOUSE;
    input.mi.dx = x;
    input.mi.dy = y;

    if (absolute) {
        input.mi.dwFlags = MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE;
    }else{
        input.mi.dwFlags = MOUSEEVENTF_MOVE;
    }

    input.mi.mouseData = 0;
    input.mi.dwExtraInfo = 0;

    input.ki.dwExtraInfo = 0;
    input.ki.dwFlags = 0;
    input.ki.time = 0;
    input.ki.wScan = 0;
    input.ki.wVk = 0;

    input.hi.uMsg = 0;
    input.hi.wParamH = 0;
    input.hi.wParamL = 0;

    SendInput(1, &input, sizeof (input));

    return 0;
} 
```

谁能知道为什么这会发送键盘输入和鼠标？！这只是与我的笔记本电脑配置有关吗？

提前致谢！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:37:39.793

其他人改变的原因是因为他们都在一个联盟中，所以他们共享相同的内存。

关于屏幕关闭，你没有设置`mi.time`为0，所以它是未初始化的。开始将这些结构初始化为 {0} 通常是个好主意，这样您就不会忘记事情。时间戳变成一些随机数，这可能会导致显示超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T15:04:52.933

你可以使用这个：

```
input.mi.time = 0; 
```

前：

```
input.mi.dwFlags = MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE | MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP; 
```

这个对我有用。

# sql - T-SQL：创建四个连接表的聚合视图的有效方法（每个项目的每个审计类型的最大审计条目）

> ID：10471686
> 
> 赞同：1
> 
> 时间：2012-05-06T15:21:53.930
> 
> 标签：sql, performance, sql-server-2008, tsql, sql-server-ce

一些 T-SQL 的帮助将不胜感激。

我有以下四个表：

*   项目（ID）
*   ItemVersion（Id，FK 多对一 Item.Id）
*   ItemVersionStatusLog (LogDate, FK 多对一 ItemVersion.Id, FK 多对一 StatusType.Id)
*   状态类型（ID、别名）

我只列出了适合这个问题的列。

根实体是一个`Item`. 对于每个`Item`，都有一个或多个`ItemVersion`条目。对于每个`ItemVersion`条目，有一个或多个`ItemVersionStatusLog`条目带有日期和对 a 的引用`StatusType`（例如，创建、更新、禁用）。

我想`Item`通过在一个新表（`ItemStatus`对于每个项目和 `StatusType`对，聚合应该为我提供日志表中的最大日期条目。这样我就有了一个快照，对于每个`StatusType`，我可以获得`ItemVersion`一个项目的最新信息。

另一种说法是程序上：

```
For each Item
- For each StatusType
- - List the ItemVersion Id with the maximum date from ItemVersionStatusLog given the correct StatusType 
```

我的聚合视图或表的目标列是：

```
Item Id, ItemVersion Id, Date (from ItemVersionStatus), StatusType Id 
```

虽然使用 UDF 可以很好地做到这一点，但如果可能的话，我希望在单个 SQL 语句中做到这一点。我的主要目标是 SQL Server 2008，但也没有太多修改的 SQL Server Compact 4，所以依赖 UDF 不是一个很好的选择，但感谢任何帮助:)

*更新 - 一些示例数据*

```
Item:
Id
--
1
2 
```

**项目版本：**

```
Id  | ItemId | Name
----------
1   | 1      | Apple
2   | 1      | Orange
3   | 1      | Plum
4   | 2      | Petrol
5   | 2      | Diesel
6   | 2      | LPG 
```

**状态类型：**

```
Id  | Alias
-----------
1   | Created
2   | Approved
3   | Published
4   | Deleted 
```

**项目版本状态日志：**

```
Id  | ItemVersionId | StatusTypeId | Date
------------------------------------------
1   | 1             | 1            | 2012-01-01 00:00
2   | 1             | 4            | 2012-01-01 00:05
3   | 2             | 1            | 2012-01-01 00:10
4   | 2             | 3            | 2012-01-01 00:15
5   | 3             | 1            | 2012-01-01 00:20
6   | 3             | 3            | 2012-01-01 00:25 
```

在这种情况下，第 1 项的预期结果将是：

**项目状态**

```
ItemId | ItemVersionId | Date             | StatusTypeId
--------------------------------------------------------
1      | 3             | 2012-01-01 00:20 | 1
1      | 3             | 2012-01-01 00:25 | 3
1      | 1             | 2012-01-01 00:05 | 4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:45:29.223

```
With MostRecentStatus As
    (
    Select ItemVersionId, StatusTypeId, [Date]
        , Row_Number() Over ( Partition By StatusTypeId Order By [Date] Desc ) As Rnk
    From ItemVersionStatusLog As IVSL
    )
Select IV.ItemId, M.ItemVersionId, M.[Date], M.StatusTypeId
From MostRecentStatus As M
  Join ItemVersion As IV
    On IV.Id = M.ItemVersionId
Where Rnk = 1 
```

[SQL小提琴版本](http://sqlfiddle.com/#!3/2cdb8/12)

不使用 CTE 的版本：

```
Select IV.ItemId, IVSL.ItemVersionId, IVSL.[Date], IVSL.StatusTypeId
From ItemVersionStatusLog As IVSL
  Join (
      Select  IVSL2.StatusTypeId, Max([Date]) As [Date]
      From ItemVersionStatusLog As IVSL2
      Group By IVSL2.StatusTypeId
      ) As Z
    On Z.StatusTypeId = IVSL.StatusTypeId
      And Z.[Date] = IVSL.[Date]
  Join ItemVersion As IV
    On IV.Id = IVSL.ItemVersionId 
```

[SQL小提琴版本](http://sqlfiddle.com/#!3/2cdb8/35)

上述解决方案的一个问题是它不允许在同一日期和时间为同一状态输入多个条目。如果我们可以假设在这种平局的情况下，将`ItemVersionStatusLog.Id`使用最后一个值，那么我们将进行如下调整：

```
Select IV.ItemId, IVSL.ItemVersionId, IVSL.[Date], IVSL.StatusTypeId
From ItemVersionStatusLog As IVSL
  Join (
      Select IVSL1.StatusTypeId, IVSL1.[Date], Max(IVSL1.Id) As Id
      From ItemVersionStatusLog As IVSL1
        Join (
            Select  IVSL2.StatusTypeId, Max([Date]) As [Date]
            From ItemVersionStatusLog As IVSL2
            Group By IVSL2.StatusTypeId
            ) As Z
          On Z.StatusTypeId = IVSL1.StatusTypeId
            And Z.[Date] = IVSL1.[Date]
      Group By IVSL1.StatusTypeId, IVSL1.[Date]
      ) As MostRecentStatus
    On MostRecentStatus.Id = IVSL.Id
  Join ItemVersion As IV
    On IV.Id = IVSL.ItemVersionId 
```

[SQL小提琴版本](http://sqlfiddle.com/#!3/2cdb8/39)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:41:04.240

如果您可以在没有 ItemVersion.Id 的情况下生活，您可以使用 GROUP BY：

```
SELECT
  item.Id,
  MAX(log.LogDate) as LogDate,
  status.Id
FROM Item item
JOIN ItemVersion version ON item.Id = version.ItemId
JOIN ItemVersionStatusLog log ON version.Id = log.ItemVersionId
JOIN StatusType status ON log.StatusTypeId = status.Id
GROUP BY
  item.Id,
  status.Id 
```

# iphone - 为什么使用 #define UIColor 作为 CGColorRef 会导致崩溃？

> ID：10471690
> 
> 赞同：0
> 
> 时间：2012-05-06T15:22:11.207
> 
> 标签：iphone, objective-c, ios, core-graphics

我有一个这样定义的 UIColor：

```
#define kCircleInnerShadowColor [UIColor colorWithWhite:.78 alpha:1.0] 
```

然后我像这样使用它：

```
CGColorRef shadowColorRef = kCircleInnerShadowColor.CGColor;
CGContextSetShadowWithColor(cxt, size, 0, shadowColorRef); 
```

但是，这会导致 BAD_ACCESS 崩溃。如果我改为

```
CGContextSetShadowWithColor(cxt, size, 0, kCircleInnerShadowColor.CGColor); 
```

我没有崩溃，它工作正常。这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:32:05.237

它崩溃的原因是范围问题。你正在做的是：

1.  创建一个新的 UIColor 对象
2.  检索其 CGColor 指针
3.  将该指针放入一个新变量中
4.  释放 UIColor 对象（下一行...）
5.  使用 CGColor 指针，它已经指向坏数据

当您在“单行版本”中执行此操作时，您所做的是：

1.  创建一个新的 UIColor 对象
2.  检索其 CGColor 指针
3.  在函数中使用 CGColor 指针
4.  释放 UIColor 对象（下一行...）

因此，因为您在使用它的同一行中创建对象，编译器会自动保留该对象，直到函数调用返回并继续执行下一行。只有这样它才会释放对象。

但是，当您将 CGColor 设置为变量时，编译器会看到该对象不会在任何地方使用，并发送释放。但是 CGColor 不是 NSObject，编译器不会向 CGColor 发送“保留”。

如果您需要变量中的 CGColor，您可能需要使用**CGColorRetain**。

```
CGColorRef shadowColorRef = CGColorRetain(kCircleInnerShadowColor.CGColor); 
```

然后当你完成它时，**CGColorRelease**

# objective-c - 如何通过标识符获取对象？

> ID：10471691
> 
> 赞同：0
> 
> 时间：2012-05-06T15:22:36.073
> 
> 标签：objective-c, ios, xcode, storyboard

我觉得这应该很简单，但我找不到答案。我想使用我在情节提要中分配的标识符（在本例中为“myNavCon”）来获取对导航控制器（或实际上是任何对象/视图）的引用。我想要这样的工作：

```
UINavigationController *myNavigationController = [self getObjectByIdentifier:@"myNavCon"]; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:45:41.193

通过从仅包含 1 个导航控制器的早期视图将导航控制器分配给应用程序委托属性（可以在其中全局引用）来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:27:38.480

听起来您想`- (id)instantiateViewControllerWithIdentifier:(NSString *)identifier`从 UIStoryboard 类中使用。更多信息在这里：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html)

# node.js - expressjs 路由配置对象？

> ID：10471694
> 
> 赞同：2
> 
> 时间：2012-05-06T15:23:08.553
> 
> 标签：node.js, express

您可以简单地在一个对象中设置所有路由配置吗？基本上我想做的是有一个名为 routing.js 的文件，它导出一个包含所有路由的对象。必须为每条路线使用 express.get() 是很平常的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:45:58.573

我实际上有一个文件夹，其中包含我的路线的所有文件（我按对象将它们分开）。我也将我的控制器分离到文件中。路由文件如下所示：

```
/**
 * Module dependencies.
 */
var controller = require('../controllers/index');

/**
 * The API root for this object.
 */

var root = '/';

/**
 * Route definitions.
 */
var routes = function (app) {

  // get index
  app.get(root, controller.getIndex);
};

/**
 * Exports.
 */
module.exports = routes; 
```

然后在我的 app.js 文件中执行此操作，它会自动加载我的所有路由文件并配置 500 和 404 路由：

```
fs.readdir(__dirname + '/routes', function (err, files) {
  if (err) throw err;
  files.forEach( function (file) {
    require('./routes/' + file)(app);
  });

  /**
   * 500 page.
   */
  app.use( function (err, req, res, next) {

    if (err && err.status === 404) {
      return next();
    }

    res.statusCode = 500;
    res.render('404.html', {status: 500, url: req.url, error: ': ' + err.message});
  });

  /**
   * 404 page.
   */
  app.use( function (req, res, next) {
    res.statusCode = 404;
    res.render('404.html', {status: 404, url: req.url});
  });
}); 
```

如果您不想像这样读取文件，则导入部分是这一行：

```
require('./routes/' + file)(app); 
```

这允许您使用之前定义的路线。

我这样做是为了保持对创建的确切路由的控制。如果你想自动化这个过程，你可以使用[https://github.com/visionmedia/express-resource](https://github.com/visionmedia/express-resource)。

这允许您执行以下操作：

```
var express = require('express'), 
    Resource = require('express-resource'),
    app = express.createServer();

app.resource('forums', require('./forum')); 
```

为了自动创建指向 ./forum 中以下函数的路由：

```
GET     /forums              ->  index
GET     /forums/new          ->  new
POST    /forums              ->  create
GET     /forums/:forum       ->  show
GET     /forums/:forum/edit  ->  edit
PUT     /forums/:forum       ->  update
DELETE  /forums/:forum       ->  destroy 
```

如果你想要更简单的东西，你可以这样做......

```
var getRoutes = [['/', controller.index], ['/post', controller.showPost]];

for (var i = 0, len= getRoutes.length; i < len; i++) {
   var path = getRoutes[i][0];
   var controller = getRoutes[i][1];
   app.get(path, controller);
} 
```

# python - 鼻子测试输出中的字符“S”代表什么

> ID：10471696
> 
> 赞同：5
> 
> 时间：2012-05-06T15:23:49.390
> 
> 标签：python, unit-testing, nose, nosetests

我在一个外部模块上运行 python nosetests。圆点表示测试通过。S代表什么？

```
c:\vendor\test>nosetests
................................................................................
........................................SS......S.S.............................
.........SSSSSSSSSSSSSSSSSS......S....SSSS.................S..S...SSSSSSSSSSSSSS
SSSSSSSSS.SSSSSSSSSSSSSSSSSSSSS..........SS.....SSSSSSS............
----------------------------------------------------------------------
Ran 327 tests in 629.369s 
```

这似乎很明显，几乎没有提到，在文档、手册页中找不到它，也没有使用谷歌。对不起，我不是 python 本地人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T15:33:00.243

`S`表示跳过，`.`表示成功。

[http://readthedocs.org/docs/nose/en/latest/plugins/skip.html](http://readthedocs.org/docs/nose/en/latest/plugins/skip.html)

> 此插件为 SkipTest 异常安装一个 SKIP 错误类。当引发 SkipTest 时，异常将记录在结果的 skipped 属性中，**将输出“S”或“SKIP”（详细）**，该异常不会被视为错误或失败。

# javascript - 如何禁用 jQuery 为您关闭 P-tag？

> ID：10471697
> 
> 赞同：0
> 
> 时间：2012-05-06T15:24:02.817
> 
> 标签：javascript, jquery, paragraph

```
var wrapper = $('<p><div class="text">Hello World</div></p>');
console.log(wrapper.html()); 
```

变成

```
<p></p><div class="text">SOMETHING</div><p></p> 
```

你怎么能避免 HTML 像那样混乱呢？

* * *

回答： 我没有意识到将 DIV 放在段落中是无效的 HTML。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T15:27:34.923

`div`内不支持`p`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:27:06.907

尝试

```
var wrapper = $('<p></p>').html('<div class="text">Hello World</div>');
console.log(wrapper); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:27:29.903

```
var wrapper = $( '<p></p>').append(
    $( '<div></div>' )
        .text( 'Hello World' )
        .attr( 'class', 'text' )
); 
```

或者只是`innerHTML`从您的评论中使用：

```
var wrapper = document.createElement('p');
wrapper.innerHTML = '<div class="text">Hello World</div>';
console.log( wrapper );​ 
```

jsfiddle：http: [//jsfiddle.net/Ralt/R9kXU/](http://jsfiddle.net/Ralt/R9kXU/)

# java - 检测 从使用 Serial Java 的传入数据

> ID：10471703
> 
> 赞同：0
> 
> 时间：2012-05-06T15:24:45.167
> 
> 标签：java, serial-port

我有一个程序从缓冲区中获取字符以形成一个字符串。

我的程序是：

```
while (i < 5) {
    ch = inStream.read();
    buffer.append((char)ch);
    i++;
}
data = buffer.toString(); 
```

对于我上面的程序，我只能用 5 个字符组成一个字符串。我想要做的是有一个可变长度的字符串。字符串的长度将取决于对 的检测`<CR>`。我使用的串行设备总是以`<CR>`. 通过这样做，我的字符串可以有任何长度。

问题解决了。这是我尝试并完美工作的方法 - 假设 300 是我的最大值，我也想检测 /n。

我的代码：

```
while (i < 300) {
    ch = inStream.read();
    if ((ch=='\r')||(ch=='\n')) {
        i = 300;
    }
    buffer.append((char)ch);
    i++;
}
data = buffer.toString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:52:56.073

假设您的意思是`<CR>`“回车”，您应该使用`BufferedReader`：

```
BufferedReader reader = new BufferedReader(inStream);
String line = null
while ((line = reader.readLine()) != null) {
    // do something with `line`

} 
```

# algorithm - 避免排列模式 - 打印没有 231 方案的所有排列

> ID：10471705
> 
> 赞同：2
> 
> 时间：2012-05-06T15:25:02.127
> 
> 标签：algorithm, permutation

在输入中，我有一个“n”数，它是排列的大小，我必须打印包含 n 个数字（从 1 到 n）的**所有可能排列**，但我必须拒绝带有“231 方案”的排列

“231 方案”意味着在排列中我们可以找到适用于不等式 z (1<2<3) 的三个连续数 (x, y, z)。

因此，例如对于 n=4，我们有 4！= 24 个排列。我们拒绝其中九个...

*   4231, 2431, 2341, 2314 - 因为他们有 231
*   2413, 3241 - 因为他们有 241
*   3412、3421 - 因为他们有 341（和 342）
*   1342 - 因为它有 342

...并打印其他 15 个可能性。

好的，这就是问题所在。我已经花了很多时间思考这个任务。我想出了这样的事情：

我们可以为 n=3 生成排列，拒绝 231，然后（对于 n=4）基于先前生成的可能性生成所有可能性。

所以我会选择一个 132 排列。现在我们以所有可能的方式“插入”4：4132、1432、1342、1324。我们可以肯定地说，第一个和最后一个排列都很好，所以我们必须更接近其他两个排列。我的想法是从“4”左侧的数字中找到最大的数字，从“4”右侧的数字中找到最小的数字。如果 left_max>right_min，我们就有了“231 方案”。

例如排列 1342：left_max=3，right_min=2，所以它是正确的“231”，我们从最终答案中拒绝它。

我会非常感谢任何评论、想法和提示。我意识到我的想法可能毫无用处，但这是我最好的。那么还有其他（可能更聪明和/或更复杂）的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:32:42.637

你有正确的想法。`1`通过加起来迭代地构建你的排列`n`。添加时`i`，您只需检查您希望避免的模式是否不**存在`i`**。

例如，如果模式是`231`，则检查左侧的`i`任何内容是否大于右侧的任何内容`i`。

如果您想打印所有结果而不是生成它们（这避免了存储问题），那么您可以按字典顺序进行排列。扫描前缀，如果模式在任何点出现，例如在第一个`k`字母中，则继续下一个前缀。这将加快迭代速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-07T04:32:49.373

这可能是一顶旧帽子，但只是补充一点：避免 231 的排列数是加泰罗尼亚数，可以估计为 O(2^(2n)) （它们也有一个很好的封闭公式）。准确地说，对于 n=15，我们将有 9,694,845 个数字。

使用加泰罗尼亚数的递归公式 [![在此处输入图像描述](../Images/8880c692bb571e29df5872870477399f.png)](https://i.stack.imgur.com/ctguJ.png)

我们也可以为避免 231 的排列构建递归：

```
all_perms(n):
    if (n=0) return [1];
    out = [];
    for i=1,...,n:
        for perm1, perm2 in all_perms(i-1), all_perms(n-i):
            increase all elements in perm2 by i-1;
            append n to perm1 (from the right), then append perm2 to that (from the right);
        add the result of appending into out; 
```

您可以使用动态编程/记忆化进一步细化此算法。

# android - 如何获得所有系统包意图的通知——无论我的应用程序在这些意图被触发时是否正在运行

> ID：10471707
> 
> 赞同：1
> 
> 时间：2012-05-06T15:25:13.873
> 
> 标签：android, android-intent

我要完成的工作：

我正在尝试跟踪所有已安装/卸载/更改/替换的应用程序/包。我想注册我的广播接收器来接收所有这些意图并启动一个服务来做我的事情。我希望无论我的应用程序当前是否处于活动状态，都会调用我的广播接收器。

我做了什么：

首先，我在清单文件中为 android.intent.action.PACKAGE_ADDED,REMOVED,CHANGED,REPLACED 意图注册了 MyBroadcastReceiver。我的接收器没有被调用。查看我遇到的论坛问题，建议为这些意图动态注册接收者，我在 MyApplication.onCreate() 覆盖中做了 - 但仍然没有成功，即使我的应用程序处于活动状态（可能已停止）。

我试图避免的事情：

我不想每次启动我的应用程序时都使用最丑陋和低效的方法来调用以下代码——只是为了与系统同步：

```
public List<ResolveInfo> getLaunchable() {
     Intent intent = new Intent(Intent.ACTION_MAIN);
     intent.addCategory(Intent.CATEGORY_LAUNCHER);              
     return myContext.getPackageManager().queryIntentActivities(intent, 0);
} 
```

我的问题：

有人可以告诉我我的解决方案中缺少什么吗？这个问题有不同的解决方案吗？

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"     package="com.my_name_space" android:versionCode="1" android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name">

    <receiver 
        android:name=".MyReceiver" android:enabled="true" android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <action android:name="android.intent.action.PACKAGE_REMOVED" />
            <action android:name="android.intent.action.PACKAGE_CHANGED" />
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <action android:name="com.gg.test_action"/>
        </intent-filter>
    </receiver>

</application>

</manifest> 
```

我的广播接收器：

```
package com.my_name_space;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class MyReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
    // Never make it to here…
    Toast.makeText(context, "Got " + intent.getAction(), Toast.LENGTH_LONG);
    }
} 
```

在动态注册变体中，我添加了 PackageBrApp：

```
package com.my_name_space;
import android.app.Application;
import android.content.Intent;
import android.content.IntentFilter;

public class PackageBrApp extends Application { 
    public MyReceiver myReceiver = null;

    @Override
    public void onCreate(){
        super.onCreate();
        myReceiver = new MyReceiver();
        registerReceiver(myReceiver, new IntentFilter(Intent.ACTION_PACKAGE_ADDED));
        registerReceiver(myReceiver, new IntentFilter(Intent.ACTION_PACKAGE_REMOVED));
        registerReceiver(myReceiver, new IntentFilter(Intent.ACTION_PACKAGE_CHANGED));
        registerReceiver(myReceiver, new IntentFilter(Intent.ACTION_PACKAGE_REPLACED));
    }
} 
```

并相应地修改了清单文件（删除了接收者声明）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android=http://schemas.android.com/apk/res/android 
    package="com.gg" android:versionCode="1" android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
    </application>

</manifest> 
```

# @@@@ 根据添加活动的建议进行更改@@@@

不幸的是，添加一个活动（并且不仅在安装后和第一次使用广播接收器之前启动它，而且多次启动它）并没有帮助。

接收器仍然拒绝唤醒……</p>

这是更新的接收器代码（更新到一些持久的偏好以消除调试器不会停在那里的可能性）。

```
package com.my_name_space;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.util.Log;
public class MyReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        SharedPreferences prefs = context.getSharedPreferences("ActivityBr", Context.MODE_PRIVATE);        
        Editor prefsEditor = prefs.edit();
        prefsEditor.putBoolean("receiverInvoked", true);
        prefsEditor.apply();        
    }
} 
```

添加的活动：

```
package com.my_name_space;

import android.app.Activity;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.widget.TextView;

public class ActivityBr extends Activity  {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) { 

        super.onCreate(savedInstanceState);               
        setContentView(R.layout.main);
        TextView v = (TextView) findViewById(R.id.text_view);

        SharedPreferences prefs = getSharedPreferences("ActivityBr", MODE_PRIVATE);
        boolean receiverInvoked = prefs.getBoolean("receiverInvoked", false);
        v.setText((receiverInvoked ? "BR invoked" : "BR not invoked"));

        Editor prefsEditor = prefs.edit();
        prefsEditor.putBoolean("receiverInvoked", false);
        prefsEditor.apply();
    }
} 
```

清单文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my_name_space"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ActivityBr"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver 
            android:name=".MyReceiver" 
            android:enabled="true"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                <action android:name="android.intent.action.PACKAGE_CHANGED" />
                <action android:name="android.intent.action.PACKAGE_REPLACED" />
                <action android:name="com.gg.test_action"/>
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

如果它有任何区别 main.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/app_name" />

</LinearLayout> 
```

猜猜我坚持定期轮询更改的丑陋解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:50:12.800

> 首先，我在清单文件中为 android.intent.action.PACKAGE_ADDED,REMOVED,CHANGED,REPLACED 意图注册了 MyBroadcastReceiver。我的接收器没有被调用。

我猜你是在 Android 3.1+ 环境中测试这个。如果是这样，您需要在您的应用程序中有一个活动，并且用户必须[手动运行该活动一次](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)，然后您的清单注册接收器才会响应。

# cordova - 将值从“控制器”类传回“视图”

> ID：10471708
> 
> 赞同：0
> 
> 时间：2012-05-06T15:25:17.950
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

在我的视图中，我添加了一个按钮，当我单击它时，会调用 Controller 类。View (textfield values) 中的值将通过 Web 服务的 URL 发送。然后服务器会返回一个如下所示的 JSON 字符串；

> {“价值”：“成功”}

现在，我需要将此 JSON 字符串发送回视图，视图将根据 JSON 响应提醒用户。如果 JSON 返回 SUCCESS，则会显示 Success 警报，如果 JSON 返回 FAIL，则会显示 Fail 警报。

1.) 在我的代码中，我只能显示来自 VIEW 的 JSON 响应，但是如何将它发送到控制器？（`var text = response.responseText;`显示 JSON 响应）

2.) 我怎样才能将字符串与视图分开，并且只从 JSON 响应中获取 SUCCESS 或 FAIL 字符串？

**按钮实现，来自视图类**

```
xtype:'button',
                   id:'when_button_click',
                   text:'Send',
                   ui:'confirm', 
```

**控制器类**

Ext.define('myapp.controller.testcont', {

```
 extend: "Ext.app.Controller",
                  config: {
                  refs: {
                  newNoteBtn: "#when_button_click"
                  },
                  control: {
                  newNoteBtn: {
                  tap: "onNewNote"
                  }
                  }
                  },
                  onNewNote: function () {
 var values = Ext.getCmp('form').getValues();
                 console.log("inside onNewNote function");

       Ext.Ajax.request({
                        url: 'http://call.com/the_webservice',
                        params : values,

                        failure: function (response) {
                        var text = response.responseText;
                         console.log("fail");

                        },                              success: function (response) {
                        var text = response.responseText;
                         console.log("success");

                        }

                        });

                  }

                  // init and launch functions omitted.
                  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:47:02.647

> 1.) 在我的代码中，我只能显示来自 VIEW 的 JSON 响应，但是如何将它发送到控制器？

为什么要将值传递回`view`from `controller`？

我认为没有任何正当理由这样做。

您可以像这样`Ext.Msg.alert`在控制器本身`success`和`failure`Web 服务上显示

```
.....
.....
url: 'http://call.com/the_webservice',
params : values,

failure: function (response) {
   var text = response.responseText;
   Ext.Msg.alert('Error','Error while executing Web Service');
},

success: function (response) {
   var text = response.responseText;
   Ext.Msg.alert('Success','Web Service code successfully executed');
},
.....
..... 
```

> 2）我怎么能将字符串与视图分开，只从 JSON 响应中获取 SUCCESS 或 FAIL 字符串？

**编辑：**

做这样的事情..

```
var result = Ext.decode(response.responseText);

// result.value = SUCCESS or FAIL
Ext.Msg.alert('Message',result.value); 
```

# django - 自定义 S3BotoStorage 类构造函数错误

> ID：10471715
> 
> 赞同：1
> 
> 时间：2012-05-06T15:26:09.717
> 
> 标签：django, amazon-s3, amazon-web-services, django-storage

我正在尝试基于 S3BotoStorage 创建一个新的自定义存储类，并且我不断收到以下代码的此错误：

```
import sys
from django.core.files.storage import Storage
from storages.backends.s3boto import S3BotoStorage

class customStorage(S3BotoStorage):
    def __init__(self, *args, **kwargs):
        kwargs['bucket_name'] = 'bucket_1'
        print >> sys.stderr, 'Creating MyS3Storage'        
        super(S3BotoStorage, self).__init__(*args, **kwargs) 
```

错误：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
self._setup()
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/files/storage.py", line 285, in _setup
self._wrapped = get_storage_class()()
File "/Users/abisson/Sites/poka/common/storages/models.py", line 10, in __init__
super(S3BotoStorage, self).__init__(*args, **kwargs)
TypeError: object.__init__() takes no parameters 
```

我的答案基于[指向 s3boto 中的多个 S3 存储桶](https://stackoverflow.com/questions/9174601/pointing-to-multiple-s3-buckets-in-s3boto)，它应该工作不？即使是正常情况下，我们也可以这样做：

```
obj1 = models.FileField(storage=S3BotoStorage(bucket='bucket_1'), upload_to=custom_upload_to) 
```

它有效。（并将参数传递给构造函数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:41:21.727

你调用了错误的初始化函数！你的意思是打电话给父母，但你打电话给父母的父母。您需要从以下位置更改您的 super() 行：

```
super(S3BotoStorage, self).__init__(*args, **kwargs) 
```

到：

```
super(customStorage, self).__init__(*args, **kwargs) 
```

通常， super() 命令获取当前对象和您要调用的父对象的类。这很重要，因为有时一个人实际上确实想打电话给父母的父母。这是允许的，因为在需要时仍可以将子对象视为父对象。

# java - 有理数的哈希码

> ID：10471717
> 
> 赞同：1
> 
> 时间：2012-05-06T15:26:14.130
> 
> 标签：java

我在java中实现了一个类来模拟有理数，它有两个整数来模拟分子和分母。我需要重写 Object 的 hashcode 方法，所以相同的数字具有相同的哈希码。

我已经像这样定义了我的 equals() 方法：

```
public boolean equals(Object obj) {
    Racional r = null;
    if (obj instanceof Racional) {
        r = (Racional) obj;
    } else {
        return false;
    }
    return r.getDenominador() * this.numerador == r.getNumerador() * this.denominador;
} 
```

关于这一点：

返回分子 * 分母会是一个好方法吗？

等效的有理数（如 1/4 和 2/8）是否应该返回相同的哈希码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:28:57.913

这完全取决于您如何实现您的`equals`方法。如果`obj1.equals(obj2)`是`true`，`obj1.hashCode() == obj2.hashCode()`应该也是`true`。我可能只会`new Double((double) numerator / denominator).hashCode()`用于我的哈希，但您的要求可能不允许这样做。

/edit给定您的方法，
使用`numerator * denominator`您的哈希将是一种无效的`equals`方法。使用 and 的示例`1/4`，`2/8`将`1/4.equals(2/8)`返回`true`，但`1/4.hashCode() == 2/8.hashCode()`会评估为`4 == 16`，并返回`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:31:17.687

> 等效的有理数（如 1/4 和 2/8）是否应该返回相同的哈希码？

由于您的`equals()`方法返回`true`1/4 和 2/8，[因此这两个数字必须具有相同的哈希码](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

实现这一点的一种方法是简化分数（例如，在构建时）。这可以通过将分子和分母除以它们的[GCD](http://en.wikipedia.org/wiki/Greatest_common_divisor)来完成。一旦你这样做了，任何合理`hashCode()`的功能都可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:28:56.673

建议类似：

```
37*numerator + 13* denominator 
```

对于哈希码，其中这些是素数。

我会认为 1/4 和 2/8 是不同的，除非你有一个积极的标准化政策。但这取决于你。确保你很好地记录了行为。

更新：您需要确定平等的含义。我会先规范化，然后写：

```
return this.numerator == r.numerator && this.denominator == r.denominator 
```

# php - 敏捷工具包中带有缩进类别的下拉菜单

> ID：10471720
> 
> 赞同：1
> 
> 时间：2012-05-06T15:26:32.757
> 
> 标签：php, recursion, tree, controller, atk4

我有一个带有 id、name、id_parent 结构的类别表。我正在使用 atk4，我喜欢显示带有缩进子类别的下拉菜单。所以：

```
home
---cat1
---cat2
------subcat2.1
------subcat2.2
---cat3 etc 
```

我确实构建了一些有用的东西，但是想看看如何改进它。目前我有基于 hasMany() 的递归 sql 查询。感觉这可以在不重新查询的情况下完成。主要担心的是我现在在模型中定义了样式，但我不知道如何移出。我试图学习自己的控制器功能，但到目前为止还没有成功。到目前为止我的代码：

该模型

```
<?php
class Model_Category extends Model_Table {
  public $table='category';
  function init() {
    parent::init();
    $this->addField('id_parent');
    $this->addField('name');
    $this->hasMany('Category','id_parent');
  }

  function tree($prefix='') {
    $r=array();
    $childs=$this->ref('Category');
    foreach($childs as $child) {
      $r[$childs->id]=$prefix.$childs['name'];
      $r=array_merge($r,$childs->tree($prefix.'---'));
    }
    return $r;
  }
} 
```

在页面上：

```
$f=$this->add('Form');
$m=$this->add('Model_Category');
$m->load(1); // start recursive from home category
$f->addField('dropdown','category')->setValueList($m->tree()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:52:10.093

由 Bob 贡献，我现在在 atk4-addons 中添加了一个新插件：

[https://github.com/atk4/atk4-addons/blob/master/misc/lib/Form/Field/drilldown.php](https://github.com/atk4/atk4-addons/blob/master/misc/lib/Form/Field/drilldown.php)

如文件中所述，模型需要同时设置父字段和子字段：

```
$this->hasMany('Category','id_parent');
$this->hasOne('Category','id_parent')->display(array('form'=>'misc/drilldown')); 
```

[测试用例和分层下拉列表的一个很好的例子可以在这里看到](https://github.com/atk4/atk4-testsuite/blob/db0dcb66222be5ca18dba00ec8aa2a775a6017db/page/drilldown.php)：

非常感谢 Bob 实际编写了这个附加组件。保持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:25:47.570

Create a class extending Form_Field_Dropdown which would implement what you have already built. Once you're done, add it to the forked atk4-addons and I'll adjust it to be universally usable. What you have here is a good recipe but a universal solution would help the community.

# java - 如何在 Java 上创建数据流图

> ID：10471724
> 
> 赞同：3
> 
> 时间：2012-05-06T15:27:14.957
> 
> 标签：java, eclipse, plugins

我是一名工科学生，我研究过数据流图。我已经做了java文件的解析器。

我还在研究数据流图如何制作数据流图。

我找不到工具和插件

我正在寻找使用 eclipse 使用 java 程序插件或开源代码的数据流图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-17T03:17:09.817

站在 2020 年，我仍然找不到合适的数据流图生成工具，但这里有几个资源可能会有所帮助：

1.  使用 Soot 进行数据流分析：

[http://www.cs.toronto.edu/~aamodkore/notes/dfa-tutorial.html](http://www.cs.toronto.edu/%7Eaamodkore/notes/dfa-tutorial.html)

2.  一个从类生成数据流图的开源项目：

[https://github.com/daanvdh/JavaDataFlow](https://github.com/daanvdh/JavaDataFlow)

# python - 将自定义艺术添加到工具栏

> ID：10471726
> 
> 赞同：0
> 
> 时间：2012-05-06T15:27:25.860
> 
> 标签：python, wxpython, toolbar, wxwidgets

这个源代码

```
class MyToolBar(wx.ToolBar):
  def AddTool2(self, id, shortHelp = '', longHelp = ''):
    global TB_SIZE
    try:
      ArtId = ArtMap.get(id)
      Ico = wx.ArtProvider.GetBitmap(ArtId, wx.ART_TOOLBAR, TB_SIZE)
      self.AddSimpleTool(id, Ico, shortHelp, longHelp)
    except StandardError:
      print('Something wrong, maybe wrong id')

Class MyFrame(wx.Frame):
  def __init__(self, parent, *args, **kwargs):
    wx.Frame.__init__(self, parent, *args, **kwargs)

    ToolBar = MyToolBar(self)
    ToolBar.AddTool2(wx.ID_NEW, 'New', 'Creates new file')
    self.SetToolBar(ToolBar)
    self.GetToolBar().Realize()

ArtMap = { wx.ID_NEW : wx.ART_NEW,
          }
ID_BOUNCE = wx.NewId()
TB_SIZE = wx.Size(16,16)

app = wx.app()
frame = MyFrame(None, -1, 'MyFrame', (0,0))
app.MainLoop() 
```

当工具具有 wx.ART 时，可以很好地向工具栏添加工具。但是，您如何添加一个没有 wx.ART 或没有 wx.ART 的新工具，可以很好地表示它，就像 ID_BOUNCE 工具 Bounce 假设让球在框架中反弹？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:14:59.853

`wx.ToolBar`具有[`AddLabelTool`](http://www.wxpython.org/docs/api/wx.ToolBarBase-class.html#AddLabelTool)带有位图参数的方法。
在[zetcode](http://zetcode.com/wxpython/menustoolbars/)上找到一个示例。

# jquery - jQuery在悬停时淡入背景图像

> ID：10471733
> 
> 赞同：3
> 
> 时间：2012-05-06T15:27:43.810
> 
> 标签：jquery

我有一排菜单按钮，我需要背景图像是透明的，然后在翻转（悬停）时淡入。我可以使用 jQuery 来实现这一点吗？

[http://jsfiddle.net/craigzilla/JdHWY/](http://jsfiddle.net/craigzilla/JdHWY/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:39:55.840

由于只有在块中的文本可见时才能淡化背景，因此您可以对标记进行一些小的更改：

HTML：

```
<div class="menuitem"><span></span>ITEM 01</div> 
```

CSS：

```
.menuitem {
    position: relative;
    /* ... */
}
.menuitem span {
    position: absolute;
    display: none;
    top: 0;
    left: 0;
    width: inherit;
    height: inherit;
    background-image: url(http://thumbs.gograph.com/gg58916312.jpg);
    z-index: -1;
}​ 
```

JavaScript：

```
$(".menuitem").hover(function() {
    $(this).children("span").fadeIn();
}, function() {
    $(this).children("span").fadeOut();
});​ 
```

**演示：http:** [//jsfiddle.net/JdHWY/11/](http://jsfiddle.net/JdHWY/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:36:47.660

HTML：

```
 <div class="header">
    <div class="menuitem">ITEM 01</div>
    <div class="menuitem">ITEM 02</div>
    <div class="menuitem">ITEM 03</div>
    <div class="menuitem">ITEM 04</div>
  </div> 
```

CSS：

```
.menuitem {
    background-image: url(http://thumbs.gograph.com/gg58916312.jpg);
    width: 180px;
    margin-left: 1px;
    margin-right: 1px;
    margin-top: 102px;
    height: 75px;
    float: left;
    cursor: pointer;
    font-size: 36px;
    text-align: center;
    line-height: 85px;
    opacity: 0.5
} 
```

jQuery：

```
$('.menuitem').hover(function() {
    $(this).stop().animate({
        opacity: 1
    }, 300);
}, function() {
    $(this).stop().animate({
        opacity: 0.5
    }, 300);
}); 
```

查看**[演示](http://jsfiddle.net/JdHWY/20/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:35:41.740

就像这样（我的头顶），然后你必须将 fadin() fadeout() 添加到例如混音中。

[http://jsfiddle.net/JdHWY/4/](http://jsfiddle.net/JdHWY/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:43:04.430

### *[演示 jsFiddle](http://jsfiddle.net/roXon/LN8Yj/)*

```
$('.menuitem').fadeTo(0,0.7).on('mouseenter mouseleave',function( ev ){
    ev=ev.type==='mouseenter'      ?  // event is mouseenter?
    $(this).stop().fadeTo(200,1)   :  // (if yes) 
    $(this).stop().fadeTo(200,0.7) ;  // (if no) event is mouseleave
}); 
```

这将很好地处理快速鼠标悬停，因为`.stop()`这将清除动画队列。

# selenium-grid - Selenium Grid+TestNG 并行运行

> ID：10471735
> 
> 赞同：0
> 
> 时间：2012-05-06T15:27:52.040
> 
> 标签：selenium-grid

我在使用 Selenium RC+SeleniumGrid+TestNG 进行并行启动测试时遇到问题。当我运行项目时，所有浏览器都会打开，但测试会在适当的浏览器中一一运行。请问你能帮帮我吗？

PS对不起我的英语...

这是我的工件：

***fotttest.java：***

```
package ololo;
import org.testng.AssertJUnit;
import com.thoughtworks.selenium.*;    
import org.testng.annotations.*;
//import org.testng.Assert.*;
//import java.util.regex.Pattern;    
public class fotttest {
public Selenium selenium;
    //@BeforeMethod
    @BeforeTest()
    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.google.com.ua/");
        selenium.start();
    }

    @AfterTest()
    public void tearDown() {
    selenium.stop();
    }

    @Test(description="FottballUATest")
    public void TestOne() throws Exception {
        selenium.open("/");
        Thread.sleep(3000);
        selenium.type("id=gbqfq", "football.ua");
        selenium.click("id=gbqfb");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("link=Football.ua - все о футболе")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("css=em");
        selenium.waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("link=Лига чемпионов")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("link=Лига чемпионов");
        selenium.waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("link=календарь игр")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("link=календарь игр");
        selenium.waitForPageToLoad("30000");
        selenium.select("id=ctl00_ctl17_ddlTeam", "label=Барселона");
        selenium.click("css=#ctl00_ctl17_ddlTeam > option[value=\"51\"]");
        selenium.waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("xpath=(//a[contains(text(),'2')])[9]")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("xpath=(//a[contains(text(),'2')])[8]");
        selenium.waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isTextPresent("Матч завершен! Челси проходит Барселону!")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }       
    }   
} 
```

***新测试：***

```
package ololo;

import org.testng.AssertJUnit;
import com.thoughtworks.selenium.*;

import org.testng.annotations.*;

public class NewTest {
public Selenium selenium;

@BeforeTest()
public void setUp() throws Exception {
    selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.google.com.ua/");
    selenium.start();
}

@AfterTest()
public void tearDown() {
selenium.stop();
}

    @Test (description="IsportTest") 
    public void TestTwo() throws Exception {
        selenium.open("/");
        selenium.type("id=gbqfq", "isport.ua");
        selenium.click("id=gbqfb");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("css=em")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("css=em");
        selenium.waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("link=БОКС+ММА")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("link=БОКС+ММА");
        selenium.waitForPageToLoad("30000");
        for (int second = 0;; second++) {
            if (second >= 60) AssertJUnit.fail("timeout");
            try { if (selenium.isElementPresent("link=Котто: \"Все это время Мейвезер был джентльменом\"")) break; } catch (Exception e) {}
            Thread.sleep(1000);
        }

        selenium.click("link=Котто: \"Все это время Мейвезер был джентльменом\"");
        selenium.waitForPageToLoad("30000");
    } 
```

}

***testng.xml：***

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite thread-count="2" name="Suite" parallel="tests">
  <test name="Test" preserve-order="true">
    <classes>
      <class name="ololo.NewTest"/>
      <class name="ololo.fotttest"/>
    </classes>
  </test> <!-- Test -->
</suite> <!-- Suite --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:25:36.217

parallel="tests" 意味着`<test>`标签将并行运行。即，如果您有多个测试标签，那么它们将并行运行。

```
<test name="Test1">
<classes>...
</test>
<test name="test2">
<classes>...
</test> 
```

，然后 test1 和 test2 将并行运行。如果你希望每个测试用例并行运行，你应该设置parallel="methods"。同样对于类级别的并行性，使用类。

# php - 解析错误：语法错误，意外 '['，期待 ',' 或 ';'

> ID：10471736
> 
> 赞同：-3
> 
> 时间：2012-05-06T15:27:56.813
> 
> 标签：php

我试过谷歌搜索，也在这里浏览过类似的主题。抱歉，如果这是一个非常愚蠢的问题，但它一直在吞噬我，我没有平和的心态来寻找问题。

> 解析错误：语法错误，意外 '['，期待 ',' 或 ';' 在第 58 行的 xxx.php 中

```
<?php
while($row = mysql_fetch_array($result)){
?>
<tr>
    <td> </td>
    <td><?php echo row['transaction_id'] ?></td> //line no 58
    <td><?php echo row['mobile_operator'] ?></td>
    <td><?php echo row['amount'] ?></td>
    <td><?php echo row['email'] ?></td>
    <td><?php echo row['payment_gateway'] ?></td>
    <td><?php echo row['payment_status'] ?></td>
    <td><?php echo row['payment_remarks'] ?></td>
</tr>
<?php
$i=$i+1;
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T15:28:29.357

您缺少每行上行变量的 $ infront。它应该是：

```
<td><?php echo $row['transaction_id']?></td> //line no 58
<td><?php echo $row['mobile_operator']?></td>
<td><?php echo $row['amount']?></td>
<td><?php echo $row['email']?></td>
<td><?php echo $row['payment_gateway']?></td>
<td><?php echo $row['payment_status']?></td>
<td><?php echo $row['payment_remarks']?></td> 
```

# java - 转换为 BufferedImage.TYPE_BYTE_BINARY 是如何工作的？

> ID：10471742
> 
> 赞同：0
> 
> 时间：2012-05-06T15:28:43.573
> 
> 标签：java, graphics

在 Java 中，可以将包含多种颜色的图像加载到具有颜色空间 BufferedImage.TYPE_BYTE_BINARY 的 BufferedImage 对象中，然后图像为黑/白。我想知道的是如何“重新着色”为黑色/白色：每个像素是否独立于其他像素发生变化，例如，仅通过查看当前像素的颜色是否更类似于黑色而不是白色，或者是以某种方式考虑相邻像素？

状态的文档 BufferedImage.TYPE_BYTE_BINARY：

```
When color data is stored in an image of this type, the closest color in 
the colormap is determined by the IndexColorModel and the resulting index 
is stored. 
```

我假设这意味着每个像素的颜色都独立于其相邻像素的颜色而改变，或者这句话是否意味着别的？我对成像的东西不是很熟悉，这就是为什么我想知道我是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:31:53.743

如果不涉及缩放，则转换应该是一对一的。在从彩色转换为黑白的情况下，可以通过像这样计算像素颜色的灰度值来完成`Gray = 0.299×Red + 0.587×Green + 0.114×Blue`并将阈值（例如 128）应用于结果来完成。如果大于 128，则设为白色；否则，将其设为黑色。假设颜色图中的第一个条目是黑色，第二个是白色，那么灰度值大于 128 的像素将被赋予条目索引 1，其他像素将被赋予索引 0；

**注意：** BufferedImage.TYPE_BYTE_BINARY 类型的 BufferedImage 有一个没有 alpha 的 IndexColorModel。它表示不透明的字节压缩 1、2 或 4 位图像，即 2 色、4 色和 16 色图像，具有适当颜色条目的颜色图。如果您在不传递 IndexColorModel 的情况下构造 BufferedImage，则会创建一个默认的 back-n-white colormap，其中包含两个条目 {0, 0, 0} 和 {255, 255, 255}。但这不限于黑白，您可以从默认的 sRGB ColorSpace 中选择任意两种颜色并创建一个 IndexColorModel 以传递给 BuffereImage 构造函数。您可以使用 IndexColorModel 以相同的方式创建 4 色和 16 色图像。

# android - BroadcastReceiver 和 ReentrantLock。有什么问题吗？

> ID：10471753
> 
> 赞同：0
> 
> 时间：2012-05-06T15:29:47.677
> 
> 标签：android, locking, broadcastreceiver, reentrantlock

我正在开发一个可点击的小部件。我想使用一个静态的 java.util.concurrent.locks ReentrantLock 所以每次只调用一次小部件逻辑。

但我担心的是，在非常罕见的情况下，锁可能不会被释放，因为它会因为 10 秒的生命周期窗口而被预先杀死。

使用 ReentrantLock 是否存在反对意见？释放锁的最佳方法是什么？

或者也许有一个Android选项可以只运行单线程？

目前我正在考虑在finally块或finalize方法（哎哟）中释放onReceive结束时的锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:48:07.317

> 我想使用一个静态的 java.util.concurrent.locks ReentrantLock 所以每次只调用一次小部件逻辑。

`onUpdate()``AppWidgetProvider`在主应用程序线程上调用一个。根据定义，它只能被称为“一次一次”。您不需要锁。

# c# - 动态添加到 ArrayList 并在 gridview 中显示

> ID：10471756
> 
> 赞同：0
> 
> 时间：2012-05-06T15:30:07.217
> 
> 标签：c#, arraylist, session-variables

我正在尝试将按钮单击上的文本框中的元素添加到网格视图。每次用户点击按钮时，我都希望它在末尾添加另一个元素。

目前，每次单击按钮时都会覆盖 [0] 元素，并且仅显示最近添加的字符串值。我也在尝试将数组列表添加到会话变量中。

怎样才能做得更好？

```
public string InputArray;
ArrayList myArrayList = new ArrayList();

private void BindData()
{
    SuffixGridView.DataSource = myArrayList;
    SuffixGridView.DataBind();
}

protected void Page_Load(object sender, EventArgs e)
{
    InputArray = suffixTextBox.Text;
    Session["postFix"] = (ArrayList)myArrayList;
}

protected void SuffixButton_Click(object sender, EventArgs e)
{
    myArrayList.Add(InputArray);
    BindData();
    suffixTextBox.Text = String.Empty;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:34:13.010

`Page_Load``Session["postFix"]`每次都用当前的 myArrayList覆盖——甚至 on `SuffixButton_Click`（或者更确切地说 on `Page.IsPostBack`）。相反，在回发时从 Session 加载 myArrayList。

# sql - 在单个查询中将行插入到多个表中，从涉及的表中进行选择

> ID：10471757
> 
> 赞同：18
> 
> 时间：2012-05-06T15:30:19.183
> 
> 标签：sql, postgresql, insert, common-table-expression

我有以下形式的两个表（即，每个 foo 都链接到一个栏）。

```
CREATE TABLE foo (
    id INTEGER PRIMARY KEY,
    x INTEGER NOT NULL,
    y INTEGER NOT NULL,
    ...,
    bar_id INTEGER UNIQUE NOT NULL,
    FOREIGN key (bar_id) REFERENCES bar(id)
);

CREATE TABLE bar (
    id INTEGER PRIMARY KEY,
    z INTEGER NOT NULL,
    ...
); 
```

使用嵌套查询很容易复制`foo`满足特定条件的行：

```
INSERT INTO foo (...) (SELECT ... FROM foo WHERE ...) 
```

但我不知道如何`bar`为每一行复制相关行`foo`并将 id 插入`bar`到新`foo`行中。有没有办法在单个查询中做到这一点？

期望结果的具体示例：

```
-- Before query:

foo(id=1,x=3,y=4,bar_id=100)  .....  bar(id=100,z=7)
foo(id=2,x=9,y=6,bar_id=101)  .....  bar(id=101,z=16)
foo(id=3,x=18,y=0,bar_id=102) .....  bar(id=102,z=21)

-- Query copies all pairs of foo/bar rows for which x>3:

-- Originals
foo(id=1,x=3,y=4,bar_id=101)  .....  bar(id=101,z=7)
foo(id=2,x=9,y=6,bar_id=102)  .....  bar(id=102,z=16)
foo(id=3,x=18,y=0,bar_id=103) .....  bar(id=103,z=21)

-- "Copies" of foo(id=2,...) and foo(id=3,...), with matching copies of
-- bar(id=102,...) and bar(id=103,...)
foo(id=4,x=9,y=6,bar_id=104)  .....  bar(id=104,z=16)
foo(id=5,x=18,y=0,bar_id=105) .....  bar(id=105,z=21) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-06T16:23:05.250

### 最终版本

...在从 OP 获得更多信息之后。考虑这个演示：

```
-- DROP TABLE foo; DROP TABLE bar;

CREATE TEMP TABLE bar (
 id serial PRIMARY KEY  -- using a serial column!
,z  integer NOT NULL
);

CREATE TEMP TABLE foo (
 id     serial PRIMARY KEY  -- using a serial column!
,x      integer NOT NULL
,y      integer NOT NULL
,bar_id integer UNIQUE NOT NULL REFERENCES bar(id)
); 
```

插入值 -`bar`首先。如果您在这样的问题中提供测试数据，
那将非常**有帮助！**

```
INSERT INTO bar (id,z) VALUES
 (100, 7)
,(101,16)
,(102,21);

INSERT INTO foo (id, x, y, bar_id) VALUES
 (1, 3,4,100)
,(2, 9,6,101)
,(3,18,0,102); 
```

将序列设置为当前值，否则我们会得到重复的键违规：

```
SELECT setval('foo_id_seq', 3);
SELECT setval('bar_id_seq', 102); 
```

检查：

```
-- SELECT nextval('foo_id_seq')
-- SELECT nextval('bar_id_seq')
-- SELECT * from bar;
-- SELECT * from foo; 
```

询问：

```
WITH a AS (
    SELECT f.x, f.y, bar_id, b.z
    FROM   foo f
    JOIN   bar b ON b.id = f.bar_id
    WHERE  x > 3
    ),b AS (
    INSERT INTO bar (z)
    SELECT z
    FROM   a
    RETURNING z, id AS bar_id
    )
INSERT INTO foo (x, y, bar_id)
SELECT a.x, a.y, b.bar_id
FROM   a
JOIN   b USING (z); 
```

这应该与您上次更新所描述的一样。

查询假定`z`是**`UNIQUE`**。如果`z`不是唯一的，它会变得更复杂。请参阅[此相关答案](https://stackoverflow.com/a/10201349/939860)中的查询 2，了解在这种情况下使用窗口函数的现成解决方案`row_number()`。

此外，请考虑用单个联合表替换和之间的**1:1 关系。**`foo``bar`

* * *

### 数据修改 CTE

更多信息后的第二个答案。

如果要在单个查询中添加行`foo` *，* `bar`可以使用从 PostgreSQL **9.1开始的**[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)：

 **```
WITH x AS (
    INSERT INTO bar (col1, col2)
    SELECT f.col1, f.col2
    FROM   foo f
    WHERE  f.id BETWEEN 12 AND 23 -- some filter
    RETURNING col1, col2, bar_id  -- assuming bar_id is a serial column
    )
INSERT INTO foo (col1, col2, bar_id)
SELECT col1, col2, bar_id
FROM   x; 
```

我从 中提取值`foo`，将它们插入，将它们`bar`与自动生成的值一起返回并将其`bar_id`插入*到*`foo`. 您也可以使用任何其他数据。

这是一个[可以在 sqlfiddle 上玩的工作演示](http://sqlfiddle.com/#!1/5a52c/1)。

* * *

### 基本

在澄清之前带有基本信息的原始答案。
基本形式是：

```
INSERT INTO foo (...)
SELECT ... FROM foo WHERE ... 
```

不需要括号。你可以对任何桌子做同样的事情

```
INSERT INTO foo (...)
SELECT ... FROM bar WHERE ... 
```

您可以加入您在 SELECT 中插入的表：

```
INSERT INTO foo (...)
SELECT f.col1, f.col2, .. , b.bar_id
FROM   foo f
JOIN   bar b USING (foo_id);  -- present in foo and bar 
```

它只是一个 SELECT 就像任何其他的一样 - 可以包括您要插入的表。首先读取行，然后插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T13:55:15.797

如果`id`of`bar`是串行的并且具有默认值`nextval('bar_id_seq'::regclass)`，您可以手动调用此函数以获取 cte 中的新 ID

```
with
s_bar as (
  SELECT id, z, nextval('bar_id_seq'::regclass) new_id
  FROM   bar
  WHERE  ...
),
s_foo as (
  SELECT x, y, bar_id
  FROM   foo
  WHERE  ...
),
i_bar as (
  INSERT INTO bar (id, z)
  SELECT new_id, z
  FROM   s_bar
),
i_foo as (
  INSERT INTO foo (x, y, bar_id)
  SELECT f.x, f.y, b.new_id
  FROM   s_foo f
  JOIN   s_bar b on b.id = f.bar_id
)
SELECT 1 
```**

# javascript - 在 IndexedDB 的对象存储块 UI 中插入大量数据

> ID：10471759
> 
> 赞同：21
> 
> 时间：2012-05-06T15:30:21.073
> 
> 标签：javascript, google-chrome-extension, indexeddb

我想在我的 IndexedDB 的对象存储中保存大约 35000 个对象。我正在使用下面的代码插入。

```
AddListings = function (x2j_list_new, callback) {   
    var transaction = db.transaction(["listings"], IDBTransaction.READ_WRITE);
    var count = 0;
    transaction.oncomplete = function (event) {
        if (callback) {
            console.log('x2jShowListing Added ' + count + '/' + x2j_list_new.length);
                callback([count, x2j_list_new.length]);
            }
    };
    transaction.onerror = function (e) {
       console.log("myError: ", e);  
       if (callback) {
          callback(false);
       }
    };
    var store = transaction.objectStore("listings");

    $.each(x2j_list_new, function (index0, item0) {
        var request = store.put(item0);
        request.onsuccess = function (event) {
            count++;
            // event.target.result  
            };
        });
    });        
}; 
```

上面的代码工作正常，但是循环和插入超过 35000 个对象会使 UI 无响应约 200 秒。我想也许我可以使用 WebWorkers，但 IndexedDB 在 WebWorkers 中不可用。我试图找到一种批量插入的方法，但找不到。关于如何在不阻塞 UI 的情况下插入大量对象的任何想法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-02T05:37:34.787

您走在正确的轨道上，但是您要求浏览器在有机会完成存储一个对象之前存储 35,000 个对象。这是在开始下一个请求之前异步等待一个请求完成的代码（但使用相同的事务）：

```
 openRequest = window.indexedDB.open("MyDatabase", 1);
    openRequest.onerror = function(event) {
        console.error(event);
    };
    openRequest.onsuccess = function (event) {
        var db = openRequest.result;
        db.onerror = function(event) {
            // Generic error handler for all errors targeted at this database's requests
            console.error(event.target);
            window.alert("Database error: " + event.target.wePutrrorMessage || event.target.error.name || event.target.error || event.target.errorCode);
        };
        var transaction = db.transaction('item', "readwrite");
        var itemStore = transaction.objectStore("item");
        putNext();

        function putNext() {
            if (i<items.length) {
                itemStore.put(items[i]).onsuccess = putNext;
                ++i;
            } else {   // complete
                console.log('populate complete');
                callback();
            }
        }           
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:49:01.100

通过使用回调，你做的一切都是正确的。

Webworker API 尚未被任何主流浏览器实现。有趣的是，它预计是同步的。由于您描述的确切原因，常规 API 是异步的——它不应该阻塞 UI 线程。

使用回调是避免锁定的方法，但是在 35k 个对象时，您会清楚地看到这种范式崩溃了。不幸的是，从我看到的基准测试来看，IDB 的性能还不能与 WebSQL 相提并论。

使用 Chrome 的 LevelDB 有一些新的实验性后端（FF 是 SQLite），但我认为您的经验证明还有一些改进的余地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T08:03:08.020

我的猜测很疯狂，但是如果 WebSQL 可以从所谓的“背景页面”获得，并且假设前端和后端之间的消息传递带宽不会以同样的方式锁定 UI，那么背景页面可能会带有可以使用页内消息吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T15:23:09.897

我将数组拆分为 500 个块并使用[setTimeout](http://www.kryogenix.org/days/2009/07/03/not-blocking-the-ui-in-tight-javascript-loops)而不是 for 循环。现在 UI 的响应比以前好一点

# ruby-on-rails - Rails 模型测试 - 模拟与工厂

> ID：10471760
> 
> 赞同：4
> 
> 时间：2012-05-06T15:30:39.777
> 
> 标签：ruby-on-rails, rspec, factory-bot

Rails 测试模拟对象与使用工厂对象的最佳实践是什么。是否应该*仅*在模型可能转到外部源时才使用模拟？还是仅在测试实际模型并在其他所有内容中使用模拟时才使用工厂。

例如，如果我们有一个包含客户和订单的销售系统，当我们测试客户模型时，我们是模拟订单还是只使用工厂订单？它甚至有什么不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:50:46.857

我们经常在我们的网上商店进行这种辩论，但还没有得出明确的答案。工厂具有测试与数据库交互的好处，我们发现了一些在模拟和存根中可能会遗漏的问题。另一方面，此类问题很少见，并且模拟/存根运行得相当快，这鼓励了更多的测试。

因此，我们已经朝着在单元测试中使用模拟和存根而不是工厂的方向发展，结合放弃两者的集成测试，因此测试与模拟和存根单元测试没有的数据库的功能交互。这似乎为我们取得了正确的平衡。

# java - 读取字符串时出现 Java FileReader FileNotFound 问题

> ID：10471763
> 
> 赞同：1
> 
> 时间：2012-05-06T15:30:45.970
> 
> 标签：java, filenotfoundexception, filereader

我有以下代码：

```
 BufferedReader inFromUser =
            new BufferedReader(new InputStreamReader(System.in));

    System.out.print("Enter: ");

    String m = inFromUser.readLine();

    BufferedReader br = new BufferedReader(new FileReader(m));

    String text;

    while((text = br.readLine()) != null){
        System.out.println(text);
    }

    br.close(); 
```

并且当从用户读取字符串时，永远无法找到该文件。我不知道传递字符串时发生了什么，但它变得无法找到。虽然文件非常多。

我已经运行了测试，当我用 newFileReader("Lab3/test") 替换 newFileReader(m) 时，找到了文件，但是当我将“Lab3/test”输入系统时（通过 String m = inFromUser.readLine( );) 读取它，它被读入并打印为“Lab3/test”，但是当字符串被传递到文件读取器（通过 m）时，文件读取器永远找不到文件，当字符串完全相同时。

我用谷歌搜索了一下，但试图解释这很痛苦。

提前谢谢你，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:49:01.657

您需要输入不带引号的文件名。如果使用引号输入，则文件名也必须包含引号。

如果您使用诸如 的文件名`Lab3/test`，那么 Java 将在当前工作目录中搜索该文件。当前工作目录通常是启动应用程序的位置。如果您输入完整的绝对文件名（例如`C:\Users\Smithers\Dropbox\Software Engineering Code\Eclipse\Networking\Lab3\test`.

使用反斜杠或正斜杠都没关系。

# iphone - iPhone应用程序终止时如何注销用户？

> ID：10471765
> 
> 赞同：1
> 
> 时间：2012-05-06T15:30:54.613
> 
> 标签：iphone, xcode, cocoa-touch

每当我第一次在手机上配置我的应用程序时，无论我以哪个用户身份登录，这就是保持登录状态的用户名。即使我终止我的应用程序并重新启动它，登录屏幕也会重新出现，但无论我输入什么凭据在，它是我在第一次配置应用程序时第一次使用的原始用户名，它是真正登录的（我的 SQL 数据库证实了这一点）。

当有人终止应用程序（不是点击“主页”按钮，而是从字面上关闭应用程序在后台运行）时，是否有终止用户会话并将其注销？

同样，一旦我弄清楚这一点，如果应用程序仍在其设备的后台运行并且尚未完全终止，是否无论如何都不会调出我的登录视图控制器？

最好使用确切的代码作为答案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:57:33.080

推荐你看看`UIApplicationDelegate`。有许多有趣的委托方法来处理您的应用程序状态。当然，您可以在任何 ViewController 中实现这些方法。让我们看看那里。

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    /*
     Called when the application is about to terminate.
     Save data if appropriate.
     See also applicationDidEnterBackground:.
     */
} 
```

**你的问题：**

> 当有人终止应用程序（不是点击“主页”按钮，而是从字面上关闭应用程序在后台运行）时，是否有终止用户会话并将其注销？

当然，您可以实现清除用户会话并将其注销的方法（如果您以单一模式执行，那么在任何 ViewController 中处理这些情况都会很棒）

> 同样，一旦我弄清楚这一点，如果应用程序仍在其设备的后台运行并且尚未完全终止，是否无论如何都不会调出我的登录视图控制器？

您应该处理我在[此处](https://stackoverflow.com/a/10465458/696088)的其他 StackOverflow 问题中的回答的 3 个步骤。

[您还可以在UIApplicationDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)中看到有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:41:08.303

在以下委托方法中执行注销过程。它可能会帮助你..

```
 `- (void)applicationWillTerminate:(UIApplication *)application` 
```

# java - 使用 Java 在 Linux 中监控网络使用情况

> ID：10471767
> 
> 赞同：0
> 
> 时间：2012-05-06T15:31:05.673
> 
> 标签：java, linux, networking, network-programming

我有一个基于 Java 的媒体服务器，可以将内容流式传输到网页和 Android 设备。它的设置可以供多个用户使用，还可以与其他服务器交谈并与他们共享媒体。

我希望能够通过媒体服务器中的服务监控总网络流量 (kb/s)，这样我就可以通过我的 android 设备或网页查看它，而无需查看我的服务器。

有没有一种简单的方法可以使用 Java 获取这些信息？某种linux资源文件？我从谷歌搜索中查看了 netstat 和其他一些人，他们似乎并没有以明显的方式向我提供我想要的东西。我只需要总流量，我不需要知道谁在跟我说话。

谢谢你的帮助。:)

pps：我使用的是最新版本的 OpenSUSE，但在 Fedora 上也有工作版本（最新）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:36:57.907

您可以从`/proc/net/dev`-- 查看[http://linuxdevcenter.com/pub/a/linux/2000/11/16/LinuxAdmin.html](http://linuxdevcenter.com/pub/a/linux/2000/11/16/LinuxAdmin.html)了解网络统计信息。

你会看到这样的东西：

```
间| 接收 | 发送
 面对 |字节数据包错误丢弃 fifo 帧压缩多播|字节数据包错误丢弃 fifo colls 载波压缩
    洛：2504 30 0 0 0 0 0 0 2504 30 0 0 0 0 0 0
  eth0:33769785 2548318 0 0 0 0 0 0 4146854 215379 0 0 0 0 0 0
  eth1：0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

```

因此，您需要打开文件，阅读每一行并检查第一列以找到您关心的接口，然后提取接收和/或发送的字节和/或数据包。如果您跟踪读取之间的时间，您可以这样计算速率：

Let = bytes at time = bytes at time ，比.
`b[0]``t[0]`
`b[1]``t[1]``t[0]`

然后，您可以计算速率，`r`，如下所示：
`r = (b[1] - b[0]) / (t[1] - t[0])`

# c# - UIHint MVC 常用下拉列表

> ID：10471769
> 
> 赞同：0
> 
> 时间：2012-05-06T15:31:36.143
> 
> 标签：c#, model-view-controller

所以我试图在 MVC 中获得一个常见的事件类型下拉列表。

我在 Shared/EditorTemplates/ 下创建了一个局部视图

这是它的内容：

```
@model EventManager.Models.CreateEventModel

@{

    EventManager.Models.DropdownEventTypesModel dropdownList = new EventManager.Models.DropdownEventTypesModel();

    List<SelectListItem> types = dropdownList.EventTypes;

    Html.DropDownListFor(model => model.Type, types);

} 
```

这很好用，除了我需要为每个想要使用这个通用下拉列表的模型创建一个新的局部视图，这违背了目的。C# MVC 中有没有办法说模型将具有此 Type 属性，但不指定它将来自的特定模型？

我尝试了@model dynamic，但它在 Visual Studio 中返回了这个错误：

```
An expression tree may not contain a dynamic operation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:51:07.883

您需要做的就是使编辑器模板的模型类型部分成为该编辑器将要编辑的属性的类型，而不是包含模型的类型。

假设您有一个`EventType`类 a`CreateEventModel`和 an `EditEventModel`，并且 the`CreateEventModel`和 the`EditEventModel`都有`EventType`属性，如下所示：

```
public class CreateEventModel
{
    //Other stuff here....
    public EventType TypeToCreate { get; set; }
}

public class EditEventModel
{
    //Other stuff here....
    public EventType TypeToEdit { get; set; }
} 
```

您在 EditorTemplates 文件夹中创建一个名为 EventType.cshtml 的部分文件，并在其中放置如下内容：

```
@model EventManager.Models.EventType

@{
    var types = //put whatever you need here to get the list of available types*;
}

@Html.DropDownListFor(m => m, types) 
```

请注意 DropDownListFor() 调用中的简单 m => m 表达式，以及此处没有引用任何包含模型的事实：@model 声明中的类型只是 EventType。所有编辑器模板需要知道的是，它将用于编辑 EventType 类型的属性。

您可以在视图中使用此模板，`CreateEventModel`如下`EditEventModel`所示：

创建视图：

```
@model EventManager.Models.CreateEventModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@*Other stuff here...*@

@Html.EditorFor(m => m.TypeToCreate) 
```

编辑视图：

```
@model EventManager.Models.EditEventModel

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@*Other stuff here...*@

@Html.EditorFor(m => m.TypeToEdit) 
```

(*您用于此的代码：

```
EventManager.Models.DropdownEventTypesModel dropdownList = new EventManager.Models.DropdownEventTypesModel();

List<SelectListItem> types = dropdownList.EventTypes; 
```

并不真正属于视图，但这是另一个问题。）

# ruby-on-rails-3 - 未定义的方法 'password=' for #

> ID：10471774
> 
> 赞同：0
> 
> 时间：2012-05-06T15:32:08.013
> 
> 标签：ruby-on-rails-3

我正在使用[http://ruby.railstutorial.org/chapters/user-microposts#code:sample_microposts](http://ruby.railstutorial.org/chapters/user-microposts#code:sample_microposts)教程构建一个 Micropost 模型。在运行测试以验证 micropost 对象是否响应 content 和 user_id 属性时，我收到此错误 undefined method 'password=' for # 下面是“User.rb”和“Micropost spec.rb”的代码块。

```
 **User.rb**

  class User < ActiveRecord::Base
    has_many :arts
    belongs_to :account
     attr_accessible :name, :email,:password, :password_confirmation

       has_many :microposts, dependent: :destroy
    has_many :relationships, foreign_key: "follower_id", dependent: :destroy
       has_many :followed_users, through: :relationships, source: :followed
    has_many :reverse_relationships, foreign_key: "followed_id",
                                   class_name:  "Relationship",
                                   dependent:   :destroy
      has_many :followers, through: :reverse_relationships, source: :follower

     def following?(other_user)
    relationships.find_by_followed_id(other_user.id)
     end

      def follow!(other_user)
    relationships.create!(followed_id: other_user.id)
    end

     def unfollow!(other_user)
      relationships.find_by_followed_id(other_user.id).destroy
    end
        def accountName
        account.name 
```

* **Micropost_spec***

需要'spec_helper'

```
describe Micropost do

  let(:user) { FactoryGirl.create(:user) }
  before do
    # This code is wrong!
    @micropost = Micropost.new(content: "Lorem ipsum", user_id: user.id)
  end

  subject { @micropost }

  it { should respond_to(:content) }
  it { should respond_to(:user) }

end 
```

**迁移用户**

> 类 CreateUsers < ActiveRecord::Migration def change create_table :users do |t| t.string：名称 t.string：类别
> 
> ```
>  t.timestamps
> end   end end 
> ```

**用户模型**

> class User < ActiveRecord::Base has_many :arts belongs_to :account
> has_secure_password attr_accessible :name, :email has_many :microposts
> 
> ```
>  before_create { generate_token(:auth_token)}
>    has_many :microposts, dependent: :destroy  has_many :relationships, foreign_key: "follower_id", dependent: :destroy
>    has_many :followed_users, through: :relationships, source: :followed   has_many :reverse_relationships, foreign_key: 
> ```
> 
> “followed_id”，class_name：“关系”，依赖：：destroy has_many：followers，通过：：reverse_relationships，来源：：follower
> 
> def generate_token(column) begin self[column] = SecureRandom.urlsafe_base64 end while User.exists?(column => self[column])
> 
> ```
>  def following?(other_user)
> relationships.find_by_followed_id(other_user.id)   end 
> ```
> 
> def follow！（other_user）relationship.create！（followed_id：other_user.id）end def unfollow！（other_user）relationship.find_by_followed_id（other_user.id）。destroy end def accountName account.name end end end

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:37:00.617

只是一个猜测，但看看[http://ruby.railstutorial.org/chapters/modeling-users#sec:adding_a_secure_password](http://ruby.railstutorial.org/chapters/modeling-users#sec:adding_a_secure_password)似乎你错过了密码部分。

如果不是这种情况，那么您可能需要发布您的完整模型（它看起来像是被切断了），并且可能需要为用户发布您的迁移文件。

# ios - ios 从另一个控制器中删除子视图

> ID：10471777
> 
> 赞同：0
> 
> 时间：2012-05-06T15:33:00.660
> 
> 标签：ios

我从控制器 A 添加了一个子视图。现在在作为子视图控制器的控制器 B 中，当用户完成 B 后，如何重新加载视图 A？我添加子视图的代码：

```
ChangeProfileImage *changeProfileImage =[[ChangeProfileImage alloc] init];  
    changeProfileImage.modalPresentationStyle = UIModalPresentationFormSheet;
    changeProfileImage.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    changeProfileImage.view.frame = CGRectMake(50, 50, 300, 300);  
    UIView *dimBackgroundView = [[UIView alloc] initWithFrame:self.view.bounds];
    dimBackgroundView.backgroundColor = [[UIColor grayColor] colorWithAlphaComponent:.5f];  
    [self.view addSubview:dimBackgroundView];
    [self.view addSubview:changeProfileImage.view]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:50:50.080

您可以为“dimbackground”设置标签 .. 并像这样删除它：

```
dimBackgroundView.tag = 111;//you will do this line when you create the view.
UIView *view = [controllerA.view viewWithTag:111];
[view removeFromSuperview]; 
```

刷新你的 viewController ：

当用户单击提交按钮并删除 B 视图时.. 使用`NSNotificationCenter`如下方式发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"UserSubmit" object:nil]; 
```

并在 controllerA .. viewDidLoad 例如像这样将它添加为观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshView) name:@"UserSubmit" object:nil]; 
```

你将实现这个功能：

```
- (void) refreshView
{
    //Do your stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:01:54.187

在连接到 IBAction 的视图控制器 B 上创建一个按钮，在该按钮的 IBaction 中编写以下代码，这将删除视图控制器 B

[self.view removeFromSuperview];

# model - 规范化语言模型中的组件

> ID：10471778
> 
> 赞同：1
> 
> 时间：2012-05-06T15:33:14.637
> 
> 标签：model, machine-learning, normalization, normalize

我有以下语言模型

A = X + Y + Z

X、Y 和 Z 具有不同的取值范围。

我需要分别对这些组件中的每一个进行规范化。但是，在计算所有值之前，我无法知道每个范围的最小值和最大值。

如何在单次运行中标准化这些组件？

# jquery - jquery selectMenu刷新不起作用

> ID：10471780
> 
> 赞同：1
> 
> 时间：2012-05-06T15:33:36.747
> 
> 标签：jquery, select-menu

我有一个我初始化的 selectMenu，稍后我想用一些数据填充它：

```
$.each(data, function (Key, Value) {
    $('#ddlReportFarms').append($("<option></option>")
    .attr("value", Value.ID)
    .text(Value.Name));
});                    
$('#ddlReportFarms').selectmenu('refresh', true); 
```

由于某种原因，这不起作用，新项目不显示。如果我这样做而不是刷新：

```
$('#ddlReportFarms').selectmenu(); 
```

项目已显示，但当这种情况再次发生时，selectMenu 会自我复制（出现两次）并变得有问题..

任何人？谢谢伊格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:49:34.507

您使用哪个版本的选择菜单？

我的 fork 没有刷新方法，但您的建议是正确的（也就是在已经初始化的 selectmenu 上使用 selectmenu() 来刷新它）。请参阅 wiki 了解更多信息：[https ://github.com/fnagel/jquery-ui/wiki/Selectmenu](https://github.com/fnagel/jquery-ui/wiki/Selectmenu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:54:06.100

谢谢银河乔

当我按照您的建议编写它时，selectMenu 会自我复制，只是在运行刷新时创建另一个选择菜单的次数……令人沮丧。这是刷新后的 HTML：

```
<a id="ddlReportFarms-button" class="ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown" aria-owns="ddlReportFarms-menu" aria-haspopup="true" href="#" role="button" style="width: 198px;">
<span class="ui-selectmenu-status">Select Farm</span>
<span class="ui-selectmenu-icon ui-icon ui-icon-triangle-1-s"></span>
</a>
<a id="ddlReportFarms-button" class="ui-selectmenu ui-widget ui-state-default ui-selectmenu-dropdown ui-corner-all" aria-owns="ddlReportFarms-menu" aria-haspopup="true" href="#" role="button" style="width: 198px;">
<span class="ui-selectmenu-status">Select Farm</span>
<span class="ui-selectmenu-icon ui-icon ui-icon-triangle-1-s"></span>
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:42:08.927

我相信你必须这样做：

```
[... your other code...]
$('#ddlReportFarms').selectmenu({'refresh': true}); 
```

# python - 在文件中组合输出值

> ID：10471781
> 
> 赞同：3
> 
> 时间：2012-05-06T15:33:38.160
> 
> 标签：python, count

我有一个具有以下值的文件：

```
123 9   
111 5   
12 1   
123 4   
12 4   
109 5   
12 4    
35 7   
111 4   
124 6 
```

现在我们必须生成一个输出，如下所示：

```
123 13  
111 9  
12 5  
109 5  
35 7  
124 6 
```

即如果`value`出现两次，那么在写入输出期间，我们只写一次`value`并总结`count`。 我认为可以使用函数来完成，但我很困惑如何总结价值。 请帮忙。`value`
`defaultdict`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:58:44.950

如果您不关心元素的顺序，那么您可以使用 Karls 方法。

否则使用排序的字典：

```
import collections
data = [(123, 9), (111, 5), (12, 1), (123, 4), (12, 4),
        (109, 5), (12, 4), (35, 7), (111, 4), (124, 6)]

order = collections.OrderedDict()
for value, count in data:
    order[value] = order.setdefault(value, 0) + count 
```

它类似于使用 defaultdict，您可以在构造时传递一个函数，该函数返回字典中未找到的键的默认值：

```
import collections
default = collections.defaultdict(int)
for value, count in data:
    default[value] += count 
```

但在这种情况下，元素的顺序也不会保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:40:56.917

使用`collections.Counter`. 就像是

```
counter = collections.Counter()
for a, b in data: counter.update({a: b}) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-06T15:54:37.720

使用`ordereddict`喜欢

```
mydict = ordereddict()

try:
    mydict[val] = mydict[val] + additional_val
except KeyError:
    mydict[val] = additional_val 
```

# javascript - 如何从 JavaScript API 获取 OAuth 令牌？

> ID：10471782
> 
> 赞同：2
> 
> 时间：2012-05-06T15:33:57.137
> 
> 标签：javascript, oauth, facebook-javascript-sdk, facebook-opengraph

我有一个页面应该从 facebook 对象中获取评论并使用 JavaScript 将它们发布在页面上，但是当用户登录时，我终生无法弄清楚如何获取 OAuth 令牌。这是我的页面。

```
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'myrealappid',
            status: true,
            cookie: true,
            xfbml: true,
            oauth: true,
        });
    };
    (function (d) {
        var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
    function getComments(objectid) {
//I need to append the OAuth token to this graph request
        var commentUri = "https://graph.facebook.com/" + objectid + "/comments";
        return $.getJSON(commentUri, function (json) {
            var html = "<ul>";
            $.each(json.data, function (i, fb) {
                html += "<li>" + fb.message + "</li>";
            });
            html += "</ul>"
        });
        $('.comments').html(html);
    };
    $(document).ready(function () {
        getTripComments(data.WallPostId);
    });
</script>
<div id="pageLogo">
    <img src="/images/page_logo.png" alt="Digital Mementos" />
</div>
<div id="container">
    <div class="fb-login-button">Login with Facebook to Comment</div>
    <div id="comments">
    </div>
</div> 
```

看看它在哪里说“我需要将 OAuth 令牌附加到这个图形请求”？是的，我需要这样做。如何获取 OAuth 令牌？还是我对这一切都错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:15:59.710

您缺少需要检查身份验证的部分。在[此处](https://developers.facebook.com/docs/reference/javascript/)阅读更多信息`status & sessions.`

如果您检查以下内容，您将不需要访问令牌，如 Fisch 所述：

```
 FB.login(function(response) {
   if (response.authResponse) {
     FB.api('/me', function(response) {

     });
   } else {

   }
 }); 
```

如果仍然需要访问令牌，您可以像这样获得它：

```
FB.login(function(response) {
   if (response.authResponse) {
     var access_token = response.authResponse.accessToken;

   } else {

   }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:00:09.607

不要向完全限定的端点发出请求，而是使用 Facebook 的 JavaScript 方法[FB.api](http://developers.facebook.com/docs/reference/javascript/FB.api/)。使用此方法时，您无需担心令牌。

# memory-management - 使用核心文本时如何释放核心基础对象

> ID：10471784
> 
> 赞同：0
> 
> 时间：2012-05-06T15:34:00.280
> 
> 标签：memory-management, ios5, memory-leaks, core-text

我有一种方法可以计算文本行的高度。但问题是它使用 2 项泄漏内存：CTFrame 和 Malloc（48 字节）。

以下是该方法的核心：

```
(void)calculatePageHeight {
    __weak UIBezierPath *path = [UIBezierPath bezierPathWithRect:self.view.bounds];

    NSString *sampleText = @"The CTFont opaque type represents a Core Text font object. Font objects represent fonts to an application, providing access to characteristics of the font, such as point size, transform matrix, and other attributes. Fonts provide assistance in laying out glyphs relative to one another and are used to establish the current font when drawing in a graphics context.";
    NSRange contentRange = NSRangeFromString(sampleText);
    NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:sampleText attributes:self.textAttributes];

    CFAttributedStringRef attributeRef = (__bridge CFAttributedStringRef)attributedString;

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attributeRef);

    CGPathRef myPath = [path CGPath];
    CFRange myRange = CFRangeMake(contentRange.location, contentRange.length);

    CTFrameRef contentFrame = CTFramesetterCreateFrame(framesetter, myRange , myPath, nil);
    CFArrayRef lines = CTFrameGetLines(CFRetain(contentFrame));
    NSInteger lineCount = CFArrayGetCount(lines);
    CGPoint *origins = calloc(lineCount, sizeof(CGPoint));

    CTFrameGetLineOrigins(contentFrame, CFRangeMake(0, 0), origins);
    CGFloat lineSpacing = 0;

    for (NSInteger index = 0; index < lineCount; index ++) {
        CTLineRef line = CFArrayGetValueAtIndex(lines, index);
        CGFloat ascent;
        CGFloat descent;

        CTLineGetTypographicBounds(line, &ascent, &descent, nil);
        NSLog(@"line height: %f", ascent + (descent * 2));

        lineSpacing = ascent + (descent * 2);
    }
    free(origins);
    CFRelease(lines);
    //free(contentFrame);

    NSLog(@"line spacing: %f", lineSpacing);

    NSInteger numberOfLine = TEXT_PAGE_HEIGHT / (lineSpacing);

    CGFloat pageHeight = numberOfLine * (lineSpacing);
    self.pageHeight = pageHeight;

    CGPathRelease(myPath);
    CFRelease(framesetter);
} 
```

如果我取消注释该行，CTFrame 将出现，但会出现警告：

```
Passing CTFrameRef (aka const struct_CTFrame *) to parameter of type "void *' discards qualifiers)

free(contentFrame); 
```

那么泄漏将只有一个用于 Malloc。仪器工具让我知道这行代码导致泄漏。

```
CTFrameRef contentFrame = CTFramesetterCreateFrame(framesetter, myRange , myPath, nil); 
```

任何人都可以帮助我解释这一点，我无法解释为什么 Malloc 会泄漏。以及如何解决这个问题，如何释放 CTFrame 对象？

我研究了很多，但找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T03:56:11.660

使用`CFRelease`而不是`free`，文档没有提到使用`CFRelease`来释放`CT*`对象，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:11:36.157

问题出在以下几行：

```
CTFrameRef contentFrame = CTFramesetterCreateFrame(framesetter, myRange , myPath, nil);
CFArrayRef lines = CTFrameGetLines(CFRetain(contentFrame)); 
```

在第一行中 contentFrame 的保留计数器为 1，在第二行中它增加到 2。

你不应该调用 CFRetain() ，当你完成使用它时，写：

```
CFRelease(contentFrame), contentFrame = NULL; 
```

另外，请确保 CTFrame 不为 NULL。它可能尚未创建。而且......不要释放线条！你不为他们分配内存，你只是得到参考。

你的代码应该是这样的：

```
 (void)calculatePageHeight {
    //__weak UIBezierPath *path = [UIBezierPath bezierPathWithRect:self.view.bounds];

    NSString *sampleText = @"The CTFont opaque type represents a Core Text font object. Font objects represent fonts to an application, providing access to characteristics of the font, such as point size, transform matrix, and other attributes. Fonts provide assistance in laying out glyphs relative to one another and are used to establish the current font when drawing in a graphics context.";
    NSRange contentRange = NSRangeFromString(sampleText);
    NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:sampleText attributes:self.textAttributes];

    CFAttributedStringRef attributeRef = (__bridge CFAttributedStringRef)attributedString;

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attributeRef);
    if(framesetter == NULL)
    {
      [attributedString release], attributedString = nil;
      return;
    }

    CGMutablePathRef myPath = CGPathCreateMutable();
    CGPathAddRect(myPath, self.view.bounds);

    CFRange myRange = CFRangeMake(contentRange.location, contentRange.length);

    CTFrameRef contentFrame = CTFramesetterCreateFrame(framesetter, myRange , myPath, nil);
    if(contentFrame == NULL)
    {
      CFRelease(framesetter), framesetter = NULL;
      [attributedString release], attributedString = nil;
      return;
    }
    CFArrayRef lines = CTFrameGetLines(contentFrame);
    NSInteger lineCount = CFArrayGetCount(lines);
    CGPoint *origins = (CGPoint *)malloc(lineCount * sizeof(CGPoint));

    CTFrameGetLineOrigins(contentFrame, CFRangeMake(0, 0), origins);
    CGFloat lineSpacing = 0.0f;

    for (NSInteger index = 0; index < lineCount; index ++) {
        CTLineRef line = CFArrayGetValueAtIndex(lines, index);
        CGFloat ascent;
        CGFloat descent;

        CTLineGetTypographicBounds(line, &ascent, &descent, nil);
        NSLog(@"line height: %f", ascent + (fabs(descent) * 2));

        lineSpacing = ascent + (fabs(descent) * 2);
    }
    free(origins);
    //CFRelease(lines);
    //free(contentFrame);

    NSLog(@"line spacing: %f", lineSpacing);

    NSInteger numberOfLine = TEXT_PAGE_HEIGHT / (lineSpacing);

    CGFloat pageHeight = numberOfLine * (lineSpacing);
    self.pageHeight = pageHeight;

    CGPathRelease(myPath), myPath = NULL;
    CFRelease(framesetter), framesetter = NULL;
    CFRelease(contentFrame), contentFrame = NULL;
    [attributedString release], attributedString = nil;
} 
```

# java - 谷歌地图应用程序出错

> ID：10471793
> 
> 赞同：2
> 
> 时间：2012-05-06T15:35:08.550
> 
> 标签：java, android, google-maps, google-maps-api-3

我已经开始使用 Google API 进行编程，但我的第一个应用程序不起作用。为什么？安卓模拟器被黑屏阻止。

**日志：**

```
05-06 14:25:41.554: I/ActivityManager(73): Starting: Intent { flg=0x10000000 cmp=com.google.android.gsf/.update.SystemUpdateInstallDialog } from pid 174
05-06 14:25:41.573: W/WindowManager(73): Failure taking screenshot for (230x143) to layer 21000
05-06 14:25:41.685: I/InputReader(73): Device reconfigured: id=0, name='qwerty2', display size is now 1280x800
05-06 14:25:41.764: I/ActivityManager(73): Start proc com.android.deskclock for broadcast com.android.deskclock/.AlarmInitReceiver: pid=341 uid=10026 gids={}
05-06 14:25:41.997: D/MediaScannerService(156): start scanning volume internal: [/system/media]
05-06 14:25:42.187: I/ActivityManager(73): Starting: Intent { flg=0x10000000 cmp=com.google.android.gsf/.update.SystemUpdateDownloadDialog } from pid 174
05-06 14:25:42.595: E/TelephonyManager(174): Hidden constructor called more than once per process!
05-06 14:25:42.595: E/TelephonyManager(174): Original: com.google.android.location, new: com.google.android.gsf
05-06 14:25:42.764: I/dalvikvm(73): Jit: resizing JitTable from 512 to 1024
05-06 14:25:43.254: I/ActivityThread(341): Pub com.android.deskclock: com.android.deskclock.AlarmProvider
05-06 14:25:43.573: I/ActivityManager(73): Displayed com.android.launcher/com.android.launcher2.Launcher: +44s558ms
05-06 14:25:43.686: I/TabletStatusBar(123): DISABLE_CLOCK: no
05-06 14:25:43.686: I/TabletStatusBar(123): DISABLE_NAVIGATION: no
05-06 14:25:43.975: D/dalvikvm(174): GC_CONCURRENT freed 398K, 7% free 6554K/7047K, paused 7ms+35ms
05-06 14:25:44.475: I/TabletStatusBar(123): DISABLE_BACK: no
05-06 14:25:44.653: I/ARMAssembler(73): generated scanline__00000177:03515104_00001001_00000000 [ 91 ipp] (114 ins) at [0x478be520:0x478be6e8] in 1714552 ns
05-06 14:25:45.284: D/dalvikvm(174): GC_EXPLICIT freed 34K, 8% free 6551K/7047K, paused 4ms+4ms
05-06 14:25:45.653: V/AlarmClock(341): AlarmInitReceiver finished
05-06 14:25:45.713: I/ActivityManager(73): Start proc com.android.quicksearchbox for broadcast com.android.quicksearchbox/.SearchWidgetProvider: pid=354 uid=10007 gids={3003}
05-06 14:25:45.893: D/dalvikvm(174): GC_EXPLICIT freed 47K, 8% free 6505K/7047K, paused 3ms+18ms
05-06 14:25:46.294: D/dalvikvm(174): GC_EXPLICIT freed 3K, 8% free 6502K/7047K, paused 4ms+4ms
05-06 14:25:46.664: I/ActivityThread(354): Pub com.android.quicksearchbox.google: com.android.quicksearchbox.google.GoogleSuggestionProvider
05-06 14:25:46.804: I/ActivityThread(354): Pub com.android.quicksearchbox.shortcuts: com.android.quicksearchbox.ShortcutsProvider
05-06 14:25:47.216: I/ActivityManager(73): Start proc com.android.music for broadcast com.android.music/.MediaAppWidgetProvider: pid=365 uid=10015 gids={3003, 1015}
05-06 14:25:47.674: D/dalvikvm(73): GC_CONCURRENT freed 4015K, 52% free 13520K/27783K, paused 56ms+19ms
05-06 14:25:48.514: D/GTalkService(174): [ReonnectMgr] ### report Inet condition: status=false, networkType=0
05-06 14:25:48.514: D/ConnectivityService(73): reportNetworkCondition(0, 0)
05-06 14:25:48.514: D/ConnectivityService(73): Inet connectivity change, net=0, condition=0,mActiveDefaultNetwork=0
05-06 14:25:48.514: D/ConnectivityService(73): starting a change hold
05-06 14:25:48.613: V/AlarmClock(341): AlarmInitReceiver finished
05-06 14:25:48.686: I/ActivityManager(73): Start proc com.google.android.gsf.login for service com.google.android.gsf.login/com.google.android.gsf.loginservice.GoogleLoginService: pid=378 uid=10013 gids={3003, 1015, 2001, 1007}
05-06 14:25:48.755: D/GTalkService(174): [ReonnectMgr] ### report Inet condition: status=false, networkType=0
05-06 14:25:48.755: D/ConnectivityService(73): reportNetworkCondition(0, 0)
05-06 14:25:48.764: D/ConnectivityService(73): Inet connectivity change, net=0, condition=0,mActiveDefaultNetwork=0
05-06 14:25:48.834: D/ConnectivityService(73): currently in hold - not setting new end evt
05-06 14:25:49.754: E/TelephonyManager(174): Hidden constructor called more than once per process!
05-06 14:25:49.754: E/TelephonyManager(174): Original: com.google.android.location, new: com.google.android.gsf
05-06 14:25:50.674: D/dalvikvm(289): GC_EXPLICIT freed 36K, 5% free 6206K/6531K, paused 6424ms+49ms
05-06 14:25:50.837: W/ActivityManager(73): No content provider found for: 
05-06 14:25:51.004: W/ActivityManager(73): No content provider found for: 
05-06 14:25:51.054: D/PackageParser(73): Scanning package: /data/app/vmdl-195172957.tmp
05-06 14:25:51.426: D/MediaScanner(156):  prescan time: 1351ms
05-06 14:25:51.445: D/MediaScanner(156):     scan time: 94ms
05-06 14:25:51.445: D/MediaScanner(156): postscan time: 1ms
05-06 14:25:51.445: D/MediaScanner(156):    total time: 1446ms
05-06 14:25:51.474: D/MediaScannerService(156): done scanning volume internal
05-06 14:25:51.523: D/ConnectivityService(73): Inet hold end, net=0, condition =0, published condition =0
05-06 14:25:51.523: D/ConnectivityService(73): no change in condition - aborting
05-06 14:25:51.924: I/PackageManager(73): Removing non-system package:hb.ku
05-06 14:25:51.924: I/ActivityManager(73): Force stopping package hb.ku uid=10039
05-06 14:25:52.417: D/PackageManager(73): Scanning package hb.ku
05-06 14:25:52.466: I/PackageManager(73): Package hb.ku codePath changed from /data/app/hb.ku-1.apk to /data/app/hb.ku-2.apk; Retaining data and using new
05-06 14:25:52.517: I/PackageManager(73): Unpacking native libraries for /data/app/hb.ku-2.apk
05-06 14:25:52.573: D/installd(33): DexInv: --- BEGIN '/data/app/hb.ku-2.apk' ---
05-06 14:25:52.933: D/dalvikvm(389): DexOpt: load 15ms, verify+opt 21ms
05-06 14:25:53.094: D/installd(33): DexInv: --- END '/data/app/hb.ku-2.apk' (success) ---
05-06 14:25:53.094: W/PackageManager(73): Code path for pkg : hb.ku changing from /data/app/hb.ku-1.apk to /data/app/hb.ku-2.apk
05-06 14:25:53.125: W/PackageManager(73): Resource path for pkg : hb.ku changing from /data/app/hb.ku-1.apk to /data/app/hb.ku-2.apk
05-06 14:25:53.125: D/PackageManager(73):   Activities: hb.ku.ProbandoActivity
05-06 14:25:53.556: I/installd(33): move /data/dalvik-cache/data@app@hb.ku-2.apk@classes.dex -> /data/dalvik-cache/data@app@hb.ku-2.apk@classes.dex
05-06 14:25:53.556: D/PackageManager(73): New package installed in /data/app/hb.ku-2.apk
05-06 14:25:54.453: D/dalvikvm(149): GC_CONCURRENT freed 1010K, 8% free 14319K/15495K, paused 5ms+11ms
05-06 14:25:54.594: I/ActivityManager(73): Force stopping package hb.ku uid=10039
05-06 14:25:54.663: I/ActivityManager(73): Force stopping package hb.ku uid=10039
05-06 14:25:55.493: D/PackageManager(73): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
05-06 14:25:55.533: D/dalvikvm(149): GC_FOR_ALLOC freed 1254K, 12% free 14290K/16135K, paused 189ms
05-06 14:25:55.584: D/PackageManager(73): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
05-06 14:25:55.773: D/dalvikvm(213): GC_EXPLICIT freed 254K, 6% free 6437K/6791K, paused 4ms+4ms
05-06 14:25:56.233: D/dalvikvm(149): GC_EXPLICIT freed 802K, 11% free 14588K/16327K, paused 4ms+6ms
05-06 14:25:56.353: D/PackageManager(73): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
05-06 14:25:56.373: D/PackageManager(73): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
05-06 14:25:56.474: W/RecognitionManagerService(73): no available voice recognition services found
05-06 14:25:56.853: I/ActivityManager(73): Start proc com.svox.pico for broadcast com.svox.pico/.VoiceDataInstallerReceiver: pid=397 uid=10010 gids={}
05-06 14:25:57.305: I/ActivityThread(397): Pub com.svox.pico.providers.SettingsProvider: com.svox.pico.providers.SettingsProvider
05-06 14:25:58.566: D/dalvikvm(149): GC_FOR_ALLOC freed 1364K, 13% free 14697K/16775K, paused 130ms
05-06 14:25:58.714: I/AccountTypeManager(213): Loaded meta-data for 1 account types, 0 accounts in 216ms
05-06 14:25:59.214: D/dalvikvm(149): GC_FOR_ALLOC freed 4117K, 32% free 11479K/16775K, paused 85ms
05-06 14:25:59.703: D/ExchangeService(316): Reconciling accounts...
05-06 14:25:59.853: D/dalvikvm(149): GC_CONCURRENT freed 1116K, 28% free 12129K/16775K, paused 5ms+6ms
05-06 14:26:00.413: D/dalvikvm(149): GC_CONCURRENT freed 1109K, 23% free 12986K/16775K, paused 8ms+4ms
05-06 14:26:00.896: D/dalvikvm(213): GC_CONCURRENT freed 214K, 5% free 6756K/7111K, paused 4ms+512ms
05-06 14:26:00.916: D/dalvikvm(149): GC_CONCURRENT freed 1084K, 18% free 13922K/16775K, paused 4ms+6ms
05-06 14:26:01.724: D/dalvikvm(73): GC_EXPLICIT freed 1312K, 52% free 13606K/27783K, paused 39ms+21ms
05-06 14:26:01.804: I/installd(33): unlink /data/dalvik-cache/data@app@hb.ku-1.apk@classes.dex
05-06 14:26:01.813: D/AndroidRuntime(232): Shutting down VM
05-06 14:26:01.848: I/AndroidRuntime(232): NOTE: attach of thread 'Binder Thread #3' failed
05-06 14:26:01.853: D/dalvikvm(232): GC_CONCURRENT freed 108K, 85% free 325K/2048K, paused 1ms+5ms
05-06 14:26:01.853: D/jdwp(232): adbd disconnected
05-06 14:26:02.643: D/AndroidRuntime(410): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
05-06 14:26:02.643: D/AndroidRuntime(410): CheckJNI is ON
05-06 14:26:03.594: D/AndroidRuntime(410): Calling main entry com.android.commands.am.Am
05-06 14:26:03.644: I/ActivityManager(73): Force stopping package hb.ku uid=10039
05-06 14:26:03.653: I/ActivityManager(73): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=hb.ku/.ProbandoActivity } from pid 410
05-06 14:26:03.653: W/WindowManager(73): Failure taking screenshot for (216x135) to layer 21005
05-06 14:26:03.727: D/AndroidRuntime(410): Shutting down VM
05-06 14:26:03.773: I/AndroidRuntime(410): NOTE: attach of thread 'Binder Thread #3' failed
05-06 14:26:03.785: I/ActivityManager(73): Start proc hb.ku for activity hb.ku/.ProbandoActivity: pid=419 uid=10039 gids={3003}
05-06 14:26:03.826: D/dalvikvm(410): GC_CONCURRENT freed 109K, 83% free 354K/2048K, paused 1ms+1ms
05-06 14:26:03.826: D/jdwp(410): adbd disconnected
05-06 14:26:05.573: W/ActivityThread(419): Application hb.ku is waiting for the debugger on port 8100...
05-06 14:26:05.573: I/System.out(419): Sending WAIT chunk
05-06 14:26:05.615: I/dalvikvm(419): Debugger is active
05-06 14:26:05.814: I/System.out(419): Debugger has connected
05-06 14:26:05.823: I/System.out(419): waiting for debugger to settle...
05-06 14:26:06.035: I/System.out(419): waiting for debugger to settle...
05-06 14:26:06.233: I/System.out(419): waiting for debugger to settle...
05-06 14:26:06.455: I/System.out(419): waiting for debugger to settle...
05-06 14:26:06.653: I/System.out(419): waiting for debugger to settle...
05-06 14:26:06.855: I/System.out(419): waiting for debugger to settle...
05-06 14:26:07.066: I/System.out(419): waiting for debugger to settle...
05-06 14:26:07.275: I/System.out(419): waiting for debugger to settle...
05-06 14:26:07.477: I/System.out(419): waiting for debugger to settle...
05-06 14:26:07.674: I/System.out(419): waiting for debugger to settle...
05-06 14:26:07.873: I/System.out(419): waiting for debugger to settle...
05-06 14:26:08.016: V/TLINE(73): new: android.text.TextLine@40b3dc18
05-06 14:26:08.084: I/System.out(419): waiting for debugger to settle...
05-06 14:26:08.283: I/System.out(419): waiting for debugger to settle...
05-06 14:26:08.483: I/System.out(419): waiting for debugger to settle...
05-06 14:26:08.686: I/System.out(419): waiting for debugger to settle...
05-06 14:26:08.894: I/System.out(419): waiting for debugger to settle...
05-06 14:26:09.094: I/System.out(419): waiting for debugger to settle...
05-06 14:26:09.294: I/System.out(419): waiting for debugger to settle...
05-06 14:26:09.334: D/dalvikvm(149): GC_EXPLICIT freed 946K, 15% free 14417K/16775K, paused 8ms+15ms
05-06 14:26:09.496: I/System.out(419): waiting for debugger to settle...
05-06 14:26:09.544: D/dalvikvm(149): GC_EXPLICIT freed <1K, 15% free 14417K/16775K, paused 3ms+4ms
05-06 14:26:09.714: I/System.out(419): debugger has settled (1474)
05-06 14:26:11.993: D/dalvikvm(419): GC_CONCURRENT freed 144K, 5% free 6498K/6791K, paused 12ms+7ms
05-06 14:26:13.693: W/ActivityManager(73): Launch timeout has expired, giving up wake lock!
05-06 14:26:14.983: W/ActivityManager(73): Activity idle timeout for ActivityRecord{409f0178 hb.ku/.ProbandoActivity}
05-06 14:26:15.294: D/dalvikvm(419): GC_CONCURRENT freed 257K, 6% free 6644K/7047K, paused 5ms+3ms
05-06 14:26:19.057: D/dalvikvm(419): GC_CONCURRENT freed 290K, 7% free 6802K/7239K, paused 19ms+6ms
05-06 14:26:22.094: D/dalvikvm(149): GC_EXPLICIT freed <1K, 15% free 14417K/16775K, paused 4ms+100ms
05-06 14:26:22.224: D/dalvikvm(419): GC_CONCURRENT freed 796K, 13% free 6421K/7367K, paused 4ms+9ms
05-06 14:26:30.989: I/InputDispatcher(73): Dropping event because there is no touched window or focused application.
05-06 14:26:31.144: I/InputDispatcher(73): Dropping event because there is no touched window or focused application.
05-06 14:26:31.581: I/InputDispatcher(73): Dropping event because there is no touched window or focused application.
05-06 14:26:48.022: I/InputDispatcher(73): Dropping event because there is no touched window or focused application.
05-06 14:29:35.008: I/dalvikvm(73): Jit: resizing JitTable from 1024 to 2048
05-06 14:30:33.434: D/SntpClient(73): request time failed: java.net.SocketException: Address family not supported by protocol
05-06 14:35:33.477: D/SntpClient(73): request time failed: java.net.SocketException: Address family not supported by protocol 
```

**主要文件：ProbandoActivity.java**

```
package hb.ku;

import android.os.Bundle;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class ProbandoActivity extends MapActivity {
    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        //getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        super.onCreate(savedInstanceState);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

**文件 AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="hb.ku"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="11" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
        <uses-library android:name="com.google.android.maps" />
        <activity
                android:name=".ProbandoActivity"
                android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:43:41.177

不确定这是否是唯一的问题，但在您的活动中，您正在尝试`findViewById`在您之前`setContentView`。这是错误的。您需要先告诉 Android 您要加载哪个 XML，然后引用元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:08:24.063

我已经修改了你的代码，所以请检查一下，它可能对你有帮助......按照代码行的顺序......

```
public class ProbandoActivity extends MapActivity {
    /** Called when the activity is first created. */
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            //getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
            setContentView(R.layout.main);

            MapView mapView = (MapView) findViewById(R.id.mapview);
            mapView.setBuiltInZoomControls(true);

        }

        @Override
        protected boolean isRouteDisplayed() {
            return false;
        }

} 
```

# c# - INameCreationService - 如何发送参数

> ID：10471797
> 
> 赞同：1
> 
> 时间：2012-05-06T15:36:11.753
> 
> 标签：c#, .net, desktop

我有一个桌面应用程序，它使用 IDesignerHost 并实现控件的拖放。这是基于[http://msdn.microsoft.com/en-us/magazine/cc163634.aspx](http://msdn.microsoft.com/en-us/magazine/cc163634.aspx)示例。

我在 CreateName 方法中实现了 INameCreationService &，我正在显示一个对话框来接受控件名称。[http://www.codeproject.com/Articles/91265/UserControl-Prompts-for-ControlName-after-Drop-in](http://www.codeproject.com/Articles/91265/UserControl-Prompts-for-ControlName-after-Drop-in)。

现在的问题是，每当用户进行复制粘贴时，都会弹出 EnterControlNameDialog。当用户复制一组控件（比如一个有 5 个内部控件的组框）时，EnterControlNameDialog 会显示 6 次。

我只想在通过工具箱拖放创建新控件时显示 EnterControlNameDialog。在复制粘贴期间，我想自动创建控件而不显示此弹出窗口。

这可能吗？

# android - 来自 ListView/ 行的 TextView 上的动态背景图像

> ID：10471799
> 
> 赞同：1
> 
> 时间：2012-05-06T15:36:14.693
> 
> 标签：android, background, textview, android-listview

我有一个`ListView`有两个`TextViews`。我正在尝试将背景图像动态设置为`TextViews`. 根据每个项目/行的类别，我有大约 18 个不同的图像要显示。图像被命名为`"abc1"`,`"abc2"`等。这是我的自定义代码`CursorAdapter`：

```
 private class MyListAdapter extends SimpleCursorAdapter {

    public MyListAdapter(Context context, int layout, Cursor cursor, String[] from, int[] to) {
        super(context, layout , cursor, from, to);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {

        // Get the resource name and id
        String resourceName = "R.drawable.abc" + cursor.getString(7);
        int resid = context.getResources().getIdentifier(resourceName,"drawable",context.getPackageName());

        // Create the idno textview with background image
        TextView idno = (TextView) view.findViewById(R.id.idno);
        idno.setText(cursor.getString(3));
        idno.setBackgroundResource(resid);

        // create the material textview
        TextView materials = (TextView) view.findViewById(R.id.materials);
        materials.setText(cursor.getString(1)); 
    }
} 
```

当我在调试中运行它时，`resid`总是返回`0`表示找不到资源。`resourceName`看起来正确，id : `"R.drawable.abc1"`。我将图像文件导入到`res/drawable`文件夹中，它们列在`R.java`.

这是解决这个问题的正确方法还是有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:18:37.550

您不使用全名，例如`R.drawable.abc1`，您只使用 之后的名称`drawable`。这是从,和`getIdentifier()`建立正确的工作。所以，使用的应该是：`String``name``type``package``getIdentifier()`

```
String resourceName = "abc" + cursor.getString(7);
int resid = context.getResources().getIdentifier(resourceName,"drawable",context.getPackageName()); 
```

此外，您应该查看将图像设置为背景的另一种方法，因为这`getIdentifier()`是一种执行速度慢得多的方法，并且它将在`bindView`回调中调用，当用户向上和向下滚动时可能会调用很多次`ListView`（有时用户可以以非常快的速度执行此操作）。

**编辑 ：**

您可以`getIdentifier`更有效地使用的一种方法是在自定义中初始化 id`CursorAdapter`并将其存储在名称中出现的数字（abc **1**、 abc **2**等）和实际 id`HashMap<Integer, Integer>`之间的映射中：

 ****```
private HashMap<Integer, Integer> setUpIdsMap() {
     HashMap<Integer, Integer> mapIds = new HashMap<Integer, Integer>();
     // I don't know if you also have abc0, if not use this and substract 1 from the cursor value you get
     for (int i = 0; i < 18; i++) {
         String resourceName = "abc" + 0;
         int resid =       context.getResources().getIdentifier(resourceName,"drawable",context.getPackageName());
         mapIds.put(i, resid);
     } 
```

}

在适配器的构造函数中：

```
//...field in your adapter class
    HashMap<Integer, Integer> ids = new HashMap<Integer, Integer>();

//in the constructor:
//...
    ids = setUpIdsMap();  
//... 
```

然后在`bindView`方法中使用返回的数组：

```
//...
 // Create the idno textview with background image
        TextView idno = (TextView) view.findViewById(R.id.idno);
        idno.setText(cursor.getString(3));
        idno.setBackgroundResource(ids.get(cursor.getString(7)));//depending if you have abc0 or not you may want to substract 1 from cursor.getString(7) to match the value from the setUpIdsMap method
//... 
```****

# android - 如何从窗口管理器或状态栏中找出最上面的窗口包名

> ID：10471809
> 
> 赞同：1
> 
> 时间：2012-05-06T15:25:05.723
> 
> 标签：android, android-source

这不是关于应用程序查找顶部窗口的问题。我正在修改 AOSP，需要状态栏`topAppWindowChanged()`功能的顶部窗口信息。目前唯一传递给这个函数的是菜单按钮是否应该可见。我正在寻找将顶部窗口的包名称传递给函数的方法。

该函数是从中调用的，`WindowManagerService`但我在那里也找不到包名称信息。

更新：我已经追踪到`WindowManagerService::addWindow()`哪个调​​用`updateFocusedWindowLocked()`哪个调用哪个调用`mPolicy.focusChangedLw()`哪个调用`updateSystemUiVisibilityLw()`将消息分派到状态栏服务。我已经为这些函数添加了一个包名称，但我需要在 addWindow 中获取名称，它只有一个`IWindow`传递它。我不知道如何`Context`从`IWindow`.

# html - Javascript 函数锚点 onclick 语法

> ID：10471810
> 
> 赞同：1
> 
> 时间：2012-05-06T15:37:34.007
> 
> 标签：html, syntax, hyperlink, onclick

在将参数放入函数调用之前，我的注释系统运行良好。现在不是执行函数，它只是重新加载页面并将我撞到顶部。（之前，我让它没有碰撞并且很好地插入盒子。）任何人都可以看到以下错误。请注意，我认为 # 不是从链接调用函数的首选方式，但对于这个简单的函数调用，其他方式似乎相当复杂。非常感谢。

注意thispage 是一个文本字符串，即“comments.php”，而id 和topicid 是整数。

```
<script>
function showReplyBox(id,topicid,thispage) {
    var replybox = '<form action = "newcomment.php" method = "post"><input type="hidden" name="comid" value="';
replybox = replybox+ id + '">';
replybox = replybox + '<input type="hidden" name="topicid" value="';
replybox = replybox + topicid + '">';
replybox = replybox + '<input type="hidden" name="thispage" value="';
replybox = replybox + thispage + '">';
replybox = replybox + '<textarea autofocus placeholder="Reply to comment" id="replyarea" rows=1 cols=72></textarea><br><button>Reply</button></form>';
    var empty = ""; 

document.getElementById('replybox').innerHTML = replybox;
}
</script>
<body>
//link to call function
<a href="#" onclick="showReplyBox(44,142,'comments.php');return false">Reply</a

//box inserted here
<div id="replybox"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:39:15.240

`#`将锚标记中的替换为`javascript:void(0)`

```
<a href="javascript:void(0);" onclick="showReplyBox(44,142,'comments.php');return false">Reply</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T15:39:43.353

最后让函数返回`false`以防止浏览器默认跟随锚点的行为。

这是一个工作小提琴：http: [//jsfiddle.net/VhYd8/](http://jsfiddle.net/VhYd8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:03:39.377

```
<body>
//link to call function
<a href="#" id="my_a" t_id=44 t_tid=142 t_php="comments.php">Reply</a>
<script>
    function showReplyBox(event) {
        event.preventDefault();
        var tar_a = e.target;
        var id = tar_a .getAttribute("t_id");
        var topicid = tar_a .getAttribute("t_tid");
        var thispage = tar_a .getAttribute("t_php");

        var replybox = '<form action = "newcomment.php" method = "post"><input type="hidden" name="comid" value="';
        replybox = replybox+ id + '">';
        replybox = replybox + '<input type="hidden" name="topicid" value="';
        replybox = replybox + topicid + '">';
        replybox = replybox + '<input type="hidden" name="thispage" value="';
        replybox = replybox + thispage + '">';
        replybox = replybox + '<textarea autofocus placeholder="Reply to comment" id="replyarea" rows=1 cols=72></textarea><br><button>Reply</button></form>';
        var empty = ""; 

        document.getElementById('replybox').innerHTML = replybox;
    }
    doucument.getElementById("my_a").addEventListener('click',showReplyBox,false);
</script>
//box inserted here
<div id="replyarea"></div>
</body> 
```

# android - 如何在 Android SDK 中获取文件？

> ID：10471811
> 
> 赞同：3
> 
> 时间：2012-05-06T15:37:36.723
> 
> 标签：android, eclipse

如何将图像、mp3 或 office 文件等文件放入 android SDK(eclipse) 以将其用于我的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:47:37.853

如果你想在你的apk放入`res/drawable/`文件夹中使用它，那么你可以使用它的代码`R.drawable.yourfile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:52:00.407

如果您想在项目中使用任何文件，您可以将其放入`assets/`filder 并稍后从您的代码中访问它`context.getAssets().open( 'filename' )`

# solr - 在 Apache Solr 中使用嵌套实体是否有价值？

> ID：10471815
> 
> 赞同：-1
> 
> 时间：2012-05-06T15:38:22.400
> 
> 标签：solr, dih

我想知道，在 Apache Solr DIH 中使用嵌套实体是否比使用连接查询更有价值？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:19:42.977

我认为答案是支持每个实体（表/视图）的 DELTA 查询

# c# - 如果永远不会使用引用，那么持有对对象的引用是否会将其保留在内存中？

> ID：10471817
> 
> 赞同：1
> 
> 时间：2012-05-06T15:38:50.840
> 
> 标签：c#, garbage-collection, clr

我有一个带有 WeakReferences 对象的集合。对象在运行时动态加载，可以被 GC 随机回收。

有时，我需要永久删除一个对象，这是通过异步 DB 命令完成的。含义 - 在删除命令和实际提交持久性数据库中的删除之间有一个时间段，可以对对象进行 GC，然后从数据库中重新加载。

我解决这个问题的最简单方法是在每个对象中都有一个“已删除”标志（已经有一个），并且在执行删除操作时，将对已删除对象的强引用添加到 DB Command 对象，所以当操作完成后强引用丢失，对象可以被永久释放。

问题是，GC 是否允许通过预读来收集我的对象？它适用于这种情况吗？我是否保证在 DB 命令出列并处理之前不会收集该对象？

以下是一些较低级别的详细信息：

```
Dictionary<Int64, WeakReference> mItems;
struct IOCommand
{
    public CommandDetails command;
    public object[] strongReferences;
}
Queue<IOCommand> mIOQueue;
void queueCommand(CommandDetails command, object relatedObject)
{...} 
```

您可以看到，在对命令进行排队时，我将相关对象作为强引用传递给队列，直到它被处理为止，但是由于未使用该对象，问题是它们是否可以被优化掉......

阿米特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:42:14.000

只要您的代码对对象有（非弱）引用，它就不会被收集。

因此，您应该是安全的，（未来）Db 命令将使用该引用这一事实确保它仍然存在。

只要确保在这种情况下不依赖弱引用，强引用应该有适当的生命周期。

* * *

> 但由于没有使用该对象，问题是它们可以被优化掉......

不，只要命令存储在队列中，存储它们的方式将确保它们存在，当然只要队列是可访问的。

但请注意，如果它们真的不被使用，它甚至应该无关紧要......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:43:05.800

GC 不应该删除任何引用它的东西。WeakReference 是您特别选择让它收集您引用的内容的例外情况。如果 DB Command 引用了要删除的对象，那就没问题了。

# android - 访问 ListView 的项目值时出现 NullPointerException

> ID：10471819
> 
> 赞同：0
> 
> 时间：2012-05-06T15:39:01.753
> 
> 标签：android, android-listview

监听代码：

```
 lvSearch.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> adapter, View view, int position,
                long id) {
            LinearLayout ll = (LinearLayout) adapter.getChildAt(position);
            TextView tx = (TextView) ll.getChildAt(0);
            TextView tx1 = (TextView) ll.getChildAt(1);
            Log.i("abcValues", tx.getText().toString()); 
```

我有一段`NullPointerException`时间访问 a 的项目值`ListView`。它适用于启动项目值，但不适用于滚动后出现的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:05:23.677

`getChildAt`返回可见行，当您滚动`LisView`并单击行时，您将为`getChildAt`无效位置调用该方法（该方法可以使用的最大数量`getChildAt`是可见行数 - 1）。如果您想要单击行的布局中的父级，只需`arg1`在代码中使用第二个参数：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
      LinearLayout ll = (LinearLayout) arg1;
      TextView tx = (TextView) ll.getChildAt(0);
      TextView tx1 = (TextView) ll.getChildAt(1);
      Log.i("abcValues", tx.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:14:24.520

我不认为你可以那样做。尝试从传入的视图中备份：

```
 LinearLayout row = (LinearLayout) arg1.getParent(); 
  TextView tx = (TextView) row.findViewById(R.id.tx_id_here);
  TextView tx1 = (TextView) row.findViewById(R.id.tx1_id_here); 
```

# perl - 想要使用需要多个 perl 脚本

> ID：10471823
> 
> 赞同：-1
> 
> 时间：2012-05-06T15:39:13.813
> 
> 标签：perl

是否可以对多个脚本使用 require？

例如

主文件

```
require "test1.pl"
require "test2.pl"

abc();
cde(); 
```

测试1.pl

```
sub abc {
  print "I AM IN TEST1\n";
}
1; 
```

测试2.pl

```
sub cde {
   print "I AM IN TEST2\n";
}
1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:46:14.050

是的。

注意：确保两者都在退出`test1.pl`时`test2.pl`返回 true，否则脚本将失败。您还需要在脚本的每一`require`行末尾添加一个分号。`Main.pl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:46:52.777

对的，这是可能的。您可以根据需要使用任意数量`require`的 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:48:41.100

> “是否可以对多个脚本使用 require ？”

是的。确保要求的脚本最后有这个：

```
1; 
```

或者你可能会得到一个*没有返回真值的*错误。

有关更多信息，请参阅有关模块/包的文档：

[http://perldoc.perl.org/perlmod.html](http://perldoc.perl.org/perlmod.html)

# java - IntelliJ：在maven项目的另一个模块中设置断点

> ID：10471831
> 
> 赞同：1
> 
> 时间：2012-05-06T15:40:35.303
> 
> 标签：java, maven

我有一个关于如何在 IntelliJ 中调试具有多个模块的 maven 项目的问题。

我有一个项目，其中包含两个模块：客户端和共享。

“共享”只是一个罐子，“客户端”依赖于“共享”。客户端有一个单元测试，它在内部将调用“共享”模块中定义的类。

但是，如果我在“共享”模块中设置断点，IntelliJ 将不会在该断点处停止并简单地忽略它。

我的问题是如何在这种情况下进行调试？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:28:54.250

您是否在调试模式下运行单元测试？或者您是否执行了执行单元测试的 Maven 构建？如果是，您应该尝试将surefire插件配置为等到您附加调试器来调试您的测试。

有关详细信息，请参阅[http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html 。](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html)

# c++ - 如何在linux中运行ps调试多线程程序？

> ID：10471841
> 
> 赞同：1
> 
> 时间：2012-05-06T15:42:29.257
> 
> 标签：c++, linux, debugging, shell, pthreads

我有这个代码：

```
#include <iostream>
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>

using namespace std;

void* printHello (void* threadId){

    cout << "in print Hello"<< (long) threadId << endl;
    pthread_exit(NULL);
}

#define num 1000000

int main () {

    pthread_t threads [num];
    int rc;
    long t;

    for (t=0 ; t<num; ++t){

        cout <<"in main" << "thread Id = " << t << endl;
        rc = pthread_create(&threads[t] , NULL , printHello , (void*)t);
        if (rc) {
            cout << "ERROR"<< "rc= "<< rc << endl;
            exit(-1);
        }

    }

    pthread_exit(NULL);
} 
```

如何从 shell`ps -Lf, ps -T, ps -Lm`同时运行到上面的代码？我的意思是如何在 shell 命令提示符下运行两者？使用另一个选项卡似乎无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T04:30:30.147

要严格回答您的问题，一种方法是在同一窗口的不同终端中使用**[tmux 。](http://tmux.sourceforge.net/)**尽可能多地打开，准备好命令，设置 tmux 以在 tmux 提示符下使用*:setw synchronize-* panes 复制输入，然后按回车键同时运行所有命令。这是它的样子： [![tmux powah！](../Images/ee37697bf602170fda9614125a5da422.png)](https://i.stack.imgur.com/lYJZT.jpg)

# javascript - Javascript 原型问题

> ID：10471847
> 
> 赞同：2
> 
> 时间：2012-05-06T15:43:17.897
> 
> 标签：javascript, inheritance, prototype

我的情况是我正在使用 Box2DWeb 开发 Canvas 游戏，所以我有一个名为*Sprite*的类，它可以将图像绘制到 Canvas，我现在想创建一个*PhysicsSprite类，该类从**Sprite*继承方法和属性。

我的*雪碧*类（Sprite.js）：

```
Sprite = function (position, dimension, image) {

  this.Position = position;
  this.Dimension = dimension;
  if (image)
    this.Image = image;
  ...

  this.Draw = function (g) {
    ...
  }
  ...
}; 
```

我在*PhysicsSprite* (PhysicsSprite.js) 中设置原型，如下所示：

```
PhysicsSprite = function(position, dimension, world) {

    this.prototype = new Sprite(position, dimension, undefined);
    //alert(this.prototype.Position.X)

    var body = CreateBody();
    this.GetBody = function () { return body; }

    this.Draw = function (g) {
        ...  
    }

    function CreateBody () {
          ...
    }
}; 
```

注意**alert(this.prototype.Position.X)**，它确实提醒我位置，但是如果我将代码更改为**this.Position.X**，我会收到错误，同样，如果我有一个*PhysicsSprite*实例，我必须明确调用原型。

这让我认为我没有设置对象的原型，只是创建了一个名为 的属性`prototype`，并将其设置为一个新的*Sprite*。

如果有人可以帮助我，并解释我做错了什么，那将不胜感激。我有阅读障碍，所以我总是拼错变量，这令人沮丧，所以这是我寻找的第一件事，但对我来说一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:59:23.413

> 这让我认为我没有设置对象的原型，只是创建了一个名为原型的属性，并将其设置为一个新的 Sprite。

这是正确的。此外，您根本没有使用函数的原型，因为您将每个函数直接分配给实例 ( `this.Draw = function() ...`) 而不是原型。

* * *

在 JavaScript 中，您有一些称为*构造函数*的东西。使用运算符调用的每个函数`new`都是构造函数。

当以这种方式调用函数时（`new SomeFunc()`），将创建一个新对象（让我们称其为*实例*），该对象继承自所引用的对象，`SomeFunc.prototype`并且该实例可通过该函数在该函数中使用`this`。

现在，继承基本上归结为拥有一个原型（`SomeFunc.prototype`），它不是（几乎）空对象（默认），而是从另一个函数的原型继承。

**例子：**

```
function A(name) {
    // `this` refers to a new instance
    // lets set some properties:
    this.name = name;
}

// all "class" methods should be assigned to the prototype
A.prototype.getName = function() {
    return this.name;
};

// lets create a child "class"
function B(name, place) {
    // we have to call the parents constructor with the current instance
    // and the arguments we want to pass on.
    // this is like `super(name)` in Java or `A.__init__(self, name)` in Python 
    // (or `super(B, self).__init__(name)` in Python)
    A.call(this, name);
    this.place = place;
}

// here we connect A's prototype with B's prototype in a way that they
// stay independent 
inherits(B, A);

// B's "class" methods
B.prototype.getPlace = function() {
    return this.place;
};

// now we can do
var b = new B('SomeName', 'SomePlace');
alert(b.getName());
alert(b.getPlace()); 
```

这就是它的`inherits`样子（这个实现由 Google Closure 库使用）：

```
function inherits(Child, Parent) {
    var Tmp = function() {};
    Tmp.prototype = Parent.prototype;
    Child.prototype = new Tmp();
    Child.prototype.constructor = Child;
} 
```

您会看到，它`Child.prototype`指的是`Tmp`. 但`Tmp`的原型与 的原型相同`Parent`。这意味着，返回的实例`new Tmp()`继承自`Parent`的原型，并且由于该实例是 的原型`Child`，所有的实例也`Child`将继承自`Parent.prototype`。

使用 ECMAScript 5，这可以简化为

```
Child.prototype = Object.create(Parent.prototype);
Child.prototype.constructor = Child; 
```

但它本质上是一样的。它创建一个继承自 的新对象`Parent.prototype`。

* * *

**进一步阅读：**

*   [JS：关于继承的困惑](https://stackoverflow.com/questions/7944880/js-confusion-about-inheritance)
*   [MDN - 继承和原型链](https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_constructor_prototype)
*   [MDN - 重访继承](https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_Revisited)
*   [MDN -`new`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)
*   [MDN -`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)
*   [MDN -`.call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:47:01.897

改变

```
this.prototype = new Sprite(position, dimension, undefined); 
```

到

```
Sprite.apply(this, position, dimension, undefined); 
```

您是对的，在更改之前，您将一个对象实例分配给“原型”属性。

原型是构造函数的属性，而不是对象实例 - 即您可以通过 访问原型`PhysicsSprite.prototype`，但不能通过`this.prototype`or `x.prototype`(where `x = new PhysicsSprite()`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:50:07.903

JavaScript 是一种与 Java 截然不同的鸟，尽管它们经常被误认为是彼此，因为它们都共享 { 和 }。:D

一个典型的 JavaScript 类：

```
function Sprite(a,b) {
    // These are per instance
    this.a = a;
    this.b = b;
}
Sprite.prototype = {
    // These are per class, all instances share them
    Draw: function (g) {
        // ...
    }
}; 
```

...而且 JavaScript 中的继承非常奇怪。

# css - css、z-index、溢出、Facebook xfbml 和 Safari

> ID：10471848
> 
> 赞同：1
> 
> 时间：2012-05-06T15:43:34.697
> 
> 标签：css, facebook, safari, overflow, z-index

我正在尝试让 Facebook“喜欢”按钮 xfbml 对话覆盖`<div>`网站中的 a，但无论我对 z-index 和溢出做什么：可见，对话都不会`<div>`在 Safari 5 和边缘被隐藏。

这是一个小提琴：http: [//jsfiddle.net/Bs4aJ/](http://jsfiddle.net/Bs4aJ/)

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T01:34:19.250

`overflow:hidden`正在`#main`剪辑它。您可以使用“clearfix”技巧而不是使用`overflow:hidden`来`#main`包装其浮动子项：

```
#main:after {
  content: ".";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
  zoom: 1;
} 
```

# deployment - 为什么 UAC 对话框需要很长时间才能显示？

> ID：10471853
> 
> 赞同：10
> 
> 时间：2012-05-06T15:44:43.090
> 
> 标签：deployment, wix, windows-installer, installation, wix3.5

我正在使用 WIX 工具包开发 Windows 安装程序，并且在安装过程中弹出 UAC 对话框需要永远（15-45 秒）。有什么办法可以加快速度吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:28:30.713

感谢 joegrage 为我指明了正确的方向。诀窍似乎是`MSIFASTINSTALL`财产。

该`MSIFASTINSTALL`属性可用于减少安装大型 Windows Installer 程序包所需的时间。该属性可以在命令行或属性表中设置，以配置用户或开发人员确定对安装不是必需的操作。

MSIFASTINSTALL 属性的值可以是以下值的组合。

```
价值 意义
----- --------------------------------------------- --------------
0 默认值
1 没有为此安装保存系统还原点。
2 仅执行文件成本核算并跳过检查其他成本。
4 减少进度消息的频率。

```

在 WIX 中，您可以使用这些值的组合，如下所示：

```
<Property Id="MSIFASTINSTALL" Value="3" /> 
```

可以在[此](http://community.saasgrid.com/developers/b/team/archive/2011/02/17/wix-managed-custom-actions-openfiledialog-example.aspx)博客文章中找到有关此属性的更详细的文章。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T01:44:30.247

每次使用 Windows Installer 安装软件时，都会在进行实际安装之前创建一个还原点。参考：http: [//msdn.microsoft.com/en-us/library/aa372060.aspx](http://msdn.microsoft.com/en-us/library/aa372060.aspx)

您可以在注册表中将其关闭：http: [//msdn.microsoft.com/en-us/library/aa369758.aspx](http://msdn.microsoft.com/en-us/library/aa369758.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T06:31:54.343

发生这种情况是因为 Windows 正在检查包是否具有数字签名。

不幸的是，数字签名验证算法不是很好。此外，其性能取决于封装尺寸。所以更大的包裹会有更长的延迟。

为避免延迟，您可以在 MSI 中添加一个简单的 EXE 引导程序。其目的是通过[应用程序清单](http://msdn.microsoft.com/en-us/library/bb756929.aspx)请求提升并在其旁边启动 MSI。如果您没有在其中包含您的 MSI，则引导程序将具有较小的尺寸。所以数字签名检查会非常快。

# c# - 无法从 ASP.NET MVC 应用程序实例化 COM 对象

> ID：10471856
> 
> 赞同：1
> 
> 时间：2012-05-06T15:45:16.563
> 
> 标签：c#, asp.net-mvc-3, com

正如标题所说，我想从这样的 ASP.NET MVC 应用程序中实例化一个 COM 对象：

```
dynamic obj = Activator.CreateInstance(Type.GetTypeFromProgID(progID)); 
```

但它会引发以下 ComException：

> 由于以下错误，检索具有 CLSID {16542E4F-4594-4B97-922D-BE9C478F93BB} 的组件的 COM 类工厂失败：来自 HRESULT 的 800aea5f 异常：0x800AEA5F。

相同的代码适用于具有以下构建配置的 Winforms 应用程序：`Platform: x86`和`Platform target: x86`.

我为 mvc 应用程序和我使用 COM 对象的程序集设置了与 Winforms 应用程序相同的构建配置。

我正在使用启用 32 位应用程序 True 的 Windows 7、IIS 7.5、ASP.NET v4.0 应用程序池，并且该网站在具有管理员权限的用户下运行。

你有什么建议可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:31:58.687

@david.s 我不知道如何添加屏幕截图作为评论，所以我将其设置为答案。由于您已经设置了所有 32 位内容并且无法调用 DLL，因此可能是权限问题。

调用 dcomcnfg.exe 并检查设置（对不起，只有德国服务器，但应该可以）： ![在此处输入图像描述](../Images/94761b9c49f6dd3108947fd1f6135ba2.png)

设置更改后，您必须重置 IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:18:47.237

将应用程序池的默认用户设置为具有管理员权限的用户

# hibernate - Hibernate JPA EntityManager 创建额外的 log4j appender？

> ID：10471858
> 
> 赞同：2
> 
> 时间：2012-05-06T15:45:24.033
> 
> 标签：hibernate, logging, log4j, entitymanager

我编写了一个简单的控制台应用程序，它使用 JPA 连接到 MySQL 数据库。数据的实际读/写工作正常，但日志记录似乎搞砸了。我创建的每个 EntityManager 实例似乎都将自己的 log4j appender 添加到控制台。因此，由于我的应用程序中有三个 EntityManager 实例，因此除了我想要的“真实”控制台输出行之外，我的控制台输出中还有三个额外的行。这是一个例子。第一行来自我的“真实”附加程序，其他三个似乎来自 EntityManager 的附加程序：

```
08:31:58,970 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:169 - geoEntityDao.getByCompositeKey took 81 milliseconds 
0 [main] DEBUG foobar  - geoEntityDao.getByCompositeKey took 81 milliseconds 
0 [main] DEBUG foobar  - geoEntityDao.getByCompositeKey took 81 milliseconds 
0 [main] DEBUG foobar  - geoEntityDao.getByCompositeKey took 81 milliseconds 
```

这是我的 log4j 配置：

```
log4j.rootCategory=WARN, mylog

log4j.appender.mylog=org.apache.log4j.ConsoleAppender
log4j.appender.mylog.layout=org.apache.log4j.PatternLayout
log4j.appender.mylog.layout.ConversionPattern=%d{ABSOLUTE} %C %5p %t %c{2}:%L - %m%n

log4j.category.foobar=DEBUG 
```

我希望能够关闭此行为并获得我想要的控制台行。我似乎无法“破解代码”如何做到这一点 - 任何帮助将不胜感激......

附加信息：这里似乎发生了两件事。第一个是 log4j appender additivity 设置，默认为 true。重新阅读稀疏的 log4j 文档（http://logging.apache.org/log4j/1.2/manual.html）我遇到了这个：

> 给定记录器的每个启用的记录请求都将转发到该记录器中的所有附加程序以及层次结构中更高的附加程序。

没有提到的是，无论层次结构中较高的记录器的设置如何，它显然都会这样做。

这意味着，或者在我的情况下似乎意味着，尽管我的根记录器设置为 WARN，但 Hibernate 类附加到它的附加程序仍然被 DEBUG 级消息使用。这与我所期望的相反。我不确定这是否代表 Hibernate 4.0.1 JPA 实现中的错误，或者只是缺少 log4j 的文档，或者 log4j 和 slf4j（由 Hibernate 使用）之间的故障。

发生的第二件事是，每次创建 EntityManager 对象时，似乎都会向 log4j 日志树添加一个附加程序，因此如果您有多个 EntityManager，您会收到多条日志消息。我很确定这是 Hibernate 日志记录中的一个错误。

仍在寻找这种“可加性”如何在 log4j 实践中工作的解释或示例 - 它似乎与我对有限文档的期望相反。也就是说，appender 似乎被向下传递到日志树而不是日志事件被向上传递。

这是我到目前为止的（修改后的）log4j 属性文件，它似乎正在工作：

```
log4j.rootCategory=WARN, mylog

# logger "root" logs at WARN level to appender "mylog"
log4j.appender.mylog=org.apache.log4j.ConsoleAppender
log4j.appender.mylog.layout=org.apache.log4j.PatternLayout

# Logger "foobar" logs at DEBUG level to appender "bootylog"
log4j.category.foobar=DEBUG, bootylog

log4j.appender.bootylog=org.apache.log4j.ConsoleAppender
log4j.appender.bootylog.layout=org.apache.log4j.PatternLayout
log4j.appender.bootylog.layout.ConversionPattern=%d{ABSOLUTE} %C %5p %t %c{2}:%L - %m%n

# additivity is off
log4j.additivity.foobar=false
log4j.additivity.org.hibernate=false 
```

这给了我以下输出，这正是我想要的：

```
11:15:43,622 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:152 - geoDataItemDao.create took 5 milliseconds 
11:15:43,624 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:166 - geoEntityDao.getByCompositeKey took 2 milliseconds 
11:15:43,626 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:159 - dataEntityDao.getDataEntityByFieldCode took 1 milliseconds 
```

最后，我强烈建议任何对 log4j 有问题的人在运行他们的应用程序时打开这个命令行选项：

```
-Dlog4j.debug 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:49:53.250

正如[在其他地方回答](https://stackoverflow.com/a/311445/239168)的那样，尝试在您的 log4j 属性中更改休眠的日志记录级别

例如

```
log4j.logger.org.hibernate=info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:16:29.537

看来这里发生了两件事。第一个是 log4j appender additivity 设置，默认为 true。重新阅读稀疏的 log4j 文档（http://logging.apache.org/log4j/1.2/manual.html）我遇到了这个：

> 给定记录器的每个启用的记录请求都将转发到该记录器中的所有附加程序以及层次结构中更高的附加程序。

没有提到的是，无论层次结构中较高的记录器的设置如何，它显然都会这样做。

这意味着，或者在我的情况下似乎意味着，尽管我的根记录器设置为 WARN，但 Hibernate 类附加到它的附加程序仍然被 DEBUG 级消息使用。这与我所期望的相反。我不确定这是否代表 Hibernate 4.0.1 JPA 实现中的错误，或者只是缺少 log4j 的文档，或者 log4j 和 slf4j（由 Hibernate 使用）之间的故障。

发生的第二件事是，每次创建 EntityManager 对象时，似乎都会向 log4j 日志树添加一个附加程序，因此如果您有多个 EntityManager，您会收到多条日志消息。我很确定这是 Hibernate 日志记录中的一个错误。

仍在寻找这种“可加性”如何在 log4j 实践中工作的解释或示例 - 它似乎与我对有限文档的期望相反。也就是说，appender 似乎被向下传递到日志树而不是日志事件被向上传递。

这是我到目前为止的（修改后的）log4j 属性文件，它似乎正在工作：

```
log4j.rootCategory=WARN, mylog

# logger "root" logs at WARN level to appender "mylog"
log4j.appender.mylog=org.apache.log4j.ConsoleAppender
log4j.appender.mylog.layout=org.apache.log4j.PatternLayout

# Logger "foobar" logs at DEBUG level to appender "bootylog"
log4j.category.foobar=DEBUG, bootylog

log4j.appender.bootylog=org.apache.log4j.ConsoleAppender
log4j.appender.bootylog.layout=org.apache.log4j.PatternLayout
log4j.appender.bootylog.layout.ConversionPattern=%d{ABSOLUTE} %C %5p %t %c{2}:%L - %m%n

# additivity is off
log4j.additivity.foobar=false
log4j.additivity.org.hibernate=false 
```

这给了我以下输出，这正是我想要的：

```
11:15:43,622 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:152 - geoDataItemDao.create took 5 milliseconds 
11:15:43,624 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:166 - geoEntityDao.getByCompositeKey took 2 milliseconds 
11:15:43,626 com.electricgearbox.app.ProcessDataItemApp DEBUG main foobar:159 - dataEntityDao.getDataEntityByFieldCode took 1 milliseconds 
```

最后，我强烈建议任何对 log4j 有问题的人在运行他们的应用程序时打开这个命令行选项：

```
-Dlog4j.debug 
```

# javascript - HTML5 File API 简单检查文件是否存在

> ID：10471866
> 
> 赞同：6
> 
> 时间：2012-05-06T15:46:13.823
> 
> 标签：javascript, html, fileapi

我有一个临时文件 API 存储 (HTML5)，但我无法检查文件是否存在。有没有简单的检查方法？我是否必须实际尝试阅读文件才能找到答案？

周围的搜索没有给我带来任何具体的结果

同步检查会很好，这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T15:56:26.353

您必须阅读该文件。以下示例基于[HTML5Rocks 中的此演示](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-file-readingbyname)（它会捕获所有错误，您可能希望过滤[不同的错误类型](http://www.w3.org/TR/file-system-api/#errors-and-exceptions)）：

```
 var errorHandler = function() {
        // File is not readable or does not exist!
    };
    fs.root.getFile('log.txt', {}, function(fileEntry) {
        fileEntry.file(function(file) {
            var reader = new FileReader();
            reader.onloadend = function() {
                // The file exists and is readable
            };
            reader.readAsText(file);
        }, errorHandler);
    }, errorHandler); 
```

由于其阻塞性质，同步方法仅适用于 Web Workers。错误处理[略有不同](http://www.html5rocks.com/en/tutorials/file/filesystem-sync/#toc-errors)。

# ios - 除了 Couchbase 之外，iOS 是否有任何稳定的 nosql 数据库？

> ID：10471867
> 
> 赞同：11
> 
> 时间：2012-05-06T15:46:42.927
> 
> 标签：ios, iphone, nosql, couchdb, couchbase

除了 Couchbase 之外，iOS 是否有任何稳定的 nosql 数据库？Couchbase 现在是一个测试版，我不想在有很多用户的应用程序上使用它。（虽然我非常喜欢 Couchbase）

有什么建议么？特别感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T00:06:58.450

有几个项目可以在移动设备上获得与 CouchDB 兼容的 API。

*   [TouchDB](https://github.com/couchbaselabs/TouchDB-iOS)，原生 iOS 构建
*   [PouchDB](https://github.com/daleharvey/pouchdb)，一个 HTML5 实现，用于 web 和 PhoneGap 应用程序

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T20:49:29.217

**编辑**（2016 年 4 月）：

*   **[Realm.io](https://realm.io/)**是当今的发展方向。

* * *

另请查看已移植（包装）到 iOS 的键/值数据库：

*   LevelDB（端口：[NULevelDB](https://github.com/nulayer/NULevelDB)）：由 Google 制造，它似乎是目前最快的之一。
*   TokyoCabinet（端口：[TSDocDB](https://github.com/isaact/TSDocDB)）：非常快，但似乎有点过时，官方页面指出有一个更快的新版本（称为KyotoCabinet），但是没有端口（据我所知） . 并且，被许可为 LGPL（它似乎与 AppStore 不完全兼容）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-13T14:28:47.427

我也在寻找适用于 iOS 的 NoSQL 并找到 NanoStore

[https://github.com/tciuro/NanoStore](https://github.com/tciuro/NanoStore)

尽管如果您有时间探索，使用自定义函数正确学习 SQLite 将是一次很棒的体验。创建自己的 NoSQL 数据库非常容易。只有一个表用于存储字典/json 以及具有自定义功能的视图/索引的所有对象。

制定自己的解决方案并不是难事。艰苦的工作是将您的对象映射到数据库。这个任务会以最可怕的方式增加你的代码库的复杂性，你需要成为一个非常好的编码人员来避免这种情况。虽然如果你想变得非常好，也许你必须经历这样的经历。

最讨厌的问题之一也是对象之间的关系。解决这个问题是 CoreData 的主要目标，这就是为什么你会读到 CoreData 不是数据库的原因。

正确学习 SQLite，特别是在为它创建自定义插件的地方，可以打开许多大门。但是请注意，大多数开发人员根本不关心学习这些细节，并且会迷失在您的代码库中。

# c - C中指针和变量之间的区别？

> ID：10471872
> 
> 赞同：1
> 
> 时间：2012-05-06T15:47:31.850
> 
> 标签：c, pointers

```
#include <stdio.h>
int inc1(int x)  { return x++;    }
int inc2(int *x) { return (*x)++; }

int
main(void)
{
    int a;
    a = 3;
    printf("%d\n", inc1(a) + a);
    printf("%d\n", inc2(a) + a);
    return 0;
} 
```

我正在研究过去的一篇论文，其中一个问题是跟踪第 6 行和第 9 行之间对 a 所做的更改。我有点理解指针（引用内存位置），但如果有人可以告诉我所做的更改整个这段代码都很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:59:02.920

我将解释这个几乎相同的代码，它不包含您帖子中的错误：

```
#include <stdio.h>

int inc1(int x)  { return x++;    }
int inc2(int *x) { return (*x)++; }

int main(void) {
    int a;
    a = 3;
    printf("%d\n", inc1(a) + a);
    printf("%d\n", inc2(&a) + a);
    return 0;
} 
```

`a`初始化为 3，然后*将 a 的值*传递给`inc1()`，它返回它并使用**post-increment 加**1 。这意味着返回的实际值仍然是 3。

接下来，*将 a 的地址*传递给`inc2()`。这意味着 x 中的值发生的事情发生在 a 上。同样，使用了后增量，所以`inc2()`返回的是 3，但在调用之后`a`是 4。

**但是，编译器可以自由地在序列点**之间以任何顺序评估表达式，例如`a`or 。这意味着右边的可能是 3 或 4 （取决于是在 之前还是之后评估，因此程序可能输出**6 7**或**6 6**。`inc2(&a)`**`a``inc2(&a) + a``a``int2(&a)`**

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:51:56.007

调用 inc1() 的行将打印 '6' (3+3) [前 3 个来自 inc1()，由于后增量运算符，不返回增量值]。此外，由于 inc1() 是按值调用的，因此“a”的值在函数外部不受影响。

现在，如果论文中调用**inc2()**的语句如下：

```
printf("%d\n", inc2(a) + a); 
```

然后您的代码将编译（希望您将内存位置存储在“a”中）但取决于其中的值（如果“a = 3”）在运行时您将得到分段错误，因为您试图取消引用程序不应访问的内存位置 3。

或者，如果语句如下：

```
printf("%d\n", inc2(&a) + a); 
```

然后 inc2() 将通过指针（地址）增加 'a' 的值，但仍将返回 'a' (3) 的旧值，因为它使用了后递增运算符，但无论如何它都会增加 'a' 和任何后续访问to 'a' 将获得新值。下一个“a”将具有值“4”，因为评估是从左到右进行的，因此它将打印 7 (3+4)。

我希望它能阐明 C 中指针和变量之间的区别。******

# php - 如何用新数据重新加载php文件中的某个部分？

> ID：10471876
> 
> 赞同：1
> 
> 时间：2012-05-06T15:48:14.587
> 
> 标签：php, mysql

我有一个 php 文件，它从 MySql 数据库中检索数据并显示它。但是数据库没有更多的数据说100。但是在我的php文件中，我计划一次显示6个，只需使用

```
LIMIT start_value, 6. 
```

然后在底部我有一个包含以下代码的平底锅

```
<a href="index.html?start_value=start_value+6">1</a>
<a href="index.html?start_value=start_value+12">2</a>
<a href="index.html?start_value=start_value+18">3</a>
<a href="index.html?start_value=start_value+24">4</a>
<a href="index.html?start_value=start_value+30">5</a>
<a href="index.html?start_value=start_value+36">6</a> 
```

所以现在的问题是，如果有人点击整个 index.html 上方的链接，将会重新加载，这会很烦人。有什么方法可以通过单击任何链接后重新加载该特定 DIV 来显示数据库中的新数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:54:35.257

你有两个选择：

1.  [Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)，它允许您使用 JavaScript 从服务器检索数据，然后您可以使用它来操作 DOM。Ajax 的基础是`XMLHttpRequest`对象，它允许您在 JavaScript 中完全在后台检索数据。请注意，Ajax 受[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)的限制，但对于您所描述的，这很好——您将从同源加载数据。

2.  框架（例如`iframe`元素），您可以通过设置它们的 src 属性来加载内容。

在这两者中，Ajax 更加灵活。

参考资料/延伸阅读：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/#auto-toc-6)
*   [XMLHttpRequest 对象](http://www.w3.org/TR/XMLHttpRequest/)

* * *

**旁注**：虽然显然您可以`XMLHttpRequest`直接使用 DOM 方法，但请注意存在跨浏览器的差异（和彻底的错误），可以通过[jQuery](http://jquery.com/)、[Prototype](http://prototypejs.org/)、[YUI](http://developer.yahoo.com/yui/)、[Closure](https://developers.google.com/closure/library/)或[任何一个好的库为您平滑其他几个](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)。它们还提供了许多有用的实用程序功能，使您可以专注于您要解决的实际问题，而不是管道的细节。

例如，下面是使用 jQuery 向服务器发送 Ajax 请求并使用服务器发回的 HTML 片段更新页面上的元素的方式：

```
$("#target").load("get_the_data.php", {article: x}); 
```

这就是说：从 get_the_data.php 请求一个 HTML 片段，将带有 x 变量值的参数文章发送给它，并将该 HTML 片段放入具有 HTML id“目标”的元素中。如果您不使用库，那将是一个很好的 10 行代码。现在，这不是很多，但是一遍又一遍地重复（并且在这个过程中处理一个 IE 错误，围绕通过它们的 id 查找元素），你会看到它是如何加起来的。

我确实建议您阅读上面的参考资料，这样您就知道图书馆是如何做他们正在做的事情的（这不是魔术），但是没有理由不利用人们所做的辛勤工作来简化这些工作。

* * *

如果您有一个服务于 myaction 的页面，例如 index.html?start_value=start_value+6，您可以这样做：

```
setInterval(myaction, 20000); //every 20 seconds

function myaction() {
  $("#quoteContainer").load("index.html?start_value=start_value+6");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T15:57:52.853

> 有什么方法可以通过单击任何链接后重新加载该特定 DIV 来显示数据库中的新数据？

就在这里。您需要使用[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)对象和[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)。一言以蔽之：[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)

最好的方法是使用像[jQuery](http://www.jquery.com)或[Prototipe](http://www.prototypejs.org/)这样的框架。

[在这里](https://stackoverflow.com/questions/2595005/automatic-reload-of-div-container)你可以找到一个例子。在该示例中，您应该将“latest_scores.html”页面替换为另一个页面“latest_scores.php”。php 脚本将创建可以放置在您的 div 中的刷新内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T15:54:30.283

您应该查看[jQuery javascript 库](http://jquery.com/)，它允许您使用 ajax 轻松加载内容，因为 ajax 是您正在寻找的！PHP 是一种服务器端语言，它在服务器上运行并且不是动态的，您正在寻找在客户端运行的东西，那就是 Javascript。

# iphone - 将 cvMat 对象存储在数组中 - OpenCV - iPhone

> ID：10471878
> 
> 赞同：6
> 
> 时间：2012-05-06T15:48:23.160
> 
> 标签：iphone, c++, objective-c, opencv

我正在开发一个 OpenCV 应用程序，我在其中创建了许多 cvMat 对象，如下所示：

```
UIImage *testImage = [UIImage imageNamed:@"Image.jpg"];
cv::Mat tempMat = [testImage CVMat];
cv::cvtColor(tempMat, grayImg, cv::COLOR_RGB2GRAY); 
```

然后我想要做的是将结果（这里称为 grayImg）存储在 NSMutableArray 中。

谁能建议我如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:02:07.600

无论你需要在 NSArray 中存储什么对象，你都可以像下面这样：

```
cv::Mat tempMat = [testImage CVMat];
cv::Mat *pointer = (cv::Mat *)tempMat;
id object = [NSValue valueWithPointer:pointer];
NSArray *array = [[NSArray alloc] initWithObjects: object, nil]; 
```

# .net - .Net 替换 VBScript (interop.msscriptcontrol.dll) DLL

> ID：10471880
> 
> 赞同：3
> 
> 时间：2012-05-06T15:48:40.923
> 
> 标签：.net, dll, com, vbscript, replace

我们正在使用 interop.msscriptcontrol.dll 来执行简单的 VBScript 变量代码（“Today - 1”之类的东西）。我们的应用程序是除此之外的非 COM 组件。我们已经搜索了 VBScript 的 .Net 替代品，但一直找不到。

.Net 有 VBScripting 替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:10:19.000

在下面的示例中，我将让 WebBrowser 控件评估 VBScript 表达式“Now - 1”并将结果嵌入到 WebBrowser 的 document.title 中，以便我可以在 C# 中获取它：

```
WebBrowser wb = new WebBrowser();
wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(
    (object _sender, WebBrowserDocumentCompletedEventArgs _e) =>
    {
        MessageBox.Show(wb.Document.Title);
    }
);
wb.DocumentText = @"
<HTML>
<HEAD>
<TITLE>Hello</TITLE>
<SCRIPT language=""VBScript"">
document.title = Now - 1
</SCRIPT>
</HEAD>
<BODY/>
</HTML>"; 
```

显然，这种方法存在以下问题：

*   结果作为字符串处理
*   结果需要异步处理
*   糟糕的代码注入会导致无效的结果
*   它可能表现不佳，并可能导致您的应用程序出现瓶颈

我的直觉是这种方法可能比您当前使用的方法更糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T20:59:37.503

我最终使用免费的 Codefluent 运行时引擎来替换 msscriptcontrol.dll：

[http://www.softfluent.com/products/codefluent-runtime-client](http://www.softfluent.com/products/codefluent-runtime-client)

# java - 你能让一个图像按钮像android中的位图一样移动吗

> ID：10471881
> 
> 赞同：0
> 
> 时间：2012-05-06T15:48:45.203
> 
> 标签：java, android, graphics

对于代码，我有一个小 android 家伙走过屏幕，但是这是使用位图我怎么能改变它所以它是一个图像按钮，所以我可以点击他并让它做一些事情他是我使用的代码位图移动。

```
canvas.drawBitmap(AndroidDude, AndroidDudeChangingX, (canvas.getHeight()/2 - (AndroidDude.getHeight()/2)), null);
            if (AndroidDudeChangingX < canvas.getWidth() - 280)
            {
                AndroidDudeChangingX += 10;
            }
            else 
            {
                AndroidDudeChangingX = 0;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:55:52.610

你不需要一个图像按钮。只需获取您的位图在屏幕中所在的 Rect 并实现您的活动的 ontouch 事件。如果触摸事件发生在位图的 Rect 内，则应正确处理该事件。

# algorithm - 随机模式匹配

> ID：10471886
> 
> 赞同：-2
> 
> 时间：2012-05-06T15:49:06.843
> 
> 标签：algorithm, pattern-matching, fingerprinting

我的练习有问题。我希望你能帮助我。

我们想要检测长度为 m 的二进制模式 P 是否出现在长度为 n 的二进制文本 T 中，其中：m < n。

陈述一个在 O(n) 时间内运行的算法，我们假设对 O(log2 n) 位数的算术运算可以在恒定时间内执行。当 P 是 T 的子串时，算法应该以 1 的概率接受，否则以至少 1 - 1/n 的概率拒绝。

我们得到了一个提示，我们应该使用指纹识别。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:19:39.617

KMP 是一种确定性算法，可在线性时间内执行此操作。但我也想知道，如果这可以用概率算法来完成。

# jquery - 如何将存储的索引应用于另一个 div？

> ID：10471887
> 
> 赞同：0
> 
> 时间：2012-05-06T15:49:08.447
> 
> 标签：jquery

我在这里有以下问题：在我的 html 结构中，我得到了一些 div，它们最初是隐藏的。我想要做的是：点击段落标签存储它的索引并将相同的索引应用于隐藏的div（女巫也具有与“点击”p标签相同的索引）。
**例如：**当我单击 SHOW RED DIV 'paragraph' 时，显示隐藏的 div **（红色类的 div）**，其索引与单击的 p 标签相同。我的代码不起作用，因为它显示了所有隐藏的 div 并且因为我不知道如何应用存储的索引 :( 我希望有人可以帮助我...... THX ！

这是[小提琴](http://jsfiddle.net/DJ5Gs/)

这是我到目前为止得到的：

```
<html>
<head>
<style type="text/css">
div{width:100px;height:100px;display:none;}
.red{background-color:red;}
.blue{background-color:blue;}
.green{background-color:green;}
</style>

<script type="text/javascript">
$(document).ready(function(){
   $("p").click(function(){
   var index=$(this).index(this);
   $('div').data('index',index).show('slow');
   });
});
</script>
</head>
<body>
<div class="red"></div>
<div class="blue"></div>
<div class="green"></div>
<span>
<p>SHOW RED DIV</p>
<p>SHOW BLUE DIV</p>
<p>SHOW GREEN DIV</p>
</span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T15:53:38.837

```
$(document).ready(function() {
    $("p").click(function() {
        var index = $(this).index();
        $('div').eq(index).show('slow');
    });
});​ 
```

[**现场演示**](http://jsfiddle.net/gdoron/YAeWg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:51:44.273

使用此代码：

```
$(document).ready(function() {
    $("p").click(function() {
        var index = $(this).index();
        $('div:eq(' + index + ')').show('slow');
    });
});​ 
```

**演示：http:** [//jsfiddle.net/Q96Uj/](http://jsfiddle.net/Q96Uj/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:52:48.660

```
$(document).ready(function(){
  $("p").click(function(){
     var index=$(this).index();
      $('div:eq('+ index +')').show('slow');
  });
}); 
```

检查**[演示](http://jsfiddle.net/DJ5Gs/2/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T15:54:04.073

哇，这里有些混乱。`index`是元素相对于其兄弟元素的索引。您尝试查找`data`的索引是您定义并附加到元素的任意索引，如下所示：

```
<div class="red" data-index="red"></div>
<p data-index="red">SHOW RED DIV</p> 
```

Vision 的答案提供了使用该函数访问元素的正确方法`index()`，但对于您的应用程序，听起来您可能更喜欢使用用户定义的索引。如果是这种情况，您的 javascript 将如下所示：

```
$(document).ready(function(){
  $("p").click(function(){
    var index=$(this).data('index');
    $('div[data-index=' + index + ']').show('slow');
  });
});​ 
```

# svg - 如何有效地将矩阵数据渲染为 SVG 中的热图？

> ID：10471893
> 
> 赞同：0
> 
> 时间：2012-05-06T15:50:07.350
> 
> 标签：svg, matrix, heatmap, tabular

我有一个数据矩阵（96cols x >5000rows），其中每个值都在-1和+1之间。我编写了一个脚本来生成 SVG 格式的热图，但是我的真实数据集的 SVG 文件大小变得很大。Inkscape 挣扎，渲染和屏幕更新非常缓慢。将其压缩为 svgz 也无济于事。

我采用了为每个值绘制一个矩形的方法，每个矩形有 5 个属性：x、y、宽度、高度和填充。可以想象，对于 96x5000 的值，有很多矩形。通过将每个属性转换为整数，我将文件大小从 ~34MB 减少到 ~29MB。我的另一个想法是删除填充属性并将其替换为 10-20 类中的一个，每个颜色组一个。不过，我还没有完成最后一点，因为我认为必须有更好的方法来做到这一点。

举个例子：-

```
 <rect fill="#000000" height="14" width="10" x="50" y="81" /> 
```

在 HTML 中，我会使用一个`<table>`,`<tr's>`和`<th's>`一个短类名或 id 引用颜色组。如果值为 0 或中间值，则不需要类名，并且`<th>`可以继承预设的中性色。

虽然使用 SVG，但显然没有正式的表格规范，那么我应该怎么做呢？我目前正在考虑以下选项：-

1.  [display 属性](http://www.w3.org/TR/SVG/painting.html#DisplayProperty)确实有一个（记录不充分的）inline-table 选项。显然，它可能是[“来自 CSS 的意外残余”](http://tech.groups.yahoo.com/group/svg-developers/message/42255)。我想这意味着`<g>`每一行都有一个 id 引用样式的`display:table-row-group`.
2.  如此处所建议的，使用嵌套的[元素](http://svg-whiz.com/svg/table.svg)作为`<text>`行。`<tspan>`
3.  使用用 ECMASCript 编写的[布局管理器。](http://www.svgopen.org/2005/papers/LayoutManagersForSVG/)

我还简要检查了 XSLT，它看起来很强大，但很复杂，而且似乎只能在 Web 浏览器中工作。理想情况下，我希望将所有内容保存在一个可以在矢量图形编辑器中保存、查看和编辑的文件中，但不确定 XSLT 是否允许这样做。

这样做最有效的方法是什么？文件大小并不像它呈现的速度那么重要。非常感谢任何帮助。

**更新：-**

*   2 不能作为文本和嵌套的 tspan 没有填充或背景颜色属性。该示例使用 rect 提供背景颜色，因为 text 和 tspan 不提供任何创建填充的方法。

我还想知道行长是否可能与缓慢的渲染有关。我正在使用 Python 的[(c)ElementTree 模块](http://docs.python.org/library/xml.etree.elementtree.html)来生成 SVG，默认情况下它写入所有 XML 时没有一个换行符。是否可以帮助解析器/渲染器将图像的每一行分隔成 XML 中的新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:11:16.490

我怀疑您最好为此使用画布。创建一个画布，然后在画布上绘制矩形。矩形将仅作为画布位图的一部分存在。

# java - 验证不适用于持久化

> ID：10471896
> 
> 赞同：4
> 
> 时间：2012-05-06T15:50:33.340
> 
> 标签：java, spring, jpa-2.0, bean-validation

我正在使用 Spring 3.1.0.RELEASE、JSF 2.x、JPA 2 和 Hibernate Provider 做一个 Web 应用程序。该应用程序在 Tomcat 6.X 上运行。

我在我的实体中使用 bean 验证。Hibernate Validator 是提供者，版本 4.2.0.Final。

```
@NotEmpty(message="{site.checklangs}")
    @OrderBy("position ASC")
    @OneToMany(mappedBy = "site", fetch = FetchType.EAGER, cascade= CascadeType.ALL, orphanRemoval=true)
    private List<SiteLanguage> langs; 
```

`@NotEmpty`工作为但`persist`不为`merge`

```
@Override
    @Transactional
    public Site updateSite(Site site) {
        return entityManager.merge(site);
    } 
```

当我的列表为空时，这不会引发任何异常。为什么 ？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:34:27.827

尝试调用`entityManager.flush();`之后`merge()`；

请参阅[验证在 EntityManager.merge() 上不起作用](https://stackoverflow.com/questions/4326030/validation-doesnt-work-on-entitymanager-merge)作为参考。

# python - Python - timeit 没有结果

> ID：10471897
> 
> 赞同：1
> 
> 时间：2012-05-06T15:50:43.450
> 
> 标签：python, timeit

我在 test.py 中编写了这个简单的代码（在 python 中）。我尝试运行 timeit 并且没有任何错误，但我没有得到有关运行时间的任何信息。你能帮助我吗 ？

```
import timeit

def functionsWhile():
    "Desc about function"
    lic = 0
    n = 30000
    while lic<= n:
            lic += 1
    #print "test"
    return lic

t = timeit.Timer("functionsWhile()", "from __main__ import functionsWhile")

try:
    t.repeat(3, 2)
except:
    t.print_exc() 
```

我期待一个结果，例如（示例）：

```
$>python test.py
[0.006793975830078125, 0.006793975830078125, 0.006793975830078125]
$> 
```

但我只有：

```
$>python test.py
$> 
```

我没有 timeit 的结果。我使用 python 2.7 和 linux。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T16:02:50.620

试试看`print`的结果`t.repeat`。

# android - 如何比较活动前后的电池电量？

> ID：10471903
> 
> 赞同：-1
> 
> 时间：2012-05-06T15:51:20.787
> 
> 标签：android, android-intent, power-management

你有链接/教程来比较活动/计算过程之前和之后的电池电量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:47:44.827

对于大多数设备，报告的电池更改粒度为容量的 1%。如果您的“活动/计算过程”消耗超过 1% 的电量，最好运行一段时间。

话虽如此，打电话`registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED))`。由于`ACTION_BATTERY_CHANGED`是粘性广播，因此`registerReceiver()`调用将返回最后一个广播`Intent`。然后，检索`BatteryManager.EXTRA_LEVEL`和`BatteryManager.EXTRA_SCALE`值以确定电池电量。请记住：

*   虽然`EXTRA_SCALE`经常是 100，但并不总是 100

*   虽然`EXTRA_LEVEL`经常以 1 为增量变化（例如，100、99、98），但它并不总是以 1 为增量变化

# php - 字符串比较不起作用

> ID：10471906
> 
> 赞同：-3
> 
> 时间：2012-05-06T15:52:17.790
> 
> 标签：php, comparison, string-comparison

当类别 ID 等于特定数字时，我正在尝试更改某些内容的输出。由于某种原因，这总是返回 false。我错过了什么？

```
<?php 
$ad_id = '#_CATEGORYID';
$id = 55;

if ($ad_id === $id ) {
    echo 'true';
} else {
    echo 'false';
}
?> 
```

**编辑** 抱歉应该澄清一下，#_CATEGORYID 是来自另一个返回整数的应用程序的简码。当`echo $ad_id`返回值为 55 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:55:39.390

在我看来，您可能需要在比较之前评估您的第三方标记。

```
<?php  
eval("\$ad_id = '#_CATEGORYID'"); 
$id = "55"; 

if ($ad_id === $id ) { 
    echo 'true'; 
} else { 
    echo 'false'; 
} 
?> 
```

# xml - Wix ICE 警告 - LGHT1076：ICE69？

> ID：10471914
> 
> 赞同：4
> 
> 时间：2012-05-06T15:53:37.813
> 
> 标签：xml, msbuild, wix

我有 2 个项目 Web 应用程序。当我使用 wix 和 MSBuild 准备第一个构建时

但是当我尝试为第二个文件执行此操作时，它不起作用....我意识到它包含相同的产品代码、升级代码和 GUID

> ：警告 LGHT1076：ICE69：组件参考不匹配。Regis 尝试表的条目“reg8A3751B50238EDF0FACAEE74FC89759B”属于组件“cmp1A9031335E9554FB2A145276832DF1F7”。但是，“值”列中的格式化字符串引用了属于组件“cmp6AF2A0A8BF3E14CDDC849A3253AAD235”的文件“filB6D67A5A6BD4F933D77F 1F20625E019D”。组件具有相同的功能。[C:\xx\x\x\

编辑：

谢谢，但我正在尝试删除以前收获的 Files ，有什么线索吗？

```
 <Exec
        Command='"$(WixPath)candle" -ext WixIIsExtension -ext WixUtilExtension -ext WiXNetFxExtension -dpublishDir=$(Publish) -dMyWebResourceDir=. @(WixCode, &apos; &apos;)'
        ContinueOnError="false"
        WorkingDirectory="." />

    <Exec
        Command='"$(WixPath)light" -ext WixUIExtension -ext WixIIsExtension -ext WixUtilExtension -ext WiXNetFxExtension -out $(MsiOut) @(WixObject, &apos; &apos;)'
        ContinueOnError="false"
        WorkingDirectory="." /> 
```

# php - 执行还是ajax？PHP后台脚本

> ID：10471915
> 
> 赞同：1
> 
> 时间：2012-05-06T15:53:38.007
> 
> 标签：php, ajax, exec, shell-exec

我有一个脚本，一旦用户登录到我的系统，我就需要运行它。

所以，他们登录，所有检查都完成了，我想在启动他们的会话并使用 header() 发送它们时触发一个后台脚本来处理一些其他的东西。

流程是：

用户登录

用户信息检查

使用变量加载后台脚本

开始会话，然后 header()

我正在努力：

```
 shell_exec("/usr/bin/php /pages/test/backg.php {$user} &"); 
```

但是它什么也没有发生（我正在通过在脚本开始时向我发送简单的电子邮件来测试结果，所以我知道它是否被解雇了）

有没有更好的方法来做到这一点，使用ajax？ajax 可以接受变量吗？它是如何完成的？它比这种方式更有效吗（我的意思是当这种方式有效时！）

# symfony - 带有大型 DataProvider 的 PHPUnit_Framework_TestCase 内存泄漏

> ID：10471919
> 
> 赞同：0
> 
> 时间：2012-05-06T15:53:46.037
> 
> 标签：symfony, phpunit, dataprovider

当我运行 PHPUnit 时，在我看来，当在单个测试类中运行许多测试时，它似乎存在内存泄漏。但我不知道这是一个错误还是预期的行为。

重现：

*   我用愚蠢的 assertTrue(true) 创建了一个简单的 testHello()。
*   我从 providerHello() 提供它。只需喂 3 个虚拟参数。
*   使用`$numberOfTests = 1;`，消耗的内存为 5.75MB。
    *   PHPUnit 输出 =`Time: 0 seconds, Memory: 5.75Mb`
*   有了`$numberOfTests = 10000;`，我不希望内存增长这么多，只是新数组的大小。但是使用的内存是99.75MB，我觉得太多了。
    *   PHPUnit 输出 =`Time: 4 seconds, Memory: 99.75Mb`
*   我在提供程序中添加了一个脏 echo()，只是为了知道数组使脚本消耗了多少内存。
    *   1 次测试：`Memory = 5294552`(5.2MB)
    *   10.000 次测试：`Memory = 15735352`(15.7MB)

问题：

*   为什么我会在路上丢失 84MB？（实际消耗了 99.75 - 阵列实际使用了 15.75）
*   它在每次迭代时分配内存是否正常，可能是它的内部 setUp()，但在内部 tearDown() 中没有释放相同的数量？
*   我做错什么了吗？

我的版本：

`phpunit --version`给`PHPUnit 3.6.10 by Sebastian Bergmann.`.

这是代码：

```
<?php
class DemoTest extends \PHPUnit_Framework_TestCase
{
    /** @dataProvider providerHello */
    public function testHello( $a, $b, $c )
    {
        $this->assertTrue( true );
    }

    public function providerHello()
    {
        $numberOfTests = 10000;

        $data = array();

        for( $i = 0; $i < $numberOfTests; $i++ )
        {
            $data[] = array( 1, 2, 3 );
        }

        echo( "Memory = " . memory_get_peak_usage() . PHP_EOL );

        return $data;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:41:21.783

您需要在 phpunit.xml 文件中将 backupGlobals 和 backupStaticAttributes 设置为 false。如果你不使用配置文件，你也可以在命令行上这样做。

```
 --no-globals-backup
 --static-backup 
```

# java - Java Regex 中的 index 和 offset 有不同的含义吗？

> ID：10471923
> 
> 赞同：1
> 
> 时间：2012-05-06T15:54:31.907
> 
> 标签：java, regex, api, matcher

我对`start()`and的定义中关于 Matcher 的 Java 文档有点困惑`end()`。

[`Matcher.start()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#start())

[`Matcher.end()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#end())

考虑以下代码：

```
public static void test()
{
    String candidate = "stackoverflow";
    Pattern p = Pattern.compile("s");
    Matcher m = p.matcher(candidate);

    m.find();
    int index = m.start();
    out.println("Index from Match\t"+index);

    int offset = m.end();
    out.println("Offset from match\t"+offset);
} 
```

以上将返回以下结果。

> 匹配 0 的索引
> 
> 与第 1 场比赛的偏移量

据我所知，每个 char 数组或字符串都将从索引 0 开始，并且在上面的表达式中是正确的。但是 Offset 也返回相同的字符 's' 但为什么它以 1 开头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:59:01.250

不，它不是以 1 开头 - 它以 0 开头。文档说明得很清楚：

> 返回匹配的最后一个字符**之后**的偏移量。

（强调我的。）

*基本上它是排他*形式的比赛结束，这在Java中很常见。这意味着您可以执行以下操作：

```
String text = candidate.substring(matcher.start(), matcher.end()); 
```

请注意，您的“索引”和“偏移量”实际上应该被视为“开始”和“结束”（因此是方法名称）。在这种情况下，术语“索引”和“偏移量”实际上是同义词；重要的一点是`start()`返回匹配*开始*的索引/偏移量，并`end()`返回匹配*结束*后的索引/偏移量。

# php - php套接字超时

> ID：10471926
> 
> 赞同：0
> 
> 时间：2012-05-06T15:54:56.963
> 
> 标签：php, sockets

我有一个带有连接到服务器的客户端数组的 php 服务器。有没有办法让我找出每个客户端连接了多长时间以及客户端是否通过了超时时间来断开连接？php 是否会在套接字被接受时保存在某处？我正试图摆脱幽灵客户..

我知道我可以设置套接字接受自己的时间并循环抛出它，但我的问题是是否有某种类似的 socket_get_connection_time() 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:06:09.773

如果您使用的是基于 Unix 的平台（我不相信这在 Windows 上可用），则处理此问题的一种方法是使用信号。

首先，您需要确保您的 PHP 构建包含 pcntl_* 函数。请参阅此处的文档：http: [//php.net/manual/en/book.pcntl.php](http://php.net/manual/en/book.pcntl.php) 在许多安装中，默认情况下不编译它。

你会做这样的事情：

```
if( !function_exists( "pcntl_signal" ) ) {
    die("pcntl_* functions not available");
}

pcntl_signal( 14, "cleanup", TRUE ); // 14 is the value for the SIGALARM unix signal
pcntl_alarm( XXXX ); // where XXXX is the number of second timeout for doing maintenance

function cleanup()
{
   // do your checks for timed out sockets here.
   // you will need some way to access the data, possibly a global variable pointing to
   // to the list of socket connections.
} 
```

# html - 下划线访问的链接

> ID：10471929
> 
> 赞同：10
> 
> 时间：2012-05-06T15:55:47.160
> 
> 标签：html, css, browser

给定以下示例： http: [//jsfiddle.net/A8v9x/4/](http://jsfiddle.net/A8v9x/4/) - 当您单击第一个链接然后返回页面时，第一个链接变为绿色。但是，它仍然没有下划线，即使已访问的链接被声明为具有`text-decoration:underline;`. 即使您添加`!important`到该规则，也没有任何变化。

在 CSS 规范中找不到有关此类行为的任何信息。这是一个常见的浏览器错误吗？如何解决它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T16:05:41.380

您不能在`:visited`. 这是出于隐私问题，在[https://developer.mozilla.org/en/CSS/Privacy_and_the_:visited_selector](https://developer.mozilla.org/en/CSS/Privacy_and_the_:visited_selector)进行了讨论。基本上，更改计算属性可以让网站确定用户访问过哪些网站。

可用于设置已访问链接样式的 CSS 属性是颜色、背景颜色、边框*颜色、轮廓颜色和列规则颜色，并且当未访问和已访问样式都是颜色时（不是绘制服务器或none)，填充和描边属性。对于不允许的属性（以及允许的属性的 alpha 分量，当使用 rgba() 或 hsla() 颜色或透明时），将使用未访问链接的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T10:42:21.810

我昨天遇到了同样的问题，我找到了解决方法。在过去，我过去常常把链接放在下划线和访问链接没有，更简单的访问者不要点击同一个链接两次。

昨天当我尝试做同样的事情并且没有工作时，我感到很惊讶。我浪费了 30 分钟，直到我在互联网上发现，由于安全原因，自 2007 年以来，所有浏览器都限制了您可以“访问”的属性。它们只是您可以设置为“已访问”的 6-7 个属性。其中之一是边框颜色。然后我想将下划线设置为无，并**使用“border-bottom-color”作为下划线**。您不能设置“border-bottom-color:transparent;” 对于已访问，但您可以**将边框颜色设置为与父元素背景颜色相同的颜色**。一旦访问链接，这将使下划线不可见。

```
<style type="text/css">
body{color:black;background-color:white;}
a:link{color:blue;text-decoration:none;border-bottom: 1px solid;border-bottom-color:blue;}
a:visited{color:red;border-bottom-color:white;}
</style> 
```

或者您可以通过将链接边框颜色设置为与背景相同并为访问者设置不同的颜色来执行相反的操作（您所要求的）。

反面演示：[https ://jsfiddle.net/stfr9f9a](https://jsfiddle.net/stfr9f9a)

# asp.net-mvc - 在 MVC3 应用程序中使用 Kendo DropDownList 时客户端验证有何变化？

> ID：10471933
> 
> 赞同：2
> 
> 时间：2012-05-06T15:56:37.987
> 
> 标签：asp.net-mvc, asp.net-mvc-3, kendo-ui

我在视图中有以下表格：

```
@using (Html.BeginForm())
{
    @Html.DropDownListFor(m => m.ModelValue, Model.ModelSelectList, " - ", new {@class = "kendo-skip-dropdown"})
    @Html.ValidationMessageFor(m => m.ModelValue)
    <input type="submit" />
} 
```

我还在`$("select").not(".kendo-skip-dropdown").kendoDropDownList();`_Layout.cshtml 中的页面加载代码中调用，以将我的所有`select`元素设置为 Kendo *DropDownList*小部件。

`ModelValue == null`对于所有测试都是如此，并且应用了`kendo-skip-dropdown`类，下拉列表是标准的，当我尝试发帖而不选择值时，我得到预期的“字段是必需的”客户端错误。如果我删除`kendo-skip-dropdown`该类并让 Kendo UI 完成其工作，并尝试在未选择值的情况下发布帖子，则会收到“必须是数字”客户端错误，表明我的`optionLabel`默认值现在被接受为值。

我使用 Kendo 时为下拉菜单呈现的 HTML 是：

```
<span tabindex="0" style="" class="k-widget k-dropdown k-header"><span class="k-dropdown-wrap k-state-default k-state-hover"><span class="k-input">-</span>
    <span class="k-select"><span class="k-icon k-arrow-down">select</span></span></span>
    <select data-val="true" data-val-number="The field ModelValue must be a number." data-val-required="The ModelValue field is required." id="ModelValue"
        name="ModelValue" style="display: none;" class="input-validation-error">
        <option>-</option>
        <option value="1">One</option>
        <option value="2">Two</option>
        <option value="3">Three</option>
        <option value="4">Four</option>
    </select></span> 
```

这里有什么不同，谁能告诉我如何在非剑道和剑道选择列表之间保持我的验证一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:08:01.410

就个人而言，我在绝大多数验证中都使用数据注释。我不必深入研究标准验证器和 Kendo 验证器之间的差异，但我不得不使用 [Required] 等属性。

你看过[文档](http://docs.kendoui.com/api/framework/validator)了吗？对于标准类型与 Kendo 类型，它可能是以不同顺序应用的一条规则（在 Kendo 中它首先检查 Required 并停止，在标准中它首先检查数值？）

确保一致性的一种方法是始终使用 Kendo Validator，或者您可以查看覆盖助手，以便标准 ValidationMessage 在两者之间保持一致。

# database - 是否有任何工具或 API 可以自动更新数据库结构

> ID：10471935
> 
> 赞同：6
> 
> 时间：2012-05-06T15:56:43.327
> 
> 标签：database, delphi, database-versioning, blackfish

在我支持的应用程序中，最近我对数据库结构进行了一些更改。

我将更新发送给用户，但很难让他们全部保持最新。

有什么简单的方法可以做到这一点吗？

使用户能够跳过版本，但仍会在他们安装的下一个版本中进行更新的东西。

我使用 BlackFish 数据库。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T06:20:37.143

只需将数据库版本号存储在数据库中并编写如下迁移脚本：

*   database_10.sql - 初始数据库结构
*   database_10_15.sql - 从 1.0 迁移到 1.5 的迁移脚本
*   database_10_17.sql - 从 1.5 迁移到 1.7 的迁移脚本

在每次应用程序启动时检查数据库版本号并应用所需的迁移脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:55:24.070

**边注：**

对于小型项目，另一个吸引人的替代方案是 Component ACE [Absolute Database](http://www.componentace.com/bde_replacement_database_delphi_absolute_database.htm)。

* * *

**现在直奔主题：**

个人版（免费）带有一个名为*DBManager*的自定义实用程序（及其源代码）。

![在此处输入图像描述](../Images/de735974476f57fdef02beb14a63562f.png)

它可以作为如何以编程方式管理数据库结构更改的起点（德尔福方式！）。

为什么不将其移植到 BlackFish？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:37:41.637

我很少更改数据库，只是添加一个表或有时是一个列。当我启动我的程序时，它会检查所述列或表的存在，如果它不存在，它就会尝试创建它。

# django - admin list_filter 值取决于其他过滤器

> ID：10471937
> 
> 赞同：2
> 
> 时间：2012-05-06T15:56:54.743
> 
> 标签：django, django-admin, django-admin-filters

让我们看一下这个例子：

```
class Author(models.Model):
    ...    

class Book(models.Model):
    author = models.ForeignKey(Author, related_name='books'...)
    ...

class Chapter(models.Model):
    book = models.ForeignKey(Book, related_name='chapters' ...)
    ... 
```

对于管理员，让我们`ChapterAdmin`像这样配置：

```
class ChapterAdmin(admin.ModelAdmin):
    list_filter = ('book__author', 'book',)
    ... 
```

这通过相关`Author`和提供了很好的过滤器`Book`。

问题来了：

当用户点击一个`Author`in`book__author`过滤器时，主表中的结果会被相应地过滤。好的。但是`book`过滤器仍然列出所有可用`Books`的，不管`book_author`过滤器。Is there a way to make the `book`filter dependent of `book__author`filter such that when an `Author`is selected, only `Books`by that are related to the `Author`are listed in filter options?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:02:11.767

看起来您可以`SimpleListFilter`用来完成这项工作，因为您在方法中有请求，`lookups`您可以判断选择了哪个作者并仅提供他的书籍列表，文档中的更多信息：[https ://docs.djangoproject.com/ zh/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)

# opencv - 使用 OpenCv 检测 PC 上的网络摄像头/摄像头数量

> ID：10471938
> 
> 赞同：5
> 
> 时间：2012-05-06T15:57:03.027
> 
> 标签：opencv

我正在制作一个运行多个网络摄像头/摄像头的应用程序。我无法通过 OpenCV 检测到我拥有的网络摄像头数量，以安排一个包含多个子网络摄像头的大显示窗口。

有人可以帮我吗？

我搜索了 openCV willowgarage 但失败了

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T16:36:27.093

我不认为 OpenCV 提供任何功能来判断检测到多少个摄像头。一种简单且跨平台的方法是`VideoCapture::open()`在循环中调用 0 到 10，并在每次迭代中检查是否`VideoCapture::isOpened()`返回`true`。这样您就可以知道相机的索引以及您拥有的相机数量。

# matlab - 如何对存储在矩阵单元格中的未知大小的数组进行交集？

> ID：10471941
> 
> 赞同：1
> 
> 时间：2012-05-06T15:57:13.430
> 
> 标签：matlab, cell

我有一个单元格矩阵，称之为 M。矩阵维度为 n^3。

每个单元格都包含一个索引数组（对某个字符串进行正则表达式查询的结果，并不重要）。

我想与 M 的每个单元格中的数组中的索引相交。

我怎样才能做到这一点？如果我使用交集函数，它怎么知道从每个单元格的数组内部获取索引？

据我了解，我必须使用单元格，因为内部数组的大小未知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:37:49.717

这是你想做的吗？

```
A = M{1};
for i = 2:numel(M)
  A = intersect(A, M{i});
end 
```

我不认为使用单个`intersect`调用或使用例如`cellfun`.

如果您只想要特定索引的交集，您可以执行以下操作：

```
A = indices(1);
for i = indices(2:end)
  A = intersect(A, M{i});
end 
```

# php - 什么是阻止 fsockopen？

> ID：10471942
> 
> 赞同：7
> 
> 时间：2012-05-06T15:57:22.180
> 
> 标签：php, curl, fsockopen

经过半天的努力，我终于设法通过转换这个函数来让 reCAPTCHA 工作：

```
function _recaptcha_http_post($host, $path, $data, $port = 80) {

 $req = _recaptcha_qsencode ($data);

 $http_request  = "POST $path HTTP/1.0\r\n";
 $http_request .= "Host: $host\r\n";
 $http_request .= "Content-Type: application/x-www-form-urlencoded;\r\n";
 $http_request .= "Content-Length: " . strlen($req) . "\r\n";
 $http_request .= "User-Agent: reCAPTCHA/PHP\r\n";
 $http_request .= "\r\n";
 $http_request .= $req;

 $response = "";
 if( false == ( $fs = @fsockopen($host, $port, $errno, $errstr, 10) ) ) {
  die ("Could not open socket");
 }

 fwrite($fs, $http_request);

 while ( !feof($fs) )
  $response .= fgets($fs, 1160); // One TCP-IP packet
 fclose($fs);
 $response = explode("\r\n\r\n", $response, 2);
 return $response;
} 
```

至：

```
function _recaptcha_http_post($host, $path, $data, $port = 80) {
 $req = _recaptcha_qsencode ($data);
 $request = curl_init("http://".$host.$path);

 curl_setopt($request, CURLOPT_USERAGENT, "reCAPTCHA/PHP");
 curl_setopt($request, CURLOPT_POST, true);
 curl_setopt($request, CURLOPT_POSTFIELDS, $req);
 curl_setopt($request, CURLOPT_RETURNTRANSFER, true);

 $response = curl_exec($request);
 return $response;
} 
```

基本上，我很想知道为什么`curl`在`fsockopen`“无法打开套接字”失败时工作。谢谢。

**另外**：启用了套接字支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T08:50:33.537

我可能是错的，但是你在**cURL**`$port = 80`的情况下使用in`fsockopen()`而这个变量根本没有使用。尝试通过而不是端口连接到**SSL**时，我遇到了同样的问题；据我所知，默认情况下会检查**SSL并进行相应的连接。******`port 80``443``cURL`****

 ******另外，尝试使用 CURLOPT_VERBOSE 运行`cURL`以**查看**它的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T19:43:34.077

[谷歌搜索](https://bugs.php.net/bug.php?id=11058)你的错误会让人怀疑你的 /etc/resolv.conf 是否可以被 PHP 读取。在 bash 中执行`ls -lah /etc/resolv.conf`以查看它是否可读。你会得到类似的东西：

```
myserver:~ myname$ ls -lah /ets/resolv.conf
lrwxr-xr-x  1 root  wheel    20B 16 mrt  2011 /etc/resolv.conf
       ^ if there is an 'r' here it is readable. if you have '-' here, it is not. 
```

如果它不可读，请尝试在 bash:`chmod 644 /etc/resolv.conf`中执行以使其可读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:09:39.107

if(false === ...) 里面的 $errno 和 $errstr 是什么？那么，如果您更改为，它会输出什么

```
 if( false == ( $fs = @fsockopen($host, $port, $errno, $errstr, 10) ) ) {
  die ("Could not open socket, error: " . $errstr);
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-18T18:17:21.233

哇，

```
 if( false == ( $fs = @fsockopen($host, $port, $errno, $errstr, 10) ) ) {
  die ("Could not open socket");
 } 
```

这肯定没有任何意义。尝试：

```
 $fs = fsockopen($host, $port, $errno, $errstr, 10); // @ ignores errors
 if(!$fs) die ("Could not open Socket"); 
```

Skype 有时也会阻塞端口 80。******

# java - 涉及真实类型字体和纹理的问题 LWJGL

> ID：10471945
> 
> 赞同：1
> 
> 时间：2012-05-06T15:57:53.437
> 
> 标签：java, lwjgl

所以我正在尝试使用我已经完成的自定义字体将文本绘制到屏幕上。同时使用纹理时会出现问题。

我像这样加载我的纹理：

诠释纹理{

```
 try {
            InputStream in = new FileInputStream(filelocation);
            PNGDecoder decoder = new PNGDecoder(in);
            ByteBuffer buffer = BufferUtils.createByteBuffer(4
                    * decoder.getWidth() * decoder.getHeight());
            decoder.decode(buffer, decoder.getWidth() * 4, Format.RGBA);
            buffer.flip();
            in.close();
            //glBindTexture(GL_TEXTURE_2D, Texture);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                    GL_NEAREST);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                    GL_NEAREST);
            glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, decoder.getWidth(),
                    decoder.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE,
                    buffer);
            glBindTexture(GL_TEXTURE_2D, 0);
        } catch (FileNotFoundException ex) {
            System.err
                    .println("Textures are not in their correct location.");
            Display.destroy();
            System.exit(1);
        } catch (IOException ex) {
            System.err
                    .println("Textures are not in their correct location.");
            Display.destroy();
            System.exit(1);
        }
    } 
```

我的字体是这样的

公共静态无效负载（浮动大小）{

```
 try {
        InputStream inputStream = ResourceLoader.getResourceAsStream(filelocation);

        Font awtFont = Font.createFont(Font.TRUETYPE_FONT, inputStream);
        awtFont = awtFont.deriveFont(size);
        fontname = new TrueTypeFont(awtFont, true);

    } catch (Exception e) {
        e.printStackTrace();
    }   
} 
```

正在发生的事情是输入流如何“混合”，而我想要的文本是用我加载的纹理绘制的。

我在游戏循环之前从 Font.class 加载字体，纹理从它们使用的类加载，在游戏循环期间调用。

我已经用谷歌搜索了这个问题，但找不到任何东西。如果你能理解我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:58:34.243

而不是 InputStreams 变得混淆它更有可能是纹理绑定。在您的 Texture 类中，以下行被注释掉：

//glBindTexture(GL_TEXTURE_2D, Texture);

这导致纹理图像被加载到之前绑定到 GL_TEXTURE2D 的任何内容中，替换之前的纹理。

您需要先绑定纹理，然后才能使用 glTexImage2D 将图像加载到其中

# javascript - 当 innerHTML 为空时隐藏 div

> ID：10471946
> 
> 赞同：2
> 
> 时间：2012-05-06T15:58:05.543
> 
> 标签：javascript, jquery, innerhtml

我对 jQuery 很陌生，但我试图获得一个代码设置，当“innerHTML”为空时隐藏一个 div。我尝试使用下面的代码。但它不起作用！我的错在哪里？？

```
if (($("#php-errors").html).length) {
    $("#php-errors").css("display", "block");
}
else {
    $("#php-errors").css("display", "none");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:58:37.940

```
if ($("#php-errors").html().length) {
    $("#php-errors").css("display", "block");
}
else {
    $("#php-errors").css("display", "none");
} 
```

**更正：**

`($("#php-errors").html).length`应该`$("#php-errors").html().length`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T16:05:56.450

一行，以及使用`.show()`和`.hide()`方法：

```
var hasCont = $("#php-errors").contents().length ? $("#php-errors").show() : $("#php-errors").hide(); 
```

使用*三元运算符*表示：

*   （定义变量）**声明** **？**
*   **如果陈述为真，则** 采取行动**：**
*   **如果陈述为假** ，则采取行动**；**

### *[演示 JSFIDDLE](http://jsfiddle.net/roXon/NwT6E/1/)*

* * *

一个好的做法是将你的元素缓存在一个 var 中，让我们称之为它`var $el`，然后像这样使用它：

```
var $el = $("#php-errors");
var hasCont = $el.contents().length ? $el.show() : $el.hide(); 
```

更具可读性，它会为您节省一些微处理时间；）但它确实有助于跨函数的可重用性（如果在函数之外定义。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T16:01:59.560

你可以像这样清理你的代码。

它还使用该`innerHTML`属性作为三元表达式的条件部分。如果有内容，它会返回并设置“block”，如果没有，则“none”。

```
$("#php-errors").css("display", function() {
    return this.innerHTML ? "block" : "none";
}); 
```

[http://jsfiddle.net/WKWNc/2/](http://jsfiddle.net/WKWNc/2/)

* * *

***更新：***

如果这仅在页面加载时运行，您可以最初将其设置为“阻止”，然后执行此操作。

```
$("#php-errors:empty").hide(); 
```

[http://jsfiddle.net/WKWNc/1/](http://jsfiddle.net/WKWNc/1/)

或者相反，将其设置为“无”，如果不为空则显示。

```
$("#php-errors:not(:empty)").show(); 
```

[http://jsfiddle.net/WKWNc/](http://jsfiddle.net/WKWNc/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-15T20:35:33.890

只是添加不需要javascript的css方式以防其他人需要它：

```
.php-errors:empty { display: none; } 
```

将匹配：

```
<div class="php-errors"></div>
<div class="php-errors"><!-- test --></div> 
```

不匹配**：**

```
<div class="php-errors"> </div>
<div class="php-errors">
   <!-- test -->
</div>

<div class="php-errors">
</div> 
```

来源：[https ://css-tricks.com/almanac/selectors/e/empty/](https://css-tricks.com/almanac/selectors/e/empty/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T16:00:43.007

对于您的情况，您似乎只想：

```
$("#php-errors").toggle(); 
```

我看不出您想将显示设置为任何一个，`block`或者`none`如果没有设置。

你确定你的逻辑不是多余的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T16:01:35.850

我想你错过了比较，试试这个

```
if ($("#php-errors").html() == "") {
    $("#php-errors").css("display", "block");
}
else {
    $("#php-errors").css("display", "none");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-06T16:21:24.277

我会做这样的事情：

```
var $php_errors = $("#php-errors");

if ($php_errors.is(":empty")) {
    $php_errors.hide()
}
else {
    $php_errors.show();
} 
```

希望能帮助到你

# javascript - 如何使用javascript检查浏览器页面始终位于顶部

> ID：10471947
> 
> 赞同：0
> 
> 时间：2012-05-06T15:58:16.243
> 
> 标签：javascript

我写了一个测试站点，当用户开始测试时，我会打开一个新窗口，我不希望用户可以更改浏览器窗口，我怎么能检查用户总是在我的窗口上，我只能想检查无论用户是按下 alt+tab 还是鼠标离开窗口都使用 javascript。那么，还有其他更好的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:04:55.257

我认为没有其他解决方案。
浏览器不会让你这样做。
但是我看不出它如何与您拥有的解决方案一起使用：
-您无法设置光标的位置，因此您无法停止鼠标离开窗口，
-您无法停止系统使用 Alt+tab，您只能控制浏览器窗口。

但是如果你让它工作，请在这个威胁中写下你的解决方案，谢谢

# android - Android JNI 开发构建失败 - convert-dependencies.sh

> ID：10471948
> 
> 赞同：0
> 
> 时间：2012-05-06T15:58:17.907
> 
> 标签：android, build, java-native-interface

我不得不将一个 android JNI 开发（尚未工作）移植到另一台机器上。在原始机器上它编译并链接OK。

但是在新机器上我得到一个构建错误

* * *

编译拇指：main <= main.c

./obj/convert-dependencies.sh：第 6 行：语法错误：文件意外结束

制作：*** [obj/local/armeabi/objs/main/main.o] 错误 2

make: ***删除文件 `obj/local/armeabi/objs/main/main.o'

## /cygdrive/c/Android/android-ndk-r7c/build/core/build-binary.mk:240：目标“obj/local/armeabi/objs/main/main.o”的配方失败

也许这是一个环境问题 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:25:15.410

这是解决方案

convert-dependencies.sh 是一个包含该行的 sed 文件

# 自动生成的文件，请勿编辑！

似乎该文件依赖于环境 - 它将对 windows 样式根目录 (c:\ , d:\ ...) 的引用转换为 unix 样式 (/cygdrive/c ...) 并且它没有被删除或重建项目清理或构建。

因此，旧机器的旧版本仍然存在，并且包含对不存在的驱动器的引用，这似乎导致它发生故障。当我删除此文件并进行重建时，它正确地重建了有问题的文件并正确地构建了项目

# cocoapods - RubyMotion 和 CocoaPods 问题

> ID：10471950
> 
> 赞同：4
> 
> 时间：2012-05-06T15:58:27.033
> 
> 标签：cocoapods, rubymotion

我在让 CocoaPods 依赖项在 RubyMotion 中工作时遇到了各种问题。首先，如果我添加`dependency 'JSONKit'`到我的 Rakefile 然后运行`rake`它会因`can't convert Pathname into String`错误而中止。`rake --trace`然后产生以下输出：

```
** Invoke default (first_time)
** Invoke simulator (first_time)
** Invoke build:simulator (first_time)
** Execute build:simulator
/usr/bin/gen_bridge_metadata --format complete --no-64-bit --cflags "-I. -I." JSONKit.h -o "JSONKit.bridgesupport"
invalid option: --no-64-bit
Usage: gen_bridge_metadata [options] <headers...>
Use the `-h' flag or consult gen_bridge_metadata(1) for help.
rake aborted!
Command failed with status (1): [/usr/bin/gen_bridge_metadata --format comp...]
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/file_utils.rb:45:in `call'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/file_utils.rb:45:in `sh'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in `sh'
/Library/RubyMotion/lib/motion/project/vendor.rb:93:in `block in build_static'
/Library/RubyMotion/lib/motion/project/vendor.rb:34:in `chdir'
/Library/RubyMotion/lib/motion/project/vendor.rb:34:in `build_static'
/Library/RubyMotion/lib/motion/project/vendor.rb:23:in `build'
/Library/RubyMotion/lib/motion/project/builder.rb:37:in `block in build'
/Library/RubyMotion/lib/motion/project/builder.rb:36:in `each'
/Library/RubyMotion/lib/motion/project/builder.rb:36:in `build'
/Library/RubyMotion/lib/motion/project/app.rb:50:in `build'
/Library/RubyMotion/lib/motion/project.rb:33:in `block (2 levels) in <top (required)>'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:205:in `call'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:200:in `each'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:174:in `each'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:174:in `invoke_prerequisites'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:174:in `each'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:174:in `invoke_prerequisites'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:94:in `each'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/Users/xxxx/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/Users/xxxx/.rbenv/versions/1.9.3-p194/bin/rake:32:in `<main>'
Tasks: TOP => default => simulator => build:simulator 
```

项目中的 vendor 目录包含各种 JSONKit 文件。

其次，在另一个 RubyMotion 应用程序中，如果我添加`dependency 'Nimbus'`到我的 Rakefile 然后运行`rake`应用程序构建，但是当我尝试在我的代码中使用任何与 Nimbus 相关的东西并且没有创建供应商目录时，会出现未初始化的常量错误。

这两种情况有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:03:13.047

这里有几个问题在起作用。

**无法将路径名转换为字符串**

**更新：截至 2012 年 5 月 7 日，您可以`sudo motion update`，这将得到修复**

此错误与您使用的是 Ruby 1.9 有关。虽然我没有在文档中看到它明确说明，但设置示例指的是`sudo`在`gem install`命令中使用的事实意味着假设您正在运行 OS X 的内置 ruby​​ (1.8.7)。如果您将项目切换到系统 ruby​​（在其中添加一个`.rbenv-version`文件`system`）。或者，如果您想坚持使用 1.9，您可以将第 22 行更改`/Library/RubyMotion/lib/motion/project/vendor.rb`为：

```
App.info 'Build', @path.to_s 
```

一旦这样做，你很有可能会收到这样的错误：

```
ERROR! Building vendor project `./vendor/JSONKit' failed to create at least one `.a' library.` 
```

您需要编辑同一文件的第 77 行以读取：

```
objs = Dir.glob('**/*.o') # Removed the leading "*/" 
```

然后`rake`应该终于可以正常工作了。

有关这些问题的问题已在`motion-cocoapods`repo 中提交：[https ://github.com/HipByte/motion-cocoapods/issues/1](https://github.com/HipByte/motion-cocoapods/issues/1)

此外，我刚刚为此使用`motion support`. （请记住，您为这个包含支持的全新产品付费；使用它！）

**雨云**

这里的问题是您需要顶级 cocoapod。由于它具有“子规范”，因此您需要直接要求它们，因此也许可以`dependency 'Nimbus/Core'`。[您可以在此处](https://github.com/CocoaPods/Specs/blob/master/Nimbus/0.9.2/Nimbus.podspec)查看它们的完整列表（请参阅`s.subspec`条目）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T18:51:06.490

关于 --no-64-bit 标志的编译错误是由于 Snow Leopard 上的 RubyMotion 造成的。[根据https://gist.github.com/2597428](https://gist.github.com/2597428)更新 /Library/RubyMotion/lib/motion/project/vendor.rb

Laurent Sansonetti 已确认该错误：

> 你好，
> 
> 感谢您的报告！问题是 Lion 中添加了 --no-64-bit 标志，您似乎正在运行 Snow Leopard。我们会解决这个问题。
> 
> 洛朗

# google-sheets - 脚本只能逐步工作

> ID：10471954
> 
> 赞同：0
> 
> 时间：2012-05-06T15:58:53.133
> 
> 标签：google-sheets, google-apps-script

这里的文件 [https://docs.google.com/spreadsheet/ccc?key=0AurtxTJwggIpdG9GaE1TOV9wMEw2UHhjZVJyUXVETUE](https://docs.google.com/spreadsheet/ccc?key=0AurtxTJwggIpdG9GaE1TOV9wMEw2UHhjZVJyUXVETUE)

你会在工作表**Key**上找到，要做什么：
在所有工作表中，首先在 B 列中找到引用 (Key!B1) 所在的行，然后从这一行开始，在 C 列中找到引用 (Key !B2) 代表 first
换句话说，我们正在寻找这对夫妇并将 C 列中的单元格设置为 activecell

该脚本在调试模式下工作，仅
使用工作表 Key 中的按钮运行它，使其“不选择”好的单元格，即使找到要选择的单元格（登录 Logger）

我用了一个颜色函数
也就是说，蓝色或红色是要选择的单元格，有时它没有被选中

编码 ：

```
function lookFor() {
   var ss=SpreadsheetApp.getActiveSpreadsheet();
var referSheet=ss.getSheetByName("Key");
  var sheetToCheck = new Array;
  sheetToCheck[0]=ss.getSheetByName("work");
  sheetToCheck[1]=ss.getSheetByName("user");
  sheetToCheck[2]=ss.getSheetByName("tax");
  sheetToCheck[3]=ss.getSheetByName("cont");
  sheetToCheck[4]=ss.getSheetByName("ind");

  var referenceB=referSheet.getRange("B1").getValue();
  var referenceC=referSheet.getRange("B2").getValue();
  //loop to work with  all reference as long as there are data in the column A
 for (j in sheetToCheck){
   sheetToCheck[j].setActiveCell("A1");
   var dataToCheck=new Array;
   dataToCheck=sheetToCheck[j].getRange(1,2,sheetToCheck[j].getLastRow(),2).getValues();
   for (i in dataToCheck){
     var done=false;
        if (dataToCheck[i][0]==referenceB){
          for (k=i;k<dataToCheck.length;k++){
            if (dataToCheck[k][1]==referenceC){
              //this part is user to change the color of the cell, to check if the code is working well
              if (sheetToCheck[j].getRange(parseInt(k)+1,3,1,1).getBackgroundColor()=="red"){
            sheetToCheck[j].getRange(parseInt(k)+1,3,1,1).setBackgroundColor("blue"); 
             }
             else
            {
            sheetToCheck[j].getRange(parseInt(k)+1,3,1,1).setBackgroundColor("red"); 
                }
            var cell=sheetToCheck[j].getRange(parseInt(k)+1,3,1,1).getA1Notation() ; 
              sheetToCheck[j].setActiveCell(cell);  
               SpreadsheetApp.flush();
            done=true;
            Logger.log("Sheet :"+sheetToCheck[j].getName()+" - Cell :"+cell);
              break;
           }
        }
          if (done==true){
           break; 
          }
      }
   }
 }

}
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:07:10.627

我注意到你已经在你的脚本中修复了这个：

```
 var referenceB=referSheet.getRange("B1").getValue(); //A2
  var referenceC=referSheet.getRange("B2").getValue(); //B2 
```

这是您的代码的较短版本:)

```
function LookForCity() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var referSheet = ss.getSheetByName("Key").getDataRange().getValues()[1];
  var sheetName = ["work", "user", "tax", "cont", "ind"];

 for (j in sheetName){
   var sheet = ss.getSheetByName(sheetName[j]);
   var values = sheet.getDataRange().getValues(); 
   for(i in values){
     if(values[i][1] == referSheet[0] && values[i][2] == referSheet[1]){
       Logger.log('Sheet: ' + sheetName[j]+  ' Cell: C'+(parseInt(i)+1) );
       sheet.setActiveCell(sheet.getRange(parseInt(i)+1, 3));
       Utilities.sleep(3000);
       break;
     }
   }
 }
} 
```

# c# - 从代码隐藏向网页添加文本

> ID：10471960
> 
> 赞同：0
> 
> 时间：2012-05-06T15:59:36.600
> 
> 标签：c#, javascript, asp.net

我在按钮单击事件的网页代码隐藏中生成一些文本。早些时候，在我的一个桌面应用程序中，我正在做这样的事情。

例如：

```
public void button_click(object sender, EventArgs e)
{
      for(i=0;i<=2;i++)
      {
         Label txtLabel1 = new Label(Text=i.ToString(), Color=Blue}; //Generating a label
         StackPanel1.Children.Add(txtLabel1); //Adding a label to stack panel on the desktop app
      }
      for(j=0;j<=3;j++)
      {
         Label txtLabel2 = new Label(Text=j.ToString(), Color=Red}; //Generating a label
         StackPanel2.Children.Add(txtLabel1); //Adding a label to stack panel on the desktop app
      }
} 
```

我在 Web 开发方面没有太多经验，所以我对如何在我的 ASP.NET 网站上做类似的事情有点困惑。在我的 .aspx.cs 代码中，我可以生成字符串，但是从代码隐藏中，我如何将它们连同它们的颜色属性一起添加到页面中。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:08:34.540

使用占位符代替 StackPanel

```
<asp:PlaceHolder id="ph1" run="server" /> 
```

然后您可以使用 ph1.Controls.Add(...

关于样式标签，您可以使用 label1.Style.Add("color", "red")

```
 for (int i = 0; i <= 2; i++)
        {
            Label txtLabel1 = new Label(); //Generating a label
            txtLabel1.Text = i.ToString();
            txtLabel1.Style.Add("Color", "Red");
            ph1.Controls.Add(txtLabel1);
        } 
```

# flash - 在 Flash CS5 中的帧之间插入帧

> ID：10471961
> 
> 赞同：0
> 
> 时间：2012-05-06T15:59:45.107
> 
> 标签：flash, flash-cs5

上下文：我必须修改包含大量图片和文字的现有横幅。现在我需要在 Flash 文件之间插入一些图片和文字。例如，我需要在第 500 帧插入一张长度为 100 帧的图片。那么如何将 100 帧向右移动？

如何在 Adob​​e Flash CS5 中的现有帧之间插入新图层及其关键帧。我有以下场景，![在此处输入图像描述](../Images/0ef926dcb2d68a8791241b4838405849.png)

我需要得到以下 ![在此处输入图像描述](../Images/68beb38039d95cc971b77c52c5bb30fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T14:37:06.063

F5 插入新关键帧，F6 将其转换为新帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T04:37:02.550

您的输出取决于您的帧而不是您的图层您最删除第 3 层（10 到 20）的关键帧并将 10 帧添加到第 2 层

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:06:46.077

单击图层名称并拖动到图层之间

# javascript - 使用我们的默认值/占位符插件进入输入字段时如何修复闪烁效果？

> ID：10471962
> 
> 赞同：1
> 
> 时间：2012-05-06T15:59:45.947
> 
> 标签：javascript, jquery, html, placeholder

有[很多](http://www.quora.com/JavaScript/Which-plugin-to-use-for-HTML5-placeholder-that-retains-the-label-on-focus)插件专门用于在旧浏览器中实现[HTML5 的占位符属性。](https://developer.mozilla.org/en/HTML/Forms_in_HTML#The_placeholder_attribute)[这是我们正在使用的](https://github.com/ripper234/input-placeholder)。

虽然它不像其他一些选项那样使用占位符属性，但它确实（在我们的调整之后）[保留了焦点](https://stackoverflow.com/questions/8574356/html5-placeholder-disappears-on-focus)上的文本 - 关注输入字段不会删除其内容。

不过，我们有一个烦恼 - 当您点击 TAB 并移动到具有默认（/空）文本的输入字段时，默认文本首先被选中，直到我们修复此问题并将[插入符号](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area/841121#841121)放置在位置 0 自己，导致一个明显的闪烁效果。

要重现，只需查看我在上面链接的小提琴（[这里又是](http://jsfiddle.net/ripper234/zSxjw/2/)）。这个问题有简单的解决方案吗（需要在 IE9+/Firefox/Chrome 上工作）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:24:39.313

这是一个替代解决方案。在顶部放置一个包含默认文本的元素。如果输入获得焦点隐藏默认文本并模糊检查是否需要隐藏文本。我意识到它并没有直接回答这个问题，但现在的方法似乎变得比必要的复杂得多。现在关于该方法的另一件事是，如果有人试图选择默认文本的任何部分，它会出现非常意外的行为。

# jquery - 如何禁用所有提交按钮然后重新启用特定按钮？

> ID：10471964
> 
> 赞同：1
> 
> 时间：2012-05-06T15:59:52.477
> 
> 标签：jquery

我在我的 asp.net mvc 3 Web 应用程序中有以下脚本，当用户单击它们时禁用所有提交按钮，以防止连续提交相同的数据：

```
$(document).ready(function () {
    $("input[type='submit']").click(function () {
        $(this).prop('disabled', true);
    });
}); 
```

上述脚本运行良好，但禁用“搜索”等提交按钮将阻止用户执行其他搜索，除非他们刷新页面。所以我在想我是否可以修改我的脚本以在 2 秒后重新启用提交按钮。我厌倦了使用`delay()`，但它没有用。

所以我有以下问题：

1.  我的方法对定义延迟时间有效吗？

2.  我如何定义延迟时间然后重新启用按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:01:14.847

```
$("input[type='submit']").click(function () {
        var $this = $(this);
        $this.prop('disabled', true);
        setTimeout(function() {
          $this.prop('disabled', false);
        },2000);
    }); 
```

***[演示](http://jsfiddle.net/ad2CK/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:06:36.170

我不同意你决定的 2 秒延迟。如果通话时间超过 2 秒怎么办？并非所有人都如此幸运地拥有高速宽带连接。:) 几乎所有关于网络延迟的*假设*都是危险的。

更好的方法是使用 AJAX 调用并利用其回调函数来准确了解服务器何时返回响应。

> 摘自 - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

* * *

您可以尝试将特定类添加到要禁用的所有提交按钮。之类`.canDisable`的，然后当您禁用所有提交按钮时，您可以指定一个额外的选择器来*精确*定位您要禁用的按钮。

```
$(document).ready(function () {
    $("input[type='submit']").filter(".canDisable").click(function () {
        $(this).prop('disabled', true);
    });
}); 
```

我正在使用该`.filter()`函数过滤掉包含`.canDisable`该类的所有元素。

* * *

参考 -

*   `filter()`- [http://api.jquery.com/filter/](http://api.jquery.com/filter/)

    > **描述：**将匹配元素的集合减少到与选择器匹配的元素...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-25T12:11:01.807

我对这个问题的想法是，您在不想禁用的输入上设置一个属性“nodisable”，然后禁用如下字段：

`$("input[type='submit']:not([nodisable])").prop("disabled", true);`

`<input type="submit">`会被禁用，`<input type="submit" nodisable>`不会。

启用也适用于此： `$("input[type='submit']").prop("disabled", false);`

结合 ajax 方法，我认为这是解决这个问题的最佳方法。

# javascript - 如何从alexa中提取网站的排名和声誉？

> ID：10471966
> 
> 赞同：0
> 
> 时间：2012-05-06T15:59:55.370
> 
> 标签：javascript, ruby-on-rails, web-applications

对于我的项目，我需要通过提供该网站的 url 从 alexa 中提取任何网站的排名。我怎么可能用 ruby​​ on rails 或简单地用 javascript 做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T16:02:44.427

如果您正在抓取 Alexa 以获取这些信息，那么您正在做一些非法的事情。

Alexa 有一个[API](http://aws.amazon.com/fr/awis/)。你必须付费才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-05T16:44:46.277

有一种使用此网址的方法

```
https://www.alexa.com/comparison?&sites=google.com&display=json&useCookie=false&windows[]=rank:1y 
```

在回复中，您会发现具有 3 个月统计数据的排名对象，您可以使用我希望这对某人有帮助

**更新：** 可悲的是，这不再有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T11:02:30.633

[问题已在此处](https://stackoverflow.com/questions/3676376/fetching-alexa-data)回答

以下查询：
[http](http://data.alexa.com/data?cli=10&url=http://stackoverflow.com)

://data.alexa.com/data?cli=10&url=http://stackoverflow.com 返回：

```
<ALEXA VER="0.9" URL="stackoverflow.com/" HOME="0" AID="Hrr2p1frEw10p/" IDN="stackoverflow.com/">
<SD>
<POPULARITY URL="stackoverflow.com/" TEXT="53" SOURCE="panel"/>
<REACH RANK="54"/>
<RANK DELTA="0"/>
<COUNTRY CODE="US" NAME="United States" RANK="38"/>
</SD>
</ALEXA>
```

# objective-c - 在 JSON iPhone 中插入更多密钥

> ID：10471969
> 
> 赞同：0
> 
> 时间：2012-05-06T16:00:16.097
> 
> 标签：objective-c, xcode

如何向 json 文件添加多个密钥？

```
NSArray *keys = [NSArray arrayWithArray:allkeys];
NSArray *objects = [NSArray arrayWithArray:allobjects];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

正如您在上面看到的，jsonDictionary 的键是键，但我想要一个里面有更多键的键。我尝试了“forKeys：keys,keys2”（keys2 另一个数组，但不起作用。现在这是结果：

```
{"text2":"Untitled {{400, 100}, {200, 100}} <UICFFont: 0x2c3960> font-family: \"Helvetica\"; font-weight: normal; font-style: normal; font-size: 12px","text3":"Untitled {{400, 100}, {200, 100}} <UICFFont: 0x2c3960> font-family: \"Helvetica\"; font-weight: normal; font-style: normal; font-size: 12px","text1":"Untitled {{400, 100}, {200, 100}} <UICFFont: 0x2c3960> font-family: \"Helvetica\"; font-weight: normal; font-style: normal; font-size:     12px"} 
```

数组键包含 Text1、text2... 数组对象包含 Untitled、size... 但我想要一个键“text1”，里面有“text writing”、“size”... 不是全部在一起。

可能是这样的：

```
{  
"menu": {  
    "header": "xProgress SVG Viewer",  
    "items": [  
        {  
            "id": "Open"  
        }, 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:23:02.590

您必须创建嵌套 NSDictionaries 的层次结构才能实现您想要做的事情。

像这样的东西：

```
// the following objecst are just dummies, fill this with your own objects
NSArray *objectArray = [NSArray arrayWithOjects:obj1,obj2,obj3,nil];
NSArray *keyArray = [NSArray arrayWithOjects:@"key1",@"key2,@"key3",nil];

NSDictionary *subDict = [NSDictionary dictionaryWithObjects:objectArray forKeys:keyArray];

// now create the main dictionary, which will hold your sub dictionary for one key
objectArray = [NSArray arrayWithObjects:,subDict,someObject,@"just a string"];
keyArray = [NSArray arrayWithObjects:@"first key",@"second key",@"third key"];

NSDictionary *mainDict = [NSDictionary dictionaryWithObjects:objectArray forKeys:keyArray]; 
```

您的示例 JSON 将具有以下结构：

一个带有键“菜单”的 NSDictionary，其中包含另一个 NSDictionary。这个字典有键“header”，它包含一个字符串，以及键“items”，它包含一个 NSDictionaries 的 NSArray。

# python - 子类不识别父类的模块导入？

> ID：10471970
> 
> 赞同：4
> 
> 时间：2012-05-06T16:00:26.540
> 
> 标签：python, python-module

我在两个不同的模块中有两个类：

*   `animal.py`
*   `monkey.py`

**动物.py：**

```
import json

class Animal(object):
    pass 
```

**猴：**

```
import animal

class Monkey(animal.Animal):

    def __init__(self):
        super(Monkey, self).__init__()

        # Do some json stuff... 
```

当我尝试实例化 a`Monkey`时，我得到一个

```
NameError: global name 'json' is not defined 
```

但是我是`json`在超类的定义模块中导入的，为什么不加载呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T16:02:36.043

它已加载，但其名称在`monkey.py`.

你可以输入`animal.json`来解决它（但你为什么要这样做），或者只是输入

```
import json 
```

在`monkey.py`以及。Python 将确保模块不会被加载两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T16:05:39.197

好吧，python 导入不能用作 C #include 预处理器指令。他们只将模块导入到导入模块的命名空间，而不是全局命名空间。因此，您将不得不在您打算使用它的每个模块中导入 json。

# time - Erlang 和当前日期时间

> ID：10471973
> 
> 赞同：6
> 
> 时间：2012-05-06T16:00:46.283
> 
> 标签：time, erlang

我想用 erlang 获取当前日期时间。我试过使用下面的代码；

```
{{Year,Month,Day},{Hour,Min,Sec}} = erlang:localtime(). 
```

但有时它会出现类似“**异常错误：右侧值{{2012,5,6}，{23,40,58}}不匹配”之类的错误

看起来1位数有问题。我尝试搜索几个网站，但仍然找不到解决方法。

我相信这很容易，但作为一个 erlang 新手，我无法解决这个问题。我尽力了。

环境： Erlang {"OTP APN 181 01","R15B01"} 安装了 windows 二进制版本 Windows XP

提前致谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T16:58:08.867

不，1位数没有问题。它应该完全匹配（检查`{{Year,Month,Day},{Hour,Min,Sec}} = {{2012,5,6},{23,40,58}}`）。很可能您已经将其中一个变量分配给函数中较早的部分。

# apache - Codeigniter 2 和 .htaccess - 如何实现“停机维护”模式？

> ID：10471974
> 
> 赞同：1
> 
> 时间：2012-05-06T16:01:00.930
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite

我知道这个问题可能已经被问过几次了，但我需要一个针对 CodeIgniter 的特定解决方案，使用 .htaccess 文件将每个请求发送到 index_failsafe.php 文件而不是普通的 index.php 但只有在 url不以“管理员”开头。例子：

1.  www.myhost.com/admin -> 照常工作
2.  www.myhost.com/welcome -> 发送到故障安全页面

情况 1：

```
RewriteRule ^.*$ index.php/$1 [L] 
```

情况2：

```
RewriteRule ^.*$ index_failsafe.php/$1 [L] 
```

我的重写条件是：

```
 RewriteEngine On

    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d 
```

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T17:07:39.197

就我个人而言，我是通过 IP 来做的——所以我可以让我的网站离线，但我仍然可以完全访问它（测试新功能并确保它在恢复之前工作）

```
RewriteEngine on

    # For maintenance:
    # If your IP address is 1.1.1.1 - then dont re-write
    RewriteCond %{REMOTE_ADDR} !^1\.1\.1\.1
    # If the person is requesting the maintenance page, also dont rewrite (prevent loops)
    RewriteCond %{REQUEST_URI} !/maintenance.html$ 
    # Otherwise rewrite all requests to the maintenance page
    RewriteRule $ /maintenance.html [R=302,L]

    # do not rewrite links to the documentation, assets and public files
    RewriteCond $1 !^(assets)

    # do not rewrite for php files in the document root, robots.txt or the maintenance page
    RewriteCond $1 !^([^\..]+\.php|robots\.txt|maintenance\.html)

    # but rewrite everything else
    RewriteRule ^(.*)$ index.php/$1 [L] 
```

只需将 !^1.1.1.1 更改为您当前的 IP。即！^121.65.56.65

如果您不确定您的 IP 是什么 - 只需谷歌“我的 IP 是什么” - 它会显示为第一次点击

但就您的具体问题而言 - 这应该有效：

```
RewriteCond %{REQUEST_URI} !/admin$ 
RewriteRule $ /index_failsafe.php [R=302,L] 
```

编辑：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T17:53:00.920

如果您使用 cookie 为用户存储会话数据，那么更改 cookie 名称以强制所有人注销可能会更简单，然后更改登录页面控制器以加载显示“停机维护”或其他内容的视图。

完成后，只需将 cookie 名称更改回原来的名称，每个人仍将登录，并确保更改登录页面控制器加载的视图，以便用户可以正常登录。

要更改 CI 的会话 cookie，请打开 config.php 并更改以下值：

```
 $config['sess_cookie_name'] 
```

您可以更进一步，创建一个备用登录控制器并查看标题为“维护登录”或类似的东西，然后您仍然可以登录进行测试。

这是我需要将 saas 停机进行维护时使用的方法，效果很好。我们面向公众的销售页面不受影响，我也不必乱用 htaccess。

# ios - 在 xcode 中显示视图属性检查器

> ID：10471975
> 
> 赞同：8
> 
> 时间：2012-05-06T16:01:11.273
> 
> 标签：ios, xcode

知道如何让这个窗口在 xcode 中可见吗？

![http://i.stack.imgur.com/cYUbw.png](../Images/2d371d8b3ed1c617d89fd8e899c8a4ca.png)

我想更改方向，但在任何地方都找不到“模拟指标”选项卡。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T16:07:35.263

由于`Simulated Metrics`仅适用于`UIViews`（如果您不使用`Storyboards`）和`UIViewController`子类，最简单的方法是选择视图或控制器并执行以下操作： ![在此处输入图像描述](../Images/974c87193d4480f01c24017f50331dee.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-06T16:04:40.727

只有选择 viewController 并选择

查看 -> 实用程序 -> 显示属性检查器

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T16:04:48.077

您必须选择一个视图控制器并显示实用程序面板。

# php - PDO 准备好的语句，正确使用了吗？

> ID：10471976
> 
> 赞同：6
> 
> 时间：2012-05-06T16:01:14.597
> 
> 标签：php, pdo

我只需要确保我已经正确地获得了 PDO 准备语句，以下代码是否会受到 SQL 注入的保护？

```
$data['username'] = $username;
$data['password'] = $password;
$data['salt'] = $this->generate_salt();
$data['email'] = $email;

$sth = $this->db->prepare("INSERT INTO `user` (username, password, salt, email, created) VALUES (:username, :password, :salt, :email, NOW())");  
$sth->execute($data); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T16:09:16.420

是的，您的代码是安全的。但是可以缩短：

```
$data = array( $username, $password, $this->generate_salt(), $email );

// If you don't want to do anything with the returned value:
$this->db->prepare("
    INSERT INTO `user` (username, password, salt, email, created)
    VALUES (?, ?, ?, ?, NOW())
")->execute($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:06:06.460

你可以从一个空数组`$data`开始

```
// start with an fresh array for data
$data = array();

// imagine your code here 
```

到目前为止，您的代码看起来不错。

编辑：我错过了你的 NOW() 电话。恕我直言，您也应该使用绑定变量添加它，例如

```
// bind date
$data['created'] = date("Y-m-d H:i:s");

// updated prepare statement
$sth = $this->db->prepare("INSERT INTO `user` (username, password, salt, email, created) VALUES (:username, :password, :salt, :email, :created)"); 
```

# java - 如何在嵌套对象中引用对象的数据成员？

> ID：10471981
> 
> 赞同：1
> 
> 时间：2012-05-06T16:01:42.403
> 
> 标签：java, android

我有一个 java 类 User，它的成员变量 firstName 和 lastName 如下所示：

```
public class User {

public String firstName;
public String lastName;

public void register()
{
    // do something
}

public void registerFacebook(Facebook facebookObj)
{
    mAsyncRunner.request("me", new RequestListener(){

        public void onComplete(String response, Object state){
            this.firstName = "John";
            this.lastName = "Doe";
            String userRegistrationResponse = this.register();
        } 
```

正如您在上面的代码中看到的，我正在尝试为 User 类的当前对象设置 firstName 和 lastName。但是，由于代码在 RequestListener 类的对象内部，所以这是不可能的。

那么我如何引用 firstName 和 lastName 呢？

我得到错误：

```
firstName cannot be resolved or is not a field 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:03:08.847

它之所以有效，是因为您使用的是*匿名内部类*，它隐式引用了`User`构造它的实例。这就是在这种情况`firstName`下`lastName`所指的内容。

但是，您需要删除`this`或将其更改为`User.this`. 例如：

```
public class Test {

    private String name;

    Test() {
        Runnable runnable = new Runnable() {
            @Override public void run() {
                name = "Fred"; // Or Test.this.name = "Fred"
            }
        };
        System.out.println(name);
    }

    public static void main(String[] args) {
    }
} 
```

有关如何工作的更多详细信息，请参阅[JLS 的第 15.8.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)`Test.this`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:04:35.500

删除`this.`部分也没问题（`this`指的是它所在的实例，即匿名类）。或完全/正确指定它：

```
User.this.firstName = ... 
```

# java - 为什么这个 java 小程序代码没有拾取每个 MouseClicked 事件？

> ID：10471983
> 
> 赞同：3
> 
> 时间：2012-05-06T16:01:54.940
> 
> 标签：java, multithreading, applet, mouselistener

我正在关注这个[这里的 2d java 游戏稍微旧的教程][1]。

我有一个基本的小程序，它在一个带有鼠标监听器的线程中运行。

在左键单击时，我可以从窗口底部射击多达 10 个粘土鸽（球）。在右键单击我“射击”，如果我击中一只鸽子，它就会从屏幕上移除。

但是，我注意到有时右键单击没有被拾取。这不一定是当屏幕上有很多事情发生的时候，尽管在一切开始之前从来没有开始。在最坏的情况下，可能需要单击 3 或 4 次才能注册。

我猜我在代码中做了一些明显错误的事情，但我不确定是什么。我的第一个想法是每帧循环遍历每个对象以重新计算它们的位置或检查它们是否被“射击”的 for 循环？他们会“阻止”鼠标监听器吗？！

欢迎任何有关如何调试的提示！

****** *** ** *** ** ******编辑****** ** *** ** *** ** *** *****

 **好的，我已经采纳了下面给出的非常好的建议，并将代码简化为重现错误的最小外壳。我想我的脑海里已经有了所有的 for 循环和导致问题的复杂性，这就是我在第一个代码中包含这么多内容的原因。

所以碰巧我可以用几乎没有代码来重现这个错误，但同时它的错误要温和得多。使用下面的代码，我只有基本的小程序和鼠标侦听器，右键单击控制台中的计数增量并将其值打印到屏幕上。这在大多数情况下都可以正常工作，但时不时地，右键单击会“丢失”并且未注册。

在整个课程中，有时我可能会出现 3 次或 4 次或更多的右键单击序列未注册，因此错误更加明显。无论如何代码如下，这次只有一个类：

主类代码：

```
package javacooperation;

import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.net.*;

public class ClayPigeonGame extends Applet implements Runnable, MouseListener {
    //counters and flags for debugging
    private boolean flag = true;
    private int click_count = 0;
    private boolean game_running;

    public void init(){
        //set boolean for while loop
        game_running=true;
        addMouseListener(this);
    }
    public void start() {
        //threading this applet.. why?
        Thread th = new Thread(this);
        //does this call the run method in the class?
        th.start();
    }

    public void stop(){
        game_running=false;
    }

    public void destroy() { }

    public void run(){
        while(game_running) {
            //updatePigeonPosition();
            repaint();
            try{
                //stop thread for 20 milliseconds
                Thread.sleep(20);
            } catch (InterruptedException ex){ }
        }
    }

    public void paint(Graphics g){  }

    public void mouseClicked(MouseEvent e) {
            switch (e.getButton()){
                case MouseEvent.BUTTON1:
                case MouseEvent.BUTTON2:
                    break;
                case MouseEvent.BUTTON3:
                    click_count ++;
                    System.out.println("Right click count: " + click_count);
                    break;
                default:
                    break;
            }
    }
    //all the mouse listening events required because we implemented MouseListener
    public void mouseReleased(MouseEvent e) { }
    public void mouseEntered(MouseEvent e) { }
    public void mousePressed(MouseEvent e) { }
    public void mouseExited(MouseEvent e) { }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:21:40.750

我猜你的代码可能会干扰鼠标点击检测时间，因为点击实际上既是按下又是具有正确边界的释放等。你是否尝试过不使用单击的回调，而是使用按下的（移动代码改为`mousePressed`）？**

# asp.net-mvc - MVC Routes/RouteDebugger 在部署到 IIS7 时工作，但在 Cassini 中不工作

> ID：10471984
> 
> 赞同：2
> 
> 时间：2012-05-06T16:01:55.813
> 
> 标签：asp.net-mvc, iis-7

我目前正在开发一个 MVC3 应用程序，在与一些路线斗争后，注意到一些奇怪的行为：

*   我添加了新路由，但是当我通过 Visual Studio 2010 在 Cassini 中使用 F5 运行应用程序时，这些并没有反映出来。如果我将相同的代码部署到运行 IIS7 的服务器（具有相同的 web.config），我的新路由将起作用。

*   我已经安装了 Phil Haack 的 RouteDebugger 工具。web.config 设置为启用此功能，但在通过 Visual Studio 2010/Cassini 运行我的网站时不显示。当使用 IIS7 部署到远程服务器时，它可以正常工作 - 再次，相同的配置文件。

有什么想法吗？我缺少一些配置/设置选项吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:01:16.907

看起来是一个奇怪的缓存问题。在与此斗争了一天之后，我偶然打开了同一应用程序的另一个分支（主），效果很好。

执行了反向/正向集成，主分支工作正常，开发分支仍然不会显示更改。

对比了一下，确实是一模一样的。

是否从 TFS 获得“获取特定版本”，覆盖所有内容，问题仍然存在。

最后，我从本地驱动器中删除了两个分支，然后执行了获取特定版本，突然一切正常。奇怪的是，这解决了这个问题，因为它迫使所有 bin/obj 文件被清除（尽管理论上它们应该已经重建，因为我正在执行重建解决方案）。

总而言之，这是一个非常奇怪的问题，所以我想我会发布这个，以防万一有人遇到同样的问题，考虑到调试的难度。

# php - 十进制和基数 36 之间的转换

> ID：10471991
> 
> 赞同：5
> 
> 时间：2012-05-06T16:02:32.937
> 
> 标签：php, base36

我想使用 PHP 转换 base 36 中的数字。该函数`base_convert`不工作，因为我想转换大数：如果我再次将它从基数 36 转换为十进制，我不会得到我的初始数字。

我尝试了多个网站上给出的一些功能，但我从来没有得到相同的结果。此外，这两个网站（在 Javascript 中）给出了相同的结果：

*   [http://www.unitconversion.org/numbers/base-10-to-base-36-conversion.html](http://www.unitconversion.org/numbers/base-10-to-base-36-conversion.html)
*   [http://www.translatorscafe.com/cafe/units-converter/numbers/calculator/decimal-to-base-36/](http://www.translatorscafe.com/cafe/units-converter/numbers/calculator/decimal-to-base-36/)

例如`1010701001118000000000000000`必须转换为`3IZS0ZE1RQ68W8SSW4`.

这是我尝试过的功能（并且不起作用）：

*   [http://www.php.net/manual/fr/function.base-convert.php#34510](http://www.php.net/manual/fr/function.base-convert.php#34510)
*   [http://www.php.net/manual/fr/function.base-convert.php#106546](http://www.php.net/manual/fr/function.base-convert.php#106546)
*   [http://www.tonymarston.net/php-mysql/showsource.php?file=converter.php](http://www.tonymarston.net/php-mysql/showsource.php?file=converter.php)
*   [http://www.geoffray.be/blog/php/convertir-des-nombres-en-base-62](http://www.geoffray.be/blog/php/convertir-des-nombres-en-base-62)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T16:40:41.893

这里有两个使用 Wikipedia 上的算法的简单函数，同时使用 bcmath 来计算非常大的数字：

```
function fromDecimalToBase($in, $to) {
    $in = (string) $in;
    $out = '';

    for ($i = strlen($in) - 1; $i >= 0; $i--) {
        $out = base_convert(bcmod($in, $to), 10, $to) . $out;
        $in = bcdiv($in, $to);
    }

    return preg_replace('/^0+/', '', $out);
}

function fromBaseToDecimal($in, $from) {
    $in = (string) $in;
    $out = '';

    for ($i = 0, $l = strlen($in); $i < $l; $i++) {
        $x = base_convert(substr($in, $i, 1), $from, 10);
        $out = bcadd(bcmul($out, $from), $x);
    }

    return preg_replace('/^0+/', '', $out);
} 
```

但是，我得到`3izs0ze1rq66tifrpc`了您提供的号码 - 也许您的转换是错误的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T16:23:08.177

[http://www.pgregg.com/projects/php/base_conversion/base_conversion.php](http://www.pgregg.com/projects/php/base_conversion/base_conversion.php)

本页向您展示如何在不同的基数之间转换任意长度的数字。我试过你的例子，看起来它在两个方向上都有效。**可用 PHP 编写的源代码**。

# ruby - 散列缺失值，抛出异常

> ID：10471993
> 
> 赞同：0
> 
> 时间：2012-05-06T16:02:38.070
> 
> 标签：ruby

我有一个看起来像这样的哈希：

```
items:
    item:
        attribute_a: cheese
        attribute_b: bacon
    item:
        attribute_a: salmon
    item:
        attribute_a: mushrooms
        attribute_b: steak 
```

我想获得 的值`attribute_b`，我正在使用以下内容：

```
if (result['attribute_b'])
  // do something
end 
```

但是，如果`attribute_b`丢失，我会收到错误消息：

```
The Identifier specified does not exist, undefined method '[] for nil:NilClass' 
```

检查是否`attribute_b`存在的（最佳）正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:07:50.373

看起来好像不是在访问属性时收到错误`'attribute_b'`，而是因为`result`是 nil。

```
The Identifier specified does not exist, undefined method [] for nil:NilClass` 
```

它是说你在`[]`nil 值上调用该方法。您唯一调用“ `[]`”的是`result`。

一般来说，您访问的方式`'attribute_b'`是可以接受的——我可能会更具体地说：

```
if (result && result.has_key? 'attribute_b')
 // do something
end 
```

这将确保`result`存在以及确保属性不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:12:41.003

首先，您的 YAML 结构看起来很糟糕（是 YAML 吗？）。您不能有一个包含多个元素的散列 key `item`，因为 key 必须是唯一的。您应该改用数组。

我建议您在此处按照以下方式构建 YAML：

```
items:
  -
    attribute_a: cheese
    attribute_b: bacon
  -
    attribute_a: salmon
  -
    attribute_a: mushrooms
    attribute_b: steak 
```

然后你可以做

```
require 'yaml'
result = YAML.load(File.open 'foo.yml')
result['items'][0]['attribute_b']
=> "bacon" 
```

# php - php 在包含 '\t' 、 '\0' 等字符的字符串上爆炸

> ID：10471998
> 
> 赞同：2
> 
> 时间：2012-05-06T16:03:34.820
> 
> 标签：php

我的代码：

```
$string="655:47 Text: 0 n\some more text here\t\2\r\3\tl\0\f0\\f1\\f2\\a0\0\a1\0\a2\255";
$a=explode("\\",$string);
var_dump($a); 
```

虽然我得到的输出是：

```
array(7) {
  [0]=>
  string(33) "655:47 Text: 0 n"
  [1]=>
  stringl20) "some more text
0"
  [2]=>
  string(2) "f1"
  [3]=>
  string(2) "f2"
  [4]=>
  string(3) "a0"
  [5]=>
  string(3) "a1"
  [6]=>
  string(3) "a2­"
} 
```

我想在找到的每个 '\' 聊天中拆分字符串（但保留所有值）虽然我想让函数爆炸并正常工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:11:31.977

使用单引号而不是双引号，

```
$string='655:47 Text: 0 n\some more text here\t\2\r\3\tl\0\f0\\f1\\f2\\a0\0\a1\0\a2\255';
$a=explode('\',$string);
var_dump($a); 
```

在 php 中，如果你使用单引号，那么像 '/t' 等特殊字符会失去它们的含义并表现为纯字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:10:36.597

它工作*得*很好。您只是没有看到所有不可打印的字符。

不完全清楚您是否打算在消息中使用类似`\n`或的字符`\t`，但是当在双引号 ( `"`) 中使用时，您将转义为特殊字符。例如`"\t"`是一个实际上包含制表符的字符串，并且`\n`是一个换行符。

如果您不想要这些字符，只需将这些双引号更改为单引号：

```
$string='655:47 Text: 0 n\some more text here\t\2\r\3\tl\0\f0\\f1\\f2\\a0\0\a1\0\a2\255'; 
```

如果你这样做，你会得到以下输出：

```
array(17) {
  [0]=>
  string(16) "655:47 Text: 0 n"
  [1]=>
  string(19) "some more text here"
  [2]=>
  string(1) "t"
  [3]=>
  string(1) "2"
  [4]=>
  string(1) "r"
  [5]=>
  string(1) "3"
  [6]=>
  string(2) "tl"
  [7]=>
  string(1) "0"
  [8]=>
  string(2) "f0"
  [9]=>
  string(2) "f1"
  [10]=>
  string(2) "f2"
  [11]=>
  string(2) "a0"
  [12]=>
  string(1) "0"
  [13]=>
  string(2) "a1"
  [14]=>
  string(1) "0"
  [15]=>
  string(2) "a2"
  [16]=>
  string(3) "255"
} 
```