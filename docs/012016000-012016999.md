# StackOverflow 问答 12016000-12016999

# apache - 需要帮助将静态内容重写到我的 CDN

> ID：12016001
> 
> 赞同：0
> 
> 时间：2012-08-18T05:03:52.313
> 
> 标签：apache, .htaccess, mod-rewrite, cdn

我正在寻求帮助，将一个子目录中的所有静态内容重写到我的 CDN URL。棘手的部分是我希望在保持浏览器中的 URL 仍然显示我的主 URL 的同时发生这种情况。显然，我还需要阻止它从 CloudFront 重写请求到我的服务器。

到目前为止，这是我在寻找有关此问题的一些答案时抓起另一篇文章的内容。不确定 HTTP:Via 行是什么：

```
# Rewrite home page to launch countdown timer
RewriteRule ^$  /get-ready [L]

# Rewrite static stuff to CDN
RewriteCond %{HTTP:Via}   !\.s\.worldcdn\.com
# Flash wont work on cross-domain by default
RewriteCond $1            !^.swf$ [NC]
RewriteCond $1            "\.(jpe?g|gif|png|bmp|ico|js|css|pdf|docx?|xlsx?|ppt|rar|zip|tar|gz|tgz|bz2|flv|avi|mov|wmv|mp3|wav|xml|txt)$" [NC]
RewriteRule ^/get-ready/(.*)           http://cdn.domain.com/get-ready/$1 [L] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:52:09.443

保留 URL 的唯一方法是代理内容。
并且通过通过单个网络服务器从 CDN 提供所有文件，从而破坏了 CDN 的整个概念......

所以请不要打扰，另外，您可以使用 301 Permanently Moved 将静态文件重定向到幕后的 CDN。

# javascript - javascript变量冲突

> ID：12016003
> 
> 赞同：1
> 
> 时间：2012-08-18T05:04:28.203
> 
> 标签：javascript, unobtrusive-javascript

我的应用程序中包含 2 个带有脚本标记的 javascript 文件。

我在两个脚本中都被声明为相同的变量。

现在我的问题是，如果我运行应用程序，两个脚本的变量将相同或每个脚本的变量不同。

脚本 1（包括外部文件）。

```
var myvariable=10;
function(){
...
} 
```

脚本 2（外部文件）

```
var myvariable=20;
function(){
...
} 
```

应用程序的两个变量是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:08:16.113

这取决于范围。

如果两个变量都是全局变量（即：window.var），那么最后一个变量将覆盖第一个同名变量。

研究闭包来解决这个问题（如果你使用冲突的全局变量）。

祝你好运 ！！

**对您更新的问题：**
myvariable 在全局范围内，脚本 2 执行后 myvariable 将为 20。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:10:28.277

如果您全局声明一个变量，然后再次声明一个具有相同名称的变量，那么它将覆盖该变量。

# javascript - 在javascript中处理Null

> ID：12016004
> 
> 赞同：0
> 
> 时间：2012-08-18T05:04:54.100
> 
> 标签：javascript, null

`null`在处理JavaScript 中的值时，我遇到了一些困难。我的 JavaScript 中有两种情况，其中对象可以是`null`或可以具有其他值，所以我这样做：

```
if(feild_values != null || typeof(feild_values) != 'null') {
    alert(feild_values.id[i-1]);
} 
```

但是，Firebug 给了我一个错误说：

```
TypeError: feild_values is null alert(feild_values.id[i-1]); 
```

我该如何管理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T05:08:57.063

删除 || typeof(feild_values) != 'null'

你不需要它并且 typeof(null) 不是'null'，它的'object'

可以简化为：

```
if (feild_values) {
 ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:12:00.283

您还应该寻找 typeof yourVar == "undefined"

# python - 在python中将空字符添加到字符串

> ID：12016005
> 
> 赞同：12
> 
> 时间：2012-08-18T05:05:36.610
> 
> 标签：python

我的清单为：

```
['t','e','s','t','s','t','r','i','n','g'] 
```

如何在每个字符串后添加空字符`t`, `e`, `s`, `t`, `s`, `t`, `r`, `i`, `n`, `g`?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-18T05:08:19.953

列表理解。

```
[c + '\0' for c in S] 
```

但它闻起来像你想要 UTF-16LE 代替。

```
u'teststring'.encode('utf-16le') 
```

# c# - 如何增加 ToolTip 显示时间？

> ID：12016007
> 
> 赞同：12
> 
> 时间：2012-08-18T05:06:11.480
> 
> 标签：c#, asp.net, visual-studio-2008, time, tooltip

我有一个 GridView，在其 RowDataBound 事件中，我将 ToolTip 分配如下：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    try
    {
        if (gv.HeaderRow != null && e.Row.RowType == DataControlRowType.DataRow)
        {  
            e.Row.ToolTip = "Remarks: " + ((Label)e.Row.FindControl("lblRemarks")).Text;
        }
    }
    catch (Exception ex)
    {
        BussinessLayer.RIBOException.Instance.HandleMe(this, ex);
    }
} 
```

在这里，我想延长 ToolTip 的显示时间。这个怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T05:11:58.450

您需要使用`ToolTipService`特别是[`ShowDuration`附加的属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.showduration)。

设置工具提示后，您应该能够执行以下操作：

```
ToolTipService.ShowDuration(e.Row, 10000) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T05:09:50.297

设置 ToolTipService.ShowDuration 属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-14T08:25:35.693

```
<Button x:Name="btnHelp" ToolTip="For new paragraph : press Enter &#x0a;For new line : press Shift+Enter">
 <ToolTipService.ShowDuration>15000</ToolTipService.ShowDuration>
</Button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-05T08:56:34.250

在 XAML 中，您可以这样做：

```
<MyWpfElement ... ToolTipService.ShowDuration="60000" /> 
```

该值以毫秒为单位。示例代码最多显示一分钟的工具提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-01T15:34:06.523

这有效，提供间距和其他格式选项。上述接受的选项不起作用

```
<div runat="server" class="tooltip" id="divHowTo" style="display: inline-block; width:75px" data-tip="If you have problems: &#013;&#010;
        1.) Enter a users id &#013;&#010;
        2.) Choose a corresponding domain for the pin  &#013;&#010;
        3.) Verify resolved name is correct  &#013;&#010;
        4.) (If adding) Browse for Picture (jpg/png format) (square resolution) (240px X 240px or larger)  &#013;&#010;
        5.) Choose a button to add or delete or view or save or clear " >
    <asp:Image ID="imgHowTo" runat="server" ImageUrl="Images/howTo1s.jpg"  Height="73px" Width="73px"/>

    </div> 
```

与（在 <style> 和 </style> 之间）的类

```
 .tooltip {
                display:inline-block;
                width:64px;
                height:64px;
                position:relative;
                margin:25px;
                background-repeat: no-repeat;
                background-position:50% 50%;
                background-size:100%;
                text-align:center;
                line-break:auto;
                white-space:pre-line;
            }
    .tooltip:hover:after {
                display:inline-block;
                position:absolute;
                top:-25px;
                left:50%;
                height:400px;
                content: attr(data-tip);
                font:bold 10px/14px Arial, sans-serif;
                background:#f0f0f0;
                color:#333;
                white-space:pre-line;
                border:1px solid #665;
                padding:2px 4px;
                width:150px;
                margin:0 0 0 -75px;
                border-radius:3px;
                line-break:auto;
            }
    .tooltip:hover:before {
                border-top: 10px solid #665;
                border-top: 10px solid #665;
                margin-top: 5px;
                content: "";
                position: absolute;
                border-left: 5px solid transparent;
                border-right: 10px solid transparent;
                top:-15px;
                left: 50%;
                margin-left: -10px;
                line-break:auto;
                white-space:pre-line;
            } 
```

# asp.net-mvc - 如何让 ASP.NET MVC ModelState.IsValid() 了解我对模型所做的更改

> ID：12016010
> 
> 赞同：1
> 
> 时间：2012-08-18T05:06:32.153
> 
> 标签：asp.net-mvc, entity-framework-4, asp.net-mvc-4

我的控制器中有一个自动生成的 Create 操作，我做了一些改动，我必须在调用 ModelState.IsValid() 之前修改提交的模型。

但是 IsValid() 仍然说它失败了，我认为这是因为它关闭了接收到的参数，并且忽略了我所做的更改？更改内容后如何验证它？

谢谢

控制器代码：

```
[HttpPost]
        [CaptchaValidator]
        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Register(User user, bool captchaValid)
        {
            user.prepareUserForCreation();
            if (ModelState.IsValid && captchaValid)
            {
                db.Users.Add(user);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            ViewData["captchaValidationMessage"] = captchaValid ? "" : "Your words didn't match, please try again";

            return View(user);
        } 
```

准备方法：

```
public void prepareUserForCreation()
        {
            this.DateCreated = DateTime.Now;
            this.LastSeen = DateTime.Now; //TODO remove this
            this.IsActivated = true; //TODO remove this
        SecurityHelper.HashPassword(this);
        } 
```

基本上它说的密码是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:14:54.053

您必须`ModelState.Clear();`在使用 prepare 方法之前使用，然后调用`TryValidateModel(user)`以验证它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T05:47:22.500

而不是使用`ModelState.IsValid`，尝试使用`TryValidateModel(user)`。我相信这将在您准备好模型后手动执行模型验证。

# ruby - 在 Ruby 的类声明中将值传递给父级

> ID：12016020
> 
> 赞同：5
> 
> 时间：2012-08-18T05:07:20.030
> 
> 标签：ruby

我正在观看 Jim Weirich 的截屏视频，他开始做这样的事情：

```
class Subuser < User("Type")
end 
```

Ruby 是否允许您在定义父类时传递参数？我想不出一个实际可行的例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T05:40:32.480

你可以通过声明一个`User`接受一个参数并返回一个类的方法来做到这一点：

```
class Admin
end

class Client
end

def User(arg)
  case arg
    when :admin
      Admin
    when :client
      Client
  end
end

class Subuser < User(:admin)
end

Subuser.superclass
# => Admin 
```

# python - 在 Linux 上将终端程序从 Bash 迁移到 Python

> ID：12016029
> 
> 赞同：1
> 
> 时间：2012-08-18T05:07:59.673
> 
> 标签：python, bash, serial-port

我正在处理一个工业环境，我必须在现场记录来自串行设备的读数。我当前的设置涉及连接到 Moxa 5150A 或 5130 串行设备服务器的设备，该服务器通过有线或无线方式连接到我的网络，具体取决于各个设备的位置。目前，我依赖硬件供应商提供的软件来管理数据收集。当前的软件是基于windows X86的，并且由于以前的硬件故障而在我们购买的新硬件上造成了无穷无尽的麻烦。我专门选择 Moxa 串行服务器是因为它们的 linux 驱动程序和兼容性。该设备通过 RS-422（4 线半双工）7 位 1-stop 奇校验和 NO 流控制进行通信，除非请求，否则不会发送任何信息。

我正在开发自己的解决方案，将信息存储在数据库（可能是 MySQL）中。就终端通信而言，这是两部分。我必须发送请求并接收响应。

迄今为止，我已将串行服务器的 Moxa 驱动程序安装到我的 linux 服务器上。我编写了一个从 /dev/ttyrXX 设备读取的 bash 脚本，解释输入并将信息加载到 mysql 数据库中。

```
 while read line
      do
      something something....
      done < /dev/ttyrXX 
```

我仍在解决一些小的脚本错误，例如在设备脱机时正确重启，然后又重新联机以及其他此类问题，但我的脚本正在读取和记录我的数据，这完全符合我的需要。

该解决方案依赖于两个因素。

1) Moxa 设备支持 FIFO 并允许同时进行多个连接

2) 供应商提供的在单独的 Windows 机器上运行的软件当前正在提交信息请求。

我需要一起删除基于 Windows 的软件。我已经编写并测试了一个脚本，该脚本打印到 /dev/ttyrXX 发出我想要的请求并收到适当的响应，并按照我的第一个脚本的需要记录它们。

```
 some list of things
     for x in list
     do         
     printf "request" > /dev/ttyrXX
     done 
```

我在使用供应商提供的软件时遇到的主要问题之一是它对接收对每个请求的及时响应的硬编码依赖性。这会产生许多问题，包括完全冻结窗口和设备在不合时宜的时间停止服务时崩溃。

我的两个脚本协同工作以明显更好的间隔收集数据，并且人工干预更少。

这是我的问题。我可以在 Python 中使用什么方法来获得与我的 Bash 脚本相当的结果？

我一直无法找到不需要我打开/关闭文件的与 printf 或 cat 等效的 Python。此外，我查看过的每个终端界面都有内置的或必需的等待响应或在放弃之前阅读这么长时间。我确定那里存在某些东西，我几乎没有运气找到它。我承认我是 Python 的新手，并且只写了几行代码来探索它的能力。

让我说得很清楚。我想写信给我的终端，而不用担心我在写的时候（使用我不在乎的线程或单独的脚本）。我想从我的终端上阅读，而不用担心我的下一段文字何时到来。（我并不是在暗示一个永无止境的循环，但我确实需要它来简单地等待输入）。我希望/需要我的写入和读取完全独立于彼此，而不关心对方昨天、现在或下周在做什么。

先感谢您。

如果有必要，我将能够提供更详细的代码，但是我觉得我在搜索中更需要指导而不是修复错误。虽然我仍然完全愿意接受建议和“永远不要这样做......因为这个......”类型输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:11:13.200

听起来您想打开一个文件进行读/写并依次读取每一行。

```
with open(..., 'r+') as dev:
  for line in dev:
     ...
    print >>dev, 'foo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:10:36.177

扩展伊格纳西奥所说的内容。听起来最简单的解决方案是让两个脚本在启动时启动。

其中一个打开打开 tty 设备并永远收听它。这是一个阻塞读取。它继续寻找新的输入行，直到它收到（或到达）EOF。在这种情况下，这可能永远不会发生。它看起来像这样：

```
# tty reader

def listen_to_device():
    with open('/dev/ttyXX', 'r') as tty:
        for line in tty:
            create_db_record(line)

if __name__ == '__main__':
    listen_to_device() 
```

要使其成为完整的工作代码，您唯一需要实现的是“create_db_record”函数。

第二个脚本可能非常相似。但也许它会继续在目录中寻找包含命令的特定文件。当它找到任何东西时，它会一个接一个地将它们发送到 tty 设备。

```
# tty controller

import os
import shutil
import time

def wait_for_commands():
    while True:
        if os.path.exists('/tmp/commands.txt'):
            with open('/tmp/commands.txt', 'r') as c:
                for command in c:
                    send_command(command)
            shutil.move('/tmp/commands.txt', 'tmp/proccesed-' str(datetime.utcnow()))
        time.sleep(1)

def send_command(command):
    with open('/dev/ttyXX', 'w') as tty:
        # maybe do some additional changes to command here?
        tty.write(command)

if __name__ == '__main__':
    wait_for_command() 
```

您可以在 send_command 函数中添加一些额外的处理代码，以便您在 commands.txt 文件中的指令变得非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T08:34:33.953

我会推荐 pyserial （你可以使用它非阻塞），但我不知道它是否正确处理任何不是 RS232 的东西。

> 我一直无法找到不需要我打开/关闭文件的与 printf 或 cat 等效的 Python。

通常，您只需打开文件并调用 .write() 函数（相当于 printf）或 .readline() 函数。这有什么问题？当您在 shell 脚本中使用“cat”或“echo”或管道时，这也会在后台打开和关闭文件。如果你真的需要重新打开文件出于某种有线原因（例如内核驱动程序出现问题），那么你可以编写一个 python 函数来做到这一点。

> 此外，我查看过的每个终端界面都有内置的或必需的等待响应或在放弃之前阅读这么长时间。

串行库通常*只有读取*超时，而不是写入超时（但对于写入，我认为内核驱动程序通常有一个缓冲区，如果你写得太快，理论上可能会溢出......）。

我没有看到这个超时对你来说是个问题吗？如果你可以用两个独立的python程序打开终端，一个写，一个读，你的问题就解决了，对吧？

您应该注意的是，您可以对文件执行阻塞或非阻塞 I/O。默认情况下，一切都会被阻止。您可以使用*select()*系统调用（也来自 Python）来解决线程或单独进程的所有需求。只要文件可以在没有阻塞的情况下读取/写入，或者出现异常（例如，设备消失）或超时（如果您设置了一个），Select 就会返回。

# ios - 缓存 executeFetchRequest 的结果

> ID：12016033
> 
> 赞同：0
> 
> 时间：2012-08-18T05:08:23.560
> 
> 标签：ios, core-data

我的视图控制器中有一个方法'books'，它获取核心数据中的所有书籍并返回它们的数组。我经常依赖 self.books - 当我需要知道它在某个索引处是哪本书、有多少本书等时，books 方法会重新获取结果。

我会通过将这些结果缓存在 iVar 中来获得任何性能改进吗？绝大多数时候我都知道 self.books 的结果不会改变（objectAtIndex、count 等）。我可以添加第二个布尔 iVar 'booksNeedRefresh' 来充当脏标志，并且仅当我添加/删除一本书时才将其设置为 true。然后 self.books 可以检查此标志并仅在必要时重新获取。

我想我的问题是：

1.  来自核心数据的每个获取请求是否都会带来不可忽略的性能影响？
2.  缓存 + 脏标志是一个明智的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:03:51.860

我认为你走错了路。Core Data 已经为您提供了大量的内存管理，因此不需要“脏”标志等。

最明显的解决方案是使用`NSFetchedResultsController`. 它的主要目的是在表格视图中显示数据，同时保持较小的内存占用——但它也可以用于其他目的。您的 books 数组将变为`_fetchedResultsController.fetchedObjects`，FRC 将负责内存和提取之间的优化。

原则上回答您的问题，上述权衡正是问题所在，因此您对此的思考是正确的。频繁提取确实会影响性能。

# python - 在 Safari 中使用 Twython 获取授权令牌时出现问题

> ID：12016048
> 
> 赞同：2
> 
> 时间：2012-08-18T05:10:57.340
> 
> 标签：python, django, twitter, oauth, twython

我正在使用 Twython 为使用 Django 构建的网站实现 OAuth 功能。我希望用户能够使用他们的 Twitter 凭据进行注册和登录。

通过稍微调整 Twython Git 存储库中的示例，我创建了用于登录和注册 twitter 信息的基本视图。

我的问题是用户目前可以在 Firefox 和 Chrome 中使用 Twitter OAuth 注册，但不能在 Safari 中注册。我实现此功能的观点是：

```
def begin_auth(request):
        twitter = Twython(
        twitter_token = TWITTER_KEY,
        twitter_secret = TWITTER_SECRET,
        callback_url = request.build_absolute_uri(reverse('portnoy.views.thanks'))
    )
    # Request an authorization url to send the user to...
    auth_props = twitter.get_authentication_tokens()

    # Then send them over there, durh.
    request.session['request_token'] = auth_props
    return HttpResponseRedirect(auth_props['auth_url'])

def thanks(request, redirect_url='/'):
     c = RequestContext(request)
     twitter = Twython(
         twitter_token = TWITTER_KEY,
         twitter_secret = TWITTER_SECRET,
         oauth_token = request.session['request_token']['oauth_token'],
         oauth_token_secret = request.session['request_token']['oauth_token_secret']
     )

    # Retrieve the tokens we want...
    authorized_tokens = twitter.get_authorized_tokens()
    request.session['request_tokens'] = authorized_tokens
    debug('thanks', request.session['request_tokens'])

    user = User.objects.filter(username=authorized_tokens['screen_name'])
    if user.exists():
        user = user[0]
        user.backend='django.contrib.auth.backends.ModelBackend'     
        auth.login(request,user)
    else:
        return render_to_response('twitter_register.html', c)   
    return HttpResponseRedirect(redirect_url) 
```

在第二个视图中，谢谢，我获取了 authorized_tokens 并将它们存储在会话中，因此它们可以在未注册用户指向的 twitter_register.html 页面中轻松访问，从而允许未注册用户使用他们的 Twitter 信息进行注册。

下面提供了 Safari 中直到失败行的 twitter_register 视图代码：

```
def twitter_register(request):
    c = RequestContext(request)
    if request.method == 'POST':
        email = request.POST.get('email')
    password = request.POST.get('password')
    if not SafeContact.objects.filter(email=email).exists():
        return HttpResponseRedirect('/')
    if (User.objects.filter(email=email).exists()):
        c['warning'] = "Looks like that email is already in use"
        return render_to_response('twitter_register.html', c) 
    #debug('twitter_register', request.session['request_tokens'])
    twitter = Twython(
        twitter_token = TWITTER_KEY,
        twitter_secret = TWITTER_SECRET,
        oauth_token = request.session['request_tokens']['oauth_token'],
        oauth_token_secret = request.session['request_tokens']['oauth_token_secret']
    )
    debug('twitter_register', request.session['request_tokens'])
    twitter_user_dict = twitter.showUser(screen_name=request.session['request_tokens']['screen_name']) 
```

所有这些都适用于 Firefox 和 Chrome，但在 Safari 中失败。特别是，在 Safari 中，此代码在 twitter_register 的最后提供的行中失败：

```
twitter.showUser(screen_name=request.session['request_tokens']['screen_name']). 
```

产生以下错误：

```
The error is KeyError: 'screen_name'. 
```

调试语句 debug('thanks', request.session['request_tokens']) 在 Firefox 和 Chrome 中按预期打印了 authorized_tokens，但由于某种原因在 Safari 中打印了 2x。第一次打印时，它按预期显示授权令牌的字典，但在第二次打印时，它显示

```
thanks: {'<?xml version': '"1.0" encoding="UTF-8"?>\\n<hash>\\n  <error>Invalid / expired Token</error>\\n  <request>/oauth/access_token</request>\\n</hash>\\n'} 
```

我很困惑，因为这似乎只发生在 Safari 中（我正在测试 v. 5.1.5）。

任何有关如何解决此问题的建议将不胜感激。感谢您花时间看这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:45:45.283

“谢谢”视图似乎被执行了两次。

您的 twitter_register 视图中的以下几行是否可能导致它？

```
if not SafeContact.objects.filter(email=email).exists():
        return HttpResponseRedirect('/') 
```

# wordpress - 除了 Ajax 之外，在不减慢页面加载的情况下，将 rss 提要注入网页的其他方法是什么？

> ID：12016052
> 
> 赞同：0
> 
> 时间：2012-08-18T05:11:44.907
> 
> 标签：wordpress, rss, seo, response-time

我在这里处于某种艰难的境地。我需要在不减慢页面加载速度的情况下将来自多个 rss 提要的数据加载到我的页面中。我第一次使用 Ajax 这样做，但我的老板坚持认为它不应该影响页面的 seo 排名。
因此，我认为 Ajax 在这里是不可能的。现在我需要尽快找到解决此问题的方法。
其他 rss 源都是 wordpress 并且位于同一台服务器上（它们实际上是我们的），我可以直接访问数据库。
我想也许我可以建立自己的数据库连接并查询数据，但是如果没有内置函数和类的 wordpress，这有点困难。
我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:36:46.193

Nettuts 对使用 SimpleXML 解析和显示 rss 提要进行了很好的截屏。它应该为您提供在服务器端加载所有内容所需的内容，因此 Ajax 不会损害您的 SEO。

[http://net.tutsplus.com/articles/news/how-to-read-an-rss-feed-with-php-screencast/](http://net.tutsplus.com/articles/news/how-to-read-an-rss-feed-with-php-screencast/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:45:15.213

我建议使用 javascript webworkers，它将使用后台线程获取 rss 提要数据。它不会干扰您的 UI 线程，从而保持良好的用户体验。我什至使用网络工作者实现了搜索和排序。[但是请在caniuse](http://caniuse.com/webworkers)上检查不同浏览器上 web worker 的兼容性。此外，根据维基百科，IE10 支持它。所以，如果你能让它发挥作用，它就能为你创造奇迹。

# html - 缩小的图像在 Firefox、IE9 和 Opera 中没有抗锯齿，但在 Chrome 和 Safari 中是

> ID：12016053
> 
> 赞同：0
> 
> 时间：2012-08-18T05:11:50.553
> 
> 标签：html, css, internet-explorer, firefox, opera

[http://i.imgur.com/JWXsA.png](http://i.imgur.com/JWXsA.png)

Chrome 和 Safari 可以很好地呈现缩小的图像，但不能在 Firefox、IE9 或 Opera 上。我如何在不自动执行的浏览器上对图像进行抗锯齿处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:08:06.417

您唯一的选择是将图像加载到画布中并自己将其下采样到新的较小的画布上。但是，这会将您限制为同源图像。

另一方面，你应该问问自己，努力是否值得？这些浏览器的用户可以很好地应对成千上万的其他网站，那么为什么您需要做一些不同的事情呢？

# scanf - 在 C 中使用 fscanf 分隔字符串和浮点数

> ID：12016058
> 
> 赞同：0
> 
> 时间：2012-08-18T05:12:20.473
> 
> 标签：scanf

我正在尝试从包含一行数据格式为 GOOG|588.88 的文件中读取

我想将 GOOG 复制到股票行情中，并将 588.88 复制到浮动股票价格中

我编写了以下代码来完成 fr 是文件指针的工作

```
char tempprice[10]; 
char ticker[10];
fscanf(fr,"%[^|]|%[^\n]\n",ticker,tempprice);
float stockprice = stof(tempprice); //change string to float 
```

该代码适用于股票行情，但不适用于股票价格。换句话说，GOOG 被成功复制到ticker，而 588.88 没有。任何人都可以帮助我吗？

有没有更好的代码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:20:35.047

我想我会：

```
char tempprice[10]; 
char ticker[10];
char tmp_chr = fgetc(fr);
char *tmp_ptr = ticker;
while (tmp_chr != '|')
{
  *tmp_ptr++ = tmp_chr;
  tmp_chr = fgetc(fr);
}
*tmp_ptr = '\0'
tmp_chr = fgetc(fr);
tmp_ptr = tempprice;
while (tmp_chr >= '0' && tmp_chr <= '9' || tmp_chr == '.')
{
  *tmp_ptr++ = tmp_chr;
  tmp_chr = fgetc(fr);
}
float stockprice = stof(tempprice); //change string to float 
```

……但那只是我。=] 这很奇怪，我喜欢正则表达式，但无法忍受 scanf 机制。还有谁？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:49:56.353

1）我同意user30997：我认为scanf“伪正则表达式”比它的价值更麻烦。恕我直言...

2）但是，我相信这是您正在寻找的解决方案：

```
#include <stdio.h>

int
main (int argc, char *argv[])
{
    char str[] = "GOOG|5.88";
    char price[80], ticker[80];
    int iret = sscanf (str, "%[^|]%*[|]%s", price, ticker);
    printf ("iret=%d, price=%s, ticker=%s...\n",
        iret, price,  ticker);
    return 0;
} 
```

输出：`iret=2, price=GOOG, ticker=5.88...`

# javascript - JavaScript中defineProperty的原型

> ID：12016061
> 
> 赞同：1
> 
> 时间：2012-08-18T05:13:40.473
> 
> 标签：javascript

在 JavaScript 中，您可以使用`Object.defineProperty()`. 我想知道是否可以扩展或使用它的原型来扩展其功能。这是一个例子：

我从一个名为颜色的变量开始：

```
Object.defineProperty(window, 'color', {
    get: function() {
        return [_color.red,_color.green,_color.blue,_color.alpha];
    },
    set: function(val) {
        _color.red = val[0];
        _color.green = val[1];
        _color.blue = val[2];
        _color.alpha = val[3];
    }
}); 
```

这允许我通过将 rgba 数组传入和传出变量来设置和获取颜色。这是我将如何使用它：

```
color = [0,127,255,255];
alert(color);
//alerts [0,127,255,255] 
```

现在我还希望能够通过单独访问每个变量来编辑这些变量。

```
color.r = 255;
alert(color);
//alerts [255,127,255,255] 
```

此刻我陷入了僵局，因为我不知道我能做些什么来创造它。我认为使用`color.prototype.r`或类似的东西会起作用，但我无法做到。有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:25:26.960

您必须创建一个从数组扩展的临时对象来专门执行此操作。

干得好：

```
var __color = {red:0,green:0,blue:0,alpha:1};
function createGetMethod(prop){
    return function(){return __color[prop]};
}
function createSetMethod(prop){
    return function(val){__color[prop]=val};
}
function createDescritorProperty(prop){
    return {
        get: createGetMethod(prop),
        set: createSetMethod(prop)
    }
}

var _color_descriptor = {
    red:createDescritorProperty('red'),
    green:createDescritorProperty('green'),
    blue:createDescritorProperty('blue'),
    alpha:createDescritorProperty('alpha'),
    length:{
        value:4,
        writable:false
    }
}
//setup numbered values
_color_descriptor[0]=createDescritorProperty('red');
_color_descriptor[1]=createDescritorProperty('green');
_color_descriptor[2]=createDescritorProperty('blue');
_color_descriptor[3]=createDescritorProperty('alpha');

var _color = Object.create(Array.prototype, _color_descriptor); //extends array

Object.defineProperty(window, 'color', {
    get: function() {
        return _color;
    },
    set: function(val) {
        _color.red = val[0];
        _color.green = val[1];
        _color.blue = val[2];
        _color.alpha = val[3];
    }
});

window.color = [255,255,255,0];
alert(window.color);
window.color.red=10;
alert(window.color); 
```

希望它有效！:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:13:00.290

仅适用于对象实例，不幸的`prototype`是您没有。如果你有这样的构造函数：

```
function Color(r,g,b,a){
    for (var i=0; i<4; i++)
        this[i] = arguments[i];
} 
```

它可以与

```
Object.defineProperty(Color.prototype, "r", {
    get: function() { return this[0]; } // setter analogous
}; 
```

但是，这些`Color`实例不是数组。您可以给它们一个`length`属性并让它们继承自`Array.prototype`，但它们不会是真正的数组。@Trouts 解决方案有点像这样，我会说这没关系，因为颜色真的不是数组（你不能推送第五个值等）。

`color`另一种方法是使用这些属性扩展从 getter 返回的数组。每次有人访问该值时，您都可以这样做（就像您目前所做的那样，您在 getter 中创建一个新数组），但我建议您应该返回相同的实例，传播任何更改。您当前的属性定义类似于“setColor”和“getCurrentColor”。

所以，实际上你想要两个不同的东西：`Color`每个值具有多个属性的对象（即`0`== `r`）；和一个全局变量的设置器，`color`它接受数组并在相应对象上设置单个值。

```
// version with private values
function Color(r, g, b, a) {
    // r, g, b and a are private-scoped variables
    var desc = {
        "0": {
             get:function(){return r;},
             set:function(val){ if(+val<256&&val>=0) r=+val;}
        },
        …
    }
    // use those property descriptors multiple times
    desc.r = desc[0];
    …
    Object.defineProperties(this, desc);
}
// or version with public and unlimited read/write access to the properties:
function Color(r,g,b,a){
    for (var i=0; i<4; i++)
        this[i] = arguments[i];
}
Object.defineProperties(Color.prototype, {
    r: { get:function(){return this[0];}, set:function(r){this[0]=r;} },
    …
}

// and for both versions we can add array-like methods on the prototype
var cprot = Color.prototype, aprot = Array.prototype;
Object.defineProperty(cprot, "length", {value:4});
// we only need accessor functions here, nothing which changes the array [length]
cprot.map = aprot.map;
cprot.reduce = aprot.reduce;
cprot.slice = aprot.slice;
cprot.join = aprot.join;

// you might want to add other utilities like
cprot.toString = function() {
    return "rgba("+this.join(",")+")"; // using array method from above
};
cprot.getHex = function() {
    function hex(n) { return (n<16?"0":"") + n.toString(16); }
    return "#"+this.slice(0, 3).map(hex).join("");
}; 
```

然后，您的颜色值设置器：

```
function defineColorProperty(obj, prop, color) {
    // again, color is private-scoped
    if (!color || !(color instanceof Color)) color = new Color(0, 0, 0, 0);
    Object.defineProperty(obj, prop, {
        get: function(){ return color; }, // a cool Color instance!
        set: function(val) {
            if (Object(val)!==val) return; // accept objects (including arrays)
            for (var i=0; i<4 && i<val.length; i++)
                color[i] = val[i];
        },
        enumberable: true
    });
    return color;
}

// usage:
> defineColorProperty(window, "color");
Object[Color]: 0, 0, 0, 0
> color = [255, 0, 120, 1];
> color.r = 42;
> color[0]
42
> color = [0, 0];
> ""+color
"rgba(0,0,120,1)"
> var x = color;
> x.b = 255;
> x.getHex()
"#0000FF" 
```

# python - python正则表达式组匹配反'|'

> ID：12016062
> 
> 赞同：0
> 
> 时间：2012-08-18T05:13:44.510
> 
> 标签：python, regex

这是我的代码：

```
import re

p = re.compile('(?P<name>[^|]*)|(?P<desc>[^|]*)')
m = p.match('jack|a good boy')
name = m.group('name')
desc = m.group('desc')
print name  # jack
print desc  # None 
```

我怎样才能得到'|'之后的说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:17:27.363

要匹配 a`|`你必须逃避它。否则，您的模式将匹配第一组或最后一组。但是，不是两者兼而有之。

```
import re

p = re.compile('(?P<name>[^|]*)\|(?P<desc>[^|]*)')
m = p.match('jack|a good boy')
name = m.group('name')
desc = m.group('desc')
print name  # jack
print desc  # a good boy 
```

*请注意，我已经稍微更改了您的代码。刚刚`|`逃到`\|`。*

# hibernate - 休眠错误无法打开连接

> ID：12016073
> 
> 赞同：0
> 
> 时间：2012-08-18T05:16:12.047
> 
> 标签：hibernate

收到以下错误：

> org.hibernate.exception.JDBCConnectionException：无法在 org.hibernate 的 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) 的 org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74) 打开连接。 exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29) 在 org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:420) 在 org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144) 在 org.hibernate .jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:105) 在 org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1561) 在 org.hibernate.loader.hql.QueryLoader.iterate(QueryLoader.java:392) 在org.hibernate.hql.ast.QueryTranslatorImpl.iterate(QueryTranslatorImpl.java:318) 在 org.hibernate.impl.SessionImpl.iterate(SessionImpl.java:1156) 在 org.hibernate.impl.QueryImpl.iterate(QueryImpl) 的 org.hibernate.engine.query.HQLQueryPlan.performIterate(HQLQueryPlan.java:177) .java:46) 在 com.vis.erp.common.reports.accountbooks.vatreport.VatMainMethod.getVatList(VatMainMethod.java:108) 在 com.vis.erp.common.reports.accountbooks.vatreport.VatMainMethod.main(VatMainMethod .java:59) 引起：com.mysql.jdbc.CommunicationsException：通信链路故障reports.accountbooks.vatreport.VatMainMethod.main(VatMainMethod.java:59) 原因：com.mysql.jdbc.CommunicationsException：通信链路故障reports.accountbooks.vatreport.VatMainMethod.main(VatMainMethod.java:59) 原因：com.mysql.jdbc.CommunicationsException：通信链路故障

但没有在程序中使用任何jdbc查询

所以请帮助提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-04T04:51:23.273

提供数据库端口号，`url`您的问题将得到解决，例如：

```
 <property name="hibernate.connection.url">jdbc:sqlserver://localhost:1433;databaseName=abc_db</property> 
```

# iphone - 从另一个类调用 Selector 方法 - NSNotificationCenter

> ID：12016074
> 
> 赞同：2
> 
> 时间：2012-08-18T05:16:20.837
> 
> 标签：iphone, ios, ios4, nsnotificationcenter

我想知道在发布通知时如何调用另一个类中的选择器。我在 tabbarcontroller 上。

,`FirstViewController`是**标签栏**`SecondViewController`项目

 **```
Inside `FirstViewController` I have the following

-(void)viewdidload
{
  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productPurchased:)   name:kProductPurchasedNotification object:nil];

  [[NSNotificationCenter defaultCenter] addObserver:self selector: @selector(productPurchaseFailed:) name:kProductPurchaseFailedNotification object: nil];

}

- (void)productPurchased:(NSNotification *)notification {

    [NSObject cancelPreviousPerformRequestsWithTarget:self];

    NSString *productIdentifier = (NSString *) notification.object;
    NSLog(@"Purchased: %@", productIdentifier);

    [appDelegate.myDownloadablePoemsArray addObject:productIdentifier];
    [self.tabBarController setSelectedIndex:3];
}

- (void)productPurchaseFailed:(NSNotification *)notification {

    [NSObject cancelPreviousPerformRequestsWithTarget:self];

    SKPaymentTransaction * transaction = (SKPaymentTransaction *) notification.object;    
    if (transaction.error.code != SKErrorPaymentCancelled) {    
        UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Error!" 
                                                         message:transaction.error.localizedDescription 
                                                        delegate:nil 
                                               cancelButtonTitle:nil 
                                               otherButtonTitles:@"OK", nil] autorelease];

        [alert show];
    }

} 
```

上面的代码工作正常。现在问题出在哪里，我想从另一个视图调用相同的选择器方法，例如我有一个名为 的视图控制器`SecondViewController`，因为我正在添加相同的通知观察者。

但是选择器方法没有在`FirstViewController`.

里面`SecondViewController`我有以下

```
-(void)viewdidload
{
  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productPurchased:)   name:kProductPurchasedNotification object:nil];

  [[NSNotificationCenter defaultCenter] addObserver:self selector: @selector(productPurchaseFailed:) name:kProductPurchaseFailedNotification object: nil];

} 
```

但我想从`FirstViewController`;调用 selecor 方法

请告诉我，这可能吗？我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:46:43.377

在将as`SecondViewController`更改为的指针时，因为 的实例具有方法。`self``observer``FirstViewController``FirsViewController`

在**SecondViewController.m 中**，您必须使用这些行：

```
- (void)viewdidload {
  [[NSNotificationCenter defaultCenter] addObserver:firstViewController selector:@selector(productPurchased:)   name:kProductPurchasedNotification object:nil];
  [[NSNotificationCenter defaultCenter] addObserver:firstViewController selector: @selector(productPurchaseFailed:) name:kProductPurchaseFailedNotification object: nil];
} 
```

**但！这就是重点。**

如果`FirstViewController`已经使用上述方法在内存中有效且已加载的视图控制器，并且它已经是 中这些通知的观察者`NSNotificatioCenter`，则无需再次将其添加到 中，`NSNotificationCenter`因为`FirstViewController`可以接收并且仍然会收到所需的通知。（它只是没有显示，因为另一个视图控制器覆盖了它。）

如果`FirstViewController`is 时 is 还不存在`SecondViewController`，则无法访问从另一个类调用的任何实例方法，因为`FirstViewController`之前未实例化，并且您也无法将其添加到 the`NSNotificationCenter`中。

**结论**

`OOP`根据and的精神，最好将购买回调隔离到可用于每个独立视图控制器的第三类中`MVC`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:54:52.900

如果您的视图控制器是标签栏控制器的根，那么一旦它们第一次加载，它们就会一直存在，除非手动替换。

因此，当您在第一个控制器中安装通知处理程序时，除非您删除通知处理程序，否则即使第二个控制器在屏幕上，它仍然会获取它们。

现在，由于内存压力或自定义选项卡栏控制器代码，它可能会被卸载。但是，标签栏控制器释放其视图控制器之一的情况非常不寻常，因此您安装的通知处理程序将一直存在，直到您取消它们为止。

事实上，如果两个视图控制器都注册了通知，那么它们都会得到它们。

您正在注册，`viewDidLoad`因此第一个将立即注册，因为它将被加载并显示为初始控制器。它将继续接收这些通知。

当第二个加载时，它也会注册。现在两个视图控制器都在接收通知。当你回到第一个视图控制器时，他们都会收到通知。**

# iphone - iPad Storyboard 如何为模态视图控制器提供所需的大小

> ID：12016075
> 
> 赞同：1
> 
> 时间：2012-08-18T05:16:33.647
> 
> 标签：iphone, ipad, ios5, storyboard, ios

如何更改 iPad 故事板中模态视图控制器的大小。在我的 iPad 应用程序中，我需要显示一个模态视图控制器，它必须看起来像一个巨大的弹出窗口。在情节提要中，在属性检查器中，我将模态视图控制器的大小设置为自由形式并以表单形式呈现，然后我更改了模态视图控制器的视图高度。但是高度没有变化。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:18:00.150

在 IB 中，选择模态视图控制器，打开右侧栏的属性检查器。将模拟指标下的大小更改为自由格式。现在您应该能够更改模态视图控制器的视图大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:23:13.160

看起来您必须根据此[链接](https://stackoverflow.com/questions/3298378/ipad-custom-size-of-modal-view-controller)在模态视图控制器的 viewDidAppear 中以编程方式执行此操作。我通常比 IB 更信任我的代码中设置的内容。

# html - 网站的跨浏览器/平台支持

> ID：12016080
> 
> 赞同：1
> 
> 时间：2012-08-18T05:17:41.350
> 
> 标签：html, internet-explorer, cross-browser

我设计了这个网站：[http](http://piratesofpopulous.comli.com/) ://piratesofpopulous.comli.com/ 我还在努力，但是有一个问题，我的网站似乎对所有浏览器都没有相同的设计，在 Chrom 和 Mozilla 中，你可以看到一些东西的半径，但在 IE 中它没有显示并且布局完全混乱，你能告诉我如何修复它。

我的“边框半径和边距”在 IE 中显示不正确，在 IE 中是否可以这样做？我没有在 PHP 和 HTML 中定义文档类型，这可能是个问题吗？

另外，我所有的页面都是***** .php 格式。他们有 HTML，但扩展名为 .PHP，那么，我是否需要为 IE 支持定义文档类型和其他一些边框半径属性？

请帮助，否则我的氏族成员不会加入我的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:01:02.083

首先，您问 doctype 是否重要，答案是非常大的 YES。

将以下行添加到 HTML 代码的最顶部（`<html>`标签上方）：

```
<!DOCTYPE html> 
```

这应该有助于解决边距和其他奇怪的布局问题。如果没有 doctype，IE 就会进入“怪癖模式”，这是一种非常古老的模式，与所有其他浏览器的工作方式都不同。

如果您在 IE9 中，它也可能有助于`border-radius`解决`box-shadow`这些问题：IE9 确实支持这些功能，但在怪癖模式下可能不支持它们。

如果您使用的是 IE8 或更早版本，则浏览器根本不支持`border-radius`或`box-shadow`. 我的建议是让 Ie8 用户在没有这些功能的情况下生活；您的网站可能看起来不太好，但它可以使用，并且可能会鼓励他们升级浏览器。

如果你真的想在 IE8 中支持这些功能，有一个名为[CSS3Pie](http://css3pie.com/)的脚本可以为 IE添加`border-radius`和`box-shadow`功能。单击链接下载它并按照说明在您的站点上进行设置。是否值得努力让 IE8 看起来不错取决于您。

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T05:24:37.517

我认为您的部分问题是您的 css 中缺少这样的东西来支持浏览器部落。

```
-webkit-box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
-moz-box-shadow: 0 0 6px rgba(0,0,0,0.3);
box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
-webkit-background-clip: padding-box;
-moz-background-clip: padding-box; 
```

# php - 查找数组中的最大值

> ID：12016084
> 
> 赞同：4
> 
> 时间：2012-08-18T05:19:38.590
> 
> 标签：php, arrays, loops, multidimensional-array

我的要求是在数组中找到最大/最大值，其中可能包含其他数组。例如，我们可以看看下面的数组。

```
$array =
    array(
        13,
        array(10, 4, 111, 3),
        4,
        array(23, 450, 12,array(110, 119, 20, 670), 45 ,45,67,89),
        );

$max = find_max($array, 0);

print "Maximumum Value is  $max"; 
```

我已经有一个工作函数 find_max，但我只想知道除了下面给出的代码之外，**最好和最有效的方法是什么。**

```
function find_max($array, $maxValue) {
    foreach ($array as $member) {
        if (is_array($member)) {
            $maxValue = find_max($member, $maxValue);
        } else {

            if($member==$maxValue){
                continue;
            }
            if ($member > $maxValue) {
                $maxValue = $member;
            }
        }
    }
    return $maxValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:31:44.990

您找不到比 O(n) 或[linear time](https://en.wikipedia.org/wiki/Time_complexity#Linear_time)更快的数组（或数组数组）的最大值。

如果您需要不断找到该数组的最大值，我建议您对数组进行排序或尽可能使用不同的（排序的）数据结构。

您还可以保留对最大值的引用并在插入数据时对其进行更新。显然，这是假设您自己插入数据而不是从其他地方获取数据，在这种情况下，我的最后一条评论对您毫无用处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T05:46:37.570

确实，您正在做的将是在多维数组中搜索最大值的最佳方法。利用递归查找深度并检查更大的数字。抱歉，没有内置函数可以执行此操作。

这是一种基于最内层数组对多维数组进行排序的复杂方法，但它是一个相当复杂的概念。（搜索它）。

usort 可能有用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:34:06.030

找到最大值需要 O(n)，所以据我所知，你不能大幅改进它。但是，您可以对您的代码进行一些小的改进：

```
function find_max($array, $maxValue) {
    foreach ($array as $member) {
        if (is_array($member)) {
            $maxValue = find_max($member, $maxValue);
        } else {
            if ($member > $maxValue) {
                $maxValue = $member;
            }
        }
    }
    return $maxValue;
}

$array =
array(
    13,
    array(10, 4, 111, 3),
    4,
    array(23, 450, 12,array(110, 119, 20, 670), 45 ,45,67,89),
    );
$ans = find_max($array, 0);
echo "ans = $ans"; 
```

**输出：** 670

# javascript - 如何在将图片动画为屏幕截图时使用 jquery 异步加载图像

> ID：12016086
> 
> 赞同：0
> 
> 时间：2012-08-18T05:20:15.257
> 
> 标签：javascript, jquery, animation, web, asynchronous

我正在尝试使用 jquery javascript 框架异步加载图像。加载的图像应在完全下载到本地页面后淡入。到目前为止，我能够异步加载图像并在一段时间后淡入，而不是在完全下载后。如果图像很高并且由于图像大小而导致下载需要一些时间，则会在淡出时产生一些图形错误。当异步加载图像时，浏览器分配的内存也在逐步增加。即使是之前显示的相同图像也会分配新内存。

如何异步加载图像并在完全下载后进行淡化处理。以及如何加载图像才能在浏览器中不发生内存泄漏。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
   <meta charset="utf-8">
   <title>jQuery demo</title>
 </head>
 <body>
   <script src="jquery-1.8.0.min.js"></script>
   <script src="jquery.timer.js"></script> 
   //<script src="jquery.center.js"></script> 
   <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
   <div class="hide">
       <img id="bild" height=100% src="logo.jpg" alt="Logo" />
   </div>
   <script>
    var timer = $.timer(function() 
    {
        var img = $('#bild').attr('src','http://localhost/test.php?'+(new Date()).getTime()).load(function() 
            {
                if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
                    $('#bild').attr('src','logo.jpg'); //Show logo in error case
                } else {
                    $("#div.hide").append(img);
                }
           }).stop(true,true).fadeIn(1000).delay(3000).fadeOut(1000);
    });

    $("#bild").error(function()
    {
            $('#bild').attr('src','logo.jpg');
    });
    timer.set({ time : 5000, autostart : true });
   </script>
   </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:27:50.467

试试这个：

```
 if($('#bild').prop('complete')) // if image is already in cache
    {
        // your code
        $(this).fadeIn(1000).delay(3000).fadeOut(1000);
    }
else{
    $('#bild').load(function(){   // works when image is loaded and not present in cache
       // your code
       $(this).fadeIn(1000).delay(3000).fadeOut(1000);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:32:03.563

[www.farinspace.com/jquery-image-preload-plugin/](http://www.farinspace.com/jquery-image-preload-plugin/)

该 jQuery 插件将满足您的需求。您有每个图像加载事件的回调函数，然后是所有图像加载完成时的另一个回调。

```
$imgs.imgpreload({
    each: function() {
        // an image loaded, you could fade in each one
    },
    all: function(){                            
        // all images loaded, you could do something else here
    }
}); 
```

或者，您可以预加载图像，以便它们在浏览器到达 DOM 之前开始下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:40:39.857

感谢您的代码示例。经过一些尝试和朋友的进一步帮助后，我们让它工作了。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
   <meta charset="utf-8">
   <title>jQuery demo</title>
 </head>
 <body>
   <script src="jquery-1.8.0.min.js"></script>
   <script src="jquery.timer.js"></script> 
   //<script src="jquery.center.js"></script> 
   <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
   <div id="imageWrapper" class="hide">
       <img id="bild1" style="height: 100%;" src="logo.jpg" alt="Logo" />
       <img id="bild2" style="height: 100%; display: none;" src="logo.jpg" alt="Logo" />
   </div>
   <script>
    setImage($('#bild2'));
    var timer = $.timer(function() 
    {
        var visible = $('#imageWrapper img:visible');
        var hidden = $('#imageWrapper img:hidden');

        if (!hidden[0].complete || typeof hidden[0].naturalWidth == "undefined" || hidden[0].naturalWidth == 0)
            hidden.attr('src','logo.jpg'); //Show logo in error case

        if(hidden.attr('src')!= visible.attr('src')) 
        {
            visible.fadeOut(1000, function() {
                setImage(visible);
                hidden.fadeIn(1000);
            });
        }
        else
            setImage(hidden); //don't fade if current and next picture are the same (e.g. error pic -> error pic), but try to set new image
    });

    $("#imageWrapper img").error(function()
    {
        $(this).attr('src','logo.jpg');
    });
    timer.set({ time : 5000, autostart : true });

    function setImage(img)
    {
        img.attr('src','http://localhost/test.php?'+(new Date()).getTime());
    }
   </script>
   </body>
</html> 
```

# android - as3 android保存从服务器下载的文件

> ID：12016090
> 
> 赞同：1
> 
> 时间：2012-08-18T05:20:58.447
> 
> 标签：android, actionscript-3, flash, air

以下代码在桌面上运行时有效，但在 android 设备上无效。我认为这与`FileStream`以下内容有关。

关于如何将其保存到 Android 设备的任何想法？

```
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.events.ProgressEvent;
import flash.net.FileReference;
import flash.net.URLRequest;
import flash.events.Event;

import flash.filesystem.File;
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;

var urlLoader:URLLoader = new URLLoader();
urlLoader.addEventListener(Event.COMPLETE, complete_handler);
urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.load(new URLRequest("http://massmediamail.com/mp3s/Why%20a%20Protestant%20Pastor%20Beacame%20Catholic.mp3"));
//any file type;

function complete_handler(event:Event):void
{
    var data:ByteArray = event.target.data;

    var fr:FileReference = new FileReference();
    trace(File.applicationDirectory.nativePath);
    fr.save(data, 'Catholic.mp3');

    var fileStream:FileStream = new FileStream();
    trace(File.applicationDirectory.nativePath);
    fileStream.open(new File (File.applicationStorageDirectory.nativePath+"\\Catholic.mp3"),FileMode.WRITE);
    fileStream.writeBytes(data, 0, data.length);
} 
```

**这是错误：**

```
 Error #2044: Unhandled IOErrorEvent:. text=Error #2038: File I/O Error.
    at Untitled_fla::MainTimeline/complete_handler()[Untitled_fla.MainTimeline::frame1:25]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.net::URLLoader/onComplete() 
```

**这也是它所指的线：**

```
fileStream.open(new File (File.applicationStorageDirectory.nativePath+"\\Catholic.mp3"),FileMode.WRITE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T00:26:04.833

它适用于 Android 版 Air。是的，您以后可以用它做更多事情，但这是基本的开始。

```
import flash.net.FileReference;

/// It can be an mp3,jpg, png, etc... just change the url
/// and the extension name. nice huh?
var yourFileLocation = "http://YourWeb.com/YourSong.mp3";
var yourFileName = "YourSong.mp3";

var daFile:FileReference = new FileReference();
daFile.download(new URLRequest(yourFileLocation), yourFileName); 
```

我一直在工作……找到这个。我希望它可以帮助很多人。为什么这不是更普遍的知识？有时无法找到动作脚本中的某些内容。

我对此有一个问题。如何将代码直接下载到设备上的某个位置，而无需用户选择位置。非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:52:15.697

您肯定需要将“\”改为“/”，Android 是基于 linux 的系统。实际上，您应该为此使用 File.separator 属性而不是字符串，这将使您的代码保持跨平台。

一般来说，虽然你应该能够使用这个：

```
File.applicationStorageDirectory.resolvePath( "Catholic.mp3" ); 
```

您是否授予应用程序写入文件系统的权限？

为此，您需要在应用程序描述符中添加以下内容，尤其是“WRITE_EXTERNAL_STORAGE”行。

```
<android>
    <manifestAdditions><![CDATA[
        <manifest android:installLocation="auto">
            <uses-permission android:name="android.permission.INTERNET"/>
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        </manifest>
    ]]></manifestAdditions>
</android> 
```

此外，您应该监听这些错误以获取更多信息，并在您的代码中处理它们：

```
fileStream.addEventListener( IOErrorEvent.IO_ERROR, fileStream_errorHandler, 
```

# ios - 具有多个 ViewController 的 SplitView - 故事板 - iOS

> ID：12016091
> 
> 赞同：0
> 
> 时间：2012-08-18T05:22:00.693
> 
> 标签：ios, storyboard, uisplitviewcontroller

我已经完成了我的应用程序的 iPhone 版本，并希望我的应用程序也支持 iPad。我在 iphone 上使用了一个 tabbar 控制器。我可以在 iPad 上使用相同的控制器，但是，如果我使用 Tabbar，我在 iPad 上会有太多可用空间。所以我决定使用拆分视图控制器。即使不在横向模式下，左侧部分（表格视图）也应该始终可见。每次单击单元格时，都应将相应的视图加载到右侧。顺便说一句，我正在使用情节提要。似乎这使一切变得更加困难。有一些例子吗？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:17:11.520

我最近也遇到过类似的情况。基本上你可以使用拆分视图项目模板来生成基本代码。之后，我创建了一个DetailedViewControllerContainer接口，并将其用作拆分视图右侧视图的视图控制器，替换了生成的DetailViewController。之后我创建了几个视图控制器，每个视图控制器对应于左侧视图（主视图控制器）中的一个选择。并将这些视图控制器添加为DetailedViewControllerContainer 的子视图控制器。问题是您需要使用代码来加载子视图控制器。好处是子视图控制器不需要从 iPhone 版本修改。DetailedViewControllerContainer 仍然是唯一的 SplitView 委托。

看一下我在github上写的示例代码： [https ://github.com/raoying/SplitView-Sample](https://github.com/raoying/SplitView-Sample)

# r - 平均/组合数据框中的重复值

> ID：12016096
> 
> 赞同：0
> 
> 时间：2012-08-18T05:22:51.207
> 
> 标签：r

```
sampleName     realConc      exptname concentrate timepoints replicate    day  var
  name1    3.877049e-05           0hr        55mM          0        b1 011311   1
  name1    3.293085e-04           0hr        55mM          0        b1 011311   2
  name2    2.939995e-03 KClpulse-5min        55mM         20        b1 011411   1
  name2    1.212584e-02 KClpulse-5min        55mM         20        b1 011411   2 
```

这是一个名为“ex”的示例数据框

我想平均列中具有重复值的行的 realConc 值：exptname、concentrate、timepoints、replicate 和 day。

然后用这个新的平均值和相同的 sampleName 做一行

我一直在想mean(ex[which(duplicated(paste(ex$exptname,ex$concentrate,ex$timepoints,ex$replicate,ex$day))),]$realConc)

### 这样做的问题是，它将平均这些列中重复的每个值，即使它们彼此不同

### 我需要为每列中的每个唯一值发生这种情况

然后我需要一行具有平均 realConc 值和相同的 sampleName 与任何行的平均

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:26:53.117

我认为，如果我对您的理解正确，您应该能够使用`aggregate()`.

假设你`data.frame`的名字是`ex`：

```
aggregate(realConc ~ ., mean, data = ex)
  sampleName      exptname concentrate timepoints replicate   day     realConc
1      name1           0hr        55mM          0        b1 11311 0.0001840395
2      name2 KClpulse-5min        55mM         20        b1 11411 0.0075329175 
```

# php - 试图从 JavaScript 执行 PHP，不工作？

> ID：12016099
> 
> 赞同：-1
> 
> 时间：2012-08-18T05:23:34.297
> 
> 标签：php, javascript

我正在使用以下代码：`<a href="#" onclick="<?php var_dump($_SERVER)?>">$_SERVER Variable</a>`. 这甚至可能吗？如果不是那么我将如何做到这一点？我将 $_SERVER 用于非常具体的实验目的。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:29:34.893

不，但是您始终可以将 AJAX 请求发送到服务器上的 php 文件，并将响应解析回您的 HTML/JS。如果您想要简单的路线，请查看 jQuery 的 AJAX ;) [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

一个更简单的示例位于：
抱歉，为了自我宣传，但在[jQuery 的 Ajax 教程](http://afterhoursprogramming.com/index.php?content=JavaScript-jQuery-With-AJAX&article=84 "jQuery 的 Ajax 教程")中我介绍了这个 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:27:38.117

这是一个简单的 PHP/AJAX 示例：

[http://www.w3schools.com/ajax/ajax_aspphp.asp](http://www.w3schools.com/ajax/ajax_aspphp.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T05:27:58.430

不，因为 PHP 是服务器端脚本，而 JS 是客户端

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T05:31:41.507

您只需尝试使用 echo 来获取您想要的特定服务器值，而不是使用 var_dump

# python - PyMongo 是否会自动对您插入的所有字符串进行 BSON.encode 编码？

> ID：12016103
> 
> 赞同：0
> 
> 时间：2012-08-18T05:24:10.560
> 
> 标签：python, mongodb, pymongo, bson, database

我听说有人说 PyMongo 自动为您在数据库中插入的所有内容使用 BSON 格式。这是真的？或者我还需要手动运行 BSON.encode 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:28:29.700

驱动程序将处理将 python 内置对象编组到它们的 bson 对应对象，作为您和数据库之间的中间层的一部分。最终，mongodb中存储的数据是bson。

`datetime`对象将被正确保存，数字、字符串、列表也是如此。您不需要专门序列化它们。文档对象是字典。

手动编码的唯一原因是当您希望为[自定义类提供存储能力](http://api.mongodb.org/python/current/examples/custom_type.html)，而不必将它们分解为内置类型。它与任何其他序列化格式（pickle、json、...）非常相似。他们通常可以很好地处理内置函数，但对于自定义类型需要额外的帮助。

# sql - 如何使excel宏连接到SQL

> ID：12016104
> 
> 赞同：1
> 
> 时间：2012-08-18T05:24:14.463
> 
> 标签：sql, vba

```
服务器：LBOSS\BACKOFFICE  
编号：sa  
数据库名称：LogiDB  
密码：  
表 RPT_SUB,RPT_FIN  
F04,F254,F1056,F11057....  

```

我试图将 SQL 数据带入 Excel 电子表格。

有人帮我吗？
这是信息；

我从其他服务器上找到了这个 vba 宏。
那么如何将这些数据用于我的服务器呢？
或任何想法？

```
Sub start()

'Call init
Dim strQuery As String
Dim strStartDate As String

strStartDate = "'" & Cells(2, 4).Value & "'"

' No Category Report
Call Query("select report_daily_category(" & strStartDate & ", null)", _
Cells(5, 4))
' No Category GST
Call Query("SELECT report_daily_tax(" & strStartDate & ",1,null)", _
Cells(5, 7))
' Category Description
Call Query("SELECT description FROM category where not obsolete ORDER BY list_priority", _
Cells(6, 3))
' Category Report
Call Query("SELECT report_daily_category(" & strStartDate & ",category_id) FROM category where not obsolete ORDER BY list_priority", _
Cells(6, 4))
' Category GST Report
Call Query("SELECT report_daily_tax(" & strStartDate & ",1,category_id) from category where not obsolete ORDER BY list_priority", _
Cells(6, 7))
' Lotto Report
'Call Query("SELECT report_daily_lotto(" & strStartDate & ", true)", _
Cells(14, 7))
'Call Query("SELECT report_daily_lotto(" & strStartDate & ", false)", _
Cells(16, 7))
' Tax Description
Call Query("SELECT description FROM tax_rule where not disabled ORDER BY tax_id", _
Cells(22, 3))
' Tax Report
Call Query("SELECT report_daily_tax(" & strStartDate & ",tax_id) FROM tax_rule where not disabled ORDER BY tax_id", _
Cells(22, 4))
' Vendor Coupon
Call Query("select report_daily_coupon(" & strStartDate & ", null, null)", _
Cells(30, 4))
' Discount
Call Query("select report_daily_discount(" & strStartDate & ", true)", _
Cells(32, 4))
' Reward Point + Store Credit
Call Query("select report_daily_storecredit(" & strStartDate & ")", _
Cells(33, 4))
' Refund
Call Query("select report_daily_refund(" & strStartDate & ", true)", _
Cells(35, 4))
' Refund GST; Included in <Tax Report>
Call Query("SELECT report_daily_refund(" & strStartDate & ", null)", _
Cells(37, 4))
' Customer Count
Call Query("select count(*) from receipt where time >= " & strStartDate & " and time < cast(" & strStartDate & " as timestamp) + interval '1 day'", _
Cells(42, 4))
' Payment Description
Call Query("SELECT payment FROM payment_method ORDER BY list_priority", _
Cells(46, 3))
' Payment Report
Call Query("SELECT report_daily_payment(" & strStartDate & ",paymethod_id, null) FROM payment_method ORDER BY list_priority", _
Cells(46, 4))

' ROA
Call Query("SELECT report_daily_roa(" & strStartDate & ")", _
Cells(41, 12))

Call cleanup

End Sub
Sub init()
End Sub

Sub cleanup()
    Cells.Select
    With Selection
        .VerticalAlignment = xlCenter
        .HorizontalAlignment = xlRight
        .Font.Name = "Courier New"
        .Font.Size = 9
    End With
    For Each obj In ActiveSheet.QueryTables
        obj.Delete
    Next

End Sub
' Array("ODBC;DSN=PostgreSQL30;DATABASE=pos1;SERVER=192.168.1.200;PORT=5432;UID=postgres;PWD=nopass;ReadOnly=0;FakeOidIndex=0;Show")
Sub Query(strQuery As Variant, Pos As Variant)
    Dim ConnectionString As Variant
    ConnectionString = Array( _
        Array("ODBC;DSN=PostgreSQL30;DATABASE=pos1u;SERVER=192.168.1.250;PORT=5432;UID=postgres;PWD=nopass;ReadOnly=0;FakeOidIndex=0;ShowOidC"), _
        Array("OidColumn=0;RowVersioning=0;ShowSystemTables=0;ConnSettings=;Fetch=100;Socket=4096;UnknownSizes=0;MaxVarcharSize=254;MaxLongVar"), _
        Array("charSize=8190;Debug=0;CommLog=0;Optimizer=1;Ksqo=1;UseDeclareFetch=0;TextAsLongVarchar=1;UnknownsAsLongVarchar=0;BoolsAsChar=1;"), _
        Array("Parse=0;CancelAsFreeStmt=0;ExtraSysTablePrefixes=dd_;;LFConversion=1;UpdatableCursors=1;DisallowPremature=0;TrueIsMinus1=0") _
    )
    With ActiveSheet.QueryTables.Add(Connection:=ConnectionString, Destination:=Pos)
        .CommandText = Array(strQuery)
        .Name = "Query"
        .FieldNames = False
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlOverwriteCells
        .SavePassword = True
        .SaveData = True
        .AdjustColumnWidth = False
        .RefreshPeriod = 0
        .PreserveColumnInfo = True
        .Refresh BackgroundQuery:=False
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:43:12.093

查看子查询（...）。有一行以 ConnectionString = ... 开头。将其更改为：

```
ConnectionString = "ODBC;DATABASE=LogiDB;SERVER=LBOSS\BACKOFFICE;UID=sa;PWD=password" 
```

在 PWD= 之后输入您的密码，并在 Start() 子中编辑 SQL 查询。基本上应该可以正常工作。

# macos - 通过 perl 脚本从 Mac OS X 发送电子邮件

> ID：12016108
> 
> 赞同：0
> 
> 时间：2012-08-18T05:25:08.757
> 
> 标签：macos, perl

我正在尝试使用我的 Mac 上的 Perl 脚本发送电子邮件，为此我安装了 MIME::Lite 模块。我正在使用基本脚本进行测试：

```
#!/usr/bin/perl

use MIME::Lite;

$msg = MIME::Lite->new(
                 From     =>"abc\@gmail.com",
                 To       =>"xyz\@gmail.com",
                 Subject  =>"Demo",
                 Data     =>"Sent :-):-)"
                 );
$msg->send(); 
```

我已经在我的 macbook 中设置了我的电子邮件帐户。如果我需要其他检查，请指导我，因为我无法发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:42:52.273

您可以只对命令行使用系统调用的日子已经一去不复返了：

```
mail boss@megacorp.net -s "I QUIT!" < body_of_message.txt 
```

但是如果你安装并配置 mutt 与你的邮件服务器通信，你可以做一些非常接近的事情：

```
mutt -s "I QUIT" boss@megacorp.net < body_of_message.txt 
```

最难的一点是配置 mutt，这还不错。那里有大量的文档和操作指南，例如[Mutt Configuration Doc](http://www.mutt.org/doc/manual/manual-3.html) ... gmail，交换等

从那里，在 perl 中，您只需：

```
system("/path/to/mutt", "-s", "I QUIT", "boss\@megacorp.net", ...)
   or die "Could not send Email"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:42:32.620

我没有使用过这个模块，但我注意到它的文档说

> MIME::Lite 不被当前的维护者推荐。有许多替代方案，例如 Email::MIME 或 MIME::Entity 和 Email::Sender，您可能应该使用它们。MIME::Lite 继续产生奇怪的错误报告，并且由于有更好的替代方案，它没有收到大量的重构。请考虑使用其他东西。 [http://metacpan.org/pod/MIME::Lite](http://metacpan.org/pod/MIME%3a%3aLite)

话虽如此，您可能需要做类似的事情

> 指定默认发送方法：
> 
> ```
>  MIME::Lite->send('smtp','some.host',Debug=>0);
>  MIME::Lite->send('smtp','some.host', AuthUser=>$user, AuthPass=>$pass); 
> ```

# android - 如何创建从 onPostExecute() 到选项卡的意图

> ID：12016119
> 
> 赞同：0
> 
> 时间：2012-08-18T05:28:29.467
> 
> 标签：android, android-intent, tabs

我想从我的 Asynctask 类创建一个 Intent 到一个选项卡。如果我使用以下代码，则不是将数据显示到同一个选项卡，而是创建一个新活动并将数据显示在该活动上。

```
@Override
protected void onPostExecute(String result) {
super.onPostExecute(result);
Intent in = new Intent(context, Details.class);
in.putExtra(TAG_FNAME, firstname);
in.putExtra(TAG_LNAME, lastname);
in.putExtra(TAG_GNDR, gender);
in.putExtra(TAG_DOB, date_of_birth);
context.startActivity(in);
} 
```

在上面的代码中，我将数据从我的 Asynctask 类发送到我的 Details.class Detail 类包含 2 个选项卡：home 和 profile

我如何将数据发送到我的 profile.class，这是 Details.class 中的一个选项卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:50:24.423

以同样的方式，`Details`类将处理其他参数，那么您应该在包的额外部分中处理额外的数据。

我猜你使用`onCreate`或者`onNewIntent`（更好）来处理`Details`类中的这些参数。从那里，使用您的静态工厂方法创建您的选项卡片段（[在此处](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)查找该`newFragment`方法），然后使用您的选项卡管理器显示该片段。

顺便说一句，`Details`名字不好，`DetailActivity`会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:58:35.177

更合适的方法是通过 Handlers 和 Message：

您应该将 Handler 声明为：

```
Handler mHandler = new Handler(){

    @Override
    public void handleMessage(Message msg) {
    switch(msg.what){
          case MSG_INTENT:
          // get data from bundle and startActivity() here.;
          Log.d(TAG, "handleMessage() - MSG_00 - msg: "+
                                (String)msg.obj);
          break;
    }
    super.handleMessage(msg);
    }
}; 
```

在你的 onPostExecute(): 创建一个`Message`对象并传递`message.what`给处理程序。

```
Message msg = new Message();
Bundle b = new Bundle();
b.putExtra("CallingActivity", "Details.class");
b.putExtra(TAG_FNAME, firstname);
b.putExtra(TAG_LNAME, "Details.class");
b.putExtra(TAG_GNDR, lastname);
b.putExtra(TAG_DOB, date_of_birth);
msg.setData(b);
msg.what = MSG_INTENT;
mHandler.sendMessage(msg); 
```

# java - 更改 Swing 应用程序上所有按钮的光标

> ID：12016125
> 
> 赞同：4
> 
> 时间：2012-08-18T05:30:01.950
> 
> 标签：java, swing, jbutton, jcomponent, mouse-cursor

我有一个 Swing 应用程序，其中包含一个主框架和一些其他表单。我需要实现一种通用方法来为任何表单上的所有按钮设置手形光标。

这类似于我们在网页上使用 css ( `input[type=button] { cursor:pointer; }`)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T09:45:03.673

如果您想动态地和/或在特定表单上更改光标，那么像@Madprogrammer 建议的那样走树是*一种方法。*

只是为了好玩（并再次炫耀[SwingX](http://swingx.java.net) :) - 如果您想全局安装该光标然后不关心，请安装一个 ui-delegate 来处理它。在 SwingX 中，它就像实现和插入自定义按钮插件一样简单。副作用与其他答案相同（尽管无法解决）。通常的缺点（在安装自定义 ui 代理时总是如此）是需要为所有 LAF 子类化和插件代理。

```
public class ButtonCursorAddon extends AbstractComponentAddon {

    /**
     * @param name
     */
    protected ButtonCursorAddon() {
        super("RolloverCursor");
    }

    @Override
    protected void addBasicDefaults(LookAndFeelAddons addon,
            DefaultsList defaults) {
        UIManager.getDefaults().remove("ButtonUI");
        defaults.add("ButtonUI", "org.jdesktop.swingx.plaf.ButtonCursorAddon$BasicButtonCursorUI");
    }

    @Override
    protected void addMetalDefaults(LookAndFeelAddons addon,
            DefaultsList defaults) {
        UIManager.getDefaults().remove("ButtonUI");
        defaults.add("ButtonUI", "org.jdesktop.swingx.plaf.ButtonCursorAddon$MetalButtonCursorUI");
    }

    @Override
    protected void addWindowsDefaults(LookAndFeelAddons addon,
            DefaultsList defaults) {
        UIManager.getDefaults().remove("ButtonUI");
        defaults.add("ButtonUI", "org.jdesktop.swingx.plaf.ButtonCursorAddon$WindowsButtonCursorUI");
    }

    @Override
    protected void addNimbusDefaults(LookAndFeelAddons addon,
            DefaultsList defaults) {
        UIManager.getDefaults().remove("ButtonUI");
        defaults.add("ButtonUI", "org.jdesktop.swingx.plaf.ButtonCursorAddon$SynthButtonCursorUI");
    }

    public static class BasicButtonCursorUI extends BasicButtonUI {

        public static ComponentUI createUI(JComponent c) {
            return new BasicButtonCursorUI();
        }

        @Override
        protected BasicButtonListener createButtonListener(AbstractButton b) {
            return new BasicHyperlinkListener(b);
        }

    }

    public static class SynthButtonCursorUI extends SynthButtonUI {

        public static ComponentUI createUI(JComponent c) {
            return new SynthButtonCursorUI();
        }

        @Override
        protected BasicButtonListener createButtonListener(AbstractButton b) {
            return new BasicHyperlinkListener(b);
        }

    }

    public static class MetalButtonCursorUI extends MetalButtonUI {

        public static ComponentUI createUI(JComponent c) {
            return new MetalButtonCursorUI();
        }

        @Override
        protected BasicButtonListener createButtonListener(AbstractButton b) {
            return new BasicHyperlinkListener(b);
        }

    }

    public static class WindowsButtonCursorUI extends WindowsButtonUI {

        public static ComponentUI createUI(JComponent c) {
            return new WindowsButtonCursorUI();
        }

        @Override
        protected BasicButtonListener createButtonListener(AbstractButton b) {
            return new BasicHyperlinkListener(b);
        }

    }

}

// usage: plug-in once in your application code (before creating any buttons)
static {
    LookAndFeelAddons.contribute(new ButtonCursorAddon());
} 
```

> 我收到此错误： UIDefaults.getUI() failed: no ComponentUI class

对我有用 - 在向 UIManager 注册 ui 类时，它需要完全限定的类名来实例化委托：

```
// here the ButtonCursorUI is in package
// org.jdesktop.swingx.plaf
defaults.add("ButtonUI", "org.jdesktop.swingx.plaf.ButtonCursorAddon$WindowsButtonCursorUI");
// in another package that would be
defaults.add("ButtonUI", myPackageName + ".ButtonCursorAddon$WindowsButtonCursorUI"); 
```

通常，您将在 some.plaf 的 LAF 特定子包中拥有不同的代表（而不是在插件本身中）但是，这是一个示例 :-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T05:41:27.240

基本上，你必须走容器和子容器......

不过要小心，你会惊讶于什么是按钮

```
public static void setButtonCursor(JComponent component, Cursor cursor) {

    for (Component comp : component.getComponents()) {

        if (comp instanceof JButton) {

            comp.setCursor(cursor);

        } else if (comp instanceof JComponent) {

            setButtonCursor((JComponent)comp, cursor);

        }

    }

} 
```

`JComboBox`这具有进入s （以及其他组件）并更改其下拉按钮的光标的良好副作用，所以要小心；）

# php - 当返回的 JSON 数据中有换行符时，jQuery UI 自动完成功能不起作用

> ID：12016126
> 
> 赞同：1
> 
> 时间：2012-08-18T05:30:24.607
> 
> 标签：php, jquery, json, jquery-ui, autocomplete

我的目标

使用 jQuery UI 自动完成来搜索一本书，当从建议下拉列表中单击一本书时，使用`select`自动完成功能使用所选书籍的详细信息填充 HTML 表单的其余部分。

问题

只要返回的数据不包含换行符（我`description`在数据库中调用了一个表字段，并且在存储的数据中有换行符），自动完成就像一个魅力。但是，如果我将`description`字段数据包含到返回的数组中，则建议下拉列表将无法显示。但是，当使用 Firebug 检查时，正在返回数据；只是没有出现

编码

```
// STORING INFORMATION FROM THE DATABASE
$items[$r['book_id']] = array('name'=>$r['book_name'],
                              'category'=>$r['c_id'],
                              'author'=>$r['book_author'],
                              'vendor'=>$r['book_publisher'],
                              'edition'=>$r['book_edition'],
            Culprit here -->  'description'=>$r['book_description'],
                              'price'=>$r['book_price'],
                              'date'=>$r['date']);

 // DATA FOR POPULATING THE HTML FORM (USING ui.item.<index name>)
   $result = array();
   foreach ($items as $key=>$value)
   {
      array_push($result, array("id"=>$key,
                                "label"=>$key."-".$value['name'],
                                "value" => strip_tags($value['name']),
                                "name" => $value['name'],
                                "cat" => $value['category'],
                                "author" => $value['author'],
                                "vendor" => $value['vendor'],
                                "edition" => $value['edition'],
                                "description" => $value['description'],
                                "price" => $value['price'],
                                "date" => $value['date']));
    }
    // $result is then supplied to a function which converts the data to json 
```

如果我从and数组中删除`description`条目，一切都会按预期工作。在这里通过 SO 线程后，我尝试了几件事：`$items``$result`

我尝试了什么

试过了`str_replace('\n', '\\n', $r['book_description'])`

试过了`str_replace('<br />', '\\n', $r['book_description'])`

出于沮丧甚至尝试`urlencode($r['book_description'])`

但它们似乎都不起作用。这个有解决方法吗？

提前致谢。

* * *

**更新**

在返回的集合上使用`json_encode`会导致：

![在此处输入图像描述](../Images/f0073fb22a5f84e1393da62fa6b7d4dc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:51:22.140

你在使用[json_encode()](http://us2.php.net/manual/en/function.json-encode.php)吗？..它应该为你逃脱一切。你也可以尝试类似的东西

```
$newDesc = str_replace(PHP_EOL, "", $r['book_description']); 
```

或者

```
$newDesc = str_replace(chr(10), "", $r['book_description']);
$newDesc = str_replace(chr(13), "", $newDesc); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:25:15.070

转义序列（\n \r \t 等...）仅适用于双引号。
代替：

```
      str_replace('\n', '\\n', $r['book_description'])

```

对于这个：

```
      str_replace("\n", "\\n", $r['book_description'])

```

然后工作

对不起，我的英语不好。

# c# - 由于请求过滤，自定义处理程序无法工作

> ID：12016128
> 
> 赞同：0
> 
> 时间：2012-08-18T05:31:20.913
> 
> 标签：c#, asp.net, iis-7, web-config, httphandler

**这是在 IIS express 中。**

```
public class FooHandler : HttpTaskAsyncHandler
{

    public override async Task ProcessRequestAsync(HttpContext context)
    {
        var val = await new FooRequest().ProcessRequest();

        context.Response.Write(val);
    }
} 
```

那是处理程序，下面是 web.config。

```
<configuration>
    <appSettings>
      <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    </appSettings>
    <system.web>
      <sessionState mode="Off" />
      <compilation debug="true" targetFramework="4.5" />
      <machineKey compatibilityMode="Framework45" />

      <httpHandlers> 
        <add verb="*" path="*.foo" validate="false" type="FooServer.FooHandler" />   
      </httpHandlers>
    </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <add name="FooHandler" verb="*" path="*.foo" type="FooServer.FooHandler" /> 
    </handlers>

  </system.webServer> 
</configuration> 
```

我不断收到以下错误。谷歌没有帮助。也许你可以？

```
HTTP Error 404.7 - Not Found
The request filtering module is configured to deny the file extension.
Most likely causes:

    Request filtering is configured for the Web server and the file extension for this request is explicitly denied. 
```

# python - 我将如何将 mongoengine 插入金字塔？

> ID：12016133
> 
> 赞同：0
> 
> 时间：2012-08-18T05:32:17.223
> 
> 标签：python, mongodb, pyramid, mongoengine, database

我已经使用 pyramid_mongodb 脚手架创建了一个基本的 mongoengine 应用程序......但是我想包括 mongoengine。我想知道我应该从脚手架代码中实际保留什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T13:52:36.727

没有关于脚手架的答案。我不建议使用脚手架，因为它实际上不适用于 root_factory 等等，订阅者也不是真正需要的。

我为金字塔写了一个插件。它被称为pyramid_mongo。

文档：

*   [http://packages.python.org/pyramid_mongo/](http://packages.python.org/pyramid_mongo/)

GitHub：

*   [https://github.com/llacroix/pyramid_mongo](https://github.com/llacroix/pyramid_mongo)

我今天看到了你的问题，觉得它可能是插件的一个很好的插件。

我只是将它推送到 github，所以你现在需要从那里克隆它，使用 pip 安装将加载旧版本，而不支持 mongoengine。

换句话说，在您的配置中，执行文档中的所有操作并添加以下内容：

```
mongo.mongoengine=true 
```

它将 mongo 从配置附加到 mongoengine。所有其他 api 都可以在有或没有 mongoengine 的情况下工作，并且 mongoengine 应该工作。今天刚加的，不支持多连接多db。我也可以添加对多个数据库的支持。但我觉得 mongoengine 可能会自己做一些可能与我的插件冲突的事情，比如授权。

一旦我编写了测试，我会将它推送到 python 包中，并且可以从 pip 或 easy_install 安装。现在，从 github 拉取它

# python - 如何执行远程页面？

> ID：12016134
> 
> 赞同：2
> 
> 时间：2012-08-18T05:33:31.173
> 
> 标签：python

如何执行在网站上找到的 python 脚本？例如，以下似乎有效。但这是正确的方法吗？

```
curl http://www.ics.uci.edu/~eppstein/PADS/UnionFind.py | python 
```

我想知道我是否可以从 python 命令提示符导入网页>>>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:40:45.780

好吧，你可以这样做：

```
>>> exec(urllib2.urlopen('http://www.ics.uci.edu/~eppstein/PADS/UnionFind.py').read())
>>> uf = UnionFind() 
```

`wget`但是，如果您真的这样做，那么将它或它放到您的本地机器上肯定会更有意义`curl`，然后正常导入模块。

```
$ wget http://www.ics.uci.edu/~eppstein/PADS/UnionFind.py

>>> from UnionFind import UnoinFind
>>> uf = UnionFind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T05:36:07.587

Python 解释器无法自行下载脚本，因此使用诸如此类的工具`curl`是一种可接受的解决方案。

# c++ - 有没有关于更换 MS CRT 的最新参考资料？

> ID：12016138
> 
> 赞同：4
> 
> 时间：2012-08-18T05:35:27.477
> 
> 标签：c++, visual-studio, msvcrt

我用[这个](http://www.geoffchappell.com/studies/msvc/language/predefined/index.htm)作为参考，但它似乎并不完整。当我设置 时`/NODEFAULTLIB`，我得到关于丢失的链接器错误`__except_list`，`__load_config_used`以及其他一些显然与 SEH 相关的事情。正确连接朋友很容易`_CxxThrowException`，但我不知道`__except_list`应该是什么，也不知道从哪里开始寻找。

我正在使用MSC和IC。使用 I2C 时，链接器报告`__except_list`为缺失，但 MSC 并非如此。

对于你们中最喜欢的答案是“为什么？”的人：这是因为我想知道它是如何工作的，而且我厌倦了毫无理由地开始使用 300kb 的无操作测试应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:06:24.217

如果你想摆脱`CRT`依赖，那么将`/Zl`选项传递给编译器。链接器不需要任何特殊选项（编译器不会插入 `/DEFAULTLIB:...`到`.drectve`部分中，因此链接器不会将您绑定`EXE`到 any `CRT`）。当然，您不应该`C++`在代码中使用异常或堆；或者您需要提供您自己的用`assembly`语言编写的库函数版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T12:32:47.163

链接器选项 /safeseh:no（查看 PE 图像信息中的 IMAGE_LOAD_CONFIG_DIRECTORY）。

# python - Python - 如何设置这行代码的样式？

> ID：12016141
> 
> 赞同：0
> 
> 时间：2012-08-18T05:36:11.660
> 
> 标签：python

首先，我不确定 SO 是否适合这个问题，因此如有必要，请随时将其移至更合适的位置。

```
cmd_folder = os.path.realpath(os.path.abspath(os.path.split(inspect.getfile( inspect.currentframe() ))[0])) 
```

我有这行代码。Python PEP 8 文档建议将行数限制为 79 个字符，以保持在较小屏幕上的可读性。

设计这行代码以符合 PEP 建议的最优雅的方式是什么？

```
cmd_folder = os.path.realpath(os.path.abspath(os.path.split
                               (inspect.getfile
                                 ( inspect.currentframe() ))[0])) 
```

这是最合适的方法吗？有没有我没想到的更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T05:41:16.947

我会说在您的示例代码的情况下，将它们分成单独的操作会更合适，而不是使代码更难阅读。

```
aFile = inspect.getfile(inspect.currentframe())
cmd_folder = os.path.realpath(os.path.abspath(os.path.split(aFile)[0])) 
```

跟踪所有这些括号的开始和结束以弄清楚每个临时变量发生了什么不应该是一件苦差事。变量名称可以通过命名结果的意图/类型来帮助清晰。

如果它是两个，也许是 3 个嵌套调用，我可能会在一个调用中执行换行符的操作，但绝对不会在您有大量括号并且列表索引在其间挤压时。但通常我更倾向于使用链式调用来做到这一点，`foo.bar().biz().baz()`因为它从左到右流动。

总是假设一些糟糕的随机开发人员明天将不得不阅读您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T05:58:44.520

我一般[都接受 jdi 提供的答案](https://stackoverflow.com/a/12016163/548696)（分成几个表达式）。但我想展示这个问题的另一个方面。

一般来说，如果只是试图正确地打破和缩进这一行，你还应该遵循[PEP8 关于缩进的规则](http://www.python.org/dev/peps/pep-0008/#indentation)：

> 每个缩进级别使用 4 个空格。
> 
> 对于您不想弄乱的真正旧代码，您可以继续使用 8 空格制表符。
> 
> 续行应该使用 Python 的隐式行在括号、方括号和大括号内连接，或者使用悬挂缩进垂直对齐被包裹的元素。**使用悬挂缩进时，应考虑以下事项；第一行不应该有任何参数，并且应该使用进一步的缩进来清楚地将自己区分为续行。**
> 
> [以下几个例子]

因此，在您的情况下，它可能如下所示：

```
#---------------------------------------------------------79th-column-mark--->|
cmd_folder = os.path.realpath(
    os.path.abspath(os.path.split(inspect.getfile(inspect.currentframe()))[0])) 
```

但正如我在开头提到的，以及[PEP20（Python 之禅）](http://www.python.org/dev/peps/pep-0020/)提到的：

> 平面优于嵌套。
> 
> 稀疏比密集好。
> 
> 可读性很重要。

因此，正如 jdi 所指出的，您绝对应该将代码拆分为几个表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T05:45:49.747

我倾向于这样做：

```
cmd_folder = os.path.realpath(os.path.abspath(os.path.split(
    inspect.getfile(inspect.currentframe()))[0])) 
```

在第一行的末尾打开括号，在续行上缩进。最终归结为您认为更美观的东西。

进行部分计算并将结果保存在变量中也没有什么可耻的，如下所示：

```
f = inspect.getfile(inspect.currentframe())
cmd_folder = os.path.realpath(os.path.abspath(os.path.split(f)[0])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T12:20:44.090

If you really insist on keeping it one expression, I'd go with an "extreme" simply because it actually looks nice:

```
cmd_folder = os.path.realpath(
    os.path.abspath(
        os.path.split(
            inspect.getfile(
                inspect.currentframe()
        ))[0]
)) 
```

# javascript - mvc 控制器没有从 js 触发

> ID：12016146
> 
> 赞同：0
> 
> 时间：2012-08-18T05:36:56.660
> 
> 标签：javascript, jquery, asp.net-mvc

我需要在图像拖动时从 javascript 调用控制器操作。

我的 JavaScript 代码是

```
$trash.droppable({

    accept: "#gallery > img",
    // activeClass: "ui-state-highlight",
    drop: function (event, ui) {
        var a = ui.draggable;
        var itemsarray = [];
        itemsarray.push(a[0].id);
        // $.getJSON('@Url.Action("SaveImage")', { imageids: itemsarray }, function (mydata) {
        //  alert(mydata);
        // });
        $.ajax({
            url: '@Url.Action("SaveImage")',
            data: JSON.stringify({ imageids: 1 }),
            contentType: 'application/json',
            dataType: 'json',
            type: 'POST',
            success: function (mydata) {
                alert(mydata);
            }
        });

        deleteImage(ui.draggable);
    }
}); 
```

在我的控制器代码中，

```
[HttpPost]
public ActionResult SaveImage(int imageids)
{
    GalleryService galService = new GalleryService();
    //galService.UpdatePublishedImages(imageids);
    // return View("Index");
    return Json("test",JsonRequestBehavior.AllowGet);
} 
```

我的观点是

```
@using (Html.BeginForm("UploadImage", "Gallery", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
<div class="uploadMiddlePanel ">
    <p class="title">
        <img src="Images/event_equation_icon.png" width="25" height="25" alt="event Logo" />
        Gallery Management</p>
    <p class="lightGrayTitle">
        Upload Images</p>
    <div class="UploadContainer">
        <div class="uploadImagePanel" id="gallery">
        @foreach (var src in @imageList)
        { 
            <img src="@Url.Content("~/Content/GalleryImages/" + src.Text)"  id="@Url.Content(src.Value)" alt="Image" class="imagePreview"  />
        } 
```

但是我的 js 调用函数并没有出现在我的控制器之前，缺少任何东西或者是从 js 调用控制器的任何其他方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:37:18.897

尝试像这样调用您的控制器操作结果

```
 $.ajax({
        type: 'POST',
        url: "@Url.Content("/controllerName/SaveImage/")", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:44:35.053

请尝试以下内容。

1) 你的页面不应该有任何 jQuery 错误

2) 尝试使用下面的直接 url $.ajax({ url: 'ControllerName/SaveImage',

3) 控制器的返回类型

[HttpPost] public JSONResult SaveImage(int imageids)

# css - Safari 6 CSS 悬停错误

> ID：12016147
> 
> 赞同：0
> 
> 时间：2012-08-18T05:37:06.567
> 
> 标签：css, safari, webkit, hover

这是问题的示例：http: [//jsfiddle.net/wibbletech/gRshU/](http://jsfiddle.net/wibbletech/gRshU/)

列表中的项目是相对位置 div（它是一个简单的字体名称列表）。CSS 悬停更改项目的背景颜色。但是，列表中的最后一项（等宽）仅在鼠标悬停在该项的上半部分时才应用悬停设置。

我在 Safari 6.0 (8536.25)、Chrome 21.0.1180.79 和 Webkit 6.0 (8536.25、537+) 上遇到了这个问题。但是，Opera 11.66 和 Firefox 14.0.1 可以正常工作。

我正在使用 2012 MacBook Pro Retina - Mountain Lion。

任何人都可以验证这个问题也发生在他们身上吗？它看起来像一个错误还是我做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:03:42.143

试试这个不确定但希望有一些 +ve 结果

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
#selector{ background: color; }
} 
```

# java - 如何为 SQL Server 配置 persistence.xml

> ID：12016149
> 
> 赞同：0
> 
> 时间：2012-08-18T05:37:27.800
> 
> 标签：java, sql-server, jpa

如何配置 persistence.xml 文件以连接到我的 SQL Server。一些信息连接为：主机，数据库名称，用户名，密码，端口，...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:29:39.500

首先为 sqlserver 下载 jdbc 驱动程序并将其放入 glassfish lib 目录并启动它。使用 Glassfish 管理控制台：

1.  定义一个 jdbc 连接池并指定 Host, DatabaseName, UserName, Password, Port, ...
2.  定义一个 jdbc 资源并选择您在步骤 1 中指定的连接池名称
3.  然后获取 jdbc 资源的名称并将其放入您的 persistence.xml 文件中：`<jta-data-source>YOUR-JDBC-RESOURCE-NAME</jta-data-source>`

现在您可以连接到数据库了。

如果您使用的是 Netbeans，它有一些不错的向导可以在 glassfish 中生成连接池和 jdbc 资源。

由于您使用的是 JEE6，这是使用注释的另一种方式：

```
 import javax.annotation.sql.DataSourceDefinition;

@DataSourceDefinition(name = "java:app/env/myDatasource",
        minPoolSize = 0,
        initialPoolSize = 0,
        className = "your.driver.class",
        serverName="localhost",
        user = "admin",
        password = "admin",
        databaseName = "test"
)

public class DbConfiguration {
} 
```

有关更多信息，请查看[此处](http://www.tech-juice.org/2012/05/30/datasourcedefinition-postgresql-example-in-java-ee/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T18:34:41.443

使用配置`.xml`文件设置 MySQL 数据库的连接池对于像您这样刚开始的人来说可能非常麻烦。

在我看来，你应该看看这个[简短的指南](http://www.javaxt.com/Tutorials/Glassfish/How_to_set_up_a_Connection_Pool)。您只需启动 Glassfish 服务器，打开浏览器并浏览`http://yourdomain.com:4848`即可访问管理面板。之后，只需按照该文章中的说明创建`JDBC Connection pool`and `JDBC Resource`。此时，您只需要`persistence.xml`使用您的 IDE（NetBeans 等）打开文件并使用您的`Data Source`名称设置属性即可`JDBC Resource`。

需要注意的一点是，您必须下载最新的[MySQL Connector/J](http://www.mysql.com/downloads/connector/j/)并复制文件

```
mysql-connector-java-<version>-bin.jar 
```

进入文件夹

```
<GlassFish-install-folder>\glassfish\domains\domain1\lib\ext 
```

否则，`Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource`如果您在创建`JDBC Connection pool`.

# c# - 无法在 IIS 上读取 excel 文件

> ID：12016152
> 
> 赞同：2
> 
> 时间：2012-08-18T05:39:05.047
> 
> 标签：c#, asp.net, iis

我正在尝试在我的 asp.net 网站上阅读 Excel 表。文件由用户上传，然后我阅读它并在网格视图中显示结果。当我在 Visual Studio 环境中运行它时，一切正常。但是当我在 IIS 上尝试相同的代码时，它给出了 Exception `Unspecified Error`。我正在使用以下代码：

```
string excelConnection = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+Server.MapPath("~/doc/")+ filepath+";Extended Properties="+ "\"" + "Excel 12.0;HDR=YES;" + "\"";
        string query = "select * from [Sheet1$]";
        OleDbConnection con = new OleDbConnection(connection);
        con.Open();               // Exceptionoccurs here
        OleDbCommand cmd = new OleDbCommand(query, con);
        cmd.CommandType = CommandType.Text;
        OleDbDataReader dr = cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Load(dr);
        testGrid.DataSource = dt;
        testGrid.DataBind(); 
```

异常堆栈跟踪：

```
[OleDbException (0x80004005): Unspecified error]
   System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection) +351
   System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject) +86
   System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup) +31
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +76
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.OleDb.OleDbConnection.Open() +43
   DataBaseSolution.DbSolution.select(String connection, String providername, String query) in F:\vs backup\DataBaseSolution\DataBaseSolution\DbSolution.cs:63
   _Default.insertDb(String filepath) in c:\inetpub\wwwroot\test\Default.aspx.cs:82
   _Default.checkButton_Click(Object sender, EventArgs e) in c:\inetpub\wwwroot\test\Default.aspx.cs:39
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

请向我建议任何代码更新或任何其他我可以完成此任务的方法。

**已编辑：提供堆栈跟踪并用注释标记行，其中出现异常**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T08:19:02.233

检查权限 -> 安全或检查您的应用程序池 -> 高级设置 -> 启用 32 个应用程序 -> 真

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T06:31:01.250

首先确保你有一个MS。安装 Oledb 驱动程序，然后尝试此代码

```
OleDbConnection connection = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + file + ";Extended Properties=Excel 12.0;");
OleDbCommand command = new OleDbCommand("SELECT * FROM [Sheet1$]", connection);
OleDbDataReader dr;
connection.Open();
dr = command.ExecuteReader(CommandBehavior.CloseConnection);

//dbo.Employees
cn.Open();

dt.Load(dr);
cn.Close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:01:48.593

我曾与 Excel 的 OleDb-provider 合作过几次，如果你问我，这真的很可怕。在我需要使用 Excel 文件的上一个项目中，我使用了[http://epplus.codeplex.com/](http://epplus.codeplex.com/)，这是一个托管库，与 OleDb 变体相比，它在速度和易用性方面均胜出。缺点是它只支持 .xslx 文件（不支持 .xsl），但如果你可以不用它，那么它是一个更好的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-23T08:14:49.897

请检查您的权限和设置。

# javascript - 如何在 onpaste 方法中验证剪贴板数据？

> ID：12016162
> 
> 赞同：1
> 
> 时间：2012-08-18T05:41:15.323
> 
> 标签：javascript

```
<!DOCTYPE html>
<html>
<head><script type="text/javascript">
function onPaste(eve) {
    try {
        var txt = e.clipboardData.getData('text/plain');
        alert(txt);
    } catch (err) {
    }
} </script> </head><body>
<textarea cols=60 name="inputUsaaNum" onpaste="onpaste(event);"></textarea></body></html> 
```

请帮助验证来自文本区域的剪贴板数据，我需要确定它是否有任何空格字符，并且我想在回车（'\r'）的帮助下分隔值，请帮助????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:54:54.187

根据你最后的评论，你想要这样的东西：
`txt.replace(/[^1-9_\t ]/g,'').replace(/[\t]/g,'\r');`

这将首先用 '' 替换不是 1 到 9 或 _ 或空格或制表符的所有内容，然后将所有制表符替换为`\r`. 为什么我要包含选项卡，询问者指定了 excel 数据。

祝你好运！！

更新您的评论：

```
if (txt.match(/[^1-9_\t ]/g)) {
    alert('error');
} else {
    txt=txt.replace(/[\t]/g,'\r');
} 
```

# iphone - Uitableview Accessorytype复选标记重置代码

> ID：12016168
> 
> 赞同：0
> 
> 时间：2012-08-18T05:42:56.120
> 
> 标签：iphone, ios, uitableview, uibutton

我知道如何处理 cellaccesory 类型复选标记，在这里我想要一个按钮来取消选中被复选标记的整个表格单元？这是我的代码，任何人都可以帮我编码

```
- (void)viewDidAppear:(BOOL)animated
{
UIBarButtonItem *rest = [[UIBarButtonItem alloc]initWithTitle: @"RESET" style:      UIBarButtonItemStyleBordered target: self action: @selector(uncheckCells)];
UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[toolbar setItems:[NSArray arrayWithObjects:rest,flexibleSpace,flexibleSpace,home,nil]];
[self.navigationController.view addSubview:toolbar];
[self.tableView reloadData];
} 
```

这是我的功能的代码

```
-(void)uncheckCells//unchecking function
{
[self.tableView reloadData];//HERE WHAT SHOULD I DO
}
-(void)hom
{
[self dismissModalViewControllerAnimated:YES];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
 }
cell.textLabel.text = [ar objectAtIndex:indexPath.row];    
cell.selectionStyle=UITableViewCellSelectionStyleNone;
if(cell.accessoryType==UITableViewCellAccessoryCheckmark)
{
cell.backgroundColor=UIColorFromRGB(0xd05818);
cell.detailTextLabel.text=@"packed";
cell.detailTextLabel.textColor=[UIColor cyanColor];
}
else
{
cell.backgroundColor=[UIColor whiteColor];
cell.detailTextLabel.text=@""; 
}
return cell;
[self.tableView reloadData]; 
}
(void) deselect
{   
[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow]      animated:YES];

}
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
[tableView reloadData];    
[tableView deselectRowAtIndexPath:indexPath animated:NO];
printf("User selected row %d\n", [indexPath row] + 1);
if ([[tableView cellForRowAtIndexPath:indexPath] accessoryType] ==      UITableViewCellAccessoryCheckmark)
{
[[tableView cellForRowAtIndexPath:indexPath]setAccessoryType:UITableViewCellAccessoryNone];
}
else
    [[tableView cellForRowAtIndexPath:indexPath]setAccessoryType:UITableViewCellAccessoryCheckmark];
    [self performSelector:@selector(deselect) withObject:nil afterDelay:0.0f];
[tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:56:18.993

如果你在`didSelectRowAtIndexPath:`方法上做复选标记。A`reloadData`会为你工作。

例如。

假设您有一个带选择器的按钮`uncheckCells`

```
-(void)uncheckCells
{
   [self.tableView reloadData];
} 
```

这应该对你有用。

编辑：添加`cell.accessoryType = UITableViewCellAccessoryNone;`您的`if (cell == nil)`条件。

或者这样做：

```
-(void)uncheckCells
{
for (int section = 0, sectionCount = self.tableView.numberOfSections; section < sectionCount; ++section) {
        for (int row = 0, rowCount = [self.tableView numberOfRowsInSection:section]; row < rowCount; ++row) {
            UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section]];
            cell.accessoryType = UITableViewCellAccessoryNone;
            cell.accessoryView = nil;
        }
    }
} 
```

我希望它会奏效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T07:01:43.120

通过阅读您的代码，您似乎正在对表格视图本身设置复选标记。

您真正应该做的是在数据源中存储单元格是否具有复选标记，并在`tableView:cellForRowAtIndexPath:`方法中使用此信息来显示复选标记。

And your deselect method should be going through you datasource and unsetting whatever marker you have there that says whether or not your tableview has a check mark.

That way, when you scroll a tableview, or just call `[tableView reloadData];` your datastore will be used to decide whether or not to display a checkmark or not.

# c++ - 使用堆栈实现的所有可能路径的 DFS 算法

> ID：12016169
> 
> 赞同：1
> 
> 时间：2012-08-18T05:43:28.277
> 
> 标签：c++, algorithm

是否有可能使用堆栈的 DFS 实现，它为我提供了在图形（循环/非循环）的情况下从一个顶点到另一个顶点的所有可能路径。

我目前的 DFS 代码如下：-

```
void Graph::DFS(int x, int required){
stack s;
bool *visited = new bool[n+1];
int i;
for(i = 0; i <= n; i++)
    visited[i] = false;
s.push(x);
visited[x] = true;
if(x == required) return;
cout << "Depth first Search starting from vertex ";
cout << x << " : " << endl;
while(!s.isEmpty())
{
    int k = s.pop();
    if(k == required)
    {
      cout<<k<<" ";
      break;
    }
    cout<<k<<" ";
    for (i = n; i >= 0 ; --i)
        if (isConnected(k, i) && !visited[i]) 
        {
            s.push(i);
            visited[i] = true;
        }
}
  cout<<endl;
  delete [] visited;
 } 
```

如果存在的话，这确实给了我一条可能的路径，但我想要的是`all possible paths`而不仅仅是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T07:26:14.963

不——在无向图的情况下，有无限数量的路径（只需在任何给定的边上来回走动，或绕过循环），因此您不能编写代码来将它们全部返回。

如果您对其他一些限制（例如“仅访问每个节点一次的路径”）进行一些限制，那么可以。

对于“只访问每个节点一次的路径”的约束，您将基本上更改您的搜索，以便visited[i] 是“我在这条路径上访问过[i] 这个”而不是“我曾经访问过这个节点吗？” （就像现在在代码中一样），然后每次到达目标时，都应该将当前路径添加到找到的路径列表中，并像没有找到它一样继续。

# git - 更干净的 git 远程 URL

> ID：12016171
> 
> 赞同：2
> 
> 时间：2012-08-18T05:44:09.863
> 
> 标签：git, gitweb

我正在尝试使用 gitweb 作为 Web 界面运行我自己的 git 服务器。我在这里提供了一个名为 'git/' 的目录`/Users/me/Sites/git`：`git.example.com`

我在我的 Mac 上创建了一个名为“git”的用户，这样我就可以 ssh git@git.example.com，并且我登录正常。

现在，假设我以“me@example.com”（用户）的身份工作，并且我想推送到我的远程@git.example.com，我必须输入`git remote add gitweb ssh://git@git.example.com/~/Sites/git/projectname.git`

有什么办法可以`~/Sites/git/`从网址中删除？理想情况下，我希望能够输入：`git remote add gitweb ssh://git@git.example.com/projectname.git`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:02:15.737

GitWeb 和 ssh 用于两种不同的 Git 访问机制：

*   Gitweb 将由 Apache http 服务器提供服务：以我[`httpd.conf`](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L49-L60)的为例。但它不是用于克隆，仅用于浏览。
*   http(s) 访问将需要[此配置](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L95)，并使用别名调用`git-http-backend`（在我的示例中，我调用`gitolite-shell`是因为我想从[Gitolite 授权层中受益](http://sitaramc.github.com/gitolite/auth.html)）
*   ssh 访问是通过 ssh 守护进程（这里不需要 git 守护进程，而且 git 协议不能用于推送），并且需要完整路径。

ssh 不需要完整路径来执行 clone/push/pull 命令的唯一情况是它使用[ssh**强制命令**机制](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)来拦截您的 git 命令并调用自定义脚本（它可以转换您的“ `projectname.git`”变成“ `~/Sites/git/projectname.git`”）。
例如，这就是[Gitolite](https://github.com/sitaramc/gitolite)所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:22:50.770

你可以利用 git deamon 的 --base-path，例如我在 192.168.52.2 的 /home/fengxx/gitdemo/ 下共享一个 git repo1

```
git daemon --verbose --export-all --base-path=/home/fengxx/gitdemo/ 
```

在另一台电脑上，我可以运行

```
git clone git://192.168.52.2/repo1 
```

如果我必须使用 ssh，则 URL 将是 ~/gitdemo/repo1

```
git clone ssh://fengxx@192.168.52.2/~/gitdemo/repo1 
```

您可以通过以下方式设置 user.name

```
git config --global user.name yourlogin 
```

# ubuntu - 如何创建执行写入文本文件的 shell 脚本的 cron 作业

> ID：12016174
> 
> 赞同：0
> 
> 时间：2012-08-18T05:44:51.173
> 
> 标签：ubuntu, cron, crontab, ubuntu-10.04, cron-task

我创建了一个 Shell 脚本，如下所示

**样本.sh**

```
  回声“你好”

```

我还在 /etc/crontab 下的 cron 选项卡中添加了 cron 作业，如下所示

```
* * * * * /home/Sample.sh > /home/Sample.txt

```

我在 /home/ 目录中创建了 Sample.txt 文件。

我还检查了文件的读写权限

当我执行 Sample.sh 文件时，它工作正常。它写入 Sample.txt 文件

现在我不明白为什么它没有从我安排的 cron 任务中写入文本文件

我正在使用 Ubuntu 10.04

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-16T03:22:07.143

第一个也许您可以在顶部编写调用脚本，例如`#!/bin/sh`. 它在文件 bash 中是必需的。

之后你可以运行为：

```
* * * * * bash /home/Sample.sh > /home/Sample.txt 
```

如果你运行不正常。您可以查看 [stackoverflow.com/11932056#11932056](https://stackoverflow.com/questions/11932014/how-to-run-a-shell-script-by-cron-job/11932056#11932056)

# django - 美味的单一资源

> ID：12016181
> 
> 赞同：1
> 
> 时间：2012-08-18T05:46:43.840
> 
> 标签：django, api, tastypie

我正在编写一个带有美味派的 API，我希望 API 端点只返回一个资源的 1 个实例。我希望这个工作的方式是强制执行一个参数，比如一个 ID。

例如，我希望 /api/v1/users 返回错误或声明所需参数不存在的语句。但是，我希望 /api/v1/user/:id 简单地返回该用户的 id。

也许我没有找到正确的东西，但我找不到任何关于如何做到这一点的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:46:40.737

您可以在 Class Meta 中使用以下内容

```
 list_allowed_methods = []
    detail_allowed_methods = ['get'] 
```

这将禁用列表值，但在提供 id 时允许它们。

# hadoop - 在 hadoop 中执行 HDFS 命令

> ID：12016185
> 
> 赞同：0
> 
> 时间：2012-08-18T05:47:56.477
> 
> 标签：hadoop

刚启动 Hadoop 并希望执行列出的所有**hdfs 命令，同时在命令行上给出此命令**

```
$ hdfs 
```

下面列出了很多关于执行上述 hdfs 命令的命令。

> 运行 hadoop-2.0.0-cdh4

是否有任何链接或任何文档。

> 谢谢安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:59:00.560

只需通过本手册获取任何帮助 [http://hadoop.apache.org/common/docs/r1.0.3/commands_manual.html](http://hadoop.apache.org/common/docs/r1.0.3/commands_manual.html) 希望这会有所帮助 谢谢，Gladnick

# java - 如何解决线程饥饿？

> ID：12016186
> 
> 赞同：4
> 
> 时间：2012-08-18T05:48:14.937
> 
> 标签：java, multithreading, concurrency

我的班级有以下锁定机制。当我运行这个程序时，一个线程不断地获取并重新获取锁，而没有给任何其他线程获取锁的机会，从而导致饥饿。如何重构我的锁定机制，以便一旦一个线程放弃锁定，另一个线程获取它？我希望看到其他线程获得锁，而不必等到拥有锁的线程停止运行。

```
 private final ReentrantLock lock = new ReentrantLock();
  private final Condition condition = lock.newCondition();

  private final Map<Integer, Long> locksMap = new HashMap<Integer, Long>();

  /** {@inheritDoc} */
  @Override
  public long lock(int recNo) throws RecordNotFoundException {
    ValidationUtils.checkNegative(recNo);

    lock.lock();
    long id = Thread.currentThread().getId();
    try {
      while (locksMap.get(recNo) != null) {
        try {
          System.out.println("Thread " + id + " is waiting.");
          condition.await();
        }
        catch (InterruptedException e) {
          LOGGER.log(Level.SEVERE, e.getMessage());
          return -1;
        }
      }
      Long prevValue = locksMap.put(recNo, id);
      if (prevValue != null) {
        String msg = "Expected no value for " + recNo + " but was ";
        msg += prevValue + ".";
        throw new IllegalStateException(msg);
      }
      System.out.println("Thread " + id + " has the lock.");
    }
    finally {
      lock.unlock();
    }
    return id;
  }

  /** {@inheritDoc} */
  @Override
  public void unlock(int recNo, long cookie) throws RecordNotFoundException, SecurityException {
    ValidationUtils.checkNegative(recNo);
    if (cookie < 0) {
      throw new IllegalArgumentException("cookie is negative.");
    }

    lock.lock();
    try {
      if (locksMap.get(recNo) == cookie) {
        locksMap.remove(recNo);
      }
      else {
        String msg = "Wrong lock cookie. Expected " + locksMap.get(recNo);
         msg += ", was " + cookie + ".";
        throw new IllegalStateException(msg);
      }
      long id = Thread.currentThread().getId();
      System.out.println("Thread " + id + " no longer has the lock.");
      condition.signalAll();
    }
    finally {
      lock.unlock();
    }
  }

  /**
   * Tests the locking mechanism in this class.
   * 
   * @param args None.
   */
  public static void main(String... args) {
    ExecutorService threadPool = Executors.newFixedThreadPool(5);
    final CountDownLatch latch = new CountDownLatch(5);
    final Data data = new Data();
    Runnable task = new Runnable() {
      @Override
      public void run() {
        try {
          for (int index = 0; index < 10; index++) {
            long cookie = data.lock(1);
            Thread.sleep(1000); // Do something.
            data.unlock(1, cookie);
          }
        }
        catch (SecurityException e) {
          e.getStackTrace();
        }
        catch (RecordNotFoundException e) {
          e.getStackTrace();
        }
        catch (InterruptedException e) {
          e.getStackTrace();
        }
        finally {
          latch.countDown();
        }
      }
    };
    for (int index = 0; index < 5; index++) {
      threadPool.execute(task);
    }
    try {
      latch.await();
    }
    catch (InterruptedException e) {
      e.getStackTrace();
    }
    threadPool.shutdown();
  } 
```

这是输出。请注意，线程 9 仅在循环完成后才会停止获取锁。

```
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 9 has the lock.
Thread 13 is waiting.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 9 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 13 has the lock.
Thread 12 is waiting.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 13 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 12 has the lock.
Thread 11 is waiting.
Thread 10 is waiting.
Thread 12 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 11 has the lock.
Thread 10 is waiting.
Thread 11 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock.
Thread 10 has the lock.
Thread 10 no longer has the lock. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T06:57:28.853

`ReetrantLock`与公平政策一起使用。公平政策避免线程饥饿。

```
private final ReentrantLock lock = new ReentrantLock(true); 
```

Java 文档

> public ReentrantLock(boolean fair) 使用给定的公平策略创建 ReentrantLock 的实例。参数： fair - 如果此锁是公平的，则为 true；否则为假

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T06:11:18.720

我知道你已经有了一个可以接受的答案，但我只想加上我的 2 美分。

如果您在单核机器上运行，甚至可能是双核机器或其他东西，问题可能只是因为 JVM 交换线程的频率不足以让另一个线程有机会获得锁定。

无论如何，[`Thread.yield()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#yield%28%29)在释放锁之后简单地调用就足以让其他线程有机会在原始线程再次获取锁之前获得锁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T06:44:29.210

一般来说，锁不应该长时间持有。所以

```
 long cookie = data.lock(1);
        Thread.sleep(1000); // Do something.
        data.unlock(1, cookie); 
```

是不可接受的。这样，每时每刻只有一个线程会“做某事”。即使您按照建议添加 yeild() 或 sleep()，吞吐量性能也保持不变。您应该获取锁，检索任务，释放锁，然后才“做某事”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T05:52:37.533

一旦一个线程放弃了一个锁，为什么不使用 Thread.sleep(int millis) 让它休眠足够长的时间让另一个线程来获取它？

# php - codeigniter 模板引擎，包括语言解析器

> ID：12016188
> 
> 赞同：8
> 
> 时间：2012-08-18T05:48:28.243
> 
> 标签：php, codeigniter, template-engine

我没有看到任何机制来引用将由模板解析器重写的视图中的语言键。现在，我的视图包含如下字符串：

```
{register}
{userid}
{password} 
```

我希望将这些替换为语言定义中的匹配字符串，就好像我在视图中完成了一样：

```
 <?=$this->lang->line('register')?>
   <?=$this->lang->line('userid')?>
   <?=$this->lang->line('password')?> 
```

但是，我没有看到任何自动支持这一点的机制。所以，我在控制器中这样做：

```
$data = array(
'userid' => $this->lang->line('userid'),
'password' => $this->lang->line('password'),
'register' => $this->lang->line('register')
);
$this->parser->parse('register', $data); 
```

这对我来说似乎很愚蠢。我认为模板解析器类应该自动支持任何定义的语言键的扩展。也许通过使用第二组分隔符：

```
[register]
[userid]
[password] 
```

或者也许通过使用某个指标，如下划线：

```
{_register}
{_userid}
{_password} 
```

或者也许是 GetText 样式：

```
_(register)
_(userid)
_(password) 
```

有人可以告诉我我正在寻找的功能是否真的可用而我只是错过了它？否则，我的建议是否合理，或者是否有更好的替代想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T19:38:43.040

不幸的是 CI 的内置模板解析器类没有这个功能。您可以在[sparks 目录](http://getsparks.org/)中查看，有多个 spark 集成了许多模板引擎，如 smarty 或 twig，可以调整以创建类似的东西。

此外，您可以尝试扩展`CI_Parser`类为您执行此操作，如下所示：

```
<?php

class MY_Parser extends CI_Parser {

    const LANG_REPLACE_REGEXP = '!\{_\s*(?<key>[^\}]+)\}!';
    public $CI = null;

    public function parse($template, $data, $return = FALSE) {
        $this->CI = get_instance();
        $template = $this->CI->load->view($template, $data, TRUE);
        $template = $this->replace_lang_keys($template);

        return $this->_parse($template, $data, $return);
    }

    protected function replace_lang_keys($template) {
        return preg_replace_callback(self::LANG_REPLACE_REGEXP, array($this, 'replace_lang_key'), $template);
    }

    protected function replace_lang_key($key) {
        return $this->CI->lang->line($key[1]);
    }
} 
```

这将`{_ password}`用什么替换类似的部分`$this->lang->line('password')`。可以针对您喜欢的版本调整模式。

把它放在下面`application/libraries/MY_Parser.php`，CI 应该会选择它，不需要更改控制器代码，如[*扩展本机库*](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)部分中所述。

# android - 安卓触摸屏尺寸

> ID：12016191
> 
> 赞同：1
> 
> 时间：2012-08-18T05:48:52.957
> 
> 标签：android, linux, android-ndk

我想得到触摸屏的大小。因此，当我在模拟器中测试此代码时，X 的最小值为 0（Y 也是，当按下屏幕的“角落”时）。但是当我在真实设备上测试代码时，X 显示 2000。所以我想读取屏幕的绝对值。我想我需要获得屏幕的“最小、最大值”值。我怎样才能读取这个值？

```
main()
{
    int fileno = open("/dev/input/event0",O_RDONLY),num_bytes;
    char ev[50];
    num_bytes=read(fileno,&ev,sizeof(struct input_event));

    if(num_bytes<=0)
    {
          perror("Cannot access");
          exit(FAILURE);
    }
    printf("%d\n",fileno);
    printf("\nNumber of bytes read is %d\n string is%s\n",num_bytes,ev);
    close(fileno);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:26:16.323

```
 DisplayMetrics metrics = new DisplayMetrics();
 getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

这将告诉您屏幕的实际大小（以像素为单位），但在计算实际可用区域时，您仍然需要考虑密度以及操作栏或标题栏。

# java - jgit需要2个参数错误信息

> ID：12016192
> 
> 赞同：1
> 
> 时间：2012-08-18T05:48:54.420
> 
> 标签：java, eclipse, jgit

我正在尝试一个简单的 java 类来测试 jGit 的功能（见下文）。

```
import org.eclipse.jgit.lib.Repository;
import org.eclipse.jgit.storage.file.FileRepositoryBuilder;

import java.io.File;
import java.io.IOException;

public class CreateRepository {
   public static void main( String[] args ){
       Repository myrepo = createRepository("/mypath");
   }
public static Repository createRepository(String repoPath) {

        FileRepositoryBuilder builder = new FileRepositoryBuilder();
        Repository repo = null;
        try {
            repo = builder.setGitDir(new File(repoPath))
              .readEnvironment() // scan environment GIT_* variables
              .findGitDir() // scan up the file system tree
              .build();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    return repo;
}
} 
```

当我在构建路径中使用最新的 jgit jar 在 Eclipse Indigo 上运行它时，我收到错误消息“需要 2 个参数”——没有别的，没有例外！:S

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:00:06.210

首先查看包 org.eclipse.jgit.api。最简单的开始是从 Git 类开始：

```
// clone a repository
Git git = Git.cloneRepository().setURI("git://yourserver/repo.git").call();

// init a fresh new repository in the current directory
Git git = Git.init().call();

// open a repository on your disk
Git git = Git.open(new File("/path/of/repo"); 
```

然后探索从这些起点获得的 git 对象上可用的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:25:19.503

JGit 中唯一显示该错误消息的部分是在[main() 函数中`MyersDiff`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/diff/MyersDiff.java#L527-L533)。

```
/** 
 * @param args two filenames specifying the contents to be diffed
 */
public static void main(String[] args) {
  if (args.length != 2) {
    System.err.println(JGitText.get().need2Arguments);
    System.exit(1);
  }
  // ...
} 
```

所以检查你的类路径并确保你的项目（和你的`main()`）在 jgit.jar*之前*，并且你不会以某种方式调用错误的`main()`.

# hibernate - 休眠 hql 元素

> ID：12016199
> 
> 赞同：0
> 
> 时间：2012-08-18T05:50:55.210
> 
> 标签：hibernate

我创建了一个休眠程序并编写了一个查询并得到以下错误：

我有一个例外说明`java.lang.ClassCastException: java.lang.Double`

```
String qry="Select Distinct (s2Taxper) from S2 where s2Tc='601' AND s2Txcd!=''";
Iterator atItr2=hbSession.createQuery(qry).iterate();
String qry1="Select ahCode,ahName,ahRcNumber,ahCentralSalesTaxNumber From AccountHeader ORDER    BY  ahName ASC";

Iterator atItr1=hbSession.createQuery(qry1).iterate();

mainBean=new VatMainBean();

VatSubBeanList=new ArrayList<VatSubBean>();

while(atItr1.hasNext()){
    subBean=new VatSubBean();

    Object[] obj1=(Object[])atItr1.next();

    String ahCode  =(String)obj1[0];                                         
    String ahName  =(String)obj1[1];                                         
    String ahRcNumber=(String)obj1[2];                                        
    String ahCentralSalesTaxNumber=(String)obj1[3];

    if("v".equalsIgnoreCase(type)){
        if(ahRcNumber!=null&&!"".equalsIgnoreCase(ahRcNumber)){
            if(ahRcNumber.indexOf("/")<0&&ahRcNumber.indexOf(":")<0&&ahRcNumber.indexOf(" ")<0){
                //buyersTinNo.trim();
                if(ahRcNumber.length()==11){
                    buyersTinNo=ahRcNumber;
                }
            }
        }
    }
    else{
        if(ahCentralSalesTaxNumber!=null&&!"".equalsIgnoreCase(ahCentralSalesTaxNumber)){
            buyersTinNo=ahCentralSalesTaxNumber;
        }
    }

    DoubleCheck doubleObj1=new DoubleCheck();

    List<String> taxPerList=new ArrayList<String>(); 

    int i = 0;
    while (atItr2.hasNext()){
        Object[] obj2=(Object[])atItr2.next();// error is shown here

        String s2Taxper=(String)obj2[0];

        int s1Docno=(Integer)obj2[1];

        if(Double.parseDouble(s2Taxper)>0){
            taxPerList.add(s2Taxper);
        } 
```

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:01:58.140

你们中的一个文件是双重的，您尝试将其转换为字符串。查看列定义。如果要将 double 转换为字符串，则应通过 Double.tostring 执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:06:59.890

看你的代码...

```
String qry="Select Distinct (s2Taxper) from S2 where s2Tc='601' AND s2Txcd!=''";
// ....
Iterator atItr2=hbSession.createQuery(qry).iterate();
// ....
while (atItr2.hasNext()){
    Object[] obj2=(Object[])atItr2.next();// error is shown here
} 
```

很明显，您尝试转换的`Object[]`内容基本上是 a `S2`，因此是错误。

# java-me - lwuit 文本区域

> ID：12016200
> 
> 赞同：0
> 
> 时间：2012-08-18T05:51:06.250
> 
> 标签：java-me, lwuit

我为两个 XML 文件开发了一个 RSS 应用程序，并将其显示在两个 LWUIT 选项卡上。问题出在我的 LWUIT TextArea 上，每当我点击我的 ListForm（它包含来自 RssFile 的标题）时，我都需要显示来自 RSS 文件的描述信息。我第一次能够显示与在 ListForm 中单击的标题相关的描述。如果我下次单击 ListForm，我可以在 textarea 中一次又一次地显示相同的描述..（即使我从 RssFile 获得相关描述）

这是我的代码：

```
 private void displayCompleteNewsScreen(News detailNews) {

        Label title = new Label(detailNews.getTitle()); 
        form2.setTitleComponent(title);
        String Description = detailNews.getDescription();
        System.out.println("Description" + Description);//Here i am able to get different Description values Related to myList Screen but in text area it is displaying First one always
        big = new TextArea();

        big.setEditable(false);
        big.setText(Description);

        form2.addComponent(pubDate);
        form2.addComponent(big);
        form2.show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:08:46.963

当您重用`form2`实例时，您应该在`displayCompleteNewsScreen`方法中清除它。打电话`removeAll`前打电话`setTitleComponent`。

并且不要忘记`form2` `Command`再次设置 s `displayCompleteNewsScreen`。

# java - Windows 7 中的 javaws 应用程序启动问题

> ID：12016201
> 
> 赞同：1
> 
> 时间：2012-08-18T05:51:17.510
> 
> 标签：java, windows-7-x64, jnlp, java-web-start, ioexception

我正在尝试在**Windows 7 64 位**上启动 jws 应用程序（使用 jnlp 文件）并遇到以下问题。

```
ERROR [L:org.apache.catalina.startup.ContextConfig F: T:'javawsApplicationMain'] Exception >fixing docBase: {0} 
java.io.IOException: The filename, directory name, or volume label syntax is incorrect
at java.io.WinNTFileSystem.canonicalize0(Native Method)  
at java.io.Win32FileSystem.canonicalize(Unknown Source)  
at java.io.File.getCanonicalPath(Unknown Source)  
at java.io.File.getCanonicalFile(Unknown Source)  
at org.apache.catalina.startup.ContextConfig.fixDocBase(ContextConfig.java:841)  
at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:1012)  
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:279) 
```

同一个文件在**windows XP**上就像一个魅力。
任何帮助表示赞赏。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:58:52.103

在继续之前，请务必使用[JaNeLA验证 JNLP。](http://pscode.org/janela/)许多启动文件是无效的，JWS 客户端如何解释无效的启动文件是不确定的 - 它可能导致各种奇怪的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:29:51.230

我发现了我的错误和不同之处。
Jnlp 资源属性*arch* ，对于*os = Windows*采用**“x86”**和**“amd64”（即使是 Intel 64 位）**。所以在使用*os= W​​indows*时避免使用**“x86_64”**。还可以使用*JaNeLa* 验证您的*JNLP*，您可能会遇到其他一些错误，在这种情况下，它是帮助您解决问题的绝佳工具。:)

# javascript - 如何使用 cucumber.js 连接 jasmin-node 期望和匹配器？

> ID：12016203
> 
> 赞同：0
> 
> 时间：2012-08-18T05:51:23.147
> 
> 标签：javascript, node.js, cucumber, bdd, jasmine

我喜欢使用一种测试语言（断言和匹配器）来进行单元测试和 BDD/功能测试。IE

```
stepDefinitions = ->
  @World = require("../support/world").World

  @Given /^I visit the website$/, (cb) ->
    (@visit 'http://localhost:3000', cb)

  @Then /^I should see "([^"]*)"'s homepage$/, (title, cb) ->
    (expect @browser.html()).not.toBeNull()
    cb?()

module.exports = stepDefinitions 
```

要求 jasmine-node 没有切割，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:23:58.590

我以前也想过这个问题。应该提取期望/匹配器机制。我快速浏览了一下，恐怕这不是一件小事。

NPM 上有一些包（例如[期望](https://npmjs.org/package/expectations)）提供类似期望的语法，但我还没有找到足够好的东西。

您也可以考虑 Node.js 的标准[断言库](http://nodejs.org/docs/latest/api/assert.html)。

# php - 是否可以将数据库中的表名称作为我的类的方法？

> ID：12016205
> 
> 赞同：0
> 
> 时间：2012-08-18T05:51:46.183
> 
> 标签：php, oop, pdo

我非常喜欢使用 PDO，所以它可能会打开。

用法可能如下：

```
$m = new MDB();

$m->Users()->GetRec($param); 
```

`Users()`是数据库中的表名，`GetRec($param)`是我的函数。

我看起来像这样的一种方式：

```
class MDB extends DB {

    function __construct(){

        parent::__construct();

        if ($result = $this->pdo->query("SHOW TABLES"))
        {

            while ($row = $result->fetch(PDO::FETCH_NUM))
            {
                // this is only my imagination (not working at all)
                __set($row[0],true);

            }

        }

    }

    // set
    public function __set($name, $value)
    {
        // here could be a method (not properties)
        $this->$name = $value;
    } 
```

当然，这一切似乎都不是我想要的。所以我能够在这个问题上得到一些建议和意见。

**更新**1。

感谢神奇的方法 __call，现在我正在努力做到这一点。观看我更新的代码：

```
class MDB extends DB {

    function __construct(){

    parent::__construct();

}

public function __call( $method, $param )
{

    $tables = array();

    if ($result = $this->pdo->query("SHOW TABLES"))
    {

        while ($row = $result->fetch(PDO::FETCH_NUM))
        {

            $tables[] = $row[0];

        }

    }

    if (in_array($method,$tables))
    {

        return $this;

    }
    else
    {

        return FALSE;

    }

} 
```

好吧，似乎它对我有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:43:24.400

是的，这是可能的！您的代码中的错误行是：

```
__set($row[0],true); 
```

在那里你应该打电话：

```
$this->$row[0] = true; 
```

看看下面的简单示例和 PHP [http://www.php.net/manual/en/language.oop5.overloading.php](http://www.php.net/manual/en/language.oop5.overloading.php)的重载文档。

```
class A{

//The array which will contain your data
private $tables;

function __construct($array){
    $counter = 1;
    foreach($array as $value){
        //That's the right call!    
        $this->$value = $counter++;
    }
}

function __set($name, $value){
    $this->tables[$name] = $value;
}

function __get($name){
    if (array_key_exists($name, $this->tables)) {
           return $this->tables[$name];
    }
}

}

$array = array('a1', 'a2', 'a3', 'a4', 'a5');
$a = new A($array);

foreach($array as $key){
    echo $a->$key;
} 
```

希望这有帮助！

# jquery - Jquery中的多重排序

> ID：12016208
> 
> 赞同：0
> 
> 时间：2012-08-18T05:52:11.070
> 
> 标签：jquery, sorting

我是 jquery 的新手。我想在表格上进行排序，我将解释我有 HTML 表格的场景，其中有 4 列，文档、语言、日期、格式。现在想在页面加载时对第一列文档和文档内排序按语言排序有人可以帮我吗？

这是 HTML

```
<table id="Sorting">
<tbody>
<tr>
<td>Documents</td>
<td>Language</td>
<td>Date</td>
<td>Format</td>
 </tr>
<tr>
<td>Document1</td>
<td>English</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>
<tr>
<td>Document2</td>
<td>French</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>
<tr>
<td>Document3</td>
<td>Dutch</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>
<tr>
<td>PDFDoc1</td>
<td>German</td>
<td>01/12/2012</td>
<td>XSL</td>
</tr>
<tr>
<td>PDFDoc2</td>
<td>English</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>
<tr>
<td>PDFDoc3</td>
<td>Norwegian</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>
<tr>
<td>Document4</td>
<td>Spanish</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>
<tr>
<td>Document5</td>
<td>Dutch</td>
<td>01/01/2012</td>
<td>PDF</td>
</tr>

</tbody>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:57:04.860

如果我是你，我会使用[DataTables](http://datatables.net/)插件。

" *DataTables 是 jQuery Javascript 库的插件。它是一个高度灵活的工具，基于渐进增强的基础，可以为任何 HTML 表格添加高级交互控件。* "

即使您是 jQuery 新手，并且使用插件的前景可能会吓到您，尝试自己编写所有这些表格排序的东西会更难。我使用过 DataTables - 它使用起来相对简单，而且文档非常广泛。

# jquery - offset().left 返回奇怪的值

> ID：12016209
> 
> 赞同：1
> 
> 时间：2012-08-18T05:52:13.467
> 
> 标签：jquery, jquery-plugins, offset

这让我很烦。

我在一个只有 200 个边距的元素上得到了 offset().left 的荒谬值 -32567。offset().top 工作正常。

编码：

```
(function( $ ) {

$.fn.draw = function( options ) {

    var settings = $.extend( {
        'width'  : null,
        'height' : null,
        'color' : '#000'
}, options);

return this.each(function() {        
    var o = settings;
    var obj = $(this);
    var offset = $(obj).offset();
    var c = o.color;
    var w = o.width;
    var h = o.height;
    var i = 0;
    var t, l = 0;

  $(obj).css('overflow','hidden');
   $(obj).css('position','relative');

  if(w != null){
      $(obj).css('width',w);
  }

  if(o.height != null ){
      $(obj).css('height',h);
  }

  $(obj).mousemove(function(e){
        var $mark = $('<div class="mark" id="mark'+i+'"/>');

        l = (e.pageX) - (offset.left);
        t = (e.pageY) - offset.top;
        $(this).append($mark);
        $("#mark"+i).css({
            'position' : 'absolute',
            'top' : t,
            'left' : l,
            'width' : '3px',
            'height' : '3px',
            'background' : c    
        });

        i++;
         }); 

});

};

})( jQuery ); 
```

我正在制作一个有趣的小插件，可以将任何块元素变成绘图板。当我只是在整个页面上使用鼠标位置并且框位于 0,0 时，它就起作用了。

现在我试图让它出现在浏览器上的任何地方，这就是问题出现的地方。

您可以在以下位置找到它（不工作）：[http ://hangerdev.com/zacksplayground/](http://hangerdev.com/zacksplayground/)

对不起，如果我语无伦次。我应该睡觉了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T06:00:03.547

可能缺少 $(document).ready()，在控制台中键入 $("#box").offset().left 会为我返回 200，即使警报显示为 -32k。

# jquery - jQuery。预加载 src 在另一个图像的数据属性中的图像

> ID：12016211
> 
> 赞同：1
> 
> 时间：2012-08-18T05:52:38.970
> 
> 标签：jquery

我需要能够预加载存储在 img 标签的数据属性中的图像

```
 <div id="slider" class="nivoSlider">
      <a href="#"><img src="http://domain.com/wp-content/themes/xx/images/heros/1-Image.jpg" data-overlay1="http://domain.com/wp-content/themes/xx/images/heros/1-Blog.png" data-overlay2="http://domain.com/wp-content/themes/xx/images/heros/1-anotherimage.png" /></a>

    <a href="#"><img src="http://domain.com/wp-content/themes/xx/images/heros/2-Image.jpg" data-overlay1="http://domain.com/wp-content/themes/xx/images/heros/2-Blog.png" data-overlay2="http://domain.com/wp-content/themes/xx/images/heros/2-anotherimage.png" /></a>
   </div> 
```

基本上我需要在 data-overlay1 和 data-overlay2 中预加载图像。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:56:08.970

您可以像这样找到这些 URL 并预加载它们：

```
var preloadImgs = [];
$(document).ready(function() {
    $("#slider img").each(function() {
        var img = new Image();
        img.src = $(this).data("overlay1");
        preloadImgs.push(img);
        img = new Image();
        img.src = $(this).data("overlay2");
        preloadImgs.push(img);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T06:16:08.917

```
$('#slider img').each(function(index, element) {
    $('<img/>')[0].src = $(element).attr('data-overlay1');
    $('<img/>')[0].src = $(element).attr('data-overlay2');
}); 
```

# database - 无法找到正确的技术来提高数据库检索的性能

> ID：12016212
> 
> 赞同：0
> 
> 时间：2012-08-18T05:52:52.973
> 
> 标签：database, performance, indexing

我有 12 个表中的 2 个表，这 2 个表有数百万条记录，当我从这些表中检索数据时，它需要更多时间。我听说过索引，但我认为索引不是可以在这里使用的正确方法。因为每次，我都需要获取整条记录而不是 2-3 列的记录。我也应用了 indexing ，但它比没有 indexing 花费了更多的执行时间，因为我获取了整个记录。

那么，在这里可以使用什么正确的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:20:14.003

我的论点基于 Oracle，但类似的原则可能适用于其他 RDBMS。请用使用的系统标记您的问题。

对于索引，列数几乎是无关紧要的。更重要的是行数。但我想你也需要所有或几乎所有这些。在这种情况下，索引将无济于事，因为它只会在流程中添加另一个步骤，而不会减少完成的工作量。

所以你似乎做的是大表扫描。这些通常不会被缓存，因为它们基本上会从存储在那里的所有其他有用数据中刷新整个缓存。因此，每次您选择此类数据时，您都必须从光盘中刮入，也可能通过电线发送。这势必需要一些时间。

根据您的描述，最好的方法可能是通过将数据缓存到尽可能靠近应用程序的位置来减少磁盘读取和网络流量。尝试在应用程序的机器上设置缓存，可能作为应用程序的一部分。读取数据一次，将其放入缓存中，然后再从它们中读取。如果这对您有任何价值，内存数据库将允许您保留基于 SQL 的访问路径。

可能在任何人尝试使用它之前尝试在后台填充缓存。

当然这会消耗相当多的内存，你必须判断这是否可行。

第二种方法是调整缓存设置以使数据库将这些表缓存在内存中。但请注意，这将影响整个数据库的性能，而不是以积极的方式。

第三种选择可能是将您的处理逻辑移动到数据库中。它不会减少磁盘 I/O 的数量，但至少您可以将网络排除在循环之外（假设这是问题的一部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:05:42.887

有几种方法可以尝试：-

1.  启用/增加数据库的查询缓存大小。
2.  应用程序级别的 memcached 将提高您的性能（当然）。
3.  调整您的查询以获得最佳性能，并配置最佳工作索引。

希望能帮助到你。我已经为 MySQL 数据库测试了所有三个 - django(python) 应用程序，它们显示出很好的结果。

# javascript - 理解 Eloquent Javascript 中的 negate() 函数示例（第 6 章）

> ID：12016213
> 
> 赞同：3
> 
> 时间：2012-08-18T05:53:24.403
> 
> 标签：javascript

作为一个新的 javascript 开发人员，我花了一些时间阅读[Eloquent Javascript 第 6 章中的](http://eloquentjavascript.net/chapter6.html)这段代码片段，我仍在尝试理解以下代码示例：

```
function negate(func) {
  return function(x) {
    return !func(x);
  };
}
var isNotNaN = negate(isNaN);
document.writeln(isNotNaN(NaN)); 
```

它特别让我失望的是以下行，我只是不理解一般的调用以及**NaN**的变量/值来自哪里：

```
document.writeln(isNotNaN(NaN)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:49:18.430

我认为 xdazz 几乎涵盖了它，但既然你说你仍然不明白，也许听听别人的解释会有所帮助。

这一行：

```
var isNotNaN = negate(isNaN); 
```

...声明一个`isNotNan`分配给函数调用结果的变量，作为参数`negate()`传递。`isNan`

该参数`isNan`实际上是[MDN 描述](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)的函数，但`negate()`可以接受任何函数作为参数，例如`var isNotFinite = negate(isFinite);`.

现在该`negate()`函数实际上创建并返回另一个函数，因此在该行运行`isNotNan`引用返回的函数之后，这意味着您可以将其调用为`isNotNan(someVal)`.

那么这一行：

```
document.writeln(isNotNaN(NaN)); 
```

... 调用`isNotNan()`并将其`NaN`作为参数传递，并将结果写入文档。

> *“我只是不明白...... NaN 的变量/值来自哪里”*

`NaN`是全局对象的属性。简单来说，它是 JS 环境提供给您的常量。

关于`negate()`函数的工作原理，它依赖于“闭包”的概念，这意味着在内部声明的函数*即使在*`negate()`完成后也可以访问其变量和参数*。*您会注意到返回的函数引用了该参数。因此，当您通过它调用返回的函数时，仍然可以访问设置为该函数的原始参数。*`negate()`*`func``isNotNaN()``func``isNan`

效果有点像这样做：

```
var isNotNaN = function(x) {
    return !isNan(x);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T05:56:41.073

`negate`将函数作为参数，并返回一个新函数，该函数返回与原始函数相反的结果。

[NaN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/NaN)是表示 Not-A-Number 的值。

> NaN 是全局对象的属性。
> 
> NaN 的初始值为 Not-A-Number — 与 Number.NaN 的值相同。在现代浏览器中，NaN 是不可配置、不可写的属性。即使不是这种情况，也要避免覆盖它。

NaN 是全局对象的一个​​属性，所以它是`window.NaN`.

并注意`typeof NaN`回报`number`。

# c++ - 是什么导致此代码中的分段错误？

> ID：12016215
> 
> 赞同：0
> 
> 时间：2012-08-18T05:53:43.427
> 
> 标签：c++, pointers, vector, segmentation-fault

我的代码出现分段错误，但我无法追踪问题。这是似乎发生分段错误的代码部分：

```
for (i = 0; i < ROBOTCOUNT; i++)
{
    ROS_INFO("Test 1");
    Robot r;
    robotList.push_back(&r);
    ROS_INFO("Test 2");
} 
```

运行时仅打印以下两行

```
Test 1
Test 2 
```

根据打印行，代码似乎只循环一次，然后发生分段错误。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:56:05.213

您正在保存在您的列表中被破坏的局部变量的地址。

```
for (i = 0; i < ROBOTCOUNT; i++)
{
    ROS_INFO("Test 1");
    Robot r; <== local variable
    robotList.push_back(&r); <== save address of local
    ROS_INFO("Test 2");
}  <== r is destroyed 
```

因此，您稍后可能正在访问已删除的内存

使用`std::vector<std::shared_ptr<Robot>>`：

```
std::vector<std::shared_ptr<Robot>> v;
std::shared_ptr<Robot> ptr( new Robot() );
v.push_back(ptr) 
```

# iphone - 需要从 nsarray for loop 更新 nsmanagedobject - iphone

> ID：12016216
> 
> 赞同：0
> 
> 时间：2012-08-18T05:53:44.640
> 
> 标签：iphone, ios, nsmanagedobject

我有一个 coredata 项目，我正在尝试以编程方式更新一个数字。我正在从 CoreData 中检索对象，然后将其存储到一个数组中。

然后，我遍历该数组以查看当前用户的 IP 是否存在于数据库中，并尝试更新该特定数组的访问次数。

问题是，它正在更新所有对象，而不仅仅是循环数组中的当前对象。

首先，我从核心数据中获取信息，如下所示：

```
- (void)fetchRecords {

    // Define our table/entity to use
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"IPAddr" inManagedObjectContext:managedObjectContext];

    // Setup the fetch request
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];

    // Define how we will sort the records
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"ipDate" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    [request setSortDescriptors:sortDescriptors];

    // Fetch the records and handle an error
    NSError *error;
    NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];

    if (!mutableFetchResults) {
        // Handle the error.
        // This is a serious error and should advise the user to restart the application
    }

    // Save our fetched data to an array
    [self setIpArray: mutableFetchResults];

} 
```

现在，我正在尝试查找当前用户 IP 是否存在于获取的结果中，如果存在，则更新访问次数：

```
// see if the ip is present and update if necessary
-(void)ipPresent {
    NSString * theCurrentIP = [self getGlobalIPAddress];
    for (IPAddr *allips in ipArray)
    {
        if ([allips.ipNum isEqualToString:theCurrentIP]) {
            NSLog(@"The IP %@ was found.", theCurrentIP);

            // update the ip

            NSError *error = nil;

            NSNumber *ipToUpdate = allips.ipAccess;

            NSNumber *addIpAccess = [[NSNumber alloc] initWithInt:1];
            NSNumber *updateIpAddress = [NSNumber numberWithFloat:([ipToUpdate floatValue] + [addIpAccess floatValue])];

            [self.ipArray setValue:updateIpAddress forKey:@"ipAccess"];

            if ([self.managedObjectContext save:&error]) {  // write to database
            NSLog(@"The IP Was Updated from %@ to %@", ipToUpdate, updateIpAddress);
            } else if (![self.managedObjectContext save:&error]) {
                NSLog(@"failed with error: %@", error);
            }
            break;

        } else {
            NSLog(@"The IP %@ was NOT found.", theCurrentIP);

        }
    }
} 
```

我很确定问题出在这一行：

```
[self.ipArray setValue:updateIpAddress forKey:@"ipAccess"]; 
```

同样，它正在更新所有实体，而不仅仅是当前循环中的实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:08:23.107

的确。您使用了错误的方法。 `self.ipArray`是一个`NSMutableArray`。

方法

```
- (void)setValue:(id)value forKey:(NSString *)key 
```

用于键值编码（这使得它适用于核心数据对象），但是当应用于数组时，它将在数组中的每个条目上调用 setValue:forKey:。

现在，您可以看到您也可以调用`setValue:forKey`单个数组元素`allips`，因为它的属性显然是符合 KVC 的——否则您将遇到不同的问题，看不到正在设置的值。

请注意，您也可以只分配属性...

```
allips.ipAccess = updateIpAddress; 
```

**编辑**

抱歉，可能应该读得更慢...您确实知道不必使用可变数组，对吗？您实际上并没有更改数组，只是更改了数组中的元素。不可变集合意味着集合内容不能改变，但是当你有一个指向对象的指针时，只要那个对象不是不可变的，你仍然可以改变它的属性。

因此，如果你有一个不可变的 Foo 对象数组，你可以这样做......

```
for (Foo *foo in myImmutableArray) {
    Bar *bar = [self getSomeNewBar];
    [foo setBar:bar];

    // If Foo is KVC compliant, you can do this too...
    [foo setValue:bar for Key:@"bar"];
} 
```

但是，如果您调用`setValue:forKey`数组，它将为数组的每个元素调用。注意，这`setValue:forKey`实际上是在不可变的 NSArray 中声明的。

**编辑**

那条评论很难读。

核心数据对象只是另一个对象。看起来您已经对它进行了子类化，并为它提供了属性的属性。只需更换

```
[self.ipArray setValue:updateIpAddress forKey:@"ipAccess"]; 
```

和

```
[allips setValue:updateIpAddress forKey:@"ipAccess"]; 
```

或者

```
allips.ipAccess = updateIpAddress; 
```

其中任何一个都应该修改您的核心数据对象，就像任何具有名为“ipAccess”的读/写属性的对象一样

当然，假设我没有再读错了......而allips是你的核心数据对象......

# vb.net - 压缩和解压缩文件

> ID：12016217
> 
> 赞同：5
> 
> 时间：2012-08-18T05:53:49.693
> 
> 标签：vb.net, visual-studio-2012, zipfile

我是一名使用 VS2012 的程序员。我想解压缩一个 zip 文件（使用 Winzip、filzip 或其他 zip 压缩程序制作），然后还能够将文件重新压缩成一个 zip 文件。

什么是最好的库，我可以请一些关于如何使用该库的示例代码吗？

**编辑**

我正在使用 VB.net，这是我的代码：

```
Public Function extractZipArchive() As Boolean
    Dim zipPath As String = "c:\example\start.zip"
    Dim extractPath As String = "c:\example\extract"

    Using archive As ZipArchive = ZipFile.OpenRead(zipPath)
        For Each entry As ZipArchiveEntry In archive.Entries
            If entry.FullName.EndsWith(".txt", StringComparison.OrdinalIgnoreCase) Then
                entry.ExtractToFile(Path.Combine(extractPath, entry.FullName))
            End If
        Next
    End Using
End Function 
```

我需要使用哪些导入语句？目前我已经添加了以下内容：

```
Imports System.IO
Imports System.IO.Compression 
```

我收到错误消息：

> 类型“ZipArchive”未定义

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T16:34:05.553

没有回答，虽然不久前，所以我仍然会把我的 0.02 美元放在那里，给任何在关键字上点击它的人......

VB 2012 (.Net 4.5) 为 System.IO.Compression ( *System.IO.Compression.FileSystem.dll* ) 添加了新功能，可以满足您的需求。我们以前只有 GZip。当然，您仍然可以使用免费的[DotNetZip](http://dotnetzip.codeplex.com)或[SharpZipLib](http://sharpziplib.com)。

*ZipFile*类有 2 个静态方法可以让简单的压缩/解压缩变得简单：*CreateFromDirectory*和*ExtractToDirectory*。Yo 也有*NoCompression*、*Fastest*和*Optimal*的压缩选项。

关于你的帖子让我印象深刻的一件事是档案中的文件（甚至档案）的概念。使用*ZipArchive*和*ZipArchiveEntry*类，您现在可以

压缩存档：

```
Using zippedFile as ZipArchive = ZipFile.Open("foo.zip", ZipArchiveMode.Read)
    For Each ntry as ZipArchiveEntry In zippedFile.Entries
        Debug.Writeline("entry " & ntry.FullName & " is only " & ntry.CompressedLength.ToString)
    Next
End Using 
```

您的问题还与添加到现有档案有关。您现在可以这样做：

```
Using zippedFile as ZipArchive = ZipFile.Open("foo.zip", ZipArchiveMode.Update)
    zippedFile.createEntry("bar.txt", CompressionLevel.Fastest)
    ' likewise you can get an entry already in there...
    Dim ntry As ZipArchiveEntry = zippedFile.GetEntry("wtf.doc")
    ' even delete an entry without need to decompress & compress again!
    ntry.Delete() ' !
End Using 
```

同样，这是不久前的事了，但我们中的很多人仍在使用 2012，并且由于此更改在未来的版本中不会发生任何变化，因此如果有人点击关键字/标签搜索，它应该仍然有助于向前推进。 .

...我们甚至没有*谈论*UTF-8 支持！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T05:57:16.073

如果您使用 Visual Studio 2012 和 .NET Framework 4.5 [，您可以使用新的压缩库](http://www.codeproject.com/Articles/381661/Creating-Zip-Files-Easily-in-NET-4-5)：

```
//This stores the path where the file should be unzipped to,
//including any subfolders that the file was originally in.
string fileUnzipFullPath;

//This is the full name of the destination file including
//the path
string fileUnzipFullName;

//Opens the zip file up to be read
using (ZipArchive archive = ZipFile.OpenRead(zipName))
{
    //Loops through each file in the zip file
    foreach (ZipArchiveEntry file in archive.Entries)
    {
        //Outputs relevant file information to the console
        Console.WriteLine("File Name: {0}", file.Name);
        Console.WriteLine("File Size: {0} bytes", file.Length);
        Console.WriteLine("Compression Ratio: {0}", ((double)file.CompressedLength / file.Length).ToString("0.0%"));

        //Identifies the destination file name and path
        fileUnzipFullName = Path.Combine(dirToUnzipTo, file.FullName);

        //Extracts the files to the output folder in a safer manner
        if (!System.IO.File.Exists(fileUnzipFullName))
        {
            //Calculates what the new full path for the unzipped file should be
            fileUnzipFullPath = Path.GetDirectoryName(fileUnzipFullName);

            //Creates the directory (if it doesn't exist) for the new path
            Directory.CreateDirectory(fileUnzipFullPath);

            //Extracts the file to (potentially new) path
            file.ExtractToFile(fileUnzipFullName);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-07T22:11:36.383

您可能没有引用`System.IO.Compression`. 选中该程序集引用的框，它应该消除错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-04T10:24:37.040

如[https://msdn.microsoft.com/en-us/library/system.io.compression.zipfile(v=vs.110).aspx中所述](https://msdn.microsoft.com/en-us/library/system.io.compression.zipfile(v=vs.110).aspx)

您可以使用**ZipFile.ExtractToDirectory**和**CreateFromDirectory**

这是一个例子：

> 导入系统.IO
> 
> 导入 System.IO.Compression
> 
> 模块模块1
> 
> 子主（）
> 
> ```
>  Dim startPath As String = "c:\example\start"
>    Dim zipPath As String = "c:\example\result.zip"
>    Dim extractPath As String = "c:\example\extract"
> 
>    ZipFile.CreateFromDirectory(startPath, zipPath)
>    ZipFile.ExtractToDirectory(zipPath, extractPath) 
> ```
> 
> 结束子
> 
> 端模块

确保您已引用**System.IO.Compression.FileSystem**以使用此功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-01T14:24:08.207

```
 Dim fileStream As Stream = File.OpenRead("your file path")

    Using zipToOpen As FileStream = New FileStream(".......\My.zip", FileMode.CreateNew)
        Using archive As ZipArchive = New ZipArchive(zipToOpen, ZipArchiveMode.Create)
            Dim readmeEntry As ZipArchiveEntry = archive.CreateEntry("your file path")
            fileStream.CopyTo(readmeEntry.Open())
        End Using
    End Using 
```

# wordpress - 跟踪 Wordpress 统计信息

> ID：12016219
> 
> 赞同：0
> 
> 时间：2012-08-18T05:54:11.103
> 
> 标签：wordpress, statistics, aggregate

我有一个基于 wordpress 的网站（私人托管，将 wordpress 安装到服务器，而不是博客），它用作在线杂志。如果以下是可能的，我将不胜感激（如果可以，如何）。

1.  跟踪每个用户帐户发布的帖子数量
2.  我所基于的 wordpress 主题允许一个人发推文、+1 和“喜欢”。是否有可能看到哪些作者通过这些网站获得了最多的社交媒体份额？

提前感谢我所知道的将是有用的答案。

# image - opencv：更改图像大小而不影响内容大小

> ID：12016224
> 
> 赞同：2
> 
> 时间：2012-08-18T05:55:46.323
> 
> 标签：image, opencv, resize

应用图像处理后，我得到包含字符的图像。所有这些图像（以字符为内容）都有不同的大小。我想在不影响其内容大小的情况下以相同大小调整所有图像的大小。见下图：

[http://techsture.com/img.jpg](http://techsture.com/img.jpg)

我尝试了一些功能将我的源图像与其他白色图像合并，但它需要两个具有相同大小的源图像。我需要通用尺寸的图像以进行进一步处理。

请指导我如何将我的图像转换为常见尺寸？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:55:59.020

我会制作一个具有目标大小的新图像，在这个新图像中设置一个 ROI 到您希望源图像显示的位置。然后使用 cvResize。它应该看起来像：

```
int newWidth = 100;
int newHeight = 100;
CvRect rect;

IplImage* source = cvLoadImage("c:/myimage");
IplImage* dest = cvCreateImage(cvSize(newWidth,newHeight),source->depth,source->nChannels);

rect.x = newWidth/2 - source->width/2;
rect.y = newHeight/2 - source->height/2;
rect.width = source->width;
rect.height = source->height;

cvSetImageROI(dest,rect);
cvResize(source,dest);
cvResetImageROI(dest); 
```

# javascript - 从 for in 循环调用增量器

> ID：12016227
> 
> 赞同：0
> 
> 时间：2012-08-18T05:56:06.457
> 
> 标签：javascript, loops, increment, getelementsbytagname

我在这个循环中调用增量器 i 来识别我当前的元素时遇到了一些麻烦。Firebug 给了我错误`"li[i].addEventListener is not a function"`。

```
document.addEventListener("DOMContentLoaded", function(){

var li = document.getElementsByTagName('li');

for(var i in li){
    li[i].addEventListener('click', function(){
        alert('yey');
    });
    }
}); 
```

奇怪的是，如果我打电话

```
alert(li[i].getAttribute('id') 
```

我收到了提醒我的 ID，但如果我随后使用

```
var id=li[i].getAttribute('id');
document.getElementById(id).addEventListener(blah); 
```

我得到相同的“不是函数”错误。这是for循环吗？我注意到`alert(i);`在循环结束时调用了一些额外的东西，那么有没有不同的方法在 for in 循环中使用增量器？顺便说一下，我正在使用的列表是：

```
<ul>
    <li id=pomp>
        stuff
    </li>
    <li id=and>
        and
    </li>
    <li id=circumstance>
        things
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T05:58:18.903

这就是为什么你必须避免使用`for in`循环

```
for(var i=0;i<li.length;i++){
    li[i].addEventListener('click', function(){
        alert('yey');
    });
} 
```

当您使用 for in 时，`i`它不是您期望的整数，而是节点列表的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:10:12.153

正如@lbu 所指出的，您应该使用它`for (decl; test; inc)`来遍历数组。

然而，这也是使用*委托*的好地方，因为 each`<li>`必须是 a 的直接后代`<ul>`，您可以将事件处理程序放在那里，并减少浏览器的工作量：

```
var ul = document.getElementsByTagName('ul');

for (var i = 0, n = ul.length; i < n; ++i) {
    ul[i].addEventListener('click', function(ev) {
        alert(ev.target.id);
    });
} 
```

见[http://jsfiddle.net/2mk3w/](http://jsfiddle.net/2mk3w/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T06:02:28.580

试试这个方法

```
for(var i in li){
    i.addEventListener('click', function(){
        alert('yey');
    });
    }
}); 
```

# asp.net - CSS 样式表没有反映在我的 aspx 上

> ID：12016235
> 
> 赞同：0
> 
> 时间：2012-08-18T05:57:23.033
> 
> 标签：asp.net, css

我在 Site.css 中有以下 CSS 样式表

```
.img
{
    width: 1300px; 
    height: auto;
} 
```

以及我的 default.aspx 中的以下代码

```
<div class="img">
 <img src="http://files.g4tv.com/images/blog/2008/06/18/633493967095957891.jpg" alt="DOMO" />
 <div class="desc">Add a description of the image here</div>
</div> 
```

为什么我的图片没有反映 CSS 中规定的宽度和高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:06:16.337

您正在向您的部门申请课程。如果要在除法内选择图像，请更改为：

```
.img img
{
    width: 1300px; 
    height: auto;
} 
```

[例子](http://jsfiddle.net/4dkUP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:02:28.693

将课程应用于您的`img`而不是`div`

```
<div >
    <img class="img" 
         src="http://files.g4tv.com/images/blog/2008/06/18/633493967095957891.jpg"
         alt="DOMO" />
    <div class="desc">
                Add a description of the image here
    </div>
</div> 
```

或者

你可以像这样创建你的CSS

```
img
{
    width: 1300px; 
    height: auto;
} 
```

但它有一个缺点，即这个 css 将应用于`img`您文档中的每一个。所以第一个更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T06:02:40.800

在您的风格中，您正在为具有“img”类的 div 设置宽度。

# matlab - 计算给定范围内矩阵中的值的数量

> ID：12016236
> 
> 赞同：4
> 
> 时间：2012-08-18T05:57:25.540
> 
> 标签：matlab, matrix

我有矩阵

```
A=[2 3 4 5 6 7;
   7 6 5 4 3 2] 
```

我想计算有多少元素的值大于 3 且小于 6。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T06:10:09.673

```
flatA = A(:);
count = sum(flatA > 3 & flatA < 6); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T08:42:25.807

我可以想到几个方法：

```
count = numel(A( A(:)>3 & A(:)<6 ))      %# (1)

count = length(A( A(:)>3 & A(:)<6 ))     %# (2)

count = nnz( A(:)>3 & A(:)<6 )           %# (3)

count = sum( A(:)>3 & A(:)<6 )           %# (4)

Ac = A(:);
count = numel(A( Ac>3 & Ac<6 ))          %# (5,6,7,8)
%# prevents double expansion
%# similar for length(), nnz(), sum(),
%# in the same order as (1)-(4)

count = numel(A( abs(A-(6+3)/2)<3/2 ))   %# (9,10,11,12)
%# prevents double comparison and & 
%# similar for length(), nnz(), sum()
%# in the same order as (1)-(4) 
```

所以，让我们测试一下最快的方法是什么。测试代码：

```
A = randi(10, 50);
tic
for ii = 1:1e5

    %# method is inserted here

end
toc 
```

结果（最好的 5 次运行，均以秒为单位）：

```
%# ( 1): 2.981446
%# ( 2): 3.006602
%# ( 3): 3.077083
%# ( 4): 2.619057
%# ( 5): 3.011029
%# ( 6): 2.868021
%# ( 7): 3.149641
%# ( 8): 2.457988
%# ( 9): 1.675575
%# (10): 1.675384
%# (11): 2.442607
%# (12): 1.222510 
```

所以这似乎`count = sum(( abs(A(:)-(6+3)/2)<3/2 ));`是去这里的最佳方式。

就个人而言：我没想到在 Matlab 中比较会比算术慢——有人知道对此的解释吗？

`nnz`另外：与 相比，为什么这么慢`sum`？我想这是有道理的，因为我知道比较比算术慢......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T08:06:41.657

```
length(A(A>3 & A<6)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T06:09:24.290

[Accumarray](http://www.mathworks.nl/help/techdoc/ref/accumarray.html)是用来做这些事情的：

```
count = accumarray(A(A>3 & A<6),1) 
```

返回

```
>> count'
ans = 
       0  0  0  2  2 
```

你可以总结：

```
count = sum(count); 
```

第一个零对应于我们忽略的 1,2,3 的出现次数。

或者更简单：

```
count = sum(A(:)>3 & A(:)<6); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T06:05:33.887

您可以使用 matlab for-loop 并自行循环遍历这些值。优点是可以指定任何函数（>2 & <5 ; >3 & <6; 等），缺点是它是一种繁重的方法。这是大概的代码：

```
count = 0;
for i=1:length(A)
  element = A(i);
  if (element > 2 && element < 5) 
    count = count + 1;
  end
end 
```

# c++ - 从控制台读取并创建类实例

> ID：12016237
> 
> 赞同：0
> 
> 时间：2012-08-18T05:57:27.543
> 
> 标签：c++, operator-overloading, overloading, iostream, cin

我还在学习 C++，但我不知道该怎么做。

我有一个学生班级，有以下字段：姓名、身份证等。

我想让用户通过 cin>>aStudent 输入所有信息。这太奇怪了（在java中不匹配）我怎么能重载>>所以它会这样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:03:54.863

一个天真的解决方案如下：

```
struct Student { string name; int id; … };

std::istream& operator>>(std::istream& is, Student& s) {
    return is >> s.name >> s.id >> …;
} 
```

虽然简单，但它的缺点是`name`必须在没有空格的情况下输入，这可能不是您想要的。在实践中，您通常希望一次提示输入一个字段：

```
Student s;
std::cout << "name: ";
std::getline(std::cin, s.name);
std::cout << "id  : ";
std::cin >> id;
⋮ 
```

即使这也过于简单，因为它不处理输入错误、可选终止等。但它应该更接近你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:04:10.293

你需要超载`operator>>`喜欢`istream`

```
std::istream& operator>>(std::istream& stream, Student& s){
   //read from stream
   return stream;
} 
```

并使其成为学生的朋友

# python - 将列表分配给变量

> ID：12016240
> 
> 赞同：2
> 
> 时间：2012-08-18T05:58:01.680
> 
> 标签：python, google-visualization

我有一个 python 列表：

```
x = ['aa', 'bb', 'cc'] 
```

该列表的 len() （或列表长度，在本例中为 3）可以是任意数字，因为它基本上来自数据库。我的问题是：如何自动将此列表的每个字符串成员分配给单独的变量？这里的重点是：我不知道列表中元素的数量，因为它们总是不同的。

一旦解决了这个问题，我将尝试将其放入 Python Google Charting（GChartWrapper 的 pie3d 图表）函数中，如下所示：

```
G.label(aa,bb,cc) 
```

但是，如果我简单地将列表放入：

```
G.label(x) 
```

那么它只将饼图的一部分命名为完整列表。

需要帮忙！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T06:01:19.223

[你这样做是错的。](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)

```
G.label(*x) 
```

# android - 如何在 Android 中创建静态（仅使用 xml 文件）ExpandableListView

> ID：12016241
> 
> 赞同：4
> 
> 时间：2012-08-18T05:58:12.067
> 
> 标签：android, xml, expandablelistview

我需要将 GroupData 和 ChildData 直接插入到 xml 文件本身的 ExpandableListView 中，而不使用 java。Java 文件应该只用于显示 xml 文件而不是用于插入数据。

我们的输出将是：

第 1 组 -> 11 岁儿童、12 岁儿童、13 岁儿童

第 2 组 -> 21 岁儿童、22 岁儿童、23 岁儿童

第 3 组 -> 31 岁儿童、32 岁儿童、33 岁儿童

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T06:02:26.383

我不认为这是可能的。您必须编写代码以使用 java 文件生成列表视图。

[在此处查找](http://www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/)生成可扩展列表视图的最短方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T07:49:17.630

如果您不想使用`ExpandableListview`java 代码来设置适配器，那么您可以使用`cardview`展开和折叠的。这是静态（XML）折叠和展开功能的最简单方法。

```
<android.support.v7.widget.CardView
        android:id="@+id/card_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:elevation="3dp"
        app:cardCornerRadius="0dp">

        <LinearLayout
                android:id="@+id/group_container"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/group_one"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:lines="1"
                    android:text="Group 1"
                    android:textStyle="bold" />

                <LinearLayout
                    android:id="@+id/child_container"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:visibility="gone"
                    android:orientation="vertical">

                    <TextView
                        android:id="@+id/child_one"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:ellipsize="end"
                        android:lines="1"
                        android:text="Child 11" />

                    <TextView
                        android:id="@+id/child_two"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:ellipsize="end"
                        android:lines="1"
                        android:text="Child 12" />

                    <TextView
                        android:id="@+id/child_three"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:ellipsize="end"
                        android:lines="1"
                        android:text="Child 13" />

                </LinearLayout>
            </LinearLayout>
</android.support.v7.widget.CardView> 
```

将以下代码写入`onClickListener`

```
 cardView = (CardView) findViewById(R.id.card_view);
 childContainer = (LinearLayout) findViewById(R.id.child_container);
 boolean flag = false;

    cardView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            if (flag == true) {
                TransitionManager.beginDelayedTransition(cardView);
                childContainer.setVisibility(View.GONE);
                flag = false;
            } else if (flag == false) {
                TransitionManager.beginDelayedTransition(cardView);
                childContainer.setVisibility(View.VISIBLE);
                flag = true;
            }
        }
    }); 
```

这是一个组，您可以将此代码复制到更多组。

# php - Symfony 2 框架是否有任何 Celeryd 或 Celery（用于 Django/Python）类型替代

> ID：12016242
> 
> 赞同：3
> 
> 时间：2012-08-18T05:58:16.340
> 
> 标签：php, python, django, symfony, celery

我非常喜欢在 Django 中执行计划任务的[Celery](http://en.wikipedia.org/wiki/Celery_Task_Queue)。我现在使用[Symfony](http://en.wikipedia.org/wiki/Symfony)  2，发现它与 Django 框架几乎相似。

我想知道 Symfony 中是否有类似于 Celery 的东西用于调度任务队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:10:29.300

您可以使用基于 Redis 的简单队列实现。

[https://github.com/mmoreram/rsqueue-bundle](https://github.com/mmoreram/rsqueue-bundle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T21:52:06.073

我建议你使用 Beanstalkd。

您可以使用**LeezyPheanstalkBundle**或**PheanstalkBundle**。

*   [http://www.github.com/armetiz/LeezyPeanstalkBundle](http://www.github.com/armetiz/LeezyPheanstalkBundle)

*   [http://www.github.com/drymek/PheanstalkBundle](http://www.github.com/drymek/PheanstalkBundle)

或者您可以检查其他客户端：

*   [https://github.com/kr/beanstalkd/wiki/client-libraries](https://github.com/kr/beanstalkd/wiki/client-libraries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:29:34.683

Celery 提供了一个简单的层来使用消息传递。它使构建异步服务的任务变得容易。有趣的是，这个概念并不新鲜。它已经以 AMQP 等标准协议的形式提供。文档可在

[http://php.net/manual/en/book.amqp.php](http://php.net/manual/en/book.amqp.php)

虽然我不能保证它，但可能你可以连接 PHP 和 Python 代码作为发布者和订阅者，因此使用 Celery 来完成任务，而 PHP 代码可以发布它。

# java - 删除/清除测试系列的 Neo4j 数据库

> ID：12016244
> 
> 赞同：0
> 
> 时间：2012-08-18T05:58:34.483
> 
> 标签：java, neo4j, spring-data-neo4j

我有一系列单元测试需要清除 neo4j 数据库。如果我单独运行它们，所有测试都会通过，但是当我全部运行它们时，有些测试会失败，说找不到特定节点：

```
org.neo4j.graphdb.NotFoundException: Node[6] not found.
at org.neo4j.kernel.impl.core.NodeManager.getNodeForProxy(NodeManager.java:505)
at org.neo4j.kernel.impl.core.NodeProxy.hasProperty(NodeProxy.java:151)
at org.springframework.data.neo4j.fieldaccess.PropertyFieldAccessorFactory$PropertyFieldAccessor.doGetValue(PropertyFieldAccessorFactory.java:85)
at org.springframework.data.neo4j.fieldaccess.ConvertingNodePropertyFieldAccessorFactory$ConvertingNodePropertyFieldAccessor.doGetValue(ConvertingNodePropertyFieldAccessorFactory.java:89)
at org.springframework.data.neo4j.fieldaccess.PropertyFieldAccessorFactory$PropertyFieldAccessor.getValue(PropertyFieldAccessorFactory.java:80)
at org.springframework.data.neo4j.fieldaccess.DefaultEntityState.getValue(DefaultEntityState.java:97)
at org.springframework.data.neo4j.fieldaccess.DetachedEntityState.getValue(DetachedEntityState.java:100)
at org.springframework.data.neo4j.fieldaccess.DetachedEntityState.getValue(DetachedEntityState.java:105) 
```

我已经尝试过了，但它没有解决我的问题：[Neo4jDatabaseCleaner](https://github.com/jexp/neo4j-clean-remote-db-addon/blob/master/src/main/java/org/neo4j/server/extension/test/delete/Neo4jDatabaseCleaner.java)

值得注意的是，有问题的测试是与属性相关的测试。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T18:29:52.763

使用Neo4j 内核自带的 ImpermanentGraphDatabase 怎么样[？](http://madgrapher.blogspot.com/2012/06/persisting-to-neo4j-via-spring-data-or.html)

构建/销毁图表而不用担心清理等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:09:36.803

我们解决这个问题的方法是拥有一个所有单元测试类都扩展的上下文感知抽象类。此方法包含一个 before 方法，用于清除所有已定义图形存储库中的所有数据。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "/applicationContext.xml", "/applicationContext-test.xml" })
public abstract class AbstractTestBase {

    @Autowired
    private ApplicationContext ctx;

    @Before
    public void clearAllGraphRepositories() {
        Map<String, GraphRepository> graphRepositories = ctx.getBeansOfType(GraphRepository.class);
        for (GraphRepository graphRepository : graphRepositories.values()) {
            graphRepository.deleteAll();
        }
    }

} 
```

这显然可以很容易地修改为只清除特定的存储库，但我会把它留给你...... :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:52:28.873

一种简单的方法是运行测试事务并在每次测试后回滚？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T13:30:52.147

我正在使用本教程设置测试环境： [http ://blog.everymansoftware.com/2011/11/development-setup-for-neo4j-and-php.html](http://blog.everymansoftware.com/2011/11/development-setup-for-neo4j-and-php.html)

关键是neo4j的一个插件，叫做*test-delete-db-extension-1.8.jar*

或者，在 gremlin 中，您可以调用命令 g.clear(); （似乎与插件的功能相同）。

# iphone - iOS App开发：查看可见但不活动

> ID：12016248
> 
> 赞同：0
> 
> 时间：2012-08-18T05:58:44.140
> 
> 标签：iphone, ios, cocoa-touch, uiview, uiviewcontroller

请帮忙！这似乎很简单，但是，对不起，我'不得不'问，因为它不起作用。我有一个带有 UITableView 的主视图。在刷卡时，我添加了一个具有选择器和按钮的子视图。它工作正常：我滑动并且子视图出现在主视图的前面，但是当我单击选择器或按钮时，子视图中什么都没有发生；而是调用主视图（位于子视图下方）中的组件！我肯定会这么说，因为在主视图中，我在添加的子视图下方有一张图片（点击图片会打开一个新视图）。现在，当我在子视图中点击选择器时（图片在主视图下方），图片被点击并打开新视图！这怎么可能？

这是子视图（在 Interface Builder 中）

![在此处输入图像描述](../Images/cb7196ffabfcc4ca0704d5de02ed0eb4.png)

这是我的代码片段：

在我的**MainViewController.m**中（viewCtrlrFilter 是用户在主视图中滑动时添加的子视图）：

```
....
self.viewCtrlrFilter = (ViewController_Filter *) [myStoryboard instantiateViewControllerWithIdentifier:kNameViewCtrlrFilter];
...
// This is called when the user pans/swipes
// This does work fine; the subview gets added & is visible
[self.viewCtrlrFilter initializeView];
[self.viewCtrlr.view setFrame:CGRectMake(310.0, 220.0, 243.0, 208.0)];
[self.view addSubview:self.viewCtrlrFilter.view];
... 
```

从**ViewController_Filter.h**：

```
...
// This implements the Picker Delegate & DataSource
// which I have wired to the picker in IB
@interface ViewController_FilterPhotographers : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>
...
// This is called when the button in the subview 
// (screenshot above) is pressed
// It's wired through the IB
-(IBAction) buttonPressed:(id) sender;
... 
```

从**ViewController_Filter.m**：

```
-(void) initializeView {

    self.myPicker.delegate = self;
    self.myPicker.dataSource = self;
    self.myPicker.showsSelectionIndicator = YES;

    CGRect rect = self.myPicker.frame;
    rect.origin = CGPointMake(0.0, 0.0);
    self.myPicker.frame = rect;
    self.myPicker.transform = CGAffineTransformMakeScale(0.625,0.625);
    [self.myPicker becomeFirstResponder];
}
...
-(IBAction) buttonPressed:(id) sender {
    NSLog(@"hi");
}
...
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initializeView];
}
... 
```

当用户滑动时，确实添加了子视图（看到了选择器和按钮），但是当我单击按钮时，没有调用 IBAction 方法。相反，有趣的是，主视图（子视图下方）中的组件被调用了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:30:01.877

现在可以了！看起来从代码和 IB 为选取器视图设置数据源和委托是一个问题。我从 IB 设置它并从代码中删除它。它现在工作正常！

# visual-c++ - 如何编译这个 VC++ 程序？

> ID：12016249
> 
> 赞同：2
> 
> 时间：2012-08-18T05:58:54.403
> 
> 标签：visual-c++, josephus

我对 VC++ 很陌生。昨天我的 VC++ 讲师给了我们这段代码，并要求我们将其制作为 exe。我不知道从哪里开始和结束。如何将这个单个文件变成exe。在 Visual Studio 中如何以及在何处粘贴此工作代码。如果我的问题听起来太愚蠢，对不起。但是我。请帮助我从这个单个文件中制作一个 exe。顺便说一下，这是约瑟夫斯圆算法

```
Code :
//////////////////Header file

#include<iostream.h>
template <class T>
class ex
{
    private:
        struct node
        {
            T data;
            struct node *next;
        };
        struct node *head,*front,*rear;
    public:
        ex()
        {
            head=new node;
            head->next=NULL;
            front=rear=head;
        }
        void enqueue(T x);
        T dequeue();
        void print();
        void move_next();
};

//////////////////Implementation file
#include "ex.h"
template <class T>
void ex<T>::enqueue(T x)
{
    node *p;
    p=new node;
    p->data=x;
    if(head->next==NULL)
    {
        front=rear=p;
        head->next=p;
        p->next=p;
    }
    else
    {
        rear->next=p;
        p->next=front;
        rear=rear->next;
    }
}

template<class T>
T ex<T>::dequeue()
{
    node *t;
    T x;
    t=front;
    x=t->data;
    front=front->next;
    rear->next=front;
    delete(t);
    return x;
}

template<class T>
void ex<T>::print()
{
    node *p=front;
    do
    {
        cout<<p->data<<endl;
        p=p->next;
    }while(p!=rear->next);
}

template<class T>
void ex<T>::move_next()
{
    front=front->next;
    rear=rear->next;
}

/////////////////Application file
#include "ex.cpp"
void main()
{
    ex<int> e;
    int m,n,i,d;
    cout<<"Enter the number of people";
    cin>>n;
    cout<<"Enter the number of passes";
    cin>>m;
    for(i=1;i<=n;i++)
        e.enqueue(i);
    cout<<"The players are
";
    e.print();
    cout<<"Eliminated in order
";
    while(n>1)
    {
        for(i=1;i<=m;i++)
            e.move_next();
        d=e.dequeue();
        cout<<d<<endl;
        n--;
    }
    d=e.dequeue();
    cout<<"Winning player:  "<<d<<endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T06:06:53.503

制作第一个名为 ex.h 的文件

```
#include<iostream.h>
template <class T>
class ex
{
    private:
        struct node
        {
            T data;
            struct node *next;
        };
        struct node *head,*front,*rear;
    public:
        ex()
        {
            head=new node;
            head->next=NULL;
            front=rear=head;
        }
        void enqueue(T x);
        T dequeue();
        void print();
        void move_next();
}; 
```

第二个文件到 ex.cpp

```
#include "ex.h"
template <class T>
void ex<T>::enqueue(T x)
{
    node *p;
    p=new node;
    p->data=x;
    if(head->next==NULL)
    {
        front=rear=p;
        head->next=p;
        p->next=p;
    }
    else
    {
        rear->next=p;
        p->next=front;
        rear=rear->next;
    }
}

template<class T>
T ex<T>::dequeue()
{
    node *t;
    T x;
    t=front;
    x=t->data;
    front=front->next;
    rear->next=front;
    delete(t);
    return x;
}

template<class T>
void ex<T>::print()
{
    node *p=front;
    do
    {
        cout<<p->data<<endl;
        p=p->next;
    }while(p!=rear->next);
}

template<class T>
void ex<T>::move_next()
{
    front=front->next;
    rear=rear->next;
} 
```

并将第三个文件改成 Main.cpp 什么的。

```
#include "ex.cpp"
void main()
{
    ex<int> e;
    int m,n,i,d;
    cout<<"Enter the number of people";
    cin>>n;
    cout<<"Enter the number of passes";
    cin>>m;
    for(i=1;i<=n;i++)
        e.enqueue(i);
    cout<<"The players are
";
    e.print();
    cout<<"Eliminated in order
";
    while(n>1)
    {
        for(i=1;i<=m;i++)
            e.move_next();
        d=e.dequeue();
        cout<<d<<endl;
        n--;
    }
    d=e.dequeue();
    cout<<"Winning player:  "<<d<<endl;
} 
```

然后编译它。另外，应该`int main()`不是`void main()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:04:33.247

要添加到 Alex F. 答案，您还需要创建一个 ex.h 文件和一个 ex.cpp 文件并将它们各自的代码粘贴到其中

# java - Spring MVC 映射

> ID：12016250
> 
> 赞同：0
> 
> 时间：2012-08-18T05:58:56.180
> 
> 标签：java, spring, spring-mvc, mapping

我做了一个非常简单的应用程序，但遇到了错误。

**我的 Web.XML**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
       <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

**Servlet-context.XML**

```
<beans:bean name="newpage.jsp" class="com.project.NewHello.resultsController"/>

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.project.NewHello" /> 
```

**newpageController.java**

```
 package com.project.NewHello;

 import java.util.Locale;

 import org.springframework.ui.Model;
 import org.springframework.web.bind.annotation.RequestMapping;
 import org.springframework.web.bind.annotation.RequestMethod;

  public class newpageController {

public String newpage(Locale locale, Model model) {

    return "newpage";
}
  }

**Some of Error lines:** 
```

它没有找到 newpage.jsp 文件，并且在控制台显示中，警告：[SetContextPropertiesRule]{Context} 将属性 'source' 设置为 'org.eclipse.jst.jee.server:NewHello' 没有找到匹配的属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:37:45.207

仅通过查看您的配置和类的命名，您似乎对规范 Java 并不熟悉。

例如，您的包名称 ( `NewHello`) 通常应为小写：

```
<context:component-scan base-package="com.project.newhello" /> 
```

有一大堆有趣的怪事。就像在 JSP 文件之后命名 bean（我担心你会认为它会使用那个 JSP 文件）。

*我强烈建议您做的是查看以下快速启动项目之一，这些项目将为您做一些脚手架*：

*   [春天的房间](http://www.springsource.org/spring-roo/)
*   [AppFuse Spring MVC](http://appfuse.org/display/APF/Using+Spring+MVC)
*   [Spring Maven 原型](https://github.com/kolorobot/spring-mvc-quickstart-archetype)

使用上述项目之一来创建您的初始项目，此外您还可以查看这些项目中的标准做法（因为有 Spring 和 Java 的做事方式）。

一旦你适应了，你就可以看到制作 Spring 的人制作的更完整的、功能齐全的 Spring MVC 项目：

[春季温室](https://github.com/SpringSource/greenhouse)

# c# - C#富文本框，添加字符串，输出到不同的文本框

> ID：12016252
> 
> 赞同：0
> 
> 时间：2012-08-18T05:59:19.950
> 
> 标签：c#

我正在寻找一种方法来获取用户可以自定义的富文本框中的每个项目并获取这些项目并将它们放入带有字符串的不同文本框中。

例如：richtextbox 将包含并像这样分隔：

```
Sad   
Glad  
Mad 
```

我希望那些进入的字符串是：`John was ____ today.`

id 喜欢它在不同的行上输出所有 3 个但在同一个文本框（不同于richtextbox）。

```
John was Sad today.   
John was Glad today.  
John was Mad today. 
```

这一切都被简化了，以便更容易理解，我一直在努力让它发挥作用。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:14:10.623

请记住，RichTextBox 控件中的 Text 是一个字符串数组，其中每一行都是数组中的一个元素，因此您可以做的是遍历该数组并在每次传递时构造您的句子。

```
const string StringTemplate = "John was {0} today.";
...
var sb = new StringBuilder();
foreach (var line in richTextBox1.Lines) {
    sb.AppendLine(string.Format(StringTemplate, line));
}

textBox1.Text = sb.ToString(); 
```

# php - 在foreach期间将对象存储在数组中？

> ID：12016254
> 
> 赞同：0
> 
> 时间：2012-08-18T05:59:55.707
> 
> 标签：php, cakephp

我希望在 foreach 循环期间将一些对象存储在数组中。问题是每次都创建一个唯一的对象。我必须有某种索引附加每个对象的名称。这是我所拥有的：

```
function table_rows($html) {
        $dom = new Zend_Dom_Query($html);
        $table_rows = $dom->query('tr');
        $check_array = array();
        foreach ($table_rows as $key=>$table_row) {
            ($check_object . $key) = new check_class;
            ($check_object . $key)->check_method1($table_row);
            ($check_object . $key)->check_method2($table_row);
            ($check_object . $key)->check_method3($table_row);
            $check_array[] = (check_object . $key);
        }
    } 
```

我什至接近吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:15:06.250

您可以为此使用[变量](http://www.php.net/manual/en/language.variables.basics.php)：

```
function table_rows($html) {
    $dom = new Zend_Dom_Query($html);
    $table_rows = $dom->query('tr');
    $check_array = array();
    foreach ($table_rows as $key=>$table_row) {
        $object = new check_class;
        $object->check_method1($table_row);
        $object->check_method2($table_row);
        $object->check_method3($table_row);
        $check_array[] = $object;
    }
} 
```

当然，为对象实例命名变量`$object`并不是很具有描述性，但我希望你能理解。

这是有效的，因为 -loop 中的第一个赋值`for`覆盖了“旧”实例，因此`$object`每次迭代都是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:18:11.277

如果 Jared Drake 是对的，并且您的意思是唯一的数组键，而不是对象（变量）名称。

```
 $dom = new Zend_Dom_Query($html);
 $table_rows = $dom->query('tr');
 $check_array = array();
 foreach ($table_rows as $key=>$table_row) {
        $check_object = new check_class;
        $check_object->check_method1($table_row);
        $check_object->check_method2($table_row);
        $check_object->check_method3($table_row);
        $check_array['check_object' . $key] = $check_object;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:11:15.190

也许我误解了这个问题，但是您不能只使用该[`array_push`](http://php.net/manual/en/function.array-push.php)方法将每个对象添加到`foreach`循环中的数组末尾吗？

# database - CodeIgniter dbutil & db 指向不同的数据库（如何备份当前数据库）

> ID：12016255
> 
> 赞同：0
> 
> 时间：2012-08-18T06:00:01.923
> 
> 标签：database, codeigniter

我在使用 dbutil 和 db 时遇到问题。下面是我的代码（我的模型的构造函数）：

```
public function __construct(){
    // I save my database configuration in CI session
    $this->load->library('session');
    $config = $this->session->userdata("db_config");
    if($config){ // $config is now equal contains of my database configuration
        $this->db = $this->load->database($config, TRUE);
    }else{
        $this->db = $this->load->database();
    }       
    $this->load->dbutil();
    echo '<pre>'.print_r($this->db, TRUE).'</pre>';
    echo '<pre>'.print_r($this->dbutil, TRUE).'</pre>';
} 
```

我发现 $this->db 和 $this->dbutil 指向不同的数据库。

$this->db 指向会话中的数据库配置：

```
....
[username] => root
[password] => toor
[hostname] => localhost
[database] => coba
.... 
```

虽然 $this->dbutil 从我的配置文件（application/config/database.php）指向数据库配置：

```
....
[username] => root
[password] => toor
[hostname] => localhost
[database] => module_devel
.... 
```

这不是预期的，因为我希望 $this->db 和 $this->dbutil 都指向同一个数据库

我还检查[了 PHP: CodeIgniter; 管理两个数据库连接；可变数据库参数](https://stackoverflow.com/questions/7867591/php-codeigniter-managing-two-db-connections-variable-database-parameters)。但是，对我来说，解决方案根本不起作用。

那么，任何人都可以发现这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:01:19.793

看来是 CodeIgniter 的一个 bug。但是，dbutil 并不是我们唯一可以使用的。有许多替代方法可以模拟 dbutil 的功能。

就我而言，我想生成一个“创建表”脚本。我最终使用

```
 $query = $this->db->query("SHOW CREATE TABLE `$table_name`"); 
```

为了生成 SQL 插入脚本，我手动选择、遍历记录并生成脚本。

希望这可以帮助其他有类似问题的人

# javascript - 在javascript中拖动时选择文本

> ID：12016257
> 
> 赞同：1
> 
> 时间：2012-08-18T06:00:05.283
> 
> 标签：javascript, select, drag-and-drop

当我使页面中的元素可拖动时，一旦拖动它，将选择该元素之外的文本。

我想知道为什么以及如何防止这种情况发生？

这是[我的例子](http://jsfiddle.net/eZV3T/)：

当我尽可能快地拖动灰色 div 并越过段落时，段落的文本将被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:02:57.797

您需要防止默认行为

```
trigger.onmousedown = function(e) {
    this.style.cursor = "move";
    e.preventDefault(); // this line
    ...
} 
```

[小提琴](http://jsfiddle.net/eZV3T/2/)

# html - 不同行的 HTML 表格列宽

> ID：12016258
> 
> 赞同：-2
> 
> 时间：2012-08-18T06:01:04.350
> 
> 标签：html

我有一个只包含文本和文本输入的表单。看起来像：![在此处输入图像描述](../Images/d4ae49d73bd688be9156701c51ba8889.png)

如何更改表格每一行的列宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:04:00.697

它不是一张桌子。

表格用于表格数据。

使用 CSS 格式化表单。

# .net - 如何在 DoWork 事件处理程序中使用 UI 线程的列表视图？

> ID：12016262
> 
> 赞同：0
> 
> 时间：2012-08-18T06:01:40.480
> 
> 标签：.net, listviewitem

我在 UI 线程上有列表视图。我有一些操作要通过后台工作人员的 DoWork 事件处理程序执行，因为它们很耗时。但是我无法访问 DoWork 处理程序中的列表视图项，因为它引发了异常：`Cross-thread operation not valid: Control 'bufferedListView1' accessed from a thread other than the thread it was created on.`

那么如何在我的 DoWork 事件处理程序中访问我的 bufferedlistview。这是要在 DoWork 中处理的代码：

```
foreach (ListViewItem item in bufferedListView1.Items) 
{ 
    string lname = bufferedListView1.Items[i].Text; 
    string lno = bufferedListView1.Items[i].SubItems[1].Text; 
    string gname = bufferedListView1.Items[i].SubItems[2].Text; 
    string line = lname + "@" + lno + "@" + gname; 
    if (gname.Contains(sgroup)) 
    { 
        var m = Regex.Match(line, @"([\w]+)@([+\d]+)@([\w]+)"); 
        if (m.Success) 
        { 
            port.WriteLine("AT+CMGS=\"" + m.Groups[2].Value + "\""); 
            port.Write(txt_msgbox.Text + char.ConvertFromUtf32(26)); 
            Thread.Sleep(4000); 
        } 
        sno++; 
    } 
    i++; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:08:45.853

[这是](http://www.perceler.com/articles1.php?art=crossthreads1)一篇关于跨线程访问winforms中控件的好文章。

基本上，每当您访问不是来自 UI 线程的控件时，您都必须使用

```
control.Invoke 
```

构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:09:33.813

错误来自您尝试从另一个线程（backgrounworker 线程）访问 UIThread 以获取 UI 控件的事实

使用 InvokeRequired 你必须在这里实现一个委托示例

```
 delegate void valueDelegate(string value);

    private void SetValue(string value)
    {
       if (InvokeRequired)
       {
           BeginInvoke(new valueDelegate(SetValue),value);
       }
       else
       {
           someControl.Text = value;
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T11:15:09.393

我想要的只是**在其他线程的 UI 线程中读取列表视图**。给出的所有解决方案都是使用`invoke`方法，但我找到了一种相当简单的方法：

```
ListView lvItems = new ListView(); \\in global scope 
```

在我的代码中的所需位置：

```
foreach (ListViewItem item in bufferedListView1.Items)
{
   lvItems.Items.Add((ListViewItem)item.Clone()); // Copied the bufferedListview's items that are to be accessed in other thread to another listview- listItems
} 
```

然后在我的事件处理程序中使用`lvItems`列表视图。`DoWork`简单 n 简单 :)

# android - 关于 Galaxy S 和 Galaxy S2 的格式化问题

> ID：12016263
> 
> 赞同：0
> 
> 时间：2012-08-18T06:01:53.070
> 
> 标签：android, android-layout, formatting, emulation, galaxy

我遇到了有关**Galaxy S**和**Galaxy S2**的格式问题。也许有人可以分享一些见解。在我从三星网站下载的两个模拟器上测试我的应用程序时，模拟器从`drawable-xhdpi`文件夹中提取图形资源并且图形太大。`drawable-<density>`我通过在每个文件夹中设置不同的图形来确认这一点。**S2**`480 x 800 pixels`的手机规格是`4.3"`屏幕尺寸（*大约 217ppi 屏幕密度*），所以我希望模拟器能够从`hpdi folder`. S2 的仿真器设置声明了一个抽象的 LCD 密度，即`300`while `hw.lcd.width and hw.lcd.height`are`480 and 800`分别。制造商是否错误地设置了抽象的 LCD 密度，我应该在硬件设置中更改它`217`以获得在实际设备上的准确表示吗？我无法在 Galaxy S 或 S2 设备上进行测试，我不想写一个特殊的案例来处理特定的手机类型，因为这是不好的做法。

# sphinx - 狮身人面像 SE 怀疑

> ID：12016272
> 
> 赞同：0
> 
> 时间：2012-08-18T06:02:33.623
> 
> 标签：sphinx

group by 和 group sort 之间有什么区别？

如何在 sphinx SE 中实现集合选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:40:48.047

groupby：用于分组的函数和属性

groupsort：检索组的顺序。

使用“选择”。但请注意，您的 sphinxSE 表有正确的列来使用输出

（顺便说一句，它的 sphinxSE 不是“sphinx SE”）

# oracle - 创建依赖审计触发器

> ID：12016274
> 
> 赞同：0
> 
> 时间：2012-08-18T06:02:51.297
> 
> 标签：oracle, triggers, plsql

我在数据库中有一组表。它们的语法是：

```
CREATE TABLE Concert
(concert_id NUMBER (3) NOT NULL,
 concert_name VARCHAR (14) NOT NULL,
 concert_duration NUMBER (1) NOT NULL,
 concert_type VARCHAR (10) NOT NULL,
 artist VARCHAR (14) NOT NULL,
 concert_cost NUMBER (3) NOT NULL
);

CREATE TABLE Customer
(customer_id NUMBER (4) NOT NULL,
 firstname VARCHAR (14) NOT NULL,
 lastname VARCHAR (14) NOT NULL,
 gender VARCHAR (1) NOT NULL,
 street VARCHAR (14),
 city VARCHAR (14),
 country VARCHAR (14),
 postcode VARCHAR (8) NOT NULL
);

CREATE TABLE Event
(event_id NUMBER (3) NOT NULL,
 event_date DATE NOT NULL,
 venue_id NUMBER (2) NOT NULL,
 concert_id NUMBER (3) NOT NULL
);

CREATE TABLE Venue
(venue_id NUMBER (2) NOT NULL,
 venue_name VARCHAR (14) NOT NULL,
 max_capacity NUMBER (5) NOT NULL,
 street VARCHAR (14),
 city VARCHAR (14),
 country VARCHAR (14),
 postcode VARCHAR (8) NOT NULL
);

CREATE TABLE Booking
(arrival_time VARCHAR (8) default to_char(localtimestamp,'HH:MI') check(arrival_time like '__:___AM' or arrival_time like '__:___PM'),
 vehicle_no VARCHAR (8),
 evaluation NUMBER (1) NOT NULL CONSTRAINT ck_evaluation CHECK (evaluation BETWEEN 0 AND 5),
 event_id NUMBER (3) NOT NULL,
 customer_id NUMBER (4) NOT NULL
); 
```

Concert_id 和venue_id 是事件表中的外键。Event_id 和 customer_id 也是预订表中的外键。我想创建一个触发器，它将名字和姓氏（来自客户表）、concert_name（来自音乐会表）、event_date（来自事件表）、场地名称（来自场地表）和评估（来自预订表）放入和审计表中如果客户给出零评价。我已将审计表创建为：

```
CREATE TABLE audit_evaluation
(firstname VARCHAR (14),
 lastname VARCHAR (14),
 concert_name VARCHAR (14),
 event_date DATE,
 venue_name (14),
 evaluation NUMBER (1)
); 
```

我试图用这种语法创建触发器，但它给出了一个错误：

```
CREATE OR REPLACE TRIGGER trg_evaluation
  AFTER INSERT ON booking
    FOR EACH ROW
BEGIN
  IF (evaluation = 0)
  THEN
    INSERT INTO audit_evaluation (firstname, lastname, concert_name, event_date, venue_name, evaluation)
      VALUES (customer.firstname, customer.lastname, concert.concert_name, event.event_date, venue.venue_name, booking.evaluation);
  END IF;
END; 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:15:50.950

```
CREATE OR REPLACE TRIGGER trg_evaluation
  AFTER INSERT ON booking
    FOR EACH ROW
BEGIN
  IF (evaluation = 0)
  THEN
    INSERT INTO audit_evaluation (firstname, lastname, concert_name, event_date, venue_name, evaluation)
      VALUES (customer.firstname, customer.lastname, concert.concert_name, event.event_date, venue.venue_name, booking.evaluation);
  END IF;
END; 
```

首先，这里没有`:old`或`:new`引用，因此触发器不知道从其他 4 个表中选择哪一行。[**您应该在这里**](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg13trg.htm)学习如何使用它们。一旦您准备好编写触发器，您的`insert`语句“**可能**”如下所示（注意 的用法`:new`）-

```
INSERT INTO audit_evaluation (firstname, lastname, concert_name, event_date, venue_name, evaluation)
select c.firstname,c.lastname,con.concert_name,
       evt.event_date, ven.venue_name, :new.evaluation
  from customer c, concert con, event evt, venue ven
 where evt.evt_id = :new.event_id
   and c.customer_id = :new.customer_id
   and con.customer_id=c.customer_id
   and con.concert_id = evt.concert_id
   and evt.venue_id=ven.venue_id; 
```

注意 - 不要因为这里的一些“不那么友好”的评论而气馁。人们只是想“帮助”。:)

# macos - g++：AVX 没有这样的指令

> ID：12016281
> 
> 赞同：5
> 
> 时间：2012-08-18T06:04:19.840
> 
> 标签：macos, g++, macports, avx

当我编译一个我用 C++ 编写的程序时（对于最新的 Macbook pro，它当然支持 AVX 指令集），我得到了以下错误。我正在使用从 Macports 获得的最新版本的 g++。您对我可以做些什么来修复错误而不限制编译器可用的指令集有任何想法吗？有什么特别值得我尝试更新的软件包吗？

```
g++-mp-4.7 -std=c++11 -Wall -Ofast -march=native -fno-rtti src/raw_to_json.cpp -o bin/raw_to_json.bin
/var/folders/83/tjczqmxn1y9166m642_rxdlw0000gn/T//cc0hIx0w.s:1831:no such instruction: `vpxor %xmm0, %xmm0,%xmm0'
/var/folders/83/tjczqmxn1y9166m642_rxdlw0000gn/T//cc0hIx0w.s:1847:no such instruction: `vmovdqa %xmm0, 96(%rsp)'
/var/folders/83/tjczqmxn1y9166m642_rxdlw0000gn/T//cc0hIx0w.s:1848:no such instruction: `vmovdqa %xmm0, 112(%rsp)'
/var/folders/83/tjczqmxn1y9166m642_rxdlw0000gn/T//cc0hIx0w.s:1849:no such instruction: `vmovdqa %xmm0, 128(%rsp)'
/var/folders/83/tjczqmxn1y9166m642_rxdlw0000gn/T//cc0hIx0w.s:1850:no such instruction: `vmovdqa %xmm0, 144(%rsp)'
/var/folders/83/tjczqmxn1y9166m642_rxdlw0000gn/T//cc0hIx0w.s:1851:no such instruction: `vmovdqa %xmm0, 160(%rsp)' 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-12T22:31:10.750

为我解决此问题的一个更简单的解决方案是添加`-Wa,-q`到编译器标志。`as`从（版本 1.38）的手册页：

-q 使用 clang(1) 集成汇编器而不是基于 GNU 的系统汇编器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T06:39:27.803

感谢 Conrado PLG[在此处](https://stackoverflow.com/questions/9840207/how-to-use-avx-pclmulqdq-on-mac-os-x-lion)对他自己的问题的回答。简而言之，我必须执行以下操作：

1.  移动或以其他方式摆脱旧的`as`，发现在`/opt/local/bin/../local/libexec/as/x86_64/as`。
2.  将文森特·哈布奇 (Vincent Habchi) 的脚本[复制](https://gist.github.com/xianyi/2957847)到`/opt/local/bin/../local/libexec/as/x86_64/as`.
3.  `sudo chmod +x`剧本。

请注意，由于调用汇编程序需要首先通过 shell 脚本，因此性能可能会有所下降。

# html - 如何从 HTML 中删除多个空白字符？

> ID：12016282
> 
> 赞同：2
> 
> 时间：2012-08-18T06:04:22.493
> 
> 标签：html, coldfusion, whitespace, coldfusion-8

我想删除来自用户端的额外空格，但我无法预测 HTML 的格式。

例如：

```
<p> It's interesting that you would try cfsetting, since nothing in it's
documentation would indicate that it would do what you are asking.
Unless of course you were mis-reading what "enableCFoutputOnly" is
supposed to do.

</p>

<p>

It's interesting that you would try cfsetting, since nothing in it's
documentation would indicate that it would do what you are asking.
Unless of course you were mis-reading what "enableCFoutputOnly" is
supposed to do.</p> 
```

请指导我如何从 HTML 中删除多个空白字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:37:03.543

您可以使用正则表达式通过循环结果来用单个空格替换多个空格字符的任何情况，直到不再存在多个空格：

```
lastTry = "<p>   lots of space    </p>";
nextTry = rereplace(lastTry,"\s\s", " ", "all");
while(nextTry != lastTry) {
  lastTry = nextTry;
  nextTry = REReplace(lastTry,"\s\s", " ", "all");
} 
```

经测试在 CF10 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:06:42.543

如果您出于完全的懒惰而不想通过代码来做到这一点

> => [http://jsbeautifier.org/](http://jsbeautifier.org/)

如果你想通过代码来做，那么正则表达式将是另一种选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T10:28:44.960

这应该这样做：

```
<cfscript>
  string function stripCRLFAndMultipleSpaces(required string theString) {
    local.result = trim(rereplace(trim(arguments.theString), "([#Chr(09)#-#Chr(30)#])", " ", "all"));
    local.result = trim(rereplace(local.result, "\s{2,}", " ", "all"));
    return local.result;
  }
</cfscript> 
```

# android - android phonegap/cordova 更改 webview 上的属性

> ID：12016286
> 
> 赞同：0
> 
> 时间：2012-08-18T06:04:49.683
> 
> 标签：android, cordova, android-webview

过去，我更改了`Webview`Android 上的正常属性。例如：

```
wv.getSettings().setAllowUniversalAccessFromFileURLs(true); 
```

其中 wv 是 webview 的变量。现在，我有一个`phonegap/cordova`应用程序，我想更改同一行代码，我一直在尝试以下方式：

`super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true);`

并且还喜欢：

```
super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true); 
```

我没有收到任何编译错误，但是当我在 onCreate 方法上添加那行代码时，应用程序就会关闭。我一直在尝试在不同的地方添加 onCreate 方法的行，例如在 super.onCreate 之前和之后以及加载 html ( 之前和之后`super.loadUrl("file:///android_asset/www/index.html")`，但应用程序总是关闭。你们中的任何人都知道是否可以更改phonegap/cordova 上的那个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:52:23.337

该代码已经在我们的网络视图中，因此您无需设置它。它崩溃的原因可能是您没有在 ICS 设备上运行。该方法仅在 ICS 或更高版本中可用。

如果您真的想添加它，请执行以下操作：

```
if(android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) {
        super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true);
} 
```

# php - symfony2 WebTestCase 按索引选择选项

> ID：12016290
> 
> 赞同：1
> 
> 时间：2012-08-18T06:05:32.640
> 
> 标签：php, symfony, functional-testing

我正在编写一个 WebTestCase 用于在 symfony2 的 WebTestCase 类中提交表单，我想知道是否可以按索引选择框选项。

它可以通过其值选择一个特殊选项（名称为“分支”的选择框，在以下示例中选择了值为“测试”的选项）：

```
$form = $crawler->selectButton('submit')->form();
$form["branch"]->select('test');
$client->submit($form); 
```

在我的情况下，我想选择选择框的第二个选项，而不知道它的值。

谢谢！马蒂亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T11:23:46.450

尝试：

```
$values = $form['branch']->availableOptionValues();
$form['branch']->select($values[1]); 
```

# css - CSS悬停效果大小增加影响其他元素

> ID：12016297
> 
> 赞同：0
> 
> 时间：2012-08-18T06:07:20.453
> 
> 标签：css, css-float

我有按钮，并为它们添加了悬停效果以更改它们的边框。它正在影响菜单的布局。

```
element{
   border-width:0px;
}
element:hover{
   border:1px solid gray;
} 
```

如何在不影响布局的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T06:08:57.193

`box-sizing: border-box`将边框放在框内，应该可以解决任何尺寸问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T06:14:39.560

边框宽度会改变元素的尺寸，因此您可能需要考虑额外的像素。也许这样的事情会奏效。

```
element{
  border:1px solid transparent;
}
element:hover{
  border:1px solid gray;
} 
```

# entity-framework-4.1 - 添加实体时如何防止添加相关实体？

> ID：12016304
> 
> 赞同：1
> 
> 时间：2012-08-18T06:09:38.677
> 
> 标签：entity-framework-4.1, entity-relationship

我有两个实体：具有多对多关系的类别和产品。如何防止 UI 程序员在想要添加产品时添加类别？事实上，我希望 UI 程序员只添加产品并设置预定义的类别，而不能为产品添加新的类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:51:11.613

您必须在向 UI 程序员公开的层中对逻辑进行编码，并确保仅创建产品。这意味着您必须将 EF 完全包裹在您的层中，并且不要将其暴露给上层。如果您将 EF 上下文公开给上层，您将授予它所有权限。

# c# - Microsoft SQL Server Compact Edition 可以用作嵌入式数据库吗？

> ID：12016305
> 
> 赞同：0
> 
> 时间：2012-08-18T06:09:50.490
> 
> 标签：c#, sql-server-ce

我正在使用 C#，我想开发使用数据库的桌面应用程序。最终目的是嵌入我的数据库文件，以便我可以在每台计算机中安装应用程序。

我的问题是：

1.  Microsoft SQL Server Compact Edition 是嵌入式数据库的可行解决方案吗？
2.  如何使用它？
3.  你能给我一些教程来处理它吗？

谢谢你，我会非常感谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:28:23.587

“是的”

为什么？因为，就像任何好的“嵌入式数据库”一样，它不需要单独安装。此外，SQL Server CE 在进程内运行，但并非绝对必需。

其他替代方案包括 SQLite 和 Firebird（以及更多）；那么问题来了，哪个数据库*适合您*？（忽略一些技术差异，很大程度上取决于偏好和首选工具..）

*对于#2 和#3，请先*查阅书籍/教程/google 。

# oop - 具有可变延迟的客户端服务器命令设计模式

> ID：12016314
> 
> 赞同：1
> 
> 时间：2012-08-18T06:11:14.633
> 
> 标签：oop, design-patterns, command-pattern

我正在编写一个客户端程序来控制服务器，该服务器又控制一些大型硬件。服务器需要接收命令来初始化、启动、停止和控制硬件。

从客户端到服务器的连接是通过 TCP 或 UDP 套接字。每个命令都使用 SCADA 协议（例如 Modbus 或 DNP3）封装在适当的消息中。

初始化阶段的一部分涉及从客户端向服务器发送一系列命令。在某些情况下，命令之间必须有几秒钟的延迟，以防止同时初始化多个子系统。延迟的值取决于命令的类型。

我认为[命令设计模式](http://www.oodesign.com/command-pattern.html)是一个很好的方法。客户端实例化 ConcreteCommands，Invoker 将其放入队列中。我不确定如何合并可变延迟，以及是否有更好的模式涉及计时器和队列来处理发送具有可变延迟的消息。

我正在使用 C#，但这可能无关紧要，因为它更像是一个设计模式问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:32:48.537

听起来您需要将类型映射存储到延迟。当你的服务器启动时，你能缓存那些延迟时间吗？然后调用一个在指定延迟后处理命令的方法？

服务器启动时：

```
Dictionary<Type, int> typeToDelayMapping = GetTypeToDelayMapping(); 
```

当命令到达服务器时，服务器可以调用：

```
InvokeCommand(ICommand command, int delayTimeInMilliseconds) 
```

像这样：

```
InvokeCommand(command, typeToDelayMapping[type]); 
```

# ruby-on-rails - 每当创建用户对象时，也使用设计和omniauth 创建配置文件对象

> ID：12016316
> 
> 赞同：0
> 
> 时间：2012-08-18T06:11:23.783
> 
> 标签：ruby-on-rails, devise, omniauth, railscasts

我遵循了 Ryan Bates #235 设计和 OmniAuth（修订版）[http://railscasts.com/episodes/235-devise-and-omniauth-revised](http://railscasts.com/episodes/235-devise-and-omniauth-revised)并且能够使其工作。

现在，我想向用户添加一个配置文件。

所以，我尝试了这个...

```
def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_create do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.username = auth.info.nickname
      user.profile = user.build_profile
      user.profile.name = auth.info.name
      user.profile.save
    end
  end 
```

乍一看，一切似乎都很好。但我注意到它没有更新“名称”属性。

```
1.9.3p125 :019 > Profile.last
  Profile Load (0.4ms)  SELECT "profiles".* FROM "profiles" ORDER BY "profiles"."id" DESC LIMIT 1
 => #<Profile id: 8, user_id: 3, name: nil, created_at: "2012-08-18 06:00:59", updated_at: "2012-08-18 06:00:59"> 
```

所以我试图设置一个值，这就是发生的事情：

```
 1.9.3p125 :020 > p=Profile.last
  Profile Load (0.4ms)  SELECT "profiles".* FROM "profiles" ORDER BY "profiles"."id" DESC LIMIT 1
 => #<Profile id: 8, user_id: 3, name: nil, created_at: "2012-08-18 06:00:59", updated_at: "2012-08-18 06:00:59">
1.9.3p125 :021 > p.name = "Adam"
 => "Adam" 
1.9.3p125 :022 > p.save
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
 => true 
1.9.3p125 :023 > p.name
 => "Adam" 
1.9.3p125 :024 > p
  => #<Profile id: 8, user_id: 3, name: nil, created_at: "2012-08-18 06:00:59", updated_at: "2012-08-18 06:00:59"> 
```

我期待名称会被更新。我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:23:33.620

尝试：

```
 accepts_nested_attributes_for :profile 
```

在您的用户模型中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T16:21:43.900

我想我发现了问题所在。“名称”是保留属性。我将其更改为“owner_name”，现在 p.owner_name="Adam" 有效。我不知道我不应该使用“名称”作为属性。

谢谢你们！

# java - 尝试为银行应用程序调用名为 addAccount 的方法，但它一直给我 .class 是预期错误

> ID：12016317
> 
> 赞同：0
> 
> 时间：2012-08-18T06:11:27.930
> 
> 标签：java

当我尝试调用方法时，这一直给我错误，`addAccount`说 .class 应该在我尝试调用它的行上。
我正在尝试做一个分配，我应该创建一个`addAccount`接受两个参数的方法；`accountName`并将`accountBalance`参数放入`accountArray`

```
import java.util.*;
public class bank
{
    public static void main(String[]args)
    {
        Scanner sc = new Scanner(System.in);
        int choice = 0;
        int accountNo = 0;
        double accountBal = 0;
        int[] accountNoArray = new int[20];
        int[] accountBalArray = new int[20];
        displayMenu();
        System.out.print("Please Enter Your Choice: ");
        choice = sc.nextInt();
        if(choice == 1)
        {
        System.out.print("Please Enter NRIC number: ");
        accountNo = sc.nextInt();
        System.out.print("Please Enter Account Balance: ");
        accountBal = sc.nextInt();
        }
        public static void displayMenu()
        {
        System.out.println("Menu");
        System.out.println("1\. Add an account");
        System.out.println("2.Search an account with the given account number");
        System.out.println("3.Display accounts below the given balance");
        System.out.println("4.Exit");
        }
        public static void addAccount(int accountNo,double accountBal)
        {

        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:21:13.260

您在 displayMenu 方法的定义之前缺少一个右大括号。以下版本在语法上是正确的：

```
public class Bank {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int choice = 0;
        int accountNo = 0;
        double accountBal = 0;
        int[] accountNoArray = new int[20];
        int[] accountBalArray = new int[20];
        displayMenu();
        System.out.print("Please Enter Your Choice: ");
        choice = sc.nextInt();
        if (choice == 1) {
            System.out.print("Please Enter NRIC number: ");
            accountNo = sc.nextInt();
            System.out.print("Please Enter Account Balance: ");
            accountBal = sc.nextInt();
        }
    }

    public static void displayMenu() {
        System.out.println("Menu");
        System.out.println("1\. Add an account");
        System.out.println("2.Search an account with the given account number");
        System.out.println("3.Display accounts below the given balance");
        System.out.println("4.Exit");
    }

    public static void addAccount(int accountNo, double accountBal) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:41:25.533

调用方法时不要指定参数类型。

这是一个错误：

```
case 1 : addAccount(int accountNo,double accountBal); 
```

肯定是：

```
case 1 : addAccount(accountNo,accountBal); break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:42:34.613

您已将其声明为静态，因此您需要在调用之前添加类名

```
bank.addAccount(int accountNo,double accountBal); 
```

而不是类型声明，您必须使用参数调用它。

```
bank.addAccount(accountNo,accountBal); 
```

# linux - AWS ec2 en_US.UTF-8 问题

> ID：12016318
> 
> 赞同：15
> 
> 时间：2012-08-18T06:11:48.263
> 
> 标签：linux, amazon-ec2, amazon-web-services

[https://aws.amazon.com/amazon-linux-ami/2012.03-release-notes/](https://aws.amazon.com/amazon-linux-ami/2012.03-release-notes/)

```
-bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8)
[ec2-user@ip-10-136-14-68 ~]$ vi ~/.bash_profile
[ec2-user@ip-10-136-14-68 ~]$ 

    # .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
        . ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH

export LC_CTYPE="en_US.UTF-8" 
```

你怎么解决这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-19T11:30:20.667

另一种解决方案是将这些行添加到`/etc/environment`

```
LANG=en_US.utf-8
LC_ALL=en_US.utf-8 
```

下次登录时，警告消息应该已经消失了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T05:14:40.097

打开您的`ssh_config`文件（在我的情况下，在**Ubuntu**下它位于此处 : `/etc/ssh/ssh_config`），并注释此行：

```
SendEnv LANG LC_* 
```

这表示 ：

```
#SendEnv LANG LC_* 
```

# html - 将 div 水平扩展到容器中

> ID：12016321
> 
> 赞同：0
> 
> 时间：2012-08-18T06:12:23.510
> 
> 标签：html, css

我有一些我正在尝试修改的 css 和 html，以使 div 水平扩展为可缩放的 div，但是一旦达到宽度，我得到的只是“堆叠”。

[小提琴](http://jsfiddle.net/cWpGS/46/)

绝对定位在文档结构中非常重要，因此我需要保持大部分 css 不变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:11:11.883

添加 `white-space:nowrap;`“mli”类

小提琴[http://jsfiddle.net/cWpGS/51/](http://jsfiddle.net/cWpGS/51/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:16:47.937

如果我理解正确，文本将完全延伸到容器中。您的问题是容器仅扩展到其父 div 的末尾，该父 div 分配的宽度非常小。更改容器 div 的宽度会使文本不换行：

[**jsFiddle**](http://jsfiddle.net/Snowsickle/cWpGS/47/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:09:10.323

我认为这是有道理的

```
.q-d-list-container {
    display:block;
    position: absolute;
    top:5px;
    left:5px;
    right:5px;
    bottom:5px;
    background:#f1f1f1;
    border:1px solid #C4C4C4;
}

#q-d-list {
    display:block;
    background:white;
    border:1px solid #D4D4D4;
    width: 150px;
    position:absolute;
    left:5px;
    top:5px;
    bottom:5px;    
    overflow : auto;
    overflow-y: hidden;
    white-space: nowrap;
}

.mli {
    padding:4px 0 4px 6px;
    margin:0;
    cursor:pointer;
}​ 
```

[这是演示](http://jsfiddle.net/thujeevan/cWpGS/50/)

# c# - 一直异步？

> ID：12016322
> 
> 赞同：16
> 
> 时间：2012-08-18T06:12:24.157
> 
> 标签：c#, async-await, c#-5.0

为了理解新的 async/await 模式，我有一个问题我找不到答案，即我是否应该用 async 装饰我的方法，如果我打算从其他 async 函数调用这些方法，或者只是 return `Task`s在适当情况下？

换句话说，A、B 或 C 类中哪一个是最好的，为什么？

```
class A<T>
{
      public async Task<T> foo1() //Should be consumed
      {
          return await foo2();
      }

      public async Task<T> foo2() //Could be consumed
      {
          return await foo3();
      }

      private async Task<T> foo3() //Private
      {
          return await Task.Run(...);
      }
}

class B<T>
{
      public async Task<T> foo1() //Should be consumed
      {
          return await foo2();
      }

      public async Task<T> foo2() //Could be consumed
      {
          return await foo3();
      }

      private Task<T> foo3() //Private
      {
          return Task.Run(...);
      }
}

class C<T>
{
      public async Task<T> foo1() //Should be consumed
      {
          return await foo2();
      }

      public Task<T> foo2() //Could be consumed
      {
          return foo3();
      }

      private Task<T> foo3() //Private
      {
          return Task.Run(...);
      }
} 
```

过度装饰方法似乎是多余的，所以我自然倾向于`C`，但与此同时，`Task<T>`除非您使用`await`关键字，否则使用起来感觉有些尴尬。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T07:54:01.380

两个版本的工作效率相同，唯一的区别是当你`await`在这里使用时，你会得到一些性能损失（因为必须设置状态机并且很可能会使用延续）。

所以，它归结为一个权衡：您是否希望您的方法以稍微不那么可读为代价来提高效率？还是您愿意为了可读性而牺牲性能？

Usually, I would advise you to go for readability first and only focus on performance if profiling tells you it's worth it. But in this case, I think the increase in readability is small, so I would probably not use `await`.

Also note that your class `C` still doesn't go far enough: `foo1()` also doesn't need `await`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:18:33.873

签名中的`async`在那里允许编译器创建包含代码的状态机重写，这是`await`在一般情况下实现语义所必需的。

您的示例正是您不需要重写的特殊情况：异步操作是方法中发生的最后一件事。这种方法在`.NET4.0`. `async`当您不需要它时，这种兼容性可能是避免使用它的一个原因。

# caching - 如何将 nginx 缓存标头设置为永不过期？

> ID：12016326
> 
> 赞同：4
> 
> 时间：2012-08-18T06:12:59.760
> 
> 标签：caching, nginx, http-headers

现在我正在使用这个：

```
location ~* \.(js|css)$ { # |png|jpg|jpeg|gif|ico
  expires max;
  #log_not_found off; # what's this for?
} 
```

这就是我在萤火虫中看到的：

![在此处输入图像描述](../Images/b60fa5e78236464975877c64d3fd3d17.png)

它奏效了吗？如果我没有弄错，我的浏览器会再次请求文件，而 nginx 会回答“未修改”，所以我的浏览器使用缓存。但我认为浏览器甚至不应该要求该文件，它已经知道它永远不会过期。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:51:21.033

不要使用 F5 重新加载页面。使用单击 url + 输入，或单击链接。这就是我只收到1个请求的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:30:49.250

显然，您的文件不是陈旧的，因为它的 max-age 和到期日期仍然有效，因此浏览器不会与服务器通信。浏览器不会要求文件，除非它是陈旧的。即它的缓存控制（ max -age ）已经结束或到期日期已经过去。在这种情况下，它会询问发球方给定的副本是否仍然有效。如果是，它将提供相同的副本，否则它将获得新的副本。

更新 ：

看，事情就是这样。F5/refresh 将始终让浏览器请求服务器是否有任何修改。它将在请求标头中有 If-Modified-Since。虽然它与仅导航站点不同，但返回到浏览器不会询问服务器的页面和点击事件，并从缓存中静默加载（无服务器调用）。此外，如果您在 firefox Live HTTP Headers 上进行测试，它会准确显示请求的内容，而 Firebug 将始终显示 If-Modified-Since。Safari 的开发者菜单应显示加载时间为 0。希望对您有所帮助。

# node.js - 调试 Node.js - iisnode 模块无法部署初始化调试器所需的支持文件

> ID：12016327
> 
> 赞同：1
> 
> 时间：2012-08-18T06:13:35.740
> 
> 标签：node.js, azure, iisnode

当我尝试使用 Azure SDK for Node.js 调试 node.js 应用程序时出现以下错误：

iisnode 模块无法部署初始化调试器所需的支持文件。请检查运行node.js应用程序的IIS应用程序池的身份是否对node.js应用程序所在服务器上的目录有读写访问权限。

我已经安装了完整版的 iisnode 并在 web.config 中添加了配置设置。这是我在浏览器中键入的示例：

> `http://server:81/server.js/debug`

. 该应用程序使用 IIS Express 来运行最新的 Windows Azure SDK for Node.js - 2012 年 8 月中提供的内容。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:08:18.230

这里有两个可能的问题，具体取决于您运行的适用于 Node 的 Azure SDK 版本：

(1) 如果您运行的版本小于 0.6，那么这几乎肯定是您的 webrole 目录的权限问题。请注意，在 IIS 中，实际用于 Web 角色的是实际的 Web 角色目录，而不是 local_package.csx 中的目录。确保 iiS_IUSRS 对该目录具有写入权限并且它应该可以工作。

(2) 如果您运行的版本 >= 0.6，那么问题是您使用的 iisnode 版本在 iisexpress 中未满 iis。您可以通过编辑 setup_web.cmd 以使用 iisnode 目录（而不是 iisnode-dev 目录或 SDK 目录）中的 iisnode dll 的路径来解决此问题。

# c - syslog 存储错误消息的位置

> ID：12016328
> 
> 赞同：2
> 
> 时间：2012-08-18T06:13:37.650
> 
> 标签：c, linux, syslog

> syslog() 生成日志消息
> 
> syslog(LOG_ERR, "%s failed: %d (%m)", str, errno); syslog(LOG_NOTICE, "%s failed: %d (%m)", str, errno); 系统日志(LOG_INFO,"%s",str);

它在哪里存储这些信息？

我在服务器中找不到任何名为 LOG_ERR、LOG_NOTICE、LOG_INFO 的文件。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:46:30.263

在**Linux**下，你可以在这里找到它们 : `/var/log/syslog`，如果你运行这个简单的程序：

```
#include <syslog.h>

int main(int argc, char **argv)
{
        /* Various syslog messages */
        syslog (LOG_CRIT, "%s", "That's critic");
        syslog(LOG_ALERT, "An alert\n");
        syslog(LOG_ERR, "Error on this DAEMON\n");

        return 0;
} 
```

并打开一个终端并运行它：

```
toc@UnixServer:/var/log$ tail -f syslog 
```

您应该看到如下内容：

```
Aug 18 08:42:21 TarekServer SYSLOG: That's critic
Aug 18 08:42:21 TarekServer SYSLOG: An alert
Aug 18 08:42:21 TarekServer SYSLOG: Error on this DAEMON 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:25:05.663

它们被转储到 syslog 缓冲区中，`syslogd`/`rsyslogd`拾取它们并将它们放置在由`/etc`.

# ios - iOS5 中我的 UITableView 中的 dequeueReusableCellWithIdentifier 错误

> ID：12016331
> 
> 赞同：49
> 
> 时间：2012-08-18T06:13:46.553
> 
> 标签：ios, ios5, uitableview, ios6

我在 iOS 5 中收到此错误

`-[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]: unrecognized selector sent to instance 0xa217200`

但是，我在 iOS 6 中没有收到任何错误。我该如何解决这个问题？这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; /// SIGABRT error

    if (!cell)
    {
        cell = [[UITableViewCell alloc]
        initWithStyle: UITableViewCellStyleSubtitle
        reuseIdentifier: CellIdentifier];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-18T06:26:19.367

**编辑**：此方法是在 iOS6+ SDK 中新增的。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

`UITableViewCell`但是在 iOS 5 中，我们通常使用这种方法来创建实例：-

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

在 iOS 5 中，不需要您在 iOS 6 中使用的额外参数。(forIndexPath:)。

所以改变你的方法。它会起作用的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T17:01:39.797

这就是您收到错误的原因。根据 iOS 6.0 文档设置 UITableView 类参考状态 `dequeueReusableCellWithIdentifier:`在 iOS 2.0 及更高版本`dequeueReusableCellWithIdentifier:forIndexPath:`中可用，在 iOS 6.0 及更高版本中可用。

# php - 在数组PHP中搜索键时返回值

> ID：12016332
> 
> 赞同：0
> 
> 时间：2012-08-18T06:13:46.380
> 
> 标签：php, search, key, multidimensional-array

我试图在其他帖子中得到答案，但没有运气，希望有人能在这里帮助我，我有一个多维数组：

```
Array ( 
    [0] => stdClass Object ( 
        [affectsVersions] => Array ( ) 
        [assignee] => hmontes 
        [attachmentNames] => Array ( ) 
        [components] => Array ( ) 
        [created] => 2012-08-15T05:31:26.000Z
        [customFieldValues] => Array ( 
            [0] => stdClass Object ( 
                [customfieldId] => customfield_10201
                [key] => [values] => Array ( 
                    [0] => 123456
                )
            )
            [1] => stdClass Object ( 
                [customfieldId] => customfield_10004
                [key] => [values] => Array ( 
                    [0] => 30
                )
            )
        )
        [description] => [duedate] => [environment] => [fixVersions] => Array ( )
        [id] => 10228
        [key] => NTP-29
        [priority] => 3
        [project] => NTP
        [reporter] => hmontes
        [resolution] => [status] => 1
        [summary] => case 123456
        [type] => 3
        [updated] => 2012-08-15T05:31:26.000Z
        [votes] => 0
    )
) 
```

这就是我使用数组变量执行 print_r 时得到的结果，我需要搜索并从 [key] 中获取值，在这种情况下为 NTP-29，并将其作为字符串保存在变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:19:11.110

您可以使用 $array['keyName']; 通过键获取数组的值

但是，对你来说，看起来你只需要更深入 $array[0]['key'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:28:32.027

可以使用关联数组语法访问数组值和对象的属性。要获取`key`数组中对象中属性的值，您需要执行以下操作，假设`$array`是一个包含对您的数组的引用的变量：

```
$key = $array[0]['key']; // accesses NTP-29 in this case. 
```

这是使用对象属性访问语法访问同一属性的另一种方法：

```
$key = $array[0]->key; // also accesses NTP-29. 
```

# asp.net - SQL 中的 where 子句

> ID：12016335
> 
> 赞同：1
> 
> 时间：2012-08-18T06:14:12.867
> 
> 标签：asp.net, sql

我有记录 'All','A','B','C' 的下拉列表。

在按钮的单击事件中，我通过存储过程从数据库中获取记录。

我在存储过程中的 sql 查询：

```
Select * from TableA where Name = @Name 
```

这里@Name 是我已传递给存储过程的参数，其值是从下拉列表中选择的。

如果我从下拉列表中选择“A”，我的查询将是

```
Select * from TableA where Name = 'A' 
```

但我的问题是，如果我选择“全部”，那么我想要像这样的记录

```
Select * from TableA 
```

如何在单个查询语句中执行它？我不想在存储过程中使用 If.. else 条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:19:25.870

```
Select * from TableA where ((@Name = 'All') OR (Name = @Name)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:18:34.397

试试这个

```
select *  
from A 
where @Name = 'All' or Name = @Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:18:54.147

```
Select * from TableA where Name = @Name or @Name = 'All' 
```

# android - 将图像从应用程序动态保存到 SD 卡

> ID：12016342
> 
> 赞同：0
> 
> 时间：2012-08-18T06:15:48.747
> 
> 标签：android, android-sdcard

我正在制作一个画廊，我在其中从资产文件夹加载（在运行时）图像。现在我想在点击事件时将图像保存到 SD 卡。

*例如：* 当应用程序启动时，用户看到图像，他们可以滚动浏览图像并查看它们（这部分完成）。问题是图片在我自己的画廊视图中动态加载。我没有硬编码它们。

我想把它保存到 SD 卡上。但我没有图像的硬编码路径。可以有任意数量的图像。

```
 private void CopyAssets() {
        AssetManager assetManager = getAssets();
        InputStream in=null;
    String[] files = null;
        try {
            files = assetManager.list("image");
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        for(String filename : files) {

                try {
                    in = assetManager.open(filename);
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
        try {
                String dirName = Environment.getExternalStorageDirectory().toString(); 
                File newFile = new File(dirName); 
                newFile.mkdirs(); 

        OutputStream out = new FileOutputStream(newFile);
        System.out.println("in tryyyy");

                copyFile(in, out);
                in.close();
                in = null;
                out.flush();
                out.close();
                out = null;
            } catch(Exception e) {
                Log.e("tag", e.getMessage());
        } 
```

我尝试了上述方法，我不想将所有图像复制到 SD 卡。但只有用户从画廊中选择的那个太动态了。因为会有很多图像。对每个图像路径进行硬编码将很困难。

Android中是否有任何方法可以获取字符串中的当前图像路径或URI？是什么`View v = this.getCurrentFocus();`？它返回什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:20:39.820

[Gallery](http://developer.android.com/reference/android/widget/Gallery.html)从[AdapterView](http://developer.android.com/reference/android/widget/AdapterView.html)扩展而来，就像在 adapterView 上一样，您可以在选择项目时添加侦听器。

如果您知道选择了哪个项目，请使用它来将您想要的图像复制到 SD 卡。

为了更好地理解如何为 adapterView 实现适配器，请观看“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”视频。您可能希望将路径放入 viewHolder（取决于您的代码和设计）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:25:34.310

这是我创建的一种方法，可让您将图像（位图）保存到内存中。参数需要一个位图对象和该对象的文件名。

```
public void writeBitmapToMemory(String filename, Bitmap bitmap) {
        FileOutputStream fos;
        // Use the compress method on the Bitmap object to write image to the OutputStream
        try {
            fos = this.openFileOutput(filename, Context.MODE_PRIVATE);
            // Writing the bitmap to the output stream
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        }

    } 
```

我希望这有帮助。

# android - 有一个单一的应用程序名称，而不是单独的活动名称

> ID：12016346
> 
> 赞同：0
> 
> 时间：2012-08-18T06:16:33.630
> 
> 标签：android, android-emulator

我有一个包含三个活动的 android 应用程序：加载、主要、信用。

但是当我尝试运行并查看模拟器时，我看到了三个图标：Loading、Main、Credits。

我怎样才能只有一个应用程序名称？我在哪里设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:19:37.750

在应用程序级别的 android 清单文件中设置。

**android:label="@string/app_name"**

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Loading"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".Main" />
    <activity android:name=".Credits" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:21:46.893

在你的`AndroidManifest.xml`中，你只需要设置`<intent-filter>`一个`Activity`其他`Activities`不需要这个标签。

# jquery - 如何编辑使用 jquery 模板引擎生成的特定 div 的数据？

> ID：12016349
> 
> 赞同：0
> 
> 时间：2012-08-18T06:16:58.170
> 
> 标签：jquery, html, ajax, jquery-templates

我在运行时使用 HTTP POST 请求获取以下 JSON：

```
{"d": {"Result":"OK","Records": [{
   "Id":1,
   "QText":"Explain marketing and the usage of Marketing in short",
   "AText":"demo answer",
   "Marks":11,
   "Comment":"no comments"
}, {
   "Id":14,
   "QText":"How Marketing affects SCM",
   "AText":"hi",
   "Marks":10,
   "Comment":"No comments"
}, {
   "Id":15,
   "QText":"Explain Marketing Tools",
   "AText":"ans 3",
   "Marks":8,
   "Comment":"No comments"
}, {
   "Id":16,
   "QText":"Pls answer this question",
   "AText":"ans 4",
   "Marks":0,
   "Comment":"poor"
}]}} 
```

所以现在使用 jQuery 模板插件，我生成了以下类型的 UI：

![在此处输入图像描述](../Images/d9fdf72a35a51b6fb2709abc26f09356.png)

我使用下面的 jQuery 代码来创建上面的 UI：

```
<script id="solutionTemplate" type="text/x-jQuery-tmpl">
    <div class="filtering">
        <h2> Question </h2>
        <div> ${QText} </div><br/>
        <h2> Answer </h2>
        <div> ${AText}</div><br/>
        <table><tr><td>
        <h2> Marks </h2>
        <div> 
           <select id="ddlMarks-${Id}">
              <option value="11" ${IsSelected(Marks,11)}>Not Checked</option>
              <option value="0" ${IsSelected(Marks,0)}> Zero </option>
              <option value="1" ${IsSelected(Marks,1)}> One </option>
              <option value="2" ${IsSelected(Marks,2)}> Two </option>
              <option value="3" ${IsSelected(Marks,3)}> Three </option>
              <option value="4" ${IsSelected(Marks,4)}> Four </option>
              <option value="5" ${IsSelected(Marks,5)}> Five </option>
              <option value="6" ${IsSelected(Marks,6)}> Six </option>
              <option value="7" ${IsSelected(Marks,7)}> Seven </option>
              <option value="8" ${IsSelected(Marks,8)}> Eight </option>
              <option value="9" ${IsSelected(Marks,9)}> Nine </option>
              <option value="10" ${IsSelected(Marks,10)}> Ten </option> 
           </select>
        </div></td>
        <td><h2> Comments </h2>
        <textarea id="textarea-${Id}" cols="120" rows="1"> ${Comment} </textarea>
        </td>
        <td><br/><input type="button" id="btn-${Id}" value="Submit"/></td>
        </tr></table>
    </div>
</script> 
```

这是另一个用于将获取的数据绑定到 jQuery 模板的代码片段

```
if (response.d['Result'] == 'OK') {
   var solutionList = response.d['Records'];
   $('#solutionTemplate').tmpl(solutionList).appendTo('#divAnswers');
} 
```

如您所见，现在的问题是 UI 中的提交按钮。使用该提交按钮，我必须将该特定块（问题）的更新数据发布到服务器。如何确定按下了哪个提交按钮，以及如何获取仅与该特定提交按钮相关的文本框/下拉列表的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:56:06.410

对于委托事件处理程序（用于在脚本执行时绑定到不在 DOM 中的元素），使用[`.on()`](http://api.jquery.com/on/). 一旦你捕捉到了点击事件，使用[jQuery DOM 遍历](http://api.jquery.com/category/traversing/)方法来查找相关节点并获取它的值。

在这种情况下，我建议使用[`.closest()`](http://api.jquery.com/closest)导航到更新块的顶层（`<div class="filtering">`），然后使用[`.find()`](http://api.jquery.com/find/);从那里找到相关的更新节点。像这样的东西是你想要的：

```
$(document).ready(function() {
    $(document).on('click', 'input[value="Submit"]', function() {

        var $updatedBlock = $(this).closest('.filtering');

        var comments = $updatedBlock.find('textarea').val();
        alert( comments );

        var marks = $updatedBlock.find('select').val();
        alert( marks );

        // make ajax request with updated data
    });
}); 
```

* * *

请注意，在该`$(document).on('click'`行中，您可以替换`document`为任何 jQuery 选择器，但它只会*在调用时匹配 DOM 中的*元素；您应该替换`document`为要添加所有解决方案块的任何静态父节点，因为这意味着事件不必一直传播到根节点，这将产生更好的性能。

有关详细信息，请参阅文档[`.on()`](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:22:11.093

给你所有的提交按钮一个类

```
<input type="button" id="btn-${Id}" class="SubmitButton" value="Submit"/> 
```

并绑定点击事件

```
 $('.SubmitButton').bind('click', function (e) {
    //e.target will give you what button is pressed
     alert(e.target);
     e.stopImmediatePropagation();
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:13:33.253

尽管 Rahul 和 nbrooks 的答案也能够实现所需的目标，但这是我已经用来实现所需目标的另一种第三种方法。

我添加了数据标签

```
$('.btnSubmit').live('click', function (e) {
            //e.target will give you what button is pressed
            var id = $(e.target).attr('data-tag');
            e.stopImmediatePropagation();
            var strTextId = '#textarea-' + id;
            var strDDLId = '#ddlMarks-' + id;
            alert($(strTextId).val() + ' , ' + $(strDDLId).val());
            //SubmitRemarks(id,$(strTextId).val(), $(strDDLId).val());
        });

<script id="solutionTemplate" type="text/x-jQuery-tmpl">
    <div class="filtering">
        <h2> Question </h2>
        <div> ${QText} </div><br/>
        <h2> Answer </h2>
        <div> ${AText}</div><br/>
        <table><tr><td>
        <h2> Marks </h2>
        <div> 
           <select id="ddlMarks-${Id}">
              <option value="11" ${IsSelected(Marks,11)}>Not Checked</option>
              <option value="0" ${IsSelected(Marks,0)}> Zero </option>
              <option value="1" ${IsSelected(Marks,1)}> One </option>
              <option value="2" ${IsSelected(Marks,2)}> Two </option>
              <option value="3" ${IsSelected(Marks,3)}> Three </option>
              <option value="4" ${IsSelected(Marks,4)}> Four </option>
              <option value="5" ${IsSelected(Marks,5)}> Five </option>
              <option value="6" ${IsSelected(Marks,6)}> Six </option>
              <option value="7" ${IsSelected(Marks,7)}> Seven </option>
              <option value="8" ${IsSelected(Marks,8)}> Eight </option>
              <option value="9" ${IsSelected(Marks,9)}> Nine </option>
              <option value="10" ${IsSelected(Marks,10)}> Ten </option> 
           </select>
        </div></td>
        <td><h2> Comments </h2>
        <textarea id="textarea-${Id}" cols="120" rows="1"> ${Comment} </textarea>
        </td>
        <td><br/><input data-tag="${Id}" class="btnSubmit" type="button" id="btn-${Id}" value="Submit"/></td>
        </tr></table>
    </div>
</script> 
```

# c - CCS，3秒定时器

> ID：12016351
> 
> 赞同：2
> 
> 时间：2012-08-18T06:18:04.307
> 
> 标签：c, pic

我想设置一个 3 秒的计时器。这样程序将遵循一条指令 3 秒钟，然后遵循其他一些指令集。20MHz，PIC 16F877A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-28T06:07:46.490

[CCS 网页上](http://www.ccsinfo.com/content.php?page=compexamples#top)有一个名为“秒计时器”的示例，用于您完全相同的 PIC 和时钟。

恢复：

1-您需要在保险丝中设置时钟

```
#fuses HS
#use delay(clock=20000000) 
```

2-为中断处理程序编写一个函数

```
#INT_RTCC                                    //Interrupt procedure
clock_isr() {                                //called every time RTCC
                                             //flips from 255 to 0
   ///TODO
} 
```

3-初始化中断

```
setup_timer_0( RTCC_INTERNAL | RTCC_DIV_256 );
set_timer0(0);
enable_interrupts(INT_RTCC);
enable_interrupts(GLOBAL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:35:46.837

delay_ms（纳秒时间）；

例子 ：

```
 delay_ms(1000);  //wait for 1 sec 
```

# c# - 通过 asp.net/C# 代码调用第三方应用程序 - UI 被“卡住”

> ID：12016354
> 
> 赞同：0
> 
> 时间：2012-08-18T06:18:21.790
> 
> 标签：c#, asp.net

我正在尝试编写一个网页，其中 iam 从代码中调用第三方应用程序（.exe）

```
System.Diagnostics.Process.Start("app.exe") 
```

该应用程序启动并开始打开 ​​GUI，但在大约 3-4 秒后被“卡住”并停在那里。这不是应用程序问题，因为当我通过网络上的本地管理员帐户运行它时它运行良好-服务器。我还尝试使用管理员帐户调用此应用程序

```
Start(
string fileName,
string userName,
SecureString password,
string domain) 
```

但这没有帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:54:23.357

Its better to set some initialization before you run it, and not run it with the default settings that are not for the web, so try this code:

```
 Process compiler = new Process();

    // Make sure that the application.exe can be found
    compiler.StartInfo.FileName = "c:\\app.exe";

    compiler.StartInfo.StandardOutputEncoding = System.Text.Encoding.UTF8;

    compiler.StartInfo.UseShellExecute = false;
    compiler.StartInfo.CreateNoWindow = false;

    compiler.StartInfo.RedirectStandardError = true;
    compiler.StartInfo.RedirectStandardOutput = true;
    compiler.StartInfo.RedirectStandardInput = true;

    // here I run it
    compiler.Start();

    compiler.StandardInput.Flush();
    compiler.StandardInput.Close();

    // here I get the output
    string cReadOutput = compiler.StandardOutput.ReadToEnd();

    compiler.WaitForExit();
    compiler.Close(); 
```

# java - 有没有好的纯java浏览器模拟器。？

> ID：12016364
> 
> 赞同：1
> 
> 时间：2012-08-18T06:19:44.463
> 
> 标签：java

它应该包含的一些基本内容...

*   必须支持本地 http/https 流量优化。
*   必须支持限制 javascript 执行的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:23:09.010

[Lobo](http://lobobrowser.org/java-browser.jsp)是一个完全用 Java 编写的浏览器。由于它是开源的，你可以做任何你想做的事情来限制 JavaScript。但是，我认为代码库可能比您希望的要大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T06:22:23.463

这是另一个，称为[HtmlUnit](http://htmlunit.sourceforge.net/)。我想它好一点。

# perl - Perl 是否有 RIA 框架，如 Java 中的 zkoss 或 Vaadin？

> ID：12016366
> 
> 赞同：0
> 
> 时间：2012-08-18T06:19:58.817
> 
> 标签：perl, ria

我是 Perl 的新手。我想知道 Perl 是否有 RIA（富 Internet 应用程序）框架，例如[zkoss](http://www.zkoss.org/)或[Vaadin](http://vaadin.com/)或Java 的[GWT](https://developers.google.com/web-toolkit/)？

Java 和 Perl 在内存管理和模式设计方面如何比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:34:48.523

### RIA

简而言之，没有。但是看看[Catalyst 框架](http://search.cpan.org/%7Ejjnapiork/Catalyst-Runtime-5.90016/lib/Catalyst.pm)。但是不，我不知道像“zkoss”或“vaadin”这样有光泽和点击-y的东西。HTML+CSS+Perl 也能正常工作，如果你知道的话。

### 内存管理

Perl 是一个垃圾收集器。不再引用的变量将被释放。请注意，一般而言，Perl 倾向于时间效率而不是内存效率，这并不意味着 perl 在任何方面都臃肿。还要注意，必须手动破坏*循环引用*，否则垃圾收集器将无法检测到要收集的那些变量。这有点不像Java。

### 模式

是的，当然你可以使用任何你喜欢的模式。Perl 默认情况下不会使 objetc 定位变得太容易，但是[Moose 框架](http://search.cpan.org/%7Edoy/Moose-2.0603/lib/Moose.pm)可以帮助解决这个问题。在 Perl 中，您还可以使用Java 中不可用或不那么容易使用的一些*功能模式，例如闭包或柯里化。*请注意，使用 Perl 创建匿名类真的很困难，但仍然可能有困难的事情。无论如何，您通常都不需要它们与闭包。

### 好文学

请参阅 SO 上“perl”标签的信息页面：[https](https://stackoverflow.com/tags/perl/info) ://stackoverflow.com/tags/perl/info尤其是免费书籍部分。我喜欢*Higher Order Perl*，尽管首先阅读基础知识应该是明智的。

带有 perltoot、perlboot 和其他页面的 Perl 文档很好地介绍了传统的 Perl 面向对象技术，这些技术在表面上与 Moose 接口不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T20:03:01.240

试试 Sencha Ext JS：

*   [http://www.sencha.com/products/extjs/](http://www.sencha.com/products/extjs/)

甚至还有一个可用于引导的 Perl 包：

*   RPC::ExtDirect - [https://metacpan.org/pod/RPC%3a%3aExtDirect](https://metacpan.org/pod/RPC%3a%3aExtDirect)

**来自[http://www.sencha.com/products/extjs/](http://www.sencha.com/products/extjs/)**

> Sencha Ext JS 是什么？
> 
> Sencha Ext JS 是商业级 Web 应用程序开发的领先标准。凭借 100 多个示例、1000 个 API、数百个组件、完整的文档套件和内置主题，Ext JS 提供了构建强大的桌面应用程序所需的工具。Ext JS 还带来了丰富的数据包，允许开发人员在构建他们的应用程序时使用模型-视图-控制器 (MVC) 架构。MVC 利用大数据网格等功能，在 Web 应用程序中实现全新级别的交互性。
> 
> 现代应用程序框架
> 
> Ext JS 4 是 Web 框架向前迈出的重要一步。在 Ext JS 3.3 的基础上，我们的最新版本增加了 350 多个新 API、50 个新类和 65% 以上的文档。一个全新的数据包使开发人员能够利用无限网格滚动等功能为 Web 应用程序构建全新级别的交互性。

**来自[https://metacpan.org/pod/RPC%3a%3aExtDirect](https://metacpan.org/pod/RPC%3a%3aExtDirect)**

> 抽象的
> 
> 该模块提供了一种将 Perl 代码映射到与 Ext JS JavaScript 框架一起使用的 Ext.Direct RPC 接口的简单方法。
> 
> Ext.Direct 的用途是什么？
> 
> Ext.Direct 是一种高级 RPC 协议，它允许服务器组件与 JavaScript 接口轻松快速地集成。客户端堆栈内置在 Ext JS 核心中，并被许多组件使用，如数据存储、表单、网格、图表等。Ext.Direct 支持请求批处理、文件上传、事件轮询和许多其他功能。
> 
> 除了简单易用外，Ext.Direct 还允许在服务器端和客户端实现非常干净的代码和问题分离，从而简化代码、提高整体软件质量和缩短开发时间。
> 
> 从 Perl 模块开发者的角度来看，Ext.Direct 只是一个方法属性；它是从 Perl 代码调用还是通过 Ext.Direct 调用都没有关系。这种方法尤其允许进行多层测试：
> 
> *   无需设置 HTTP 环境即可使用 Test::More 等常用工具测试服务器端方法
>     
>     
> *   可以使用 Perl 客户端通过 Ext.Direct 调用作为一个整体测试服务器端类
>     
>     
> *   主要应用程序组件使用 Selenium 等浏览器自动化工具进行测试。
>     
>     
> 
> 有关 Ext.Direct 的更多信息，请参阅 [http://www.sencha.com/products/extjs/extdirect/](http://www.sencha.com/products/extjs/extdirect/)。

# java - 使用 int 更改图像视图

> ID：12016368
> 
> 赞同：0
> 
> 时间：2012-08-18T06:20:12.460
> 
> 标签：java, android, arrays, imageview, int

我已经被困了一整天了，请帮助我。所以我有 2 个数组，里面装满了来自两个玩家的五个骰子，我想将它们设置为我放入可绘制对象中的相应骰子图像。这是我拥有的原始代码，在 TextView 中显示数组。

```
int player1[] = new int[5];
int player2[] = new int[5];
TextView p1Dice, p2Dice;

private void displayDice() {
    StringBuffer sbfNumbers = new StringBuffer();
    for (int i = 0; i < 5; i++) {
        sbfNumbers.append(player1[i] + " ");
    }
    StringBuffer sbfNumbers2 = new StringBuffer();
    for (int i = 0; i < 5; i++) {
        sbfNumbers2.append(player2[i] + " ");
    }
    p1Dice.setText(sbfNumbers.toString());
    p2Dice.setText(sbfNumbers2.toString()); 
```

我不知道如何让它显示 ImageView 。

```
private final static int[] diceImages = new int[] { R.drawable.d1, 
R.drawable.d2, R.drawable.d3, R.drawable.d4, R.drawable.d5, R.drawable.d6 };
ImageView p1Dice1, p1Dice2, p1Dice3, p1Dice4, p1Dice5;

for (int i = 0; i < 5; i++) {
    p1Dice[i].setImageResource(diceImage[player1[i]]);
} 
```

我错过了什么？

这是我的完整代码，对不起，它一团糟。我刚开始自学编程，这是我的第一个程序。任何关于使它变得更好的建议也受到赞赏。

```
package com.kelvinblade.liardice;

import java.util.Random;
import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {

int player1[] = new int[5];
int player2[] = new int[5];
TextView p1Dice, p2Dice, result, whosTurn, tvLog, score;
ImageView p1Dice1, p1Dice2, p1Dice3, p1Dice4, p1Dice5;
Button openDice, callDice;
EditText NumDice, DiceNum;
int NumOfDice, DiceNumber, turn;
int currentDiceQuantity, currentDiceFace;
boolean isOneWildCard = true;
int callLog[] = new int[70];
int playerOneEnergy, playerTwoEnergy;
boolean playerOneStart = true;

private final int[] diceImages = new int[] { R.drawable.d1, R.drawable.d2, R.drawable.d3, R.drawable.d4, R.drawable.d5, R.drawable.d6 };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initializePlaceHolders();
    startGame();
}

// Initialize the Place Holders
private void initializePlaceHolders() {
    p1Dice = (TextView) findViewById(R.id.tvP1Dice);
    p2Dice = (TextView) findViewById(R.id.tvP2Dice);
    openDice = (Button) findViewById(R.id.bOpenDice);
    callDice = (Button) findViewById(R.id.bCallDice);
    whosTurn = (TextView) findViewById(R.id.tvWhosTurn);
    tvLog = (TextView) findViewById(R.id.tvLog);
    score = (TextView) findViewById(R.id.tvScore);
    result = (TextView) findViewById(R.id.tvResult);
    NumDice = (EditText) findViewById(R.id.etNumDice);
    DiceNum = (EditText) findViewById(R.id.etDiceNum);
    p1Dice1 = (ImageView) findViewById(R.id.ivDice1);
    p1Dice2 = (ImageView) findViewById(R.id.ivDice2);
    p1Dice3 = (ImageView) findViewById(R.id.ivDice3);
    p1Dice4 = (ImageView) findViewById(R.id.ivDice4);
    p1Dice5 = (ImageView) findViewById(R.id.ivDice5);
    openDice.setOnClickListener(this);
    callDice.setOnClickListener(this);
}

// Game starts here
public void startGame() {
    playerOneEnergy = 4;
    playerTwoEnergy = 4;
    playGame();
}

// Starts level
public void playGame() {
    if ((playerOneEnergy != 0) && (playerTwoEnergy != 0)) {
        initialize();
        player1 = rollDice();
        player2 = rollDice();
        displayDice();
        displayTurn();
    } else if (playerTwoEnergy == 0) {
        result.setText("Loading Next Stage!");
        startGame();
    } else
        result.setText("Game Over!");
}

// Initialize the Variables
private void initialize() {
    turn = 0;
    currentDiceQuantity = 0;
    currentDiceFace = 0;
    result.setText("New Game.");
    tvLog.setText("Game Log:");
}

// Rolls the Dice
private int[] rollDice() {
    int[] diceArray = new int[5];
    Random randomDice = new Random();
    for (int i = 0; i < 5; i++) {
        diceArray[i] = randomDice.nextInt(6) + 1;
    }
    return diceArray;
}

// Displays the Dice for Player 1 & 2
private void displayDice() {
    StringBuffer sbfNumbers = new StringBuffer();
    for (int i = 0; i < 5; i++) {
        sbfNumbers.append(player1[i] + " ");
    }
    StringBuffer sbfNumbers2 = new StringBuffer();
    for (int i = 0; i < 5; i++) {
        sbfNumbers2.append(player2[i] + " ");
    }
    p1Dice.setText(sbfNumbers.toString());
    p2Dice.setText(sbfNumbers2.toString()); 

// try to display the dice array as image   <here's the problem>
    for (int i = 0; i < 5; i++) {
    p1Dice[i].setImageResource(diceImage[player1[i]]);
    }
    }

// Button actions
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.bCallDice:
        try {
            getCall();
        } catch (Exception e) {
            Dialog d = new Dialog(this);
            d.setTitle("Invalid call. Please try again.");
            d.show();
        }
        if ((validInput()) && (validCall())) 
            runCall();          
        else
            result.setText("Invalid call");
        break;
    case R.id.bOpenDice:
        checkDice();
        break;
    }
}

private void runCall() {
    currentDiceQuantity = NumOfDice;
    currentDiceFace = DiceNumber;
    result.setText("Valid call");
    writeLog();
    displayLog();
    turn++;
    displayTurn();
}

private void startAImove() {
    Random randomAction = new Random();
    int randomCall = randomAction.nextInt(1);
    if ((randomCall == 0) && (!isFirstMove()))
        checkDice();
    else {
        while (!validCall()) {
            NumOfDice = randomAction.nextInt(5) + 1;
            DiceNumber = randomAction.nextInt(5) + 1;
        }
        runCall();
    }
}

// Gets the Call from Player 1
private void getCall() {
    String s = NumDice.getText().toString();
    NumOfDice = Integer.parseInt(s);
    String s1 = DiceNum.getText().toString();
    DiceNumber = Integer.parseInt(s1);
    if (DiceNumber == 1) {
        isOneWildCard = false;
    }
}

// Checks to see if the call is a valid input
private boolean validInput() {
    int MaxNumOfDice = 5;
    int MaxDiceQuantity = 6;
    if ((NumOfDice <= MaxNumOfDice * 2) && (DiceNumber <= MaxDiceQuantity)) {
        return true;
    } else
        return false;
}

// Checks to see if Valid Call
private boolean validCall() {
    if (NumOfDice > currentDiceQuantity) {
        return true;
    } else if (((NumOfDice == currentDiceQuantity) && (currentDiceFace != 1))
            && ((DiceNumber == 1) || (DiceNumber > currentDiceFace))) {
        return true;
    } else {
        return false;
    }
}

// Writes to Log
private void writeLog() {
    callLog[turn * 2] = currentDiceQuantity;
    callLog[turn * 2 + 1] = currentDiceFace;
}

// Display Log
private void displayLog() {
    StringBuffer sbfNumbers = new StringBuffer();
    sbfNumbers.append("Game Log:\n");
    for (int i = 0; i < turn + 1; i++) {
        sbfNumbers.append((i + 1) + ": Player" + (i % 2 + 1) + " "
                + callLog[i * 2] + "x" + callLog[i * 2 + 1] + "\n");
    }
    tvLog.setText(sbfNumbers.toString());
}

// Display who's turn
public void displayTurn() {
    if (whichPlayersTurn() == 1)
        whosTurn.setText("Player 1's Turn...");
    else {
        whosTurn.setText("Player 2's Turn...");
    //  startAImove();
    }
}

// Checks who's turn
private int whichPlayersTurn() {
    boolean isTurnEven = false;
    if (turn % 2 == 0)
        isTurnEven = true;
    if (((playerOneStart) && (isTurnEven))
            || ((!playerOneStart) && (!isTurnEven))) {
        return 1;
    } else
        return 2;
}

// Checks if it's the first move
private boolean isFirstMove() {
    if (currentDiceQuantity == 0)
        return true;
    else
        return false;
}

// Checks the Player 1 & 2 for the Dice
private void checkDice() {
    if (!isFirstMove()) {
        int DiceCount = 0;
        for (int i = 0; i < 5; i++) {
            if (player1[i] == DiceNumber)
                DiceCount++;
            if (player2[i] == DiceNumber)
                DiceCount++;
            if ((player1[i] == 1) && (isOneWildCard))
                DiceCount++;
            if ((player2[i] == 1) && (isOneWildCard))
                DiceCount++;
        }
        if (((DiceCount >= NumOfDice) && (whichPlayersTurn() != 1))
                || ((DiceCount < NumOfDice) && (whichPlayersTurn() == 1))) {
            result.setText("Player 1 Wins!");
            playerTwoEnergy--;
            playerOneStart = false;
        } else {
            result.setText("Player 1 Loses!");
            playerOneEnergy--;
            playerOneStart = true;
        }
        displayWinLost();
        playGame();
    } else
        result.setText("Can not open on first move!");
}

// Display Win / Lose
private void displayWinLost() {
    StringBuffer sbfNumbers = new StringBuffer();
    sbfNumbers.append("Player One Energy : " + playerOneEnergy
            + "\nPlayer Two Energy: " + playerTwoEnergy);
    score.setText(sbfNumbers.toString());
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
}

} 
```

非常感谢您。非常感谢任何帮助。再次感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:29:40.303

在您的代码中 imageViews 不在数组中，因此您不能执行 p1Dice[i] 。

所以请改为

```
private ImageView[] p1Dice = new ImageView[5]; 
```

## 或者

```
p1Dice1.setImageResource(diceImage[player1[0]]);
p1Dice2.setImageResource(diceImage[player1[1]]);    
p1Dice3.setImageResource(diceImage[player1[2]]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:30:04.273

ImageViews 不在数组中，所以你不能做 p1Dice[i].something()

将 ImageViews 的声明更改为此

```
private ImageView[] p1Dice = new ImageView[5]; 
```

# android - 访问用户 twitter、gmail 和 facebook 通知

> ID：12016372
> 
> 赞同：0
> 
> 时间：2012-08-18T06:20:32.430
> 
> 标签：android, facebook-graph-api, notifications, gmail

我想开发一个可以从 gmail、twitter 和 facebook 获取通知的应用程序。像 BlingBoard（https://play.google.com/store/apps/details?id=com.jappka.blingboard&hl=en）之类的东西。

我已经开始使用 facebook sdk，还没有为 gmail 和 twitter 做任何事情。有没有其他方法可以访问通知或使用他们的 api 可能是解决这个问题的唯一方法。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:56:18.240

对于电子邮件：使用 K9 Client android。

对于 Facebook：创建广播接收器以接收通知。

对于推特：同样。

# php - 将文件上传到谷歌驱动器问题 PHP

> ID：12016373
> 
> 赞同：2
> 
> 时间：2012-08-18T06:20:36.033
> 
> 标签：php, file-upload, http-status-code-401, google-drive-api

我在将文件上传到 Google Drive 时遇到问题，我无法上传文件。任何人都可以帮助，请回答。

以下是我上传文件时遇到的错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Invalid Credentials",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Invalid Credentials"
 }
} 
```

我已经使用驱动 SDK 注册了应用程序，并且正在使用驱动 SDK 客户端 ID。此外，我每次都使用数据库中保存的长期刷新令牌中的更新访问令牌。

代码在这里：

```
$fname = basename($updfile); // where $updfile is the file name with path
$turl = "https://www.googleapis.com/drive/v1/files";
$jsondata = '
{
    "title": "'.$fname.'",
    "mimeType":"application/zip",
    "description":"The mailchimp data export to google drive."
}';

$headers = 'Host: www.googleapis.com'."\r\n";
$headers .= 'Authorization: Bearer '.$access_token."\r\n";  // $access_token is token generating everytime from refresh token
$headers .= 'Content-Type: application/json'."\r\n";
$headers .='Content-Length: '.strlen($jsondata)."\r\n";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $turl);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsondata);
curl_setopt($ch, CURLOPT_HTTPHEADER, array($headers));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($ch);
curl_close($ch); 
```

如果有人对此有解决方案或建议，请回复/回答。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:05:15.300

我认为您的网址不正确：

$turl = "https://www.googleapis.com/drive/v1/files";

它应该是：

$turl = "https://www.googleapis.com/ `upload`/drive/v1/files";

以下是有关使用 v2 上传功能的文档（尽可能精简）。它可能会也可能不会比使用 v1 更有用:)

[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:41:32.753

为什么不尝试在 rest 客户端中使用您的访问令牌来查看问题是来自您的 PHP 代码还是您的访问令牌。

[Chrome 的Postman Rest Client](https://chrome.google.com/webstore/detail/fdmmgilgnpjigdojojpjoooidkmcomcm)使用起来非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:12:37.837

我建议使用[PHP 客户端库](https://code.google.com/p/google-api-php-client/)并检查文档以获取显示如何将文件上传到 Google Drive 的 PHP 片段：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

如果出于任何原因您想继续使用 php_curl 并手动构建 HTTP 请求，您应该尝试使用[OAuth 2.0 Playground](https://developers.google.com/oauthplayground/)发送相同的请求并将其与您的进行比较。

# database - 如何保护 Redis 集群？

> ID：12016376
> 
> 赞同：7
> 
> 时间：2012-08-18T06:21:31.343
> 
> 标签：database, security, database-design, redis, sharding

我知道 Redis Cluster 仍然不稳定，但是很长一段时间以来它已经通过了所有的单元测试，所以我开始使用它。

我想知道如果节点需要身份验证，Redis 集群是否能正常工作。我倾向于认为是的，因为它们通过不同的端口连接并使用不同的协议，但我不确定，也找不到任何文档或[规范](http://redis.io/topics/cluster-spec/)上的任何内容来确认这一点。

此外，如果 redis 集群协议飞越身份验证障碍，这不是安全漏洞吗？我的数据库可以被外界访问吗？（端口至少必须是可访问的，以便它可以与其他节点通信）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-07T03:58:33.890

SSH 隧道可能是一个简单的解决方案：

1.  您不需要将 redis 端口暴露给外界。只有 ssh 一个。
2.  SSH支持数据压缩，可以减少数据中心之间的传输。

快速示例： `ssh -f -L 1234:localhost:6379 server.com -NC`

这会将任何到 localhost:1234 的传入连接路由到远程 server.com:6379。因此，您可以在 redis 配置文件中将 server.com:6379 替换为 localhost:1234。

您可以查看`man ssh`更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T08:53:06.380

如果任何协议在 Internet 上运行，您将需要加密（“ssl”），例如跨数据中心。这通常会影响性能。在当前的 Redis 安全规范中 -

[http://redis.io/topics/security](http://redis.io/topics/security)

建议不支持 ssl，您需要 SSL 代理。这通常会导致系统性能下降，例如您必须考虑的延迟。

因此，理想情况下，集群节点应该位于同一地点。如果不能，则应将集群设计为限制跨站点数据传输或在没有任何实时限制的情况下离线。

我还选择在每个节点的需要的基础上禁用/启用命令（请参阅上面的安全规范中的详细信息）。我不确定集群模式是否支持此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-06T18:49:28.580

由于 Redis 在集群中的运行方式，使用 SSL 的 Redis Cluster 是不可能的。

要使 SSL 在 Redis 部署中工作，您需要安装和配置 stunnel 或隧道应用程序。

**从 Redis 文档中：** 请注意，要使 Redis 集群正常工作，您需要，对于每个节点：用于与客户端通信的正常客户端通信端口（通常为 6379）对所有需要访问集群的客户端开放，加上所有其他集群节点（使用客户端端口进行密钥迁移）。集群总线端口（客户端端口 + 10000）必须可以从所有其他集群节点访问。

您可以将 stunnel 配置为在某个端口接收流量并将流量重定向到 6379 或任何其他 redis-server 正在侦听的端口。在集群模式下，redis-server 会宣布它的“cluster_port”，以便客户端和其他节点可以连接到这个与之连接的端口。如果您覆盖设置“cluster_announce_port”，ssl-clients 将成功连接到节点，但 redis-cli 和 cluster_port 上的节点间通信将失败。

似乎 AWS ElastiCache/Redis Enterprise 支持带集群的 SSL，但不支持开源 Redis。

# symfony - Doctrine2 命名查询

> ID：12016378
> 
> 赞同：16
> 
> 时间：2012-08-18T06:21:57.613
> 
> 标签：symfony, doctrine-orm

我在 Doctrine2 中找不到任何有关命名查询的文档。请帮忙。Doctrine2 有命名查询功能吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-15T14:15:09.377

您可以使用

1.  命名查询 - DQL。例子

    ```
    use Doctrine\ORM\Mapping\NamedQuery;
    use Doctrine\ORM\Mapping\NamedQueries;

    /**
    * @Entity
    * @Table(name="cms_users")
    * @NamedQueries({
    *     @NamedQuery(name="activated", query="SELECT u FROM __CLASS__ u WHERE u.status = 1")
    * })
    */
    class CmsUser
    {} 
    ```

    并称它为

    ```
    $this->getDoctrine()->getRepository('MyBundle:CmsUser')
        ->createNamedQuery('activated')
        ->getResult(); 
    ```

2.  NamedNativeQuery - SQL。更多信息在这里：[http ://docs.doctrine-project.org/en/latest/reference/native-sql.html#named-native-query](http://docs.doctrine-project.org/en/latest/reference/native-sql.html#named-native-query)

3.  在 EntityRepository 中收集查询，例如：

    ```
    namespace Acme\StoreBundle\Repository;

    use Doctrine\ORM\EntityRepository;

    class ProductRepository extends EntityRepository
    {
        public function findAllOrderedByName()
        {
            return $this->getEntityManager()
                ->createQuery('SELECT p FROM AcmeStoreBundle:Product p ORDER BY p.name ASC')
                ->getResult();
        }
    } 
    ```

    更多信息：http: [//symfony.com/doc/current/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)

类似主题： [https://groups.google.com/forum/?fromgroups#!topic/doctrine-user/K-D5ta5tZ3Y[1-25]](https://groups.google.com/forum/?fromgroups#!topic/doctrine-user/K-D5ta5tZ3Y%5b1-25%5d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:30:46.537

也许您会对 EntityRepositories 感兴趣，您可以在其中创建和存储复杂的 Doctrine 查询，并在您想要的项目中调用主题：

[http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T18:03:06.853

如果您不想弄乱实体定义，则可以在存储库的构造函数中调用注释符号内部使用的函数：

```
namespace MyBundle\Repository;

use Doctrine\ORM\EntityRepository;

class CmsUserRepository extends EntityRepository
{
    public function __construct($em, \Doctrine\ORM\Mapping\ClassMetadata $class)
    {
        $this->getClassMetadata()->addNamedQuery(array(
            'name'  => 'activated',
            'query' => 'SELECT u FROM __CLASS__ u WHERE u.status = 1'
        ));
    }
} 
```

您还可以`__CLASS__`将语句的一部分替换为实体的名称空间和类，例如`MyBundle\Entity\CmsUser`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-09T01:51:02.527

我发现这个问题正在寻找本地命名查询示例，上面的答案对我有帮助，所以我想我会分享如何以同样的方式进行本地命名查询。

将此添加到您的实体存储库的构造函数中

```
public function __construct($em, \Doctrine\ORM\Mapping\ClassMetadata $class)
{
    parent::__construct($em, $class);
    $this->getClassMetadata()->addNamedNativeQuery(
        array('name' => 'published', 
              'query' => 'SELECT 
                  t0.id AS id, 
                  t0.tracking_uri AS tracking_uri, 
                  t0.name AS name, 
                  t0.description AS description, 
                  t0.url_name AS url_name,
                  t0.status_type_id as status_type_id
                FROM 
                  store.store t0 
                WHERE 
                  t0.status_type_id = 2', 
               'resultClass' => '__CLASS__',
               'resultSetMapping' => array('entities' => array('entityClass' => '__CLASS__',
                                                               'fields'      => array('id'           => 'id',
                                                                                      'tracking_url' => 'tracking_url',
                                                                                      'name'         => 'name',
                                                                                      'description'  => 'description',
                                                                                      'url_name'     => 'url_name',
                                                                                      'status_type'  => 'status_type_id')))));
} 
```

这是我的测试片段

```
public function testNamedNativeQueryPublished()
{
    $results = $this->em->getRepository('MyBundle:Store')->createNativeNamedQuery('published')->execute();

    foreach ($results as $store)
    {
        $this->assertEquals(2, $store->getStatusType());
    }
} 
```

# android - Android Eclipse 删除一个库项目jar

> ID：12016382
> 
> 赞同：0
> 
> 时间：2012-08-18T06:22:29.120
> 
> 标签：android, eclipse

我想从我的库项目中删除其中一个 jar 文件夹。当我单击 jar 文件夹时，删除它的选项显示为灰色。

我想删除 mopub-android-sdk.jar

![在此处输入图像描述](../Images/b0bf833e00f52a201c116a683305fc10.png)

这是它给我的选项。为什么一切都是灰色的？

![在此处输入图像描述](../Images/ab24e956b8023d728a3338ddc7fe8076.png)

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:25:20.687

转到项目属性 -> Android -> 在底部，删除相应的库项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T20:52:20.270

选择的答案对我不起作用——我的罐子没有在那个屏幕上列出。这对我有用：

从 libs/ 文件夹中删除 jar，然后选择项目，然后刷新（F5 或右键单击项目并选择“刷新”）。

# opengl - 背面剔除真的能提高性能吗？

> ID：12016385
> 
> 赞同：2
> 
> 时间：2012-08-18T06:23:28.053
> 
> 标签：opengl

我正在通过在屏幕上绘制的简单立方体测试面部剔除（理论上，在旋转过程中的任何时候都不会绘制 3 个面）。我纠正了我的顶点，使一切都面向正确的方向，然后做了`glEnable(GL_CULL_FACE)`。问题是我没有看到我得到的帧速率有任何变化（也就是说， cull_face 似乎根本没有提高性能）。

我的情况是否根本不是剔除有帮助的情况，如果是这样，剔除在哪些情况下具有明显的优势？

关于我的测试用例：我只是简单地画了一堆散布在一个大立方体中的立方体。增加立方体的数量，直到我的帧速率显着下降，这样我就可以测量性能改进。在更改顶点的处理方式时，我确实看到了改进。但我认为面部剔除没有任何变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T06:29:31.000

光栅化多边形，尤其是简单的着色器/照明，在现代 GPU 上是如此之快，以至于对于小多边形，您可能无法注意到差异。

如果您想更清楚地看到差异，请尝试使用更大的多边形或更复杂的着色器程序来增加花在着色上的时间百分比。

# javascript - 我应该如何从我的 javascript 中引用 DOM 元素？

> ID：12016388
> 
> 赞同：2
> 
> 时间：2012-08-18T06:24:19.243
> 
> 标签：javascript, html, design-patterns

我不得不承认，我一直对“正确的”不显眼的 javascript 有点困惑。我知道您想将脚本移出标记，并且没有标记引用您的脚本（当然，原始脚本引用除外！）但我看不出这在实践中是如何工作的。

我知道如何让您的标记不引用代码，但我觉得脚本中 DOM ID 中的硬编码很脏。这是一个例子：

```
<script src="....awesome.js"></script>

<button id="primaryAction">Click me for something awesome!</button>
<labal id="resultText"></label>

//in awesome.js
awesome = function(){

    init = function(){
        //pretend we are doing something incredible here
        //and then we hook the button up

        $('#primaryAction').click(function(){
            $('#resultText').val(result());
        });    
    };

    result = function(){
        //here something awesome happens and we return the result
        return "Joe";
    };

    return {
        init: init
    }

}(); 
```

那应该是可以代表的东西，对吧？所以我的困惑来自两个地方。

1.  我应该从哪里调用 awesome.init()？
2.  我觉得从 javascript 中引用控件 ID 是错误的，但在脚本中指定类并要求标记使用它们才能工作也感觉错误。应该怎么做？两者都让我觉得突兀。init() 函数是否应该采用类似`{button:'#primaryAction', result:'#resultText'}`但又回到 #1.. 应该从哪里调用 Init 的东西？

如果我从根本上做错了，请引导我走上这条路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:52:40.290

[Backbone Js](http://backbonejs.org/)是针对这个问题的 MVC 方法。

*警告：对于您当前的示例来说，这可能是矫枉过正。*

另请参阅：[什么是主干 js](https://stackoverflow.com/questions/5418369/what-is-backbone-js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T08:34:43.667

## jQuery

在您的元素上放置 id（或类）属性并在脚本中引用这些相同的元素确实是正确的 JQuery 方法，但是有一些方法可以减少硬编码，您应该使用它们。

您可以使用 jQuery 遍历获得所需的元素。这将大大减少您需要的 id 数量（理想情况下，每个功能单元只需一个）[http://learn.jquery.com/using-jquery-core/traversing/](http://learn.jquery.com/using-jquery-core/traversing/)

例如。

```
<form class="edit">
  <button>Hello</button>
  <label>Hi there</label>
</form>

$(function() {
  var $form = $('form.edit');
  var $button = $form.find('button');
  var $label = $form.find('label');
  // your code here
}); 
```

至于将 init 函数放在哪里，如果您在 HTML 的底部调用 init 就可以了。或者，如果你将它传递给 $ 它将在 onDomReady 上运行，即当 DOM 准备好呈现时，如下所示：

```
$(function() {
  init();
  // anything else you need to do
}); 
```

要不就：

```
$(init) 
```

## jQuery插件

JQuery Plugin 是一个添加到 jQuery 原型中的函数。您应该将大部分功能编写为通用 jQuery 插件。使用遍历从插件中尽可能消除硬编码的 id。

然后，您只需使用一小段特定于应用程序的接线代码将它们连接在一起。

[http://learn.jquery.com/plugins/basic-plugin-creation/](http://learn.jquery.com/plugins/basic-plugin-creation/)

```
//plugin
(function($) {
  $.fn.editForm = function() {
    $form = this;
    var $button = $form.find('button');
    var $label = $form.find('label');
  }
})(jQuery)

// app code
$(function() {
  $('form.edit').editForm()
}); 
```

## 框架解决方案

您也可以采用不同的方法并考虑使用框架。

**Angular**现在正受到广泛关注。Angular 将您的 HTML 视为代码，并实际编译它以生成最终页面。您的代码和模板之间的耦合非常紧密，这是一种完全相反的思考方式，但具有显着优势。

# python - Python：如何将函数分配给对象属性？

> ID：12016390
> 
> 赞同：1
> 
> 时间：2012-08-18T06:24:40.257
> 
> 标签：python, python-2.7, function, dictionary-missing

基本上，这始于我在尝试查找字典中是否存在索引时遇到的问题：

```
if collection[ key ]: # if exist
    #do this
else: # if no exist
    #do this 
```

但是当索引真的不存在时，它会给我一个 KeyError。因此，阅读 Python 文档。如果**缺少**() 被定义，它不会抛出*KeyError*。

```
collection = {}
def collection.__missing__():
    return false 
```

终端上的上述代码给了我：

```
ghelo@ghelo-Ubuntu:~/Music$ python __arrange__.py
  File "__arrange__.py", line 16
    def allArts.__missing__():
               ^
SyntaxError: invalid syntax 
```

那么，如何正确地做到这一点呢？顺便说一句，我将需要在此使用 Python 2.7。在 Python 3 上运行时有区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T06:27:26.510

这就是你的做法：

```
if key in collection: 
```

或者，正如@sdolan 所建议的那样，您可以使用该`.get`方法，如果它不存在，它将返回一个默认值（可选的第二个参数）。

```
if collection.get(key, None): 
```

如果你想使用`__missing__`它，你可以将它应用到一个扩展 dict 的类（在这种情况下）：

```
class collection(dict):

    def __missing__(self, key):
        print "Too bad, {key} does not exist".format(key=key)
        return None

d = collection()
d[1] = 'one'

print d[1]

if d[2]:
    print "Found it" 
```

**输出**

```
one
Too bad, 2 does not exist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:37:28.970

几个答案已经显示了您在真实情况下可能应该做的事情，但是**缺少**也可以做您所询问的事情。

如果你想使用它，你需要继承 dict。

```
class mydict(dict):
  def __missing__(self, key):
    return 'go fish' 
```

然后你可以创建一个：

```
d = mydict() 
```

并使用

```
d[0]
=> 'go fish'
d[0] = 1
d[0]
=> 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:29:08.110

您可以通过使用 try..except 处理 KeyError 异常来检查 key 是否存在，如下所示。

```
try:
    collection[key]
    # do this
except KeyError:
    # do that 
```

这种编码风格被称为`EAFP`“请求宽恕比请求许可更容易” [http://docs.python.org/glossary.html#term-eafp](http://docs.python.org/glossary.html#term-eafp)

另一种方法是使用`get`如果找不到密钥，默认返回 None的方法

```
if collection.get(key) is not None:
    # do this
else:
    # do that 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:23:21.937

您可以使用 if selection.has_key(keylookingfor)。

# java - 用Java设计一个计算器

> ID：12016391
> 
> 赞同：2
> 
> 时间：2012-08-18T06:24:57.533
> 
> 标签：java, user-interface, calculator

我是 Java 新手，我发现这里很难实现与 Visual Basic 不同的 GUI。

```
import javax.swing.*;
import java.awt.*;

public class CalculatorGui extends JFrame{
    private static final int WIDTH = 250;
    private static final int HEIGHT = 250;

    private JTextField enterTextField;

    private JButton sevenB, eightB, nineB, divideB, fourB, fiveB, sixB, multiplyB, oneB, twoB, threeB, subtractB, zeroB, dotB, equalsB, addB;

    public CalculatorGui() {
        setTitle("Calculator");
        setSize(WIDTH, HEIGHT);

        setLayout(new GridLayout(4, 4));

        enterTextField = new JTextField(30);

        sevenB = new JButton("7");
        eightB = new JButton("8");
        nineB = new JButton("9");
        divideB = new JButton("/");
        fourB = new JButton("4");
        fiveB = new JButton("5");
        sixB = new JButton("6");
        multiplyB = new JButton("*");
        oneB = new JButton("1");
        twoB = new JButton("2");
        threeB = new JButton("3");
        subtractB = new JButton("-");
        zeroB = new JButton("0");
        dotB = new JButton(".");
        equalsB = new JButton("=");
        addB = new JButton("+");

        /*JPanel dataPanel = new JPanel();
        JPanel buttonPanel = new JPanel();

        FlowLayout flowCenter = new FlowLayout(FlowLayout.RIGHT);
        GridLayout aGrid = new GridLayout(4, 4);

        buttonPanel.setLayout(flowCenter);
        dataPanel.setLayout(aGrid);

        dataPanel.add(enterTextField);
        buttonPanel.add(sevenB);
        buttonPanel.add(eightB);
        buttonPanel.add(nineB);
        buttonPanel.add(divideB);
        buttonPanel.add(fourB);
        buttonPanel.add(fiveB);
        buttonPanel.add(sixB);
        buttonPanel.add(multiplyB);
        buttonPanel.add(oneB);
        buttonPanel.add(twoB);
        buttonPanel.add(threeB);
        buttonPanel.add(subtractB);
        buttonPanel.add(zeroB);
        buttonPanel.add(dotB);
        buttonPanel.add(equalsB);
        buttonPanel.add(addB);

        add(dataPanel, BorderLayout.NORTH);
        add(buttonPanel, BorderLayout.CENTER);*/

        //add(enterTextField);
        add(sevenB);
        add(eightB);
        add(nineB);
        add(divideB);
        add(fourB);
        add(fiveB);
        add(sixB);
        add(multiplyB);
        add(oneB);
        add(twoB);
        add(threeB);
        add(subtractB);
        add(zeroB);
        add(dotB);
        add(equalsB);
        add(addB);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);

    }

    public static void main(String[] args) {

        CalculatorGui calcu = new CalculatorGui();

    }

} 
```

它运行，但我需要在这些按钮（数字）**之前放置一个文本字段。**当窗口最大化时，文本字段应该**流动**并且不会被放大（与 4x4 按钮不同）。我试过**JPanel**（见评论），但它输出的设计很糟糕。磷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:43:18.497

[在这里，在构建 GUI（规则](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi/7229519#7229519)）时要遵循一些规则：
**不要为应用程序需要子类化 AWT/Swing/X 组件**

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class CalculatorGui {

    private static final int WIDTH = 250;
    private static final int HEIGHT = 250;
    private JTextField enterTextField;
    private JButton sevenB, eightB, nineB, divideB, fourB, fiveB, sixB, multiplyB, oneB, twoB, threeB, subtractB, zeroB, dotB, equalsB, addB;

    public CalculatorGui() {
        JFrame frame = new JFrame("Calculator");
        frame.setTitle("Calculator");
        frame.setSize(WIDTH, HEIGHT);

        JPanel buttonPanel = new JPanel(new GridLayout(4, 4));        
        enterTextField = new JTextField();       

        frame.add(enterTextField, BorderLayout.NORTH);

        sevenB = new JButton("7");
        eightB = new JButton("8");
        nineB = new JButton("9");
        divideB = new JButton("/");
        fourB = new JButton("4");
        fiveB = new JButton("5");
        sixB = new JButton("6");
        multiplyB = new JButton("*");
        oneB = new JButton("1");
        twoB = new JButton("2");
        threeB = new JButton("3");
        subtractB = new JButton("-");
        zeroB = new JButton("0");
        dotB = new JButton(".");
        equalsB = new JButton("=");
        addB = new JButton("+");

        buttonPanel.add(sevenB);
        buttonPanel.add(eightB);
        buttonPanel.add(nineB);
        buttonPanel.add(divideB);
        buttonPanel.add(fourB);
        buttonPanel.add(fiveB);
        buttonPanel.add(sixB);
        buttonPanel.add(multiplyB);
        buttonPanel.add(oneB);
        buttonPanel.add(twoB);
        buttonPanel.add(threeB);
        buttonPanel.add(subtractB);
        buttonPanel.add(zeroB);
        buttonPanel.add(dotB);
        buttonPanel.add(equalsB);
        buttonPanel.add(addB);

        frame.add(buttonPanel, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        CalculatorGui calcu = new CalculatorGui();
    }
} 
```

我建议您在经过良好的手动练习后使用[WindowsBuilder Pro](https://developers.google.com/java-dev-tools/wbpro/)`layouts``components`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:04:43.337

我是新手，但我有一个使用 AWT 设计计算器的代码。它只是一个示例。

```
    导入 java.awt.*；
    公共类计算器扩展框架
    {
    公共计算器（字符串 s）
    {
        String buttonString = "789/456*123-0.=+";
        for (int i = 0, x=0,y=50; i

 Button b = new Button(buttonString.substring(i, i + 1));
              b.setBounds(x, y, 50, 50);
              add(b);
              if((i+1)%4==0)
              {
                  x=0;
                  y+=50;
              }
              else
              {
                  x=x+50;
              }
    }
    TextField txtField=new TextField("0");
    txtField.setBounds(0,0, 200, 30);
    add(txtField);
    setSize(200,255);
    setVisible(true);
}
public static void main(String[] args) 
{
    new Calculator("Calculator");
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:30:10.013

如果您来自 Visual Basic，您将养成拖放的习惯，那么当您也可以在 Java 中这样做时，为什么还要离开它。

使用现在从 Google 免费提供的 WindowsBuilder Pro，并使用 Group Layout 来设计您的应用程序。组布局是由 NetBeans 团队早在 2005 年开发的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T12:52:27.220

## 自定义计算器

GUI是框架定制...

```
public class Calculator implements ActionListener
{

final static Point point = new Point();
JFrame frame;
JButton one,two,three,four,five,six,seven,eight,nine,zone,cancel,clear,cancel1,sub,add,equal,dot,mult,div,adsub,baket,up;
JPanel top,top1,top2,down,down1,down2,history;
JLabel name,images;
//JTextField text1,text2;
ImageIcon up1,up2;
JTextPane text1;
JScrollPane pane;
ScriptEngine engine;
Border em;
boolean endwith1;
int numbcount=1,opercount=1,numbcount1=1;
boolean operaffer=true;
int lensold;
boolean baketsub=true;
boolean dotcheck=false;
boolean baketcheck=true;
int baketcount=0;
int baketcount1=1;
boolean check;
boolean check1;
SimpleAttributeSet attrib;

public Calculator()
{
    frame = new JFrame();

    engine = new ScriptEngineManager().getEngineByExtension("js");

    name = new JLabel(" Calculator");
    name.setForeground(Color.WHITE);
    name.setFont(new FontUIResource("Franklin Gothic Medium", Font.PLAIN, 18));

    one = new JButton("1");
    one.addActionListener(this);
    one.setFocusPainted(false);
    one.setBackground(Color.WHITE);
    one.setForeground(Color.BLACK);
    one.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    one.setFont(new FontUIResource("OCR-B 10 BT", Font.PLAIN, 25));

    two = new JButton("2");
    two.addActionListener(this);
    two.setFocusPainted(false);
    two.setBackground(Color.WHITE);
    two.setForeground(Color.BLACK);
    two.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    two.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    three = new JButton("3");
    three.addActionListener(this);
    three.setFocusPainted(false);
    three.setBackground(Color.WHITE);
    three.setForeground(Color.BLACK);
    three.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    three.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    four = new JButton("4");
    four.addActionListener(this);
    four.setFocusPainted(false);
    four.setBackground(Color.WHITE);
    four.setForeground(Color.BLACK);
    four.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    four.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    five = new JButton("5");
    five.addActionListener(this);
    five.setFocusPainted(false);
    five.setBackground(Color.WHITE);
    five.setForeground(Color.BLACK);
    five.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    five.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    six = new JButton("6");
    six.addActionListener(this);
    six.setFocusPainted(false);
    six.setBackground(Color.WHITE);
    six.setForeground(Color.BLACK);
    six.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    six.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    seven = new JButton("7");
    seven.addActionListener(this);
    seven.setFocusPainted(false);
    seven.setBackground(Color.WHITE);
    seven.setForeground(Color.BLACK);
    seven.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    seven.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    eight = new JButton("8");
    eight.addActionListener(this);
    eight.setFocusPainted(false);
    eight.setBackground(Color.WHITE);
    eight.setForeground(Color.BLACK);
    eight.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    eight.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    nine = new JButton("9");
    nine.addActionListener(this);
    nine.setFocusPainted(false);
    nine.setBackground(Color.WHITE);
    nine.setForeground(Color.BLACK);
    nine.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    nine.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    zone = new JButton("0");
    zone.addActionListener(this);
    zone.setFocusPainted(false);
    zone.setBackground(Color.WHITE);
    zone.setForeground(Color.BLACK);
    zone.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    zone.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    cancel = new JButton("x");
    cancel.addActionListener(this);
    cancel.setFocusPainted(false);
    cancel.setBackground(new Color(48, 174, 184));
    cancel.setForeground(Color.WHITE);
    cancel.setBorder(new EmptyBorder(6,6,6,6));
    cancel.setFont(new Font("OCR-A BT", Font.PLAIN, 25));

    cancel1 = new JButton("X");
    cancel1.addActionListener(this);
    cancel1.setFocusPainted(false);
    cancel1.setBackground(new Color(250, 250, 250));
    cancel1.setForeground(new Color(255, 0, 0));
    cancel1.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    cancel1.setFont(new Font("OCR-A BT", Font.BOLD, 25));

    clear = new JButton("C");
    clear.addActionListener(this);
    clear.setFocusPainted(false);
    clear.setBackground(new Color(250, 250, 250));
    clear.setForeground(new Color(49, 166, 216));
    clear.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    clear.setFont(new Font("OCR-B 10 BT", Font.BOLD,35));

    sub = new JButton("-");
    sub.addActionListener(this);
    sub.setFocusPainted(false);
    sub.setBackground(new Color(250, 250, 250));
    sub.setForeground(new Color(49, 166, 216));
    sub.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    sub.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 35));

    add = new JButton("+");
    add.addActionListener(this);
    add.setFocusPainted(false);
    add.setBackground(new Color(250, 250, 250));
    add.setForeground(new Color(49, 166, 216));
    add.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    add.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 35));

    mult = new JButton("*");
    mult.addActionListener(this);
    mult.setFocusPainted(false);
    mult.setBackground(new Color(250, 250, 250));
    mult.setForeground(new Color(49, 166, 216));
    mult.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    mult.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 35));

    div = new JButton("/");
    div.addActionListener(this);
    div.setFocusPainted(false);
    div.setBackground(new Color(250, 250, 250));
    div.setForeground(new Color(49, 166, 216));
    div.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    div.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 30));

    equal = new JButton("=");
    equal.addActionListener(this);
    equal.setFocusPainted(false);
    equal.setBackground(new Color(250, 250, 250));
    equal.setForeground(new Color(0, 153, 0));
    equal.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    equal.setFont(new Font("OCR-B 10 BT", Font.BOLD, 35));

    dot = new JButton(".");
    dot.addActionListener(this);
    dot.setFocusPainted(false);
    dot.setBackground(Color.WHITE);
    dot.setForeground(Color.BLACK);
    dot.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    dot.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    adsub = new JButton("+/-");
    adsub.addActionListener(this);
    adsub.setFocusPainted(false);
    adsub.setBackground(Color.WHITE);
    adsub.setForeground(Color.BLACK);
    adsub.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    adsub.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    baket = new JButton("()");
    baket.addActionListener(this);
    baket.setFocusPainted(false);
    baket.setBackground(new Color(250, 250, 250));
    baket.setForeground(new Color(49, 166, 216));
    baket.setBorder(BorderFactory.createLineBorder(new Color(240, 240, 240),1));
    baket.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 25));

    //text1 = new JTextField();
    //text1.setColumns(10);
    //text1.setFont(new Font("OCR-B 10 BT",Font.PLAIN, 35));
    //text1.setBorder(new EmptyBorder(4, 7, 4, 7));
    //text1.setHorizontalAlignment(SwingConstants.TRAILING);
    //text1.setCaretColor(new Color(49, 166, 216));

    attrib  = new SimpleAttributeSet();
    StyleConstants.setAlignment(attrib, StyleConstants.ALIGN_RIGHT);
    StyleConstants.setFontSize(attrib, 30);
    text1 = new JTextPane();
    text1.setEditorKit(new WrapEditorKit());
    text1.setParagraphAttributes(attrib, true);
    text1.setBorder(new EmptyBorder(4, 7, 4, 7));
    text1.setCaretColor(new Color(49, 166, 216));
    text1.setPreferredSize(new Dimension(270, 130));
    JScrollPane scrollpane = new JScrollPane(text1);
    scrollpane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
    scrollpane.getVerticalScrollBar().setPreferredSize(new Dimension(5, 5));
    scrollpane.getVerticalScrollBar().setUI(new ScrollLookandFeel());
    em = BorderFactory.createEmptyBorder(0, 0, 0, 0);
    scrollpane.setBorder(em);
    UIManager.put("ScrollBarUI", "My.package.ScrollLookandFeel");

    //text2 = new JTextField();z
    //text2.setFont(new Font("OCR-B 10 BT",Font.PLAIN, 35));
    // text2.setBorder(new EmptyBorder(4, 7, 4, 7));
    // text2.setHorizontalAlignment(SwingConstants.RIGHT);
    // text2.setForeground(new Color(0, 153, 0));
    // text2.setCaretColor(new Color(49, 166, 216));

    up2 = new ImageIcon(CreateImage("/project/1467651440_calculator.png").getImage().getScaledInstance(20, 20, Image.SCALE_SMOOTH));
    images = new JLabel(up2);
    images.setBorder(BorderFactory.createLineBorder(new Color(48, 174, 184),4));

    top = new JPanel();
    top1 = new JPanel();
    top1.setSize(200,400);
    top1.setBackground(new Color(48, 174, 184));
    top1.setLayout(new BorderLayout());
    top1.add(images,BorderLayout.WEST);
    top1.add(name,BorderLayout.CENTER);
    top1.add(cancel,BorderLayout.EAST);

    top2 = new JPanel();
    top2.setLayout(new BorderLayout());
    top2.add(scrollpane,BorderLayout.NORTH);
   //top2.add(text2,BorderLayout.CENTER);

    top.setLayout(new BorderLayout());
    top.add(top1,BorderLayout.NORTH);
    top.add(top2,BorderLayout.CENTER);

    down = new JPanel();
    down.setLayout(new BorderLayout());

    up1 = new ImageIcon(CreateImage("/project/1467658414_arrow-down-01_1.png").getImage().getScaledInstance(15, 15, Image.SCALE_SMOOTH));

    up = new JButton();
    up.setIcon(up1);
    up.setFocusPainted(false);
    up.setBackground(new Color(240, 240, 240));
    up.setForeground(Color.BLACK);
    up.setBorder(BorderFactory.createLineBorder(new Color(187, 197, 201),0));
    up.setFont(new Font("OCR-B 10 BT", Font.PLAIN, 15));

    down1 = new JPanel();
    down1.setLayout(new BorderLayout());
    down1.add(up);

    down2 = new JPanel();
    down2.setBackground(new Color(240, 240, 240));
    down2.setLayout(new GridLayout(5, 4));
    down2.add(clear);
    down2.add(div);
    down2.add(mult);
    down2.add(cancel1);
    down2.add(seven);
    down2.add(eight);
    down2.add(nine);
    down2.add(sub);
    down2.add(four);
    down2.add(five);
    down2.add(six);
    down2.add(add);
    down2.add(one);
    down2.add(two);
    down2.add(three);
    down2.add(baket);
    down2.add(zone);
    down2.add(dot);
    down2.add(adsub);
    down2.add(equal);

    down.add(down1,BorderLayout.NORTH);
    down.add(down2,BorderLayout.CENTER);

    frame.add(top,BorderLayout.NORTH);
    frame.add(down,BorderLayout.CENTER);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setSize(270,450);
    frame.setUndecorated(true);
    frame.setIconImage(CreateImage("/project/1467651440_calculator.png").getImage().getScaledInstance(60, 60, Image.SCALE_SMOOTH));
    frame.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent e)
        {
            point.x = e.getX();
            point.y = e.getY();
        }
    });

    frame.addMouseMotionListener(new MouseMotionAdapter() {
        @Override
        public void mouseDragged(MouseEvent e)
        {
            Point p = frame.getLocation();
            frame.setLocation(p.x+e.getX()-point.x,p.y+e.getY()-point.y);
        }

    });
    frame.setVisible(true);
}

private ImageIcon CreateImage(String path)
{
    return new ImageIcon(java.awt.Toolkit.getDefaultToolkit().getClass().getResource(path));
}

@Override
public void actionPerformed(ActionEvent e) {

    switch(e.getActionCommand())
    {
        case "1":
            numberAction("1");
            break;
        case "2":
            numberAction("2");
            break;
        case "3":
            numberAction("3");
            break;
        case "4":
            numberAction("4");
            break;
        case "5":
            numberAction("5");
            break;
        case "6":
            numberAction("6");
            break;    
        case "7":
            numberAction("7");
            break;    
        case "8":
            numberAction("8");
            break;    
        case "9":
            numberAction("9");
            break;
        case "0":
            numberAction("0");
            break;
        case ".":
            dots(".");
            break;
        case "+":
            digitalAction("+");
            break;
        case "-":
            digitalAction("-");
            break; 
        case "*":
            digitalAction("*");
            break; 
        case "/":
            digitalAction("/");
            break;     
        case "=":
              total();
            break;    
        case "C":
              clear(); 
            break;
        case "X":
              cancel1(); 
            break;
        case "()":
            Baket();
            break;
        case "+/-":
            baketsub();
            break;
    }

    if(e.getSource()==cancel)
    {        
        frame.setVisible(false);
        frame.dispose();
    }
}

private void clear() 
{
   numbcount=1;
   opercount=1;
   numbcount1=1;
   baketcount=0;
   baketcount1=1;
   baketcheck=true;
   baketsub=true;
   operaffer=true;
   text1.setText("");
}

private void digitalAction(String operation) 
{
    if(!text1.getText().equals(""))
    {    
        String txt1 = text1.getText();
        endwith1 = txt1.endsWith(operation);
        System.out.println("text "+endwith1);

        int len = txt1.length();
        String subs = txt1.substring(len-1);
        System.out.println(subs);

        if(endwith1==true)
        {

        }else
        {
            if(!subs.equals("+") && !subs.equals("-") && !subs.equals("/") && !subs.equals("*"))
            {    
                if(opercount<=5)
                {   
                    text1.setText(text1.getText()+operation);
                    opercount++;
                }

                String txt10  = text1.getText();
                boolean add1 = txt10.endsWith("+");
                boolean sub1 = txt10.endsWith("-");
                boolean mult1 = txt10.endsWith("*");
                boolean div1 = txt10.endsWith("/");

                if(true==add1 ||true==sub1 ||true==mult1 || true==div1 )
                {
                    operaffer=false;
                    numbcount1=1;
                }

            }else
            {
                String hide=text1.getText();
                text1.setText("");
                for(int J=0;J<hide.length()-1;J++)
                {    
                    text1.setText(text1.getText()+hide.charAt(J));
                }

                text1.setText(text1.getText()+operation);
            }    
        }
    }else
    {
        text1.setText("");
    }  
    baketcheck=true;
}

private void numberAction(String buttonNumber)
{    
    if(true==operaffer)
    {    
        String txt2 = text1.getText();
        boolean endwith2 = txt2.endsWith(")");

        if(true!=endwith2)
        {    
            if(!text1.getText().equals("0"))
            {  
                if(numbcount<=5)
                {   
                    text1.setText(text1.getText()+buttonNumber);
                    numbcount++;
                }
                dotcheck=true;
                baketsub=false;

                String txt3 = text1.getText();
                lensold = txt3.length();
                System.out.println("len"+lensold);
                check = txt3.contains(".");
                System.out.println(check); 
            }else
            {
                String hide=text1.getText();
                text1.setText("");
                for(int J=0;J<hide.length()-1;J++)
                {    
                    text1.setText(text1.getText()+hide.charAt(J));
                }
                text1.setText(text1.getText()+buttonNumber);
            }
        }
    }else
    {
        String txt4 = text1.getText();
        int len = txt4.length();
        String ss = txt4.substring(len-2);
        System.out.println("ss "+ss);

        if(ss.equals("+0") || ss.equals("-0") || ss.equals("*0") || ss.equals("/0"))
        {
            String hide=text1.getText();
            text1.setText("");
            for(int J=0;J<hide.length()-1;J++)
            {    
                text1.setText(text1.getText()+hide.charAt(J));
            }
            text1.setText(text1.getText()+buttonNumber);
        }
        else
        {
            String txt5 = text1.getText();
            boolean endwith3 = txt5.endsWith(")");

            if(true!=endwith3)
            { 
                if(numbcount1<=5)
                {   
                    text1.setText(text1.getText()+buttonNumber);
                    numbcount1++;
                }
                dotcheck=true;
                baketsub=false;

                String txt6 = text1.getText();
                int le = txt6.length();
                int subt = le-numbcount1;
                String subs1 = txt6.substring(subt);
                System.out.println("tt"+subt);
                System.out.println("tt"+subs1);
                check1 = subs1.contains(".");
                System.out.println("tt"+check1);    
                check=false;
            }
        }
    }
    baketcheck=false;  

    String txt = text1.getText();
    int ff = txt.length();
    System.out.print("ffss"+ff);
    if(ff>=14)
    {
    StyleConstants.setFontSize(attrib, 25);
    text1.setParagraphAttributes(attrib, true);
        if(ff>=25)
        {
            StyleConstants.setFontSize(attrib, 20);
            text1.setParagraphAttributes(attrib, true);
        }
    }
}

private void dots(String dot) 
{   
    String txt7 = text1.getText();
    boolean endwith4 = txt7.endsWith(dot);

    if(true == dotcheck)
    {
        if(check==false && check1==false)
        {
            if(false==endwith4)
            {
                text1.setText(text1.getText()+dot);
            }
        }
    } 
} 

public  void total()
{
    try
    {    
        Object result = engine.eval(text1.getText());

        if(result==null)
        {
            text1.setText("Wrong null");
        }else
        {
            text1.setText("\n ="+result.toString()); 
        }
    }
    catch(ScriptException es)
    {
        text1.setText("Wrong format");
    }
} 

private void cancel1() {

    if(!text1.getText().equals(""))   
    {
        String txt8  = text1.getText();
        boolean endwith5 = txt8.endsWith("(");
        if(true==endwith5)
        {
            String hide=text1.getText();
            text1.setText("");
            for(int J=0;J<hide.length()-1;J++)
            {
                text1.setText(text1.getText()+hide.charAt(J));
            }
            baketcount--; 
            baketcount1=1;

            baketsub=true;
        }else
        {
            String txt9 = text1.getText();
            int length = txt9.length();
            String subs2 = txt9.substring(length-1);
            System.out.println(subs2);
            if(subs2.equals("+") || subs2.equals("-") ||subs2.equals("/")  || subs2.equals("-") )
            {
                String hide=text1.getText();
                text1.setText("");
                for(int J=0;J<hide.length()-1;J++)
                {
                    text1.setText(text1.getText()+hide.charAt(J));
                }
                opercount--;
            }else
            {
                if(length<=lensold)
                {    
                    String hide=text1.getText();
                    text1.setText("");
                    for(int J=0;J<hide.length()-1;J++)
                    {
                        text1.setText(text1.getText()+hide.charAt(J));
                    }
                    numbcount--; 
                    operaffer=true;
                    baketsub=true;
                    baketcheck=true;
                }else
                {
                    String hide=text1.getText();
                    text1.setText("");
                    for(int J=0;J<hide.length()-1;J++)
                    {
                        text1.setText(text1.getText()+hide.charAt(J));
                    }
                    numbcount1--;
                }    
            }
        }

        String txt = text1.getText();
        int ff = txt.length();
        System.out.print("ffss"+ff);
        if(ff<=14)
        {
            StyleConstants.setFontSize(attrib, 30);
            text1.setParagraphAttributes(attrib, true);
        }
    }      
}

private void Baket() 
{
    if(baketcheck==true)
    {
        text1.setText(text1.getText()+"(");
        baketcount++;
    }else
    {
        if(baketcount1<=baketcount)
        {    
            text1.setText(text1.getText()+")");
            baketcount1++;
        }else
        {
            text1.setText(text1.getText()+"*");
            baketcheck=true;
            operaffer=false;
            numbcount1=1;
            opercount++;
        }
    }    
    System.out.print(baketcount);
}

private void baketsub() 
{
    if(text1.getText().equals(""))
    {
        if(baketsub==true)
        {
        text1.setText(text1.getText()+"(-");
        }
        baketcheck=false;
        baketcount++;
        opercount++;
    }
}

private static class ScrollLookandFeel  extends BasicScrollBarUI {

     private ScrollLookandFeel() {

    }

    @Override
    protected void configureScrollBarColors() {

        thumbColor = Color.LIGHT_GRAY;
        thumbDarkShadowColor = Color.LIGHT_GRAY;
        thumbHighlightColor = Color.LIGHT_GRAY;
        thumbLightShadowColor = Color.lightGray;

        trackColor = new Color(245, 245, 245);
        trackHighlightColor = new Color(245, 245, 245);
    }

    @Override
    protected JButton createDecreaseButton(int orientation) {
        JButton button = new BasicArrowButton(orientation);
        button.setBackground(new Color(245, 245, 245));
        button.setForeground(new Color(245, 245, 245));
        button.setBorder(new EmptyBorder(10, 10, 10, 10));
        return button;
    }

    @Override
    protected JButton createIncreaseButton(int orientation) {
        JButton button = new BasicArrowButton(orientation);
        button.setBackground(new Color(245, 245, 245));
        button.setForeground(new Color(245, 245, 245));
        button.setBorder(new EmptyBorder(10, 10, 10, 10));
        return button;
    }
}

class WrapEditorKit extends StyledEditorKit
{
   final ViewFactory defaults = new WrapColumnFactory();

    @Override
    public ViewFactory getViewFactory()
    {
        return defaults;
    }
}

class WrapColumnFactory implements ViewFactory
{
    @Override
    public View create(Element elem) {
       String ki = elem.getName();
       if(ki!=null)
       {
           switch (ki) {
               case AbstractDocument.ContentElementName:
                   return new WrapLabelView(elem);
               case AbstractDocument.ParagraphElementName:
                   return new ParagraphView(elem);
               case AbstractDocument.SectionElementName:
                   return new BoxView(elem, View.Y_AXIS);
               case StyleConstants.ComponentElementName:
                   return new ComponentView(elem);
               case StyleConstants.IconElementName:
                   return new IconView(elem);
           }
       }
        return new LabelView(elem);
    }  
}

class WrapLabelView extends LabelView
{
    public WrapLabelView(Element elem) 
    {
       super(elem);
    }

    @Override
    public float getMinimumSpan(int axis)
    {
        switch (axis)
        {
            case View.X_AXIS:
                return 0;
            case View.Y_AXIS:
                return super.getMinimumSpan(axis);
            default:
                throw new IllegalArgumentException("Invalid axis"+axis);
        }
    }
}

public static void main(String []args)
{
    Calculator c = new Calculator();
}  
} 
```

# java - GWT- DateBox.getTextBox().addValueChangeHandler() 在 IE 中不触发事件

> ID：12016395
> 
> 赞同：0
> 
> 时间：2012-08-18T06:26:17.067
> 
> 标签：java, gwt, textbox, internet-explorer-9, datebox

我尝试使用 DateBox 并将 valueChangeHandler 添加到 DateBox.getTextBox()。它在 FF、Chrome 中运行良好，但在 IE9 中运行良好。即使文本框中的值发生更改，也不会触发该事件。

我尝试在 IE9 中使用 TextBox.addValueChangeHandler()，它按预期工作。所以问题是我如何使 DateBox.getTextBox().addValueChangeHandler() 在 IE9 中工作。

任何人都可以确认这个错误吗？以及解决它的任何想法？

要测试的一小段代码：

```
 DateBox dateBox = new DateBox();
 RootLayoutPanel.get().add(dateBox);
 dateBox.getTextBox().addValueChangeHandler(new ValueChangeHandler<String>() {
   @Override
   public void onValueChange(ValueChangeEvent<String> event) {
      Window.alert("event fire"); 
  }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T21:23:24.687

这是一个已知的错误，它将在 GWT 2.6 中修复。

同时，您可以使用此解决方法：

```
dateBox.addValueChangeHandler(new ValueChangeHandler<Date>() {
    Date lastDate = null;
    @Override
    public void onValueChange(ValueChangeEvent<Date> arg0) {
    Date newDate = dateBox.getValue();
    newDate.setHours(0);
    newDate.setMinutes(0);
    newDate.setSeconds(0);

    if (!newDate.equals(lastDate))
    {
        lastDate = newDate;
        doSomething();
    }
}}); 
```

[https://code.google.com/p/google-web-toolkit/issues/detail?id=4785](https://code.google.com/p/google-web-toolkit/issues/detail?id=4785)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:07:31.580

尝试这个 ：

```
 transactionDate.addValueChangeHandler(new ValueChangeHandler<Date>() {
    public void onValueChange(ValueChangeEvent<Date> event) {
        Window.alert(transactionDate.getValue().toString());
    }
}); 
```

# cocos2d-iphone - 如何为box2d body连续移动创建移动按钮

> ID：12016397
> 
> 赞同：0
> 
> 时间：2012-08-18T06:26:27.783
> 
> 标签：cocos2d-iphone, box2d-iphone

我对 Box2D sprite body 的移动有疑问。问题是当我按下左键时，我的精灵向左移动，当我松开按钮时，我的精灵会停止。

我知道移动的逻辑，但不知道如何创建用于连续移动的左键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:22:49.227

当您按下按钮时，将一些布尔变量设置为 true，然后在 update/tick 方法中执行以下操作：

```
If(boolVariable == true) {

  sprite.position = ccp(sprite.position.x - 0.5 , sprite.position.y);

} 
```

这应该将您的精灵继续向左移动。

# asp.net-mvc-3 - ViewBag 在视图中不显示消息

> ID：12016400
> 
> 赞同：1
> 
> 时间：2012-08-18T06:26:53.760
> 
> 标签：asp.net-mvc-3, viewbag

我在一个视图中创建了 2 个 div。在我使用局部视图的内部显示内容并显示我正在使用 Viewbag 的错误并将其显示如下：

```
 <div id="tabs">
<ul>
    <li><a href="#tabs-1">Publish Exhibition</a></li>
    <li><a href="#tabs-2">Edit Existing Exhibition</a></li>
</ul>
<div id="tabs-1"  style=" width:900px; height:400px;">
<font color="red">@ViewBag.msg1</font>
    @{Html.RenderPartial("PubExhi", Model);}
</div>
<div id="tabs-2">
    @{Html.RenderPartial("EditExhi");}
</div>
</div> 
```

我称这种观点为

```
 ViewBag.msg1 = "record not updated!!!!";
   modelList = setIndex();
                                return View("Index", modelList); 
```

evry 一切正常，除了 viewbag 没有显示任何 msgs

当我调试它时，我可以看到 viewbag 包含适当的值，但它没有显示在页面上

我也尝试从局部视图中显示它，但没有收到任何消息

有谁能够帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:33:56.663

用于`@Html.Raw(ViewBag.msg1)`显示......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:19:05.263

它应该可以工作，我尝试了完全相同的事情，它对我有用-

```
 <div id="tabs">
    <ul>
        <li><a href="#HWTab">Tab 1</a></li>
        <li><a href="#AdminTab">Tab 2</a></li>
    </ul>
    <div id="HWTab">
    <font color="red">@ViewBag.msg</font>
        @{Html.RenderPartial("_HardwareAssetView", Model.hardwareAssetVM);}
    </div>
    <div id="AdminTab">
        @{Html.RenderPartial("_AdminAssetView", Model.adminAssetVM);}
    </div> 
```

![在此处输入图像描述](../Images/b885d56dae097a7e00ecefbd0c756c98.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T17:35:24.060

您需要将它分配给您在服务器方法中发送的视图：假设我的视图结果是详细信息，但您正在发送视图 DetailingList，那么您需要为此视图的视图包分配您想要的消息：

```
 var partialViewRes = new PartialViewResult();
 partialViewRes.ViewName = "DetailingList";
 partialViewRes.ViewData.Model = list;
 partialViewRes.ViewBag.ErrorMessage = "Error on loading"; 
```

希望这可以帮助某人。

# php - 良好的 PHP 和 HTML 编码实践

> ID：12016405
> 
> 赞同：4
> 
> 时间：2012-08-18T06:27:39.547
> 
> 标签：php, html

出于好奇，我只想问一个好的编码实践。下面的代码具有相同的输出，但有不同的编码实践。

那么，哪个更好？

这个：

```
<?php foreach ($cart as $item): ?>
  <tr>
    <td><?php echo $item['name']; ?></td>
    <td><?php echo $item['checkin']; ?></td>
    <td><?php echo $item['checkout']; ?></td>
  </tr>
<?php endforeach; ?> 
```

或者这个：

```
<?php 
    foreach ($cart as $item):
      echo "<tr>";
        echo "<td>$item['name']</td>";
        echo "<td>$item['checkin']</td>";
        echo "<td>$item['checkout']</td>";
      echo "</tr>";
    endforeach; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:33:06.133

这两种方法都是 PHP 中的正确语法。两者都不会比另一个有优势 - 这完全取决于你喜欢什么。我认为第一个看起来更干净，更清晰，但这真的是你的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:33:44.017

第一个似乎更好......考虑需要添加一些自定义行或列的情况......

此外，保留单个标签还允许您进行自定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T06:35:00.787

这取决于您使用的脚本的位置和类型。在这两个示例中，我将选择第一个。因为如果您仔细阅读代码，您可以看到那里保留了适当的带有空格的缩进。它有助于调试代码。如果您询问 HTML 代码，那么首先要做的是检查代码是否有效。因为代码验证使调试变得容易。这里有一些链接，请浏览它们。希望你能得到一些让你的代码更好的链接

[PHP 编码风格 - 最佳实践](https://stackoverflow.com/questions/3350560/php-coding-style-best-practices)

[http://net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/](http://net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/)

[http://www.ibm.com/developerworks/opensource/library/os-php-5goodhabits/index.html](http://www.ibm.com/developerworks/opensource/library/os-php-5goodhabits/index.html)

[http://framework.zend.com/manual/en/coding-standard.coding-style.html](http://framework.zend.com/manual/en/coding-standard.coding-style.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T06:35:08.830

我会说第一个更好，因为在调试代码或查看页面源代码时，它将保持制表符/空格。它还使您的页面结构与服务器端代码分开，因此在我看来更简洁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T06:50:40.013

PHP 语言起源于模板语言。它仍然有这个方面，你应该学会使用它。

您可能会发现[**这篇文章**](http://codeangel.org/articles/simple-php-template-engine.html)非常有用（我认为我不同意使用魔术方法）。它将解释如何将业务逻辑与 HTML 片段分离的简单方法。

# haskell - Haskell IO：无法将预期类型“IO a0”与实际类型匹配

> ID：12016407
> 
> 赞同：6
> 
> 时间：2012-08-18T06:27:48.593
> 
> 标签：haskell

我是 Haskell 的新手，我尝试了解如何正确执行 IO。

以下工作正常：

```
main = do
  action <- cmdParser
  putStrLn "Username to add to the password manager:"
  username <- getLine
  case action of
    Add -> persist entry
      where
        entry = Entry username "somepassword" 
```

而以下导致编译错误：

```
main = do
  action <- cmdParser
  case action of
    Add -> persist entry
      where
        entry = Entry promptUsername "somepassword"

promptUsername = do
  putStrLn "Username to add to the password manager:"
  username <- getLine 
```

错误在这里：

```
Couldn't match expected type `IO b0' with actual type `[Char]'
Expected type: IO b0
  Actual type: String
In the expression: username
[...] 
```

这里发生了什么？为什么第一个版本有效，而第二个版本无效？

我知道在 Stack Overflow 中有一些类似的问题，但似乎没有一个可以向我解释这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T06:33:51.463

`username`是一个`String`，但是`promptUsername`是一个`IO String`。您需要执行以下操作：

```
username <- promptUsername
let entry = Entry username "somepassword"
persist entry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T12:09:03.570

这是另一个变体。

```
main = do
  action <- cmdParser
  case action of
    Add -> do username <- promptUsername
              let entry = Entry username "somepassword"
              persist entry

promptUsername :: IO String
promptUsername = do
  putStrLn "Username to add to the password manager:"
  getLine

-- fake definitions to make things compile

persist :: Entry ->  IO ()
persist = print

cmdParser :: IO Add
cmdParser = fmap (const Add) getLine

data Add = Add deriving Show
data Entry = Entry String String deriving Show 
```

问题只是那`promptUsername`是一个*动作*而不是一个字符串。动作“返回一个字符串”，所以它有 type `IO String`，但它本身一点也不像一个字符串。由于在 x 位置`Entry x y`需要 a ，因此*动作*`String`形状的东西不能比数字或布尔值更适合那里。因此，在定义您的复杂操作时，您必须“提取”在任何执行情况下将由更简单操作产生的字符串，并将条目作为第一个参数。然后你对结果执行操作*`main``promptUsername``String``persist``Entry`*

# objective-c - Objective-C 调用 C 函数 - 链接器命令失败，退出代码为 1

> ID：12016410
> 
> 赞同：0
> 
> 时间：2012-08-18T06:28:30.457
> 
> 标签：objective-c, c, function, linker-errors

我有以下头文件

```
typedef enum {
    MONDAY = 1,
    TUESDAY = 2,
    WEDNESDAY = 3,
    THURSDAY = 4,
    FRIDAY = 5,
    SATURDAY = 6,
    SUNDAY = 7,
} WeekDaysEnum;

NSString* dayToString(WeekDaysEnum theDay)
{
    switch (theDay) {        
        case MONDAY:
            return @"Monday";
            break;

        case TUESDAY:
            return @"Tuesday";
            break;

        case WEDNESDAY:
            return @"Wednesday";
            break;

        case THURSDAY:
            return @"Thursday";
            break;

        case FRIDAY:
            return @"Friday";
            break;

        case SATURDAY:
            return @"Saturday";
            break;

        case SUNDAY:
            return @"Sunday";
            break;
    }
} 
```

对于某些函数`dayToString`会导致以下错误：

```
linker command failed with exit code 1 
```

如何`dayToString`在 Objective-C`.m`文件中调用函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:34:27.687

将函数从头文件移动到单独的源文件或将其声明为`inline`.

# php - 表格 2 sql 从表格 1 中获取字段

> ID：12016412
> 
> 赞同：0
> 
> 时间：2012-08-18T06:28:32.527
> 
> 标签：php, html

我有两种形式`form 1`和`form 2`.

它`form 1`有 20 个数据字段，它的作用是更新。在`form 2`我有另一个动作，但我想从中获取 20 个数据字段`form 1`。

有没有办法做到这一点以及如何做到这一点？表格 1 和表格 2 也在同一页面中。

我已经有一个解决方案，将 20 个隐藏字段放在表格 2 中，以便表格 2 可以从那里得到它，这很乏味。但是我可以问你们有没有更简单的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:49:36.257

我认为您的解决方案还不错，简单且 Swift ！但唯一更好的方法是ajax。在 ajax 中，您不仅限于表单，您可以从每个表单中获取每个字段，然后手动发送它们。
**如果您不熟悉 ajax**，并且想使用非 ajax 解决方案，您可以使用一个表单并将最后两个表单的所有字段放在这个新的单个表单中，并使用一个操作文件来响应这个表单。在服务器端您可以检查唯一字段的值。

客户端 ：

```
<form action="test.php">

    <!-- fields of form 1 -->
    <input type="text" name="text1"/>
    <input type="text" name="text2"/>
    .
    .
    .
    <input type="text" name="text20"/>

    <!-- fields of form 2 -->
    <input type="text" name="text21"/>
    <input type="text" name="text22"/>
    .
    .
    .
    <input type="text" name="text40"/>

    <input type="submit" value="send"/>
</form> 
```

服务器端：

```
<?php
      if ( isset($_GET["text1"]) )
          //do related jobs to form 1 here, and you can use all of filled fields
      else
          //do related jobs to form 2 here, and you can use all of filled fields
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:40:23.270

您可以将表单 1 中的所有输入保存在会话变量中并在表单 2 中恢复。为此，编写一个函数，将所有 $_GET 和 $_POST 变量存储在 $_SESSION 数组的元素中（使用参数名称为钥匙）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:01:24.460

“问题”是 PHP 开发人员在某个时候解决的问题。

最好的方法是将以前表单中的数据保存在`$_SESSION`. 但是，如果您在同一会话中填写表格，这将是一个有效的解决方案。

如果您正在构建诸如电子商务网站之类的东西，用户必须在其中填写几张付款表格，或者在一些大型测试应用程序中，学生填写多表格测试，最好将每个表格的数据存储在数据库中并关联它到`UserId`. 通过这种方式，用户可以获得从不同位置继续填写表单的能力。

PS 如果您改用 AJAX，您通常只会在现有应用程序之上添加另一层复杂性。特别是如果您的 JavaScript 技能有限。

# android - Android SDK“系统映像、AVD 等）是否依赖于系统？

> ID：12016413
> 
> 赞同：0
> 
> 时间：2012-08-18T06:28:36.380
> 
> 标签：android, sdk

现在我的笔记本电脑上启动了 Ubuntu 和 Windows 7 Dual。两者都设置了Android SDK。

但是当我有一个非常快的 wifi 网络时，我下载并安装了所有系统映像和其他所有可供下载的内容，但仅限于我的 Ubuntu 的 Android SDK 上。

因此，既然它就像 1.5GB 的下载量，我很好奇它们是否依赖于 Linux 系统，而不能在 Windows 上运行？

我只是好奇，我是否能够从 SDK 传输所有下载的文件并将它们传输到我的 Windows Android SDK 上，而不是再次重新下载所有这些文件？还是会有兼容性问题，好像它们只能在 Linux 系统上运行？

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:31:42.377

Android SDK 不是系统独立的。

AVD 的配置文件不是系统独立的（主要是因为文件系统的变化）。

AVD 的图像与系统无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:09:47.187

好吧，如果你去下载所有平台sdks的地方，即[http://dl-ssl.google.com/android/repository/repository-7.xml](http://dl-ssl.google.com/android/repository/repository-7.xml)，你可以浏览所有系统镜像，avd，平台，平台工具，工具等。

因此，如果您转到要下载的东西的 sdk-archive xml 元素，那么您可以检查下载在架构和操作系统方面的依赖关系，因此任何具有 arch="any" 和 os ="any" 实际上是独立于平台的，这对系统映像、样本、平台等都很重要。

此外，如果您对额外内容的来源感到好奇，您可以查看[http://dl-ssl.google.com/android/repository/addons_list-2.xml](http://dl-ssl.google.com/android/repository/addons_list-2.xml)，然后像往常一样按照链接列表进行操作repository-7.xml 和 addons_list-2.xml 中的路径意味着您应该将[http://dl-ssl.google.com/android/repository/](http://dl-ssl.google.com/android/repository/)附加到相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:41:10.007

`Ubuntu's Android SDK`我不认为您将能够使用`Windows 's Android SDK`.
由于 Android 为`SDKS`不同的平台提供了不同的功能，您将不得不重做您为之做的所有事情`Ubuntu's Android SDK`。

# sql-server - 如何在 Visual Studio 2012 中调试 SQL Server T-SQL

> ID：12016417
> 
> 赞同：14
> 
> 时间：2012-08-18T06:29:13.220
> 
> 标签：sql-server, tsql, debugging, visual-studio-2012, visual-studio-debugging

如何在 Visual Studio 2012 的多层应用程序中调试 T-SQL 存储过程？

需要明确的是，我想在 VS 2012 的存储过程中设置一个断点，并在同一个调试会话中从 ASP.NET WebForms 应用程序调用存储过程时点击它。

执行与 VS 2010 相同的步骤时，断点不会在 sproc 内命中。

在 SQL Server 2008 R2 Express 数据库的存储过程中调试 T-SQL 在 Visual Studio 2010 中按预期工作。

为了确保一切都正确启用，我查看了 VS 2010 的说明（[此处](http://msdn.microsoft.com/en-us/library/ms165059%28VS.100%29.aspx)），但 VS 2012 或 .NET 4.5 不存在此类页面。

似乎缺少的步骤是启用“应用程序调试”，但在 VS 2012 的服务器资源管理器 > 数据连接上下文菜单中不存在这样的选项。

## VS 2010 应用程序调试

![在此处输入图像描述](../Images/edea3be24da65f4384d82657c98e48a7.png)

## VS 2012 无应用程序调试

![在此处输入图像描述](../Images/2676da8670199c3ffa970a8cca9b2ca0.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-22T13:00:16.773

您需要打开“SQL Server 对象资源管理器。而不是“服务器资源管理器”。这是 2010 和 2012 之间的不同之处。然后右键单击服务器并选择“应用程序调试”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-09T15:12:22.807

这适用于 VS2012 和 SQL2012。是的，其他版本的情况有些不同，但有点遵循类似的设置。这很棘手，因为必须正确设置各种设置，否则将无法正常工作。

*   带有所有正确选项的 VS 和 SQL 的香草安装（如何做到这一点超出了本文的范围）

*   对整个环境的完全管理员权限和对 sql 的系统管理员权限（基本上是开发环境；您不希望在生产环境中执行此操作）

*   我总是在完整的本地 IIS 下调试 .net Web 应用程序，这是从控制面板安装的 Windows 功能

    *   go .net 项目属性，web，使用本地 iis web 服务器（我也坚持默认端口 80）
*   当我使用 VS sql server 数据库项目开发我的数据库等时，我总是在完全独立的本地 SQL 下工作；我使用模式比较来刷新在 VS 中所做的更改的 sql（如何做到这一点超出了本文的范围）

    *   不要将断点放在该 sp 副本上；该版本的 sp 只是一个蓝图而不是运行时版本
*   为 .net 和 sql server 启用了 go .net 项目属性、web、调试器（底部）

*   查看 sql server 对象资源管理器（不是服务器资源管理器）

    *   单击添加 sql 服务器，使用 sysadmin 凭据添加完整的本地 sql 服务器（我总是使用 sa 进行此类工作）
    *   右键单击您的完整本地 sql 服务器并启用应用程序调试
    *   在那里找到sp并右键单击并查看代码，然后在那里添加你的断点；这是 sp 的运行时版本（请注意，我从不在那里对 sp 进行更改，我会在数据库项目下的主副本中进行这些操作）
*   重建解决方案，并通过单击绿色箭头 Internet Explorer 从 ide 中以调试模式执行 .net Web 应用程序

我希望我没有忘记任何事情。如果我有我会来修改我的帖子。

这一切听起来可能很复杂。这是。但只要有一点纪律和耐心，它是无价的。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:16:13.763

我相信最简单的方法是将数据库作为项目添加到您的解决方案中。您可以通过右键单击 SQL Server 对象资源管理器 (SSOX) 中的数据库来执行此操作。这是开发和调试数据库的好方法。将数据库添加到项目后，您可以在任意位置添加断点，并针对 LocalDB（或其他目标，如果您愿意）进行调试。这种方法的最大缺点是您的现有数据不会随您一起迁移（尽管您可以轻松地将任何更改发布回 SQL DB）。请参阅 MSDN 上有关 SSDT 的[文档](http://msdn.microsoft.com/en-us/library/hh272686%28v=VS.103%29.aspx)以获取更多指导。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T06:55:41.853

以下详细文章准确解释了如何在执行 .Net 应用程序时启用存储过程的调试。

[http://www.sqlmag.com/content1/topic/debugging-stored-procedures-142054/catpath/sql-server](http://www.sqlmag.com/content1/topic/debugging-stored-procedures-142054/catpath/sql-server)

# cakephp - Cakephp 2.0 我正在使用 HABTM 关系，但中间表模型未获取关联数据

> ID：12016419
> 
> 赞同：0
> 
> 时间：2012-08-18T06:29:18.197
> 
> 标签：cakephp, cakephp-2.0

例如，我有投标表和财团表，对于 HABTM，我创建了中间表投标_财团。现在为了我的要求，我创建了一个模型 TendersConsortium

```
class TendersConsortium extends AppModel {

/**
 * Use table
 * @var mixed False or table name
 */
public $useTable = 'tenders_consortiums';

/**
 * Display field
 * @var string
 */
public $displayField = 'counsortium_id';

//The Associations below have been created with all possible keys, those that are not needed can be removed
/**
 * belongsTo associations
 * @var array
 */
public $belongsTo = array(
    'Tender' => array(
        'className' => 'Tender',
        'foreignKey' => 'tender_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Counsortium' => array(
        'className' => 'Counsortium',
        'foreignKey' => 'counsortium_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

}

但是当我获取分页数据 `$this->paginate('TendersConsortium', $TendersConsortium_cond)`时它会返回

```
array(
    (int) 0 => array(
        'TendersConsortium' => array(
            'id' => '6',
            'tender_id' => '3',
            'consortium_id' => '3',
            'state' => 'Winner',
            'created' => '2012-08-08 12:21:28'
        )
    ),
    (int) 1 => array(
        'TendersConsortium' => array(
            'id' => '7',
            'tender_id' => '3',
            'consortium_id' => '1',
            'state' => 'Winner',
            'created' => '2012-08-08 12:21:28'
        )
    )
) 
```

我还设置了递归级别 2，但没有从投标和财团表中获取相关数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:24:53.867

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through)

有帮助

# android - 如何在android上sdk 2.3版本以上的编辑文本上获取光标

> ID：12016426
> 
> 赞同：0
> 
> 时间：2012-08-18T06:30:13.127
> 
> 标签：android, android-edittext, android-2.2-froyo, android-cursor

我正在将拨号盘作为安卓手机上的本机拨号盘。而不是软键盘，我给出了按钮（1,2，.....*，#）。这就是为什么我需要光标可见性和软键盘隐藏。

在我的应用程序中，我创建了自己的拨号盘，其中包含用于显示输入和按下数字按钮的编辑文本。我使用以下选项隐藏了edittext的软键盘板

`dialText.setInputType(InputType.TYPE_NULL);`

我在 2.3.x 及其以下版本上运行代码，它的工作文件与拨号编辑文本**显示在编辑文本上的光标**。但是如果在**sdk 4.0 版上运行上面的代码，它不会显示光标**。我的问题是**我需要在所有 android 版本设备的 edittext 上显示光标**。怎么做？请帮我。

要隐藏我正在使用的软键盘：

```
dialText.setInputType(InputType.TYPE_NULL);  // hide soft key board 
```

我的编辑文本 xml：

```
 <EditText
    android:id="@+id/dialText"
    android:layout_width="match_parent"
    android:layout_marginTop="15dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:gravity="center"
    android:singleLine="true"
    android:layout_height="wrap_content"
    android:ems="10" >
</EditText> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:38:44.200

```
android:cursorVisible="true" 
```

我想这就是你要找的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:07:23.390

尝试在 onCreate() 方法中使用它来隐藏你的键盘。

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

试试这个代码。

```
yourEditTextHere.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {

                InputMethodManager in = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

                // NOTE: In the author's example, he uses an identifier
                // called searchBar. If setting this code on your EditText
                // then use v.getWindowToken() as a reference to your 
                // EditText is passed into this callback as a TextView

                in.hideSoftInputFromWindow(yourEditTextHere
                        .getApplicationWindowToken(),
                        InputMethodManager.HIDE_NOT_ALWAYS);
               // Must return true here to consume event
               return true;

        }
    }); 
```

# iphone - 如何检查用户是否在iPhone中清除了后台应用程序运行状态？

> ID：12016431
> 
> 赞同：0
> 
> 时间：2012-08-18T06:30:56.287
> 
> 标签：iphone, objective-c, ios, ipad

我有一个使用自动登录的 iPhone 应用程序。所以我将凭据存储在本地并执行自动登录。我在应用程序中有一个注销按钮，我在其中弹出回堆栈中的登录控制器。但是，如果用户在后台清除应用程序（通过双击主页按钮），那么当他尝试在我的应用程序中注销时，堆栈上没有登录视图控制器（因为自动登录）。然后注销按钮不起作用。有人可以帮我解决这种情况吗？我这样注销：

```
 NSArray *array1 = [del.navigationController viewControllers];
   NSLog(@"%@",[del.navigationController viewControllers]);
   [del.navigationController popToViewController:[array1 objectAtIndex:0] animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:15:02.917

```
 NSArray *array1 = [del.navigationController viewControllers];
   NSLog(@"%@",[del.navigationController viewControllers]);
   [del.navigationController popToViewController:[array1 objectAtIndex:0] animated:YES]; 
```

`[array1 objectAtIndex:0]` 在那种情况下不会是您的登录视图。

所以你可以保持这样的条件：

```
 UIViewController *vw = (UIViewController *) [array1 objectAtIndex:0];
  if([vw isKindOfClass:[login class])
    [del.navigationController popToViewController:[array1 objectAtIndex:0] animated:YES];
  else
  {
   // init ur login class and push that to nav stack. 
   } 
```

# gstreamer - gstreamer 不会播放 mpegts 文件中的所有环绕声通道

> ID：12016434
> 
> 赞同：0
> 
> 时间：2012-08-18T06:31:25.567
> 
> 标签：gstreamer

我有一个由 Silicondust hdhomerun 调谐器编码的 mpegts 视频文件。我目前拥有的管道：

```
gst-launch-0.10 filesrc location=filename.mpg ! decodebin name=decoder decoder. ! queue ! audioconvert ! audioresample ! alsasink device=front decoder. ! deinterlace ! ffmpegcolorspace ! glimagesink 
```

效果很好，只是它不能捕获所有的音频通道。今晚我在录制一场季前赛足球比赛时发现了这一点，而当裁判和人群嘈杂声响起时，播音员听不见。这个文件在 xine 中的所有音频通道上都可以正常播放。

这是 ffmpeg 的输出，它描述了流：

```
Stream #0:0[0x31]: Video: mpeg2video (Main) ([2][0][0][0] / 0x0002), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 14950 kb/s, 64.96 fps, 59.94 tbr, 90k tbn, 119.88 tbc
Stream #0:1[0x34](eng): Audio: ac3 (AC-3 / 0x332D4341), 48000 Hz, 5.1(side), s16, 448 kb/s
Stream #0:2[0x35](spa): Audio: ac3 (AC-3 / 0x332D4341), 48000 Hz, stereo, s16, 192 kb/s (visual impaired) 
```

如何让所有音频通道从 gstreamer 中的环绕声 mpeg 播放？

额外信息：

*   操作系统

*   阿尔萨音响系统

**更新：**

这个问题其实很奇怪。随机播放所需的所有通道，我认为我已经找到了解决方案，但是新找到的解决方案停止工作，并且一些音频通道再次丢失。

甚至 playbin2 也随机包含和排除这些频道：

gst-launch-0.10 -v playbin2 uri=file:filename.mpg

在确定使用 playbin2 也存在间歇性行为后，我刚刚在 bugzilla.gnome.org 上提交了一份[错误报告。](https://bugzilla.gnome.org/show_bug.cgi?id=682169)

# c# - 为什么 Select 比 Set 语句快

> ID：12016435
> 
> 赞同：5
> 
> 时间：2012-08-18T06:31:28.703
> 
> 标签：c#, .net, sql, sql-server

我做了2个基本测试

**1-**

```
Create Procedure [dbo].[SetLoop]
As Begin 
declare @counter int = 0 ,@a int,@b int,@c int,@d int,@e int
    While @counter < 1000000
    Begin
        set @a=1
        set @b=2
        set @c=3
        set @d=4
        set @e=5
        set @counter = @counter + 1
    End
End 
```

* * *

```
create procedure SelectLoop
As Begin 
declare @counter int =0 ,@a int,@b int,@c int,@d int,@e int
    While @counter < 1000000
    Begin
        select @a=1, @b=2, @c=3, @d=4, @e=5,@counter = @counter + 1
    End
End 
```

* * *

```
 var setTimes = new List<double>();
    for (var i = 0; i < 50; i++)
    {
        stopwatch.Start();
        dataContext.SetLoop();
        stopwatch.Stop();
        setTimes.Add(stopwatch.ElapsedMilliseconds);
        stopwatch.Reset();
    }

    var selectTimes = new List<double>();
    for (var i = 0; i < 50; i++)
    {
        stopwatch.Start();
        dataContext.SelectLoop();
        stopwatch.Stop();
        selectTimes.Add(stopwatch.ElapsedMilliseconds);
        stopwatch.Reset();
    }

    var setAverage = setTimes.Sum() / setTimes.Count;
    var selectAverage = selectTimes.Sum()/selectTimes.Count; 
```

* * *

**结果**

```
setAverage : 2418.44
选择平均：1037.52

setAverage : 2513.8
选择平均：1025.98

setAverage : 2496.52
选择平均：996.36

```

结果意味着 Select 比 Set by `one and half`time快`142.78%`

* * *

**2-**

```
 While @counter < 1000000
    Begin
        select @a=1
        select @b=2
        select @c=3
        select @d=4
        select @e=5
        select @counter = @counter + 1
    End 
```

* * *

```
 While @counter < 1000000
    Begin
        set @a=1
        set @b=2
        set @c=3
        set @d=4
        set @e=5
        set @counter = @counter + 1
    End 
```

* * *

**结果**

```
setAverage : 2518.58
选择平均：2504.44

setAverage : 2474.5
选择平均：2529.48

setAverage : 2511.22
选择平均：2514.04

```

结果意味着它们是相同的

这意味着如果您需要设置一个变量`Select`，将来更喜欢使用 cuz 如果您想设置另一个变量，`,@w=3`只会添加但如果您想设置多个变量，您需要使用`Select` 它更容易编写，更快执行

但我想知道为什么比第一次测试`Select`更快？`Set`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T06:37:41.750

它不是（至少在您当前拥有的示例中），您正在为循环的每次迭代运行 6 个 SET 语句和一个 SELECT 语句，因此，我希望 SELECT 更快。

我建议比较喜欢的东西；

```
CREATE Procedure [dbo].[SelectLoop]
As Begin 
declare @counter int = 0
    While @counter < 1000000
    Begin
        select @counter = @counter + 1
    End
End

CREATE Procedure [dbo].[SetLoop]
As Begin 
declare @counter int = 0
    While @counter < 1000000
    Begin
       set @counter = @counter + 1
    End
End 
```

这将更准确地指示是否存在差异。

# iphone - 在 rootController 中选择一个项目后移动到第二个 viewController

> ID：12016437
> 
> 赞同：-1
> 
> 时间：2012-08-18T06:31:39.513
> 
> 标签：iphone, objective-c, uitableview

我创建了具有带有 viewController 的 tableView 的应用程序，它应该做的是在选择一个项目后移动到第二个 viewController 并使用传递的数据打开它。我正在 RootTableView 中实现下一件事：

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *selecteditem = [listOfItems objectAtIndex:indexPath.row];

DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];
dvController.selectedItem = selectedItem;
[self.navigationController pushViewController:dvController animated:YES];
[dvController release];
dvController = nil;

} 
```

这段代码应该基本上可以工作，但是在我选择一个项目后，它被选中（蓝色）并且它保持在选定的蓝色并且没有发生任何事情......在我选择另一行之后发生同样的事情，我的有什么问题代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:50:15.647

我认为您应该检查navigationController。它可能未初始化。您必须有一个 UINavigationController 才能将任何控制器推入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:36:42.330

在将单元格添加到表格时，您只需要禁用选择样式：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:37:42.203

只需将以下代码放入您的代码中

```
 [self.tableView deselectRowAtIndexPath:
      [self.tableView indexPathForSelectedRow] animated:YES]; 
```

像即

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *selecteditem = [listOfItems objectAtIndex:indexPath.row];
// implement my code
[tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];

DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];
dvController.selectedItem = selectedItem;
[self.navigationController pushViewController:dvController animated:YES];
[dvController release];
dvController = nil;

} 
```

# android - layout_gravity="top" 和 android:layout_alignParentTop="true" 有什么不同？

> ID：12016438
> 
> 赞同：2
> 
> 时间：2012-08-18T06:31:40.390
> 
> 标签：android, android-layout

我想将图像放在 View 的顶部，并将 listview 放在它的底部。什么是最好和正确的方法？

线性布局？相对布局？和哪个属性？

```
layout_gravity="top"?
layout_alignParentTop="true"? 
```

请给我一个截断的代码和一个简短的描述：

layout_gravity="top" 和 android:layout_alignParentTop="true" 有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:25:43.043

> 我想将图像放在 View 的顶部，并将 listview 放在它的底部。什么是最好和正确的方法？

如果您想将 a 放置在当前视图顶部的`ListView`下方，那么您可以同时使用这两种布局，这并没有什么真正的区别。`ImageView`

用于将`layour_gravity`子级相对放置在其父级范围内（`Relativelayout`没有此属性）。例如，您可以使用`LinearLayout`带有方向的`vertical`方法，它将您的两个孩子按照您的意愿堆叠在一起。由于没有意义，因此也被忽略了，因此您可以将其从布局中完全删除`layout_gravity="top"`：`vertical``LinearLayout`

```
<LinearLayout android:orientation="vertical">
    <!-- the layout_gravity is useless int this case and could be removed--> 
    <ImageView android:layout_gravity="top"/>
    <ListView />
</LinearLayout> 
```

`layout_alignParentTop`是子级的放置规则`RelativeLayout`（仅适用于这种类型的布局！），它告诉他们将子级的顶部与父级的顶部对齐`RelativeLayout`。在这种情况下，要堆叠孩子，您可以：

```
<RelativeLayout>
    <!-- you could remove the layout_alignParentTop attribute because by default the Relativelayout will position it's children there -->
    <ImageView  android:id="@+id/imageId" android:layout_alingParentTop="true" />
    <!-- Position this child below the other -->
    <ListView android:layout_below="@id/imageId"/>
</RelativeLayout> 
```

# c - execve() 和环境变量

> ID：12016441
> 
> 赞同：4
> 
> 时间：2012-08-18T06:32:04.593
> 
> 标签：c, linux

我有一个关于 Linux 如何处理传递给 execve() 的环境变量的问题：

execve() 的概要： **int execve(const char *filename, char *const argv[], char *const envp[]);**

在调用 execve() 之前，我们从当前进程的内存映射中分配用于保存 envs/args 的内存。但是在 execve() 之后，调用进程的所有 text/data/bss/stack 都会被新程序覆盖，并且不会保留旧进程的所有内存映射（包括传递的 envs/args 的内存）。

对于新程序，在哪里读取 envs/args？内核是否会**复制**传递的 envs/args 并将其放置到新的内存映射中，或者其他一些技巧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T06:53:24.953

Yes.

When a process calls `exec`, the kernel copies the entire `argv` and `envp` arrays. Then, these are copied into the new process image -- notably, when the program starts running, its stack looks like:

```
NULL
...
envp[1]
envp[0]
NULL
argv[argc-1]
...
argv[1]
argv[0]
argc 
```

The Glibc startup code in `_start` massages this into the proper form to invoke `main`.

(For more details, the copy from the old process is done in [`linux/fs/exec.c`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=fs/exec.c;hb=HEAD), the copy to the new process is done in [`linux/fs/binfmt_elf.c`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=fs/binfmt_elf.c;hb=HEAD), and program startup is done in architecture-specific code such as [`glibc/sysdeps/i386/start.S`](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/i386/start.S;hb=HEAD), [`glibc/sysdeps/x86_64/start.S`](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/start.S;hb=HEAD), or [`glibc/ports/sysdeps/arm/start.S`](http://sourceware.org/git/?p=glibc.git;a=blob;f=ports/sysdeps/arm/start.S;hb=HEAD), which exist just to kick off into `__libc_start_main` in [`glibc/csu/libc-start.c`](http://sourceware.org/git/?p=glibc.git;a=blob;f=csu/libc-start.c;hb=HEAD) which launches `main`.)

# android - 无法在 Android 中使用图表库

> ID：12016442
> 
> 赞同：1
> 
> 时间：2012-08-18T06:32:28.960
> 
> 标签：android, eclipse, charts

**谁能告诉我如何在Android中创建条形图？**

在我在谷歌上进行了一些搜索之后，我得到了解决方案，有两种方法可以实现这个概念。

使用

```
"Achartengine" or

"kiCharts" approach 
```

根据搜索，每个人都建议使用“Achartengine 方法”，因为它是完全开源的，这是我找到的这种方法的官方[链接。](http://code.google.com/p/achartengine/downloads/list)

然后我从上面的链接下载了该文件并将其导入 Eclipse，但它不支持。当我尝试运行该项目时，它的显示如下图所示。![在此处输入图像描述](../Images/b309b8b07b2f954ab9ec8f4ff86a20df.png)![在此处输入图像描述](../Images/c06909504785544e6c0d79e63999c34a.png) ![在此处输入图像描述](../Images/c3b914063c32455dba2e31a20fdbd808.png)

即使我尝试访问或单击模拟器上的任何选项（此处显示在第二张图片中），它也会显示与**“抱歉您的应用程序意外关闭！请重试。强制关闭”相同的结果**

我不知道我是否会以正确的方式前进。

任何人都可以通过发送至少一个使用 AChartEngine 方法完成的示例程序来解释这个概念。

**或者**

请至少向我发送使用 AChartEngine 方法创建**BAR-CHART的步骤。**

感谢您宝贵的时间！..

# python - 用 Python 制作 2d 游戏 - 应该使用哪个库？

> ID：12016443
> 
> 赞同：1
> 
> 时间：2012-08-18T06:32:30.260
> 
> 标签：python, pygame, game-engine, pyglet

我正在寻找用 Python 制作 2d 横向滚动游戏，但是我不确定要使用什么库。我知道 PyGame（3 年未更新）、Pyglet 和 PyOpenGL。我的问题是我找不到任何用 Python 制作的实际发布的游戏，更不用说这些库了——所以我不知道它们在现实世界中的表现如何，或者即使它们中的任何一个都适合在**真正**的游戏，而不是比赛。

任何人都可以对这些库有所了解吗？PyGame 是否仍然有效使用？Pyglet值得吗？它们中的任何一个都被用来制作游戏吗？还有其他我忘记的图书馆吗？

老实说，我什至不确定我是否想使用 Python，它似乎太慢了，未经证实（对于仅用 Python 编写的游戏）等等......我还没有发现任何主要用 Python 制作的游戏，当然，已售出。如果我最终不使用 Python，那么第二个/更好的选择是什么？爪哇？卢阿？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T07:16:33.590

Pygame 只是 SDL 的一个包装器，所以从技术上讲，很多游戏都是使用它制作的，无论如何大部分工作都是在 C 端完成的。这有点慢，但如果你在做一个 2D 游戏，它应该足够了。[Frets-on-Fire](http://fretsonfire.sourceforge.net/)是用 PyGame 用纯 Python 编写的，而[FoFiX](http://code.google.com/p/fofix/)是用带有 C 扩展的 Python 编写的，这些游戏都非常棒，尽管在速度较慢的计算机上 FoFiX 可能无法运行 4 人游戏。

Pyglet 也很不错，虽然我只将它用于模拟器开发，绘制单层，所以我不知道它在游戏开发中的实际效果如何。我发现使用 Pyglet 直接使用 OpenGL 比使用 SDL/PyGame 更容易，所以如果你在做 3D 游戏，它可能比使用 SDL 更好。此外，由于它是用 python 编写的，因此很容易扩展类来更改函数的处理方式。例如，我试图通过 pyglet Texture 类将数据加载到 openGL 纹理中，但是该类无法以我想要的格式加载数据，所以我扩展了该类并更改了获取纹理类型的函数（来从字符串中）包含我想要的纹理，快速且无痛。

我没有看到提到的一个库是[SFML](http://www.sfml-dev.org/)。2.0 API（目前处于测试阶段）非常出色且易于使用，而且，如果我没记错的话，它的运行速度比 SDL 快一点。它也比 SDL 更“面向对象”，如果您使用像 Python 这样的 OO 语言，这真的很好。它有一些很好的 Python 绑定，由 Bastien Leonard 在 Cython 中编写，非常易于使用（或者如果您不想使用最新版本，也可以使用旧的 C 绑定）。我前一阵子用过这个，这是一次非常愉快的体验。

没有很多使用 Python 发布的游戏的原因很简单：你不能关闭 Python 源代码。即使您使用 Py2Exe 或其他工具将 python“编译”为可执行文件，它实际上只是将解释器和 python 源打包到一个 exe 文件中，只需在十六进制编辑器中打开 exe 即可获得源。

虽然我是“用 Python 编写，用 C 编写时间关键部分”的支持者，但如果你觉得 python 太慢，我可能会建议 C 或者最好是 C++ 作为要走的路，简单地说因为用 Java 编写并没有那么大的可用性优势，而且 C 语言的运行速度可能比 Java 快很多，而 Lua 只会带走 Python 的一些可用性，而不会给你带来任何明显的性能提升. SFML 和 SDL 都可以直接从 C(++) 中使用。

如果您决定使用 python，建议：按照应该使用的方式使用它，作为脚本语言。不要尝试在纯 python 中旋转或加载图像，要么使用你选择的库中可用的接口（它们都有非常好的接口用于这些事情），要么编写一个扩展模块来为你做这件事。使用 python 进行逻辑控制并从您的库中获取数据。如果你遵循这个简单的规则，你真的不应该遇到任何性能问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T07:20:24.607

根据我的经验，*真正*要杀死你的东西通常与图形无关。当然，在不使用脏矩形更新等技术的情况下，在 16 毫秒内完成所有帧渲染是一项挑战，但这不会是*大问题* thing you'll lose sleep over. The biggest performance considerations are going to come from much more elementary things - collision detection, spatial searching, and pathfinding are three of the big ones - that can easily send your logic frame rate into the floor if done inefficiently over even a few hundred objects. For problems like these, pure Python may not be the best choice, but it's not hard to offload these to C/C++ while retaining Python for higher-level logic. This is essentially what games like Civilization 4 and EVE Online (client and server!) do - offload performance-critical code to C++ while retaining the flexibility and simplicity of Python for 'everyday' tasks.

pygame 正在积极开发（他们有一段时间没有稳定的版本，但 Mercurial 存储库非常活跃）并且相当受欢迎。它还在底层使用了广受好评的（基于 C 的！）SDL 库。pyglet 也在积极开发中，并使用 OpenGL 进行所有渲染，如果您打算朝这个方向发展（因为您已经掌握了大部分基础知识），则可以更容易地转向 3D 开发。

如果您决定走非 Python 路线，您可以直接将 SDL 与 C/C++ 一起使用，以及 SDL_gfx（用于原语）、SDL_ttf（用于文本）和 SDL_net（用于基本网络）等附加库。另一个出色且广泛使用的 C/C++ 替代方案是[Allegro](http://alleg.sourceforge.net/)。我两者都用过，我会声称这在很大程度上取决于你的口味。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T06:41:03.377

Pygame 应该足以满足您的需求。Pygame 是稳定的，如果您浏览网站，您会发现使用 pygame 编码的游戏。您希望实现什么类型的游戏？

# android - Android AsyncTask 使用墙纸管理器

> ID：12016445
> 
> 赞同：1
> 
> 时间：2012-08-18T06:32:52.987
> 
> 标签：android, asynchronous, android-asynctask, imageview, wallpaper

我的墙纸管理器使用异步任务设置为墙纸。但是从非异步更改为 AsyncTask 后，我收到错误“SetWallpaperTask 类型的方法 getBaseContext() 未定义”请更正我的代码。非常感谢。

旧的非异步任务

```
public void SetWallpaper(String image_url)
        {   
        URL myFileUrl = null;
            try
        {   
                myFileUrl = new URL(image_url); 
        }
            catch (MalformedURLException e)
            {      
                e.printStackTrace();  
            }   
            Bitmap bmImg = null;
            try {  
                HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();   
                conn.setDoInput(true);   
                conn.connect();     
                //int length = conn.getContentLength(); 
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is); 
            }
                catch (IOException e)
                {       
                    e.printStackTrace();  
                }   
        try {       

            String path = myFileUrl.getPath();
            String idStr = path.substring(path.lastIndexOf('/') + 1);
            File filepath = Environment.getExternalStorageDirectory();
            File dir = new File (filepath.getAbsolutePath() + "/Wallpaper/");
                dir.mkdirs();
                String fileName = idStr;
                File file = new File(dir, fileName);
                FileOutputStream fos = new FileOutputStream(file);

                bmImg.compress(CompressFormat.JPEG, 75, fos);   
                fos.flush();    
                fos.close();       

                WallpaperManager wpm = WallpaperManager.getInstance(getBaseContext());
                wpm.setBitmap(bmImg);

        }
        catch (Exception e){

            e.printStackTrace();  
        }
        } 
```

新的异步任务

```
public class SetWallpaperTask extends AsyncTask<String , String , String>
{
    private Context context;
    private ProgressDialog pDialog;
    String image_url;
    URL myFileUrl;
    String myFileUrl1;
    Bitmap bmImg = null;

    public SetWallpaperTask(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub

        super.onPreExecute();

        pDialog = new ProgressDialog(context);
        pDialog.setMessage("Downloading Image ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();

    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub

        try {  

            myFileUrl = new URL(args[0]);
            //myFileUrl1 = args[0];

            HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();   
            conn.setDoInput(true);   
            conn.connect();     
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is); 
        }
        catch (IOException e)
        {       
            e.printStackTrace();  
        }
        try {       

            String path = myFileUrl.getPath();
            String idStr = path.substring(path.lastIndexOf('/') + 1);
        File filepath = Environment.getExternalStorageDirectory();
        File dir = new File (filepath.getAbsolutePath() + "/Wallpaper/");
            dir.mkdirs();
            String fileName = idStr;
            File file = new File(dir, fileName);
            FileOutputStream fos = new FileOutputStream(file);
            bmImg.compress(CompressFormat.JPEG, 75, fos);   
            fos.flush();    
            fos.close();    

        }
        catch (Exception e)
                {
                    e.printStackTrace();  
                }
        return null;   
    }

    @Override
    protected void onPostExecute(String args) {
        // TODO Auto-generated method stub
        WallpaperManager wpm = WallpaperManager.getInstance(context()); // --The method context() is undefined for the type SetWallpaperTask
        wpm.setBitmap(bmImg);
        pDialog.dismiss();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:37:43.730

这是因为您无法使用 getBaseContext() 在 AsyncTask 中获取上下文。

我看到您已经在构造函数中接收到一个 Context 并将其存储在类变量`context`中。所以你可以简单地改变

```
 WallpaperManager wpm = WallpaperManager.getInstance(getBaseContext()); 
```

至

```
 WallpaperManager wpm = WallpaperManager.getInstance(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:39:05.827

将您的活动上下文传递给 this `AsynTask`，并在您的`onPostExecute()`.

# java - JAX-RS (Jersey) 创建相关对象而不是 null

> ID：12016448
> 
> 赞同：0
> 
> 时间：2012-08-18T06:33:19.913
> 
> 标签：java, jaxb, jersey, jax-rs

问题很简单，但有点难以解释。

我有这样的 REST 服务：

```
@Path("categories")
@RequestScoped
public class CategoryResource {

    @Inject
    CategoriesFacade dao;

    @PUT
    @Consumes("application/json")
    public void putJson(Categories content) {
        System.err.println(content.toString()); // <-- ?????
        dao.edit(content);
    }

    // ....
} 
```

和这样的实体对象：

```
@XmlRootElement
public class Categories implements Serializable {

    @Id
    @Column(name = "CATEGORY_ID", unique = true, nullable = false, precision = 5)
    private Integer categoryId;

    @Column(name = "NAME")
    private String name;

    @JoinColumn(name = "PARENT_ID", referencedColumnName = "CATEGORY_ID")
    @ManyToOne
    private Categories parentId;

    // ....    

} 
```

这是http请求有效负载：

```
PUT http://localhost:8080/api/categories
Data: {"categoryId":"7162","name":"test","parentId":null} 
```

这是我在`@PUT`请求中获得的类别对象（参见标有 ???? 的行）：

```
Categories{
  categoryId=7162,
  name=test,
  parentId=Categories{categoryId=null, name=null, parentId=null}
} 
```

因此，正如您在此处看到的，`parentId`分配了空`Categories`对象，这样我得到了 ValidationException，因为`name`不能为空。

知道如何让 Jersey 给我这种对象，所以 parentId 的 null 值就可以了：

```
Categories{
  categoryId=7162,
  name=test,
  parentId=null
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:50:58.027

在客户端站点上对您的对象进行字符串化（例如，如果客户端在 JavaScropt 上，则使用方法`JSON.stringify`）。
休息方法制作

```
@PUT
@Consumes("application/json")
public void putJson(String content) { 
```

并将 json 字符串转换为对象（例如，使用 google json）

```
Categories cont = new com.google.gson.Gson().fromJson(content, Categories.class); 
```

# c# - 在 Javascript 函数中使用特殊字符作为参数值时出现 Javascript 错误

> ID：12016451
> 
> 赞同：0
> 
> 时间：2012-08-18T06:33:50.723
> 
> 标签：c#, javascript, asp.net

我在 JavaScript 中有以下函数，我`PageMethod`在 ASP.Net 中使用它来调用它。

问题是当我传递一个类似`xy\23`或`2%`参数的字符串时`searchStringVal`，我得到一个 JavaScript 错误。无论如何我可以处理这种问题吗？这个参数最终被传递给我的 ASP.Net 页面中的静态服务器端方法，这进一步加剧了这个问题。所以我正在寻找在这种情况下使用的最有效的方法。

一种解决方案可能是在 JavaScript 中编码字符串，但我需要能够在 ASP.Net C# 代码中对其进行解码，而不会丢失字符串的原始值。

```
function CallPageMethod(startRowIndex, searchStringVal) {        
    if (newVal != searchStringVal) {
        //document.getElementById('divMessage').style.visibility = "hidden";
        return;
    }

    start = new Date();
    PageMethods.GetData(startRowIndex, tableView.get_pageSize(), searchStringVal, updateGrid, onError, searchStringVal);
} 
```

**最新更新**：我的问题由两个不同的人回答。如何将两者都标记为答案？我最终使用了 Vinay 推荐的 Javascript 编码方法，然后使用 Uri.UnescapeDataString 方法在 C# 中取消编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:01:04.740

如果你得到一个未终止的字符串常量，那么它与你输入字符串的方式有关。

键入“2xy\”被解释为 2xy，然后是转义的双引号。然后字符串被削弱。

尝试 "2​​xy\\" 输入字符串 2xy\ - 这使用反斜杠来转义第二个反斜杠，并将被识别为您尝试输入的字符串。

# javascript - 防止外部页面重定向我的（父）页面

> ID：12016462
> 
> 赞同：7
> 
> 时间：2012-08-18T06:35:21.333
> 
> 标签：javascript, html, anchor

在 Mac OS 10.7 上使用最新版本的 Chrome。

我认为是一些聪明的 javascript 使这个网页上的人们能够使用：

[http://www.chairworks.com/](http://www.chairworks.com/)

...关闭我的（父）页面，该页面首先打开了他们的（chairworks.com）页面。我没有用javascript打开它们，而是用带有属性的`<a>`标签。`target="_blank"`

如果我禁用 javascript，那么行为就会停止。

```
<a href="http://www.chairworks.com" target="_blank">www.chairworks.com</a> 
```

我希望chairworks.com/ 上的页面可以简单地在另一个标签/窗口中打开......但我发现，一旦新的浏览器标签打开，它就会关闭，然后是*我的*页面（父标签/窗口）被重定向到 chairworks.com 页面。

有点粗鲁。

有人可以指出哪些代码使他们能够做到这一点吗？我该如何预防呢？（假设我希望链接按预期运行，例如在我的演示页面中。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-28T22:20:24.880

我相信正确的做法是设置相应的链接类型属性，这样浏览器就不会为目标窗口提供和`opener`引用。

```
<a href="https://untrusted-site.org" target="_blank" rel="noreferrer noopener">Link</a> 
```

您可以在此处阅读有关链接类型的更多信息：[https ://developer.mozilla.org/en-US/docs/Web/HTML/Link_types](https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T06:46:22.370

这是他们正在使用的脚本：

```
setTimeout('redirect_page()',0);
function redirect_page(){if (window.opener) { window.opener.location.href = '/home.html'; window.close(); } else { location.href = '/home.html'; }} 
```

至于如何规避它（只是一个想法）：
创建自己的空白页面，其源设置为 about:blank。当它加载时（或超时后），您可以在该窗口中编写一些代码，然后打开有问题的链接。然后有问题的链接只是关闭你的缓冲页面。去他妈的！给用户力量！

编辑：看起来你也可以命名你的页面`home.html`呵呵，但这不是一个可行的解决方案..

**最终编辑：** *简单逻辑的人...*
`<a href="http://www.chairworks.com/home.html" target="_blank">www.chairworks.com</a>`
适用于所有人，无需 javascript。
请参阅此工作[jsfiddle 示例](http://jsfiddle.net/RmZDX/show/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:10:13.710

正如@GitaarLAB 解释的那样，目标网站正在使用该`window.opener`属性来访问您的页面。自己使用一些 Javascript 和`about:blank`中间的页面可以帮助您减少他们对您页面的访问。就像：

```
 <a href="http://www.chairworks.com/" target="_blank" onclick="var w = window.open('about:blank'); w.opener = null; w.open('http://www.chairworks.com/'); return false;">http://www.chairworks.com/</a> 
```

一些注意事项：

1.  我`href`将把属性留给没有启用 JS 的用户（猜猜看！目标网站也没有 JS！;），或者像搜索引擎这样的网络爬虫（只有那些不关心 JS 东西的人，不过)
2.  `window.opener`在重定向到目标网站之前，您通过重置新窗口的属性来切断反向链接。
3.  并且在打开目标网站后，有一个`return false;`阻止浏览器正常使用的`href`and`target`属性。

# javascript - 为页面动态设置背景图片

> ID：12016466
> 
> 赞同：1
> 
> 时间：2012-08-18T06:36:48.787
> 
> 标签：javascript, jquery

我有一个 div#logo。我为这个 div 设置了背景图片。我使用 jQuery 动态更改图像。和一个包含 div#logo 的公共页面。我有一个来自 UI 端的按钮，它更改了 div#logo.but 的背景图像。但是当我重定向到另一个页面时，div#logo 页面采用默认背景图像。

对于我选择图像表单 UI 侧按钮的所有页面，我必须做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:03:41.243

如果服务器端没有持久存储（以及由此产生的所有麻烦，例如输入验证等），我认为您最好将用户的选择存储在 cookie 中。

由于您使用的是 jQuery，您可以使用[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)。

```
$(function() {
    var img = $.cookie('background') || 'standard-bg.png';

    $('#logo').css({
        backgroundImage: img
    });

    $('button').click(function() {
       var img_src = $(this)... // However you determine the particular image

       $('#logo').css({
           backgroundImage: img_src
       });

       $.cookie('background', img_src);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:55:18.123

将背景图片 url 存储到`SESSION`. `ajax`并通过调用更改背景图像来更新此变量。

这样，您将能够在所有其他页面上获得选定的背景图像。

编辑：

**或者**

您可以尝试 javsacript 会话。

[跨页面保留javascript变量？](https://stackoverflow.com/questions/1981673/persist-javascript-variables-across-pages)

# silverlight - 是否可以从代码而不是 xaml 定义视觉样式？

> ID：12016468
> 
> 赞同：1
> 
> 时间：2012-08-18T06:37:06.000
> 
> 标签：silverlight, xaml

我想根据请求以编程方式创建（可能扩展核心按钮类）基本按钮，并在准备好时将其添加到主画布中。是否可以从代码中设置样式（它将是宽度/高度和透明背景，仅此而已），而不是在 xaml 文件中具有视觉样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T07:47:12.940

[Style](http://msdn.microsoft.com/en-us/library/system.windows.style%28v=vs.95%29.aspx)只是另一个类。

```
Style buttonStyle = new Style(typeof(Button));
buttonStyle.Setters.Add(new Setter(Button.WidthProperty, 100));
buttonStyle.Setters.Add(new Setter(Button.HeightProperty, 75));
buttonStyle.Setters.Add(new Setter(Button.BackgroundProperty, new SolidBrush(...)));

myButton.Style = buttonStyle; 
```

# windows - 如何挂钩 Windows 桌面创建？

> ID：12016469
> 
> 赞同：2
> 
> 时间：2012-08-18T06:37:16.613
> 
> 标签：windows, hook, desktop

我将[Sysinternals 的 Desktops](http://technet.microsoft.com/en-us/sysinternals/cc817881.aspx)与[Classic Shell](http://classicshell.sourceforge.net/)结合使用。不幸的是，Classic Shell 仅在第一个桌面上自动运行。对于桌面 2+，必须手动启动 Classic Shell。

Desktops 为每个桌面使用一个 Windows 桌面对象，并在每个桌面下运行一个单独的资源管理器进程以提供任务栏和开始菜单。我想知道是否有一种定义明确的方式来“挂钩”桌面创建和启动应用程序（经典 Shell）？

# node.js - Node.js 日志记录

> ID：12016474
> 
> 赞同：183
> 
> 时间：2012-08-18T06:37:44.747
> 
> 标签：node.js, logging, libraries

是否有任何库可以帮助我处理 Node.Js 应用程序中的日志记录？我想要做的就是，我想将所有日志写入一个文件，而且我需要一个选项，比如在特定大小或日期后推出文件。

* * *

我已经合并了 log4js，我试图将所有配置细节保存在一个文件中，并且只使用其他应用程序文件中的方法以便于维护。但它没有按预期工作。这是我想要做的

```
var log4js = require('log4js'); 
log4js.clearAppenders()
log4js.loadAppender('file');
log4js.addAppender(log4js.appenders.file('test.log'), 'test');
var logger = log4js.getLogger('test');
logger.setLevel('ERROR');

var traceLogger = function (message) {
        logger.trace('message');
    };

var errorLogger = function (message) {
        logger.trace(message);
    };

exports.trace = traceLogger;
exports.error = errorLogger; 
```

我已将此文件包含在其他文件中并尝试过

```
log.error ("Hello Error Message"); 
```

但它不起作用。这有什么问题吗？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-08-18T15:40:22.720

[Winston](https://github.com/flatiron/winston/)是一个非常好的日志库。您可以使用它将日志写入文件。

代码看起来像：

```
var winston = require('winston');

var logger = new (winston.Logger)({
  transports: [
    new (winston.transports.Console)({ json: false, timestamp: true }),
    new winston.transports.File({ filename: __dirname + '/debug.log', json: false })
  ],
  exceptionHandlers: [
    new (winston.transports.Console)({ json: false, timestamp: true }),
    new winston.transports.File({ filename: __dirname + '/exceptions.log', json: false })
  ],
  exitOnError: false
});

module.exports = logger; 
```

然后，您可以像这样使用它：

```
var logger = require('./log');

logger.info('log to file'); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-01-23T23:40:09.027

## Scribe.JS 轻量级记录器

我浏览了许多记录器，但找不到轻量级的解决方案 - 所以我决定制作一个简单的解决方案，发布在 github 上。

*   保存按用户、日期和级别组织的文件
*   给你一个漂亮的输出（我们都喜欢）
*   易于使用的 HTML 界面

我希望这能够帮到你。

## 在线演示

**[http://bluejamesbond.github.io/Scribe.js/](http://bluejamesbond.github.io/Scribe.js/)**

## 安全的 Web 访问日志

![一种](../Images/2fe564872f9f9528dd2261a920bb2fd8.png)

## 也将漂亮的文本打印到控制台！

![一种](../Images/6e3e6c5fc2414db3cef286c833d226ea.png)

## 网络访问

![一种](../Images/1f51280084688505b656cc5cdc8b1fad.png)

## Github

**[https://github.com/bluejamesbond/Scribe.js](https://github.com/bluejamesbond/Scribe.js)**

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-04-30T04:33:13.643

[Log4js](https://github.com/nomiddlename/log4js-node)是 nodejs 应用程序最流行的日志库之一。

它支持许多很酷的功能：

1.  彩色控制台日志记录
2.  替换节点的 console.log 函数（可选）
3.  文件追加器，基于文件大小的日志滚动
4.  SMTP、GELF、hook.io、Loggly 附加程序
5.  多进程附加程序（当你有工作进程时很有用）
6.  连接/快速服务器的记录器
7.  可配置的日志消息布局/模式
8.  不同日志类别的不同日志级别（将应用程序的某些部分记录为 DEBUG，其他部分仅记录为错误等）

**例子：**

1.  安装：`npm install log4js`

2.  配置（`./config/log4js.json`）：

    ```
    {"appenders": [
        {
            "type": "console",
            "layout": {
                "type": "pattern",
                "pattern": "%m"
            },
            "category": "app"
        },{
            "category": "test-file-appender",
            "type": "file",
            "filename": "log_file.log",
            "maxLogSize": 10240,
            "backups": 3,
            "layout": {
                "type": "pattern",
                "pattern": "%d{dd/MM hh:mm} %-5p %m"
            }
        }
    ],
    "replaceConsole": true } 
    ```

3.  用法：

    ```
    var log4js = require( "log4js" );
    log4js.configure( "./config/log4js.json" );
    var logger = log4js.getLogger( "test-file-appender" );
    // log4js.getLogger("app") will return logger that prints log to the console
    logger.debug("Hello log4js");// store log in file 
    ```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-10-15T10:30:53.070

您还可以使用 [https://npmjs.org/doc/coding-style.html](https://npmjs.org/doc/coding-style.html)中推荐的 issacs 的 npmlog 。

你可以在这里找到这个模块 [https://github.com/isaacs/npmlog](https://github.com/isaacs/npmlog)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-05T23:44:16.287

“logger.setLevel('ERROR');” 导致问题。我不明白为什么，但是当我将其设置为“ALL”以外的任何内容时，文件中不会打印任何内容。我戳了一下并修改了您的代码。它对我来说很好。我创建了两个文件。

**logger.js**

```
var log4js = require('log4js');
log4js.clearAppenders()
log4js.loadAppender('file');
log4js.addAppender(log4js.appenders.file('test.log'), 'test');
var logger = log4js.getLogger('test');
logger.setLevel('ERROR');

var getLogger = function() {
   return logger;
};

exports.logger = getLogger(); 
```

**logger.test.js**

```
var logger = require('./logger.js')

var log = logger.logger;

log.error("ERROR message");
log.trace("TRACE message"); 
```

当我运行“node logger.test.js”时，我在 test.log 文件中只看到“错误消息”。如果我将级别更改为“TRACE”，那么这两行都会打印在 test.log 上。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-11T10:14:33.660

Winston 是大多数开发人员的最佳选择。我一直在使用温斯顿。最近我将winston 与papertrail 一起使用，它将应用程序日志记录提升到一个新的水平。

这是他们网站的一个不错的屏幕截图。

[![在此处输入图像描述](../Images/e44d94c2ce74f71cb92bd5498d1b1c29.png)](https://i.stack.imgur.com/zFbLX.jpg)

**它如何有用**

*   您可以在一处管理来自不同系统的日志。当您有两个后端通信并且可以就地查看来自两者的日志时，这可能非常有用。

*   日志是实时的。您可以查看生产服务器的实时日志。

*   强大的搜索和过滤

*   如果在日志中遇到特定文本，您可以创建警报以向您发送电子邮件。

你可以找到更多[http://help.papertrailapp.com/kb/how-it-works/event-viewer/](http://help.papertrailapp.com/kb/how-it-works/event-viewer/)

使用[`winston`](https://github.com/winstonjs/winston),[`winston-express`](https://github.com/bithavoc/express-winston)和[`winston-papertrail`](https://github.com/kenperkins/winston-papertrail)节点模块的简单配置。

```
import winston from 'winston';
import expressWinston from 'express-winston';
//
// Requiring `winston-papertrail` will expose
// `winston.transports.Papertrail`
//
require('winston-papertrail').Papertrail;
// create winston transport for Papertrail
var winstonPapertrail = new winston.transports.Papertrail({
  host: 'logsX.papertrailapp.com',
  port: XXXXX
});
app.use(expressWinston.logger({
  transports: [winstonPapertrail],
  meta: true, // optional: control whether you want to log the meta data about the request (default to true)
  msg: "HTTP {{req.method}} {{req.url}}", // optional: customize the default logging message. E.g. "{{res.statusCode}} {{req.method}} {{res.responseTime}}ms {{req.url}}"
  expressFormat: true, // Use the default Express/morgan request formatting. Enabling this will override any msg if true. Will only output colors with colorize set to true
  colorize: true, // Color the text and status code, using the Express/morgan color palette (text: gray, status: default green, 3XX cyan, 4XX yellow, 5XX red).
  ignoreRoute: function (req, res) { return false; } // optional: allows to skip some log messages based on request and/or response
})); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-27T17:44:47.163

'nodejslogger' 模块可用于简单的日志记录。它具有三个级别的日志记录（INFO、ERROR、DEBUG）

```
var logger = require('nodejslogger')
logger.init({"file":"output-file", "mode":"DIE"}) 
```

D：调试，I：信息，E：错误

```
logger.debug("Debug logs")
logger.info("Info logs")
logger.error("Error logs") 
```

该模块可以访问：[https ://www.npmjs.com/package/nodejslogger](https://www.npmjs.com/package/nodejslogger)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-21T14:14:25.933

注意**errorLogger**是 logger.trace 的包装**器**。但是 logger 的级别是**ERROR**所以**logger.trace**不会将其消息记录到**logger**的附加程序。

修复方法是在**errorLogger**的主体中将**logger.trace**更改为**logger.error**。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-13T03:58:31.793

每个答案都是 5 6 岁，所以有点过时或贬值。2020年再说吧。

[simple-node-logger](https://www.npmjs.com/package/simple-node-logger "是的，你可以检查一下。")是用于控制台、文件和滚动文件附加程序的简单多级记录器。特点包括：

1.  级别：跟踪、调试、信息、警告、错误和致命级别（加上全部和关闭）

2.  灵活的附加程序/格式化程序，默认为 HH:mm:ss.SSS LEVEL 消息添加附加程序以将输出发送到控制台、文件、滚动文件等

3.  即时更改日志级别

4.  域和类别列

5.  基本附加程序中可覆盖的格式方法

6.  跟踪所有日志语句计数的统计信息，包括警告、错误等

您可以在任何 nodejs Web 应用程序中轻松使用它：

```
 // create a stdout console logger
  const log = require('simple-node-logger').createSimpleLogger(); 
```

或者

```
 // create a stdout and file logger
  const log = require('simple-node-logger').createSimpleLogger('project.log'); 
```

或者

```
 // create a custom timestamp format for log statements
  const SimpleNodeLogger = require('simple-node-logger'),
  opts = {
      logFilePath:'mylogfile.log',
      timestampFormat:'YYYY-MM-DD HH:mm:ss.SSS'
   },
  log = SimpleNodeLogger.createSimpleLogger( opts ); 
```

或者

```
 // create a file only file logger
  const log = require('simple-node-logger').createSimpleFileLogger('project.log'); 
```

或者

```
 // create a rolling file logger based on date/time that fires process events
  const opts = {
      errorEventName:'error',
       logDirectory:'/mylogfiles', // NOTE: folder must exist and be writable...
        fileNamePattern:'roll-<DATE>.log',
         dateFormat:'YYYY.MM.DD'
  };
  const log = require('simple-node-logger').createRollingFileLogger( opts ); 
```

可以通过以下方式记录消息

```
 log.info('this is logged info message')
  log.warn('this is logged warn message')//etc.. 
```

加分：它可以将日志发送到控制台或套接字。您还可以附加到日志级别。

这是处理日志功能的最有效和最简单的方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-21T12:39:23.123

**这是用于记录具有完整堆栈跟踪**的数据的轻量级模块

 **[@grdon/记录器](https://www.npmjs.com/package/@grdon/logger)

```
 const logger = require('@grdon/logger')({
   defaultLogDirectory : __dirname + "/logs",
 })
 // ...
logger(someParams, 'logfile.txt')
logger(anotherParams, 'anotherLogFile.log') 
```**

# android - Android 设备的多语言支持

> ID：12016481
> 
> 赞同：2
> 
> 时间：2012-08-18T06:39:00.300
> 
> 标签：android

如何支持我的 Android 设备支持多种语言？我在 Android 中创建了一个应用程序，可以在两种语言（即英语和马拉地语）之间动态切换。在模拟器中一切正常。但是，当我在我的 Android 设备上安装我的应用程序时，文本不会变成马拉地语。我已将马拉地语所需的 Shivaji.ttf 文件包含在项目的资产文件夹中。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:03:54.910

尝试将设备上的语言环境设置为马拉地语。有许多免费应用程序可让您轻松更改语言环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T06:02:30.290

多语言支持很容易为 android 完成。使用语言代码的后缀为该语言创建一个新的值目录。对于德语：values-de 或法语：values-fr，而不是将您的 strings.xml 复制到其中并翻译每个条目。这就是你所需要的。

只需点击此链接就很容易

```
 languageToLoad = "hi"; // your language
        locale = new Locale(languageToLoad);
        Locale.setDefault(locale);
        config = new Configuration();
        config.locale = locale;
        getBaseContext().getResources().updateConfiguration(config,
                getBaseContext().getResources().getDisplayMetrics());
        this.setContentView(R.layout.activity_main); 
```

*   查看更多信息：[http ://www.theappguruz.com/blog/multi-language-support-to-android-app#sthash.eGmzq57K.dpuf](http://www.theappguruz.com/blog/multi-language-support-to-android-app#sthash.eGmzq57K.dpuf)

当你改变你的语言然后应用下面的代码来**平滑刷新活动**。

```
finish();
overridePendingTransition(0, 0);
startActivity(getIntent());
overridePendingTransition(0, 0); 
```

# javascript - jquery是否检查了所有总和x2

> ID：12016485
> 
> 赞同：0
> 
> 时间：2012-08-18T06:39:30.393
> 
> 标签：javascript, jquery, checkbox, sum

我对 sum 有一些问题

示例：如果复选框`id='sms'`被选中总和 x2 否则 x1

```
<form>
<input onclick="clickCh(this)" type="checkbox" value="1.00"> $1.00<br>
<input onclick="clickCh(this)" type="checkbox" value="2.00"> $2.00<br>
<input id="sms" type="checkbox"> pay via sms<br>
     <BR>
<input id="total" type="text" name="total">
</form>
</div>

<script>
var total = document.getElementById("total")

$('#sms').change(function(){
    var rise = this.checked ? '2' : '1';
});

 function clickCh(caller){
  if(caller.checked){
   add(caller)
  } else {
   subtract(caller)
  }
 }
function add(caller){ 
    total.value = total.value*1 + caller.value*1 * rise
        }
function subtract(caller){ 
    total.value = total.value*1 - caller.value*1 * rise
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:41:40.877

`rise`的范围仅在此函数内：

```
$('#sms').change(function(){
    var rise = this.checked ? '2' : '1';
}); 
```

在外面声明它然后修改它：

```
var rise;

$('#sms').change(function(){
    rise = this.checked ? 2 : 1;
}); 
```

# rubymotion - 具有 CoreAnimation 常量问题的 RubyMotion

> ID：12016486
> 
> 赞同：0
> 
> 时间：2012-08-18T06:39:31.170
> 
> 标签：rubymotion

因此，我正在尝试在我的 ruby​​motion 应用程序中使用一些 CATransition 常量：

```
transition = CATransition.animation
transition.duration = 0.4
transition.type = kCATransitionMoveIn
transition.subtype = kCATransitionFromBottom 
```

但是我得到了未定义的局部变量或方法“kCATransitionMoveIn”。我在我的 rake 文件中的框架中添加了quartzcore：

app.frameworks += ['CoreLocation', 'MapKit', 'QuartzCore']

有谁知道为什么我不能访问这个常量？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:59:25.893

Ruby 中的常量不能以小写字母开头。你会想要使用`KCATransitionMoveIn`and `KCATransitionFromBottom`。

# java - 如何将一个字符串中的特殊字符插入另一个字符串？

> ID：12016488
> 
> 赞同：3
> 
> 时间：2012-08-18T06:40:01.280
> 
> 标签：java, regex, string, pattern-matching

我有一个字符串，

```
 string1 = "Sri Lanka National Chess Championship this year and represented Sri Lanka at represented Sri Lanka Universities at the World University Chess Championships." 
```

我还有另一个名为“string2”的字符串，它只有`<NOUN> and </NOUN>`用空格分隔的“”标签包围的字符串。

```
string2 = "<NOUN>Sri Lanka National Chess Championship</NOUN> <NOUN>Sri Lanka</NOUN> <NOUN>Sri Lanka</NOUN> <NOUN>World University Chess</NOUN>" 
```

请注意，第二个字符串可以有任何名词标记词（基于 'string1'，例如：如果 string1 有 3 个名词，则 string2 将有相同的 3 个名词被名词标签包围）
**我想将标签添加到 'string1' 和使 string1 如下，**

```
string1 = "<NOUN>Sri Lanka National Chess Championship</NOUN> this year and represented <NOUN>Sri Lanka</NOUN> at represented <NOUN>Sri Lanka</NOUN> Universities at the <NOUN>World University Chess</NOUN> Championships." 
```

我使用以下代码来执行此操作，

```
Pattern p = Pattern.compile("<NOUN>(.*?)</NOUN>");
    Matcher m = p.matcher(string2);
    while(m.find()) {
        string1= string1.replaceAll(m.group(1),m.group(0));
    } 
```

但它给了我以下输出，

```
<NOUN><NOUN><NOUN>Sri Lanka</NOUN></NOUN> National Chess Championship</NOUN> this year and represented <NOUN><NOUN>Sri Lanka</NOUN></NOUN> at represented <NOUN><NOUN>Sri Lanka</NOUN></NOUN> Universities at the <NOUN>World University Chess</NOUN> Championships. 
```

谁能告诉我如何正确地做到这一点？
或者请告诉我如何从给定的输出中获得所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:57:06.970

代替 ：

```
string1= string1.replaceAll(m.group(1),m.group(0)); 
```

利用 ：

```
string1= string1.replaceAll("(?<!<NOUN>)("+m.group(1)+")(?!</NOUN>)",m.group(0)); 
```

[在此处](http://www.regular-expressions.info/lookaround.html)查看有关“向前看和向后看构造” 的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:04:49.507

你的例子的问题是 that`Sri Lanka National Chess Championship`是一个名词，并且`Sri Lanka`这个字符串的一部分也是一个名词。因此，您的匹配器正在多次替换字符串。

您可以通过不替换已替换的字符串片段来解决此问题。我将每个匹配的字符串分成三个部分：before、match-str、after。保持断弦的顺序。Vector 是一个非常方便的数据结构。

```
import java.util.Vector;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Check {

static String print(Vector<String> parts) {
    String str = parts.elementAt(0);

    for(int i=1; i<parts.size(); i++) {
        str += parts.elementAt(i); 
        //System.out.print(i + " : " + parts.elementAt(i) + "\n");
    }

    return str;
}

public static void main(String args[]) {
    String string1;
    String string2;
    String expected;

    string1 = "Sri Lanka National Chess Championship this year and represented Sri Lanka at represented Sri Lanka Universities at the World University Chess Championships.";
    string2 = "<NOUN>Sri Lanka National Chess Championship</NOUN> <NOUN>Sri Lanka</NOUN> <NOUN>Sri Lanka</NOUN> <NOUN>World University Chess</NOUN>";
    expected = "<NOUN>Sri Lanka National Chess Championship</NOUN> this year and represented <NOUN>Sri Lanka</NOUN> at represented <NOUN>Sri Lanka</NOUN> Universities at the <NOUN>World University Chess</NOUN> Championships.";

    Pattern p = Pattern.compile("<NOUN>(.*?)</NOUN>");
    Matcher m = p.matcher(string2);
    Vector<String> parts = new Vector<String>();
    parts.add(string1);

    while(m.find()) {
        for(int i=0; i<parts.size(); i++) {

            //search for used part
            if(parts.elementAt(i).indexOf("<NOUN>")!=-1) {
                continue;
            }

            // search for pattern
            String cur = parts.elementAt(i);
            int disp = cur.indexOf(m.group(1));
            if(disp==-1) {
                continue;
            } else {
                parts.remove(i);
                Vector<String> newParts = new Vector<String>();

                if(disp!=0) {
                    newParts.add(cur.substring(0, disp));
                }

                newParts.add(m.group(0));

                if((disp+m.group(1).length())!=cur.length()) {
                    newParts.add(cur.substring(disp+m.group(1).length()));
                }

                if(i!=0) {
                    parts.addAll(i, newParts);
                } else {
                    parts.addAll(newParts);
                }

                //System.out.print(print(parts) + "\n");
            }           
        }
    }

    string1 = print(parts);
    if(!string1.equals(expected)) {
        System.out.println("Unexpected output !!");
    } else {
        System.out.println("Correct !!");
    }
} 
```

};

为方便起见，您可以将打印方法重命名为字符串化。

# php - 使用 JavaScript 执行一行 PHP（不包含 PHP 文件）

> ID：12016493
> 
> 赞同：0
> 
> 时间：2012-08-18T06:40:49.220
> 
> 标签：php, javascript, jquery, ajax

我需要一种使用 JavaScript 来包含/执行 PHP（当然使用 ajax）的方法，就好像文件是页面的原生文件一样。所以我可以使用诸如 GET 请求之类的东西。

```
<div id="firstAjaxDiv">Default Text</div>
<input id='buttonOneId' name="buttonOne" type="button" value="Do AJAX!"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$("#buttonOneId").click(function() {
    url = ('ajax_server.php');
    $.ajax({
        url: url,
        success: function(data) {
            if(data !="") {
                $('#firstAjaxDiv').html(data);
            }
        },
        error: function() {
            $('#firstAjaxDiv').html('It failed...');
        }
    });
});
</script> 
```

那是我发生 Ajax 的文件。我能够包含该文件并执行 php，但就好像我包含了一个 iFrame，我需要的是让代码表现得好像它是页面原生的一样 - 这是因为我将处理 GET 请求，如果用户点击链接/按钮。我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:44:30.333

啊! 我们再见面。:) 上面的代码将为您提供页面原生的代码。我认为您对如何将其填充到页面中感到困惑。您从服务器文件中获得的响应是​​什么？您希望如何将其实现到页面中？

要使用获取请求，您可以将变量附加到链接中，例如：
ajax_server.php?variableName=someValue

jQuery 的 ajax 默认为 GET 请求，这意味着您可以将这些变量放入 url。
尝试类似的东西

```
var query = "input1=10&input2=20";
url = ('ajax_server.php?'+query); 
```

# javascript - 是什么导致Chrome加载jquery后页面加载延迟？

> ID：12016495
> 
> 赞同：1
> 
> 时间：2012-08-18T06:40:52.840
> 
> 标签：javascript, jquery, google-chrome, v8

是什么导致`jquery.js`加载后延迟？之后`jquery-ui-*.js`呢？这是非常一致的。如您所见，除了 PHP 文件之外的所有资源都是从缓存中加载的——这让我相信 Chrome 可能正在对它们施展 V8 魔法？

有趣的是，文件不会发生这种情况`bootstrap-*.js`。也许它们要小得多？

![页面加载缓慢](../Images/53bed7975bef94fb9d4f06756f55cde3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:48:28.220

jquery 是 jquery-ui 的一个依赖。基本上，在 jquery 完成之前无法加载 jquery-ui。

# iphone - 标签文本未换行

> ID：12016496
> 
> 赞同：0
> 
> 时间：2012-08-18T06:40:56.763
> 
> 标签：iphone, ios, xcode

我在表格视图中分配了一个标签，但是标签中的文本在太长时不会换行到下一行。

我的代码如下：

```
UILabel *food_lbl=[[UILabel alloc]init];
foodspe = [NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults]valueForKey:@"food"]];
foodspe = [foodspe stringByReplacingOccurrencesOfString:@"(" withString:@""];
foodspe = [foodspe stringByReplacingOccurrencesOfString:@")" withString:@""];
foodspe = [foodspe stringByReplacingOccurrencesOfString:@"\n" withString:@""];
foodspe = [foodspe stringByReplacingOccurrencesOfString:@" " withString:@""];

food_lbl.text = foodspe;
food_lbl.numberOfLines=2;
food_lbl.lineBreakMode=UILineBreakModeWordWrap;

[food_lbl setFrame:CGRectMake(100, 0, 150, 100)];
[food_lbl setFont:[UIFont boldSystemFontOfSize:25.0f]];
[cell.contentView addSubview:header]; 
```

例如`food_lbl`是`paneer,panjabi,pasta,pizza,Puff,chocolates`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:48:33.327

转到 xib 中的 UILabel 属性并使 Autoshrink YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:44:52.900

Have you tried this ?

```
food_lbl.numberOfLines=0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:59:47.953

我会建议两个选择，

*   使用此方法查找文本标签所需的高度并将其设置为：

`CGFloat height = [foodspe sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(food_lbl.frame.size.width, 500) lineBreakMode:UILineBreakModeWordWrap].height;`

*   在输入文本的每个单词之间添加一个空格。那就是把它`paneer,panjabi,pasta,pizza,Puff,chocolates`改成`paneer, panjabi, pasta, pizza, Puff, chocolates`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T09:14:47.767

如果您列出的代码（如下所示）在您的项目中完全使用，那么您添加了错误的标签。

```
UILabel *food_lbl=[[UILabel alloc]init];
...
[cell.contentView addSubview:header]; 
```

您正在添加**标头**而不是新创建的**food_lbl**。

# sql - 从 t-SQL 中的两列中选择 DISTINCT

> ID：12016499
> 
> 赞同：1
> 
> 时间：2012-08-18T06:41:25.353
> 
> 标签：sql, sql-server, tsql, select, distinct

说，如果我有下表：

```
CREATE TABLE tbl (ID INT, Type UNIQUEIDENTIFIER)
INSERT tbl VALUES
(1, N'D9D09D5B-AF63-484C-8229-9762B52972D0'),
(2, N'D9D09D5B-AF63-484C-8229-9762B52972D6'),
(3, N'D9D09D5B-AF63-484C-8229-9762B52972D9'),
(3, N'D9D09D5B-AF63-484C-8229-9762B52972D2'),
(4, N'D9D09D5B-AF63-484C-8229-9762B52972D0') 
```

我需要选择不同的 ID 列，但也需要选择与之关联的任何类型列值。如果我执行以下操作：

```
select distinct id, type from tbl 
```

当我只需要这个时，它会返回整个表：

```
1, N'D9D09D5B-AF63-484C-8229-9762B52972D0'
2, N'D9D09D5B-AF63-484C-8229-9762B52972D6'
3, N'D9D09D5B-AF63-484C-8229-9762B52972D9'
4, N'D9D09D5B-AF63-484C-8229-9762B52972D0' 
```

我知道这一定很简单，但是我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:46:16.527

根据您的评论，您需要选择列表中的第一个类型。所以你可以通过使用这样的子查询来实现这一点：

```
SELECT id, (SELECT TOP 1 type FROM tbl a WHERE id = b.id)
FROM tbl b GROUP BY id 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!3/96807/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T06:45:10.403

```
select id, min(type) from tbl group by id 
```

# sql - 查询以使数据分组

> ID：12016500
> 
> 赞同：0
> 
> 时间：2012-08-18T06:41:32.683
> 
> 标签：sql

我有一些这样的数据

```
datetime              value
2012-01-01 16:21:52     6
2012-01-01 16:22:02     5
2012-01-01 16:22:12     2
2012-01-01 16:22:22     3
2012-01-01 16:22:32     6
2012-01-01 16:22:42     9
2012-01-01 16:22:52     1
2012-01-01 16:23:02     3
2012-01-01 16:23:12     16
2012-01-01 16:24:02     7
2012-01-01 16:24:12     2
2012-01-01 16:24:22     6
2012-01-01 16:24:32     1
2012-01-01 16:24:42     8
2012-01-01 16:24:52     12
2012-01-01 16:25:02     15
2012-01-01 16:25:12     41
2012-01-01 16:25:22     29
2012-01-01 16:25:32     6
2012-01-01 16:25:42     6
2012-01-01 16:25:52     20
2012-01-01 16:26:02     10
2012-01-01 16:26:12     16
2012-01-01 16:26:22     14
2012-01-01 16:26:32     10
2012-01-01 16:26:42     6
2012-01-01 16:26:52     9
2012-01-01 16:27:02     7
2012-01-01 16:27:12     7
2012-01-01 16:27:22     17 
```

我需要一个查询来对值 < 10 的条件的数据进行分组，我需要如下结果

```
from                     to                   count
2012-01-01 16:21:52     2012-01-01 16:23:02     8
2012-01-01 16:24:02     2012-01-01 16:24:42     5
2012-01-01 16:25:32     2012-01-01 16:25:42     2
2012-01-01 16:26:42     2012-01-01 16:27:12     4 
```

我想知道如何获得“值”小于 10 的组中的数据范围和数量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:44:15.670

如果您可以访问`ROW_NUMBER()`.
- 这存在于更新版本的 Oracle、SQL Server 等
- MySQL 中不存在

*请确认您使用的是哪个 RDBMS。*

如果您确实可以访问`ROW_NUMBER()`这里是一种方法...

```
WITH
  gaps_and_islands AS
(
  SELECT
    *,
    CASE WHEN value < 10 THEN 1 ELSE 0 END as is_island,
    ROW_NUMBER() OVER (                                                    ORDER BY value) AS land_level,
    ROW_NUMBER() OVER (PARTITION BY CASE WHEN value < 10 THEN 1 ELSE 0 END ORDER BY value) AS water_level
  FROM
    yourData
)
SELECT
  is_island,
  MIN(datetime_field)    AS from_datetime,
  MAX(datetime_field)    AS to_datetime,
  COUNT(*)               AS count_of_rows
FROM
  gaps_and_islands
GROUP BY
  is_island,
  (land_level - water_level)
ORDER BY
  MIN(datetime_field) 
```

这是您第一次看到它时非常新颖的方法。因此，我将通过附加到您的数据来向您展示它是如何工作的......

```
datetime              value   land_level  water_level  (land_level-water_level)
2012-01-01 16:21:52     6          1             1                0
2012-01-01 16:22:02     5          2             2                0
2012-01-01 16:22:12     2          3             3                0
2012-01-01 16:22:22     3          4             4                0
2012-01-01 16:22:32     6          5             5                0
2012-01-01 16:22:42     9          6             6                0
2012-01-01 16:22:52     1          7             7                0
2012-01-01 16:23:02     3          8             8                0
2012-01-01 16:23:12     16         9            (1)              (8)
2012-01-01 16:24:02     7         10             9                1
2012-01-01 16:24:12     2         11            10                1
2012-01-01 16:24:22     6         12            11                1
2012-01-01 16:24:32     1         13            12                1
2012-01-01 16:24:42     8         14            13                1
2012-01-01 16:24:52     12        15            (2)             (13)
2012-01-01 16:25:02     15        16            (3)             (13)
2012-01-01 16:25:12     41        17            (4)             (13)
2012-01-01 16:25:22     29        18            (5)             (13)
2012-01-01 16:25:32     6         19            14                5
2012-01-01 16:25:42     6         20            15                5
2012-01-01 16:25:52     20        21            (6)             (15)
2012-01-01 16:26:02     10        22            (7)             (15)
2012-01-01 16:26:12     16        23            (8)             (15)
2012-01-01 16:26:22     14        24            (9)             (15)
2012-01-01 16:26:32     10        25           (10)             (15)
2012-01-01 16:26:42     6         26            16               10
2012-01-01 16:26:52     9         27            17               10
2012-01-01 16:27:02     7         28            18               10
2012-01-01 16:27:12     7         29            19               10
2012-01-01 16:27:22     17        30           (11)             (19) 
```

`land_level`只是给每个连续记录一个从 1 开始的行 id 。

是一样的`water_level`，只是有两个列表（分区）。
- 所有记录`value`都`< 10`从 1 开始获得自己的顺序 ID。
- 所有记录`value`都`>= 10`从 1 开始获得自己的顺序 ID。

*（这可以更容易看到，因为我把 () 放在`water_level`where `value`is周围`>= 10`）*

然后，当您将一个与另一个分开时，就会发生“技巧”。对于在同一间隙或岛屿中彼此相邻的所有记录，您将获得一个唯一标识符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T06:46:07.370

```
select
from = min(datetime),
to = max(datetime),
count = count(*)
from table_name
where value < 10
group by value 
```

需要注意的一点是，这些列名可能不起作用，因为它们是 DB 关键字。

# node.js - 当我使用 fs.readFile() 时，我可以在 node.js 中使用另一种编码吗

> ID：12016503
> 
> 赞同：1
> 
> 时间：2012-08-18T06:42:01.607
> 
> 标签：node.js

我可以在 node.js 中对 fs.readFile() 使用 tis620 或 windows874 编码吗

当我在数据库中使用“utf8”时显示�或？。

谢谢。

Satit Rianpit

# vb.net - 如何使用 BindingSource 更新表

> ID：12016507
> 
> 赞同：0
> 
> 时间：2012-08-18T06:44:26.280
> 
> 标签：vb.net

以下代码抛出： 位置 54 处没有行。这仅在插入新记录时发生。在编辑模式下它工作正常。

row = Me.StockTranBindingNavigator.BindingSource.Position Me.DataSet1.Tables("StockTran").Rows(row).Item("CostPrice") = "1275"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:06:08.500

做类似的事情：

```
 Dim row As Integer = BindingSource1.Position
    Dim drv As DataRowView = BindingSource1.Current
    drv("CostPrice") = "1275"
    BindingSource1.EndEdit() 
```

# mysql - 只为一列插入不同的值

> ID：12016510
> 
> 赞同：0
> 
> 时间：2012-08-18T06:44:34.587
> 
> 标签：mysql, insert, unique-constraint, distinct-values

```
id   |   a   |      b      |
-----------------------------
1    |  xyz  |     abc     | 
```

这是我的表的结构。列`id`是`AUTO_INCREMENT`。我只想在表中插入那些`'b'`不是`abc`. 例如-

这不应该插入任何东西：

```
insert into table_name(`a`,`b`) values("xyz","abc"); 
```

但是，这应该插入新记录：

那就是它应该只检查 column `b`。

```
insert into table_name(`a`,`b`) values("xyz","zzzz"); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:54:08.027

You could add, `UNIQUE` constraints on your `column b`

When a duplicate value is served for insertion, it would throw an SQL exception, instead of inserting, you can handle this exception in PHP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:57:58.720

您的选择：
1.在 b 列上的插入查询中使用 unique()
2.运行快速 SELECT 查询以检查现有列（最不喜欢） 它也可以使用 if 子句嵌入到更新查询中

参考[如何在 MySQL 中“如果不存在则插入”？](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)

# html - 环境 's height to maximum document's height

> ID：12016511
> 
> 赞同：0
> 
> 时间：2012-08-18T06:44:36.187
> 
> 标签：html, css, iframe

I have the following code:

```
<iframe src="http://www.externalsite.com/" style=""/> 
```

Assume the total height of www.externalsite.com to be X pixels. X is unknown to me. How do I set height of the iframe to X pixels using CSS or other methods but no JavaScript?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:37:32.073

试试下面的代码

```
<body style="margin:0px;padding:0px;overflow:hidden">
<iframe src="http://www.youraddress.com" frameborder="0"   style="overflow:hidden;height:100%;width:100%" height="100%" width="100%"></iframe>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:53:03.677

```
<iframe src="http://www.externalsite.com/" width="200" height="X"></iframe> 
```

see here for more details: [http://www.w3schools.com/html/html_iframe.asp](http://www.w3schools.com/html/html_iframe.asp)

# java - calling java file in jsp

> ID：12016515
> 
> 赞同：0
> 
> 时间：2012-08-18T06:44:54.497
> 
> 标签：java, jsp, email

i am creating a wepage where i want to send a mail using gmail smtp.i tried with jsp page but i did not work so ihave craeted a code in core java which is successfully sending email.now i want to use this java code in my jsp page .i tried i but got errors

java code:

```
import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SSL {
    public static void main(String [] args){
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication("prakash.d2222","password");
                }
            });

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("from@no-spam.com"));
            message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse("prakash_d22@rediffmail.com"));
            message.setSubject("hi");
            message.setText("12345" +
                    "\n\n No spam to my email, please!");

            Transport.send(message);

            System.out.println("Done");

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

my jsp code

```
<%@ page contentType="text/html; charset=iso-8859-1" language="java" import="java.sql.*" errorPage="" %>

                <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

                <html>
                <body>
                <jsp:useBean id="link" scope="application" class = "SSL.class" />
<jsp:setProperty name="link" property="*" />

                </body>
                </html> 
```

and error shown is

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: /pizza/page/ssl.jsp(7,4) The value for the useBean class attribute SSL.class is invalid.
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:148)
    org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1233)
    org.apache.jasper.compiler.Node$UseBean.accept(Node.java:1178)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2411)
    org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2417)
    org.apache.jasper.compiler.Node$Root.accept(Node.java:495)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)
    org.apache.jasper.compiler.Generator.generate(Generator.java:3459)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:231)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:354)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717 
```

so please help me as i am new to jsp.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:51:27.920

考虑以下建议：

1.  `.class`文件必须放在 WEB-INF/classes 下
2.  *永远不要*在默认包中创建*类。*

* * *

```
package com.me;

public class SSL { 
    public void show(){
         ///
    }
} 
```

而且我在您的类*中看不到*任何`getter/setter`方法，因此无需`<jsp:setProperty/>`在 jsp 页面中使用操作并且不包含`class`属性扩展。

```
<jsp:useBean id="link" scope="application" class="com.me.SSL" /> 
```

编辑：

如果您*不*使用 IDE (netbeans/eclipse)，那么您*必须*在`/tomcat x.x/webapps/`.

```
/webapp   <--- This is known as `context` folder
|
|-------/WEB-INF
|       |
|       |-----------/classes
|       |                  |---/com/me/SSL.class
|       | 
|       |-----------/lib
|                    mail.jar
| sample.jsp 
```

您必须在 JSP 页面中调用 show() 方法：

```
<jsp:useBean id="link" scope="application" class="com.me.SSL" />
<%
  link.show();
%> 
```

或者

```
<%
   com.me.SSL obj=new com.me.SSL();
   obj.show();
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T06:42:42.880

首先修改你的类**SSL**

```
public class SSL {

 public  void SendMail(){
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication("prakash.d2222","password");
                }
            });

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("from@no-spam.com"));
            message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse("prakash_d22@rediffmail.com"));
            message.setSubject("hi");
            message.setText("12345" +
                    "\n\n No spam to my email, please!");

            Transport.send(message);

            System.out.println("Done");

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

只需创建一个自定义 bean 类，该类将与您一起使用**SSL**类并将其命名为**SSLImpelmenter**

你的班级在哪里

```
public class SSLImpelmenter
{
   private SSL objSSL = new SSL();

   //getter setter methods for objSSL
} 
```

现在在你的 JSP 中

```
//Add import for SSL Class
//Now Use useBean tag
<jsp:useBean id="link" scope="application" class = "SSLImpelmenter" />

SSL objSSLJSP = link.getObjSSL(); 
objSSLJSP.SendMail(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:07:18.047

直接的问题是您在“class=...”属性中使用的是文件名而不是类名。由于你的类是在默认包中声明的（因为你的类中没有`package`声明），你应该写成`useBean`：

```
<jsp:useBean id="link" scope="application" class="SSL" /> 
```

如果您还没有这样做，您应该确保“SSL.class”文件位于您的 web 应用程序的类路径中。例如，它可能位于“/WEB-INF/classes/”目录中，也可能位于“/WEB-INF/lib/”中的 JAR 文件中。

# symfony - Reload a specific controller after Ajax Call

> ID：12016517
> 
> 赞同：1
> 
> 时间：2012-08-18T06:45:03.707
> 
> 标签：symfony

## I have embed a controller in a template:

```
{% render "AcmeUserBundle:User:showUsersList"} %}

<a onClick="changeStatus({{user.getUserId()}})" 
```

The aim is simple:

*   The user clicks on the link which updates the status via ajax (this works fine)
*   Reload the embedded controller only, not the entire page!

At the moment, I managed to do this, by reloading the entire page using `document.location.reload(true);` This has no point so far...

## Here is the ajax part:

```
//...
function changeStatus(userId){
    $.ajax({
        type: "POST",
        url: ajaxControllerPath,
        data: "userId="+userId,
        success: function(){
            document.location.reload(true); 
        }
    });  
} 
```

## How would you reload the embedded controller only?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:07:35.210

到目前为止，这是有效的：

将控制器嵌入到 div 中：

```
<div id="block1">
    <a onClick="changeStatus({{user.getUserId()}})"
</div> 
```

并在 ajax 调用结束时使用 javascript 重新加载控制器

```
$('#block1').load("{{ path('show_users_list') }}"); 
```

有人有更好的建议吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:59:07.170

当您调用 ajax 控制器时，此控制器可以呈现 showUsersList 模板并将生成的 html 作为 json 对象返回：

```
$answer['html'] = $this->forward('AcmeUserBundle:User:showUsersList')->getContent(); 
$response = new Response();                                                
$response->headers->set('Content-type', 'application/json; charset=utf-8');
$response->setContent(json_encode($answer));
return $response 
```

然后在你的 javascript 中使用这个生成的 html 来替换页面的控制器部分的内容（使用 div 或类似的来识别它）

```
<div id="changethis">{% render "AcmeUserBundle:User:showUsersList"} %}</div>

function changeStatus(userId){
    $.ajax({
        type: "POST",
        url: ajaxControllerPath,
        data: "userId="+userId,
        success: function(returnData){
            $('#changethis').html(returnData['html']);
        }
    });  
} 
```

# html - 不带id访问当前脚本标签

> ID：12016520
> 
> 赞同：0
> 
> 时间：2012-08-18T06:45:45.780
> 
> 标签：html

我想写一个小脚本，一旦执行就会删除自己（为了记忆）。

为此，我添加了一个 ID。

有没有办法在不使用 ID 的情况下访问代码来自代码本身的脚本元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:52:18.153

您可以根据它的索引来访问它（即它是第三个脚本标签，第二个等）

```
var scriptNum = 0;
document.getElementsByTagName('script')[scriptNum]; 
```

# php - 在 zendForms 的 MultiCheckbox 中为每个元素设置 id 和 class

> ID：12016521
> 
> 赞同：2
> 
> 时间：2012-08-18T06:45:47.650
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我们有一个使用 zend 框架的 php 项目，并且在一个页面中我们有多重复选框，我使用此代码创建 multiCheckBox：

```
$mozoo      = new Zend_Form_Element_MultiCheckbox('mozoo'); 
```

然后我使用此代码向其中添加元素

```
$mozoo->addMultiOption ($tagRecord['name'],$tagRecord['name']) 
```

$tagRecord 是我从数据库中读取的记录。一些选项是彼此的父母，我想使用 Jquery 制作漂亮的 multiCheckBox 并显示和隐藏这些元素我必须将 chekboxes 父母存储在某个地方所以我认为将它设置在 id 和 class 中会很好（class =父级的 id，id = 复选框本身）。

如何设置选项fot多选项框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:58:35.407

ZF 将自动创建具有每个自己的 id 的多选项，但是不可能在每个多选项上传递类值，好吧，除非您进入 ZF 核心并自己修复它，我不建议这样做。

更好的解决方案是实现您自己的装饰器，它将以与 viewRenderer 装饰器不同的方式呈现多复选框元素（通过调用 View/Helper/FormMultiCheckbox），但这种方法需要大量编码和更深入地了解表单装饰器的方式工作。

为了帮助您了解表单装饰器，请参见[此处](http://framework.zend.com/manual/en/zend.form.decorators.html)

# html - 如何不在 DIV 周围环绕文本？

> ID：12016527
> 
> 赞同：3
> 
> 时间：2012-08-18T06:46:34.640
> 
> 标签：html, css, word-wrap

我想我彻底搜索了这个网站，但找不到我的问题的答案；我也认为这很简单，但经过几个小时的困惑，我已经放弃并决定寻求帮助......

这是我的问题；我有一个 DIV，里面有两个 DIV；第一个 DIV，“snapshot”包含使用 websnapr.com 返回网站 snapshpt 的脚本；快照大小为 202 x 150，因此我将该 DIV 的宽度定义为 230 像素。第二个 DIV，“描述”，应该显示在该快照的右侧，它包含一些文本。我的问题是末尾的文本围绕“快照”流动，即在它下方，我希望它保持一致，始终在 DIV“快照”的右侧，而不是在他下方。

所以，你看到第 1 到第 10 行很好；我希望第 11 行和第 12 行以及其余文本在第 1-10 行下方对齐，而不是在快照下方！

这是代码：

```
 <div class="entry">
  <h2 align="center">Some title here...</h2>
  <div id="snapshot"><script type="text/javascript">wsr_snapshot('some link here', 'some pass here', 's');</script></div>
  <div id="description"><p>Line 1<br>Line 2<br>Line 3<br>Line 4<br>Line 5<br>Line 6<br>Line 7<br>Line 8<br>Line 9<br>Line 10<br>Line 11<br>Line 12<br></p>
<p align="left">Link:<br>
    <a href="#" target="_blank">some link here</a></p></div>
</div> 
```

这是这些 ID 和类的 CSS：

```
.entry {margin:0 0 20px 0; border:2px solid #fff; background:#e6e6e6 url(images/bg.png) repeat-x; color:#333; padding:10px 10px 0 10px; min-height:200px; height:auto !important; height:200px; }

#snapshot {float:left; width:230px;}
#description {display: block; margin-left:240 px;} 
```

我尝试了这两个 DIV 的各种属性 - 显示、清除、溢出等，但无济于事；希望有人能阐明我在这里缺少的东西...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T06:51:31.910

啊哈：你的左边距规则之间`240`和之间有一个额外的空间。`px``#description`

以下[作品](http://jsfiddle.net/4SWBZ/)：

```
#description {display: block; margin-left:240px;} 
```

# ssh - 如果我通过 ssh 运行“git push”，那么它会输出“权限被拒绝（公钥）”

> ID：12016529
> 
> 赞同：1
> 
> 时间：2012-08-18T06:47:25.453
> 
> 标签：ssh, github

我像这样设置 ./git/config 文件。

```
[remote "origin"]
    url = https://github.com/haradashinya/dotfiles.git 
```

它推送了我的 github 存储库，但它要求我提供用户名和密码。所以，我将我的 url 设置为 ssh 样式，如下所示：

```
url = git@github.com:haradashinya/dotfiles.git 
```

但它会输出一条错误消息，说“权限被拒绝（公钥）”。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:13:28.797

即使您已定义 ssh 密钥，您也需要确保已定义 HOME（例如，在 Windows 上不是这种情况，除非您使用 msysgit 附带的 git-cmd.bat 的 DOS 会话）：请参阅“[尝试“安装”github，`.ssh`目录不存在](https://stackoverflow.com/questions/8514097/trying-to-install-github-ssh-dir-not-there/8531157#8531157)“。

在同一个 HOME 目录中，如果您仍想使用 https 地址，您还可以记录您的 https GitHub 凭据（用户名和密码）：请参阅“[更改 github 帐户 mac 命令行](https://stackoverflow.com/questions/9551448/change-github-account-mac-command-line/9551540#9551540)”以获取示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:51:14.273

您需要在此处将 SSH 密钥添加到您的 github 帐户：[https ://github.com/settings/ssh](https://github.com/settings/ssh)

如果您还没有生成 SSH 密钥，或者您不知道如何生成 SSH 密钥，或者您不了解如何将其添加到您的 github 帐户中，github 在此处提供了详细说明：[https://help。 github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:57:47.300

我遵循了[https://help.github.com/articles/error-permission-denied-publickey](https://help.github.com/articles/error-permission-denied-publickey)说明。

我通过 ssh-add 'my-id-rsa-path' 命令解决了我的问题。

`ssh-add ~/.ssh/id_rsa; ssh -vT git@github.com #-> success!`

感谢帮助！

# sql - 用于保存历史的列历史

> ID：12016539
> 
> 赞同：1
> 
> 时间：2012-08-18T06:49:57.053
> 
> 标签：sql, sql-server

我想要一个包含任务信息的表。PriorityId、StateId、AssignedToUserId 等。这些列可以更新。我希望能够列出任务的历史记录，显示更改以及进行更改的用户。该表将有一个 UpdateUserId 表，其中包含进行更新的用户。

我应该制作一个相同的“myTable_History”表，然后使用触发器将整个更新（或插入）的行发送到历史表吗？还是有更好的方法来做到这一点？

不确定它是否有区别，但我正在使用软删除......和一个标识列作为主表的主要 ket。

现在肯定是显示更改的好方法，但这是另一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:29:27.297

使用行级和列级跟踪

更改跟踪使应用程序能够跟踪用户所做的所有更改，这是一种内置方法

[http://msdn.microsoft.com/en-us/library/ms172023(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms172023(v=sql.90).aspx) http://msdn.microsoft.com/en-us/library/bb964713.aspx

示例 [http://blogs.msdn.com/b/davidhardin/archive/2011/02/06/sql-server-2008-column-change-tracking.aspx](http://blogs.msdn.com/b/davidhardin/archive/2011/02/06/sql-server-2008-column-change-tracking.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:53:05.027

最简单的方法是使用 CDC。关于如何做到这一点的大量资源。

# php - 通过 SMS 更改数据库（twilio？）

> ID：12016540
> 
> 赞同：1
> 
> 时间：2012-08-18T06:49:59.207
> 
> 标签：php, sms, twilio

所以我有一个 Web 应用程序，假设有 2 个子域**a.domain.com**和**b.domain.com**

如果“ **a** ”上有更新——他们当前会收到一封电子邮件，并且必须登录该网站并做一些事情。有没有办法（也许通过 Twilio ？？）我可以通过 SMS 做到这一点？

基本上：

**1 - “ a.subdomain.com** ”有用户更新

2 - “ **a** ”的“所有者”收到一条短信，询问“是”或“否”（短信可以通过 PHP 或 twilio 发送？）

3 - “所有者”回答​​“是”并`This`发生。如果他们回答“不”，则什么也不会发生。

`this`本质上是对 MySQL 数据库的更改，将 a 更改`pst_stt`为三个值之一，并`pst_dte`更改为 PHP 的`date(Y-m-d)`函数。

我知道我可以通过 SMS 发送文本。

有没有办法接收并在收到时做某事？都没有“ **b** .domain.com”受到影响？例如，“ **a** ”将他们的电话号码设置为“555-5555”。那个数字是一条询问是或否的文本。他们发送是->

```
$text = (((the reply text received)));
$sender = (((the senders phone number)));
$phone = option('phone_number', 'options-page');

if($text == 'yes' && $sender === $phone){
    /*Do the simple Database update*/
} 
```

我不相信有一种方法可以通过 php 接收短信......所以像 Twilio 这样的东西会做我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:39:19.347

Twilio 可以为您提供一个电话号码来接收 SMS 消息。

因此，用户将回复您的应用程序将处理的 SMS。

如果您查看 Twilio 上的指南，它应该可以帮助您更好地了解：

[https://www.twilio.com/docs/howto/sms-notifications-and-alerts](https://www.twilio.com/docs/howto/sms-notifications-and-alerts)

[https://www.twilio.com/docs/quickstart](https://www.twilio.com/docs/quickstart)

[https://www.twilio.com/docs/quickstart/php/sms/hello-monkey](https://www.twilio.com/docs/quickstart/php/sms/hello-monkey)

[https://www.twilio.com/sms](https://www.twilio.com/sms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:16:19.877

您可以使用[SMSIfied](http://smsified.com/)来做到这一点。他们[在 GitHub 上有一个 PHP 库，](https://github.com/smsified/smsified-php)可以简化将 REST API 与 PHP 结合使用。他们在 GitHub 主页上展示了一个使用 PHP 接收文本消息的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:21:13.413

Twillio 让这件事变得非常容易。您可以查看他们的示例页面。这是一项非常棒的服务。如果您知道手机的服务提供商，您还可以免费向手机发送短信。您只需发送电子邮件至 thenumber@provider.com。有时它的@txt.provider.com。

# c# - 如何从 PhotoChooserTask 中保存图片

> ID：12016545
> 
> 赞同：2
> 
> 时间：2012-08-18T06:50:41.980
> 
> 标签：c#, windows-phone-7, bitmap

我想保存使用 PhotoChooserTask 选择的照片，但我不确定正确的方法。到目前为止，我已经实现了 PhotoChooserTask_Completed 方法，但是将它保存到位图的正确方法是什么？

编辑：添加了基本实现。目标是将 hubtile 图像更新为用户从 PhotoChooserTask 中选择的图像。

注意：我已将 Settings 类和 TileItem 类放在底部以供快速参考。

主页.xaml

```
string shareJPEG = "shareImage.jpg";
string linkJPEG = "linkImage.jpg";

BitmapImage shareImg;
BitmapImage linkImg;

public MainPage()
    {
        InitializeComponent();

        CreateHubTiles();

        photoChooserTask = new PhotoChooserTask();
        photoChooserTask.Completed += new EventHandler<PhotoResult>(photoChooserTask_Completed);
    }

public void CreateHubTiles()
    {     
        if (Settings.shareImageUpdated.Value == true)
        {
            //Settings.shareImage.Value = new BitmapImage();
            shareImg = new BitmapImage();

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(shareJPEG, FileMode.Open, FileAccess.Read))
                {
                    //Settings.shareImage.Value.SetSource(fileStream);
                    shareImg.SetSource(fileStream);

                    //this.img.Height = bi.PixelHeight;
                    //this.img.Width = bi.PixelWidth;

                }
            }
            //this.img.Source = bi;
        }
        else
        {
            //Settings.shareImage.Value = new BitmapImage(new Uri("/Images/shareStatusImage.jpg", UriKind.Relative));
            shareImg = new BitmapImage(new Uri("/Images/shareStatusImage.jpg", UriKind.Relative));
        }

        if (Settings.linkImageUpdated.Value == true)
        {
            //Settings.linkImage.Value = new BitmapImage();
            linkImg = new BitmapImage();

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(linkJPEG, FileMode.Open, FileAccess.Read))
                {
                    //Settings.linkImage.Value.SetSource(fileStream);
                    linkImg.SetSource(fileStream);

                    //this.img.Height = bi.PixelHeight;
                    //this.img.Width = bi.PixelWidth;

                }
            }
            //this.img.Source = bi;
        }
        else
        {
            //Settings.linkImage.Value = new BitmapImage(new Uri("/Images/shareStatusImage.jpg", UriKind.Relative));
            linkImg = new BitmapImage(new Uri("/Images/shareLinkImage.jpg", UriKind.Relative));
        }

        List<TileItem> tileItems = new List<TileItem>() 
        {                
            //new TileItem() { ImageUri = Settings.shareImage.Value, Title = "status", /*Notification = "last shared link uri",*/ Message = Settings.statusMessage.Value, GroupTag = "TileGroup", TileName = AppResource.Main_MainPage_HubTile_Status_Title },
            new TileItem() { ImageUri = shareImg, Title = "status", /*Notification = "last shared link uri",*/ Message = Settings.statusMessage.Value, GroupTag = "TileGroup", TileName = AppResource.Main_MainPage_HubTile_Status_Title },

            //new TileItem() { ImageUri = Settings.linkImage.Value, Title = "link", /*Notification = "last shared status message",*/ Message = Settings.linkUri.Value, GroupTag = "TileGroup", TileName = AppResource.Main_MainPage_HubTile_Link_Title },
            new TileItem() { ImageUri = linkImg, Title = "link", /*Notification = "last shared status message",*/ Message = Settings.linkUri.Value, GroupTag = "TileGroup", TileName = AppResource.Main_MainPage_HubTile_Link_Title },
        };

        this.tileList.ItemsSource = tileItems;
    }

public void changePictureMenuItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        var menuItem = (MenuItem)sender;
        tileItem = menuItem.DataContext as TileItem;  //for PhotoChooserTask_Completed              

        try
        {
            photoChooserTask.Show();
        }
        catch (System.InvalidOperationException ex)
        {
            //MessageBox.Show("An error occurred");
            MessageBox.Show(AppResource.Main_MainPage_ContextMenu_ChangePicture_Error_Message);
        }
    }

void photoChooserTask_Completed(object sender, PhotoResult e)
    {
        //Debug.WriteLine("***\t In photoChooserTask_Completed function of ChoosePhotoPage\t ***");

        if (e.TaskResult == TaskResult.OK)
        {
            //get the correct hubtile that was clicked and set image source to respective hubtile
            string tileTitle = tileItem.Title.ToString();

            switch (tileTitle)
            {
                case "status":

                    tileItem.ImageUri.SetSource(e.ChosenPhoto);  //sets the tile image immediately, but does not persist when the MainPage is navigated away

                    using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        if (myIsolatedStorage.FileExists(shareJPEG))
                        {
                            myIsolatedStorage.DeleteFile(shareJPEG);
                        }

                        IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(shareJPEG);

                        BitmapImage bitmap = new BitmapImage();
                        bitmap.SetSource(e.ChosenPhoto);
                        WriteableBitmap wb = new WriteableBitmap(bitmap);

                        // Encode WriteableBitmap object to a JPEG stream. 
                        Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);

                        //wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85); 
                        fileStream.Close();
                    }

                    Settings.shareImageUpdated.Value = true;  //simple boolean value that exists in isolated storage

                    break;
                case "link":
                    tileItem.ImageUri.SetSource(e.ChosenPhoto);  //sets the tile image immediately, but does not persist when the MainPage is navigated away

                    using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        if (myIsolatedStorage.FileExists(linkJPEG))
                        {
                            myIsolatedStorage.DeleteFile(linkJPEG);
                        }

                        IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(linkJPEG);

                        BitmapImage bitmap = new BitmapImage();
                        bitmap.SetSource(e.ChosenPhoto);
                        WriteableBitmap wb = new WriteableBitmap(bitmap);

                        // Encode WriteableBitmap object to a JPEG stream. 
                        Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);

                        //wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85); 
                        fileStream.Close();
                    } 

                    Settings.linkImageUpdated.Value = true;

                    break;
            }            
     } 
```

Settings 和 TileItem 类：

Settings.cs（使用键/值对将数据存储在隔离存储中）

```
public static readonly Setting<BitmapImage> shareImage = new Setting<BitmapImage>("shareImage", new BitmapImage(new Uri("/Images/shareStatusImage.jpg", UriKind.Relative)));
public static readonly Setting<BitmapImage> linkImage = new Setting<BitmapImage>("linkImage", new BitmapImage(new Uri("/Images/shareLinkImage.jpg", UriKind.Relative)));

public static readonly Setting<bool> shareImageUpdated = new Setting<bool>("shareImageUpdated", false);
public static readonly Setting<bool> linkImageUpdated = new Setting<bool>("linkImageUpdated", false); 
```

TileItem.cs

```
public class TileItem
{
    //public string ImageUri
    //{
    //    get;
    //    set;
    //}
    public BitmapImage ImageUri
    {
        get;
        set;
    }

    public string Title
    {
        get;
        set;
    }

    public string Notification
    {
        get;
        set;
    }

    public bool DisplayNotification
    {
        get
        {
            return !string.IsNullOrEmpty(this.Notification);
        }
    }

    public string Message
    {
        get;
        set;
    }

    public string GroupTag
    {
        get;
        set;
    }

    //for translation purposes (bound to HubTile Title on MainPage) 
    public string TileName
    {
        get;
        set;
    }
} 
```

运行此应用程序时，我没有收到任何调试错误，但似乎位图未正确保存或检索，因为原始平铺图像是应用程序离开 MainPage 时唯一保留的图像。我在这里做错了什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:22:17.817

这是将图像存储在隔离存储中并将其加载回来的工作代码。核实。

```
string tempJPEG = "image.jpg";

    void photoTask_Completed(object sender, PhotoResult e)
    {
        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (myIsolatedStorage.FileExists(tempJPEG))
            {
                myIsolatedStorage.DeleteFile(tempJPEG);
            }

            IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(tempJPEG);

            BitmapImage bitmap = new BitmapImage();
            bitmap.SetSource(e.ChosenPhoto);
            WriteableBitmap wb = new WriteableBitmap(bitmap);

            // Encode WriteableBitmap object to a JPEG stream.
            Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);

            //wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
            fileStream.Close();
        }
    }

//Code to load image from IsolatedStorage anywhere in your app
    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        BitmapImage bi = new BitmapImage();

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(tempJPEG, FileMode.Open, FileAccess.Read))
            {
                bi.SetSource(fileStream);
                this.img.Height = bi.PixelHeight;
                this.img.Width = bi.PixelWidth;
            }
        }
        this.img.Source = bi;
    } 
```

# blackberry - 我可以在不显示黑莓取景器的情况下拍照吗？

> ID：12016547
> 
> 赞同：-1
> 
> 时间：2012-08-18T06:51:02.157
> 
> 标签：blackberry, java-me

是否可以通过设备相机以编程方式拍摄照片，而无需在 BlackBerry 的应用程序屏幕上显示取景器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:00:06.037

不可以，您必须先启动相机预览并将其显示在屏幕上，然后才能以编程方式拍摄照片。

# c# - 没有登录控制的 ASP.NET 登录表单身份验证

> ID：12016552
> 
> 赞同：3
> 
> 时间：2012-08-18T06:51:47.533
> 
> 标签：c#, asp.net-membership, form-authentication

我正在使用 ASP.NET 成员资格并在注册页面上尝试在没有登录控件的情况下登录。

当用户单击注册按钮时，控件转到 redirect.aspx 页面。但是在该页面中，当我尝试重定向到成员主页时，它会引发以下错误。

错误 -

```
Unable to evaluate expression because the code is optimized or a native frame
is on top of the call stack. 
```

Web.config -

```
<authentication mode="Forms">
    <forms name=".SSOAuth" loginUrl="login.aspx" defaultUrl="Redirect.aspx"
           protection="Validation" timeout="30000"/>
</authentication> 
```

注册页面代码 -

```
protected void btnRegister_Click(object sender, EventArgs e)
{
    MembershipUser userMemb = Membership.CreateUser(
                           txtemail.Text.Replace("'", "''").ToString(),
                           txtPassword.Text.Replace("'", "''").ToString(),
                           txtemail.Text.ToString());

    Roles.AddUserToRole(txtemail.Text.ToString(), "Member");
    FormsAuthentication.RedirectFromLoginPage(txtemail.Text.Trim(), false);
} 
```

Redirect.aspx.cs 代码 -

```
try
{
    if (User.IsInRole("Member"))
    {
        string UserName = User.Identity.Name;                        
        Response.Redirect("~/Member/MembeHome.aspx");
    }
}
catch(Exception ex) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:13:48.723

阅读本文档（问题和解决方案）[ThreadAbortException 如果您使用 Response.End、Response.Redirect 或 Server.Transfer 则会发生](http://support.microsoft.com/kb/312629/en-us)

使用[Response.Redirect(url,false)](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.80%29.aspx)

```
Response.Redirect("~/Member/MembeHome.aspx",false); 
```

# php - 如何在 symfony2 中使用具有多个不同表单小部件的实体字段类型数组

> ID：12016554
> 
> 赞同：2
> 
> 时间：2012-08-18T06:52:32.540
> 
> 标签：php, database, forms, symfony, doctrine

我正在查看一个名为 content 的实体，我将在其中将有关内容（textfield1、textfield2、bgcolor 等）的数据存储在实体内容内的数组中（如果这不是最好的方法，请告诉我）。

我想把它放在一个数组中而不是仅仅为其创建单独的实体字段的原因是我将有不同的“内容模板”，因此每个模板的数据字段的数量和类型将是不同的（当然每个模板都有它自己的表单生成器；ContentXType.php、contentYType.php 等）。虽然一种内容类型可能只有一个文本字段，但另一种可能有 10 个。我最初开始使用 datafield1、datafield2 等进行设计，但意识到这会给我留下一堆空值并且不会真的很漂亮 =)

在保存时，我将在名为 contentRendered 的不同字段中为此内容生成一个 html 输出。

在编辑时，我将再次希望能够以不同的表单小部件从我的数组中打开不同的数据字段，例如，文本字段中的 textfield1、文本区域中的 textfield2 和颜色选择器中的 bgcolor（我的数组的第三个值）表单小部件（我想我将使用带有 jQ​​uery 颜色选择器小部件的文本字段）。

所以我的小问题是实体类型数组是否是最好的方法，我什至可以从我的表单构建器中从数组中挑选出值 1 并将其放在一个字段中，将值 2 放在不同的表单字段中等等？

还是我需要说一个名为 content_data 的新实体并使用关系？

或者更好的方法是为我计划使用的每种内容定义一个新实体，然后在我的主要内容表单中嵌入该内容类型的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:25:46.570

经过更多研究后，我将为模板定义一个新实体，在其中我将指定我的模板，并为每个模板的呈现使用不同的树枝文件。每个模板的实际数据（具有可变数量的字段）将存储在序列化数组中。

# windows-phone-7 - 是否可以将 xaml 的很大一部分定义为标签并在不同的地方使用此标签？

> ID：12016555
> 
> 赞同：0
> 
> 时间：2012-08-18T06:52:49.733
> 
> 标签：windows-phone-7, xaml, windows-phone

我有很大一部分 xaml 代码（ListBox 和 ListBoxItems），我需要在不同的地方使用这个 ListBox。我想定义这个 ListBox 一次以使用它：`<my:SimpleListBox />`而不是复制/粘贴。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:12:10.213

是的。只需将其定义为 UserControl。请参阅文档中的完整示例。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:42:04.720

有几个选项：

1.  A UserControl - 用单个项目封装 UI 的一部分的常规方式。

2.  模板化（或自定义）控件 - 封装控件并使其“可模板化”并可跨应用程序重用的常规方式

3.  一串 XAML - 一种非常不常见的存储部分 UI 的方式。使用 XAML 序列化程序加载它。

先考虑 1，然后再考虑 2，仅在搞砸或知道自己在做什么时才使用 3。

# r - 从 RDS 迁移到 Elastic MapReduce + Hive 是正确的选择吗？

> ID：12016558
> 
> 赞同：3
> 
> 时间：2012-08-18T06:53:08.470
> 
> 标签：r, amazon-ec2, hive, amazon-emr

首先，我必须明确表示我是新手，如果我在我的问题中没有使用正确的术语，请原谅我自己。

这是我的场景：

我需要分析大量文本，如推文、评论、邮件等。数据当前在发生时插入到 Amazon RD MySQL 实例中。

后来，我在该数据上使用 RTextTools ( [http://www.rtexttools.com/](http://www.rtexttools.com/) ) 在本地运行和 R 作业，以输出我想要的结果。在这一点上，重要的是要明确 R 脚本分析数据并将数据写回 MySQL 表中，该表稍后将用于显示它。

我最近遇到的问题是，每次运行该工作大约需要 1 小时，而且我每天至少需要执行 2 次......因此不再可以选择使用本地计算机。

为了寻找替代方案，我开始阅读有关 Amazon Elastic MapReduce 实例的信息，乍一看似乎是我需要的，但从这里开始我的问题和困惑。

1.  我读到 EMR 的数据应该从 S3 存储桶中提取出来。如果是这种情况，那么我必须开始将我的数据存储到 S3 存储桶中的 JSON 或类似文件中，而不是存储到我的 RDS 实例中，对吗？
2.  在这一点上，我读到创建 HIVE 表然后使用 RHive 读取数据以便 RTextTools 完成其工作并将结果写回我的 RDS 表是一个好主意，对吗？
3.  现在是最后一个也是最重要的问题：与使用 R 运行 EC2 实例并在那里运行我的 R 脚本相比，付出所有这些麻烦是否值得，我会减少计算时间吗？

非常感谢您的时间，任何正确方向的提示将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:20:07.313

有趣的是，我想提出一些建议。

1.  您可以完全将数据存储在 S3 中，但您必须先将数据写入某个文件（txt 等），然后再将其推送到 S3。您不能将原始 JSON 放在 S3 上。您可能会受益于部署在 S3 上的云前端以快速检索数据。您也可以使用 RDS。您必须自己分析性能差异。

2.  将结果写回 RDS 应该没有任何问题。EMR 基本上创建了两个 EC2 实例，ElasticMapReduce-master 和 ElasticMapReduce-slave，可用于与 RDS 通信。

3.  看，我认为它值得尝试使用带有 R 的 EC2 实例，但是为了减少计算时间，您可能不得不使用昂贵的 EC2 实例，或者在不同实例之间进行自动缩放和划分任务。就像自己实现整个并行计算逻辑一样，但是在 EMR 的情况下，您自己就得到了 map reduce 的所有这些逻辑。因此，首先您应该尝试使用 EMR，如果它不适合您的，请尝试使用带有 R 的新 EC2 实例。

让我知道进展如何，谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:09:20.023

您应该考虑尝试 EMR。如果 1 小时窗口是一个约束条件，那么 S3+EMR 非常值得尝试。对于您的处理工作负载类型，您可以通过使用可扩展的按需 hadoop/hive 平台来节省周期。显然，有一些与试用和切换相关的学习、重新平台化和持续的集群管理成本。他们是不平凡的。或者，考虑像 Qubole 这样的服务，它也在 EC2+S3 上运行并提供更高级别（并且可能更容易使用）的抽象。

免责声明：我是 Qubole 的产品经理。

# jquery - jQuery week calendar: Not Loading the existing data in calendar

> ID：12016561
> 
> 赞同：0
> 
> 时间：2012-08-18T06:53:38.400
> 
> 标签：jquery, ajax, json, calendar

I am trying to use jQuery week calendar [https://github.com/themouette/jquery-week-calendar/wiki](https://github.com/themouette/jquery-week-calendar/wiki) to display the existing meeting on my webpage my problem is when the calendar is loading my events.php file is returning json data like

```
[{"id":"2","title":"Analytics","body":"Analytics","start":"2012-08-14 12:00:00","end":"60"},{"id":"8","title":"bvxc","body":"bvxc","start":"2012-08-17 12:00:00","end":"60"},{"id":"9","title":"anyp","body":"anyp","start":"2012-08-17 13:00:00","end":"60"},{"id":"16","title":"Analytbfn","body":"Analytbfn","start":"2012-08-17 10:45:00","end":"2012-08-17 12:30"},{"id":"17","title":"Analytbfn","body":"Analytbfn","start":"2012-08-16 08:00:00","end":"2012-08-16 10:15"},{"id":"18","title":"Analytbfn","body":"Analytbfn","start":"2012-08-18 07:30:00","end":"2012-08-18 11:00"}] 
```

but these data are not loading in my calendar

Look at the [http://dpaste.com/788236/](http://dpaste.com/788236/) for my demo.js file Please tell me where i am doing wrong

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T04:58:59.123

您应该以这种格式使用 START ,END 时间

```
yyyy-MM-ddTHH:mm:ss

  EX : "start" :"2012-08-14T12:00:00"
       "end":"2012-08-14T13:00:00" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:14:01.677

您应该返回一个带有名为“events”的属性的 JSON 对象，其值设置为事件集合。前三个事件的“end”参数也不正确。它应该指示约会的结束日期+时间，而不是持续时间 (60)。

这将起作用：

```
{
 events: [{ "id": "2", "title": "Analytics", "body": "Analytics", "start": "2012-08-14 12:00:00", "end": "2012-08-14 13:00:00" }, { "id": "8", "title": "bvxc", "body": "bvxc", "start": "2012-08-17 12:00:00", "end": "2012-08-17 13:00:00" }, { "id": "9", "title": "anyp", "body": "anyp", "start": "2012-08-17 13:00:00", "end": "2012-08-17 14:00:00" }, { "id": "16", "title": "Analytbfn", "body": "Analytbfn", "start": "2012-08-17 10:45:00", "end": "2012-08-17 12:30" }, { "id": "17", "title": "Analytbfn", "body": "Analytbfn", "start": "2012-08-16 08:00:00", "end": "2012-08-16 10:15" }, { "id": "18", "title": "Analytbfn", "body": "Analytbfn", "start": "2012-08-18 07:30:00", "end": "2012-08-18 11:00"}]
    } 
```

# html - 垂直对齐会破坏我的居中 div？

> ID：12016564
> 
> 赞同：0
> 
> 时间：2012-08-18T06:54:07.330
> 
> 标签：html, css, vertical-alignment, alignment

当我尝试垂直对齐居中的内部 DIV 时，我的居中不起作用......

我这里有什么问题？

CSS 代码：

```
#page_bar
{
    width: 100%;
    height: 30px;
    background-color: white
}

.page_bar
{
    width: 800px;
    height: 30px;
    display: table-cell;
    vertical-align: middle
} 
```

HTML 代码：

```
<div id="page_bar">
    <div class="page_bar">
        Mapa Strony
    </div>
</div> 
```

编辑：我希望内部 DIV 居中，而不是内部 DIV 中的文本...

编辑：看： http: [//mistic-miners.comule.com/index.html](http://mistic-miners.comule.com/index.html)银色区域必须居中，这意味着内部 div 必须居中，而不是内部 div 内的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:00:38.040

这将垂直和水平居中：

```
#page_bar
{
    width: 100%;
    height: 100px;
    background-color: black;
    text-align: center;
}

.page_bar
{
    width: 800px;
    height: 100px;
    display: table-cell;
    vertical-align: middle;
    color: white;
}​ 
```

jsfiddle：http: [//jsfiddle.net/DgwwB/2/](http://jsfiddle.net/DgwwB/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:00:40.900

如果你添加`text-align:center;`到`#page_bar`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:03:40.363

垂直对齐：中间

我想你忘了一个';' 对此。也给 2~3px 空间 30-27 或 33-30

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T07:11:47.927

看起来您可能需要包装 .page_bar 类以使其与表格单元格显示水平居中。

```
#wrap{
    margin: 0px auto;
    display:table;
}

#page_bar
{
    width: 100%;
    height: 30px;
    background-color: white
}

.page_bar
{
    width: 800px;
    height: 30px;
    display: table-cell;
    text-align: left;
    vertical-align: middle;
    margin: 0px auto;
}

<div id="page_bar">
    <div id="wrap">
        <div class="page_bar">
            Mapa Strony
        </div>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-07T07:49:29.843

我遇到了这个问题，在浪费时间浪费时间后，我终于找到了明显的简单解决方法。

如果你应用`'display:table-cell'`到一个**元素**，应用`'display:table'`到**父级**，这将使垂直对齐按照你期望的方式工作。

# javascript - AngularJS 中的可编辑数据网格

> ID：12016566
> 
> 赞同：50
> 
> 时间：2012-08-18T06:54:08.297
> 
> 标签：javascript, angularjs, kendo-ui

是否有任何 AngularJS 模块作为 DataGrid 提供内联编辑？KendoUI 中有一个 http://demos.kendoui.c​​om/web/grid/editing- [inline.html](http://demos.kendoui.com/web/grid/editing-inline.html)

AngularJS 和 KendoUI 可以一起使用吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-30T06:44:07.747

查看[ui-grid](https://github.com/angular-ui/ui-grid)

模板化、虚拟化、用于选择的简单数据绑定、分组等...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-18T23:37:32.177

看看这个非常通用的例子，我首先循环遍历行然后遍历列。然后是跨度和输入字段之间的简单更改。 [http://jsfiddle.net/3BVMm/3/](http://jsfiddle.net/3BVMm/3/)

这将使您能够使用几行代码进行内联编辑。

但是：它没有按预期工作，因为似乎有一个错误，我已经在 angular 上发布了该错误。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-10T08:57:41.753

您还可以使用智能表。

例如，双击余额栏中的一个项目：[http ://plnkr.co/edit/QQQd2znPqh87X2oQONd9?p=preview](http://plnkr.co/edit/QQQd2znPqh87X2oQONd9?p=preview)

```
 label: 'Balance',
  map: 'balance',
  isEditable: true,
  type: 'number', 
```

~~[主页上](http://lorenzofox3.github.io/smart-table-website/#/section-edit)的**Edit cell**部分下有一个**In-Line 编辑示例。**双击进入单元格编辑模式。~~

 **Github: [lorenzofox3 / Smart-Table](https://github.com/lorenzofox3/Smart-Table)

它具有分页、排序、过滤、数据格式化、行选择等功能，它还生成一个简单的表格结构，使其更容易设置样式/自定义。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-15T12:20:28.817

您也可以尝试 angular-xeditable。
对于表，它具有以下内容：

*   [可编辑行](http://vitalets.github.io/angular-xeditable/#editable-row)
*   [可编辑列](http://vitalets.github.io/angular-xeditable/#editable-column)
*   [可编辑的整个网格](http://vitalets.github.io/angular-xeditable/#editable-table)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-19T09:30:52.307

Kendo 正在研究 AngularJS [http://kendo-labs.github.io/angular-kendo/](http://kendo-labs.github.io/angular-kendo/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-28T22:20:51.567

网格[Angular Grid](http://www.angulargrid.com)能够进行内联编辑。它是一个 AngularJS 指令，因此插入到您的 Angular 应用程序中。还带有其他标准网格功能（选择、过滤等）。

编辑的文档页面在[这里](http://angulargrid.com/angular-grid-editing/index.php)

要进行编辑，请在列定义中将 editable 设置为 true，即：

```
colDef.editable = true; 
```

默认情况下，网格作为字符串值进行管理。如果您想对单元格进行自定义处理，例如将其转换为整数或进行验证，您可以在列定义上提供一个 newValueHandler ，即：

```
colDef.newValueHAndler = function(params) {
    var valueAsNumber = parseInt(params.newValue);
    if (isNaN(valueAsNumber)) {
        window.alert("Invalid value " + params.newValue + ", must be a number");
    } else {
        params.data.number = valueAsNumber;
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-24T04:53:37.720

你可以使用[ng-table](http://bazalt-cms.com/ng-table/example/16)指令来让你的表活跃起来。它支持排序、过滤和分页。在编译期间会自动生成带有标题和过滤器的标题行。

```
For example 
```

[可编辑的演示](http://bazalt-cms.com/ng-table/example/16)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-09T16:00:45.673

您可以使用 Angular 的丰富性来制作自己的。也许您不需要寻找第三方插件。

我制作了一个基本示例，支持：-

1.  绑定数据的内联**编辑**。
2.  **在点击最后一个网格单元格时**添加新行。****

 **[https://plnkr.co/edit/J0PeIlLsaASer4k8owdj?p=preview](https://plnkr.co/edit/J0PeIlLsaASer4k8owdj?p=preview)

应用一个简单的 CSS

```
.TextBoxAsLabel
{
   border: none;
   background-color: #fff;
   background: transparent;
    width:100%;
}

//for Dropdown    
.selectable::-ms-expand {   
  display: none; 
}
.selectable{
    -webkit-appearance: none;
    appearance: none;
} 
```

希望它有效，让我知道是否有任何问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-28T13:58:37.620

我能看到的最新开源角网格是 ux-angularjs-datagrid，我没有尝试过，但演示看起来很有希望......

[https://github.com/webux/ux-angularjs-datagrid](https://github.com/webux/ux-angularjs-datagrid)****

# c# - 使用异步而不等待

> ID：12016567
> 
> 赞同：35
> 
> 时间：2012-08-18T06:54:19.603
> 
> 标签：c#, asynchronous, visual-studio-2012, async-await, c#-5.0

我想让一个函数异步，所以我简单地添加`async`如下：

```
public async static void something(){
} 
```

你可以看到它的返回类型是`void`. 我只是希望这个函数被异步调用而不阻塞，因为 return 是`void`不需要`await`的。

但是 Visual Studio 2012 无法编译它，它说我想念`await`？

您能否提供一个`async`不使用`await`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-18T08:00:48.820

我认为也许你误解了什么`async`。警告是完全正确的：如果您标记您的方法`async`但不在`await`任何地方使用，那么您的方法**将不是 asynchronous**。如果调用它，方法内的所有代码都会同步执行。

此外，您应该尽量避免使用`async void`方法，它们会使处理异常变得困难。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-10-14T20:20:18.423

改成

```
public async Task something(){
  return await Task.Factory.StartNew(() => {
      //TODO:
  }
} 
```

您不必等待返回的任务；）

所以或者你可以只使用一个任务并删除 async 和 await 然后你得到：

```
public Task something(){
  return Task.Factory.StartNew(() => {
      //TODO:
  }
} 
```

任务隐含无效，如果您不使用通用返回类型参数

# jquery - 在 windows phone7 上使用 jquery mobile 将变量从一个页面传递到另一个页面

> ID：12016572
> 
> 赞同：0
> 
> 时间：2012-08-18T06:54:57.657
> 
> 标签：jquery, windows-phone-7, jquery-mobile, cordova

我正在为 windows phone 7 开发一个 jQuery 移动应用程序。我必须通过 windows phone 7 上的 url 将数据从一个视图传递到另一个视图。为此，我们尝试如下查询字符串：

```
 $.mobile.changePage("test.html?id=0"); 
```

但这不适用于Windows Phone。Windows 模拟器显示加载错误。请帮我。有没有其他方式在页面之间传递数据。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-02T13:26:02.163

我知道现在回答这个问题为时已晚。但我正在添加这个答案，以便其他人可以发现这很有帮助。

```
document.addEventListener("deviceready", myMethod, false);
function myMethod(){

$("li").click(function(){

    var index = $(this).index();

    console.log("index"+ index);

    window.localStorage.setItem("date",userArray_date[index] );
    window.localStorage.setItem("title",userArray_title[index] );

window.location.href='mypage.html';
});} 
```

和开`mypage.html:`

```
document.addEventListener("deviceready", page2Method, false);

function page2Method(){

  var display_date = window.localStorage.getItem("date");
  var display_title = window.localStorage.getItem("title");

} 
```

# java - 用于选择服务器的循环

> ID：12016573
> 
> 赞同：-1
> 
> 时间：2012-08-18T06:55:05.693
> 
> 标签：java, android, multithreading, tiles

我确实可以访问少数服务器，例如 A、B、C、D 和 E。我想以循环方式从这些服务器中逐一选择数据。我是 Java 和线程的新手，如果你能帮助我，那将是一个很大的帮助。

我想要做的是在我的应用程序中加载地图，我将 HTTP 请求发送到服务器。这些服务器以位图格式恢复响应，我排列这些图像（平铺）并将其显示在我的应用程序中，但我是按顺序进行的。例如，我首先请求服务器 A 获取图块，然后是服务器 B 等等。我希望以服务器 A 下载一个图像，服务器 B 下载另一个图像的方式获取图块。如果我单独使用一台服务器而不使用多线程来完成这一切，那么显示整个地图将需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:02:19.993

创建一个 url 构建器，它在数组中包含每个服务器的基本 url，并且还跟踪上次命中哪个服务器。下次需要数据时，只需返回下一个服务器的基本 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:10:09.753

使用模查看示例：（使用字符串作为 url）

公共静态最终 int MAX_SERVER = 4;

```
public static void main(String[] args)
{

    String urlarr[] = new String[MAX_SERVER];
    init(urlarr);

    int idx = 0;
    while(idx < 1000){
        String next = urlarr[idx++%urlarr.length];
        System.out.println(next);
    }
}

private static void init(String[] urlarr)
{
    for(int i=0 ; i<urlarr.length ; i++){
        urlarr[i] = "url("+i+")";
    }

} 
```

在这种情况下，使用 idx 上数组的模块大小使其遍历所有可用索引 0,1,2,3。部分输出：

```
url(0)
url(1)
url(2)
url(3)
url(0)
url(1)
url(2)
url(3) 
```

# r - 循环一些简单的除法

> ID：12016577
> 
> 赞同：0
> 
> 时间：2012-08-18T06:55:27.357
> 
> 标签：r

df

```
sampleName     realConc      exptname concentrate timepoints replicate    day  var
name1_0     3.877049e-05           0hr        55mM          0        b1 011311   1
name1_20    3.293085e-04           kcl        55mM         20        b1 011311   2
name1_40    3.999433e-05           kcl        55mM         40        b1 011311   3
name2_0     2.939995e-03           0hr        55mM          0        b1 011411   1
name2_20    1.212584e-02           kcl        55mM         20        b1 011411   2
name2_40    1.894434e-02           kcl        55mM         40        b1 011411   3 
```

我想将每个 realConc 值除以时间点为 0 的 realConc 值，该时间点具有相同的日期、复制和集中值

我正在尝试一个for循环，但运气不太好，你能帮帮我吗？

```
for (i in 1:dim(df)[1]){

df$realConc <- df$realConc[i] / df[which(duplicated(paste(replicate,day))) & df$timepoint == 0,]$realConc[i]
} 
```

我在想这样的事情，但它显然不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:19:19.577

plyr 是你的朋友！

```
library(plyr)
ddply(df, .(day, replicate, concentrate),
      transform, scaled=realConc/realConc[timepoints==0])

#   sampleName     realConc exptname concentrate timepoints replicate   day var   scaled
# 1    name1_0 3.877049e-05      0hr        55mM          0        b1 11311   1 1.000000
# 2   name1_20 3.293085e-04      kcl        55mM         20        b1 11311   2 8.493793
# 3   name1_40 3.999433e-05      kcl        55mM         40        b1 11311   3 1.031566
# 4    name2_0 2.939995e-03      0hr        55mM          0        b1 11411   1 1.000000
# 5   name2_20 1.212584e-02      kcl        55mM         20        b1 11411   2 4.124442
# 6   name2_40 1.894434e-02      kcl        55mM         40        b1 11411   3 6.443664 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:09:15.860

您尚未指定您希望输出的外观，但这是执行该计算的一种方法：

首先，读入您的数据（最好使用`dput()`或提供一些代码来重新创建您的数据）。

```
test = read.table(header=TRUE, text = "sampleName     realConc      exptname concentrate timepoints replicate    day  var
name1_0     3.877049e-05           0hr        55mM          0        b1 011311   1
name1_20    3.293085e-04           kcl        55mM         20        b1 011311   2
name1_40    3.999433e-05           kcl        55mM         40        b1 011311   3
name2_0     2.939995e-03           0hr        55mM          0        b1 011411   1
name2_20    1.212584e-02           kcl        55mM         20        b1 011411   2
name2_40    1.894434e-02           kcl        55mM         40        b1 011411   3") 
```

然后，根据您需要的分组拆分您的数据。

```
temp = split(test, list(test$day, test$concentrate, test$replicate)) 
```

第三，按组`realConc`计算值`timepoints == 0`，并用它来进行划分。

```
lapply(temp, function(x) x[, 2]/x[which(x$timepoints == 0), 2])
# $`11311.55mM.b1`
# [1] 1.000000 8.493793 1.031566
# 
# $`11411.55mM.b1`
# [1] 1.000000 4.124442 6.443664 
```

# 更新：data.frame 输出

```
temp = split(test, list(test$day, test$concentrate, test$replicate))
temp = lapply(temp, function(x) { x$divided = x[, 2]/
  x[which(x$timepoints == 0), 2]; x })
temp = do.call(rbind, temp)
rownames(temp) = NULL
temp
#   sampleName     realConc exptname concentrate timepoints replicate   day var  divided
# 1    name1_0 3.877049e-05      0hr        55mM          0        b1 11311   1 1.000000
# 2   name1_20 3.293085e-04      kcl        55mM         20        b1 11311   2 8.493793
# 3   name1_40 3.999433e-05      kcl        55mM         40        b1 11311   3 1.031566
# 4    name2_0 2.939995e-03      0hr        55mM          0        b1 11411   1 1.000000
# 5   name2_20 1.212584e-02      kcl        55mM         20        b1 11411   2 4.124442
# 6   name2_40 1.894434e-02      kcl        55mM         40        b1 11411   3 6.443664 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T06:57:39.447

这是一个简单的基础 R 版本。由于每个步骤都是可见的，因此可能更容易调试。

```
# find all possible denominators and rename realConc to avoid duplicate name in merge
denom <- x[x$timepoints == 0,c('realConc','concentrate','replicate','day')]
names(denom)[1] <- 'realConcDenominator'

# merge in new column with appropriate denominator
x$realConcDenominator <- merge(x,denom,by = c('concentrate','replicate','day'),all.x = T)[,'realConcDenominator']

# and divide
x$result <- x$realConc / x$realConcDenominator 
```

另一个使用 apply。

```
# or use apply in one shot
x$applyresult <- apply(x,1,function(x,denom){
  as.numeric(x['realConc'])/denom[denom$concentrate == x['concentrate'] & denom$replicate == x['replicate'] & denom$day == x['day'],'realConc']
},denom = x[x$timepoints == 0,c('realConc','concentrate','replicate','day')]) 
```

# jquery - ajax 调用没有得到来自 codeigniter 控制器的响应

> ID：12016579
> 
> 赞同：0
> 
> 时间：2012-08-18T06:56:00.787
> 
> 标签：jquery, ajax, codeigniter

我正在尝试使用 jQuery 和 CodeIgniter 验证用户登录。如果找到该用户，他将被重定向到另一个页面，所以我在这里尝试的是在用户输入错误的用户名或密码时获取错误消息。这是我的主要目标。

在视图中，我有以下代码：

```
<?php
    $param = 'id="formLogin"';          
    echo form_open('backOffice/loginCheck', $param); 
?>
 <label for="username">* user name</label>
 <input type="text" name="username" id="username" />

 <label for="password">* password</label>
 <input type="password" name="password" id="password" />

  <input type ="submit" name="login" id="login" value ="LOGIN" />
  <?php echo form_close(); ?>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
  <script src="<?php echo base_url(); ?>backOffice/js/loginscript.js"></script> 
```

现在，这里是来自 loginscript.js 的代码

```
 btnLogin.on('click', function(errorMessage){
       if(userName.val()!='' &&  password.val() !=''){
          $.ajax({
            type: 'POST',
            url: 'backOffice/loginCheck',
            data: 'formLogin.serialize()',
            success: function(errorMessage){
                console.log('i never get here');
            },
            dataType: 'jsonp'
        });

        e.preventDefault();
        console.log(errorMessage);

       } 
   }) 
```

最后，这是来自控制器的代码

```
 public function loginCheck()
    { 

       // set the validation rules
        $this->form_validation->set_rules('username', 'Username', 'required|trim|encode_php_tags');
        $this->form_validation->set_rules('password', 'Password', 'required|trim|encode_php_tags');
        $this->form_validation->set_error_delimiters('<br /><p class=jsdiserr>', '</p><br />');
        if ($this->form_validation->run() != FALSE) 
        {

            $ids=array();
            $ids[0]=$this->db->where('username', $this->input->post('username'));
            $ids[1] = $this->db->where('password', md5($this->input->post('password')));
            $query = $this->backOfficeUsersModel->get();
            if($query)
                {
                    $data = array(
                    'username'       => $this->input->post('username'),
                    'isUserLoggedIn' => true
                    );    
                $this->session->set_userdata($data);
                $data['title'] = "Welcome to dashboard!";
                $data['main_content'] = 'dashboard';
                $this->load->vars($data);
                $this->load->view('backOffice/template');
        } else {   
            $errorMessage = "Wrong Username or Password";
            $this->cms(json_encode($errorMessage));
        }
        } else {

            // form validation fail, send the message
            // form validation to fail, mean that user has javascript disabled
            $errorMessage = "Wrong User Name OR Password.<br /> Please try again!";
           $this->cms(json_encode($errorMessage));
        }

    } // end of function loginCheck 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:02:53.537

我猜`data: 'formLogin.serialize()',`应该`data: formLogin.serialize(),`是`formLogin`jQuery 对象将表单与您要发送的数据结合起来。看起来您的数据类型不应该`json`是`jsonp`

你也有`errorMessage`作为你的事件对象，但尝试调用`e.preventDefault()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:40:42.393

您需要检查的第一件事是显示任何`error code`或`200`响应的 ajax 请求。

第二件事`btnLogin.on('click', function(errorMessage){`看起来不对，因为这里`errorMessage`可能充当`event`.

第三件事在下面的代码中，`errorMessage`也用于成功响应。建议您更改变量名称。

```
btnLogin.on('click', function(errorMessage){
       if(userName.val()!='' &&  password.val() !=''){
          $.ajax({
            type: 'POST',
            url: 'backOffice/loginCheck',
            data: 'formLogin.serialize()',
            success: function(errorMessage){//here
                console.log('i never get here');
            },
            dataType: 'jsonp'
        });

        e.preventDefault();
        console.log(errorMessage);

       } 
   }) 
```

第四件事是`loginCheck()`，你正在做以下事情

```
$this->load->vars($data);
$this->load->view('backOffice/template'); // both link will echo the html part 
```

和

```
$errorMessage = "Wrong Username or Password";
$this->cms(json_encode($errorMessage));// json encode works for php array, not for string 
```

所以根据我`loginCheck()`的响应字符串而不是json。

最后添加`error`功能，`ajax()`以便您也可以看到错误。有关更多信息，[请查看此](http://api.jquery.com/jQuery.ajax/)

# jquery - 使用 jQuery Slider 插件和 jQuery Slider 不冲突

> ID：12016580
> 
> 赞同：1
> 
> 时间：2012-08-18T06:56:01.837
> 
> 标签：jquery, jquery-plugins, jquery-slider

大家好 ，

我遇到了我的页面设计与像这样的 jQuery 滑块插件一起使用的[问题](http://egorkhmelev.github.com/jslider/)

现在的问题是尝试使用 jQuery[滑块](http://jqueryui.com/demos/slider/)似乎会导致冲突。

后一个从未应用过，并且在我的 dom_id 和 jQuery 滑块插件上似乎正在应用到我的 dom_id。

有没有办法同时拥有上述两个滑块插件而不会导致它们中的任何一个发生冲突？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:06:37.657

您是否收到错误消息（如果有，它是什么）？

您是否尝试过更改加载 jQuery UI 插件和其他滑块插件的顺序？

# code-snippets - 如何为同时进行替换和切片的 SublimeText2 片段编写正则表达式？

> ID：12016584
> 
> 赞同：0
> 
> 时间：2012-08-18T06:56:38.063
> 
> 标签：code-snippets, sublimetext2, boost-regex

我一直在考虑为 Sublimetext2 制作更多片段。我一直在这里查看[http://sublimetext.info/docs/en/extensibility/snippets.html](http://sublimetext.info/docs/en/extensibility/snippets.html)和其他问题，我能够编写此代码段来获取文件名作为函数名：

```
<content><![CDATA[function ${1:${TM_FILENAME/(.+)\..+|.*/$1/:name}$SELECTION()
{

}]]></content> 
```

但是现在我正在尝试编写一个使用 TM_FILEPATH 替换文件名和路径开头的切片。例如我想把这个：

```
"/Library/WebServer/Documents/projects/CGI/source/com/test/play/Bla.js" 
```

进入这个：

```
"com.test.play" 
```

我对正则表达式语法以及我应该如何处理“${var_name/regex/format_string/options}”感到困惑。谁能向我解释如何编写这样的正则表达式，以及如何使用这四个项目来重写 TM_FILEPATH 变量？

# wordpress - Wordpress 管理员和菜单页空白

> ID：12016589
> 
> 赞同：0
> 
> 时间：2012-08-18T06:57:29.920
> 
> 标签：wordpress

我正在使用 wordpress 3.4，我只是为它注册了一个自定义帖子类型和分类法，它工作正常，但问题是有时某些页面显示为空白，包括前端和后端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:08:07.197

空白页通常是由 PHP 错误引起的。有些东西使 WordPress 崩溃，如果您的服务器上禁用了错误显示，您得到的只是一个空白页面。

检查您的 PHP 错误日志以获取任何最近的消息。他们应该将您指向包含有问题的代码的文件。通常它要么是一个有问题的插件或主题。或者，该错误可能是由 WordPress 内存不足引起的。如果它是插件或主题，您可以通过停用它来解决问题。如果是“内存不足”错误，请增加 PHP 内存限制。

也可以看看：

*   [在 WordPress 中监控 PHP 错误的 3 种方法](http://digwp.com/2009/07/monitor-php-errors-wordpress/)
*   [错误日志监视器插件](http://wordpress.org/extend/plugins/error-log-monitor/)
*   [增加分配给 PHP 的内存](http://codex.wordpress.org/Editing_wp-config.php#Increasing_memory_allocated_to_PHP)

# c - 如何跟踪亚秒时间

> ID：12016595
> 
> 赞同：0
> 
> 时间：2012-08-18T06:58:50.100
> 
> 标签：c, linux

如何以亚秒级精度跟踪时间。你们能给我一些想法和策略吗？此外，各有利弊，我正在尝试为使用 Linux 内核的硬实时系统实现这一点。Linux clock() 函数不够精确，因为它的精度是秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T07:13:26.943

您可以使用[`clock_gettime()`](http://linux.die.net/man/3/clock_gettime)返回`struct timespec`：

```
struct timespec {
        time_t   tv_sec;        /* seconds */
        long     tv_nsec;       /* nanoseconds */
}; 
```

实际分辨率通常不会接近纳秒，但应该能让您进入毫秒范围或更佳。

# mesh - 如何在 MeshLab 中同时显示点和边？

> ID：12016596
> 
> 赞同：2
> 
> 时间：2012-08-18T06:59:06.247
> 
> 标签：mesh, meshlab

我是 MeshLab 的新手，但谁能告诉我如何同时显示点和边？现在，我只能选择其中之一，不能两者都选。我正在使用 .ply 文件来加载网格。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:49:25.870

使用常用的工具栏按钮显示边缘，然后激活*Show Vertex Dots*装饰（在菜单*Render->Show Vertex Dots*中）。

或者，激活图层侧对话框，在其下部，您将看到此装饰的选项，您可以在其中更改点大小。

# c - Linux IPC 管道不工作

> ID：12016602
> 
> 赞同：0
> 
> 时间：2012-08-18T07:00:47.093
> 
> 标签：c, linux, ipc

所以我是linux中进程间通信和进程的新手，所以我真的无法弄清楚问题是什么。我编写的以下程序与我在家庭作业中遇到的问题相同，该作业包括使用冷凝管。它基本上是从孩子向父母发送一个字符，但它不会打印出该字符。
它打印出来：

```
hello from child
sending a
hello from parent
trying to receive...
received: reaping child 
```

在第三行应该说

```
received: a 
```

任何答案都表示赞赏，如果您对程序中的其他任何内容有任何有用的批评，也将不胜感激。谢谢大家

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdlib.h>

int main(int argc, char* argv[])
{
    pid_t pid = fork();
    int comm[2];

    pipe(comm);

if (pid == 0)
{
    char send = 'a';
    int check;
    close(comm[0]);
    printf("hello from child\n");
    printf("sending %c\n", send);
    check =  write(comm[1], &send, 1);
    printf("%d\n", check);
    exit(1);
}
else if (pid > 0)
{
    char get = ' ';
    int check;
    close(comm[1]);
    printf("hello from parent\n");
    printf("trying to receive...\n");
    read(comm[0], &get, 2);
    printf("received: %c\n", get);
    printf("reaping child\n");
    wait(NULL);
    return 0;
}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:06:24.030

你拿错了管子和叉子的顺序！您的进程分叉，然后两个进程都调用管道，因此正在创建 2 个单独的管道。您正在写入的那个没有人阅读它，而您正在阅读的那个没有写入任何内容。

# iphone - 如何等到 NSXmlParser 完成委托方法？

> ID：12016607
> 
> 赞同：-1
> 
> 时间：2012-08-18T07:01:36.940
> 
> 标签：iphone, objective-c, ios

我将 nsdata 从 tableview 提供给 xmlparser。解析完成后，我想根据解析结果在表上设置状态。我做了以下工作：

```
 -(BOOL)getTheServerStatus:(NSData *)webData
{
    if (webData==NULL) 
    {
        return FALSE;
    }

    parser=[[NSXMLParser alloc]initWithData:webData];
    parser.delegate=self;

    [parser parse];

    if([strVal isEqualToString:@"ok"])
    {
        return TRUE;   
    }

    else 
    {
        return FALSE;

    }

} 
```

但是我的控制在解析完成之前返回，所以我在表端得到 NULL。有没有办法等到所有解析完成而不阻塞主线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:05:45.113

如果你在你的类中使用 NSXMLParserDelegate 你可以通过下面的委托方法找到它

```
//This method is called when the XML document has finished parsing, do a [self.tableView reloadData]; here
    - (void)parserDidEndDocument:(NSXMLParser *)parser
    {

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:24:38.657

为 NSXMLParser 类的父类编写一个委托，以在解析完成时发出通知。
解析完成由

```
- (void)parserDidEndDocument:(NSXMLParser *)parser 
```

在该方法中调用父类的委托，通知解析完成。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T07:05:26.080

使用

```
- (void)parserDidEndDocument:(NSXMLParser *)parser 
```

委托方法。

# maven-3 - Cloud Foundry Maven 插件可以与多模块聚合器项目一起使用吗？

> ID：12016614
> 
> 赞同：0
> 
> 时间：2012-08-18T07:02:24.967
> 
> 标签：maven-3, cloud-foundry

我有一个标准的多模块 maven 项目，我可以使用它在本地构建它，`mvn clean package`但是当我尝试使用 $ mvn cf:update 部署它时，我收到以下错误：

```
[ERROR] Failed to execute goal org.cloudfoundry:cf-maven-plugin:1.0.0.M2:update (default-cli) on project <myprojectname>: An exception was caught while executing Mojo. The file or directory does not exist at '<my project directory>/target/<myprojectname>-SNAPSHOT.war'. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.cloudfoundry:cf-maven-plugin:1.0.0.M2:update 
```

问题是我无法为我的父 .pom 构建 .war 文件，因为它需要打包为 pom 文件，否则 maven 会拒绝它。因此，我无法提供 cloudfoundry 正在寻找的 .war 文件。有没有我缺少的设置？

我目前正在研究 Maven 程序集插件，但似乎应该有一种更直接的方法来使用 Maven Cloud Foundry 插件推送多模块 Maven 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:34:32.423

似乎您的父根目录要么有一个父 pom 文件，要么如果它是一个模块，则它在目标内只有一个 pom。您没有在项目的目标根目录中创建 war 文件（如果目标甚至存在那里）。您的应用程序很可能让每个模块在其目标文件夹中创建自己的战争文件。

目前我不认为 cf maven 插件会支持你正在寻找的东西。可能是在包含 war 文件的模块中添加参数的增强功能，但这是需要做的事情！

[https://github.com/cloudfoundry/vcap-java-client/blob/master/cloudfoundry-maven-plugin/src/main/java/org/cloudfoundry/maven/Update.java](https://github.com/cloudfoundry/vcap-java-client/blob/master/cloudfoundry-maven-plugin/src/main/java/org/cloudfoundry/maven/Update.java)

我建议您查看程序集插件（您已经是）。

让我们知道怎么回事！

# php - 在 PHP 中，有没有办法只遍历数组键而不是值？

> ID：12016618
> 
> 赞同：4
> 
> 时间：2012-08-18T07:03:19.330
> 
> 标签：php, arrays, loops, key

例如，目前我正在这样做：

```
foreach($myArray as $key => $unused) {
    //这里使用$key
}
```

有没有办法做到这一点而不必指定 $unused 值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T07:04:11.723

```
<?php
foreach(array_keys($myArray) as $key) {} 
```

[API](http://php.net/manual/en/function.array-keys.php)

# android - 保持服务运行

> ID：12016623
> 
> 赞同：17
> 
> 时间：2012-08-18T07:04:08.067
> 
> 标签：android, service

谁能告诉我如何在用户关闭服务时保持服务始终运行或重新启动？当我清除内存时，我已经看到 facebook 服务重新启动。我不想制作 ForegroundServices。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-18T09:41:31.190

您应该创建一个粘性服务。[在此处](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)阅读更多相关信息。

您可以通过在 onStartCommand 中返回 START_STICKY 来执行此操作。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i("LocalService", "Received start id " + startId + ": " + intent);
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
} 
```

另请阅读有关[application:persistent](http://developer.android.com/guide/topics/manifest/application-element.html#persistent)的内容，即“应用程序是否应始终保持运行”。这更麻烦 - 系统会尽量不杀死你的应用程序，这会影响系统中的其他应用程序，你应该小心使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-18T07:12:53.550

我从我之前在应用程序中使用的服务中复制了这个。

重要的是不要更新任何 UI。因为您在服务中没有用户界面。这也适用于 Toasts。

祝你好运

```
public class nasserservice extends Service {
    private static long UPDATE_INTERVAL = 1*5*1000;  //default

    private static Timer timer = new Timer(); 
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate(){
        super.onCreate();
        _startService();

    }   

    private void _startService()
    {      
        timer.scheduleAtFixedRate(    

                new TimerTask() {

                    public void run() {

                        doServiceWork();

                    }
                }, 1000,UPDATE_INTERVAL);
        Log.i(getClass().getSimpleName(), "FileScannerService Timer started....");
    }

    private void doServiceWork()
    { 
        //do something wotever you want 
        //like reading file or getting data from network 
        try {
        }
        catch (Exception e) {
        }

    }

    private void _shutdownService()
    {
        if (timer != null) timer.cancel();
        Log.i(getClass().getSimpleName(), "Timer stopped...");
    }

    @Override 
    public void onDestroy() 
    {
        super.onDestroy();

        _shutdownService();

        // if (MAIN_ACTIVITY != null)  Log.d(getClass().getSimpleName(), "FileScannerService stopped");
    }

} 
```

# java - 如何在 Eclipse（Android 和 Java）中分配手动快捷方式

> ID：12016625
> 
> 赞同：4
> 
> 时间：2012-08-18T07:04:25.850
> 
> 标签：java, android, eclipse

我刚刚开始使用 eclipse，想知道是否有办法找到 eclipse 的所有预定义快捷方式（尤其是 android 和 Java）并手动分配它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:07:49.860

这是你的答案，

转到 Windows 菜单，选择首选项选项，

![在此处输入图像描述](../Images/cf9d30e7bf619198e60575038ee44d67.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:09:01.170

窗口 -> 首选项 -> 常规 -> 键

# javascript - jqGrid - 搜索本地数组数据

> ID：12016636
> 
> 赞同：2
> 
> 时间：2012-08-18T07:05:58.060
> 
> 标签：javascript, jquery, xml, jqgrid

在 jqGrid 中对本地数据进行工具栏搜索时出现问题。

我在这里找到了早期版本的修复程序，但我理解自 V3.7 以来内置的文档的方式（我使用的是 4.4）。

如果您对字段名称感到好奇，它是羊驼农场畜群管理系统的 Web 界面

为什么在 jquery 中使用 ajax 而不仅仅是将 XML 拉入 jqGrid？XML（不在我的控制范围内）的格式不正确 - 每次我在 jqGrid 中尝试它时，它都失败了，因此 XML -> DOM -> 对象转换。

Grid 完美地加载、显示、分页和排序

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/smoothness/jquery-ui.css" />
<link rel="stylesheet" type="text/css" media="screen" href="jqGrid/css/ui.jqgrid.css" />

<script src="jqGrid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="jqGrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
<style>
#list td {
font-size: .6em;
}

.ui-pg-input{
    height: initial !important;
}
</style> 
<script type="text/javascript">
pacaURL = "/alpaca/proxy.php?url=localhost:9002/rest/alpaca";
$(function(){ 
var pData = new Array();
$.ajax({
    url:pacaURL, 
    success:function(data){
        pacaData = $.parseXML(data);
        console.log(pacaData);

        $(pacaData).find("AlpacaListing").each(function(){
            pData.push({
                Name: $(this).find("Name").text(),
                Age: FormatDate($(this).find("DOB").text()),
                Colour: $(this).find("Colour").text(),
                IAR: $(this).find("IAR").text(),
                Sex: $(this).find("Sex").text(),
                Sire: $(this).find("SireName").text(),
                Dam: $(this).find("DamName").text()
            });
        });
        console.log(pData);
        makeGrid(pData);
    },
    complete:function(data){
        console.log("COMPLETE");
    }
});

}); 

function makeGrid(pData) {
$("#list").jqGrid({
    datatype:'local',
    data: pData,
    colNames:['Name','Age(M)', 'Colour','IAR','Sex','Sire', 'Dam'],
    colModel :[ 
    {name:'Name', index:'Name', width:180}, 
    {name:'Age', index:'Age', width:90, align:'right', sorttype:'int'}, 
    {name:'Colour', index:'Colour', width:150}, 
    {name:'IAR', index:'IAR', width:70, align:'right', sorttype:'int'}, 
    {name:'Sex', index:'Sex', width:70}, 
    {name:'Sire', index:'Sire', width:180},
    {name:'Dam', index:'Dam', width:180}
    ],
    pager: '#pager',
    rowNum:20,
    rowList:[10,20,30],
    loadonce: true,
    sortname: 'Name',
    sortorder: 'desc',
    viewrecords: true,
    gridview: true,
    caption: 'The Herd'
}); 

$('#list').jqGrid('filterToolbar', { stringResult:true, searchOnEnter: false });
}

function FormatDate(sqlDate){
b=new Date(sqlDate);
d= new Date(new Date() - b);

return (d.getYear() - 70) * 12 + d.getMonth();
}
</script>

</head>
<body>
<table id="list"><tr><td/></tr></table> 
<div id="pager"></div> 
</body>
</html> 
```

一旦我开始在其中一个搜索框中输入任何内容，所有内容都会空白。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:00:31.433

Several months later, but just seen the comment from Jeff suggesting that I add an answer rather than just a comment about my error. Here goes...

The problem was one of user-error or, rather, user interpretation.

The code was working perfectly, just not the way that I was expecting it to. The default behavior for search in jqgrid is to treat the entered search term as case sensitive and to do a simple left-to-right comparison

# android - IntentService 中的循环

> ID：12016641
> 
> 赞同：7
> 
> 时间：2012-08-18T07:06:26.943
> 
> 标签：android, android-intent, intentservice

我的 IntentService 中有一个无限循环，可根据主要活动的输入每 30 秒更新一次视图。

```
public class IntentServiceTest extends IntentService {

String Tag = "IntentServiceTest";
String ACTION_RCV_MESSAGE = "com.jsouptest8.intent.action.MESSAGE";

public IntentServiceTest(){
    super("IntentServiceTest");
    Log.d(Tag, "IntentServiceTest constructor");
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    Log.d(Tag, "in onHandleIntent");
    String url = intent.getStringExtra("URL");
    Document doc;
    int i=0;
    try{
      while(true){
         Log.d(Tag, "entered try block...");
         Log.d(Tag, "url = "+url);
         doc = Jsoup.connect(url)
         .get();

       Log.d(Tag, "past Jsoup.connect");
         Element data = doc.select("table").get(1).attr("bgcolor", "#f4f36f");
         Log.d(Tag, data.toString());
         Log.d(Tag, data.text());
         Log.d(Tag, "creating intent...");
         Intent broadcastIntent = new Intent();
         Log.d(Tag, "setting action...");
         broadcastIntent.setAction(ACTION_RCV_MESSAGE);
         broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
         broadcastIntent.putExtra("OUTPUT", data.toString());
         Log.d(Tag, "sending broadcast: "+(i++));
         sendBroadcast(broadcastIntent);
         Thread.sleep(30*1000);
      }
    }
    catch(StackOverflowError e){
        Log.d(Tag, "in StackOverflowError block...");
        Log.d(Tag, "creating intent...");
        Intent broadcastIntent = new Intent();
        Log.d(Tag, "setting action...");
        broadcastIntent.setAction(ACTION_RCV_MESSAGE);
        broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
        broadcastIntent.putExtra("OUTPUT", "系統忙線中, 請稍後再試");
        Log.d(Tag, "sending broadcast...");
        sendBroadcast(broadcastIntent);
    }
    catch(Exception e){
        Log.d(Tag, "in catch Exception block...");   
        onHandleIntent(intent);
    }
}

} 
```

问题是，我陷入了这个循环。即使我杀死主要活动然后返回它以输入新输入，并且 IntentService 仍然基于旧输入返回。

我需要知道如何每 30 秒从 URL 更新一次而不会卡住。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T12:30:51.563

An`IntentService`意味着完成一项任务并返回。它在一个新线程中执行此任务。不要在 IntentService 中使用 while 循环。你`IntentService`会在一段时间后被杀死。我是从个人经验告诉这个的。我尝试在其中使用while循环。在 while 循环结束时，我使用了`sleep(60000)`1 分钟。但是我发现我的 IntentService 在一段时间后被杀死了。

我建议您不要在 30 秒内使用 AlarmManager，因为有些人已经表明了这一点。因为30秒太短了。它会耗尽电池。对于 AlarmManager 使用[RTC](http://developer.android.com/reference/android/app/AlarmManager.html#RTC)至少 1 分钟。

如果您仍然希望它是 30 秒，请使用服务。在服务中使用您的逻辑。但是在一个单独的线程中执行此操作，即在您的服务中生成一个新线程并在那里使用 while 循环和`sleep()`. 并且不要忘记使用[startForeGround](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)。这大大降低了 android 杀死你的服务的概率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T09:21:38.093

在 IntentService 或任何类型的服务中使用 while 语句是个坏主意。在 IntentService 内部尤其是一个坏主意，因为 IntentService 应该完成一项任务然后自动终止，这实际上违背了使用 IntentService 的全部目的。

我建议删除 IntentService 中的循环，并使用警报每 30 秒唤醒一次 IntentService。这样，您的服务肯定会每 30 秒被调用一次，并且在它未处理的时间内，它实际上可以重新进入睡眠状态。此外，要处理在 IntentService 为旧请求提供服务时收到对 IntentService 的新调用的情况，您可以将代码添加到 IntentService 的 onStartCommand 方法，以查看该调用是应该排队处理还是完全忽略。

使用此方法设置警报：

> public void setRepeating（int类型，长triggerAtMillis，长intervalMillis，PendingIntent操作）

链接：http: [//goo.gl/E9e6](http://goo.gl/E9e6)

要获得更有效的方法，请使用 setInexactRepeating （但这不能保证 30 秒唤醒）

PS。我们通常不会覆盖 IntentService 的 onStartCommand，但如果您的应用程序确实具有该功能，则可以这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:24:16.340

在此链接中，您将找到一项使用计时器进行自我更新的服务

[保持服务运行](https://stackoverflow.com/questions/12016623/android-service-always-keeps-running/12016688#12016688)

如果您对 while 循环感到满意，只需编写一个存在循环的 if 语句

```
if(thisIsTrue)
 {
   break; // this will exit the loop!
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T07:35:08.470

最好将循环或计时器或任何此类正在运行的任务保留在`MainActivity`自身中并每次都执行 IntentService。因为`IntentService`每次都会执行任务并完成自己或`queue`进一步交付的任务。

**从文档 -**

> IntentService 将接收 Intent，启动工作线程，并酌情停止服务。

它使用`work queue processor`模式来维护任务。

# ios - 不支持 armv7 的 iOS 5 设备

> ID：12016647
> 
> 赞同：1
> 
> 时间：2012-08-18T07:07:30.173
> 
> 标签：ios, ios5, armv7, armv6

有没有不支持 armv7 的 iOS 5 设备？

我正在为 iOS 5 部署并且仍然为 armv6 构建。我想知道我是否可以放弃这个架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:14:35.383

据我了解 - armv6 最多支持 iPhone 3G，armv7 适用于所有 iPad 和 iPhone 3G S 及更高版本。

由于 iOS5 只能在 3G S 以上运行 - 我想说只要你只支持 iOS5 及以上，你就可以安全地放弃 armv6 架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:16:18.460

iOS 5 支持的所有设备都支持 armv7 指令集。

# delphi - IdHTTP 在异常时停止

> ID：12016652
> 
> 赞同：0
> 
> 时间：2012-08-18T07:07:57.360
> 
> 标签：delphi, delphi-2010

我正在执行读取多个远程 TXT 文件的过程。将像这样工作：我有一个 TStringList，其中包含 3 个（或更多）TXT 文件的 URL，所以我使用 IdHTTP 来获取 txt 文件并阅读它们。但是如果第一个 TXT 离线或其他异常，我想转到第二个等等......我正在使用这段代码：

```
 ValidTXT:= false;
  HTTP:= TIDHttp.Create(Nil);
  HTTP.ConnectTimeout:= 10000;
  Body:= TStringList.Create;
  HTTP.Request.UserAgent:= 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; SLCC1';
  while ValidTXT = false do
    begin
      for i:= 0 to TXTs.Count - 1 do
        begin
          Body.Text:= HTTP.Get(TXTs.Strings[i]);
          Line:= Body.Strings[0];
          if pos('AmValid!', Line) > 0 then
            begin
              ValidTXT:= true; 
```

所以，如果我得到“AmValid！” 在 TXT 文件的第一行，它是有效的，我停下来。但如果我没有得到“AmValid！” 或者得到一个例外，为什么我不阅读 StringList 上的下一个 TXT？

# html - 删除 html5 画布中的错误

> ID：12016659
> 
> 赞同：0
> 
> 时间：2012-08-18T07:08:59.127
> 
> 标签：html

我只是想在我的浏览器中使用以下代码创建一个画布：

```
<!DOCTYPE html>
<html lang="eng">
<head>
<title<abc</title>

<script type="text/javascript">
window.onload=canvasApp();

function canvasApp()
{
var canvas=document.getElementById("one");
if(!canvas||!canvas.getContext)
    return;
}

</script>

<meta charset="utf-8">
<body>
<canvas id="one" width="400" height="500"> 
Your browser doesn't support canvas
</canvas>
</body>
</html> 
```

为什么我在以下行中得到 canvas=null

`var canvas=document.getElementById("one");`

（我使用的是最新版本的 chrome 和 firefox）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T15:41:28.193

您的 HTML 有点不尽如人意。

试试[W3C 验证器](http://validator.w3.org/)。现在它报告 7 个错误和 4 个警告。

# web-services - 实体管理器是否应该在 EJB 中由我们自己关闭？

> ID：12016664
> 
> 赞同：1
> 
> 时间：2012-08-18T07:09:13.760
> 
> 标签：web-services, jakarta-ee, ejb

我是 EJB 的新手。我想知道 EnityManger 应该由我们自己（`em.close()`）关闭 EJB 3.0 中的无状态或有状态会话bean（可能在`@preDestroy`使用注释的方法内）？它是否被ejb容器关闭，释放它的资源并且我们在检索到所需的数据库数据后不需要驻留EnitityManger？我们应该停止或关闭哪些服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:06:54.160

在 EJB 中，通常不需要这样做。

默认情况下，实体管理器是容器管理的，其关联的持久性上下文是事务范围的。这意味着不需要创建或关闭实体管理器，也不需要开始、提交或回滚任何内容。

在启动事务（也透明地发生）的方法完成后，保证刷新事务范围的持久性上下文（所有未完成的更新都写入数据库）和清理（销毁 L1 缓存）以及任何其他与该实体经理有关的资源。

一个标准的例子：

```
@Stateless 
public class CustomerService { 

  @PersistenceContext 
  private EntityManager entityManager; 

  public void addCustomer(Customer customer) { 
    entityManager.persist(customer); 
  } 
} 
```

*请注意，如果您真的想要，您可以通过注入工厂并从中获取实体管理器来使用应用程序管理的实体管理器。在这种情况下，您确实需要自己关闭。如果您还将它与 bean 管理的事务和扩展的持久性上下文结合起来，那么即使在 EJB 中，您也需要自己完成所有事情。但这非常罕见，仅作为选项提供给您。这不是默认值。*

# c++ - 为什么 gloox 标准示例 src/examples/ft_send.cpp 在我的机器上不起作用？

> ID：12016668
> 
> 赞同：2
> 
> 时间：2012-08-18T07:10:09.903
> 
> 标签：c++, file-transfer, gloox

我正在使用[这里的代码示例](http://searchco.de/codesearch/view/17503290)

并在Debian中运行它

```
g++ -o tr ft_send.cpp -lgloox -pthread
./tr example@gmail.com/resource  ./file 
```

然后它向我发送接受文件的请求，我按`accept`。但随后它打印

```
log: level: 0, area: 131072, <iq type='error' to='sender@gmail.com/glooxsendf1E777155' id='uid:502f38b2:2ae8944a' from='mmariya123@gmail.com/QIP9CA3B3AF'><error code='404' type='cancel'><item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/></error></iq>
ft request error
log: level: 0, area: 262144, </stream:stream>
ft_send: disconnected: 17
ce: 18 
```

并与服务器断开连接。有什么问题？有谁能够帮我？可能是事情在

```
 f->addStreamHost( j->jid(), "192.168.100.20", 6666 );
      // you should obtain this using disco, really:
//       f->addStreamHost( JID( "reflector.amessage.eu" ), "reflector.amessage.eu", 6565 );
//       f->addStreamHost( JID( "proxy.jabber.org" ), "208.245.212.98", 7777 ); 
```

但我不知道如何纠正它。

# actionscript-3 - 我将视频录制到 FMS 想要提高视频质量。

> ID：12016672
> 
> 赞同：0
> 
> 时间：2012-08-18T07:10:26.570
> 
> 标签：actionscript-3, flash, flash-media-server

我将视频录制到 FMS dvr 我想提高发送到 FMS 的视频质量。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:24:34.643

获得相机后，您可以使用[setMode()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setMode%28%29)和[setQuality()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setQuality%28%29)方法对其进行配置。这些方法的文档值得一读。

首先，我建议你玩这个`setMode()`方法。这将设置相机的捕获分辨率。默认分辨率为 160x120。

为了获得更好质量的图片，您希望指定与您将应用于`Video`对象的尺寸相同或相似的捕获分辨率。我还建议使用 4:3 比例的值，例如 480x360：

```
var camera:Camera = Camera.getCamera();
camera.setMode(480,360,24); // 480x360 resolution at 24 fps
var video:Video = new Video(480,360);
video.attachCamera(camera); 
```

使用尺寸，但尽量保持 4:3 的比例以获得最佳效果。这将是一个很大的改进，你甚至可以在这里停下来。

或者，您可以使用该方法微调流媒体体验`setQuality()`。这使您可以指定带宽使用或图片质量的首选项。为了获得最高质量，您可以这样做：

```
camera.setQuality(0,100); // please read the docs before doing this :) 
```

请注意，当您提高捕获分辨率和质量时，您也会增加视频的文件大小/带宽。你会找到正确的平衡！

# android - 如何在 libgdx 中创建加载屏幕？

> ID：12016675
> 
> 赞同：10
> 
> 时间：2012-08-18T07:10:50.573
> 
> 标签：android, opengl-es, libgdx

我有一个`GameScreen`渲染我的游戏的类。但是在开始渲染游戏之前，它需要读取文件并进行初始化，这非常耗时。

所以我需要显示/渲染另一个`Screen`名为`LoadingScreen`的类，以便花费一些时间并同时读取我的文件并为我做初始化过程`GameScreen`，并在初始化完成后通过调用改变屏幕`setScreen(gameScreen)`。

我需要使用线程来使这个并发工作，现在的问题是，如果我使用线程来读取文件和初始化；当切换到`GameScreen`openGl 给我这个错误：

```
javax.media.opengl.GLException: Error: no OpenGL buffer object appears to be bound to target 0x8892
at com.sun.opengl.impl.GLBufferSizeTracker.setBufferSize(GLBufferSizeTracker.java:118) 
```

我知道不是两个线程同时使用图形资源。

我发现问题是由`Mesh`es 引起的。在初始化线程中初始化网格并在主线程中渲染会导致此错误。但我不知道如何解决它。

你有什么想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:28:07.133

正如评论中所建议的，[AssetManager](https://github.com/libgdx/libgdx/wiki/Managing-your-assets)是在显示启动画面或加载屏幕时异步加载大多数 libGDX 资源（音频、纹理等）的方式。

对于其他操作，在后台线程中运行它们（或使用其他 Android 或 Java 后台任务执行工具之一）就足够了。要调用`setScreen`需要在 libGDX 渲染线程上执行的 libGDX 例程或其他例程，请使用`Gdx.app.postRunnable`，如下所示：

```
Gdx.app.postRunnable(new Runnable() {
     @Override
     public void run() {
         // Do something on the main thread
         myGame.setScreen(postSplashGameScreen);
     }
  }); 
```

根据 的可见性，`myGame`在`postSplashGameScreen`不同的上下文中构造 Runnable 可能更容易，然后将其传递给后台线程以在完成后发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T11:25:34.187

我的解决方法是在加载屏幕方法中使用操作：

```
@Override
public void show() {
    stage.addAction(Actions.sequence(Actions.delay(0.5f), action_loading_assets_and_other_stuff, Actions.delay(0.5f), action_setScreen));
} 
```

Actions.delay(0.5f) 使魔术 - 游戏不冻结

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-03T14:21:10.647

动作延迟也为我做了。我只是在加载屏幕 show() 方法中对 0.2f 的延迟动作和舞台上的可运行动作进行排序。现在加载屏幕渲染方法被调用了几次，而绘制屏幕的 0.2 秒延迟，我可以在可运行的操作中进行操作。

# build - 如何更改 Gradle 下载位置

> ID：12016681
> 
> 赞同：75
> 
> 时间：2012-08-18T07:11:53.247
> 
> 标签：build, gradle

我开始学习gradle。但是，当我用 Gradle 构建 Spring 时；它将依赖 jar 下载到

```
C:\Users\UserName\.gradle 
```

有什么方法可以指定 Gradle 将依赖项 jar 下载到特定位置？就像我可以在 Maven 中指定存储库位置一样。

系统信息：Windows 7 64bit Gradle 1.0 版

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-18T07:49:32.813

您可以设置`GRADLE_USER_HOME`环境变量、`gradle.user.home`系统属性或`--gradle-user-home`命令行参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-01T17:26:48.610

在 android studio 上，只需转到**File > Settings > Build Execution，Deployment > Gradle > Service directory path**选择你想要的目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-04T09:15:05.233

您也可以尝试在 window ->preferences -> gradle 进入 Eclipse 并在那里更改目录

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-15T18:46:37.187

您可以将以下行添加到您的`gradle.properties`：

```
systemProp.gradle.user.home=/tmp/changed-gradle 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-25T09:16:23.757

如果您在 Eclipse 中使用 gradle 插件并尝试导入 gradle 项目，则您的 gradle home 设置为

C:\用户\用户名.gradle

在某些情况下，由于您的用户目录权限问题，您的导入构建模型将无法工作。

在这种情况下，您可以从以下路径复制 .gradle 目录

```
C:\Users\UserName\**.gradle** 
```

粘贴到您拥有所有权限的某个目录并导入项目。

在我的情况下，我将我的 .gradle 目录移动到 z 驱动器，然后导入项目而不是构建模型并且它工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-18T09:29:17.923

脚步：

*   将 GRADLE_USER_HOME 环境变量设置为新路径
*   在 android studio 上，只需转到 File > Settings > Build Execution，Deployment > Gradle > Service directory path 选择你想要的目录。
*   重启电脑（重要步骤，没想到没人提这个）

# java - 限制 Vaadin 中的窗口拖动移动

> ID：12016682
> 
> 赞同：0
> 
> 时间：2012-08-18T07:11:58.113
> 
> 标签：java, user-interface, view, window, vaadin

我有一个 Vaadin 应用程序，其中还包含一个标题和一个菜单栏。菜单栏提供了一些选项，其中一些选项会打开一个与桌面 MIDI 应用程序非常相似的新窗口。但是，窗口可以移动到菜单上方和标题上方。有谁知道如何将视图移动限制在内容区域内。此内容区域当前是一个 VerticalLayout。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:15:11.867

没有内置的方法可以做到这一点。我认为你有几个选择：

1.  实现一个回调，在拖动后将窗口移动到正确的位置。这对于可用性来说并不是最佳的，因为它会使窗口跳来跳去。
2.  创建/扩展 Vaadin 的（子）窗口拖动处理程序并在那里应用限制。不幸的是，这并不容易，因为您必须直接修改浏览器的事件。

# ckeditor - 如何使用 CK 编辑器自动保存和嵌入密钥？

> ID：12016689
> 
> 赞同：2
> 
> 时间：2012-08-18T07:12:57.850
> 
> 标签：ckeditor

您如何在 20 秒内自动保存 CK 编辑器的内容并启用密钥嵌入，例如。`CTRL`+`S`保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T17:10:44.293

在这种情况下进行自动保存的基本方法是使用 DOM`setInterval()`函数设置 20 秒的时间间隔（转换为毫秒），并在每个时间间隔调用一个函数来执行您想要的任何预处理逻辑，然后发布内容到服务器进行保存。

如果保存逻辑最终相同，则`CTRL-S`保存位可以调用以立即执行保存。`autoSave()`

```
$(document).ready(function() {
    setInterval("autoSave()", parseInt(someIntervalInMilliseconds));

    // auto-save on CTRL-S
    $(window).keypress(function(event) {
        if (!(event.which == 115 && event.ctrlKey) && !(event.which == 19)) return true;
        autoSave();
        event.preventDefault();
        return false;
    });
});

function autoSave() {
    // get the contents of your CKEditor instance
    var instance = CKEDITOR.instances[editorName]; // see the CKEditor API docs for more on obtaining the instance and its data
    var encodedData = htmlEncode(instance.getData());
    // or any other sort of data massaging etc.

    var timeStamp = new Date().getTime();
    $.ajax({
        type: "POST",
        url: "some.php",
        data: encodedData
    }).done(function( result ) {
        // you could update some sort of timestamp element to have
        // the latest date and time of the auto-save, etc.
        $('#timeStamp').text(timeStamp);
    });
} 
```

有关信息，请参阅[此](https://stackoverflow.com/questions/93695/best-cross-browser-method-to-capture-ctrls-with-jquery)`CTRL-S`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T17:08:31.707

现在还有一个用于自动保存的插件，它列在 CKEditor 网站的插件部分：

[http://ckeditor.com/addon/autosave](http://ckeditor.com/addon/autosave)

# sql-server-2008 - 如何将具有 varchar 数据类型的日期列转换为另一种日期格式

> ID：12016697
> 
> 赞同：0
> 
> 时间：2012-08-18T07:14:21.477
> 
> 标签：sql-server-2008

我有一个数据类型为“nvarchar(50)”的日期列，它在原始表中显示为“01/08/2012”、“02/08/2012”等

但我希望它在查询或存储过程中显示为“20120801”、“20120802”，存储过程中的参数也应该能够显示为“20120801”、“20120802”

我尝试了下面的代码，但它似乎不起作用。

```
Create procedure testprocedure 
@startdate nvarchar(8), @enddate nvarchar(8)
As
Begin
select convert(varchar(8),date,112) AS DATE, field1, field2 from tbltable
where date between @startdate and @enddate
End
Go

execute testprocedure @startdate = '20120801', @enddate = '20120805' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:31:33.583

问题是：日期是 nvarchar，您应该将其转换为 Date 然后将其转换为其他格式。

```
select convert(varchar(8),CAST(tdate as Date),112) AS DATE, field1, field2 from tbltable 
```

tdate 是 tbltable.tdate。

有用。

# android - 使用 expandablelistview 在 android 中的另一个组中动态创建组。

> ID：12016700
> 
> 赞同：3
> 
> 时间：2012-08-18T07:15:16.510
> 
> 标签：android, expandablelistview

我已经成功开发了一个可扩展列表视图。现在我需要在另一个可扩展列表视图中使用可扩展列表视图。如何在 android expandablelistview 中的另一个组中创建组。请帮我。如何实现它。

这是我创建 2 个组（orderinfo、customerinfo）的代码。

```
final LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ArrayList<HashMap<String, String>> headerData = new ArrayList<HashMap<String, String>>();

    final HashMap<String, String> group1 = new HashMap<String, String>();
    group1.put(NAME, "OrderInfo");
    headerData.add( group1 );

    final HashMap<String, String> group2 = new HashMap<String, String>();
    group2.put(NAME, "CustomerInfo");
    headerData.add( group2); 
```

现在我需要在创建的另外 3 个组中实现 customerinfo。这个怎么做。请给我示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:45:04.967

如果您只想要一个**标准**的可扩展列表视图，我建议您查看示例：

路径：android-sdk\samples\android-8\ApiDemos\src\com\example\android\apis\view

*   ExpandableList1.java
*   ExpandableList2.java
*   ExpandableList3.java

如果您想要**超过 2 个 lvls**，请从这里阅读：

我以前没有这样做过，但我相信你想要实现的是一个 n 阶 exanpdablelistview。这里还有一篇你可能会感兴趣的帖子：[多级视图：expandablelistview](https://stackoverflow.com/q/5639090/969325)

从这里的另一篇文章：[https](https://stackoverflow.com/a/8352750/969325) ://stackoverflow.com/a/8352750/969325似乎您无法使用常规的 expandablelistview 来实现这一点，因此您必须：

1.  从 scatch 制作您自己的可扩展列表视图。
2.  对前 2 个 lvls 使用可扩展列表视图，并使用线性布局等制作最后一个级别。
3.  使用在滚动视图中分层的视图来制作所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:46:19.250

试试[三层可扩展列表](http://androidcodesnips.blogspot.in/2011/09/three-level-expandable-list.html)。

# jquery - jQuery - 动画文本区域框高度 - 性能问题

> ID：12016701
> 
> 赞同：1
> 
> 时间：2012-08-18T07:15:27.383
> 
> 标签：jquery, performance, jquery-animate, textarea

请记住，我仍处于 jQuery 的早期学习阶段。

下面的代码存在动画性能问题。它没有在 jsfiddle 中显示性能问题，但是在我正在构建 .js 文件的网站上，html 文件很大！

代码的目的是在焦点上为 textarea 高度设置动画，并将框模糊到原始高度。

我认为组合这些功能可能会提高性能，但情况恰恰相反。

```
$("#productsServiceDescription, #targetAudienceDescription").focus(function() {

    $(this).animate({
        height: 100
    }, "normal"),

    $(this).blur(function() {
        $(this).animate({
            height: 51
        }, "normal")
    });
});​ 
```

代码在这里

[http://jsfiddle.net/clearpixelsolutions/Yn477/](http://jsfiddle.net/clearpixelsolutions/Yn477/)

这是功能分离的代码，动画性能如此，但如上图所示组合起来很糟糕。

```
$("#productsServiceDescription, #targetAudienceDescription").focus(function() {

    $(this).animate({
        height: 100
    }, "normal"),
});
$("#productsServiceDescription, #targetAudienceDescription").blur(function() {

    $(this).animate({
        height: 51
    }, "normal")
});​ 
```

我想结合这些功能来消除复制 id 标签。使用此功能，我将总共有 15 个左右的 id。

我希望有人能告诉我我做错了什么以及如何优化代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:45:14.667

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:07:59.763

# java - 如何处理此异常 java.lang.UnsatisfiedLinkError？

> ID：12016704
> 
> 赞同：1
> 
> 时间：2012-08-18T07:16:04.450
> 
> 标签：java

[此代码示例](http://dev.eclipse.org/viewcvs/viewvc.cgi/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet262.java?view=co)生成异常：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no swt-win32-3235 in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:134)
    at org.eclipse.swt.internal.win32.OS.<clinit>(OS.java:18)
    at org.eclipse.swt.widgets.Display.<clinit>(Display.java:125)
    at Snippet262.main(Snippet262.java:34) 
```

请问这是什么意思，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:27:56.063

您需要添加`swt-win32-3235.dll`到`library_path`您的应用程序中。默认情况下`library_path`等于您应用的工作目录（“.”）。或者您可以`library_path`在 vm 参数中指定路径`-Djava.library.path=path`

因此， 1.检查`swt-win32-3235.dll`您的 library_path 中是否存在。2\. 检查`library_path`属性的正确定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:25:00.990

这是一个运行时异常，这意味着代码使用了无法加载的共享库（可能使用 jni）。在这里你有两个选择：

1.  您的系统上未安装共享库。
2.  共享库的路径不包含在 LD_LIBRARY_PATH 中（在 linux 上，不确定它是如何在 windows 上调用的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T10:45:21.343

运行我的应用程序时出现错误。例外是

> java.lang.UnsatisfiedLinkError 异常：SK.gnome.twain.TwainManager.initialize(I[B[BZ)V

我在 Eclipse 中按以下步骤修复它，Windows>Preferences>Java>Install JREs>check jre6-32（检查您在系统中安装的适当版本的 jre）。

# iphone - 是否有任何框架支持在 iOS 上扫描 ITF-14 条码阅读器？

> ID：12016710
> 
> 赞同：3
> 
> 时间：2012-08-18T07:16:34.230
> 
> 标签：iphone, objective-c, barcode-scanner

在我的项目中，我必须扫描 ITF-14 条码以获取其数据。我已经尝试过 ZBar 框架和 Zebra Crossing 示例，但都无法处理 ITF-14 条形码。

是否有其他框架或示例代码可以处理这种类型的条形码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T23:09:25.687

Zbar 0.4+ (2008) 确实支持 Interleave 2 of 5（ITF-14 是它的一个特例），但通常需要启用。I2of5 经常被禁用的原因是它有很多误报，这使得它在选择时成为一个糟糕的格式选择。ITF14 通过强制使用 14 位数字来解决这个问题，但这不是重点。

```
[scanner setSymbology: ZBAR_I25 config: ZBAR_CFG_ENABLE to: 1]; 
```

应该允许您扫描 ITF14。

就我个人而言，我很难阅读 I25。它似乎很大程度上取决于模块宽度（条形有多粗）、照明和中等/背景颜色。

随意添加您的问题的更多描述（或打开一个新线程？@Dhruv）

# php - 产品图片放大 zen 购物车？

> ID：12016714
> 
> 赞同：0
> 
> 时间：2012-08-18T07:17:51.753
> 
> 标签：php, jquery-plugins, plugins, zen-cart, zen

我需要帮助`how can i zoom image of the product in zen cart ?`

我正在尝试**jqzoom 插件**但没有显示任何效果也没有找到任何选项`admin->configuration->jqzoom`

我使用的`zen cart version 1.5.0.` 是 jqzoom 是否与 zen cart 版本 1.5.0 兼容？

或建议与 zen cart 版本 1.5.0 兼容的任何其他插件

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T13:40:26.530

由于 zencart 1.5.0 添加了管理员类型和管理员角色功能，因此您需要注册页面以显示在管理面板菜单中。

如何从管理区域注册页面。?

```
1\. go to :  Admin Access Management - > Admin Page Registration
2\. fill form and click on insert. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:07:59.877

您是否尝试使用 jq zen cart 插件？

我找不到适用于 v1.5 的版本，幸运的是它真的很容易设置，我是这样做的：下载普通版本的 jqzoom，重命名 css 和 js 文件，以便它们以 script_ 和 style 开头并将它们放入模板中的相应文件夹，然后进入并编辑文件包含/模板/default_template/templates/tpl_modules_main_product_image.php，将类添加到图像链接（根据jqzoom指令）并将其保存到模板包含/模板/ YOUR_TEMPLATE/templates/tpl_modules_main_product_image.php。然后你用

```
$(document).ready(function(){
$('.yourclass').jqzoom();
}); 
```

将其放在您自己的 javascript 文件中或 jqzoom javascript 的底部，您可以在调用脚本时设置各种选项 - 查看 jqzoom 文档

# android - 在android中显示图像时如何解决内存不足问题？

> ID：12016716
> 
> 赞同：3
> 
> 时间：2012-08-18T07:18:02.800
> 
> 标签：android, out-of-memory

我正在开发一个测验应用程序。我在列表中显示问题和选项。我在顶部保留了一个下一步按钮，当单击下一个按钮时，我会一次又一次地调用同一页面，直到测试结束。**由于某些问题由图像组成，因此我在问题下方显示一个按钮，当单击该按钮时，图像将显示在新页面中。** **现在我的问题是有时当我单击按钮以显示它显示`outofmemory`异常的图像时。**

**图像.java**

```
public class image extends Activity {

    ImageView myimgview;
    ImageView buttondismiss;

    public static String image_url;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image);

        Intent intent = getIntent();
        image_url = intent.getStringExtra(List.IMAGE_NAME);

        buttondismiss = (ImageView) findViewById(R.id.dismiss1);

        myimgview = (ImageView) findViewById(R.id.imageView100);

        int in = image_url.indexOf(".");
        String index = Integer.toString(in);
        String picturename = image_url.substring(0, in);

        int imageResource = getResources().getIdentifier(picturename,"drawable", "com.quiz.test");                                              // getPackageName());
        myimgview = (ImageView) findViewById(R.id.imageView100);
        myimgview.setImageResource(imageResource);

    }

} 
```

日志猫：

```
08-18 11:11:01.063: E/AndroidRuntime(552): FATAL EXCEPTION: main
08-18 11:11:01.063: E/AndroidRuntime(552): java.lang.OutOfMemoryError
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.content.res.Resources.loadDrawable(Resources.java:1937)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.content.res.Resources.getDrawable(Resources.java:664)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.widget.ImageView.resolveUri(ImageView.java:542)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.widget.ImageView.setImageResource(ImageView.java:315)
08-18 11:11:01.063: E/AndroidRuntime(552):  at com.quiz.test.image.onCreate(image.java:48)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.Activity.performCreate(Activity.java:4465)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.os.Looper.loop(Looper.java:137)
08-18 11:11:01.063: E/AndroidRuntime(552):  at android.app.ActivityThread.main(ActivityThread.java:4340)
08-18 11:11:01.063: E/AndroidRuntime(552):  at java.lang.reflect.Method.invokeNative(Native Method)
08-18 11:11:01.063: E/AndroidRuntime(552):  at java.lang.reflect.Method.invoke(Method.java:511)
08-18 11:11:01.063: E/AndroidRuntime(552):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-18 11:11:01.063: E/AndroidRuntime(552):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-18 11:11:01.063: E/AndroidRuntime(552):  at dalvik.system.NativeStart.main(Native Method) 
```

错误显示在 myimgview.setImageResource(imageResource); 行。我没有得到什么问题。我在我的可绘制文件夹中保留了多达 400 张图像，因为我的项目中需要所有这些图像。任何人都请帮我解决这个问题。我正在努力解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T07:27:28.410

`OutOfMemory Error`当某些图像可能太大而无法显示时，就会发生 这种情况。

要解决此问题，您可以执行以下操作：

```
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap preview_bitmap=BitmapFactory.decodeStream(is,null,options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:26:52.503

使用较小的图像。就是这样。在使用之前尝试减小图像大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:15:47.457

在显示图像之前，根据屏幕尺寸将图像缩小到 ImageView 的尺寸，这样您就不会在低分辨率屏幕上显示高分辨率图像。它将节省大量内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T13:36:56.723

这可以帮助您实用地减小图像的大小

```
public Bitmap decodeFile(File f) {
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);
        // The new size we want to scale to
        final int REQUIRED_SIZE = 70;

        // Find the correct scale value. It should be the power of 2.
        int scale = 1;
        while (o.outWidth / scale / 2 >= REQUIRED_SIZE
                && o.outHeight / scale / 2 >= REQUIRED_SIZE)
            scale *= 2;
        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
} 
```

# android - 在刷新代码中清除 ActionItem

> ID：12016717
> 
> 赞同：0
> 
> 时间：2012-08-18T07:18:06.227
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试清除刷新代码中的 ActionItem。我正在使用 ActiomBarSherlock 组件，并且我有我的操作项过滤，但是当不在菜单驱动的事件中时想要清除它。

有人可以帮助我以正确的方式访问它，而无需在全局变量中保留我的菜单吗？我试图直接引用 TextView 但它返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:41:10.273

保留对 MenuItem 的引用以在以后与之交互并没有错。您还可以调用 invalidateOptionsMenu 以便再次调用 onCreateOptionsMenu 并且您可以更新菜单状态。

# python - 字母数字字符串的正则表达式，下划线不应是第一个或最后一个字符

> ID：12016719
> 
> 赞同：3
> 
> 时间：2012-08-18T07:18:35.173
> 
> 标签：python, regex, python-3.x, python-2.7

我想要一个正则表达式来检查字符串是否只包含大写和小写字母、数字和下划线，但下划线不应该是字符串中的第一个或最后一个字符，因为我在下面尝试在 Python 中使用。

```
"^[a-zA-Z0-9_]*$" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T07:23:51.880

您可以使用此正则表达式：

```
^(?!_)\w*(?<!_)$ 
```

`\w`相当于`[A-Za-z0-9_]`

我使用否定前瞻`(?!)`来检查第一个字符不是`_`，而使用否定后瞻`(?<!)`来检查最后一个字符不是`_`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:23:02.447

使用您的标准指定可选的结尾。

```
'^([a-zA-Z0-9]([a-zA-Z0-9_]*[a-zA-Z0-9])?)?$' 
```

外括号允许空字符串，就像您最初的尝试一样。如果您不希望匹配空字符串，您可以通过删除开始括号和带有问号量词的结束括号来简化。

另请注意，为简单起见，我使用了捕获括号；将左括号转换为非捕获`(?:`据说也会使其运行得更快一些，尽管在这种简单的情况下，这几乎无关紧要。

正如@JoelCornett 所建议的，您可以使用`re.match`仅在开头显式搜索字符串并删除`^`锚点。

# jquery - 独立显示/隐藏多个元素

> ID：12016721
> 
> 赞同：1
> 
> 时间：2012-08-18T07:18:43.240
> 
> 标签：jquery

我正在使用 Andy Langton 的显示/隐藏 jQuery 代码，但是当您在同一页面上使用多个切换时，该代码看起来有些小故障。

当使用多个显示/隐藏时，它不会切换到正确的单词。它似乎整体跟踪最后一次切换，而不是每个链接的设置。换句话说，如果我在第一篇文章上点击“更多”，它将变为“更少”。如果我在下一篇文章上按“更多”而不隐藏上一篇，它将停留在“更多”，如果我现在尝试隐藏第一篇文章，那个词仍然是“少”。

这是我正在使用的代码：

```
// Andy Langton's show/hide/mini-accordion - updated 23/11/2009
// Latest version @ http://andylangton.co.uk/jquery-show-hide
$(document).ready(function() {

    // choose text for the show/hide link - can contain HTML (e.g. an image)
    var showText='MORE &darr;';
    var hideText='LESS &uarr;';

    // initialise the visibility check
    var is_visible = false;

    // append show/hide links to the element directly preceding the element with a class of "toggle"
    $('.toggle').prev('.moree').append('<a href="#" class="toggleLink">'+showText+'</a>');

    // hide all of the elements with a class of 'toggle'
    $('.toggle').hide();

    // capture clicks on the toggle links
    $('a.toggleLink').click(function() {

    // switch visibility
    is_visible = !is_visible;

    // change the link depending on whether the element is shown or hidden
    $(this).html( (!is_visible) ? showText : hideText);
    //$(this).html( ($(this).html() == hideText) ? showText : hideText);

    // toggle the display - uncomment the next line for a basic "accordion" style
    //$('.toggle').hide();$('a.toggleLink').html(showText);
    $(this).parent().next('.toggle').toggle('slow');

    // return false so any link destination is not followed
    return false;

    });
    }); 
```

任何解决此问题的帮助将不胜感激。

马兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:36:58.200

代码中的问题是

使用相同的 var`is_visible`来切换元素。

每次切换内容的可见性时，我们都必须检查相应 div 的可见性。

```
 $(this).html( ($(this).parent().next('.toggle').is(":visible")) ? showText : hideText); 
```

[看到它在行动](http://jsfiddle.net/abhishekchand/XCYrX/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:38:19.837

做了一些重写，这更有意义：

```
$(function() {
    var showText = 'MORE &darr;',
        hideText = 'LESS &uarr;';

    $('.toggle').hide().prev('.moree')
                .append('<a href="#" class="toggleLink">' + showText + '</a>');

    $('a.toggleLink').click(function(e) {
        e.preventDefault();
        var is_visible = $(this).closest('.moree').next('.toggle').is(':visible');
        $(this).html(is_visible ? showText : hideText)
               .parent().next('.toggle').toggle('slow');
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/XCYrX/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T07:34:33.077

该代码实际上有一个标志用于检查所有隐藏 DIV 的可见性。需要检查被切换的特定 div 当前是否隐藏

```
 // change the link depending on whether the element is shown or hidden
    if( $(this).parent().next(".toggle").is(':visible') ) {
              $(this).html(showText);
    }
    else{
              $(this).html(hideText);   
    } 
```

我已经更新了小提琴来检查这个

[更新了 jsfiddle](http://jsfiddle.net/XCYrX/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T07:36:57.860

问题是布尔is_visible。如果您单击第一个链接，则其设置为 false。如果您单击第二个元素（而不再次单击第一个元素），它仍然是错误的。

# javascript - 使用 jQuery 检查文本框焦点

> ID：12016725
> 
> 赞同：1
> 
> 时间：2012-08-18T07:19:09.583
> 
> 标签：javascript, jquery, textbox, focus

> **可能重复：**
> [使用 jQuery 测试输入是否有焦点](https://stackoverflow.com/questions/967096/using-jquery-to-test-if-an-input-has-focus)

我需要检查特定文本框是否具有焦点或不使用 jQuery。所以我的代码是这样的，但它不起作用：

```
if (document.getElementById("lastname").focus = true) {
    alert("hello");
} 
```

`#lastname`我的用例是这样的：我有一个文本框，当文本框获得或失去焦点时应该显示或隐藏。但是，如果`#lastname`文本框失去焦点到另一个文本框，后者应该保持可见，直到它也失去焦点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-18T07:24:58.450

```
if ($("#lastname").is(':focus')) {
    alert("hello");
} 
```

[jQuery 文档用于`:focus`](http://api.jquery.com/focus-selector/)
[jQuery 文档用于`.is()`](http://api.jquery.com/is/)

* * *

**更新：** 要在字段获得/失去焦点时显示/隐藏元素，请使用`focusin`和`focusout`事件处理程序：

```
$(document).ready(function() {
    $('#lastname').focusin(function() {
        $(hidden-element).show();
    }).add(hidden-element).focusout(function() {
        if ( !$(hidden-element).is(':focus') ) {
            $(hidden-element).hide();
        }
    });
});
//where hidden-element is a reference to or selector for your hidden text field 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:23:42.810

```
$("#lastname").focus(function(){
    alert("lastname has focus");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:57:44.970

```
if (document.getElementById("lastname").focus == true) {
        alert("hello");
    } 
```

检查 == ，使用 = 是一个赋值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T07:25:04.217

你可以试试 jQuery 的[:focus](http://api.jquery.com/focus-selector/)选择器。或者您可以随时添加一个类并检查该类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T07:26:52.590

```
<script type="text/javascript" language="javascript">

    function check() {

        if ($(document.activeElement).attr("id") === "element_name") {
            alert('checkbox is focused');
        }
    }

</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-18T07:32:27.107

试试这个

```
var status = $('#lastname').is(":focus");
alert(status);//false or true 
```

# android - 绑定到 jar 文件中的服务

> ID：12016735
> 
> 赞同：3
> 
> 时间：2012-08-18T07:21:03.273
> 
> 标签：android, binding, android-service

我有一个包含一些服务类的 jar 文件。jar 被放置在 Android 的框架中。我想在应用程序中绑定到该服务。目前我正在使用这个：

```
 Intent intent = new Intent(IMyAidl.class.getName());
 boolean returnvalue = mContxt.bindService(intent,connection, Context.BIND_AUTO_CREATE);
 System.out.println("Binding to service in jar are not " + returnvalue); 
```

当我使用上面的代码时，我根本无法绑定。每次`false`都是返回值。我不明白为什么它返回错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:49:13.510

您遇到的最可能的问题是您的构建脚本配置不正确。您应该有一个预构建步骤，将类文件复制到将它们转换为 dex 格式的目录。

我见过的另一个常见错误是忘记在应用程序清单文件中包含服务声明。如果这不起作用，请提供有关该应用程序的更多详细信息。

# java - 如何避免多帧？

> ID：12016736
> 
> 赞同：2
> 
> 时间：2012-08-18T07:21:59.153
> 
> 标签：java, swing, jframe, desktop-application

我正在创建一个 Java 桌面应用程序。在这个应用程序中，我有一张桌子。如果用户双击表格的行，则在另一个窗口[框架->查看框架]中查看相应的数据。用户最小化视图框架并选择表中的另一行。它再次在新窗口中打开[框架]。

如何避免多帧？我一次只想要一个视图帧。假设用户想要查看新数据，那么旧视图框架将退出，新视图框架将打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:36:48.163

使框架成为实例变量。每当您必须显示一个新框架时，请检查它是否已显示，如果是，请先关闭现有框架，然后再显示新框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:35:26.830

通常，最好`JFrame`在应用程序中有一个，而所有其他窗口都是`JDialog`s。

*   您是否考虑过制作第二个窗口模式？

*   另一种选择是设置一个标志，告诉您第二个窗口是否打开。如果是，那么当用户双击表中的另一行时，您只需替换内容（而不是创建新窗口）。

`windowClosed`您可以在a 的方法中设置该标志[`WindowListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)。然后`WindowListener`，您将把它添加到您的第二个窗口。

*   您可以`Window`通过调用来查看 a 是否打开[`Window#isShowing`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#isShowing%28%29)。这适用于`JFrame`s 和`JDialog`s。

# doctrine-orm - Doctrine ODM zf2 模块的示例工作配置？

> ID：12016741
> 
> 赞同：0
> 
> 时间：2012-08-18T07:23:34.727
> 
> 标签：doctrine-orm, zend-framework2, doctrine-odm, zfdoctrine

谁能提供一个驱动程序配置示例以读取 Application/src/Application/Document/.... D b

```
 <?php

return array(
    'doctrine' => array(
        'connection' => array(
            'odm_default' => array(
                'server' => 'localhost',
                'port' => '27017',
//                'user'      => null,
//                'password'  => null,
                'dbname' => 'yehja',
//                'options'   => array()
            ),
        ),
        'configuration' => array(
            'odm_default' => array(
//                'metadata_cache'     => 'array',
//
//                'driver'             => 'odm_default',
//
//                'generate_proxies'   => true,
//                'proxy_dir'          => 'data',
//                'proxy_namespace'    => 'DoctrineMongoODMModule\Proxy',
//
//                'generate_hydrators' => true,
//                'hydrator_dir'       => 'data',
//                'hydrator_namespace' => 'DoctrineMongoODMModule\Hydrator',
//
//                'default_db'         => null,
//
//                'filters'            => array()  // array('filterName' => 'BSON\Filter\Class')
            )
   // /   // ),
    //    'driver' => array(
    //        'odm_default' => array(
    //        //   'drivers' => array('Appl   
   //         )
        ),
        'driver' => array(
            'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',
            'namespace' => 'Application\Document',
            'paths' => array('module/Application/src/Application/Document'),
        ),
        'documentmanager' => array(
            'odm_default' => array(
//                'connection'    => 'odm_default',
//                'configuration' => 'odm_default',
//                'eventmanager' => 'odm_default'
            )
        ),
        'eventmanager' => array(
            'odm_default' => array(
                'subscribers' => array()
            )
        ),
    ),
);``` 
```

我正在使用的模块-> [https://github.com/doctrine/DoctrineMongoODMModule](https://github.com/doctrine/DoctrineMongoODMModule)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:37:52.717

这些作品：

**文件：config/autoload/module.doctrine-mongo-odm.local.php**

```
<?php

Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver::registerAnnotationClasses();
return array(
    'doctrine' => array(
        'connection' => array(
            'odm_default' => array(
                'server' => 'localhost',
                'port' => '27017',
//                'user'      => null,
//                'password'  => null,
                'dbname' => 'yehja',
//                'options'   => array()
            ),
        ),

        'configuration' => array(
            'odm_default' => array(
//                'metadata_cache'     => 'array',
//
//                'driver'             => 'odm_default',
//
//                'generate_proxies'   => true,
//                'proxy_dir'          => 'data',
//                'proxy_namespace'    => 'DoctrineMongoODMModule\Proxy',
//
//                'generate_hydrators' => true,
//                'hydrator_dir'       => 'data',
//                'hydrator_namespace' => 'DoctrineMongoODMModule\Hydrator',
//
//                'default_db'         => null,
//
//                'filters'            => array()  // array('filterName' => 'BSON\Filter\Class')
            )
   // /   // ),
    //    'driver' => array(
    //        'odm_default' => array(
    //        //   'drivers' => array('Appl   
   //         )
        ),

        'documentmanager' => array(
            'odm_default' => array(
//                'connection'    => 'odm_default',
//                'configuration' => 'odm_default',
//                'eventmanager' => 'odm_default'
            )
        ),
        'eventmanager' => array(
            'odm_default' => array(
                'subscribers' => array()
            )
        ),
    ),
); 
```

和**文件：module/Application/config/module.config.php** 添加这些行

```
'doctrine' => array(
        'driver' => array(
            __NAMESPACE__ . '_driver' => array(
                'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',

                'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Document')
            ),
            'odm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Document' => __NAMESPACE__ . '_driver'
                )
            )
        )
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T21:59:05.423

我猜你从[这个问题](https://stackoverflow.com/questions/10273130/how-to-integrate-zf2-with-doctrine-mongo-odm)中得到了配置的想法，但从那以后格式发生了变化。这是我拥有的一个（dibber 是应用程序的名称 - 是的，它是 PHP 5.4 数组）：

```
'driver' => [
    'dibber' => [
        'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',
    ],
    'odm_default' => [
        'drivers' => [
            'Dibber\Document' => 'dibber'
        ]
    ]
], 
```

这基本上意味着这`Dibber\Document`是将要使用注释驱动程序的命名空间。所以对你来说是`Application\Document`。

# c# - 如何制作包含唯一条目的列表？

> ID：12016745
> 
> 赞同：3
> 
> 时间：2012-08-18T07:24:02.630
> 
> 标签：c#, asp.net-mvc-3, list

我想制作一个包含唯一值的 MVC C# 列表。这是场景。我的清单是这样的：

清单 A

```
ItemNo       FileName 

001      =>   A.txt
001      =>   B.txt
002      =>   A.txt
002      =>   B.txt
003      =>   A.txt 
```

我想让它成为一个新的列表，比如，

清单 B

```
ItemNo       FileName 

001      =>   A.txt, B.txt
002      =>   A.txt, B.txt
003      =>   A.txt 
```

有什么办法可以使它可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T07:37:31.090

您可以将 LINQ 与[GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)一起使用，假设您有课程：

```
class Item
{
    public string ItemNo { get; set; }
    public string FileName { get; set; }
}

var result = list.GroupBy(item => item.ItemNo)
                 .Select(g => new Item
                   {
                       ItemNo = g.Key,
                       FileName = string.Join(", ",  g.Select(s => s.FileName))
                   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:36:46.463

这有帮助吗？

**方法**

```
var result = new Dictionary<string, string>();
foreach (var fileAssistant in duplicateList)
{
    if (result.ContainsKey(fileAssistant.ItemNo))
    {
        result[fileAssistant.ItemNo] = string.Format("{0}, {1}", result[fileAssistant.ItemNo], fileAssistant.FileName);
    }
    else
    {
        result.Add(fileAssistant.ItemNo, fileAssistant.FileName);
    }
} 
```

**设置**

```
var duplicateList = new List<FileAssistant>(new[]
                                        {
                                            new FileAssistant("001", "A.txt"), 
                                            new FileAssistant("001", "B.txt"), 
                                            new FileAssistant("002", "A.txt"), 
                                            new FileAssistant("002", "B.txt"),
                                            new FileAssistant("003", "A.txt")
                                        }); 
```

**文件助手类**

```
public class FileAssistant
{
    public FileAssistant() { }
    public FileAssistant(string itemNo, string fileName)
    {
        ItemNo = itemNo;
        FileName = fileName;
    }

    public string ItemNo { get; set; }
    public string FileName { get; set; }
} 
```

# android - 使用 NsdManager.DiscoveryListener 时的固定时间段的服务发现

> ID：12016747
> 
> 赞同：1
> 
> 时间：2012-08-18T07:24:21.497
> 
> 标签：android, multithreading, service-discovery

我正在尝试使用 Android 的 NsdManager API 实现一个服务发现类。我想知道如何从主要活动开始服务搜索一段固定的时间，然后停止它以使用搜索结果？

NsdManager API 说[调用](http://developer.android.com/reference/android/net/nsd/NsdManager.html)应该是异步的

> API 是异步的，对来自应用程序的请求的响应在单独线程上的侦听器回调上。

我已经成功地向该类发送了一个处理程序，该处理程序使用消息响应更新我的 UI 线程，但我不确定如何在不使用计时器阻塞主线程的情况下停止发现服务，例如 5 秒：S

我希望这是一个相关的问题，并且我提供了足够的信息。

溴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:16:49.750

您不需要使用计时器，只需在视图上使用[postDelayed(Runnable r, long millis) 即可](http://developer.android.com/reference/android/view/View.html#postDelayed%28java.lang.Runnable,%20long%29)。您可以从任何线程调用它，因此您可以从回调中调用它。

# c# - 事件不触发？

> ID：12016752
> 
> 赞同：0
> 
> 时间：2012-08-18T07:25:03.720
> 
> 标签：c#, asp.net

我想在后面的代码中创建一个图像按钮，如下所示：

```
ImageButton img1 = new ImageButton();
img1.CssClass = "stylImage";
img1.ImageUrl = @"~/images/Workflow/esign.jpg";
img1.AlternateText = "Signature";
img1.CommandName = "edit";
img1.Click += new ImageClickEventHandler(Image_OnClientClick);
img1.Command += new CommandEventHandler(Image_OnCommand);
workdesk.Controls.Add(img1); 
```

按钮创建并显示在页面上，但没有触发单击或命令事件。
也没有错误或异常。

有任何想法吗？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:48:06.740

您的代码工作正常，并且在我测试时这两个事件都能完美触发。

您可能没有`Event Definition`正确指定。

请重新检查下面的代码，它就像一个魅力..!!

```
protected void Page_Load(object sender, EventArgs e)
{
    ImageButton img1 = new ImageButton();
    img1.CssClass = "stylImage";
    img1.ImageUrl = @"~/images/Workflow/esign.jpg";
    img1.AlternateText = "Signature";
    img1.CommandName = "edit";
    img1.Click += new ImageClickEventHandler(Image_OnClientClick);
    img1.Command += new CommandEventHandler(Image_OnCommand);
    form1.Controls.Add(img1);

}

protected void Image_OnClientClick(object sender, ImageClickEventArgs e)
{
    //some code...
}

protected void Image_OnCommand(object sender, CommandEventArgs e)
{
    //some code...
} 
```

这可能会帮助你..!!

# c++ - 带字符串文字的自动

> ID：12016757
> 
> 赞同：21
> 
> 时间：2012-08-18T07:25:44.670
> 
> 标签：c++, c++11, type-inference, auto, string-literals

```
#include <iostream>
#include <typeinfo>

int main()
{
    const char a[] = "hello world";
    const char * p = "hello world";
    auto x = "hello world";

    if (typeid(x) == typeid(a))
        std::cout << "It's an array!\n";

    else if (typeid(x) == typeid(p))
        std::cout << "It's a pointer!\n";   // this is printed

    else
        std::cout << "It's Superman!\n";
} 
```

`x`当字符串文字实际上是数组时，为什么推断为指针？

> 窄字符串文字的类型为“ *n* `const char`数组” [2.14.5 字符串文字 [lex.string] §8]

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-18T08:09:01.480

该功能`auto`基于模板参数推导，模板参数推导行为相同，具体根据 §14.8.2.1/2（C++11 标准）：

*   如果 P 不是引用类型
    *   如果 A 是数组类型，则使用数组到指针转换产生的指针类型代替 A 进行类型推导

如果您希望表达式的类型`x`是数组类型，只需在`&`后面添加`auto`：

```
auto& x = "Hello world!"; 
```

然后，`auto`占位符将被推断为`const char[13]`。这也类似于将引用作为参数的函数模板。只是为了避免任何混淆： x 的声明类型将*引用*-to-array。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T07:49:26.780

> 当字符串文字实际上是数组时，为什么将 x 推断为指针？

因为数组到指针的转换。

If`x`被推导出为数组，仅当允许以下情况：

```
const char m[]          = "ABC";

const char n[sizeof(m)] = m; //error 
```

在 C++ 中，不能用另一个数组（如上）初始化一个数组。在这种情况下，源数组会衰减为指针类型，您可以这样做：

```
const char* n = m; //ok 
```

类型推断`auto`规则与函数模板中的类型推导规则相同：

```
template<typename T>
void f(T n);

f(m);     //T is deduced as const char*
f("ABC"); //T is deduced as const char*

auto n = m;     //n's type is inferred as const char*
auto n = "ABC"; //n's type is inferred as const char* 
```

§7.1.6.4/6 说关于`auto`说明符：

> 为变量 d 推导的类型然后是使用从函数调用 (14.8.2.1) 的模板参数推导规则确定的推导 A ...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-17T17:15:01.893

如果您希望将 x 推导出为数组，您可以使用

```
decltype(auto) x = "hello world"; 
```

# facebook - 仅凭访问令牌可以获取facebook用户基本信息吗？

> ID：12016759
> 
> 赞同：0
> 
> 时间：2012-08-18T07:25:59.753
> 
> 标签：facebook, facebook-graph-api

我正在使用 facebook SSO 做一个 IOS 应用程序。用户授予该应用的 Facebook 权限后，该应用将收到一个访问令牌。然后，该应用程序将仅使用访问令牌对后端进行 API 调用。

那么后端是否可以在用户的​​ facebook id 未知的情况下仅使用访问令牌检索基本用户信息？

期待一个答案。谢谢你=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:22:03.277

是的，一旦您拥有用户访问令牌 /`me`可以用作当前用户的用户 ID 的占位符，因此`/me/friends`返回访问令牌用户的朋友等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:29:51.997

这是一个已被 Facebook 记录并修复的错误。将您的 base_facebook.php 更新到版本 3.2.2。

您可以在此处跟踪错误：[https ://developers.facebook.com/bugs/238039849657148](https://developers.facebook.com/bugs/238039849657148)

# android - 将布局和应用程序转换为 android 2.2 应用程序的超大布局

> ID：12016760
> 
> 赞同：1
> 
> 时间：2012-08-18T07:26:00.610
> 
> 标签：android

您好我正在考虑将我的应用程序设计转换为片段，以便它可以显示在超大屏幕上。

![小屏幕设备的布局](../Images/ef72b1195c2962d14bfa65f1462c1fcd.png)

以上是小屏幕设备的主屏幕布局和活动。

下面是我已经转换的大屏幕设备的布局。

布局中的所有这些都是`ImageButton`并且单击每个会`ImageButton`打开一个活动。一切都适用于小屏幕布局，但对于大屏幕布局，只要`ImageButton`单击左侧，就应该在右侧加载活动。

我如何加载单击屏幕左侧的 ImageButton 应该在屏幕右侧加载其特定活动。有些人作为片段提供，但无法使其发挥作用。由于大多数片段在左侧使用 List 并在右侧加载活动，但我看到的是左侧的 ImageeButtons 和右侧的相应活动。

尝试运行一个简单的片段项目，其中包含项目的`android-support-v4.jar`构建路径但不工作。任何帮助将不胜感激。

指向示例会很有帮助。

谢谢。

![大屏设备布局](../Images/86b9ef857feeade038c9b06dd6807c7a.png)

# eclipse - eclipse是否支持java7中的抽象枚举，如何启用它？

> ID：12016762
> 
> 赞同：1
> 
> 时间：2012-08-18T07:26:02.187
> 
> 标签：eclipse, enums, abstract, java-7

如何使用 jdk7 在 Eclipse 中启用“抽象枚举 [SomeClassName]”？

使用 Indigo Service Release 2 和 jdk7，当我编写“abstract enum [SomeClassName]”时，它会在代码中报告错误。

为了让它工作，我需要做些什么吗？

我非常需要这个功能，这大大减少了我的工作量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:13:11.937

是的，我同意菲利普的观点。Java 7 似乎不支持抽象枚举。这在eclipse中不是问题。

您认为有问题的代码，您可以使用 JDK 7 从命令行编译它吗？

我尝试了 OpenJDK-7 和 Oracle JDK7。我无法得到一个简单的类来编译`abstract enum`它。

# node.js - socket.io 示例：不工作

> ID：12016763
> 
> 赞同：1
> 
> 时间：2012-08-18T07:26:03.630
> 
> 标签：node.js, socket.io

我对 socket.io 完全陌生，并试图从他们主页上的示例开始让我的脚湿透。但是执行后我在控制台中得到的只是这个

调试 - 提供静态内容 /socket.io.js

**我的服务器端代码是这样的：**

```
 var app=require('http').createServer(handler)
    , io = require('socket.io').listen(app)
    , fs = require('fs')
    app.listen(80);

    function handler (req, res)
    {

    fs.readFile(__dirname + '/index.html', function (err, data) 
    {
        if (err)
        {
               res.writeHead(500);
               return res.end('Error loading index.html');
        }
        res.writeHead(200);
        res.end(data);
       });
     }

    io.sockets.on('connection', function (socket) {
    console.log("connected");
    socket.emit('news', { hello: 'world' });
    socket.on('my other event', function (data) {
    console.log(data);
    });
    }) 
```

**我的 index.html 是这样的：**

var socket = io.connect('document.location.href');

```
 socket.on('error',function(reason){
  // console.error("Error");

  });
  socket.on('connect', function () {
  console.log('connected');       
          socket.send('hi');

          socket.on('message', function (msg) {
                // my msg
                    });
                     });
             </script> 
```

我用谷歌搜索并无法解决问题。我在 ubuntu 上使用 Firefox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:28:39.350

如果我没记错的话，你的错误就在这里：

```
'document.location.href' 
```

应该是

```
document.location.href 
```

我刚刚完成了一个简单的示例应用程序，我将很快为其编写教程： [https ://github.com/dotcloud/socket.io-on-dotcloud](https://github.com/dotcloud/socket.io-on-dotcloud)

您可以抓住它（只需克隆它）并使用它来轻松地使用 express 3 开始使用 socket.io。如果您想分享您的应用程序，它甚至可以推[送到 dotCloud 。](http://dotcloud.com)

# mysql - 用于 vb.net 的 Mysql 中的 SQL 语法

> ID：12016765
> 
> 赞同：-5
> 
> 时间：2012-08-18T07:26:44.357
> 
> 标签：mysql, sql

```
INSERT INTO USER
            (fname,
             mname,
             lname,
             uname,
             password,
             status,
             address,
             gender,
             bdaym,
             bdayd,
             bdayy,
             age,
             contact,
             isactive,
             iscancelled)
VALUES      ('" & SafeSTR(TextBox1.Text) & "',
             '" & SafeSTR(TextBox2.Text) & "',
             '" & SafeSTR(TextBox3.Text) & "',
             '" & SafeSTR(TextBox7.Text) & "',
             '" & SafeSTR(MD5(TextBox9.Text)) & "',
             '" & SafeSTR(Combobox2.text) & "',
             '" & SafeSTR(TextBox4.Text) & "',
             '" & SafeSTR(ComboBox1.Text) & "',
             '" & SafeSTR(ComboBox3.Text) & "',
             '" & SafeSTR(ComboBox4.Text) & "',
             '" & SafeSTR(ComboBox5.Text) & "',
             '" & SafeSTR(TextBox5.Text) & "',
             '" & SafeSTR(TextBox6.Text) & "',
             1,
             0) 
```

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:09:14.160

从你的评论

> 在 vb.net 中我没有任何错误，但是我在查询数据库中检查了我的查询我在 sql 语法错误中遇到了错误

在数据库查询编辑器中执行它时会出现此错误，因为您放置的是动态值而不是静态值。如果要在数据库查询编辑器中执行此操作，请放置静态值。例如 ：

```
INSERT INTO USER
            (fname,
             mname,
             lname,
             .
             .
             .
             isactive,
             iscancelled)
VALUES      ('ABC',
             'XYZ',
             'PQR',
             .
             .
             .
             1,
             0) 
```

# windows-phone-7 - 插入日历列表如何获取参数日历ID？

> ID：12016769
> 
> 赞同：0
> 
> 时间：2012-08-18T07:27:10.190
> 
> 标签：windows-phone-7, google-api, google-calendar-api

在我的 Windows Phone 应用程序中

当我尝试使用 Google Calendar API 时，插入一个 CalendarList 作为 Fllow 链接：[https ://developers.google.com/google-apps/calendar/v3/reference/calendarList/insert](https://developers.google.com/google-apps/calendar/v3/reference/calendarList/insert)

关于reqeust，它需要一个日历ID。当我插入一些格式字符串时。这是提示找不到一些资源。

如何在我的 Windows Phone 应用程序中定义谷歌日历 ID？或者

是否有一些自动生成的界面？

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:45:34.803

日历 ID 是指您尝试访问的特定日历。对于任何主日历，它将是您的电子邮件地址。对于辅助日历，您可以在日历设置中找到日历 ID。在日历详细信息下，您将看到日历 ID 所在的日历地址。

# ios - 带有 AVPlayer 的应用程序在启动后播放 mp4 中断 iPod 音乐

> ID：12016770
> 
> 赞同：4
> 
> 时间：2012-08-18T07:27:21.957
> 
> 标签：ios, avplayer, audiosession, interruption

我的应用程序使用 AVPlayer 播放 mp4，当我的应用程序完成启动时，它会中断 iPod 音乐，尽管我已将音频会话设置为允许与其他人混合

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    AudioSessionInitialize(NULL, NULL, NULL, NULL);
    AudioSessionSetActive(true);
    UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
    AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
    UInt32 allowMixWithOthers = true;
    AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixWithOthers), &allowMixWithOthers); 
```

视图控制器确实出现后，我重新启动了 iPod 音乐，它可以在我的应用程序中正常运行而不会中断，并且我的应用程序不会再中断音乐。

有谁知道这个问题是否可以解决？我也查了一下`myapp-info.plist`，发现没有属性防止中断iPod。

所有的 AudioSession 方法都没有返回错误。

以下是 iPhoneConfigureUtility 中的日志：

```
Aug 20 10:55:54 nova-teki-iPhone audiotest[3510] <Warning>: AudioSessionInitialize status = 0
Aug 20 10:55:55 nova-teki-iPhone kernel[0] <Debug>: ALS: kIOHIDDisplayBrightnessSliderPositionKey=69% (0xb226)
Aug 20 10:55:55 nova-teki-iPhone audiotest[3510] <Warning>: AudioSessionSetActive status = 0
Aug 20 10:55:55 nova-teki-iPhone audiotest[3510] <Warning>: kAudioSessionProperty_AudioCategory status = 0
Aug 20 10:55:55 nova-teki-iPhone audiotest[3510] <Warning>: kAudioSessionProperty_OverrideCategoryMixWithOthers status = 0
Aug 20 10:55:56 nova-teki-iPhone audiotest[3510] <Error>: [10:55:56.005] FigSubtitleSampleCreateFromPropertyList signalled err=50 (kFigCFBadPropertyListErr) (NULL or bad plist) at /SourceCache/EmbeddedCoreMedia/EmbeddedCoreMedia-1033.6/BuildSystem/XcodeProjects/MediaToolbox/../../../Sources/../Prototypes/ClosedCaptions/FigCaptionCommand.c line 762
Aug 20 10:55:56 nova-teki-iPhone audiotest[3510] <Warning>: Application windows are expected to have a root view controller at the end of application launch 
```

以下是我的测试程序：

```
OSStatus status = AudioSessionInitialize(NULL, NULL, NULL, NULL);
status = AudioSessionSetActive(true);
UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
status = AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
UInt32 allowMixWithOthers = true;
status = AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixWithOthers), &allowMixWithOthers);

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(itemDidPlayToEndTime:)
                                             name:AVPlayerItemDidPlayToEndTimeNotification
                                           object:nil];

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
playerView = [[MoviePlayerView alloc] initWithFrame:self.window.bounds];
AVPlayer *player = [AVPlayer playerWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"sunny" ofType:@"mp4"]]];
player.actionAtItemEnd = AVPlayerActionAtItemEndNone;
[player play];
[(AVPlayerLayer *)playerView.layer setPlayer:player];
[self.window addSubview:playerView];
[playerView release];

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-26T10:23:49.423

在 iOS 6/7 中，您可以使用 AVAudioSession，因为不推荐使用 AudioSessionSetProperty。

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback withOptions:AVAudioSessionCategoryOptionMixWithOthers error:nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T03:21:26.533

最后，我弄清楚出了什么问题。

```
AudioSessionInitialize(NULL, NULL, NULL, NULL);  
UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);
UInt32 allowMixWithOthers = true;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixWithOthers), &allowMixWithOthers);
AudioSessionSetActive(true); 
```

AudioSessionSetActive 必须在 AudioSessionSetProperty 之后调用，它现在可以正常工作。

# node.js - 带有 node.js 的 socket.io 没有按预期工作

> ID：12016775
> 
> 赞同：2
> 
> 时间：2012-08-18T07:28:33.067
> 
> 标签：node.js, socket.io

我使用 node.js + socket.io 创建了简单的聊天应用程序。当我尝试运行它时，它没有按预期运行：它不断地从客户端发送请求。我已经配置了传输设置：`['jsonp-polling', 'xhr-polling']`在（客户端/服务器）端。我尝试了设置`['close timeout': 10]`，但这并没有改变任何东西。我不明白这里发生了什么。

正如我在日志文件中看到的那样（最后），我认为我的连接中断了。

以下是我的代码：

服务器端：app.js ~~~~~~~~~~~~~~~~~~~~

```
var sio = require('socket.io');
var io = sio.listen(app)

io.configure(function () {
    io.enable('browser client minification'); 
    io.enable('browser client etag');         
    io.enable('browser client gzip');         
    io.set('log level', 3);
});

io.on('connection', function (client) {
    client.on('message', function (msg) {
        socket.broadcast(msg);
    });
    client.on('disconnect', function () {
    });
}); 
```

客户端：index.html ~~~~~~~~~~~~~~~~~~~~~~~~

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script src="http://cdn.socket.io/stable/socket.io.js"></script>
        <script>
            $(document).ready(function () {
                var socket = new io.Socket("localhost", {port: 8080});

                socket.on('connect', function () {
                    socket.send('A client connected.');
                });
                socket.on('message', function (message) {
                    $('div#messages').append($('<p>'), message);
                });
                socket.on('disconnect', function () {
                    console.log('disconnected');
                });
                socket.connect();

                $('input').keydown(function (event) {
                    if(event.keyCode === 13) {
                        socket.send($('input').val());
                        $('input').val('');
                    }
                });
            });
        </script>
    </head>
    <body>
        <input type="text" style="width: 300px;" />
        <div id="messages" style="border:solid 1px #000;">&nbsp;</div>
    </body>
</html> 
```

* * *

这是日志文件：

```
debug: client authorized
info: handshake authorized U1Y79P8WLaMz_UWoiKTc
debug: setting request GET /socket.io/1/xhr-polling/U1Y79P8WLaMz_UWoiKTc?t=1345273505128
debug: setting poll timeout
debug: client authorized for 
debug: clearing poll timeout
debug: xhr-polling writing 1::
debug: set close timeout for client U1Y79P8WLaMz_UWoiKTc
debug: setting request GET /socket.io/1/xhr-polling/U1Y79P8WLaMz_UWoiKTc?t=1345273505194
debug: setting poll timeout
debug: discarding transport
debug: cleared close timeout for client U1Y79P8WLaMz_UWoiKTc
debug: setting request GET /socket.io/1/xhr-polling/ufw4UqC2pCvWqqB5iKOQ?t=1345273505438
debug: setting poll timeout
debug: clearing poll timeout
debug: xhr-polling writing 7:::1+0
debug: set close timeout for client ufw4UqC2pCvWqqB5iKOQ
warn: client not handshaken client should reconnect
info: transport end (error)
debug: cleared close timeout for client ufw4UqC2pCvWqqB5iKOQ
debug: discarding transport
debug: client authorized
info: handshake authorized Uslh5g1YKNE8rCJDiKTd
debug: client authorized
info: handshake authorized -XHkL7Zk9KzA7WEFiKTe
debug: client authorized
info: handshake authorized _OOsM2nZOVgS93R-iKTf
debug: client authorized
info: handshake authorized IZ0vUej2iX_-TRSJiKTg
debug: setting request GET /socket.io/1/xhr-polling/IZ0vUej2iX_-TRSJiKTg?t=1345273505717
debug: setting poll timeout
debug: client authorized for 
debug: clearing poll timeout
debug: xhr-polling writing 1::
debug: set close timeout for client IZ0vUej2iX_-TRSJiKTg 
```

任何人都可以建议如何调试这个问题或问题实际上是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:11:06.773

```
io.on('connection', function (client) { 
```

应该`io.sockets.on(...`

```
client.on('message', function (msg) {
    socket.broadcast(msg); 
```

应该是`client.broadcast(msg);`（`socket`未在任何地方定义）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T09:21:22.477

您可以根据需要配置 socket.io 设置。[https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

我也遇到了同样的问题，发现添加下面一行就解决了问题

```
io.set('transports',['xhr-polling']); 
```

# android - 为什么 0dp 被认为是性能增强？

> ID：12016781
> 
> 赞同：76
> 
> 时间：2012-08-18T07:29:32.060
> 
> 标签：android, android-layout, android-lint

已填写此问题末尾的答案**，结合评论和解决方案。**

## 问题

我四处搜索，但没有找到任何真正解释为什么*Android Lint*以及一些*Eclipse*提示建议用.`layout_height``layout_width``0dp`

例如，我有一个`ListView`建议更改

**前**

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1">
</ListView> 
```

**后**

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1">
</ListView> 
```

同样，它建议对*ListView item*进行更改。这些在更改前后看起来都一样，但我有兴趣了解为什么这些是性能提升器。

任何人都可以解释为什么？如果有帮助，这里是`ListView`.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/logo_splash"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </ImageView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@color/background"
        android:layout_below="@id/logo_splash">

        <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1">
        </ListView>

        <TextView
            android:id="@android:id/empty"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/no_upcoming" />

    </LinearLayout>        
</RelativeLayout> 
```

## 回答

我在这里输入答案，因为它实际上是答案和下面引用的链接的组合。如果我在某件事上错了，请告诉我。

来自[0dip layout_height 或 layouth_width 的诀窍是什么？](https://stackoverflow.com/questions/7220404/what-is-the-trick-with-0dip-layout-height-or-layouth-width)

有 3 个通用布局属性适用于*宽度*和*高度*

1.  `android:layout_height`
2.  `android:layout_width`
3.  `android:layout_weight`

当 a`LinearLayout`为*垂直*时，`layout_weight`将影响孩子s ( )的*高度。*设置为将导致该属性被忽略。`View``ListView``layout_height``0dp`

**例子**

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </ListView>
</LinearLayout> 
```

当 a`LinearLayout`为*水平*时，`layout_weight`将影响子s ( )的*宽度。*设置为将导致该属性被忽略。`View``ListView``layout_width``0dp`

**例子**

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <ListView
        android:id="@android:id/list"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1">
    </ListView>
</LinearLayout> 
```

要忽略该属性的原因是，如果您不忽略它，它将用于计算使用更多 CPU 时间的布局。

此外，这可以防止在使用这三个属性的组合时对布局的外观产生任何混淆。*@android 开发人员*在下面的答案中强调了这一点。

此外，*Android Lint*和*Eclipse*都说使用`0dip`. 从下面的答案中，您可以使用`0dip`、`0dp`、`0px`等，因为任何单位中的零大小都是相同的。

**避免在 ListView 上使用 wrap_content**

从[ListView 的 Layout_width](https://stackoverflow.com/questions/4270278/layout-width-of-a-listview/4270471#4270471)

如果您曾经想知道为什么`getView(...)`像我一样多次调用它，结果证明与`wrap_content`.

像我上面使用`wrap_content`的那样使用会导致测量所有 child `View`，这将导致更多的 CPU 时间。此测量将导致您`getView(...)`被调用。我现在已经对此进行了测试，并且`getView(...)`调用的次数大大减少了。

当我`wrap_content`在两个`ListView`s上使用时`getView(...)`，每行调用 3 次，每行调用`ListView`4 次。

将此更改为推荐的`0dp`，`getView(...)`每行仅调用一次。这是一个相当大的改进，但更多的是避免`wrap_content`使用 a`ListView`而不是`0dp`.

但是，`0dp`由于这个原因，建议确实大大提高了性能。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-18T07:53:19.413

首先你有这个，

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1">
</ListView> 
```

千万不要把 ListView 的高度当作 wrap_content，那样会带来麻烦。[`Here`](https://stackoverflow.com/a/8340718/726863)是原因和[`this answer`](https://stackoverflow.com/a/4270471/726863)。

此外，

> 我四处搜索，但没有找到任何真正解释为什么 Android Lint 以及一些 Eclipse 提示建议用 0dp 替换一些 layout_height 和 layout_width 值的东西。

这是因为您正在使用`layout_weight = "1"`这意味着您的 ListView 具有尽可能多的高度。因此，在这种情况下，无需使用，`layout_height = "wrap_content"`只需将其更改为`android:layout_height="0dp"`，ListView 的高度将由`layout_weight = "1"`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-18T07:50:17.407

所以当在 View X 上使用 android:layout_weight 并且 LinearLayout 是水平的，那么 X 的 android:layout_width 就被简单地忽略了。

类似地，当 View X 上使用 android:layout_weight 并且 LinearLayout 是垂直的，那么 X 的 android:layout_height 会被忽略。

这实际上意味着，您可以在那些被忽略的字段中放入任何内容：0dp 或 fill_parent 或 wrap_content。没关系。但建议使用 0dp，因此 View 不会对其高度或宽度进行额外计算（然后将其忽略）。这个小技巧只是节省了 CPU 周期。

从 ：

[0dip layout_height 或 layouth_width 的诀窍是什么？](https://stackoverflow.com/questions/7220404/what-is-the-trick-with-0dip-layout-height-or-layouth-width#answer-7220491)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-18T08:40:59.623

据我所知，使用 0dp （或 0px 顺便说一句，它是相同的，因为 0 是 0 无论这里的单位是什么）和 wrap_content 或 fill_parent （或 match_parent，它是相同的）。

这取决于您使用的重量。如果只使用 weight 1 ，它们看起来都一样，但含义总是不同的，这对性能很重要。

为了显示这一点，请尝试以下操作：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
  android:layout_height="match_parent" android:orientation="vertical">

  <TextView android:id="@+id/textView1" android:layout_width="match_parent"
    android:layout_height="0px" android:text="1" android:background="#ffff0000"
    android:layout_weight="1" android:gravity="center"
    android:textColor="#ffffffff" android:textSize="20sp" />

  <TextView android:id="@+id/textView2" android:layout_width="match_parent"
    android:layout_height="0px" android:text="2" android:background="#ff00ff00"
    android:layout_weight="2" android:gravity="center"
    android:textColor="#ffffffff" android:textSize="20sp" />

  <TextView android:id="@+id/textView3" android:layout_width="match_parent"
    android:layout_height="0px" android:text="3" android:background="#ff0000ff"
    android:layout_weight="3" android:gravity="center"
    android:textColor="#ffffffff" android:textSize="20sp" />

</LinearLayout> 
```

然后尝试用 match_parent 替换 0px 。你会看到结果非常不同。

通常，为了更好的理解和更好的性能，你会想要使用 0px。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-20T06:40:53.063

`LinearLayout`根据`layout_width`/`layout_height`值测量所有孩子，然后根据值划分剩余空间（可能为负数）`layout_weight`。

`0dp`比`wrap_content`在这种情况下更有效，因为仅对原始高度使用零然后根据体重拆分父母的全高比先测量孩子然后根据体重拆分其余部分更有效。

所以效率来自于不衡量孩子。应该与、 或或任何其他固定数字`0dp`一样有效（并产生完全相同的结果） 。`match_parent``42px`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-15T14:01:27.237

谨慎使用 android:layout_height="0dp"

我发现在 ListView 中（建议使用 convertView 进行视图回收，参见例如[http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)），设置 android:layout_height="行 TextView 的 0dp" 可能导致多行文本内容的文本截断。

每当以前用于显示适合单行的文本的 TextView 对象被回收以显示需要多行的较长文本时，该文本将被截断为单行。

使用 android:layout_height="wrap_content" 解决了这个问题

# c++ - 变量寻址

> ID：12016783
> 
> 赞同：0
> 
> 时间：2012-08-18T07:29:37.357
> 
> 标签：c++, pointers, memory-address

```
int main()
{

    int a = 10;

    int *p;   // int *p = a; gives me an error: invalid conversion from int to int *.
              // Tell me why?

    *p = a;   // while this runs

    cout << &a <<"  "<<p;
} 
```

其次 &a 和 p 给出了 2 个不同的值。根据我a的地址和指针p中存储的值应该相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:35:50.560

`int *p = a`，按字面意思解释，获取存储在中的*值*`a`并尝试将其解释为要存储在中的*内存地址*`p`。虽然在计算上是合法的，但如果没有明确的类型转换，C++ 将不允许这样做，因为这通常*不是*您想要做的。

`int *p = a`语句不同的原因`*p = a`很简单：第一个语句，下面的简写

```
int *p;
p = a; 
```

正在*初始化*指针，因此它期望 RHS 上的内存地址，而第二条语句正在为 指向的位置分配一个值`p`，因此期望（在这种情况下）RHS 上的整数。

如果你想初始化`p`指向`a`，你可以使用`int * p = &a`or`p = &a`代替，where `&`is the address-of 操作符。**永远不要**尝试取消引用未初始化的指针！您最终会在一个基本上任意的位置接触内存，这可能会导致分段错误（导致崩溃）或开始覆盖程序中的其他数据（导致模糊和不可重现的错误）。

当您运行示例代码时，`p`并且`&a`具有不同的值正是因为`p`从未分配到指向`a`. 关于为什么你可能会得到任何非零值的一些简短背景`p`：局部变量是从称为*堆栈*的特殊内存区域分配的，它还存储有关函数调用和返回地址的信息。每个进程都有自己的堆栈。然而，至关重要的是，堆栈中未使用的区域在使用之前并没有真正清零或以其他方式清理（可能在调试版本中除外，它往往会分配非常明显的值，例如`0xCCCCCCCC`或`0xBAADF00D`到未初始化的指针）。如果您的编译器没有自动为您设置默认值（并且发布版本通常不会有这样的自动初始化，为了提高效率），那么您所看到的`p`是*发生*`p`在您的程序设置之前分配给的内存中的内容向上它的堆栈帧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:36:10.213

`int *p = a;`初始化一个不是指针的指针（因此出现错误），同时`p`从语法上讲，分配给指向的内存。另外，前者是*初始化*，而后者是*赋值*。`a``*p=a;``a``p`

 **请注意，在您的情况下，`*p=a`调用**undefined behavior**，因为`p`不指向程序的合法内存，即您没有为`p`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:33:57.603

您存储`a`在`p`指向 ( `*p`) 的地址。如果要将`a`( `&a`) 的地址存储在 中`p`，则必须使用

```
p = &a; 
```

使用`int *p = a`, 会出错，因为`p`is a `int*`， while`a`是 a `int`。将其视为`int* p = a`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T07:49:44.147

`int *p = a;`- 这意味着您正在声明一个变量并为其赋值。变量名称是`p`，它的类型是`int *`你分配的值是`a`(10)，它将被分配给`p`. `int *p = a;`相当于

```
int *p; 
p = a; 
```

我们无法`int`为`int *`.

`*p = a;`- 这就是你不同意`int`的。所以这很好。在执行此操作之前，不要忘记为其他内存分配内存，这可能会导致崩溃（未定义的行为），因为可能有一些垃圾值。`*p``p``p``p`

我希望您正在尝试分配 to 的`a`地址`p`。在这种情况下，您可以执行以下操作。

```
int a;
int *p = &a; 
```**

# opengl-es-2.0 - glreadpixel gl_depth_component 返回 0？

> ID：12016785
> 
> 赞同：0
> 
> 时间：2012-08-18T07:30:06.550
> 
> 标签：opengl-es-2.0, intersection, depth-buffer, glreadpixels, depth-testing

我正在寻找一个立方体和一条线的交点的解决方案。所以我用

```
GLES20.glReadPixels(touchX, touchY, 1, 1, GLES20.GL_DEPTH_COMPONENT, GLES20.GL_FLOAT, zz); 
```

我显示了 zz ，但结果为 0。所以当我触摸立方体（实际上是在 2d 屏幕上）时，如何获得立方体的深度缓冲区值。我使用 GLES20 和 Android API level15。我的代码如下。

```
 ByteBuffer PixelBuffer = ByteBuffer.allocateDirect(4);
    ByteBuffer zBuffer = ByteBuffer.allocateDirect(4);

    PixelBuffer.order(ByteOrder.nativeOrder());
    PixelBuffer.position(0);
    zBuffer.order(ByteOrder.nativeOrder());
    zBuffer.position(0);
    FloatBuffer zz;
    zz = zBuffer.asFloatBuffer();
    GLES20.glReadPixels(touchX, touchY, 1, 1, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, PixelBuffer);
    GLES20.glReadPixels(touchX, touchY, 1, 1, GLES20.GL_DEPTH_COMPONENT, GLES20.GL_FLOAT, zz); 
```

顺便说一句，挑选颜色效果很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:37:53.660

您忘记准备要读取的目标帧缓冲区...尝试这样：

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glPixelStorei(GL_PACK_ALIGNMENT, 1);
glReadPixels(0, 0, deviceWidth, deviceHeight, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 
```

或者只是编写简单的着色器并将您的 zbuffer 数据渲染到您的 FBO 中，类似

```
gl_FragColor = vec4(vec3(gl_FragCoord.z), 1.0); 
```

然后从这个 FBO 中读取颜色信息...

# c++ - Qt4 QTableView 和复选框点击事件

> ID：12016786
> 
> 赞同：0
> 
> 时间：2012-08-18T07:30:09.937
> 
> 标签：c++, user-interface, qt4, qt-creator

我已经使用以下代码创建`QTableView`并添加了一个`QStandardItem`复选框：

```
....
QStandardItem *chkItem = new QStandardItem(true);
chkItem->setCheckable(true);
chkItem->setData(Qt::AlignCenter, Qt::TextAlignmentRole);
tblModel->appendRow(chkItem);
... 
```

`tblModel`在哪里`QStandardItemModel`。

现在我想知道如何捕捉复选框更改状态事件？

我已经尝试捕获表格单击事件，但是每次用户单击单元格时都会触发此事件（我不知道复选框状态是否已更改）。请给我一个解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:23:47.367

尝试`QStandardItem::checkState()`检索`Qt::CheckState`复选框。如果您需要知道状态是否发生变化，则将旧状态保存在某处并检查单击事件上的状态是否发生变化。

# jquery-mobile - 日期框不会在动态注入页面中弹出，jquery mobile

> ID：12016790
> 
> 赞同：1
> 
> 时间：2012-08-18T07:30:38.883
> 
> 标签：jquery-mobile

数据框插件在静态 jQuery Mobile html 页面中运行良好。header 中定义的脚本是：

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.js"></script> 
```

日期框输入的行是：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "flipbox","useFocus": true}'> 
```

但是，一旦我将其他一些元素动态注入到同一页面中，例如

```
$(document).bind("pagebeforechange", function route(e, data) {
    ...
    $page.trigger('create');
    ... 
```

结果，我可以看到所有元素都显示得很好，包括日期框按钮。但是单击日期框按钮不会弹出任何内容。

我比较了增强后的两个版本的html代码。我发现动态的漏掉了以下，对应弹出的日期对话框：

```
<div class="ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden pop ui-body-b"
    ... 
```

为什么动态方式会错过生成上面的代码？我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:02:03.990

我自己找到了解决方案。是要改变

```
 $page.trigger('create'); 
```

到

```
 $page.page(); 
```

但我不知道为什么以及这两者的根本区别。请帮忙！

# javascript - 表单 onsubmit 调用中的“This”关键字

> ID：12016795
> 
> 赞同：2
> 
> 时间：2012-08-18T07:31:54.360
> 
> 标签：javascript

一段时间以来，我一直在寻找这个问题的答案，但没有运气。对于你们中的一些人来说，这可能是一个容易回答的问题。

在这个标签中：

```
<form method="post" action="" class="jcart" id="somethinghere" onsubmit="return validate(this)"> 
```

“this”关键字代表什么？

例如，如果我想从另一个 javascript 函数内部调用此表单上的“验证”函数，我该怎么做？

我知道是这样的：

```
<script type='text/javascript'>
function MyTest(){
validate(???);
}
</script> 
```

但我不知道应该在对 validate 函数的调用中放入什么。

**编辑**

这就是我想要做的。

我有一个通过 Ajax 提交的表单。它也有一些验证。但是，通常在提交表单时调用验证脚本。但是，Ajax 函数已经获得了提交按钮的“单击”并提交数据，因此表单永远不会以触发验证的方式“提交”。

我找到了这段代码，它负责通过 Ajax 提交表单。

```
 $('.jcart').submit(function(e) {
        add($(this));
        e.preventDefault();
    }); 
```

所以，我希望能够从那里运行验证函数，并且只有在验证通过时才调用 add() 函数。但我不知道如何从这里调用该函数，因为我不知道如何引用表单以获取与 onsubmit 调用中的“this”相同的元素引用。

**编辑 2**

我试过这个：

```
$('.jcart').submit(function(e) {
    if(validate(document.getElementById("somethinghere"))){
        alert("validated");
        add($(this));
        e.preventDefault();
    }
    else {
        alert("not validated");
        e.preventDefault();
    }
}); 
```

但我收到“未定义验证”错误。

此外，上面的代码在文档末尾加载，并且在开头调用具有 validate 函数的文件。所以当我尝试在这里调用它时，我会认为 validate 函数是可用的，因为它应该已经加载了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:42:42.207

在那种情况下，`this`表示事件发生的元素，即表单元素。

如果您想`validate()`从其他地方调用但让它验证*相同*的表单，那么只需获取对表单的引用`.getElementByid()`并传递：

```
function MyTest(){
  validate(document.getElementById("somethinghere"));
} 
```

（其中“somethinghere”是您表单的 ID。）

编辑：关于*您的*编辑：

> *“我找到了这段代码，它负责通过Ajax提交表单。”*

```
 $('.jcart').submit(function(e) {
        add($(this));
        e.preventDefault();
    }); 
```

您*确定*负责通过 Ajax 提交表单吗？它似乎是在具有“jcart”类的表单上创建提交处理程序，而您最初显示的表单没有该类。除非`add()`您未显示的功能提交“somethinghere”表单？

> *“但我得到一个'验证未定义'错误。”*

如果内联*在同一页面上*`submit="return validate(this);"`工作，则必须是全局函数，以便您可以从页面上的任何位置调用它。如果这不起作用，那么您的代码肯定比您显示的要多。*`validate()`*

# wordpress - 如何在wordpress的根目录中检索自定义字段？

> ID：12016798
> 
> 赞同：0
> 
> 时间：2012-08-18T07:32:44.033
> 
> 标签：wordpress

我已经创建了一个 redir.php 并放置在 wordpress 的主目录中以进行重定向。我想传入帖子 ID，然后检索帖子的自定义字段值并输入 header('location:'.$url);

redir.php 中的 www.mysite.com/redir.php?id=30 将检索 post id=30 自定义字段值并将其传递给 $url。

这就是我所拥有的，但它不起作用。它给了我“解析错误：第 5 行 \redir.php 中的解析错误”。

看起来 wordpress 环境没有被加载。

```
 <?php

    require('./wp-blog-header.php');
      $id = $_GET['id'];
  $url= get_field('deal_http_link',post->$id);
    header('Location:'.$url);
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:06:41.407

您的脚本有多个问题：

*   开始标记之前有空格`<?php`，因此重定向不起作用，因为标头已经发送。相反，`<?php`应该是文件中的第一件事。
*   `post->$id`是无效的语法。您可能指的是`$id`您在前一行中定义的变量。
*   要检索自定义字段的值，请使用[get_post_meta()](http://codex.wordpress.org/Function_Reference/get_post_meta)，而不是 get_field()。

尝试这样的事情：

```
<?php
require('./wp-blog-header.php');
$id = $_GET['id'];
$url = get_post_meta($id, 'deal_http_link', true);
header('Location: ' . $url);
exit(); 
```

# c# - 在没有用户包装程序的情况下从客户端应用程序执行系统存储过程 (sys.sp_helptext)

> ID：12016799
> 
> 赞同：4
> 
> 时间：2012-08-18T07:32:46.857
> 
> 标签：c#, sql-server-2008

我想创建一个接受一个参数的 C# 方法，即存储过程的名称。然后该方法将直接执行以下系统存储过程，而不使用用户定义的子例程来包装此调用。

```
sys.sp_helptext 'proc name' 
```

我得到错误：

> 找不到存储过程 'sys.sp_help_text

这是权限问题（我是我的测试数据库的管理员）还是资格问题？

```
public static string GetStoredProcedure(string objectName, string connectionString)
{

    using (SqlConnection sqlConnection = new SqlConnection())
    {
        sqlConnection.ConnectionString = connectionString;
        sqlConnection.Open();
        SqlCommand sqlCommand = new SqlCommand("sys.sp_help_text", sqlConnection);
        sqlCommand.CommandType = CommandType.StoredProcedure;
        sqlCommand.Parameters.AddWithValue("@objname", objectName);
        DataSet ds = new DataSet();
        SqlDataAdapter sqlDataAdapter = new SqlDataAdapter();
        sqlDataAdapter.SelectCommand = sqlCommand;
        sqlDataAdapter.Fill(ds);
        return DataTableToString(ds.Tables[0]);;   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:43:22.970

没问题，只是命名错误

尝试

```
SqlCommand sqlCommand = new SqlCommand("sys.sp_helptext", sqlConnection); 
```

代替

```
SqlCommand sqlCommand = new SqlCommand("sys.sp_help_text", sqlConnection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:39:26.987

您可能必须使用具有更多权限的登录名连接到数据库。使用您的应用程序使用的相同帐户登录后，尝试从管理工作室执行此 sp。

# json - 从 Posted 数据解析 Nodejs 中的 JSON 时出错

> ID：12016800
> 
> 赞同：0
> 
> 时间：2012-08-18T07:32:47.903
> 
> 标签：json, node.js, jquery, http-headers

我使用这个 jquery ajax 代码来传递 JSON：

```
var jsonObjects = [{id:1, name:"amit"}];

$.ajax({
 type: 'GET',
 url: 'http://localhost:8080',
 data: {
     jsonData: JSON.stringify(jsonObjects)
   },
   dataType: 'json',
   complete: function(validationResponse) {
  }
}); 
```

我已经使用这个节点 js 代码来解析 JSON 数据：

```
http.createServer(function (request, response) {
response.writeHeader(200, {
    "Content-Type": "text/plain"
});
 response.writeHead(200, {"Content-Type":"text/plain"});

  var theUrl = url.parse(request.url);
  var queryObj = queryString.parse( theUrl.query );
  var obj = JSON.parse( queryObj.jsonData);
  console.log(obj[0].id)
 response.write(String(obj[0].id))
   response.end();
}).listen(8080,'127.0.0.1'); 
```

但它在控制台中显示以下错误：

```
undefined:1
rn┴P║Eee
^
SyntaxError: Unexpected token u
at Object.parse (native)
at Server.<anonymous> (C:\node\nodejs\node_modules\17-8-12\tracker.js:79:22)

at Server.emit (events.js:70:17)
at HTTPParser.onIncoming (http.js:1610:12)
at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:91:29)

at Socket.ondata (http.js:1506:22)
at TCP.onread (net.js:374:27) 
```

然后代码停止..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:36:11.037

本节：

```
response.writeHeader(200, {
  "Content-Type": "text/plain"
});
response.writeHead(200, {"Content-Type":"text/plain"}); 
```

似乎乱码：那是您的真实代码吗？如果是这样，请删除前三行。如果这不能解决问题，`console.log` `request.url`首先，然后`queryObj.jsonData`看看它们是否合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:49:43.433

这不是您问题的直接答案，但我建议您查看[Express](http://expressjs.com/)和[bodyParser](http://expressjs.com/api.html#req.body)中间件。

他们可以执行以下操作：

```
var express = require('express');
var app = express();

app.get('/', function(req, res){
  console.log(req.query.jsonData);
  res.send('return data here');
});

app.listen(8080); 
```

# c++ - Box2D 结构初始化

> ID：12016802
> 
> 赞同：0
> 
> 时间：2012-08-18T07:33:29.947
> 
> 标签：c++, struct, box2d

我正在开发一个带有 Box2D 物理的简单游戏引擎。由于引擎是一个静态库，所有 Box2D 源代码都已内置到引擎自己的静态库中。

当我在发布模式上构建时，我收到一个错误，即“在此处声明了一个结构”

这是问题行

```
 // Initialize the separating axis.
    b2SeparationFunction fcn;
    fcn.Initialize(&cache, proxyA, sweepA, proxyB, sweepB, t1); 
```

b2SeparationFunction 是与上述两行位于同一文件中的结构

```
struct b2SeparationFunction
{

enum Type
    {
        e_points,
        e_faceA,
        e_faceB
    };

// TODO_ERIN might not need to return the separation

float32 Initialize(const b2SimplexCache* cache,
    const b2DistanceProxy* proxyA, const b2Sweep& sweepA,
    const b2DistanceProxy* proxyB, const b2Sweep& sweepB,
    float32 t1)
{
    m_proxyA = proxyA;
    m_proxyB = proxyB;
    int32 count = cache->count;
    b2Assert(0 < count && count < 3);

    m_sweepA = sweepA;
    m_sweepB = sweepB;

    b2Transform xfA, xfB;
    m_sweepA.GetTransform(&xfA, t1);
    m_sweepB.GetTransform(&xfB, t1);

    if (count == 1)
    {
        m_type = e_points;
        b2Vec2 localPointA = m_proxyA->GetVertex(cache->indexA[0]);
        b2Vec2 localPointB = m_proxyB->GetVertex(cache->indexB[0]);
        b2Vec2 pointA = b2Mul(xfA, localPointA);
        b2Vec2 pointB = b2Mul(xfB, localPointB);
        m_axis = pointB - pointA;
        float32 s = m_axis.Normalize();
        return s;
    }
    else if (cache->indexA[0] == cache->indexA[1])
    {
        // Two points on B and one on A.
        m_type = e_faceB;
        b2Vec2 localPointB1 = proxyB->GetVertex(cache->indexB[0]);
        b2Vec2 localPointB2 = proxyB->GetVertex(cache->indexB[1]);

        m_axis = b2Cross(localPointB2 - localPointB1, 1.0f);
        m_axis.Normalize();
        b2Vec2 normal = b2Mul(xfB.q, m_axis);

        m_localPoint = 0.5f * (localPointB1 + localPointB2);
        b2Vec2 pointB = b2Mul(xfB, m_localPoint);

        b2Vec2 localPointA = proxyA->GetVertex(cache->indexA[0]);
        b2Vec2 pointA = b2Mul(xfA, localPointA);

        float32 s = b2Dot(pointA - pointB, normal);
        if (s < 0.0f)
        {
            m_axis = -m_axis;
            s = -s;
        }
        return s;
    }
    else
    {
        // Two points on A and one or two points on B.
        m_type = e_faceA;
        b2Vec2 localPointA1 = m_proxyA->GetVertex(cache->indexA[0]);
        b2Vec2 localPointA2 = m_proxyA->GetVertex(cache->indexA[1]);

        m_axis = b2Cross(localPointA2 - localPointA1, 1.0f);
        m_axis.Normalize();
        b2Vec2 normal = b2Mul(xfA.q, m_axis);

        m_localPoint = 0.5f * (localPointA1 + localPointA2);
        b2Vec2 pointA = b2Mul(xfA, m_localPoint);

        b2Vec2 localPointB = m_proxyB->GetVertex(cache->indexB[0]);
        b2Vec2 pointB = b2Mul(xfB, localPointB);

        float32 s = b2Dot(pointB - pointA, normal);
        if (s < 0.0f)
        {
            m_axis = -m_axis;
            s = -s;
        }
        return s;
    }
}

float32 FindMinSeparation(int32* indexA, int32* indexB, float32 t) const
{
    b2Transform xfA, xfB;
    m_sweepA.GetTransform(&xfA, t);
    m_sweepB.GetTransform(&xfB, t);

    switch (m_type)
    {
    case e_points:
        {
            b2Vec2 axisA = b2MulT(xfA.q,  m_axis);
            b2Vec2 axisB = b2MulT(xfB.q, -m_axis);

            *indexA = m_proxyA->GetSupport(axisA);
            *indexB = m_proxyB->GetSupport(axisB);

            b2Vec2 localPointA = m_proxyA->GetVertex(*indexA);
            b2Vec2 localPointB = m_proxyB->GetVertex(*indexB);

            b2Vec2 pointA = b2Mul(xfA, localPointA);
            b2Vec2 pointB = b2Mul(xfB, localPointB);

            float32 separation = b2Dot(pointB - pointA, m_axis);
            return separation;
        }

    case e_faceA:
        {
            b2Vec2 normal = b2Mul(xfA.q, m_axis);
            b2Vec2 pointA = b2Mul(xfA, m_localPoint);

            b2Vec2 axisB = b2MulT(xfB.q, -normal);

            *indexA = -1;
            *indexB = m_proxyB->GetSupport(axisB);

            b2Vec2 localPointB = m_proxyB->GetVertex(*indexB);
            b2Vec2 pointB = b2Mul(xfB, localPointB);

            float32 separation = b2Dot(pointB - pointA, normal);
            return separation;
        }

    case e_faceB:
        {
            b2Vec2 normal = b2Mul(xfB.q, m_axis);
            b2Vec2 pointB = b2Mul(xfB, m_localPoint);

            b2Vec2 axisA = b2MulT(xfA.q, -normal);

            *indexB = -1;
            *indexA = m_proxyA->GetSupport(axisA);

            b2Vec2 localPointA = m_proxyA->GetVertex(*indexA);
            b2Vec2 pointA = b2Mul(xfA, localPointA);

            float32 separation = b2Dot(pointA - pointB, normal);
            return separation;
        }

    default:
        b2Assert(false);
        *indexA = -1;
        *indexB = -1;
        return 0.0f;
    }
}

float32 Evaluate(int32 indexA, int32 indexB, float32 t) const
{
    b2Transform xfA, xfB;
    m_sweepA.GetTransform(&xfA, t);
    m_sweepB.GetTransform(&xfB, t);

    switch (m_type)
    {
    case e_points:
        {
            b2Vec2 axisA = b2MulT(xfA.q,  m_axis);
            b2Vec2 axisB = b2MulT(xfB.q, -m_axis);

            b2Vec2 localPointA = m_proxyA->GetVertex(indexA);
            b2Vec2 localPointB = m_proxyB->GetVertex(indexB);

            b2Vec2 pointA = b2Mul(xfA, localPointA);
            b2Vec2 pointB = b2Mul(xfB, localPointB);
            float32 separation = b2Dot(pointB - pointA, m_axis);

            return separation;
        }

    case e_faceA:
        {
            b2Vec2 normal = b2Mul(xfA.q, m_axis);
            b2Vec2 pointA = b2Mul(xfA, m_localPoint);

            b2Vec2 axisB = b2MulT(xfB.q, -normal);

            b2Vec2 localPointB = m_proxyB->GetVertex(indexB);
            b2Vec2 pointB = b2Mul(xfB, localPointB);

            float32 separation = b2Dot(pointB - pointA, normal);
            return separation;
        }

    case e_faceB:
        {
            b2Vec2 normal = b2Mul(xfB.q, m_axis);
            b2Vec2 pointB = b2Mul(xfB, m_localPoint);

            b2Vec2 axisA = b2MulT(xfA.q, -normal);

            b2Vec2 localPointA = m_proxyA->GetVertex(indexA);
            b2Vec2 pointA = b2Mul(xfA, localPointA);

            float32 separation = b2Dot(pointA - pointB, normal);
            return separation;
        }

    default:
        b2Assert(false);
        return 0.0f;
    }
}

const b2DistanceProxy* m_proxyA;
const b2DistanceProxy* m_proxyB;
b2Sweep m_sweepA, m_sweepB;
Type m_type;
b2Vec2 m_localPoint;
b2Vec2 m_axis;
} 
```

我得到的错误是：`C:\Users\david\Documents\Scales\ScalesEngine\src\Box2D\Collision\b2TimeOfImpact.cpp|327|note: '*((void*)(& fcn)+84).b2Vec2::x' was declared here|`

这个错误之前是这个：`include\Box2D\Common\b2Math.h|590|warning: '*((void*)(& fcn)+84).b2Vec2::x' may be used uninitialized in this function [-Wuninitialized]|`

我发现 strust 正在使用这个功能：

```
inline b2Vec2 b2Mul(const b2Transform& T, const b2Vec2& v)
{
    float32 x = (T.q.c * v.x - T.q.s * v.y) + T.p.x;
    float32 y = (T.q.s * v.x + T.q.c * v.y) + T.p.y;

    return b2Vec2(x, y);
} 
```

所以我认为问题就在这里，但我看不到它！

我正在使用 mingw 和 gcc，

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:13:28.147

首先，将 x 重命名为独特的名称，例如“my_field_named_x”，以便您可以更轻松地找到它，然后使用 -save-temps，[http](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html) ://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html并准确发布多少时间以及您的“my_field_named_x”出现在哪一行。我们将从那里开始。

# ruby-on-rails - 我如何在控制器中一个接一个地调用两个动作？

> ID：12016808
> 
> 赞同：0
> 
> 时间：2012-08-18T07:34:16.427
> 
> 标签：ruby-on-rails

我有一个场景，我调用一个渲染树结构的索引操作，现在我希望一旦创建了树结构，我想在该结构中嵌入我从 js 文件创建的另一个结构，这个 js 文件是响应同一控制器中的另一个操作，例如：-

```
 def index
     @pages.Page.all
    end

    def get_more_page
    @more_pages=Page.where(---some sql to fetch----)
     respond_to do |format|        
   format.js 
    end
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:42:30.943

调用一个接一个调用的函数：

```
def call2func
    index
    get_more_page

end 
```

# ruby-on-rails-3 - Rails 控制台中的资源助手

> ID：12016809
> 
> 赞同：4
> 
> 时间：2012-08-18T07:34:23.063
> 
> 标签：ruby-on-rails-3, rest

正如[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)中所给出的，创建一个资源丰富的路由还将向应用程序中的控制器公开许多帮助程序。例如，资源丰富的路线`resources :photos`将提供诸如 photos_path、new_photo_path 等帮助器。现在，我可以使用帮助器对象在 Rails 控制台中调用帮助器，例如`helper.link_to "this", "that"`. 但是在 rails 控制台中调用`helper.photos_path`不起作用，但是在控制器中可以访问这些帮助程序。为什么会这样？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T07:51:49.540

路由助手在`app`对象中可用，因此您可以通过这种方式访问​​它们

```
app.photos_path     # => "/photos" 
```

# ios - 如何在拆分视图iOS中将不同的视图加载到详细视图

> ID：12016811
> 
> 赞同：1
> 
> 时间：2012-08-18T07:34:25.907
> 
> 标签：ios, uisplitviewcontroller, ipad

我想知道如何将不同的视图从 rootview 加载到 detailView 中。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

        if (indexPath.row == 0) {
            SecondViewController *svc = [[SecondViewController alloc] init];

            //[self.navigationController pushViewController:svc animated:YES]; 

        }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:47:06.883

**有一个包含 2 个视图的`splitviewcontroller`数组，一个是根视图，另一个是详细视图，您可以更改此数组中的视图。如果您分配并初始化一个视图并将其替换为这两个中的任何一个，则此视图将替换`splitviewcontroller`.**

使用此代码为 rootview 的不同单元加载不同的视图。改变rootview的`didSelectRowAtIndexPath`方法如下：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UIViewController  *localdetailViewController = nil;

    if (indexPath.row==0)
    {

    DetailViewController *detailView=[[DetailViewController alloc] initWithNibName:@"DetailView" bundle:nil];

    localdetailViewController=detailView;

    detailView=nil;

    }

    if (indexPath.row==1)
    {

    SecondViewController *secondDetailView=[[SecondViewController alloc] initWithNibName:@"SecondDetailViewController" bundle:nil];

    localdetailViewController=secondDetailView;
    secondDetailView = nil;
    }

    UINavigationController *navController=[[UINavigationController alloc] init];

    [navController pushViewController:localdetailViewController animated:YES];

    YourSplitViewAppDelegate *delegate=[[UIApplication sharedApplication] delegate];

    NSArray *viewControllers=[[NSArray alloc] initWithObjects:[delegate.splitViewController.viewControllers objectAtIndex:0],navController,nil];

    delegate.splitViewController.viewControllers = viewControllers;

    [localdetailViewController release];

    [navController release];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T14:02:31.033

我的解决方案是使用将 Xcode 7.1.1 用于通用应用程序，使用情节提要、自动布局和大小类，为 iOS 9 构建...

我在当前/原始（不是替换/新/第二个）详细视图控制器的方法中使用了[Midhun MP](https://stackoverflow.com/users/1104384/midhun-mp)的[答案版本：](https://stackoverflow.com/a/12017225/1883707)`viewDidLoad`

显然首先为您的控制器导入正确的头文件：

```
#import "NEW_DetailViewController.h" 
```

然后在`viewDidLoad`方法内：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    <<OTHER_CODE>>

    if (<<INSERT_THE_LOGIC_YOU_NEED_TO_TRIGGER_THE_REPLACEMENT_DETAIL_VC>>) {
        NEW_DetailViewController *viewNewDetailVC = [[NEW_DetailViewController alloc] initWithNibName:@"NEW_DetailViewController" bundle:nil];

        UINavigationController *navController = [[UINavigationController alloc] init];
        [navController pushViewController:viewNewDetailVC animated:YES];

        NSArray *arraySplitViewControllers = [[NSArray alloc] initWithObjects:[self.splitViewController.viewControllers objectAtIndex:0],navController,nil];

        self.splitViewController.viewControllers = arraySplitViewControllers;
    }
} 
```

**注意**我可以在不加载 XIB 文件的情况下使此代码工作，在代码中构建整个替换细节 VC，`[[UIViewController alloc] init]`而不是`[[NEW_DetailViewController alloc] initWithNibName:@"NEW_DetailViewController" bundle:nil]`，但对我无法加载 XIB 文件感到沮丧，所以我坚持...

我尝试了许多不同 SO 答案的多种变体，试图解决成功加载 XIB 文件作为拆分视图控制器中的替换细节视图控制器的问题。

最后，[特拉维斯 M的](https://stackoverflow.com/users/1446573/travis-m)[这个回答](https://stackoverflow.com/a/28438798/1883707)给了我我需要的提示......

删除您迄今为止为创建新的 XIB 文件和`UIViewController`!

创建一个新文件并使其成为 UIViewController 的子类。看截图：

[![新 UIViewController 的新子类截图](../Images/967a6bc3b956bb4c61147bbcf0f231f4.png)](https://i.stack.imgur.com/hkfra.png)

**重要**的是确保您选中“同时创建 XIB 文件”复选框。

您不需要修改 的新子类`UIViewController`，除非您想对视图的内容进行编码。我只需要`UILabel`为我的解决方案添加一个，我使用 Interface Builder 完成了这个。

`NEW_DetailViewController`确保按照我上面的示例在代码中引用替换视图控制器。

而已！

在您的 XIB 文件中，您应该最终得到以下内容：

[![文件所有者 -> 子类：NEW_DetailViewController](../Images/c197df8e9e47882d20d1d0d5c2dfe8a4.png)](https://i.stack.imgur.com/yavcg.png)

[![文件所有者 -> 出口：查看](../Images/8510d375a284b4b41295a9dbb050f28d.png)](https://i.stack.imgur.com/Swyi6.png)

[![查看 -> 参考出口：查看](../Images/52b7486b6de31f204931bd737715d574.png)](https://i.stack.imgur.com/we7IR.png)

# c# - 将图像大小调整为特定宽度并固定高度

> ID：12016817
> 
> 赞同：3
> 
> 时间：2012-08-18T07:35:43.600
> 
> 标签：c#, asp.net

我想将大图像的大小调整为 150 像素的宽度，并且高度将是固定的。然后将图像保存到我网站的文件夹中。

示例：（宽度，高度）如果我将图像调整为 300 像素 * 300 像素，我将获得 150 像素 * 150 像素的调整后图像。如果我将图像的大小调整为 450px*300px，我将得到一个 150px*100px 的调整大小的图像。

关键是宽度和高度之间的比率将始终保持为 150 像素的宽度。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:43:11.943

[我在这里](https://stackoverflow.com/questions/991587/how-can-i-crop-scale-user-images-so-i-can-display-fixed-sized-thumbnails-without)找到了这个（不是我的）

```
private Bitmap ScaleImage(Image oldImage)
{
    double resizeFactor = 1;

    if (oldImage.Width > 150 || oldImage.Height > 150)
    {
        double widthFactor = Convert.ToDouble(oldImage.Width) / 150;
        double heightFactor = Convert.ToDouble(oldImage.Height) / 150;
        resizeFactor = Math.Max(widthFactor, heightFactor);

    }
    int width = Convert.ToInt32(oldImage.Width / resizeFactor);
    int height = Convert.ToInt32(oldImage.Height / resizeFactor);
    Bitmap newImage = new Bitmap(width, height);
    Graphics g = Graphics.FromImage(newImage);
    g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
    g.DrawImage(oldImage, 0, 0, newImage.Width, newImage.Height);
    return newImage;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T07:38:59.333

您可以使用样式表来完成此操作。首先，定义以下样式：

```
.thumb {
  max-width: 150px;
  max-height: 150px;
  width: expression(this.width > 150 ? "150px" : true);
  height: expression(this.height > 150 ? "150px" : true);
} 
```

然后，将此样式添加到您的图像标签中，如下所示：

```
<img class="thumb" ...> 
```

这次不要包括高度和宽度元素。

该样式的前半部分适用于支持 max-width 和 max-height 属性的浏览器——Chrome、Firefox、Opera 和 Safari。后半部分是针对 IE 的 hack，但事实并非如此。

这是一个示例：[jsFiddle](http://jsfiddle.net/f7Xsd/)

# html - 如何为 html(5) 中的所有页面创建全局标题？

> ID：12016819
> 
> 赞同：0
> 
> 时间：2012-08-18T07:35:51.063
> 
> 标签：html, header, include, global

我创建了一个 HTML 页面“header.html”。然后我需要在关于、服务、联系页面上实现相同的标题。

我知道我们可以通过 PHP Include 来做到这一点。但是作为一个 HTML 开发者，有没有办法在不使用第三方代码的情况下在 HTML 中使用这种方式，尤其是在 HTML 5 中？

我也开始知道 Dreamweaver 可以选择制作模板文件。但我不知道它在 Web 3.0 和 W3c 中是否有效。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:41:19.277

您需要像 PHP 或 Server Side Includes 这样的服务器端语言，或者使用 Dreamweaver 之类的工具，它会为您从部分中组装 HTML 文件，然后将这些部分上传到服务器。您不能仅使用 HTML 在浏览器端执行此操作。

# dynamics-crm - 回复 mscrm 2011 电子邮件实体中的功能

> ID：12016821
> 
> 赞同：3
> 
> 时间：2012-08-18T07:36:41.017
> 
> 标签：dynamics-crm, dynamics-crm-2011

Outlook 允许您将默认回复地址设置为您自己的电子邮件以外的其他内容，但您也可以在该字段中使用多个电子邮件地址，这将告诉收件人的邮件客户端回复电子邮件地址列表，而不是只是你的。是否可以在 mscrm 2011 中实现回复功能，是否存在开箱即用的功能？我想在 mscrm2011 中实现下面给出的链接的功能。 [http://www.howtogeek.com/howto/microsoft-office/send-email-replies-to-another-recipient-in-outlook-2007/](http://www.howtogeek.com/howto/microsoft-office/send-email-replies-to-another-recipient-in-outlook-2007/)。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:15:45.067

按照目前的设计，CRM 无法满足这一要求。如果您查看电子邮件提供商文档（它仅在 CRM 4 SDK 中可用，而不是 2011 SDK），则没有回复地址的属性。（这里是链接：http: [//msdn.microsoft.com/en-us/library/cc905922](http://msdn.microsoft.com/en-us/library/cc905922)）

如果您编写了一个自定义电子邮件提供程序，这可能是可能的，但如果您沿着这条路走下去，您将承担大量工作。

我建议调查一下这是否可以在 Exchange 服务器（或您使用的任何电子邮件系统）上。我绝不是 Exchange 专家，所以我不知道 Exchange 平台上有什么可能，但我确实知道 CRM 确实支持设置回复地址。

# objective-c - 如何生成与 django 生成的密码相同的密码？

> ID：12016827
> 
> 赞同：0
> 
> 时间：2012-08-18T07:37:19.603
> 
> 标签：objective-c, django-authentication

我正在使用 django.contrib.auth.hashers.make_password 方法来存储密码。有一个 iOS 应用程序将用户名和密码发送到我的 django 站点以进行身份​​验证。我希望他们发送加密密码而不是原始密码。但是不知道django是怎么加密密码的？其他平台的其他人如何生成相同的加密密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:59:06.553

Django 有多种方法可以用来加密密码。默认情况下使用 PBKDF2。

您可以查看您的 PASSWORD_HASHERS 列表以查看设置的内容：

> PASSWORD_HASHERS = ('django.contrib.auth.hashers.PBKDF2PasswordHasher', 'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher', 'django.contrib.auth.hashers.BCryptPasswordHasher', 'django.contrib.auth.hashers.SHA1PasswordHasher' , 'django.contrib.auth.hashers.MD5PasswordHasher', 'django.contrib.auth.hashers.CryptPasswordHasher', )

这是一篇关于在 iOS 中实现该算法的 SO 文章： [PBKDF2 using CommonCrypto on iOS](https://stackoverflow.com/questions/8569555/pbkdf2-using-commoncrypto-on-ios)

挑战将是密码被加盐。如果您不知道盐，则无法正确散列密码。因此，您需要将盐安全地发送到设备，以便您的输出哈希匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:06:49.720

版本 <1.4 是 SHA1，>=1.4 是 PBKDF2，查看表格

```
select * from auth_user; 
```

确保密码列是 algorithm$hash 检查[文档](https://docs.djangoproject.com/en/dev/topics/auth/)以获取详细信息。

# javascript - html5 canvas - 合并两个剪辑区域 - James Bond Gunbarrel

> ID：12016828
> 
> 赞同：3
> 
> 时间：2012-08-18T07:37:22.500
> 
> 标签：javascript, html5-canvas, geometry, clipping

我刚刚开始使用画布来获得这种效果：

“詹姆斯邦德枪管视图开始” [http://www.youtube.com/watch?v=sfXazFp68cE](http://www.youtube.com/watch?v=sfXazFp68cE)

我几乎到了那里：

[http://jsbin.com/uyaker/8/edit](http://jsbin.com/uyaker/8/edit)

现在你可以看到我用两个圆圈剪辑我的画布（至少我尝试这样做）......但问题是重叠的区域不再被剪辑......

```
ctx.clearRect(0, 0, canvas.width, canvas.height);    
ctx.save();
ctx.beginPath();
ctx.moveTo(0, 0);
ctx.lineTo(canvas.width, 0);
ctx.lineTo(canvas.width, canvas.height);
ctx.lineTo(0, canvas.height);
ctx.closePath();
ctx.moveTo(cx + r, cy);
ctx.arc(cx, cy, r, 0, Math.PI*2, true);
// check if to draw a fixed circle, every 200 pixels for 100 pixels
if(goingright && cx % 200 < 100) {
    ctx.moveTo(cx - cx % 200 + r, cy);
    ctx.arc(cx - cx % 200, cy, r, 0, Math.PI*2, true);
}
ctx.closePath();
ctx.clip();

ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.restore(); 
```

也许这种效果在不使用剪辑的情况下是可能的，但给画布一个 css 背景图像并绘制除圆圈之外的所有内容......但我真的不知道该怎么做：/。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:50:04.730

`Maybe this effect is possible without using clipping ... but I don't really know how to do that`

是的，有可能，您需要创建一个可以完成所有工作的路径：

```
context.beginPath();
context.moveTo(x, y);
// Draw your big shape, in your case is a rectangle (4 point)
context.lineTo(xn, yn);
context.closePath();
// Now the context knows that every path that will be added without .beginPath(), will clip the current path
context.arc(cx, cy, r, 0, Math.PI * 2, true);
context.closePath();
context.fill(); // Fill with color all the area except the arc 
```

示例：http: [//jsfiddle.net/drhWb/](http://jsfiddle.net/drhWb/)

保存、恢复和剪辑上下文是非常昂贵的操作，因此您应该使用这种方法是您需要采用的正确方法。

# android - 如何在 Android 中发出 SOAP 请求和响应？

> ID：12016829
> 
> 赞同：0
> 
> 时间：2012-08-18T07:37:29.683
> 
> 标签：android, web-services, soap

我想连接我的远程 SOAP Web 服务，因为我有 WSDL 文件我如何通过 XML 生成 soapRequest 并通过 Android 获取响应并保存在 XML 输出中通过使用 Ksoap2。

提前致谢。

# java - Java .class 是预期的

> ID：12016831
> 
> 赞同：0
> 
> 时间：2012-08-18T07:37:37.250
> 
> 标签：java

> **可能重复：**
> [尝试为银行应用程序调用名为 addAccount 的方法，但它一直给我 .class 是预期错误](https://stackoverflow.com/questions/12016317/trying-to-invoke-a-method-called-addaccount-for-a-bank-application-but-it-keeps)

我正在尝试为银行申请做学校作业。它应该有 addAccount 方法并从 2 个数组中获取 2 个参数；accountNumber 和 accountBalance 分别。我正在尝试将 accountNoArray 输入到 addAccount 方法中，但是当我这样做并调用它时，它说 .class 是预期错误

```
import java.util.*;
public class bank
{
public static void main(String[]args)
{
    Scanner sc = new Scanner(System.in);
    int choice = 0;
    int accountNo = 0;
    double accountBal = 0;
    int[] accountNoArray = new int[20];
    double[] accountBalArray = new double[20];
    displayMenu();
    System.out.print("Please Enter Your Choice: ");
    choice = sc.nextInt();
    switch(choice)
    {
        case 1 : addAccount(accountNo,accountBal,sc); break;
    }
}

public static void displayMenu()
{
    System.out.println("Menu");
    System.out.println("1\. Add an account");
    System.out.println("2.Search an account with the given account number");
    System.out.println("3.Display accounts below the given balance");
    System.out.println("4.Exit");
}   

public static void addAccount(int accountNo,double accountBal,Scanner sc)
{
    System.out.print("Please Enter NRIC Number: ");
    accountNo = sc.nextInt();
    System.out.print("Please Enter Account Balance: ");
    accountBal = sc.nextInt();
}
} 
```

# django - 将用户重定向到他们指定的电子邮件帐户，并预先填写收件人和消息字段

> ID：12016832
> 
> 赞同：0
> 
> 时间：2012-08-18T07:37:39.443
> 
> 标签：django, email

我有一个电子邮件地址“myaddress@gmail.com”。我创建了一个具有文本字段和按钮的 django 表单。我想将在文本框中键入消息的任何人重定向到他们各自的电子邮件，以便他们可以将键入的消息发送到“我的地址”。这意味着当他们登录到他们的电子邮件帐户时，他们的消息框应该已经填满了他们输入的消息，并且接收者字段应该已经有“myaddress@gmail.com”。问题是如何将用户重定向到他们的电子邮件帐户并预填充指定的字段。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:51:06.993

如果用户已经设置了一个**默认的电子邮件程序**，它们中的大部分都会被触发`mailto:`。我知道 gmail`mailto:`也可以使用，其他网络电子邮件服务也可以使用。所有桌面电子邮件客户端 -***仅当它被设置为默认电子邮件程序时才可以***运行`mailto:`

格式为：

`mailto:[emailaddress]?header=value&header1=value1....&headerN=valueN`

这是一个自动设置电子邮件主题的示例：

`<a href="mailto:me@gmail.com?subject=Hello%20there&body=Email%20Contents!">Email me</a>`

# asp.net - 比较日期验证器仅验证日期而不是月份和月份

> ID：12016835
> 
> 赞同：0
> 
> 时间：2012-08-18T07:38:26.633
> 
> 标签：asp.net, c#-4.0

我正在使用比较验证器来验证日期和日期。我想验证 To date 不能小于 From 日期。我在用

```
 <asp:CompareValidator ID="cmpvDate" runat="server" ControlToCompare="txtDateTo" Display="Dynamic" ValidationGroup="basic"
   ControlToValidate="txtDateFrom" ErrorMessage="To Date can't be less than From date"
  Operator="GreaterThanEqual" ForeColor="red" Type="Date"></asp:CompareValidator> 
```

但它只验证日期，而不是月份和年份。

请问有什么想法或建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:39:47.403

它看起来没问题（我对其进行了测试，它对我有用），除了你应该从日期和至今交换。

```
<asp:CompareValidator 
    ID="cmpvDate" runat="server" 
    ControlToCompare="FromDate" 
    Display="Dynamic" ValidationGroup="basic"
    ControlToValidate="ToDate" 
    ErrorMessage="To Date can't be less than From date"
    Operator="GreaterThanEqual" 
    ForeColor="red" Type="Date"/> 
```

发布更多代码，例如您如何执行 txtDateTo 和 txtDateFrom 输入，也许它在那里。否则，您的系统设置要使用什么日期设置，美国或英国？

# mysql - MySQL 多对一关系 - 是否需要主键？

> ID：12016838
> 
> 赞同：0
> 
> 时间：2012-08-18T07:39:15.730
> 
> 标签：mysql

有人可以帮助我理解这一点，因为我不确定我是否应该在其中包含一个主键，因为它看起来不像我需要它。

我有两个表结构如下：

> 表 1：程序
> program_id
> cycle_unit
> 
> 表 2：program_has_days
> 天
> 周
> program_id

一个程序可能需要很多天才能完成，因此该程序有一个表 2 中的时间表。时间表列出了该程序可以完成的一周中的哪一天（例如第 1 周的第 1 天，然后是第 2 周的第 3 天） . 所以在这里，它具有一对多的关系。我想知道我应该将主键（id）放到表 2 中吗？

我认为我不需要主键，因为我不会直接参考时间表。我总是参考 program_id 来获取时间表。在这种情况下，program_id 不能是主键，因为它不是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:44:48.963

如果您不打算在同一天/几周内运行许多程序，则无需在表 2 上进行 PK。

但是，如果您要在同一天/几周运行许多程序，那么您可能希望在表 2 上添加一个 PK，并在它们之间有第三个连接表。这样一来，您就不会在表 2 中针对同一天/周组合获得多行（即，没有必要为该特定天/周存在的每个程序保留一行）。尽管这会增加检查是否已经存在适当的日期/周的复杂性。

如果您有兴趣有效地搜索在特定日期/周运行的程序（但您说过您不是......），这种方法将特别相关。

另一种情况可能是，如果您需要一个程序在多个时间表上运行（例如，该程序将运行几个星期（正如您所概述的那样，每天都有不同的记录），但是该程序将再次在 6 中重新运行月在不同的日程安排日/周等。或者可能是 2 个不同但同时的日程安排？）。这将需要表 2 上的 PK 和连接表来跟踪单独的时间表或表 2 上的另一个键来区分记录属于特定日期/周/节目组合的时间表实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:55:37.563

**是的，好的做法；不，不需要。**每个表都有一个主键是一种很好的做法。如果您决定确实需要引用表的数据，这将在以后为您提供帮助*——*即使只是删除几行而不必指定*其他*一些唯一的字段集。

# jakarta-ee - 为什么 jaxrs 多部分请求会抛出 IllegalStateException？

> ID：12016842
> 
> 赞同：1
> 
> 时间：2012-08-18T07:39:54.953
> 
> 标签：jakarta-ee, jax-rs

为什么此代码返回此错误？

代码：

```
 @Path("/site/resource/upload")
    @Local
    @Stateless
    public class TreeResourceResourcesUpload extends TreeBaseResources {

    @POST
    @Produces( MediaType.APPLICATION_JSON )
    @Consumes( MediaType.MULTIPART_FORM_DATA )
    public TreeNodeTO uploadResource(@Context HttpServletRequest request) throws IOException, ServletException {
            for (Part part : request.getParts()) {
                System.out.println(part.getName());
            }
            return null;
    }
} 
```

错误：

```
Caused by: java.lang.IllegalStateException: PWC4016: Request.getParts is called without multipart configuration.  Either add a @MultipartConfig to the servlet, or a multipart-config element to web.xml 
```

系统：Glassfish 3.1.2.2 和 Sun JDK 7

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T08:26:38.417

如果你使用 jersey 作为 Servlet，你可以在 web.xml 中设置 multipart 参数

```
<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>
        com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
        <multipart-config>
            <location>/tmp</location>
            <max-file-size>20848820</max-file-size>
            <max-request-size>418018841</max-request-size>
            <file-size-threshold>1048576</file-size-threshold>
        </multipart-config>
</servlet>
<servlet-mapping>
    <servlet-name>jersey-servlet</servlet-name>
    <url-pattern>/rs/*</url-pattern>
</servlet-mapping> 
```

但我认为这种方法不是标准的。我一直在寻找 JAXRS 规范中的答案，但一无所获。所以我认为在 JAX-RS 中无法访问 .getPart

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:16:40.107

我似乎遇到了类似的问题。它看起来像错误[http://java.net/jira/browse/GLASSFISH-18444](http://java.net/jira/browse/GLASSFISH-18444)应该在 3.1.2.2 中修复，但不是吗？

# java - 缓存 DatastoreServiceFactory.getDatastoreService() 和 UserServiceFactory.getUserService() 的结果是否是一种好习惯

> ID：12016843
> 
> 赞同：3
> 
> 时间：2012-08-18T07:40:30.777
> 
> 标签：java, google-app-engine

查看 Google AppEngine的[教程](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)，我看到代码示例始终可以通过相应的“工厂”访问 DatastoreService 或 UserService。如果我正在编写类似 DAO 的包装器和便利 API，它们是否应该总是回到工厂提供服务？或者是否可以在长跨度的跨用户对象中维护对这些服务的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:40:12.007

`DatastoreService`是一个非常轻量级的类，[主要包装了一组属性](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/java/src/main/com/google/appengine/api/datastore/DatastoreService.java)。所以创建它应该很便宜，而且缓存它没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T18:09:37.900

您可能想在此处阅读有关线程安全的问题。

[Google App Engine (java) 服务类是线程安全的吗？](https://stackoverflow.com/questions/5128106/are-google-app-engine-java-service-classes-thread-safe/41449457#41449457)

总结一下：DatatoreService 类目前没有被标记为线程安全的，所以每次需要时从工厂获取一个可能是谨慎的。

# android - android SDK使用方法参考

> ID：12016844
> 
> 赞同：1
> 
> 时间：2012-08-18T07:40:42.190
> 
> 标签：android

学Android两个月了，有一点java知识但是没看过不知道怎么用android SDK参考。例如，如果我想做滑动标签，在views下，所有的我得到的信息，只是一系列“继承方法，公共方法等”。使用 SDK 参考时，我应该遵循任何特定的约定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:21:49.553

了解 Java 是 Android 开发的良好基础。如果您目前正在学习 Android 开发，我建议您准备一本书（适合您的需求）并看看 newBoston[系列](http://thenewboston.org/list.php?cat=6)。

我希望这有帮助。

# php - php PDO UPDATE 语句：哪个更安全？

> ID：12016848
> 
> 赞同：1
> 
> 时间：2012-08-18T07:41:21.287
> 
> 标签：php, mysql, pdo

我正在学习 PDO，并发现确保我的陈述正确工作很棘手。我有一个 PHP 函数，它通过简单地将数字 1 添加到总数中来更新我的数据库。

```
 function add_rating($place_id,$rating_id) {

    //make $db accessible inside the function
    global $db;

    // query v1
    $sql = "UPDATE places_ratings SET ? +1 WHERE place_id=?";
    $q = $db->prepare($sql);
    $q->execute(array($rating_id,$place_id));   

} 
```

我尝试了这种变体，但我都无法开始工作。我不知道我是不是用错了问号。我正在关注[本指南](http://www.phpeveryday.com/articles/PDO-Insert-and-Update-Statement-Use-Prepared-Statement-P552.html)以及[之前的 SO question](https://stackoverflow.com/questions/6464137/php-pdo-update-statement)。最后我尝试了一种第一次工作的不同方法，所以我很想重新使用它，因为它看起来也简单多了。

```
 function add_rating($place_id,$rating_id) {

    //make $db accessible inside the function
    global $db;

    // query v2
    $query = "UPDATE places_ratings SET $rating_id = ($rating_id +1) WHERE place_id = $place_id";
    $update = $db->query($query);

} 
```

我的问题是：哪种说法更好/更安全？其次，我对带有问号的第一个版本做错了什么？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:50:44.577

准备好的语句*不仅仅是*将变量复制粘贴到一段文本中。准备好的语句将*查询逻辑*和查询应该处理的*值分开。*它们在那里，所以你可以告诉你的数据库*“你应该这样做”*，让数据库理解它，然后给它应该用它做某事的值。逻辑本身不能是可变的，它需要在第一次完成。

因此，您只能对值使用占位符。您的查询需要阅读`UPDATE ... SET FIELD = VALUE WHERE FIELD = VALUE`。`FIELD`部分需要在声明中，`VALUE`您可以使用占位符的部分。看起来您的`$rating_id`变量是变量字段名称。首先，这是个坏主意。如果可能，您不应使字段名称可变。但是，如果必须，您不能为它们使用准备好的语句占位符。相反，您必须这样做：

```
$rating_id = 'field_name';
$query = "UPDATE places_ratings SET `$rating_id` = `$rating_id` + 1 WHERE `place_id` = ?";
$stmt = $db->prepare($query);
$stmt->execute(array($place_id)); 
```

您可以确保`$rating_id`安全并包含已知的白名单值。不要让用户以任何方式为其提供价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:55:56.773

一般来说，第一个示例中的准备好的语句更安全，因为它们不受 SQL 注入的影响。

您的示例不起作用，因为您无法`?`在准备好的语句中使用参数指定字段名称。即使您的 SQL 仍然是错误的，这也会扩展到

```
 UPDATE places_ratings SET whatever +1 WHERE place_id=? 
```

这是无效的。

如果您`$rating_id`是在代码中生成的，而不是从用户输入中获取的，则可以将这两种方法结合起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T07:47:54.913

请去了解[准备好的陈述](http://php.net/manual/en/pdo.prepared-statements.php)是什么。而且您还可以使用不会宣传不良做法和易受攻击的代码的[教程。](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

正确创建和使用的预处理语句总是比连接查询字符串更安全，因为预处理语句分别发送查询逻辑和数据。

此外，如果您使用的是 PDO，那么通常`bindParam()`应该优先使用方法，而不是直接在`execute()`方法中将值作为数组传递。这是因为，当在 中传递值时`execute()`，这些值被绑定为`PDO::PARAM_STR`，即使 DB 列期望为整数。

PS**停止** `global` **在您的代码中使用！**

# objective-c - ARC 中的 IBOutlet 发布并设置为零。如何避免这种情况？目标c

> ID：12016851
> 
> 赞同：0
> 
> 时间：2012-08-18T07:41:26.243
> 
> 标签：objective-c, ios, storyboard, automatic-ref-counting

我是 ARC 和 Storyboard 的新手。我已经`IBOutlet`从`UITableView`我的`UIViewController`. 一段时间后，我的`IBOutlet`设置为零，我无法从其他类重新加载它。这是我的`dataTable` `IBOutlet`：

```
@property (weak, nonatomic) IBOutlet UITableView *dataTable; 
```

一开始`dataTable`不是`nil`，但当我尝试从另一个类（通过appDelegate）访问它时不是。如何解决这个问题呢？

**更新** 我从我的`UIViewController`

```
[appDelegate.myClass loginWithUserName:loginField.text andPassword:pwdField.text]; 
```

完成后，我有数据要显示，我从`loginWithUserName`方法调用此代码：

```
 MyViewController *controller = [[AppDelegate sharedStoryboard] instantiateViewControllerWithIdentifier:@"MyViewController"];
   [controller audioLoaded]; 
```

这是我的方法`UIViewController`，它重新加载数据

```
 -(void) audioLoaded
 {
    //it is nil here
    [self.dataTable reloadData];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:43:07.857

将属性设置为强保留对象：

```
@property (strong, nonatomic) IBOutlet UITableView *dataTable; 
```

不过，从另一个视图控制器访问 UITableView 并不是一个好习惯。

编辑：

您应该重新考虑整个方法，将该逻辑从您的 appdelegate 移动到将执行登录的专用类。您可以创建一个带有表的 UIViewController 可以实现的简单协议，然后在调用 login 方法时，传递对当前视图控制器的引用，例如

```
loginWithUserName:andPassword:andCaller:(id<LoginDelegate>)sender 
```

LoginDelegate 在此行中的位置：

```
@protocol LoginDelegate
- (void)audioLoaded;
@end 
```

这样你就可以打电话

```
[sender audioLoaded]; 
```

# php - 时间格式：PHP

> ID：12016854
> 
> 赞同：0
> 
> 时间：2012-08-18T07:42:11.753
> 
> 标签：php, json

> **可能重复：**
> [php中的隐蔽时间格式](https://stackoverflow.com/questions/2741153/covert-time-format-in-php)

我从 mysql 数据库中获取 start_time 字段值`2012-08-14 21:30:00`

我想将它转换为 php 格式，如 2012-08-14T09:30 有什么方法可以做吗

这在 php 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:53:59.340

使用[strtotime()](http://www.php.net/strtotime)

```
$date = strtotime('2012-08-14 21:30:00');
echo date('Y-m-d\Th:i',$date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:06:06.170

请参阅此示例。对于所需的日期和时间格式：

```
$date=date("Y-m-d H:i:s");//get the current date
$d=strtotime($date);//convert in strtotime
echo $final_date=date("Y-m-d\Th:i:s",$d);//in the first argument of date ,put the format whatever you want,but be sure to convert it in strtotime first. 
```

# ruby-on-rails - 是否可以自定义外键以使用正则表达式

> ID：12016860
> 
> 赞同：1
> 
> 时间：2012-08-18T07:42:53.250
> 
> 标签：ruby-on-rails, ruby, regex, postgresql, activerecord

我们有一个简单的项目和订单模型。

```
orders(url)
items(title, orders_count) 
```

其中“url”可以是来自网络的任何 URL，例如[http://amzn.to/aCKiXO](http://amzn.to/aCKiXO)。我们想要做的是，如果用户为“url”输入“/items/7”，那么它的行为就像外键一样。所以像：

```
class Order < ActiveRecord::Base
  belongs_to :item, :foreign_key => :url, :regex => /items/n, 
                    :counter_cache => true
end

class Item < ActiveRecord::Base
  has_many :orders, :foreign_key => :url, :regex => /items/n, 
                    :dependent => :destroy
end 
```

这可能吗？我们在 Rails 2.3.8、Ruby 1.9.3 和 Postgresql 9.1 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:05:14.720

不，不可能添加执行正则表达式匹配的[外键约束](http://www.postgresql.org/docs/current/static/tutorial-fk.html)- 或者除了简单相等之外的任何内容。[请参阅有关约束](http://www.postgresql.org/docs/current/static/ddl-constraints.html)的 PostgreSQL文档。

你*可以*做的是：

*   在PL/PgSQL中编写一个[约束触发器](http://www.postgresql.org/docs/current/static/sql-createtrigger.html)来强制执行你想要的约束；

*   拆分出您要在应用程序中使用正则表达式添加约束的部分，并在仅包含该部分的列上定义外键约束；或者

*   当插入行时，使用`BEFORE INSERT OR UPDATE ... FOR EACH ROW`触发器在 PL/PgSQL 中将感兴趣的部分拆分出来，并将感兴趣的部分添加到仅包含该部分的外键列中。该应用程序不需要知道重复，因为数据库在幕后处理它。

# c# - SolrNet中是否有核心操作的类或方法？

> ID：12016861
> 
> 赞同：3
> 
> 时间：2012-08-18T07:43:01.187
> 
> 标签：c#, asp.net-mvc-3, solr, solrnet

我正在开发基于 ASP.NET MVC3 的电子商务网站。我已经实现了 SolrNet 3.6，它被配置为两个名为“core-indexing”和“core-live”的核心。'core-indexing' 用于索引数据，以避免停机。

现在我想在索引完成后重新加载“core-live”以反映实时核心的变化。

那么我该怎么做呢？SolrNet中是否有核心操作的类或方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:54:15.170

是的，SolrNet 中有一组[核心命令](https://github.com/mausch/SolrNet/tree/master/SolrNet/Commands/Cores)。[您可以通过查看CoreAdminTests.cs](https://github.com/mausch/SolrNet/blob/master/SolrNet.Tests/SolrCoreAdminTests.cs)中的单元测试来查看如何使用它们的一些示例。请注意，这些命令是最近添加的（在过去 6 个月内），并且可能只能通过从 GitHub 拉取最新代码并编译才能使用。我不记得核心命令是否在[SolrNet-0.4.0.2002](http://code.google.com/p/solrnet/downloads/list) Beta2 版本中可用。

# android - Android 通过地图导航

> ID：12016863
> 
> 赞同：1
> 
> 时间：2012-08-18T07:43:10.127
> 
> 标签：android, eclipse, android-emulator

在下面的代码中，当我使用位置控件切换位置时，​​地图的背景变为黑色。如何取回地图视图的显示？

```
private class MyLocationListener implements LocationListener
        {
            public void onLocationChanged(Location loc)
            {
                if(loc!=null)
                {

                    Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());

                    try
                    {
                        List<Address> addresses = geocoder.getFromLocation(loc.getLatitude() / 1E6, loc.getLongitude() / 1E6, 1);
                        String add = "";
                        if (addresses.size() > 0)
                        {
                            for (int i =0;i<addresses.get(0).getMaxAddressLineIndex();i++)
                            {
                                add += addresses.get(0).getAddressLine(i) + "\n";
                            }
                        }
                        Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
                    }

                    catch(IOException e)
                    {
                        e.printStackTrace();
                    }

                }

                    p = new GeoPoint((int)(loc.getLatitude() * 1E6),
                            (int)(loc.getLongitude() * 1E6));

                    mc.animateTo(p);
                    mc.setZoom(18);
                }

            public void onProviderDisabled(String provider)
            {

            }

            public void onProviderEnabled(String provider)
            {

            }

            public void onStatusChanged(String provider, int status, Bundle extras)
            {

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:10:00.057

这里有几件事可能导致地图变黑或整个屏幕变黑（即无响应），因为您没有提到地图只是变黑还是屏幕变得无响应我将假设屏幕变得无响应：

1.) 你还没有初始化你的 MapController mc。如果你没有这样做。

2.) 这行代码似乎不正确：

```
 List<Address> addresses = geocoder.getFromLocation(
                           loc.getLatitude() / 1E6, loc.getLongitude() / 1E6, 1); 
```

我怀疑这段代码错误的原因是因为 loc.getLatitude() 会以度数的形式返回一个纬度（比如 18.9647 所以如果你将它除以 1E6 你会得到一个非常小的数字，我怀疑是'不是你的想法，所以不要除以 1E6。

# jquery - jquery找不到选定的值

> ID：12016867
> 
> 赞同：0
> 
> 时间：2012-08-18T07:43:23.880
> 
> 标签：jquery

jQuery 在脚本中的行为非常奇怪。基本上，在使用 jquery 更新 DOM 之后，我试图获取已使用 ID 插入到 DOM 中的文件输入的值。但是如果我尝试直接访问文件元素，我会得到一个空字符串。但是，如果我尝试从父 div 开始访问文件，我会得到正确的值。不幸的是，我需要直接访问它：

```
alert($("#input_id").val()); //returns empty string
alert($("#div_id > #input_id").val()); //returns correct value. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:17:28.553

很可能你有双重 id，有些地方检查我的小提琴，看看你之前所说的关于每个函数的内容并不能证明你没有重复的 id。如果您在类似 linux 的系统上，查找重复项的最佳方法是进行搜索或 grep。

```
find . | xargs grep "input_id" 
```

[http://jsfiddle.net/8X2Xq/1/](http://jsfiddle.net/8X2Xq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:48:11.353

您在文档中有重复的 ID，请尝试使 ID 唯一。正如 jQuery 文档所说，如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择 DOM 中的第一个匹配元素

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T07:55:37.693

正如**Pablo Karlsson**所建议的，我相信可能有多个元素具有相同的 id，因此 jquery 未能使用它的 id 识别元素的值。

如果您打算直接访问元素值，为什么不能在 jquery 中使用类名特定选择器（如果您有任何类名已应用于您的输入元素）。

# java - swing：让窗口永远不会失去焦点

> ID：12016868
> 
> 赞同：0
> 
> 时间：2012-08-18T07:44:10.877
> 
> 标签：java, swing

> **可能的重复：**
> [使用 Java 的“始终在顶部”Windows](https://stackoverflow.com/questions/297938/always-on-top-windows-with-java)

我正在使用 JFrame

我有一个从 MainMenu 中的按钮调用的窗口（前帐户）。

只要打开帐户，我就想禁止用户访问 MainMenu（应该是可见的），除非他关闭帐户窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:51:37.423

这意味着您需要您的窗口是模态的。JDialog 可以是模态的，您可以像这样在构造函数中提及这一点：

```
new JDialog(parent, true); 
```

或者从 Java 1.6 开始，您可以设置 ModalityType：

```
new JDialog(parent, modalityType); 
```

# android - 链接到第三方库（jar）中包含的服务

> ID：12016879
> 
> 赞同：1
> 
> 时间：2012-08-18T07:45:33.697
> 
> 标签：android, android-layout, android-intent, android-emulator

我知道并尝试过在 android 中创建系统服务，如下所述：http: [//processors.wiki.ti.com/index.php/Android-Adding_SystemService](http://processors.wiki.ti.com/index.php/Android-Adding_SystemService)

问题是关于如何使用放置在包含服务实现的框架中的第三方 jar。提供了 AIDL 文件，这些文件公开了服务的功能。

我的问题是，在构建源代码后，如何从第三方应用程序绑定到服务，在源代码树中提供以下内容：

(1)`jar - Linux/android/vendor/companyname/libs/frameworks`

(2)`AIDL - Linux/android/frameworks/base/core/java/ny/co/companyname/bluetooth/api`

如果需要对上述内容进行任何澄清，请告诉我。

任何帮助深表感谢

**PS：**

为了测试，我们使用 lib(jar) 和 AIDL 作为 android 应用程序的一部分，通过观察`onServiceConnected`回调内部的日志，我们可以看到使用 bindservice 正确绑定了服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:16:40.130

为了使服务正常工作，必须在 R.java 文件中生成存根。

现在在这里（可能是因为 ADT 错误），为了在 R.java 文件中生成存根定义，您必须将 AIDL 文件保存在您的 src 文件夹中，并使用相同的命名包。

在您的情况下，在项目的 src 文件夹中，创建一个包

Linux/android/frameworks/base/core/java/ny/co/companyname/bluetooth/api

并将您的 AIDL 文件放入其中。

你可能会遇到命运。:)

# jquery - CSS Top / Left 属性和 Jquery 动画

> ID：12016882
> 
> 赞同：0
> 
> 时间：2012-08-18T07:46:32.037
> 
> 标签：jquery, css, jquery-mobile

在一个页面上，我有两个 div，可以说 Left_Div 和 Right_Div。在右侧 div 上，我使用 CSS 的 Top 和 Left 属性定位了多个图像。Left_Div 用作左侧面板，在按钮上单击我为 Left_Div 和 Right_Div 设置动画以向右滑动，Left_Div 变为可见。就像 facebook iphone 应用程序上的左侧菜单一样。

```
 $("#Right_Div").animate({ marginLeft: "600px" }, 500);    
 $("#LeftDiv").animate({ width: "600px", opacity: 1 }, 500); 
```

问题是当 Left_Div 和 Right_Div 滑动时，使用 Left 和 Right 属性定位的图像不会移动，因此它们会与 Left_Div 重叠。任何人都请帮助我如何使用 DIV 移动图像。

我不想再次休息顶部/左侧属性，因为有太多图像并且它们是动态加载的。

我希望我已经解释了我的问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:05:01.593

如果您想要动态运动，您无法给出准确的位置。

通过说图像是从左侧开始的一定数量的像素，无论如何，图像将始终准确地存在。

您将不得不使用浮动逻辑，例如，您可以分配`float: left`或分配给`float: right`您想要在左侧或右侧并排排列的所有组件。

然后，当您移动一个元素时，所有其他设置为浮动在它旁边的元素都会随之移动。

### [演示](http://jsfiddle.net/YMAyw/)- 使用动画逻辑的浮动示例

在演示中，您现在可以看到应用浮动时元素如何相互移动。

上面的 DEMO 有以下 HTML：

```
<div id="Left_Div">My left div</div>
<div id="anotherLeftdiv">My other left div</div>
<div id="anotherRightdiv">My other right div</div>
<div id="Right_Div">my right div</div>​ 
```

CSS：

```
#Left_Div, #anotherLeftdiv{
    float: left;
}

#Right_Div, #anotherRightdiv{
 float: right;   
} 
```

脚本：

```
$("#Left_Div").animate({ width: "150px", opacity: 1 }, 500);
$("#anotherRightdiv").animate({ marginRight: "100px" }, 500); 
```

我希望这是有道理的。如果没有您当前确切的 CSS 和 HTML，很难准确地告诉您必须更改哪些内容。

**编辑**我在右侧 div 中添加了 4 个图像，并使用而不是固定定位
将它们放置到 4 个角中。`float``clear`

**只要它们没有**得到任何固定位置，它们就会简单地随着 div 的动画移动。

### [演示](http://jsfiddle.net/QUzg2/)- 带有浮动图像的动画

图像位于 div 容器中，`float: left`例如`clear: right`，您可以告诉图像一直向左移动，并在其右侧强制中断。因此使用 float:left 的任何其他图像都将被迫进入下面的行。

这同样适用于`float:right`and `clear: right`，这些设置会强制图像保持在右侧并强制在其右侧中断，从而强制任何其他图像`float: right`进入下面的行。

查看 HTML 中的图像：

```
<div id="Right_Div">
    <img class="left" src="http://www.fileden.com/files/2012/6/19/3318010/Eraser.png"/>
    <img class="right" src="http://www.fileden.com/files/2012/6/19/3318010/Script.png"/>
    <img class="left" src="http://www.fileden.com/files/2012/6/19/3318010/Ok.png"/>
    <img class="right" src="http://www.fileden.com/files/2012/6/19/3318010/Decrease%20time.png"/>
</div>​ 
```

强制图像进入角落的样式：

```
img.left{
    float: left;
    clear: right;
}

img.right{
    float: right;
    clear: right;
} 
```

我希望这有帮助。你现在应该有很多东西可以玩了。

如果您现在遇到任何关于您的特定实现或任何您无法解决的 CSS 的问题，那么完成这个问题并询问一个发布您遇到问题的特定代码的新问题会更容易。

# tomcat - 如何配置 Tomcat 7.x 的环境变量？

> ID：12016892
> 
> 赞同：1
> 
> 时间：2012-08-18T07:48:48.063
> 
> 标签：tomcat

我google了一下，找到了几种方法，但它们是不同的，

有人告诉我，我只需要创建名为“CATALINA_HOME”的环境变量，

但有人告诉我创建四个变量：CATALINA_HOME、CATALINA_BASE、CATALINA_TMPDIR

和 TOMCAT_HOME。

哪一个是对的？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:54:06.587

我遇到过同样的问题，

它们都需要设置，因为将它们设置到不同的位置在技术上是可以的。

你在做安装吗？我认为这些是通过运行配置脚本来设置的。

如果您仍然卡住，请告诉我，我花了一些时间设置 Tomcat 服务器。:)

~ 丹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:03:27.253

如果您使用 Eclipse，我建议您将其作为外部服务器运行，您所要做的就是将其解压缩到您想要的任何位置，并在 Eclipse 中添加一个指向其位置的新服务器，作为外部服务器使用它很容易服务器

# json - Ext.JSON.encode() 和 Chrome 的 JSON.stringify() 的不同 UTF-8-Handling

> ID：12016894
> 
> 赞同：3
> 
> 时间：2012-08-18T07:48:52.667
> 
> 标签：json, extjs, unicode, utf-8

在 Chrome 的控制台中使用时，我发现 Ext JS（版本 4.1）`Ext.JSON.encode()`和 Chrome（版本 21.0.1180.79）之间存在差异：`JSON.stringify()`

```
JSON.stringify({"title": "ä"})
> "{"title":"ä"}"

Ext.JSON.encode({"title": "ä"})
> "{"title":"\u00e4"}" 
```

由于我想在浏览器中显示结果，我更喜欢 Chrome 的结果，但我知道我不能真正依赖 Chrome 在其他浏览器中的 JSON 处理。那么如何使用 Sencha 的 Ext JS 实现 Chrome 的效果呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T15:42:17.663

您可以在 Extjs 4 中将 Ext.USE_NATIVE_JSON 设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T23:44:35.213

您需要知道该值是相同的。*\u00e4*是字符*ä*的真正 utf-8 表示。Chrome 可能会输出解码后的*ä*以获得更好的用户体验，但在解码时，两个值是相同的：

```
JSON.stringify({"title": "ä"})
> "{"title":"ä"}"
Ext.JSON.encode({"title": "ä"})
> "{"title":"\u00e4"}"
JSON.parse('{"title":"ä"}')
> Object {title: "ä"}
Ext.JSON.decode('{"title":"\u00e4"}')
> Object {title: "ä"}
JSON.parse('{"title":"\u00e4"}')
> Object {title: "ä"}
Ext.JSON.decode('{"title":"ä"}')
> Object {title: "ä"} 
```

# iphone - ios6标签栏显示问题

> ID：12016896
> 
> 赞同：-1
> 
> 时间：2012-08-18T07:49:05.483
> 
> 标签：iphone, ios6

我提出了申请。现在我正在测试应用程序`iOS beta 6`。一切正常，但小标签栏反射层出现在标签栏上方。我不明白为什么会出现这种情况。

我附上了一张截图，它到底是什么样子的。

![在此处输入图像描述](../Images/d9c6d4626fee29e7f2da67480e7fb39d.png)

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:37:43.140

我已经解决了这个问题。我不知道原因，但它有效。

我用过 `[self.tabBarController.tabBar addSubview:bgImgView]`而不是

```
[self.tabBarController.tabBar insertSubview:bgImgView atIndex:1] 
```

它适用于 iOS 6。现在我没有得到标签栏的反映。

# apache - 如何限制用户跨多个 Web 服务器和连接的总带宽？

> ID：12016904
> 
> 赞同：1
> 
> 时间：2012-08-18T07:50:09.637
> 
> 标签：apache, nginx, limit, bandwidth, throttling

我有一个网络服务，用户通过 apache2 反向代理下载文件。

我将 mod rewrite 和 P 标志与 rewrite map 结合使用。

基本上它看起来像这样：

```
<Location /my-identifier>
    RewriteEngine on
    RewriteRule /my-identifier/(.*) ${my-rewrite-map:$1} [P]
</Location> 
```

我知道我可以使用 mod_bandwidth 或类似的东西限制一个连接的带宽，甚至每个服务器的一个 IP 地址。

但是，我希望限制仅对某些用户（即那些产生大量流量并超过合理使用量的用户）生效。

我还希望它跨越多个服务器。

如果有帮助，我可以设置自定义环境变量（我可以完全控制可以将其编码到的 URL，并可以使用重写规则进行设置）！

基本上我想要的是例如对于达到极限的用户仅获得 5 mbps 的速度，无论他们使用多少连接或连接到多少服务器。

有可能吗？有模块吗？

我的想法将是一个集中的数据存储，服务器在其中报告每个 ip 的流量统计信息。可能是某种 RRD 数据结构。然后他们可以在指定的时间间隔（例如最后 60 秒）内选择 ip 的流量并根据它应用节流因子。

但我真的不想自己做这一切，我可以，但需要几个月的时间......我也不受 apache 的约束。我也在使用 Nginx 服务器来做同样的事情，如果有 Nginx 的东西我可以切换到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:00:07.317

我不了解 Apache，但是由于您将 Nginx 列为标签，那么像下面的方法怎么样？

使用或多或少的以下配置将 Nginx 设置为 Apache 服务器或 Web 服务的反向代理：

```
upstream serverlist {
  server www1.example.com;
  server www2.example.com;
  server www3.example.com;
}

location / {
  proxy_pass http://serverlist;
} 
```

您拥有的“整体连接”要求不能直接映射，但您可以通过将以下指令组合到 location 块中来合理地接近您想要的：

*   [limit_rate](http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate)这是每个连接
*   [limit_con](http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_conn)这允许您限制连接数
*   [limit_req](http://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req)这允许您限制请求/秒的数量和允许的突发
*   [limit_zone](http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html#limit_zone)为您的限制设置区域

[更新：这里](https://github.com/trbs/Nginx-limit-traffic-rate-module)有一个第 3 方 Nginx 模块限制每个 IP 的总速率。

# android - 无法理解 android 项目中的 .NAVI 扩展文件

> ID：12016906
> 
> 赞同：-1
> 
> 时间：2012-08-18T07:50:18.750
> 
> 标签：android

为什么我们在android中使用.NAVI文件。一些开发人员将此文件添加到项目中。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:59:02.827

There are no files named `.navi` in normal Android projects. If you have a `.navi` file in your project, please ask whoever gave you the project why they put a `.navi` file in the project.

# ruby-on-rails - 同一模型上的多对多关系（mongodb，rails）

> ID：12016908
> 
> 赞同：1
> 
> 时间：2012-08-18T07:50:39.243
> 
> 标签：ruby-on-rails, mongoid

在我的 mongodb/rails 项目中，我有类别和子类别。两者都使用相同的模型类别。每个子类别可以属于多个类别，类别也可以有多个子类别。

现在我不知道如何编码这种与模型的关系，因为我在两边都有相同的模型类别。我也欢迎一些示例，如何在 rails 中对 Category 的表单视图进行编码，以便能够将子类别添加到类别中。

我使用 mongoid 2.4，rails 3.2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:12:05.283

你想在`has_and_belongs_to_many`这里建立关系：

```
has_and_belongs_to_many :child_categories, class_name: "Category", inverse_of: :parent_categories
has_and_belongs_to_many :parent_categories, class_name: "Catgeory", inverse_of: child_categories 
```

一个用例：

```
film_category1 = Category.create(name: "French")
film_category2 = Category.create(name: "Spanish")
film_category3 = Category.create(name: "Romantic")
film_category1.child_categories << film_category3
film_category2.child_categories << film_category3

film_category3.parent_categories # [film_category1, film_category2]
film_category2.child_categories # [film_category3] 
```

等等

# android - Android Facebook 注销错误

> ID：12016911
> 
> 赞同：2
> 
> 时间：2012-08-18T07:51:06.503
> 
> 标签：android, facebook

我为用户提供了在我的 android 应用程序中注销的选项。***有时***注销过程会因以下错误而停止。

```
 08-18 00:44:25.253: W/System.err(510): com.facebook.android.FacebookError:auth.expireSession failed
 08-18 00:44:25.302: W/System.err(510):     at com.facebook.android.AsyncFacebookRunner$1.run(AsyncFacebookRunner.java:86)
 08-18 00:44:25.302: W/FacebookError(510): com.facebook.android.FacebookError: auth.expireSession failed 
```

这是我的注销代码。

```
 private void logout() {

    mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.logout(this, new RequestListener() {
          @Override
          public void onComplete(String response, Object state) 
          {
                 SessionStore.clear(home.this); // clear token and expire value
                 Editor editor = Prefs.edit();
                 editor.clear();
                 editor.commit();

                 cancelNotification();
          }

          @Override
          public void onIOException(IOException e, Object state) {
              Log.d("IOExcenption", e.toString());
          }

          @Override
          public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
              Log.d("FileNotFoundException", e.toString());
          }

          @Override
          public void onMalformedURLException(MalformedURLException e,
                Object state) {
              Log.d("MalformedUrlExpection", e.toString());
          }

          @Override
          public void onFacebookError(FacebookError e, Object state) {
              e.printStackTrace();
              Log.w("FacebookError", e.toString());
          }
        }); 
```

有人有这个问题吗？或者看到有什么不对？

# c# - ASP.net C# 图像处理

> ID：12016917
> 
> 赞同：1
> 
> 时间：2012-08-18T07:52:04.393
> 
> 标签：c#, image-processing, sms-gateway, kiosk

我正在使用 ASP.NET c# 和 MSSQL 为公共交通票务系统设计一个网站。所以当客户在网站上注册时，我想向他发送带有条形码的短信，以便在公共汽车上使用它来验证他。

所以在公共汽车上有KIOSK和一个条形码阅读器。当他先上公共汽车时，他必须验证自己......

所以我想实现这个：当乘客在他的手机中显示条形码的图像时，条形码应该将它与数据库进行比较，如果它被验证，如果没有给出错误消息，则继续..

请考虑我的问题，并足以回答..非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:59:32.493

通常条形码被比较为字符串，而不是图像。请注意，不建议将条形码作为图像存储在数据库中。您只需将条形码值（字符串）存储在数据库中，并将其与条形码识别结果进行比较。我们目前使用名为 Leadtools 的第三方工具包生成条形码（代码 93）。该工具包使您能够读取\写入常见的条形码。有关更多信息，请参阅以下链接： http: [//www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics.barcode~ba.topics.programmingwithleadtoolsbarcode.html](http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics.barcode~ba.topics.programmingwithleadtoolsbarcode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:56:39.023

条形码通常不是通过图像比较来实现的。

相反，条形码评估为字符串或数字，然后是某个地方的后端数据库的 PK。

（例如，检查厨房储藏室中的任何产品。条形码通常具有条形码所代表的数字的人类可读版本，写在条形码下方）。

您已经指定有一个条形码阅读器......这将完成阅读条形码并将生成的字符串/数字传递到系统的“繁重工作”。

# android - Android WifiManager.addNetwork() 返回 -1

> ID：12016918
> 
> 赞同：23
> 
> 时间：2012-08-18T07:52:28.187
> 
> 标签：android, android-wifi, wifimanager, wifi

我正在编写一个 android 应用程序，它将连接到特定的 WPA 接入点，连接后，它将发出一个 http 调用。它不会保存网络配置。我已经阅读了几乎所有关于连接到 wifi 网络的堆栈溢出的帖子，但找不到适合我的答案。这是我用来连接的代码..

```
 WifiConfiguration wc = new WifiConfiguration();
    wc.allowedAuthAlgorithms.clear();
    wc.allowedGroupCiphers.clear();
    wc.allowedPairwiseCiphers.clear();
    wc.allowedProtocols.clear();
    wc.allowedKeyManagement.clear();
    wc.SSID = "\"".concat("<ssid>").concat("\"");
    wc.preSharedKey = "\"".concat("<password>").concat("\"");
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN); // For WPA2
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA); // For WPA
    wc.priority = 0;
    //wc.hiddenSSID = true;
    wc.status = WifiConfiguration.Status.ENABLED;
    // connect to and enable the connection
    WifiManager wifiManager = (WifiManager) getSystemService(this.WIFI_SERVICE);
    int netId = wifiManager.addNetwork(wc);
    boolean wifiEnabled = wifiManager.enableNetwork(netId, true);
    wifiManager.setWifiEnabled(true);
    Log.d("opener", "addNetwork returned " + netId);
    if (netId > 0) {
        wifiId = netId;
    } 
```

但是 netId 始终为 -1。我已经在两款不同的手机（ICS：HTC Rezound 和 GingerBread：Motorola DroidX）上进行了尝试。两者都显示完全相同的结果。我究竟做错了什么？

编辑：我用 WPA2 接入点尝试了相同的代码，得到了非常奇怪的结果。运行此代码时，第一次它会返回 -1，但如果我第二次调用相同的方法并延迟 1 秒，它将返回有效的 netId。所以问题是

1.  为什么上面的代码没有连接到 wpa ？
2.  在 wpa2 中，为什么我需要调用上述方法两次才能连接？编辑：我观察到我必须连接多次才能连接。有时需要 3-4 次才能连接。所以现在我循环直到添加配置返回> 0 id。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-01T14:30:50.773

可能有点晚了，但尝试连接到 Open/WPA/WPA2/WEP 安全网络

```
 WifiConfiguration wifiConfig = new WifiConfiguration();
    wifiConfig.SSID = selectedNetwork.SSID();
    wifiConfig.status = WifiConfiguration.Status.DISABLED;
    wifiConfig.priority = 40;

    // Dependent on the security type of the selected network
    // we set the security settings for the configuration
    if (/*Open network*/) {
        // No security
        wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
        wifiConfig.allowedAuthAlgorithms.clear();
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
    } else if (/*WPA*/ || /*WPA2*/) {
        //WPA/WPA2 Security
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
        wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
        wifiConfig.preSharedKey = "\"".concat(password).concat("\"");
    } else if (/*WEP*/) {
        // WEP Security
        wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
        wifiConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
        wifiConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED);
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);

        if (getHexKey(password)) wifiConfig.wepKeys[0] = password;
        else wifiConfig.wepKeys[0] = "\"".concat(password).concat("\"");
        wifiConfig.wepTxKeyIndex = 0;
    }

    // Finally we add the new configuration to the managed list of networks
    int networkID = wifiMan.addNetwork(wifiConfig); 
```

显然，为适用的不同安全类型设置您自己的变量。连接到 WEP 安全网络的关键（请原谅双关语）是 getHexKey 方法，如下所示。

```
/**
 * WEP has two kinds of password, a hex value that specifies the key or
 * a character string used to generate the real hex. This checks what kind of
 * password has been supplied. The checks correspond to WEP40, WEP104 & WEP232
 * @param s
 * @return
 */
private static boolean getHexKey(String s) {
    if (s == null) {
        return false;
    }

    int len = s.length();
    if (len != 10 && len != 26 && len != 58) {
        return false;
    }

    for (int i = 0; i < len; ++i) {
        char c = s.charAt(i);
        if ((c >= '0' && c <= '9') || (c >= 'a' && c <= 'f') || (c >= 'A' && c <= 'F')) {
            continue;
        }
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-21T17:48:23.570

我发现如果共享密钥少于 8 个字符，它将返回 -1。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-08-20T07:25:40.993

问题是您正在尝试添加已经存在的网络配置。你打电话时：

```
int netId = wifiManager.addNetwork(wc); 
```

如果已经存在具有相同 SSID 的网络配置，它将失败（返回 -1）。所以，你需要做的是检查netId是否为-1，如果是，遍历配置的网络搜索具有相同SSID的网络，一旦找到，返回networkId。

科特林：

```
var netId = wifiManager.addNetwork(conf)
if (netId == -1) netId = wifiManager.configuredNetworks?.let {
    it.firstOrNull { it.SSID.trim('"') == ssid.trim('"') }?.networkId ?: -1
}
wifiManager.enableNetwork(netId, true) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-08T22:52:01.133

我刚刚遇到了同样的问题。看起来一切都很好，但后来 - 它不是。

我发现的是这样的：

*   Android WifiStateMachine 将不允许您添加或修改网络，除非请求者正在运行并连接到。这会影响启动时运行的服务和即使 WIFI 关闭也运行的服务。

*   Android WifiConfigStore 通过 UID 跟踪 wifi 网络的所有者。这意味着您可能无法修改由另一个进程创建的网络。

**添加**网络的正确方法是：

1.  检查是否启用了 WIFI 网络。如果没有，请致电`WifiManager.setWifiEnabled(true)`。
2.  等到`WifiManager.pingSupplicant()`返回真。
3.  创建并填充一个新的`WifiConfiguration`，然后将其传递给`WifiManager.addNetwork()`. 确保返回的值不是 (-1)。
4.  （可选）使用返回的值`addNetwork()`作为`WifiConfiguration.enableNetwork()`调用的参数（除非它是-1）。请注意，布尔参数意味着`disableOthers`并且应该是*false*，除非您有权修改所有其他网络：如果您将其设置为*true* ，它可能会在内部失败。

这应该允许您以编程方式添加（和连接）到新的 Wifi 网络。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-05T05:56:12.630

我有同样的问题。我发现当你调用 addNetwork 时你的 wifi 必须打开。

# java - Java：用户输入 - 扫描仪 - 程序在第二次输入后挂起

> ID：12016921
> 
> 赞同：1
> 
> 时间：2012-08-18T07:52:52.197
> 
> 标签：java, input, user-input, java.util.scanner

我正在制作一个基于控制台的二十一点游戏，提示用户询问他/她是否想要：“h”表示命中，“s”表示停留，或“q”表示退出。我正在使用 Scanner 类在 while 循环中接收用户的输入。该代码在第一次提示用户并接收输入时有效，但第二次就不再有效。在第二个提示出现后，无论用户键入什么，程序都只是等待并且什么也不做，即使它仍在运行。我一直试图让它工作几个小时，并阅读了 Java Docs、许多 SO 问题等。以下是相关代码：

```
public void gameloop() {
    while (thedeck.cards.size() >= 1) {
        prompt();
    }
}

public void prompt() {
    String command = "";
    Boolean invalid = true;
    System.out.println("Enter a command - h for hit, s for stay, q for quit: ");

    Scanner scanner = new Scanner(System.in);

    while (invalid) {
        if (scanner.hasNext()) {
            command = scanner.next();
            if (command.trim().equals("h")) {
                deal();
                invalid = false;
            } else if (command.trim().equals("s")) {
                dealerturn();
                invalid = false;
            } else if (command.trim().equals("q")) {
                invalid = false;
                System.exit(0);
            } else {
                System.out.println("Invalid input");
                scanner.next();
            }
        }
    }
    scanner.close();
} 
```

这是代码输出的内容：

```
Dealer has shuffled the deck.
Dealer deals the cards.
Player's hand:
Three of Clubs: 3
Five of Clubs: 5
Enter a command - h for hit, s for stay, q for quit: 
h
Dealer deals you a card:
Player's hand:
Three of Clubs: 3
Five of Clubs: 5
Queen of Hearts: 10
Enter a command - h for hit, s for stay, q for quit: 
h (Program just stops here, you can keep entering characters, 
but it does nothing even though the code is still running) 
```

任何关于出了什么问题的想法将不胜感激。我也意识到 while 循环有点难看，但我只想在开始修改任何代码之前让这个程序处于工作状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:55:09.870

从文档中`Scanner.close`：

> 当 Scanner 关闭时，如果源实现了 Closeable 接口，它将关闭其输入源。

在这里关闭扫描仪，这会导致`System.In`关闭，这意味着您无法再读取任何输入：

```
scanner.close(); 
```

最好打开扫描仪一次并重复使用。仅在确定您已完成读取所有输入或正在关闭您的应用程序时才关闭它。

# objective-c - 如何在 iPad 应用程序中集成 Facebook

> ID：12016925
> 
> 赞同：-1
> 
> 时间：2012-08-18T07:53:41.260
> 
> 标签：objective-c, ios, ios-simulator

我正在开发一个 ipad 应用程序，我想将 facebook 集成到我的应用程序中。我正在使用 xcode-5.1。我点击了此 URL 上的链接：http: [//developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)，但出现以下错误：

```
Lexical or Preprocessors Issue
1\. FBBatchRequestTests.h
'SenTestingKit/SenTestingKit.h' file now found.
2.Semantic issue
Use of undeclared identifier 'FB_IOS_SDK_VERSION_STRING'
3.FBCAcheTests.h
Lexical or preprocessor Issue
'SenTestingKit/SenTestingKit.h" file not found
4\. FBCommonRequestTests.h
 Lexical or preprocessor Issue
    SenTestingKit/SentestingKit.h file not found 
```

请帮我解决这些错误。还给我一些在 ipad 应用程序中集成 facebook 的相关 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:46:30.073

我建议扔掉你用来连接到该项目中的 facebook 并遵循[这个](http://www.raywenderlich.com/77/how-to-post-on-facebook-with-your-iphone-app)的任何代码。有用。我个人用过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:51:26.213

有一个新的 Facebook SDK 3.0，其中包含来自 FACEBOOK 的示例和教程。从这里下载：http: [//developers.facebook.com/blog/post/2012/08/07/facebook-sdk-3-0-for-ios/](http://developers.facebook.com/blog/post/2012/08/07/facebook-sdk-3-0-for-ios/)

你也可以在那里找到教程。

# ios - 使用日文键盘时不调用 UIKeyInput

> ID：12016928
> 
> 赞同：3
> 
> 时间：2012-08-18T07:54:03.723
> 
> 标签：ios

我有一个继承自**UIView**并符合**UIKeyInput** * *.h* *的类

```
@interface UIKeyInputExampleView : UIView  <UIKeyInput>{
    NSMutableString *textStore;
}

@property (nonatomic, retain) NSMutableString *textStore;

@end 
```

**.m**

```
@implementation UIKeyInputExampleView

@synthesize textStore;

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Initialization code
        self.textStore = [NSMutableString string];
        [self.textStore appendString:@"Touch screen to edit."];

        self.backgroundColor = [UIColor whiteColor];
    }
    return self;
}

- (void)dealloc {
    [textStore dealloc];
    [super dealloc];
}

#pragma mark -
#pragma mark Respond to touch and become first responder.

- (BOOL)canBecomeFirstResponder { return YES; }
-(void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event {
    [self becomeFirstResponder];
} 

#pragma mark -
#pragma mark Drawing

- (void)drawRect:(CGRect)rect {
    CGRect rectForText = CGRectInset(rect, 20.0, 20.0);
    UIRectFrame(rect);
    [self.textStore drawInRect:rectForText withFont:[UIFont fontWithName:@"Helvetica" size:24.0f]];
}

#pragma mark -
#pragma mark UIKeyInput Protocol Methods

    - (BOOL)hasText {
        if (textStore.length > 0) {
            return YES;
        }
        return NO;
    }

    - (void)insertText:(NSString *)theText {
        NSLog(@"Text have just enter:%@ length=%d ascii=%d",theText,theText.length,[theText characterAtIndex:0]);
        if ([theText isEqualToString:@"\n"]) {
            NSLog(@"Enter have just pressed!");
            [self resignFirstResponder];
        }
        self.textStore = (NSMutableString*)theText; 
        [self setNeedsDisplay];
    }

    - (void)deleteBackward {
        self.textStore = (NSMutableString*)@"delete"; 
        [self setNeedsDisplay];
    }

    @end 
```

当我使用英语或越南语键盘时，一切正常。但是当我使用**日文**键盘时，没有调用**任何事件，****也没有**抛出异常。我想我没有遵守一些协议

你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-18T12:15:52.037

花了一些时间，但最终它起作用了。
1\. 对于单个字符 - 我仍然使用 UIKeyInput 协议。
2\. 对于东亚语言，我使用 NSString 属性 intlInput 来获取所有输入字符。以下是允许执行此操作的 UITextInput 协议的两种方法。

```
- (void)setMarkedText:(NSString *)markedText selectedRange:(NSRange)selectedRange {
    self.intlInput = markedText;
}
- (void) unmarkText {
    if (!self.intlInput) return;
    for (int i=0;i<self.intlInput.length;i++) {
        [self sendChar:[self.intlInput characterAtIndex:i]];
    }
    self.intlInput = nil;
} 
```

sendChar - 是调用以获取组合输入的所有字符的任何方法。您可以在未标记文本时发布通知（选择了某种组合）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-11-29T03:04:20.727

我已经解决了这个问题，这个例子展示了如何在 ios 中将中文输入转换为 insertText。

```
#ifndef UIKeyInputExampleView_h
#define UIKeyInputExampleView_h
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

@interface UIKeyInputExampleView : UIView  <UIKeyInput,UITextInput>{
    NSMutableString *textStore;
}

@property (nonatomic, retain) NSString *textStore;

@end

#endif /* UIKeyInputExampleView_h */

//
//  UIKeyInputExampleView.m
//  CustomInput
//
//  Created by Gust on 2018/11/27.
//  Copyright © 2018 Gust. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "UIKeyInputExampleView.h"

@implementation UIKeyInputExampleView

@synthesize textStore;

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Initialization code
        self.textStore = [NSMutableString string];
        //[self.textStore appendString:@"Touch screen to edit."];
        //[self.textStore
        self.backgroundColor = [UIColor whiteColor];
    }
    return self;
}

- (void)dealloc {
    //[textStore dealloc];
    //[super dealloc];
}

#pragma mark -
#pragma mark Respond to touch and become first responder.

- (BOOL)canBecomeFirstResponder { return YES; }
-(void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event {
    [self becomeFirstResponder];
}

#pragma mark -
#pragma mark Drawing

- (void)drawRect:(CGRect)rect {
    CGRect rectForText = CGRectInset(rect, 20.0, 20.0);
    UIRectFrame(rect);
    [self.textStore drawInRect:rectForText withFont:[UIFont fontWithName:@"Helvetica" size:24.0f]];
}

#pragma mark -
#pragma mark UIKeyInput Protocol Methods

- (BOOL)hasText {
    if (textStore.length > 0) {
        return YES;
    }
    return NO;
}

- (void)insertText:(NSString *)theText {
    NSLog(@"Text have just enter:%@ length=%d ascii=%d",theText,theText.length,[theText characterAtIndex:0]);
    if ([theText isEqualToString:@"\n"]) {
        NSLog(@"Enter have just pressed!");
        [self resignFirstResponder];
    }
    self.textStore = (NSMutableString*)theText;
    [self setNeedsDisplay];
}

- (void)deleteBackward {
    self.textStore = (NSMutableString*)@"delete";
    [self setNeedsDisplay];
}

@synthesize beginningOfDocument;

@synthesize endOfDocument;

@synthesize inputDelegate;

@synthesize markedTextRange;

@synthesize markedTextStyle;

@synthesize selectedTextRange;

@synthesize tokenizer;

- (UITextWritingDirection)baseWritingDirectionForPosition:(nonnull UITextPosition *)position inDirection:(UITextStorageDirection)direction {
    return UITextWritingDirectionLeftToRight;
}

- (CGRect)caretRectForPosition:(nonnull UITextPosition *)position {
    return CGRectMake(0, 0, 10, 30);
}

- (nullable UITextRange *)characterRangeAtPoint:(CGPoint)point {
    return nil;
}

- (nullable UITextRange *)characterRangeByExtendingPosition:(nonnull UITextPosition *)position inDirection:(UITextLayoutDirection)direction {
    return nil;
}

- (nullable UITextPosition *)closestPositionToPoint:(CGPoint)point {
    return nil;
}

- (nullable UITextPosition *)closestPositionToPoint:(CGPoint)point withinRange:(nonnull UITextRange *)range {
    return nil;
}

- (NSComparisonResult)comparePosition:(nonnull UITextPosition *)position toPosition:(nonnull UITextPosition *)other {

    return NSOrderedSame;
}

- (CGRect)firstRectForRange:(nonnull UITextRange *)range {
    return [self bounds];
}

- (NSInteger)offsetFromPosition:(nonnull UITextPosition *)from toPosition:(nonnull UITextPosition *)toPosition {
    return NSIntegerMax;
}

- (nullable UITextPosition *)positionFromPosition:(nonnull UITextPosition *)position inDirection:(UITextLayoutDirection)direction offset:(NSInteger)offset {
    return nil;
}

- (nullable UITextPosition *)positionFromPosition:(nonnull UITextPosition *)position offset:(NSInteger)offset {
    return nil;
}

- (nullable UITextPosition *)positionWithinRange:(nonnull UITextRange *)range farthestInDirection:(UITextLayoutDirection)direction {
    return nil;
}

- (void)replaceRange:(nonnull UITextRange *)range withText:(nonnull NSString *)text {
    //NSLog(@"replaceRange %@",text);
}

- (nonnull NSArray<UITextSelectionRect *> *)selectionRectsForRange:(nonnull UITextRange *)range {
    NSArray *arr = NULL;
    arr = @[];
    return arr;
}

- (void)setBaseWritingDirection:(UITextWritingDirection)writingDirection forRange:(nonnull UITextRange *)range {
     //self.textStore = markedText;
}

- (void)setMarkedText:(nullable NSString *)markedText selectedRange:(NSRange)selectedRange {
    //NSLog(@"setMarkedText %@",markedText);
    self.textStore=markedText;
}

- (nullable NSString *)textInRange:(nonnull UITextRange *)range {
    //NSLog(@"textInRange ");
    return nil;
}

- (nullable UITextRange *)textRangeFromPosition:(nonnull UITextPosition *)fromPosition toPosition:(nonnull UITextPosition *)toPosition {
    return nil;
}

- (void)unmarkText {
    if (!self.textStore) return;
    [self insertText:textStore];
    self.textStore = nil;
    //NSLog(@"unmarkText ");
}

- (void)encodeWithCoder:(nonnull NSCoder *)aCoder {

}

+ (nonnull instancetype)appearance {
    return nil;
}

+ (nonnull instancetype)appearanceForTraitCollection:(nonnull UITraitCollection *)trait {
    return nil;
}

+ (nonnull instancetype)appearanceForTraitCollection:(nonnull UITraitCollection *)trait whenContainedIn:(nullable Class<UIAppearanceContainer>)ContainerClass, ... {
    return nil;
}

+ (nonnull instancetype)appearanceForTraitCollection:(nonnull UITraitCollection *)trait whenContainedInInstancesOfClasses:(nonnull NSArray<Class<UIAppearanceContainer>> *)containerTypes {
    return nil;
}

+ (nonnull instancetype)appearanceWhenContainedIn:(nullable Class<UIAppearanceContainer>)ContainerClass, ... {
    return nil;
}

+ (nonnull instancetype)appearanceWhenContainedInInstancesOfClasses:(nonnull NSArray<Class<UIAppearanceContainer>> *)containerTypes {
    return nil;
}

- (void)traitCollectionDidChange:(nullable UITraitCollection *)previousTraitCollection {

}

- (CGPoint)convertPoint:(CGPoint)point fromCoordinateSpace:(nonnull id<UICoordinateSpace>)coordinateSpace {
    return CGPointMake(0, 0);
}

- (CGPoint)convertPoint:(CGPoint)point toCoordinateSpace:(nonnull id<UICoordinateSpace>)coordinateSpace {
    return CGPointMake(0, 0);
}

- (CGRect)convertRect:(CGRect)rect fromCoordinateSpace:(nonnull id<UICoordinateSpace>)coordinateSpace {
    return CGRectMake(0, 0,1,1);
}

- (CGRect)convertRect:(CGRect)rect toCoordinateSpace:(nonnull id<UICoordinateSpace>)coordinateSpace {
    return CGRectMake(0, 0,1,1);
}

- (void)didUpdateFocusInContext:(nonnull UIFocusUpdateContext *)context withAnimationCoordinator:(nonnull UIFocusAnimationCoordinator *)coordinator {

}

- (void)setNeedsFocusUpdate {

}

- (BOOL)shouldUpdateFocusInContext:(nonnull UIFocusUpdateContext *)context {
    return YES;
}

- (void)updateFocusIfNeeded {

}

- (nonnull NSArray<id<UIFocusItem>> *)focusItemsInRect:(CGRect)rect {
    NSArray *arr = NULL;
    arr = @[];
    return arr;
}

@end 
```

# css - IE8/9/10 使用绝对定位实现悬停效果的问题

> ID：12016930
> 
> 赞同：0
> 
> 时间：2012-08-18T07:54:08.463
> 
> 标签：css, internet-explorer, hover, flicker

我不太确定我应该如何描述/命名问题。此问题存在于侧边栏右上角的 FB 'Like' 和 Twitter 'Tweet' 按钮。在其他浏览器中，它可以正常工作（即在悬停时会显示和可用），但在 IE8 中不起作用/9/10。

这是链接：[http ://billyf.site11.com/problem/singleblogpost-1.html](http://billyf.site11.com/problem/singleblogpost-1.html)

这是每个按钮的结构：

```
<div class="button">
    <img src="" alt="image shown before hover" />
    <div class="meta">
    //here is the button to be revealed on hover//
    </div>
</div> 
```

**它是如何工作** 的 当一个人悬停在 .button 上时，.meta 将显示（通过改变它的绝对定位），并且 .meta 将包含 FB Like 和 Twitter Tweet 按钮。

在 IE 中，如果您将鼠标悬停在按钮上并移动，“Like”和“Tweet”框会闪烁并且不可点击，因此它们完全没用。我尝试了 z-indexing，但仍然无法正常工作。我希望它像“评论”按钮（左侧的第一个按钮）一样工作。

感谢您的任何建议/帮助！

# ruby - 如何使用 Padrino 渲染图像？

> ID：12016931
> 
> 赞同：1
> 
> 时间：2012-08-18T07:54:14.710
> 
> 标签：ruby, rmagick, padrino

我需要使用 RMagick 在我的控制器中即时创建图像文件并将它们发送到浏览器。看起来很简单，但我找不到方法。我只是简单地尝试过`render`它们，但由于数据是二进制而失败。我也尝试过使用`send_data`，但帕德里诺说它不知道这种方法。

那么，我错过了什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T14:20:38.227

研究如何通过 Padrino 控制器发送文件我发现了这个问题，它帮助我实现了我的目标。

send_data 方法是 Sinatra 请求方法，已在 1.0 版中删除：[https ://github.com/sinatra/sinatra/blob/1.0/CHANGES#L108](https://github.com/sinatra/sinatra/blob/1.0/CHANGES#L108)

我使用的是 0.10.7 版的 Padrino，我的行为变成了这样：

```
get :screenshot, :provides => :jpg do
  ...
  File.open("path/to/file", "r").readlines
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T08:35:55.627

根据 sinatra api，你不再需要这个了。

```
get :image, with: id, provides: :png do
  img = Image.find(params[:id])
  img.binary_data_or_so
end 
```

基本上是一样的：

```
get '/send_binarydata' do
  content_type 'image/png'
  \x01\x02\x03
end 
```

# html - Metro App 中 HTML 上的 XPATH

> ID：12016932
> 
> 赞同：2
> 
> 时间：2012-08-18T07:54:25.640
> 
> 标签：html, xpath, windows-8, microsoft-metro, windows-runtime

有没有图书馆可以`XPATH`放弃`HTML`？

`HTML`.Net 框架有很多著名的解析器，但它们都不支持`WinRT`或`XPath`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:59:22.930

您是否尝试过在具有针对文档、节点、元素等的解析引擎的 HTML 文档上使用 System.XML 或 System.XML.Linq。

您还可以尝试在此链接上发布的用于 Metro 的 HTML Agility Pack：[https ://bitbucket.org/antiufo/htmlagilitypack-for-metro/](https://bitbucket.org/antiufo/htmlagilitypack-for-metro/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-19T04:02:58.100

[HTML Agility Pack](http://htmlagilitypack.codeplex.com/ "HTML 敏捷包")支持 HTML 文档上的 XPATH

# c++ - 如何在 C++ 中用 union 和 switch 表示 IDL

> ID：12016934
> 
> 赞同：2
> 
> 时间：2012-08-18T07:54:50.147
> 
> 标签：c++, middleware, corba, idl, remoteobject

我们发布 IDL 文件来表示接口，并且将具有与 C++/C 代码类似的结构，以便我们可以在调用接口时使用它们来映射它们。因此需要一些转换（等效）表示。
就像`sequence`IDL 中的a`list`在 C++ 等 中表示。

最近，我遇到了一个复杂（独特）的有效 IDL 文件，例如 -

```
union HostAddress switch(EAddType)
 {  
      case E_IPV_4:  
          char ipv4Addr[4];  
      case E_IPV_6:  
           char ipv6Addr[16]; 
 }; 
```

* * *

*   这个结构对我们有什么帮助？有这样的工会有什么意义？
*   我们如何在 C/C++ 中表示上述 IDL 结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:38:22.017

IDL 联合类似于 C 或 C++ 中的联合。这些字段共享相同的内存以节省空间。[您可以在IDL to C++ Mapping Document](http://www.omg.org/spec/CPP/1.3/)中找到关于 IDL union 如何映射到 C++ 的完整规则集。

一般来说，我的建议是避免它们。它们在 C++ 映射中令人困惑且难以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:03:13.640

联合结构为您提供了一个足够大以包含最大成员的不透明数据块。在这种情况下，您将拥有一个带有 type 字段的对象，然后是 16 个字节来包含 ipv6 地址，它还将存储 ipv4 地址，这使您可以编写可以同时处理 ipv4 和 v6 地址的简单代码，而无需花费完整的对象。联合通常用于像这样的小对象，在这种情况下，您将浪费空间来拥有一个可以处理所有情况的统一对象。参见[关于工会的维基百科文章和关于工会的维基](http://en.wikipedia.org/wiki/Union_%28computer_science%29)书籍[页面](http://en.wikibooks.org/wiki/C++_Programming/Unions)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:03:25.497

我确实在[Websphere 文档](http://publib.boulder.ibm.com/infocenter/adiehelp/v5r1m1/index.jsp?topic=/com.ibm.wasee.doc/info/ee/corba/ref/rcor_copunt.html)、[CORBA 文档](http://documentation.progress.com/output/Iona/orbix/gen3/33/html/orbix33cxx_pguide/Mapping.html)中找到了很好的解释。我特别喜欢 CORBA 文档中的详细解释。任何补充意见，请回复我的帖子！

所以下面的例子

```
union HostAddress switch(EAddType)
 {  
      case E_IPV_4:  
          char ipv4Addr[4];  
      case E_IPV_6:  
           char ipv6Addr[16]; 
 }; 
```

将被实施为 -

```
struct HostAddress
{
    EIPVSET _discriminant;
    long _d() { return _discriminant; }

    HostAddress() { _discriminant = E_IPV_INVALID; }
    string addressIpv6()   //get function overloaded
    {
       return string(this.ipv6Addr);
    }

    void addressIpv6(const string& ipv6Addr) //set function overloaded
    {
        strncpy(this.ipv6Addr,ipv6Addr.c_str(),16);
        return;
    }

    //similarly for other member variables.

} 
```

# dojo - 无法在对话框中呈现组合框

> ID：12016936
> 
> 赞同：0
> 
> 时间：2012-08-18T07:55:11.810
> 
> 标签：dojo

我想显示一个弹出对话框，其中包含使用 ajax 请求或数据存储填充的数据的 dijit.ComboBox。我面临的问题是组合框总是被禁用。

我选择的代码是：

```
<div dojoType="dojo.data.ItemFileReadStore" id="osTypeStore" data-dojo-id="osTypeStore" url="/AjaxPopulateOS.json">
                        </div>
                        <select id="osType" data-dojo-type="dijit.form.ComboBox"
                            data-dojo-props="
                                id:'osType',
                                store: osTypeStore,
                                placeHolder: 'Select a schdule type'" >
                        </select> 
```

![组合框错误](../Images/7627e0af25ba598208cd4021f8915960.png)

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:33:49.900

我相信是因为里面没有物品？它是否完全变灰 - 并且设置了 Disabled 类参数？

检查 dijit.byId('osTypeStore') 是否返回一个商店，并且其中有项目。

如果是这种情况，请将您的代码更改为

```
store: 'osTypeStore' 
```

注意引号。这会强制解析器将字符串评估为 dijit - 并且存储在读取时可能未正确初始化为真正的变量。换句话说，在组合框构造函数中 - javascript 变量是未定义的。

如果这没有帮助，请尝试在为您的对话框运行 onShow 后强制设置存储。

```
dialog.onShow = function() {
     dijit.byId('osType').set('store', dijit.byId('osTypeStore'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:57:49.190

尝试使用组合的属性强制启用它

`enabled: true,`

除此之外，使用 Firebug 或调试栏或类似的东西检查它:)

# jquery - jQuery，动画滚动到顶部，在它不断把我扔到顶部之后

> ID：12016938
> 
> 赞同：1
> 
> 时间：2012-08-18T07:55:17.043
> 
> 标签：jquery

因此，我使用 jQuery 制作了一个 div，您单击该 div，它会将您带到页面顶部，但是当您想要向下滚动时，它会一直将您带到顶部。有谁知道如何解决这个问题？

这是我的代码：

**HTML**：

```
<div id="div"></div> 
```

**CSS**：

```
#div
{

    background: url(slike/vrh.png) no-repeat;
    width: 45px;
    height: 45px;
    position: fixed;
    top: 93%;
    right: 1%;
    display: none;
    cursor: pointer;
} 
```

**jQuery** :

```
$(window).scroll(function()  {

  if($(window).scrollTop() > 0)  {

      $("#naVrh").show();
      $("#naVrh").click(function()
      {
           $("html, body").animate({scrollTop:0})
      });

  } 
  else
       $("#naVrh").hide();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:33:00.680

如果您的 div 的 ID 为`#div`，您为什么要`#naVrh`在您的 javascript 中定位？

此外，将某个函数绑定到一个事件是我们通常只尝试做一次的事情，只要该事件发生，该函数就会被执行。

您在滚动事件中绑定点击事件，因此每次滚动发生时您都绑定点击事件，或者换句话说，当用户触摸鼠标滚轮时您绑定点击事件几百次，这是一个非常糟糕的主意出于显而易见的原因。

尝试类似：

```
$(window).on('scroll', function() {
    $("#mydiv").toggle($(window).scrollTop() > 0);
});

$("#mydiv").on('click', function() {
    $("html, body").animate({scrollTop : 0}, 1000);
});​ 
```

[**小提琴**](http://jsfiddle.net/Zc2Lv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:02:15.840

[http://www.electrictoolbox.com/jquery-scroll-top/](http://www.electrictoolbox.com/jquery-scroll-top/) 正确语法见那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:08:03.780

```
$("#naVrh").unbind("click").click(myHandler); 
```

我认为您多次调用该事件。检查你的代码。

# cappuccino - 学习 Objective-J 和卡布奇诺的资源？

> ID：12016939
> 
> 赞同：2
> 
> 时间：2012-08-18T07:55:32.250
> 
> 标签：cappuccino

我注意到，出于某种奇怪的原因，绝对没有关于 Cappuccino Web 框架和 Objective-J 的书籍。

我真的很想学习这些，但除了网页上设置不佳（类似融合）的 wiki/reference 之外，我找不到任何资源。

Objective-J 和 Cappuccino 还有其他资源吗？最好是PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:25:34.853

不久前我遇到了完全相同的问题。

关于卡布奇诺的综合教程很少。只有部分文章可用。我建议先学习 Cocoa（尤其是 AppKit 和 Foundations）。由于 Cappuccino 是 Cocoa 的一个端口，您会发现您向 Cappuccino 和 Objective-J 的过渡会很顺利和容易。

[这里](https://stackoverflow.com/questions/1001517/learning-cappuccino?rq=1)还提到了一些非常好的教程。特别是，我喜欢这个：

[http://www.nice-panorama.com/Programmation/cappuccino/](http://www.nice-panorama.com/Programmation/cappuccino/)

# c# - 如何将一个 XML 文件拆分为多个 XML 文件

> ID：12016946
> 
> 赞同：8
> 
> 时间：2012-08-18T07:56:07.110
> 
> 标签：c#, xml, split

我正在尝试将一个 XML 文件拆分为 C#.net 中的多个小 xml 文件，并试图获得最好的方法。对此的任何帮助都会很棒......关于我正在尝试做的示例......

## 源 XML 文档

```
<?xml version="1.0" standalone="yes"?>
<DATABASE>
  <DOC>
    <DOCID>8510188</DOCID>
    <ISSUE>2010</ISSUE>
    <CAT>Literature and Art</CAT>
    <TITLE>Test</TITLE>
    <TEXT>Test</TEXT>
  </DOC>
  <DOC>
    <DOCID>1510179</DOCID>
    <ISSUE>2012</ISSUE>
    <CAT>Miscellaneous</CAT>
    <TITLE>Test</TITLE>
    <TEXT>Test</TEXT>
  </DOC>
</DATABASE> 
```

## 应拆分为两个 xml 文档，如下所示

1)

```
<?xml version="1.0" standalone="yes"?>
<DATABASE>
  <DOC>
   <DOCID>8510188</DOCID>
   <ISSUE>2010</ISSUE>
   <CAT>Literature and Art</CAT>
   <TITLE>Test</TITLE>
   <TEXT>Test</TEXT>
  </DOC>
</DATABASE> 
```

2)

```
<?xml version="1.0" standalone="yes"?>
<DATABASE>
  <DOC>
    <DOCID>1510179</DOCID>
    <ISSUE>2012</ISSUE>
    <CAT>Miscellaneous</CAT>
    <TITLE>Test</TITLE>
    <TEXT>Test</TEXT>
  </DOC>
</DATABASE> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T07:58:56.990

好吧，我会使用 LINQ to XML：

```
XDocument doc = XDocument.Load("test.xml");
var newDocs = doc.Descendants("DOC")
                 .Select(d => new XDocument(new XElement("DATABASE", d)));
foreach (var newDoc in newDocs)
{
    newDoc.Save(/* work out filename here */);
} 
```

（我假设您想保存它们。也许您不需要。我只是通过将它们打印到控制台来对此进行了测试。）

# ios - IOS收到内存警告

> ID：12016948
> 
> 赞同：0
> 
> 时间：2012-08-18T07:56:20.547
> 
> 标签：ios

为什么我在首选项同步后立即收到内存警告？谢谢。

```
- (void)fbDidLogin {
    NSLog(@"Did Log In");
    NSLog(@"Access Token is %@", shared.accessToken );
    NSLog(@"Expiration Date is %@", shared.expirationDate );

    NSString *accessToken = shared.accessToken;
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSString *expirationDate =[dateFormatter stringFromDate:shared.expirationDate ];

    **NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setObject:accessToken forKey:@"facebook-accessToken"];
    [prefs setObject:expirationDate forKey:@"facebook-expirationDate"];
    [prefs synchronize];**

    [[NSNotificationCenter defaultCenter] postNotificationName:@"FBDidLoginCalled" object:nil];
} 
```

# c# - 如何使应用程序设置独立于 .exe 路径？

> ID：12016949
> 
> 赞同：4
> 
> 时间：2012-08-18T07:56:20.227
> 
> 标签：c#, .net, application-settings

假设我想将我的应用程序从 c:\myapp.exe 移动到 d:\myapp.exe。它将失去所有设置。如何防止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:02:30.583

我个人使用注册表来保存和加载我的设置，因此我的应用程序的位置不受影响，但是如果您使用 User.Config 等并想要修复该位置，这可能会有所帮助： [我可以控制.NET 用户设置以避免丢失应用程序升级设置？](https://stackoverflow.com/questions/621265/can-i-control-the-location-of-net-user-settings-to-avoid-losing-settings-on-app)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T13:02:21.520

它是 LocalFileSettingsProvider 类的实现细节。它具有将用户范围的设置存储在保证是唯一的文件中的令人羡慕的工作，这样不同的应用程序就不会意外地覆盖彼此的设置。

它通过将文件存储在具有散列名称的 AppData 目录中来实现这一点。哈希是根据应用程序的几个属性计算的。它尽可能多地抓取，从 AssemblyInfo.cs 文件中的属性开始。特别是 [AssemblyVersion] 很重要，它可以检测到您的应用程序的新版本可能与 user.config 文件的旧版本不兼容。

但属性不足以使其唯一，它还在哈希中使用 .exe 的完整路径名。对于适当的 .config 文件，这是一个非常强大的选择器。

因此，不可避免地，如果您将 .exe 移动到其他地方，这将改变哈希值，这将使您获得一个空的 user.config 文件，其中所有设置都恢复为默认设置。

修补这个有点可疑，一个应用程序应该只有一个安装目录。c:\program files\companyname\appname 是标准。但是您可以通过实现自己的 SettingsProvider 类。这并不容易做到，System.Configuration 是一个非常讨厌的命名空间。但是一个不错的起点是[RegistrySettingsProvider 示例](http://msdn.microsoft.com/en-us/library/ms181001%28v=VS.80%29.aspx)，它可能可以按原样使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T13:51:33.270

这 100% 取决于应用程序。

应用程序本身只需要找到它的依赖项，或者它需要运行的 DLL 列表。大多数时候它会在当前目录中查找这些内容，因此这通常不是问题。

最大的问题是在注册表中。如果应用程序已将其安装位置写入注册表，它可能会在运行时在旧目录中查找某些文件。

如果您安装了该应用程序，它也会存储在注册表中，并且从添加/删除程序中卸载将不再起作用。

但是，如果应用程序不使用注册表，则可以将其移动而不会产生任何后果。许多使用闪存驱动器的便携式应用程序采用这种方法，因此可以根据需要移动或删除......

希望它对您的事业有所帮助..:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T05:43:05.720

您可以创建自己的设置类。它的工作原理与原版一样。下面我发布我的设置类的实现。任何改进将不胜感激。

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Reflection;
using System.Windows.Forms;
using Microsoft.Win32;

namespace MyNamespace
{
    static class Settings
    {
        private static string _connectionString = @"data source=C:\\database.s3db";

        public static string ConnectionString
        {
            get { return GetSetting("_connectionString"); }
            set { _connectionString = value; }
        }

        private static string _archives = "";

        public static string Archives
        {
            get { return GetSetting("_archives"); }
            set { _archives = value; }
        }

        public static bool CheckDuplicates
        {
            get { return bool.Parse(GetSetting("_checkDuplicates")); }
            set { _checkDuplicates = value; }
        }

        private static bool _saveDocks = true;

        public static bool SaveDocks
        {
            get { return bool.Parse(GetSetting("_saveDocks")); }
            set { _saveDocks = value; }
        }

        private static Font _font = new Font("Tahoma", 12, GraphicsUnit.Pixel);

        public static Font Font
        {
            get
            {
                var convert = new FontConverter();
                var value = convert.ConvertFromString(GetSetting("_font"));
                return (Font) value;
            }
            set { _font = value; }
        }

        public static void Save()
        {
            Type type = typeof(Settings);

            var registryKey = Registry.CurrentUser.CreateSubKey(string.Format(@"Software\{0}\{1}\Settings", Application.CompanyName, Application.ProductName));
            if (registryKey != null)
            {
                foreach (var field in type.GetFields(BindingFlags.NonPublic | BindingFlags.Static))
                {
                    var converter = TypeDescriptor.GetConverter(field.FieldType);
                    var value = converter.ConvertToString(field.GetValue(null));
                    registryKey.SetValue(field.Name, value ?? field.GetValue(null));
                }
                registryKey.Close();
            }
        }

        public static void SetDefaults()
        {
            var registryKey = Registry.CurrentUser.OpenSubKey(string.Format(@"Software\{0}\{1}\Settings", Application.CompanyName, Application.ProductName));
            if (registryKey == null)
            {
                Save();
            }
            else
            {
                registryKey = Registry.CurrentUser.CreateSubKey(string.Format(@"Software\{0}\{1}\Settings", Application.CompanyName, Application.ProductName));
                if(registryKey == null) return;
                Type type = typeof(Settings);
                foreach (var field in type.GetFields(BindingFlags.NonPublic | BindingFlags.Static))
                {
                    if (registryKey.GetValue(field.Name) != null)
                    {
                        var converter = TypeDescriptor.GetConverter(field.FieldType);
                        var value = converter.ConvertFrom(registryKey.GetValue(field.Name, field.GetValue(null)));
                        field.SetValue(null, value);
                    }
                }
                registryKey.Close();
            }
        }

        private static string GetSetting(string name)
        {
            var registryKey = Registry.CurrentUser.OpenSubKey(string.Format(@"Software\{0}\{1}\Settings", Application.CompanyName, Application.ProductName));
            if (registryKey != null)
            {
                if (registryKey.GetValue(name) != null)
                {
                    return registryKey.GetValue(name).ToString();
                }
                registryKey.Close();
            }
            return "";
        }
    }
} 
```

要在您的应用程序中使用它，只需像上面一样为您的设置添加属性和支持字段。确保在属性的 get 访问器的 GetSetting 方法中使用支持字段的名称作为字符串参数。确保为设置字段分配默认值。

有关保存设置，请参见下面的代码。

```
 Settings.Archives = ".7z,.rar,.zip";
    Settings.CheckDuplicates = true;
    Settings.SaveDocks = false;
    Settings.Font = fontDialog.Font;
    Settings.Save(); 
```

您必须在主窗体的构造函数中调用 SetDefaults 方法。请参见下面的代码。

```
namespace MyNamespace
{
    public partial class FormMain : Form
    {
        public FormMain()
        {
            InitializeComponent();
            Settings.SetDefaults();
        }
    }
} 
```

如果你有改进这门课的建议。然后发表评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T13:18:48.080

制作一个单独的 dll 以通过您喜欢的任何方法读取设置 - 注册表或 xml 读取，......并将其放入系统路径中。然后你可以在你的exe所在的任何地方调用dll。

但是什么情况下需要这个要求呢？我只是好奇。

# php - 选择包含 2 个可能值的 MYSQL 记录

> ID：12016950
> 
> 赞同：0
> 
> 时间：2012-08-18T07:56:22.137
> 
> 标签：php, mysql, sql

我想选择正在返回值的行。如果他们选择了`Male`或`Female`在选择框中，我希望它搜索那个。那部分工作正常。但是，如果他们选择`Either`，我想说 MySQL 应该查看列是否包含`Male`or`Female`并返回任何结果。

请注意，如果可能，我不想根据代码的编写方式在查询中使用 OR 语句。

我尝试了以下方法，但似乎没有用。这些值来自具有或的表单中`Either`的选择框。`Male``Female`

```
if ($postgender == "either")
{
    $male = "Male";
    $female = "Female";
    $postgenderuse = ($male || $female);
}
else {
    $postgenderuse = $postgender;
}

$query4 = mysql_query("SELECT * FROM tennis WHERE gender='$postgenderuse' ORDER BY playerid DESC LIMIT 0,20"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:00:30.947

开始从语句创建查询，还检查表单是否正在发送 3 个值之一（只是为了确保）

```
if ($postgender == "Either")
{
    $postgenderuse = " ( `gender`='Male' OR `gender`='Female' ) ";
}
elseif ($postgender == "Male" || $postgender == "Female") {
    $postgenderuse = " `gender`='".$postgender."' ";
}
else {
    die('Error, no gender selected');
}

$query4 = mysql_query("SELECT * FROM `tennis` WHERE ".$postgenderuse." ORDER BY `playerid` DESC LIMIT 0,20"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:02:33.830

假设您以二进制方式处理性别，仅包含两个选项（男性，女性）：

```
$sql = "SELECT * FROM tennis";

if(in_array($postgender, array("Male", "Female"))
{
     $sql .= " WHERE gender=".$postgender;
}

$sql .= " ORDER BY playerid DESC LIMIT 0,20)";
$query4 = mysql_query($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:04:27.380

如果是，则更改您的查询以进行通配符搜索。

> SELECT * FROM 网球 WHERE gender LIKE '$postgenderuse'

这样，当他们选择其中一个时，您可以将 postgenderuse 设置为 % 符号。

虽然，在查询中使用 OR 并根据条件构建查询可能是一个更好的主意，例如：

```
if($postgender == "Male") {
   $condition = "WHERE gender='Male'";
} else if($postgender == "Female") {
   $condition = "WHERE gender='Female'";
} else {
   $condition = "";
}
$query = "SELECT * FROM tennis " . $condition . " ORDER BY BLAH"; 
```

无论如何，任何一种方式都应该有效。能够从条件构造查询是 php 强大功能的一部分。

~ 丹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T08:48:18.927

如果您使用 Bitwise 而不是 String 作为 field ，您尝试过的解决方案将起作用`gender`。

我的建议是使用 SQL [IN 函数](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)。就像是：

```
$query = "SELECT * FROM tennis WHERE gender IN ('" + implode("', '", $postGenderArray) + "')";
```

# python - 使用 tornado.httpclient 使用代理访问 twitter

> ID：12016951
> 
> 赞同：2
> 
> 时间：2012-08-18T07:56:24.390
> 
> 标签：python, proxy, tornado

我想从终端使用`tornado.httpcilent`.

但是 Twitter 在我的国家是防火墙。如何通过代理访问它？

还有其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T15:42:53.017

[tornado.httpclient](http://www.tornadoweb.org/documentation/httpclient.html)的官方文档包含如何使用代理的示例。

您将需要 curl 后端来获得代理支持。所以安装先决条件。以下是如何为 Ubuntu 执行此操作：

```
$ sudo apt-get install libcurl-dev librtmp-dev 
$ pip install tornado pycurl 
```

然后试试这段代码：

```
from tornado import httpclient, ioloop

config = {
    'proxy_host': 'YOUR_PROXY_HOSTNAME_OR_IP_ADDRESS',
    'proxy_port': 3128
}

httpclient.AsyncHTTPClient.configure(
    "tornado.curl_httpclient.CurlAsyncHTTPClient")

def handle_request(response):
    if response.error:
        print "Error:", response.error
    else:
        print response.body
    ioloop.IOLoop.instance().stop()

http_client = httpclient.AsyncHTTPClient()
http_client.fetch("http://twitter.com/",
    handle_request, **config)
ioloop.IOLoop.instance().start() 
```

# macos - 场景套件动画

> ID：12016959
> 
> 赞同：0
> 
> 时间：2012-08-18T07:57:49.983
> 
> 标签：macos, scenekit

任何人都知道为什么我不能让这个简单的动画工作？它只是不玩。

```
self.scene = [SCNScene scene];

SCNNode *sun = [SCNNode nodeWithGeometry:[SCNSphere sphereWithRadius:5.0]];
SCNNode *moon = [SCNNode nodeWithGeometry:[SCNSphere sphereWithRadius:2.0]];

moon.position = SCNVector3Make(7.0, 7.0, 7.0);
moon.pivot = CATransform3DMakeTranslation(-7.0, -7.0, -7.0);

CABasicAnimation *startAnim = [CABasicAnimation animationWithKeyPath:@"rotation"];
startAnim.duration = 5;
startAnim.repeatCount = MAXFLOAT;
startAnim.toValue =[NSValue valueWithSCNVector4:SCNVector4Make(0.0, 0.0, 0.0,1.0)];
startAnim.timingFunction =[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

[moon addAnimation:startAnim forKey:@"rotate"];
[sun addChildNode:moon];
[[self.scene rootNode] addChildNode:sun]; 
```

我认为问题是...

```
 startAnim.toValue =[NSValue valueWithSCNVector4:SCNVector4Make(0.0, 0.0, 0.0,1.0)]; 
```

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:08:52.110

事实上 SCNVector4Make(0.0, 0.0, 0.0,1.0) 不是有效的旋转。“旋转”是由 4 个浮点 {xyzw} 组成的轴角。3个第一个浮点数xyz代表轴，w是以弧度为单位的旋转。所以 (0.0, 0.0, 0.0) 不是一个有效的轴（或者在最好的情况下它代表一个空旋转）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:50:27.960

我也无法让您的示例使用“旋转”键路径，但我可以使用“转换”。例如：

```
CABasicAnimation *startAnim = [CABasicAnimation animationWithKeyPath:@"transform"];
startAnim.duration = 5;
startAnim.repeatCount = MAXFLOAT;
startAnim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(3.14, 0.0, 1.0, 0.0)];
startAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[moon addAnimation:startAnim forKey:@"transform"]; 
```

# twitter - 获取更大的 Twitter 用户图片

> ID：12016970
> 
> 赞同：0
> 
> 时间：2012-08-18T08:00:38.587
> 
> 标签：twitter

我正在开发一个应用程序来显示用户的推文以及他们的图像。但是显示的图像非常小。我希望将通常显示在其个人资料上的图像（通常为 128*128）显示为较小的图像。我正在使用**JSON**。这是我的相关代码：

```
...
...    
$url = "http://search.twitter.com/search.json?q=".$qe."&geocode=".$geo."&rpp=10";
...
...
foreach($ret1->results as $x)
    {
         echo "<div class='ttl'><div class='ttlpadding'><div class='item'><a href=\"","http://www.twitter.com/".$x->from_user,"\" target=\"_blank\"><img src=\"",$x->profile_image_url,"\" title=\"", $x->from_user." (".$x->from_user_name.")", "\" /></a>\n";

        $text = preg_replace('/\s+#(\w+)/',' <a href="http://search.twitter.com/search?q=%23$1">#$1</a>', $x->text);
        echo "<div class='clr'></div>";
        echo "<div class='tweet'>".$text."</div></div></div></div><div class='clrflt'></div>";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:11:30.053

用于获取大图像

称呼

```
http://api.twitter.com/1/users/profile_image/username.json?size=original 
```

用推特句柄替换用户名

关于获取个人资料图片的[twitter api](https://dev.twitter.com/docs/api/1/get/users/profile_image/:screen_name)

类似的堆栈溢出问题[在这里](https://stackoverflow.com/questions/12013920/bigger-twitter-user-profile-image)。避免转发问题。

# python - 在 Windows XP 上为 Python 3.2.3 安装从 Sphinx 1.1 升级到 1.1.3 时出错

> ID：12016973
> 
> 赞同：0
> 
> 时间：2012-08-18T08:00:51.850
> 
> 标签：python, python-3.x, python-sphinx, easy-install

按照 Sphinx 主页上的说明，我打开一个命令窗口并输入：

```
C:\>easy_install -U Sphinx 
```

（我假设升级的 -U 选项应该删除现有版本。）

我收到以下错误消息（我有管理员权限）：

```
Creating c:\python32\lib\site-packages\site.py
Processing Sphinx
Running setup.py -q bdist_egg --dist-dir C:\Sphinx\egg-dist-tmp-tmopj5
error: Setup script exited with error: SandboxViolation: 
open('C:\\Python32\\lib\\lib2to3\\Grammar3.2.3.final.0.pickle', 'wb') {}

The package setup script has attempted to modify files on your system
that are not within the EasyInstall build area, and has been aborted.

This package cannot be safely installed by EasyInstall, and may not
support alternate installation locations even if you run its setup
script by hand.  Please inform the package's author and the EasyInstall
maintainers to find out if a fix or workaround is available. 
```

谁能帮我理解和解决问题？请不要告诉我使用 pip，当我尝试使用以下方式安装 pip 时，我遇到了同样的错误：

```
C:\>easy_install pip 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:45:16.463

我在尝试安装请求库时遇到此错误消息。它似乎与构建期间未生成的文件有关（[http://bugs.python.org/issue15822](http://bugs.python.org/issue15822)），但如果要使用 2to3 实用程序则需要这些文件。

对我来说，一个快速的解决方法是手动构建所需的腌制语法：

```
C:\Python33\Lib>..\python.exe -m lib2to3.pgen2.driver lib2to3\Grammar.txt
Generating grammar tables from lib2to3\Grammar.txt
Writing grammar tables to lib2to3\Grammar3.3.1.final.0.pickle

C:\Python33\Lib>..\python.exe -m lib2to3.pgen2.driver lib2to3\PatternGrammar.txt

Generating grammar tables from lib2to3\PatternGrammar.txt
Writing grammar tables to lib2to3\PatternGrammar3.3.1.final.0.pickle 
```

我在 python 3.3.1 上对此进行了测试，但我相信同样的过程应该对你有用。

# iphone - 将图像从 carousal 拖到 imageview

> ID：12016974
> 
> 赞同：0
> 
> 时间：2012-08-18T08:01:08.997
> 
> 标签：iphone, objective-c, ipad

我想从图像的轮播中拖动图像并将其放在另一个图像视图中。拖动后应该从轮播中删除。我已经为此完成了代码，该代码也将从轮播中删除。我使用了触摸事件。

但问题是，当我触摸屏幕上的其他任何位置时拖动一张图像后，它会自动选择下一张图像。我怎样才能停止它？我想在点击它时拖动图像。

我的代码。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    btnBackImg.center = location;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint pointMoved = [touch locationInView:self.view];   
    btnBackImg.frame = CGRectMake(pointMoved.x, pointMoved.y, btnBackImg.frame.size.width,btnBackImg.frame.size.height);
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touch end");
    if (btnBackImg != nil)
    {
        UITouch *touch = [[event allTouches] anyObject];
        if (CGRectContainsPoint(basket_image.frame, [touch locationInView:self.view]))
        {
            basket_image.image=[UIImage imageNamed:[NSString stringWithFormat:@"wit_bas.png"]];
            [self.product_categories removeObjectAtIndex:imgIndex+1];
            [carousel reloadData];
        }
    }   
} 
```

在这个 btnCackImg 想要移动到 basketImg。如果有人知道然后请帮助我，或者如果任何链接也有用。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T08:48:46.457

你已经在你的 touches.began`CGPoint location = [touch locationInView:touch.view];`中使用了这段代码，这`touch.View`意味着触摸视图中的所有对象`self.view`。您真正需要的是添加要放置的图像的名称而不是 touch.View。这将一次选择图像。

```
CGPoint location = [touch locationInView:imageName]; 
```

# android - 无法在数据库上创建表（Android）

> ID：12016976
> 
> 赞同：0
> 
> 时间：2012-08-18T08:01:11.630
> 
> 标签：android, database

我在 Android 中创建表时遇到问题。

我有这张桌子，但它是旧版本，所以我不得不放弃它。在此之后，我无法让它创建另一个表，我不知道为什么。我收到错误“没有这样的表 user_login”

这是我的数据库类

```
public class Database  extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;

private static final String DB_name = "aeglea";
private static final String TABLE_NAME = "user_login";
//private static final String KEY_ID = "id";
private static final String KEY_UID = "uid";
private static final String KEY_NAME = "name";
private static final String KEY_LAST = "last";
private static final String KEY_EMAIL = "email";
private static final String KEY_USERNAME = "username";

public Database(Context context) {
    super(context, DB_name, null, DATABASE_VERSION);
}

public void onCreate(SQLiteDatabase db) {
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_NAME + "("
            + KEY_UID + " INTEGER PRIMARY KEY,"
            + KEY_NAME + " TEXT,"
            + KEY_LAST + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE,"
            + KEY_USERNAME + " TEXT UNIQUE" + ")";

    db.execSQL(CREATE_LOGIN_TABLE);

}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
     // Create tables again
    onCreate(db);

}

public void addUser(int uid, String name, String last, String email, String username) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    values.put(KEY_UID, uid); // user id
    values.put(KEY_NAME, name); // Name
    values.put(KEY_LAST, last); //last
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_USERNAME, username); // User name

    // Inserting Row
    db.insert(TABLE_NAME, null, values);
    db.close(); // Closing database connection
}

public void resetTables(){
    SQLiteDatabase db = this.getWritableDatabase();
    // Delete All Rows
    db.delete(TABLE_NAME, null, null);
    db.close();
}

/**
 * Getting user data from database
 * */
public HashMap<String, String> getUserDetails(){
    HashMap<String,String> user = new HashMap<String,String>();
    String query = "SELECT  * FROM " + TABLE_NAME;//make query

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(query, null);//do query
    // Move to first row
    cursor.moveToFirst();
    if(cursor.getCount() > 0){
        user.put("uid", cursor.getString(1));
        user.put("name", cursor.getString(2));
        user.put("last",cursor.getString(3));
        user.put("email", cursor.getString(4));
        user.put("username", cursor.getString(5));

    }
    cursor.close();
    db.close();
    // return user
    return user;
}

/**
 * Getting user login status
 * return true if rows are there in table
 * */
public int getRowCount() {
    String countQuery = "SELECT  * FROM " + TABLE_NAME;
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    db.close();
    cursor.close();

    // return row count
    return rowCount;
} 
```

}

这是我使用数据库的主要类（看底部）

```
public class login2 extends Activity {
private EditText un,pw;
TextView error;
Button ok;
private JSONObject jo2;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    un=(EditText)findViewById(R.id.et_un);
    pw=(EditText)findViewById(R.id.et_pw);
    ok=(Button)findViewById(R.id.btn_login);
    error=(TextView)findViewById(R.id.tv_error);

    ok.setOnClickListener(new View.OnClickListener() {

    private Database db = new Database(getApplicationContext());    

        public void onClick(View v) {
            // TODO Auto-generated method stub

            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
            postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
            //String valid = "1";
            JSONObject response = null;
            try {
                response = CustomHttpClient.executeHttpPost("http://ironis.dyndns.org/aeglea/android/log.php", postParameters);
               // String res=response.toString();
               // res = res.trim();
                //res= res.replaceAll("\\s+","");                            
                //error.setText(res);

               if(response.getString("success").equals("1")){
                    error.setText(response.getString("last"));
                    //store user to database in success

                    //reset older entries
                    db.resetTables();
                    //add user
                    db.addUser(Integer.parseInt(response.getString("id")), response.getString("name"), response.getString("last"), response.getString("email"), response.getString("username"));

               }else{
                    error.setText(response.getString("error_msg"));
                    } 
            } catch (Exception e) {
                un.setText(e.toString());
            }

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:04:05.903

你应该改变你的数据库版本，如：

```
private static final int DATABASE_VERSION = 2 
```

我认为如果您更改版本，则不需要删除旧表。新表将取代它。

也许它有效。

# php - 如何用幻灯片显示其他图像

> ID：12016977
> 
> 赞同：0
> 
> 时间：2012-08-18T08:01:49.290
> 
> 标签：php, javascript, jquery, joomla

```
<?php

// no direct access
defined('_JEXEC') or die('Restricted access');

if (!is_array($this->row->images)) {
    return ;
}

$mainImage = array_shift($this->row->images);

$previousLabel = JText::_('Previous');
$nextLabel     = JText::_('Next');

$script=<<<EOB
    var previousLabel = '$previousLabel';
    var nextLabel = '$nextLabel';
EOB;

$this->document->addScriptDeclaration($script)
               ->addScript(JURI::root(true).'/media/com_jea/js/jea-squeezebox.js');

JHTML::_('behavior.modal', 'a.jea_modal', array('onOpen' => '\onOpenSqueezebox'));
?>

<div class="clr" ></div>

<div id="jea-gallery-preview" >
<a class="jea_modal" href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           id="jea-preview-img"
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>" /></a>
</div>

<?php if( !empty($this->row->images)): ?>
<div id="jea-gallery-scroll" >
    <?php foreach($this->row->images as $image) : ?>
      <a class="jea_modal" href="<?php echo $image->URL?>" >
      <img src="<?php echo $image->minURL ?>" 
           alt="<?php echo $image->title ?>" 
           title="<?php echo $image->description  ?>" /></a><br />
    <?php endforeach ?>
</div>
<?php endif ?> 
```

**这是我在 JEA 组件中的默认 joomla 属性图像挤压箱库代码。**

我用 jquery 更改了幻灯片预览，我的新代码是这样的

```
<?php

// no direct access
defined('_JEXEC') or die('Restricted access');
$document = &JFactory::getDocument();
$document->addScript("components/com_jea/views/property/tmpl/js/jquery-1.8.0.min.js");
$document->addScript("components/com_jea/views/property/tmpl/lib/jquery.ad-gallery.js");
$document->addScript("components/com_jea/views/property/tmpl/lib/inside.js");
$document->addStyleSheet("components/com_jea/views/property/tmpl/lib/jquery.ad-gallery.css");
$document->addStyleSheet("components/com_jea/views/property/tmpl/lib/inside.css");  
if (!is_array($this->row->images)) {
    return ;
}

$mainImage = array_shift($this->row->images);

$previousLabel = JText::_('Previous');
$nextLabel     = JText::_('Next');

$script=<<<EOB
    var previousLabel = '$previousLabel';
    var nextLabel = '$nextLabel';
EOB;

$this->document->addScriptDeclaration($script)
               ->addScript(JURI::root(true).'/media/com_jea/js/jea-squeezebox.js');

JHTML::_('behavior.modal', 'a.jea_modal', array('onOpen' => '\onOpenSqueezebox'));
?>

<div class="clr" ></div>

  <body>
  <div id="container">

    <div id="gallery" class="ad-gallery">
      <div class="ad-image-wrapper">
      </div>
      <div class="ad-controls">
      </div>
      <div class="ad-nav">
        <div class="ad-thumbs">
          <ul class="ad-thumb-list">

            <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image0" /></a>

            </li>
            <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image1" /></a>

            </li>
              <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image2" /></a>

            </li>
            <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image3" /></a>

            </li>
               <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image4" /></a>

            </li>
            <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image5" /></a>

            </li>
               <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image6" /></a>

            </li>
            <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image7" /></a>

            </li>
               <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image8" /></a>

            </li>
            <li>
              <a href="<?php echo $mainImage->URL ?>" >
      <img src="<?php echo $mainImage->mediumURL ?>" 
           width="90px"; height="50px";
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>"

   class="image9" /></a>

            </li>
          </ul>
        </div>
      </div>
    </div> 
```

但问题[是这个](http://www.bluewingholidays.com/index.php?option=com_jea&view=property&id=9%3ajaffna-city-villa)

我将如何使用 Joomla 代码显示其他图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:14:56.537

你为什么不保留格式而只是添加了一个增量变量？

```
<ul class="ad-thumb-list">

    <li>
        <a class="jea_modal" href="<?php echo $mainImage->URL ?>" >
            <img src="<?php echo $mainImage->mediumURL ?>"  alt="<?php echo $mainImage->title ?>" title="<?php echo $mainImage->description ?>" class="image0" />
        </a>
    </li>

    <?php if( !empty($this->row->images)): ?>
        <li>
            <?php $num = 1; foreach($this->row->images as $image) : ?>
                <a class="jea_modal" href="<?php echo $image->URL ?>" >
                    <img src="<?php echo $image->mediumURL ?>" alt="<?php echo $image->title ?>" title="<?php echo $image->description ?>" class="image<?php echo $num++; ?>" />
                </a>
            <?php endforeach; ?>
        </li>
    <?php endif; ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:28:45.313

我认为如果您更改所有代码并保留 JEA 组件的原始代码会更好。然后，安装 YooEffects（您可以从 yootheme 页面免费下载该组件）。

之后，转到负责创建画廊的 php 文件（在我的例子中：/components/com_jea/views/property/tmpl/default_squeezebox.php），只需更改以下代码：

```
<a class="jea_modal" href="<?php echo $mainImage->URL ?>" >
  <img src="<?php echo $mainImage->mediumURL ?>" 
       id="jea-preview-img"
       alt="<?php echo $mainImage->title ?>" 
       title="<?php echo $mainImage->description ?>" /></a> 
```

对于这个：

```
<a data-lightbox="group:apartamento" href="<?php echo $mainImage->URL ?>" >
<!-- <a class="jea_modal" href="<?php echo $mainImage->URL ?>" >-->
      <img src="<?php echo $mainImage->mediumURL ?>" 
           id="jea-preview-img"
           alt="<?php echo $mainImage->title ?>" 
           title="<?php echo $mainImage->description ?>" /></a> 
```

然后，对项目的其余图像执行相同操作。最后，你会得到这样的东西：

```
<div id="jea-gallery-preview" >

<a data-lightbox="group:apartamento" href="<?php echo $mainImage->URL ?>" >

    <!-- <a class="jea_modal" href="<?php echo $mainImage->URL ?>" >-->
          <img src="<?php echo $mainImage->mediumURL ?>" 
               id="jea-preview-img"
               alt="<?php echo $mainImage->title ?>" 
               title="<?php echo $mainImage->description ?>" /></a>
    </div>

    <?php if( !empty($this->row->images)): ?>
    <div id="jea-gallery-scroll" >
        <?php foreach($this->row->images as $image) : ?>
          <a data-lightbox="group:apartamento" href="<?php echo $image->URL?>" >
      <!--<a class="jea_modal" href="<?php echo $image->URL?>" >-->
      <img src="<?php echo $image->minURL ?>" 
           alt="<?php echo $image->title ?>" 
           title="<?php echo $image->description  ?>" /></a><br />
    <?php endforeach ?>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T11:36:07.223

此代码不再起作用。那是因为 Yooeffects 不再适用于 Joomla 3x 。JEA 的代码也发生了变化。

# jakarta-ee - 请求映射注解

> ID：12016980
> 
> 赞同：0
> 
> 时间：2012-08-18T08:02:26.997
> 
> 标签：jakarta-ee, spring-mvc, spring-annotations

嗨我正在尝试使用 Requestmapping 但它不起作用，

**HelloController.java**

```
package com.project.springapp;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/Springapp/hello")
public class HelloController {

@RequestMapping(method = RequestMethod.GET)
public String Hello(){
    return "hello";
}

} 
```

**servlet-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org
/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema
/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema  
/context/spring-context-3.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

   <beans:bean 
     class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>

<beans:bean     
class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.project.springapp" />

 </beans:beans> 
```

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee
/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-
class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

运行代码后，它会在控制台中显示此警告

> 警告：[SetContextPropertiesRule]{Context} 将属性 'source' 设置为 'org.eclipse.jst.jee.server:Springapp' 没有找到匹配的属性。

然后转到第一页，但是当我输入此 URl 时`http://localhost:8080/Springapp/hello` ，它会在控制台中显示此消息：

> 警告：“org.springframework.web.servlet.PageNotFound - 在 DispatcherServlet 中找不到带有 URI [/Springapp/hello] 的 HTTP 请求的映射，名称为 'appServlet'”

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:38:19.607

您必须将映射添加到类方法，作为 url 的端点。例如，要访问`http://localhost:8080/Springapp/hello`，您可以执行以下操作：

```
package com.project.springapp;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/Springapp")
public class HelloController {

@RequestMapping("/hello")
public String Hello(){
    return "hello";
} 
```

}

此外，您可能还需要在 '/Springapp/hello 之前在 url 中包含应用程序上下文路径

# android - 从手势中删除此黄色

> ID：12016984
> 
> 赞同：0
> 
> 时间：2012-08-18T08:03:01.130
> 
> 标签：android

```
mLibrary = GestureLibraries.fromRawResource(this, R.raw.spells); 

if (!mLibrary.load()) 
{ 
     finish(); 
} 

GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures); 
gestures.addOnGesturePerformedListener(this); gestures.getGestureColor(); 
```

如何从手势中删除这种黄色...

当我将一个起始位置拖动到结束时，我没有任何颜色。请帮我获取android代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-06T08:31:33.047

在您的 XML 中添加这一行

```
android:gestureColor="#000000" 
```

此代码`#000000`以十六进制表示黑色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T18:21:53.077

我找到了解决方案。您的 GestureOverlayView 实例有两种方法。它们被称为 setGestureColor() 和 setUncertainGestureColor() (gestureOverlayView.setGestureColor(Color.TRANSPARENT);gestureOverlayView.setUncertainGestureColor(Color.TRANSPARENT);)

请在下面找到整个示例。这是我的主要活动的 onCreate 方法的一个片段。第二行和第三行解决了您的问题。

```
ActivityGestureOverlayView gestureOverlayView = new GestureOverlayView(this);
        gestureOverlayView.setGestureColor(Color.TRANSPARENT);
        gestureOverlayView.setUncertainGestureColor(Color.TRANSPARENT);

        View inflate = getLayoutInflater().inflate(R.layout.activity_main, null);
        gestureOverlayView.addView(inflate);
        gestureOverlayView.addOnGesturePerformedListener((OnGesturePerformedListener) this);
        MainActivity.gestureLib = GestureLibraries.fromRawResource(this, R.raw.gestures);
        if (!MainActivity.gestureLib.load()) {
            finish();
        }
        setContentView(gestureOverlayView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:37:19.867

我一直有同样的问题，我终于找到了解决方案。如果您查看 GestureOverlayView 的源代码，您会注意到在第 559 行（和其他）对 mHandleGestureActions 的布尔测试，该测试在绘制手势时调用 [private void] setCurrentColor。不幸的是 mHandleGestureActions 仅在您使用 OnGesturePerformedListener 侦听器时设置。

这是一个彻头彻尾的黑客攻击；但它有效：

创建一个实现 OnGesturePerformedListener 的存根视图，并将其添加到叠加层的 OnGesturePerformedListener 列表中。您不必对听众做任何事情；但它必须是与您用作 REAL 侦听器的视图不同的视图（否则您的应用程序将崩溃）。然后添加真正起作用的 OnGestureListener 或 OnGestureListener 视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:35:33.287

```
gestureOverlayView.addOnGesturePerformedListener(new OnGesturePerformedListener() {

        public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {

        }
    });
    gestureOverlayView.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            return false;
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-06T07:43:48.487

在您的视图 XML 文件中，将其添加到 GestureOverlayView。

```
android:gestureColor="#0000ff"
android:uncertainGestureColor="#0000ff" 
```

现在回答它为时已晚，但可能它可以帮助某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-12T07:16:17.677

在 xml 中添加此代码

```
android:gestureColor="@android:color/transparent" 
```

# ruby-on-rails - Ruby on rails 模型方法未在控制器中执行

> ID：12016985
> 
> 赞同：0
> 
> 时间：2012-08-18T08:03:12.883
> 
> 标签：ruby-on-rails, activerecord, methods, model, execute

**posts_controller.rb 销毁方法**

```
def destroy

    if !request.xhr?
        render_404
        return
    end

    if user_signed_in?

        if Post.exists?(:post_id => params[:id])

                if Post.post_is_mine(params[:id], current_user.id)

                    @return = { :error => false, :response => "Post deleted" }

                else
                    @return = { :error => true, :response => 'You are not allowed to perform this action.' }
                end

            else
                @return = { :error => true, :response => 'This post doesn\'t exist.' }
            end

        else
            @return = { :error => true, :response => 'Please login before you delete a post.' }
        end

    render :json => ActiveSupport::JSON.encode( @return )

end 
```

**post.rb**

```
 def self.post_is_mine(post_id, user_id)
    #where(:user_id => user_id, :post_id => bucket_id)
    where("user_id = ? and post_id = ?", user_id, bucket_id)
  end 
```

当我在销毁帖子时检查正在运行的查询时，我只能看到`.exists?`要运行的查询，但不能看到**它返回 TRUE 时**`.post_is_mine`简单通过的查询

 **我尝试了其他几个名称作为方法，因为某些东西可能会导致问题，甚至只是尝试使用**.post_is_mine**的 if 语句，但仍然没有运行查询

关于我如何使用 where 子句的模型是否存在问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:27:41.460

是的。 `#where`返回一个 ActiveRecord 关系，用于生成您的查询。该关系不会在您的代码中进行评估，因此`.post_is_mine`永远不会执行查询。 `if Post.postis mine(params[:id], current_user.id)`返回`true`是因为 Relation 对象不是`nil`。

你真正想要的是`exists?`在`post_is_mine`方法中使用。

```
def self.post_is_mine(post_id, user_id)
  exists?(:user_id => user_id, :post_id => bucket_id)
end 
```

编辑：

我很好奇我的答案和帕夫林的答案之间的区别。对于其他想知道的人：

`#exists?`执行一条 SQL 语句`SELECT 1 FROM ...`

`#any?`执行一条 SQL 语句`SELECT COUNT(*) FROM ...`

在实践中，两者之间可能没有太大区别，但一些粗略的基准表明`#any?`速度更快（在 OSX 上使用 AR 3.2.6 和 Postgresql 9.1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T08:27:24.610

“where”将返回一个空集合，其评估为真。您需要添加一个检查以查看其中是否有任何记录以获得正确的真/假。

```
def self.post_is_mine(post_id, user_id)
  where("user_id = ? and post_id = ?", user_id, bucket_id).any?
end 
```**

# linux - 启动一个命令，在 10 秒后计算输出行数，然后重新启动它或让它运行

> ID：12016991
> 
> 赞同：1
> 
> 时间：2012-08-18T08:03:54.773
> 
> 标签：linux, bash

我有一个有趣的情况，我正在尝试编写脚本。我有一个程序在成功启动 10 秒后输出 26,000 行。否则我必须杀死它并重新启动它。我试着做这样的事情：

```
test $(./long_program | wc -l) -eq 26000 && echo "Started successfully" 
```

但这仅在程序完成运行时才有效。有没有一种聪明的方法来观察命令的输出流并做出相应的决定？我很茫然，甚至不确定如何开始搜索这个。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:18:59.603

关于什么

```
./long_program > mylogfile &
pid=$!
sleep 10

# then test on mylogfile length and kill $pid if needed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:26:32.160

```
count=0
until [ $count -eq 26000 ]; do
    killall ./longrun
    #start in background
    ./longrun >output.$$ &
    sleep 10
    count=$(wc -l output.$$ |awk '{print $1}')   
done
echo "done"
#disown so it continues after current login quits
disown -h 
```

# java - 返回始终为字母数字的字符串值

> ID：12016992
> 
> 赞同：1
> 
> 时间：2012-08-18T08:03:55.900
> 
> 标签：java, string, integer, while-loop

我正在尝试创建一个由六个字母数字字符组成的字符串。下面的代码在大多数情况下都可以正常工作，但在极少数情况下会通过六个字母字符的字符串，我如何确保返回的字符串始终是字母数字？

```
String code = "";

while(!code.matches("[a-zA-Z0-9]+$"))
{
    code = Integer.toString((int) (Math.random() * Integer.MAX_VALUE), 36);
}

return code; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:17:01.610

我相信这个正则表达式应该确保字符串始终是字母数字的（至少包含一个字母和一个数字）

```
(?=.*[0-9])(?=.*[a-zA-Z]).+$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:11:37.767

重复尝试可能是最简单的，但您必须检查它是否包含一个字母和一个数字。

```
String code;
do {
    code = Integer.toString((int) (Math.random() * Integer.MAX_VALUE), 36);
    if (code.length() > 6)
       code = code.substring(0, 6);
} while(!code.matches(".*\\w.*") || !code.matches(".*\\d.*") || code.length() < 6); 
```

# c# - C# 正则表达式匹配（等效 php_match_all）

> ID：12016995
> 
> 赞同：1
> 
> 时间：2012-08-18T08:04:06.607
> 
> 标签：c#, php, regex

这是工作的php代码

```
<?php
$str = '<users>
<user id="1" value1="afaaf" value2="racad" value3="xarcd">User1</user>
<user id="2" value1="fsvgvdsg" value2="wdafsc" value3="aefvbdfg">User2</user>
<user id="3" value1="chthb" value2="rtvfascf" value3="xasedfvg">User3</user>
</users>';
$out = '';
if(preg_match_all('|<user id="(.*)" value1="(.*)" value2="(.*)" value3="(.*)">(.*)</user>|',$str,$matches))
{
    for($i=0;$i<count($matches[1]);$i++)
    $out .= $matches[1][$i].'|'.$matches[2][$i].'|'.$matches[3][$i].'|'.$matches[4][$i].'|'.$matches[5][$i]."\n";

    echo $out;
}
 ?> 
```

这就是我得到的

```
1|afaaf|racad|xarcd|User1
2|fsvgvdsg|wdafsc|aefvbdfg|User2
3|chthb|rtvfascf|xasedfvg|User3 
```

C# 代码

```
 string patt = "<user id=\"(.*)\" value1=\"(.*)\" value2=\"(.*)\" value3=\"(.*)\">(.*)</user>";
    string str = "<users><user id=\"1\" value1=\"afaaf\" value2=\"racad\" value3=\"xarcd\">User1</user><user id=\"2\" value1=\"fsvgvdsg\" value2=\"wdafsc\" value3=\"aefvbdfg\">User2</user><user id=\"3\" value1=\"chthb\" value2=\"rtvfascf\" value3=\"xasedfvg\">User3</user></users>";
    MatchCollection mc;
    Regex r = new Regex(patt);
    mc = r.Matches(str);

    for (int i = 0; i < mc.Count; i++)
        textBox1.Text += mc[i].Value + "\r\n"; 
```

我得到

```
<user id=\"1\" value1=\"afaaf\" value2=\"racad\" value3=\"xarcd\">User1</user><user id=\"2\" value1=\"fsvgvdsg\" value2=\"wdafsc\" value3=\"aefvbdfg\">User2</user><user id=\"3\" value1=\"chthb\" value2=\"rtvfascf\" value3=\"xasedfvg\">User3</user>\r\n 
```

您可以看到我从 c# 代码中获得的字符串甚至与我的 php 结果都不接近。

如何从我的 php 代码中获取结果？

希望你明白我的问题是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:19:30.537

试试这个 ：

```
change (.*) to (.*?) in you RegEx pattern 
```

并将您的代码段修改为：

```
for (int i = 0; i < mc.Count; i++)
    textBox1.Text += mc[i].Groups[1].Value + mc[i].Groups[2].Value + mc[i].Groups[3].Value + + mc[i].Groups[4].Value + mc[i].Groups[5].Value + "\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:32:30.430

使用正则表达式的替代方法是使用 LinqToXml，这里是一个示例。

**方法**

```
const string xmlString = "<users><user id='1' value1='afaaf' value2='racad' value3='xarcd'>User1</user><user id='2' value1='fsvgvdsg' value2='wdafsc' value3='aefvbdfg'>User2</user><user id='3' value1='chthb' value2='rtvfascf' value3='xasedfvg'>User3</user></users>";
var doc = XDocument.Parse(xmlString);

// defensive coding should be applied, this example
// omits it for simplicity
// the u will be a list of type User (3 items in this example)
var u = doc.Descendants("user").Select(user => new User
                                                    {
                                                        Id = int.Parse(user.Attribute("id").Value),
                                                        Value1 = user.Attribute("value1").Value,
                                                        Value2 = user.Attribute("value2").Value,
                                                        Value3 = user.Attribute("value3").Value
                                                    }); 
```

**模型**

```
public class User
{
    public int Id { get; set; }
    public string Value1 { get; set; }
    public string Value2 { get; set; }
    public string Value3 { get; set; }
    public override string ToString()
    {
        return string.Format("{0}|{1}|{2}|{3}", Id, Value1, Value2, Value3);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T08:33:23.357

试试这个。（**测试**）

```
string patt = "<user id=\"(?<id>.*?)\" value1=\"(?<value1>.*?)\" value2=\"(?<value2>.*?)\" value3=\"(?<value3>.*?)\">(?<name>.*?)</user>";
        string str = "<users><user id=\"1\" value1=\"afaaf\" value2=\"racad\" value3=\"xarcd\">User1</user><user id=\"2\" value1=\"fsvgvdsg\" value2=\"wdafsc\" value3=\"aefvbdfg\">User2</user><user id=\"3\" value1=\"chthb\" value2=\"rtvfascf\" value3=\"xasedfvg\">User3</user></users>";
        MatchCollection mc;
        Regex r = new Regex(patt);
        mc = r.Matches(str);

        foreach (Match item in mc)
        {
            string id = item.Groups["id"].Value;
            string value1 = item.Groups["value1"].Value;
            string value2 = item.Groups["value2"].Value;
            string value3 = item.Groups["value3"].Value;
            string name = item.Groups["name"].Value;

            textBox1.Text += id + "|" + value1 + "|" + value2 + "|" + value3 + "|" + name + "\r\n";
        } 
```