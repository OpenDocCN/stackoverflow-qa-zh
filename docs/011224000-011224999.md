# StackOverflow 问答 11224000-11224999

# javascript - JS 似乎停留在 Ajax 重新加载页面上的 DOM 中

> ID：11224001
> 
> 赞同：0
> 
> 时间：2012-06-27T10:20:05.020
> 
> 标签：javascript, jquery, ajax, reload, stack

好的，这是一个奇怪的错误，因为它是第一个没有任何完整重新加载的 ajax 页面我正在创建它是我以前从未遇到过的错误......甚至互联网也没有帮助我 - 因为它似乎没有是一个常见的问题。

让我们逐步解决问题：我有一个页面，其中 Ajax 请求由一个简化的函数触发，如下所示：

```
$("a[rel='tab']").live('click',function(e) {

pageurl = $(this).attr('href');
$.ajax({url:pageurl+'?rel=tab',success: function(data){
  $('#content').html(data);
}});
if(pageurl!=window.location){
  window.history.pushState({path:pageurl},'',pageurl);
}
e.preventDefault();
return false;
}); 
```

这是由 PHP 文件解析的，如果设置了属性，则不会加载设计，而只会加载文件本身 - 容易吗？

好的，现在问题本身 - 很明显页面随着时间的推移变得更慢，但我一开始并没有真正打扰，因为我认为这是设计 javascripts 中的一些错误 - 但事实并非如此。

所以我看了一下萤火虫，我所看到的解释了很多 -> 请求与每个新页面叠加！当然，这会导致过度杀伤......好吧，起初我认为它只是“setInterval”并且运行了一个解决方法，它在每次重新加载时重置它们。

但这并不是他们似乎也堆积在“脚本”中的唯一情况，因为我不认为这是一个简单的历史，因为重新加载的脚本不止一次出现！

右侧的任何提示都会非常有帮助，因为我几乎被困在这里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:54:37.630

好的，因为看起来这个问题毕竟只是与 setInterval 有关 - 在尝试了一段时间后，我得出的结论是这是主要问题，它只是萤火虫本身的某种循环。

然而，也许有人陷入了同样的问题，所以解决方案几乎是这样的：你必须： 1\. 创建一个数组来存储你的间隔 2\. 以这种方式调用你的 setIntervals 3\. 在每个“新窗口”上重置它们

```
var intervalArr = new Array();

function killIntervals(){
while(intervalArr.length > 0)
    clearInterval(intervalArr.pop());
}; 
```

这些是数组和函数

所以这些应该被添加到你的 AJAX 请求函数中：

```
killIntervals();
intervalArr.push(setInterval (yourintervalfunction, 5000)); 
```

我希望这对某人有用。

# c++ - 设计延迟加载

> ID：11224002
> 
> 赞同：3
> 
> 时间：2012-06-27T10:20:05.087
> 
> 标签：c++, design-patterns

我很难弄清楚如何设计无法在构造函数中初始化所有内部成员的类。我知道这应该是一些基本的东西，并在网上进行了讨论，但我不确定要寻找什么。因此，例如，请考虑以下代码：

```
#include <iostream>

class Workhorse
{
public:
    void SetData (const int &data)
    {
        this->data = data;
    }

    int GetData () const
    {
        return this->data;
    }

private:
    int data;
};

class Worker
{
public:
    Worker ()
    {
    }
    void Initialize (const int &data)
    {
        horse.SetData(data);
    }
    void Action () const
    {
        std::cout << horse.GetData() << std::endl;
    }

private:
    Workhorse horse;
};

int main ()
{
    Worker worker;
    worker.Initialize(3);
    worker.Action();
    return 0;
} 
```

我想防止工人在没有先调用 Initialize() 的情况下调用任何方法。外行的实现是在 Worker 类中添加一个 isInitialized 标志，在 Initialize() 中将其设置为 true 并在每个公共方法的开头对其进行测试（如果我们引入一些继承，可能也在受保护/私有方法中？） . 不幸的是，这似乎有点麻烦且难以维护。此外，在所有方法中重复 if 语句也很糟糕。我什至还没有开始思考线程安全问题，但是，现在，我只是在实现一个单线程应用程序。有没有更聪明的方法来设计这个？

* * *

**编辑**：好的，我选择了一个愚蠢的设计作为例子，这确实是有缺陷的。让我试着更清楚地了解我所拥有的：

```
#include <iostream>

class PublicKeyCryptoProvider
{
public:
    struct PublicKey
    {
        int shared;
    };
    struct PrivateKey
    {
        int secret;
    };

    int Encrypt (const int &plaintext) const
    {
        int ciphertext;
        //apply encryption algorithm on plaintext
        ciphertext = plaintext * this->pk.shared;
        return ciphertext;
    }

    int Decrypt (const int &ciphertext) const
    {
        int plaintext;
        //apply decryption algorithm on ciphertext
        plaintext = ciphertext / this->sk.secret;

        return plaintext;
    }

    void GenerateKeys ()
    {
        this->pk.shared = 4;
        this->sk.secret = 4;
        //generate pk and sk
    }

    void SetPublicKey (const PublicKey &pk)
    {
        this->pk = pk;
    }

    const PublicKey &GetPublicKey () const
    {
        return this->pk;
    }

private:
    PublicKey pk;
    PrivateKey sk;
};

int main ()
{
    /* scenario 1: */
    PublicKeyCryptoProvider cryptoProvider;
    cryptoProvider.GenerateKeys();
    std::cout << cryptoProvider.Decrypt(cryptoProvider.Encrypt(3)) << std::endl;
    /* /scenario 1: */

    /* scenario 2: */
    PublicKeyCryptoProvider cryptoProvider1;
    cryptoProvider1.GenerateKeys();

    PublicKeyCryptoProvider cryptoProvider2;
    cryptoProvider2.SetPublicKey(cryptoProvider1.GetPublicKey());

    int ciphertext = cryptoProvider2.Encrypt(3);
    std::cout << cryptoProvider1.Decrypt(ciphertext) << std::endl;

    //now let's do something bad...
    std::cout << cryptoProvider2.Decrypt(ciphertext) << std::endl;
    /* /scenario 2: */

    return 0;
} 
```

显然，您可以想象场景 2 完全有效的现实生活示例。鉴于上述情况，有没有比在 PublicKeyCryptoProvider 类中添加 canDecrypt 标志更好的选择，该标志在生成密钥时设置为 true，然后在解密方法的开头进行测试？我不得不提到这是一个非常简单的例子，因为在我的例子中，如果 PublicKeyCryptoProvider 是密钥的所有者并且它有更多的公共方法，它可以执行更快的加密，所以我注定要测试这个标志不止几次......另外，我有一个客户端 - 服务器模型场景，其中服务器为客户端公开了一堆公共方法，但客户端只能在调用 Initialize() 方法后调用这些方法服务器...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:25:33.267

我会做以下事情：

```
 class Worker
{
public:
    Worker (const int& data)
    {
        horse.SetData(data);
    }

    void Action () const
    {
        std::cout << horse.GetData() << std::endl;
    }

private:
    Workhorse horse;
}; 
```

由于您显然不希望 Worker 对象在没有被初始化的情况下存在，它的初始化应该是其构造的一部分，并且应该在没有这个初始化的情况下实例化它，因为没有它它就无法工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:08:57.933

听起来您感兴趣的行为需要有一个充当管理器的类，决定是提供对 Workhorse 函数之一的访问，还是提供一个虚拟函数。一种可能性是创建一个抽象父类（Horse），指定 Workhorse 的接口，但不实现任何功能。从它派生出两个类，Workhorse 和 TrojanHorse。TrojanHorse 会将父类中的所有功能实现为 Shell，Workhorse 将与您已经创建的一样。

manager 类可以有你感兴趣的初始化函数，它可以存储一个 Horse 类型的对象。默认情况下，可以将 horse 对象分配给 TrojanHorse 对象，但 initialize 会将其分配给 Workhorse 对象。

该解决方案将避免 if 语句对速度的几乎所有影响，如果没有以适当的方式更改类，编译器会给出错误，并且它仍然可以被其他程序员理解，这将是可维护的。编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T06:15:32.620

你提到你不认为继承是要走的路，但是有一种相当干净的方法可以用最少的继承来做到这一点。

这里有几个设计模式很有用。如果您将接口与实现分开，并将实现视为“总是返回错误”和“做一些有用的事情”，您可以将这两个实现视为策略，将接口视为代理。

代理总是将它的调用转发到一个实现，并且总是有一个实现（不需要检查标志）。

该接口使用默认实现进行初始化，该实现会导致某种错误（断言、抛出等）。这是一个例子

下面是一个使用 Clang 3.2 编译的示例：

```
#include <iostream>
#include <memory>
#include <cassert>
#include <stdexcept>

// Base class that defines the signatures of the functions to be forwarded.
// Another nice benefit is that each implementation can store whatever 
// specific data they need.
class Impl {
public:
    virtual void FuncA() = 0;
};

typedef std::unique_ptr<Impl> ImplPtr;

class ErrorImpl : public Impl {
public:
    virtual void FuncA() { 
        assert(!"Don't call this before calling InitializeImpl!");
        throw std::runtime_error("Don't call this before calling InitializeImpl!");  
    }     
};

class OtherImpl : public Impl {
public:
    void FuncA() { 
        std::cout << "Some other useful functionality here.\n";
    }         
};

// This is the class that user's will call.
class Proxy {
public:
    Proxy() : impl_( ImplPtr(new ErrorImpl) ) {}

    void InitializeImpl( ImplPtr ptr ) {
        // You must std::move std::unique_ptr's.
        impl_ = std::move( ptr );
    }
    void FuncA() { impl_->FuncA(); }

private:
    ImplPtr impl_;
};

int main( int, char**) {
    Proxy p;
    // p.FuncA(); // asserts & throws.

    p.InitializeImpl( ImplPtr(new OtherImpl) );
    p.FuncA();

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T23:32:25.713

好问题！制作一个难以错误使用的 API 总是好的，并且当您观察到未完全构造的类是危险的、难以正确使用且容易错误使用时。他们让我们自己和他人失败。我已经对您的第二个示例进行了一些重构，以提出一个更安全的设计，甚至不允许您的“做坏事”代码。

总的想法是`PublicKeyCryptoProvider`责任太多（违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）：

*   密钥生成
*   密钥存储
*   加密
*   解密

每一项职责都已下放。现在`PublicKeyCryptoProvider`更负责为您提供进行加密/解密和密钥管理所需的工具。

```
#include <iostream>
#include <utility>

struct PublicKey
{
    int shared;
};
struct PrivateKey
{
    int secret;
};

struct KeyPair
{
    PublicKey public_key;
    PrivateKey private_key;
};

struct Encryptor
{
    Encryptor( PublicKey shared_ )
     : shared( shared_ )
    {}

    int Encrypt (const int &plaintext) const
    {
        int ciphertext;
        //apply encryption algorithm on plaintext
        ciphertext = plaintext * shared.shared;
        return ciphertext;
    }

private:
    PublicKey shared;
};

struct Decryptor
{
    Decryptor( PrivateKey secret_ )
     : secret( secret_ )
    {}

    int Decrypt (const int &ciphertext) const
    {
        int plaintext;
        //apply decryption algorithm on ciphertext
        plaintext = ciphertext / secret.secret;

        return plaintext;
    }

private:
    PrivateKey secret;
};

class PublicKeyCryptoProvider
{
public:

    KeyPair GenerateKeys()
    {
        KeyPair keys;

        //generate pk and sk
        keys.public_key.shared = 4;
        keys.private_key.secret = 4;

        return keys;
    }

    Decryptor BuildDecryptor( PrivateKey key )
    {
        return Decryptor( key );
    }

    Encryptor BuildEncryptor( PublicKey key )
    {
        return Encryptor( key );
    }

/* These are replaced by directly building an Encryptor/Decryptor
 when you have a public or private key.

    void SetPublicKey (const PublicKey &pk)
    {
        this->pk = pk;
    }

    const PublicKey &GetPublicKey () const
    {
        return this->pk;
    }
*/

};

int main ()
{
    /* scenario 1: */
    PublicKeyCryptoProvider cryptoProvider;
    auto keys = cryptoProvider.GenerateKeys();
    auto decryptor = cryptoProvider.BuildDecryptor(keys.private_key);
    auto encryptor = cryptoProvider.BuildEncryptor(keys.public_key);

    std::cout << decryptor.Decrypt( encryptor.Encrypt(3) ) << std::endl;
    /* /scenario 1: */

    /* scenario 2: */
    PublicKeyCryptoProvider cryptoProvider1;
    auto keys1 = cryptoProvider1.GenerateKeys();

    PublicKeyCryptoProvider cryptoProvider2;
    auto encryptor2 = cryptoProvider2.BuildEncryptor(keys.public_key);

    int ciphertext = encryptor2.Encrypt(3);
    std::cout << decryptor.Decrypt(ciphertext) << std::endl;

    // I Can't do anything bad - the API has protected me from doing bad things! Yeah!
    //std::cout << cryptoProvider2.Decrypt(ciphertext) << std::endl;
    /* /scenario 2: */

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T11:16:12.797

如果您必须延迟对象初始化，我建议在代理未初始化的情况下使用带有访问运算符的代理。随时初始化代理。您不需要在每个方法中进行 if 检查，但检查是否已移至代理。一些智能指针会很方便。但是，据我所知，如果包含指针未初始化，它们不会抛出。因此，您可能需要自己的一个，如下所示。

```
#include <iostream>

class Workhorse
{
public:
    void SetData (const int &data)
    {
        this->data = data;
    }

    int GetData () const
    {
        return this->data;
    }

private:
    int data;
};

template <typename T> class Proxy
{
public:

    Proxy() : myObject(0)
    {
    }
    Proxy(T* anObj) : myObject(anObj)
    {
    }
    ~Proxy()
    {
        delete myObject;
        myObject = 0;
    }
    T* operator ->()const
    {
        if(NULL == myObject)
        {
            throw;  //  Bad object. Substitute an appropriate exception code.
        }
        return myObject;
    }

private:
    T* myObject;
};

class Worker
{
public:
    Worker ()
    {
    }
    ~Worker ()
    {
    }
    void Initialize (const int &data)
    {
        horse = new Workhorse;
        horse->SetData(data);
    }
    void Action () const
    {
            // Here no need to check if the horse is initialized.
        std::cout << horse->GetData() << std::endl;
    }

private:
    Proxy<Workhorse> horse;
}; 
```

# android - Android 蓝牙打印机的步骤

> ID：11224004
> 
> 赞同：1
> 
> 时间：2012-06-27T10:20:09.227
> 
> 标签：android, printing, bluetooth

我有兴趣为 Android 开发蓝牙打印机应用程序，所以请指导我如何开始它？有没有免费的第三方图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:36:30.983

Star Micronics 有一个用于通过蓝牙（以及以太网、wifi 和 USB）进行 Android 打印的 SDK。您可以在此处下载：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)。

您目前无法从 Android 本地打印，因此替代解决方案是 3rd 方 API、查找 3rd 方打印应用程序或编写您自己的打印机支持。

根据我的经验，最好使用 API 而不是外部应用程序。最大的原因是您可以完全控制打印机的行为。使用外部应用程序会受到限制，因为您无法按照自己的方式自定义打印输出。编写打印机驱动程序太难了，因为您需要非常了解设备以获得完美的支持...... API 让您可以完全控制设备，而无需重新设计整个过程。

我链接到的 Star SDK 有一个 API 和一个非常好的示例应用程序，可让您测试和自定义打印机功能以查看它们的运行情况。它也有据可查。

如果您选择这种方式，您可以将纯文本连同命令一起发送到打印机。API 处理将数据转换为打印机可以理解的内容。

# python - 在 SqlAlchemy 中更新三路联结表

> ID：11224008
> 
> 赞同：0
> 
> 时间：2012-06-27T10:20:23.777
> 
> 标签：python, sqlalchemy

**更新**

问题在于，当每次更改将对象持久化到数据库中时，都会生成新的**INSERT**表达式。我需要的只是一个包含所有列的**INSERT 。**

```
#First **INSERT** request
plane.hangar.appen(hangar)
#Second **INSERT** request
users.planes.append(plane) 
```

我有以下用**SqlAlchemy**描述的数据库结构。我要做的是在表“ **`users_planes_hangars`**”中插入一条新记录。我正在尝试通过以下方式做到这一点：

```
plane= dbSession.query(Plane).filter(Plane.plane_id == planeId).first()
garage = dbSession.query(Hangar).filter(Hangar.hangar_id == hangarId).first()

plane.hangar.appen(hangar)
users.planes.append(plane)
dbSession.commit() 
```

问题是执行的查询（下面的查询）不包括`user_id`，它只包括`plane_id`和`hangar_id`。

```
INSERT INTO users_planes_hangars (plane_id, hangar_id) VALUES (%(plane_id)s, %(hangar_id)s) 
RETURNING users_planes_hangars.user_id' {'hangar_id': 4, 'plane_id': 16} 
```

```
|usersTabe| <--- |users_planes_hangars_table| ---> |planesTable|
                              |
                             \|/
                          |hangarsTable|

class User(object):
    pass

class Plane(object):
    pass

class Hangar(object):
    pass    

usersMeta = Table("user",
    Column("user_id", Integer, primary_key = True)
)

mapper(User, usersMeta, properties = {
    "planes": relationship(Plane, usersPlanesHangars)
})

planesMeta = Table("planes",
    Column("plane_id", Integer, primary_key = True)
)
mapper(Plane, planesMeta, properties = {
    "hangar": relationship(Hangar, usersPlanesHangars)
})

hangarMeta = Table("hangars",
    Column("hangar_id", Integer, primary_key = True)
)

usersPlanesHangars = Table("users_planes_hangars",
    Column("user_id", Integer, ForeinKey("users.user_id"), primary_key = True)
    Column("plane_id", Integer, ForeinKey("planes.plane_id"), primary_key = True)
    Column("hangar_id", Integer, ForeinKey("hangar.hangar_id"), primary_key = True)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:52:29.663

您需要将 usersPlanesHangars 映射到一个类，并在每次您希望插入这些行之一时显式地创建一个 UsersPlanesHangars 的实例。

我在这里的猜测是，m2m 确实在飞机和用户之间，机库与每个飞机/用户关联相关联。您可能会为此考虑像[Association Object](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object)这样的模式。

# android - 安卓搜索框

> ID：11224010
> 
> 赞同：1
> 
> 时间：2012-06-27T10:20:28.390
> 
> 标签：android, search, user-interface

我有一个屏幕，其中有:: a。搜索文本字段 B. 搜索按钮

我的数据库位于某些外部服务器上的 MySQL 中。

当用户在文本字段中键入文本并点击搜索按钮时，应根据在文本字段中输入的文本显示来自该数据库的数据列表。

我想知道我应该使用“搜索框”还是简单的文本字段来获取“查询”文本。

# android - 自定义适配器列表视图

> ID：11224012
> 
> 赞同：0
> 
> 时间：2012-06-27T10:20:31.817
> 
> 标签：android, arraylist, adapter

我的项目需要一些帮助。我创建了一个自定义适配器，因为我希望我的列表视图显示 5 个文本视图，而不是到目前为止我设法做到的一个。这是我的 CustomAdapterPn 活动：

```
public class CustomAdapterPn extends BaseAdapter {
private static ArrayList<Poniedzialek> searchPnArrayList;

 private LayoutInflater mInflater;

 public CustomAdapterPn(final Context context, final ArrayList<Poniedzialek> results) {
  searchPnArrayList = results;
  mInflater = LayoutInflater.from(context);
 }

 public int getCount() {
  return searchPnArrayList.size();
 }

 public Object getItem(int position) {
  return searchPnArrayList.get(position);
 }

 public long getItemId(int position) {
  return position;
 }
 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
  ViewHolder holder;
  if (convertView == null) {
   convertView = mInflater.inflate(R.layout.entry, null);
   holder = new ViewHolder();
   holder.txtSession = (TextView) convertView.findViewById(R.id.textSession);
   holder.txtName = (TextView) convertView.findViewById(R.id.textName);
   holder.txtStart = (TextView) convertView.findViewById(R.id.textStartTime);
   holder.txtEnd = (TextView) convertView.findViewById(R.id.textEndTime);
   holder.txtRoom = (TextView) convertView.findViewById(R.id.textRoom);

   convertView.setTag(holder);
  } else {
   holder = (ViewHolder) convertView.getTag();
  }

  holder.txtSession.setText(searchPnArrayList.get(position).getTypeOfSession());
  holder.txtName.setText(searchPnArrayList.get(position).getName());
  holder.txtStart.setText(searchPnArrayList.get(position).getStartTime());
  holder.txtEnd.setText(searchPnArrayList.get(position).getEndTime());
  holder.txtRoom.setText(searchPnArrayList.get(position).getRoom());

  return convertView;
 }

 static class ViewHolder {

  TextView txtSession;
  TextView txtName;
  TextView txtStart;
  TextView txtEnd;
  TextView txtRoom;
 } 
```

}

这是我希望使用此 CustomAdapter 的 Activity。请注意，我正在使用 ArrayAdapter 来显示列表项 - 我还没有修改代码，因为我不知道应该怎么做才能正确管理这个自定义适配器（我正在尝试，但没有成功）。我是一个新手，所以我很难得到这个，尽管我正在阅读大量的教程。

```
 public class PoniedzialekActivity extends Activity implements OnClickListener, OnItemClickListener{ // z ListActivity na Activity

    private Button butPnAdd;
    private Button butPnDelete;
    private ListView list_Pn;

    private static final int DIALOG_ALERT = 10;

        // We need some kind of Adapter to made the connection between ListView UI component and SQLite data set.
        private ListAdapter pn_list_adapter;
        // We need this while we read the query using Cursor and pass data
        private ArrayList<Poniedzialek> pn_list;    

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_poniedzialek);

        butPnAdd = (Button) findViewById(R.id.butPnAdd);
        butPnAdd.setOnClickListener(this);

        butPnDelete = (Button) findViewById(R.id.butPnDel);
        butPnDelete.setOnClickListener(this);

        // Initialize UI components
        list_Pn = (ListView) findViewById(R.id.listPn);
        list_Pn.setOnItemClickListener(this);

        pn_list = new ArrayList<Poniedzialek>();

        // For the third argument, we need a List that contains Strings.
        //We decided to display undergraduates names on the ListView.
        //Therefore we need to create List that contains undergraduates names
        pn_list_adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
        list_Pn.setAdapter(pn_list_adapter);

    }
    @Override
    public void onClick(View v) {
        if(v.getId()==R.id.butPnAdd){
        Intent i = new Intent(PoniedzialekActivity.this,dodawaniePoniedzialek.class);
        startActivity(i);
        }
        if(v.getId()==R.id.butPnDel){
            showDialog(DIALOG_ALERT);
        }
    }
                /**
                 * DIALOG
                 */
                protected Dialog onCreateDialog(int id) {
                    switch (id) {
                    case DIALOG_ALERT:
                        // Create out AlterDialog
                        Builder builder = new AlertDialog.Builder(this);
                        builder.setTitle("Czy na pewno chcesz usunac wszystkie wpisy ?");
                        builder.setCancelable(true);
                        builder.setPositiveButton("Tak", new OkOnClickListener());
                        builder.setNegativeButton("Nie", new CancelOnClickListener());
                        AlertDialog dialog = builder.create();
                        dialog.show();
                    }
                    return super.onCreateDialog(id);
                }
                private final class CancelOnClickListener implements
                DialogInterface.OnClickListener {
                    public void onClick(DialogInterface dialog, int which) {
                        // Nic nie robi
                    }
                }
                private final class OkOnClickListener implements
                DialogInterface.OnClickListener {
                    public void onClick(DialogInterface dialog, int which) {            
                        DeletePn();
                        onResume();
                    }
                }
                public void DeletePn(){ 
                    DatabaseHelper openHelperClass = new DatabaseHelper(this);
                    SQLiteDatabase sqliteDatabase = openHelperClass.getWritableDatabase();

                    sqliteDatabase.delete(DatabaseHelper.PN_TABLE, null, null);

                }
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

    }
        // To create a List that contains undergraduate names, we have to read the SQLite database
        //We are going to do it in the separate method
        public List<String> populateList(){

            // We have to return a List which contains only String values. Lets create a List first
            List<String> pn_string_list = new ArrayList<String>();

            // First we need to make contact with the database we have created using the DbHelper class
            DatabaseHelper openHelperClass = new DatabaseHelper(this);

            // Then we need to get a readable database
            SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

            // We need a a guy to read the database query. Cursor interface will do it for us
            //(String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy)
            Cursor cursor = sqliteDatabase.query(DatabaseHelper.PN_TABLE, null, null, null, null, null, null);
            // Above given query, read all the columns and fields of the table

            startManagingCursor(cursor);

            // Cursor object read all the fields. So we make sure to check it will not miss any by looping through a while loop
            while (cursor.moveToNext()) {
                // In one loop, cursor read one undergraduate all details
                // Assume, we also need to see all the details of each and every undergraduate
                // What we have to do is in each loop, read all the values, pass them to the POJO class
                //and create a ArrayList of undergraduates

                String session = cursor.getString(cursor.getColumnIndex(DatabaseHelper.PN_KEY_TYPE_OF_SESSION));
                String start = cursor.getString(cursor.getColumnIndex(DatabaseHelper.PN_KEY_START_TIME));
                String end = cursor.getString(cursor.getColumnIndex(DatabaseHelper.PN_KEY_END_TIME));
                String name = cursor.getString(cursor.getColumnIndex(DatabaseHelper.PN_KEY_NAME));
                String room = cursor.getString(cursor.getColumnIndex(DatabaseHelper.PN_KEY_ROOM));

                // Finish reading one raw, now we have to pass them to the POJO
                Poniedzialek pn = new Poniedzialek();
                pn.setTypeOfSession(session);
                pn.setName(name);
                pn.setStartTime(start);
                pn.setEndTime(end);
                pn.setRoom(room);

                // Przekazujemy pn do arraylist
                pn_list.add(pn);
                // But we need a List of String to display in the ListView also.
                // That is why we create "pn_string_list"
                pn_string_list.add(name);
            }
            // Jezeli Baza Danych nie zostanie zamknieta dostaniemy error
            sqliteDatabase.close();
            return pn_string_list;
        }
        // If you don't write the following code, you wont be able to see what you have just insert to the database
        @SuppressWarnings("unchecked")
        @Override
        protected void onResume() {
            super.onResume();
            pn_list_adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
            list_Pn.setAdapter(pn_list_adapter);
            ((ArrayAdapter<String>) pn_list_adapter).notifyDataSetChanged(); // dodano
            list_Pn.refreshDrawableState(); // dodanoe
            list_Pn.invalidate(); // dodanoe
        }
} // end PoniedzialekActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:26:06.050

为您的自定义适配器类 CustomAdapterPn 创建一个对象，并将此自定义适配器对象设置为 list view 。不是阵列适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:26:23.120

看这条线，并根据它进行更改，

```
CustomAdapterPn pn_list_adapter; //change 1

pn_list = new ArrayList<Poniedzialek>();
populateList() // Change 2
pn_list_adapter = new CustomAdapterPn(this,pn_list); // Change 3
list_Pn.setAdapter(pn_list_adapter); 
```

试试这个，让我知道会发生什么..

# jquery - jquery排序按钮点击

> ID：11224013
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:20:41.893
> 
> 标签：jquery, sorting

我使用 jquery 排序（[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)）。只有当我点击特定的 div 或图像时才可以排序（移动列表）？

例如，仅当我单击黑色箭头时（上例）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:25:43.947

[您可以在句柄](http://jqueryui.com/demos/sortable/#option-handle)选项中传递选择器：

```
$("#sortable").sortable({
    handle: ".ui-icon-arrowthick-2-n-s"
}); 
```

你可以在[这个 fiddle](http://jsfiddle.net/2rT82/)中测试它。

# objective-c - 强制洗牌 NSMutableArray

> ID：11224014
> 
> 赞同：4
> 
> 时间：2012-06-27T10:20:43.917
> 
> 标签：objective-c, ios, xcode

我有一个名为 putNumberUsed 的 NSMutableArray。它包含以下对象@"blah1,@"blah2",@"blah3",@"blah4"。我想随机打乱这些对象，例如，如果我选择：

```
 [putNumberUsed objectAtIndex:0] 
```

**除了 "blah1" 之外，它会给我任何东西**。我该怎么做呢？以下是我迄今为止使用的代码：

```
NSMutableArray *putNumbersUsed = [[NSMutableArray alloc] arrayWithObjects:@"blah1",@"blah2",@"blah3",@"blah4",nil]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T10:50:04.043

我认为，您可以为此编写一个循环。请检查以下代码，

```
for (int i = 0; i < putNumberUsed.count; i++) {
    int randomInt1 = arc4random() % [putNumberUsed count];
    int randomInt2 = arc4random() % [putNumberUsed count];
    [putNumberUsed exchangeObjectAtIndex:randomInt1 withObjectAtIndex:randomInt2];
} 
```

我这可能对你有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-15T03:09:40.377

这是一个洗牌解决方案，当 count > 1 时，所有位置都被迫改变。

添加 NSMutableArray+Shuffle.m 之类的类别：

```
@implementation NSMutableArray (Shuffle)
// Fisher-Yates shuffle variation with all positions forced to change
- (void)unstableShuffle
{
    for (NSInteger i = self.count - 1; i > 0; i--)
        // note: we use u_int32_t because `arc4random_uniform` doesn't support int64
        [self exchangeObjectAtIndex:i withObjectAtIndex:arc4random_uniform((u_int32_t)i)];
}
@end 
```

然后你可以像这样洗牌：

```
[putNumbersUsed unstableShuffle]; 
```

这个解决方案：

*   没有[模偏差](http://eternallyconfuzzled.com/arts/jsw_art_rand.aspx)
*   没有[天真的偏见](https://blog.codinghorror.com/the-danger-of-naivete/)
*   没有[排序偏差](http://www.robweir.com/blog/2010/02/microsoft-random-browser-ballot.html)

Swift 3.2 和 Swift 4 等价物是：

```
extension Array {
    mutating func unstableShuffle() {
        for i in stride(from: count - 1, to: 0, by: -1) {
            swapAt(i, Int(arc4random_uniform(UInt32(i))))
        }
    }
} 
```

Swift 3.0 和 3.1 的等效版本是：

```
extension Array {
    mutating func unstableShuffle() {
        for i in stride(from: count - 1, to: 0, by: -1) {
            swap(&self[i], &self[Int(arc4random_uniform(UInt32(i)))])
        }
    }
} 
```

注意：[还可以使用常规洗牌算法（可能有相同位置的结果）](https://stackoverflow.com/a/33840745/1033581)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-06T07:01:13.110

从 iOS 10.x++开始，Apple 给出了[shuffle 数组的新概念，](https://developer.apple.com/reference/foundation/nsarray/1640855-shuffled)

您需要导入框架：

**对象**

```
#import <GameplayKit/GameplayKit.h>

NSArray *shuffledArray = [yourArray shuffledArray]; 
```

**迅速**

```
import GameplayKit

let shuffledArray = yourArray.shuffled() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T10:28:15.653

您可以使用以下代码行随机播放对象，

```
[putNumbersUsed exchangeObjectAtIndex:3 withObjectAtIndex:0]; 
```

我认为这可能对你有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T10:22:59.233

为索引生成一个随机数

```
int randomInt = arc4random() % [putNumberUsed count];
[putNumberUsed objectAtIndex:randomInt]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T10:51:15.680

用这个：

```
for (int i = 0; i < [putNumberUsed count]; i++) {
    int random = arc4random() % [putNumberUsed count]; 
    [putNumbersUsed exchangeObjectAtIndex:random withObjectAtIndex:i]; 
} 
```

# django - Django 中的 CSRF 保护

> ID：11224018
> 
> 赞同：2
> 
> 时间：2012-06-27T10:21:00.437
> 
> 标签：django, csrf, django-csrf

我对 django 中的 CSRF 保护一无所知。例如我们有一些恶意网站。将 get-request 从该站点发送到受 csrf 保护的 url，解析页面并获取 csrf 值，然后使用此值发布有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:48:38.910

> 例如我们有一些恶意网站。将 get-request 从该站点发送到受 csrf 保护的 url，解析页面并获取 csrf 值，然后使用此值发布有什么问题？

如果您这样做，CSRF cookie 的会话副本将不匹配，并且您的请求将被拒绝。

此外，应该注意的是，仅针对 HTTPS 请求进行引荐来源网址检查，以防止[MitM](http://en.wikipedia.org/wiki/Man-in-the-middle)漏洞。

有关CSRF 保护如何工作的讨论，请参阅[这个 django wiki 条目，以及专门讨论 MitM 攻击的](https://code.djangoproject.com/wiki/CsrfProtection)[这个 SO question](https://stackoverflow.com/questions/6066462/how-does-this-man-in-the-middle-attack-work)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:45:01.980

Django 的 CSRF 的主要目的在 Django Docs (https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-it-works) 中有解释：

> 这可确保只有源自您网站的表单才能用于 POST 回数据。

所以它会检查几件事——cookie、referrer、posted value。并且有一些限制，您不能总是随意修改所有这些值。例如 - 您可以在 AJAX 调用中设置 X-CSRFToken 令牌和 POST 值，但浏览器不允许您覆盖引用标头...您可能会成功使用 urllib2 或类似库成功执行 POST，但这不受 CSRF 保护的影响，因为它与您在页面上发布的内容相同。再一次 - CSRF 意味着跨站点请求伪造，它是它所保护的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:43:48.157

REFERRER 将被检查。如果 REFERRER 确实对应于正确的 URL，则 POSTing 数据无效。

# java - 春季上下文初始化时出现不兼容的ClassChangeError

> ID：11224020
> 
> 赞同：0
> 
> 时间：2012-06-27T10:21:06.247
> 
> 标签：java, spring, hibernate

```
Error occurred during deployment: Exception while loading the app : 
java.lang.IllegalStateException: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: 
java.lang.IncompatibleClassChangeError: Implementing class. Please see server.log for more details.

org.springframework.beans.factory.BeanCreationException:
  Error creating bean with name 'helloWorldController': 
  Injection of autowired dependencies failed; nested exception is 
org.springframework.beans.factory.BeanCreationException: 
  Could not autowire field: private org.hibernate.SessionFactory 
  org.meluk.billboard.business.controller.HelloWorldController.sessionFactory; nested exception is 
org.springframework.beans.factory.BeanCreationException: 
  Error creating bean with name 'sessionFactory' defined in 
  ServletContext resource [/WEB-INF/billboard-servlet.xml]: 
    Invocation of init method failed; nested exception is 
    java.lang.IncompatibleClassChangeError: Implementing class 
```

我的 pom.xml：

```
<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <springVersion>3.1.0.RELEASE</springVersion>
    <hibernateVersion>3.5.4-Final</hibernateVersion>
    <junitVersion>4.8.2</junitVersion>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${springVersion}</version>
        </dependency>
    </dependencies>
</dependencyManagement>

<dependencies>
    <dependency>
        <groupId>javax.sql</groupId>
        <artifactId>jdbc-stdext</artifactId>
        <version>2.0</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junitVersion}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernateVersion}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>${hibernateVersion}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${springVersion}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-hibernate3</artifactId>
        <version>2.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${springVersion}</version>
    </dependency> 
```

我的弹簧配置文件：

```
<context:component-scan  base-package="org.meluk.billboard.business.controller" />
<tx:annotation-driven transaction-manager="txManager" />
<bean id="propertyConfigurer"  class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>/WEB-INF/config/jdbc.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >
    <property name="driverClassName" value="${hibernate.connection.driver_class}" />
    <property name="url" value="${hibernate.connection.url}" />
    <property name="username" value="${hibernate.connection.username}" />
    <property name="password" value="${hibernate.connection.password}" />
</bean>
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="/WEB-INF/hibernate.cfg.xml" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.default_schema">${hibernate.default_schema}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
            <prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
            <prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
            <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
            <prop key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
        </props>
    </property>
</bean>

<bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

请帮助解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:06:45.153

`IncompatibleClassChangeError`意味着 JVM 正在获取有关某个类的矛盾信息。这通常发生在您针对类或接口的一个版本编译一些代码，但随后在运行时使用该类/接口的不同版本时。当 JVM 检查类和方法签名是否匹配时，会在运行时发现问题。

在这种情况下，“Implementing class”消息似乎是在说更改的类不再实现它最初执行的某个接口。（也许包名改变了。）

在您的日志文件中的某处应该有一条消息，指出导致问题的类，但您提供的堆栈跟踪的删除版本没有。

* * *

我会说它们是两种可能性。一个是你的构建方式有问题，你没有重新编译应该重新编译的东西。另一种可能性是您的 WAR 文件中的 JAR 组合不一致；例如，您以某种方式混合来自不同版本的 Spring 的 JAR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:19:43.853

您明确设置了 spring-hibernate3 依赖项：

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-hibernate3</artifactId>
<version>2.0.8</version> 
```

这是您遇到异常的 bean 并非巧合。

你不应该这样做；您是否有理由不使用与您正在使用的 Spring 相同版本的 spring-orm？我已经有一段时间没有设置明确的 hibernate3 依赖项了。

# c# - c# 泛型与非泛型枚举器

> ID：11224027
> 
> 赞同：3
> 
> 时间：2012-06-27T10:21:29.627
> 
> 标签：c#, generics, enumerable

一个新手问题。

C# 中的数组返回非泛型（经典）IEnumerator。其他收藏也可以提供。

一般来说，如果通用枚举器可用，是否更好，例如出于类型安全的原因？有时非通用选项更可取吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:24:58.740

*通常*最好使用泛型枚举，因为正如您在问题中提到的那样，类型安全。

如果您仅存储对象集合，则可以选择*非*泛型枚举。因此，您无需编写`IEnumerable<object>`，而是编写`IEnumerable`并找出迭代中的*真实*对象类型（如果您需要，但通常是的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:33:02.457

`foreach`实际上并不总是使用`IEnumerable[<T>]`/ `IEnumerator[<T>]`API *。*首先，它实际上不是必需的：只*需要**一个*返回`GetEnumerator()`带有a的方法的方法，例如，具有自定义迭代器。这种方法在 .NET 1.1 中也很常见，通过优先使用自定义迭代器来避免装箱。*`bool MoveNext()``Current {get;}``List<T>`*

 *然而，在数组的情况下，它可能更有趣。考虑：

```
 static void Main()
    {
        foreach(var i in GetData()) Console.WriteLine(i);
    }
    static int[] GetData()
    {
        int[] data = { 1, 2, 3, 4, 5 };
        return data;
    } 
```

在这里，`Main`编译为（`//`评论是我的）：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 2
    .locals init (
        [0] int32 i,
        [1] int32[] CS$6$0000,
        [2] int32 CS$7$0001)

    // int[] arr = GetData()
    L_0000: call int32[] ConsoleApplication7.Program::GetData()
    L_0005: stloc.1

    // int j = 0
    L_0006: ldc.i4.0 
    L_0007: stloc.2

    // run end-condition of for loop first...
    L_0008: br.s L_0018

    // i = arr[j]
    L_000a: ldloc.1 
    L_000b: ldloc.2 
    L_000c: ldelem.i4          
    L_000d: stloc.0

    // Console.WriteLine(i);
    L_000e: ldloc.0 
    L_000f: call void [mscorlib]System.Console::WriteLine(int32)

    // j++
    L_0014: ldloc.2 
    L_0015: ldc.i4.1 
    L_0016: add 
    L_0017: stloc.2

    // j < arr.Length
    L_0018: ldloc.2 
    L_0019: ldloc.1 
    L_001a: ldlen 
    L_001b: conv.i4
    L_001c: blt.s L_000a

    L_001e: ret 
} 
```

它*不使用*枚举器 API；它实际上已将其实现为`for`循环。*

# json - Spring 3.0 异常在 POST 上将 String 转换为 java.util.Date

> ID：11224028
> 
> 赞同：5
> 
> 时间：2012-06-27T10:21:33.433
> 
> 标签：json, spring, date, smartgwt, java.util.date

我希望有人可以帮助我，因为几天来我一直在努力解决一个看起来很简单并且已经在网络上的其他线程中记录的问题。

我将 Smart GWT 客户端（3.0）与 Spring 3.1 服务器结合使用，并使用 JSON 进行通信（使用 Jackson API 1.9）。

问题是，当我尝试从 SmartGWT 客户端保存日期并将其发送到服务器时，出现以下异常：

`org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors Field error in object 'comment' on field 'dateAdded': rejected value [2012-06-27T10:57:47+0100]; codes [typeMismatch.comment.dateAdded,typeMismatch.dateAdded,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [comment.dateAdded,dateAdded]; arguments []; default message [dateAdded]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Date' for property 'dateAdded'; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type java.lang.String to type java.util.Date for value '2012-06-27T10:57:47+0100'; nested exception is java.lang.IllegalArgumentException] at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:110)`

我在其他一些帖子中看到过这个问题，但大多数与没有以正确格式格式化日期有关，但我尝试了各种格式：-yyyy-MM-dd -yyyy-MM-dd'T'HH:mm :ssZ - yyyyMMddHHmmssZ （根据这里的建议：[http](http://code.google.com/p/usersapi/issues/detail?id=8) ://code.google.com/p/usersapi/issues/detail?id=8 ）

所以在我的代码中，我做了以下事情：

1.  配置了一个 CustomObjectMapper：

` 公共类 CustomObjectMapper 扩展 ObjectMapper {

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");

public CustomObjectMapper() {
    super();
    configure(Feature.WRITE_DATES_AS_TIMESTAMPS, false);
    setDateFormat(formatter);
    getDeserializationConfig().setDateFormat(formatter);
} 
```

} `

1.  因此，Spring 应用程序上下文：

`

```
<mvc:annotation-driven>
    <mvc:message-converters>            
        <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
            <constructor-arg ref="jaxbMarshaller" />
            <property name="supportedMediaTypes" value="application/xml"/>
        </bean>
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
            <property name="objectMapper" ref="jacksonObjectMapper" />
            <property name="supportedMediaTypes" value="application/json" />
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>

<context:component-scan base-package="com.jpmorgan.creditriskreporting.server" />

<bean id="marshallingConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
    <constructor-arg ref="jaxbMarshaller" />
    <property name="supportedMediaTypes" value="application/xml"/>
</bean>

<bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="supportedMediaTypes" value="application/json" />
    <property name="objectMapper" ref="jacksonObjectMapper" />
</bean>

<bean id="jacksonObjectMapper" class="com.jpmorgan.creditriskreporting.server.util.CustomObjectMapper" />

<!-- Client -->
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
    <property name="messageConverters">
        <list>
            <ref bean="marshallingConverter" />
            <ref bean="jsonConverter" />
        </list>
    </property>
</bean> 
```

`

1.  豆对象：

` 导入 java.util.Date;

@JsonAutoDetect 公共类评论 {

```
private int id;
private String comment;
private Date dateAdded;

public Comment() {}

public Comment(int id) {
    this.id = id;
} 
```

...

```
//@JsonSerialize(using=JsonDateSerializer.class) -- I had previously tried to use these custom Date serializer class
public Date getDateAdded() {
    return dateAdded;
}
//@JsonDeserialize(using=JsonDateDeserializer.class)
public void setDateAdded(Date dateAdded) {
    this.dateAdded = dateAdded;
} 
```

`

**编辑：**

1.  控制器类

这可能是问题所在，因为当我使用 @RequestBody 时，它适用于我的集成测试，但是，SmartGWT 中的 Abstract RestDataSource 仅适用于 @ModelAttribute，所以我不确定如何继续。

`@RequestMapping(value="/", method=RequestMethod.POST) public @ResponseBody Comment createNewComment2(@ModelAttribute Comment comment) { log.info("calling createComment with comment: {}", comment); comment.setDateAdded(new Date()); Comment added = commentDao.create(comment); log.info("created comment: {}", added); return commentDao.get(comment);
}`

所以我可以从服务器获取数据，并且日期显示在 SmartGWT 中。只有当我添加数据时，我才会遇到问题。从 Smart GWT 开发者控制台：

`{ "dataSource":"CommentDS", "operationType":"add", "componentId":"isc_DynamicForm_1", "data":{ "userAdded":"sharper", "dateAdded":"2012-06-27T10:57:47+0100", "comment":"sample" }, "callback":{ "target":[DynamicForm ID:isc_DynamicForm_1], "methodName":"saveEditorReply" }, "showPrompt":true, "prompt":"Saving form...", "oldValues":{ }, "clientContext":{ }, "requestId":"CommentDS$6272" }`

非常感谢您对此的任何帮助。

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T12:54:49.780

感谢[http://vkubushyn.wordpress.com/2011/05/31/smart-gwt-restful-spring-mvc我发现了这个问题](http://vkubushyn.wordpress.com/2011/05/31/smart-gwt-restful-spring-mvc)

不得不使用 Spring 的 InitBinder

`@InitBinder public void initBinder(WebDataBinder binder) { SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ"); dateFormat.setLenient(false); binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, false)); }`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-14T10:26:44.347

您应该将 DateFormat 添加到您的模型中。

```
@DateTimeFormat(pattern = "dd.MM.yyyy")
private Date beginDate;
@DateTimeFormat(pattern = "dd.MM.yyyy")
private Date endDate; 
```

作为函数参数

```
 void  functionName** (@RequestParam("beginDate") @DateTimeFormat(pattern = "dd.MM.yyyy")Date beginDate, @RequestParam("endDate") @DateTimeFormat(pattern = "dd.MM.yyyy")Date endDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:35:32.353

我可能错了，但据我记得 Z 代表 ISOwhoknowswhatformat 中的时区。那是 4 个字符宽，所以我会试试这个：

> new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZZZZ");

顺便说一句：如果这是您应该在单元测试中发现的问题。你有单元测试，`CustomObjectMapper`不是吗？:P

# java - Android GPS 应用程序无法正常工作

> ID：11224029
> 
> 赞同：0
> 
> 时间：2012-06-27T10:21:33.930
> 
> 标签：java, android, google-maps, gps

我尝试制作自己的应用程序并使用谷歌地图。我希望它在我当前的 gps 位置上设置地图的中心，但是当我的手机上有 gps 锁定时，我只会转到这些坐标 (0,0) 我不知道我哪里出错了。谢谢大家 :D

```
import android.content.Context;
import android.location.Location;
import android.location.LocationListener; 
import android.location.LocationManager;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class Courses extends MapActivity {

MapView map;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.courses);       
    MapView map = (MapView) findViewById (R.id.MapView);
    map.setBuiltInZoomControls(true);
    map.setSatellite(true);
    final MapController control = map.getController();

    LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    LocationListener listener = new LocationListener() {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            control.setCenter(new GeoPoint((int)location.getLatitude(),(int)location.getLongitude()));              
            control.setZoom(19);
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    };

manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

} `

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:34:44.683

我在这里看到的第一个问题是*location.getLatitude()*和*location.getLongitude()*返回*float*，它必须乘以 1E6 然后转换为*int*才能被*GeoPoint*接受。这也解释了为什么您的坐标约为 0,0

我建议`control.setCenter(new GeoPoint((int)location.getLatitude(),(int)location.getLongitude()));`用`control.setCenter(new GeoPoint((int)(location.getLatitude() * 1E6),(int)(location.getLongitude() * 1E6)));`

试试看，它应该可以工作。

# php - 从 Facebook 应用发布用户的活动

> ID：11224032
> 
> 赞同：0
> 
> 时间：2012-06-27T10:21:43.773
> 
> 标签：php, facebook, facebook-graph-api, facebook-apps

我正在开发一个 Facebook 应用程序，我正在尝试将用户在我的应用程序中的活动发布到用户墙中，例如当用户对帖子发表评论时，故事反馈会出现在他的墙中，并且可供他的朋友查看

我已阅读这些教程：

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

以及以下线程：

[如何使用调用 URL 中的参数将操作发布到 Facebook Graph API](https://stackoverflow.com/questions/8982416/how-to-publish-actions-to-facebook-graph-api-with-parameters-in-call-url)

[Facebook-将故事发布到用户的墙上](https://stackoverflow.com/questions/9309264/facebook-publishing-a-story-to-users-wall)

我对应该遵循哪一个感到困惑，因为 openGraph 实现起来似乎有点复杂……那么实现我的要求的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:30:03.937

如果您想在用户墙上发布活动，则首选开放图表方式，您还将获得大量分布（营销）。

您可以使用 facebook 的[PHP Official sdk](https://github.com/facebook/facebook-php-sdk)，让您的工作更轻松。

要发布打开的图形操作，您应该获得用户的`publish_actions` [扩展权限](https://developers.facebook.com/docs/authentication/permissions/#extended_perms)。

或者

`/me/feed`您可以使用需要`[publish_stream][3]`扩展权限的方法在用户的墙上发帖。

***SDK教程***

[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

***打开图形示例应用程序***
下载 Social Cafe 应用程序并查看他们的代码
[https://developers.facebook.com/docs/opengraph/samples/](https://developers.facebook.com/docs/opengraph/samples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:47:36.903

您也可以使用[Javascript SDK](https://developers.facebook.com/docs/reference/javascript/)，而且有时效果会更好。例如，最近 Facebook 强制用户必须在应用发布前至少阅读 10 秒`news:Read`。这些是可以使用 javascript sdk 和 jquery（或类似的客户端技术）非常有效地处理的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-17T13:19:28.830

至于 2018 年 4 月，该`publish_actions`权限不再可用。

# perl - 计算和打印重复字段 - oneliner

> ID：11224033
> 
> 赞同：1
> 
> 时间：2012-06-27T10:21:44.213
> 
> 标签：perl

为下一个 perl 脚本寻找一个漂亮（短而优雅）的衬里：

```
use strict;
use warnings;

my %all;
while(<DATA>) {
    chomp;
    my ($name, $x, $path) = split /\s+/;
    push @{$all{$path}}, $name;
}
foreach my $path (sort keys %all) {
    my $cnt = scalar @{$all{$path}};
    print "$path $cnt @{$all{$path}}\n" if $cnt > 1;
}
__DATA__
Atxt  x     a/b/c
Btxt x a/d/x
Ctxt x i/t/a
Dtxt x i/y/a
Etxt  x     i/t/a
Ftxt x a/d/x
Gtxt x a/d/x 
```

ofc，单行应该从 STDIN 而不是从 DATA 读取。

简而言之，该脚本读取 3 个字段（`name`、`x`、`path`），并应以以下形式输出重复路径的摘要：`path dup_count name1 ... namex`. 每个`name`都是不同的。

所以，寻找类似的东西：

```
my_command | perl -F '\s+' -nle 'shorter_variant_of_the_above_script' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:12:16.843

可能有一些方法可以缩短它，但这里有一个尝试：

```
perl -lane 'push@{$h{$F[2]}},$F[0]}{map{$n=@v=@{$h{$_}};print"$_ $n @v"if$n>1}keys%h' 
```

输出提供的数据：

```
a/d/x 3 Btxt Gtxt Ftxt
i/t/a 2 Etxt Ctxt 
```

# java - 查找包含数组中所有单词的字符串的子字符串

> ID：11224034
> 
> 赞同：2
> 
> 时间：2012-06-27T10:21:46.247
> 
> 标签：java, string, substring, unordered

我有一个字符串和一个单词数组，我必须编写代码来查找字符串的所有子字符串，这些子字符串以任意顺序包含数组中的所有单词。该字符串不包含任何特殊字符/数字，每个单词用空格分隔。

例如：

**给定的字符串：**

```
aaaa aaaa aaaa aaaa cccc bbbb bbbb bbbb bbbb aaaa bbbb cccc 
```

**数组中的单词：**

```
aaaa
bbbb
cccc 
```

**输出样本：**

```
aaaa aaaa aaaa aaaa cccc bbbb bbbb bbbb bbbb    

aaaa aaaa aaaa aaaa cccc bbbb    

aaaa cccc bbbb bbbb bbbb bbbb    

cccc bbbb bbbb bbbb bbbb aaaa  

aaaa cccc bbbb 
```

我已经使用 for 循环实现了这一点，但这非常低效。

我怎样才能更有效地做到这一点？

**我的代码：**

```
 for(int i=0;i<str_arr.length;i++)
    {
        if( (str_arr.length - i) >= words.length)
        {
            String res = check(i);
            if(!res.equals(""))
            {
                System.out.println(res);
                System.out.println("");
            }
            reset_all();
        }
        else
        {
            break;
        }
    }

public static String check(int i)
{
    String res = "";
    num_words = 0;

    for(int j=i;j<str_arr.length;j++)
    {
        if(has_word(str_arr[j]))
        {
            t.put(str_arr[j].toLowerCase(), 1);
            h.put(str_arr[j].toLowerCase(), 1);

            res = res + str_arr[j]; //+ " ";

            if(all_complete())
            {
                return res;
            }

            res = res + " ";
        }
        else
        {
            res = res + str_arr[j] + " ";
        }

    }
    res = "";
    return res;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:39:09.893

我的第一种方法类似于以下伪代码

```
 for word:string {
    if word in array {
      for each stored potential substring {
        if word wasnt already found {
          remove word from notAlreadyFoundList
          if notAlreadyFoundList is empty {
            use starting pos and ending pos to save our substring
          }
        }
      store position and array-word as potential substring
  } 
```

这应该具有不错的性能，因为您只遍历字符串一次。

**[编辑]**

这是我的伪代码的一个实现，试试看它的性能是好是坏。它的工作假设是一旦找到最后一个单词就找到了匹配的子字符串。如果您真的想要*所有*匹配项，请更改标记的行`//ALLMATCHES`：

```
class SubStringFinder {
    String textString = "aaaa aaaa aaaa aaaa cccc bbbb bbbb bbbb bbbb aaaa bbbb cccc";
    Set<String> words = new HashSet<String>(Arrays.asList("aaaa", "bbbb", "cccc"));

    public static void main(String[] args) {
        new SubStringFinder();
    }

    public SubStringFinder() {
        List<PotentialMatch> matches = new ArrayList<PotentialMatch>();
        for (String textPart : textString.split(" ")) {
            if (words.contains(textPart)) {
                for (Iterator<PotentialMatch> matchIterator = matches.iterator(); matchIterator.hasNext();) {
                    PotentialMatch match = matchIterator.next();
                    String result = match.tryMatch(textPart);
                    if (result != null) {
                        System.out.println("Match found: \"" + result + "\"");
                        matchIterator.remove(); //ALLMATCHES - remove this line
                    }
                }
                Set<String> unfound = new HashSet<String>(words);
                unfound.remove(textPart);
                matches.add(new PotentialMatch(unfound, textPart));
            }// ALLMATCHES add these lines 
             // else {
             // matches.add(new PotentialMatch(new HashSet<String>(words), textPart));
             // }
        }
    }

    class PotentialMatch {
        Set<String> unfoundWords;
        StringBuilder stringPart;
        public PotentialMatch(Set<String> unfoundWords, String part) {
            this.unfoundWords = unfoundWords;
            this.stringPart = new StringBuilder(part);
        }
        public String tryMatch(String part) {
            this.stringPart.append(' ').append(part);
            unfoundWords.remove(part);                
            if (unfoundWords.isEmpty()) {
                return this.stringPart.toString();
            }
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:11:06.297

这是另一种方法：

```
public static void main(String[] args) throws FileNotFoundException {
    // init
    List<String> result = new ArrayList<String>();
    String string = "aaaa aaaa aaaa aaaa cccc bbbb bbbb bbbb bbbb aaaa bbbb cccc";
    String[] words = { "aaaa", "bbbb", "cccc" };
    // find all combs as regexps (e.g. "(aaaa )+(bbbb )+(cccc )*cccc", "(aaaa )+(cccc )+(bbbb )*bbbb")
    List<String> regexps = findCombs(Arrays.asList(words));
    // compile and add
    for (String regexp : regexps) {
        Pattern p = Pattern.compile(regexp);
        Matcher m = p.matcher(string);
        while (m.find()) {
            result.add(m.group());
        }
    }
    System.out.println(result);
}

private static List<String> findCombs(List<String> words) {
    if (words.size() == 1) {
        words.set(0, "(" + Pattern.quote(words.get(0)) + " )*" + Pattern.quote(words.get(0)));
        return words;
    }
    List<String> list = new ArrayList<String>();
    for (String word : words) {
        List<String> tail = new LinkedList<String>(words);
        tail.remove(word);
        for (String s : findCombs(tail)) {
            list.add("(" + Pattern.quote(word) + " ?)+" + s);
        }
    }
    return list;
} 
```

这将输出：

```
[aaaa bbbb cccc, aaaa aaaa aaaa aaaa cccc bbbb bbbb bbbb bbbb, cccc bbbb bbbb bbbb bbbb aaaa] 
```

我知道结果并不完整：你只得到了可用的组合，*完全扩展*，但你得到了所有的组合。

# java - JSONProvider 返回空对象，例如 String

> ID：11224035
> 
> 赞同：3
> 
> 时间：2012-06-27T10:21:46.503
> 
> 标签：java, json, rest, jaxb, cxf

我使用`JAXB`和`JSONProvider`类在我的 REST 服务中生成对客户端的响应。我发现了一件有趣的事情。我有映射：

```
@XmlRootElement(name = "fooRoot")
@XmlAccessorType(XmlAccessType.FIELD)
public class WSBar {
     private WSFooTO foos;
//...
}

@XmlRootElement(name = "foos")
@XmlAccessorType(XmlAccessType.FIELD)
public class WSFooTO {
    private WSDateTO one;
    private WSDateTO two;
    private WSDateTO three;
    private WSDateTO four;
//....
} 
```

当我设置响应空对象时，我的意思是：就在`new WSDateTO()`之后`new WSFooTO ()` ，我收到这样的答案：

```
{"fooRoot":{
    "foos":{
        "one":"",
        "two":"",
        "three":"",
        "four":""
    }
}} 
```

为什么会这样？我希望它应该是：“one”：null，“two”：null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:38:11.807

根据 JAXB[教程](http://jaxb.java.net/tutorial/section_2_2_12_8-No-Value.html#No%20Value)，值的缺失可以用三种不同的方式表示：

*   该元素被省略
*   使用`@XmlElement(required = true)`注释的空字符串
*   使用注释的特殊`xsi:nil`属性`@XmlElement(nillable = true)`

严格回答您的问题：JAXB 不支持将空对象转换为`null`.

# iphone - iPhone模拟器上的互联网

> ID：11224038
> 
> 赞同：0
> 
> 时间：2012-06-27T10:21:56.097
> 
> 标签：iphone, salesforce

我是一名 Salesforce 开发人员，我需要在 iPhone 设备上获取一个已转换为 HTML 5 的 VF 页面，以提高 VF 页面的处理速度。所以我从 [http://downloads.phpnuke.org/en/download-item-view-yymbba/IPHONE%2BSIMULATOR.htm下载了 iPhone 模拟器](http://downloads.phpnuke.org/en/download-item-view-y-y-m-b-b-a/IPHONE%2BSIMULATOR.htm)

但我无法连接到互联网。任何人都可以帮我解决这个问题，我是第一次使用 iPhone 模拟器。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:42:55.737

作为替代方案，您可以使用[http://iphone4simulator.com/](http://iphone4simulator.com/)或[http://transmog.net](http://transmog.net)来测试您的 html5 移动网站

# javascript - 在另一个fancybox ajax 上打开fancybox

> ID：11224042
> 
> 赞同：1
> 
> 时间：2012-06-27T10:22:17.710
> 
> 标签：javascript, ajax, fancybox

我有一个 Fancybox，它显示了一些对话框和一个可供单击的按钮。当我单击此按钮时，我想在现有的一个..或屏幕上的另一个位置打开另一个fancybox，但我不想丢失已经存在的fancybox。我想通过 ajax 请求来填充它们。这可能吗？因为我的尝试导致丢失了原来的fancybox..

我得到了这个代码：

```
$.fancybox.showActivity();
                $.ajax({
                    type        : "POST",
                    cache       : false,
                    url     : "../testservlet?select=1,
                    data        : $(this).serializeArray(),
                    height      : 600,
                    width       : 800,
                    padding     : 30,
                    showCloseButton : true,
                    success     : function(data) {
                        $.fancybox(data);
                    }
                });

$.fancybox.showActivity();
                $.ajax({
                    type        : "POST",
                    cache       : false,
                    url     : "test?select=2,
                    data        : $(this).serializeArray(),
                    padding     : 30,
                    showCloseButton : true,
                    success     : function(data) {
                        $.fancybox(data);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:59:17.217

不幸的是，你不能同时拥有一个以上的花式盒子……它就是这样设计的。

你可以在现有的里面有另一个fancybox（当打开一个外部页面 - 通过iframe - 其中有fancybox）......或者你可以在父页面上打开那个内部fancybox，创造你有两个fancybox的错觉同一页。[在这里查看更多](https://stackoverflow.com/a/8855410/1055987)

另一方面，我记得唯一支持多个盒子的灯箱是[jQuery Tools Overlay](http://jquerytools.org/demos/overlay/multiple.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T11:43:50.413

在 iframe 中打开第一个 fancybox。然后在里面可以打开另一个fancybox。

# svn - 使用 WebDAV 进行颠覆

> ID：11224046
> 
> 赞同：1
> 
> 时间：2012-06-27T10:22:19.430
> 
> 标签：svn, webdav

有谁知道如何在 WebDAV 服务器上使用颠覆？

我目前有一个文件托管订阅，它还为我提供了对空间的 WebDAV 访问。我想知道是否可以将 Visual Studio（使用 AnkhSVN）连接到此 WebDAV 服务器并将其用于版本控制。

我试过了，并且能够连接到服务器。但除此之外，它不允许我进一步进行。有人可以分享他们的想法吗？

# eclipse - 如何配置 Texlipse 使其默认生成 .pdf 而不是 .dvi？

> ID：11224047
> 
> 赞同：0
> 
> 时间：2012-06-27T10:22:30.723
> 
> 标签：eclipse, pdf, configuration

问题在标题中。这应该是愚蠢的。但是......我真的不明白怎么做！以下是我的构建路径。任何人都可以帮忙吗？目标是使用 pdf4eclipse 并在 eclipse 中获得并排视图。

![我的建筑路径](../Images/26e3c7b055fed5cd3508e74e54a8b59c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:25:35.160

You can change the output format in properties of your Latex project:

![enter image description here](../Images/ae04843c27fd13085eda5b22f0b827e8.png)

This has to be done on every Latex project. AFAIR there is no general settings that would allow to change this for all current and new projects.

# storyboard - TabBar 内的 UISplitViewController，情节提要不改变方向

> ID：11224048
> 
> 赞同：0
> 
> 时间：2012-06-27T10:22:36.970
> 
> 标签：storyboard, uisplitviewcontroller, tabbarcontroller

我已经使用情节提要创建了一个基于选项卡的应用程序，并在我的选项卡项目中添加了 splitview 控制器。问题是当我将 splitview 控制器添加到选项卡时，在界面方向上运行应用程序更改没有效果。只有当我在 shouldRotateAutoInterfaceOrientation 方法中返回 YES 时，它才会保持在 potrait 模式。

我是故事板的新手。难道我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:54:56.903

您确定在每个主视图和详细视图中都返回“是”吗？如果您忘记了一个，它将不会旋转。

# android - 扩展 FragmentActivity 而不是 Activity

> ID：11224049
> 
> 赞同：6
> 
> 时间：2012-06-27T10:22:37.587
> 
> 标签：android, fragment

我有我的应用程序代码库，其中包含多个活动。我有一个`BaseActivity`扩展`Activity`类的类，它是我的应用程序中所有活动的父类。`BaseActivity`处理我的应用程序在后台进入并返回前台的状态。现在我已经编写了更多正在使用的活动，`fragments`因此这些新活动正在扩展`FragmentActivity`。但是我的应用程序设计要求所有活动都应该扩展`BaseActivity`类。

我心中的解决方案：

*   BaseActivity 扩展 FragmentActivity 而不是 Activity 类。
*   新活动（带有片段）扩展 BaseActivity 而不是直接扩展 FragmentActivity。

使用此解决方案，我担心扩展`Activity`类（通过`BaseActivity`）的现有活动中会产生任何副作用。现在这些活动将扩展`FragmentActivity`（尽管它们内部没有片段）。`FragmentActivity`即使我里面没有任何片段，如果我扩展也可以吗？它的行为会与 Activity 相同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:29:57.483

看起来`FragmentActivity extends Activity`很好。如果想要支持旧版本，您需要添加 compitiblilty 库

[http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)

即使我做了同样的事情，也没有发现任何副作用

# objective-c - MPMoviePlayerController 在 ios 5 中不起作用

> ID：11224050
> 
> 赞同：0
> 
> 时间：2012-06-27T10:22:37.667
> 
> 标签：objective-c, ios5

我在使用 MPMoviePlayerController 时遇到问题。它在 ios 5 中不起作用，只是显示一个黑屏。甚至没有抛出任何异常或任何错误。这是我的代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"cavity" ofType:@"mov"];
NSLog(@"%@",path);
_movieController = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:path]];
[_movieController prepareToPlay];
[_movieController setFullscreen:NO];
[_movieController.view setFrame:CGRectMake(10, 25, 287, 213)];
[_movieController setControlStyle:MPMovieControlStyleEmbedded];

[_movieView addSubview:_movieController.view];
[_movieController play]; 
```

_movieController 对象已在 .h 文件中声明，但仍未处于工作状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:27:02.290

尝试这个

```
 MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:url]];

[[mp moviePlayer] prepareToPlay];
[[mp moviePlayer] setUseApplicationAudioSession:NO];
[[mp moviePlayer] setShouldAutoplay:YES];
[[mp moviePlayer] setControlStyle:2];
[[mp moviePlayer] setRepeatMode:MPMovieRepeatModeOne];
[self presentMoviePlayerViewControllerAnimated:mp]; 
```

# linux - 如何创建虚拟流量进行测试？

> ID：11224051
> 
> 赞同：2
> 
> 时间：2012-06-27T10:22:39.523
> 
> 标签：linux, load, ip, packet, traffic

我需要在 linux 机器上创建一些流量负载，以便测试一些不同的数据包转发方案。有什么简单的方法来获得一些虚拟流量吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:39:46.077

使用第二台主机，您可以`nc`用来模拟服务器/客户端传输，例如将文件从 bash for 循环发送到另一台主机。有关示例，请参见手册页。

# java - 如何配置 Arbortext Editor (Epic) Java 插件？

> ID：11224052
> 
> 赞同：0
> 
> 时间：2012-06-27T10:22:40.950
> 
> 标签：java, plugins, intellij-idea, profiler

我使用 IntelliJ IDEA。我需要为 Arbortext Editor (Epic) 配置插件。它会启动我的插件，该插件由一组 *.class 文件组成。Arbortext Editor 具有内部 JRE 1.42 文件夹。我可以使用`set javadebugport=3500;`特殊 acl 脚本文件中的命令来调试插件。该插件不能直接在 IDEA 中运行。而不是它，我启动 epic.exe 并在 IDE 中选择 Debug。IDE 了解`javadebugport`价值。
这是 acl 内容（第二个字符串属于 YourKit Java Profiler 设置）：

```
 set javadebugport=3500;
 set javavmargs= -agentpath:"D:\\YourKit\\bin\\win32\\yjpagent.dll"
 java_console(); 
```

`set javavmargs= vmargs` 解释：

> 加载 JVM 时，此选项的值将作为命令行参数传递给 Java 虚拟机 (JVM)。此选项不能指定类路径。使用 set javaclasspath 选项设置类路径。

但是YourKit中的分析不起作用。Anvir任务管理器显示yjpagent.dll没有加载。 `javavmargs`由 Arbortext Editor 转换为相应的 Java 参数。是否可以在 IDEA 内或不使用以下分析器之一分析此插件：YourKit Java Profiler、JProfiler、visualvm_134？

# javascript - element.html() 在 DOM 准备好时返回空

> ID：11224059
> 
> 赞同：0
> 
> 时间：2012-06-27T10:23:10.483
> 
> 标签：javascript, jquery, variables, countdown

我正在使用[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)开发倒数计时器。

我的代码看起来像这样，

```
$('.clock').countdown({until:new Date(2012, 11, 31), format: 'odHMS', onTick:watchCountdown, tickInterval:5, layout:
    '<div id="timer">' +
        '<div id="timer_labels">'+
            '<div id="timer_months_label" class="timer_labels">Months</div>'+
            '<div id="timer_weeks_label" class="timer_labels">Days</div>'+
            '<div id="timer_days_label" class="timer_labels">Hours</div>'+
            '<div id="timer_minutes_label" class="timer_labels">Minutes</div>'+
        '</div>'+
        '<div id="timer_months" class="timer_numbers"><span class="divide"></span><span>{onn}</span></div>'+
        '<div id="timer_days" class="timer_numbers"><span class="divide"></span><span>{dnn}</span></div>'+
        '<div id="timer_hours" class="timer_numbers"><span class="divide"></span><span>{hnn}</span></div>'+
        '<div id="timer_minutes" class="timer_numbers"><span class="divide"></span><span>{mnn}</span></div>'+
    '</div>'
}); 
```

当你 onTick 我调用一个看起来像这样的函数，

```
function watchCountdown(periods) { 
var $div = $("#monitor");
var html = $div.html();
var checking = setInterval(function() {
    var newhtml = $div.html();
    if (html !== newhtml) {
        myCallback($div);
    }
},100);
$('#monitor').html('<div id="timer_minutes" class="timer_numbers"><span class="divide"></span><span class="minutes">' + periods[5] + '</span></div>'); 
```

}

在上面的函数中，检查了 html != newhtml 然而，尽管 #monitor 元素中有 HTML，但 html 却作为空变量 night 返回。我怎样才能让它意识到有要检查的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:27:52.137

您不了解什么是 DOM 就绪，它只触发一次，当 DOM 完全加载并从服务器呈现时。

如果您使用 javascript 更改 DOM，它对 DOM 就绪事件没有影响。

```
$('#monitor').html('<div id="timer_minutes" class="timer_numbers"><span class="divide"></span><span class="minutes">' + periods[5] + '</span></div>'); 
```

上面的代码不会导致延迟或再次触发 DOM 就绪事件。

# java - 使用共享项目库在共享进程上运行多个应用程序

> ID：11224064
> 
> 赞同：0
> 
> 时间：2012-06-27T10:23:33.720
> 
> 标签：java, android, shared-libraries, shared

我有一组在同一进程中运行的应用程序。这些进程有一个共享库，即[ActionBarSherlock](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEQQFjAA&url=http://actionbarsherlock.com/&ei=zdrqT8K0Acnc4QTAq7T4Ag&usg=AFQjCNEKyOYK1H-iAiI67o4J8dIPJNL9TA&sig2=IqPFGIGEmlfSZAquyxjTQQ)，因此它们在不同版本的 Android 中具有相同的 UI。我第一次访问 ActionBarSherlock 库的元素时一切正常。但是，当我从同一个 Android 进程上的不同应用程序访问相同的元素时，我收到如下错误：

```
E/AndroidRuntime(  797): java.lang.RuntimeException: Unable to start activity \
    ComponentInfo{xper.tristram/xper.tristram.XperTristramActivity}: \
    java.lang.ClassCastException: xper.common.CommonView cannot be cast to xper.common.CommonView
E/AndroidRuntime(  797):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
E/AndroidRuntime(  797):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
E/AndroidRuntime(  797):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
E/AndroidRuntime(  797):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
E/AndroidRuntime(  797):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  797):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  797):    at android.app.ActivityThread.main(ActivityThread.java:4340)
E/AndroidRuntime(  797):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  797):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  797):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(  797):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(  797):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  797): Caused by: java.lang.ClassCastException: \
    xper.common.CommonView cannot be cast to xper.common.CommonView
E/AndroidRuntime(  797):    at xper.tristram.XperTristramActivity.onCreate(XperTristramActivity.java:29)
E/AndroidRuntime(  797):    at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime(  797):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime(  797):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
E/AndroidRuntime(  797):    ... 11 more 
```

[上面的块代码是从这个站点](http://justanapplication.wordpress.com/2011/12/18/two-android-applications-a-shared-ui-element-and-a-shared-process-a-tale-of-classloaders-and-confusion/)复制粘贴的。我的一位同事发现了这个站点，该站点描述了问题的根源，即每个应用程序的两个类加载器有两个不同的共享库加载类实例。该站点的作者提供了一种解决方法，即使用 LayoutInflater.setFactory() 方法覆盖 LayoutInflater 创建的共享视图。我的问题是，如果有任何其他解决方案不需要覆盖 Android 库的核心方法，我认为这可能容易出错且效率不高。

提前致谢：）

# css - 如何使用 CSS 将 div 放置在页面的顶部中心位置？

> ID：11224069
> 
> 赞同：2
> 
> 时间：2012-06-27T10:23:49.710
> 
> 标签：css

我无法将 div 放在页面的顶部中心。我为此使用 CSS，但这里没有任何效果。

```
#loader {
  position: relative;
  margin: 0 auto;
  text-align: left;
  clear: left;
  height: auto;
  z-index: 0;
}
```

```
<body>
  <div id="loader" style='display: none'><img src='img/basic/loader4.gif' /></div>
</body>
```

我已经为此花费了 2 个小时，但仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:32:07.460

首先`display:none;`使用 id=loader 从您的 div 中删除并添加`text-align:center;`到它

```
#loader{  
    position:relative;
    margin:0 auto;
    clear:left;
    height:auto;
    z-index: 0;
    text-align:center;/* Add This*/
}​ 
```

**工作演示：http:** [//jsfiddle.net/surendraVsingh/FCEhD/](http://jsfiddle.net/surendraVsingh/FCEhD/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:25:51.253

您需要为 div 指定一个特定的宽度，否则它将使用所有可用的宽度，并且边距无效。例子：

```
#loader{  
  margin: 0 auto;
  width: 200px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T10:26:36.440

`width`如果你想使用，你必须指定属性`margin: 0 auto;`。

如果您不知道宽度，只需添加`display: table`属性即可。

```
#out {
   display: table;
   margin: 0 auto;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-29T08:43:37.757

在上面的例子中，每个人都假设他想要“全宽”。

这适用于绝对全宽/高度父容器，但会自动将宽度限制为仅内容宽度

父容器

```
display: block; 
position: absolute;
clear: both;
width: 100%;
height: 100%;
border: solid thin red; 
```

子容器

```
display: block;
position: absolute;
top:0;
transform: translateX(50%);
padding-left:.5em;
padding-right:.5em;
margin-left:auto;
margin-right:auto;
right:50%; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T10:25:58.640

```
#loader{  
   margin: 0px auto;
   width: 100px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T10:27:10.107

`<div id="loader" style='display: none' align="center">`

按 ctrl+space 不确定语法，在 css 中边距和填充必须设置为 0

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T10:31:33.100

```
#loader
{
    position: absolute;
    width: xxpx;
    height: xxpx;
    margin:0px auto ;

} 
```

或者你可以使用

```
margin-left:xx;  and `margin-top:0px;` 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-29T10:14:58.240

```
#loader {
    display: none;
    clear: both;
    margin: 0px auto;
    width: [a number] px;
} 
```

当然你也应该注意浏览器缓存。清除浏览器缓存并再次测试

# php - Drupal 6：如何显示一个节点？

> ID：11224070
> 
> 赞同：2
> 
> 时间：2012-06-27T10:23:51.640
> 
> 标签：php, drupal-6, content-type, drupal-hooks

我目前正在为 Drupal 6 开发一个模块，其中我创建了一个自定义内容类型。

我可以通过使用来创建/更新/删除此内容类型的节点`hook_form`，`hook_insert`依此类推。

现在我想要的是在我的内容列表（选项卡“视图”）中单击节点时显示节点。我不明白该怎么做。目前 Drupal 只为标题显示双破折号，为正文显示另一个破折号。

我尝试使用`hook_view`and `hook_nodeapi`with `$op == 'view'`，但似乎都不起作用。

我认为它一定是一个非常基本的东西，但我是一个 Drupal 菜鸟，还有很多我不明白的地方。

任何提示都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:41:21.147

默认情况下，查看自定义内容节点的标题和正文应该“正常工作”，就像它是任何其他节点一样。假设您的节点被正确插入和更新，那么其他东西正在破坏视图中的内容。您的模板可能有问题？（双破折号让我想起 HTML 注释。）

如果您必须修改节点以显示自定义字段，那么`hook_view()`就是正确的地方。请务必`node_prepare()`在进行修改之前致电：

```
/**
 * Implementation of hook_view().
 */
function MODULE_view($node, $teaser = FALSE, $page = FALSE) {
  $node = node_prepare($node, $teaser);
  return $node;
} 
```

# c# - 在页面加载时加载多个 DropDown 更快

> ID：11224071
> 
> 赞同：0
> 
> 时间：2012-06-27T10:23:52.923
> 
> 标签：c#, asp.net, .net, ajax, asp.net-4.0

我在 Web 窗体上有几个 DropDown 控件，这些控件使用 AJAX 调用类中的方法填充。

我调用方法如下：

1.  填充区（）；
2.  填充村（）；
3.  填充镇（）；

我认为这些独立调用创建了太多到服务器的往返行程，因此我更改了类以一次填充所有 DropDowns。

我将所有 DropDowns 的名称作为数组传递给一个类，该类具有在循环中填充这些 DropDowns 的方法。

我想知道它是否会对页面加载产生一些影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:41:09.460

使用 Page.Cache 存储结果，如果该缓存不存在加载项目，并将它们保存到缓存中，并且可能再次查询相同的结果，检查它是否已经在缓存中，如果是从加载它缓存

# ruby - 无法在 OSX 上安装 jekyll

> ID：11224079
> 
> 赞同：1
> 
> 时间：2012-06-27T10:24:28.397
> 
> 标签：ruby, macos, gem, jekyll

我正在按照[本指南](https://github.com/mojombo/jekyll/wiki/install)在 OSX 10.7.3 上安装 jekyll 并提出了问题

`ERROR: could not find gem jekyll locally or in a repository`

我努力了：

1.  `sudo gem update --system`（并得到`Nothing to update`）
2.  这篇文章：[如何在 Ubuntu 10.04 服务器上安装 Jekyll？](https://stackoverflow.com/questions/3450053/how-can-i-install-jekyll-on-ubuntu-10-04-server)，而且没用。

我不熟悉红宝石和宝石，但我认为这是必要的：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.6
  - RUBY VERSION: 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]
  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/1.8
  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-darwin-11
  - GEM PATHS:
     - /Library/Ruby/Gems/1.8
     - /Users/enzo/.gem/ruby/1.8
     - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - :sources => ["http://rubygems.org", "http://gems.github.com"]
  - REMOTE SOURCES:
     - http://rubygems.org
     - http://gems.github.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:19:40.530

我对 Jekyll 一无所知，但在系统 Ruby（即 Mac OS 附带的系统）上运行它时可能会出现问题。

在浪费太多时间在系统 Ruby 上（可以说最好保持不变）之前，尝试让[rbenv](https://github.com/sstephenson/rbenv/)或[rvm](https://rvm.io/)工作。它们允许您安装任意数量的不同版本的 Ruby，而不会弄乱系统 Ruby，每个安装都有自己的 gem。

由于您不熟悉 Ruby，我将补充说，使用 rbenv 或 rvm 是大多数 Ruby 孩子完成工作的方式。是的，这是一个额外的步骤，但它确实促进了更流畅的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T19:44:53.107

我将 Jekyll 直接安装到全新安装的 OSX Mavericks 中，然后写了一篇简短的文章，以便下次重新安装系统后我会记得如何操作。我有很多反馈表明其他人按照我的指南取得了成功，并且没有任何人有任何问题的报告：

[http://internet-inspired.com/wrote/install-jekyll-in-osx-mavericks/](http://internet-inspired.com/wrote/install-jekyll-in-osx-mavericks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:45:53.020

除非你真的需要它，否则我建议从你的 gem 源中删除 gems.github.com。GitHub 早在 2010 年就停止从 git 存储库构建 gem。如果您无法删除它，那么我建议使用以下命令安装 jekyll：

```
gem install --source http://rubygems.org jekyll 
```

我的 ruby​​gems 环境供参考，因为我在 OS X 10.7.5 上。

```
 RubyGems Environment:
    - RUBYGEMS VERSION: 1.3.6
    - RUBY VERSION: 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0]
    - INSTALLATION DIRECTORY: /Library/Ruby/Gems/1.8
    - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    - EXECUTABLE DIRECTORY: /usr/bin
    - RUBYGEMS PLATFORMS:
        - ruby
        - universal-darwin-11
    - GEM PATHS:
        - /Library/Ruby/Gems/1.8
        - /Users/matt/.gem/ruby/1.8
        - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8
    - GEM CONFIGURATION:
        - :update_sources => true
        - :verbose => true
        - :benchmark => false
        - :backtrace => false
        - :bulk_threshold => 1000
    - REMOTE SOURCES:
        - http://rubygems.org/ 
```

# iphone - 无法从 PopOverController 中的 TableView 加载 WebView - Objective C

> ID：11224080
> 
> 赞同：0
> 
> 时间：2012-06-27T10:24:31.807
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个应用程序。在此单击`Upload`按钮时，a会`UITableView`出现在 a`UIPopOverController`中，其中包含一些条目。单击任何这些条目时，应在`UIWebView`我`UIDetailView`的`SplitView`应用程序的 w 中打开相应的站点。

我正在使用以下代码行::

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
hUrl = [kk objectAtIndex:indexPath.row];
hUrl = [Url stringByReplacingOccurrencesOfString:@" " withString:@"_"];

NSString *hisPage= [[NSUserDefaults standardUserDefaults] stringForKey:@"url_preference"];

Page = [hisPage stringByAppendingString:@"/index.php/"];

Page = [hisPage stringByAppendingString:hUrl];

NSURL *Url = [NSURL URLWithString:Page];
NSLog(@"%@", Url);
NSURLRequest *request = [NSURLRequest requestWithURL:Url];

self.detailViewController.webView.scalesPageToFit = YES;

[self.detailViewController.webView loadRequest:request];

} 
```

出现`UITableView`在`UIPopoverController`. 但是，我无法加载相应的网页。有人可以帮我解决这个问题吗？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:25:36.040

根据您对我的评论的回答，在这种情况下要遵循的正确程序如下：

1.  为您的 popOverController 即时实现委托方法协议。
2.  在 didSelectRowAtIndexPath 中，将委托方法调用回父视图控制器（上传按钮所在的位置）。并将 Url 字符串作为参数传回。
3.  从父视图控制器中，关闭弹出框并使用传回的 Url 准备您的 detailViewController，然后将其推送到显示堆栈上。

可以在此[SO](https://stackoverflow.com/questions/8606674/uimodaltransitionstylepartialcurl-doesnt-get-back-to-previous-state-not-dismi/8607949#8607949)中找到委托方法的示例。

# c# - 大于在 CAML 查询中不起作用

> ID：11224087
> 
> 赞同：-2
> 
> 时间：2012-06-27T10:24:52.093
> 
> 标签：c#, sharepoint

我想检索用户处于活动状态的记录 n 最后修改日期大于 lastrun 日期，我编写了以下 CAML 但似乎不起作用。任何帮助深表感谢。

```
camlQuery.ViewXml
    = "<View><Query><Where><And><Eq><FieldRef Name='Active'/>"
    + "<Value Type='Boolean'> " + 1 + "</Value></Eq><Gt>"
    + "<FieldRef Name='_DCDateModified'/><Value Type='DateTime'>"
    + lastUpdate + "</Value></Gt></And></Where></Query></View>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:39:12.017

我想这可能是日期格式问题。您可以尝试：1）明确排除 DateTime 的时间部分 2）提前转换您的 Date

像这样：

```
...<Value IncludeTimeValue='False' Type='DateTime'>" + SPUtility.CreateISO8601DateTimeFromSystemDateTime(lastUpdate) +"</Value> 
```

# c# - 数据从数据库中截断

> ID：11224089
> 
> 赞同：0
> 
> 时间：2012-06-27T10:25:04.287
> 
> 标签：c#, visual-studio-2010, sql-server-2008-r2

我正在使用 VS2010 和 SqlServer2008-r2 在 C# 中设计一个基于窗口的应用程序。我是

使用基于服务的数据库（.mdf），其中有一个包含四个字段的表，如果我存储

表中的数据并关闭应用程序并重新运行应用程序数据丢失。

为什么会这样以及如何摆脱它。

我正在使用以下例程进行保存

```
private void Save(object sender, EventArgs e)
        {
            Program.connection.Close();

            bool k = srchpreventry();

            try
            {
                if (k)
                {

                 string query = " update orderform set Enrolment_Expected = " + textBox2.Text + ", Stock_on_Hand=" + textBox3.Text + ", Number_Required = "+ textBox4.Text + " where Name = '" + textBox1.Text + "';";
               SqlCommand cmd = new SqlCommand(query, Program.connection);

                cmd.ExecuteNonQuery();

                Program.connection.Close();
            }

            else
            {
               // Program.connection.Open();

                string query = "insert into orderform(Name,Enrolment_Expected,Stock_on_Hand,Number_Required) values('" + textBox1.Text + "', '" + textBox2.Text + "', ' " + textBox3.Text + "',' " + textBox4.Text + "')";

                SqlCommand cmd = new SqlCommand(query, Program.connection);

                cmd.ExecuteNonQuery();

                Program.connection.Close();
            }

        }

        catch (Exception ae)
        {
            string str = ae.ToString();
            MessageBox.Show(str);
        }

        finally
        {
            textBox1.Text = "";
            textBox2.Text = "";
            textBox3.Text = "";
            textBox4.Text = "";
            textBox1.Enabled = false;
            textBox2.Enabled = false;
            textBox3.Enabled = false;
            textBox4.Enabled = false;
            Program.connection.Close();
        }

    }    

public bool srchpreventry()
        {

            Program.connection.Open();

            string query = " Select name from orderform where Name = '" + textBox1.Text + "';";

            SqlCommand cmd = new SqlCommand(query, Program.connection);

            SqlDataReader dtr = cmd.ExecuteReader();

            if (dtr.Read() == true)
            {
                dtr.Close();
                return true;
            }
            else
            {
                dtr.Close();
                return false;
            }
        }

private void textBox1_TextChanged(object sender, EventArgs e)
        {
            Program.connection.Close();
            Program.connection.Open();

            string query = " Select * from orderform where Name = '"  + textBox1.Text + "';";

            SqlCommand cmd = new SqlCommand(query, Program.connection);

            SqlDataReader dtr = cmd.ExecuteReader();

            if (dtr.Read() == true)
            {
                textBox2.Text = dtr[1].ToString();
                textBox3.Text = dtr[2].ToString();//GetString(2);
               textBox4.Text = dtr[3].ToString();
            }

            else
            {
                textBox2.Text = "";
                textBox3.Text = "";
                textBox4.Text = "";

            }

        }

public static  SqlConnection connection = null;
       static string appath = Library_Records.Program.app_path;

string connectionstring = string.Format(@"Data Source=.\SQLEXPRESS;AttachDbFilename={0};Integrated Security=True;User Instance=True", appath);

static string dbfiles = null;
        internal static string app_path
        {
            get { return dbfiles = "|Datadirectory|\\records.mdf"; }
        }

/*******************datagrid code********************/
Program.connection.Open();
                    string query = "select * from orderform";
                    SqlDataAdapter MyDA = new SqlDataAdapter();
                    MyDA.SelectCommand = new SqlCommand(query, Program.connection);
                    DataTable table = new DataTable();
                    MyDA.Fill(table);

                    BindingSource bSource = new BindingSource();
                    bSource.DataSource = table;

                    dataGridView1.DataSource = bSource; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:29:47.283

检查您是否可以增加列中允许的字符，例如 nvarchar(max) 因为现在它可能是 nvarchar(200) - 这只是一个示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:45:09.450

在 Visual Studio 中？

您不是每次开始调试时都让 VIsual Studio 再次加载相同的空数据库吗？

> 并关闭应用程序并重新运行应用程序数据丢失。

要么有人忽略插入时抛出的错误，要么不提交事务，要么 tvisal studio 每次启动时都将相同的 rdatabase 模板占用到目录中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-27T10:47:29.030

我强烈（强调*强烈*）建议您开始使用存储过程（在代码中或在数据库中），但除此之外..您不启动事务或类似的东西？或将 Program.Connection 类代码发布到问题中。

# c# - Is it possible to use [Required] attribute in model, but not in controller

> ID：11224090
> 
> 赞同：0
> 
> 时间：2012-06-27T10:25:10.543
> 
> 标签：c#, asp.net, asp.net-mvc

Is it possible to use [Required] attribute in model, but not in controller.

For example I want to use object in which I will set several parameters, and for the class of this object I want to set attribute [Required].

Is it possible to use logic like ModelState.IsValid or something like it.

Here is an example of code: EmployeeModel employee = this.ToObject(employeeXml);

Employee model has property Name. This property is required. How to verify it?

Regards, Sergey.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:40:13.663

You can use `TryUpdateModel` method which update ModelState according to model validation rules:

```
public BranchWizardStep GetNextStep(FormCollection formCollection)
{
    TryUpdateModel(_someModel);

    if (ModelState.IsValid) 
    {
        //...
    }
} 
```

**EDIT**: But better to use `TryValidateModel` method which validates model only.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:33:34.067

add this in your model `using System.ComponentModel.DataAnnotations;`

and then above yr property add

```
[Required(ErrorMessage = "This is required")]
[StringLength(100)] 
```

if you also want a display name then add `using System.ComponentModel;`

and add this above yr property

```
[DisplayName("Login name")] 
```

# android - Android TabHost Divider 在 4.0.3 中不起作用

> ID：11224091
> 
> 赞同：0
> 
> 时间：2012-06-27T10:25:10.863
> 
> 标签：android, android-tabhost

这是我用来设置选项卡主机中选项卡之间分隔符的代码。

```
mTabHost.getTabWidget().setDividerDrawable(R.drawable.tabdivider); 
```

但它没有出现在模拟器中。在 SO 上搜索让我找到了很多关于此的帖子，但我还没有找到完美的解决方案。

在这方面的任何帮助/建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:34:00.980

TabHost在 android api level 11 及以后被**弃用。**

尝试使用[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)。

有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/10297293/andorid-how-can-i-replace-the-deprecated-tabhost)。

**更新**：

请看[这个](https://stackoverflow.com/questions/9523083/tab-dividers-not-showing-in-ics)，用于`setDrawable`在`ICS`.

**更新：** 如果要在所有 android 版本上使用选项卡，可以使用以下代码：

```
if (android.os.Build.VERSION.SDK_INT >= 11) {

// setup action bar for tabs
    ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(false);

    Tab tab = actionBar.newTab()
            .setText(R.string.artist)
            .setTabListener(new TabListener<ArtistFragment>(
                    this, "artist", ArtistFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
        .setText(R.string.album)
        .setTabListener(new TabListener<AlbumFragment>(
                this, "album", AlbumFragment.class));
    actionBar.addTab(tab);
} else {

// put your TabHost code here...

} 
```

这应该放在你的`onCreate()`方法中。

# c++ - 无法创建 C++ Ruby 扩展

> ID：11224096
> 
> 赞同：6
> 
> 时间：2012-06-27T10:25:33.390
> 
> 标签：c++, ruby, macos, boost, ruby-c-extension

我在创建 ruby​​ 扩展以导出我在 OSX 下写入 ruby​​ 的 C++ 库时遇到问题。这个简单的例子：

```
#include <boost/regex.hpp>

extern "C" void Init_bayeux()
{
    boost::regex expression("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");
} 
```

导致抛出 bad_cast 异常：

```
#0  0x00000001014663bd in __cxa_throw ()
#1  0x00000001014cf6b2 in __cxa_bad_cast ()
#2  0x00000001014986f9 in std::use_facet<std::collate<char> > ()
#3  0x0000000101135a4f in boost::re_detail::cpp_regex_traits_base<char>::imbue (this=0x7fff5fbfe4d0, l=@0x7fff5fbfe520) at cpp_regex_traits.hpp:218
#4  0x0000000101138d42 in cpp_regex_traits_base (this=0x7fff5fbfe4d0, l=@0x7fff5fbfe520) at cpp_regex_traits.hpp:173
#5  0x000000010113eda6 in boost::re_detail::create_cpp_regex_traits<char> (l=@0x7fff5fbfe520) at cpp_regex_traits.hpp:859
#6  0x0000000101149bee in cpp_regex_traits (this=0x101600200) at cpp_regex_traits.hpp:880
#7  0x0000000101142758 in regex_traits (this=0x101600200) at regex_traits.hpp:75
#8  0x000000010113d68c in regex_traits_wrapper (this=0x101600200) at regex_traits.hpp:169
#9  0x000000010113bae1 in regex_data (this=0x101600060) at basic_regex.hpp:166
#10 0x000000010113981e in basic_regex_implementation (this=0x101600060) at basic_regex.hpp:202
#11 0x0000000101136e1a in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign (this=0x7fff5fbfe710, p1=0x100540ae0 "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?", p2=0x100540b19 "", f=0) at basic_regex.hpp:652
#12 0x0000000100540a66 in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign (this=0x7fff5fbfe710, p1=0x100540ae0 "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?", p2=0x100540b19 "", f=0) at basic_regex.hpp:379
#13 0x0000000100540a13 in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign (this=0x7fff5fbfe710, p=0x100540ae0 "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?", f=0) at basic_regex.hpp:364
#14 0x000000010054096e in basic_regex (this=0x7fff5fbfe710, p=0x100540ae0 "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?", f=0) at basic_regex.hpp:333
#15 0x00000001005407e2 in Init_bayeux () at bayeux.cpp:10
#16 0x0000000100004593 in dln_load (file=0x1008bc000 "/Users/todi/sioux/lib/debug/rack/bayeux.bundle") at dln.c:1293 
```

我编译扩展：

```
g++ ./source/rack/bayeux.cpp -o /Users/todi/sioux/obj/debug/rack/bayeux.o -Wall -pedantic -Wno-parentheses -Wno-sign-compare -fno-common -c -pipe -I/Users/todi/sioux/source -ggdb -O0 
```

最后将动态库与：

```
g++ -o /Users/todi/sioux/lib/debug/rack/bayeux.bundle -bundle -ggdb  /Users/todi/sioux/obj/debug/rack/bayeux.o -L/Users/todi/sioux/lib/debug -lrack -lboost_regex-mt-d -lruby 
```

我在网上搜索并尝试了各种链接和编译器开关。如果我构建一个可执行文件就没有这样的问题。有没有其他人遇到过这样的问题并找到了解决方案？

我对此进行了进一步调查，发现导致异常的函数如下所示：

```
std::locale loc = std::locale("C");
std::use_facet< std::collate<char> >( loc ); 
```

在 std::collat​​e<> 的源代码中，我找到了 throw 语句：

```
use_facet(const locale& __loc)
{
  const size_t __i = _Facet::id._M_id();
  const locale::facet** __facets = __loc._M_impl->_M_facets;
  if (__i >= __loc._M_impl->_M_facets_size || !__facets[__i])
    __throw_bad_cast();
#ifdef __GXX_RTTI
      return dynamic_cast<const _Facet&>(*__facets[__i]);
#else
      return static_cast<const _Facet&>(*__facets[__i]);
#endif
} 
```

这对你有意义吗？

更新：我试过 Jan 的建议：

```
Todis-MacBook-Pro:rack todi$ g++ -shared -fpic -o bayeux.bundle bayeux.cpp
Todis-MacBook-Pro:rack todi$ ruby -I. -rbayeux -e 'puts :ok'
terminate called after throwing an instance of 'std::bad_cast'
  what():  std::bad_cast
Abort trap 
```

版本：

```
Todis-MacBook-Pro:rack todi$ ruby -v
ruby 1.9.2p136 (2010-12-25 revision 30365) [x86_64-darwin10.6.0]
Todis-MacBook-Pro:rack todi$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/opt/local/libexec/gcc/x86_64-apple-darwin10/4.5.2/lto-wrapper
Target: x86_64-apple-darwin10
Configured with: ../gcc-4.5.2/configure --prefix=/opt/local --build=x86_64-apple-darwin10 --enable-languages=c,c++,objc,obj-c++,fortran,java --libdir=/opt/local/lib/gcc45 --includedir=/opt/local/include/gcc45 --infodir=/opt/local/share/info --mandir=/opt/local/share/man --datarootdir=/opt/local/share/gcc-4.5 --with-local-prefix=/opt/local --with-system-zlib --disable-nls --program-suffix=-mp-4.5 --with-gxx-include-dir=/opt/local/include/gcc45/c++/ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt/local --enable-stage1-checking --disable-multilib --enable-fully-dynamic-string
Thread model: posix
gcc version 4.5.2 (GCC) 
```

更新：

抛出的不是 use_facet() 中的边界检查，而是下一行，它实际上进行了动态转换。这个例子可以归结为 RTTI 的一些东西：

```
#define private public
#include <locale>
#include <iostream>
#include <typeinfo>

extern "C" void Init_bayeux()
{
    std::locale loc = std::locale("C");
    printf( "size: %i\n", loc._M_impl->_M_facets_size );
    printf( "id: %i\n", std::collate< char >::id._M_id() );

    const std::locale::facet& fac = *loc._M_impl->_M_facets[ std::collate< char >::id._M_id() ];

    printf( "name: %s\n", typeid( fac ).name());
    printf( "name: %s\n", typeid( std::collate<char> ).name());

    const std::type_info& a = typeid( fac );
    const std::type_info& b = typeid( std::collate<char> );

    printf( "equal: %i\n", !a.before( b ) && !b.before( a ) );
    dynamic_cast< const std::collate< char >& >( fac );
} 
```

我使用了 printf() 因为 cout 的使用也失败了。上面代码的输出是：

```
size: 28
id: 5
name: St7collateIcE
name: St7collateIcE
equal: 1
terminate called after throwing an instance of 'std::bad_cast'
  what():  std::bad_cast
Abort trap 
```

构建：

```
g++ -shared -fpic -o bayeux.bundle bayeux.cpp && ruby -I. -rbayeux -e 'puts :ok' 
```

更新：

如果我将 Init_bayeux 重命名为 main() 并将其链接到可执行文件，则输出是相同的，但没有调用终止。

更新：

当我编写一个小程序来加载共享库并执行 Init_bayeux() 时，再次没有抛出异常：

```
#include <dlfcn.h>

int main()
{
    void* handle = dlopen("bayeux.bundle", RTLD_LAZY|RTLD_GLOBAL );
    void(*f)(void) = (void(*)(void)) dlsym( handle, "Init_bayeux" ) ;
    f();
} 
```

所以在我看来，ruby.exe 的构建方式可能存在问题。那有意义吗？

更新：我查看了包含两个 type_info 对象名称的地址。内容相同，但地址不同。我将 -flat_namespace 开关添加到链接命令中。现在 dynamic_cast 工作。boost regex 库的原始问题仍然存在，但我认为这可以通过将 boost 静态链接到共享库或使用 -flat_namespace 开关重建 boost 库来解决。

更新：现在我回到第一个带有 boost 正则表达式的示例，使用以下命令构建：

```
g++ -shared -flat_namespace -fPIC -o bayeux.bundle /Users/todi/boost_1_49_0/stage/lib/libboost_regex.a bayeux.cpp 
```

但是当将扩展加载到 ruby​​ 解释器中时，静态符号的初始化失败：

```
ruby(59384,0x7fff712b8cc0) malloc: *** error for object 0x7fff70b19500: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug

Program received signal SIGABRT, Aborted.
0x00007fff8a6ab0b6 in __kill ()
(gdb) bt
#0  0x00007fff8a6ab0b6 in __kill ()
#1  0x00007fff8a74b9f6 in abort ()
#2  0x00007fff8a663195 in free ()
#3  0x0000000100541023 in boost::re_detail::cpp_regex_traits_char_layer<char>::init (this=0x10060be50) at basic_string.h:237
#4  0x0000000100543904 in boost::object_cache<boost::re_detail::cpp_regex_traits_base<char>, boost::re_detail::cpp_regex_traits_implementation<char> >::do_get (k=@0x7fff5fbfddd0) at cpp_regex_traits.hpp:366
#5  0x000000010056005b in create_cpp_regex_traits<char> (l=<value temporarily unavailable, due to optimizations>) at pending/object_cache.hpp:69
#6  0x0000000100544c33 in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign (this=0x7fff5fbfe090, p1=0x100567158 "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?", p2=0x100567191 "", f=0) at cpp_regex_traits.hpp:880
#7  0x0000000100566280 in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign ()
#8  0x000000010056622d in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign ()
#9  0x0000000100566188 in boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::basic_regex ()
#10 0x0000000100566025 in Init_bayeux ()
#11 0x0000000100003a23 in dln_load (file=0x10201a000 "/Users/todi/sioux/source/rack/bayeux.bundle") at dln.c:1293
#12 0x000000010016569d in vm_pop_frame [inlined] () at /Users/todi/.rvm/src/ruby-1.9.2-p320/vm_insnhelper.c:1465
#13 0x000000010016569d in rb_vm_call_cfunc (recv=4303980440, func=0x100042520 <load_ext>, arg=4303803000, blockptr=0x1, filename=<value temporarily unavailable, due to optimizations>, filepath=<value temporarily unavailable, due to optimizations>) at vm.c:1467
#14 0x0000000100043382 in rb_require_safe (fname=4303904640, safe=0) at load.c:602
#15 0x000000010017cbf3 in vm_call_cfunc [inlined] () at /Users/todi/.rvm/src/ruby-1.9.2-p320/vm_insnhelper.c:402
#16 0x000000010017cbf3 in vm_call_method (th=0x1003016b0, cfp=0x1004ffef8, num=1, blockptr=0x1, flag=8, id=<value temporarily unavailable, due to optimizations>, me=0x10182cfa0, recv=4303980440) at vm_insnhelper.c:528
... 
```

同样，当我从上面的小 c 程序加载共享库时，这不会失败。

更新：现在我链接第一个示例静态：

```
g++ -shared -fPIC -flat_namespace -nodefaultlibs -o bayeux.bundle -static -lstdc++ -lpthread -lgcc_eh -lboost_regex-mt bayeux.cpp 
```

有同样的错误：

```
ruby(15197,0x7fff708aecc0) malloc: *** error for object 0x7fff7027e500: pointer being freed was not allocated 
```

otool -L 确认每个库都是静态链接的：

```
bayeux.bundle:
bayeux.bundle (compatibility version 0.0.0, current version 0.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

调试：

如果我链接到 boost 调试版本，那么它会像预期的那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:17:54.933

作为记录：我现在使用相同的编译器（版本 4.2.1 [苹果官方版本]）构建了 boost 和我的应用程序。到目前为止没有问题。为什么当 ruby​​ 扩展静态链接所有库时它不能按预期工作对我来说是一个奇迹。感谢所有花时间在这个问题上的人。

亲切的问候托斯滕

# ruby - (!obj.nil?) 链的 Ruby 语法糖

> ID：11224106
> 
> 赞同：0
> 
> 时间：2012-06-27T10:26:08.677
> 
> 标签：ruby, groovy, null, syntactic-sugar, null-pointer

> **可能重复：**
> [是否有一种干净的方法可以避免在嵌套的参数哈希中调用 nil 上的方法？](https://stackoverflow.com/questions/5429790/is-there-a-clean-way-to-avoid-calling-a-method-on-nil-in-a-nested-params-hash)
> [ruby 中 groovy 的链式属性是否有等效的 null 预防措施？](https://stackoverflow.com/questions/8805582/is-there-an-equivalent-null-prevention-on-chained-attributes-of-groovy-in-ruby)

在 Ruby 中是否有任何语法糖可以帮助避免“nil:NilClass 的未定义方法‘xx’”而不写这个？

```
if !something.nil? && !something.very.nil? && !something.very.long.nil? && !something.very.long.to.nil? then
   if something.very.long.to.write != 0 then
    ...
   end
end 
```

在 Groovy 中我会这样做

```
if(something?.very?.loong?.to?.write != 0) 
```

Ruby 是否有等效的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:31:58.793

这是一个重复的问题，但我暂时找不到。我的方法是：

```
if a = something and a = a.very and a = a.long and a = a.to
  if a = a.write
    ...
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:34:05.060

```
class Object
  def try(*a, &b)
    if a.empty? && block_given?
      yield self
    else
      __send__(*a, &b)
    end
  end
end

class NillClass
  def try(*args)
    nil
  end
end 
```

那么在你的情况下

```
if result = something.try(:very).try(:long).try(:to).try(:write)
  if result != 0
  end
end 
```

# java - 为什么 Java EJB 应用程序没有为其库预定义的相对路径？

> ID：11224107
> 
> 赞同：0
> 
> 时间：2012-06-27T10:26:10.030
> 
> 标签：java, ejb, classpath, appserver

我可以理解`Desktop`Java 中的应用程序没有包含 jar（库）文件的`pre-defined` **相对**路径。它已经有一个 CLASS_PATH 环境变量。

但是我不明白为什么 EJB 模块没有这样的功能......（`Web App has!- throw WEB-INF/lib`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:58:28.880

以下是 Java EE 规范的两个摘录：

> JAR 格式文件（例如 .jar 文件、.war 文件或 .rar 文件）可以通过在引用 JAR 文件的 Manifest 中的 Class-Path 标头中命名所引用的 .jar 文件或目录来引用 .jar 文件或目录文件。引用的 .jar 文件或目录使用相对于引用 JAR 文件的 URL 的 URL 命名。清单文件在 JAR 文件中被命名为 META-INF/MANIFEST.MF。Manifest 文件中的 Class-Path 条目的形式为

```
Class-Path: list-of-jar-files-or-directories-separated-by-spaces 
```

> .ear 文件可能包含一个目录，该目录包含打包在 JAR 文件中的库。.ear 文件的部署描述符的 library-directory 元素包含此目录的名称。如果未指定 library-directory 元素，或者 .ear 文件不包含部署描述符，则使用名为 lib 的目录。空的 library-directory 元素可用于指定没有库目录。此目录（但不是子目录）中带有 .jar 扩展名的所有文件都必须可供打包在 EAR 文件中的所有组件使用，包括应用程序客户端。这些库可以使用本文描述的任何技术引用与应用程序捆绑或单独安装的其他库。

# python - 基于日期时间在 Python 中“查询”数据结构

> ID：11224117
> 
> 赞同：1
> 
> 时间：2012-06-27T10:26:39.053
> 
> 标签：python

我需要一个可以处理以下内容的数据结构：

```
date_from (datetime)
date_to (datetime)
value (float) 
```

...并且我需要能够基于日期时间“查询”这个数据结构（例如在伪代码中：）`SELECT * FROM data_structure WHERE a_datetime >= date_from AND a_datetime <= date_to;`。

如果这个“查询”没有结果，我需要能够在数据结构中插入一个新值。

这样做的最佳方法是什么？（我现在有点卡住了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:04:06.833

看看这个[SortedCollection 食谱](http://code.activestate.com/recipes/577197-sortedcollection/)。它使用[bisect 模块](http://docs.python.org/library/bisect.html)，让您创建一个键控集合。例如：

```
>>> from SortedCollection import SortedCollection
>>> from operator import itemgetter
>>> s = SortedCollection(key=itemgetter(0))
>>> s.insert((1,2,'a'))
>>> s.insert((10,20,'b'))
>>> s.insert((20,30,'c'))
>>> s.find_le(10)
(10, 20, 'b') 
```

可以帮助您创建时间段信息的缓存，二分法应该让您有效地访问您的日期键控信息。

# windows - 加载时动态链接（导入库）搜索顺序

> ID：11224123
> 
> 赞同：1
> 
> 时间：2012-06-27T10:27:07.907
> 
> 标签：windows, visual-studio, dll

如果我使用导入库来实现与 Windows 系统 dll 的[加载时动态链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686923.aspx)，将使用哪个目录搜索顺序？

它最终是否等同于`LoadLibrary("Iphlpapi.dll")`？它会使用完全限定的路径（即`LoadLibrary("C:\\windows\\system32\\Iphlpapi.dll")`？

一些常用的 dll（[“已知 dll”](http://blogs.msdn.com/b/larryosterman/archive/2004/07/19/187752.aspx)）显然得到了特殊处理，但其他*系统*dll，如 Iphlapi.dll 呢？

它是否容易受到[DLL 预加载攻击](http://support.microsoft.com/kb/2389418)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:01:22.743

从您提到的 URL，您正在使用动态链接库机制的静态版本！这意味着您的应用程序必须使用 DLL 的相应 LIB 构建（请参阅此 URL 中的说明），并且应用程序将期望 DLL 在启动时存在。如果缺少此 DLL，您的应用程序将不会启动（这就是为什么此机制称为“使用加载时动态链接”）。您不能也不必调用 LoadLibrary。这将由加载程序自动完成（因为您的应用程序和 DLL 之间的依赖关系）已放入应用程序的所谓导入地址表 (IAT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:57:02.860

它应该使用完全限定的路径，即（“C:\windows\system32\kernel.dll”）...

# ios - 为什么直接注释编码字符串不转换为阿拉伯语？

> ID：11224128
> 
> 赞同：4
> 
> 时间：2012-06-27T10:27:20.000
> 
> 标签：ios, utf-8, arabic, latin1

```
NSString * string  = @"االْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ";
    const char *c = [string cStringUsingEncoding:NSUTF8StringEncoding];

    NSString *newString = [[NSString alloc]initWithCString:c   encoding:NSISOLatin1StringEncoding];
     NSLog(@"%@",newString);

//    NSString * staticEncodedString = @"Ø§ÙÙØ­ÙÙ ÙØ¯Ù ÙÙÙÙÙÙÙ Ø±ÙØ¨ÙÙ Ø§ÙÙØ¹ÙØ§ÙÙÙ ÙÙÙÙ";
    const char *cvvv = [newString cStringUsingEncoding:NSISOLatin1StringEncoding];
    NSString *newStringV = [[NSString alloc]initWithCString:cvvv  encoding:NSUTF8StringEncoding];
  NSLog(@"%@",newStringV); 
```

为什么直接注释编码字符串不转换为阿拉伯语？当我对阿拉伯语进行硬编码时，它会编码然后正确解码，但是为什么静态编码的字符串不能在阿拉伯语中不可读？

感谢您的回复杰克。是的，我在解码“staticEncodedString”时丢失了数据。但我想要的只是将以下字符串解码回阿拉伯语。

```
 NSString * staticEncodedString = @"Ø§ÙÙØ­ÙÙ ÙØ¯Ù ÙÙÙÙÙÙÙ Ø±ÙØ¨ÙÙ Ø§ÙÙØ¹ÙØ§ÙÙÙ ÙÙÙÙ"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:39:48.733

编码是ANSI，我认为可以从任何工具将其更改为UTF-8。例如，使用 Notepad++ 应用，然后您可以在 sqlite 或 ios 中使用对其进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:56:03.633

Latin1 不能表示阿拉伯字符，因此您不能将该字符串编码为 Latin1。阿拉伯语属于 Latin4 字符集。如果字符串不能无损编码为指定的编码，则 cStringUsingEncoding 方法将返回 null。

为什么要将阿拉伯字符串编码为 LatinX？UTF-8 很可能是最好的表示，因为它只使用标准字符和简单的方法，不会让人头疼。它可能比 Latin4 需要更多的字节，但在大多数情况下它是值得的。

转换为 Latin1 会使您丢失文本。

# .net - 自旋锁抛出 SynchronizationLockException

> ID：11224130
> 
> 赞同：18
> 
> 时间：2012-06-27T10:27:28.227
> 
> 标签：.net, multithreading, spinlock

我正在尝试使用 SpinLock，但是当我调用 SpinLock.Exit() 时，即使是单线程控制台应用程序中的这个最基本的代码也会引发以下异常

```
System.Threading.SynchronizationLockException was unhandled by user code
  Message=The calling thread does not hold the lock.  Source=mscorlib 
```

这是整个源代码...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace ConsoleApplication48
{
    class Program
    {
        static readonly SpinLock SpinLock = new SpinLock();
        static void Main(string[] args)
        {
            bool lockTaken = false;
            try
            {
                SpinLock.Enter(ref lockTaken);
                if (lockTaken)
                    Console.WriteLine("Lock taken");
            }
            finally
            {
                if (lockTaken)
                    SpinLock.Exit();
            }
            Console.WriteLine("Done");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-27T11:35:58.463

SpinLock 是一个结构，您正在从只读字段中读取它。C# 规范说，在这种情况下，为了调用一个潜在的变异函数，必须将结构复制到一个可变的局部变量。这发生在幕后。

您对 Enter 和 Exit 的调用发生在您的锁的新副本上。出于这个原因，Enter 正在对未锁定的锁进行操作。

不要将 SpinLock 变量设置为只读，因为它正在发生变异。

# objective-c - 从 NSColor 创建 NSImage

> ID：11224131
> 
> 赞同：17
> 
> 时间：2012-06-27T10:27:31.853
> 
> 标签：objective-c, cocoa

我有一个`NSPopUpButton`包含颜色列表的。在颜色标题前面，我需要显示一个相同颜色的小框（*可能是相同颜色的图像*）。所以，我在想，如果我可以创建一个`NSImage`using `NSColor`（*它已经存在*），那么我可以使用该`-[NSMenuItem setImage:]`方法在弹出按钮的颜色标题前面显示图像。

那么，如何创建`NSImage`using `NSColor`？

也欢迎任何其他解决问题的方法。:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T11:28:28.653

一个简单的类别方法将做到这一点

```
@interface NSImage (ImageAdditions)

+(NSImage *)swatchWithColor:(NSColor *)color size:(NSSize)size;

@end

@implementation NSImage (ImageAdditions)

+(NSImage *)swatchWithColor:(NSColor *)color size:(NSSize)size
{
    NSImage *image = [[[NSImage alloc] initWithSize:size] autorelease];
    [image lockFocus];
    [color drawSwatchInRect:NSMakeRect(0, 0, size.width, size.height)];
    [image unlockFocus];
   return image;    
}

@end 
```

**[编辑]**删除不推荐使用的 API

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-22T18:16:07.483

如果您使用的是 AppKit，这里是其他答案的 Swift 5 便利初始化程序版本。可悲的是，这在 UIKit 中不起作用

```
extension NSImage {
    convenience init(color: NSColor, size: NSSize) {
        self.init(size: size)
        lockFocus()
        color.drawSwatch(in: NSRect(origin: .zero, size: size))
        unlockFocus()
    }
} 
```

使用示例：

```
let redSwatchImage = NSImage(color: .red, size: NSSize(width: 128, height: 128)) 
```

根据需要随意更改语义

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-01T12:04:03.013

以及上面的快速扩展变体：

```
import Cocoa

extension NSImage {
  class func swatchWithColor(color: NSColor, size: NSSize) -> NSImage {
    let image = NSImage(size: size)
    image.lockFocus()
    color.drawSwatchInRect(NSRect(origin: .zero, size: size))
    image.unlockFocus()
    return image
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-15T22:38:04.900

我非常想做这件事，所以我为它制作了一个小的 Swift 包：[**Swift Color Swatches**](https://github.com/RougeWare/Swift-Color-Swatches)。

它是这样使用的：

```
import ColorSwatches

// If you prefer to use a factory initializer on the image type:
let nsImagePurple1 = NSImage.swatch(color: .systemPurple)
let uiImagePurple1 = UIImage.swatch(color: .systemPurple)

// If you prefer to use an instance method on a color instance:
let nsImagePurple2 = NSColor.systemPurple.swatch()
let uiImagePurple2 = UIColor.systemPurple.swatch() 
```

如果默认值不适合您，您也可以将大小传递给这些

# android - 如何使用来自其他包的 Android 活动片段？

> ID：11224132
> 
> 赞同：0
> 
> 时间：2012-06-27T10:27:32.510
> 
> 标签：android, android-activity, package, apk, fragment

我刚刚开始在 Android ICS 上进行开发。我需要在我的应用程序中重用一些活动片段。例如，当我想编写一个“设置向导”应用程序时，我需要在自己的 APK 中重用 WIFI 设置活动片段。但似乎活动片段只能在同一个包（APK）中使用。有谁知道如何处理这个？

非常感谢。

-罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:11:41.990

> 但似乎活动片段只能在同一个包（APK）内使用

正确的。

> 我需要在自己的APK中复用WIFI设置活动片段

我不知道您的应用程序是否可以拥有执行设置应用程序的 WiFi 屏幕所做的所有事情所需的所有权限。话虽如此，欢迎您[浏览设置的源代码](https://github.com/android/platform_packages_apps_settings)并提取您想要的内容。

# java - 如何在Spring中从给定的jar文件中映射bean

> ID：11224135
> 
> 赞同：0
> 
> 时间：2012-06-27T10:27:41.710
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-webflow

我已经开发了一个 Spring Web 应用程序并且它工作正常。我的 bean 创建映射结构如下：我的控制器：

```
@Controller
@RequestMapping("appointmentDiary")
public class AppointmentDiaryController {   
    private IAppointmentDiaryService appointmentDiaryService;   
    public IAppointmentDiaryService getAppointmentDiaryService() {
        return appointmentDiaryService;
    }
    public void setAppointmentDiaryService(IAppointmentDiaryService appointmentDiaryService) {
        this.appointmentDiaryService = appointmentDiaryService;
    }
}

My Service Interface:
public interface IAppointmentDiaryService
{
    public Integer getAppointmentDiaryNo();
}

My  Impl Class:
public class AppointmentDiaryServiceImpl  implements IAppointmentDiaryService{  
    private IAppointmentDiaryDAO appointmentDiaryDAO;
    public IAppointmentDiaryDAO getAppointmentDiaryDAO(){
        return appointmentDiaryDAO;
    }
    public void setAppointmentDiaryDAO(IAppointmentDiaryDAO appointmentDiaryDAO)    {
        this.appointmentDiaryDAO = appointmentDiaryDAO;
    }
    public Integer getAppointmentDiaryNo(){     
        InternalResultsResponse<Object> objResponse = getAppointmentDiaryDAO().getAppointmentDiaryNo();
        return objResponse;
    }
My DAO Interface: 
public interface IAppointmentDiaryDAO extends IGenericDAO
{   
    public InternalResultsResponse<Object> getAppointmentDiaryNo();
}

My DAO Impl calss:
public class AppointmentDiaryDAOImpl extends GenericDAOImpl implements
        IAppointmentDiaryDAO {  
    public InternalResultsResponse<Object> getAppointmentDiaryNo() {
        InternalResultsResponse<Object> response = new InternalResultsResponse<Object>();
        String sql = SqlProperties.getSQLStatement("getAppointmentDiaryNo");
        Session session = getSession();
        Transaction tr = session.beginTransaction();
        response = HibernateUtil.executeSQLQuery(session, sql);
        tr.commit();
        return response;
    }
} 
```

现在，我不想使用这种结构，我想创建一个包含所有服务接口、Impl 类、DAO 接口和 Impl 类的 jar 文件，这意味着除了控制器之外的所有内容都应该在 jar 文件中。但是当我创建一个 jar 文件并添加项目的类路径并运行项目时发生异常：异常是：

```
 org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [com.nmmc.cess.service.impl.AppointmentDiaryServiceImpl] for bean with name 'appointmentDiaryServiceImpl' defined in ServletContext resource [/WEB-INF/config/cess-service-application-context.xml]: problem with class file or dependent class; nested exception is java.lang.NoClassDefFoundError: com/nmmc/cess/service/IAppointmentDiaryService 
```

那么，我该如何配置它将映射 Spring 在 xml 文件中定义的 bean。当我在不使用该 jar 文件的情况下运行项目时，我的 bean 配置工作正常。请给出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:05:47.360

为什么你用注解映射控制器，用xml映射服务和dao类，spring首先搜索带注解的对象，然后加载xml beans，在你的应用程序中你应该加载dao然后是服务，最后是控制器。**使用@Service**和**@Repository**甚至使用**@Component**对它们进行注释，这样您就不必担心在另一个对象之前加载了哪些对象。

# tomcat - IBM Sterling Configurator 与 Websphere 商务的集成

> ID：11224137
> 
> 赞同：0
> 
> 时间：2012-06-27T10:27:46.227
> 
> 标签：tomcat, websphere, ibm-rad

我已经安装了带有功能包 4.、SSFS9.1 和 Visual Modeler9.1 的 Websphere Commerce 7.0。

我已按照 IBM 信息中心链接中提到的步骤进行操作。当我登录到管理中心并导航到目录工具->商店->目录->类别并打开动态套件。我能够启动 Visual Modeler 并添加模型。但我无法从管理中心查看产品到 Visual Modeler。它给了我以下错误

任何指针都可以帮助我

com.comergent.api.msgService.MsgServiceException：在 com.comergent.msgService.MsgServiceImpl.service(MsgServiceImpl.java:66) 的 com.comergent.msgService.FormPostMsgServiceImpl.postRequest(FormPostMsgServiceImpl.java:71) 处将消息发布到 URL 时出错在 com.comergent.appservices.appServiceUtils.OFApiHelper.invokeAPI(OFApiHelper.java:91) 在 com.comergent.apps.visualModeler.util.GetProductCategoryAndProduct.getProductCategoryAndProduct(GetProductCategoryAndProduct.java:70) 在 com.comergent.reference.appservices.productService .controller.EPOFProductCategory.getChildren(EPOFProductCategory.java:36) 在 com.comergent.reference.appservices.productService.controller.TVOFProductCategory.getTopLevelEntities(TVOFProductCategory.java:49) 在 com.comergent.reference.appservices.productService.controller。com.comergent.reference.appservices.productService.controller.EntityPickerHierarchyViewController.execute(EntityPickerHierarchyViewController.java:50) com.comergent.dcm.core.DispatchServlet.executeController(DispatchServlet.java:第 485 章.dispatch(DispatchServlet.java:189) 在 com.comergent.dcm.core.DispatchServlet.doGet(DispatchServlet.java:145) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:690) 在 javax.servlet。 http.HttpServlet.service(HttpServlet.java:803) 在 org.apache.catalina.core。ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50)在 com.comergent.apps.mktAnalytics.identification.CookieCredentialFilter.executeFilter(CookieCredentialFilter.java:93) 在 com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) 在 org.apache.catalina.core .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50 ) 在 com.comergent.dcm.core.filters.CredentialPropagationFilter。executeFilter(CredentialPropagationFilter.java:57) at com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org .apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50) 在 com.comergent.dcm.core.filters.AAFilter .executeFilter(AAFilter.java:54) at com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com.comergent.dcm.core.filters.ComergentFilter。doFilter(ComergentFilter.java:50) at com.comergent.dcm.core.WrappingFilter.executeFilter(WrappingFilter.java:157) at com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) at org .apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at com.comergent.dcm.core.filters.ComergentFilter.doFilter (ComergentFilter.java:50) 在 com.comergent.dcm.core.filters.StatsFilter.executeFilter(StatsFilter.java:38) 在 com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) 在org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain。doFilter(ApplicationFilterChain.java:206) 在 com.comergent.dcm.core.filters.SSLSessionKeyFilter.handleHttpRequest(SSLSessionKeyFilter.java:79) 在 com.comergent.dcm.core.filters.SSLSessionKeyFilter.doFilter(SSLSessionKeyFilter.java:186)在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com.comergent.dcm.core.filters.IPSessionTrackingFilter .doFilter(IPSessionTrackingFilter.java:84) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com。 com.comergent.filter.csrf.CSRFFilter.validSecondarySessionIdReceived(CSRFFilter.java:253)。com.comergent.filter.csrf.AbstractServletFilter.doFilter(AbstractServletFilter.java:83) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain. java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50) 在 com.comergent.dcm .core.filters.RequestControlFilter.executeFilter(RequestControlFilter.java:102) at com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain .java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50) 在 com.comergent.dcm.core.filters.TimingFilter.executeFilter(TimingFilter.java:46) 在 com.comergent.dcm .core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java :206）在 com.comergent.dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:50) 在 com.comergent.dcm.core.filters.EntryFilter.executeFilter(EntryFilter.java:102) 在 com.comergent。 dcm.core.filters.ComergentFilter.doFilter(ComergentFilter.java:58) 在 com.comergent.dcm.core.filters.EntryFilter.doFilter(EntryFilter.java:75) 在 org.apache.catalina.core。ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org .apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve .java:128）在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina 的 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)。 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java .lang.Thread.run(Thread.java:619) 原因：javax.net.ssl.SSLPeerUnverifiedException：对等体未在 com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352) 进行身份验证在 org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128) 在 org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:339) 在 org.apache.http.impl .conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:123) 在 org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:147) 在 org.apache.http.impl.conn.AbstractPooledConnAdapter。在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641) 的 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415) 处打开(AbstractPooledConnAdapter.java:108)在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554) 在 com.comergent.api.msgService .LocalPost.postEntityReturnStream(LocalPost.java:336) 在 com.comergent.api.msgService.LocalPost.postEntityReturnReader(LocalPost.java:325) 在 com.comergent.api.msgService.LocalPost.postStringReader(LocalPost.java:178) 在com.comergent.api.msgService.LocalPost.postString(LocalPost.java:156) 在 com.comergent.msgService.FormPostMsgServiceImpl.postRequest(FormPostMsgServiceImpl.java:68) ...还有 80 个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:06:45.843

我认为您首先需要将 Sterling Selling 和履行与 Webshpere 商业集成，以便开始使用可视化建模器并查看您的更改反映在 IBM WCS 检查此链接

[ftp://public.dhe.ibm.com/software/commerce/doc/ssfs/92/SterlingOM92_InstallConfigWithWebSphereCommerce.pdf](ftp://public.dhe.ibm.com/software/commerce/doc/ssfs/92/SterlingOM92_InstallConfigWithWebSphereCommerce.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:57:37.807

有几件事，您是否在管理中心的商店中打开了 Sterling Configurator？此外，请确保您在 Accelerator 中为您的商店或整个站点设置正确的传输设置。

# iphone - UITextView 的垂直对齐

> ID：11224146
> 
> 赞同：4
> 
> 时间：2012-06-27T10:28:22.663
> 
> 标签：iphone, ios, ios4

我想在 UITextView 中垂直对齐一些文本。当我添加文本时。它从顶部显示..但我需要从顶部显示中间。是否有可能实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:44:17.523

您可以使用类的`contentOffset`属性`UITextView`来完成此操作。

看到这个[博客](http://imagineric.ericd.net/2011/03/10/ios-vertical-aligning-text-in-a-uitextview/)。我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T10:00:31.313

```
- (void) viewDidLoad {  
   [textField addObserver:self forKeyPath:@"contentSize" options:  (NSKeyValueObservingOptionNew) context:NULL];  
   [super viewDidLoad];  
}  

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {  
   UITextView *tv = object;  
   //Center vertical alignment  
   //CGFloat topCorrect = ([tv bounds].size.height - [tv contentSize].height * [tv zoomScale])/2.0;  
   //topCorrect = ( topCorrect < 0.0 ? 0.0 : topCorrect );  
   //tv.contentOffset = (CGPoint){.x = 0, .y = -topCorrect};  

   //Bottom vertical alignment  
   CGFloat topCorrect = ([tv bounds].size.height - [tv contentSize].height);  
    topCorrect = (topCorrect <0.0 ? 0.0 : topCorrect);  
    tv.contentOffset = (CGPoint){.x = 0, .y = -topCorrect};  
} 
```

# android - 使用 DatabaseHelper 时出错请尝试指出错误

> ID：11224147
> 
> 赞同：0
> 
> 时间：2012-06-27T10:28:23.707
> 
> 标签：android

这是完整的**日志 cat**：

```
 06-27 18:24:36.332: E/AndroidRuntime(1267): java.lang.RuntimeException: Unable to start 
activity ComponentInfo{com.frux.kfcmobile/com.frux.kfcmobile.KFCmobileActivity}: 
android.database.sqlite.SQLiteException: near "/": syntax error 
```

和我的**DatabaseHelper 类**

```
public class DatabaseHelper extends SQLiteOpenHelper{

    private static String DB_PATH = "/data/data/com.frux.kfcmobile/databases/";
    private static String DB_NAME = "data";
    private SQLiteDatabase myDataBase; 
    private final Context myContext;
    private static final int DATABASE_VERSION = 1;

    public DatabaseHelper(Context context) {
        // TODO Auto-generated constructor stub
        super(context, DB_NAME, null, DATABASE_VERSION);
        this.myContext = context;

    }
     public void createDataBase() throws IOException{

            boolean dbExist = checkDataBase();

            if(dbExist){
                //do nothing - database already exist
                this.getWritableDatabase();
                this.close();
            }else{

                //By calling this method and empty database will be created into the default system path
                   //of your application so we are gonna be able to overwrite that database with our database.
                this.getReadableDatabase();

                try {

                    copyDataBase();

                } catch (IOException e) {

                    throw new Error("Error copying database message");

                }
            }

        }

     private boolean checkDataBase(){

            SQLiteDatabase checkDB = null;

            try{
                String myPath = DB_PATH + DB_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

            }catch(SQLiteException e){

                //database does't exist yet.

            }

            if(checkDB != null){

                checkDB.close();

            }

            return checkDB != null ? true : false;
        }

     private void copyDataBase() throws IOException{

            //Open your local db as the input stream
            InputStream myInput = myContext.getAssets().open(DB_NAME);

            // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;

            //Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            //transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0){
                myOutput.write(buffer, 0, length);
            }

            //Close the streams
            myOutput.flush();
            myOutput.close();
            myInput.close();

        }

     public void openDataBase() throws SQLException{

            //Open the database
            String myPath = DB_PATH + DB_NAME;
            myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }

        @Override
        public synchronized void close() {

                if(myDataBase != null)
                    myDataBase.close();

                super.close();

        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        String myPath = DB_PATH + DB_NAME;
        db.execSQL(myPath);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:59:09.693

这是你的问题：

```
@Override 
public void onCreate(SQLiteDatabase db) { 
    String myPath = DB_PATH + DB_NAME; 
    db.execSQL(myPath); 
} 
```

我不知道您要做什么，但`myPath`不是 SQL 语句，因此尝试将其用作一个会导致您的错误。将其更改为空方法，您的错误将消失。

```
@Override 
public void onCreate(SQLiteDatabase db) { 
} 
```

另一方面，如果数据库不存在，您没有代码来复制数据库。这应该在您的构造函数中，如下所示：

```
DatabaseHelper(Context context, String dbname, int dbversion) {
super(context, dbname, null, dbversion);
    this.myContext = context;    
    if (checkDataBase(dbname)) {
        openDataBase(dbname);
    } else {
        try {
            this.getReadableDatabase();
            copyDataBase(dbname);
            this.close();
            openDataBase(dbname);
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
        Toast.makeText(context,
                "Initial " + dbname + " database has been reated",
                    Toast.LENGTH_LONG).show();
    }
} 
```

# mysql - 如何通过mysql中的解密查看原始数据？

> ID：11224149
> 
> 赞同：2
> 
> 时间：2012-06-27T10:28:27.263
> 
> 标签：mysql

我加密了我的密码字段并将其插入到 MySQL 表中。之后我解密了该列

```
select fld_user,fld_pwd,AES_DECRYPT(fld_encryptedpwd,'key')
  from users 
 where fld_id='1903'; 
```

但是，结果显示“BLOB”。我使用 Varbinary() 作为加密列的数据类型。我该做什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:59:13.950

MySQL Workbench 中的解决方案是切换 SQL 编辑器的以下选项：“将 BINARY/VARBINARY 视为非二进制字符串”。至少在 MacOS X 上，您需要重新启动 Workbench 才能使选项生效。（您也可以右键单击该值并执行“在查看器中打开值”）。

如果您不想更改 Workbench 中的选项，可以使用[CAST()](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html)函数将[AES_DECRYPT()](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html)的结果作为字符串返回：

```
SELECT fld_user, fld_pwd, CAST(AES_DECRYPT(fld_encryptedpwd, 'key') AS CHAR)
FROM users WHERE fld_id='1903'; 
```

检查/确保函数将返回什么数据类型的技巧是使用 MySQL CLI 执行以下操作：

```
mysql> CREATE TALBE tmp1 AS SELECT AES_DECRYPT(fld_encryptedpwd, 'key')
       FROM users WHERE fld_id='1903';
mysql> DESC tmp1; 
```

这将显示将返回哪种数据类型。

（同样，存储加密密码：不太好。）

# html - 如何修复扭曲的 ie7 按钮？

> ID：11224152
> 
> 赞同：2
> 
> 时间：2012-06-27T10:28:31.470
> 
> 标签：html, css, facebook, internet-explorer-7, facebook-like

可以在此处观察到该问题：

![在此处输入图像描述](../Images/b08dcb223ab88613606cd5bef9452330.png)

它不适用于模拟的 ie7（ie9 -> 开发人员工具）。

我尝试了许多 css 设置，但可能不是所有的，因为我相信这个错误有一些解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T04:13:04.137

Jashwant 的回答基本上是正确的 - 你看到的是 IE 使用 IE7 浏览器模式和 IE9 文档标准，在真正的 IE7 浏览器中，Facebook Like 按钮显示正常。问题在于 IE 开发人员工具。

首次打开开发者工具时，会显示IE9浏览器和文档模式。如果将浏览器模式更改为 IE7，文档模式似乎会自动更改为 IE7 标准。但是，如果您将 Document Mode 更改为 IE9，然后再回到 IE7，您会发现 Facebook Like 按钮现在可以正确显示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T10:32:15.060

它处于怪癖模式。应用适当的文档类型。

如果你使用开发者工具，

将文档模式更改为 ie7 标准

# objective-c - 显示来自 json 的图像

> ID：11224158
> 
> 赞同：1
> 
> 时间：2012-06-27T10:28:54.323
> 
> 标签：objective-c, ios, json, uiimageview, uiimage

我无法显示从 json 文件加载的图像。我正在使用 JSONKit 解析我的 json，一切正常，但我无法在`UIImageview`. 我希望你们中的一些人可以帮助我。

在我的代码下方，我认为可能是正确的，但事实并非如此。

```
UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 100, 115)];
image.image = [UIImage imageNamed:[detailView objectForKey:@"thumbnail"]];

[self.view addSubview:image];
[image release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:36:24.220

我认为在 json 中你正在获取图像的 url。使用以下代码从 url 显示图像

```
 //NSURL *url = [NSURL URLWithString:@"http://192.168.1.2x0/pic/LC.jpg"];
   NSURL *url = [NSURL URLWithString:[detailView objectForKey:@"thumbnail"]];

 NSData *data = [NSData dataWithContentsOfURL:url];
 UIImageView *subview = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f,320.0f,  460.0f)];
 [subview setImage:[UIImage imageWithData:data]]; 
 [self.view addSubview:subview];
  [subview release]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:39:27.437

您发布的代码

```
image.image = [UIImage imageNamed:[detailView objectForKey:@"thumbnail"]]; 
```

将尝试在您的捆绑包中找到名为存储在中的字符串的图像`[detailView objectForKey:@"thumbnail"]`

正如您所提到的，您的图像来自远程服务器，您必须从远程服务器下载图像。

```
 UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 100, 115)];
 image.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[detailView objectForKey:@"thumbnail"]]]];
[self.view addSubview:image];
[image release] 
```

# mysql - 设置表结构

> ID：11224159
> 
> 赞同：0
> 
> 时间：2012-06-27T10:28:54.380
> 
> 标签：mysql

我对设置表的表结构有疑问。我看过这个问题：[我应该如何用 mysql 构建我的设置表？](https://stackoverflow.com/questions/2469492/how-should-i-structure-my-settings-table-with-mysql)我看到很多 CMS 系统和论坛都使用这种结构进行设置。选择设置非常容易，但我将如何更新设置？

假设我有一个带有要更改所有设置的表单的页面。在数据库中，每个设置都在一个单独的行上，所以如果我有 40 个设置，我需要 40 个更新查询吗？如果我使用第一种方法（一行中的所有设置），我只需要 1 个更新查询。

我在这里缺少什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:33:48.347

您将需要 40 次更新，但实际上这不是问题。人们多久更改一次设置？这不是一个高交易率的操作，所以没关系。如果值已更改，您甚至可以检查您的代码，如果您真的关心，则仅在更改时才更新。

归根结底不是您想要一次更新还是 40 次更新，而是您是否想要预定义列中的强类型值，或者（可能）更灵活的每值一行的方法。

# asp.net-mvc - 从 Telerik 组合框 MVC/ASP 中选择主题

> ID：11224163
> 
> 赞同：1
> 
> 时间：2012-06-27T10:29:03.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, telerik, telerik-mvc

我想实现一个类似于他们的演示网站上提供的 Telerik 主题功能的功能。（我有他们控件的完全许可副本），但我找不到任何有关如何执行此操作的信息。

我有一个 MVC 应用程序，并且在 _Layout.cshtml （它没有我知道的控制器（我希望我错了））中，我试图添加一个组合框，其中填充了可用样式列表，如下所示：

```
 <section id="Login">
        @if (Request.IsAuthenticated)
           {
                <section id="loginImage">
                    <img src="../../Content/Images/BlankPerson.jpg" />
                </section>
                <section id="loginText">
                    [ @Html.ActionLink("Log Off", "LogOff", "Account") ]
                    <br />
                    @User.Identity.Name!

                    @(
                        /* TELERIK COMBOBOX */

                        Html.Telerik().ComboBox()
                        .Name("cbxTheme")
                        .Placeholder("Select Theme...")
                        .SelectedIndex(0)
                        .ClientEvents(events => events.OnChange("cbxTheme_onChange"))
                        //.BindTo((IEnumerable<DropDownItem>)ViewData["Files"])
                        .Items(item =>
                            {
                                item.Add().Text("black");
                                item.Add().Text("common");
                                item.Add().Text("default");
                                item.Add().Text("forest");
                                item.Add().Text("hay");
                                item.Add().Text("metro");
                                item.Add().Text("office2007");
                                item.Add().Text("office2010black");
                                item.Add().Text("office2010blue");
                                item.Add().Text("office2010silver");
                                item.Add().Text("outlook");
                                item.Add().Text("rtl");
                                item.Add().Text("simple");
                                item.Add().Text("sitefinity");
                                item.Add().Text("sunset");
                                item.Add().Text("telerik");
                                item.Add().Text("transparent");
                                item.Add().Text("vista");
                                item.Add().Text("web20");
                                item.Add().Text("webblue");
                                item.Add().Text("windows7");
                            })
                    )
                </section>                  
           }
    </section> 
```

由 Telerik 执导。我们必须在视图的开头和结尾包含以下行，如下所示：

```
<head>
@(

  Html.Telerik().StyleSheetRegistrar()
                .DefaultGroup(group => group
                .Add("telerik.common.css")
                .Add("telerik.black.css").Combined(true).Compress(true)
                .Add("telerik." +   + ".css", ).Combined(true).Compress(true)
                //.Add("telerik." + Html.GetCurrentTheme() + ".css").Combined(true).Compress(true)

                //"javascript:cbxTheme_onChange()"
                ))

</head>

.
.
.
.

<body>
@(Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Combined(true).Compress(true)))
</body> 
```

我也有一点 JQuery 可以工作，但我无法以我需要的方式访问它，这就是我的问题所在：

```
<script>
    function cbxTheme_onChange()
    {
        var selectedItemText = $("#cbxTheme").data("tComboBox").text();
        var selectedItemValue = $("#cbxTheme").data("tComboBox").value();
        alert(selectedItemValue);

        return selectedItemText;
    }

</script> 
```

上面的函数确实有效，并弹出一条带有所选项目的消息。那里没问题。

我遇到的问题是头部中的这行代码，如上所示：

```
@(

  Html.Telerik().StyleSheetRegistrar()
                .DefaultGroup(group => group
                .Add("telerik.common.css")
                .Add("telerik.black.css").Combined(true).Compress(true)
                .Add("telerik." + "SELECTED ITEM FROM COMBOBOX.TEXT HERE"  + ".css", ).Combined(true).Compress(true)
                //.Add("telerik." + Html.GetCurrentTheme() + ".css").Combined(true).Compress(true)

                //"javascript:cbxTheme_onChange()"
                )) 
```

在它说“从combobox.text中选择的项目”的地方，javascript函数应该放置一个字符串（其中包含要使用的telerik样式表的名称。它应该可以工作，但它不是。

我什至试图通过说直接解决组合框：

```
 .Add("telerik." + cbxTheme.SelectedItem.text  + ".css", ).Combined(true).Compress(true) 
```

这就是在他们的网站上完成的方式。但同样它不起作用。

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:18:23.283

Telerik 在演示站点上执行此操作的方式是重新加载页面并从查询字符串中获取主题。在下拉列表中选择一个主题会导致页面加载如下 url：

```
http://demos.telerik.com/aspnet-mvc/[control]?theme=[theme] 
```

例如，在选项卡条示例中，选择主题林具有此 url。

```
http://demos.telerik.com/aspnet-mvc/tabstrip?theme=forest 
```

_Layout.cshtml 文件有这一行（就像你提到的那样）。

```
.Add("telerik." + Html.GetCurrentTheme() + ".css") 
```

Html.GetCurrentTheme() 调用从查询字符串中获取主题名称的扩展方法。

```
public static string GetCurrentTheme(this HtmlHelper html)
{
    return html.ViewContext.HttpContext.Request.QueryString["theme"] ?? "vista";
} 
```

如果你想使用你的 javascript cbxTheme_onChange() 函数，你可以做一些类似于 Telerik 演示页面的事情，方法是使用带有主题名称的查询字符串的 url 重新加载页面，然后使用它来设置样式。

将 window.location.href 添加到您的 javascript 函数 cbxTheme_onChange()。

```
<script>
  function cbxTheme_onChange() {
    var selectedItemValue = $("#cbxTheme").data("tComboBox").value();
    window.location.href = window.location.protocol + '//' 
      + window.location.host + window.location.pathname 
      + '?theme=' + selectedItemValue;
  }
</script> 
```

# matlab - Matlab - 为 pcolor 中的值设置特定颜色

> ID：11224164
> 
> 赞同：3
> 
> 时间：2012-06-27T10:29:07.860
> 
> 标签：matlab, colors, overlay

我创建了一个 pcolor，其 caxis 范围从 -3 到 3。但是，在数据中，我有很多点的值正好是 1000。我想要做的是保持所有其他的颜色相同点，但将任何值为 1000 的点的颜色设置为黑色。有谁知道我怎么能做到这一点..？

提前非常感谢，亚当

- 编辑 -

我目前正在使用 pcolor 的映射工具 m_pcolor 创建绘图，如下所示（有关详细信息，请参见[此处](http://www.eos.ubc.ca/~rich/private/mapug.html)）：

```
m_proj('Robinson')
h = m_pcolor(Lon', Lat', input_matrix);
m_coast('Color', 'k', 'LineWidth', 1);
set(h,'EdgeColor','none'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:30:41.537

如果黑色作为等于 1000 的值的颜色不是严格要求，您可以简单地将这些值设置`NaN`为

```
a(a==1000) = nan; 
```

该函数将以**白色**`pcolor`绘制`nan`值。

 ****~edit~**
要将`nan`值显示为黑色，您可以将轴的背景更改为黑色：

```
set(gca, 'color', [0 0 0]);
hold on; 
pcolor(a); 
```

**~edit2~**
如果您无法更改背景，请尝试以下解决方法：

```
h1 = pcolor(ones(size(a))); 
hold on; 
set(h1, 'facecolor', [0 0 0]); 
pcolor(a); 
```

这会将两个表面绘制在彼此之上，下面的一个设置为黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:52:28.033

正如 H.Muster 所写，您可以将等于 1000 的值设置为 NaN。在这种情况下，轴颜色显示通过，默认为白色。如果你希望它是黑色的，你可以设置轴对象的 'Color' 属性：

```
a=[1 2 4; 3 NaN 5; 6 7 8];
pcolor(a);
set(gca, 'Color', 'Black') 
```**

# iphone - 扫码字符列表

> ID：11224169
> 
> 赞同：0
> 
> 时间：2012-06-27T10:29:32.303
> 
> 标签：iphone, objective-c, xcode, ascii, port

我正在开发一个 iPhone 应用程序，其中我需要在端口上编写字符扫描代码，为此我需要将字符转换为 ASCII 代码，然后将 ASCII 转换为扫描代码。有人可以帮助或向我发送扫描代码的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:12:27.443

```
UPC-A and UPC-E
EAN-8 and EAN-13
Code 39 
Code 93
Code 128
ITF 
Codabar
RSS-14 (all variants)
QR Code 
Data Matrix
Aztec ('beta' quality)
PDF 417 ('alpha' quality) 
```

这是可用的扫描仪你可以使用 zxing 框架来帮助你扫描东西

[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:12:35.923

在这里您可以找到扫描代码[列表](http://webster.cs.ucr.edu/AoA/DOS/pdf/apndxc.pdf)。

# c# - 重构代码以避免反模式

> ID：11224170
> 
> 赞同：0
> 
> 时间：2012-06-27T10:29:37.033
> 
> 标签：c#, .net, design-patterns, domain-driven-design, cqrs

我有一个包含以下代码的 BusinessLayer 项目。域对象是 FixedBankAccount（它实现了 IBankAccount）。

1.  存储库作为域对象的公共属性并作为接口成员。**如何重构它以使存储库不再是接口成员**？

2.  域对象 (FixedBankAccount) 直接使用存储库来存储数据。这是否违反了单一责任原则？如何纠正它？

注意：存储库模式是使用 LINQ to SQL 实现的。

**编辑**

下面给出的代码是更好的方法吗？ [https://codereview.stackexchange.com/questions/13148/is-it-good-code-to-satisfy-single-responsibility-principle](https://codereview.stackexchange.com/questions/13148/is-it-good-code-to-satisfy-single-responsibility-principle)

**代码**

```
public interface IBankAccount
{
    RepositoryLayer.IRepository<RepositoryLayer.BankAccount> AccountRepository { get; set; }
    int BankAccountID { get; set; }
    void FreezeAccount();
} 
```

```
public class FixedBankAccount : IBankAccount
{
    private RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository;
    public RepositoryLayer.IRepository<RepositoryLayer.BankAccount> AccountRepository
    {
        get
        {
            return accountRepository;
        }
        set
        {
            accountRepository = value;
        }
    }

    public int BankAccountID { get; set; }

    public void FreezeAccount()
    {
        ChangeAccountStatus();
    }

    private void SendEmail()
    {

    }

    private void ChangeAccountStatus()
    {
        RepositoryLayer.BankAccount bankAccEntity = new RepositoryLayer.BankAccount();
        bankAccEntity.BankAccountID = this.BankAccountID;

        accountRepository.UpdateChangesByAttach(bankAccEntity);
        bankAccEntity.Status = "Frozen";
        accountRepository.SubmitChanges();
    }
} 
```

```
public class BankAccountService
{
    RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository;
    ApplicationServiceForBank.IBankAccountFactory bankFactory;

    public BankAccountService(RepositoryLayer.IRepository<RepositoryLayer.BankAccount> repo, IBankAccountFactory bankFact)
    {
        accountRepository = repo;
        bankFactory = bankFact;
    }

    public void FreezeAllAccountsForUser(int userId)
    {
        IEnumerable<RepositoryLayer.BankAccount> accountsForUser = accountRepository.FindAll(p => p.BankUser.UserID == userId);
        foreach (RepositoryLayer.BankAccount repositroyAccount in accountsForUser)
        {
            DomainObjectsForBank.IBankAccount acc = null;
            acc = bankFactory.CreateAccount(repositroyAccount);
            if (acc != null)
            {
                acc.BankAccountID = repositroyAccount.BankAccountID;
                acc.accountRepository = this.accountRepository;
                acc.FreezeAccount();
            }
        }
    }
} 
```

```
public interface IBankAccountFactory
{
     DomainObjectsForBank.IBankAccount CreateAccount(RepositoryLayer.BankAccount repositroyAccount);
} 
```

```
public class MySimpleBankAccountFactory : IBankAccountFactory
{
    public DomainObjectsForBank.IBankAccount CreateAccount(RepositoryLayer.BankAccount repositroyAccount)
    {
        DomainObjectsForBank.IBankAccount acc = null;

        if (String.Equals(repositroyAccount.AccountType, "Fixed"))
        {
            acc = new DomainObjectsForBank.FixedBankAccount();
        }

        if (String.Equals(repositroyAccount.AccountType, "Savings"))
        {
            acc = new DomainObjectsForBank.SavingsBankAccount();
        }

        return acc;
    }
} 
```

阅读：

1.  [DDD - 实体状态转换](https://stackoverflow.com/questions/2241133/ddd-entity-state-transition)

2.  [https://codereview.stackexchange.com/questions/13148/is-it-good-code-to-satisfy-single-responsibility-principle](https://codereview.stackexchange.com/questions/13148/is-it-good-code-to-satisfy-single-responsibility-principle)

3.  [使用“单一职责原则”强制我的容器有公共设置器](https://stackoverflow.com/questions/4412059/using-the-single-responsibility-principle-forces-my-containers-to-have-public?rq=1)

4.  [https://softwareengineering.stackexchange.com/questions/150760/single-responsibility-principle-how-can-i-avoid-code-fragmentation](https://softwareengineering.stackexchange.com/questions/150760/single-responsibility-principle-how-can-i-avoid-code-fragmentation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:42:18.593

我不会说它是一种反模式，因为反模式首先应该是一种模式（一种可识别的、广泛使用的做事方式），而且我不知道任何“存储库” -域对象”模式。

但是，IMO 肯定是不好的做法，因为您的 BankAccount 域对象混合了 3 个职责：

*   作为域对象，它自然而合法地有责任冻结自身并改变其状态。

*   更新和提交更改到持久存储的责任（使用 accountRepository）。

*   决定如何发送消息（在这种情况下是电子邮件）并发送它的责任。

结果，您的 Domain 对象与太多东西紧密耦合，使其僵化和脆弱。由于太多原因，它可能会改变并可能中断。

所以没有反模式，但肯定违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

最后 2 个职责应移至单独的对象。提交更改属于管理业务事务（工作单元）的对象，并且知道结束事务和刷新事物的正确时间。第二个可以放在 Infrastructure 层的 EmailService 中。理想情况下，执行全局冻结操作的对象不应该知道消息传递机制（通过邮件或其他方式），而是应该注入它，这将允许更大的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T18:43:18.420

重构此代码以使存储库不是接口成员很容易。存储库是实现的依赖项，而不是接口 - 将其注入您的具体类，并将其从 IBankAccount 中删除。

```
public class FixedBankAccount : IBankAccount
{
    public FixedBankAccount(RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository)
    {
        this.accountRepository = accountRepository;
    }

    private readonly RepositoryLayer.IRepository<RepositoryLayer.BankAccount> accountRepository;

    public int BankAccountID { get; set; }
    public void FreezeAccount()
    {
         ChangeAccountStatus();
    }

    private void SendEmail()
    {
    }

    private void ChangeAccountStatus()
    {
        RepositoryLayer.BankAccount bankAccEntity = new RepositoryLayer.BankAccount();
        bankAccEntity.BankAccountID = this.BankAccountID;

        accountRepository.UpdateChangesByAttach(bankAccEntity);
        bankAccEntity.Status = "Frozen";
        accountRepository.SubmitChanges();
    }

} 
```

关于第二个问题...

是的，域对象通过了解您的持久性代码而违反了 SRP。然而，这可能是也可能不是问题；许多框架将这些职责混合在一起以达到很好的效果——例如，Active Record 模式。它确实使单元测试更有趣，因为它需要你模拟你的 IRepository。

如果您选择拥有一个更加持久无知的域，您可能最好通过实现工作单元模式来做到这一点。加载/编辑/删除的实例在工作单元中注册，该单元负责在事务结束时持久化更改。工作单元负责您的变更跟踪。

如何设置取决于您创建的应用程序类型和您使用的工具。例如，我相信如果使用实体框架，您可以使用 DataContext 作为您的工作单元。（Linq-to-SQL 也有 DataContext 的概念吗？）

[这](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)是使用 Entity Framework 4 的工作单元模式的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T12:23:52.743

Remi 的解决方案要好得多，但 IMO 更好的解决方案是：

1-不要向域对象注入任何东西： [您*不需要*向域实体注入任何东西。不是服务。不是存储库。没有什么。只是纯领域模型的优点](http://www.udidahan.com/2009/06/14/domain-events-salvation/)

2-让服务层直接存储库来执行 SubmitChanges，...但要注意服务层应该**很薄**，域对象不应该是[贫血的](http://martinfowler.com/bliki/AnemicDomainModel.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T10:06:58.040

接口与单一职责原则没有直接关系。您无法将数据访问代码与业务逻辑完全分开——它们必须在某个时候进行通信！你想要做的是**最小化**（但不要*避免*）发生这种情况的地方。确保您的数据库模式是*逻辑*的而非*物理*的（即，基于谓词而不是表和列）并且基于实现的代码（例如，数据库管理系统连接驱动程序）仅在*一个*地方——负责与数据库。每个*实体*应由*一个*类表示。而已。

# ios - iOS模拟器上的Testflight？

> ID：11224173
> 
> 赞同：4
> 
> 时间：2012-06-27T10:29:49.357
> 
> 标签：ios, ios-simulator, testflight

> **可能重复：**
> [Testflight SDK 和 iOS 模拟器 - 如何使用？](https://stackoverflow.com/questions/10380331/testflight-sdk-and-ios-simulator-how-to-use)

我正在努力在 iOS 模拟器上使用 Testflight。这甚至可能吗？似乎模拟器无法安装证书。有没有其他方法可以在模拟器上使用 Testflight？

# .net - 登录成功后也无法拉取数据

> ID：11224174
> 
> 赞同：3
> 
> 时间：2012-06-27T10:29:53.583
> 
> 标签：.net, rets

我正在使用 libRETS 客户端库从 RETS 服务器中提取数据。libRETS 提供的示例应用程序不适合我。登录 RETS 服务器成功，它返回以下响应给我。`<?xml version="1.0"?> -<RETS ReplyText="Operation Successful" ReplyCode="0"> <RETS-RESPONSE> MemberName=INTERNAL RETS User=***** Broker=***** MetadataVersion=1.00.00025 MetadataTimestamp=2012-05-30T21:36:03 MinMetadataTimestamp=2012-05-30T21:36:03 TimeoutSeconds=1800000 Login=/rets/login Logout=/rets/logout X-Selector=/rets/logselector </RETS-RESPONSE> </RETS>` 但是当我尝试搜索任何东西时，我收到以下错误

```
Invalid operation: null URL. Check login capability URL list. 
```

我检查了功能列表，它为搜索 url 提供了空字符串。我是否遗漏了某些内容，或者 RETS 服务器不允许通过我的帐户进行搜索，因为从登录响应中可以清楚地看出其中搜索 url 节点丢失。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:02:56.357

最后，MLS 的技术人员确认我客户的帐户没有搜索数据的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:34:46.317

您需要在此处查阅 RETS 规范：[http](http://rets.org/documentation) ://rets.org/documentation 。

您最有可能使用的两个命令是 Search（用于属性数据）和 GetObject（用于图片）

获取列表状态为活动的所有住宅的财产数据的示例查询：（您的 RETS 服务器将具有与这些不同的字段名称）

查询 = (LIST_STATUS=ACT) PropertyClass = RES

{RETS 服务器 URL} + /Search.asmx/Search?SearchType=Property&Class= + {PropertyClass} + &QueryType=DMQL2&Query= + {query} + &Format=COMPACT-DECODED&Limit=50

# actionscript-3 - Flex：如何仅处理组件而不是组件内的子级的focusouthandler

> ID：11224179
> 
> 赞同：0
> 
> 时间：2012-06-27T10:30:10.153
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我只想将焦点处理程序处理到我想听的组件，而不是处理该组件内部的子项。示例我在该 vgroup 容器中有一个 vgroup 我有 UI 控件，如 TextInput、TextArea、ComboBox 并且我想监听 VGroup 的焦点，所以我为 VGroup 保留了 focusoutHandler 但是当我将焦点从 textinput 更改为 textarea 或组合框 focusoutHandler 被调用.如何只为 VGroup 提供 focusOut。

```
<s:VGroup id="vGroup" focusOut = vGroupFocusOutHandler(event)>
   <s:TextInput />
   <s:TextArea/>
   <s:ComboBox/>  
<s:VGroup/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:15:19.393

您必须确保用户关注的对象不是 VGroup 的子对象（直接或间接）。如果*是*孩子，我们什么都不做；如果不是，我们就做必须做的事情。

就是这样：

```
<s:VGroup id="vGroup" focusOut="handleFocusOut(event)">
    <s:TextInput />
    <s:TextArea />
    <s:ComboBox />  
</s:VGroup> 
```

.

```
private function handleFocusOut(event:FocusEvent):void {
    //only do something if we focus out of vGroup
    if (!isInVGroup(event.relatedObject)) {
        trace(event);
    }
}

private function isInVGroup(el:InteractiveObject):Boolean {
    if (!el || !el.parent) return false;

    var parent:DisplayObjectContainer = el.parent;
    while (parent != vGroup && parent != stage) {
        parent = parent.parent;
    }

    return parent == vGroup;
} 
```

`relatedObject`属性是用户关注的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T19:12:42.613

您可以在事件处理程序代码中尝试此操作：

```
private function handleFocusOut(event:FocusEvent):void {
    //only do something if we focus out of vGroup
    if (!this.contains(event.relatedObject)) {
        trace(event);
    }
} 
```

# svn - svn 复制目录

> ID：11224183
> 
> 赞同：0
> 
> 时间：2012-06-27T10:30:15.310
> 
> 标签：svn

我碰巧在版本化目录之外修改或生成文件或整个目录树。

问题是，每当我将树复制回 svn-versioned 目录（例如 MacOSX 中的 Finder）时，.svn 目录都会被覆盖，Subversion 开始抱怨。有什么解决办法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:26:43.870

您的问题的答案是使用 3-URL-merge

**svn_load_dirs.pl**

请参阅这些具有极其相似主题的问题：

*   [在颠覆中替换整个目录树的最佳方法](https://stackoverflow.com/questions/192915/best-way-to-replace-a-whole-directory-tree-in-subversion)（关于 svn_load_dirs.pl）

*   [svn_load_dirs.pl 有什么替代品吗？](https://stackoverflow.com/questions/1322268/are-there-any-alternatives-to-svn-load-dirs-pl)（3-URL 合并）

**注意：**简单地在新版本上复制目录*不会*删除在当前版本中删除的文件。这些文件将*保持不变*，这至少是令人困惑的，大多数时候是烦恼，有时甚至是错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:37:29.680

可以在版本化目录之外修改文件并稍后复制回来。但是，版本控制的目录包含有关其包含的文件的隐藏数据，并且覆盖目录是行不通的。

我认为没有充分的理由在版本目录之外工作，作为结论，我鼓励您阅读 SVN 书籍，尤其是“移动”部分：[http ://svnbook.red-bean.com/en/1.1/ re18.html](http://svnbook.red-bean.com/en/1.1/re18.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:46:24.720

使用一些重要的实用程序（例如在 Windows 上我使用[Total Commander](http://www.ghisler.com/)，我希望 MAC 存在这样的实用程序）。此类工具具有允许您指定要复制的内容和要跳过的内容的选项。如果迫不得已 - 编写一个简单的 shell 脚本来复制所有内容，但 .svn 目录。

此外，SVN 1.7 工作副本格式在正常情况下仅在您的工作副本的顶层具有 .svn。因此切换到 1.7 可能会在一定程度上简化您的工作流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:46:42.523

切换到 svn 客户端 v1.7 并将工作副本更新为 1.7 格式。它将所有元数据保存在 woking 副本根文件夹的单个子文件夹中。希望对您的问题有所帮助。

[Subversion 1.7 工作副本元数据存储改进](http://subversion.apache.org/docs/release-notes/1.7.html#wc-ng)

# .net - 上下文切换时间是否包含在线程量子时间中？

> ID：11224186
> 
> 赞同：1
> 
> 时间：2012-06-27T10:30:23.890
> 
> 标签：.net, multithreading, context-switch

我的意思是如果线程的量子时间是 20 毫秒，那么 20 的一些时间（15 毫秒）用于上下文切换，而其他时间（5 毫秒）用于执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:17:58.423

这是一个实现细节。

Linux 上发生的情况是，当进程/线程调度程序将 CPU 分配给线程时，该线程被视为正在运行。它执行的从内核模式切换回用户模式的代码被认为是代表该进程/线程执行的内核代码，因此上下文切换时间被视为线程/进程运行时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:21:51.057

我会转储任何平均花费 75% 时间进行上下文切换的操作系统。当许多优先线程通过 I/O 中断/信号以不幸的、快速的顺序准备好并因此导致准备好的线程集发生“顺序”变化时，我只会期望这种基于传递的负载。

最好是开发人员/海报在提及抢占式内核时不再经常使用“量子”和“时间片”等术语。除了在严重超载的盒子上，滴答中断仅对超时其他阻塞调用和睡眠间隔有用。

无论如何，谁想出了“量子”这个术语？“量子”是不可分割的，而 99.9% 的家庭线程大部分时间都在等待 I/O 或彼此等待，运行时间少于滴答周期，立即分配一个内核并在它们准备好时运行并且几乎没有经历过仅仅因为他们的“时间片”结束而被窥视。

“时间片”听起来像是 60 年代的东西，而不是在 2012 年，抢占式内核快速响应驱动程序中断/信号并立即使那些等待准备/运行的线程/s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T09:41:42.467

没有“.NET 中的上下文切换”之类的东西，因为 .NET 不是操作系统，所有那些与线程相关的 CLR 库只是围绕操作系统 API 的包装器。

所以问题应该是这样的：“Windows 上的上下文切换需要多长时间？”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-20T15:32:00.977

我想这取决于实现细节。

第十版“操作系统概念”（Silberschartz，Gagne，Galvin）在解释循环调度（第 210 页）时说：

> “CPU 调度程序从就绪队列中选择第一个进程，设置一个计时器在 1 个时间段后中断，然后调度该进程。”

第 203 页定义的调度流程包括：

*   上下文切换
*   切换到用户模式
*   跳到电脑

还有一些语句表明上下文切换包含在时间片或时间片中。例如，再次在 RR 中，它说：

> “每个进程必须等待不超过 (n-1) xq 个时间单位，直到它的下一个时间片。”

# java - 我应该使用哪种类型的 jdk 来开发我的应用程序？

> ID：11224187
> 
> 赞同：0
> 
> 时间：2012-06-27T10:30:25.660
> 
> 标签：java, openjdk

如果我使用 openjdk 开发 Restfull Web 服务，我能否在 openjdk 和 oracle jdk 中部署和运行应用程序？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:34:56.160

理想情况下是的，但您可能会不时发现一些奇怪的行为。

检查[如果我从 Sun JDK 切换到 OpenJDK，我需要为哪些意外做好准备？](https://stackoverflow.com/questions/2236661/for-which-surprises-do-i-have-to-prepare-myself-if-i-switch-from-sun-jdk-to-open)进行一些额外的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:34:56.653

您可以轻松运行，请阅读[https://stackoverflow.com/questions/1977238/why-should-i-use-the-oracle-jdk-over-the-openjdk-or-vice-versa](https://stackoverflow.com/questions/1977238/why-should-i-use-the-oracle-jdk-over-the-openjdk-or-vice-versa) Oracle JDK 和 OpenJDK 差不多除了 Oracle JDK 包含很少的闭源组件外，其他相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:41:17.827

一般是的。如果使用 restful 的东西，你肯定会使用一些库。您可能会使用 Oracle jdk 附带的不同版本，并且必须使用背书机制。尽管在现代应用服务器上这很容易，但您应该做好准备 :)

# php - PHP 编码输入 Web 服务 XML 中的特殊字符

> ID：11224192
> 
> 赞同：0
> 
> 时间：2012-06-27T10:30:39.523
> 
> 标签：php

用户在我的 PHP 代码中调用 Web 服务 API，但没有正确编码输入（如 & 符号等），所以因为胡说八道（我不能在这里使用 b* 词，但你知道开发人员不在乎关于政治或感情，你做对与否！）修复它是我的问题......在我尝试用 PHP 解析输入 XML 之前，如何对其进行编码？

我为 & 符号做了一个字符串替换，但是这些人（a* 词）可以使用的宇宙中有更多的无效字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:35:00.853

如果没有更多细节和代码，很难准确地说出您需要什么，但请查看`urlencode()`或`htmlentities()`或`htmlspecialchars()`

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

[http://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

[http://uk3.php.net/manual/en/function.htmlspecialchars.php](http://uk3.php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:44:12.243

我几乎完全确定在 php.ini 中没有内置功能可以做到这一点。因为 php 的模块需要的最低限度是......一个正确编码的 xml 文件（例如对于 libxml / libdom）

编码不当的文件很难清理，因为您必须考虑“应该编码什么”和“不应该编码什么”

您需要标记您的输入 xml，然后您需要检查每一段并清理错误的代码段，例如属性中包含的字符 "

这是一项艰苦的工作，那么您可以做的更好的事情是修复或修复源 xml

恕我直言！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:51:19.080

我建议返回 HTTP 400 错误，这意味着“由于语法错误，服务器无法理解请求”。( [RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.1) )

由于您期待有效的 XML，您可以使用 将其加载到[DOMDocument](http://uk3.php.net/domdocument)中`loadXml`并使用结果`libxml_get_errors`来查看 XML 错误（我`libxml_use_internal_errors(true)`也建议使用）。

您可以在响应正文中返回 libxml 错误（例如“请求中未转义的'&'”等）。

# c# - WPF 中的 Web 浏览器控件

> ID：11224193
> 
> 赞同：1
> 
> 时间：2012-06-27T10:30:46.580
> 
> 标签：c#, wpf, mvvm, webbrowser-control, caliburn.micro

我的目标类似于[这个问题](https://stackoverflow.com/questions/1895008/c-wpf-interaction-with-web-browser-control)
但我仍然没有得到我的问题的答案

所以，我需要制作一个具有所见即所得 HTML 编辑支持的应用程序来设计和生成报告模板。和上面的问题一样，我在 WPF 中使用了 WebBrowser 控件。最大的问题是 WPF WebBrowser 在 designMode 设置为 on 后总是将 null 设置为 HTML body。所以我将 WinForm WebBrowser 托管到我的应用程序中。并且设置或获取要从 WebBrowser 处理的 HTML 文档非常困难。

**问：**

1.  有没有办法使用 WPF 实现这一点（使用 WebBrowser 控件的 HTML 编辑器）而不更改 WinForm ？
2.  或者，如果没有。是否有任何解决方法、文章、代码或任何东西可以用可视化编辑器制作所见即所得的 HTML 编辑器？

**更新：**
我有这 2 个用于 MVVM 的附加属性。所以我可以在应用程序启动时使用 HTMLSource 获取/设置 HTML 并设置设计模式。

**是设计模式**

```
public static readonly DependencyProperty IsDesignModeProperty =
    DependencyProperty.RegisterAttached("IsDesignMode", typeof (Boolean), typeof (WebBrowserHelper),
                                        new UIPropertyMetadata(false, IsDesignModePropertyChanged));

public static Boolean GetIsDesignMode(DependencyObject obj)
{
    return (Boolean)obj.GetValue(IsDesignModeProperty);
}

public static void SetIsDesignMode(DependencyObject obj, Boolean value)
{
    obj.SetValue(IsDesignModeProperty, value);
}

public static void IsDesignModePropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
    WebBrowser browser = obj as WebBrowser;
    if (browser != null)
    {
        Boolean designMode = (Boolean) args.NewValue;
        if(designMode)
        {
            browser.LoadCompleted += (s, e) =>
            {
                var htmlDoc = (s as WebBrowser).Document as IHTMLDocument2;
                htmlDoc.body.setAttribute("contenteditable", "true");
                htmlDoc.designMode = "On";
            };
        }
        else
        {
            browser.LoadCompleted += (s, e) =>
            {
                var htmlDoc = (s as WebBrowser).Document as IHTMLDocument2;
                htmlDoc.body.setAttribute("contenteditable", "false");
                htmlDoc.designMode = "Off";
            };
        }
    }
} 
```

**HTMLSource**

```
public static readonly DependencyProperty HTMLSourceProperty =
    DependencyProperty.RegisterAttached("HTMLSource", typeof (String), typeof (WebBrowserHelper),
                                        new UIPropertyMetadata(null, HTMLSourcePropertyChanged));

public static String GetHTMLSource(DependencyObject obj)
{
    return (String)obj.GetValue(HTMLSourceProperty);
}

public static void SetHTMLSource(DependencyObject obj, String value)
{
    obj.SetValue(HTMLSourceProperty, value);
}

public static void HTMLSourcePropertyChanged(DependencyObject o, DependencyPropertyChangedEventArgs args)
{
    WebBrowser browser = o as WebBrowser;
    if (browser != null)
    {
        browser.NavigateToString(args.NewValue as String);
    }
} 
```

**看法**

```
<UserControl x:Class="Delay.View.LayoutView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:browser="clr-namespace:Delay.Helper"
             xmlns:cal="http://www.caliburnproject.org"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity">
    <UserControl.Resources>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="100" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Margin" Value="2.5,0" />
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <StackPanel>
                            <ContentPresenter Content="{TemplateBinding Content}"
                                              TextBlock.FontSize="15" />
                        </StackPanel>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Grid Background="Lavender">
        <DockPanel>
            <TextBlock HorizontalAlignment="Center" Text="Layout Designer"
                       DockPanel.Dock="Top" FontSize="20" />
            <WebBrowser Name="webBrowser" HorizontalAlignment="Stretch" DockPanel.Dock="Top" Margin="8" Height="435"
                        browser:WebBrowserHelper.HTMLSource="{Binding HtmlPage}" browser:WebBrowserHelper.IsDesignMode="True" />
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" HorizontalAlignment="Center">
                <StackPanel Orientation="Vertical" Margin="5,0">
                    <ComboBox ItemsSource="{Binding LayoutTags}" SelectedItem="{Binding SelectedTag}"
                              HorizontalAlignment="Stretch" Margin="0,5" MinWidth="100">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock FontSize="12" Text="{Binding TagName}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <ListBox ItemsSource="{Binding LayoutValueTypes}" SelectedItem="{Binding SelectedType}"
                             Width="{Binding ElementName=cmbTag, Path=ActualWidth}" Height="70">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock FontSize="12" Text="{Binding TypeName}" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal">
                        <CheckBox Name="IsDesignMode" Content="Design Mode" TextBlock.FontSize="12">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Checked">
                                    <cal:ActionMessage MethodName="DesignModeOnOff">
                                        <cal:Parameter Value="{Binding ElementName=webBrowser}" />
                                        <cal:Parameter Value="{Binding IsDesignMode}" />
                                    </cal:ActionMessage>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </CheckBox>
                    </StackPanel>
                    <Button Name="PutComponent" Style="{StaticResource ButtonStyle}"
                         Content="Put" />
                    <Button Name="SaveLayout" Style="{StaticResource ButtonStyle}"
                        Content="Save" />
                </StackPanel>
            </StackPanel>
        </DockPanel>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:34:21.717

您是否尝试了一些开源替代方案而不是 WInForms 替代方案？

我认为这个具有很好的交互性，并且也可以将 javascript 回调处理到 wpf 中。

[http://wpfchromium.codeplex.com/](http://wpfchromium.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:31:22.060

我编写了一个非常简单的 WPF 应用程序，它使用嵌入的资源作为 HTML，并包含以下代码：

```
 Stream s = GetType().Assembly.GetManifestResourceStream("WpfApplication5.HTMLPage1.htm");
  webBrowser1.NavigateToStream(s);
  IHTMLDocument2 doc = webBrowser1.Document as IHTMLDocument2;
  doc.designMode = "On"; 
```

该代码按预期工作，我可以编辑页面的内容 - 一旦我按照您的建议将其设置为 designMode，它就不会被取消。也许从上面的代码开始，检查你是否可以让它工作。

# ruby-on-rails - 任何人都可以帮我解决这个问题

> ID：11224194
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:30:51.340
> 
> 标签：ruby-on-rails, git, bundler

Git 错误：`git clone 'https://github.com/JangoSteve/remotipart.git' "/home/ubuntu/.bundler/cache/git/remotipart-46f8bf276d5ffef4f196efc85f86445ee22983a2" --bare --no-hardlinks`目录 /home/ubuntu/Desktop/1_files/imageeditorservicespro 中的命令失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:40:36.770

您的 git 显然没有 http/https 克隆所需的 curl 绑定。您可以将 gemfile 更改为`git://github.com/JangoSteve/remotipart.git`显式使用，而不仅仅是`github.com/JangoSteve/remotipart.git`（ git:// 部分很重要）

或者，如果您想要一个可以处理 http 的 git 版本，请尝试通过 aptitude 或从源代码使用 curl 重新安装 git：

通过 apt：

```
sudo apt-get remove git-core
apt-get install curl libcurl4-openssl-dev # or whatever your curl dev package is
sudo apt-get install git-core 
```

从来源：

```
sudo apt-get remove git-core
sudo apt-get build-dep git-core

# download and extract the git sources from https://github.com/git/git/tags
# cd into the source directory
./configure --with-curl --with-expat
make
sudo make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:32:17.970

如果你想克隆它，试试这个

```
 git clone git://github.com/JangoSteve/remotipart.git 
```

# python - 我的 python 元搜索引擎需要使用框架吗？

> ID：11224200
> 
> 赞同：0
> 
> 时间：2012-06-27T10:31:18.183
> 
> 标签：python, search-engine

我正在构建一个元搜索引擎，想知道是否需要一个 python 框架？我一直在寻找 web2py 和 django ，对于我需要的东西，它们似乎都过大了。我的元搜索的基本思想如下：

1.  用户在搜索栏中输入数据

2.  搜索查询经过预处理（标记化）

3.  标记化查询通过 API 发送到 3 个搜索引擎。布尔项将在用户指定的地方被识别（例如汽车和发动机）

4.  结果被返回并存储在字典和/或多个列表中。如果可能的话，可能会列出

5.  结果使用马尔可夫链算法聚合并输出给用户

我打算将 HTML 用于前端，将 python 用于后端。如果我不需要这个框架，还有什么需要考虑的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:38:13.373

这实际上取决于您所说的“框架”是什么意思。Python 有一些小的 HTTP 框架，例如[Flask](http://flask.pocoo.org/)、[Bottle](http://bottlepy.org/docs/dev/)或[CherryPy](http://cherrypy.org/)。与原始 CGI、WSGI 或您所拥有的相比，它们使进行任何类型的 HTTP 处理变得更加容易。当然你也可以用它们处理表单，所以你不需要 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:55:51.920

这取决于......你*不需要*一个框架，但它会让你的工作更轻松，理论上你可以使用 python 附带的嵌入式服务器，尽管你必须在上面实现很多功能它。

根据您的描述，我建议您使用像[Flask](http://flask.pocoo.org/)这样的微框架。你可以使用像 Bottle 这样更简单的东西，但由于你确实需要 HTML 表单，可能还需要一个数据库，如果你是初学者，Flask 会让你更容易，因为它已经包含了一个模板引擎（[Jinja2](http://jinja.pocoo.org/docs/)）和[SQLAlchemy](http://www.sqlalchemy.org/)的钩子。

我认为这将是一个很好的折衷方案，既让框架负责一些工作，又不使用像 Django 这样完全矫枉过正的东西。

学习曲线一点也不陡峭，而且我认为它比不使用任何框架所花费的时间要少得多，因为您可以在示例中看到如何做大部分您需要的事情，而且它并没有臃肿到无法使用的地步事情开始妨碍你。

# java - Java - 线程“主”java.lang.Error 中的异常：未解决的编译问题

> ID：11224201
> 
> 赞同：4
> 
> 时间：2012-06-27T10:31:23.420
> 
> 标签：java, mysql, database, jakarta-ee, jdbc

我的 JDBC 代码有一些问题。我正在尝试通过 MySQL 连接，但它给了我一个错误。如果您有时间，我的错误日志如下所示。

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    BLOB cannot be resolved to a type
    BLOB cannot be resolved to a type

    at serialize.SerializeDeserialze.main(SerializeDeserialze.java:73) 
```

我的代码如下。我正在使用`mysql-connector-java-5.1.20.jar`驱动程序：

```
package serialize;
/*
 By vivek
*/

import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import oracle.sql.BLOB;

/****
CREATE TABLE java_objects (object_id NUMBER, object_name varchar(128), object_value BLOB DEFAULT empty_blob(), primary key (object_id));
SQL> desc java_objects;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 OBJECT_ID                                 NOT NULL NUMBER
 OBJECT_NAME                                        VARCHAR2(128)
 OBJECT_VALUE                                       BLOB

SQL> select SEQUENCE_NAME, MIN_VALUE, MAX_VALUE, INCREMENT_BY, LAST_NUMBER from  user_sequences;

SEQUENCE_NAME                   MIN_VALUE  MAX_VALUE INCREMENT_BY LAST_NUMBER
------------------------------ ---------- ---------- ------------ -----------
ID_SEQ                                  1 1.0000E+27            1          21
JAVA_OBJECT_SEQUENCE                    1 1.0000E+27            1           1

*/
public class SerializeDeserialze {
  public static void main(String[] args) throws Exception {
    String WRITE_OBJECT_SQL = "BEGIN "
        + "  INSERT INTO java_objects(object_id, object_name, object_value) "
        + "  VALUES (?, ?, empty_blob()) " + "  RETURN object_value INTO ?; " + "END;";
    String READ_OBJECT_SQL = "SELECT object_value FROM java_objects WHERE object_id = ?";

    Connection conn = getOracleConnection();
    conn.setAutoCommit(false);
    List<Object> list = new ArrayList<Object>();
    list.add("This is a short string.");
    list.add(new Integer(1234));
    list.add(new java.util.Date());

    // write object to Oracle
    long id = 0001;
    String className = list.getClass().getName();
    CallableStatement cstmt = conn.prepareCall(WRITE_OBJECT_SQL);

    cstmt.setLong(1, id);
    cstmt.setString(2, className);

    cstmt.registerOutParameter(3, java.sql.Types.BLOB);

    cstmt.executeUpdate();
    BLOB blob = (BLOB) cstmt.getBlob(3);
    OutputStream os = blob.getBinaryOutputStream();
    ObjectOutputStream oop = new ObjectOutputStream(os);
    oop.writeObject(list);
    oop.flush();
    oop.close();
    os.close();

    // Read object from oracle
    PreparedStatement pstmt = conn.prepareStatement(READ_OBJECT_SQL);
    pstmt.setLong(1, id);
    ResultSet rs = pstmt.executeQuery();
    rs.next();
    InputStream is = rs.getBlob(1).getBinaryStream();
    ObjectInputStream oip = new ObjectInputStream(is);
    Object object = oip.readObject();
    className = object.getClass().getName();
    oip.close();
    is.close();
    rs.close();
    pstmt.close();
    conn.commit();

    // de-serialize list a java object from a given objectID
    List listFromDatabase = (List) object;
    System.out.println("[After De-Serialization] list=" + listFromDatabase);
    conn.close();
  }

  private static Connection getHSQLConnection() throws Exception {
    Class.forName("org.hsqldb.jdbcDriver");
    System.out.println("Driver Loaded.");
    String url = "jdbc:hsqldb:data/tutorial";
    return DriverManager.getConnection(url, "sa", "");
  }

  public static Connection getMySqlConnection() throws Exception {
    String driver = "org.gjt.mm.mysql.Driver";
    String url = "jdbc:mysql://localhost/demo2s";
    String username = "oost";
    String password = "oost";

    Class.forName(driver);
    Connection conn = DriverManager.getConnection(url, username, password);
    return conn;
  }

  public static Connection getOracleConnection() throws Exception {
    String driver = "oracle.jdbc.driver.OracleDriver";
    String url = "jdbc:oracle:thin:@localhost:1521:databaseName";
    String username = "userName";
    String password = "password";

    Class.forName(driver); // load Oracle driver
    Connection conn = DriverManager.getConnection(url, username, password);
    return conn;
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T10:44:13.310

当您使用 Eclipse 作为 IDE 并尝试运行甚至无法编译的代码时，会发生此错误。检查 Eclipse 中的*Problems*视图，并在执行应用程序之前修复编译错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:40:19.577

您正在使用 MySQL 驱动程序，但您的类使用 Oracle BLOB 类。要么使用 Oracle JDBC 驱动程序，要么对 BLOB 使用不同的类。

由于您的代码提到了 HSQL、MySQL 和 Oracle，您可能希望摆脱特定于 Oracle 的 BLOB 实现。

# php - 在 XSD 中允许 xml:space="preserve" 进行验证

> ID：11224203
> 
> 赞同：3
> 
> 时间：2012-06-27T10:31:31.103
> 
> 标签：php, xml, xsd, xsd-validation

我正在尝试使用我编写的架构验证 xml 文件，但它的行失败：

```
Element 'Route', attribute '{http://www.w3.org/XML/1998/namespace}space': The attribute '{http://www.w3.org/XML/1998/namespace}space' is not allowed. 
```

XML 文件有时包含以下内容：

```
 <Route xml:space="preserve">

</Route> 
```

这显然是导致问题的原因，我可以对我的 xsd 文件做些什么来解决这个问题？

这是我的 XSD，所有不相关的东西都被删除了

```
<?xml version="1.0" standalone="yes"?>
<xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="NewDataSet">
      <xs:element name="Route" type="xs:string" minOccurs="0" /> 
      <xs:element name="FurtherRequirements" type="xs:string" minOccurs="0" /> 
```

等等等等

感谢所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T13:50:00.177

您必须`Route`从 type更改`xs:string`为 type `string-with-xml-space`，其中`string-with-xml-space`是具有简单内容的复杂类型，定义如下：

```
<xs:complexType name="string-with-xml-space">
  <xs:complexContent>
    <xs:extension base="xs:string">
      <xs:attribute ref="xml:space"/> 
```

您还需要`xs:import`XML 命名空间的架构：

```
<xs:import namespace='http://www.w3.org/XML/1998/namespace'  
           schemaLocation='http://www.w3.org/2001/xml.xsd'/> 
```

# c - 为什么数组大小为1

> ID：11224204
> 
> 赞同：1
> 
> 时间：2012-06-27T10:31:32.393
> 
> 标签：c, arrays, sizeof

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

如果值在数组中，我正在尝试编写一个返回 1s 的函数。这是代码：

```
int inArrayInt(int iVal, int iArray[])
{
    int i;
    int arrayL = sizeof(*iArray) / sizeof(int);
    int flag = 0;
    for(i=0; i < arrayL; i++)
    {
        if(iVal == iArray[i])
        {
            flag = 1;
        }
    }
    return flag;
} 
```

问题是`arrayL = sizeof(*iArray) / sizeof(int);`即使数组包含 20 个元素，它也总是计算为 1。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:34:28.387

因为当您将数组作为参数传递给函数时，它会衰减为指针。所以`sizeof(array)`不会给你数组的大小，而是指针的大小。

您可以将数组大小设置为 a `extra argument`，也可以将数组作为 a 传递，`reference`以便 sizeof(array) 为您提供正确的大小。（此处详述：[什么是数组衰减？](https://stackoverflow.com/questions/1461432/what-is-array-decaying)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:37:13.027

作为参数`int iArray[]`相当于`int *iArray`.

所以当你这样做时

```
int arrayL=sizeof(*iArray)/sizeof(int); 
```

你实际上在做

```
int arrayL=sizeof(int)/sizeof(int); 
```

这是相同的大小。

您需要添加一个用于传递尺寸信息的参数。

```
int inArrayInt(int iVal, int iArray[], size_t numel){
  ...
  for(i=0;i<numel;i++){
    ...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:32:32.173

您传递给函数的是指向数组的指针，无法知道大小。指针的大小是 int 的大小，因此`1`.

如果要对其进行迭代，则需要在函数的参数中传递数组的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T10:43:45.127

我会添加一个带有数组大小的额外参数：

```
int inArrayInt(int iVal, int* iArray, int sizeOfArray)
{
    int i;

    for(i = 0; i < sizeOfArray; i++)
    {
        if(iVal == iArray[i])
        {
            return 1;
        }
    }

   return 0;
} 
```

然后使用您启动数组的大小调用函数：

```
int myArray[100];  

if (inArrayInt(42, myArray, 100))
   //returned true 
```

# html - Firefox 中的 CSS box-shadow 显示模糊的顶部边框/阴影

> ID：11224206
> 
> 赞同：0
> 
> 时间：2012-06-27T10:31:38.530
> 
> 标签：html, css

我设置了一个示例来说明我的问题：http: [//jsfiddle.net/XZeYK/5/](http://jsfiddle.net/XZeYK/5/)

如果您在 Chrome 中查看此内容，则很好。然而，Firefox 在#navigation 元素的顶部添加了一个不需要的边框。我可以通过设置一个负的传播半径来摆脱它，但这会搞砸我的圆角。

有任何想法吗？

谢谢，蒙蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:37:52.103

这是小提琴：

[http://jsfiddle.net/XZeYK/15/](http://jsfiddle.net/XZeYK/15/)

将此更改为影子类：

```
box-shadow: 1px 4px 4px -1px gray; 
```

而且我认为不需要 mozilla 或 webkit 相关的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:50:33.783

我最终为 .shadow 类选择了以下内容：

```
box-shadow: 3px 4px 4px -2px gray;
-moz-box-shadow: 3px 4px 4px -2px gray;
-webkit-box-shadow: 3px 4px 4px -2px gray;
... <IE specific rules>... 
```

需要 -moz 和 -webkit 扩展来支持旧版本。box-sizing 与我的实际应用程序混淆了，所以我将它们保持原样（所以省略了这些规则）。

我会将两者都标记为已接受，因为你们都帮助了我。

谢谢，蒙蒂

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T10:41:36.293

嗨，实际上它是由于您定义的**box-shadow ，所以我只是减少了 box-shadow 属性的****模糊值**，现在它工作正常。

**CSS**

```
.shadow {
    -moz-box-shadow: 0px 3px 4px -1px gray;
    -webkit-box-shadow: 0px 3px 4px -1px gray;
    box-shadow: 0px 3px 4px -1px gray;
    /* For IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color='#808080')";
    /* For IE 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color='#808080');
} 
```

我希望这将帮助您查看演示：-

[http://jsfiddle.net/XZeYK/18/](http://jsfiddle.net/XZeYK/18/)

我们可以定义**box-shadow**属性的五个值：-

如示例：`-moz-box-shadow: 3px 3px 5px 6px #ccc;`

1.  阴影的水平偏移量，正数表示阴影在盒子的右边，负数表示阴影在盒子的左边。

2.  阴影的垂直偏移量，负数表示 box-shadow 将在 box 上方，正数表示阴影将在 box 下方。

3.  模糊半径（可选），如果设置为 0，阴影会很锐利，数字越大，越模糊。

4.  散布半径（可选），正值增加阴影的大小，负值减小大小。默认值为 0（阴影与模糊大小相同）。

5.  颜色

# android - Spinner onitemselected 监听器问题

> ID：11224207
> 
> 赞同：0
> 
> 时间：2012-06-27T10:31:43.943
> 
> 标签：android

我尝试在按下按钮时动态创建微调器。

这就是我所做的：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.leave_balance);

spinner = new Spinner(this);
    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item, list);
    spinner.setAdapter(spinnerArrayAdapter);

Button  b = (Button)findviewbyid(R.id.button1);
b.setonclicklistener(new Onclicklistener){
   public void onClick(View v) {
            spinner.performClick();

        }
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            Toast.maketext(context,"selectedspinner",Toast.LENGTH_SHORT).show();

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
}
} 
```

我的问题是我无法得到那个吐司，即微调器 onitemselectedlistner 没有触发。

任何建议将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:36:53.893

Spinner 需要添加一个父级才能调用`onItemSelected`

1.  在 XML 中添加旋转器并将宽度和高度设置为 0dp（可以设置可见性不可见不消失）。

2.  使用`findViewById`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T10:36:44.207

spinner.performClick() 调用 onclicklistener 而不是 onItemclicklistener。

使用 spinner.performitemclick(.....);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:37:48.710

试试这个。

```
onCreate()
{

spinnerLocation = (Spinner)findViewById(R.id.spinnerSettingLocation);

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.location_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerLocation.setAdapter(adapter);
    spinnerLocation.setOnItemSelectedListener(new MyOnLocationSpinnerItemSelectedListener());

}

public class MyOnLocationSpinnerItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent,
        View view, int pos, long id) {
        Toast.maketext(context,"selectedspinner" + pos,Toast.LENGTH_SHORT).show();

    }

    public void onNothingSelected(AdapterView parent) {
      // Do nothing.
    }
} 
```

# mysql - NHibernate：按 ID 集合排序结果

> ID：11224208
> 
> 赞同：1
> 
> 时间：2012-06-27T10:31:51.790
> 
> 标签：mysql, hibernate, nhibernate, case

好的，这是我对 NHibernate 的问题。

我有一组动态变化的 ID，所以我无法硬编码这些值。使用这些 ID，我需要使用这些 ID 订购查询。

要订购的一组 ID（类型“长”）（这些会动态变化）：

```
{8, 6, 23, 3, 7, 1, 9} 
```

从这些说，我从我的查询中得到以下结果（因为它会有其他 WHERE 子句）：

```
{6, 7, 23, 8, 1} 
```

最后，应该使用开头指定的一组 ID 对这些结果进行排序，以便看起来像这样：

```
{8, 6, 23, 7, 1} 
```

我不能在内存中执行此操作的原因是因为查询也有一个 .take() 值（例如 10 行），因此必须在结果集受限之前在查询中进行排序，否则我可能会丢失数据.

在 MySQL 中，相当于这样一个查询：

```
ORDER BY CASE ID
WHEN 8 THEN 1
WHEN 6 THEN 2
WHEN 23 THEN 3
WHEN 3 THEN 4
WHEN 7 THEN 5
WHEN 1 THEN 6
WHEN 9 THEN 7
ELSE 8 
```

需要注意的是，我不能使用 HQL 或 LINQ。一切都是使用 Lambda 表达式完成的。我正在使用 NHibernate v3.3.0.4000、.NET 4.0 (C#) 和 MySQL Server v5.5.16。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:38:38.143

给出一个起点，在 QueryOver/Criteria 上，您可以将订单添加为可以是有条件的投影

```
session.QueryOver<SomeClass>()
    .Where(lambdaExpression)
    .OrderBy(Projections.Conditional(...)) 
```

# c++ - Unsigned int 取负值

> ID：11224210
> 
> 赞同：0
> 
> 时间：2012-06-27T10:31:57.770
> 
> 标签：c++, c

有人可以解释为什么 unsigned int 取负值吗？An`unsigned int`应该只取正值。

来自[维基百科](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)：

> word, long, 双字, longword, int
> 
> 无符号：从 0 到 4,294,967,295，等于 2^32 - 1

```
#include <stdio.h>
typedef unsigned int uint32;

int main()
{
     uint32 i;
     int x = -1;
     i = x%32;
     printf("\n\n Value of uint32 i = %d", i);
     return (0);
} 
```

## 输出：

```
Value of uint32 i = -1 
```

以下是我在 cpp 标准中找到的解释，我无法解释。

> 对于每一种有符号整数类型，都存在对应的（但不同的）无符号整数类型：“unsigned char”、“unsigned short int”、“unsigned int”和“unsigned long int”，每一种都占用相同的数量存储空间，并且与相应的有符号整数类型具有相同的对齐要求 (3.9) 40) ；也就是说，每个有符号整数类型都具有与其对应的无符号整数类型相同的对象表示。有符号整数类型的非负值范围是对应无符号整数类型的子范围，每个对应的有符号/无符号类型的值表示应相同。
> 
> 4 声明为无符号的无符号整数应遵守算术模 2n 的定律，其中 n 是该特定整数大小的值表示中的位数
> 
> 40) 关于类型和指定它们的类型说明符序列之间的对应关系，请参见 7.1.5.2。
> 
> 41) 这意味着无符号算术不会溢出，因为不能由得到的无符号整数类型表示的结果以比得到的无符号整数类型可以表示的最大值大一的数字为模减少。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T10:34:07.020

您使用了错误的标志`printf`。应该是`%u`。

`printf("\n\n Value of uint32 i = %u", i);`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T10:35:14.747

可以用许多不同的方式解释相同的位模式。有符号整数和无符号整数之间的唯一区别在于解释它们的位模式的方式。您的代码指示`printf`将 unsigned int 解释为有符号，这就是您看到负数的原因。

作为一个实验问题，试试这个：

```
printf("%u\n", -1); 
```

这将产生一个很大的正数 - 与您在帖子中描述的情况直接相反。再一次，`printf`被要求将有符号数解释为无符号数，因此它很乐意将符号扔掉，并像无符号一样打印该值。

# java - 如何运行htmlunit程序

> ID：11224212
> 
> 赞同：0
> 
> 时间：2012-06-27T10:31:59.980
> 
> 标签：java, web-scraping, htmlunit

这是代码。我正在尝试使用 htmlunit 进行网页抓取。这只是“hello world”类型的程序。我无法执行它。

```
import java.io.IOException;
import java.net.MalformedURLException;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.Page;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class test1 {

public static void main() throws FailingHttpStatusCodeException, 
         MalformedURLException, IOException {
    WebClient abc=new WebClient();
    HtmlPage page =abc.getPage("http://google.com");
    String a= page.asText();
    System.out.print(a);
    }
} 
```

![当我尝试运行它时，它会显示这些选项。 不知道选哪个？](../Images/e93f3f32830c7fbfe875b6eaa32478eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T12:10:59.467

首先运行您的 Web 应用程序，然后将此类作为 Junit Test 运行

# jquery - html jquery 函数不起作用，但 replaceWith 起作用

> ID：11224214
> 
> 赞同：0
> 
> 时间：2012-06-27T10:32:01.940
> 
> 标签：jquery, html, replacewith

我有非常奇怪的行为。我有这个代码（我删除了不相关的代码）。

```
$(function() {
        function get_translations() {
            $('#translations tr').not(':eq(0)').remove();
            var item = {
                context: "1: context",
                term: "2: term",
                translation: "3: translation"
            };  

            var tr = $('<tr/>').
                append('<td class="context">' + (item.context || '&nbsp;') + '</td>').
                append('<td class="original-string">' + item.term + '</td>').
                append('<td class="translation translated-string">' + item.translation +
                       '</td>').
                append('<td class="delete-col"><button class="'+
                       'delete translation-delete">X</button></td>').
                data('term', item.term || '').
                data('translation', item.translation || '').
                data('context', item.context || '').
                appendTo('#translations');
        }
        get_translations();

       $('td.translation').live('click', function() {
           var $this = $(this);
           if ($this.find('textarea').length == 0) {
               var text = $this.empty().parent().data('translation');
               //$this.data('content', text).empty();
               $this.html('<tex' + 'tarea>' + text + '</text' +
                 'area><button>Save</button><a href="#" class="_cancel">Cancel</a>');
               //appendTo($this);
           }
       });
       $('td.translation button').live('click', function() {
           var td = $(this).parent();
           var tr = td.parent();
           console.log(td);
           td.html('foo');
           //td.replaceWith('<td class="translation translated-string">foo</td>');
       });
}); 
```

在`$('td.translation button')`处理程序`td.html('foo');`中不起作用，但`td.replaceWith('<td class="translation translated-string">foo</td>');`确实如此。没有错误，它什么也不做。

我尝试使用以下方法重新创建此行为：

```
$(function() {
    $('table').append('<tr><td>:empty</td></tr>');
    $('td').live('click', function() {
        var tr = $(this).parent();
        $(this).html('<textarea></textarea><a class="foo" href="#">a:</a>');
    });
    $('.foo').live('click', function() {
        var td = $(this).parent();
        var tr = td.parent();
        td.html(':empty');
        return false;
    });
}); 
```

但上面的代码工作。

我可以使用`replaceWith`，但我知道为什么`html`功能不起作用。有人知道为什么吗？

**更新**：当我添加这个时，`window.td = td;`我可以从控制台调用 html 并且它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:00:07.320

[在此处查看演示并通过http://jsfiddle.net/QknuZ/2/](http://jsfiddle.net/QknuZ/2/)观看警报（带有`td.html()`）

我希望这能回答您的问题：HTML`html()`将替换元素的内容，而 replaceWith() 替换实际元素。

[http://api.jquery.com/html/](http://api.jquery.com/html/)

[http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

从 DOM中`replaceWith`删除元素，然后再次添加 html。

如果我错了，请纠正我，希望这会有所帮助。

**图片**

![在此处输入图像描述](../Images/16272a8e8dc4182ffe956a94de08ffff.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:13:11.687

使用来自@Tats_innit 的提示，当我单击按钮时它被执行`alert('call')`。`$('td.translation').live('click'`首先它执行按钮处理程序（它更改 html 和警报消息框），然后为 td 调用处理程序并再次创建 textarea。

# visual-studio - 为什么我不能/如何在项目签入之前移动项目的源代码管理位置？

> ID：11224215
> 
> 赞同：3
> 
> 时间：2012-06-27T10:32:02.773
> 
> 标签：visual-studio, tfs

在 TFS 中，我添加了一个 VS 项目（无论我是否愿意，它都会将项目添加到源代码管理中）。我意识到我的位置有误，所以我想将源代码管理文件夹移动到正确的位置。

但是，在项目签入之前，“移动”的 TFS 选项是灰色的。TFS 是否强制我检查它，如果是，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:58:21.877

因为 Move 命令用于已检入 TFS 的现有文件/文件夹。

你有两个选择：

1.  备份您的项目，撤消添加，将您的项目移动到正确的位置并再次添加
2.  将您的项目签入到错误的位置，并在签入后将其移动到正确的位置

# java - 迭代所有名称以“get”开头的方法 - 比较对象

> ID：11224217
> 
> 赞同：13
> 
> 时间：2012-06-27T10:32:07.920
> 
> 标签：java, compare

是否有可能以某种方式迭代对象的每个方法，名称以“get”开头？我想比较两个非常复杂的自定义对象，它们的字段由基于其他自定义对象的数据结构组成。我想要做的是获取每个 get 方法结果的哈希码，并比较每个字段是否相等。

很抱歉，如果不是很理解，如果您有问题，请提出。感谢您的任何帮助和建议

我想到了这样的事情：

```
for(method m : gettersOfMyClass){ 
boolean same = object1.m.hashCode() == object2.m.hashCode() 
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-27T10:38:00.163

是的，这是可能的，实际上很简单：

```
public static void main(String[] args) throws Exception {
  final Object o = "";
  for (Method m : o.getClass().getMethods()) {
    if (m.getName().startsWith("get") && m.getParameterTypes().length == 0) {
      final Object r = m.invoke(o);
      // do your thing with r
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:41:02.033

看起来有些东西要处理反射概念。逆向工程对象

可能这就是你需要的

样本类：

```
class Syndrome{
public void getMethod1(){}
public void getMethod2(){}
public void getMethod3(){}
public void getMethod4(){}
} 
```

主要方法：

```
Syndrome syndrome = new Syndrome();

Method[] methods = syndrome.getClass().getMethods();

for( int index =0; index < methods.length; index++){

if( methods[index].getName().contains( "get")){
    // Do something here
}

} 
```

# ruby - 从 Savon 响应中读取值？

> ID：11224219
> 
> 赞同：3
> 
> 时间：2012-06-27T10:32:13.117
> 
> 标签：ruby, nokogiri, watir, savon

我想`customer.customer_info_id`从以下响应中读取 的值。我的回复还包括命名空间：

```
<Field name="customer.customer_id" value="5403699387967341892"/>
<Field name="**customer.customer_info_id**" value="5403699387967341892"/>
<Field name="customer.customer_since_code" value="1985">
    <Lookup language="EN" value="1985"/>
    <Lookup language="FR" value="1985"/>
</Field> 
```

我尝试了以下方法：

```
# Savon code tried:        

doc = Nokogiri::XML(response.to_xml)
doc.remove_namespaces!
val = doc.xpath("//Field:name" => "Customer.entity_id").to_s
puts "val is: #{val}" 
```

它返回空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:04:55.797

我认为没有必要解析 XML 响应。萨文为你做这件事。您没有提供调用的代码，所以**我认为**它将是*soap*。

```
client = Savon::Client.new do
  wsdl.document = <your url>
end

response = client.request :wsdl, :soap do
  <your parameters go here>
end

# pp response.to_hash

result = response.to_hash[:soap_response][:soap_result][:customer][:customer_info_id] 
```

我经常`pp response.to_hash`用来了解返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:48:05.793

我和 Savon 的结果好坏参半。最终，我正在处理的 WSDL 返回一个`StringWithAttributes`需要解析的类，但在此之前它应该表现得像一个普通的哈希，这意味着你应该能够执行以下操作：

```
client = Savon::Client.new do
  wsdl.document = <your url>
end

response = client.request(:whatever_the_request_is_called) do
  soap.body = { <hash of your parameters> }
end

result = response[:soap_response][:soap_result][:customer][:customer_info_id] 
```

如果您仍然得到空值，请在每个级别上尝试 a `pp response[:soap_response].class`or`.keys`以确保您仍在使用哈希。如果它变成了奇怪的`StringwithAttributes`类，你将不得不解析它。这似乎是在下降到许多层次之后发生的。在这种情况下，您可以执行以下操作：

```
needs_parsing = response.to_hash[:soap_response][:soap_result]

parsed = Nori.parse(needs_parsing) 
```

然后你应该回到一个可导航的散列，你可以用`.class`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:28:01.310

下面使用 Nokogiri 的代码可以读取特定的 xml 元素值：

```
doc=Nokogiri.XML(File.open(File.dirname("your file name here"))

element=doc.at('element_name') #fetch the value of element needed. 
```

# ruby - 如何以编程方式识别数组的结尾

> ID：11224220
> 
> 赞同：0
> 
> 时间：2012-06-27T10:32:14.877
> 
> 标签：ruby, arrays

对于一个数组`[1, 2, 3, 4],`，当我处理每个元素时，我怎么知道我在数组的最后一个元素上。

```
arr = [1, 2, 3, 4]
arr.each do |a|

...

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:36:29.650

```
arr = [1, 2, 3, 4]
l = arr.length - 1
arr.each_with_index do |a, i|
  if i == l
    ...
  else
    ...
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:37:42.640

```
arr = [1, 2, 3, 4]
arr.each_with_index do |el, idx|
  if idx == arr.length - 1
    # you're on the last element
  end
end 
```

# android - 在设置中查找电池应用程序的源代码，Android

> ID：11224230
> 
> 赞同：0
> 
> 时间：2012-06-27T10:32:45.653
> 
> 标签：android, battery

我想要在设置中找到的 android 内置电池应用程序的源代码。

我尝试搜索 github，但那里可用的源代码似乎已经过时了。

请帮助我找到该代码。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:10:11.757

> 我想要在设置中找到的 android 内置电池应用程序的源代码。

设置应用程序可以在这里找到：[https ://github.com/android/platform_packages_apps_settings](https://github.com/android/platform_packages_apps_settings)

> 我尝试搜索 github，但那里可用的源代码似乎已经过时了。

截至撰写本文时，上述存储库已在过去两周内更新。任何费心浏览该存储库历史记录的人都会看到它相当活跃，有很多提交。而且，查看分支，您将看到从 Donut 到 ICS 的所有 Android 版本。

# android - 来自 AlarmManager 的 BroadcastReceiver 未在子活动/意图中接收

> ID：11224234
> 
> 赞同：0
> 
> 时间：2012-06-27T10:32:53.450
> 
> 标签：android, broadcastreceiver

我有一个问题，我的 BroadcastReciever 设置为从 AlarmManager 接收事件，但在主活动启动的子活动中没有收到。我不知道在哪里看。有时，如果子活动启动得足够快，则 AlarmMananger 似乎永远不会发送事件。我试图在未来几周内触发事件，但我什至无法在未来的工作中获得几秒钟，只有几毫秒我才能在 BroadcastReciever 的 onReceive() 中得到任何回复（这是在类 NotifyAlarmReceiver 中实现的）

我的清单文件有这个：

```
<receiver android:name=".notifications.NotifyAlarmReceiver"></receiver> 
```

我尝试过使用进程和导出字段，但它们似乎没有做任何事情。

设置警报的代码是：

```
Intent notifyReceiverIntent = new Intent(this, NotifyAlarmReceiver.class);
PendingIntent notifyPI = PendingIntent.getBroadcast(this, 0, notifyReceiverIntent, PendingIntent.FLAG_UPDATE_CURRENT);
mAlarmManager.set(AlarmManager.RTC, timems, notifyPI); 
```

我现在应该去哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:36:44.417

我会尝试以编程方式注册和注销接收器，看看是否有任何改变。假设您没有被迫从清单中声明静态接收器。您的问题感觉很奇怪，因为听起来您的意图没有持续足够长的时间以到达您的接收器，并且可能反过来。而且我一直在我的接收器上使用带有应用程序包名称的 xml 标记。

# c# - 如何在自定义 WPF 控件中初始化集合属性

> ID：11224238
> 
> 赞同：2
> 
> 时间：2012-06-27T10:33:08.653
> 
> 标签：c#, wpf, data-binding, wpf-controls

我有一个自定义 WPF 控件基类。这个基类注册了一个类型为“List<”some own type">“的自定义属性。

如何在设计时初始化属性？列表中应该始终有 8 个对象，并且用户应该能够修改这些对象。

我尝试使用 PropertyMetadata 对象传递默认值，但属性编辑器中显示的集合始终为空。

```
public class CustomPropertyTestBase : UserControl
{

    static CustomPropertyTestBase()
    {
        List<object> defaultValue = new List<object>(new object[8]);
        MyCustomObjectsProperty = DependencyProperty.Register("MyCustomObjects",
            typeof(List<object>), typeof(CustomPropertyTestBase),
            new PropertyMetadata(defaultValue));
    }

    public static DependencyProperty MyCustomObjectsProperty;

    [Category("MyCustomProperties")]
    public List<object> MyCustomObjects
    {
        get;
        set;
    }
} 
```

编辑：

每当我在属性编辑器中添加一个新对象时，这些新对象都不会被存储。重新打开属性编辑器后，列表再次为空。

我已将调试器附加到设计器，并且编辑器永远不会调用属性的 get 或 set 方法。

解决方案：

正如“dowhilefor”所提到的。我不得不改变 ObservableCollection 的类型。现在设计器正确地存储了更改的列表。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:32:42.160

当您需要在设计时显示示例数据时，您不应在 C# 代码中对示例数据进行硬编码。

相反，使用属性`d:DesignData`和支持示例数据 *.xaml 文件在设计器中显示示例数据。[设计时属性](http://msdn.microsoft.com/en-us/subscriptions/ee839627%28v=vs.100%29.aspx)一文展示了如何做到这一点。

这是关于 DesignData 的另一篇好文章：[DesignData MVVM support in Blend, VS2010 and](http://blogs.msdn.com/b/mcsuksoldev/archive/2010/08/27/designdata-mvvm-support-in-blend-vs2010-and-wpf-silverlight.aspx) ...。

请注意，DesignData 不仅适用于 Blend，而且适用于 Visual Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:54:41.000

像这样的东西应该工作：

```
public MainWindow()
    {
        InitializeComponent();

        if( System.ComponentModel.DesignerProperties.GetIsInDesignMode(this))
        {
            MyCustomObjects = new List<object>();
            MyCustomObjects.Add("Hello");
        }
    } 
```

但也许它不是最好的解决方案。我记得在表达式混合中有一些工具可以拥有虚拟数据，但不记得他们是如何做到的。当然这是静态的，你不能改变它，但我认为这是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:02:54.317

正如“dowhilefor”所提到的。我不得不改变 ObservableCollection 的类型。现在设计器正确地存储了更改的列表。谢谢。

# ruby-on-rails - Rails - 3.0.6 到 3.0.14 的 activerecord、多个连接和 where 子句的古怪之处

> ID：11224240
> 
> 赞同：3
> 
> 时间：2012-06-27T10:33:19.153
> 
> 标签：ruby-on-rails, activerecord

所以.. 刚从 3.0.6 升级到 3.0.14，我的一项测试开始严重失败（太棒了！）。它指出（我认为）我的 where 子句的格式不正确，我只是一直在“逃避它”。只是想确认一下（如果有人能指出我在哪里可以找到记录此更改的文档）。

一些代码：

```
@fields = Field.joins(:region => :country).where(:regions => {:country_id => @country}).order(:name) 
```

产生快乐的 SQL

```
 "SELECT `fields`.* FROM `fields` INNER JOIN `regions` ON `regions`.`id` = `fields`.`region_id` INNER JOIN `countries` ON `countries`.`id` = `regions`.`country_id` WHERE `regions`.`country_id` = 5 ORDER BY name" 
```

然而，这个查询......

```
@pools = Pool.joins(:field => {:region => :country}).where(:fields => {:regions => {:country_id => @country }},:confirmed => true).order(:leaving_date) 
```

这会在 3.0.6 中产生好的 SQL

```
"SELECT `pools`.* FROM `pools` INNER JOIN `fields` ON `fields`.`id` = `pools`.`field_id` INNER JOIN `regions` ON `regions`.`id` = `fields`.`region_id` INNER JOIN `countries` ON `countries`.`id` = `regions`.`country_id` WHERE `pools`.`confirmed` = 1 AND `regions`.`country_id` = 5 ORDER BY leaving_date" 
```

但是在 3.0.14 中，它的国家 ID 的值很糟糕（似乎是整个活动记录？）

```
"SELECT `pools`.* FROM `pools` INNER JOIN `fields` ON `fields`.`id` = `pools`.`field_id` INNER JOIN `regions` ON `regions`.`id` = `fields`.`region_id` INNER JOIN `countries` ON `countries`.`id` = `regions`.`country_id` WHERE `pools`.`confirmed` = 1 AND `fields`.`regions` = '--- \\n:country_id: !ruby/ActiveRecord:Country \\n  attributes: \\n    name: Test Country 1\\n    latitude: \\\"13.456\\\"\\n    created_at: 2012-06-27 10:28:46 Z\\n    updated_at: 2012-06-27 10:28:46 Z\\n    id: 2\\n    cached_slug: test-country-1\\n    longitude: \\\"46.789\\\"\\n    message: \\n    zoom: 4.0\\n' ORDER BY leaving_date" 
```

只是想知道是否有人可以解释这里发生了什么。我怀疑它可能永远不会起作用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:25:13.463

那应该只是

```
Pool.joins(:fields => {:region => :country}).
     where(:regions => {:country_id =>@country}) 
```

仅仅因为您通过另一个表加入表并不意味着您需要在 where 子句中做同样的事情 - 您想要的只是表单的条件

```
regions.country_id = 1 
```

这确实是偶然发生的，不幸的是，同样的事故也可能让人们注入恶意制作的值，因此在 rails 3.0.13/14[安全版本中已修复](http://weblog.rubyonrails.org/2012/6/12/ann-rails-3-0-14-has-been-released/)

据我所知，这不应该起作用，实际上并没有任何关于它被删除的文档。

# jquery - Jquery Datepicker 在 Visual Studio 中工作，但在部署时不工作

> ID：11224241
> 
> 赞同：3
> 
> 时间：2012-06-27T10:33:23.370
> 
> 标签：jquery, asp.net-mvc-3, visual-studio-2010, iis-7, razor

我开发了一个页面，其中有几个日期可以输入到输入框中。但是，当我使用 Datepicker 执行此操作时，它仅适用于 Visual Studio 2010。当我们部署到 IIS 7 时，它只是说

> 消息：对象不支持此属性或方法

加载页面时。

下面是我正在尝试做的代码示例。我不介意有一个按钮来激活日期选择器，但现在它在部署时不起作用。有谁知道可以在这里帮助我的任何事情？

```
<div class="editor-label">
        @Html.LabelFor(model => model.RunDate, "Kørselsdato")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.RunDate)
        @Html.ValidationMessageFor(model => model.RunDate, "Vælg venligst en dato")
    </div>

    <p>
        <input type="submit" value="Opret" />
    </p>

<script type="text/javascript">
    $("#RunDate").datepicker({ dateFormat: 'dd-mm-yy' });
</script> 
```

编辑：我在布局文件中使用它。所以那些建议使用@URL.Content 的人可以看到我已经这样做了。或者，如果这不是您的意思，您能否更详细地解释您的意思？

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ui.core.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ui.datepicker.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/jquery.ui.all.css")" rel="stylesheet" type="text/css" />

    <style type="text/css"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:26:43.783

也许您的 javascript 没有正确部署。或者您的 javascript 文件路径不正确。

用于`Url.Content`确认您引用 javascripts 的准确相对路径。

像

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.jqGrid.src.js")"></script> 
```

# c++ - 如何从任何类型的对象转换为字符串

> ID：11224245
> 
> 赞同：-3
> 
> 时间：2012-06-27T10:33:34.353
> 
> 标签：c++

我有这个问题，有人可以帮助我吗？

```
boost::property_map<slGraph, edge_name_t>::type name1 = get(edge_name, graph);

slEdgeIterator ei, ei_end;
    for(tie(ei, ei_end) = edges(graph); ei != ei_end; ++ei){

        name1[*ei] = "UNKNOWN"; //(error C2679: binary '=' : no operator found which takes a right-hand operand of type 'const char [8]' (or there is no acceptable conversion))

        }//end

slOutEdgeIterator outEdgeItr;
if(name1[*outEdgeItr].compare("UNKNOWN")==0)// (error C2039: 'compare' : is not a member of 'boost::detail::error_property_not_found')
{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:51:03.257

第一个错误：您的类型 edge_name_t（edge_name_t 的底层类型是什么？）必须支持 operator=(const char* str)，它接受字符串作为参数。因此，如果 edge_name_t 是一个类，只需添加并实现运算符和第二个错误：这里有同样的问题。无论 edge_name_t 是什么，它都不提供`compare`- 方法。无论如何，您应该插入 edge_name_t 的声明。它是一个字符串，你自己的类还是它是什么？

顺便提一句。由于您没有提供太多信息，我只能假设您正在尝试做什么，但我不会为此使用字符串，因为比较相对较慢。如果您不想命名边缘，而只是“标记”它们，那么使用“枚举”可能是一种更好的方法。

# r - 如何使用 ggplot 在直方图上叠加任意参数分布？

> ID：11224247
> 
> 赞同：9
> 
> 时间：2012-06-27T10:08:16.193
> 
> 标签：r, data-visualization, histogram, ggplot2

如何使用 ggplot 在直方图上叠加任意参数分布？

我已经根据[Quick-R 示例](http://www.statmethods.net/graphs/density.html)进行了尝试，但我不明白比例因子的来源。这种方法合理吗？如何修改它以使用 ggplot？

使用此方法绘制正态分布和对数正态分布的示例如下：

```
## Get a log-normalish data set: the number of characters per word in "Alice in Wonderland"
alice.raw <- readLines(con = "http://www.gutenberg.org/cache/epub/11/pg11.txt", 
                       n = -1L, ok = TRUE, warn = TRUE,
                       encoding = "UTF-8")

alice.long <- paste(alice.raw, collapse=" ")
alice.long.noboilerplate <- strsplit(alice.long, split="\\*\\*\\*")[[1]][3]
alice.words <- strsplit(alice.long.noboilerplate, "[[:space:]]+")[[1]]
alice.nchar <- nchar(alice.words)
alice.nchar <- alice.nchar[alice.nchar > 0]

# Now we want to plot both the histogram and then log-normal probability dist
require(MASS)
h <- hist(alice.nchar, breaks=1:50, xlab="Characters in word", main="Count")
xfit <- seq(1, 50, 0.1)

# Plot a normal curve
yfit<-dnorm(xfit,mean=mean(alice.nchar),sd=sd(alice.nchar))
yfit <- yfit * diff(h$mids[1:2]) * length(alice.nchar) 
lines(xfit, yfit, col="blue", lwd=2) 

# Now plot a log-normal curve
params <- fitdistr(alice.nchar, densfun="lognormal")
yfit <- dlnorm(xfit, meanlog=params$estimate[1], sdlog=params$estimate[1])
yfit <- yfit * diff(h$mids[1:2]) * length(alice.nchar)
lines(xfit, yfit, col="red", lwd=2) 
```

这将产生以下图： ![由上述代码生成的图，显示了叠加了正态分布曲线和对数正态分布曲线的字长直方图](../Images/468b1072f4e1a1f55ee7d89c0c3afa38.png)

为了澄清，我想在 y 轴上计数，而不是密度估计。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T11:43:04.653

看看 stat_function()

```
alice.raw <- readLines(con = "http://www.gutenberg.org/cache/epub/11/pg11.txt", 
                       n = -1L, ok = TRUE, warn = TRUE,
                       encoding = "UTF-8")

alice.long <- paste(alice.raw, collapse=" ")
alice.long.noboilerplate <- strsplit(alice.long, split="\\*\\*\\*")[[1]][3]
alice.words <- strsplit(alice.long.noboilerplate, "[[:space:]]+")[[1]]
alice.nchar <- nchar(alice.words)
alice.nchar <- alice.nchar[alice.nchar > 0]
dataset <- data.frame(alice.nchar = alice.nchar)
library(ggplot2)
ggplot(dataset, aes(x = alice.nchar)) + geom_histogram(aes(y = ..density..)) +
  stat_function(fun = dnorm, 
    args = c(
      mean = mean(dataset$alice.nchar), 
      sd = sd(dataset$alice.nchar)), 
    colour = "red") 
```

![在此处输入图像描述](../Images/e581e534fc9a444acea621110c7e0397.png)

如果您想像示例中那样在 y 轴上进行计数，那么您需要一个将密度转换为计数的函数：

```
dnorm.count <- function(x, mean = 0, sd = 1, log = FALSE, n = 1, binwidth = 1){
  n * binwidth * dnorm(x = x, mean = mean, sd = sd, log = log) 
}

ggplot(dataset, aes(x = alice.nchar)) + geom_histogram(binwidth=1.6) + 
  stat_function(fun = dnorm.count, 
                args = c(
                  mean = mean(dataset$alice.nchar), 
                  sd = sd(dataset$alice.nchar), 
                  n = nrow(dataset), binwidth=1.6), 
                colour = "red") 
```

![在此处输入图像描述](../Images/43caf4ea74832ec067755c907c4444ba.png)

# .net - 模型命名空间更改后，RavenDB 抛出强制转换异常

> ID：11224248
> 
> 赞同：12
> 
> 时间：2012-06-27T10:33:43.903
> 
> 标签：.net, ravendb

在数据库中，我已经存储了数百个文档。现在系统架构发生了变化，并且（除其他外）模型被迁移到不同的命名空间（在不同的程序集中）。

下面显示了示例文档的元数据：

![在此处输入图像描述](../Images/d255353835c58b6e5ce11e5d4b7cd712.png)

和我用来获取此类文档的代码：

```
var configuration = documentSession.Load<One.Social.Core.Entities.Setting>("Setting"); 
```

抛出铸造异常：

```
[InvalidCastException: Unable to cast object of type 'One.QA.Core.Entities.Setting' to type 'One.Social.Core.Entities.Setting'.] 
```

**更新：**

类似的错误，但来自 NewtonsoftJson 上升，而我在文档中收集了指定类型，现在已更改。

在数据库中，我有问题文档，其中包含答案列表：

![在此处输入图像描述](../Images/30aec36607c58658c49a6ee03aef5da8.png)

在代码中，类型如下所示：

```
namespace One.Social.Ask.Web.Models
{
    public class Question
    {        
        public string Content { get; set; }
        public IList<One.Social.Ask.Web.Models.Answer> Answers { get; set; }        
    }
} 
```

答案命名空间已更改。另外，现在它是从 IList<> 派生的，没有 ICollection<>。我现在不需要`$type`元数据，它应该是：

![在此处输入图像描述](../Images/944c52fe09158a216d2c11d2ad51139c.png).

虽然它现在是一个列表，但由于旧`$type`信息而出现错误：

```
Newtonsoft.Json.JsonSerializationException: Error resolving type specified in JSON 'System.Collections.ObjectModel.Collection`1[[One.QA.Core.Entities.Answer, One.QA.Core]], mscorlib'. ---> Newtonsoft.Json.JsonSerializationException: Could not find type 'System.Collections.ObjectModel.Collection`1[[One.QA.Core.Entities.Answer, One.QA.Core]]' in assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. 
```

迁移所有文档以反映当前类型名称的最佳方法是什么？有没有内置机制？

顺便说一句：我正在使用 RavenDB - Build #960

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T22:25:30.450

我遇到了同样的问题，最终这样做了：

```
Advanced.DatabaseCommands.UpdateByIndex(
    "Raven/DocumentsByEntityName",
        new IndexQuery {Query = "Tag:Album"},
        new []{ new PatchRequest() { 
            Type = PatchCommandType.Modify, 
            Name = "@metadata", 
            Nested= new []{ 
                new PatchRequest{
                    Name= "Raven-Clr-Type",
                    Type = PatchCommandType.Set,
                    Value = "Core.Model.Album, Core" }}}},
        false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T19:45:42.970

Jarek，问题的原因是你有两种类型。如果您删除 QA 类型，它将正常工作。或者，您可以按照 Wyatt 的建议进行操作并强制执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T11:13:49.383

您需要直接修补 ravendb 文档，而不是尝试反序列化它们。我自己从来不需要这样做，但我认为魔法是使用 IDocumentSession.Advanced.DatabaseCommands 中的方法完成的，尤其是[Patch 方法](http://ravendb.net/docs/client-api/partial-document-updates)。

我真的没有什么可以测试的，但我认为代码应该如下所示：

```
//s is your document session
var toUpdate = s.Advanced.DatabaseCommands.StartsWith("Setting", 0, 128);
foreach (var d in toUpdate)
{
    var p = new PatchRequest();
    p.AllPositions = true;
    p.Type = PatchCommandType.Modify;
    d.Metadata["Raven-Clr-Type"] = "MyNewType";
    p.Value = d.ToJson();
    s.Advanced.DatabaseCommands.Patch(d.Key, new []{p});
}
// push forward and repeat for all items in collection 
```

还有一种方法可以在不遍历集合的情况下执行此操作，但我不确定如何正确实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-08T23:39:00.353

我在重命名后遇到了完全相同的问题`casting exception`。正如前面的答案所建议的，我最终根据[这个片段](https://gist.github.com/AlexZeitler/3312858)修补了我的所有文档。

我们需要更新两个字段：`Raven-Entity-Name`和`Raven-Clr-Type`。

**例子**

重命名`MyType`为`MyNewType`，将命名空间从 更新`My.Namespace.MyType`为`My.New.Namespace.MyNewType`。

`Raven-Entity-Name`需要从 更改`MyTypes`为`MyNewTypes`。为什么是复数？“约定优于配置”方法，[如此处所述](https://stackoverflow.com/a/3637701/1132522)。

`Raven-Clr-Type`需要从 更新`My.Namespace.MyType`到`My.New.Namespace.MyNewType`。

**代码**

```
public static void PatchMetadata()
        {
            var operation = session.Advanced.DocumentStore.DatabaseCommands
            .UpdateByIndex(
                // You can check your index name in the Studio Under INDEXES.
                    "Raven/DocumentsByEntityName",
                //  query that will be performed
                    new IndexQuery
                    {
                        // A collection in RavenDB is a set of documents with the same tag. 
                        // The tag is defined in Raven-Entity-Name.
                        Query = "Tag:MyTypes"
                    }, new[]
                                {
                                    new PatchRequest
                                        {
                                            Type = PatchCommandType.Modify,
                                            Name = "@metadata",
                                            Nested = new[]
                                                {
                                                    new PatchRequest
                                                        {
                                                            Type = PatchCommandType.Set,
                                                            Name = "Raven-Entity-Name",
                                                            Value = new RavenJValue("MyNewTypes")
                                                        }
                                                        ,
                                                    new PatchRequest
                                                        {
                                                            Type = PatchCommandType.Set,
                                                            Name = "Raven-Clr-Type",
                                                            Value = new RavenJValue("My.New.Namespace.MyNewType, RavenDbPatching")
                                                        }
                                                }
                                        }
                                },
                    new BulkOperationOptions() { AllowStale = true }
            );
        } 
```

# java - 如何在java中用新名称重命名简历（.doc）

> ID：11224249
> 
> 赞同：0
> 
> 时间：2012-06-27T10:33:44.377
> 
> 标签：java, file-handling, servlet-3.0

```
String oldName = D:\careers.bstalents.com\build\web\uploads\Resume\old.doc;
String newName = D:\careers.bstalents.com\build\web\uploads\Resume\new.doc;

           File newFile = new File(newName);
           File oldFile = new File(oldName);
           boolean rename = oldFile.renameTo(newFile);
           if (rename) {

                    outs.write(formFile.getFileData());
                    outs.close();*/
                    FileOutputStream fileOutStream = new FileOutputStream(newFile);
                    fileOutStream.write(resume.getFileData());
                    fileOutStream.flush();
                    fileOutStream.close();
                } 
```

我在上面发布了我的代码，请分享您的观点。这里 renameTo() 方法无法做到这一点。代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:30:08.600

使用[FileUtils](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html)：

```
FileUtils.moveFile(oldName, newName); 
```

# android - 我怎么知道应用程序空闲时间？

> ID：11224258
> 
> 赞同：0
> 
> 时间：2012-06-27T10:34:18.673
> 
> 标签：android, idle-timer

我有一个 android 应用程序，它显示 web 视图。我想知道应用程序空闲时间，因为如果会话到期，我想去我的 android 登录活动，我该怎么做。请为我提供任何建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:53:14.940

您可以在 pause 方法中启动计时器，一旦活动恢复，您可以通过计时器获取持续时间。代码参考：

```
// create a instance for chronometer
Chronometer duration = new Chronometer(this);

// starts chronometer inside pause override method
duration.setBase(0);
duration.start();

// you also need to add onTick listener.
duration.setOnChronometerTickListener(new OnChronometerTickListener(){
        @Override
        public void onChronometerTick(Chronometer arg0) {
            NumberFormat formatter = new DecimalFormat("00");
            long countUp = (SystemClock.elapsedRealtime() - arg0.getBase()) / 1000;
            String asText = formatter.format(countUp / 60) + ":" + formatter.format(countUp % 60);
        if (is_pause == false) {
            duration_time = asText;
        } 

// once done stop the chronometer inside stop override method and set a flag, check      this falg inside OnTickListener and get the duration asText.
duration.stop();
is_pause = false; 
```

# entity-framework - Linq to Entities 从 nvarchar 字段返回一个 int 列表

> ID：11224262
> 
> 赞同：1
> 
> 时间：2012-06-27T10:34:31.740
> 
> 标签：entity-framework, c#-4.0, linq-to-entities

我正在使用 C#、Linq to Entities 和 .Net 4

我正在使用以下代码来提取数据列表。数据可能是一个数字，但对于某些记录，它可能是 null 或其他某种形式的数据。Linq 是否可以仅提取此字段中的数字，还是我需要使用其他步骤？

```
var s = (from t in context.Cards where t.CardData != null select t.CardData).ToList(); 
```

上面将返回一个字符串列表，但我想要一个 int 列表。CardData 字段可能为空、数字或一些文本。在数据库中，它是一个可为空的 nvarchar 字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:44:26.523

最简单的方法是`TryParse`在返回列表的每个元素上使用。您已经消除了 null 元素，因此您知道自己有一些东西：

```
var numberList = new List<int>();
foreach (var item in s)
{
    int result = 0;
    if (Int32.TryParse(item, result))
    {
        numberList.Add(result);
    }
} 
```

这还有一个额外的好处，即您将在 18 个月后了解它的作用。

# sql - 为表中的所有 SQL 行减去相同的数字

> ID：11224266
> 
> 赞同：2
> 
> 时间：2012-06-27T10:34:44.087
> 
> 标签：sql, sql-server

在 SQL Server 2008 中，我有一个如下用户表：

```
Userid
Username 
UserBirthYear(int) 
```

当用户注册到该页面时，她选择了她的出生年份。前程序员（当然！）让用户选择正确的年份，但插入数据库的值是 DateTime.Now...

现在我需要从 UserBirthYear 列中的每个用户中减去 15 年并保存到数据库中。有50万用户。如何最好地做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:36:31.503

```
update your_table
set UserBirthYear = UserBirthYear - 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:40:48.630

如果插入的值是日期时间，那么

试试这个 `select dateadd(year,-15,UserBirthYear)`

例如：

```
select dateadd(year,-15,'06-27-2012') 
```

答案将是`1997-06-27 00:00:00.000`

# php - 这些类型网站的后端是如何工作的？

> ID：11224267
> 
> 赞同：2
> 
> 时间：2012-06-27T10:34:43.987
> 
> 标签：php, html

我正在建立自己的 torrent 网站，在做了一些研究后，我注意到很多网站包括这两个：

*   [http://torrentz.eu](http://torrentz.eu)

*   [http://bitsnoop.com](http://bitsnoop.com)

大多数页面是静态的，不是动态生成的（因为页面以 结尾`.html`）。想一想，这对我来说很有意义，因为网站的加载速度会快得多，而不是每次用户加载页面时都必须访问数据库。

我假设以下是正确的吗？

*   页面是静态的。

*   页面经常更新。

*   这些页面是由类似`PHP`或任何其他编程语言自动生成的。

这样做的原因是为了减轻数据库的压力（它必须非常大）并让用户更快地加载网站吗？

以下面这些例子为例：

*   [http://torrentz.eu/8ac3731ad4b039c05393b5404afa6e7397810b41](http://torrentz.eu/8ac3731ad4b039c05393b5404afa6e7397810b41)

*   [http://bitsnoop.com/ubuntu-12-04-lts-i686-precise-pango-q36920828.html](http://bitsnoop.com/ubuntu-12-04-lts-i686-precise-pango-q36920828.html)

我猜页面必须是静态的，因为哈希没有放在`GET`变量中，而是指向特定页面。您还会注意到页面上还有动态元素，例如最近搜索（位于底部）和可用评论。

如果我的想法是正确的。那么网站如何处理更新页面以获取评论？这是否意味着每次有人发表评论时都必须更新整个页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T10:40:34.147

.html 或 .php 等文件扩展名并不能可靠地表明它们是静态页面。通常的做法是使用 Apache 的 mod_rewrite（或等效）功能为动态 URL 提供更加用户友好的外观。

对于像 torrentz 和 bitsnoop 这样的大型网站，它们也有可能（如果不是极有可能）*提供*静态页面 - 尽管这些静态页面将成为经常更新的缓存的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:40:16.363

这些页面很可能不是静态的，.HTML 扩展名只是 UI 糖果。

正如大多数动态网站所做的那样，它们可能在内部被路由到前端控制器，前端控制器分析请求的 URI 以计算正确的响应——标识符是否在查询字符串 (?...) 中并不重要。

wiki 上有此模式的简要说明：[http ://en.wikipedia.org/wiki/Front_Controller_pattern](http://en.wikipedia.org/wiki/Front_Controller_pattern)

查看使用它的框架以获取详细信息。如果您使用 PHP 语言，请查看 Symfony 框架 - [http://symfony.com/doc/current/quick_tour/the_big_picture.html](http://symfony.com/doc/current/quick_tour/the_big_picture.html)了解应该如何编写结构化的 Web 应用程序。

# javascript - 如何获取调用 javascript 函数的文本框的 id？

> ID：11224271
> 
> 赞同：0
> 
> 时间：2012-06-27T10:34:50.073
> 
> 标签：javascript, html

我想要的是获取 id（即 myHeader、myHeader2 等）

这就是我现在正在尝试的，

HTML：

```
<input type="text" id="myHeader" onblur="getValue(this)" />
<input type="text" id="myHeader2" onblur="getValue(this)" />
<input type="text" id="myHeader3" onblur="getValue(this)" />
<input type="text" id="myHeader4" onblur="getValue(this)" /> 
```

Javascript：

```
function getValue(obj){
    var someVar = document.getElementById(obj).value;
} 
```

但是我什么也没得到，事件也没有触发，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:36:49.567

您的`obj`对象已经拥有`id`和`value`属性：

```
function getValue(obj){
    alert('id - ' + obj.id);
    alert('value - ' + obj.value);
} 
```

请注意，当您将`this`上下文传递给您的函数时，您将传递您的 DOM 元素。不是身份证。并且您可以像使用 DOM 元素一样操作它。不需要`document.getElementById`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:07:53.603

```
 <script type="text/javascript">
    function getValue(obj) {
        var id = obj.id;
        var value = obj.value;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:52:43.043

正如我所看到的，当用户失去对该输入字段的关注时，您可能会触发该功能。

除非您正在做，否则`obj.value.toUpperCase();`为什么要在每个输入字段上触发相同的功能？

无论如何，正如@antyrat 所说`this`，会给你 DOM 元素，你可以从中挑选`value`。

```
 function getValue(obj){
 obj.value=obj.value.toUpperCase();
 } 
```

`upper case`当用户继续前进时，这将使您的所有输入字段成为可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T06:28:05.357

您还可以获得文本框ID

```
<input type="text" id="myHeader" onblur="getValue(this.id)" /> <!-- instead of getValue(this) -->

<script type="text/javascript">
    function getValue(id) {
        alert(id);  // Display the id of the textbox
    }
</script> 
```

希望它会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T10:39:16.923

```
function value(object)
 {
alert('id= ' + object.id);
 } 
```

# ruby-on-rails-3 - rails twitter 引导辅助方法

> ID：11224276
> 
> 赞同：4
> 
> 时间：2012-06-27T10:34:59.017
> 
> 标签：ruby-on-rails-3, helper, twitter-bootstrap-rails

我`twitter-bootstrap-rails`在我的应用程序中使用 gem。它似乎带有一系列帮助方法，例如在主题视图中创建编辑和删除按钮：

```
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                  cohort_path(cohort),
                  :method => :delete,
                  :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
                  :class => 'btn btn-mini btn-danger' %> 
```

这些 t() 方法和助手在哪里定义？我怎样才能改变它们？例如，如果我想将 Destroy 按钮上的标签更改为“Delete”，我可以将上面的内容更改为：

```
<%= link_to t('.destroy', :default => "Delete"),
                  cohort_path(cohort),
                  :method => :delete,
                  :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
                  :class => 'btn btn-mini btn-danger' %> 
```

我真正想做的是`t("helpers.links.destroy")`在我的所有视图中更改为显示“删除”而不是“销毁”。我可以这样做吗？感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T20:34:13.140

您所要做的就是将以下内容添加到您的 i18n Rails 文件中（在路径“config/locales/en.yml”中）：

```
<pre>
en:
 helpers:
    links:
      back: "Back Page"
      destroy: "Delete"
</pre> 
```

方法 t() 用于 i18n Rails 应用程序。

# php - 如何知道 DPI 以及图片是否为 CMYK

> ID：11224282
> 
> 赞同：1
> 
> 时间：2012-06-27T10:35:25.650
> 
> 标签：php, image, image-processing, imagemagick

我需要检查一些图片（eps、tiff 文件）是否为 300 DPI 以及是否为 CMYK 格式。

我正在使用 imagemagick，但我没有找到任何有关它的信息。

请问你能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:23:11.910

看来您正在寻找 ImageMagick`identify`工具输出的“分辨率”和“色彩空间”字段。

[http://www.imagemagick.org/script/identify.php](http://www.imagemagick.org/script/identify.php)

`identify -verbose sample.jpg`

# asp.net - 使用 Facebook 帐户注册

> ID：11224284
> 
> 赞同：-1
> 
> 时间：2012-06-27T10:35:32.657
> 
> 标签：asp.net

我有一个带有自定义登录和注册页面的网站。一切正常。现在我想从 Facebook 获取会员的数据，比如名字、姓氏、电子邮件、出生日期、性别、照片和地点，以简化注册过程。

我在 Facebook 中创建了应用程序帐户并获得了 appID 和画布 url。

我正在寻找一个 FB 连接按钮，当用户单击该按钮时，它应该验证 FB 帐户并从 Facebook 检索数据。

给我一些示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:28:41.557

看看[Gigya plugin](http://developers.gigya.com/040_Demos/005_Social_Login)，他们的网站上有示例代码。

# c# - 使用 LINQ to Twitter 获取所有关注者

> ID：11224285
> 
> 赞同：0
> 
> 时间：2012-06-27T10:35:38.773
> 
> 标签：c#, linq, twitter, oauth, linq-to-twitter

我正在使用 LINQ to Twitter API 为 Twitter 上的特定用户收集关注者。我能够获取所有 ID，并且通过这些 ID，我可以请求他们的屏幕名称和我需要的其他属性。

我在一批 100 个用户中执行此操作（据我了解 - 每个请求 100 个是限制）。

我也在使用 oAuth。

所以现在我可以获得 350 * 100 = 35000 个关注者的信息。

如果特定用户有 100000 多个关注者怎么办。我如何收集所有这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:04:53.327

听起来您已经在进行用户查找，就像这样，但我提一下以防万一：

```
 var users =
            (from user in twitterCtx.User
             where user.Type == UserType.Lookup &&
                   user.UserID== "123,456,789,...,777"
             select user)
            .ToList();

        users.ForEach(user => Console.WriteLine("Name: " + user.Name)); 
```

如您所知，您一次只能有 100 个 ID，这意味着您需要发出大量请求，这将需要很长时间。查看 Twitter 的速率限制文档，其中解释了您可以发出多少请求以及（更重要的是）可能有助于避免较低速率限制的技术：

[https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting)

在 LINQ to Twitter 中，您可以在查询后立即通过 TwitterContext 实例上的 Headers 和其他属性访问速率限制信息。

另一个可能的选择是查看 Twitter 的合作伙伴提供商，看看他们是否拥有您需要的数据：

[https://dev.twitter.com/docs/twitter-data-providers](https://dev.twitter.com/docs/twitter-data-providers)

乔

# ruby-on-rails - 使用 RSpec 和 Capybara (Rails) 测试重定向

> ID：11224290
> 
> 赞同：38
> 
> 时间：2012-06-27T10:36:04.187
> 
> 标签：ruby-on-rails, rspec, capybara

我刚刚了解了 RSpec 和 Cabybara 有多酷，现在围绕它学习编写实际测试。

我正在尝试检查单击链接后是否重定向到特定页面。下面是场景

```
1）我有一个页面 /projects/list
        - 我有一个带有 html "Back" 的锚点，它链接到 /projects/show

下面是我在 rspec 中写的测试

描述“样品”做
  描述“GET /projects/list”做
    它“样品测试”做
      访问“/项目/列表”
      click_link "返回"
      assert_redirected_to "/projects/show"
    结尾
  结尾
结尾

```

测试失败，并显示如下失败消息

```
    失败/错误：assert_redirected_to "/projects/show"
     参数错误：
       @request 必须是 ActionDispatch::Request

```

请建议我应该如何测试重定向以及我做错了什么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-29T03:12:49.927

尝试`current_path.should == "/projects/show"`

Capybara 还实现了一个`current_url`完全限定 URL 的方法。

[文档](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session:current_path)中的更多信息。

**编辑**

Capybara 现在有一个名为 have_current_path 的 RSpec 匹配器，您可以像这样使用它：（`expect(page).to have_current_path(some_other_page_path)`感谢@bjliu）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-22T15:41:03.383

我不确定这是否是您所需要的，但在我的测试中，我更喜欢这种方法：

```
...
subject { page }
...
before do
    visit some_path_path
    # do anything else you need to be redirected
end
it "should redirect to some other page" do
    expect(page.current_path).to eq some_other_page_path
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T14:04:48.833

从[设计维基](https://github.com/plataformatec/devise/wiki/How-To:-Test-with-Cucumber)：

> 在 Rails 中，当机架应用程序重定向时（就像 Warden/Devise 将您重定向到登录页面），集成会话不会正确更新响应。因此，助手 assert_redirected_to 将不起作用。

此页面也具有相同的信息：[Rspec 确保我们以正确的路径结束](https://stackoverflow.com/questions/9797509/rspec-make-sure-we-ended-up-at-correct-path)

因此，您需要测试您现在是否在该 URL 上，而不是测试您是否被重定向到该 URL。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-27T11:25:26.217

您需要使用该路线，例如：

```
assert_redirected_to projects_path 
```

而不是

```
assert_redirected_to "/projects/show" 
```

# php - 未定义索引：用户名在 C:\wamp\www\Website\storeadmin\admin_login.php..和密码相同

> ID：11224291
> 
> 赞同：0
> 
> 时间：2012-06-27T10:36:05.357
> 
> 标签：php, mysql

```
 //index.php
  <?php
    session_start();
    if(!isset($_SESSION["member"])){
        header("location:admin_login.php");
        exit();
    }

    $managerID = preg_replace('#[^0-9]#i',"",$_SESSION["id"]);
    $manager = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["name"]);
    $password = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["password"]);

    include "../storescripts/connect_to_mysql.php";
    $sql = mysql_query("SELECT * FROM admin WHERE id ='managerID' AND username ='$manager' AND password ='$password'LIMIT 1");
    $exist_count = mysql_num_rows($sql);
    if($exist_count == 0){
        echo("Your login session data in not in the database");
        exit();
    }

    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <html >
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Service Admin Area</title>
    <link rel="stylesheet" href="../style/style.css" type="text/css" media="screen"/>
    </head>

    <body>
    <div  id="mainWrapper" > 
        <?php include_once("../template_header.php");?>
        <div id="pageContent" > 
        <div align="left" "style="margin-left:040px;"><h1>Hello Store Manager .What would you loke to do today</h1><br />
        <h3><a href="inventory_list.php">Manage Inventory</a></h3><br/><h3><a href="">Manage Me</a></h3><br/></div></div>
        <?php include_once("../template_header.php");?>
    </div>
    </body>
    </html>

//admin_login.php
<?php
session_start();
if(isset($_SESSION["member"])){
    header("location:index.php");
    exit();
}

$manager = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["username"]);
$password = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["password"]);

include "../storescripts/connect_to_mysql.php";
$sql = mysql_query("SELECT * FROM admin WHERE username ='$manager' AND password ='$password'LIMIT 1");
$exist_count = mysql_num_rows($sql);
if($exist_count == 1){
    while(mysql_fetch_array($sql)){
        $id = $row["id"];
        }

    $_SESSION["id"]= $id;
    $_SESSION["name"]= $manager;
    $_SESSION["password"]= $password;
    header("location:index.php");
    exit();

    }
    else{
    echo 'This information is incorrect,try again <a href = "index.php">Click Here</a>';
    exit();
    }

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> AdminLogin</title>
<link rel="stylesheet" href="../style/style.css" type="text/css" media="screen"/>
</head>

<body>
<div  id="mainWrapper" > 
    <?php include_once("../template_header.php");?>
    <div id="pageContent" > 
    <div align="left" "style="margin-left:040px;"><h1>Please login to continue</h1><br />
    </div>
    <form id="form1" name="form1" method="post" action=" admin_login.php"> 
    UserName<br />
    <input type="text" name="username" id="username" size="40"/>
    Password<br />
    <input type="password" name="password" id="password" size="40"/> 
    <br />
    <br />
    <br /> 
    <input type="submit" name="button" id="button" value="LogIn"/>  
    </form>
    </div>
    <?php include_once("../template_header.php");?>
</div>
</body>
</html> 
```

这越来越烦人了，我不能得到错误，而且我知道它很小，真的希望我能在你们中间纠正错误。上面两个 php 页面是为了在我的练习 web 文档中制作管理员登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:58:49.140

您`$_SESSION['name']`在一个脚本和`$_SESSION['username']`另一个脚本中使用。

我想如果你改变`username`或`name`反之亦然，错误就会消失。

~~我不确定密码的错误是什么，我的直觉是你看到它是因为会话才刚刚开始并且 $_SESSION 数组是空的，尝试丢弃一些 if(isset($_SESSION['.. 。']）） 大约。~~

在 admin_login 中，您应该检查登录按钮是否已被单击，并且您不只是加载表单，即

```
//admin_login.php
<?php
session_start();
if(isset($_SESSION["member"])){
    header("location:index.php");
    exit();
}

if(@$_POST['button'] == 'LogIn'){     // <-  Check the user has clicked the button
  $manager = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["username"]);
  $password = preg_replace('#[A-Za-z0-9]#i',"",$_SESSION["password"]);

  include "../storescripts/connect_to_mysql.php";
  $sql = mysql_query("SELECT * FROM admin WHERE username ='$manager' AND password ='$password'LIMIT 1");
  $exist_count = mysql_num_rows($sql);
  if($exist_count == 1){
      while(mysql_fetch_array($sql)){
          $id = $row["id"];
      }

      $_SESSION["id"]= $id;
      $_SESSION["name"]= $manager;
      $_SESSION["password"]= $password;
      header("location:index.php");
      exit();

    }else{
      echo 'This information is incorrect,try again <a href = "index.php">Click Here</a>';
      exit();
    }

}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
.... 
```

其他一些需要注意的事项：

*   您在登录表单中有两个`<html>`标签
*   登录表单的 action 属性在脚本名称前有一个空格
*   如果您在 SQL 中使用 LIMIT 1 ，则无需`mysql_fetch_array`将`while()`

# jquery - 动态背景颜色和子元素颜色继承

> ID：11224294
> 
> 赞同：0
> 
> 时间：2012-06-27T10:36:29.480
> 
> 标签：jquery, html, css

我有一个可以动态设置背景颜色的页面。在某些情况下，我有子 div，我想使用 background-color:inherit 来保持它们与主体颜色相同。

我发现当主体背景颜色发生变化时，继承的颜色并没有一致地级联。在 Firefox 中似乎没问题，但在 Chrome 或 IE 中却不行。

在 Firefox 中，它始终更改这两个元素。在 chrome 和 IE 中，结果似乎各不相同，但是如果您单击背景已经是的颜色（例如，一切都是蓝色的，单击“蓝色”按钮），然后单击另一种颜色，它似乎会一直中断。

（我确实意识到在这个例子中不需要继承的颜色，但是我只是想用尽可能少的代码来演示这个问题。）

[http://jsfiddle.net/48HBe/2/](http://jsfiddle.net/48HBe/2/)

如果这只是一个浏览器，那么我会怀疑这可能是一个浏览器问题，但由于它似乎会影响 Chrome 和 IE，我想知道我是否期望浏览器的渲染有一些不合理的地方，以及我是否应该使用另一种方法?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:43:38.810

您的代码似乎在 Chrome 中运行良好，无论如何如果问题与 IE 有关，我会尝试不同的方法。而不是更改单个 css 属性，只需尝试更改`body`元素的类名，就像在这个示例小提琴中一样：http: [//jsfiddle.net/48HBe/3/](http://jsfiddle.net/48HBe/3/)

CSS因此变成

```
body, body.blue { background-color:blue; }
body.green { background-color:green; }
body.red { background-color:red; } 
```

js代码很简单

```
...
var b = document.body;
$("#RedButton").click(function()   { b.className = 'red';   });                  
$("#GreenButton").click(function() { b.className = 'green'; });                  
$("#BlueButton").click(function()  { b.className = 'blue';  }); 
```

这样做可以更好地分离逻辑和表示，并且可以在 css 中更改更多样式属性（而不是在 js 代码中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:44:53.723

我删除`background-color:inherit;`了它，它完成了工作。

# python - 如何检测编码错误字符串？

> ID：11224299
> 
> 赞同：0
> 
> 时间：2012-06-27T10:36:48.943
> 
> 标签：python, unicode

我有一个中文文档，但是文档中有很多因为解码错误而留下的错误字符串，看起来都像`fffd`，`ff10`什么的。

现在我需要删除所有出现的那些错误字符串，所以我需要知道它们的模式，但我找不到有用的信息。我现在似乎只知道它们由 4 个字符组成，它们以 'ff' 开头，但最后两个是不确定的。

例如，错误字符串可能如下所示：`300dfffd`或`afffdnormalff0cword`。

我想要的上面两个词是：`300d`和`anormalword`。

我不能删除所有以四个字母开头的模式，`ff`因为有正常的单词以它们开头。

是否有一个单一的 re 模式可以代表它们？或者有没有其他推荐的方法？谢谢。

顺便说一句，我在 Python 中这样做，所以任何 Pythonic 方式都受到高度赞赏！

谢谢。

更新：</p>

我最终使用了模式`ff(fd|\d\w|\w\d)`并删除了几乎所有的错误。

一些错误，例如`ff07`和`ff50`没有被删除，这很奇怪，因为它们应该被 re 模式删除，但是少量的错误在我的容忍范围内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:49:50.587

并非您谈论的所有角色都是错误的。U+FFFD 是一个错误替换字符，这意味着某些解码步骤找不到要使用的字符。U+FF0C 是全角逗号，U+FF10 是全角零，这些都是完全有效的字符，并且可能是您想要保留的字符。

如果您愿意，可以删除它们：

```
doc = mydoc.encode('charmap', 'ignore') 
```

如果您有不喜欢的特定 Unicode 字符，则：

```
bad = set(u"\ufffd\uff10\uff0c") # etc
mydoc = u"".join(c for c in mydoc if c not in bad) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:14:05.560

我最终使用了模式`ff(fd|\d\w|\w\d)`并删除了所有但只有几个错误。

一些错误，如 ff07 和 ff50 没有被删除，这很奇怪，因为它们应该被 re 模式删除，但是少量的错误在我的容忍范围内。

# java - 检查是否按下按键的功能

> ID：11224304
> 
> 赞同：1
> 
> 时间：2012-06-27T10:37:03.390
> 
> 标签：java, keyboard, mouseevent, keyevent, keystroke

我需要查看是否为我的鼠标事件（基本上是 ctrl+click）按下了修饰键（shift、ctrl、alt）

我想知道是否有一个简单的函数来检查是否按下了一个键，而无需实现 keylistner 或动作事件，以免麻烦跟踪焦点在哪里或变量在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:39:54.200

您可以通过调用来获取按下了哪些修饰符的掩码[`InputEvent.getModifiers()`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/InputEvent.html#getModifiers%28%29)。

因此，如果您想知道是否按下了特定的修饰符（例如 Shift），您可以这样做

```
// (doesn't have to be a method, of course, you could easily do this inline)
private boolean wasShiftPressed(MouseEvent evt) {
    return evt.getModifiers() & InputEvent.SHIFT_MASK != 0;
} 
```

# asp.net - WCF 数据服务：处理此请求时发生错误

> ID：11224306
> 
> 赞同：1
> 
> 时间：2012-06-27T10:37:10.060
> 
> 标签：asp.net, entity-framework, wcf-data-services

我在各处设置断点并单步执行我的所有代码，但找不到错误的根源。我在谷歌搜索中没有看到这样一个非特定错误的意义。我得到了这个内部异常

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code></code>
  <message xml:lang="en-US">Forbidden</message>
</error> 
```

有什么问题？？

# python - 如何使以下文本出现在我的 python 程序中？

> ID：11224309
> 
> 赞同：1
> 
> 时间：2012-06-27T10:37:17.403
> 
> 标签：python, text, python-2.7

我想在我的程序中显示以下文本。当我在 python 中粘贴以下文本时，它会将反斜杠解释为转义序列并弄乱我的 ascii 艺术。任何想法来解决这个问题。这是我想要出现的文本在我的程序中

```
 _  __     _ _           _         ____            _               _                 
 | |/ /__ _| | | __ _  __| | __ _  |  _ \ __ _  ___| | ____ _  __ _(_)_ __   __ _ ___ 
 | ' // _` | | |/ _` |/ _` |/ _` | | |_) / _` |/ __| |/ / _` |/ _` | | '_ \ / _` / __|
 | . \ (_| | | | (_| | (_| | (_| | |  __/ (_| | (__|   < (_| | (_| | | | | | (_| \__ \
 |_|\_\__,_|_|_|\__,_|\__,_|\__,_| |_|   \__,_|\___|_|\_\__,_|\__, |_|_| |_|\__, |___/
                                                              |___/         |___/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T10:40:48.860

您可以使用原始字符串：

```
myString = r'''_  __     _ _           _         ____            _               _                 
 | |/ /__ _| | | __ _  __| | __ _  |  _ \ __ _  ___| | ____ _  __ _(_)_ __   __ _ ___ 
 | ' // _` | | |/ _` |/ _` |/ _` | | |_) / _` |/ __| |/ / _` |/ _` | | '_ \ / _` / __|
 | . \ (_| | | | (_| | (_| | (_| | |  __/ (_| | (__|   < (_| | (_| | | | | | (_| \__ \
 |_|\_\__,_|_|_|\__,_|\__,_|\__,_| |_|   \__,_|\___|_|\_\__,_|\__, |_|_| |_|\__, |___/
                                                          |___/         |___/'''
# note the r before the string starts 
```

[更多信息](http://docs.python.org/reference/lexical_analysis.html#string-literals)

`print '\tHello, world!'`尝试测试和之间的区别`print r'\tHello, World!'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:40:06.107

使用三引号，将此文本放在`"""` `"""`

```
>>> strs="""_  __     _ _           _         ____            _               _                 
 | |/ /__ _| | | __ _  __| | __ _  |  _ \ __ _  ___| | ____ _  __ _(_)_ __   __ _ ___ 
 | ' // _` | | |/ _` |/ _` |/ _` | | |_) / _` |/ __| |/ / _` |/ _` | | '_ \ / _` / __|
 | . \ (_| | | | (_| | (_| | (_| | |  __/ (_| | (__|   < (_| | (_| | | | | | (_| \__ \
 |_|\_\__,_|_|_|\__,_|\__,_|\__,_| |_|   \__,_|\___|_|\_\__,_|\__, |_|_| |_|\__, |___/
                                                              |___/         |___/     """
>>> print(strs)
_  __     _ _           _         ____            _               _                 
 | |/ /__ _| | | __ _  __| | __ _  |  _ \ __ _  ___| | ____ _  __ _(_)_ __   __ _ ___ 
 | ' // _` | | |/ _` |/ _` |/ _` | | |_) / _` |/ __| |/ / _` |/ _` | | '_ \ / _` / __|
 | . \ (_| | | | (_| | (_| | (_| | |  __/ (_| | (__|   < (_| | (_| | | | | | (_| \__  |_|\_\__,_|_|_|\__,_|\__,_|\__,_| |_|   \__,_|\___|_|\_\__,_|\__, |_|_| |_|\__, |___/
                                                              |___/         |___/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:40:39.007

```
ascii_art = r"""_  __     _ _           _         ____            _               _                 
 | |/ /__ _| | | __ _  __| | __ _  |  _ \ __ _  ___| | ____ _  __ _(_)_ __   __ _ ___ 
 | ' // _` | | |/ _` |/ _` |/ _` | | |_) / _` |/ __| |/ / _` |/ _` | | '_ \ / _` / __|
 | . \ (_| | | | (_| | (_| | (_| | |  __/ (_| | (__|   < (_| | (_| | | | | | (_| \__ \
 |_|\_\__,_|_|_|\__,_|\__,_|\__,_| |_|   \__,_|\___|_|\_\__,_|\__, |_|_| |_|\__, |___/
                                                              |___/         |___/     """
print ascii_art 
```

用于`r"""text"""`避免反斜杠转义 EOL。

# html - 只有当屏幕具有最小宽度时，是否有一种 html 方法不加载某些 html？

> ID：11224311
> 
> 赞同：0
> 
> 时间：2012-06-27T10:37:22.220
> 
> 标签：html, responsive-design

在响应式设计的范式中，像这样通过 css 隐藏东西很容易

```
@media screen and (max-width: 360px) {
    #flash {
    display:none;
} 
```

有没有办法在没有 javascript、flash 或服务器站点语言的情况下不加载 id="flash" 的 div？我不加载闪存部分的原因是我不希望移动设备加载它......

HTML：

```
<div id="flash">
   <flashgallerystuff></>
</div> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:48:28.293

唯一可能的方法（不使用 javascript）是为您的网站的正常版本和移动版本使用单独的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:06:33.987

您不能使用缺少 javascript 来隐藏元素，但您可以采用“渐进增强”类型的方法并使用 javascript*插入*有问题的 div。这样，没有 javascript 的用户永远不会出现 div。

另一种类似的方法是给body标签一个默认类，例如。'no-js'，您在使用 javascript 的页面加载时将其删除（因此没有 js 的浏览器将在其正文标签上包含该类）。然后您可以在 CSS 中使用该类为您的“flash”div 设置默认值“display:none”：

`.no-js #flash { display: none }`

# c# - 强制在 Certian 条件下检查 DataGridView CheckBox

> ID：11224314
> 
> 赞同：0
> 
> 时间：2012-06-27T10:37:33.420
> 
> 标签：c#, winforms, events, datagridview, checkbox

所有，我想做的很简单（或者我是这么认为的）。我目前有一个`DataGridView`带有复选框来指示用户是否应该处理。有些进程依赖于其他进程，所以我强制使用检查依赖进程

```
private void dataGridViewProcess_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == (int)ProcessColumns.Error)
    {
        if (!String.IsNullOrEmpty(dataGridViewProcess.Rows[e.RowIndex]
                                  .Cells[e.ColumnIndex].Value.ToString()))
        {
            Utils.ErrMsg(String.Format("{0}", 
                (String.IsNullOrEmpty(siteReportArr[currentSite, e.RowIndex]) ?
                "Error message currently unavalible. Try again later." : 
                siteReportArr[currentSite, e.RowIndex])));
        }
    }
    dataGridViewProcess.CommitEdit(DataGridViewDataErrorContexts.Commit);
}

private void dataGridViewProcess_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (!bInLoadEvent && e.RowIndex >= 0)
    {
        if (e.RowIndex == (int)CurrentProcess.N)
        {
            DataGridViewRow rowA = dataGridViewProcess.Rows[e.RowIndex];
            DataGridViewRow rowB = dataGridViewProcess.Rows[e.RowIndex + 1];
            if (Convert.ToBoolean(rowA.Cells[(int)ProcessColumns.Process].Value) 
                == false)
            {    
                rowB.Cells[(int)ProcessColumns.Process].Value = false;
            }
        }
        ...
        else if (e.RowIndex == (int)CurrentProcess.C)
        {
            DataGridViewRow rowB = dataGridViewProcess.Rows[e.RowIndex];
            DataGridViewRow rowA = dataGridViewProcess.Rows[e.RowIndex - 1];
            if (Convert.ToBoolean(rowA.Cells[(int)ProcessColumns.Process].Value) 
                == true)
            {
                rowB.Cells[(int)ProcessColumns.Process].Value = true;
            }
        }
    }
} 
```

所有这些程序性更改都可以正常工作，第一个是`dataGridViewProcess_CellValueChanged`事件中显示的最后一个。在这里，如果`C`检查了之前的过程并且用户尝试取消选中`C`，我想强制它保持选中状态。我目前无法让它做到这一点。

我试过使用`DataGridView` `Validated`事件，使用`CellDirtyStateChanged`事件无济于事。对于这个（看似非常基本的）问题的任何帮助将不胜感激。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:42:54.630

我认为问题在于您在事件处理链中的位置。我复制了您的代码并对其进行了一些修改。关键是最后一个条件是（可能）唯一一个您正在修改当前正在编辑的单元格的条件。我发现代码按预期执行，但复选框没有改变 - 直到复选框失去焦点，在这种情况下更改为正确的值。我通过将以下行更改`dataGridViewProcess_CellContentClick`为

```
dataGridViewProcess.CommitEdit(DataGridViewDataErrorContexts.Commit); 
```

至

```
dataGridViewProcess.EndEdit(); 
```

您将在 MSDN 上注意到[CommitEdit](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.commitedit.aspx)不会结束实际编辑。

# php - PHP - mssql 通过终端连接但在网络中失败

> ID：11224315
> 
> 赞同：0
> 
> 时间：2012-06-27T10:37:37.650
> 
> 标签：php, sql-server-2005

我使用这个脚本来测试我从 linux 服务器到 mssql 引擎的连接，我的问题是当我应用
[root@localhost html]# php sql.php 你连接到 mssql 上的新数据库。

现在，当我从 Web 访问 sql.php 时，它给我错误“警告：mssql_connect()：无法连接到服务器：”

任何线索真正发生了什么以及为什么我无法通过网络连接，同一本地网络防火墙中的两台服务器都已关闭

```
?php

$myServer = "mssql"; // host/instance_name
$myUser = "sa"; // username
$myPass = "mypasswd"; // paasword
$myDB = "new"; // database name

 // connection to the database
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
 or die("Couldnt connect to SQL Server on $myServer");

// select a database to work with
 $selected = mssql_select_db($myDB, $dbhandle)
 or die("Couldn.t open database $myDB");

    echo "You are connected to the " . $myDB . " database on the " . $myServer . ".";

      // close the connection
        mssql_close($dbhandle);
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:57:45.837

PHP 通常运行两个 php.ini 文件，1 个用于 cli，1 个用于 Apache，您需要确保在这两个文件中都启用了 mssql 扩展，而不仅仅是 cli 一个

```
extension=php_mssql.dll 
```

或者

```
extension=php_mssql.so 
```

我不确定您需要启用的确切模块名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T08:12:59.943

我有类似的问题，这是我的解决方案:)：

在检查 httpd "serive httpd status -l"

gru 01 08:58:27 pc6.home python[123130]: SELinux 的状态时，SELinux 正在阻止 /usr/sbin/httpd 从 name_connect 访问**tcp_socket 端口 1433**。

```
 *****  Plugin catchall_boolean (47.5 confidence) suggests   ******************

   If you want to allow httpd to can network connect
   Then you must tell SELinux about this by enabling the 'httpd_can_network_connect' boolean.
   You can read 'None' man page for more details.
   Do
   setsebool -P httpd_can_network_connect 1 
```

只需执行命令**setsebool -P httpd_can_network_connect 1 即可**修复连接到 mssql 的所有问题

# sql-server - 为什么减少 SQL Server 中的“最大服务器内存”会提高我的应用程序性能？

> ID：11224317
> 
> 赞同：1
> 
> 时间：2012-06-27T10:37:44.953
> 
> 标签：sql-server

我的应用程序的一个区域出现间歇性问题，它开始运行缓慢。该应用程序是带有 SQL Server 的 ASP.Net+。我们偶然发现，对 SQL Server 中的“最大服务器内存”进行*任何更改，无论是向上还是向下，都会立即停止该问题。*

问题区域非常动态，并且由许多线程同时更新，所以我目前最好的解释是数据库中的某种死锁问题。不幸的是，它很少发生，只在实时系统上发生，当它发生时，我们必须迅速修复它。由于“挖掘”的机会不多，我想缩小搜索范围，这种奇怪似乎是一个线索。

我用谷歌搜索了这个，并查看了“在线图书”，所以我知道“最大服务器内存”不是需要重新启动的设置。我找不到任何关于 RECONFIGURE 被称为“幕后”时会发生什么的详细描述。

我希望这里有人知道，或者可以向我指出更详细的资源。为了清楚起见，我不是在寻求一般性建议，所以请尽量保持具体。谢谢 ：）

更新：

调用`DBCC FREEPROCCACHE`对问题没有任何影响，而碰撞内存继续立即修复症状。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:10:41.080

你有一个性能问题，你应该通过调查性能来解决它​​，而不是[猜测](http://rusanu.com/2010/03/31/the-bizzaro-guide-to-sql-server-performance/)。遵循[等待和队列](http://technet.microsoft.com/en-us/library/cc966413.aspx)等性能故障排除方法来识别瓶颈，然后根据*识别*的问题采取适当的措施。

至于你对“内部僵局”的猜测，它们是……有创意的。一个更现实的解释是，通过弄乱服务器设置，您正在对[时钟指针](http://blogs.msdn.com/b/slavao/archive/2005/11/20/495093.aspx)发痒，从而驱逐您的[错误计划](http://www.sommarskog.se/query-plan-mysteries.html)。

# java - 为 JUnit 配置 log4j

> ID：11224318
> 
> 赞同：0
> 
> 时间：2012-06-27T10:37:45.947
> 
> 标签：java, junit, log4j

我想为 JUnit 测试用例配置 log4j。我的测试分布在多个文件中，但具有相同的 log4j 设置。我在哪里可以做？

我不想使用 log4j 属性文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:00:15.653

我的解决方案，似乎有效。

编写一个扩展 Log4j 系统的自定义类

公共类 myLogger 扩展 Logger { ... 东西 ...

}

对于“东西”，您需要实施以下（或至少我做到了）

某种构造函数 public myLogger (String name)

.. 在每个类中，您希望/需要包含 myLogger 的静态成员

```
private static final myLogger errorLog =  new myLogger("nameOfClassOrWhateverNameYouFancy") 
```

如果您在所有类中使用相同的名称，它们将记录到相同的日志记录实例（您可能已经知道）

回到你的 myLogger 类，你需要实现一个设置日志级别的方法（这就是我做的......）

```
/**
 * 
 * The add(int i, String s) method
 * @param s the message string
 *
 * @param i used in the switch to create the required level of debug
 * @param s the message to send
 * 
 * use this method to create a log message of any required level
 * The levels are as follows:
 * 1    debug - used during production
 * 2    info  - may be used for messages to user
 * 3    warn  - warnings for requesting users re-enter information (data type checking etc)
 * 4    error - programmatic / user error may result in unexpected output 
 * 5    fatal - severe error (comms error) the system will terminate, cleanly if possible, current state will be written to file
 * 
 * Prior to all this however the method determines the calling class of itself
 * 
 */

public void add(int i, String s)
{

    switch (i)
    {
    case 1: log.debug(s);break;
    case 2: log.info(s);break;
    case 3: log.warn(s);break;
    case 4: log.error(s);break;
    case 5: log.fatal(s);break;
    }
} 
```

现在，如果您想要一些“奇怪的东西”的特定日志实例，您有 2 个选项，正如我之前所说，您可以为命名记录器创建一个静态成员，或者您可以将静态成员添加到您的 myLogger 类（这就是我做到了）。

然后对于这些静态成员中的每一个，您可能需要一个唯一的

```
set[nameOfLogger](int i, string s) 
```

它基本上具有与上述方法相同的结构。

现在，如果您想从您调用的课程中调用它

```
myLogger.set[nameOfLogger](1, "s") 
```

你走了。

然后，您需要将有关日志级别（DEBUG、WARN 等）以及将消息发送到何处（控制台、文件等）的信息添加到您的 log4j.properties（如我所用）或 log4j.xml 中。

记住要确保关于设置静态命名记录器的行出现在 rootLogger 的实例之后，这让我很长一段时间都感到困惑！

我已经包含了我认为相当广泛的指导，因为我为此进行了相当长的一段时间的斗争，直到今天才最终完成！

我现在是一只快乐的兔子......直到我打破别的东西;）

大卫

抱歉，刚刚注意到您不想使用 log4j.properties 文件。有什么特别的原因吗？

如果不只是

```
import org.apache.log4j.Logger; 
```

创建一个日志实例

```
private Logger jUnitTestingLogger; 
```

然后使用各种方法调用设置输出（我特别想添加附加程序），我从来没有这样做过，所以不知道怎么做！

有趣的是，有一个 assertLog(boolean assertion, string message) 方法在您的实例中可能对您有好处。

# java - MongoDB文档检索

> ID：11224323
> 
> 赞同：1
> 
> 时间：2012-06-27T10:37:54.563
> 
> 标签：java, mongodb

我在java中使用Mongodb。我想检索文档内的文档。

我为此使用此代码：

```
 DB db = null;
        int count = 0;

        //Enter the day for which you want to search for logged on users
        String dayToSearch = "27-06-2012"; //Enter in the format dd-MM-yyyy

        db = DatabaseConnection.getDatabaseObject();
        Set<String> colls = db.getCollectionNames();

        for (String s : colls) {

            DBCollection coll = db.getCollection(s);

            DBObject obj = coll.findOne();

            if(obj==null)
                System.out.println("This is only null.");

            DBObject obj1 = (DBObject)obj.get("LoginRequest");
            if(obj1!=null){
                String time = (String)obj1.get("Time");
                if(time==dayToSearch){
                    BasicDBObject query = new BasicDBObject();
                    query.put("LoginResponse", new BasicDBObject());
                    DBCursor cur1 = coll.find(query);
                    if(cur1.hasNext()){
                        count++;
                    }
                }
            }
            else
                System.out.println("It is null again!!!");
            System.out.println(s);
        }

        System.out.println("No.of users logged in successfully: " + count); 
```

但我在 DBObject obj1 = (DBObject)obj.get("LoginRequest"); 处得到空值。每个集合的所有 obj1 对象都为空。我打印了 obj 并且结果是正确的。但 obj1 出来为空。

我的数据库是这种形式：

```
{
        "_id" : ObjectId("4fead665b79eedd6a5776f38"),
        "test" : "hi",
        "NBC Connection id" : "6f829b01382d556eaf16c34617C2",
        "LoginRequest" : {
                "Time" : "27-06-2012",
                "Model" : null,
                "Version" : null,
                "Username" : "acpptu20000",
                "Password" : "*******",
                "Language" : "en",
                "Manufacturer" : null
        }
}
{
        "_id" : ObjectId("4fead67cb79eedd6a5776f5b"),
        "GetInfoRequest" : {
                "MaxCallLogs" : 45,
                "MaxNewVoicemails" : 15,
                "GetInfoDateOptions" : 7,
                "MaxSavedVoicemails" : 15,
                "SubscribeForUpdates" : false
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:41:58.307

我认为您的代码比需要的要复杂得多。
尝试这样的事情：

```
 for(String s : colls)
        {
            DBCollection coll = db.getCollection(s);
            DBCursor whatIHaveBeenLookingFor = coll.find(
                new BasicDBObject().append("LoginRequest",
                new BasicDBObject().append("Time", dayToSearch)));
        } 
```

我没有对此进行测试，因为我没有您的数据库。因此，您可能必须更改某些内容。但这就是您可以**轻松地**从 MongoDB 中检索某些内容的方式。

PS：确保您确实必须遍历所有集合。

# jquery - 在嵌套 iframe 中*递归地查找给定元素*

> ID：11224324
> 
> 赞同：2
> 
> 时间：2012-06-27T10:37:54.717
> 
> 标签：jquery, jquery-selectors

在当前文档中找到给定的“div.myClass”元素以及它（以及它们的嵌套 iframe）可能具有的任何 iframe 的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T11:06:42.153

假设帧访问不受同源策略限制：

```
function getElem(selector, $root, $collection) {
    if (!$root) $root = $(document);
    if (!$collection) $collection = $();
    // Select all elements matching the selector under the root
    $collection = $collection.add($root.find(selector));
    // Loop through all frames
    $root.find('iframe,frame').each(function() {
        // Recursively call the function, setting "$root" to the frame's document
        getElem(selector, $(this).contents(), $collection);
    });
    return $collection;
}
// Example:
var $allImageElements = getElem('img'); 
```

# perl - 如何在没有 root 和 Internet 访问权限的情况下使用 cpanminus

> ID：11224325
> 
> 赞同：2
> 
> 时间：2012-06-27T10:37:57.017
> 
> 标签：perl, cpan

如何在没有 root 且没有 Internet 访问权限的情况下使用 cpanminus？我知道[这个关于没有 root 的 cpanminus](https://stackoverflow.com/questions/2980297/how-can-i-use-cpan-as-a-non-root-user)的问题，但建议的解决方案需要互联网访问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:52:25.373

1.  准备一个（迷你）CPAN 镜像：[minicpan](http://p3rl.org/minicpan) / [CPAN::Mini::Devel::Recent](http://p3rl.org/CPAN::Mini::Devel::Recent)，[如何镜像 CPAN](http://www.cpan.org/misc/how-to-mirror.html)
2.  告诉`cpanm`使用您的新离线镜像[`--mirror`](http://p3rl.org/cpanm#mirror)。[`file`接受带有该方案](http://enwp.org/File_URI_scheme)的URI 。

# java - 我必须使用 java 查询 MS SQL DB

> ID：11224332
> 
> 赞同：1
> 
> 时间：2012-06-27T10:38:21.120
> 
> 标签：java, jdbc

我必须使用 java 查询 MS SQL DB。我正在使用以下代码查询数据库

```
 Class.forName("net.sourceforge.jtds.jdbc.Driver");
         Connection conn = DriverManager.getConnection(
                 "jdbc:jtds:sqlserver://XXX.XX.XX>XX:1433/DBNAME", "USERNAME", "Password");

         querystr="select DATEDIFF(second,Finish_Time,ReqTime) As FinishDifference from DB.SCHEMA.TABLE where ID='123'";
         Statement stmt=conn.createStatement();
         ResultSet res=stmt.executeQuery(querystr);
         System.out.print(res.getRow()); 
```

当我使用查询字符串手动查询数据库时，我能够成功获得结果，但 res.getRow() 显示 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:40:59.113

您忘记包含`next()`以获取第一条记录：

```
ResultSet res=stmt.executeQuery(querystr);
if(res.next()) // add this line
    System.out.print(res.getRow()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:23:43.160

Initially ResultSet returns current cursor position.

```
ResultSet res=stmt.executeQuery(querystr);
res.getRow();// It will return 0 (Zero) because result set is pointing to begining of the first record 
```

res object is pointing to 0th position of table in your DB. When you iterate with the help of `res.next();`

It will move to next record and now if you call

```
 res.getRow();// It will return 1 because cursor is moved to 1st record of table. 
```

Try this.

```
while(res.next())
{
         System.out.println(res.getRow());
} 
```

It will print the All rows number one by one.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:44:52.517

该`getRow()`方法给出当前行的行号。第一行是数字 1，第二行是数字 2，依此类推。

如果您的情况没有当前行，则将当前行号设为 0。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getRow](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getRow) ()

# c++ - C++ 'typedef' 与'使用 ... = ...'

> ID：11224336
> 
> 赞同：30
> 
> 时间：2012-06-27T10:38:45.567
> 
> 标签：c++, c++11, typedef, using-directives

> **可能重复：**
> [typedef 和 using 在 C++11 中有什么区别？](https://stackoverflow.com/questions/10747810/what-is-the-difference-between-typedef-and-using-in-c11)

以下代码编译并运行。我的问题是重命名模板专业化的“typedef”和“using”方法有什么区别？

```
template<typename T>
struct myTempl{
    T val;
};

int main (int, char const *[])
{
    using templ_i = myTempl<int>;
    templ_i i;
    i.val=4;

    typedef myTempl<float> templ_f;
    templ_f f;
    f.val=5.3;

    return 0;
} 
```

## 编辑：

如果没有区别，你更喜欢哪一个？/ 为什么要引入 using ... = ... 版本？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-27T10:53:21.303

**他们是一样的。**

引用 C++11 标准（或具体的草案）：

> *typedef-name*也可以由alias *-declaration*引入。***using***关键字之后的标识符成为*typedef-name*，标识符之后的可选*属性说明*符序列属于该 *typedef-name*。**它具有与由typedef**说明符引入的语义相同的语义。特别是，它没有定义新类型，并且不应出现在*type-id*中。

我认为*“与 typedef 说明符相同的语义”*说明了一切。

# java - 发送 JSON 数据 Servlet Applet 通信示例

> ID：11224338
> 
> 赞同：0
> 
> 时间：2012-06-27T10:39:00.753
> 
> 标签：java, servlets, applet

您好正在开发一个应用程序，其中 servlet 必须将数据（来自数据库）发送到 applet 我已经放弃了这个[链接](https://stackoverflow.com/questions/6769255/applet-servlet-communication)

它非常有用，但他们提到通过 JSON 传递数据，任何人都可以举一个例子。我尝试了对象的序列化，但得到了 java.io.EOFException 异常（我搜索了一些人说可能是 JVM 版本未匹配导致此问题的解决方案）所以我决定使用 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:44:45.937

如果您要创建或读取 json 字符串，那么我建议您使用[Google 的 Gson](http://code.google.com/p/google-gson/)。

要从 servlet 发送 json 响应，请执行以下操作：

```
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
        PrintWriter writer = null;
        try {
            writer = response.getWriter();
            writer.write(json);
        } finally {
            writer.close();
        } 
```

# html - 制作 twitter bootstrap 全角？

> ID：11224340
> 
> 赞同：0
> 
> 时间：2012-06-27T10:39:04.640
> 
> 标签：html, css, twitter-bootstrap, responsive-design, sidebar

我正在尝试创建一个响应迅速且具有右侧边栏的简单网站。

最好我希望右侧边栏堆叠在移动设备的顶部。

这是我的代码：http: [//jsfiddle.net/wyLTA/embedded/result/](http://jsfiddle.net/wyLTA/embedded/result/)

**我需要改变什么才能使其全宽，而不是卡在左边？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T12:07:39.107

`<div class="span3" id="sidebar"> ... </div>`在您的 .span6 和以下 css / jQuery 之前添加。

**HTML：**

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3" id="sidebar">sidebar</div>
    <div class="span6">
      <div class="hero-unit">
        ... 
```

**CSS：**

```
#sidebar{
  background-color:#555555;
  position:absolute;
  right:0px;
  margin-bottom:9px;
} 
```

**jQuery：**

```
function sidebar() {
  var windowwidth=$(window).width();
  if(windowwidth>=768) $("#sidebar").css('position','absolute')
  else $("#sidebar").css('position','relative')
}
$(document).ready(sidebar);
$(window).resize(sidebar); 
```

[http://jsfiddle.net/baptme/wyLTA/8/](http://jsfiddle.net/baptme/wyLTA/8/)

* * *

或使用媒体查询

**CSS：**

```
#sidebar{
  background-color:#555555;
  right:0px; 
  margin-bottom:9px;
} 

@media (max-width: 767px) {
  #sidebar{
    position:relative;       
  }
}

@media (min-width: 768px) {
  #sidebar{
    position:absolute;
  }
} 
```

[http://jsfiddle.net/wyLTA/11/](http://jsfiddle.net/wyLTA/11/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:30:06.253

只是想通了，从`span6`到`span9`做的伎俩。

代码：http: [//jsfiddle.net/wyLTA/9/embedded/result/](http://jsfiddle.net/wyLTA/9/embedded/result/)

[虽然仍然想知道如何使侧边栏堆叠到顶部而不是底部]

# f# - 将大序列作为函数参数传递

> ID：11224352
> 
> 赞同：4
> 
> 时间：2012-06-27T10:40:00.170
> 
> 标签：f#, pass-by-reference, pass-by-value

这确实是一个简单的问题（但我似乎无法在 MSDN 文档中找到答案）。

如果我在 F# 中将大序列和对象作为函数参数传递，除非我提供 byref 关键字，否则它们是否总是按值复制？问题是，我无意修改参数，但同时，我不希望每次调用函数时都复制大对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T15:33:40.837

我不同意人们在这里使用的术语。

我将其表述为：默认情况下，.NET 中的所有内容都是按值传递的，例外情况是例如C#中的参数`ref`和F# 中的参数。但是，序列和数组以及大多数其他类型（除了结构体和基元）都是对象引用，这意味着当您将它们作为参数（按值）传递时，您仅传递对实体的引用，调用者和被调用者共享堆上的相同实际实体。所以引用是按值传递的，但引用本身只是小东西，而它们指向的对象实体（包含所有数据）是在堆上共享的大东西。`out``byref`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T11:24:09.180

正如评论中提到的，F# 使用与 C# 基本相同的机制。这意味着只有*值类型*（原始值，如`int`,`float`和结构）被复制到堆栈上，所有其他类型都通过引用传递 - 这包括所有集合（序列`seq<'T>`、数组`'T[]`以及不可变函数列表`list<'T>`）。

当您使用不可变类型（函数式`list<'T>`且`seq<'T>`没有副作用）时，除了性能之外，传递引用和复制对象之间没有区别 - 运行时始终将它们作为引用传递，但您无需担心除非您正在优化某些程序（如果您可以更改传递机制，它不会改变行为）。

对于（可变）数组，您可以通过查看 John Palmer 的答案中的示例轻松地看到行为是通过引用传递的。

作为旁注，`byref`如果要创建对堆栈分配的可变变量的引用，则使用关键字（或类型）。这意味着，您可以使用它来传递对值类型变量的引用：

```
let bar (a:byref<int>) =    // takes reference to a (stack-allocated) 'int' variable
  a <- 42                   // mutate the variable

let mutable foo = 10        // declare a mutable variable
bar &foo                    // pass reference to the `bar` function 
```

如果您使用 传递集合`byref`，您实际上将传递对堆栈分配引用的引用，该引用实际上指向堆分配的数据结构。但是，`byref`它在 F# 中很少使用 - 在调用 C/C++ 或 COM 库时，您主要需要它来实现互操作性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T10:47:02.460

默认情况下，序列/列表/数组通过引用传递

例如

```
let mutate (arr:int[]) =
    arr.[0] <- 1

let t = Array.zerocreate 1
mutate t
printfn "%i" (t.[0]) //prints 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:52:06.823

由于值是不可变的，因此您传递的相同序列将被修改或用于..对象不会每次都被复制..

虽然如果您修改序列，那么将使用新值创建一个新序列

# c++ - 迭代 std::deque 时出现奇怪的运行时错误

> ID：11224353
> 
> 赞同：3
> 
> 时间：2012-06-27T10:40:02.610
> 
> 标签：c++, stl, iterator, runtime-error

考虑以下代码：

```
 1  typedef std::deque<int> mydeque_t;
 2  mydeque_t mydeque;
 3   
 4  mydeque_t::iterator start = mydeque.begin();
 5  
 6  for (int i = 0; i != 1000; ++i)
 7       mydeque.push_back(i);
 8  
 9  for (mydeque_t::iterator myint = start; myint != mydeque.end(); ++myint)
10     *myint += 1; 
```

执行它时，我总是在第 10 行遇到运行时错误（现场示例：http: [//ideone.com/juQAA](http://ideone.com/juQAA)）。但是，当我将第 6 行更改`for (int i = 0; i != 100; ++i)`为代码时工作正常。

通过将`start`定义（第 4 行）移到第一个 for 循环后面可以很容易地修复代码，但在我的示例中，我需要它保留在它之前。但是即使这样，我认为它应该运行良好，谁能向我解释为什么它不能运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T10:44:41.487

调用 后`push_back()`，所有迭代器都将失效。来自[`deque::push_back()`](http://en.cppreference.com/w/cpp/container/deque/push_back)：

> 将给定的元素值附加到容器的末尾。 **所有迭代器都无效**。没有引用无效。

*猜想*：代码可能正常工作，`100`而不是`1000`因为不必重新分配双端队列的内部存储来容纳`100`导致`begin()`迭代器保持有效的元素。

# spotify - 如何向 Spotify 播放列表添加其他列

> ID：11224355
> 
> 赞同：1
> 
> 时间：2012-06-27T10:40:07.783
> 
> 标签：spotify

我正在尝试构建一个包含播放列表的 Spotify 应用程序。我需要为播放列表视图提供额外的列。我无法将 html 注入视图，因为模型很快就会覆盖编辑。有什么方法可以将我自己的数据添加到播放列表项中？目前，我有一个在播放列表视图旁边使用另一个 <ul> 的 hack。这看起来像是播放列表的扩展，但缺少很多功能。

更新：这是我最终做的。这主要是由下面的评论引起的。

```
playlistModel = new models.Playlist();
    var playlistView = new views.List(playlistModel, function(track) {
    var myData = getDataFor(track.data.uri);
    var trackView = new views.Track(track,
            views.Track.FIELD.NAME |
                views.Track.FIELD.ARTIST |
                views.Track.FIELD.DURATION |
                views.Track.FIELD.ALBUM);

    var name = document.createTextNode(myData.name);

    var img = document.createElement('img');
    img.src = 'https://graph.facebook.com/' + myData.friendID + '/picture';
    img.className = 'friendPic';
    img.alt = 'facebook profile picture of ' + myData.friendName;

    var span = document.createElement('span');
    span.appendChild(img);
    span.appendChild(name);

    trackView.node.insertBefore(span, trackView.node.firstChild);

    return trackView;
});
$('#playlist').append(playlistView.node); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:41:33.710

我得到了这个工作，但我不确定这是否是一个好的和可靠的生产计划，因为它将取决于内部数据结构。

```
//Code alters the list returned from views.List and appends a column with the text PLAY.
var results = document.getElementById('idOfElementToDisplayListIn');
var pl = models.Playlist.fromURI(playlist_url, function(playlist) {
        var list = new views.List(playlist, function (track) {
    var ntrack=new views.Track(track, 
           views.Track.FIELD.NAME |
           views.Track.FIELD.ARTIST |
           views.Track.FIELD.DURATION |
           views.Track.FIELD.ALBUM);
    var aNode = document.createTextNode("PLAY");
    ntrack.node.appendChild(aNode);
    return ntrack;
    });
    results.appendChild(list.node); 
}); 
```

# asp-classic - asp缓存CSS文件

> ID：11224357
> 
> 赞同：0
> 
> 时间：2012-06-27T10:40:13.103
> 
> 标签：asp-classic, vbscript, web

嗨，我正在编写一个经典的 ASP，当我导入我的 CSS 时，它被缓存了，我希望能够将它从缓存中删除。因为我只在特定场景中使用 CSS 文件。

任何人都可以帮忙吗？

```
<% If Session("SG_bIsRemoteBetslip")= True then %>
<style type="text/css" media="screen, tv, projection">
@import url(/Marketing/Site-Files/Sportsbook/Betslip/remote-betslip.css);
</style>
<% Session("SG_bIsRemoteBetslip") = False %>
<% End If %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:19:42.003

您可以通过简单地将查询字符串传递给 src 来防止 css 缓存：

```
<% 
If Session("SG_bIsRemoteBetslip")= True then
    response.write "<style type=""text/css"" media=""screen, tv, projection"" href=""/Marketing/Site-Files/Sportsbook/Betslip/remote-betslip.css?ID=" & Server.urlencode(now()) & """ />"
    Session("SG_bIsRemoteBetslip") = False   
End If
%> 
```

这当然不是很吸引人，但它可以是一种快速简便的方法，可以强制所有访问者更改最近的 CSS，而不管他们的缓存如何。

# javascript - Knockout JS 和 jQuery UI Dialog 的 title 属性

> ID：11224359
> 
> 赞同：1
> 
> 时间：2012-06-27T10:40:15.660
> 
> 标签：javascript, mvvm, knockout.js

绑定 jQuery UI 的 Dialog 标题属性的最佳方法是什么？最初，在 上`ko.applyBindings`，KO 成功更新了 title 属性。但是，在`.dialog()`调用之后，绑定会丢失。

见小提琴：http: [//jsfiddle.net/jordanarseno/YFBsQ/4/](http://jsfiddle.net/jordanarseno/YFBsQ/4/)

我*可以*手动观察 keyup 的文本框并使用以下方法更改标题：

```
$("input").live("keyup", function(){
    $("#dialog").dialog( "option", "title", $(this).val());
}); 
```

但是，如果可能的话，我想摆脱它并遵循更多的淘汰赛惯例。

这里最好的方法是什么？问题是关于 title 属性，但理论上它可以应用于任何 Dialog 的选项......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:15:13.397

您可以尝试使用自定义绑定：

```
ko.bindingHandlers.ko_dialog = {
    init: function (element, valueAccessor) { 
        $(element).dialog({title: ko.utils.unwrapObservable(valueAccessor())});

    },
    update: function (element, valueAccessor) {
        $(element).dialog("option", "title", ko.utils.unwrapObservable(valueAccessor()));
    }
}; 
```

并以这种方式调用它：

```
<div id="dialog" data-bind="ko_dialog: textboxinput"> 
```

我试图编辑你的小提琴，但由于某种原因它不能在 jsfiddle 上工作，但它可以在我的本地电脑上工作！试一试... [http://jsfiddle.net/YFBsQ/31/](http://jsfiddle.net/YFBsQ/31/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:27:10.603

我已经知道为此使用订阅功能。

```
function viewModel() {
  var self = this;
  self.title = ko.observable('title');

  self.title.subscribe(function(newValue) {
    $('#dialog').dialog('option', 'title', newValue);
  });
} 
```

[把它搞定](http://jsfiddle.net/Zh5Zs/2/)

它在功能上与自定义绑定方法非常相似，但更直接。

查看[本页](http://knockoutjs.com/documentation/observables.html "这一页")底部的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T00:18:44.477

另一个选项：Computed - 这些将在属性更改时调用，最终可以更新您的模型。jquery UI 通过创建一个将 ID 插入到其命名模式中的内部元素来工作，因此您需要定位 ID：“#ui-dialog-title-YourIdHere”...简单地说，只需创建一个包含信息的计算属性您需要然后在元素内，通过以下方式调用 jquery 插入方法到生成的 UI 元素： $("#ui-dialog-title-YourIdHere").html("Updated Title with model vars" + self.var1() + ")");

# iphone - 是否可以在 Iphone 中创建视频警报？

> ID：11224360
> 
> 赞同：0
> 
> 时间：2012-06-27T10:40:16.050
> 
> 标签：iphone, ios, ipad, ios5, ios4

我需要在 iPhone 应用程序中创建视频警报。是否可以创建这样的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:44:04.920

如果您打算在给定时间播放视频，则只有在应用程序打开且处于活动状态时才有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:06:38.807

用于`EventKit FrameWork`获取警报警报并设置时间日期月份年份和您的事件描述！事件开始时使用`MPMoviePlayerController`.

# javascript - getAttribute("name") 取消转义 html？

> ID：11224362
> 
> 赞同：4
> 
> 时间：2012-06-27T10:40:16.730
> 
> 标签：javascript, html, dom

我们有一些自定义的 JS 脚本来处理工具提示，这些脚本在我们渲染页面时被放入一个 dom 属性（工具提示）中。

但是，当我尝试检索此工具提示（显示为 div）时，字符串 javaScript 似乎会自动取消转义属性值。这是正常行为吗？有没有办法避免这种情况？

我遇到的问题是 <email@example.org> 变成（无效）html。

复制示例：

```
<div tltip ="&lt;text&gt;" id="escaped" />
<div tltip ="<text>"id="notescaped" /> 
```

js：

```
a  = document.getElementById("escaped").getAttribute("tooltip");
b  = document.getElementById("notescaped").getAttribute("tooltip");
a.match("<"); //returns true (unexpected)
a.match("<"); //returns true (expected)
a == b; // returns true (unexpected) 
```

编辑：

澄清我试图显示一个（div）工具提示，我想以某种方式读取内容，例如： `"<b> &lt;email@example.com&gt <\b>"` 从 dom 并将其显示在一个 div 中，它应该看起来像：“ **<email@example.org>** ”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:43:03.840

“取消转义”字符的不是 JavaScript，而是解码实体的 HTML 解析器。这是预期的行为。

如果这听起来不合逻辑，请告诉我如何在属性中添加双引号和单引号。

```
<div tltip=""'">          does not work.
<div tltip="&quot;'">     does work.
<div tltip='"&#39;'>      does work.
<div tltip="&quot;&#39;"> does work. 
```

*关于已编辑的问题*
您不必阅读原始源代码。例如：

```
<div tltip="&lt;b&gt;test&lt;/b&gt;" id="test"></div>

var output1 = document.getElementById('html');
var output2 = document.getElementById('plain');
var attrValue = document.getElementById('test').getAttribute('tltip');
output1.innerHTML = attrValue;
output2.textContent = attrValue; 
```

将呈现为：

输出 1：**测试**
输出 2：<b>测试</b>

`textContent`旧 IE 版本不支持。一种跨浏览器兼容的方式是：

```
output2[document.textContent === null ? 'textContent' : 'innerText'] = attrValue;
// OR
output2.innerHTML = ''; // Empty contents
output2.appendChild(document.createTextNode(attrValue)); 
```

* * *

如果您仍想解码实体，则以下操作将起作用：

```
// <b> -> &lt;b&gt;
function decode(strHTML) {
    var tmp = document.createElement('div');
    tmp.appendChild(document.createTextNode(strHTML));
    return tmp.innerHTML;
} 
```

# c# - 如何在 C# 中解析没有特定标签名称的 XML

> ID：11224364
> 
> 赞同：3
> 
> 时间：2012-06-27T10:40:17.517
> 
> 标签：c#, xml, xml-parsing

我有以下 XML，我想在我的 C# 代码中对其进行解析。但是，我不知道该怎么做。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<results>
  <fields>
    <field>COLUMN_NAME_1</field>
    <field>COLUMN_NAME_2</field>
    <field>COLUMN_NAME_3</field>
    <field>COLUMN_NAME_4</field>
  </fields>
  <rows>
    <row>
      <col>value_for_column_1</col>
      <col>value_for_column_2</col>
      <col>value_for_column_3</col>
      <col>value_for_column_4</col>
    </row>
    <row>
      <col>value_for_column_1</col>
      <col>value_for_column_2</col>
      <col>value_for_column_3</col>
      <col>value_for_column_4</col>
    </row>
    ...
  </rows>
</results> 
```

这只是一个例子，因为我无法提供真实数据。XML 的结构看起来完全一样。“COLUMN_NAME_”和“value_for_column_”由字符串表示。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:50:51.907

首先，创建一个[xml 文档](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)对象。然后获取根节点，然后访问您的自定义节点。

```
 XmlDocument doc = new XmlDocument();
    doc.Load(fileName);
    XmlNode root = doc.DocumentElement;
    XmlNode s = root.SelectSingleNode('/' + rootName + '/' + section); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:46:34.567

看一下，你可以递归地[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)遍历属性。[`ChildNodes`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes)

例如

```
void Recurse(XmlNodeList list)
{ 
     foreach(XmlNode node in list)
     {
         // Do some work
         Recurse(node.ChildNodes);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:51:08.160

正如其他人所指出的，[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)是读取此类文件的最舒适的方法之一。您可以使用 遍历节点`foreach`，可以针对它运行 XPath 查询等。

我想补充一点，如果 XML 文件非常大（因此一次在内存中读取它是不切实际的），有一个[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)类，它允许您从顺序读取 XML 文件从头到尾，只保留一小部分在内存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T14:49:47.423

通过使用以下内容，我们可以获得 fields 元素和 rows 元素：

*   `node.FirstNode`- 获取父节点的第一个子节点
*   `node.NextNode`- 获取下一个兄弟节点

加载 xml 并初始化列列表。

```
XElement root = XElement.Load(file); // or .Parse(string);
List<List<string>> columns = new List<List<string>>(); 
```

获取列标题：

```
XElement fields = (XElement)root.FirstNode;
fields.Elements().Select((x, i) => 
{
    columns.Add(new List<string>());
    columns[i].Add((string)x); 
    return true; // because a select has to return something
}).ToArray(); 
```

然后获取行：

```
XElement rows = (XElement)fields.NextNode;
rows.Elements().ToList().ForEach(row =>
    row.Elements().Select((x, i) => 
    { 
        columns[i].Add((string)x); 
        return true; 
    }).ToArray()); 
```

然后，列列表将包含标题，然后是按列排序的所有行。

PS我需要`.ToArray()'s`用于我的测试，您的项目中可能不需要它们。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T10:43:55.487

这是执行此操作的最简单方法：

```
 private static void Main()
 {
        const string xml = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?> <results> ... </results>";
        XmlDocument doc = new XmlDocument();

        doc.LoadXml(xml);
        var fieldsCollection  = doc.GetElementsByTagName("fields");
        var rowsCollection = doc.GetElementsByTagName("rows");
 } 
```

# facebook - Facebook App 在粉丝专页上分享

> ID：11224377
> 
> 赞同：0
> 
> 时间：2012-06-27T10:41:02.987
> 
> 标签：facebook, api

当我试图通过我的应用程序在我的粉丝页面上发布时，它是以我而不是页面管理员的身份发布的，这是我的代码：

```
 function getPages() {

 FB.api('/me/accounts', function (resp)
 {
 var l=resp.data.length;

     for (var i = 0, q = resp.data.length; i <q; i++)
     {
         var page = resp.data[i];

         FB.api(page.id + '/feed', 'post', params, function(response) {
         if (!response || response.error) {
        alert('Error occured');
          } else {

          }

     }); 
```

此解决方案运行良好：

```
 FB.api('/me/accounts', function (resp)
 {
 var l=resp.data.length;

     for (var i = 0, q = resp.data.length; i <q; i++)
     {
         var page = resp.data[i];

          FB.api(page.id + '/feed', 'post', {
         message: 'GRATIS GRATIS GRATIS BIOGRAFBILLETTER TIL ALLE. Men skynd dig inden             de er væk. Tryk her for at få dem - tager kun 2 minutter:',
         status: 'success',
         url: pic 
     }, function (response) {

         if (!response || response.error) {

         } else {

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:45:56.167

那是因为您使用自己的访问令牌来发布帖子

使用从调用中`access_token`检索到的每个页面将帖子作为页面本身。`/me/accounts`

# iphone - 想在 facebook 用户墙上上传 youtube 视频链接

> ID：11224380
> 
> 赞同：0
> 
> 时间：2012-06-27T10:41:09.980
> 
> 标签：iphone, objective-c, ios, facebook, video

嗨，我正在开发一个应用程序，在该应用程序中，我需要使用 URL 在 Facebook 上上传 YouTube 上传的视频，或者我们可以说我想在 Facebook 上发布 URL。我已将 Facebook 集成到我的应用程序中，我可以在 Facebook 上上传照片墙但无法通过 URL 上传视频。

如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:36:00.800

好吧，听起来您已经启动并运行了 Graph API？

在这种情况下，只需将您的 URL 发布为这样的按摩：

```
-(void)postMessageOnUsersWall:(NSString*)msg
{
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   msg, @"message", // The status message
                                   nil];

    [self.facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate: self];
} 
```

# iphone - iTunesConnect GameCenter 排行榜新功能移至群组

> ID：11224388
> 
> 赞同：0
> 
> 时间：2012-06-27T10:41:40.330
> 
> 标签：iphone, ios, game-center, leaderboard

游戏中心有一个新功能，iTunes Connect。它说：

> 要与您提供的其他应用共享此应用的排行榜和成就，请将此应用移至 Game Center 组

我的问题是关于数据的。我在应用商店有一个应用。我也会有另一个应用程序。如果我使用这个分享功能，我的第一个应用排行榜分数会被删除吗？或者你知道这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:34:52.380

我建议您查看免费的 WWDC 2012 视频（转到 [developer.apple.com]）并选择 WWDC 2012 视频的链接。有各种视频可以解释这个新功能 - 我认为您想要的视频是“Session 508 - Game Center 的新功能”。

视频“Session 500 - Game Technologies Kickoff”和“Session 521 - Building Game Center Games for OS X”可能也很有趣。 [1](https://developer.apple.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-07T22:46:03.977

我认为这里已经更详细地回答了这个问题：[Game Center groups](https://stackoverflow.com/questions/30893545/game-center-groups?noredirect=1#comment54640536_30893545)

简而言之，您现有的数据不会被删除。当您创建组或将应用程序移入组时，您将决定如何合并现有数据。

# matlab - Matlab将文件保存为在其他变量中定义的名称

> ID：11224390
> 
> 赞同：2
> 
> 时间：2012-06-27T10:41:45.737
> 
> 标签：matlab, variables, save

我想在流程循环结束时将多个变量加载到一个 .mat 文件中。我有一行简单的代码：

```
save draw.mat Output 
```

但我无法找到一种方法来编码“使用变量 X 给出的名称”而不是“输出”，这样我就可以循环该过程并将多个变量保存在 draw.mat

那么那么

```
X = 'Chocolate' 
```

变量名称保存为 Chocolate。

我相信这很简单，但我在这里找不到解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:56:59.983

您需要 SAVE 的函数形式。换句话说，可以像这样调用 SAVE：

```
save('draw.mat', 'Output1', 'Output2'); 
```

因此，如果您要保存的变量名在一个单独的变量中，您可以这样做

```
v1 = 'Output1';
v2 = 'Output2';
save('draw.mat', v1, v2); 
```

甚至

```
v = {'Output1', 'Output2'};
save('draw.mat', v{:}); 
```

[SAVE 参考页面](http://www.mathworks.co.uk/help/techdoc/ref/save.html)包含完整的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:01:06.727

您可以使用命令的`-struct`形式`save`。您构建一个结构体，其字段包含生成的 .mat 文件中的变量名称。

例子：

```
s = struct();
s.VariableOne = 1;
s.VariableTwo = 2;
save draw.mat -struct s; 
```

文件 draw.mat 现在将包含两个名称为“VariableOne”和“VariableTwo”的 1x1 双精度变量。

您还可以在一个命令中构建结构：

```
s = struct('VariableOne', {1}, 'VariableTwo', {2}); 
```

或者您可以使用以下`cell2struct`功能：

```
data = {1,2};
names = {'VariableOne', 'VariableTwo'};
s = cell2struct(data(:), names(:), 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T00:24:24.873

让

```
A = [2 5 8; 25 2 4; 4 1 7];
save('A.mat') 
```

现在你想用其他名字保存它说`B`

```
B = A;
save('B.mat') 
```

# java - 获取 Linux 中 Java 线程的线程 ID

> ID：11224394
> 
> 赞同：10
> 
> 时间：2012-06-27T10:41:51.633
> 
> 标签：java, linux, multithreading, pid

我有一个 Java 应用程序，其中创建了一些线程（通过`new Thread()`）。使用`ps`我可以看到它们具有不同的线程 ID（LWP 列），我想从 Java 应用程序中获取这些 ID。

在我发现的与该主题相关的大多数帖子中（例如，[这个](https://stackoverflow.com/questions/35842/process-id-in-java)），解决方案是使用`ManagementFactory.getRuntimeMXBean().getName()`.

但是，使用该方法会给我主线程的 PID（即使我从其中一个线程调用它），所以它并不能真正解决我的问题。

`Thread`有没有办法为应用程序创建的每个线程获取线程 ID ？

是否可以使用 JNI 来完成它？如果我能以某种方式连接到我可以调用的 C 函数`syscall(__NR_gettid)`，那可以解决我的问题。我真的不关心可移植性，所以我完全可以接受只适用于 Linux 机器的解决方案。

**更新：**我实际上已经通过使用 JNI 解决了我的问题。详细信息在我的回答中进行了解释。谢谢大家的建议/意见。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T13:47:58.590

最后，我发现 JNI 方法是解决我的问题的最佳方法。作为参考，我发布了代码并为其构建说明（基于Wikipedia上的[示例）：](http://en.wikipedia.org/wiki/Java_Native_Interface#Examples)

负责与 C 代码 ( `GetThreadID.java`) 接口的 Java 类：

```
public class GetThreadID {
    public static native int get_tid();

    static {
        System.loadLibrary("GetThreadID");
    }
} 
```

C文件负责获取线程ID（`GetThread.c`）：

```
#include <jni.h>
#include <syscall.h>
#include "GetThreadID.h"

JNIEXPORT jint JNICALL
Java_GetThreadID_get_1tid(JNIEnv *env, jobject obj) {
    jint tid = syscall(__NR_gettid);
    return tid;
} 
```

如何使用`GetThreadID`类的示例：

```
class Main {
    public static void main(String[] args) {
        int tid = GetThreadID.get_tid();
        System.out.println("TID=" + tid);
    }
} 
```

最后，构建指令（`javah`自动生成`GetThreadID.h`）：

```
JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:bin/javac::")
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:.
javac GetThreadID.java
javah GetThreadID

gcc -I${JAVA_HOME}/include -fPIC -shared GetThreadID.c -o libGetThreadID.so
javac Main.java
java Main 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:55:23.560

[这篇博](http://javadrama.blogspot.co.uk/2012/02/why-is-java-eating-my-cpu.html)文提供了一种从 java 线程 id 映射到 LWP id 的方法。

它的要点似乎是 NLWP id 映射到 java 线程 id。

# android - 为什么在android中显示软键盘时布局会顶部

> ID：11224396
> 
> 赞同：1
> 
> 时间：2012-06-27T10:41:55.743
> 
> 标签：android, tabs

我正在使用`ActivityGroup`. 在此我有一个要求，例如消息用户图像和用户名显示在布局顶部，消息编辑框和发送按钮位于布局底部。单击编辑框时，我的用户详细信息用户图像和名称将显示在顶部并且未显示在屏幕上。如果我使用`WindowsoftInputMode="adjudtResize"`我的标签来了。如果只使用 `WindowsoftInputMode="adjustSpan|adjudtResize"`不出现的标签，我的用户详细信息又会上升。是否有任何解决方案可以在顶部显示用户详细信息而标签栏应该在底部？请任何人帮助我，我感到沮丧。

# iphone - 在属性列表中持久化数据

> ID：11224397
> 
> 赞同：0
> 
> 时间：2012-06-27T10:42:02.803
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 plist 来存储和检索我最喜欢的列表。一切正常，直到我重新启动我的 iPhone。收藏夹列表消失。我的问题是我可以使用 plist 来保存数据吗？如果可能的话，有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:11:15.540

您如何存储和重新加载您的 plist？一般来说，这应该不是问题。只需在进入后台（或每当发生变化时）将 plist 保存到应用程序的文档目录中并在启动时重新加载。

只需使用以下方法（对于 NSArray 或 NSDictionary）：

```
- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)flag 
```

您**不应该** `NSUserDefaults`像其他人建议的那样使用，因为这些仅用于用户默认值，而不用于用户数据。保存到文档的目录可确保正确备份数据并且即使对于较大的数据集也能正常工作。

`NSUserDefaults`适用于您可能在设置视图中显示的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:45:58.683

是的，您可以使用 p-list 来保存数据并将您的 p-list 复制到文档目录中......使用以下代码：

```
NSError *error;

NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"your_plist_name.plist"]; 
```

这可能会帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:52:07.120

我没有 ios 开发经验，但我建议您使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)。
我在 Mac OS X 应用程序上使用它，它完成了这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:58:44.967

正如 bruno 建议的那样，为什么不将用户偏好数据存储在 NSUserDefault 中。

你可以这样做：

保存：

```
self.userDefaults = [NSUserDefaults standardUserDefaults];
[self.userDefaults setObject:myObject forKey:@"myKey"];
[self synchronize]; 
```

装载：

```
self.userDefaults = [NSUserDefaults standardUserDefaults]; 
NSObject *myObject = [self.userDefaults objectForKey:@"myKey"]; 
```

# android - 使用achartengine在android中的条形图上设置滚动条

> ID：11224400
> 
> 赞同：1
> 
> 时间：2012-06-27T10:42:12.530
> 
> 标签：android, bar-chart, achartengine

在我的项目中，我必须以每日净额显示 30 天的条形图。在查看条形图活动时，X 轴标签已折叠并且**全部****显示** 没有任何间距。当我单击缩放按钮时，视图被展开，我们可以看到带有相应 x 轴标签的栏。我需要在活动开始时间的扩展视图上显示条形图。

## 显示条形图的编码：

```
 XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer. setLegendTextSize(15);
//     renderer.setInScroll(true);
        //renderer.setMargins(new int[]{10,10,10,0});
        int length = colors.length;
        for (int j = 0; j < length; j++) {
          SimpleSeriesRenderer r = new SimpleSeriesRenderer();
          r.setColor(colors[j]);
          renderer.addSeriesRenderer(r);
        }
        if(flag==1)
     renderer.setChartTitle("Monthly Basis");
        if(flag==0)
             renderer.setChartTitle("Weekly Basis");
        if(flag==2)
             renderer.setChartTitle("Yearly Basis");
    renderer.setXTitle("Date");
    renderer.setYTitle("NetAmount");

    renderer.setXAxisMin(0);

    //renderer
    renderer.setYAxisMin(100);
   // renderer.setYAxisMax(35000);
    renderer.setAxesColor(Color.GRAY);
    renderer.setLabelsColor(Color.LTGRAY);
          renderer.setXLabels(0);
          //renderer.setYLabels(31);
            renderer.setDisplayChartValues(true);
            renderer.setXLabelsAlign(Align.LEFT);
            renderer.setYLabelsAlign(Align.RIGHT);
          if(flag==0 || flag==1)
          {
             for(int axis=1;axis<=31;axis++)
            {
                String d;
                d=String.valueOf(axis);
                renderer.addTextLabel(axis,d);

            }
          }
          else
          {
              renderer.setXAxisMin(2005);
              for(int axis=2005;axis<=2011;axis++)
                {
                    String d;
                    d=String.valueOf(axis);
                    renderer.addTextLabel(axis,d);

                }

             // renderer.setXLabels(4);
          }
             //renderer.setPanEnabled(false,false);
             //renderer.setZoomEnabled(false,false);
           // renderer.setPanLimits(new double[] { 0, 32, -10, 40 });
          // renderer.setZoomLimits(new double[] { 0, 32, -10, 40 });
            renderer.setZoomRate(3.0f);
            renderer.setBarSpacing(0.25);
            //renderer.set(new  double[] {0,30,100,35000});
            //Intent in;

            List<double[]> xvalues = new ArrayList<double[]>();

            int count=1,j=0;
           if(flag==0 || flag==1)
           {
            double xdata[]=new double[31];
            while(count<32)
            {

            xdata[j]=count;
            count++;
            j++;

            }
            xvalues.add(xdata);
           }
           if(flag==2)
           {
            double xdata[]=new double[7];
            count=2005;
            while(j<7)
            {

            xdata[j]=count;
            count++;
            j++;

            }
            xvalues.add(xdata);
           }

          //  return ChartFactory.getBarChartIntent(context, buildBarDataset(titles,xvalues,values), renderer,
            //    Type.DEFAULT);
            mchart=ChartFactory.getBarChartView(context,buildBarDataset(titles,xvalues,values), renderer, Type.STACKED);
            //LinearLayout layout = (LinearLayout) findViewById(R.id.chart1);
            layout.addView(mchart);
            mchart.repaint();

            //startActivity(in);

  }

     protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> xvalues, List<double[]> values) {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
     int length = titles.length;
     for (int i = 0; i < length; i++) {
    //CategorySeries series = new CategorySeries(titles[i]);
XYSeries series = new XYSeries(titles[i]);
double[] v = values.get(i);
double[]x=xvalues.get(i);

int seriesLength = v.length;
    for (int k = 0; k < seriesLength; k++) {
if(v[k]==0)
{
v[k]=MathHelper.NULL_VALUE;
}
else
{
     series.add(x[k],v[k]);
}
      //Log.i("Invent","X Axis"+x[k]);
//series.add(xdata[k],v[k]);
     }
     dataset.addSeries(series);
    for (int k = 0; k < seriesLength; k++) {
if(v[k]==MathHelper.NULL_VALUE)
{
v[k]=0;
}
     }
    }
   return dataset;
       }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:15:23.767

~~我不是 100% 肯定，但这里试一试。~~

首先，当当前建议的是 addXTextLabel 时，您似乎使用了已弃用的方法 addTextLabel。

其次，您设置 setXLabels(0); with 看起来很奇怪，因为您将拥有超过 0 个 XLabels 也不确定这将如何与所使用的折旧方法一起使用。

第三，我认为 addTextLabel 中的 X 值实际上是一个位置而不是条形索引。

~~我既不是 aChartEngine 方面的专家，也没有时间测试您的代码。我今晚晚些时候会做一些测试，并用结果编辑这个答案。如果没有其他答案可以帮助您。~~

（编辑）

测试您的代码后，我得到以下结果：

![插入后的标签](../Images/8153379fcd389b2f01d97c596e50c43d.png)

这是一个可以通过 3 种方式解决的问题：

*   减少标签的数量，例如只打印另一个。
*   为标签使用较小的字体，我认为在这种情况下这会很困难，因为我认为可读性会受到很大影响。
*   尝试通过例如移除另一个轴上的标签来使轴更长。我猜你想显示那里的数量标签，所以在这里没有用。

我已经做了一个非常简单和天真的跳过其他的实现，因为我认为这是这里最有用的解决方案。

```
for(int axis=1;axis<=31;axis++)
{
  if(axis%2 == 1){
    String d;
    d=String.valueOf(axis);
    renderer.addTextLabel(axis,d);
  }
} 
```

结果如下所示：

![在此处输入图像描述](../Images/4da4efc0c3b0b068a74d48c1f28f3fa7.png)

希望这可以帮助！

（再次编辑）

对上述问题的新理解仍然是正确的，但这是我现在理解的问题的答案。

要使平移工作，您需要启用平移（已在此问题中完成），然后将 xAxisMax 设置为小于数据集长度的值。在此示例中，最简单的方法是将其设置为例如 15f，如下所示：

```
renderer.setXAxisMax(15.0f); 
```

希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:44:38.483

如果我正确理解您非常令人困惑的问题，您需要使用[`setBarSpacing()`](http://www.achartengine.org/content/javadoc/org/achartengine/renderer/XYMultipleSeriesRenderer.html#setBarSpacing%28double%29).

# javascript - 从未调用过 jQuery.form uploadProgress

> ID：11224402
> 
> 赞同：2
> 
> 时间：2012-06-27T10:42:28.263
> 
> 标签：javascript, jquery, forms, wordpress, upload

我正在尝试编写一个使用 Vimeo API 上传视频的 WordPress 插件。我正在尝试为上传提供一个进度条，让用户可以看到它正在工作。为了生成状态栏，我正在使用 jQuery.Form 插件并访问 uploadProgress 回调，但我无法触发回调。我正在使用 Chrome 19，因此浏览器应该可以使用上传和文件 API。

我一直在复制 jQuery.Form 演示中的代码，该演示适用于他们的页面，但对我的页面没有影响。- [http://jquery.malsup.com/form/progress.html](http://jquery.malsup.com/form/progress.html)

屏幕左下方的小 Chrom 通知显示上传百分比，因此我确信文件正在发送。

想法？

```
 <form method="POST" action="<?php echo $endpoint; ?>" id="vimeo_upload_form" enctype="multipart/form-data">
        <p>
            <label>Upload video to Vimeo</label>
            <input type="hidden" name="ticket_id" value="<?php echo $token; ?>" id="ticket_id"/>
            <input type="hidden" name="chunk_id" value="0" id="chunk_id"/>
            <input type="file" name="file_data" id="file_data"/>
        </p>
        <p>
            <input type="submit" name="" value="upload">
        </p>
    </form>

jQuery(document).ready(function($) {

status_msg = $("#status_msg")
console.log(status_msg)
percent = $("#percentage")
bar = $("#bar")

$('#vimeo_upload_form').ajaxForm({
    beforeSend: function() {

        status_msg.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    complete: function(xhr) {
        status_msg.html(xhr.responseText);
    }
}); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:38:38.283

我在某个地方找到了这个，它可以在我的网站上运行。我可以上传视频，它会在上传完成百分比的同时显示进度条。

您只需要 php 文件即可将视频从临时位置移动到目的地。

希望它对你有用，对我有用:)

```
<html> 
<head>
<style type="text/css"?
#progressbox {
border: 1px solid #ccc;
padding: 1px;
position:relative;
width:400px;
border-radius: 3px;
margin: 10px;
display:none;
text-align:left;
}
#progressbar {
height:40px;
border-radius: 3px;
background-color: #20bbfb;
width:1%;
}
#statustxt {
top:3px;
left:50%;
position:absolute;
display:inline-block;
color: #000000;
}
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script> 

<script type="text/javascript"> 
$(document).ready(function() { 
    //elements
    var progressbox     = $('#progressbox');
    var progressbar     = $('#progressbar');
    var statustxt   = $('#statustxt');
    var submitbutton    = $("#SubmitButton");
    var myform  = $("#UploadForm");
    var output  = $("#output");
    var completed   = '0%';

    $(myform).ajaxForm({
        beforeSend: function() { //brfore sending form
            submitbutton.attr('disabled', ''); // disable upload button
            statustxt.empty();
            progressbox.slideDown(); //show progressbar
            progressbar.width(completed); //initial value 0% of progressbar
            statustxt.html(completed); //set status text
            statustxt.css('color','#000'); //initial color of status text
        },
        uploadProgress: function(event, position, total, percentComplete) { //on progress
            progressbar.width(percentComplete + '%') //update progressbar percent complete
            statustxt.html(percentComplete + '%'); //update status text
            if(percentComplete>50) {
                statustxt.css('color','#fff'); //change status text to white after 50%
            }
        },
        complete: function(response) { // on complete
            output.html(response.responseText); //update element with received data
            myform.resetForm();  // reset form
            submitbutton.removeAttr('disabled'); //enable submit button
            progressbox.slideUp(); // hide progressbar
        }
    });
});
</script>
</head>
..
..
<form id="UploadForm" action="process.php">..</form>
<div id="progressbox"><div id="progressbar"></div ><div id="statustxt">0%</div ></div>
<div id="output"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:18:04.957

我的 WordPress 插件中的 jQuery Form 也有同样的问题，它没有触发 uploadProgress 回调。

我已经将最新版本的 jQuery Form 插件与“jquery-form”作为句柄加入队列，然后我发现 WordPress 已经包含使用相同句柄注册的 jQuery Form 插件！因此，实际上我排队的新版本并没有被加载。WordPress版本插件的问题在于它是一个不支持uploadProgress回调的旧版本。

所以解决方法是注销 jQuery Form 插件的 WordPress 版本，然后注册新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T00:56:21.047

你没有声明“bar”对象

你必须添加到你的代码

```
<div id='bar'></div> 
```

一切都会好起来的..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T15:17:23.013

我一直在检查这个，因为我遇到了同样的问题。据我了解，您指的是尚未加载的元素，这就是回调不会触发的原因。

在 document.ready 之外设置选项数组以及表单提交绑定，在里面设置 .ajaxForm()。

像这样：

```
 $(document).ready(function() { 

     $('#form_ajax').ajaxForm();

     });

     var options = {

         beforeSubmit: function(arr, $form, options) {

            $('#sending_mail').show();

        },

         success: function() {

            $('#sending_mail').hide();
            $('#form_ajax').clearForm();
            $('#form_ajax').resetForm();
        }

      }; 
```

然后像这样绑定你的表单：

```
 $('#form_ajax').submit(function() {

          $(this).ajaxSubmit(options);
          return false;

       }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-02T02:23:13.647

您应该尝试使用更新的 Ajax 表单版本。请继续关注所需的 jQuery 版本。您可以从[http://malsup.github.io/jquery.form.js下载它](http://malsup.github.io/jquery.form.js)

# opencv - OpenCV 加载和显示视频会产生不准确的颜色

> ID：11224410
> 
> 赞同：2
> 
> 时间：2012-06-27T10:42:55.487
> 
> 标签：opencv

我按照 OpenCV 中给出的示例进行视频显示，只是取出了一些对我来说不必要的转换。我现在拥有的代码加载视频文件然后显示它，问题是再现的视频颜色错误。

这是代码：

```
using namespace std;
using namespace cv;

// The main function

int main (int argc, char *argv[])
{

VideoCapture cap ("ETMI 002.mpg");  // Open the file

if (!cap.isOpened ())               // Check if opening was successful
    cerr << "I have failed!" << endl;

else
{
    Mat edges;
    Mat frame;
    namedWindow("edges",1);
    while (cap.read (frame))
    {
      cvtColor(frame, edges, CV_BGR2RGB);  
      imshow("edges", edges);
      if(waitKey(30) >= 0) break;
    }
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:29:50.743

为避免在复制视频
*中将 imshow("edges", `edges`)* 转换为
*imshow("edges", `frame`)*

```
while (cap.read (frame))
{
  cvtColor(frame, edges, CV_BGR2RGB); 

  // here is the change you are showing the converted image 
  // just simply add the original read frame

  imshow("edges", frame);   // here 
  if(waitKey(30) >= 0) break;
} 
```

# ios - 优化 iOS 应用文件大小

> ID：11224413
> 
> 赞同：0
> 
> 时间：2012-06-27T10:42:56.533
> 
> 标签：ios

优化 iOS 应用程序的整体文件大小还有哪些其他解决方法？我已经完成了，不过将我的图像制作成 PNG-8。

我刚刚在我的项目中注意到的是，添加的一些文件是外部类（来自 Github 的由 .h 和 .m 组成的类）

如果我只引用这些类会更好吗？即使一个模块只有 2 个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:54:58.243

引用类仅适用于头文件，您需要在项目中添加静态库。这个静态库将包含您的 .m 文件的编译版本，

您可以将一些类编译成静态库，然后将它们插入到您的项目中，但是我认为这不会大大减少项目大小，所以我的建议是不要这样做

# android - Android getApplicationContext 内存管理

> ID：11224414
> 
> 赞同：3
> 
> 时间：2012-06-27T10:42:57.493
> 
> 标签：android, memory-management, lifecycle

在这篇文章中

[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context)

马克墨菲 说

“如果来自 getApplicationContext() 的 Context 保留了由您对它的调用创建但您没有清理的东西，它可能会造成内存泄漏。对于 Activity，如果它保留了某些东西，一旦 Activity 被垃圾收集，其他一切也冲出。应用程序对象在您的进程的生命周期内保持不变。“

什么调用创建了应用程序上下文保持的东西？

我有一个库，它需要各种事物的上下文。它可以在后台运行并跨越活动，但使用和更新活动上下文将是有问题的。

我认为这可能是使用应用程序上下文更可取的场合之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:26:45.947

如果库中对象的生命周期可以跨越多个活动，那么绝对使用应用程序上下文。使用活动上下文可以防止垃圾收集器丢弃上下文。由于活动上下文可以保存相当多的数据，因此您的内存使用量会急剧增加。

此外，如果一个活动被关闭，它会放弃它的窗口令牌。尝试使用该上下文生成一个对话框将给出一个`BadTokenException`. 因此，如果对象不直接与活动生命周期相关联，那么将活动上下文赋予对象是没有意义的。

编辑：[这是一个可靠的来源](http://android-developers.blogspot.se/2009/01/avoiding-memory-leaks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:04:01.017

在我的一个图书馆项目中，我遇到了同样的问题。

建议即使在库项目中也使用活动上下文。有很多组件只需要活动上下文。例如：对话框。因此，我的建议是将活动上下文从您的项目传递到库项目。

尽管应用程序上下文可以节省库项目中的序列化问题。

# nhibernate - QueryOver Select 带来的结果比 Count 多

> ID：11224416
> 
> 赞同：0
> 
> 时间：2012-06-27T10:43:00.013
> 
> 标签：nhibernate, queryover

我正在尝试使用 QueryOver 进行搜索，但是返回的结果虽然根据搜索条件是正确的，但正在重复。

这是我用来计算结果的代码，它可以正常工作

```
// disjunction to find query string in note text of tag list
var disjunction = new Disjunction();
disjunction.Add(Restrictions.On<Note>(e => e.Text).IsInsensitiveLike(query));

var tagSubQuery = QueryOver.Of<Note>().JoinQueryOver(x => x.Tags).Where(x => x.Text.IsInsensitiveLike(query)).Select(x => x.Id);
disjunction.Add(Subqueries.WhereProperty<Note>(x => x.Id).In(tagSubQuery));

// find notes between dates and based on disjunction
var notes = this.DataOver.Where(x => x.CreatedUTC >= startDate && x.CreatedUTC <= endDate).Where(disjunction);

// only show notes within permitted accounts
var subnotes = QueryOver.Of<Note>().JoinQueryOver(x => x.Accounts).Where(x => x.Company.Id == user.Company.Id).Select(x => x.Id);
var returned = notes.WithSubquery.WhereProperty(x => x.Id).In(subnotes);

return returned.RowCount(); 
```

如果我将最后一行更改为带有跳过的选择语句并采取这样的方式

```
return returned.OrderBy(x => x.CreatedUTC).Desc.Skip(skip).Take(take).List<Note>(); 
```

然后我拿回 3 个音符，而不是 2 个。1 个音符被复制，而另一个没问题。我只能假设这是因为查询匹配了链接到一个笔记的两个标签。

nHibernate profiler输出的SQL如下

```
SELECT TOP (20 /* @p0 */) this_.Id           as Id47_1_,
                 this_.CreatedGMT   as CreatedGMT47_1_,
                 this_.CreatedLocal as CreatedL3_47_1_,
                 this_.CreatedUTC   as CreatedUTC47_1_,
                 this_.UpdatedGMT   as UpdatedGMT47_1_,
                 this_.UpdatedLocal as UpdatedL6_47_1_,
                 this_.UpdatedUTC   as UpdatedUTC47_1_,
                 this_.CreatedBy    as CreatedBy47_1_,
                 this_.UpdatedBy    as UpdatedBy47_1_,
                 this_.Text         as Text47_1_,
                 this_.UserId       as UserId47_1_,
                 this_.Suppress     as Suppress47_1_,
                 tags2_.NoteId      as NoteId3_,
                 tag3_.Id           as TagId3_,
                 tag3_.Id           as Id27_0_,
                 tag3_.CreatedGMT   as CreatedGMT27_0_,
                 tag3_.CreatedLocal as CreatedL3_27_0_,
                 tag3_.CreatedUTC   as CreatedUTC27_0_,
                 tag3_.UpdatedGMT   as UpdatedGMT27_0_,
                 tag3_.UpdatedLocal as UpdatedL6_27_0_,
                 tag3_.UpdatedUTC   as UpdatedUTC27_0_,
                 tag3_.CreatedBy    as CreatedBy27_0_,
                 tag3_.UpdatedBy    as UpdatedBy27_0_,
                 tag3_.Text         as Text27_0_
FROM   [dev.Client].[dbo].Note this_
       left outer join [dev.Client].[dbo].TagToNote tags2_
         on this_.Id = tags2_.NoteId
       left outer join [dev.Client].[dbo].Tag tag3_
         on tags2_.TagId = tag3_.Id
WHERE  this_.Id in (SELECT this_0_.Id as y0_
                    FROM   [dev.Client].[dbo].Note this_0_
                           inner join [dev.Client].[dbo].NoteToAccount accounts3_
                             on this_0_.Id = accounts3_.NoteId
                           inner join [dev.Client].[dbo].Account account1_
                             on accounts3_.ClientAccountId = account1_.Id
                    WHERE  this_0_.Id in (SELECT this_0_0_.Id as y0_
                                          FROM   [dev.Client].[dbo].Note this_0_0_
                                          WHERE  (this_0_0_.CreatedUTC >= '2012-06-01T00:00:00.00' /* @p1 */
                                                  and this_0_0_.CreatedUTC <= '2012-06-30T00:00:00.00' /* @p2 */)
                                                 and (lower(this_0_0_.Text) like '%dtes%' /* @p3 */
                                                       or this_0_0_.Id in (SELECT this_0_0_0_.Id as y0_
                                                                           FROM   [dev.Client].[dbo].Note this_0_0_0_
                                                                                  inner join [dev.Client].[dbo].TagToNote tags3_
                                                                                    on this_0_0_0_.Id = tags3_.NoteId
                                                                                  inner join [dev.Client].[dbo].Tag tag1_
                                                                                    on tags3_.TagId = tag1_.Id
                                                                           WHERE  lower(tag1_.Text) like '%dtes%' /* @p4 */)))
                           and account1_.CompanyId = 1 /* @p5 */)
ORDER  BY this_.CreatedUTC desc 
```

如果我将它直接放入 SQL 管理工作室，它会返回 3 个结果，其中两个是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:19:33.733

这是因为左连接导致了笛卡尔积。您应该通过附加以下内容来应用 DistinctRootTransformer：

.TransformUsing(Transformers.DistinctRootEntity)

# sql - 访问 XP 报表总和计算

> ID：11224417
> 
> 赞同：0
> 
> 时间：2012-06-27T10:43:01.610
> 
> 标签：sql, ms-access, database-design

我正在添加一个用于处理各种服务的呼叫中心的反馈数据库。

需要添加的部分内容是显示特定 CSO（客户服务官）所做的每项服务的总条目的报告。输入信息时，它是通过一个包含 2 个下拉列表的表单 - 一个用于 CSO 名称，一个用于输入将与该条目相关的服务。

我希望能够通过查询运行报告，其中将输入 CSO 名称和服务以及日期期间，输出将是一份报告，其中包括每项服务的总数（不仅仅是输入的服务） CSO 已收到反馈。

我希望这是有道理的，我确信有一个非常简单的解决方案或公式！

我试图将其放入我已经在其查询中使用以下 SQL 代码的报告中：

```
SELECT [Query Main].[Entry No], [Query Main].[Log Entry Date], [Query Main].[Log Entry Time], [Query Main].[Daily Feedback].[CSO Name], [Query Main].[CSO Team], [Query Main].[Reference Number(s)], [Query Main].Address, [Query Main].[Feedback Comments], [Query Main].[Customer?], [Query Main].[Back Office?], [Query Main].Specify, [Query Main].[Feedback done by], [Query Main].[Feedback date], [Query Main].[CSO Comments], [Query Main].Agents.[CSO Name], [Query Main].Service, [Query Main].[Date of Error], [Query Main].[Entered By], [Query Main].[Is this CSO Feedback?]  
FROM [Query Main]  
WHERE ((([Query Main].Service)=[Enter Service Name]) AND (([Query Main].[Date of Error]) Between [Enter beginning date (dd/mm/yy)] And [Enter ending date (dd/mm/yy)]) AND (([Query Main].[Is this CSO Feedback?])="Yes" Or ([Query Main].[Is this CSO Feedback?]) Is Null));` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:06:30.927

这将为您提供一个起点 - 如果您不想深入研究 SQL 本身，可以使用 Totals 查询

```
SELECT CSO,Service,Count(Feedback) 
FROM MyData 
WHERE FeedbackDate between DateStart and DateEnd
   AND CSO=[CsoName]
GROUP BY CSO,Service; 
```

我建议研究一下学习 SQL，即使它只是为了键入比在查询生成器上拖放更快的情况

*旁注：我已经很久没有使用查询生成器了，我必须先编写 SQL，然后查看更改视图时激活了哪些按钮*

SQL解释：

`SELECT CSO,Service,Count(Feedback)`- 你想返回什么。在这种情况下，CSO、服务和反馈计数。它如何决定要计数的反馈稍后在 SQL 中
`FROM MyData`- 我们要从哪个表（或查询）获取信息
`WHERE FeedbackDate between DateStart and DateEnd AND CSO=[CsoName]`- 我们要如何选择数据
`GROUP BY CSO,Service;`这是决定计数的方式 - 在这种情况下，我们将所有将 CSO 和服务放在一起，然后计算为每个组找到的反馈数量。

首先，查询将根据我们对日期范围的限制以及我们感兴趣的 CSO 获得所有 CSO、服务和反馈的列表。
然后它将放置所有相同的 CSO 和服务，并且计算它找到的反馈数量。
最后，它会给你这个列表，所以你最终会得到类似的东西：

```
CSO   Service       CountOfFeedback
FRED  Open account  11
FRED  Close Account 2
FRED  Send Order    47 
```

# jquery - 如何在asp.net中使用jquery上传图像/文件并保存到sql server，反之亦然

> ID：11224421
> 
> 赞同：1
> 
> 时间：2012-06-27T10:43:30.497
> 
> 标签：jquery, asp.net, image, upload

我需要帮助在 jquery 中上传图像，然后将其发送到服务器端以插入到 sql server 并从 sql server 检索图像，然后将其附加到 div。有没有办法从客户端到服务器端，反之亦然？看了很多文章，但是大部分都是纯服务器端的。谁能给我一个例子？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:19:15.057

对于异步文件上传，请参阅[这篇文章](http://weblogs.asp.net/jalpeshpvadgama/archive/2011/12/23/async-file-upload-with-jquery-and-asp-net.aspx)。

1）通过这种方式，您将能够获得图像字节，您可以将其保存到数据库中，或者您可以将其转换为图像并将其保存到目录中。

2）保存图像后，您可以从数据库中获取字节，在您的页面中您可以使用

```
<img id="img" src="GetImage.ashx?ImageId=1"/> 
```

在 GetImage.ashx 中，您可以编写以下代码

```
//byte[] image = Get image bytes from DB using ImageID
System.Drawing.Image img = byteArrayToImage(image);

MemoryStream stream = new MemoryStream();
img.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
img.Dispose();
stream.Position = 0;
byte[] data = new byte[stream.Length];
stream.Read(data, 0, (int)stream.Length);
stream.Dispose();
Response.Clear();
Response.ContentType = "image/jpeg";
Response.BinaryWrite(data); 
```

字节转换功能

```
public Image byteArrayToImage(byte[] byteArrayIn)
{
  MemoryStream ms = new MemoryStream(byteArrayIn);
  Image returnImage = Image.FromStream(ms);
  return returnImage;
} 
```

# web-services - 每秒 10000 次调用的 Web 服务

> ID：11224427
> 
> 赞同：0
> 
> 时间：2012-06-27T10:43:52.453
> 
> 标签：web-services, intervals, frequency

我打算创建移动应用程序。它每 5 秒自动调用一次 Web 服务来检查是否有新消息给用户。想象一下，有 10.000 个用户同时使用这个应用程序。这意味着 Web 服务每秒接收 2000 个请求（这意味着每秒对数据库进行 2000 次点击）。

我该如何处理这么多的请求？
如何优化数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:46:51.990

轮询并不是一个很好的选择，您最好寻找推送通知。这在客户端和服务器端需要更少的资源。

您只需要找到一种方法来为您的服务提供合适的推送技术。也许你可以使用像 XMPP 这样的东西。WhatsApp 也使用它（即使它们以二进制格式传输数据）。

为了处理如此多的连接，您可能需要一个带有代理的集群。这是一个非常常见的情景。我相信你会很快找到更多的东西。您忘记添加有关服务器配置的更多信息。

# java - Java 高级 GUI 应用程序框架

> ID：11224434
> 
> 赞同：1
> 
> 时间：2012-06-27T10:44:15.637
> 
> 标签：java, swing, user-interface, javafx, qt-jambi

这可能是一个愚蠢的问题，但我很沮丧，并想确保：

我正在编写一个工具，它必须有一个非常好的 GUI（渐变、颜色、圆角颜色、自定义工具提示......）

没有选择轻松获得它吗？

我必须使用 SWT、Swing、awt 并尝试不成功地应用渐变并删除所有丑陋的剩余灰色部分 .etc 吗？？？？

**编辑：**

好吧，这不是一个愚蠢的问题。

我一直在尝试调查并且真的很困惑：

我从 javaFX 开始，桌面应用程序的性能似乎很糟糕。

尝试安装 QtJambi - 但似乎并没有人在维护这个项目，所以我想知道它是否有用。

我错了吗？

你能建议别的吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:41:30.287

您可以使用 Swing，可能与 SwingX 库一起使用，我推荐[“Filthy Rich Clients”一书](http://filthyrichclients.org/) ，该书是关于使用 Swing 创建如此精美的 GUI。

一个替代方案是 JavaFX，它***旨在***同时用于“互联网或移动应用程序”和“Swing 替代品”。只有时间能证明，它是否会成功。目前看来，每个热爱 JavaFX 的人，都恰巧受雇于 Oracle……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:01:44.833

Qt JAMBI 并没有真正被放弃。它的维护背后还有3个熟练的人。

我的个人经验规定：

*   **Java FX**正在成为 Swing 的替代品（尽管 Swing 在开发任何级别的 GUI 方面都很强大，但它的外观和感觉使它越来越少被采用，还有一些显而易见的事情可以用 Qt Jambi 或 SWT 用三行代码来实现，使用 Swing 在 10 行或更多行代码中实现）。JavaFX 没有你想象的那么成熟，也没有其他 GUI 框架那么好看。

*   **SWT。**不如 Swing 强大，但 LAF 非常出色。然而，SWT 设计平庸，其背后的意识形态无助于快速实现目标。

*   **Java-Gnome 绑定：**如果您正在为 Linux 开发 GUI。想想 Java-Gnome 绑定。它允许您轻松构建 GTK+ GUI。它的设计非常强大。

*   **Qt-Jambi：**非常强大，并且拥有构建高级丰富 GUI 的必要工具。它提供了强大的功能。它需要一些时间来学习基础知识。它与 Swing 操作其小部件的方式有所不同。即使它都是Java代码。同样，我不明白为什么 Qt Jambi 的未来是黑暗的。我对占碑非常乐观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:52:15.520

你可以试试 Swing 的[实质](http://java.net/projects/substance/)外观和感觉（相当好看的摇摆）。此外，SWT 让您使用[CSS](http://www.vogella.com/articles/Eclipse4CSS/article.html)进行样式设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T06:42:15.980

如果您不想走 JavaFX 路线，可以查看[Amino](http://code.google.com/p/leonardosketch/wiki/AminoMissionStatement)框架。Amino 的使命宣言说：“ *Amino 是 21 世纪桌面应用程序的图形堆栈和 UI 工具包。*' 和 '*氨基明显小于 JavaFX。它的目标是快速、易学并且非常非常精简；以向后兼容性和功能为代价。*'。

# c++ - 这两个 typedef 有什么区别？

> ID：11224435
> 
> 赞同：2
> 
> 时间：2012-06-27T10:44:16.963
> 
> 标签：c++, android-ndk

下面代码中标记的两条线有什么区别？

```
template <const char *N> struct A {
    static const char *p;
    };

template <class T> struct B {
    static const char c[1];
    typedef A<B<T>::c> C;   // <---
    // typedef A<c> C;      // <---
    }; 
```

我收到的错误是：

> test_t.C：在 'const char B::c [1]' 的实例化中：
> test_t.C:7：从这里实例化
> test_t.C:7：内部编译器错误：in instantiate_decl，在 cp/pt.c:15628
> 请提交完整的错误报告，
> 并在适当的情况下提供预处理的源代码。
> 有关说明，请参见[http://gcc.gnu.org/bugs.html](http://gcc.gnu.org/bugs.html)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T11:02:13.367

*“内部编译器错误”*大致翻译为*“您可能提供了损坏的代码，或合理但令人困惑的代码。无论哪种方式，您都不走运。请获取下一个版本并希望最好。”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:01:41.377

您的编译器有错误，无法编译第一个表单。

由于这两种形式是等价的，因此您可以使用第二种形式来解决该错误。可能还值得尝试更新的编译器版本（如果有的话）来查看错误是否已修复。

# javascript - Crawler4j 和 Tripadvisor

> ID：11224441
> 
> 赞同：0
> 
> 时间：2012-06-27T10:44:32.617
> 
> 标签：javascript, crawler4j

我正在使用 crawler4j 为 Tripadvisor 编写爬虫。我需要收集一个项目的所有评论，但指向“下一个”评论的链接（带有数字的评论）关联的不是链接，而是 javascript 函数。此功能在 Tripadvisor 服务器的某处定义。有没有办法评估这些函数并获取它们返回的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:09:24.140

您可以使用 HTMLUnit 来获取页面内容。该库可用于运行所有 javascript 代码，然后获取要操作的页面代码。

这是一个示例[代码](https://stackoverflow.com/questions/3897871/how-do-i-click-a-javascript-button-with-htmlunit)，取自 stackoverflow 上的一个问题。

```
 HtmlElement element4 = null;
Iterable<HtmlElement> iterable5 = page.getAllHtmlChildElements();
Iterator<HtmlElement> i6 = iterable5.iterator();
while(i6.hasNext() {
    HtmlElement anElement = i6.next();
        if(anElement instanceof HtmlImage) {
        HtmlImage input = (HtmlImage) anElement;
        String[] elements = "http://example.com/pages/powerbutton.png".split( "/" );

        if(input.getSrcAttribute().indexOf(elements[elements.length-1] )> -1 ){
            element4 = input;
            break;
        }
    }
} 
HtmlPage page = element4.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:51:48.707

你试过[eval](http://www.w3schools.com/jsref/jsref_eval.asp)吗？或者如果您需要更改调用者上下文，[请致电。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call "称呼")

eval 将字符串作为输入并尝试执行它。

# html - 什么可能导致这个“空白”区域？

> ID：11224442
> 
> 赞同：0
> 
> 时间：2012-06-27T10:44:35.143
> 
> 标签：html, css

我正在处理一个错误，即在访问特定页面时，页面底部为空白：

![](../Images/0c44b3517a0f936164092fd9fbd23fac.png)

我检查了 FireBug，空白区域只是空的，根本没有 HTML 代码。

我的问题是：什么可能导致这种问题？它发生在 Firefox、Chrome、IE 最新版本上。谢谢你。

编辑：正如我的回答所提到的，这是在将背景图像应用于表单而不是正文时引起的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:46:27.040

它是空白的，因为你没有用内容填充它。如果您希望将页脚放在底部，您可以阅读[http://www.alistapart.com/articles/footers/](http://www.alistapart.com/articles/footers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:14:20.183

经过一番调查，我发现问题是因为我们将背景图像应用于`form`，而不是`body`. 我在 CSS 中做了一些修改，现在它按预期工作。

谢谢你。

# string - 句子师

> ID：11224446
> 
> 赞同：1
> 
> 时间：2012-06-27T10:44:51.530
> 
> 标签：string, text, split, divide, sentence

我必须为分隔的句子划分文本。

行。看起来很简单。

只需搜索“。” 或者 ”？” 或者 ”！” 并将下一句添加到数组中。

但不幸的是不是那么伟大和简单。

如何避免以下情况：

华盛顿特区

将被拆分为：“Washington, D”和“C”。

或者

“有一次，我们在老师瑟曼夫人的椅子下引爆炸药。”

分为：

“有一次我们在老师的椅子下引爆炸药，夫人”

和

“瑟曼”

也许是带有包含“。”的首字母缩略词的数据库。?

提前感谢您的提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:04:28.567

查看[NLTK](http://nltk.org/)。它为您描述的问题提供了开箱即用的解决方案

# php - 在确认屏幕后删除数据库值 - 值未删除

> ID：11224449
> 
> 赞同：0
> 
> 时间：2012-06-27T10:44:54.747
> 
> 标签：php, javascript, sql

我昨天已经发布了一个同样的问题，但我遇到了另一个问题。我使用 javascript 制作了一个确认屏幕，但在按下“确定”后，该值不会被删除。

这是我的代码：

```
<script type="text/javascript">
function confirmation() {
    var answer = confirm("Weet u zeker dat u deze activiteit wilt verwijderen?");
    if (answer){
        alert("De activiteit wordt nu verwijderd.");
        window.location ="roosters_verwijderen.php";
    }
    else{
        alert("De activiteit is niet verwijderd.");

    }
}
</script> 
```

这是按钮：

```
<a href="roosters_verwijderen.php?activiteitID='. $row['activiteitID'] .'" onclick="confirmation(); return false"><IMG src="iconen/kruis.png" border="0"></a> 
```

这里的问题是，“activiteitID”不再发送到页面“roosters_verwijdweren.php”。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:53:30.983

试试这个函数的代码：

```
<script type="text/javascript">
function confirmation() {
    var answer = confirm("Weet u zeker dat u deze activiteit wilt verwijderen?");
    if (answer){
        alert("De activiteit wordt nu verwijderd.");
        return true;
    }
    else{
        alert("De activiteit is niet verwijderd.");
        return false;
    }
}
</script> 
```

和按钮：

```
<a href="roosters_verwijderen.php?activiteitID='. $row['activiteitID'] .'" onclick="return confirmation();"><IMG src="iconen/kruis.png" border="0"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:48:43.440

应该第 6 行：

```
window.location ="roosters_verwijderen.php"; 
```

是：

```
window.location ="roosters_verwijderen.php?activiteitID=" + $row['activiteitID']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:53:09.880

代码应如下所示：

按钮：

```
caca
<a href="roosters_verwijderen.php?activiteitID='. $row['activiteitID'] .'" onclick="confirmation(this); return false"><IMG src="iconen/kruis.png" border="0"></a> 
```

和javascript：

```
<script type="text/javascript">
function confirmation(elem) {
    var answer = confirm("Weet u zeker dat u deze activiteit wilt verwijderen?");
    if (answer){
       alert("De activiteit wordt nu verwijderd.");
       window.location = elem.href;
    }
    else{
       alert("De activiteit is niet verwijderd.");
    }
}
</script> 
```

# java - 通过从共享文件夹中的文件继承来执行java

> ID：11224450
> 
> 赞同：0
> 
> 时间：2012-06-27T10:44:55.603
> 
> 标签：java

我有两个文件，一个在我的本地机器中，另一个在共享文件夹中（来自另一台机器）。

我在本地机器上的类必须继承自共享文件夹中文件中的类。

如何执行此继承？

我尝试通过设置`CLASSPATH=%CLASSPATH%;//(machineNo)/(foldername);`，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:12:26.733

可`URLClassLoader`用于轻松开发能够从远程服务器加载类和资源的应用程序。首先，您需要定义要搜索类的 URL。任何以“/”结尾的 URL 都假定指向一个目录，否则假定 URL 指向一个 JAR 文件，该文件将根据需要打开。一旦构造了 URLClassLoader 的实例，`loadClass(String name)`就使用 ClassLoader 类的方法来加载具有指定名称的类。一旦加载了一个类，就可以创建一个实例（这意味着将调用构造函数）。

```
import java.net.*;
import java.io.*;
public class MyLoader {
   public static void main (String argv[]) throws Exception {

      URLClassLoader loader = new URLClassLoader(new URL[] { new URL("http://www.javacourses.com/classes/") });

      // Load class from class loader. argv[0] is the name of the class to be loaded
      Class c = loader.loadClass (argv[0]);

      // Create an instance of the class just loaded
      Object o = c.newInstance();

  }
} 
```

[你可以在这里](http://java.sun.com/developer/technicalArticles/Networking/classloaders/)阅读全文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:17:11.290

如果继承是指扩展，那么仅仅加载类是不够的。

[您将需要一些像cglib](/questions/tagged/cglib "显示标记为“cglib”的问题")这样的字节码操作库来动态创建派生类。（并不是说这是一项艰巨的任务，但它有很多可能的陷阱，所以要小心:)）

# android - ANDROID : 在 Webview 和 httpclient 之间共享会话

> ID：11224454
> 
> 赞同：11
> 
> 时间：2012-06-27T10:45:08.420
> 
> 标签：android, webview, httpclient, session-cookies

我实际上在我的 WebView 中有一个记录的会话。但我也使用 httpclient 从网络发送和获取数据。我在网上看到无法获取 WebView 的内容，所以我需要使用我的 httpclient 从 webservice 获取数据。

问题是这个网络服务使用会话......我的会话在我的 WebView 中，所以 httpclient 没有它，我无法访问网络服务的内容。

我看到很多关于这个问题的帖子，但我不明白解决方案。

这是我在 onPageStarted 上所做的：

```
CookieManager mgr = CookieManager.getInstance();
Log.i( "URL", url );
Log.i("Cookie",mgr.getCookie("mywebsite.com"));
String cookie_string = mgr.getCookie("mywebsite.com");
if(cookie_string.length() > 1) {                    
    Data.instance().getPref().edit().putString("cookie",cookie_string).commit();
} 
```

我看到我有这种东西，所以我希望那些也包括会话：（我删除了数字）

```
__utma=......(number)......; 

__utmc=number;

__utmz=number.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); 

wt3_eid=%number%number; 

wt3_sid=%number 
```

然后我不知道该怎么做才能在我的httpclient中设置这个cookie。我尝试了，但没有成功：

```
HttpClient client = new DefaultHttpClient();
BasicCookieStore cookieStore = new BasicCookieStore();
String login_cookie_string = Data.instance().getPref().getString("cookie", "");
String[] cookie_parts = null;
if(login_cookie_string.length()> 0)
{

    //debug_view.setText(login_cookie_string);
    Log.d("COOKIE", login_cookie_string);
    cookie_parts = login_cookie_string.split(";");

    for(int t=0;t < cookie_parts.length;t++)
    {
        String[] cookieContent = cookie_parts[t].split("=");
        Cookie login_cookie = new BasicClientCookie(cookieContent[0],cookieContent[1]);
        ((BasicClientCookie) login_cookie).setDomain("mywebsite.com");
        cookieStore.addCookie(login_cookie);
    }

}
((AbstractHttpClient) client).setCookieStore(cookieStore); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-09T16:08:00.323

所以，这就是我所做的，它对我有用-

```
HttpRequestBase request = new HttpGet(uri);
request.addHeader("Cookie", getCookieFromAppCookieManager(uri.toString())); 
```

现在 getCookieFromAppCookieManager 的实现如下 -
该方法从应用程序 CookieManager 获取给定 URL 的 cookie。应用程序 CookieManager 管理应用程序的 WebView 实例使用的 cookie。

```
@param url the URL for which the cookies are requested
@return value the cookies as a string, using the format of the 'Cookie' HTTP request header
@throws MalformedURLException

public static String getCookieFromAppCookieManager(String url) throws MalformedURLException {
    CookieManager cookieManager = CookieManager.getInstance();
    if (cookieManager == null)
        return null;
    String rawCookieHeader = null;
    URL parsedURL = new URL(url);

    // Extract Set-Cookie header value from Android app CookieManager for this URL
    rawCookieHeader = cookieManager.getCookie(parsedURL.getHost());
    if (rawCookieHeader == null)
        return null;
    return rawCookieHeader;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T09:46:16.210

按照这个教程：

[http://metatroid.com/article/Android:%20handling%20web%20service%20authentication](http://metatroid.com/article/Android:%20handling%20web%20service%20authentication)

================================这里是网页内容=====

您可能会发现自己在 Android 中所做的事情是 Web 身份验证。大多数网站都会发布一个 cookie 来跟踪会话 ID 并保持用户登录。为了保持这种身份验证，您需要在活动之间以及 http 客户端和 webview 之间保持 cookie 同步。

我最终采用的方法似乎运行良好，它是创建一个扩展 Application 的类，然后定义一个 HttpClient 以在整个 Application 的其余部分中使用。该代码如下所示：

```
public class AppSettings extends Application {
    private static final DefaultHttpClient client = createClient();

    @Override
    public void onCreate(){
    }

    static DefaultHttpClient getClient(){
            return client;
    }
    private static DefaultHttpClient createClient(){
            BasicHttpParams params = new BasicHttpParams();
            SchemeRegistry schemeRegistry = new SchemeRegistry();
            schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
            final SSLSocketFactory sslSocketFactory = SSLSocketFactory.getSocketFactory();
            schemeRegistry.register(new Scheme("https", sslSocketFactory, 443));
            ClientConnectionManager cm = new ThreadSafeClientConnManager(params, schemeRegistry);
            DefaultHttpClient httpclient = new DefaultHttpClient(cm, params);
            httpclient.getCookieStore().getCookies();
            return httpclient;
    } 
```

该类还创建了一个适用于 AsyncTasks 并同时发出多个 http 请求的 HttpClient。为 ClientConnectionManager 使用 ThreadSafeClientConnManager 可以让您在 AsyncTasks 中运行 http 请求，而不会在您按下后退按钮并开始第二个或第三个时导致强制关闭。

它还创建一个可以在您的所有活动中访问的默认 cookie 存储。您可以通过调用 getClient() 方法在其他活动中使用它。

例如

```
public class SomeActivity extends Activity {
        static DefaultHttpClient mClient = AppSettings.getClient();
        ...
        try {

            HttpGet httpget = new HttpGet('URL');
            HttpResponse response;
            response = mClient.execute(httpget);
            ...
        }
        ...
    } 
```

如果您发现有必要使用 webview 并需要它来访问和使用与您的客户端相同的 cookie。您可以使用 CookieManager 同步客户端的 cookie 存储：（在 onPageStarted 方法中）

```
DefaultHttpClient mClient = AppSettings.getClient();

Cookie sessionInfo;
List<Cookie> cookies = mClient.getCookieStore().getCookies();

if (! cookies.isEmpty()){
        CookieSyncManager.createInstance(getApplicationContext());
        CookieManager cookieManager = CookieManager.getInstance();

        for(Cookie cookie : cookies){
                sessionInfo = cookie;
                String cookieString = sessionInfo.getName() + "=" + sessionInfo.getValue() + "; domain=" + sessionInfo.getDomain();
                cookieManager.setCookie("example.com", cookieString);
                CookieSyncManager.getInstance().sync();
        }
} 
```

您将需要使用正确的域切换 example.com。

# jquery - 在可排序的 jquery UI 中对项目进行排序时，可编辑区域消失

> ID：11224456
> 
> 赞同：1
> 
> 时间：2012-06-27T10:45:10.090
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jwysiwyg

标题可能听起来很奇怪。嗯，是的。

这是我的代码的近似值（对于这个例子，它缺少一些无用的 ajax 调用，并简化了其他一些东西）：http: [//jsfiddle.net/pKNAz/3/](http://jsfiddle.net/pKNAz/3/)

假设您有一个可拖动项目列表（在这种情况下，只有一个名为“添加所见即所得”的可拖动项目），您可以将其移动到放置区域（在我的示例中为灰色矩形），并附加一个文本区域，然后，删除后，我使用 jwysiwyg 库转换为所见即所得（我无法添加此插件使用的所有图像和 css，但 textarea 基本行为（ctrl+b、ctrl+i、ctrl+u）工作，所以我们可以假设它正在工作）。

它在掉落时效果特别好。然而，它在排序时会破坏 jwysiwyg。拥有两个jwysiwyg后，您可以自己拖动深灰色手柄尝试。你会看到你排序的 jwysiwyg 已经失去了它的 jwysiwyg。您仍然可以通过 search 获得您之前在 textarea 中写入的正确值`$('textarea.overflow').val()`，但您不能再使用 jwysiwyg 了。

有人知道如何解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:59:09.497

好的，我有一个解决方案（抱歉 Jan 删除了你的勾号）。我想知道，如果问题是由于 iframe 区域和排序事件之间的组合，为什么不只是刷新所见即所得？

我创建了一个函数来包装 jwysiwyg 的破坏+构造，如下所示：

```
function refreshTextareas()
{
    $('textarea.autogrow').wysiwyg('destroy');
    $("textarea.autogrow").wysiwyg({
        autoGrow: true,
        rmUnusedControls: true,
        controls: {
            bold: { visible : true },
            italic: { visible : true },
            insertOrderedList: { visible : true },
            insertUnorderedList: { visible : true },
            removeFormat: { visible : true },
            h1: { visible: true },
            link : { visible: true }
        }
    });
} 
```

然后我在这里调用它：

```
$( "#sortable" ).sortable({
    stop : function(event, ui){
        refreshTextareas();
    }
}); 
```

所以，如果你对这些东西进行分类，你重建它，它就会再次工作，就像那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:56:52.463

在删除项目时，包含所见即所得控件的 iframe 将被清空。由于最少代码方案重现了错误，因此它看起来像是 jquery/jwysiwyg 中的错误。

[http://jsfiddle.net/6TcM7/2/](http://jsfiddle.net/6TcM7/2/)

报告错误和/或切换所见即所得引擎。

# c - 两个排序数组中最接近的对总和

> ID：11224457
> 
> 赞同：5
> 
> 时间：2012-06-27T10:45:10.650
> 
> 标签：c, arrays, algorithm

给定两个排序的整数数组，`a`和`b`，和一个整数`c`，我必须找到`i,j`这样的：

```
a[i] + b[j] <= c 
```

并且`a[i] + b[j]`尽可能大。

我能想到的最佳解决方案是在*O* ( *n* log *n* ) 时间内，从第一个数组中获取每个整数并找到“”的下限`c-a[i]`。
谁能建议我一个更好的方法来做到这一点（也许在 O( *n* ) 时间内）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:53:11.820

想一想，然后你可能会问自己：
“是否有必要每次都在已排序的 b 数组中搜索来自 a[] 的连续值？”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:00:45.177

我认为你下次不必搜索整个数组 b[] ......你必须在数组 b 的开始和你到目前为止找到的最低界限之间搜索......对于 a 中的下一个元素[].它肯定会降低你的时间复杂度......当你找到给定的目标'c'时，你必须停止搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-26T16:53:23.580

下面的解决方案是线性时间复杂度 O(n)，空间复杂度 O(1)

```
public class ClosestPair {

    public static void main(String[] args)
    {
        int ar2[] = {4, 5, 7};
        int ar1[] = {10, 20, 30, 40};
        int x = 10 ;
        closest(ar1,ar2,x);
    }
    public static void closest(int[] ar1, int[] ar2, int x)
    {   int diff=Integer.MAX_VALUE;
        int first_num=0;
        int second_num=0;
        int second_diff=Integer.MAX_VALUE;
        for(int i=0; i<ar1.length; i++)
        {
            if(x==ar1[i] )
            {
                System.out.println("no pair possible");
                return;
            }
        }
        for(int i=0; i<ar2.length; i++)
        {
            if(x==ar2[i])
            {
                System.out.println("no pair possible");
                return;
            }
        }
        for(int i=0; i<ar2.length; i++)
        {

            if(Math.abs(x-ar2[i])<=diff)
            {
                diff=Math.abs(x-ar2[i]);
                first_num=ar2[i];
            }
        }
       diff=x-first_num;
       for(int i=0; i<ar1.length; i++)
       {
           if(Math.abs(diff-ar1[i])<=second_diff)
           {
               second_diff= Math.abs(diff-ar1[i]);
               second_num= ar1[i];
           }
       }
       System.out.println(first_num + " "+ second_num);
    }
} 
```

# c# - 如何删除错误“远程服务器返回错误：NotFound。”？

> ID：11224458
> 
> 赞同：0
> 
> 时间：2012-06-27T10:45:19.027
> 
> 标签：c#, silverlight-4.0, sharepoint-2010, sharepoint-clientobject

我为 sharepoint 2010 开发了 silverlight web 部件。我在 sharepoint 2010 中开发了近 5 个 web 部件。直到昨晚，所有 web 部件在开发机器和服务器上都运行良好。现在我今天启动了我的电脑。我试图在 vs 2010 中运行我的 web 部件。我没有工作。它在 e.Message -`The remote server returned an error: NotFound.`和 e.StackTrace - 处给出错误

```
System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at Microsoft.SharePoint.Client.ClientRequest.ExecuteQueryGetResponseAsyncCallback(IAsyncResult asyncResult) 
```

以下是我的代码

```
public void GetAllCompanies(ListItemCollectionDelegate populateMethod)
        {
            CompaniesListItemCollectionDelegate = populateMethod;           

            ClientContext clientContext = ClientContext.Current;
            List list = clientContext.Web.Lists.GetByTitle("Companies");

            companiesListItemCollection = list.GetItems(CamlQuery.CreateAllItemsQuery());
            //clientContext.Load(list);
            clientContext.Load(companiesListItemCollection);
            clientContext.ExecuteQueryAsync(handleAllCompaniesRequestSucceeded, handleAllCompaniesRequestFailed);
        }

        private void handleAllCompaniesRequestSucceeded(object sender, ClientRequestSucceededEventArgs e)
        {
            ////call back on the UI thread
            System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                CompaniesListItemCollectionDelegate(companiesListItemCollection);
            });
        }

        private void handleAllCompaniesRequestFailed(object sender, ClientRequestFailedEventArgs e)
        {
            System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show("GetAllCompanies Method Error : " + e.Exception);
            });
        } 
```

在上面的代码中，方法中的断点`handleAllCompaniesRequestFailed`被命中。它执行`GetAllCompanies`. 我检查了开发机器是否能够在浏览器中访问本地共享点站点。你能告诉我为什么这个 web 部件今天不工作吗？您能否提供我可以解决上述问题的任何代码或链接？

# java - 找到最小的子段

> ID：11224459
> 
> 赞同：1
> 
> 时间：2012-06-27T10:45:21.970
> 
> 标签：java, string, algorithm

我给出了一个长句子和一些单词（要在句子中搜索），我必须找到句子的最小部分，其中包含要在该句子中搜索的所有单词并打印该部分。

我试过了，1.首先从给定的句子中获取所有单词的所有位置（索引）。2.然后尝试从这些词的索引中找到最小的部分。

但我在实施第二部分时遇到问题。所以我想要一些建议，或者如果你建议任何其他可以让它快速的算法。

```
import java.util.*;
import java.io.*;
public class ShotestSubSegment2 
{
static SearchStr[] search;
static String copystr;
public static void main(String s[])
{
try
{
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String str = in.readLine();
        copystr = str.substring(0).toLowerCase();
        int k = Integer.parseInt(in.readLine());
        search = new SearchStr[k];
        for(int i=0;i<k;i++)
        {
            search[i] = new SearchStr(in.readLine().toLowerCase());
            getIndicesOf(search[i]);
            if(search[i].noOfElements()==0)
            {
                System.out.println("No Segments Found");
                return;
            }
        }
        searchSmallestPart();//Dont getting Idea Of this

    }
    catch(Exception x){}
}

public static void getIndicesOf(SearchStr searchS) 
{
    String searchStr = searchS.getName();
    int startIndex = 0, searchStrLen=0;
    int index;
    searchStr = searchStr.toLowerCase();
    searchStrLen = searchStr.length();
    while ((index = copystr.indexOf(searchStr, startIndex)) > -1) 
    {
        searchS.add(index);
        startIndex = index + searchStrLen;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T11:26:36.560

临时变量：

*   `bestseq`包含当前最佳序列的开始/结束的对象/集合（最初是 eg `null`）
*   `currently_closest`HashMap< word, index >（用适当的类型替换 word 和 index，最初都是特殊值，例如 -1）
*   `current_start`, `current_end`（索引，最初例如 -1）

“算法”：

1.  遍历字符串中的单词
2.  如果当前单词是单词，则将当前索引存储在 current_closest[word] 中，调整 current_start 和 current_end 以反映 current_closest 中的新最大和最小键
3.  if ( `current_end-current_start<bestseq.end-bestseq.start`or `bestseq`is eg `null`) 并且所有单词都有非特殊索引（即不是-1） set => set bestseq to `current_start`, `current_end`-sequence

我想这应该在 O(length_of_sentence * number_of_words) 时间内运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:52:15.010

使用此类：

```
class FoundToken  {
   int start;
   end start;
   String word;
   int endOfCompleteSequence;
} 
```

1）将所有找到的令牌与开始索引和结束索引一起存储在列表中

2) 对于这些列表项中的每一个，获取从以下标记（在列表中）构建并包含所有所需标记的第一个完整序列

3) 取最短的那些序列（基于`endOfCompleteSequence-start)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T22:09:08.503

这是我的算法。可能有点外行，但这是我想出的最基本的方法。

1.  输入后，循环抛出单词并检查哪些与列出的单词匹配。继续使用将存储列出的单词的数组。

2.  一旦找到匹配，标记该位置并从该位置开始另一次扫描并检查匹配。并行从列表中删除匹配的单词并检查直到找到列表中的所有单词。直到找到下一个单词，将所有单词（也包括中间单词）添加到一个字符串中。这个特定的循环一直持续到列出的单词数组的所有元素都为空。

3.  最里面的扫描完成，存储字符串，因此在另一个数组中找到（比如字符串 sol_array）。并继续前一个循环。（前一个循环运行（original_string.length（）-listed_word_array.length）次）

4.  最外层循环完成后，运行 sol_array 扫描并检查最小字符串的长度，该字符串就是答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T10:57:03.343

将每个单词的出现位置存储到列表中。

word1 - 找到 word1 的位置的 list1 word2 - 找到 word2 的位置的 list2 ...

您必须最小化（Pend-Pstart），其中 Pstart 是所有单词的有效位置组合的位置列表中的最小位置，而 Pend 是最大的位置。要为在文本中找到的所有单词生成组合，请使用回溯。

我希望我说清楚了。

# php - Backbone.js 错误 - 未捕获的类型错误：对象 [对象对象] 没有方法“创建”

> ID：11224463
> 
> 赞同：0
> 
> 时间：2012-06-27T10:45:38.340
> 
> 标签：php, backbone.js

带有 slim.php 的 Backbone.js - 当我添加一个新模型时显示错误“Uncaught TypeError: Object [object Object] has no method 'create'”。请帮我将新模型添加到数据库中。

如果我使用 this.model.save() 方法，它会显示 500 Internal Sever Error。用户 create() 和 save() 方法的位置。我不清楚这一点。

谢谢。

```
 // Models

    window.Users = Backbone.Model.extend({
        urlRoot:"./bb-api/users",
        defaults:{
            "name":"",
            "email":"",
            "designation":""
        }
    });

    window.UsersCollection = Backbone.Collection.extend({
        model:Users,
        url:"./bb-api/users"
    });

    // Views

    window.AddUserView = Backbone.View.extend({

        template:_.template($('#new-user-tpl').html()),

        initialize:function(){
            this.model.bind("click", this.render, this);
        },

        render:function(){
            $(this.el).html(this.template());
            return this;
        },

        events:{
            "click .add":"saveUser"
        },

        saveUser:function(){ //alert('saveUser');
            this.model.set({
                name:$("#name").val(),
                email:$("#email").val(),
                designation:$("#designation").val()
            });

            if(this.model.isNew()){
                this.model.create(this.model);
            }
        }
    });

    // Router
    var AppRouter = Backbone.Router.extend({

        routes:{
            "":"welcome",
            "add":"addUser"
        },

        welcome:function(){
            $('#content').html('Welcome to Backbone.js App');
        },          

        addUser:function(){ 
            this.addUserModel = new Users();
            this.addUserView = new AddUserView({model:this.addUserModel});
            $('#content').html(this.addUserView.render().el);
        }

    });

    var app = new AppRouter();
    Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:56:23.103

```
if(this.model.isNew()){
    this.model.create(this.model);
} 
```

这段代码是错误的，因为`create`. `Backbone.Model`您必须调用`this.model.save()`才能将 Backbone 模型发送到您的服务器。
如果是模型`isNew`，那么来自您的客户的请求将是类型`create`。如果模型不是新的，那么方法就是`update`.

您可以（并且应该）在此处阅读有关数据同步方法的更多信息：http: [//backbonejs.org/#Sync](http://backbonejs.org/#Sync)。`Backbone.model.save`委托给模型的`sync`方法以进行实际的 AJAX 请求发送。如果`sync`未定义模型，则使用全局 Backbone.sync。

# android - 带有透明内框的圆角内角

> ID：11224464
> 
> 赞同：28
> 
> 时间：2012-06-27T10:45:45.477
> 
> 标签：android

我正在尝试用代码制作一个框架，以便我可以应用它来制作圆形内角，外部填充实心，内部透明。***就像一个实心矩形，里面有透明的椭圆形。***附图片。我尝试了几种形状组合，所有可用的在线显示外面的角落。

![在此处输入图像描述](../Images/621ae6e7d30a4bac5197e2d5837f649b.png)

里面应该是透明的而不是白色的。图片取自这篇[文章](https://stackoverflow.com/questions/4328166/android-xml-rounded-clipped-corners)，但这里提供的解决方案不是我想要的我不想使用 9 补丁可绘制但希望在代码中创建。

请仅提供有效答案。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-05-28T10:13:29.590

创建以下 rounded_corner.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:bottom="-10dp"
        android:left="-10dp"
        android:right="-10dp"
        android:top="-10dp">
        <shape android:shape="rectangle">
            <stroke
                android:width="10dp"
                android:color="#ffffff" />
            <corners android:radius="20dp" />
        </shape>
    </item>
</layer-list> 
```

将此添加到您要在其上应用框架的 imageView 下方：

```
<View
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignBottom="@+id/my_image_view"
    android:layout_alignLeft="@id/my_image_view"
    android:layout_alignRight="@+id/my_image_view"
    android:layout_alignTop="@id/my_image_view"
    android:background="@drawable/rounded_corner" /> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-27T13:23:00.053

首先，`xml` `layout`在drawable文件夹中创建3：

1.  第一个： **frame.xml**
2.  二：**frame_build.xml**
3.  第三： **red.xml**

（您可以根据需要更改此名称），

**框架.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:bottom="20dp" android:drawable="@drawable/red" android:top="-25dp" />
    <item android:bottom="15dp" android:drawable="@drawable/frame_build" android:top="5dp" android:left="-5dp" android:right="-5dp" />
</layer-list> 
```

**frame_build.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <padding android:left="10dp" android:top="10dp" android:right="10dp" android:bottom="10dp" />
    <corners android:radius="40dp" />
</shape> 
```

**红色.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <stroke android:width="40dp" android:height="40dp" android:color="#B22222" />
    <padding android:left="8dp" android:top="-1dp" android:right="8dp" android:bottom="9dp" />
    <corners android:radius="-10dp" />
</shape> 
```

最后将您的视图或布局引用到 Frame XML，如下所示：

```
 android:background="@drawable/frame" 
```

此测试并输出如下图：

![输出图像](../Images/e1af0cb8b6376a44ad1c372f58d11572.png)

希望这有帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-26T16:19:56.560

调整@Nima K 解决方案，以避免使用额外的 View

创建frame.xml@drawable

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:bottom="-10dp"
        android:left="-10dp"
        android:right="-10dp"
        android:top="-10dp">
        <shape android:shape="rectangle">
            <stroke
                android:width="20dp"
                android:color="@color/frame_color" />
            <corners android:radius="30dp" />
        </shape>
    </item>

    <item>
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent" />

            <stroke
                android:width="20dp"
                android:color="@color/frame_color" />

            <corners android:radius="40dp" />
        </shape>

    </item>

</layer-list> 
```

然后将其与视图的 'android:background' 属性一起使用

```
<TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/frame" /> 
```

[这就是结果](https://i.stack.imgur.com/vlJzq.png)

[![在此处输入图像描述](../Images/fb195e4c7b5a8e49b9deb2d5a681d8d7.png)](https://i.stack.imgur.com/XsUua.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T13:50:04.683

**也许更简单；**

```
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:inset="-6dp">

    <shape android:shape="rectangle">
        <solid android:color="#FFFFFF" />

        <stroke android:width="12dp"
            android:color="#000000" />

        <corners android:radius="16dp" />
    </shape>
</inset> 
```

# android - 在安卓上下载旧版本的应用程序

> ID：11224466
> 
> 赞同：0
> 
> 时间：2012-06-27T10:45:52.610
> 
> 标签：android, cordova

我有 android 应用程序，我使用 phonegap 1.2。
要创建 apk 文件，我只是压缩`www`文件夹，接下来我将存档下载到[https://build.phonegap.com/apps/](https://build.phonegap.com/apps/)
然后 我从 phonegap.com 下载 apk 文件并将其上传到[https://play.google.com/应用程序/发布/](https://play.google.com/apps/publish/)

比我看到这条消息（play.google.com）：

```
Warning: Active APKs support fewer devices than previously active APKs. Some users will not receive updates. 
```

当我在我的安卓手机上运行*Play*时，我的应用没有任何更新。所以我删除了我的应用程序并再次下载它，没有任何改变。我刚刚下载了旧版本。

为什么我会收到此警告？我怎样才能使它正常工作，以便已经下载此应用程序的用户可以看到更新？

**更新**

我删除了主菜单中的一个图标，仅此而已。这是我有更改的代码：

```
 if(cc_maps == 1){
        $('<li><a href="#gmap"><img src="images/icons/map.png" alt="map" width="75" height="75" /></a></li>').appendTo('#cc_homeicons');        
      } 
```

变成：

```
 /*if(cc_maps == 1){
        $('<li><a href="#gmap"><img src="images/icons/map.png" alt="map" width="75" height="75" /></a></li>').appendTo('#cc_homeicons');        
      }*/ 
```

我也将 phonegap 更改为 1.2（之前是 1.1），但我在 1.1 中收到此错误。我虽然这是原因，这就是我改变它的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:07:34.233

这样做的唯一原因是您在应用程序中所做的更改需要使用在比以前使用的功能更少的设备上可用的功能。如果您告诉我们您做了哪些更改，我们可以详细说明。

# ruby-on-rails - 在 rails 3.0.9 和 rvm 1.8.7 中带有嵌套模型形式的邪恶形式

> ID：11224469
> 
> 赞同：0
> 
> 时间：2012-06-27T10:46:01.887
> 
> 标签：ruby-on-rails, ruby, nested-forms

在我项目的一个模块中，我使用了嵌套形式，并且在该嵌套形式中，我想将 wicked 形式与 wicked

参考：Ryan bates [http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=asciicast](http://railscasts.com/episodes/346-wizard-forms-with-wicked?view=asciicast)

视图 > 通知 > _form.html.erb

```
<%= form_for(@notice) do |f|%> 
  #notice attributes
<%= f.submit, "Next">
<% end %> 
```

我创建了一个 notice_step 控制器，并在该控制器中编写了

```
class NoticeStepsController < ApplicationController
   include Wicked::Wizard
  steps :agendaa
   def show
     @notice = Notice.new
     render_wizard
  end
end 
```

并在通知控制器中创建操作

```
 def create
    @notice = Notice.new(params[:notice])
      if @notice.save 
      session[:notice_id] = @notice.id 
      redirect_to notice_steps_path 
      else 
        render :new 
    end   
   end 
```

notice_step > 议程.html.erb

```
<%= form_for(@notice, url: wizard_path) do |f| %> 
 < div class="field">
    <%= f.fields_for :agendas do |builder| %>
    <%= render "notices/agenda_fields", :f => builder %>
    <% end %>
   <%= link_to_add_fields "Add agenda", f, :agendas %>
 < /div>
 <% end %> 
```

嵌套模型正在工作.....但是单击下一个按钮时，它会显示以下错误

```
It is giving me SyntaxError in User_steps#show compile error
/home/kipl/Desktop/cus_notice/app/views/user_steps/agendaa.html.erb:1: syntax error, unexpected ':', expecting ')'
...ppend=  form_for(@notice, url: wizard_path) do |f| @output_b...
                              ^
/home/kipl/Desktop/cus_notice/app/views/user_steps/agendaa.html.erb:10: syntax error, unexpected kENSURE, expecting $end 
```

有什么建议么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:21:30.697

Hash ( ) 的冒号符号`:`仅适用于 Ruby 1.9。
您应该使用火箭符号 ( `=>`)。

# android - 如何将数据从 sqlite listview 传递到新意图？在安卓中

> ID：11224472
> 
> 赞同：0
> 
> 时间：2012-06-27T10:46:10.760
> 
> 标签：android

请任何人都可以给我这个例子“我在这些用户中输入后有一些编辑文本将点击保存按钮然后显示一个带有第一个edittext值和第一个字符的列表视图，当点击列表视图项目然后显示那些编辑将文本值转换为新活动的不同 2 文本视图”请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:53:55.583

```
public void onClick (View view) {

     Intent intent = new Intent (this,display.class);

     RelativeLayout relativeLayout = (RelativeLayout) view.getParent();

        TextView textView = (TextView) relativeLayout.findViewById(R.id.textView1);
//      TextView textView=(TextView) findViewById(R.id.textView1); for single //textview we use this
        String message = textView.getText().toString();
        intent.putExtra(EXTRA_MESSAGE,message);
        startActivity(intent);

    } 
```

显示.java

```
public void onCreate(Bundle savedInstanceState) 
     {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.display);

                // Get the message from the intent
                Intent intent = getIntent();
                String message = intent.getStringExtra(Listd.EXTRA_MESSAGE);

                // Create the text view
                EditText editText = new EditText(this);
                editText.setTextSize(40);
                editText.setText(message);
                // Set the text view as the activity layout
                setContentView(editText); 
```

}

希望你从上面的代码中理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:51:05.450

您可以将值传递给 listView 项目上的另一个 Activity 点击为：

```
ListView list_view = (ListView)findViewById(R.id.listvv);
        list_view.setAdapter(adapter); //set adapter here
        list_view.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView parent, View view, int position, long id)
            {
                try
                {
                    EditText edttx = (EditText)view.findViewById(R.id.txtviewtxt);
                    String edttxtxtx = edttx.getText().toString();
                    Intent i = new Intent(YouCurentActivity.this, New_Activity.class);

                    i.putExtra("txtx", edttxtxtx);
                    startActivity(i);
                }
                catch(Exception ex)
                {

                }
            }
        }); 
```

在 New_Activity.class onCreate 中：

```
Bundle extras = getIntent().getExtras();
String strvalue= extras.getString("txtx"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T10:53:54.650

> 在这些用户中输入后我有一些编辑文本将单击保存按钮然后显示一个列表视图，其中包含第一个带有第一个字符的 edittext 值

=> 由于您只想在 ListView 中显示一个行项目，因此[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)最适合，否则您必须创建自定义适配器以显示 ListView 的自定义布局项。

是的，每当您单击“保存”按钮时，不要忘记在 Array/ArrayList 中添加当前条目并**`notifyDataSetChanged()`**通知适配器有关数据的更改。

> 当单击列表视图项时，然后将那些编辑文本值显示到新活动的不同 2 文本视图中

=> [setOnItemClickListener()](https://stackoverflow.com/a/4752309/379693)帮助你。

# android - getTitle EditText 和数据库光标

> ID：11224473
> 
> 赞同：2
> 
> 时间：2012-06-27T10:46:11.283
> 
> 标签：android, cursor, android-edittext

我正在使用一个`EditText`作为搜索字段并试图将用户输入从那里读入我的光标。我的代码崩溃了，因为 editText 显示为 an`int`而不是`long`.

如果我手动输入一个数字，它可以工作并且系统不会崩溃。我在转换`int`为时做错了`long`什么？

这是我的代码：

```
DBAdapter db = new DBAdapter(this);
db.open();
EditText edit = (EditText) findViewById(R.id.edit1); 
String s = edit.getText().toString();
long n = Integer.parseInt(s); 
Cursor c = db.getTitle(n);
if (c.moveToFirst())
    DisplayTitle(c); 
```

此代码有效，但我必须手动输入以下位置`getTitle`：

```
DBAdapter db = new DBAdapter(this);
db.open();
Cursor c = db.getTitle(6);
if (c.moveToFirst())
    DisplayTitle(c); 
```

请帮忙。

# asp.net - 使用身份验证和授权登录

> ID：11224474
> 
> 赞同：1
> 
> 时间：2012-06-27T10:46:12.953
> 
> 标签：asp.net

我有两个用户“管理员”和“创建者”，在登录页面时，我必须使用数据库对其进行身份验证，并授予管理员完全访问权限并限制对创建者的少数访问。你能给我一些关于上述的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:51:11.787

您可以将表单身份验证用于您的目的。但如果您是第一次使用它，我建议您首先阅读以了解它是如何工作的。尝试[这些教程](http://www.asp.net/web-forms/tutorials/security)。对于基于角色的授权，您将不得不使用 Asp。网络成员和角色。我假设您正在使用 Web 表单。这将很耗时，但值得参考。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:48:42.837

为此目的使用表单身份验证。这是针对您的特定场景的教程 [http://www.eggheadcafe.com/articles/20020906.asp](http://www.eggheadcafe.com/articles/20020906.asp)

# iphone - MPMoviePlayerController 在 iOS 5 中无法正常工作

> ID：11224477
> 
> 赞同：1
> 
> 时间：2012-06-27T10:46:26.530
> 
> 标签：iphone, ios, mpmovieplayercontroller

我的以下代码在我的 iOS 4.3 测试手机上运行良好。但是当我在另一部装有 iOS 5.1 的手机上测试它时，它似乎不起作用。你能帮助我吗？

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

        MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:
                                           [NSURL URLWithString: [defaults objectForKey:@"videoPath"]]];

        player.view.frame = CGRectMake( 0, 0, 320, 198);

        self.thePlayer = player;

        [player release];

        [self.cameraOverlayView addSubview:self.thePlayer.view];

        [self.thePlayer play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:05:22.540

在**.h**文件中声明**MPMoviePlayerController *player 。**它会起作用的。

 **谢谢**

# android - 在我的应用程序中打开并查看 pdf

> ID：11224479
> 
> 赞同：2
> 
> 时间：2012-06-27T10:46:32.890
> 
> 标签：android, pdf-viewer

使用此代码：

```
try {

    URL url = new URL(aurl[0]);
    URLConnection conexion = url.openConnection();
    conexion.connect();

    int lenghtOfFile = conexion.getContentLength();
    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

    InputStream input = new BufferedInputStream(url.openStream());
    FileOutputStream fos = openFileOutput("try.pdf", Context.MODE_PRIVATE);
    //PARA DESCARGARLO EN SD//
//  OutputStream output = new FileOutputStream("/sdcard/prueba.pdf");

    byte data[] = new byte[1024];

    long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            fos.write(data, 0, count);
        }

        fos.flush();
        fos.close();
        input.close();
    } catch (Exception e) {}
    return null; 
```

我在应用程序中保留了一个 8 MB 大小的 PDF。我已经使用了几个代码来尝试打开它并查看它，但找不到方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:22:05.377

请参阅下面的 SO Answer 链接，以使用 PDFViewer 从 sdcard 读取 pdf。

[阅读 PDF 文件](https://stackoverflow.com/questions/11152956/example-of-code-to-implement-a-pdf-reader/11153601#11153601)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:49:54.643

嗨，请尝试下面的代码。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File("mnt/sdcard/try.pdf")), "application/pdf");
try 
{
    startActivity(intent);
} 
catch (ActivityNotFoundException e) 
{
    // Toast Message
} 
```

这`sFile`是**SDcard 路径**。

# c# - 如何在单一解决方案 ASP.net 中将控制从一个项目转移到另一个项目？

> ID：11224484
> 
> 赞同：0
> 
> 时间：2012-06-27T10:46:56.680
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0, c#-3.0

我有两个项目。一个项目是在 MVC asp.net 中构建的，另一个项目是一个简单的基于表单的 Asp.net 网站。现在我想当我单击基于表单的 Asp.net 网站中的链接时，它应该将控制从该网站转移到 MVC asp.net 网站，并且我想共享在基于表单的 Asp.net 网站中生成的会话。

请帮助.....谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:20:40.757

对于您的重定向问题

在你的 MVC 控制器中

```
if (viewModel.toOldForm)
{ 
   return Redirect("your form URL");
}
else 
{
    return View(viewModel);
} 
```

在基于表单的应用程序中

```
Response.Redirect("your MVC URL"); 
```

使用链接按钮：

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Response.Redirect("http://www.google.com");
} 
```

# android - Android：隐藏和显示 CheckBoxPreference

> ID：11224492
> 
> 赞同：0
> 
> 时间：2012-06-27T10:47:50.040
> 
> 标签：android, checkbox, visibility, preference, checkboxpreference

我有一个带有多个**PreferenceCategory的****PreferenceScreen**，其中有许多**CheckBoxPreferences**。我正在尝试通过在单击首选项类别标签时隐藏或显示类别来创建可扩展的列表概念。我可以实现单击侦听器，但据我所知，除了使用**addPreference**和**removePreference之外，无法设置****CheckBoxPreference**的可见性，但由于布局完全内置在 xml 中（必须这样做），所以我无法将首选项添加到正确的类别而不会导致强制关闭。有没有办法以某种方式将**CheckBoxPreference**视为**视图**********并根据需要将其可见性更改为 GONE 或 VISIBLE？或者是否有另一种方法来完成我想要做的事情？谢谢。********

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T03:14:18.230

它是一个旧线程，但仅供其他人参考：

您需要编写一个自定义 CheckBoxPreference 类，因为您不能直接从代码更改 checkBoxPreference 的参数。从自定义类调用参数有效。

您可以做的另一件事是对要使其可见的每个 PreferenceCategory 使用 PreferenceFragment，反之亦然。******

# c# - Guid 应包含 32 位数字和 4 个破折号

> ID：11224493
> 
> 赞同：8
> 
> 时间：2012-06-27T10:47:55.213
> 
> 标签：c#, asp.net

我有一个包含 createuserwizard 控件的网站。创建帐户后，验证电子邮件及其验证 URL 将发送到用户的电子邮件地址。

但是，当我进行测试运行时，单击电子邮件中的 URL 时，会出现此错误：

```
Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).

Source Error: 

Line 17:         {
Line 18:             //store the user id
*Line 19:             Guid userId = new Guid(Request.QueryString["ID"]);*
Line 20: 
Error appeared on LINE 19\. 
```

另一个有趣的事情是，我的测试运行中的验证 URL 看起来很奇怪：

```
http://localhost:4635/WebSite2/Verify.aspx?ID=System.Security.Principal.GenericPrincipal 
```

通常，URL 应该是这样的（在 URL 的末尾有很多字符：

```
http://localhost:2180/LoginPage/EmailConfirmation.aspx?ID=204696d6-0255-41a7-bb0f-4d7851bf7200 
```

我实际上是在想，它与我的错误问题（Guid 应该包含 32 位数字和 4 个破折号）与 URL 的末尾有联系。

生成 URL 的代码如下：

```
protected void CreateUserWizard1_SendingMail(object sender,MailMessageEventArgs e)
{ 
    string domainName = Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath; 
    string confirmationPage = "/Verify.aspx?ID=" + User.ToString(); 
    string url = domainName + confirmationPage; 
    e.Message.Body = e.Message.Body.Replace("<%VerificationUrl%>", url); 
} 
```

请给我建议以及我应该做些什么来解决这个问题。

提前致谢。

**更新：**

```
protected void CreateUserWizard1_SendingMail(object sender,MailMessageEventArgs e)
{
    MembershipUser userInfo = Membership.GetUser(CreateUserWizard1.UserName);
    Guid userInfoId = (Guid)userInfo.ProviderUserKey;

    string domainName = Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath;
    string confirmationPage = "/Verify.aspx?ID=" + userInfo.ToString();
    string url = domainName + confirmationPage;

    e.Message.Body = e.Message.Body.Replace("<%VerificationUrl%>", url);

} 
```

现在我的 URL 链接如下所示：

```
http://localhost:4635/WebSite2/Verify.aspx?ID=username 
```

但错误“Guid 应包含 32 位数字和 4 个破折号（xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx”仍然存在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T12:33:34.230

你有一行说：

```
Guid userInfoId = (Guid)userInfo.ProviderUserKey; 
```

当然这是您应该在 URL 中提供的内容？

```
string confirmationPage = "/Verify.aspx?ID=" + userInfoId.ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T10:56:08.063

您将 ID 设置为：

```
User.ToString() 
```

这解析为字符串：

```
"System.Security.Principal.GenericPrincipal" 
```

我在任何地方都看不到 GUID，所以任何人都可以猜测您要如何生成它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T10:57:32.330

您没有传递 ID，在您的情况下是 GUID，您正在尝试传递 ID`value=User.Tostring().`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:11:30.953

您应该进行两项更改。首先，如前所述`User.ToString()`，总会产生`"System.Security.Principal.GenericPrincipal"`. 您应该将其更改为：

```
User.Guid.ToString() 
```

其次，您的网页应该更加防御性地编码并使用 TryParse，如下所示：

```
 Guid g;
  if (Guid.TryParse(Request.QueryString["ID"], out g))
    // its a good Guid
  else
    // its not a valid Guid 
```

# customization - 如何在 Alfresco 中自定义仪表板？

> ID：11224494
> 
> 赞同：0
> 
> 时间：2012-06-27T10:47:59.120
> 
> 标签：customization, alfresco, dashboard

我创建了一个用户，作为管理员。当我以创建的用户身份登录时，我尝试自定义仪表板，即删除了一些 Dashlet，例如我的网站、我的活动。

但是，当我单击“确定”按钮时，它会显示一条消息“正在保存配置”。但是仪表板的东西不会改变。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:21:06.847

（正如 Jeff 所说，请检查`alfresco.log`或 Tomcat 的`catalina.out`相关错误。在下文中，我将假设这些文件中没有出现错误。）

这应该有效，所以你所面临的看起来像一个错误。

请在[JIRA](https://issues.alfresco.com/jira)中搜索任何类似的问题，如果找不到，请填写新问题，但请务必提及您使用的 Alfresco 版本，并附上您的日志文件。

# java - 在 linux lubuntu 上调用任何 java.nio 方法时没有遇到此类方法异常

> ID：11224495
> 
> 赞同：4
> 
> 时间：2012-06-27T10:47:59.203
> 
> 标签：java, linux, nio

我遇到了一个让我发疯的问题，我在 Windows 机器上使用 netbeans 创建了一个 java 应用程序，它包含一个带有 main 方法的普通 java 类，并按如下方式导入**java.nio 。**

```
package testubonto;
import java.nio.*;
import java.nio.BufferOverflowException;
public class Main {

    public static void main(String[] args) {
        try{
            java.nio.file.Path path = java.nio.file.Paths.get(args[0]);
            System.out.println(path.toString());
        }catch(Exception ex){
            System.out.println("Error: " + ex.getMessage());
            System.out.println(ex.getStackTrace());
        }
    } 
} 
```

我测试了我的应用程序，它在我的 Windows 机器上运行良好。我构建了它并生成了它的 jar 文件，当我尝试在我的 Lubunto 机器上运行这个应用程序时出现问题，我下载了 jre-7u5.tar.gz，并解压缩了文件夹。将jar文件放在根目录下。当我尝试通过此命令使用终端运行应用程序时。

> /home/user/jre1.7.0_05/bin/java -jar "TestUbonto.jar" /home/user

我得到了以下异常，

> 线程“主”java.lang.NoSuchMethodError 中的异常：java.nio.file.Paths.get

我该怎么办？？:)

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:52:56.240

当用于构建的 jar 文件与用于执行的 jar 文件不同时，会发生 NoSuchMethodException。

用于构建的 jar 提供您的代码所需的方法。因此不会有任何编译错误，并且二进制文件已正确准备。

但是，当您通过在类路径中提供错误版本的相同 jar 来运行相同的代码时，它会给出上述异常。

验证您正在使用的罐子。

# android - Android下从本地.wsdl文件解析数据

> ID：11224496
> 
> 赞同：0
> 
> 时间：2012-06-27T10:48:01.133
> 
> 标签：android, web-services, wsdl, ksoap2

是否可以从android下的.wsdl文件中解析数据？我一直在尝试使用 ksoap2 库，但找不到一种方法让它从 .wsdl 本地文件解析数据，而不是调用 web 服务。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T10:57:10.997

[这里是android basic ksoap android tutorial](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)中访问web服务的基本android教程

要解析来自 web 服务的数据，您需要

1）为此调用网络服务，我已经给出了链接

2) 并粘贴示例代码来解析从 .wsdl 获取的数据是 webservice

```
 SoapObject obj2=(SoapObject) envelope.bodyIn; 

for(int i=0; i<obj2.getPropertyCount(); i++)
{
   SoapObject obj3 =(SoapObject) obj2.getProperty(0);
   int id= Integer.parseInt(obj2.getProperty(0).toString());
   String name = obj2.getProperty(1).toString();
   String lastNmae = obj2.getProperty(2).toString();
   int mobNo= Integer.parseInt(obj2.getProperty(3).toString());
} 
```

如果仍然有问题，那么你可以写信给我。并提供您编写的代码（如果可能），以便我可以帮助您。

# php - 对php文件上传的限制不起作用

> ID：11224499
> 
> 赞同：0
> 
> 时间：2012-06-27T10:48:14.807
> 
> 标签：php, forms

我想允许用户上传 txt、doc 或 pdf 格式的文件。我已经为此编写了以下代码。

```
if ((($_FILES["uploaded"]["type"] == "text/plain")
        || ($_FILES["uploaded"]["type"] == "application/pdf")
        || ($_FILES["uploaded"]["type"] == "application/doc"))
        && ($_FILES["uploaded"]["size"] < 50000))
{
    if ($_FILES["uploaded"]["error"] > 0)
    {
        echo "Error: " . $_FILES["uploaded"]["error"] . "<br />";
    }
    else
    {
        $target = "upload/";
        $target = $target . basename($_FILES['uploaded']['name']);
        $ok = 1;
        if (move_uploaded_file($_FILES['uploaded']['tmp_name'], $target))
        {
            echo "The file " . basename($_FILES['uploadedfile']['name']) . " has been uploaded";
        }
        else
        {
            echo "Sorry, there was a problem uploading your file.";
        }
    }
}
else
{
    echo "Invalid file";
} 
```

但是这段代码不起作用。无论如何，它总是显示无效文件。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:18:32.170

问题出在 MIME 类型上。正如@ksg91 所说，doc 文件的正确 MIME 类型是 application/msword，而 docx 文件的 MIME 类型是：application/vnd.openxmlformats-officedocument.wordprocessingml.document

# pdf - Codeigniter 2 中的 cezPDF

> ID：11224501
> 
> 赞同：0
> 
> 时间：2012-06-27T10:48:18.460
> 
> 标签：pdf, codeigniter-2

我在 CodeIgniter 2 中使用 cezPDF 库但它似乎无法打印表格或 ezTable 无法正常工作有人遇到过这个吗？或任何解决方案？看看我的代码在这里：

```
$db_data [] = array ('name' => 'x' );
$db_data [] = array ('name' => 'y' );
$db_data [] = array ('name' => 'z' );
$col_names = array ('name' => 'col' );
$this->cezpdf->ezTable ( $db_data, $col_names, '', array ('width' => 180, 'xPos' => 140 ) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:37:49.407

你忘了写这个指令

```
$this->cezpdf->ezStream(); 
```

顺便说一句，这是一个工作示例

```
$this->load->library('cezpdf');

$db_data[] = array('name' => 'Jon Doe', 'phone' => '111-222-3333', 'email' => 'jdoe@someplace.com');
$db_data[] = array('name' => 'Jane Doe', 'phone' => '222-333-4444', 'email' => 'jane.doe@something.com');
$db_data[] = array('name' => 'Jon Smith', 'phone' => '333-444-5555', 'email' => 'jsmith@someplacepsecial.com');

$col_names = array(
    'name' => 'Name',
    'phone' => 'Phone Number',
    'email' => 'E-mail Address'
);

$this->cezpdf->ezTable($table_data, $col_names, 'Contact List', array('width'=>550));
$this->cezpdf->ezStream(); 
```

# internet-explorer-9 - 选择项目时在 PowerBuilder 应用程序中使用 WebBrowser 控件时出错我在 PowerBuilder 11.5 应用程序内的窗口中使用 WebBrowser 控件。在 IE7 和 IE8 上一切正常，但是当您在标签中选择一个项目时，应用程序在 Windows 7 下的 IE9 中崩溃。在 IE7 和 IE8 中，我将我的应用程序添加到注册表项 FEATURE_USE_WINDOWEDSELECTCONTROL。在 Windows 7 64bits 下的 IE9 中也是如此

> ID：11224504
> 
> 赞同：2
> 
> 时间：2012-06-27T10:48:29.680
> 
> 标签：internet-explorer-9, activex, webbrowser-control, powerbuilder, html-select

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:32:03.177

设置此注册表值似乎是 Internet Explorer 7 中错误的解决方法（[MS KB 文章](http://support.microsoft.com/kb/936953 "MS知识库文章")，[eHow 描述](http://www.ehow.com/how_6961550_fix-drop_down-menu-internet-explorer.html)）。我的猜测是，由于根本原因在于 Microsoft 代码库，您唯一的选择是通过根据安装的 IE 版本切换该注册表值来解决它。您可以使用[此 CodeProject 文章](http://www.codeproject.com/Articles/1583/Determine-the-version-of-Internet-Explorer-install)来帮助您确定这一点。如果安装的是 IE7 或 IE8，则将该值设置为 1，否则，将其设置为 0。

GL！

# jquery - Jquery 悬停似乎不稳定

> ID：11224505
> 
> 赞同：0
> 
> 时间：2012-06-27T10:48:30.173
> 
> 标签：jquery

每当鼠标进入 div 时，我想在 div 旁边出现一个 twitter bootstrap 样式的弹出框，并在鼠标退出 div 时消失。

我的部分中有以下内容：

```
$('#bizhover').hover(
   function() {
     $(this).popover({ html: true, placement: "right" }); 
   },
   function() {
     $(this).popover('hide');
   }
); 
```

我相信通过使用放置在 div 中的“选择”（jquery 插件）样式下拉菜单，事情可能会有些复杂，如下所示：

![在此处输入图像描述](../Images/68b1be88b43c8b507490d70e47c715c4.png)

创建它的代码类似于：

```
<div id = 'bizhover', style = 'margin-right:85px;', class = 'pop_html', title = 'Instructions', data-content = "blah blah blah"> CHOSEN DROP DOWN </div> 
```

我注意到，如果我的鼠标退出到下拉列表的顶部，弹出窗口仍然存在。如果我将鼠标移到下方或侧面，弹出框会按预期消失。

任何建议将不胜感激。

# windows-phone-7 - WP7上的全景控制可以非循环吗？

> ID：11224507
> 
> 赞同：0
> 
> 时间：2012-06-27T10:48:34.333
> 
> 标签：windows-phone-7, silverlight-toolkit, silverlight-5.0, panorama-control

我在 WP7 设计上使用全景控件，我想知道是否有某种方法可以停用其上的圆形（或圆形）导航？

基本上我要做的是在最后一项上结束水平滚动，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:54:14.140

即使有可能，此类应用也很可能在 Marketplace 审核中被拒绝。

系统的优势在于一致性。不要试图重新发明轮子。用户希望全景图能够循环播放。

# android - 如何在对话框中显示edittext、listview和正负按钮？

> ID：11224513
> 
> 赞同：2
> 
> 时间：2012-06-27T10:48:44.527
> 
> 标签：android, button, dialog, android-edittext, android-alertdialog

如何在对话框中显示edittext和listview以及正负按钮？我试图分别显示它们，但我希望所有这些都在一个对话框中。

要显示编辑文本，我尝试过：

```
AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
builder.setView(modeList);
builder.setPositiveButton("Save", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) { 
        String myTextString = savedText.getText().toString().trim();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:54:11.787

您需要**自定义对话框**。

阅读有关此的[android 文档](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)，还有一个示例代码。

您还可以在[此处找到教程](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:15:31.857

制作一个新的布局文件并：

```
public void showYourCustomDialog(){
    this.showDialog(YOUR_CUSTOM_DIALOG_ID);
}
@Override
public Dialog onCreateDialog(int id){
    if(id == YOUR_CUSTOM_DIALOG_ID){
        Dialog d = new Dialog();
        d.setContentView(R.id.your_dialog_layout);
        // maybe more things
        return d;
    } else return super.onCreateDialog(id);
} 
```

您也可以创建一个新的类文件并扩展 Dialog 类。然后，您可以向对话框添加新用途，而不是 android 提供的基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:17:35.213

试试这个：

```
String[] p_values = populate_the_list_with_your_content();
ListView mListview = new ListView(this);    // pass your context here
adpter = new ArrayAdapter<String>(this,R.layout.your_raw_item_with_whatever_you_like, p_values);
mListview.setAdapter(adpter);
AlertDialog mAlertDialog;
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
AlertDialog.Builder mBuider = new AlertDialog.Builder(your_context);
mBuider.setTitle("title");  // optional
mBuider.setPositiveButton("positive", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // do what you got to do - just be positive          
    }
});

mBuider.setNegativeButton("Back",new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
    // negative reaction
    }
});

mBuider.setView(mListview);
mAlertDialog = mBuider.create();
lp.copyFrom(mAlertDialog.getWindow().getAttributes());
mAlertDialog.show(); 
```

为我工作。开心！

# regex - 正则表达式没有在正确的位置应用我的非捕获正前瞻？

> ID：11224515
> 
> 赞同：0
> 
> 时间：2012-06-27T10:49:06.540
> 
> 标签：regex

我有线...

```
[2] = "2012-06-25 00:00:44 W3SVC1768084652 22.66.33.11 GET /errorpage/404.aspx/ 404;http://www.mydomain.com:8050/images/bg_vertical_menu_arrow.gif 8050 - 10.22.77.11 Mozilla/4.0+(compatible;+MSIE+8.0;+Windows+NT+6.1;+Trident/4.0;+GTB7.3;+SLCC2;+.NET+CLR+2.0.5... 
```

而正则表达式...

```
(http://.*)(?=\s) 
```

但我得到：

```
http://www.mydomain.com:8050/images/bg_vertical_menu_arrow.gif 8050 - 10.22.77.11 
```

作为比赛，这很烦人，因为 .gif 部分之后显然有一个空格，这就是正则表达式应该停止的地方，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:55:26.870

这个怎么样 ：

```
http[a-z://0-9\.\?_=\&]* 
```

在[http://regexr.com?31cgt测试](http://regexr.com?31cgt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:50:48.983

`(http:\/\/.*?)(?=\s)`您可以通过或使用简单的一个来修复您的正则表达式`(http:\/\/\S*)`。

# python - CentOS 5.8 对 Python 2.4 的依赖？

> ID：11224517
> 
> 赞同：0
> 
> 时间：2012-06-27T10:49:17.090
> 
> 标签：python, centos

我有一个 CentOS 5.8 服务器，并计划安装更高版本的 python（大概是 2.7）。我听说过很多人提到 CentOS 在很多管理功能等方面都非常依赖 2.4。我正在尝试确定这些功能到底是什么（以及我是否真的会使用它们），以便我可以决定是否更新 python通过 yum 或从源代码构建。

谁能给我一些关于 CentOS 功能依赖于 Python 2.4 的更详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:53:05.217

如果 python2.7 在 Yum 上可用，您应该使用它：大型发行版（redhat、ubuntu、debian、fedora）上的包管理负责为您维护不会相互冲突的并行 Python 安装。

这个选项应该让你的系统“/usr/bin/python¬文件指向 Python2.4，并给你另一个 python2.7 二进制文件。

否则，如果您选择从源代码构建它，请选择另一个前缀 - /opt -（甚至 /usr/local 都不会很安全）来构建它。

您不需要确切知道哪些系统部分依赖于 Python 2.4 - 只要放心，如果您尝试修改系统 Python 本身，它将非常严重且不可预测地崩溃。

# windows - 如何正确设置 Vim 的 makeprg (Windows)

> ID：11224519
> 
> 赞同：2
> 
> 时间：2012-06-27T10:49:36.803
> 
> 标签：windows, cmd, vim

在 Linux 中，我`au FileType c set makeprg=gcc\ -o\ %<`在 .vimrc 中使用它来为 .c 文件设置默认编译器，并且：`nmap <F5> :<C-U>silent make %<CR>:redraw!<CR>:!./%<<CR>`绑定 F5 键以加快速度。

我应该如何在 Windows 上执行此操作？我已经尝试过`au FileType c set makeprg="cmd /c C:\tcc\tcc.exe -o %<"`和其他一些样本，但没有一个有效。

简而言之：我想`F5`在 cmd 或 cmd 中使用编译器给出的错误来编译和运行程序。

我很感激任何提示如何让这个东西在 Windows 上工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:33:47.750

不需要在`'makeprg'`. 如果 gcc 在您的路径中，您在 Linux 中使用的行应该可以正常工作。

另一种方法是使用[Single Compile 插件](http://www.topbug.net/blog/2012/03/07/use-singlecompile-to-compile-and-run-a-single-source-file-easily-in-vim/)来简化到`F5`.

# objective-c - IOS：故事板和侧边菜单作为 facebook 应用程序

> ID：11224521
> 
> 赞同：9
> 
> 时间：2012-06-27T10:49:40.650
> 
> 标签：objective-c, ios

如何使用情节提要和导航控制器创建隐藏菜单？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T11:56:56.887

查看这个 Github 项目 ECSlidingViewController。这正是您正在寻找的。

[https://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

引用项目[自述文件](https://github.com/edgecase/ECSlidingViewController)：

> ECSlidingViewController 是 iOS 的视图控制器容器，它在两层中显示其子视图控制器。它提供了滑动顶视图以显示其下方视图的功能。此功能的灵感来自 Path 2.0 和 Facebook iPhone 应用程序。

![在此处输入图像描述](../Images/8b8eb7b77c4535aafa744f4fb4718af8.png)

# java - 在Android上绘制9个补丁虚线/虚线

> ID：11224522
> 
> 赞同：1
> 
> 时间：2012-06-27T10:49:46.493
> 
> 标签：java, android, nine-patch

谷歌没有帮助我找到我的问题的解决方案。（据我所知......）。

我想知道是否可以在Android上绘制一条具有9个补丁功能的虚线。

我的目标是从一个布局画一条虚线到另一个布局。

我考虑了 9 个补丁，因为我希望虚线在每个活动中都相同。（不要被拉伸）。

那可能吗 ？或者也许有更好的解决方案？

这是我想要的一个例子（用实线）：http: [//hpics.li/866bb56](http://hpics.li/866bb56)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T10:58:04.867

如果你想要一个漂亮的虚线，你不能为此使用九个补丁。9 补丁会扩大尺寸的事实会使您的点变形并拉伸空间。

您要查看的是 Shapes 并将它们用作背景：

**/res/drawable/dotted.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="line">

<stroke
    android:color="#CC0000"
    android:dashWidth="10px"
    android:dashGap="10px" /> 
</shape> 
```

并将其用作视图的背景。

了解更多：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T11:06:00.043

这可以通过 XML 资源来完成。

例如，用笔划定义一个可绘制对象（它可以是虚线）并将其设置为您的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >
<solid android:color="#000000" />
<stroke
    android:dashWidth="4dp"
    android:dashGap="4dp"
    android:width="2dp"
    android:color="#FF0000" />
<padding
    android:bottom="4dp"
    android:left="4dp"
    android:right="4dp"
    android:top="4dp" />
</shape> 
```

导致这样的事情：

![点状图像](../Images/ad37750aa0914a550f117d1933b745b5.png)

问候，亚历克斯。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T07:42:36.580

实际上，我没有使用形状，因为我需要一条垂直虚线和另一条水平虚线。

并且不可能得到具有形状的垂直线。（事实上​​，这是可能的，但不是本地的，结果不是我所期望的）。

所以我拿了我的虚线，用它制作了两张小图像，一张是水平的，另一张是垂直的。然后我为每个方向创建了 2 个 xml 文件并使用重复模式调用我的 drawable

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:src="@drawable/pointilles_horizontal_pattern"
android:tileMode="repeat" /> 
```

谢谢大家 ！

# android - 在 Android 中使用 Geo 的默认 Google 地图

> ID：11224526
> 
> 赞同：2
> 
> 时间：2012-06-27T10:50:04.037
> 
> 标签：android, google-maps

我正在使用以下代码在默认谷歌地图上定位位置。

```
 Uri uri = Uri.parse("geo:"+ Global.detail_lat+","+Global.detail_long+"?z=15");
 Intent in = new Intent(Intent.ACTION_VIEW, uri);
 startActivity(in); 
```

但是使用此代码，当地图打开时，该位置上没有显示任何点或标记或图钉。它只是看起来像简单的地图。我怎样才能在上面推销？或者我如何使用此代码在此默认谷歌地图上突出显示该位置？

谢谢，杰伊帕特尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:02:24.130

试试这个

```
Uri uri = Uri.parse("geo:"+ Global.detail_lat+","+Global.detail_long+"?z=15"+","+(Label+Name)+"); 
```

这将打开具有给定标签名称的默认地图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:59:01.377

试试这个，Uri.parse("maps.google.com/maps?q="; + STREET + "+" + NUMBER + "&" + CITY);

它将打开谷歌地图应用程序，显示带有标记和“气泡”的地址，希望这项工作适合你

# sql - Oracle SQL - 在字段中查找特殊的非数字字符

> ID：11224529
> 
> 赞同：6
> 
> 时间：2012-06-27T10:50:18.167
> 
> 标签：sql, string, oracle, select

如何在 where 子句中识别除数字之外的数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T10:54:35.353

```
SELECT *
  FROM <table>
 WHERE REGEXP_LIKE(<column>, '[^[:digit:]]'); 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T11:03:37.227

您也可以使用 TRANSLATE 函数来执行此操作，如下所示：

```
SELECT *
  FROM A_TABLE a
  WHERE LENGTH(TRANSLATE(a.FIELD, 'x0123456789', 'x')) IS NOT NULL 
```

`LENGTH(TRANSLATE(a.FIELD, 'x0123456789', 'x'))`如果字段仅包含数字字符，则表达式将返回 NULL。如果存在非数字字符，它将返回非数字字符的数量。

分享和享受。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T14:03:14.573

尝试这个

```
SELECT *
FROM table
WHERE regexp_like(column_name,'[^0-9]+');` 
```

这将选择列中包含非数字字符的所有行。

有关详细信息，请查看此[页面](http://www.oraclebin.com/2012/12/how-to-check-non-numeric-value-in.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T17:05:28.857

虽然不完美（不考虑“#”、“@”等字符），但一个快速而肮脏的解决方案是：

```
SELECT * FROM <YOUR_TABLE>
WHERE UPPER(<YOUR_TABLE.your_column_name>) = LOWER(<YOUR_TABLE.your_column_name>) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T11:03:58.810

或者这个

```
select * from <YOUR_TABLE>
where LENGTH(REPLACE(TRANSLATE(<YOUR_TABLE.your_column_name>,
                               ’0123456789′, ‘@@@@@@@@@@’), ‘@’, NULL)) > 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-19T21:37:01.367

您可以使用翻译并过滤掉具有非数字字符的值，然后按列排序。

```
select * from (
    select case  WHEN trn > 0 then NULL  else fld1 end New_column, fld1,trn FROM 
        (
        SELECT '123ab' fld1, LENGTH(TRIM(TRANSLATE('123ab', ' +-.0123456789',' '))) trn FROM dual UNION ALL
        SELECT 'a123b', LENGTH(TRIM(TRANSLATE('a123b', ' +-.0123456789',' '))) FROM dual UNION ALL
        SELECT '1256.54', LENGTH(TRIM(TRANSLATE('1256.54', ' +-.0123456789',' '))) FROM dual UNION ALL
        SELECT '4567899', LENGTH(TRIM(TRANSLATE('4567899', ' +-.0123456789',' '))) FROM dual UNION ALL
        SELECT '-56',LENGTH(TRIM(TRANSLATE ('-56', ' +-.0123456789',' '))) FROM dual
        )
)order by new_column 
```

# php - PHP 使用 isset 检查输入

> ID：11224531
> 
> 赞同：0
> 
> 时间：2012-06-27T10:50:37.420
> 
> 标签：php, forms, input

为了检查输入字段是否为空或有任何值，以下两种方法是否会以相同的方式工作？或者他们中的任何一个都比其他更好？

```
if ($options['url']) {
    ..
} 
```

**或者**

```
if ( isset ($options['url']) &&  ($options['url']!="") ) {
    ..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:53:26.280

如果不是数组或索引不存在，如果不与您核对，`isset()`至少会收到一条通知消息。所以应该使用。`$options``url``isset()`

你也可以使用

```
if (! empty($options['url'])) {
    ...
} 
```

[Empty()](http://php.net/manual/en/function.empty.php)检查任何错误值（如空字符串、未定义等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:01:39.113

下面的代码仅检查该值是否为真，假设键存在。如果密钥不存在，将触发通知。if ($options['url']) { .. }

`isset`会告诉你键是否存在并且值不为空。

我会使用`empty`它，因为如果键不存在，它将返回 false，如果键确实存在但值为空，它也会返回 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:03:49.887

不。

`$options['url']!=""`检查变量是否为空，

while`isset($options['url'])`检查变量是否已**设置**或**不是 NULL**。

## 无论如何，总是调用**可能存在或不存在**`isset()`的变量或数组键必须是一个规则。

 **或者你会得到所有那些“未定义”的警告......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T11:12:03.937

以下内容就足够了：

```
if (isset($options["url"]) && $options["url"]) {
   // ...
} 
```

1.  用于检查数组中[`isset()`](http://www.php.net/manual/en/function.isset.php)是否存在特定键（并避免*未定义索引*通知）。这是一个很好的编程习惯。在这种情况下，您也可以使用该[`array_key_exist()`](http://pk1.php.net/manual/en/function.array-key-exists.php)功能，但`isset`通常更快。

2.  `$options['url']`在布尔上下文中使用诸如此类的表达式时；检查其真实性（请参阅[转换为布尔部分](http://www.php.net/manual/en/language.types.boolean.php)）。该[`empty()`](http://php.net/manual/en/function.empty.php)函数对大多数表达式产生相同的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T10:53:27.117

Isset 确定变量是否不为 NULL 并且已设置。

($options['url']) 确定变量是否返回 true**

# python - 推知道一个对象但无法检索它

> ID：11224538
> 
> 赞同：1
> 
> 时间：2012-06-27T10:51:00.073
> 
> 标签：python, serialization, pickle

在玩了很多之后，我找到了一些奇怪行为的解决方法，但想了解发生了什么。抱歉，如果我缺少基本的东西，但我在 python 方面非常缺乏经验。

所以...

我在一个脚本中将一个对象存储在 Shove 中并在另一个脚本中检索 - 如果我使用我的解决方法，一切正常

**`shove_repro_class.y`**

```
 class MyClass():
        def __init__(self, name ):
            self.name = name
            self.othername = "%s" % name    ## <=== workaround for 
                                            ## <=== self.othername = name
        def __repr__(self):
            return 'Object "%s"' % self.name 
```

**`shove_repro.py`（这是第一个运行的脚本）**

```
from shove import Shove
from shove_repro_class import MyClass

location = 'file://test'
#   location = 'sqlite:///test.db'  # this won't work any better
data = Shove(location)
data['somename'] = MyClass('somename')

data.close() 
```

**`shove_repro2.py`（这是第二个运行的脚本）**

```
from shove import Shove
from shove_repro_class import MyClass

location = 'file://test'
#   location = 'sqlite:///test.db'  ## same remark as before

data = Shove(location)
print data.keys()            # prints [ 'somename' ]
print data[data.keys()[0]]   # throws an exception in some cases (see 1\. below) ! 
```

**几个问题：**

1.  如果我替换`self.othername = "%s" % name`到`self.othername = name`那时，我将无法从 Shove 检索数据。这种解决方法花了我很长时间才弄清楚，所以我觉得有一些可疑的东西需要我去找出来，否则我会经常感到惊讶。我在想这里可能存在深/浅复制问题，但考虑到我认为字符串是不可变的，除了深复制之外应该没有其他可能的副本 - 对吧？
2.  不管我的解决方法如何，怎么可能`data.keys()`有我的`'somename'`密钥但仍然`data['somename']`不起作用？
3.  如果没有明确导入，似乎`shove_repro2.py`仍然有效。`MyClass`这是否意味着 shove 对象存储了类定义？

太感谢了！

# c - 用字符及其数组预填充结构

> ID：11224539
> 
> 赞同：0
> 
> 时间：2012-06-27T10:51:01.000
> 
> 标签：c, struct

简单的问题...我提前知道了很多值，并且需要稍后添加其他值，但是为什么不编译在 "direc[i] = {L"Jim",L"Smith"} 行;" 我在哪里知道价值观？

```
struct NARRAY
{
TCHAR *sFName;
TCHAR *sLName;
};

void main()
{
struct NARRAY direc[1000];

DWORD i = 0;

direc[i].sFName = calloc(512,sizeof(TCHAR));
direc[i].sLName = calloc(512,sizeof(TCHAR));

direc[i] = {L"Jim",L"Smith"};

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:02:49.730

经典 C 没有结构文字。您只能在初始化变量时使用该语法，即作为其定义的一部分。

但是，C99 引入了[复合文字](http://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html)，这将允许您像这样编写它：

```
direc[i] = ((struct NARRAY) { L"Jim", L"Smith" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:10:23.073

您正在尝试使用结构/数组初始化，这仅在声明变量时允许。您必须自己初始化每个成员：

```
direct[i].sFname = L"Jim";
direct[i].sLname = L"Smith"; 
```

当然，如果您为数组中的某些条目动态分配这些成员，而为某些条目静态分配这些成员（如上面的示例），您真的无法知道哪些是动态分配的，这将导致问题来释放那些指针。您可以使用[`strdup`](http://msdn.microsoft.com/en-us/library/y471khhc%28v=vs.100%29.aspx)（或者更确切地说，`_tcsdup`for `TCHAR`）然后：

```
direct[i].sFname = _tcsdup(L"Jim");
direct[i].sLname = _tcsdup(L"Smith"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:03:15.837

您需要使用`memcpy`或之类的功能`strncpy`将数据复制到分配的内存中。

```
memcpy(direc[i].sFName, "Jim", 3);
direct[i].sFName[3] = '\0'; 
```

# .net - 为什么.net中不存在system.float？

> ID：11224543
> 
> 赞同：27
> 
> 时间：2012-06-27T10:51:02.890
> 
> 标签：.net, c#-4.0, types

为什么 .Net 没有`System.Float`类似`System.String`等的类型`System.Double`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-27T10:52:06.617

它有 type `System.Single`，这就是你要找的。

请参阅[MSDN 中 C# 中的内置值类型表](http://msdn.microsoft.com/en-us/library/ya5y69ds)。

在 C# 中调用类型的方式（其中名称类型与 C 语言相似，但不相同（例如`long`类型））和在 .Net Framework 中调用类型的方式之间存在细微差异，后者当然应该与语言无关，如许多语言可以（并且确实）在其上运行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T10:55:33.243

因为它是一个别名`System.Single`

看看[http://msdn.microsoft.com/en-us/library/b1e65aza.aspx](http://msdn.microsoft.com/en-us/library/b1e65aza.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-27T10:56:22.143

就像`int`是`System.Int32`，`float`是`System.Single`

# android - 如何使用 C2DM 向多个用户发送推送消息？

> ID：11224553
> 
> 赞同：0
> 
> 时间：2012-06-27T10:51:22.093
> 
> 标签：android, android-c2dm

到目前为止，我已经成功地使用注册 ID 和带有签名 C2DM 角色帐户的 authtoken 向一台设备发送消息。现在我已经向多个用户发送消息。我不知道如何实现这一点。

任何人都可以帮助克服这个问题。

Java Servlet 代码，

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {

        resp.setContentType("text/plain");
        StringBuilder data = new StringBuilder();

        data.append("registration_id=" + ServerConfig.DeviceRegistrationID_S);

        // Collapse key is for grouping messages and only the last sent message
        // with the same key going to be sent to the phone when the phone is
        // ready to get the message if its not from the beginning
        data.append("&collapse_key=test");

        // Here is the message we sending, key1 can be changed to what you whant
        // or if you whant to send more then one you can do (i think, not tested
        // yet), Testing is the message here.
        data.append("&data.key1=Testing Message from C2DM");

        // If you want the message to wait to the phone is not idle then set
        // this parameter 
```

// data.append("&delay_while_idle=1");

```
 byte[] postData = data.toString().getBytes("UTF-8");

        StringBuilder sb = new StringBuilder();

        sb.append(ServerConfig.AuthToken + " - ");

        try {
            // Send data
            URL url = new URL("https://android.clients.google.com/c2dm/send");

            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Content-Type",
                    "application/x-www-form-urlencoded;charset=UTF-8");
            conn.setRequestProperty("Content-Length",
                    Integer.toString(postData.length));
            conn.setRequestProperty("Authorization", "GoogleLogin auth="
                    + ServerConfig.AuthToken);

            OutputStream out = conn.getOutputStream();
            out.write(postData);
            out.close();

            Integer responseCode = conn.getResponseCode();
            if (responseCode.equals(503)) {
                // the server is temporarily unavailable
                sb.append("responseCode = " + responseCode);
            } else {
                if (responseCode.equals(401)) {
                    // AUTH_TOKEN used to validate the sender is invalid
                    sb.append("responseCode = " + responseCode);
                } else {
                    if (responseCode.equals(200)) {

                        // Check for updated token header
                        String updatedAuthToken = conn
                                .getHeaderField("Update-Client-Auth");
                        if (updatedAuthToken != null) {
                            ServerConfig.AuthToken = updatedAuthToken;
                            sb.append("updatedAuthToken = \""
                                    + updatedAuthToken + "\"");
                        }

                        String responseLine = new BufferedReader(
                                new InputStreamReader(conn.getInputStream()))
                                .readLine();

                        if (!sb.toString().equals("")) {
                            sb.append(" - ");
                        }

                        if (responseLine == null || responseLine.equals("")) {
                            sb.append("Got responsecode "
                                    + responseCode
                                    + " but a empty response from Google AC2DM server");
                        } else {
                            sb.append(responseLine);
                        }
                    } else {
                        sb.append("responseCode = " + responseCode);
                    }
                }
            }
        } catch (Exception e) {
            if (!sb.toString().equals("")) {
                sb.append(" - ");
            }

            sb.append("Exception: " + e.toString());
        }

        resp.getWriter().println(sb.toString());

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:27:03.617

我知道您正在处理 C2DM，但 Google 刚刚发布了 C2dM 的继任者 GCM，它允许在一个 HTTP 帖子中向 1000 台设备发送通知。如果您的应用程序尚未上市，我建议您在部署之前立即迁移到使用 GCM。在 GCM 中向多个设备发布通知就像将所有设备注册 id 放入 JSON 数组并将其发送到 google 的服务器一样简单，如下所示：

```
{ 
  "registrations_ids": [reg_id1, reg_id2, reg_id3, reg_id10, reg_id100],
  "data" : "payload"
} 
```

但是如果你坚持使用 C2DM，你只需要循环发送通知，通过设备注册 id 的迭代。

# python - 将日期添加到日期会出现 ValueError：未转换的数据仍然存在

> ID：11224554
> 
> 赞同：1
> 
> 时间：2012-06-27T10:51:25.527
> 
> 标签：python, datetime

这是另一个可能非常简单的问题，但到目前为止我还没有找到任何解决方法。

我正在尝试将 14 天添加到 2000 个列表（每个列表为）中的某些日期，并将`['number1','number2','Day Month Year']`新日期作为值放在每个列表的末尾（即每个列表变为 `['number1', 'number2', 'Day Month Year', 'Day Month Year']`到目前为止，我得到的是：

```
from datetime import timedelta
listf=[]
z=range(len(hinfo))
for i in z:
    datetime.datetime.strptime(hinfo[i][2],'%d %b %y')
    listf.append(hinfo[i][2]+timedelta(days=14)) 
```

但这会引发错误“ValueError：未转换的数据仍然存在：01”。列表中的所有日期都应该没问题，所以我不知道为什么会出现错误。如果这只是一个简单的错误，请原谅初学者:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:21:09.853

如您在问题中指定的那样，将新日期附加到原始列表的正确代码：

```
from datetime import timedelta
import datetime

hinfo = [['C148', 'W29', '08 August 2001'], ['Q964', 'R72', '21 May 2003']]

for i, h in enumerate(hinfo):
    if h[2] == '': # error checking
        del hinfo[i]
        continue
    d = datetime.datetime.strptime(h[2], '%d %B %Y')
    d += timedelta(days=14)
    h.append(d.strftime('%d %B %Y'))

print hinfo 
```

对我来说`[['C148', 'W29', '08 August 2001', '22 August 2001'], ['Q964', 'R72', '21 May 20 03', '04 June 2003']]`，如果我正确理解了你的问题，这就是你想要的。

如果你得到一个错误，很可能是输入不是你说的，或者认为它是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:54:51.080

您没有使用 strptime 的结果，但这不是您从 strptime 收到错误的原因。错误是因为您想要 %Y 而不是 %y。你想要这样的东西：

```
listf = []
for h in hinfo:
    d = datetime.datetime.strptime(h[2], "%d %b %Y")
    listf.append(d + timedelta(days=14)) 
```

%y 是两位数的年份，%Y 是四位数的年份。

# android - 如何获取网页链接地址

> ID：11224556
> 
> 赞同：0
> 
> 时间：2012-06-27T10:51:39.697
> 
> 标签：android, android-webview

我正在从我的应用程序加载网页并继续浏览并移动到其他页面，在任何时候我都想将当前网页链接地址存储在我的字符串字段中。任何想法..？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:57:26.433

是的，如果你已经实现了**[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)** ，它是可能的。

您可以在 shouldOverrideUrlLoading() 方法中检测 URL：

```
browser.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // You can have URL here
    }
}); 
```

# django - Django、nose 和 selenium .. 初始状态错误

> ID：11224561
> 
> 赞同：1
> 
> 时间：2012-06-27T10:51:52.317
> 
> 标签：django, selenium, nose, django-testing, django-nose

我已经为 Django 1.3.1 安装了所有东西: `django-nose`, `django-nose-selenium`, 并设置了测试运行器：

```
TEST_RUNNER = 'django_nose.NoseTestSuiteRunner' 
```

**首先**，似乎通过运行 command: `$./manage.py test`，Django 的内部测试开始运行而不是 Nose。

其次，通过运行`$nosetests`我得到这个：

```
/usr/local/lib/python2.7/dist-packages/nose/plugins/manager.py:383: RuntimeWarning: Unable to load plugin selenium = noseselenium.plugins:SeleniumPlugin: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.
  RuntimeWarning)

/usr/local/lib/python2.7/dist-packages/nose/plugins/manager.py:383: RuntimeWarning: Unable to load plugin djangoliveserver = noseselenium.plugins:DjangoLiveServerPlugin: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.
  RuntimeWarning)

/usr/local/lib/python2.7/dist-packages/nose/plugins/manager.py:383: RuntimeWarning: Unable to load plugin cherrypyliveserver = noseselenium.plugins:CherryPyLiveServerPlugin: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.
  RuntimeWarning)

/usr/local/lib/python2.7/dist-packages/nose/plugins/manager.py:383: RuntimeWarning: Unable to load plugin selenium_fixtures = noseselenium.plugins:SeleniumFixturesPlugin: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

任何想法 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:01:19.397

您是否将“django_nose”添加到 INSTALLED_APPS？

# c# - 如何使用“路径”查询 XDocument？

> ID：11224568
> 
> 赞同：24
> 
> 时间：2012-06-27T10:52:12.580
> 
> 标签：c#, xml, linq, xpath, linq-to-xml

我想查询`XDocument`给定路径的对象（例如“/path/to/element/I/want”），但我不知道如何继续。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-27T10:56:17.533

您可以使用 from 的方法[`System.Xml.XPath.Extensions`](http://msdn.microsoft.com/en-us/library/bb342747)来执行此操作。

例如，如果要选择单个元素，可以使用[`XPathSelectElement()`](http://msdn.microsoft.com/en-us/library/bb156083)：

```
var element = doc.XPathSelectElement("/path/to/element/I/want"); 
```

查询不必像您描述的那样是简单的路径，它们使用[XPath](http://en.wikipedia.org/wiki/XPath)语言。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-09T17:30:02.783

尽管这是一篇较旧的帖子，但应该注意的是，它`LINQ-to-XML`可以用作`System.XML.XPath`基于路径中的路径查找元素的替代方法`XDocument`

例子：

```
var results = x.Elements("path").Elements("to").Elements("element").Elements("I").Elements("want").FirstOrDefault(); 
```

注意：可能需要更改 LINQ to XML 命令以适应 XML 的实际结构和/或基数。

[https://msdn.microsoft.com/en-us/library/bb675156.aspx](https://msdn.microsoft.com/en-us/library/bb675156.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-04T22:56:13.343

我需要做类似的事情。这个[repo](https://github.com/jchristof/XDocumentXPath)有几个单元测试演示使用 XPathEvaluate() 进行 XDocument 查询

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-27T10:54:29.863

与此类似的东西可能会起作用：

```
var path = "/path/to/element/I/want";
var route = path.Split(new []{'/'}, StringSplitOptions.RemoveEmptyEntries);

XElement result = null;
foreach (var node in route)
{
    if (result == null)
    {
        result = _xmlDocument.Element(node);    
    }
    else
    {
        result = result.Element(node);
    }
}

return result; 
```

# matlab - 我应该如何在 Matlab 中归一化总和为 1 的向量？

> ID：11224575
> 
> 赞同：10
> 
> 时间：2012-06-27T10:52:30.100
> 
> 标签：matlab, normalize, norm

我需要标准化 N 个整数的向量，以便：

*   每个值与其原始值成正比（值将在 0 和 1 之间）
*   所有值的总和为=1

例如：

如果我有一个向量

```
V = [2,2,1,0] 
```

归一化向量应该是：

```
V_norm = [0.4,0.4,0.2,0]  % 0.4+0.4+0.2 = 1 
```

我尝试了在这个社区和网络上找到的许多解决方案，最后我用这段代码做到了：

```
part = norm(V);
if part > 0
  V_norm = V/part;
else % part = 0 --> avoid "divide by 0" 
  V_norm = part;
end 
```

如果出现以下问题，则此问题有效：

*   数组的所有元素都是“0”——>结果数组不会改变
*   数组中只有一个元素 >0，所有其他元素 = 0 --> 结果数组：元素 >0 为 1，其他元素为 0

但如果我有不同的情况，虽然结果是成比例的，但总和不是 0。例如：

```
 V = [1,0,1]
   V_norm = [0.74,0,0.74]

   V = [1,1,1]
   V_norm = [0.54,0.54,0.54] 
```

（我不确定数字是否正确，因为我现在不能使用 Matlab，但我确定总和 > 1）

啊提示？

先感谢您

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T11:42:14.523

我相信，您需要做的是使用[1 范数](http://en.wikipedia.org/wiki/Norm_%28mathematics%29#Taxicab_norm_or_Manhattan_norm)（出租车范数）进行标准化：

```
v = [2, 2, 1, 0];
v_normed = v / norm(v, 1); % using the 1-norm 
```

变量`v_normed`现在应该是`[0.4, 0.4, 0.2, 0.0]`. 的 1 范数`v_normed`将等于 1。您也可以对向量求和（类似于 1 范数，但不对每个值应用绝对函数），但该和的范围通常在 -1 到 1 之间案例（如果任何值`v`低于 0）。您可以使用`abs`结果总和，但从数学上讲，它不再符合标准。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T11:25:30.483

> **...归一化向量应该是：**
> 
> **`v_norm = [0.4, 0.4, 0.2, 0]; % 0.4+0.4+0.2 = 1`**

那要看。你的[规范](http://en.wikipedia.org/wiki/Norm_(mathematics))函数是什么？

`norm(x)`在 MATLAB 中返回标准范数，这意味着归一化向量的元素的**平方**`x`和为 1。

在您的示例中：

```
v = [1, 1, 1];         %# norm(v) = sqrt(1^2+1^2+1^2) = ~1.7321
v_norm = v / norm(v);  %# v_norm = [0.5574, 0.5574, 0.5574] 
```

`sum(v_norm .^ 2)`确实产生 1，但`sum(v_norm)`没有如预期的那样。

> **我需要对 N 个整数的向量进行归一化，以便每个值与其原始值成比例（该值将在 0 和 1 之间）并且所有值的总和为 1。**

*“规范化*”是什么意思？[这是否意味着根据范数定义](http://en.wikipedia.org/wiki/Norm_(mathematics)#Definition)除以一个有效的数学范数函数的值？

*“比例*”是什么意思？这是否意味着所有元素都乘以*相同*的数字？如果是这样，并且它是一个有效的数学规范，则您不能保证元素的总和始终为 1。
例如，考虑`v = [1, -2]`. 然后`sum(v) = -1`。

或者也许`sum`是您正在寻找的函数，但它在数学上不符合规范，因为*规范是一个函数，它为向量空间中的所有向量分配严格的正长度或大小*。
在上面的例子中，`sum(v)`是负数。

> **啊提示？**

您可以选择：

1.  `sum(x)`，它满足这两个要求，但不符合规范函数的条件，因为它可以产生负值。
2.  `norm(x, 1)`，正如 OleThomsenBuus 建议的那样，它实际上计算`sum(abs(x(:)))`.
    除非您将向量空间限制为非负向量，否则它不会满足您的要求。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T11:16:45.517

如果您的标准化没有比您在问题开始时给出的更进一步的条件，则可能的解决方案是

```
V = [3 4 -2];
S = sum(V);
if (S == 0)
    % no solution
else
    V_norm = V ./ S;
end
sum(V_norm) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-01T09:05:58.140

我将在这里留下我的解决方案，用于“规范化”具有正条目的矩阵的行，其中规范化意味着在过程之后行和为 1。

### 概括

```
normmat = normr(sqrt(mat)).^2 
```

### 最小的例子

`mat`是你的矩阵有积极的条目

```
mat = [1 2 3; 2 3 4] 
```

```
mat =

     1     2     3
     2     3     4 
```

现在我们做单线：

```
normmat = normr(sqrt(mat)).^2 
```

```
normmat =

    0.1667    0.3333    0.5000
    0.2222    0.3333    0.4444 
```

每行之和为1。

```
sum(normmat, 2) 
```

```
ans =

    1.0000
    1.0000 
```

一排内的比例是恒定的

```
normmat ./ mat 
```

```
ans =

    0.1667    0.1667    0.1667
    0.1111    0.1111    0.1111 
```

不一定是最有效的，但它是一条线。

# c# - 保存字节 xna，保存某些数字时出现问题

> ID：11224579
> 
> 赞同：0
> 
> 时间：2012-06-27T10:52:55.203
> 
> 标签：c#, xna, isolatedstorage

我有点困惑，这是我到目前为止所做的：

```
public class SaveLoadSystem
{
    String SAVEFILENAME = "gameSave2.sav";
    Stats stats = new Stats();

    GameProgressInformation gameInfo = new GameProgressInformation();

    public SaveLoadSystem()
    {

        IsolatedStorageFile savegameStorage = IsolatedStorageFile.GetUserStoreForApplication();

        // open isolated storage, and write the savefile.
        if (savegameStorage.FileExists(SAVEFILENAME))
        {
            IsolatedStorageFileStream fs = null;
            try
            {
                fs = savegameStorage.OpenFile(SAVEFILENAME, System.IO.FileMode.Open);
            }
            catch (IsolatedStorageException e)
            {
            }

            if (fs != null)
            {

                byte[] saveBytes = new byte[256];
                int count = fs.Read(saveBytes, 0, 256);

                if (count > 0)
                {
                    for (int i = 0; i < stats.GetLevels; i++)
                    {
                        GameProgressInformation.LevelUnlockInfo levelInfo = new GameProgressInformation.LevelUnlockInfo();
                        // Think line below is wrong.
                        levelInfo.score = saveBytes[i * 4];
                        GameProgressInformation.levels.Add(levelInfo);

                    }
                    fs.Close();
                }

            }

        }
        else
        {
            for (int i = 0; i < stats.GetLevels; i++)
            {
                GameProgressInformation.LevelUnlockInfo levelInfo = new GameProgressInformation.LevelUnlockInfo();
                GameProgressInformation.levels.Add(levelInfo);
            }
        }
    }
    public void Save()
    {
        // Save the game.

        IsolatedStorageFile savegameStorage = IsolatedStorageFile.GetUserStoreForApplication();

        // open isolated storage, and write the savefile.
        IsolatedStorageFileStream fs = null;
        fs = savegameStorage.OpenFile(SAVEFILENAME, System.IO.FileMode.Create);

        if (fs != null)
        {
            for (int i = 0; i < GameProgressInformation.levels.Count; i++)
            {
                byte[] scoreBytes = System.BitConverter.GetBytes(GameProgressInformation.levels[i].score);
                fs.Write(scoreBytes, 0, scoreBytes.Length);

            }
            fs.Close();
        }

    }
} 
```

我的困惑是如何在加载时获取所有必要的二进制数据，同时确保将正确的数据分配给正确的级别。我认为它必须以 4 组为一组。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:57:06.833

想出了如何去做。对流阅读器的工作方式有错误的理解。

# jquery - jQuery - 滚动时的粘性标题和动画徽标

> ID：11224582
> 
> 赞同：0
> 
> 时间：2012-06-27T10:53:06.033
> 
> 标签：jquery, scroll, jquery-animate

我有一个 id="header" 的 div 和另一个 div id="logo" ("position:absolute") ，其内部高于标题 div。

向下滚动页面时，我想将标题粘贴到窗口顶部（这没有问题）并将徽标滑动到顶部**，**`-125px`以便只有一小部分徽标可见。

向下滚动时向上滑动不会导致错误，但是当我滚动回顶部时，我有很大的延迟将`#logo`回滑动到其原始位置。

这是我的代码：

jQuery：

```
var top = jQuery('#header').offset().top;
jQuery(window).scroll(function() {
     if(jQuery(this).scrollTop() > top) {
        jQuery('#header').addClass('header_fixed');
        jQuery('#content').addClass('content_fixed');           
    } else {
        jQuery('#header').removeClass('header_fixed');                  
        jQuery('#content').removeClass('content_fixed');
    }
    if(jQuery('#header').hasClass('header_fixed')) {
        jQuery('#logo').animate({top:'-125px'}, 500);
    } else {
        jQuery('#logo').animate({top:'0px'}, 500);
    }
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:12:58.270

要快速返回的滚动试试这个：

```
var scroll = 0;
var scrolled = false;

jQuery(window).bind('scroll', function(e) {
     if(jQuery(this).scrollTop() > scroll){
         if(scrolled == false){
            jQuery('#logo').animate({top:'-125px'}, 500);
            scroll = jQuery(this).scrollTop();
         }       
        scrolled = true;
    } else {
        if(scrolled == true){
            jQuery('#logo').animate({top: 0}, 500);
            scroll = 0;
        }       
        scrolled = false;            
    }
}); 
```

我不确定是否是您想要的，这是一个[示例](http://jsfiddle.net/alex_ball/a6nby/3/)

# iphone - 为 iphone 使用 json 框架

> ID：11224584
> 
> 赞同：0
> 
> 时间：2012-06-27T10:53:11.937
> 
> 标签：iphone, objective-c

我正在尝试读取我的 json 数据，但它崩溃了。

```
NSString *hostStr = @"http://www.myIP.com/notices.php";

NSLog(@"%@",hostStr);

NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];    
//NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
id object = [serverOutput JSONValue];
NSMutableDictionary *dictionary = [object JSONRepresentation];

NSLog(@"serverOutput %@", serverOutput);
NSLog(@"Dictionary %@", dictionary); 
```

我有，

```
2012-06-27 12:47:51.138 usualBike[1520:f803] serverOutput [{"id":"128","title":"Usual Bike llega a Tres Cantos"},{"id":"127","title":"Sol y Bicis "},{"id":"126","title":"Usual Bike reduce los tiempos de espera"}]
2012-06-27 12:47:51.139 usualBike[1520:f803] Dictionary [{"id":"128","title":"Usual Bike llega a Tres Cantos"},{"id":"127","title":"Sol y Bicis "},{"id":"126","title":"Usual Bike reduce los tiempos de espera"}] 
```

字典应该与 serverOutput 相同吗？

现在我添加这个：

```
for (id key in [dictionary allKeys]) {
    NSLog(@"key: %@, value: %@", key, [dictionary objectForKey:key]);
} 
```

它崩溃了：

```
2012-06-27 12:51:40.652 usualBike[1550:f803] -[__NSCFString allKeys]: unrecognized selector sent to instance 0x88683f0
2012-06-27 12:51:40.653 usualBike[1550:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString allKeys]: unrecognized selector sent to instance 0x88683f0'
*** First throw call stack:
(0x13e7022 0x1578cd6 0x13e8cbd 0x134ded0 0x134dcb2 0x2b2a 0xf8a1e 0x1140a9 0x113edd 0x1124aa 0x11234f 0x113e14 0x13e8e99 0x3414e 0x340e6 0x25c4bd 0x13e8e99 0x3414e 0x340e6 0xdaade 0xdafa7 0xdab13 0x25ec48 0x13e8e99 0x3414e 0x340e6 0xdaade 0xdafa7 0xda266 0x593c0 0x595e6 0x3fdc4 0x33634 0x12d1ef5 0x13bb195 0x131fff2 0x131e8da 0x131dd84 0x131dc9b 0x12d07d8 0x12d088a 0x31626 0x1f8d 0x1ef5)
terminate called throwing an exception(lldb) 
```

如何读取 json 数据？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:58:16.083

尝试修改这一行。

```
NSDictionary* object = [serverOutput JSONValue];
//you dont need this
//NSMutableDictionary *dictionary = [object JSONRepresentation]; 
```

`JSONRepresentation`返回`NSString`，并且`NSString`没有`allKeys`引发异常的方法

while`JSONValue`返回`dictionary`对象。

你的数据现在在`object`你可以得到他们喜欢

```
 for (NSString* key in [object allKeys]) {
        NSLog(@"key: %@, value: %@", key, [object objectForKey:key]);
    } 
```

或分段

```
NSLog(@"id = %@", [object objectForKey:@"id"]);
NSLog(@"id = %@", [object objectForKey:@"title"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:03:58.333

```
 NSMutableDictionary *complaints =[NSJSONSerialization JSONObjectWithData:respo options:kNilOptions error:&error];
 NSMutableArray *JSONAry = [complaints  objectForKey:@"posts"];
 NSMutableArray *tempary =[[NSMutableArray alloc]init];
 for (int i=0;i < [JSONAry count];i++) {
       ResultFatch *rs = [[ResultFatch alloc] initWithId:[[JSONAry objectAtIndex:i]objectForKey:@"id"]
                                                     title :[[JSONAry objectAtIndex:i] objectForKey:@"title"]];

      [tempary addObject:rs];
  }
 NSLog(@"%@",tempary); 
```

ResultFatch 类是返回字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:22:51.637

你有一个字典数组..使用以下代码： -

```
NSArray *object = [serverOutput JSONValue]; 
```

现在解析它并根据需要使用：-

```
for (NSMutableDictionary *dict in object) {
    NSLog(@"key: %@", [dict allKeys]);
    NSLog(@"value_ID : %@", [dict objectForKey:@"id"]);
    NSLog(@"value_title : %@", [dict objectForKey:@"title"]);
} 
```

这可能会帮助你....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:00:34.583

使用此代码

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"response String= %@",responseString);
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *data = (NSDictionary *) [parser objectWithString:responseString error:nil];   
    NSString *com=(NSString *) [data objectForKey:@"id"];    
    NSLog(@"YOur id value= %@",com);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T11:03:08.763

使用 json 库。

```
SBJsonParser *parser;   
NSDictionary *resDict = [parser objectWithString: serverOutput error:nil]; 
```

# asp.net-mvc - 捆绑和缩小 mvc4

> ID：11224586
> 
> 赞同：1
> 
> 时间：2012-06-27T10:53:12.127
> 
> 标签：asp.net-mvc, bundle

我为测试捆绑和缩小创建了一个 mvc4 应用程序，但是当我运行它并查看 html 呈现的代码时，我注意到没有我的 css 和 javascript 不是捆绑

```
<link href="/Content/themes/base/jquery.ui.resizable.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.selectable.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.accordion.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.autocomplete.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.button.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.dialog.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.slider.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.tabs.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.datepicker.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.progressbar.css" rel="stylesheet" type="text/css" />

<link href="/Content/themes/base/jquery.ui.theme.css" rel="stylesheet" type="text/css" />

<link href="/Content/site.css" rel="stylesheet" type="text/css" /> 
```

但默认情况下，Visual Studio 添加到我的布局文件中

```
 @Styles.Render("~/Content/themes/base/css", "~/Content/css")
    @Scripts.Render("~/bundles/modernizr") 
```

所以我想知道为什么css和javascript不是Bundle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:02:41.040

我得到同样的东西。当我将 web.config 更改为此时：

```
<system.web>
    <compilation debug="false" targetFramework="4.5" />
    ...
</system.web> 
```

...它反而呈现这个：

```
<link href="/Content/themes/base/css?v=ps9Ga9601PrzNA2SK3sQXlYmNW3igUv5FOdOPWptyus1"
    rel="stylesheet" type="text/css">
<link href="/Content/css?v=VvXiCiApDAv4OzD9Y7PEaTL0kONCWIV6Skw7uh51PZk1" 
    rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T18:25:46.053

```
 BundleTable.EnableOptimization = true; 
```

在 Global.asax.cs 的 Application_Start() 方法中添加这行代码。这将覆盖 web.config 中的任何设置并启用优化。有关详细信息，[请参阅](http://modernpathshala.com/Forum/Thread/Interview/7158/bundling-and-minification-in-mvc)有关如何实现捆绑和缩小的视频教程

# c# - Microsoft Office 14.0 对象库关闭 excel

> ID：11224587
> 
> 赞同：0
> 
> 时间：2012-06-27T10:53:13.373
> 
> 标签：c#, .net

参考过：

Microsoft Office 14.0 对象库

在 C# 项目中。是否可以关闭计算机上所有打开的 excel 应用程序？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:59:13.150

```
Process[] processRunning = System.Diagnostics.Process.GetProcesses();
foreach (Process pr in processRunning)
{
    if (pr.ProcessName == "excel")
    {
       pr.Kill();
    }
} 
```

# unit-testing - ASP.Net AccountMembershipService 起订量

> ID：11224593
> 
> 赞同：0
> 
> 时间：2012-06-27T10:53:29.037
> 
> 标签：unit-testing, asp.net-mvc-2, moq

我正在做一个 ASP.Net MVC2 项目，我想对其进行一些单元测试。我试图测试我的 LogOnController 并且遇到了一些困难。在我的 LogOnController 中，我使用 AccountMembershipService 作为，

```
 AccountMembershipService MembershipService = new AccountMembershipService();

    if (MembershipService.ValidateUser(model.UserName, model.Password)){
    ............
    ..........

    } 
```

我正在使用 MOQ 框架，我想知道如何模拟 AccountMembershipService。即使我给出了正确的用户名和密码“ `MembershipService.ValidateUser(model.UserName, model.Password)`”总是返回错误。所以你们中的任何人都知道如何做到这一点..

顺便说一句，我尝试过属性注入。但我一直收到以下错误..

“非虚拟（在 VB 中可覆盖）成员的设置无效：x => x.ValidateUser(.validUserName, .validPassword)”。

它来自“ `stubService.Setup(x => x.ValidateUser(model.UserName, model.Password)).Returns(true);`”行。

这是我的代码..

```
[TestMethod]
         public void TestLogOn_ValidUserNameAndPassword()
         {
             var controller = new LogOnController();
             var request = new Mock<HttpRequestBase>(MockBehavior.Loose);
             var model = new LogOnModel();
             var context = new Mock<HttpContextBase>(MockBehavior.Loose);
             var stubService = new Mock<AccountMembershipService>();
             model.UserName = "xxxxx";
             model.Password = "123";
             context.SetupGet(x => x.Request).Returns(request.Object);
             controller.ControllerContext = new ControllerContext(context.Object, new RouteData(), controller);
             stubService.Setup(x => x.ValidateUser(validUserName, validPassword)).Returns(true);

             Assert.IsTrue(stubService.Object.ValidateUser(model.UserName, model.Password));

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:46:16.930

*   将 AccountMembershipService 注入 LogOnController。
    *   有两种注射方式。一种是构造函数注入，另一种是属性注入。
    *   下面展示了构造函数注入。

```
public class LogOnController
{
    public LogOnController():this(new AccountMembershipService()){}
    public LogOnController(AccountMembershipService service){ ... } //ctor for injection
} 
```

*   确保 ValidateUser 方法是虚拟的。

    *   要模拟，方法应该是虚拟的，这意味着方法是接口、抽象或虚拟的。
*   模拟 AccountMembershipService 并进行测试。

```
public void ExampleForMockingAccountMembershipService()
{
    var validUserName = "..";
    var validPassword = "..";
    var stubService = new Mock<AccountMembershipService >();
    stubService.Setup(x=>x.ValidateUser(validUserName,validPassword)).Return(true);

    Assert.IsTrue(stubService.Object.ValidateUser(validUserName, validPassword));
} 
```

* * *

您的问题来自使用不可覆盖的方法，因此您应该将其视为可覆盖的。一种解决方案是添加虚拟关键字，如下所示。

```
public class AccountMembershipService 
{
    ...
    public (virtual) bool ValidateUser(string userName, string password)
    {
        ...
    } 
    ...
} 
```

另一种是定义接口并模拟接口而不是实际的 AccountMembershipService 类。为此，您还需要将 DI（依赖注入）更改为使用接口。

```
public interface IUserValidator
{
    void ValidateUser(string userName, string password)
}
public class AccountMembershipService : IUserValidator
{
} 
```

# java - 在安卓平板上运行小程序

> ID：11224596
> 
> 赞同：7
> 
> 时间：2012-06-27T10:53:46.323
> 
> 标签：java, android, applet, tablet

我已经准备好一些小程序了。我试图在安卓平板电脑上运行它。它根本不起作用吗？我不知道？有人知道吗？

还是像android之后一样。Java 不是独立于平台的 - ;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T10:56:08.460

AFAIK 没有适用于 Android 的 JRE（Java 运行时环境），因此无法运行小程序。有关更多详细信息，请参阅以下页面：[http ://www.technipages.com/can-java-applets-run-on-android.html](http://www.technipages.com/can-java-applets-run-on-android.html)

这是一篇关于某人将 Java Applet 移植到 Android 的有趣文章：[在没有以前的 Android 经验的情况下将 Java Applet 移植到 Android 的冒险](http://www.codeproject.com/Articles/269318/An-Adventure-in-Porting-a-Java-Applet-to-Android-w)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T13:00:52.967

> Java不是独立于平台的..

Java SE 旨在供台式机和笔记本电脑使用，并与 Java EE 一起用于服务器。

Applet 不能（甚至）在用于手机的运行时 - Java ME 中工作。桌面应用程序中有 GUI 元素。&*在小屏幕上无法使用的小程序。* 即使它们是，许多对话框和其他元素也不具有本地电话等效物的“外观和感觉”（即使使用 PLAF）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T20:41:51.047

它不会运行，因为用于运行小程序的 api 未在 android jvm 上编写。google 和 oracle 之间存在或正在发生一场涉及 Java(tm) 的法律纠纷，我认为这是该 api 既没有被第三方也没有被谷歌实现的主要原因。

# ios5 - 如何知道ios应用程序的总下载量。？

> ID：11224597
> 
> 赞同：6
> 
> 时间：2012-06-27T10:53:53.153
> 
> 标签：ios5, download, app-store, itunes-store

如何知道 ios 应用程序的总下载量。? 在我的开发人员帐户下的销售和趋势中，它仅每周或每天显示。在哪里可以看到总下载量？ ![在此处输入图像描述](../Images/fd858ec91c7fe27d5ced4e8ed93f8958.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:54:43.230

ItunesConnect 并没有真正的简单方法来做到这一点。

在销售和趋势部分，您只能访问 15 天的每日细分数据或 3 个月的每周细分数据，并且不显示总数

在“财务报告”部分，您可以访问所有历史数据，但也找不到总计。

最好的做法是： - 每天（或每周）手动导出您的销售报告并将所有数据分组到电子表格中 - 使用 App Annie (http://www.appannie.com) 等自动执行此操作的服务为你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T14:27:18.167

我认为 Eric Genet 是正确的，但Apple 刚刚更新了[https://itunesconnect.apple.com](https://itunesconnect.apple.com)网站，您可以调整屏幕中间的日期范围（使用滑块）或在导航到销售和趋势后调整左上角的日期屏幕以查看您的下载量。

![在此处输入图像描述](../Images/32ef360b2c5e25f07f2acc64cf3cc64f.png)

# javascript - 使用Javascript抑制/检测Android中的旋转

> ID：11224600
> 
> 赞同：1
> 
> 时间：2012-06-27T10:53:57.107
> 
> 标签：javascript, android, browser, orientation

我正在尝试围绕修改后的 VNC 查看器小程序（VNC = 远程显示协议）实现一个包装器，以提供增强的用户体验（使用 javascript），但在处理旋转时遇到了问题。

小程序的宽度/高度是固定的 (1) - 所以当用户旋转设备时，小程序会覆盖屏幕或调整大小：

```
+------------+   +-------+         +-------+
|............|   |.......|...      |.......|
|.         X.|   |.      | X. or   |.    x.|
|.          .| > |.      |  .      |.......|
|............|   |.......|...      |       |
+------------+   |       |         |       |
                 |       |         |       |
                 +-------+  :(     +-------+ :( 
```

但我想要....

```
+------------+   +-------+
|............|   |.......|
|.         X.|   |.     .|
|.          .| > |.     .|
|............|   |.     .|
+------------+   |.    X.|
                 |.......|
                 +-------+  :) 
```

虽然我可以从javascript[中屏幕尺寸的变化中检测](https://stackoverflow.com/questions/1649086/detect-rotation-of-android-phone-in-the-browser-with-javascript)*到自动旋转*，并且，如果它是用 Java 编写的，我可以[抑制自动旋转](https://stackoverflow.com/questions/6119606/how-to-set-android-show-vertical-orientation)，但这些都没有达到我想要的结果：具体来说，

*   旋转设备时显示器的方向不会改变
*   我的 javascript 会检测到该设备已被旋转并重新定位小程序的*内容*（通过发送 OOB 消息以在 vncserver 上运行 xrandr）。

我并不完全反对将旋转检测实现为暴露给javascript的单独小程序/通过webview实现页面，但不希望这样做。

是否可以在 html 应用程序清单文件中锁定方向？

锁定方向时是否可以使用javascript检测旋转？

还有其他方法可以解决这个问题吗？

1 - 这是底层协议的限制，我已经在对 Java 小程序进行更改，我也不想重写服务器！

**更新**

我知道大多数版本的 VNC（包括 noVNC）都存在 xrandr 问题。

如果有人能告诉我如何抑制浏览器页面的自动重新定向（不使用带有 web 视图的小程序），这至少给了我部分答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:36:16.847

我不完全确定我是否可能在这里遗漏了您的观点，但是您可以通过在清单中添加以下行来防止设备在旋转时重新布局或键盘滑出：

```
android:configChanges="keyboardHidden|orientation" 
```

然后，如果我理解正确，您可以让您的 javascript 在更改发生后简单地旋转小程序中的文本。

这将提供将窗口保持在您上面指示的方向和大小的所需效果，由您自己来纠正文本方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:30:52.273

看看这个，好像已经有人解决了这个问题：[https ://stackoverflow.com/a/2307936/375929](https://stackoverflow.com/a/2307936/375929)

UPD Afaik，您无法从 javascript 中强制执行方向，但您可以检测旋转并在您的 web 应用程序中对互补旋转做出反应——因此您的 web 应用程序的方向对用户来说保持不变。

# c# - 获取 ninject 工厂扩展以允许将工厂参数传递给依赖项

> ID：11224606
> 
> 赞同：5
> 
> 时间：2012-06-27T10:54:14.437
> 
> 标签：c#, ninject, ninject-2, ninject-extensions

使用 Ninject Factory 扩展，您可以自动生成工厂，并让工厂将参数传递给类的构造函数。以下测试通过：

```
public interface IBar
{
    int Foo { get; }
}

public class Bar : IBar
{
    int _foo;
    public Bar(int foo) { _foo = foo; }
    public int Foo { get { return _foo; } }
}

public interface IBarFactory
{
    IBar CreateTest(int foo);
}

[Test]
public void ExecuteTest()
{
    var kernel = new StandardKernel();
    kernel.Bind<IBar>().To<Bar>();
    kernel.Bind<IBarFactory>().ToFactory();
    var factory = kernel.Get<IBarFactory>();
    var actual = factory.CreateTest(42);
    Assert.That(actual, Is.InstanceOf<Bar>());
} 
```

但是，在我的特定问题中，我希望它将工厂参数传递给我正在构建的类的依赖项，而不是类本身，如下所示：

```
public interface IBarContainer
{
    IBar Bar { get; }
}

public class BarContainer : IBarContainer
{
    IBar _bar;
    public BarContainer(IBar bar) { _bar = bar; }
    public IBar Bar { get { return _bar; } }
}

public interface ITestContainerFactory
{
    IBarContainer CreateTestContainer(int foo);
}

[Test]
public void ExecuteTestContainer()
{
    var kernel = new StandardKernel();
    kernel.Bind<IBar>().To<Bar>();
    kernel.Bind<IBarContainer>().To<BarContainer>();
    kernel.Bind<ITestContainerFactory>().ToFactory();
    var factory = kernel.Get<ITestContainerFactory>();
    var actual = factory.CreateTestContainer(42);
    Assert.That(actual.Bar, Is.InstanceOf<Bar>());
} 
```

此测试失败并显示以下消息：

> Ninject.ActivationException : Error activation int 没有匹配的绑定可用，并且类型不是自绑定的。激活路径：
> 3) 将依赖 int 注入 Bar 类型的构造函数的参数 foo
> 2) 将依赖 IBar 注入 BarContainer 类型的构造函数的参数 bar
> 1) 请求 IBarContainer

有没有办法让工厂弄清楚我想在解决“Bar”依赖项时使用传递的“foo”参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:58:56.763

Hy，默认实例提供程序不使用继承的构造函数参数。您可以通过编写自己的实例提供程序来更改此行为，如下所示：

```
public class CustomInstanceProvider : StandardInstanceProvider {
    protected override ConstructorArgument[] 
        GetConstructorArguments(MethodInfo methodInfo, object[] arguments) 
        {
            var parameters = methodInfo.GetParameters();
            var constructorArguments = 
                new ConstructorArgument[parameters.Length];
            for (int i = 0; i < parameters.Length; i++)
            {
                constructorArguments[i] = 
                    new ConstructorArgument
                        (parameters[i].Name, arguments[i], true);
            }
            return constructorArguments;
        }
} 
```

然后你只需要指示 ninject 使用你自己的而不是提供的。

希望有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-14T08:43:10.680

从 Ninject.Extensions.Factory 的 3.2.0 版本开始，本机支持，使用：

```
Ninject.Extensions.Factory.TypeMatchingArgumentInheritanceInstanceProvider 
```

你可以像这样使用它：

```
kernel.Bind<IxxxFactory>()
   .ToFactory(() => new TypeMatchingArgumentInheritanceInstanceProvider()); 
```

如果您查看[源代码](https://github.com/ninject/Ninject.Extensions.Factory/blob/master/src/Ninject.Extensions.Factory/Factory/TypeMatchingArgumentInheritanceInstanceProvider.cs)，它是基于[先前的答案](https://stackoverflow.com/a/11235383/921090)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:09:32.883

如果我正确理解您的问题，我相信这篇 Ninject Wiki 文章有一个很好的示例（[工厂接口](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface)），说明如何使用新的 .ToFactory() 绑定扩展，以及如何让这些生成的工厂甚至创建构造函数的对象有参数。

# java - android防止url加载

> ID：11224607
> 
> 赞同：0
> 
> 时间：2012-06-27T10:54:19.223
> 
> 标签：java, android, eclipse

我想阻止将 url 加载到 webview 上。我正在使用 shouldOverrideUrlLoading 和 onPageFinished 事件，但是一旦 url 开始加载，两者都会被触发。哪个事件以及如何防止加载？谢谢你。

按下按钮时，执行 goBack 操作，但如果 url = "fakeRequest" 则必须阻止

```
btngoBack.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View arg0){     
      webviewA.goBack(); 
   }});

webviewA.setWebViewClient(new WebViewClient(){
   @Override
   public void onPageFinished(WebView view, String url){
    if (url.contentEquals("fakeRequest"))
    {
     return;
    }else{...} 
```

# c# - 如何连接 C# 和 PostgreSQL

> ID：11224608
> 
> 赞同：1
> 
> 时间：2012-06-27T10:54:24.107
> 
> 标签：c#, postgresql

我有 2 个表格，第一个有用户名、密码框和登录按钮。当我单击登录按钮时，它将比较 PostgresSQL 中的用户名密码。但我对这条线有错误

> NpgsqlDataReader dr = cmd.ExecuteReader(); [错误：42P01：关系“登录”不存在]

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        bool blnfound = false;
        NpgsqlConnection conn = new NpgsqlConnection("Server=127.0.0.1;Port=5432;User Id=postgres;Password=admin123;Database=Login");
        conn.Open();
        NpgsqlCommand cmd = new NpgsqlCommand("SELECT * FROM login WHERE name='" + tb1.Text + "' and password = '" + tb2.Text + "'",conn);
        NpgsqlDataReader dr = cmd.ExecuteReader();

        if (dr.Read())
        {
            blnfound = true;
            Form2 f5 = new Form2();
            f5.Show();
            this.Hide();
        }

        if (blnfound == false)
        {
            MessageBox.Show("Name or password is incorrect", "Message Box", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1);
            dr.Close();
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:58:28.547

如果表名登录正确，请检查您的数据库。顺便说一句，您需要过滤输入值，因为您的代码容易受到 SQL 注入攻击。

您还应该尝试更改表或数据库名称，它们都称为登录名，这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:59:45.490

```
Server=127.0.0.1;Port=5432;User Id=postgres;Password=admin123;**Database=Login** 
```

登录是数据库名称

```
"SELECT * FROM **login** WHERE name='" + tb1.Text + "' and password = '" + tb2.Text + "'",conn 
```

登录是表名

如果正确，则检查表**login**是否存在于数据库**LOGIN**中。

```
ERROR: 42P01: relation "login" does not exist 
```

**关系** 意味着**表**

此外，您不能在 Postgres 中使用以大写字母开头的表名。如果您的表名以大写字母开头，则需要将其括在双引号中。

# c# - 如何清除水晶报表缓存？

> ID：11224610
> 
> 赞同：0
> 
> 时间：2012-06-27T10:54:34.383
> 
> 标签：c#, crystal-reports

我使用了 Crystal Reports，在其中我使用拖放向导显示了数据。现在，当我想显示组合框选择更改的报告时，当下拉列表中只有一项时，它会显示正确的结果。但是当下拉列表中有多个项目时，它会向我显示显示重复条目的报告。我想我需要清除选择更改的选择。我没有使用任何数据集或数据表。

如何清除报告？

我试过了

```
pay.SetParameterValue("Bill", txtBill.Text);
crystalReportViewer1.ReportSource = pay;
this.crystalReportViewer1.ParameterFieldInfo.Clear();
crystalReportViewer1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:50:10.360

尝试这个

```
ReportDocument.Close()

crystalReportViewer1.ReportSource = null;

crystalReportViewer1.Refresh(); 
```

# php - php - 从 phpquery 对象获取 xpath

> ID：11224612
> 
> 赞同：0
> 
> 时间：2012-06-27T10:54:36.023
> 
> 标签：php, dom, xpath

我正在使用[PHPquery](http://code.google.com/p/phpquery/)来解析 HTML 文件，例如我有这个文件

```
<div id="header" class="clearit" role="banner">
        <div id="headerWrapper">
            <ul id="primaryNav" role="navigation">
                <li id="musicNav" class="navItem">
                    <a href="/music" class="nav-link">Music</a>
                </li>
                <li id="listenNav" class="navItem">
                    <a href="/listen" class="nav-link">Radio</a>
                </li>
                <li id="eventsNav" class="navItem">
                    <a href="/events" class="nav-link">Events</a>
                </li>
                <li id="chartsNav" class="navItem">
                    <a href="/charts" class="nav-link">Charts</a>
                </li>
                <li id="communityNav" class="navItem">
                    <a href="/community" class="nav-link">Community</a>
                </li>
                <li id="originalsNav" class="navItem">
                    <a href="http://originals.last.fm" class="nav-link">Originals</a>
                </li>
            </ul>
      </div>
</div> 
```

查询：

```
$link=pq(".nav-link")->eq(0);
$xpath=$link->xpath; 
```

现在 xpath 是一个[DOMXpath](http://www.php.net/manual/en/class.domxpath.php)对象，我想获取该对象的 Xpath，例如：

```
$result="//html//body//div//div//ul//li[0]//a[0]"; 
```

如果这在 PHPquery 中不可能，我如何在 PHP 中获得它？

# html - 网站不适合浏览器窗口

> ID：11224615
> 
> 赞同：0
> 
> 时间：2012-06-27T10:54:50.007
> 
> 标签：html, css

我的网站需要大量的屏幕空间才能发挥作用。可以正常工作的最小宽度约为 1200 像素。问题是，当它在分辨率较低的屏幕（iPhone 或旧电脑）上打开时，页面无法完全融入屏幕并在左侧被剪切。

有谁知道我可以做什么而不是可以滚动？

我为整个页面使用 CSS 层

```
#page {
position:absolute;
left:50%;
width:1200px;
margin-left:-600px; 
} 
```

然后在这一层里面我有实际的内容：

```
#content {
width:1200px;
text-align: left;
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
font-weight: normal;
color: #aaaaaa;
clear:both; 
margin-top:40px;
} 
```

我知道原因可能是 margin-left: -600px 设置但是我如何确保整个内容块居中？还是我只需要将它与左侧对齐？

任何帮助将不胜感激！

PS - 该网站在[http://texttexture.com](http://textexture.com)上，这是我使用的 CSS：http: [//texttexture.com/templates/styles.css](http://textexture.com/templates/styles.css)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T10:56:59.330

试试这个：

```
#page {
    width: 1200px;
    margin: 0 auto;
}

#content {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #aaaaaa;
    clear:both; 
    margin-top:40px;
} 
```

绝对定位伴随着复杂性，通常仅在实际需要时才使用。

此外，似乎没有理由分开`#page`和`#content`div。尝试删除`#page`和梳理它们：

```
#content {
    width: 1200px;
    margin: 0 auto;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #aaaaaa;
    clear:both; 
    margin-top:40px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T11:03:24.130

如果您确实希望分辨率较小的用户能够使用您的网站，那么您应该让它以较低的分辨率工作。有一些技术可以做到这一点。您链接到的网站看起来非常简单，因此更改某些样式应该不会太棘手。

您可能想查看响应式网页设计并在 CSS 中使用媒体查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:58:42.993

You can also work with % like this.

```
#page {
    width: 100%;
    margin: 0 auto;
}

#content {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #aaaaaa;
    clear:both; 
    margin-top:40px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-02T12:11:12.150

“网站不适合您的窗口大小”-此问题的主要原因是在您的 css 文件中使用了 min-width 或 max-width 属性，检查并尝试删除任何不需要的 min、max-width 或 height 属性

# logic - 动态条件逻辑函数

> ID：11224617
> 
> 赞同：3
> 
> 时间：2012-06-27T10:54:54.073
> 
> 标签：logic

我需要编写一个可以在运行时使用 if 语句的函数（例如，用户输入或来自数据文件）。理想情况下，它应该能够解决不比以下复杂的表达式：

```
a && ( b || !c || ( d && e ) ) 
```

我想我需要的是一个递归函数（一个调用自己的函数）。当然，该函数需要返回*true*或*false*。

由于上述示例的复杂性，该函数不仅需要遍历各个条件，还需要了解运算符，知道评估它们的顺序，并优先考虑它们的速度（例如，在示例中，*如果*为*假*，则无需评估语句的其余部分）。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:40:38.627

一种解决方案是使用分流码算法将表达式转换为 RPN，然后将其评估为 RPN（因为 RPN 比中缀更容易评估）。第一部分，转换为 RPN（伪代码）：

```
while (tokens left) {
  t = read_token();
  if (t is number) {
    output(t);
  } else if (t is unary operator) {
    push(t);
  } else if (t is binary operator) {
    r = pop();
    if (r is operator and precedence(t)<=precedence(r)) {
       output(r);
    } else {
       push(r);
    }
    push(t);
  } else if (t is left parenthesis) {
    push(t);
  } else if (r is right parenthesis) {
    while ((r = pop()) is not left parenthesis) {
        output(r);
        if (stack is empty) {
          mismatched parenthesis!
        }
    }
    if (top() is unary operator) {
        output(pop());
    }
  }
}
while (stack is not empty) {
  if (top() is parenthesis) {
     mismatched parenthesis!
  }
  output(pop());
} 
```

*   `read_token`从输入队列中读取一个令牌
*   `output`将值插入输出队列
*   `push`将一个值推入堆栈（您只需要一个）
*   `pop`从堆栈中弹出一个值
*   `top`在不弹出的情况下查看堆栈顶部的值

RPN 评估更简单：

```
while (tokens left) {
  t = read_token();
  if (t is number) {
    push(t);
  } else if (t is unary operator) {
    push(eval(t, pop()));
  } else if (t is binary operator) {
    val1 = pop();
    val2 = pop();
    push(eval(t, val1, val2));
  }
}
result = pop(); 
```

*   `read_token()`从上一步生成的 RPN 队列中读取值
*   `eval(t, val)``t`用操作数计算一元运算符`val`
*   `eval(t, val1, val2)``t`使用操作数计算二元运算符`val1`和`val2`
*   `result`是表达式的最终值

如果您的所有运算符都是左关联的并且没有使用任何函数，那么这个简化的算法应该可以工作。请注意，不需要递归，因为我们使用自己的堆栈实现。有关示例和更多信息，请参阅[调车场上的](http://rosettacode.org/wiki/Parsing/Shunting-yard_algorithm)罗塞塔代码和[RPN 上的罗塞塔代码](http://rosettacode.org/wiki/Parsing/RPN_calculator_algorithm)

# sql-server - 无法将跟踪数据保存到表 - Profiler 停止并显示此消息

> ID：11224622
> 
> 赞同：0
> 
> 时间：2012-06-27T10:55:04.343
> 
> 标签：sql-server, sql-server-2005, sql-server-profiler

我正在尝试运行探查器并让它登录到数据库。探查器开始运行，然后在几个小时后（是的几个小时，我知道它很糟糕！！）探查器停止并显示消息。

```
Failed to save trace data to table 
```

当我查看日志时，我只能找到：

```
SQL Trace stopped. Trace ID = '2'. Login Name = 'sa'. 
```

没有其他错误消息。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:10:13.150

如果您已定义分组，则在尝试保存到表时将收到该错误。在“跟踪属性”对话框中，转到“事件选择”->“组织列”（按钮）并将所有内容从“组”部分移至“列”部分。单击确定，运行，然后享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T19:58:51.097

如果在此期间网络连接失败，您可能会收到“无法**保存**跟踪数据”或“无法**读取**跟踪数据”错误消息。

# awk - 使用 awk 或 sed 解析字符串

> ID：11224624
> 
> 赞同：1
> 
> 时间：2012-06-27T10:55:15.963
> 
> 标签：awk

我的文件内容如下：

```
20 name:abc addr:203.45.247.247/255.255.255.255 WDW-THRESH:12 BW-OUT:10000000bps BW-IN:15000000bps STATSDEVICE:test247 STATS:Enabled (4447794/0) <IN OUT>
25 name:xyz160 addr:203.45.233.160/255.255.255.224 STATSDEVICE:test160 STATS:Enabled priority:pass-thru (1223803328/0) <IN OUT>
37 name:testgrp2 <B> WDW-THRESH:8 BW-BOTH:192000bps STATSDEVICE:econetgrp2 STATS:Enabled (0/0) <Group> START:NNNNNNN-255-0 STOP:NNNNNNN-255-0
62 name:blahblahl54 addr:203.45.225.54/255.255.255.255 WDW-THRESH:5 BWLINK:cbb256 BW-BOTH:256000bps STATSDEVICE:hellol54 STATS:Enabled (346918/77) <IN OUT> 
```

使用以下 awk 脚本：

```
awk -F"[: ]" '{out=$1; for(i=2;i<=NF;i++)if($i~/bps/){sub("bps","",$i);out=out" "$i} print out;out=""}' input.txt 
```

我得到了这个输出：

```
20 10000000 15000000
25
37 192000
62 256000 
```

但我希望这个输出：

```
20  15000000 10000000
25
37 192000
62 256000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:02:11.103

反转循环

```
awk -F"[: ]" '{out=$1; for(i=NF;i >1;i--)if($i~/bps/){sub("bps","",$i);out=out" "$i} print out;out=""}' file.txt 
```

无需在循环中检查 $0 和 $1。$0 是整行并且 $1 已经包含在输出中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:29:09.650

也许“BW-IN”和“BW-OUT”并不总是以相同的顺序出现。

```
awk -F"[: ]" '
    {
        out = $1;
        for (i = 2; i <= NF; i++) {
            if ($i ~ /bps/) {
                sub("bps", "", $i);
                if (! flag) {
                    out = out " " $i save
                } else {
                    flag = 0
                    save = " " $i
                }
            }
            if ($i == "BW-OUT") {
                flag = 1
            }
        }
        print out;
        out = save = ""
    }
' input.txt 
```

# php - 通过 Google/Gmail 而不是从我的服务器发送电子邮件的优势与劣势

> ID：11224634
> 
> 赞同：5
> 
> 时间：2012-06-27T10:55:48.707
> 
> 标签：php, email, gmail, google-apps, swiftmailer

我在堆栈上阅读了很多关于想要更改其邮件类（即 swiftmailer）以使用他们的 Google Apps 服务器/电子邮件地址通过 SMTP 发送电子邮件的人的问题。

我能看到的唯一真正的好处是副本被放置在 Gmail 的已发送文件夹中。我目前克服了这个问题（没有 SMTP），只需从我的服务器密件抄送一封电子邮件以保留所有发送出去的内容的副本（即 mail@whatever.com）。

通过 Gmail 的 SMTP 服务器发送是否有助于处理垃圾邮件或烦人的“Google 认为这不是由该服务器发送的”？还有什么我忽略的吗？

谢谢大家。

（是的，我的域是由 Google Apps 托管的电子邮件/日历/等... MX 记录已全部设置并正常运行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:05:40.980

电子邮件受到主要电子邮件提供商的各种反垃圾邮件审查。通过 Google 发送它们，您可能可以使用 Google 已经完成的工作。

看到这篇文章： http: [//www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)

您也可以考虑使用[PostageApp 之](http://postageapp.com/)类的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T06:11:17.410

优点：

1.  带有您的域名的电子邮件 ID，例如 yourname@yourdomain.com。
2.  如果您有自己的服务器，则使用您的域名的无限电子邮件 ID。

坏处：

1.  开发或购买电子邮件网关以获得更好的用户界面和服务。

# mysql - 复杂选择查询

> ID：11224638
> 
> 赞同：0
> 
> 时间：2012-06-27T10:56:01.953
> 
> 标签：mysql, database

我想像 fb 新闻提要那样实现，我已经做了以下事情，但我不知道应该用什么查询来检索那种数据

我有这些桌子

**TABLE : posts** 此表用于存储用户状态 post_id 是 AI，主用户名是用户的用户 ID 共享是可见性控制，如果它是公开的，它可以共享给所有人，或者如果它与用户列表共享，则共享字段包含该列表的 share_id .

```
+--------------+---------------+
| col_name     | col_type      |
+--------------|---------------+
| post_id      | INT(11)       |
+--------------|---------------+
| username     |  VARCHAR(50)  |
+--------------|---------------+
| share        |  VARCHAR(50)  |
+--------------|---------------+
| content      |  TEXT         |
+--------------|---------------+ 
```

**TABLE : share** 此表存储用户 share_id 为 AI 的列表，主 share_name 为共享列表的名称。

```
+--------------+---------------+
| col_name     | col_type      |
+--------------|---------------+
| share_id     | INT(11)       |
+--------------|---------------+
| username     |  VARCHAR(50)  |
+--------------|---------------+
| share_name   |  VARCHAR(50)  |
+--------------|---------------+ 
```

**TABLE : share_member** 该表是`share`存储共享成员列表的子表。

```
+--------------+---------------+
| col_name     | col_type      |
+--------------|---------------+
| smid         | INT(11)       |
+--------------|---------------+
| share_id     |  IMT(11)      |
+--------------|---------------+
| username     |  VARCHAR(50)  |
+--------------|---------------+ 
```

我想获取所有允许我看到的用户的数据。包括公开。

**编辑：**

我在表格帖子中又添加了一列

然后尝试了这个查询

```
SELECT p.*, CASE p.share_type when 'public' then "1" when 'list' then if((select count(*) FROM share_member WHERE username='pratik' AND share_id=share)>="1") then "1" END AS allowed FROM posts p 
```

# ios - 为什么我应该在 main 中为串行队列创建上下文，而在 start 中为并发队列创建上下文？

> ID：11224643
> 
> 赞同：0
> 
> 时间：2012-06-27T10:56:08.613
> 
> 标签：ios, core-data, concurrency, documentation, nsoperation

[核心数据编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)中有关于*线程限制模式*的 主题，它说

> 您必须在将要使用的线程上创建托管上下文。如果您使用 NSOperation，请注意它的 init 方法是在与调用者相同的线程上调用的。因此，您不能在队列的 init 方法中为队列创建托管对象上下文，否则它与调用者的线程相关联。**相反，您应该在 main（对于串行队列）或 start（对于并发队列）中创建上下文**。

我就是不明白这是*为什么*？区别在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:11:40.000

它说明了为什么在您引用的文档中非常清楚。操作`init`方法在调用者线程上运行，而`main`方法中发生的工作*可能*在另一个线程上运行。

由于您不能在线程之间共享托管对象上下文，因此您需要在将要使用它的同一线程上创建它。因此，如果您在操作中使用它，您需要确保在操作运行所在的同一线程上创建上下文。

串行操作在 main 中创建上下文的原因是它们运行默认实现，而您在实现并发操作时`start`覆盖。`start`

[您可以在并发编程指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html)中阅读有关并发操作如何工作的更多信息（提示：搜索“开始”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:23:29.213

**大卫**是对的。

文档说，例如，如果您`NSOperation`调用了一个子类`MyOperation`并且您覆盖了`init`如下方法

```
- (id)init
{
   if(self = [super init]) {

        // your context here       
   }

   return self;
} 
```

然后，如果您在主线程中实例化该操作，例如

```
MyOperation* op = // alloc-init 
```

您创建的上下文与主线程相关联，而**不是**与操作所在的线程相关联。

当您对托管对象执行更改（删除、更新等）时，可能会发生奇怪的事情，因为您是在后台更改它们，但您访问的是主线程中的上下文。

`main`而是覆盖并在那里创建上下文：

```
- (void)main
{
    // your context here
} 
```

# forms - ExtJS：表单元素失去焦点样式

> ID：11224644
> 
> 赞同：0
> 
> 时间：2012-06-27T10:56:15.217
> 
> 标签：forms, button, focus, extjs3, onfocus

我遇到的一个问题是表单元素上没有任何焦点框（虚线边框）：文本字段，按钮 - 当它们被聚焦时。这种情况在 IE9、Chrome 中重现，但在 FF 中没有（FF 以通常的方式显示焦点元素）。

所以，我们得到 TAB 键动作正常，但是没有焦点框，这让用户感到困惑。

另外我应该注意到我使用 ExtJS 3.3.1 API。

有人对问题有什么建议吗？先感谢您！

# xslt - 处理属性并根据字符串拆分它们

> ID：11224659
> 
> 赞同：1
> 
> 时间：2012-06-27T10:57:15.663
> 
> 标签：xslt

我需要获取“a”标签的属性并处理它们。

来源：

```
<Data>
    <AAA>
    <strong xmlns="http://www.w3.org/1999/xhtml">some Text
     <a href="#" name="Value1,Value2,Value3,Value4,Value5,Value6" id="Functionaldata" xmlns="http://www.w3.org/1999/xhtml">Value6</a>
    </strong>
    hello
    <a title="google" href="http://google.com" xmlns="http://www.w3.org/1999/xhtml">Hey</a> all <a href="#" name="element1,element2,element3,element4,element5,element6" id="Functionaldata" xmlns="http://www.w3.org/1999/xhtml">element6</a>
    <AAA>
</Data> 
```

输出

```
<Content>
  <Information>
    <text>
        <strong xmlns="http://www.w3.org/1999/xhtml">some Text
        <dynamicinfo type="Value1" name="Value2" group="Value3" id="Value4" link="Value5" display="Value6"/>
    </strong>
    hello<a title="google" href="http://google.com">Hey</a> all 
    <dynamicinfo type="element1" name="element2" group="element3" id="element4" link="element5" display="element6"/>
    </text>
  </Information>
 </Content> 
```

我对使用 id=Functionaldata 处理“a”标签感到震惊。

任何人都可以帮助他们对它的看法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:25:05.120

**这种转变**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:x="http://www.w3.org/1999/xhtml"
     xmlns:my="my:my">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <my:names>
      <n>type</n>
      <n>name</n>
      <n>group</n>
      <n>id</n>
      <n>link</n>
      <n>display</n>
     </my:names>

     <xsl:variable name="vNames" select="document('')/*/my:names/*"/>

         <xsl:template match="node()|@*">
             <xsl:copy>
               <xsl:apply-templates select="node()|@*"/>
             </xsl:copy>
         </xsl:template>

         <xsl:template match="a[@name] | x:a[@name]">
          <xsl:copy>
           <xsl:apply-templates select="@*[not(name()='name')]"/>
           <xsl:apply-templates select="@name"/>
          </xsl:copy>
         </xsl:template>

     <xsl:template match="a/@name | x:a/@name" name="split">
      <xsl:param name="pText" select="."/>
      <xsl:param name="pOrd" select="1"/>

      <xsl:if test="$pText">
        <xsl:attribute name="{$vNames[position()=$pOrd]}">
          <xsl:value-of select=
            "substring-before(concat($pText, ','), ',')"/>
        </xsl:attribute>

        <xsl:call-template name="split">
          <xsl:with-param name="pText" select="substring-after($pText, ',')"/>
          <xsl:with-param name="pOrd" select="$pOrd+1"/>
        </xsl:call-template>
      </xsl:if>
     </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Data>
        <AAA>
        <strong xmlns="http://www.w3.org/1999/xhtml">some Text
         <a href="#" name="Value1,Value2,Value3,Value4,Value5,Value6" id="Functionaldata">Value6</a>
        </strong>
        hello
        <a title="google" href="http://google.com">Hey</a> all
        <a href="#" name="element1,element2,element3,element4,element5,element6" id="Functionaldata">element6</a>
        </AAA>
</Data> 
```

**产生想要的正确结果：**

```
<Data>
   <AAA>
      <strong xmlns="http://www.w3.org/1999/xhtml">some Text
         <a href="#" id="Value4" type="Value1" name="Value2" group="Value3" link="Value5" display="Value6"/>
      </strong>
        hello
        <a title="google" href="http://google.com">Hey</a> all
        <a href="#" id="element4" type="element1" name="element2" group="element3" link="element5" display="element6"/>
   </AAA>
</Data> 
```

**说明**：

这建立在您之前问题的解决方案的基础上，并进行了以下更改：

1.  身份规则的使用和覆盖。

2.  不是元素，而是创建具有拆分结果作为值的属性。

3.  要生成的属性的名称被指定为全局元素的子`my:names`元素。

**更新**：

在评论中，OP 修改了他的问题，说：

> 我忘了为“a”标签添加名称空间。所有的“a”标签都有“xhtml”命名空间。

答案是，在这种情况下，提供的转换仍然可以正常工作，不需要对其进行任何更改。

但是，它*可以*通过以下方式简化：

**替换**：

```
<xsl:template match="a[@name] | x:a[@name]"> 
```

**只需**：

```
<xsl:template match="x:a[@name]"> 
```

**并替换**：

```
<xsl:template match="a/@name | x:a/@name" name="split"> 
```

**只需**：

```
<xsl:template match="x:a/@name" name="split"> 
```

**这些变化后的完整转变变成：**

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:x="http://www.w3.org/1999/xhtml"
     xmlns:my="my:my">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <my:names>
      <n>type</n>
      <n>name</n>
      <n>group</n>
      <n>id</n>
      <n>link</n>
      <n>display</n>
     </my:names>

     <xsl:variable name="vNames" select="document('')/*/my:names/*"/>

         <xsl:template match="node()|@*">
             <xsl:copy>
               <xsl:apply-templates select="node()|@*"/>
             </xsl:copy>
         </xsl:template>

         <xsl:template match="x:a[@name]">
          <xsl:copy>
           <xsl:apply-templates select="@*[not(name()='name')]"/>
           <xsl:apply-templates select="@name"/>
          </xsl:copy>
         </xsl:template>

     <xsl:template match="x:a/@name" name="split">
      <xsl:param name="pText" select="."/>
      <xsl:param name="pOrd" select="1"/>

      <xsl:if test="$pText">
        <xsl:attribute name="{$vNames[position()=$pOrd]}">
          <xsl:value-of select=
            "substring-before(concat($pText, ','), ',')"/>
        </xsl:attribute>

        <xsl:call-template name="split">
          <xsl:with-param name="pText" select="substring-after($pText, ',')"/>
          <xsl:with-param name="pOrd" select="$pOrd+1"/>
        </xsl:call-template>
      </xsl:if>
     </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:39:32.797

如果您有权访问 EXSLT，则可以使用该`str:split()`方法来实现此目的。

更大的问题是，您如何将值映射到您赋予它们的新属性名称？我想出了这个，它预先声明了值名称，然后将值名称 1 映射到拆分值 1，值名称 2 映射到拆分值 2，等等。

```
<!-- node-set of value names, which will each correspond to the value at the same index, once they're split -->
<xsl:variable name='value_names' select='str:split("type|name|group|id|link|display", "|")' />

<!-- match root -->
<xsl:template match="/">
    <dynamicdata>
        <xsl:apply-templates name='values' select='str:split(root/a/@name, ",")' />
    </dynamicdata>
</xsl:template>

<!-- iteration content - each value from the split -->
<xsl:template match='token'>
    <xsl:variable name='pos' select='position()' />
    <xsl:attribute name='{$value_names[$pos]}'><xsl:value-of select='.' /></xsl:attribute>
</xsl:template> 
```

您可以在[此 XMLPlayground 会话](http://www.xmlplayground.com/yfDT0d)中看到这一点（请参阅输出源）。

# jquery - 自定义 jQuery 文件上传的 maxNumberOfFiles

> ID：11224660
> 
> 赞同：0
> 
> 时间：2012-06-27T10:57:25.373
> 
> 标签：jquery, file-upload, multifile-uploader

我想允许用户在某些页面上只上传 1 个文件，而在其他页面上只上传 1 个以上的文件。有地方可以改这个号码

```
var parentWidget = ($.blueimpFP || $.blueimp).fileupload;
$.widget('blueimpUI.fileupload', parentWidget, {
    options: {
        // By default, files added to the widget are uploaded as soon
        // as the user clicks on the start buttons. To enable automatic
        // uploads, set the following option to true:
        autoUpload: false,
        // The following option limits the number of files that are
        // allowed to be uploaded using this widget:
        maxNumberOfFiles: undefined, 
```

但是如果我在这里更改它，它将应用于网站上的所有 jQuery Upload File 控件。如何自定义选项 maxNumberOfFiles 以实现我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:11:01.147

你不能只为每个页面定义选项中的值吗？

第 1 页

```
{ maxNumberOfFiles: 5} 
```

第2页

```
{ maxNumberOfFiles: 1} 
```

或者将它包装在它自己的函数中，将你想要的文件数量作为参数传递？

编辑：好的 - 自从我发布这个问题以来，你已经稍微改变了这个问题，但同样的事情也适用

# javascript - 进入站点时的悬停状态

> ID：11224665
> 
> 赞同：1
> 
> 时间：2012-06-27T10:57:41.113
> 
> 标签：javascript, jquery, css, hover, state

我在图像上悬停时遇到问题。

进入站点时，悬停状态处于活动状态，但直到鼠标悬停事件才应该处于活动状态。将鼠标移到图像上时，悬停效果消失并正常运行。

这是代码片段：http: [//jsfiddle.net/JwztH/](http://jsfiddle.net/JwztH/)

我希望我的问题是可以理解的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:01:46.897

只需 `display: none;`在 css 中设置您不想在开始时可见的项目（例如`ol li div.cykel a.cykel-hover`）。

演示：http: [//jsfiddle.net/dystroy/txYc4/](http://jsfiddle.net/dystroy/txYc4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:02:18.920

尝试使用`<a href="#" class="cykel-hover" style="opacity: 0;">`这对我有用。

[http://jsfiddle.net/mavrick3/JwztH/3/](http://jsfiddle.net/mavrick3/JwztH/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:03:33.823

添加 -`$('.cykel-hover').hide();`

小提琴 - [http://jsfiddle.net/JwztH/5/](http://jsfiddle.net/JwztH/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:04:33.417

此外，您有

```
filter: alpha(opacity=0); 
```

设置，`a.cykel-hover`但它只能在 IE 中工作。对于其他浏览器，添加`opacity: 0`（可能还有带有供应商特定前缀的版本）；[http://jsfiddle.net/JwztH/6/](http://jsfiddle.net/JwztH/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T11:10:14.650

你可以把`$(this).find(settings.target).stop().fadeTo(settings.duration, 0);`适用于所有可褪色的

演示：http: [//jsfiddle.net/v937A/](http://jsfiddle.net/v937A/)

# c# - 如何让规范流为新步骤创建模板？

> ID：11224669
> 
> 赞同：2
> 
> 时间：2012-06-27T10:57:52.853
> 
> 标签：c#, visual-studio-2010, specflow

当我选择一个步骤并点击“转到步骤定义”对话框时，会出现“未找到匹配的步骤绑定”。

是否可以在找不到该步骤定义时自动创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:40:26.083

如果您使用的是最新的 SpecFlow Visual Studio 集成，那么对话框中消息的第二部分会显示：“您要将步骤绑定框架复制到剪贴板吗？”。

如果您按“是”，则步骤定义的代码骨架将复制到剪贴板，您可以将其粘贴到您的步骤定义文件中。

或者，SpecFlow 还输出执行场景时缺少步骤的步骤定义代码骨架： -> 未找到该步骤的匹配步骤定义。使用以下代码创建一个： ...（（步骤定义的代码框架））...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:21:29.513

**SpecFlow 1.9 现在支持这一点。**如果您已安装 SpecFlow Visual Studio 扩展，您可以在功能文件中右键单击并选择“生成步骤定义”。它将询问您要创建哪些步骤，以及将它们放置在什么文件中。

有关详细信息，请参阅[v1.9 中的新增功能](http://www.specflow.org/specflownew/WhatsNew19.html)页面。

# iphone - 从 SuperView 中删除视图后显示特定的 TabBarItem

> ID：11224674
> 
> 赞同：0
> 
> 时间：2012-06-27T10:58:12.073
> 
> 标签：iphone, ios5, uitabbarcontroller

HomeViewController - View 有 2 个图像按钮，分别称为“新”和“旧”。这是我在 TabBarController 启动之前显示的起始视图。

当点击“新建”时，我转到 TabBarItem 1。好的，没问题。**当点击“旧”时，我想转到 TabBarItem 4。* *但它仍然转到 TabBarItem 1。

这就是我的代码的样子：

在 HomeViewController 中，我有以下方法：

```
- (void) oldButtonPressed:(id)sender{
TabBarAppDelegate *allRootValues = [[UIApplication sharedApplication] delegate];
allRootValues.seeExistingClients = @"Y";
NSLog(@"old button pressed: see old clients: %@", allRootValues.seeExistingClients);

[self.view removeFromSuperview];
[self.tabBarController  setSelectedIndex:4];
} 
```

应用委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:       (NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    HomeViewController *homeVC = [[HomeViewController  alloc]initWithNibName:@"HomeViewController" bundle:nil];  
    [self.window addSubview:homeVC.view];
    [self.window makeKeyAndVisible];

    seeExistingClients = @"N"; //Assigning to 'N' initially

    return YES;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:28:12.993

请检查以下场景，

```
 check the selected index which you are setting for selectedIndex:. The index for the controllers will be assigned from zero. 
```

我认为这可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:32:10.337

不要从 中删除 self.view `HomeViewController`，我不确定您的视图结构，但我认为这`HomeViewController`是您的一部分`TabBarController`

所以只需执行以下操作

```
//[self.view removeFromSuperview];
[self.tabBarController  setSelectedIndex:3]; //3 size index starts from zero and you need the 4th controller 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T12:13:02.780

你可以按如下方式创建标签栏控制器对象，

```
 UITabBarController *tabBarController = [[UITabBarController alloc] init]; 
```

创建UITabBarController的对象后，创建所有视图控制器的引用。示例代码如下，

```
FirstViewController *fisrtCont = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
SecondViewController *secondCont = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil]; 
```

创建实例后，将所有对象添加到数组中。

```
NSArray *array = [[NSArray alloc] initWithObjects:fisrtCont, secondCont, nil];
tabBarController.viewControllers = array;

AppDelegate *delegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
[delegate.window setRootViewController:controller];

[tabBarController setSelectedIndex:3]; 
```

请检查一下，您是否遵循所有步骤？我在上面的代码中遵循了这一点。

# ruby-on-rails - 活动记录 find_by where 集合中的属性？

> ID：11224676
> 
> 赞同：1
> 
> 时间：2012-06-27T10:58:19.093
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

抱歉，如果这是一个新手问题，搜索 google 和 SO 没有任何结果，我可能没有使用正确的术语，但是这里......

如果我有一个带有名称的用户模型，并且我想找到一个“约翰”，我知道我可以做到

```
User.find_by_name 'john'. 
```

伟大的。

但是假设我有一个我想要检索的名称列表。我可以为列表中的每个名称做一个 find_by - 导致多个 sql 查询。或者我可以做 User.all 并根据我的列表过滤内存中的结果。

两者似乎都非常昂贵且可扩展性不强，在原始 sql 中我可以只写：

```
select * from users where name in ('john', 'peter', 'susan', ... ); 
```

并在一个查询中获取全部内容。

我错过了一个技巧还是主动记录也可以做到这一点？如果不是，那么从 rails 3 应用程序中推荐的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:59:45.570

试试这个

```
names = ['John', 'Mary']
users = User.where(name: names) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:53:49.510

`User.find_all_by_name(names)`也有效，尽管它现在可能被认为是老派。

# json - 具有嵌套对象的对象的完整 JSON 渲染

> ID：11224678
> 
> 赞同：4
> 
> 时间：2012-06-27T10:58:21.963
> 
> 标签：json, mongodb, grails

我有一个带有 mongodb 插件的 grails 应用程序。

我所有的域对象都是：

```
class Person {
  ObjectId id
  String name
} 
```

和

```
class Like {
  ObjectId id
  Person from
  Person to
  Date createdAt
} 
```

我的控制器应该根据一些`Like`id 提供完整的数据：

```
class MyController {
  def like() {
    def like = Like.findById(new ObjectId("someIdHere"));
    render(like as grails.converters.JSON)
  }
} 
```

我希望收到一个完整的 JSON 对象，例如：

```
{
  "class":"Like",
  "id":{
    "class":"org.bson.types.ObjectId",
    "inc":1483542456,
    "machine":805594765,
    "new":false,
    "time":1340363115000,
    "timeSecond":1340363115
  },
  "createdAt":"2012-06-22T11:05:15Z",
  "from":{
    "class":"Person",
    "id":{ ... },
    "name":"Some name here"
  },
  "to":{
    "class":"Person",
    "id":{ ... },
    "name":"Some name here"
  }
} 
```

但我收到了对象的一级属性：

```
{
  "class":"Like",
  "id":{
    "class":"org.bson.types.ObjectId",
    "inc":1483542456,
    "machine":805594765,
    "new":false,
    "time":1340363115000,
    "timeSecond":1340363115
  },
  "createdAt":"2012-06-22T11:05:15Z",
  "from":{
    "class":"Person",
    "id":"4fd31d453004dc0f010aca51"
  },
  "to":{
    "class":"Person",
    "id":"4fd31d463004dc0f010aca89"
  }
} 
```

我的问题是：有什么方法可以构造 mongo db（DBObject）数据对象的完整（带有引用对象）JSON？我[用 JSONBuiled 找到了这个解决方案，其中](https://stackoverflow.com/a/5543915)包含转义字段 'class'、metaClass' 和 'dbo'。但我认为它可以用 Expando 类来完成，但我找不到正确的方法......

无论如何，谢谢，马克西姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:10:08.360

改变

```
render(like as grails.converters.JSON) 
```

至

```
render(like as grails.converters.deep.JSON) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:13:34.610

如果这对您来说仍然是个问题，您可能想尝试另一个 JSON 库，例如[Jackson](http://jackson.codehaus.org/)，它比 Grails JSON 库可以更好地控制将对象序列化为 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T03:04:20.327

我相信标准方法是现在使用命名配置，所以你想要

```
JSON.use("deep") {
    render like as JSON
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T05:14:09.207

将子关联设置为非惰性。所以

```
 class Like {
  ObjectId id
  Person from
  Person to
  Date createdAt

 static mapping = {
        from lazy: false
    }

} 
```

# c - 在 NEON 中实现非统一地址跳转

> ID：11224679
> 
> 赞同：0
> 
> 时间：2012-06-27T10:58:25.183
> 
> 标签：c, arm, neon

我需要在 Neon 中实现以下循环。

```
int jump=4,c[8],i;  //c[8] may be declared here
int *src,sum=0; //**EDIT:** src points to a 256 element array

for (i = 0; i < 4; i++)
{
  sum  = src[ i + 0 * jump] * c[0];//1
  sum += src[ i + 1 * jump] * c[1];//2
  sum += src[ i + 2 * jump] * c[2];//3
  sum += src[ i + 3 * jump] * c[3];//4
  sum += src[ i + 4 * jump] * c[4];//5
  sum += src[ i + 5 * jump] * c[5];//6
  sum += src[ i + 6 * jump] * c[6];//7
  sum += src[ i + 7 * jump] * c[7];//8

  src += 2;                       //9
}

**EDIT:**
 The code can be shortened as-

int jump=4,c[8],i,j; //initialize array c
int *src,sum,a[256];//initialize array a
src=a;
for (i = 0; i < 4; i++)
{
        sum=0;
        for (j = 0; j < 8; j++)
        {
                  int *p=src+ i + (j * jump);  
                  sum  += (*p)* c[j];    //sum  += src[ i + j* jump] * c[j]
        }
        printf("Sum:%d\n",sum);
        src += 2;                       
}

Just need to know a way to implement something like [%0]=[%0]+4 rather than [%0]! 
```

**主要优化**将通过使用 NEON 中的**VMLA**指令并行运行编号为 1-8 的指令来实现。

1.  我们可以通过将数组 c[8] 加载到寄存器 q0 和 q1 并将数组 src[256] 加载到寄存器 q2 和 q3 来做到这一点。之后，我们使用 VMLA、VADD、VPADD 来获得变量 sum 中的结果。
2.  **面临**的问题是**如何加载数组 src 的元素**（如 src[0]、src[4]、src[8] 等），因为我知道如何加载数组的唯一方法是通过 [%1] ！它只按顺序加载一个数组（如 src[0]、src[1]、src[2] 等）。

另外，如何在指令 9**中将指针 src 增加 2 ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:45:07.693

不要一个接一个地计算总和，而是同时计算它们。然后你不需要跳过源值，因为每个源值（大概）都会影响一些总和。基本上，您所做的是计算（* 表示点积）。

```
sum0 = source * (c0 0 0  0 c1 0  0  0 c2 0  0  0 ... c7  0 0  0 )
sum1 = source * ( 0 0 0 c0  0 0  0 c1  0 0  0 c2 ...  0  0 0 c7 )
sum2 = source * ( 0 0 0  0  0 0 c0  0  0 0 c1  0 ...  0  0 c6 0 )
sum3 = source * ( 0 0 0  0  0 0  0  0  0 c0 0  0 ...  0 c5  0 0 ) 
```

你可以这样做

```
sum0 = sum1 = sum2 = sum3 = 0

sum0 += (s0 s1 s2 s3) * (c0  0  0  0)
sum1 += (s0 s1 s2 s3) * ( 0  0  0 c0)
sum2 += (s0 s1 s2 s3) * ( 0  0  0  0)
sum3 += (s0 s1 s2 s3) * ( 0  0  0  0)

sum0 += (s0 s1 s2 s3) * (c1  0  0  0)
sum1 += (s0 s1 s2 s3) * ( 0  0  0 c1)
sum2 += (s0 s1 s2 s3) * ( 0  0 c0  0)
sum3 += (s0 s1 s2 s3) * ( 0  0  0  0)

...

sum0 += (s0 s1 s2 s3) * (c7  0  0  0)
sum1 += (s0 s1 s2 s3) * ( 0  0  0 c7)
sum2 += (s0 s1 s2 s3) * ( 0  0 c6  0)
sum3 += (s0 s1 s2 s3) * ( 0 c5  0  0) 
```

您实际上不需要在各个步骤中进行水平求和，您可以使用 vmul.32 （或者它可能是累积形式，如果有的话）来计算点积，然后在最后对它们进行水平求和。您只需要找到一种计算系数向量的方法，但由于它们都只有一个非零元素，您可以简单地使用 vset_lane。

或者，更好的是，您可以利用每个系数向量仅包含一个非零条目的事实，并执行一个 multipyl 而不是四个，然后使用 vdup_lane 提取每个通道并将其添加到总和中。您需要生成系数向量

```
(c0  0  0  0)
(c1  0 c0 c1)
(c2 c0 c1 c2)
...
(c7 c5 c6 c7) 
```

如果您的系数已经连续存储，这应该很容易 - 您只需要修复第一个元素。

# java - Java：将字符串转换为 org.eclipse.uml2.uml.Type

> ID：11224683
> 
> 赞同：1
> 
> 时间：2012-06-27T10:58:39.937
> 
> 标签：java, uml, eclipse-emf-ecore

是否可以将 String 转换为由 org.eclipse.uml2.uml.Type 定义的类型？我们需要这些信息来生成一个带有 emf 和 ecore 的 uml 文件，但是我们只获得一个 String 形式的类型信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:15:07.100

正如您在评论中所写，您的问题是没有为合格的方法名称获取 UML 类型 - 您显然想要创建与您的 KDM 对应的 UML！

您可以手动将 KDM 转换为 UML 模型，在合适的编辑器中绘制类图，或者以编程方式进行。在那里，您将从一个（空）UML 模型开始，并添加（创建）您需要的所有（UML）类（例如，通过[`Package.createOwnedClass(name, isAbstract) : Class`](http://help.eclipse.org/indigo/topic/org.eclipse.uml2.doc/references/javadoc/org/eclipse/uml2/uml/Package.html#createOwnedClass%28java.lang.String,%20boolean%29).

通过查看类层次结构，您可以看到[a`Class`也是 a`Type`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.uml2.doc%2Freferences%2Fjavadoc%2Forg%2Feclipse%2Fuml2%2Fuml%2FClass.html)。您知道模型的根（包），知道将类放在哪里（可能在子包中），因此您知道使用[`Package.getOwnedType(name) : Type`](http://help.eclipse.org/indigo/topic/org.eclipse.uml2.doc/references/javadoc/org/eclipse/uml2/uml/Package.html#getOwnedType%28java.lang.String%29).

# iis-7 - IIS 7.0 和 IIS 7.5 Express URL 路由问题

> ID：11224685
> 
> 赞同：2
> 
> 时间：2012-06-27T10:58:46.567
> 
> 标签：iis-7, url-rewriting, iis-7.5, url-routing, webforms

更新：

我更改了问题标题并尝试使环境清楚地解释我的问题！

重要提示：衷心感谢您的帮助！

Pic1：Remote IIS 7.0：可以看到代码和网站结构！ ![Remote IIS 7.0：可以看到代码和网站结构！](../Images/4a2f949e24054cca27d4f7571b2187de.png) Pic2：远程 IIS 7.0：您可以看到 Url 重定向无法运行！ ![远程 IIS 7.0：您可以看到 Url 重定向无法运行！](../Images/29deba7cbff57205d5467fc2755825eb.png) Pic3：本地IIS 7.5 Express：我将所有代码复制到我的VS2010并在图片上显示文件夹信息！ ![本地 IIS 7.5 Express：我将所有代码复制到我的 VS2010 并在图片上显示文件夹信息！](../Images/f4504db07f992fa6e838d109fae31d1f.png) Pic4：本地 IIS 7.5 Express：当我点击播放按钮时，它运行完美！？怎么了？ ![本地 IIS 7.5 Express：当我单击播放按钮时，它运行完美！？ 怎么了？](../Images/5577bae43289e072149cc6c4b5eed7b6.png)

全尺寸图片下载：[图片下载](https://sites.google.com/site/slashtsai/home/IIS.zip?attredirects=0&d=1)

全尺寸图片下载（2、新帖）：[图片下载](https://sites.google.com/site/slashtsai/home/IIS2.zip?attredirects=0&d=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:12:56.600

IIS 中的虚拟目录根是什么？如果它是 BBB（而不是根），则 AAA 下的请求将不会到达您的应用程序以进行路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:55:03.787

1.确保您的网站在集成模式下运行，最好使用 Asp.Net 4 应用程序池（不是经典应用程序池）。

2.确保您在web.config中配置了路由或像这样修改它

```
<system.webServer> 
    <modules runAllManagedModulesForAllRequests="true"> 
        <remove name="UrlRoutingModule"/> 
        <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
    </modules> 
    <handlers> 
        <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web,Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/> 
    </handlers> 
</system.webServer> 
```

3.确保您已经安装了HTTP重定向功能

> 控制面板 > 程序和功能 > 打开或关闭 Windows 功能 > IIS > 万维网服务 > 通用 HTTP 功能 > HTTP 重定向

4.确保您的网站根目录中有Global.asax文件（IIS7远程服务器，不在Visual Studio中），否则将不会执行。还要将 Global.asax 文件中的逻辑保留为纯文本，不要依赖已编译的 dll 版本 App_global.asax.dll。

> **注意：**如果您可以添加一个断点，例如可以确保 global.asax 代码在远程服务器上执行，一些方法可以做到这一点

5.尝试使用其真实位置（如 127.0.0.1/test.aspx）访问该页面，以查看您的网站是否正常运行（在 IIS7 远程服务器上）。

6.如果您使用 127.0.0.1/test.aspx 这样的物理位置访问页面，那么您的路由配置应该如下所示

```
routes.MapPageRoute(
    "test-route-sample",
    "home/test-route",
    "~/test.aspx"
) 
```

您可以使用此 url 访问此页面及其新的路由位置

> 127.0.0.1/home/test-route

# sql-server - 返回多个最低值行

> ID：11224687
> 
> 赞同：1
> 
> 时间：2012-06-27T10:58:51.750
> 
> 标签：sql-server

我有一个返回数据列表的选择查询，我需要返回所有具有最低公共级别的行。

```
SELECT code, level
FROM table
ORDER BY level 
```

例如

```
code | level
-----+------
A01  |  3
B56  |  3
J33  |  4
J35  |  4
K56  |  4 
```

我想返回所有具有最低级别值的结果，所以在这种情况下它将是

```
A01  |  3
B56  |  3 
```

我尝试过使用`MIN(level)`，但这只会返回第一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:02:14.350

```
SELECT TOP 1 WITH TIES code, level
FROM table
ORDER BY level 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:01:46.267

```
SELECT * 
FROM   mytable 
WHERE  level IN (SELECT Min(level) 
                 FROM   mytable)
order by level 
```

# android - 自定义字体错误

> ID：11224688
> 
> 赞同：1
> 
> 时间：2012-06-27T10:58:56.460
> 
> 标签：android

我想更改应用字体，但不能：

AndroidManifest.xml

```
...
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@style/CustomTheme"
        >
... 
```

样式.xml

```
....

    <style name="CustomTheme">
        <item name="android:typeface">stheiti.ttf</item>
    </style>
.... 
```

但我收到一个错误：

> 错误：错误：不允许使用字符串类型（在 'android:typeface' 处，值为 'stheiti.ttf'）。

但我有一个rootAPP/assets/stheiti.ttf

我不明白为什么会出现该错误，我在许多站点中搜索了解决方案，但找不到任何具有相同问题的解决方案

提前致谢！:=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:03:17.177

您可以在**文本视图中设置****自定义字体**，例如

 **```
TextView txt = (TextView) findViewById(R.id.custom_font);
Typeface font = Typeface.createFromAsset(getAssets(), "stheiti.ttf");
txt.setTypeface(font); 
```

如果您想在整个应用程序中实现自定义字体，那么您可以**创建自定义视图**并在该视图的初始化时设置您的字体。

```
public class MyTextView extends TextView {

public MyTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public MyTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public MyTextView(Context context) {
    super(context);
    init();
}

public void init() {

    Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "stheiti.ttf");
    setTypeface(tf ,1);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:05:18.203

你不能这样做，你必须以编程方式为每个视图设置自定义字体（即使你不能通过 XML 设置自定义字体，是的，你可以设置但只能设置内置字体）

检查这个：[在 Android 中向主题添加自定义字体和在 Android 中](https://stackoverflow.com/questions/8787690/adding-custom-font-to-theme-in-android)使用[自定义字体](https://stackoverflow.com/questions/2973270/using-a-custom-typeface-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:05:34.143

为此使用下面的代码，它可能会对您有所帮助。

```
// Font path
String fontPath = "fonts/trbuc.ttf";

// text view label
TextView txtGhost = (TextView) findViewById(R.id.mTxtViewCustomFont);

// Loading Font Face
Typeface tf = Typeface.createFromAsset(mContext.getAssets(), fontPath);

// Applying font
txtGhost.setTypeface(tf); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:33:31.507

对于整个应用程序，您需要制作自定义 TextView，您可以如下所示为 xml 的每个 textview 进行操作，然后转到第一个 make 文件夹，在该字体文件夹中的资产中命名**字体**添加您的字体 stheiti.ttf

```
import android.content.Context;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.TextView;

 public class MyTextView extends TextView{

 public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();

    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();

    }

    public MyTextView(Context context) {
        super(context);
        init();

    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/stheiti.ttf");
            setTypeface(tf);
        }
    }

 } 
```

之后，对于 xml 中的每个 textview，你想要这种类型的字体，而不是你在 xml 中的 textview 应该像这样添加你需要的 textview 的其他属性，与普通 textview 相同

```
<YourProjectPackageName.MyTextView
    android:id="@+id/textview1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="22px"
    android:textColor="#34A4c5"
 ></YourProjectPackageName> 
```

并在您的活动中使用如下所示的custome textview

```
MyTextView textview=(MyTextView)findViewById(R.id.textview); 
```**

# php - 找不到 xcart 页面

> ID：11224695
> 
> 赞同：1
> 
> 时间：2012-06-27T10:59:37.280
> 
> 标签：php, smarty, x-cart

在我们的应用程序中，我们找到如下页面

domainname.com/store_page.php

在根文件夹中，我们可以看到 store_page.php 文件。

在该页面内，它正在从其他位置加载该页面

$smarty->assign('main','store_page');

我们无法追踪此“store_page”的来源。我们想要编辑该商店页面中的元标题和其他值。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T04:49:37.890

好吧，这是不久前的事了，但我正在尝试回答这里的 x-cart 问题。

您的信息存储在“皮肤”目录中的模板文件中。在这种情况下，根据您的 x-cart 版本，您需要找到 smarty 模板文件（可能是 store_page.tpl）。这些文件都是 .tpl，您可以在其中找到 html 和 smarty 标签。

当您的 store_page.php 文件有类似 $smarty->assign('main', 'store_page') 的行时，所做的只是在 PHP 中分配一个变量供 smarty 使用。在这种情况下，变量 $main 将在模板中可用，并将包含“store_page”的值。

我希望这对可能有类似问题的人有所帮助。

# c# - 在 MVC 中出现错误：“Morvel.DLL 中发生了 'System.StackOverflowException' 类型的未处理异常”

> ID：11224699
> 
> 赞同：0
> 
> 时间：2012-06-27T10:59:59.207
> 
> 标签：c#, asp.net-mvc, stack-overflow

我在 ASP.NET 3.5 中使用 MVC 架构。在编辑中，我收到上述错误。

1）我使用了存储过程：

```
ALTER PROCEDURE [dbo].[editparty]

    (
    @pcode nvarchar(50),

    @cname nvarchar(100),

    @cont  nvarchar(50)
    )
AS

update tbl_party set party_name=@cname,party_code = @pcode,party_contact =@cont where party_id=(Select party_id  from tbl_party where party_code = @pcode) 
```

2）这是我在 DAL 类文件中的函数：

```
public DataSet editp(BOParty pcode, BOParty PName, BOParty Tel)
        {
            OpenCnn();
            SqlCommand cmd = new SqlCommand("editparty", cnn);
            cmd.CommandType = CommandType.StoredProcedure;
            SqlParameter[] par = { new SqlParameter("@pcode", pcode.pcode), };
            cmd.Parameters.AddRange(par);
            SqlParameter[] nm = { new SqlParameter("@PName", pcode.pcode), };
            cmd.Parameters.AddRange(nm);
            SqlParameter[] tl = { new SqlParameter("@Tel", pcode.pcode), };
            cmd.Parameters.AddRange(tl);
            SqlDataAdapter ad = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            ad.Fill(ds);
            return ds;
            CloseCnn();

        } 
```

3）这个在BAL类文件中

```
 public DataSet editp(BOParty pcode, BOParty PName, BOParty Tel)
    {
        DataSet ds = new DataSet();
        ds = new DataSet();
        ds = editp(pcode, PName, Tel);
        return ds;
    } 
```

4) 这是在 .cs 文件中：

```
 protected void edit_Click(object sender, EventArgs e)
    {

        pcode.pcode = txtpcde.Text;
        pcode.Tel= txtcont.Text;
        pcode.PName = txtcname.Text;

        DataSet ds = new DataSet();
        ds = new DataSet();
        ds = pcode.editp(pcode, PName, Tel);

        edit.Enabled = false;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:10:08.987

`editp`在突出显示的行中查看您的函数：

```
public DataSet editp(BOParty pcode, BOParty PName, BOParty Tel)
{
    DataSet ds = new DataSet();
    ds = new DataSet();
    ds = editp(pcode, PName, Tel); // <--- HERE
    return ds;
} 
```

你`editp`递归调用然后它会导致`StackOverflowException`. 我想你想`editp`在 DAL 类中调用方法，但是你`editp`一次又一次地调用相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:22:13.800

3）这个在BAL类文件中

```
 public DataSet editp(BOParty pcode, BOParty PName, BOParty Tel)
    {
        DataSet ds = new DataSet();
        ds = new DataSet();
        ds = party.editp(pcode, PName, Tel);<------ party is object of DAL class file( private     DAParty partydata;)--------------

        return ds;
    } 
```

# mysql - 将系统日期和时间插入到各自字段中的 mysql 表中

> ID：11224707
> 
> 赞同：-1
> 
> 时间：2012-06-27T11:00:58.053
> 
> 标签：mysql

我对 php 并不陌生，但面临一个非常基本的问题，但不知道如何克服它。我有一个评论表，其中的字段是名称、电子邮件、评论、日期和时间。现在我想做的是在各自的字段中插入系统日期和时间，但它只输入时间而不是日期。字段日期的类型是日期，时间的类型是时间。这是我的查询

```
 $insert = 'insert into tbl_comment 
      (name, email, desc, date, time)
      VALUES 
 ("'.$_POST['name'].'","'.$_POST['email'].'","'.$_POST['comment'].'"
 ,CURDATE(),"CURTIME()",CURTIME())';   
      mysql_query($insert);
 } 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:11:22.677

**您的代码容易受到 SQL 注入的攻击。[立即解决此问题！](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)**

```
//Function to sanitize values received from the form. Prevents SQL injection
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

$myName = clean($_POST['name']);
$myEmail = clean($_POST['email']);
$myDesc = clean($_POST['comment']);
$insert = "insert into tbl_comment 
           (name, email, desc, `date`, `time`)
           VALUES 
           ('$myName','$myEmail','$myDesc',CURDATE(),CURTIME())";   
mysql_query($insert); 
```

如果您有**数据和时间**作为字段名称，请使用反引号，因为它们是保留关键字。

另请阅读，***[如何在 PHP/MySQL 中插入数据](http://www.w3schools.com/php/php_mysql_insert.asp)***

# c# - 何时访问 ListView EmptyItemTemplate 和 ItemTemplate 中的静态按钮？

> ID：11224711
> 
> 赞同：1
> 
> 时间：2012-06-27T11:01:07.737
> 
> 标签：c#, asp.net, listview

我的 Listview 的 ItemTemplate 和 EmptyDatatTemplate 都有一个按钮，我想根据用于填充 listview 的数据动态更改 PostBackURL。我知道我可以使用类似于

```
tbEditAbout = (TextBox)lvCharacters.Items[e.ItemIndex].FindControl("tbEditAbout"); 
```

访问按钮，但我不知道要调用什么 On 方法，以便每次通过完全加载或 AJAX 回发加载页面时，我都可以更新按钮的 PostBackURL 值的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:54:11.407

```
OnItemDataBound event

protected void Expenses_ItemDataBound(object sender, ListViewItemEventArgs e)
{

    if (e.Item.ItemType == ListViewItemType.DataItem)
    {

       TextBox tbEditAbout = (TextBox)e.Item.FindControl("tbEditAbout");
    }
} 
```

# c# - SQL Server 的 C# 日期格式

> ID：11224713
> 
> 赞同：1
> 
> 时间：2012-06-27T11:01:16.970
> 
> 标签：c#, sql-server

我在 SQL 中将日期存储为 DateTime，当在文本框中显示它们时，我这样做：

```
txtDateLogged.Text = v.DateLogged.ToString("dd-MM-yyyy"); 
```

但是，当我更新该文本框以写回 SQL 时，我在使用这个时得到了无效的 DateTime 错误：

```
if (DateLogged!= "")
{ 
     uInput.DateLogged = Convert.ToDateTime(DateLogged);
} 
```

我假设我在格式中遗漏了一些东西 - 日期值被传递到公共 void 作为字符串进行更新，然后在上面的行中转换。有什么建议么？

谢谢

吨

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T11:04:55.477

您需要以与您转换*为*文本的格式相同的格式转换*回来，例如*

 *```
uInput = DateTime.ParseExact(text, "dd-MM-yyyy", CultureInfo.InvariantCulture); 
```

有关更多详细信息，请参阅文档[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)。

当然，如果您*可以避免*转换为字符串表示形式——或者也保留它`DateTime`——那就更好了。

如果您正在解析*用户输入*，则应该使用它[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)来解决无效数据的可能性，而无需使用异常进行流控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:04:53.817

也许使用：

```
 uInput.DateLogged = (new DateTime(year, month, day)) 
```

并从 DateLogged 中提取年/月/日部分。

**编辑：**

既然您知道字符串中的日期是“dd-MM-yyyy”，那么这就是您提取部分的方式：

```
int year = Convert.ToInt16(DateLogged.Substring(6, 4));
int month = Convert.ToInt16(DateLogged.Substring(3, 2));
int day = Convert.ToInt16(DateLogged.Substring(0, 2)); 
```

如果 MM 的意思是“JA” - 那么您需要将“JA”转换为“01”或 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:15:44.430

您还可以使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/9h21f14e.aspx)和解析字符串值`CultureInfo`。
*用户*将能够使用特定于文化的格式输入数据，并且您可以将其转换为[`InvariantCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)：

```
 DateTime b;
 bool isCorrectValue = false;
 CultureInfo uiCulture = Thread.CurrentThread.CurrentUICulture;
 if (DateTime.TryParse(DateLogged, uiCulture, DateTimeStyles.None, out b))
     isCorrectValue = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T12:06:48.063

在 SQL 中以**105**格式转换日期

例如

> 选择转换（varchar（20），getdate（），**105**）*

# tabs - dojo1.7 标签显示为普通 div

> ID：11224714
> 
> 赞同：0
> 
> 时间：2012-06-27T11:01:17.337
> 
> 标签：tabs, dojo

我正在尝试在现有应用程序中使用 dojo 实现选项卡控件。这是我所做的一些事情：

```
<head> 
.....
<script type="text/javascript" src="js/dojo/dojo/dojo.js')}"></script>
<script type="text/javascript">
dojo.require("dijit.layout.TabContainer");
dojo.require("dijit.layout.ContentPane");
</script>
....
</head>
<body>
....
<div data-dojo-type="dijit.layout.TabContainer" style="width: 400px; height: 100px;" tabStrip="true">
    <div data-dojo-type="dijit.layout.ContentPane" title="title1" selected="true">
 ...content...
</div>
<div data-dojo-type="dijit.layout.ContentPane" title="title2">
...content...
</div>
</div>
....
</body> 
```

js 正确加载（萤火虫显示没有错误）。

当我浏览到该页面时，我看到所有内容 div 都被绘制，就好像根本没有进行任何格式化，它们只是普通的 div。

我的第一个猜测是我打算包含一个 css 文件。我发现的所有示例都链接到一个非常复杂的 css 文件，该文件做了很多不适合我的应用程序的东西。我找不到任何关于应该包含的 css 的解释，所以我怀疑这个猜测是错误的。

谁能指出我的错误，或者指出一个简洁和最新示例的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:59:25.547

小部件是否已创建？在浏览器的控制台中运行`dijit.registry`将显示已创建的小部件。

如果尚未创建，则需要配置 dojo 以解析 html。

```
<script type="text/javascript" src="dojo/dojo.js"
  data-dojo-config="parseOnLoad: true"></script> 
```

Dojo 使用主题为小部件提供外观和感觉。为此，您应该添加以下 css：

```
<link type="text/css" rel="stylesheet" href="dijit/themes/dijit.css" />
<link type="text/css" rel="stylesheet" href="dijit/themes/claro/claro.css" /> 
```

并将 claro 类添加到 body 节点：

```
<body class="claro"/> 
```

# jquery - 滚动到表单内按钮提交上的页面部分

> ID：11224716
> 
> 赞同：0
> 
> 时间：2012-06-27T11:01:38.207
> 
> 标签：jquery

我正在一个表单提交返回搜索值的网站上工作。我想要做的是将 scrollTo （向下）提交到结果部分。适用于表单外的按钮，但不适用于表单内的按钮。

示例：这将起作用

```
 $(function (){
    $("#fb-advanced-submit").click(function (){
            $('html, body').animate({
                scrollTop: $("#fb-results").offset().top
                 }, 1300);
    });
});

<button id="fb-advanced-submit">Submit</button> 
```

但这不是

```
<form action="" method="Get">
<input type="submit" id="#fb-advanced-submit" value="Search" class="small button" />

   <div id="div2" style="height: 1000px; width 100px">test</div>
  <br/>
  <div id="fb-results" style="height: 1000px; width 100px">test 2</div>
</form> 
```

**[jsfiddle](http://jsfiddle.net/8dd6k/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:04:27.240

您需要停止提交操作

```
 $(function (){
        $("#notworking,#fb-advanced-submit").click(function (){
                $('html, body').animate({
                    scrollTop: $("#fb-results").offset().top
                     }, 1300);
            return false;
        });
    });​ 
```

# java - JPA：如何在 JTA EntityManager 中使用事务？

> ID：11224723
> 
> 赞同：1
> 
> 时间：2012-06-27T11:01:47.630
> 
> 标签：java, transactions, jpa-2.0, entitymanager, jta

首先，[这个](https://stackoverflow.com/questions/5049763/how-to-start-transaction-in-jta-entitymanager)解决方案对我来说是没有选择的，因为我无法更改持久性单元。

我的问题是我使用了 JTA EntityManager，但我只需要一个用例，比如事务：

```
public boolean saveWithResult(PointsValidityPeriod pointsValidityPeriod)
{
    //TODO use transaction here 
    super.save(pointsValidityPeriod);

    if (updatePrevious(pointsValidityPeriod.getValidFrom()) != 1)
    {
        logger.error("Update of Period was not possible, because UPDATE returned no single result.");

        return false;
    }

    pointsValidityPeriodEvent.fire(pointsValidityPeriod);

    return true;
} 
```

**保存方法（我无法更改）：**

```
public void save(T entity)
{
    getEntityManager().persist(entity);
} 
```

你看，有一个保存调用，但是如果更新出错，这个保存必须回滚，那么我该如何实现呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:44:20.170

这一切都取决于您的方法事务注释。如果您没有，则默认情况下事务边界设置为业务方法，如 JB 所指出的那样。

因此，整个方法是一笔交易。通常，`save`方法的事务管理很重要（如果是`REQUIRED`或则不同`REQUIRES_NEW`），但在这种情况下，您正在进行本地方法调用——而不是业务方法调用，因此方法的任何事务管理设置`save`都不适用这里。

因此，如果`update`失败，您可以基于自动事务回滚（如果它是一个 EntityManager 调用，它会生成回滚 Tx 的异常），或者您可以手动注入`SessionContext`和调用`setRollbackOnly()`它，两行之间的内容：

```
@Resource
SessionContext ctx;

public boolean saveWithResult(PointsValidityPeriod pointsValidityPeriod)
{
   // ...
    if (updatePrevious(pointsValidityPeriod.getValidFrom()) != 1)
    {
        // ...
        ctx.setRollbackOnly();
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:14:05.487

我有解决方案，但我不知道为什么会这样。也许有人可以向我解释。在我的支持 bean 中有 save 方法。有2个实体。getEntity() 是支持 bean 使用的当前实体，currentValidityPeriod 是该实体的另一个实例，它保存实体的最新数据库状态，由 currentValidityPeriod = pointsValidityService.findCurrent(); 获取 findCurrent() 只是一个执行 TypedQuery 的方法：

```
public PointsValidityPeriod findCurrent()
{
    TypedQuery<PointsValidityPeriod> validityPeriodQuery = entityManager.createNamedQuery(PointsValidityPeriod.FindCurrent, PointsValidityPeriod.class);

    return validityPeriodQuery.getSingleResult();
} 
```

这是视图调用的保存方法。如您所见，我只将当前实体传递给服务保存方法。在之前的Entity（currentValidityPeriod）中，我设置了另一个值。

```
@Override
public void save()
{       
    Date validFrom = new DateTime(DateTimeZone.forID("Europe/Vienna")).toDate();
    getEntity().setValidFrom(validFrom);

    currentValidityPeriod.setValidThru(validFrom);

    pointsValidityService.save(getEntity());

    addSavedSuccessfullyMessage();
} 
```

这是将被调用的服务方法：

```
@Override
public void save(PointsValidityPeriod pointsValidityPeriod)
{
    super.save(pointsValidityPeriod);
} 
```

...和超类的保存方法：

```
public void save(T entity)
{
    getEntityManager().persist(entity);
} 
```

为什么实体管理器会持久化新实体**并​​更新旧实体？**我只是将一个实体传递**给**实体管理器。尽管这是预期的行为，但我想知道为什么会这样。

# jquery - jquery 在单选按钮上被选中

> ID：11224744
> 
> 赞同：2
> 
> 时间：2012-06-27T11:02:59.217
> 
> 标签：jquery, if-statement, radio-button, checked

所以，我有 3 个单选按钮：

```
<input type="radio" name="status" value="enabled" class="radio" <?php if($news_row['status']==1) echo 'checked'; ?> />
<input type="radio" name="status" value="disabled" class="radio" <?php if($news_row['status']==2) echo 'checked'; ?> />
<input type="radio" name="status" value="timer" class="radio" <?php if($news_row['status']==3) echo 'checked'; ?> /> 
```

我正在尝试检查是否像这样检查了带有值计时器的单选按钮

```
if($('.radio [value=timer]').is(':checked')) {
    console.log('timer');
} 
```

但显然我做错了什么，因为上面的代码不起作用。那么，哪种方法是正确的呢？使用`.change()`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:06:12.997

**演示** [http://jsfiddle.net/m4m57/5/](http://jsfiddle.net/m4m57/5/)

问题是`space`这里`f ($('.radio [value=timer]').is(':checked')) {`

```
 ^----------- 
```

希望这可以帮助，

**代码**

```
$('input').on('change', function() {
    if ($('.radio[value=timer]').is(':checked')) {
        alert('say what');
        console.log('timer');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:04:27.473

删除**空间**：

```
if($('.radio[value=timer]').is(':checked')) {
    console.log('timer');
} 
```

你有空间，`.radio [value=timer]`这意味着一个不同的选择器，例如它意味着`select all elements with value attribute set inside an element with class radio at any nested level`

删除空间意味着`select all elements with class radio AND value attribute set`

# java - 使用 Maven 捆绑非开源依赖项

> ID：11224745
> 
> 赞同：6
> 
> 时间：2012-06-27T11:03:02.977
> 
> 标签：java, eclipse, maven, open-source, dependencies

假设我在 Maven / Eclipse 中有两个 Java 项目：

*   托管在 GitHub 中的开源应用程序
*   一个包含实用功能的小型私有库，它*不是*开源的（但我确实有权以编译的形式修改、构建和重新分发，例如作为 .jar 文件）

我想让其他人能够构建、修改和运行应用程序（如果他们愿意，还可以为开源项目做出贡献！），但这意味着他们也需要该库作为依赖项。

我想让事情变得简单，这样构建对我自己和应用程序的用户来说都很容易。

使这项工作最实用的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:20:33.570

使用 Maven 时，建议使用 Maven 存储库管理器（例如 Nexus）并按照此处所述配置您的设置文件：

[https://help.sonatype.com/display/NXRM3/Maven+Repositories#MavenRepositories-ConfiguringApacheMaven](https://help.sonatype.com/display/NXRM3/Maven+Repositories#MavenRepositories-ConfiguringApacheMaven)

在您的情况下，这具有额外的好处，您可以使用 Maven 存储库管理器来托管任何私有工件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T11:25:49.760

在 GitHub 上提供您自己的 Maven 存储库以分发封闭源代码库，您可以重新分发并从您的项目 (pom.xml) 中引用它。

[http://cemerick.com/2010/08/24/hosting-maven-repos-on-github](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github)很好地介绍了如何在 GitHub 上设置存储库。您应该注意该帖子中还提到的此类微型存储库的警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T11:48:49.573

一个非常简单的解决方案是将您的私有库放入您的项目中（例如`<project>/lib/library-1.0.jar`）并将其作为[系统](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)依赖项包含在内。您可以将它包含在您的 pom 中。

```
<dependencies>
    <dependency>
      <groupId>my.private</groupId>
      <artifactId>library</artifactId>
      <version>1.0</version>
      <scope>system</scope>
      <systemPath>${project.basedir}/lib/library-1.0.jar</systemPath>
    </dependency>
  </dependencies> 
```

**注意**：系统依赖不是传递性的！

从文档

*此范围类似于提供的范围，只是您必须提供明确包含它的 JAR。工件始终可用，不会在存储库中查找。*

# iphone - 从 rtsp 链接 +iphone 播放视频

> ID：11224760
> 
> 赞同：0
> 
> 时间：2012-06-27T11:03:43.260
> 
> 标签：iphone, ios

我想在我的应用程序中播放视频。为此，我使用了以下代码：

```
NSURL *fileURL = [NSURL URLWithString:@"http://www.boxmusiq.com/ThiruvasakamVideo        /VTS_01_2_converted.mp4"];

moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL]; 
[moviePlayerController.view setFrame:CGRectMake(0, 70, 320, 270)]; 
[self.view addSubview:moviePlayerController.view];  
moviePlayerController.fullscreen = YES;  
[moviePlayerController play]; 

 Now above url is a http link but I want to play video from rtsp link. 
```

我的 rtsp 链接是：

> rtsp://v8.cache3.c.youtube.com/CjYLENy73wIaLQlxYJvp0_b1wxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYIiCgqTg6_XeTww=/0/0/0/video.3gp

如果有人知道如何从 rtsp 链接播放视频。请给我一些解决方案。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:06:19.597

您可以在实现 RTSP的[github](https://github.com/dropcam/dropcam_for_iphone)上查看以下项目，

# javascript - 没有在我的网页中获得倒计时功能

> ID：11224768
> 
> 赞同：1
> 
> 时间：2012-06-27T11:04:10.343
> 
> 标签：javascript, timer, countdown

我正在制作一个竞赛平台..为此我需要一个倒数计时器..问题是我没有 JS..所以我用谷歌搜索并得到了这个计时器脚本..但它在网页中不起作用......请帮帮我.. 这是计时器的代码...我得到了 div 标签的框，但没有得到其中的计时器...请帮帮我，因为我是 JS 中的完整新手..

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>CoBo:Contest</title>
        <link href="css/master.css" rel="stylesheet" type="text/css"/>
        <script>
          function start(myD, myH, myMins, mySecs, myL) {
              var d = new Date();//  Returns the Day (number) so we can set it to default
              currentDay = d.getDate();
              var month = 0;//  '*' for next month, '0' for this month or 1 through 12 for the month 
              var day = myD;//  Offset for day of month day or + day  
              var hour = myH;//  0 through 23 for the hours of the day
              var minutes = myMins;//  Minutes of the hour to End on
              var seconds = mySecs;//  Seconds of the minute to End on
              var tz =  - 7;//  Offset for your timezone in hours from UTC
              var lab = myL;//  The id of the page entry where the timezone countdown is to show
              displayTZCountDown(setTZCountDown(month, day, hour, minutes, seconds, tz), lab);
          }

          function setTZCountDown(month, day, hour, minutes, seconds, tz) {
              var toDate = new Date();
              if (month == '*')
                  toDate.setMonth(toDate.getMonth() + 1);
              else if (month > 0) {
                  if (month <= toDate.getMonth())
                      toDate.setYear(toDate.getYear() + 1);
                  toDate.setMonth(month - 1);
              }
              if (day.substr(0, 1) == '+') {
                  var day1 = parseInt(day.substr(1));
                  toDate.setDate(toDate.getDate() + day1);
              }
              else {
                  toDate.setDate(day);
              }
              toDate.setHours(hour);
              toDate.setMinutes(minutes - (tz * 60));
              toDate.setSeconds(seconds);
              var fromDate = new Date();
              fromDate.setMinutes(fromDate.getMinutes() + fromDate.getTimezoneOffset());
              var diffDate = new Date(0);
              diffDate.setMilliseconds(toDate - fromDate);
              return Math.floor(diffDate.valueOf() / 1000);
          }

          function displayTZCountDown(countdown, tzcd) {
              if (countdown < 0)
              document.getElementById(tzcd).innerHTML = "<b>Ended</b>";
              else {
                  var secs = countdown % 60;
                  if (secs < 10)
                  secs = '0' + secs;
                  var countdown1 = (countdown - secs) / 60;
                  var mins = countdown1 % 60;
                  if (mins < 10)
                  mins = '0' + mins;
                  countdown1 = (countdown1 - mins) / 60;
                  var hours = countdown1 % 24;
                  var days = (countdown1 - hours) / 24;
                  if (hours < 10) {
                      var hours = "0" + hours;
                  }
                  document.write(hours + ":" + mins + ":" + secs);
                  document.getElementById(tzcd).innerHTML = hours + ':' + mins + ':' + secs;
                  setTimeout('displayTZCountDown(' + (countdown - 1) + ',\'' + tzcd + '\');', 999);
              }
        </script>
    </head>
    <body>
        <div id="sidebar-top">
            <div id="inner">
                <script>
                          start('9', '25', '12', '00', '00', 'myTimerID');
                </script>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:08:16.130

查看您的脚本，您的 HTML 似乎缺少 ID 为“myTimerID”的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:37:59.700

顺便说一句，我只是让它变得完美而小巧..只需将目标的差异和当前纪元时间传递给函数，它就会给出结果:)

```
function displayTZCountDown(countdown, tzcd) {
            if (countdown < 0) {
                document.getElementById(tzcd).innerHTML = "Ended";
                window.location="../contest.php";
            }
            else {
                var secs = countdown % 60;
                if (secs < 10) secs = '0' + secs;
                var countdown1 = (countdown - secs) / 60;
                var mins = countdown1 % 60;
                if (mins < 10) mins = '0' + mins;
                countdown1 = (countdown1 - mins) / 60;
                var hours = countdown1 % 24;
                var days = (countdown1 - hours) / 24;
                if (hours < 10) {
                    hours = "0" + hours;
                }
                document.getElementById(tzcd).innerHTML = hours + ':' + mins + ':' + secs;
                setTimeout('displayTZCountDown(' + (countdown - 1) + ',\'' + tzcd + '\');', 999);
            }
        } 
```

这里 tzcd 是我要写的 html id，倒计时是 targetepoch-currentepoch

# silverlight - VertexBuffer.GetData() 和 Silverlight 5

> ID：11224771
> 
> 赞同：3
> 
> 时间：2012-06-27T11:04:21.297
> 
> 标签：silverlight, xna

我正在尝试在 silverlight 5 中实现 3d 模型碰撞。为此，我正在创建一个 BoundingBox（就像在 XNA4.0 中一样）：

```
 public BoundingBox GetBoundingBoxFromModel(Model model)
    {            
        BoundingBox boundingBox = new BoundingBox();

            foreach (ModelMeshPart part in model.Meshes[0].MeshParts)
            {
                VertexPositionNormalTexture[] vertices = new VertexPositionNormalTexture[part.NumVertices];
                Vector3[] vertexs = new Vector3[vertices.Length];

                part.VertexBuffer.GetData<VertexPositionNormalTexture>(vertices);                    

                for (int index = 0; index < vertexs.Length; index++)
                {
                    vertexs[index] = vertices[index].Position;
                }

                boundingBox = BoundingBox.CreateMerged(boundingBox, BoundingBox.CreateFromPoints(vertexs));
            }            
        return boundingBox;
    } 
```

问题是 Silverlight 5 没有 GetData() 方法连接到 XNA4 中的 VertexBuffer。一个人怎样才能达到同样的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:08:53.000

出于安全原因，Microsoft 拒绝访问 GPU。所以他们有暂停**GetData()**方法。要在 Silverlight 5 中解决此问题，您可以编写自定义内容管道来加载对象并尝试读取顶点数据，它可以解决您的问题。

# objective-c - 如何显示具有不同界面方向的 PopOver 始终是纵向的？

> ID：11224775
> 
> 赞同：0
> 
> 时间：2012-06-27T11:04:28.033
> 
> 标签：objective-c

我已通过此代码阻止了界面方向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;

    if (orientation == UIDeviceOrientationPortrait) {
        NSLog(@"portrait");
    }else{
        NSLog(@"landsape");
     }
        return NO;
     } 
```

我正在使用弹出框指向向上的按钮。

[popoverController presentPopoverFromRect:[button bounds] inView:button allowedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

肖像模式是正确的。我的问题是如何相对于屏幕的纵向模式始终向上显示弹出框？如果有人有任何想法，请帮助...在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:10:24.297

如果您总是想使用纵向模式而不是用以下方法替换您的方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
  {
   return (interfaceOrientation == UIInterfaceOrientationPortrait);
   } 
```

# authentication - 如何将受密码保护的存储库添加到 Sonatype Nexus？

> ID：11224779
> 
> 赞同：7
> 
> 时间：2012-06-27T11:04:39.627
> 
> 标签：authentication, sonatype

我们使用 Sonatype Nexus 来管理不同的存储库。有一个请求将受密码保护的存储库添加到我们的“公共存储库”组。问题是，我真的不知道如何做到这一点。

我可以创建一个新的 repo 并将其添加到现有组中，并且可以选择进行身份验证，但是我怎样才能确保这样做是正确的呢？搜索网络只会产生创建受保护存储库的结果，但不会产生添加现有的、受密码保护的远程存储库的结果。

如果有资源链接可以解释如何解决这个特定问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T13:54:15.953

在代理存储库的配置选项卡中，单击“身份验证（可选）”，然后输入远程站点的凭据。

执行此操作后，存储库列表中代理存储库的状态应显示为“服务中”。如果是这样，那么你就完成了。

如果它显示“远程自动阻止”则它不起作用，请查看日志以获取有关问题的详细信息。

# mysql - 无法使用我刚刚设置的用户详细信息从 bash 连接到 MySQL 数据库

> ID：11224784
> 
> 赞同：1
> 
> 时间：2012-06-27T11:05:05.927
> 
> 标签：mysql, macos

我刚刚创建了一个带有密码的新 MySQL 用户，并授予他们对数据库的所有权限。现在我想用我刚刚设置的密码连接到那个数据库，但我不能：

```
mysql> create user 'reviews' identified by 'reviews';
Query OK, 0 rows affected (0.00 sec)
mysql> grant all on reviews.* to 'reviews'@'localhost';
Query OK, 0 rows affected (0.00 sec)
mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)
mysql> exit;
Bye
$ mysql -U reviews -u reviews -p
Enter password: 
ERROR 1045 (28000): Access denied for user 'reviews'@'localhost' (using password: YES) 
```

我究竟做错了什么？我正在使用 MySQL 10.6 版 bash shell 中的 MacOS Lion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:18:30.207

当您定义用户时，CREATE USER 语句需要一个主机部分。否则它将使用默认的'%'，并且由于 GRANT 语句包含@'localhost'，你最终会得到一个有密码的用户，而另一个没有密码。

```
mysql> CREATE USER 'reviews' IDENTIFIED BY 'reviews';
mysql> GRANT ALL ON reviews.* TO 'reviews'@'localhost'; 
```

结果是：

```
+---------+-------------------------------------------+-----------+
| user    | password                                  | host      |
+---------+-------------------------------------------+-----------+
| reviews | *03E3A1FBF4E68AB8F641C43AF6E952AFD967AFEA | %         |
| reviews |                                           | localhost |
+---------+-------------------------------------------+-----------+ 
```

使用以下内容来获得您想要的内容：

```
mysql> CREATE USER 'reviews'@'localhost' IDENTIFIED BY 'reviews';
mysql> GRANT ALL ON reviews.* TO 'reviews'@'localhost'; 
```

请注意，最好在连接时指定数据库，否则连接后需要更改默认数据库：

```
shell> mysql -u reviews -p -D reviews 
```

# php - 如何使用 iframe 显示来自 a.php 文件的 div？

> ID：11224789
> 
> 赞同：0
> 
> 时间：2012-06-27T11:05:22.493
> 
> 标签：php, iframe

如何使用 iframe 从 a.php 文件中显示 div #b(only)？

一个.php

```
<html>
    <head></head>
    <body>
        <div id="a">
            Nice day!
        </div>

        <div id="b">
            Nice night!
        </div>
    </body>
</html> 
```

b.php

```
<IFRAME width=1200" height="1500" scrolling=no frameborder=0 src="a.php"; marginWidth=0 marginHeight=0></IFRAME> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:13:46.423

这里的目标是什么？a.php 会根据调用方式显示不同的注释吗？

一种选择是添加参数 ID：

```
if ($_GET['id'] == 'a') {
  //display div#a
} else {
  //display div#b
}

<iframe src="a.php?id=b" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:18:56.353

你可以用 jQuery 做到这一点：

```
$('#target').load('a.html #b'); // take #b from a.html and put in #target 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:10:07.683

请尝试这样的事情。

```
<IFRAME width=1200" height="1500" scrolling=no frameborder=0 src="/a.php#divid"; marginWidth=0 marginHeight=0></IFRAME> 
```

# javascript - javascript forloop 不会运行所有代码

> ID：11224790
> 
> 赞同：1
> 
> 时间：2012-06-27T11:05:32.043
> 
> 标签：javascript, jquery, for-loop

所以我确实有这个循环，但是当它生效后它会停止，当我从循环中删除该代码并由我定义 x 时，它确实可以正常工作。什么是在效果后停止该功能？此外，当我尝试不使用 fadeTo 并删除该函数后效果并将其放在逗号 ( `$('#item' + x + ' p').html(obchody[window.obchod][x]['doby_a_kontakty']`) 后面时，它也可以工作（但出现一些错误并在第一次循环后停止）。

```
for (var x in obchody[window.obchod]) {
    $('#item' + x + ' p').fadeTo(350, 0, function () {
        $('#item' + x + ' p').html(obchody[window.obchod][x]['doby_a_kontakty']).fadeTo(350, 1);
    });
} 
```

问题仍然存在，现在当我使用`this`而不是`$('#item' + x + ' p')`，它运行但迟到了。这是一个示例，我添加了类似计数器的代码 - nuber（函数内的数字）。

```
y = '';
for (var x in obchody[window.obchod]) {
    y += ' ' + x + '(';
    $('#item' + x + ' p').fadeTo(350, 0, function () {
        y += x + ')';
        $(this).html(obchody[window.obchod][x]['doby_a_kontakty'] + y).fadeTo(350, 1);
    });
} 
```

这个测试的结果是： y==`0( 1( 2( 3( 4( 5( 6( 7(7)7)7)7)7)7)7)7)`并且我需要它像 y== 一样运行`0(0) 1(1) 2(2) 3(3) 4(4) 5(5) 6(6) 7(7)`，因为我不能在其中使用 x 但这无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:31:32.713

试试这个...

```
function fade(x) {
    $('#item' + x + ' p').fadeTo(350, 0, function() {
        $(this).html(obchody[window.obchod][x]['doby_a_kontakty']).fadeTo(350, 1);
    });
}

for (var x in obchody[window.obchod]) {
    fade(x);
} 
```

# php - insertAfter 与 Load ， div 元素消失

> ID：11224796
> 
> 赞同：2
> 
> 时间：2012-06-27T11:06:05.783
> 
> 标签：php, jquery, load

我在两页上有一个主 div，`page1.php`即`form.php`

## page1.php

```
<div class="main_div">
    <?php require('form.php'); ?>
</div>

<script>
    $(".add_one").click(function(){
        $(".main_div").insertAfter(".single_div").load('form.php');
    });
</script> 
```

## 表单.php

```
<div class="single_div">
    <table>
        <tr>
            <td><input type="text" class="text1" /></td>
            <td><input type="button" class="add_one" value="Add" /></td>
            <td>Some other fields too</td>
        </tr>
    </table>
</div> 
```

## css.css

```
.single_div {
    background-color: green;
    float: left;
    margin-left: 10px;
} 
```

现在，当我单击按钮时，它不会在它旁边`Add`添加其他`form`/ ...但它消失了`div class='single_class'`

当我检查时`inspect element`，`Chrome Developer Tool`什么都没有......除了javascript之外，整个身体都是空的

现在我如何`load`在单击按钮旁边添加页面选项。

## 编辑/添加

[http://jsfiddle.net/marafee1243/ErN5E/](http://jsfiddle.net/marafee1243/ErN5E/)

上面的小提琴可能不合适......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:23:39.353

What happens in your code with `insertAfter` is this; it takes the element, removes it from the DOM tree, then tries to insert it after the target. By the time it tries to insert it after the target, the target is removed from the DOM tree. Hence it's empty.

Try the following instead:

```
$(".main_div").clone(true).insertAfter(".single_div").load('www.google.com'); 
```

Including true in the clone() makes sure events are copied as well.

Sadly, there seems to be a lot more wrong here. I'm not quite sure what you are trying to do. You just want to have a copy of that single_class div after each click on the add button?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:18:39.590

```
$(".main_div").insertAfter(".single_div").load('form.php'); 
```

在 .single_div 之后插入 .main_div，这没有意义

> .insertAfter(target)
> 目标：选择器、元素、HTML 字符串或 jQuery 对象；匹配的元素集将插入到此参数指定的元素之后。

我想你想要这样的东西：

```
$('.single_div').eq(0).clone(true).appendTo('.main_div'); 
```

# javascript - JavaScript 计算器

> ID：11224801
> 
> 赞同：0
> 
> 时间：2012-06-27T11:06:12.790
> 
> 标签：javascript

```
var uc = 2.10;
var dort_bucuk = 1.80;
islem  = parseFloat(uc-dort_bucuk);
alert(islem) // 0.30000000000000004

var uc = 1.10;
var dort_bucuk = 0.95;
islem  = parseFloat(uc-dort_bucuk);
alert(islem) // 0.15000000000000013

var uc = 4.00;
var dort_bucuk = 3.70;
islem  = parseFloat(uc-dort_bucuk);
alert(islem)//0.2999999999999998 
```

我如何使用 php number_format($int,2) 为什么它即将到来的 4.00-3.70 =0.2999999999999998？它必须

```
<?php 
 $bir = 4.00;
 $iki = 3.70;
echo number_format($bir-$iki,2); // 0.30 
 ?> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:08:43.603

试试[`.toFixed(..)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)，例如：

```
alert(islem.toFixed(2)); 
```

* * *

另外，请注意您不需要任何`parseFloat`s，因为您要减去两个数字，所以结果是一个数字。

# java - 如何检测 Postgres 临时表是否已存在？

> ID：11224806
> 
> 赞同：7
> 
> 时间：2012-06-27T11:06:27.887
> 
> 标签：java, sql, postgresql

我有一个名为*tester*的表，我需要用一个临时表覆盖它以进行一些测试。到目前为止，我已经使用：

```
CREATE TEMPORARY TABLE tester AS
  SELECT * FROM tester WHERE name='bananas'; 
```

这个临时表将在会话结束时消失，这对我来说很好，但是它是负责连接的外部应用程序，它倾向于缓存连接以供重用（因此不能保证临时表有被丢弃）。这意味着如果我再次尝试执行上述查询，它可能会失败，因为临时表仍然存在。

显式删除临时表并不是一个真正的选择。我宁愿忍受失败的查询，也不愿冒险错误地删除底层的“真实”表。

我想做的只是在临时表不存在的情况下创建它*。*我*确实*发现人们建议在检查表是否存在时应该使用这个查询：

```
SELECT * FROM pg_catalog.pg_class WHERE relkind = 'r' AND relname = 'tester';

result when temporary table exists:

 relname | relnamespace | reltype | relowner | relam | relfilenode | reltablespace | relpages | reltuples | reltoastrelid | reltoastidxid | relhasindex | relisshared | relkind | relnatts | relchecks | reltriggers | relukeys | relfkeys | relrefs | relhasoids | relhaspkey | relhasrules | relhassubclass | relfrozenxid | relacl | reloptions
---------+--------------+---------+----------+-------+-------------+---------------+----------+-----------+---------------+---------------+-------------+-------------+---------+----------+-----------+-------------+----------+----------+---------+------------+------------+-------------+----------------+--------------+--------+------------
 tester  |         2200 | 1533065 |  1531747 |     0 |     1533063 |             0 |        0 |         0 |       1533067 |             0 | t           | f           | r       |        3 |         0 |           0 |        0 |        0 |       0 | f          | t          | f           | f              |     17654031 |        |
 tester  |      1533088 | 1533065 |  1531747 |     0 |     1533160 |             0 |        0 |         0 |       1533163 |             0 | f           | f           | r       |        3 |         0 |           0 |        0 |        0 |       0 | f          | f          | f           | f              |     17654066 |        | 
```

如您所见，有两条记录。一个用于原始表，一个用于临时表。第二条记录是临时表——我知道这一点是因为它在不同会话中工作时会消失——但除了缺少索引或主键之外，这是我可以将其识别为临时表的唯一方法。这只是一个测试表——我正在使用的一些真实表可能缺少索引和/或主键。

**问题（tl；dr 版）：如果已经存在同名的“真实”表，我如何测试*临时表是否存在？***（或者至少确定一个表是临时的？）

*免责声明：我添加了 Java 标记，因为这是我用来执行查询的（SQL 只是应用程序的一小部分）。尽管 Java 与该问题没有直接关系，但我需要的不是可以从 Java 上下文中使用的答案。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T11:11:30.597

用户定义函数来检查临时表是否存在。

```
CREATE or REPLACE FUNCTION public.iftableexists( varchar)
RETURNS pg_catalog.bool AS
$BODY$
DECLARE

 BEGIN

     /* check the table exist in database and is visible*/
 perform n.nspname ,c.relname
FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON n.oid
= c.relnamespace
where n.nspname like 'pg_temp_%' AND pg_catalog.pg_table_is_visible(c.oid)
AND Upper(relname) = Upper($1);

     IF FOUND THEN
        RETURN TRUE;
     ELSE
        RETURN FALSE;
     END IF;

 END;
$BODY$
LANGUAGE 'plpgsql' VOLATILE 
```

[请参阅此处了解更多详细信息](http://archives.postgresql.org/pgsql-general/2005-03/msg01602.php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-20T03:57:48.923

> 我想做的只是在临时表不存在的情况下创建它。

```
CREATE TEMPORARY TABLE IF NOT EXISTS tester AS
  SELECT * FROM tester WHERE name='bananas'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-28T13:53:22.913

这对我有用：

```
SELECT EXISTS (
   SELECT 1
   FROM   information_schema.tables 
   WHERE  table_schema like 'pg_temp_%'
   AND table_name=LOWER('table_name')
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T12:14:35.860

我不明白为什么`like`当有一列包含我们需要的信息时，你会想要“模糊搜索”。也许有一些我不知道的向后兼容性问题。

这是与上面相同的代码，但使用`table_type = 'LOCAL TEMPORARY`而不是`like 'pg_temp_%'`

```
SELECT EXISTS (
   SELECT 1
   FROM information_schema.tables 
   WHERE table_type = 'LOCAL TEMPORARY'
   AND table_name = 'table_name'
) 
```

# c# - 在集合上重载项目

> ID：11224808
> 
> 赞同：1
> 
> 时间：2012-06-27T11:06:33.980
> 
> 标签：c#, collections

我有一个收藏课`MyCollection<T>`。

我已经实现`T this[string name]`了，效果很好。

我也尝试实现`T Item(string name)`，但当然会出现错误：

> 该类型`MyCollection<T>`已包含 Item 的定义

正如它应该。但是，我也想通过实现一个函数来重载 Item ，`T Item(string, bool)`但这也会引发同样的错误。

为什么编译器会认为这`T Item(string, bool)`与索引器冲突`T Item(string)`？如果它不是索引器而只是一个普通方法，那么这两个声明将是两个完全有效的重载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:09:25.467

您绝对可以重载索引器 - 但不能*使用*名为`Item`. 要重载索引器，您只需要：

```
public T this[string name, bool condition]
{
    get { ... }
    set { ... }
} 
```

编辑：好的，所以它看起来像：

*   您不能有两个不同种类的成员（一个方法，一个属性）具有相同的名称，根据 C# 4 规范的第 10.3 节这是正确的
*   你不能有一个 indexer*和*一个 name 属性`Item`，这有点令人惊讶，因为它们都是引擎盖下的属性

我怀疑如果您使用更改索引器属性的生成名称，您*可以*将索引器与调用的属性一起调用，但我没有尝试过。`Item`[`DefaultMemberAttribute`](http://msdn.microsoft.com/en-us/library/system.reflection.defaultmemberattribute.aspx)

# database - 向 BCNF 分解添加最小密钥

> ID：11224810
> 
> 赞同：0
> 
> 时间：2012-06-27T11:06:35.767
> 
> 标签：database, normalization, decomposition

如果我将为给定的 BCNF 分解添加一个最小密钥，它可以不再是 BCNF 分解吗？

正式地说，假设我有**F**（函数依赖组）、模式**R**和它的 BCNF 分解`{R1,R2,R3,R4}`，我将在分解中添加另一个组**R5**，这是模式**R**的最小键。

新的分解 `{R1,R2,R3,R4,R5}`仍然是**R**的 BCNF 分解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:46:13.573

每个最小键都在 BCNF 中，因为在其上的 F+ 投影只包含微不足道的函数依赖关系。正如 Koehler 所观察到的，任何保留依赖关系的 BCNF 分解都可以通过添加表示最小键的表来进行无损分解。由此产生的分解仍然是依赖保留。

*Henning Köhler：寻找忠实的 Boyce-Codd 范式分解。AAIM 2006：102-113*

# javascript - 单击下拉箭头时的 Javascript 事件

> ID：11224814
> 
> 赞同：1
> 
> 时间：2012-06-27T11:06:41.540
> 
> 标签：javascript, html, drop-down-menu, html-select

当用户选择下拉锚时，是否有触发事件或者我可以编写要触发的自定义事件？

![在此处输入图像描述](../Images/9cd0c9cd730075f42c6f14515ae704c6.png)

我需要`Top`从从 Web 服务获得的 dwopdown 列表中删除。一旦用户选择了任何项目，它应该`Top International`再次返回。

![在此处输入图像描述](../Images/c8d14dbc474c536cf33d4a8eb73ea5d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:24:09.010

```
var isselect = false;

$("#dropdown").click(function() {
    if(!isselect)
    {
       //dropdown arrow is clicked.
    }
    else
    { 
       //dropdown item is selected
    }
});
$("#dropdown").change(function() {
    isselect = true;
    setTimeout(clearIsselect,10);
});
function clearIsselect() {
    isselect = false;
} 
```

# android - 水平滚动视图按钮焦点

> ID：11224817
> 
> 赞同：3
> 
> 时间：2012-06-27T11:06:50.097
> 
> 标签：android, horizontalscrollview

我正在开发一个我正在实现水平滚动视图的android应用程序。我遇到了两个问题，无法真正弄清楚如何解决它们。他们是：

1.  当水平滚动视图到达其最左端或最右端时，左/右图像按钮应变为非活动状态。
2.  当我在水平滚动视图中单击一个按钮（显示为一半）时，该按钮应显示在中心并具有完全可见性。

下面是屏幕截图：

![截屏](../Images/6f5f60a46b86737d5101e78906dfbdb0.png)

# php - 如何重新索引数组？

> ID：11224821
> 
> 赞同：71
> 
> 时间：2012-06-27T11:07:08.117
> 
> 标签：php, arrays

我的数组如下所示：

```
array(
  0 => 'val',
  2 => 'val',
  3 => 'val',
  5 => 'val',
  7 => 'val'
); 
```

我怎样才能重置钥匙，让它像这样`0, 1, 2, 3, 4`？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-06-27T11:08:32.007

使用[array_values](http://php.net/array_values)：

```
$reindexed_array = array_values($old_array); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-14T01:10:05.010

```
array_splice($old_array, 0, 0); 
```

它不会对数组进行排序，也不会创建第二个数组

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-27T11:08:18.440

通过使用`sort($array);`

[请参阅此处](http://php.net/manual/en/function.sort.php)的PHP 文档。

我会推荐`sort`over `array_values`，因为它不会创建第二个数组。使用以下代码，您现在有两个占用空间的数组：$reindexed_array 和 $old_array。不必要。

`$reindexed_array = array_values($old_array);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-18T09:44:13.597

从 PHP7.4 开始，您可以通过使用 splat 运算符将值解包到数组中来重新索引而无需函数调用。将其视为“重新包装”。

代码：（[演示](https://3v4l.org/qeVnW)）

```
$array = array(
  0 => 'val',
  2 => 'val',
  3 => 'val',
  5 => 'val',
  7 => 'val'
);

$array = [...$array];

var_export($array); 
```

输出：

```
array (
  0 => 'val',
  1 => 'val',
  2 => 'val',
  3 => 'val',
  4 => 'val',
) 
```

注意：此技术**不适**用于关联键（splat 运算符会阻塞这些键）。[非数字演示](https://3v4l.org/2IgGh)

损坏被报告为无法解包*字符串*键，但更准确地说，键必须都是数字的。 [整数作为字符串演示](https://3v4l.org/66mVP)和[浮点演示](https://3v4l.org/gVrY8)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-21T12:24:16.623

```
array_splice($jam_array, 0, count($jam_array)); 
```

要对缺少中间索引的数组进行排序，使用**count**顺序更安全。所以`0`是第一个索引和`count($jam_array)`或`sizeof($jam_array)`返回数组的小数位，即最后一个索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-05T08:34:36.693

值得指出的是，问题中的数组是一种非常特殊的情况，其中所有值都相同，并且键已经按升序排列。如果您有一个具有任何随机顺序的不同值和键的数组，并且您想按键对其进行排序并重新索引键，则现有答案将不会达到您的预期。

例如，如果你有这样的事情：

```
[
    7 => 'foo',
    0 => 'bar',
    2 => 42
]; 
```

你想结束这个：

```
[
    0 => 'bar',
    1 => 42,
    2 => 'foo',
] 
```

你不能只使用`array_values()`,`array_splice()`或`sort()`，因为你最终会得到

```
[
    0 => 'foo',
    1 => 'bar',
    2 => 42,
] 
```

相反，您首先需要根据键对数组进行排序，使用`ksort()`，**然后**使用 重新索引键`array_values()`：

```
$arr = [
    7 => 'foo',
    0 => 'bar',
    2 => 42
];

ksort($arr, SORT_NUMERIC);
$arr = array_values($arr); 
```

结果：

```
[
    0 => 'bar',
    1 => 42,
    2 => 'foo',
] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-11T11:17:26.870

简单易行的方法是：

```
$new_numerical_indexed_array = array_values($old_array); 
```

由 PHP 4、PHP 5、PHP 7、PHP 8 支持，您可以[在此处看到](https://www.php.net/manual/en/function.array-values.php)

# java - Java：对于字符串值，我们使用命令 sendKeys("String"); 同样，将数字数据发布到数字字段的命令是什么

> ID：11224822
> 
> 赞同：2
> 
> 时间：2012-06-27T11:07:09.597
> 
> 标签：java, selenium, webdriver

Selenium Java Web Driver：如何将数字数据传递给数字字段？对于`String`值，我们使用命令`sendKeys("String");`。同样，将数字数据发布到数字字段的命令是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:21:40.620

如果你这样做`sendKeys("9");`，它会将数字发送到数字字段。我想你有这样的事情：

```
 int numberToSend = 9; 
```

并且您想将其发送到数字字段。您可以通过以下两种方式做到这一点：

```
String numberToString = "" + numberToSend; 
```

然后你可以使用

```
webElement.sendKeys(""+numberToSend); 
```

或者

```
webElement.sendKeys(numberToString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T19:17:44.627

我会做以下事情：

```
String s = "24";
Integer s1 = Integer.parseInt(s);
String orderPercent = s1.toString();
.sendKeys(orderPercent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T09:21:13.950

将该整数转换为字符串是简单易行的解决方案，如下所示：

```
int i=1;
String A = Integer.toString(i); 
```

现在将值传递给 sendkeys，如下所示：

```
driver.findElement(By.name("q")).sendKeys(A); 
```

它会发送值`1`。

# jquery - 使用 selenium webdriver 单击 jquery 菜单项

> ID：11224825
> 
> 赞同：1
> 
> 时间：2012-06-27T11:07:34.790
> 
> 标签：jquery, python, internet-explorer, selenium, webdriver

我是 selenium 的新手，我正在使用 python，但我有一个关于在 Internet Explorer 中导航到 Jquery 菜单的小问题。我想导航到一个类似于*Tools > Data Load > **Data Load***的菜单。我在下面粘贴我的 HTML 代码。我不知道使用哪一个来单击最后一个以粗体标记的菜单项数据加载。

请有人帮助我。我到处搜索，但无法得到正确的答案。

```
<LI class="mainmenu topmenu" sub_menu="1" level="1" jQuery1340790605409="12">Tools 
<UL style="DISPLAY: none; TOP: 49px; LEFT: 383px" class="mainmenu submenu" jQuery1340790605409="214">
<LI class="mainmenu submenupointer submenu " sub_menu="1" level="2" global_level="1" menu_id="891" jQuery1340790605409="54">Data Load 
<UL style="DISPLAY: none; TOP: 1px; LEFT: 109px" class="mainmenu subsubmenu" jQuery1340790605409="232">
<LI class="mainmenu subsubmenu" sub_menu="0" level="3" url_path="/Apps/Tools/DataLoad/DataLoad/FileList.asp" jQuery1340790605409="172">Data Load 
<LI class="mainmenu subsubmenu" sub_menu="0" level="3" url_path="/Apps/Tools/DataLoad/DataExtracts/template.asp" jQuery1340790605409="174">Data Extracts 
<LI class="mainmenu subsubmenu" sub_menu="0" level="3" url_path="/Apps/Tools/DataLoad/BehaviorMatrix/BehaviorMatrix.asp" jQuery1340790605409="176">Behavior Matrix </LI></UL> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:32:50.863

如果不单击或将鼠标悬停在以下步骤上就看不到**DataLoad子菜单 - Tools -> Data Load -> Data Load 。**

然后，您将不得不使用 selenium Actions 类将鼠标悬停（导航）在工具 -> DataLoad 元素等上。您可以查看此链接以获取有关[Actions](http://selenium-python.readthedocs.org/en/latest/api.html#action-chains)的更多信息。

关于是否使用id或class？我建议您使用 linkText 或 partialLinkText 来查找您要点击的元素。例如 - 搜索 linkText 等于 的元素`"DataLoad"`。

# linux - Linux 2.6 内部完全公平调度器

> ID：11224830
> 
> 赞同：2
> 
> 时间：2012-06-27T11:07:45.163
> 
> 标签：linux, algorithm, data-structures

我正在研究 CFS 的调度算法，它在此链接 [http://www.ibm.com/developerworks/linux/library/l-completely-fair-scheduler上使用 RED-BLACK_TREE 数据结构](http://www.ibm.com/developerworks/linux/library/l-completely-fair-scheduler)

我的问题是：在 CFS 中使用红黑树的目的是什么，为什么不能使用 AVL 树。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:26:12.910

**注意：**我是从纯算法的角度回答这个问题（在实践中基本搜索树操作的性能），我不知道 Linux 开发人员是否有其他内部原因选择 RB 树（它可能让他们做某些事情 AVL树没有）。

一般来说，两者是可以互换的，就功能而言，它们也可以与基本的搜索树、treaps、splay树等互换。不同之处在于实际性能，因为所有平衡搜索树（AVL 和 RB 树都是平衡的）具有相同的理论性能。

根据两种数据结构（[AVL](http://en.wikipedia.org/wiki/AVL_tree "AVL")、[RB](http://en.wikipedia.org/wiki/Red_black_tree "RB")）的 wiki 页面，AVL 树在查询方面表现更好，而在插入和删除方面表现更差。如果您查看一个实现，这很容易注意到：平衡 AVL 树涉及更多，导致实践中的性能较慢。

所以我的猜测是，他们可以使用 AVL 树（除非他们利用结构属性 RB 树有而 AVL 树没有，这是不太可能的），但他们更关心插入和删除性能而不是查询性能，所以他们选择了RB代替。

还值得一提的是，C++、Java 和 .NET 中的许多内置数据结构在其实现中使用红黑树，这可能也是因为它们在所有操作中的性能相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T01:20:49.863

CFS Linux 调度程序实际上使用定制的 RB 树 ( `linux/rbtree.h`)。但这里的关键是，CFS 基本上想知道接下来要选择哪个任务。这是通过从树中选择最左边的节点来实现的（因为它将是具有较小切片时间的节点）。但是，为方便起见，CFS 使用的 RBT 也有指向此类节点的指针。

在这一点上，您可以说 AVL 树可以以相同的复杂性完成相同的任务。另一方面，在添加或删除任务条目时，您必须重新平衡并遍历 RBT。我知道，在这里，RBT 比 AVL 更适合这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-12T08:51:52.063

由于 RB 树是自平衡的，因此由于树的自平衡特性，树中的任何路径都不会是任何其他路径的两倍，因此，所有操作都是 O (log n)，因此插入和删除树中的任务可以快速高效地完成。

# iphone - XCode：TableViewCell 中的水平滚动

> ID：11224836
> 
> 赞同：1
> 
> 时间：2012-06-27T11:08:00.803
> 
> 标签：iphone, ios, uitableview, uiscrollview

我想在 TableView 的每个单元格上实现水平滚动。原理看起来很简单：

*   创建一个比普通单元大 5 倍的单元。
*   在单元格中添加 5 个正常大小的子视图（或 5 个 CustomCell）。
*   创建一个与单元格大小相同的 UIScrollView。

但我无法让它发挥作用，而且我已经没有想法了。我尝试过的无济于事；我一定做错了什么。

我看过很多教程，要么是双表视图（我不想要），要么是代码的一小部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T01:12:58.023

我不完全清楚你需要做什么，但是这个关于制作“Pulse”类型 UI 的教程可能会激发一些想法[how-to-make-an-interface-with-horizo​​ntal-tables-like-the-pulse-news -app-part-1](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)

# php - PHP 输入 MS SQL 无法从字符串转换日期和/或时间

> ID：11224837
> 
> 赞同：0
> 
> 时间：2012-06-27T11:08:01.337
> 
> 标签：php, sql, sql-server

我正在运行一个 MSSQL 函数并返回 PHP，我在 PHP 中使用了两次该函数并将其写入 MySQL 数据库。

第一次运行我使用 $to 和 $from 的函数时（我很清楚这并不漂亮，我不是一个 php 编码员......）

```
$to = date("j M Y", mktime());
$year = date("Y", mktime());
$jan = '1 jan ';
$from = $jan . $year; 
```

然后我使用以下

```
select * from MISYearToDate('$from', '$to') 
```

这绝对没问题。

当我然后做同样的事情但使用本周的日期

```
$weekstarting = date('j M Y', strtotime('last sunday'))."<br>";
$weekending = date('j M Y', strtotime('next saturday'))."<br>"; 
```

然后运行

```
select * from MISYearToDate('$weekstarting', '$weekending') 
```

我收到错误

```
[Microsoft][SQL Server Native Client 11.0][SQL Server]Conversion failed when converting date and/or time from character string. ) 
```

$From 和 $to 回显

```
1 jan 2012
27 Jun 2012 
```

$weekstarting 和 $weekending 回声

```
24 Jun 2012
30 Jun 2012 
```

所以据我所知，真的没有区别，我很困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:13:04.993

我建议只将日期以 yyyy-mm-dd 格式输入 SQL。这将确保 SQL 不会与日期格式混淆。

SQL 将不接受格式为 2012 年 1 月 1 日的日期（作为字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:22:09.157

```
$weekending = date('j M Y', strtotime('next saturday'))."<br>";
                                                       ^^^^^^^ 
```

`<br>`不是 SQL 日期字符串的有效组件。您可能正在浏览器中查看输出，因此`<br>`实际上隐藏了它，但这就是您的问题所在。

这将您的查询变成：

```
select * from MISYearToDate('24 Jun 2012<br>', '30 Jun 2012<br>') 
```

# c++ - 防止用户从不正确的 CRTP 基础派生

> ID：11224838
> 
> 赞同：25
> 
> 时间：2012-06-27T11:08:03.050
> 
> 标签：c++, crtp

我想不出一个合适的问题标题来描述这个问题。希望下面的详细信息可以清楚地解释我的问题。

考虑以下代码

```
#include <iostream>

template <typename Derived>
class Base
{
    public :

    void call ()
    {
        static_cast<Derived *>(this)->call_impl();
    }
};

class D1 : public Base<D1>
{
    public :

    void call_impl ()
    {
        data_ = 100;
        std::cout << data_ << std::endl;
    }

    private :

    int data_;
};

class D2 : public Base<D1> // This is wrong by intension
{
    public :

    void call_impl ()
    {
        std::cout << data_ << std::endl;
    }

    private :

    int data_;
};

int main ()
{
    D2 d2;
    d2.call_impl();
    d2.call();
    d2.call_impl();
} 
```

尽管 的定义`D2`是故意错误的，但它会编译并运行。第一次调用将输出一些预期未初始化`d2.call_impl()`的随机位。`D2::data_`第二次和第三次调用都将输出`100`.`data_`

我明白为什么它会编译和运行，如果我错了，请纠正我。

当我们进行调用`d2.call()`时，调用被解析为`Base<D1>::call`，并且将`this`转换为`D1`和调用`D1::call_impl`。因为`D1`确实是派生形式`Base<D1>`，所以在编译时强制转换很好。

在运行时，在强制转换之后`this`，虽然它确实是一个`D2`对象，但它被视为好像它是`D1`，并且调用`D1::call_impl`将修改应该是的内存位`D1::data_`，并输出。在这种情况下，这些位恰好在哪里`D2::data_`。我认为第二个`d2.call_impl()`也应该是未定义的行为，具体取决于 C++ 实现。

关键是，这段代码虽然本质上是错误的，但不会给用户任何错误的迹象。我在我的项目中真正做的是我有一个 CRTP 基类，它就像一个调度引擎。库中的另一个类访问 CRTP 基类的接口，比如`call`，`call`并将调度到`call_dispatch`该接口，可以是基类默认实现或派生类实现。如果用户定义的派生类，比如说`D`，确实是从`Base<D>`. 如果它源自`Base<Unrelated>`where`Unrelated`不是源自`Base<Unrelated>`. 但它不会阻止用户编写上述代码。

用户通过从基 CRTP 类派生并提供一些实现细节来使用该库。当然还有其他设计方案可以避免上述错误使用的问题（例如抽象基类）。但是让我们暂时把它们放在一边，相信我因为某种原因我需要这个设计。

所以我的问题是，有什么方法可以防止用户编写错误的派生类，如上所示。也就是说，如果用户编写了一个派生的实现类，比如`D`，但他是从 派生的`Base<OtherD>`，那么将引发编译时错误。

一种解决方案是使用`dynamic_cast`. 但是，这是广泛的，即使它有效，它也是一个运行时错误。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-28T08:49:32.507

1）将Base的所有构造函数设为私有（如果没有构造函数，就加一个）

2) 将 Derived 模板参数声明为 Base 的朋友

```
template <class Derived>
class Base
{
private:

  Base(){}; // prevent undesirable inheritance making ctor private
  friend  Derived; // allow inheritance for Derived

public :

  void call ()
  {
      static_cast<Derived *>(this)->call_impl();
  }
}; 
```

在此之后，将不可能创建错误继承 D2 的任何实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T11:35:15.527

如果你有可用的 C++11，你可以使用`static_assert`（如果没有，我相信你可以用 boost 模拟这些东西）。您可以断言例如`is_convertible<Derived*,Base*>`或`is_base_of<Base,Derived>`。

这一切都发生在 Base 中，它所拥有的只是 Derived 的信息。它永远不会有机会查看调用上下文是来自 D2 还是 D1，因为这没有区别，因为`Base<D1>`实例化了一次，以一种特定的方式，无论它是由 D1 实例化还是由它派生的 D2 实例化（或由用户显式实例化它）。

由于您不想（可以理解，因为它有时具有显着的运行时成本和内存开销）使用 dynamic_cast，请尝试使用通常称为“poly cast”的东西（boost 也有自己的变体）：

```
template<class R, class T>
R poly_cast( T& t )
{
#ifndef NDEBUG
        (void)dynamic_cast<R>(t);
#endif
        return static_cast<R>(t);
} 
```

通过这种方式在您的调试/测试构建中检测到错误。虽然不是 100% 的保证，但在实践中，这通常会发现人们犯的所有错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T11:25:42.150

一般要点：模板不受保护，不会被错误的参数实例化。这是众所周知的问题。不建议花时间尝试解决此问题。模板被滥用的数量或方式是无穷无尽的。在您的特定情况下，您可能会发明一些东西。稍后您将修改您的代码，新的滥用方式将出现。

我知道 C++11 有可能有帮助的静态断言。我不知道全部细节。

其他点。除了编译错误还有静态分析。您所要求的与此有关。分析不一定会寻找安全漏洞。它可以确保代码中没有recursion。它可以检查某个类是否没有派生类，可以对模板和函数的参数进行限制等。这都是分析。编译器无法支持如此广泛变化的约束。我不确定这是正确的方法，只是讲述这种可能性。

ps 我们公司提供这方面的服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:02:42.980

如果你不能指望 C++11，你可以试试这个技巧：

1.  添加一个静态函数，`Base`该函数返回一个指向其特殊类型的指针：

    static Derived *derived( ) { return NULL; }

2.  将静态`check`函数模板添加到带有指针的 base 中：

    模板< typename T > static bool check( T *derived_this ) { return ( derived_this == Base< Derived >::derived( ) ); }

3.  在您的`Dn`构造函数中，调用`check( this )`：

    检查（这个）

现在，如果您尝试编译：

```
$ g++ -Wall check_inherit.cpp -o check_inherit
check_inherit.cpp: In instantiation of ‘static bool Base<Derived>::check(T*) [with T = D2; Derived = D1]’:
check_inherit.cpp:46:16:   required from here
check_inherit.cpp:19:62: error: comparison between distinct pointer types ‘D2*’ and ‘D1*’ lacks a cast                                                                                                                             
check_inherit.cpp: In static member function ‘static bool Base<Derived>::check(T*) [with T = D2; Derived = D1]’:                                                                                                                   
check_inherit.cpp:20:5: warning: control reaches end of non-void function [-Wreturn-type] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T12:14:35.827

没有办法防止用户编写不正确的派生类；但是，有一些方法可以防止您的代码调用具有意外层次结构的类。如果存在用户传递`Derived`给库函数的点，请考虑让这些库函数执行`static_cast`预期的派生类型。例如：

```
template < typename Derived >
void safe_call( Derived& t )
{
  static_cast< Base< Derived >& >( t ).call();
} 
```

或者，如果有多个层次结构，请考虑以下事项：

```
template < typename Derived,
           typename BaseArg >
void safe_call_helper( Derived& d,
                       Base< BaseArg >& b )
{
   // Verify that Derived does inherit from BaseArg.
   static_cast< BaseArg& >( d ).call();
}

template < typename T >
void safe_call( T& t )
{
  safe_call_helper( t, t );  
} 
```

在这两种情况下，`safe_call( d1 )`将编译而`safe_call( d2 )`将无法编译。编译器错误可能不像用户希望的那样明确，因此可能值得考虑静态断言。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T12:12:32.253

一般来说，我不认为有办法得到这个，这不应该被认为是彻头彻尾的丑陋并恢复到使用邪恶的特征。以下是什么可行，什么不可行的总结。

*   使用`static_assert`（来自 C++11 或来自 boost）不起作用，因为检查定义`Base`只能使用类型`Base<Derived>`和`Derived`. 所以以下看起来不错，但失败了：

    ```
    template <typename Derived>
    class Base
    {
       public :

       void call ()
       {
          static_assert( sizeof( Derived ) != 0 && std::is_base_of< Base< Derived >, Derived >::value, "Missuse of CRTP" );
          static_cast<Derived *>(this)->call_impl();
       }
    }; 
    ```

如果您尝试将其声明`D2`为`class D2 : Base< D1 >`静态断言，则不会捕捉到这一点，因为实际上是从静态断言`D1`派生而来的`Base< D1 >` ，并且静态断言是完全有效的。但是，如果您从`Base< D3 >`where派生`D3`任何不是从`Base< D3 >`两者派生的类`static_assert`以及`static_cast`将触发编译错误，那么这绝对没用。

由于`D2`您需要在代码中检查的类型`Base`永远不会传递给模板，因此使用的唯一方法是`static_assert`将其移动到其声明之后，`D2`这将需要实现检查的同一个人`D2`，这又是无用的。

解决这个问题的一种方法是添加一个宏，但这只会产生纯粹的丑陋：

```
#define MAKE_DISPATCHABLE_BEGIN( DeRiVeD ) \
   class DeRiVeD : Base< DeRiVed > {
#define MAKE_DISPATCHABLE_END( DeRiVeD )
    }; \
    static_assert( is_base_of< Base< Derived >, Derived >::value, "Error" ); 
```

这只会变得丑陋，而且`static_assert`又是多余的，因为模板确保类型始终匹配。所以这里没有收获。

*   最佳选择：忘记所有这些并使用`dynamic_cast`明确用于此场景的内容。如果您更频繁地需要它，那么实现您自己的可能是有意义的`asserted_cast`（有一篇关于 Dr. Jobbs 的文章），它会在失败时自动触发失败的断言`dynamic_cast`。

# android - 哪种方法覆盖 ListView 中的视图以始终获得正确的大小

> ID：11224839
> 
> 赞同：1
> 
> 时间：2012-06-27T11:08:03.560
> 
> 标签：android, android-layout, android-listview

我应该重写哪种方法以保证始终获得正确的视图大小？我尝试了 onSizeChanged 和 onLayout 但在我看来，当视图在 listView 内回收时，这些方法并不总是被调用。

那么有没有更好的方法来通知当前视图大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:26:53.900

您可以覆盖 onMeasure 和 onLayout 方法。每当布局中发生某些事情（焦点更改，元素大小调整，等等）时，都会调用这些方法

# xslt - 将 Xalan 与 Saxon 一起使用

> ID：11224850
> 
> 赞同：8
> 
> 时间：2012-06-27T11:08:57.780
> 
> 标签：xslt, maven, xpath, saxon, xalan

我在我的应用程序中使用 Xalan，但需要使用 Saxon 和参考实现来生成测试输出以进行比较。我想在单元测试期间同时使用它们。但是，一旦我在项目 .pom 中添加对 Saxon 的依赖项，应用程序似乎在测试期间将 Saxon 用于所有 xslt 和 XPath 操作：

```
<dependency>
  <groupId>net.sf.saxon</groupId>
  <artifactId>Saxon-HE</artifactId>
  <version>9.4</version>
  <scope>test</scope>
</dependency> 
```

由于不同的 XPath 行为，这会导致主应用程序在生成输出时失败。在测试范围之外运行主应用程序时，它可以工作。

如何在测试期间使用 Xalan 运行主应用程序，但使用 Saxon 运行测试？

在运行 Xalan 和 Saxon 部件之前，我尝试设置以下属性：

```
System.setProperty("javax.xml.transform.TransformerFactory", "org.apache.xalan.processor.TransformerFactoryImpl ");
System.setProperty("javax.xml.transform.TransformerFactory", "net.sf.saxon.TransformerFactoryImpl"); 
```

我还尝试将 Xalan 和 Saxon 部分放在不同的项目中，我还尝试在第三个项目中使用它们，结果相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T13:59:43.107

避免依赖 JAXP 工厂机制来选择转换引擎。而是明确加载您想要的引擎：它更可靠，速度更快。对于撒克逊人，将调用替换为

```
TransformerFactory.newInstance() 
```

和

```
new net.sf.saxon.TransformerFactoryImpl() 
```

并供 Xalan 使用

```
new org.apache.xalan.processor.TransformerFactoryImpl() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:56:01.990

这是完整性的解决方案：

```
System.setProperty(XPathFactory.DEFAULT_PROPERTY_NAME + ":"
    + XPathFactory.DEFAULT_OBJECT_MODEL_URI,
    "org.apache.xpath.jaxp.XPathFactoryImpl");
System.setProperty(XPathFactory.DEFAULT_PROPERTY_NAME + ":"
    + NamespaceConstant.OBJECT_MODEL_SAXON,
    "net.sf.saxon.xpath.XPathFactoryImpl");

XPathFactory jaxpFactory =
    XPathFactory.newInstance(XPathFactory.DEFAULT_OBJECT_MODEL_URI);
XPathFactory saxonFactory =
    XPathFactory.newInstance(NamespaceConstant.OBJECT_MODEL_SAXON); 
```

# mysql - 在 Windows 中安装 perl DBI-mysql 的问题

> ID：11224854
> 
> 赞同：3
> 
> 时间：2012-06-27T11:09:08.127
> 
> 标签：mysql, database, perl, database-connection

我已经在我的 Windows 7-64 机器上下载并安装了**ActivePerl 。**一切都很顺利，并且还将`perl`解释器加载到我的`Eclipse`平台中。但是，当我尝试访问`localhost`MySQL 数据库时，出现以下错误：

```
$database = "<database>";
$host = "localhost";
$user = "<user>";
$password = "<password>";

#connect to MySQL database
my $db = DBI->connect(
            "DBI:mysql:database=$db:host=$host",
            $user,
            $password
    ) or die "Can't Connect to database: $DBI::errstr\n"; 
```

然后我收到以下错误：

```
 install_driver(mysql) failed: Can't locate DBD/mysql.pm in @INC (@INC contains: C:/Users/souzamor/workspace/.metadata/.plugins/org.epic.debug C:/Users/souzamor/workspace/Parser C:/Perl64/site/lib C:/Perl64/lib .) at (eval 3) line 3.
    Perhaps the DBD::mysql perl module hasn't been fully installed,
    or perhaps the capitalisation of 'mysql' isn't right.
    Available drivers: CSV, DBM, ExampleP, File, Gofer, ODBC, Oracle, Pg, Proxy, SQLite, 
Sponge.
     at C:/Users/souzamor/workspace/Parser/Parser.pl line 14. 
```

此外，当我尝试安装 DBD-Mysql 时，我得到：

```
C:\Perl64\bin>ppm install DBD-Mysql
ppm install failed: Can't find any package that provides DBD-Mysql 
```

我已经安装了`DBI`，`Data-Table`但是我无法安装`DBD-Mysql`。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:19:54.580

请参阅[DBD-mysql ppm 信息页面](http://code.activestate.com/ppm/DBD-mysql/)，[构建日志文件](http://ppm4.activestate.com/MSWin32-x64/5.16/1600/C/CA/CAPTTOFU/DBD-mysql-4.021.d/log-20120606T012249.txt)。

ActiveState 尝试在构建之前应用一些本地补丁，但它失败了。与他们联系以解决此问题。同时恢复到存在 PPM 包的 5.14，或者如果您知道如何在您自己的系统上手动构建 DBD-mysql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:43:36.130

如果您使用 Linux 机器，您可以使用包管理器安装包。我相信的包是**libdbd-mysql-perl**

如果这不起作用，您可以直接进入 CPAN 并使用命令**install DBD::mysql安装它**

这个链接有很多不同的选项，如果我上面提到的不起作用，你可以尝试

[http://cpansearch.perl.org/src/RUDY/DBD-mysql-2.9008/INSTALL.html](http://cpansearch.perl.org/src/RUDY/DBD-mysql-2.9008/INSTALL.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T08:53:54.357

您需要安装 DBD::mysql 模块。ActivePerl 带有 ppm 实用程序来安装模块。

即，从命令行运行此命令：引用
**ppm install DBD::mysql**

问候，三摩丹

# php - Amazon DynamoDB 和多对多关系

> ID：11224855
> 
> 赞同：5
> 
> 时间：2012-06-27T11:09:13.200
> 
> 标签：php, database, nosql, amazon

我有两个表，这些表之间的某些字段具有多对多关系。如何在 Amazon DynamoDB 中实现此功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T12:46:59.350

快速回答：在您的代码中或非规范化您的表（存储冗余数据）。

1.  非规范化；换句话说，将冗余数据存储在中央“连接”表中，这样您就可以通过查询该表来获得所需的所有信息。这可能是您最好的选择，但是您需要记住在更新左表或右表时更新中央表中的所有相关记录。这样做的代价是额外的数据存储，以及每次更新的额外编程麻烦。

2.  做三个查询；拉入连接的中央表，然后再拉入两个查询左右表。

另外两个混合选项：

1.  第三种选择是仅在一个表中进行非规范化。在您的左表上有一个存储连接数据的 serialized() 数组的列。所以你只需要拉入左表，你就已经拥有了从右表到的所有连接。如果您需要更新右表，请不要使用这种方法，因为您需要拉入所有左表，找到需要更新的位置，然后更新他的左表。讨厌 - 所以你可能会选择第四个选项......

2.  在左表中存储相关 id 的列表（以相同的序列化方式），因此您可以拉入左表，取消序列化 IDS 并知道从右侧拉出什么。这意味着两个查询，而不仅仅是三个。

哪一个适合你真的取决于程序，以及你是否只“添加”数据或进行大量编辑和删除。如果它们都不起作用，那么考虑使用关系数据库。

* * *

原因（对不起，如果你知道，但为了完整性而添加）。

DynamoDB 是一个 noSQL 数据库，专为非关系查询而设计。所以你不做 JOINS 和外键和级联等（是的，我在这里简化，但希望简而言之总结一下）。您在查询中提取数据并在代码中执行“JOIN”。外键和所有爵士乐都没有真正发挥作用。

如果你想要一个关系数据库，那么使用关系数据库。

直接引用亚马逊简介：

> 虽然 Amazon DynamoDB 解决了数据库可扩展性、管理、性能和可靠性等核心问题，但它不是关系数据库，不支持复杂的关系查询（例如连接）或复杂的事务。如果您的工作负载需要此功能，或者您正在寻找与现有关系引擎的兼容性，请尝试使用 Amazon Relational Database Service (RDS)。

# android - 在 andengine Android 中前进

> ID：11224857
> 
> 赞同：0
> 
> 时间：2012-06-27T11:09:23.300
> 
> 标签：android, andengine

我正在开发一个精灵必须向前跳跃的游戏。我已经探索过它并使用 MoveYModifier 向上，然后 MoveYModifier 再次向下，它工作正常，除了在屏幕上点击一次以上。但我想在跳跃时也让他向前移动。

```
 final Entity playerEntity = move;
                 final float jumpDuration = 3;
                final float startX = playerEntity.getX();
                final float jumpHeight = 100;

                final MoveXModifier moveUpModifier = new MoveXModifier(jumpDuration / 2, startX, startX - jumpHeight); // - since we want the sprite to go up.
                final MoveXModifier moveDownModifier = new MoveXModifier(jumpDuration / 2,startX - jumpHeight, startX);
                final SequenceEntityModifier modifier = new SequenceEntityModifier(moveUpModifier, moveDownModifier);

                playerEntity.registerEntityModifier(modifier);
                return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:20:43.703

为什么不使用 MoveXModifier 而不是只使用 MoveModifier？ [https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/entity/modifier/MoveModifier.java](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/entity/modifier/MoveModifier.java)

```
final MoveModifier jumpForward = new MoveModifier(pDuration, pFromX, pToX, pFromY, pToY); 
```

# backbone.js - 使用 requireJs 的 Backbone.RelationalModel

> ID：11224858
> 
> 赞同：0
> 
> 时间：2012-06-27T11:09:25.193
> 
> 标签：backbone.js, requirejs, backbone-relational

我想使用[`RelationalModel`](https://github.com/PaulUithol/Backbone-relational)using [`requireJs`](http://requirejs.org/)。

这是我的代码（*）

当我运行我的模块时，我收到以下警告消息：

```
Relation=d; 
no model, key or relatedModel (function (){a.apply(this,arguments)}, 
"tasks", 
undefined). 
```

我的问题是：

1）警告信息是什么意思？
2）`relatedModel`并且在我的或我应该导出和调用中`collectionType`明确定义？`relations``model``collection``define`

* * *

(*)

```
define([
    'backbone',
    'relationalModel'
], function (Backbone) {
    "use strict";

    var User = Backbone.RelationalModel.extend({

        relations: [{
            type: Backbone.HasMany,
            key: 'tasks',
            relatedModel: 'Task',
            collectionType: 'TaskCollection',
            reverseRelation: {
                key: 'hasUser',
                includeInJSON: 'id'
                // 'relatedModel' is automatically set to 'User'; the 'relationType' to 'HasOne'.
            }
        }]

    });

    return User;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:16:34.567

看这个问题：[用主干JS +主干关系+ requireJS创建嵌套模型](https://stackoverflow.com/questions/9962695/creating-nested-models-with-backbonejs-backbone-relational-requirejs)

顺便说一句，`exports.ModuleModel = ModuleModel;`对我不起作用。相反，我使用`window.ModuleModel = ModuleModel`. 是的，它有点难看，但它有效。

# c# - 正则表达式 - 无法获得基础知识

> ID：11224862
> 
> 赞同：2
> 
> 时间：2012-06-27T11:09:51.133
> 
> 标签：c#, regex

我对正则表达式很陌生，所以我为这个问题的“noobyness”道歉......我需要为我们在工作中使用的 ID 匹配一个模式。

到目前为止，该模式的唯一规范是它的长度为 9 个字符，并且由大写字母和数字组成。ID 可以包含 1 个或任意数量的大写字母或数字，只要字符串的总长度为 9 个字符。

到目前为止，我有以下... [AZ][0-9]{9} 这并不能确保字符串至少有一个字母或数字（因此 9 个字符长的字符串会通过）... Alos，我确定它匹配一个由非大写字母组成的 9 个字母的单词。

我已经做了一些谷歌搜索，但我没有发现任何足以让我理解的东西。

非常感谢任何帮助:)

谢谢

编辑：只是回顾一下要求 - id 必须是 9 个字符长，不多不少。它将由大写字母和数字组成。可以有任意数量的字母或数字，只要 id 包含至少一个（因此 BH98T6YUO 或 R3DBLUEEE 或 1234R6789

我还将发布我的代码以确保位没有错... ??

```
 string myRegex = "A ton of different combinations that i have tried";
 Regex re = new Regex(myRegex);

        // stringCombos is a List<string> containing all my strings
        // The strings contain within them, my id
        // I am attempting to pull out this id 
        // the below is just to print out all found matches for each string in the list 
        foreach (string s in stringCombos)
        {
            MatchCollection mc = re.Matches(s);
            Console.WriteLine("-------------------------");
            Console.Write(s);
            Console.WriteLine("  ---  was split into the following:");
            foreach (Match mt in mc)
            {
                Console.WriteLine(mt.ToString());
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:18:32.680

您实际上必须学习正则表达式作为一种语言。曲线有点陡峭，但有大量优秀的基础教程。此外，您可能会在聊天情况下*得到*这个（SO 有聊天功能）——这就是我最初学习它们的方式......

我认为这可能适用于您的情况：

```
[A-Z0-9]{1,9} 
```

根据您的更新，对于 9 个元素，请使用：

```
[A-Z0-9]{9} 
```

但请注意，在此解决方案中并未表达包含至少一个字母和至少一个数字的要求。一种简单的方法是对第一个匹配应用第二个和第三个匹配：

```
[0-9]*[A-Z][0-9]*
[A-Z]*[0-9][A-Z]* 
```

从而匹配三遍。您可能可以使用花哨的前向和后向引用来获得此结果，但您无法使用[常规语法](http://en.wikipedia.org/wiki/Regular_grammar)真正捕获该要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:23:48.840

You need to match the start and then end of the string using ^ and $, this means that it will match 9 characters and not 10

```
^[0-9A-Z]$ 
```

You aren't exact clear on the requirements the above match will match 9 characters either capital or numeric.

You may find [Expresso](http://www.ultrapico.com/Expresso.htm) useful for trying out your expressions.

EDIT (With new requirements) if you are requiring a minimum of 1 Uppercase character you could use the following.

```
\b[0-9A-Z]{8}(?:(?<=.*[A-Z].*)[0-9]|(?<=.*[0-9].*)[A-Z])\b 
```

Breakdown

`\b` Match a word boundry

`[0-9A-Z]{8}` 8 Chars that are either uppercase or numbers

`(?:` Begins a non capturing group, this is to enclose the or condition

`(?<=.*[A-Z].*)[0-9]` This basically matches [0-9] aslong as there is an A-Z somewhere before it in the first `[0-9A-Z]{8}` capture

`|` OR

`(?<=.*[0-9].*)[A-Z]` This basically matches [A-Z] aslong as there is an 0-9 somewhere before it in the first `[0-9A-Z]{8}` capture

`)` close non capturing group

`\b` match a word boundry

Basically do a match on the first 8 chars and then if the 9th char is a digit then there has to be an uppercase in the first 8, if the 9th is an A-Z then there has to be a digit in the first 8

The new edited version will now find ID's that appear within the string rather than requiring the string exactly match them.

# css - 将 Vegur 转换为用于 font-face

> ID：11224863
> 
> 赞同：0
> 
> 时间：2012-06-27T11:09:51.857
> 
> 标签：css, font-face

我需要为网站使用otf 格式的[Vegur](http://www.fontspace.com/arro/vegur)字体。但是，当我尝试使用字体松鼠或任何其他类似的字体生成器（例如[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)）转换它时，字体会立即失去所有平滑度和质量......

有人知道我在哪里可以获得字体的预转换版本吗？或者我还能用什么来转换字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:18:35.413

您是否使用 html 字符而不是您链接到的页面（有图像）检查了此页面？

[http://www.fontspace.com/arro/vegur/22551.charmap](http://www.fontspace.com/arro/vegur/22551.charmap)

我的操作系统是 windowsXP（目前使用 Chrome），众所周知，XP 渲染非默认字体，质量很差，没有平滑度。在您链接到的页面上，字体看起来不错且流畅，因为只是一个图像，而当我检查上面的链接时，所有字符都呈现不佳......你的操作系统是什么？

# image - 用强调色替换图像中的白色

> ID：11224870
> 
> 赞同：2
> 
> 时间：2012-06-27T11:10:20.150
> 
> 标签：image, windows-phone-7

> **可能重复：**
> [如何使用表情设计将 Windows Phone 系统颜色添加到图标？](https://stackoverflow.com/questions/11199751/how-do-i-add-windows-phone-system-colors-to-icon-using-expression-design)

我想知道是否有任何方法可以获取 PNG 文件（白色和透明）并将其中的白色替换为重音（或其他）颜色？

提前谢谢了！

能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:47:15.093

两天前我回答了这个确切的问题：

这是我之前使用过的一篇很棒的博客文章，它逐步将系统主题应用到图像中（应该是白色的......但它会进入细节！）

[使用图像作为掩码，以便 WP7 主题得到尊重](http://advertboy.wordpress.com/2010/09/25/using-an-image-as-a-mask-so-that-wp7-themes-are-honoured/)

例如，以下是使用 Rectangle 和 OpacityMask 的方法：

```
<Rectangle Fill="Black" Height="48" Width="48">
            <Rectangle.OpacityMask>
                <ImageBrush ImageSource="/MyProject;comåponent/Images/Dark/appbar.add.rest.png" />
            </Rectangle.OpacityMask>
        </Rectangle> 
```

请注意，`Height`&`Width`明确设置为 my的`Width`& 。这解决了如果您不这样做会发生的拉伸问题。`Height``ImageSource`

# java - 自 java 1.4.2 以来学习 Java 新特性的最佳方式是什么

> ID：11224873
> 
> 赞同：-3
> 
> 时间：2012-06-27T11:10:23.423
> 
> 标签：java

我最近开始使用 Java 工作，但我主要是利用我对 Java 1.4 的早期知识来做这件事。我知道有很多新的 Java 特性（我知道一些，但不够全面）。学习这些新功能最有效的方法是什么，而不是阅读那些我已经知道的大量内容的基础书籍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:12:47.750

检查[Java 1.5](http://docs.oracle.com/javase/1.5.0/docs/relnotes/features.html)、[Java 1.6](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javase6/beta2.html)和[Java 1.7中的新功能](http://docs.oracle.com/javase/7/docs/)

# php - 使用 jQuery (ajax) 和 PHP 插入我的数据库

> ID：11224874
> 
> 赞同：4
> 
> 时间：2012-06-27T11:10:23.723
> 
> 标签：php, jquery, sql, ajax, insert

我正在尝试在我的表中插入一些数据：golden-book。一切都很好，我没有任何错误，答案很好，但我的表中没有数据插入。

我不知道这段代码有什么问题，也许你能帮助我？

我在 Golden-book.js 中的 ajax 请求

```
function insert_messages(auteur_message,message){
$.ajax({    

    type : "POST",
    cache: false,  
    url : "insert-messages.php",
    data:{
        auteur_message:auteur_message,
        message:message
    },
    success: function() {   
    },
    error : function() {//en cas de problème de requete AJAX
        alert("Sorry, The requested property could not be found.");//affichage d'un mesage d'erreur
    }
});
} 
```

插入-messages.php

```
<?php

$auteur_message = $_POST['auteur_message'];
$message = $_POST['message'];
try {
// On se connecte à MySQL
$bdd = new PDO('mysql:host=localhost;dbname=photo', 'root', '');
} catch (Exception $e) {
// En cas d'erreur, on affiche un message et on arrête tout
die('Erreur : ' . $e->getMessage());
}

$req = $bdd->prepare('INSERT INTO photo.golden_book (auteur-message , message) VALUES (:auteur , :message)'); 
$req->execute(array(
'auteur' => $auteur_message,
'message' => $message));
?> 
```

提前感谢大家花时间帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T11:13:43.393

`auteur-message`是无效的字段名称。MySQL 会将其解释为`auteur MINUS message`. 请参阅：[http](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html) ://dev.mysql.com/doc/refman/5.0/en/identifiers.html 。对尚不存在的字段进行数学运算也是没有意义的——不能减去尚未插入的内容。

您可以尝试用反引号引用它：

```
... .gold_book(`auteur-message`, ... 
```

但实际上，您应该重命名该字段。逃避是一种黑客行为。

# android - 找不到类“com.google.gdata.client.calendar.CalendarService”

> ID：11224876
> 
> 赞同：0
> 
> 时间：2012-06-27T11:10:25.203
> 
> 标签：android

我正在尝试使用此类中的 CalenderService，但它在运行时给我“找不到类 'com.google.gdata.client.calendar.CalendarService'”错误，我已经导入了 gdata.client 库。已在 android 版本 2.0 和 4.0 上进行了测试，但仍然出现此错误。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:25:12.367

I guess you need to add support library so to do that, just Right click on your project from Project Explorer goto Android Tools -> Add Support Library. And clean your project after adding the libraries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:19:55.727

听起来您可能没有导出库。在 Project Properties 窗口中，Java Build Path 部分 - 确保在 Order / Export 选项卡上选中该库。

# c# - 如何保存对显示数据表单 2 连接表的 WPF 数据网格的更改？

> ID：11224879
> 
> 赞同：0
> 
> 时间：2012-06-27T11:10:31.467
> 
> 标签：c#, .net, wpf, wpfdatagrid, datagridcomboboxcolumn

我有 2 张桌子：

```
Person:
    p_id  
    p_name  
    c_id  
Car:  
    c_id  
    c_name 
```

这是我的 XAML 标记：

```
<DataGrid Name="dataGrid1" 
          ItemsSource="{Binding Path=myPath}" 
          AutoGenerateColumns="True" /> 
```

这是C#：

```
a = new SqlDataAdapter("SELECT p.p_name AS Person, c.c_name AS Car FROM Person AS p, Car AS c WHERE p.c_id = c.c_id", c);
d = new DataSet();
a.Fill(d, "myPath");
dataGrid.DataContext = d; 
```

当然我可以查看，但我不能编辑数据。我希望通过一些“魔术”，我可以将 Car-TextColumn 变成`ComboBox`带有表中项目列表的`Car`列表。

抱歉，如果有人问这个问题，这是我第一次尝试 C# 和 WPF，不知道要搜索什么关键字！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:45:05.070

似乎您需要为此使用`DataTemplates`。您可以挂钩`AutoGeneratingColumn`并在那里提供您的逻辑。此外，您可能必须单独加载`Cars`以显示它们，`ComboBox`因为在执行查询后可能不会加载所有可能的汽车。
我强烈建议看看`MVVM`模式。

* * *

有几个类似的问题可能会对您有所帮助：

*   [使用 TemplateColumns 将 WPF DataGrid 绑定到 DataTable](https://stackoverflow.com/questions/2677446/binding-wpf-datagrid-to-datatable-using-templatecolumns)
*   [如何将数据集中的表绑定到 C# 和 XAML 中的 WPF 数据网格](https://stackoverflow.com/questions/2511177/how-to-bind-a-table-in-a-dataset-to-a-wpf-datagrid-in-c-sharp-and-xaml)
*   [WPF DataGrid 实例](http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:56:56.137

您可以处理该`AutoGeneratingColumn`事件并添加`DataGridComboBoxColumn`这样的 -

```
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
  if (e.PropertyName == "CustomerID")
  {
    DataGridComboBoxColumn column = new DataGridComboBoxColumn();

    column.DataFieldBinding = new Binding("CustomerID");

    column.DataFieldTarget = ComboBoxDataFieldTarget.SelectedValue;

    column.ItemsSource = DBAccess.GetCustomers().Tables["Customers"].DefaultView;

    column.EditingElementStyle = (Style)this.RootGrid.FindResource("CustomerFKStyle");

    e.Column = column;
  }
} 
```

有关详细信息和示例，请参阅本文 - [WPF DataGrid：使用 DataGridComboBoxColumn CTP](http://blogs.msdn.com/b/vinsibal/archive/2008/08/26/wpf-datagrid-working-with-datagridcomboboxcolumn.aspx)

# javascript - gmap3 在信息窗口中显示地址

> ID：11224883
> 
> 赞同：2
> 
> 时间：2012-06-27T11:10:48.457
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我的地图标记上有一个点击事件来创建一个信息窗口，我正在尝试对地址进行地理编码以显示在信息窗口内。

```
 click: function(marker) {
                pantoUser(lati,longi,i);
                addInfoWindow(lati,longi,name,datestring);
            } 
```

我几乎让它像这样工作：

```
function addInfoWindow(lati,longi,name,datestring)
{
 // get address  
getAddress(lati,longi);

 // create infowindow
$('#dispatcher').gmap3(
  { action: 'addInfoWindow',
    latLng: [lati, longi],
    infowindow:{
      options:{
        content: name
      },
      events:{
        closeclick: function(infowindow, event){
          //alert('closing : ' + $(this).attr('id') + ' : ' + infowindow.getContent());
        }
      },
      apply:[
        { action:'setContent', 
          args:[
          '<span class="infowindow">' + name + '<br />' + content + '<br />' + datestring + '<span>'
          ]
        }
      ]
    }
  }
); 
```

}

然后是获取地址部分：

```
 function getAddress(lati,longi)
{
    $("#dispatcher").gmap3({
             action:'getAddress',
             latLng: [lati, longi],
             callback:function(results){
             content = results && results[1] ? results && results[1].formatted_address : 'No Address';
         return content;
                }

       });
} 
```

问题是地理编码地址总是一个标记点​​击后面。例如，我可能会单击伦敦的一个标记，但没有任何反应。所以我再次点击它，我得到了带有地址的信息窗口。然后我点击曼彻斯特的一个标记，我仍然看到伦敦地址，然后我点击利物浦的一个标记，我得到曼彻斯特地址。等等。

任何人都可以发现错误吗？

**来自 SEAN 的更新工作解决方案** 在回调中添加了信息窗口代码

```
function addInfoWindow(lati,longi,name,datestring)
{
// get address
$("#dispatcher").gmap3({
     action:'getAddress',
     latLng: [lati, longi],
     callback:function(results){
     content = results && results[1] ? results && results[1].formatted_address : 'No Address';

// create infowindow       
$('#dispatcher').gmap3(
  { action: 'addInfoWindow',
    latLng: [lati, longi],
    infowindow:{
      options:{
        content: name
      },
      events:{
        closeclick: function(infowindow, event){
          //alert('closing : ' + $(this).attr('id') + ' : ' + infowindow.getContent());
        }
      },
      apply:[
        { action:'setContent', 
          args:[
          '<span class="infowindow">' + name + '<br />' + content + '<br />' + datestring + '<span>'
          ]
        }
      ]
    }
  }
);

    } // end callback

 }); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:12:18.520

这看起来不像标准的 Google Maps JavaScript v3 代码；是对`gmap3`jQuery 的引用吗？此外，某些东西似乎没有挂在一起 -`getAddress`函数返回`content`，但`addInfoWindow`函数中的代码似乎没有使用该值。

但听起来你的问题的根源可能在于函数`callback`内的代码方面`getAddress`；当在该调用之后的代码运行时，您无法确定回调是否已完成`addInfoWindow`。听起来可能会发生以下情况：

1.  `addInfoWindow`函数被调用
2.  从函数内部`addInfoWindow`调用`getAddress`
3.  `getAddress`快速运行并完成，将控制权返回给`addInfoWindow`函数，但回调尚未运行
4.  代码第一次运行时，`content`还没有构建（因为回调还没有运行），所以什么都没有显示
5.  `addInfoWindow`函数返回后，`getAddress`回调运行，因为收到了响应，这建立了`content`
6.  `addInfoWindow`再次调用，以相同的方式运行，但这次它使用上次回调后设置的内容，因此它使用的`content`是上一次运行的
7.  场景只是重复，重复，重复

您的问题有一些令人困惑的部分，如果无法添加对代码的调用或查看代码运行，这有点难以确定`alert`，但听起来您的代码很可能遵循我上面描述的步骤或非常类似的步骤.

如果这听起来适合您的问题，最直接的解决方法是将`InfoWindow`显示代码与回调代码一起放入。这样，您就知道内容已经设置好了，因为回调会在响应返回时运行。

# java - 如何让多个线程绘制到 AWT 组件上？

> ID：11224886
> 
> 赞同：2
> 
> 时间：2012-06-27T11:10:50.037
> 
> 标签：java, multithreading, graphics, paint, mandelbrot

编辑：已解决，请在下面查找我的解决方案。

首先，这是我在这里的第一个问题，所以如果我犯了任何错误，请告诉我。

我正在尝试用 Java 编写一个 Mandelbrot 分形程序，用于培训目的。我想要的所有功能的理想选择是 Fractalizer ( [http://www.fractalizer.de/en/](http://www.fractalizer.de/en/) )，但现在，我会对在屏幕上绘制 Mandelbrot 集的程序感到满意（而不是，例如，将其写入图像文件）。当然，我希望程序快，所以我想我可以将计算分成多个线程来利用我的多核处理器；例如，在四核系统上，图像将被分成 2x2=4 个图像，每个图像由一个单独的线程计算。所有这些线程都得到一个 Graphics 对象，它们在计算像素时在该对象上绘制像素。

我的第一次尝试是让线程在 BufferedImage.getGraphics() 上绘制，并让 paint() 方法不断调用 repaint()，只要图像没有完成：

```
g.drawImage(tempImg, 0, 0, null);
if (waiterThread.isAlive())
{
    try
    {
        Thread.sleep(10);
    } catch (InterruptedException e)
    {
        // do nothing
    }
    repaint(10);
} 
```

（waiterThread一个接一个地加入所有计算线程，所以只要waiterThread还活着，至少还有一个计算线程还没有结束。）

这可行，但由于频繁重新绘制，会导致画布上出现难看的闪烁。

然后，通过一个小测试程序，我发现 Graphics.draw*anything* 在paint方法返回之前立即在屏幕上绘制，所以我目前的方法如下：

*   一个具有 GridLayout 的面板，其中包含 2x2（在 <4 核系统上，1x1）MandelbrotCanvas 对象
*   每个 MandelbrotCanvas 对象将在第一次 paint() 调用中初始化一个计算线程，将它自己的 Graphics 对象传递给它（实际上，我正在使用一个自定义 GroupGraphics 类，它将一个 Graphics 调用传递给几个图形，以“备份”图像到 BufferedImage.getGraphics()，但这并不重要），并启动计算线程。
*   面板将在其paint() 方法中从每个MandelbrotCanvases 中获取计算线程并加入() 它们。

不幸的是，这只会产生黑屏。只有当计算完成时，才会显示图像。

将多个线程绘制到一个组件上的正确方法是什么？

编辑：

我不知道的是：只允许事件调度线程在 AWT 组件上绘制（粗略地说），这意味着上面的最后一种方法不可能工作 - 显然，它应该抛出异常，但我没有没有得到一个。我的解决方案是使用第一种方法 - 将图像绘制到 BufferedImage 上并将其绘制到 Canvas 上 - 唯一的修改是我重载 update() 方法以调用 paint() 方法*而不清除绘画区域*：

```
public void update(Graphics g)
{
    paint(g);
} 
```

所以我想我对一般问题（“如何让多个线程在 AWT 组件上绘制？”）的回答是：你不能，这是不允许的。让线程绘制到 BufferedImage.getGraphics() 上，并重复绘制该图像。像上面那样重载 update() 方法以避免闪烁。（现在看起来真的很棒。）在我的情况下我不能使用的另一个技巧，但仍然很好，是 repaint() 的一个变体，它接受矩形参数来指定必须重绘的区域，并且一个需要时间参数（以毫秒为单位）的变体，因此不必立即进行重绘。

EDIT2：此链接提供了非常有用的信息：http: [//java.sun.com/products/jfc/tsc/articles/painting/index.html](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:16:35.913

只有 GUI 线程可以直接在您的组件上绘制。

所以你必须调用重绘方法。

当您有后台计算时，为了强制快速绘图，您应该使用[以时间为参数的版本](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#repaint%28long%29)。

[来自这里](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)的一些细节：

> 注意：如果在处理初始重绘请求之前在一个组件上多次调用 repaint()，则多个请求可能会合并为对 update() 的单个调用。确定何时应该折叠多个请求的算法取决于实现。如果折叠多个请求，则生成的更新矩形将等于折叠请求中包含的矩形的并集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:25:12.070

You have to send requests to the EDT.

```
 EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            Rectangle r = myCurrentWorkingThread.getFinishedRectangle();
            myPainter.repaint(r);
        }
    }); 
```

The idea is that you won't repaint pixel by pixel, rather giving larger chunks to the worker-threads. As soon as they're finished with a unit of work, they notify the main object (myPainter) that would do the actual work. This construct (EventQueue.invokeLater) will guarantee that it will be on the Event Dispatcher Thread.

# asp.net-mvc - HttpResponseException 和 HttpException 有什么区别

> ID：11224890
> 
> 赞同：16
> 
> 时间：2012-06-27T11:11:08.080
> 
> 标签：asp.net-mvc

来自[http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)

> HttpResponseException
> 
> 如果 Web API 控制器抛出异常会发生什么？默认情况下，大多数异常都会转换为状态代码为 500（内部服务器错误）的 HTTP 响应。
> 
> HttpResponseException 类型是一种特殊情况。此异常返回您在异常的构造函数中指定的任何 HTTP 状态代码。

除了它**没有**。Fiddler 向我展示了 500 的返回值。

但是， HttpException 似乎做了那篇文章所说的。

文档是错误的还是我遗漏了什么？

**更新**

在打字的时候，我有了一个想法。我尝试了两个控制器，一个 ApiController 和一个标准 MVC 控制器。

这两个异常根据抛出它们的控制器类型相互反向工作。

*   使用 HttpResponseException 从 API 控制器返回正确的 HTTP 代码。
*   使用 HttpException 从 MVC 控制器返回正确的 HTTP 代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T11:02:31.010

[Moved my update to an answer]

While typing that out, I had an idea. I tried both from two controllers, an ApiController and a standard MVC controller.

The two exception work in reverse to each other depending on the type of controller they're thrown from.

*   Use HttpResponseException to return a proper HTTP code from an API controller.
*   Use HttpException to return a proper HTTP code from an MVC controller.

# twitter-bootstrap - 你如何在 Twitter Bootstrap 的 popover 插件中禁用标题？

> ID：11224892
> 
> 赞同：24
> 
> 时间：2012-06-27T11:11:16.817
> 
> 标签：twitter-bootstrap, popover, twitter-bootstrap-2

我正在使用弹出框来显示不需要标题的图像。如果您不设置“标题”，它仍然会显示标题所在的区域。你如何完全关闭它？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-27T12:30:17.360

baptme 的建议没问题，但更好的方法是指定弹出框的标题并实际上完全隐藏它，因为边距仍然存在，高度为 0。

```
.popover-title { display: none; } 
```

编辑：只是快速查看了源代码，似乎有一个未记录的选项：

```
$.fn.popover.defaults = $.extend({} , $.fn.tooltip.defaults, {
    placement: 'right'
  , content: ''
  , template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
  }) 
```

当您使用 JS 声明弹出框时，请尝试覆盖模板并指定隐藏标题。

```
$('#example').popover({
    template: '...<h3 class="popover-title" style="display: none"></h3>...'
}); 
```

~~我说不要删除它的原因是如果元素不存在，它可能会导致运行时错误。~~ 见舍布罗的评论。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-16T14:19:13.023

在 Bootstrap 2.3+ 中，如果为空，标题会自动隐藏。

[http://blog.getbootstrap.com/2013/02/07/bootstrap-2-3-released/](http://blog.getbootstrap.com/2013/02/07/bootstrap-2-3-released/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T11:16:48.627

我最终使用了@Terry 和@Sherbow 建议的技术组合。显示图像，但不显示标题（仅限此弹出窗口）。

```
<a href="#" id="contributors" rel="popover">contributors</a>

...

<script>
var contributor_img = '<img src="my_img/contributor.png" />'

$(function ()
{ $('#contributors').popover({ 
    content: contributor_img, 
    template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>' });
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T12:22:47.477

简单的方法是`height:0px`在课堂上设置`.popover-title`而不使用`data-original-title`

**CSS：**

```
.popover-title { height: 0px;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T14:16:18.153

您还可以编写一个函数来删除元素：

```
function removeTitle(){
  $('.popover-title').remove();
}

$("a[data-toggle=popover]")
  .popover({
     html: true,
     animation: true
})
.click(function(e) {
  removeTitle();
  e.preventDefault()
}) 
```

# php - 为字符串中的数字添加引号

> ID：11224896
> 
> 赞同：0
> 
> 时间：2012-06-27T11:11:27.933
> 
> 标签：php, regex, replace

我有以下**几乎**JSON 字符串：

```
<?php
$string = '{0:{"id":1,"name":"Antiek en Kunst","subs":[{"id":2,"name":"Antiek | Bestek"},{"id":3,"name":"Antiek | Boeken en Bijbels"},{"id":1100,"name":"Antiek | Emaille"},{"id":1501,"name":"Antiek | Gereedschap en Instrumenten"},{"id":1648,"name":"Antiek | Glas en Kristal"},{"id":2614,"name":"Antiek | Goud en Zilver"},{"id":2661,"name":"Antiek | Kandelaars"},{"id":1841,"name":"Antiek | Kantoor en Zakelijk"},{"id":1502,"name":"Antiek | Keramiek en Aardewerk"},{"id":1842,"name":"Antiek | Keukenbenodigdheden"},{"id":2118,"name":"Antiek | Kleden en Textiel"},{"id":1503,"name":"Antiek | Kleding en Accessoires"},{"id":6,"name":"Antiek | Klokken"},{"id":1647,"name":"Antiek | Koper en Brons"},{"id":7,"name":"Antiek | Lampen"},{"id":1504,"name":"Antiek | Meubels | Bedden"},{"id":5,"name":"Antiek | Meubels | Kasten"},{"id":1505,"name":"Antiek | Meubels | Stoelen en Banken"},{"id":1506,"name":"Antiek | Meubels | Tafels"},{"id":1101,"name":"Antiek | Naaimachines"},{"id":10,"name":"Antiek | Porselein"},{"id":1102,"name":"Antiek | Religie"},{"id":1103,"name":"Antiek | Schalen"},{"id":2662,"name":"Antiek | Schoolplaten"},{"id":1843,"name":"Antiek | Servies compleet"},{"id":12,"name":"Antiek | Servies los"},{"id":1507,"name":"Antiek | Speelgoed"},{"id":2663,"name":"Antiek | Spiegels"},{"id":2664,"name":"Antiek | Tin"},{"id":11,"name":"Antiek | Tv's en Audio"},{"id":14,"name":"Antiek | Vazen"},{"id":1104,"name":"Antiek | Wandborden en Tegels"},{"id":1500,"name":"Antiek | Woonaccessoires"},{"id":9,"name":"Antiek | Overige"},{"id":15,"name":"Curiosa en Brocante"},{"id":1423,"name":"Diensten | Kunstenaars en Portretschilders"},{"id":2610,"name":"Diensten | Reparatie en Onderhoud"},{"id":23,"name":"Kunst | Beelden en Houtsnijwerken"},{"id":1508,"name":"Kunst | Designobjecten"},{"id":1105,"name":"Kunst | Etsen en Gravures"},{"id":27,"name":"Kunst | Litho's en Zeefdrukken"},{"id":1844,"name":"Kunst | Niet-Westerse kunst"},{"id":1846,"name":"Kunst | Schilderijen | Abstract"},{"id":25,"name":"Kunst | Schilderijen | Klassiek"},{"id":1845,"name":"Kunst | Schilderijen | Modern"},{"id":26,"name":"Kunst | Tekeningen en Foto's"},{"id":24,"name":"Kunst | Overige"}]},1:{"id":31,"name":"Audio, Tv en Foto","subs":[{"id":2035,"name":"Accu's en Batterijen"},{"id":2617,"name":"Afstandsbedieningen"},{"id":32,"name":"Bandrecorders"},{"id":1132,"name":"Beamers"},{"id":2665,"name":"Blu-ray-spelers en Blu-ray-recorders"},{"id":33,"name":"Buizenversterkers"},{"id":2036,"name":"Cassettedecks"},{"id":35,"name":"Cd-spelers"},{"id":2666,"name":"Diaprojectors"},{"id":2042,"name":"Diensten | Film- en Videobewerking"},{"id":1199,"name":"Diensten | Fotografen"},{"id":1219,"name":"Diensten | Reparaties"},{"id":1114,"name":"Dvd-spelers en Dvd-recorders"},{"id":1115,"name":"Films 8mm, 16mm en 35mm"},{"id":1360,"name":"Fotografie | Accu's en Batterijen"},{"id":480,"name":"Fotografie | Camera's | Analoog"},{"id":487,"name":"Fotografie | Camera's | Digitaal"},{"id":2667,"name":"Fotografie | Digitale fotolijstjes"},{"id":488,"name":"Fotografie | Doka Toebehoren"},{"id":1720,"name":"Fotografie | Filters"},{"id":489,"name":"Fotografie | Flitsers"},{"id":1483,"name":"Fotografie | Fotolijsten en Fotoalbums"},{"id":1721,"name":"Fotografie | Fotoprinters en Fotopapier"},{"id":1400,"name":"Fotografie | Fotostudio en Toebehoren"},{"id":1484,"name":"Fotografie | Fototassen"},{"id":493,"name":"Fotografie | Geheugenkaarten"},{"id":495,"name":"Fotografie | Lenzen en Objectieven"},{"id":497,"name":"Fotografie | Onderwatercamera's"},{"id":501,"name":"Fotografie | Professionele apparatuur"},{"id":500,"name":"Fotografie | Statieven en Balhoofden"},{"id":1722,"name":"Harddiskrecorders"},{"id":1116,"name":"Home Cinema-sets"},{"id":1106,"name":"Kabels"},{"id":37,"name":"Koptelefoons en Headsets"},{"id":38,"name":"Luidsprekers"},{"id":2668,"name":"Mediaspelers"},{"id":40,"name":"Mp3-spelers | Apple iPod"},{"id":1649,"name":"Mp3-spelers | Overige merken"},{"id":1723,"name":"Mp3-spelers | Accessoires | Apple iPod"},{"id":1452,"name":"Mp3-spelers | Accessoires | Overige merken"},{"id":2615,"name":"Mp4-spelers"},{"id":1724,"name":"Opladers"},{"id":496,"name":"Optische apparatuur | Microscopen"},{"id":502,"name":"Optische apparatuur | Telescopen"},{"id":503,"name":"Optische apparatuur | Verrekijkers"},{"id":42,"name":"Platenspelers en Pick-ups"},{"id":1117,"name":"Professionele Audio-, Tv- en Video-apparatuur"},{"id":43,"name":"Radio's"},{"id":36,"name":"Stereo-sets"},{"id":45,"name":"Tuners"},{"id":1118,"name":"Tv-decoders en Schotelantennes"},{"id":1120,"name":"Tv's | Plasma, Lcd en Led"},{"id":1121,"name":"Tv's | Overige Tv's"},{"id":1453,"name":"Tv's | Accessoires"},{"id":46,"name":"Versterkers en Receivers"},{"id":1129,"name":"Videobewakingsapparatuur"},{"id":1130,"name":"Videocamera's | Analoog"},{"id":1131,"name":"Videocamera's | Digitaal"},{"id":1133,"name":"Videospelers en Videorecorders"},{"id":47,"name":"Walkmans, Discmans en Minidiscspelers"},{"id":1725,"name":"Weerstations en Barometers"},{"id":41,"name":"Overige Audio, Tv en Foto"}]}}';

?> 
```

我需要将所有整数转换为字符串，这可以通过向它们添加双引号 ( `"`) 来完成。但是，该怎么做呢？它不需要特定于 PHP，notepad++ 能够使用正则表达式进行搜索和替换，但我不确定这是否是正确的方法。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:31:21.387

```
$result = preg_replace('/(?<=[{:,])\d+(?=[:,])/', '"\\0"', $string); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T11:28:32.720

虽然将整数转换为字符串是错误的做法（在 JSON 中数字不应该用引号引起来），但从技术上讲，您正在寻找的是：

```
$string = '{0:{"id":1,"name":"Antiek en Kunst","subs":[{"id":2,"name":"Antiek | Bestek"},{"id":3,"name":"Antiek | Boeken en Bijbels"},{"id":1100,"name":"Antiek | Emaille"},{"id":1501,"name":"Antiek | Gereedschap en Instrumenten"},{"id":1648,"name":"Antiek | Glas en Kristal"},{"id":2614,"name":"Antiek | Goud en Zilver"},{"id":2661,"name":"Antiek | Kandelaars"},{"id":1841,"name":"Antiek | Kantoor en Zakelijk"},{"id":1502,"name":"Antiek | Keramiek en Aardewerk"},{"id":1842,"name":"Antiek | Keukenbenodigdheden"},{"id":2118,"name":"Antiek | Kleden en Textiel"},{"id":1503,"name":"Antiek | Kleding en Accessoires"},{"id":6,"name":"Antiek | Klokken"},{"id":1647,"name":"Antiek | Koper en Brons"},{"id":7,"name":"Antiek | Lampen"},{"id":1504,"name":"Antiek | Meubels | Bedden"},{"id":5,"name":"Antiek | Meubels | Kasten"},{"id":1505,"name":"Antiek | Meubels | Stoelen en Banken"},{"id":1506,"name":"Antiek | Meubels | Tafels"},{"id":1101,"name":"Antiek | Naaimachines"},{"id":10,"name":"Antiek | Porselein"},{"id":1102,"name":"Antiek | Religie"},{"id":1103,"name":"Antiek | Schalen"},{"id":2662,"name":"Antiek | Schoolplaten"},{"id":1843,"name":"Antiek | Servies compleet"},{"id":12,"name":"Antiek | Servies los"},{"id":1507,"name":"Antiek | Speelgoed"},{"id":2663,"name":"Antiek | Spiegels"},{"id":2664,"name":"Antiek | Tin"},{"id":11,"name":"Antiek | Tv's en Audio"},{"id":14,"name":"Antiek | Vazen"},{"id":1104,"name":"Antiek | Wandborden en Tegels"},{"id":1500,"name":"Antiek | Woonaccessoires"},{"id":9,"name":"Antiek | Overige"},{"id":15,"name":"Curiosa en Brocante"},{"id":1423,"name":"Diensten | Kunstenaars en Portretschilders"},{"id":2610,"name":"Diensten | Reparatie en Onderhoud"},{"id":23,"name":"Kunst | Beelden en Houtsnijwerken"},{"id":1508,"name":"Kunst | Designobjecten"},{"id":1105,"name":"Kunst | Etsen en Gravures"},{"id":27,"name":"Kunst | Litho's en Zeefdrukken"},{"id":1844,"name":"Kunst | Niet-Westerse kunst"},{"id":1846,"name":"Kunst | Schilderijen | Abstract"},{"id":25,"name":"Kunst | Schilderijen | Klassiek"},{"id":1845,"name":"Kunst | Schilderijen | Modern"},{"id":26,"name":"Kunst | Tekeningen en Foto's"},{"id":24,"name":"Kunst | Overige"}]},1:{"id":31,"name":"Audio, Tv en Foto","subs":[{"id":2035,"name":"Accu's en Batterijen"},{"id":2617,"name":"Afstandsbedieningen"},{"id":32,"name":"Bandrecorders"},{"id":1132,"name":"Beamers"},{"id":2665,"name":"Blu-ray-spelers en Blu-ray-recorders"},{"id":33,"name":"Buizenversterkers"},{"id":2036,"name":"Cassettedecks"},{"id":35,"name":"Cd-spelers"},{"id":2666,"name":"Diaprojectors"},{"id":2042,"name":"Diensten | Film- en Videobewerking"},{"id":1199,"name":"Diensten | Fotografen"},{"id":1219,"name":"Diensten | Reparaties"},{"id":1114,"name":"Dvd-spelers en Dvd-recorders"},{"id":1115,"name":"Films 8mm, 16mm en 35mm"},{"id":1360,"name":"Fotografie | Accu's en Batterijen"},{"id":480,"name":"Fotografie | Camera's | Analoog"},{"id":487,"name":"Fotografie | Camera's | Digitaal"},{"id":2667,"name":"Fotografie | Digitale fotolijstjes"},{"id":488,"name":"Fotografie | Doka Toebehoren"},{"id":1720,"name":"Fotografie | Filters"},{"id":489,"name":"Fotografie | Flitsers"},{"id":1483,"name":"Fotografie | Fotolijsten en Fotoalbums"},{"id":1721,"name":"Fotografie | Fotoprinters en Fotopapier"},{"id":1400,"name":"Fotografie | Fotostudio en Toebehoren"},{"id":1484,"name":"Fotografie | Fototassen"},{"id":493,"name":"Fotografie | Geheugenkaarten"},{"id":495,"name":"Fotografie | Lenzen en Objectieven"},{"id":497,"name":"Fotografie | Onderwatercamera's"},{"id":501,"name":"Fotografie | Professionele apparatuur"},{"id":500,"name":"Fotografie | Statieven en Balhoofden"},{"id":1722,"name":"Harddiskrecorders"},{"id":1116,"name":"Home Cinema-sets"},{"id":1106,"name":"Kabels"},{"id":37,"name":"Koptelefoons en Headsets"},{"id":38,"name":"Luidsprekers"},{"id":2668,"name":"Mediaspelers"},{"id":40,"name":"Mp3-spelers | Apple iPod"},{"id":1649,"name":"Mp3-spelers | Overige merken"},{"id":1723,"name":"Mp3-spelers | Accessoires | Apple iPod"},{"id":1452,"name":"Mp3-spelers | Accessoires | Overige merken"},{"id":2615,"name":"Mp4-spelers"},{"id":1724,"name":"Opladers"},{"id":496,"name":"Optische apparatuur | Microscopen"},{"id":502,"name":"Optische apparatuur | Telescopen"},{"id":503,"name":"Optische apparatuur | Verrekijkers"},{"id":42,"name":"Platenspelers en Pick-ups"},{"id":1117,"name":"Professionele Audio-, Tv- en Video-apparatuur"},{"id":43,"name":"Radio's"},{"id":36,"name":"Stereo-sets"},{"id":45,"name":"Tuners"},{"id":1118,"name":"Tv-decoders en Schotelantennes"},{"id":1120,"name":"Tv's | Plasma, Lcd en Led"},{"id":1121,"name":"Tv's | Overige Tv's"},{"id":1453,"name":"Tv's | Accessoires"},{"id":46,"name":"Versterkers en Receivers"},{"id":1129,"name":"Videobewakingsapparatuur"},{"id":1130,"name":"Videocamera's | Analoog"},{"id":1131,"name":"Videocamera's | Digitaal"},{"id":1133,"name":"Videospelers en Videorecorders"},{"id":47,"name":"Walkmans, Discmans en Minidiscspelers"},{"id":1725,"name":"Weerstations en Barometers"},{"id":41,"name":"Overige Audio, Tv en Foto"}]}}';

$result = preg_replace('/\d+/', '"\\0"', $string); 
```

**编辑：**如果您只想将其转换为正确的 JSON，那么

```
$string = '{0:{"id":1,"name":"Antiek en Kunst","subs":[{"id":2,"name":"Antiek | Bestek"},{"id":3,"name":"Antiek | Boeken en Bijbels"},{"id":1100,"name":"Antiek | Emaille"},{"id":1501,"name":"Antiek | Gereedschap en Instrumenten"},{"id":1648,"name":"Antiek | Glas en Kristal"},{"id":2614,"name":"Antiek | Goud en Zilver"},{"id":2661,"name":"Antiek | Kandelaars"},{"id":1841,"name":"Antiek | Kantoor en Zakelijk"},{"id":1502,"name":"Antiek | Keramiek en Aardewerk"},{"id":1842,"name":"Antiek | Keukenbenodigdheden"},{"id":2118,"name":"Antiek | Kleden en Textiel"},{"id":1503,"name":"Antiek | Kleding en Accessoires"},{"id":6,"name":"Antiek | Klokken"},{"id":1647,"name":"Antiek | Koper en Brons"},{"id":7,"name":"Antiek | Lampen"},{"id":1504,"name":"Antiek | Meubels | Bedden"},{"id":5,"name":"Antiek | Meubels | Kasten"},{"id":1505,"name":"Antiek | Meubels | Stoelen en Banken"},{"id":1506,"name":"Antiek | Meubels | Tafels"},{"id":1101,"name":"Antiek | Naaimachines"},{"id":10,"name":"Antiek | Porselein"},{"id":1102,"name":"Antiek | Religie"},{"id":1103,"name":"Antiek | Schalen"},{"id":2662,"name":"Antiek | Schoolplaten"},{"id":1843,"name":"Antiek | Servies compleet"},{"id":12,"name":"Antiek | Servies los"},{"id":1507,"name":"Antiek | Speelgoed"},{"id":2663,"name":"Antiek | Spiegels"},{"id":2664,"name":"Antiek | Tin"},{"id":11,"name":"Antiek | Tv's en Audio"},{"id":14,"name":"Antiek | Vazen"},{"id":1104,"name":"Antiek | Wandborden en Tegels"},{"id":1500,"name":"Antiek | Woonaccessoires"},{"id":9,"name":"Antiek | Overige"},{"id":15,"name":"Curiosa en Brocante"},{"id":1423,"name":"Diensten | Kunstenaars en Portretschilders"},{"id":2610,"name":"Diensten | Reparatie en Onderhoud"},{"id":23,"name":"Kunst | Beelden en Houtsnijwerken"},{"id":1508,"name":"Kunst | Designobjecten"},{"id":1105,"name":"Kunst | Etsen en Gravures"},{"id":27,"name":"Kunst | Litho's en Zeefdrukken"},{"id":1844,"name":"Kunst | Niet-Westerse kunst"},{"id":1846,"name":"Kunst | Schilderijen | Abstract"},{"id":25,"name":"Kunst | Schilderijen | Klassiek"},{"id":1845,"name":"Kunst | Schilderijen | Modern"},{"id":26,"name":"Kunst | Tekeningen en Foto's"},{"id":24,"name":"Kunst | Overige"}]},1:{"id":31,"name":"Audio, Tv en Foto","subs":[{"id":2035,"name":"Accu's en Batterijen"},{"id":2617,"name":"Afstandsbedieningen"},{"id":32,"name":"Bandrecorders"},{"id":1132,"name":"Beamers"},{"id":2665,"name":"Blu-ray-spelers en Blu-ray-recorders"},{"id":33,"name":"Buizenversterkers"},{"id":2036,"name":"Cassettedecks"},{"id":35,"name":"Cd-spelers"},{"id":2666,"name":"Diaprojectors"},{"id":2042,"name":"Diensten | Film- en Videobewerking"},{"id":1199,"name":"Diensten | Fotografen"},{"id":1219,"name":"Diensten | Reparaties"},{"id":1114,"name":"Dvd-spelers en Dvd-recorders"},{"id":1115,"name":"Films 8mm, 16mm en 35mm"},{"id":1360,"name":"Fotografie | Accu's en Batterijen"},{"id":480,"name":"Fotografie | Camera's | Analoog"},{"id":487,"name":"Fotografie | Camera's | Digitaal"},{"id":2667,"name":"Fotografie | Digitale fotolijstjes"},{"id":488,"name":"Fotografie | Doka Toebehoren"},{"id":1720,"name":"Fotografie | Filters"},{"id":489,"name":"Fotografie | Flitsers"},{"id":1483,"name":"Fotografie | Fotolijsten en Fotoalbums"},{"id":1721,"name":"Fotografie | Fotoprinters en Fotopapier"},{"id":1400,"name":"Fotografie | Fotostudio en Toebehoren"},{"id":1484,"name":"Fotografie | Fototassen"},{"id":493,"name":"Fotografie | Geheugenkaarten"},{"id":495,"name":"Fotografie | Lenzen en Objectieven"},{"id":497,"name":"Fotografie | Onderwatercamera's"},{"id":501,"name":"Fotografie | Professionele apparatuur"},{"id":500,"name":"Fotografie | Statieven en Balhoofden"},{"id":1722,"name":"Harddiskrecorders"},{"id":1116,"name":"Home Cinema-sets"},{"id":1106,"name":"Kabels"},{"id":37,"name":"Koptelefoons en Headsets"},{"id":38,"name":"Luidsprekers"},{"id":2668,"name":"Mediaspelers"},{"id":40,"name":"Mp3-spelers | Apple iPod"},{"id":1649,"name":"Mp3-spelers | Overige merken"},{"id":1723,"name":"Mp3-spelers | Accessoires | Apple iPod"},{"id":1452,"name":"Mp3-spelers | Accessoires | Overige merken"},{"id":2615,"name":"Mp4-spelers"},{"id":1724,"name":"Opladers"},{"id":496,"name":"Optische apparatuur | Microscopen"},{"id":502,"name":"Optische apparatuur | Telescopen"},{"id":503,"name":"Optische apparatuur | Verrekijkers"},{"id":42,"name":"Platenspelers en Pick-ups"},{"id":1117,"name":"Professionele Audio-, Tv- en Video-apparatuur"},{"id":43,"name":"Radio's"},{"id":36,"name":"Stereo-sets"},{"id":45,"name":"Tuners"},{"id":1118,"name":"Tv-decoders en Schotelantennes"},{"id":1120,"name":"Tv's | Plasma, Lcd en Led"},{"id":1121,"name":"Tv's | Overige Tv's"},{"id":1453,"name":"Tv's | Accessoires"},{"id":46,"name":"Versterkers en Receivers"},{"id":1129,"name":"Videobewakingsapparatuur"},{"id":1130,"name":"Videocamera's | Analoog"},{"id":1131,"name":"Videocamera's | Digitaal"},{"id":1133,"name":"Videospelers en Videorecorders"},{"id":47,"name":"Walkmans, Discmans en Minidiscspelers"},{"id":1725,"name":"Weerstations en Barometers"},{"id":41,"name":"Overige Audio, Tv en Foto"}]}}';

$result = preg_replace('/[\{\[]\s*(\d+)\s*:/', '"\\0"', $string); 
```

这会将整数键转换为字符串，将整数值保留为整数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T11:51:30.733

这应该可以解决问题：

```
$json = preg_replace('/(\d+):/', '"$1":', $almost_json); 
```

# c# - 捕获 HttpRequestValidationException 并将其添加到 ModelState 的最佳方法是什么？

> ID：11224901
> 
> 赞同：3
> 
> 时间：2012-06-27T11:11:43.217
> 
> 标签：c#, asp.net-mvc-3, exception-handling

`[AllowHtml]`关于属性甚至方法上的装饰器，捕获并将其附加到 ModelState 以在用户端显示为友好错误而不显示错误页面`[ValidateInput(false)]`的最佳方法是什么（或者在下面抛出一个新页面或使用自定义错误页面。`HttpRequestValidationException``Application_Error`

在里面`global.asax`我有一个陷阱：

```
protected void Application_Error()
{
    // http://romsteady.blogspot.dk/2007/06/how-to-catch-httprequestvalidationexcep.html
    // Code that runs when an unhandled error occurs

    System.Exception ex = Server.GetLastError();

    if (ex is System.Web.HttpRequestValidationException)
    { 
        // I got the exception here, I can do plenty now!

        Server.ClearError(); // no need to continue, I know the error
    }
} 
```

如何在不使用任何会话/应用程序变量的情况下**从这里到达模型状态**（考虑这里的云以及托管用户请求的所有不同服务器）？

我正在考虑添加到路线，或者`TempData`但是这里不可用......也许是一个`Cookie`但接缝到hacky......

> **有任何想法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:26:57.077

ASP.NET MVC 中的错误处理是一个有争议的主题。您有不同的选择来处理错误。读：

*   [如何正确处理 ASP.NET MVC 中的 404？](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc)
*   [ASP.NET MVC 处理错误](https://stackoverflow.com/questions/183316/asp-net-mvc-handleerror)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T19:37:52.570

我曾经通过自定义 ModelBinder 处理过这种情况，并在 base.BindModel 调用周围抛出了 try/catch。这很丑陋，但它可以完成工作。

我再说一遍，这很丑。

这是一个例子：

```
public class FooModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        Foo model;
        try
        {
            model = (Foo)base.BindModel(controllerContext, bindingContext);
        }
        catch (HttpRequestValidationException)
        {
            // handle here
        }
    }
} 
```

现在，为了用错误填充 ModelState，我有一个帮助类，它尽最大努力维护状态。它的使用（和实现）还有很多不足之处（很多管道、魔术字符串的使用、特定类型、异常消息文本的正则表达式等），因此欢迎提出任何建议。这是最丑陋的部分，imo。

用法：

```
// from above code snippet
catch (HttpRequestValidationException)
{
    // handle any potentially dangerous form values here.  Don't want an exception bubbling up to the user
    // so handle the HttpRequestValidationException by hand here
    // manually populate the model here so that the original values are presented back to the user
    model = new Foo()
    {
        Bar = HandleHttpRequestValidationExceptionHelper.TryAssignment(bindingContext.ModelState, () => bindingContext.ValueProvider.GetValue("Bar").AttemptedValue),
        Baz = HandleHttpRequestValidationExceptionHelper.TryAssignment(bindingContext.ModelState, () => bindingContext.ValueProvider.GetValue("Baz").AttemptedValue)
    };
}

return model; 
```

helper 尽最大努力为用户挖掘出相关的错误信息，但它真的很糟糕。（注意主题？）

执行：

```
public static class HandleHttpRequestValidationExceptionHelper
{
    /// <summary>
    /// Use TryAssignment in anticipation of a HttpRequestValidationException; it's used to help return error information to the user
    /// </summary>
    /// <param name="modelStateDictionary">The ModelStateDictionary to add the errors to</param>
    /// <param name="action">The attempted value to assign</param>
    /// <returns>Either the proper value or the errored value read from the HttpRequestValidationException Message property</returns>
    public static string TryAssignment(ModelStateDictionary modelStateDictionary, Func<string> action)
    {
        try
        {
            return action();
        }
        catch (HttpRequestValidationException ex)
        {
            // in effort to better inform the user, try to fish out the offending form field
            var parenthesesMatch = Regex.Match(ex.Message, @"\(([^)]*)\)");
            if (parenthesesMatch.Success)
            {
                var badFormInput = parenthesesMatch.Groups[1].Value.Split('=');
                modelStateDictionary.AddModelError(badFormInput[0], badFormInput[1] + " is not valid.");
                return badFormInput[1].TrimStart('"').TrimEnd('"');
            }
            else
            {
                // if attempt to find the offending field fails, just give a general error
                modelStateDictionary.AddModelError("", "Please enter valid information.");
                return string.Empty;
            }
        }
    }

    /// <summary>
    /// Use TryAssignment in anticipation of a HttpRequestValidationException; it's used to help return error information to the user
    /// </summary>
    /// <typeparam name="T">Type of the value</typeparam>
    /// <param name="modelStateDictionary">The ModelStateDictionary to add the errors to</param>
    /// <param name="action">The attempted value to assign</param>
    /// <returns>Either the proper value or default(T)</returns>
    public static T TryAssignment<T>(ModelStateDictionary modelState, Func<T> action)
    {
        try
        {
            return action();
        }
        catch (HttpRequestValidationException ex)
        {
            // in effort to better inform the user, try to fish out the offending form field
            var parenthesesMatch = Regex.Match(ex.Message, @"\(([^)]*)\)");
            if (parenthesesMatch.Success)
            {
                var badFormInput = parenthesesMatch.Groups[1].Value.Split('=');
                modelState.AddModelError(badFormInput[0], badFormInput[1] + " is not valid.");
                // can't really cast a string to an unknown type T.  safer to just return default(T)
            }
            else
            {
                // if attempt to find the offending field fails, just give a general error
                modelState.AddModelError("", "Please enter valid information.");
            }
            return default(T);
        }
    }
} 
```

基本上，在捕获异常时，尝试手动重新绑定模型，准备捕获`HttpRequestValidationException`每个属性的潜在错误。如果一个被抓到，用我能得到的尽可能具体的消息相应地填充 ModelStateDictionary。

我真的希望该框架能够更容易地 1) 捕获此异常并 2) 优雅地处理它而不是弄乱整个床。

# php - Disqus 没有正确计算评论数

> ID：11224903
> 
> 赞同：0
> 
> 时间：2012-06-27T11:11:52.610
> 
> 标签：php, wordpress, disqus

我目前正在使用一个名为“Disqus”的插件在网站上发表评论，但它没有正确“计算”它们。

为了使评论计数正确，我必须不断同步它们，这很痛苦。

我已经在互联网上阅读了很多关于它很容易修复的内容，但我认为这一定是“当你知道如何容易”的情况下！

这是一个例子：

它在此处显示 5 条评论：

[http://www.mac-nutrition.com/research-update-low-carbohydrate-diet-in-type-1-diabetes/](http://www.mac-nutrition.com/research-update-low-carbohydrate-diet-in-type-1-diabetes/)

但在实际页面上，它显示 3 条评论：

[http://www.mac-nutrition.com/category/blogs/](http://www.mac-nutrition.com/category/blogs/)

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:14:35.827

给我显示5？您是否缺少嵌套的评论/回复？

# umbraco - umbraco 的微型网站

> ID：11224906
> 
> 赞同：4
> 
> 时间：2012-06-27T11:11:56.773
> 
> 标签：umbraco

我对 umbraco 比较陌生，刚刚建立了网站，但客户要求一个具有全新外观和感觉的微型网站。

那么如何在 umbraco 中建立一个新的微型站点。

请帮忙。

万分感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T13:05:29.493

要使 Umbraco 中的页面具有与其他页面完全不同的外观和感觉，您可以采用几种不同的方式。显然，解决问题的方法不止一种，但我只提一些我能想到的并解释它们是如何工作的。

1.  创建具有新设计的新母版页模板，然后为每种文档类型创建子模板，以包括主页、标准文本页面和您可能需要的任何其他内容。将这些模板分配给将使用它们的文档类型。

    优点：最简单的方法。允许最大的设计灵活性。

    缺点：用户可能会选择错误的模板或忘记设置正确的模板。

2.  像选项 1 一样创建单独的模板，但也创建单独的文档类型。仅将模板分配给新文档类型。每种文档类型都可以扩展您现有的文档以继承相同的属性，或者您可以创建全新的文档类型。

    优点：确保用户始终使用正确的模板。允许最大的设计灵活性。允许特定于站点的自定义 - 可以添加或删除属性。

    缺点：文档类型的数量增加了一倍，因此出现供用户选择的数量。当然，他们看到的数量可能会受到允许他们创建的模板的限制。

3.  使用现有的模板，但包括一个检查以确定正在访问的站点，具体取决于路径或子域等，然后动态加载不同的样式表。

    优点：您不需要为微型网站创建单独的模板或文档类型。

    缺点：您的主模板的标记必须足够通用以补偿这两种设计，因此不够灵活。

一旦您选择了如何构建和样式化微型站点页面的选项（请记住，我的列表不是决定性的），您将需要确定在哪里设置节点结构。如果微型站点是子域或者它有自己的域，最好的选择是先将其添加为单独的主节点，然后在其下方添加所有自己的页面。然后，您实际上可以在 Umbraco 中为该站点设置不同的主机引用。SO上有一些答案提到了如何做到这一点：

[在 umbraco 中分配主机名](https://stackoverflow.com/questions/325402/assigning-hostnames-in-umbraco)

[在单个 umbraco 实例上发布多个站点](https://stackoverflow.com/questions/78049/publishing-multiple-sites-on-a-single-instance-of-umbraco)

以下是允许 Umbraco 使用其他域名的一些基本步骤：

1.  设置您的 Web 服务器以接受特定域/子域的主机标头。在 IIS 7.5 中，这可以通过为域/子域添加绑定来完成。

2.  新节点需要是 Content 节点的直接子节点。

3.  右键单击该节点并选择“管理主机名”。然后添加域/子域 URL。

希望有帮助！随时提出更多问题。

# sql - Django - 用户模型的自定义 Sql

> ID：11224908
> 
> 赞同：1
> 
> 时间：2012-06-27T11:12:07.893
> 
> 标签：sql, django, django-models

哪个名称需要sql文件夹中的sql文件？当我想为用户模型加载自定义 sql 时。

[初始 SQL 数据](https://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial-sql-data)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:18:40.557

从您提供的链接：

钩子很简单：Django 只是在你的应用程序目录中查找一个名为 sql/ `modelname`.sql 的文件，其中`modelname`模型的小写名称。

因此，如果您在名为 myapp 的应用程序中有一个 Person 模型，您可以将任意 SQL 添加到 myapp 目录中的文件 sql/person.sql 中。以下是文件可能包含的示例：

# php - cron 作业 - 查询数据库以发送电子邮件

> ID：11224914
> 
> 赞同：0
> 
> 时间：2012-06-27T11:12:27.013
> 
> 标签：php, email, cron

我有一个包含电子邮件地址和提醒列表的数据库，我的 php 文件

1 - 检查任何“今天”的日期

2 - 使用 phpmailer 发送提醒邮件

我需要设置一个 cron 作业来每天运行一次 php 文件（比如格林威治标准时间上午 10 点）并运行 .php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:15:50.620

它应该是这样的：

```
0 10 * * * cd /var/www/htdocs && php myfile.php 
```

在[这里](http://www.adminschoice.com/crontab-quick-reference)查看更多示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:16:31.437

您可以使用命令“crontab -e”来编辑 crontab 并添加以下条目：

```
0 10 * * * /script/path/file.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:17:33.770

编辑您的 crontab 并将其设置为运行您的 php 脚本。每天上午10点；

```
crontab -e
00 10 * * * /usr/local/bin/php /home/phpscripts/yourscript.php 
```

然后，您的 php 脚本应该访问数据库，对所有用户运行 SELECT 查询，因为在该日期收到邮件，然后在一段时间内使用[phpmail](http://php.net/manual/en/function.mail.php) (mysqli_fetch_assoc) 循环发送您的预定义邮件。

希望这可以帮助。

*   伊根

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T11:17:44.243

纳米 /etc/crontab

```
change user to user of webserver
              |
              |      Command you want to run
              |      |
              |      |
              v      V
0 10 * * * www-data php -f /var/www/website/scripts/email.php 
```

# android - 使用远程 IP 摄像头录制视频的 Android 代码，该远程 IP 摄像头通过 URL 访问

> ID：11224917
> 
> 赞同：7
> 
> 时间：2012-06-27T11:12:27.737
> 
> 标签：android

以下是一些有关视频录制的链接：

[如何在 Android 上捕获视频录制？](https://stackoverflow.com/questions/1817742/android-video-recording-sample) [https://github.com/churnlabs/android-ffmpeg-sample](https://github.com/churnlabs/android-ffmpeg-sample)

还有很多关于视频录制的链接，但不知道如何使用远程 IP 摄像机录制视频。通过在stackoverflow上使用不同的样本，我可以拍照并保存在sdcard上，但无法录制视频。

如果有人有任何想法或代码以及所需的文件，我将不胜感激。

例如，我在 IP 摄像机可用的地方使用的 url 如下所示：

[http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg/video.cgi?resolution=800x600&%3bdummy=1333689998337](http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg/video.cgi?resolution=800x600&amp%3bdummy=1333689998337)

这是布局代码：

```
<RelativeLayout
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/logo"
    android:layout_alignParentTop="true"
    android:layout_weight="1" >

    <ImageButton
        android:id="@+id/btnCam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:src="@drawable/camera_icon" >
    </ImageButton>

        <ImageButton
        android:id="@+id/btnVideo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:src="@drawable/camera_icon" >
    </ImageButton>
</RelativeLayout>

<LinearLayout
    android:id="@+id/LinearLayout03"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/LinearLayout01"
    android:layout_below="@+id/LinearLayout02"
    android:layout_weight="1" >

    <RelativeLayout
        android:id="@+id/RelativeLayout01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ffffff" >

        <view
            android:id="@+id/mv"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            class="com.apps.GrahamConst.MjpegView" />
    </RelativeLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"

    android:layout_weight="1"
    android:background="@drawable/navbar" >

    <ImageButton
        android:id="@+id/btnPrevious"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_weight="1"
        android:background="@null"
        android:src="@drawable/previous" >
    </ImageButton>

    <ImageButton
        android:id="@+id/btnMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_weight="1"
        android:background="@null"
        android:src="@drawable/main" >
    </ImageButton>

    <ImageButton
        android:id="@+id/btnNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_weight="1"
        android:background="@null"
        android:src="@drawable/next" >
    </ImageButton>
  </LinearLayout>

 </RelativeLayout> 
```

这是我的活动

```
 public class CameraDetails2 extends Activity implements OnClickListener {

private MediaScannerConnection m_pScanner;
String drawable = null;
private MjpegView mv;
private ProgressDialog dialog;
private HashMap<String, String> item;
private int id = -1;
private WindowManager winMan;
boolean recording = false;
MediaRecorder recorder;

int bytearraysize = 0;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    winMan = (WindowManager) getApplicationContext().getSystemService(
            Context.WINDOW_SERVICE);
    if (winMan != null) {
        int orientation = winMan.getDefaultDisplay().getOrientation();
        if (orientation == 0) {
            // Portrait
            setContentView(R.layout.cameradetails);
        } else if (orientation == 1) {
            // Landscape
            setContentView(R.layout.cameradetailsl);
        }
    }

    Bundle b = getIntent().getExtras();

    ImageButton b1 = (ImageButton) findViewById(R.id.btnNext);
    b1.setOnClickListener(this);
    ImageButton b2 = (ImageButton) findViewById(R.id.btnMain);
    b2.setOnClickListener(this);
    ImageButton b3 = (ImageButton) findViewById(R.id.btnPrevious);
    b3.setOnClickListener(this);
    ImageButton b4 = (ImageButton) findViewById(R.id.btnCam);
    b4.setOnClickListener(this);

    ImageButton b5 = (ImageButton) findViewById(R.id.btnVideo);
    b5.setOnClickListener(this);

    id = Integer.valueOf(b.get("id").toString());
    item = listarrayadapter.cameraList.get(Integer.valueOf(id));
    mv = (MjpegView) findViewById(R.id.mv);
    try {
        getVal(item.get("cameraLink"));
        // getVal("http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg 
                 /video.cgi?resolution=800x600&amp%3bdummy=1333689998337");
    } catch (Exception e) {
        e.printStackTrace();
        mv.setBackgroundResource(R.drawable.offline);
    }

}

@Override
protected void onResume() {

    // if(recording)
    // {
    // getVal("http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg
             /video.cgi?resolution=800x600&amp%3bdummy=1333689998337");
    // }

    super.onResume();
}

public void onPause() {
    super.onPause();
    dialog.dismiss();
    mv.stopPlayback();
}

private void getVal(final String url) {
    Log.i("URL===", url);

    updateButtons();
    dialog = ProgressDialog.show(this, null, null, true);
    final Handler handler = new Handler() {
        public void handleMessage(Message msg) {

            dialog.dismiss();

        }
    };

    Thread checkUpdate = null;
    checkUpdate = new Thread() {
        public void run() {
            mv.setSource(MjpegInputStream.read(url));
            mv.setDisplayMode(MjpegView.SIZE_FULLSCREEN);
            handler.sendEmptyMessage(0);
        }
    };
    checkUpdate.start();

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    int btn = v.getId();

    if (btn == R.id.btnMain) {
        Intent intent = new Intent();
        intent.setClass(CameraDetails2.this, CamerasList.class);
        startActivity(intent);
        finish();
    }
    if (btn == R.id.btnNext) {

        id += 1;
        Intent myintent = new Intent(CameraDetails2.this,
                CameraDetails.class);

        myintent.putExtra("id", id);
        startActivity(myintent);
        finish();

    }
    if (btn == R.id.btnPrevious) {
        id -= 1;
        Intent myintent = new Intent(CameraDetails2.this,
                CameraDetails.class);
        myintent.putExtra("id", id);
        startActivity(myintent);
        finish();

    }
    if (btn == R.id.btnCam) {
        if (mv != null) {
            Date dt = new Date();
            int years = dt.getYear();
            int month = dt.getMonth();
            int day = dt.getDay();
            int hours = dt.getHours();
            int minutes = dt.getMinutes();
            int seconds = dt.getSeconds();
            final String filename = years + "" + month + "" + day + ""
                    + hours + "" + minutes + "" + seconds;

            try {

                Bitmap image = MjpegView.savebmp;

                File SDCardRoot = 
                       Environment.getExternalStorageDirectory();
                FileOutputStream fileOutputStream = null;
                fileOutputStream = new FileOutputStream(
                        SDCardRoot.toString() + "/" + 
                             filename + ".jpg");
                BufferedOutputStream bos = new 
                     BufferedOutputStream(
                        fileOutputStream);
                int quality = 95;
                image.compress(CompressFormat.JPEG, quality, bos);
                final String szFile = SDCardRoot.toString() + "/"
                        + filename + ".jpg";

                m_pScanner = new MediaScannerConnection(this,
                        new MediaScannerConnectionClient() 
           {
                            public void 
            onMediaScannerConnected() {
                                m_pScanner

                      .scanFile(szFile, null /* mimeType */);
                            }

                            public void 
       onScanCompleted(String path, Uri uri) {
                                if 
        (path.equals(szFile)) {

            CameraDetails2.this

        .runOnUiThread(new Runnable() {
                                                public void run() {
                                                    Toast.makeText(
                                                            getApplicationContext(),
                                                            "Image Saved.",
                                                            Toast.LENGTH_LONG)
                                                            .show();

                                                }
                                            });

                          m_pScanner.disconnect();
                                }
                            }

                        });
                m_pScanner.connect();

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    if (btn == R.id.btnVideo) {
        if (recording) {

            // stop and save

            recording = false;
            MjpegInputStream.isrecording = false;
            List<byte[]> bytelist = new ArrayList<byte[]>();
            ArrayList<ByteArrayOutputStream> byteArrayStream =
                            MjpegInputStream.byteArrayStream;
            for (int i = 0; i < byteArrayStream.size(); i++) {

                byte[] templist      
                                   =byteArrayStream.get(i).toByteArray();
                bytelist.add(templist);

            }

            for (int j = 0; j < bytelist.size(); j++) {
                bytearraysize += bytelist.get(j).length;
            }

            byte[] totalbytes = new byte[bytearraysize];
            int f = 0;

            for (int j = 0; j < bytelist.size(); j++) {
                for (int a = 0; a < bytelist.get(j).length; a++) {
                    totalbytes[f] = bytelist.get(j)[a];
                    f++;
                }
            }

            Log.e("num of bytes", "" + totalbytes.length);

            // Byte[] bytes = bytelist.toArray(new 
                                     //Byte[bytelist.size()]);

            try {
                writeToFile(totalbytes, "" + 
                  System.currentTimeMillis());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } else {
            recording = true;
            MjpegInputStream.isrecording = true;
            // onResume();
            // start recording
        }

        // recorder=new MediaRecorder();
        // try {
        // recorder.prepare();
        // } catch (IllegalStateException e) {
        // e.printStackTrace();
        // finish();
        // } catch (IOException e) {
        // e.printStackTrace();
        // finish();
        // }
        //
        // //recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
        // // recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
        //
        // //
        // //
        // // CamcorderProfile cpHigh = CamcorderProfile
        // // .get(CamcorderProfile.QUALITY_HIGH);
        // // recorder.setProfile(cpHigh);
        // recorder.setVideoSource(mv.getId());
        // recorder.setOutputFile("/sdcard/videocapture_example.mp4");
        // recorder.setMaxDuration(50000); // 50 seconds
        // recorder.setMaxFileSize(5000000); // Approximately 5 megabytes
    }

}

public void writeToFile(byte[] bytes, String videoname) throws IOException {
    try {
        Log.e("num of bytes to be saved", "" + bytes.length);
        String path = "/sdcard/" + videoname + ".mp4";
        FileOutputStream stream = new FileOutputStream(path);
        stream.write(bytes);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}

private void updateButtons() {
    ImageButton btnNext = (ImageButton) findViewById(R.id.btnNext);
    ImageButton btnPrevious = (ImageButton) findViewById(R.id.btnPrevious);
    if (id == 0) {
        btnPrevious.setEnabled(false);
    } else {
        btnPrevious.setEnabled(true);
    }
    if (id == listarrayadapter.cameraList.size() - 1) {
        btnNext.setEnabled(false);
    } else {
        btnNext.setEnabled(true);
    }
}

    } 
```

# wcf - 如何在服务上有多个合同？

> ID：11224929
> 
> 赞同：0
> 
> 时间：2012-06-27T11:13:19.497
> 
> 标签：wcf, tcp

我有一个服务，那个principal我想是双工的，但是，对于一些操作，我需要使用流传输模式，所以我想要两个合约，一个是通用合约，让我与数据库并在我需要时从服务向客户端发送消息，以及与文件交互、保存文件并将文件获取到数据库的其他合同。

我需要这两个合同，因为 tcp 绑定与双工不兼容。

该服务托管在 WPF 应用程序中，配置文件如下：

```
<system.serviceModel>
    <services>          
      <service name="GTS.CMMS.Service.Service" behaviorConfiguration="behaviorConfig">
        <host>
          <baseAddresses>

            <add baseAddress="net.tcp://localhost:7997/CMMSHost"/>
            <add baseAddress="http://localhost:7998/CMMSHost"/>
          </baseAddresses>
        </host>   

        <endpoint address="/ServiceCore"
                  binding="netTcpBinding"
                  bindingConfiguration="tcpBinding"
                  name="ServiceCore"
                  contract="GTS.CMMS.Service.IService">
          <!--<identity>
            <dns value="localhost" />
          </identity>-->
        </endpoint>

        <endpoint address="/ServiceDocumentos"
                  binding="netTcpBinding"
                  bindingConfiguration="tcpBindingDocumentos"
                  name="ServiceDocumentos"
                  contract="GTS.CMMS.Service.IServiceDocumentos">
          <!--<identity>
            <dns value="localhost" />
          </identity>-->
        </endpoint>

        <endpoint contract="IMetadataExchange" binding="mexTcpBinding" address="net.tcp://localhost:5000/mex" />
      </service>      
    </services>

    <!--El behavior son datos de configuración del servicio que no forman parte del endpoint.
    Por ejemplo, si el servicio da una excepción, se querrá informar al cliente.-->
    <behaviors>
      <serviceBehaviors>
        <behavior name="behaviorConfig">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
          <!--Necesario para poder mandar excepciones desde el servicio hasta el cliente.-->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100" />
        </behavior>

        <behavior name="behaviorConfigDocumentos">
          <!--<serviceMetadata httpGetEnabled="true" />-->
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
          <!--Necesario para poder mandar excepciones desde el servicio hasta el cliente.-->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100" />
          <serviceMetadata/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <!--Se necesita la configuración del binding para que funcione correctamente la comunicación entre el cliente y el servidor.-->
    <bindings>
      <netTcpBinding>
        <!--Se configura el binding que se utilizará para el endPoint ChatServiceAssembly.IChat-->
        <binding name="tcpBinding" maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                       transferMode="Buffered" closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100">
          <security mode="None"/>
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
              maxArrayLength="2147483647" maxBytesPerRead="2147483647"
              maxNameTableCharCount="2147483647"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00" />
        </binding>

        <binding name="tcpBindingDocumentos" maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                       transferMode="Streamed" closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100">
          <security mode="None"/>
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
              maxArrayLength="2147483647" maxBytesPerRead="2147483647"
              maxNameTableCharCount="2147483647"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00" />
        </binding>
      </netTcpBinding>

    </bindings>
  </system.serviceModel> 
```

要检查是否一切正常，我会访问 Internet Explorer 并访问：

```
http://localhost:7998/CMMSHost 
```

如果我有两个端点，则找不到页面，但如果我评论第二个端点，则找到“/ServiceDocumentos”页面，我可以使用 svcutil 创建代理。

如何配置多个端点？

谢谢。

# android - android中的多个json字符串

> ID：11224932
> 
> 赞同：4
> 
> 时间：2012-06-27T11:13:30.723
> 
> 标签：android

我必须返回我所有的 JSON 字符串。例如我有一个 json 字符串：

```
[{"Locationvalue":"Payroll  - 9","LocationId":"465","IsSelected":false}] 
```

并且还返回了第二个 JSON 字符串：

```
[{"CC2Description":"Denver - DN","CC2":"DN","isSelected":false},{"CC2Description":"Las Vegas - LV","CC2":"LV","isSelected":false}] 
```

等等。

在android中我写了这个：

```
JSONArray JsonObject = new JSONArray(JsonString.toString());

for(int i=0;i<JsonObject.length();i++)
{
   Log.v("log",  JsonObject.getString(i));
} 
```

但我只能访问一个 JSON 数组。我还想要其他 JSON 数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T11:16:50.817

您不能在一次调用中解码多个单独的 json 结构。JSON 结构本身必须是完整的正确 Javascript 对象或数组，例如

像这样的两个数组：

```
[1,2,3][4,5,6] 
```

是无效的，因为它是两个独立的数组相互碰撞。然而，

```
[[1,2,3],[4,5,6]] 
```

没关系，因为它是一个包含两个单独子数组的数组。您可以返回多个单独的 json 字符串，但它们必须包含在单个结构中。

# java - RMI 查找有效，但方法调用无效

> ID：11224934
> 
> 赞同：1
> 
> 时间：2012-06-27T11:13:45.160
> 
> 标签：java, rmi

## 更新：

问题是，我正在使用一种 2 路连接。

在客户端，这有效：

```
String a = this.lobby.getMsg(); 
```

这不是：

```
this.lobby.login((Player)UnicastRemoteObject.exportObject(player, 0)); 
```

和想法？

* * *

* * *

我正在开发一个使用 RMI 进行网络通信的 java 应用程序。

在一台计算机上一切正常，但如果我尝试通过互联网运行它，我遇到了问题。

看来，客户端能够从服务器检索注册表并查找大厅对象。但是如果客户端尝试通过 rmi 调用大厅对象的登录方法，则需要很长时间，并且我收到以下异常：

奇怪的是，这个异常中提到了错误的 ip（客户端 ip）。如果我在与服务器相同的机器上运行客户端，它会完美运行。

```
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.ConnectException: Connection refused to host: <client ip(should be server ip?)>; nested exception is: 
    java.net.ConnectException: Die Wartezeit für die Verbindung ist abgelaufen (=time out)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:353)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:160)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at $Proxy0.einloggen(Unknown Source)
    at Client.login(Client.java:64) 
```

* * *

**以下是相关代码：**

我的服务器类：

```
 public static final int RMI_PORT = 55555;
    public static final String SERVER_IP = "xyz.com";

    /**
     * Startet Spielserver
     * 
     * @param args
     */
    public static void main(String[] args) {
        System.out.println("Server starten..");

        System.setProperty("java.rmi.server.hostname", SERVER_IP);
        try {
            if (System.getSecurityManager() == null) {
                System.setSecurityManager(new RMISecurityManager());
            }

            Registry registry = LocateRegistry.getRegistry(SERVER_IP, RMI_PORT);

            Lobby lobby = new LobbyImpl();
            UnicastRemoteObject.exportObject(lobby, 0);
            registry.bind("Lobby", lobby);
        } catch (RemoteException e) {
            e.printStackTrace();
        } catch (AlreadyBoundException e) {
            e.printStackTrace();
        }
    } 
```

客户端类：

```
public Client() {
        try {
            Registry registry = LocateRegistry.getRegistry("xyz.com", Server.RMI_PORT);
            lobby = (Lobby) registry.lookup("Lobby");
        } catch (RemoteException e) {
            e.printStackTrace();
        } catch (NotBoundException e) {
            e.printStackTrace();
        }
        this.gui = new GUI(this);
    }

    public void login(String name) throws RemoteException {
        Player player = new Player(name);
        this.lobby.login((Player)UnicastRemoteObject.exportObject(player, 0));  
    } 
```

客户端启动脚本：

```
#!/bin/bash
SCRIPTDIR=$(dirname $0)
java -classpath $SCRIPTDIR/bin Client 
```

服务器启动脚本：

```
#!/bin/bash
SCRIPTDIR=$(dirname $0)

cd ${SCRIPTDIR}/bin
rmiregistry 55555 &
cd - 
java -classpath $SCRIPTDIR/bin -Djava.security.policy=$SCRIPTDIR/src/server.policy -Djava.rmi.server.codebase=file:$SCRIPTDIR/bin/ Server
killall rmiregistry 
```

最后但并非最不重要的是我的第一个（测试）策略文件：

```
grant {
    permission java.security.AllPermission;
}; 
```

可能是什么问题呢？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:00:57.503

您需要查看 RMI 主页上的 RMI FAQ 的 A.1 项。这里的问题是错误的 IP 地址被嵌入到远程存根中。因此查找有效，因为您在客户端中自己指定目标 IP 地址，但是当您执行远程方法时，您依赖于存根中的 IP 地址，这是错误的。解决方案是更正您的 /etc/hosts 文件或在服务器 JVM 上设置系统属性 java.rmi.server.hostname。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:19:33.810

错误信息是

```
java.rmi.ConnectException: Connection refused to host: <wrong ip of the server>; 
```

我会检查您是否可以 ping 该服务器和 telnet 到服务点。

# xcode - 更改 plist 文件中的项目顺序

> ID：11224938
> 
> 赞同：10
> 
> 时间：2012-06-27T11:13:52.603
> 
> 标签：xcode, plist

我想更改 plist 文件中的顺序**不是**以编程方式而是从 xcode 更改。Xcode中有没有一种方法可以按值排序？我只是想为自己安排。现在，如果我想添加新项目，它总是会拖尾。

![像这儿](../Images/013d75209f42d3057d390f060852de87.png)

如何排序？到 100 的值去顶部？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-04-19T23:03:26.223

这是（有点令人生气的）答案，至少在 Settings.bundle 的 plist 中的项目的情况下，我意识到这不是 OP 的情况。

要在 plist 中任意重新排序项目：

1.  通过在“值”列中单击来定位该行。最左边的列不允许拖动。
2.  拖入 Key 列的前约 64 个像素。将出现一条蓝线，指示您放手时该行将出现的位置。

这是 Xcode 9.2 中的演示。

[![在此处输入图像描述](../Images/129a05f21fa02c89ebd2b2f594354fac.png)](https://i.stack.imgur.com/ulCDQ.gif)

好像这还不是超级混乱……</p>

**首选项，垂直拖动**

您可以垂直拖放（即，无需输入 Key 列），但前提是您的目标是将项目移动到列表中的第一个。

[![在此处输入图像描述](../Images/296cbb09bb7c4017bae2da2d6001f1d7.png)](https://i.stack.imgur.com/vvpHp.gif)

**苹果显然知道如何做到这一点**

一旦您打开一个项目，其中的元素就可以完全按照您的预期进行拖放。

[![在此处输入图像描述](../Images/b6ff0051b64b332a441c1e043000598a.png)](https://i.stack.imgur.com/Bpttg.gif)

哇！？是的。这不需要*那么*痛苦，但它很可能会保持这种状态，除非人们站起来，一旦你知道解决方法，就很难做到。但是，如果您感到非常愤怒，请发出您的声音：[http](http://bugreporter.apple.com) ://bugreporter.apple.com 。（Fwiw，这是我的[开放式雷达](https://openradar.appspot.com/radar?id=5003160544346112)。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T11:26:22.167

您可以使用文本编辑器编辑 plist 文件。右键单击 plist 文件 -> 打开为 -> 源代码。

我认为你必须把你的字符串放在一个数组中

# java - 如何从数组转换 Java中的字符串[]

> ID：11224939
> 
> 赞同：3
> 
> 时间：2012-06-27T11:13:58.557
> 
> 标签：java

我必须以 String[] 格式获取我的内容提供程序查询的一部分。目前我使用：

```
 String[] selectionArgs = {"",""};
    selectionArgs[0] = Integer.toString(routeScheduleID);
    selectionArgs[1] = runDate.toString(); 
```

但在这种情况下，我有未知数量的元素。

如何在运行时更改数字（或使用数组之类的东西并转换回字符串 []。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:16:57.623

您可以使用`List<String>`来获取数据，然后从中获取数组：

```
List<String> lst = new ArrayList<String>();
lst.add(Integer.toString(routeScheduleID);
lst.add(runDate.toString());
lst.add(...);
...

String[] selectionArgs = lst.toArray(new String[lst.size()]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T11:16:44.760

您可以为此使用列表。像这样的字符串列表 -`List<String> str = new ArrayList<String>();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T11:19:51.187

```
List<String> selectionArgsList = new ArrayList<String>();
selectionArgsList.add("string1");
selectionArgsList.add("string2");

String[] selectionArgs = new String[selectionArgsList.length];
selectionArgsList.toArray(selectionArgs); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T11:16:10.417

您可以使用列表来填充数据，然后将列表转换为数组：

```
List<String> list = new ArrayList<String>();
list.add(item1);
list.add(item2);
...

String[] array = list.toArray(new String[0]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T11:17:14.177

```
List<String> selectionArgs = new ArrayList<String>();

selectionArgs.add(Integer.toString(routeScheduleID));
selectionArgs.add(runDate.toString());
selectionArgs.add(...).
 ...........

String[] array= selectionArgs.toArray(new String[selectionArgs.size()]); 
```

# asp.net-mvc - ASP.NET MVC 2.0 和 Flash 导航

> ID：11224940
> 
> 赞同：0
> 
> 时间：2012-06-27T11:13:58.827
> 
> 标签：asp.net-mvc, flash

我们正在开发一个很小但使用 Flash 导航的网站，因为我们使用的是 Flash，所以我们在 Flash 中对链接进行了硬编码，我们给出了如下链接

主页

> 主页/关于我们
> 
> 家庭/服务

以此类推其余链接，第一次点击工作正常，网址为[http://mysite.com/home/aboutus](http://mysite.com/home/aboutus)但如果我们点击服务链接，其制作网址为[http://mysite.com/home/主页/关于我们](http://mysite.com/home/home/aboutus)

为其添加额外的主页，它也不适用于主页

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:18:45.563

您可以将基本 url 作为参数传递给 Flash 电影，以便它可以构造正确的链接：

```
<param name="rootUrl" value="@Url.Content("~/")" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:12:42.010

浏览器中一个有趣的区别是 Flash 播放器以不同的方式查看“基地”的位置。例如，在旧版本的 IE 中，相对路径是从包含 swf 的页面的位置开始的，而在 FF 和其他浏览器中，它们是从实际 swf 的位置开始的。在您的嵌入代码中，您需要添加一个基本参数以使所有浏览器都相同。

```
<param name="base" value="."> 
```

然后，您可以根据 swf 的位置传递相对路径。或者，您也可以根据需要调整参数的值。

# php - 使用 PDO 获取单个返回值

> ID：11224941
> 
> 赞同：5
> 
> 时间：2012-06-27T11:14:00.337
> 
> 标签：php, pdo

对于此查询： `$sql='select col from table where other_col=?';`

我目前正在获取返回的数据，如下所示： `$data=$statement->fetch()['col'];`

这对我来说看起来不太好。有没有更好的方法来做到这一点，或者就这样好吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T11:16:40.310

你可以试试 ：

```
$data=$statement->fetchColumn(0); 
```

# python - 使用 upsert 更新 Mongodb 失败

> ID：11224942
> 
> 赞同：1
> 
> 时间：2012-06-27T11:14:07.720
> 
> 标签：python, mongodb, pymongo

这是失败的声明：

```
db.some_collection.update(query,modifier_set, upsert=True, safe=True) 
```

**modifier_set**的形式为`{"$inc":{...}, "$addToSet":{...}}`

我收到一个`OperationFailure`错误：

`$ operator made object too large`

现在，我的文档不太可能超过 16MB。

这种失败还有其他可能的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:47:21.480

这实际上是一个超大文件的情况。
`db.collection_name.stats()`确认了。

# c# - MS Dynamics 4.0：根据电子邮件地址检查记录是否存在

> ID：11224943
> 
> 赞同：0
> 
> 时间：2012-06-27T11:14:08.933
> 
> 标签：c#, asp.net, dynamics-crm, dynamics-crm-4

我在使用需要返回基于给定电子邮件地址的记录的 GUID 的方法时遇到问题。这就是我目前所拥有的：

```
 ColumnSet columnSet = new ColumnSet();
        columnSet.AddColumns(new[] { "leadid" });

        var query = new QueryExpression
        {
            EntityName = "lead",
            ColumnSet = columnSet
        };

        FilterExpression leadFilter = new FilterExpression();
        leadFilter.AddCondition(new ConditionExpression
        {
            AttributeName = "emailaddress1",
            Operator = ConditionOperator.Equal,
            Values = new object[] { emailAddress }
        });

        query.Criteria = leadFilter;

        BusinessEntityCollection result = crmService.RetrieveMultiple(query);

        foreach (BusinessEntity record in result)
        {
            //Guid leadId = ?? Not sure how to extract it. 
        } 
```

A）这似乎有点矫枉过正，因为我只需要一条记录（但不要认为我可以使用 Retrieve，因为我没有 id）。B）我如何在 foreach 中从上述内容中实际检索 GUID？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:51:45.930

A) 不能保证您只会取回一个实体，例如，可能存在使用相同电子邮件地址的多个潜在客户的情况。

B）您可以将`BusinessEntity`转换为您查询的实体，它是所有其他实体类型的抽象基类。

# html - IE7 - 显示：块内 无法正确显示

> ID：11224947
> 
> 赞同：0
> 
> 时间：2012-06-27T11:14:19.527
> 
> 标签：html, css, internet-explorer-7

如果您查看此代码：http: [//jsfiddle.net/b3KaM/2/](http://jsfiddle.net/b3KaM/2/)

在 IE7 中，即使设置了`<a>`标签，标签也不会拉伸到它们的父宽度。您可以看到列表项上的背景颜色设置为红色而链接上的背景颜色设置为黄色的差异。`<li>``display: block;`

它显然在 FF/Chrome 和朋友中运行良好。

编辑：这里的复杂性是我无法设置固定宽度 - 链接文本应保持在一行，整个列表应根据需要扩展。

我知道这是之前被问到的，我发现了一些关于 SO 的问题，但我找不到这个问题的有效解决方案 - 有什么想法吗？

如果不是 - 是否可以肯定地说在 IE7 上无法获得与在其他浏览器上相同的结果，即这是一个没有解决方法的 Internet Explorer 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:49:50.803

此问题是由 IE7 和更低版本[中称为`hasLayout`](http://www.satzansatz.de/cssd/onhavinglayout.html).

要解决此问题，您必须简单地阻止您的`a`元素“获得布局”。

不幸的是，有[大量的东西会导致元素“获得布局”](http://www.satzansatz.de/cssd/onhavinglayout.html#prop)。

您的`a`元素当前拥有`overflow: hidden`并`min-height`设置。如果您删除这些属性，它将在 IE7 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:33:07.947

对于块，您还必须为元素提供宽度。例如：- [http://jsfiddle.net/b3KaM/8/](http://jsfiddle.net/b3KaM/8/)

# 3d - 使用 2D Ortographic 相机的 3D 游戏

> ID：11224952
> 
> 赞同：1
> 
> 时间：2012-06-27T11:14:48.327
> 
> 标签：3d, unity3d

我正在缩放 800 个多边形的敌人，同时移动它们抛出空间并为它们设置动画，同时使用正交相机和廉价着色器......但我在 Iphone 3G 的性能（超高绘制调用、低帧率）方面遇到了非常糟糕的问题，4 ,4S。

当我禁用缩放时，性能非常好。

那么我的问题是，有没有其他方法可以在不缩放游戏中的元素的情况下使用正射相机或模拟具有良好性能的正射相机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:20:47.567

有一种方法可以使用正交相机而不进行缩放。

在相机的 Inspector 选项卡中，您将看到三个选项：大小、近剪裁和远剪裁。将这些值调整为您想要的场景大小，您会没事的。:)

# sql - 转置键值对 SQL 表

> ID：11224954
> 
> 赞同：2
> 
> 时间：2012-06-27T11:14:57.530
> 
> 标签：sql, sql-server, sql-server-2008

我有一个由几列组成的表，包括一个键值对。所以想象一下：

```
BookID, Key, Value
MyBook, Price, 19.99
MyBook, ISBN, 987878495793
MyBook, Pages, 354
MyBook2, ...., ....
MyBook2, ...., .... 
```

我需要将其转换为以下格式：

```
BookID, Price, ISBN, Pages
MyBook, 19.99, 987878495793, 354
MyBook2,.....,.............,.... 
```

即转置单元格 - 我将如何在 SQL 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T11:40:32.760

像这样的东西？

```
SELECT
  BookID, Price, ISBN, Pages
FROM
(
  SELECT BookID, Key, Value FROM yourTable
)
  AS SourceTable
PIVOT
(
  SUM(Value) FOR Key IN (Price, ISBN, Pages)
)
  AS PivotTable
ORDER BY
  BookID 
```

[http://technet.microsoft.com/en-us/library/ms177410(SQL.105).aspx](http://technet.microsoft.com/en-us/library/ms177410%28SQL.105%29.aspx)

# iphone - UITableViewcornerRadius 在 iOS 上存在边框性能问题

> ID：11224955
> 
> 赞同：5
> 
> 时间：2012-06-27T11:15:09.717
> 
> 标签：iphone, ios, uitableview, scroll, cornerradius

我有一些有趣的通知，滚动性能启用 ,`UITableView`并启用。`cornerRadius``borderWidth``borderColor`

```
self.tableView.layer.cornerRadius = 10.f;
self.tableView.layer.borderWidth = 1.0f;
self.tableView.layer.borderColor = [UIColor whiteColor].CGColor; 
```

如果我删除`borderWidth`并且`borderColor`滚动获得 60 FPS 没问题。只要我将这两个属性添加到图层 FPS 滴中。

有没有人建议或解释为什么会发生这种奇怪的行为？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T06:11:38.423

CALayer 具有针对此类性能问题的 shouldRasterize 属性。刚设置

```
self.tableView.layer.shouldRasterize = YES; 
```

这条线节省了我很多时间和工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:28:45.247

我刚刚发现带有borderWidth 的cornerRadius 的tableView 性能下降了很多。因此，我改为 5.f 而不是 10.f 半径，性能有了惊人的提高。仍然不完美，但明显更好......

# java - 在文件夹中添加新的 Excel 工作表时自动更新数据库

> ID：11224957
> 
> 赞同：0
> 
> 时间：2012-06-27T11:15:29.560
> 
> 标签：java, excel, db2

我需要编写一个 Java 程序来监控包含 excel 表（.xls 格式）的文件夹。添加新的 excel 表后，我必须更新 db2 中的数据库并将 excel 表移动到其他位置。请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:19:50.187

如果文件出现在目录中，听起来您需要得到通知。Java 7 对此有很好的支持，请参阅[这篇](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)关于 Watch Service API 的文章。db2 部分，不清楚您所说的“更新”是什么意思，但您可能想要解析 xls 文件的内容并进行一些数据库更新。[Apache POI](http://poi.apache.org/)是将文件内容读入 Java 进程的良好起点。

# php - 在 Codeigniter 中未定义 Jquery Ajax 发布错误

> ID：11224959
> 
> 赞同：0
> 
> 时间：2012-06-27T11:15:32.533
> 
> 标签：php, jquery, ajax, codeigniter

我在选中复选框时实现了一个 jquery ajax 表单提交。我总是在响应数据中收到未定义的错误。请找到我的代码如下。

**jQuery 邮报**

```
 $.ajax({
   type: "POST",
   url: filelink+"playlist/add_cart_item",
   data: {"product_id":id,"quantity":qty,"ajax":1},
   success: function(msg){
   alert( "Data Saved: " + msg );
   },
   error: function(jqXHR, textStatus, errorThrown) 
   { 
    alert(textStatus + " " + errorThrown) 
   }
  }); 
```

**控制器功能**

```
 function add_cart_item(){
     echo "true";
   } 
```

文件链接给了我确切的路径。Jquery 库文件也正确包含。任何人都可以请帮助哪里可能是问题所在。

**我正在使用 HMVC Codeigniter。有没有其他方法可以从 ajax 调用 php 文件？**

另外，当我将类型从 POST 更改为 GET 时，它会返回我的 ECHO “TEST” .. 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:42:21.637

几点。

1.  `add_cart_item()`尝试为 json 数据添加正确的标[头](https://stackoverflow.com/questions/267546/correct-http-header-for-json-file)
2.  尝试使用`console.log`而不是`alert`调试 javascript。
3.  尝试使用 firebug 调试 http 请求/响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:22:01.793

你有一个不安全的 ajax 调用..我推荐这种方式

```
$.ajax({
   type: "POST",
   url: filelink+"playlist/add_cart_item",
   data: {"product_id":id,"quantity":qty,"ajax":1},
   success: function(msg){
        alert( "Data Saved: " + msg );
    },
   error: function(jqXHR, textStatus, errorThrown) 
   { 
   alert(textStatus + " " + errorThrown) 
   }
});

function add_cart_item(){

     echo $_POST['product_id'];
    exit;

   } 
```

# php - Backbone.js，无法理解“saveWine”方法中的“app.wineList.create(this.model)”是什么

> ID：11224962
> 
> 赞同：0
> 
> 时间：2012-06-27T11:15:46.880
> 
> 标签：php, backbone.js

我无法理解“saveWine”方法中的“app.wineList.create(this.model)”是什么。它将如何工作？我是backbone.js的新手，请帮助我理解这一点。我知道this.model.save()。

实际上我在这里删除了一些代码。只是我已经发布了我的问题所在的代码。

谢谢。

```
 // Models
    window.Wine = Backbone.Model.extend({
        urlRoot:"../api/wines",
        defaults:{
            "id":null,
            "name":"",
            "grapes":"",
            "country":"USA",
            "region":"California",
            "year":"",
            "description":"",
            "picture":""
        }
    });

    window.WineCollection = Backbone.Collection.extend({
        model:Wine,
        url:"../api/wines"
    });

    // Views

    window.WineView = Backbone.View.extend({

        template:_.template($('#tpl-wine-details').html()),

        initialize:function () {
            this.model.bind("change", this.render, this); // (event, function, context)
        },

        render:function (eventName) {
            $(this.el).html(this.template(this.model.toJSON()));
            return this;
        },

        events:{

            "click .save":"saveWine"

        },

        saveWine:function () {
            this.model.set({
                name:$('#name').val(),
                grapes:$('#grapes').val(),
                country:$('#country').val(),
                region:$('#region').val(),
                year:$('#year').val(),
                description:$('#description').val()
            });
            if (this.model.isNew()) {
                app.wineList.create(this.model);
            } else {
                this.model.save();
            }
            return false;
        }

    });

    // Router
    var AppRouter = Backbone.Router.extend({

        routes:{
            "":"list",
            "wines/:id":"wineDetails"
        },

        initialize:function () {
            $('#header').html(new HeaderView().render().el);
        },

        list:function () {
            this.wineList = new WineCollection();
            this.wineListView = new WineListView({model:this.wineList});
            this.wineList.fetch();
            $('#sidebar').html(this.wineListView.render().el);
        },

        wineDetails:function (id) {
            this.wine = this.wineList.get(id);
            if (app.wineView) app.wineView.close();
            this.wineView = new WineView({model:this.wine});
            $('#content').html(this.wineView.render().el);
        }

    });

    var app = new AppRouter();
    Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:22:38.660

如[骨干文档](http://documentcloud.github.com/backbone/#Collection-create)中所述：

> 方便在集合中创建模型的新实例。相当于实例化一个带有属性哈希的模型，将模型保存到服务器，创建成功后将模型添加到集合中。

因此，它将模型添加到您的酒单集合中，并将其保存到服务器。

# javascript - Jasmine 对浏览器的依赖

> ID：11224964
> 
> 赞同：0
> 
> 时间：2012-06-27T11:15:55.093
> 
> 标签：javascript, bdd, jasmine

从最近几天开始，我正在阅读和研究 Jasmine。阅读后我能够编写规范（测试用例）并且能够成功运行它。

我还调试了茉莉花的内部流程。

由于 jasmine 嵌入在 html 文件中，并且该 html 文件将在浏览器上运行。

我想知道茉莉花在浏览器（任何浏览器）上的任何类型的依赖关系。

茉莉花是在使用浏览器的脚本引擎吗？如果是，它是如何配置的？

如果有人有想法或教程，请分享。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:59:56.787

Jasmine 本身不依赖于浏览器或 DOM。它通常在某种浏览器中运行，因为被测代码依赖于 DOM，或者仅仅是因为它是一种方便的入门方式。在这种情况下，是的，它使用的是浏览器的 JavaScript 引擎。它可以以这种方式在大多数现代浏览器中使用。

然而，Jasmine 在浏览器之外的 JavaScript 环境中运行良好。例如，它是可以与 Node.js 一起使用的几个测试框架之一。

Jasmine 也可以与[Phantom.js](http://phantomjs.org/)等“无头”浏览器一起使用。这可以加快您的测试并允许您将它们集成到持续集成过程中。

浏览器本身不需要以任何特殊方式配置即可运行 Jasmine。您如何设置测试可能取决于您使用的服务器端框架的类型以及 JavaScript 文件的组织方式。检查[Jasmine Wiki](https://github.com/pivotal/jasmine/wiki)上的环境列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:45:58.893

[茉莉花](http://pivotal.github.com/jasmine/)官网说

“它（Jasmine）不依赖于任何其他 JavaScript 框架。它不需要 DOM。”

Jasmine 需要在 JavaScript 解释器/VM 中运行才能工作。浏览器是执行此操作的一种方法。Jasmine 可以在任何支持 JavaScript 的浏览器中运行。Jasmine 没有外部依赖项。

如果您使用的是独立的 Jasmine 版本，则只需加载规范运行器网页即可运行规范。

# python - 从 Python 中删除编译元数据

> ID：11224966
> 
> 赞同：1
> 
> 时间：2012-06-27T11:16:01.300
> 
> 标签：python, makefile, configure

我在我的一个产品中使用 Python。

我使用以下方法编译了源代码：

```
./configure --prefix=/home/myname/python_install
make
make install. 
```

我查看了 python_install 目录并注意到许多文件（config、pyc、pyo）公开了有关我的环境的信息（即包含我编译它的位置、目录、日期、名称等的字符串。）

我用了 '`grep -i -r "myname"' *`

如何从所有这些文件中删除此元数据？我不想用这些信息运送我的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:25:35.063

这可能不是您需要担心的事情。您存储文件的位置是秘密吗？如果是这样，请选择一个不同的目录名称作为开头。否则，我怀疑您将能够删除其位置的所有痕迹。

顺便说一句，发布一个 Python 项目意味着感兴趣的一方基本上可以阅读您的 Python 源代码，那么为什么要担心文件的位置呢？

# objective-c - 在 iOS 上本地化剪切|复制|粘贴菜单

> ID：11224969
> 
> 赞同：34
> 
> 时间：2012-06-27T11:16:22.587
> 
> 标签：objective-c, ios, cocoa-touch, localization, plist

我在本地化我制作的丹麦应用程序时遇到了一些问题。（语言，不是糕点）

我在 info.plist 中将 CFBundleDevelopmentRegion 设置为丹麦语的 da_DK，但出现文本输入的弹出窗口仍然是英语，即使在运行丹麦语操作系统的手机上也是如此。

![在此处输入图像描述](../Images/a971249a12a79a09a2ee53b8736b426b.png)

我如何在工作名称中更改此内容？

测试设备是运行 iOS 5.1 的未越狱 iPhone 4S，iOS 设置为丹麦语，并关联了一个丹麦语 iTunes 帐户。

我不使用 .xibs 进行设计。所有接口都被编程为视图控制器。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-01T13:02:18.203

在 Xcode 的文件树 (Project Navigator) 中选择您的项目。在右侧窗格中再次选择您的项目。选择信息并添加您的语言。

[![配置 i18n](../Images/14a15839910a60bf601bf581b0de47ee.png)](https://i.stack.imgur.com/RnRFE.jpg)

* * *

我创建了一个[示例项目](https://github.com/vikingosegundo/iOSCopyPasteL10Sample)，结果如下：

[![在此处输入图像描述](../Images/61d255daa599965ccabe5f263b91ad57.png)](https://i.stack.imgur.com/gMGdV.jpg)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-30T14:28:29.003

You can do this directly in the info.plist. Something like this:

```
<key>CFBundleDevelopmentRegion</key>
<string>en</string>
<key>CFBundleLocalizations</key>
<array>
  <string>en</string>
  <string>de</string>
  <string>es</string>
  <string>ja</string>
</array> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-16T21:20:30.900

Try adding/setting the "Localized resources can be mixed" flag in Info.plist to YES.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T14:25:30.640

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T08:28:49.090

If you can't get it working the official way, as provided by @vikingosegundo, you can do this with some creative engineering (Creative as in, oh my god that is dangerous). I discovered this method when I accidentally overrode `[NSBundle localizedStringForKey:value:tableName:]`.

1) Add a category to NSBundle with the following methods:

```
#import <objc/runtime.h>

+ (void) load  {
    Method original, swizzled;

    original = class_getInstanceMethod(self, @selector(localizedStringForKey:value:table:));
    swizzled = class_getInstanceMethod(self, @selector(swizzled_localizedStringForKey:value:table:));
    method_exchangeImplementations(original, swizzled);
}

- (NSString*) swizzled_localizedStringForKey:(NSString *)key value:(NSString *)value table:(NSString *)tableName {

    NSLog(@"Key: %@. Value: %@", key, value);

    return [self swizzled_localizedStringForKey: key value:value table:tableName];
} 
```

2) Where I simply log the key/value, you want to put an if ([key isEqualToString: xxx] ) block. In there, you want to catch (at least some of) the following key values: Cut, Copy[Menu], Select, Select All, Paste, Delete[Menu], Replace..., Define, Speak, Pause. These are the default values that can appear there.

3) When you have caught the value you can look up in a custom table or use hardcoded values. If you look up in a custom table make sure you have a catch in your swizzled method to avoid infinite looping in your custom table.

NB: Why do you need to swizzle? Because this over-rides all Apple text for you app. You will still want the defaults for all the other strings, so you need to swizzle to get the defaults for the strings you aren't interested in.

Good luck. Paul

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-27T12:13:54.527

搜索您的 .xib 是否已本地化（您将在右侧面板的检查器中找到它）如果是，请转到您的项目/目标设置按 + 号并选择“将英语复制到丹麦语”或其他含义相同的内容（我目前无法检查正确的项目）

顺便说一句，它被称为 iPhone 4S。

# java - 使用 Apache FOP 从大图像生成 PDF

> ID：11224971
> 
> 赞同：1
> 
> 时间：2012-06-27T11:16:31.950
> 
> 标签：java, xslt, xsl-fo, apache-fop

我想使用 Apache FOP 和 XSLT 从图像生成 PDF。但是，如果图像更大，然后是 PDF 文档页面，那么它只会获得页面上可用的空间（包括右边距和下边距）。因此，部分图像超出了页面边界。

这是否可以设置 fop 以便如果图像无法放入页面中，它会自动拆分为多个页面？

这是我的 xslt 模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format"
    xmlns:java="http://xml.apache.org/xslt/java"
    xmlns:dp="http://www.dpawson.co.uk"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:f="Functions"
    xmlns:xdt="http://www.w3.org/2005/02/xpath-datatypes"
    exclude-result-prefixes="java">

    <xsl:output method="xml" version="1.0" omit-xml-declaration="no" indent="yes" />

    <xsl:param name="image-print-path" />

    <xsl:template match="/">
        <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <fo:layout-master-set>
                <fo:simple-page-master master-name="simpleA4"
                    page-height="29.7cm" page-width="21cm" margin-top="2cm"
                    margin-bottom="2cm" margin-left="2cm" margin-right="2cm">
                    <fo:region-body margin-top="20pt" margin-bottom="35pt" />
                    <fo:region-before extent=".5in"/>
                    <fo:region-after extent=".5in"/>
                </fo:simple-page-master>
            </fo:layout-master-set>

            <fo:page-sequence master-reference="simpleA4">
                <fo:static-content flow-name="xsl-region-before" text-align="left">
                    <fo:block font-size="10pt">
                        Print
                    </fo:block>
                </fo:static-content>

                <fo:static-content flow-name="xsl-region-after">
                    <fo:block font-size="10pt" text-align="left">
                        something else
                    </fo:block>
                <!--    TODO: add current date, page number -->
                </fo:static-content>

                <fo:flow flow-name="xsl-region-body">
                    <fo:block font-size="10pt" page-break-after="always">
                        <fo:external-graphic src="{$image-print-path}"/>
                    </fo:block>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T12:30:58.720

[看起来规范](http://www.w3.org/TR/xsl/#fo_external-graphic)中没有任何可以按照您需要的方式格式化的内容。这给您留下了几个选择：

1.  在将图形注入 XSL 工作流程之前检查图形并将其切割成多个图像以在多个页面中使用
2.  inspect the graphic to determine it's dimensions and create a page size big enough to contain it, and leave the slicing to printers
3.  set `content-width` to `scale-down-to-fit` to show the entire graphic on a single page

# mysql - Mysql外键并允许现有字段为空

> ID：11224982
> 
> 赞同：2
> 
> 时间：2012-06-27T11:16:58.627
> 
> 标签：mysql, null, foreign-keys, innodb

所以我正在更改数据库的范围，并且需要创建一个作为外键的字段，允许空值。

我在 phpmyadmin 中执行此操作，但查询如下

```
ALTER TABLE `nuggets` CHANGE `n_st_id` `n_st_id` INT( 11 ) NULL DEFAULT NULL 
```

它告诉我查询成功运行，但它显示 null 为 no，默认为 0。它是一个 innodb 表，有什么想法为什么不让我更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:38:09.467

这是因为它被索引了，我必须删除索引然后设置它，然后重置索引

# java - 将组件值和另一个参数发送到侦听器

> ID：11224994
> 
> 赞同：3
> 
> 时间：2012-06-27T11:17:46.750
> 
> 标签：java, ajax, jsf, primefaces, listener

我有一个带有各种复选框的面板网格。复选框与某个掩码相关联。当复选框被按下时，复选框的值（选中/取消选中）和特定于该复选框的掩码参数应传递给侦听器。

```
<p:selectBooleanCheckbox value="#{options.mustChangePasswordMask}">
    <p:ajax listener="#{options.selectionChanged}" /> 
</p:selectBooleanCheckbox>

<p:selectBooleanCheckbox value="#{options.mustChangePasswordMask}">
    <p:ajax listener="#{options.selectionChanged('MASK_1')}" /> 
</p:selectBooleanCheckbox> 
```

这两个代码片段只完成了我想要的一半工作。我想在所有复选框中使用监听器，所以我不能在监听器中使用 mustChangePasswordMask 属性。是否可以将复选框值作为参数发送给侦听器或以侦听器可访问的其他方式发送？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T11:21:03.877

当前组件在 EL 中可用作隐式变量`#{component}`。在输入组件中，这将使用[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)类的实例进行设置，该实例又具有[`getValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutput.html#getValue%28%29)返回提交、转换和验证值的方法。所以，这应该做

```
<p:ajax listener="#{options.selectionChanged(component.value)}" /> 
```