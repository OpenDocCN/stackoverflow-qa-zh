# StackOverflow 问答 12368000-12368999

# ruby - 在 MACOSX 上为 ruby 配置 vim

> ID：12368002
> 
> 赞同：-3
> 
> 时间：2012-09-11T10:47:29.450
> 
> 标签：ruby, vim

我正在尝试配置`vim`. 我暂时没有文件。我应该创建一个吗？我的. 读哪一本？`ruby1.9`
`~/.vimrc``~/.viminfo``Mac OSX``vim`

任何帮助配置`vim`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:57:06.610

首先，vimrc 和 viminfo 是用于不同用途的不同文件。通常，vimrc 包含 vim 行为的配置。viminfo 是持久存储剪切缓冲区和其他东西。所以如果你想为 ruby​​ 配置 vim，我建议把它们放在 vimrc 中。但更好的选择是使用 vim 插件并为您自己的方便进行修改。它与操作系统平台无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:07:57.663

1.  **查看你的 Vim 版本是否支持 Ruby。**

    ```
    :echo has('ruby') 
    ```

    `1`如果 Ruby 支持是内置的，则上面的命令应该返回，`0`否则。

    如果答案是`1`，您可以继续执行步骤 3。

    如果答案是`2`，你应该安装一个更完整的 Vim。转到第 2 步。

2.  **安装更好的 Vim。**

    你有很多选择：从[源](http://www.vim.org/download.php)手动、通过[MacPorts](http://www.macports.org/)、通过[Homebrew](https://github.com/mxcl/homebrew)或最简单的下载[MacVim](http://code.google.com/p/macvim/)。

    *   **MacPorts**

        设置 MacPorts 后，在 shell 中发出以下命令：

        ```
        $ sudo port install vim +huge +ruby 
        ```

    *   **家酿**

        设置 Homebrew 后，在 shell 中发出以下命令：

        ```
        $ brew install vim 
        ```

    *   **麦克维姆**

        下载并安装。

3.  **红宝石支持**

    没什么可做的。

您似乎已经找到了添加 Rails 支持的方法。

教程中提到的所有文件和文件夹如果不存在，则必须由您创建：`~/.vimrc`、`~/.vim/`、`~/.vim/autoload`等。

# android - 尝试添加视图时出现Android NULL指针异常

> ID：12368005
> 
> 赞同：2
> 
> 时间：2012-09-11T10:47:48.530
> 
> 标签：android, android-layout

我对 Android 编程已经 2 天了。我可能在核心层面犯了错误。如果是这种情况，请原谅。

我正在尝试将文本框添加到相对布局。单击按钮时。方法通过属性绑定到按钮`android:onClick="method"`

通过执行以下操作。

```
public method (View view){
    RelativeLayout vRL = (RelativeLayout)findViewById(R.layout.rLayout);
    TextView vET = new TextView(this);
    vET.setText("Text added to view.");
    vET.setId(1);
    vRL.addView(vET);
    setContentView(R.layout.rLayout);
} 
```

但是我在`vRL.addView(vET);`

*   我做错了什么？-或者-
*   我没有`TextView`正确添加元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:49:59.997

在下面一行

```
RelativeLayout vRL = (RelativeLayout)findViewById(R.layout.rLayout); 
```

更改`R.layout.rLayout`为`R.id.rLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:50:13.727

将下面的行替换为

```
`RelativeLayout vRL = (RelativeLayout)findViewById(R.id."id name of relative layout");` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:50:19.403

```
setContentView(R.layout.rLayout); 
```

把这条线放在`onCreate()`Activity..

这条线来自`method()`

```
RelativeLayout vRL = (RelativeLayout)findViewById(R.id.rLayout); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:52:11.460

像这样改变：

```
public method (View view){
    RelativeLayout vRL = (RelativeLayout)findViewById(R.id.rLayout);
    TextView vET = new TextView(this);
    vET.setText("Text added to view.");
    vET.setId(1);
    vRL.addView(vET);
    setContentView(R.layout.rLayout);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T11:05:08.537

将 R.layout.rLayout 更改为 R.id.rLayoutR.layout.rLayout);

# php - 将用户重定向到移动网站的最佳技术

> ID：12368007
> 
> 赞同：1
> 
> 时间：2012-09-11T10:47:54.773
> 
> 标签：php, javascript, apache

您最喜欢将用户重定向到自定义构建的移动站点的技术是什么（例如：mysite.com -> m.mysite.com 或 mysite.com/m）。

我已经尝试过[检测移动浏览器](http://detectmobilebrowsers.com/)JS，它看起来不错。但是，我能看到的是，它首先加载主站点，在所有主站点内容完全加载后，用户将被重定向到移动站点。这需要很多时间。

在此处分享您的建议和最佳实践指南。我也想学那个。:)

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:58:40.027

我推荐使用这个 PHP 库 [http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

```
if ($detect->isMobile()) {
    // any mobile platform
} 
```

也可以进行特定的设备检测，例如 iOS

```
if($detect->isiOS()){
    // code to run for the Apple iOS platform.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:52:44.660

使用检测移动浏览器 PHP（不是 javascript）代码。将此代码插入 index.php 的第一行

```
<?php
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://detectmobilebrowser.com/mobile');
?> 
```

# c# - 高级 JSON 序列化格式化选项

> ID：12368008
> 
> 赞同：0
> 
> 时间：2012-09-11T10:48:05.823
> 
> 标签：c#, json, serialization, json.net

我在列表对象内有一些对象形式的数据。现在我想将此数据序列化为 JSON。为此，我（目前）使用 JSON.NET。我的问题是

```
JsonConvert.SerializeObject(list, ...) 
```

我似乎只能选择缩进整个内容，也就是每个键/值，或者根本不缩进。

```
{"Variable1":1,"Variable2":"2"},{"Variable1":1,"Variable2":"2"},...

or

{
    "Variable1": 1,
    "Variable2": "2"
},
{
    "Variable1": 1,
    "Variable2": "2"
},
... 
```

我想得到这个：

```
{ "Variable1": 1, "Variable2": "2" },
{ "Variable1": 1, "Variable2": "2" }, 
```

但不必自己显式地编写每个键/值（JsonTextWriter 或手动）。我只想通过列表并获得上述内容。这有可能吗？目前，我正在序列化每个对象，通过遍历列表并运行一些替换、正则表达式替换和类似的操作，以获得所需的输出，具体取决于输入列表。有没有更简单的方法可以做到这一点，而无需编写自己的序列化方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:02:22.223

你好，我找到了一些可以帮助你启动特殊格式化程序的东西，我从这里将它从 javascript 翻译成 c#：[https ://github.com/umbrae/jsonlintdotcom/blob/master/c/js/jsl.format.js](https://github.com/umbrae/jsonlintdotcom/blob/master/c/js/jsl.format.js)

它在没有它们的情况下向 json 字符串添加空格。我认为您可以根据自己的需要修改此格式化程序。

```
private static string PrettyPrinter_repeat(string s, int count) {
    string ns = "";

    for(int i = 0; i < count; i++) ns += s;
    return ns;
}

public static string PrettyPrinter(string json)
{
    int     i           = 0,
            il          = 0;

    string  tab         = "    ",
            newJson     = "";

    int     indentLevel = 0;
    bool    inString    = false;
    char    currentChar = default(char);

     for (i = 0, il = json.Length; i < il; i += 1) 
     {
        currentChar = json[i];

        switch (currentChar) {
        case '{': 
        case '[': 
            if (!inString) { 
                newJson += currentChar + "\n" + PrettyPrinter_repeat(tab, indentLevel + 1);
                indentLevel += 1; 
            } else { 
                newJson += currentChar; 
            }
            break; 
        case '}': 
        case ']': 
            if (!inString) { 
                indentLevel -= 1; 
                newJson += "\n" + PrettyPrinter_repeat(tab, indentLevel) + currentChar; 
            } else { 
                newJson += currentChar; 
            } 
            break; 

        case ',': 
            if (!inString) { 
                newJson += ",\n" + PrettyPrinter_repeat(tab, indentLevel); 
            } else { 
                newJson += currentChar; 
            } 
            break; 
        case ':': 
            if (!inString) { 
                newJson += ": "; 
            } else { 
                newJson += currentChar; 
            } 
            break; 
        case ' ':
        case '\n':
        case '\t':
            if (inString) {
                newJson += currentChar;
            }
            break;
        case '"': 
            if (i > 0 && json[i - 1] != '\\') {
                inString = !inString; 
            }
            newJson += currentChar; 
            break;
        default: 
            newJson += currentChar; 
            break;                    
        } 

     }

    return newJson; 

} 
```

# ajax - ajax json请求，总是返回错误

> ID：12368011
> 
> 赞同：2
> 
> 时间：2012-09-11T10:48:23.683
> 
> 标签：ajax, json

您好，我遇到了 ajax json 请求的问题。即使请求成功，我总是会收到错误消息。目前我有这个代码：

```
function sumbitLoginForm(user, pass) {
    if (user.trim() == '' || pass.trim() == '') {
        alert("You must enter username and password!");
    } else {
        $.ajax({
            type : 'POST',
            url : 'https://url.php',
            dataType : 'json',
            data : {
                userlogin : user,
                userpass : pass
            },
            contentType: "application/json;",
            success : function(data) {
                $("#images").html("uspeshno");
            },
            error : function(data) {
                $("#images").html("greshka");
            }
        });
        }

    return false;
}

$(document).ready(function() {
    clearPageInputs();
    $("#submitButton").click(function() {
        sumbitLoginForm($("#username").val(), $("#password").val());
    });
}); 
```

无论我输入什么用户名和密码，我总是出错。但是请求的状态正在改变，如果我输入正确的用户并通过，我会得到状态 302 暂时移动，但是当我输入错误的用户或通过时，我会得到状态 200 OK。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:44:47.567

**PRG 模式和 Ajax**

当用户名和密码无法验证时，您的服务器似乎返回了 HTTP 200 状态代码。这是正确的行为，因为 HTTP 错误代码不是针对应用程序错误，而是针对 HTTP 协议错误。

当用户名和密码匹配成功时，您将被重定向到另一个页面。这也是正常行为，例如防止其他人使用返回键重复使用您的登录凭据。

这称为发布/重定向/获取模式。

请参阅：[http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

问题是 PRG 模式不能很好地与 Ajax 应用程序配合使用。重定向应由浏览器处理。因此它对 jQuery 代码是透明的。Ajax html 响应将是 302 的 Location 标头中提到的页面。您的 Ajax 应用程序将无法看到它正在被重定向。所以你被卡住了。

在我的一个项目中，我在服务器端解决了这个问题。如果我检测到 Ajax 调用，我不会发送重定向而是发送正常的 200 响应。这仅在您有权访问服务器代码时才有效。

如果您无法更改 Ajax 调用的重定向，那么您可以解析响应标头或 html 以查看您是否被重定向并采取相应措施。登录可能会设置一个 cookie，因此您可以尝试查找该 cookie 的存在。

# java - hashmap 出现并发修改异常的问题

> ID：12368012
> 
> 赞同：1
> 
> 时间：2012-09-11T10:48:24.380
> 
> 标签：java, hashmap, concurrentmodification

我在使用地图并执行一些删除时收到以下错误。如何避免这种情况？

```
Caused by: java.util.ConcurrentModificationException
    at java.util.HashMap$HashIterator.nextEntry(HashMap.java:793)
    at java.util.HashMap$EntryIterator.next(HashMap.java:834)
    at java.util.HashMap$EntryIterator.next(HashMap.java:832) 
```

```
 Map<FormField, Object> ItemMap = domainItem.getValues();         
   for (Map.Entry<FormField, Object> ValMap : ItemMap.entrySet()) {         
       List<Field> groupIdList = Mapper.getGroupId(groupFieldId);           
       for (Field field : groupIdList) {
           ItemMap.put(new FormField(field), domainItem.getDomainItemLinkId());
       }
       ItemMap.remove(ValMap.getKey());
   } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T10:49:52.240

更新：

使用 Iterator 并`ConcurrentHashMap`避免这种情况

以下不会抛出异常

```
 Map<Integer, String> map = new ConcurrentHashMap<Integer, String>();
    map.put(1, "a");
    map.put(2, "b");
    map.put(3, "c");
    map.put(4, "d");
    for (Iterator<Integer> keys = map.keySet().iterator(); keys.hasNext();) {
        Integer key = keys.next();
        String val = map.get(key);
        map.remove(key);
    } 
```

或在迭代时使用另一个地图，最后将其复制到源

例如：

```
 Map<Integer, String> dummy = new HashMap<Integer, String>();
    map.put(1, "a");
    map.put(2, "b");
    map.put(3, "c");
    map.put(4, "d");
    dummy.putAll(map);
    for (Iterator<Integer> keys = dummy.keySet().iterator(); keys.hasNext();) {
        Integer key = keys.next();
        String val = map.get(key);
        map.remove(key);
    }
    System.out.println(map); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:52:42.137

Map 按键值对中的键排序。当您在遍历 Map 时添加或删除元素时，程序基本上会丢失它在 Map 中的“位置”的跟踪。

要解决这个问题，请尝试制作一个单独的临时传输地图。还有一个类`Iterator`可能适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:53:02.130

避免此问题的一种方法是遍历副本。

```
for (Map.Entry<FormField, Object> ValMap : 
     new HashMap<FormField, Object>(ItemMap).entrySet()) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T20:14:34.910

可以在没有地图副本的情况下完成，执行此示例并查看代码：

```
public static void main(String[] args)
  {

    System.out.println("creating map ...");

    Map<String, String> dummyMap = new HashMap<>();
    while (dummyMap.size() < 10)
    { dummyMap.put(String.valueOf(new Random().nextInt()), String.valueOf(new Random().nextInt())); }

    System.out.println("start, map size: " + dummyMap.size() + ", keys=" + dummyMap.keySet());

    System.out.print("going to remove: ");
    for (Iterator<String> keys = dummyMap.keySet().iterator(); keys.hasNext(); )
    {
      final String key = keys.next();

      // delete map entries per random
      if(new Random().nextInt(3)>1)
      {
        System.out.print(key+" ");
        keys.remove();
      }
    }
    System.out.print("\n");

    System.out.println("done, map size: " + dummyMap.size() + ", keys=" + dummyMap.keySet());
  } 
```

看看[这个类似的问题](https://stackoverflow.com/questions/602636/concurrentmodificationexception-and-a-hashmap)。

高温下，

# .htaccess - 始终将 baseurl 重写为 /my-page

> ID：12368013
> 
> 赞同：0
> 
> 时间：2012-09-11T10:48:30.430
> 
> 标签：.htaccess

由于许多原因，我需要将我的基本 URL 重写为一个页面，该页面是一个集线器。

即[http://data.mydomain.com](http://data.mydomain.com)始终将用户定向到[http://data.mydomain.com/my-page](http://data.mydomain.com/my-page)

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:54:05.627

用这个

```
RewriteCond %{REQUEST_URI} !^/my-page
RewriteRule ^(.*)$ /my-page/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:50:49.093

你有什么尝试吗？
/?$ /我的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:52:00.793

在你的 htaccess 中添加这个：

```
RewriteEngin on
RewriteCond %{HTTP_HOST} ^data.mydomain.com$
RewriteRule ^/?$ /my-page [L,R=301] 
```

# php - facebook用户授予权限后强制刷新页面以继续

> ID：12368014
> 
> 赞同：0
> 
> 时间：2012-09-11T10:48:32.577
> 
> 标签：php, facebook, api, permissions

我需要向 facebook 用户请求许可以获取特定信息（电子邮件、生日）。

当用户第一次启动应用程序时，如果他接受了权限，他将被迫刷新页面以显示数据（只是有关用户的信息，请参阅我的代码）。

问题是它有时可以正常工作，这就是为什么我不知道这是 Facebook 问题还是我自己的代码中的问题。

如果您可以查看我的代码，将不胜感激！提前致谢

```
<?php
require 'php-sdk/src/facebook.php';
$facebook = new Facebook(array(
            'appId' => '453976824647366',
            'secret' => 'fe86f3b0b34b3ed6XXXXXX',
            'cookie' => true,
        ));

// Get User ID
$user = $facebook->getUser();
if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
        $friends = $facebook->api('/me/friends');
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
}
?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
        <style>
            body {
                font-family: 'Lucida Grande', Verdana, Arial, sans-serif;
            }
            h1 a {
                text-decoration: none;
                color: #3b5998;
            }
            h1 a:hover {
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
    <fb:login-button autologoutlink="true" perms="email,user_birthday" size="large" onlogin="window.location = 'youlike.php';">Connect to this application using Facebook</fb:login-button>
    <?php if ($user): ?>
        <h3>Vous</h3>
        <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

        <pre><?php print_r($user_profile); ?></pre>
        Date de Naissance : <?php echo $user_profile["birthday"]; 

                echo '<ul>';
        foreach ($friends["data"] as $value) {
            echo '<li>';
            echo '<div class="pic">';
            echo '<img src="https://graph.facebook.com/' . $value["id"] . '/picture"/>';
            echo '</div>';
            echo '<div class="picName">'.$value["name"].'</div>'; 
            echo '</li>';
        }
        echo '</ul>';?>
    <?php endif ?>
</body>
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
</div>
<script>
    FB.init({appId: '453976824647366', status: true,
        cookie: true, xfbml: true});

</script>
</div>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:52:39.620

您始终可以强制刷新`login`/ `logout`，以确保：

在你之后`FB.init`

```
FB.Event.subscribe('auth.login', function(){
    window.location.reload();
});
FB.Event.subscribe('auth.logout', function(){
    window.location.reload();
}); 
```

# javascript - {X} 如何工作？

> ID：12368018
> 
> 赞同：2
> 
> 时间：2012-09-11T10:48:40.043
> 
> 标签：javascript, android, onx

我最近了解了 on{X}，它允许用户定义规则并根据规则触发操作。这究竟是如何工作的？{X} 如何拨打设备电话？它是否有一个在 Android 手机上运行的基础应用程序，然后在其上进行编程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:44:05.733

据我所知。on{x} 是一个用于开发可以在手机上执行高级功能的小型 JavaScript 的框架。例如。我有一个脚本，在我的会议期间，电话会自动振动，然后在会议结束（或应该结束）时恢复正常铃声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T01:42:10.877

是的，有一个应用程序需要在您希望脚本正常工作的任何时候都在设备上运行。基本上，该应用程序仅以手机上发生的所有触发数据为基础，并将该信息传递回您已安装的脚本。如果一个匹配事件中的触发器，则执行该函数。至于更棘手的问题，比如“它如何解释这个”和“层如何在这个级别上交互”，我不知道，但这纯粹是基于触发器的。你不能独立运行一个函数，没有输入，在启动应用程序方面，API 中很少有真正使它成为一个有价值的平台（到目前为止）

# php - 计算相当于用户时区和 PHP 中固定时间的时间

> ID：12368023
> 
> 赞同：0
> 
> 时间：2012-09-11T10:49:06.743
> 
> 标签：php, datetime, timezone

下面是我正在处理的一些文本，它告诉用户在线销售的开始时间相对于他们当地的时区。在线销售总是在太平洋时间上午 9 点开始，*但不是每天都开始*。

> 我们的在线销售从太平洋夏令时间**上午 9 点**开始。根据您的时区设置，您的当地时间是**2012 年 9 月 11 日 - 上午 12:02 HST**，**比 PDT 晚UTC** **-10**或**3**小时。销售将于当地时间上午 **XX**点开始。

 ****在上面的示例中，用户的时区是 Pacific/Honolulu，并且存储在数据库中，并且在他们登录时也在名为 user_tz 的会话中设置。

我计算了大部分变量。我被困在这部分（销售将在当地时间上午**XX**点开始。）...这是如何确定当地时间相当于太平洋时间上午 9 点，以及当地时间相当于是*同一天*还是*下一天天*取决于他们比太平洋时间提前多远。例如，澳大利亚墨尔本，由于墨尔本比太平洋时间早 17 小时，因此销售将于次日 9 月 12 日凌晨 2:00 开始。

在上面的示例中，“XX”应该是早上 6:00。

PHP 版本 5.3.14

```
<?php
// gets the users time zone offset in seconds from UTC
// shown above as -10
$user_tz_offset = getTimeZoneOffset($_SESSION['user_tz']);

// gets the dst code of the timezone ...example: pdt or pst
// shown above as HST
$dateTime = new DateTime(); 
$dateTime->setTimeZone(new DateTimeZone($_SESSION['user_tz'])); 
$user_tz_dst = $dateTime->format('T'); 

// gets the difference in hours from Pacific time to the users time zone
// shown above as 3
$hours_diff = abs(($user_tz_offset - TZ_OFFSET)/3600);

// gets the users local time
// shown above as September 11, 2012 - 12:02 am HST
$user_time_now = date("F j, Y \- g:i a", (time()+$user_tz_offset));

// add a plus sign to time zones that are not negative
if( !strstr( $user_tz_offset, "-" ))
{
    $add_plus_sign = '+';
}

// determine whether we should say "ahead of" or "behind" respective to Pacific time
// TZ_OFFSET is a constant defined in config
if( $user_tz_offset < TZ_OFFSET)
{
    $behind_or_ahead = 'behind';
}
else
{
    $behind_or_ahead = 'ahead of';

}
?> 
```****

# django - django 模板 widthratio 结果为逗号分隔

> ID：12368029
> 
> 赞同：0
> 
> 时间：2012-09-11T10:49:40.953
> 
> 标签：django, django-templates

{% widthratio A 1 B %} 将 A*B 作为数字给出，我需要以逗号分隔的结果。例如。-

```
{% widthratio 100 1 100 %} 
```

给 10000 我需要 10,000。知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:20:58.090

这就是你要找的

```
{% load humanize %}

{{ my_num|intcomma }} 
```

确保你已经`django.contrib.humanize`安装在你的 INSTALLED_APPS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-21T21:37:56.493

您可以使用**as**将其保存为变量，如下所述，

```
{% widthratio 100 1 100 as total_value %}
{{total_value | intcomma }} 
```

*访问 django 文档以获取参考[内置模板标签](https://docs.djangoproject.com/en/3.1/ref/templates/builtins/)*

# mysql - 在 MySQL 中存储日历数据

> ID：12368030
> 
> 赞同：8
> 
> 时间：2012-09-11T10:49:41.070
> 
> 标签：mysql, database-design, architecture

只是一个关于存储日历数据的快速架构问题。

基本上，我有一个出租服务数据库。在前端，有一个日历显示未来每个日期的“可用”或“不可用”。在后端，用户可以在 jQuery 日历上将任何日期/日期范围设置为可用或不可用（1 或 0）。

我的问题是您将如何将这些数据存储在 mysql 中并在前端检索它？

可能所有日期都可用并存储不可用的日期吗？然后，如果它们再次设置为可用，则删除该日期的记录？

干杯， RJ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:40:10.327

> 可能所有日期都可用并存储不可用的日期吗？然后，如果它们再次设置为可用，则删除该日期的记录？

是的，我会这样做，除非我不会在租用到期时删除记录 - 您很容易知道租用已过期，因为它已经过去了，因此您也会自动保留租用的历史记录。

毕竟，有无限数量的可用日期¹，因此如果您反过来（并存储免费日期），则必须人为地限制支持的日期范围。

*¹未来。而且，在某种意义上，过去也是如此。*

另外，我猜你想要一些额外的信息，以防服务被租用（例如租用者的姓名），如果租用由不存在的行表示，将无处可存储！

* * *

由于租用的粒度是一整天，我认为您正在查看类似于以下的数据库结构：

![在此处输入图像描述](../Images/69e96c701c5102919248fbd5578663a1.png)

请注意 RENTING_DAY PK 如何自然地防止重叠。

或者，您可以放弃 RENTING_DAY 并直接在 RENTING 中设置 START_DATE 和 END_DATE，但这需要明确[的范围重叠检查](https://stackoverflow.com/a/12043793/533120)，这[可能无法理想地扩展](https://stackoverflow.com/q/10124365/533120)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:43:44.340

确定默认值是`Available`还是`Unavailable`。

> 可能所有日期都可用并存储不可用的日期吗？

所以默认是可用的？

然后你可以把`unavailable_start`它`unavailable_end`存储为一个日期字段。对于单日，`unavailable_start = _end`. 然后很容易查询一个月或任何日期范围并返回该范围内的**不可用时间段**。然后让 jQuery 解析它以显示这些日期的日历详细信息。

# php - PDO - FETCH_CLASS - 将结果作为参数传递给构造函数

> ID：12368035
> 
> 赞同：6
> 
> 时间：2012-09-11T10:49:53.883
> 
> 标签：php, pdo

有什么办法可以将 PDO 的结果作为构造函数的参数传递？假设，我有以下课程：

```
class Test
{
    private $value1;
    private $value2;
    function __construct($val1, $val2)
    {
        $this->value1 = $val1; $this->value2 = $val2;
    }
} 
```

然后，通过 PDO 驱动程序，我从 DB 中选择一些数据，比如说：

```
SELECT price, quantity FROM stock

$results = $query->fetchAll(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, "Test"); 
```

现在，PDO 将这些值直接传递给类字段，并绕过构造函数。

也许我遗漏了一些东西，但我想将查询的结果传递给构造函数。构造函数不能依赖于查询，即使不使用 PDO，我也希望能够实例化这个类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-08T23:06:38.937

我想出的唯一方法是使用 FETCH_FUNC 常量并提供一个函数来通过构造函数创建对象。

```
function rowMapper( $price, $quantity)
{
  return new Test( $price, $quantity);
}
$results = $query->fetchAll( PDO::FETCH_FUNC, "rowMapper"); 
```

现在您的对象将仅使用您的构造函数创建，而不是让 PDO 在私有数据中注入值并破坏封装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-12T20:26:10.467

> 也许我遗漏了一些东西，但我想将查询的结果传递给构造函数。

查询的结果可以直接分配给您的对象属性[`PDO::FETCH_CLASS`](http://php.net/manual/en/pdostatement.setfetchmode.php)

如果需要，我们还需要一个能够覆盖 PDO 值的构造函数，因此`PDO::FETCH_PROPS_LATE`请从`fetch`.

```
function __construct($val1=null, $val2=null) {

      // now the constructor is called after the fetch
      // if you pass values to it, they will be assigned

  if ($val1!==null) $this->price = $val1; 
  if ($val2!==null) $this->quantity = $val2;
} 
```

我们有两种实例化对象的方法

### PDO

```
$stmt = $db->prepare('SELECT price, quantity FROM stock');
$stmt->setFetchMode(PDO::FETCH_CLASS,'Test');
$result = $stmt->fetch(); 
```

### 新的

```
$result = new Test(25,100); 
```

如果您想使用来自数据库的值，您可以在构造函数中执行此操作，仍然`FETCH_PROPS_LATE`省略。

```
function __construct($val1=null, $val2=null) {
  if ($val1!==null) $this->price = $val1;
  if ($val2!==null) $this->quantity = $val2;
  $this->formattedPrice = number_format($this->price,'2');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-04T01:14:10.967

我在为我的实体构建 PDO 存储库时遇到了这种情况。我不使用这种方法，因为我不喜欢必须一对一地匹配参数。这是我可以通过使用静态工厂模式来模仿构造函数的最接近的方法。

```
class User
{
    private $id;
    public $name;
    public $isMinor;

    // make sure parameters are in the same order as the mysql result
    public static function buildFromPdo($id, $age, $name)
    {
        $user = new self;
        $user->id = $id;
        $user->name = $name;
        $user->isMinor = $age < 18;
        return $user;
    }

    public function getId()
    {
        return $this->id;
    }
}

$stmt = $db->prepare('SELECT id, age, name FROM users');
$stmt->execute();
$result = $stmt->fetchAll(PDO::FETCH_FUNC, "User::buildFromPdo"); 
```

"$result" 将是一个用户对象数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T10:53:16.333

[我编辑了这个答案，因为我之前的答案不再准确。]

FETCH_CLASS 确实获取到私有属性。请参考[这个答案](https://stackoverflow.com/questions/7282962/php-pdo-do-the-fetch-styles-fetch-class-and-fetch-into-fetch-into-private-objec)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-18T08:37:23.977

在您的情况下，您可以像这样传递它们：

```
$results = $query->fetchAll(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, "Test", array('val1', 'val1')); 
```

阅读`fetchAll()` [此处](http://php.net/manual/en/pdostatement.fetchall.php)的第三个参数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-10-30T16:16:31.253

使用 PdoObject::fetchAll(\PDO::FETCH_CLASS)，这将返回你想要的。

不过，如果您需要特定的东西来传递，请遵循以下代码片段

```
$sql = "SELECT * FROM ".$table. " WHERE id=$id";
$sth = $dbAdapter->prepare($sql);
$sth->execute();

//inject anything you want
$result = $sth->fetchAll(\PDO::FETCH_CLASS, $tableClass, array($pass1, $pass2, $dbAdapter));
```

# ruby-on-rails-3 - Rails 资产管道 - 仅在开发中工作的 image_path 助手

> ID：12368037
> 
> 赞同：4
> 
> 时间：2012-09-11T10:49:56.097
> 
> 标签：ruby-on-rails-3, asset-pipeline

我在 Rails (3.2.7) 中的资产预编译有问题。

我包括一个像这样的网站图标：

```
<link rel="icon" type="image/png" href="<%= image_path("favicon.png") %>" /> 
```

在我设置的开发模式下`config.assets.compile = true`。一切正常，呈现的 HTML 如下所示：

```
<link rel="icon" type="image/png" href="/assets/favicon.png" /> 
```

但是在生产中，我在哪里设置`config.assets.compile = false`，我得到了错误

```
Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError in Home#index
...
favicon.png isn't precompiled 
```

我已经跑了`rake assets:precompile`，我可以清楚地看到，该资产在`public/assets/favicon.png`.

我知道，我可以`config.assets.compile = true`在生产中设置，但我不想这样做（因为性能原因）。

有谁知道，为什么我的 Rails 应用程序无法解决生产中资产的正确路径？谢谢！

* * *

更新：也许知道也很有用：它不仅适用于图像，也适用于其他资产。

例如，当 config.assets.compile 设置为 false 时`<%= stylesheet_link_tag "screen", :media => "all" %>`也会产生错误。`screen.css isn't precompiled`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:43:54.880

您必须告诉 Rails 要预编译哪些资产。您可以在 config 键中`config/application.rb`或`config/environments/production.rb`使用[`config.assets.precompile`config 键](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)执行此操作。

Rails 从要预编译的默认资产列表开始，包括`["application.js", "application.css"]`，但是如果您也希望自己的资产也被预编译，则必须将它们添加到列表中。

例如：

```
# config/application.rb
module MyApp
  class Application < Rails::Application
    # other config ...

    config.assets.precompile += ["screen.css", "*.png"]
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:25:42.270

好的，经过几次尝试，我想出了如何解决这个问题。尽管如此，它有点奇怪，并不能完全满足我。它只对我有用，当我设置`digest`为 true 并提供以下路径时`manifest`：

```
config.assets.compile = false
config.assets.digest = true
config.assets.manifest = Rails.root.join("public/assets") 
```

知道这个“逻辑”的背后是什么会很有趣。

# java - 检查 Java 应用程序之前是否运行过

> ID：12368047
> 
> 赞同：1
> 
> 时间：2012-09-11T10:50:22.577
> 
> 标签：java, installation, launch

很像[这篇文章](https://stackoverflow.com/questions/2608210/how-to-check-the-first-time-user-of-my-app-in-android)，我想检查我的 Java 应用程序是否之前启动过。

Java中是否有任何标准方法可以做到这一点，或者我应该在第一次启动时创建一个文件，在某个地方指示应用程序之前启动过？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:52:08.813

实际上，Java SE 上的答案几乎相同：

[使用API](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html) ( [overview](http://docs.oracle.com/javase/7/docs/technotes/guides/preferences/overview.html) )检查标志[，`Preferences`](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)如果不存在，则为第一次启动。

成功启动后设置该标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:58:10.177

一个桌面应用程序。可以使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)并且可以访问[`PersistenceService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/PersistenceService.html). 这是一个[演示。的持久化服务](http://pscode.org/jws/api.html#ps)。

使用它的方式与@Joachim 的回答中描述的方式大致相同。

* * *

相同的 API 还提供了[`ExtensionInstallerService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/ExtensionInstallerService.html). 该服务专为“首次运行”而设计。这是一个[演示。的安装服务](http://pscode.org/jws/api.html#eis)。

* * *

OTOH，如果您的意思是“单实例”，正如彼得所提到的，请查看（请打鼓..）[`SingleInstanceService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/SingleInstanceService.html)..和[演示。的单实例服务](http://pscode.org/jws/api.html#sis)。

# python - python没有连接到本地XMPP服务器

> ID：12368050
> 
> 赞同：1
> 
> 时间：2012-09-11T10:50:28.110
> 
> 标签：python, xmpp, ejabberd

我正在尝试通过下面的代码连接我的本地 XMPP 服务器

```
import xmpp
client = xmpp.Client('localhost',debug=[])
client.connect(server=('localhost',5222)) 
```

但我总是收到这条消息：

> 查找 _xmpp-client._tcp.localhost 时出错

我检查了端口 5222 是否已经打开（通过使用 telnet）。（我不得不提到本地主机上的防火墙已关闭）现在我应该在这段代码中添加什么以使其工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-22T14:13:49.657

此消息（警告，而不是 xinox 的回答中指出的错误）表明 DNS SRV 记录查找失败。DNS SRV 记录用于查找与某个域相关联的服务（例如，`localhost`在这种情况下，根本不是真正的域，这就是查找失败的原因），但它们将其责任委托给位于其他地方的服务器。

例如，如果我的服务器位于`example.net`，生成我的 Jabber ID (JID): `user@example.net`，但我的 XMPP 服务器位于 ，则`chat.example.net`我可以构建一个 SRV 记录`example.net`以指向`chat.example.net`。还有其他方式来委派责任，但这是首选方式。XMPP 对 SRV 记录的使用在[RFC 6120 §3.2.1](https://www.rfc-editor.org/rfc/rfc6120#section-3.2)中定义。

要真正摆脱此错误，您可以使用`use_srv`kwarg，制作您的初始示例：

```
import xmpp
client = xmpp.Client('localhost',debug=[])
client.connect(server=('localhost',5222), use_srv=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T06:12:50.477

用这个。

```
client = xmpp.Client('127.0.0.1',debug=[])
client.connect(server=('127.0.0.1',5222)) 
```

或您的 IP 192.XXX

# ms-access - Microsoft Access 2010：查询和表单

> ID：12368052
> 
> 赞同：2
> 
> 时间：2012-09-11T10:50:34.040
> 
> 标签：ms-access, ms-access-2007, ms-access-2010, ms-access-2003

我有一个表单（未连接到任何查询或表），在名为“性别”的框架中带有 3 个选项按钮，名称为（男性，女性，两者），值（1,2,3），我建立了一个查询并想要从具有“性别”字段的表中获取一些数据（男性值为 1，女性值为 2）。在查询集性别字段和标准中，我写了这个：

```
IIf([Forms]![frmFilterVolunteer]![Gender]=3;"1 Or 2";IIf(
[Forms]![frmFilterVolunteer]![Gender]=2;1;2)) 
```

它适用于男性和女性选项按钮，但不适用于两者。我该如何管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:02:35.637

两者都与说所有相同，因此您只需要过滤值为 1 或 2 的位置。您不能说“1 或 2”并让查询将其提取出来。您可以对两者都使用 Like 并说“*”。

```
LIKE IIf([Forms]![frmFilterVolunteer]![Gender]=3;"*";IIf([Forms]![frmFilterVolunteer]![Gender]=2;1;2)) 
```

# networking - 在大型网络扫描中发现每个端口打开后，Nmap 服务可以扫描吗？

> ID：12368053
> 
> 赞同：1
> 
> 时间：2012-09-11T10:50:37.690
> 
> 标签：networking, nmap, network-scan

我想扫描一个大型网络，例如 10.10.0.0/16，我正在寻找开放的 22 端口，但我只对那些运行“OpenSSH 5.1”的端口感兴趣。

到目前为止，我所做的如下：

```
nmap -PN -T4 -sS -p 22 -sV 10.10.0.0/16 -oG test_results
cat test_results | grep 'OpenSSH 5.1' 
```

这行得通，但这是困难的部分。Nmap只有在完成扫描范围内所有IP的端口扫描后才会启动服务扫描，我正确吗？

但是，如果我想查看在单个 IP 的每次端口扫描之后运行的服务，而不是在扫描整个 IP 范围之后。换句话说：

1.  端口扫描一个IP，查看22端口是否开放。
2.  如果 22 端口已打开，则立即进行服务扫描。
3.  如果服务名称与“OpenSSH 5.1”匹配，则在扫描仍在运行时立即在屏幕上输出 IP。
4.  端口扫描范围内的下一个 IP... 等等...

希望我有点道理，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:04:20.503

出于效率原因，这不是 Nmap 设计的工作方式。特别是如果您正在扫描 /16 网络，您会发现这种方法非常低效。

您可能对选项感兴趣，该[`--max-hostgroup`选项](http://nmap.org/book/man-performance.html#id441846)可用于设置每个主机组的最大主机数。默认情况下，仅扫描几个端口会使用更大的主机组，这意味着您不会很快看到结果（尽管总体上扫描会更快）。您可以将其设置为较低的值，例如 24，以便在完成后获得每批 24 台主机的结果。将其设置为 1 会产生您想要的效果。

# objective-c - 我们如何用一个函数打印不同类型的数据

> ID：12368057
> 
> 赞同：1
> 
> 时间：2012-09-11T10:50:55.587
> 
> 标签：objective-c, macros

它的灵感来自：

[我们如何在 Objective-C 中打印不同类型的数据类型？](https://stackoverflow.com/questions/2430706/how-can-we-print-different-types-of-data-types-in-objective-c)

但是，我想要一个 NSLog 类型的函数，如果我这样做

这是我当前的宏

```
#define ELog( s, ... ) NSLog( @"<%p %@:(%d)> %@", self, [[NSString stringWithUTF8String:__FILE__] lastPathComponent], __LINE__, [NSString stringWithFormat:(s), ##__VA_ARGS__] )
#define DLog( s, ... ) ;;
//#define CLog( s, ... ) ;
#define CLog( s, ... ) NSLog( @"<%p %@:(%d)> %@", self, [[NSString stringWithUTF8String:__FILE__] lastPathComponent], __LINE__, [NSString stringWithFormat:(s), ##__VA_ARGS__] )
#define CM( s, ... );// NSLog( @"<%p %@:(%d)> %@", self, [[NSString stringWithUTF8String:__FILE__] lastPathComponent], __LINE__, [NSString stringWithFormat:(s), ##__VA_ARGS__] )

#define PO1(x) ELog(@#x ": %@", x)
#define PD(x) ELog(@#x ": %f", x)
#define PI(x) ELog(@#x ": %d", x) 
```

我想要这样的东西，但如果我这样做

PO(somevariable)，它会产生我想要的日志，无论它是 NSObject 还是 double 或 float 还是 integer。

我想我在某个地方见过。我搜索并找不到它。

# python - Python Gtk+3 中的排序和过滤树模型..？

> ID：12368059
> 
> 赞同：7
> 
> 时间：2012-09-11T10:51:05.133
> 
> 标签：python, pygtk, gtk3, pygobject

我正在尝试获得一个可以过滤和排序的树模型（实际上是一个列表存储）。我有以下一段代码

```
self.modelfilter = self.liststore.filter_new()
self.modelfilter.set_visible_func(\
            self._visible_filter_function)
self.treeview.set_model(self.modelfilter) 
```

where`self.liststore`和是我从 glade 文件中获得`self.treeview`的标准`Gtk.ListStore`和对象，并且是过滤功能。`Gtk.TreeView``self._visible_filter_function`

问题是它`self.modelfilter`似乎无法排序。当我单击列标题（中的列`self.treeview`）对它们进行排序时，我得到

```
Gtk-CRITICAL **: gtk_tree_sortable_get_sort_column_id: assertion `GTK_IS_TREE_SORTABLE (sortable)' failed 
```

说树模型不可排序。

[正如这里](https://mail.gnome.org/archives/gtk-list/2005-February/msg00180.html)所建议的，这个问题在 PyGtk 中似乎是可以克服的。这个想法是将一个 ListStore、一个 TreeModelFilter 和一个 TreeSortFilter 堆叠在一起，并将最后一个作为树视图的模型。

然而，这个技巧似乎不适用于 Python Gtk+3。当我尝试

```
self.modelfilter = self.liststore.filter_new()
self.modelfilter.set_visible_func(\
            self._visible_filter_function)
self.sorted_and_filtered_model = \
            Gtk.TreeModelSort(self.modelfilter)
self.treeview.set_model(self.sorted_and_filtered_model) 
```

它抱怨

```
Gtk.TreeModelSort(self.modelfilter)
TypeError: GObject.__init__() takes exactly 0 arguments (1 given) 
```

现在我试图得到一个`Gtk.TreeModelSort`没有参数的实例。但是这个实例没有任何`set_model`方法。

我在这里迷路了。

有没有另一种方法来设置模型`Gtk.TreeModelSort`？或者是否有一种完全不同的方法来获取可以在树视图中显示的过滤和可排序树模型对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T01:13:44.377

```
>>> from gi.repository import Gtk
>>> mymodel = Gtk.ListStore()
>>> Gtk.TreeModelSort(model=mymodel)
<TreeModelSort object at 0x1d4d190 (GtkTreeModelSort at 0x1f0d3f0)> 
```

在我看来，PyGObject 还没有准备好。它没有可浏览的文档，有些事情还没有被反省，特别是这个：

*   有时小部件可以与 Gtk.MyWidget(attr=foo) 一起使用，比如这个。
*   有时使用 Gtk.MyWidget.new_with_label('Foo')，比如按钮。是的， Gtk.MyWidget(label='Foo') 不起作用。

亲切的问候

# internet-explorer - 如何禁止 Internet Explorer？

> ID：12368060
> 
> 赞同：1
> 
> 时间：2012-09-11T10:51:08.200
> 
> 标签：internet-explorer, jsf, conditional-comments

我尝试通过模板中的元标记来禁止 Internet Explorer。

`template.xhtml`：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">
<f:view locale="de_DE">
<h:head>
    <f:facet name="first">
        <h:outputText
            value="&lt;!--[if IE]&gt;
        &lt;h1&gt;No IE support.&lt;/h1&gt;
        &lt;![endif]--&gt;"
            escape="false" />
    </f:facet>
... 
```

这样是行不通的。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:19:54.830

你所拥有的不是元标记，而只是一个 IE 条件注释，它根据最终用户是否使用 IE 有条件地显示一段 HTML 代码。要在页面正文中显示一段 HTML 代码，您必须将 HTML 代码`<body>`放在`<head>`.

```
<h:body>
    ...
    <h:outputText
        value="&lt;!--[if IE]&gt;
    &lt;h1&gt;No IE support.&lt;/h1&gt;
    &lt;![endif]--&gt;"
        escape="false" />
    ...
</h:body> 
```

请注意，这不会以任何方式神奇地隐藏页面的其余部分。您必须通过包含一个`<link>`包含类似`#content { display: none; }`.

* * *

**与具体问题无关**，因为您基于已经使用 OmniFaces 的问题历史，您可能会发现[`<o:conditionalComment>`](http://showcase.omnifaces.org/components/conditionalComment)在 JSF 中以开发人员友好的方式呈现 IE 条件注释很有帮助。

```
<h:body>
    ...
    <o:conditionalComment if="IE">
        <h1>No IE support.</h1>
    </o:conditionalComment>
    ...
</h:body> 
```

# asp.net - 在更新面板中，图像在部分回发期间不起作用

> ID：12368063
> 
> 赞同：1
> 
> 时间：2012-09-11T10:51:21.013
> 
> 标签：asp.net, ajax, partial-postback

我有一个如下更新面板：

```
<asp:UpdatePanel ID="UpdatePanel_SomeDate" UpdateMode="Conditional"  runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="IsMail" />
    </Triggers>
    <ContentTemplate>
        <table runat="server" id="MailDateTable">
            <tr id="MailDateTableRow" runat="server">
                <td nowrap="true" valign="top"  width="180px" class="ms-formlabel">
                    <h3 class="ms-standardheader">
                        <nobr>Mailing Date<span class="ms-formvalidation"> *</span></nobr>
                    </h3>
                </td>
                <td valign="top"  width="480px" class="ms-formbody">
                    <span dir="none">
                        <TestDate:DatePicker runat="server" ID="MailingDate" AllowEmpty="false" CalloutEnabled="true" ValidationEnabled="true" />
                    </span>
                </td>
            </tr>
        </table>
    </ContentTemplate>
</asp:UpdatePanel> 
```

在部分回发期间，我需要设置`MailingDate.visible = false`或为真（基于 IsMail 值）。`MailingDate`是用户控件 ID。

`TestDate:DatePicker`在这里，我在用户控件中有一个日历图像。通过单击它，我正在为文本框选择日期值。

现在的问题是，如果我`visible = true`在部分回发期间做出或错误，则此图像不会出现。我看不到图像。请帮忙。

我在 datepicker 用户控件中有一些代码，`Page_Load`如下所示，它会导致任何问题吗？

```
if (this.Enabled)
{
    string script = "$(function(){$(\".datepicker\").datepicker({ showOn: 'button', buttonImage: '/images/calendar.gif', buttonImageOnly: true, buttonText: 'Select a date', onSelect:" + ( OnSelect ?? "function(){}" ) + " });});";
    this.Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "DatePickerScriptKey", script, true);
    this.Page.RegisterStyleBlock( "DatePickCss", ".ui-datepicker{ display: none; }" );
} 
```

# apache-flex - 手动创建的 Flex PopUpAnchor 未显示

> ID：12368065
> 
> 赞同：1
> 
> 时间：2012-09-11T10:51:37.410
> 
> 标签：apache-flex

我需要使用 ActionScript 创建一个组件。在这种情况下不能使用 mxml。在我的组件中，我需要使用 new 运算符和 addElement 创建 PopUpAnchor 到舞台。不幸的是，当我这样做时，PopUpAnchor 的 displayPopUp 属性不响应任何值。这是我的例子：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
     xmlns:s="library://ns.adobe.com/flex/spark" 
     initialize="init(event)">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            import spark.components.Label;
            import spark.components.PopUpAnchor;

            protected function init(event:FlexEvent):void
            {
                var anchor:PopUpAnchor = new PopUpAnchor();
                var label:Label = new Label();
                label.text = 'ABC';
                anchor.addChild(label);

                addElement(anchor);
                anchor.displayPopUp = true;
            }

        ]]>
    </fx:Script>

</s:WindowedApplication> 
```

我将 Flex SDK 4.5 与 AIR SDK 2.6 一起使用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:16:39.120

我想到了。问题是我不会在锚点上使用 addChild。我应该改用 popUp 属性。

所以，这条线是错误的：

 ~~~~```
anchor.addChild(label); 
```~~  ~~并应更正为以下形式：

```
anchor.popUp = label; 
```~~~~

# joomla - 如何在 joomla ck 表单字段标签中添加下划线字符

> ID：12368066
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:51:37.580
> 
> 标签：joomla

我在 joomla 1.5 项目中使用了最新版本的 ckfrom joomla 插件。在定义表单的归档名称时，我遇到了一些问题。它始终使用字母和数值进行验证，并且不能添加特殊字符（下划线）。我需要一个名为“first_name”的字段名，但无法定义它。无论如何请任何人都可以打电话给我在ckform中添加这种字段名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:06:31.177

`[a-zA-Z0-9_]`请用此代码替换

`administrator\components\com_ckforms\views\ckfield\tmpl\ckfield_tpl.php`在第 20 行

# vim - snipMate：插入文件扩展名

> ID：12368069
> 
> 赞同：1
> 
> 时间：2012-09-11T10:51:47.670
> 
> 标签：vim, snipmate

我有一个 snipMate 片段，可以打印 C 和 C++ 文件的标题注释，我希望它打印完整的文件名，如“文件：main.cpp”。

文档说：

> 如果没有参数，则返回没有扩展名的默认文件名；...

但没有说明如何获得扩展名，如果可能的话。

我试过`'&filetype'`（用反引号而不是'）插入一个文件类型，但不是正确的：它为.h文件提供“cpp”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:50:39.140

A`:function Filename`会向您展示它是如何由 snipMate 实现的。它利用`expand()`和`:help filename-modifiers`。要获取当前文件，请使用`%`; `:t`剥离任何路径。

```
snippet filename
        File: `expand('%:t')` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:47:46.987

您应该发布有问题的代码段。

无论如何，获取带有扩展名的文件名的方法不止一种。您可以使用`bufname('%')`或`expand('%:t')`。

# javascript - Flash AS3 关闭浏览器窗口

> ID：12368071
> 
> 赞同：1
> 
> 时间：2012-09-11T10:51:52.430
> 
> 标签：javascript, actionscript-3, flash, browser, actionscript

有谁知道如何从 iframe 中的 Flash AS3 关闭浏览器窗口？

非常感谢任何帮助/想法，Ss888。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:04:17.960

这是做不到的。至少不是直接的。

您可以做的是使用`ExternalInterface`该类或`navigateToUrl`调用 JavaScript。

```
navigateToURL(new URLRequest('Javascript: window.close();'), '_self'); 
```

此时，由浏览器来提示或允许/忽略`window.close()`请求。

# android - 表 AndroidGameMode 没有名为 PlayerPoints 的列

> ID：12368072
> 
> 赞同：0
> 
> 时间：2012-09-11T10:51:52.787
> 
> 标签：android, database, sqlite

在我的数据库中，我有表 AndroidGameMode，但是当我尝试将一些数据插入表中时，我收到此错误，表示我的列之一不存在

```
 package com.example.jogodogalo.jogador1;

import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHandler extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_NAME = "JogoDoGaloDB";

    private static final String TABLE_RESULTS = "AndroidGameMode";

    private static final String KEY_ID = "PlayerID";
    private static final String KEY_PLAYER = "PlayerName";
    private static final String KEY_WINS = "PlayerWins";
    private static final String KEY_TIES = "PlayerTies";
    private static final String KEY_LOSSES = "PlayerLosses";
    private static final String KEY_POINTS = "PlayerPoints";

    public DataBaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_RESULTS_TABLE = "CREATE TABLE " + TABLE_RESULTS +"("
                + KEY_ID + " INTEGER PRIMARY KEY,"
                + KEY_PLAYER + " TEXT,"
                + KEY_WINS + " INTEGER,"
                + KEY_TIES + " INTEGER," 
                + KEY_LOSSES + " INTEGER," 
                + KEY_POINTS + "INTEGER" + ")";
        db.execSQL(CREATE_RESULTS_TABLE);
    }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            //"Mata" a outra tabela se existir
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_RESULTS);

            //cria as tabelas de novo
            onCreate(db);
        }
        //podes ir po logcat e marcar aquele erro ? marcar erro?

        public void addResults(Results results){
            SQLiteDatabase db = this.getWritableDatabase();

            ContentValues values = new ContentValues();
            values.put(KEY_PLAYER, results.getName());
            values.put(KEY_WINS, results.getWins());
            values.put(KEY_TIES, results.getTies());
            values.put(KEY_LOSSES, results.getLosses());
            values.put(KEY_POINTS, results.getPoints());
            //Pede ajuda daquele gajo ok? Dizes que inseres mas nao aparece nada e mostras as funçoes... dizes que nao e preciso nem editar nem apagar ok
            db.insert(TABLE_RESULTS, null,values);
            db.close();
        }

        public float getSumPoints() {
            float result = 0;
            SQLiteDatabase db = this.getWritableDatabase();

            Cursor c = db.query(TABLE_RESULTS, 
              new String[] { "sum(" + KEY_POINTS + ")" },
              null, null, null, null, null);
            if (c.moveToFirst()) {
                result = c.getLong(0);
            }
            c.close();
            return result;
        }

        public Results getResults(int id){
            SQLiteDatabase db = this.getReadableDatabase();

            Cursor cursor = db.query(TABLE_RESULTS, new String[]{KEY_ID, KEY_PLAYER,
                    KEY_WINS, KEY_TIES, KEY_LOSSES, KEY_POINTS}, KEY_ID + "=?", new String[] {String.valueOf(id)}, 
                null, null, null, null);

            if (cursor != null) cursor.moveToFirst();

            Results Result = new Results(Integer.parseInt(cursor.getString(0)), 
                        cursor.getString(1), 
                        Integer.parseInt(cursor.getString(2)),
                        Integer.parseInt(cursor.getString(3)),
                        Integer.parseInt(cursor.getString(4)), 
                        Integer.parseInt(cursor.getString(5)));         

                return Result;
        }

        public ArrayList<Results> getAllResults(){
            ArrayList<Results> ResultsList = new ArrayList<Results>();

            SQLiteDatabase db = this.getWritableDatabase();

            Cursor cursor = db.query(TABLE_RESULTS, null, null, null, null, null, null); 

            if(cursor.moveToFirst()){
                do{
                    Results Result = new Results();
                    Result.setID(Integer.parseInt(cursor.getString(0)));
                    Result.setName(cursor.getString(1));
                    Result.setWins(Integer.parseInt(cursor.getString(2)));
                    Result.setTies(Integer.parseInt(cursor.getString(3)));
                    Result.setLosses(Integer.parseInt(cursor.getString(4)));
                    Result.setPoints(Integer.parseInt(cursor.getString(5)));

                    ResultsList.add(Result);
                }while(cursor.moveToNext());
            }
            return ResultsList;
        }

} 
```

那是我的 databaseHandler 类

这是我的ResultClass

```
package com.example.jogodogalo.jogador1;

public class Results {

    int _id;
    String _name;
    int _wins;
    int _ties;
    int _losses;
    int _points;

    public Results(){

    }

    public Results (int id, String name, int wins, int ties, int losses, int points){
        this._id = id;
        this._name = name;
        this._wins = wins;
        this._losses = losses;
        this._ties = ties;
        this._points=points;
    }

    public Results (String name, int wins, int ties, int losses, int points){
        this._name = name;
        this._wins = wins;
        this._ties = ties;
        this._losses = losses;
        this._points = points;
    }

    public Results(int points){
        this._points = points;
    }

    public int getID(){
        return this._id;
    }

    public void setID(int id){
        this._id = id;
    }

    public String getName(){
        return this._name;
    }

    public void setName(String name){
        this._name = name;
    }

    public int getWins(){
        return this._wins;
    }

    public void setWins(int wins){
        this._wins = wins;
    }

    public int getTies(){
        return this._ties;
    }

    public void setTies(int ties){
        this._ties = ties;
    }

    public int getLosses(){
        return this._losses;
    }

    public void setLosses(int losses){
        this._losses = losses;
    }

    public int getPoints(){
        return this._points;
    }
    //ta mal, quando se faz um set tu nao retornas nada
    public void setPoints(int points){
        this._points = points;
    }

    @Override
    public String toString() {
        return this.getName();
    }

} 
```

我的插入代码

```
 public void onClick(DialogInterface dialog, int whichButton) {             

                    String name = mPlayerName.getText().toString();

                    String win = mPlayerCount.getText().toString();
                    int wins_jogador1 = Integer.parseInt(win);

                    String ties = mTieCount.getText().toString();
                    int ties_jogador1 = Integer.parseInt(ties);

                    String losses = mAndroidCount.getText().toString();
                    int losses_jogador1 = Integer.parseInt(losses);

                    String pontuacao = mPointsCount.getText().toString();
                    int pontuaçao_jogador1 = Integer.parseInt(pontuacao);

                    if(pontuaçao_jogador1 == 0){
                        Toast myToast = Toast.makeText(getApplicationContext(), "Não tem qualquer pontuação. \nNão é possível guardar.",
                                Toast.LENGTH_LONG);
                    myToast.setGravity(Gravity.CENTER_HORIZONTAL|Gravity.CENTER_VERTICAL, 0, 100);
                    myToast.setDuration(3000);
                    myToast.show();

                    }else if(pontuaçao_jogador1 != 0){

                    DataBaseHandler db  = new DataBaseHandler(getApplicationContext());
                    Results theResultados = new Results(name, wins_jogador1, ties_jogador1, losses_jogador1, pontuaçao_jogador1);

                    db.addResults(theResultados);
                    //que estranho :S ele teima com o playerPoints nao sei porque diz que a cioluna nao existe

                    Intent intent = new Intent(JogoDoGalo.this, MainMenu.class);
                    JogoDoGalo.this.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:58:39.860

您的 onCreate 代码中缺少空格：

```
+ KEY_POINTS + "INTEGER" + ")"; 
```

将其更改为：

```
 + KEY_POINTS + " INTEGER" + ")"; 
```

**更新**

还尝试使用`ALTER`如下命令拆分列创建命令：

```
@Override
 public void onCreate(SQLiteDatabase db) {
     String CREATE_RESULTS_TABLE = "CREATE TABLE " + TABLE_RESULTS+" ("
             + KEY_ID + " INTEGER PRIMARY KEY,"
             + KEY_PLAYER + " TEXT,"
             + KEY_WINS + " INTEGER,"
             + KEY_TIES + " INTEGER,"
              + KEY_LOSSES + " INTEGER"+")";
     db.execSQL(CREATE_RESULTS_TABLE);

     String ALTER_RESULTS_TABLE = "ALTER TABLE " + TABLE_RESULTS
             +" ADD "+ KEY_POINTS + " INTEGER";
     db.execSQL(ALTER_RESULTS_TABLE);
 } 
```

# wso2 - wso2 管理服务

> ID：12368079
> 
> 赞同：14
> 
> 时间：2012-09-11T10:52:06.967
> 
> 标签：wso2, wso2carbon

我在哪里可以找到碳管理服务的列表？

例如，我知道 AuthenticationAdmin 服务，但是我想检查还有哪些其他服务并检查它们的 wsdls。我在文档中找不到任何内容，我在哪里可以找到这些。

我能掌握的唯一信息是[http://blog.facilelogin.com/2011/03/invoking-wso2-carbon-admin-services.html](http://blog.facilelogin.com/2011/03/invoking-wso2-carbon-admin-services.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T11:07:13.853

您可以使用 -DosgiConsole 选项启动 Carbon 服务器以转到 osgi 控制台。如果您在控制台中键入帮助，您将获得所有可用的命令。

listAdminServices 命令将列出所有可用的服务。

问候，/女娲

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T08:31:05.557

如果有人需要它：

```
Admin services deployed on this server:
1\. ProvisioningAdminService, ProvisioningAdminService, https://localhost:8243/se
rvices/ProvisioningAdminService

2\. SynapseApplicationAdmin, SynapseApplicationAdmin, https://localhost:8243/serv
ices/SynapseApplicationAdmin

3\. CarbonAppUploader, CarbonAppUploader, https://localhost:8243/services/CarbonA
ppUploader

4\. OperationAdmin, OperationAdmin, https://localhost:8243/services/OperationAdmi
n

5\. EventPublishService, EventPublishService, http://localhost:8280/services/Even
tPublishService

6\. SequenceAdminService, SequenceAdminService, https://localhost:8243/services/S
equenceAdminService

7\. XKMSAdminService, XKMSAdminService, https://localhost:8243/services/XKMSAdmin
Service

8\. StatisticsAdmin, StatisticsAdmin, https://localhost:8243/services/StatisticsA
dmin

9\. LoggedUserInfoAdmin, LoggedUserInfoAdmin, https://localhost:8243/services/Log
gedUserInfoAdmin

10\. MediationStatisticsAdmin, MediationStatisticsAdmin, https://localhost:8243/s
ervices/MediationStatisticsAdmin

11\. TopicManagerAdminService, TopicManagerAdminService, https://localhost:8243/s
ervices/TopicManagerAdminService

12\. MessageProcessorAdminService, MessageProcessorAdminService, https://localhos
t:8243/services/MessageProcessorAdminService

13\. ApplicationAdmin, ApplicationAdmin, https://localhost:8243/services/Applicat
ionAdmin

14\. ServiceGroupAdmin, ServiceGroupAdmin, https://localhost:8243/services/Servic
eGroupAdmin

15\. ClassMediatorAdmin, ClassMediatorAdmin, https://localhost:8243/services/Clas
sMediatorAdmin

16\. STSAdminService, STSAdminService, https://localhost:8243/services/STSAdminSe
rvice

17\. RegistryAdminService, RegistryAdminService, https://localhost:8243/services/
RegistryAdminService

18\. FileDownloadService, FileDownloadService, https://localhost:8243/services/Fi
leDownloadService

19\. CachingAdminService, CachingAdminService, https://localhost:8243/services/Ca
chingAdminService

20\. MessageStoreAdminService, MessageStoreAdminService, https://localhost:8243/s
ervices/MessageStoreAdminService

21\. RMAdminGlobal, RMAdminGlobal, https://localhost:8243/services/RMAdminGlobal

22\. CSGAgentAdminService, CSGAgentAdminService, https://localhost:8243/services/
CSGAgentAdminService

23\. QpidAdminService, QpidAdminService, https://localhost:8243/services/QpidAdmi
nService

24\. LoginStatisticsAdmin, LoginStatisticsAdmin, https://localhost:8243/services/
LoginStatisticsAdmin

25\. CustomUIAdminService, CustomUIAdminService, https://localhost:8243/services/
CustomUIAdminService

26\. ReportingResourcesSupplier, ReportingResourcesSupplier, https://localhost:82
43/services/ReportingResourcesSupplier

27\. RMAdminService, RMAdminService, https://localhost:8243/services/RMAdminServi
ce

28\. SearchAdminService, SearchAdminService, https://localhost:8243/services/Sear
chAdminService

29\. AuthenticationAdmin, AuthenticationAdmin, https://localhost:8243/services/Au
thenticationAdmin

30\. JMSTransportAdmin, JMSTransportAdmin, https://localhost:8243/services/JMSTra
nsportAdmin

31\. ThrottleAdminService, ThrottleAdminService, https://localhost:8243/services/
ThrottleAdminService

32\. TaskAdmin, TaskAdmin, https://localhost:8243/services/TaskAdmin

33\. ModuleAdminService, ModuleAdminService, https://localhost:8243/services/Modu
leAdminService

34\. MediationTracerService, MediationTracerService, https://localhost:8243/servi
ces/MediationTracerService

35\. RestApiAdmin, RestApiAdmin, https://localhost:8243/services/RestApiAdmin

36\. LoggingAdmin, LoggingAdmin, https://localhost:8243/services/LoggingAdmin
37\. ExternalTryitService, ExternalTryitService, https://localhost:8243/services/
ExternalTryitService http://localhost:8280/services/ExternalTryitService

38\. SecurityAdminService, SecurityAdminService, https://localhost:8243/services/
SecurityAdminService

39\. KeyStoreAdminService, KeyStoreAdminService, https://localhost:8243/services/
KeyStoreAdminService

40\. JrxmlFileUploader, JrxmlFileUploader, https://localhost:8243/services/JrxmlF
ileUploader

41\. DiscoveryAdmin, DiscoveryAdmin, https://localhost:8243/services/DiscoveryAdm
in

42\. EndpointAdmin, EndpointAdmin, https://localhost:8243/services/EndpointAdmin

43\. ServerRolesManager, ServerRolesManager, https://localhost:8243/services/Serv
erRolesManager

44\. ResourceAdminService, ResourceAdminService, https://localhost:8243/services/
ResourceAdminService

45\. FileUploadService, FileUploadService, https://localhost:8243/services/FileUp
loadService

46\. DataSourceAdmin, DataSourceAdmin, https://localhost:8243/services/DataSource
Admin

47\. WSDLValidatorService, WSDLValidatorService, http://localhost:8280/services/W
SDLValidatorService https://localhost:8243/services/WSDLValidatorService

48\. ConfigServiceAdmin, ConfigServiceAdmin, https://localhost:8243/services/Conf
igServiceAdmin

49\. CommandMediatorAdmin, CommandMediatorAdmin, https://localhost:8243/services/
CommandMediatorAdmin

50\. EventBrokerService, EventBrokerService, https://localhost:8243/services/Even
tBrokerService

51\. TracerAdmin, TracerAdmin, https://localhost:8243/services/TracerAdmin

52\. TransportAdmin, TransportAdmin, https://localhost:8243/services/TransportAdm
in

53\. ProxyServiceAdmin, ProxyServiceAdmin, https://localhost:8243/services/ProxyS
erviceAdmin

54\. Java2WSDLService, Java2WSDLService, http://localhost:8280/services/Java2WSDL
Service https://localhost:8243/services/Java2WSDLService

55\. InfoAdminService, InfoAdminService, https://localhost:8243/services/InfoAdmi
nService

56\. RepositoryAdminService, RepositoryAdminService, https://localhost:8243/servi
ces/RepositoryAdminService

57\. PriorityMediationAdmin, PriorityMediationAdmin, https://localhost:8243/servi
ces/PriorityMediationAdmin

58\. DeploymentSynchronizerAdmin, DeploymentSynchronizerAdmin, https://localhost:
8243/services/DeploymentSynchronizerAdmin

59\. TemplateAdminService, TemplateAdminService, https://localhost:8243/services/
TemplateAdminService

60\. RelationAdminService, RelationAdminService, https://localhost:8243/services/
RelationAdminService

61\. DBReportingService, DBReportingService, https://localhost:8243/services/DBRe
portingService

62\. ServerAdmin, ServerAdmin, https://localhost:8243/services/ServerAdmin

63\. ServiceAdmin, ServiceAdmin, https://localhost:8243/services/ServiceAdmin

64\. FlowsAdminService, FlowsAdminService, https://localhost:8243/services/FlowsA
dminService

65\. UserAdmin, UserAdmin, https://localhost:8243/services/UserAdmin

66\. PropertiesAdminService, PropertiesAdminService, https://localhost:8243/servi
ces/PropertiesAdminService

67\. LogViewer, LogViewer, https://localhost:8243/services/LogViewer

68\. WSDL2CodeService, WSDL2CodeService, http://localhost:8280/services/WSDL2Code
Service https://localhost:8243/services/WSDL2CodeService

69\. TransportStatisticsAdmin, TransportStatisticsAdmin, https://localhost:8243/s
ervices/TransportStatisticsAdmin

70\. SynapseArtifactUploaderAdmin, SynapseArtifactUploaderAdmin, https://localhos
t:8243/services/SynapseArtifactUploaderAdmin

71\. LocalEntryAdmin, LocalEntryAdmin, https://localhost:8243/services/LocalEntry
Admin

72\. EndpointTemplateAdminService, EndpointTemplateAdminService, https://localhos
t:8243/services/EndpointTemplateAdminService 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T09:33:43.347

如果要检索任何 Carbon 服务器的管理服务的 WSDL，请转到“CARBON_HOME/repository/conf”目录并将“carbon.xml”文件中“HideAdminServiceWSDLs”的值更改为“false”并重新启动服务器. 然后，您可以通过使用“?wsdl”选项浏览服务来检索 WSDL。

```
For example,
https://localhost:8243/services/StatisticsAdmin?wsdl 
```

干杯，普拉巴斯

# jquery - 通过 Ajax 加载 XML Newsfeed - IE8 不工作

> ID：12368090
> 
> 赞同：0
> 
> 时间：2012-09-11T10:52:43.273
> 
> 标签：jquery, xml, ajax, internet-explorer-8, feed

所以我有这个新闻提要系统，它可以在除 IE8 之外的所有浏览器上完美运行！

现在，我的代码是通过反复试验制作的，因此可能存在一些我不知道的明显编码问题。

这是外部 JS 文件（我使用 jQuery 1.7.2 btw）

```
$(document).ready(function(){
$.ajax({
type: "GET",
url: "newsfeed_en.xml",
dataType: "html",
success: function(xml) {
$(xml).find("element:first").each(function(){
    var year = $(this).find("year").text();
    var month = $(this).find("month").text();
    var day = $(this).find("day").text();
    var date = day+"-"+month+"-"+year;
    var content = $(this).find("content").html();
    var newselement = '<div class="newsElement"><h4>'+date+'</h4><p>'+content+'</p></div>';
    $('#news h1').after(newselement);
});
$(xml).find("element:gt(0)").each(function(){
    var year = $(this).find("year").text();
    var month = $(this).find("month").text();
    var day = $(this).find("day").text();
    var date = day+"-"+month+"-"+year;
    var content = $(this).find("content").html();
    var newselement = '<div class="newsElement"><h4>'+date+'</h4><p>'+content+'</p></div>';
    $('#news #paneMoreNews').append(newselement);
});
}
});
}); 
```

`

它所做的是将第一个 ELEMENT 放在一个位置，然后将所有其他元素放在其他位置。

现在我不得不将数据类型设置为 HTML，因为某些 ELEMENT 包含 LINKS，但将其更改为 XML 并不能解决问题。拿走 ":first" 也不能解决问题。

我搜索了这个地方，但其他解决方案都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:22:31.813

您需要使用数据类型：`xml`

```
$.ajax({
    type: "GET",
    url: "sites.xml",
    dataType: "xml",
    success: function(xml) {

    }
}); 
```

# google-app-engine - GAE 日志搜索不可靠

> ID：12368094
> 
> 赞同：1
> 
> 时间：2012-09-11T10:52:50.773
> 
> 标签：google-app-engine, logging

我正在运行几个 python (2.7) 应用程序并经常遇到一个问题：日志搜索（从仪表板、管理控制台）不可靠。当我搜索最近的日志条目时很好（通常可以找到它们），但是在一段时间后（例如一天），它不可能再次找到具有相同搜索查询的相同记录。只是“没有结果”。管理控制台显示我有 1 gig 的日志跨越 10-12 天，所以应该在这里找到旧记录，保留/日志大小限制不是原因。

具体来说，我有“cron”请求，该请求每天写入统计信息（这对我来说已经足够了）并且搜索这个请求总是给我最后一个条目，而不是像预期的那样每天输入一个跨度。

是预期的行为（例如，我在文档中没有看到关于日志存储行为的明确声明）还是有什么需要调整的？例如，是否有助于减少每个请求的日志记录？或者可能是查询语言的高级使用。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:38:46.363

这是已在 googleappengine 问题跟踪器上[报告的已知问题。](http://code.google.com/p/googleappengine/issues/detail?id=7422)

作为替代方案，您可以考虑使用[日志服务 API以编程方式读取您的应用程序日志，以便在](https://developers.google.com/appengine/docs/python/logservice/)[BigQuery](https://developers.google.com/bigquery/)中提取它们，或者构建您自己的搜索索引。

[Google App Engine 开发者关系](https://plus.google.com/117105793163182226623/posts)在 Google I/O 2012 上提供了一个关于[将 App Engine 日志摄取到 Big Query](https://log2bq-codelab-io12.appspot.com/slides#2)的代码实验室。

[Streak](http://streak.com)发布了一个名为[Mache](http://blog.streak.com/2012/07/export-your-google-app-engine-logs-to.html)的工具和一个[chrome 扩展](http://blog.streak.com/2012/07/streak-developer-tools-chrome-extension.html)来自动化这个用例。

# iphone - uiwebview 因缓存而崩溃，如何删除 UIwebview 缓存？

> ID：12368097
> 
> 赞同：1
> 
> 时间：2012-09-11T10:53:06.457
> 
> 标签：iphone, objective-c, ios

uiwebview 由于缓存而崩溃，我该如何删除 UIwebview 缓存？请如果有人知道，请帮忙

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
headingLabel.text= @"Crop Browser";
spinner.hidden= true;
webview.hidden= false;
closeButton.hidden=YES;

NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
[NSURLCache setSharedURLCache:sharedCache];
[sharedCache release];
sharedCache = nil;
// remove all cached responses
[[NSURLCache sharedURLCache] removeAllCachedResponses];

// set an empty cache

NSLog(@"webfinish");
if(cropButton.tag!=1)   //1 would mean the crop button is hidden manually (user pressed crop button)
    cropButton.hidden= false;
} 
```

# c++ - 如何解决这个总线错误？

> ID：12368098
> 
> 赞同：0
> 
> 时间：2012-09-11T10:53:09.587
> 
> 标签：c++, bus-error

以下代码在一个程序中运行良好，但在另一个程序中导致总线错误

```
 char *temp1;
    temp1=(char*)malloc(2);
    for(b=3;b>=0;b--)
       {
       sprintf(temp1,"%02x",s_ip[b]);
       string temp2(temp1); 
       temp.append(temp2);
       } 
```

s_ip[b] 是 byte 类型， temp 是一个字符串。是什么导致了这个总线错误，我该如何解决这个问题？此外，这种奇怪行为的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:54:51.150

缓冲区的`temp`长度必须为 3 个字符，因为`sprintf()`将在两个十六进制字符后附加一个空终止符：

```
char temp1[3]; 
```

似乎没有理由使用动态分配的内存。请注意，您可以避免使用以下命令创建临时`string`命名：`temp2`[`std::string::append()`](http://en.cppreference.com/w/cpp/string/basic_string/append)

```
temp.append(temp1, 2); 
```

另一种方法是避免使用`sprintf()`a并将其`std::ostringstream`与 IO 操纵器一起使用：

```
#include <sstream>
#include <iomanip>

std::ostringstream s;

s << std::hex << std::setfill('0');

for (b = 3; b >= 0; b--)
{
    s << std::setw(2) << static_cast<int>(s_ip[b]);
} 
```

然后用于`s.str()`获取`std::string`实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:55:10.743

`'\0'`一个有 2 个字符的字符串实际上需要 3 个字节，因为在字符串的末尾还有一个终止符。

# c# - 为什么windows启动后windows服务不自动启动

> ID：12368099
> 
> 赞同：0
> 
> 时间：2012-09-11T10:53:14.797
> 
> 标签：c#, windows-services

为什么windows启动后windows服务不自动启动。

我将服务安装程序属性启动类型设置为自动。

还有其他需要设置的属性吗？

服务登录是本地系统帐户。并且每次都可以手动启动服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:34:17.700

当 Windows 尝试启动服务所需的资源不可用时，通常会发生这种情况。请检查您的服务需要运行什么，并确保您为所需的每个资源设置依赖项。例如，如果您的服务使用网络，请尝试使其依赖于“Workstation”服务（名为“LanmanWorkstation”）。

如果您处于后 Vista 世界，您还可以将启动类型设置为“自动延迟”，让 Windows 将您的服务启动延迟大约一分钟。这通常是所有重要/核心服务建立自己的足够时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:55:11.663

检查 Windows 服务设置。也许您在更改启动类型后没有重新安装服务？

# webgl - 使用three.js我可以在近场和远场之间的场景中放置视口吗

> ID：12368100
> 
> 赞同：1
> 
> 时间：2012-09-11T10:53:14.923
> 
> 标签：webgl, three.js, viewport, frustum, perspectivecamera

我不确定我想要实现的目标是否可以使用 three.js

我的目标是将视口放置在截锥体内。我想创建一个对象可以出现在视口和相机之间的 3d 环境。因此，如果我移动相机，那么似乎物体在屏幕前以 3d 呈现 - 即生成的视差给人的印象是当物体移动时它被投影到屏幕外。

我只是找不到办法。我确信我在几年前用 flash 做过，我想我会尝试 three.js 和 webGL。

![在此处输入图像描述](../Images/9a1872ca8f6489107714a5e27d61e7fa.png)

# internet-explorer - IE9 忽略 UserAgent 的 X-UA 兼容标志

> ID：12368104
> 
> 赞同：2
> 
> 时间：2012-09-11T10:53:34.110
> 
> 标签：internet-explorer, cross-browser, user-agent, x-ua-compatible

我有一个 Internet 应用程序，因此 IE9 默认位于兼容性视图中。我用`X-UA-Compatible`国旗。我在 HTTP 标头和元标记中发送它。IE9 似乎接受它并使用 IE9 渲染引擎。但它仍然总是发送 IE-7 UserAgent 字符串。

有没有办法避免它，或者将这个 IE9 识别为非 IE7 浏览器？

我真的不想使用浏览器的白名单，而是使用不支持的浏览器（IE 5、6、7 和 8）的黑名单。

我的例子：

我正在打开页面，所以 IE9 正在发送一个 GET 请求：

```
GET http://myserver/mypage/ HTTP/1.1
Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg,     application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*
Accept-Language: de-CH
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.3; .NET4.0E)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: myserver
Cookie: MAKEBROWSERTEST=true 
```

然后，我的服务器正在回答：

```
HTTP/1.1 302 Found
Cache-Control: private, no-cache="Set-Cookie"
Content-Type: text/html; charset=utf-8
Location: /myserver/mypage/two
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
Set-Cookie: MAKEBROWSERTEST=true; path=/
X-UA-Compatible: IE=edge
Date: Tue, 11 Sep 2012 10:04:21 GMT
Content-Length: 152

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="/myserver/mypage/two">here</a>.</h2>
</body></html> 
```

IE9 正在重定向，但仍发送 MSIE 7.0 用户代理：

```
GET http://myserver/mypage/two HTTP/1.1
Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*
Accept-Language: de-CH
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.3; .NET4.0E)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: myserver
Cookie: MAKEBROWSERTEST=true 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T10:05:11.780

我不是要恢复旧线程，但如果有人遇到这个，他们可能会觉得这很有趣： [Internet Explorer 11's Many User-Agent Strings](http://blogs.msdn.com/b/ieinternals/archive/2013/09/21/internet-explorer-11-user-agent-string-ua-string-sniffing-compatibility-with-gecko-webkit.aspx)

> 如果用户选择在兼容性视图中呈现站点（单击工具 > 兼容性视图设置），则 IE 将发送一个**模仿 Internet Explorer 7 的 UA**字符串的 User-Agent字符串：

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.3; Trident/7.0; .NET4.0E; .NET4.0C) 
```

默认情况下，Intranet 区域中的站点在兼容性视图中呈现，因此这是他们将看到的 User-Agent 字符串。

于是我用IE9做了一个测试：

在（正常模式）你得到

```
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0) 
```

在兼容模式下，您会得到

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E) 
```

# sql - 合并复制和对控制器 SQL 服务器的性能影响

> ID：12368111
> 
> 赞同：2
> 
> 时间：2012-09-11T10:54:06.013
> 
> 标签：sql, sql-server-2008, replication, database-performance, merge-replication

第三方供应商在我们的主 SQL 服务器上实施了一个利用合并复制的解决方案。该服务器还托管我们的 SAP B1 数据库。自从实施该解决方案以来，我们的用户一直在 SAP B1 上遇到性能问题。有没有一种方法可以让我从 SQL 服务器查看合并复制使用了多少处理和内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:18:05.487

现在有点晚了，但我们遇到了类似的问题，最后不得不将 Merge Replication 解决方案移到它自己的硬件上。

在那之后，其余的系统又开始完美地工作了……尽管 Merge Replication 应用程序仍然是一场灾难

# php - 显示月存档链接中特定类别的帖子？

> ID：12368112
> 
> 赞同：0
> 
> 时间：2012-09-11T10:54:08.610
> 
> 标签：php, wordpress, archive

我按月使用档案，输出就像

1.  2012 年 9 月
2.  2012 年 8 月
3.  2012 年 7 月

我想要的是，例如，当有人点击 september 时，他应该看到 9 月发布的属于“A”类的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T14:46:31.393

测试：以下仅返回archive.php上指定月份排序的档案：每个月标记的按钮将使用[get_month_link](http://codex.wordpress.org/Function_Reference/get_month_link)链接到正确的基于类别的档案；

```
<a href="<?php echo get_month_link('2012', '10'); ?>">October 2012</a> 
```

请参阅[模板层次结构](http://codex.wordpress.org/Template_Hierarchy#Category_display)的 Codex 条目：

1.  类别-{slug}.php
2.  类别-{id}.php
3.  类别.php
4.  存档.php
5.  索引.php

因此，如果您有一个类别“灯”，其类别 ID 为 1，您可以执行以下任一操作：

```
category-lamps.php or category-1.php 
```

WordPress 将使用该模板来呈现该类别的存档索引页面。这是基于日期的归档层次结构：

1.  日期.php
2.  存档.php
3.  索引.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:00:19.797

Wordpress 有一个关于如何做各种事情的优秀文档......如果你要循环浏览你要求的帖子，你应该使用[get_posts](http://codex.wordpress.org/Function_Reference/get_posts)然后你可以使用的功能有不同的争论进一步解释在[wordpress 网站](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters)上得到什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:43:02.513

WordPress 使用archives.php 模板文件来显示选定月份的帖子，并使用category.php 页面模板文件来显示类别。要显示选定月份和来自指定类别的所有帖子，您必须使用[自定义查询](http://codex.wordpress.org/Custom_Queries)

# c - 有 UDP 套接字时如何使用选择功能

> ID：12368118
> 
> 赞同：2
> 
> 时间：2012-09-11T10:54:23.820
> 
> 标签：c, select, udp, multicast

我想制作一个多客户端 - 一个服务器测验应用程序。在这种情况下，首先，客户端将连接到服务器并注册自己。然后，服务器将向已注册到服务器的每个客户端多播一个问题。然后客户端将响应答案，该答案将仅发送到服务器。然后服务器会将每个客户端的分数发送给相应的客户端。
这就是我在上述应用程序中尝试做的事情 -
1\. 我也有`multicast`，这就是为什么我将我的服务器套接字设置为`SOCK_DGRAM`（即，UDP）。然后我使用`CLASS-D`ip 地址来创建一个组（服务器将多播到哪个组）。然后是使用`setsockopt`，我将客户添加到该组，以便他们可以收到问题。
2.因为我想听所有客户的回答，所以我正在考虑使用`select`. 它使用套接字描述符在各个客户端之间进行选择，以了解哪些客户端可以读取。
但问题是，当我使用 SOCK_DGRAM 套接字时，它不执行`listen`和`accept`功能。所以，我不会得到一个套接字描述符（它是由返回的`accept`）。这就是为什么，我将无法使用`select`（因为它只使用文件描述符）。
那么，我该如何继续，因为我想使用 UDP 功能 - MULTICASTING 以及 TCP 功能 - 每个连接的套接字描述符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:03:09.200

即使使用 UDP 和未连接的套接字，您仍然可以使用`select`. 只需将服务器套接字绑定到一个地址，然后将该套接字用于`select`. 当套接字可读时，客户端已经发送了一些东西，例如`sendto`，你可以做例如`recvfrom`。

但是，我真的建议您使用 TCP 套接字，它会使很多事情变得更简单，尤其是在通信协议方面（请记住，UDP 包可能会丢失或乱序，您必须自己处理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T10:06:47.233

你在正确的轨道上，但你不需要listen() 或accept()。只需选择可读性。当套接字变得可读时，读取它。您可能根本不需要 select() ，实际上，只是阻塞读取，如果您愿意，可以使用超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:17:46.190

正如您所说，`select`这里没有用，因为您在服务器端只有一个套接字。此套接字用于发送数据报`sendto`

```
ssize_t sendto(int sockfd, const void *buf, size_t len, int flags,
                      const struct sockaddr *dest_addr, socklen_t addrlen); 
```

在`dest_addr`您指定数据报的目标地址。

在 UDP 套接字上使用`recvfrom(2)`类似：

```
ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,
                        struct sockaddr *src_addr, socklen_t *addrlen); 
```

`src_addr`是发件人地址，因此您可以识别已发送响应的客户端。

`recvfrom`调用是阻塞的，直到数据可供读取（除非您将套接字设置为解除阻塞）。

您可以循环接收所有响应。

# c# - 算术运算导致溢出选择表

> ID：12368119
> 
> 赞同：0
> 
> 时间：2012-09-11T10:54:31.450
> 
> 标签：c#, oracle

我正在尝试从 oracle 数据库中选择数据并将其显示在 中`DataGridView`。但它失败了。它说算术运算导致溢出。我没有使用任何数学运算，所以这个错误可能在哪里？代码剪断：

```
public MainForm()
{
    InitializeComponent();
    try
    {
        con = new OracleConnection(conStr);
        con.Open();
        query = "select * from CHECKINFO";
        da = new OracleDataAdapter();
        da.SelectCommand = new OracleCommand(query, con);
        dt = new DataTable();
        da.Fill(dt); // error occures here
        dataGridView1.DataSource = dt;
        con.Close();
    }
    catch (OracleException ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

[![在此处输入图像描述](../Images/32f4b4d087228b365ba4c85556388005.png)](https://i.stack.imgur.com/0JmGW.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:19:33.720

试试这个，

在您的应用程序项目的属性中，使用您的 Main 方法，将平台目标从 AnyCPU 设置为 X86。希望能帮助到你。并确保在 Build -> ConfigurationManager 中使用了此配置。

# python - 计算 ZeroMQ 套接字中的连接数

> ID：12368120
> 
> 赞同：3
> 
> 时间：2012-09-11T10:54:31.803
> 
> 标签：python, zeromq

有没有办法计算 zeromq 套接字中当前连接的客户端数量？如果这不可能，有没有办法确定套接字是否没有连接到它的客户端？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:15:02.730

您可以简单地使用第二个套接字实现一个计数器。每次您有一个活动的客户端或关闭您的套接字时，请在“套接字计数器”上发送一条消息。

ZeroMQ 用于组合套接字。

# eclipse - 为什么我在持久化时收到“外键约束失败”异常？

> ID：12368127
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:55:06.077
> 
> 标签：eclipse, eclipselink

美好的一天，请告知我为什么会出现以下异常。我是 EclipseLink 初学者，我使用的是 jdk1.7.0_05，MySQL 服务器 5.5.25a。

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`stats`.`version`, CONSTRAINT `fk_version_activity1` FOREIGN KEY (`activity_id`, `activity_license_id`) REFERENCES `activity` (`id`, `license_id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
Error Code: 1452
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`stats`.`version`, CONSTRAINT `fk_version_activity1` FOREIGN KEY (`activity_id`, `activity_license_id`) REFERENCES `activity` (`id`, `license_id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
Error Code: 1452
Call: INSERT INTO version (version, activity_id, product, activity_license_id) VALUES (?, ?, ?, ?)
bind => [4 parameters bound]
Query: InsertObjectQuery(cz.ryvo.stats.database.Version[ versionPK=cz.ryvo.stats.database.VersionPK[ product=AP, activityId=0, activityLicenseId=0 ] ])
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:786)
at cz.audatex.audaupdateloader.DatabaseHelper.registerActivity(DatabaseHelper.java:104)
... 3 more 
```

表许可证如下所示：

```
CREATE TABLE `license` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `license` varchar(20) NOT NULL,
  `organisation_id` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `license_UNIQUE` (`license`),
  KEY `fk_license_user1` (`user_id`),
  KEY `fk_license_organisation1` (`organisation_id`),
  CONSTRAINT `fk_license_organisation1` FOREIGN KEY (`organisation_id`) REFERENCES `organisation` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_license_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1; 
```

表活动：

```
CREATE TABLE `activity` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `license_id` int(11) NOT NULL,
  `time` datetime NOT NULL,
  `type` char(1) NOT NULL,
  `result` int(1) DEFAULT NULL,
  PRIMARY KEY (`id`,`license_id`),
  UNIQUE KEY `activity_UQ01` (`license_id`,`time`,`type`),
  KEY `fk_activity_license1` (`license_id`),
  CONSTRAINT `fk_activity_license1` FOREIGN KEY (`license_id`) REFERENCES `license` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1; 
```

和表版本：

```
CREATE TABLE `version` (
  `product` varchar(45) NOT NULL,
  `activity_id` int(11) NOT NULL,
  `activity_license_id` int(11) NOT NULL,
  `version` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`product`,`activity_id`,`activity_license_id`),
  KEY `fk_version_activity1` (`activity_id`,`activity_license_id`),
  CONSTRAINT `fk_version_activity1` FOREIGN KEY (`activity_id`, `activity_license_id`) REFERENCES `activity` (`id`, `license_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我使用数据库中的 New->Entity Classes 在 NetBeans 中生成的类如下所示：

班级版本：

```
@Entity
@Table(name = "version")
@XmlRootElement
public class Version implements Serializable {
    private static final long serialVersionUID = 1L;
    @EmbeddedId
    protected VersionPK versionPK;
    @Column(name = "version")
    private String version;
    @JoinColumns({
        @JoinColumn(name = "activity_id", referencedColumnName = "id", insertable = false, updatable = false),
        @JoinColumn(name = "activity_license_id", referencedColumnName = "license_id", insertable = false, updatable = false)})
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private Activity activity;
    ... 
```

类版本PK：

```
@Embeddable
public class VersionPK implements Serializable {
    @Basic(optional = false)
    @Column(name = "product")
    private String product;
    @Basic(optional = false)
    @Column(name = "activity_id")
    private int activityId;
    @Basic(optional = false)
    @Column(name = "activity_license_id")
    private int activityLicenseId;
    ... 
```

当我执行以下代码时，我遇到了异常：

```
...
ActivityPK apk = new ActivityPK();
apk.setLicenseId(activity.getLicense().getId());
activity.setActivityPK(apk);
em.persist(activity);
em.flush(); <- Here the exception is thrown
... 
```

我怀疑这是因为活动尚未分配 ID，而 VerionPK 使用此 ID。我对吗？持久化此类数据的正确方法是什么？在将版本集合设置为 null 的持久化活动之后，我应该单独持久化版本集合吗？提前谢谢了。沃杰科技

![能效比图](../Images/19b729988179a92f9b13ba2daed95af8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:31:47.850

查看 JPA 2.0 的派生 ID。您可以将关系标记为 ID，或者使用映射 Id 指定关系 id 字段，而不必自己手动设置值。这可以在创建新树并且根实体使用排序时解决问题 - 在根被持久化之前，子实体无法将 id 用作外键。

否则，需要对根实体进行持久化和刷新，以便分配 Id。在这种情况下，Activity 实体需要主键值，然后您才能尝试保存引用它的新版本对象，因为您必须手动设置所有 version.versionpk 值。

# java - 尝试清空 JTable 时出现 ArrayIndexOutOfBoundsException

> ID：12368133
> 
> 赞同：1
> 
> 时间：2012-09-11T10:55:15.597
> 
> 标签：java, swing, netbeans, jtable, defaulttablemodel

我创建了以下 JTable 和一些按钮。其中一个按钮 (jbtClear) 正在尝试使用 setRowCount() 函数清空表格。任何想法，为什么它不起作用并产生此错误？

这是代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package nysemarketpick;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Vector;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

/**
 *
 * @author Administrator
 */
public class PortfolioForm extends javax.swing.JFrame {

    /**
     * Creates new form PortfolioForm
     */
    public PortfolioForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jbtAddRow = new javax.swing.JButton();
        jbtDeleteRow = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jPanel2 = new javax.swing.JPanel();
        jbtSave = new javax.swing.JButton();
        jbtClear = new javax.swing.JButton();
        jbtRestore = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Row functions"));

        jbtAddRow.setText("Add New Row");

        jbtDeleteRow.setText("Delete Selected Row");

        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel1Layout.createSequentialGroup()
                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jPanel1Layout.createSequentialGroup()
                        .add(34, 34, 34)
                        .add(jbtAddRow))
                    .add(jPanel1Layout.createSequentialGroup()
                        .add(16, 16, 16)
                        .add(jbtDeleteRow)))
                .addContainerGap(40, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .add(jbtAddRow)
                .add(18, 18, 18)
                .add(jbtDeleteRow)
                .addContainerGap(26, Short.MAX_VALUE))
        );

        jTable1.setAutoCreateRowSorter(true);
        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Stock Symbol", "Stock Name", "Shares", "Value (in Dollars)", "Total Value"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.Integer.class, java.lang.Double.class, java.lang.Double.class
            };
            boolean[] canEdit = new boolean [] {
                true, false, true, true, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tableModel = (DefaultTableModel)jTable1.getModel();
        jTable1.setColumnSelectionAllowed(true);
        jTable1.setRowSelectionAllowed(true);
        jTable1.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jScrollPane1.setViewportView(jTable1);
        jTable1.getColumnModel().getSelectionModel().setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        //add action listeners
        jbtAddRow.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                if (jTable1.getSelectedRow() >= 0)
                tableModel.insertRow(jTable1.getSelectedRow(), new Vector());
                else
                tableModel.addRow(new Vector());
            }
        });
        jbtDeleteRow.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                if (jTable1.getSelectedRow() >= 0)
                tableModel.removeRow(jTable1.getSelectedRow());
            }
        });
        jbtSave.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                    ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("portfolio.dat"));
                    out.writeObject(tableModel.getDataVector());
                    out.writeObject(getColumnNames());
                    out.close();
                }
                catch(Exception ex)
                {
                    ex.printStackTrace();
                }
            }
        });
        jbtClear.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                tableModel.setRowCount(0);
            }
        });
        jbtRestore.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                    ObjectInputStream in = new ObjectInputStream(new FileInputStream("portfolio.dat"));
                    Vector rowData = (Vector)in.readObject();
                    Vector columnNames = (Vector)in.readObject();
                    tableModel.setDataVector(rowData, columnNames);
                    in.close();
                }
                catch(Exception ex)
                {
                    ex.printStackTrace();
                }
            }
        });
        //add other listeners
        tableModel.addTableModelListener(new TableModelListener(){
            public void tableChanged(TableModelEvent e)
            {
                DefaultTableModel model = (DefaultTableModel)e.getSource();
                //Object data = model.getValueAt(e.getFirstRow(), e.getColumn());
                if (e.getColumn() == 0)
                {
                    Object data = model.getValueAt(e.getFirstRow(), e.getColumn());
                    String stockSymbol = (String)data;
                    XMLService2 myService = new XMLService2(stockSymbol);
                    String stockName = XMLService2.getStockName();
                    model.setValueAt(stockName, e.getFirstRow(), e.getColumn() + 1);
                }
                if (e.getColumn() != 4 && model.getValueAt(e.getFirstRow(), 2) != null && model.getValueAt(e.getFirstRow(), 3) != null)
                {
                    Double myDouble =(Integer)model.getValueAt(e.getFirstRow(), 2)*(Double)model.getValueAt(e.getFirstRow(), 3);
                    model.setValueAt(myDouble, e.getFirstRow(), 4);
                }
            }
        });

        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder("Table functions"));

        jbtSave.setText("Save");

        jbtClear.setText("Clear");

        jbtRestore.setText("Restore");

        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel2Layout.createSequentialGroup()
                .add(34, 34, 34)
                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jbtRestore)
                    .add(jbtClear)
                    .add(jbtSave))
                .addContainerGap(41, Short.MAX_VALUE))
        );

        jPanel2Layout.linkSize(new java.awt.Component[] {jbtClear, jbtRestore, jbtSave}, org.jdesktop.layout.GroupLayout.HORIZONTAL);

        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .add(jbtSave)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(jbtClear)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .add(jbtRestore))
        );

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(21, 21, 21)
                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 645, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(layout.createSequentialGroup()
                        .add(31, 31, 31)
                        .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(78, 78, 78)
                        .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(50, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 399, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(27, 27, 27)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new PortfolioForm().setVisible(true);
            }
        });
    }

    //---other methods
    private Vector getColumnNames()
    {
        Vector<String> columnNames = new Vector<String>();
        for (int i = 0; i < jTable1.getColumnCount(); i++)
            columnNames.add(jTable1.getColumnName(i));

        return columnNames;
    }

    // Variables declaration - do not modify
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private DefaultTableModel tableModel;
    private javax.swing.JButton jbtAddRow;
    private javax.swing.JButton jbtClear;
    private javax.swing.JButton jbtDeleteRow;
    private javax.swing.JButton jbtRestore;
    private javax.swing.JButton jbtSave;
    // End of variables declaration
} 
```

后期编辑：这是来自具有相同功能的书中的工作代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package projecttable5;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Vector;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

/**
 *
 * @author Administrator
 */
public class ModifyTable extends JFrame{

    //Create table column names
    private String[] columnNames = {"Country", "Capital", "Population in Millions", "Democracy"};

    //Create table data
    private Object[][] rowData = {

        {"USA", "Washington DC", 280, true},
        {"Canada", "Ottawa", 32, true},
        {"United Kingdom", "London", 60, true},
        {"Germany", "Berlin", 83, true},
        {"France", "Paris", 60, true},
        {"Norway", "Oslo", 4.5, true},
        {"India", "New Delhi", 1046, true}
    };

    //Create a table model
    private DefaultTableModel tableModel = new DefaultTableModel(rowData, columnNames);

    //Create a table
    private JTable jTable1 = new JTable(tableModel);

    //Create buttons
    private JButton jbtAddRow = new JButton("Add New Row");
    private JButton jbtAddColumn = new JButton("Add New Column");
    private JButton jbtDeleteRow = new JButton("Delete Selected Row");
    private JButton jbtDeleteColumn = new JButton("Delete Selected Column");
    private JButton jbtSave = new JButton("Save");
    private JButton jbtClear = new JButton("Clear");
    private JButton jbtRestore = new JButton("Restore");

    //Create a combo box for selection modes
    private JComboBox jcboSelectionMode = new JComboBox(new String[] {"SINGLE_SELECTION", "SINGLE_INTERVAL_SELECTION", "MULTIPLE_INTERVAL_SELECTION"});

    //Create check boxes
    private JCheckBox jchkRowSelectionAllowed = new JCheckBox("RowSelectionAllowed", true);
    private JCheckBox jchkColumnSelectionAllowed = new JCheckBox("ColumnSelectionAllowed", false);

    //---Default constructor
    public ModifyTable()
    {
        JPanel panel1 = new JPanel();
        panel1.setLayout(new GridLayout(2, 2));
        panel1.add(jbtAddRow);
        panel1.add(jbtAddColumn);
        panel1.add(jbtDeleteRow);
        panel1.add(jbtDeleteColumn);

        JPanel panel2 = new JPanel();
        panel2.add(jbtSave);
        panel2.add(jbtClear);
        panel2.add(jbtRestore);

        JPanel panel3 = new JPanel();
        panel3.setLayout(new BorderLayout(5, 0));
        panel3.add(new JLabel("Selection Mode"), BorderLayout.WEST);
        panel3.add(jcboSelectionMode, BorderLayout.CENTER);

        JPanel panel4 = new JPanel();
        panel4.setLayout(new FlowLayout(FlowLayout.LEFT));
        panel4.add(jchkRowSelectionAllowed);
        panel4.add(jchkColumnSelectionAllowed);

        //Gather panel3 and panel4
        JPanel panel5 = new JPanel();
        panel5.setLayout(new GridLayout(2, 1));
        panel5.add(panel3);
        panel5.add(panel4);

        //Gather panel1 and panel2
        JPanel panel6 = new JPanel();
        panel6.setLayout(new BorderLayout());
        panel6.add(panel1, BorderLayout.SOUTH);
        panel6.add(panel2, BorderLayout.CENTER);

        add(panel5, BorderLayout.NORTH);
        add(new JScrollPane(jTable1), BorderLayout.CENTER);
        add(panel6, BorderLayout.SOUTH);

        //Initialize table selection mode
        jTable1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //Add listeners
        jbtAddRow.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                if (jTable1.getSelectedRow() >= 0)
                    tableModel.insertRow(jTable1.getSelectedRow(), new Vector());
                else
                    tableModel.addRow(new Vector());
            }

        });
        jbtAddColumn.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                String name = JOptionPane.showInputDialog("New Column Name");
                tableModel.addColumn(name, new Vector());
            }

        });
        jbtDeleteRow.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                if (jTable1.getSelectedRow() >= 0)
                    tableModel.removeRow(jTable1.getSelectedRow());
            }

        });
        jbtDeleteColumn.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                if (jTable1.getSelectedColumn() >= 0)
                {
                    TableColumnModel columnModel = jTable1.getColumnModel();
                    TableColumn tableColumn = columnModel.getColumn(jTable1.getSelectedColumn());
                    columnModel.removeColumn(tableColumn);
                }
            }

        });
        jbtSave.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                try
                {
                    ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("tablemodel.dat"));
                    out.writeObject(tableModel.getDataVector());
                    out.writeObject(getColumnNames());
                    out.close();
                }
                catch(Exception ex)
                {
                    ex.printStackTrace();
                }
            }

        });
        jbtClear.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                tableModel.setRowCount(0);
            }

        });
        jbtRestore.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                try
                {
                    ObjectInputStream in = new ObjectInputStream(new FileInputStream("tablemodel.dat"));
                    Vector rowData = (Vector)in.readObject();
                    Vector columnNames = (Vector)in.readObject();
                    tableModel.setDataVector(rowData, columnNames);
                    in.close();
                }
                catch(Exception ex)
                {
                    ex.printStackTrace();
                }
            }

        });
        jchkRowSelectionAllowed.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                jTable1.setRowSelectionAllowed(jchkRowSelectionAllowed.isSelected());
            }

        });
        jchkColumnSelectionAllowed.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                jTable1.setColumnSelectionAllowed(jchkColumnSelectionAllowed.isSelected());
            }

        });
        jcboSelectionMode.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                String selectedItem = (String)jcboSelectionMode.getSelectedItem();

                if (selectedItem.equals("SINGLE_SELECTION"))
                    jTable1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
                else if (selectedItem.equals("SINGLE_INTERVAL_SELECTION"))
                    jTable1.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
                else if (selectedItem.equals("MULTIPLE_INTERVAL_SELECTION"))
                    jTable1.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
            }

        });

    }//end of default constructor

    private Vector getColumnNames()
    {
        Vector<String> theColumnNames = new Vector<>();

        for (int i = 0; i < jTable1.getColumnCount(); i++)
            theColumnNames.add(jTable1.getColumnName(i));

        return theColumnNames;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        try
        {
            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
        }
        catch(Exception e)
        {

        }

        ModifyTable frame = new ModifyTable();
        frame.setLocationRelativeTo(null);  //Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("TableSortFilter");
        frame.pack();
        //frame.setSize(new Dimension(300, 300));
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:02:36.543

如果您想更改表格内容，最好直接使用表格模型。创建您自己的模型并做您想做的事。

请参阅[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:20:58.413

这是最终的解决方案。这个问题的最后一个答案（http://stackoverflow.com/questions/2668547/stackoverflowerror-being-caused-by-a-tablemodellistener）帮助了我很多：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package nysemarketpick;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Vector;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;

/**
 *
 * @author Administrator
 */
public class PortfolioForm extends javax.swing.JFrame {

    //Create table column names
    private String[] columnNames = {"Stock Symbol", "Stock Name", "Shares", "Price (in dollars)", "Total"};

    //Create table data
    private Object[][] rowData = {
        {null, null, null, null, null}
    };

    //Create a table model
    private MyTableModel myTableModel = new MyTableModel(rowData, columnNames);

    //Create a table
    private JTable jTable1 = new JTable(myTableModel);

    /**
     * Creates new form PortfolioForm
     */
    public PortfolioForm() {
        initComponents();
        add(new JScrollPane(jTable1), BorderLayout.CENTER);

        //Initialize table selection mode
        jTable1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //Allow row selection
        jTable1.setRowSelectionAllowed(true);

        //Load data
        loadData();

        //add listeners
        jbtAddRow.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                if (jTable1.getSelectedRow() >= 0)
                    myTableModel.insertRow(jTable1.getSelectedRow(), new Vector());
                else
                    myTableModel.addRow(new Vector());

            }

        });
        jbtDeleteRow.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                if ((jTable1.getSelectedRow() >= 0) && (myTableModel.getValueAt(jTable1.getSelectedRow(), 1) != null))
                {
                    System.out.println(myTableModel.getValueAt(jTable1.getSelectedRow(), 1));
                    myTableModel.removeRow(jTable1.getSelectedRow());
                }
            }

        });
        jbtSave.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                try
                {
                    ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("portfolio.dat"));
                    out.writeObject(myTableModel.getDataVector());
                    out.writeObject(getColumnNames());
                    out.close();
                }
                catch(Exception ex)
                {
                    ex.printStackTrace();
                }

                disposeForm();
            }

        });
        jbtClear.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                myTableModel.setRowCount(0);
            }

        });
        jbtTotal.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                double sum = 0;
                int numberOfRows = myTableModel.getRowCount();
                for (int i = 0; i < numberOfRows; i++)
                {
                    sum = sum + (Double)myTableModel.getValueAt(i, 4);
                }
                jLabelTotal.setText(String.valueOf(sum));
            }

        });
        jbtTotals.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                Double myDouble;
                for (int i = 0; i < myTableModel.getRowCount(); i++)
                {
                    myDouble = (Integer)myTableModel.getValueAt(i, 2) * (Double)myTableModel.getValueAt(i, 3);
                    myTableModel.setValueAt(myDouble, i, 4);
                }
            }

        });

        myTableModel.addTableModelListener(new TableModelListener(){

            @Override
            public void tableChanged(TableModelEvent e) {

                myTableModel.removeTableModelListener(this);
                if (myTableModel.getRowCount() > 0)
                {
                    if (e.getColumn() == 0)
                    {
                        Object data = myTableModel.getValueAt(e.getFirstRow(), e.getColumn());
                        String stockSymbol = (String)data;
                        XMLService2 myService = new XMLService2(stockSymbol);
                        String stockName = XMLService2.getStockName();
                        myTableModel.setValueAt(stockName, e.getFirstRow(), e.getColumn() + 1);
                    }

                }
                myTableModel.addTableModelListener(this);
            }

        });
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jbtAddRow = new javax.swing.JButton();
        jbtDeleteRow = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jbtSave = new javax.swing.JButton();
        jbtClear = new javax.swing.JButton();
        jPanel4 = new javax.swing.JPanel();
        jLabelTotal = new javax.swing.JLabel();
        jbtTotal = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        jbtTotals = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setSize(new java.awt.Dimension(600, 400));

        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder("Row functions"));
        jPanel2.setLayout(new java.awt.GridLayout(2, 1));

        jbtAddRow.setText("Add New Row");
        jPanel2.add(jbtAddRow);

        jbtDeleteRow.setText("Delete Selected Row");
        jPanel2.add(jbtDeleteRow);

        jPanel1.add(jPanel2);

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder("Table functions"));
        jPanel3.setMinimumSize(new java.awt.Dimension(200, 111));
        jPanel3.setPreferredSize(new java.awt.Dimension(150, 100));
        jPanel3.setLayout(new java.awt.GridLayout(3, 1));

        jbtSave.setText("Save & Close");
        jPanel3.add(jbtSave);

        jbtClear.setText("Clear");
        jPanel3.add(jbtClear);

        jPanel1.add(jPanel3);

        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder("Total Position"));
        jPanel4.setLayout(new java.awt.GridLayout(2, 1));

        jLabelTotal.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelTotal.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jPanel4.add(jLabelTotal);

        jbtTotal.setText("Calculate");
        jPanel4.add(jbtTotal);

        jPanel1.add(jPanel4);

        getContentPane().add(jPanel1, java.awt.BorderLayout.SOUTH);

        jbtTotals.setText("Calculate Totals");

        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 145, Short.MAX_VALUE)
            .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(jPanel5Layout.createSequentialGroup()
                    .add(0, 0, Short.MAX_VALUE)
                    .add(jbtTotals)
                    .add(0, 0, Short.MAX_VALUE)))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 336, Short.MAX_VALUE)
            .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(jPanel5Layout.createSequentialGroup()
                    .add(0, 153, Short.MAX_VALUE)
                    .add(jbtTotals)
                    .add(0, 154, Short.MAX_VALUE)))
        );

        getContentPane().add(jPanel5, java.awt.BorderLayout.EAST);
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(PortfolioForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new PortfolioForm().setVisible(true);
            }
        });
    }

    //---Other methods
    private Vector getColumnNames()
    {
        Vector<String> columnNames = new Vector<String>();

        for (int i = 0; i < jTable1.getColumnCount(); i++)
            columnNames.add(jTable1.getColumnName(i));

        return columnNames;
    }

    private void disposeForm()
    {
        this.dispose();
    }

    private void loadData()
    {
        try
        {
            ObjectInputStream in = new ObjectInputStream(new FileInputStream("portfolio.dat"));
            Vector rows = (Vector)in.readObject();
            Vector columns = (Vector)in.readObject();
            myTableModel.setDataVector(rows, columns);
            in.close();
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }

    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabelTotal;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JButton jbtAddRow;
    private javax.swing.JButton jbtClear;
    private javax.swing.JButton jbtDeleteRow;
    private javax.swing.JButton jbtSave;
    private javax.swing.JButton jbtTotal;
    private javax.swing.JButton jbtTotals;
    // End of variables declaration
} 
```

# c# - 是否可以在 MSAccess 中执行批量插入

> ID：12368136
> 
> 赞同：0
> 
> 时间：2012-09-11T10:55:41.663
> 
> 标签：c#, visual-studio, ms-access

您好朋友，我如何从数据集中批量插入 MDB。直到现在我已经做了这样的事情

```
string InsertBulkQry = "INSERT INTO Table1 SELECT * FROM table IN "       

  +MYDs.Tables[0]; 
```

我正在使用 C# 和 VS 2005

或者有没有其他方法可以用多条记录更快地更新 Ms Access 表谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:06:15.073

是的，有可能。更多信息：[INSERT INTO 语句（Microsoft Access SQL）](http://msdn.microsoft.com/en-us/library/office/bb208861%28v=office.12%29.aspx)

```
var cmdText = "INSERT INTO Table1 SELECT * FROM Table2";
var command = new OleDbCommand(cmdText, connection);
command.ExecuteNonQuery(); 
```

没测试过，应该可以的。或者，您可以在 Access 中创建一个查询并从 C# 代码执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:51:34.383

这应该有效：

```
using System.Runtime.InteropServices;
using Access = Microsoft.Office.Interop.Access;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var access = new Access.Application();
            access.OpenCurrentDatabase(@"C:\whatever.mdb");
            access.DoCmd.RunSQL("INSERT INTO Table1 SELECT * FROM Table2");
            access.CloseCurrentDatabase();

            Marshal.ReleaseComObject(access);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T11:03:38.977

这是[MS Access INSERT SQL 命令](http://msdn.microsoft.com/en-us/library/office/bb208861%28v=office.12%29.aspx)的解释。

# java - java 字节码中的 java 注解是如何表示的

> ID：12368137
> 
> 赞同：7
> 
> 时间：2012-09-11T10:55:43.303
> 
> 标签：java, annotations, bytecode, decompiling, declarative

我试图反编译一个包含 JUnit 测试的 .class 文件。我阅读了字节码，但没有看到@Test注解的任何线索（它在java源代码中使用）。

作为元数据，注释如何在字节码中表示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T10:59:03.250

注释出现在与之关联的事物的字节码之前。如果您没有看到注释，则可能是旧的反编译器（其中大部分是）

# powershell - Powershell从文本文件中检索变量

> ID：12368142
> 
> 赞同：27
> 
> 时间：2012-09-11T10:56:12.817
> 
> 标签：powershell

有没有办法读取文本文件 C:\test.txt 并检索特定值？

ie文件看起来像这样：

```
serverName=serv8496
midasServer=serv8194 
```

我想从这个文件中以某种方式在我的脚本中设置一个变量的值，例如：

```
$MidasServer= (from file midasServer value) 
```

我不知道引用所在的行号。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-11T11:08:19.080

是的，读取文件，拆分每一行并将拆分结果分配给 Name 和 Value 参数：

```
Get-Content file.txt | Foreach-Object{
   $var = $_.Split('=')
   New-Variable -Name $var[0] -Value $var[1]
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-04-13T13:28:07.690

如果这正是您的文件的显示方式，即用等号表示的键值对列表，那么您应该看看[`ConvertFrom-StringData`](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.utility/convertfrom-stringdata?f=255&MSPPError=-2147217396)哪个

> 将包含一个或多个键值对的字符串转换为哈希表。因为每个键/值对必须在单独的行上，所以这里的字符串通常用作输入格式。

因此，如果文本文件仅包含示例中的数据，您可以这样做来创建哈希表

```
$Path = "C:\temp\test.txt"
$values = Get-Content $Path | Out-String | ConvertFrom-StringData
$values.midasServer 
```

那里的`$values.midasServer`值是 serv8194。无需知道属性相对于文件的位置。您的输入文件也可以在等号周围有不同的前导和尾随空格，这将给出完全相同的结果。

根据您的用例，您可以更进一步并从该哈希表创建一个自定义对象

```
New-Object -TypeName pscustomobject -Property $values 
```

如果您至少拥有 PowerShell v3 或更高版本，则可以简化流程（假设您需要自定义 psobject）

```
$values = [pscustomobject](Get-Content $Path -Raw | ConvertFrom-StringData)
$values.midasServer 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-05T05:30:16.297

这是对 Shay Levy 答案的改进。它执行以下操作。

1.  在开始处理文件之前，它会忽略 file.txt 中的注释行和新行。因此它解决了错误，指出无法创建名称，因为它是一个空字符串。
2.  它仅在字符“=”的第一次出现时拆分。因此，您可以在值字段中使用任何字符。
3.  它执行 Trim() 操作以从变量/属性的开头和结尾删除空格字符。因此 file.txt 中的 "VARIABLE=VALUE" 和 "VARIABLE = VALUE" 返回相同。
4.  将新变量的范围设置为“脚本”。在脚本范围内创建的变量只能在创建它们的脚本文件或模块中访问。其他选项是全局、本地和私有。[您可以在此处](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/new-variable?view=powershell-6)找到变量范围参考。

```
Get-Content file.txt | Where-Object {$_.length -gt 0} | Where-Object {!$_.StartsWith("#")} | ForEach-Object {

    $var = $_.Split('=',2).Trim()
    New-Variable -Scope Script -Name $var[0] -Value $var[1]

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T14:36:41.163

这对我来说是成功的：

*(输入文件 = 文件名.txt)*
[string] $person 'Joe'
[int] $age 50
[datetime] $dob '06/11/1971'

*（命令）*
获取内容文件名.txt | ForEach-Object {
    $invar = $_.Split(" ").Trim()
    调用表达式 (Invoke-Command -ScriptBlock {
        $($invar[0])+$($invar[1])+'=' +$($invar[2])
        } )
}

如果您知道有一个“值”，它将包含空格，即“人“Joe B”，只需加入这些值，就像这样......

替换为：
        $($invar[0])+$($invar[1])+'='+$($invar[2])

有了这个：
        $($invar[1])+$($invar[2])+'='+ (-join $($invar[3]),$($invar[4]),$($invar [5]))

# ffmpeg - 在 ffmpeg 中添加静音音频

> ID：12368151
> 
> 赞同：59
> 
> 时间：2012-09-11T10:56:40.317
> 
> 标签：ffmpeg

我正在尝试使用 ffmpeg 将静音音轨添加到 MOV 文件中。

我创建了一个比视频更长的无声音轨，并打算在 ffmpeg 中使用 -shortest 选项。

使用 SoX v14.3.1，我运行它来生成一个 wav 文件：

```
sox -n -r 44100 -b 16 -c 2 -L silence.wav trim 0.0 60.000

# -n  = Sox's null file
# -r = sample rate 
# -b = bits per sample
# -c = num of channels
# -L = little endian
# filename
# trim - is an effect, args start and length. 
```

我的基本 ffmpeg 命令如下所示：

```
ffmpeg -shortest \
-i silence.wav -acodec pcm_s16le \
-i vid_no_sound.mov -vcodec copy vid_with_sound.mov 
```

结果是：

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Aug 27 2012 13:11:25 with gcc 4.4.5
  configuration: --extra-cflags=-static --prefix=/root/ffmpeg_build/src/ffmpeg-0.11.1 --enable-bzlib --enable-gnutls --enable-libfreetype --enable-libmp3lame --enable-libdc1394 --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-openssl --enable-zlib --enable-gpl --enable-nonfree --enable-version3
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
[wav @ 0x29ab2e0] max_analyze_duration 5000000 reached at 5015510
Guessed Channel Layout for  Input Stream #0.0 : stereo
Input #0, wav, from 'silence.wav':
  Duration: 00:01:00.00, bitrate: 1411 kb/s
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s
Input #1, mov,mp4,m4a,3gp,3g2,mj2, from 'vid_no_sound.mov':
  Metadata:
    major_brand     : qt
    minor_version   : 537199360
    compatible_brands: qt
    creation_time   : 2012-07-25 13:41:44
  Duration: 00:00:14.50, start: 0.000000, bitrate: 27457 kb/s
    Stream #1:0(eng): Video: qtrle (rle  / 0x20656C72), rgb24, 1920x1080, 27450 kb/s, SAR 1920:1920 DAR 16:9, 24 fps, 24 tbr, 24 tbn, 24 tbc
    Metadata:
      creation_time   : 2012-07-25 13:41:44
      handler_name    : Apple Alias Data Handler
    Stream #1:1(eng): Data: none (tmcd / 0x64636D74)
    Metadata:
      creation_time   : 2012-07-25 13:42:06
      handler_name    : Apple Alias Data Handler
      timecode        : 00:00:00:00
File 'vid_with_sound.mov' already exists. Overwrite ? [y/N] y
auto-inserting filter 'auto-inserted resampler 0' between the filter 'src' and the filter 'aformat'
[aresample @ 0x2ab3b00] chl:stereo fmt:s16 r:44100Hz -> chl:stereo fmt:flt r:44100Hz
[NULL @ 0x2994320] Codec is experimental but experimental codecs are not enabled, try -strict -2
Output #0, mov, to 'vid_with_sound.mov':
    Stream #0:0(eng): Video: qtrle (rle  / 0x20656C72), rgb24, 1920x1080 [SAR 1920:1920 DAR 16:9], q=2-31, 27450 kb/s, 24 fps, 90k tbn, 24 tbc
    Metadata:
      creation_time   : 2012-07-25 13:41:44
      handler_name    : Apple Alias Data Handler
    Stream #0:1: Audio: none, 44100 Hz, stereo, flt, 128 kb/s
Stream mapping:
  Stream #1:0 -> #0:0 (copy)
  Stream #0:0 -> #0:1 (pcm_s16le -> aac)
Error while opening encoder for output stream #0:1 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

我已尝试`-strict -2`按照建议添加，尽管我不确定将其放在命令行中的哪个位置。

我花了两个小时尝试不同的东西并阅读 ffmpeg 文档，但我仍然卡住了。

如何将静音音轨添加到 mov 文件？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-09-11T17:35:31.657

# [anullsrc](https://ffmpeg.org/ffmpeg-filters.html#anullsrc)音频过滤器

您可以使用它`ffmpeg`来创建无声音频并将其与视频相结合，只需一步即可。此示例将使用[anullsrc 音频过滤器](https://ffmpeg.org/ffmpeg-filters.html#anullsrc)生成采样率为 44100 的立体声静音音频：

```
ffmpeg -f lavfi -i anullsrc=channel_layout=stereo:sample_rate=44100 -i video.mov -c:v copy -c:a aac -shortest output.mov 
```

*   `channel_layout=stereo:sample_rate=44100`是默认设置，但我将其作为如何使用这些选项的示例。

## 忽略现有音频

如果您的视频输入文件包含要忽略的音频，则使用该[`-map`](https://ffmpeg.org/ffmpeg.html#Advanced-options)选项覆盖默认[流选择](https://ffmpeg.org/ffmpeg.html#Stream-selection)行为：

```
ffmpeg -f lavfi -i anullsrc -i video.mov -c:v copy -c:a aac -map 0:a -map 1:v -shortest output.mp4 
```

*   `-map 0:a -map 1:v`可以翻译为：从第一个输入 ( `0`) 使用音频 ( `a`)，从第二个输入 ( `1`) 使用视频 ( `v`)。

* * *

### 笔记

*   这些示例将[流式复制](https://ffmpeg.org/ffmpeg.html#Stream-copy)视频，因此它不会被重新编码（如“复制和粘贴”）。

*   始终建议使用最近的`ffmpeg`. 最新版本的链接位于[FFmpeg 下载](https://ffmpeg.org/download.html)页面上，或者您可以参考分步[指南来编译`ffmpeg`](https://trac.ffmpeg.org/wiki/CompilationGuide).

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-09T14:11:07.240

这是[最新 ffmpeg](https://ffmpeg.org/download.html)的命令，适用于 MP4 (H264/AVC)：

```
ffmpeg -f lavfi -i aevalsrc=0 -i input.mp4 -c:v copy -c:a aac -map 0 -map 1:v -shortest output.mp4 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-20T07:38:17.663

从图像创建视频或将图像转换为视频，然后使用 ffmpeg 添加静音音频。

您可以在 ffmpeg 中使用 anullsrc 音频源过滤器。从图像制作 5.1 通道、48000 Hz 采样率、10 秒无声视频文件的示例：

```
ffmpeg -loop 1 -i img002.jpg -f lavfi -i anullsrc=channel_layout=5.1:sample_rate=48000 -t 10 -c:v libx264 -t 10 -pix_fmt yuv420p -vf scale=480:320 -y output.mp4 
```

> img002.jpg：输入图像文件
> 
> -i anullsrc：添加静音音频
> 
> -t 10：秒数
> 
> scale=480:320：视频分辨率宽度=420，高度=320
> 
> -y：覆盖现有的输出文件
> 
> output.mp4：输出文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T14:50:39.090

订单很重要。我已经尝试了上面的 sox 命令和下面的 ffmpeg 命令，它可以工作

```
ffmpeg -shortest -i silence.wav -acodec pcm_s16le -i out.mov -vcodec copy -strict -2 vid_with_sound.mov 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-05T12:39:46.163

到目前为止，我为 ffmpeg ver > 4.2 找到的最简单的方法：

**在开头添加静音：**

```
ffmpeg -i audio_in.wav -af areverse,apad=pad_dur=1s,areverse audio_out.wav 
```

**在末尾添加静音：**

```
ffmpeg -i audio_in.wav -af apad=pad_dur=1s audio_out.wav 
```

这将为音频添加 1 秒的静音。

# android - Android Listview 项目图像圆角

> ID：12368154
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:56:58.643
> 
> 标签：android, android-layout

我的 android listview 行包含一个图像和一些描述，我需要图像有圆角

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:00:32.593

[这](http://blog.gunawan.me/2012/03/create-semi-transparent-rounded-border.html)是解决方案。在 Android 中创建半透明圆角边框图像

# flash - 本地加载 XML 文件时出现问题（无法加载 url）

> ID：12368156
> 
> 赞同：0
> 
> 时间：2012-09-11T10:57:02.067
> 
> 标签：flash, actionscript, actionscript-2, flash-cs5

我试图让我的 Flash 应用程序解释一个 XML 文件。我的代码如下所示：

```
var questions:XML = new XML();
questions.ignoreWhite=true;
questions.load('questions.txt');

questions.onLoad = function(success:Boolean){
    if(success){
        if(questions.status == 0){
            trace("yay");
        } else { 
            trace("Problem parsing XML.");
        } 
    } else{
        trace("Could not load XML");
    }
}
stop(); 
```

我得到的输出是：

```
Could not load XML
Error opening URL 'file:///C|/Users/Peter/Desktop/Flash/questions.txt' 
```

有谁知道为什么我不能访问这个文件？我已验证该 URL 有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:17:20.087

请确保名称为 questions.txt 的文件在那里（在您的 fla 的同一文件夹中），因为该错误是由于该 url 上没有可用的文件。

不用担心扩展名，它可以加载 txt 或 xml 文件。您需要做的就是提供正确的文件名。

# mysql - 用空字符串 MYSQL 替换非字母数字字符

> ID：12368159
> 
> 赞同：3
> 
> 时间：2012-09-11T10:57:09.207
> 
> 标签：mysql, alpha, numeric

```
select 
    file,
    REPLACE(FILE, '[:alnum:]'+'.'+,'') AS Collection
FROM
   CollectionData;

select 
    file,
REPLACE(FILENAME, '^[a-zA-Z0-9\.]','') AS Collection
FROM collectiondata; 
```

我想替换字符串中的所有非字母数字字符，包括字符串中的 .file 扩展名，如下所示。

```
AXS00003600.txt  to AXS
NXS4DG00003600.txt to NXS4DG 
```

执行上述查询时，我无法替换非字母数字数据。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:25:51.230

不幸的是，MySQL 不包含任何`REGEXP_REPLACE`操作。您尝试使用的普通`REPLACE`函数不适用于正则表达式。您需要在客户端代码或存储过程中执行此操作。

# silverlight - mvvm 中数据网格的单元格值

> ID：12368163
> 
> 赞同：0
> 
> 时间：2012-09-11T10:57:45.173
> 
> 标签：silverlight, mvvm, datagrid

如何在 MVVM 中获取数据网格的单元格值。我没有选择任何内容，只是我想要第二行第一列的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:02:05.607

通常，您的 Datagrind 绑定到 Viewmodel 上的属性。只需在您的 Viewmodel 中访问该属性并获取您需要的值。

在 ViewModel 你有一个属性：

```
 public ObservableCollection<Characteristic> Items{get;set;} 
```

特性类

```
public class Characteristic : ObservableObject
{
    private string _name;

    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            RaisePropertyChanged("Name");
        }
    }

} 
```

在 XAML 中：

```
 <DataGrid Margin="0" Grid.Row="1" ItemsSource="{Binding Items}" AutoGenerateColumns="True" /> 
```

您只需访问 ViewModel 上的 Items 属性并获取 Collection 的第二项。

# xslt - 在项目中声明全局变量并在 xslt 中使用

> ID：12368164
> 
> 赞同：2
> 
> 时间：2012-09-11T10:57:50.157
> 
> 标签：xslt, xslt-1.0

对于 XSLT 中的疑问，我会寻求您的指导。在我当前的项目中，需要创建许多 XSLT 文件。在这些转换中，执行的常见步骤很少；例如。从输入 xml 更改元素值的大写。我目前在 XSLT 中使用以下代码，因此如果创建了 50 个 XSLT，则此代码将被复制。

```
<xsl:variable name="smallcase" select="'abcdefghijklmnopqrstuvwxyz'" />
            <xsl:variable name="uppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" /> 
            <xsl:message>UPPERCASE is <xsl:value-of select="translate($MsgType, $smallcase, $uppercase)" /></xsl:message> 
```

就如何避免代码重复征求您的意见。我可以创建一个通用 XML 文件（例如实用程序）并声明变量大写和小写，我应该在 xslt.xml 中调用这些变量吗？类似于其他编。像 java 这样的语言，我可以在其中全局声明一个通用函数并在不同的类中使用它。基本上我想知道是否可以全局声明并在所有xslt中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:10:07.337

我会使用`<include/>`定义所有全局变量的 XSLT 文件。另见[http://www.w3.org/TR/xslt#element-include](http://www.w3.org/TR/xslt#element-include)

将所有变量放入文件“my_global_variables.xsl”中：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:variable name="myVariable" select="'xyz'"/>

<!-- more variables to add -->

</xsl:stylesheet> 
```

您的主样式表看起来像这样，包括“my_global_variables.xsl”：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:include href="my_global_variables.xsl"/>

<xsl:template match="/">

</xsl:template>
</xsl:stylesheet> 
```

还有一个`<import>`元素可以用来导入样式表。导入样式表的优先级低于导入样式表 - 所以在你的情况下我会使用`<include>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:58:39.893

> 就如何避免代码重复征求您的意见。我可以创建一个通用 XML 文件（例如实用程序）并声明变量大写和小写，我应该在 xslt.xml 中调用这些变量吗？

**[`<xsl:import>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-import)**并且**[`<xsl:include>`](http://www.w3.org/TR/1999/REC-xslt-19991116#include)**是专门为此任务设计的两条 XSLT 指令。

样式表模块中的全局变量（元素的子`xsl:stylesheet`元素）可在包含此样式表的样式表中访问。导入规则稍微复杂一些，但如果导入样式表中的全局变量之间没有命名冲突，则它们都可以从导入样式表中访问。

**最后**，我建议*不要*使用 www.w3schools.com -- 查看原因：[http ://www.w3fools.com](http://www.w3fools.com)

# jquery - JQuery：没有为相同的控件ID正确选择单选按钮

> ID：12368165
> 
> 赞同：0
> 
> 时间：2012-09-11T10:57:51.673
> 
> 标签：jquery, dynamic, radio-button

我正在动态创建单选按钮，并使用 Jquery 根据数据库中的值选择适当的单选按钮。下面是渲染后生成的示例代码。

```
<input checked="checked" id="Claim_0" name="Temp.MyClaim" type="radio" value="True" />
                <label for="Yes">Yes</label>
                <input id="Claim_0" name="Temp.MyClaim" type="radio" value="False" />
                <label for="No">No</label>

<input id="Claim_1" name="Temp.MyClaim" type="radio" value="True" />
                <label for="Yes">Yes</label>
                <input checked="checked" id="Claim_1" name="Temp.MyClaim" type="radio" value="False" />
                <label for="No">No</label> 
```

我正在使用 JQuery 来选择值，下面是示例代码

```
var j = 0;
$('input:radio[id^="Claim_"]').each(function () {

    var selection = $(this)[0].defaultChecked;
    if (selection) {                        
        if ($(this).val() == "True") {
    $("input:radio[id=Claim_" + j + "]:nth(0)").attr('checked', true)
            $('#ClaimData_' + j).show();
        }
        else {
    $("input:radio[id=Claim_" + j + "]:nth(1)").attr('checked', true)
            $('#ClaimData_' + j).hide();
        }
        j++;
    }
}); 
```

问题是，在页面的最终输出中，只有最后一个单选按钮显示为选中状态，我已经动态更改了每个组的 id，但仍然只有一个单选按钮被选中。

请建议我做错了什么或我该如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:08:06.053

您`Temp.MyClaim`对所有单选按钮使用相同的名称。这是一个单选按钮组，只能选择一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:06:28.053

```
$('input[type="radio"][title^="Claim_"]').prop('checked', true); 
```

您对所有收音机都使用相同的名称和相同的 ID，所以这会给您带来麻烦！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:00:52.550

像这样编辑

```
$('input:radio').each(function () {

var selection = $(this).val();
if (selection == 'True') {
    $(this).attr("checked", "checked");
}
else {
    $(this).attr("checked", "checked");        
}
}); 
```

# javascript - 如何在 viewmodel contet update update 上调用 Jquery 函数

> ID：12368167
> 
> 赞同：1
> 
> 时间：2012-09-11T10:57:57.710
> 
> 标签：javascript, jquery, mvvm, knockout.js

我有一个用于 URL 缩短的 JQueryFunction。
就像 `$(".comment").shorten();` 我通常在页面加载时调用的那样。

我有一个`DIV`标签，其内容通过 Data-bind 填充，例如

```
<div style="float: left; margin: 5px 0px 0px 30px; width: 92%" class="comment">  

<span data-bind="text: Element.Abstract"  style="text-align: justify;"  /> 
```

我需要知道在哪里调用该 `$(".comment").shorten();` 函数，以便在绑定内容后该函数可以缩短内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:09:52.310

你有几个选择。

1.  创建自定义绑定。

您可以创建由 KnockoutJS 执行的自定义绑定。您可以选择在初始化和更新时运行代码。用你的 jQuery 函数来响应这两者就可以了。然后，您可以将 HTML 设置为：`data-bind="shortenUrl: Element.Abstract"`

有关示例，请参阅[文档。](http://knockoutjs.com/documentation/custom-bindings.html)

1.  使用读写属性扩展您的可观察对象并响应写入。

您可以将您的 observables 视为具有读取和写入功能的属性。write 函数可以先调用你的 jQuery 函数，然后初始化值。

有关示例，请参阅[文档。](http://knockoutjs.com/documentation/extenders.html)

我的偏好是自定义绑定。这是一个很好的解决方案，可以在多个地方使用而无需重复代码。

# git - 这些 git 命令有什么区别？

> ID：12368173
> 
> 赞同：1
> 
> 时间：2012-09-11T10:58:34.073
> 
> 标签：git

谁能告诉我两者之间的区别：

```
git commit -a -m 
```

和

```
git commit -am 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:00:57.433

后者需要更少的两次击键。在功能上它们是等价的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:03:41.827

这是一个非常标准的 *NIX 约定，不需要任何参数的单破折号参数可以组合成单个参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:06:16.583

它们可以按照`gitcli`[命令行界面] 帮助页面`git help cli`和页面中`git rev-parse --help`的讨论进行组合

# windows - 为什么在执行长批处理文件时，Windows 命令提示符会停止，直到按下一个键？

> ID：12368175
> 
> 赞同：1
> 
> 时间：2012-09-11T10:58:37.297
> 
> 标签：windows, perl, command-line, windows-xp

当我运行一个长批处理文件时，命令提示符挂起。但是，当按下回车键时，它会继续没有任何问题。

为什么会这样？有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:56:09.810

如果不能看到批处理文件本身，很难回答这样的问题。但是，根据您的描述，似乎在某处调用了`pause`批处理命令。这将提供你说你正在经历的行为。

如果没有必要在那里暂停，您可能可以安全地删除该`pause`行。您可能更愿意将其注释掉。

# python - 熊猫数据透视函数中索引的重复条目

> ID：12368180
> 
> 赞同：2
> 
> 时间：2012-09-11T10:58:50.530
> 
> 标签：python, dataframe, pivot, pandas

我正在尝试创建一个新的数据框，该数据框源自旋转该数据框：

```
 dataframe name      date tenor mat strike      capvol
      0   EUR CapFloor Volat_3m  20120903    3m  1y   0.25  152.202160
      1   EUR CapFloor Volat_3m  20120903    3m  1y   0.50  151.969370
      2   EUR CapFloor Volat_3m  20120903    3m  1y      1  149.266970
      3   EUR CapFloor Volat_3m  20120903    3m  1y   1.50  152.940750
      4   EUR CapFloor Volat_3m  20120903    3m  1y      2  157.229350
      5   EUR CapFloor Volat_3m  20120903    3m  1y   2.25  159.325890 
```

我的目标是按日期、垫子和罢工对数据进行分组（我可以删除“3m”和“数据框名称”列，因为它们对所有数据都是通用的）。我尝试使用以下命令：

```
 df = frame.pivot('date','mat','strike') 
```

但得到这个错误：

```
 'Index contains duplicate entries, cannot reshape' 
```

尽管我检查了我的数据并且在行上不包含重复项。

任何人都可以帮助我解决这个问题，或者提出一种替代枢轴功能的方法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:13:43.993

也许`set_index`是你想要的？`pivot`是一个重塑操作：

```
In [4]: frame.set_index(['date', 'mat', 'strike'])
Out[4]: 
                            dataframe name tenor     capvol
date     mat strike                                        
20120903 1y  0.25    EUR CapFloor Volat_3m    3m  152.20216
             0.50    EUR CapFloor Volat_3m    3m  151.96937
             1.00    EUR CapFloor Volat_3m    3m  149.26697
             1.50    EUR CapFloor Volat_3m    3m  152.94075
             2.00    EUR CapFloor Volat_3m    3m  157.22935
             2.25    EUR CapFloor Volat_3m    3m  159.32589

In [7]: df.capvol.unstack('mat')
Out[7]: 
mat                     1y
date     strike           
20120903 0.25    152.20216
         0.50    151.96937
         1.00    149.26697
         1.50    152.94075
         2.00    157.22935
         2.25    159.32589 
```

# objective-c - 在多个类之间共享对同一对象的引用作为多个 ivars

> ID：12368181
> 
> 赞同：0
> 
> 时间：2012-09-11T10:58:59.120
> 
> 标签：objective-c

以下不是共享数据的最佳组织，但我仍然想知道为什么它不起作用..

`SharedClass`在这个例子中不是一个单例，只是一个被传递的常规对象。

A 类有 ivar：

`@property (nonatomic, retain) SharedClass*sharedClass;`

B类和C类都有这个：

`@property (nonatomic,assign) SharedClass*sharedClass;`

（在这种情况下，“分配”可能是“保留”，我认为这对这个问题并不重要）

A 类在其初始化 ivar `init`：

`self.sharedClass=[[SharedClass new] autorelease]; // autorelease since it is retained`

B 类在其 init 中*不*处理 ivar。相反，B 类在 A 类的 init 中实例化，并在之后传递一个引用，如下所示：

在 A 类

`self.classB=[[ClassB new] autorelease]; self.classB.sharedClass=self.sharedClass; // passing a reference to same object; this is working as expected`

这是我不明白的。C 类在 B 类中实例化，`init`并且还传递了一个引用，但由于这是在 B 类从 A 类获取其对象之前发生的，所以它暂时为空，我希望：

B类：

`self.classC=[[ClassC new] autorelease]; self.classC.sharedClass=self.sharedClass; //self.sharedClass is currently nil, thus so is self.classC.sharedClass`

在 B 类在 A 类中实例化（因此 C 类也在 B 类中实例化）并且 A 类分配`sharedClass`给 B 类之后，不应该这样涟漪，以便`sharedClass`对象现在也可以在 C 类中使用吗？就因为它是nil，它仍然指向一个不再是nil的空间，对吧？

但是我发现如果在 A 类中处理进一步的步骤，C 类只能引用 sharedClass：

`self.classB=[[ClassB new] autorelease]; self.classB.sharedClass=self.sharedClass; self.classB.classC.sharedClass=self.sharedClass;//why is this necessary?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:21:14.060

如果`self.sharedClass`在`nil`你的任务中

```
self.classC.sharedClass = self.sharedClass; 
```

then`self.classC.sharedClass`也是`nil`，并且将某些内容分配给`self.sharedClass`later 并不会改变这一点。

> 就因为它是nil，它仍然指向一个不再是nil的空间，对吧？

那是错误的，`nil`是一个“空对象”并且不指向任何地方。

# javascript - 主干视图模板 - 将它们存储为外部文件

> ID：12368183
> 
> 赞同：0
> 
> 时间：2012-09-11T10:59:01.990
> 
> 标签：javascript, jquery, html, templates, backbone.js

我一直在修补 Backbone.js，想知道是否可以从外部文件加载视图模板。我一直在使用 Underscore.js 的微模板解决方案，并且在我的 HTML 文档中包含我的所有模板一直困扰着我。

我想知道是否有这样做的标准方法。我应该遵循什么好的做法吗？

谢谢大家的时间和帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:08:53.213

对于所有将字符串编译为 javascript 的模板库，在标头中添加一些代码，每个模板都可以存储在单独的文件中，并通过公共`windows.myTemplates`对象或类似对象导出。代码只会评估给定的字符串（实际模板），并将结果绑定到 windows 对象以使其可用于其他脚本。这样，每个模板都将是它自己的脚本，并且可以通过全局对象（如`windows.myTemplates.someTemplate`.

这并不意味着这是一个好主意。除非您有很多和/或很少加载的大型模板，否则正常的目标是尽量减少到服务器的往返，这与您正在做的事情完全相反。服务器端，事情有点不同，但我假设你在谈论客户端（基于你的问题）。

只有在需要的时候才会有更好的方法（谷歌“javascript AMD”、require.js 和类似的），但这些方法上手起来更具挑战性。

# jquery - 检索所有 id

> ID：12368187
> 
> 赞同：3
> 
> 时间：2012-09-11T10:59:18.700
> 
> 标签：jquery, jqgrid

您如何使用 jqGrid`loadonce:true`和`datatype:json`在 jqGrid 中获取页面中的所有 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:24:01.950

您可以使用该[`data`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)选项直接检索网格数据：

```
 myGrid.jqGrid('getGridParam', 'data'); 
```

然后，您将需要迭代`data`以检索您的每个 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T16:07:01.227

您需要获取`_index`jqGrid 的参数。它是具有 id 作为属性的对象。如果您需要一个 id 数组（如`getDataIDs`方法），您可以执行以下操作

```
var id, ids = [], indexes = $("#grid").jqGrid("getGridParam", "_index");
for (id in indexes) {
    if (indexes.hasOwnProperty(id)) {
        ids.push(id);
    }
} 
```

`ids`代码用本地网格的 id填充数组。

顺便说一句，`_index`对象的值（如上面的 for 循环中）包含数组`indexes[id]`中相应数据对象的索引。`$("#grid").jqGrid("getGridParam", "data")`

例如，如果您将使用如下数据填充网格

```
var myData = [
        {id: "x", name: "abc", age: "12"},
        {id: "y", name: "def", age: "34"}
    ];
$("#grid").jqGrid({
    data: myData,
    datatype: "local",
    colModel: [{name: "name"}, {name: "age"}]
}); 
```

那么`$("#grid").jqGrid("getGridParam", "_index")`将是对象

```
{
    x: 0, // index of the data for the item having id="x"
    y: 1  // index of the data for the item having id="y"
} 
```

并且`$("#grid").jqGrid("getGridParam", "data")`将是数组

```
[
    {name: "abc", age: "12"}
    {name: "def", age: "34"}
] 
```

# objective-c - 对象真的是通过 Value 传递的，还是 Objective C 运行时玩了一个聪明的把戏？

> ID：12368188
> 
> 赞同：2
> 
> 时间：2012-09-11T10:59:22.663
> 
> 标签：objective-c, parameter-passing

看看这个：

```
#import <Foundation/Foundation.h>

@interface ClassA : NSObject

-(NSString *) method1:(NSString*)str1;

@end

@implementation ClassA

-(NSString *) method1:(NSString*)str1
{
    NSLog(@"2\. %@ at %p", str1, str1);
    str1 = @"foo";
    NSLog(@"3\. %@ at %p", str1, str1);  
    return str1;
}

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // insert code here...
        NSLog(@"Hello, World!");
        NSString *str = @"moo";
        NSLog(@"1\. %@ at %p", str, str);
        ClassA *a = [[ClassA alloc] init];
        NSString *b = [a method1:str];
        NSLog(@"4\. %@ at %p", str, str);
        NSLog(@"5\. %@ at %p", b, b);
    }
    return 0;
} 
```

控制台日志是：

```
2012-09-11 17:03:16.160 passByValue[1559:403] Hello, World!
2012-09-11 17:03:16.162 passByValue[1559:403] 1\. moo at 0x104c42248
2012-09-11 17:03:16.162 passByValue[1559:403] 2\. moo at 0x104c42248
2012-09-11 17:03:16.163 passByValue[1559:403] 3\. foo at 0x104c421e8
2012-09-11 17:03:16.163 passByValue[1559:403] 4\. moo at 0x104c42248
2012-09-11 17:03:16.164 passByValue[1559:403] 5\. foo at 0x104c421e8 
```

注意 str 的地址是 main 函数，在 str1 被重新分配之前，method1 中的 str1 的地址是相同的。这是否遵循按值传递的原则？

是的，控制回到main后str的值和地址保持不变，遵循传值原则。

那么任何人都可以解释这一点，还是我们应该接受 str 是按值传递而不是按引用传递的事实。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:27:05.483

首先，“对象”不是 Objective-C 中的值。你不能有一个“对象”类型的表达式——如果你做了这样的事情，编译器会抱怨：

```
NSString foo; 
```

相反，您只能拥有对象指针。你可以对对象做的一切，都是通过对象指针来做的。在您的代码中`str`，`str1`, 等是对象指针变量。

除此之外，Objective-C 确实总是按值传递。您的问题没有真正意义，因为“对象”没有被传递或分配。（“对象”首先不是值。）在您的示例中，您的方法采用对象指针。

与按值传递一样，对局部变量的赋值不会影响外部代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:05:11.627

实际上，如果对象参数真的按值传递，您会看到完全相反的行为。正是因为它们是通过引用传递的，所以它们的地址在and中`str1`是相同的——你只有两个对同一个指针的引用 ( and )。`main``method1``str``str1`

# c# - c# MS Excel Application.ActiveSheet，我可以将它保存在单独的文件中吗？

> ID：12368189
> 
> 赞同：-2
> 
> 时间：2012-09-11T10:59:22.833
> 
> 标签：c#, .net, excel

我开发“Excel 2007 插件”并使用“Microsoft.Office.Interop.Excel.Application.ActiveSheet”。如何将其保存在单独的文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:30:51.490

您需要将活动工作表分配给一个`Microsoft.Office.Interop.Excel.Worksheet`对象，然后只需调用该对象的 SaveAs 方法，如下所示：

```
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            Excel.Application ap = new Excel.Application();
            Excel.Workbook wb = ap.Workbooks.Open(@"C:\whatever.xlsx");
            Excel.Worksheet ws = wb.ActiveSheet;

            ws.SaveAs(@"C:\somethingelse.xlsx");

            ap.Workbooks.Close();
            Marshal.ReleaseComObject(ap);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:16:08.433

我发现了解释如何在 VB.NET 中保存活动工作表的帖子：

```
Sub test()
  ActiveSheet.Copy
  ActiveWorkbook.SaveAs Filename:="C:\MyFolder\MySubFolder\Test.xls"
  ActiveWorkbook.Close
End Sub 
```

但是您可以在 C# 中尝试此逻辑，切换活动工作表并分别保存每个工作表

这应该将它们保存在单独的工作簿中......

```
Sub test()

Dim iNoSheets As Integer
Dim i As Integer

iNoSheets = Worksheets.Count

For i = 1 To iNoSheets
Worksheets(i).Activate
ActiveSheet.Copy
ActiveWorkbook.SaveAs Filename:="C:\Test" & i & ".xls"
ActiveWorkbook.Close
Next

End Sub 
```

现在在 C# 中：

```
public void SaveSheets()
{
for(int i = 0; i < Worksheets.Count; i++)
{
Worksheets[i].Activate();
ActiveSheet.Copy();
ActiveWorkbook.SaveAs(string.Format(@"C:\sheet{0}.xlsx",i));
ActiveWorkbook.Close();
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T14:42:55.867

以下工作 C# 代码已准备好复制和粘贴，并将在给定路径下保存当前活动的 Excel 工作簿（如果取消注释相应的代码行，则将其名称写入控制台）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using Excel = Microsoft.Office.Interop.Excel;
using System.Runtime.InteropServices;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            Excel.Application objApp;

            objApp = (Excel.Application)Marshal.GetActiveObject("Excel.Application");
            /*Console.WriteLine(objApp.ActiveWorkbook.Name);
            Console.ReadKey(); */

            objApp.ActiveWorkbook.SaveAs(@"C:\temp\ExcelTest\Test.xlsx", Excel.XlFileFormat.xlWorkbookDefault);
        }
    }
} 
```

# sql-server - 读取 ntext 列

> ID：12368190
> 
> 赞同：0
> 
> 时间：2012-09-11T10:59:34.783
> 
> 标签：sql-server, ado.net

当您使用简单的选择查询时，我有一个包含 ntext 字段的列的数据库，我只返回前 8000 个字节。我怎样才能得到里面的所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:21:18.413

正如@Tim Schmelter 评论`NTEXT`的那样，不推荐使用它，所以最好不要使用它。以下问题的答案提供了关于改用什么的建议：

[如何准备包含 NText (clob) 参数的 ADO.NET 语句](https://stackoverflow.com/questions/4221196/how-to-prepare-an-ado-net-statement-which-includes-an-ntext-clob-parameter)

如果仍然需要使用，`NTEXT`则可能使用以下 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/ms175547(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms175547%28v=sql.105%29.aspx)

# jquery - jquery 滑块控件可以操作双滑块吗？

> ID：12368192
> 
> 赞同：1
> 
> 时间：2012-09-11T10:59:38.737
> 
> 标签：jquery, image, text, slider

我试图让一块文本与图像滑块同时滑动，但文本必须位于图像滑块之外（在这种情况下直接位于下方。

无论如何让控制命令同时工作两个滑块？

# javascript - html5画布绘制多个图像并重叠

> ID：12368195
> 
> 赞同：0
> 
> 时间：2012-09-11T10:59:50.173
> 
> 标签：javascript, html, canvas, html5-canvas

我在画布中绘制了多个图像，但我希望用户能够定义图像的重叠。换言之，用户选择出现在前面的图像和出现在后面的图像。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-10-30T10:07:35.273

使用“min-height”和“min-width”创建 div 用于排序图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:35:57.617

您可以做到这一点，假设您只关心将下一个图像渲染到画布上“前面”或“后面”已经渲染的图像（即不事后渲染图像“在”两个图像之间）在画布上渲染）使用`globalCompositeOperation`2d 画布上下文的属性。MDN 有[一个说明性示例](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)和[全面的文档](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Compositing)。基本上，在您的情况下，如果您想在“上方”渲染下一张图像，您将使用`"source-over"`此属性的值，如果您想在现有内容后面渲染它，请使用`"destination-over"`.

如果您想更详细地控制超过 2 个图像的重叠，则必须按照迄今为止的评论中的建议调整它们的呈现顺序（即将图像放入数组中，以所需的方式对数组进行排序，然后渲染它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T21:46:54.410

顶部的图像始终是最后绘制的图像。

我在将图像放在前面时使用的一种解决方案，当它被选中时，将所有图像存储在数组中 - 这也将是绘制顺序 - 并且要位于顶部的图像只是从数组中取出并放置在结束，因此处于顶部。

# three.js - 通过材料上的透明PNG显示背景颜色？

> ID：12368200
> 
> 赞同：8
> 
> 时间：2012-09-11T11:00:18.480
> 
> 标签：three.js, png, overlay, transparent

我正在使用 制作案例构建器`THREE.js`，基础是我希望能够更改`height/width/length`盒子的 ，旋转它，还可以更改盒子的背景颜色。

到目前为止就是这样：http: [//design365hosting.co.uk/casebuilder3D/](http://design365hosting.co.uk/casebuilder3D/)

尺寸改变有效，盒子的拖动也是如此，现在我正在处理背景颜色的改变。

我希望它工作的方式是使用透明 PNG 作为盒子的面，并设置背景颜色，以便此背景颜色通过透明 PNG 显示。

这就是我目前的做法：

```
var texture = THREE.ImageUtils.loadTexture("images/crate.png");
materials.push(new THREE.MeshBasicMaterial({color:0xFF0000, map: texture})); 
```

如您所见，我将材质设置为背景颜色为红色并覆盖透明 PNG，问题是，three.js 似乎忽略了背景颜色，只显示透明 PNG，这意味着没有颜色显示。

预期的结果应该是一个带有覆盖 PNG 的红色框。

希望这是有道理的，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-25T02:43:21.383

Three.js`MeshBasicMaterial`不支持您尝试执行的操作。在`MeshBasicMaterial`中，如果 PNG 是部分透明的，则*材质*将是部分透明的。

您想要的是保持*不透明*的材料，以及要显示的材料颜色。

您可以通过修改材质的着色器来做到这一点：

```
var material = new THREE.MeshPhongMaterial( {
    color: 0x0080ff,
    map: texture
} );

material.onBeforeCompile = function ( shader ) {

    var custom_map_fragment = THREE.ShaderChunk.map_fragment.replace(

        `diffuseColor *= texelColor;`,

        `diffuseColor = vec4( mix( diffuse, texelColor.rgb, texelColor.a ), opacity );`

    );

    shader.fragmentShader = shader.fragmentShader.replace( '#include <map_fragment>', custom_map_fragment );

}; 
```

这是一个小提琴：[https ://jsfiddle.net/17jmgn6r/](https://jsfiddle.net/17jmgn6r/)

在小提琴中，纹理是透明背景上的圆圈。您可以看到材料的颜色显示出来。

三.js r.125

# php - 单击下拉列表中的选项时追加Jquery

> ID：12368201
> 
> 赞同：0
> 
> 时间：2012-09-11T11:00:18.413
> 
> 标签：php, javascript, jquery, html, forms

为什么这不起作用？

```
 <script>
     $(document).ready(function(){
     $('#custom_field option').click(function(){
        $('#custom_field_input').append('<tr><td></td></tr>');      
        $('#custom_field_input td:last').append($(this).find(":selected").text());
     });
     });
     </script> 
```

我发现有一个 .change 函数，它可以工作，但与我无关，因为**即使选择下拉列表的值没有变化，我也需要附加文本。**

意义。

**用户单击 option1，附加 option1 文本。**

**用户再次单击选项 1，附加了另一个选项 1 文本。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:10:54.737

您还可以从

[http://www.guy.footring.net/randomStuff/selectBox.htm](http://www.guy.footring.net/randomStuff/selectBox.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:05:45.183

使用以下代码使单击 custom_field_opition 时的 custon_field_input 元素为空：

```
<script>
 $(document).ready(function(){
 $('#custom_field option').click(function(){
  $('#custom_field_input').html('');      
    $('#custom_field_input').append('<tr><td></td></tr>');      
    $('#custom_field_input td:last').append($(this).find(":selected").text());
 });
 });
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:06:06.960

```
<script>
 $(document).ready(function(){
 $('#custom_field').change(function(){
    $('#custom_field_input').append('<tr><td></td></tr>');      
    $('#custom_field_input td:last').append($(this).val());
 });
 });
 </script> 
```

这也适用于您的情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:06:48.770

尝试

```
 <script>
     $(document).ready(function(){
     $('#custom_field option').click(function(){
     $('#custom_field_input').html('');      
     $('#custom_field_input').append('<tr><td></td></tr>');      
     $('#custom_field_input td:last').append($(this).find(":selected").text());
 });
 });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T16:32:06.873

尝试这个。

```
jQuery(function () {
    jQuery('#custom_field').click(function () {
        jQuery("#custom_field_input").val(jQuery("#custom_field_input").val() + jQuery("option:selected", this).text());
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T05:00:20.727

试试这个：做了 2 处更改。使用实时以防您的选择稍后动态填充。如果不使用简单的 .click()。也可以使用 .find("option:selected") 代替 .find(":selected")。

```
<script>
 $(document).ready(function(){
 $('#custom_field option').live('click',function(){
    $('#custom_field_input').append('<tr><td></td></tr>');      
    $('#custom_field_input td:last').append($(this).find("option:selected").text());
 });
 });
 </script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T14:20:27.100

您可以使用模糊或聚焦事件而不是单击。

```
$('#custom_field option').focusout(function(){
....
 });   

$('#custom_field option').blur(function(){
....
 }); 
```

# dalvik - dalvik 文件中的方法原型是什么？

> ID：12368204
> 
> 赞同：0
> 
> 时间：2012-09-11T11:00:25.250
> 
> 标签：dalvik

有人可以解释一下 dalvik 文件中的方法原型的作用吗？根据谷歌的说法，这个术语仅与 C 相关而不是 Java，所以问题是 dalvik 内部是什么？

那么原型和方法签名一样吗？因为它包含以下项目：短格式字符串描述符、返回类型和参数...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:40:03.227

method_id_item 包含对 proto_id_item 的引用，它定义了该方法的参数和返回类型。所以是的，它是方法签名。

# facebook - FB 请求对话框 - 图像未显示

> ID：12368207
> 
> 赞同：-2
> 
> 时间：2012-09-11T11:00:38.617
> 
> 标签：facebook, facebook-graph-api, plugins

我正在尝试在 FB 请求对话框上加载图像，如果我使用图像属性，它没有显示。还有其他方法吗？我无法加载标记为红色的图像。

[![一只忙碌的猫](../Images/dcde1bb362fdf9cc208e8346409aad33.png)](https://i.stack.imgur.com/nFG86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:20:46.660

我认为您忘记在应用设置仪表板上上传应用的两个徽标。

![在此处输入图像描述](../Images/7af1b52ac581177136ec1b14ca2b0600.png)

# php - 如果不存在，则插入 mongodb php 中的数组（以及更新旧值）？

> ID：12368214
> 
> 赞同：0
> 
> 时间：2012-09-11T11:00:59.930
> 
> 标签：php, mongodb, push, mongodb-php

我有一个 mongodb 集合，形式为

```
{ "_id" : ObjectId("50072b17b4a6de3b1100000f")
 "employment_details" : [
 {
         "_id" : ObjectId("50072b17b4a6de3b11000015"),
         "title" : "Information Technology Compliance & Security",
         "rank" : null,
         "department" : null,
         "current" : true,
         "company_id" : ObjectId("5007269fb4a6de941001d19d")
 }
 ]
} 
```

我需要的是，如果“ **employment_details** ”数组为空或不存在，我需要创建新值并将其插入到employment_details 中，否则我需要**推送**这样的详细信息，

```
 { "_id" : ObjectId("50072b17b4a6de3b1100000f")
 "employment_details" : [
 {
         "_id" : ObjectId("50072b17b4a6de3b11000015"),
         "title" : "Information Technology Compliance & Security",
         "rank" : null,
         "department" : null,
         "current" : false,
         "company_id" : ObjectId("5007269fb4a6de941001d19d")
 }
  ......
 {
         "_id" : ObjectId("50072b17b4a6de3b11000018"),
         "title" : "security engineer",
         "rank" : null,
         "department" : null,
         "current" : false,
         "company_id" : ObjectId("5007269fb4a6de941001dasd")
 }
 {
         "_id" : ObjectId("50072b17b4a6de3b11000016"),
         "title" : "software Engineer",
         "rank" : null,
         "department" : null,
         "current" : true,
         "company_id" : ObjectId("5007269fb4a6de94100189e")
 }
]
} 
```

但棘手的部分是，由于我正在推送特定员工的就业详细信息， “ **employment_details ”中的“** **current** ”字段必须仅针对新插入的联系人设置为**真，旧的****employment_details中的所有其他“** **current** ”字段必须设置**false**，就像我在上面的例子中提到的那样。

 ******实际上，当插入新的**employment_detail**时，它的**当前**字段必须设置为**true**，并且之前的employment_details 中的所有其他**当前**字段必须设置为**false**。

我知道推送值的一般语法，但是如何更新旧值和推送新值？

希望我对我的问题很清楚。

更新代码（我试过的）：

```
$my_collection->update(
  array("_id"=>$id), 
  array('$push' => 
   array(
     "employment_details" => array("title" => $title, "rank" => $rank, "department" => $dept, "current" => "true", "company_id" => $c_id)
  ))
); 
```

但我不知道如何更新以前的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:28:37.283

您可以首先使用 update 将所有就业细节.current 设置为 false，然后 $push 该字段为 true 的新记录。

当您愿意更改您的架构时，您可以通过使用单个对象 current_employment_detail 和一个 past_employment_detail 数组来更优雅地更改数据库架构。我不知道你的用例，但我猜你需要当前的细节比过去的细节更频繁。当您将其作为单个字段时，您正在保存对就业详细信息当前字段的额外搜索。******

# android - 根据 if 语句从列表中添加或删除字符串

> ID：12368215
> 
> 赞同：-6
> 
> 时间：2012-09-11T11:01:04.330
> 
> 标签：android, list, checkbox

我有以下代码：

```
 if(cb.isChecked())
  {
 selectedPlanets.add(planet.getDisplayName()); 
  }

if (!cb.isChecked())
  {
 selectedPlanets.remove(planet.getDisplayName()); 
  }
testing();
}

private void testing() {
            serverString.setText(null);
               Iterator<String>i = selectedPlanets.iterator();
                while(i.hasNext()){
                String aNum1 = i.next();
                serverString.append(aNum1+",");
                } 
```

然后我需要遍历 selectedPlanets 但删除的行星也会出现。通过再次将 TextView 设置为 null，如果选择了三个或更多，它就可以工作。但是，如果选择了两个，则选中的行星也会从列表中删除。

**编辑：**对于遇到此问题的任何人，我通过使用 else 解决了它（程序员的块让我失去了意义！），然后实现了一些我需要使它工作的其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:03:02.093

你为什么不这样做呢？

```
if (cb.isChecked()) {
   selectedPlanets.add(planet.getDisplayName());
} else {
   selectedPlanets.remove(planet.getDisplayName());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:04:12.653

为什么不这样做：

```
for(int i=0; i<selectedPlanet.size(); i++) {
    if(planet.isChecked()) {
        selectedPlanets.add(planet.getDisplayName()); 
    } else {
       selectedPlanets.remove(planet.getDisplayName()); 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T11:11:35.363

你想要做的是如果为`isChecked` **真，那么添加一些东西**

```
if(cb.isChecked())
  {
 selectedPlanets.add(planet.getDisplayName()); 
  } 
```

如果`isChecked` **不是真的，那么删除一些东西**

```
if (!cb.isChecked())
  {
 selectedPlanets.remove(planet.getDisplayName()); 
  } 
```

**而不是使用不真实的条件，你必须使用其他情况，如**

```
if(cb.isChecked()) {
    selectedPlanets.add(planet.getDisplayName()); 
} else {
   selectedPlanets.remove(planet.getDisplayName()); 
} 
```

# php - 如何在kohana中设置静态变量

> ID：12368221
> 
> 赞同：0
> 
> 时间：2012-09-11T11:01:21.237
> 
> 标签：php, kohana-3

我使用框架 Kohana，我需要设置可以在代码的每个地方看到的全局静态变量。我可以在哪里申报，以什么方式申报？（我认为它在 bootstrap.php 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:18:09.940

我发现声明全局变量的最佳方法是在 application/config 文件夹中创建配置文件 File_name.php（您自己的名称而不是 File_name），在那里声明变量，这样我们就可以通过调用 Kohana 在任何控制器中访问它们： :config ('File_name.Variable_name'); 我的配置文件中的代码如下：

```
<?php    
return array(
   'Variable_name'=>'bla-bla-bla'
); 
```

并且不要忘记通过 Kohana::$config->attach(new Kohana_Config_File('File_name')); 在 bootstrap.php 中附加您的配置文件。

# ajax - ajax请求之前的jquery表单验证？

> ID：12368222
> 
> 赞同：0
> 
> 时间：2012-09-11T11:01:24.410
> 
> 标签：ajax, jquery

这是一个简单的代码，用于在使用 ajax 请求提交之前调用表单验证函数

```
$(document).ready(function(){
    $('#errors').hide();       
    var serializedData= $("#categoryForm").serialize();
    $("#categoryForm").submit(function(){
                $.ajax({
                type:'POST', 
                url: 'actions/add-category.php', 
                data: serializedData, 
                beforeSubmit:  function(){
                        return $("#categoryForm").validate();
                    },
                success: function(response) {
                     $('#status').html(response);
                    }
                });
        return false;
       });

}); 
```

它通过验证并在验证表单之前发送 ajax 请求如果验证为真，我尝试发出请求

```
$(document).ready(function(){
    $('#errors').hide();       
    var serializedData= $("#categoryForm").serialize();
    $("#categoryForm").submit(function(){
        if($("#categoryForm").validate()){
                $.ajax({
                type:'POST', 
                url: 'actions/add-category.php', 
                data: serializedData, 
                success: function(response) {
                     $('#status').html(response);
                    }
                });
        }
        return false;
       });

}); 
```

但这也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:08:59.193

在任何情况下都不要提交表单，请在单击提交按钮时进行检查 - 然后如果成功 - 进行提交。尝试按如下方式进行：

```
$("#submitButton").click(function(){
          if($("#categoryForm").validate()){
                  $.ajax({
                  type:'POST',
                   url: 'actions/add-category.php',
                   data: serializedData,
                   success: function(response) {
                       $('#status').html(response);
                       //if true: 
                       $("#categoryForm").submit();
                          }
                      });

                  }
             return false;
     }); 
```

# javascript - jquery 从 url 获取图像并作为 zip 文件提供

> ID：12368223
> 
> 赞同：0
> 
> 时间：2012-09-11T11:01:24.670
> 
> 标签：javascript, jquery

我有图像列表的 URL。现在单击一个链接，需要压缩所有这些 URL 中的图像并将其作为可下载文件提供。我目前所做的是，

1.  将 URL 传递给 django 视图
2.  获取图像并将其存储到文件系统
3.  压缩它们并
4.  返回下载对话框作为响应

现在，我正在考虑在客户端本身做所有事情。我遇到了可以压缩文件的 JS 插件[Zip.js。](http://gildas-lormeau.github.com/zip.js/demos/demo1.html)我唯一的问题是如何从 URL 中获取这些图像并使用 JS 将它们压缩到内存中。感谢任何帮助。我还遇到了其他压缩文件的插件，

[http://www.jquery4u.com/javascript/javascriptjquery-zipfilecompressor-plugins/#.UE8cI2AxznA](http://www.jquery4u.com/javascript/javascriptjquery-zipfilecompressor-plugins/#.UE8cI2AxznA)

[https://raw.github.com/Stuk/jszip/master/jszip.js](https://raw.github.com/Stuk/jszip/master/jszip.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:28:53.240

正如@VisioN 所说，zip.js 插件或任何其他插件无法通过一些浏览器测试，唯一的方法是在服务器端。

# vba - 在当前插入符号位置插入“// TODO（MyName：当前日期）”的宏？

> ID：12368224
> 
> 赞同：1
> 
> 时间：2012-09-11T11:01:26.870
> 
> 标签：vba, visual-studio-2012

众所周知，微软（以其无限的“智慧”......）已经放弃了 Visual Studio 2012 的宏支持。

不幸的是，我在 Visual Studio 2010 中大量使用了简单的宏。这些宏确实非常简单。例如，在当前插入符号位置插入 GUID。

我希望在 VS2012 中拥有与所有这些简单宏相同的功能，但现在我会选择我最常用的宏之一：我的“InsertTodo()”宏。所有这一切都是在当前插入符号位置插入我的姓名缩写和当前日期，如下所示：

```
// TODO(MRW:2012-09-11): 
```

它在插入文本的末尾留下插入符号，让我可以输入我的 TODO 注释。我已将此分配给 Alt+T 键，以便于使用。

VS2010 中的宏代码非常基本（没有双关语；）：

```
Sub InsertTodo()
    DTE.ActiveDocument.Selection.Text = String.Format("// TODO(MRW:{0}): ", DateTime.Now.ToString("yyyy-MM-dd"))
End Sub 
```

我的问题很简单：如何在 Visual Studio 2012 中复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:57:40.187

您可以按照此处所述编写 VS 插件：http: [//www.codewrecks.com/blog/index.php/2012/08/24/converting-visual-studio-macro-to-visual-studio-plugin/](http://www.codewrecks.com/blog/index.php/2012/08/24/converting-visual-studio-macro-to-visual-studio-plugin/)

或者您可以使用此处所述的 Powershell/NuGet 混合：http: [//www.wintellect.com/CS/blogs/jrobbins/archive/2012/03/30/using-nuget-powershell-to-replace-missing-macros -in-dev-11.aspx](http://www.wintellect.com/CS/blogs/jrobbins/archive/2012/03/30/using-nuget-powershell-to-replace-missing-macros-in-dev-11.aspx)

# iphone - 如何在iphone中解析这个json文件

> ID：12368227
> 
> 赞同：-2
> 
> 时间：2012-09-11T11:01:43.883
> 
> 标签：iphone, ios, json

我是 iPhone 编程的新手。谁能告诉如何解析 iPhone 中的 JSON 字符串？我在我的应用程序中使用 JSON 解析。这是我的 JSON 数据：JSON 格式是 dz。

```
{  
"firstName": "John",  
"lastName": "Smith",  
"age": 25,  
 "address": {  
              "streetAddress": "21 2nd Street",  
          "city": "New York",  
          "state": "NY",  
         "postalCode": "10021"  
         }
} 
```

我该怎么做这个解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:05:15.727

您可以使用一些 JSON 框架，即 [https://github.com/stig/json-framework](https://github.com/stig/json-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:09:33.107

另一种解决方案是`NSRegularExpression` 将json数据保存在字符串中，然后使用正则表达式，例如第一行的正则表达式

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\"firstName\":[^\"]*\"([^\"]*)\"" options:0 error:&error];
NSArray *matches = [regex matchesInString:theString options:0 range:NSMakeRange(0, [theString length])];
NSTextCheckingResult *match = [matches objectAtIndex:0];
NSLog([theString substringWithRange:[match rangeAtIndex:1]]); 
```

说明：正则表达式查找您具有“firstName”的匹配项：然后是除“（因为”表示数据开始的位置）之外的可变数量的符号。([^\"] *) 标记正则表达式中的特定范围（以便您可以在这一行中单独提取它`[theString substringWithRange:[match rangeAtIndex:1]]`。 [^\"]*表示除“之外的每个符号（因为这是数据的结尾）。我知道这可以一开始会让人困惑。但是如果你花一些时间来使用它，你会发现它很容易。

# python - 基于python中嵌套列表中的列表之一进行排序

> ID：12368231
> 
> 赞同：2
> 
> 时间：2012-09-11T11:02:04.230
> 
> 标签：python, list, sorting, nested

我有一个列表作为 `[[4,5,6],[2,3,1]]`. 现在我想根据`list[1]`ie 输出对列表进行排序应该是 `[[6,4,5],[1,2,3]]`. 所以基本上我正在排序`2,3,1`和维护`list[0]`.

在搜索时，我得到了一个函数，它根据每个列表的第一个元素进行排序，但不是为此。我也不想重新创建列表`[[4,2],[5,3],[6,1]]`，然后使用该功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T11:08:45.780

由于`[4, 5, 6]`和`[2, 3, 1]`服务于两个不同的目的，我将创建一个带有*两个*参数的函数：要重新排序的列表，以及排序将决定顺序的列表。我只会返回重新排序的列表。

[该答案](https://stackoverflow.com/a/6979121/566644)具有三种不同解决方案的时间安排，用于为排序创建排列列表。使用最快的选项给出了这个解决方案：

```
def pyargsort(seq):
    return sorted(range(len(seq)), key=seq.__getitem__)

def using_pyargsort(a, b):
    "Reorder the list a the same way as list b would be reordered by a normal sort"
    return [a[i] for i in pyargsort(b)]                     

print using_pyargsort([4, 5, 6], [2, 3, 1])    # [6, 4, 5] 
```

该`pyargsort`方法的灵感来自[numpy](http://numpy.scipy.org/) `argsort`方法，它做同样的事情要快得多。Numpy 还具有高级索引操作，可以将数组用作索引，从而可以非常快速地重新排序数组。

因此，如果您对速度的需求很大，人们会认为这个 numpy 解决方案会更快：

```
import numpy as np

def using_numpy(a, b):
    "Reorder the list a the same way as list b would be reordered by a normal sort"
    return np.array(a)[np.argsort(b)].tolist()

print using_numpy([4, 5, 6], [2, 3, 1])     # [6, 4, 5] 
```

但是，对于短列表（长度 < 1000），这个解决方案实际上比第一个慢。这是因为我们首先将`a`and`b`列表转换为`array`，然后在返回之前将结果转换`list`回。如果我们假设您在整个应用程序中使用 numpy 数组以便我们不需要来回转换，我们会得到以下解决方案：

```
def all_numpy(a, b):
    "Reorder array a the same way as array b would be reordered by a normal sort"
    return a[np.argsort(b)]

print all_numpy(np.array([4, 5, 6]), np.array([2, 3, 1]))    # array([6, 4, 5]) 
```

该`all_numpy`函数的执行速度比该`using_pyargsort`函数快 10 倍。

以下对数图将这三个解决方案与其他答案中的两个替代解决方案进行了比较。参数是两个随机打乱的等长范围，并且函数都接收相同排序的列表。我只计算函数执行的时间。出于说明目的，我为每个 numpy 解决方案添加了一条额外的图表线，其中加载 numpy 的 60 ms 开销被添加到时间中。

![在此处输入图像描述](../Images/4a452b6ce58798c55c1fe35817b71217.png)

正如我们所看到的，全 numpy 解决方案比其他解决方案高出一个数量级。相比之下，从 python 转换`list`回来会`using_numpy`大大降低解决方案的速度，但对于大型列表，它仍然胜过纯 python。

对于大约 1'000'000 的列表长度，`using_pyargsort`需要 2.0 秒，`using_nympy`+ 开销仅为 1.3 秒，而`all_numpy`+ 开销为 0.3 秒。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T11:09:08.550

你描述的排序不是很容易完成。我能想到的唯一方法是使用`zip`创建您不想创建的列表：

```
lst = [[4,5,6],[2,3,1]]
# key = operator.itemgetter(1) works too, and may be slightly faster ...
transpose_sort = sorted(zip(*lst),key = lambda x: x[1])
lst = zip(*transpose_sort) 
```

这种限制有原因吗？

（另请注意，如果您真的想这样做，您可以在一行中完成所有操作：

```
lst = zip(*sorted(zip(*lst),key = lambda x: x[1])) 
```

这也会产生一个元组列表。如果你真的想要一个列表列表，你可以`map`得到结果：

```
lst = map(list, lst) 
```

或者列表理解也可以：

```
lst = [ list(x) for x in lst ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:26:29.360

如果第二个列表不包含重复项，您可以这样做：

```
l = [[4,5,6],[2,3,1]]   #the list
l1 = l[1][:]            #a copy of the to-be-sorted sublist
l[1].sort()             #sort the sublist
l[0] = [l[0][l1.index(x)] for x in l[1]] #order the first sublist accordingly 
```

（因为这会保存子列表 l[1] 如果您的输入列表很大，这可能是个坏主意）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T11:55:56.217

这个怎么样：

```
a = [[4,5,6],[2,3,1]]
[a[0][i] for i in sorted(range(len(a[1])), key=lambda x: a[1][x])] 
```

它使用 numpy 执行此操作的主要方式，而无需使用 numpy 并且没有 zip 内容。

使用 numpy 和 zipping 似乎都不是巨型结构最便宜的方式。不幸的是，该`.sort()`方法内置于`list`类型中，并使用对列表中元素的硬连线访问（覆盖`__getitem__()`或类似在这里没有任何效果）。

因此，您可以实现自己的`sort()`，根据一个值对两个或多个列表进行排序；这基本上就是 numpy 所做的。

或者，您可以创建一个值列表以对其进行排序、排序，并从中重新创建已排序的原始列表。

# java - 查找数组中最大整数的算法

> ID：12368240
> 
> 赞同：4
> 
> 时间：2012-09-11T11:02:43.420
> 
> 标签：java, arrays, algorithm, integer

我正在尝试创建一个返回 int 的方法 - 发送数组中最大整数的值。我希望这种方法起作用的方式是在 for 循环中检查数组的第一个**和最后一个元素，然后按它们的方式工作到中间。**所以 i = 第一个整数，k = 最后一个整数。何时`i = 0, k = n-1`（索引），`i = 1, k = n-2`如果你赶上我的漂移。在每个循环中都需要检查`if a[i]>a[k]`. 然后他们交换位置。然后我知道最大的数字在数组的前半部分，然后我希望它检查那一半，所以最终最大的 int 在索引 0 处。

我试过这样：

```
public static int maxOfArray(int[] a)
{
    int length = a.length;

    if(length<1)
        throw new NoSuchElementException("Not at least one integer in array");

    while (length > 1)
    {
        int k = length;

        for(int i = 0; i < length/2; i++)
        {
            k--;

            if(a[i]<a[k])
            {
                int j = a[i];
                a[i] = a[k];
                a[k] = j;
            }
        }
        length /=2;
    }
    return a[0];
} 
```

..但我真的不明白..我很难“想象”这里发生了什么..但它并不总是有效..（尽管有时）。

**另编辑** ：数组 {6,15,2,5,8,14,10,16,11,17,13,7,1,18,3,4,9,12}; 将吐出 17 作为最大的数字。我意识到我必须修复奇数长度的错误，但我想先解决这个偶数长度的数组..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T11:20:20.507

**一个错误是遇到`length`奇怪的时候。**

在这些情况下，您“错过”了中间元素。

**示例**：对于输入`int[] arr = { 8, 1, 5, 4, 9, 4, 3, 7, 2 };`- 元素`9`将与自身进行比较和检查，但随后您减小 的大小，您从接下来要迭代的数组中`length`排除。`9`

我相信可以通过将问题减少到`ceil(length/2)`而不是`length/2`（并处理特殊情况`length==1`）来解决

评论中提到的另一个问题是：您需要**迭代 up to`length/2`**而不是 up to `length`，否则您将覆盖自己。

最后 -**标志是错误的**。

```
if(a[i]>a[k]) 
```

应该

```
if(a[i]<a[k]) 
```

请记住 - 如果第一个元素较小，第二个元素较小，则您正在尝试交换元素，以便将较大的元素推到数组的头部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T11:08:21.747

> 但我真的不明白..我很难“想象”这里发生了什么..但它并不总是有效..（尽管有时）。

在这种情况下，您应该使用调试器单步执行代码，以了解每行代码的作用。

* * *

我会做的是：

```
public static int maxOfArray(int[] a) {
    int max = a[0];
    for (int i : a)
        if (max < i)
            max = i;
    return max;
}

public static int findMaxTheHardWay(int[] array) {
    for (int length = array.length; length > 1; length = (length + 1) / 2) {
        for (int i = 0; i < length / 2; i++) {
            if (array[i] < array[length - i - 1])
                array[i] = array[length - i - 1]; // don't need to swap.
        }
    }
    return array[0];
}

public static void main(String... args) {
    Random rand = new Random(1);
    for (int i = 1; i <= 1000; i++) {
        int[] a = new int[i];
        for (int j = 0; j < i; j++) a[j] = rand.nextInt();
        int max = maxOfArray(a);
        int max2 = findMaxTheHardWay(a);
        if (max != max2)
            throw new AssertionError(i + ": " + max + " != " + max2);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T11:29:33.057

这是解决问题的一种相当疯狂的方法，但我会一起玩。

问题出在内部循环中。

*   你从 i = 0 和 k = 长度 - 1 开始。
*   如果 a[i] > a[k] 你交换它们。
*   ...
*   你最终得到 k = 0 和 i = length - 1
*   如果 a[i] > a[k] 你交换它们。

如果你仔细看，你会注意到如果我们在第一次交换中交换了元素，我们也会在最后一次交换中交换它们；即我们将撤消第一次交换的影响。这同样适用于整个数组切片。

看？

您需要做的是中途停止内循环......然后考虑`length`奇怪的情况。

* * *

顺便说一句，我之所以称之为“相当疯狂”，是因为显而易见且简单的方法要快得多：`O(N)`与`O(NlogN)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T11:23:32.173

```
int a[] = {1,7,3};   
List<Integer> list = Arrays.asList(a);  
Integer largest = Collections.max(list); 
```

这将为您提供数组中的最大数字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T11:25:46.123

这是一个适合您想要的规格的解决方案（与这里的许多其他规格不同，嗯，嗯）：

```
 final Integer[] input = {1, 2, 6, 32, 4, 44 ,12, 42, 3, 7, 17, 22, 57, 23, 102, 103 };

    int half = (input.length / 2);
    int mod = input.length % 2;
    while (half >= 0) {
        for (int i = 0, j = (half * 2) + mod - 1; i <= half && j >= half; i++, j--) {
            if (input[i] < input[j]) {
                final int tmp = input[i];
                input[i] = input[j];
                input[j] = tmp;
            }
        }
        if (half == 0) break;
        half = half / 2;
        mod = half % 2;
    }
    //Here, input[0] = the biggest number in the original input. 
```

编辑：添加了 mod，所以如果最后一个元素是最大的，它就可以工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T11:57:02.860

我认为您的代码正在运行，您只需要在奇数数组的情况下将长度 / 2 设置为上限，但我的测试返回正确的结果：

```
package org.devince.largestinteger;

import java.util.NoSuchElementException;

public class LargestInteger {
    final static int[] input = {1, 2, 6, 32, 4, 44 ,12, 42, 3, 7, 17, 22, 57, 23, 102, 103 };
//  final static int[] input = { 8, 1, 5, 4, 9, 4, 3, 7, 2 };
//  final static int[] input = {1,3,7};

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.out.println(String.valueOf(maxOfArray(input)));
    }

    public static int maxOfArray(int[] a)
    {
        int length = a.length;

        if(length<1)
            throw new NoSuchElementException("Not at least one integer in array");

        while (length > 1)
        {
            int k = length;

            for(int i = 0; i < length; i++)
            {
                k--;

                if(a[i]>a[k])
                {
                    int j = a[i];
                    a[i] = a[k];
                    a[k] = j;
                }
            }
            length = (int) Math.ceil(length / 2f);
        }
        return a[0];
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T11:12:41.493

为什么不将数组的第一个值存储到变量`max`中。

之后，只需从第二个位置到最后一个位置循环遍历数组，在循环中只需检查当前值是否大于。`max`如果大于则分配`max`该值。

返回`max`，你有最大的数字。

```
public int FindLargest()
{
    int[] num = { 1, 2, 5, 12, 13, 56, 16, 4 };
    int max = num[0];

    for (int i = 1; i <num.length; i++)
    {
        if (num[i] > max)
        {
            max = num[i];
        }
    }

    return max;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T12:08:43.717

同样你也可以接近，

```
int length = a.length;
   while (length > 1)
    {
        int k = length;
        for(int i = 0; i < length; i++)
        { 
            for(int y = k-1; y >= i; y--) 
            {         
                if(a[i]<a[y])
                {
                    int j = a[i];
                    a[i] = a[y];
                    a[y] = j;               
                }
            }       
        }
        length /=2;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-17T17:03:33.710

```
 final int validSampleRates[] = new int[]{
                    5644800, 2822400, 352800, 192000, 176400, 96000,
                    88200, 50400, 50000, 4800,47250, 44100, 44056, 37800, 32000, 22050, 16000, 11025, 4800, 8000};
          ArrayList <Integer> YourArray = new ArrayList <Integer> ():
 for (int smaple : validSampleRates){

                    YourArray.add(smaple);
                }
            Integer largest = Collections.max(YourArray);
            System.out.println("Largest   " + String.valueOf(largest)); 
```

**最好的方法是使用将 List Collection 扩展为 ArrayList 的 Array**

# python - 在 python 2.6 中使用搁置模块时出现异常 RuntimeError

> ID：12368241
> 
> 赞同：0
> 
> 时间：2012-09-11T11:02:54.733
> 
> 标签：python, runtime-error, shelve

我正在使用搁置模块为我的程序添加一些持久性。起初我在搁置中使用默认的 bsddb，但我不得不将其更改为 gdbm，然后发生异常：

```
 Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type       'exceptions.AttributeError'> ignored 
```

它似乎被一些 whichdb 调用在 anydbm 模块中引发（并捕获）。

它没有什么不好的，因为代码完成没有问题，但它看起来有点糟糕。据我所知，我可以使用警告模块来禁止打印，但是我想完全删除异常。

我正在查看其他地方的类似问题（它们出现在 pylint、django 和其他一些模块/包中），并且在任何地方似乎都被标记为“错误”。有没有人想出任何dbm / shelve模块中这种行为的解决方案？

编辑1。我发现导致此错误的原因是： def **getattr** (self, attr): return getattr(self.config, attr)

我正在尝试将包装另一个类的类保存到搁置中 - 这就是**getattr**函数被覆盖的原因。有没有办法写它而不是无限循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:30:56.603

好吧，我想我设法解决了这个问题。问题是包装类没有**setstate**和**getstate**函数。到目前为止，它似乎工作。包装类不需要**setstate**和**getstate**。

我为包装类使用了简单的 getstate 和 setstate 函数：

```
 def __getstate__(self):
        '''
        Getstate for pickle (used by shelve module)
        '''
        return self.__dict__

    def __setstate__(self, dictionary):
        '''
        Setstate for pickle (used by shelve module)
        '''
        self.__dict__ = dictionary 
```

# cordova - phonegap 2.0 推送通知插件 iOS 设置（一个接一个错误）

> ID：12368242
> 
> 赞同：1
> 
> 时间：2012-09-11T11:02:57.520
> 
> 标签：cordova, push-notification, ios6, xcode4.5

过去几周一直在尝试使用 Phonegap 2 基础应用程序设置 PushNotification。

这是我已经完成的步骤。

1.  将 PushNotification 文件夹拖到 plugins 文件夹中：

    [![](../Images/f1ed9196e791d85ea8b5e78939c7e86f.png)](https://i.stack.imgur.com/BqLBF.png)
    [（来源：[joelchu.com](http://joelchu.com/wp-content/uploads/2012/09/1.png)）]

2.  按照文档的以下说明进行操作

    [![](../Images/1eeaef80b1b3a101a17c10f35df31bf6.png)](https://i.stack.imgur.com/juFjc.png)
    [（来源：[joelchu.com](http://joelchu.com/wp-content/uploads/2012/09/2.png)）]

3.  将 PushNotifcation / PushNotification 添加到`Cordova.plist`插件部分

4.  修改`AppDelegate.m`：

    ```
    - (void) dealloc
    {
        [super dealloc];
    }

    /* START PUSH MODIFCATION */

    #pragma PushNotification delegation

    - (void)application:(UIApplication*)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
    {
        PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
        [pushHandler didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
    }

    - (void)application:(UIApplication*)app didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
    {
        PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
        [pushHandler didFailToRegisterForRemoteNotificationsWithError:error];
    }

    - (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo
    {
        PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
        NSMutableDictionary* mutableUserInfo = [userInfo mutableCopy];

        // Get application state for iOS4.x+ devices, otherwise assume active
        UIApplicationState appState = UIApplicationStateActive;
        if ([application respondsToSelector:@selector(applicationState)]) {
            appState = application.applicationState;
        }

        [mutableUserInfo setValue:@"0" forKey:@"applicationLaunchNotification"];
        if (appState == UIApplicationStateActive) {
            [mutableUserInfo setValue:@"1" forKey:@"applicationStateActive"];
            [pushHandler didReceiveRemoteNotification:mutableUserInfo];
        } else {
            [mutableUserInfo setValue:@"0" forKey:@"applicationStateActive"];
            [mutableUserInfo setValue:[NSNumber numberWithDouble: [[NSDate date] timeIntervalSince1970]] forKey:@"timestamp"];
            [pushHandler.pendingNotifications addObject:mutableUserInfo];
        }
    }

    /* END PUSH MODIFICATION */

    @end 
    ```

**第一个错误**

> 未知类型名称 PushNotification

所以我在最后一次导入之后添加了这一行：

```
#import "PushNotification.h" 
```

这样就解决了问题。

**下一个问题**

> 未找到 CDVPlugin.h 文件

因此，我将以下内容添加到 User Header Search Paths - 所有构建设置中：

```
$(CORDOVALIB)/Classes (recursive) 
```

**下一个问题**

然后它抛出了20多个错误！

[![](../Images/c599729dc933bbe92c762d275c212133.png)](https://i.stack.imgur.com/E7Gyw.png)
[（来源：[joelchu.com](http://joelchu.com/wp-content/uploads/2012/09/3.png)）]

我做错了什么？

一直在到处寻找。令我惊讶的是，似乎没有人有问题。

更多关于我的设置：

*   电话间隙 2.0
*   XCode 4.5（预览版 4）
*   iOS 6 基础版（适用于 iOS 5 及更高版本的应用程序）

希望有大神解答一下。谢谢你。

（PS如果Phonegap PushNotification插件坏了——他们已经4个月没有更新了。有没有免费的替代品？再次感谢）

[我在我的博客](https://web.archive.org/web/20130120144533/http://joelchu.com:80/phonegap-2-0-pushnotification-plugin-ios-setup-one-error-after-another/)上描述了同样的问题。

**已修复（暂时）**

**固定的**

```
/* START BLOCK */

#pragma PushNotification delegation

- (void) application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
    [pushHandler didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
}

- (void) application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
    PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
    [pushHandler didFailToRegisterForRemoteNotificationsWithError:error];
}

- (void) application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo
{
    PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
    NSMutableDictionary* mutableUserInfo = [userInfo mutableCopy];

    // Get application state for iOS4.x+ devices, otherwise assume active
    UIApplicationState appState = UIApplicationStateActive;
    if ([application respondsToSelector:@selector(applicationState)]) {
        appState = application.applicationState;
    }

    [mutableUserInfo setValue:@"0" forKey:@"applicationLaunchNotification"];
    if (appState == UIApplicationStateActive) {
        [mutableUserInfo setValue:@"1" forKey:@"applicationStateActive"];
        [pushHandler didReceiveRemoteNotification:mutableUserInfo];
    } else {
        [mutableUserInfo setValue:@"0" forKey:@"applicationStateActive"];
        [mutableUserInfo setValue:[NSNumber numberWithDouble: [[NSDate date] timeIntervalSince1970]] forKey:@"timestamp"];
        [pushHandler.pendingNotifications addObject:mutableUserInfo];
    }
}

/* STOP BLOCK */ 
```

我做了什么——前两个

`- (void)application:(UIApplication*)app`

变成

`- (void) application:(UIApplication*)application`

我移动

`#import "PushNotification.h"`

到块的头部（而不是在修改代码之前 - 导致@end不在上下文问题中）。

我还没有运行javascript界面​​。但是所有的错误都消失了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:47:49.187

请尝试恢复您对导入的更改，然后替换此块

```
#ifdef CORDOVA_FRAMEWORK
    #import <Cordova/CDVPlugin.h>
#else
    #import "CDVPlugin.h"
#endif 
```

通过这条线

```
#import <Cordova/CDVPlugin.h> 
```

如果这仍然不起作用，您可能没有 PhoneGap 2.0 项目，或者您安装了错误或多个版本的框架。

您可以在“PushNotification.m”文件中执行相同操作：只需将第二个导入替换为`#import <Cordova/JSONKit.h>`.

请注意，我还没有使用过那个插件，这只是我移植到 2.0 的经验（我是标签/导航栏插件的作者）。

# iphone - 在视图之间切换而不关闭视图 xcode

> ID：12368246
> 
> 赞同：0
> 
> 时间：2012-09-11T11:03:07.190
> 
> 标签：iphone, xcode, login, views, switch-statement

我有一个登录界面、用户界面和一个主菜单。

当我登录时，我打开我的用户界面。

如果我执行 UIModalTransition，如果我回到页面，我需要重新登录，这对我来说是个问题。

我搜索了一种在视图之间切换但不关闭它们的方法，因为如果关闭它们，视图会重新启动，对于 UIWebview 也是如此，我想在不关闭的视图之间切换并重置视图。

可能吗 ？我真的不知道它是什么样的代码。

如果你有想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:10:02.407

你可以使用`pushViewController`即..

`[self.navigationController pushViewController:yourUserInterFaceViewController animated:YES];` 用于登录和用户界面之间的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:17:42.927

在[这个](https://stackoverflow.com/questions/12357701/dynamic-first-view-controller-in-ios/12358841#12358841)答案中，我试图解释我所看到的视图控制器编排。

这个想法是创建管理元素存储和表示的管理器类。它还提到了管理登录信息的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:36:56.473

你可以使用3种方式

1）将视图推入`UINavigationController`

2) 使用 ModalViewController 呈现视图

3）将 subView 添加到 rootViewController 并`removeFromSuperView`在需要时将其删除。

（您可以在应用启动时分配它们并使用

`[YourAppDelegate sharedApplication].yourViewController`)

由于您的 appDelegate 是一个 singleTon 类，因此它将始终返回您在启动应用程序时分配的相同视图控制器。您也可以使用延迟加载。

可能这会有所帮助。

# java - 如何从 Jar 文件中读取 WEB-INF 中存在的属性文件

> ID：12368248
> 
> 赞同：0
> 
> 时间：2012-09-11T11:03:09.443
> 
> 标签：java

我有一个 jar 文件（一个 api），我需要从中加载一个存在于 WEB-INF 文件夹中的属性文件。我如何从我的 jar 加载这个属性文件。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:12:39.980

如果您的属性文件位于`WEB-INF/classes`. 在这种情况下，只需编写类似

```
Properties props = new Properties();
props.load(getClass().getResourceAsStream("/myprops.properties")); 
```

显然该文件可能位于`classes`. 在这种情况下，您必须在调用时指定完整路径`getResourceAsStream()`。

# linux - cygwin编译数学库

> ID：12368251
> 
> 赞同：0
> 
> 时间：2012-09-11T11:03:17.603
> 
> 标签：linux, shell, cygwin

我尝试按照[http://matrixprogramming.com/2008/03/umfpack](http://matrixprogramming.com/2008/03/umfpack)上的说明使用 Cygwin 编译一个库。

在获取和解包部分，我了解到我应该使用这些 Unix 命令：

```
$ wget http://www.cise.ufl.edu/research/sparse/umfpack/UMFPACK-5.2.0.tar.gz 
```

我想用 cygwin 快速尝试一下，但它不是那样工作的（使用 Cygwin 终端）。我收到以下错误：

```
-bash: wget: command not found 
```

有人可以告诉我如何用 Cygwin 编译东西，或者如何使命令适应 Cygwin？

或者编译这个库还有什么其他含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:06:08.427

你没有`wget`安装。这很容易解决：

*   运行原始 Cygwin 安装程序（如果需要，请[再次下载）。](http://cygwin.com/install.html)
*   点击“Next >”，直到你进入标题为“Select Packages”的窗口
*   在搜索框中输入“wget”
*   单击“Web”旁边的 [+] 号
*   单击“wget: Utility to retrieve...”行上的“Skip”，直到它给出版本号。
*   继续点击“下一步>”，直到你完成。

您现在应该已经安装了 wget 并且应该能够继续您的任务。

# machine-learning - 名称拼写检查机器学习

> ID：12368252
> 
> 赞同：1
> 
> 时间：2012-09-11T11:03:19.930
> 
> 标签：machine-learning, spell-checking

我是机器学习的新手，我需要编写一个应用程序来检查名称是否正确或拼写错误。

你能给我一些建议，我应该从哪里开始？在这种情况下使用哪种算法最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:51:54.570

如果您只需要检查拼写，您可以从一些免费提供的字典中创建所有单词的哈希集，然后检查输入的单词是否在字典中。您的任务还有其他要求吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:53:57.867

Peter Norvig 和 Stuart Rusell 的书“人工智能 - 一种现代方法”将是一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:57:32.483

我建议从[norvig 拼写正确](http://norvig.com/spell-correct.html)的以下文章开始。它使用提供的 python 代码解释了拼写校正器背后的基本思想。

> 我在这里想做的是在不到一页的代码中开发一个玩具拼写校正器，它以每秒至少 10 个单词的处理速度达到 80% 或 90% 的准确率。

根据这篇文章：“工业级法术校正器的全部细节相当复杂。”。你可以从它的引用开始。我认为无论你实现什么，都必须比这个实现具有更好的准确性/性能。

# django - 归档一部分未使用的代码以便稍后在需要时收回的好做法是什么？

> ID：12368253
> 
> 赞同：1
> 
> 时间：2012-09-11T11:03:29.677
> 
> 标签：django, git, archiving

我们有很多小的通常是其中一个项目，它们都作为应用程序放入 Django 项目中，我想从代码中删除它们以保持干净，也不必担心一年对我们现有的代码库进行升级时的项目。

我是否应该将 a `git rm src/clients/my_project/`（并删除所有引用）与`git commit -m "Removed my_project"`. 如果它只是另一个提交消息并且会消失在噪音中，那么整个项目已被删除似乎不太明显。

在少数情况下，我们希望恢复旧代码库，因为一些客户要求重新运行他们的项目，或者我们正在对已经存在的东西进行调整，但在大多数情况下肯定是这样。我如何使有一个可以恢复的旧项目变得合理和明显？

我想一种解决方案是更改为每个项目有一个 git repo，但是这些项目非常小，并且似乎不保证设置 github、jenkins 和部署服务器等的开销。

有没有人在他们自己的组织中解决了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:07:01.110

每个项目使用单独的 repo 可能是个好主意。您可以获得更清晰的历史记录，您不必担心为不相关的项目检查大量代码，而且它通常更灵活。

也就是说，为了解决您在噪音中丢失项目的直接问题，您可以为每次删除创建一个标签。

```
git commit -m 'Removed my_project'
git tag -a deletes/my_project -m 'Deletion of my_project' 
```

这样你就可以在你的标签列表中看到所有的项目删除，如果你需要引用项目，你可以很容易地再次找到它们（只要记住查看父级`deletes/my_project`以实际获取该项目的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:21:14.420

“小型一次性项目”听起来像是主题分支的完美候选者。特别是如果他们与您的主要项目共享大量通用代码。分支是 git 真正擅长的。

分支小项目意味着您可以使用 git 的全部功能来管理您的项目。您可以轻松地将主要项目中的相关错误修复合并或变基到您的小项目中。您可以轻松区分项目。您可以从类似项目中分支出一个子项目。如果一个项目被证明是有用的，你可以将它合并回你的主分支。

此外，它使独立部署项目变得容易。只需将不同的项目检查到不同的服务器（或同一服务器上的不同虚拟主机）。

当一个项目变得足够大以保证它自己的 repo 时，您可以通过再次克隆它轻松地将该分支转换为它自己的 repo。如果你不想要旧的历史，你可以通过深度 1 的克隆或压缩它的历史来摆脱它。

# android - 想要在方向改变时停止重新启动异步任务

> ID：12368256
> 
> 赞同：0
> 
> 时间：2012-09-11T11:03:40.783
> 
> 标签：android

我的应用程序只是简单地请求`json`数据`url`并将其显示在`TableLayout`. 我曾经`asynctask`请求`json`数据，然后我使用该`json`数据来填充我的`TableLayout`. 它工作正常，但在更改设备方向时，它再次`json`通过运行请求数据`AsyncTask`。我只想停止再次调用。我`AsyncTask`希望`AsyncTask`在`activity`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:10:17.320

要保持 AsyncTask 运行，您应该覆盖[onRetainNonConfigurationChange()](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29)（或[setRetainInstance()](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)，但请注意它是 API11！）并将您的 AsyncTask 传递到那里以使其保持活动状态。或者，您可以告诉框架您的活动将自行处理一些配置更改，方法是添加

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

到你的`<activity>`. 但这不是正确的方法（而是一种捷径），因为您只希望保留任务而不是保留其他所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:04:51.313

添加 `android:configChanges="keyboardHidden|orientation"`您的活动，以防止在方向更改时重新启动活动。

# ios - 在应用程序运行时确定按两次主页按钮的应用程序状态

> ID：12368266
> 
> 赞同：6
> 
> 时间：2012-09-11T11:04:38.677
> 
> 标签：ios, xcode, ios5, xcode4.2, ios5.1

我想知道在应用程序运行的情况下两次点击 iphone“主页”按钮时应用程序的状态是什么。场景如下所示：

1.  我的 iOS 应用程序正在前台运行

2.  随着应用程序的运行，点击主页按钮两次以调出多任务任务栏（显然我的应用程序未在此处列出，因为它不是最近使用的应用程序并且仍在前台运行）

3.  现在按下任务栏外的任何地方（即在应用程序中），应用程序将再次成为焦点

我的问题：

1.  执行上述步骤 #2 时应用程序将处于什么状态？它会进入后台还是仍然在前台？这里会触发什么方法？

2.  在执行第 3 步时，应用程序会从后台重新进入前台吗？这里又会触发什么方法？

任何提示/建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:14:56.500

1.  应用程序即将从活动状态变为非活动状态，因此它仍处于中间状态。您应该能够在您的 UIApplicationDelegate 中使用 -applicationWillResignActive:。

2.  返回应用程序后，应用程序再次变为活动状态，因此在您的 UIApplicationDelegate 上收到 -applicationDidBecomeActive:。

# http - Erlang 中的 HTTP 爬虫

> ID：12368270
> 
> 赞同：1
> 
> 时间：2012-09-11T11:04:49.520
> 
> 标签：http, erlang, web-crawler

我正在编写一个简单的 HTTP 爬虫，但在运行底部的代码时遇到问题。我请求 50 个 URL 并获得 20+ 的内容。我已经生成了几个大小为 150kB 的文件来测试爬虫。所以我认为 20+ 响应受到带宽的限制？但是：如何告诉 Erlang 片段在没有获取最后一个文件之前不要退出？测试数据服务器在线，所以请尝试代码，欢迎任何提示:)

```
-module(crawler).
-define(BASE_URL, "http://46.4.117.69/").
-export([start/0, send_reqs/0, do_send_req/1]).

start() ->
  ibrowse:start(),
  proc_lib:spawn(?MODULE, send_reqs, []).

to_url(Id) ->
  ?BASE_URL ++ integer_to_list(Id).

fetch_ids() ->
  lists:seq(1, 50).

send_reqs() ->
  spawn_workers(fetch_ids()).

spawn_workers(Ids) ->
  lists:foreach(fun do_spawn/1, Ids).

do_spawn(Id) ->
  proc_lib:spawn_link(?MODULE, do_send_req, [Id]).

do_send_req(Id) ->
  io:format("Requesting ID ~p ... ~n", [Id]),
  Result = (catch ibrowse:send_req(to_url(Id), [], get, [], [], 10000)),
  case Result of
{ok, Status, _H, B} ->
  io:format("OK -- ID: ~2..0w -- Status: ~p -- Content length: ~p~n", [Id, Status, length(B)]);
Err ->
  io:format("ERROR -- ID: ~p -- Error: ~p~n", [Id, Err])
  end. 
```

这就是输出：

```
Requesting ID 1 ... 
Requesting ID 2 ... 
Requesting ID 3 ... 
Requesting ID 4 ... 
Requesting ID 5 ... 
Requesting ID 6 ... 
Requesting ID 7 ... 
Requesting ID 8 ... 
Requesting ID 9 ... 
Requesting ID 10 ... 
Requesting ID 11 ... 
Requesting ID 12 ... 
Requesting ID 13 ... 
Requesting ID 14 ... 
Requesting ID 15 ... 
Requesting ID 16 ... 
Requesting ID 17 ... 
Requesting ID 18 ... 
Requesting ID 19 ... 
Requesting ID 20 ... 
Requesting ID 21 ... 
Requesting ID 22 ... 
Requesting ID 23 ... 
Requesting ID 24 ... 
Requesting ID 25 ... 
Requesting ID 26 ... 
Requesting ID 27 ... 
Requesting ID 28 ... 
Requesting ID 29 ... 
Requesting ID 30 ... 
Requesting ID 31 ... 
Requesting ID 32 ... 
Requesting ID 33 ... 
Requesting ID 34 ... 
Requesting ID 35 ... 
Requesting ID 36 ... 
Requesting ID 37 ... 
Requesting ID 38 ... 
Requesting ID 39 ... 
Requesting ID 40 ... 
Requesting ID 41 ... 
Requesting ID 42 ... 
Requesting ID 43 ... 
Requesting ID 44 ... 
Requesting ID 45 ... 
Requesting ID 46 ... 
Requesting ID 47 ... 
Requesting ID 48 ... 
Requesting ID 49 ... 
Requesting ID 50 ... 
OK -- ID: 49 -- Status: "200" -- Content length: 150000
OK -- ID: 47 -- Status: "200" -- Content length: 150000
OK -- ID: 50 -- Status: "200" -- Content length: 150000
OK -- ID: 17 -- Status: "200" -- Content length: 150000
OK -- ID: 48 -- Status: "200" -- Content length: 150000
OK -- ID: 45 -- Status: "200" -- Content length: 150000
OK -- ID: 46 -- Status: "200" -- Content length: 150000
OK -- ID: 10 -- Status: "200" -- Content length: 150000
OK -- ID: 09 -- Status: "200" -- Content length: 150000
OK -- ID: 19 -- Status: "200" -- Content length: 150000
OK -- ID: 13 -- Status: "200" -- Content length: 150000
OK -- ID: 21 -- Status: "200" -- Content length: 150000
OK -- ID: 16 -- Status: "200" -- Content length: 150000
OK -- ID: 27 -- Status: "200" -- Content length: 150000
OK -- ID: 03 -- Status: "200" -- Content length: 150000
OK -- ID: 23 -- Status: "200" -- Content length: 150000
OK -- ID: 29 -- Status: "200" -- Content length: 150000
OK -- ID: 14 -- Status: "200" -- Content length: 150000
OK -- ID: 18 -- Status: "200" -- Content length: 150000
OK -- ID: 01 -- Status: "200" -- Content length: 150000
OK -- ID: 30 -- Status: "200" -- Content length: 150000
OK -- ID: 40 -- Status: "200" -- Content length: 150000
OK -- ID: 05 -- Status: "200" -- Content length: 150000 
```

## *更新：*

感谢stemm 对wait_workers 的提示。我已经结合了你和我的代码，但行为相同:(

```
-module(crawler).
-define(BASE_URL, "http://46.4.117.69/").
-export([start/0, send_reqs/0, do_send_req/2]).

start() ->
  ibrowse:start(),
  proc_lib:spawn(?MODULE, send_reqs, []).

to_url(Id) ->
  ?BASE_URL ++ integer_to_list(Id).

fetch_ids() ->
  lists:seq(1, 50).

send_reqs() ->
  spawn_workers(fetch_ids()).

spawn_workers(Ids) ->
  %% collect reference to each worker
  Refs = [ do_spawn(Id) || Id <- Ids ],
  %% wait for response from each worker
  wait_workers(Refs).

wait_workers(Refs) ->
  lists:foreach(fun receive_by_ref/1, Refs).

receive_by_ref(Ref) ->
  %% receive message only from worker with specific reference
  receive
{Ref, done} ->
    done
  end.

do_spawn(Id) ->
  Ref = make_ref(),
  proc_lib:spawn_link(?MODULE, do_send_req, [Id, {self(), Ref}]),
  Ref.

do_send_req(Id, {Pid, Ref}) ->
  io:format("Requesting ID ~p ... ~n", [Id]),
  Result = (catch ibrowse:send_req(to_url(Id), [], get, [], [], 10000)),
  case Result of
  {ok, Status, _H, B} ->
    io:format("OK -- ID: ~2..0w -- Status: ~p -- Content length: ~p~n", [Id, Status, length(B)]),
    %% send message that work is done
    Pid ! {Ref, done};
  Err ->
    io:format("ERROR -- ID: ~p -- Error: ~p~n", [Id, Err]),
    %% repeat request if there was error while fetching a page, 
    do_send_req(Id, {Pid, Ref})
    %% or - if you don't want to repeat request, put there:
    %% Pid ! {Ref, done}
end. 
```

对少数文件运行爬虫分叉很好，但是代码甚至没有获取整个文件（每个文件大小为 150000 字节） - 他的爬虫部分获取了一些文件，请参阅以下 Web 服务器日志:(

```
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /10 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /1 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /3 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /8 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /39 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /7 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /6 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /2 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /5 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /50 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /9 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /44 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /38 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /47 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /49 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /43 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /37 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /46 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /48 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:00 +0200] "GET /36 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /42 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /41 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /45 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /17 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /35 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /16 HTTP/1.1" 200 150000 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /15 HTTP/1.1" 200 17020 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /21 HTTP/1.1" 200 120360 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /40 HTTP/1.1" 200 117600 "-" "-"
82.114.62.14 - - [13/Sep/2012:15:17:01 +0200] "GET /34 HTTP/1.1" 200 60660 "-" "-" 
```

欢迎任何提示。我不知道那里出了什么问题:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:54:05.420

所以，如果我对你的理解正确——你不想在`spawn_workers`每个工作人员没有停止（并获取页面）之前从函数返回控制权？如果是这样 - 您可以通过以下方式更改您的代码：

```
spawn_workers(Ids) ->
  %% collect reference to each worker
  Refs = [ do_spawn(Id) || Id <- Ids ],
  %% wait for response from each worker
  wait_workers(Refs).

wait_workers(Refs) ->
  lists:foreach(fun receive_by_ref/1, Refs).

receive_by_ref(Ref) ->
  %% receive message only from worker with specific reference
  receive
    {Ref, done} ->
        done
  end.

do_spawn(Id) ->
  Ref = make_ref(),
  proc_lib:spawn_link(?MODULE, do_send_req, [Id, {self(), Ref}]),
  Ref.

do_send_req(Id, {Pid, Ref}) ->
  io:format("Requesting ID ~p ... ~n", [Id]),
  Result = (catch ibrowse:send_req(to_url(Id), [], get, [], [], 10000)),
  case Result of
      {ok, Status, _H, B} ->
        io:format("OK -- ID: ~2..0w -- Status: ~p -- Content length: ~p~n", [Id, Status, length(B)]),
        %% send message that work is done
        Pid ! {Ref, done};
      Err ->
        io:format("ERROR -- ID: ~p -- Error: ~p~n", [Id, Err]),
        %% repeat request if there was error while fetching a page, 
        do_send_req(Id, {Pid, Ref})
        %% or - if you don't want to repeat request, put there:
        %% Pid ! {Ref, done}
  end. 
```

**编辑：**

我注意到您的入口点（函数`start`）返回控制权而不等待所有工作人员结束他们的任务（因为您在那里调用`spawn`）。如果您也想在那里等待 - 只需执行类似的技巧：

```
start() ->
  ibrowse:start(),
  Ref = make_ref(),
  proc_lib:spawn(?MODULE, send_reqs, [self(), Ref]),
  receive_by_ref(Ref).

send_reqs(Pid, Ref) ->
  spawn_workers(fetch_ids()),
  Pid ! {Ref, done}. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:28:46.833

1.  您可以使用监督者和队列模块的组合：生成 N 个获取子项，每个子项获取队列的 1 项并处理它。完成后通知父进程继续队列中的下一个项目。这样你就可以限制并发请求的数量。
2.  如果您当时产生 500 个请求，ibrowse 可能会感到困惑。您是否在控制台中收到任何错误？
3.  见`ibrowse:get_config_value/1`和`ibrowse:set_config_value/2`

# c# - C# UI 线程无响应

> ID：12368273
> 
> 赞同：1
> 
> 时间：2012-09-11T11:05:02.517
> 
> 标签：c#, multithreading, ui-thread

我有一个函数可以将大量文件添加到集合中，并对每个文件执行大量操作。

这会导致程序（主线程）变得无响应。

如何确定原因并解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:18:58.183

使用 BackgroundWorker 对象。您可以使用 ReportProgress 和 ProgressChanged 事件通知用户操作的进度。

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage;
}

private void Form1_Load(object sender, EventArgs e)
{
    backgroundWorker1.WorkerReportsProgress = true;
    backgroundWorker1.RunWorkerAsync();
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{

    // .. stuff that takes long

    backgroundWorker1.ReportProgress(10);

    // .. stuff that takes long

    backgroundWorker1.ReportProgress(20);

    // .. stuff that takes long

    backgroundWorker1.ReportProgress(100);
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // Done !
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:13:00.980

使用另一个线程。

```
Thread t = new Thread(new ThreadStart( () => {
   IntensiveCalculationCode();
}));

t.Start(); 
```

您还可以通过调用调度程序从线程内部调用 UI 线程。但它们在 Windows 窗体和 WPF 上并不完全相同。

# javascript - 修复选择菜单时的背景图像

> ID：12368276
> 
> 赞同：0
> 
> 时间：2012-09-11T11:05:07.773
> 
> 标签：javascript, jquery, css, ajax, themes

我正在使用 Indexu-deluxe，并且我已经在我的网站上上传了服装主题。以下是我的网站 URL。 [http://www.submitweb.us/](http://www.submitweb.us/)

当您将鼠标悬停在任何菜单上时，会出现背景图像，当您将鼠标移出时，图像会消失。

现在我想这样做默认情况下，背景图像显示在主菜单中，当我选择或单击另一个菜单时，它将显示在该菜单上。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:18:17.403

您可以创建一个名为的类，该类为您的图像设置了`.active`一组。`background-image`

您可以将此类直接应用于所选菜单，
**或者**
您可以为每个菜单指定一个 ID，例如`#powersearch`电源搜索页面菜单 (li)，并将此脚本应用于所选菜单的每个页面：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#powerSearch').addClass('active');
    });
</script> 
```

# algorithm - 沿“布雷森汉姆线”的线性插值

> ID：12368279
> 
> 赞同：5
> 
> 时间：2012-09-11T11:05:13.207
> 
> 标签：algorithm, graphics, graphics2d

我正在使用线性插值来为屏幕上两个 2d 坐标之间的对象设置动画。这非常接近我想要的，但由于四舍五入，我得到一个锯齿状的运动。在 ASCII 艺术中：

```
ooo
  ooo
    ooo
      oo 
```

注意它是如何在曼哈顿网格中行走的，而不是 45 度转弯。我想要的是沿着[Bresenham 算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)创建的线的线性插值：

```
oo
  oo
    oo
      oo 
```

对于每个 x，只有一个对应的 y。（并将 x/y 换成陡峭的线）

那么我为什么不直接使用 Bresenham 算法呢？我当然可以，但该算法是迭代的，我只想知道沿线的一个坐标。

我将尝试通过线性插值 x 坐标来解决这个问题，将其四舍五入到像素网格，然后找到相应的 y。（再次，将 x/y 换成陡峭的线）。但是，无论该解决方案如何解决，我都会对其他建议以及以前的经验感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:44:34.650

引入 Bresenham 的线算法以比通常的方法更快地绘制一条完整的线。它有两个主要优点：

*   它适用于整数变量
*   绘制整条线时，它迭代地工作，速度很快

如果您只计算一些坐标，第一个优点并不是很大。当只计算一些坐标时，第二个优点变成了一个缺点。所以毕竟没有必要使用 Bresenham 的算法。

相反，您可以使用不同的算法，这会导致同一行。例如 DDA（数字差分分析仪）。这基本上与您提到的方法相同。

第一步：计算斜率。

```
m = (y_end - y_start) / (x_end - x_start) 
```

第二步：计算迭代步长，简单来说就是：

```
i = x - x_start 
```

第三步：计算对应的y值：

```
y = y_start + i * m
  = y_start + (x - x_start) * (y_end - y_start) / (x_end - x_start) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:43:19.647

这是我最终得到的解决方案：

```
public static Vector2 BresenhamLerp(Vector2 a, Vector2 b, float percent)
{
    if (a.x == b.x || Math.Abs(a.x - b.x) < Math.Abs(a.y - b.y))
    {
        // Didn't do this part yet. Basically, we just need to recurse
        // with x/y swapped and swap result on return
    }

    Vector2 result;
    result.x = Math.Round((1-percent) * a.x + percent * b.x);

    float adjustedPercent = (result.x - a.x + 0.5f) / (b.x - a.x);
    result.y = Math.Round((1-adjustedPercent) * a.y + adjustedPercent * b.y);

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T22:35:37.837

这就是我刚刚发现可行的方法。可能不是最漂亮的插值，但它只是在一次预计算的线上每次迭代增加 1-2 个浮点数。通过计算曼哈顿矩阵的步数来工作。

啊，它还没有捕捉到直线垂直的情况（dx = 0）

这是*朴素*的bresenham，但理论上迭代也只能使用整数。如果你想摆脱浮点颜色值，事情会变得更难，因为线条可能比色差长，所以 delta-color < 1。

```
void Brepolate( uint8_t* pColorBuffer, uint8_t cs, float xs, float ys, float zs, uint8_t ce, float xe, float ye, float ze )
{
    float nColSteps = (xe - xs) + (ye - ys);
    float fColInc = ((float)cs - (float)ce) / nColSteps;
    float fCol = cs;

    float dx = xe - xs;
    float dy = ye - ys;

    float fCol = cs;

    if (dx > 0.5)
    {
        float de = fabs( dy / dx );
        float re = de - 0.5f;

        uint32_t iY = ys;
        uint32_t iX;

        for (   uint32_t    iX = xs;
                            iX <= xe;
                            iX++ )
        {
            uint32_t off = surf.Offset( iX, iY );
            pColorBuffer[off] = fCol;
            re += de;
            if (re >= 0.5f)
            {
                iY++;
                re -= 1.0f;
                fCol += fColInc;
            }
            fCol += fColInc;
        }
    }
} 
```

# mysql - mySQL格式数字输出，千位分隔符

> ID：12368280
> 
> 赞同：2
> 
> 时间：2012-09-11T11:05:14.433
> 
> 标签：mysql, format, decimal

我有一个 mySQL 查询，它输出带逗号的十进制字段。

```
SELECT Metals.Metal, FORMAT(Fixes.GBPam, 3) AS AM, FORMAT(Fixes.GBPpm, 3) AS PM,     
DATE_FORMAT(Fixes.DateTime, '%d-%m-%y') AS Date
FROM Fixes, Metals
WHERE Metals.Id = Fixes.Metals_Id 
```

字段 GBPam 和 GBPpm 都是类型`decimal(10,5)`

现在我希望在我的 sql 查询中将 AM 和 PM 列格式化为小数点后 3 位 - 正确

我希望将数千个值格式化为 xxxx.xxx 而不是 x,xxx.xxx - 不正确

mysql查询的示例输出：

```
Metal       AM          PM          Date
Gold        1,081.334   NULL    11-09-12
Silver      21.009      NULL    10-09-12
Platinum    995.650     NULL    11-09-12
Palladium   416.700     NULL    11-09-12 
```

你能看到 Gold AM 的输出是 1,081.334 吗？我怎样才能让它输出 1081.334？

这对我来说很痛苦，因为我必须在 PHP 中搞砸以删除逗号。我宁愿让 mysql 正确格式化它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T11:10:51.293

只需使用`ROUND`，这是一个数值函数。`FORMAT`是一个字符串函数

```
ROUND(Fixes.GBPam, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:11:50.967

您可以[`replace`](http://dev.mysql.com/doc/refman/5.0/en/replace.html)为此目的使用命令。

```
 REPLACE(Fixes.GBPam,',','') 
```

**编辑：** 关于你的问题，你可以这样做：

```
SELECT Metals.Metal, ROUND(REPLACE(Fixes.GBPam,',',''),3) AS AM,
  ROUND(REPLACE(Fixes.GBPpm,',',''),3) AS PM,     
  DATE_FORMAT(Fixes.DateTime, '%d-%m-%y') AS Date
  FROM Fixes, Metals
WHERE Metals.Id = Fixes.Metals_Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:22:03.007

使用**替换**功能。无论该字段是整数还是 varchar，它都会起作用。

```
select replace(Fixes.GBPam,',','.'); 
```

# c++ - 保存通过递归回溯找到的最佳路径

> ID：12368285
> 
> 赞同：1
> 
> 时间：2012-09-11T11:05:34.137
> 
> 标签：c++, algorithm, recursion, dynamic-programming, backtracking

我通过递归回溯/动态编程和位掩码部分解决[了 UVA 判断的问题（参见下面的代码）。](http://uva.onlinejudge.org/external/2/216.html)

这为包含的测试用例提供了正确的最终答案，但是，我还必须打印最佳路径路径，我不确定如何将其保存在递归例程中。

问题是一个旅行商问题，基本上问题是这样的：

给定`n`坐标，找到所有这些坐标之间的最短路径。

```
#include<iostream>
#include<cmath>
#include<climits>
#include<cstdio>
using namespace std;

#define MAX_N 10

struct Computer{
  double x;
  double y;
};

Computer computers[MAX_N];
double dist[MAX_N][MAX_N];
double DP[MAX_N][1 << MAX_N];

size_t n; 

double d(Computer a, Computer b) {
  return sqrt(pow((a.x - b.x), 2.0) + pow((a.y - b.y), 2.0)) + 16.0;
}

double recurse(int i, int switched)
{
  if(switched == (1 << n) - 1) return 0;
  if(DP[i][switched] != 0) return DP[i][switched];

  double local_min = INT_MAX;
  for(int j = 0; j < n; j++)
    if(i != j && !(switched & (1 << j)))
      local_min = min(dist[i][j] + recurse(j, switched | (1 << j)), local_min);

  return DP[i][switched] = local_min;
}

int main()
{
  for(unsigned int p = 1; cin >> n; p++) {
    if(n == 0) return 0;
    memset(DP, 0, sizeof DP);

    for(size_t i = 0; i < n; ++i) {
      Computer c; cin >> c.x >> c.y;
      computers[i] = c;
    }

    for(size_t i = 0; i < n; ++i) for(size_t j = 0; j < n; ++j)
      dist[i][j] = d(computers[i], computers[j]);

    printf("%d: %.2f\n", p, recurse(0, 1));
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:37:26.083

存储路径的一种常用方法是跟踪一个附加地图，该地图存储路径查找器到达当前点所采用的节点。当您找到到结束节点的最佳路线后，您可以查询此地图，直到您回到起始节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:37:34.670

在单人谜题中收集**最佳路径**与保存国际象棋等两人游戏中的**主要变化是一个类似的问题。**请参阅此[链接](http://web.archive.org/web/20040427013839/brucemo.com/compchess/programming/pv.htm)以了解如何实现它。

这个想法是存储一个指向向量/步骤数组的指针（国际象棋中的移动），并在您的回溯算法在迄今为止的最短路径上发现改进时更新该数组。

# asp.net-mvc-4 - 将 Web 优化框架升级到 RTM

> ID：12368287
> 
> 赞同：2
> 
> 时间：2012-09-11T11:05:40.220
> 
> 标签：asp.net-mvc-4, .net-4.5, asp.net-optimization, web-optimization

当我通过 nuget 从*Microsoft ASP.NET Web Optimization Framework 1.0.0-beta2*升级 到*Microsoft ASP.NET Web Optimization Framework 1.0.0*时，我的一些脚本不再呈现到页面上。这看起来很奇怪，我想知道我是否需要做一些修改来升级它。

使用 beta2，我得到了以下脚本：

```
<script src="/Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-1.8.1.js" type="text/javascript"></script>
<script src="/Scripts/less-1.3.0.min.js" type="text/javascript"></script>
<script src="/Scripts/bootstrap.min.js" type="text/javascript"></script>
<script src="/Scripts/coffee-script.js" type="text/javascript"></script>
<script src="/Scripts/underscore-min.js" type="text/javascript"></script>
<script src="/Scripts/knockout-2.0.0.js" type="text/javascript"></script>
<script src="/Scripts/knockout-2.1.0.js" type="text/javascript"></script>
<script src="/Scripts/backbone-min.js" type="text/javascript"></script>
<script src="/Scripts/backbone-modelref.js" type="text/javascript"></script>
<script src="/Scripts/backbone-relational.js" type="text/javascript"></script>
<script src="/Scripts/knockback.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.gridster.min.js" type="text/javascript"></script>
<script src="/Scripts/dragdealer.js" type="text/javascript"></script>
<script src="/Scripts/pminject.coffee" type="text/javascript"></script> 
```

但使用 RTM 我只能得到：

```
<script src="/Scripts/jquery-1.8.1.js"></script>
<script src="/Scripts/coffee-script.js"></script>
<script src="/Scripts/underscore-min.js"></script>
<script src="/Scripts/knockout-2.0.0.debug.js"></script>
<script src="/Scripts/knockout-2.1.0.debug.js"></script>
<script src="/Scripts/backbone-min.js"></script>
<script src="/Scripts/backbone-modelref.js"></script>
<script src="/Scripts/backbone-relational.js"></script>
<script src="/Scripts/dragdealer.js"></script>
<script src="/Scripts/pminject.coffee"></script> 
```

我的捆绑配置非常简单：

```
public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                        "~/Scripts/jquery-1.*"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                        "~/Scripts/jquery-ui*"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                        "~/Scripts/jquery.unobtrusive*",
                        "~/Scripts/jquery.validate*"));

            bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                        "~/Scripts/modernizr-*"));

            bundles.Add(new ScriptBundle("~/bundles/openid").Include(
                        "~/Scripts/openid-jquery.js",
                        "~/Scripts/openid-en.js"));

            bundles.Add(new ScriptBundle("~/bundles/less").Include(
                        "~/Scripts/less-1.*"));

            bundles.Add(new ScriptBundle("~/bundles/coffeescript").Include(
                        "~/Scripts/coffee-script.js"));

            bundles.Add(new ScriptBundle("~/bundles/underscore").Include(
                        "~/Scripts/underscore-min.js"));

            bundles.Add(new ScriptBundle("~/bundles/knockout").Include(
                        "~/Scripts/knockout-2.*"));

            bundles.Add(new ScriptBundle("~/bundles/backbone").Include(
                        "~/Scripts/backbone-*"));

            bundles.Add(new ScriptBundle("~/bundles/knockback").Include(
                        "~/Scripts/knockback.min.js"));

            bundles.Add(new ScriptBundle("~/bundles/gridster").Include(
                        "~/Scripts/jquery.gridster.min.js"));

            bundles.Add(new ScriptBundle("~/bundles/dragdealer").Include(
                        "~/Scripts/dragdealer.js"));

            bundles.Add(new ScriptBundle("~/bundles/pminject").Include(
                        "~/Scripts/pminject.coffee"));

            bundles.Add(new ScriptBundle("~/bundles/bootstrap").Include(
                        "~/Scripts/bootstrap.min.js"));
} 
```

有谁知道我是否需要做额外的步骤或更改来升级它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:09:29.140

从 Beta 到 RTM 的一个区别是，当 debug mode = true 时 *.min.js 默认会被忽略。您可以通过清除 BundleTable.Bundles 上的 IgnoreList 来解决此问题，或者您可以将任何仅具有 .min.js 版本的文件重命名为仅 .js 以便包含它们。

这种行为给许多人带来了问题，因此我们正在研究如何在功能版本中使其更好。

# android - GCM 将如何处理所有向 Android 应用程序发送消息的排队和传递？

> ID：12368290
> 
> 赞同：0
> 
> 时间：2012-09-11T11:05:54.073
> 
> 标签：android

如果多个 PUSH 消息发送到同一个设备，那么 GCM 中的队列是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:33:46.463

这包含在文档中，如果您想阅读它：http: [//developer.android.com/guide/google/gcm/adv.html#collapsible](http://developer.android.com/guide/google/gcm/adv.html#collapsible)

> 注意：在不折叠的情况下可以存储多少消息是有限制的。该限制当前为 100。如果达到限制，则丢弃所有存储的消息。然后，当设备重新联机时，它会收到一条特殊消息，指示已达到限制。然后，应用程序可以正确处理这种情况，通常是通过请求完全同步。

# javascript - 现在可以在加载 addThis 时显示加载吗？

> ID：12368292
> 
> 赞同：0
> 
> 时间：2012-09-11T11:06:00.883
> 
> 标签：javascript, jquery, addthis

如果脚本标签在 addthis div 之后。它减慢了页面的加载速度，我不在乎它减慢，但我现在想表明该页面正在加载（谷歌浏览器显示加载图标）。我删除了脚本标签并将其放在我所有 jQuery 代码所在的外部文件中的 $(funcion) 中。但是当脚本被加载时，它仍然显示加载图标。

```
var src = 'http://s7.addthis.com/js/250/addthis_widget.js#username=boobaloo';
$.getScript(src); 
```

我也尝试使用

```
$('<script/>').attr('src', src).appendTo('head'); 
```

是否可以加载 addthis 按钮并且不显示该页面仍在加载？有人可以解释为什么它显示页面正在加载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:28:24.517

尝试将“addthis”脚本包含在一个单独的函数中，并在您想要的任何地方调用该函数。还使用 setTimeout 调用该方法。例如：- setTimeout('AddthisMethod', 1000);

# android - 循环中的 Asynctask 在 2.3 和更早版本上出现错误

> ID：12368297
> 
> 赞同：0
> 
> 时间：2012-09-11T11:06:11.533
> 
> 标签：android, android-asynctask, looper, android-2.3-gingerbread, background-service

最近，我遇到了越来越多的错误，这些错误对于有经验的人来说似乎很容易，但对我来说却很难弄清楚。

我正在尝试创建一个后台服务，每 X 分钟检查一次新的提要条目。因此，我从服务开始一个循环，并且该循环创建了一个异步任务。

它在我的 4.1 手机上就像一个魅力，但在我的 2.3 模拟器上，它提供了以下力量关闭：

```
09-11 19:53:35.905: E/AndroidRuntime(354): FATAL EXCEPTION: AppConstructorPushLoop
09-11 19:53:35.905: E/AndroidRuntime(354): java.lang.ExceptionInInitializerError
09-11 19:53:35.905: E/AndroidRuntime(354):  at com.appconstructor.actest.PushNotificationService$1.run(PushNotificationService.java:54)
09-11 19:53:35.905: E/AndroidRuntime(354):  at java.util.Timer$TimerImpl.run(Timer.java:284)
09-11 19:53:35.905: E/AndroidRuntime(354): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-11 19:53:35.905: E/AndroidRuntime(354):  at android.os.Handler.<init>(Handler.java:121)
09-11 19:53:35.905: E/AndroidRuntime(354):  at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
09-11 19:53:35.905: E/AndroidRuntime(354):  at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
09-11 19:53:35.905: E/AndroidRuntime(354):  at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
09-11 19:53:35.905: E/AndroidRuntime(354):  ... 2 more 
```

我意识到这通常意味着我正在尝试在非 UI 线程中执行 UI 操作，但事实并非如此。事实上，即使我注释掉 ASyncTask 中的所有活动，它仍然会强制关闭。当我注释掉开始循环的行时，它只会停止强制关闭

这只发生在我的 2.3 模拟器上，与我使用的 4.0 样式通知无关。

有人会对此有更多了解吗？

谢谢！

编辑-> 如果我调用 Looper.prepare() 我会得到每个线程可能只发生一次的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:37:35.437

请`AsyncTask`从[http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) ) 方法开始。并使用服务 -`new Handler()`在 UI 线程上创建实例并`AsyncTask`在[http://developer.android.com/reference/android/os/Handler.html#post(java.lang.Runnable](http://developer.android.com/reference/android/os/Handler.html#post(java.lang.Runnable) )上启动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:03:52.553

您正在从计时器更新 UI 踏板，如果您只是在计时器内放了一个吐司，它将无法工作，因为计时器没有与 UI 线程连接，并且您无法在调用 thread.execute 时两次准备线程准备并在 4.1 中由 android OS 本身处理。AsyncTask 只能从 UI 线程调用。

```
new refreshList().execute(); 
```

在 runOnUiThread(action) 中运行此代码，并且不要忘记在执行新线程之前取消线程。

# java - 将 JTabbedPane 宽度设置为常量

> ID：12368298
> 
> 赞同：0
> 
> 时间：2012-09-11T11:06:14.370
> 
> 标签：java, swing, jtabbedpane

我在 Java Swing 中实现一个 UI。因此我使用一个`JTabbedPane`. tabbedPane 在启动时没有组件。当我将选项卡添加到选项卡窗格时，选项卡窗格的宽度会增加，当我删除选项卡时，宽度会调整为启动时的宽度。这不应该发生。

选项卡窗格放置在`JPanel`具有网格包布局的 a 上。

布局代码：

 `````
Container contentPane = mainFrame.getContentPane();
contentPane.setLayout( new GridBagLayout() );
GridBagConstraints c = new GridBagConstraints();        
// add the component tree
initComponentTree();
c.gridx = 0;
c.gridy = 0;
c.gridheight = 1;
c.gridwidth = 1;
c.fill = GridBagConstraints.BOTH;
c.anchor = GridBagConstraints.LINE_START;
c.weightx = 1;
c.weighty = 1;
contentPane.add( componentTree, c );        
// add the tabbed pane
initTabbedPane();
c.gridx = 1;
c.weightx = 10;
contentPane.add( tabbedPane, c );       
// add the status panel
initStatusPanel();
c.gridx = 0;
c.gridy = 1;
c.gridwidth = 2;
c.fill = GridBagConstraints.HORIZONTAL;
c.anchor = GridBagConstraints.LINE_START;
c.weightx = 0;
c.weighty = 0;
contentPane.add( statusPanel, c ); 
````  `希望有人能帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:48:23.023

尝试将`ipadx`的值设置`GridBagConstraints`为所需的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:36:36.947

我一直认为应该不惜一切代价避免使用 GridBagLayout。它确实提供了通过将面板与其他布局嵌套来实现的功能。它唯一提供的就是很多挫败感。

我建议将您的 JTabbedPane 放在使用 BorderLayout 的面板中，并将其放在 CENTER 位置。如果您坚持使用 GridBayLayout，您可以尝试使用 setMinimumSize() 方法，GridBagLayout 是支持该方法的布局管理器之一（BoxLayout 是另一个）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T11:11:35.720

你试过[setSize()](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#setSize%28int,%20int%29)吗？

```
JTabbedPane pane;
pane.setSize(SOME_WIDTH_CONSTANT, SOME_HEIGHT_CONSTANT); 
`````

# extjs - 如何禁用 TAB 键焦点上的文本选择

> ID：12368300
> 
> 赞同：0
> 
> 时间：2012-09-11T11:06:25.797
> 
> 标签：extjs, extjs4, extjs4.1

**ExtJS 4.1**

我有 2 个文本字段，例如：

```
 {
                    fieldLabel: 'Email',
                    name: 'email',
                    vtype: 'email',
                }, {
                    fieldLabel: 'Phone',
                    name: 'phone',
                    minLength: 8,
                    maxLength: 20,
                    value: '+7',
                }, 
```

如您所见，`phone`字段具有预定义的值。

当我完成填充`email`fileld 时，我按 TAB 键聚焦下一个字段（在我的情况下 -`phone`字段）。

当`phone`字段被 TAB 键光标聚焦时， incfield 位于值（`+7|`）的末尾，但字段中的所有文本都**被选中**，所以如果我输入一些内容，所有文本都会被新文本替换。

我希望光标位于值字符串的末尾，并且值文本不会**被选择**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:05:00.880

这是一个有效的解决方法：

```
{
    fieldLabel: 'Phone',
    name: 'phone',
    minLength: 8,
    maxLength: 20,
    value: '+7',
    listeners: {
        focus: function(field){
            var value = field.getValue();
            Ext.Function.defer(field.setRawValue, 1, field, [value]);
        }
    }
} 
```

由于设置了值，导致页面重排在字段末尾设置插入符号，应该适用于您并且不会导致更改事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:38:17.293

它看起来像一些 Chrome 行为。它会自动选择 TABing 上下一个文本输入中的所有文本。

尝试了所有发布的解决方案，但在 Chrome 中没有效果（Opera 和 Mozilla 工作正常）。

感谢大家抽出时间！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T11:39:31.030

解决这个问题的关键是使用 setTimeout 或类似于@Reimius 的答案。

Chrome 和 IE 会选择焦点上的所有文本，即使您调用`event.stopPropagation()`.

可能的解决方案（使用了一些 jQuery）：

```
var selectText;

selectText = function(element, startIndex, endIndex) {
  var range;

  // Modern browsers, IE9+
  if (element.setSelectionRange != null) {
    element.selectionStart = startIndex;
    element.selectionEnd = endIndex;
    return;
  }

  // OldIE
  range = element.createTextRange();
  range.collapse(true);
  range.moveEnd('character', endIndex);
  range.moveStart('character', startIndex);
  range.select();
};

$(document).on('focus', 'input textarea', function(event) {
  setTimeout(function() {
    selectText(input, selectionStartIndex, selectionEndIndex);
  }, 0);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:33:03.443

你可以这样使用。

```
 {
                fieldLabel: 'Phone',
                name: 'phone',
                minLength: 8,
                maxLength: 20,
                value: '+7',
                listeners:{
                     focus:function(t,e){
                       t.selectText(t.getValue().length,t.getValue().length);
                     }
                }
            } 
```

# android - 在 ViewHolder 模式中将 ViewHolder 设为静态对于性能至关重要吗？

> ID：12368302
> 
> 赞同：13
> 
> 时间：2012-09-11T11:06:28.707
> 
> 标签：android, listview, performance

[在ViewHolder 模式](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)中将 ViewHolder 设为静态对于性能至关重要吗？

> ViewHolder 对象将每个组件视图存储在 Layout 的 tag 字段中，因此您可以立即访问它们而无需重复查找它们。首先，您需要创建一个类来保存您的确切视图集。例如：

```
static class ViewHolder {
  TextView text;
  TextView timestamp;
  ImageView icon;
  ProgressBar progress;
  int position;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T11:14:44.300

它对性能并不重要，它与使用有关。如果`ViewHolder`类不是静态的 - 您必须提供父类的实例：

```
No enclosing instance of type Type is accessible. 
Must qualify the allocation with an enclosing instance of type Type 
(e.g. x.new A() where x is an instance of Type). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:10:14.850

编辑：误解了这个问题——看来你是在专门询问关于制作它的问题`static`。这对性能来说不应该是至关重要的，但这个想法是有帮助的。

此处的最终编辑：[Java 中的静态嵌套类，为什么？](https://stackoverflow.com/questions/253492/static-nested-class-in-java-why)

====

原答案如下：

从沉重的 ListView（或其他类型的**回收**AdapterView）中挤出性能非常好。然而，最好的判断方法是以某种方式描述性能。

同样在**[Google IO 2010](http://www.youtube.com/watch?v=wDBM6wVEO70)**他们推荐这种方法：

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

编辑：

**[这里还有一个指向traceview](http://developer.android.com/tools/debugging/debugging-tracing.html)**的链接来分析性能，尽管我不确定它的效果如何。

[http://developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-11T11:18:40.350

这不是强制性的。但是，当您以前这样做时，当您的适配器视图为空时，您将再次使用视图。您正在创建视图并将值分配给视图部件，并使用静态类 ViewHolder 标记整个视图。所以当你回来查看不为空时，可见部分会从那里获取标签。这就是您将创建更少的对象以及更少的适配器工作负载的方式。

# entity-framework-5 - EntityFramework 5 使用 dll 版本 4.4.0\. 而不是 5.0

> ID：12368304
> 
> 赞同：40
> 
> 时间：2012-09-11T11:06:47.897
> 
> 标签：entity-framework-5, asp.net-4.5

我有基于 .NET 4.0 的项目，但我需要在我的解决方案中使用 EntityFramework 5。所以我从 NuGet 安装它。

之后，我将目标框架更改为 .NET 4.5（我使用的是 VS 2012）并重建项目。

但在参考文件夹中，我看到该项目使用 EntityFramework.dll 版本 4.4.0.0。

我可以使用更新版本的 EntityFramework 吗？

在 web.config 中

```
<compilation debug="true" targetFramework="4.5">
    <assemblies>
       <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </assemblies>
</compilation> 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-11T11:57:15.510

较新的版本（真正的 EF5）依赖于 .NET 4.5。如果您在项目基于 .NET 4.0 时添加了 EF5，那么您将只有 EF 4.4（EF5 版本没有依赖于 .NET 4.5 的功能）。升级到 EF 5.0 后，您需要更新 EntityFramework 包。您可以尝试使用`Update-Package`命令。如果它没有帮助，您将需要先卸载软件包，然后再添加它。

# sql - SQL从一个表中选择多个不同的记录

> ID：12368313
> 
> 赞同：1
> 
> 时间：2012-09-11T11:07:06.670
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, greatest-n-per-group

我有一个如下表

```
ID  |FromId |ToId   |Message|DateTime
------------------------------------------
1   |1      |2      |a      |15:00
2   |1      |2      |b      |15:01
3   |1      |2      |c      |15:02
4   |2      |1      |d      |15:03
5   |3      |1      |e      |15:04
6   |3      |1      |f      |15:05
7   |1      |3      |g      |15:06 
```

我想要得到的是 Peers 的每一条消息。

**例如：**用户 1 和用户 2 有 4 条消息 (ID:1,2,3,4) 用户 1 和用户 3 有 3 条消息 (ID:5,6,7)

我只想从用户那里获取最新的消息记录，我需要一个 SQL 查询，它会给出如下结果：

```
*sql code here ? -- I need this. 
```

结果（对于：其中 UserID=1）：

```
ID  |FromId |ToId   |Message|DateTime
------------------------------------------
4   |2      |1      |d      |15:03
7   |1      |3      |g      |15:06 
```

有任何想法吗 ？我已经尝试过 Distinct 等，但它并没有以某种方式起作用。请帮忙。

**对不起，伙计们，我想我忘了提到我需要来自 Peer 的最新记录，而不是来自某个用户的最新记录，例如对于用户 1 和用户 2，我需要他们的最新记录，不知道哪个来自或哪个来自是 To.. 我需要两者的最新记录，在我们的例子中是 ID 4，没有其他记录。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:39:07.267

如果 Sql Server 2005+，您可以使用[row_number() over ( ... )](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.105%29.aspx)对记录进行分组、排序和编号，然后仅检索在其组中排在第一位的记录：

```
; with cte as
(
  select *,
      -- Group by user not being searched for
         row_number() over (partition by case when FromID = @UserID
                                              then ToID
                                              else FromID
                                          end
      -- Last date will be numbered as 1
                            order by [DateTime] desc
                           ) rn
    from Table1
-- Filter only messages sent from or received by certain user
   where (FromID = @UserID or ToID = @UserID)
)
select *
  from cte
-- Get last dates only
 where rn = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:29:09.600

为此使用此 Sql：

```
Declare @tempTeable Table
(
 Id int,
 FromID int,
 ToId int,
 SMessage nvarchar(250),
 SDateTime Time 
)

Insert into @tempTeable values(1,1,2,'a','15:00')
Insert into @tempTeable values(2,1,2,'b','15:01')
Insert into @tempTeable values(3,1,2,'c','15:02')
Insert into @tempTeable values(4,2,1,'d','15:03')
Insert into @tempTeable values(5,3,1,'e','15:04')
Insert into @tempTeable values(6,3,1,'f','15:05')
Insert into @tempTeable values(7,1,3,'g','15:06')

select distinct t1.* from @tempTeable as t1
inner join 
  (select UserID,MAX(SDateTime)as SDateTime from
    (
      select FromId as UserId ,MAX(SDateTime)as SDateTime from  @tempTeable group by 
       FromId
       UNION
       select ToId as UserId,MAX(SDateTime)as SDateTime from  @tempTeable group by   
        ToId) as tbl
        group by UserId) as tblres 
  on (t1.FromID =tblres.UserId  or t1.toId =tblres.UserId) 
  and t1.SDateTime=tblres.SDateTime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:43:04.643

```
create table Msgs (ID int primary key, FromId int, ToId int, Message nvarchar(MAX), DateTime time);
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (1   ,1      ,2      ,'a'      ,'15:00');
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (2   ,1      ,2      ,'b'      ,'15:01');
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (3   ,1      ,2      ,'c'      ,'15:02');
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (4   ,2      ,1      ,'d'      ,'15:03');
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (5   ,3      ,1      ,'e'      ,'15:04');
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (6   ,3      ,1      ,'f'      ,'15:05');
insert into Msgs (ID, FromId, ToId, Message, Datetime) values (7   ,1      ,3      ,'g'      ,'15:06');
select * from Msgs;

with M(ID, FromId, ToId, Message, DateTime, RN) as (
select ID, FromId, ToId, Message, DateTime,
    ROW_NUMBER() over (partition by 
        CASE WHEN FromId < ToID THEN FromId ELSE ToID END, 
        CASE WHEN FromId > ToID THEN FromId ELSE ToID END 
        order by DateTime desc)
from Msgs)
select ID, FromId, ToId, Message, DateTime from M where RN = 1;

drop table Msgs; 
```

退货

```
ID  FromId  ToId    Message DateTime
1   1   2   a   15:00:00.0000000
2   1   2   b   15:01:00.0000000
3   1   2   c   15:02:00.0000000
4   2   1   d   15:03:00.0000000
5   3   1   e   15:04:00.0000000
6   3   1   f   15:05:00.0000000
7   1   3   g   15:06:00.0000000

ID  FromId  ToId    Message DateTime
4   2   1   d   15:03:00.0000000
7   1   3   g   15:06:00.0000000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:12:09.867

您需要进行自引用连接，因此内部查询选择每个组的最大值，外部查询选择匹配的每一行的所有数据。

```
select * 
from thetable t1 
join(select max(ID) as id,
            FromID 
     from thetable
     group by FromID)t2 on (t1.id=t2.id); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:08:48.687

尝试这个：

```
;WITH CTE As(
select id,fromID,ToID,Message,DateTime,0 as sel from Msgs where id=1
union all
select m.id,m.fromID,m.ToID,m.Message,m.DateTime,
CASE WHEN (m.FromId =c.FromId or m.FromId =c.ToId) then 0 else 1 end as sel 
from CTE c inner join Msgs m 
--on (c.FromId = m.FromId and c.ToId = m.ToId) or (c.FromId = m.ToId and c.ToId = m.FromId)
on m.id=c.Id+1
)

select * from CTE where ID in (select ID-1 from CTE where sel=1)
union
select * from CTE where ID = (select max(id) from CTE) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-11T11:11:35.180

```
create function getlastmessage(
@userid int
)
returns nvarchar(max)
as
select top(1), message from messages 
 where userid=@userid order by messageid desc 
```

在人员表中

```
select *, getlastmessage(actorid) as lastmessage from people 
```

[有关函数语法的更多信息](http://msdn.microsoft.com/en-us/library/ms186755.aspx)

* * *

如果你不想使用函数

```
select 
*, 
(select top(1), message from messages 
  where messages.userid=people.userid order by messageid desc) as lastmessage 
 from people 
```

会有点乱。

# java - GWT：定时器和调度器类

> ID：12368316
> 
> 赞同：21
> 
> 时间：2012-09-11T11:07:19.427
> 
> 标签：java, gwt, scheduler

我已经多次阅读[此页面](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDelayed)`Timer`，只是没有看到 GWT和`Scheduler`类之间的一些内在差异。我正在寻找以下各项的用例和适用性：

*   `Timer`,`Timer::schedule`和`Timer::scheduleRepeating`
*   `Scheduler::scheduleDeferred`
*   `Scheduler::scheduleIncremental`
*   `IncrementalCommand`
*   `DeferredCommand`

这些似乎或多或少都在做同样的事情，感觉就像你可以用它们完成相同的目标。这只是 GWT 提供多种方式做同一件事的方式吗？如果没有，请帮助我了解每个适当使用的时间和地点。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-11T14:02:37.370

当您需要浏览器完成它当前正在做的事情，然后再告诉它做其他事情时，请使用**调度程序。**例如：

```
myDialogBox.show();
Scheduler.get().scheduleDeferred(new ScheduledCommand() {

    @Override
    public void execute() {
        myTextBox.setFocus();
    }
}); 
```

在这个例子中，直到浏览器完成对话框的渲染才会设置焦点，所以你告诉程序等到浏览器准备好。

如果您希望在指定时间段后发生某些操作，请使用**Timer 。**例如：

```
 notificationPanel.show();
 Timer timer = new Timer() {
     @Override
     public void run() {
         notificationPanel.hide();
     }
 };
 timer.schedule(10000); 
```

此代码将显示通知面板，然后在 10 秒后将其隐藏。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T12:02:43.853

正如 JavaDoc 所说，`DeferredCommand`不推荐使用`Scheduler`. `DeferredCommand`和的问题`IncrementalCommand`在于它们具有静态状态（这使得在测试中难以可靠地使用）。此外，它们的（静态）方法会进行 JSNI 调用，这会迫使您使用 a`GWTTestCase`来测试您的代码（静态方法不容易 - 可模拟）。静态方法也使得无法包装它们（例如添加一些日志记录或其他）。
另一方面，您使用 a 的实例（如果您想要可测试的代码，您将使用依赖注入来获取调度程序的实例，并且除了在您的 DI“工厂”中之外`Scheduler`永远不会调用）。`Scheduler.get()`在测试中，您可以使用`StubScheduler`例如。

然后`Timer`是 ，与其他类似，但可以取消计划任务。请注意，它`Timer`也使用 JSNI，就像`DeferredCommand`; 任何使用 a 的代码`Timer`都需要对 a`GWTTestCase`进行单元测试。

# rest - JERSEY - 访问通用列表作为响应

> ID：12368317
> 
> 赞同：2
> 
> 时间：2012-09-11T11:07:52.763
> 
> 标签：rest, jakarta-ee, jaxb, jersey

我在客户响应中获取 Jersey Generic List 时遇到问题。出于某种原因，我需要将其作为实体。

```
@XmlRootElement(name="list")
@XmlSeeAlso({RESTDomain.class})
public class JAXBContainer<T> {
    private List<T> items = new ArrayList<T>();

    public JAXBContainer() { }

    public JAXBContainer(List<T> items) {
        this.items = items;
    }

    @XmlElementWrapper(name="items")
    @XmlAnyElement(lax=true)
    public List<T> getItems() {
        return items;
    }

    public void setItems(List<T> items) {
        this.items = items;
    }

    @XmlAttribute
    public int getItemsSize() {
        return this.items.size();
    } 
```

以上是我对响应的通用列表

```
 @GET
    @Produces({MediaType.APPLICATION_XML})
    public Response getREST(){  
        RESTDomain domain = new RESTDomain();
        domain.setName("Adams");
        domain.setPlace("Zurich");
        List<RESTDomain> restDomains = new ArrayList<RESTDomain>();
        restDomains.add(domain);        
        JAXBContainer<RESTDomain> jAXBContainer= new JAXBContainer<RESTDomain>(restDomains);        
        GenericEntity<JAXBContainer<RESTDomain>> genericEntity = new GenericEntity<JAXBContainer<RESTDomain>>(jAXBContainer){};

        return Response.ok(genericEntity).build();

    } 
```

我返回带有 genericEntity 的容器。我知道只有在 genericEntity 中的 List 我可以在我的客户端获取我的实体，但问题是我需要使用我的 JAXBContainer 出于某种原因。

```
 @Test
            public void restGet() throws JAXBException{     
                ClientConfig cc = new DefaultClientConfig();        
                client = Client.create(cc);
            String baseURI ="http://localhost:3555/SampleREST/rest/sample";
                    WebResource webResource = client.resource(baseURI);         
                    JAXBContainer<RESTDomain> jAXBContainer= webResource.get(new GenericType<JAXBContainer<RESTDomain>>(){});         
                     System.out.println("response:: "+jAXBContainer.getItemsSize());
    } 
```

我的问题是我得到的响应是 JAXBContainer 和 GenericType，但容器的大小是 0。我在这里缺少什么？我是否必须使用任何编组和解组机制。

但是当我在浏览器中请求这个 URI 时，我得到了格式正确的 XML，但是它在客户端失败了，或者我们有任何其他方法可以在客户端中提取实体。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T14:42:26.197

我没有看到您在客户端的任何位置设置接受内容类型。尝试： webResource.accept("application/xml")

# .net - 为什么要避免在 for 循环中使用 i, j

> ID：12368324
> 
> 赞同：-1
> 
> 时间：2012-09-11T11:08:18.083
> 
> 标签：.net, coding-style

在许多代码审查中，他们建议不要使用 i, j 作为变量。有什么具体原因可以避免在 for 循环中使用 i, j。

例如

```
for (int i=0; i<10; i++ )
{

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:13:15.753

基本准则是使用有意义的变量名。`i`不是很有意义，但是，在 for 循环中，当 for 循环的范围非常小时，它通常不是问题。对于大多数开发人员来说，循环变量的一个字母变量非常直观，当该变量只在一两行中使用时，这没什么大不了的。另一方面，当范围变大时，更难了解`i`实际情况。但是，无论如何，您通常不应在 for 循环中包含超过一行的代码（只是一个方法调用），以使您的代码尽可能具有可读性。

尽管如此，即使循环只有一行，我更喜欢一个比`i`. 例如，该`i`变量究竟代表什么？如果您可以给它一个更有意义的名称，例如`index`or `rowNumber`，您应该这样做。它使您的代码更易于理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:12:18.627

如果您的变量除了迭代数组或某种其他类型的数据结构之外还有其他含义，您应该使用更有意义的变量名称，否则使用 i 或 j 是可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:11:59.110

一个字母的名称往往不会传达有关它们包含或代表什么的信息。使用简短的描述性词（例如，、、`row`等`attempt`）`element`通常是更好的选择。

# windows-8 - 在 Windows 8 Metro 风格模式下创建 ATL COM 服务器

> ID：12368327
> 
> 赞同：0
> 
> 时间：2012-09-11T11:08:24.510
> 
> 标签：windows-8

我需要创建一个始终在后台执行某些操作的 ATL COM 服务。我想知道，我们可以在 Windows-8 Metro 风格模式下创建服务吗？如果是这样，如何创建服务？如果没有，有什么替代解决方案？请分享您对此的教导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:51:04.913

我认为你不能在 Metro 风格的应用程序的后台运行始终在线的服务。WinRT 框架不鼓励使用始终运行的应用程序 - 以节省电池并为用户提供良好的用户体验。只有一个（或两个，如果您包括快照模式）应用程序可以处于活动状态 - 前台的应用程序 - 后台的所有其他应用程序都被挂起并且没有任何 CPU 时间。

但是，您可以使用[BackgroundTasks](http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9)定期或在系统事件发生时执行某些操作。

# iphone - 进度条未显示准确进度

> ID：12368329
> 
> 赞同：0
> 
> 时间：2012-09-11T11:08:27.433
> 
> 标签：iphone, objective-c, asihttprequest

在我的应用程序中，我从服务器获取数据并保存在 SQLite 表中。我必须显示整个过程的进度条。我写了 [myRequest setDownloadProgressDelegate:progressView]; 但它正在努力仅从服务器下载数据，它没有显示将数据保存到 SQLite 表中的进度。请帮我。谢谢

这是我在调用 url 之前编写的一些代码，在请求完成方法中，我将整个数据保存到 SQLite。

```
if (!myQueue) 
{
  myQueue = [[ASINetworkQueue alloc] init]; 
}
[myQueue reset];
[myQueue setDownloadProgressDelegate:progressView];
[myQueue setShowAccurateProgress:YES];
[myQueue setDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:08:58.893

ASINetworkQueue 只会更新 progressView 直到从服务器下载数据，因为 ASI 类用于与服务器建立连接、下载源、创建请求队列等。

在课程通知您数据已完全下载后，ASINetworkQueue 的工作已完成，之后您的应用程序有责任显示将数据保存在 db 中的进度

# maven - 当我尝试在 wro4j jshint 插件 (v1.4.7) 中应用“未使用”选项时，为什么会出现“错误选项：“未使用””？

> ID：12368332
> 
> 赞同：1
> 
> 时间：2012-09-11T11:08:38.317
> 
> 标签：maven, jshint, wro4j

我需要使用的所有其他选项都运行良好，但是当我添加“未使用”选项时，当我尝试以下任一选项时都会收到投诉：

```
<options>unused,bitwise,curly,eqeqeq,forin,immed,indent=4,latedef,newcap,noarg,nonew,undef,trailing,onevar,white,browser</options> 
```

或者

```
<options>unused=true,bitwise,curly,eqeqeq,forin,immed,indent=4,latedef,newcap,noarg,nonew,undef,trailing,onevar,white,browser</options> 
```

我收到此错误：

```
 Errors are: [ro.isdc.wro.extensions.processor.support.linter.LinterError@373246f3[
  line=0
  character=0
  reason=Bad option: 'unused'.
  evidence=
]] 
```

我不确定我是否使用了不正确的语法，这个选项在这个插件中不可用，或者这是一个错误。

有没有其他人让它正常工作，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:28:07.510

wro4j-1.4.7 使用旧版本的 jshint（更准确地说是从[2012 年 7 月 6 日开始](https://github.com/alexo/wro4j/blob/v1.4.7/wro4j-extensions/src/main/java/ro/isdc/wro/extensions/processor/support/linter/JsHint.java)），而未使用的选项自2012 年[8 月 20 日起引入](http://www.jshint.com/changelog/)

如果要使用最新版本的 JsHint，可以扩展 JsHintProcessor 并指定更新版本的 jshint.js

# sql - 如何让 PostgresQL 优化器在绑定参数之后构建执行计划？

> ID：12368338
> 
> 赞同：4
> 
> 时间：2012-09-11T11:09:06.770
> 
> 标签：sql, postgresql, sql-optimization

我正在为 PostgresQL 9.1 开发 Pg/PLSQL 函数。当我在 SQL 查询中使用变量时，优化器会构建一个错误的执行计划。但是，如果我用它的值替换一个变量，那么计划就可以了。例如：

```
v_param := 100;
select count(*)
  into result
  from <some tables>
 where <some conditions>
       and id = v_param 
```

3s内完成

和

```
select count(*)
  into result
  from <some tables>
 where <some conditions>
       and id = 100 
```

在 300 毫秒内执行

**在第一种情况下，优化器为v_param**的任何值生成一个固定计划。

在第二种情况下，优化器会根据指定的值生成一个计划，尽管不使用计划缓存，但它的效率要高得多。

是否可以让优化器在没有动态绑定的情况下生成计划并在每次执行查询时生成计划？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T11:22:46.930

Tom Lane 在[刚刚发布的 PostgreSQL 9.2](http://www.postgresql.org/about/news/1415/)中显着改善了这一点；请参阅[PostgreSQL 9.2 中的新增功能](http://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.2)：

> 准备好的语句曾经被优化过一次，对参数的值没有任何了解。在 9.2 中，计划程序将使用与发送的参数有关的特定计划（查询将在执行时进行计划），除非查询被执行多次并且计划程序确定通用计划不会比特定计划贵太多.

这是一个长期存在且痛苦的问题，以前需要`SET enable_...`参数、使用包装函数 using`EXECUTE`或其他丑陋的 hack。现在它应该“正常工作”。

升级。

对于其他阅读本文的人，您可以判断这个问题是否困扰您，因为`auto_explain`参数化/准备好的查询计划与您`explain`自己查询时获得的计划不同。要验证，`PREPARE ... SELECT`然后尝试`EXPLAIN EXECUTE`看看您是否有不同的计划`EXPLAIN SELECT`。

另请参阅[此先前的答案](https://stackoverflow.com/questions/10825444/postgres-query-is-very-slow-when-using-a-parameter-instead-of-an-hardcoded-strin/10828675#10828675)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T11:31:51.350

动态查询不使用缓存计划 - 因此您可以在 9.1 和更早版本中使用 EXECUTE USING 语句。正如克雷格所写，9.2 应该可以在没有这种解决方法的情况下工作。

```
v_param := 100;
EXECUTE 'select count(*) into result from <some tables> where <some conditions>
   and id = $1' USING v_param; 
```

# php - PHP MySql 分页？

> ID：12368340
> 
> 赞同：0
> 
> 时间：2012-09-11T11:09:10.063
> 
> 标签：php, mysql

分页真的让我很困惑。我的代码有效，但它只显示第一页。下一页不起作用。我只想每页显示 3 条记录。您是否必须有另一个查询才能显示第二页的结果？

```
<?php 

 // Connects to your Database 

 mysql_connect("localhost", "root", "") or die(mysql_error()); 

 mysql_select_db("db_pet") or die(mysql_error()); 

 //This checks to see if there is a page number. If not, it will set it to page 1 

 if (!(isset($pagenum))) 

 { 

 $pagenum = 1; 

 } 

 //Here we count the number of results 

 //Edit $data to be your query 

 $data = mysql_query("SELECT * FROM tb_pet") or die(mysql_error()); 

 $rows = mysql_num_rows($data); 

 //This is the number of results displayed per page 

 $page_rows = 3; 

 //This tells us the page number of our last page 

 $last = ceil($rows/$page_rows); 

 //this makes sure the page number isn't below one, or more than our maximum pages 

 if ($pagenum < 1) 

 { 

 $pagenum = 1; 

 } 

 elseif ($pagenum > $last) 

 { 

 $pagenum = $last; 

 } 

 //This sets the range to display in our query 

$max = 'limit ' .($pagenum - 1) * $page_rows .',' .$page_rows; 

 //This is your query again, the same one... the only difference is we add $max into it

 $data_p = mysql_query("SELECT * FROM tb_pet $max") or die(mysql_error()); 

 //This is where you display your query results

 while($info = mysql_fetch_array($data_p)) 

 { 

 Print $info['pet_name']; 

 echo "<br>";

 } 

 echo "<p>";

 // This shows the user what page they are on, and the total number of pages

echo " --Page $pagenum of $last-- <p>";

 // First we check if we are on page one. If we are then we don't need a link to the previous page or the first page so we do nothing. If we aren't then we generate links to the first page, and to the previous page.

 if ($pagenum == 1) 

 {

 } 

 else 

 {

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=1'> <<-First</a> ";

 echo " ";

 $previous = $pagenum-1;

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous'> <-Previous</a> ";

 } 

 //just a spacer

echo " ---- ";

 //This does the same as above, only checking if we are on the last page, and then generating the Next and Last links

 if ($pagenum == $last) 

 {

 } 

 else {

 $next = $pagenum+1;

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$next'>Next -></a> ";

 echo " ";

 echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$last'>Last ->></a> ";

 } 

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:29:41.263

```
if (!(isset($pagenum))) {
    $pagenum = 1;
} 
```

你没有在这一行的任何地方设置 $pagenum 而是它应该是

```
if (!(isset($_GET['pagenum']))) {
   $pagenum = 1;
 }else{
   $pagenum = $_GET['pagenum'];
 } 
```

它只是修复您的代码，您需要改进编写代码的方式并尝试使用 PDO 代替 mysql 函数

# jquery - Jquery splash 没有淡入 - 但正在淡出

> ID：12368343
> 
> 赞同：0
> 
> 时间：2012-09-11T11:09:22.823
> 
> 标签：jquery, fadein, fade, splash-screen, fadeout

我目前正试图让这个启动页面淡入，然后淡出。然而，它只是淡出，而不是淡入。

这是代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
$('.all').hide(); 
$('#surprisesplash').fadeIn(1500)
});
$(function(){
   setTimeout(function() {
     $('#surprisesplash').fadeOut(1000, function() {
     $('.all').fadeIn();
  });
 }, 3000);
});
</script> 
```

这是[网站。](http://camelotmusic.co.uk)

我对此很陌生，并且仍在掌握之中。任何有关语法或任何类似的帮助也将不胜感激。

汤姆：）

这是CSS

```
#surprisesplash {

    width:850px;
    height:621px;
    left:50%;
    top:50%;
    margin-top:-310.5px;
    margin-left:-425px;
    position:fixed;

    }

.all {
    display:none;

    } 
```

html:

```
 <div id="surprisesplash"><img src="/surprise2.png"></div>

    <div class ="all">

    <div id = "header">
        <div id = "music">Camelot</div>         
        <div id = "about"><a href="#">About</a></div>
        <div id = "contact"><a href="#">Contact</a></div>
        </div>
        <div id = "musicinfo">

        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. 
        Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
        Donec eu libero sit amet quam egestas semper. 
        Aenean ultricies mi vitae est. 
        Mauris placerat eleifend leo.</p></div>

        <div id = "aboutinfo">
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. 
        Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
        Donec eu libero sit amet quam egestas semper. </p></div>

            <div id = "contactinfo">
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. 
        Vestibulum tortor quam, feugiat vitae, ultricies eget. </p></div>

        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:13:12.113

它应该工作！

```
<script type="text/javascript">

    $('.all').hide();
    $('#surprisesplash').fadeIn(1500);

    setTimeout(function() {

        $('#surprisesplash').fadeOut(1000, function() {
            $('.all').fadeIn(1500);    
        });

    }, 3000);

    </script> 
```

**[提琴手](http://jsfiddle.net/toroncino/TaCKy/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:13:34.530

您可能至少应该等到它完成淡入后再开始淡出：

```
<script type="text/javascript">
    $(function(){
        $('.all').hide(); 
        $('#suprisesplash').fadeIn(1500, function() {
            $(this).delay(1500).fadeOut(1000, function() {
                $('.all').fadeIn();                     
            });
        });
    });
</script> 
```

# javascript - 网页上的 javascript 失败会导致所有其他脚本失败吗？

> ID：12368346
> 
> 赞同：2
> 
> 时间：2012-09-11T11:09:43.823
> 
> 标签：javascript

我怀疑我们页面上的第 3 方分析脚本导致我们的 Google Adwords 转换脚本（在页面后面）无法在前面提到的分析无法加载外部资源的情况下运行。

在这种情况下，Web 浏览器的标准行为是什么？即使在单独的标签中，后续脚本也会无法运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:12:14.740

如果您有多个脚本标签，则每个标签都可以自行失败，而不会影响其他标签。

但：

*   如果某些执行的脚本修改了网页，这可能会导致其他脚本因为您所做的更改而失败
*   创建具有冲突名称的全局变量也可能会造成麻烦！

* * *

编辑：在 Opera 中测试：

```
<html>
  <head>
    <script>=;</script>
    <script>alert("Hello!");</script>
  </head>
</html> 
```

此代码段将创建一个错误：

```
Inline script compilation
Syntax error at line 1 while loading: expected expression, got '=' 
```

但它仍然会显示：

```
Hello! 
```

* * *

EDIT²：所以，我上传了以下测试代码：

```
<html>
    <body id="content" bgColor="red">
        <script>?=;</script>
        <script>document.getElementById("content").bgColor = "green";</script>
    </body>
</html> 
```

并通过 Browsershots.org 执行它，所以我可以在不打开镜头的情况下看到结果；）

在职的：

*   火狐 1.5+ (XP / Ubuntu / Debian / FreeBSD)
*   Galeon 2.0.6 (Debian)
*   SeaMonkey 1.1.15+ (Debian / Win 2008 / XP)
*   Kazehakase 0.5.4 (Debian / FreeBSD)
*   Iceape 1.1.13+ (Debian)
*   Konqueror 3.5+ (Debian / FreeBSD)
*   歌剧 9.64+ (FreeBSD)
*   顿悟 2.22 (FreeBSD)
*   Icewasel 3.5.16 (Debian)
*   Chrome 1.0.154.59+ (Debian / Win 2008)
*   MSIE 9.0+ (Win 2008)
*   群 0.8+ (Win 2000 / 2008 / XP)
*   Lunascape 6.7（赢 2003）
*   卡米诺 2.1.2 (OS X 10)
*   Avant 8.02+ (Win 2003 / 2008 / XP)
*   iCab 5.0 (OS X 10)
*   OmniWeb 622 (OS X 10)
*   Safari 3.2.3+ (OS X 10)
*   不锈钢 0.8 (OS X 10)
*   傲游 3.4.2 (Win 8)
*   导航器 9 (XP)
*   网景 8.1.3 (XP)

A **+**表示它在测试中包含的所有以下版本上都成功，除了下面列出的版本

不工作

*   迪洛 0.8.6; 2.0；3.0.2 (Debian)
*   山猫 2.8.8 (Gentoo) :D
*   MSIE 4.01 (XP)
*   MSIE 5.5；6.0；7.0；8.0（赢 2008）***
*   Chrome 18.0.1025.168（Ubuntu 12.04 LTE）
*   海猴 2.12 (Ubuntu 12.04 LTE)

*** 窗口停止执行：

```
Syntax Error
Do you want to continue running scripts on this page?
[ Yes | No ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:18:32.080

我经常在某些版本的 IE 中遇到问题，其中 JS 错误似乎使整个引擎停止加载任何进一步的源（在不同的文件中，因此在不同的标签中）。我没有具体的知识，但我认为这可能取决于浏览器和该浏览器的设置。我的实践经验是它肯定会发生，并且修复指示的错误可以修复完全不相关的代码。

# mysql - 不更新表行的过程

> ID：12368347
> 
> 赞同：0
> 
> 时间：2012-09-11T11:09:48.470
> 
> 标签：mysql, sql, stored-procedures, mysqli

我有这个程序（不要太费心去弄清楚它的作用，针对名为“Modify 1,2,3,4”的评论）

```
/* PROCEDURE 1 : Post notification */
DROP PROCEDURE IF EXISTS AddNotificationOnPosts;

DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddNotificationOnPosts`(arg_from_user INT(11),arg_on_post_id INT(11),arg_in_group_id INT(11))
BEGIN
    DECLARE num_rows INT DEFAULT NULL;
    DECLARE insert_result INT DEFAULT NULL;
    DECLARE user_id INT DEFAULT NULL;

    DECLARE done INT DEFAULT 0;
    DECLARE var_user_id INT DEFAULT NULL;
        DECLARE c1 CURSOR FOR 
        SELECT user_id 
        FROM user_rights 
        WHERE user_rights.right = 101 AND user_rights.group_id  = arg_in_group_id 
        ORDER BY user_id DESC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    IF(arg_from_user IS NULL OR arg_from_user = '')
    THEN
        SELECT "0" AS response;
    ELSEIF(arg_on_post_id IS NULL OR arg_on_post_id = '')
    THEN
        SELECT "0" AS response;
    ELSEIF(arg_in_group_id IS NULL OR arg_in_group_id = '')
    THEN
        SELECT "0" AS response;
    ELSE
        SELECT count(notification_id) FROM notifications_posts 
        WHERE 
        from_user = arg_from_user AND
        on_post_id = arg_on_post_id AND
        in_group_id = arg_in_group_id
        INTO num_rows;

        /* MODIFY 1*/
        UPDATE user_info SET notifications = 1 WHERE user_id = 145;
    END IF;

    IF num_rows = 0
    THEN
        INSERT INTO notifications_posts(from_user,on_post_id,in_group_id) VALUES(arg_from_user,arg_on_post_id,arg_in_group_id);
        SELECT ROW_COUNT() INTO insert_result;

        /* MODIFY 2*/
        UPDATE user_info SET notifications = 1 WHERE user_id = 1;

        IF insert_result > 0 
        THEN

        /* MODIFY 3*/
        UPDATE user_info SET notifications = 1 WHERE user_id = 5;

            /* Increment the notifications for every user*/
            OPEN c1;
            read_loop: LOOP
                FETCH c1 INTO var_user_id;
                    IF done THEN
                        LEAVE read_loop;
                    ELSE
                        /* MODIFY 4*/
                        UPDATE user_info SET notifications = 1 WHERE user_id = 1;
                    END IF;
            END LOOP;
            CLOSE c1;

            SELECT "1" AS response;
        ELSE
            SELECT "0" AS response;
        END IF;

    ELSE
        SELECT "0" AS response;
    END IF;
END $$
DELIMITER ; 
```

这工作得很好，除了线条

```
 UPDATE user_info SET notifications = 1 WHERE user_id = 1; 
```

不会工作，但在简单的普通 SQL(phpmyadmin) 中，这个查询工作正常。问题是什么？

这个脚本是做什么的？它可以帮助我向某些用户发布通知，并且当您在**group1中发布****内容**时，必须通知所有在该组中拥有**right101的用户，例如**

 ****```
 UPDATE user_info SET notifications = notifications  + 1 WHERE user_id = var_user_id; 
```

`FOR LOOP`像我以前在 PHP 中一样使用游标

这有什么问题？程序不能更新数据？！希望我让自己可以理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:17:43.830

听起来不是冒昧，但数据是否允许您通过

```
IF num_rows = 0 
```

作为提示，如果您在 SQL Management Studio 中运行，您可以像普通代码一样使用断点调试您的 sql。我建议在该行上放置一个断点，看看它是否真的被击中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:50:53.863

这些方面的东西怎么样？我通常在 SQL Server 中工作，所以如果某些语法不正确，我深表歉意，但我发表了一些评论，所以我希望你明白要点。

```
/* PROCEDURE 1 : Post notification */ 
DROP PROCEDURE IF EXISTS AddNotificationOnPosts; 

DELIMITER $$ 
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddNotificationOnPosts`(arg_from_user INT(11), arg_on_post_id INT(11), arg_group_id INT(11)) 
BEGIN 

    -- sanity checks
    IF(arg_from_user IS NULL OR arg_from_user = '') 
    THEN 
        RETURN 0;
    ELSEIF(arg_on_post_id IS NULL OR arg_on_post_id <= 0) 
    THEN 
        RETURN 0;
    ELSEIF(arg_in_group_id IS NULL OR arg_in_group_id <= 0) 
    THEN 
        RETURN 0;
    END IF;

    BEGIN TRAN;

    -- insert if notification post does not exist
    IF NOT EXISTS
    ( 
        SELECT * 
        FROM notification_posts
        WHERE  
            from_user = arg_from_user AND 
            on_post_id = arg_on_post_id AND 
            in_group_id = arg_in_group_id 
    )               
    THEN

        INSERT INTO notifications_posts
        (
            from_user,
            on_post_id,
            in_group_id
        ) 
        VALUES
        (
            arg_from_user,
            arg_on_post_id,
            arg_in_group_id
        ); 
    END IF;

    -- update all users with 101 right

    UPDATE ui 
        SET notifications = notifications + 1
    FROM user_info ui
    JOIN user_rights ur on ur.user_id = ui.user_id
    WHERE ur.right = 101 and ur.group_id = arg_in_group_id

    COMMIT;
END $$ 
DELIMITER ; 
```****

# objective-c - 布尔值 '\x06' 而不是默认值 'YES'

> ID：12368350
> 
> 赞同：0
> 
> 时间：2012-09-11T11:09:56.100
> 
> 标签：objective-c, sqlite, boolean

执行 Sqlite 库时，在 4 或 5 步后发现 BOOL 值为 '\x06' 而不是 'YES' BOOl 值将是 '\0' ..这个 BOOL 值有什么问题？

```
BOOL success;//success value is '\x06'
NSLog(@"success:%c",success);

//If the database is present then quit.
if(success)
{
    [self OpenDB:databasePath];
    return;
}

//the database does not exists, so we will copy it to the users document directory]

//Copy the database file to the users document directory.
success = [FileManager copyItemAtPath:dbPath toPath:databasePath error:&error];//  this place success value is '\0'

//If the above operation is not a success then display a message.
//Error message can be seen in the debugger's console window.
if(success)//
    NSAssert1(0, @"Failed to copy the database. Error: %@.", [error localizedDescription]);
[self OpenDB:databasePath];

Am checking success only.... 
```

NSLOG 输出成功：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:02:37.243

尝试使用 %d 而不是 %c 或尝试将默认值设置为成功，
例如`BOOL success = NO;`

```
NSLog(@"success: %d", success); 
```

# python - 解析 URL，覆盖部分，并在 Python 中将其重新组合在一起

> ID：12368357
> 
> 赞同：4
> 
> 时间：2012-09-11T11:10:17.087
> 
> 标签：python, parsing, url

在我的程序中，我希望用户能够指定 CouchDB 数据库的 url。

我想为这个 URL 的某些部分提供合理的默认值；例如，localhost、5984 和 mushin 分别是主机、端口和路径的默认值。

urlparse.urlparse 返回一个元组子类，它也有属性访问器，但没有设置器。

主机和端口（以及稍后的用户名和密码）是解析元组的 netloc 部分的属性。这些属性只是得到。所以这个对我来说很理想的代码失败了：

```
 try:
        jane = urlparse(args[0])
    except IndexError:
        self.stdout.write('Please give a database to replicate with.\n')
        return

    if not jane.hostname:
        jane.hostname = HOST
    if not jane.port:
        jane.port = PORT
    if not jane.path:
        jane.path = DB

    url = jane.geturl() 
```

使用 tuple 接口并没有帮助，因为 netloc 没有拆分成用户名/密码/主机/端口组件，所以我还是要自己做首当其冲的工作。

有没有更好的方法来解析一个 URL，覆盖它的一部分，然后重新组合一个新的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T18:26:48.970

我用来解决这个问题的片段：

```
netloc_regex = re.compile(r"(?:([^:]+)(?::(.*))?@)?([^:]+)(?::([\d]+))?")
endpoint = # some value

scheme, netloc, path, params, query, fragment = urlparse(endpoint)
username, password, host, port = netloc_regex.search(netloc).groups()

# manipulate components here

auth = ":".join(filter(None, (username, password)))
address = ":".join(filter(None, (host, port)))
netloc = "@".join(filter(None, (auth, address)))
endpoint = urlunparse((scheme, netloc, path, params, query, fragment)) 
```

我预计会有错误和未捕获的情况，例如如果密码不是，它不会强制您必须有用户名`None`。但它可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T16:08:09.540

[您可以使用yurl](https://github.com/homm/yurl/)库在一行中完成：

```
>>> import yurl
>>> user_url = yurl.URL('http://without.port/#hash')
>>> your_defaults = yurl.URL('//:33/default')  # or URL(port=33, path='/default')

>>> print user_url.replace(*map(lambda x: x or None, your_defaults))
http://without.port:33/default#hash 
```

将空`map`部分（空字符串）替换`None`为然后作为参数传递给`user_url.replace()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T13:21:26.903

```
class DbUrl(object):

    def __init__(self, db_url):
        split = urlparse.urlparse(db_url)
        self.scheme = split.scheme
        self.hostname = split.hostname
        self.port = split.port
        self.username = split.username
        self.password = split.password
        self.database = split.path.lstrip('/')

    def __str__(self):
        auth = ":".join(filter(None, (self.username, self.password)))
        address = ":".join(filter(None, (self.hostname, str(self.port))))
        netloc = "@".join(filter(None, (auth, address)))
        return urlparse.urlunparse((self.scheme, netloc, self.database, '', '', ''))

    def __repr__(self):
        return '%s(%s)' % (self.__class__.__name__, ', '.join(
            '%s=%r' % (attr_name, attr_value)
            for attr_name, attr_value in self.__dict__.iteritems()))

    def replace(self, **kwargs):
        db_url = copy.copy(self)
        for attr_name, attr_value in kwargs.iteritems():
            assert attr_name in db_url.__dict__, 'Unknown attribute'
            setattr(db_url, attr_name, attr_value)
        return db_url 
```

和用法：

```
>>> DbUrl('postgresql://username:password@127.0.0.1:5433/postgres').replace(password='****')
DbUrl(username='username', password='****', hostname='127.0.0.1', database='postgres', scheme='postgresql', port=5433)
>>> str(DbUrl('postgresql://username:password@127.0.0.1:5433/postgres').replace(password='****'))
'postgresql://username:****@127.0.0.1:5433/postgres'
>>> str(DbUrl('postgresql://username:password@127.0.0.1:5433/postgres').replace(password=None))
'postgresql://username@127.0.0.1:5433/postgres'
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:12:31.777

在元组的操纵副本上使用[urlparse.urlunparse](http://docs.python.org/library/urlparse.html#urlparse.urlunparse)。

> 部分参数可以是任何六项可迭代的。

```
p = urlparse.urlparse(url)
l = list(p)
l[4] = "foo=bar" # manipulate query parameters
urlparse.urlunparse(l) 
```

# ios - asihttprequest 仅在尚未存储时下载

> ID：12368362
> 
> 赞同：0
> 
> 时间：2012-09-11T11:10:39.363
> 
> 标签：ios, file, if-statement, download, asihttprequest

我正在下载和检索文件`ASIHTTPRequest`。它已经可以工作了，但是现在我正在尝试中断下载，因为它已经存储了。我不知道如何实现这个问题。我想用一个 if 子句来解决它：如果文件没有被缓存，下载它，否则会中断。你介意帮我写一个合适的 Objective-C 代码吗？我有文件路径，如果需要，请比较或查看该文件。

提前致谢！

伪代码：

```
 -(IBAction) download : (id) sender {
    if (data1.pdf) { 
       // the download algorithm
    }
    else 
       break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:32:09.183

如果您的意思是如何检查文件是否存储在设备的文档目录中，那么您可以使用：

```
NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString* file = [documentsPath stringByAppendingPathComponent:@"data.pdf"];
if ([[NSFileManager defaultManager] fileExistsAtPath:file]) {
   ... 
```

# grails - Grails 2抽象域继承问题

> ID：12368364
> 
> 赞同：3
> 
> 时间：2012-09-11T11:10:48.923
> 
> 标签：grails, grails-orm

在 Grails 中使用抽象（或非抽象）继承时，以下内容对我不起作用。

很快，我的继承如下：

```
abstract BaseClass               { ... }
SomeClass      extends BaseClass { ... }
SomeOtherClass extends BaseClass { ... } 
```

然后在另一个域对象中：

```
ThirdClass {
    ...
    BaseClass baseProperty
    ...
} 
```

但是现在，当我尝试将该属性设置为 a`SomeClass`或`SomeOtherClass`实例时，Grails 会出现：

> 错误 util.JDBCExceptionReporter - 无法添加或更新子行：外键约束失败...

这不可能吗？

* * *

我也尝试过让基类不是抽象的，并尝试将`SomeClass`or`SomeOtherClass`实例转换为`BaseClass`. 它们产生相同的错误。

* * *

**更新**

我刚检查过。它适用于我添加的第一个子类。但是，一旦我尝试添加另一个子类，它就会失败。

换句话说：

```
def prop1 = new ThirdClass(baseProperty: instanceOfSomeClass).save() 
```

工作正常。但是当我尝试去做时：

```
def prop2 = new ThridClass(baseProperty: instanceOfSomeOtherClass).save() 
```

它失败。

* * *

**更新 2**

进一步调查表明，在表创建过程中出现了问题。它正确地将两个外键添加到`ThirdClass`表中，但键错误地引用：

```
CONSTRAINT `...` FOREIGN KEY (`some_id`) REFERENCES `base_class` (`id`),
CONSTRAINT `...` FOREIGN KEY (`some_id`) REFERENCES `some_class` (`id`) 
```

不知道为什么选择基类和子类之一？我试过清洁等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T12:32:12.397

首先，在域结构**之外创建您的 BaseClass。**它必须是一个外部类，放在脚本文件夹，源文件夹。

```
package com.example.model

/**
 * @author Inocencio
 */
class BaseClass {

    Date createdAt = new Date()

} 
```

现在，创建一个常规域类并扩展它。

```
package com.example.domain

import com.example.model.BaseClass

class SomeClass extends BaseClass {

    String name

    static constraints = {
        name(nullable: false)
    }

} 
```

正如你所看到的，一旦你坚持 SomeClass 一个 createdAt 字段也被填充和保存。检查测试类：

```
@TestFor(SomeClass)
class SomeClassTests {

    void testSomething() {
        def some = new SomeClass()
        some.name = "Hello There"
        some.save()

        //find it
        def someFind = SomeClass.list()[0]

        assert someFind

        assertTrue someFind.createdAt != null

//        println "Date: $someFind.createdAt"
//        println "Name: $someFind.name"
    }
} 
```

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:06:24.537

我刚刚创建了你的类结构（Grails 2.1.0），没有问题。它在模拟和单元测试时有效。从表单中保存脚手架和 SomeClass 和 ThirdClass 实例时也是如此。尝试清理你的数据库，特别是如果你没有使用“create-drop”模式。也许还有一些旧的约束。最后一件事，您没有指定错误发生的时间 - 在保存（创建或更新）时？不太可能在属性集上获得 JDBC 异常，是吗？我不记得了，但可能默认情况下简单属性没有级联，然后在保存 ThirdClass 实例之前尝试保存 SomeClass 实例。您也可以使用 hasOne 关系自动级联而不是声明简单属性，例如：

```
class ThirdClass {
    ...
    static hasOne = [baseProperty:BaseClass]
} 
```

# jms - 交流和消息优先级

> ID：12368366
> 
> 赞同：2
> 
> 时间：2012-09-11T11:10:53.027
> 
> 标签：jms, message-queue, priority-queue, qpid

我正在尝试执行以下操作，

*   消息以消息优先级到达消息代理
*   他们根据消息优先级找到进入各种队列的方式

所以 Q1 有优先级为 1 的消息 Q2 有优先级为 2 的消息，依此类推..

有没有办法让 Message Broker 处理 Q1 比其他处理更快。

*   队列之间可以有优先级吗？
*   Q1 具有比 Q2 更高的处理优先级或更好的 Q1 处理阻止其他队列被处理？
*   交换本身可以成为优先级队列，进而为其他队列提供数据吗？
*   我看到可以通过插件扩展默认交换，是否有任何东西已经实现了我的上述要求？

这是可行的吗？还是这违反了消息代理的基本理念？

使用优先消息时是否有最佳实践链接？

我确实于 8 月 28 日在 Qpid nabble 论坛上发布了此消息 - 但“此帖子尚未被邮件列表接受”。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:22:42.787

在 qpid 中，您可以将队列定义为“优先队列”。

```
session.createQueue(queueName;{create:always, node:{type:queue,
                    x-declare:{arguments:{'x-qpid-priorities':3}}}}) 
```

在优先级队列中，具有较高优先级的消息将跳过具有较低优先级的消息，并且会更早地被拾取。您无需为每个优先级定义单独的队列。

该`x-qpid-priorities`参数指定队列支持多少不同的优先级。

但请注意，基于优先级的跳跃只适用于消费队列中的消息。浏览不尊重优先级，您将看到按入队顺序排列的消息。

为每个优先级实现单独的队列并不是很有用，但如果你坚持这样做，你将不得不自己管理基于优先级的消耗。您可以实现一个消费者来检查高优先级队列中的消息，然后仅在第一个队列为空时才检查低优先级队列。

# c# - 来自另一个列表框的列表框绑定

> ID：12368371
> 
> 赞同：0
> 
> 时间：2012-09-11T11:11:05.453
> 
> 标签：c#, winforms

我的表单中有两个列表框，在这两个框之间有一个按钮。在第一个框中，我绑定了数据库中的一些数据，并且从这个列表框中我必须选择项目，并且应该在第二个列表框中显示这些选定的项目。当我单击按钮时应该会发生这种情况。我使用了以下代码。我使用了哈希表。

```
private void btnCATAdd_Click(object sender, EventArgs e)
{
    Hashtable ht = new Hashtable();
    ht.Add(lbCATallSubcat.SelectedValue.ToString(),
                                    lbCATallSubcat.Text.ToString());
    int i = 0;
    foreach (string ent in ht.Values)
    {
       string[] name = new string[lbCATallSubcat.Items.Count];
       for (i = 0; i < lbCATallSubcat.SelectedItems.Count; i++)
       {
           name[i] = lbCATallSubcat.Text;
           this.lbCATSelectedSubcat.Items.Add(name[i]);
       }
       lbCATSelectedSubcat.DisplayMember = ht.Values.ToString();
       lbCATSelectedSubcat.ValueMember = ht.Keys.ToString();
    }
} 
```

当我在第一个列表框中仅选择单个项目时它工作正常，但当从第一个列表框中选择多个项目时我无法显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:55:33.883

你需要哈希表吗？使用`LINQ`，您可以执行以下操作：

```
public ObjHoldingData
{
     public Display { get; set; }
     public Value { get; set; }
}

public class Form
{
     Form()
     {
           var dataList = new List<ObjHoldingData>();
           //TODO: Fill list with all the data you pulled

           Listbox1.Datasource = dataList;
           Listbox1.DisplayMember = "Display";
           Listbox1.ValueMember = "Value";
     }

     protected void ButtonClick()
     {
          Listbox2.Datasource = Listbox1.SelectedItems.Cast<ObjHoldingData>().ToList();
          Listbox2.DisplayMember = "Display";
          Listbox2.ValueMember = "Value";               
     }
} 
```

如果您仍然需要，`Hashtable`您可以在按钮开始时执行此操作，请单击：

```
var ht = new Hashtable(ListBox1.SelectedItems.Cast<ObjHoldingData>().ToDictionary(o => o.Display, o => o.Value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:18:10.307

使用循环在哈希表中添加所有选定的值

```
private void btnCATAdd_Click(object sender, EventArgs e)
{
    Hashtable ht = new Hashtable();
     for(int i=0;i<lbCATallSubcat.Items.Count;i++)
      {
         if(ht.items[i].Selected)
           {
             ht.Add(lbCATallSubcat.Items[i].Value.ToString(),
                                    lbCATallSubcat.Items[i].Text.ToString());
           }
       }

      i = 0;
    foreach (string ent in ht.Values)
    {
       string[] name = new string[lbCATallSubcat.Items.Count];
       for (i = 0; i < lbCATallSubcat.SelectedItems.Count; i++)
       {
           name[i] = lbCATallSubcat.Text;
           this.lbCATSelectedSubcat.Items.Add(name[i]);
       }
       lbCATSelectedSubcat.DisplayMember = ht.Values.ToString();
       lbCATSelectedSubcat.ValueMember = ht.Keys.ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:22:00.383

您应该改用`SelectedItems`该列表框上的属性`SelectedValue`。目前，您的 Hashtable 仅包含一个元素。

请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditems.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditems.aspx)

# ios - 当应用程序在越狱 iOS 设备上的后台时开始录音

> ID：12368373
> 
> 赞同：3
> 
> 时间：2012-09-11T11:11:07.823
> 
> 标签：ios, audio-recording

有没有办法在**应用程序处于后台时****开始**录音。如果我们打算打应用商店，这看起来是不可能的。但是由于我们是在越狱设备上开发的，所以我不介意使用任何私有框架或黑客。

 **此外，任何人都想出了如何防止在后台进行记录时出现红色状态栏。**

# realbasic - 使用代理身份验证

> ID：12368374
> 
> 赞同：2
> 
> 时间：2012-09-11T11:11:13.947
> 
> 标签：realbasic, realstudio

很抱歉重复发帖：我的一个朋友在邮件列表上问过这个问题，但没有人回答。

我想知道如何正确使用`ProxyAuthenticationRequired`HTTPSocket 的事件。我的意思是，如果代理要求进行身份验证，我该如何传递登录名/密码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:07:34.090

我从未在 HTTPSocket 类中使用过代理，但我认为这就是它的工作原理。

ProxyAuthenticationRequired[事件](http://docs.realsoftware.com/index.php/HTTPSocket.ProxyAuthenticationRequired)传递四个参数，代理领域作为字符串，HTTP 标头作为[InternetHeaders](http://docs.realsoftware.com/index.php/InternetHeaders)对象，用户名和密码作为字符串。用户名和密码是通过[**ByRef 传递**](http://docs.realsoftware.com/index.php/ByRef)的，所以我相信这个想法是让您自己设置这些参数，然后从 ProxyAuthenticationRequired 事件中返回 True：

```
Event ProxyAuthenticationRequired(Realm as String, Headers as InternetHeaders, ByRef Name as String, ByRef Password as String ) As Boolean
  Name = "MyUserName"
  Password = "MyPass"
  Return True
End Event 
```

# android - 查询大表并在代码中执行逻辑或执行大量查询。哪个更有效？

> ID：12368381
> 
> 赞同：1
> 
> 时间：2012-09-11T11:11:36.223
> 
> 标签：android, performance, sqlite

我有一个非常大的表，大约有 90000 行，每行包含 10 列。我需要从数据库中获取一些数据。在最坏的情况下，我需要查询 7500 行，但通常是 4000 行左右。

每行都有一个名为“LineNumber”的列，每~10行都有相同的LineNumber，从1开始......
对于所有具有相同LineNumber的行，我需要从名为的列中获取最低和最高数字评分..

我可以得到所有大约 4000 行，然后传递这些行中的每一行并执行一些逻辑来获得最高或最低。
或者我可以查询我感兴趣的每个 LineNumber 并让查询让我得到最高和最低的，这会更容易..

这两种方式中哪一种更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:16:17.290

我会接受询问。乍一看，查询看起来很简单：

```
SELECT LineNumber MIN(RATING) MAX(RATING) FROM <YOUR_TABLE> WHERE... GROUP BY LineNumber 
```

这应该给出你想要的（如果我理解正确的话）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:19:51.440

我遇到了像你这样的问题，但在我的情况下是日期，得到“之后”和“之前”......

我在代码中做了，我查询了我需要的所有数据，然后我比较了日期，在大约 40k 行中，时间接近 20 秒......

所以我尝试将逻辑放入 SQL 中，当我得到查询时，我进行比较，令我惊讶的是，现在查询，我需要在 2 秒内完成所有事情......

我的建议是先尝试将逻辑放入查询中，如果结果不满意，请在代码中尝试，看看什么是最好的。

祝你好运！

[]的伯坦

# c - 如何验证输入是否为数字？

> ID：12368403
> 
> 赞同：1
> 
> 时间：2012-09-11T11:12:24.990
> 
> 标签：c, input

我有一个任务，用户必须一个接一个地输入四个输入。它们是：字符、浮点数、浮点数、整数。

主要问题是如何检查错误并确保使用的输入有效输入？

我已经完成了字符部分，但是对于浮点数和整数，我如何检查是否只输入了数字并在输入字母或符号时打印错误消息？

可能想`isdigit()`或`isaplha()`但不确定如何实现它们的使用。

注意我已经用于`scanf()`输入但不确定如何检查输入是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:27:42.133

如果要求用户输入一个字符串、两个浮点数和一个整数，请使用

```
 char s[1024];
 float f1, f2;
 int i;

 if (sscanf (buff, "%s %f %f %d", s, &f1, &f2, &i) == 4) {
    /* Could scan values as expected. */
 } else {
    /* Input not as expected. */
 } 
```

因为`sscanf`返回成功扫描的值的数量。有关详细信息，请参阅 sscanf 手册页。请注意，扫描无界字符串`%s`在大输入时会出现问题。这可能不是家庭作业的问题，但绝对是生产软件中需要注意的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:18:36.497

使用`sscanf()`，您可以尝试将字符串的内容解析为某种数据类型，例如整数（使用`%d`格式说明符）或浮点数（使用`%g`）。

的返回值`sscanf()`告诉您它是否成功地将文本解释为所需的数据。

您还可以使用它`%n`来了解查看了多少个字符 `sscanf()`，这在您想要分多个步骤进行分析时非常方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:35:15.310

除了您在帖子中提到的使用 scanf() 之外，我不知道您现在是如何获得价值观的。所以假设你正在做这样的事情：

```
char buf[100];     
scanf("%s", buf); 
```

获取浮点/整数值。如果你想用来`isdigit()`验证它们都是数字值，你可以这样循环：

```
int i = 0;

//need to check for a . for floats
//need to check for a - for negative numbers
while(isdigit(buf[i]) || buf[i] == '.' || buf[i] == '-') 
   i++;
if(i == strlen(buf))   // if we made it to the end of the string
   //we have all digits, do all digit code
else
   //there are numbers or symbols, ask for the number again, or terminate, or whatever 
```

# python - “全局名称'forloop'未定义”在django视图中：错误

> ID：12368405
> 
> 赞同：1
> 
> 时间：2012-09-11T11:12:36.367
> 
> 标签：python

```
for hotel in hotels:
     if xyz:
       if forloop.counter <= 3:
        similar_venues.append(hotel)
        break; 
```

它给了我以下错误：未定义全局名称'forloop'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:26:26.537

Python 不会自动创建 for 循环计数器，您必须自己创建。

您可以使用[enumerate](http://docs.python.org/library/functions.html#enumerate)来做到这一点。

```
for counter, hotel in enumerate(hotels):
     if xyz:
       if counter <= 3:
        similar_venues.append(hotel)
        break 
```

（也可以像这样组合“if”条件：`if xyz and counter <= 3:`如果第一个条件为假，则不会测试第二个条件。）

# android - 只播放一次闹铃

> ID：12368408
> 
> 赞同：1
> 
> 时间：2012-09-11T11:12:53.863
> 
> 标签：android

我有一个可以工作的警报应用程序，但想添加一个功能，用户可以在“连续播放警报直到确认”和“播放警报声一次”之间进行选择。

然后我查看了我的闹钟响铃代码，期望看到某种“重复”标志，我可以选择删除它 - 但没有。那么如何只播放一次警报声呢？

我现有的代码如下所示：

```
private void playSound(Context context, Uri alert) 
{
    mMediaPlayer = new MediaPlayer();
    try 
    {
        mMediaPlayer.setDataSource(context, alert);
        final AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0)
        {
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
            mMediaPlayer.prepare();
            mMediaPlayer.start();
        }
    } 
    catch (IOException e) 
    {
        // oops!
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:56:34.470

实际上，在每个警报声中都有一个名为 ANDROID_LOOP 的 FLAG，它会强制您的声音循环播放。不幸的是，即使使用 MediaPlayer.setLooping(false)，您也无法更改该标志。但是您仍然可以在一段时间后手动停止播放器。例如 getDuration 会给你声音的长度。

```
int duration = mMediaPlayer.getDuration();

Runnable stopSoundRunnable = new Runnable() {

            @Override
            public void run() {
                  mMediaPlayer.stop();
            }
        };

mSoundHanlder.postDelayed(stopSoundRunnable, duration); 
```

# java - 在 Scala 类中使用 java.util.Map[String, String] 类型的 arg 覆盖 java 方法

> ID：12368409
> 
> 赞同：1
> 
> 时间：2012-09-11T11:12:53.837
> 
> 标签：java, scala, interop, overriding

我有一个用 Java 编写的抽象类：

```
abstract class AbstractJavaClass {
  abstract public Map<String, String> method(Map<String, String> params);
} 
```

我正在尝试在scala中扩展这个类：

```
class ScalaConcreteClass extends AbstractJavaClass {
  override def method(params: ...): ...
} 
```

首先，我在 scala 中将 type (...) 写为 Map[String, String] （只是不知道要尝试什么:)），但它说：`(Note that java.util.Map[java.lang.String,java.lang.String] does not match Map[String,String])`

我应该如何覆盖这些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:17:29.587

看到[这个问题](https://stackoverflow.com/questions/6559938/scala-string-vs-java-lang-string-type-inference)。我认为您想编写`Map[java.lang.String, java.lang.String]`（甚至`java.util.Map[java.lang.String, java.lang.String]`）（实际上正如编译器所说）。

# python - 带字典路径的参数

> ID：12368411
> 
> 赞同：1
> 
> 时间：2012-09-11T11:13:00.217
> 
> 标签：python, json

我对 Python 很陌生，对 Python 中的数据结构不是很熟悉。

我正在用 Python 编写一个自动 JSON 解析器，使用 Ultra-JSON 将 JSON 消息读入字典：

```
jsonObjs = ujson.loads(data) 
```

现在，如果我尝试类似： `jsonObjs[param1][0][param2]`它工作正常但是，我需要从外部源获取路径（我从数据库中读取它），我们最初认为我们只需在数据库中写入：

```
myPath = [param1][0][param2] 
```

然后尝试访问：

```
jsonObjs[myPath] 
```

但在几次失败后，我意识到我正在尝试访问：

```
jsonObjs[[param1][0][param2]] 
```

有没有办法在不解析 myPath 的情况下解决这个问题？

非常感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:16:23.960

以保留类型信息的格式（例如 JSON）存储密钥，然后[用于`reduce()`对结构执行递归访问](https://stackoverflow.com/a/11475052/20862)。

# c# - TextBox 不会在空格键上触发 KeyDown 事件

> ID：12368417
> 
> 赞同：1
> 
> 时间：2012-09-11T11:13:19.330
> 
> 标签：c#, wpf, keyboard

我有文本框捕捉这样的 KeyDown 事件：

```
 <Style TargetType="TextBox">
        <EventSetter Event="KeyDown" Handler="TextBoxInput"/>
    </Style> 
```

它适用于除空格键之外的所有键和组合键。即使带有修饰符的空间也可以，只有空间不是我的方法。

我可以在文本框上更改什么以仅在空格键上触发事件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:17:55.610

使用`PreviewKeyDown`事件而不是`KeyDown`.

```
<EventSetter Event="PreviewKeyDown" Handler="TextBoxInput"/> 
```

你可以使用[这篇文章](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/a96cf83c-9af7-4465-907b-7873104a8e1e)作为支持。

# python - 使用函数创建类：传递参数

> ID：12368420
> 
> 赞同：-1
> 
> 时间：2012-09-11T11:13:31.563
> 
> 标签：python, class, design-patterns

```
def cclass(arg1):
...     if True:
...         class klass (object):
...             print arg1
...             def __init__(self,arg1):
...                 self.arg1=arg1
...             def klassfunc(self):
...                 arg2=self.arg1
...                 print arg2
...     return klass() 
```

此代码自然会产生错误消息：

```
>>> test=cclass('astring')
astring
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "<interactive input>", line 10, in cclass
TypeError: __init__() takes exactly 2 arguments (1 given) 
```

我的问题是：我应该如何将函数 arg1 传递给班级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:15:01.517

只需将它传递给构造函数，就像对任何其他 python 类所做的那样。:-)

```
return klass(arg1) 
```

# c# - C# 在引用中调用 exe

> ID：12368422
> 
> 赞同：1
> 
> 时间：2012-09-11T11:13:37.330
> 
> 标签：c#, asp.net

我在我的 asp.net 项目中添加了一个 exe 文件作为参考。但似乎我无法使用进程触发它。目前我正在使用以下代码来触发我的 exe。但它似乎只在我给出 exe 的完整路径时才有效，例如“c:/file/myEXE.exe”

```
 process.StartInfo.FileName = "myEXE.exe";
    process.StartInfo.Arguments = path;
    process.StartInfo.CreateNoWindow = true;
    process.Start();
    process.WaitForExit();
    int exitCode = process.ExitCode; 
```

我应该如何对其进行编码，以便该过程能够从我的参考中触发我的 exe？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:07:54.270

这里要说明几点。

首先，正如其他人在评论中所说，您不需要添加可执行程序集作为对项目的引用，只需将其复制到构建时的 bin 文件夹中。只需将可执行文件添加为项目项，右键单击它并选择`Properties`查看“属性”窗口并将`Copy to Output Directory`值更改为`Copy if Newer`. 现在，每当您构建项目时，该文件都会被复制到 bin/output 文件夹中。

其次，正如@trailmax 在评论中也提到的那样，您可能需要提供可执行文件的完整路径以确保它肯定可以找到它。

最后，当您提到这是一个 ASP.NET 项目时，您可能想查看这篇知识库文章：

[无法从 ASP.NET 启动进程](http://support.microsoft.com/kb/555134)

我并不是说这是您的问题的原因，但这是有可能的，因为如果您在 IIS 下运行，您可能没有启动新进程所需的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:09:56.087

是的，彼得，

谢谢你的建议，现在我可以让它工作了。

```
public string checkPlatform(string path)
{
    //new process
    Process process = new Process();
    //required to change the path during hosting.
    string exelocation = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
    process.StartInfo.FileName = exelocation+"\\BitCheck.exe";
    process.StartInfo.Arguments = path;
    process.StartInfo.CreateNoWindow = true;
    process.Start();
    process.WaitForExit();
    int exitCode = process.ExitCode;
    switch (exitCode)
    {
        case 0:
            return "X86";
        case 1:
            return "X64";
        case 2:
            return "ANY";
        case 3:
            return "ERROR";
    }
    return "ERROR";
} 
```

基本上，我只需要这里的这一行来获取当前的工作目录路径

```
string exelocation = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase); 
```

感谢您的建议和关注

干杯

# mysql - 如何将两个日期之间的间隔设为“yyyy:mm:dd hh:mm:ss”

> ID：12368423
> 
> 赞同：0
> 
> 时间：2012-09-11T11:13:43.367
> 
> 标签：mysql, database, datetime, time

如何将两个日期之间的间隔设为“yyyy:mm:dd hh:mm:ss”

如果我使用

```
 SELECT TIMEDIFF(UploadedDate,Verification_Date) AS 'delay' from table; 
```

结果是

```
 25:20:13 
```

我可以将其视为 0000:00:01 01:20:13 吗？

有人知道这个查询吗？

# java - Google App Engine Warfile 目录结构

> ID：12368427
> 
> 赞同：0
> 
> 时间：2012-09-11T11:13:57.913
> 
> 标签：java, google-app-engine, gwt, google-eclipse-plugin

我刚刚安装了 Google Eclipse 插件并创建了我的第一个测试 Web 应用程序项目（使用 GWT 和 GAE SDK）。该插件自动生成了一个项目，其中包含一个`war/`目录，其中包含一些特殊的子目录和文件。对其中许多的在线搜索只返回了它们的其他类似自动生成，但没有任何关于它们是什么或它们做什么的真正解释：

*   `war/WEB-INF/deploy/<myapp>/rpcPolicyManifest/**`
*   `war/WEB-INF/deploy/<myapp>/symbolMaps/**`
*   `war/<myapp>/symbolmanifest.json`
*   `gwt-unitCache/**`

对于将要部署到 GAE 的 GWT WAR 的正确结构应该是什么，我也有点困惑。应该打包在什么内容下`war/WEB-INF/`？根目录下应该打包什么内容`war/`？GWT/GAE WAR 的任何其他特殊注意事项？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:08:10.057

**war/**文件夹中的几乎所有内容都部署到 GAE。插件使用的临时文件除外，例如 war/WEB-INF/appengine-generated/

**war/WEB-INF/**文件夹包含设置 GAE 所需的内容。这包括 servlet、队列、日志记录、RPC 等的 GAE 设置。它还包括用于服务器端的库和一些 GWT 映射。

请注意，GWT 库仅在编译时需要，而不是在服务器上。您可以将所有 GWT 库放在 war/ 之外的 lib/ 文件夹中。

* * *

*   战争/WEB-INF/deploy/<myapp>/rpcPolicyManifest/**

[RPC](https://developers.google.com/web-toolkit/doc/2.1/tutorial/RPC)用于直接从 GWT 代码调用服务器方法。GWT/GAE 旨在允许 RPC 开箱即用。我的猜测是 RPC 策略清单文件的存在足以配置 GAE 以允许 GWT 代码使用 RPC，所以他们只是把它放在那里所以你不必担心它。

* * *

*   战争/WEB-INF/deploy/<myapp>/symbolMaps/**

插件自动添加这里需要的东西，所以你不用碰它。但 symbolMaps 似乎是 GWT 使用的字典，用于根据浏览器版本提供不同版本的应用程序。我的一个符号映射文件中的前几行如下所示：

```
# { 1 }
# { 'user.agent' : 'gecko1_8' }
# jsName, jsniIdent, className, memberName, sourceUri, sourceLine
Duration,,com.google.gwt.core.client.Duration,,jar:file:/opt/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201208080121-rel-r42/gwt-2.4.0/gwt-user.jar!/com/google/gwt/core/client/Duration.java,21 
```

鉴于用户代理是 gecko 1.8，它指定如何解释 JavaScript 符号“持续时间”。每个浏览器编译（FF、Opera、Safari、IE 等）都有自己的映射，允许 GWT 编译器针对浏览器进行优化。

* * *

*   战争/<myapp>/symbolmanifest.json

我的项目中没有这个文件，但它可能与上面提到的 GWT 符号映射有关。我的猜测是它定义了 GWT 应用程序使用的 JavaScript 符号。如果您从中发布一个片段，我们将能够查看是否是这种情况。

* * *

*   gwt-unitCache/**

这是一个仅在开发期间使用的缓存文件夹。请参阅[GWT 2.4.0 的发行说明](https://developers.google.com/web-toolkit/release-notes?hl=ru#Release_Notes_2_4_0)：

> 持久单元缓存：GWT 编译器和开发模式现在缓存运行之间的编译工件。这可以加快迭代开发的启动时间。

# c# - 将字符串数组转换为字典 c# 然后输出到 Visual Studio

> ID：12368428
> 
> 赞同：0
> 
> 时间：2012-09-11T11:13:59.913
> 
> 标签：c#, arrays, string, visual-studio, dictionary

我有一个这样的字符串数组：

```
[0]板1
[1]发送的消息75877814
[2]ISR 计数682900312
[3]总线错误0
[4]数据错误0
[5]接收超时0
[6]TX Q 溢出0
[7]没有处理程序失败0
[8]驱动故障0
[9]虚假 ISR0

```

只是为了澄清方括号中的数字表示数组中的字符串位置

我想将字符串数组转换为字典，每个数字左侧的字符串作为键，例如（ISR Count，682900312）

然后，我想将字典中的特定条目输出到 Visual Studio 中的文本框/表格（哪个更好），最好将数字左对齐。

原谅我的天真，我是新手！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:36:14.497

很简单。久经考验

```
string[] arr = new string[] { "Board1", "ISR Count682900312", ... };

var numAlpha = new Regex("(?<Alpha>[a-zA-Z ]*)(?<Numeric>[0-9]*)");

var res = arr.ToDictionary(x => numAlpha.Match(x).Groups["Alpha"], 
                           x => numAlpha.Match(x).Groups["Numeric"]); 
```

![在此处输入图像描述](../Images/0da67821687f3a5d565ba2bcc05dff41.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:27:25.263

字符串[] 字符串 = { "Board1", "Messages232" };

```
 Dictionary<string, int> dictionary = new Dictionary<string, int>();

        foreach (var s in strings)
        {
            int index = 0;
            for (int i = 0; i < s.Length; i++)
            {
                if (Char.IsDigit(s[i]))
                {
                    index = i;
                    break;
                }
            }
            dictionary.Add(s.Substring(0, index), int.Parse(s.Substring(index)));
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T11:35:34.003

```
 var stringArray = new[]
                          {
                              "[0]Board1",
                              "[1]Messages Transmitted75877814",
                              "[2]ISR Count682900312",
                              "[3]Bus Errors0",
                              "[4]Data Errors0",
                              "[5]Receive Timeouts0",
                              "[6]TX Q Overflows0",
                              "[7]No Handler Failures0",
                              "[8]Driver Failures0",
                              "[9]Spurious ISRs0"
                          };

    var resultDict = stringArray.Select(s => s.Substring(3))
        .ToDictionary(s =>
                      {
                          int i = s.IndexOfAny("0123456789".ToCharArray());
                          return s.Substring(0, i);
                      },
                      s =>
                      {
                          int i = s.IndexOfAny("0123456789".ToCharArray());
                          return int.Parse(s.Substring(i));
                      }); 
```

编辑：如果括号中的数字不包含在字符串中，请删除`.Select(s => s.Substring(3))`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:35:47.060

干得好：

```
string[] strA = new string[10]
{
    "Board1",
    "Messages Transmitted75877814",
    "ISR Count682900312",
    "Bus Errors0",
    "Data Errors0",
    "Receive Timeouts0",
    "TX Q Overflows0",
    "No Handler Failures0",
    "Driver Failures0",
    "Spurious ISRs0"
};
Dictionary<string, int> list = new Dictionary<string, int>();

foreach (var item in strA)
{
    // this Regex matches any digit one or more times so it picks
    // up all of the digits on the end of the string
    var match = Regex.Match(item, @"\d+");

    // this code will substring out the first part and parse the second as an int
    list.Add(item.Substring(0, match.Index), int.Parse(match.Value));
} 
```

# c# - 如何在 C# 中使用 hostip.info 服务？

> ID：12368429
> 
> 赞同：0
> 
> 时间：2012-09-11T11:14:02.697
> 
> 标签：c#, asp.net

我有一个名为 getIP() 的方法，它将客户端 ip 作为字符串返回。

如何使用此 IP 获取使用[此](http://www.hostip.info/use.html)服务的客户端的位置。

这就是我显示客户端 IP 地址的方式。

```
string IP = getIP();
lblIPAddress.Text = "IP " + IP; 
```

我如何包括客户的位置？

```
i.e. lblIPAddress.Text = "IP " + IP+ "location" ;) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:45:11.543

您可以在下面找到一个非常简单的片段，我前段时间用来从该 API 的 XML 端点获取数据（我相信 API 没有更改，因此它仍然应该工作）：

```
string city;
string country;
string countryCode;
decimal longitude;
decimal latitude;

XmlTextReader hostIPInfoReader = new XmlTextReader("http://api.hostip.info/?ip=" + IP);
while (hostIPInfoReader.Read()) {
    if (hostIPInfoReader.IsStartElement()) {
        if (hostIPInfoReader.Name == "gml:name")
            city = hostIPInfoReader.ReadString();

        if (hostIPInfoReader.Name == "countryName")
            country = hostIPInfoReader.ReadString();

        if (hostIPInfoReader.Name == "countryAbbrev")
            countryCode = hostIPInfoReader.ReadString();

        if (hostIPInfoReader.Name == "gml:coordinates") {
            string[] coordinates = hostIPInfoReader.ReadString().Split(new char[] { ',' });
            longitude = decimal.Parse(coordinates[0]);
            latitude = decimal.Parse(coordinates[1]);
        }
    }
} 
```

这段代码当然可以改进，但我相信这对你来说是一个很好的起点。

# javascript - 如何使用自定义助手（车把）实现嵌套的每个循环

> ID：12368433
> 
> 赞同：4
> 
> 时间：2012-09-11T11:14:06.877
> 
> 标签：javascript, ember.js, handlebars.js

我正在尝试与 Ember.js 和 Handlebar.js 一起构建一个表。不幸的是，我陷入了如何构建由带有 valueBinding 的 Ember.TextArea 组成的单元格的方式上。

思路如下。有一个域模型项目，它有很多条目（1 到 n 关系）。两个域模型都是不同的对象并且没有嵌入（条目没有嵌入到项目中）。

每个项目都有一个名为keys 的数组，其中包含多个字符串（例如'a'、'b'、'c'、...）。此外，每个条目都包含一个元素数组。每个元素还具有上述键之一作为属性键。请参阅下面的详细模型。

**楷模**

*项目*

```
{ keys: ['a', 'b', 'c'] } 
```

*参赛作品*

```
{
  parameters: [
    {
      key: 'a',
      value: 'aaaa'
    },
    {
      key: 'b',
      value: null
    },   
    {
      key: 'c',
      value: '123'
    }
  ]
} 
```

目标是最终拥有一个 HTML 表，其中包含项目的每个键的列（在上述情况下，将有 3 列，标题为“a”、“b”、“c”）。对于现在与项目关联的每个条目（换句话说，在后台加载到 ArrayController 中），必须有一行。现在棘手的部分来了：每个单元格必须绑定到“参数”数组的适当元素（单元格的内容应该是 Ember.TextArea）。

```
|| a                                                             || b  || c ||
-----------------------------------------------------------------------------
| entry 1 binding to element of parameters array where key = 'a' | ... | ... |
----------------------------------------------------------------------------
| entry 2 binding to element of parameters array where key = 'a' | ... | ... |
----------------------------------------------------------------------------- 
```

**方法一**

构建表头显然非常简单，当然可以毫无问题地工作：

```
<table>
   <thead>
     <tr>
       {{#each key in project.keys}}
         <th>{{key}}</th>
       {{/each}}
     </tr>
   </thead>

   <tbody>
     ...
   <tbody>
</table> 
```

我不知道如何构建代码的部分是正文。迭代数组控制器中的条目可能是的，但是如何绑定到适当的元素 - 我不知道。棘手的是，绑定是建立在正确的元素上的。例如，在键“a”的列中，绑定必须是参数数组的元素，其中 element.key === 'a'。

```
<tbody>
  {{#each entry in App.entriesController}}
    <tr>
      {{#each key in project.keys}}
        ???
      {{/each}}
    </tr>
  {{/each}}
</tbody> 
```

我想过使用把手助手，但发现 Ember.js 确实（与把手.js 的文档不同）不传递对象本身，它只传递属性的名称，然后可以使用该名称来获取值. 不幸的是，对于一个数组，我看不到如何获取当前在每个循环中处理的数组的条目。

这个想法是将条目和密钥传递给助手，然后这个返回一个 Ember.TextArea 的实例，该实例绑定到 entry.parameters 数组的正确元素。

注意：通过迭代 project.keys 我们可以保证键的顺序与标题中的相同（相同的迭代顺序）。

任何其他想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T03:45:19.750

这里最好的解决方案是编写一个自定义车把助手。不幸的是，现在制作自定义绑定助手并不容易。这里有一个旧的 PR，我们想更新并开始为 1.0 [https://github.com/emberjs/ember.js/pull/615](https://github.com/emberjs/ember.js/pull/615)工作。您也许可以从中获得一些想法来进行自己的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:05:31.197

疯狂的浴缸想法：您可以使用 Ember.Object 作为代理，在其上动态定义线性化属性（在 Coffeescript 中为了理智，名称仅来自 Braindump）：

```
 TheProxy = Ember.Object.extend
      fill: (projects, entries) ->
         for project in projects
           entry = # find entry for project
           for key,value of entry
             this.set "value_for_#{project.id}_#{key}", value 
```

之后，您可以以类似的方式生成模板，方法是生成 {{value_for_xxx_yyyy}} 绑定并将填充的 TheProxy 实例绑定到它。

# c# - 使用 Office 2003 在 64 位 pc 中使用 c# 读取 excel 文件

> ID：12368434
> 
> 赞同：2
> 
> 时间：2012-09-11T11:14:13.383
> 
> 标签：c#, excel

我有一个桌面应用程序，它必须读取一个 excel 文件（.xls 或 .xlsx）。

当应用程序安装在带有 Office 2003 的 Windows 7 电脑中时，我无法使用 Microsoft.ACE.OLEDB.12.0 读取 excel 文件。我收到 Microsoft.ACE.OLEDB.12.0 未注册的消息。使用 Microsoft.JET.OLEDB.4.0。也无济于事。

那么我们如何读取excel文件呢？我知道一种选择是构建我的应用程序，强制它编译为 (x86)，以便它作为 32 位应用程序运行。好的，假设我不想这样做，还有其他选择吗？感谢您的任何回答。欢迎任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:29:33.923

您需要安装 64 位 JET/ACE 驱动程序：

[http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:51:25.117

听起来像是[Npoi](http://npoi.codeplex.com/)的工作。可以处理 xls 和 xlsx 文件的独立库。无需使用那些 Jet 库。好的，这将涉及一些工作，但是您从用户机器上无法控制的东西中删除了依赖项。

# ruby-on-rails - ROR3 中的“此代码是 DRY”是什么意思？

> ID：12368436
> 
> 赞同：2
> 
> 时间：2012-09-11T11:14:20.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 ROR3.0 的新手，我读了很多地方说“此代码是 DRY”或与 DRY 相关的内容我想知道如何使代码 DRY ？我的代码有必要干燥吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:26:51.707

DRY 代表不要重复自己。如果可能的话，最好在大多数编码环境中使用 DRY 以使其易于维护（并防止复制粘贴键磨损！）

我建议在重复代码的地方提取公共代码并提取到方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:25:29.923

下面的 wiki 是一个很好的地方，可以查看许多这些速记表达式的来源：

[http://c2.com/cgi/wiki?DontRepeatYourself](http://c2.com/cgi/wiki?DontRepeatYourself)

在这种情况下，“DRY”只是意味着“不要重复自己”。这个简单的指导方针导致编写更小、更好的分解方法，这些方法可以在多个内容中重用。这反过来又导致更容易维护、更好的可测试性等。

# android - 手指离开按钮时的事件

> ID：12368438
> 
> 赞同：2
> 
> 时间：2012-09-11T11:14:33.087
> 
> 标签：android

> **可能重复：**
> [Android 中的 onPress/onRelease](https://stackoverflow.com/questions/4597513/onpress-onrelease-in-android)

当用户按住按钮时，按钮会改变颜色，当用户离开按钮时，按钮会恢复到正常状态。

是否有一个事件可以捕捉到这一点？

我尝试搜索类似 button.onStateChanged 的​​东西，但没有运气..

编辑：当用户长按我想开始自动增量

```
// Auto increment for a long click
        increment.setOnLongClickListener(new View.OnLongClickListener() {
            public boolean onLongClick(View a) {
                autoIncrement = true;

                repeatUpdateHandler.removeCallbacks(mRepeatUpdateHandler);
                repeatUpdateHandler.post(mRepeatUpdateHandler);

                return false;
            }
        }); 
```

当用户用手指离开按钮时，我想停止自动增量

```
increment.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP && autoIncrement) {

                //Stop autoincrement

                repeatUpdateHandler.removeCallbacks(mRepeatUpdateHandler);
                autoIncrement = false;
            }

            return false;
        }
    }); 
```

这是处理程序：

```
RepetetiveUpdater mRepeatUpdateHandler = new RepetetiveUpdater();
 ....

class RepetetiveUpdater implements Runnable {
    public void run() {
        if (autoIncrement) {
            increment();
            repeatUpdateHandler.postDelayed(new RepetetiveUpdater(),
                    REPEAT_DELAY);
        } else if (autoDecrement) {
            decrement();
            repeatUpdateHandler.postDelayed(new RepetetiveUpdater(),
                    REPEAT_DELAY);
        }
    }
} 
```

但这仅在用户将手指放在按钮上方时才有效，当他将其拖动到屏幕上的其他位置时，计数器会继续运行，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:00:59.107

我不知道我下面的代码是否完全符合您的要求。将调用 increment 方法，直到用户停止点击或他的手指不在视图的边界内。一切都在`onTouch`回调中完成：

```
 final Rect r = new Rect();
    // this is the platform's default timeout for recognizing a long press
    final long LONG_PRESS_TIMOUT = ViewConfiguration.getLongPressTimeout();
    increment.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            final int action = event.getAction();
            // get the View's Rect relative to its parent
            v.getHitRect(r);
            // offset the touch coordinates with the values from r
            // to obtain meaningful coordinates
            final float x = event.getX() + r.left;
            final float y = event.getY() + r.top;
            switch (action) {
            case MotionEvent.ACTION_DOWN:
                // simulate a long press
                // if the user stops pressing before the long press timeout
                // expires this will be canceled
                repeatUpdateHandler.postDelayed(mRepeatUpdateHandler,
                        LONG_PRESS_TIMOUT);
                break;
            case MotionEvent.ACTION_MOVE:
                // if the touch coordinates are not in the Views' rect then
                // cancel any Runnable
                if (!r.contains((int) x, (int) y)) {
                    repeatUpdateHandler
                            .removeCallbacks(mRepeatUpdateHandler);
                }
                break;
            case MotionEvent.ACTION_UP:
                // the user raised his finger, cancel the Runnable
                repeatUpdateHandler.removeCallbacks(mRepeatUpdateHandler);
                break;
            }
            return false;
        }
    }); 
```

和`Runnable`部分：

```
class RepetetiveUpdater implements Runnable {
    public void run() {
        increment();
        repeatUpdateHandler.postDelayed(mRepeatUpdateHandler, 1000);
    }
}

int i = 0;

public void increment() {
    Log.e("INCREMENT", "Value " + (++i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:27:10.617

您可以以不同的方式使用 onTouch() 或 onFocusChange() 侦听器作为您的按钮。我不确定您是否只尝试一次。

例如：

```
 button.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub

        }
    });

    button.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:34:13.240

```
@Override
 public boolean onTouch(View view, MotionEvent motionEvent) {
  // TODO Auto-generated method stub

  textX.setText("x: " + String.valueOf(motionEvent.getX()));
  textY.setText("y: " + String.valueOf(motionEvent.getY()));

  int action = motionEvent.getAction();

  switch (action){
  case MotionEvent.ACTION_DOWN:
   textEvent.setText("ACTION_DOWN");      
   break;
  case MotionEvent.ACTION_MOVE:
   textEvent.setText("ACTION_MOVE");
   break;
  case MotionEvent.ACTION_UP:
   textEvent.setText("ACTION_UP");          // you need this!
   break;
  case MotionEvent.ACTION_CANCEL:
   textEvent.setText("ACTION_CANCEL");
   break;
  default:
   textEvent.setText("Unknown!");
  }

  return true; //means event have been processed
 } 
```

# r - 在 R 包中定义组通用函数

> ID：12368439
> 
> 赞同：4
> 
> 时间：2012-09-11T11:14:39.290
> 
> 标签：r, s4

我无法在我正在编写的 R 包中定义组泛型。

这是一个相当简单的例子：

```
setGroupGeneric('FooBarFunctions', function(x, y) NULL)

setGeneric('foo', group = 'FooBarFunctions', function(x, y) standardGeneric('foo'))
setGeneric('bar', group = 'FooBarFunctions', function(x, y) standardGeneric('bar'))

setMethod('foo', signature(x = 'ANY', y = 'ANY'),
function(x, y)
  cat(sprintf('foo,ANY (%s),ANY (%s)\n', x, y)))

setMethod('bar', signature(x = 'ANY', y = 'ANY'),
function(x, y)
  cat(sprintf('bar,ANY (%s),ANY (%s)\n', x, y)))

setMethod('FooBarFunctions', signature(x = 'character', y = 'ANY'),
function(x, y)
  cat(sprintf('FooBarFunctions,character (%s),ANY (%s)\n', x, y))) 
```

如果我将此代码粘贴到 R 终端中，那么一切都会按预期工作：

```
> foo(1, 2)
foo,ANY (1),ANY (2)
> bar(1, 2)
bar,ANY (1),ANY (2)
> foo('a', 2)
FooBarFunctions,character (a),ANY (2)
> bar('a', 2)
FooBarFunctions,character (a),ANY (2) 
```

但是，一旦我尝试将其构建到一个包中，我就会遇到以下错误：

```
$ R CMD INSTALL .
* installing to library ‘~/R/x86_64-pc-linux-gnu-library/2.15’
* installing *source* package ‘anRpackage’ ...
** R
** preparing package for lazy loading
** help
No man pages found in package  ‘anRpackage’ 
*** installing help indices
** building package indices
** testing if installed package can be loaded
**Error in .setupMethodsTables(generic) : 
  trying to get slot "group" from an object of a basic class ("NULL") with no slots**
Error: loading failed
Execution halted
ERROR: loading failed
* removing ‘~/R/x86_64-pc-linux-gnu-library/2.15/anRpackage’ 
```

我正在使用 package.skeleton() 的默认输出，并添加了：

```
exportPattern("^[[:alpha:]]+") 
```

进入命名空间文件

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:49:06.203

如果我在加载时运行代码，我可以让它工作。这里的关键是`evalqOnLoad`调用

```
evalqOnLoad({

    setGroupGeneric('FooBarFunctions', function(x, y) NULL)

    setGeneric('foo', group = 'FooBarFunctions', function(x, y) standardGeneric('foo'))
    setGeneric('bar', group = 'FooBarFunctions', function(x, y) standardGeneric('bar'))

    setMethod('foo', signature(x = 'ANY', y = 'ANY'),
    function(x, y)
      cat(sprintf('foo,ANY (%s),ANY (%s)\n', x, y)))

    setMethod('bar', signature(x = 'ANY', y = 'ANY'),
    function(x, y)
      cat(sprintf('bar,ANY (%s),ANY (%s)\n', x, y)))

    setMethod('FooBarFunctions', signature(x = 'character', y = 'ANY'),
    function(x, y)
      cat(sprintf('FooBarFunctions,character (%s),ANY (%s)\n', x, y)))

}) 
```

在一个包'bla'中：

```
> require( bla )
Le chargement a nécessité le package : bla
> foo(1, 2 )
foo,ANY (1),ANY (2)
> bar(1, 2 )
bar,ANY (1),ANY (2)
> foo("a", 2 )
FooBarFunctions,character (a),ANY (2)
> bar("a", 2 )
FooBarFunctions,character (a),ANY (2) 
```

# java - 在使用 Spring MVC 和 Spring Security 的多租户 webapp 中使用表单登录

> ID：12368441
> 
> 赞同：1
> 
> 时间：2012-09-11T11:14:42.960
> 
> 标签：java, spring-mvc, spring-security, multi-tenant

`Spring Security`我使用and创建了一个小而简单的 webapp `SpringMVC`，我正在尝试将其转换为多租户应用程序。
我想要的概念是重用我拥有的实际 JSP 并根据我根据 URL 的路径确定的配置更改它们的内容。

示例：
客户 #1 (abc) - URL： http: [//mydomain.com/abc/login.html](http://mydomain.com/abc/login.html)
客户 #2 (xyz) - URL： http: [//mydomain.com/xyz/login.html](http://mydomain.com/xyz/login.html)

因此，“租户”的名称是页面路径的前缀。

我修改我的控制器是这样的：

```
@Controller
@RequestMapping("/{customer:[a-zA-Z0-9]+}/login.htm")
public class LoginController 
{
    private static final Logger logger = Logger.getLogger(LoginController.class);

    @RequestMapping
    @ReadOnlyRequest
    public String login(@PathVariable("customer") String customer, HttpServletRequest request) 
    {
        // Do some 'customer' related actions here

        return "login"; // Map to the 'login.jsp' view
    }
} 
```

我的视图解析器配置是：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
   <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
   <property name="prefix" value="/WEB-INF/jsp/" />
   <property name="suffix" value=".jsp" />
</bean> 
```

到目前为止，我有以下`form-login`配置：

```
<form-login 
   login-page="/login.htm"
   authentication-failure-url="/login.htm?error=true"
   login-processing-url="/login_process"
   default-target-url="/index.jsp"
   always-use-default-target="true"
/> 
```

但我不知道如何转换它以支持我的更改。

有没有办法将其转换为：

```
<form-login 
  login-page="/${customer}/login.htm"
  authentication-failure-url="/${customer}/login.htm?error=true"
  login-processing-url="/${customer}/login_process"
  default-target-url="/index.jsp"
  always-use-default-target="true"
/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:49:57.307

一种可能的想法是使用 URL 重写而不是手动处理租户标识符。通过这种方式，您可以将租户处理逻辑与您的代码完全解耦，例如，如下所示：

*   您定义一个入站重写规则，该规则将租户标识符转换为请求属性并将其保存为请求属性`/abc/login.html`。`/login.html`

*   您定义一个出站规则，将当前租户标识符附加到正在写入响应的 URL。我认为 Spring Security 在发送重定向时应该尊重这样的规则（如果没有，你可以定义一个 custom `RedirectStrategy`）。

虽然我没有测试过这个想法，也不能确定它会起作用。

**也可以看看：**

*   [OCPSoft 重写](http://ocpsoft.org/rewrite/)
*   [UrlRewriteFilter](http://tuckey.org/urlrewrite/)

# sinatra - 西纳特拉 + 回形针；上传的图片没有扩展名

> ID：12368443
> 
> 赞同：0
> 
> 时间：2012-09-11T11:14:48.110
> 
> 标签：sinatra, paperclip, uploading

上传图像时，回形针正在保存带有扩展名的文件。我正在使用 ActiveRecord

photo.rb（模型）：

```
require "sinatra"

class Photo < ActiveRecord::Base
    include Paperclip::Glue

    attr_accessible :image

    has_attached_file :image,
        :styles => {
            :small => "100x100#",
            :medium => "500x300"
        },
        :path => "#{settings.root}/public/system/:class/:attachment/:attachment/:id_partition/:style/:filename"
end 
```

照片.rb（控制器）：

```
post "/photos/?" do
        params[:photo][:image] = params[:photo][:image][:tempfile] if params[:photo][:image]
        @photo = Photo.new(params[:photo])
        if @photo.save
            { :status => "OK"}.to_json
        else
            { :status => "NOK"}.to_json
        end
    end 
```

# yii - 提交注册表单，必填字段为空白，然后在密码字段上生成 32 位字符值

> ID：12368445
> 
> 赞同：0
> 
> 时间：2012-09-11T11:14:54.677
> 
> 标签：yii

我在从密码字段中删除值时遇到了麻烦。当我在未输入一个或多个必填字段的情况下提交注册表单时，它会在密码字段上生成一个 32 位字符值。

在这种情况下，我想看到这个字段是空白的。

感谢，

太太

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:37:48.790

没有一些代码很难说，但听起来当表单验证在注册时失败时，表单会使用注册提交的数据重新填充（因为它是 CActiveForm） - 现在包括您散列的密码？

避免这种情况的一种方法是，在提交表单时，在 save() 或 validate() 失败后清除密码。我猜如果您有基本的 Yii 代码，您的表单发布操作将如下所示：

```
$model->attributes = $_POST['SignupModel'];
$model->password = cool_hash_function($model->password); // hashing the password - maybe you have this in beforeValidate(), I don't know
if ($model->save()) {
  $this->redirect('/success!'); // yay! redirect or whatever
} else {
  $model->password = ''; // if the save failed, clear out the password before re-rendering the form
}
$this->render('signup',array('model'=>$model)); // the form will now render without the pw 
```

是的，用户需要重新输入密码。可能还有其他方法可以解决此问题，具体取决于您在保存之前对密码进行哈希处理的过程中的哪个位置 - 并且取决于我是否已经接近猜测您的实际问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:50:47.527

您也可以在视图文件的代码中使用/方法的`$htmlOptions`参数，并强制密码输入呈现一个空值属性：`CActiveForm``CHtml`

```
<?= CHtml::activePasswordField($model, 'password', array('value'=>'')) ?>
<?= $form->passwordField($model, 'password', array('value'=>'')) ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:48:24.117

你的代码真的很糟糕，因为你从控制器进入模型功能，这违反了 MVC 编程模式的规则。

相反，这段代码应该放在用户模型类的[beforeSave()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#beforeSave-detail)方法中。

# sql-server - 删除 SQL Server 上的所有扩展属性

> ID：12368448
> 
> 赞同：9
> 
> 时间：2012-09-11T11:14:56.640
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

如何以可编写脚本的方式删除 SQL Server 上的所有扩展属性？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-25T09:00:15.960

如果您想要一个一次性删除所有扩展属性的脚本，请使用 Jamie Thomson 创建的脚本，该脚本将为所有扩展属性生成删除。[您可以从这篇文章](http://sqlblog.com/blogs/jamie_thomson/archive/2012/03/25/generate-drop-statements-for-all-extended-properties.aspx)中下载它。

我在这里粘贴了他的脚本（完整的致谢，以防文章被删除）：

```
/*
This script will generate calls to sp_dropextendedproperty for every
extended property that exists in your database.
Actually, a caveat: I don't promise that it will catch each and every 
extended property that exists, but I'm confident it will catch most of them!

It is based on this: 
http://blog.hongens.nl/2010/02/25/drop-all-extended-properties-in-a-mssql-database/ 
by Angelo Hongens.

Also had lots of help from this:
http://www.sqlservercentral.com/articles/Metadata/72609/
by Adam Aspin

Adam actually provides a script at that link to do something very similar
but when I ran it I got an error:
Msg 468, Level 16, State 9, Line 78
Cannot resolve the collation conflict between "Latin1_General_100_CS_AS" and "Latin1_General_CI_AS" in the equal to operation.

So I put together this version instead. 

Use at your own risk.

Jamie Thomson
2012-03-25
*/

/*Are there any extended properties? Let's take a look*/
select  *,OBJECT_NAME(major_id) from    sys.extended_properties xp

/*Now let's generate sp_dropextendedproperty statements for all of them.*/
--tables
set nocount on;
select 'EXEC sp_dropextendedproperty
@name = '''+xp.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(xp.major_id) + '''
,@level1type = ''table''
,@level1name = ''' + object_name(xp.major_id) + ''''
from sys.extended_properties xp
join sys.tables t on xp.major_id = t.object_id
where xp.class_desc = 'OBJECT_OR_COLUMN'
and xp.minor_id = 0
union
--columns
select 'EXEC sp_dropextendedproperty
@name = '''+sys.extended_properties.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(extended_properties.major_id) + '''
,@level1type = ''table''
,@level1name = ''' + object_name(extended_properties.major_id) + '''
,@level2type = ''column''
,@level2name = ''' + columns.name + ''''
from sys.extended_properties
join sys.columns
on columns.object_id = extended_properties.major_id
and columns.column_id = extended_properties.minor_id
where extended_properties.class_desc = 'OBJECT_OR_COLUMN'
and extended_properties.minor_id > 0
union
--check constraints
select  'EXEC sp_dropextendedproperty
@name = '''+xp.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(xp.major_id) + '''
,@level1type = ''table''
,@level1name = ''' + object_name(cc.parent_object_id) + '''
,@level2type = ''constraint''
,@level2name = ''' + cc.name + ''''
from    sys.extended_properties xp
join sys.check_constraints cc       on  xp.major_id = cc.object_id
union
--check constraints
select  'EXEC sp_dropextendedproperty
@name = '''+xp.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(xp.major_id) + '''
,@level1type = ''table''
,@level1name = ''' + object_name(cc.parent_object_id) + '''
,@level2type = ''constraint''
,@level2name = ''' + cc.name + ''''
from    sys.extended_properties xp
join sys.default_constraints cc     on  xp.major_id = cc.object_id
union
--views
select 'EXEC sp_dropextendedproperty
@name = '''+xp.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(xp.major_id) + '''
,@level1type = ''view''
,@level1name = ''' + object_name(xp.major_id) + ''''
from sys.extended_properties xp
join sys.views t on xp.major_id = t.object_id
where xp.class_desc = 'OBJECT_OR_COLUMN'
and xp.minor_id = 0
union
--sprocs
select 'EXEC sp_dropextendedproperty
@name = '''+xp.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(xp.major_id) + '''
,@level1type = ''procedure''
,@level1name = ''' + object_name(xp.major_id) + ''''
from sys.extended_properties xp
join sys.procedures t on xp.major_id = t.object_id
where xp.class_desc = 'OBJECT_OR_COLUMN'
and xp.minor_id = 0
union
--FKs
select  'EXEC sp_dropextendedproperty
@name = '''+xp.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(xp.major_id) + '''
,@level1type = ''table''
,@level1name = ''' + object_name(cc.parent_object_id) + '''
,@level2type = ''constraint''
,@level2name = ''' + cc.name + ''''
from    sys.extended_properties xp
join sys.foreign_keys cc        on  xp.major_id = cc.object_id
union
--PKs
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''SCHEMA'', @level0name = [' + SCH.name + '], @level1type = ''TABLE'', @level1name = [' + TBL.name + '] , @level2type = ''CONSTRAINT'', @level2name = [' + SKC.name + '] ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.tables TBL
 INNER JOIN sys.schemas SCH
 ON TBL.schema_id = SCH.schema_id 
 INNER JOIN sys.extended_properties SEP
 INNER JOIN sys.key_constraints SKC
 ON SEP.major_id = SKC.object_id 
 ON TBL.object_id = SKC.parent_object_id 
WHERE SKC.type_desc = N'PRIMARY_KEY_CONSTRAINT'
union
--Table triggers
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''SCHEMA'', @level0name = [' + SCH.name + '], @level1type = ''TABLE'', @level1name = [' + TBL.name + '] , @level2type = ''TRIGGER'', @level2name = [' + TRG.name + '] ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.tables TBL
 INNER JOIN sys.triggers TRG
 ON TBL.object_id = TRG.parent_id 
 INNER JOIN sys.extended_properties SEP
 ON TRG.object_id = SEP.major_id 
 INNER JOIN sys.schemas SCH
 ON TBL.schema_id = SCH.schema_id
union
--UDF params
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''SCHEMA'', @level0name = [' + SCH.name + '], @level1type = ''FUNCTION'', @level1name = [' + OBJ.name + '] , @level2type = ''PARAMETER'', @level2name = [' + PRM.name + '] ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.extended_properties SEP
 INNER JOIN sys.objects OBJ
 ON SEP.major_id = OBJ.object_id 
 INNER JOIN sys.schemas SCH
 ON OBJ.schema_id = SCH.schema_id 
 INNER JOIN sys.parameters PRM
 ON SEP.major_id = PRM.object_id 
 AND SEP.minor_id = PRM.parameter_id 
WHERE SEP.class_desc = N'PARAMETER'
 AND OBJ.type IN ('FN', 'IF', 'TF') 
union
--sp params
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''SCHEMA'', @level0name = [' + SCH.name + '], @level1type = ''PROCEDURE'', @level1name = [' + SPR.name + '] , @level2type = ''PARAMETER'', @level2name = [' + PRM.name + '] ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.extended_properties SEP
 INNER JOIN sys.procedures SPR
 ON SEP.major_id = SPR.object_id 
 INNER JOIN sys.schemas SCH
 ON SPR.schema_id = SCH.schema_id 
 INNER JOIN sys.parameters PRM
 ON SEP.major_id = PRM.object_id 
 AND SEP.minor_id = PRM.parameter_id 
WHERE SEP.class_desc = N'PARAMETER'
union
--DB
SELECT 
'EXEC sys.sp_dropextendedproperty @name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.extended_properties SEP
WHERE class_desc = N'DATABASE'
union
--schema
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''SCHEMA'', @level0name = [' + SCH.name + '] ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.extended_properties SEP
 INNER JOIN sys.schemas SCH
 ON SEP.major_id = SCH.schema_id 
WHERE SEP.class_desc = N'SCHEMA'
union
--DATABASE_FILE
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''FILEGROUP'', @level0name = [' + DSP.name + '], @level1type = ''LOGICAL FILE NAME'', @level1name = ' + DBF.name + ' ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.extended_properties SEP
 INNER JOIN sys.database_files DBF
 ON SEP.major_id = DBF.file_id 
 INNER JOIN sys.data_spaces DSP
 ON DBF.data_space_id = DSP.data_space_id 
WHERE SEP.class_desc = N'DATABASE_FILE'
union
--filegroup
SELECT 
'EXEC sys.sp_dropextendedproperty @level0type = N''FILEGROUP'', @level0name = [' + DSP.name + '] ,@name = ''' + REPLACE(CAST(SEP.name AS NVARCHAR(300)),'''','''''') + ''''
FROM sys.extended_properties SEP
 INNER JOIN sys.data_spaces DSP
 ON SEP.major_id = DSP.data_space_id
WHERE DSP.type_desc = 'ROWS_FILEGROUP'
union
-- INDEX
select 'EXEC sp_dropextendedproperty
@name = '''+sys.extended_properties.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(extended_properties.major_id) + '''
,@level1type = ''table''
,@level1name = ''' + object_name(extended_properties.major_id) + '''
,@level2type = ''index''
,@level2name = ''' + indexes.name + ''''
from sys.extended_properties
join sys.indexes
on indexes.object_id = extended_properties.major_id
and indexes.index_id = extended_properties.minor_id
where extended_properties.class_desc = 'INDEX'
and extended_properties.minor_id > 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:02:13.390

使用这个脚本

```
EXEC sys.sp_dropextendedproperty 
     @name  =N'MS_Description', 
     @level0type = N'SCHEMA', 
     @level0name = N'dbo',
     @level1type = N'TABLE',
     @level1name = N'ActivityEventRecipient';
GO 
```

来源：[drop 扩展属性](http://sqlserverperformance.wordpress.com/2011/01/10/fun-with-extended-properties-in-sql-server-2008/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-02T16:03:55.257

我尝试运行脚本，但似乎没有什么对我有用。但是，我确实发现可以通过转到我的表/视图`Object Explorer`并执行以下操作来删除扩展属性：

*   在对象资源管理器中右键单击表/视图，选择属性
*   从左侧窗格中选择扩展属性
*   选择扩展属性，然后单击窗口右下角的删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:47:42.867

请参阅以下 URL 以删除扩展属性：

[http://msdn.microsoft.com/en-us/library/ms178595.aspx](http://msdn.microsoft.com/en-us/library/ms178595.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-30T14:57:57.073

无法添加评论，我只能将其添加为答案。

该脚本对于视图列是错误的。列的部分应更改为：

```
--columns
select 'EXEC sp_dropextendedproperty
@name = '''+sys.extended_properties.name+'''
,@level0type = ''schema''
,@level0name = ''' + object_schema_name(extended_properties.major_id) + '''
,@level1type = ''' + Case so.type
                         When 'u'
                             Then
                             'table'
                         When 'v'
                             Then
                             'view'
                     End + '''
,@level1name = ''' + object_name(extended_properties.major_id) + '''
,@level2type = ''column''
,@level2name = ''' + columns.name + ''''
from sys.extended_properties
join sys.columns
on columns.object_id = extended_properties.major_id
and columns.column_id = extended_properties.minor_id
    Join
        sys.objects As so
            On
            columns.object_id     = so.object_id
Where
    extended_properties.class_desc   = 'OBJECT_OR_COLUMN'
    And extended_properties.minor_id > 0
    And so.type In
        ( 'u', 'v' ) 
```

# html - 当最终通过媒体查询隐藏图像时，延迟和手动控制加载

> ID：12368450
> 
> 赞同：0
> 
> 时间：2012-09-11T11:15:11.057
> 
> 标签：html, css, webkit, media-queries

我有一个网页，它使用了几个`<img>`默认情况下不可见的元素。

*   图像用于轮播

*   一些图像`display: none`通过 mobile.css 和 CSS 媒体查询设置为隐藏

浏览器，尤其是移动浏览器如何排队加载图像？是否可以对图像进行微调控制，以便

*   图像在可见之前不会加载

*   如果移动媒体查询启动，则 mobile.css 或伴随的 Javascript 中止图像加载

*   `<img>`CSS背景图像和元素图像行为方面的区别（如果有的话）

移动浏览器（WebKit）在这种情况下使用什么策略？

作为示例站点，我可以使用开源站点[http://fi.pycon.org/2012/](http://fi.pycon.org/2012/)它有一个使用 HTML 和 CSS 创建的徽标元素

[https://github.com/python-finland/fi.pycon.org/blob/master/2012/index.html#L85](https://github.com/python-finland/fi.pycon.org/blob/master/2012/index.html#L85)

这个元素默认是可见的（桌面）

[https://github.com/python-finland/fi.pycon.org/blob/master/media/2012/css/theme.css#L99](https://github.com/python-finland/fi.pycon.org/blob/master/media/2012/css/theme.css#L99)

但最终通过 mobile.css 和媒体查询对移动浏览器隐藏：

[https://github.com/python-finland/fi.pycon.org/blob/master/media/2012/css/moobile.css#L20](https://github.com/python-finland/fi.pycon.org/blob/master/media/2012/css/moobile.css#L20)

*   移动浏览器是否进行了优化，以便不加载徽标图像文件？

*   如果将`<img>`元素用于徽标，情况会有所不同吗？

*   覆盖 CSS 规则是否在不同的 CSS 文件（和媒体查询）中是否重要

注意：如何处理媒体查询超出了这个问题的范围，我对以不同方式构建基本 CSS 和媒体查询的答案不感兴趣。我很清楚这些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:45:54.570

目前没有可行的标准化选项来防止 <img> 标记中的图像直接加载 HTML+CSS。这是[W3C 响应式图像工作组](http://www.w3.org/community/respimg/common-questions-and-concerns/)成立的原因之一：

> ...没有提议的基于 CSS 的解决方案可以解决我们希望避免的基本 [原文如此] 问题之一：以更大的屏幕宽度下载多个资产，因为可以在应用交换逻辑之前提出请求。

这并不是说基于 JavaScript 的临时解决方案行不通，只是说纯基于 HTML+CSS 的解决方案行不通。所以，回答你的问题：

> ### 1\. 移动浏览器是否优化，不加载标志图像文件？

不，[隐藏元素](http://robertnyman.com/2010/03/11/do-hidden-elements-load-background-images/) [会加载](http://www.webdesignshock.com/responsive-design-problems/)它们的背景图像。

> ### 2\. 如果使用元素作为标志，情况会有所不同吗？

[不会。图像很可能会在应用 CSS 之前](http://www.w3.org/community/respimg/common-questions-and-concerns/)抢先加载。

> ### 3\. 覆盖 CSS 规则是否在不同的 CSS 文件（和媒体查询）中是否重要

不会。这可能会导致答案 #2 中提到的交换逻辑的应用出现更多延迟，从而增加图像已经开始加载的可能性。

# android - android scrollview ontouchlistener异常

> ID：12368451
> 
> 赞同：1
> 
> 时间：2012-09-11T11:15:17.450
> 
> 标签：android, scrollview, ontouchlistener

我收到以下异常：

 `````
E/AndroidRuntime(31245): java.lang.IllegalArgumentException: pointerIndex out of range
E/AndroidRuntime(31245):        at android.view.MotionEvent.nativeGetAxisValue(Native Method)
E/AndroidRuntime(31245):        at android.view.MotionEvent.getY(MotionEvent.java:1564)
E/AndroidRuntime(31245):        at android.widget.ScrollView.onTouchEvent(ScrollView.java:628)
E/AndroidRuntime(31245):        at android.view.View.dispatchTouchEvent(View.java:4626)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
E/AndroidRuntime(31245):        at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
E/AndroidRuntime(31245):        at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1862)
E/AndroidRuntime(31245):        at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1286)
E/AndroidRuntime(31245):        at android.app.Activity.dispatchTouchEvent(Activity.java:2315)
E/AndroidRuntime(31245):        at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1835)
E/AndroidRuntime(31245):        at android.view.View.dispatchPointerEvent(View.java:4694)
E/AndroidRuntime(31245):        at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2419)
E/AndroidRuntime(31245):        at android.view.ViewRoot.handleMessage(ViewRoot.java:2080)
E/AndroidRuntime(31245):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(31245):        at android.os.Looper.loop(Looper.java:132)
E/AndroidRuntime(31245):        at android.app.ActivityThread.main(ActivityThread.java:4126)
E/AndroidRuntime(31245):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(31245):        at java.lang.reflect.Method.invoke(Method.java:491)
E/AndroidRuntime(31245):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
E/AndroidRuntime(31245):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602) 
````  `只需放置 2 个手指并拖动它们一小段距离。应用程序停止并存在。我在下面发布我的代码。这段代码是唯一处理我的视图的 ontouchlistener 的部分。

 `````
ScrollView scrollView = (ScrollView) findViewById(R.id.ScrollView11);
        scrollView.setOnTouchListener(textIncreaseListener);
    }

    private OnTouchListener textIncreaseListener = new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            int count = event.getPointerCount();
            if(count == 2){
                Log.d(TAG, "2 pointers");
                return true;
            }
            return false;
        }
    }; 
````  `有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:37:52.050

问题在于 event.getPointerCount() ，将此行放入 try catch 块或简单地添加一个日志，您就会找到它。你到底想用这个scrollView做什么。````

# php - DOMDocument::schemaValidate() 抛出警告错误

> ID：12368453
> 
> 赞同：5
> 
> 时间：2012-09-11T11:15:22.757
> 
> 标签：php, xml, simplexml

我有两个文件：

*   示例 XML 文件。
*   带有架构的 .xsd 文件，上述 XML 文件必须遵守该文件。

为了根据架构验证 XML 文件，我一直在使用：

```
$dom = new DOMDocument();

//$this->xmlstr; is my XML file after being loaded into a string.
$dom->loadXML($this->xmlstr); 

//$xsd_file is definitely my xsd file.
if(!$dom->schemaValidate($xsd_file)){
     $errors = libxml_get_errors(); //supposed to give back errors?
     var_dump($errors); //debugging - shows: array empty
} 
```

但是，只要我的 XML 文档不遵守架构中的规则，我就会不断收到警告错误。

> 警告：DOMDocument::schemaValidate() [domdocument.schemavalidate]：元素“标题”：不需要此元素。预期是（路由）

我故意搞砸了我的 XML 文件，只是想看看 $dom->schemaValidate 是如何处理它的。显然，我不希望 PHP 在 XML 不符合架构时将警告消息吐出到页面上。相反，我希望我的应用程序能够解决这个问题。我在这里忽略了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T11:23:09.580

你必须打电话

```
libxml_use_internal_errors(true); 
```

在创建新的 DOMDocument() 以抑制警告并开始将 XML 解析错误收集到可通过 libxml_get_errors() 访问的内部结构之前。

# https - 分析 HTTPS 加密 URL

> ID：12368454
> 
> 赞同：0
> 
> 时间：2012-09-11T11:15:25.503
> 
> 标签：https, cryptography, ssl-certificate

我有一个包含静态内容的 URL。使用 HTTPs 多次访问同一个 URL 时，我会得到相同或不同的加密 URL 模式吗？建议我使用分析加密 URL 的工具。

```
when we use https.........for example to send login credentials(https://example.com?username=aaaa&password=aaaa123). HTTPS encrypts the data using SSL certificate. So the url will be encrypted string. I am giving two requests with the same url(https://example.com?username=aaaa&password=aaaa123). On every request the url will be encrypted. Will the encrypted url of the first request be same as the encrypted url of the second request? Is the SSL certificate going to be different everytime btween client and server? 
```

谢谢，伊克巴尔

# sql - 如果我用 sql 安装 WordPress，我可以使用 WordPress 插件吗

> ID：12368457
> 
> 赞同：0
> 
> 时间：2012-09-11T11:15:35.597
> 
> 标签：sql, wordpress

我正在做项目，我想为此使用 WordPress，但我的客户想要 Microsoft SQL 作为数据库，所以我的问题是，如果我使用 Microsoft SQL 数据库，**那么所有 WordPress 插件都支持，我可以使用 $wpdb 函数来处理数据库**以及我需要在配置文件中更改的内容以及使用 Microsoft SQL 设置 WordPress 需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:39:12.463

正如我在[这篇](http://core.trac.wordpress.org/ticket/10918)文章中看到的，它仍然不受支持。

# eclipse - eclipse报错，在eclipse外不会出现（使用maven、strut2、hibernate4、spring3）

> ID：12368464
> 
> 赞同：1
> 
> 时间：2012-09-11T11:16:05.377
> 
> 标签：eclipse, spring, hibernate, maven, struts2

我正在使用 maven、strut2、hibernate4、spring3 和 eclipse 开发一个项目 当我将文件“.War”复制到 tomcat 的外部安装（Apache Tomcat 版本 7.0.21）时，应用程序运行良好，它是 xampp 的安装。

也就是说，以下过程正常工作：“运行方式”->“Maven安装”复制位于项目“目标”文件夹中的文件“.War”将文件粘贴到文件夹“Tomcat\webapps”中运行雄猫

当我尝试从 Eclipse 运行应用程序时出现问题：

*   省时间
*   调试应用程序
*   在更舒适的环境中工作

我总是得到以下异常：

```
 2012-09-11 13:02:41,853 ERROR [ContextLoader.java:215] : Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in file [D:\Dropbox\web\mis proyectos\maven\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\WIMP\WEB-INF\classes\applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:259)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.annotations.common.reflection.MetadataProvider
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    ... 25 more
sep 11, 2012 1:02:41 PM org.apache.catalina.core.StandardContext listenerStart
Grave: Excepción enviando evento inicializado de contexto a instancia de escuchador de clase org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in file [D:\Dropbox\web\mis proyectos\maven\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\WIMP\WEB-INF\classes\applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:259)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.annotations.common.reflection.MetadataProvider
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    ... 25 more 
```

这是一个明显对应于 Hibernate3 的异常，虽然应用程序使用的是 hibernate4

除此之外，当我不使用 eclipse 并使用 eclipse 本身（Tomcat v7.0 Server）时，不会发生错误，这特别困扰我。

```
applicationContext.xml

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util-3.0.xsd
http://www.springframework.org/schema/tx    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/aop   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <!-- Example of SAF2 action instantiated by Spring -->
    <bean id="helloWorldAction" class="org.com.WIMP.HelloWorldAction" scope="prototype"/>

    <!-- The singleton hibernate session factory -->
    <bean id="sessionFactory" scope="singleton" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="classpath:hibernate.cfg.xml" />
    </bean>

    <!-- Spring's hibernate transaction manager, in charge of making hibernate sessions/txns -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- So classes/functions with @Transactional get a hibernate txn -->
    <tx:annotation-driven />

    <!-- Inject my business services class to the actions --><!-- services.Services -->
    <bean id="services" class="org.com.WIMP.services.Services" scope="singleton">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans>

pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.com</groupId>
    <artifactId>WIMP</artifactId>
    <packaging>war</packaging>
    <version>2.2.3</version>
    <name>Struts 2 Starter</name>
    <url>http://www.myComp.com</url>
    <description>Struts 2 Starter</description>

    <properties>
        <struts2.version>${project.version}</struts2.version>
        <spring.version>3.1.1.RELEASE</spring.version>
        <hibernate.version>4.1.6.Final</hibernate.version>
    </properties>

    <dependencies>
        <!-- Junit -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <!--  Struts 2 -->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>${struts2.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-sitemesh-plugin</artifactId>
            <version>${struts2.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>${struts2.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-config-browser-plugin</artifactId>
            <version>${struts2.version}</version>
        </dependency>

        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <!-- Hibernate -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <!-- cglib -->

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2</version>
        </dependency>

        <!-- Servlet & Jsp -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>

        <!-- Jakarta Commons -->
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.1.1</version>
        </dependency>

        <!-- Dwr -->
        <dependency>
            <groupId>uk.ltd.getahead</groupId>
            <artifactId>dwr</artifactId>
            <version>1.1-beta-3</version>
        </dependency>

        <!-- Log4j -->
        <dependency>
              <groupId>log4j</groupId>
          <artifactId>log4j</artifactId>
          <version>1.2.16</version>
        </dependency>
    </dependencies>

    <build>
      <finalName>WIMP</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                   <source>1.5</source>
                   <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.21</version>
                <configuration>
                    <scanIntervalSeconds>10</scanIntervalSeconds>
                    <scanTargets>
                        <scanTarget>src/main/webapp/WEB-INF</scanTarget>
                        <scanTarget>src/main/webapp/WEB-INF/web.xml</scanTarget>
                        <scanTarget>src/main/resources/struts.xml</scanTarget>
                        <scanTarget>src/main/resources/applicationContext.xml</scanTarget>
                    </scanTargets>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <configuration>
                        <wtpversion>1.5</wtpversion>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

如果你能帮助我，我将不胜感激。

# iphone - NSBundle pathsForResourcesOfType：工作不可靠

> ID：12368466
> 
> 赞同：2
> 
> 时间：2012-09-11T11:16:11.757
> 
> 标签：iphone, ios, nsbundle

我正在开发一个应用程序，我将一个包含图像的文件夹拖放到我的 Xcode 项目中。

当应用程序启动时，我会收集应用程序中图像的所有文件名，以便稍后延迟加载它们：

```
-(NSArray *)fetchImagesInFolder:(NSString *)folderName{

    NSArray *allImagesArray = [NSArray arrayWithArray:[[NSBundle mainBundle] pathsForResourcesOfType:nil inDirectory:folderName]];

    if([allImagesArray count] == 0){
        NSLog(@"No images found in %@", folderName);
        return nil;
    }

    return allImagesArray;
} 
```

这是我的问题：这只适用于 1 次 4 次。4 次中有 3 次`[allImagesArray count]`是 0。

然后我必须从项目中删除文件夹，再次拖放它，如果我之前选择了“为任何添加的文件夹创建组”，我将选择“为任何添加的文件夹创建文件夹引用”，反之亦然，清理，构建，然后运行。该解决方案在 4 次中有 3 次有效。

如果我右键单击项目生成的 .app 文件，然后单击“显示包内容”，则图像始终存在。但是，为什么`pathsForResourcesOfType:inDirectory:`如此不可靠呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:53:50.667

您是否查看了目标的构建阶段“复制捆绑资源”部分，并了解系统如何将图像移动到捆绑中？我希望它不会复制文件夹本身，而只是将各种图像移动到一个公共目录中。

如果是这样，假设你有所有'jpg'或所有'png'，然后使用适当的后缀（比如'jpg'）并执行以下操作：

```
[NSBundle mainBundle] pathsForResourcesOfType:@"jpg" inDirectory:nil]; 
```

如果事实上你已经说服 Xcode 在包中创建一个目录，那么像现在一样添加名称，但不要管类型。

如果您有混合图像类型，则每次执行一次上述命令，然后将数组组合成一个超级数组。

编辑：如果您想将图像存储在各种文件夹中，我相信您需要编写一个“运行脚本”shell 脚本来执行您想要的操作。虽然我自己没有做过这种技术，但我相信这是其他人在解决同样问题时所做的：

*   不要在目标中包含任何图像（取消选中全部） - 您将自己管理它们
*   添加一个图像 - 一些 jpeg - 并查看 Copy Bundle Resources 将其移动到何处。我记得它只是被移动到主包目录但又不确定。
*   创建一个空的运行脚本，并选中该框以转储环境 - 您将在那里看到所有各种定义，并可以找到指向正确目录的定义（因此您可以在脚本中使用它）
*   使用上面找到指向顶级项目目录的变量，因此您可以导航到您的图像文件夹
*   现在使用变量编写运行脚本，找到项目中的所有图像文件夹，然后将它们复制到应用程序包中的适当位置。您想使用变量，因为模拟器和真实应用程序的路径不同。

您将在此处和网络上找到编写“运行脚本”的示例。我永远不记得要使用哪些 Xcode 环境变量，所以总是只转储一个集合然后四处寻找。使用任何一个名称，您都可以使用谷歌搜索并找到提供更多信息的 Apple 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:17:55.673

问题是我在**添加文件夹时选择了“为任何添加的文件夹创建文件夹引用”**，然后尝试通过

```
 UIImage *img = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", 
                                                      [[NSBundle mainBundle] resourcePath], imageName]]; 
```

但这仅在图像位于 .app 的根目录中时才有效，如果您选择**“为任何添加的文件夹创建组”** ，就会发生这种情况。

就我而言，我想保留原始目录结构，所以我通过在我给的参数中包含图像的路径来解决问题`imageWithContentsOfFile`：

```
 NSString *imageName = [NSString stringWithFormat:@"%@", [NSString stringWithFormat:@"name-of-my-images-rootdirectory/%@/%@", [NSString stringWithFormat:@"%@", subdirectoryName], [normalImagesArray objectAtIndex:i]]];
    UIImage *img = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] resourcePath], imageName]]; 
```

# kendo-ui - 如何在 KendoMobileListView 中获取所选项目的索引

> ID：12368467
> 
> 赞同：2
> 
> 时间：2012-09-11T11:16:15.327
> 
> 标签：kendo-ui

我想知道如何在 Kendo 移动 ListView 中获取所选项目的索引。这是我的代码

```
function loadInformation(){
$('#Template').kendoMobileListView({        
    dataSource: Info,
    template: '<table  style="width: 100%"><tr><td><p>${a = (typeof data.ServiceLocationCompanyName !== "undefined") ? data.ServiceLocationCompanyName : data.LastName + ", " + data.FirstName}</td><td style="width: 84px"><img src=${data.Icon} /></td></tr></table>',

    // Added this event to capture the index of selected Item but was unsuccessful
    click: function(){
    var index = this.select().index(),
    console.log(index);        
    }
}); 
```

当我运行它时，它给了我一个错误说

```
TypeError: Object [object Object] has no method 'select' 
```

我需要在这里做什么？如何获取所选项目的索引？干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:19:44.337

试试这个：

```
function loadInformation(){
    $('#Template').kendoMobileListView({        
        dataSource: Info,
        template: '<table  style="width: 100%"><tr><td><p>${a = (typeof data.ServiceLocationCompanyName !== "undefined") ? data.ServiceLocationCompanyName : data.LastName + ", " + data.FirstName}</td><td style="width: 84px"><img src=${data.Icon} /></td></tr></table>',

        // Added this event to capture the index of selected Item but was unsuccessful
        click: function(e){
           var index = $(e.item).index();
           var text = $(e.item).text();
           console.log('selected item contains text: ',text,' and its index is: ',index);        
        }
    });
} 
```

# iphone - 我可以使用基于用户名的应用内购买系统吗？

> ID：12368469
> 
> 赞同：0
> 
> 时间：2012-09-11T11:16:22.193
> 
> 标签：iphone, ios, in-app-purchase

我必须实现一种购买应用内购买项目（它是订阅）但不是基于 AppleID 的方法。换句话说，我需要登录我的应用程序并使用我的登录信息购买商品。如果我更改用户（但不是 AppStore 中的 AppleID），我希望能够购买另一个订阅。当然，同一个用户不应该支付两次，但我可以通过在服务器上检查其订阅状态来防止。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:55:25.640

如果您不想要自动更新订阅，那么您可以使用 Consumable In-App Purchase。您必须在服务器端管理用户订阅。

# python - jinja2 for ... if 循环中的前 x 个项目

> ID：12368475
> 
> 赞同：13
> 
> 时间：2012-09-11T11:16:42.600
> 
> 标签：python, loops, flask, jinja2

我的 jinja2 模板中有以下循环

```
{% for item in list if item.author == 'bob' %} 
```

我正在尝试获取以 bob 作为作者的前 5 个项目。

我试着做

```
{% for item in list if item.author == 'bob' and loop.index <= 5 %} 
```

但它返回了一个未定义的错误。

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T11:19:39.587

编辑：

你可以简单地嵌套表达式？，即

```
{% for item in list if item.author == 'bob' %}
    {% if loop.index <= 5 %}
       do something
    {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-05T12:30:16.793

跳过前 x 个元素，你可以

```
{% for category in categories[x:] %} 
```

使用所有可用于常规列表的表达式

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-05T23:33:21.377

你也可以使用

```
{% for item in list[0:6] %} 
```

# awk - awk，脚本中的行尾

> ID：12368477
> 
> 赞同：0
> 
> 时间：2012-09-11T11:16:49.543
> 
> 标签：awk

我只是第一次尝试使用 awk 并且有一个，也许是简单的问题。我正在尝试列出一个目录并根据字符串从列表中提取一些信息。我正在尝试的 bash 脚本是：

```
 ls *.hdf > temporary.list
 nom2=`awk 'BEGIN {FS = "." } ; { $1 ~ /'$year$month'/ } { print $2 }' temporary.list `
 file=$year$month.$nom2.hdf 
 file2=$year$month.hdf 
```

其中年份和月份在 for 循环中发生变化（1981 到 1985 和 01 到 12）。temporary.list 文件由 12 行组成，例如：

```
198201.s04m1pfv51-bsst.hdf
198202.s04m1pfv51-bsst.hdf
198203.s04m1pfv51-bsst.hdf
198204.s04m1pfv51-bsst.hdf
198205.s04m1pfv51-bsst.hdf
198206.s04m1pfv51-bsst.hdf
198207.s04m1pfv51-bsst.hdf
198208.s04m1pfv51-bsst.hdf
198209.s04m1pfv51-bsst.hdf
198210.s04m1pfv51-bsst.hdf
198211.s04m1pfv51-bsst.hdf
198212.s04m1pfv51-bsst.hdf 
```

我想根据年月选择文件。问题是我的 awk 句子似乎没有将不同的行作为不同的寄存器，我想。脚本的输出是：

```
nom2 = h s04m1pfv51-bsst h s04m1pfv51-bsst h s04m1pfv51-bsst h
s04m1pfv51-bsst h s04m1pfv51-bsst h s04m1pfv51-bsst h s04m1pfv51-bsst
s04m1pfv51-bsst s04m1pfv51-bsst s04m1pfv51-bsst s04m1pfv51-bsst
s04m1pfv51-bsst 

file = 198201.h s04m1pfv51-bsst h s04m1pfv51-bsst h
s04m1pfv51-bsst h s04m1pfv51-bsst h s04m1pfv51-bsst h s04m1pfv51-bsst
h s04m1pfv51-bsst s04m1pfv51-bsst s04m1pfv51-bsst s04m1pfv51-bsst
s04m1pfv51-bsst s04m1pfv51-bsst.hdf 

file2= 198201.hdf 
```

也许是一些简单的语法错误，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:24:47.247

您需要提供`awk`您需要它知道的变量。
要将变量传递给`awk`，请使用`-v`每个变量。

```
awk -v y="$year" -v m="$month" 'BEGIN { FS = "." } $1 == y m { print $2 }' file 
```

`awk`vars 然后可以直接使用，`$`不需要。
由于`print`它们之间的空格将被忽略，因此必须引用真实的空格。所以它现在的方式是检查第一个字段 ( `$1`) 是否完全匹配 ( `==`) ' `y m`' 扩展为 ' `${year}${month}`'。如果匹配发生，则`$2`打印第二个字段 ( )。

* * *

请记住，`awk`逻辑块的形式为

```
condition { action [; action ..] } 
```

请注意，您周围没有花括号，`condition`
也不需要`;`在块之间，只在动作之间，但它们也不会受到伤害。
所以，`{ $1 ~ /'$year$month'/ }`不会按照它写的方式做任何事情。

* * *

`Bash`说了这么多，对于你正在做的事情，我会选择 pure ：

```
while IFS='.' read -r ym f e
do 
    printf '%8s: %s\n' "year"  "${ym%??}"   \
                       "month" "${ym#????}" \
                       "file"  "$f"         \
                       "ext"   "$e"
done < file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:20:18.510

像在 bash 脚本中那样解析文件列表是一个坏习惯，因为它与文件名中可能出现的许多特殊字符不兼容。就像语法规则一样，只有在你熟悉规则的情况下才能打破规则。:)`for`循环是处理文件的更好构造：

```
#!/bin/bash

year=1982
month=9

for filename in $(printf "%04d%02d" "$year" "$month").*.hdf; do
  nom2=${filename#*.}
  nom2=${nom2%.*}
  file2=${filename%%.*}.hdf
  printf "file=%s\nnom2=%s\nfile2=%s\n\n" "$filename" "$nom2" "$file2"
done 
```

那是你要找的吗？请注意，参数扩展使用`%`和`#`在传统的 bourne shell 和 bash 中工作，因此它非常便携。

如果你真的想使用 awk，你还有很多选择。

```
#!/bin/bash

year=1982
month=9

for filename in $(printf "%04d%02d" "$year" "$month").*.hdf; do
  nom2=$(awk -vym="^$year$month." -vf="$filename" 'BEGIN{if(f~ym){sub(/\..*/,"",f);print f}}')
  file="$nom2.hdf"
  printf "file=%s\nnom2=%s\nfile2=%s\n\n" "$filename" "$nom2" "$file2"
done 
```

请注意，使用`printf`格式化日期允许您以最小的努力处理带有前导零的个位数月份。

# ruby-on-rails-3.2 - 如何在 Rails 项目中使用 Zurb Foundation 3？

> ID：12368478
> 
> 赞同：2
> 
> 时间：2012-09-11T11:16:59.577
> 
> 标签：ruby-on-rails-3.2, zurb-foundation

我开始学习 Rails 并创建了一个新的 3.2.8 项目，我想在其中包含 Zurb Foundation 框架，并希望尽可能轻松地更新（补丁和新“功能”）该框架 - 其中，我猜？，最好是现在使用“gem install xx”，然后再进一步使用“gem update”。

偶然发现了[https://github.com/zurb/foundation-rails](https://github.com/zurb/foundation-rails)（用于 Foundation 2），其中指出“当前的 zurb-foundation gem 现在托管在：[https](https://github.com/zurb/foundation) ://github.com/zurb/foundation ” - 但我似乎无法在那里找到 Foundation 3 的宝石。

抱歉，如果这是一个新手问题，但我想我们都必须从某个地方开始 :-)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T22:25:07.107

[http://foundation.zurb.com/docs/rails.html](http://foundation.zurb.com/docs/rails.html)

通常我不会这样做，但是由于这在 404 的历史中不断消失，所以我会在这里粘贴一些。这是 Foundation 4（2013 年 3 月 1 日）的最新版本：

## 宝石文件

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  # Add Foundation Here
  gem 'zurb-foundation', '~> 4.0.0'
end 
```

然后

```
$bundle install 
```

## 易于安装：

```
rails g foundation:install 
```

## 手动安装：

### 应用程序/资产/样式表/application.scss

```
@import "foundation"; 
```

### 应用程序/资产/javascripts/application.js

```
//= require foundation 
```

### my_layout.html.erb

```
<head>
    <!--Add to your head inside your page layout-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T01:18:23.523

您可以在此处找到 Rails 3 的 Zurb Foundation 安装指南：http: [//foundation.zurb.com/docs/rails.html](http://foundation.zurb.com/docs/rails.html)

# spring-mvc - Ext JS + Spring MVC 中的递归数据结构

> ID：12368479
> 
> 赞同：2
> 
> 时间：2012-09-11T11:17:05.593
> 
> 标签：spring-mvc, extjs, jackson

我正在 Spring MVC 和 Ext JS 4.1 中设计一个简单的用户通讯录。我在 Java 中定义了我的 User 类以允许引用其他用户：

```
@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property="@id")
public class User {

    @JsonProperty
    private String name;

    @JsonProperty
    private String email;

    @JsonProperty
    private List<User> friends = new ArrayList<User>();
} 
```

我使用了[@JsonIdentityInfo](http://wiki.fasterxml.com/JacksonFeatureObjectIdentity)来确保Jackson 正确处理循环引用以转换为JSON 并在Ext JS 和Spring 之间传递。我像这样发送我的 JSON：

```
{"data":[
    {"@id":1,"name":"John","email":"john@email.com",
        "friends":[
            {"@id":2,"name":"Peter","email":"peter@email.com","friends":[1]}
        ]},
    2],
"total":2,
"success":true} 
```

这里约翰有@id 1，彼得有@id 2。彼得被定义为约翰的朋友，反之亦然。the 之前的 2`"total"`是对 Peter 的引用，因为他已经被定义。我的问题是：现在我已经从 Jackson 获得了递归数据结构，你如何将它们与 Ext JS 集成？我有这个`models/User.js`

```
Ext.define('AM.model.User', {
    extend : 'Ext.data.Model',
    fields : [ '@id', 'name', 'email' ],
    idProperty : '@id',
    hasMany : [ {
        model : 'AM.model.User',
        name : 'friends',
        associationKey:'friends'
    } ]
}); 
```

我可以很好地阅读 John，并且可以在 john.friends 中阅读 Peter，但我无法阅读 Peter from，`data`因为所有 Ext JS 都是`2`(Peter's `@id`)。我在[ExtJS.grid.Panel](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel)中显示它们，只有 John 出现了。彼得的行是空白的。

![在此处输入图像描述](../Images/209f13c549359cfb39120a4589d43add.png)

我需要覆盖我的[ExtJS.data.Store](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store)中的 Reader 和 Writer吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T16:25:32.543

JSOG 库：[https](https://github.com/jsog/jsog) ://github.com/jsog/jsog JSOG JACKSON 模块：[https ://github.com/jsog/jsog-jackson](https://github.com/jsog/jsog-jackson)

您可以使用 JSOG 库 + jackson JSOG 模块来做到这一点。创建一个自定义阅读器，例如：

```
Ext.define('Ext.data.reader.Jsog', {
extend: 'Ext.data.reader.Json',
alternateClassName: 'Ext.data.JsogReader',
alias : 'reader.jsog',

getResponseData: function(response) {
    var data, error;
    try {
        data = JSOG.decode(Ext.decode(response.responseText));
        return this.readRecords(data);
    } catch (ex) {
        error = new Ext.data.ResultSet({
            total  : 0,
            count  : 0,
            records: [],
            success: false,
            message: ex.message
        });

        this.fireEvent('exception', this, response, error);

        Ext.Logger.warn('Unable to parse the JSON returned by the server');

        return error;
    }
}}); 
```

和商店定义像

```
 var store = Ext.create('Ext.data.Store', {
        proxy: {
                        type: 'ajax',
                        reader: 'jsog',
                        url: 'dummydata/data-grid.js'
        },fields: [
            { name: 'company' },
            { name: 'price', type: 'float' },
            { name: 'change', type: 'float' },
            { name: 'pctChange', type: 'float' },
            { name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia' }
        ]
    }); 
```

和读者膨胀你参考。我们实施的这个解决方案。

虚拟数据

```
[
{ "@id": "1",  "company" : "a" , "price" : 2},
{ "@id": "2",  'company' : "b" },
{ "@id": "3",  "company" : "c" },
{ "@id": "4",  "company" : "d" },
{ '@ref': "1" },
{ "@ref": "3" },
{ "@ref": "2" },
{ "@ref": "4" }] 
```

# c# - 如何替换 .NET 中第一次出现的子字符串？

> ID：12368480
> 
> 赞同：0
> 
> 时间：2012-09-11T11:17:07.627
> 
> 标签：c#, asp.net, string, replace

我有如下字符串变量

```
 string pctSign = "\0\0\0"; 
```

我想用“%”替换前两个字符

```
i.e. Final o/p:- pctSign="%\0\0"; 
```

如何用 String.Replace 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:20:38.420

```
// Option 1
var result = "%" + pctSign.Remove(0, 2);

// Option 2
var result = "%" + pctSign.Substring(2);

// Option 3
var regex = new Regex("^\\0");
var result = regex.Replace(pctSign, "%"); 
```

如果您绝对想要用户，`String.Replace()`那么您可以编写自己的扩展方法：

```
public static class StringExtension
{
    public static String Replace(this string self, 
                                      string oldString, string newString, 
                                      bool firstOccurrenceOnly = false)
    {
        if ( !firstOccurrenceOnly )
            return self.Replace(oldString, newString);

        int pos = self.IndexOf(oldString);
        if ( pos < 0 )
            return self;

        return self.Substring(0, pos) + newString 
               + self.Substring(pos + oldString.Length);
    }
}

// Usage:
var result = pctSign.Replace("/0", "%", true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:21:30.210

尝试这个：

```
var pctSign = "\0\0\0";
var result = string.Format("%{0}", pctSign.Substring(2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:20:53.313

```
string s = pctSign.Substring(2, pctSign.Length);
s = "%" + s; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:22:10.477

你的意思是只有前两个

```
pctSign = "%"+pctSign.substring(2); 
```

# java - JPA createEntityManagerFactory 的 NoClassDefFoundError

> ID：12368481
> 
> 赞同：3
> 
> 时间：2012-09-11T11:17:09.790
> 
> 标签：java, jpa, persistence, eclipselink, persistence.xml

我是使用 EclipseLink JPA 开发的新手，我正在使用 eclipselink-2.4.0.v20120608-r11652.zip 这个版本。我的问题的全部故事是我的库包含一些 JPA 1.0 库，我决定通过下载上面的最新 EclipseLink 升级到 JPA 2.0，通过调整顺序以将这些最新库加载到第一个，我的代码可以使用最新的类从正确的库，

一旦我开始运行，createEntityManagerFactory 上的代码错误，抱怨它需要我刚刚摆脱的 datanucleus-api.jar 中的类。这是堆栈跟踪：

```
java.lang.NoClassDefFoundError: org/datanucleus/jpa/exceptions/NoPersistenceXmlException
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
at java.lang.Class.getConstructor0(Class.java:2699)
at java.lang.Class.newInstance0(Class.java:326)
at java.lang.Class.newInstance(Class.java:308)
at javax.persistence.spi.PersistenceProviderResolverHolder$DefaultPersistenceProviderResolver.getPersistenceProviders(Unknown Source)
at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
at core.server.jpa.RawTrades.testMethod(RawTrades.java:18)
at test.testJPA.testMethod(testJPA.java:15)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:21)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:194) 
```

我的代码是下面的标准代码

```
private static final String PERSISTENCE_UNIT_NAME = "SimTool";
  private static EntityManagerFactory factory;

public static void testMethod() {
    factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME,new HashMap());
    EntityManager em = factory.createEntityManager();
} 
```

我的 persistence.xml 站点位于 /WEB-INFO/classes/META-INFO/persistence.xml，有趣的是我将它设置为进行日志记录，但根本没有生成日志文件。

```
 <?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
<persistence-unit name="SimTool" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<class>core.server.jpa.RawTrade</class>
<class>core.shared.Schedule</class>
<properties>
  <property name="javax.persistence.jdbc.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
  <property name="javax.persistence.jdbc.url"
    value="jdbc:sqlserver://gprimesqldb1u.eur.nsroot.net:2431;databasename=GlobalPrimeDb" />
  <property name="javax.persistence.jdbc.user" value="NoSafeToShare" />
  <property name="javax.persistence.jdbc.password" value="OnlyDeterminedOneWillGetIt" />

  <!-- EclipseLink should create the database schema automatically -->
  <property name="eclipselink.ddl-generation" value="create-tables" />
  <property name="eclipselink.ddl-generation.output-mode" value="both" />
  <property name="eclipselink.logging.file" value="JPAoutput.log"/>
  <property name="eclipselink.logging.logger" value="JavaLogger"/>
  <property name="eclipselink.logging.level" value="FINE" />
</properties> 
```

我觉得代码仍在尝试加载旧的 JPA 库而不是 EclipseLink 库，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:33:30.333

将[datanucleus](http://repo1.maven.org/maven2/org/datanucleus/datanucleus-jpa/2.0.0-m3/datanucleus-jpa-2.0.0-m3.jar)添加到您的 WEB-INF 或运行时类路径。

# python - python 生成器中的 next() 方法工作起来很奇怪

> ID：12368485
> 
> 赞同：1
> 
> 时间：2012-09-11T11:17:22.940
> 
> 标签：python, generator

```
def conflict(state, nextX):
    nextY = len(state)
    for i in range(nextY):
        if abs(state[i]-nextX) in (0, nextY-i):
            return True
    return False

def queens(num=8, state=()):
    for pos in range(num):
        if not conflict(state, pos):
            if len(state) == num-1:
                yield (pos,)
            else:
                results=queens(num, state + (pos,))
                for res in results:
                    yield (pos,) + res 

print list(queens(8)) 
```

这是八个皇后的解决方案，效果很好。但是当我做了一点改变时。python 生成器中的 next() 方法变得很奇怪。

```
def conflict(state, nextX):
    nextY = len(state)
    for i in range(nextY):
        if abs(state[i]-nextX) in (0, nextY-i):
            return True
    return False

def queens(num=8, state=()):
    for pos in range(num):
        if not conflict(state, pos):
            if len(state) == num-1:
                yield (pos,)
            else:
                results=queens(num, state + (pos,))
                for res in results:
                    yield (pos,) +results.next()   //here is the change. res -->results.next()  

print list(queens(8)) 
```

它只是打印一个[]。我多么尴尬！我不明白为什么 next() 方法在任何其他情况下都有效，但在这里却不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:23:40.570

你期待会发生什么？

当您调用`next`生成器时，它会推进生成器并返回下一项。您的基本情况 ( `len(state) == num-1`) 仅产生一个项目，因此在这种情况下，它将推进迭代器、接收`StopIteration`并终止循环，因此您不会得到任何结果。

根本问题是您在循环遍历迭代器时尝试推进迭代器；这不太可能运作良好。

# cuda - Nsight 配置文件实验未运行

> ID：12368486
> 
> 赞同：1
> 
> 时间：2012-09-11T11:17:28.337
> 
> 标签：cuda, nsight

我已经为 VS2010 安装了 nsight 并且调试效果很好（该卡是 Quadro FX 5800，根据[http://developer.nvidia.com/content/nsight-visual-studio-edition-supported-gpus-full-列表](http://developer.nvidia.com/content/nsight-visual-studio-edition-supported-gpus-full-list)）。但是，当我尝试运行分析实验时，唯一显示的实验结果是占用率，控制台进度显示如下

```
Nsight: Profiling Kernel test_kernel  
Nsight: Launch Information Experiment ( 1/ 1):.  
Nsight: Experiments complete, total replays needed:  1 
```

即使我已经要求进行所有的实验。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:26:10.357

Quadro FX 5800 基于 Tesla gt280 芯片。Nsight CUDA Profiling 对 Tesla 架构 GPU（不同于 Tesla 品牌）的支持非常有限。为了收集额外的 PM 计数器，将 Experiments 更改为 Run to Custom。在实验选择器中，您可以添加一个或多个 Tesla Raw Counter 实验实例。如果您单击中间窗格中选定实验表中的实验，右侧窗格将允许您选择计数器。计数器选择器仅允许您选择可以在同一通道中收集的计数器。通过添加多个实验副本，您可以收集所有计数器。

# json - 使用 JSON 解析器连接

> ID：12368490
> 
> 赞同：1
> 
> 时间：2012-09-11T11:17:33.677
> 
> 标签：json, parsing

如何使用 json 解析器将数据从我的 android 应用程序插入到我的数据库中，请帮助我提供一些类似的示例代码，我有这些代码，其中包含某些字段，如“电子邮件”、“密码”，我想将这些数据发送到特定网址

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.text.method.PasswordTransformationMethod;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class RegisterActivity extends Activity {

    EditText fullname;
    EditText email;
    EditText password;
    EditText RePass;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Set View to register.xml
        setContentView(R.layout.register);
        Button registerscreen=(Button)findViewById(R.id.btnCntnueRegister);
        // Listening to Login Screen link

        email = (EditText)findViewById(R.id.reg_email);
        password =(EditText)findViewById(R.id.reg_password);
        fullname =(EditText)findViewById(R.id.reg_fullname);
        RePass = (EditText)findViewById(R.id.rereg_password);
        EditText passwords=(EditText)findViewById(R.id.reg_password);
        passwords.setTransformationMethod(new PasswordTransformationMethod());
        EditText repasswords = (EditText) findViewById(R.id.rereg_password);
        repasswords.setTransformationMethod(new PasswordTransformationMethod());

        registerscreen.setOnClickListener(new View.OnClickListener(){

            public void onClick(View arg0) {
                Context context = getApplicationContext();
                int duration = Toast.LENGTH_SHORT;
                if(email.getText().toString().equals("")&&password.getText().toString().equals("")&&fullname.getText().toString().equals("")&&RePass.getText().toString().equals(""))
                {                                        
                    Toast toast = Toast.makeText(context, "Please Enter a valed data. !", duration);       
                    toast.show();
                }
                else if(email.getText().toString().equals("")||password.getText().toString().equals("")||fullname.getText().toString().equals("")||RePass.getText().toString().equals(""))
                {
                    Toast toast = Toast.makeText(context, "Please check any field is blank. !", duration);       
                    toast.show();
                }
                else if(password.getText().toString().compareTo(RePass.getText().toString())==0)
                {
                    Intent k = new Intent(getApplicationContext(), ContinueRegister.class);
                startActivity(k);
                }
                else
                {
                    Toast toast = Toast.makeText(context, "Password matching is failed. !", duration);       
            toast.show();

                }
            }
            });
      TextView loginScreen = (TextView) findViewById(R.id.link_to_login);

      loginScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent m = new Intent(getApplicationContext(),LoginActivity.class);
            startActivity(m);

        }
    });
    }
} 
```

# python - pysqlite 分段错误？

> ID：12368491
> 
> 赞同：1
> 
> 时间：2012-09-11T11:17:34.657
> 
> 标签：python, segmentation-fault, homebrew, pysqlite, django-manage.py

我在 OSX 10.6 上，最近将我的 Python 从 2.6 升级到 2.7，所以我不得不升级 python 包。

这次我决定使用 brew 并使用 brew 安装 sqlite、libspatialite 和 spatialite-tools 并`brew doctor`说一切正常。当时当我启动我的本地开发服务器（Django 1.4）时，它抱怨现有的 pysqlite 不支持扩展加载（这是 SpatiaLite 所要求的）。

然后我下载了 pysqlite-2.6.3，解压，进行配置更改以启用扩展加载，然后做了：

```
python setup.py build_static
python setup.py install 
```

[如此处](http://www.maurobianchi.it/blog/2012/03/16/geodjango-spatialite-osx/)所述。

当我运行开发服务器时，现在我收到“分段错误”。由于这并不能说明什么，我在 import 语句之后将[settrace](http://docs.python.org/library/sys.html#sys.settrace)添加到 Django 的 manage.py 中：

```
def trace(frame, event, arg):
    print "%s, %s:%d" % (event, frame.f_code.co_filename, frame.f_lineno)
    return trace

sys.settrace(trace) 
```

Segmentation Fault 之前的几行如下：

```
...
call, /Users/omat/workspace/devspaces/env/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:71
line, /Users/omat/workspace/devspaces/env/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:71
call, /Users/omat/workspace/devspaces/env/lib/python2.7/encodings/utf_8.py:15
line, /Users/omat/workspace/devspaces/env/lib/python2.7/encodings/utf_8.py:16
return, /Users/omat/workspace/devspaces/env/lib/python2.7/encodings/utf_8.py:16
return, /Users/omat/workspace/devspaces/env/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:71
Segmentation fault 
```

非常感谢任何关于可能出错的想法和一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:25:53.550

很可能你有一个不兼容的 SQLite 或 Python SQLite 本机绑定库与你的 Python 混合。

Python 升级后重新安装问题中的所有软件包。

如果你想完全避免这样的问题，我的建议是使用托管环境安装 Python、SQLite 和 Python 绑定，其中所有包都来自同一个源，比如来自 Homebrew。

如果您在此环境之外手动安装包，请确保在编译本机库时使用正确的 Python 库和 Python 头文件。即，如果您使用 Homebrew 的库，请使用 Homebrew 提供的 Python 和 Python 头文件，而不是 OSX 默认值。

如何在 Python 中跟踪段错误

[http://wiki.python.org/moin/DebuggingWithGdb](http://wiki.python.org/moin/DebuggingWithGdb)

这将告诉您实际问题以及问题中失败的单个库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T12:42:39.457

我最近（2018 年）在各种系统环境中使用新创建的 Python virtualenv 遇到了这个问题。

段错误的原因最初是通过安装 Python 包`faulthander`并修改我的站点`manage.py`以激活它来隔离到 SQLite 的，因此：

```
import faulthandler
faulthandler.enable() 
```

我第一次遇到这个问题是在 MacOS 上使用旧版本的 Python（我忘记了，可能是 2.7.12 左右）。当时，通过升级到 Python 2.7.15 并重新生成 virtualenv 解决了这个问题。

接下来是运行 Python 2.7.5 的 Ubuntu 14.04。认为这是由于旧版本的 Ubuntu 我升级到 16.04 和 Python 2.7.12，但问题仍然存在。在这种情况下，我想坚持使用 Python 的标准发行版安装。

[这张 Django 票证](https://code.djangoproject.com/ticket/24080)表明旧版本的 SQLite 存在问题（我推测它与旧的 Python 发行版一起提供），并且还包含指向[此 Gist](https://gist.github.com/ziafazal/cf2b10b38b39e1795d5d8eaa993760ce)的链接，该链接解释了如何将 SQLite for Python 升级到工作版本。

因此，总而言之，在带有 Python 2.7.12 的 Ubuntu 16.04 上：

1.  安装必备软件包：

    ```
    sudo apt-get install python-dev
    sudo apt-get install libsqlite3-dev 
    ```

2.  创建并激活一个新的 Python virtualenv。

3.  创建并进入工作目录；例如

    ```
    mkdir ~/sqlite
    cd ~/sqlite 
    ```

4.  运行[本要点](https://gist.github.com/ziafazal/cf2b10b38b39e1795d5d8eaa993760ce)中描述的脚本；IE

    ```
    # install custom sqlite 3.14
    wget https://github.com/ghaering/pysqlite/archive/2.8.3.tar.gz
    wget https://www.sqlite.org/2016/sqlite-autoconf-3140100.tar.gz
    tar -xzvf sqlite-autoconf-3140100.tar.gz
    tar -xzvf 2.8.3.tar.gz
    cp -av sqlite-autoconf-3140100/. pysqlite-2.8.3/
    cd ./pysqlite-2.8.3 && python setup.py build_static install 
    ```

在这一点上，我能够安装我的软件并运行测试没有任何问题（嗯，没有任何问题不是我自己造成的：-o）。

# postgresql - PostgreSQL 中索引的运算符类

> ID：12368493
> 
> 赞同：1
> 
> 时间：2012-09-11T11:17:38.403
> 
> 标签：postgresql, indexing, operators

如何了解 PostgreSQL 中已创建的索引使用了哪个运算符类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:11:35.247

您可以查询系统目录。
多列索引可以有多个运算符类。

```
SELECT opcname
FROM  (
   SELECT unnest(indclass) AS ind_op
   FROM   pg_index
   WHERE  indexrelid = 'index_schema.index_name'::regclass
   ) i 
JOIN   pg_opclass o ON o.oid = i.ind_op; 
```

`indclass`是`oidvector`可以像任何数组一样被取消嵌套的类型。这样，您可以获得多行索引的多行。有关手册[此处](http://www.postgresql.org/docs/current/interactive/catalog-pg-index.html)和[此处](http://www.postgresql.org/docs/current/interactive/catalog-pg-opclass.html)的目录表的更多详细信息。

如果`index_schema`在您的`search_path`（并且在索引名称重复的情况下首先出现），您不必对名称进行模式限定。

# apache - FilesMatch 指令中的 Apache 重定向

> ID：12368501
> 
> 赞同：1
> 
> 时间：2012-09-11T11:18:05.780
> 
> 标签：apache, redirect

在我的 httpd-vhosts.conf 文件中，我有 30 条重写规则。我希望 .css 类型的请求不应该通过 30 条重写规则。

我用过

```
<filesMatch "!\.(css)$">
        ReWriteRule ^/welcome1.html$ /retail-en_us/home.page [P,L,QSA]
  ReWriteRule ^/welcome3.html$ /retail-en_us/home.page [P,L,QSA]
ReWriteRule ^/welcome4.html$ /retail-en_us/home.page [P,L,QSA]
ReWriteRule ^/whychoose.html$ /retail-en_us/whytdameritrade.page [P,L,QSA]
ReWriteRule ^/portfolioac/overview.html$ /retail-en_us/account-types/standard.page [P,L,QSA]
ReWriteRule ^/trade/overview.html$ /retail-en_us/investment-products.page [P,L,QSA]
ReWriteRule ^/planningforretirement.html$ /retail-en_us/retirement-planning/retirement-suite.page [P,L,QSA]
ReWriteRule ^/tradingtools/overview.html$ /retail-en_us/tools-and-platforms.page [P,L,QSA]
ReWriteRule ^/tradingtools/browsealltools.html$ /retail-en_us/tools-and-platforms/tools-and-calculators.page [P,L,QSA]
ReWriteRule ^/tradingtools/advanced.html$ /retail-en_us/tools-and-platforms/thinkorswim/features.page [P,L,QSA]
ReWriteRule ^/tradingtools/charting.html$ /retail-en_us/tools-and-platforms/trade-architect/features.page [P,L,QSA] 
```

……………………

这不起作用，就好像我正在访问 this .. 中的任何重写规则一样，它是不可访问的。如果有任何其他方式限制 .css 访问这些重写规则，请提供帮助

# html - 如何更改指针的默认图像

> ID：12368502
> 
> 赞同：9
> 
> 时间：2012-09-11T11:18:07.793
> 
> 标签：html, css, pointers, mouse-cursor

我需要更改光标的默认图像：带有一些自定义图像的指针。

创建一个类并为光标指定悬停值不是一个有效的解决方案，因为我必须将该类添加到所有已经制作的元素中，你知道吗......不是最佳的。也不能将该类添加到正文，因为带有 cursor: 指针的子项会覆盖它。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T11:24:15.087

`cursor`您可以为元素创建一个自定义`body`，除非被以后的选择器覆盖，否则它将作为默认值：

```
body {
    cursor: URL(images/cursorimage.cur); /* IE */
    cursor: URL(images/cursorimage.gif);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:09:04.160

> 我需要更改光标的默认图像：带有一些自定义图像的指针。

起初我误解了这一点，但在阅读[了这篇评论](https://stackoverflow.com/questions/12368502/html-css-cursor-how-to-change-default-image-for-pointer/12369387#comment16612213_12368621)之后，事情变得更清楚了。

您可以使用 jQuery/JavaScript 轻松完成此操作。首先，这是稍微简单的 jQuery 版本：

```
$("*").each(function() {
    var cur = $(this);
    if(cur.css("cursor") == "pointer") {
       cur.css("cursor", "url(newcursor.ico)");
    }
}); 
```

纯 JavaScript 版本：

```
var elms = document.getElementsByTagName("*");
var n = elms.length;
for(var i = 0; i < n; i ++) {
    if(window.getComputedStyle(elms[i]).cursor == "pointer") {
        elms[i].style.cursor = "url(newcursor.ico)";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T11:20:01.850

是的，你可以像这样轻松地做到这一点

```
 .anyclass{
    cursor: URL(images/cursorimagefule.gif);
    } 
```

图像文件必须为 32x32 或更小

显然 Internet Explorer 只支持 .cur 文件

***[更多信息](http://webdesign.about.com/od/styleproperties/a/aa060607.htm)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-26T20:39:56.830

这些都不适合我。我不得不使用这种略有不同的语法。注意 lowercse 'url' 、路径周围的引号和添加的 !important。此外，任何尺寸的作品。

```
body {
  cursor: url("mouseSm.png"), auto !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T11:20:39.320

`cursor` 可以在这里找到选项 http://www.echoecho.com/csscursors.htm[以](http://www.echoecho.com/csscursors.htm) 获取您可以使用的图像

```
cursor:url(uri) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T13:32:04.270

使用“cursor”属性与使用任何 CSS 属性相同——只需将其应用于所需的元素：

```
<style type="text/css">
body{
    cursor: url(mycursor.cur)
}
</style> 
```

这会将网页的默认箭头光标更改为自定义图像。

# php - 带有 mod_fcgid 的 php5 导致 500 错误 - 可能是权限错误

> ID：12368503
> 
> 赞同：8
> 
> 时间：2012-09-11T11:18:09.757
> 
> 标签：php, permissions, fastcgi, mod-fcgid

每次我请求一个 .php 文件时，我都会收到 500 错误代码。

我尝试了许多不同的文件权限并搜索了整个互联网（或者至少感觉像这样），但我找不到任何有用的东西。（找到 suexec 错误或类似的东西并不容易。但是我想，这是有权限的东西......而且可能我只是不知道某个/某个点......）

/var/log/apache2/error.log（日志级别信息）

```
[Tue Sep 11 12:47:21 2012] [info] Init: Seeding PRNG with 648 bytes of entropy
[Tue Sep 11 12:47:21 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Tue Sep 11 12:47:21 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Tue Sep 11 12:47:21 2012] [info] Init: Initializing (virtual) servers for SSL
[Tue Sep 11 12:47:21 2012] [info] mod_ssl/2.2.16 compiled against Server: Apache/2.2.16, Library: OpenSSL/0.9.8o
[Tue Sep 11 12:47:21 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/lib/apache2/suexec)
[Tue Sep 11 12:47:21 2012] [info] mod_fcgid: Process manager 30502 started
[Tue Sep 11 12:47:21 2012] [info] Init: Seeding PRNG with 648 bytes of entropy
[Tue Sep 11 12:47:21 2012] [info] Init: Generating temporary RSA private keys (512/1024 bits)
[Tue Sep 11 12:47:21 2012] [info] Init: Generating temporary DH parameters (512/1024 bits)
[Tue Sep 11 12:47:21 2012] [info] Shared memory session cache initialised
[Tue Sep 11 12:47:21 2012] [info] Init: Initializing (virtual) servers for SSL
[Tue Sep 11 12:47:21 2012] [info] mod_ssl/2.2.16 compiled against Server: Apache/2.2.16, Library: OpenSSL/0.9.8o
[Tue Sep 11 12:47:21 2012] [notice] Apache/2.2.16 (Debian) mod_fcgid/2.3.6 mod_ssl/2.2.16 OpenSSL/0.9.8o configured -- resuming normal operations
[Tue Sep 11 12:47:21 2012] [info] Server built: Apr  1 2012 06:40:08
[Tue Sep 11 12:48:08 2012] [info] mod_fcgid: server wiheha.us.to:/var/www/wiheha/conf.d/php.fcgi(30603) started
[Tue Sep 11 12:48:08 2012] [warn] [client 192.168.2.109] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server
[Tue Sep 11 12:48:08 2012] [error] [client 192.168.2.109] Premature end of script headers: test.php
[Tue Sep 11 12:48:11 2012] [info] mod_fcgid: process /var/www/wiheha/conf.d/php.fcgi(30603) exit(communication error), terminated by calling exit(), return code: 255 
```

我的设置是：Apache/2.2.16 (Debian)

文件结构：

```
drwxr-xr-x root   root    /var/
drwxr-xr-x root   root      www/
dr-xr-xr-x wiheha wiheha      wiheha/
dr-x------ wiheha wiheha        conf.d/
-r-x------ wiheha wiheha          php.fcgi
drwxr-xr-x wiheha wiheha        www/
-rw-r--r-- wiheha wiheha          favicon.ico
-rw-r--r-- wiheha wiheha          test.html
-rw-r--r-- wiheha wiheha          test.php 
```

“wiheha”是用户顺便说一句：

```
wiheha:x:1005:1005::/var/www/wiheha:/bin/false
(adduser [...] --no-create-home --disabled-password --disabled-login [...]) 
```

/var/www/wiheha/conf.d/php.fcgi

```
#!/bin/sh
exec /usr/lib/cgi-bin/php 
```

/var/www/wiheha/www/test.html

```
<!DOCTYPE html>
<html>
    (working, not much more than "lorem ipsum...")
</html> 
```

/var/www/wiheha/www/test.php

```
<?php phpinfo(); ?> 
```

/etc/apache2/sites-available/wiheha

```
<VirtualHost *:80>
    ServerName wiheha.us.to
    ServerAdmin michel.zimmer2@gmail.com
    DocumentRoot /var/www/wiheha/www
    SuexecUserGroup wiheha wiheha
    <Directory /var/www/wiheha/www/>
        AllowOverride All
        Options +ExecCGI
        AddHandler fcgid-script .php
        FCGIWrapper /var/www/wiheha/conf.d/php.fcgi .php
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

附加信息：

```
# cat /etc/debian_version
6.0.5
# apachectl -V
Server version: Apache/2.2.16 (Debian)
Server built:   Apr  1 2012 06:40:08
Server's Module Magic Number: 20051115:24
Server loaded:  APR 1.4.2, APR-Util 1.3.9
Compiled using: APR 1.4.2, APR-Util 1.3.9
Architecture:   32-bit
Server MPM:     Worker
  threaded:     yes (fixed thread count)
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/worker"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/etc/apache2"
 -D SUEXEC_BIN="/usr/lib/apache2/suexec"
 -D DEFAULT_PIDLOG="/var/run/apache2.pid"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="mime.types"
 -D SERVER_CONFIG_FILE="apache2.conf"
# /usr/lib/cgi-bin/php --version
PHP 5.3.3-7+squeeze14 with Suhosin-Patch (cgi-fcgi) (built: Aug  6 2012 20:08:51)
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies
    with Suhosin v0.9.32.1, Copyright (c) 2007-2010, by SektionEins GmbH 
```

很长......我希望，这不是太多;-)

如果有问题，请不要介意语言错误。
是的，您应该能够访问服务器：[http ://wiheha.us.to/](http://wiheha.us.to/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:40:51.403

我（意外）找到了解决方案：fcgi 脚本（以及包含它的目录）必须至少是公开可执行的（rx--x--x / 511）。

更新的文件结构：

```
drwxr-xr-x root   root    /var/
drwxr-xr-x root   root      www/
dr-xr-xr-x wiheha wiheha      wiheha/
dr-x--x--x wiheha wiheha        conf.d/
-r-x--x--x wiheha wiheha          php.fcgi
drwxr-xr-x wiheha wiheha        www/
-rw-r--r-- wiheha wiheha          favicon.ico
-rw-r--r-- wiheha wiheha          test.html
-rw-r--r-- wiheha wiheha          test.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T13:18:02.737

还要检查以下内容：

[http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html)

特殊的 PHP 注意事项

By default, PHP FastCGI processes exit after handling 500 requests, and they may exit after this module has already connected to the application and sent the next request. When that occurs, an error will be logged and 500 Internal Server Error will be returned to the client. This PHP behavior can be disabled by setting PHP_FCGI_MAX_REQUESTS to 0, but that can be a problem if the PHP application leaks resources. Alternatively, PHP_FCGI_MAX_REQUESTS can be set to a much higher value than the default to reduce the frequency of this problem. FcgidMaxRequestsPerProcess can be set to a value less than or equal to PHP_FCGI_MAX_REQUESTS to resolve the problem.

# iphone - 如何调用这个 if 语句 3 次

> ID：12368505
> 
> 赞同：-3
> 
> 时间：2012-09-11T11:18:09.900
> 
> 标签：iphone, objective-c, ios

我如何调用这个语句，我必须有 3 个 intvalue 2 才能获得 NSLOG“MOO”？现在，当我绘制一个 2 的初始值时，它会给我 NSLog moo ，但我希望它必须绘制 3 次才能获得 NSLog“MOO”。有小费吗？

```
 if ([[dictionary valueForKey:[cowssShuffled objectAtIndex:currentCow]] intValue] == 2)
 {
      NSLog(@"MOO");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:24:09.150

首先初始化

```
int count=0; 
```

然后

```
 if ([[dictionary valueForKey:[cowssShuffled objectAtIndex:currentCow]] intValue] == 2)
     {
          count++;
          if(count==2)
          {
              NSLog(@"MOO");
          }
     } 
```

# php - 如何在 PHP 中集成 Google Checkout API

> ID：12368506
> 
> 赞同：0
> 
> 时间：2012-09-11T11:18:13.000
> 
> 标签：php, google-api

我正在尝试将 Google Checkout API 集成到 PHP 中。我需要将一些输入值从商品名称、商品价格、商品数量等表单发送到 Google 结帐。

请建议我一些链接或代码来解决它....

```
$item_1 = new GoogleItem($item,      // Item name
                           $itemdesc, // Item      description
                           $total_count, // Quantity
                           10); // Unit price 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:31:54.520

[谷歌提供了示例代码](https://google-developers.appspot.com/checkout/samples/Google_Checkout_Sample_Code_PHP)，当我搜索它时很容易找到

# c# - 从 HEX 数据中获取整数值

> ID：12368511
> 
> 赞同：0
> 
> 时间：2012-09-11T11:18:36.780
> 
> 标签：c#, binary, hex, data-conversion

我有十六进制数据

```
Byte[] data = new Byte[2];
data[0]=FF;
data[1]=FF; 
```

这里数据的二进制表示为

```
1111 1111 1111 1111 
```

在这里，我只想找到从位 0 到 11 的整数值。（从左到右）但我没有得到如何以最小的复杂性找到价值？请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:21:54.077

如果您只需要特定位，则可以应用带有位掩码的逻辑与。
在您的情况下，位掩码是 0000 1111 1111 1111（位 0 到并包括 11 位）或 0FFF。

您提到“从左到右”，所以也许您想要 1111 1111 1111 0000 (FFF0) - 位 4 到并包括 15。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:21:50.833

```
short value = 0xFFFF;
value = value & 0x0FFF; 
```

此操作将四个高位变为 0。您可以将 char`val[1] = val[1] & 0x0F`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:22:31.537

将字节数组转换为字符串：

```
StringBuilder sb = new StringBuilder(ba.Length * 2);
foreach (byte b in ba)
{
       sb.AppendFormat("{0:x2}", b)
}
return sb.ToString(); 
```

然后，将字符串解析为 int

```
 int a = int.Parse("10026AB0", NumberStyles.AllowHexSpecifier); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:28:56.940

这是基本的东西...

您没有“十六进制”数据，而是 2 字节大小的整数。

在伪代码中（我不会说流利的 C#）：

```
int value=data[1]<<8 | data[0];
int maskedvalue=value & 4095; // bits 0..11 inclusive set 
```

现在 maskedvalue 保存仅设置了低 11 位的值。

# c# - c#中的通用排序，类型约束

> ID：12368514
> 
> 赞同：0
> 
> 时间：2012-09-11T11:18:41.863
> 
> 标签：c#, oop, types, constraints

很多谷歌搜索，仍然没有答案。

**问题是什么：** 我正在尝试实现通用排序方法来对自定义对象和值类型进行排序，如 int、uint 等。快速排序、堆排序等没有问题。此外，我发现计数排序不可能，因为这是特异性。所有数据必须是非负整数。

**问题：**

```
where T : struct.. 
```

不要给需要的一元运算符“+-”，据我所知，不可能强制它。如何设置正确的类型约束，或者如何强制 T 使用运算符“+-”？

```
public interface ISortMethod<T> where T : IComparable<T>
{
    T[] Sort(T[] tablica);
}

public class CountingSort<T> : ISortMethod<T>
    where T : IComparable<T> 
{
    public T[] Sort(T[] tablica)
    {
        T[] tab2 = (T[])tablica.Clone();
        return Sortuj(tab2);
    }

    private T[] Sortuj(T[] tab)
    {
        T min = tab[0];
        T max = tab[0];

        T[] res = new T[tab.Length];

        //< 0 wczesniejsza this
        for (int i = 0; i < tab.Length; i++)
        {
            if (tab[i].CompareTo(max) > 0)
                max = tab[i];

            if (tab[i].CompareTo(min) < 0)
                min = tab[i];
        }

        T[] cData = new T[**(max - min)** + 1];

        for (int i = 0; i < tab.Length; i++)
            **cData[tab[i] - min] += 1**;

        for (int i = 1; i < cData.Length; i++)
            cData[i] += cData[i - 1];

        for (int i = tab.Length-1; i >= 0 ; i--)
        {
            res[cData[tab[i] - min] - 1] = tab[i];
            cData[tab[i] - min]--;
        }

        return res;
    }
} 
```

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:27:08.323

您不能使用 C# 泛型约束强制泛型类型参数具有*任何运算符。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:35:40.143

解决方案是使用`Comparer<T>`, 或您自己的`IComparer<T>`实现，或`Comparison<T>`; 这些通过返回一个整数告诉你两个对象的顺序。您将整数与通常的运算符进行比较；如果整数为负，则第一个对象较小，如果为零，则它们相等，如果为正，则第一个对象较大。

由于无论如何您都必须使用比较器或比较器，您不妨只使用将其中之一作为参数的框架方法。

# windows - 如何在 C++/Cli 中的图片框中显示字节数组

> ID：12368517
> 
> 赞同：0
> 
> 时间：2012-09-11T11:18:50.323
> 
> 标签：windows, visual-c++, c++-cli, bytearray

用户的照片存储在 SQL 表中的二进制列中。
我将此二进制数据检索到数据集中。
如何将此数据显示为图片框中的照片？

我试过这个，但它不起作用:(

```
array<byte>^ byteBLOBData  =  gcnew array<byte>(200);
    byteBLOBData = (array<byte>^)( dataSet->Tables[ 0 ]->Rows[ 0 ]->ItemArray[ 7 ] );
    System::IO::MemoryStream^ stmBLOBData = gcnew System::IO::MemoryStream(byteBLOBData );
    pictureBox1->Image = Image::FromStream( stmBLOBData ); 
```

不幸的是，我遇到了一个异常：“参数无效”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:45:27.413

我发现了错误。在我的数据库中存储错误。我纠正了它，现在它工作正常。谢谢！

# qt - QTreeView 如何更改垂直滚动条样式（形状和颜色等）？

> ID：12368523
> 
> 赞同：2
> 
> 时间：2012-09-11T11:19:18.780
> 
> 标签：qt

您能否告诉我 QTreeView 类如何通过编码更改垂直滚动条样式（形状和颜色等）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:24:53.173

您只需要为滚动条设置样式表，例如：

```
myQTreeView->verticalScrollBar()->setStyleSheet(
    "background-color: #EAF5FF;"
    "alternate-background-color: #D5EAFF;"
); 
```

# javascript - HTML 字符串作为上下文

> ID：12368525
> 
> 赞同：-1
> 
> 时间：2012-09-11T11:19:27.213
> 
> 标签：javascript, jquery, html

使用 AJAX，我遇到了以下问题：http: [//jsbin.com/iriquf/1](http://jsbin.com/iriquf/1)

`data`变量是 HTML 字符串的基本表示。

AJAX 返回类似的字符串，但带有空格（通常）。

因此，我尝试`<h1 />`在检索到的 AJAX 数据中查找，但是，如果没有虚拟元素，我无法做到这一点。

有没有比将字符串包装成虚拟元素更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:26:24.573

改为使用

```
$(data).eq(0).text() 
```

因为`$(data)`是一个 jQuery 包装的集合返回`[h1, h2, p, div]`，您可以`h1`使用`$(data).eq(0)`

jsbin 示例：http: [//jsbin.com/iriquf/3/edit](http://jsbin.com/iriquf/3/edit)

否则，如果您不知道`<h1>`集合中元素的索引，请创建一个简单的循环来查找它

```
 $(data).each(function(i, node) {
    if (node.nodeName === 'H1') {
       console.log($(this).text()); 
    }
  }); 
```

（但我非常喜欢这种方法的虚拟包装器）

# java - 多个模块的 GWT 欢迎文件

> ID：12368527
> 
> 赞同：2
> 
> 时间：2012-09-11T11:19:32.987
> 
> 标签：java, gwt, servlets, web.xml

`web.xml` `<welcome-file-list>`GWT 应用程序的每个模块之间的关系是什么，`EntryPoint`以及`war/<myapp>/<myapp>.html`当一个应用程序有多个模块时是什么关系？有超过 1 个`<welcome-file>`吗？在这种情况下，这三者如何相互关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:10:19.493

如果在用户请求中未指定任何页面，则欢迎文件是服务器所服务的。例如，如果用户在其浏览器中输入 www.your-domain.com/，则会提供欢迎文件。但是，如果用户输入 www.your-domain.com/MyModule.jsp - MyModule.jsp 将被提供。

模块通常有一个入口点，但它们不是必须的。您可能拥有由其他模块继承的模块，并且没有自己的入口点。如果一个模块确实有一个入口点，那么应该有一个像 MyModule.html 或 MyModule.jsp 这样的主机页面来加载 MyModule。

# ruby-on-rails - 在关系中加载整数属性始终为“0”

> ID：12368530
> 
> 赞同：3
> 
> 时间：2012-09-11T11:19:43.720
> 
> 标签：ruby-on-rails, activerecord

我有一个`Animal`和一个`AnimalType`模型。一个动物**属于**一个动物类型，一个动物类型**有很多**动物。

行。

Animal 类型有一个 attr`sex`类型`integer`。

例如，当我加载**动物类型**`animal_types#index`列表时，一切正常。

但是，当我做 a 时`animal.animal_type`，性别**总是**为 0。

我的数据库是 MySQL，我使用`ruby 1.9.3`and `rails 3.2.8`。

有什么相关的问题吗？我可能做错了什么吗？

顺便说一句，我的数据库是正确的。

提前致谢。

更多：[https ://github.com/rails/rails/issues/7599](https://github.com/rails/rails/issues/7599)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:43:19.130

难道这不是一个懒惰/急切的问题吗？
尝试加载您的实体`Animal.include(:animal_type).all`或类似的东西

# regex - 正则表达式匹配最后一个字符和字符串

> ID：12368540
> 
> 赞同：2
> 
> 时间：2012-09-11T11:20:07.870
> 
> 标签：regex

我有一个如下所示的 URL...

> /images/home/img/digits.png

我需要使用正则表达式或类似的方法从 URL 中获取“数字”。我正在使用正则表达式，因为相同的代码将被复制，并且文件名的长度总是不同的。

我试过使用正则表达式，我在第一个/之后和.png之前得到了所有东西，但是我需要最后一个/之后和.png之前的所有东西。

这是我一直在尝试的：

```
(?<=/)(.*)(?=.png) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:23:38.957

```
"/images/home/img/digits.png".match(/\/([^\/]*)\.png/i) 
```

返回

```
["/digits.png", "digits"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T11:22:05.510

你真的很亲近。`(?<=/)([^/]*)(?=\.png$)`应该管用。

我添加的三件事执行以下操作：

1.  `[^/]*`匹配任何不包含 的字符`'/'`，因此匹配不能包含任何斜杠。
2.  停止匹配任何字符`\`之前的。`.png``.`
3.  将其`$`锚定到字符串的末尾。

此外，如果您只想匹配数字部分而不关心其余部分，则不需要括号，`[^/]*`因为您使用的前瞻和后瞻量词不包含在匹配中。所以在上面的模式中，唯一会返回的是匹配的内容`[^/]*`。这可以在隐式组 0 中找到，或者`Match.Value`如果您使用的是 .NET，则可以在其中找到。

总结所有这些，我会使用的是`(?<=/)[^/]*(?=\.png$)`. 如果您还想匹配，添加不区分大小写的标志也是值得的`"/images/home/img/digits.PNG"`。

# ruby-on-rails - Ruby on Rails：email_field 在页面加载时插入了值

> ID：12368544
> 
> 赞同：1
> 
> 时间：2012-09-11T11:20:28.273
> 
> 标签：ruby-on-rails, ruby, email, field

我有一个接收用户电子邮件的字段

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>

    <div class = "field">Email: 
      <%= f.email_field :email, :class => "email" %></div>

<% end %> 
```

每次我加载页面时，电子邮件文本框已经`'`插入了一个，用户必须删除它才能正确插入他们的电子邮件。

当我期望使用 chrome 的元素时。我可以看到电子邮件字段的值为 is `"'"`。我该如何删除它？提前致谢

编辑：

用户.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :firstname, :lastname

  # attr_accessible :title, :body
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:23:38.147

您应该在`form_for @user`上面有一个（或类似的）行。局部变量由您的控制器填充。查看控制器代码，如果有填充“'”的内容或查看模型，如果有默认值，则将电子邮件字段设置为“'”。

要更改用户数据的架构定义，请创建一个新的数据库迁移：

```
rails generate migration no_default_for_user_email 
```

这将在 /db/migrate 中创建一个新文件，其中包含具有两个函数的迁移定义：

```
def up
    change_column :users, 'email', :string, default: ""
end

def down
    change_column :users, 'email', :string, default: "'"
end 
```

这应该会更新您的数据库定义。

# android - Android中的通知动画

> ID：12368551
> 
> 赞同：1
> 
> 时间：2012-09-11T11:20:42.550
> 
> 标签：android

我想在 Android 中创建通知动画。我使用以下链接完成了一个示例应用程序，

[通知栏自定义视图中的动画](https://stackoverflow.com/questions/4688052/animation-in-notification-bar-cutsom-view)

它仅在 Motorola Droid Razr (v 4.0.3) 上运行良好。其余设备未按预期工作。如果您有任何解决方案，请告诉我。

谢谢，

# c# - 如何以特定格式存储数据？在所见即所得？

> ID：12368556
> 
> 赞同：5
> 
> 时间：2012-09-11T11:20:58.977
> 
> 标签：c#, javascript, jquery, asp.net

我正在使用 WYSIWYG 窗口 4 接收用户的输入，因此他可以输入粗体、斜体等字体。如何存储这些数据，以便当我在其他页面上显示时，返回相同的字体样式和格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:24:17.383

WYSIWYG 只不过是一个带有“Contenteditable”属性的 Div 标签，这将有助于捕获粗体、斜体等，并且您看到的内容是 html 的渲染版本。

如果您想获取 HTML，只需获取 contenteditable div 的 innerHTML，它将为您提供 html 代码。如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:23:50.563

您可以创建一个名为 的类`FontMetadata`，并将数据存储在一个元组中，例如

```
Tuple<Data, DataStyle> 
```

# android - Android：如何制作 AutoCompleteTextView SingleLine？

> ID：12368558
> 
> 赞同：19
> 
> 时间：2012-09-11T11:21:05.327
> 
> 标签：android, autocomplete, android-edittext, autocompletetextview

```
 <AutoCompleteTextView
        android:id="@+id/product"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="product"
        android:singleLine="true"
        android:textColor="@color/white"
        android:textSize="15dp" /> 
```

这是我的 AutoCompleteTextView 代码。

问题是我想输入一些文本，然后单击`Next`软键盘。`Next`没有出现在软键盘上，但没有将光标移到下一个`EditText`. 在同一个屏幕上，所有的 EditText 都具有相同的代码并且它们工作正常。`EditText`在这种情况下AutoCompleteTextView 与正常情况有什么不同吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-11T11:26:56.480

在 xml 中的 AutoCompleteTextView 中设置`android:imeOptions="actionNext"`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-14T21:00:01.663

`android:inputType="text"`在布局 XML 中设置`AutoCompleteTextView`元素对我有用；将输入限制为一行并且存在`Next`软键。在我还`Next`添加.`AutoCompleteTextView``android:imeOptions="actionNext"`

我在参考站点中找不到任何支持这一点的内容，但 Eclipse 中的 Content Assist 似乎表明`android:singleLine`已弃用（至少在这种情况下）：

> 将文本限制为单个水平滚动行，而不是让它换成多行，并在您按下回车键时前进焦点而不是插入换行符。* 已弃用：此属性已弃用。改用“maxLines”来更改静态文本的布局，并使用 inputType 属性中的“textMultiLine”标志代替可编辑的文本视图（如果同时提供了 singleLine 和 inputType，则 inputType 标志将覆盖 singleLine 的值）。[布尔]"

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-27T12:56:26.373

只需在下面添加这两行。没事的。

```
android:imeOptions="actionNext"
android:inputType="text" 
```

或者，

```
android:imeOptions="actionDone"
android:inputType="text" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-19T11:32:28.463

我的 AutoCompleteTextView 也有同样的问题。在 android:singleLine="true" 弃用之前它工作正常。但是一旦我设置了 android:maxLines="1"，直到我把 android:inputType="text"

```
AutoCompleteTextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:inputType="text"
    android:imeOptions="actionNext"
    /> 
```

通过将 android:inputType="text" 放在 AutoCompleteTextView 它对我有用。

可以帮助你们:)

# java - 测量 ClassLoader 加载类或 jar 所需的时间

> ID：12368559
> 
> 赞同：2
> 
> 时间：2012-09-11T11:21:05.403
> 
> 标签：java, performance, time, classloader

如何知道 ClassLoader 加载特定的 .class 或 .jar 需要多少时间？

JVM 选项`-verbose:class`允许知道 ClassLoader 加载 .class 和 jar 的顺序。但它并没有告诉我一个特定的 .jar 是否需要很长时间才能加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:27:25.390

您可以覆盖 Classloader 并将测量值添加到 compile() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:07:22.093

BTrace 会有所帮助

这是一个示例脚本，只是跟踪类负载，您可以自己添加时间 [http://kenai.com/projects/btrace/sources/hg/content/samples/Classload.java?rev=267](http://kenai.com/projects/btrace/sources/hg/content/samples/Classload.java?rev=267)

# php - PHP，MySQL PDOException的死锁异常代码？

> ID：12368561
> 
> 赞同：4
> 
> 时间：2012-09-11T11:21:10.150
> 
> 标签：php, mysql, pdo, deadlock

使用 PHP PDO MySQL，异常模式。

[MySQL] 死锁的 PDOException 代码是否存在？

如果没有，是否有替代方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T17:38:29.487

[PDO::errorInfo, PDOException::errorInfo](http://www.php.net/manual/en/pdo.errorinfo.php)

[MySQL 服务器错误代码和消息；错误：1213 SQLSTATE：40001 (ER_LOCK_DEADLOCK)](http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html#error_er_lock_deadlock)

```
/*[...]*/

//error mode is exception
$pdoDBHandle->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);

try
{
    /*[...]*/
}
catch(\PDOException $exc)
{
    if(
        $exc->errorInfo[0]==40001 /*(ISO/ANSI) Serialization failure, e.g. timeout or deadlock*/;

        && $pdoDBHandle->getAttribute(\PDO::ATTR_DRIVER_NAME)=="mysql"
        && $exc->errorInfo[1]==1213  /*(MySQL SQLSTATE) ER_LOCK_DEADLOCK*/
    )
    {
        /*[...]*/
    }
    else
        throw $exc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-05T13:01:46.293

我遇到了上面的示例还不够的情况，因为 \PDOException 被捕获并与其他消息一起再次抛出。我必须捕获 \Throwable 并检查所有 $exc->getPrevious() 以查看它是否是 instaceof \PDOException。作为安全网，如果错误不是 \PDOException 的实例，我检查了错误消息以查看它是否包含短语“尝试重新启动事务”

# android - 如何更改操作栏文本和背景属性？

> ID：12368565
> 
> 赞同：4
> 
> 时间：2012-09-11T11:21:20.020
> 
> 标签：android, android-layout, android-actionbar, android-styles

这是我对操作栏的风格。我想更改文本和背景属性。但这些更改并未应用于应用程序。我在哪里犯错？

这是我的 style.xml

```
<style name="AppTheme" parent="@android:style/Theme.Holo.Light">    
<item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
<item name="android:windowBackground">@color/white</item>
<item name="android:background">@color/white</item>
<item name="android:drawableBottom">@color/actionbar_title_color</item>
<item name="android:textSize">@dimen/actionbar_text_size</item>
<item name="android:textColor">@color/black</item>    
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:45:33.590

有效。这是我的错误。我正在更改值文件夹中的样式。因为我正在研究 ICS，所以我应该在 values-14 文件夹中更改它。

# macos - 从终端播放 Quicktime 电影

> ID：12368568
> 
> 赞同：11
> 
> 时间：2012-09-11T11:21:34.997
> 
> 标签：macos, quicktime, automator

是否可以从命令行（即终端）播放 Quicktime 电影 (.mov) 文件？

我还没有找到实现这一目标的方法。我可以使用 Automator 脚本来完成，但如果我可以直接从终端运行它会更好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-11T11:40:38.537

```
open movie_file_name.mov 
```

将从终端打开默认播放器。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-24T11:07:54.220

```
open -a "quicktime player" movie_file_name.mov 
```

如果需要，您可以指定其他播放器，例如 VLC：

```
open -a vlc movie_file_name.mov 
```

# java - .jar 中的 NoSuchFileException 但在 Eclipse 中没有

> ID：12368571
> 
> 赞同：2
> 
> 时间：2012-09-11T11:21:49.820
> 
> 标签：java, eclipse, jar, embedded-resource, nosuchfileexception

当我在 Eclipse 中编译并运行我的程序时，它会毫无例外地运行。但是当我将它导出到可运行的 jar 或普通 jar 时，它找不到我的设置文件。

我的路径是：

```
String path= "src/settings/settings.ini"; 
```

在 Eclipse 中，它毫无例外地运行，但在 jar 中，它会立即抛出异常。

如何使 jar 像在 eclipse 中一样工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:24:05.093

而在 jar 中，该文件不再是物理文件，因此您可能需要将其作为 Stream 读取

```
getClassLoader().getResourceAsStream("settings/settings.ini"); 
```

考虑到 settings.ini 在指定路径的类路径（运行时）下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:33:19.287

如果 ini 文件位于 jar 存档中，请按如下方式读取：

```
inputstream = getClass()
          .getClassLoader()
          .getResourceAsStream("settings/settings.ini"); 
```

否则，如果它位于您的 jar 存档之外，您应该在**./settings/settings.ini**中移动或复制您的 ini 文件（相对于应用程序的当前工作目录）。

# javascript - 如何将 smarty 变量与 javascript 变量进行比较？

> ID：12368577
> 
> 赞同：1
> 
> 时间：2012-09-11T11:22:02.847
> 
> 标签：javascript, smarty

我在 javascript 中有一个函数，我必须将 smarty 变量与 javascript 变量进行比较：在以下情况下 selected_variable 是 javascript 变量。

```
{if $Id == selected_variable}
{ foreach from=$actions item="action" key='actionId' name="actions" }
{ if $smarty.foreach.actions.last }
'{ $action|escape:'javascript':'UTF-8' }'                           
{ else }
'{ $action|escape:'javascript':'UTF-8' }',
{/if}   
{/foreach}
{/if} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:17:06.227

你说你有一个javascript函数。如果它是一个 JS 函数，它就像

```
if(selected_variable == '{$yourSmartyVar}') {
 ...
} 
```

但是根据您的代码片段，您似乎正在尝试使用 smarty 进行比较。AFAIK，您不能以您显示的方式将客户端变量传递给 smarty，因为 smarty 是服务器端。

# php - 在 PHP 类之间传递变量需要帮助

> ID：12368580
> 
> 赞同：0
> 
> 时间：2012-09-11T11:22:15.857
> 
> 标签：php, mysqli

我有一个“Database.php”，它可以处理数据库连接，并将 mysql 连接移交给调用数据库类的类。

数据库.php

```
<?php

class Database {

    private $domain = "localhost";
    private $usr = "root";
    private $pwd = "password";
    private $dbname = "testdb";
    private $db;

    function __contruct() {
    }

    function connect() {
        $this->db = mysqli_connect($domain, $usr, $pwd, $dbname);
        if ($db->connect_errno > 0) {
                die("DbConn Fail: \n ".$mysqli->connect_error);
        } else {
            return $this->db;
        }
    }
}

?> 
```

我有以下测试类试图调用 Database 类来检索连接，然后在它的 SQl 语句中使用该连接......

测试.php

```
<?php
include('Database.php');
$db = new Database();
$conn = $db->connect();
$sql = "SELECT custid FROM `testdb`.`customer`";
$res = mysqli_query($conn, $sql);
$nrows = mysqli_num_rows($res);
echo "Num Rows Found: " . $nrows . "<br>";
if($res) {
echo "fetching...<br>";
    while ($row = mysqli_fetch_assoc($res)){
        echo "Found Customer ID: " . $row['custid'] . "<br>";
    }
}

?> 
```

我面临的问题是在“Database.php”类中。每当通过“connect()”函数建立成功连接时，Database 类都会向调用“Database”类的类返回有效的 mysql 连接，但从下面的演示中它无法按预期工作。

我可以知道我应该怎么做才能解决上述问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:24:05.320

您应该包括链接而不是类初始化：

```
$res = mysqli_query($conn, $sql) 
```

你的连接也是错误的：

```
$this->db = mysqli_connect($this->domain, $this->usr, $this->pwd, $this->dbname); 
```

还：

```
if ($this->db->connect_errno > 0) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:25:38.690

命名你的`mysqli_connect`结果变量`$db`而不是 ie`$connectionHandle`是在自找麻烦，正如你所看到的，你刚刚做到了 - 因为你将`$db`对象传递给`mysqli_query()`而不是连接句柄。正确的代码应该是：

```
$res = mysqli_query($conn, $sql); 
```

不要“保存”变量名。它**总是**很痛。

# c# - 从任务返回 null

> ID：12368583
> 
> 赞同：4
> 
> 时间：2012-09-11T11:22:20.613
> 
> 标签：c#, task-parallel-library

```
var hs = new HashSet<int>();

foreach(var item in mainclass)
{
    Task<List<Class1>> cl1Task = Task.Factory.StartNew<List<Class1>>(() =>
    {
        if (!hs_VersiodIDs.Contains(item.VersionID))
        {
             return new List<Class1>(.....);
        }
        else
        {
            return null;
        }
    });

    Task.WaitAll(cl1Task );
} 
```

它不等待任务完成。问题在于 return null 那么我怎样才能返回空任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:26:16.780

您的代码没有意义有两个原因：

1.  启动一个不包含任何长时间运行代码的任务是没有用的。你不会从中获得任何好处
2.  等待任务在启动后立即完成，完全否定了任务的效果：你仍然阻塞你的主线程。

如果任务中的代码真的那么简单，请将您的代码更改为：

```
foreach(var item in mainclass) 
{
    List<Class1> result;
    if (!hs_VersiodIDs.Contains(item.VersionID)) 
    { 
         result = new List<Class1>(.....); 
    } 
    else 
    { 
        result = null; 
    } 
} 
```

如果任务中的代码确实做了一些昂贵的事情，请将您的代码更改为：

```
var tasks = new List<Task>();
foreach(var item in mainclass)     
{     
    Task<List<Class1>> cl1Task = Task.Factory.StartNew<List<Class1>>(() =>     
    {     
        if (!hs_VersiodIDs.Contains(item.VersionID))     
        {     
             return new List<Class1>(.....);     
        }     
        else     
        {     
            return null;     
        }     
    });     

    tasks.Add(cl1Task); 
} 

// note, WaitAll is outside the loop, so now our tasks can all run in parallel
Task.WaitAll(tasks.ToArray()); 
```

# android - 如何在 Android 中处理 WKT 数据？

> ID：12368586
> 
> 赞同：3
> 
> 时间：2012-09-11T11:22:30.753
> 
> 标签：android, google-maps, wkt

我有这种格式的数据：

```
POINT(73.0166738279393 33.6788721326803)
MULTILINESTRING((73.0131224998036 33.679001500419,73.0119635003153 33.678392400389,73.0119205001311 33.6783781002692),(73.0131224998036 33.679001500419,73.0136031002029 33.6783443999742),(73.0136031002029 33.6783443999742,73.0147099372139 33.67685138958),(73.0147099372139 33.67685138958,73.0150124997272 33.6770292997624,73.0154158996241 33.6773507003746,73.0157677998441 33.6776577999676,73.016042399737 33.6779721004322,73.0162998999205 33.6783149004124,73.0166738279393 33.6788721326803)) 
```

现在我想在 Android 的 Google 地图上绘制它。我制作了一组名称和坐标。

```
ArrayList<String> coordinates = new ArrayList<String>
coordinates.add(tvcoor.getText().toString()); 
```

这会产生一个错误：当我运行我的应用程序时，它会强制停止。以及如何在地图上绘制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:51:24.567

试试这个 ，

```
String str;
ArrayList<String> coordinates = new ArrayList<String>(); 
```

首先从 textview 获取字符串。

```
str = textview.getText().toString(); 
```

二是去掉括号。

```
str = str.replaceAll("\\(", "");
str = str.replaceAll("\\)", ""); 
```

然后用逗号分割并将值添加到arraylist。

```
String[] commatokens = str.split(",");
        for (String commatoken : commatokens) {
            System.out.println("-" + commatoken + "-");
            coordinates.add(commatoken);
        } 
```

然后我们在索引位置获得单独的坐标值，

```
 for (int i = 0; i < coordinates.size(); i++) {

            String[] tokens = coordinates.get(i).split("\\s");
            for (String token : tokens) {
                System.out.println("-" + token + "-");
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T16:56:03.517

[对于其他有同样情况的人，我发现了一个名为JTS Topology Suite](http://www.vividsolutions.com/jts/JTSHome.htm)的开源库，它能够解析 Java 中的 WKT 字符串。我的应用程序中的一个基本示例如下所示：

```
WKTReader wktReader = new WKTReader();
Geometry geometry = wktReader.read(routeResponse.get(yourWKTMultilineString); 
```

然后，您可以像这样遍历各个行：

```
for(int lineIndex = 0; lineIndex < geometry.getNumGeometries(); lineIndex++){
    Geometry lineGeometry = geometry.getGeometryN(lineIndex);
    //... other stuff
} 
```

如有必要，您可以像这样获取每条线的各个坐标：

```
Coordinate[] lineCoordinates = lineGeometry.getCoordinates(); 
```

Note that the above is a very general example which follows the OP's code.

Ultimately, this might save others from having to roll their own WKT parser.

* * *

**Nutiteq-Specific Code:**
In my case, I needed to draw a multiline string as a vector layer on a [Nutiteq map](https://github.com/nutiteq/hellomap3d). I realize the OP was asking about the google map android API, however in case any reader is also using Nutiteq (or if this algorithm is relevant for other map APIs), this is the nutiteq specific code:

```
geomLayer.clear(); // clear the old vector data

Projection projection = geomLayer.getProjection(); // Map's projection type

// Iterate through the individual lines of our multi-line geometry
for(int lineIndex = 0; lineIndex < geometry.getNumGeometries(); lineIndex++){
    Geometry lineGeometry = geometry.getGeometryN(lineIndex);
    ArrayList<MapPos> linePositions = new ArrayList<MapPos>(lineGeometry.getCoordinates().length);

    // Iterate through this line's coordinates
    for(Coordinate coordinate : lineGeometry.getCoordinates()){
        // My server returns coordinates in WGS84/EPSG:4326 projection while the map
        // uses EPSG3857, so it is necessary to convert before adding to the
        // array list.
        MapPos linePosition = new MapPos(projection.fromWgs84(coordinate.x, coordinate.y));
        linePositions.add(linePosition);
    }

    // Finally, add the line data to the vector layer
    Line line = new Line(linePositions, new DefaultLabel("some label"), lineStyle), null);
    geomLayer.add(line);
} 
```

Note that the `lineStyleSet` and `geomLayer` are created previously in the activity's `onCreate` and can be researched [here](https://github.com/nutiteq/hellomap3d/wiki/Vectorobjects). The `geomLayer` is simple; here is my `lineStyleSet`:

Note about lineStyle, it was created previously and is saved as an instance variable, like so:

```
Bitmap lineMarker = UnscaledBitmapLoader.decodeResource(getResources(), R.drawable.line);

this.lineStyleSet = new StyleSet<LineStyle>();
LineStyle lineStyle = LineStyle.builder().setLineJoinMode(LineStyle.NO_LINEJOIN).setWidth(0.2f).setColor(Color.RED).setBitmap(lineMarker).build();
lineStyleSet.setZoomStyle(minZoom, lineStyle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T11:39:57.217

A **WKT** (well-known-text) file describes an ISO 19107 Geometry. Personally I try to avoid re-inventing the wheel, or "mess" with them in self written parsers ( you never know, whether your function covers all situation just because it worked once).

So here's another nice looking open source API, with examples, tutorials:

[http://docs.geotools.org/](http://docs.geotools.org/)

And here the WKTParser class

[http://docs.geotools.org/stable/javadocs/org/geotools/geometry/text/WKTParser.html](http://docs.geotools.org/stable/javadocs/org/geotools/geometry/text/WKTParser.html)

**Android Studio:** Simply add this to your app `build.gradle` file:

```
dependencies {
    /* your other dependencies */
    compile 'org.opengis:geoapi:3.0.0'
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-01T11:25:23.683

Here is a function I wrote to convert a **simple** (no holes etc.) polygon given in WKT into an array of LatLang:

```
public static LatLng[] GetPolygonPoints(String poligonWkt){
    ArrayList<LatLng> points = new ArrayList<LatLng>();
    Pattern p = Pattern.compile("(\\d*\\.\\d+)\\s(\\d*\\.\\d+)");
    Matcher m = p.matcher(poligonWkt);
    String point;

    while (m.find()){
        point =  poligonWkt.substring(m.start(), m.end());
        points.add(new LatLng(Double.parseDouble(m.group(2)), Double.parseDouble(m.group(1))));
    }
    return points.toArray(new LatLng[points.size()]);
} 
```

You can then use the array to add the polygon on the map:

```
LatLng[] points = GeographyHelper.GetPolygonPoints(shapeWkt);

Polygon p = mMap.addPolygon(
   new PolygonOptions()
      .add(points)
      .strokeWidth(4)
      .strokeColor(Color.RED)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-30T16:52:06.647

Just to expand on Paul's answer, since his answer helped me so much...

```
private void setUpMap(SomeObjectWithLocationAsWKT r) {

    List<LatLng> points = new ArrayList<LatLng>();
    WKTReader wktReader = new WKTReader();
    LineString line = null;
    Coordinate lineCentroid = null;
    Coordinate[] lineCoordinates = null;

    // if our object's WKT geometry is not null - map it
    if (r.geowkt != null) {

        // use the JTS (Java Topology Suite) WKTReader to read that WKT!
        try {
            line = (LineString) wktReader.read(r.geowkt);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // using (JTS) again to getCoordinates of the linestring
        lineCoordinates = line.getCoordinates();

        // Iterate through the line's coordinates & assign to List<LatLng> points
        for(Coordinate coordinate : lineCoordinates){
            points.add(new LatLng(coordinate.x, coordinate.y));
        }

        // add Polyline to Google Map
        Polyline p = mMap.addPolyline(
        new PolylineOptions()
        .addAll(points)
        .width(4)
        .color(Color.RED));
    }
}

// an example of zooming to the centroid of the WKT geometry 
// again, using (JTS - Java Topology Suite)
private void handleNewLocation(Location location) {
    LatLng latLng = null; 
    WKTReader wktReader = new WKTReader();
    LineString line = null;
    Coordinate lineCentroid = null; 

    // if our object's WKT geometry is not null - zoom to it
    if (r.geowkt != null) {
        try {
            line = (LineString) wktReader.read(r.geowkt);
            lineCentroid = line.getCentroid().getCoordinate();
            latLng = new LatLng(lineCentroid.x, lineCentroid.y);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } else {
        // just default to whatever location was passed in
        Log.d(TAG, location.toString());
        double currentLatitude = location.getLatitude();
        double currentLongitude = location.getLongitude();
        latLng = new LatLng(currentLatitude, currentLongitude);
    }
    CameraUpdate yourLocation = CameraUpdateFactory.newLatLngZoom(latLng, 19);
    mMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));
    mMap.animateCamera(yourLocation);
} 
```

# android - GCM ANDROID 无法向 Android 设备发送通知/消息

> ID：12368589
> 
> 赞同：0
> 
> 时间：2012-09-11T11:22:45.063
> 
> 标签：android, google-cloud-messaging

我正在尝试在我的 android mobile 中获取 gcm 通知。我的设备已注册，我也可以取消注册，在浏览器中它显示设备已注册，但是当我单击向设备发送消息时它给了我 500 错误，我在 Apache 上运行它错误如下

```
 java.net.ConnectException: Connection timed out: connect
 java.net.PlainSocketImpl.socketConnect(Native Method)
 java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
 java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
 java.net.Socket.connect(Socket.java:519)
 com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:550)
 com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:141)
 sun.net.NetworkClient.doConnect(NetworkClient.java:163)
 sun.net.www.http.HttpClient.openServer(HttpClient.java:394)
 sun.net.www.http.HttpClient.openServer(HttpClient.java:529)
 sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:271)
 sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:328)
        sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:778)
sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:881)
sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
com.google.android.gcm.server.Sender.post(Sender.java:479)
com.google.android.gcm.server.Sender.post(Sender.java:458)
com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:170)
com.google.android.gcm.server.Sender.send(Sender.java:121)
com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:82)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

请帮帮我..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:44:01.170

500是服务器错误，这可能是由于http post到google服务器的格式错误或网络问题，检查你的post方法各种参数。了解更多信息

```
 http://developer.android.com/guide/google/gcm/gcm.html 
```

# sum - 2 个字段值的简单 SUM - 莲花笔记

> ID：12368594
> 
> 赞同：-1
> 
> 时间：2012-09-11T11:22:56.937
> 
> 标签：sum, lotus-notes, field

我有两个字段：number1，number2。它们是可编辑的。

我有另一个计算字段编号 3。在其默认值中我编码：number1+number2。它不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:08:24.850

您已正确设置。但是，您还没有触发计算。为此，您需要：

*   保存表格

*   按下运行命令 ViewRefreshFields 的按钮

*   将第一个和第二个更改为对话框列表，其中设置了选项以在关键字更改时刷新字段。

*   编写一些客户端 JavaScript 代码并处理数字字段的 onchange 事件

更新：

我相信js代码将是：

```
var form = document.forms[0];
form.number3.value = form.number1.value + form.number2.value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:18:32.920

如果这是针对 Notes 客户端并且您的表单很简单（没有大量查找或复杂的计算），那么在表单属性的信息选项卡上有一个名为“自动刷新字段”的简单属性。这应该触发计算而无需任何额外的编码。

但是，我发现了这个 IBM[技术](http://www-01.ibm.com/support/docview.wss?uid=swg21099674)说明，其中提到了此属性不起作用的一些情况，但提供了一种潜在的解决方法。

# php - 在整个页面中加粗 PHP 中的特定变量

> ID：12368595
> 
> 赞同：0
> 
> 时间：2012-09-11T11:23:03.190
> 
> 标签：php

```
<?php
# session

session_start();

# check that session is set and is valid

if(!isset($_SESSION['login']))
   { header('Location: login.php');
}
?>
<body>
<div class="maincontainer">
  <div class="keywordhead">
    <div align="center"><img src="Images/keyword_title.png" width="243" height="56" /></div>
  </div>
  <div class="results">
  <p>
    <?php

      $kword = $_POST["kword"];

      function boldText($text, $kword) {
    return str_replace($kword, "<strong>$kword</strong>", $text);
}
      $testin1 = substr($kword,0,1);
if($testin1 == "") {
print "<strong>No Keyword or a Keyphrase Entered, Please return to the '<a href='keyword_search.php'>Keyword Search Page</a>'</strong>";
}
else {
   // Connects to your Database 
 mysql_connect("localhost", "root") or die(mysql_error()); 
 mysql_select_db("test") or die(mysql_error()); 
}
 mysql_real_escape_string($kword); 
 $data = mysql_query("select company_name, section_name, question, answer from company, rfp, section, question_keywords
where company.company_id = rfp.company_id
and rfp.rfp_id = question_keywords.rfp_id
and question_keywords.section_id = section.section_id
and keywords like '%$kword%';") 
 or die(mysql_error()); 

  echo "<table border=0 cellpadding=10>";
echo "<tr align = center bgcolor=white>
<td><b>Company Name</b></td><td><b>Section</b></td><td><b>Question</b></td><td><b>Answer</b></td>" ; 
 while($info = mysql_fetch_array( $data )) 
 { 

 echo "<tr>"; 
 echo "<td width = 130px>".boldText($info['company_name'], $kword) . "</td> ";
 echo "<td width = 60px>".boldText($info['section_name'], $kword) . " </td>"; 
 echo "<td width = 300px>".boldText($info['question'], $kword) . " </td>";
 echo "<td width = 600px>".boldText($info['answer'], $kword) . " </td></tr>"; 
 } 
 echo "</table>"; 
 ?>

  </p>
  </div>
  <div class="footer"><a href="logout.php"><br />
  Logout</a> | <a href="index.php">Index</a>  |  <a href="keyword_search.php">Back</a></div>
</div>
</body>
</html> 
```

我对 PHP 比较陌生，我很好奇某个功能是否可行。我有一个关键字搜索，结果页面的代码在上面。我想在页面上出现 $kword 变量的任何地方加粗。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:26:51.583

您可以创建一个函数来执行此操作，并在回显变量之前调用它。

代替：`$info['question']`使用`boldText($info['question'], $kword)`

```
function boldText($text, $keyword) {
    return str_ireplace($keyword, "<strong>$keyword</strong>", $text);
} 
```

作为旁注，不要忘记在 SQL 查询中使用 mysql_real_escape_string() 之前使用它进行转义`$kword`，[或者](http://www.php.net/manual/en/function.mysql-real-escape-string.php)更好的是，考虑使用[MySQLi 或 PDO](http://www.php.net/manual/fr/mysqlinfo.api.choosing.php)，因为强烈建议不要使用 mysql 扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:30:13.393

您可以在每个 Print 语句中使用类似的内容吗？

```
str_replace($kword, "<b>$kword</b>", $info[...]) 
```

（或 CSS 例如 <span style='font-weight:bold'>...</span> 如果您愿意）。

# google-maps - 将街景小人添加到 Google 地图 iframe

> ID：12368601
> 
> 赞同：2
> 
> 时间：2012-09-11T11:23:26.407
> 
> 标签：google-maps, iframe

有没有办法通过 iframe 在网站上显示的谷歌地图上添加/启用街景小人？我在网站内容中添加了一个谷歌地图 iframe，需要添加街景，但尽可能少“努力”（无需切换到实际的 js API）

# webserver - 失去对 websphere 管理控制台的访问权限

> ID：12368610
> 
> 赞同：0
> 
> 时间：2012-09-11T11:23:40.737
> 
> 标签：webserver, websphere, admin

我对 websphere 很陌生。我正在按照内部指南在 websphere 中设置我们公司的一个应用程序，但是我在管理控制台中更改了一个参数，并且在重新启动服务器后，我们无法使用管理控制台访问。![在此处输入图像描述](../Images/08838449c6dbecef09fd7b3b862de432.png)

我检查了第一个选项，在第二个选项之前，使用用户 admin 和密码 admin。现在，因为它说“自动生成服务器身份”，我不知道我需要在管理控制台中输入什么用户和密码组合..

*   我所指的管理控制台是位于 server:port/ibm/console 中的管理控制台。谢谢，这对我来说确实是一个严重的问题，我非常感谢我能得到的任何帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:27:09.913

在进行更改之前，您仍然应该能够使用您为管理员用户使用的任何密码。服务器用户 ID 不用于限制对管理控制台的访问（请参阅[Websphere Application Server 中使用的安全属性“服务器用户身份”是什么？](https://stackoverflow.com/questions/10526875/what-is-security-property-server-user-identity-used-for-in-websphere-applicati)）。

尽管如此，由于您目前无法访问管理控制台（我假设您的意思是显示了 admin colsole 登录页面，但由于密码错误，您无法获得管理员用户身份验证），我建议的第一件事是转全局安全性，以便您可以使用管理控制台来修复您的设置并重新启用安全性。关闭安全性后，在管理控制台登录期间将不会要求您输入密码。[使用 wsadmin 技术说明更改 WebSphere Application Server 中的安全设置](http://www-01.ibm.com/support/docview.wss?uid=swg21173912)提供了逐步说明。

如果您不确定您为管理员用户使用的密码，则必须在启用安全性之前在已配置的用户存储库中重置密码（例如，如果您已配置 LDAP，则必须在 LDAP 处重置密码）。如果您正在使用联合存储库（如果您没有更改它，这是默认设置），管理员用户很可能驻留在基于文件的存储库中，这是联合存储库的第一个成员。在这种情况下，您只需按照[文件注册表技术说明中如何重置管理员密码中的](https://www-304.ibm.com/support/docview.wss?uid=swg21392427)步骤来重置您的密码。否则，您可以尝试[更新您的 WAS 管理员密码](http://publib.boulder.ibm.com/infocenter/sametime/v8r0/index.jsp?topic=/com.ibm.help.sametime.advanced.doc/stv_adm_t_adm_pw.html)中记录的替代方法（链接来自 Lotus 文档，但仍然适用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T03:06:08.063

**鉴于**您的终端中有命令行“ **xmlstarlet** ”，并且，

*   WAS_HOME = 是您的 Websphere 根位置
*   PROFILENAME = 是您的个人资料名称
*   CELLNAME = 是您的单元格名称

**那么**，

```
xmlstarlet edit --update "/security:Security[@enabled='true']/@enabled" --value "false" $WAS_HOME/profiles/$PROFILENAME/config/cells/$CELLNAME/security.xml > /tmp/security.xml
cp /tmp/security.xml $WAS_HOME/profiles/$PROFILENAME/config/cells/$CELLNAME/security.xml 
```

**摘要**：您只是通过使用*xmlstarlet*以编程方式将**enabled="true"**属性更改为**enabled="false"来编辑正确的****security.xml**文件。请注意，sed、awk、ed 和其他 GNU 工具缺乏必要的能力来正确处理 XML 的嵌套树结构。

# mongodb - 在 Heroku 上使用 Play 框架设置 MongoLab 或 MongoHQ

> ID：12368613
> 
> 赞同：3
> 
> 时间：2012-09-11T11:23:43.673
> 
> 标签：mongodb, heroku, playframework

我似乎找不到在 Heroku 上使用 Play Framework 设置 MongoHQ 或 MongoLab 的任何说明。

有没有类似于我可以遵循的 Spring 框架（我相信） [https://devcenter.heroku.com/articles/mongohq#use-with-java的东西？](https://devcenter.heroku.com/articles/mongohq#use-with-java)

或者有没有人可以提供任何指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T20:50:07.460

MongoHQ 将 MONGOHQ_URL 添加到您的 Heroku 配置环境

```
heroku config 
```

返回类似的东西

```
MONGOHQ_URL: mongodb://heroku:1234@someserver.mongohq.com:10071/app1234 
```

在应用程序中使用这个环境变量来获取连接 Mongo 的 URI。我有一个可以在 Procfile 中指定的覆盖属性

```
web: target/start -Dhttp.port=$PORT -Dmongodb.uri=$MONGOHQ_URL 
```

在 Play 模型类中，我连接并查询 Mongo：

```
val mongoUri = MongoUri(Play.configuration.getString("mongodb.uri").get)

val mongoCollection = mongoUri.connectDB match {
  case Left(thrown) => throw thrown
  case Right(database) => {
    mongoUri.username.map { username =>
      mongoUri.password.map { password =>
        database.underlying.authenticate(username,password)
      }
    }
    database.apply("mycollection")
  }
}

def findSomething(something:String) = {
  val searchTerm = MongoDBObject("something" -> something)
  mongoCollection.findOne(searchTerm) map { mongoObject =>
    Logger.info("Found %s".format(mongoObject.getAs[String]("somethingElse")))
  }
} 
```

做出的假设：Play 2.0、Scala、[Casbah](https://github.com/mongodb/casbah)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:30:15.510

这是一个使用 MongoHQ、Play 2、Scala 并在 Heroku 上运行的示例应用程序： [https ://github.com/jamesward/play2bars/tree/scala-mongodb](https://github.com/jamesward/play2bars/tree/scala-mongodb)

没有真正的说明，只是一些简单的代码。

# netbeans - 将 sun wtk J2ME 模拟器系统时间从 UTC 更改为主机本地时间

> ID：12368615
> 
> 赞同：0
> 
> 时间：2012-09-11T11:23:52.130
> 
> 标签：netbeans, java-me, emulation, java-wireless-toolkit

我正在开发一个 J2ME midlet 项目。我正在使用 Sun WTK 2.5.2_01。问题是模拟器设备上的时间是UTC，但我需要它是我的主机本地时间。我试图在 wtk 首选项中找到一个设置，但无济于事。

这种行为正常吗？我可以改变它吗？或者我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:22:42.620

我自己多年来一直有这个问题，我终于想出了一个解决方法。WTK 在其 lib 目录中有一个设置文件 system.config。从那里你应该找到一个属性： `"com.sun.cldc.util.j2me.TimeZoneImpl.timezone"`

它在我的文件中被注释掉了，在这里您可以设置 WTK 使用的时区。对我来说，将其设置为`"GMT+03:00"`有效。但是，我怀疑每次夏季或冬季时间开始时都需要更改设置。

# lua - 是否有任何关键字像 const 或其他任何在 lua 中与它做同样工作的关键字？

> ID：12368623
> 
> 赞同：34
> 
> 时间：2012-09-11T11:24:22.520
> 
> 标签：lua, constants

lua 中有 const 关键字吗？或者其他类似的东西？因为我想将我的变量定义为 const 并防止变量值的变化。提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2019-10-03T18:28:26.923

我知道这个问题已经七年了，但是**Lua 5.4** 终于给`const`开发者带来了！

```
local a <const> = 42
a = 100500 
```

会产生错误：

```
lua: tmp.lua:2: attempt to assign to const variable 'a' 
```

文档：[https](https://www.lua.org/manual/5.4/manual.html#3.3.7) ://www.lua.org/manual/5.4/manual.html#3.3.7 。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-11T11:44:14.263

Lua 不*自动*支持常量，但您可以添加该功能。例如，将常量放入表中，并使用 metatable 将表设为只读。

这是如何做到的： http: [//andrejs-cainikovs.blogspot.se/2009/05/lua-constants.html](http://andrejs-cainikovs.blogspot.se/2009/05/lua-constants.html)

复杂之处在于您的常量名称将不仅仅是“A”和“B”，而是类似于“CONSTANTS.A”和“CONSTANTS.B”的名称。您可以决定将所有常量放在一个表中，或者将它们逻辑分组到多个表中；例如数学常数的“MATH.E”和“MATH.PI”等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T12:35:45.230

如前所述`const`，Lua 中没有。

您可以使用这个小解决方法来“保护”全局定义的变量（与受保护的表相比）：

```
local protected = {}
function protect(key, value)
    if _G[key] then
        protected[key] = _G[key]
        _G[key] = nil
    else
        protected[key] = value
    end
end

local meta = {
    __index = protected,
    __newindex = function(tbl, key, value)
        if protected[key] then
            error("attempting to overwrite constant " .. tostring(key) .. " to " .. tostring(value), 2)
        end
        rawset(tbl, key, value)
    end
}

setmetatable(_G, meta)

-- sample usage
GLOBAL_A = 10
protect("GLOBAL_A")

GLOBAL_A = 5
print(GLOBAL_A) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T11:47:18.820

Lua 或类似结构中没有`const`关键字。

最简单的解决方案是在评论中写一个很大的警告，告诉禁止写入这个变量......

然而，技术上可以通过向全局环境（或在 Lua 5.2 中）提供元表来禁止对*全局*变量的写入（或读取）。`_G``_ENV`

像这样的东西：

```
local readonly_vars = { foo=1, bar=1, baz=1 }
setmetatable(_G, {__newindex=function(t, k, v)
  assert(not readonly_vars[k], 'read only variable!')
  rawset(t, k, v)
end}) 
```

然后，如果您尝试将某些内容分配给`foo`，则会引发错误。

# scope - 报告中存在的措施的范围声明？

> ID：12368624
> 
> 赞同：1
> 
> 时间：2012-09-11T11:24:23.340
> 
> 标签：scope, ssas, mdx

我有一个度量值，我将其用作计算多个计算度量值的分母。用户通常拖放分子、分母和计算度量来查看报告。

它工作正常。但是现在我想实现业务定义的抑制规则。例如：如果计算的 % <=5，则分母值应显示为 *。

我已经使用 SCOPE 语句来处理这个问题。但是现在我最终为单分母度量定义了多个 SCOPE 语句。问题是，正如您一定已经猜到的那样，一个范围声明的结果与为相同分母度量定义的其他范围声明发生冲突。

例如：即使分母应该显示特定 % 计算的实际值，它也会用 * 抑制它，因为使用相同分母度量的其他 % 计算返回 <=5 值。

我的问题是：是否有可能通过 MDX SCOPE 或类似的东西找出实际使用的度量值，或者用户在报告中拖放的度量值？

可能是一个愚蠢的问题，但请帮忙。或者给我一些不同的观点来解决这个问题。

谢谢，

招架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:51:46.093

回答您帖子中“是否有可能找出实际使用的措施？”的部分。我建议这个技巧：`SetToStr(StrToSet("Axis(1)"))`

这将获取行（或列）上的项目列表并将其作为字符串返回。在 Micrsoft 环境中，您可以使用它`InStr()`来搜索 Measure 名称，并决定如何处理`IIF()`. 我希望这能给你一个起点！我有一种感觉，MDX 可能会变得很长而且很乱，会伤害你的大脑。

“如果计算的 % 为 <=5，则分母值应显示为 *”问题的更简单解决方案是向 DLL 添加一些代码，以在网页上呈现单元集。只需检测您是否在相关 Measure 的列中，然后检查单元格的值是否 <=5 并决定在该点向用户输出什么。这可能对您的大脑造成的伤害小于所需的 MDX。

# iphone - UISplitView Ipad 自定义搜索栏

> ID：12368625
> 
> 赞同：-1
> 
> 时间：2012-09-11T11:24:25.280
> 
> 标签：iphone, ipad, uisplitviewcontroller

我想在 UISplitView 栏上添加（自定义栏）一个搜索栏和 3 个按钮，可以吗？请以正确的方式指导我。任何教程或链接真的很受欢迎。

谢谢

![在此处输入图像描述](../Images/637865cc965f29f6582134ea68d3c832.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:34:00.510

在所需的 xib 顶部拖动一个 UIToolBar 并首先拖动 BarButtonItem 然后将搜索栏拖动到其中..最后是另一个 barbuttonItem 以获得所需的自定义 Bar

# wpf - WPF中的位图类

> ID：12368626
> 
> 赞同：3
> 
> 时间：2012-09-11T11:24:28.097
> 
> 标签：wpf, bitmap, kinect, emgucv

我正在使用 Winforms 中的 Emgu Cv 使用 Kinect 进行人脸识别。现在，我想转移到 WPF。但是，EmguCv 库仅支持**Bitmap**类。

我可以在 WPF 中使用 Bitmap 类（在 Winforms 中使用）吗？如果没有，是否有其他方法可以在 WPF 中使用 Emgu cv 和 kinect？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T12:46:13.760

[`System.Drawing.Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)不能直接用作 WPF 的图像源，所以必须将其转换为[`System.Windows.Media.Imaging.BitmapSource`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx).

最好的方法是使用[`Imaging.CreateBitmapSourceFromHBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.interop.imaging.createbitmapsourcefromhbitmap.aspx).

您可以使用扩展方法：

```
[DllImport("gdi32")]
private static extern int DeleteObject(IntPtr o);

public static BitmapSource ToBitmapSource(this System.Drawing.Bitmap source)
{
    if (source == null)
    {
        throw new ArgumentNullException("source");
    }

    IntPtr ip = source.GetHbitmap();
    try
    {
        return System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(ip,
            IntPtr.Zero, Int32Rect.Empty,
            System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());
    }
    finally
    {
        DeleteObject(ip);
    }
} 
```

请注意，您必须调用`DeleteObject`，因为会`Bitmap.GetHbitmap()`泄漏 GDI 句柄（请参阅[此](https://stackoverflow.com/a/1118557/63011)答案）。

拥有`BitmapSource`后，您可以使用[`Image`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)控件并通过设置[`Source`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)属性来显示它。

您可以在本文中阅读有关 WPF 成像的更多信息：[成像概述](http://msdn.microsoft.com/en-us/library/ms748873.aspx)

# android - Android - 检测活动是否由于屏幕方向变化而开始

> ID：12368627
> 
> 赞同：4
> 
> 时间：2012-09-11T11:24:29.120
> 
> 标签：android, android-intent, android-fragments, android-activity, android-actionbar

是否有一种理智的方法可以检测 an`Activity`是否由于屏幕方向更改而重新启动，或者它只是因为 an`Intent`到达而启动？

在我的应用程序中，我有一个`FragmentActivity`包含两个`Fragment`s 的。用户可以`Fragment`使用选项卡在这些 s之间导航`ActionBar`。还规定 an `Intent`to this`Activity`可以携带一个`EXTRA`可以将指示器保存到要选择的默认选项卡的指示符。因此，当`Activity`启动时，默认情况下可以选择两个选项卡中的任何一个，由`EXTRA`.

当用户从默认选择的选项卡导航到另一个选项卡时，就会出现此问题。在旋转更改时，将`Activity`重新启动以再次选择默认选项卡，`EXTRA`而不是选择用户导航到的选项卡。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:32:39.867

通过 onSaveInstanceState 发送选中的选项卡名称

```
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tabName", "tab1");
} 
```

并在 onCreate 中获取值

```
if (savedInstanceState != null) {
            String tabname = savedInstanceState.getString("tabName");
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T11:37:27.007

创建一个全局标志，指示用户当前所在的选项卡。

在你的`onPause()`和`onStop()`方法中更新它。

您可以从您的`onStart()`和`onRestart()`方法再次设置它。

如需进一步参考，请查看[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

如果您不喜欢 Android 处理屏幕旋转的默认方法，您可以自行处理。在 AndroidManifest.xml 文件中为您的活动设置 android:ConfigChanges 属性：

```
<activity android:name="com.myapp.MyActivity"
      android:label="@string/app_name"
      android:configChanges="orientation"
      >
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

在这里， android:configChanges 中的方向标志告诉系统 Activity 希望自己处理旋转。Android 将调用您的 Activity 的 onConfigurationChanged() 方法，这允许您自己处理屏幕旋转。它不会再杀死并重新启动您的活动。

# javascript - 逗号的正则表达式后跟空格或逗号

> ID：12368628
> 
> 赞同：8
> 
> 时间：2012-09-11T11:24:30.523
> 
> 标签：javascript, regex

是否可以使用多个分隔符制作正则表达式？例如，我想拆分一个可以有两种形式的字符串：1.“string1,string2,string3”或 2.“string1,string2,string3”。我一直在尝试在 javascript 中执行此操作，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-11T11:26:37.237

只需使用正则表达式`split()`：

```
var string = "part1,part2, part3, part4,    part5",
    components = string.split(/,\s*/); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/tUkua/)。

我使用`*`而不是`?`仅仅因为它不允许空白或许多空白。而`?`匹配零个或一个空格（这正是您所要求的，但即便如此）。

顺便说一句，如果逗号之前可能有空格，那么可能值得将`split()`正则表达式修改为：

```
var string = "part1,part2  , part3, part4,    part5",
    components = string.split(/\s*,\s*/);
console.log(components);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/tUkua/1/)。

它将提供的字符串拆分为零个或多个空格，后跟一个逗号，后跟零个或多个空格。当然，这可能完全没有必要。

参考：

*   [正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。
*   [`string.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T11:26:08.473

是的，使用以下命令将空格 ( `\s`) 设为可选`?`：

```
var s = "string1,string2,string3";
s.split(/,\s?/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T11:29:42.907

除了席尔瓦

以防万一您怀疑它可以有多个空间然后使用（或没有空间）

```
var s = "string1, string2,  string3";
s.split(/,\s*/); 
```

# java - 无法使用 ksoap2 序列化日期

> ID：12368631
> 
> 赞同：5
> 
> 时间：2012-09-11T11:24:42.863
> 
> 标签：java, android, .net, web-services, ksoap2

无论我尝试什么格式，我都无法将日期从我的 Android (Java) 应用程序发送到 .NET Web 服务。我已经尝试将它作为 a `GregorianCalendar`、 a `Date`、 a发送`Calendar`......没有任何效果。

我收到“无法序列化”错误作为运行时异常。我正在使用 ksoap2 来管理我的 Web 服务调用。有任何想法吗？

以下错误：

```
java.lang.RuntimeException: Cannot serialize: java.util.GregorianCalendar...
java.lang.RuntimeException: Cannot serialize: java.util.Date... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:24:42.863

最终通过几个死胡同设法追踪到这一点。ksoap 库似乎不知道如何处理通过 web 服务调用发送的日期或双精度 - 您需要告诉它如何处理它们，否则它会出现序列化错误。

实现这一点的方法是实现`MarshalDate`类：[本教程](http://seesharpgears.blogspot.com/2010/11/implementing-ksoap-marshal-interface.html)包含实现它所需的代码。

根据我的经验，ksoap2 的`MarshalDate`类已经在库中，并且该类将完成这项工作，但默认情况下不会将其注册到信封上。通过将其注册到信封（如下所示），问题得到解决。对于双精度数或其他浮点数，请`MarshalFloat`改用。

要解决此问题，请在`SoapSerializationEnvelope`通过`HttpTransport`拨打电话之前：

```
new MarshalDate().register(envelope); 
```

`envelope`你在哪里`SoapSerializationEnvelope`。

我在导入类时偶然发现 ksoap2 库有`MarshalDate`和`MarshallFloat`类，因为 Eclipse 为我提供了两个导入它的选项——其中一个在 ksoap2 中。包含的课程就足够了，我删除了我的自定义课程。

# python - 在 Django/Python 中设置属性时出错

> ID：12368640
> 
> 赞同：1
> 
> 时间：2012-09-11T11:25:21.123
> 
> 标签：python, django

我定义了一个函数 _set_thumbnail 将属性附加到对象。

```
 class StdImageField(ImageField):
    def __init__(self, verbose_name=None, name=None, width_field=None,
        height_field=None, sizes=None, **kwargs):

        self.sizes = sizes
        super(StdImageField, self).__init__(verbose_name, name, width_field,
            height_field, **kwargs)

    def contribute_to_class(self, cls, name):
        """Call methods for generating all operations on specified signals"""
        super(StdImageField, self).contribute_to_class(cls, name)
        signals.post_save.connect(self.resize_image, sender=cls)
        signals.post_init.connect(self._set_thumbnail, sender=cls)

    def resize_image(self, instance=None, **kwargs):
        if getattr(instance, self.name):
            filename = getattr(instance, self.name).path
            shutil.copyfile(filename, '%s/%d-0.jpg' % (os.path.dirname(filename), instance._get_pk_val()))
            for i, size in enumerate(self.sizes):
                img = Image.open(filename)
                img = ImageOps.fit(img, size, method=Image.ANTIALIAS)
                new_filename = '%s/%d-%d.jpg' % (os.path.dirname(filename), instance._get_pk_val(), i + 1)
                img.save(new_filename, "JPEG", quality=100)

    def _set_thumbnail(self, instance=None, **kwargs):
        if getattr(instance, self.name):
            for i, size in enumerate(self.sizes):
                setattr(getattr(instance, self.name), 'image%d' % (i + 1), '%s%d-%d.jpg' % ('s/', instance._get_pk_val(), i + 1)) 
```

它可以通过 Django admin 完美运行。但是，在通过前端使用它时出现错误：

TypeError（ %d 格式：需要一个数字，而不是 NoneType ）

任何建议将不胜感激。谢谢。

# java - JSF 2 验证选项

> ID：12368644
> 
> 赞同：2
> 
> 时间：2012-09-11T11:25:38.113
> 
> 标签：java, jsf-2

我正在使用 JSF 2 和 Primefaces。但是我现在需要做一些更复杂的验证，特别是跨字段验证，也许还有一些涉及表达式语言的验证（这样我就可以在我的 xhtml 页面中进行条件验证）。

我不认为我可以用我当前的设置来做这些，但我一直在阅读我可以使用的各种其他插件，例如：

*   接缝
*   外部值
*   JSR303

只是想知道最推荐的方法是什么。ExtVal 是否需要 MyFaces 作为先决条件？如果是这样，MyFaces 会与 PrimeFaces 冲突吗？

我已经用不同的罐子做了一些试验，并遇到了一些看起来像冲突的东西，所以感谢任何反馈。

[更新] 根据我的评论，我使用了 OmniFaces，这只是下载 jar 文件然后将命名空间添加到我的页面的情况：

```
...
      xmlns:o="http://omnifaces.org/ui"
      xmlns:of="http://omnifaces.org/functions"
... 
```

然后我将此用作测试用例（以确保密码和确认密码都相同，但仅当其中一个具有值时）。这很容易解决我的两个“问题”。

```
<o:validateEqual id="equal" components="password confirmPassword" disabled="#{editUserAdminController.user.password != '' || editUserAdminController.user.confirmPassword}"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:39:30.120

编辑：JSF 可以使用一个实现，`JSR303`以防应用程序/服务器提供一个。跨领域验证有点棘手，但绝对可以使用可用的技术来完成。

您可能还想看看[OmniFaces 库](http://omnifaces.org)——它具有跨领域验证以及许多其他有用的功能，并且不依赖于特定的 JSF 框架。

# msdeploy - msdeploy 和跳过未命名 x 的目录

> ID：12368655
> 
> 赞同：2
> 
> 时间：2012-09-11T11:26:23.033
> 
> 标签：msdeploy

我试图跳过除一个之外的所有目录 - Templates 目录 - 但我无法让它工作。模板目录包含在跳过的目录中，或者，如果我从正则表达式的开头删除 \，我将跳过整个 MyTestWebsite 目录....

```
"C:\Program Files\IIS\Microsoft Web Deploy V2\msdeploy.exe" 
-verb:sync -source:contentPath="MyTestWebsite" 
-dest:contentPath="MyTestWebsite",computerName=Server2 
-skip:objectName=dirPath,absolutePath=\\(?!^Templates\\$).* 
-skip:objectName=filePath,absolutePath=keepalive\.htm -whatif 
```

很可能是我的正则表达技巧让我失望了，所以我欢迎任何帮助。

谢谢马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:21:45.267

你在正确的道路上，但你的`^`and`$`应该在表达式的远端：

```
-skip:objectName=dirPath,absolutePath=^(?!\\Templates\\).*$ 
```

# ruby-on-rails - Rails 3.2.7 自动重新加载库

> ID：12368664
> 
> 赞同：1
> 
> 时间：2012-09-11T11:26:45.827
> 
> 标签：ruby-on-rails, ruby, spree

我已经尝试了大多数解决方案，例如`require_dependency`添加和启用文件夹，但仍然没有骰子。`autoload``application.rb``lib`

这是我的应用程序的设置方式：

我有`lib/index_tank_searcher.rb`：

```
 class IndexTankSearcher < Spree::Core::Search::Base
    def method
    end
  end 
```

我`Spree::Config.searcher_class = IndexTankSearcher`在`config/intializers/spree.rb`.

关于如何确保`index_tank_searcher.rb`自动重新加载而不在每次更改时重新启动服务器的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:06:35.177

重新加载类不会改变现有的类。要卸载的类从它们的常量中取消分配，并分配一个新副本。这在控制台中很容易验证

```
1.9.3p194 :002 > User.object_id
 => 70274894338560 
1.9.3p194 :003 > reload!
Reloading...
 => true 
1.9.3p194 :004 > User.object_id
 => 70274935456220 
```

但是`Spree::Config.searcher_class`仍然设置为原始`IndexTankSearcher`类。

您可以添加一个[to_prepare](http://guides.rubyonrails.org/configuring.html#configuring-action-dispatch)回调，该回调将在开发中的每个请求上调用，但在生产中仅一次（在启动时）

# c# - Web 服务调用返回“需要 401 授权”

> ID：12368666
> 
> 赞同：0
> 
> 时间：2012-09-11T11:26:46.553
> 
> 标签：c#, .net, web-services

我正在调用使用凭据来验证请求的第三方 Web 服务。下面是代码。

```
SmsWSIService smsService = new SmsWSIService();
smsService.Credentials = new NetworkCredential(smsUserName, smsPassword);
smsService.PreAuthenticate = true;                

SendSMS.SendSMS objSendSmsReq = new SendSMS.SendSMS();
objSendSmsReq.From = smsFrmMobNo;
objSendSmsReq.Message = smsMsg
objSendSmsResp = smsService.SendSMS(objSendSmsReq); 
```

但它给了我错误“需要401授权”。我确定我传递的凭据是正确的。当我使用 SOAP UI 3.5 检查 web 服务时，它没有给出任何错误。

请帮助我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:16:25.247

您是否在 IIS 上安装了 Windows 身份验证？

# r - R：枚举矩阵的列组合

> ID：12368674
> 
> 赞同：3
> 
> 时间：2012-09-11T11:27:08.603
> 
> 标签：r

（编辑说明：我将标题更改为“R：枚举矩阵的列组合”，从“R grep：将字符串矩阵匹配到列表”以更好地反映解决方案）

我正在尝试将字符串矩阵与列表匹配：以便我最终可以在稍后对 a 的操作中将该矩阵用作映射`data.frame`。

第一部分按预期工作，返回所有可能的对、三元组和四元组组合的列表（尽管这种方法可能创建了我的绑定？）：

```
priceList <- data.frame(aaa = rnorm(100, 100, 10), bbb = rnorm(100, 100, 10), 
            ccc = rnorm(100, 100, 10), ddd = rnorm(100, 100, 10), 
            eee = rnorm(100, 100, 10), fff = rnorm(100, 100, 10), 
            ggg = rnorm(100, 100, 10))

getTrades <- function(dd, Maxleg=3)
{
    nodes <- colnames(dd)
    tradeList <- list()
    for (i in 2:Maxleg){
        tradeLeg <- paste0('legs',i)
        tradeList[[tradeLeg]] <- combn(nodes, i)
    }
    return(tradeList)
}

tradeCombos <- getTrades(priceList, 4) 
```

我现在想把这个可能的组合列表变成交易。例如：

```
> tradeCombos[[1]][,1]
[1] "aaa" "bbb" 
```

需要*最终*成为`priceList[,2] - priceList[,1]`，等等。

我已经尝试了一些使用`grep`类似命令的方法，并且觉得我已经接近了以下内容：

```
LocList <- sapply(tradeCombos[[1]], regexpr, colnames(priceList)) 
```

但是该格式不太适合下一步。

理想情况下，`LocList[1]`会返回如下内容：`1 2`

假设`tradeCombos[[1]][,1] == "aaa" "bbb"`.

有人可以帮忙吗？

__

在以下所有答案的帮助下，我现在得到了：

```
colDiff <- function(x) 
{
    Reduce('-', rev(x))
}

getTrades <- function(dd, Maxleg=3)
{
    tradeList <- list()
    for (i in 2:Maxleg){
        tradeLeg <- paste0('legs',i)
        tradeLegsList <- combn(names(dd), i, 
            function(x) dd[x], simplify = FALSE)
        nameMtx <- combn(names(dd), i)
        names(tradeLegsList) <- apply(nameMtx, MARGIN=2, 
            FUN=function(x) paste(rev(x), collapse='*'))
        tradeList[[tradeLeg]] <- lapply(tradeLegsList, colDiff) 
    }
    return(tradeList)
}

tradeCombos <- getTrades(priceList, 4) 
```

这保留了组成部分的名称，这是我试图实现的一切。

非常感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:20:55.487

## 哇...忽略下面的所有内容并跳转到更新

正如我在评论中提到的，您可以使用`combn`. 此解决方案不会将您带到最后一步，而是创建一个`data.frames`. `lapply`从那里开始，无论您的最后一步是什么，都可以轻松使用。

这是简化的功能：

```
TradeCombos <- function(dd, MaxLeg) {
  combos = combn(names(dd), MaxLeg)
  apply(combos, 2, function(x) dd[x])
} 
```

要使用它，只需指定您的数据集和您正在寻找的组合数量。

```
TradeCombos(priceList, 3)
TradeCombos(priceList, 4) 
```

* * *

继续前进：@mplourde 向您展示了如何使用`Reduce`连续减法。这里将采用类似的方法：

```
cumDiff <- function(x) Reduce("-", rev(x))
lapply(TradeCombos(priceList, 3), cumDiff) 
```

通过将`TradeCombos`函数的输出保持为 a `list`of `data.frame`s，您将为灵活性留下更多空间。例如，如果你想要行总和，你可以简单地使用`lapply(TradeCombos(priceList, 3), rowSums)`; 对于您想要应用的任何功能，都可以采用类似的方法。

# 更新

我不确定为什么@GSee 没有将其添加为答案，但我认为这非常棒：

得到你`list`的`data.frame`s 如下：

```
combn(names(priceList), 3, function(x) priceList[x], simplify = FALSE) 
```

根据需要推进。（例如，使用`cumDiff`我们创建的函数：`combn(names(priceList), 2, function(x) cumDiff(priceList[x]), simplify = FALSE)`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:47:04.810

`lapply`这可以使用、`apply`和来获得您的最终目标`Reduce`。

```
lapply(tradeCombos, 
 function(combos) 
 apply(combos, MARGIN=2, FUN=function(combo) Reduce('-', priceList[rev(combo)]))) 
```

`combo`是 中的组合矩阵之一的列`tradeCombos`。`rev(combo)`反转列，因此最后一个值是第一个。从 a 中选择列子集的`R`语法`data.frame`是`DF[col.names]`，因此`priceList[rev(combo)]`是 的子集，`priceList`仅包含 中的列`combo`，以相反的顺序排列。`data.frame`s 实际上只是`list`s 列，因此任何旨在迭代`list`s 的函数都可以用于迭代 a 中的列`data.frame`。`Reduce`就是这样一种功能。`Reduce`接受一个函数（在本例中为减法函数`-`）和一个`list`参数，然后`list`使用上一次调用的结果连续调用 中的参数的函数，例如 (((arg1 - arg2) - arg3) - arg4)。

您重命名其中的列，`tradeCombos`以便最终的列名反映它们的来源：

```
tradeCombos <- lapply(tradeCombos, 
    function(combos) {
        dimnames(combos)[[2]] <- apply(combos, 
            MARGIN=2, 
            FUN=function(combo) paste(rev(combo), collapse='-')
        )
        return(combos)
    }
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T11:44:41.153

`tradeCombos`是一个`list`with`matrix`元素。因此，`tradeCombos[[1]]`是一个更适合`matrix`哪个。`apply`

```
apply(tradeCombos[[1]],1,function(x) match(x,names(priceList)))
      [,1] [,2]
 [1,]    1    2
 [2,]    1    3
 [3,]    1    4
 [4,]    1    5
 [5,]    1    6
 [6,]    1    7
 [7,]    2    3
 [8,]    2    4
 [9,]    2    5
[10,]    2    6
[11,]    2    7
[12,]    3    4
[13,]    3    5
[14,]    3    6
[15,]    3    7
[16,]    4    5
[17,]    4    6
[18,]    4    7
[19,]    5    6
[20,]    5    7
[21,]    6    7 
```

顺便说一句，无论如何，您都可以使用字符串形式进行子集化，例如`priceList[,"aaa"]`

# android - 多色EditText

> ID：12368677
> 
> 赞同：0
> 
> 时间：2012-09-11T11:27:10.960
> 
> 标签：android, android-layout

我正在开发一个 Android 应用程序。

现在我想将用户的输入输入到 EditText 中。我想在最后一个句号之后以黑色显示文本，在最后一个句号之前以红色显示文本。

例如，如果用户在 EditText 中键入以下句子：

```
'my name is john.I am from India.I Love Android' 
```

我想用黑色显示“我爱 Android”，用红色显示句子的前半部分。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:28:17.720

用于`SpannableString`将属性应用到您的文本。您可能想阅读这里的博客条目：http: [//www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:05:08.757

通过以下方式聆听文本的变化：

```
 editText.addTextChangedListener(new TextWatcher() { 
        public void afterTextChanged(Editable s) { 
            if (!colorHasSet) {
                makeColorText();
            }
            colorHasSet = false;
        }
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}
        public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}
    }); 
```

然后使用 WebnetMobile 链接到的教程声明一个函数来为文本着色。

```
public void makeColorText() {
     SpannableString ss = new SpannableString(textEdit.getText());
    // customize ss here
    // ...
    colorHasSet = true;
    editText.setText(ss);
} 
```

`colorHasSet`应定义标志布尔变量以防止 stackOverflowException。

这不是一个带有即时彩色文本的完整所见即所得编辑器，您应该做一些技巧以使其完整并适合您的需求，这由您自己完成。

# playframework-2.0 - 如何使用play的incrementalAssetsCompilation

> ID：12368679
> 
> 赞同：1
> 
> 时间：2012-09-11T11:27:15.763
> 
> 标签：playframework-2.0

有没有人能够根据[http://www.playframework.org/documentation/2.0.3/Assets](http://www.playframework.org/documentation/2.0.3/Assets)使用增量资产编译来加速他们的开发？

我无法让它工作，如果我将 incrementalAssetsCompilation := true 添加到我的 Build.scala 文件中，我会收到编译错误

> Build.scala:16: not found: value incrementalAssetsCompilation [error] incrementalAssetsCompilation := true [error] ^ [error] 发现一个错误

我的 Build.scala 看起来像这样，

> ```
> val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
>     // Add your own project settings here
>     incrementalAssetsCompilation := true
> ) 
> ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:36:06.167

我认为有关此功能的提交没有进入 2.0.3 版本:-(

如果您查看[PlayKeys.scala 文件](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/PlayKeys.scala)的主版本，您会找到`incrementalAssetsCompilation`密钥，但在[2.0.3 版本](https://github.com/playframework/Play20/blob/2.0.3/framework/src/sbt-plugin/src/main/scala/PlayKeys.scala)中没有。

# r - iGraph 创建子图

> ID：12368680
> 
> 赞同：4
> 
> 时间：2012-09-11T11:27:17.067
> 
> 标签：r, igraph

我有以下问题：
我有以下图表：`g6`其中不包括`isolate vertices`. 顶点主要分为两个`ethnic groups`，作为属性给出，即：`mestizo and saraguro`。
所以我运行`subgraph`saraguros 的选项如下：

> g2saraguro <- subgraph(g6, which(V(g6)$ethnic=="saraguro"))
> 摘要(g2saraguro)

确实有效：

> 顶点：166
> 边：330
> 定向：TRUE
> 没有图形属性。
> 顶点属性：ii、村庄、parroquia、canton、provinz、kindR、ethnic、situation、researcha。
> 边缘属性：问题、活动。

但是，如果我尝试对 进行相同`mestizo`操作，则会出现问题，因为它只是识别：

> s2mestizo <- subgraph(g6,V(g6)$ethnic=="mestizo")
> 摘要(s2mestizo)
> 顶点：2
> 边：3有向
> ：TRUE
> 没有图形属性。
> 顶点属性：ii、村庄、parroquia、canton、provinz、kindR、ethnic、situation、researcha。
> 边缘属性：问题、活动。

但实际上并非如此，如果我看到：`V(g6)$ethnic`，`mestizo`大多数`!!`
我真的不知道问题出在哪里，`igraph 0.6`形成 a 的程序 `subgraph`应该以那种或类似的方式，没有`1-based indexing`。
非常感谢
弗拉基米尔的任何
帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:03:20.323

您忘记`which`在第二种情况下使用该功能；即，而不是

```
s2mestizo <- subgraph(g6,V(g6)$ethnic=="mestizo") 
```

你应该写

```
s2mestizo <- subgraph(g6, which(V(g6)$ethnic=="mestizo")) 
```

另请注意，如果您使用的是 igraph 0.5.x 或更早版本，则必须从结果中减去 1，`which`因为 igraph 是基于 0 的索引。这已在 igraph 0.6 中修复，因此如果您使用 igraph 0.6 或更高版本，则无需减去 1。

**编辑**：根据您最近的评论，您似乎使用的是 igraph 0.5.x 或更早版本（因为`summary`0.6 的输出格式不同）。在这种情况下，您*必须*从结果中减去 1，`which`因为 igraph 0.5.x 和更早版本使用从零开始的顶点索引。因此，正确的行应该是：

```
s2mestizo <- subgraph(g6, which(V(g6)$ethnic=="mestizo")-1) 
```

# get - Twitter API：如何获取用户 ID，谁最喜欢特定的推文？

> ID：12368684
> 
> 赞同：22
> 
> 时间：2012-09-11T11:27:27.953
> 
> 标签：get, twitter, favorites

我正在尝试获取有关将特定推文添加到收藏夹的用户的信息，但我在文档中找不到。

twitter 可以这样做是不公平的，但没有将此方法作为 API 提供。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-10T04:52:42.010

显然，这样做的唯一方法是[抓取](http://web.archive.org/web/20170712045856/http://hovet.biz/blog/?p=28)Twitter 的网站：

```
import urllib2
from lxml.html import parse

#returns list(retweet users),list(favorite users) for a given screen_name and status_id
def get_twitter_user_rts_and_favs(screen_name, status_id):
    url = urllib2.urlopen('https://twitter.com/' + screen_name + '/status/' + status_id)
    root = parse(url).getroot()

    num_rts = 0
    num_favs = 0
    rt_users = []
    fav_users = []

    for ul in root.find_class('stats'):
        for li in ul.cssselect('li'):

            cls_name = li.attrib['class']

            if cls_name.find('retweet') >= 0:
                num_rts = int(li.cssselect('a')[0].attrib['data-tweet-stat-count'])

            elif cls_name.find('favorit') >= 0:
                num_favs = int(li.cssselect('a')[0].attrib['data-tweet-stat-count'])

            elif cls_name.find('avatar') >= 0 or cls_name.find('face-pile') >= 0:#else face-plant

                for users in li.cssselect('a'):
                    #apparently, favs are listed before retweets, but the retweet summary's listed before the fav summary
                    #if in doubt you can take the difference of returned uids here with retweet uids from the official api
                    if num_favs > 0:#num_rt > 0:
                        #num_rts -= 1
                        num_favs -= 1
                        #rt_users.append(users.attrib['data-user-id'])
                        fav_users.append(users.attrib['data-user-id'])
                    else:                        
                        #fav_users.append(users.attrib['data-user-id'])
                        rt_users.append(users.attrib['data-user-id'])

        return rt_users, fav_users

#example
if __name__ == '__main__':
    print get_twitter_user_rts_and_favs('alien_merchant', '674104400013578240') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-11T11:46:48.273

简短的回答：你不能完美地做到这一点。

长答案：您可以通过一些努力来做到这一点，但它甚至不会接近完美。您可以使用 twitter api 监控多达 4000 个用户 ID 的活动。如果一条推文是由您监控的 4k 人之一创建的，那么您可以获得所有信息，包括收藏该推文的人。这还要求您将有关您监视的人员的所有信息推送到数据库（我使用 mongodb）。然后，您可以查询数据库以获取有关您的推文的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-31T18:56:57.810

Twitter API v2 具有新的点赞功能：

[https://twittercommunity.com/t/announcing-twitter-api-v2-likes-lookup-and-blocks-lookup/154353](https://twittercommunity.com/t/announcing-twitter-api-v2-likes-lookup-and-blocks-lookup/154353)

要获取喜欢推文的用户，请使用`GET /2/tweets/:id/liking_users`端点。

他们还在他们的[github repo](https://github.com/twitterdev/Twitter-API-v2-sample-code/tree/master/Likes-Lookup)上提供了示例代码。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2015-02-08T12:42:35.717

使用端点收藏夹/列表并将 max_id 设置为您要查找的推文。

[https://dev.twitter.com/rest/reference/get/favorites/list](https://dev.twitter.com/rest/reference/get/favorites/list)

# internet-explorer-8 - 在 Intranet 环境中覆盖 Internet Explorer 8 浏览器模式

> ID：12368687
> 
> 赞同：2
> 
> 时间：2012-09-11T11:27:37.917
> 
> 标签：internet-explorer-8, iis-6, intranet, ie8-compatibility-mode, ie8-browser-mode

我正在一家公司的 Intranet 网站上工作，其中 Internet Explorer 8（在 Windows XP 上运行，因此无法升级到 IE9）用作标准（也是唯一一个）浏览器，我正在处理兼容性视图模式特征。该网站基于 ASP.NET 2.0，Web 服务器是带有 IIS6 的 Windows Server 2003。

无法切换到任何其他浏览器，因为其他一些关键的第三方基于 Web 的应用程序需要 Internet Explorer（和 ActiveX）才能正常运行。

我想问一下，如果默认情况下为 Intranet 网站打开了兼容性视图模式，或者换句话说，如何强制 Internet Explorer 使用 IE8 浏览器模式而不是 IE8 兼容模式。

我尝试在 IIS 配置中将 X-UA-Compatible http 标头设置为 IE=Edge（或 IE=8），但它只影响文档模式，而不影响浏览器模式。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T17:42:07.940

浏览器模式是指用户代理字符串，IIRC，它控制在 HTTP 协商期间发送到服务器的 UA 字符串。唯一记录在案的控制方法是使用 F12 开发人员工具。

您可能想查看支持 Win 7 及更高版本的 Enterprise Mode[1] (EMIE)。为 IE 启用 EMIE 后，IE11 的行为和行为类似于 IE8。这包括 UA 字符串。

您是正确的，x-ua 兼容仅控制文档模式。有一个功能控制键 (FEATURE_BROWSER_EMULATION [2]) 可能会有所帮助，但目前的 IE 版本是否仍支持这一点尚不清楚。（有关技术细节，请参阅该页面上的可扩展性改进链接。）

希望这可以帮助...

参考：

[1] - [http://technet.microsoft.com/en-us/library/dn640687](http://technet.microsoft.com/en-us/library/dn640687)

[2] - [http://msdn.microsoft.com/en-us/library/ie/ee330730(v=vs.85).aspx#browser_emulation](http://msdn.microsoft.com/en-us/library/ie/ee330730(v=vs.85).aspx#browser_emulation)

# jquery - AJAX 加载不运行 javascript

> ID：12368693
> 
> 赞同：1
> 
> 时间：2012-09-11T11:27:54.383
> 
> 标签：jquery, ajax, google-visualization

我有一个带有图表的主页，一个下拉框允许用户选择他们想要查看的图表。

当下拉列表更改时，我希望 AJAX 从我的文件 graphmaker.php 中加载正确的图形。该文件在适当的 DIV 中包含所有图形，即 graph1、graph2 等。

这些图表是使用 Google Charts Visualisation 生成的。

但是，当我这样做时，AJAX 只会加载一个空框，根据我的研究，这是因为页面上的脚本没有被执行。

本质上，我希望 Ajax 能够：

*   获取graphmaker.php
*   渲染页面
*   然后拉出正确的图表

我的代码：

```
function switchgraph(graph) {
var switchto = $("#graph"+graph+"_dd").val();
$('#graph'+graph).load('graphmaker.php #'+switchto);
} 
```

有什么建议么？

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:36:44.767

不要使用[删除脚本](http://api.jquery.com/load/#script-execution)`load`的选择器，而是在 AJAX 调用完成后选择相关图形：

```
function switchgraph(graph) {
    var switchto = $("#graph"+graph+"_dd").val();
    $('#graph'+graph).load('graphmaker.php', function onComplete() {
       function doMoveGraph() {
           $('#graph' + graph).empty().append(toBeUsed);
       }
       function checkMoveGraph() {
            if (!toBeUsed.is(":empty")) {
                doMoveGraph();
            } else {
                setTimeout(checkMoveGraph, 100);
            }
       }
       var toBeUsed = $(this).find('#'+switchto);
       setTimeout(checkMoveGraph, 100);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:35:27.077

我认为你需要使用

```
$.getScript() 
```

或者你可以试试

```
$.ajax({
 url: url,
 dataType: "script",
 success: success
}); 
```

请检查[API](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:39:27.323

而不是 $.ajax 我建议你使用 $.post 函数，所以尝试这样的事情：

```
$.post('graphmaker.php', { data : dataSource },
  function(data) {
    //On Success
  }
) 
```

# xml - 从 xpath 结果集中访问第 N 个节点

> ID：12368694
> 
> 赞同：0
> 
> 时间：2012-09-11T11:27:59.590
> 
> 标签：xml, xpath, xmlspy

> **可能重复：**
> [使用 xpath 获取节点的第 N 个子节点](https://stackoverflow.com/questions/2407781/get-nth-child-of-a-node-using-xpath)

如何从以下集合访问第 N 个节点。
XPath = /ProcessData/*[starts-with(name(), 'INV')]

![在此处输入图像描述](../Images/e2225a241e87f3ebac34d8039817e6a8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:39:16.137

下面的表达式会有所帮助

```
(/ProcessData/*[starts-with(name(), 'INV')])[5] 
```

这里 5 可以替换为所需的值，以从选定（过滤）的节点中获取第 n 个节点。

# unix - 在非常大的文件开头添加两行的有效方法

> ID：12368701
> 
> 赞同：4
> 
> 时间：2012-09-11T11:28:29.843
> 
> 标签：unix, command-line, sed, text-files

我有一组非常大（每个几个 GB）的文本文件。我需要在每个文件的开头添加两行。

我尝试使用 sed 和以下命令

```
sed -i '1iFirstLine'
sed -i '2iSecondLine' 
```

sed 的问题在于它会循环遍历整个文件，即使必须在开头仅添加两行，因此会花费大量时间。

是否有另一种方法可以更有效地执行此操作，而无需读取整个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:33:18.727

你应该试试

```
echo "1iFirstLine" > newfile.txt
echo "2iSecondLine" >> newfile.txt
cat oldfile.txt >> newfile.txt
mv newfile.txt oldfile.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T11:38:29.523

这是一个完美的工作，它也非常快。

```
perl -pi -e '$.=0 if eof;print "first line\nsecond line\n" if ($.==1)' *.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T11:37:48.173

如果不重写文件，就不可能在开头添加（与追加到末尾相反）。您根本无法“转移”文件内容，因为没有文件系统支持。所以你应该这样做：

```
echo -e "line 1\nLine2" > tmp.txt
cat tmp2.txt oldbigfile.txt > newbigfile.txt
rm oldbigfile.txt
mv newbigfile.txt oldbigfile.txt 
```

请注意，您需要足够的磁盘空间来保存这两个文件一段时间。

# java - 地质正确的下载率？

> ID：12368702
> 
> 赞同：0
> 
> 时间：2012-09-11T11:28:33.400
> 
> 标签：java, bandwidth

我想弄清楚不同地方的下载速度，例如在澳大利亚大陆和欧洲。如果我从位于欧洲的个人服务器下载示例文件，欧洲用户的下载速度会快得多，而新西兰人的下载速度会相应地慢（对不起）。

如何使用 Java 解决这个地质问题，找出不同位置的用户的实际带宽？

我想弄清楚可用的最大可能带宽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:30:15.880

“真实下载速度”是真实用户的速度。因此，您已经测量*的就是*您正在寻找的。通过在 上使用环回设备可以实现“最大可能带宽” `localhost`。

# php - 如何链接到搜索结果中某个主题的正确页面？

> ID：12368703
> 
> 赞同：3
> 
> 时间：2012-09-11T11:28:33.713
> 
> 标签：php, sql, search, pagination

我在一个论坛里有一个搜索功能，搜索结果会在当时显示10。然后，用户可以查看下一个或前 10 个搜索结果。结果显示要在其中找到搜索词的不同主题。一切都如我所愿。

问题是当我希望用户能够单击结果并最终进入该主题的正确页面时。例如，必须在第 2 页上查看某个主题中的第 14 条帖子（`LIMIT 10,10`在主题页面上的 SQL 查询中使用）。我`LIMIT`在链接中将参数作为 $_GET 发送。

按发布日期排序时，如何从该特定主题的总数中检索结果中每个主题的行号？一切都始终按该顺序显示。我想用`$nr = $nr-1; //and then`

```
 $limit = floor($nr / 10) * 10; 
```

在该号码上，以便能够通过`LIMIT`搜索结果中的链接发送正确的参数。

这是用于获取搜索结果的 PDO：

```
$query = 'SELECT t.topic_id, t.topic_cat, t.topic_subject, p.post_content, p.post_id, UNIX_TIMESTAMP(p.post_date) AS post_date
FROM posts p 
LEFT JOIN topics t ON p.post_topic = t.topic_id 
WHERE p.post_content LIKE :search OR t.topic_subject LIKE :search ORDER BY UNIX_TIMESTAMP(p.post_date) DESC LIMIT :start, :size';
$statement = $db->prepare($query);
$statement->bindValue(':search', '%'.$search.'%');
$statement->bindValue(':start', $start2, PDO::PARAM_INT);
$statement->bindValue(':size', $pagesize, PDO::PARAM_INT);
$statement->execute();

    while ($row = $statement->fetch(PDO::FETCH_ASSOC)) {
        $array[$row['topic_subject']][] = $row['post_id'];
        $nr = count($array[$row['topic_subject']]) - 1;
        echo '<div class="search_result"><div class="search_topic"><a href="topic_view.php?id=' . $row['topic_id'] . '&amp;cat_id=' . $row['topic_cat'] . '
        &amp;start=' . floor($nr / 10) * 10 . '#anchor_' . $row['post_id'] . '">' . $row['topic_subject'] . '</a><span style="float:right;color:#696969">' 
        . date("M d, Y",$row['post_date']) . '</span></div><div class="search_post">' . $row['post_content'] . '</div></div>';
    }
} $statement->closeCursor(); 
```

它是`start`链接中的参数，我需要以某种方式在查询中获取，因此我不必`post_id`为`while loop`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:34:16.137

假设你只知道帖子的 ID，我会这样：

```
SELECT
    count(*)
FROM
    `posts`
WHERE
    date <= ( SELECT date FROM `posts` WHERE post_id = '$id' )
ORDER BY
    date DESC; 
```

这将为您提供此帖子的行数。之后，只需执行一些 php 代码，例如：

```
$start = floor( $nr / 10 ) * 10;
$end = ceil( $nr / 10 ) * 10; 
```

对于多个 ID：

```
SELECT topic_id, (
    SELECT
        count(*)
    FROM
        `posts`
    WHERE
        date <= ( SELECT date FROM `posts` u1 WHERE u1.topic_id = u2.topic_id )
    ) AS row
FROM
    `posts` u2
WHERE
    topic_id IN ( '$id1', '$id2', '$id3' )
ORDER BY
    date DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:17:04.353

```
$query = 'SELECT :start as start, t.topic_id, t.topic_cat, t.topic_subject,
p.post_content, p.post_id, UNIX_TIMESTAMP(p.post_date) AS post_date
FROM posts p 
LEFT JOIN topics t ON p.post_topic = t.topic_id 
WHERE p.post_content LIKE :search OR t.topic_subject LIKE :search
ORDER BY UNIX_TIMESTAMP(p.post_date) DESC LIMIT :start, :size'; 
```

然后通过`$start = $row['start']`

```
$nr = count($array[$row['topic_subject']])+$start - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T07:28:48.697

我遇到了你说的问题。我认为此链接对您有用。

我已经成功完成了这些，希望对你有用： 1\. [http://www.awcore.com/dev/1/3/Create-Awesome-PHPMYSQL-Pagination_en](http://www.awcore.com/dev/1/3/Create-Awesome-PHPMYSQL-Pagination_en) 2\. [http://www.9lessons.info/2009 /09/pagination-with-jquery-mysql-and-php.html](http://www.9lessons.info/2009/09/pagination-with-jquery-mysql-and-php.html)

# ios - 来自 WWDC 2012 的 ios iPaint

> ID：12368710
> 
> 赞同：2
> 
> 时间：2012-09-11T11:29:01.227
> 
> 标签：ios, drawing, quartz-graphics

在 Apples WWDC 2012 的 Video Session 506 中，他们展示了一款用于高性能绘图的绘画应用程序（因此帧速率永远不会低于 30）。

我试图复制代码，但在多个点上卡住了。

我正在寻找的是一个基本的绘图应用程序（线条、正方形、圆形、贝塞尔路径），即使在绘制了数百条线之后，它也表现良好。

基本方法是在绘制一定数量的线条（或圆形贝塞尔路径等）后将其保存到图像中，然后只刷新新的绘图，因此不必重新绘制所有已经绘制的线条。

但不知何故，我从来没有达到更高的性能。我需要如何实现这个？我需要多层吗？以及如何管理不是视图中的所有图层都被重绘，而只是某个子图层？

如果有人可以为我提供一个在图层上绘制几条线的简短示例，然后将该图层保存到图像中，然后在其上绘图，我将非常感激。

感谢您为重新创建 iPaint 应用程序提供的任何帮助，遗憾的是无法从 Apple 下载该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:37:07.527

我没有看那个会话，但是传统的 Quartz 加速是使用 CGLayers（不是 CALayers）。您可以将 CGLayer 视为缓存的绘图，它可能是位图，也可能不是位图（系统决定如何最好地缓存它）。如果您有一个支持位图上下文，您可以将其用作您的“图像”并在您认为合适的时候将 CGLayers 绘制到其中（然后丢弃图层）。阅读 CGLayer（它在 Quartz 文档中），然后看看这是否是他们在那次会议上讨论的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:40:21.280

这只是难题的一半。另一半是只刷新视图的最小可能区域（通过`setNeedsDisplayInRect:`）。但是，我通过 Core Graphics 经历了许多不同的绘图方式。缓存很好，但我不再使用它了。我如上所述设置更新矩形，然后在我描边之前测试每个路径（测试很快，描边很慢）。如果它在更新框中，我会抚摸它，否则我会忽略它。

# c++ - 如何在 Qt 信号和槽中使用枚举

> ID：12368712
> 
> 赞同：19
> 
> 时间：2012-09-11T11:29:04.843
> 
> 标签：c++, qt, enums

我在使用`enum`信号类型时遇到了一些麻烦。基本上我有两个类，一个状态机和一个处理状态机的线程。当状态改变时，我想发送一个带有新状态的信号。我还想使用`enum`. 在我的完整代码中，状态机是在一个单独的共享库中实现的，但下面的代码给出了完全相同的错误。

当我运行代码时，我得到以下行为：

```
kotte@EMO-Ubuntu:sigenum $ ./sigenum 
Object::connect: No such slot MyThread::onNewState(state)
Test signal 
Test signal 
... 
```

我的示例代码中有四个文件：`statemachine.h`、`statemachine.cpp`和. main 函数只是简单地启动线程，然后线程创建一个实例并处理来自. 我对 Qt 很陌生，所以当我意识到你必须将枚举包含在其中并将其注册到类型系统时，我有点困惑。所以我完全有可能犯了一些菜鸟错误`main.h``main.cpp``StateMachine``StateMachine``Q_ENUMS`

下面的代码有点长，但我希望它尽可能与我的真实代码相似。

`statemachine.h`好像：

```
// statemachine.h
#ifndef _STATEMACHINE_H
#define _STATEMACHINE_H

#include <QtCore>

class StateMachine : public QObject
{
    Q_OBJECT
    Q_ENUMS(state)

public:
    enum state {S0, S1, S2};

    void setState(state newState);

signals:
    void stateChanged(state newState);
    void testSignal(void);
};

Q_DECLARE_METATYPE(StateMachine::state);

#endif 
```

它被实现为：

```
// statemachine.cpp
#include <QtCore>

#include "statemachine.h"

void StateMachine::setState(state newState)
{
    emit stateChanged(newState);
    emit testSignal();
} 
```

线程定义为

```
// main.h
#ifndef _MAIN_H
#define _MAIN_H

#include <QtCore>

#include "statemachine.h"

class MyThread : public QThread
{
    Q_OBJECT

private:
    void run(void);

private slots:
    void onNewState(StateMachine::state);
    void onTestSignal(void);

private:
    StateMachine *myStateMachine;
};

#endif 
```

它的实现如下：

```
// main.cpp
#include <QtCore>
#include <QApplication>

#include "statemachine.h"
#include "main.h"

void MyThread::run()
{
    myStateMachine = new StateMachine();

    qRegisterMetaType<StateMachine::state>("state");

    // This does not work
    connect(myStateMachine, SIGNAL(stateChanged(state)),
            this, SLOT(onNewState(state)));

    // But this does...
    connect(myStateMachine, SIGNAL(testSignal()),
            this, SLOT(onTestSignal()));

    forever {
        // ...
        myStateMachine->setState(StateMachine::S0);
    }
}

void MyThread::onTestSignal()
{
    qDebug() << "Test signal";
}

void MyThread::onNewState(StateMachine::state newState)
{
    qDebug() << "New state is:" << newState;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T11:49:01.317

通过在任何地方使用完全限定的名称，我让它工作了

如果我将声明更改`stateChanged()`为

```
signals:
    void stateChanged(StateMachine::state newState); 
```

并注册类型

```
qRegisterMetaType<StateMachine::state>("StateMachine::state"); 
```

并且还在`connect`语句中使用此名称

```
connect(myStateMachine, SIGNAL(stateChanged(StateMachine::state)),
        this, SLOT(onNewState(StateMachine::state))); 
```

如果没有 drescherjm 的帮助，就无法解决这个问题，谢谢 :-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T11:34:58.997

我相信以下是您的 MyThread 类中未定义的状态。

使用以下

```
连接（myStateMachine，信号（stateChanged（StateMachine::state）），
            这个，SLOT(onNewState(StateMachine::state)));

```

编辑：

也许这会奏效

```
连接（myStateMachine，信号（stateChanged（状态）），
            这个，SLOT(onNewState(StateMachine::state)));

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T22:46:24.183

你应该摆脱，`SIGNAL`因为`SLOT`Qt 可以在编译时检测到不匹配。您还可以避免使用`Q_DECLARE_METATYPE`和`qRegisterMetaType()`使用[Q_ENUM](https://doc.qt.io/qt-5/qobject.html#Q_ENUM)代替`Q_ENUMS`- 这是在 Qt 5.5 中引入的，Finally`enum class`是一个强类型版本`enum`：

```
// statemachine.h
#ifndef _STATEMACHINE_H
#define _STATEMACHINE_H

#include <QtCore>

class StateMachine : public QObject
{
    Q_OBJECT
    Q_ENUM(state)

public:
    enum class state {S0, S1, S2};

    void setState(state newState);

signals:
    void stateChanged(state newState);
    void testSignal(void);
};

#endif

// main.cpp
#include <QtCore>
#include <QApplication>

#include "statemachine.h"
#include "main.h"

void MyThread::run()
{
    myStateMachine = new StateMachine();

    connect(myStateMachine, &StateMachine::stateChanged, this, &MyThread::NewState);

    connect(myStateMachine, &StateMachine::testSignal, this, &MyThread::onTestSignal);

    forever {
        // ...
        myStateMachine->setState(StateMachine::S0);
    }
} 
```

# java - 在java中迭代嵌套列表

> ID：12368713
> 
> 赞同：-4
> 
> 时间：2012-09-11T11:29:05.903
> 
> 标签：java, collections, for-loop, tree

我想在我的页面中显示一个树视图。为此，我将有一个 List 对象。列表对象将包含更多列表对象。我不知道我会得到多少嵌套级别。所以请告诉我，如何浏览列表。

我要显示的示例数据是

*   教育

    *   数学
        *   三角学
    *   科学
        *   物理
            *   核物理
        *   化学
    *   社会的
*   运动的

    *   蟋蟀
    *   足球
*   技术
    *   手机
    *   电脑
        *   笔记本电脑
        *   个人电脑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:33:07.200

您需要一个递归方法，如下所示：

```
void printList(Collection myList) {
   for(Object o : myList) {
      if (Collection.class.isAssignableFrom(o.getClass())) {
          printList((Collection)o);
      }
      else {
          print o;
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:31:57.743

您应该使用递归函数：

```
 void display(Object item) {
       print(item);
       if (item instanceof List) 
           for (Object itemInList: (List) list) {
               display(itemInList);
           }
       }
   } 
```

如有必要，您可以使用级别，例如缩进：

```
 void printItem(Object item, int level) {
       for (int i=0; i<level; i++) System.out.print(" ");
       System.out.println(item);
   }

   void display(List list, int level) {
       printItem(list, level);
       if (item instanceof List) 
           for (Object itemInList: (List) list) {
               display(itemInList, level+1);
           }
       }
   }

   display(topLevelList, 0); 
```

# asp.net - ASP.NET FindControl 内存泄漏

> ID：12368717
> 
> 赞同：0
> 
> 时间：2012-09-11T11:29:31.473
> 
> 标签：asp.net, memory-leaks

我们最近发现我们的 ASP.NET 应用程序有很多这样的行：

```
Label lbXXX = (Label)FormView.FindControl("lbXXX"); 
```

`TextBox`, `Panel`, `Image`, `DropDownList`...也一样

这可能是内存泄漏的原因吗？

有我想的那么糟糕吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:39:27.603

它不太可能导致内存问题。然而，它并非没有成本。

正如您在下面看到的，第一个操作是在尚未创建它们时`EnsureChildControls`调用。[`CreateChildControls`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.createchildcontrols.aspx)这可能会导致您的性能/内存问题。

> 由 ASP.NET 页面框架调用以通知使用基于组合的实现的服务器控件创建它们包含的任何子控件，以准备回发或呈现。

然后不会`FindControl`有这个问题，而是您的自定义控件。

这是实现（来自 ILSpy）：

```
protected virtual Control FindControl(string id, int pathOffset)
{
    this.EnsureChildControls();
    if (!this.flags[128])
    {
        Control namingContainer = this.NamingContainer;
        if (namingContainer != null)
        {
            return namingContainer.FindControl(id, pathOffset);
        }
        return null;
    }
    else
    {
        if (this.HasControls())
        {
            this.EnsureOccasionalFields();
            if (this._occasionalFields.NamedControls == null)
            {
                this.EnsureNamedControlsTable();
            }
        }
        if (this._occasionalFields == null || this._occasionalFields.NamedControls == null)
        {
            return null;
        }
        char[] anyOf = new char[]
        {
            '$',
            ':'
        };
        int num = id.IndexOfAny(anyOf, pathOffset);
        string key;
        if (num == -1)
        {
            key = id.Substring(pathOffset);
            return this._occasionalFields.NamedControls[key] as Control;
        }
        key = id.Substring(pathOffset, num - pathOffset);
        Control control = this._occasionalFields.NamedControls[key] as Control;
        if (control == null)
        {
            return null;
        }
        return control.FindControl(id, num + 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:32:16.690

这**不太**可能导致内存泄漏。

要找到内存泄漏的原因，您应该使用[内存](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/) [分析器](http://www.jetbrains.com/profiler/)并找出不应该保留引用的内容。

.NET 中内存泄漏的最常见原因是尚未取消注册的事件处理程序，尽管这在 ASP.NET 中往往不是问题，因为它的每线程请求模型。

如果您怀疑内存泄漏（您如何确定确实有内存泄漏？），请分析以找出原因 - 不要假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:36:47.010

内存泄漏，这里不可能。是的，不建议过度使用查找控件。由于您观察到很多此类事件，因此最好解决它们并清理您的代码。性能也达到了目前应有的控制。

# ios - 使用 Flash cs6 创建的 iPad 应用程序上的音频和动画不同步

> ID：12368726
> 
> 赞同：2
> 
> 时间：2012-09-11T11:29:47.213
> 
> 标签：ios, flash, animation, audio, sync

我在单独的图层中有动画和声音。动画相当长，大约 1415 帧，音频也有相同的长度。当我在 PC 上运行时，动画/音频同步非常好，但在为 iOS 创建应用程序并从 iPad 运行后出现问题。动画落后于 iPad 上的音频。

我正在使用 Flash CS6 和 iPad 1 进行测试。

您的意见很有价值，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:45:04.503

这是因为 iOs 设备动态控制应用程序的帧速率。尽管动画包含丰富的图形，但帧速率会自动降低。动画播放非常缓慢，动画和音频不匹配。

您为什么不利用 FLASH CS6 的精灵表功能在设备中非常流畅地播放动画。这主要仅出于此目的而增强了此功能。

这是开始使用精灵表的链接[http://blogs.adobe.com/flashpro/2012/07/12/spritesheet-flashpro-starling/](http://blogs.adobe.com/flashpro/2012/07/12/spritesheet-flashpro-starling/)

# batch-file - 尽管我只使用 ping 命令，但我的批处理脚本一直在 CMD 中写一些东西

> ID：12368727
> 
> 赞同：1
> 
> 时间：2012-09-11T11:30:06.003
> 
> 标签：batch-file, windows-server-2003

我的问题是我创建了一个看起来像这样的 .bat 文件

```
@echo off
ping google.com -n 2
if not errorlevel 1 echo %date% %time% We did get a response from Google >> C:\CMD\ping.log
if errorlevel 1 echo %date% %time% We didn't get a response from Google >> C:\CMD\ping.log 
```

这很简单，它所做的只是尝试 ping google.com 两次，如果我们得到一个响应日志“我们确实收到了来自 google 的响应”，否则记录“我们没有收到来自 Google 的响应”，两者都带有时间戳文件 ping.log，它只是一个文本文件。

当我在我自己的电脑（Windows 7）上使用它时，批处理脚本正在工作，但是当我将它移动到服务器上时，当我单击脚本上的运行时，它会打开 CMD 并一遍又一遍地写一些东西。我不确切知道它在写什么，但据我所知（因为它在 CMD 中的写入速度非常快），**@echo off was not recognized**。当我运行脚本时，它不会按预期创建或写入文件。

请任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:32:19.233

听起来文件编码设置为 ANSI 以外的其他内容。

在服务器上的记事本中打开您的 .bat 文件，然后选择 File->Save As。

将其保存为相同的名称，但请确保将编码设置为 ANSI。

![在此处输入图像描述](../Images/31205e56bd3a3ad62d07242c2442b245.png)

# mysql - 从字符串mysql中检索数字

> ID：12368733
> 
> 赞同：1
> 
> 时间：2012-09-11T11:30:24.343
> 
> 标签：mysql

我有一个包含表“数字”和条目的 mysql 数据库

```
id | numberss
1 | 1,5,45
2 | 11,8,99
3 | 14, 15,84
4 | 1,58,47 
```

我如何编写一个 mysql 查询，仅从那些在字段“numberss”中获得数字“1”的表中检索信息？不是 11，不是 15，只有 1。现在我有：

```
mysql_query("SELECT * FROM numbers WHERE numberss LIKE '%1%'"); 
```

但当然它不会像我想要的那样工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:32:01.037

```
SELECT * FROM numbers WHERE FIND_IN_SET(1, numberss); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:33:32.617

```
SELECT * FROM numberss WHERE numberss 
LIKE  '%[^0-9]1[^0-9]%' 
or numberss like '1[^0-9]%'  
or numberss like '%[^0-9]1' 
```

应该管用

# javascript - JavaScript typeof、alert 和 apply

> ID：12368739
> 
> 赞同：0
> 
> 时间：2012-09-11T11:30:50.840
> 
> 标签：javascript

1) 为什么**在 IE 8 中**typeof(window["alert"]) 是 "object" 而不是函数？
2）如何在“window.alert”上调用应用方法？我的意思是我想要做的是：

```
function exec(method, param)
{
    //because of typeof(window["alert"]) == "object" the actual if looks like typeof(window[method]) == 'function' || method == 'alert'
    if(typeof(window[method]) == 'function')
    {
        window[method].apply(window, [param]);
    }
}

exec("alert","hello"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:34:20.863

1.  typeof window['alert'] 是一个“函数”...（用 FF 测试）

试试这个代码（typeof而不是typeOf（））

```
function exec(method, param)
{
    if(typeof window[method] == 'function')
    {
        window[method].apply(window, [param]);
    }
}

exec("alert","hello"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:38:25.217

`typeof window["alert"]`在低于 9 的 Internet Explorer 版本中返回 "object" ，但在 Firefox 中返回 "function" 。我猜这是一个已知问题。下面，这是一篇提到它的文章：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FOperators%2FSpecial_Operators%2Ftypeof_Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FOperators%2FSpecial_Operators%2Ftypeof_Operator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:34:07.547

1.  typeof(window["alert"]) 返回“函数”

2.  你已经写了**typeOf**。这有效

    ```
    function exec(method, param)
    {
        //because of typeof(window["alert"]) == "object" the actual if looks like typeof(window[method]) == 'function' || method == 'alert'
        if(typeof(window[method]) == 'function')
        {
            window[method].apply(window, [param]);
        }
    }

    exec("alert","hello"); 
    ```

# mysql - mysql和pymysql一起玩疯了

> ID：12368745
> 
> 赞同：0
> 
> 时间：2012-09-11T11:31:04.903
> 
> 标签：mysql, python-2.7, mysql-python, pymysql

我对 mysql 5.5、python 2.7、pymysql、os x 10.6.8 有一些非常奇怪的事情

我有一个 mysql 表 id，名称，模糊。我已经生成了一个 python 列表，比如

```
cursor.execute('select id, SOUNDEX(name) from categorie')

result = [i for i in cursor.fetchall()] 
```

然后我想更新模糊字段：

```
for i in result:
    try:
       cursor.execute("""update categorie set fuzzy='%s' where id='%s' % (i[1], i[0]))
    except pymysql.MySqlError, e:
       print e 
```

执行代码后，我收到任何错误，这对我来说确实意味着，查询已成功执行，没有插入。数据库中没有发生任何变化，但最奇怪的是，在 python 代码执行后，Mysql 服务器不再执行来自任何客户端的任何更新查询：

超过锁定等待超时；尝试重启事务

我只能成功执行选择查询。实际上，必须重新启动 mysql 服务器，然后才能成功执行更新查询，但是一旦我运行 python 查询代码，播放就会重新开始。

我也在窗口机器上的 mysql 服务器上尝试了这个，结果相同。我还尝试使用 MySqlDb 更改 pymysql 也得到相同的结果。

# ios - uitextfield 和 uilabel 取决于复选标记

> ID：12368748
> 
> 赞同：0
> 
> 时间：2012-09-11T11:31:31.753
> 
> 标签：ios, uitableview, uitextfield, uilabel

在包含 8 行数据的表格视图中，我想在 otherview 中显示 8 个标签和 8 个文本字段，例如：如果用户在 uitableview 中选择（选中）4 行意味着我想在其他视图中显示 4 个标签和 4 个 texfield。任何人都可以帮我解决这个逻辑吗？

```
- (void)viewDidLoad
{
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]];
    [lb5 setHidden:YES];
    [text5 setHidden:YES];
    [lb6 setHidden:YES];
    [text6 setHidden:YES];
    //[lb7 setHidden:YES];
    //[text7 setHidden:YES];
    //[lb8 setHidden:YES];
    //[text8 setHidden:YES];

    scrollView.frame = CGRectMake(0, 0, 320, 460);
    [scrollView setContentSize:CGSizeMake(320, 678)];

    int s=[am.genar count];
    am=(AppDelegate*)[[UIApplication sharedApplication] delegate];
    NSLog(@"test %d",[am.genar count]);
    NSLog(@"test %@",[am.genar objectAtIndex:0]);
    lb1.text=[am.genar objectAtIndex:0];
    NSLog(@"test %@",[am.genar objectAtIndex:1]);
    lb2.text=[am.genar objectAtIndex:1];
    NSLog(@"test %@",[am.genar objectAtIndex:2]);
    lb3.text=[am.genar objectAtIndex:2]; 
    NSLog(@"test %@",[am.genar objectAtIndex:3]);
    lb4.text=[am.genar objectAtIndex:3]; 

    if(s>3)
    {
       [lb5 setHidden:NO];
       [text5 setHidden:NO];
        [lb6 setHidden:NO];
        [text6 setHidden:NO];
       // [lb7 setHidden:NO];
      //  [text7 setHidden:NO];
      //  [lb8 setHidden:NO];
      //  [text8 setHidden:NO];;
        NSLog(@"test %@",[am.genar objectAtIndex:4]);
        lb5.text=[am.genar objectAtIndex:4];   
        NSLog(@"test %@",[am.genar objectAtIndex:5]);
        lb6.text=[am.genar objectAtIndex:5]; 
       // NSLog(@"test %@",[am.genar objectAtIndex:6]);
       // lb7.text=[am.genar objectAtIndex:6]; 
       // NSLog(@"test %@",[am.genar objectAtIndex:7]);
       // lb8.text=[am.genar objectAtIndex:7];
    }
    [super viewDidLoad];
} 
```

现在我正在使用这个逻辑来显示 texfield 和标签，但是如果用户选择 5 行并且它正在工作 6 行，它会显示错误。可以帮我清除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:54:01.943

不要这样编码..，

```
int s=[am.genar count];
 am=(AppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

在 AppDelegate 变量声明后添加 S 值。，

```
 am=(AppDelegate*)[[UIApplication sharedApplication] delegate];
  int s=[am.genar count]; 
```

并尝试打印值。，。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:08:46.983

按照您的应用程序设计，在第二个视图控制器中使用表格视图可能是有意义的，它会很容易根据需要创建尽可能多的行并正确显示标题。

如果您需要使用插座标签和文本字段，我会这样做

```
NSArray * arrayOfLabelsAndTextViews = [NSArray arrayWithObjects:lb1, text1, lb2, text2, lb3, text3, lb4, text4, lb5, text5, lx6, text6, lb7, text7, lb8, text8, nil]; 
```

借助此数组，您可以快速枚举访问它的所有标签/文本对：

*   i - 对索引

*   i*2 - 标签索引

*   i*2 +1 - 文本索引

然后您需要在 previos 视图中准确显示检查的对数：

```
am=(AppDelegate*)[[UIApplication sharedApplication] delegate];

const int totalPairsCount = 8;
for(int i = 0; i<totalPairsCount; i++) {

   UILabel * pairLabel =   [arrayOfLabelsAndTextViews objectAtIndex:i*2];
   UITextView * pairText = [arrayOfLabelsAndTextViews objectAtIndex:i*2 +1];
   BOOL isPairVisible = i < am.count;
   if (isPairVisible) {
      pairLabel.text = [am objectAtIndex:i];
      pairText.text = @"";
   }
   pairLabel.hidden = !isPairVisible;
   pairText.hidden = !isPairVisible;
} 
```

我不认为这是生产质量代码，但在列表中它必须帮助您了解如何操作数据和使用 UI 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:39:53.527

单击复选标记时，将该特定字符串添加到全局数组。从中您可以在第二视图中获得全局数组计数

查看是否加载方法创建了一个 for 循环

```
(int i =0 ; i < appDelegate.globalArray; i++)
{
  Here you can create a label Dynamically whatever number will be. your labels will create according to that
} 
```

如果您有任何问题随时问

# javascript - 如何收集 Knockout observables 以放入 JSON？

> ID：12368751
> 
> 赞同：0
> 
> 时间：2012-09-11T11:31:51.277
> 
> 标签：javascript, knockout.js

我真的，真的不明白了。我正在尝试使用 Knockout 开发接口，但尝试“toJSON”让我很头疼。

问题如下：

*   我有一个 FormViewModel。此表单包含有关表单本身的逻辑和元数据（可观察数据）。
*   我有 FormSection，它只有 2 个 observables。
*   我有删除，也只有 2 个 observables。

我想 AJAX 到接收 JSON 对象的 PHP 文件，但我不知道如何从这里开始。我只想要一些可观察的，而不是全部。我还希望能够从 Ajax 调用（使用 JSON）加载初始状态。

以下是我的代码的相关部分：

```
 // This only has some observables
    var FormSection = function(number)
    {
        var self = this;
        this.title = ko.observable('Section ' + number);
        this.selectedPageStyle = ko.observable();

    };

    // Only observable / computed
    var Deletion = function(page)
    {
        var self = this;
        // reference to a just deleted page, to make 'undeletion' possible
        this.page = page;
        this.pageTitle = ko.computed(function(){ return self.page.title() });

    }; 
```

到目前为止一切都很好，但我的 ViewModel 有一些可观察的、一些功能等。这就是我到目前为止所得到的：（为了便于阅读，我删除了函数体）

```
var FormViewModel = function(data)
{
    var self = this;

    this.pages = ko.observableArray([]);
    this.deletions = ko.observableArray([]);
    this.name  = ko.observable();
    this.description = ko.observable();
    this.availablePageStyles = ko.observableArray(['Header', 'Fields', 'Signatures']);

    this.hasPages = ko.computed(function(){}, this);

    this.numberOfPages = ko.computed(function(){}, this);

    self.selectedPage = ko.observable( );
    self.isPageSelected = function(page) {};
    self.clearPage = function(data, event) {};

    this.save = function() {
        $.ajax("x", {
            // WHAT TO DO?!
            data: { data: ko.toJSON(this)},
            type: "post",
            //success: function(result) { alert(result) },
            error : function(jqXHR, textStatus, errorThrown) { alert(textStatus + errorThrown)}
        });
    };

    $.getJSON("x", function(allData) {
        // How to populate back?!
    });

    this.addPage = function(data, event){}
    this.removePage = function(page){}
    this.unremovePage = function(deletion){}

}; 
```

如果我想保存**相关**的observables，我不知道如何进行。例如：我不需要`self.selectedPage`. 我只用它来排序。

*   我在这里使用映射吗？
*   如何映射相关的 observables？
*   我如何把它放在 JSON 中？
*   如何从我从服务器收到的 JSON 中“映射回来”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:23:15.963

要控制使用 ko.toJSON 时转换为 JSON 的内容，您可以通过执行重载函数

```
viewModel.prototype.toJSON = function(){
    var copy = this;
    delete copy.//whatever variables you don't want to return to server here
    //any other variables you want to not return
    return copy;
} 
```

我整理了一个样本小提琴[http://jsfiddle.net/Rynan/hA4Kz/](http://jsfiddle.net/Rynan/hA4Kz/)。

有关更多信息和示例，请参阅[http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html)

# sql - Sybase SQL 根据具有 ID 的多个列选择不同的

> ID：12368754
> 
> 赞同：3
> 
> 时间：2012-09-11T11:31:59.183
> 
> 标签：sql, sybase, distinct

我正在尝试查询 sybase 服务器以获取我们为测试目的而持有的不同类型数据的示例。

我有一张如下所示的表格（摘要）

```
Animals table:
id | type | breed           | name
------------------------------------
1  | dog  | german shepard  | Bernie
2  | dog  | german shepard  | James
3  | dog  | husky           | Laura
4  | cat  | british blue    | Mr Fluffles
5  | cat  | other           | Laserchild
6  | cat  | british blue    | Sleepy head
7  | fish | goldfish        | Goldie 
```

正如我提到的，我想要每种类型的示例，因此对于上表，我想要一个结果集，例如（实际上我只想要 ID）：

```
id | type | breed           
---------------------------
1  | dog  | german shepard  
3  | dog  | husky          
4  | cat  | british blue   
5  | cat  | other          
7  | fish | goldfish 
```

我尝试了多种查询组合，例如以下查询，但它们要么是无效的 SQL（对于 sybase），要么返回无效的结果

```
 SELECT id, DISTINCT ON type, breed FROM animals
  SELECT id, DISTINCT(type, breed) FROM animals
  SELECT id FROM animals GROUP BY type, breed 
```

我在一列上发现了其他问题，例如[SELECT DISTINCT](https://stackoverflow.com/questions/966176/select-distinct-on-one-column)但这仅涉及一列

你知道如何实现这个查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:45:52.643

也许您必须使用聚合函数`max`或`min`列 ID。它将只返回一个分组列的 ID。

```
select max(Id), type, breed 
from animals
group by type, breed 
```

编辑：

其他不同的方法：

**具有和聚合功能**

```
select id, type, breed  
from animals 
group by type, breed  
having id = max(Id) 
```

**拥有和聚合子查询**

```
select id, type, breed 
from animals a1
group by type, breed 
having id = (
               select max(id)
               from animals a2
               where a2.type = a1.type
               and   a2.breed = a1.breed
            ) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-30T19:55:39.860

试试这个，让我知道它是否有效：

```
select distinct breed, max(id) as id , max(type) as type
from animals 
```

您可能不得不使用`max()` 这里的任意选择是 max()，但您可以任意使用 min()。 [`max()`](http://www.w3schools.com/sql/sql_func_max.asp)返回该列的最大值，[`min()`](http://www.w3schools.com/sql/sql_func_min.asp)最小值

# xcode - XCode、Git 和 MediaTemple (gs)

> ID：12368756
> 
> 赞同：2
> 
> 时间：2012-09-11T11:32:05.770
> 
> 标签：xcode, git, mediatemple

我想知道是否有人设法通过 XCode 连接到 Mediatemple GridServer (gs) 上的自托管 Git 存储库？我昨晚尝试设置它，这是我所拥有的：

1.  在我的 Mac 上安装 Git
2.  通过终端 SSH 在我的 gs 服务上为 git (git.blahblah.com) 创建子域
3.  通过终端 SSH 在子域 (git.blahblah.com/repo/repo.git) 中创建空存储库
4.  从 XCode 的启动菜单中单击“连接到 repo”
5.  在 XCode 的地址栏中输入 repo 地址（ssh://git.blahblah.com:22/repo/repo.git）
6.  一旦 XCode 找到 repo 并告诉我“需要身份验证 [is]”，单击“克隆”
7.  在我的机器上选择适当的本地文件夹以将 repo 克隆到
8.  尝试输入在 MT 管理面板中指定的用户名和密码 - 与我最初通过终端 SSH 用于设置 repo 的用户名和密码相同
9.  启动时出现错误消息：“用户名和密码不正确”（不是）或“指定地址似乎不是存储库，主机意外终止连接”（或类似内容）
10.  哭。反复。

进入第 6 步会导致我的 IP 被 MT 阻止，即使我同时从同一个 IP 登录到 Web 控制面板。通过MT控制面板解封IP无效；一旦我尝试再次通过 XCode 连接，IP 就会被阻止。

我怀疑实际上是第 4 步导致了问题，因为 XCode 在您输入地址（以解决连接问题）时尝试在没有凭据的情况下“ping”repo。

有没有人让这个工作，或者我需要看看在别处托管我的 Git 存储库？当我有一个应该适合这个目的的服务未被使用时，我宁愿不花更多的钱在托管上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:46:40.747

在与 MediaTemple 支持的几次在线会议之后，我得出的结论是它不会起作用。

虽然我可以在我自己的 gs 服务上托管一个存储库，但 XCode 尝试连接它的方式会导致我的 IP 每次都被阻止。由于阻塞是自动的（并且无法关闭），因此 XCode 和 MediaTemple 似乎陷入了僵局。

这不是一个大问题，因为我是这个项目的唯一开发人员，而且我总是可以使用 DropBox（我只是想找到一种更好的方法来在我的笔记本电脑和台式机上保存版本化备份）。如果我真的需要 Git，我可以使用其他工具或终端。

如果我不得不指责，我会责怪 XCode：似乎除了连接到开放的 gitHub 托管存储库之外，它对 Git 的支持相当粗略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:08:42.677

快速更新：我设法开始工作的解决方案是在 BitBucket 上设置一个帐户，创建一个项目并将其添加到本地 Git，将其提交到 BitBucket，然后使用 XCode 连接到 BitBucket。根据 Stefan 的建议，我下载了 SourceTree 以获得额外的 Git 活动，因为我仍然不是 100% 习惯使用终端（我只是喜欢 GUI，这是错的吗？）。

到目前为止，一切似乎都很顺利；当我认为我的服务器（我已经付钱了）可以完成这项工作时，我不得不为 Git 使用第三方，这有点烦人。

# actionscript-3 - Adobe AIR 3.3 更新框架

> ID：12368759
> 
> 赞同：2
> 
> 时间：2012-09-11T11:32:08.950
> 
> 标签：actionscript-3, flash, air

我正在使用 Flash（不是 Flex）在 AIR (v3.3) 中构建应用程序，但更新框架有问题。我找到的所有资源都是针对旧版本的 AIR 和/或参考 Flex 构建的。这是我第一次这样做，非常感谢一些指导......

我有一个简单的测试应用程序 - 一个图像（将 v1 更改为 v2）和一个文本字段。这是我尝试过的（按照[http://goo.gl/uvycg](http://goo.gl/uvycg)）：

```
...
var appUpdater:ApplicationUpdaterUI = new ApplicationUpdaterUI();
...
public function checkForUpdate():void
    {
        ...
        appUpdater.updateURL = "http://mysite.com/updates/update-descriptor.xml";
        appUpdater.isCheckForUpdateVisible = false;
        appUpdater.addEventListener(UpdateEvent.INITIALIZED, onUpdate);
        appUpdater.addEventListener(ErrorEvent.ERROR, onError);
        appUpdater.initialize();
    }
private function onUpdate(event:UpdateEvent):void
    {
        txt.text = 'onUpdate()';
        appUpdater.checkNow();
    }
private function onError(event:ErrorEvent):void {
        txt.text = 'onError() ' + event.toString();
    } 
```

这是我的 updateDescriptor.2.5.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<update xmlns="http://ns.adobe.com/air/framework/update/description/2.5">
<versionNumber>2.0</versionNumber>
<versionLabel>Beta 2</versionLabel>
<url>http://mysite.com/updates/UpdateTest.air</url>
<description>               
    <![CDATA[ update of bees. geometric growth. ]]>
</description> 
```

因此，应用程序 v2 的更新描述符在服务器上，我安装并运行应用程序 v1，所发生的只是我在文本字段中看到 onUpdate() 消息，并且没有更新发生。我哪里错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T03:24:58.447

根据[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/air/update/ApplicationUpdaterUI.html#checkNow%28%29)，您似乎需要确保 ApplicationUpdaterUI 的当前状态是“就绪”，否则“checkNow()”将什么也不做。

[可在此处](http://help.adobe.com/en_US/air/build/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff2.html)找到有关 Adob​​e AIR 更新的最新信息。它适用于所有领域。

# python - 我怎样才能找到为什么我的腌制数据如此之大？

> ID：12368760
> 
> 赞同：2
> 
> 时间：2012-09-11T11:32:10.853
> 
> 标签：python, optimization, size, pickle

我有一个 python（如果重要的话是 3.1）应用程序，它可以挑选数据供另一个进程使用，并通过网络连接交换它们。出于某种原因，一些交换出乎意料地大......我可以理解一些腌制数据并弄清楚传输的内容，但是仍然存在一大堆明显的二进制数据，我无法向自己解释，例如冗余字符串或大量二进制数据。

你知道是否有一个可以帮助我完成这项任务的wireshark插件，或者你会推荐给试图弄清楚`=None`在对象通过连接传输之前还应该做什么的人的另一个过程？

```
RouteDirect
q.).q.}q.(X...._RouteDirect__dst_nodeq.cnode
Node
q.).q.}q.(X...._Node__status_upq.NX...._Node__neighbourhoodq.NX...._Node__sendq.NX
..._Node__cpeq
cequation
CPE
q.).q.}q^M(X...._CPE__dim_countq.}q.X...._CPE__internal_nodesq.]q.ubX...._Node__major_stateq.NX...._Node__partition_idq.G?.$:..4\.    X...._Node__name_idq.cnodeid
NameID
q.).q.}q.X^M..._NameID__nameq.X....checkq.sbX...._Node__dispatcherq.NX...._Node__pendingq.]q.cmessages 
```

^ 我可以理解：RouteDirect、CPE 和 NameID 是我程序中的类。

v 我对此更感到惊讶：交换中不应该有那么多“普通二进制”数据，尽管 Iproto、Tflags、Isrc 和 Idst 是这些数据中包含的字符串

```
 q0).q1}q2(X...._Range__maxq3X....1f40q4X...._Range__min_includedq5.X...._Range__max_includedq6.X...._
 Range__minq7h4ubX...._Component__dimensionq8h'ubh&).q9}q:h)X....Tflagsq;sbh+).q<}q=(h..h/h0).q>}q?            
 (h3X....02q@h5.h6.h7h@ubh8h9ubh&).qA}qBh)X....IprotoqCsbh+).qD}qE(h..h/h0).qF}qG(h3X...

 .06qHh5.h6.h7hHubh8hAubh&).qI}qJh)X....IsrcqKsbh+).qL}qM(h..h/h0).qN}qO(h3X....7d59d8faqPh5.h6.
 h7hPubh8hIubh&).qQ}qRh)X....IdstqS    
 sbh+).qT}qU(h..h/h0).qV}qW(h3X....00001011qXh5.h6.h7hXubh8hQubh&).qY}qZh)X....Tsrcq[sbh+).q\}q]         
 (h..h/h0).q^}q_(h3X....0bcfq`h5.h6.h7h`ubh8hYubusbX.... 
```

v 这*真的很*令人困惑。

```
qt).qu}qv(X...._LookupRequest__keyqwh!).qx}qyh$}qz(h&).q{}q|h)h*sbh+).q}}q~(h..h/h0).q.}q.
(h3h4h5.h6.h7h4ubh8h{ubh&).q.}q.h)h;sbh+).q.}q.(h..h/h0).q.}q.(h3h@h5.h6.h7h@ubh8h.ubh&).q.}q.h)hCsbh+).q.}q.(h..h/h0).q.}q.
(h3hHh5.h6.h7hHubh8h.ubh&).q.}q.h)hKsbh+).q.}q.(h..h/h0).q.}q.(h3hPh5.h6.h7hPubh8h.ubh&).q.}q.h)hSsbh+).q.}q.(h..h/h0).q.}q.
(h3hXh5.h6.h7hXubh8h.ubh&).q.}q.h)h[sbh+).q.}q.(h..h/h0).q.}q.
(h3h`h5.h6.h7h`ubh8h.ubusbX...._LookupRequest__nonceq.G?...u...X...._LookupRequest__fromq.h.).q.}q.(h.Nh.Nh.Nh
h.).q.}q.(h.}q. 
```

最让我困惑的是，它看起来太规则了，例如二进制中的浮点数/整数。它对数字和 [shub] 以及许多“孤立”有一定的亲和力`q`……这让我想起了更多机器代码。还是只是我的眼睛？

类中酸洗支持的示例`Node`，# # 定义特殊的酸洗行为。

```
def __getstate__(self):
    """Indicate witch fields should be pickled."""
    state = copy.copy(self.__dict__)

    # 'state' is a shallow copy: don't modify objects' content
    # Make transients fields point to nothing
    state['_Node__dispatcher'] = None
    state['_Node__send'] = None
    state['_Node__neighbourhood'] = None
    state['_Node__status_up'] = None
    state['_Node__data_store'] = None
    state['_Node__running_op'] = None
    state['_Node__major_state'] = None

    return state 
```

许多其他对象（例如`CPE`, `RouteDirect`）没有`__getstate__`方法。当然，如果有某种技术不需要我爬过所有类的所有构造函数，我会很高兴的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:02:59.470

啊，阅读 /usr/lib/python3.1/pickle.py 代码至少可以使一点不那么晦涩：pickling 的输出确实是某些解释器的一些字节码，其中 push/pop 对解释了看到的常规模式。

```
BINPUT         = b'q'   # store stack top in memo; index is 1-byte arg
BINGET         = b'h'   # push item from memo on stack; index is 1-byte arg
EMPTY_TUPLE    = b')'   # push empty tuple
MARK           = b'('   # push special markobject on stack 
```

等等

根据@Alfe 的评论，我使用wireshark“跟随TCP 流”和“另存为...”功能捕获了原始流量，然后使用

```
x=pickle.load(open("wirecapture.bin","rb")) 
```

并使用 Python 评估器来更好地了解那里的内容。特别是。使用

```
len(pickle.dump(x.my_field)) 
```

对于报告的所有字段，`dir(x)`我可以查明过大的字段。不幸的是，我无法得到

```
for y in dir(x):
   print("%s: %iKb"%(y,len(pickle.dumps(x[y])/1024)) 
```

正常工作（当 y == >_<时`x[y]`不是提取的有效方法）`x.my_field``'my_field'`

# ajax - Recaptcha 被 ajax 操作忽略

> ID：12368763
> 
> 赞同：0
> 
> 时间：2012-09-11T11:32:22.383
> 
> 标签：ajax, jsf-2, primefaces, recaptcha

我正在使用 Primefaces，但是我不能使用他们的 p:captcha 组件，因为它不能被 Ajax 渲染/更新。
因此，我正在尝试使用 reCaptcha 的 Ajax Api 通过使用 Recaptcha.create 在表单上动态创建它。这是代码：

```
Recaptcha.create(/*public_code*/,
                        'captchadiv', {
                            tabindex : 1,
                            theme : "red",
                            callback : Recaptcha.focus_response_field
                        }); 
```

Captcha 已创建，但它不验证来自 ajax 按钮的操作，例如 p:commandButton。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:13:32.313

> 我正在使用 Primefaces，但是我不能使用他们的 p:captcha 组件，因为它不能被 Ajax 渲染/更新。

错误的。该`p:captcha`元素具有一个`id`属性，因此**可以**使用 AJAX 对其进行更新。它还有一个属性，即使在运行时`rendered`也可以设置为`true`or ，是的。`false`

> Captcha 已创建，但它不验证来自 ajax 按钮的操作，例如 p:commandButton。我究竟做错了什么？

我猜你正在渲染的验证码元素没有与 JSF/PrimeFaces 集成。;-)

为什么不使用这样的 PrimeFaces 验证码元素：

```
<div id="captchaWrapper">
    <p:captcha rendered="captchaBean.rendered"/>
</div>
<p:commandButton value="render" action="#{captchaBean.render}" 
    update="captchaWrapper"/> 
```

并有一个像这样的支持 bean：

```
public class CaptchaBean
{
    //Getter/setter omitted
    private boolean rendered;

    public void render()
    {
        rendered = true;
    }
} 
```

# jquery - 从视图有条件地调用远程方法以在 MVC4 中进行验证

> ID：12368765
> 
> 赞同：0
> 
> 时间：2012-09-11T11:32:24.983
> 
> 标签：jquery, asp.net-mvc-4, unobtrusive-ajax

我正在更新一个 MVC2 应用程序，以便它在新的 MVC4 范例中工作。我试图弄清楚如何调用一种方法来使用不显眼的 ajax 验证输入字段？我需要确定某个值在数据库中是否唯一（由服务包装）。我已经制定了服务方法，我只需要能够调用它......通常这就是我会做的。

```
HospitalFinNumber: {
                    required: function (element) {
                        debugger;
                        return '@isFlagSet' != 'True'; //$('AddEnc').val() === 'AddEnc';
                    },
                    minlength: 6,
                    remote: function () {
                        //debugger;
                        return {
                            url: '@Url.Action("ValidateHosFin", "EditEncounter")',
                            data: { hospitalFin: $('#HospitalFinNumber').val(), encflag: '@encflag' }
                        };
                    }
                } 
```

但是我现在该怎么做呢？我知道我的其他功能不适用于不显眼的 ajax 和验证？无论如何，我可以调用这些我知道过去使用这种方法的函数吗？ **更新**

我刚刚意识到您可以使用 [Remote(MethodName, Controller, ErrorMessage)] 来填充字段。但我只记得我有条件地调用了这个远程方法。我使用相同的视图来编辑或将新行添加到数据库中......如果我只是编辑行，我不会检查该字段是否是唯一的。如果我要添加，我会检查该字段是否是唯一的。我通过让控制器在视图上设置 tempData 变量来确定我是否正在添加或编辑...您可以在上面的示例中看到它...只有在设置了该变量时才需要该字段。然后我远程检查输入的值是否唯一......如何使用不显眼的ajax获得类似的功能？

**ENDUPDATE** 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:55:28.513

您需要使用 jQuery.validate.unobtrusive 来挂钩您的标准验证规则，对于更复杂的自定义规则，您可以创建进行 ajax 调用或验证所需的任何适配器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:29:36.147

前提是您的应用程序中已经有所有正常的客户端验证。

1.在 ViewModel 中的 PropertyName 上添加 Remote 属性。

[Remote("ActionName", "ControllerName")] public string PropertyName { get; 放; }

2.在您的控制器中创建上述定义的操作。

公共 JsonResult ActionName(string PropertyName) { return Json(!PropertyName.Contains("disallowedstring", JsonRequestBehavior.AllowGet); }

有关更多详细信息，请查看：Remote Validation Attribute in Action - 此处的部分：http: [//www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic](http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic)

# linux - 将 BSS 映射到虚拟内存段 0 的含义是什么？

> ID：12368768
> 
> 赞同：3
> 
> 时间：2012-09-11T11:32:44.407
> 
> 标签：linux, memory-management

我从[她的](http://www.makelinux.net/ldd3/chp-15-sect-1)e 中读到“可执行文件的 BSS 段没有存储在磁盘上，内核将零页映射到 BSS 地址范围。” 有人可以提供有关这里发生的事情的详细答案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T17:10:22.520

“可执行文件的 BSS 段未存储在磁盘上”

因为在创建新进程时，BSS 段预计会被零初始化，而仅仅在可执行文件中存储一堆零会浪费空间，因此可执行文件只是指示 BSS 段应该从哪里开始以及它应该有多大。

“并且内核将零页映射到 BSS 范围。”

当内核从可执行文件构建一个新进程时，它会为 BSS 范围创建一个映射到零页，零页是一个全零的静态（虚拟）页。该映射将设置写时复制，因此新进程第一次写入其中一个 BSS 页时，将在允许写入完成之前在另一个内存页中分配静态零页的真实副本.

这 (a) 节省了可执行文件中的空间，并且 (b) 避免实际分配可能永远不会被进程触及的 BSS 页，从而节省内存使用量，同时仍然保证每个进程中的 BSS 段看起来是零初始化的按要求。

# javascript - 为什么浏览器不会为语法错误抛出异常？

> ID：12368769
> 
> 赞同：7
> 
> 时间：2012-09-11T11:32:54.967
> 
> 标签：javascript

我不小心写了一个错误的 JavaScript 语法（我是这么认为的）。

代码是

```
 var temp = {};
    temp.a = 34;
    height:34, //should fail here.
    temp.b = 56; 
```

[jsfiddle](http://jsfiddle.net/sdQ5Y/)

语法是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T11:37:45.123

冒号可用于[标记语句](http://www.w3resource.com/javascript/statements/label.php)，这就是这里发生的事情。您的代码中没有错误，这是预期的行为。

编辑：标签上[更好的资源](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)。:)

# php - 循环提交按钮

> ID：12368770
> 
> 赞同：0
> 
> 时间：2012-09-11T11:32:57.650
> 
> 标签：php, submit

我在循环中使用提交按钮时遇到问题。

我要做的是显示数据库中表中的列表，并在每行旁边显示一个提交按钮。

将我的代码所在行的 id 插入表中

```
for ($i = 0; $i <= count($all_rows)-1; $i++) {
<form>
<input type='text' id='name' value='".$all_tv_shows[$i]['id']."' />
<input type='button' value='Submit' onclick='addRecord()' />
</form>} 
```

我正在使用带有提交按钮的 AJAX。所以当我按下任何提交按钮时，插入表中的值都是相同的值（显示的最后一行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:36:13.653

试试这个，正确关闭php标签

```
<?php for ($i = 0; $i <= count($all_rows)-1; $i++) { ?>
  <form>
      <input type='text' id='name' value='".$all_tv_shows[$i]['id']."' />
      <input type='button' value='Submit' onclick='addRecord()' />
  </form>
<php } ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T11:34:38.947

您需要关闭 PHP 标签：

```
<?php
    //assuming some other code first...
    for ($i = 0; $i < count($all_rows); $i++) {
    ?>
        <form>
        <input type='text' id='name' value='<? php echo$all_tv_shows[$i]['id'];?>' />
        <input type='button' value='Submit' onclick='addRecord()' />
        </form>
    <?php
    } 
```

此外，它并不是非常重要，但如果您`for`按上述方式更改循环，可能会更容易阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T12:21:51.640

I guess the problem is not in the code you have shown, the problem should be in addRecord javascript function on top of that id is same i.e. 'name' for all element....

You get the value from the form using `$('#name').val();` or `document.getElementById('name');` and look all input has same id. If I am going right then pass value in addRecord function and use that value.

# c++ - C ++ MFC按钮在窗口调整大小时消失

> ID：12368777
> 
> 赞同：1
> 
> 时间：2012-09-11T11:33:09.273
> 
> 标签：c++, mfc, resize, cbutton

我在 MFC C++ 中有一个附加了 CButton 的对话框。我想修改 OnSize() 以便按钮锚定到左下角。

```
if (btn.m_hWnd) {
        CRect winRect;
        GetWindowRect(&winRect);

        int width = winRect.right - winRect.left;
        int height = winRect.bottom - winRect.top;

        int x = width - wndWidth;
        int y = height - wndHeight;

        CRect rect;
        btn.GetWindowRect(&rect);
        rect.left += x;
        rect.top += y;
        btn.MoveWindow(&rect);
        ScreenToClient(&rect);
        btn.ShowWindow(SW_SHOW);
    } 
```

x 和 y 是窗口已更改多少并将添加到按钮的开始坐标的差异。

我不确定最后两个命令（我不妨删除它们），但随后我运行程序按钮消失了。

我需要知道一种将按钮移动 x 和 y 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T00:56:58.457

原始代码为父对话框和按钮使用了错误的坐标系。

停靠到左下角的正确方法是这样的：

```
if (btn.m_hWnd) { 
    CRect winRect; 
    GetClientRect(&winRect); 

    CRect rect; 
    btn.GetWindowRect(&rect); 
    ScreenToClient(&rect); 

    int btnWidth = rect.Width();
    int btnHeight = rect.Width();
    rect.left = winRect.right-btnWidth; 
    rect.top  = winRect.bottom-btnHeight;
    rect.right = winRect.right;
    rect.bottom = winRect.bottom; 
    btn.MoveWindow(&rect); 
} 
```

或者

```
if (btn.m_hWnd) { 
    CRect winRect; 
    GetClientRect(&winRect); 

    CRect rect; 
    btn.GetWindowRect(&rect); 
    ScreenToClient(&rect); 

    int btnWidth = rect.Width();
    int btnHeight = rect.Width();
    btn.SetWindowPos(NULL,winRect.right-btnWidth,winRect.bottom-btnHeight,0,0,SWP_NOSIZE|SWP_NOZORDER);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:23:41.293

基本上，答案应该是在 MoveWindow 之前做 ScreenToClient！

**更多细节：**您需要熟悉哪些函数返回或使用客户端坐标（以及相对于这些客户端坐标是什么）以及哪些屏幕坐标；这是 MFC 中真正令人困惑的部分之一。至于你的问题：

[CWnd::GetWindowRect](http://msdn.microsoft.com/en-us/library/f3ef9c0s%28v=vs.80%29.aspx)返回屏幕坐标；[CWnd::MoveWindow](http://msdn.microsoft.com/en-us/library/5bc5w1zz%28v=vs.80%29.aspx)需要相对于父 CWnd 的坐标（或者如果它是顶级窗口，则相对于屏幕）。所以在调用 MoveWindow 之前，您必须将 GetWindowRect 返回的 rect 转换为父窗口的客户端坐标；假设 pParent 是`CWnd *`的父窗口`btn`，那么您的移动代码应如下所示：

```
CRect rect;
btn.GetWindowRect(&rect);
pParent->ScreenToClient(&rect);  // this line and it's position is important
rect.left += x;
rect.top += y;
btn.MoveWindow(&rect); 
```

如果您在父窗口的方法中（我认为您是，因为您提到了对话框的 OnSize），那么只需省略`pParent->`. 你现在做 ScreenToClient 的方式，它对 MoveWindow 没有影响，因为它是在它之后执行的！

# html - 当我在过滤器中使用 requestdispatcher 重定向页面时，Css 内容未应用于页面

> ID：12368778
> 
> 赞同：0
> 
> 时间：2012-09-11T11:33:16.153
> 
> 标签：html, css, jsf, richfaces, servlet-filters

检查条件后，如果条件失败，然后使用请求调度程序将其重定向到其他页面。它正在重定向到该页面，但 css 未应用于该页面。为什么会这样？

```
public class RolePrivilegeFilter implements Filter {
List<String> privilege = null;
private static final String notAuthorizedPath = "/home/notAuthorized.jsf";
@Override
public void destroy() {
log.info("filter finish");
}

@Override
public void doFilter(ServletRequest sRequest, ServletResponse sResponse, FilterChain filterChain) throws IOException, ServletException {
String smUser = null;
 try {
    HttpServletRequest request = (HttpServletRequest) sRequest;
    HttpServletResponse response = (HttpServletResponse) sResponse;
    HttpSession session = null;
    try {
        request = (HttpServletRequest) sRequest;
        smUser =  request.getHeader(EnvironmentBean.SESSION_ATTR_SM_USER);
        } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
        }
    if (rolePrivilege == null || rolePrivilege.isEmpty()) {
    rolePrivilege = new RolePrivilegeBuilderImpl().rolePrivilege("Smtest2");
    privilege filter bean is\t"+rolePrivilege);
    log.debug("After rolePrivilege: " + rolePrivilege);
    if (rolePrivilege != null && rolePrivilege.size() > 0 ) {
    if (session == null) {
        session = request.getSession(true);
    }
    session.setAttribute("privilege", rolePrivilege);

    } else {
             //This is the page iam  redirecting to. 
    System.out.println("role privilege not authorized page");
    RequestDispatcher rd = request.getRequestDispatcher(notAuthorizedPath);
                    rd.forward(request, response);
                    return;
           }
    } catch (Exception e) {
        e.printStackTrace();
        log.debug("Error in setting session attribute: " + e.getMessage());
    }
    log.debug("doFilter() finish");
    filterChain.doFilter(sRequest, sResponse);
}

@Override
public void init(FilterConfig arg0) throws ServletException {
    log.info("filter start");

}
} 
```

问题是 iam 重定向到该页面，但该页面的 css 没有被应用，就像没有显示背景图像一样。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:40:51.707

显然过滤器的 URL 模式*也*匹配浏览器对该 CSS 文件的请求，因此它也被过滤器阻止了。显然，您已将过滤器映射到一个过于宽泛的 URL 模式，例如 as`/*`或其他东西。

您需要确保过滤器绕过所有这些 CSS 文件请求。如果无法相应更改过滤器的 URL 模式以绕过 CSS 文件请求，例如更改`/*`为`/app/*`仅`/app`在所有受限资源所在的文件夹中的请求上运行，那么您需要重写过滤器的代码以添加额外的检查在请求 URI 上。

像这样的东西：

```
if (request.getRequestURI().endsWith(".css")) {
    chain.doFilter(request, response);
    return;
} 
```

这将使所有`*.css`请求都被传递而不是被阻止。

# asp.net-mvc-3 - 动态添加控件 ID

> ID：12368788
> 
> 赞同：0
> 
> 时间：2012-09-11T11:33:40.770
> 
> 标签：asp.net-mvc-3

我正在将 MVC3 与 Razor 一起使用。

我想动态地为我的单选按钮生成 id。我在循环中调用我的代码，并且应该动态生成 ID/名称。在我的视图中为我的单选按钮命名......就像下面的代码......

```
@Html.RadioButtonFor(m => m.ClaimEntity.Claim, "True", Model.m.ClaimEntity.Claim.Equals(true) ? new { name = "Claim_" + ViewData["count"].ToString(), id = "Claim", title = "Claim_" + ViewData["count"].ToString() } : null)
                @Html.Label("Yes")
                @Html.RadioButtonFor(m => m.ClaimEntity.Claim, "False", Model.m.ClaimEntity.Claim.Equals(false) ? new { name = "Claim_" + ViewData["count"].ToString(), id = "Claim", title = "Claim_" + ViewData["count"].ToString() } : null)
                @Html.Label("No") 
```

问题是，上面的代码片段没有显示为单选按钮创建的动态 id，而它显示了动态创建的“标题”，所以我需要在类似的行上为“id”和“name”属性的“title”提供一些东西。

请建议我怎样才能让它工作。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:00:26.187

看起来您生成的所有单选按钮都具有相同的 ID！这可能会导致您的网页出现意外行为：通常，每个元素都必须具有*唯一的*ID。

如果我们也让 id 依赖于 ViewData["count"]，我们可以确保它们是唯一的。

```
@Html.RadioButtonFor(m => m.ClaimEntity.Claim, "True", Model.m.ClaimEntity.Claim.Equals(true) ? new { name = "Claim_" + ViewData["count"].ToString(), id = "Claim_True" + ViewData["count"].ToString(), title = "Claim_" + ViewData["count"].ToString() } : null)
                @Html.Label("Yes")
                @Html.RadioButtonFor(m => m.ClaimEntity.Claim, "False", Model.m.ClaimEntity.Claim.Equals(false) ? new { name = "Claim_" + ViewData["count"].ToString(), id = "Claim_True" + ViewData["count"].ToString(), title = "Claim_" + ViewData["count"].ToString() } : null)
                @Html.Label("No") 
```

# android - 拖放imageview android

> ID：12368791
> 
> 赞同：7
> 
> 时间：2012-09-11T11:34:04.563
> 
> 标签：android, android-layout, drag-and-drop, android-imageview

我目前正在开发一款游戏！因为有一个框架布局，其中有一个 Horizo​​ntalView，一个在 VerticalView 和 AbsoluteLayout 中，并且在 Absolutelayout 中位于右上角，因为有一个 ImageView

现在在 Horizo​​ntalView 和 VerticalView 中有一个图像礼服列表。当我单击该图像时，裙子将被添加到绝对布局中。在 imageView 中有一个卡通片。现在我可以将那条裙子拖放到这个卡通片中

因为那个 XML 代码是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/pink_bg" >

<ListView android:id="@+id/vlistview"
    android:layout_alignParentTop="true"
    android:layout_width="60dp"
    android:layout_marginBottom="60dp"
    android:layout_height="wrap_content"
    android:scrollingCache="false"/>

<com.devsmart.android.ui.HorizontalListView
    android:id="@+id/hlistview"
    android:layout_alignParentBottom="true"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    />

<AbsoluteLayout
    android:id="@+id/frameLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="60dp"
    android:layout_marginLeft="60dp"
    android:padding="10dp" >

         <ImageView
             android:id="@+id/imgKitty"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:src="@drawable/hk1" />

</AbsoluteLayout> 
```

现在代码是

```
 public class MainActivityAbs extends Activity implements OnClickListener, OnTouchListener {
int images1[], images2[];
static int imgKittyNo = 0;
static int kittyStatus = 0;
int[] kitties;
ImageView imgKitty;
ImageView mKittyDress;
private AbsoluteLayout mKittyBGLayer;
ArrayList<ImageView> mArrayList = new ArrayList<ImageView>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    kitties = new int[] { R.drawable.hk1, R.drawable.hk2, R.drawable.hk3, R.drawable.hk4, R.drawable.hk5 };

    images1 = new int[] { R.drawable.hk_a1, R.drawable.hk_a2, R.drawable.hk_a3, R.drawable.hk_a4, R.drawable.hk_a5, R.drawable.hk_a6,
            R.drawable.hk_a7, R.drawable.hk_a8, R.drawable.hk_dress, R.drawable.hk_dress, R.drawable.hk_dress2, R.drawable.hk_dress3,
            R.drawable.hk_dress4, R.drawable.hk_dress5, R.drawable.hk_dress6, R.drawable.hk_dress7, R.drawable.hk_dress8, R.drawable.hk_dress9,
            R.drawable.hk_dress10, R.drawable.hk_dress11, R.drawable.hk_dress12, R.drawable.hk_dress13, R.drawable.hk_dress14,
            R.drawable.hk_dress15, R.drawable.hk_dress16, R.drawable.hk_dress17, R.drawable.hk_dress18, R.drawable.hk_dress19,
            R.drawable.hk_dress20, R.drawable.hk_dress21 };

    images2 = new int[] { R.drawable.hk_flo, R.drawable.hk_flo2, R.drawable.hk_glasses, R.drawable.hk_glasses2, R.drawable.hk_glasses3,
            R.drawable.hk_hair1, R.drawable.hk_hair2, R.drawable.hk_hair3, R.drawable.hk_hair4, R.drawable.hk_hair5, R.drawable.hk_hat1,
            R.drawable.hk_hat2, R.drawable.hk_hat3, R.drawable.hk_hat4, R.drawable.hk_hat5, R.drawable.hk_hat6, R.drawable.hk_ribon1,
            R.drawable.hk_ribon2, R.drawable.hk_ribon3, R.drawable.hk_ribon4, R.drawable.hk_ribon5, R.drawable.hk_ribon6, R.drawable.hk_ribon7,
            R.drawable.hk_ribon8, R.drawable.hk_ribon9, R.drawable.hk_ribon10, R.drawable.hk_ring, R.drawable.hk_glasses, R.drawable.hk_glasses2,
            R.drawable.hk_glasses3 };

    ListView vListView = (ListView) findViewById(R.id.vlistview);
    vListView.setAdapter(new VAdapter(this));

    HorizontalListView hListView = (HorizontalListView) findViewById(R.id.hlistview);
    hListView.setAdapter(new HAdapter(this));
    imgKitty = (ImageView) findViewById(R.id.imgKitty);
    // imgKitty.setOnClickListener(this);
    mKittyBGLayer = (AbsoluteLayout) findViewById(R.id.frameLayout);
    setupViews(kitties[0]);

    vListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            setupViews(images2[arg2]);
        }

    });

    hListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            setupViews(images1[arg2]);
        }

    });

    /*imgKitty.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("ImgKitty is called");
        }
    });*/
    mKittyBGLayer.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            for (ImageView img1 : mArrayList) {
                if (kittyStatus == img1.getId()) {
                    mKittyDress = img1;
                    break;
                }
            }
            if(mKittyDress!=null) {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, (int) event.getX() - mKittyDress.getWidth()
                    / 2, (int) event.getY() - mKittyDress.getHeight() / 2);
            mKittyDress.setLayoutParams(lp);
            }
            return true;
        }
    });

    final ImageView imgClearAll = (ImageView)findViewById(R.id.imgClearAll);
    imgClearAll.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mKittyBGLayer!=null && mArrayList!=null)
            {
                mKittyBGLayer.removeAllViews();
                mKittyBGLayer.addView(imgKitty);
                mArrayList.clear();
            }

        }
    });

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    boolean isKitty = false;
    for (int i = 0; i < kitties.length; i++) {
        if (v.getId() == kitties[i]) {
            isKitty =true;
        }
    }
    if(!isKitty)
        kittyStatus = v.getId();
    return false;
}

private void setupViews(int args) {

    if (args == R.drawable.hk1 || args == R.drawable.hk2 || args == R.drawable.hk3 || args == R.drawable.hk4 || args == R.drawable.hk5
            || args == R.drawable.hk6) {
        imgKitty.setImageResource(args);
    } else {

        mKittyDress = new ImageView(this);
        mKittyDress.setImageResource(args);
        mKittyDress.setId(imgKittyNo++);
        mKittyDress.setOnTouchListener(MainActivityAbs.this);
        mArrayList.add(mKittyDress);
        mKittyBGLayer.addView(mKittyDress);
    }

}

private class HAdapter extends BaseAdapter {

    private Context context;
    LayoutInflater inflater;

    public HAdapter(Context context) {
        // TODO Auto-generated constructor stub
        this.context = context;
        inflater = LayoutInflater.from(context);

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return images1.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        HViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.listinflate, null);
            holder = new HViewHolder();
            convertView.setTag(holder);

        } else {
            holder = (HViewHolder) convertView.getTag();
        }
        holder.img = (ImageView) convertView.findViewById(R.id.image);
        holder.img.setImageResource(images1[position]);
        return convertView;
    }

}

class HViewHolder {
    ImageView img;
}

private class VAdapter extends BaseAdapter {

    private Context context;
    LayoutInflater inflater;

    public VAdapter(Context context) {
        // TODO Auto-generated constructor stub
        this.context = context;
        inflater = LayoutInflater.from(context);

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return images2.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.listinflate, null);
            holder = new ViewHolder();
            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.img = (ImageView) convertView.findViewById(R.id.image);
        holder.img.setImageResource(images2[position]);

        return convertView;
    }

}

class ViewHolder {
    ImageView img;
}

@Override
public void onClick(View v) {
     } 
```

现在所有的代码都用上面的代码成功完成了，但是当我也想要如果我点击男孩的顶部|右图，图像也应该改变，意味着当我点击那个男孩时，他们也应该改变。 .我已经尝试了很多但无法得到它请任何人都可以帮助我，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:45:39.290

检查以下帖子：

*   [http://codingjunkie.net/android-drag-and-drop-part1/](http://codingjunkie.net/android-drag-and-drop-part1/)
*   [http://www.vogella.com/articles/AndroidDragAndDrop/article.html](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)

还有，其他问题： [在android中拖放图像](https://stackoverflow.com/questions/4524288/drag-and-drop-images-in-android)

最后，如果您要创建 API 级别 >= 11 的应用程序，您应该使用这个： [Drag and Drop Android Page](http://developer.android.com/guide/topics/ui/drag-drop.html)

但首先，请记住：永远不要使用`AbsoluteLayout`

# git - Network Manager (Fedora 1) 的 git 存储库位置

> ID：12368792
> 
> 赞同：-4
> 
> 时间：2012-09-11T11:34:05.920
> 
> 标签：git

我在哪里可以找到 Fedora NetworkManager 组件的 git repo 位置？或者更笼统地说，如何在 git 服务器上定位 Fedora 的组件？

我假设 NetworkManager 作为 Fedora 的一个组件有一个专用的 git 存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:44:30.700

Fedora 使用 Gnome 网络管理器。你可以[在这里](http://projects.gnome.org/NetworkManager/)找到你需要的一切。[相反，您会在此处](http://projects.gnome.org/NetworkManager/developers/)找到开发人员提示，以及有关如何获取源代码的说明。

要获取源代码，您应该使用 git：

`git clone git://anongit.freedesktop.org/NetworkManager/NetworkManager.git`

我不记得是否`git`带有默认的 Fedora 安装。但是很容易通过`yum`.

# joomla - 如何在 Joomla 中添加 tinymce！2.5 组件

> ID：12368795
> 
> 赞同：2
> 
> 时间：2012-09-11T11:34:12.863
> 
> 标签：joomla, joomla2.5

我正在尝试制作一个组件，我需要添加已经安装的 Joomla 的 Tinymce 编辑器！在那个组件中。

我在互联网上查看，但没有找到任何示例。到目前为止，我唯一能做的就是下载 tinymce 的 js 文件并将其安装到我的组件中。

但我知道 Joomla 已经为 tinymce 构建了文件。那么如何在我的组件代码中使用它而无需再次下载文件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:50:44.130

您不需要向组件中添加任何 tinymce 文件；在您的模板中，添加以下行：

```
$value = 'your desired text content';
$editor = JFactory::getEditor();
echo $editor->display('editorName', $value, '550', '400', '60', '20', false); 
```

要从输入中检索文本而不将其剥离，请使用以下方法之一：

```
$postData = JRequest::get('POST', JREQUEST_NOTRIM | JREQUEST_ALLOWRAW);
$text = $postData['editorName']; 
```

或者

```
$text = JRequest::getVar( 'editorName', 'defaultValue', 'post', 'string', JREQUEST_ALLOWRAW ); 
```

或者，从 1.6 开始，上述方法似乎已被弃用（请参见[此处](https://groups.google.com/forum/?fromgroups=#!topic/joomla-dev-general/Iy8s0pdE0UE)，以及以下代码的源代码），新方法将是：

```
$jinput = JFactory::getApplication()->input;
// Then use JInput's get() method with the filter you need:
$description = $jinput->get('editorName', 'defaultValue', 'HTML'); 
```

在我的代码中，就在提交表单之前，我还调用了`JEditor::save`; 我不知道这是否真的有必要；经过一些研究，我并没有真正找到它的用途，所以如果没有它对你有用，我会把它排除在外。

有一些类似的问题（例如[这个](https://stackoverflow.com/questions/2540807/how-do-i-make-textarea-a-tinymce-in-joomla)）和论坛帖子（例如[这个](http://forum.joomla.org/viewtopic.php?f=474&t=219145)），但据我所知没有全面的答案，我也曾一度为此苦苦挣扎，这就是为什么我的答案变得相当长的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T11:49:57.760

```
 $editor      =& JFactory::getEditor();
    $editor_tiny = $editor->display('product_section_table[]',$setiontable[$i] ,'95%', '550', '75', '20', false);
    echo $editor_tiny; 
```

您也可以使用此代码

# java - 通过 ch.ethz.ssh2.Connection 使用 JAVA 的 SSH 连接

> ID：12368798
> 
> 赞同：0
> 
> 时间：2012-09-11T11:34:22.303
> 
> 标签：java, ssh, rsa

我正在尝试使用 lib ch.ethz.ssh2.Connection 通过 ssh2 连接到远程服务器

```
connexion = new Connection(host);
connexion.connect();
boolean isOK = connexion.authenticateWithPassword(login, pass); 
```

但我在 connexion.connect(); 中得到一个 IOException 带有此错误消息：

```
Connection closed (Signature sent by remote is wrong!) 
```

我尝试使用 Putty 连接到同一台服务器，我收到一条消息，告诉我指纹不是预期的，但如果我单击“是”以确认我可以连接。

我在 Java Doc 中读到我可以忽略密钥的验证，但不建议这样做（[http://www.ganymed.ethz.ch/ssh2/javadoc/ch/ethz/ssh2/Connection.html#connect%28ch。 ethz.ssh2.ServerHostKeyVerifier,%20int,%20int%29](http://www.ganymed.ethz.ch/ssh2/javadoc/ch/ethz/ssh2/Connection.html#connect%28ch.ethz.ssh2.ServerHostKeyVerifier,%20int,%20int%29)）。

我正在寻找的是一种更改服务器中某些内容的方法，以便我可以正确连接。我不想更改 Java 代码。

谢谢，

奥特曼·马利赫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:37:27.840

远程指纹缓存在您计算机的某个位置。你需要做两件事：

1.  找出远程指纹发生变化的原因。有人篡改了您的连接或远程服务器的可能性不大，但有可能。

2.  刷新缓存。检查你的 SSH 框架的文档如何做到这一点。下次连接时，远程指纹将被重新缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:00:14.553

事实证明，这是由于我使用的 ganymed 版本中的错误。

我将它从 001 更改为 209，现在一切正常。

感谢 Aaron Digulla 的回答。

# asp.net - 我可以同时合并 SignalR 和 RESTful API 吗？

> ID：12368800
> 
> 赞同：119
> 
> 时间：2012-09-11T11:34:25.983
> 
> 标签：asp.net, rest, web-applications, asp.net-web-api, signalr

我有一个使用 ASP.NET 开发的单页 Web 应用程序。[我最近使用SignalR](http://signalr.net/)库将许多 Web 方法转换为基于推送的方法。这确实大大加快了页面速度，并减少了来自页面的大量服务器调用。

同时，我也一直在研究一些服务器端方法的 RESTful ASP.NET WebAPI，真正的优点是它允许在我开发的同时为外部应用程序创建 API核心应用程序（这对我正在做的事情很重要）。

然而，在看了几篇文章和[这](https://stackoverflow.com/questions/11427573/is-it-possible-to-create-simple-rest-services-with-signalr) [两个](https://stackoverflow.com/questions/11646918/turn-by-turn-game-use-signalr-or-both-signalr-and-rest-api)问题之后，push 和 WebAPI 方法似乎是两种完全不同的客户端-服务器通信范式。我确信我可以创建可以通过任一协议访问的各种方法，但我不确定这是否存在陷阱，或者这是否被认为是草率 - 也许有一种更优雅的方式来实现我的目标为了。

在某些情况下，我希望 RESTful WebAPI 通过 SignalR 集线器广播事件......相反（SignalR 曾经需要访问 WebAPI）似乎不太可能，但我认为仍然可能。

有人做过吗？有没有人对如何进行有任何建议或提示？这里最优雅的前进方式是什么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-11T12:26:09.947

看看这篇[博](http://bradwilson.typepad.com/blog/2012/07/webstack-of-love.html)文中的视频。它准确地解释了如何将 WebAPI 与 SignalR 一起使用。

本质上，Web API + SignalR 集成包含在此类[中](https://github.com/bradwilson/WebstackOfLove/blob/master/Controllers/ApiControllerWithHub.cs)：

```
public abstract class ApiControllerWithHub<THub> : ApiController
    where THub : IHub
{
    Lazy<IHubContext> hub = new Lazy<IHubContext>(
        () => GlobalHost.ConnectionManager.GetHubContext<THub>()
    );

    protected IHubContext Hub
    {
        get { return hub.Value; }
    }
} 
```

就这样。:)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-11T12:28:43.770

SignalR 实际上已经合并到 WebAPI 源 vNext (4.1) 中。

如果您不使用 RTM 构建，而是从 Codeplex 获取构建，您会看到那里有一个名为`System.Web.Http.SignalR`您可以使用的新项目。它是几天前通过此提交添加的 - [http://aspnetwebstack.codeplex.com/SourceControl/changeset/7605afebb159](http://aspnetwebstack.codeplex.com/SourceControl/changeset/7605afebb159)

示例用法（如提交中所述）：

```
public class ToDoListController : HubController<ToDoListHub>
{
    private static List<string> _items = new List<string>();

    public IEnumerable<string> Get()
    {
        return _items;
    }

    public void Post([FromBody]string item)
    {
        _items.Add(item);
        // Call add on SignalR clients listening to the ToDoListHub
        Clients.add(item);
    }
} 
```

如果您现在不想切换到 vNext，您可以随时使用该代码作为参考。

这个实现与 Brad Wilson 在 NDC Oslo 上展示的非常相似（更精致，包括测试等） - [http://vimeo.com/43603472](http://vimeo.com/43603472)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-15T07:31:27.357

这是显示两种技术集成的视频 [http://channel9.msdn.com/Events/TechDays/Belgium-2013/25](http://channel9.msdn.com/Events/TechDays/Belgium-2013/25) 这里有一个用于集成的 NuGet 包 [https://www.nuget.org/包/Microsoft.AspNet.WebApi.SignalR/](https://www.nuget.org/packages/Microsoft.AspNet.WebApi.SignalR/)

# ios - 在IOS中解析json数组

> ID：12368803
> 
> 赞同：0
> 
> 时间：2012-09-11T11:34:32.177
> 
> 标签：ios, json

我在解析 json 对象的教程中找到了这部分代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];

    // show all values
    for(id key in res) {

        id value = [res objectForKey:key];

        NSString *keyAsString = (NSString *)key;
        NSString *valueAsString = (NSString *)value;

        NSLog(@"key: %@", keyAsString);
        NSLog(@"value: %@", valueAsString);
    }

    // extract specific value...
    NSArray *results = [res objectForKey:@"results"];

    for (NSDictionary *result in results) {
        NSString *icon = [result objectForKey:@"icon"];
        NSLog(@"icon: %@", icon);
    }

} 
```

当我的 JSON 对象采用这种形式时，我能够使用该代码并解析数据：

`{"data_1":0,"data_2":0,"Plato 1":0,"data_3":0....}`我只是在搜索特定的键，名为 data_1 等等。

现在我通过 DB 获取数据，所以我的 JSON 对象是一个数组。

JSON 对象是这种形式：

```
[{"0":"1","id":"1","1":"text1","image":"text2","2":"0"}] 
```

我必须做出哪些改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:40:56.610

你的例子是完全错误的。对于一般情况，您应该将解析结果接收到 NSObject 指针中，然后使用`isKindOfClass`. 您得到的不是 NSDictionary，而是一个 NSArray，其中包含一个 NSDictionary 条目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T12:12:54.510

```
NSArray *calArray=[//---get columns from DB----//];
if (calArray) 
{
    for (int j=0; j<[calArray count]; j++) 
    {
        NSDictionary *dct=(NSDictionary *)[calArray objectAtIndex:j];
        NSString *string=(NSString *)[dct objectForKey:@"your_key"];
        [your_array addObject:string];

       // repeat the above code for more keys.
    }
} 
```

# android - 在重新访问应用程序时停止重新启动 asynctask

> ID：12368807
> 
> 赞同：0
> 
> 时间：2012-09-11T11:34:41.990
> 
> 标签：android

我的应用程序只是简单地请求`json`数据`url`并将其显示在`TableLayout`. 我曾经`asynctask`请求`json`数据，然后我使用该`json`数据来填充我的`TableLayout`. 它工作正常但是当我按下`back`按钮然后我再次进入应用程序时，它再次`json`通过运行请求数据`AsyncTask`。我只是想再次停止调用`AsyncTask`。所以它`TableLayout`被相同的数据填充了两次。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:42:44.127

进行全局布尔旋转并使用它：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    // Here save the data you have
    outState.putInt("integer1", value);...

    super.onSaveInstanceState(outState);
}

  @Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    value = savedInstanceState.getInt("integer1");...
           //fill your layout here
    super.onRestoreInstanceState(savedInstanceState);
    rotation = true;
}

   @Override
public void onResume() {
    super.onResume();
 if(!rotation){
 //start AsyncTask here
 }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:46:52.807

可能的情况： 1.如果您想加载一次数据，最好在 onResume 中调用异步任务以将其放在 onCreate 上。2.取消onStop或者onPause里面的异步任务或者在onResume里面正确处理。

# iphone - 方向不适用于 AlertView 中的 UITableview

> ID：12368808
> 
> 赞同：3
> 
> 时间：2012-09-11T11:34:44.247
> 
> 标签：iphone, uiview, orientation, uialertview

我通过继承 UIAlertView 创建了 Custome AlertView 类，并在 -(void)prepare 中添加了 UITableView

方法

![这是带有 Potrait 方向的 UIAlertView 内的 TableView 的图像](../Images/ce17d69046eda612f06977b7fb9b0652.png)

![这是我改变方向的时候](../Images/a64cc1d4bd573e434846933b795ca914.png)

任何人都可以建议我摆脱这个问题的方法......在此先感谢。

我这样做是为了跟踪方向变化

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    NSNotificationCenter* notifCenter = [NSNotificationCenter defaultCenter];
    [notifCenter addObserver:self
                    selector:@selector(orientationChanged)
                        name:UIDeviceOrientationDidChangeNotification
                      object:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:23:03.610

这是控制的好主意，我找到了一个现成的 Git 存储库：[https ://github.com/blommegard/SBTableAlert/blob/master/SBTableAlert.m](https://github.com/blommegard/SBTableAlert/blob/master/SBTableAlert.m)

具有零间隔方向变化的方向变化逻辑调度`layout`方法。该代码是在无副本 MIT 许可下分发的，因此您可以使用它或只是获取一些有用的提示。

# asp.net - 在 3 层架构中将采用哪些层扩展方法

> ID：12368810
> 
> 赞同：2
> 
> 时间：2012-09-11T11:34:53.203
> 
> 标签：asp.net, .net, 3-tier

我正在创建一个 3 层架构 Web 应用程序，并且我想使用扩展方法。我应该在哪一层放置扩展方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:37:56.653

您将扩展方法放置在使用它们的任何层。

扩展方法可以扩展基本 UI 类、BLL 类和/或 DAL 类。

您将它们放置在使用它们的位置附近 - 如果要在多个地方使用它们，则将它们放置在实用程序或核心类/程序集中。

# php - 如何在 PHP 中将十六进制值转换为有符号整数？

> ID：12368811
> 
> 赞同：3
> 
> 时间：2012-09-11T11:34:55.670
> 
> 标签：php, hex

我正在尝试将十六进制字符串转换为有符号整数。

我可以使用 hexdec() 轻松地将其转换为无符号值，但这不会给出有符号值。

编辑：

VB 中的代码 - 两个“AA”十六进制值具有代表性。

```
Dim bs(2) As Byte
bs(1) = "AA"
bs(2) = "AA"
Dim s As Short
s = BitConverter.ToInt16(bs, 1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:51:33.257

通过 php.net查看此[评论：](http://www.php.net/manual/pl/function.hexdec.php#108897)

> hexdec() 返回无符号整数。例如 hexdec("FFFFFFFE") 返回 4294967294，而不是 -2。要转换为带符号的 32 位整数，您可以执行以下操作：

```
<?php
echo reset(unpack("l", pack("l", hexdec("FFFFFFFE"))));
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T11:40:08.020

如[hexdec 手册页](http://php.net/hexdec)所述：

> 该函数现在可以将平台整数类型的值转换为大值，在这种情况下它将返回值作为浮点数。

如果你想获得某种大整数（不是浮点数），你需要将它存储在一个字符串中......这可能使用[BC Math](http://php.net/manual/en/book.bc.php)函数。

例如，如果你查看 hexdec 手册页的注释，你会发现[这个注释](http://fr.php.net/manual/en/function.hexdec.php#90309)

如果您稍微调整该功能，以避免通知，您将获得：

```
function bchexdec($hex)
{
    $dec = 0;
    $len = strlen($hex);
    for ($i = 1; $i <= $len; $i++) {
        $dec = bcadd($dec, bcmul(strval(hexdec($hex[$i - 1])), bcpow('16', strval($len - $i))));
    }
    return $dec;
} 
```

*（此功能已从我链接到的注释中复制；并且仅被我改编了一点）*

并在您的号码上使用它：

```
$h = 'D5CE3E462533364B';
$f = bchexdec($h);
var_dump($f); 
```

输出将是：

```
string '15406319846273791563' (length=20) 
```

所以，不是你拥有的那种大浮动；并且您所期望的似乎还可以：

> 结果来自 calc.exe = 15406319846273791563

希望这能有所帮助 ;-)
*而且，是的，PHP 文档上的用户注释有时是一个真正的金矿 ;-)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-29T13:28:37.990

我一直在尝试为这个问题找到一个体面的答案，所以我编写了这个函数，它适用于十六进制字符串输入，返回一个带符号的十进制值。

```
public function hex_to_signed_int($hex_str){
    $dec = hexdec($hex_str);
    //test is value negative
    if($dec & pow(16,strlen($hex_str))/2 ){ return $dec-pow(16,strlen($hex_str));}
    return $dec;
} 
```

# c# - 使用 OleDbDataAdapter (c#) 读取时间错误

> ID：12368813
> 
> 赞同：0
> 
> 时间：2012-09-11T11:35:02.490
> 
> 标签：c#, excel, datetime, oledbconnection

我有一个 excel (xlsx 2010) 文档，其中只包含两列，一列用于日期时间，一列用于值，格式如下：

```
DateTime                Value
01/09/2012 00:00:00     1.23456
02/09/2012 00:05:00     1.23457
03/09/2012 00:10:00     1.23458
04/09/2012 00:15:00     1.23459 
```

日期时间列设置为自定义格式 (dd/mm/yyyy hh:mm:ss)，所有时间都精确地位于 5 或​​ 10 分钟标记上，秒始终为 00。

但是，当我使用以下方法阅读此内容时：

```
connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=Excel 12.0;", filePath);
OleDbCommand sqlComm = new OleDbCommand("SELECT * FROM [Sheet1$]", new OleDbConnection(connectionString));
OleDbDataReader r = sqlComm.ExecuteReader(); 
```

前两个 DateTimes 被正确读取，但毕竟 DateTimes 比文件实际包含的内容少一秒，例如：

```
00:15:00    00:14:59
00:20:00    00:19:59 
```

有谁知道为什么？或者我可以做些什么来纠正它，而不是手动检查它们并四舍五入到最近的分钟（在这种情况下是一个可行的选择 - 我认为）

PS。为了简洁起见，我已经剪切并粘贴了相关的代码行，所以上面的代码示例在技术上可能不起作用，但在真正的应用程序中它确实读取了文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:41:29.697

将评论转换为答案

经过重大改造和陡峭的学习曲线后，我可以确认使用互操作库可以正确读取文件。

请参阅下面的示例代码，基于网络上的其他帖子

```
object misValue = System.Reflection.Missing.Value;
// COMM creates a wrapper for each object and they don't get cleaned up.  Never use 2 dots with comm
Excel.ApplicationClass xlApp = new Excel.ApplicationClass();
Excel.Workbooks xlWorkbooks = xlApp.Workbooks;
Excel.Workbook xlWorkbook  = xlWorkbooks.Open(fileInfo.getFileURL(), misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);
Excel.Worksheet xlWorksheet = (Excel.Worksheet)xlWorkbook.Sheets[1];
Excel.Range xlRange, r;

try
{
    xlRange = (Excel.Range)xlWorksheet.UsedRange;

    int rowCount = xlRange.Rows.Count;
    int colCount = xlRange.Columns.Count;

    for (int col = 0; col < colCount; col++)
    {
        r = (Excel.Range)xlRange.Cells[fileInfo.columnHeaders, (col + 1)];
    }
} 
```

# html - a中的元素 元素

> ID：12368815
> 
> 赞同：-1
> 
> 时间：2012-09-11T11:35:04.627
> 
> 标签：html, css

我刚刚开始使用 HTML5 显示元素（页眉、页脚、导航等），当我在 HTML5 规范中遇到这个时，我正在阅读有关导航元素的具体信息：

> 并非页面上的所有链接组都需要位于 nav 元素中——该元素主要用于包含主要导航块的部分。特别**是，页脚通常会包含指向站点各个页面的链接的简短列表，例如服务条款、主页和版权页面。对于这种情况，仅页脚元素就足够了；虽然在这种情况下可以使用 nav 元素，但通常没有必要。**

为什么特别不能在页脚中使用导航元素？通常情况下，网站的页脚中似乎有一个实质性的导航菜单（以 StackOverflow 为例，它的页脚中的导航比页眉更大！）

如果我在页脚中包含 nav 元素，我的网站是否会通过 HTML5 验证？或者这只是 W3C 提出的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:13:03.683

再看一遍文字，**不是**说不允许，只是**不推荐**。

至于原因我只能推测：这些新元素是出于语义原因而引入的，如果您遵循此建议，您将为主要导航元素赋予更多价值（我认为是 SEO）。

# javascript - 在按钮上调用 Javascript 函数

> ID：12368821
> 
> 赞同：0
> 
> 时间：2012-09-11T11:36:02.907
> 
> 标签：javascript, function, cordova, storage

我正在尝试使用 PhoneGap 开发一个 android 应用程序。我正在使用存储插件并遵循 PhoneGap 提供的文档。我遇到了一个选择查询的函数定义。我正在考虑制作一个按钮来触发该查询，但我只是不知道如何。我是 JavaScript 的新手。这是函数的代码：

```
 function queryDB(tx) {
    tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
 } 
```

我试图制作这样的按钮，但它不起作用：

```
<button onclick="queryDB();">SELECT</button> 
```

我相信它在括号之间遗漏了一些东西，但我无法弄清楚它是什么。谢谢，伊娃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:38:12.210

你错过了参数`tx`。

```
<button onclick="queryDB(tx);">SELECT</button> 
```

但是应该有一个全局变量`tx`。

# yii - 当 'urlFormat' 设置为 'path' 时无法获取 GET 查询参数

> ID：12368829
> 
> 赞同：0
> 
> 时间：2012-09-11T11:36:26.063
> 
> 标签：yii, seo

我试过`echo $_GET['id']`, `var_dump($_GET)`，但都没有给出想要的结果。

在应用程序的 main.php 文件中启用后`urlFormat`，我无法再获取名为“id”的查询参数。

url 的格式为：index.php/controller/action/param（我没有 htaccess 文件）

现在 URL 看起来像：`index.php/article/read/daily_proxy_list`

仅使用`var_dump($_GET)`返回：

```
array
  'daily_proxy_list' => string '' (length=0) 
```

以下是我创建指向该位置的 URL 的方法：

```
$this->createUrl('article/read', array('id'=>$key)); 
```

我的问题是，如何获取名为“id”（或任何其他名称）的查询参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:05:54.670

来自 yii 文档

```
Since version 1.1.4, Yii has added support for automatic action parameter binding. That is, a controller action method can define named parameters whose value will be automatically populated from $_GET by Yii. 
```

因此，为了获取值`$_GET['id']`，您只需将参数添加`$id`到`actionRead()`. Yii 会自动填充它`$_GET['id']`

```
public function actionRead($id)
{
    var_dump($id);
} 
```

有关更多信息和示例，请参阅[Yii 文档](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:35:05.707

您是否尝试过将[parseUrl](http://www.yiiframework.com/doc/api/1.1/CBaseUrlRule#parseUrl-detail)与 $_SERVER['QUERY_STRING'] 或类似内容一起使用？

# sql - 我想要具有特定日期持续时间的数据。我在 sql 中的数据库

> ID：12368832
> 
> 赞同：0
> 
> 时间：2012-09-11T11:36:42.770
> 
> 标签：sql, date, sql-server-2008-r2

我有一个 SQL 数据库，其中有一个 DataType DateTime 列。现在我想要具有特定日期持续时间的数据。例如，我想要从 01/09/2012 到 10/09/2012 的数据，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:39:07.807

是的，试试这个：

```
SELECT *
FROM YourTable
WHERE Date >= '2012-09-01 00:00:00' AND Date < '2012-09-11 00:00:00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:34:37.413

首先创建一个从 DateTime 中删除时间的函数。我打电话给我的 dbo.DateOf

```
CREATE FUNCTION [dbo].[DateOf](
    @DateAndTime DateTime
)
RETURNS DateTime
AS
begin
    RETURN Cast(FLOOR(Cast(@DateAndTime as Float)) as DateTime)
end 
```

现在您将能够进行这样的查询并从包含时间的 Datetime 列中获取结果 - 这对人类来说很有意义

```
SELECT * FROM YourTable
where dbo.Dateof(datecolumn) >= '2012-09-01' and dbo.DateOf(datecolumn) <= '2012-09-11' 
```

# java - 我应该使用什么 html 解析器？

> ID：12368834
> 
> 赞同：2
> 
> 时间：2012-09-11T11:36:45.620
> 
> 标签：java, tag-soup, jericho-html-parser, crawler4j

我正在开发一个需要解析 HTML 文档的产品。我寻找 Jericho、TagSoup、Jsoup 和 Crawl4J。我应该使用哪个解析器来解析 HTML，因为我需要使用石英在多线程环境中运行此进程？

如果一次有 10 个线程在内存中运行，那么我需要一个消耗更少内存的 API。在杰里科，我在某处读到它是基于文本的搜索 API，并且消耗的内存更少。我对吗？或者我应该去其他的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:41:26.460

测试它们并检查它们的内存占用。如果不了解和测试您要解析的 HTML，就很难对内存配置文件进行预测。

FFIW，我在许多不同的系统中使用过 Jsoup，我发现它工作得非常好。我也从未注意到它有任何猖獗的记忆问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T18:28:56.760

我正在使用 JSoup，给我留下了深刻的印象。它的解析速度非常快，而且它的 CSS 样式模式匹配内容比 XPath 更容易维护。

我首先尝试了Validator.nu 的解析器，发现它非常缺乏。文档非常薄，我无法让它正确执行在 Chrome 中运行良好的 XPath。

另外，看看这个问题：[哪个 HTML Parser 是最好的？](https://stackoverflow.com/questions/2168610/which-html-parser-is-best)

# r - 插入符号中具有 rfe 函数的二项式 GLM 特征选择

> ID：12368836
> 
> 赞同：1
> 
> 时间：2012-09-11T11:36:50.350
> 
> 标签：r, glm

是否可以使用 caret 包中的 rfe 函数在二项式 GLM 上进行特征选择？我想传递预测器和预测的数据框，让它返回最好的模型和特征。如果没有，我应该使用另一个包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:57:41.223

看看`?lrFuncs`你想要什么，尽管你可能最好使用正则化`glmnet`而不是特征选择包装器方法。

最大限度

# google-app-engine - 我没有收到创建应用程序的确认消息

> ID：12368838
> 
> 赞同：1
> 
> 时间：2012-09-11T11:36:55.337
> 
> 标签：google-app-engine

我的手机收不到创建新应用的短信确认信息。[未在https://developers.google.com/appengine/kb/supported_carriers#B](https://developers.google.com/appengine/kb/supported_carriers#B)中列出的手机提供商。

在这种情况下我如何使用谷歌应用引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:30:28.340

此页面上有一个链接到的表格：

[https://developers.google.com/appengine/kb/sms#error](https://developers.google.com/appengine/kb/sms#error)

你可以根据你的情况填写。

[https://appengine.google.com/waitlist/sms_issues](https://appengine.google.com/waitlist/sms_issues)

# javascript - 触发事件后如何选择select的选项

> ID：12368839
> 
> 赞同：0
> 
> 时间：2012-09-11T11:37:01.807
> 
> 标签：javascript, jquery

我有一个 jquery 回发，在得到 JSON 的回复后，我正在更改输入类型的值，如下所示

```
$('#new-address select[name=\'country_id\']').val(data['country_id']).trigger('change');
$('#new-address select[name=\'zone_id\']').val(data['zone_id']); 
```

在更改所选值之后，我触发了一个事件“更改”以填充状态选择输入，之后我想更改状态选择输入的所选值，但是从上面的代码中它不会改变状态选择的值，而是填充状态。

所以我想可能是控制在触发这个功能后没有回来，所以为了测试我放了一个警报，看看它是否像这样来到这里

```
$('#new-address select[name=\'country_id\']').val(data['country_id']).trigger('change');
alert('came here');
$('#new-address select[name=\'zone_id\']').val(data['zone_id']); 
```

在对此进行测试后，我收到警报说来到这里并单击确定后，状态的值正在按照我的意愿发生变化。

那么我之前的方法有什么问题，为什么在添加警报后它可以正常工作？我应该做哪些改变才能得到我想要的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:23:11.303

I am not sure it's correct or wrong way but it worked for me. As suggested by @abhi that javascript runs sequentially so I changed my code to this:

```
$('#new-address select[name=\'country_id\']').val(data['country_id']);
var selectedstate = data['zone_id'];
$.get(
      "index.php?route=common/home/country&token=<?php echo $token;?>",
       { 'country_id': data['country_id'] },
       function(json) {
           html = '<option value=""><?php echo $text_select; ?></option>';
           if (json['zone'] != '') {
               for (i = 0; i < json['zone'].length; i++) {
                    html += '<option value="' + json['zone'][i]['zone_id'] + '"';
                    if (parseInt(json['zone'][i]['zone_id']) == parseInt(selectedstate)) {
                        html += ' selected="selected"';
                     }
                     html += '>' + json['zone'][i]['name'] + '</option>';
                }
           } else {
                   html += '<option value="0" selected="selected"><?php echo $text_none; ?></option>';
                  }
          $('#new-address select[name=\'zone_id\']').html(html);
        },
        'json'
); 
```

by doing this I got what I wanted because selected value of state is set while it's making html for state select.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:25:59.580

这与您的 ajax 调用的 async 属性有关。不建议这样做，但您可以将其设置为 false，它应该可以正常工作。或者你真的需要学习如何使用[回调函数](https://stackoverflow.com/questions/1457690/jquery-ajax-success-anonymous-function-scope)！

# jquery - 以编程方式触发 jQuery 单击时 window.location 发生故障

> ID：12368841
> 
> 赞同：0
> 
> 时间：2012-09-11T11:37:08.957
> 
> 标签：jquery, events, redirect, triggers, window.location

考虑这个 HTML

```
<table id="search_results">
    <tr><td><a href="reports.php" style="display:none">_</a>Report 1</td></tr>
</table> 
```

我编写了代码，当鼠标单击其父 (TR) 包含带有 href 属性的 A 标记的 TD 时，窗口将重定向到该页面：

```
//Set row clicking
$('table#search_results td').click(function () {
    var href = $(this).parent().find('a').attr("href");
    if (href) { window.location = href; }
}); 
```

当用户点击 TD 时，此代码完美运行。但是，我编写了在按下返回按钮时触发单击事件的代码。

```
$(document).keypress(function(e) {
    if(e.which == 13) {
        $('table#search_results tr:not([class=vanish]) td:first').click();
    }
}); 
```

我已经调试了代码。当按下返回按钮时，单击事件实际上被触发并且 href 变量被正确填充但是页面只是用 ? 在 URL 的末尾而不是被重定向到设置的 href...（例如，如果我在“index.php”中并打算转到“reports.php”，而不是去那里，页面会用 url 刷新“index.php？”

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:32:09.903

i think what you meant to do is:

```
$(selector).trigger("click"); 
```

also:

window.location is an object. what you probably wanted to set is window.location.href

[http://davidwalsh.name/javascript-window-location](http://davidwalsh.name/javascript-window-location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:34:11.290

改正了。。我的错。。。

本机表单提交正在接管 jquery 代码，即使表单没有任何操作并且任何地方都没有提交按钮。我所要做的就是添加 onsubmit="return false;" 在表格中。

# cross-browser - chrome 中恢复的关闭选项卡无法正常工作，但在 IE 和 Firefox 中可以正常工作

> ID：12368843
> 
> 赞同：1
> 
> 时间：2012-09-10T22:15:54.347
> 
> 标签：cross-browser, google-chrome

我正在从日历加载信息的网站上工作。如果用户单击日历上的链接，则会显示有关该链接的信息。如果我关闭该页面，然后重新打开它，它在 IE 和 Firefox 上都可以正常工作，但是如果我在 chrome 中打开它，然后单击日历上的另一个项目，则会出错。

chrome 如何带回标签页与 IE 或 Firefox 的做法是否存在很大差异？

# php - 更改 PHP/SQL 查询时的问题

> ID：12368845
> 
> 赞同：3
> 
> 时间：2012-09-11T11:37:25.783
> 
> 标签：php, mysql, sql, select

在我的网站上，我有一个页面，只有在人员详细信息位于名为“成员”的表中时才能查看该页面，这些值是从前一页的表单中发布的。这是我的原始代码，它运行良好：

```
$query = "SELECT * FROM Members WHERE firstname='" . $firstname . "' and surname='" . 
$surname. "'"; 
$result = mysql_query($query);
$rows = mysql_num_rows($result);

if ($rows == 1) 
{ 
   //user continues loading page
} 
else 
{ 
   header ('location: signup.html'); //user is redirected to sign up page 
} 
```

在对站点进行一些更改后，我现在要求同一用户必须在成员表中具有paid='TRUE' 才能继续加载页面。这是我想出的代码：

```
$query = "SELECT * FROM Members WHERE firstname='" . $firstname . "' and surname='" . 
$surname. "'"; 
$result = mysql_query($query);
$rows = mysql_num_rows($result);

$query = "SELECT paid FROM Members WHERE firstname='" . $firstname . "' and surname='" . 
$surname. "'"; 
$result = mysql_query($query);
$paid = mysql_num_rows($result);

if ($rows == 1 && $paid=='TRUE') 
{ 
   //user continues loading page
} 
else 
{ 
   header ('location: signup.html'); //user is redirected to sign up page 
 } 
```

使用这个新代码，即使用户已经付费，它也会将他们重定向到注册页面……我是不是走错了路？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:44:37.257

你检查 $paid 对 'TRUE' 但用 mysql_num_rows 填充它。尝试：

```
if ($rows > 0  && $paid >0 ) 
```

反而。

另外，由于我看不到你是否正确地转义了你的字符串，请注意 $firstname 和 $surname 应该被转义/验证。

无论如何，您可以跳过第二个 mysql_query 并使用：

```
 $query = "SELECT * FROM Members WHERE firstname='" . $firstname . "' and surname='" . 
    $surname. "'"; 
    $result = mysql_query($query);
    $rows = mysql_num_rows($result);
    if( $rows ){

    $row = mysql_fetch_assoc($result);
        if($row['paid'] =='TRUE') {
            //continue
        } else {
    //redirect
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T11:43:06.820

你可以试试这个：

```
$query = "SELECT * FROM Members WHERE firstname = '" . $firstname . "' and surname = '" . $surname. "' and paid = 'true'";
$rows = mysql_num_rows(mysql_query($query));

if ($rows == 1) { 
   //user continues loading page
} 
else { 
   header ('location: signup.html'); //user is redirected to sign up page 
} 
```

您还必须确保检查 sql 注入`$firstname`和`$surname`！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T11:42:01.803

你的代码是错误的。这应该没问题：

```
$query = "SELECT * FROM Members WHERE firstname='" . $firstname . "' and surname='" . $surname. "'"; 
$resource = mysql_query($query);
$rows = mysql_num_rows($result);

if ($rows) { 
    $result = mysql_fetch_assoc($resource);
    if($result['paid'] == 'TRUE') {
        //user continues loading page
    } else {
        // user has not paid, redirect him to payment page
    }
} else { 
    header ('location: signup.html'); //user is redirected to sign up page 
} 
```

无论如何，我建议开始使用`mysqli`或`PDO`功能`mysql_*`已被弃用。

# python - 将 xsd:dateTime 格式化字符串解析为 python 日期时间

> ID：12368850
> 
> 赞同：1
> 
> 时间：2012-09-11T11:37:38.160
> 
> 标签：python, datetime, xsd, timezone

[给定一个xsd:dateTime 格式](http://books.xmlschemata.org/relaxng/ch19-77049.html)的字符串，我想创建一个 python 日期时间对象。我特别需要能够解析例如像这样的字符串'2012-09-23T09:55:00'，但所有其他定义的示例也应该正确解析，并且还使用时区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:38:30.573

使用[`datetime.datetime.strptime`类方法](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)解析这些：

```
dt = datetime.datetime.strptime(xsdDateTime, '%Y-%m-%dT%H:%M:%S') 
```

但是，您的示例不*包括*时区。如果您确实需要时区支持，最好使用该[`python-dateutil`模块](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)：

```
from dateutil.parser import parse
dt = parse(xsdDateTime) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T09:07:44.887

我还会推荐 python-dateutil 包。我使用的是 2.7.3 版，它也有一个 isoparser。但是，isoparser 不仅仅解析时间字符串，而且我已经填写了一个问题。请改用解析器模块。

```
from dateutil.parser import parse
dt = parse(xsdDateTime) 
```

hth，亚历克斯

# ruby - LoadError：没有要加载的文件--htmlentities

> ID：12368853
> 
> 赞同：3
> 
> 时间：2012-09-11T11:37:48.790
> 
> 标签：ruby, rubygems, html-entities

我正在使用 Ruby 1.8.7 编写脚本，但是在尝试使用库“htmlentities”解析 html 实体时遇到了一些问题。

尽管我已经使用 gem 安装了该库，但我无法加载它。这是错误：

```
1.8.7 :001 > require 'htmlentities'
LoadError: no such file to load -- htmlentities 
```

这是我的宝石清单：

```
actionmailer (2.3.4)
actionpack (2.3.4)
activerecord (2.3.4)
activeresource (2.3.4)
activesupport (2.3.4)
bundler (1.2.0)
htmlentities (4.3.1)
rack (1.0.1)
rails (2.3.4)
rake (0.9.2.2)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
sqlite3 (1.3.6) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T03:13:58.257

做：

```
require 'rubygems'
require 'htmlentities' 
```

工作？

编辑：刚刚注意到你有捆绑器。你是如何创建 REPL 的？你在使用 Rails 控制台吗？如果是这样，您可能需要将 htmlentities 添加到您的 Gemfile

# scala - 毫无期待地创建 ScalaMock 2.4 ProxyMock

> ID：12368858
> 
> 赞同：0
> 
> 时间：2012-09-11T11:37:59.440
> 
> 标签：scala, scalatest, expectations

比如说，我`class Person`与其他班级合作，`Kettle`并且`Teacup`.

`Person`有一个方法`makeTea()`应该以不同的方式连续地与`Kettle`and交互`Teacup`，但顺序并不重要。我想在两个单独的单元测试中捕获 and 之间的交互，以及 and 之间的交互（我们`Person`称它们`Kettle`为and ）`Person``Teacup``testPersonFillsKettleWithWater``testPersonPoursBoilingWaterIntoTeacup`

要测试该方法`makeTea()`，没有必要也`Kettle`没有`Teacup`。在测试与 的交互时`Kettle`，任何交互`Teacup`都无关紧要。

但是，对于 ScalaMock，如果您没有声明期望`Teacup`并且发生了一些交互，那么就会`Teacup`对“意外的方法调用”等发脾气。

在[jMockit](https://code.google.com/p/jmockit/)文献中，这被称为设置“严格”期望。我希望能够省略指定每个期望，而只测试一种方法中的某些交互。所以问题是：

**ScalaMock 是否支持非严格期望？**

我知道`mock stub 'method`语法，但是列出我发现自己必须列出的所有期望很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:02:41.453

这种类型的功能已经在[ScalaMock3 的预览版中](http://www.paulbutcher.com/2012/06/scalamock-3-0-preview-release/)，但恐怕在 ScalaMock 2.4 中没有。

我不打算对 2.x 系列进行任何重大更新。话虽如此，您要查找的内容应该不会太难添加。请随时[添加问题](https://github.com/paulbutcher/ScalaMock/issues)，我会看看我能做些什么。

或者，如果您喜欢自己动手（以查看[`ProxyMockFactory`](https://github.com/paulbutcher/ScalaMock/blob/master/core/src/main/scala/org/scalamock/ProxyMockFactory.scala)作为起点），我很乐意接受添加此功能的拉取请求。

# php - 将 JSON 中的字符串从 Javascript 保存到 MySQL 并取回的安全方法？

> ID：12368860
> 
> 赞同：1
> 
> 时间：2012-09-11T11:38:16.263
> 
> 标签：php, javascript, mysql

我通过 PHP 脚本将字符串从 JS 传递到 MySQL 数据库，如下所示：

JavaScript：

```
var text = getElementById('inputBox').value; //"how are you? ()#@&^""''źćż@**$&#@(~(_(@#$)__0"
var rray = {
   type = "someText";
   message : addslashes(text);
}
var json = JSON.stringify(rray); 
```

在哪里：

```
function addslashes(str) {
    str=str.replace(/\\/g,'\\\\');
    str=str.replace(/\'/g,'\\\'');
    str=str.replace(/\"/g,'\\"');
    str=str.replace(/\0/g,'\\0');
    return str;
} 
```

我正在向 PHP 发送 json：

```
var result = get_content("http://url.com/script.php?action=" + encodeURIComponent(json) ); 
```

并将 json 保存到 MySQL 数据库（PHP）：

```
$data = mysql_escape_string($_REQUEST['data']);
$query = "INSERT INTO datas (data) VALUE ('$data')";
execute($query); 
```

接下来我像这样从数据库中取回它：

```
$data = "SELECT DATA from datas WHERE ID = 1";
(...) getting from database
echo $row['DATA']; 
```

我使用 PHP 中的 Javascript 得到它：

```
var result = get_content("http://url.com/script.php?get=y"); 
var data = jeval(result);
var action_data = jeval(stripslashes(data.action));
var message = stripslashes(action_data.message); 
```

在哪里：

```
function stripslashes(str) {
str=str.replace(/\\'/g,'\'');
str=str.replace(/\\"/g,'"');
str=str.replace(/\\0/g,'\0');
str=str.replace(/\\\\/g,'\\');
return str;
} 
```

和：

```
function jeval(str)
{
    lastEvalString = str;
    return eval('(' +  str + ')');
} 
```

并显示它：

```
getElementById('inputBox').value = message; 
```

大多数普通文本都被传递到数据库并成功返回。但是在使用符号（和）或其他特殊字符时出现奇怪的错误，例如：

```
 unexpected token: )
   illegal token
   script error 
```

您能否查看代码并帮助我找出我做错了什么？我找不到它...谢谢。

# android - 为什么模拟器犹豫显示android应用程序？

> ID：12368865
> 
> 赞同：0
> 
> 时间：2012-09-11T11:38:32.400
> 
> 标签：android, android-emulator

无法在正在运行的模拟器上显示 android 应用程序。实际上我正在尝试通过来自 android 的 SOAP 方法使用 Web 服务，我想我已经正确完成了每个代码，但是当我尝试运行这个应用程序时，控制台和 logcat 是这样说的

*安慰*

```
[2012-09-11 16:26:47 - TMS_Chart] -----------
[2012-09-11 16:26:47 - TMS_Chart] Android Launch!
[2012-09-11 16:26:47 - TMS_Chart] adb is running normally.
[2012-09-11 16:26:47 - TMS_Chart] No Launcher activity found!
[2012-09-11 16:26:47 - TMS_Chart] The launch will only sync the application package on the device!
[2012-09-11 16:26:47 - TMS_Chart] Performing sync
[2012-09-11 16:26:47 - TMS_Chart] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Android22-API-8'
[2012-09-11 16:26:47 - TMS_Chart] Uploading TMS_Chart.apk onto device 'emulator-5554'
[2012-09-11 16:26:50 - TMS_Chart] Installing TMS_Chart.apk...
[2012-09-11 16:26:54 - TMS_Chart] Success!
[2012-09-11 16:26:54 - TMS_Chart] \TMS_Chart\bin\TMS_Chart.apk installed on device
[2012-09-11 16:26:54 - TMS_Chart] Done! 
```

logcat 是这样说的，

*日志猫*

```
09-11 16:26:53.463: D/AndroidRuntime(494): Shutting down VM
09-11 16:26:53.473: D/dalvikvm(494): Debugger has detached; object registry had 1 entries
09-11 16:26:53.513: I/AndroidRuntime(494): NOTE: attach of thread 'Binder Thread #3' failed
09-11 16:26:58.443: D/dalvikvm(191): GC_EXPLICIT freed 88 objects / 3824 bytes in 146ms
09-11 16:29:42.536: D/SntpClient(58): request time failed: java.net.SocketException: Address family not supported by protocol
09-11 16:34:42.583: D/SntpClient(58): request time failed: java.net.SocketException: Address family not supported by protocol
09-11 16:39:42.626: D/SntpClient(58): request time failed: java.net.SocketException: Address family not supported by protocol 
```

所以在这里我无法在模拟器上找到我启动的 android 应用程序。

任何人都可以让我知道这个问题吗？

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:49:38.250

看来您没有启动器活动。将以下意图添加到您希望作为默认活动启动的活动中：

```
<intent-filter> 
    <action android:name="android.intent.action.MAIN" /> 
    <category android:name="android.intent.category.LAUNCHER" /> 
</intent-filter> 
```

# c++ - 在 Visual C++ 中测量操作速度的最佳方法

> ID：12368866
> 
> 赞同：1
> 
> 时间：2012-09-11T11:38:39.363
> 
> 标签：c++, windows, winapi

我在 Visual Studios 中使用 MFC。我想知道在这个特定的 IDE 中测量操作（例如函数 A 与函数 B）的速度/效率的最佳方法是什么。这可以用断点来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:40:27.143

不，使用`QueryPerformanceCounter`( [docs](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx) ) 来准确测量速度。从@MadKeithV 的评论来看，这似乎不是一个好的解决方案，因为 CPU 速度缩放（根据当前负载降低 CPU 速度）可能会改变 CPU 滴答长度。

使用一个好的分析器是一个更好的主意，或者只是`clock_t`用来测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:46:16.503

衡量操作效率的一种好方法是通过分析（参见例如[分析与日志记录有何不同？](https://stackoverflow.com/questions/242160/how-is-profiling-different-from-logging/242166#242166)） - 分析旨在向您展示在您的程序、特定函数、行甚至语句中花费的时间。

如果您的操作花费的时间足够长，您还可以使用简单的“挂钟时间”（例如您平台的 GetTime 等效项）来计算调用的持续时间 - 例如，如果单个操作需要数毫秒。请注意，在存在多线程的情况下，将其分解为实际性能可能非常棘手——您应该确切地知道您正在测量什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:35:50.647

如果你有终极版，它有相当不错的内置性能分析器。否则，请使用外部分析器。

# c# - ASP 菜单宽度未设置为 100%

> ID：12368872
> 
> 赞同：0
> 
> 时间：2012-09-11T11:39:11.903
> 
> 标签：c#, asp.net, css, menu, aspmenu

我正在使用 Asp Menu 制作垂直导航栏。我正在尝试将宽度设置为 100%，但它保持原样。

这是我正在使用的代码。

```
<div id="leftcolumn" >
<asp:Menu ID="Menu1" runat="server" CssClass="Menu" RenderingMode="List">
<Items>
<asp:MenuItem Text="Inbox" Value="inbox"></asp:MenuItem>
<asp:MenuItem Text="Processing"></asp:MenuItem>
<asp:MenuItem Text="aslkdjf"></asp:MenuItem>
<asp:MenuItem Text="aslkdjf"></asp:MenuItem>
<asp:MenuItem Text="aslkdjf"></asp:MenuItem>
</Items>
</asp:Menu>
</div> 
```

这是 Div 的 CssClass（左列）！

```
#leftcolumn{
float: left;
width: 200px; /*Width of left column*/
margin-left: -100%;
background: #C8FC98;} 
```

这是菜单的 Css 类

```
.Menu
{  
 font-family: 'Open Sans', sans-serif;
 font-size: 13px;
 width:auto;
}

.Menu ul
{  
list-style-type: none;
margin: 0;
padding: 0;
margin-bottom: 0; /*bottom spacing between each UL and rest of content*/
}

.Menu ul li
{
padding-bottom: 2px; /*bottom spacing between menu items*/

}

.Menu ul li a
{
color: black;
background: #E9E9E9;
display: block;
padding: 5px 0;
line-height: 17px;
padding-left: 8px; /*link text is indented 8px*/
text-decoration: none;
}

.Menu ul li a:hover
{
    background-image: none;
    color: white;
    background: black;
} 
```

这是菜单。

![垂直菜单](../Images/a6e5e145b6f2bb9e90f989bc90cce16b.png)

我需要使用 Asp:menu 控件，因为我必须访问服务器端的控件并动态更改它。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:02:10.400

```
Menu ul li
{
    width:150px !important;
    padding-bottom: 2px; /*bottom spacing between menu items*/
} 
```

我添加了 Width 属性并为其定义了固定长度。然后我的问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:48:20.350

以下代码可能会对您有所帮助。我已经在 Firefox 中使用 Firebug 检查了输出

```
 #leftcolumn
    {
        float: left;
        width: 600px; /*Width of left column*/            
        background: #C8FC98;
    }

    .Menu
    {
        font-family: 'Open Sans' , sans-serif;
        font-size: 13px;
        width: 100%;
        float:left;
    }

    .Menu ul
    {
        list-style-type: none;
        margin: 0;
        padding: 0;
        margin-bottom: 0; /*bottom spacing between each UL and rest of content*/
        width:100% !important;
    }

    .Menu ul li
    {
        padding-bottom: 2px; /*bottom spacing between menu items*/
        float:left;
        line-height:40px;
    } 
```

# javascript - 带有不规则边框的Textarea，onfocus边框颜色变化？

> ID：12368878
> 
> 赞同：1
> 
> 时间：2012-09-11T11:39:35.123
> 
> 标签：javascript, jquery, html, css, frontend

所以我有一个带有边框的文本区域，看起来像这样：

![在此处输入图像描述](../Images/3c768acb0fa641cc7d245bf2722c598a.png)

知道我应该如何改变焦点的边框颜色吗？

显然，如果它有常规的 css 边框而不是图像会很容易，但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:41:25.013

您可以使用与非图像实现相同的方法来执行此操作：

```
.chatBox {
    background-image: url('border.png');
}

.chatBox:hover, .chatBox:focus {
    background-image: url('border-highlight.png');
} 
```

显然你的边界比这更复杂，但你可以看到概念是一样的。如果您使用嵌套元素，它应该仍然有效。如果您遇到困难，请显示一些代码，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:55:06.747

[纯 CSS](http://jsbin.com/ewahuv/2/edit)处理事件的另一种解决方法`focus`（不幸的是：focus 伪类不适用于 IE<=8）

刚试过火狐。在 webkit 上需要一些调整/额外的样式，但这只是为了给你一个工作的想法，但是对于 css 的数量和棘手的元素定位，我更喜欢背景解决方案

相关的 CSS 和 HTML

```
<fieldset>
    <textarea></textarea>
    <label>insert text here</label>
</fieldset>

fieldset { 
   position: relative; 
   padding : 0 0 3em 0; 
   border  : 0;
}
label {
   position : absolute;
   top  : 0;
   left : 0;
}

textarea {
   position : relative;
   z-index  : 5;
   top      : 3em;
   width    : 300px;
   height   : 120px;
   border   : 1px #ccc solid;
}

label:before {
  content   : "";
  display   : block;
  width     : 15px;
  height    : 15px;
  border    : 1px #ccc solid;
  position  : absolute;
  top       : 31px;
  left      : 20px;
  background: #fff;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  transform: rotate(45deg);
}

label:after {
  content   : "";
  display   : block;
  position  : absolute;
  z-index   : 10;
  left      : 17px;
  top       : 40px;
  width     : 23px;
  height    : 1px;
  background : #fff; 
}

textarea:focus, 
textarea:focus + label:before {
   border-color : red; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:49:55.763

一个纯 CSS 解决方案：将 a 放入`textarea`a并在 the 之后`div`使用另一个来获得边框形状。`div``textarea`

## [*演示*](http://dabblet.com/gist/3697832)

HTML：

```
<div class='container'><textarea></textarea><div class='c'></div></div> 
```

CSS：

```
.container { display: inline-block; position: relative; }
textarea {
    width: 20em;
    border: solid 2px;
}
.c {
    position: absolute;
    top: -.4em; left: 2em;
    width: 1em;
    height: 1em;
    border-top: solid 2px;
    border-left: solid 2px;
    transform: rotate(45deg);
    background: white;
}
textarea:focus, textarea:hover, textarea:focus + .c, textarea:hover + .c {
    border-color: red;
    outline: none;
} 
```

# javascript - 在 jquery 文档准备好之前加载 Modernizr

> ID：12368882
> 
> 赞同：1
> 
> 时间：2012-09-11T11:39:57.260
> 
> 标签：javascript, jquery, html, modernizr

我第一次使用modernizr 并面临一些问题。

以下是我已完成的步骤：

在 html 页眉加载 Modernizr 在 html 页脚加载 JQuery

在准备好的 Jquery 文档中，我使用 Modernizr 检查了几个浏览器功能。如果该检查失败，它将重定向到另一个页面。

大多数情况下，使用 Modernizr 内部文档就绪检查工作正常，但有时它会失败并重定向到另一个页面，即使是从同一个浏览器。

我猜这是因为在 Modernizr 之前准备好加载文档，因此 Modernizr 无法工作。你有什么可以帮助我的吗？

```
$(function() { 
    //if browser can't provide certain features, it will redirect the browser to dumb phone page

    if(satisfiedWithBrowser()){
        // do other stuff
    }else
        window.location = 'redirect/';
});

function satisfiedWithBrowser(){    
    //console.log(Modernizr);

    if(!Modernizr.csstransforms || !Modernizr.backgroundsize || !Modernizr.cssanimations || !Modernizr.hashchange) // || !Modernizr.touch)
        return false;
    else
        return true;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:57:51.180

是的，听起来你有竞争条件，我想说有两种选择：

*   将现代化器移动到页脚中的 jQuery 旁边，以便在之前请求它。
*   而不是等待`$(document).ready()`使用`$(window).load()`。

第一个选项应该对您的问题进行排序。原因 - 至少就我一直理解的脚本标签的放置而言 - 是当脚本标签位于正文中时，它会在找到/解析时被请求，而头部中的脚本标签将在不同时间触发取决于浏览器*（和缓存状态）*。您基本上需要使用相同的方法加载两个脚本标签*（要么都在页脚，要么都在头部）*。

第二个选项应该作为后备选项，因为不是等待 DOM 准备就绪，而是等待 window.load ，这应该包括等待所有资源。

# c++ - 如何在 ubuntu 中为 c++ 安装 mongodb 驱动程序？

> ID：12368884
> 
> 赞同：2
> 
> 时间：2012-09-11T11:40:18.633
> 
> 标签：c++, mongodb

我想使用 c++ 为 mongoDB 开发一个相当简单的应用程序，我按照他们的教程进行操作： [http ://www.mongodb.org/pages/viewpage.action?pageId=133415](http://www.mongodb.org/pages/viewpage.action?pageId=133415)

为了安装驱动程序，我遵循了这个： [https](https://groups.google.com/forum/?fromgroups=#!msg/mongodb-user/-mPG7MDJgm8/nZSiN42DJWIJ) ://groups.google.com/forum/?fromgroups=#! msg/mongodb-user/-mPG7MDJgm8/nZSiN42DJWIJ（Waitman Gobble/5 jun 回答）

但是当我尝试编译一个简单的应用程序时，我会收到以下错误：

> 致命错误：client/dbclient.h：没有这样的文件或目录

我很确定问题是尚未安装 MongoDB c++ 驱动程序。

我怎样才能正确安装它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:43:10.640

在 Ubuntu 中，用于开发的包与用于一般用途的包是分开的。

为了使用 mongodb 头文件和客户端库，您需要`sudo apt-get install mongodb-dev libmongo-client-dev`- 这将允许您添加到`#include`相关头文件的头文件。

这假定您已经安装了包含客户端库的`libmongo-client`和`mongodb`包，尽管在安装包时应该安装它们`-dev`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T11:27:35.053

如果您从[这里](http://dl.mongodb.org/dl/cxx-driver)下载驱动程序源代码，

解压并解压

```
tar xzf mongodb-linux-x86_64-v2.0-latest.tgz 
```

然后 cd 进入目录。

```
cd mongo-cxx-driver-v2.0/ 
```

然后使用scons构建

```
scons 
```

并安装

```
sudo scons install 
```

然后要编译[教程](http://www.mongodb.org/pages/viewpage.action?pageId=133415#C%2B%2BTutorial-Connecting)中显示的代码，您还需要指定 /usr/local/include/mongo 目录作为包含文件搜索路径。

```
sudo  g++ tutorial.cpp -I/usr/local/include/mongo -lmongoclient 
-lboost_thread -lboost_filesystem -lboost_program_options -o tutorial 
```

然后要运行它，您需要编辑 /etc/ld.so.conf 文件

```
sudo vi /etc/ld.so.conf 
```

并添加

```
/usr/local/lib 
```

然后运行

```
sudo ldconfig 
```

并运行教程

```
$ ./tutorial 
connected ok 
```

作为编辑 ld.so.config 文件的替代方法，您可以使用 LD_LIBRARY_PATH 环境变量。所以你会做

```
export LD_LIBRARY_PATH=/usr/local/lib
$ ./tutorial 
connected ok 
```

# java - @Injection 不适用于 CDI bean

> ID：12368888
> 
> 赞同：3
> 
> 时间：2012-09-11T11:40:29.907
> 
> 标签：java, jsf, cdi

我有一个使用@ConversationScoped 的CDI bean。当我尝试为 Conversation 对象执行 @Inject 时，我得到了 NPE。

```
 @ConversationScoped
@Named("customerbean")
public class CustomerBean implements Serializable {

    @Inject
    private Conversation conversation;    

    private static final EntityManagerFactory emf = Persistence.createEntityManagerFactory("ba");
    private EntityManager em;
    private Customer customer;
    boolean disabled;    

    public CustomerBean() {
        beginConversation();
        customer = new Customer();
        em = emf.createEntityManager();
        disabled = false;
    }

    private void beginConversation() {
        if (this.conversation.isTransient()) {
            this.conversation.begin();
            return;
        }
        throw new IllegalStateException();
    } 
```

我在 WEB-INF 目录中有 beans.xml 文件（虽然是空的）。异常如下所示：

```
INFO: Exception when handling error trying to reset the response.
com.google.common.collect.ComputationException: java.lang.RuntimeException: java
.lang.NullPointerException
        at com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdap
ter.get(ComputingConcurrentHashMap.java:397)
        at org.jboss.weld.bean.proxy.ClientProxyProvider.getClientProxy(ClientPr
oxyProvider.java:102)
        at org.jboss.weld.el.AbstractWeldELResolver.lookup(AbstractWeldELResolve
r.java:115)
        at org.jboss.weld.el.AbstractWeldELResolver.getValue(AbstractWeldELResol
ver.java:96)
        at org.jboss.weld.environment.servlet.util.ForwardingELResolver.getValue
(ForwardingELResolver.java:49)
        at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
        at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELR
esolver.java:176) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T11:57:56.120

您不得使用 来创建 CDI bean `new`，也不得将构造函数用于任何类型的初始化逻辑。

这背后的原因是 CDI bean（如 EJB、Spring bean、JSF bean）具有独立的生命周期并由相关容器管理。您不能依赖于何时（以及多久）`new`将被调用的“传统”理解。使用生产者创建新的 bean，并`@PostConstruct`用于创建后要执行的任何逻辑。

[这](http://docs.jboss.org/weld/reference/latest/en-US/html/)应该为您提供 CDI 的良好开端。随时发布更多问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:08:22.167

正如 Jan 所说，您正在将逻辑添加到构造函数中。直到调用构造函数之后才会发生注入。

# ios - 拒绝 iOS 应用程序原因：数据存储指南

> ID：12368889
> 
> 赞同：0
> 
> 时间：2012-09-11T11:40:29.957
> 
> 标签：ios, backup, appstore-approval

我下载了一些数据并将其保存到 Library/PrivateDocuments 目录。我在这个 Library/PrivateDocuments 目录中下载的每个文件我都设置了“不备份”属性。苹果仍然说：

> “特别是，我们发现在启动和/或内容下载时，您的应用程序在错误的位置存储了太多数据（应用程序启动后 10.3 MB）。要检查您的应用程序存储了多少数据：

* * *

> 您的应用程序使用的临时文件应仅存储在 /tmp 目录中；请记住在用户退出应用程序时删除存储在此位置的文件。”

ps 我需要这些文件留在那里.. 首先我检查文件，如果其中一些不存在，我下载它们。所以它们不是临时文件，我不想删除它们..我不知道该怎么做..如果您熟悉这个问题，请给我提示..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:46:49.583

我使用 NSCachesDirectory (Library/Caches) 并且从来没有遇到过苹果的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T07:34:20.867

将应用程序更改为在 5 分钟内不创建临时数据内容。Apple 测试人员不会在应用程序上花费太多时间，因此他们会错过这一点。

# python - 如果使用 update_idletasks 而不是 update，Tkinter 窗口会挂起

> ID：12368892
> 
> 赞同：1
> 
> 时间：2012-09-11T11:40:41.783
> 
> 标签：python, tkinter

我开发了一个应用程序来复制磁盘上的文件并在 Tkinter GUI 中显示其进度。它使用定制的shutil模块来复制文件。如果我直接使用我的自定义复制功能（没有 GUI）复制文件，那么它会正确复制所有文件并显示正在复制的文件的消息（已使用打印语句进行复制）。现在的问题是当我使用 GUI 执行相同的操作时，它会在一段时间后挂起。

我正在使用 Text Widget 来显示正在复制的文件的运行日志。基本上我在调用我的复制函数之前重新定向了标准输出，并且我正在使用“update_idletasks”来更新 GUI。

```
class TextRedirector(object):
    def __init__(self, widget, tag="stdout"):
        self.widget = widget
        self.tag = tag

    def write(self, str):
         self.widget.configure(state="normal")
         self.widget.insert("end", str, (self.tag,))
         self.widget.update_idletasks()
         self.widget.see('end')
         self.widget.configure(state="disabled") 
```

问题 1：Text 小部件中的文本大小是否有限制？我应该在我的代码中查看什么来解决这个挂起问题。

Query2：我注意到一旦调用了复制功能，我就无法使用“最小化”按钮，只能在操作结束后使用它。就我而言，我需要复制大量数据，所以我想最小化应用程序并继续我的其他工作。

**更新：（工作解决方案）**

如果我使用`update`方法而不是`update_idletasks`. 现在我的问题是为什么它不能与`update_idletasks`. 据我所知，它还用于刷新 GUI 事件。

```
class TextRedirector(object):
    def __init__(self, widget, tag="stdout"):
        self.widget = widget
        self.tag = tag

def write(self, str):
     self.widget.configure(state="normal")
     self.widget.insert("end", str, (self.tag,))
     self.widget.update()
     self.widget.see('end')
     self.widget.configure(state="disabled") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:56:27.613

文本小部件没有实际的大小限制。

如果没有看到你实际上是如何复制数据的，就不可能确定，但​​是你知道 Tkinter 是单线程的吗？如果您有一个需要很长时间的命令，则 GUI 将挂起，直到该操作完成。这是因为所有 GUI 操作都是通过响应事件来发生的，而当任何单个命令运行时，事件循环都无法响应事件。

解决方法是让长时间运行的操作在线程或单独的进程中运行。或者，您可以重构该函数，以便可以在事件循环的每次迭代中完成小块工作。请注意，如果您使用线程，则不能从其他线程直接写入 GUI 小部件。您必须使用线程安全队列在线程之间发送数据。

# sql - 我写的 SQL 匹配函数太费时间了。需要优化

> ID：12368893
> 
> 赞同：1
> 
> 时间：2012-09-11T11:40:42.503
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是该函数应返回 1 的示例测试数据，其他任何应返回 0 的数据：

```
Inventor: Raj Patel
Attorney: Raj Patel

Inventor: Patel; Raj
Attorney: Patel

Inventor: Patel; R
Attorney: Patel; Raj

Inventor: Patel; Raj, Madnani; Raj
Attorney: Patel; Raj

Inventor: Patel; Raj
Attorney: Patel; R

**Eg.** Select dbo.Match('Patel; R','Patel; Raj') 
```

**所有这些执行都应该返回 1：**

```
Select dbo.Match('Raj Patel','Raj Patel')
Select dbo.Match('Patel; Raj','Patel')
Select dbo.Match('Patel; R',' Patel; Raj')
Select dbo.Match('Patel; Raj, Madnani; Raj','Patel; Raj')
Select dbo.Match('Patel; Raj','Patel; R') 
```

应该返回 1

这是我使用太多游标的匹配功能：

```
ALTER FUNCTION [dbo].[Match]
(
    @Subj1      varchar(8000),
    @Subj2      varchar(8000)
)
RETURNS bit
AS
BEGIN
    Set @Subj1 = IsNull(@Subj1,'')
    Set @Subj2 = IsNull(@Subj2,'')

    If @Subj1 = '' Or @Subj2 = ''
    Begin
        Return 0
    End

    If Lower(@Subj1) = Lower(@Subj2)
    Begin
        Return 1
    End

    Declare Subj1NamesCurr Cursor For --all separate names
        Select * From dbo.Split(@Subj1,',')

    Declare Subj2NamesCurr Cursor SCROLL For --all separate names
        Select * From dbo.Split(@Subj2,',')

    Open Subj1NamesCurr
    Open Subj2NamesCurr

    Declare @Sub1Names  varchar(8000)
    Declare @Sub2Names  varchar(8000)
    Declare @Sub1NamePart   varchar(8000)
    Declare @Sub2NamePart   varchar(8000)
    Declare @Sub1PartCount  tinyint = 0
    Declare @Sub2PartCount  tinyint = 0
    Declare @Sub1NamesPart  TABLE(Data varchar(8000))
    Declare @Sub2NamesPart  TABLE(Data varchar(8000))
    Declare @MatchCount int = 0
    Declare @TempCount int = 0

    Fetch From Subj1NamesCurr INTO @Sub1Names --fetch 1st name from 1st subject

    Insert into @Sub1NamesPart
            Select * From dbo.Split(@Sub1Names,';') --get names part from 1st subject's row

    Select @Sub1PartCount = Count(*) From @Sub1NamesPart

    While @@Fetch_Status = 0 --each names of 1st subject
    Begin

        Fetch First From Subj2NamesCurr into @Sub2Names

        While @@Fetch_Status = 0 --each names of 1st subject
        Begin
            Declare Sub1NameCurr Cursor For
                Select * From @Sub1NamesPart --name parts of 1st subject

            OPEN Sub1NameCurr

            Fetch From Sub1NameCurr into @Sub1NamePart

            Insert into @Sub2NamesPart
                Select * From dbo.Split(@Sub2Names,';') 

            Select @Sub2PartCount = Count(*) From @Sub2NamesPart
            Set @MatchCount = 0

            While @@Fetch_Status = 0 --splitted name of 1st subject
            Begin

                Declare Sub2NameCurr Cursor For
                    Select * From @Sub2NamesPart  --name parts of 2nd subject

                OPEN Sub2NameCurr

                Fetch From Sub2NameCurr into @Sub2NamePart

                Set @TempCount = 0

                While @@Fetch_Status = 0 --splitted name of 2nd subject
                Begin
                    Set @TempCount = @TempCount + 1
                    If dbo.Trim(Lower(@Sub1NamePart)) = dbo.Trim(Lower(@Sub2NamePart))
                    Begin

                        Set @MatchCount = @MatchCount + 1

                        If @Sub2PartCount = 1
                        Begin
                            Return 1
                        End
                    End
                    Else If Lower(Left(dbo.Trim(@Sub1NamePart),1)) = Lower(dbo.Trim(@Sub2NamePart)) Or 
                        Lower(Left(dbo.Trim(@Sub2NamePart),1)) = Lower(dbo.Trim(@Sub1NamePart))
                    Begin

                        Set @MatchCount = @MatchCount + 1
                    End

                    Fetch Next From Sub2NameCurr into @Sub2NamePart

                    Delete from @Sub2NamesPart
                    Insert into @Sub2NamesPart
                        Select * From dbo.Split(@Sub2Names,';') 
                End

                If @MatchCount = @Sub2PartCount
                Begin
                    Return 1
                End

                CLOSE Sub2NameCurr
                DEALLOCATE Sub2NameCurr

                Fetch Next From Sub1NameCurr into @Sub1NamePart

                Delete from @Sub1NamesPart
                Insert into @Sub1NamesPart
                    Select * From dbo.Split(@Sub1Names,';') --get names part from 1st subject's row

                Select @Sub1PartCount = Count(*) From @Sub1NamesPart                
            End

            CLOSE Sub1NameCurr
            DEALLOCATE Sub1NameCurr

        End
    End

    Close Subj1NamesCurr
    Deallocate Subj1NamesCurr

    Close Subj2NamesCurr
    Deallocate Subj2NamesCurr   
    Return 0

END 
```

**编辑：**为了避免混淆，Trim 只是一个对字符串执行 LTrim 和 RTrim 的函数。就是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:46:10.360

这适用于您的示例，只是不知道它是否比您的解决方案更快。

代码应该很容易解释并且易于更改

```
DECLARE @str1 VARCHAR(max)
DECLARE @str2 VARCHAR(max)
SELECT @str1 = 'Patel; Raj'
SELECT @str2 = 'Patel'

DECLARE @x1 XML
DECLARE @x2 XML
SELECT @x1 = CAST('<i>' + REPLACE(@str1, ',', '</i><i>') + '</i>' AS XML)
SELECT @x2 = CAST('<i>' + REPLACE(@str2, ',', '</i><i>') + '</i>' AS XML)

SELECT 
COUNT(*)
FROM
(
SELECT
p.number as Position,
LTRIM(RTRIM(x.value('.','VARCHAR(50)'))) AS Name
FROM
master..spt_values p
cross APPLY @x1.nodes('/i[position()=sql:column("number")]') n(x) 
where p.type = 'p'
) Names1
INNER JOIN
(
SELECT
p.number as Position,
LTRIM(RTRIM(x.value('.','VARCHAR(50)'))) AS Name
FROM
master..spt_values p
cross APPLY @x2.nodes('/i[position()=sql:column("number")]') n(x) 
where p.type = 'p'
) Names2
ON
Names1.Name = Names2.Name OR
(LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),1))) = LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),1))) 
AND
  LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),2))) = LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),2))) 
) OR
(LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),2))) = LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),2))) 
AND
  LEFT(LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),1))),1) = LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),1))) 
) OR
(LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),2))) = LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),2))) 
AND
  LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),1))) = LEFT(LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),1))),1) 
) OR
Names1.Name = LTRIM(RTRIM(PARSENAME(Replace(Names2.Name,';','.'),2)))
OR
Names2.Name = LTRIM(RTRIM(PARSENAME(Replace(Names1.Name,';','.'),2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:02:37.637

这是一个避免游标的答案。我认为这可能最好分解为几个功能，但请告诉我您的想法以及它是否对您来说更快。

对我来说，以下是性能比较占原始 (FWIW) 的百分比：
CPU：47% 读取：28%

所以它看起来确实更快，读取次数更少，而且它适用于您提供的所有测试用例。

```
ALTER FUNCTION [dbo].[Match] 
(
@Subj1      varchar(8000), 
@Subj2      varchar(8000) 
) 
RETURNS bit AS 
BEGIN    

Set @Subj1 = IsNull(@Subj1,'')  
Set @Subj2 = IsNull(@Subj2,'')    

If @Subj1 = '' Or @Subj2 = ''    
Begin       
    Return 0  
End     

If Lower(@Subj1) = Lower(@Subj2) 
Begin    
    Return 1  
End   

 DECLARE @FullNames1 TABLE(Name varchar(200), SemiColon int, [Space] int)     
 DECLARE @FullNames2 TABLE(Name varchar(200), SemiColon int, [Space] int) 

 INSERT INTO @FullNames1
 SELECT 
    item, 
    CHARINDEX(';', item,0) as SemiColon,
    CHARINDEX(' ', item,0) as [Space]
 FROM
    dbo.Split(@Subj1, ',')

 INSERT INTO @FullNames2
 SELECT 
    item, 
    CHARINDEX(';', item,0) as SemiColon,
    CHARINDEX(' ', item,0) as [Space]
 FROM
    dbo.Split(@Subj2, ',')

 DECLARE @Names1 TABLE(FirstName varchar(100), LastName varchar(100))
 DECLARE @Names2 TABLE(FirstName varchar(100), LastName varchar(100))

 INSERT INTO @Names1
 SELECT 
    CASE WHEN SemiColon <> 0 THEN
        SUBSTRING(FullNames.Name,SemiColon+1, LEN(FullNames.Name))
    ELSE
        CASE WHEN FullNames.Space <> 0 THEN
            SUBSTRING(FullNames.Name, 1, FullNames.Space-1)     
        ELSE
            ''      
        END
    END AS FirstName,
    CASE WHEN SemiColon <> 0 THEN
        SUBSTRING(FullNames.Name, 1, SemiColon-1)       
    ELSE
        CASE WHEN FullNames.Space <> 0 THEN
            SUBSTRING(FullNames.Name,FullNames.Space+1, LEN(FullNames.Name))
        ELSE
            FullNames.Name  
        END
    END AS LastName
 FROM @FullNames1 FullNames

 INSERT INTO @Names2
 SELECT 
    CASE WHEN SemiColon <> 0 THEN
        SUBSTRING(FullNames.Name, SemiColon+1, LEN(FullNames.Name))
    ELSE
        CASE WHEN FullNames.Space <> 0 THEN
            SUBSTRING(FullNames.Name, 1, FullNames.Space-1)     
        ELSE
            ''      
        END
    END AS FirstName,
    CASE WHEN SemiColon <> 0 THEN
        SUBSTRING(FullNames.Name, 1, SemiColon-1)       
    ELSE
        CASE WHEN FullNames.Space <> 0 THEN
            SUBSTRING(FullNames.Name,FullNames.Space + 1, LEN(FullNames.Name))
        ELSE
            FullNames.Name  
        END
    END AS LastName
 FROM @FullNames2 FullNames

 UPDATE @Names1
 SET FirstName = Lower(LTrim(RTrim(FirstName))),
     LastName = Lower(LTrim(RTrim(LastName)))

 UPDATE @Names2
 SET FirstName = Lower(LTrim(RTrim(FirstName))),
     LastName = Lower(LTrim(RTrim(LastName)))

 IF EXISTS(
     SELECT *
     FROM @Names1 A
     INNER JOIN @Names2 B ON
     A.LastName = B.LastName AND
     (
        (A.FirstName = B.FirstName) OR
        (LEN(A.FirstName) = 1 AND A.FirstName = LEFT(B.FirstName, 1)) OR
        (LEN(B.FirstName) = 1 AND B.FirstName = LEFT(A.FirstName, 1)) OR
        (LEN(A.FirstName) = 0) OR
        (LEN(B.FirstName) = 0)
     ))
BEGIN
    RETURN 1
END

RETURN 0   
END 
```

# objective-c - Xcode 代码片段未在自动完成中显示

> ID：12368894
> 
> 赞同：10
> 
> 时间：2012-09-11T11:40:51.207
> 
> 标签：objective-c, xcode

我刚刚开始第一次使用代码片段，我添加了一个片段，设置了快捷方式，但是当我输入快捷方式并点击时`Esc`- 它没有显示出来。我究竟做错了什么？我也尝试过重新启动 Xcode，但它仍然无法正常工作。其他代码剪辑器的快捷方式工作正常。

![](../Images/9b274927a69d1c3ed2c6edab62df035c.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2020-09-03T12:43:44.307

我有同样的问题，开始输入时我无法获得代码片段。我在编辑代码片段时发现我没有提到完成提交，这就是问题所在。

[![在此处输入图像描述](../Images/83ec27ca87a3f36de8a99fc47af0729e.png)](https://i.stack.imgur.com/D2B9m.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:10:38.537

当我第一次使用 Xcode 中内置的代码片段功能时，我很难找到正确的“完成范围”。您可以将其更改为“全部”以找出其中是否有错误。但在你的情况下，我可以看到你想发布方法，所以“顶级”应该没问题。只是为了将来记住它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-29T17:12:02.837

是的。这似乎是一个 Xcode 错误。实际上，当我更改范围时，我的 Xcode 崩溃了。

所以解决方法：

1.  创建新的片段。

2.  在单击“完成”之前将范围更改为“全部”

3.  瞧，它现在可以工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-08T19:23:07.243

在 Xcode 6.1 上似乎对我不起作用。我很确定范围，但它也不适用于所有范围选项集。不过，我一直在使用早期版本的 Xcode 的片段，没有任何问题。

# drupal - 从用户位置继承节点位置

> ID：12368898
> 
> 赞同：0
> 
> 时间：2012-09-11T11:40:56.667
> 
> 标签：drupal, location

我想要做的是使用 Drupal 7 和 Location 模块是将节点位置继承或默认为用户位置。原因是我只想让用户编辑一个位置（在他们的个人资料上），并将其显示在该用户创建的所有节点上。任何人都可以帮忙吗？

[http://drupal.org/node/1357614](http://drupal.org/node/1357614)

[http://drupal.org/node/377600](http://drupal.org/node/377600)

编辑：

我找到了这个模块，我正试图让纬度和经度工作（就像其他模块一样），但是父案例 'locpick' 让我很困惑，我就是无法做到这一点。

```
<?php

function location_alter($argument){
$location_alter = array();
global $user;
$uid = $user->uid;
$location_alter = user_load($uid);
$location_alter = $location_alter->location;
return $location_alter[$argument];
}

/**
* Implementation of hook_locationapi().
*/
function locnodeauthor_locationapi(&$obj, $op, $a3 = NULL, $a4 = NULL, $a5 = NULL) {
switch ($op) {
 case 'field_expand':
  switch ($a3) {
    case 'name':
      return array(
        '#type'           => 'textfield',
        '#title'          => t('Location name'),
        '#default_value'  => $obj != '' ? $obj : location_alter('name'),
        '#size'           => 64,
        '#maxlength'      => 64,
        '#description'    => t('e.g. a place of business, venue, meeting point'),
        '#attributes'     => NULL,
        '#required'       => ($a4 == 2),
      );

    case 'street':
      return array(
        '#type'           => 'textfield',
        '#title'          => t('Street'),
        '#default_value'  => $obj != '' ? $obj : location_alter('street'),
        '#size'           => 64,
        '#maxlength'      => 64,
        '#required'       => ($a4 == 2),
      );

    // Additional is linked to street.
    case 'additional':
      return array(
        '#type'           => 'textfield',
        '#title'          => t('Additional'),
        '#default_value'  => $obj != '' ? $obj : location_alter('additional'),
        '#size'           => 64,
        '#maxlength'      => 64,
        // Required is forced OFF because this is technically part of street.
      );

    case 'city':
      return array(
        '#type'           => 'textfield',
        '#title'          => t('City'),
        '#default_value'  => $obj != '' ? $obj : location_alter('city'),
        '#size'           => 64,
        '#maxlength'      => 64,
        '#description'    => NULL,
        '#attributes'     => NULL,
        '#required'       => ($a4 == 2),
      );

    case 'province':
      drupal_add_js(drupal_get_path('module', 'location') .'/location_autocomplete.js');
      $country = $a5['country'] ? $a5['country'] : variable_get('location_default_country', 'us');
      return array(
        '#type' => 'textfield',
        '#title' => t('State/Province'),
        '#autocomplete_path' => 'location/autocomplete/'. $country,
        '#default_value'  => $obj != '' ? $obj : location_alter('province'),
        '#size' => 64,
        '#maxlength' => 64,
        '#description' => NULL,
        // Used by province autocompletion js.
        '#attributes' => array('class' => array('location_auto_province')),
        '#required' => ($a4 == 2),
      );

    case 'country':
      // Force default.
      if ($a4 == 4) {
        return array(
          '#type' => 'value',
          '#value' => variable_get('location_default_country', 'us'),
        );
      }
      else {
        $options = array_merge(array('' => t('Please select'), 'xx' => 'NOT LISTED'), location_get_iso3166_list());
        return array(
          '#type'           => 'select',
          '#title'          => t('Country'),
          '#default_value'  => $obj,
          '#options'        => $options,
          '#description'    => NULL,
          '#required'       => ($a4 == 2),
          // Used by province autocompletion js.
          '#attributes'     => array('class' => array('location_auto_country')),
        );
      }
      break;

    case 'postal_code':
      return array(
        '#type'           => 'textfield',
        '#title'          => t('Postal code'),
        '#default_value'  => $obj != '' ? $obj : location_alter('postal_code'),//$location_alter['postal_code'],//location_alter('postal_code'),
        '#size'           => 16,
        '#maxlength'      => 16,
        '#required'       => ($a4 == 2),
      );
  }
  break;

case 'isunchanged':
  switch ($a3) {
    case 'lid':
      // Consider 0, NULL, and FALSE to be equivilent.
      if (empty($obj[$a3]) && empty($a4)) {
        return TRUE;
      }
      break;

    case 'country':
      // Consider '  ' and '' to be equivilent, due to us storing country
      // as char(2) in the database.
      if (trim($obj[$a3]) == trim($a4)) {
        return TRUE;
      }
      break;

    case 'province_name':
    case 'country_name':
    case 'map_link':
    case 'coords':
      // Always considered unchanged.
      return TRUE;
  }
  break;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:13:31.823

根据您打算如何使用此结果，您甚至可能不需要保存节点的位置。即，如果您想访问视图中的位置数据，您可以使用关系来访问节点作者的位置数据，即使位置数据可能根本没有保存在节点上。但是，这样做意味着视图中的节点将始终与其作者的当前位置相关联，而不是他们在创建节点时设置的位置。

如果您确实想将其保存在节点上，则需要创建一个自定义模块。您可能需要调用[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)来隐藏节点编辑表单上的 Location 字段，并调用[hook_node_presave](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_presave/7)将用户的 Location 值复制到节点的 Location 值。

# cakephp - CakePhp & PhpUnit 3.5.6 不显示调试输出

> ID：12368899
> 
> 赞同：1
> 
> 时间：2012-09-11T11:41:10.590
> 
> 标签：cakephp, phpunit

在我的 cakephp 2 项目中，我需要将我的 phpunit 框架升级到 3.6.12。进行此更改后，在运行单元测试时，调试输出不再显示在测试结果中。

在网上搜索表明，从 phpunit 3.6 开始，需要一个参数 --debug 来捕获调试输出。

是否可以重新启用调试输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:43:44.940

此行为在[10 个月前已](https://github.com/sebastianbergmann/phpunit/issues/411#issuecomment-2773436)更改，因此默认情况下调试输出显示不带该`--debug`标志。这适用于 3.6.12。

**测试用例**

```
class OutputTest extends PHPUnit_Framework_TestCase {
    function testOutput() {
        echo 'foo';
    }
} 
```

**跑步**

```
phpunit OutputTest.php 
```

**输出**

```
PHPUnit 3.6.12 by Sebastian Bergmann.

.foo

Time: 1 second, Memory: 5.00Mb

OK (1 test, 0 assertions) 
```

# objective-c - 使用 Facebook Scrumptious 应用示例代码

> ID：12368901
> 
> 赞同：1
> 
> 时间：2012-09-11T11:41:17.640
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

我正在尝试使用 Facebook Scrumptious 应用示例代码中的此代码。我对“您的 OG 对象将拥有由您的服务器托管的 URL”感到困惑。评论。这是否意味着我必须在服务器上加载脚本？如果是这样，什么脚本？此外，“repeater.php”文件。这是什么？

有没有其他人必须配置这个并且能够指出我正确的方向？谢谢你的帮助。

```
 - (id<SCOGMeal>)mealObjectForMeal:(NSString*)meal 
{
    // This URL is specific to this sample, and can be used to
    // create arbitrary OG objects for this app; your OG objects
    // will have URLs hosted by your server.
    NSString *format =  
        @"https://<YOUR_BACK_END>/repeater.php?"
        @"fb:app_id=<YOUR_APP_ID>&og:type=%@&"
        @"og:title=%@&og:description=%%22%@%%22&"
        @"og:image=https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png&"
        @"body=%@";

    // We create an FBGraphObject object, but we can treat it as 
    // an SCOGMeal with typed properties, etc. See <FacebookSDK/FBGraphObject.h> 
    // for more details.
    id<SCOGMeal> result = (id<SCOGMeal>)[FBGraphObject graphObject];

    // Give it a URL that will echo back the name of the meal as its title, 
    // description, and body.
    result.url = [NSString stringWithFormat:format, 
                   @"<YOUR_APP_NAMESPACE>:meal", meal, meal, meal];

    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:01:29.587

请参阅教程中的[步骤 2 - 设置后端服务器](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/#step2)。它包括一个示例脚本和对`repeater.php`. 您问题的代码出现在第 7 步的页面下方。

# events - Google Maps API - InfoBubble 的事件侦听器不起作用

> ID：12368902
> 
> 赞同：3
> 
> 时间：2012-09-11T11:41:20.590
> 
> 标签：events, google-maps-api-3, infobubble

我需要一个等待点击的事件监听器。不幸的是，它的工作方式`InfoWindows`似乎在这里不起作用......

好吧，这是我的`InfoBubble`：

```
var infoBubble = new InfoBubble({
      map: map,
      content: $('#my-div').html(),
      position: new google.maps.LatLng(areas[area].lat, areas[area].lng),
      shadowStyle: 1,
      padding: 0,
      borderRadius: 0,
      arrowSize: 10,
      borderWidth: 1,
      borderColor: '#ccc',
      disableAutoPan: true,
      hideCloseButton: true,
      arrowPosition: 15,
      arrowStyle: 0
    }); 
```

这是我的听众：

```
google.maps.event.addListener(infoBubble, 'click', function(){

        console.log("noodle");  
    }); 
```

顺便说一句，Firebug 没有报告任何错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:45:59.330

试试这个：

```
$(infoBubble.bubble_).live("click", function() {
    console.log('clicked!');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T14:14:05.817

如果您使用的是 InfoBubble 的编译版本，则 .bubble_ 引用将丢失。您必须找到 .bubble_ 已更改为的内容。如果您还没有自己编译并且使用了提供的编译版本，那么 .bubble_ 引用是**.e**。例子：

```
$(infoBubble.e).find("#yourdiv").live("click",function(event) {
    console.log(event.target.id);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:21:02.413

```
google.maps.event.addDomListener(infoBubble.bubble_, 'click', function() {
    alert("Ooo..!");
}); 
```

有用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-19T23:14:36.147

要进一步改进@Marius 的答案，并针对当前版本的 jQuery 进行更新（鉴于我可以看到 OP 有可用的 jQuery），请尝试以下操作以针对 infoBubble 中特定元素的单击事件：

```
$(infoBubble.bubble_).on("click", "button.close", function() {
    console.log("Button with class .close clicked.");
}); 
```

如果您需要将数据传递给您的函数，一种选择是使用 data-* 属性并通过事件*target*获取它，如下所示：

InfoBubble 内容的示例 JS：

```
var myVariable = 10;
var infoBubbleContentString = '<span class="my-style" data-id="' + myVariable + '">Button text</span>'; 
```

事件处理程序：

```
$(infoBubble.bubble_).on("click", ".my-style", function (e) {
    if ($(e.target).data('id')) {
        var myVariableValue = $(e.target).data('id'); // myVariableValue will equal 10
    }
}); 
```

# c# - 如何使用 MVC 为引荐网站创建超链接？

> ID：12368905
> 
> 赞同：0
> 
> 时间：2012-09-11T11:41:31.050
> 
> 标签：c#, asp.net-mvc

我的网站上有一行 (MVC)

```
<td width="80%" align="left"><%: Html.DisplayFor(model => model.Website)%></td> 
```

我想在该行上加上一个超链接。如何为引荐网站创建超链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:43:06.057

只需使用普通的锚`<a>`标签

```
<td width="80%" align="left">
   <a href="<%: model.Website %>" target="_blank"><%: model.Website %></a>
</td> 
```

如果您一开始`value`没有`http`，只需手动添加它，例如：

```
<a href="http://<%: model.Website %>" ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:47:04.693

如果您想要花哨或者您的网站上有很多链接，您可以为此创建显示模板。请参阅示例：http: [//bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

# plot - gnuplot 没有正确显示 rowstacked 直方图

> ID：12368906
> 
> 赞同：3
> 
> 时间：2012-09-11T11:41:33.517
> 
> 标签：plot, gnuplot

以下是我的脚本。

```
set style data histogram
set style histogram rowstack gap 1
set style fill solid border -1
set boxwidth 0.8
set grid ytics linestyle 1
set key autotitle columnheader
set key below horizontal right
set ylabel "Overhead (%)"
set xlabel "Benchmark"

plot newhistogram "bm1" lt 2, 'plot1.txt' u 2:xtic(1), '' u 3, '' u 4, \
newhistogram "bm2" lt 2, 'plot1.txt' u 5:xtic(1) notitle, '' u 6 notitle, '' u 7 notitle, \
newhistogram "bm3" lt 2, 'plot1.txt' u 8:xtic(1) notitle, '' u 9 notitle, '' u 10 notitle, \
newhistogram "bm4" lt 2, 'plot1.txt' u 11:xtic(1) notitle, '' u 12 notitle, '' u 13 notitle 
```

以下是我的数据。

```
Threads "Overhead 1" "Overhead 2" "Overhead 3"
w1   6  47 58    8 0 0   15 4 45    12   5  5           
w2   4  6  6     5 0 2   1 3 2      10  20  30 
```

我得到的图表如下所示。`bm4`请注意第 4 个基准 ( , )右侧栏的问题`w2`。为什么酒吧有一个偏移量？我不明白这一点。

![在此处输入图像描述](../Images/f29f3ab142ae7a930835c6c5821dd6e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:49:05.213

看起来像一个错误/回归。我对您的脚本进行了最小的更改，以使 gnuplot 停止抱怨标题：

```
set style data histogram
set style histogram rowstack gap 1
set style fill solid border -1
set boxwidth 0.8
set grid ytics linestyle 1
set key below horizontal right
set ylabel "Overhead (%)"
set xlabel "Benchmark"

plot newhistogram "bm1" lt 2, 'plot1.txt' u 2:xtic(1) title columnhead(2), '' u 3 title columnhead(3), '' u 4 title columnhead(4), \
     newhistogram "bm2" lt 2, 'plot1.txt' u 5:xtic(1) notitle, '' u 6 notitle, '' u 7 notitle, \
     newhistogram "bm3" lt 2, 'plot1.txt' u 8:xtic(1) notitle, '' u 9 notitle, '' u 10 notitle, \
     newhistogram "bm4" lt 2, 'plot1.txt' u 11:xtic(1) notitle, '' u 12 notitle, '' u 13 notitle 
```

这是使用 gnuplot 4.6 patchlevel 0（在 OS-X 10.5 上绘制）的图表（绘制到 postscript 终端）：

![用 gnuplot 4.6.0 绘制](../Images/74464de437aa4839943d4515cdad73b1.png)

这是相同的脚本，但使用 gnuplot 4.4 补丁级别 2：

![用 gnuplot 4.4.2 绘制](../Images/b6b0881f395fde589074bf8098f90dc3.png)

*如果我使用 png 终端绘图，也会发生相同的行为*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:30:41.187

最近，我遇到了同样的问题，经过数小时搜索解决方案后，我意识到 windows gnuplot 在为带有标题的文件绘制堆叠直方图时出现问题（我的标题是指包含名称的文件的第一行列）。

因此，此问题的快速解决方法是从源文件中删除标头。

它对我有用。

# assembly - 如何在 Windbg 中调试 FASM 编译的 windows x64 可执行文件？

> ID：12368907
> 
> 赞同：2
> 
> 时间：2012-09-11T11:41:33.500
> 
> 标签：assembly, 64-bit, symbols, fasm

由于 FASM 不会仅导出 .pdb 符号文件 .fas 文件，是否有解决方法？我知道有一些像 fas2pdb 或 pecvt 这样的程序，但是它们都只能在 86 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:39:49.847

试试[http://board.flatassembler.net/topic.php?p=118458](http://board.flatassembler.net/topic.php?p=118458) 它是 IDA 的插件，它从 FAS 文件中添加调试符号，尚未测试，但它应该可以工作。

# android - 媒体播放器工作后台进程在android中使用服务类

> ID：12368909
> 
> 赞同：0
> 
> 时间：2012-09-11T11:41:46.947
> 
> 标签：android, android-service

我想创建收音机播放器并在我回去时在后台播放然后播放收音机。我也想保持停止，暂停，下一个，上一个按钮。但是如何使用服务类在 Android 中播放、停止、暂停等。

有想法？？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:58:28.837

这是您可以尝试的示例...

创建一个 ServiceDemo.java 活动

```
 public class ServicesDemo extends Activity implements OnClickListener {
  private static final String TAG = "ServicesDemo";
  Button buttonStart, buttonStop;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    buttonStart = (Button) findViewById(R.id.buttonStart);
    buttonStop = (Button) findViewById(R.id.buttonStop);

    buttonStart.setOnClickListener(this);
    buttonStop.setOnClickListener(this);
  }

  public void onClick(View src) {
    switch (src.getId()) {
    case R.id.buttonStart:
      Log.d(TAG, "onClick: starting srvice");
      startService(new Intent(this, MyService.class));
      break;
    case R.id.buttonStop:
      Log.d(TAG, "onClick: stopping srvice");
      stopService(new Intent(this, MyService.class));
      break;
    }
  }
} 
```

创建一个名为 MyService.java 的服务

```
public class MyService extends Service {
    private static final String TAG = "MyService";
    MediaPlayer player;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");

        player = MediaPlayer.create(this, R.raw.braincandy);
        player.setLooping(false); // Set looping
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
        player.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");
        player.start();
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example" android:versionCode="1" android:versionName="1.0">
  <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".ServicesDemo" android:label="@string/app_name">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
    <service android:enabled="true" android:name=".MyService" />
  </application>
  <uses-sdk android:minSdkVersion="3" />
</manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center">
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" android:text="Services Demo" android:gravity="center" android:textSize="20sp" android:padding="20dp"/>
<Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/buttonStart" android:text="Start"></Button>
<Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Stop" android:id="@+id/buttonStop"></Button>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:47:23.540

为此，您必须将服务与您的活动绑定。您可以按照以下链接将服务与活动绑定。 [https://stackoverflow.com/a/10799514/630668](https://stackoverflow.com/a/10799514/630668)

# html - HTML - 选择文件名后显示图像

> ID：12368910
> 
> 赞同：177
> 
> 时间：2012-09-11T11:41:48.810
> 
> 标签：html, file-upload

我有一个表格可以让我

```
<input type="file" name="filename" accept="image/gif, image/jpeg, image/png"> 
```

浏览并选择文件。

我想要做的是在选择图像后立即显示该图像。这是在表单上的“提交”按钮被按下之前，所以图像几乎肯定位于客户端。这可以做到吗？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2012-09-11T11:48:16.550

干得好：

**HTML**

```
<!DOCTYPE html>
<html>
  <head>
    <link
      class="jsbin"
      href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css"
      rel="stylesheet"
      type="text/css"
    />
    <script
      class="jsbin"
      src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"
    ></script>
    <script
      class="jsbin"
      src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"
    ></script>
    <meta charset="utf-8" />
    <title>JS Bin</title>
    <!--[if IE]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
      article,
      aside,
      figure,
      footer,
      header,
      hgroup,
      menu,
      nav,
      section {
        display: block;
      }
    </style>
  </head>
  <body>
    <input type="file" onchange="readURL(this);" />
    <img id="blah" src="#" alt="your image" />
  </body>
</html> 
```

**脚本：**

```
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function (e) {
      $('#blah').attr('src', e.target.result).width(150).height(200);
    };

    reader.readAsDataURL(input.files[0]);
  }
} 
```

[**现场演示**](http://jsbin.com/uboqu3/1/edit)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-11T11:45:23.143

您可以使用以下代码实现此目的：

```
$("input").change(function(e) {

    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {

        var file = e.originalEvent.srcElement.files[i];

        var img = document.createElement("img");
        var reader = new FileReader();
        reader.onloadend = function() {
             img.src = reader.result;
        }
        reader.readAsDataURL(file);
        $("input").after(img);
    }
}); 
```

演示：http: [//jsfiddle.net/ugPDx/](http://jsfiddle.net/ugPDx/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T11:47:08.143

这可以使用 HTML5 完成，但仅适用于支持它的浏览器。这是一个[例子](http://www.onlywebpro.com/2012/01/24/create-thumbnail-preview-of-images-using-html5-api/)。

请记住，对于不支持此功能的浏览器，您需要另一种方法。我在[这个插件](http://blueimp.github.com/jQuery-File-Upload/)上取得了很大的成功，它可以让你完成很多工作。

# android - 商业软件的 Acra 替代品

> ID：12368912
> 
> 赞同：1
> 
> 时间：2012-09-11T11:41:51.830
> 
> 标签：android, crash-reports

我正在为我的雇主编写一个 android 应用程序，并且正在寻找崩溃报告者。

到目前为止，我找到了[Acra](https://code.google.com/p/acra/)。这看起来真的像我正在寻找的东西。但是我的雇主不喜欢 Apache 许可证。

有人知道替代方案吗？最好是崩溃报告者通过电子邮件发送崩溃。

谢谢，异种狼疮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:44:14.120

[HockeyApp](http://www.hockeyapp.net/crash-reports)对于崩溃报告和 beta 测试很有用。查看网站。

# xml - XML XSLT 排序和多选

> ID：12368915
> 
> 赞同：1
> 
> 时间：2012-09-11T11:42:05.433
> 
> 标签：xml, xslt

我想先选择多个节点并按日期排序。但代码不太好用

XSLT

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/"> 
      <html>
      <body>
        <h2>display 9 Items</h2>
              <xsl:for-each select="groups/elements/category/types[@name='POP']/language | groups/elements[delivery]/category/types[@name='POP']/language">
            <xsl:sort select="ancsetor::elements[1]/PostDate" order="descending"/>
            <xsl:if test="not(position() > 9)">
            <b><xsl:value-of select="PostDate" /></b> - 
            <font color='red'><xsl:value-of select="name" /></font>
           <p></p>
           </xsl:if>
          </xsl:for-each>
      </body>
      </html>
    </xsl:template>

</xsl:stylesheet> 
```

XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="xslt.xslt"?>

<groups>
<elements>
<name>//1</name>
<BOD></BOD>
<description/>
<delivery/>
<URL></URL>
<Hobbbies>
<Sport></Sport>
<Music>
<category> 
<types Code="POP/DANCE" Name="POP"  />
<types Code="POP/MUSIC" Name="POP"  >
<language>Italian</language>
</types>
</category>
</Music>
</Hobbbies>
<Size></Size>
<PostDate>2012-03-04</PostDate>
<trackno></trackno>
</elements>
<elements>

<name>//1+1</name>
<BOD></BOD>
<description/>
<delivery/>yes
<URL></URL>
<Hobbbies>
<Sport></Sport>
<Music>
<category> 
<types Code="POP/DANCE" Name="POP"  />
<types Code="POP/MUSIC" Name="POP"  >
<language>Italian</language>
</types>
</category>
</Music>
</Hobbbies>
<Size></Size>
<PostDate>2012-03-04</PostDate>
<trackno></trackno>
</elements>

<elements>
<name>//2</name>
<BOD></BOD>
<description/>
<delivery/>
<URL></URL>
<Hobbbies>
<Sport></Sport>
<Music>
<category> 
<types Code="POP/DANCE" Name="PureMusic"  />
<types Code="POP/MUSIC" Name="JAZZ"  >
<language>No language</language>
</types>
</category>
</Music>
</Hobbbies>
<Size></Size>
<PostDate>2011-03-04</PostDate>
<trackno></trackno>
</elements>

<elements>
<name>//3</name>
<BOD></BOD>
<description/>
<delivery/>
<URL></URL>
<Hobbbies>
<Sport></Sport>
<Music>
<category> 
<types Code="JAZZ/DANCE" Name="JAZZ"  />
<types Code="JAZZ/MUSIC" Name="BLUES">
<language>English</language>
</types>
</category>
</Music>
</Hobbbies>
<Size></Size>
<PostDate>2012-05-04</PostDate>
<trackno></trackno>
</elements>

<elements>
<name>//4</name>
<BOD></BOD>
<description/>
<delivery/>yes
<URL></URL>
<Hobbbies>
<Sport></Sport>
<Music>
<category> 
<types Code="Blues/DANCE" Name="POP"  />
<types Code="Blues/MUSIC" Name="POP" >
 <language>No language</language>
</types>
</category>
</Music>
</Hobbbies>
<Size></Size>
<PostDate>2012-01-14</PostDate>
<trackno></trackno>
</elements>

</groups> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:19:54.300

**提供的代码中存在许多错误，其中最明显的是：**

```
 <xsl:for-each select=
          "groups/elements/category/types[@name='POP']/language 
         | groups/elements[delivery]/category/types[@name='POP']/language"> 
```

`types`元素有一个属性`Name`——不是一个`name`属性。XPath 区分大小写，不同大小写的名称被视为不同。

**第二个逻辑错误**：

上面的联合等价于它的第一个参数：

```
groups/elements/category/types[@name='POP']/language 
```

因为第二个参数（nodeset）包含在第一个参数（node-set）中。

也许您想在第二个参数中指定一些*不同的东西？*

**第三个明显的错误**是一个`language`元素没有命名的子元素`PostDate`或者`name`——因此里面的代码`xsl:for-each`不会产生任何东西。

**第四个错误**是 that `category`is not a child of `elements`-- 因此`select`属性 of`xsl:for-each`甚至不选择单个节点。

**解决方案**：

纠正上述所有错误后，我的*猜测*是你想要这样的东西：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
   <html>
      <body>
        <h2>display 9 Items</h2>
        <xsl:for-each select="groups/elements[.//category/types[@Name='POP']/language]">
            <xsl:sort select="PostDate" order="descending"/>
            <xsl:if test="not(position() > 9)">
            <b><xsl:value-of select="PostDate" /></b> -
            <font color='red'><xsl:value-of select="name" /></font>
           <p></p>
           </xsl:if>
        </xsl:for-each>
      </body>
   </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<groups>
    <elements>
        <name>//1</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="POP"  />
                    <types Code="POP/MUSIC" Name="POP"  >
                        <language>Italian</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2012-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//1+1</name>
        <BOD></BOD>
        <description/>
        <delivery/>yes
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="POP"  />
                    <types Code="POP/MUSIC" Name="POP"  >
                        <language>Italian</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2012-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//2</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="PureMusic"  />
                    <types Code="POP/MUSIC" Name="JAZZ"  >
                        <language>No language</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2011-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//3</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="JAZZ/DANCE" Name="JAZZ"  />
                    <types Code="JAZZ/MUSIC" Name="BLUES">
                        <language>English</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2012-05-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//4</name>
        <BOD></BOD>
        <description/>
        <delivery/>yes
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="Blues/DANCE" Name="POP"  />
                    <types Code="Blues/MUSIC" Name="POP" >
                        <language>No language</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2012-01-14</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//5</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="DANCE/DANCE" Name="POP"  />
                    <types Code="RAP/MUSIC" Name="POP" >
                        <language>No language</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2010-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//6</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/HALL" Name="HALL"  />
                    <types Code="POP/MUSIC" Name="POP" >
                        <language>German</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2009-10-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//7</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="JAZZ/DANCE" Name="POP"  />
                    <types Code="BLUES/MUSIC" Name="POP"  >
                        <language>Korean</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2001-11-05</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//8</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="POP"  />
                    <types Code="POP/MUSIC" Name="POP"  >
                        <language>English</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2004-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//9</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="HIPHIP"  />
                    <types Code="POP/MUSIC" Name="POP" >
                        <language>Chinese</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2007-02-18</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//10</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="POP"  />
                    <types Code="POP/MUSIC" Name="POP" >
                        <language>Janpanese</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2002-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//11</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/JAZZ" Name="POP"  />
                    <types Code="POP/MUSIC" Name="JAZZ"  >
                        <language>Spanish</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2012-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//12</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="POP"  />
                    <types Code="POP/MUSIC" Name="POP">
                        <language>French</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2006-01-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//13</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="POP"  />
                    <types Code="POP/MUSIC" Name="POP" >
                        <language>English</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2012-05-02</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//14</name>
        <BOD></BOD>
        <description/>
        <delivery/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music>
                <category>
                    <types Code="POP/DANCE" Name="BB"  />
                    <types Code="POP/MUSIC" Name="DANCE"  >
                        <language>Spanish</language>
                    </types>
                </category>
            </Music>
        </Hobbbies>
        <Size></Size>
        <PostDate>2002-06-10</PostDate>
        <trackno></trackno>
    </elements>
</groups> 
```

**结果是**：

```
<html>
   <body>
      <h2>display 9 Items</h2><b>2012-05-02</b> -
      <font color="red">//13</font><p></p><b>2012-03-04</b> -
      <font color="red">//1</font><p></p><b>2012-03-04</b> -
      <font color="red">//1+1</font><p></p><b>2012-01-14</b> -
      <font color="red">//4</font><p></p><b>2010-03-04</b> -
      <font color="red">//5</font><p></p><b>2009-10-04</b> -
      <font color="red">//6</font><p></p><b>2007-02-18</b> -
      <font color="red">//9</font><p></p><b>2006-01-04</b> -
      <font color="red">//12</font><p></p><b>2004-03-04</b> -
      <font color="red">//8</font><p></p>
   </body>
</html> 
```

**它在浏览器中显示为**：

## 显示 9 项

**2012-05-02** - //13

**2012-03-04** - //1

**2012-03-04** - //1+1

**2012-01-14** - //4

**2010-03-04** - //5

**2009-10-04** - //6

**2007-02-18** - //9

**2006-01-04** - //12

**2004-03-04** - //8

# iphone - 如何在 plist 中的字典中访问数组

> ID：12368916
> 
> 赞同：0
> 
> 时间：2012-09-11T11:42:11.127
> 
> 标签：iphone, objective-c, xcode, plist

我在字典中有 2 个数组存储为 plist。我无法找到单独访问这些数组的方法

```
<key>MainCategories</key>
<dict>
  <key>CategoryNames</key>
    <array>
        <string>Accelaration</string>
        <string>Force</string>
        <string>Fuel Consumption</string>
    </array>
    <key>Images</key>
    <array>
        <string>accelaration_icon.png</string>
        <string>force_icon.png</string>
        <string>fuel_icon.png</string>
    </array>
</dict> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:43:34.023

加载 plist 后，您只需访问不同的键：

```
NSDictionary *plist = [NSDictionary dictionaryWithContentsOfFile:filename];

NSDictionary *mainCategories = [plist objectForKey:@"MainCategories"];
NSArray *categoryNames = [mainCategories objectForKey:@"CategoryNames"];
NSArray *images = [mainCategories objectForKey:@"Images"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:47:58.600

```
NSString *plistFilePath = [[NSBundle mainBundle] pathOfResource:@".." ofType:@"plist"];
NSDictionary *mainCategories = [NSDictionary dictionaryWithContentsOfFile:plistFilePath];

NSArray *categoryNames = [mainCategories objectForKey:@"CategoryNames"];
NSArray *categoryImages = [mainCategories objectForKey:@"Images"]; 
```

# asp.net-mvc - 将数据插入sqlserver时显示错误

> ID：12368917
> 
> 赞同：0
> 
> 时间：2012-09-11T11:42:19.970
> 
> 标签：asp.net-mvc, sql-server-2008, entity-framework

我正在 MVC 中创建应用程序。当我尝试将数据插入 SQL Server 2008 时，它显示如下错误：

> ObjectStateManager 中已存在具有相同键的对象。现有对象处于未更改状态。只有处于添加状态的对象才能再次添加到 ObjectStateManager。

这是什么意思？

```
 Candidate candidate = _repository.GetCandidate(LoggedInCandidate.Id);

            candidate.Name = collection["Name"];
            candidate.Email = collection["Email"];
            candidate.Address = collection["Address"];
            candidate.ContactNumber = collection["ContactNumber"];
            candidate.MobileNumber = collection["MobileNumber"];
            candidate.LicenseNumber = collection["LicenseNumber"];
            int candidateId = _repository.AddCandidate(candidate);
            string[] languages = collection["Languages"].Split(',');
         foreach (string language in languages)
         {
             if (!string.IsNullOrEmpty(language))
             {
                 CandidateLanguage cl = new CandidateLanguage();
                 cl.CandidateId = candidateId;
                 cl.LanguageId = Convert.ToInt32(language);
                 _repository.AddCandidateLanguage(cl);
             }
         }

           _repository.Save();
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:03:24.477

你已经得到了一个有 id 的候选人。你为什么要把这个候选人再次插入到上下文中？？？

如果要插入一个新的候选人，为什么要创建一个新的候选人并插入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:13:18.600

如果您希望复制现有实体并在此之后只修改一些属性，您将需要一个复制构造函数（或具有类似想法的东西），然后将新实体插入到数据库中。

如果你想修改你当前的候选人，你会做

```
 Candidate candidate = _repository.GetCandidate(LoggedInCandidate.Id);

        candidate.Name = collection["Name"];
        candidate.Email = collection["Email"];
        candidate.Address = collection["Address"];
        candidate.ContactNumber = collection["ContactNumber"];
        candidate.MobileNumber = collection["MobileNumber"];
        candidate.LicenseNumber = collection["LicenseNumber"];

        _repository.Entry(candidate).State = EntityState.Modified;

        ....

        _repository.Save(); 
```

# android - 什么样的架构最适合通信设备？

> ID：12368919
> 
> 赞同：1
> 
> 时间：2012-09-11T11:42:37.400
> 
> 标签：android, xml, design-patterns, architecture, xml-parsing

我正在开发两个应用程序。第一个是桌面`java`应用程序，第二个是`Android`应用程序。这两个应用程序必须在它们之间进行通信。

现在，它们通信传递 XML 文件并进行解析。问题是有很多不同的 XML，当我解析它们时，我需要知道你需要构建什么对象。

目前，我解析 的根，`XML`并根据名称解析“switch”结构中的其余部分。它有效，但我认为这不是最好的方法。

有人知道已经定义的设计模式或架构可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:54:03.500

如果我猜对了，您正在对 XML 进行序列化/反序列化，以便您的应用程序进行通信，因此在通道的两端都有对象。

如果是这样，JAXB 应该可以满足您在桌面端的需求，因为我不知道它是否已经带有 android，或者您的 android 应用程序是否有 apk 大小限制。

如果你已经这样做了，而你唯一的问题是如何摆脱“开关”，最终总会有某种选择，它可能是一条语句，也可能是配置文件中的值，但本质上那是你的工厂模式，但我会更多地阅读[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)，你已经掌握了它的基础知识，也许只是抛光它的问题，或者将值移动到配置文件并自动化创建过程，我敢肯定，这将需要一个通用的对象接口。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:54:05.870

我建议依赖[XML 命名空间](http://www.w3.org/TR/REC-xml-names/)而不是根元素名称。这就是您区分对象并在必要时使用[XML Schemas](http://www.w3.org/XML/Schema)验证它们的方式。

除此之外，我认为您的协议应该是[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)的，并考虑到[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)。XML 是这种架构的最佳语言。

# java - 如何为海量文件下载创建线程池并重构当前代码？

> ID：12368920
> 
> 赞同：0
> 
> 时间：2012-09-11T11:42:39.217
> 
> 标签：java, multithreading, refactoring, wget

如题。我当前的代码对于操作系统来说太过分了，因为它在单独的线程中运行每个 wget 进程，这很好，但是我有将近 15k 文件要下载，所以我想使用线程池来完成这项工作。不幸的是，我必须使用 wget 进行下载过程。

```
 ExecutorService executor = Executors.newFixedThreadPool(5);
  for(String filename: files) {
        try {
            String encodedFilename = URLEncoder.encode(filename, "UTF-8");
            final String cmd = "wget --no-check-certificate -O " + filename +" " + BipDownloader.bipUrl + encodedFilename;

            Runnable run = new Runnable()
            {
                public void run() {
                    try {
                        System.out.println(cmd);
                        Process process = Runtime.getRuntime().exec(cmd);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }  

                }
            };
            executor.submit(run);
        } catch(IOException e) {
            System.err.println(e.getMessage());
        }    
  } 
```

**编辑**

更新了源代码以使用线程池，但我的系统在下载过程中仍然不稳定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:46:21.823

假设您确实需要使用 wget，您可以使用[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)为您处理线程池：

```
ExecutorService executor = new FixedThreadPool(100); //pool of 100 threads

...

Runnable r = new Runnable() {

    public void run() {
        try {
            System.out.println(cmd);
            Process process = Runtime.getRuntime().exec(cmd);
        } catch (IOException e) {
            e.printStackTrace();
        }  
    }
}

executor.submit(r); 
```

*   池的最佳大小取决于各种因素，最好测试几个数字。100到1000之间的东西应该没问题。
*   如果您需要监控执行的进度，您可以存储由返回的期货`executor.submit`，也可以使用 CompletionExecutorService。

**编辑**

如评论中所述`exec`，它是非阻塞的，因此理论上，所有进程都可能在它们中的任何一个完成之前启动，即使池的大小是有限的。为了防止你应该等到你的`run`方法，直到过程完成：

```
Process process = Runtime.getRuntime().exec(cmd);
int exitVal = process.waitFor(); 
```

# c# - 使用 XML 字符串加载 DataTable

> ID：12368935
> 
> 赞同：0
> 
> 时间：2012-09-11T11:43:36.947
> 
> 标签：c#, xml, datatable

我有，`XMLDocument`并且我将我想要使用的以下 xml 标记提取`xmlDocument.SelectSingleNode("./tag")`到一个字符串中，并且我想将它加载到一个 DataTable 中。

我尝试使用，`dataTable.ReadXML();`但此函数的重载不允许字符串参数。

有没有更好的方法来做到这一点？

编辑：添加代码

```
XmlDocument xdoc = new XmlDocument();
xdoc.LoadXml(string_With_Xml);
DataTable accessTable = new DataTable();
accessTable.ReadXml(); 
```

我希望这为这个问题增加了更多的背景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:48:25.037

您可以尝试以下方法：

```
//Your xml
string TestSTring = @"<Contacts> 
                    <Node>
                        <ID>123</ID>
                        <Name>ABC</Name>
                    </Node>
                    <Node>
                        <ID>124</ID>
                        <Name>DEF</Name>
                    </Node>
            </Contacts>";
StringReader StringStream = new StringReader(TestSTring);
DataSet ds = new DataSet();
ds.ReadXml(StringStream);
DataTable dt = ds.Tables[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:51:55.263

你可以这样写扩展：

```
public static someType ReadXml(this DataTable dt, string yourParam1, string yourParam2)
{
   method body....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-13T12:59:12.713

您可以执行以下方法，可以使用例如为字符串加载此处的字节数组：

```
Encoding.UTF8.GetBytes(somestring) 
```

加载数据表的辅助方法，注意回退到 DataSet 的方法 ReadXml 而不是 Datatable ReadXml。如果您的 xml 以某种方式包含多个数据表，这并不总是合适的，因为此方法总是返回 catch 中的第一个数据表：

```
 public DataTable Convert(byte[] bytes)
    {
        var text = bytes.ToStringUtf8();
        if (string.IsNullOrWhiteSpace(text))
        {
            return null;
        }
        using (var stream = new MemoryStream(bytes))
        {
            try
            {
                var dt = new DataTable();
                dt.ReadXml(stream);
                return dt;
            }
            catch (InvalidOperationException ie)
            {
                Trace.WriteLine(ie);
                var ds = new DataSet();
                stream.Position = 0;
                ds.ReadXml(stream);
                if (ds.Tables.Count > 0)
                {
                    return ds.Tables[0];
                }
                return null;
            }
        }
    } 
```

# eclipse - 有什么方法可以控制 Java Spring STS Gradle 插件使用的版本？

> ID：12368936
> 
> 赞同：2
> 
> 时间：2012-09-11T11:43:37.057
> 
> 标签：eclipse, jetty, gradle

我在 Eclipse (Indigo) 中使用 STS Gradle 插件。我在 MacOSX 上运行。Eclipse 正在运行 Java 1.6，但我安装了 Java 1.7 作为默认 JRE，并且我的所有 Eclipse 项目都使用它而不会出错。

我试图让“gradle jettyRun”在 Eclipse 中工作。它可以从命令行完美运行。但是，当我右键单击我的 Web 项目并说“Run As”->Gradle Build... 然后从对话框中选择 jettyRun 时，我收到以下错误消息：

```
invalid source release: 1.7 
```

有谁知道是否有办法解决这个问题？

[不要认为这很重要，但我正在运行 Gradle 1.1]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:07:56.913

正如[这个问题](https://issuetracker.springsource.com/browse/STS-2276)所暗示的，如果您使用的是 STS 插件的 3.0.0.M1 以上版本，则应该有一个 Gradle 首选项页面，您可以在其中选择要使用的 JVM 安装。

不确定早期版本的 STS 插件。`JAVA_HOME`您可以在启动 Eclipse 之前尝试设置变量。可能有帮助。

# xml - 使用 Saxon 6.5.5 和 XLST 的转换无法正常工作

> ID：12368937
> 
> 赞同：1
> 
> 时间：2012-09-11T11:43:47.207
> 
> 标签：xml, stylesheet, transform, saxon

我想转换这个xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<KNX xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" CreatedBy="ETS4" ToolVersion="ETS 4.1.2 (Build 3013)" xmlns="http://knx.org/xml/project/11">
  <Project Id="P-065C">
    <Installations>
      <Installation InstallationId="0" Name="" BCUKey="4294967295" DefaultLine="P-065C-0_L-2" IPRoutingMulticastAddress="224.0.23.12" SplitType="None" CompletionStatus="Undefined">
        <Topology>
          <Area Id="P-065C-0_A-0" Name="Backbone Bereich" Address="0" CompletionStatus="Undefined">
            <Line Id="P-065C-0_L-0" Name="Bereichslinie" Address="0" MediumTypeRefId="MT-5" DomainAddress="0" DomainAddressIsChecked="0" CompletionStatus="Undefined" IPRoutingMulticastAddress="224.0.23.12" MulticastTTL="16" />
          </Area>
          <Area Id="P-065C-0_A-1" Name="Neuer Bereich" Address="1" CompletionStatus="Undefined">
            <Line Id="P-065C-0_L-1" Name="Hauptlinie" Address="0" MediumTypeRefId="MT-5" DomainAddress="0" DomainAddressIsChecked="0" CompletionStatus="Undefined" IPRoutingMulticastAddress="224.0.23.12" MulticastTTL="16" />
            <Line Id="P-065C-0_L-2" Name="Neue Linie" Address="1" MediumTypeRefId="MT-0" DomainAddress="0" DomainAddressIsChecked="0" CompletionStatus="Undefined" IPRoutingMulticastAddress="224.0.23.12" MulticastTTL="16">
              <DeviceInstance Id="P-065C-0_DI-1" ProductRefId="M-0002_H-2CDG.20110.20085.20R0011-1_P-2CDG.20110.20085.20R0011" Hardware2ProgramRefId="M-0002_H-2CDG.20110.20085.20R0011-1_HP" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0" />
              <DeviceInstance Id="P-065C-0_DI-2" ProductRefId="M-0002_H-2CDG110061R0011-1_P-2CDG.20110.20061.20R0011" Hardware2ProgramRefId="M-0002_H-2CDG110061R0011-1_HP-A035-10-377F" Address="0" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0" />
              <DeviceInstance Id="P-065C-0_DI-3" ProductRefId="M-0008_H-8.20.2F.2F.2018500-1-O0001_P-185.2000" Hardware2ProgramRefId="M-0008_H-8.20.2F.2F.2018500-1-O0001_HP-1058-01-D423-O0001" Address="1" LastModified="2012-09-07T14:20:33" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0">
                <ComObjectInstanceRefs>
                  <ComObjectInstanceRef RefId="M-0008_A-1058-01-D423-O0001_O-0_R-5" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-1" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0008_A-1058-01-D423-O0001_O-1_R-11" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-1" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0008_A-1058-01-D423-O0001_O-2_R-23" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-2" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0008_A-1058-01-D423-O0001_O-3_R-26" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-2" />
                    </Connectors>
                  </ComObjectInstanceRef>
                </ComObjectInstanceRefs>
              </DeviceInstance>
              <DeviceInstance Id="P-065C-0_DI-6" ProductRefId="M-0048_H-1319201-2_P-1319201" Hardware2ProgramRefId="M-0048_H-1319201-2_HP-131C-12-4C9E" Address="2" LastModified="2012-09-07T12:16:26" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0">
                <ComObjectInstanceRefs>
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-12_R-209" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-13_R-13" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-14_R-14" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-15_R-15" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-16_R-63" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-17_R-17" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-4_R-68" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-40_R-215" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-1_R-2" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-3" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-0_R-1" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-3" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-7_R-8" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0048_A-131C-12-4C9E_O-8_R-122" IsActive="1" />
                </ComObjectInstanceRefs>
              </DeviceInstance>
              <DeviceInstance Id="P-065C-0_DI-5" ProductRefId="M-0008_H-8.20.2F.2F.20570.2000-1_P-570.2000" Hardware2ProgramRefId="M-0008_H-8.20.2F.2F.20570.2000-1_HP" Address="3" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0" />
              <DeviceInstance Id="P-065C-0_DI-7" ProductRefId="M-0007_H-2CDG.20110.20079.20R0011-1-O0002_P-6197.2F22" Hardware2ProgramRefId="M-0007_H-2CDG.20110.20079.20R0011-1-O0002_HP-A043-12-5DB8-O0002" Address="4" LastModified="2012-09-07T14:20:45" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0">
                <ComObjectInstanceRefs>
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-10_R-2438" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-1" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-12_R-2319" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-13_R-2443" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-34_R-2433" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-35_R-2440" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-2" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-38_R-2450" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-59_R-2432" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0007_A-A043-12-5DB8-O0002_O-37_R-2316" DatapointType="DPST-3-7" IsActive="1" />
                </ComObjectInstanceRefs>
              </DeviceInstance>
              <DeviceInstance Id="P-065C-0_DI-8" ProductRefId="M-0008_H-8.20.2F.2F.20880.20xx-1_P-880.20xx" Hardware2ProgramRefId="M-0008_H-8.20.2F.2F.20880.20xx-1_HP-A003-01-737E" Address="5" LastModified="2012-09-07T12:16:43" CompletionStatus="Undefined" IndividualAddressLoaded="0" ApplicationProgramLoaded="0" ParametersLoaded="0" CommunicationPartLoaded="0" MediumConfigLoaded="0" IsCommunicationObjectVisibilityCalculated="1" Broken="0">
                <ComObjectInstanceRefs>
                  <ComObjectInstanceRef RefId="M-0008_A-A003-01-737E_O-0_R-0" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-4" />
                    </Connectors>
                  </ComObjectInstanceRef>
                  <ComObjectInstanceRef RefId="M-0008_A-A003-01-737E_O-1_R-1" IsActive="1" />
                  <ComObjectInstanceRef RefId="M-0008_A-A003-01-737E_O-2_R-2" IsActive="1">
                    <Connectors>
                      <Send GroupAddressRefId="P-065C-0_GA-4" />
                    </Connectors>
                  </ComObjectInstanceRef>
                </ComObjectInstanceRefs>
              </DeviceInstance>
            </Line>
          </Area>
        </Topology>
        <Buildings>
          <BuildingPart Id="P-065C-0_BP-0" Name="Hauptgebäude" Type="Building" CompletionStatus="Undefined">
            <BuildingPart Id="P-065C-0_BP-1" Name="Vordergebäude" Type="BuildingPart" CompletionStatus="Undefined" />
            <BuildingPart Id="P-065C-0_BP-2" Name="Rückgebäude" Type="BuildingPart" CompletionStatus="Undefined">
              <BuildingPart Id="P-065C-0_BP-3" Name="Erdgeschoss" Type="Floor" CompletionStatus="Undefined" />
              <BuildingPart Id="P-065C-0_BP-4" Name="1.Etage" Type="Floor" CompletionStatus="Undefined">
                <BuildingPart Id="P-065C-0_BP-5" Name="Küche" Type="Room" CompletionStatus="Undefined" />
                <BuildingPart Id="P-065C-0_BP-6" Name="Büro Poolfahrzeuge" Type="Room" CompletionStatus="Undefined" />
                <BuildingPart Id="P-065C-0_BP-7" Name="Büro Studenten" Type="Room" CompletionStatus="Undefined">
                  <DeviceInstanceRef RefId="P-065C-0_DI-1" />
                  <DeviceInstanceRef RefId="P-065C-0_DI-2" />
                  <DeviceInstanceRef RefId="P-065C-0_DI-5" />
                  <DeviceInstanceRef RefId="P-065C-0_DI-6" />
                  <DeviceInstanceRef RefId="P-065C-0_DI-8" />
                  <DeviceInstanceRef RefId="P-065C-0_DI-3" />
                  <DeviceInstanceRef RefId="P-065C-0_DI-7" />
                </BuildingPart>
              </BuildingPart>
            </BuildingPart>
          </BuildingPart>
        </Buildings>
        <GroupAddresses>
          <GroupRanges>
            <GroupRange Id="P-065C-0_GR-1" Name="Zentralfunktionen" RangeStart="1" RangeEnd="2047">
              <GroupRange Id="P-065C-0_GR-3" Name="Sensorwerte auslesen" RangeStart="256" RangeEnd="511">
                <GroupAddress Id="P-065C-0_GA-3" Address="256" Name="Helligkeitssensor" />
                <GroupAddress Id="P-065C-0_GA-4" Address="257" Name="Bewegungsmelder" />
              </GroupRange>
              <GroupRange Id="P-065C-0_GR-2" Name="Licht steuern" RangeStart="1" RangeEnd="255">
                <GroupAddress Id="P-065C-0_GA-1" Address="1" Name="Glühbirne 1" />
                <GroupAddress Id="P-065C-0_GA-2" Address="2" Name="Glühbirne 2" />
              </GroupRange>
            </GroupRange>
          </GroupRanges>
        </GroupAddresses>
      </Installation>
    </Installations>
  </Project>
</KNX> 
```

使用这个样式表

```
 <xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="iso-8859-1" indent="yes"/>
<xsl:template match="/"  xmlns:b="http://knx.org/xml/project/10">
<xsl:for-each select="b:KNX/b:Project/b:Installations/b:Installation/b:Topology">
<datapoints>
<xsl:for-each select="b:Area/b:Line/b:DeviceInstance/b:ComObjectInstanceRefs/b:ComObjectInstanceRef">
<xsl:sort select="b:Connectors/b:Send/@GroupAddressRefId"/>
<xsl:if test="not(preceding::b:Connectors/b:Send/@GroupAddressRefId = current()/b:Connectors/b:Send/@GroupAddressRefId)">
<xsl:for-each select="b:Connectors">
<xsl:variable name="verz" select="document(concat(substring(../@RefId,0,7),'/',substring-before(../@RefId, '_O'), '.xml'))/b:KNX/b:ManufacturerData/b:Manufacturer/b:ApplicationPrograms/b:ApplicationProgram/b:Static/b:ComObjectTable/b:ComObject[@Id = ../../b:ComObjectRefs/b:ComObjectRef[@Id = current()/../@RefId]/@RefId]" /> 
<xsl:variable name="grosse"> 
  <xsl:choose>
    <xsl:when test="substring-after($verz/@ObjectSize,' ') = 'Bytes'">
    <xsl:value-of select="substring-before($verz/@ObjectSize,' ')*8" /> 
    </xsl:when>
    <xsl:otherwise>
    <xsl:value-of select="substring-before($verz/@ObjectSize,' ')" /> 
    </xsl:otherwise>
  </xsl:choose>
</xsl:variable>
<xsl:variable name="master" select="document('knx_master.xml')/b:KNX/b:MasterData/b:DatapointTypes/b:DatapointType[@SizeInBit = $grosse]" />
<xsl:variable name="master2" select="document('knx_master.xml')/b:KNX/b:MasterData/b:DatapointTypes/b:DatapointType/b:DatapointSubtypes/b:DatapointSubtype[@Id = current()/../@DatapointType]" />
<xsl:variable name="master3" select="document('knx_master.xml')/b:KNX/b:MasterData/b:DatapointTypes/b:DatapointType[@Id = current()/../@DatapointType]" />
<xsl:variable name="graddress" select="/b:KNX/b:Project/b:Installations/b:Installation/b:GroupAddresses/b:GroupRanges/b:GroupRange/b:GroupRange" />
<datapoint>     
    <xsl:attribute name="stateBased">
        <xsl:value-of select="'true'"/>
    </xsl:attribute>
    <xsl:attribute name="name">
        <xsl:value-of select="$verz/@Name"/>
    </xsl:attribute>
    <xsl:attribute name="mainNumber">
        <xsl:choose>
        <xsl:when test="../@DatapointType != ''">
            <xsl:choose>
            <xsl:when test="string-length(../@DatapointType) > 5">
                <xsl:value-of select="$master2/../../@Number"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$master3/@Number"/>
            </xsl:otherwise>
            </xsl:choose>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$master/@Number"/>
        </xsl:otherwise>
        </xsl:choose>
    </xsl:attribute>
    <xsl:attribute name="dptID">
        <xsl:choose>
        <xsl:when test="../@DatapointType != ''">
            <xsl:choose>
            <xsl:when test="string-length(../@DatapointType) > 5">
                <xsl:value-of select="concat($master2/../../@Number, '.',format-number($master2/@Number, '000') )"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="concat($master3/@Number, '.001')"/>
            </xsl:otherwise>
            </xsl:choose>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="concat($master/@Number,'.',format-number($master/b:DatapointSubtypes/b:DatapointSubtype/@Number, '000'))"/>
        </xsl:otherwise>
        </xsl:choose>
    </xsl:attribute>
    <xsl:attribute name="priority">
        <xsl:choose>
        <xsl:when test="../@Priority">
        <xsl:value-of select="../@Priority"/>
        </xsl:when>
        <xsl:otherwise>
        <xsl:value-of select="$verz/@Priority"/>
        </xsl:otherwise>
        </xsl:choose>
    </xsl:attribute>

    <xsl:for-each select="b:Send">
            <knxAddress type="group">
                <xsl:value-of select="$graddress/b:GroupAddress[@Id = current()/@GroupAddressRefId]/@Address"/>
            </knxAddress>
    </xsl:for-each>
    <expiration timeout="0"/>
        <xsl:choose>
        <xsl:when test="b:Receive">
            <xsl:for-each select="b:Receive">
                <updatingAddresses>
                    <xsl:value-of select="$graddress/b:GroupAddress[@Id = current()/@GroupAddressRefId]/@Address"/>
                </updatingAddresses>
            </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
            <updatingAddresses>
                <xsl:text> </xsl:text>
            </updatingAddresses>
        </xsl:otherwise>
        </xsl:choose>
    <invalidatingAddresses>
        <xsl:text> </xsl:text>
    </invalidatingAddresses>
</datapoint>
</xsl:for-each>
</xsl:if>
</xsl:for-each>
</datapoints>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

使用撒克逊 6.5.5。在 Windows 命令行中使用以下命令：

```
java -jar C:\Saxon\Saxon6.5.5\saxon.jar -t -o calimero.xml 0.xml ets4_calimero_gui.xsl 
```

这两个文件位于正确的目录中，输出如下：

```
'SAXON 6.5.5 from Michael Kay
 Java version 1.6.0_31
 Loading com.icl.saxon.sort.Compare_d
 Preparation time: 225 milliseconds
 Processing file:/C:/Saxon/Saxon6.5.5
 Building tree for file:/C:/Saxon/Sax
 tree.TinyBuilder
 Tree built in 33 milliseconds
 Loading java.net.URI
 Execution time: 100 milliseconds' 
```

但创建的 calimero.xml 仅包含以下行：

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

有人知道问题吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:48:47.493

您的 XML 输入位于 xmlns 中：

```
xmlns="http://knx.org/xml/project/11" 
```

而您的 xslt 正在寻找

```
xmlns:b="http://knx.org/xml/project/10" 
```

看起来架构版本已经提高了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:01:37.060

这与您的问题无关，尽管它与您似乎对 XSLT 相当缺乏经验有关...

首先，如果您使用的是 Saxon，那么使用 XSLT 1.0 确实没有任何充分的理由。（更不用说“XSLT 1.1”，这是一个从未完成的废弃工作草案）。您应该转移到最近的 Saxon 版本（当前版本是 9.4）并利用使用 XSLT 2.0 的所有好处。

其次，即使考虑到 XSLT 1.0 的限制，这也是非常糟糕的代码：

(a) 它是完全单体编写的——只有一个模板规则

(b) 它使用前面的轴，这是非常低效的

(c) 它不必要地使用 xsl:attribute，这非常冗长

等等

为了让您感觉不同，数据点元素及其属性可以这样创建（一些改进，但不是全部，取决于 XSLT 2.0）：

```
<datapoint 
    stateBased="true" 
    name="{$verz/@Name}"
    mainNumber="{if (../@DatapointType != '')
                 then if(string-length(../@DatapointType) gt 5)
                      then $master2/../../@Number
                      else $master3/@Number
                 else $master/@Number}"
    dptId="{if (../@DatapointType != '')
            then if (string-length(../@DatapointType) gt 5)
                 then concat($master2/../../@Number, '.',format-number($master2/@Number, '000')
                 else concat($master3/@Number, '.001')
            else concat($master/@Number,'.',format-number($master/b:DatapointSubtypes/b:DatapointSubtype/@Number, '000'))}"
    priority="{(../@Priority, $verz/@Priority)[1]}" 
```

那是 51 行代码减少到 14 行，并且可以通过将通用代码片段移动到一个函数中来进一步减少。

# scala - 您可以使用 ScalaMock 捕获和检查提供给被测方法的参数吗？

> ID：12368938
> 
> 赞同：5
> 
> 时间：2012-09-11T11:43:52.980
> 
> 标签：scala, mocking, scalatest

Java Mocking 框架 Mockito 有一个名为的实用程序类，该类`ArgumentCaptor`在多次调用验证方法时累积值列表。

ScalaMock 有类似的机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:28:17.827

[在ScalaMock3](http://www.paulbutcher.com/2012/06/scalamock-3-0-preview-release/)的预览版中有一个幕后机制可以做到这一点，但它目前还没有暴露给客户端代码。

你的用例是什么？

您可能可以通过使用`where`或[在此处](http://scalamock.org/user-guide/advanced_topics/)`onCall`记录（分别在“谓词匹配”和“返回值”标题下）来实现所需的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T21:56:43.880

在[Specs2 中](http://etorreborre.github.com/specs2/)，您可以使用以下内容：

```
myMock.myFunction(argument) answers(
    passedArgument => "something with"+passedArgument
) 
```

这映射到引擎盖下的 Mockito 的 ArgumentCaptor。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T15:23:06.073

根据[Mockito 文档](http://etorreborre.github.io/specs2/guide/SPECS2-3.0/org.specs2.guide.UseMockito.html#with-matchers)，您可以直接使用 specs2 匹配器，例如

```
val myArgumentMatcher: PartialFunction[ArgumentType, MatchResult[_]] = {
  case argument => argument mustEqual expectedValue
}
there was one(myMock).myFunction(beLike(myArgumentMatcher)) 
```

这个解决方案很酷的一点是，部分函数允许非常大的灵活性。您可以对参数进行模式匹配等。当然，如果您真的只需要比较参数值，则不需要偏函数，您可以这样做

```
there was one(myMock).myFunction(==_(expectedValue)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-16T16:14:56.763

另一种选择是通过扩展现有的匹配器来实现您自己的参数捕获器。那种东西应该可以解决问题（对于scalamock 3）：

```
trait TestMatchers extends Matchers {

    case class ArgumentCaptor[T]() {
        var valueCaptured: Option[T] = None
    }

    class MatchAnyWithCaptor[T](captor: ArgumentCaptor[T]) extends MatchAny {
        override def equals(that: Any): Boolean = {
           captor.valueCaptured = Some(that.asInstanceOf[T])
           super.equals(that)
        }
    }

    def capture[T](captor: ArgumentCaptor[T]) = new MatchAnyWithCaptor[T](captor)
} 
```

您可以通过将该特征添加到您的测试类来使用这个新的匹配器

```
val captor = new ArgumentCaptor[MyClass]

(obj1.method(_: MyClass)).expects(capture(captor)).returns(something)

println(captor.capturedValue) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-24T03:07:16.130

使用[ArgumentCapture](https://github.com/etorreborre/specs2/blob/master/src/main/scala/org/specs2/mock/mockito/CapturedArgument.scala)：

```
val subject = new ClassUnderTest(mockCollaborator)
// Create the argumentCapture
val argumentCapture = new ArgumentCapture[ArgumentClazz]

// Call the method under test
subject.methodUnderTest(methodParam)

// Verifications
there was one (mockCollaborator).someMethod(argumentCapture)
val argument = argumentCapture.value
argument.getSomething mustEqual methodParam 
```

# doctrine-orm - Zend Framework 2 - Doctrine 2 错误信息

> ID：12368939
> 
> 赞同：0
> 
> 时间：2012-09-11T11:43:54.110
> 
> 标签：doctrine-orm, zend-framework2

我一直在尝试为 Zend Framework 2 中的专辑模块添加更多灵活性。在此过程中，我一直在尝试为表单字段之一设置验证器，尤其是专辑名称，在我的情况下，我的数据库中的列名是标题。

我一直在关注我帖子先前答案之一的验证部分，可以在[这里找到](https://stackoverflow.com/questions/12300472/validation-in-zend-framework-2-with-doctrine-2/12315350#comment16543609_12315350)

我一直在以这种方式在我的专辑控制器类中使用该类：

```
<?php

namespace Album\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Album\Entity\Album\Album;
use Album\Form\AlbumForm;
use Album\Model\Album\AlbumExists;
use Doctrine\ORM\EntityManager;

class AlbumController
extends AbstractActionController
{
 public function addAction()
     {
        $form = new AlbumForm();
        $form->get('submit')->setAttribute('value', 'Add');

        $query = "SELECT a.title FROM Album\Entity\Album\Album a";
        $albumExists = new AlbumExists($this->getEntityManager(), $query, 'title');

        $request = $this->getRequest();
        if ($request->isPost())
        {
            $album = new Album();
            $form->setInputFilter($album->getInputFilter());
            $form->setData($request->getPost());
            $title = $this->getRequest()->getPost('title');

            if ($form->isValid() && $albumExists->isValid($title))
            {
                 $album->populate($form->getData());
                 $this->getEntityManager()->persist($album);
                 $this->getEntityManager()->flush();

                return $this->redirect()->toRoute('album');
            }
        }
        return array('form' => $form);
    } 
```

当我输入已经在数据库中的专辑名称/标题时，它会以这种方式引发错误：

> ```
> An error occurred during execution; please try again later.  
> Additional information:
> Doctrine\ORM\Query\QueryException  
> 
> File:
> C:\vendor\doctrine\orm\lib\Doctrine\ORM\Query\QueryException.php:69
> 
> Message:
> Invalid parameter number: number of bound variables does not match number of tokens. 
> ```

知道我在哪里犯了错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:00:32.810

如果您使用的是“我的”类并且没有修改该部分，则您的查询中缺少 WHERE 条件。

在类中，`:value`绑定了一个参数，因此您必须在查询中使用此参数（例如`WHERE a.title = :value`）。

# javascript - 将 css 应用于第 n 个子词

> ID：12368943
> 
> 赞同：3
> 
> 时间：2012-09-11T11:44:03.887
> 
> 标签：javascript, jquery

一个有趣的小问题...

尝试遍历段落（单词）的子项并逐个着色。

这是一个硬编码的工作版本，其中包含单独元素中的单词：http: [//jsfiddle.net/JjRHT/25/](http://jsfiddle.net/JjRHT/25/)

使用

```
window.setInterval(function(){
$(".item:nth-child(1)").css("color", "#FFFFFF");
}, 1000); 
```

只是为了展示我正在尝试的东西......显然不是要走的路！

所以 - 我可以选择一个段落的每个孩子吗？以及如何正确执行循环-稍有延迟...

史蒂文

编辑：

我找到了一个 jquery[插件](https://github.com/davatron5000/Lettering.js)，它可以将文本拆分为非常适合 css 的单词：

```
<p class="word_split">Don't break my heart.</p>
<script>
$(document).ready(function() {
  $(".word_split").lettering('words');
});
</script> 
```

这将产生：

```
<p class="word_split">
  <span class="word1">Don't</span>
  <span class="word2">break</span>
  <span class="word3">my</span>
  <span class="word4">heart.</span>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:44:51.497

这里的主要问题是您不能将样式应用于段落的单词。

如果要为单词（而不是整个元素）着色，则必须从段落中提取单词。

这会将段落分成两部分，并为每个部分赋予不同的颜色：

```
var tokens = $paragraph.text().split(' ');
var i=0;
window.setInterval(function(){
       i = (i+1)%tokens.length;
       $paragraph.html( '<span class=onecolor>'+tokens.slice(0, i).join(' ')+'</span>'
           + ' <span class=othercolor>'+tokens.slice(i, tokens.length).join(' ')+'</span>');
}, 1000);​ 
```

演示：http: [//jsfiddle.net/CcBLr/1/](http://jsfiddle.net/CcBLr/1/)

* * *

编辑 ：

假设你想在你的话上做一些具体的事情（如你所说，例如不同的延迟），你可以这样做来准备：

```
var tokens = $paragraph.text().split(' ');
var spans = tokens.map(function(t){return '<span>'+t+'</span>'});
$paragraph.html(spans.join(' '));
var $words = $paragraph.children('span'); 
```

`$words`现在是段落单词的集合，但您可以在它们上应用样式。例如：

```
$words.each(function(){
   var $word = $(this);
   setTimeout(
   ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:47:33.590

[http://jsfiddle.net/JjRHT/38/](http://jsfiddle.net/JjRHT/38/)

这是延迟

**编辑**：更新版本 [http://jsfiddle.net/JjRHT/38/](http://jsfiddle.net/JjRHT/38/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:47:35.747

稍有延迟，就像您要求的那样：

```
var delay = 300; // delay in milliseconds

$(".item").children().each(function(index) {
    setTimeout(function() {
        $(this).css("color", "#FFFFFF");
    }, index*delay);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:48:50.690

你不需要循环，因为你只是在[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)上调用，因为 setInterval 每次都会自我调用函数，你需要的只是增加修饰符。

检查这个[http://jsfiddle.net/JjRHT/39/](http://jsfiddle.net/JjRHT/39/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T11:59:45.340

变量时间= 300；

$('.item').each(函数(索引) {

window.setInterval(function(){$(".item:nth-child("+(index+1)+")").css("color", "#FFFFFF");}, time*index); });

# apache-camel - 基于内容的节流

> ID：12368944
> 
> 赞同：6
> 
> 时间：2012-09-11T11:44:07.820
> 
> 标签：apache-camel

我想知道 Camel 是否可以根据交换的内容进行节流。

情况如下：我必须通过肥皂调用网络服务。其中，发送给那个webservice的参数有一个customerId。问题是，如果给定的 customerId 每分钟有超过 1 个请求，则 Web 服务会发回错误。

我想知道是否可以使用 Camel 实现每个 customerId 的节流。因此，不应该对所有消息实施限制，而应仅对具有相同 customerId 的消息实施限制。

让我知道如何实现这一点，或者我是否需要澄清我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:31:19.630

[ActiveMQ 消息组](http://activemq.apache.org/message-groups.html)旨在处理这种情况。因此，如果您可以在路由中引入 JMS 队列跃点，那么只需将 JMSXGroupId 标头设置为 customerId。然后在另一条路线中，您可以从此队列中消费并发送到您的 Web 服务以获取您描述的行为。

另请参阅[http://camel.apache.org/parallel-processing-and-ordering.html](http://camel.apache.org/parallel-processing-and-ordering.html)了解更多信息......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:42:08.513

虽然 ActiveMQ 消息组肯定会解决唯一客户 ID 的并行处理，但在我的评估中，克劳斯是正确的，为每个唯一组引入节流阀代表了 Camel/ActiveMQ 未实现的功能。

单独的消息组将不符合所描述的 SLA。虽然每组消息（与客户 ID 相关）将按顺序处理，每组一个线程，只要请求不到一分钟即可收到响应，则不会强制执行每个客户每分钟一个请求的要求.

也就是说，我很想知道是否可以将消息组和节流策略结合起来，以模拟 JIRA 中的功能请求。到目前为止，我的尝试都失败了。我在想一些事情：

```
<route>
  <from uri="activemq:pending?maxConcurrentConsumers=10"/>
  <throttle timePeriodMillis="60000">
    <constant>1</constant>
    <to uri="mock:endpoint"/>
  </throttle>
</route> 
```

但是，限制似乎适用于移动到端点的整个请求集，而不是适用于每个单独的消费者。我不得不承认，我有点惊讶地发现这种行为。我的期望是限制将单独应用于每个消费者，这将满足原始问题中的 SLA，前提是消息在 JMSXGroupId 标头中包含客户 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-21T02:21:25.757

我遇到了类似的问题，最后想出了这里描述的解决方案。

我的假设是：

*   消息的顺序并不重要（尽管它可以通过重新排序器来解决）
*   每个客户 ID 的消息总量不是很大，因此运行时没有饱和。

解决办法：

*   运行 aggregator 1 分钟，同时使用 customerID 将具有相同客户 ID 的消息组装到列表中
*   使用 Splitter 将列表拆分为单独的消息
*   将第一条消息从拆分器发送到实际服务
*   将列表的其余部分重新路由回聚合器。

Java DSL 版本更容易理解：

```
final AggregationStrategy aggregationStrategy = AggregationStrategies.flexible(Object.class)
        .accumulateInCollection(ArrayList.class);

from("direct:start")
    .log("Receiving ${body}")
    .aggregate(header("customerID"), aggregationStrategy).completionTimeout(60000)
        .log("Aggregate: releasing ${body}")
        .split(body())
        .choice()
            .when(header(Exchange.SPLIT_INDEX).isEqualTo(0))
                .log("*** Processing: ${body}")
                .to("mock:result")
            .otherwise()
              .to("seda:delay")
        .endChoice();

from("seda:delay")
    .delay(0)
    .to("direct:start"); 
```

Spring XML 版本如下所示：

```
 <!-- this is our aggregation strategy defined as a spring bean -->
 <!-- see http://stackoverflow.com/questions/27404726/how-does-one-set-the-pick-expression-for-apache-camels-flexibleaggregationstr -->
 <bean id="_flexible0" class="org.apache.camel.util.toolbox.FlexibleAggregationStrategy"/>
 <bean id="_flexible2" factory-bean="_flexible0" factory-method="accumulateInCollection">
     <constructor-arg value="java.util.ArrayList" />
 </bean>

<camelContext xmlns="http://camel.apache.org/schema/spring">
       <route>
           <from uri="direct:start"/>
           <log message="Receiving ${body}"/>
           <aggregate strategyRef="_flexible2" completionTimeout="60000" >
               <correlationExpression>
                   <xpath>/order/@customerID</xpath>
               </correlationExpression>
               <log message="Aggregate: releasing ${body}"/>
               <split>
                   <simple>${body}</simple>
                   <choice>
                       <when>
                           <simple>${header.CamelSplitIndex} == 0</simple>
                           <log message="*** Processing: ${body}"/>
                           <to uri="mock:result"/>
                       </when>
                       <otherwise>
                           <log message="--- Delaying: ${body}"/>
                           <to uri="seda:delay" />
                       </otherwise>
                   </choice>
               </split>
           </aggregate>
       </route>

       <route>
           <from uri="seda:delay"/>
           <to uri="direct:start"/>
       </route>
</camelContext> 
```

# simulation - HLA 入门套件

> ID：12368945
> 
> 赞同：0
> 
> 时间：2012-09-11T11:44:10.780
> 
> 标签：simulation, high-level-architecture

我在哪里可以找到[高级架构 (HLA)](http://en.wikipedia.org/wiki/High_Level_Architecture)的介绍来帮助我构建分布式仿真？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:44:10.780

可以在[http://www.pitch.se/hlatutorial](http://www.pitch.se/hlatutorial)上找到教程。

# csv - 在共享服务器上安装 Ocaml 驼峰库

> ID：12368953
> 
> 赞同：2
> 
> 时间：2012-09-11T11:44:33.353
> 
> 标签：csv, shared-libraries, ocaml

我正在尝试使用 Ocaml csv 库。我下载了[csv-1.2.3](http://csv.forge.ocamlcore.org/)并在安装 findlib 后按照安装说明进行操作：

> 1.  解压缩源存档并转到包的根目录，
> 2.  运行'ocaml setup.ml -configure'，
> 3.  运行'ocaml setup.ml -build'，
> 4.  运行'ocaml setup.ml -install'

现在我在目录中有`META`, `csv.a`, `csv.cma`, `csv.cmi`, `csv.cmx`, `csv.cmxa`,`csv.mli`文件`~/opt/lib/ocaml/site-lib/csv`。我认为shell 命令`ocamlfind list -describe`给出`csv A pure OCaml library to read and write CSV files. (version: 1.2.3)`的意思是 csv 已正确安装。

但是当我添加

```
 let data = Csv.load "foo.csv" in 
```

在我的`compute.ml`模块中并尝试在更大的程序包中编译它我有编译错误：

```
File "_none_", line 1, characters 0-1:
Error: No implementations provided for the following modules:
         Csv referenced from compute.cmx" 
```

如果我只是输入

```
let data = load "foo.csv" in 
```

我得到：

```
File "compute.ml", line 74, characters 13-17:
Error: Unbound value load 
```

当我使用`Csv.load`或`load`直接在 Ocaml 终端中时，我遇到了相同类型的错误。有人知道我的代码或库安装有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:13:35.657

我的猜测是你正在使用`ocamlfind`编译（`ocamlfind ocamlc -package csv ...`），因为你有一个链接错误，而不是一个类型检查错误（如果你根本没有指定 where `csv`is）。在这种情况下，解决方案可能是在`-linkall`生成可执行文件的最终编译行中添加一个选项，要求它`csv.cmx`与它链接。否则，请尝试使用`ocamlfind`，是的，告诉我们您的编译命令是什么。

对于顶层，它非常容易使用`ocamlfind`。观看此顶级互动：

```
% ocaml
        Objective Caml version 3.12.1

# #use "topfind";;
- : unit = ()
Findlib has been successfully loaded. Additional directives:
  #require "package";;      to load a package
  #list;;                   to list the available packages
  #camlp4o;;                to load camlp4 (standard syntax)
  #camlp4r;;                to load camlp4 (revised syntax)
  #predicates "p,q,...";;   to set these predicates
  Topfind.reset();;         to force that packages will be reloaded
  #thread;;                 to enable threads

- : unit = ()
# #require "csv";;
/usr/lib/ocaml/csv: added to search path
/usr/lib/ocaml/csv/csv.cma: loaded
# Csv.load;;
- : ?separator:char -> ?excel_tricks:bool -> string -> Csv.t = <fun> 
```

要明确。我在顶层输入过一次是：

```
#use "topfind";;
#require "csv";;
Csv.load;; (* or anything else that uses Csv *) 
```

# qt - QTreeview：如何更改文本项的默认位置

> ID：12368959
> 
> 赞同：4
> 
> 时间：2012-09-11T11:44:42.120
> 
> 标签：qt

您能否让我知道如何在 QTreeView 中更改项目的位置。默认情况下，项目显示在最左侧和项目框的中心。但是我应该如何更改它以使其显示在顶部

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:34:11.017

**使用 Qt 内置项目模型**

如果您正在使用例如`QFileSystemModel`，您必须从它继承并覆盖`data()`行为：

```
class MyFileSystemModel : public QFileSystemModel {
public:
  QVariant data(const QModelIndex & index, int role = Qt::DisplayRole) const {
    if (role == Qt::TextAlignmentRole)
      return Qt::AlignTop; //maybe different result depending on column/row
    else
      return QFileSystemModel::data(index, role);
  } 
```

然后改用那个类。

**使用自己的项目模型**

如果您实现了自己的项目模型，您所要做的就是`Qt::TextAlignmentRole`处理`data()`：

```
QVariant MyTreeModel::data (const QModelIndex &index, int role) const {
  if (role == Qt::TextAlignmentRole)
    return Qt::AlignTop; //maybe different result depending on column/row

  //handle other roles

  return QVariant();
} 
```

树视图现在应该自动将项目对齐到顶部。

如果您想进一步自定义外观，[以下](http://qt-project.org/doc/qt-4.8/qt.html#ItemDataRole-enum)是`QTreeView`. 对于更多定制，我认为您必须实现自己的`QTreeView`子类。

**使用 QStandardItemModel**

如果您没有实现自己的模型但使用了您必须在将它们添加到模型之前`QStandardItemModel`调用 您`setTextAlignment(Qt::Alignment alignment)`的标准项目。`Qt::AlignTop`

# java - 如何在windows中检索所有应用程序最近使用的文件

> ID：12368962
> 
> 赞同：1
> 
> 时间：2012-09-11T11:44:55.960
> 
> 标签：java, windows

我想使用 java 找出 windows env 中所有应用程序最近使用的文件。我试过了

1.  使用注册表：我正在尝试从 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\ComDlg32\OpenSavePidlMRU 获取最近的文件信息。但是我得到了一些“十六进制”值，但我无法检索等效的字符串。我也试过 [http://code.google.com/p/java-registry/](http://code.google.com/p/java-registry/)

2.  我也尝试过使用“最近”文件夹。但我无法获得文件的实际类型/路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:01:10.237

听起来像是 Sysinternal 的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)的工作（现在，这是官方的 - 并且免费的 - Microsoft 软件）。首先，像这样添加值为“java.exe”的进程名称类型的过滤器，然后添加“ReadFile”和“WriteFile”操作作为附加过滤器，如下所示：

![进程监视器过滤器编辑器屏幕截图](../Images/58a8c1db159bcd507000716eb665af8c.png)

# javascript - 在页面加载时上传 swf 请求 URL

> ID：12368964
> 
> 赞同：11
> 
> 时间：2012-09-11T11:45:00.237
> 
> 标签：javascript, asp.net, flash, uploadify

我在 Asp.net 网站上使用 Uploadify，页面的 url 是 /Resource/Create/id，但在页面加载时，uploadify 似乎正在向该页面的根 url /Resource/Create/ 发出请求

这会导致服务器错误，因为没有提供 id 并填写我的日志，有没有人知道它可能请求什么以及是否可以将其设置为不请求此 url。这是我的 JS：

```
var id = $('#fileUpload').attr('data-id');
$('#fileUpload').uploadify({
  'swf': '/Scripts/Libraries/uploadify/uploadify.swf',
  'uploader': '/Resource/Upload/' + id
}) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T12:01:13.450

我已经按照 eugen 对此线程的评论解决了这个问题，

[http://www.uploadify.com/forum/#/discussion/7329/uploadify-v3-bug-unecessary-request-when-there-is-no-button_image_url-set-/p1](http://www.uploadify.com/forum/#/discussion/7329/uploadify-v3-bug-unecessary-request-when-there-is-no-button_image_url-set-/p1)

> 在文件的上半部分找到以下代码：
> 
> this.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url)
> 
> 并将其重写为：
> 
> this.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url = this.settings.button_image_url ？SWFUpload.completeURL(this.settings.button_image_url) : this.settings.button_image_url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T14:17:04.833

troyanx，给我一个很好的提示，这行得通！只需替换 jquery.uploadify.js （.min 与否）：

```
this.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url); 
```

为了：

```
if (this.settings.button_image_url != "") { this.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url);} 
```

在我的情况下，swf 的负载正在向加载 uploadify 的页面的同一 url 文件夹发出请求。

来自：[http ://www.uploadify.com/forums/discussion/comment/16999#Comment_16999](http://www.uploadify.com/forums/discussion/comment/16999#Comment_16999)

# perl - 如何使用 perl 抓取 ASP 网站？

> ID：12368965
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:00.280
> 
> 标签：perl, asp-classic, web-crawler

请告诉我哪个模块用于抓取一个完全用 ASP 开发的网站，并且它的所有内容都不是正确的 HTML 语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:05:41.393

使用哪种语言开发网站并不重要。您（客户）从网站获得的只是生成的 HTML（或在这种情况下损坏的 HTML）。

您可以使用“LWP”库和“get”函数将网站内容读入变量...然后使用正则表达式对其进行分析。

像这样：

```
use strict;
use LWP::Simple;
my $url = 'http://...';
my $content = get $url;
if ($content =~ m/.../) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:40:24.493

或者你可以使用[WWW::Mechanize](https://metacpan.org/module/WWW::Mechanize)。它建立在`LWP`（这`LWP::Simple`是一个非常*简单*的子集）之上，并提供了许多方便的“类似浏览器”的行为。例如，带有登录 cookie 和其他内容的 ASP 生成网站的典型会话管理由 Mechanize 自动处理。

```
use strict; use warnings;
use WWW::Mechanize;
my $mech = WWW::Mechanize->new;
$mech->get( 'http:://www.example.org/login.asp' );
$mech->submit_form(
    form_number => 3,
    fields      => {
        username    => 'test',
        password    => 'secret',
    }
); 
```

虽然这首先有利于测试，但它仍然具有 LWP 继承的方法，您可以访问普通请求。因此，您也可以访问请求，同时仍然拥有内置解析器访问表单和链接的能力。

还要考虑使用适当的 HTML 解析器，即使网站的输出不是很花哨。周围有几个可以处理它。这比仅仅建立[一堆正则表达式](https://stackoverflow.com/a/1732454/1331451)要容易得多。一旦您需要返回，这些将很难维护，因为页面已经更改了某些内容。

以下是包含此主题信息的相关问题列表：

*   [使用 Perl 解析 html](https://stackoverflow.com/questions/7319756/parse-html-using-perl)
*   [使用 Perl 解析 html](https://stackoverflow.com/questions/6774223/parse-html-using-perl)
*   [Perl 从 HTML 表中解析链接](https://stackoverflow.com/questions/6543708/perl-parse-links-from-html-table)
*   [在 Perl 中解析 HTML 和 CSS 有哪些好方法？](https://stackoverflow.com/questions/5033993/what-are-some-good-ways-to-parse-html-and-css-in-perl)

# iphone - 如何将旋转图像与背景图像合并？

> ID：12368967
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:08.893
> 
> 标签：iphone

> **可能重复：**
> [旋转图像后如何合并两个图像？](https://stackoverflow.com/questions/12399811/how-to-merge-two-images-after-rotate-the-image)

我使用了两张图像，前景图像旋转，背景图像稳定。如何合并这两个图像？它不适合我。提前致谢。

```
UIGraphicsBeginImageContext(itemSize);
CGRect backgroundImageRect = CGRectMake(0.0, 0.0, itemSize.width, itemSize.height);
CGRect foregroundImageRect = CGRectMake(rsImageView.frame.origin.x, rsImageView.frame.origin.y, rsImageView.frame.size.width, rsImageView.frame.size.height);
[backgroundImageView.image drawInRect:backgroundImageRect];
[rsImageView.image drawInRect:foregroundImageRect];
overlappedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我正在使用此代码。但不合并旋转图像。它只合并最后一个图像帧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:51:23.623

这里 imgDisplayImage 是 UIInageVew 的实例，lastRotation 是总旋转角度

```
 //...code...//
CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);

    CGContextTranslateCTM(context, [self.imgDisplayImage center].x, [self.imgDisplayImage center].y);
    CGContextRotateCTM(context, lastRotation);
    CGContextTranslateCTM(context,
                          -self.imgDisplayImage.frame.size.width * [[self.imgDisplayImage layer] anchorPoint].x,
                          -self.imgDisplayImage.frame.size.height * [[self.imgDisplayImage layer] anchorPoint].y);

        [self.imgDisplayImage.layer renderInContext:context];
    CGContextRestoreGState(context);
    // . . . 
```

# javascript - 添加另一个脚本时，onbeforeunload 不起作用

> ID：12368968
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:10.127
> 
> 标签：javascript, jquery, onbeforeunload

我有这段小代码可以在离开页面之前检查表单字段是否有任何变化

```
$(document).ready(function(){

    var form = $('#submit-form'),
        original = form.serialize();
    form.submit(function(){
        window.onbeforeunload = null;
    });

    window.onbeforeunload = function(){

        if (form.serialize() != original)
            return 'Changes detected';
    };
}); 
```

它工作得很好。然后我将[tag-it](http://aehlke.github.com/tag-it/)集成到我的页面中，上面的脚本不再工作了。如果我注释掉包含 tag-it.js 的行，它会再次起作用。我对javascript一无所知，我不知道为什么它不起作用。

这是 tag-it.js 脚本的链接（顺便说一句非常好）

[https://github.com/aehlke/tag-it/blob/master/js/tag-it.js](https://github.com/aehlke/tag-it/blob/master/js/tag-it.js)

编辑：

通过不工作，我的意思是如果我编辑表单并想离开页面，则没有任何弹出窗口。

如果我不包含 tag-it.js 文件（上面链接），一切正常，当我编辑表单并尝试离开页面时，我会弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:47:12.933

您应该检查 window.onbeforeunload 是否已经定义，如果是，那么您可以

如下调用旧的：//第一个文件

```
 window.onbeforeunload = function(){

            if (form.serialize() != original)
                return 'Changes detected';
        };
    // other file
    var olderonbeforeunload = window.onbeforeunload;

    window.onbeforeunload = function(){
           if(typeof olderonbeforeunload == 'function'){
           olderonbeforeunload.apply(arguments);
         }
           // new code
        }; 
```

# stata - Stata的前端

> ID：12368972
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:16.153
> 
> 标签：stata

我的客户有几个已经运行了一段时间的 Stata 程序（.do 文件）。

是否可以为 Stata 提供前端页面或表单，以便我们可以选择不同的选项/标准并根据选择运行 Stata 上的某些程序？

基本上有没有办法为Stata程序创建表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-28T12:40:41.250

为程序制作“表单”的一种***粗略***方法是使用宏。这不是带有文本框的显式对话框形式，但它允许您从单个 .do 文件控制程序。基本上，在一个单独的 do 文件中使用一堆全局宏，然后在整个 .do 文件中使用这些宏。我下面的例子就是这样做的

**宏文件（表单 do-file）**

```
global projectname stackoverflow
global exportfmt putdocx
global analysisfolder "/file/path"
global dofilesfolder "/file/path" 
```

该宏`projectname`允许您为项目命名，因此我将它放在所有文件保存命令中，或者我`save`使用该名称清理了数据集。您甚至可以将其放在文件路径中。

使用or命令`exportfmt`生成报告时通常使用的宏。拥有一个全局变量可以让我在导出 pdf 或 docx 之间切换。`putdocx``putpdf`

`analysisfolder`然后，您可以使用宏`dofilesfolder`创建文件路径，只需填写“表格”即可为不同的项目调用这些路径。

**Do-files 使用**

```
$exportfmt clear
$analysisfolder
use $project, clear

$exportfmt begin
$exportfmt paragraph 
```

因此，使用您的所有宏创建一个单独的 do-file（表单 do-file），然后您可以在一个您认为合适的地方将它们全部更改。这不是一个真正的形式，但它可以简化整个 Stata 程序中许多事情的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:03:24.200

Stata 可以在批处理模式下启动

```
stata /b do whatever.do 
```

因此，您可以`whatever.do`使用方便的工具形成该文件，然后根据需要运行它。当然，您需要确保客户的 do-files 生成的任何输出都以计算机可读的格式保存（而不是仅仅留在屏幕上供分析人员复制并粘贴到 Word 中）。

这是由世界银行的 ADePT 团队实施的，参见[http://www.worldbank.org/adept](http://www.worldbank.org/adept)。它有一个 C# GUI，但它在内部运行 Stata。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:45:43.027

您可以从 Stata 的下拉菜单中创建一个可以使用的表单。见`help dialog_programming`页面。

# css - 自动换行 td 内容

> ID：12368973
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:16.347
> 
> 标签：css

表的第一个 td 中的内容文本很长，之间没有空格。然后我应用了 word-wrap:break-word。但这不起作用。任何人都可以遇到以下问题。请提出解决方案。

这是我的代码：http: [//jsfiddle.net/F556F/2/](http://jsfiddle.net/F556F/2/)

```
<div>
<table border=1 width=100%>
<tr>
    <td>12345678890123456788901234567889012345678890123456788901234567889012345678890</td>
    <td>SECOND</td>
</tr>
</table>
</div>​ 
```

CSS：

```
div{width:300px}
table tr td{width:50%;overflow:hidden;background-color:#ccc;width:200px;word-wrap:break-word}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:49:27.600

`table-layout: fixed`会帮助你：[小提琴的例子](http://jsfiddle.net/F556F/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:49:23.430

嗨，现在`text`像`div class`这样给这个

```
<div>
<table border=1>
<tr>
    <td><div class="ok">12345678890123456788901234567889012345678890123456788901234567889012345678890</div></td>
    <td>SECOND</td>
</tr>
</table>
</div> 
```

比定义`.ok`风格

***[现场演示](http://jsfiddle.net/F556F/5/)***

# php - 分组并获取最后一行

> ID：12368974
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:15.857
> 
> 标签：php, mysql, group-by

当我使用

```
SELECT * FROM reports WHERE staff='$username' GROUP BY taskid 
```

在我的查询中，我得到了该组第一行的结果。

我需要添加什么才能从该组的最后一行获得结果？

最后一行意味着 id 大于该组中的另一行。

我尝试添加

```
ORDER BY id DESC 
```

或者

```
ORDER BY id 
```

但它没有返回预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:47:03.203

您正在使用没有任何聚合函数的分组函数。您可能希望改为按顺序进行（查询中没有分组）：

```
SELECT * FROM reports WHERE staff='$username' order BY taskid desc; 
```

当您想对特定列使用聚合函数（例如获取平均行值或总和）等时，通常使用 Group By 函数。如果您不使用任何聚合函数，则使用 Group By 不会做任何事情。

如果您只想从查询中获取一行，则可以添加一个限制子句，如下所示：

```
SELECT * FROM reports WHERE staff='$username' order BY taskid desc limit 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:49:36.833

如果您想要**每个组**的“最后”行，那么您需要指定哪个字段定义唯一性（即“第一行/最后一行”的意思），然后在子查询中隔离这些行。

例如

这将为您提供每个组的 max(id)

```
SELECT taskid, max(id) as max_id FROM reports 
WHERE staff ='$username' 
GROUP BY taskid 
```

这将获得整行：

```
select * from reports where id 
in
(
    SELECT max(id) as max_id FROM reports 
    WHERE staff='$username' 
    GROUP BY taskid
) x 
```

这当然假设 id 是唯一的并按升序分配，因此 max(id) 表示每组的最后一行。

或者，您可以使用连接重写它：

```
select * from reports r
inner join
(
    SELECT max(id) as max_id FROM reports 
    WHERE staff='$username' 
    GROUP BY taskid
) x
on r.id = x.max_id 
```

# c# - 反序列化整个 FlowDocument 问题

> ID：12368975
> 
> 赞同：0
> 
> 时间：2012-09-11T11:45:18.890
> 
> 标签：c#, .net, wpf

我有以下字符串

```
<FlowDocument xml:space="preserve" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><Paragraph>Some text <LineBreak /><LineBreak /> <Run FontWeight="bold">Text ...</Run><LineBreak />sjhfdjsgfjsd <LineBreak /><LineBreak /> <Run FontWeight="bold">Text 2 </Run><LineBreak />sdkfskfjsf <LineBreak /><LineBreak /> </Paragraph></FlowDocument> 
```

我尝试使用此代码将其反序列化为 FlowDocument 但没有成功。

任何线索我错过了什么？

谢谢！

**代码**

```
 StringReader stringReader = new StringReader(xamlString);
 XmlReader xmlReader = XmlReader.Create(stringReader);
 Section sec = XamlReader.Load(xmlReader) as Section;
 FlowDocument doc = new FlowDocument();
 while (sec.Blocks.Count > 0)
   doc.Blocks.Add(sec.Blocks.FirstBlock);
 return doc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:55:13.993

好的，我找到了。

```
 var stringReader = new StringReader(xamlString);
 var xmlReader = XmlReader.Create(stringReader);
 var doc= XamlReader.Load(xmlReader) as FlowDocument; 
```

# javascript - 用于短文本的 JavaScript 字典编码器

> ID：12368979
> 
> 赞同：2
> 
> 时间：2012-09-11T11:45:29.220
> 
> 标签：javascript, algorithm, encoding, dictionary, compression

我有以下 JSON：

```
{"test": {"property 1": 345, "property 2": 976, "property 3": "asd"}} 
```

我需要将它压缩得非常短，就像那样（在 URL 中）

```
/#params=abs54sgdasd1we!ewd 
```

我在该 JSON 上有一个已定义属性的列表，这就是为什么我要问什么是 JS 的最佳字典编码器。稍后我应该能够从该字符串解码回 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:07:08.723

您可以只对整个 JSON[**字符串进行**](https://stackoverflow.com/a/912247/1431750)[**HTML 编码**](https://stackoverflow.com/a/1219983/1431750)。请记住，您需要在 Object/"Associative array"/"dictionary" 中成对使用，因为排序不是强制性的。否则，最终可能会因为没有密钥而导致意外结果。否则，将其转换为 Array/List 以便保持顺序并且您只依赖值的顺序。[](https://stackoverflow.com/a/912247/1431750)**`key``"key": "value"``345|976|"asd"``976|"asd"|345`**

 **如果“非常短”是主要要求并且它必须在 URL 中，则将 JSON 存储在数据库中并基于它生成一个 id 或哈希（如 crc、md5）作为可以添加到 URL 的查找键参数。

编辑：如果您不想切换到数组，则`property1`, `2`,`3`名称可以简化为`a`, 。`b``c`

Edit2：如果将与之交互的应用程序是 cookie 感知的，您可以将数据存储在 cookie 中，并将哈希存储在 URL 中。

而且，如果属性 1-3 的值有限，您可以将它们映射到固定长度的预定义值。**

# xcode - Xcode 和 dylib 搜索路径

> ID：12368980
> 
> 赞同：1
> 
> 时间：2012-09-11T11:45:32.777
> 
> 标签：xcode, macos, dyld, search-path

我有一个带有安装目录的框架和一个`@rpath`带有运行路径搜索路径的应用程序，`@loader_path/../Frameworks`它使用了这个框架。

构建后，我`My.app`在`My.framework`目录中`Build/Products/Debug`，我**不**复制`My.framework`到`My.app`包中。

如果我`My.app`从 Xcode 运行，它会从`Build/Products/Debug`目录运行并加载框架。如果我从 Finder 运行我的应用程序，它将无法按预期加载框架。

Xcode 是否设置运行时搜索路径以及如何设置？DYLD_LIBRARY_PATH？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:37:14.277

是的，Xcode 在运行您的应用程序时同时设置`DYLD_LIBRARY_PATH`和`DYLD_FRAMEWORK_PATH`指向您构建的产品目录。

# android - 如何获取 flickr 的用户 ID？

> ID：12368982
> 
> 赞同：1
> 
> 时间：2012-09-11T11:45:46.333
> 
> 标签：android, flickr

我正在创建一个与从中获取图像相关的应用程序，`flickr`但在此通过传递用户 ID，我们将从特定帐户获取图像，并手动提供用户 ID。

`login`但是当用户使用用户名和密码时，我需要用户 ID 。

如何通过传递用户名和密码来获取用户ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:10:54.943

您的表述不是很清楚，但是如果您要问的是如何从用户名中获取用户 ID，因为 flickr 使用[OAuth](http://www.flickr.com/services/api/auth.oauth.html)；快速查看 api 文档可以为您提供需要使用的查询：

[lookupuser](http://www.flickr.com/services/api/flickr.urls.lookupUser.html)似乎很有用或 [findbyusername](http://www.flickr.com/services/api/flickr.people.findByUsername.html) 第一个为您提供与用户 url 对应的 id，第二个为您提供与用户名对应的 id。

您只需要解析响应以获取 id（除非 flickr 提供了一个为您进行解析的包装器，但似乎并非如此：）

# c# - SQL 将 dd-MM-yyyy HH:mm:SS 转换为 MM/dd/yyyy

> ID：12368983
> 
> 赞同：3
> 
> 时间：2012-09-11T11:45:48.707
> 
> 标签：c#, sql, sql-server, datetime-format

我怎样才能转换`'11-09-2012 5:08:31 PM'`为`'09/11/2012'`？（从`dd-MM-yyyy HH:mm:SS`到`MM/dd/yyyy`）。

日期是`11 September 2012`。
或者有什么方法可以在 C# 中转换它？但在 C# 中，我只想要日期而不是字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:49:48.767

使用**SQL Server**查询：

```
SELECT CONVERT(DATETIME, '11-09-2012 5:08:31 PM', 101); 
```

这将在`MM/dd/yyyy`.For 中进行转换。有关更多信息，请参阅[CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)以及[如何从字符串转换为日期时间？](http://www.sqlusa.com/bestpractices/datetimeconversion/)

* * *

使用**C#**进行转换。

你可以这样做：

```
string myDate = Convert.ToDateTime("11-09-2012 5:08:31 PM").ToString("MM/dd/yyyy"
                                                  ,CultureInfo.InvariantCulture); 
```

但是由于您不想导致结果`String`，因此可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法。

```
DateTime parsedDate = DateTime.ParseExact("11-09-2012 5:08:31 PM", 
                                          "MM/dd/yyyy", 
                                          CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:49:07.580

**SQL 服务器：**

对 [MM/DD/YYYY] 格式执行以下操作：

```
SELECT CONVERT(VARCHAR(10), CAST('11-09-2012 5:08:31 PM' AS DATETIME), 101) AS [MM/DD/YYYY] 
```

同样，如果你想转换为 [DD/MM/YYYY] 格式，你可以这样做

```
SELECT CONVERT(VARCHAR(10), CAST('11-09-2012 5:08:31 PM' AS DATETIME), 103) AS [DD/MM/YYYY] 
```

* * *

**C＃**

在 C# 中，您只需这样做：

```
string formattedDt= Convert.ToDateTime("11-09-2012 5:08:31 PM")
                           .ToString("MM/dd/yyyy",CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:49:37.237

在 c# 中，您应该能够使用以下[方法](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)：

```
DateTime.ToShortDateString(); 
```

甚至：

```
DateTime.Now.Date -- will produce just the date 
```

来自 MSDN 的注释：

> ToShortDateString 方法返回的字符串区分区域性。它反映了当前区域性的 DateTimeFormatInfo 对象定义的模式。例如，对于 en-US 文化，标准的短日期模式是“M/d/yyyy”；对于 de-DE 文化，它是“dd.MM.yyyy”；对于 ja-JP 文化，它是“yyyy/M/d”。特定计算机上的特定格式字符串也可以自定义，使其不同于标准的短日期格式字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:52:33.530

```
string date = "11-09-2012 5:08:31 PM";
string newDate = DateTime.Parse(date).ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T11:56:30.270

这是使用日期时间解析的示例代码，有关更多信息，您可以访问链接[C-sharp 日期时间格式](http://www.csharp-examples.net/string-format-datetime/)

```
string inputString = "11/08/2012";
DateTime dt = DateTime.MinValue;
try {
dt = DateTime.Parse(inputString);    
} 
catch (Exception ex) {
// handle the exception however you like.
return;
}
string formattedDate = String.Format("{0:MMM d, yyyy}", dt); 
```

# ios - 如何将叠加层添加到 UITabbarController

> ID：12368986
> 
> 赞同：0
> 
> 时间：2012-09-11T11:46:09.077
> 
> 标签：ios, uitabbarcontroller

嗨，我有一个`UITabBarController`我想在上面添加一个包含注册表单的叠加层。我见过几个地方可以使用这个命令：

`[[[UIApplication sharedApplication] keyWindow] addSubview:registrationView];`

但是如何从情节提要创建registrationView并能够从`UITabBarController`？

注意：我的 registrationView 应该隐藏标签，所以我不能把它放在一个标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:16:36.977

嘿，这将解决你的问题

```
UITabBarController *tabBarController = (UITabBarController *) self.window.rootViewController;

 ViewController *RegistrationView = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
 [tabBarController presentModalViewController:RegistrationView animated:YES];

 [tabBarController.selectedViewController viewDidAppear:true]; 
```

在`- (void)applicationDidBecomeActive:(UIApplication *)application`函数中执行此操作

# ios - iOS：防止删除 plist 中未设置的属性

> ID：12368987
> 
> 赞同：0
> 
> 时间：2012-09-11T11:46:10.660
> 
> 标签：ios, plist

是否可以防止删除未设置的属性（在 plist 中）？

我的代码：

```
- (NSString*)dataFilePath {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
return documentsDirectory;
}

- (void)store {
    if ([[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
        NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
        [dict setValue:textField.text forKey:@"text"];
        [dict setValue:textField2.text forKey:@"text2"];
        [dict writeToFile:[[self dataFilePath] stringByAppendingPathComponent:fileName] atomically:NO];
    }
}

- (void)load {
    if ([[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
        NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:[[self dataFilePath] stringByAppendingPathComponent:fileName]];
        textField.text = [dict objectForKey:@"text"];
        textField2.text = [dict objectForKey:@"text2"];
    }
} 
```

如果我注释掉该行`[dict setValue:textField2.text forKey:@"text2"];`，该属性将被删除。是否可以说覆盖属性，但保持存在？

迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:57:57.803

你可以附加你的字符串，然后像这样存储在 plist 中：

```
 - (void)store {
if ([[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
    NSString *strText = [dict objectForKey:@"text"];
    [dict setValue:[strText stringByAppendingString:textField.text] forKey:@"text"];
     NSString *strText2 = [dict objectForKey:@"text2"];
    [dict setValue:[strText2 stringByAppendingString:textField2.text] forKey:@"text2"];
    [dict writeToFile:[[self dataFilePath] stringByAppendingPathComponent:fileName] atomically:YES];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:35:14.290

这是我的解决方案：

```
- (NSString*)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return documentsDirectory;
}

- (void)storeDictionary:(NSDictionary*)values {
    if ([[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
        NSMutableDictionary *dict = [self load];
        NSArray *allKeys = values.allKeys;
        for (int i = 0; i < allKeys.count; i++) {
            [dict setValue:[values objectForKey:[allKeys objectAtIndex:i]] forKey:[allKeys objectAtIndex:i]];
        }
        [dict writeToFile:[[self dataFilePath] stringByAppendingPathComponent:fileName] atomically:NO];
    }
}

- (NSMutableDictionary*)load {
    NSMutableDictionary *dict;
    if ([[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
        dict = [[NSMutableDictionary alloc] initWithContentsOfFile:[[self dataFilePath] stringByAppendingPathComponent:fileName]];
    }
    return dict;
} 
```

迈克

# php - 即使没有结果也存在一行

> ID：12368991
> 
> 赞同：0
> 
> 时间：2012-09-11T11:46:23.260
> 
> 标签：php, mysql

我有一个查询：

```
SELECT info.pID, Name, Addr, Phone, GROUP_CONCAT(URL) as URL FROM info, images WHERE info.pID = images.pID AND place='$place'; 
```

即使没有找到结果，也会创建一行（如 num_rows 和 js .length 所述），任何想法为什么？这不是一件平常的事情。

**JSON结果打印：**

```
[{"0":null,"pID":null,"1":null,"Name":null,"2":null,"Addr":null,"3":null,"Phone":null,"4":null,"URL":null}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:56:35.920

这是因为`GROUP_CONCAT`：所有聚合函数都具有相似的行为，在构建结果集时执行查询并执行 concat。如果没有结果，它将连接 NULL，并添加到其他为空的结果集中。如果一个字段包含一个值（在这种情况下是函数返回的 NULL），则所有其他字段也会显示（显然）。

这解释了 1 行结果，其中所有内容均为空。删除 group_concat，您将不会得到任何结果。想想其他聚合函数`COUNT()`在相同情况下的表现。
[这是所有聚合函数的列表](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:50:10.260

在您指定的行中可能还有其他包含数据的列`place='$place'`

`SELECT`之前的部分`FROM`仅过滤您从其余查询中获得的结果。因此，如果`FROM info, images WHERE info.pID = images.pID AND place='$place';`找到某些东西，您就会得到结果。然后，您过滤结果并仅选择可能为空的特定列，因此您的结果。

# windows-8 - 定期磁贴更新

> ID：12368993
> 
> 赞同：0
> 
> 时间：2012-09-11T11:46:32.493
> 
> 标签：windows-8, microsoft-metro

我正在开发一个允许使用字典（例如英德）的应用程序。我想在开始屏幕上为我的应用程序启用定期磁贴更新。我想显示带有随机字典翻译的随机单词，所以我想做的只是显示 2 个字符串（我找到了一个合适的模板）。我可以使用一次显示通知， `TileUpdateManager.CreateTileUpdaterForApplication().AddToSchedule()` 但我希望它每分钟都发生一次。我只找到了使用 `TileUpdateManager.CreateTileUpdaterForApplication().StartPeriodicUpdate()`方法的示例，它们都使用了一些网址。有什么方法可以只使用我的本地字符串而不访问云或其他东西来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:57:14.953

*为了在您的应用程序未运行时*定期显示定期磁贴更新，您需要提供一个每隔一段时间就会请求一次的 URL（我认为您不能将其设置为 1 分钟那么频繁 - 我认为至少是15分钟。）。

如果您的应用程序在前台，您可以简单地运行一个计时器并每分钟显示一次更新。

您可以使用推送通知，但同样 - 这比提供返回 XML 以进行磁贴更新的 URL 更复杂。

如果您想查看可能性：[http ://blog.equinoxe-consulting.net/blog/bard-rsquo-s-tile-i-introduction-and-local-tiles-and-badges](http://blog.equinoxe-consulting.net/blog/bard-rsquo-s-tile-i-introduction-and-local-tiles-and-badges)

# python - Python中随机种子的范围是什么？

> ID：12368996
> 
> 赞同：27
> 
> 时间：2012-09-11T11:46:41.527
> 
> 标签：python, random, scope, random-seed

如果我在模块中的一个类中使用 Python 函数`random.seed(my_seed)`，这个种子是否会保留给在该模块中实例化的所有其他类？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-11T11:51:58.127

是的，种子是为`Random()`模块中的（隐藏的）全局实例设置的。从[文档](http://docs.python.org/library/random.html)中：

> 该模块提供的函数实际上是`random.Random`类的隐藏实例的绑定方法。您可以实例化您自己的实例`Random`以获取不共享状态的生成器。

`Random()`如果您需要将种子分开，请使用单独的实例；您可以在实例化它时传入一个新种子：

```
>>> from random import Random
>>> myRandom = Random(anewseed)
>>> randomvalue = myRandom.randint(0, 10) 
```

该类支持与模块相同的接口。

# r - 轴标签与轴值重叠

> ID：12368997
> 
> 赞同：3
> 
> 时间：2012-09-11T11:46:44.967
> 
> 标签：r

我在正确绘制下图的标签时遇到问题：

```
scatterhist = function(x, y, xlab="", ylab=""){
  zones=matrix(c(2,0,1,3), ncol=2, byrow=TRUE)
  layout(zones, widths=c(4/5,1/5), heights=c(1/5,4/5))
  xhist = hist(x, plot=F, breaks=10)
  yhist = hist(y, plot=F, breaks=10)
  top = max(c(xhist$counts, yhist$counts))

  par(mar=c(3,3,1,1))
  plot(x, y)

  par(mar=c(0,3,1,1))
  barplot(xhist$counts, axes=FALSE, ylim=c(0, top), space=0)

  par(mar=c(3,0,1,1))
  barplot(yhist$counts, axes=FALSE, xlim=c(0, top), space=0, horiz=TRUE)

  par(oma=c(3,3,0,0))
  mtext(xlab, side=1, line=1, outer=TRUE, adj=0, 
    at=.8 * (mean(x)-min(x))/(max(x)-min(x)))
  mtext(ylab, side=2, line=1, outer=TRUE, adj=0, 
    at=.8 * (mean(y)-min(y))/(max(y)-min(y)))
} 
```

当我输入：

```
scatterhist(x[,6], x[,7], xlab="Cost of Taxi", ylab="Cost of Fuel") 
```

标签与轴值重叠。但是，如果我输入：

```
scatterhist(x[,6], x[,7], xlab="Cost of Taxi", ylab="Cost of Fuel")
scatterhist(x[,6], x[,7], xlab="Cost of Taxi", ylab="Cost of Fuel") 
```

第二张图正确显示...有人可以帮我解决这个问题吗？我也尝试`windows()`在第一个绘图之前打开图形窗口，但这不起作用......

谢谢！斯特凡诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:57:48.253

您的`par(oma=c(3,3,0,0))`线应该在第一次`par(mar=...)`调用之前出现，因为它应该应用于整个设备区域（即，如果您已经绘制了一些图表，则不能更改外边距的大小）。

```
scatterhist = function(x, y, xlab="", ylab=""){
    zones=matrix(c(2,0,1,3), ncol=2, byrow=TRUE)
    layout(zones, widths=c(4/5,1/5), heights=c(1/5,4/5))
    par(oma=c(3,3,0,0))

    xhist = hist(x, plot=F, breaks=10)
    yhist = hist(y, plot=F, breaks=10)
    top = max(c(xhist$counts, yhist$counts))

    par(mar=c(3,3,1,1))
    plot(x, y)

    par(mar=c(0,3,1,1))
    barplot(xhist$counts, axes=FALSE, ylim=c(0, top), space=0)

    par(mar=c(3,0,1,1))
    barplot(yhist$counts, axes=FALSE, xlim=c(0, top), space=0, horiz=TRUE)

    mtext(xlab, side=1, line=1, outer=TRUE, adj=0, 
        at=.8 * (mean(x)-min(x))/(max(x)-min(x)))
    mtext(ylab, side=2, line=1, outer=TRUE, adj=0, 
        at=.8 * (mean(y)-min(y))/(max(y)-min(y)))
    } 
```